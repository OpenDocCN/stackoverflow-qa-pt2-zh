# StackOverflow 问答 13499000-13499999

# teradata - 假脱机空间错误。请帮忙优化

> ID：13499000
> 
> 赞同：2
> 
> 时间：2012-11-21T17:42:02.200
> 
> 标签：teradata, spool

我正在尝试在 Teradata SQL Assistant 中生成以下查询。不幸的是，我遇到了假脱机空间错误。关于如何使用更少的资源执行此查询的任何提示？

```
SELECT TOP 10
        A.USER_ID, 
        C.SUPER_NM_LVL2,
        C.SUPER_NM_LVL1, 
        DIR.SUPER_NM_LVL2,
        A.ACTIVITY_DT,
        B.MTN, 
        A.ACCT_NUM,
        A.PPLAN_CD_CURR

FROM DLY_LINE_ACTIVITY_PPLAN_V AS A

INNER JOIN 
            CUST_ACCT_LINE_V AS B
            ON A.ACCT_NUM=B.ACCT_NUM

INNER JOIN 
            HR_EMPLOYEE_V AS C   
            ON A.USER_ID=C.NT_USER_ID 

INNER JOIN 
            HR_EMPLOYEE_V AS DIR
            ON C.SUPER_ID_LVL2_EMP_ID=DIR.EMP_ID

WHERE 
            A.ACTIVITY_DT >= '2012-11-01' 
            AND A.ACTIVITY_DT <= '2012-11-19'
            AND C.EMP_AREA_CD = 'WE'
            AND A.PPLAN_CD_CURR IN ('86489', '86491', '86492', 
                '86494', '86495', '86496', '86497', '86498', '86499', '86500', '86501', 
                '86502', '86487', '86489', '86504', '86505', '86506', '86507', '86508', 
            '86509', '86510', '86511', '86512')

GROUP BY 
        A.USER_ID, 
        C.SUPER_NM_LVL2,
        C.SUPER_NM_LVL1, 
        DIR.SUPER_NM_LVL2,
        A.ACTIVITY_DT,
        B.MTN, 
        A.ACCT_NUM,
        A.PPLAN_CD_CURR 
```

编辑：这是解释语句。

```
Explanation
  1) First, we lock UDM_PRDSTG_SECTBLS.MASKING_PROD_NM_XREF in view
     NTL_PRD_ALLVM.CUST_ACCT_LINE_V for access, we lock
     UDM_PRD_TBLS.DLY_LINE_ACTIVITY_PPLAN in view
     NTL_PRD_ALLVM.DLY_LINE_ACTIVITY_PPLAN_V for access, we lock
     UDM_PRD_TBLS.CUST_ACCT_LINE in view NTL_PRD_ALLVM.CUST_ACCT_LINE_V
     for access, and we lock UDM_PRD_TBLS.HR_EMPLOYEE in view
     NTL_PRD_ALLVM.HR_EMPLOYEE_V for access. 
  2) Next, we execute the following steps in parallel. 
       1) We do an all-AMPs RETRIEVE step from a single partition of
          UDM_PRD_TBLS.DLY_LINE_ACTIVITY_PPLAN in view
          NTL_PRD_ALLVM.DLY_LINE_ACTIVITY_PPLAN_V with a condition of (
          "(NOT (UDM_PRD_TBLS.DLY_LINE_ACTIVITY_PPLAN in view
          NTL_PRD_ALLVM.DLY_LINE_ACTIVITY_PPLAN_V.ACCT_NUM IS NULL ))
          AND ((NOT (UDM_PRD_TBLS.DLY_LINE_ACTIVITY_PPLAN in view
          NTL_PRD_ALLVM.DLY_LINE_ACTIVITY_PPLAN_V.USER_ID IS NULL ))
          AND ((UDM_PRD_TBLS.DLY_LINE_ACTIVITY_PPLAN in view
          NTL_PRD_ALLVM.DLY_LINE_ACTIVITY_PPLAN_V.ACTIVITY_DT <= DATE
          '2012-11-19') AND ((UDM_PRD_TBLS.DLY_LINE_ACTIVITY_PPLAN in
          view NTL_PRD_ALLVM.DLY_LINE_ACTIVITY_PPLAN_V.ACTIVITY_DT >=
          DATE '2012-11-01') AND ((UDM_PRD_TBLS.DLY_LINE_ACTIVITY_PPLAN
          in view NTL_PRD_ALLVM.DLY_LINE_ACTIVITY_PPLAN_V.PPLAN_CD_CURR
          = '86489') OR ((UDM_PRD_TBLS.DLY_LINE_ACTIVITY_PPLAN in view
          NTL_PRD_ALLVM.DLY_LINE_ACTIVITY_PPLAN_V.PPLAN_CD_CURR =
          '86487') OR ((UDM_PRD_TBLS.DLY_LINE_ACTIVITY_PPLAN in view
          NTL_PRD_ALLVM.DLY_LINE_ACTIVITY_PPLAN_V.PPLAN_CD_CURR =
          '86491') OR ((UDM_PRD_TBLS.DLY_LINE_ACTIVITY_PPLAN in view
          NTL_PRD_ALLVM.DLY_LINE_ACTIVITY_PPLAN_V.PPLAN_CD_CURR =
          '86492') OR ((UDM_PRD_TBLS.DLY_LINE_ACTIVITY_PPLAN in view
          NTL_PRD_ALLVM.DLY_LINE_ACTIVITY_PPLAN_V.PPLAN_CD_CURR =
          '86494') OR ((UDM_PRD_TBLS.DLY_LINE_ACTIVITY_PPLAN in view
          NTL_PRD_ALLVM.DLY_LINE_ACTIVITY_PPLAN_V.PPLAN_CD_CURR =
          '86495') OR ((UDM_PRD_TBLS.DLY_LINE_ACTIVITY_PPLAN in view
          NTL_PRD_ALLVM.DLY_LINE_ACTIVITY_PPLAN_V.PPLAN_CD_CURR =
          '86496') OR ((UDM_PRD_TBLS.DLY_LINE_ACTIVITY_PPLAN in view
          NTL_PRD_ALLVM.DLY_LINE_ACTIVITY_PPLAN_V.PPLAN_CD_CURR =
          '86497') OR ((UDM_PRD_TBLS.DLY_LINE_ACTIVITY_PPLAN in view
          NTL_PRD_ALLVM.DLY_LINE_ACTIVITY_PPLAN_V.PPLAN_CD_CURR =
          '86498') OR ((UDM_PRD_TBLS.DLY_LINE_ACTIVITY_PPLAN in view
          NTL_PRD_ALLVM.DLY_LINE_ACTIVITY_PPLAN_V.PPLAN_CD_CURR =
          '86499') OR ((UDM_PRD_TBLS.DLY_LINE_ACTIVITY_PPLAN in view
          NTL_PRD_ALLVM.DLY_LINE_ACTIVITY_PPLAN_V.PPLAN_CD_CURR =
          '86500') OR ((UDM_PRD_TBLS.DLY_LINE_ACTIVITY_PPLAN in view
          NTL_PRD_ALLVM.DLY_LINE_ACTIVITY_PPLAN_V.PPLAN_CD_CURR =
          '86501') OR ((UDM_PRD_TBLS.DLY_LINE_ACTIVITY_PPLAN in view
          NTL_PRD_ALLVM.DLY_LINE_ACTIVITY_PPLAN_V.PPLAN_CD_CURR =
          '86502') OR ((UDM_PRD_TBLS.DLY_LINE_ACTIVITY_PPLAN in view
          NTL_PRD_ALLVM.DLY_LINE_ACTIVITY_PPLAN_V.PPLAN_CD_CURR =
          '86504') OR ((UDM_PRD_TBLS.DLY_LINE_ACTIVITY_PPLAN in view
          NTL_PRD_ALLVM.DLY_LINE_ACTIVITY_PPLAN_V.PPLAN_CD_CURR =
          '86505') OR ((UDM_PRD_TBLS.DLY_LINE_ACTIVITY_PPLAN in view
          NTL_PRD_ALLVM.DLY_LINE_ACTIVITY_PPLAN_V.PPLAN_CD_CURR =
          '86506') OR ((UDM_PRD_TBLS.DLY_LINE_ACTIVITY_PPLAN in view
          NTL_PRD_ALLVM.DLY_LINE_ACTIVITY_PPLAN_V.PPLAN_CD_CURR =
          '86507') OR ((UDM_PRD_TBLS.DLY_LINE_ACTIVITY_PPLAN in view
          NTL_PRD_ALLVM.DLY_LINE_ACTIVITY_PPLAN_V.PPLAN_CD_CURR =
          '86508') OR ((UDM_PRD_TBLS.DLY_LINE_ACTIVITY_PPLAN in view
          NTL_PRD_ALLVM.DLY_LINE_ACTIVITY_PPLAN_V.PPLAN_CD_CURR =
          '86509') OR ((UDM_PRD_TBLS.DLY_LINE_ACTIVITY_PPLAN in view
          NTL_PRD_ALLVM.DLY_LINE_ACTIVITY_PPLAN_V.PPLAN_CD_CURR =
          '86510') OR ((UDM_PRD_TBLS.DLY_LINE_ACTIVITY_PPLAN in view
          NTL_PRD_ALLVM.DLY_LINE_ACTIVITY_PPLAN_V.PPLAN_CD_CURR =
          '86511') OR (UDM_PRD_TBLS.DLY_LINE_ACTIVITY_PPLAN in view
          NTL_PRD_ALLVM.DLY_LINE_ACTIVITY_PPLAN_V.PPLAN_CD_CURR =
          '86512')))))))))))))))))))))))))") into Spool 9 (all_amps)
          (compressed columns allowed), which is built locally on the
          AMPs.  The size of Spool 9 is estimated with low confidence
          to be 2,908,683 rows (119,256,003 bytes).  The estimated time
          for this step is 0.02 seconds. 
       2) We do an all-AMPs RETRIEVE step from UDM_PRD_TBLS.HR_EMPLOYEE
          in view NTL_PRD_ALLVM.HR_EMPLOYEE_V by way of an all-rows
          scan with a condition of ("(NOT (UDM_PRD_TBLS.HR_EMPLOYEE in
          view NTL_PRD_ALLVM.HR_EMPLOYEE_V.NT_USER_ID IS NULL )) AND
          ((NOT (UDM_PRD_TBLS.HR_EMPLOYEE in view
          NTL_PRD_ALLVM.HR_EMPLOYEE_V.SUPER_ID_LVL2_EMP_ID IS NULL ))
          AND (UDM_PRD_TBLS.HR_EMPLOYEE in view
          NTL_PRD_ALLVM.HR_EMPLOYEE_V.EMP_AREA_CD = 'WE'))") into Spool
          10 (all_amps) (compressed columns allowed), which is
          duplicated on all AMPs.  The size of Spool 10 is estimated
          with low confidence to be 31,938,444 rows (2,012,121,972
          bytes).  The estimated time for this step is 0.67 seconds. 
       3) We do an all-AMPs RETRIEVE step from UDM_PRD_TBLS.A in view
          NTL_PRD_ALLVM.CUST_ACCT_LINE_V by way of an all-rows scan
          with a condition of ("(( CASE WHEN (NOT (UDM_PRD_TBLS.A in
          view NTL_PRD_ALLVM.CUST_ACCT_LINE_V.CUST_ASSOC_ID IS NULL ))
          THEN (UDM_PRD_TBLS.A in view
          NTL_PRD_ALLVM.CUST_ACCT_LINE_V.CUST_ASSOC_ID) ELSE (' ') END
          ))<> '12'") into Spool 11 (all_amps) (compressed columns
          allowed) fanned out into 14 hash join partitions, which is
          built locally on the AMPs.  The size of Spool 11 is estimated
          with no confidence to be 186,602,214 rows (5,784,668,634
          bytes).  The estimated time for this step is 2.27 seconds. 
  3) We do an all-AMPs JOIN step from Spool 9 (Last Use) by way of an
     all-rows scan, which is joined to Spool 10 (Last Use) by way of an
     all-rows scan.  Spool 9 and Spool 10 are joined using a single
     partition hash join, with a join condition of ("USER_ID =
     NT_USER_ID").  The result goes into Spool 12 (all_amps)
     (compressed columns allowed), which is duplicated on all AMPs into
     14 hash join partitions.  The size of Spool 12 is estimated with
     low confidence to be 360,568,332 rows (30,648,308,220 bytes).  The
     estimated time for this step is 8.09 seconds. 
  4) We do an all-AMPs JOIN step from Spool 11 (Last Use) by way of an
     all-rows scan, which is joined to Spool 12 (Last Use) by way of an
     all-rows scan.  Spool 11 and Spool 12 are joined using a hash join
     of 14 partitions, with a join condition of ("ACCT_NUM = ACCT_NUM"). 
     The result goes into Spool 13 (all_amps) (compressed columns
     allowed), which is redistributed by the hash code of (
     UDM_PRD_TBLS.HR_EMPLOYEE.SUPER_ID_LVL2_EMP_ID) to all AMPs.  The
     size of Spool 13 is estimated with no confidence to be 8,247,457
     rows (783,508,415 bytes).  The estimated time for this step is
     1.01 seconds. 
  5) We do an all-AMPs JOIN step from UDM_PRD_TBLS.HR_EMPLOYEE in view
     NTL_PRD_ALLVM.HR_EMPLOYEE_V by way of an all-rows scan with no
     residual conditions, which is joined to Spool 13 (Last Use) by way
     of an all-rows scan.  UDM_PRD_TBLS.HR_EMPLOYEE and Spool 13 are
     joined using a single partition hash join, with a join condition
     of ("SUPER_ID_LVL2_EMP_ID = UDM_PRD_TBLS.HR_EMPLOYEE.EMP_ID"). 
     The result goes into Spool 8 (all_amps) (compressed columns
     allowed), which is built locally on the AMPs.  The size of Spool 8
     is estimated with no confidence to be 8,247,457 rows (882,477,899
     bytes).  The estimated time for this step is 0.06 seconds. 
  6) We do an all-AMPs SUM step to aggregate from Spool 8 (Last Use) by
     way of an all-rows scan , grouping by field1 (
     UDM_PRD_TBLS.DLY_LINE_ACTIVITY_PPLAN.USER_ID
     ,UDM_PRD_TBLS.HR_EMPLOYEE.SUPER_NM_LVL2
     ,UDM_PRD_TBLS.HR_EMPLOYEE.SUPER_NM_LVL1
     ,UDM_PRD_TBLS.HR_EMPLOYEE.SUPER_NM_LVL2
     ,UDM_PRD_TBLS.DLY_LINE_ACTIVITY_PPLAN.ACTIVITY_DT
     ,UDM_PRD_TBLS.A.MTN ,UDM_PRD_TBLS.DLY_LINE_ACTIVITY_PPLAN.ACCT_NUM
     ,UDM_PRD_TBLS.DLY_LINE_ACTIVITY_PPLAN.PPLAN_CD_CURR).  Aggregate
     Intermediate Results are computed globally, then placed in Spool
     14\.  The size of Spool 14 is estimated with no confidence to be
     8,247,455 rows (2,762,897,425 bytes).  The estimated time for this
     step is 0.76 seconds. 
  7) We do an all-AMPs STAT FUNCTION step from Spool 14 by way of an
     all-rows scan into Spool 18, which is redistributed by hash code
     to all AMPs.  The result rows are put into Spool 5 (all_amps),
     which is built locally on the AMPs.  This step is used to retrieve
     the TOP 10 rows.  Load distribution optimization is used.
     If this step retrieves less than 10 rows, then execute step 8\. 
     The size is estimated with no confidence to be 10 rows (1,130
     bytes). 
  8) We do an all-AMPs STAT FUNCTION step from Spool 14 (Last Use) by
     way of an all-rows scan into Spool 18 (Last Use), which is
     redistributed by hash code to all AMPs.  The result rows are put
     into Spool 5 (all_amps), which is built locally on the AMPs.  This
     step is used to retrieve the TOP 10 rows.  The size is estimated
     with no confidence to be 10 rows (1,130 bytes). 
  9) Finally, we send out an END TRANSACTION step to all AMPs involved
     in processing the request.
  -> The contents of Spool 5 are sent back to the user as the result of
     statement 1\. 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-21T18:08:38.190

尝试将您的限制标准移近您的大型表格：

```
SELECT TOP 10
        A.USER_ID, 
        C.SUPER_NM_LVL2,
        C.SUPER_NM_LVL1, 
        DIR.SUPER_NM_LVL2,
        A.ACTIVITY_DT,
        B.MTN, 
        A.ACCT_NUM,
        A.PPLAN_CD_CURR

FROM 
    ( SELECT * FROM DLY_LINE_ACTIVITY_PPLAN_V
    WHERE
        ACTIVITY_DT >= '2012-11-01' 
        AND ACTIVITY_DT <= '2012-11-19'
        AND PPLAN_CD_CURR IN ('86489', '86491', '86492', 
            '86494', '86495', '86496', '86497', '86498', '86499', '86500', '86501', 
            '86502', '86487', '86489', '86504', '86505', '86506', '86507', '86508', 
            '86509', '86510', '86511', '86512')
    )
    AS A

INNER JOIN 
            CUST_ACCT_LINE_V AS B
            ON A.ACCT_NUM=B.ACCT_NUM

INNER JOIN             
    (SELECT * FROM  HR_EMPLOYEE_V
    WHERE
    C.EMP_AREA_CD = 'WE' ) C   
    ON A.USER_ID=C.NT_USER_ID 

INNER JOIN 
            HR_EMPLOYEE_V AS DIR
            ON C.SUPER_ID_LVL2_EMP_ID=DIR.EMP_ID

GROUP BY 
        A.USER_ID, 
        C.SUPER_NM_LVL2,
        C.SUPER_NM_LVL1, 
        DIR.SUPER_NM_LVL2,
        A.ACTIVITY_DT,
        B.MTN, 
        A.ACCT_NUM,
        A.PPLAN_CD_CURR 
```

# php - 在变量中获取 curl 的结果

> ID：13499001
> 
> 赞同：-1
> 
> 时间：2012-11-21T17:42:03.683
> 
> 标签：php, curl

到目前为止，当我使用 print $result 时，我有一段代码会返回这样的数据；

```
ssl_card_number=41**********1111
ssl_exp_date=0213
ssl_amount=132.86
ssl_salestax=0.00
ssl_invoice_number=5351353519500
ssl_result=0
ssl_result_message=APPROVED
ssl_txn_id=00000000-0000-0000-0000-00000000000
ssl_approval_code=123456
ssl_cvv2_response=P
ssl_avs_response=X
ssl_account_balance=0.00
ssl_txn_time=11/21/2012 12:38:20 PM 
```

那是从查看页面源。

页面本身显示为：

```
ssl_card_number=41**********1111 ssl_exp_date=0213 ssl_amount=132.86 ssl_salestax=0.00 ssl_invoice_number=8601353519473 ssl_result=0 ssl_result_message=APPROVED ssl_txn_id=00000000-0000-0000-0000-00000000000 ssl_approval_code=123456 ssl_cvv2_response=P ssl_avs_response=X ssl_account_balance=0.00 ssl_txn_time=11/21/2012 12:37:54 PM 
```

我需要能够以更好的方式处理每个“钥匙”并且不知道如何爆炸它们？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T17:49:13.707

一种可能的方法：

```
parse_str(preg_replace('#\s+(?=\w+=)#', '&', $result), $array);
var_dump($array); 
```

说明：`preg_replace`将参数名称之前的所有空格转换为“&”符号 - 使此字符串类似于常规 GET 请求 url。然后`parse_str`（专门为解析此类 url 而创建的函数）将解析这个字符串（作为第一个参数发送），创建一个关联数组。

事实上，你甚至不必在这里使用 preg_replace，如果每个 param=value 字符串都从新行开始；`str_replace("\n", '&')`应该做的伎俩。

另一种方法：

```
$pairs = preg_split('#\s+(?=\w+=)#', $x);
foreach ($pairs as $pair) {
  list ($key, $value) = explode('=', $pair, 2);
  $array[$key] = $value; 
} 
```

在这里，您首先创建一个“键值对”字符串数组，然后将每个元素拆分为`=`：第一部分是键，第二部分是值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T17:56:08.710

您可以使用@raina77ow 报告的正则表达式，也可以使用爆炸（风险更高）：

```
<?php
$tmps = explode("\n",$result); //this gives you each line separate
foreach($tmps as $tmp){
   list($key,$value) = explode('=',$tmp,2);
   echo $key.' has value '.$value."\n";
   //you can even create vars with the "key" if you are sure that they key is a "clean" string:
   $$key=$value;
   //or put everything into an array - similar to the regexp
   $result_array[$key] = $value; 
}
?> 
```

# php - 在多维数组上使用 PHP Join 来组合值

> ID：13499004
> 
> 赞同：0
> 
> 时间：2012-11-21T17:42:16.163
> 
> 标签：php, join, multidimensional-array

今天应该很容易，但我在任何地方都找不到答案。

我有一个多维数组。它存储partid和数量。

```
$pCombined[] = array ( $newName[$b], $newQty[$b] ); 
```

我想按照这里的建议使用 PHP 连接：[使用 WHERE 子句将数组传递给查询](https://stackoverflow.com/questions/907806/php-mysql-using-an-array-in-where-clause)

我需要从 mySQL 中获取更多关于这些部件的数据，所以我需要连接的 id 列表，因为我不喜欢为每一行运行一个 SQL 查询的想法。

我尝试使用：

```
$ids = join(',', $pCombined); 
```

那只是给出数组，数组，数组....等

我尝试了一些明显的方括号组合。我想我想要的是...

```
$ids = join(',', $pCombined[*][0]); (where * is all) 
```

我想我也可能使整个事情过于复杂，我想我可以使用 foreach 或 for 循环并手动加入。它不是一个基本的购物车，但原则是相似的。任何想法我可以如何做到这一点，或者可能将我推向不同的方向。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T18:08:54.373

组合数组元素可以使用以下

$elemens = array("一","二","那里","四")

$exit = implode(',',$elements);

print_r($exit);//一，二，...

我希望你服务

# javascript - Nodejs / Express - 启动我的应用程序：不推荐使用 express.createServer()

> ID：13499010
> 
> 赞同：26
> 
> 时间：2012-11-21T17:42:36.827
> 
> 标签：javascript, node.js, mongodb, express, socket.io

我下载了一个节点应用程序来测试和玩弄。我搜索了一下，发现 Express 有点过时了。有人可以帮我修复实现的代码吗？

这是代码

```
/**
 * Module dependencies.
 */

// base dependencies for app
var express = require('express')
  , routes = require('./routes')
  , DB = require('./accessDB').AccessDB
  , passport = require('passport')
  , mongoose = require('mongoose')
  , mongoStore = require('connect-mongodb');

var app = module.exports = express.createServer();
global.app = app;

var DB = require('./accessDB');
var conn = 'mongodb://localhost/CrowdNotes';
var db;

// SocketIO Configuration
//var io = require('socket.io').listen(app);
//
//io.sockets.on('connection', function(socket) {
//  socket.on('user note', function (note) {
//    console.log(note);
//  });
//});

// Configuration
app.configure(function(){
  app.set('views', __dirname + '/views');
  app.set('view engine', 'jade');
  app.use(express.cookieParser());
  app.use(express.bodyParser());
  app.use(express.methodOverride());
  app.use(require('stylus').middleware({ src: __dirname + '/public' }));
  app.use(express.session({ 
    store: mongoStore(conn)
  , secret: 'applecake'
  }, function() {
    app.use(app.router);
  }));
  app.use(passport.initialize());
  app.use(passport.session());
  app.use(express.static(__dirname + '/public'));
});

db = new DB.startup(conn);

app.configure('development', function(){
  app.use(express.errorHandler({ dumpExceptions: true, showStack: true })); 
});

app.configure('production', function(){
  app.use(express.errorHandler()); 
});

// Routes
require('./routes')(app);

app.listen(3000);
console.log("Express server listening on port %d in %s mode", app.address().port, app.settings.env); 
```

这是我通过运行应用程序后收到的错误`node app`

```
C:\CrowdNotes>node app
Warning: express.createServer() is deprecated, express
applications no longer inherit from http.Server,
please use:

  var express = require("express");
  var app = express();

C:\CrowdNotes\app.js:63
console.log("Express server listening on port %d in %s mode", app.address().po
                                                                  ^
TypeError: Object function app(req, res){ app.handle(req, res); } has no method
'address'
    at Object.<anonymous> (C:\CrowdNotes\app.js:63:67)
    at Module._compile (module.js:449:26)
    at Object.Module._extensions..js (module.js:467:10)
    at Module.load (module.js:356:32)
    at Function.Module._load (module.js:312:12)
    at Module.runMain (module.js:492:10)
    at process.startup.processNextTick.process._tickCallback (node.js:244:9)

C:\CrowdNotes> 
```

固定的。

我现在正在注册，并使用我的新“用户”数据登录并收到此错误：

```
ReferenceError: C:\CrowdNotes\views\account.jade:6
    4|   div#header 
    5|     h2 CrowdNotes
  > 6|     p Hi, #{currentUser.name.first}! 
    7| 
    8|   - if (myEvent)
    9|     p.center My Event: #{myEvent.name} 

currentUser is not defined
    at eval (eval at <anonymous> (C:\CrowdNotes\node_modules\jade\lib\jade.js:176:8))
    at exports.compile (C:\CrowdNotes\node_modules\jade\lib\jade.js:181:12)
    at Object.exports.render (C:\CrowdNotes\node_modules\jade\lib\jade.js:216:14)
    at View.exports.renderFile [as engine] (C:\CrowdNotes\node_modules\jade\lib\jade.js:243:13)
    at View.render (C:\CrowdNotes\node_modules\express\lib\view.js:75:8)
    at Function.app.render (C:\CrowdNotes\node_modules\express\lib\application.js:500:10)
    at ServerResponse.res.render (C:\CrowdNotes\node_modules\express\lib\response.js:716:7)
    at module.exports.getAccount (C:\CrowdNotes\routes\index.js:47:11)
    at Promise.module.exports.getMyEvent (C:\CrowdNotes\accessDB.js:54:7)
    at Promise.addBack (C:\CrowdNotes\node_modules\mongoose\lib\promise.js:128:8) 
```

我想知道这是否也是某种形式的语法错误？不知道这里出了什么问题，因为我认为代码都排成一行。

我正在使用这里的代码：[https ://github.com/rockbot/crowdnotes](https://github.com/rockbot/crowdnotes)

* * *

## 回答 #1

> 赞同：63
> 
> 时间：2012-11-21T18:00:49.663

错误中给出了解决方案。

警告： express.createServer() 已弃用，express 应用程序不再从 http.Server 继承请使用：

```
 var express = require("express");
  var app = express(); 
```

所以你将不得不这样做。

```
var express = require('express')
  , http = require('http');

var app = express(); 
var server = http.createServer(app); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2014-10-20T20:01:28.127

它可以用这个简单的程序来完成：

```
var express = require('express');
var app = express();
app.get('/',
    function(req,res)
    {
        res.send("express");
    }
);
app.listen(3333); 
```

它工作正常。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-07-23T10:08:11.643

另一个可能的解决方案是安装 express 2.5.8 作为依赖项。

添加到 package.json：

```
 {
    "name": "authentication"
  , "version": "0.0.1"
  , "private": true
  , "dependencies": {
      "express": "2.5.8"
    , "jade": ">= 0.26.1"
  }
} 
```

然后运行

```
npm install 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-07-20T09:41:34.360

```
var express = require('express');
var app = express();
app.listen(your_port_number); 
```

使用较新版本的 express（express 4.x），您不需要创建服务器。app.listen 在内部这样做。参考[https://expressjs.com/en/4x/api.html#app.listen](https://expressjs.com/en/4x/api.html#app.listen)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-09-09T13:05:20.213

我已经在使用以下代码段，并且运行良好：

```
var express =require("express");
var http = require("http");

var app = express();
//app routers here 
...
var httpServer = http.Server(app);

httpServer.listen({PORT}, function(err){

}); 
```

# php - 在框架上跟踪 php 进程

> ID：13499017
> 
> 赞同：0
> 
> 时间：2012-11-21T17:43:17.697
> 
> 标签：php, linux, debugging, process

我有一个 php 框架在 linux 机器上运行，基本上每个请求都通过 .htaccess 重定向到 index.php

```
Options +FollowSymLinks

IndexIgnore */*
RewriteEngine On
RewriteCond %{REQUEST_FILENAME} !-f

RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_URI} !.*jpg$|!.*gif$|!.*png$|!.*jpeg$|!.*bmp$

RewriteRule . index.php 
```

我的一个 php 开始运行 %100 CPU 我想跟踪哪个进度是那个但是当我检查进程时

ps辅助| grep 23791

```
user 23791  0.3  0.8  30460 15288 ?        S    12:32   0:01 /usr/bin/php /home/user/public_html/index.php 
```

像往常一样，请求重定向到 index.php。但我必须找到这是哪个请求。

有没有办法调试这个问题？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T17:46:13.147

您可以使用 firephp 或 log 附加到 linux 上的文件您想要一些指针还是足够的信息？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-10-27T11:47:14.960

我只是在寻找这个问题时发现了我自己的问题。这次我有答案了。

如果您想通过 ps 在 linux 控制台上查看进度的详细信息，您必须使用[proctitle](https://pecl.php.net/package/proctitle)这个 pecl 扩展将为您提供

[setproctitle](http://php.net/manual/en/function.setproctitle.php) () 函数。

扩展很旧，但即使在 zts 模式下也能正常工作。

如果您使用的是 cli 版本，您可以使用：[cli-set-process-title()](http://php.net/manual/tr/function.cli-set-process-title.php)这是原生 php 函数（版本 PHP5 >=）

我用来在 linux 上跟踪的简单代码：

```
<?
if ((PHP_SAPI === 'cli' OR defined('STDIN'))) {
    $tmp = $_SERVER["argv"];
    unset($tmp[0]);
    $text =  "/". implode('/',$tmp);
    @cli_set_process_title (urldecode($text));
} else {
    @setproctitle (urldecode($_SERVER["REQUEST_URI"]));
}
?> 
```

我只是把它写到codeigniter上的top index.php。

查看进程在 linux 上使用最多的 cpu 和内存：

```
ps o pid,stat,time,pcpu,pmem,cmd -C php --sort -pcpu 
```

现在您将能够看到进程

# iphone - 收到推送通知时如何播放声音（应用程序运行时）

> ID：13499023
> 
> 赞同：1
> 
> 时间：2012-11-21T17:43:35.957
> 
> 标签：iphone

我正在我的应用程序中实现推送通知。我想在收到推送通知时播放声音，即使应用程序正在运行（当前只收到通知警报，没有声音）或活动状态。目前，仅当应用程序在后台运行（即解锁后）时收到通知时才会播放设备声音。为什么应用在活动状态下收到通知时没有播放设备声音？

请帮我。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T17:58:20.753

当您的应用程序打开时，您会想要响应推送通知并自己播放声音。如果应用程序处于打开状态，则默认情况下不会显示任何内容，也不会播放声音，即使在您的应用程序关闭时播放也是如此。

在您的应用代理中，回复`application:didReceiveRemoteNotification:`消息，您将收到通知发送。从那里，您可以启动声音播放：

```
- (void)application:(UIApplication *)application didReceiveRemoteNotification:(NSDictionary *)userInfo
{
    NSLog(@"got remote notification %@", userInfo);
    // now play a sound here...
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T17:47:30.400

也许您也可以在警报被调用的地方播放声音？

喜欢

```
Alert
{//alert text
} 
```

然后在警报所在的方法中，在警报之后立即调用声音代码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-21T17:50:55.867

推送通知的声音可以由推送服务提供。带有默认声音的简单推送消息的有效负载将如下所示：

```
{
    "aps":
    {
        "alert": "Hello, world!",
        "sound": "default"
    }
} 
```

# ckeditor - 如何使用基本工具栏显示ckeditor

> ID：13499025
> 
> 赞同：19
> 
> 时间：2012-11-21T17:43:51.403
> 
> 标签：ckeditor

`class="ckeditor"`我正在使用方式在我的网页中显示 ckeditor 。如何配置我的 ckeditor 以仅显示基本工具栏。在这里，我找到了显示基本工具栏的示例页面，但没有从文档中获取如何显示它。

[http://ckeditor.com/demo](http://ckeditor.com/demo)

检查自定义工具栏选项卡并查看第一个具有非常基本类型的工具栏的示例，我该如何显示它？

这是我的代码

```
<body>
    <textarea class="ckeditor" id="description" rows="5" cols="15"></textarea>
</body> 
```

我想为我网站的所有 ckeditor 实例显示基本工具栏。

* * *

## 回答 #1

> 赞同：49
> 
> 时间：2013-04-23T18:01:42.050

如果你使用 Basic 它会显示所有工具栏，所以使用这个

```
CKEDITOR.config.toolbar = [
   ['Styles','Format','Font','FontSize'],
   '/',
   ['Bold','Italic','Underline','StrikeThrough','-','Undo','Redo','-','Cut','Copy','Paste','Find','Replace','-','Outdent','Indent','-','Print'],
   '/',
   ['NumberedList','BulletedList','-','JustifyLeft','JustifyCenter','JustifyRight','JustifyBlock'],
   ['Image','Table','-','Link','Flash','Smiley','TextColor','BGColor','Source']
] ; 
```

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2015-04-24T00:52:51.973

如果将前面的两个答案放在一起，您将获得完整的解决方案。首先是在 'ckeditor' 文件夹中的 'config.js' 文件中添加选项。

```
 CKEDITOR.editorConfig = function( config ) {
    config.skin = 'bootstrapck';
    // Define changes to default configuration here. For example:
    // config.language = 'fr';
    // config.uiColor = '#AADC6E';
    config.toolbar_Full =
        [
            { name: 'document', items : [ 'Source','-','Save','NewPage','DocProps','Preview','Print','-','Templates' ] },
            { name: 'clipboard', items : [ 'Cut','Copy','Paste','PasteText','PasteFromWord','-','Undo','Redo' ] },
            { name: 'editing', items : [ 'Find','Replace','-','SelectAll','-','SpellChecker', 'Scayt' ] },
            { name: 'forms', items : [ 'Form', 'Checkbox', 'Radio', 'TextField', 'Textarea', 'Select', 'Button', 'ImageButton',
                'HiddenField' ] },
            '/',
            { name: 'basicstyles', items : [ 'Bold','Italic','Underline','Strike','Subscript','Superscript','-','RemoveFormat' ] },
            { name: 'paragraph', items : [ 'NumberedList','BulletedList','-','Outdent','Indent','-','Blockquote','CreateDiv',
                '-','JustifyLeft','JustifyCenter','JustifyRight','JustifyBlock','-','BidiLtr','BidiRtl' ] },
            { name: 'links', items : [ 'Link','Unlink','Anchor' ] },
            { name: 'insert', items : [ 'Image','Flash','Table','HorizontalRule','Smiley','SpecialChar','PageBreak','Iframe' ] },
            '/',
            { name: 'styles', items : [ 'Styles','Format','Font','FontSize' ] },
            { name: 'colors', items : [ 'TextColor','BGColor' ] },
            { name: 'tools', items : [ 'Maximize', 'ShowBlocks','-','About' ] }
        ];

    config.toolbar_Basic =
        [
            ['Bold', 'Italic', '-', 'NumberedList', 'BulletedList', '-', 'Link', 'Unlink','-','About']
        ];
}; 
```

然后将调用添加到 HTML 文件中的“基本”配置。

```
 <textarea id="ckeditor"></textarea>
            <script type="text/javascript">
                CKEDITOR.replace( 'ckeditor',
                        {
                            toolbar : 'Basic', /* this does the magic */
                            uiColor : '#9AB8F3'
                        });
            </script> 
```

这应该是您所需要的，显然不要忘记在您的 html 文件中调用“ckeditor.js”文件。

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2012-11-21T17:49:39.707

您需要在启动时设置特定配置。

```
<script type="text/javascript">
    CKEDITOR.replace( 'description',
    {
        toolbar : 'Basic', /* this does the magic */
        uiColor : '#9AB8F3'
    });
</script> 
```

`description`指的是`id`您网站上的编辑器。

**有趣的链接：**

*   [配置设置](http://docs.cksource.com/CKEditor_3.x/Developers_Guide/Setting_Configurations)
*   [工具栏配置](http://docs.cksource.com/CKEditor_3.x/Developers_Guide/Toolbar)
*   [一般 CK 文件](http://docs.cksource.com/)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2018-01-15T22:55:58.427

**2018 年更新：**

[CKEditor](http://nightly.ckeditor.com)的那些乐于助人的人只是创建了一个在线编辑器，您可以根据自己的内心内容进行自定义！这是一个夜间构建，因此静态 URL 对您没有用 - 从[http://nightly.ckeditor.com](http://nightly.ckeditor.com)导航到基本配置器选项，然后选择**工具栏配置**器按钮。

将生成的内容复制并粘贴到 ivoryckeditor 包的 config.js 文件（Web 文件夹）中，它应该可以在不需要任何其他文件更改的情况下工作。

我构建了以下简单布局来显示剪切和粘贴操作，并且：

```
CKEDITOR.editorConfig = function( config ) {
config.toolbarGroups = [
    { name: 'document', groups: [ 'mode', 'document', 'doctools' ] },
    { name: 'clipboard', groups: [ 'clipboard', 'undo' ] },
    { name: 'editing', groups: [ 'find', 'selection', 'spellchecker', 'editing' ] },
    { name: 'forms', groups: [ 'forms' ] },
    { name: 'basicstyles', groups: [ 'basicstyles', 'cleanup' ] },
    { name: 'paragraph', groups: [ 'list', 'indent', 'blocks', 'align', 'bidi', 'paragraph' ] },
    { name: 'links', groups: [ 'links' ] },
    { name: 'insert', groups: [ 'insert' ] },
    { name: 'styles', groups: [ 'styles' ] },
    { name: 'colors', groups: [ 'colors' ] },
    { name: 'tools', groups: [ 'tools' ] },
    { name: 'others', groups: [ 'others' ] },
    { name: 'about', groups: [ 'about' ] }
];

config.removeButtons = 'Cut,Copy,Paste,Undo,Redo,Anchor,Underline,Strike,Subscript,Superscript';
}; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-10-01T14:26:14.657

我也陷入了这个问题，但经过多次试验，我得到了解决问题的方法：

在 ckeditor.rb 中使用它：-

ckeditor.setup 做 |config| 需要 "ckeditor/orm/active_record" config.cdn_url = "//cdn.ckeditor.com/4.12.1/ **full** /ckeditor.js" 结束

您还可以根据您的要求将完整更改为基本、标准或经典

祝你好运

# c# - Monitor.TryEnter 用于多个资源

> ID：13499028
> 
> 赞同：3
> 
> 时间：2012-11-21T17:44:02.670
> 
> 标签：c#, thread-safety

我尝试搜索此内容，但没有找到最适合我所面临问题的建议。

我的问题是我们有可用资源的列表/堆栈（计算引擎）。这些资源用于执行某些计算。

执行计算的请求是从外部进程触发的。因此，当发出计算请求时，我需要检查是否有任何可用资源当前没有执行其他计算，如果是，请等待一段时间再检查。

我想知道实现这一点的最佳方法是什么。我有以下代码，但不确定它是否非常安全。

如果您有任何进一步的建议，那就太好了：

```
void Process(int retries = 0) {
    CalcEngineConnection connection = null;
    bool securedConnection = false;
    foreach (var calcEngineConnection in _connections) {
        securedConnection = Monitor.TryEnter(calcEngineConnection);
        if (securedConnection) {
            connection = calcEngineConnection;
            break;
        }
    }
    if (securedConnection) {
        //Dequeue the next request
        var calcEnginePool = _pendingPool.Dequeue();

        //Perform the operation and exit.
        connection.RunCalc(calcEnginePool);
        Monitor.Exit(connection);
    }
    else {
        if (retries < 10)
            retries += 1;
        Thread.Sleep(200);
        Process(retries);
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T18:21:12.307

我不确定 using`Monitor`是这里最好的方法，但如果你*决定*走那条路，我会将上面的代码重构为：

```
bool TryProcessWithRetries(int retries) {
    for (int attempt = 0; attempt < retries; attempt++) {
        if (TryProcess()) {
            return true;
        }
        Thread.Sleep(200);
    }
    // Throw an exception here instead?
    return false;
}

bool TryProcess() {
    foreach (var connection in _connections) {
        if (TryProcess(connection)) {
            return true;
        }
    }
    return false;
}

bool TryProcess(CalcEngineConnection connection) {
    if (!Monitor.TryEnter(connection)) {
        return false;
    }
    try {
        var calcEnginePool = _pendingPool.Dequeue();
        connection.RunCalc(calcEnginePool);
    } finally {
        Monitor.Exit(connection);
    }
    return true;
} 
```

这分解了三个逻辑：

*   重试几次
*   尝试集合中的每个连接
*   尝试单个连接

它还避免为此使用递归，并将`Monitor.Exit`调用放入一个*绝对*应该在`finally`其中的块中。

 *您可以将中间方法实现替换为：

```
return _connections.Any(TryProcess); 
```

......但这可能有点太“聪明”了。

就我个人而言，我很想`TryProcess`进入`CalcEngineConnection`自身——这样*代码*就不需要知道连接是否能够处理某些东西——这取决于对象本身。这意味着您可以避免拥有公开可见的锁，并且如果将来某些资源可以（例如）一次处理两个请求，那将是灵活的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-21T18:22:13.060

可能会出现多个问题，但让我们先简化您的代码：

```
void Process(int retries = 0) 
{
    foreach (var connection in _connections) 
    {
        if(Monitor.TryEnter(connection))
        {
            try
            {
                //Dequeue the next request
                var calcEnginePool = _pendingPool.Dequeue();

                //Perform the operation and exit.
                connection.RunCalc(calcEnginePool);
            }
            finally
            {
                // Release the lock
                Monitor.Exit(connection);
            }
            return;
        }
    }

    if (retries < 10)
    {
        Thread.Sleep(200);
        Process(retries+1);
    }
} 
```

这将正确保护您的连接，但请注意，这里的假设之一是您的`_connections`列表是安全的，并且不会被另一个线程修改。

此外，您可能希望使用线程安全队列，`_connections`因为在某些负载级别，您最终可能只使用前几个连接（不确定这是否会有所作为）。为了相对均匀地使用您的所有连接，我会将它们放入队列中并将它们出列。这也将保证没有两个线程使用相同的连接，并且您不必使用`Monitor.TryEnter()`.*

# javascript - Bootstrap Typeahead onselect

> ID：13499029
> 
> 赞同：0
> 
> 时间：2012-11-21T17:44:10.843
> 
> 标签：javascript, typeahead

所以，我现在为这样一个简单的问题而发疯：一旦我选择了“预先输入”，它应该立即重定向到所属页面。

不幸的是，由于某种原因，jsfiddle 没有显示下拉列表，所以我将它上传到了一个随机的网络空间。[http://ch1n3s3.funpic.de/lol/test3.php](http://ch1n3s3.funpic.de/lol/test3.php)

这是代码：

```
<input id="id" autocomplete="off" name="name" type="text" data-provide="typeahead" data-items="4" data-source='["test", "test2", "test3"]'>
<script>
$('#id').on('change', function(){
    var items = "'test', 'test2', 'test3'";
    var matchString = "'"+$(this).val()+"'";
    if (items.toLowerCase().indexOf(matchString.toLowerCase()) != -1){
        alert('Matched');
    }
    else {
        alert('Not Matched');
    }
});
</script> 
```

有没有比这更容易并且效果更好的解决方案？

谢谢你，克里斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T14:43:10.660

你可以在typeahead提供的updater函数中写redirect request，试试看，肯定比这好，但没那么容易。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-10-22T12:17:36.977

**解决方案**

```
$('.typeahead').bind('typeahead:select', function(ev, suggestion) {
    window.location.href = '/' + suggestion;
}); 
```

例如，选择阿拉斯加将重定向到 /Alaska 的建议。

# c# - Visual Studio，在用户单击按钮时绘制 Lorenz 混乱

> ID：13499030
> 
> 赞同：2
> 
> 时间：2012-11-21T17:44:18.737
> 
> 标签：c#, graphic

所以去年我为我的课程用 C 语言编写了一个程序，该程序使用 Lorenz 方程和用于求解微分方程的 Runge Kutta 方法演示了混沌。

我最近决定重新审视这一点，并制作一个能够绘制粒子轨迹的程序。我让它成功工作，但现在想扩展它，以便用户可以输入参数，例如粒子的起始位置和其他参数（在我的例子中是 a、b 和 r）。目前，我在程序运行后立即绘制轨迹，但我想延迟这一点，直到用户将参数输入到一些文本框中，然后按下按钮。为此，我认为我应该创建一个新类并将当前代码放入其中，然后在主 .cs 文件中的 btn1_Click 方法下调用它。但是我在这方面遇到了相当大的麻烦，主要是因为不知道如何去做。到目前为止，在我最好的尝试中，我对涉及“createGraphics()”的行有一个错误 也就是类文件中没有它的定义。我在类顶部的 using 部分的顶部有所有相同的引用，就像在它工作正常的主文件中一样。

另外，如果有人能给我关于我的代码的任何反馈（即任何不好的做法或我过度复杂化的地方）或任何改进它的建议，我将非常感激，如果您需要我提供更多信息帮助，然后我会尽力回答！

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Threading.Tasks;
using System.Windows.Forms;

namespace Lorenz_chaos
{
public partial class Form1 : Form
{
    public Form1()
    {
        InitializeComponent();
    }
        private void Form1_Paint(object sender, PaintEventArgs e)
    {
        double a = 10, b = (8 / 3), r = 28;     //standard values for lorenz model

        /*m defines the number of iterations of the for loop so the number of lines drawn
        good idea to keep m inversely proportional to dt (the time interval). A smaller dt will
        mean smaller lines so smoother overall drawing m=50000 and dt=0.0005 is a good starting point
        that demonstrates chaos well*/
        double m = 500000, dt = 0.00005;

        //EVOLUTION VALUE FOR RUNGE_KUTTA METHOD
        //values for first particle
        double y11, y12, y13;
        double y21, y22, y23;
        double y31, y32, y33;
        double y41, y42, y43;
        double y51, y52, y53;
        double xi, yi, xf, yf;           //coordinates for drawing particle 1 trajectory

        double f10, f11, f12, f13;      //function values to be calculated, 
        double f20, f21, f22, f23;      //for fxy (x>1) these are intermediate fn calculations at different
        double f30, f31, f32, f33;      //times in Runga Kutta

        //values for second particle
        double z11, z12, z13;
        double z21, z22, z23;
        double z31, z32, z33;
        double z41, z42, z43;
        double z51, z52, z53;
        double ai, bi, af, bf;          //coordinates for drawing particle 2 trajectory (these are badly named...)

        double g10, g11, g12, g13;      //equivalent of f values for particle 2 
        double g20, g21, g22, g23;
        double g30, g31, g32, g33;

        //OTHER NEEDED QUANTITIES
        int i;          //for loop iteration integer
        int k1 = 20;    //scaling factors to make drawing fill form
        int k2 = 9;
        int y0 = 450;   //offset values to centre drawing on form
        int x0 = 550;
        int start = 10;   //starting position for calculations
        double diff = 0.01;//initial displacement between two particles

        //starting positions for particles            
        y11 = start;//particle 1
        y12 = start;
        y13 = start;

        z11 = start + diff;//particle 2
        z12 = start + diff;
        z13 = start + diff;

        //initial coords for particles at t=0
        xi = (y11) * k1 + x0;
        yi = (y12) * k2 + y0;
        ai = (z11) * k1 + x0;
        bi = (z12) * k2 + y0;

        for (i = 1; i <= m; i++)
        {
            f10 = a * (y12 - y11);
            f20 = r * y11 - y12 - y11 * y13;
            f30 = y11 * y12 - b * y13;

            y21 = y11 + f10 * dt / 2;               //finding y1 y2 y3 at the first
            y22 = y12 + f20 * dt / 2;               //fraction of dt
            y23 = y13 + f30 * dt / 2;

            f11 = a * (y22 - y21);
            f21 = r * y21 - y22 - y21 * y23;
            f31 = y21 * y22 - b * y23;

            y31 = y11 + f11 * dt / 2;               //finding y1 y2 y3 at the second
            y32 = y12 + f21 * dt / 2;               //fraction of dt
            y33 = y13 + f31 * dt / 2;

            f12 = a * (y32 - y31);
            f22 = r * y31 - y32 - y31 * y33;
            f32 = y31 * y32 - b * y33;

            y41 = y11 + f12 * dt;               //finding y1 y2 y3 at the third
            y42 = y12 + f22 * dt;               //fraction of dt
            y43 = y13 + f32 * dt;

            f13 = a * (y42 - y41);
            f23 = r * y41 - y42 - y41 * y43;
            f33 = y41 * y42 - b * y43;

            y51 = y11 + (f10 + 2 * f11 + 2 * f12 + f13) * dt / 6; //final y values at y(t+dt)
            y52 = y12 + (f20 + 2 * f21 + 2 * f22 + f23) * dt / 6; //then to be repesated in for loop for all steps
            y53 = y13 + (f30 + 2 * f31 + 2 * f32 + f33) * dt / 6;

            xf = (y51) * k1 + x0;
            yf = (y52) * k2 + y0;

            //second particle calculation
            g10 = a * (z12 - z11);
            g20 = r * z11 - z12 - z11 * z13;
            g30 = z11 * z12 - b * z13;

            z21 = z11 + g10 * dt / 2;               //finding y1 y2 y3 at the first
            z22 = z12 + g20 * dt / 2;               //fraction of dt
            z23 = z13 + g30 * dt / 2;

            g11 = a * (z22 - z21);
            g21 = r * z21 - z22 - z21 * z23;
            g31 = z21 * z22 - b * z23;

            z31 = z11 + g11 * dt / 2;               //finding y1 y2 y3 at the second
            z32 = z12 + g21 * dt / 2;               //fraction of dt
            z33 = z13 + g31 * dt / 2;

            g12 = a * (z32 - z31);
            g22 = r * z31 - z32 - z31 * z33;
            g32 = z31 * z32 - b * z33;

            z41 = z11 + g12 * dt;               //finding y1 y2 y3 at the third
            z42 = z12 + g22 * dt;               //fraction of dt
            z43 = z13 + g32 * dt;

            g13 = a * (z42 - z41);
            g23 = r * z41 - z42 - z41 * z43;
            g33 = z41 * z42 - b * z43;

            z51 = z11 + (g10 + 2 * g11 + 2 * g12 + g13) * dt / 6; //final y values at y(t+dt)
            z52 = z12 + (g20 + 2 * g21 + 2 * g22 + g23) * dt / 6; //then to be repesated in for loop for all steps
            z53 = z13 + (g30 + 2 * g31 + 2 * g32 + g33) * dt / 6;

            af = (z51) * k1 + x0;
            bf = (z52) * k2 + y0;

            //DRAWING LINE JUST CALCULATED
            System.Drawing.Graphics graphicsObj;

            graphicsObj = this.CreateGraphics();

            Pen myPen = new Pen(System.Drawing.Color.Red, 1);

            //myPen.DashStyle = System.Drawing.Drawing2D.DashStyle.DashDotDot;

            graphicsObj.DrawLine(myPen, (int)xi, (int)yi, (int)xf, (int)yf);

            myPen.Color = System.Drawing.Color.RoyalBlue;

            graphicsObj.DrawLine(myPen, (int)ai, (int)bi, (int)af, (int)bf);

            //REDEFINING COORDS AND VALUES FOR NEXT LOOP
            //first particle
            xi = (y51) * k1 + x0;
            yi = (y52) * k2 + y0;
            y11 = y51;
            y12 = y52;
            y13 = y53;

            //second particle
            ai = (z51) * k1 + x0;
            bi = (z52) * k2 + y0;
            z11 = z51;
            z12 = z52;
            z13 = z53;

            /*even at 1 the below makes the program far too slow, need an alternative
             intention was for it to allow user to see the particle trajectories better*/
            //System.Threading.Thread.Sleep(1);
        }

    }

}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T17:51:36.637

将您的代码`Form1_Paint`放在一个单独的方法中，例如`DrawLorenzChaos(Graphics graphicsObj , double a, double b, double r)`. 当您在表单中设置参数时，只需将一些`bool`值设置为`true`. 检查代码

```
private void Form1_Paint(object sender, PaintEventArgs e)
{  

     if(startDrawing)
           DrawLorenzChaos(e.Graphics, aVal, bVal, rVal);
} 
```

此外，在 DrawLorenzChaos 方法中，只需删除这两行：

```
System.Drawing.Graphics graphicsObj;

graphicsObj = this.CreateGraphics(); 
```

**编辑：**您可以尝试此代码只是开始，您可以逐渐改进它，这就是我会做的事情（我会添加更好的同步，但基本上就是这样）。为了尝试代码，您需要一个按钮和一个大小为 (1000,1000) 的 PictureBox。请注意，我稍微更改了起始位置。

基本上这里有一个单独的线程在位图上绘制洛伦兹混沌。在每条线在单独的线程中绘制之后，该位图在 UI 线程中的 PictureBox 上绘制。您有 Mutex 来控制对位图的访问。

```
public partial class Form1 : Form
{
    Bitmap offScrBuff;
    Mutex mut;
    int index = 0;
    public Form1()
    {
        InitializeComponent();
        offScrBuff = new Bitmap(1000, 1000);
        mut = new Mutex();
        pictureBox1.Paint += new PaintEventHandler(pictureBox1_Paint);
        button1.Click += new System.EventHandler(this.button1_Click);
    }

    void pictureBox1_Paint(object sender, PaintEventArgs e)
    {
        mut.WaitOne();
        e.Graphics.DrawImage(offScrBuff, 0, 0);
        mut.ReleaseMutex();
    }

    void DrawLorenzChaos(double a, double b, double r)
    {
        //double a = 10, b = (8.0 / 3.0), r = 28;     //standard values for lorenz model

        /*m defines the number of iterations of the for loop so the number of lines drawn
        good idea to keep m inversely proportional to dt (the time interval). A smaller dt will
        mean smaller lines so smoother overall drawing m=50000 and dt=0.0005 is a good starting point
        that demonstrates chaos well*/
        double m = 500000, dt = 0.00005;

        //EVOLUTION VALUE FOR RUNGE_KUTTA METHOD
        //values for first particle
        double y11, y12, y13;
        double y21, y22, y23;
        double y31, y32, y33;
        double y41, y42, y43;
        double y51, y52, y53;
        double xi, yi, xf, yf;           //coordinates for drawing particle 1 trajectory

        double f10, f11, f12, f13;      //function values to be calculated, 
        double f20, f21, f22, f23;      //for fxy (x>1) these are intermediate fn calculations at different
        double f30, f31, f32, f33;      //times in Runga Kutta

        //values for second particle
        double z11, z12, z13;
        double z21, z22, z23;
        double z31, z32, z33;
        double z41, z42, z43;
        double z51, z52, z53;
        double ai, bi, af, bf;          //coordinates for drawing particle 2 trajectory (these are badly named...)

        double g10, g11, g12, g13;      //equivalent of f values for particle 2 
        double g20, g21, g22, g23;
        double g30, g31, g32, g33;

        //OTHER NEEDED QUANTITIES
        int i;          //for loop iteration integer
        int k1 = 20;    //scaling factors to make drawing fill form
        int k2 = 9;
        int y0 = 280;   //offset values to centre drawing on form
        int x0 = 400;
        int start = 10;   //starting position for calculations
        double diff = 0.01;//initial displacement between two particles

        //starting positions for particles            
        y11 = start;//particle 1
        y12 = start;
        y13 = start;

        z11 = start + diff;//particle 2
        z12 = start + diff;
        z13 = start + diff;

        //initial coords for particles at t=0
        xi = (y11) * k1 + x0;
        yi = (y12) * k2 + y0;
        ai = (z11) * k1 + x0;
        bi = (z12) * k2 + y0;
        for (i = 1; i <= m; i++)
        {
            f10 = a * (y12 - y11);
            f20 = r * y11 - y12 - y11 * y13;
            f30 = y11 * y12 - b * y13;

            y21 = y11 + f10 * dt / 2;               //finding y1 y2 y3 at the first
            y22 = y12 + f20 * dt / 2;               //fraction of dt
            y23 = y13 + f30 * dt / 2;

            f11 = a * (y22 - y21);
            f21 = r * y21 - y22 - y21 * y23;
            f31 = y21 * y22 - b * y23;

            y31 = y11 + f11 * dt / 2;               //finding y1 y2 y3 at the second
            y32 = y12 + f21 * dt / 2;               //fraction of dt
            y33 = y13 + f31 * dt / 2;

            f12 = a * (y32 - y31);
            f22 = r * y31 - y32 - y31 * y33;
            f32 = y31 * y32 - b * y33;

            y41 = y11 + f12 * dt;               //finding y1 y2 y3 at the third
            y42 = y12 + f22 * dt;               //fraction of dt
            y43 = y13 + f32 * dt;

            f13 = a * (y42 - y41);
            f23 = r * y41 - y42 - y41 * y43;
            f33 = y41 * y42 - b * y43;

            y51 = y11 + (f10 + 2 * f11 + 2 * f12 + f13) * dt / 6; //final y values at y(t+dt)
            y52 = y12 + (f20 + 2 * f21 + 2 * f22 + f23) * dt / 6; //then to be repesated in for loop for all steps
            y53 = y13 + (f30 + 2 * f31 + 2 * f32 + f33) * dt / 6;

            xf = (y51) * k1 + x0;
            yf = (y52) * k2 + y0;

            //second particle calculation
            g10 = a * (z12 - z11);
            g20 = r * z11 - z12 - z11 * z13;
            g30 = z11 * z12 - b * z13;

            z21 = z11 + g10 * dt / 2;               //finding y1 y2 y3 at the first
            z22 = z12 + g20 * dt / 2;               //fraction of dt
            z23 = z13 + g30 * dt / 2;

            g11 = a * (z22 - z21);
            g21 = r * z21 - z22 - z21 * z23;
            g31 = z21 * z22 - b * z23;

            z31 = z11 + g11 * dt / 2;               //finding y1 y2 y3 at the second
            z32 = z12 + g21 * dt / 2;               //fraction of dt
            z33 = z13 + g31 * dt / 2;

            g12 = a * (z32 - z31);
            g22 = r * z31 - z32 - z31 * z33;
            g32 = z31 * z32 - b * z33;

            z41 = z11 + g12 * dt;               //finding y1 y2 y3 at the third
            z42 = z12 + g22 * dt;               //fraction of dt
            z43 = z13 + g32 * dt;

            g13 = a * (z42 - z41);
            g23 = r * z41 - z42 - z41 * z43;
            g33 = z41 * z42 - b * z43;

            z51 = z11 + (g10 + 2 * g11 + 2 * g12 + g13) * dt / 6; //final y values at y(t+dt)
            z52 = z12 + (g20 + 2 * g21 + 2 * g22 + g23) * dt / 6; //then to be repesated in for loop for all steps
            z53 = z13 + (g30 + 2 * g31 + 2 * g32 + g33) * dt / 6;

            af = (z51) * k1 + x0;
            bf = (z52) * k2 + y0;

            //DRAWING LINE JUST CALCULATED

            mut.WaitOne();
            System.Drawing.Graphics graphicsObj = Graphics.FromImage(offScrBuff);

            graphicsObj.DrawLine(Pens.Red, (int)xi, (int)yi, (int)xf, (int)yf);

            graphicsObj.DrawLine(Pens.RoyalBlue, (int)ai, (int)bi, (int)af, (int)bf);

            graphicsObj.Dispose();
            mut.ReleaseMutex();

            pictureBox1.Invalidate();

            //REDEFINING COORDS AND VALUES FOR NEXT LOOP
            //first particle
            xi = (y51) * k1 + x0;
            yi = (y52) * k2 + y0;
            y11 = y51;
            y12 = y52;
            y13 = y53;

            //second particle
            ai = (z51) * k1 + x0;
            bi = (z52) * k2 + y0;
            z11 = z51;
            z12 = z52;
            z13 = z53;
            /*even at 1 the below makes the program far too slow, need an alternative
             intention was for it to allow user to see the particle trajectories better*/
            //System.Threading.Thread.Sleep(1);
        }

    }

    private void button1_Click(object sender, EventArgs e)
    {
        Task.Factory.StartNew(() => { DrawLorenzChaos(10.0, 8.0 / 3.0, 28); });
    }
} 
```

# android - 为什么选择的项目在被调用时什么都不返回？

> ID：13499031
> 
> 赞同：0
> 
> 时间：2012-11-21T17:44:21.560
> 
> 标签：android, listview

我正在尝试创建一个请求响应活动并获取 itemSelected 以供下一个活动使用，该活动将它们存储到用户好友列表中。但是当单击“接受”按钮时，itemSelected 没有返回任何内容。（它应该在 toast 对话框中显示 itemSelected）任何人都知道它发生了什么？另外，我想问一下为什么listView中的项目位于不准确的位置？对于第二个项目，它似乎比通常的更高。如何正确调整它？

下图是 NotificationView.java 的布局：

![结果当](../Images/d6fe3441c0b72ed9415b4f0748c3d47d.png)

NotificationView.java

```
public class NotificationView extends ListActivity{

String[] people;
ListView lv;
Button btn1,btn2;

public void onCreate(Bundle savedInstanceState){
    super.onCreate(savedInstanceState);
    setContentView(R.layout.view);  
    NotificationManager mnotis =(NotificationManager)getSystemService(NOTIFICATION_SERVICE);
    mnotis.cancel(getIntent().getExtras().getInt("notificationID"));
    String i = getIntent().getExtras().getString("name");
    people = i.split("[,]");
    Log.d("how",i);

    lv= (ListView) findViewById(android.R.id.list);
    btn1 = (Button)findViewById(R.id.acceptbtn);
    btn2 = (Button)findViewById(R.id.closebtn);
    ArrayAdapter<String> list = new ArrayAdapter<String>(NotificationView.this,R.layout.friendlist_item, R.id.friend_name,people);
    lv.setAdapter(list); 

    btn1.setOnClickListener(new View.OnClickListener()
    {
        public void onClick(View v)
        {
            lv = getListView();
            int i = lv.getCount();
            Log.d("count",String.valueOf(i));
            runOnUiThread(new Runnable(){
                public void run(){
                    String itemSelected = "Selected items: \n";
                    for(int i=0;i<lv.getCount();i++){
                        if(lv.isItemChecked(i)){
                            itemSelected += lv.getItemAtPosition(i) + "\n";
                        }
                    }
                    Toast.makeText(NotificationView.this,itemSelected,Toast.LENGTH_SHORT).show();
                }               
            });

        }
    });
}} 
```

视图.xml

```
 <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
  android:orientation="vertical"
  android:layout_width="fill_parent"
  android:layout_height="fill_parent"
  android:background="#ffffff"
  >

<ListView android:id="@android:id/list" 
  android:layout_width="wrap_content" 
  android:layout_height="wrap_content" 
  android:layout_weight="1">
</ListView>

<FrameLayout android:id="@+id/FrameLayout01" 
  android:layout_width="fill_parent" 
  android:layout_height="wrap_content">

  <LinearLayout
      xmlns:android="http://schemas.android.com/apk/res/android"
      android:layout_width="match_parent"
      android:layout_height="fill_parent"
      android:background="#ffffff"
      android:orientation="horizontal" >

      <Button
          android:id="@+id/acceptbtn"
          android:layout_width="wrap_content"
          android:layout_height="wrap_content"
          android:layout_gravity="center_horizontal"
          android:layout_weight="0.46"
          android:text="Accept" />

      <Button
          android:id="@+id/closebtn"
          android:layout_width="wrap_content"
          android:layout_height="wrap_content"
          android:layout_weight="0.49"
          android:text="Close" />

  </LinearLayout>

</FrameLayout> 
```

朋友列表项.xml

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:orientation="vertical" >

<CheckBox android:id="@+id/friend_name"
android:layout_width="wrap_content"
android:layout_height="wrap_content"
android:paddingRight = "88dip"
android:textSize="20dip"
android:textStyle="bold"/>  

</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T17:52:13.743

您的复选框与您调用的方法无关，对于带有多选项目的列表视图，请遵循下一个指南：[http://dj-android.blogspot.com/2012/04/milti-selection-listview-android-with。 html](http://dj-android.blogspot.com/2012/04/milti-selection-listview-android-with.html)

# python - 如何保留int变量的前导零？

> ID：13499033
> 
> 赞同：11
> 
> 时间：2012-11-21T17:44:24.523
> 
> 标签：python, variables, int, zero

下面是一段代码，它是功能解密和加密程序的一部分。

```
while checkvar < maxvar: # is set to < as maxvar is 1 to high for the index of var
    #output.append("%02d" % number)
    i =ord(var[checkvar]) - 64 # Gets postional value of i
    i = ("%02d" % i)
    if (checkvar + 1) < maxvar:
        j =ord(var[(checkvar + 1)]) - 64 # Gets postional value of i
        j = ("%02d" % j)
        i = str(i) + str(j) #'Adds' the string i and j to create a new i
    li.append(int(i))
    checkvar = checkvar + 2

print li 
```

如您所见，两个变量 i 和 j 首先被视为字符串，以在任何单个数字前添加 0（作为字符串）。然后将这些变量组合成一个四位数字（仍为字符串）。稍后在程序中创建的数字用于`pow()`函数中，因为`int`s 删除任何前导零。

我的问题：是否可以强制 python 为`int`s 保留前导零？我已经并继续在网上搜索。

**编辑**

为了帮助人们，我已经包含了程序的加密部分。这就是问题所在。上面代码中创建的变量是通过`pow()`函数传递的。由于这不能处理字符串，我必须将变量转换为`int`s ，其中前导零丢失。

```
#a = li[]
b=int(17)#pulic = e
c=int(2773)#=n

lenli=int(len(li))
enchecker = int(0)

#encrpted list
enlist = []

while enchecker < lenli:
    en = pow(li[enchecker],b,c)#encrpyt the message can only handle int
    enlist.append(int(en))
    enchecker = enchecker + 1

print enlist 
```

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2014-04-21T14:18:43.037

尽管上面关于 1、01 和 001 的评论都是正确的，它们都与 相同`int`，但它对于时间建模或连续电影制作以保持前导零非常有帮助。我经常这样做以确保电影剪辑的顺序正确。做到这一点的简单方法是使用`zfill()`确保`str`数字的版本至少具有您告诉它的字符数，并通过用零填充字符串“数字”的左侧来实现。

```
>>> x = int(1)    
>>> NewStringVariable = str(x).zfill(3)    
>>> print NewStringVariable    
001    
>>> NewStringVariable = str(x).zfill(5)    
>>> print NewStringVariable    
00001 
```

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-11-21T17:53:19.100

前导零的概念是一个显示概念，而不是数字概念。您可以在数字上放置无限数量的前导零而不更改其值。由于它不是数字概念，因此它不与数字一起存储。

将数字转换为字符串时，您必须决定需要多少个零。如果需要，您可以单独保留该号码。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-08-11T18:38:04.633

我得到了日期字符串，比如`hhmmss`从我的 Arduino 上穿过串行线。

所以假设我得到了`s = "122041"`；这将是`12:20:41`，但是`9am`将是`090000`。

该语句`print "%d" % (s)`会引发运行时错误，因为 9 不是八进制数，因此是非法字符。

要解决此问题：

```
print "%06d" % (int(s)) 
```

希望有帮助

# sql - MS Access 2010 Query Equivalent

> ID：13499037
> 
> 赞同：-1
> 
> 时间：2012-11-21T17:44:38.407
> 
> 标签：sql, ms-access, ms-access-2007

Its my second day with MS Access, i am trying to update an existing application. And this includes updating some queries. I never knew it was going to be so complex. the parenthesis issue in Access is really disturbing and i hit the wall, i get the "syntax error" error. My SQL query is something like this :

```
Select ….(Something)
Into …. (Some Table)
From A
Inner join B on A.ID=B.ID
LEFT OUTER JOIN STAR as C on C.ID = A.ID
    AND C.Data = ’DEMO1’
    AND C.POS= ’POS1’
LEFT OUTER JOIN STAR as D on D.ID = A.ID
    AND D.Data = ’DEMO2’
    AND D.POS= ‘POS2’
LEFT OUTER JOIN STAR as E on E.ID = A.ID
    AND E.Data = ’DEMO3’
    AND E.POS= ‘POS3’ 
```

And in access, its equivalent that i am trying is :

```
Select ….
Into ….
From (((A
Inner join B on A.ID=B.ID)
LEFT OUTER JOIN STAR as C (on C.ID = A.ID
    AND C.Data = ’DEMO1’
    AND C.POS= ’POS1’)
LEFT OUTER JOIN STAR as D (on D.ID = A.ID
    AND D.Data = ’DEMO2’
    AND D.POS= ‘POS2’)
LEFT OUTER JOIN STAR as E on E.ID = A.ID
    AND E.Data = ’DEMO3’
    AND E.POS= ‘POS3’ 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T17:51:43.937

考虑

```
Select ….
Into ….
From 
(A Inner join B on A.ID=B.ID) LEFT OUTER JOIN 
STAR as C on 
C.ID = A.ID AND 
((C.Data =  ’DEMO1’ AND C.POS= ’POS1’) OR
(C.Data =  ’DEMO2’ AND C.POS= ’POS2’) or
(C.Data =  ’DEMO3’ AND C.POS= ’POS3’)) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T18:59:54.480

终于通过括号了。

```
 Select ….
    Into ….
    From (((A
    Inner join B on A.ID=B.ID)
    LEFT OUTER JOIN STAR as C on (C.ID = A.ID
        AND C.Data = ’DEMO1’
        AND C.POS= ’POS1’))
    LEFT OUTER JOIN STAR as D on (D.ID = A.ID
        AND D.Data = ’DEMO2’
        AND D.POS= ‘POS2’))
    LEFT OUTER JOIN STAR as E on (E.ID = A.ID
        AND E.Data = ’DEMO3’
        AND E.POS= ‘POS3’) 
```

# html - 搜索引擎如何处理 AngularJS 应用程序？

> ID：13499040
> 
> 赞同：701
> 
> 时间：2012-11-21T17:44:48.300
> 
> 标签：html, angularjs, seo, search-engine, google-search

我发现 AngularJS 应用程序有两个关于搜索引擎和 SEO 的问题：

1) 自定义标签会发生什么？搜索引擎会忽略这些标签中的全部内容吗？即假设我有

```
<custom>
  <h1>Hey, this title is important</h1>
</custom> 
```

`<h1>`尽管在自定义标签内，但会被索引吗？

2) 有没有办法避免索引 {{}} 的搜索引擎按字面意思绑定？IE

```
<h2>{{title}}</h2> 
```

我知道我可以做类似的事情

```
<h2 ng-bind="title"></h2> 
```

但是如果我真的想让爬虫“看到”标题怎么办？服务器端渲染是唯一的解决方案吗？

* * *

## 回答 #1

> 赞同：471
> 
> 时间：2014-04-23T13:10:39.423

## 使用 PushState 和 Precomposition

当前（2015 年）执行此操作的方法是使用 JavaScript pushState 方法。

PushState 在不重新加载页面的情况下更改顶部浏览器栏中的 URL。假设您有一个包含选项卡的页面。选项卡隐藏和显示内容，并且内容是动态插入的，可以使用 AJAX 或通过简单地设置 display:none 和 display:block 来隐藏和显示正确的选项卡内容。

单击选项卡时，使用 pushState 更新地址栏中的 url。呈现页面时，使用地址栏中的值来确定要显示哪个选项卡。Angular 路由会自动为您执行此操作。

## 预合成

有两种方法可以访问 PushState 单页应用程序 (SPA)

1.  通过 PushState，用户单击 PushState 链接，内容被 AJAX 处理。
2.  通过直接点击 URL。

网站上的初始点击将涉及直接点击 URL。随着 PushState 更新 URL，随后的点击将简单地在内容中进行 AJAX。

爬虫从页面中获取链接，然后将它们添加到队列中以供以后处理。这意味着对于爬虫来说，服务器上的每次点击都是直接点击，它们不通过 Pushstate 导航。

Precomposition 将初始负载捆绑到来自服务器的第一个响应中，可能作为 JSON 对象。这允许搜索引擎在不执行 AJAX 调用的情况下呈现页面。

有一些证据表明 Google 可能不会执行 AJAX 请求。更多关于这里：

[https://web.archive.org/web/20160318211223/http://www.analog-ni.co/precomposing-a-spa-may-become-the-holy-grail-to-seo](https://web.archive.org/web/20160318211223/http://www.analog-ni.co/precomposing-a-spa-may-become-the-holy-grail-to-seo)

## 搜索引擎可以读取和执行 JavaScript

谷歌已经能够解析 JavaScript 有一段时间了，这就是他们最初开发 Chrome 的原因，作为谷歌蜘蛛的全功能无头浏览器。如果链接具有有效的 href 属性，则可以将新 URL 编入索引。没有什么可做的了。

如果单击链接另外触发了 pushState 调用，则用户可以通过 PushState 导航站点。

## PushState URL 的搜索引擎支持

Google 和 Bing 目前支持 PushState。

### 谷歌

这是 Matt Cutts 对 Paul Irish 关于 PushState for SEO 的问题的回应：

[http://youtu.be/yiAF9VdvRPw](http://youtu.be/yiAF9VdvRPw)

以下是 Google 宣布对蜘蛛的全面 JavaScript 支持：

[http://googlewebmastercentral.blogspot.de/2014/05/understanding-web-pages-better.html](http://googlewebmastercentral.blogspot.de/2014/05/understanding-web-pages-better.html)

结果是 Google 支持 PushState 并将索引 PushState URL。

另请参阅 Google 网站管理员工具的 fetch as Googlebot。你会看到你的 JavaScript（包括 Angular）被执行了。

### 必应

以下是 Bing 于 2013 年 3 月宣布支持漂亮的 PushState URL：

[http://blogs.bing.com/webmaster/2013/03/21/search-engine-optimization-best-practices-for-ajax-urls/](http://blogs.bing.com/webmaster/2013/03/21/search-engine-optimization-best-practices-for-ajax-urls/)

## 不要使用 HashBangs #!

Hashbang url 是一个丑陋的权宜之计，要求开发人员在特殊位置提供网站的预渲染版本。它们仍然有效，但您不需要使用它们。

Hashbang URL 如下所示：

`domain.com/#!path/to/resource`

这将与这样的元标记配对：

`<meta name="fragment" content="!">`

Google 不会以这种形式将它们编入索引，而是会从 _escaped_fragments_ URL 中提取站点的静态版本并将其编入索引。

Pushstate URL 看起来像任何普通的 URL：

`domain.com/path/to/resource`

不同之处在于 Angular 通过拦截对在 JavaScript 中处理它的 document.location 的更改来为您处理它们。

如果您想使用 PushState URL（并且您可能会这样做），请删除所有旧的哈希样式 URL 和元标记，并在您的配置块中简单地启用 HTML5 模式。

## 测试您的网站

谷歌网站管理员工具现在包含一个工具，它允许您以谷歌的身份获取 URL，并在谷歌呈现它时呈现 JavaScript。

[https://www.google.com/webmasters/tools/googlebot-fetch](https://www.google.com/webmasters/tools/googlebot-fetch)

## 在 Angular 中生成 PushState URL

要在 Angular 中生成真实的 URL，而不是带 # 前缀的 URL，请在 $locationProvider 对象上设置 HTML5 模式。

```
$locationProvider.html5Mode(true); 
```

## 服务器端

由于您使用的是真实 URL，因此您需要确保服务器为所有有效 URL 提供相同的模板（加上一些预先组合的内容）。您如何执行此操作将根据您的服务器架构而有所不同。

## 网站地图

您的应用可能会使用不寻常的导航形式，例如悬停或滚动。为确保 Google 能够驱动您的应用，我可能会建议创建一个站点地图，即您的应用响应的所有 url 的简单列表。您可以将其放置在默认位置（/sitemap 或 /sitemap.xml），或使用网站管理员工具告诉 Google。

无论如何，拥有一个站点地图是个好主意。

## 浏览器支持

Pushstate 在 IE10 中工作。在旧版浏览器中，Angular 会自动回退到哈希样式的 URL

## 演示页面

以下内容使用带有预合成的 pushstate URL 呈现：

[http://html5.gingerhost.com/london](http://html5.gingerhost.com/london)

可以验证，在[此链接](https://www.google.co.uk/webhp?#q=ginger+London's+ancient+core)中，内容已编入索引并出现在 Google 中。

## 服务 404 和 301 标头状态代码

因为搜索引擎总是会针对每个请求访问您的服务器，所以您可以从您的服务器提供标头状态代码并期望 Google 看到它们。

* * *

## 回答 #2

> 赞同：407
> 
> 时间：2012-11-23T00:17:30.597

**2014 年 5 月更新**

Google 抓取工具[现在执行 javascript](http://googlewebmastercentral.blogspot.no/2014/05/understanding-web-pages-better.html) - 您可以使用[Google 网站管理员工具](https://www.google.com/webmasters/tools/home)来更好地了解 Google 如何呈现您的网站。

**原始答案**
如果您想针对搜索引擎优化您的应用程序，不幸的是，没有办法向爬虫提供预渲染版本。[您可以在此处](https://developers.google.com/webmasters/ajax-crawling/docs/html-snapshot)阅读有关 Google 对 ajax 和 javascript-heavy 网站的建议的更多信息。

如果这是一个选项，我建议阅读[这篇文章](http://www.yearofmoo.com/2012/11/angularjs-and-seo.html)，了解如何使用服务器端渲染为 Angular 进行 SEO。

我不确定爬虫在遇到自定义标签时会做什么。

* * *

## 回答 #3

> 赞同：108
> 
> 时间：2013-12-24T20:05:37.603

# 让我们确定一下 AngularJS 和 SEO

Google、Yahoo、Bing 和其他搜索引擎使用传统爬虫以传统方式爬取网络。他们运行*机器人*来抓取网页上的 HTML，并在此过程中收集信息。他们保留有趣的单词并寻找其他页面的其他链接（这些链接、它们的数量和它们的数量与 SEO 一起发挥作用）。

## 那么为什么搜索引擎不处理 javascript 网站呢？

答案与搜索引擎机器人通过无头浏览器工作这一事实有关，而且它们通常*没有*javascript 渲染引擎来渲染页面的 javascript。这适用于大多数页面，因为大多数静态页面不关心 JavaScript 呈现其页面，因为它们的内容已经可用。

## 可以做些什么呢？

幸运的是，大型网站的爬虫已经开始实现一种机制，使我们的 JavaScript 网站可被爬取，但这**需要我们对我们的网站进行更改**。

如果我们将我们`hashPrefix`的 is`#!`而不是简单地更改为`#`，那么现代搜索引擎会将请求更改为使用`_escaped_fragment_`而不是`#!`。（在 HTML5 模式下，即我们有没有哈希前缀的链接，我们可以通过查看`User Agent`后端的标头来实现相同的功能）。

也就是说，不是来自普通浏览器的请求，看起来像：

`http://www.ng-newsletter.com/#!/signup/page`

搜索引擎将使用以下内容搜索页面：

`http://www.ng-newsletter.com/?_escaped_fragment_=/signup/page`

我们可以使用以下内置方法设置 Angular 应用程序的哈希前缀`ngRoute`：

```
angular.module('myApp', [])
.config(['$location', function($location) {
  $location.hashPrefix('!');
}]); 
```

而且，如果我们使用`html5Mode`，我们将需要使用元标记来实现它：

```
<meta name="fragment" content="!"> 
```

提醒一下，我们可以`html5Mode()`用`$location`服务来设置：

```
angular.module('myApp', [])
.config(['$location', 
function($location) {
  $location.html5Mode(true);
}]); 
```

## 处理搜索引擎

我们有很多机会来确定我们将如何处理将内容作为静态 HTML 实际交付给搜索引擎。我们可以自己托管一个后端，我们可以使用一个服务来为我们托管一个后端，我们可以使用代理来传递内容等等。让我们看看几个选项：

### 自托管

我们可以编写一个服务来处理使用无头浏览器（如 phantomjs 或zombiejs）抓取我们自己的网站的服务，使用渲染数据拍摄页面快照并将其存储为 HTML。每当我们`?_escaped_fragment_`在搜索请求中看到查询字符串时，我们可以交付我们为页面拍摄的静态 HTML 快照，而不是仅通过 JS 的预渲染页面。这要求我们有一个后端来交付我们的页面，中间有条件逻辑。我们可以使用[prerender.io 的](https://prerender.io/)后端之类的东西作为起点来自己运行它。当然，我们仍然需要处理代理和片段处理，但这是一个好的开始。

### 有偿服务

将内容输入搜索引擎的最简单和最快的方法是使用服务[Brombone](http://www.brombone.com/)、[seo.js](http://getseojs.com/)、[seo4ajax](http://www.seo4ajax.com/)和[prerender.io](https://prerender.io/)就是很好的例子，它们将为您提供上述内容渲染。当我们不想处理运行服务器/代理时，这是一个不错的选择。此外，它通常超级快。

有关 Angular 和 SEO 的更多信息，我们在[http://www.ng-newsletter.com/posts/serious-angular-seo.html上写了一个详尽的教程](http://www.ng-newsletter.com/posts/serious-angular-seo.html) **，我们在我们的书****ng-book**中更详细地介绍了它： **AngularJS 的完整书籍**。在[ng-book.com](https://www.ng-book.com/)上查看。

* * *

## 回答 #4

> 赞同：58
> 
> 时间：2012-11-27T21:55:03.177

您真的应该在 moo 博客年查看有关构建对 SEO 友好的 AngularJS 网站的教程。他将引导您完成 Angular 文档中列出的所有步骤。[http://www.yearofmoo.com/2012/11/angularjs-and-seo.html](http://www.yearofmoo.com/2012/11/angularjs-and-seo.html)

使用这种技术，搜索引擎会看到扩展的 HTML 而不是自定义标签。

* * *

## 回答 #5

> 赞同：42
> 
> 时间：2014-02-19T22:35:32.907

这已经发生了翻天覆地的变化。

[http://searchengineland.com/bing-offers-recommendations-for-seo-friendly-ajax-suggests-html5-pushstate-152946](http://searchengineland.com/bing-offers-recommendations-for-seo-friendly-ajax-suggests-html5-pushstate-152946)

如果你使用：$locationProvider.html5Mode(true); 你已经准备好了。

不再渲染页面。

* * *

## 回答 #6

> 赞同：17
> 
> 时间：2013-11-26T16:25:12.873

自从提出这个问题以来，情况发生了很大变化。现在有一些选项可以让 Google 索引您的 AngularJS 网站。我发现的最简单的选择是使用**[http://prerender.io](http://prerender.io)**免费服务，该服务将为您生成 crwalable 页面并将其提供给搜索引擎。几乎所有服务器端 Web 平台都支持它。我最近开始使用它们，支持也很好。

**我与他们没有任何从属关系，这是来自一个快乐的用户。**

* * *

## 回答 #7

> 赞同：9
> 
> 时间：2013-11-21T01:25:32.640

Angular 自己的网站为搜索引擎提供简化的内容：[http ://docs.angularjs.org/?_escaped_fragment_=/tutorial/step_09](http://docs.angularjs.org/?_escaped_fragment_=/tutorial/step_09)

假设您的 Angular 应用正在使用 Node.js/Express 驱动的 JSON api，例如`/api/path/to/resource`. 也许您可以使用`?_escaped_fragment_`to重定向任何请求`/api/path/to/resource.html`，并使用[内容协商](http://expressjs.com/api.html#res.format)来呈现内容的 HTML 模板，而不是返回 JSON 数据。

唯一的问题是，您的 Angular 路由需要与您的 REST API 1:1 匹配。

**编辑**：我意识到这有可能真正混淆你的 REST api，我不建议在非常简单的用例之外这样做，因为它可能很自然。

相反，您可以为机器人友好的内容使用一组完全不同的路由和控制器。但是随后您将在 Node/Express 中复制所有 AngularJS 路由和控制器。

我已经决定使用无头浏览器生成快照，尽管我觉得这有点不太理想。

* * *

## 回答 #8

> 赞同：8
> 
> 时间：2014-03-16T13:56:49.897

可以在这里找到一个好的做法：

[http://scotch.io/tutorials/javascript/angularjs-seo-with-prerender-io?_escaped_fragment_=tag](http://scotch.io/tutorials/javascript/angularjs-seo-with-prerender-io?_escaped_fragment_=tag)

* * *

## 回答 #9

> 赞同：7
> 
> 时间：2015-10-15T10:00:51.457

截至目前，谷歌已经改变了他们的 AJAX 抓取提议。

> [时代变了。今天，只要您不阻止 Googlebot 抓取您的 JavaScript 或 CSS 文件，我们通常能够像现代浏览器一样呈现和理解您的网页。](http://googlewebmastercentral.blogspot.is/2015/10/deprecating-our-ajax-crawling-scheme.html)

*tl;dr：[Google] 不再推荐 2009 年提出的 AJAX 抓取提案 [Google]。*

* * *

## 回答 #10

> 赞同：6
> 
> 时间：2014-01-21T22:53:28.160

谷歌的 Crawlable Ajax Spec，正如其他答案中所引用的，基本上就是答案。

如果您对其他搜索引擎和社交机器人如何处理相同的问题感兴趣，我在这里写了最先进的技术：http: [//blog.ajaxsnapshots.com/2013/11/googles-crawlable-ajax-specification.html](http://blog.ajaxsnapshots.com/2013/11/googles-crawlable-ajax-specification.html)

我为[https://ajaxsnapshots.com](https://ajaxsnapshots.com)工作，该公司将 Crawlable Ajax 规范作为服务实施 - 该报告中的信息基于我们日志中的观察。

* * *

## 回答 #11

> 赞同：4
> 
> 时间：2015-12-15T16:56:51.227

我找到了一个优雅的解决方案，可以涵盖您的大部分基础。[我最初在这里](http://bnlconsulting.com/blog/dynamic-metadata-in-angularjs)写过它，并在[此处](https://stackoverflow.com/a/33810531/4163426)回答了另一个类似的 StackOverflow 问题，它引用了它。

仅供参考，此解决方案还包括硬编码的后备标签，以防爬虫未获取 Javascript。我没有明确概述它，但值得一提的是，您应该激活 HTML5 模式以获得正确的 URL 支持。

另请注意：这些不是完整的文件，只是相关文件的重要部分。如果您需要帮助编写可以在其他地方找到的指令、服务等的样板。无论如何，这里...

**应用程序.js**

您可以在此处为每个路线（标题、描述等）提供自定义元数据。

```
$routeProvider
   .when('/', {
       templateUrl: 'views/homepage.html',
       controller: 'HomepageCtrl',
       metadata: {
           title: 'The Base Page Title',
           description: 'The Base Page Description' }
   })
   .when('/about', {
       templateUrl: 'views/about.html',
       controller: 'AboutCtrl',
       metadata: {
           title: 'The About Page Title',
           description: 'The About Page Description' }
   }) 
```

**元数据-service.js**（服务）

设置自定义元数据选项或使用默认值作为后备。

```
var self = this;

// Set custom options or use provided fallback (default) options
self.loadMetadata = function(metadata) {
  self.title = document.title = metadata.title || 'Fallback Title';
  self.description = metadata.description || 'Fallback Description';
  self.url = metadata.url || $location.absUrl();
  self.image = metadata.image || 'fallbackimage.jpg';
  self.ogpType = metadata.ogpType || 'website';
  self.twitterCard = metadata.twitterCard || 'summary_large_image';
  self.twitterSite = metadata.twitterSite || '@fallback_handle';
};

// Route change handler, sets the route's defined metadata
$rootScope.$on('$routeChangeSuccess', function (event, newRoute) {
  self.loadMetadata(newRoute.metadata);
}); 
```

**metaproperty.js**（指令）

打包视图的元数据服务结果。

```
return {
  restrict: 'A',
  scope: {
    metaproperty: '@'
  },
  link: function postLink(scope, element, attrs) {
    scope.default = element.attr('content');
    scope.metadata = metadataService;

    // Watch for metadata changes and set content
    scope.$watch('metadata', function (newVal, oldVal) {
      setContent(newVal);
    }, true);

    // Set the content attribute with new metadataService value or back to the default
    function setContent(metadata) {
      var content = metadata[scope.metaproperty] || scope.default;
      element.attr('content', content);
    }

    setContent(scope.metadata);
  }
}; 
```

**索引.html**

完成前面提到的硬编码后备标签，用于无法获取任何 Javascript 的爬虫。

```
<head>
  <title>Fallback Title</title>
  <meta name="description" metaproperty="description" content="Fallback Description">

  <!-- Open Graph Protocol Tags -->
  <meta property="og:url" content="fallbackurl.com" metaproperty="url">
  <meta property="og:title" content="Fallback Title" metaproperty="title">
  <meta property="og:description" content="Fallback Description" metaproperty="description">
  <meta property="og:type" content="website" metaproperty="ogpType">
  <meta property="og:image" content="fallbackimage.jpg" metaproperty="image">

  <!-- Twitter Card Tags -->
  <meta name="twitter:card" content="summary_large_image" metaproperty="twitterCard">
  <meta name="twitter:title" content="Fallback Title" metaproperty="title">
  <meta name="twitter:description" content="Fallback Description" metaproperty="description">
  <meta name="twitter:site" content="@fallback_handle" metaproperty="twitterSite">
  <meta name="twitter:image:src" content="fallbackimage.jpg" metaproperty="image">
</head> 
```

这应该对大多数搜索引擎用例有很大帮助。如果您想为社交网络爬虫（在 Javascript 支持上不确定）进行完全动态渲染，您仍然必须使用其他一些答案中提到的预渲染服务之一。

希望这可以帮助！

* * *

## 回答 #12

> 赞同：2
> 
> 时间：2015-02-23T10:31:52.657

使用 PreRender 之类的东西，它可以制作您网站的静态页面，以便搜索引擎对其进行索引。

在这里您可以找到可用的平台：[https ://prerender.io/documentation/install-middleware#asp-net](https://prerender.io/documentation/install-middleware#asp-net)

* * *

## 回答 #13

> 赞同：2
> 
> 时间：2017-05-16T22:30:26.133

使用 Angular Universal，您可以为应用程序生成看起来像完整应用程序的登录页面，然后在其后面加载您的 Angular 应用程序。
Angular Universal 在服务器端生成纯 HTML 意味着无 javascript 页面，并无延迟地将它们提供给用户。因此，您可以处理任何爬虫、机器人和用户（cpu 和网络速度已经很低）。然后您可以通过链接/按钮将它们重定向到已经加载的实际 angular 应用程序。官方网站推荐此解决方案。[-有关 SEO 和 Angular Universal 的更多信息-](https://angular.io/docs/ts/latest/guide/universal.html#!#seo-no-javascript)

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2015-10-05T12:00:29.677

爬虫（或机器人）旨在爬取网页的 HTML 内容，但由于异步数据获取的 AJAX 操作，这成为一个问题，因为它需要一些时间来呈现页面并在其上显示动态内容。同样，`AngularJS`也使用异步模型，这会给 Google 爬虫带来问题。

一些开发人员使用真实数据创建基本的 html 页面，并在抓取时从服务器端提供这些页面。`PhantomJS`我们可以在服务端呈现相同的页面`_escaped_fragment_`（因为谷歌`#!`在我们的网站 url 中查找，然后获取之后的所有内容`#!`并将其添加到`_escaped_fragment_`查询参数中）。有关更多详细信息，请阅读此[博客](http://www.tothenew.com/blog/angular-seo/)。

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2014-02-12T07:26:21.777

**爬虫不需要功能丰富、风格漂亮的 gui，它们只想查看内容**，因此您不需要向它们提供为人类构建的页面的快照。

我的解决方案：为**爬虫提供爬虫想要的东西**：

你必须想好爬虫想要什么，然后只给他那个。

提示不要弄乱背部。只需使用相同的 API 添加一点服务器端的前视图

# asp.net - Remove tick/check box from ASP.NET Checkbox control

> ID：13499043
> 
> 赞同：0
> 
> 时间：2012-11-21T17:45:01.030
> 
> 标签：asp.net, checkbox, checkboxlist

I have this CheckBoxList control and to each ListItem of it, have set the Text property to the img HTML tag so it displays an image.

I am trying to remove the tick/check box from the checkboxes of a ASP.NET CheckBoxList control when i click on each item.

My code does this. Every time i click on some check box, the **SelectedIndexChanged** event fires up and it does some saving of some data in my database. And when the saving is done and the page is refreshed i want to check/tick box of the checkbox item that was clicked not to be there anymore and the checkbox to be disabled cause i don't want the user to able able to click it again. I have tried to tried to set the Enable and Selected properties to False, and also add an attribute to the CheckboxList control, but without success. Here is my code.

```
<asp:CheckBoxList ID="Services" runat="server" RepeatColumns="5" CellPadding="10"             
CellSpacing="15" RepeatLayout="Table" 
                         Font-Size="Large" RepeatDirection="Vertical" TextAlign="Right" 
AutoPostBack="true" EnableViewState="true">

<asp:ListItem Value="Facebook" Text="<img src='/ServiceIcons/facebook.png'  
title='Facebook' />" />
<asp:ListItem Value="Googleplus" Text="<img src='/ServiceIcons/googleplus.png' 
title='Google+' />" />
<asp:ListItem Value="LinkedIn" Text="<img src='/ServiceIcons/linkedin.png' 
title='LinkedIn' />" />
<asp:ListItem Value="RSS" Text="<img src='/ServiceIcons/rss.png' title='RSS' />" />
<asp:ListItem Value="Skype" Text="<img src='/ServiceIcons/skype.png' title='Skype' />" 
/>

</asp:CheckBoxList> 
```

And in the code behind i do this:

```
 Private Sub Services_SelectedIndexChanged(ByVal sender As Object, ByVal e As 
  System.EventArgs) Handles Services.SelectedIndexChanged

       -----Storing to database code here------

        Services.Items(Services.SelectedIndex).Enabled = False
        Services.Items(Services.SelectedIndex).Attributes.Add("class", 
        "displayCheckBox")
        Services.Items(Services.SelectedIndex).Selected = False

  End Sub 
```

And the css class here:

```
 .displayCheckBox input{display:none;} 
```

After the the event does the storing in the database and the page is refreshed, the checkbox that was selected is disabled but it shows the tick/check box, and i don't want it to show it if is selected.

Any one has an idea. I have searched a lot, but it seems that the CheckBoxList control doesn't provide much costumizing options.

Thank you in advance !

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T18:06:09.870

如果要从复选框列表中删除复选框，请在 SelectedIndexChanged 事件中尝试以下操作：

```
Private Sub Services_SelectedIndexChanged(ByVal sender As Object, ByVal e As System.EventArgs) Handles Services.SelectedIndexChanged

    '-----Storing to database code here------

    Services.Items.RemoveAt(Services.SelectedIndex)
End Sub 
```

# c# - Choosing random places in C#

> ID：13499046
> 
> 赞同：0
> 
> 时间：2012-11-21T17:45:10.093
> 
> 标签：c#, visual-studio

Hi I'm developing a simple -multiple choices- quiz program using visual studio. (C#)

I want to make the choices with radio buttons, in which each radio button has a - randomly selected answer- and one of them is the correct one.

I filled an array with the all possible answers. And I want to know how can I make the right answer not in the same place every time?

so how can I make the right answer goes for a random place? and the other places selects other random numbers from the array which are not the right one. :D

I know my question is not that clear I don't know how to explain. ><

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T17:49:31.720

使用 c#`Random()`类，并使用`Next`

```
Random r = new Random();

choice = possibleChoices[r.Next(possibleChoices.Length-1)]; 
```

然后你可以用正确的选择覆盖错误的选择之一

```
radioButtons[r.Next(radioButtons.Length-1)] = correctAnswer; 
```

[文件](http://msdn.microsoft.com/en-us/library/system.random.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T17:47:22.203

首先，选择您的正确答案，然后随机选择一个索引并将您的正确答案分配给随机单选按钮。

用随机答案填充其他单选按钮。

提示：将单选按钮存储在列表中以方便此操作。您首先用所有单选按钮填充列表，然后在它们填满答案时将它们从列表中删除，这样您就不必处理“我在哪个索引中放入了正确答案”或“复杂按名称手动引用控件的代码”

编辑：正如 Alexei Levenkov 在另一个答案中所指出的，有关如何正确生成随机数的更多信息，请参阅[此线程](https://stackoverflow.com/questions/767999/random-number-generator-only-generating-one-random-number)

假设`Random random`在您的应用程序中声明

```
List<RadioButton> buttons = new List<RadioButton>();
buttons.Add(answer);
buttons.Add(answer2);
buttons.Add(answer3);
buttons.Add(answer4);

int goodAnswerPos = random.Next(buttons.Count);
buttons[goodAnswerPos].Text = "Good Answer";
buttons.RemoveAt(goodAnswerPos);

foreach (RadioButton button in buttons)
{
    button.Text = "Randomly Selected Wrong Answer";
} 
```

将控件存储在`buttons[goodAnswerPos]`将使您知道用户在提交答案时是否选择了正确的控件。

# c - Using C variable inside Lua alongside nested functions

> ID：13499047
> 
> 赞同：0
> 
> 时间：2012-11-21T17:45:11.330
> 
> 标签：c, variables, lua, nested

This is a sort of followup to my previous question about nested registered C functions found here: [Trying to call a function in Lua with nested tables](https://stackoverflow.com/questions/13366287/trying-to-call-a-function-in-lua-with-nested-tables/13367675#13367675)

The previous question gave me the answer to adding a nested function like this:

```
dog.beagle.fetch() 
```

I also would like to have variables at that level like:

```
dog.beagle.name
dog.beagle.microchipID 
```

I want this string and number to be allocated in C and accessible by Lua. So, in C code, the variables might be defined as:

```
int microchipIDNumber;
char dogname[500]; 
```

The C variables need to be updated by assignments in Lua and its value needs to be retrieved by Lua when it is on the right of the equal sign. I have tried the __index and __newindex metamethod concept but everything I try seems to break down when I have 2 dots in the Lua path to the variable. I know I am probably making it more complicated with the 2 dots, but it makes the organization much easier to read in the Lua code. I also need to get an event for the assignment because I need to spin up some hardware when the microchipIDNumber value changes. I assume I can do this through the __newindex while I am setting the value.

Any ideas on how you would code the metatables and methods to accomplish the nesting? Could it be because my previous function declarations are confusing Lua?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T09:14:18.307

Lua 中的冒号运算符 ( `:`) 仅用于函数。考虑以下示例：

```
meta = {}
meta["__index"] = function(n,m) print(n) print(m) return m end
object = {}
setmetatable(object,meta)
print(object.foo) 
```

index 函数将简单地打印它传递的两个参数并返回第二个参数（我们也将打印它，因为这样做`object.foo`是语法错误）。输出将`table: 0x153e6d0 foo foo`带有新行。所以`__index`获取我们在其中查找变量的对象及其名称。现在，如果我们替换`object.foo`为`object:foo`我们得到这个：

```
input:5: function arguments expected near ')' 
```

这是因为`:`in`object:foo`是 的语法糖`object.foo(object)`，所以 Lua 期望你为函数调用提供参数。如果我们确实提供了参数 ( `object:foo("bar")`)，我们会得到：

```
table: 0x222b3b0
foo
input:5: attempt to call method 'foo' (a string value) 
```

所以我们的`__index`函数仍然被调用，但它没有传递参数——Lua 只是尝试调用返回值。所以不要`:`用于会员。

顺便说一句，让我们看看如何在 Lua 和 C 之间同步变量。这实际上是相当复杂的，并且有不同的方法可以做到这一点。一种解决方案是使用`__index`和的组合`__newindex`。如果您`beagle`在 C 中有一个结构，我建议您制作这些 C 函数并将它们作为 C 闭包推入 Lua 表的元表中，并将指向您的 C 结构的指针作为上值。看看[这个](http://pgl.yoyo.org/luai/i/lua_pushcclosure)关于 Lua 中的闭包的一些信息`lua_pushcclosure`和[这个](http://www.lua.org/pil/6.1.html)。

如果您没有可以引用的单一结构，它会变得更加复杂，因为您必须以某种方式`variableName-variableLocation`在 C 端存储对并知道每个是什么类型。您可以在实际的 Lua 表中维护这样的列表，因此`dog.beagle`将变量名映射到一两个东西的映射。这个“东西”有几个选择。首先 - 一个轻量级用户数据（即 - 一个 C 指针），但随后您将遇到弄清楚它指向什么的问题，以便您知道要推入的 Lua 类型`__index`以及弹出的内容`__newindex`. 另一种选择是推送两个函数/闭包。您可以为您必须处理的每种类型（数字、字符串、表格等）创建一个 C 函数，并为每个变量推送适当的函数，或者创建一个超级闭包，它接受一个参数，它被赋予什么类型，然后只是改变你推动它的价值。在这种情况下，`__index`and`__newindex`函数将简单地为给定的变量名查找适当的函数并调用它，因此在 Lua 中实现它可能是最容易的。

在两个函数的情况下，你`dog.beagle`可能看起来像这样（**不是实际的 Lua 语法**）：

```
dog.beagle = {
  __metatable = {
    __index = function(table,key)
      local getFunc = rawget(table,key).get
      return getFunc(table,key)
    end

    __newindex = function(table,key,value)
      local setFunc = rawget(table,key).set
      setFunc(table,key,value)
    end
  }
  "color" = {
    "set" = *C function for setting color or closure with an upvalue to tell it's given a color*,
    "get" = *C function for getting color or closure with an upvalue to tell it to return a color*
  }
} 
```

**上述注意事项：** 1.不要直接设置对象的`__metatable`字段——它是用来隐藏真正的元表的。使用 setmetatable(object,metatable)。2.注意使用`rawget`。我们需要它，因为否则试图从内部获取对象的字段`__index`将是无限递归。`rawget(table,key)`3\. 您必须在事件返回时做更多的错误检查`nil`，或者如果它返回的内容没有`get`/`set`成员。

# jquery - JQuery: Animation/Traversing DOM tree

> ID：13499051
> 
> 赞同：0
> 
> 时间：2012-11-21T17:45:34.410
> 
> 标签：jquery, html, dom, jquery-animate

Overview:

I'm working on a Q&A page for a website. All the answers are initially hidden. I'm trying to animate the answers sliding out. There are little pictures of Q and A next to the questions and answers, respectively.

I want to move the Q to the left, have the answer slide down, and the "A" picture to fade in on first click of the question.

On the second click of the same question, I want it to hide. If another one is clicked, hide all and display the answer.

Code:

I can't get the code to work properly. I'm assuming there is something wrong with my DOM tree navigation but I'm not sure what.

HTML:

```
 <div class="faq">
            <div class="faq-question">Question goes here </div>
            <div class="faq-answer-container">
                <div class="faq-answer">Answer goes here </div>
            </div>              
        </div> 
```

This is one question/answer combo. There are five total on the page and they all use the same classes as the one shown (they all look exactly the same except for message content).

JQuery:

```
 <script>
        $(document).ready(function(){

            $(".faq-question").toggle(function(){

                <!-- this slides up all siblings -->

                $(this).siblings().slideUp();

                <!-- animation -->

                $(this).find('.letter-q').animate({left:"-=15"},"slow", function() {
                $(this).closest('faq').find('faq-answer-container').slideDown('slow');
                $(".letter-a").fadeIn("slow");
                });

            },function() {

            <!-- slides up all siblings -->
                $(this).siblings().slideUp();

                <!-- animation -->

                $('.letter-q').animate({left:"+=15"},"slow", function() {
                $(this).closest('faq').find('faq-answer-container').slideUp('slow');
                $(".letter-a").fadeOut("slow");

            });             
        });
        });
    </script> 
```

.letter-q and .letter-a are the classes designated to the pictures. For some reason, on first click, the Q fades out and on second and all subsequent clicks, all the other Q's start shifting to the right. The answer never slides down. I'm fairly new to JQuery but I've read the API material on everything I used. I'm not sure what's going wrong.

Any help would be appreciated!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T18:18:44.157

我不确定我 100% 了解情况，但我想出了我从这个问题中得到的东西。让我知道我离我有多远以及任何问题，我可以详细说明。

此外，如果您可以发布您当前正在使用的内容的 jsFiddle，那也会有所帮助。

```
$(document).ready(function() {
    $('.faq-question-container').click(function() {
        //-- move all instances of .faq-answer-container up
        $('.faq-answer-container').slideUp();

        //-- move 'active' instances back to their original position and remove 'active' class
        $('.faq-question-active').removeClass('faq-question-active').animate({
            left: '-=50'
        });

        //-- slide/animate our question
        $(this).find('.faq-answer-container').slideToggle();
        $(this).addClass('faq-question-active').animate({
            left: '+=50'
        });
    });
}); 
```

[http://jsfiddle.net/8qzvN/4/](http://jsfiddle.net/8qzvN/4/)

这些注释也应该用正确的语法替换。这些是您正在使用的 PHP 注释。

代替

```
<!-- PHP Comment --> 
```

和

```
// Javascript comment 
```

或者

```
/*
   Group of JS comments
*/ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T21:45:59.267

弄清楚了！JSFiddle：http: [//jsfiddle.net/HEywH/](http://jsfiddle.net/HEywH/)

如果有人好奇：

```
$(document).ready(function(){
                $(".faq").each(function(){

                <!-- this is to add the images to the questions and answers -->

                    $(this).prepend('<img src="images/faq-q.png" alt="Question" class="letter-q">');
                    $(this).closest(".faq").find(".faq-answer").prepend('<img src="images/faq-a.png" alt="Answer" class="letter-a">');
                }); 

                $(".faq-question").toggle(function(){

                    <!-- this initializes the state -->

                    $(this).closest(".faq").siblings(".faq").find(".faq-answer-container").slideUp();
                    $(this).closest(".faq").siblings(".faq").find(".letter-a").fadeOut();
                    $(this).closest(".faq").siblings(".faq").find('.letter-q').animate({left:"25px"},"fast");

                    <!-- animation -->

                    $(this).closest(".faq").find('.letter-q').animate({left:"-=15px"},"slow");
                    $(this).closest('.faq').find('.faq-answer-container').slideDown('slow');
                    $(this).closest(".faq").find(".letter-a").fadeIn("slow");

                },function() {

                <!-- initialization -->
                    $(this).closest(".faq").siblings(".faq").find(".faq-answer-container").slideUp();
                    $(this).closest(".faq").siblings(".faq").find(".letter-a").fadeOut();
                    $(this).closest(".faq").siblings(".faq").find('.letter-q').animate({left:"25px"},"fast");

                    <!-- animation -->

                    $(this).closest(".faq").find('.letter-q').animate({left:"25px"},"slow", function() {
                        $(this).closest('.faq').find('.faq-answer-container').slideUp('slow');
                        $(this).closest('.faq').find(".letter-a").fadeOut("slow");
                    });
                });             
            });
        </script>

    </head>
    <body>
        <div class="faq-container">
            <img src="images/faq-header.jpg" alt="faq header">
            <div class="faq">
                <div class="faq-question">How much is the application fee? Can I request an application fee waiver? </div>
                <div class="faq-answer-container">
                    <div class="faq-answer">The application fee is $70 and we do not offer fee waivers at this time. </div>
                </div>              
            </div> 
```

事实证明，我的 DOM 遍历非常糟糕。一点点研究，我就能弄清楚我的问题。

# c# - Creating a database that all projects can use

> ID：13499054
> 
> 赞同：0
> 
> 时间：2012-11-21T17:45:41.243
> 
> 标签：c#, sql, database, visual-studio-2010

I was wondering if anyone can help - in my C# solution I have a project for my application front end, and a project for the server. I want to have a database that both server and client front end can use, any advice on how to do this?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T17:49:08.527

[http://www.microsoft.com/sqlserver/en/us/editions/2012-editions/express.aspx](http://www.microsoft.com/sqlserver/en/us/editions/2012-editions/express.aspx)跳到我的脑海中，但如果你有一个“服务器”，我会非常小心地让客户端应用程序直接写入数据库“也一样。如果您想更安全，客户应该要求服务器为他们写信。

# python - Django Formsets：防止呈现空的内联表单

> ID：13499055
> 
> 赞同：2
> 
> 时间：2012-11-21T17:45:46.847
> 
> 标签：python, django, django-forms

是否可以防止 Django 呈现表单集的空内联表单？

在显示表单的模板中，我有：

```
{{ formset }}
{{ formset.management_form }} 
```

考虑以下要求：

1.  访问者第一次打开页面，并呈现表单。

    在这种情况下，Django 总是呈现一个空的内联表单。我可以指定不显示表单集中的表单吗？我有 JavaScript 代码，只要用户请求它们，它就会处理添加新的内联表单。

2.  访客提交表单，但其中有错误。

    表单再次显示，他之前在表单集中提供的项目显示为内联表单。哪个是对的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T18:24:51.753

请参阅表单集上的 django 文档[https://docs.djangoproject.com/en/1.4/topics/forms/formsets/](https://docs.djangoproject.com/en/1.4/topics/forms/formsets/)

```
 ArticleFormSet = formset_factory(ArticleForm, extra=2, max_num=1) 
```

extra 参数定义了额外的空表单的数量

# c# - P/Invoke declarations should not be safe-critical

> ID：13499056
> 
> 赞同：4
> 
> 时间：2012-11-21T17:45:45.370
> 
> 标签：c#, interop, pinvoke, code-analysis

My code imports following native methods:

*   `DeleteObject`, `GetFontData` and `SelectObject` from gdi32.dll
*   `GetDC` and `ReleaseDC` from user32.dll

I want to run the code in full and medium trust environments (I am fine with exceptions being thrown when these imported methods are indirectly used in medium trust environments).

When I run Code Analysis on the code I get warnings like:

> CA5122 P/Invoke declarations should not be safe-critical.
> 
> P/Invoke method '`GdiFont.DeleteObject(IntPtr)`' is marked safe-critical. Since P/Invokes may only be called by critical code, this declaration should either be marked as security critical, or have its annotation removed entirely to avoid being misleading.

Could someone explain me (in layman terms) what does this warning really mean?

I tried putting these imports in static `SafeNativeMethods` class as internal static methods but this doesn't make the warnings go away.

I didn't try to put them in `NativeMethods` because after reading [this article](http://blogs.msdn.com/b/codeanalysis/archive/2007/01/14/faq-how-do-i-fix-a-violation-of-movepinvokestonativemethodsclass.aspx) I am unsure that it's the right way to go because I don't want my code to be completely unusable in medium trust environments (I think this will be the consequence of moving imports to `NativeMethods`).

Honestly, I am pretty much confused about the real meaning of the warning and consequences of different options to suppressing it.

Could someone shed some light on all this?

EDIT:

My code target .NET 2.0 framework.

Assembly is marked with

```
[assembly: AllowPartiallyTrustedCallers] 
```

Methods are declared like this:

```
[DllImport("gdi32")]
internal static extern int DeleteObject(HANDLE hObject); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-22T16:58:32.953

这很可能是这个错误的发生[Bogus CA5122 关于 P/Invoke 声明的警告不应该是安全关键的](http://connect.microsoft.com/VisualStudio/feedback/details/729254/bogus-ca5122-warning-about-p-invoke-declarations-should-not-be-safe-critical)，这在 NET4 之前的程序集中表现出来。

# javascript - Simple iterate DOM element does not work

> ID：13499059
> 
> 赞同：-1
> 
> 时间：2012-11-21T17:46:00.513
> 
> 标签：javascript, jquery, dom

this supposed to be easy task, but in fact i spent hour to solve this matter, i googled and found no solution yet, basically i would like to iterate dom element (div with IDs), here's my code:

```
$j(document).ready(function(){
    $j("#pinlocation").each(function(index){
        alert(index+":"+$j(this).text());
    });

}); 
```

on the content:

```
 <div id="pinlocation">Test1</div>
   <div id="pinlocation">Test2</div> 
```

i replicate the error here: [http://www.doxadigital.com/scrape/dummy.php](http://www.doxadigital.com/scrape/dummy.php)

as you see, this script fails to get second "pinlocation". Any idea what did i go wrong ?

Thanks a lot

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-21T17:47:03.263

ID 应该是唯一标识符。要么将其更改为一个类，要么给它们不同的 ID。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-21T17:48:32.847

这里的问题很简单，你**不能**有两个相同`id`的元素，第二个将被忽略。

您可以尝试将您的更改`id="pinlocation"`为`class="pinlocation"`然后执行以下操作：

```
$j(document).ready(function(){
    $j(".pinlocation").each(function(index){
        alert(index+":"+$j(this).text());
    });
}); 
```

现在应该可以正常工作了。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-21T17:55:07.427

您的 html 无效，因为您对多个元素使用了相同的 id。这就是为什么您的代码没有为第二个 id 迭代的原因。

见[http://www.w3.org/TR/REC-html40/struct/global.html#h-7.5.2](http://www.w3.org/TR/REC-html40/struct/global.html#h-7.5.2)

而是对元素使用类。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-21T17:53:21.630

这是一个非常简单的解决方案，将您的 id 更改为一个类。

```
$j(document).ready(function(){
    $j(".pinlocation").each(function(index){
        alert(index+":"+$j(this).text());
    });

});
<div class="pinlocation">Test1</div> 
```

注意。所有 ID 都应该是唯一的。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-21T17:46:45.440

对于两个不应该如此的控件，您有相同的 id。你可以塑造你的选择器来迭代但是`this is bad practice and must not be used unless you have no other option`. `Its better to put some class in both and using class selector`.

**改变**

```
$j("#pinlocation") 
```

**至**

```
$j("[id=pinlocation]") 
```

**你的代码**

```
$j(document).ready(function(){
    $j("[id=pinlocation]").each(function(index){
        alert(index+":"+$j(this).text());
    });    
}); 
```

**使用类选择器（推荐）**

```
 <div id="pinlocation1" class="someclass">Test1</div>
  <div id="pinlocation2" class="someclass">Test2</div>

$j(document).ready(function(){
    $j(".someclass").each(function(index){
        alert(index+":"+$j(this).text());
    });
}); 
```

# c# - 更改 For 循环中的变量名称以反映迭代器的值？

> ID：13499063
> 
> 赞同：0
> 
> 时间：2012-11-21T17:46:17.610
> 
> 标签：c#, for-loop, streamreader

我正在尝试将文本从不同的文本文件加载到内存中。它们都是单词，在各自的文本文件中都是按单词长度分组的（例如words3.txt、words4.txt...）

我正在使用`StreamReader`这些文件，并且由于语法的原因，我相当确定如果我在`for`循环内执行它，我可以迭代它正在使用的文件。我不明白为什么我应该有 12 种不同的`using`陈述。

```
String[] words3 = new String[2000];

for (int i = 0; i < 12; i++)
{
    using (StreamReader sr = new StreamReader(path + "words" + (i+3) + ".txt"))
        {
            String strTemp = sr.ReadLine();
            words3 = strTemp.Split(' '); //My current logic fails here
        }
} 
```

我想遍历我的不同单词数组（words3、words4...words15），但我自然会遇到存储这些数组的名称的问题。它保持不变，所以我只是覆盖它12 次。在`VB.NET`我可以像这样（或类似的东西）将迭代器变量连接到数组名称：

```
words & (i+3) = strTemp.Split(' '); 
```

这显然不会像我描述的那样在 C# 中工作。解决这个问题的最佳方法是什么？我可以将数组放入更大的数组并以某种方式遍历它们吗？在文本文件中，单词不存储在单独的行中，它们由一个空格分隔。为了节省时间，当我去查看用户的单词是否包含在我的“字典”中时，我只想在包含适当数量字母的单词的数组中搜索匹配项。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-21T17:48:57.970

为什么不创建一个`List`数组？

```
List<string[]> stringList = new List<string[]>();
for (int i = 0; i < 12; i++)
{
    using (StreamReader sr = new StreamReader(path + "words" + (i+3) + ".txt"))
        {
            String strTemp = sr.ReadLine();
            stringList.Add(strTemp.Split(' '));
        }
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-21T17:49:35.910

使用字典之类的东西：

```
Dictionary<int,string[]> word_dict = new Dictionary<int,string[]>();

    for (int i = 0; i < 12; i++)
    {
        using (StreamReader sr = new StreamReader(path + "words" + (i+3) + ".txt"))
            {
                String strTemp = sr.ReadLine();
                string[] words = strTemp.Split(' ');

                word_dict.Add(i + 3,words);
            }
    } 
```

然后把话说回来：

```
string[] words3 = word_dict[3]; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-21T17:51:34.557

或者，数组数组（锯齿状数组）将起作用：

```
string[][] words = new string[12][];

for (int i = 0; i < 12; i++)
{
   using (StreamReader sr = File.OpenText(path + "words" + (i + 3) + ".txt"))
   {
      string strTemp = sr.ReadLine();
      words[i] = strTemp.Split(' ');
   }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-21T17:52:02.843

我会使用类型的字典`<int, string[]>`。键是字长，值是字符串数组。像这样排序：

```
var wordDict = new Dictionary<int, String[]>();

for (int i = 0; i < 12; i++)
{
    using (StreamReader sr = new StreamReader(path + "words" + (i+3) + ".txt"))
        {
            String strTemp = sr.ReadLine();
            String[] words = new String[2000];
            words = strTemp.Split(' '); 
            wordDict[i] = words;
        }
} 
```

通过使用字典，您可以使用单词长度轻松访问正确的字符串数组（而不是在使用锯齿状数组或列表时知道索引）。

```
var words3 = wordDict[3];
var words4 = wordDict[4]; 
```

# dom - Automation server can't create object error while using new ActiveXObject("Msxml.DOMDocument") in IE9

> ID：13499066
> 
> 赞同：2
> 
> 时间：2012-11-21T17:46:29.450
> 
> 标签：dom, internet-explorer-9, activexobject

I am using **new ActiveXObject("Msxml.DOMDocument")** and I am getting "**Automation server can't create object**" error.

I am using the same code in my machine windows 7 and IE 9, and it is working fine. But with IE 9 on other machine using windows 7 I am getting this error mentioned above.

I have enabled **Initializing and Script ActiveX controls not marked as safe** and it is working fine now.

But my question is, why is it working in other machines even though that is disabled? Can you please provide me the answer?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-06T21:02:00.473

那台机器可能有一个 currpted 文件/对象。您可以尝试从另一台机器上更换它并查看。希望这可以帮助。

# python - 在 sqlalchemy 中，如何通过使列条目相同来组合两个查询？

> ID：13499068
> 
> 赞同：9
> 
> 时间：2012-11-21T17:46:40.357
> 
> 标签：python, join, sqlalchemy

假设我有一个映射的类`User`，映射到同名的表，以及他的年龄的列“年龄”。我现在对以下问题感兴趣：

在我的申请过程中，出现了两个查询：

```
q1 = session.query(User).filter(lots of conditions)
q2 = session.query(User).filter(lots of other conditions) 
```

我现在想在他们年龄相同的情况下将 q2 “加入”到 q1 上。但我不知道这会如何工作。我尝试了以下但没有成功：

```
q1.join(q2.subquery(), q1.age==q2.age) # the query doesn't hold the columns of the queried class
q1.join(Age).join(q2.subquery()) # Works only if age is a relationship with mapped class Age 
```

我最接近的电话是这样的：

```
a1 = aliased(User)
a2 = aliased(User)
q1 = session.query(a1)
q2 = session.query(a2)
s = q2.subquery()
q1.join(s, a1.age==a2.age).all()
>>> sqlalchemy.exc.OperationalError: (OperationalError) no such column: user_2.age 'SELECT user_1.id AS user_1_id, user_1.name AS user_1_name, user_1.age AS user_1_age \nFROM user AS user_1 JOIN (SELECT user_2.id AS id, user_2.name AS name, user_2.age AS age \nFROM user AS user_2) AS anon_1 ON user_1.age = user_2.age' () 
```

关于如何进行此运行的任何想法？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-11-21T18:36:46.707

在摆弄并阅读有关子查询的问题的答案之后，我设法找到了解决方案。而不是最后一个有问题的行，放：

```
q1.join(s, a1.age==s.columns.age).all() 
```

这样，on-clause 就变成了`ON user_1.age = anon_1.age`，这就是我们想要的。

# r - 错误：连续值提供给带有因子的离散比例

> ID：13499071
> 
> 赞同：1
> 
> 时间：2012-11-21T17:46:48.810
> 
> 标签：r, ggplot2, r-factor

我得到了这个data.frame

```
'data.frame':   935 obs. of  17 variables:
 $ IQ        : num  93 119 108 96 74 116 91 114 111 95 ...
 $ KWW       : num  35 41 46 32 27 43 24 50 37 44 ...
 $ educ      : num  12 18 14 12 11 16 10 18 15 12 ...
 $ exper     : num  11 11 11 13 14 14 13 8 13 16 ...
 $ tenure    : num  2 16 9 7 5 2 0 14 1 16 ...
 $ age       : num  31 37 33 32 34 35 30 38 36 36 ...
 $ married   : Factor w/ 2 levels "married","non-married": 1 1 1 1 1 1 2 1 1 1 ...
 $ black     : Factor w/ 2 levels "black","non-black": 2 2 2 2 2 1 2 2 2 2 ...
 $ south     : Factor w/ 2 levels "non-south","south": 1 1 1 1 1 1 1 1 1 1 ...
 $ urban     : Factor w/ 2 levels "rural","urban": 2 2 2 2 2 2 2 2 1 2 ...
 $ sibs      : num  1 1 1 4 10 1 1 2 2 1 ...
 $ brthord   : num  2 NA 2 3 6 2 2 3 3 1 ...
 $ meduc     : num  8 14 14 12 6 8 8 8 14 12 ...
 $ feduc     : num  8 14 14 12 11 NA 8 NA 5 11 ...
 $ lwage     : num  6.65 6.69 6.72 6.48 6.33 ...
 $ experclass: Factor w/ 5 levels "(0,5]","(5,10]",..: 3 3 3 3 3 3 3 2 3 4 ...
 $ iqlevel   : Factor w/ 4 levels "50","75","100",..: 2 3 3 2 1 3 2 3 3 2 ... 
```

绘制这样的 ggplot 有效：

```
 p<-ggplot(data = wage)
  p+ geom_jitter(aes(x = educ, y = lwage, shape=married,
                col = black, size=IQ, alpha=0.1)) 
```

然而不是这样

```
 p<-ggplot(data = wage)
  p+ geom_jitter(aes(x = educ, y = lwage, shape=married,
                col = black, size=iqlevel, alpha=0.1)) 
```

错误发生在 geom_smooth 中，这是完整的代码

```
 load("C:/tmp/session08.rda")

  wage["iqlevel"]<-cut(wage$IQ, breaks=c(0,75,100,125,Inf), labels=c(50,75,100,125))

  # geom_jitter where col, size, etc define different representations/ axes
  p<-ggplot(data = wage)

  p+ geom_jitter(aes(x = educ, y = lwage, shape=married,
                    col = black, size=iqlevel, alpha=0.1)) +
  # a grid
  facet_grid(urban ~ experclass)+
  # setting the axis labels
  xlab("Education (Years)") + ylab("Log Wage") +
  scale_fill_discrete(name="Experimental\nCondition") 
  # setting the labels for the legend
  labs(shape="Martial Status", col="Ethnicity", size ="IQ") +
  # removing alpha from the legend and setting dots as the symbol of the size legend
  guides(alpha=FALSE, size = guide_legend(override.aes = list(shape = 20))) +
  # trying to draw a regression, without the confidence interval
  geom_smooth(se=F, method ="lm", color="black", fullrange=T, na.rm=T,
              aes(lwd=1, x = educ, y = lwage)) 
```

**编辑：**

包含工资的会话文件： [session08.rda](http://dl.dropbox.com/u/3739296/session08.rda "session08.rda")

PS：我需要设置因子水平，因为智商水平应该是自定义的

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-21T18:46:05.493

`lwd`不是一个有效的`geom_smooth`美学参数。`size=1`像你一样设置在审美功能之外`color="black"`。

这是文档[链接](http://docs.ggplot2.org/current/geom_smooth.html)。

# clearcase - ALBD 服务正在停止

> ID：13499074
> 
> 赞同：0
> 
> 时间：2012-11-21T17:47:03.677
> 
> 标签：clearcase

我已经安装了 Rational ClearCase Server v7.1.2，但是在安装过程中，我为 Clearcase Adminstrator Group 提供了错误的组名，因此我的 Atria 位置代理服务在启动后立即停止。

我现在如何在不重新安装服务器的情况下更改组名？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-21T19:00:52.203

您可以检查 albd 服务的用户帐户。

控制面板 > 管理工具 > 服务 > Atria 位置代理 > 属性 > 登录。

该组本身位于 Windows 注册表中：

将以下 Windows 注册表项设置为有效的 ClearCase 组名称：

*   32 位 Windows： `HKEY_LOCAL_MACHINE\SOFTWARE\Atria\ClearCase\CurrentVersion\ClearCaseGroupName`
*   64 位 Windows： `HKEY_LOCAL_MACHINE\SOFTWARE\Wow6432Node\Atria\ClearCase\CurrentVersion\ClearCaseGroupName`

看：

*   “ [Atria Location Broker 服务不会在新的 ClearCase 服务器安装后启动](http://www-01.ibm.com/support/docview.wss?uid=swg21298188)”
*   "[对 Windows 上的 ALBD 启动失败进行故障排除](http://www-01.ibm.com/support/docview.wss?uid=swg21177467)"

# python - 如何在 Python 中创建列表列表

> ID：13499080
> 
> 赞同：2
> 
> 时间：2012-11-21T17:47:11.133
> 
> 标签：python

我有一个开始结束和一个步骤，我想创建一个这样的列表（开始 = 0，结束 = 300，步骤 = 100）：

```
[[1, 100], [101, 200], [201, 300]] 
```

开始、结束和步骤会有所不同，因此我必须动态创建列表。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-21T17:54:28.513

```
>>> start = 0
>>> end = 300
>>> step = 100
>>> [[1 + x, step + x] for x in range(start, end, step)]
[[1, 100], [101, 200], [201, 300]] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-21T17:53:01.707

你只需要一个简单的while循环： -

```
start = 0
end = 300
step = 100

my_list = []

while start < end:   # Loop until you reach the end
    my_list.append([start + 1, start + step]) 
    start += step    # Increment start by step value to consider next group

print my_list 
```

**输出 ： -**

```
[[1, 100], [101, 200], [201, 300]] 
```

同样的事情可以通过`range`或`xrange`函数来实现，在`list comprehension`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-21T17:56:59.103

您可以同时创建两个[`range`s](http://docs.python.org/2/library/functions.html#range)和[`zip`](http://docs.python.org/2/library/functions.html#zip)它们：

```
def do_your_thing(start, end, step):
    return zip(range(start, end - step + 2, step),
               range(start + step - 1, end + 1, step)) 
```

# python - 在 python 中读取 JSON 字典：如何处理长度为 1 的数组？

> ID：13499090
> 
> 赞同：0
> 
> 时间：2012-11-21T17:47:50.780
> 
> 标签：python, arrays, json

我需要阅读一条 JSON 消息，其中包含一个名为“derivedFrom”的键。它的值可能具有以下形式：

```
Case 1\. "derivedFrom": "id1" 
```

或这个：

```
Case 2\. "derivedFrom": ["id1", "id2", "id3"] 
```

我需要做的是非常基本的事情：读取值并循环它们。现在我正在这样做：

```
#line contains JSON string
data = json.loads(line)
# ...
derivedIds = data['derivedFrom']
for deid in derivedIds:
# ... 
```

这适用于案例 2，但对于案例 1，它会遍历 id“id1”的单个字符，这显然不是我需要的。

如何修改上面的块以正确处理这两种情况？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T18:10:59.007

如果您知道derivedFrom 的值将*始终*是一个列表或一个值（即，不是字典）：

```
#line contains JSON string
data = json.loads(line)
# ...
derivedIds = data['derivedFrom']
if not isinstance(derivedIds, list):
    derivedIds = [derivedIds]
for deid in derivedIds: 
```

它来自 JSON 的事实简化了问题，因为它极大地限制了您必须担心的数据类型的数量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T18:18:04.440

作为原始示例：

```
#line contains JSON string
data = json.loads(line)
# ...
derivedIds = data['derivedFrom']
if isinstance(derivedIds, basestring):
   #.... 
else:
    for deid in derivedIds:
    # ... 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-21T17:59:48.930

`str/unicode`您可以使用没有`__iter__`属性的事实，而`lists`，`sets`或`dicts`做。

```
#!/usr/bin/env python

import json

case1 = '{"derivedFrom": "id1"}'

case2 = '{"derivedFrom": ["id1", "id2", "id3"]}'

def parse(line):
    data = json.loads(line)
    if not(hasattr(data["derivedFrom"], "__iter__")):
        print "Converting %s to list" % type(data["derivedFrom"])
        data["derivedFrom"] = [data["derivedFrom"]]
    print "data['derivedFrom']: %s, of type %s" % (data["derivedFrom"], type(data["derivedFrom"]))

if __name__ == "__main__":
    parse(case1)
    parse(case2) 
```

虽然，如果可能的话，我更愿意修改发送该 JSON 的任何内容以确保发送列表（尝试使其发送`'{"derivedFrom": ["id1"]}'`）

# java - Eclipse项目运行时问题

> ID：13499095
> 
> 赞同：1
> 
> 时间：2012-11-21T17:48:02.577
> 
> 标签：java, eclipse, jakarta-ee, web-applications

我有 2 个项目 Dynamic Web 项目 XYZ 和另一个 java 项目 ABC 我已经从 XYZ 的 java 构建路径添加了 XYZ 中 ABC 的项目引用，并且还在 XYZ`web-inf/lib`文件夹中添加了 ABC jar。

现在，当我在服务器上运行 XYZ 时，在 ABC 中所做的更改没有反映出来，即，我`System.out.println`在 ABC 中编写了很多内容，但在服务器上运行 XYZ 时它没有在控制台上打印任何内容，我还尝试在 XYZ 中添加最新的 ABC jar但它看起来毫无价值。我无法检查 XYZ 项目从哪里读取 ABC 的类文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T18:46:39.873

你应该警告过*循环依赖*。考虑重构几个没有它的模块。或者，导出到 jar 并将其添加到项目中。在这种情况下，最好使用*Maven*将 jar 放入存储库并引用其他项目。

# sql - 复合主键sql关系

> ID：13499096
> 
> 赞同：0
> 
> 时间：2012-11-21T17:48:07.693
> 
> 标签：sql, sql-server-2008, primary-key, sql-server-2012

我需要创建一个关系，`ReportID`它是复合主键的一部分。这是我为 Microsoft SQL Server 编写的代码：

```
CREATE TABLE Tableone
(
    ReportID varchar UNIQUE,
    Date date,
    Line ommited

PRIMARY KEY (ReportNumber, Date)
)

CREATE TABLE Tabletwo
(
    Line omitted
    Line ommited
    ReportID varchar UNIQUE FOREIGN KEY REFERENCES Tableone(ReportID),
    Line ommited

    PRIMARY KEY (XX, XXX, ReportID)
) 
```

更新：我们特别被要求将`ReportID`和设置`Date`为主键，`Tableone`但仅`ReportID`在`Tabletwo`.

谢谢你的时间。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-21T17:52:21.300

如果您有**复合**主键，则引用它的**所有**外键约束必须使用复合主键的**所有列**。

所以在你的情况下 -`TableTwo` **必须**参考`TableOne(ReportID, Date)`

解决此问题的唯一方法是创建一个`UNIQUE INDEX`on `TableOne (ReportID)`- 然后您可以单独创建对该唯一约束的外键引用。

但这又引出了一个问题：如果它已经是唯一的（因为你可以在上面放一个）并且不是 NULL（因为它是复合 PK 的一部分），为什么不是`ReportID`唯一的主键？`UNIQUE INDEX`

第 1 步：创建`UNIQUE INDEX`：

```
CREATE UNIQUE NONCLUSTERED INDEX UIX_TableOne ON dbo.TableOne(ReportID); 
```

第 2 步：从以下位置创建外键`TableTwo`：

```
ALTER TABLE dbo.TableTwo
ADD CONSTRAINT FK_TableTwo_TableOne
FOREIGN KEY(ReportID) REFERENCES dbo.TableOne(ReportID) 
```

# python - 需要在 Python 中将字符串与文件中的行匹配

> ID：13499100
> 
> 赞同：1
> 
> 时间：2012-11-21T17:48:23.073
> 
> 标签：python, file, list, format, abbreviation

我第一次在这里问东西。我有一个名称文本文件，每行一个名称，我正在读入一个列表，然后将该列表复制两次，第一次删除\n，第二次将列表小写。然后我向用户询问一个搜索词，并将他们的输入转换为小写，然后搜索列表的小写版本，然后我得到匹配的索引，并使用它来显示那个的非小写版本将项目返回给用户（以便他们可以键入例如 anivia 并取回 Anivia）。这工作正常，但我确定我的代码很糟糕。我想做的是为列表文件中的某些名称添加特定的缩写，并接受这些缩写作为输入，但仍显示回全名。例如，用户输入“mumu” 它看到列表中有 Amumu - mumu，以引用 Amumu。我怎么能接受这个缩写？还有其他情况，例如幸运小姐的 mf 或卡兹克的 kha。我想也许有第二个文件包含缩写列表，但这似乎很浪费，我相信有更好的方法。到目前为止，这是我的错误代码：

```
f = open("champions.txt") #open the file
list = f.readlines() #load each line into the list
#print list
list2 = [item.rstrip('\n') for item in list] #remove trailing newlines in copy list
list3 = [item.lower() for item in list2] #make it all lowercase

print "-------\n", list2 #print the list with no newlines just to check

print "which champ" #ask user for input
value = raw_input().lower() #get the input and make it lowercase
if value in list3: #check list for value and then print back a message using that index but from the non-lowercase list
    pos = list3.index(value)
    print "list contains", list2[pos]
else: #if the input doesn't match an item print an error message
    print "error" 
```

一旦它按我需要的方式工作，我就把它全部放入我的主文件中的某个函数中。基本上我想更改我的文本文件中的一些行以具有有效的替代缩写，并且能够接受其中的那些，并且仍然将全名显示给用户。例如，我的辅助文本文件中具有缩写的行中有一行：

```
Kog'Maw - kogmaw, kog, km 
```

我怎样才能简化我所拥有的并添加该功能？我不确定从哪里开始，我对 python 和一般编程很陌生。感谢您提供的任何帮助，对于这么长的帖子感到抱歉。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T18:13:31.967

好的，这是一个修改后的答案，假设有一个包含名称和缩写的文件，如本文开头[所示](http://www.pasteall.org/37416)。

本质上，它所做的是制作一个大型查找表，将文件中的任何缩写加上小写的名称本身映射到每行开头的名称。

```
lookup = {}
with open("champions.txt") as f:
    for line in f:
        line = line.rstrip().split('-', 1)
        if not line: continue # skip any blank lines

        name = line[0].strip()
        lookup[name.lower()] = name
        if len(line) == 2:  # any alternative names given?
            for item in line[1].split(','):
                lookup[item.strip()] = name

print 'lookup table:'
for alt_name, real_name in sorted(lookup.items()):
    print '{}: {}'.format(alt_name, real_name)
print

while True:
    print "which champ (Enter to quit): "  # ask user for input
    value = raw_input().lower()  # get the input and make it lowercase
    if not value: break

    real_name = lookup.get(value)
    if real_name:
        print 'found:', value, '-->', real_name
    else:
        print 'error: no match for', value 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T18:18:36.463

首先，您应该使用有用的名称。所以，而不是`list2`调用它`lower_names`等。

其次，您可以更换`in`接线员`index`，只需一`index`通电话即可。如果你注意到了，调用 to`some_list.index(item_which_does_not_exist)`会`valueError`提示该项目不在列表中。最“pythonic”的方法是通过`try`ing 获取索引，`except`如果它失败，那么你会做其他事情。

所以你可以用`if`这个替换部分：

```
try:
    pos = list3.index(value)
except ValueError:
    print 'error'
else:
    print 'everything is ok. there was no exception raised'
    print 'list contains', list2[pos] 
```

在 python 哲学中经常说，请求宽恕比请求许可更好。:)

另一件重要的事情，这只是假设您想将小写名称与其“真实”名称匹配，您需要一个字典。字典将一个键映射到一个值，因此您在这里遇到的情况是您希望每个小写名称（键）映射到真实名称（值）。它可以这样定义（我看到你熟悉一个衬垫）：

```
name_map = {item.lower(): item for item in (line.strip() for line in f)} 
```

因此，`readlines`您可以直接遍历文件，而不是使用 。这是 Python 中的额外糖分。

然后，您可以执行以下操作：`value in name_map`或`real_name = name_map[value]`.

至于额外的功能，我会选择你的第二个选项，即`name - nickname1,nickname2`. 所以你需要做的是：阅读每一行，用破折号分隔`-`（或任何其他不会在名称中使用的字符），然后用逗号分隔第二部分以单独使用每个名称。包起来：

```
name_map = {}
nick_map = {}
for line in f:
    parts = line.strip().split('-')
    name = parts[0].strip()
    nicks = {n.strip(): name for n in parts[1].split(',')}
    name_map[name.lower()] = name
    nick_map.update(nicks)

# To check a name:
if value in name_map:
   # Exact match
elif value in nick_map:
   # Nickname match
else:
   # No Match 
```

您可以使用 try/except/else 子句进行等效操作，但这会造成过多的嵌套，不建议这样做。

# php - 读取 JSON 格式

> ID：13499102
> 
> 赞同：0
> 
> 时间：2012-11-21T17:48:27.487
> 
> 标签：php, javascript, json, jsonp, getjson

我创建了一行代码，用于从 SOAP 服务读取数据。但我有一个小问题。我在这个任务中使用 JSONP Lib，但没有产生结果。我尝试用更少的代码来读取数据库查询的输出，结果是成功的。这两种方法有区别吗？第一个我做的 PHP 代码将数组转成 json 的形式：

```
<?php
error_reporting(0);
header('content-type:application/json;charset=UTF-8');
date_default_timezone_set("Asia/Jakarta");
require_once('lib/nusoap.php');

$Param1 = "bertho_joris@yahoo.co.id";
$Param2 = "12345";

$client = new nusoap_client('http://vcare.telkomvision.net.id/services/VcareServices.php');
$ReadSOAP = $client->call('validateLogin', array('EMAIL' => $Param1, 'PASSWORD' => md5($Param2)));

echo '{"items":['. json_encode($ReadSOAP) .']}';
?> 
```

上述代码产生的数据是：

```
{
"items": [
    {
        "NE": "42616324457",
        "EMAIL": "bertho_joris@yahoo.co.id",
        "TIPE": "POSTPAID",
        "NAMA": "ALBERTHO MALAQUENA JORIS/NPK:120488047",
        "TELP": "081310117966 / 087878837451",
        "DN": "127225148174",
        "STATUS_LOGIN": "1",
        "DESC_LOGIN": "Valid"
      }
   ]
} 
```

我使用下面的库来处理稍后在我的应用程序中读取的输出数据： [JSONP 库](http://www.nonobtrusive.com/2010/05/20/lightweight-jsonp-without-any-3rd-party-libraries/)

```
JSONP.get( 'MyURL.php', {Email:'MyEmail', Password:'MyPass'}, function(data){
    for ( var i = 0; i < response.length; ++i ) {
          str = response[i].ne;
          str2 = response[i].email;
          str3 = response[i].tipe;
          str4 = response[i].nama;
          str5 = response[i].telp;
          str6 = response[i].dn;
          str7 = response[i].desc_login;
    }
}); 
```

但我得到的结果是：**我的应用程序无法直接从上面的 SOAP 读取数据输出**。我很困惑为什么会这样。而且我认为 JSON 格式是正确的。

然后我尝试直接从数据库中读取数据。这个数据库是一个样例，我不小心把上面的SOAP读取过程的输出做成了一样的数据。

**结果，我成功拿到了数据。**

我包括两个用于阅读的链接。

1.  此链接是直接从服务器处理 SOAP 的 php 文件，输出为 JSON： [读取失败](http://telkomvision.com/soap/SOAPLogin.php)

2.  这是到具有虚拟数据库的数据库的直接链接。JSON 输出。我成功地使用了第二种方法： [阅读成功](http://telkomvision.com/soap/SOAPLogin2.php)

请帮我解决我的问题。我想使用输出 JSON 的 SOAP 表单直接从流程中读取数据。正如我所说的失败。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T19:17:20.370

尝试这个：

```
JSONP.get( 'MyURL.php', {Email:'MyEmail', Password:'MyPass'}, function(data){
    for (var i = 0; i < response.length; i++) 
    {
        str  = response[i].NE;
        str2 = response[i].EMAIL;
        str3 = response[i].TIPE;
        str4 = response[i].NAMA;
        str5 = response[i].TELP;
        str6 = response[i].DN;
        str7 = response[i].DESC_LOGIN;
    }
 }); 
```

# jquery-ui - Knockout BindingHandler & jquery ui spinner - 用户输入延迟

> ID：13499104
> 
> 赞同：0
> 
> 时间：2012-11-21T17:48:29.823
> 
> 标签：jquery-ui, knockout.js

我有一个淘汰视图模型，其中包含一个可观察的“重量”数组，如下所示

```
var Weight = function(item){
var self = this;
self.weight = ko.observable(item);
self.lbs = ko.computed({
    read: function () {
        return Math.floor(self.weight() / ozInLbs);
    },
    write: function (newValue) {
        self.weight((((newValue * ozInLbs) + parseFloat(self.oz())).toFixed(3)*1000)/1000);
    },
    owner: self
});
self.oz =  ko.computed({
    read: function () {
        return ((self.weight() - self.lbs() * ozInLbs).toFixed(3)*1000)/1000;
    },
    write: function (newValue) {
        self.weight(((newValue + (self.lbs() * ozInLbs)).toFixed(3)*1000)/1000);
    },
    owner: self
}); 
```

}

带有以下 html

```
<table>
<thead>
    <tr>
        <td>lbs</td>
        <td>oz</td>
    </tr>
</thead>
<tbody data-bind="foreach: weights">
<tr>
    <td><input type="text" data-bind="spinner:lbs" /></td>
    <td><input type="text" data-bind="spinner:oz" /></td>
</tr> 
```

想法是，当我用微调器增加盎司时——一旦击中 16 盎司——磅增加一，盎司回到零。这适用于以下 jsfiddle：http: [//jsfiddle.net/ajwaka/Ps36B/](http://jsfiddle.net/ajwaka/Ps36B/)

现在 - 因为这些本质上是文本输入'我想允许用户添加 1.25 磅 - 并让它自动将输入更新为 LBS - 1 和 OZ = 4

问题是 - 一旦我达到 1.2 - 一切都会自动更新，我得到 Lbs = 1 和 Oz = 3。当用户输入值 1.25 时，我怎样才能让它延迟 1/2 秒我得到磅 = 1 和盎司 = 4？

需要明确的是 - 我想在使用微调器时保持即时更新 - 但如果用户通过键盘/键盘输入值，则会延迟用户输入。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T19:25:34.947

您可以使用[Throttle 的](http://knockoutjs.com/documentation/throttle-extender.html). 油门会阻止更新实际发生，直到该值在指定的时间内保持静止。这是[您使用 500 毫秒油门的小提琴](http://jsfiddle.net/Ps36B/3/)。

代码如下所示：

```
self.lbs = ko.computed({
        read: function () {
            return Math.floor(self.weight() / ozInLbs);
        },
        write: function (newValue) {
            self.weight((((newValue * ozInLbs) + parseFloat(self.oz())).toFixed(3)*1000)/1000);
        },
        owner: self
    }).extend({ throttle: 500 }); 
```

# java - 如何在 Hadoop 1.0.4 中链接映射器/减速器？

> ID：13499107
> 
> 赞同：2
> 
> 时间：2012-11-21T17:48:58.047
> 
> 标签：java, api, hadoop, mapreduce, version

我正在使用 Hadoop 1.0.4 的“新”API（包 org.apache.hadoop.mapreduce 中的类）。当我想链接 mapper/reducer 时，我发现 ChainMapper、ChainReducer 是为“旧”API（包 org.apache.hadoop.mapred 中的类）编写的。我应该怎么办？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-23T10:21:38.413

我也在寻找同样的东西。我确实得到了答案，尽管为时已晚，但我认为分享这可能会对某人有所帮助。

**从 Hadoop 2.0 开始，您可以在包org.apache.hadoop.mapreduce.lib.chain**中找到 ChainMapper 和 ChainReducer

**ChainMapper 使用模式：

```
...
Job job = new Job(conf, "MyJob");

Configuration map1Conf = new Configuration(false); 
... ChainMapper.addMapper(job, AMap.class, LongWritable.class, Text.class, Text.class, Text.class, true, map1Conf);

Configuration map2Conf = new Configuration(false); 
... ChainMapper.addMapper(job, BMap.class, Text.class, Text.class, LongWritable.class, Text.class, false, map2Conf);

Configuration map3Conf = new Configuration(false); 
... ChainReducer.setReducer(job, CReducer.class, Text.class, Text.class, LongWritable.class, Text.class, false, map3Conf);
...

job.waitForComplettion(true);
... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T02:56:16.390

请阅读这篇[文章](http://blogs.msdn.com/b/avkashchauhan/archive/2012/03/29/how-to-chain-multiple-mapreduce-jobs-in-hadoop.aspx)。这显示了如何使用两个 JobConf 来启用 Map Reduce 作业的链接，而不是使用 ChainMapper/ChainReducer。**

# php - SQL查询/表到RDF

> ID：13499110
> 
> 赞同：1
> 
> 时间：2012-11-21T17:49:01.187
> 
> 标签：php, rdf, sparql, semantic-web, n-triples

有谁知道可以将 SQL 数据转换为 RDF 三元组的工具/项目？

这里有一个文档说明了如何做到这一点[http://www.w3.org/TR/2011/WD-rdb-direct-mapping-20110324/](http://www.w3.org/TR/2011/WD-rdb-direct-mapping-20110324/)，但我希望会有一些PHP（或其他）实现这个的？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T07:18:47.200

[这个问题与这个](https://stackoverflow.com/questions/9656998/is-there-a-java-open-source-implementation-of-r2rml)问题非常相似；这是一个简短的总结：

*   有一个[页面](http://www.w3.org/2001/sw/rdb2rdf/wiki/Implementations)和一个[报告](http://www.w3.org/TR/2012/NOTE-rdb2rdf-implementations-20120814/)维护实施 R2RML 的项目列表。（按照我的答案中的链接打开它们）

*   不要忘记搜索 R2RML + 实现或您最喜欢的编程语言

*   一个有用且有趣的探索工具可能是[Google Refine](http://code.google.com/p/google-refine/)

# google-maps - google.maps.Geocoder.geocode() geometry.location lat/lng 属性名称经常更改

> ID：13499111
> 
> 赞同：50
> 
> 时间：2012-11-21T17:49:02.850
> 
> 标签：google-maps, google-maps-api-3, geolocation

我有一个应用程序，我正在使用 Google Javascript Geocoding API 来获取地址的 lat/lng。

代码类似于

```
geocoder = new google.maps.Geocoder()
geocoder.geocode({ 'address': query }, function(results, status) {
    addresses = {};
    $.each(results, function(index, value){
        addresses[index] = {"lat":value.geometry.location.$a,"lng":value.geometry.location.ab}
    })
}); 
```

一切都很好，但问题是位置对象的属性名称会定期更改。每次更改时，我的网站都会中断。

两次我不得不更改我的代码以适应谷歌地理定位 API 中奇怪的 lat/lng 属性名称更改。原来是 Xa，Ya，后来我不得不改成 Ya，Za，现在是 $a，ab。我没有看到这些更改背后的任何用户友好逻辑。

有谁知道为什么这些属性名称会更改，和/或我可以使用什么策略来获取 lat/lng 同时避免这些属性名称更改引起的问题？

* * *

## 回答 #1

> 赞同：97
> 
> 时间：2012-11-21T18:13:08.940

使用记录的[属性](https://developers.google.com/maps/documentation/javascript/reference#Geocoder)，它们不会改变

geometry.location 是一个[google.maps.LatLng](https://developers.google.com/maps/documentation/javascript/reference#LatLng)对象，记录的方法是：

```
lat()   number  Returns the latitude in degrees.
lng()   number  Returns the longitude in degrees. 
```

# objective-c - 指定情节提要的入口点（不是初始视图）

> ID：13499120
> 
> 赞同：1
> 
> 时间：2012-11-21T17:49:20.900
> 
> 标签：objective-c, ios, storyboard

我的项目有很多标签。每个选项卡都是使用 xib 文件实现的。对于一个特定的视图控制器，我想使用情节提要。我对情节提要相对较新，想知道如何指定情节提要的入口点。

我当前的代码如下所示。

```
- (UIViewController *)viewControllerForTabDocs {
    DocsViewController *vc = [[DocsViewController alloc] init];
    UINavigationController *nav = [[UINavigationController alloc] initWithRootViewController:vc];
    return nav;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T17:56:41.603

您应该尝试以下方法

```
UIStoryboard *storybrd = [UIStoryboard storyboardWithName:@"MainStoryboard" bundle:nil];
DocsViewController *controller =[storybrd instantiateViewControllerWithIdentifier:@"docsViewController"];
UINavigationController* nav = [[UINavigationController alloc]initWithRootViewController:controller]; 
```

# macos - Qt5 为 Mac 设置应用程序图标

> ID：13499121
> 
> 赞同：7
> 
> 时间：2012-11-21T17:49:21.123
> 
> 标签：macos, qt, icons, qt5

我想设置应该在 Mac 的 Dock 上看到的应用程序图标。为此，我在 .pro 文件中添加了以下行：

```
ICON = $$_PRO_FILE_PWD_/Icons/Icon144x144.icns 
```

（我也试过`ICON = Icons/Icon144x144.icns`）

如果我正确理解了 Qt 的文档，那就足够了，但是由于我的图标仍然看不到，我还在 mainwindow.cpp 中添加了以下行

```
setWindowIcon(QIcon("Icons/Icon144x144.icns")); 
```

（我也试过`QIcon("Icon144x144.icns")`and `QIcon("/Users/MYNAME/PROJECT/Icons/Icon144x144.icns")`）。

我知道关于这个问题有两个类似的问题： [MAC 上的 QT/C++ - 应用程序图标未设置](https://stackoverflow.com/questions/4739175/qt-c-on-mac-application-icon-doesnt-set) 和 [使用 Qt 在 Mac 上设置图标，](https://stackoverflow.com/questions/9515726/setting-icon-on-a-mac-with-qt) 但由于我仍然看不到正确的图标，我在想如果 Qt5 允许从以前的版本设置应用程序图标的方式有所不同。有什么线索吗？

编辑：

我刚刚看到 qmake 没有将图标添加到应用程序内的 Resources 文件夹中......

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-03T17:07:21.993

值得一提的是，我用 QT5 完成了与您完全相同的工作，并且可以正常工作。

基本上在我的 .pro 文件中，我有：

```
ICON = icon.icns 
```

此外，我必须在 app.plist 文件中指定图标位置。基本上，您必须将 CFBundleIconFile 键设置为图标的名称。希望能帮助到你！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-06-12T13:10:36.967

首先检查路径是否正确（特别是如果您正在执行影子构建），qmake 通常找不到正确的图标文件。

但是我偶然发现了一个类似的问题：

发生在我身上的是应用程序包没有被更新（资源方面），所以你必须删除 yourprogram.app 目录并让 qmake 重新创建它，这样图标就会正确更新。

# c - 在数组名称中使用 int 计数器

> ID：13499122
> 
> 赞同：2
> 
> 时间：2012-11-21T17:49:23.363
> 
> 标签：c, arrays, int

在 C 中，我想知道是否可以使用 an`int`作为计数器从我的数组列表中选择一个数组。如果不是，你会如何建议解决这个问题？抱歉，代码可能会更好地解释它：

编辑：对不起，我应该澄清说 inputchar 是单个字符，我试图查看 inputchar 是否是数组中任何单词中的字母

```
int i;

char word0[] ={'c','a','c','h','e'};
char word1[] ={'i','n','t','e','l'};
char word2[] ={'e','t','h','e','r','n','e','t'};
char word3[] ={'g','i','g','a','b','y','t','e'};
char word4[] ={'l','i','n','u','x'};

for (input = 0;input<i;input++)
{
    if (inputchar==word(i)[input] /*this is the problem here, i want to use the int (i) to chose the array, i is randomized before this in the program */
    {
        w(i)[input]=inputchar;
        lc++;
        printf("You guessed correct! continue on word master");
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-21T18:06:33.807

对您所拥有的最简单的更改是创建一个指向每个现有数组的指针数组：

```
char *words[] = { word0, word1, word2, word3, word4 }; 
```

因为您的数组不是以 nul 结尾的，所以您还需要知道它们的长度，并且您不能从以下位置访问它`words`：

```
size_t wordlengths[] = { sizeof(word0), sizeof(word1), sizeof(word2), sizeof(word3), sizeof(word4) }; 
```

但是，如果您的代码实际上并不依赖于 5 个不同大小的不同可写数组，包含非终止字符数据，那么您可能会做得更好。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-21T17:54:32.513

为什么不使用字符串数组（指针）？

```
char* words[5]; 
```

然后分配各个字符串：

```
words[0] = "cache";
words[1] = "intel";
words[2] = "ethernet";
words[3] = "gigabyte";
words[4] = "linux"; 
```

现在您可以使用数组索引访问它：

```
words[i][input] 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-21T17:54:42.853

诀窍是改变：

```
char word0[] ={'c','a','c','h','e'};
char word1[] ={'i','n','t','e','l'};
char word2[] ={'e','t','h','e','r','n','e','t'};
char word3[] ={'g','i','g','a','b','y','t','e'};
char word4[] ={'l','i','n','u','x'}; 
```

例如：

```
char word[5][10] = { "cache",
                     "intel",
                     "ethernet",
                     "gigabyte",
                     "linux" }; 
```

然后你可以写例如

```
 if (inputchar == word[i][input])
        ... 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-21T18:29:22.680

最简单的解决方法是数组数组：

```
char word[][9] = {"cache", "intel", "ethernet", "gigabyte", "linux"}; 
```

这声明`word`为 9 元素数组的 5 元素数组`char`；5 由初始化程序中的项目数确定，9 需要保存最长的字符串（8 个字符加上 0 终止符）。

这确实意味着第一个、第二个和第五个字符串中有一些未使用的空间，但对于这样的练习来说，这可能没什么大不了的。如果您要处理数千个字符串，最好声明一个指针数组，然后分别分配每个字符串，以便您只使用每个字符串所需的内存：

```
char *word[N]; // for N strings;
...
word[i] = malloc(length_of_string_for_this_element + 1);
if (word[i])
  strcpy(word[i], string_for_this_element); 
```

完成后，您需要为每个单词释放内存：

```
for (i = 0; i < N; i++)
  free(word[i]); 
```

无论哪种方式，您都可以访问特定字符

```
word[i][input] 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-21T17:56:07.437

如果您不需要修改项目，也许您可​​以使用它（指针数组）。

```
const char *words[ 5 ] = { "cache", "intel", "ethernet", "gigabyte", "linux" }; 
```

这是它的工作原理：

![这个怎么运作](../Images/465e55287e376c5ba34f2f269ef83aaf.png) ![在此处输入图像描述](../Images/1c41ce6076206b00ff8b37f8d682721a.png)

这是 Deitel & Deitel 的 C, How to Program 中的一个示例。

# php - php mysql选择多个ID

> ID：13499124
> 
> 赞同：-2
> 
> 时间：2012-11-21T17:49:30.733
> 
> 标签：php, mysql, sql, database

我有 3 个表`customer` `class` `students`.....
**这是我的表结构：**

```
customer   = customer_id, name, email
class      = class_id, customer_id, classname
students   = students_id, customer_id, firstname, image 
```

用于用户登录帐户的客户表

我使用以下查询从我的`students`表中获取数据`custmer_id`

```
$query = $this->db->query("SELECT * FROM " . DB_PREFIX . "students WHERE 
customer_id = '" . (int)$this->customer->getId() . "'");
foreach ($query->rows as $result) {     
     $students_data[$result['students_id']] = array(
            'students_id'          => $result['students_id'],
            'class_id'             => $result['class_id'],
            'firstname'            => $result['firstname'],
            'image'                => $result['image'],
    );
} 
```

但看起来无论我在我的`students`桌子里添加了多少学生，所有学生都返回每个教室。我还在`class`表格中添加了 3 个班级，例如：class1 class2 class3，我只想显示在 class1 下添加的学生，如果我运行 class2 和 class3，则返回相同的学生。

我可以就如何正确查询这个问题获得一些帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T17:58:37.890

首先，您需要在学生表中添加一个参考列。然后，如果您想明智地获取数据类，只需**按**class_id 使用 group。您需要的任何方式都可以使您的问题非常清楚。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T17:55:10.180

只需添加到您的 WHERE 子句，并在 (Class1) 中添加 WHERE class_id

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-21T18:08:57.863

从我所见，我相信您需要将您的`students`表格连接到您的`customers`表格（或您的班级表格，但它没有多大意义）。然后你可以使用简单的连接来得到你的结果，比如......

```
SELECT  student_id, class_id, firstname, image
FROM    students s,
        class c,
        customer u
WHERE   u.customer_id = c.customer_id
AND     s.customer_id = c.customer_id
AND     c.customer_id = $this->customer->getId() 
```

或类似的东西，在您`customer_id`向学生表添加一列之后。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-21T18:51:13.377

我建议在客户和班级之间创建一个链接表。

通过从中 `class`删除表来简化表。`customer_id`

然后创建一个`Student_has_Class`看起来像这样的表

```
Student_has_Class = student_id, class_id 
```

然后，您可以查询该表以查找哪些学生被分配到哪个班级。

```
$query = $this->db->query("SELECT class_id FROM " . DB_PREFIX . "Student_has_Class WHERE 
student_id = '" . $studentId . "'"); 
```

# macos - 不均匀的 NSTableCellView 对焦环

> ID：13499128
> 
> 赞同：1
> 
> 时间：2012-11-21T17:49:39.993
> 
> 标签：macos, focus, nstableview, nstableviewcell

我正在开发一个使用基于视图的 NSTableView 来显示内容的小应用程序。我使用 NSTableCellView 子类作为每个单元格的内容，我遇到了一个问题，即 NSTableCellView 在选择时看起来很糟糕。首先，左侧、顶部和右侧看起来都选择不均匀（注意右侧比顶部和左侧厚），此外，对焦环的底线甚至没有显示任何单元格。这是一个链接到它的样子：

[NSTableView 单元格图片](http://postimage.org/image/721aig4o9/)

我试过用对焦环搞乱无济于事，这让我对这可能是什么一无所知。感谢您对此的任何帮助！

# jsf - 将输入字段的值从一页传递到另一页

> ID：13499131
> 
> 赞同：1
> 
> 时间：2012-11-21T17:50:12.497
> 
> 标签：jsf, variables, facelets

我发现了几个类似的问题，但没有一个是有帮助的，因为他们提到了将变量传递给 bean 而没有别的。

我有一个带有文本字段的页面（“RegistrationStep1.xhtml”），我想将其值作为更复杂表单的一部分传递给第二页（“RegistrationStep2.xhtml”）（例如 - 第一个也是唯一的文本字段用于登录，用户提交表单，页面之间有一些处理来检查登录是否可用，如果可以，第二页加载了更复杂的表单 - 登录（从第一页完成），密码等）。

我对 JSF 很了解，并且已经尝试过几种解决方案，但都没有奏效。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-09-12T16:33:19.800

有一个特殊的 bean 范围 @ConversationScope 这对向导很有用。阅读这篇[文章 JSF 2 ConversationScope 是如何工作的？](https://stackoverflow.com/questions/7788430/how-does-jsf-2-conversationscope-work)

# r - 在 r 中更改图形面板

> ID：13499138
> 
> 赞同：0
> 
> 时间：2012-11-21T17:50:43.453
> 
> 标签：r, graph, boxplot

我想更改图表面板的顺序。目前我有 3 列我的不同类，我想要的是 1 列，其中 3 个类相互堆叠。它们都将具有相同的 X 轴（在本例中为主成分分析的值），然后对于我的 3 个类别中的每一个，冬季或夏季的季节仍将位于 Y 轴上。这就是我所拥有的：![在此处输入图像描述](../Images/353fc925c2a7c0bad47fd66c518b079e.png) 我用我的代码创建了这个：

```
bwplot(Comp1~ Season|Repro, data = moose,
   strip = strip.custom(var.name = c("f", "fc", "m"),strip.names=F, bg = 'white'),
   cex = .5, layout = c(3, 1),
   xlab = "Principal component 1", ylab = "Season",
   par.settings = list(
      box.rectangle = list(col = 1),
      box.umbrella  = list(col = 1),
      plot.symbol   = list(cex = .5, col = 1)),
       scales = list(x = list(relation = "same"),
                     y = list(relation = "same"))) 
```

另一种选择是将 2 个季节沿 X 轴放置在箱形图中，PCA 在 Y 轴上，但在这些季节中将 2 个季节分为 3 个组。与上面有 3 个面板的图表不同，我想要 2 个面板（夏季和冬季），然后在这 2 个面板中，将 f、fc、m 用于冬季分组并在下一个面板中（或在同一个图表中） ) f, fc, m 代表夏天。基本上像下一张图片，但把那张翻过来。我使用了这段代码，然后是上面的剩余代码来生成这个图表：`bwplot(Season ~Comp1|Repro, data = moose,`

![在此处输入图像描述](../Images/8db0ae2d5304f076cef70c0c4ff501c9.png)

这是用于尝试代码的示例数据。

```
structure(list(ID = structure(c(1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 
1L, 1L, 1L, 1L, 1L, 1L, 2L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 
3L, 3L, 3L, 3L, 3L, 3L, 3L, 4L, 4L, 4L, 4L, 4L, 4L, 4L, 5L, 5L, 
6L, 6L, 6L, 6L, 7L, 7L), .Label = c("F07002", "F07004", "F07005", 
"M07016", "M10007", "M10011", "M10015"), class = "factor"), Season = structure(c(1L, 
1L, 1L, 1L, 1L, 1L, 1L, 1L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 1L, 1L, 
1L, 1L, 1L, 1L, 1L, 1L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 1L, 1L, 
1L, 1L, 2L, 2L, 2L, 1L, 1L, 1L, 1L, 2L, 2L, 1L, 1L), .Label = c("SUM", 
"WIN"), class = "factor"), Time = structure(c(1L, 2L, 1L, 2L, 
1L, 2L, 1L, 2L, 1L, 2L, 1L, 2L, 1L, 2L, 2L, 1L, 2L, 1L, 2L, 1L, 
1L, 2L, 2L, 1L, 2L, 1L, 2L, 1L, 2L, 1L, 2L, 1L, 2L, 1L, 2L, 1L, 
2L, 2L, 1L, 2L, 1L, 2L, 1L, 2L, 1L, 2L), .Label = c("day", "night"
), class = "factor"), Repro = structure(c(2L, 2L, 2L, 2L, 2L, 
2L, 2L, 2L, 2L, 2L, 2L, 2L, 1L, 1L, 1L, 2L, 2L, 2L, 2L, 1L, 2L, 
1L, 2L, 2L, 2L, 2L, 2L, 1L, 1L, 2L, 2L, 3L, 3L, 3L, 3L, 3L, 3L, 
3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L), .Label = c("f", "fc", "m"
), class = "factor"), Comp1 = c(-0.380080882, -0.610696209, -0.249409859, 
-0.409333188, -0.222490545, -0.204438065, -0.345230884, -0.142284942, 
0.750928418, 1.002325431, 0.450508246, 0.473959627, 1.059173278, 
0.911574612, 1.394915031, -0.448160403, -0.470799127, -0.760760938, 
-0.923465222, -1.522742066, -1.933918532, -0.83699801, -1.240214807, 
0.878163747, 0.756748992, 1.931795511, 1.802387012, 1.67483398, 
1.448883802, 0.974062472, 1.234001613, -0.439149936, -0.826745549, 
-0.42835036, -0.871512952, 0.17532518, 0.559407728, 0.976634392, 
-0.202405922, -0.633821539, -0.306163898, -0.302261589, 1.218779672, 
1.568575464, -0.310174732, -0.761785902), ln1wr = c(0.925765702, 
0.90999093, 1.109420337, 1.125676072, 1.081194815, 1.102770299, 
0.981029233, 1.019605156, 0.892407791, 0.894740178, 0.990098659, 
0.998570934, 1.280544881, 1.283292174, 0.152892746, 0.000499875, 
0.00039992, 0, 0, 1.820962221, 1.72698981, 1.829087366, 1.728020628, 
0.0009995, 0.000899595, 0, 0, 0.003693172, 0.003493889, 1.537705578, 
1.520475543, 1.410401436, 1.40550858, 1.258972223, 1.255302598, 
1.4981711, 1.505964504, 1.446048016, 1.132530507, 1.134944218, 
1.149653885, 1.148798304, 1.140553656, 1.14762465, 0.421797669, 
0.4069307)), .Names = c("ID", "Season", "Time", "Repro", "Comp1", 
"ln1wr"), class = "data.frame", row.names = c(NA, -46L)) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T15:19:51.280

仍然不完全确定您想要什么，但在公式的 HTE LHS 上使用两个因子的交互函数可能会在转换为水平 TRUE 后得到您需要的东西。

```
bwplot(interaction(Season,Repro) ~ Comp1, data = moose,
   cex = .5, 
   xlab = "Principal component 1", ylab = "Season", horizontal=TRUE,
   par.settings = list(
      box.rectangle = list(col = 1),
      box.umbrella  = list(col = 1),
      plot.symbol   = list(cex = .5, col = 1)),
       scales = list(x = list(relation = "same"),
                     y = list(relation = "same"))) 
```

![在此处输入图像描述](../Images/c69bef42d77ad40f03b9c5150db7dfa3.png)

# python - 在字典中按字母顺序对列表进行排序

> ID：13499145
> 
> 赞同：0
> 
> 时间：2012-11-21T17:51:14.220
> 
> 标签：python, list, sorting, dictionary

我有以下字典：

```
#original
random_dict={'list1': ['b', 'a', 'c'], 'list2': ['f', 'a', 'e'], 'list3': ['c', 'b', 'a']} 
```

您如何按字母顺序对列表进行排序`random_dict`以获得此：

```
#after sorting
sorted_dict={'list1': ['a', 'b', 'c'], 'list2': ['a', 'e', 'f'], 'list3': ['a', 'b', 'c']} 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-21T17:52:11.570

只需调用`.sort()`每个值：

```
for val in random_dict.values():
    val.sort() 
```

这`random_dict`在原地改变。如果您需要副本，请改用 dict 理解：

```
sorted_dict = {k: sorted(v) for k, v in random_dict.iteritems()} 
```

在 python 3 上，替换`.iteritems()`为`.items()`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T11:22:30.920

蟒蛇3.2

```
r={'list1': ['b', 'a', 'c'], 'list2': ['f', 'a', 'e'], 'list3': ['c', 'b', 'a']}

for i,v in r.items(): r[i]=sorted(v) 
```

# c# - 限制复制和粘贴 URL 以打开页面

> ID：13499146
> 
> 赞同：2
> 
> 时间：2012-11-21T17:51:19.027
> 
> 标签：c#, javascript, asp.net, c#-4.0, session

为了停止会话共享，我使用了代码

```
<sessionState mode=”InProc” cookieless=”UseUri”&gt;</sessionState> 
```

这工作正常，虽然我的 URL 很尴尬，但没关系。我面临的问题是：如果用户已经登录到应用程序，并且如果用户直接在 Web 浏览器中复制并粘贴 URL 以打开页面，那么用户可以打开页面，因为用户已经有一个活动会话。

但要求是限制 URL 的复制和粘贴以打开页面。在这种情况下，我们必须做什么？

我没有 .cs 页面，因为这是一个旧应用程序，我们有 .aspx 页面，带有 javascript/VB 脚本。

**我`<sessionState mode="InProc" cookieless="UseUri">`在登录应用程序时遇到的另一个问题，如果用户直接复制 url 并将 URL 粘贴到 Web 浏览器中以在关闭第一个（我们复制 url 的位置）后打开页面，用户仍然可以在不登录的情况下打开页面。示例：http://XXX/YYY/(S(fxiejp3mcnnt3wwob3ytkmbf))/Home/FrameSet.aspx 如果我在关闭打开的窗口（我复制此 uRL 的位置）后粘贴上面的 URL 用户能够打开应用程序。这似乎是错误。请** 建议 请建议

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T17:58:57.080

您可以使用这样的代码在您的 Html 标记中禁用复制粘贴吗？

```
<html>
<head>
</head>
<body oncopy="return false;" onpaste="return false;" oncut="return false;">
    <form id="form1" runat="server">
        <div>
           Try to copy this and paste in your editor
        </div>
    </form>
</body>
</html> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-21T18:07:44.960

如果您想确保用户不会直接访问某个页面，您可以查看 http 标头中的引用者 [原文如此]，并确保它已设置并且用户通过您的网站导航到该页面。如果referer设置为google，或者未设置，则用户直接访问该URL。

从安全的角度来看，您应该依赖 cookie 中的某些标识符来存储会话信息，并且 cookie 不应包含任何私人或机密信息。如果 cookie 中的会话 ID 与服务器的会话 ID 不匹配，则该页面应被拒绝。（有关会话的一些好的提示，请参阅[http://www.truste.com/blog/2011/12/02/best-practices-for-using-cookies/ ）](http://www.truste.com/blog/2011/12/02/best-practices-for-using-cookies/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-21T18:10:23.047

为什么不将 IP 地址与登录会话相关联，以便其他用户无法剪切和粘贴 URL。

（请注意，如果两个用户都在同一个 NAT 路由器后面，这将不起作用，如果用户使用更改 IP 地址的移动设备，则可能会出现问题。）

# css - 具有多个图像的多个类

> ID：13499162
> 
> 赞同：4
> 
> 时间：2012-11-21T17:52:14.873
> 
> 标签：css, image, class, background, background-image

我正在尝试做这样的事情：

```
.box {
    background-image: url(../img/box.png);
    background-position: 0 0;
    background-repeat: no-repeat;
    display: block;
    height: 64px;
    margin: 90px auto;
    overflow: hidden;
    width: 831px;
}

.shadow_1 {
    background-image: url(../img/shadow_1.png);
    background-position: 0 100%; 
    background-repeat: no-repeat;
    padding-bottom: 31px;
} 
```

在 HTML 中：

```
<div class="box shadow_1"></div> 
```

我想将两个类与两个不同的图像结合起来，但是让第二个类中的图像覆盖第一个。甚至有可能，还是我必须使用两个`divs`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T17:55:46.353

最新加载的样式将覆盖以前加载的样式。所以在你的情况下。中的任何样式都`.box`将被`.shadow_1`您的实现中的样式覆盖。

你的假设是正确的，你需要另一个 div 来处理这个问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T18:07:00.467

我假设你想在同一个元素上有多个背景图像。它在所有最新的浏览器版本中都是可能的并且受支持，但如果你想支持 IE8 和更早版本，你必须使用多个 div。

```
 .box {
    background-image: url(../img/box.png), url(../img/shadow_1.png);
    background-position: 0 0, 0 100%;
    background-repeat: no-repeat, no-repeat;
    display: block;
    height: 64px;
    margin: 90px auto;
    overflow: hidden;
    width: 831px;
    padding-bottom: 31px;
} 
```

# html - META 标签，如何添加链接？

> ID：13499166
> 
> 赞同：1
> 
> 时间：2012-11-21T17:52:28.330
> 
> 标签：html, tags, keyword, meta-tags

我有一个元标记如下...

```
<meta name="keywords" content="keyword,keyword,keyword"> 
```

这工作正常，但我有大约 262 个关键字要输入并希望将其链接到 .txt 文档，这可能吗？有那么简单吗...

```
<meta name="keywords" content="keywords.txt"> 
```

任何意见将是有益的 ：）

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T17:59:56.647

是的，您可以将其链接到文档 - 您的示例是正确的。作为来自 w3c 的另一个示例：

```
<meta name="DC.identifier" content="http://www.ietf.org/rfc/rfc1866.txt"> 
```

可以在这里找到确切的规范：http: [//www.w3.org/TR/html401/struct/global.html#h-7.4.4.2](http://www.w3.org/TR/html401/struct/global.html#h-7.4.4.2)

编辑： Rob 下面提到的搜索引擎有时会忽略关键字 - 另一个讨论的 SO 帖子可以在这里找到： [为什么网络开发人员仍然使用元关键字和元描述标签？](https://stackoverflow.com/questions/10103202/why-do-web-developers-still-use-meta-keywords-and-meta-description-tags)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T12:41:52.013

HTML5[定义](http://www.w3.org/TR/html5/the-meta-element.html#meta-keywords)：

> 该值必须是一组逗号分隔的标记，每个标记都是与页面相关的关键字。

*   所有关键字都需要用逗号 ( `,`)分隔
*   关键字不能以空格字符开头或结尾（但是，您可以使用前导和尾随空格，但它将被剥离，因此它不能成为关键字的*一部分）*
*   关键字不得*包含*逗号 ( `,`)

您*可以*使用 URL 作为值，但它不会被这样使用。它只是另一个关键字字符串。所以在大多数情况下，这不是你想要的。

HTML5 规范不限制`content`属性的长度，因此您可以随意包含任意数量的关键字。一个典型的用例可能是一个本地/自定义/内部搜索引擎，它只索引`keywords`.

大多数搜索引擎`keywords`在任何情况下都会忽略，所以如果你没有，5 或 50 对他们来说并不重要。如果他们看到这么长的列表，一些（可能较旧的）搜索引擎*可能会*降低你的排名甚至禁止你的页面关键字，并认为这是试图发送垃圾邮件，但这应该不再是问题了。

# dojo - 在 Dojo.mobile 中跳过 ScrollableView 时视图不隐藏

> ID：13499169
> 
> 赞同：0
> 
> 时间：2012-11-21T17:52:44.267
> 
> 标签：dojo, dojox.mobile

创建移动 Dojo 应用程序并遇到以下问题。我在这里和其他地方搜索过，没有看到其他人有这个问题。我是 Dojo 的新手，所以可能只是我做错了什么。

**这是编程行为：** 在第一个面板（div“one”）中，单击“+”按钮；div "two" 被跳过，div "three" 被转换到视图中；单击“取消”，再次跳过 div “two”，div “one” 转换回视图。这一切都应该如此。

**这就是问题所在：** 当 div "one" 转换回视图时，会出现一个浏览器滚动条，并且当​​您滚动到底部时 div "three" 仍然可见。这只会发生一次。再次单击“+”，然后再次单击“取消”，div“three”被隐藏，并且没有出现滚动条。在 HTML 中，如果将 div 切换为“二”和“三”，则不会发生不当行为。不幸的是，这不是我的解决方案，因为应用程序需要以任何给定的顺序进行转换。

在 Chrome 的开发工具中，如果你观察 HTML 元素，你会注意到 div "three" 的 "visibility" 属性不会返回到 "hidden"，直到你第二次单击 "Cancel"。

我的猜测是它与我以编程方式创建视图的方式有关。对此的任何帮助将不胜感激。

**HTML (test.html)**

```
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <script src="//ajax.googleapis.com/ajax/libs/dojo/1.8.1/dojo/dojo.js" data-dojo-config="async: true"></script>
    <script type="text/javascript" src="script/test.js"></script>
</head>
<body>
    <div id="one"></div>
    <div id="two"></div>
    <div id="three"></div>
</body>
</html> 
```

**JavaScript (test.js)**

```
require([
'dojo/ready',                       'dijit/registry',               'dojox/mobile/parser',
'dojox/mobile/deviceTheme',         'dojox/mobile/compat',          'dojox/mobile/Icon',
'dojox/mobile/ScrollableView',      'dojox/mobile/Heading',         'dojox/mobile/ListItem',
'dojox/mobile/EdgeToEdgeList',      'dojox/mobile/ToolBarButton',   'dojox/mobile'
],
function(ready, registry, parser, deviceTheme, compat, Icon, ScrollableView, Heading, ListItem, EdgeToEdgeList, ToolBarButton, mobile){
ready(function(){
    var view_activity_edit = new ScrollableView(null, 'three');
    var view_activity_view = new ScrollableView(null, 'two');

    var view_activities = new ScrollableView(null, 'one');
        view_activities.selected = true;

        var heading = new Heading({
            label: 'Activities'
        });
        view_activities.addChild(heading);

            var button = new ToolBarButton({
                icon: 'mblDomButtonWhitePlus',
                style: 'float:right;',
                moveTo: 'three',
                onClick: function(e){
                    click_activity_edit(e,0);
                }
            });
            heading.addChild(button);

        var list_activity = new EdgeToEdgeList({
            id: 'activity-list'
        });
        view_activities.addChild(list_activity);

        view_activities.startup();
});

this.click_activity_edit = function(e, activityid) {
    var view_activity_edit = registry.byId('three');
        view_activity_edit.destroyDescendants(false);

        var heading = new Heading({
            label: 'Activity'
        });
        view_activity_edit.addChild(heading);

            var button = new ToolBarButton({
                label: 'Cancel',
                moveTo: 'one',
                transitionDir: -1,
                arrow: 'left'
            });
            heading.addChild(button);

    view_activity_edit.startup();
};

parser.parse();
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T22:01:27.693

这与视图的呈现方式有关。如果在将额外的工具栏按钮添加到*3rd-* *view 之后在 2nd-view*上调用**startup()**。

 **添加这个：

```
registry.byId('two').startup(); 
```

到**click_activity_edit()**函数的末尾，它会起作用。请参阅我为您的代码创建[的 jsFiddle 。](http://jsfiddle.net/simpo/v8xfK/4/)

我想解释为什么会这样，但我不是 100% 确定。一旦我有时间仔细考虑，我可能会添加一个解释；或者也许对滚动视图的内部工作有更透彻了解的人会给出详细的答案。**

# character-encoding - 字符集名称：是否还有其他常用的字符集“拼写错误”，例如“UTF8”？

> ID：13499170
> 
> 赞同：3
> 
> 时间：2012-11-21T17:52:51.873
> 
> 标签：character-encoding

我关于 SO 的第一个问题 :-)

**背景：**我正在开发需要过滤 HTTP 流量的软件。在处理需要检查 POST 请求内容的部分时，出现了如何解释接收到的与字符集相关的数据的问题。

为了知道我的代码应该在“Content-Type”标头中接受哪些字符集名称，我首先查找了一个详尽的字符集名称列表，然后发现：[http ://www.iana.org/assignments/character-sets](http://www.iana.org/assignments/character-sets)

（当然，这个列表太长了，无法全部支持，我将选择一个与我的案例相关的小子集。）

**问题：**从列表中，我认为“UTF8”（不带破折号）不是 IANA 定义的字符集名称，但它似乎有时仍然在使用，并且大多数服务器/浏览器都会理解它。我的过滤器应该能够理解 IANA 未列出的其他常见字符集名称的情况吗？

一般来说：某处是否有“更完整”的列表？

更具体地说：是否存在 IANA 未列出的 US-ASCII 字符集的别名？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2020-08-04T14:00:27.303

Masato Kinugawa (@kinugawamasato) 为每个 Web 浏览器列出了可接受的字符集名称。请参阅[http://l0.cm/encodings/list/](http://l0.cm/encodings/list/)。

例如，在 Chrome 中被视为 US-ASCII 别名的字符集名称是：

*   windows-1252
*   ansi_x3.4-1968
*   ASCII
*   cp1252
*   cp819
*   cisolatin1
*   ibm819
*   iso_8859-1
*   iso_8859-1:1987
*   异88591
*   iso8859-1
*   ISO-8859-1
*   异ir-100
*   l1
*   拉丁语1
*   美国ASCII码
*   x-cp1252

[如网站所述，您还可以在http://l0.cm/encodings/check/](http://l0.cm/encodings/check/)中自行测试浏览器的行为。

# html - 将 ClickHandler 添加到 html 类

> ID：13499171
> 
> 赞同：0
> 
> 时间：2012-11-21T17:52:56.770
> 
> 标签：html, gwt, dom

我需要将 ClickHandlers 添加到许多复选框（> 4000），它会持续 40 秒。如何将处理程序添加到 html 类中的所有元素？

现在：

```
 ChckBoxHandler cbh = new ChckBoxHandler();
SimpleCheckBox.wrap(DOM.getElementById("chbid" + ID)).addClickHandler(cbh); 
```

我想要：

```
DOM.getElementsByClass("chkboxes").addClickHandler(cbh); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T21:52:12.357

我会采取一个简单的解决方案：

为什么不向父小部件（html 面板？或您正在使用的任何面板）添加点击处理程序并检查点击。

每当单击完成时，您就可以遍历您的复选框并查看哪个复选框处于选中状态。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T19:40:05.763

当您的页面中有很多元素（在您的情况下为 4000 个）时，为每个元素分配一个事件并不是一个好主意。它会损害性能。相反，您可以使用事件委托，其中包括（在单击的情况下）将事件分配给父元素并检查单击了哪个子元素并为其运行代码

这是 jsfiddle.net 的创建者 David Walsh 的一个很好的教程。

[JavaScript 事件委托的工作原理](http://davidwalsh.name/event-delegate)

如果您要使用 jQuery，那么有一个非常简单的方法可以为您解决这个问题。

[jQuery .live()](http://api.jquery.com/live/)

# git - 无法切换 git 分支：“未跟踪的文件”但工作目录干净

> ID：13499183
> 
> 赞同：9
> 
> 时间：2012-11-21T17:53:18.697
> 
> 标签：git

我想切换分支。但得到错误

```
error: Untracked working tree file 'foo.phtml' would be overwritten by merge. 
```

如果我删除此文件，则会抱怨下一个文件。问题是两个分支中的文件差异很大。

这是我尝试过的：

```
$ git reset --hard HEAD
HEAD is now at 8a2a95c Initial checkin
$ git checkout otherbranch
error: Untracked working tree file 'foo.phtml' would be overwritten by merge.
$ git status
# On branch master
# Your branch and 'origin/master' have diverged,
# and have 1 and 677 different commit(s) each, respectively.
#
nothing to commit (working directory clean) 
```

这里有什么问题？

我也已经试过了

```
git clean -f -d 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-21T18:02:32.763

您面临的问题是要签出的分支包含许多文件，例如`foo.phtml`当前分支中未跟踪的文件。看来你可以只删除文件，所以尝试：

```
git checkout -f otherbranch 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-21T18:35:39.423

万一您以后确实关心文件，请使用

```
git stash -u 
```

这将清理您的工作目录，但如果您丢失了某些东西，您可以从存储中取回它。现在您可以继续检查您的另一个分支。

另一种情况是文件在一个分支中被忽略，而不是在另一个分支中。在这种情况下，您应该使用`git checkout -f theotherbranch`.

# iphone - 使用沙盒中的测试帐户在 iPhone 上测试应用内购买 - 无法登录

> ID：13499187
> 
> 赞同：0
> 
> 时间：2012-11-21T17:53:34.430
> 
> 标签：iphone, app-store, in-app-purchase

我正在测试我的第一个应用内购买，但无法成功登录 AppStore。测试帐户由 Apple 创建和验证（确认）。我在“设置”->“商店”中从 iTunes 帐户注销。

当我在应用程序中点击购买按钮时，系统会询问我是否要确认购买此商品。我点击购买，它提示登录（使用 [环境沙盒]）。我输入用户名/密码 - 它们是正确的，它会提示“需要验证”以进行首次购买。到目前为止一切都很好但是..这是事情卡住的地方。

我被重定向到 iPhone 上的 AppStore 并再次提示登录。我进入，它提示，有点，空警报说“[环境沙箱]”消息和取消，继续按钮。然后它永远循环：登录 -> 提示继续 -> 登录 -> 提示继续，等等。

如何避免这种情况？请建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T05:50:00.317

只需更改您的测试帐户凭据。因为这些凭据在 App Store 中而不是在 Sandbox 中。我也遇到了同样的问题，但是当我将这些凭据更改为新的

# jquery - jQuery slideToggle 图像交换不起作用

> ID：13499190
> 
> 赞同：0
> 
> 时间：2012-11-21T17:53:52.060
> 
> 标签：jquery, slidetoggle

我的代码非常适合 slideToggle 功能，但更多/更少的图像没有交换。在浏览器中本地预览时，图像保持为“更多”。上传版本的行为有所不同。在 Safari 中它切换到空白图像，在 FF 中它使用 alt 文本。

我查看了档案并发现了类似的讨论，但是由于我的代码除了这个小缺陷之外工作正常，我希望不必使用不同的方法，因为我是 jQuery 新手。这一定很简单。我认为就像第二张图片被错误命名一样简单，但这不是问题所在。

这是一个链接[http://mentalwarddesign.net/Andrea/Leather/leather.html](http://mentalwarddesign.net/Andrea/Leather/leather.html)

这是脚本本身：

```
<script src="../js-jquery/jquery-1.7.2.min.js"></script>
<script>
$(document).ready(function(e) {
   $('.changeTextButton').click( function() {
       $('.moreText').slideToggle(500)
       if ( $(this).attr('src') == 'img/more-button.png' ) {
                $(this).attr('src','img/less-button.png')
       }
       else {
           $(this).attr('src','img/more-button.png')
       }
   })
});
</script> 
```

这是具体的CSS：

```
.contentTop {
    width: 540px;
    padding-left: 10px;
    margin-bottom: 20px;
}
.firstText {
    width: 540px;
    padding-left: 10px;
}
.moreText  {
    width: 540px;
    padding-left: 10px;
    display: none;
}
.changeTextButton  {
    display: block;
    cursor: pointer;
    float: right;
    margin-right: 10px;
    margin-top: -18px;
} 
```

这是相关的html：

```
 <div class="content">
    <div class="firstText">
        <h1><img src="imgLeather/leatherSm.jpg" width="280" height="190" alt="leather" style="float:right;margin:5px 0 0 10px;">Leather Scents</h1>
        <p>After working for several years with different tanneries, Andrea Aromatics has developed what many in our industry acknowledge to be the best leather scents on the market today.  Due to newer tanning methods, some leathers produced today no longer have the desired “traditional” scent.  Another problem is that protective coatings used on some leathers actually impede the natural leather aroma from migrating through the surface.  These polymeric coatings make the leather smell more like plastic.</p>
        <p>Our leather scents have been used by tanneries to increase and enhance the aroma of their quality leathers, as well as by manufacturers of synthetic leather products to make their product simulate the real thing.  We offer leather scents in a variety of forms: liquid, powdered, and pelletized.</p>
      <!-- end .firstText--></div>
    <div class="moreText">
        <p>Natural leather hides can be deodorized and their aroma enhanced by several application methods:</p>
        <ol>
          <li>A water dispersible version of our leather scent can be incorporated into the final bath water to impart scent to the entire hide.</li>
          <li>A concentrated oil soluble version can be mixed into the finishing oil and applied along with it.</li>
          <li>A version can be diluted with alcohol and sprayed onto the “reverse” side.</li>
        </ol>
        <p>We do not recommend mixing the leather scents with proactive leather coatings since they may react and cause discoloration.  A slight yellowing may develop which would be objectionable in “white” or “pale blue” finished leather.  Darker colors and shades are usually not affected.</p>
        <p>We have been supplying our leather scents to the industry for over twenty years.  In that time our scents have been used in both natural and artificial leathers used by several major manufacturers both domestically and abroad.  They have also been used in scented advertising, consumer leather goods, furniture upholstery, toys and sporting goods.</p>
     </div><!-- end .moreText -->
       <img src="../imgGlobal/more-button.png" width="51" height="16" class="changeTextButton" alt="textButton">
      </div><!-- end .content --> 
```

非常感谢任何将我指向罪魁祸首的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T17:59:23.080

../imgGlobal/more-button.png

是图片网址，但您使用的是：img/more-button.png

也许这是图像的错误路径。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T18:00:00.293

据我所知，您的代码是完美的。

您的问题是，您可能会很高兴听到，您的服务器上不存在该图像。

```
img/less-button.png 
```

上传文件或将其更改为您的 JS 中的正确路径

```
$(this).attr('src','WHEREAMI__img/less-button.png') 
```

# php - 使用带有特殊字符编码的 Cakephp 表单

> ID：13499198
> 
> 赞同：0
> 
> 时间：2012-11-21T17:54:29.697
> 
> 标签：php, cakephp, character-encoding

我开始使用 cakephp，但我仍然有一些疑问。正是关于 .ctp 文件。经过研究，我发现它们是用于 phpcake 读取 php 代码的模板文件。但是编码呢。我在一个带有“Utf-8 without bom”编码的文件中测试了这段代码，但浏览器仍然无法识别以下示例中包含的“ç”或“ã”之类的字母：

```
<!-- File: /app/View/Posts/add.ctp -->

<h1>Add Post</h1>
<?php
echo $this->Form->create('Post');
echo $this->Form->input('Nome Produto');
echo $this->Form->input('Código Produto');
echo $this->Form->input('Versão');
echo $this->Form->input('Data');
//echo $this->Form->input('body', array('rows' => '3'));
echo $this->Form->end('Criar Ficha');
?> 
```

我需要将一些特定配置添加到此 ctp 文件中以避免此编码问题？

PS问题解决了。表单->输入创建错误。本来应该：

```
echo $this->Form->input('cod_produto', array('label' => 'Código Produto:')); 
```

因为第一个参数是 bd 中字段的名称。感谢马克的所有帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T18:06:47.687

尝试将以下行放入您的`default.ctp`模板文件（或您的整个网站正在使用的任何模板文件）。无论您在哪个页面上，这都应该设置整个站点的编码：

```
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" /> 
```

# mysql - MySQL 通过不同的“列名”间接选择值

> ID：13499202
> 
> 赞同：0
> 
> 时间：2012-11-21T17:54:40.700
> 
> 标签：mysql

> **可能重复：**
> [MySQL 使用另一个表中的列名](https://stackoverflow.com/questions/1281520/mysql-use-column-names-from-another-table)

我有两张桌子：

*   TABLE_1 包含从任何文本中提取的一些单词；和

*   TABLE_2 与相关文本中的单词（在列中）频率

![在此处输入图像描述](../Images/7dab8418f7ace1b7b01bb0166de9cbe6.png)

我想生成一个 TABLE_3，其中包含 Author_Id 和文本中存在的单词（行中）：

[表 3 http://www.infociencias.net/images/tab3.jpg](http://www.infociencias.net/images/tab3.jpg)

如何在 MySQL 中做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T18:21:59.250

这是`UNPIVOT`您正在尝试执行的操作，但 MySQL 没有`UNPIVOT`功能，因此您需要使用以下方法复制它`UNION ALL`：

```
SELECT c.author_id, words, value
FROM Table1 A
INNER JOIN
(
  select author_id, alfa value, 'alfa' col
  from table2
  union all
  select author_id, car value, 'car' col
  from table2
  union all
  select author_id, zoom value, 'zoom' col
  from table2
) C 
  ON A.words = C.col
order by c.author_id 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!2/7ffc0/9)

结果：

```
| AUTHOR_ID | WORDS | VALUE |
-----------------------------
|       123 |  alfa |     3 |
|       123 |  zoom |     0 |
|       123 |   car |     0 |
|       157 |  alfa |     0 |
|       157 |  zoom |     2 |
|       157 |   car |     0 |
|       332 |  alfa |     1 |
|       332 |  zoom |     0 |
|       332 |   car |     3 |
|       519 |   car |     0 |
|       519 |  alfa |     0 |
|       519 |  zoom |     0 |
|       588 |   car |     1 |
|       588 |  alfa |     5 |
|       588 |  zoom |     0 |
|       777 |   car |     0 |
|       777 |  alfa |     0 |
|       777 |  zoom |     1 |
|       804 |   car |     7 |
|       804 |  alfa |     0 |
|       804 |  zoom |     5 | 
```

# html - 同一台机器上的两个不同浏览器可以都使用 websocket 连接到服务器吗？

> ID：13499208
> 
> 赞同：0
> 
> 时间：2012-11-21T17:54:56.007
> 
> 标签：html, websocket, sockjs

我在同一台机器（即相同的 IP）上有两个不同的浏览器（Chrome 和 Safari），想知道是否可以使用 websocket 将它们连接到同一台服务器？

我试过了。Chrome 连接正常，但 Safari 抛出错误，抱怨：

```
Error during WebSocket handshake: location mismatch: 
wss://www.mysite.com/sockjs/310/s1a5r_6q/websocket != ws://www.mysite.com/sockjs/310/s1a5r_6q/websocket
sockjs-0.3.js:282Closed transport: websocket SimpleEvent(type=close, code=1006, reason=WebSocket connection broken, wasClean=false) 
```

但我不确定这是否是由于每个 IP 地址一个 websocket 连接的某些限制？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-22T11:45:43.083

MLister，您似乎遇到了 sockjs 部署问题。确保 sockjs 服务器在通过 https 的 websocket 握手期间返回 wss://。这是一些 sockjs 服务器的一个众所周知的问题 - 服务器并不总是知道页面是通过 https 提供的，并在握手期间返回 ws://。

例如 sockjs-node 使用 faye-websocket-node 处理这种情况的代码在这里： [https ://github.com/faye/faye-websocket-node/blob/master/lib/faye/websocket.js#L40](https://github.com/faye/faye-websocket-node/blob/master/lib/faye/websocket.js#L40) [https ://github.com/faye/faye-websocket-node/blob/master/lib/faye/websocket.js#L25-L32](https://github.com/faye/faye-websocket-node/blob/master/lib/faye/websocket.js#L25-L32)

基本上，您必须确保您的负载均衡器设置了“x-forwarded-proto”标头。

是否有意义？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-21T18:02:35.313

就 WebSocket 协议而言，没有技术限制，尽管规范中有规定限制每个 IP 地址的未完成连接尝试以防止垃圾邮件。只有两个我怀疑你遇到了这个问题。您的 websocket 服务器可能还有其他策略可能会进一步限制这一点。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-21T18:05:03.187

> **wss** ://www.mysite.com/sockjs/310/s1a5r_6q/websocket！= **ws** ://www.mysite.com/sockjs/310/s1a5r_6q/websocket

这表明 websocket 连接通过了一个不理解 websocket 连接的代理。最有可能的是，它是服务器端的反向代理，从代理后面的服务器卸载 SSL 开销。代理向客户端提供了安全连接，但报告了从服务器到客户端的连接不安全。这是不正确的。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-21T17:59:57.017

这当然是可能的，至少如果浏览器支持 WebSocket API。您甚至不需要 2 个不同的浏览器，您只需在多个选项卡中打开您的网站，例如在 chrome 中，它应该可以正常工作。

# ios - iOS - Web 服务更新流程和本地化

> ID：13499210
> 
> 赞同：0
> 
> 时间：2012-11-21T17:55:05.360
> 
> 标签：ios, web-services, cocoa-touch, localization

我的应用程序从 Web 服务获取更新的数据。但是，我只希望我的应用程序在真正更新时下载该数据。处理这个问题的最佳方法是什么？我应该在 web 服务上有一个只包含最新版本的文件吗？然后应用程序将下载该文件并解析版本并将其与当前安装的版本进行比较，如果版本比已安装的应用程序更新，是否会下载新版本？

我将把这些数据保存到应用程序支持文件夹中。如何处理文件的本地化？我会有瑞典文和英文版本的文件。这些文件将是 json 格式。我需要遵循任何文件命名约定，以便应用程序使用正确的本地化版本吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T20:53:28.100

版本化您的数据。将 updateCheck api 添加到服务器，应用程序将其当前版本发送到服务器并接收新更新或“所有最新”通知。只要文件命名空间可以处理本地化名称，您为本地化提出的任何约定都应该没问题。为了便于选择运行时，为本地化版本创建一个“se”和“en”子目录可能是最简单的。

# mongodb - Mongoid embeds_many / embedded_in 与 ActiveAdmin 中的 Formtastic 的关系...？

> ID：13499212
> 
> 赞同：5
> 
> 时间：2012-11-21T17:55:07.487
> 
> 标签：mongodb, mongoid, activeadmin, formtastic, mongoid3

唷 - 很多项目都包含在这个项目中，我已经做了一些（广泛的）搜索但无济于事，所以抛出一个耀斑，看看是否有其他人正在使用类似的堆栈并有解决方案。

我正在使用[启用 Mongoid 的 ActiveAdmin 分支](https://github.com/Ostrzy/activeadmin-mongoid/tree/filter_support)为 Rails 3 应用程序构建管理界面。

到目前为止，ActiveAdmin（使用 Formtastic 构建其表单）似乎正在发挥作用。`embeds_many`但是在尝试将此堆栈与 Mongoid和`embedded_in`关系一起使用时，我遇到了障碍。我正在努力成为一个好公民，并在 Mongo 中使用适当的数据建模技术，但 Formtastic 似乎不想一起玩。

我将分享我遇到的具体错误，尽管它可能很深奥。

如果我不能找到一个好的解决方案，我会接受它并使用`has_many`and `belongs_to`，即使我知道我会放弃 MongoDB 的主要好处（应用程序不会大到足以缺乏连接/多个查询是一个问题，但我认为我会从一开始就以正确的方式做事！）。

```
class Location
  include Mongoid::Document
  embeds_many :events
  field :venue_name, type: String
end

class Event
  include Mongoid::Document
  embedded_in :location
  field :event_name, type: String
end

ActiveAdmin.register Event do
  form do |f|
    f.inputs do
      f.input :event_name
      f.input :location, :as => :select
    end
  f.buttons
end 
```

它在线上窒息`f.input :location`并抛出：

```
ActionView::Template::Error (undefined method `event_id' for #<Event:0x007fa4224a20e0>):
1: insert_tag renderer_for(:new) 
```

我将其更改`:as => :select`为`:as => :check_boxes`并实际上让它显示正确的位置（尽管作为复选框，而不是选择或单选）。但是在提交表格后，我收到了一个问候：

```
Mongoid::Errors::NoParent (
  Problem:
  Cannot persist embedded document Event without a parent document.
) 
```

在查看原始提交时，它试图将我的选择发送为“event_id”，而不是父文档（位置）的 id。

无论如何 - 我的直觉是我正在尝试将一个方形钉子插入一个圆孔，但如果其他人有任何想法，他们将不胜感激。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-10-08T13:08:47.373

错误说明了一切。如果没有先创建父项，您将无法创建嵌入记录。

是的，我认为在您的情况下 has_many 和 belongs_to 关系将是正确的选择。

# sql - SQL递增查询

> ID：13499221
> 
> 赞同：1
> 
> 时间：2012-11-21T17:56:04.023
> 
> 标签：sql, sql-server

我有这个查询。所有的选择在技术上都是相同的，只是乘数的一个递增值。我需要这个高达* 64。

关于如何以比我现在更有效的方式做到这一点的任何建议？

```
SELECT 
CONVERT(INT,cast(reverse(substring(char_data, 305+16*1, 2)) as BINARY(2))) AS inventory1,
CONVERT(INT,cast(reverse(substring(char_data, 305+16*2, 2)) as BINARY(2))) AS inventory2,
CONVERT(INT,cast(reverse(substring(char_data, 305+16*3, 2)) as BINARY(2))) AS inventory3,
CONVERT(INT,cast(reverse(substring(char_data, 305+16*4, 2)) as BINARY(2))) AS inventory4,
CONVERT(INT,cast(reverse(substring(char_data, 305+16*5, 2)) as BINARY(2))) AS inventory5,
CONVERT(INT,cast(reverse(substring(char_data, 305+16*6, 2)) as BINARY(2))) AS inventory6,
CONVERT(INT,cast(reverse(substring(char_data, 305+16*7, 2)) as BINARY(2))) AS inventory7,
CONVERT(INT,cast(reverse(substring(char_data, 305+16*8, 2)) as BINARY(2))) AS inventory8,
CONVERT(INT,cast(reverse(substring(char_data, 305+16*9, 2)) as BINARY(2))) AS inventory9,
CONVERT(INT,cast(reverse(substring(char_data, 305+16*10, 2)) as BINARY(2))) AS inventory10
    ..........SO ON TO 64.............
FROM CHAR_DATA0 
WHERE CHAR_KEY=10 
```

非常感谢你们。

- 编辑 -

我正在使用 MSSQL

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T18:07:59.703

我认为没有动态 SQL 就无法做到

```
declare @stmt nvarchar(max), @i int

select @i = 1

while @i <= 64
begin
    select
        @stmt = 
            isnull(@stmt + ', ', '') + 
            'convert(int, cast(reverse(substring(char_data, 305+16*' + 
            cast(@i as nvarchar(10)) + ', 2)) as binary(2))) as inventory' + 
            cast(@i as nvarchar(10))

    select @i = @i + 1
end

select @stmt = 'select ' + @stmt + ' FROM CHAR_DATA0 WHERE CHAR_KEY=@CHAR_KEY'

exec dbo.sp_executesql
    @stmt = @stmt,
    @params = N'@CHAR_KEY int',
    @CHAR_KEY = 10 
```

# c# - 使用 aq 退出程序

> ID：13499222
> 
> 赞同：1
> 
> 时间：2012-11-21T17:56:06.037
> 
> 标签：c#

在表格输出后询问用户输入一些小部件。然后，您应该计算成本并输出价值。如果用户输入“q”或“Q”，程序应该终止

我可以使用什么代码来退出程序？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-21T17:58:10.300

有几种方法可以做到这一点：

```
Application.Exit; 
```

或者

```
System.Environment.Exit( exitCode ); 
```

这实际上取决于您没有指定的环境。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-21T18:02:53.267

您根本不应该使用任何特定代码来退出程序。存在一些方法，但它们应保留用于特殊情况。（这不是特殊情况。）

你*应该*做的只是让程序运行，只要他们*不想*退出。许多控制台程序会以这样的循环结束：

```
string userInput = Console.ReadLine();

while(userInput != quitCommand)
{
    //Do stuff with user input

    userInput = Console.ReadLine();
}

//end of program. 
```

只要有可能（这里很有可能），您的程序就应该结束，因为对您的`Main`方法的调用通常已经结束。

# php - Heredoc字符串和TCPDF构建动态PDF

> ID：13499229
> 
> 赞同：3
> 
> 时间：2012-11-21T17:56:17.707
> 
> 标签：php, tcpdf, heredoc

我正在尝试根据我拥有的数据库中的信息构建 PDF。当我这样做时，我收到 500 内部服务器错误。引发错误的代码是：

```
<?php
include('db.php');

    $pdfArray = array();

    $top = '<h1>Med One Equipment List</h1>
            <table>
            <thead>
                <tr>
                    <td>Manufacturer</td>
                    <td>Model</td>
                    <td>Description</td>
                </tr>
            </thead>
            <tbody>
        ';
        array_push($pdfArray, $top);

    while($rowAll = mssql_fetch_array($allResult)) {
        $html = '
        <tr>
            <td>'.$rowAll["Manufacturer"].'</td>
            <td>'.$rowAll["Model"].'</td>
            <td>'.$rowAll["Make"].'</td>
        <tr>';
        array_push($pdfArray, $html);
    }

    $bottom = '</tbody>
                </table>';

    array_push($pdfArray, $bottom);

    $table = implode(" ", $pdfArray);

    $html =  <<<EOF 
    {$table} 
    EOF;
?> 
```

当我用 TCPDF 构建我的 PDF 时，我只是包含了这个文件。让我知道是否需要包含一些 TCPDF 代码。我一生都无法弄清楚为什么它不起作用。我的猜测是我错误地使用了 herdoc。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T18:30:16.207

通过查看代码的原始格式，它看起来像

```
$html =  <<<EOF
{$table} 
EOF; 
```

用制表符缩进。如果在您的实际代码中是这种情况，那么问题是heredoc 的结尾必须是一行的第一件事。如果它完全缩进，它就会破裂。所以如果你的代码是缩进的，它需要看起来像这样：

```
if($example_block){
    $html =  <<<EOF
    {$table} 
EOF;

    {other indented code}
} 
```

PS我上面提到的关于使用制表符缩进的观察是在问题被编辑之前，但是枯萎的方式，如果它用制表符或空格缩进，它会中断。此外，Kyle 正确地指出开头标识符也必须紧跟新行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T18:33:40.490

我只是复制并粘贴了您的代码。错误来自位于您的`<<<EOF`行之后的空间。

你有`$html = <<<EOF(space)`.

应该是`$html = <<<EOF`。

# java - 使用系统首选应用程序在 zip 中显示文件而不使用 java 解压缩？

> ID：13499230
> 
> 赞同：0
> 
> 时间：2012-11-21T17:56:25.083
> 
> 标签：java, filesystems, zip

这是我的问题，到目前为止，我已经压缩了一个文件（.zip），并且在另一个应用程序中，我可以请求系统显示一个文件，该文件带有系统默认打开*“那种”*文件的应用程序（ .txt -> notepad, .doc(x) -> Word, .psd -> Photoshop, etc...) ( `Desktop.getDesktop().open(f);`)，问题是，我如何请求系统显示 zip 文件中的文件不解压？

例如使用 Winrar，您可以看到 zip 的内容，如果您双击其中的一个文件，该文件将使用系统的首选/默认查看器/编辑器打开，并且 .zip 文件保持压缩状态（显然，或者至少您不需要解压缩整个 .zip 即可访问您想要的文件）是否可以使用 java 来做到这一点？（最好只使用java）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-21T17:59:56.393

为了能够将文件本身传递给另一个应用程序，您需要将其提取到某个地方，否则其他应用程序无法访问它。

实际上这就是 WinRAR 的工作方式，在 Java 中你可以通过它来完成[`ZipFile`](http://docs.oracle.com/javase/7/docs/api/java/util/zip/ZipFile.html)，[`ZipEntry`](http://docs.oracle.com/javase/7/docs/api/java/util/zip/ZipEntry.html)是的，你必须确定要提取它。

Java 本身将文件缓存在该属性指定的文件夹中，`"java.io.tmpdir"`因此我想您可以在处理 zip 条目时尝试查找它们，以便在终止时由 JVM 自动删除它们而不会打扰您自己。

要将 ZipInputStream 管道传输到文件，您可以使用像这样的实用程序函数（我个人使用它来处理 zip 文件，所以我对其进行了测试）：

```
 private static void copy(InputStream in, OutputStream out) throws IOException {
    byte[] buffer = new byte[8192];
    while (true) {
      int readCount = in.read(buffer);
      if (readCount < 0) {
        break;
      }
      out.write(buffer, 0, readCount);
    }
  } 
```

用作

```
File file = new File(..);
FileOutputStream fos = new FileOutputStream(file);
ZipInputStream zis = zipFile.getInputStream(entry);
copy(zis,fos); 
```

# iphone - 从数组中删除重复项，比较其对象的属性

> ID：13499231
> 
> 赞同：19
> 
> 时间：2012-11-21T17:56:26.380
> 
> 标签：iphone, objective-c, sorting, duplicates, duplicate-removal

假设我有一个 Event 类，它有 2 个属性：action (NSString) 和 date (NSDate)。

假设我有一个 Event 对象数组。问题是“日期”属性可以匹配。

我需要删除重复项，这意味着具有相同日期的 2 个不同对象是重复项。

我可以删除任何字符串或 nsdate 数组中的重复项，它们很容易比较。但是如何处理复杂的对象，它们的属性要在哪里进行比较呢？

不要问我到目前为止我做了什么，因为我唯一想到的就是冒泡排序，**但它是一个新手解决方案，而且速度很慢**。

非常感谢任何帮助（链接，tuts，代码）。

提前致谢。

**编辑**

感谢dasblinkenlight，我做了一个自定义方法：

```
- (NSArray *)removeDuplicatesInArray:(NSArray*)arrayToFilter{

    NSMutableSet *seenDates = [NSMutableSet set];
    NSPredicate *dupDatesPred = [NSPredicate predicateWithBlock: ^BOOL(id obj, NSDictionary *bind) {
        YourClass *e = (YourClass*)obj;
        BOOL seen = [seenDates containsObject:e.propertyName];
        if (!seen) {
            [seenDates addObject:e.when];
        }
        return !seen;
    }];
    return [arrayToFilter filteredArrayUsingPredicate:dupDatesPred];
} 
```

这**`YourClass`**是对象所属的类的名称，也是**`propertyName`**您要比较的对象的属性。

假设 self.arrayWithObjects 包含 YourClass 的对象。

填充后，使用

`self.arrayWithObjects = [self removeDuplicatesInArray:self.arrayWithObjects];`

你就完成了。

dasblinkenlight 的所有学分。干杯!

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-11-21T18:10:11.603

您可以创建一个`NSMutableSet`日期，迭代您的事件列表，并仅添加您之前没有遇到的日期的事件。

```
NSMutableSet *seenDates = [NSMutableSet set];
NSPredicate *dupDatesPred = [NSPredicate predicateWithBlock: ^BOOL(id obj, NSDictionary *bind) {
    Event *e = (Event*)obj;
    BOOL seen = [seenDates containsObject:e.date];
    if (!seen) {
        [seenDates addObject:e.date];
    }
    return !seen;
}];
NSArray *events = ... // This is your array which needs to be filtered
NSArray *filtered = [events filteredArrayUsingPredicate:dupDatesPred]; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-21T22:43:02.027

这不适用于kvc。我想以下解决方案可能适用于您的情况；

```
Event *event1 = [[Event alloc] init];
event1.name = @"Event1";
event1.date = [NSDate distantFuture];
Event *event2 = [[Event alloc] init];
event2.name = @"Event2";
event2.date = [NSDate distantPast];
Event *event3 = [[Event alloc] init];
event3.name = @"Event1";
event3.date = [NSDate distantPast];
NSArray *array = @[event1, event2, event3];

NSArray *filteredEvents =  [array valueForKeyPath:@"@distinctUnionOfObjects.name"]; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-02-04T02:36:05.213

```
NSMutableArray *leftObjects = [duplicateArray mutableCopy];
NSMutableArray *nonDuplicates = [NSMutableArray new];
while (leftObjects.count > 0)
{
    YourClass *object = [leftObjects objectAtIndex:0];

    // find all objects matching your comaprison equality definition for YourClass
    NSArray *matches = [leftObjects filteredArrayUsingPredicate:
                        [NSPredicate predicateWithBlock:^BOOL(YourClass *evaluatedObject, NSDictionary *bindings)
                         {
                             return (evaluatedObject.name == object.name);
                         }] ];
    [leftObjects removeObjectsInArray:matches];

    // add first object (arbitrary, may decide which duplicate to pick)
    [nonDuplicates addObject:matches.firstObject];
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-09-15T08:24:54.943

我认为最有效的方法是`NSDictionary`将对象存储为值，将属性值存储为键，在将任何对象添加到字典之前检查它是否存在，这是 O(1) 操作，即整个过程将取 O(n)

这是代码

```
- (NSArray *)removeDuplicatesFromArray:(NSArray *)array onProperty:(NSString *)propertyName {
    NSMutableDictionary *dictionary = [[NSMutableDictionary alloc] init];

    for (int i=0; i<array.count; i++) {

        NSManagedObject *currentItem = array[i];
        NSString *propertyValue = [currentItem valueForKey:propertyName];

        if ([dictionary valueForKey:propertyValue] == nil) {
            [dictionary setValue:currentItem forKey:propertyValue];
        }
    }

    NSArray *uniqueItems = [dictionary allValues];

    return uniqueItems;
} 
```

您可以将其用作以下内容

```
self.arrayWithObjects = [self removeDuplicatesFromArray:self.arrayWithObjects onProperty:@"when"]; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-04-12T05:19:49.827

这是 NSArray 类的 Swift 扩展，它删除了指定属性的重复项：

```
extension NSArray {
/**
 - parameter property: the name of the property to check for duplicates

 - returns: an array of objects without objects that share an identical value of the specified property
*/
  func arrayWithoutObjectsOfDuplicateProperty(property : String) -> [AnyObject] {
    var seenInstances = NSMutableSet()

    let predicate = NSPredicate { (obj, bind) -> Bool in
      let seen = seenInstances.containsObject(obj.valueForKey(property)!)

      if !seen {
        seenInstances.addObject(obj.valueForKey(property)!)
      }
        return !seen
      }      
      return self.filteredArrayUsingPredicate(predicate)
  }
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-07-13T11:49:37.110

这是工作中的 Swift 代码片段，它确实**删除了重复项，同时保持了元素的顺序**。

```
// Custom Struct. Can be also class. 
// Need to be `equitable` in order to use `contains` method below
struct CustomStruct : Equatable {
      let name: String
      let lastName : String
    }

// conform to Equatable protocol. feel free to change the logic of "equality"
func ==(lhs: CustomStruct, rhs: CustomStruct) -> Bool {
  return (lhs.name == rhs.name && lhs.lastName == rhs.lastName)
}

let categories = [CustomStruct(name: "name1", lastName: "lastName1"),
                  CustomStruct(name: "name2", lastName: "lastName1"),
                  CustomStruct(name: "name1", lastName: "lastName1")]
print(categories.count) // prints 3

// remove duplicates (and keep initial order of elements)
let uniq1 : [CustomStruct] = categories.reduce([]) { $0.contains($1) ? $0 : $0 + [$1] }
print(uniq1.count) // prints 2 - third element has removed 
```

如果你想知道这个 reduce 魔法是如何工作的——这里完全一样，但是使用了更多扩展的 reduce 语法

```
let uniq2 : [CustomStruct] = categories.reduce([]) { (result, category) in
  var newResult = result
  if (newResult.contains(category)) {}
  else {
    newResult.append(category)
  }
  return newResult
}
uniq2.count // prints 2 - third element has removed 
```

你可以简单地把这段代码复制粘贴到一个 Swift Playground 中，然后到处玩。

# java - 在 Android 中更新时钟

> ID：13499235
> 
> 赞同：0
> 
> 时间：2012-11-21T17:56:35.287
> 
> 标签：java, android

我正在寻找在 Android 中实现自我更新数字时钟的最简单的解决方案。我知道已经有数字时钟类： http: [//developer.android.com/reference/android/widget/DigitalClock.html](http://developer.android.com/reference/android/widget/DigitalClock.html) 是的，它也已被弃用。从 API 17 开始，我们现在使用 TextClock。无论如何，为了学习，我想制作我自己的自定义时钟，显示 hh:mm:ss，当然应该更新自己。

到目前为止，我参考了我的 textview （将显示数字时钟），并且我得到了 Calendar 类的实例，并且我还在实例变量上签名了分钟、小时和秒：

```
Calendar cal = Calendar.getInstance();
            hour = cal.get(Calendar.HOUR_OF_DAY);
            min = cal.get(Calendar.MINUTE);
            sec = cal.get(Calendar.SECOND);
                clock.setText(hour+":"+min+":"+sec); 
```

如果我运行此代码，则会在模拟器上显示准确的时间，但显然它没有更新。我必须做什么，所以我的代码将“循环”并更新我的时钟？

我已经检查了这个不错的答案：[Android：如何在 TextView 中显示更新时钟，](https://stackoverflow.com/questions/7363119/android-how-do-i-display-an-updating-clock-in-a-textview)但我的问题是：我想要 android 中最简单的数字时钟解决方案 =）我还需要使用 Handler 吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-21T18:05:08.467

那么使用[Handler](http://developer.android.com/reference/android/os/Handler.html)并不是那么困难。一种可能的实现是（注意：我没有检查它是否泄漏）：

```
final Handler h = new Handler();
h.post(new Runnable() {
    @Override
    public void run() {
        updateTime();
        h.postDelayed(this, 1000);
    }
}); 
```

如果您不想使用 Handler，也可以使用设置为的[CountDownTimer](http://developer.android.com/reference/android/os/CountDownTimer.html)。但这确实是一个 hack，我不知道 Android 实现是否可以正确处理整数溢出。`millisInFuture``Long.MAX_VALUE`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T18:03:10.533

由于您不能在主 (UI) 线程上“循环”，因此您需要使用另一种机制来经常“更新”您的 UI。您可以使用 Handler、TimerTask、Thread 或其他一些允许您安排未来发生的事情的机制。

# r - 在R中总结数据框

> ID：13499248
> 
> 赞同：0
> 
> 时间：2012-11-21T17:57:32.120
> 
> 标签：r

我有一个这样的数据框：

```
Date Impacting_APP     Impacted_APP
1/1/2012    PS                PayRoll
1/2/2012    PS                Web
1/3/2012    PS                HR
1/10/2012    Trading           PS
2/1/2012    Trading           PS
3/1/2012    Trading           PS
5/1/2012    PS                Payroll
8/1/2012    PS                Payroll
8/1/2012    PS                Payroll 
```

ETC

我需要总结这个数据框，如下所示：

```
 Impacted_APP     Impacting_APP  Count
    PayRoll          PS             4
    PS               Trading        3 
```

有人可以从这个开始吗？我有什么想法可以总结这个数据集吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T18:05:52.123

该`as.data.frame.table`函数将获取表数据对象并将它们重新转换为长格式。

```
with( dfrm, as.data.frame( table( Impacting_APP  , Impacted_APP) ) )

   Impacting_APP Impacted_APP Freq
1             PS           HR    1
2        Trading           HR    0
3             PS      Payroll    3
4        Trading      Payroll    0
5             PS      PayRoll    1
6        Trading      PayRoll    0
7             PS           PS    0
8        Trading           PS    3
9             PS          Web    1
10       Trading          Web    0 
```

注意：未能匹配您的答案是由于因子级别“工资单”和“工资单”的两个变体。将输入数据和参数顺序更改为`table`：

```
 Impacted_APP Impacting_APP Freq
1           HR            PS    1
2      Payroll            PS    4
3           PS            PS    0
4          Web            PS    1
5           HR       Trading    0
6      Payroll       Trading    0
7           PS       Trading    3
8          Web       Trading    0 
```

分配给“counts.df”后，此代码将满足注释中选择性显示结果的需求：

```
counts.df <- with( dfrm, as.data.frame( table( Impacted_APP, Impacting_APP ) ) )
subset(counts.df, Impacted_APP=="Payroll" & Freq>0)
#----------------------------------#
  Impacted_APP Impacting_APP Freq
2      Payroll            PS    4 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T18:00:56.860

试试`table(dat$Impacting_APP, dat$Impacted_APP)`。

# jquery - jQuery .click() 超级简单但是不知道怎么回事

> ID：13499249
> 
> 赞同：0
> 
> 时间：2012-11-21T17:57:32.630
> 
> 标签：jquery

所以我不太明白为什么我的功能不起作用。

所以我有一个 div，它使用 .addClass 添加一个类，然后调整为窗口的宽度和高度。当我尝试“关闭” div 以返回原始大小时，单击功能不起作用。我在下面包含了我的代码。任何帮助表示赞赏。我知道这可能是一个超级简单的解决方案。由于某种原因，它似乎没有找到删除“翻转”类并调整大小的元素。

jQuery

```
 var windowHeight = $(window).height();
 var windowWidth = $(window).width();
 $('.click').on("click", function () {
   $(this).addClass('flip').height(windowHeight).width(windowWidth);
 });
 // for the window resize
 $('#CloseThis').on("click", function () {
   //alert($(this).parent().attr('class'));
   $('body .click').removeClass('flip').height(200).width(200);
 }); 
```

HTML

```
<div class="click panel">
  <div class="front">
    <h2>Click or tap this circle!</h2>
  </div>
  <div class="back">
    <h2>Tap Again!</h2>
    <div id="CloseThis">Close this</div>
  </div>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T18:03:03.303

试试这个代码

```
$('.click').on("click", function () {
     $(this).addClass('flip').height(windowHeight).width(windowWidth);
});

$('#CloseThis').on("click", function (e) {
     $('.click').removeClass('flip').height(200).width(200);
     //  $(this).closest('.click') Multiple containers
     e.stopPropagation();
}); 
```

添加了`stopPropagation`以便`.click`在单击 div 时不会触发事件 `CloseThis`。

也将`$('body .click')`选择器替换为`.closest()`

**[检查小提琴](http://jsfiddle.net/sushanth009/bgeK7/)**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T18:03:14.227

事件遍历 dom，因此当您单击 #CloseThis 时，该函数会触发，但事件会继续向上移动并同时命中您的 .click 函数。为了避免这种情况发生，我们可以指示浏览器不要将事件传递给父元素，Event 参数包含这个函数：

```
$('.click').on("click", function () {
   $(this).addClass('flip').height(windowHeight).width(windowWidth);
});

$('.CloseThis').on("click", function (e) {
    e.stopPropagation()
    $('body .click').removeClass('flip').height(200).width(200);
}); 
```

# com - Excel 2007 Zombie Process 不是 COM 自动化，而是带有对 3rd 方 com 对象的引用

> ID：13499250
> 
> 赞同：0
> 
> 时间：2012-11-21T17:57:33.227
> 
> 标签：com, excel, excel-2007, vba

我正在开发一个在前端使用 Excel 并通过 COM 上的第 3 方 API 访问远程数据的应用程序。该应用程序直接在 Excel VBA 中编码（即 Excel 没有 COM 自动化。）有时，在运行我的应用程序后，用户退出时 Excel 不会退出，从而创建了一个消耗约 50% CPU 的僵尸 Excel。

我已经在 SO 上阅读了现有的“Excel 不会退出”答案——它们似乎都与 Excel 的 Interop / COM 自动化有关。在这种情况下如何确保 Excel 退出有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T16:32:56.920

我开始相信我的代码创建的 COM 对象没有被正确处理，从而阻止 Excel 完全退出。我试图强制他们发布，导致了这个问题：[如何从 Excel 2007 VBA 模块中调用 System.Runtime.InteropServices.Marshal.ReleaseComObject](https://stackoverflow.com/q/13575268/149060) - 引用一个[答案*（还包括值得一试的相关链接）*：](https://stackoverflow.com/a/13575696/149060)

> 当您希望 Excel 退出时，您确定要删除对 COM 对象的所有引用吗？确保为您持有的 COM 对象的每个引用放置如下行：
> 
> ```
> obj = Nothing ' Where "obj" is a reference to the COM object 
> ```
> 
> 如果这不能解决它，那么问题也可能是循环引用。COM 对象是否存储了对您的 VBA 对象的引用，而 VBA 对象又持有对 COM 对象的引用？如果是这样，将创建循环引用并且永远不会释放对象。

我现在怀疑循环引用。`Nothing`如果在工作簿关闭事件中将对象本身设置为之前将某些 COM 对象属性设置为，问题就消失了`Nothing`，我会回来并将其标记为已接受的答案。

**更新**

仔细设置对象引用`Nothing`并不能解决问题。我最终[为 `System.Runtime.InteropServices.Marshal.FinalReleaseComObject`](https://stackoverflow.com/a/13632973/149060). 在 Workbook BeforeClose 事件中对 COM 对象调用 dispose 似乎已经解决了该问题。

# java - 如何使用 Spring MVC 正确映射 DWR 3？

> ID：13499251
> 
> 赞同：0
> 
> 时间：2012-11-21T17:57:37.280
> 
> 标签：java, spring, spring-mvc, dwr, url-mapping

我正在尝试将 Spring 3.1.1.RELEASE 与 DWR 3 (v 3.0.0-rc2) 集成。我正在使用 Spring MVC，但无法使设置正常工作。Spring 无法正确映射 /dwr/engine.js（或 /dwr 的任何其他内容。我在我的应用程序日志文件中收到此错误......</p>

```
11:43:31,237 WARN  [org.springframework.web.servlet.PageNotFound] (http--127.0.0.1-8080-4) No mapping found for HTTP request with URI [/myapp-1.0-SNAPSHOT/dwr/engine.js] in DispatcherServlet with name 'dispatcher' 
```

这是我的 web.xml……</p>

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app xmlns="http://java.sun.com/xml/ns/javaee" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://java.sun.com/xml/ns/javaee 
                            http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd"
    version="2.5">

    <display-name>SB Admin</display-name>

    <servlet>
        <servlet-name>dispatcher</servlet-name>
        <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
        <init-param>
            <param-name>contextConfigLocation</param-name>
            <param-value>/WEB-INF/jboss-as-spring-mvc-context.xml</param-value>
        </init-param>
        <load-on-startup>1</load-on-startup>
    </servlet>

    <servlet-mapping>
        <servlet-name>dispatcher</servlet-name>
        <url-pattern>/</url-pattern>
    </servlet-mapping>

    <listener>
        <listener-class>org.springframework.web.context.ContextLoaderListener</listener-class>
    </listener>

    <context-param>
        <param-name>contextConfigLocation</param-name>
        <param-value>classpath:/META-INF/spring/applicationContext-myapp.xml</param-value>
    </context-param>

    <welcome-file-list>
        <welcome-file>index.jsp</welcome-file>
    </welcome-file-list>

</web-app> 
```

这是我的spring应用程序上下文文件（DWR配置在最后）：

```
<?xml version="1.0" encoding="UTF-8"?>

<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:p="http://www.springframework.org/schema/p" 
    xmlns:context="http://www.springframework.org/schema/context"
    xmlns:mvc="http://www.springframework.org/schema/mvc" xmlns:util="http://www.springframework.org/schema/util"
    xmlns:tx="http://www.springframework.org/schema/tx" xmlns:dwr="http://www.directwebremoting.org/schema/spring-dwr"
    xsi:schemaLocation="http://www.springframework.org/schema/beans
http://www.springframework.org/schema/beans/spring-beans-3.1.xsd
http://www.springframework.org/schema/context
http://www.springframework.org/schema/context/spring-context-3.1.xsd
http://www.springframework.org/schema/mvc
http://www.springframework.org/schema/mvc/spring-mvc-3.1.xsd
http://www.springframework.org/schema/util
http://www.springframework.org/schema/util/spring-util-3.1.xsd
http://www.springframework.org/schema/tx
http://www.springframework.org/schema/tx/spring-tx-3.1.xsd
http://www.directwebremoting.org/schema/spring-dwr
http://www.directwebremoting.org/schema/spring-dwr-3.0.xsd">

    <context:component-scan base-package="org.myco.subco" />

    <!-- Enable annotation driven controllers, validation etc... -->
    <mvc:annotation-driven />

    <!-- the mvc resources tag does the magic -->
    <mvc:resources mapping="/resources/**" location="/resources/" />

    <util:properties id="applicationProperties" location="classpath:application.properties" />

    <bean id="messageSource"
        class="org.springframework.context.support.ReloadableResourceBundleMessageSource">
        <property name="basename" value="classpath:messages" />
    </bean>

    <bean id="dataSource" class="org.springframework.jndi.JndiObjectFactoryBean">
        <property name="jndiName" value="java:jboss/datasources/MySqlDS" />
    </bean>

    <bean id="entityManagerFactory"
        class="org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean">
        <property name="persistenceXmlLocation" value="classpath:META-INF/persistence.xml" />
        <property name="persistenceUnitName" value="myappunit" />
        <property name="dataSource" ref="dataSource" />
    </bean>

    <bean id="sharedEntityManager"
        class="org.springframework.orm.jpa.support.SharedEntityManagerBean">
        <property name="entityManagerFactory" ref="entityManagerFactory" />
    </bean>

    <bean id="transactionManager" class="org.springframework.orm.jpa.JpaTransactionManager">
        <property name="entityManagerFactory" ref="entityManagerFactory" />
    </bean>

    <tx:annotation-driven />

    <bean id="viewResolver"
        class="org.springframework.web.servlet.view.InternalResourceViewResolver">
        <property name="prefix">
            <value>/WEB-INF/views/</value>
        </property>
        <property name="suffix">
            <value>.jsp</value>
        </property>
    </bean>

    <dwr:annotation-scan base-package="org.myco.subco" scanDataTransferObject="true" scanRemoteProxy="true" />
    <dwr:url-mapping /> 
    <dwr:controller id="dwrController" debug="true" />
    <dwr:configuration />

</beans> 
```

有什么我想念的想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T02:08:14.567

看起来您拥有所需的所有部分，但您需要将它们连接起来。我看不到从 Spring MVC 到 DWR 控制器的任何映射，这就是 Spring MVC 无法识别这些 URL 的原因。

将以下内容添加到您的 Spring 应用程序上下文配置文件中应该可以做到：

```
<bean class="org.springframework.web.servlet.mvc.SimpleControllerHandlerAdapter" />

<bean id="viewMappings" class="org.springframework.web.servlet.handler.SimpleUrlHandlerMapping">
    <property name="alwaysUseFullPath" value="true" />
    <property name="urlMap">
         <map>
              <entry key="/dwr/**/*" value-ref="dwrController" />
         </map>
    </property>
</bean> 
```

In your case I think that's all you need.

However I've had problems with some Java application servers when they automatically handle *.js URLs with their internal static file handler instead of going to Java code. If you have that problem, change your `servlet-mapping` in your web.xml to ensure that Spring handles those URLs instead of the inbuilt file hander. For example:

```
<servlet-mapping>
    <servlet-name>dispatcher</servlet-name>
    <url-pattern>/dwr/*</url-pattern>
</servlet-mapping>
<servlet-mapping>
    <servlet-name>dispatcher</servlet-name>
    <url-pattern>*.js</url-pattern>
</servlet-mapping>
<servlet-mapping>
    <servlet-name>dispatcher</servlet-name>
    <url-pattern>/</url-pattern>
</servlet-mapping> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T20:43:14.237

I was able to solve my problem using this web.xml configuration ...

```
<servlet>
    <servlet-name>dispatcher</servlet-name>
    <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
    <init-param>
        <param-name>contextConfigLocation</param-name>
        <param-value>/WEB-INF/jboss-as-spring-mvc-context.xml</param-value>
    </init-param>
    <load-on-startup>1</load-on-startup>
</servlet>

<servlet-mapping>
    <servlet-name>dispatcher</servlet-name>
    <url-pattern>/dwr/*</url-pattern>
</servlet-mapping>

<servlet-mapping>
    <servlet-name>dispatcher</servlet-name>
    <url-pattern>/</url-pattern>
</servlet-mapping> 
```

and this Spring MVC config ...

```
<bean class="org.springframework.web.servlet.mvc.SimpleControllerHandlerAdapter" />

<!-- DWR will scan all Spring managed beans containing @RemoteProxy or @RemoteMethod 
    annotations and register Creator proxies for them. This will NOT scan any 
    classes not managed by Spring. -->
<dwr:annotation-config id="springdwr" />

<!-- DWR will scan the classpath and search classes containing @RemoteProxy 
    or @RemoteMethod annotations. This will register the beans and Creator proxies 
    for these classes. -->
<dwr:annotation-scan base-package="org.collegeboard.springboard"
    scanDataTransferObject="true" scanRemoteProxy="true" />

<!-- DWR will map util.js and engine.js files to the dwrController. You 
    can then include this files as external Javascript references from your JSP -->
<dwr:url-mapping />

<!-- Defines the dwrController. During production, set the debug property 
    to false -->
<dwr:controller id="dwrController" debug="true" />

<!-- This is required if you want to configure any beans not managed by 
    Spring. Leaving it enabled doesn't do any negative effects. Here's a sample 
    config: -->
<dwr:configuration /> 
```

# java - 在应用程序级别处理数据库崩溃

> ID：13499252
> 
> 赞同：0
> 
> 时间：2012-11-21T17:57:39.047
> 
> 标签：java, database, exception-handling, crash

问题很清楚，我举个例子。

（阅读此内容：）假设我们在用户机器上有一个应用程序和一个远程数据库。该应用程序高度依赖数据库来根据用户的选择检索内容。

处理数据库崩溃/互联网断开等的方法有哪些？

一种是在尝试连接到数据库时显示一条消息，但接下来呢？关闭应用程序，或者是否可以将其禁用一分钟并在此期间重试连接，如果失败则再次强制关闭它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T19:10:57.320

轮询您的数据库/互联网连接是否可用，如果它不可用，请按照@Beth 所述执行并通知您的用户。

如果问题是互联网连接或数据库问题，重新启动应用程序不太可能解决任何问题，并且更有可能惹恼您的用户，他们会认为重新启动应用程序是一种解决方案。

我用于网络连接应用程序的解决方案是间歇性地轮询连接并显示连接状态以供用户查看。您的数据库也可以这样做。

当然，由于持续检查，您将有额外的开销，但如果您的连接不那么出色，它可能是适合您的解决方案。

顺便说一句，如果您的数据库在一致的基础上崩溃（或足以保证在此问题中提及它），您应该真正考虑另一台主机，或查看您的配置并修复该问题，数据库的构建是健壮的。 .

# objective-c - UIButton 删除边框与触摸覆盖

> ID：13499253
> 
> 赞同：0
> 
> 时间：2012-11-21T17:57:41.683
> 
> 标签：objective-c, ios, cocoa-touch, uibutton

我需要一个 UIButton 但我不想要它的边框。

但是，当有人触摸按钮时，我仍然想保持漂亮的渐变叠加

就像在 Facebook iPad 应用程序上一样，它们在 News Feed 中的文本链接在您触摸它们时会显示一个灰色框覆盖。

我在这里看到了一个关于使用 UISegmentedControl 的解决方案。但是我不想在解决方案中使用渐变/Quartz 框架。

有没有人遇到过这个问题？

更新

这是一个插图 ![图片](../Images/632268eb0e5002fe8e7dfb9d7cb61f79.png)

(1) 在您触摸之前 (2) 是在您触摸按钮时发生的情况。

我基本上只是想复制这种效果，我猜是透明的“覆盖”，就像你触摸按钮时发生的那样，但没有边框。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T18:17:22.383

用你想要的颜色制作一个 UIImage，并调用`setBackgroundImage:forState:`高亮状态（当用户点击按钮时，按钮高亮）；

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-21T18:28:22.287

使用以下内容：

```
UIButton *yourButton = [UIButton buttonWithType:UIButtonTypeCustom];
[yourButton setFrame:CGRectMake(0, 0, 200, 44)];
[yourButton setTitle:@"like" forState:UIControlStateNormal];

[yourButton setBackgroundImage:[UIImage imageNamed:@"normal.png"] forState:UIControlStateNormal];
[yourButton setBackgroundImage:[UIImage imageNamed:@"gradient.png"] forState:UIControlStateHighlighted];

// Round corners? Requires Quartzcore framework
[yourButton.layer setCornerRadius:8.0f];
[yourButton.layer setMasksToBounds:YES];
[yourButton.layer setBorderWidth:0.0f]; 
```

# ruby - 在发布 gem 之前编译资产

> ID：13499255
> 
> 赞同：2
> 
> 时间：2012-11-21T17:57:46.827
> 
> 标签：ruby, gem, coffeescript, assets

我正在做一个小项目[https://github.com/lucassus/mongo_browser](https://github.com/lucassus/mongo_browser) 这是一个用 sinatra.rb 框架编写的应用程序，以及用于编译咖啡脚本和 sass 的简单资产管道。由于该应用程序是作为 gem 发布的，因此我必须添加`sprockets`,`coffee-script`和`sass`gem 的运行时依赖项。

这个解决方案有一些明显的缺点：

*   端点用户必须安装所有这些依赖项
*   他必须安装一个 JavaScript 运行时（例如 nodejs）
*   由于资产编译，应用程序稍慢

最大的问题是：是否可以在 gem 中分发已编译的资产？

此外，我不想将编译后的资产存储在 repo 中，我只想在 gem 打包过程中编译它们。宝石包钩子之类的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T18:29:15.487

当然，将它们添加到`files=`. 对于编译，将逻辑添加到`.gemspec`开头的 , 中。毕竟，它只是红宝石。

# spring-security - 将新的安全 jsp 页面添加到 cas 服务器以进行单点登录

> ID：13499256
> 
> 赞同：0
> 
> 时间：2012-11-21T17:58:00.303
> 
> 标签：spring-security, single-sign-on, cas, jasig

我想向 jasig cas-server 添加一页。

成功登录后，显示 casGenericSuccess.jsp，在此页面中我添加了一个名为“用户管理”的链接。

现在，我希望如果用户单击它应该打开“userManagement.jsp”页面并且我能够打开，但是我想确保该页面的安全，没有身份验证它应该重定向到登录页面。

直到现在我所做的是，

web.xml

```
 <filter>
    <filter-name>springSecurityFilterChain</filter-name>
    <filter-class>org.springframework.web.filter.DelegatingFilterProxy</filter-class>
  </filter>
  <filter-mapping>
    <filter-name>springSecurityFilterChain</filter-name>
    <url-pattern>/mobileapp/*</url-pattern>
  </filter-mapping>

 <servlet>
    <servlet-name>cas</servlet-name>
    <servlet-class>
      org.jasig.cas.web.init.SafeDispatcherServlet
    </servlet-class>
    <init-param>
      <param-name>publishContext</param-name>
      <param-value>false</param-value>
    </init-param>
    <load-on-startup>1</load-on-startup>
  </servlet>
  <servlet-mapping>
    <servlet-name>cas</servlet-name>
    <url-pattern>/mobileapp/*</url-pattern>
  </servlet-mapping> 
```

安全上下文.xml

cas-servlet.xml

```
<prop key="/mobileapp/*">userManagementMultiActionController</prop>

  <bean id="userManagementMultiActionController"
        class="org.jasig.cas.web.UserManagementMultiActionController">
  </bean> 
```

它将转到 UserManagementMultiActionController，并获取页面，但我面临的唯一问题是页面仍然不安全。

有人可以指导我在 cas 服务器中添加新 jsp 页面的正确方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T09:06:55.823

您还需要在 securityContext.xml 中定义您希望 url 受到保护...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-09T10:21:55.097

这看起来不错的样子。您的财产*cas.securityContext.serviceProperties.service.onmobile*价值是什么？循环时，是否在 CAS 服务 url 中添加了服务票证参数？

# mysql - 一个字段中具有相同数据单元格值但在另一个字段中具有不同数据单元格值的两条记录，根据条件查询以仅返回一个

> ID：13499259
> 
> 赞同：0
> 
> 时间：2012-11-21T17:58:15.287
> 
> 标签：mysql, syntax, duplicate-data, not-exists

我需要一些关于我的 mysql 语法的帮助。

我的表有用户信息，但发货地址和账单地址的订单号相同。

有时人们选择运送到他们的帐单地址；我只需要用户没有输入送货地址的订单号记录，以及他们输入送货地址的位置。

如果他们同时输入账单地址和收货地址，我只需要收货地址，如果这有意义的话。

在表格中，一个订单号有时会出现重复的字段。如果这令人困惑，请查看以下内容：

```
------------SQL TABLE ----------- 
order_id | address_type | user_name       | address
100      | billto       | Homer Simposn   | 123 Main St.
100      | shipto       | Homer Simpson   | 455 XYZ Ave. 
101      | billto       | Peter Griffin   | 780 111th St.
102      | billto       | Charles Xavier  | 555 Bergen St.
102      | shipto       | Jean Gray       | 555 Bergen St. 
```

我需要输出为：

```
100 - shipto - Homer Simposn - 455 XYZ Ave. 
101 - billto - Peter Griffin - 780 111th St.
102 - shipto - Jean Gray - 555 Bergen St. 
```

这是我的语法，它只会返回“shipto”记录。

```
 SELECT * FROM order_info AS A WHERE A.address_type = 'shipto' AND 
NOT EXISTS (SELECT B.address_type 
                    from order_info AS B 
                    where B.address_type = A.address_type 
                    and B.address_type = 'billto') 
```

我想做一些类似`IF`没有`shipto`然后返回的事情`billto`，这可以在sql语法中完成吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T18:08:55.897

您可以通过为您的行找到[分组最大值](http://dev.mysql.com/doc/refman/5.0/en/example-maximum-column-group-row.html)来实现这一点。

具体来说，您使用顺序作为 ID，并在子查询中查找“最大”地址类型（它会查找`shipto`它是否存在，`billto`如果不存在），并使用该结果连接到外部查询中的行。

例如（使用低效的相关子查询）：

```
SELECT * FROM order_info AS A WHERE A.address_type = (
   SELECT MAX(address_type) FROM order_info AS B 
   WHERE A.order_id = B.order_id ) 
```

上面的[链接](http://dev.mysql.com/doc/refman/5.0/en/example-maximum-column-group-row.html)给出了一个将其转换为更有效连接的示例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T18:21:30.697

```
select * from test
where address_type = "shipto"
union
select * from test t1
where address_type = "billto"
and (select count(*) from test t2 where t2.order_id = t1.order_id group by order_id) = 1; 
```

我不确定它的效率如何，但它肯定会得到你的结果。您可以将性能与您找到的其他方式相匹配。

# google-analytics - 为具有多个域的一个网站配置 Google Analytics（分析）

> ID：13499263
> 
> 赞同：3
> 
> 时间：2012-11-21T17:58:46.580
> 
> 标签：google-analytics

我们有两个域为完全相同的 SaaS 应用程序提供服务。由于遗留的第 3 方集成，我们不能丢弃旧域或重定向它（即 301）。我知道从 SEO 的角度来看这很糟糕，但这个应用程序不是公开的，所以这不是问题。

我正在寻找一种使用 Google Analytics 作为*一个*站点来跟踪它们的方法。我看过其他类似情况的海报，但我有一个没有解决的问题。我还需要能够跟踪子域。（即，partner1.old-domain.com || partner1.new-domain.com）

**所以要求看起来像这样：**

作为一个站点跟踪所有流量：(old-domain.com || new-domain.com)

跟踪所有子域流量（配置文件过滤器？）：（partner1.old-domain.com || partner1.new-domain.com）

**注意：**尽量避免使用`_gaq.push(['_setAllowLinker', true]);`. 据我了解，这并不适用于真正的跨站点/跨域情况。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-19T17:54:03.557

您描述的设置是多顶级域设置。问题是用于保持 Google Analytics 会话的 cookie 只能存储在子域或根域级别，因此当您有多个顶级域时，您需要从一个 TLD（顶级域）传递此会话数据给对方。

首先让我们看一个更简单的例子，多个子域。为了跟踪这种情况：

*   partner1.old-domain.com
*   partner2.old-domain.com

我们需要将 cookie 限定为根域，在本例中为“old-domain.com”，这意味着跟踪可以在 partner1 和 partner2 子域中持续存在。这可以通过使用以下方法简单地实现：

```
_gaq.push(['_setDomainName', 'example.com']); 
```

但是，在添加新 TLD 时，这会变得更加复杂。添加时，我们得到：

*   partner1.old-domain.com
*   partner2.old-domain.com
*   partner1.new-domain.com
*   partner2.new-domain.com

为了让这个设置起作用，我们需要使用 setDomainName 方法和 setAllowLinker

```
 _gaq.push(['_setDomainName', 'example.com']);
 _gaq.push(['_setAllowLinker', true]); 
```

存在跨多个域保持跟踪会话的最佳方法。cookie 无法被多个 TLD 读取，这意味着在“old-domain.com”上设置的 Analytics cookie 无法被“new-domain.com”读取，因此 Google Analytics 访问者会话无法持续。

解决这个问题的方法是绕过 cookie，它是这样做的：在执行从 'old-domain.com' 到 'new-domain.com' 的链接时，会话信息首先传递到 URL 中，然后然后由谷歌分析在第二个域上解析，允许访问者会话的持久性。

Google 提供了一种通过 '_link()' 函数执行此操作的方法。此功能需要与域之间的所有链接一起使用。这既是从旧域到新域，也是从新域到旧域。

```
<a href="http://partner1.new-domain.com/"
  onclick="_gaq.push(['_link', 'http://partner1.new-domain.com/']);
  return false;">
    Continue to the new site.
</a> 
```

希望这已经清除了它。我了解您不想使用 setAllowLinker，但这是最好的方法。

此处提供更多信息：[为多个域设置跨域跟踪](https://support.google.com/analytics/bin/answer.py?hl=en&utm_id=ad&answer=1034342)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T14:59:59.323

`_gaq.push(['_setDomainName', 'example.com']);`

[https://developers.google.com/analytics/devguides/collection/gajs/methods/gaJSApiDomainDirectory#_gat.GA_Tracker_._setDomainName](https://developers.google.com/analytics/devguides/collection/gajs/methods/gaJSApiDomainDirectory#_gat.GA_Tracker_._setDomainName)

# javascript - JavaScript中的意外参数值

> ID：13499276
> 
> 赞同：0
> 
> 时间：2012-11-21T17:59:40.107
> 
> 标签：javascript, android, ios, cordova

我无法理解这里出了什么问题。我从数据库中获取事件列表，并尝试创建一个自定义列表来显示它们，并使用回调 onclick 方法。我得到了正确的值，我正确地显示了它们，但是 onClick 方法获取了最后一个项目 ID 的值，而不是它自己的值。

因此，如果我单击列表中的任何项目，我的警报会显示

`show itinerary for event: 10`

而不是正确的 ID（我现在有 10 个事件）

这就是我处理从数据库获得的项目的方式：

```
function gotEvents(transaction, result) {
             var eventList;
             var myDbElements = $('#myDbElements');            
             var params = {
                items:result.rows.length,
                hasImage:false,
                content:[]
             }
                   if (result != null && result.rows != null) {

                       for (var i = 0; i < result.rows.length; i++) {
                          var row = result.rows.item(i);
                          var rowText = row["Name"] + '<br/>' +  row["Start"].slice(0,9);                    

                          var rowId = row["id"];
                          var contentItems = {
                            text: rowText,
                            onClick: function(){ showEventItinerary(rowId) }

                          }
                           params.content.push(contentItems);                      
                          }
                          for (var j=0; j<result.rows.length;j++){
                            PrecAppPersistence.debugObject(params.content[i]);
                          }
                          eventList = PrecAppComponents.myList(params,$('#eventsList'));
                   }
                PrecApp.I_SCROLL.refresh();   
               }

            function showEventItinerary(event_ID) {
                alert("show itinerary for event:"+event_ID);
            } 
```

这是我创建列表的方式：

```
function List() {

var self;
var items;
var firstRun = true;

this.initialize = function(params,cont) {
    self = this;
    var container = cont;

    var items;
    container.empty();
    opt = {
            items:0,
            content:[], // array with the content. Default is = {text:text,icon:imageURL,onClick: function(){}}  itemId // not sure if we need this yet. supposed to be a manual ID for the item. EX: id taken from the db.                                         
            width: 300,
            hasImage: false, //set true if you want to show an images
            margin:10, //margin between items               

    }
    for (i in params) opt[i] = params[i];

    items = opt.items;
    container.width(opt.width);

    for (i=0;i<items;i++){

        itemToAdd = '<div class="listItem" id="listItem'+i+'">'; //add IDS to add click                        
        if (opt.hasImage) {
            itemToAdd += "<img src=" + opt.content[i].image + " />";
        }               
        itemToAdd += "<p>" + opt.content[i].text + "</p>";
        itemToAdd += "<div class='clearFix'></div>";
        itemToAdd += '</div>';      
        container.append(itemToAdd); //original #scroller might change?     

        listItem = $('#listItem'+i);    
        listItem.css('margin',opt.margin + 'px 0');
        listItem.on('click',opt.content[i].onClick);            

    }

}} 
```

我正在记录我的变量，我的 rowId 具有正确的 ID。onClick 日志显示所有项目的以下内容：

`onClick:function (){ showEventItinerary(rowId )}`（我不确定这是否正确，它不应该显示 rowID 的值而不是变量 rowID 吗？）

我在这里错过了什么吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T18:07:19.757

您需要创建一个闭包，因为您的索引 i 使用循环更新：

```
for (var i = 0; i < result.rows.length; i++) {(function(index){
// use index instead of i inside your loop
...
// end closure
})(i);
// end loop
} 
```

自调用函数将使用 index=i 执行。i 是循环的一部分，它的值会改变，而循环中的每个函数都将保留自己的索引。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-21T18:26:06.553

没有块级范围，`rowID`要么使用数组将每个项目存储在循环中，要么使用 a`closure`为每次迭代创建单独的范围。

检查[臭名昭著的循环问题](http://robertnyman.com/2008/10/09/explaining-javascript-scope-and-closures/)

# android - 您如何处理 Android 上的身份验证重定向？

> ID：13499277
> 
> 赞同：1
> 
> 时间：2012-11-21T17:59:39.667
> 
> 标签：android, authentication

我目前正在构建一个需要身份验证的 ICS 4.0+ Android 应用程序。我遇到的问题是在以下情况下处理登录状态检查：

*   用户首次打开应用
*   用户关闭（恢复）后返回应用

我正在寻找的行为是，如果应用程序从内存中删除并重新打开，则会出现“正在加载...”启动画面，然后当用户在恢复时返回应用程序时（仍在内存中），会出现几乎不明显的启动画面.

我目前用于检查的代码是：

```
 public static void checkUserStatus(Context context, boolean isPassive) {
    Log.d(TAG, "Checking user status..");
    // User is logged in and has cc
    if ( APIUtil.isLoggedIn() && UserAccount.getCreditCards().size() > 0 && isPassive == false) {
        Intent intent = new Intent(context, OtherActivity.class);
        context.startActivity(intent);
    // User is logged in but has no cc
    } else if (APIUtil.isLoggedIn() && UserAccount.getCreditCards().size() == 0) {
        Intent intent = new Intent(context, ManageCCActivity.class);
        context.startActivity(intent);
    // User is not logged in
    } else if(isPassive == false) {
        Intent intent = new Intent(context, HomeActivity.class);
        context.startActivity(intent);
    }
} 
```

在每个活动的 onResume() 中调用 checkUserStatus。这个想法是它会检查并相应地重定向，但行为古怪且不一致，而且感觉很笨拙。

那里有身份验证流程的示例吗？想法？建议？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T18:36:37.893

我已经使用并看到其他效果很好的模式看起来像这样：

*   将您用于确定用户是否已登录并具有有效数据的逻辑封装到 a`Service`中，然后运行该`Service`绑定（这意味着您永远不会启动或停止它，而是绑定到它...[文档链接以获取更多信息](https://developer.android.com/guide/components/services.html#CreatingBoundService)）。
*   实现一个基本`Activity`实现，该实现绑定到 in 中的服务`onStart()`并从 .in 中解除绑定`onStop()`。这允许`Service`您在从一个移动`Activity`到另一个时保持运行。让任何`Activity`需要访问此信息的人都继承自此基础（可能是 every `Activity`）。
*   仅`Service`在启动时检查所需的信息，然后用结果回电。

这会创建一个（相当）单一的授权检查实例，仅在应用程序启动或用户离开后返回时进行检查，而不会在您从一个移动`Activity`到另一个时不断检查。它还允许它在用户过早离开时优雅地完成任何长时间运行的操作，因为所有工作都在`Service`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-21T18:18:07.237

这就是我现在正在开发的应用程序上所做的事情。

1) StartUpActivity：检查用户是否登录。根据用户状态重定向到登录屏幕或主屏幕。如果用户保存了它的凭据并且需要某种 api 令牌或会话，您可能希望添加静默登录。

2）在我的应用程序中，用户必须登录，因为它正在访问一些受保护的资源。如果由于无效的 api 令牌或不正确的登录信息而无法访问资源，则从 API/网络级别广播意图（通常匹配 http 代码 401 或 403 ）

3) BroadcastReceiver 捕获该特定意图，注销用户，并使用消息将应用重定向到登录屏幕。

这样，您的 UI 就不必检查用户状态，只需准备好在用户未经授权时将其移出屏幕即可。

值得一提的是，我的应用确实经常使用网络，因为它是一个近乎实时的应用。正因为如此，我能够相当快地捕捉到未经授权的事件。

# xml - 使用 XSLT 自动生成 XML 模式

> ID：13499280
> 
> 赞同：4
> 
> 时间：2012-11-21T17:59:52.443
> 
> 标签：xml, xslt, xsd, xml-namespaces

按照本[教程](http://www.liquid-technologies.com/Tutorials/XmlSchemas/XsdTutorial_04.aspx)，我将我的 733 行模式重构为 16 个单独的文件或子模式，每个文件或子模式都有自己的命名空间。现在顶级架构只有 77 行。计划是使用这些子模式来构建其他顶级模式。

问题是大多数顶级模式都非常相似，只是在一些低级细节上有所不同。例如，虽然一个顶级架构支持 all `PaymentMethodType`（请参阅[教程](http://www.liquid-technologies.com/Tutorials/XmlSchemas/XsdTutorial_04.aspx)），但另一个顶级架构可能仅支持 VISA 和 MasterCard。目前，我创建顶级模式的方法涉及大量重复。例如，我当前创建仅支持 VISA 和 MasterCard 的顶级模式的方法将涉及复制`Main.xsd`and `OrderType.xsd`，但要自定义`CommonTypes.xsd`和重用`CustomerTypes.xsd`. （由于我的实际架构更长，因此涉及更多重复。）

我发现这种重复是不可接受的，主要是因为它引入了维护挑战，即我必须维护任意数量的具有不同名称的相同子模式。

我想知道的是，是否有一种无需通过某种配置文件（也许是 XSLT？）即可自动生成模式的方法，以避免重复子模式。

此外，在这种情况下，所有子模式声明相同的目标命名空间是否是一种好习惯（就像 xml 模式命名空间一样`xs`，但自定义子模式声明了单独的命名空间？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T09:05:41.807

你为什么要复制`Main.xsd`而`OrderType.xsd`不是像你一样重用它们`CustomerTypes.xsd`？如果它们实际上是相同的（正如“重复”所暗示的那样），为什么不直接导入它们呢？我猜你可能会从问题中省略一些东西......

此外，“生成没有通过的模式”中似乎缺少一个词。

1.  为每个子模式设置不同的命名空间将起作用；另一种方法是“变色龙模式”。这是子模式本身没有命名空间的地方，而是采用顶级模式的命名空间。[多模式项目：零个、一个或多个命名空间？](http://www.xfront.com/ZeroOneOrManyNamespaces.html). 但是，这种技术有点棘手，并且并非所有工具都支持它，因此有些人[建议避免使用它](http://www.kohsuke.org/xmlschema/XMLSchemaDOsAndDONTs.html#avoid_chameleon)。但是对于您的情况，也许它是值得的……当然，阅读这些链接会给您关于如何处理您的情况的想法。

2.  您可以[重新定义](http://www.w3.org/TR/2004/REC-xmlschema-1-20041028/structures.html#modify-schema)另一个模式的特定部分（该模式的其余部分保持不变）。看看[定义下面的例子](http://www.w3.org/TR/2004/REC-xmlschema-1-20041028/structures.html#modify-schema)。听起来这*正是*您问题的解决方案。重新定义的部分可以是低级的，由模式的其他部分（或其他导入的模式）使用。但是，与上面的 (1) 一样，这是规范的一个棘手部分，某些工具可能不支持。

所以...希望您的工具实现规范的这些功能（以及需要使用它们的任何其他人的工具）。您可以使用上面链接中的示例对其进行测试（我确认它适用于 xmllint）。

如果没有，您使用 XSLT（或其他 XML/文本处理工具）组装子模式的想法会奏效。如果您需要有关 XSLT 的特定帮助，我建议您包括您开始使用的模式示例，以及您想要的结果模式。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-22T16:22:34.153

我不打算描述基于 XSLT 的方法，因为我不知道有什么好的方法，并且因为我在您自己的摇摆不定中看到的开头：“某种（可能是 XSLT？）”。

你想要什么我早在 2004 年就试过了；我已经放弃了将 XSLT 作为一种用于处理 XML 模式重构的语言，因为我认为模式对象模型 API (SOM/XSOM)——专为 XSD 分析和创建而设计的 API——是一种更有效地使用我的时间（对于阅读本文的 XSLT 专家，我已经对我的陈述进行了限定）。

总有一种可能性，即您想要的实际上很简单，因此滚动您自己的 XSLT 或其他方式是可行的（经济上或智力上）。为您的问题分享更具体的参数可能有助于产生更好的答案。不过，如果您正在考虑专业地执行此操作，即对您的输入和输出 XSD 的外观做出最少的假设，那么您需要做一些工作。

我最终做的是为 XML 模式重构设计一种[领域特定语言。](http://en.wikipedia.org/wiki/Domain-specific_language)它作为[QTAssistant](http://paschidev.com) XSR 模块的一部分提供。从图形上看，这就是 QTAssistant 中“将 733 行模式转换为 16 个单独的文件或子模式”的样子。

![在此处输入图像描述](../Images/05ec4a551b08cd8b093eac9e6503b6e7.png)

它的重构功能允许您从单个源集中描述的许多内容。您需要做的就是使用所需的任何功能配置所需的“视图”（例如，XSD 文件中的内容，自动拉入所需的依赖项，更改目标命名空间，重构类型、元素的名称，替换基本类型删除不需要的粒子，引入序列包装器以更改基数等）按一下按钮即可保证有效的 XSD 文件。它还带有用于与自动构建系统集成的命令行界面。

如果有的话，我会考虑查看 .NET 的[Schema](http://msdn.microsoft.com/en-us/library/system.xml.schema.aspx)包中的 API，如果只是为了获得关于如何设计 XSLT 模板的灵感......

# git - @nvie 的 Git 分支模型中的开发和测试分支？

> ID：13499285
> 
> 赞同：2
> 
> 时间：2012-11-21T18:00:00.037
> 
> 标签：git, version-control, branch, git-flow, branching-strategy

我已经阅读了@nvie 的[Git 分支模型](http://nvie.com/posts/a-successful-git-branching-model/)和[gitflow](https://github.com/nvie/gitflow)，我认为这是一个很好的模型，可用于我目前正在开发的项目（Web 应用程序）。

我是该项目的首席开发人员，我在本地环境（类似 MAMP）上进行开发。每当我做了一些东西给客户看时，我都会提交我的工作并将其推送到中央 Git 主机。从那里我将它部署到连接到互联网的服务器上。然后我的客户可以看到更改。

第二个开发人员刚刚开始从事该项目。他一次开发单个功能，并在它们准备好时将它们推送到中央 Git 主机。我在部署之前回顾了他的工作。

目前所有提交都在`master`分支中完成并部署到单一托管环境。将来我想拥有一个生产环境（用于实际使用）、测试环境（在应用程序的新版本发布之前测试它们）和一个开发环境（我可以在其中展示已完成的功能或仍在进行中给客户）。我认为生产环境将从中部署`master`，而开发环境将从中部署`develop`。

我的问题如下：

1.  我经常同时处理多项任务。当某个功能的一部分准备就绪时，有时我想在继续开发该功能之前将其展示给我的客户。但是，据我了解，一个功能（分支）只会`develop`在它完成并计划发布时才被合并。如何向我的客户（在开发环境中）显示正在进行（或尚未计划发布）的功能？

2.  我应该从哪个分支部署到测试环境？我应该手动选择那个时候的发布分支，还是有一个专门的测试分支？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-22T03:14:08.353

这是我对此的看法：

1.  您可以将要显示的功能分支部署到开发环境。请记住在客户端看到新功能后部署开发分支。

2.  对于测试环境，您使用发布分支。测试期结束并发布应用程序后，您将主分支部署到测试环境，直到下一个发布计划。

**免责声明**：我是 git-flow（AVH 版）的开发者
需要记住的是，原始的 gitflow 软件不会删除远程功能和发布分支。因此，当您使用原始 gitflow 完成功能或发布时，您需要手动删除远程分支。在[git-flow（AVH 版）](http://bit.ly/S2k1S2)中，软件会处理它。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-22T03:32:46.647

可以随时使用 1 个命令（git checkout）切换到功能分支。有时（在 Rails 开发模式下，我会保持应用服务器正常运行并切换代码，甚至无需重新启动服务器！）。无论我在哪个分支，我仍然处于“开发”模式。
所以切换到你想要的分支并进行演示。然后切换回 master 或您想要的任何分支。
最初我在一些组织的所有工作中都在 master 中工作，但现在我完成了所有的工作——功能、杂务或分支中的错误。通常我会用来自跟踪系统（在我们的例子中是 Pivotal Tracker）的 id 来标记分支名称和/或提交文本。
诀窍是通过频繁 git fetch 的最新 master 和 git merge master（在“主题”分支中）使分支保持最新。

对于我配置了遥控器的其他环境，例如 mycoolapp-stage，我将代码分别推送给它们。对于 1 个应用程序，我有大约 6 个不同的遥控器，其中 4 个用于测试。

至于测试，测试人员可以拉下更改并在开发环境中本地工作（适用于程序员和 QA 测试人员），或者他们可以只使用您将代码推送到远程的测试或暂存区域。

总的来说，你在分支中工作，然后通过 master 推送东西。在我对 git branch、fork、fetch、merge、rebase 和 clone 的过程的回答中查看更多信息[，有什么区别？](https://stackoverflow.com/questions/3329943/what-is-the-difference-between-branch-fork-fetch-merge-rebase-and-clone-in-g/9204499#9204499)

# c# - Wix：将数据从 ProgramFilesFolder 移动到 ProgramData

> ID：13499289
> 
> 赞同：2
> 
> 时间：2012-11-21T18:00:17.550
> 
> 标签：c#, wix, windows-installer, program-files

我们开发 C# 应用程序并通过 Wix 将其打包成可以安装的 MSI 文件。应用程序可执行文件和 .dll 文件安装到**ProgramFilesFolder**中的标准位置。

启动时应用程序创建本地 .sdf 文件（数据库），如果它不存在。

当我们卸载（例如作为升级到较新版本的一部分）时，所有内容都会被删除，除了这个 .sdf 文件。当我们安装较新版本时，它会拾取旧的 .sdf 文件并继续使用它。

现在的问题是 .sdf 文件当前也位于**ProgramFilesFolder**下。我们不想“将旅行行李存放在发动机舱中”，因此我们将这个 .sdf 文件移动到**ProgramData**中。

因此，我们将在应用程序代码中进行此更改 - 在不同的路径中使用 .sdf 文件。下次升级时，我们需要将现有的 .sdf 文件从**ProgramFilesFolder**移动到**ProgramData**。

问题 - 移动此文件的理想方法是什么？

1)**在 Wix 设置代码**中 - 识别是否从“旧”版本（比我们更改 .sdf 文件位置的版本更旧）升级到“新”（更新或等于更改），在这种情况下移动文件。这里的好处是 Wix“知道”所有版本号，并且可以根据它们有条件地进行移动。

2)**在 C# 应用程序代码**中 - 与在 Wix 中编写 CustomAction 相比，它可能更简单。但是应用程序代码对版本一无所知，因此我们不能使用与 Wix 相同的使用“旧”和“新”版本的逻辑。所以我们只能使用通用逻辑，例如，如果新位置存在文件，则使用新位置的文件，否则检查旧位置中是否存在文件，然后将其移动到新位置，如果文件都存在于两者中 - 忽略来自的文件旧位置，只需使用新位置中的文件。

你能帮忙选择最好的方法吗？

所描述的方法有任何缺点\风险吗？

有更好的解决方案吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T15:24:59.813

我将通过 WIX 控制一切，因为您可以设置属性和条件来在安装过程中获得所需的行为。

我建议你从这里开始[检查老歌](http://wix.tramontana.co.hu/tutorial/upgrades-and-modularization/checking-for-oldies)

您需要在 CA 中进行的更改是移动或不移动文件，具体取决于找到的版本。

如果需要更大的改变，请查看 [替换我们自己](http://wix.tramontana.co.hu/tutorial/upgrades-and-modularization/replacing-ourselves)

高温高压

# rest - Cognos 可以通过 REST 检索数据吗？

> ID：13499290
> 
> 赞同：2
> 
> 时间：2012-11-21T18:00:17.460
> 
> 标签：rest, cognos

我想使用 Cognos 通过 REST api 检索 IBM Forms Experience Builder 的响应数据。Cognos 能否/如何通过 REST 检索数据？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T05:16:13.660

您可以使用 Cognos Mashup Service：
[Cognos Mashup Service](http://www-142.ibm.com/software/products/us/en/cognos-mashup-service/)
它是 Cognos SDK 的一部分，您可以使用 REST + SOAP 将 Cognos Business Intelligence 内容嵌入到其他业务应用程序、流程或数据可视化工具中。
文档是 SDK 的一部分，不公开提供。
但是，这里提供了一个经过验证的优秀实践文档：
[IBM Cognos Mashup Service 入门](http://www.ibm.com/developerworks/data/library/techarticle/dm-1001cognosmashup/index.html)

# twitter - 访问 7 天推文

> ID：13499293
> 
> 赞同：1
> 
> 时间：2012-11-21T18:00:25.743
> 
> 标签：twitter, twitter4j

我想从 twitter 获得 7 天的推文，这是我的代码如下：

```
 for(int i=1;i<16;i++)
    {
    Query qy = new Query();
    qy.setRpp(100);
    qy.setPage(i);
    qy.resultType("Mixed");

    QueryResult result = twitter.search(qy);
    List<Tweet> tweets = result.getTweets(); 
```

}

我使用 twitter4j 收到了一些推文，但我无法控制推文的时间。我只想获得 7 天的推文，我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-12-04T07:16:22.897

*   如果您希望在当前日期前 7 天，您可以使用此选项

    qy.setSince("[你的日期]")

*   如果您想提前 7 天，请尝试 Twitter 流 API： [https ://dev.twitter.com/streaming/overview](https://dev.twitter.com/streaming/overview)

*   如果您想在两个特定日期之间进行搜索，Twitter 搜索不提供执行此操作的方法，但您可以使用推文的时间戳将其“过滤”掉。

[twitter4j 是否提供在 2 个日期之间搜索推文的功能](https://stackoverflow.com/questions/7915634/does-twitter4j-provide-the-capability-to-search-tweets-between-2-dates)

# matlab - 从 MATLAB 图中删除蓝色工具栏

> ID：13499295
> 
> 赞同：1
> 
> 时间：2012-11-21T18:00:31.480
> 
> 标签：matlab, plot

MATLAB 图形在图像周围输出一个蓝色工具栏。我需要删除蓝色工具栏。

我正在使用：

```
figure('Toolbar','none') 
```

但它会删除菜单栏，但不会删除蓝色工具栏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T18:06:48.687

相反，我认为您想删除菜单栏（而不仅仅是工具栏）：

```
figure('MenuBar','none') 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-21T23:29:11.867

不确定这是否是您的意思，但我相信您想“最大化”情节以填充整个数字。

例子：

```
plot(cumsum(rand(1000,1)-0.5))   %# some plot
set(gca, 'Position',[0 0 1 1])   %# maximize axis plotting area
set(gcf, 'Menubar','none')       %# remove menubar 
```

还可以选择隐藏刻度线：

```
set(gca, 'XTick',[], 'YTick',[]) 
```

![截屏](../Images/c56c4c55095700fbf0181200cf5d01fb.png)

# asp.net-mvc - LINQ 查询未正确转换为数据库

> ID：13499297
> 
> 赞同：1
> 
> 时间：2012-11-21T18:00:35.283
> 
> 标签：asp.net-mvc, linq, entity-framework, asp.net-mvc-4, ef-code-first

我正在开发一个 MVC 网站，因为我是 mvc 的新手，所以我遇到了一些问题。这个真的很奇怪，一直困扰着我一段时间。我正在使用 LINQ 进行查询，其中一些查询非常非常慢。

然后我打开 SQL Server Profiler 以更接近的方式查找查询。我刚刚注意到，我的 LINQ 查询在没有 where 子句的情况下被发送到数据库，这使得执行需要很长时间。

现在我将发布代码的相关部分，看看你们是否会出错。

模型

```
[Table("tblSolicitacao")]
public partial class ChamadosViewModel
{
    [Key]        
    public int Nsu { get; set; }

    [Required(ErrorMessage = "*")]
    public int IdAutor { get; set; }

    [Required(ErrorMessage = "*")]
    [DisplayName("Assunto")]
    public string NomeDaSolicitacao { get; set; }

    [Required(ErrorMessage = "*")]
    [DisplayName("Descrição")]        
    public string Descricao { get; set; }

    [Required(ErrorMessage = "*")]
    [DisplayName("Grupo")]
    public string Grupo { get; set; }

    [Required(ErrorMessage = "*")]
    [DisplayName("Atividade")]
    public string Atividade { get; set; }

    [Required(ErrorMessage = "*")]
    [DisplayName("Prioridade")]
    public string Prioridade { get; set; }

    [Required(ErrorMessage = "*")]
    [DataType(DataType.DateTime, ErrorMessage = "Formato de Data Inválido")]        
    public Nullable<System.DateTime> DataPretendidaPeloAutor { get; set; }
    public Nullable<bool> AcompanharViaEmail { get; set; }
    public Nullable<int> IdAnalistaDesignado { get; set; }
    public string Complexidade { get; set; }
    public Nullable<System.DateTime> DataPrevistaPeloAnalista { get; set; }
    public Nullable<int> SubordinacaoDeSolicitacao { get; set; }
    public string COD_FORNECEDOR { get; set; }
    public Nullable<decimal> TOLERANCIA { get; set; }
    public string DESC_COND_PGTO { get; set; }
    public string FILIAL_FATURAR { get; set; }
    public string FILIAL_ENTREGA { get; set; }
    public string FILIAL_COBRANCA { get; set; }
    public string MOTIVO_COMPRA { get; set; }
    public Nullable<int> TIPO_SOLICITACAO { get; set; }
    public string FORMA_PGTO { get; set; }
    public string MOTIVOCHAMADO { get; set; }
    public Nullable<int> TEMPORESOLUCAO { get; set; }
    public string CodigoRateioFilial { get; set; }
    public string CodigoRateioCentroCusto { get; set; }
    public Nullable<System.DateTime> DataSolicitacao { get; set; }

    [NotMapped]
    public string NomeAutor { get; set; }
    [NotMapped]
    public string NomeAnalista { get; set; }

    public IEnumerable<genericoGruposViewModel> Grupos { get; set; }
    [NotMapped]
    public List<ListItem> Transitos { get; set; }
    public List<string> Complexidades { get; set; }
    public IEnumerable<genericoGrupoAtividadeViewModel> Atividades { get; set; }
    public IEnumerable<genericoPrioridadeViewModel> Prioridades { get; set; }
    public IEnumerable<ColaboradorViewModel> Usuarios { get; set; }

    [NotMapped]
    IEnumerable<ColaboradorViewModel> AnalistasDesignados { get; set; }
} 
```

控制器

```
 ChamadosViewModel ChamadoDetalhe = new ChamadoDetalhe();

    ChamadoDetalhe = _dbHelpDesk.Chamados
                .ToList()
                .Where(x => x.Nsu == NumeroChamado)
                .Select(x => new ChamadosViewModel
                        {
                            Nsu = x.Nsu,
                            IdAutor = x.IdAutor,
                            NomeDaSolicitacao = x.NomeDaSolicitacao,
                            Descricao = x.Descricao,
                            Grupo = x.Grupo,
                            Atividade = x.Atividade,
                            Prioridade = x.Prioridade,
                            DataPretendidaPeloAutor = x.DataPretendidaPeloAutor,
                            AcompanharViaEmail = x.AcompanharViaEmail,
                            IdAnalistaDesignado = x.IdAnalistaDesignado,
                            Complexidade = x.Complexidade,
                            DataPrevistaPeloAnalista = x.DataPrevistaPeloAnalista,
                            SubordinacaoDeSolicitacao = x.SubordinacaoDeSolicitacao,
                            COD_FORNECEDOR = x.COD_FORNECEDOR,
                            TOLERANCIA = x.TOLERANCIA,
                            DESC_COND_PGTO = x.DESC_COND_PGTO,
                            FILIAL_FATURAR = x.FILIAL_FATURAR,
                            FILIAL_ENTREGA = x.FILIAL_ENTREGA,
                            FILIAL_COBRANCA = x.FILIAL_COBRANCA,
                            MOTIVO_COMPRA = x.MOTIVO_COMPRA,
                            TIPO_SOLICITACAO = x.TIPO_SOLICITACAO,
                            FORMA_PGTO = x.FORMA_PGTO,
                            MOTIVOCHAMADO = x.MOTIVOCHAMADO,
                            TEMPORESOLUCAO = x.TEMPORESOLUCAO,
                            CodigoRateioFilial = x.CodigoRateioFilial,
                            CodigoRateioCentroCusto = x.CodigoRateioCentroCusto,
                            DataSolicitacao = x.DataSolicitacao
                        }
                    )
                    .Single() 
```

这就是进入数据库的选择

```
 SELECT 
        [Extent1].[Nsu] AS [Nsu], 
        [Extent1].[IdAutor] AS [IdAutor], 
        [Extent1].[NomeDaSolicitacao] AS [NomeDaSolicitacao], 
        [Extent1].[Descricao] AS [Descricao], 
        [Extent1].[Grupo] AS [Grupo], 
        [Extent1].[Atividade] AS [Atividade], 
        [Extent1].[Prioridade] AS [Prioridade], 
        [Extent1].[DataPretendidaPeloAutor] AS [DataPretendidaPeloAutor], 
        [Extent1].[AcompanharViaEmail] AS [AcompanharViaEmail], 
        [Extent1].[IdAnalistaDesignado] AS [IdAnalistaDesignado], 
        [Extent1].[Complexidade] AS [Complexidade], 
        [Extent1].[DataPrevistaPeloAnalista] AS [DataPrevistaPeloAnalista], 
        [Extent1].[SubordinacaoDeSolicitacao] AS [SubordinacaoDeSolicitacao], 
        [Extent1].[COD_FORNECEDOR] AS [COD_FORNECEDOR], 
        [Extent1].[TOLERANCIA] AS [TOLERANCIA], 
        [Extent1].[DESC_COND_PGTO] AS [DESC_COND_PGTO], 
        [Extent1].[FILIAL_FATURAR] AS [FILIAL_FATURAR], 
        [Extent1].[FILIAL_ENTREGA] AS [FILIAL_ENTREGA], 
        [Extent1].[FILIAL_COBRANCA] AS [FILIAL_COBRANCA], 
        [Extent1].[MOTIVO_COMPRA] AS [MOTIVO_COMPRA], 
        [Extent1].[TIPO_SOLICITACAO] AS [TIPO_SOLICITACAO], 
        [Extent1].[FORMA_PGTO] AS [FORMA_PGTO], 
        [Extent1].[MOTIVOCHAMADO] AS [MOTIVOCHAMADO], 
        [Extent1].[TEMPORESOLUCAO] AS [TEMPORESOLUCAO], 
        [Extent1].[CodigoRateioFilial] AS [CodigoRateioFilial], 
        [Extent1].[CodigoRateioCentroCusto] AS [CodigoRateioCentroCusto], 
        [Extent1].[DataSolicitacao] AS [DataSolicitacao]
    FROM [dbo].[tblSolicitacao] AS [Extent1] 
```

你们能想象这个 where 子句被省略的原因吗？也许我的模特课上有什么？

感谢您的支持。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-21T18:03:28.253

该`ToList`调用将整个结果集带入内存，然后您正在执行 where，请尝试以下操作：

```
dbHelpDesk.Chamados
            .Where(x => x.Nsu == NumeroChamado)
            .ToList()
            .Select(x => new ChamadosViewModel ... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-21T18:04:16.963

`.ToList()`你之前用过`.Where(...`. `.ToList()`会在你的情况下抓住整张桌子。只需从您的查询中删除它，您应该会很好。

# c# - 使用 DateTime 值过滤 DataTable

> ID：13499299
> 
> 赞同：3
> 
> 时间：2012-11-21T18:00:44.400
> 
> 标签：c#

更新：

我正在尝试根据特定日期过滤 DataTable。我的数据表有一列“whn”，其中包含日期。数据表中的示例日期：

```
{21/02/2012 10:03:53}   object {System.DateTime} 
```

这是我用来尝试过滤 DataTable 的代码：

```
 String datevalue= "21/02/2012 10:03:53";

  DataRow[] foundRows;
  foundRows = dttemp.Select(String.Format("whn = '{0}'", datevalue)); 
```

但是，这不起作用并返回 0 行。即使我知道存在“datevalue”中包含日期的行。

不确定为什么这不起作用，感谢任何帮助。

谢谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-21T18:33:33.280

如果您想完全匹配提供的 DateTime，包括几分之一秒，您应该使用具有足够精度的 DateTime 格式。可能往返格式（“o”）是一个不错的选择：

```
foundRows = dttemp.Select(String.Format(dttemp.Locale, "whn = '{0:o}'", datevalue)); 
```

但是，您更有可能想要匹配某个范围内的值。例如，如果您希望所有值具有相同的日期，但一天中的任何时间，您可以使用：

```
foundRows = dttemp.Select(String.Format(dttemp.Locale, "whn >='{0:o}' AND whn < '{1:o}'",
      datevalue.Date, datevalue.AddDays(1).Date)); 
```

同样，如果您希望所有值都在同一秒内（但可能只有几分之一秒），您可以使用：

```
DateTime from = dttemp.AddTicks( - (dttemp.Ticks % TimeSpan.TicksPerSecond));
foundRows = dttemp.Select(String.Format(dttemp.Locale, "whn >='{0:o}' AND whn < '{1:o}'",
      from, from.AddSeconds(1))); 
```

对 AddTicks 的调用会将提供的 DateTime 截断为整数秒，如[对此 StackOverflow 问题](https://stackoverflow.com/questions/1004698/how-to-truncate-milliseconds-off-of-a-net-datetime/1005222#1005222)的接受答案中所述。

注意我曾经`dttemp.Locale`使用正确的语言环境 (CultureInfo)，以防您的 DataTable 具有与当前文化不同的语言环境。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-21T18:08:20.693

`foundRows = dttemp.Select("whn LIKE '{0}'",datevalue);`

应该是

`foundRows = dttemp.Select(String.Format("whn LIKE '{0}'",datevalue));`

更多信息在这里[http://www.csharp-examples.net/dataview-rowfilter/](http://www.csharp-examples.net/dataview-rowfilter/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-21T18:17:21.117

使用`=`代替`LIKE`

```
 foundRows = dttemp.Select(String.Format("whn = '{0}'", datevalue)); 
```

# java - 实例检查后不安全的参数化 ArrayList 强制转换

> ID：13499309
> 
> 赞同：-1
> 
> 时间：2012-11-21T18:01:42.847
> 
> 标签：java

大家好，我遇到了不安全的演员表操作的问题。这是问题所在。我必须接受或应该接受不同类型的订单（播放列表、用户操作等）的构造函数。所以我决定给它一个参数作为对象，并检查接收到的类型。问题是其中一个是参数化的 ArrayList ( **ArrayList < PlayList >** )，由于无法检查参数化的 ArrayList 我必须“挖掘”。第一步我检查它是否是一个 ArrayList，然后我进入它检查其内容的类型。之后的问题是我收到一个不安全的演员表警告，我还不知道如何处理。

问候

```
 public Order(int aTyp, Object aOrderContent) {
    this.orderTyp = aTyp;
    if (aOrderContent instanceof ArrayList< ? >) {
        ArrayList<?> objList = (ArrayList< ? >)aOrderContent;
    if (objList.get(0) != null && (objList.get(0)) instanceof PlayList) {
        playList.addAll((ArrayList<PlayList>)aOrderContent) ;
    }        

    } else if (aOrderContent instanceof UserOP) {

    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T18:07:14.573

重新考虑您的设计。不要让构造函数采用`Object`. 这太不透明了，并且允许您的代码的使用者传递任何类型。听起来您应该[改用泛型类](http://docs.oracle.com/javase/tutorial/java/generics/types.html)（尽管根据您的部分示例很难判断）。可能的解决方案：

```
// Might need an upper bound on T if you want to limit the allowed parameterizations
class Order<T> {

    private final int orderTyp;
    private final List<T> someList = new ArrayList<>();

    public Order(int aTyp, List<t> aOrderContent) {
        this.orderTyp = aTyp;
        someList.addAll(aOrderContent);
    }
} 
```

请记住，如果您（在编译时）知道所有可能的类型值，则[使用 an`enum`](http://docs.oracle.com/javase/tutorial/java/javaOO/enum.html)而不是`int`for可能会更好。`orderTyp`

* * *

旁注：如果 a`List`为空，则[`List#get(0)`抛出异常](http://docs.oracle.com/javase/7/docs/api/java/util/List.html#get%28int%29)，不返回`null`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T18:06:34.040

而不是让构造函数接受对象重载，而是构造函数。有一个拿一个`List<?>`，一个拿一个`UserOP`ect。此外，如果所有`List`扩展选项都来自同一界面，那将是理想的，这样您就可以拥有`List<MyInterface>`而不是`List<?>`

# c# - 替换和创建 Windows 快捷方式

> ID：13499316
> 
> 赞同：1
> 
> 时间：2012-11-21T18:02:05.050
> 
> 标签：c#, .net, windows, winforms, winapi

我想在我的应用程序中实现一个代码，让应用程序在用户按下`Windows`++时做出`Shift`反应`X`。那么如何创建使用 Windows 键的快捷方式呢？（我想学习如何替换默认的 Windows 快捷键 - 带有 的快捷键`Windows`）

有人可以帮我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T19:11:08.357

实际上，像 Windows 键这样的键没有 ASCII 值。

完整的答案[在这里](http://forums.bit-tech.net/showthread.php?t=76247)和[这里](http://answers.microsoft.com/en-us/windows/forum/windows_7-desktop/how-do-i-change-the-windows-7-keyboard-shortcuts/0110d32d-66c0-4ce7-8682-eeb896e80c3f)

# php - 添加 PDO 连接后，标头重定向停止工作

> ID：13499327
> 
> 赞同：1
> 
> 时间：2012-11-21T18:03:13.807
> 
> 标签：php, pdo

自从将我的 PDO 连接添加到我的 db connect.php 文件以来，我的所有标头重定向都已停止工作。这是我的连接文件

**连接.php**

```
<?php 

$connect_error = 'Sorry there is a problem with the database connection.';
mysql_connect('Localhost', 'customn7', 'I<3deadlifts!') or die($connect_error);
mysql_select_db('customn7_cm') or die($connect_error) or die($connect_error);
?>

<?php   

//PDO database connect
$config['db'] = array(
    'host'      => 'Localhost',
    'username'  => 'customn7',
    'password'  => 'I<3deadlifts!',
    'dbname'    => 'customn7_cm'
);

try {
$db = new PDO('mysql:host=' .$config['db']['host']. ';dbname=' .$config['db']['dbname'], $config['db']['username'], $config['db']['password']);
$db->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);
$db->exec("SET CHARACTER SET utf8");
} 

catch(PDOException $e) {
echo "ERROR: " . $e->getMessage() . "<br />";
die();
}

?> 
```

这是一个突然不起作用的重定向。此时尚未将 HTML 发送到浏览器。

**登录.php**

```
// Post Selected name to current class.
if (isset($_POST['exist_to_class'])){
if (empty($_POST['client_data']) === true){
    $errors [] = 'You much select a client to be added to the class.';
} else {
    if (isset($_POST['client_data']) && !empty($_POST['client_data']));
    foreach ($_POST['client_data'] as $cd){
     exist_client_to_class($db, $cd);
     header('Location: view_class.php?class_id='.$class_id.' ');
    } // foreach $cd
} // else

} //isset 
```

**初始化文件**

```
<?php
session_start();

error_reporting(E_ALL);
error_reporting(E_NOTICE);

require 'database/connect.php';
require 'functions/users.php';
require 'functions/general.php';
require 'functions/trainer.php';
?> 
```

**连接.php**

```
<?php 

$connect_error = 'Sorry there is a problem with the database connection.';
mysql_connect('Localhost', 'customn7', '**********') or die($connect_error);
mysql_select_db('customn7_cm') or die($connect_error) or die($connect_error);
?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T18:06:59.640

如果你打印一些东西，任何东西，你都不能发送`header`. 您可能需要重新考虑错误处理。

# java - Java - 如何为 2 个类设计一个通用方法

> ID：13499329
> 
> 赞同：2
> 
> 时间：2012-11-21T18:03:17.803
> 
> 标签：java, design-patterns

我有 2 个独立的类，但它们都需要重复做一件事，换句话说，有一个通用的方法。这是方法：

```
private String createButton (String cls, String value) {
        return "<input type=\"button\" class=\"" + cls + 
                   "\" value=\"" + value + "\" key=\"" + this.id + "\" />";
        } 
```

所以这实际上只是一个单行方法，所以我可以将它复制到两个类中。但我想知道是否有更好的方法来做到这一点。很明显，我真的不想有一个只使用这种方法的超类。另外，我认为仅为按钮创建另一个类并执行以下操作很愚蠢：new Button(cls,value)，不是吗？

我想到的另一个选择是为包提供一个实用程序类，并混合使用帮助函数。那有意义吗？正在做吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-21T18:14:45.880

您可以使用实用程序类......但它可能会变得不连贯。

```
public class Utilities {

    /* What do these methods have in common? */

    public String createButton(...) {
        return "<input type='button' />";
    }

    public double calculateCircumference(Circle c) {
        return circle.getRadius() * 2 * Math.PI;
    }

} 
```

这是一种通往[上帝对象](http://en.wikipedia.org/wiki/God_object)的黑暗道路的代码。

相反，请考虑确定“实用程序”类的目的和意图：考虑使其成为工厂——特别是[抽象工厂](http://en.wikipedia.org/wiki/Abstract_factory_pattern)，以保持内聚性。

```
public class HTMLWidgetFactory implements AbstractWidgetFactory<String> { // the interface might be overkill

    /* Oh! This class is clearly used to create HTML controls! */

    public String createButton(...) {
        return "<input type='button' />";
    }

    public String createImage(...) {
        return "<img src='lena.png' />";
    }

} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-21T18:05:24.013

是的，带有辅助函数的实用程序类是正确的方法。您将提出其他要求，这些要求也将是共享实用程序。他们都将进入实用程序类。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-21T18:08:41.753

我建议创建一个实用程序类，具体取决于项目的规模，将一个类与所有广泛使用的助手一起使用会非常有效。这是我将如何去做的一个例子：

```
public class Util{

    private static final Util instance = new Util();

    public static Util getInstance(){
        return instance;
    }

    private Util(){}

    public String createButton (String cls, String value) {
        return "<input type=\"button\" class=\"" + cls + 
               "\" value=\"" + value + "\" key=\"" + this.id + "\" />";
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-21T18:06:19.897

最好的方法是制作一个带有此类帮助方法的类的实用程序包，这些帮助方法将被不同的类重复使用。需求增加，系统扩展。如果可行的话，实用程序包还可以与其他项目集成（可重用性）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-21T18:15:21.037

好吧，您的特定功能不会更改实例的任何属性，您是否可以执行以下操作：

```
public static String createButton (String cls, String value, int id) {
        return "<input type=\"button\" class=\"" + cls + 
                   "\" value=\"" + value + "\" key=\"" + id + "\" />";
        } 
```

# php - 好友系统失效了

> ID：13499330
> 
> 赞同：1
> 
> 时间：2012-11-21T18:03:25.537
> 
> 标签：php, mysqli

现在就是这样，我正在努力制作一个像 facebook 这样的好朋友系统，因为我希望它成为它；

*   看看你是不是朋友，如果是，那么它会说“朋友”
*   如果是这样，你们不是朋友一定有能力申请个人友谊。

**$fra_id**是他作为候选人 **$tid_id**是你想成为他的朋友 **$godkendt_ven**是你是否被批准。如果为 0 表示尚未批准，如果为 1 则为朋友。

```
 if($_SESSION["logged_in"] == true)
            {
                echo "<ul>";
                //Posts to he
                echo "<li class=\"ProfilIndhold_top_b\">Beskede</li>";
                    if ($stmt1 = $this->mysqli->prepare('SELECT `fra_id`, `til_id`, `godkendt_ven` FROM `venner` WHERE `fra_id` = ? OR `til_id` = ?')) { 
                    $stmt1->bind_param('ii', $fra_id, $til_id);
                    $fra_id = $_SESSION["id"];
                    $til_id = $_SESSION["id"];

                    $stmt1->execute();
                    $stmt1->bind_result($fra_id, $til_id, $godkendt_ven);
                        while ($stmt1->fetch()) {
                            /*
                            if($_GET["id"] == $_SESSION["id"])
                            {
                                //can not add myself
                                echo "<li class=\"ProfilIndhold_top_a\">Kan ikke</li>";
                            }
                            */
                            elseif($_GET["id"] != $_SESSION["id"])
                            {
                                if($godkendt_ven == 0 and $til_id != $_GET["id"] or $fra_id != $_GET["id"])
                                {
                                    //Can add to friends
                                    echo "<li class=\"ProfilIndhold_top_a\">Tilføj</li>";
                                }
                                if($godkendt_ven == 1 and $til_id == $_GET["id"] or $fra_id == $_GET["id"])
                                {
                                    //We are friends
                                    echo "<li class=\"ProfilIndhold_top_a\">Venner</li>";
                                }
                            }
                        }
                    $stmt1->close();
                    }
                    else
                    {
                        echo 'There was an error in the declaration: ' . $this->mysqli->error;
                    }
                echo "<ul>";
            }
            //Showing no matter what this content 
```

所以我的问题是您是否可以采取多种方式，例如对示例用户 1 和用户 2 的一项检查是朋友，因此他们将无法再次相互申请。

问题然后你会再次问我是否有任何你想知道的..

**希望你能帮我**

# jquery - 在 iPhone 上，点击外部跨度以将其淡出

> ID：13499334
> 
> 赞同：0
> 
> 时间：2012-11-21T18:03:34.220
> 
> 标签：jquery, iphone, tooltip

我有以下 jQuery 代码，

```
 setTips: function() {
            $(".tooltip").parent().hover(function(){
            //store the tooltip being hovered
            TT.current = $(this);
            TT.timer = setTimeout(function(){
                //find the tooltip
                TT.current.find(".tooltip").fadeIn('fast');
                }, TT.delay);
            }, function(){
                //on mouseout, clear timer and hide tooltip
                clearTimeout(TT.timer);
                $(this).find(".tooltip").fadeOut('fast'); 
```

这在浏览器上运行良好，但在 iphone 上，每当出现工具提示时，都无法隐藏它。

有没有办法在跨度之外点击并让它淡出？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T18:10:26.270

像这样在任何点击时隐藏工具提示的通用点击事件怎么样？

```
$('body').on('click', function(e) {
    if ( $(e.target).hasClass('.element-that-called-tooltip') ) return; // return if the tapped element was one that called the tooltip
    $('.tooltip').fadeOut('fast');
}); 
```

编辑：

所以问题出在iOS悬停事件上。我想说缓解这种情况的最好方法是使用特征检测（使用像[Modernizr](http://modernizr.com/)这样的库），并为非触摸设备绑定悬停事件，并为触摸设备绑定点击事件。

jsFiddle：http: [//jsfiddle.net/RAJ5Q/1/](http://jsfiddle.net/RAJ5Q/1/)

```
if ( $('html').hasClass('no-touch') ) {
    // bind to hover
}
else {
    // bind to click
} 
```

# c# - 每次都有新实例？

> ID：13499336
> 
> 赞同：2
> 
> 时间：2012-11-21T18:03:44.060
> 
> 标签：c#

在下面的代码中，哪个更好？从 CardPanelDesigner_AddPage 中调用添加页面？还是使用 Func TransactionFunction??

基本上我想知道每次执行内部函数是否会创建一个“新函数”：SI 甚至不知道我在问什么。

执行内部功能是否有开销，还是应该使用 addpage？

```
 private object AddPage(IDesignerHost Host, object Sender)
    {
        return null;
    }

    private void CardPanelDesigner_AddPage(object sender, EventArgs e)
    {
        IDesignerHost DesignerHost = (IDesignerHost)GetService(typeof(IDesignerHost));
        if (DesignerHost != null)
        {
            Func<IDesignerHost, object, object> TransactionFunction = (Host, Param) =>
            {
                return null;
            };

            TransactionInfo("Add Page", DesignerHost, AddPage); //Add page? OR TransactionFunction? :S
        }
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-21T18:06:58.000

是的，`TransactionFunction`每次`CardPanelDesigner_AddPage`调用都会创建一个新对象。然而，这样做的性能开销可能可以忽略不计。你应该做任何对你（和你的团队）最有利的事情。

# c# - 在 jQuery / Javascript 中增加 POST 数据大小

> ID：13499337
> 
> 赞同：2
> 
> 时间：2012-11-21T18:03:48.197
> 
> 标签：c#, javascript, jquery, json, web-services

> **可能重复：**
> [我可以在 web.config 中为 maxJsonLength 设置无限长度吗？](https://stackoverflow.com/questions/1151987/can-i-set-an-unlimited-length-for-maxjsonlength-in-web-config)

我的 .aspx 页面中有一个脚本，该脚本将信息发送到后端 .cs 页面。在大多数情况下，概念都是简单且最糟糕的，除非数据太大。如何在**不修改 web.config**的情况下增加“数据”变量可以容纳的容量？请看下面的代码。

**.ASPX**

```
<script type="text/javascript">
    $(document).ready(function () {
        var note = "";
        for (var i = 0; i < 200000; i++)
            note = note + "x";

        $.ajax({
            type: "POST",
            url: "GroupDetailsDisplayPlus.aspx/UpdateRecord",
            data: "{note: \"" + note + "\"}",
            contentType: "application/json; charset=utf-8",
            dataType: "json",
            success: function (msg) {
                var response = msg.d;
                alert("success");
                }
            error: function (request, status, thrownError) {
                //alert(request.thrownError); // short version
                alert(request.responseText);  // long version
            }
        });
    });
</script> 
```

**。CS**

```
 [System.Web.Services.WebMethod]
    public static string UpdateRecord(string note)
    {
        return note;
    } 
```

此代码已简化，我的目的是将这个大字符串存储在数据库中（省略代码）。如果我将 for 循环设置为仅执行 100,000 次循环，则此方法有效。但是，将其增加到 200,000 个循环失败并显示错误消息：

> {"Message":"使用 JSON JavaScriptSerializer 进行序列化或反序列化时出错。字符串的长度超过了 maxJsonLength 属性上设置的值。\r\n参数名称: 输入","StackTrace": 在 System.Web.Script。 Serialization.JavaScriptSerializer.Deserialize(JavaScriptSerializer 序列化程序，字符串输入，类型类型，Int32 depthLimit)\r\n 在 System.Web.Script.Serialization.JavaScript Serializer.Deserialize[T](字符串输入)\r\n 在 System.Web .Script.Service.RestHandler.ExecuteWebServiceCall(HttpContext context, WebServiceMethodData methodData)","ExceptionType":"System.ArgumentException"}

感谢您的任何帮助。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-21T18:05:54.710

试试这个：

```
<system.web.extensions>
    <scripting>
      <webServices>
        <jsonSerialization maxJsonLength="500000">
        </jsonSerialization>
      </webServices>
    </scripting>
</system.web.extensions> 
```

还有这个：

```
<system.web>
  <httpRuntime requestValidationMode="2.0" executionTimeout="600" maxRequestLength="2000000" />
<system.web> 
```

或划分您的数据并逐部分发送：

```
var portionIndex = 0;
var porions = new Array();
for(i = 0; i < 5; i++)
{
    var note = '';
    for (var j = 0; j < 40000; j++) note += "x";
    portions.push(note);
}

SendPortion();

function SendPortion()
{
        $.ajax({
            type: "POST",
            url: "GroupDetailsDisplayPlus.aspx/UpdateRecord",
            data: {porionsCount: porions.length, portion: porions[portionIndex] },
            contentType: "application/json; charset=utf-8",
            dataType: "json",
            success: function (msg) {
                portionIndex++; 
                if(portionIndex < porions.length) 
                    SendPortion();
            }
            error: function (request, status, thrownError) {}
        });
} 
```

# c++ - C++11 正则表达式子字符串匹配

> ID：13499338
> 
> 赞同：2
> 
> 时间：2012-11-21T18:04:04.830
> 
> 标签：c++, regex, string, c++11, substring

我正在寻找 C++11 中的正则表达式，它可以匹配字符串中的子字符串。

类似的东西： `"It´s a dark night out there..."`我正在寻找`ark`

因此，如果子字符串位于字符串中的某个位置，则此表达式应匹配。此外，我想选择说这个匹配是否区分大小写。

我已经尝试过这个，但它似乎不起作用......

```
string str = "It´s a dark night out there...";
regex ex ("ark"); 
if (regex_match (str,ex))
    cout << "Match found!"; 
```

有人知道这样的事情吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-21T18:12:21.517

使用[`regex_search`](http://en.cppreference.com/w/cpp/regex/regex_search)而不是[`regex_match`](http://en.cppreference.com/w/cpp/regex/regex_match). 后者尝试匹配整个主题字符串，而前者允许匹配子字符串。

这里是可能的[标志](http://en.cppreference.com/w/cpp/regex/syntax_option_type)，其中一个（第一个）表示不区分大小写的匹配。

# matlab - 相对频率直方图和概率密度函数

> ID：13499339
> 
> 赞同：0
> 
> 时间：2012-11-21T18:04:02.017
> 
> 标签：matlab, histogram, probability, dice

名为 DicePlot 的函数模拟掷 10 个骰子 5000 次。

该函数计算每个掷骰的 10 个骰子的值的总和，这将是一个 1 ⇥ 5000 向量，并绘制相对频率直方图，其中选择了 bin 的边缘，其中直方图中的每个 bin 代表总和的可能值的骰子。

将计算 1 ⇥ 5000 骰子值之和的平均值和标准偏差，并在相对频率直方图之上绘制正态分布的概率密度函数（计算平均值和标准偏差）。

到目前为止，以下是我的代码-我做错了什么？图表显示了，但顶部没有额外的红线？我看了这样的答案，我认为我不会绘制像高斯函数这样的东西。

```
% function[]= DicePlot()
for roll=1:5000
    diceValues = randi(6,[1, 10]);
    SumDice(roll) = sum(diceValues);
end
distr=zeros(1,6*10);
for i = 10:60
    distr(i)=histc(SumDice,i);
end
bar(distr,1)
Y = normpdf(X)
xlabel('sum of dice values')
ylabel('relative frequency')
title(['NumDice = ',num2str(NumDice),' , NumRolls = ',num2str(NumRolls)]); 
  end 
```

它应该看起来像 ![在此处输入图像描述](../Images/e589133a449a819af52767475521ece8.png)

但它看起来像

![在此处输入图像描述](../Images/b700d2b236c9b758cccf12bcf454ff9b.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T19:39:43.570

这里有一些代码可以让你朝着正确的方向前进：

```
% Normalize your distribution 
normalizedDist = distr/sum(distr);
bar(normalizedDist ,1); 
hold on

% Setup your density function using the mean and std of your sample data
mu   = mean(SumDice);
stdv = std(SumDice);
yy   = normpdf(xx,mu,stdv);
xx   = linspace(0,60);

% Plot pdf
h = plot(xx,yy,'r'); set(h,'linewidth',1.5); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-21T19:36:01.960

The red line is not there because you aren't plotting it. Look at the documentation for `normpdf`. It computes the pdf, it doesn't plot it. So you problem is how do you add this line to the plot. The answer to that problem is to google "matlab hold on".

# c# - 搜索表单提交后，URL中没有搜索参数

> ID：13499344
> 
> 赞同：0
> 
> 时间：2012-11-21T18:04:26.547
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-3, razor, asp.net-mvc-routing

我有一个这样的搜索表单：

```
<form action="@Url.Action("Search", "Items", null, null)" method="POST">
                    <input type="search" placeholder="Search" name="q" value="some search term">
                     <input type="hidden" name="city" value="london" />    
                </form> 
```

这个调用“ `Search`”动作方法：

```
public ActionResult Search(string city, string q)
        {
            ...
            return View(model);
        } 
```

在这里，我收到了两个值并且搜索都很好。 **但**我浏览器中的网址是：

```
http://localhost/mysite/item/Search?city=london 
```

如您所见，我在 URL 中缺少“q”参数。
我在这里做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T18:07:34.973

搜索字段的输入类型必须是文本，而不是搜索。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-21T18:21:50.103

您的表单方法是 POST，因此不会通过查询字符串发送值。将 POST 更改为 GET，您应该会看到它们。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-21T18:22:03.747

尝试关闭标签`<input ... />`

```
<input type="text" placeholder="Search" name="q" value="some search term" /> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-05-24T08:09:04.750

你可以按照我的例子：

模型：

```
public class SearchModel{
  public String City { get; set; }
  public String Q { get; set; }
} 
```

看法：

```
@model SearchModel
@using (@Html.BeginForm("Search", "Items", FormMethod.Post, new {@id = "Form"})) {
   @Html.HiddenFor(m => m.City)
   @Html.HiddenFor(m => m.Q)
} 
```

控制器：

```
[HttpGet]
public ActionResult Search(string city, string q)
{
  var model = new SearchModel {
       City = "london",
       Q = "some search term"
  };
  return View(model);
}

[HttpPost]
public ActionResult Search(SearchModel model)
{
  //.....
  return View(model);
} 
```

# php - 如何将 somedomain.com/free/single/result_id 重写为 somedomain.com/f/single/result_id

> ID：13499347
> 
> 赞同：1
> 
> 时间：2012-11-21T18:04:33.047
> 
> 标签：php, .htaccess, mod-rewrite, rewrite

我很难理解`rewrite`。

我正在尝试使 URL`somedomain.com/f/single/1`能够从中获取结果`somedomain.com/free/single/1`

我试过以下。

```
RewriteRule ^/f$ /free$1 [L] 
```

这是我现有 .htaccess 的副本，其中包含 Kamil 提出的建议...

```
RewriteEngine on 
RewriteCond $1 !^(index\.php|assets|robots\.txt) 
RewriteRule ^(.*)$ index.php/$1 [L] 
RewriteRule ^f/(.+)$ /free/$1 [L] 
```

我想知道问题是否是我已经在 /free 之前删除了 index.php ？

谁能帮我理解我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T19:04:04.410

您寻找以下规则：

```
RewriteRule ^f/(.+)$ /free/$1 [L] 
```

第一部分`^f/(.+)$`是[正则表达式](http://en.wikipedia.org/wiki/Regular_expression)- 它匹配所有以开头的字符串`/f/`并将其余部分存储到`$1`... 然后将其重写为`/free/`并将其余部分存储在`$1`.

# jsplumb - jsPlumb删除元素的连接

> ID：13499352
> 
> 赞同：1
> 
> 时间：2012-11-21T18:04:52.187
> 
> 标签：jsplumb

我正在处理一个 jsPlumb 问题。当我尝试以编程方式删除所有元素连接时，我得到 Uncaught TypeError: Cannot read property 'left' of undefined

我有几个“节点”（html 元素），每个节点都有 1 个输入端点（一个接受的端点）和 n 个输出端点。每个节点后面还有一个 javascript 对象。我的软件中有一个“选定”状态。用户可以选择多个节点，并将对象推送到一个名为 selected 的数组中。我有一个删除键的键监听器。当按下该键时，它会遍历选定的节点，删除它们并移除它们的端点。当没有连接时，这很好用，但是当有连接时，我会出错。

输出端点附加到主节点的子 HTML 元素...</p>

有很多代码可以做很多事情，但我会尝试分享相关部分：

```
 function Node(jsonFromServer){
      /* … this is the constructor method… some code omitted*/
     this.endpoints = [];
     this.endpoints.push(jsPlumb.addEndpoint(this.el.attr("id"),targetEndpoint,{anchor:"TopCenter",uuid: this.el.attr("id") + "TopCenter"}));
     this.addConnectionEndpoints();
 }

Node.prototype.addConnectionEndPoints = function(){
    //omitting code… loops through 'connections' that don't have 'has endpoint' marked….
    this.endpoints.push(jsPlumb.addEndpoint(connection['el'].attr("id"),sourceEndpoint,{anchor:"RightMiddle",uuid:connection['el'].attr("id")+"RightMiddle"}));
    connection.hasEndPoint = true;
} 
```

这就是设置。这是我删除的方法

```
when key pressed
    If key is delete /* all this stuff works */
        loop through selected array (the array of selected Node elements:works)
            node.el.hide(250).remove();
            loop through node's endpoints array
                 //endpoint is the correct object... proved with console.log
                 //the following line is the error
                 jsPlumb.deleteEndpoint(endpoint); 
            ajax call to server to delete stuff on the backend 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T18:04:52.187

修复！当我说 node.el.hide(250).remove(); 我删除了删除过程中所需的 html 元素。我将删除部分移到 ajax 请求的回调中，它就像一个魅力。

# java - keytool md5 哈希 ascii？

> ID：13499354
> 
> 赞同：0
> 
> 时间：2012-11-21T18:04:56.340
> 
> 标签：java, android, facebook, keystore, keytool

我无法从我的密钥库中获取 md5 哈希（ascii），我只是得到一个十六进制指纹，但不知道如何获得正确的 ascii md5 以放入 facebook android 应用程序。

我刚刚阅读了很多关于使用 jdk 1.6 的信息，但我得到了相同的结果。

问候

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T18:38:32.737

你应该发布更多关于你到目前为止的信息，但这是我总是用来获取我的密钥哈希的说明：

您应该验证 ~/.android/debug.keystore 是否存在，并且 keytool 和 openssl 已安装在您的机器上。

在终端中运行以下命令：

`keytool -exportcert -alias MY_ALIAS_HERE -keystore ~/path/to/my/android.keystore | openssl sha1 -binary | openssl base64`

当提示输入密码时，输入`android`.

如果它仍然不起作用，请不要担心！我们的[文档](https://developers.facebook.com/docs/mobile/android/build/#sig)还通过遵循本教程提供了另一种选择：

通过修改 Util.java 在我们的 Android SDK 中启用调试：

私有静态布尔 ENABLE_LOG = true;

按照步骤 6.1 到 6.3 进行操作，主要是确保您的应用具有访问 Internet 的权限，并且启用了 SSO。

在您的手机或模拟器上构建并运行该应用程序。您应该看不到权限对话框，因为您没有在应用程序的仪表板中输入应用程序签名。通过 logcat 检查 Android SDK 调试日志（因为您在步骤 1 中启用了日志记录），并查看您的日志条目中是否存在“Android 密钥不匹配”条目。此错误还会为您提供发送到 Facebook 的密钥。记下密钥的值并将其输入您的 Facebook 应用设置，并确保保存您的设置。

通过修改 Util.java 在 SSO 成功完成后关闭调试：

私有静态布尔 ENABLE_LOG = false;

让我知道这是否有帮助！

# php - 从存储在数据库中的字符串调用 smarty 块

> ID：13499355
> 
> 赞同：0
> 
> 时间：2012-11-21T18:04:56.417
> 
> 标签：php, database, smarty

嗨，有没有办法从存储在数据库中的字符串调用 smarty 插件或块？我试过 {eval} 效果很好，但我无法在字符串中选择的地方加载插件。

例子：

```
text
{contact_form}
text
picture
{register_form} 
```

我得到：

```
text
text
picture
{contact_form}
{register_form} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T19:54:23.053

您可以在模板代码前添加 'string:' 并将其传递给 fetch() 而不是实际的模板文件：

```
$tpl = <<<EOT
text
{contact_form}
text
picture
{register_form}
EOT;

echo $smarty->fetch('string:' . $tpl); 
```

# python - 函数内的变量不会在每次函数调用时重新创建

> ID：13499356
> 
> 赞同：1
> 
> 时间：2012-11-21T18:04:59.270
> 
> 标签：python, function, variables, scope, python-2.7

我正在回答[这个问题](https://stackoverflow.com/questions/13498882/translate-letters-to-numbers-using-python)，我的解决方案如下（我没有发布这个答案）：

```
def wordigit(w):
    digits = {}
    c = itertools.count(1)
    for char in w:
        if w not in digits:
            digits[char] = c.next()
    return ''.join(str(i) for i in (digits[char] for char in w))

print ' '.join(wordigit(w) for w in s.split()) 
```

乍一看，这看起来是对的。但是我得到了一个错误的结果：

```
In [236]: ' '.join(wordigit(w) for w in s.split())
Out[236]: '12345 14345 33345' # notice the numbers in the second "word". 1-4 is not a legal progression for itertools.count. It should have been 12324 instead of 14345 
```

我在 IPython 中开发了这个解决方案。考虑到这可能是 IPython 在后台进行了一些优化的错误，我启动了一个 python 解释器来查看它的内容。我还认为列表理解可能会导致一些异常行为。所以我尝试调用`wordigit`两次 - 在两个不相等的字符串中的每一个上调用一次，并得到以下结果：

```
>>> def wordigit(w):
...     digits = {}
...     c = itertools.count(1)
...     for char in w:
...         if w not in digits:
...             digits[char] = c.next()
...     return ''.join(str(i) for i in (digits[char] for char in w))
... 
>>> wordigit('areyo')
'12345'
>>> wordigit('uanap')
'14345' 
```

所以看起来即使我`itertools.count`在函数中创建了对象（因此函数应该在每次运行时重新创建它），它在函数返回后仍然存在，并且在再次调用函数时无需重新初始化即可重用。同样，很明显，`dict`“数字”`wordigit`也是如此。

这是怎么回事？不知何故，这种行为对我来说没有意义。

我注意到 Ipython 中的 Python 2.7.1 和新的 Python 2.7.3 解释器的这种行为

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-21T18:09:20.770

这看起来不对：

```
for char in w:
    if w not in digits:
      ^^^ 
```

也许：

```
for char in w:
    if char not in digits: 
       ^^^^ 
```

# html - 同一个按钮，每次点击执行另一个功能......如何？

> ID：13499362
> 
> 赞同：0
> 
> 时间：2012-11-21T18:05:15.500
> 
> 标签：html, button

我有一个有多种语言的网站，目前语言栏显示在网站顶部，每种语言都有一个按钮。我更喜欢的是一个按钮，单击一次，按钮图像变为英国国旗标志，并调用英语，再次按下，按钮图像变为法语，调用法语等。

这是一个按钮，多个呼叫可能吗？谁能给我一个开始研究这个的好地方？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T18:34:05.280

对的，这是可能的。你`html`会看起来像这样：

```
<button id='changeLang' onclick='changeLang()'></button> 
```

（请记住将其设置为默认值）

和你的 javascript：

```
 var counter = 0;
    function changeLang(){
       var buttonDetails = document.getElementById('changeLang');
       buttonDetails.innerHTML = "";
       switch(counter){

          case 0:
             buttonDetails.innerHTML = "<img src='unionJack.png' />English";
             counter +=1;
             break;
          case 1:
             buttonDetails.innerHTML = "<img src='frenchFlag.png' />French";
             counter +=1;
             break;
          case 2:
             //continue like above
          default:
             counter = 0;
             changeLang();
   }
} 
```

如果您需要另一种语言，只需将其添加到交换机即可。

或者，将案例代码更改为：

```
case 0:
   buttonDetails.src = "unionJack.png";
   counter +=1;
   break; 
```

并删除说明`buttonDetails.innerHTML = "";`您是否想要的只是图像的行。

要调用函数来更改语言，您只需将函数调用添加到您的开关案例之一，如下所示：

```
case 0:
   buttonDetails.innerHTML = "<img src='unionJack.png' />English";
   counter +=1;
   foo(bar);     //just add your function call
   break; 
```

# python - 查找公共数据python

> ID：13499366
> 
> 赞同：0
> 
> 时间：2012-11-21T18:05:28.233
> 
> 标签：python, python-3.x

使用

```
def compare_lsts(list1,list2):
    first_set = set(list1)
    second_set=set(list2)
    results =[x for x in list1 if x in list2]
    print(results) 
```

和 running`compare_lsts([1,2,3,4,5],[3,8,9,1,7])`给出了两组中包含的数字，即`[1,3]`。

但是，使列表 1 包含超过 1 个列表，例如`compare_lsts([[1,2,3,4,5],[5,8,2,9,12],[3,7,19,4,16]],[3,7,2,16,19])`给出`[],[],[]`。

我在 list1 中使用了列表，然后是循环的结果。我显然不知道我在做什么。

基本上问题是：如何将一个静态列表中的项目与尽可能多的列表进行比较？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T18:23:05.963

首先，您已经开始使用集合，因此您绝对应该使用它们，因为它们在检查遏制时更快。此外，集合已经有一些有用的内置功能，因此为了比较两个列表，您可以将集合相交以获得两个列表中的项目：

```
>>> set1 = set([1, 2, 3, 4, 5])
>>> set2 = set([3, 8, 9, 1, 7])
>>> set1 & set2
{1, 3}
>>> list(set1 & set2) # in case you need a list as the output
[1, 3] 
```

同样，您还可以找到两个集合的并集以获取任何集合中的那些项目：

```
>>> set1 | set2
{1, 2, 3, 4, 5, 7, 8, 9} 
```

因此，如果您想从 list2 中查找位于 list1 的任何子列表中的所有项目，则可以将所有子列表与 list2 相交，然后合并所有这些结果：

```
>>> sublists = [set([1, 2, 3, 4, 5]), set([5, 8, 2, 9, 12]), set([3, 7, 19, 4, 16])]
>>> otherset = set([3, 7, 2, 16, 19])
>>> intersections = [sublist & otherset for sublist in sublists]
>>> intersections
[{2, 3}, {2}, {16, 3, 19, 7}]
>>> union = set()
>>> for intersection in intersections:
        union = union | intersection
>>> union
{16, 19, 2, 3, 7} 
```

您也可以使用以下方法做得更好`functools.reduce`：

```
>>> import functools
>>> functools.reduce(set.union, intersections)
{16, 19, 2, 3, 7} 
```

同样，如果您想实际与这些结果相交，您也可以这样做：

```
>>> functools.reduce(set.intersection, intersections)
set() 
```

最后，您可以将所有内容打包到一个不错的函数中：

```
def compareLists (mainList, *otherLists):
    mainSet = set(mainList)
    otherSets = [set(otherList) for otherList in otherLists]

    intersections = [mainSet & otherSet for otherSet in otherSets]
    return functools.reduce(set.union, intersections) # or replace with set.intersection 
```

并像这样使用它：

```
>>> compareLists([1, 2, 3, 4, 5], [3, 8, 9, 1, 7])
{1, 3}
>>> compareLists([3, 7, 2, 16, 19], [1, 2, 3, 4, 5], [5, 8, 2, 9, 12], [3, 7, 19, 4, 16])
{16, 19, 2, 3, 7} 
```

请注意，我替换了函数中参数的顺序，因此首先提到了主列表（在您的情况下为*list2*），因为这是与其他列表进行比较的列表。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T18:19:54.017

不确定这是否是最好的方法，但是：

```
def flat(l):
    c_l = []
    for i in l:
        if isinstance(i,list):
            map(c_l.append,i)
        else:
            c_l.append(i)
    return c_l

def compare_lsts(a,b):
    if all([True if isinstance(x,list) else False for x in a]): #if there is sublists in a
        a = flat(a) #flats a

    if all([True if isinstance(x,list) else False for x in b]): #if there is sublists in b
        b = flat(b) #flats b

    return list(set(a) & set(b)) #intersection between a and b

print (compare_lsts([[1,2,3,4,5],[5,8,2,9,12],[3,7,19,4,16]],[3,7,2,16,19]) #[16, 3, 2, 19, 7]) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-21T18:37:49.253

如果您在**所有**列表中的第一个元素之后：

```
set(first).intersection(second, third) # fourth, fifth, etc...
>>> set([1, 2, 3]).intersection([2, 3, 4], [3, 4, 5])
set([3]) 
```

如果您在**任何**其他列表中的第一个元素之后：

```
>>> set([1, 2, 3]) & set([4]).union([5])
set([2]) 
```

所以，然后是一个简单的函数：

```
def in_all(fst, *rst):
    return set(fst).intersection(*rst)

def in_any(fst, *rst):
    it = iter(rst)
    return set(fst) & set(next(it, [])).union(*it) 
```

# redirect - python urllib.request 没有得到与我的浏览器相同的 html

> ID：13499367
> 
> 赞同：2
> 
> 时间：2012-11-21T18:05:27.820
> 
> 标签：redirect, python-3.x, user-agent, urllib

尝试使用以下 python 代码获取[http://groupon.cl/descuentos/santiago-centro的 html 代码：](http://groupon.cl/descuentos/santiago-centro)

```
import urllib.request
url="http://groupon.cl/descuentos/santiago-centro"
request = urllib.request.Request(url, headers = {'user-agent' : 'Mozilla/4.0 (compatible; MSIE 5.5; Windows NT)'})
response = urllib.request.urlopen(request)
return response.read().decode('utf-8') 
```

我正在获取询问我位置的页面的 html 代码。如果我用浏览器手动打开相同的链接（不涉及 cookie，即使是最近安装的浏览器），我会直接进入折扣促销页面。似乎是一些针对 urllib 没有发生的重定向操作。我正在使用用户代理标头来尝试获取典型浏览器的行为，但我没有运气。

如何获得与浏览器相同的 html 代码？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T14:08:48.227

我认为您可以运行以下命令：

```
wget -d http://groupon.cl/descuentos/santiago-centro 
```

您将看到 wget 打印两个 http 请求并将响应页面保存到文件中。

```
 -   HTTP/1.1 302 Moved Temporarily
 -   HTTP/1.1 200 OK 
```

并且文件的内容是你想要的 html 代码。

第一个响应代码是 302，`urllib.requst.urlopen`第二个请求也是如此。但是它没有设置从第一个响应中获取的正确 cookie，服务器无法理解第二个请求，所以你得到另一个页面。

http.client 模块不自己处理 301 或 302 http 响应。

```
import http

conn = http.client.HTTPConnection("groupon.cl")
#do first request
conn.request("GET", "/descuentos/santiago-centro")
print(conn.status)  # 301 or 302
print(conn.getheaders()) # set-Cookie

#get the cookie
headers = ....
#do second request

conn.requesst("GET", "/", headers)
......
......
#Get response page. 
```

# zend-framework - 让我的 ZF 应用程序查看我的子域路由

> ID：13499368
> 
> 赞同：2
> 
> 时间：2012-11-21T18:05:44.097
> 
> 标签：zend-framework, routing, subdomain

我正在开发一个使用 Zend_Hostname_Router_Route 的项目。

我的应用程序相当简单。我有一个名为 dev 的模块，我想将其路由到 dev 子域。我在这里和其他网站上阅读了几篇文章，试图了解问题所在。

我正在为我的应用程序使用 ZF 1.12。我在 appllication.ini 文件中使用 Zend_Hostname_Router_Route，如下所示：

```
 [production]

    phpSettings.display_errors = 0
    includePaths.library = APPLICATION_PATH "/../library"
    bootstrap.path = APPLICATION_PATH "/Bootstrap.php"
    bootstrap.class = "Bootstrap"
    appnamespace = "Application"
    resources.frontController.controllerDirectory = APPLICATION_PATH "/controllers"
    resources.frontController.moduleDirectory = APPLICATION_PATH "/modules" 
    resources.frontController.params.displayExceptions = 0
    resources.layout.layoutPath = APPLICATION_PATH "/layouts/scripts/"
    resources.view[] =
    resources.view.encoding = "UTF-8"
    resources.view.doctype = "HTML5"
    resources.view.contentType = "text/html; charset=UTF-8"
    phpSettings.display_startup_errors = 1
    phpSettings.display_errors = 1
    resources.db.adapter = "PDO_SQLITE"
    resources.db.params.dbname = APPLICATION_PATH "/../data/db/guestbook.db"  

         [development:production]

    phpSettings.display_startup_errors = 1
    phpSettings.display_errors = 1
    resources.frontController.params.displayExceptions = 1
    resources.db.adapter = "PDO_SQLITE"
    resources.db.params.dbname = APPLICATION_PATH "/..application/db/guestbook-dev.db"

    resources.router.routes.type = "Zend_Controller_Router_Route_Hostname"
    resources.router.routes.route = "dev.michaeldrowan.com"
    resources.router.routes.chains.dev.type = "Zend_Controller_Router_Route"
    resources.router.routes.chains.dev.route = ":controller/:action/"
    resources.router.routes.chains.dev.defaults.module = "dev"
    resources.router.routes.chains.dev.defaults.controller = "index"
    resources.router.routes.chains.dev.defaults.action = "index" 
```

ZF 快速入门教程中的应用程序。所以我不应该在设置它时遇到问题。我试过两个index.php。在 public_html 中打开，在下面文件夹的子域中打开（这是我的主机放入的位置）。子域中的索引指向开发模块..我也尝试了这样做的方式，这就是 zf 快速入门教程的方式

```
 <?php
   // Define path to application directory
    defined('APPLICATION_PATH')
        || define('APPLICATION_PATH', realpath(dirname(__FILE__) . '/../michaeldrowan   /application/'));

   // Define application environment
   defined('APPLICATION_ENV')
      || define('APPLICATION_ENV', (getenv('APPLICATION_ENV') ? getenv('APPLICATION_ENV')  : 'production'));

   // Ensure library/ is on include_path
    set_include_path(implode(PATH_SEPARATOR, array(
    realpath(APPLICATION_PATH . '/../../library'),
    get_include_path(),
)));

    /** Zend_Application */
   require_once 'Zend/Application.php';

    // Create application, bootstrap, and run
    $application = new Zend_Application(
    APPLICATION_ENV,
    APPLICATION_PATH . '/configs/application.ini'
);
?> 
```

dev 中的索引是：

```
<?php

// Define path to application directory
defined('APPLICATION_PATH')
    || define('APPLICATION_PATH', realpath(dirname(__FILE__) . '/../application/'));

// Define application environment
defined('APPLICATION_ENV')
    || define('APPLICATION_ENV', (getenv('APPLICATION_ENV') ? getenv('APPLICATION_ENV') : 'development'));

// Ensure library/ is on include_path
set_include_path(implode(PATH_SEPARATOR, array(
    realpath(APPLICATION_PATH . '/../library'),
    get_include_path(),
)));

/** Zend_Application */
require_once 'Zend/Application.php';

// Create application, bootstrap, and run
$application = new Zend_Application(
    APPLICATION_ENV,
    APPLICATION_PATH . '/configs/application.ini'
);
$application->bootstrap()
            ->run();
?> 
```

我试图通过将“生产”更改为“开发”来指向两者中的模块。我什至尝试过“开发：生产”

我还尝试将应用程序指向模块配置，并尝试将应用程序设置为模块。

我已经没有东西可以尝试了。我希望有一个人可以帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T14:49:25.173

如果您使用的是 Apache，请将其写入您的 .htaccess

```
RewriteCond %{HTTP_HOST} ^([a-zA-Z\-\.]+)\.yoursite\.com$ [NC]
RewriteRule ^(.*)$ index.php?someparam=%1 [QSA] 
```

然后您可以在 IndexController 中访问子域名：

```
if ($this->getRequest()->getParam('someparam') == 'dev') {
  // use routing
} 
```

# performance - OpenCV findChessboardCorners 很慢

> ID：13499371
> 
> 赞同：2
> 
> 时间：2012-11-21T18:05:54.027
> 
> 标签：performance, opencv, feature-detection

任何人都知道为什么**cv::findChessboardCorners**在所有超过百万像素（> 1 000 000 像素）的图像上都非常慢。

作为一种解决方法，我对图像进行下采样以适应这个界限，但我想知道它是否可以更“优雅”地解决。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T18:10:10.200

没有深入研究原因 - 我从头开始编写了一个更快的方形查找器。

circleGrid 提供了更好的结果并且速度更快，它使用新的 BlobDetector 接口。

# javascript - onkeyup 事件上文本框的正则表达式

> ID：13499376
> 
> 赞同：0
> 
> 时间：2012-11-21T18:06:18.943
> 
> 标签：javascript, regex

我还没有掌握 regexp 的语法，我需要一个用于文本框的 keyup 事件的正则表达式，它可以验证这个抽象模式：

```
d1d2/d3d4 
```

*d1* : 0 或 1 的数字

*d2* : 一个数字

(d1d2) 形成一个月

'/' 是分隔符

*d3* : 一个数字

*d4* : 一个数字

(d3d4) 形成 2 位数字的年份，即 12 -> 2012

任何人都可以为该验证制作一个智能正则表达式吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T18:09:24.970

你可以写：

```
/^(?:0[1-9]|1[012])\/[0-9][0-9]$/ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T18:42:43.787

使用正则表达式模式

```
^(?:0[1-9]|1[0-2])\/\d{2}$ 
```

# c++ - 是否可以使用 boost 来序列化和打印多态类？

> ID：13499378
> 
> 赞同：0
> 
> 时间：2012-11-21T18:06:32.097
> 
> 标签：c++, boost, boost-serialization, boost-fusion

是否有一种使用 boost 进行编组/解组以及带有字段名称（RTTI？）的漂亮打印结构的最小方法？似乎您可以使用[`boost::fusion`](http://www.boost.org/doc/libs/1_52_0/libs/fusion/doc/html/index.html)然后以某种方式[`boost::serialization`](http://www.boost.org/doc/libs/1_52_0/libs/serialization/doc/index.html)使用函数自动实现接口`boost::fusion`，但我不确定如何处理这个问题，或者是否可能。

# url-routing - 路由可以以变量开头吗？

> ID：13499379
> 
> 赞同：4
> 
> 时间：2012-11-21T18:06:32.200
> 
> 标签：url-routing, servicestack

这个 DTO

```
[Route("/{Module}/{Name}")]
public class ViewEntityList {
    public string Module { get; set; }
    public string Name { get; set; }
} 
```

导致我的应用程序在启动时出错

> 类型“ViewEntityList”上的 RestPath“/{Module}/{Name}”无效

我可以将路线更改为以文字（例如）开头，`/Entity/{Module}/{Name}`但这不是我想要的；此外，我的 URL 开始看起来过长且不像 REST。

是否可以使用变量开始路线？如果没有，是否有另一种方法可以将任何包含两个部分的路线映射到特定的 DTO？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T12:14:28.910

我总是做以下事情：

```
 //Configure User Defined REST Paths
        Routes
            .Add<DTO1>("/service/function/{argument}")
            .Add<DTO2>("/service/commonsegment/{Function*}") 
```

DT1 的映射是“基本”映射，一个 URL 对应一个 DTO。

在 DTO2 中，您将需要一个名为“Function”的键，它将为您提供 URL 的第一个“非常见”段的名称，如果可能，URL 中预设的任何其他段将映射到您的 DTO2（如果有匹配的属性）。通过这种方式，您可以在不更改 Web 服务器本身的情况下接受新功能/参数，而只需更改支持实现（可以/应该位于外部 dll 上）。

我希望这有帮助。

# jquery - jQuery 可以在 Chrome 打包应用程序中使用吗？

> ID：13499382
> 
> 赞同：2
> 
> 时间：2012-11-21T18:06:40.880
> 
> 标签：jquery, google-chrome, html, hide

我正在使用一些 javascript 或 jQuery 代码使用导航栏在我的应用程序中隐藏和显示不同的 div。它在浏览器（Safari、Chrome、Firefox）中运行良好，但是当我将它作为自己的窗口作为 chrome 应用程序运行时，一切都搞砸了。单击导航项会将我从页面跳转到 div，而不是隐藏当前项并在其位置显示选定的项。

这是我正在使用的 jQuery 代码，有什么想法为什么它不能正常工作吗？或者 jQuery 不能在 Chrome 应用程序中作为独立于浏览器的windwos 工作？

谢谢，一如既往。

```
$(document).ready(function(){

    $('#Notes').show().addClass('navActive');
    $('#Callers').hide();
    $('#Assignments').hide();
    $('#CallHist').hide();

    $('#lowersectionmenu a').click(function() {

    $('.navActive').hide().removeClass('navActive');

    var hrefid = $(this).attr('href')
    console.log(hrefid);
    $(hrefid).show().addClass('navActive');

    return false;  

    }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T21:47:34.800

再次，一些搜索和重新阅读已经回答了我的问题。

1.  是的，jQuery 将与 Chrome 打包的应用程序一起使用（或者至少我认为它们会，我稍后会发现）。
2.  问题似乎是我指的是 jQuery 使用对 web 的 url 引用......打包的 chrome 应用程序/扩展程序不允许这样做。
3.  我应该下载我想要的jQuery库，然后将它存储在本地并在本地引用它。然后我的代码应该像浏览器中的 id 一样工作。

希望这可能会在某个时候对其他人有所帮助。

# visual-studio - 是否可以在 Windows 上使用 Visual Studio 调试使用 Mono / XBuild 编译的程序集？

> ID：13499384
> 
> 赞同：8
> 
> 时间：2012-11-21T18:06:41.920
> 
> 标签：visual-studio, debugging, mono, xbuild

我正在使用 XBuild 为 Mono 编译 Visual Studio 解决方案。这会生成程序集 + mdb 文件。是否有可能在 Windows 上使用 Visual Studio 调试此程序集？使用“附加到进程”时，我无法调试，因为显示未加载符号的错误。

我尝试通过 Mono.Cecil (AssemblyDefinition, MdbReaderProvider, PdbWriterProvider) 为这个程序集生成 pdb 文件，并通过 Debug / Windows / Modules 和“Load Symbol From / Symbol Path”手动加载它，它实际上加载了符号（显示在模块中windows），但这也不能启用调试。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-22T18:41:57.560

在比较 VS2012 构建和 XBuild 构建之间的程序集定义时，我注意到 XBuild 没有生成 DebuggableAttribute。如果缺少此属性，则无法使用 Visual Studio 2012 进行调试，即使您手动加载符号也是如此。使用 VS2012 调试使用 Mono / XBuild 编译的程序集需要以下步骤：

1.  使用 XBuild 编译解决方案
2.  对要调试的每个程序集使用 Mono.Cecil 以生成 pdb 文件并注入 DebuggableAttribute（请参见下面的代码）
3.  从 XBuild 编译程序开始
4.  使用 VS2012 中的“Debug / Attach to process...”来调试正在运行的程序

生成pdb并注入DebuggableAttribute的代码：

```
string assemblyPath = @"HelloWorld.exe";

var assemblyDefinition = AssemblyDefinition.ReadAssembly(assemblyPath,
    new ReaderParameters() { SymbolReaderProvider = new MdbReaderProvider(), ReadSymbols = true});

CustomAttribute debuggableAttribute = newCustomAttribute(
assemblyDefinition.MainModule.Import(
    typeof(DebuggableAttribute).GetConstructor(new[] { typeof(bool), typeof(bool) })));

debuggableAttribute.ConstructorArguments.Add(new CustomAttributeArgument(
    assemblyDefinition.MainModule.Import(typeof(bool)), true));

debuggableAttribute.ConstructorArguments.Add(new CustomAttributeArgument(
    assemblyDefinition.MainModule.Import(typeof(bool)), true));

assemblyDefinition.CustomAttributes.Add(debuggableAttribute);

assemblyDefinition.Write(assemblyPath,
    new WriterParameters() { SymbolWriterProvider = new PdbWriterProvider(), WriteSymbols = true}); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-22T07:45:49.567

只需一点点一次性的努力，就可以做到这一点。

您需要将单声道`mdb`文件转换为`pdb`文件。之后 VS 应该能够与您一起逐步完成代码（如果您也有源代码） - 见下文。

[http://johnhmarks.wordpress.com/2011/01/19/getting-mono-cecil-to-rewrite-pdb-files-to-enable-debugging/](http://johnhmarks.wordpress.com/2011/01/19/getting-mono-cecil-to-rewrite-pdb-files-to-enable-debugging/)

Mono.Cecil 确实经常更改，因此您可能会发现 API 对此进行了一些更改。

# objective-c - 如何强制 NSTextField 只允许数字？

> ID：13499385
> 
> 赞同：0
> 
> 时间：2012-11-21T18:06:45.017
> 
> 标签：objective-c, cocoa, interface-builder, nstextfield, nsnumberformatter

在 Interface Builder 中，我创建了一个文本字段并将一个 NSNumberFormatter 粘贴到单元格中。但是，用户仍然可以在文本字段中键入文本。有没有办法仅使用界面生成器将输入限制为数字？我认为这就是 NSNumberFormatter 的重点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T20:11:56.737

创建一个 NSNumberFormatter 子类并将其放入实现中。在您的代码中，将 YKKNumberFormatter 设置为 NSTextField/UITextField 的格式化程序。

```
@implementation YKKNumberFormatter

- (BOOL)isPartialStringValid:(NSString *)partialString newEditingString:(NSString **)newString errorDescription:(NSString **)error {
    // Make sure we clear newString and error to ensure old values aren't being used
    if (newString) { *newString = nil;}
    if (error) {*error = nil;}

    static NSCharacterSet *nonDecimalCharacters = nil;
    if (nonDecimalCharacters == nil) {
        nonDecimalCharacters = [[[NSCharacterSet decimalDigitCharacterSet] invertedSet] retain];
    }

    if ([partialString length] == 0) {
        return YES; // The empty string is okay (the user might just be deleting everything and starting over)
    } else if ([partialString rangeOfCharacterFromSet:nonDecimalCharacters].location != NSNotFound) {
        return NO; // Non-decimal characters aren't cool!
    }

    return YES;
}

@end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T18:43:31.810

每个格式化程序都有这个方法：

```
- (BOOL) getObjectValue: (id*) object forString: (NSString*) string 
    errorDescription: (NSError**) error; 
```

这对每个格式化程序都有效。
如果字符串无效，则返回 false，并且作为参数（取消引用）传递的对象将为 nil。
因此，不要将数字格式化程序放到文本字段中，而是使用您自己的格式化程序作为实例变量。观察实现委托协议的文本字段，以便在每次更改文本时都可以通知您。
然后调用这个方法：

```
NSNumber* number;
BOOL success=[formatter getObjectValue: &number forString: [myTextField stringValue] errorDescription:nil]; 
```

此时如果success为假（或检查number是否为nil），则文本字段中存在无效字符串，因此请执行更适合您的操作（可能删除整个字符串，或显示0.0作为值）。

还有另一种方法：

```
- (BOOL) isPartialStringValid : (NSString*) partialString: (NSString*) partialString
    errorDescription: (NSString*) error; 
```

这样你就可以知道部分字符串是否有效。例如，科学记数法“1e”无效，但部分有效，因为用户可以加1，它将变为“1e1”。

# php - 使用 PHP 的 PDO 安全删除 SQL 查询中的变量表名

> ID：13499390
> 
> 赞同：3
> 
> 时间：2012-11-21T18:06:54.247
> 
> 标签：php, mysql, database, pdo, sql-delete

我正在尝试创建一个允许我删除表中某一行的函数。我想将该函数用于几个不同的表，因此当我调用该函数时，我会将函数的参数之一设为表名。这是我正在尝试做的一个例子：

```
function delete($conn, $table, $id) {
    $stmt = $conn->prepare("DELETE FROM ".$table." WHERE id = :id");
    $stmt->bindParam(":id", $id, PDO::PARAM_INT);
    $stmt->execute();  

    if ($stmt->rowCount() > 0) {
            return true;
    } else {
            return false;
    }
} 
```

我遇到的一个问题是，因为 $table 变量直接进入 SQL 查询，我的数据库不会面临 SQL 注入的风险吗？

正如我从其他一个问题中了解到的那样，我不能只将 :table 添加到 bindParam 函数中，所以我不知道如何使这个函数安全。有任何想法吗？？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-21T18:12:50.923

## 清理表格数据

您可以定义一组列入白名单的表名以在您的函数中使用：

```
$whitelist = array('table1', 'table2', ...) 
```

然后使用：

```
$myTable= array_intersect_keys($table, array_flip($whitelist)); 
```

`$myTable`现在将是安全的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T18:15:41.123

MySQL 目前不支持动态 SQL 字符串构建，但您可以尝试使用表的白名单或可能使用 PDO 的准备语句（冗余，我知道）的 MySQL 准备语句。

```
$sql = "
PREPARE stmt FROM 
'DELETE FROM @tbl WHERE id = :id';
EXECUTE stmt USING :table;
";
$stmt = $db->prepare($sql);
$stmt->bindParam(':id', $id, PDO::PARAM_INT);
$stmt->bindParam(':table', $table); 
```

这是未经测试的，但可能会有所帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-21T18:14:15.740

作为元数据的表名比行数据更受限制 - 因此清理表名应该比清理数据更可靠。我当然指的是在 PDO 之外进行消毒。

我们经常使用的是一个 PHP 包含，它包含所有有效的表名作为数组定义，所以我们只是查找它 - 如果找不到，并且包含的​​文件年龄超过一个小时，我们运行“ SHOW TABLES”并重新创建包含，因此它非常自动化。

# php - 解释：register_shutdown_function

> ID：13499399
> 
> 赞同：22
> 
> 时间：2012-11-21T18:07:05.680
> 
> 标签：php

做什么`register_shutdown_function`？

我对它的用法和它的作用一无所知。我知道您可以使用它并与自定义错误处理程序很好地配合，但我不知道要通过它，如何处理它等等。

有人可以为这个编码新手用最简单的术语解释一下吗？

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2012-11-21T18:12:50.500

这实际上是一个非常简单的功能。所以你有一个php脚本：

```
<?php
  echo "Here is my little script";

  function endScript(){
       echo "My little Script has finished";
  }

  register_shutdown_function('endScript');

?> 
```

基本上会发生什么是你的脚本运行，当它完成时，因为我们添加了这一行`register_shutdown_function('endScript');`，它将调用函数 endScript 并最终输出`My little script has finished`。

[这是文档](http://php.net/manual/en/function.register-shutdown-function.php)中的一些额外内容：

> 在脚本执行完成或调用 exit() 后注册要执行的回调。可以对 register_shutdown_function() 进行多次调用，每次调用的顺序与注册时相同。如果在一个已注册的关闭函数中调用 exit()，则处理将完全停止，并且不会调用其他已注册的关闭函数。

*更新

它的一个很好的用途是当您经常使用`exit()`php.ini 中调用的函数时。

例如：

```
<?php 

  function endScript(){
       echo "My little Script has finished";
  }
  register_shutdown_function('endScript');

  $result = some_intricate_function()

  if($result == 0){
     exit();
  } 

  $result = some_other_intricate_function()

  if($result == 0){
     exit();
  }

/* and this keeps reoccurring */
?> 
```

现在请注意，即使您多次调用 exit，您也不必`endScript`每次都在 exit 之前调用该函数。您在一开始就注册了它，现在您知道如果您退出或脚本完成，那么您的函数就会被调用。

现在我的关机功能当然没用了；但如果您需要清理东西（即关闭打开的文件句柄，保存一些持久性数据等），它会变得很有用

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-21T18:10:17.610

`register_shutdown_function`注册一个关闭钩子，这是脚本关闭时要执行的函数。它以回调函数为参数，即要执行的函数。

我建议您查看该函数的[文档](http://php.net/manual/en/function.register-shutdown-function.php)。

# php - 简单的 PHP MySQL 消息客户端

> ID：13499403
> 
> 赞同：1
> 
> 时间：2012-11-21T18:07:20.037
> 
> 标签：php, mysql, email, client, message

我正在尝试创建一个简单的 PHP MySQL 驱动的消息客户端。

到目前为止，我有两张桌子：

`users`其中包含有关在网站上注册的每个人的信息。`userID`,`firstName`等`lastName`。

`mail`其中包含`MessageID`, `fromUserID`, `toUserID`, `messageSubject`,`messageBody`等`dateSent`。

用户可以注册然后登录。登录后，他们可以查看他们的“收件箱”。

我想弄清楚的是如何列出所有消息，以及每条消息的预览，说明它来自谁。显然我可以`fromUserID`从表中获取字段，`mail`但这对用户没有任何意义，它只是一个数字，我想使用`userID`并查询`users`表并从中提取发件人的名字和姓氏。

我知道我可以使用`JOIN`，但我不确定如何去做，或者我可以使用子查询吗？什么是更好的？

任何建议都非常受欢迎。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T18:14:05.557

您将要加入 users 表，例如：

```
SELECT m.*, u.*
FROM mail m
  LEFT JOIN users u ON u.id = m.fromUserID
WHERE m.toUserID == 'LoggedInUserId' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T18:11:42.890

验证用户时，将用户 ID 保持在会话中。那么您可以使用以下查询获取数据。select mail.* from mail m,users u where u.user_id=m.to_user_id and u.user_id= **logged in userid**

# ruby - 有没有一种简单的方法可以将第一个参数传递给 Rspec 的`describe`？

> ID：13499404
> 
> 赞同：2
> 
> 时间：2012-11-21T18:07:23.993
> 
> 标签：ruby, rspec

假设我有一个测试套件，我首先给出`describe`一个常数：

```
describe SomeExcessivelyLong::And::Maybe::Namespaced::Classname do

  # Convenience reference for tests
  let(:klass) { SomeExcessivelyLong::And::Maybe::Namespaced::Classname }

end 
```

是否有一种现有的方法，例如`subject`或类似的方法，使这变得`let(:klass)`多余？如何访问传递给的第一个值`describe`？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-21T18:19:25.530

默认情况下`subject`，将是描述块中的类的新实例，因此您应该能够调用`subject.class`以获取类本身。

```
describe SomeExcessivelyLong::And::Maybe::Namespaced::Classname do
  it "should do something" do
    subject.class.should be_a SomeExcessivelyLong::And::Maybe::Namespaced::Classname
  end
end 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-21T20:41:33.917

`described_class`在您的示例中调用：

```
describe SomeExcessivelyLong::And::Maybe::Namespaced::Classname do
  it "should do something" do
    described_class.should be SomeExcessivelyLong::And::Maybe::Namespaced::Classname
  end
end 
```

# c# - 命令行文本编辑器

> ID：13499405
> 
> 赞同：-1
> 
> 时间：2012-11-21T18:07:28.440
> 
> 标签：c#, command-line, text-editor

基本上我想用 C# 制作一个命令行文本编辑器。我看过一些教程，但其中大多数似乎都在使用 GUI，我只想要像 nano 这样的纯命令行。我想知道是否有任何好的教程或我可以研究的东西？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T18:14:33.763

[我相当肯定你可以通过使用System.Console](http://msdn.microsoft.com/en-us/library/system.console.aspx)类来完成大部分你想做的事情。

您可以使用 ConsoleKeyInfo 类和 Console.ReadKey() 来检测箭头键按下，如下所示：

```
ConsoleKeyInfo pressed_key = Console.ReadKey(); // read keystroke

if (pressed_key.Key == ConsoleKey.UpArrow)
{
     Console.CursorTop = Console.CursorTop - 1;
} 
```

# vb.net - 如何随机化文本文件的内容？

> ID：13499409
> 
> 赞同：0
> 
> 时间：2012-11-21T18:07:43.087
> 
> 标签：vb.net, random, text-files

我需要随机化文本文件中的所有行，然后通过替换相同的文本文件来保存未排序的行。

我怎么能做到这一切？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T18:48:39.097

```
Dim filepath as String = "text_path"
Dim arr() As String = File.ReadAlllines(filepath)
Dim a As Random
Dim b(str.Length) As Integer
Dim result=1, c As Integer

    File.Delete(filepath)
Dim f As StreamWriter = File.AppendText(filepath)

    For i = 0 To str.Length
    while(result)
        result = 0
        c = a.Next(0, str.Length)
        For j = 0 To b.Length
            If b(j) = c Then result = 1
        Next
    end while
        f.WriteLine(arr(c))
    Next
    f.Close() 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-21T19:31:36.240

这是我的看法：

```
Dim linesList As New List(Of String)(IO.File.ReadAllLines("filepath"))
Dim newLinesList As New List(Of String)
Randomize()
While linesList.Count > 0
  Dim randomIndex As Integer = Math.Floor(Rnd() * linesList.Count)
  newLinesList.Add(linesList(randomIndex))
  linesList.RemoveAt(randomIndex)
End While
IO.File.WriteAllLines("filepath", newLinesList.ToArray) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-21T19:52:54.493

另一种看法：

```
Imports System.IO

Module Module1

    Sub CreateFile(destFile As String)
        Using sw = New StreamWriter(destFile)
            For i = 1 To 200
                sw.WriteLine("Line " & i.ToString)
            Next
        End Using
    End Sub

    Function RandomList(nNumbers As Integer) As List(Of Integer)
        ' generate a List of numbers from 0..nNumbers-1 in a random order.
        Dim ns As New List(Of Integer)
        Dim rnd As New Random
        For i = 0 To nNumbers - 1
            ns.Insert(rnd.Next(0, i + 1), i)
        Next
        Return ns
    End Function

    Sub RandomiseFile(srcFile As String)
        Dim lines = File.ReadAllLines(srcFile)
        Dim nLines = lines.Count
        Dim randomNumbers = RandomList(nLines)
        ' use a temporary file in case something goes wrong so that
        ' the original file is still there.
        Dim tmpFile = Path.GetTempFileName()
        ' output the lines in a random order.
        Using sw = New StreamWriter(tmpFile)
            For i = 0 To nLines - 1
                sw.WriteLine(lines(randomNumbers(i)))
            Next
        End Using
        File.Delete(srcFile)
        File.Move(tmpFile, srcFile)
    End Sub

    Sub Main()
        Dim fileToUse As String = "C:\temp\makerandom.txt"
        CreateFile(fileToUse)
        RandomiseFile(fileToUse)
    End Sub

End Module 
```

# .net - 如何访问 WIF 4.5 中的 SecurityTokenHandlers 集合？

> ID：13499411
> 
> 赞同：15
> 
> 时间：2012-11-21T18:07:49.660
> 
> 标签：.net, wif, .net-4.5

我正在迁移一个使用 Active Federation 和 WIF 3.5 的 ASP.Net 站点以使用 .Net 4.5。Windows Identity Foundation (WIF 3.5) 的功能现已完全集成到 .Net 4.5 框架中。

由于类已移至三个不同的名称空间，因此主要是机械翻译问题。我遇到问题的部分是`GenericXmlSecurityToken`将 STS 发布的内容转换为 Claims Principal 以调用`SessionAuthenticationModule.WriteSessionTokenToCookie`. 缺少文档，我只需要找到 WIF 4.5 访问方式`FederatedAuthentication.ServiceConfiguration.SecurityTokenHandlers`

以下是在 WIF 4.5 中无法编译的 WIF 3.5 代码片段（为简洁起见，省略了 WSTrust 通道创建）：

```
var genericToken = channel.Issue(rst) as GenericXmlSecurityToken;

var handlers = FederatedAuthentication.ServiceConfiguration.SecurityTokenHandlers;

var token = handlers.ReadToken(new XmlTextReader(new StringReader(genericToken.TokenXml.OuterXml)));
var identity = handlers.ValidateToken(token).First();

var sessionToken = new SessionSecurityToken(ClaimsPrincipal.CreateFromIdentity(identity),
                                            TimeSpan.FromMinutes(20));

FederatedAuthentication.SessionAuthenticationModule.WriteSessionTokenToCookie(sessionToken); 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-11-21T18:07:49.660

修复结果相当简单（如果不是很明显）。

```
FederatedAuthentication.ServiceConfiguration.SecurityTokenHandlers 
```

转换为 WIF 4.5 为

```
FederatedAuthentication.FederationConfiguration.IdentityConfiguration.SecurityTokenHandlers 
```

唯一的其他变化是将`ClaimsPrincipal.CreateFromIdentity(identity)`工厂方法调用替换为`new ClaimsPrincipal(identity)`.

以下是工作片段：

```
var handlers = FederatedAuthentication.FederationConfiguration.IdentityConfiguration.SecurityTokenHandlers;

var token = handlers.ReadToken(new XmlTextReader(new StringReader(genericToken.TokenXml.OuterXml)));
var identity = handlers.ValidateToken(token).First();

var sessionToken = new SessionSecurityToken(new ClaimsPrincipal(identity),
                                            TimeSpan.FromMinutes(20));

FederatedAuthentication.SessionAuthenticationModule.WriteSessionTokenToCookie(sessionToken); 
```

# android - 将 gmail 添加到您创建的应用程序

> ID：13499413
> 
> 赞同：1
> 
> 时间：2012-11-21T18:07:52.683
> 
> 标签：android, gmail, custom-application

我正在为我的 android 设备创建一个任务管理器。我试图让组织者直接从我创建的应用程序在 gmail 日历上安排其任务。每次我搜索这个时，我都会得到关于如何使用谷歌应用程序的结果，而不是将它们集成到我自己的应用程序中的能力。我知道这些信息一定存在于某处。是否有可能有人可以指出我正确的方向或总体上对这种情况有所了解。谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T18:21:36.753

您将需要使用谷歌日历 API：[https ://developers.google.com/google-apps/calendar/](https://developers.google.com/google-apps/calendar/)

# c# - 如何构建我的 App.config 以具有可变数量的设置？

> ID：13499415
> 
> 赞同：1
> 
> 时间：2012-11-21T18:07:58.837
> 
> 标签：c#, app-config

对，所以我有一个 Windows 服务，它每隔几分钟就会关闭并在服务器上做一些工作。该服务从 App.config 读取有关它连接到的服务器的大量信息（主机、用户名、端口等），并且效果很好。

我现在有一个要求，该服务可以满足 n 个不同的服务器。所以现在我的服务需要从 App.config 中读取，并按顺序为 server1..serverN 做它需要做的事情。等待预定的时间，然后再次从 server1 开始。

我不知道如何或什么是在 App.config 中存储 n 组服务器设置的最佳方式，然后以编程方式确定有多少组设置，然后读取每组设置。

我想过有一个设置告诉我有 5 台服务器，然后设置 server1..server5 的设置，但这真的不优雅。

有一个更好的方法吗？

我的完整源文件如下：

```
using System;
using System.Collections;
using System.Text;
using System.Configuration;
using System.Xml;

namespace FTPConfig
{
    public class MyAppConfig : ConfigurationSection
    {
        public static MyAppConfig GetConfiguration()
        {
            MyAppConfig configuration = ConfigurationManager.GetSection("MainSettings") as MyAppConfig;

            if (configuration != null) return configuration;

            return new MyAppConfig();
        }
    }

    [ConfigurationProperty("host", IsRequired = true)]
    public String Host 
    { 
        get 
        { 
            return this["host"] as string; 
        } 
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T18:12:42.133

您可以在 app.config 文件中使用[自定义部分](https://stackoverflow.com/q/758986/33499)，并在那里使用您喜欢的任何 xml。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T18:32:51.697

我想为库程序集的模型类提供一些设置，在搜索解决方案时，我发现了一个名为“XmlConfigurator”的类，[此处](https://stackoverflow.com/questions/7649195/best-way-of-injecting-application-configuration)描述了该类。在简历中，您可以在 App.config 中创建一个部分并将其映射到您想要的任何类型。例如。假设您有以下课程：

```
public class MySettings
{
    public int Setting1 { get; set; }

    public string Setting2 { get; set; }
} 
```

在您的 app.config 中，您只需添加：

```
<configuration>
<configSections>
    <section name="MySettings" type="MyApp.XmlConfigurator, MyApp" />
</configSections>

<MySettings type="MyApp.MySettings, MyApp">
    <Setting1>10</Setting1>
    <Setting2>MyValue</Setting2>
</MySettings>
</configuration> 
```

初始化应用程序时，您可以轻松加载它：

```
var settings = (MyApp.MySettings)ConfigurationManager.GetSection("MySettings"); 
```

XmlConfigurator：

```
public sealed class XmlConfigurator : IConfigurationSectionHandler
{
    public XmlConfigurator()
    {
    }

    //<?xml version="1.0" encoding="utf-8" ?>
    //<configuration>
    //    <configSections>
    //        <section name="DispatchSettings" type="MyNamespace.XmlConfigurator, MyNamespace.Core" />
    //    </configSections>

    //    <DispatchSettings type="MyNamespace.DispatchSettings, MyNamespace.Core">
    //        <ServiceIsActive>True</ServiceIsActive>
    //        <DispatchProcessBatchSize>100</DispatchProcessBatchSize>
    //    </DispatchSettings>
    public object Create(object parent, object configContext, XmlNode section)
    {
        XPathNavigator navigator = null;
        String typeName = null;
        Type sectionType = null;
        XmlSerializer xs = null;
        XmlNodeReader reader = null;

        try
        {
            Object settings = null;

            if (section == null)
                return settings;

            navigator = section.CreateNavigator();
            typeName = (string)navigator.Evaluate("string(@type)");
            sectionType = Type.GetType(typeName);

            if (sectionType == null)
                throw new ArgumentException("Could not find the specified type: " + typeName);

            xs = new XmlSerializer(sectionType);
            reader = new XmlNodeReader(section);

            settings = xs.Deserialize(reader);

            return settings;
        }
        finally
        {
            xs = null;
        }
    }
} 
```

# vb.net - VB.NET 连接到 MS Access

> ID：13499418
> 
> 赞同：2
> 
> 时间：2012-11-21T18:08:05.587
> 
> 标签：vb.net, ms-access, connection

当我尝试使用 VB.NET 连接到 Microsoft Access DB 时出现错误。我在网上看到了很多例子。我的代码看起来像那些示例，但是我收到一条构建错误消息，说明：

> 未定义类型“System.Data.OleDb.OleDbConnection”。

我尝试为 ... 添加某种导入语句，`system.data.oledb`但这似乎不起作用。我的代码如下。这是一个基本连接，所以我想我缺少某种插件、库或设置。任何和所有的帮助将不胜感激。

```
Public Function TestMain(ByVal args() As Object) As Object
    ' Connection String to MS Access DB
    Dim connectStr As String = "Provider=Microsoft.ACE.OLEDB.12.0;" & _
                             "Data Source=C:\Users\DMalerman\keyword.accdb;" & _
                             "Persist Security Info=False;"
    MsgBox(connectStr)
    ' Create connection to the db
    Using connection As New System.Data.OleDb.OleDbConnection(connectStr)
        ' Create the SQL Query
        Dim readQuery As String = "Select KeywordDriver.ScriptName from KeywordDriver " & _
                                    "where KeywordDriver.Keyword = test"
        Dim queryCommand As New System.Data.OleDb.OleDbCommand(readQuery, connection)

        'Open the Connection
        connection.Open()

        ' Query the Database
        Dim dbReader As System.Data.OleDb.OleDbDataReader = queryCommand.ExecuteReader()

        ' Loop until there is nothing left to read
        While dbReader.Read()
            Dim sKeyword As String = ""
            sKeyword = dbReader.GetString(0)
            MsgBox(sKeyword)
        End While
        ' Close the Reader
        dbReader.Close()

    End Using

    Return Nothing
End Function 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T18:12:37.100

你试过了吗

```
imports System.Data.OleDb 
```

? 如果是这样，它给你一个错误吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T19:14:32.660

请尝试修改此行： `Dim queryCommand As New System.Data.OleDb.OleDbCommand(readQuery, connection)`

只放这些： `Dim queryCommand As New System.Data.OleDb.OleDbCommand(readQuery)` `queryCommand.Connection = connection`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-08-19T15:36:37.897

导入 System.Data 导入 System.Data.OleDb Module Module1 Public str As String Public con As OleDbConnection Public cmd As OleDbCommand Public dtreader As OleDbDataReader Public dtadapter As OleDbDataAdapter

```
Public Sub openconn()
    str = "Provider=Microsoft.Jet.OLEDB.4.0;Data Source=|DataDirectory|\Database2.mdb"
    con = New OleDbConnection(str)

    Try
        con.Open()
    Catch ex As Exception
        MessageBox.Show("gagal koneksi")
    End Try
End Sub 
```

端模块

# javascript - 可以要求 Javascript 吗？

> ID：13499420
> 
> 赞同：2
> 
> 时间：2012-11-21T18:08:19.367
> 
> 标签：javascript, accessibility, w3c-validation

我从历史的角度知道，当禁用 Javascript 的访问者访问一个网站时，不优雅地降级一直是不受欢迎的，但现在这有多相关？

我在问，因为我正在构建的应用程序将大量使用 Javascript 来绘制图表以及用户与图表进行交互。

如果没有启用它，网络上大多数最受欢迎的网站都会或多或少地变得无用。如果没有启用它，我什至无法登录 twitter，Facebook 的核心部分停止工作，尝试访问谷歌地图只是重定向到他们的搜索主页。

我计划的那种互动几乎不可能以任何其他方式进行，即使有办法也没有资源来开发两个版本的东西。

我遇到的问题是该站点还需要尽可能易于访问。这是一个天生的视觉网站，至少可以说这是一个问题。我什至不确定是否有解决这个特定问题的方法。如果它是视觉的，它将不适合盲人。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-21T18:12:17.133

这完全取决于您的需求以及*您*想要的人口统计数据。很多网站专门使用 flash to silverlight；这是否使它们设计不佳？不，这意味着该网站迎合了非常特定的受众。

只要您接受可能有（尽管）少数人不会使用该网站（或由于缺少支持而无法使用），那么就可以了。

旁注：除了 javascript 之外，还有其他传达图形的方法。使用服务器端图像生成器是一种方法。您也可以决定使用 flash/silverlight 插件或 activeX/applet。我的建议是按照*您*认为合适的方式设计网站。

我敢打赌，这些天对 javascript 的支持*占多数*，因此先创建站点然后再处理差异不会是一个坏途径。假设大多数客户支持它，您仍然会收到高饱和度的访问者。

哎呀，看看使用 html5 的网站——它不是标准，没有浏览器*必须*支持它，但这仍然不能阻止人们利用`article`, `header`&`footer`元素。诚然，有 html5shiv 可以优雅地降级它，但这也取决于 JS 的存在。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-21T18:16:41.130

Javascript 已经与 Web 开发如此彻底地集成在一起，以至于现在用户在*没有*Javascript 的情况下浏览已成为一种新事物。

您应该做的是提供一条友好的消息，通知用户您的页面提供的特定服务（图表等）在没有启用 JS 的情况下无法提供，然后将其保留。

我*担心*的是彻底检测功能兼容性，因为虽然禁用 JS 的人并不常见，但使用古老浏览器的人却很常见。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-21T21:49:49.013

既然你用[可访问性](/questions/tagged/accessibility "显示标记为“可访问性”的问题")标记了这个，我将介绍这个观点。正如其他人所说，Javascript 是我们生活的一部分。虽然不希望有视觉障碍的人可以完全访问该应用程序，但您必须牢记其他障碍，例如行动障碍。WebAIM 有一篇文章介绍了在编写 JS 事件以使其尽可能易于访问[时要记住的内容。](http://webaim.org/techniques/javascript/eventhandlers)

根据这些图表的作用，您应该将结果数据至少放在页面上的某个位置或靠近图表的数据/表格的链接中的[可访问表格](http://webaim.org/techniques/tables/)中，以便那些谁很容易找到需要它。

你没有具体说明你是为谁做的，所以我会提供更多信息。Gez Lemon 写了[一篇关于不使用`<noscript>`](http://juicystudio.com/article/say-no-to-noscript.php)的文章，他的总结是：

> 我很惊讶 noscript 元素符合 HTML5，因为有更好的技术可以确保页面在有或没有 JavaScript 的情况下工作。尽管早期的可访问性建议提倡使用 noscript 元素，但最佳实践是使用不显眼的 JavaScript 进行渐进式增强，而不是依赖后备内容。

这与我开始回答的内容相呼应。但是，如果您为美国或州政府机构执行此操作，您仍必须使用`<noscript>`标签，因为这是第 508 节的要求。带有`<noscript>`标签的信息应该是有用的。前任：

```
<script type="text/javascript">
  // Do something cool
</script>
<noscript>
 Please perform your search again using the <a>javascript-free form</a> 
 to get the results in a table.
</noscript> 
```

# javascript - 倒计时两位数

> ID：13499421
> 
> 赞同：1
> 
> 时间：2012-11-21T18:08:19.443
> 
> 标签：javascript, countdown

我有这个脚本并且效果很好，但我想将其更改为两位数，我的意思是，如果离开 2 天，则将其显示为 02 天。这是脚本：

```
 <script>
function renderMessage(dateStr, msg1, msg2, countFrom) {
  var date = new Date(dateStr);
  var now = new Date();
  var diff = date.getTime() - now.getTime();
  var days = Math.floor(diff / (1000 * 60 * 60 * 24)) + 1;
  if(days < 1) {
    document.write(msg1);
  } else {
    if(countFrom)
      days = countFrom - days;
    document.write(msg2.replace(/%days%/g, number_format(days)));
  }
}
function number_format(num) {
  num = num.toString().replace(/\$|\,/g,'');
  if(isNaN(num)) {
    num = "0";
  }
  sign = (num == (num = Math.abs(num)));
  num = Math.floor(num*100+0.50000000001);
  num = Math.floor(num/100).toString();
  for (var i = 0; i < Math.floor((num.length-(1+i))/3); i++)
  num = num.substring(0,num.length-(4*i+3))+','+
  num.substring(num.length-(4*i+3));
  return (((sign)?'':'-') + num);
}
</script>

<script>
  renderMessage("November 29, 2012", "You missed it!", "Hurry, there's only %days% days to go!");
</script> 
```

我真的很感谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T18:17:04.767

为任何小于 10 的数字添加条件：

```
 if (num < 10)
    num = "0" + Math.floor(num/100).toString();
  else
    num = Math.floor(num/100).toString(); 
```

# mysql - MySQL中的不可打印字符

> ID：13499423
> 
> 赞同：1
> 
> 时间：2012-11-21T18:08:22.480
> 
> 标签：mysql, sql, escaping, mysql-real-escape-string

我想测试某个 BLOB 是否以字符 255 ( `\xff`) 开头。有没有办法在文字字符串中编码这个字符？

[表 9.1。特殊字符转义序列](http://dev.mysql.com/doc/refman/5.0/en/string-literals.html#character-escape-sequences)提供某些特殊字符，但不是编码任意字符的方法。

无法对字符进行编码，是否有不同的解决方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-21T18:15:27.603

使用十六进制文字，例如 X'FF'。见[http://dev.mysql.com/doc/refman/5.0/en/hexadecimal-literals.html](http://dev.mysql.com/doc/refman/5.0/en/hexadecimal-literals.html)

# c# - 如何使用 DbContext 自动创建的表 (OnModelCreating(DbModelBuilder))

> ID：13499424
> 
> 赞同：0
> 
> 时间：2012-11-21T18:08:27.043
> 
> 标签：c#, asp.net-mvc, entity-framework, ef-code-first

我在两个表之间创建了多对多关系

表**MoviesHashTags**由 DbContext 自动创建。

我希望能够使用 Linq 向 MoviesHashTags 表发送查询

问题是我没有它的任何模型，并且 DbContext 没有给我任何使用它的选项。例如类似的东西：

`_db.MoviesHashTags.Select(i =>i.Id).Where(i => i.HashTagId==3)`

有没有办法做到这一点`_db.Database.ExecuteSqlCommand("QUERY")`

**例子：**

我想获取所有具有 HashTagId=3 的 ID

**表电影HashTags：**

![在此处输入图像描述](../Images/3652c35f2b8f666b7c4af8ab1b3386fe.png)

```
------------------------------------------------------------------------- 
```

**表电影：**

```
[DataContract]
public class Movie 
{
    [DataMember]
    public long Id { get; set; }
    *
    *
    *
    [DataMember]
    public ICollection<HashTag> HashTagsCollection { get; set; }

public Movie()
{
    HashTagsCollection = new HashSet<HashTag>();
} 
```

**表标签：**

```
[DataContract]
public class HashTag
{
    [DataMember]
    public long HashTagId { get; set; }
    *
    *
    *
    [DataMember]
    public ICollection<Movie> MoviesCollection { get; set; }

    public HashTag()
    {
        MoviesCollection = new HashSet<Movie>();
    } 
```

**数据库上下文：**

```
protected override void OnModelCreating(DbModelBuilder modelBuilder)
{
    modelBuilder.Entity<Movie>().
    HasMany(c => c.HashTagsCollection).
    WithMany(p => p.MoviesCollection).
    Map(
        m =>
       {
        m.MapLeftKey("Id");
        m.MapRightKey("HashTagId");
        m.ToTable("MoviesHashTags");
        });
 } 
```

**答案：感谢@DigitalD**

`db.Movies.Where(m => m.HashTagsCollection.Any(h => h.HashTagId == hashTag.HashTagId)).Select(m => m.Id);`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T18:16:29.827

Linq 应该能够处理以下内容：

```
var HashTag = _db.HashTags.Find(3); //or whatever method you need to get a single hashtag
var Movies = _db.Movies.Where(m => m.HashTagsCollection.Contains(HashTag))
                 .Select(m => m.Id); 
```

# php - 使用 php-mongo 查询 mongodb

> ID：13499427
> 
> 赞同：0
> 
> 时间：2012-11-21T18:08:39.163
> 
> 标签：php, mongodb

我正在构建一个简单的消息传递系统，并且我在 mongodb 中有一个包含如下文档的集合：

```
{ "_id" : ObjectId("50ad003f9811e5bc5c000000"), "between" : [ "user1,user2,user3" ] } 
```

我想执行这个查询：

```
db.conversations.find({'between': ["user1,user2,user3"]}); 
```

取回这个确切的文件。此查询在 mongo shell 中工作。

在 php-mongo 中，我尝试了这个：

```
$collection->find(array("between"=>array("user1", "user2", "user3"))); 
```

但它不起作用。

我究竟做错了什么 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T18:27:40.790

你不想在这里做一个 In 查询吗？

```
db.collection.find( { "between" : { $in : ["user1", "user2", "user3"] } } ); 
```

请参阅此处的查询： [Mongo Advanced $in 查询](http://www.mongodb.org/display/DOCS/Advanced+Queries#AdvancedQueries-%24in)

使您的 PHP 查询看起来像：

```
$collection->find(array("between"=>array("$in"=>array("user1", "user2", "user3"))));
//untested, should be something similar to this. 
```

或者如果你想找到它，你就不能这样做：

```
$collection->find(array("between"=>array("user1,user2,user3"))); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-22T02:36:10.550

首先，当您保存数据时，您必须使用数组而不是字符串

```
{ "between" : [ "user1,user2,user3" ] } 
```

这存储在一个元素的数组“之间”`"user1,user2,user3"`

基本上，当您在 shell 中进行查询时，一切正常，因为您要求的是一个包含一个元素的数组。但是在 php 中，您需要一个包含三个元素的数组。

因此，当您保存数据时，很可能这就是您所需要的：

```
{ "between" : [ "user1","user2","user3" ] } 
```

这将为您提供三个用户的数组。

然后阅读文档[http://www.mongodb.org/display/DOCS/Advanced+Queries](http://www.mongodb.org/display/DOCS/Advanced+Queries)并根据您的需要调整您的查询：确切的数组或仅数组中的某些元素

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-21T20:07:27.673

你有没有尝试过：

```
$collection->find(array("between"=>"user1,user2,user3")); 
```

或者

```
$collection->find(array( "$elemMatch" => array( "between"=>"user1,user2,user3" )); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-13T04:23:11.703

该`$in`运算符类似于 SQL`IN`修饰符，允许您指定可能匹配的数组。

考虑以下使用`$or`运算符的示例。

```
$collection->find([
    'select' => ['$in' => ['option 1', 'option 2', 'option 3']]
]); 
```

[参考](http://blog.uzaklab.com/post/37800389187/php-mongodb-advanced-queries)

# r - 如何有效地选择 R 中具有最小值的行？

> ID：13499430
> 
> 赞同：4
> 
> 时间：2012-11-21T18:08:40.623
> 
> 标签：r

> **可能重复：**
> [仅保留每个因子水平的最小值](https://stackoverflow.com/questions/4189807/only-keep-min-value-for-each-factor-level)

这是我的问题，我想在指定列中选择具有最小值的行。例如：

```
df <- data.frame(A=c("a","a","b","b"),value=1:4) 
```

我想要的结果是

```
 A value
 a     1
 b     3 
```

我可以使用`by`and `ddply`，但是当 df 很大并且在`A`.

```
do.call(rbind,by(df,df$A, function(x) x[which.min(abs(x$value)),],simplify=FALSE))

ddply(df, ~A, function(x){x[which.min(abs(x$value)),]}) 
```

有什么建议么？

非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T18:20:57.667

`data.table`如果您设置密钥，则对于大型 data.frames 来说非常快。

```
dt <- data.table(df, key="A")
dt[, list(value=min(value)), by=A] 
```

参考：

*   [快速介绍](http://cran.r-project.org/web/packages/data.table/vignettes/datatable-intro.pdf)
*   [手动的](http://cran.r-project.org/web/packages/data.table/data.table.pdf)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T18:15:09.237

tapply 这样做：

```
> tapply(df$value, df$A, min)
a b 
1 3 
```

**编辑：** 使用`by`而不是`tapply`，我们可以保留行名：

```
df <- data.frame(A=c("a","a","b","b"),value=11:14)
df
##   A value
## 1 a    11
## 2 a    12
## 3 b    13
## 4 b    14

do.call(rbind, unname(by(df, df$A, function(x) x[x$value == min(x$value),])))
##   A value
## 1 a    11
## 3 b    13 
```

# javascript - 为不同的配置文件加载不同的视图

> ID：13499431
> 
> 赞同：2
> 
> 时间：2012-11-21T18:08:45.970
> 
> 标签：javascript, sencha-touch-2

我不确定我是否了解如何在 Sencha Touch 2 应用程序中使用个人资料视图。

```
Ext.define(App.view.phone.PhonePanel, {
    extend: 'Ext.tab.Panel',
    xtype: 'Compare'
    config: {
         items: [
            { xtype: 'PanelA' },
            { xtype: 'Panel B' }
         ]
    }
})

Ext.define(App.view.tablet.TabletPanel, {
    extend: 'Ext.Panel',
    xtype: 'Compare'
    config: {
         layout: 'vbox',
         items: [
            { xtype: 'PanelA', flex: 1 },
            { xtype: 'Panel B', flex: 1 }
         ]
    }
}) 
```

然后在电话配置文件中，它添加“PhonePanel”作为视图，平板电脑配置文件添加“TabletPanel”；然后当加载该特定配置文件时，它只加载那些额外的视图。

我遇到的问题是 Sencha 正在从两个配置文件中加载文件，并且正在执行

```
this.getAview().push({xtype:'Compare'}); 
```

当手机配置文件处于活动状态时，它实际上会推送平板电脑的 xtype 版本。这里发生了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T19:24:41.530

以下是在 Sencha Touch 2 应用程序中创建配置文件的不同步骤：

**创建包含以下代码的 app/profile/Base.js**

如果您在启动应用程序时为两个配置文件执行相同的代码，则您更有可能需要基本配置文件。所以这一步是必须的

```
Ext.define('App.profile.Base', {
  extend: 'Ext.app.Profile',

  launch: function () {

    /* Custom Code */

    Ext.fly('booting').destroy();
  }

}); 
```

**创建包含以下代码的 app/profile/Phone.js**

如果您选择不使用基本控制器，请确保扩展`Ext.app.Profile`而不是`App.profile.Base`：

```
Ext.define('App.profile.Phone', {
  extend: 'App.profile.Base',

  config: {
    controllers: ['Main'],
    views: ['Main']
  },

  isActive: function() {
    return Ext.os.is.Phone;
  },

  launch: function() {
    Ext.create('App.view.phone.Main');
    this.callParent();
  }
}); 
```

**创建包含以下代码的 app/profile/Tablet.js**

如果您选择不使用基本控制器，请确保扩展`Ext.app.Profile`而不是`App.profile.Base`：

```
Ext.define('App.profile.Tablet', {
  extend: 'App.profile.Base',

  config: {
    controllers: ['Main'],
    views: ['Main']
  },

  isActive: function() {
    return Ext.os.is.Tablet || Ext.os.is.Desktop;
  },

  launch: function() {
    Ext.create('App.view.tablet.Main');
    this.callParent();
  }
}); 
```

**创建包含以下代码的 app/view/phone/Main.js**

```
Ext.define('App.view.phone.Main', {

  extend: 'Ext.Container',

  config: {
    fullscreen: true,
    items: [{
      html:'This is the main view for the phone profile'
    }]
  }
}); 
```

**创建包含以下代码的 app/view/tablet/Main.js**

```
Ext.define('App.view.tablet.Main', {

  extend: 'Ext.Container',

  config: {
    fullscreen: true,
    items: [{
      html:'This is the main view for the tablet profile'
    }]
  }
}); 
```

而已。你应该准备好了。

希望这有帮助

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-21T18:17:36.390

您使用相同的 xtype 两次。

将 xtype 视为组件的简称。每个组件都需要有一个唯一的短名称，否则它将被更新的定义覆盖。

将上述两个组件更改为`xtype: 'tabletcompare'`和之类的东西`xtype: 'phonecompare'`。

和

```
this.getAview().push({xtype:'tabletcompare'}) <br> 
```

或者

```
this.getAview().push({xtype:'phonecompare'}) 
```

引用对象时。

希望这可以帮助！

# php - 从两个表中获取最高值和总和

> ID：13499432
> 
> 赞同：-1
> 
> 时间：2012-11-21T18:08:46.233
> 
> 标签：php, mysql

`1`我想在一个查询 中显示具有最高等级字符的帐户和他们的时间总和表帐户的统计信息。

我有两个包含以下数据的表：

***表：账户：***

```
Id| Username |Stats
1 | player1  |1
2 | goodman  |1
3 | goodbat  |1
4 | ashasdd  |0 
```

***表：字符：***

```
Guid| Account | Name | Rank | Time |
213 |    1    | fres |  2   |  51  |
214 |    2    | sdg2 |  3   |  12  |
215 |    2    | fgax |  4   |  99  |
216 |    3    | zFvx |  8   |  23  |
217 |    3    | Sgzs |  2   |  13  | 
```

**输出/结果：（**显示具有最高等级字符及其时间总和的帐户字符）

```
Username : player1 | Name: fres(Rank:2) |Time : 51
Username : goodman | Name: fgax(Rank:4) |Time : 111
Username : goodbat | Name: zFvx(Rank:8) |Time : 36 
```

什么是简单的 MySQL 查询？

***我的错误查询：（***不工作）

```
SELECT a.username, a.email, c.name, SUM(c.time), c.rank
FROM `auth`.`account` a, `characters`.`characters` c
WHERE a.id=c.account
ORDER BY c.rank ASC
LIMIT 20 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T18:15:25.223

应该够了。。我想。

```
SELECT c.Account, a.Username, c.Name, MAX(c.Rank) as maxrank, SUM(c.TIME) as sumtime  FROM characters c LEFT JOIN Accounts a ON a.Id=c.Account GROUP By c.Account; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T18:38:12.760

像这样的东西可能会起作用

```
SELECT username, name, d.rank, c.Time
FROM (

    SELECT a.Username, b.account, MAX( b.Rank ) AS rank, SUM( b.Time ) AS TIME
    FROM accounts a
    INNER JOIN characters b ON a.ID = b.Account
    WHERE a.stats =1
    GROUP BY a.Username
) AS c
JOIN characters d ON d.account = c.account
AND d.rank = c.rank
ORDER BY rank 
```

不知道怎么做，从那以后你可能会得到错误的名字，那是没有注册的最高排名。

# action - Ember.js 视图计算属性未传递给操作处理程序

> ID：13499433
> 
> 赞同：0
> 
> 时间：2012-11-21T18:08:47.193
> 
> 标签：action, ember.js

我有 ember (1.0.0-pre2) 视图，它有一个表单和一个按钮。表单绑定到允许填充表单输入和收集输入值的视图类。现在单击按钮，我想从表单值创建一个 dto 对象并将其发送到控制器。按钮html如下

```
<input type="submit" value="Add" data-icon="plus" {{action addReport view.report target="controller"}} /> 
```

视图代码是

```
ContentView: baseView.extend({
    task: null, //initialized when form is filled in
    report: function () {
        var task = this.get('task');
        if (task == null)
            return null;

        return reportModel.create({
            taskId: task.id
        });
    }.property()
}) 
```

控制器代码是

```
DayController: ember.Controller.extend({
    addReport: function (evt) {
        console.log(evt.context);
    }
}) 
```

当我运行代码时，事件上下文为空。当我查看调试器时，`report`计算属性只执行一次，即呈现视图时。单击按钮时，不会评估计算的属性 - 立即调用控制器方法。

非常相似的构造在同一个应用程序中运行良好，但对于不同的视图，方法在路由器中，而不是控制器中：

```
<a href="#" {{action changeDate view.prevDate href=true}}>Prev</a> 
```

看法：

```
HeaderView: baseView.extend({
    prevDate: function () {
        return addDays(this.get('_dataSource').date, -1);
    }.property()
}) 
```

按钮有什么问题，为什么它与链接相反？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T13:12:00.950

不确定这是否是您的特定问题，但计算属性应指定依赖项。例如，

```
}.property('task') 
```

Ember 将缓存计算的属性。该依赖项允许 Ember 知道缓存属性何时失效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T18:34:01.320

好的，经过一些调试，我发现了核心误解。

由车把助手评估的操作的上下文，`action`仅在渲染时执行。这就是其他视图起作用的原因 - 它不需要用户在当前视图中提供的数据，所有必要的信息在视图显示之前都已准备好。

因此，`context`必须在呈现视图之前提供该字段，这与我的场景无关。我必须求助于控制器中的解决方法

```
DayController: ember.Controller.extend({
    addReport: function (evt) {
        console.log(evt.view.get('report'));
    }
}) 
```

太糟糕了，我希望我可以不创建从控制器到视图的额外依赖项。

# scala - playframework2 和 Scala - 如何从 IDEA 启动测试？

> ID：13499434
> 
> 赞同：6
> 
> 时间：2012-11-21T18:08:52.883
> 
> 标签：scala, intellij-idea, playframework-2.0, integration-testing

我从 playframework2 的示例文件夹中获得了[计算机数据库应用程序：](http://www.playframework.org/documentation/2.0.1/resources/manual/gettingStarted/images/computerdatabase.png)

1.  cd 计算机数据库
2.  玩
3.  测试

得到：**所有测试通过**。（什么都可以）

但是当尝试在 IntelliJ IDEA 中启动这些测试时：

1.  cd 计算机数据库
2.  玩的想法
3.  从想法打开项目
4.  鼠标右键单击 ModelSpec，然后 -> Run 'Model Spec' 并得到消息**“没有启动的应用程序 java.lang.RuntimeException：没有启动的应用程序”**
5.  if: play run (rinning application), then got: **Cache play already exists net.sf.ehcache.ObjectExistsException: Cache play already exists**
6.  如果去 localhost:9000 编译一切，应用进化脚本然后得到（再次）：**没有启动的应用程序 java.lang.RuntimeException：没有启动的应用程序**

问题是：如何从 IDEA 启动这些测试？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-07T22:04:45.207

尝试从 IDEAs 类路径中删除 play-source jar。

您可以在“项目结构 -> 库”下找到它

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-16T01:08:35.067

我看到与**缓存播放已存在相同的问题 net.sf.ehcache.ObjectExistsException: 缓存播放已存在**错误。我没有很好的解决方案，但我设法通过添加`ehcacheplugin=disabled`到`application.conf`文件来解决它。这暂时解决了这个问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-21T16:49:02.713

我有同样的问题，它来自以下事实：

*   play 在类路径中出现了两次（2.1 和 2.0.4）
*   或者 ehcache itseld 有两次。

因此，在这两种情况下，问题都可以通过检查`dependencies`报告中的重复项并添加`notTransitive()`到正在导入其他版本的依赖项（在您的 sbt 或 .scala 文件中）来解决。

注意：`notTransitive()`将删除所有传递分辨率，您可以`exclude("<def>")`通过仅排除其中一些来缩小传递分辨率 - 详尽无遗。

# iphone - 如何正确处理 GKSession 的中断？

> ID：13499438
> 
> 赞同：3
> 
> 时间：2012-11-21T18:09:08.720
> 
> 标签：iphone, ios, networking, gamekit, gksession

我的在线广播应用正在播放背景音乐。当用户听音乐并退出应用程序（进入后台）以查看其他位置时，我会拆除 GKSession。这是P2P模式。当用户返回应用程序时，我重新连接 GKSession。

这是正确的吗？如果有电话来电或发生其他中断怎么办？还要杀死 GKSession 并重新创建？

```
NSNotificationCenter *defaultCenter = [NSNotificationCenter defaultCenter];

    // Register for notifications when the application leaves the background state
    // on its way to becoming the active application.
    [defaultCenter addObserver:self 
                      selector:@selector(setupSession) 
                          name:UIApplicationWillEnterForegroundNotification
                        object:nil];

    // Register for notifications when when the application enters the background.
    [defaultCenter addObserver:self 
                      selector:@selector(teardownSession) 
                          name:UIApplicationDidEnterBackgroundNotification 
                        object:nil]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-20T20:08:48.993

你做对了。当您的应用程序处于后台模式时，所有线程都将暂停，包括`GKSession`'s.

`GKSession`当您的应用程序处于“非活动”模式时（例如，当它被电话打断等）时仍然有效。非活动意味着应用程序仍在前台运行，但它没有接收事件。

# ruby-on-rails-3 - 为什么我的 Rails 缓存日志中会显示对“机架”路由的调用？

> ID：13499442
> 
> 赞同：2
> 
> 时间：2012-11-21T18:09:35.037
> 
> 标签：ruby-on-rails-3, memcached, rack, dalli

我的 Rails 3.2 应用程序包含上游负载均衡器的健康检查路由：

```
# routes.rb
get 'health' => lambda { |env| [200, {"Content-Type" => 'application/json'}, [ 'Alive.' ] ] } 
```

我还使用 Dalli 和 memcached 在我的应用程序中缓存各种对象。我最近一直在使用 Dalli 调试输出，并注意到我的日志充满了健康检查：

```
# application.rb
config.cache_store = :dalli_store, "localhost:11211", { :compress => true, :expires_in => 1.day }
Dalli.logger = Logger.new("#{Rails.root}/log/#{Rails.env}_cache.log")
Dalli.logger.level = Logger::DEBUG

# development_cache.log
[DEBUG] Cache read: http://mysite.com/health/?
[DEBUG] Cache read: https://mysite.com:80/health/?
[DEBUG] Cache read: http://mysite.com/health/?
[DEBUG] Cache read: https://mysite.com:80/health/?
[DEBUG] Cache read: http://mysite.com/health/?
[DEBUG] Cache read: https://mysite.com:80/health/?
.... 
```

这些健康检查是否出于某种原因从缓存中提供？这是在哪里配置的？我显然没有设置页面缓存。此路由是与该 URL 关联的唯一代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T23:42:04.307

这可能就是您拥有的 Rack::Cache 中间件。修复它的最简单方法（并且具有通过应用程序的大多数层的好处）是在机架端点中添加与缓存相关的标头：

```
Cache-Control: no-cache 
```

这将防止 Rack::Cache 缓存此操作的结果。顺便说一句，您返回的文本不是有效的 json，因此要么将 Content-Type 更改为 text/plain，要么返回类似 {"result":"alive"}

# ruby-on-rails - Rails 验证字段

> ID：13499443
> 
> 赞同：0
> 
> 时间：2012-11-21T18:09:43.493
> 
> 标签：ruby-on-rails, ruby

我已经关注了[http://ruby.railstutorial.org/](http://ruby.railstutorial.org/)

```
class User < ActiveRecord
  attr_accessible ..., :password, :password_confirmation
  has_secure_password

  validates :password, :presence => true,
                       :length => { :minimum => 6 }
  validates :password_confirmation, :presence => true

  ....
end 
```

问题是创建一个新用户这工作正常，两个密码都必须存在并且它们需要匹配，当我更新它需要我提供密码

例如，如果另一个控制器想要更改用户的任何字段，我必须提供密码，否则我将无法更新。

在创建模型或进行密码更新时，我如何制定一个只需要密码/密码确认的条件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T18:15:54.020

如果您使用的是 rails3，则可以[跳过验证](http://guides.rubyonrails.org/active_record_validations_callbacks.html)。从文档：

> 以下方法跳过验证，并将对象保存到数据库中而不管其有效性。应谨慎使用它们。
> 
> *   减量！
> *   递减计数器
> *   增量！
> *   增量计数器
> *   切换！
> *   触碰
> *   全部更新
> *   更新属性
> *   更新列
> *   更新计数器
> 
> `:validate => false`请注意，如果作为参数传递，save 还可以跳过验证。应谨慎使用此技术。

基本上，用于`find`查找合适的用户，更新您想要的任何字段`user.save!(:validate=>false)`，并且 Bob 是您的叔叔！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-21T18:33:42.890

Rails 支持条件验证，例如在您的用户模型中

```
validates :password_confirmation, :presence => true, :if => :new_password

def new_password
  current_user and current_user.changing_password?
end 
```

您需要在方法中弄清楚`new_password`当您想要验证时如何判断任何条件为真。

请参阅：[http ://railscasts.com/episodes/41-conditional-validations](http://railscasts.com/episodes/41-conditional-validations)

# java - hibernate 存储一个 Set 进入数据库

> ID：13499445
> 
> 赞同：10
> 
> 时间：2012-11-21T18:09:44.430
> 
> 标签：java, spring, hibernate, enums

我正在尝试使用休眠将一组枚举存储到数据库中。

枚举类似于

```
public enum SomeEnum { 
    ITEM,
    ITEM2,
} 
```

我有一个像这样的休眠模型实体

```
@Entity
public class TableObject implements BaseObject {

private Long id;
private Set<SomeEnum> someEnumSet;

@Column(name = "TABLE_COLUMN", nullable = true, insertable = true, updatable = true)
@ElementCollection
public Set<SomeEnum> getSectionSet() {
    return sectionSet;
}

public void setSectionSet(Set<SomeEnum> sectionSet) {
    this.sectionSet = sectionSet;
}
} 
```

而且我不认为@ElementCollection 注释是正确的。'TABLE_COLUMN' 列在 DB 中属于 CLOB 类型。（甲骨文）。

谢谢，亚历克斯。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-22T16:40:15.913

尝试添加@Enumerated 注解：

```
@Entity
public class TableObject implements BaseObject {

   private Long id;
   private Set<SomeEnum> someEnumSet;

   @Column(name = "TABLE_COLUMN", nullable = true, insertable = true, updatable = true)
   @ElementCollection
   @Enumerated(EnumType.STRING)
   public Set<SomeEnum> getSectionSet() {
      return sectionSet;
   }

   public void setSectionSet(Set<SomeEnum> sectionSet) {
      this.sectionSet = sectionSet;
   }
} 
```

它应该使休眠将您的枚举存储为字符串（枚举名称）

# php - mcrypt_decrypt PHP 正确使用

> ID：13499446
> 
> 赞同：3
> 
> 时间：2012-11-21T18:09:52.313
> 
> 标签：php, mcrypt

我认为我的 PHP 安装可能有问题。当我尝试这样做时，我得到

> 警告：mcrypt_decrypt() [function.mcrypt-decrypt]：模块初始化失败

我正在编写一小段代码，它将使用模式 ECB 解密使用 AES-128 加密的以下字符串。

> 密钥（以 base64 编码）：aXJhbmRvbXNlY3VyZWtleQ==
> 
> 加密字符串>（base64编码）：3l6xiNdgRG+PkBw5M0lawvJ/fmuTZPRhEcbtqAmOpDI=

我不断收到模块错误。

这是我尝试过的：

```
<?PHP
$retval = mcrypt_decrypt( "AES-128",
    base64_decode( "aXJhbmRvbXNlY3VyZWtleQ=="), 
    base64_decode( "3l6xiNdgRG+PkBw5M0lawvJ/fmuTZPRhEcbtqAmOpDI") ,
    "ECB");

echo $retval;
?> 
```

这是我的相关phpinfo。我没有看到 AES-128 。也许这就是问题所在。

```
 mcrypt
    mcrypt support  enabled
    Version     2.5.8
    Api No  20021217
    Supported ciphers   cast-128 gost rijndael-128 twofish arcfour      cast-256           loki97      rijndael-192 saferplus wake blowfish-compat des rijndael-256 serpent xtea blowfish enigma rc2 tripledes
    Supported modes     cbc cfb ctr ecb ncfb nofb ofb stream 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-21T18:37:47.610

你很接近，有两个小问题。

首先，`AES-128`不是来自 mcrypt 的有效密码常数。AES 确实是您支持的 rijndael。AES-128的[mcrypt 密码常数](http://www.php.net/manual/en/mcrypt.ciphers.php)`MCRYPT_RIJNDAEL_128`是 string `rijndael-128`。其次，mcrypt 模式必须是小写的。

将您的代码更改为：

```
<?php
$retval = mcrypt_decrypt( "rijndael-128",
    base64_decode( "aXJhbmRvbXNlY3VyZWtleQ=="), 
    base64_decode( "3l6xiNdgRG+PkBw5M0lawvJ/fmuTZPRhEcbtqAmOpDI") ,
    "ecb");

echo $retval; 
```

产生正确的输出：`Is 3 random enough?`

就个人而言，我会使用 mcrypt 常量而不是实际的字符串，所以`rijndael-128`用`MCRYPT_RIJNDAEL_128`和`ecb`替换`MCRYPT_MODE_ECB`。

附带说明一下，如果您要加密大量敏感信息，请考虑使用带有 IV 的 CBC 而不是 ECB。

Mcrypt 可以轻松地为您创建具有适当长度的 IV。示例代码：

```
$ivsize = mcrypt_get_iv_size(MCRYPT_RIJNDAEL_128, MCRYPT_MODE_CBC);
$iv     = mcrypt_create_iv($ivsize); 
```

加密和解密时使用此 IV。您可以将 IV 与您的数据一起作为 base64 编码字符串传递，以实现可移植性。

# python - Python：如何在错误输入之前重复最后一次输入提示？

> ID：13499448
> 
> 赞同：2
> 
> 时间：2012-11-21T18:10:00.283
> 
> 标签：python, loops, for-loop, while-loop

我有一个 for 语句，提示用户输入 5\. 数字。像这样：

```
"Input 1\. number:

input 2\. number:

..
..
.." 
```

我想重复用户在输入错误之前得到的最后一个提示（数字太大）。但是我的程序跳过了错误的程序：

像这样

```
"Input 1\. number:
5
Accepted

input 2\. number:
999
Wrong! Retry
(here I use *continue* for the loop)

input 3.number:

---" 
```

我应该怎么做才能重新问第二个问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-21T18:14:20.130

通过使用`continue`，您可能会继续前进到下一个输入数字。尝试这样的事情：

```
number_of_inputs = 10
max_input = 99
for i in range(number_of_inputs):
    answer = 0
    while not answer or answer > max_input:
        try:
             answer = int(raw_input('Input {}. number: '.format(i)))
        except ValueError:
             continue
    print 'The user selected', answer, 'for input', i 
```

# java - Spring + Hibernate 自动发现带注释的类？

> ID：13499450
> 
> 赞同：0
> 
> 时间：2012-11-21T18:10:07.320
> 
> 标签：java, spring, hibernate

Hibernate 需要您在 Hibernate.cfg.xml 中映射所有实体类，但我不想列出所有这些。我只想引用它们都包含在其中的包。我读过 Spring 允许您的应用程序使用 AnnotationSessionFactoryBean 的 bean 自动发现所有带注释的类，但我不明白我应该如何以及在何处配置它。我的应用程序中的任何地方都没有 persistence.xml 文件 ==> 我正在使用 Hibernate（Session 而不是 EntityManager 等）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-21T18:19:54.277

首先明确您是直接使用 JPA 还是 Hibernate。如果您没有任何persistence.xml，则可能是您没有使用JPA（我建议您使用它，但您仍将在下面使用Hibernate，但您的代码将更加标准并且独立于Hibernate）。

Spring 确实支持通过以下方式自动扫描实体类：

```
<context:component-scan base-package="your.package.name" /> 
```

我知道它适用于 JPA，不确定是否直接适用于 Hibernate。

我的工作 Spring 应用程序配置文件片段如下所示，其中包括 Hibernate 属性（从而完全消除了对文件的需要）：

```
<context:component-scan base-package="your.package.name" />
<tx:annotation-driven transaction-manager="transactionManager"/>

<bean class="org.springframework.dao.annotation.PersistenceExceptionTranslationPostProcessor" />

<bean id="transactionManager"
      class="org.springframework.orm.jpa.JpaTransactionManager"
      p:entityManagerFactory-ref="entityManagerFactory" />

<bean id="entityManagerFactory"
      class="org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean"
      p:persistenceUnitName="persistenceUnitName">  <!-- this comes from persistence.xml -->

    <property name="jpaVendorAdapter">
        <bean class="org.springframework.orm.jpa.vendor.HibernateJpaVendorAdapter" />
    </property>

    <property name="jpaProperties">
        <props>
            <prop key="hibernate.hbm2ddl.auto">validate</prop>
            <prop key="hibernate.connection.provider_class">org.hibernate.service.jdbc.connections.internal.C3P0ConnectionProvider</prop>

            <prop key="hibernate.dialect">org.hibernate.dialect.PostgreSQL82Dialect</prop>
            <prop key="hibernate.connection.driver_class">org.postgresql.Driver</prop>
            <prop key="hibernate.connection.url">jdbc:postgresql://localhost:5432/myDB</prop>
            <prop key="hibernate.connection.username">username</prop>
            <prop key="hibernate.connection.password">password</prop>

            <prop key="hibernate.ejb.naming_strategy">org.hibernate.cfg.ImprovedNamingStrategy</prop>
            <prop key="hibernate.id.new_generator_mappings">true</prop>
            <prop key="hibernate.show_sql">false</prop>
            <prop key="hibernate.jdbc.batch_size">50</prop>
            <prop key="hibernate.id.new_generator_mappings">true</prop>
            <prop key="hibernate.c3p0.maxSize">100</prop>
            <prop key="hibernate.c3p0.minSize">10</prop>
            <prop key="hibernate.c3p0.acquireIncrement">10</prop>
            <prop key="hibernate.c3p0.idleTestPeriod">300</prop>
            <prop key="hibernate.c3p0.maxStatements">0</prop>
            <prop key="hibernate.c3p0.timeout">1800</prop>
            <prop key="hibernate.c3p0.checkoutTimeout">0</prop>
            <prop key="hibernate.c3p0.preferredTestQuery">SELECT 1;</prop>
        </props>
    </property>
</bean> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T18:35:53.323

如果您正在学习 spring，我建议使用 spring ROO 来设置您的项目。这将设置所有 spring 最佳实践。然后，您可以将您的课程移动到一个新的 spring roo 项目中（如果您的项目不是太大/复杂）。

# c++ - 圆形素数，帮助查找错误，C++

> ID：13499451
> 
> 赞同：1
> 
> 时间：2012-11-21T18:10:05.973
> 
> 标签：c++, primes

花了一个小时试图找出一个错误，但没有成功:(
解决欧拉的问题：[http](http://projecteuler.net/problem=35)
://projecteuler.net/problem=35 似乎我的脑袋现在不工作

代码没有优化，抱歉（我在这里做错了什么？）正确答案是 55，我的程序给了我 22

```
#include "euler.hpp"
#include <algorithm>

int main() {
    euler::prime_generator<euler::eratosthenes_sieve> gen;
    gen.range(0, 1000000);
    unsigned c = 0; // number of circular primes
    unsigned p = 0; // number of primes (test)
    unsigned prime;
    while(prime = gen.nextPrime()) {
        p++;
        bool ok = true;
        std::vector<unsigned> pv = euler::number2vector(prime);
        if(pv.size() > 1) {

            bool cont = false;
            for(unsigned i = 0; i < pv.size(); ++i) {
                if(pv[i] % 2 == 0) { cont = true; break; }
            }
            if(cont) continue;
            std::sort(pv.begin(), pv.end());

            do {
                if(!gen.isPrime(euler::array2number(&pv[0], pv.size()))) {
                    // was desperate and made this
                    if(euler::isPrime(euler::array2number(&pv[0], pv.size()))) {
                        std::cout << prime << " -> " << euler::array2number(&pv[0], pv.size()) << std::endl;
                    }
                    else ok = false;
                    break;
                }
            } while(std::next_permutation(pv.begin(), pv.end()));

        }
        if(ok) {
            //std::cout << prime << std::endl;
            c++;
        }
        //std::cout << prime << std::endl;
    }

    std::cout << p << " -> " << c << std::endl;

    euler::pause();
} 
```

我使用的几个外部函数

```
// in class
void range(unsigned lower_bound, unsigned upper_bound) {
    m_lower_bound = lower_bound;
    primes.resize(upper_bound - lower_bound + 1, true);
    for(unsigned i = 0; i < 2 - lower_bound; ++i) primes[i] = false;
    for(unsigned i = 2; i <= sqrt(upper_bound - lower_bound); ++i) {
        if(primes[i]) {
            for(unsigned j = i*i; j <= upper_bound; j += i) {
                primes[j] = false;
            }
        }
    }
}
// in the same class
bool isPrime(unsigned number) {
    return primes[number - m_lower_bound];
}

// in the same class
unsigned nextPrime() {
    for(; next <= m_upper_bound; ++next) {
        if(isPrime(next)) return next++ + m_lower_bound;
    }
    return 0;
}

template <typename T>
T array2number(T * begin, unsigned length) {
    T number = 0;
    unsigned m = 1;
    while(length--) {
        number += begin[length] * m;
        m *= 10;
    }
    return number;
}

template <typename T>
std::vector<T> number2vector(T number) {
    unsigned l = number_length(number);
    std::vector<T> vec(l);
    while(l--) {
        vec[l] = number % 10;
        number /= 10;
    }
    return vec;
} 
```

先感谢您！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T18:55:39.600

这个问题在SO上已经解决了很多次。搜索“[c++] 素数欧拉”。

证据由`for`循环的终止条件给出：

```
sqrt(upper_bound - lower_bound) 
```

`primes[]`我在您的帖子中找不到 的定义。`range`函数访问它，但它不是通过参数提供的，也不是在函数中声明的数组`primes`。

您可以通过搜索 SO 和网络获得大量信息。在发布之前尝试一下。

# ios - 更改框架不会调整 UIImageView 的大小

> ID：13499455
> 
> 赞同：3
> 
> 时间：2012-11-21T18:10:17.037
> 
> 标签：ios, cocoa-touch, uikit

在我的 iPhone 应用程序中，我试图以编程方式调整 UIImageView 的大小并移动它，以便将其作为 iPhone 屏幕左上角的原点，并使其既宽又高作为屏幕的高度。为此，我使用以下代码：

```
-(void)viewDidLoad
{
     //Getting screen size
     CGRect screenSize = [[UIScreen mainScreen]bounds];

     //Creating the new frame for the UIImageView
     CGRect arect = CGRectMake(0, 0, screenSize.size.height, screenSize.size.height);
     //Setting the image to show

     UIImage *image = [UIImage imageNamed:@"Adele.jpg"];
     self.imageView.image = image;

     //Setting new frame and contentmode
     self.imageView.frame = arect;
     self.imageView.contentMode = UIViewContentModeScaleToFill;
} 
```

self.imageView 是我用 InterfaceBuilder 创建的一个插座。

问题是当我启动应用程序时，这段代码似乎对 UIImageView 的框架没有任何影响。imageview infact 将显示在我使用 IB 创建它时设置的相同位置和相同大小。

你们中有人知道为什么这段代码不起作用吗？我错过了什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-21T18:21:56.573

我认为您可能需要不同的内容模式。

试一试`UIViewContentModeScaleAspectFit`。在上下文中：

```
self.imageView.frame = arect;  
self.imageView.contentMode = UIViewContentModeScaleToFill; 
```

如果这不起作用，您可以`initWithFrame`：

```
CGRect myImageRect = CGRectMake(0.0f, 0.0f, 320.0f, 109.0f);
UIImageView *myImage = [[UIImageView alloc] initWithFrame:myImageRect];
[myImage setImage:[UIImage imageNamed:@"myImage.png"]]; 
```

[资源](http://www.iphoneexamples.com/)

# email - PHP 邮件功能故障排除

> ID：13499459
> 
> 赞同：1
> 
> 时间：2012-11-21T18:10:46.657
> 
> 标签：email, sendmail, php

如何对 PHP 的邮件功能进行故障排除？下面的代码（显然我在那里有我的实​​际电子邮件地址）输出**错误**，我没有收到消息：

```
if(mail("email@address.com","test subject","test messaeg"))
    echo "SENT";
else
    echo "ERROR"; 
```

我的 php.ini 具有 CentOS 6.3 最小设置的默认设置：

```
SMTP = localhost
smtp_port = 25
sendmail_path = /usr/sbin/sendmail -t -i
mail.add_x_header = On 
```

我通过 SSH 尝试了以下操作，效果很好。我收到了到我的 gmail 帐户的消息：

```
echo "Body text." | mail -s "Hello world" email@adderss.com 
```

我应该从哪里解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T18:28:58.523

弄清楚了...

必须使用此处的说明禁用 SELINUX：[http ://www.crypt.gen.nz/selinux/disable_selinux.html](http://www.crypt.gen.nz/selinux/disable_selinux.html)

# http - 处理 REST 中的关系

> ID：13499461
> 
> 赞同：0
> 
> 时间：2012-11-21T18:10:54.183
> 
> 标签：http, rest, restful-architecture

我正在学习如何制作一个好的 REST API。所以，假设我有以下模型：

```
Post
    has title, body, publish_date
    has_many comments, authors

Comment
    has author, publish_date 
```

那么，如果我调用`GET /post`, 来获取所有帖子，它的评论应该如何返回？我在想这样的事情：

```
{
    'post/1': {
        'title': 'My first post',
        'body': 'a big body',
        'publish_date': '20121120',
        'comments': 'post/1/comments',
        'authors': 'post/1/authors'
    },
    'post/2': {
        'title': 'Another post',
        'body': 'a REALLY BIG body',
        'publish_date': '20121121',
        'comments': 'post/2/comments',
        'authors': 'post/2/authors'
    }
} 
```

我也在考虑将每个评论的资源直接作为`/post`回应，比如

```
'comments': {
    'post/1/comment/1',
    'post/1/comment/2',
    'post/1/comment/3'
} 
```

那么，最好的方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T18:15:36.977

如果每个帖子“拥有”它的评论，您可以简单地将评论数据与帖子数据一起发送：

```
{
    'post/1': {
        'title': 'My first post',
        'body': 'a big body',
        'publish_date': '20121120',
        'comments': [/* comment data here */],
        'authors': 'post/1/authors'
    },
    'post/2': {
        'title': 'Another post',
        'body': 'a REALLY BIG body',
        'publish_date': '20121121',
        'comments': [/* comment data here */],
        'authors': 'post/2/authors'
    }
} 
```

您可能想对作者做同样的事情。经验法则：作为 API 的消费者，我不想为了获取所有相关数据而不断进行 API 调用。如果响应大小/时间是一个问题，至少让我*可以选择*获取后相关字段；还要考虑响应分页。

# visual-studio - 如何在安装程序名称中使用构建变量

> ID：13499464
> 
> 赞同：3
> 
> 时间：2012-11-21T18:11:00.507
> 
> 标签：visual-studio, installation, wix

在我的安装程序项目 (WiX) 中，我在属性页面的 Build 选项卡上定义了一个预处理器变量，如下所示：

```
Version=1.1.0.0 
```

为了争论，假设我可以很容易地将它定义为变量而不是预处理器变量。

因此，我的目标是：我想在安装程序输出名称中使用此变量：

```
Me.Common_$(Version) 
```

当然，上述方法不起作用 - 未找到引用的变量，因此实际输出最终为`Me.Common_.msi`. 有没有办法在这种情况下使用用户定义的变量？

* * *

另一个可行的选择是在构建后事件中重命名 MSI 文件。但是，我仍然无法在此处访问该变量。

```
ren "!(TargetPath)" "$(TargetName)_$(Version)$(TargetExt)" 
```

这些方法中的任何一种的解决方案都对我有用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-23T14:29:42.763

在第一个 PropertyGroup 节点下的 .wixproj 文件中查找/添加这些：

```
<Version Condition=" '$(Version)' == ''">1.1.0.0</Version>
<OutputName>My.Common_$(Version)</OutputName> 
```

然后，当您编译时，您可以使用“/p”开关传递版本，即：

```
msbuild <your.wifproj> /p:Version=1.1.2.0 /t:rebuild 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T14:28:58.820

我不确定你会如何做到这一点，只使用 WIX。

我会尝试使用 MSBuild 和[Target Builds](http://msdn.microsoft.com/en-us/library/ms171462.aspx)

看看我在 SO 上的帖子，[将参数传递给 MSBuild](https://stackoverflow.com/questions/232052/msbuild-specifying-a-target-from-the-command-line)

# objective-c - UIScrollView 不使用自动布局约束

> ID：13499467
> 
> 赞同：79
> 
> 时间：2012-11-21T18:11:14.387
> 
> 标签：objective-c, uiscrollview, constraints, autolayout

我在它后面有一个滚动视图和一个图像视图，我正在用笔尖填充它。我正在使用自动布局。我在两个视图上都有一个用于超级视图的底部空间和一个用于超级视图的顶部空间。图像视图完全符合我的要求。对于 iphone 5，这是我想要的。对于其他 iphone，它位于屏幕底部上方，因此可以正确调整大小。滚动视图在 iphone 5 上看起来正确，但在其他手机上它没有调整大小，因此它向下滚动到应用程序视图下方。我在日志中收到这些消息：

```
 2012-11-21 10:42:38.576 LCHApp[12604:907] Unable to simultaneously satisfy constraints.
Probably at least one of the constraints in the following list is one you don't want. 
  Try this: (1) look at each constraint and try to figure out which you don't expect;
  (2) find the code that added the unwanted constraint or constraints and fix it.
 (Note: If you're seeing NSAutoresizingMaskLayoutConstraints that you don't understand, refer
  to the documentation for the UIView property translatesAutoresizingMaskIntoConstraints) 

"<NSLayoutConstraint:0x1d8ea080 UIScrollView:0x1d8413b0.bottom == UIImageView:0x1d892110.bottom>",
"<NSAutoresizingMaskLayoutConstraint:0x1d8cca10 h=-&- v=-&- ScheduleViewNib:0x1d853630.height == UIScrollView:0x1d8413b0.height - 386>",
"<NSLayoutConstraint:0x1d8e5340 V:[UIImageView:0x1d892110]-(64)-|   (Names: '|':ScheduleView:0x1d8efc30 )>",
"<NSAutoresizingMaskLayoutConstraint:0x1d8cf520 h=--& v=--& V:[ScheduleView:0x1d8efc30(480)]>",
"<NSLayoutConstraint:0x1d8eaed0 V:|-(45)-[UIScrollView:0x1d8413b0]   (Names: '|':ScheduleView:0x1d8efc30 )>"

 Will attempt to recover by breaking constraint 
 <NSLayoutConstraint:0x1d8ea080 UIScrollView:0x1d8413b0.bottom ==      UIImageView:0x1d892110.bottom> 
```

我已经试过了

```
[self setTranslatesAutoresizingMaskIntoConstraints:YES]; 
```

和

```
[self.myScrollView setTranslatesAutoresizingMaskIntoConstraints:YES]; 
```

据我所知，这只是消除了视图中的所有约束。而且不是我想要的。

* * *

## 回答 #1

> 赞同：177
> 
> 时间：2012-11-25T03:37:05.870

UIScrollView 和自动布局的关系不同于自动布局的其他方面。基本上，如果允许运行简单的自动布局，则什么都不会滚动。例如，如果滚动视图的子视图以正常方式被固定到距离滚动视图顶部 10 个点的约束，那么它将绝对固定在那里；无论滚动视图如何滚动，它都不会移动。

为了解决这个问题，使用自动布局的 UIScrollView 以全新的方式运行。因此，当您说“我正在使用自动布局”时，您必须准备好让事情的运作方式与以前大不相同。您必须使用带有`translatesAutoresizingMaskIntoConstraints = YES`和显式内容大小的单个滚动视图子视图，否则所有内容都必须具有`translatesAutoresizingMaskIntoConstraints = NO`并且内容大小将根据子视图的约束隐式推导出。

[这在https://developer.apple.com/library/content/releasenotes/General/RN-iOSSDK-6_0/index.html](https://developer.apple.com/library/content/releasenotes/General/RN-iOSSDK-6_0/index.html)中有很好的解释

* * *

## 回答 #2

> 赞同：162
> 
> 时间：2013-04-16T04:50:10.570

使用自动布局时非常重要：您必须将最后一个子视图的右侧和/或底部固定到滚动视图的右侧和/或底部。这就是滚动视图知道内容大小的方式。例如：

```
[scrollView addConstraint:[NSLayoutConstraint constraintWithItem:lastSubView
                                                 attribute:NSLayoutAttributeRight
                                                 relatedBy:NSLayoutRelationEqual
                                                    toItem:scrollView
                                                 attribute:NSLayoutAttributeRight
                                                multiplier:1.0
                                                  constant:0]]; 
```

我感谢[这个网站](http://www.apeth.com/iOSBook/ch20.html)提供了完美的例子。

我因此失去了几个小时，我希望减轻其他人的痛苦。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-01-22T03:47:26.287

为了让 UIScrollviews 能够很好地处理约束，我使用了这里回答[的](https://stackoverflow.com/questions/21017318/uiscrollviews-subviews-not-resizing-themselves-on-portait-to-landscape-orientati/28080828#28080828)方法。在那个答案中，我解决了如何让**垂直**滚动的滚动视图工作，它也适用于设备旋转。您也可以调整使用**水平**滚动滚动视图的方法。对于双向滚动的滚动视图，**不要**添加大小匹配宽度约束技巧。但做其他一切都一样。

* * *

## 回答 #4

> 赞同：-3
> 
> 时间：2012-11-24T05:55:13.360

有几件事。

1.  确保自动布局已打开（“文件检查器选项卡”上的 IB）
2.  确保您没有进行任何涉及边界、框架等的更改 - 现在这一切都由自动约束完成
3.  确保远离 AutoResizingMask。这将与您的新设置竞争。如果这些都做对了，你现在可以布局你的按钮，它会很好用。就是这样。

此错误表明您的笔尖或该笔尖中的控件未使用自动布局。

# python - 有什么方法可以过滤鼻子中的覆盖率报告吗？

> ID：13499468
> 
> 赞同：1
> 
> 时间：2012-11-21T18:11:16.853
> 
> 标签：python, django, code-coverage, nose

我正在使用 django-nose，它确实生成了一个巨大的覆盖率报告。如果可能的话，我想过滤它的输出。

以下是输出示例：

```
 (venv) C:\Users\fsantos\Desktop\biskates.com\biskates\biskates_project>python manage.py test biskates --with-coverage
    nosetests --verbosity 1 biskates --with-coverage
    Creating test database for alias 'default'...
    .C:\Users\fsantos\Desktop\biskates.com\venv\lib\site-packages\django\db\models\fields\__init__.py:808: RuntimeWarning: DateTimeField received a naive datetime (2012-11-21 18:04:49.075000) while time zone support is active.
      RuntimeWarning)
    ....C:\Users\fsantos\Desktop\biskates.com\venv\lib\site-packages\django\db\models\fields\__init__.py:808: RuntimeWarning: DateTimeField received a naive datetime
    (2012-11-21 18:04:51.494000) while time zone support is active.
      RuntimeWarning)
    ...............
    Name
          Stmts   Miss  Cover   Missing
    --------------------------------------------------------------------------------------------------------------------
    biskates.managers
             26      0   100%
    biskates.models
             67      0   100%
    biskates.templatetags
              0      0   100%
    biskates.templatetags.biskates
              1      0   100%
    biskates.views
             90      0   100%
    biskates_project.urls
             19      0   100%
    communication.forms
              9      0   100%
    communication.managers
              9      0   100%
    communication.models
             44      0   100%
    communication.views
             59      0   100%
    debug_toolbar.management
              0      0   100%
    debug_toolbar.middleware
             87     87     0%   4-137
    debug_toolbar.models
              0      0   100%
    debug_toolbar.templatetags
              0      0   100%
    debug_toolbar.toolbar
              0      0   100%
    debug_toolbar.toolbar.loader
             51     51     0%   4-98
    debug_toolbar.urls
              3      3     0%   7-11
    django.conf.locale
              1      1     0%   1
    django.conf.locale.en
              0      0   100%
    django.conf.locale.en.formats
             14     14     0%   7-42
    django.contrib.admin
             19     19     0%   3-41
    django.contrib.admin.actions
             34     34     0%   5-83
    django.contrib.admin.filters
            181    181     0%   8-402
    django.contrib.admin.forms
             27     27     0%   1-43
    django.contrib.admin.helpers
            245    245     0%   1-352
    django.contrib.admin.options
            735    735     0%   1-1464
    django.contrib.admin.sites
            203    203     0%   1-444
    django.contrib.admin.templatetags
              0      0   100%
    django.contrib.admin.templatetags.admin_static
              7      7     0%   1-11
    django.contrib.admin.util
            256    256     0%   1-425
    django.contrib.admin.widgets
            211    211     0%   5-317
    django.contrib.auth.backends
             63     63     0%   1-125
    django.contrib.auth.context_processors
             22     22     0%   4-43
    django.contrib.auth.forms
            175    175     0%   1-335
    django.contrib.auth.hashers
            200    200     0%   1-388
    django.contrib.auth.management
             64     64     0%   4-126
    django.contrib.auth.middleware
             35     35     0%   1-80
    django.contrib.auth.models
            244    244     0%   1-476
    django.contrib.auth.tokens
             33     33     0%   1-71
    django.contrib.contenttypes.generic
            274    274     0%   5-498
    django.contrib.contenttypes.management
             34     34     0%   1-79
    django.contrib.contenttypes.models
             91     91     0%   1-169
    django.contrib.contenttypes.views
             49     49     0%   1-80
    django.contrib.messages.context_processors
              3      3     0%   1-8
    django.contrib.messages.middleware
             11     11     0%   1-26
    django.contrib.messages.models
              0      0   100%
    django.contrib.messages.storage.base
             81     81     0%   1-181
    django.contrib.messages.storage.cookie
             76     76     0%   1-151
    django.contrib.messages.storage.fallback
             29     29     0%   1-54 
```

(...)

```
 123    123     0%   5-260
    south.v2
              8      8     0%   6-19
    urls
              0      0   100%
    urls.models
             23      2    91%   22, 31
    userprofiles.managers
              4      0   100%
    userprofiles.models
             18      1    94%   14
    userprofiles.views
              4      0   100%
    xml.dom.pulldom
            270    270     0%   1-351
    --------------------------------------------------------------------------------------------------------------------
    TOTAL
           7625   6826    10%
    ----------------------------------------------------------------------
    Ran 20 tests in 10.996s

    OK
    Destroying test database for alias 'default'...

    (venv) C:\Users\fsantos\Desktop\biskates.com\biskates\biskates_project> 
```

为了不损坏您的滚动条，我删除了一半的输出。

正如你所看到的，它非常彻底，它得到了很多我不关心的信息。

我以前使用过 django-test-coverage，但现在我想先将鼻子投入到 django-nose 的优点中，并且不想被束缚在普通的旧 django`TestCase`类的子类中编写测试。

我如何过滤这个巨大的输出？

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-21T18:31:31.437

您可以使用 --cover-package 指定要使用nosetest 覆盖的包，例如：

```
nosetests --with-coverage --cover-package=herokuapp 
```

仅报告我在 herokuapp 目录中编写的模块。

# rotation - 在 Bullet Physics 中即时更改 btRigidBody 的位置/方向

> ID：13499472
> 
> 赞同：4
> 
> 时间：2012-11-21T18:11:27.637
> 
> 标签：rotation, position, bulletphysics, on-the-fly

我知道它违反了物理定律，但尽管在游戏中瞬间改变身体的位置和方向通常有实际原因，但大多数物理模拟库都不允许这样做，所以 Bullet Physics 也不会。

因此，我将不胜感激对此的任何建议或评论。

顺便说一句，我想到了需要那些即时变化的瞬移。还有一个更奇特的应用可能是惯性——例如，当倾斜或旋转带有加速度计的便携式设备时，物体相对于用户来说看起来是静态的。增强现实不应该听起来俗气。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-23T19:25:50.910

假设我正确理解了您的问题，我建议您查看`BulletDynamics/Character/btCharacterControllerInterface.h`和/或`BulletDynamics/Dynamics/btActionInterface.h`. 在实现角色移动时，通常想要“改变规则”——例如，实现传送，可以使用`void warp(const btVector3& origin)`from 的方法`btCharacterControllerInterface`。

就个人而言，我很幸运直接继承自`btActionInterface`，存储了一个指向 a 的指针`btGhostObject`，我可以从那里更新并实现我的逻辑，但是 YMMV.

注意：如果你*只是*想改变位置和方向，你应该可以`void setWorldTransform(const btTransform& worldTrans)`调用`btRigidBody`.

# c++ - 在 std::vector 中插入迭代器范围

> ID：13499478
> 
> 赞同：2
> 
> 时间：2012-11-21T18:11:53.387
> 
> 标签：c++

我有一个多重集，我从中得到了一个范围。我想将此范围添加到向量中以供以后使用，这就是我正在做的事情：

```
class foo
{
    public:
        int a;
        foo(int a) : a(a){}
};
class FooPointerCompare
{
    public:
        bool operator()(const foo* a, const foo* b)
        {
            return a->a < b->a;
        }
};

std::multiset<foo*, FooPointerCompare> m;
std::vector<std::multiset<foo*, FooPointerCompare>::iterator> v;
auto pair = m.equal_range(new foo(5)); //leak here, I know
v.insert(v.end(), pair.first, pair.second); 
```

但我收到这些错误：

```
No matching constructor for initialization of 'std::__1::__tree_const_iterator<foo *, const std::__1::__tree_node<foo *, void *> *, int>'

No viable overloaded '=' 
```

当我使用简单时`for(auto it = pair.first; it != pair.second; it++) v.push_back(it);`，它可以完美运行。我的`vector::insert`电话有什么问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-21T18:16:29.447

有什么问题是

```
v.insert(v.end(), pair.first, pair.second); 
```

相当于

```
for (auto it = pair.first; it != pair.second; ++ it)
    v.push_back(*it);
//              ^ 
```

这与您的意图不同。我认为没有任何标准算法可以做你想做的事。最好只写出 for 循环。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-21T18:16:39.083

`vector::insert`期望指向要插入向量中的值的迭代器。

由于您有一个迭代器向量，因此您必须向它传递一些迭代迭代器的东西。但是你传递给它的东西会迭代你的多重集中的元素。

因此，这失败的原因与您不能这样做的原因相同：

```
std::vector<char*> v;
char foo[10];
v.insert(v.end(), foo, foo+10); 
```

或者：

```
std::vector<int> v;
v.insert(v.end(), 0, 10); 
```

所有三个问题的一种解决方案是[`boost::counting_iterator`](http://www.boost.org/doc/libs/1_52_0/libs/iterator/doc/counting_iterator.html). 在你的情况下：

```
v.insert(v.end(),
    boost::make_counting_iterator(pair.first), 
    boost::make_counting_iterator(pair.second)
); 
```

# android-ndk - 在android上使用ffmpeg将AAC解码为PCM

> ID：13499480
> 
> 赞同：2
> 
> 时间：2012-11-21T18:12:04.863
> 
> 标签：android-ndk, ffmpeg, java-native-interface, aac

我在 ubuntu 上使用 android NDK (r8c) 构建了 ffmpeg 0.8.12 (love)。然后我通过 JNI 在另一个 android 应用程序中使用生成的库。

基本上我想做的是将一个字节流从java传递给我的c jni函数，并使用ffmpeg将其解码为PCM音频缓冲区，然后将其传递回java以使用Android的AudioTrack播放。我可以成功地将缓冲区传递给 jni（已经检查了值）并且 ffmpeg 似乎正确初始化，但是当它尝试解码第一帧时，它在 aacdec.c 中的 aac_decode_frame_int 方法中引发错误“通道元素 0.0 不是分配”。aac 文件播放正常且有效。

这是我进行解码的 jni 代码

```
jint Java_com_example_testffmpeg_MainActivity_decodeAacBytes(JNIEnv * env,
        jobject this, jbyteArray input, jint numBytes) {

    //copy bytes from java
    jbyte* bufferPtr = (*env)->GetByteArrayElements(env, input, NULL);
    uint8_t inputBytes[numBytes + FF_INPUT_BUFFER_PADDING_SIZE];
    memset(inputBytes, 0, numBytes + FF_INPUT_BUFFER_PADDING_SIZE);
    memcpy(inputBytes, bufferPtr, numBytes);
    (*env)->ReleaseByteArrayElements(env, input, bufferPtr, 0);

    av_register_all();

    AVCodec *codec = avcodec_find_decoder(CODEC_ID_AAC);

    if (codec == NULL) {
        LOGE("Cant find AAC codec\n");
        return 0;
    }
    LOGI("AAC codec found\n");

    AVCodecContext *avCtx = avcodec_alloc_context();

    if (avCtx == NULL) {
        LOGE("Could not allocate codec context\n");
        return 0;
    }
    LOGI("codec context allocated\n");

    if (avcodec_open2(avCtx, codec, NULL) < 0) {
        LOGE("Could not open codec\n");
        return 0;
    }
    LOGI("AAC codec opened");

    //the input buffer
    AVPacket avPacket;
    av_init_packet(&avPacket);

    LOGI("AVPacket initialised\n");

    avPacket.size = numBytes; //input buffer size
    avPacket.data = inputBytes; // the input buffer

    int outSize;
    int len;
    uint8_t *outbuf = malloc(AVCODEC_MAX_AUDIO_FRAME_SIZE);

    while (avPacket.size > 0) {
        outSize = AVCODEC_MAX_AUDIO_FRAME_SIZE;
        len = avcodec_decode_audio3(avCtx, (short *) outbuf, &outSize,
                &avPacket);

        if (len < 0) {
            LOGE("Error while decoding\n");
            return 0;
        }

        if (outSize > 0) {
            LOGI("Decoded some stuff\n");
        }

        avPacket.size -= len;
        avPacket.data += len;
    }

    LOGI("Freeing memory\n");

    av_free_packet(&avPacket);
    avcodec_close(avCtx);
    av_free(avCtx);

    return 0;
} 
```

问题出现在对 avcodec_decode_audio3 的调用中，当解码第一次发生时。我已经通过 ffmpeg 代码，但找不到问题。任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-21T23:01:39.780

`AVCodecContext`在调用之前，您必须设置一些额外的设置`avcodec_open2`。

我通常设置这些必需的设置（以“k”开头的变量表示预定义的常量）：

```
avCtx->strict_std_compliance = FF_COMPLIANCE_EXPERIMENTAL;
avCtx->codec_type = AVMEDIA_TYPE_AUDIO;
avCtx->channels = kChannelsCount; // for example, 2
avCtx->sample_fmt = kSampleFmt; // AV_SAMPLE_FMT_S16
avCtx->sample_rate = kSampleRate; // 44100
avCtx->channel_layout = kSampleLayout; // 3
const AVRational timeBase = {1, avCtx->sample_rate};
avCtx->time_base = timeBase; 
```

**UPD**

对不起，我写了音频*编码*必须设置的参数。对于音频解码，通常设置足够`avCtx->channels`，`ctx->sample_rate`或者设置`avCtx->extrdata`和`avCtx->extradata_size`。

要查找错误原因，请尝试查看 ffmpeg 输出。如果在设备上很难做到，您可以重定向 ffmpeg 输出并通过自己的回调执行日志记录。例子：

```
 // initialize:
    ::av_log_set_callback(&my_ffmpeg_log);

    // callback
    void my_ffmpeg_log(void *ptr, int level, const char *fmt, va_list vl)
    {
      /// Here you can set a more detailed level
      if (level < AV_LOG_VERBOSE)
      {
        static char message[8192];
        const char *module = NULL;

        if (ptr)
        {
          AVClass *avc = *(AVClass**) ptr;
          if (avc->item_name)
            module = avc->item_name(ptr);
        }
        vsnprintf(message, sizeof message, fmt, vl);
        // you can set own function here, for example LOGI, as you have in your example
        std::cout << "ffmpeg message : " << module << " " << level << " " << message;
      }
    } 
```

# bash - 我们可以将上一个命令的状态重定向到另一个变量吗

> ID：13499483
> 
> 赞同：0
> 
> 时间：2012-11-21T18:12:11.020
> 
> 标签：bash, shell

我们可以将上一个命令的状态重定向到另一个变量吗？
比如：echo hello
s=echo $?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T19:50:32.910

您可以分配它：

```
echo hello
myVariable=$?
echo "Previous echo exit code is $myVariable" 
```

`$?`和其他变量一样，它只是一个变量——唯一的魔力在于它是如何“自动”设置的。

# c# - 设计一个自定义的 TabPage，这种方法可以接受吗？

> ID：13499484
> 
> 赞同：0
> 
> 时间：2012-11-21T18:12:14.887
> 
> 标签：c#, .net-3.5, tabcontrol, tabpage

我有一种情况，我正在加载许多标签页，但标签页在加载时需要有一组控件。

我解决这个问题的方法是创建一个新控件 - CustomTab : UserControl。这使我可以访问设计器，但为了配置选项卡，我仍然必须拖出一个 TabControl。因此，在选项卡控件出来后，我配置了一个包含所有我需要的控件的选项卡（以及许多用户控件和数据库逻辑）。然后我包含一个返回 TabPage 控件的方法。

所以在我的主应用程序中，我在表单上设置了一个普通的 TabControl。每当我需要一个新选项卡时，我首先在代码中创建一个我的 CustomTab 实例，然后通过我的 CustomTabs 返回方法将选项卡添加到表单 TabControl。

这是多么糟糕的设计？即使从未使用过该控件，让整个 TabControl 来托管选项卡似乎有点奇怪，但这只是让设计新选项卡变得轻而易举（设置模板用户控件，我只需复制并开始设计选项卡）。

我是否在浪费大量资源？有没有更有效的方法可以做到这一点，仍然可以让我设计标签？

最好的问候，约翰 W。

# php - 配置 cakephp 控制器无法识别文件结构

> ID：13499485
> 
> 赞同：1
> 
> 时间：2012-11-21T18:12:13.893
> 
> 标签：php, cakephp, url-routing

我正在尝试在我的 ~/Sites/cakeapps/cakephp 下启动一个新的 cakePHP 项目

文件夹结构。我能够使用`cake bake`命令创建一个新项目，并将项目放在我的`/cakephp`目录中。我的项目文件结构现在看起来像这样。

```
/cakeapps/cakephp/app/<Project>/ 
```

我已按照教程进行操作，并且配置了我的 database.php 文件，配置了 core.php 并创建了一个自定义控制器，该控制器`<IjazaController>`扩展了`AppController`. 这个文件

```
class IjazaController extends AppController {

    function beforeFilter(){
        parent::beforeFilter();
    }

    public  function  index(){

    }
} 
```

下有对应的 index.ctp 文件`/View/Ijaza/index.ctp`。当我尝试浏览到这个 url`http://localhost/cakephp/ijaza/`时，我得到了一个错误：

```
Error: CakephpController could not be found.

Error: Create the class CakephpController below in file: cakephp/Controller/CakephpController.php

<?php
class CakephpController extends AppController {

} 
```

我不确定为什么我的 url 路由找不到 index.ctp 文件，我正在使用带有 XAMPP 的 mac

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T18:21:06.633

您混淆了一些东西：该文件夹`cakephp`不是必需的。

将您的文件夹重新排列到此结构中，`yourproject`您的项目的名称在哪里（或应用程序文件夹的副本......）：

```
~/Sites/ 
~/Sites/cakephp/ --> The cakephp library
~/Sites/cakephp/yourproject/ --> Your application code 
```

**例子**

```
~/Sites/cakephp/plugins/
~/Sites/cakephp/vendors/
~/Sites/cakephp/lib/Cake/bootstrap.php
...

~/Sites/cakephp/yourproject/Config/core.php
...
~/Sites/cakephp/yourproject/Controller/IjazaController.php
...
~/Sites/cakephp/yourproject/View/Ijaza/index.ctp 
```

# c# - 带有 NTLM 身份验证的 HTTP 上的 Web 服务

> ID：13499493
> 
> 赞同：3
> 
> 时间：2012-11-21T18:12:44.480
> 
> 标签：c#, web-services, asmx

我们正在尝试创建一个通过 HTTP（不是 HTTPS）使用的 Web 服务，并使用 NTLM/Windows 身份验证。不幸的是，我们似乎找不到那个“完美”的组合。无论我们尝试什么，使用 Windows 身份验证似乎总是想强迫我们使用 HTTPS；并且使用 HTTP 似乎忽略了 Windows 身份验证的所有尝试。

到目前为止，这是我们的 app.config：

```
<?xml version="1.0" encoding="utf-8" ?>
<configuration>
    <system.serviceModel>
        <bindings>
            <basicHttpBinding>
                <binding name="wsSoap" closeTimeout="00:01:00" openTimeout="00:01:00"
            receiveTimeout="00:10:00" sendTimeout="00:01:00" allowCookies="false"
            bypassProxyOnLocal="false" hostNameComparisonMode="StrongWildcard"
            maxBufferSize="65536" maxBufferPoolSize="524288" maxReceivedMessageSize="65536"
            messageEncoding="Text" textEncoding="utf-8" transferMode="Buffered"
            useDefaultWebProxy="true">
                <readerQuotas maxDepth="32" maxStringContentLength="8192" maxArrayLength="16384"
              maxBytesPerRead="4096" maxNameTableCharCount="16384" />
                <security mode="Message">
                    <transport clientCredentialType="Windows" proxyCredentialType="None" realm="" />
                    <message clientCredentialType="UserName" algorithmSuite="Default" />
                </security>
            </binding>
        </basicHttpBinding>
    </bindings>
    <client>
        <endpoint address="http://xyz/xyz/xyzws.asmx" binding="basicHttpBinding"
            bindingConfiguration="xyzwsSoap" contract="xyzws.xyzwsSoap"
            name="xyzwsSoap" />
    </client>
</system.serviceModel>
</configuration> 
```

我们还尝试使用 wsHttpBinding 而不是 basicHttpBinding 创建新绑定，但这也不起作用。谁能指出我们正确的方向？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T18:22:11.213

对于 Windows 身份验证，您的安全模式需要设置为`TransportCredentialOnly`：

```
<security mode="TransportCredentialOnly">
    <transport clientCredentialType="Windows"/>
</security> 
```

还要确保您的服务器和客户端配置是同步的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-06-22T10:38:36.690

在 Web.config 中的服务器应用程序（托管服务的应用程序）上，`system.serviceModel/behaviors/serviceBehaviors`您需要创建新的行为。

```
<system.serviceModel>
<behaviors>
  <serviceBehaviors>
    <behavior name="internalBehaviour">
      <serviceAuthenticationManager authenticationSchemes="Ntlm"/>
      <serviceMetadata httpGetEnabled="true" httpsGetEnabled="false" />
      <serviceDebug includeExceptionDetailInFaults="true" />
    </behavior>
  </serviceBehaviors>
</behaviors> 
```

`<system.serviceModel>`然后在同一`<bindings>`节中创建

```
<bindings>
  <basicHttpBinding>
    <binding name="internal" >
        <security mode="TransportCredentialOnly">
          <transport clientCredentialType="Ntlm"/>
        </security>
    </binding>
  </basicHttpBinding>
</bindings> 
```

`<system.serviceModel>`然后在同一`<services>`节中（您正在配置您试图公开的服务）

```
<services>
       <service behaviorConfiguration="internalBehaviour" name="Corp.WebServices.CorePricingService">
    <endpoint address="" binding="basicHttpBinding" bindingConfiguration="internal" name="ConveyancingEndpoint" contract="Corp.Core.Interfaces.ICorePricingService" />
  </service> 
```

（明显改变合同）

然后，如果您`IIS Express`在 Visual Studio（或 IIS）中运行它，请转到`applicationhost.config`

在 Win7 上：
IISExpress `C:\Users\[username]\Documents\IISExpress\config`
IIS`%WINDIR%\System32\inetsrv\config\applicationHost.config`

查找`<authentication>`您网站的部分将所有内容（但`<windowsAuthentication enabled="true">`）设置为`false`并注释掉`<!--<add value="Negotiate" />-->`（或删除）

```
<authentication>
            <anonymousAuthentication enabled="false" />
            <basicAuthentication enabled="false" />
            <clientCertificateMappingAuthentication enabled="false" />
            <digestAuthentication enabled="false" />
            <iisClientCertificateMappingAuthentication enabled="false">
            </iisClientCertificateMappingAuthentication>
            <windowsAuthentication enabled="true">
                <providers>
                    <!--<add value="Negotiate" />-->
                <add value="NTLM" />
                 </providers>
            </windowsAuthentication>
        </authentication> 
```

然后在 Web.config 中的客户端应用程序中

```
<system.serviceModel>
<bindings>
  <basicHttpBinding>
    <binding name="ConveyancingEndpoint">
      <security mode="TransportCredentialOnly" >
        <transport clientCredentialType="Ntlm"/>
      </security>
    </binding>
  </basicHttpBinding>
</bindings>
<client>
  <endpoint address="http://localhost:53769/CorePricingService.svc" binding="basicHttpBinding" bindingConfiguration="ConveyancingEndpoint" contract="ServiceReference2.ICorePricingService" name="ConveyancingEndpoint"> 
  </endpoint>
</client> 
```

您可能需要[在本地计算机上设置 Windows 身份验证](http://www.iis.net/configreference/system.webserver/security/authentication/windowsauthentication)。

希望这可以节省您一些时间。

# php - 通过 bash 中的 curl 上传文件

> ID：13499497
> 
> 赞同：0
> 
> 时间：2012-11-21T18:12:50.470
> 
> 标签：php, bash, file-upload, curl

如何通过 curl 直接在我的网站上的 POST 字段中上传文件，而不是在 php 中使用 curl？在 php 中，你可以这样做：

```
<?
$fileupload="image.jpg";
$c = curl_init("file");
curl_setopt($c, CURLOPT_POST, true);
curl_setopt($c, CURLOPT_POSTFIELDS,
array('Filedata'=>"@$fileupload",'folder'=>'/target/'));
curl_setopt($c, CURLOPT_RETURNTRANSFER, 1);
curl_exec($c);
curl_close($c);
?> 
```

但是如何在带有 curl 的 linux bash 脚本中做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T19:18:25.833

作为散列数组发送的 CURLOPT_POSTFIELDS 选项成为一系列 -F 使用。与此类似的东西：

```
curl -F Filedata=@image.jpg -F folder=/target/ [URL] 
```

# java - 更新到 Java 7 Update 9 后 system32 中缺少 javaws.exe

> ID：13499501
> 
> 赞同：4
> 
> 时间：2012-11-21T18:13:09.613
> 
> 标签：java, java-web-start, updates, missing-data, system32

通过控制面板中的 GUI 将 Java 更新到 Java 7 Update 9 时似乎存在错误。我需要提一下，这一切都已经在 Windows XP 32 位上进行了测试。该更新从 C:\Windows\System32 中删除了 javaws.exe（Java Web Start）。这会破坏指向该位置的快捷方式。它可能与 Java Quick Start 锁定某些文件以及更新无法从其在 Program Files 中的位置复制 javaws.exe 有关。下载离线更新文件并将其安装在当前版本的 Java 之上时不会发生这种情况。您在尝试启动我们的应用程序时收到的错误消息是

Windows 正在搜索 javaws.exe。要自己查找文件，请单击浏览。

Windows 将尝试找到该文件，经过一番搜索后，应该会在 Program Files 中找到 javaws.exe 并提供修复链接。单击修复它通过将链接重新指向新位置来解决问题。其他可能的解决方案可能是：

1.  完全卸载 Java 并安装最新版本。您可以保留 Java 缓存，因此您不必重新安装应用程序。
2.  通过下载离线更新并将其安装在当前 Java 版本之上来更新 Java。
3.  手动修改链接的路径。
4.  手动将 javaws.exe 复制到 C:\Windows\System32。
5.  重新安装您的应用程序。

有没有人也遇到过这个问题？有谁知道是否有修复它？谢谢。

# android - ListView 内的 EditText 导致重绘？

> ID：13499503
> 
> 赞同：1
> 
> 时间：2012-11-21T18:13:14.190
> 
> 标签：android

我有一个 ListView，每个项目都包含一个 EditText。
我`android:descendantFocusability="afterDescendants"`在 ListView 上设置，所以我可以在 SoftwareKeyboard 上输入。只要我只输入空格，一切都很好。一旦我开始输入真实的单词，问题就出现了。那时小预览栏出现在键盘上方。然后 ListView 似乎被重绘并且焦点被设置为第一个 EditText，导致所有以前键入的字符都丢失了。

我也尝试设置`android:windowSoftInputMode="adjustPan"`，但这也不起作用。

有谁知道如何使这项工作？谢谢！

# java - 如何将状态和字节 [] 从 C++ 返回到 Java

> ID：13499506
> 
> 赞同：0
> 
> 时间：2012-11-21T18:13:32.633
> 
> 标签：java, c++, java-native-interface

我有一个具有以下签名的 C++ 方法：

```
int cppGetData(string& data); 
```

它应该从 Java 方法中调用。

**第一版**：

```
byte[] javaGetData(); 
```

`null`如果`cppGetData`返回非零返回码，则应该返回。

我知道我必须写这样的东西：

```
JNIEXPORT jbyteArray JNICALL jniGetData(JNIEnv * env, jobject thisObj) 
(
  string data;
  if (cppGetData(data))
  {
    return NULL;
  }

  jbyteArray jData = env->NewByteArray(data.size());
  env->SetByteArrayRegion(jData, 0, data.size(), (jbyte *)data.c_str());

  return jData;
} 
```

我的问题是我失去了`cppGetData`. 另一方面，Java没有引用返回，所以我很困惑。如何返回`byte[]`整数状态？

当然，我可以有一个包装器，像这样：

```
public class ByteArrayWrapper{
  public byte[] bytes;
} 
```

然后 javaGetData 变成：

```
int javaGetData(ByteArrayWrapper wrapper); 
```

这太可怕了。就 API 签名和`jniGetData`方法复杂性而言。

有没有更好的办法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T18:23:29.567

最接近你所拥有的东西是

```
native static int cppGetData(ByteBuffer bb); 
```

这并不比你在 ByteBuffer 中所拥有的更好，它是一个 byte[] 的包装器，但它使用内置类来做到这一点。一个限制是底层 byte[] 不可调整大小，但您可以通过设置`limit`.

另一种选择是使用

```
native static int cppGetData(byte[][] bytes) 
```

这允许您返回不同的字节[]。

或者你可以

```
int[] num = { 0 };

native static byte[] cppGetData(int[] num) 
```

或更新对象的字段，例如

```
class CallsCppGetData {
    int num;
    byte[] bytes;

    native void cppGetData(); // sets this.num and this.bytes.
} 
```

* * *

返回多个值的解决方案是使用一个对象。

无论是你

*   更新您正在调用该方法的对象的多个字段。
*   包装多个字段时返回一个对象。
*   传递要设置的可变对象。例如，您可以传递一个`int[]`包含一个元素的元素。

虽然创建新类很糟糕，但拥有一个没有一个结果的方法也是如此。;)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T22:10:22.033

如果传递一个对象是个问题，我只看到另一个解决方案：有两个单独的方法

```
jint prepareData();
jbyteArray getData(); 
```

仅当第一个返回零时才调用第二个，如您指定的那样。当然，这个解决方案不是特别原子，也不是 thredsafe，因为它需要在 C 端的调用之间存储持久数据。除非您将两个本机调用包装在 Java 端的同步块中。但是许多无处不在的框架无所畏惧地使用这种技术在其他函数调用之后报告一些常见的内部状态。`GetLastError`想到了Win32 API ，虽然那个是线程安全的。

# sql - 使用三个 SELECT 优化 SQL 查询

> ID：13499508
> 
> 赞同：1
> 
> 时间：2012-11-21T18:13:40.310
> 
> 标签：sql

我有以下表格：

```
news
idNews | title
1      | Title 1
2      | Title 2
3      | Title 3
4      | Title 4

tags
idTag | name
1     | Name_tag1
2     | Name_tag2
3     | Name_tag3
4     | Name_tag4 
```

映射表：

```
tag_news
idTag | idNews
1     | 1
2     | 1
1     | 2
2     | 2
2     | 3
3     | 3
4     | 3
4     | 4 
```

我想通过给一个 idNews 来获取几乎有一个共同标签的相关新闻的标题。我可以用三个 SELECT 来做到这一点：

```
SELECT title FROM news WHERE idNews IN 
 (SELECT DISTINCT idNews FROM tag_news 
  WHERE idTag IN 
  (SELECT idTag FROM tag_news WHERE idNews='$idNews')) 
```

其中 $idNews id 是我通过参数给出的 ID。

这很好用，但我想是否有另一种方法来改进查询。

提前致谢， 伊克

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-21T18:19:41.737

当您使用 SQL 编程时，您确实需要了解连接。连接是 SQL 的基础，就像 while 循环是大多数其他编程语言的基础一样。

```
SELECT DISTINCT n.title FROM news n
INNER JOIN tag_news t1 ON t1.idNews = n.idNews
INNER JOIN tag_news t2 ON t1.idTag = t2.idTag
WHERE t2.idNews = $idNews; 
```

[从SQL 连接的可视化解释](http://www.codinghorror.com/blog/2007/10/a-visual-explanation-of-sql-joins.html)开始

* * *

来自@Beth的评论：

我并不是要反驳你，但我很确定我的查询是正确的，它不需要三个连接。以下是它的工作原理：

*   `t2`是`tag_news`where中的行集`t2.idNews=$idNews`。例如，如果 $idNews=1 那么这将产生以下行：

    ```
    idTag | idNews
    1     | 1
    2     | 1 
    ```

*   从那里，我们希望 tag_news 中与任何相同标签匹配的所有其他行。所以`t1.idTag=t2.idTag`。这为我们提供了以下行`t1.idTag IN (1,2)`：

    ```
    idTag | idNews
    1     | 1
    2     | 1
    1     | 2
    2     | 2
    2     | 3 
    ```

*   从那里，返回`news`匹配任何值的所有行`t1.idNews`。换句话说，在哪里`news.idNews IN (1,2,3)`。

    ```
    idNews | title
    1      | Title 1
    2      | Title 2
    3      | Title 3 
    ```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-21T18:22:40.353

尝试：

```
SELECT distinct title 
FROM  
tag_news t1  inner join 
tag_news t2 on
t1.idnews = t2.idnews inner join
tag_news t3 on
t2.idtag = t3.idtag inner join
news n on
n.idnews = t3.idnews
WHERE t1.idNews='$idNews' 
```

抱歉，第一次和第二次错过了：

```
CREATE TABLE [dbo].news(
    idnews [int] NOT NULL,
    title [varchar](50) NULL
) ON [PRIMARY]

insert into news(idnews, title) values(1,'title 1')
insert into news(idnews, title) values(2,'title 2')
insert into news(idnews, title) values(3,'title 3')
insert into news(idnews, title) values(4,'title 4')

CREATE TABLE [dbo].tag_news(
    idtag [int] NOT NULL,
    idnews [int] NOT NULL,
) ON [PRIMARY]

insert into tag_news(idtag, idnews) values(1,1)
insert into tag_news(idtag, idnews) values(2,1)
insert into tag_news(idtag, idnews) values(1,2)
insert into tag_news(idtag, idnews) values(2,2)
insert into tag_news(idtag, idnews) values(2,3)
insert into tag_news(idtag, idnews) values(3,3)
insert into tag_news(idtag, idnews) values(4,3)
insert into tag_news(idtag, idnews) values(4,4)

select * from news; 
select * from tag_news;

SELECT title FROM news WHERE idNews IN 
 (SELECT DISTINCT idNews FROM tag_news 
  WHERE idTag IN 
  (SELECT idTag FROM tag_news WHERE idNews=1));

SELECT distinct title 
FROM  
tag_news t1  inner join 
tag_news t2 on
t1.idnews = t2.idnews inner join
tag_news t3 on
t2.idtag = t3.idtag inner join
news n on
n.idnews = t3.idnews
WHERE t1.idNews=1; 
```

# c++ - Cpp预处理器和文件名的基本名称，行号为字符串

> ID：13499513
> 
> 赞同：5
> 
> 时间：2012-11-21T18:14:12.710
> 
> 标签：c++, gcc, c-preprocessor

我想`"example.cpp:34"`用预处理器生成一个静态字符串，但`__FILE__`宏将扩展为整数`"lib/example/example.cpp"`并`__LINE__`扩展`34`为整数。我可以用预处理器构造所需的字符串吗？GCC 扩展是可以的。

**编辑**这里最重要的部分是我想要一个静态 C 风格的字符串，所以我不能使用该`basename`函数。我想知道预处理器中是否有某种方法可以复制该功能，可能带有增强扩展？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T18:27:59.550

您可以利用连接相邻字符串文字的事实：

```
#define STRINGIFY(s) #s
#define FILELINE(line) __FILE__ ":" str(line) 
```

然后像`FILELINE(__LINE__)`. 我不经常这样做，所以可能有比必须通过`__LINE__`宏更好的方法。无论如何它对我有用，测试：

```
#include <iostream>

#define str(s) #s
#define FILELINE(line) __FILE__ ":" str(line)

int main(int argc, const char* argv[])
{
  std::cout << FILELINE(__LINE__) << std::endl;
  return 0;
} 
```

我得到：

```
main.cpp:9 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T18:27:29.863

您应该能够仅使用`basename()`as`__FILE__`扩展为 const C 字符串

> **__FILE__** 此宏扩展为当前输入文件的名称，形式为 C 字符串常量。

```
printf ("%s:%d\n", basename(__FILE__), __LINE__); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-21T23:01:31.093

好吧，不仅必须使用预处理器——而且最终用户不会看到它。

当您想`BASENAME()`在某个文件中使用时 - 使用此头文件`basename.h`：

```
// basename.h
#include <string.h>

static size_t basename_start_calc(const char* filename)
{
    const char* base = strrchr(filename, '/');
    return base ? (base - filename + 1) : 0;
}
static inline size_t basename_start(const char* filename)
{
    static size_t retval = basename_start_calc(filename);
    return retval;
}
#define STR_(t) #t
#define STR(t) STR_(t)
#define BASENAME()  ((__FILE__ ":" STR(__LINE__)) + basename_start(__FILE__)) 
```

这里有一个[ideone示例](http://ideone.com/lShQhs)。

`basename_start(__FILE__)`对于给定的源文件将只评估一次。不幸的是，您不能在头文件中使用此解决方案 - 只能在源文件中使用。您可以更改它，因此它可以在任何地方使用 - 但是每次都会计算给定文件名的基线开始。只需使用 in`BASENAME()` `basename_start_calc(__FILE__)`而不是`basename_start(__FILE__)`...

我相信这是你可以自动拥有的最好的。

当然，您可以在每个文件宏中手动定义：

```
#define BASENAME()  ("somefile.cpp:" STR(__LINE__)) 
```

但我不确定这是你想要的......

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-21T18:32:01.780

我不知道获取基本名称的方法，但除此之外，您还可以使用字符串化预处理器运算符“#”，例如：

```
#define M__(x,y) x ":" #y
#define M_(x,y) M__(x, y)
#define M M_(__FILE__, __LINE__) 
```

现在`M`将扩展为`"lib/example/example.cpp:34"`（假设您将它放在该行的那个文件中，ofc :)）

# assembly - 如何从函数返回 FLAGS 寄存器？

> ID：13499517
> 
> 赞同：0
> 
> 时间：2012-11-21T18:14:18.027
> 
> 标签：assembly

我正在尝试检索 FLAGS 寄存器，以便为我的“自制”操作系统（在 Bochs 上运行）打印出来。由于我没有找到强制将该寄存器打印到 BOCHS 日志文件中的方法，因此我试图从我的代码中将其打印出来。

这是我的尝试。（免责声明：我完全是 ASM 菜鸟。对此感到抱歉......）

```
u16int eflags()
{
  asm volatile ("pushf");
  asm volatile ("movw %esp-2, %eax");
} 
```

当然它不会编译。请问我怎样才能把语法变成正确的东西？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T18:28:29.700

```
pushf;
pop ax; 
```

确保调用约定指定返回值在 ax/eax 寄存器中。

# ruby - 为将文件作为输入的代码编写测试

> ID：13499519
> 
> 赞同：1
> 
> 时间：2012-11-21T18:14:19.067
> 
> 标签：ruby, xml, testing, tdd, acceptance-testing

我现在正在编写一个解析 epub 文件的程序（基本上是一个带有一些 xml 元数据文件的 zip）。该程序适用于我测试过的所有输入文件。

尽管如此，我还是想编写一些测试（单元测试或行为测试）以确保它适用于*所有*文件并拥有“更好的代码”。

实现 EPUB 规范并为测试提供一些 XML 片段的唯一方法是完美地（至少在理论上）吗？

我对一般测试很熟悉，但我从来没有对将文件作为输入的东西进行测试，所以我也在寻找更多关于它的信息。:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T21:53:50.510

单元测试方法是消除测试中的外部依赖。这样，运行测试不需要你的环境做任何事情，除了托管你的测试程序。

在您的代码中，大多数情况下您不应该对“testfile.epub”感兴趣。这只是 OpenEpubFile() 例程的工作。相反，您有兴趣测试“这里是一个指向一些数据的指针，我如何解压缩它？”的具体逻辑。或“我如何处理标题标签？” 因此，您的单元测试将提供示例压缩数据来测试您的解压缩逻辑是如何工作的，并提供示例标题标签来查看您的逻辑如何处理标题。您将传递给它的标题很好，很长，很短，格式错误，您将提供执行您需要在代码中测试的任何逻辑所需的不同类型的数据。但是这些数据不必每次都来自文件，它可以来自测试工具。

如果你发现你的逻辑很难测试，这可能表明是时候模块化它了。您需要将打开文件的代码与读取数据的代码分开。您需要将读取数据的代码与解压缩数据的代码分开。您需要将解压缩数据的代码与解析 XML 的代码分开。您需要将构建屏幕的代码与绘制屏幕的代码分开。提取方法重构过程以及重命名方法在这里将非常有用。而且您将严重依赖依赖倒置模式。

每次您可以将其分解为实现纯逻辑的无状态代码时，您都可以非常轻松地测试这些规则。更好的是，当您将其分解为所需的模块时，您会发现添加新模块来处理新案例变得更加容易，因为您可以重复现有模式。

是的，在某个时候，您将进行一项测试，以确保您的 open() 语句实际上可以打开文件。在单元测试代码通过所有测试之后，就该进行集成测试了。在那里，您可以为其提供一组真实的 .epub 文件并查看输出是否符合要求。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T18:20:49.773

无需为了测试而重新实现 .epub。

创建一些小的 .epub 文件来展示某些特征，并针对这些特征创建测试。

# python - 当内容长度 > 4306 字节时，Facebook 应用程序在 POST 请求中失败

> ID：13499522
> 
> 赞同：1
> 
> 时间：2012-11-21T18:14:32.813
> 
> 标签：python, facebook, http, post, heroku

我有一个在heroku 上运行的facebook 应用程序，它源自facebook 生成的代码。该应用程序运行良好，没有会话或登录要求，因此只需通过 HTTP GET 请求返回静态 html 表示。

但是，我发现如果返回由 facebook 的 iframe 包装的 HTML 的内容长度大于某个似乎略高于 4K 的阈值，则页面会在其内容的一半左右截断。

该页面确实在该点之前正确呈现。该应用程序设置为接受 HTTP GET 和 POST 并成功响应两者，除非请求来自具有登录用户的 chrome。相同的条件在其他浏览器上也能正常工作。我可以在 chrome 的调试器中看到来自 facebook 的失败 POST 请求。我无法复制 facebook 之外的行为，即 POST 请求在我的盒子里工作正常。

有谁知道为什么会生成这个 POST 请求？为什么会失败？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T10:34:45.313

您忘记了 channel.html 文件吗？

[频道.html](https://developers.facebook.com/docs/reference/javascript/#channel)

# performance - 一个或多个 po 文件中的 CakePHP 翻译和性能

> ID：13499525
> 
> 赞同：0
> 
> 时间：2012-11-21T18:14:41.133
> 
> 标签：performance, cakephp, internationalization, po

使 CakePHP 的 i18n 工具使其 po 文件在单个文件中优于多个文件。这里我指的是性能。就个人而言，我更喜欢单个文件，我认为翻译应用程序更容易，但我指的是应用程序在服务器上的性能。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-24T10:31:07.753

我认为一个文件比多个文件好，因为打开和关闭多个文件时使用的性能要大于打开一个文件，而不是它的大小。

# opencv - OpenCV、OpponentColorDescriptorExtractor 和 Python

> ID：13499529
> 
> 赞同：2
> 
> 时间：2012-11-21T18:14:51.077
> 
> 标签：opencv, computer-vision

使用 cv2 和 Python 提取 SURF 描述符非常简单。您只需要使用以下内容初始化描述符并应用它：

```
extractor = cv2.DescriptorExtractor_create("SURF") 
```

但是这里提到的 OpponentColorDescriptorExtractor呢[，在页面底部](http://docs.opencv.org/modules/features2d/doc/common_interfaces_of_descriptor_extractors.html)呢？

[我已经通过这篇博客文章](http://www.morethantechnical.com/2011/08/25/a-simple-object-classifier-with-bag-of-words-using-opencv-2-3-w-code/)看到了创建对手颜色提取器的 C++ 代码，但是我找不到任何 Python 绑定来配合它。

有谁知道如何使用 Python 绑定创建对手颜色描述符提取器？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-21T18:19:51.280

我应该更好地阅读文档。您需要做的就是在描述符前面加上对手：

```
>>> d = cv2.DescriptorExtractor_create("SURF") # normal SURF descriptor
>>> d = cv2.DescriptorExtractor_create("OpponentSURF") # SURF descriptor applied to each channel in the opponent color space and concatenated together 
```

# sql - 如何根据sql server中其他表的值更新表

> ID：13499533
> 
> 赞同：0
> 
> 时间：2012-11-21T18:15:05.413
> 
> 标签：sql, sql-server, tsql

如何根据 Table1 中的值更新 Table2。我想用 Table1 中的值更新 Table2 中的 Total 字段这是我的表的结构

**表格1**

```
Name1             Name2
Value1            value2 
```

**表2**

```
Type             Total
Name1            Value1
Name2            Value2 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T18:51:45.560

一般来说是这样的。请注意，内部查询只能返回 1 列和 1 个记录，即 1 个结果

```
UPDATE table2 
SET total = (
         SELECT value2 
         FROM table1 WHERE name = value1
        ) 
WHERE table2.type = Name2 
```

# java - java中的http负载生成器

> ID：13499535
> 
> 赞同：1
> 
> 时间：2012-11-21T18:15:12.783
> 
> 标签：java, multithreading, concurrency

这更多是设计问题；您将如何在 java 中设计一个 http 负载生成器，您可以为其指定并发用户数、运行测试的时间量以及要命中的 url 列表。

```
some_load_generator -users n1 -time n2 -urls some_file_name.txt 
```

程序启动，创建由用户数指定的线程数，每个线程从 url 文件中读取一个随机 url 并发出 GET 请求。对于每个请求，每个线程都会记录完成整个 GET 请求所花费的时间。该程序每 5 秒打印一次所有线程迄今为止发出的所有请求的最短、最长和平均时间。

您将如何创建线程、存储最小、最大和平均信息并每 5 秒打印一次该信息。

这是我到目前为止的想法：

1.  程序会根据用户数量创建一个新的固定线程池执行器。这需要线程生命周期管理。

2.  Runnable 实现从文件中读取一行，发出一个 GET 请求并记录它所花费的时间。

3.  **我的主要问题**是如何有效地计算所有线程的最小值、最大值和平均值，因为我们需要同步对这些变量的访问。

4.  为了每 5 秒打印一次统计信息，我将使用一个定时器任务来唤醒、显示统计信息并返回睡眠状态。这里的主要问题是，如何有效地调度计时器任务，因为有很多线程在尝试更新统计信息的状态，而该线程正在尝试打印它。与其他线程相比，我可以提高该线程的优先级，以便在执行时获得优先权。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T18:23:38.553

您的线程如何将此数据发送到某种聚合器，然后您的统计打印机只是从这里提取数据？

这样，就在每个线程完成之前，它们会更新聚合器中所需的指标，而统计打印机将永远不需要干扰正在运行的线程？

有点像远程日志记录。所以每个线程都会做它需要做的事情，并且在完成之前将它花费的时间发送到聚合器，然后打印机每隔 N 秒打印一次数据，但是从聚合器而不是线程本身获取它（有点如果你愿意的话，就像一个缓冲区）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T18:31:46.313

查看[Apache JMeter](http://jmeter.apache.org/usermanual/build-web-test-plan.html)。[Agrate Report](http://jmeter.apache.org/usermanual/component_reference.html#Aggregate_Report)提供您想要的统计信息。

# html - Doctype meta 和 quirksmode

> ID：13499536
> 
> 赞同：3
> 
> 时间：2012-11-21T18:15:15.193
> 
> 标签：html, xhtml, doctype, quirks-mode

请我在这里澄清一些想法：

如果未指定文档类型，则会调用 Quirksmode。

但

从 localhost 提供服务时，无论文档类型如何，IE 似乎都会进入 quirksmode。请确认这一点，有人可以解释为什么会这样。

然而

当从 localhost 提供服务并且 IE 进入 quirksmode 时，无论文档类型如何，都可以通过在头部的第一行包含元标记来覆盖它

```
<meta http-equiv="X-UA-Compatible" content="IE=edge"> 
```

这对我不起作用......我的语法错误吗？

仅当从本地主机提供服务时，才会应用头部中的元数据？如果是这样，这是真的吗？

目前在 FF Chrome Opera 等中一切看起来都很好，无论是从本地主机还是通过网络提供服务。

但我只是在 IE 中获得了怪癖模式

我的文档类型是

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"> 
```

最后charset和quirksmode之间有关系吗？

我一直在使用

```
<meta http-equiv="content-type" content="text/html; charset=utf-8" /> 
```

在 apache 上将 apache 配置设置为默认为 UTF-8

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T18:43:57.430

[怪癖模式](http://www.cs.tut.fi/~jkorpela/quirks-mode.html)很古怪，你不应该依赖任何关于它的特定内容。触发它的情况是依赖于浏览器的，但是如果你看到了一个符合 XHTML 规范的 XHTML 文档类型来触发它，那么它可能是一个观察错误。您可能在文档类型之前有一些东西。关于 IE的魔法`meta`标签同上。

您可能有语法错误，但不是在发布的片段中。

或者这个问题可能是由于文档类型嗅探中的一些[IE8 和 IE9 并发症引起的。](http://hsivonen.iki.fi/doctype/#ie8)

charset 和 Quirks Mode 之间没有关系。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T11:13:36.557

I wanted to summarise the findings from this question.

To switch off compatibility mode in IE9

1.  in IE 9 right click tools icon and select command bar
2.  from command bar select tools
3.  from tools select Compatibility View Settings
4.  uncheck display intranet site in compatibility mode
5.  from command bar select tools ensure compatibility view is unchecked
6.  Restart Browser

Main points for changing code

*   The html 5 doctype simplifies the whole issue of setting a doctype.
*   The reason that there appeared to be a relationship between charset and quirksmode was the error in the meta to add that charset which put it in conflict with the doctype.

So actions completed to resolve problem.

1.  Ignore localhost quirksmode - this is only significant when testing.
2.  Use `<!Doctype html>` ensuring that the html document commences with this. N:B this does not mean that this has to be the first line of the HTML. php includes can precede it.

3.  In the `<head>` Use `<meta charset="UTF-8">`

4.  In php initialize use `<?php header("content-Type: text/html; charset=utf-8"); ?>`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-21T18:27:46.270

## 简短的回答

```
<meta http-equiv="content-type" content="text/html; charset=utf-8" /> 
```

是哪里出错了，因为你说`text/html`你的文档类型是 xhtml。你应该使用`application/xhtml+xml`.

## 更长的答案

在我看来，您没有正确研究**XHTML 实际上是**什么。这是一种非常奇怪的文件。XHTML 应该是对传统 HTML 的改进，但它从未真正流行起来，通常不建议您使用它，**除非您有非常具体的原因**。

看看[这个网站](http://www.greytower.net/archive/articles/xhtmlcontent.html)。一些重要的部分：

> XHTML 1.1
> 
> 对于 1.1 版本的 XHTML，规范很明确：不能使用 text/html。应该使用 application/xhtml+xml 的 XHTML“本机”内容类型，而可以使用 application/xml 的通用 XML 内容类型。
> 
> 这种内容类型的汤给我们留下了一个相当明确的 1.1 操作过程：如果我们使用 XHTML 1.1 2，我们应该将 application/xhtml+xml 作为内容类型。

这是您的问题：

> 惊恐的事件！惊恐的事件！
> 
> 你已经猜到了。提供包含 XHTML 作为 text/html 的所有意图和目的的文档仅意味着**浏览器将跳入纠错模式并进行处理。**

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-21T18:24:23.257

两件事，您可以尝试 IE=8 等....

您可能还想检查文档类型；虽然，它看起来是正确的，你可能有隐藏的字符等....尝试使用将显示隐藏字符的基本编辑器。

对于 VI，您可以查看： http: [//www.chrispian.com/quick-vi-tip-show-hidden-characters/](http://www.chrispian.com/quick-vi-tip-show-hidden-characters/)。

这对我来说是第一步。

# java - 在 jasper 报告中将 Web 服务配置为数据源

> ID：13499540
> 
> 赞同：2
> 
> 时间：2012-11-21T18:15:28.333
> 
> 标签：java, web-services, jasper-reports, datasource, jax-ws-customization

有人可以为我提供步骤

> 将 Web 服务配置为 jasper 报告中的数据源

我阅读了有关实施的信息，`custom data source`但找不到任何详细解释这些**步骤**的示例。

# php - 通过 out.php 发送邮件以跟踪按钮的点击

> ID：13499542
> 
> 赞同：0
> 
> 时间：2012-11-21T18:15:33.300
> 
> 标签：php, email, tracking, urlencode, urldecode

每次有人点击它时，我都需要跟踪一个按钮。我创建了一个文件“out.php”来向我发送电子邮件并重定向到我页面外的链接。此代码重定向但邮件不发送。

```
<div class="buyprod">
<a target="_blank" href="http://xxx.com/out.php?url=<?php echo urlencode($this->product['from'])?>">
<img src="http://xxx.com/buybtn.jpg" alt="buy"/>
</a>
</div> 
```

out.php

```
<?php
$url = urldecode($_GET['url']);
header("Location: ".$url);
$message = "Someone clicked buy: ";
$link = $this->product['from'];
mail('xxx@xxx.com', '@Buy', $message.$link);
exit; 
```

有人知道这段代码有什么问题吗？提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T18:49:01.270

您正在调用一个`$this->product['from']`不存在的类`out.php`。这将使您的文件出错。此外，您需要在使用`mail()`. 请参阅[stackoverflow.com/questions/6988051/php-mail-function-headers#6988085](https://stackoverflow.com/questions/6988051/php-mail-function-headers#6988085)

更改`out.php`为 -

```
<?php
$url = urldecode($_GET['url']);
$message = "Someone clicked buy: ";
$link = $_GET['url'];
mail('xxx@xxx.com', '@Buy', $message.$link, 'From: email@website.com');
header("Location: ".$url);
exit;
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T18:21:46.233

移动`header()`到最后，就在之前`exit`

此外，您的邮件功能应遵循以下格式：

```
mail($to, $subject, $message, $headers); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-21T18:48:49.397

您正在调用`$this->product['from']`out.php 中不存在的

# email-validation - 电子邮件验证网址中的简单 MD5 用户名：安全吗？

> ID：13499550
> 
> 赞同：0
> 
> 时间：2012-11-21T18:16:00.167
> 
> 标签：email-validation

我将能够避免为验证创建整个数据库或在当前用户表中的其他浪费表上浪费一些开销。

据我所知，这将是一个安全和干净的解决方案。但是我对这一切都很陌生，我的问题甚至可能很愚蠢和陈词滥调，但我认为在犯下相当大的错误之前先问你专家是安全的。

网址将是这样的：www.example.ex/validate/username/md5username

所以我的问题是：这是个好主意吗？我什至需要加盐吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T18:27:27.943

使用纯 md5 哈希，这将是一个坏主意。一旦用户看到这个方案，他就可以在没有有效邮件地址的情况下验证新帐户。

至少，md5-hash 必须有某种盐——最好为每个用户提供一种新盐。否则就是[默默无闻的安全](http://en.wikipedia.org/wiki/Security_through_obscurity)。

# html - 将链接标签包裹在列表项周围

> ID：13499553
> 
> 赞同：0
> 
> 时间：2012-11-21T18:16:23.230
> 
> 标签：html, css

我想知道当他单击`<li>`成员页面上的项目时，将用户导航到用户个人资料页面的最佳方法是什么。

```
<li>
    <img src="images/pic.png" alt="John Smiths's Profile Picture" class="profile-pic">
    <div class="name">John Smith</div>
    <div class="skills">PHP, ASP, MySQL, SQL Server, Javascript</div>
</li> 
```

这就是每个列表项的标记类型，它以大约`640x50`块的宽度/高度出现。`<li>`我希望用户在单击元素的任何部分时转到他们的个人资料页面。

我尝试将整个列表项包装在一个链接元素 ( `<a>`) 中，但这只会产生一个`0x0`大小合适的链接元素。我也不想使用 Javascript。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T18:19:08.353

你可以这样做：

HTML：

```
<li>
    <a href="#" title="Link text" class="list-link"> 
      <img src="images/pic.png" alt="John Smiths's Profile Picture" class="profile-pic">
      <span class="name">John Smith</span>
      <span class="skills">PHP, ASP, MySQL, SQL Server, Javascript</span>
    </a>
</li> 
```

CSS：

```
.list-link{
  display:block;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T18:18:44.797

环绕`A`是`LI`无效的 HTML。为什么不直接将 LI 的 innerHTML 的全部内容包装在一个 A 标记中呢？

```
<li>
    <a href="...">
    <img src="images/pic.png" alt="John Smiths's Profile Picture" class="profile-pic">
    <div class="name">John Smith</div>
    <div class="skills">PHP, ASP, MySQL, SQL Server, Javascript</div>
    </a>
</li> 
```

# php - 使用 Ajax 根据 PHP 数据在点击时更改 div 文本

> ID：13499559
> 
> 赞同：0
> 
> 时间：2012-11-21T18:16:49.123
> 
> 标签：php, javascript, jquery, html, ajax

假设我在一个 PHP 文件中有一个名为 的 div `myDiv`、一个名为 的图像`myImg`和一个名为 的 PHP 变量`$x`。当有人点击 时`myImg`，我需要`myDiv's`根据 的值更改文本`$x`。

例如，假设我希望`myDiv's`将文本更改为`"Hello"`if`$x==1`和`"Bye"`if `$x==2`。

每次文本改变时， 的值`$x`也会改变，在这种情况下，假设`$x==1`当`myImg`被点击时，`$x's`值将变为`2`($x=2)，反之亦然。

我正在使用`jQuery`，但我读到我也需要为此使用`Ajax`（在服务器上检查 的值`$x`），但我不知道该怎么做。我读过关于`Ajax`，但没有一个例子解释了这样的事情。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T20:08:38.250

我将在新答案中添加修改后的解决方案，以便您仍然可以看到早期的示例，因为代码可能会提供有用的示例。

在此示例中，我们使用会话变量来存储 ajax 调用之间的值。

文件1.php

```
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js" type="text/javascript"></script>
<script type="text/javascript">
    $(function(){
        $('#myImg').click(function() {
            $.ajax({
                type: "POST",
                url: "FILE2.php",
                data: '',
                success:function(data){
                    alert(data);
                }
            });
        });
    });
</script>

<div id="myDiv">
    Click picture below to GO:<br />
    <img id="myImg" src="http://www.gravatar.com/avatar/783e6dfea0dcf458037183bdb333918d?s=32&d=identicon&r=PG">
</div> 
```

* * *

文件2.php

```
<?php
session_start();

if (isset($_SESSION['myNum'])) {
    $x = $_SESSION['myNum'];
}else{
    //No session set yet, so initialize with x = 1
    $x = 1;
}

if ($x == 1) {
    $_SESSION['myNum'] = 2;
    echo 'Hello its a one';
}else{
    $_SESSION['myNum'] = 1;
    echo 'Goodbye TWO';
}
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T19:22:05.290

你不需要ajax，但你可以使用它。如果您使用 AJAX，那么您将需要一个简单地回显 Hello 或 Bye 的第二个 php 文件。

第一个示例给出了您想要的结果，无需 ajax。只需将其保存到 PHP 文件中并浏览到该页面：

```
<?php
    $x = 2;
?>
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js" type="text/javascript"></script>
<script type="text/javascript">
    $(function(){
        $('#myImg').click(function() {
            if (<?php echo $x;?> == 1) {
                alert ('Hello, its a one');
            }else{
                alert('Goodbye TWO');
            }
        });
    });
</script>

<div id="myDiv">
    Click on the image below:<br />
    <img id="myImg" src="http://www.gravatar.com/avatar/783e6dfea0dcf458037183bdb333918d?s=32&d=identicon&r=PG">
</div> 
```

* * *

要使用 AJAX 执行相同的操作，请将其更改为：

第一个文件：FILE1.php

```
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js" type="text/javascript"></script>
<script type="text/javascript">
    $(function(){
        $('#myImg').click(function() {
            var theNumber = $('#myInput').val();
            $.ajax({
                type: "POST",
                url: "FILE2.php",
                data: 'myNumber=' + theNumber,
                success:function(data){
                    alert(data);
                }
            });
        });
    });
</script>

<div id="myDiv">
    Enter number to send to FILE2:
    <input type="text" id="myInput"><br />
    <br />
    Click picture below to GO:<br />
    <img id="myImg" src="http://www.gravatar.com/avatar/783e6dfea0dcf458037183bdb333918d?s=32&d=identicon&r=PG">
</div> 
```

* * *

和 FILE2.php

```
$x = $_POST['myNumber'];

if ($x == 1) {
    echo 'Hello its a one';
}else{
    echo 'Goodbye TWO';
} 
```

# codeigniter - 使用 codeigniter 从子域提供静态内容？

> ID：13499560
> 
> 赞同：1
> 
> 时间：2012-11-21T18:16:53.317
> 
> 标签：codeigniter, static, subdomain

我正在跨域拆分资源。我已经阅读了几种不同的方法来处理这个问题。从我读到的正确处理方法是使用绝对路径与相对路径。如果这是真的，当我推动本地开发时，我将如何处理？域不会从本地匹配到生活。

就我所阅读的内容而言，base_url 仅允许单个域。我应该创建一个资产路径助手并自动加载它吗？或者，我在这里缺少什么吗？

```
http://www.example.com would operate normally.
http://images.example.com/assets would point to my asset folder that exists in the root. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T18:35:37.217

是的，您缺少服务器配置根据发出的请求将内容指向某些位置的部分。这是在请求接近 codeigniter 之前，因此请查看您的服务器软件手册并查看其中的内容。

Apache 虚拟主机的示例可能类似于

```
#httpd.conf:
<VirtualHost *:80>
        ServerName        example.com
        DocumentRoot      /var/www/http
        ErrorLog          /var/log/httpd/error_log
        TransferLog       /var/log/httpd/access_log
</VirtualHost>

<VirtualHost *:80>
        ServerName        images.example.com
        DocumentRoot      /var/www/http/assets
        ErrorLog          /var/log/httpd/error_log
        TransferLog       /var/log/httpd/access_log
</VirtualHost> 
```

在这个例子中，一个请求`http://images.example.com/radical.gif`将寻找`/var/www/assets/`一个名为激进的 gif。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T20:20:31.920

您可以在 config/constants.php 中为您的资产 url 定义一个常量并使用它：

```
define('ASSETS_URL', 'http://images.example.com/assets/'); 
```

那么你当然会这样做：

```
<img src="'.ASSETS_URL.'image1.png" /> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-28T22:02:10.540

经过进一步研究，这是我解决问题的方法。感谢 Codeigniter 论坛帮助我找到这个解决方案。创建一个开关来检查站点处于哪个开发阶段，并相应地设置 base_url 和 assets_url 配置。

```
switch(ENVIRONMENT)  //set in index.php
{
  case 'development':
    $config['base_url'] = 'http://localhost/';
    $config['asset_url'] = 'http://localhost/assets/';
    break;
  case 'production':
    $config['base_url'] = 'http://yoursite.com/';
    $config['asset_url'] = 'http://assets.yoursite.com/';
    break;
} 
```

然后只需扩展 url_helper 并创建一个函数来获取asset_url

```
if ( ! function_exists('asset_url'))
{
    function asset_url($uri = '')
    {
        $CI =& get_instance();
        return $CI->config->item('asset_url') . ltrim($path, '/');
    }
} 
```

# unix - 大型 PATH 变量

> ID：13499561
> 
> 赞同：0
> 
> 时间：2012-11-21T18:17:04.537
> 
> 标签：unix, path, operating-system, terminal

拥有一个非常大的 PATH 变量会显着降低您的计算机速度吗？如果是这样，它只会在使用终端时减慢计算机速度，还是一般会减慢机器速度？

实际上，保留一个小的 PATH 变量是否有益？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T19:49:34.503

它不应该显着减慢您的计算机整体速度。大多数 shell 至少会进行一些有限的缓存（上次我们运行`ls`时，我们在`/usr/bin`)，除此之外，您的系统通常会缓存大量文件系统元数据。如果您键入了一个您以前没有运行过的命令，并且它恰好位于 PATH 中的第 200 个目录中，或者如果您的系统处于显着的虚拟内存压力之下（在这种情况下它无论如何都会变慢），您可能会注意到启动命令的一些延迟，但是第二次运行它应该不太明显。如果您的一些 PATH 元素位于网络文件系统、慢速设备（如 CD/DVD 媒体等）上，或者您使用的是一个古老的系统，按照今天的标准，它要么很慢，要么内存非常小，这将变得更糟.

如果您发现这是一个问题，您可以创建一个小目录，其中包含指向您需要从其他路径和/或小包装脚本启动适当应用程序的二进制文件的符号链接，并且仅在您的路径中包含此目录（此外到系统标准位置）而不是一个或两个二进制文件所在的每个单独的目录......

# feedburner - 从 feedburner 饲料中提取？

> ID：13499570
> 
> 赞同：1
> 
> 时间：2012-11-21T18:17:30.697
> 
> 标签：feedburner

我想使用 PHP 提取[http://rss.cnn.com/rss/edition.rss](http://rss.cnn.com/rss/edition.rss)提要中提到的每个项目的标题和图像，有人可以帮我吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T18:39:36.857

您可以尝试[simplexml_load_string()](http://www.w3schools.com/php/func_simplexml_load_string.asp)：
示例：

```
<?php
$string = <<<XML
<?xml version='1.0'?>
<document>
<title>Forty What?</title>
<from>Joe</from>
<to>Jane</to>
<body>
  I know that's the answer -- but what's the question?
</body>
</document>
XML;

$xml = simplexml_load_string($string);

var_dump($xml);
?> 
```

# javascript - 当 WebService 托管在 Azure 云上时，Jquery AJAX 调用失败

> ID：13499573
> 
> 赞同：3
> 
> 时间：2012-11-21T18:17:47.507
> 
> 标签：javascript, ajax, jquery, azure

我正在尝试调用托管在我的本地主机上的网络服务。这个 AJAX 调用对我有用，我可以看到“授权”令牌正在发送到服务的请求的标头中。

```
 $.ajax({
        type: method,
        url: serviceUrl,
        beforeSend: function (XMLHttpRequest) { XMLHttpRequest.setRequestHeader("Authorization",  Token); },
        contentType: "application/json; charset=utf-8",
        dataType: "json",
        ProcessData: true,
        cache: false,
        success: successHandler,
        error: errorHandler
    }); 
```

但是这次我尝试调用托管在 Azure Cloud 上的服务，并且相同的 AJAX 调用有效，但它不发送标头内容。我正在使用提琴手检查请求的标头内容。我可以做些什么来使标头具有“授权”令牌吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T18:24:14.417

这可能是跨域策略限制。您必须确保 ajax 调用和服务在同一个域内，否则您将不得不做一些黑客攻击才能使其正常工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T18:33:27.803

[浏览器级别](http://en.wikipedia.org/wiki/Same_origin_policy)有安全策略来防止跨域 AJAX 调用。有多种解决方法（[例如使用 XML 而不是 JSON](http://james.padolsey.com/javascript/cross-domain-requests-with-jquery/)或[这个 jQuery 插件](https://github.com/padolsey/jQuery-Plugins/blob/master/cross-domain-ajax/jquery.xdomainajax.js)），但最“正确”的似乎是[使用 JSONP 而不是 JSON](https://stackoverflow.com/a/3506306/399649)，我认为您可以通过更改`dataType`AJAX 调用中的

```
$.ajax({
    //...etc.
    dataType: "jsonp",
    //...etc.
}); 
```

如果这不是问题，请尝试添加`return true;`到您的`beforeSend`处理程序。[如果返回，请求将被取消`false`](http://api.jquery.com/jQuery.ajax/)，但我不知道如果它根本不返回值会发生什么。

# wpf - 自动应用在单独程序集中定义的默认样式

> ID：13499575
> 
> 赞同：2
> 
> 时间：2012-11-21T18:18:01.930
> 
> 标签：wpf

我有以下要求：

1.  我的 WPF 应用程序由**几个模块（程序集）**组成，其中一些与 UI 相关。

2.  我想为某些控件创建一个**包含一组通用样式**（例如自定义默认按钮样式）的单个程序集，这些控件应该自动应用于所有其他与 UI 相关的程序集，只需包含一个程序集，而无需我指定显式资源键。

3.  我没有为每种控件提供样式，所以那些没有自定义样式的应该**保留默认的 Aero 主题**（包括内容模板等）。

4.  我**不想**编写**自己的扩展 Button 类**或类似的东西。

5.  我希望它**在设计时**也能在 Visual Studio 中工作，无论是在最终应用程序中还是在其他与 UI 相关的模块中。

由于样式是在程序集中定义的，因此我显然[不能在那里有 App.xaml](https://stackoverflow.com/questions/10797558/wpf-using-styles-resources-from-another-assembly)。因此，我假设我必须从 Generic.xaml 中包含它们。由于 Generic.xaml 仅在标准 (Aero) 主题中未定义样式时用作后备，因此 WPF 会忽略我在 Generic.xaml 中的样式。

下一步可能是创建我自己的主题（以某种方式合并默认的 Aero 样式）。但是我如何告诉 VS 在应用程序和模块中使用该主题，而不是例如 Aero？我想我必须以声明方式执行此操作，因为我需要为我的自定义样式提供设计时支持。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-10-17T15:29:32.687

简单地添加对样式程序集的引用是不够的；你必须做*一些事情*来让 WPF 合并资源。但是我们可以这样做，你只需要在你的应用程序程序集中添加一行 C#（或几行 XAML）。

最直接的解决方案可能是在您的共享样式程序集中创建一个强类型，并在启动时`ResourceDictionary`将其添加到您的应用程序级别。`ResourceDictionary`

例如，`CustomStyles.xaml`在您的共享样式程序集中创建一个，并将所有样式资源拉入该文件（直接或通过`MergedDictionaries`）。确保 Build Action 设置为“Page”，并向元素添加`x:Class`指令，如下所示：`ResourceDictionary`

```
<ResourceDictionary x:Class="YourNamespace.CustomStyles"
                    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
                    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml">
  <!-- Your styles declared or imported here -->
</ResourceDictionary> 
```

对于旨在替换内置或第三方控件样式的样式，您可以将样式声明为隐式，即`x:Key`完全不使用该样式，或使用控件的类型作为键，例如`x:Key="{x:Type ComboBox}"`.

添加`x:Class`指令可能不足以使 Visual Studio 生成`CustomStyles()`实际加载 XAML 内容的构造函数，因此您可能需要`CustomStyles.xaml.cs`手动添加文件并为其提供调用的构造函数`InitializeComponent()`（VS 仍应生成此内容）：

```
namespace YourNamespace
{
    partial class CustomStyles
    {
        public CustomStyles()
        {
            InitializeComponent();
        }
    }
} 
```

在您的应用程序中，您需要将此字典合并到您的`Application.Resources`字典中。如果您愿意，可以从`App.xaml`文件中执行此操作：

```
<Application x:Class="YourNamespace.App"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:cs="clr-namespace:YourNamespace;assembly=YourCustomStylesAssembly">
  <Application.Resources>
    <ResourceDictionary>
      <ResourceDictionary.MergedDictionaries>
        <cs:CustomStyles />
      </ResourceDictionary.MergedDictionaries>
    </ResourceDictionary>
  </Application.Resources>
</Application> 
```

...***或者***您可以在 C# 端执行此操作：

```
public partial class App
{
    protected override void OnStartup(StartupEventArgs e)
    {
        base.OnStartup(e);
        this.Resources.MergedDictionaries.Add(new CustomStyles());
    }
} 
```

现在，棘手的部分是让这些样式在 XAML 设计器中工作。想到的一种解决方案是添加一个自定义附加属性，您可以在所有视图上设置该属性，并且**仅**在您在设计器中运行时应用：

```
partial class CustomStyles
{
    public static readonly DependencyProperty EnableDesignTimeStylesProperty =
        DependencyProperty.RegisterAttached(
            "EnableDesignTimeStyles",
            typeof(bool),
            typeof(CustomStyles),
            new PropertyMetadata(
                default(bool),
                OnEnableDesignTimeStylesChanged));

    private static CustomStyles DesignTimeResources;

    private static void OnEnableDesignTimeStylesChanged(
        DependencyObject d,
        DependencyPropertyChangedEventArgs e)
    {
        if (!DesignerProperties.GetIsInDesignMode(d))
            return;

        var element = d as FrameworkElement;
        if (element == null)
            return;

        if (DesignTimeResources == null)
            DesignTimeResources = new CustomStyles();

        if ((bool)e.NewValue)
            element.Resources.MergedDictionaries.Add(DesignTimeResources);
        else
            element.Resources.MergedDictionaries.Remove(DesignTimeResources);
    }

    public static void SetEnableDesignTimeStyles(
        DependencyObject element,
        bool value)
    {
        element.SetValue(EnableDesignTimeStylesProperty, value);
    }

    public static bool GetEnableDesignTimeStyles(DependencyObject element)
    {
        return (bool)element.GetValue(EnableDesignTimeStylesProperty);
    }
} 
```

然后，在您的视图上，只需设置`CustomStyles.EnableDesignTimeStyles="True"`强制设计器合并样式资源即可。在运行时，`DesignerProperties.GetIsInDesignMode(d)`将评估为`false`，并且您最终不会在每个视图中加载样式的新副本；您只需从应用级资源继承它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-20T04:55:14.003

对于我一直在研究的 PRISM 应用程序，我一直在努力解决这些相同的问题。在做了一些 stack over flow 研究之后，我惊讶地发现让资源在设计时工作的最简单的答案是在我的每个基于 UI 的模块中添加一个 App.Xaml。当应用程序被编译时，它们都将被忽略。但是在设计时它们将被设计师使用。按照上述建议的其余部分，您将拥有一个 App.Xaml，其中包含一个合并的资源字典，该字典指向具有您所有样式的资源库。

这是我发现在设计期间获得样式的最简单方法。

```
<Application x:Class="ProjHydraulics.App"
         xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
         xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml">

<Application.Resources>

    <ResourceDictionary>
        <ResourceDictionary.MergedDictionaries>
            <ResourceDictionary  Source= "pack://application:,,,/Infrastructure;component/ResourceDictionaries/ResourceLibrary.xaml"/>
        </ResourceDictionary.MergedDictionaries>
        <Style TargetType="{x:Type Rectangle}"/>
    </ResourceDictionary>

</Application.Resources> 
```

建立我之前的知识，我整理了[一篇博客文章](http://waldoscode.blogspot.com/2014/09/prism-wpf-resource-dictionaries.html)，详细介绍了我在 PRISM 中使用资源字典的经验。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-10-17T15:42:22.453

我不知道如何自动应用它们。事实上，我认为“自动、设计师支持和多个组件”的组合是不可能的。但是，为每个控件添加标题引用很容易：

第 1 步：将所有样式合并或添加到所有其他项目引用的“样式”项目中的字典中。

第 2 步：在您的每个控件和其他资源字典 XAML 文件中包含对此字典的引用。它看起来像这样：

```
<ResourceDictionary.MergedDictionaries>
   <SharedResourceDictionary Source="pack://application:,,,/My.Ui.Resources;component/Themes/ColorSkins/LightTheme.xaml" />
... 
```

请注意使用 SharedResourceDictionary 来不重复实例。请参阅 [http://blogs.msdn.com/b/wpfsdk/archive/2007/06/08/defining-and-using-shared-resources-in-a-custom-control-library.aspx](http://blogs.msdn.com/b/wpfsdk/archive/2007/06/08/defining-and-using-shared-resources-in-a-custom-control-library.aspx)

和 [SharedResourceDictionary：在 Blend 中编辑资源](https://stackoverflow.com/questions/11317556/sharedresourcedictionary-edit-resource-in-blend)

如果您的所有控件都继承自同一个基类，则创建您自己的以编程方式包含它们的基类可能会很有用。

# mysql - 从 textareas 到数据库的文本使

> ID：13499581
> 
> 赞同：1
> 
> 时间：2012-11-21T18:18:23.627
> 
> 标签：mysql, textarea, line-breaks

当我将 textarea 中的文本插入数据库时​​，它将使用 enter 插入文本。没有
输入，但硬输入，每个输入都在文本框行的末尾。例如，这将是数据库中的文本：

Lorem ipsum dolor sit amet，consectetuer adipiscing elit。Aenean commodo ligula eget dolor。埃涅马萨。

```
Cum sociis natoque penatibus et 
magnis dis parturient montes, nascetur ridiculus 
mus. Donec quam felis, ultricies nec, pellentesque 
eu, pretium quis, sem. Nulla consequat massa quis 
enim. Donec pede justo, fringilla vel, aliquet 
nec, vulputate eget, arcu. In enim justo, rhoncus 
ut, imperdiet a, venenatis vitae, justo. Nullam 
dictum felis eu pede mollis pretium. Integer 
tincidunt. 

Cras dapibus. Vivamus elementum semper 
nisi. Aenean vulputate eleifend tellus. Aenean leo 
ligula, porttitor eu, consequat vitae, eleifend 
ac, enim. Aliquam lorem ante, dapibus in, viverra 
quis, feugiat a, tellus. Phasellus viverra nulla 
ut metus varius laoreet. Quisque rutrum. Aenean 
imperdiet. Etiam ultricies nisi vel augue. 
Curabitur ullamcorper ultricies nisi. Nam eget 
dui. 
```

代替

```
Lorem ipsum dolor sit amet, consectetuer adipiscing elit. Aenean commodo ligula eget dolor. Aenean massa. Cum sociis natoque penatibus et magnis dis parturient montes, nascetur ridiculus mus. Donec quam felis, ultricies nec, pellentesque eu, pretium quis, sem. Nulla consequat massa quis enim. Donec pede justo, fringilla vel, aliquet nec, vulputate eget, arcu. In enim justo, rhoncus ut, imperdiet a, venenatis vitae, justo. Nullam dictum felis eu pede mollis pretium. Integer tincidunt. Cras dapibus. Vivamus elementum semper nisi. Aenean vulputate eleifend tellus. Aenean leo ligula, porttitor eu, consequat vitae, eleifend ac, enim. Aliquam lorem ante, dapibus in, viverra quis, feugiat a, tellus. Phasellus viverra nulla ut metus varius laoreet. Quisque rutrum. Aenean imperdiet. Etiam ultricies nisi vel augue. Curabitur ullamcorper ultricies nisi. Nam eget dui. 
```

这怎么可能，我可以从 textarea 中删除硬中断吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T18:22:10.537

将在这里[替换](http://dev.mysql.com/doc/refman/5.0/en/string-functions.html#function_replace)有用：

```
SELECT REPLACE('www.mysql.com', 'w', 'Ww');
 -> 'WwWwWw.mysql.com' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-21T18:30:24.823

尝试`str_replace("\r\n", "", $string)`

# css - 如何使元素继承父元素值

> ID：13499590
> 
> 赞同：0
> 
> 时间：2012-11-21T18:19:17.607
> 
> 标签：css

我试图找出使 div 类继承父 div 高度的正确方法，以便当我这样做时，例如 padding-top: 100% ，它将元素置于父 div 的 100% 处。

这是我的代码：

CSS

```
#globalContainer{
    margin: 0px auto;
    width: 100%;
    height: 100%;
}

#header-out{
    width: 100%;
    background-color: black;
}

#header{
    width: 940px; /* Set to % when possible */
    height: 240px; /* Set to % when possible */
    margin: 0px auto;
    background-color: white;
}

#header .title{
    position: relative;
    float: left;
    padding-top: 100%;
} 
```

HTML：

```
<body>
    <div id="globalContainer">
        <div id="header-out">
            <div id="header">
                <div class="title">Test</div>
            </div>
        </div>
    </div>
</body> 
```

目前，我的测试出现在页眉底部的页面最底部......

谢谢 ！

**编辑：**我现在正在尝试在我的标题旁边添加一个徽标，我使用了以下代码：

```
#header .title{
    position: relative;
    float: left;
    top: 50%;
    left: 2.5%;
    width: 250px;
    height: 100px;
    border-style: solid;
    border-width: 1px;
}

#header .logo{
    position: relative;
    float: left;
    top: 50%;
    width: 250px;
    height: 100px;
    border-style: solid;
    border-width: 1px;
} 
```

问题是，它与我的标题重叠，如果我不使用左边，我的标题会从哪里开始：2.5%

我试图删除浮动：左，它不会改变任何东西......

任何人都可以帮忙吗？

# nosql - 用于 Raspberry Pi 的分布式 NoSQL 数据库，具有分片和复制功能？

> ID：13499591
> 
> 赞同：10
> 
> 时间：2012-11-21T18:19:21.707
> 
> 标签：nosql, raspberry-pi

我正在寻找具有以下功能的数据库：

*   在树莓派上运行
*   NoSQL（键值存储）
*   交易支持
*   分散式
*   支持分片
*   支持跨多个节点的自动管理数据冗余，以便单个节点可以加入和离开，类似于 P2P 网络

基本上，Redis 正是我想要的——但 Redis 完全在内存中运行，这对 Raspberry Pi 来说是一个巨大的缺点。

还有其他想法吗？

PS：具有给定特征的 P2P 网络或分布式文件系统对我来说也很好。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-27T09:14:42.247

[Apache Cassandra](http://cassandra.apache.org/)可以很好地在 Raspberry Pi 上运行。它应该满足你想要做的事情。我一直在我的博客上试验它，去[这里](http://ac31004.blogspot.co.uk)查看我的结果并在我的博客上设置信息

但是我注意到您说“交易支持”-您确定吗？

很少有 NOSQL 数据库提供事务支持，尽管[FoundationDB](https://foundationdb.com/key-value-store/white-papers/transaction-processing)就是其中之一。它具有您要求的所有功能，但在 Raspberry Pi 上运行除外，因为它需要 64 位。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-07T15:37:58.143

我还没有我的 Raspberry Pi，但我真的希望[Redis](http://redis.io/)在 Raspberry Pi 上运行。环顾 Redis 网站，没有理由相信它不应该这样做。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-23T21:44:39.137

有[MongoDB](http://www.mongodb.org/)，它提供了很多，但由于所有 DBMS 都是内存、存储和 IO 密集型的，我现在不知道集群或 Pi 的实用性如何。请注意，事务要求是模糊的，可以通过 Mongo 的自主文档更新来满足，假设 1 个文档 = 1 个事务。

你可以找到几个 Mongo + RaspberryPi 指南，例如

*   [Scribble：在 Raspberry Pi 上构建 MongoDB](http://elsmorian.com/post/24395639198/building-mongodb-on-raspberry-pi)
*   [如何在 Raspberry Pi 上安装 MongoDB……真的！| 蒙戈皮](http://mongopi.wordpress.com/2012/11/25/installation/)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-04-28T14:20:42.497

Riak 应该在树莓派集群上工作。这是一个[教程](http://basho.com/building-a-riak-cluster-on-raspberry-pi/)。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-10-09T17:13:41.890

如果您曾经喜欢 SQL，也应该考虑使用 SQLite。库可用于大多数语言，并且很容易为它建模数据。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-06-03T16:18:14.703

看看[OrientDb](http://www.orientechnologies.com/orientdb/)不是键值类型，而是一个 Document-Graph 数据库，从上一个版本开始，它支持分片的 1.7，当然还有基于多主节点中基于 Hazelcast 的分布式模式，我认为它支持事务您可以配置[plocal](https://github.com/orientechnologies/orientdb/wiki/Paginated-Local-Storage)存储以优化内存消耗，但尝试使用我认为可行的默认配置（我没有尝试 RaspberryPi 上的 lastes 版本，但最旧的版本我没有问题）

# java - 如何在 Apache http 服务器配置中设置 HTTP_CF_CONNECTING_IP

> ID：13499595
> 
> 赞同：0
> 
> 时间：2012-11-21T18:19:35.463
> 
> 标签：java, apache, web, cloudflare

我们有一个 JSF 应用程序，通过 tomcat ajp 协议服务请求。整个网站都位于 Cloudflare CDN 后面。执行以下代码时

`String ipaddress = httpServletRequest.getHeader(HTTP_CF_CONNECTING_IP);`

ipaddress 始终为空。

`httpServletRequest.getRemoteAddr()`

总是给云耀斑IP地址。

已经为使用 jninix 的网站找到了这个[http://danielmiessler.com/blog/getting-real-ip-addresses-using-cloudflare-nginx-and-varnish](http://danielmiessler.com/blog/getting-real-ip-addresses-using-cloudflare-nginx-and-varnish)。

我们对 apache http 服务器有类似的解决方案吗

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T18:54:35.240

通过加载 LoadModule cloudflare_module modules/mod_cloudflare.so 找到解决方案 这将设置远程 ip 而不是 cloudflare 的 ip

# java - 有多少个整数，整数相加

> ID：13499605
> 
> 赞同：1
> 
> 时间：2012-11-21T18:19:55.890
> 
> 标签：java, loops, while-loop

```
import java.util.Scanner;
public class InputLoop
{
    public static void main(String[] args)
  {
    Scanner scan = new Scanner(System.in);
    System.out.println("Enter an integer to continue or a non integer to finish");

    while (scan.hasNextInt())
    {
        System.out.println("Enter an integer to continue or a non integer to finish");
        int value = scan.nextInt();
        System.out.print("user: ");
    }
    scan.next();
    {
        System.out.println ("You entered");
        System.out.println ();

    }
} 
```

}

在它说“你输入”的地方，我必须输入多少个整数，例如“3”，然后是整数的总和，例如“56”。我不知道该怎么做，我该如何实现呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-21T18:23:27.127

`List<Integer>`每次用户输入一个整数时，维护一个并添加到这个列表中。因此，添加的整数数将是`list.size()`。就您当前正在执行的操作而言，无法访问用户的旧输入。

您也可以使用存储总数和计数的变量（在这种情况下可以正常工作），但我认为`List`如果您决定更新/修改此代码，使用该方法将为您提供更大的灵活性，这是您作为程序员应该牢记在心。

```
List<Integer> inputs = new ArrayList<Integer>();

while (scan.hasNextInt()) {
    ...
    inputs.add(scan.nextInt());
}

... 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-21T18:24:53.153

只需保留一个名为的变量`count`和一个名为 的变量`sum`。`while`并将循环中的代码更改为：

```
 int value = scan.nextInt();
 sum += value;
 count++; 
```

`while`最后，您可以在循环结束后输出两者。

顺便说一句，您不需要将那些花括号 { } 放在`scan.next()`;之后 它们是不相关的，并且总是独立于`scan.next()`;执行。

所以只需将其更改为：

```
scan.next();  //I presume you want this to clear the rest of the buffer?
System.out.println("You entered " + count + " numbers");
System.out.println("The total is " + sum); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-21T18:23:00.657

有一个计数变量，在开头声明`main`并递增它。

你也可以用同样的方式维护一个 sum 变量。

```
while (scan.hasNextInt())
{
    System.out.println("Enter an integer to continue or a non integer to finish");
    int value = scan.nextInt();
    count++;
    sum += value;
    System.out.print("user: ");
}

scan.next();
{
    System.out.println ("You entered");
    System.out.println (count);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-21T18:27:12.140

对于您想要输出的内容，您不需要保留用户输入的历史记录。您所需要的只是一个运行总数和一个计数。您也不需要最后一次调用`scan.next()`或将最后一次`println`调用包含在单独的块中。

```
public class InputLoop
{
    public static void main(String[] args)
    {
        Scanner scan = new Scanner(System.in);
        System.out.println("Enter an integer to continue or a non integer to finish");

        int total = 0;
        int count = 0;
        while (scan.hasNextInt())
        {
            System.out.println("Enter an integer to continue or a non integer to finish");
            int value = scan.nextInt();
            total += value;
            ++count;
            System.out.print("user: ");
        }
        System.out.println ("You entered " + count + " values with a total of " + total);
    }
} 
```

# c# - 如何计算平均字长

> ID：13499606
> 
> 赞同：0
> 
> 时间：2012-11-21T18:20:04.593
> 
> 标签：c#

我试图计算平均字长，但一直出现错误。

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Windows.Forms;
using System.IO;
using System.Text;

namespace textAnalyser
{
public class Analyser
{
public static void Main()
{
// Values
string myScen;
string newScen = "";
int numbChar = 0;
string userInput;
int countedWords = 0;

//User decsion on how to data is inputted
Console.WriteLine("Enter k for keyboard and r for read from file");
userInput = Convert.ToString(Console.ReadLine());

//If statement, User input is excecuted

if (userInput == "k")
{
// User enters their statment
Console.WriteLine("Enter your statment");
myScen = Convert.ToString(Console.ReadLine());

// Does the scentence end with a full stop?

if (myScen.EndsWith("."))
Console.WriteLine("\n\tScentence Ended Correctly");

else
Console.WriteLine("Invalid Scentence"); 
```

计算单词中的字符数

```
// Calculate number of characters
foreach (char c in myScen)
{
numbChar++;
if (c == ' ')
continue;

newScen += c;
}
Console.WriteLine("\n\tThere are {0} characters. \n\n\n", numbChar);

// Calculates number of words
countedWords = myScen.Split(' ').Length;
Console.WriteLine("\n\tTherer are {0} words. \n\n\n", countedWords); 
```

这是我试图计算平均字长的地方 //Calculate Average word length

```
double averageLength = myScen.Average(w => w.Length);
Console.WriteLine("The average word length is {0} characters.", averageLength);`} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T18:27:50.080

当您调用 Enumerable LINQ 方法（例如 .Average() 或 .Where()）时，它们会对集合中的各个元素进行操作。字符串是字符的集合，因此您的 myScen.Average() 语句循环遍历字符串的每个字符，而不是每个单词。字符的长度都是 1，因此它们没有长度属性。

为了访问单个单词，您必须在 myScen 上调用 .Split(' ') ，它会为您提供一个字符串集合（一个特定的数组）。由于这些字符串有长度，您可以平均它们并使用您的最终结果。

```
var countedWords= myScen.Split(' ').Average(n=>n.Length);
Console.WriteLine("\n\tTherer are {0} words. \n\n\n", countedWords); 
```

# haskell - 如何使用 Hcodecs 编写 wav 文件

> ID：13499607
> 
> 赞同：-1
> 
> 时间：2012-11-21T18:20:10.690
> 
> 标签：haskell, audio

我正在尝试开始在 haskell 中玩一些声音。

我想我会得到一个代表声波的列表。我的问题是获取此列表，并将其转换为`Audio`Hcodecs 库中的类型，以便我可以使用该库创建波形文件。

所以问题是：我如何从一个列表转到一个`Audio`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T21:09:22.823

关键的一点是`type SampleData a = UArray Int a`。所以你可以只使用的`IArray`实例`Data.Array.Unboxed.UArray`来[构造这个容器](http://hackage.haskell.org/packages/archive/array/0.3.0.3/doc/html/Data-Array-IArray.html#g:3)。然后剩下要做的就是使用`Audio sampleRate channelNumber sampleData`，一切就绪。

# jquery - 将输入字段的值分配给 div / 重复内容的背景图像

> ID：13499609
> 
> 赞同：0
> 
> 时间：2012-11-21T18:20:14.390
> 
> 标签：jquery

我使用下面的代码从输入字段的值更改`background-image`div，效果很好：

```
$(".ImageUrl").blur(function(){
    $(".Image").css("background-image", "url("+$(this).val()+")");
});

<div class="wrap">
    <section>
        <input class="ImageUrl"/>
        <div class="Image"></div>
    </section>
</div> 
```

毫不奇怪，当`.wrap`添加一个重复的 div 并输入一个 url 时，它会改变两个 div 的背景，如下例所示：

[http://jsfiddle.net/adige72/tKS6j/](http://jsfiddle.net/adige72/tKS6j/)

我想要的是每个“包装”都像只有一个“包装”一样工作。

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T18:22:12.030

为选择器使用唯一 ID 而不是类名，或更改选择器以仅选择第一个元素：

```
$(".ImageUrl").eq(0)..... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T18:23:25.023

只需选择兄弟姐妹`.Image`

```
$(".ImageUrl").blur(function(){
    $(this).siblings(".Image").css("background-image", "url("+$(this).val()+")");
}); 
```

**编辑**

以上假设当您说*“毫不奇怪，添加重复的 div”时*，您的意思是重复的`.wrap`div。

干杯

# wordpress - 无法列出博客页面上的所有帖子

> ID：13499610
> 
> 赞同：-1
> 
> 时间：2012-11-21T18:20:21.383
> 
> 标签：wordpress

> 我正在尝试将我的 wordpress 网站上的所有帖子放到一个页面上。首先实现自定义主题后，我创建了名为“博客”的页面。在设置->阅读中，我将帖子页面设置为博客。我创建了一些帖子。但我的博客页面没有显示这些帖子，而是显示索引页面。我在默认激活的主题上尝试了相同的程序，然后它工作正常。请让我知道这可能是什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T18:28:32.570

如果您创建一个名为 blog 的页面，那么生成页面内容的模板应该称为 page-blog.php（在您的主题文件夹中）。

# pdf - 格式错误的 pdf 文档要求保存更改

> ID：13499620
> 
> 赞同：0
> 
> 时间：2012-11-21T18:21:21.320
> 
> 标签：pdf, save, eof, dompdf, malformed

我们有这个大型网络项目，用户可以在其中将 html 打印为 pdf。我们正在使用 dompdf，并在一定程度上修复了导致 pdf 有几个空白页的长单元格问题。现在的问题是保存的 pdf 在关闭时总是询问用户是否要保存更改。我已验证 pdf 具有正确的 %%EOF，并检查了对象的一致性。还有什么可能导致这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T22:25:53.470

在阅读[了 pdf 的介绍](http://www.gnupdf.org/Introduction_to_PDF)后，我意识到如果修改了 pdf，我必须容纳所有对象偏移量，以便它们指向对象的起始位置。

# c++ - C++ 中的第一个覆盖前缀 - 我的代码有什么问题？

> ID：13499621
> 
> 赞同：0
> 
> 时间：2012-11-21T18:21:21.723
> 
> 标签：c++, arrays

我只是在 C++ 中做了一个小代码测试......对于第一个覆盖前缀。如此处所定义，

给出了一个由 N 个整数组成的非空零索引数组 A。数组 A 的第一个覆盖前缀是最小整数 P 使得`0 ≤ P < N`数组 A 中出现的每个值也按顺序出现`A[0], A[1], ..., A[P]`。

例如，以下 5 元素数组 A 的第一个覆盖前缀：

```
A[0] = 2
A[1] = 2
A[2] = 1
A[3] = 0
A[4] = 1 
```

是 3，因为序列`[ A[0], A[1], A[2], A[3] ]`等于`[2, 2, 1, 0]`，包含数组 A 中出现的所有值。

写一个函数

```
class Solution { public int ps(int[] A); } 
```

即，给定一个由 N 个整数组成的零索引非空数组 A，返回 A 的第一个覆盖前缀。

假使，假设：

*   N 是 [1..1,000,000] 范围内的整数；
*   数组 A 的每个元素都是 [0..N−1] 范围内的整数。

例如，给定数组 A 使得

```
A[0] = 2
A[1] = 2
A[2] = 1
A[3] = 0
A[4] = 1 
```

如上所述，该函数应返回 3。

复杂：

*   预期的最坏情况时间复杂度为 O(N)；
*   预期的最坏情况空间复杂度为 O(N)，超出输入存储（不计算输入参数所需的存储）。

我的解决方案如下（不是说它是最佳的）......但是，它只得分 48/100......想知道你们中是否有人能看到导致错误答案的代码问题？谢谢

```
int ps ( int A[], int N )
{

long unique_array [N-1];
memset( unique_array, -1, N - 1 );
long value = 0, counter = 0, unique_num = 0, index = 0;

for ( counter; counter < N; counter++ )
{
    value = A[counter];

    if ( unique_array[value] < 0 )
    {
        unique_array[value] = value;
        unique_num ++;
    }
}

for ( counter = 0; counter < N; counter++ )
{
    value = A[counter];

    if ( unique_array[value] >= 0 )
    {
        unique_array[value] = -1;
        unique_num --;

        if ( unique_num == 0 )
            index = counter;
    }
}

return index;

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T19:14:39.713

数组`unique_array`应该有 length `N`，而不是`N-1`：

```
long unique_array[N]; // not N-1 
```

此外，`memset`不会将数组的所有元素都设置为`-1`; 使用循环来做到这一点：

```
for ( counter = 0; counter < N; counter++ )
{
    unique_array[counter] = -1;
} 
```

实际上，您只需要一个位数组，而不是`long`值。您可以将数组初始化为 0，并将各个条目设置为 1 而不是`value`：

```
#define FALSE 0
#define TRUE 1
if ( unique_array[value] == FALSE )
{
    unique_array[value] = TRUE;
    unique_num ++;
} 
```

如果您进行此更改，则可以将数组初始化为 0 而无需显式循环：

```
int unique_array[N] = {0}; // this syntax only works with 0, not with -1 
```

# php - 如何设置 HTTP_Exception_404

> ID：13499623
> 
> 赞同：0
> 
> 时间：2012-11-21T18:21:23.220
> 
> 标签：php, kohana, kohana-3.2

我正在使用 kohana 3.2，当页面不存在时，kohana-error 模块工作正常。但是我有这种情况：页面存在，但是没有数据进来，因为数据不存在。我正在使用路由参数来检查数据库。

所以我做了这个，

```
if($response )
    {
       return $response; 
    } else {
       throw new HTTP_Exception_404('Page Not Found');
    } 
```

如果有数据返回，如果没有，则创建一个“未找到页面”，我想它会被 kohana-error 模块捕获，但它不是......这可能吗？这是正确的方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-28T20:37:11.143

在您的`index.php`中，您执行以下操作：

```
$request = Request::factory();

try
{
  $response = $request->execute();

  if (!$response->body())
  {
    throw new HTTP_Exception_404();
  }
}
catch (Exception $exc)
{
   if ($exc instanceof HTTP_Exception_404)
   {
      $response = Request::factory('your/404error/controller')->execute();
   }
   else
   {
      // rethrow exception
      throw $exc;
   }
}

echo
  $response
  ->send_headers()
  ->body(); 
```

这样，您可以为每个 HTTP 异常执行一个控制器，或者您可以对所有异常（50x 和 40x 错误）使用 catch all 404 页面

# css - 外部 CSS 不会在 IOS6 Chrome 中加载

> ID：13499633
> 
> 赞同：0
> 
> 时间：2012-11-21T18:22:05.597
> 
> 标签：css, google-chrome, ios6

我有一个调用外部样式表的简单网页，一个用于 google 的 webfonts，另一个用于我自己服务器上的 css 文件。

这适用于 IE9、FF、Chrome 以及 Android chrome 和 IOS6 Safari 上的桌面测试 -

但在 IOS6 - Chrome 上没有运气。

在 chrome 上，即使加载了 webfont 样式表，我自己的外部样式表也没有 - 有人知道吗？

网页[我的网页](http://plumplucker.com/animated/MotherOfAllFiction.html) 我的样式表[我的样式表](http://plumplucker.com/animated/angrywords.css)

# javascript - 不通过referrer的链接

> ID：13499635
> 
> 赞同：2
> 
> 时间：2012-11-21T18:22:08.977
> 
> 标签：javascript, hyperlink, target, referrer, spoofing

我想创建一个链接列表，在我的私人页面的新选项卡中打开目标，我不希望传递引用 URL。我尝试了以下方法，但没有解决问题：

```
<script>
function op(url){
  window.open(url.replace(/<(?:.|\n)*?>/gm,''),'_newtab');
}
</script>    
<span onclick="javascript:op(this.innerHTML);">http://www.google.com<span> 
```

有什么方法可以欺骗或空白推荐人？在最坏的情况下，我可能会创建一个 iframe 并将带有链接的页面放在一些免费主机上，但我更喜欢一些更优雅的解决方案。唯一的要求是它应该在 Chrome、Opera、IE 和 FF（2011+ 版本）中工作，可访问性不是问题，因为我认识的极少数用户会使用它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T18:23:36.883

引用 URL 是 HTTP 协议的一部分，而不是标记。你无法改变这一点。

此外，您永远不需要`javascript:`在事件处理程序中指定。它总是并且只能是javascript。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T18:26:12.367

有一个[`rel="noreferrer"`](http://blog.whatwg.org/the-road-to-html-5-link-relations#rel-noreferrer)尚未被 Firefox 支持的...

另请参阅[https://stackoverflow.com/a/8957778/22470](https://stackoverflow.com/a/8957778/22470)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-21T18:26:54.877

在 Heroku 上创建一个接收 URL 然后转发用户的小应用程序。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-21T18:27:31.970

您可以重定向到重定向到最终网站的中间页面，这将隐藏真正的引荐来源。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-24T16:06:53.147

看来最简单的就是 iframe 脏方法了。

# networking - 是否为某些 Wi-Fi 热点分配了 IP 地址？

> ID：13499638
> 
> 赞同：-1
> 
> 时间：2012-11-21T18:22:11.037
> 
> 标签：networking, dataset, ip, wifi

我正在做一个项目：目标是找到检测热点的特征，但我还没有用于开发和估计方法的训练集或测试集。

据我了解，有两种方法可以构建集合：

*   获取一些美国热点的列表；
*   找到一个函数来检查给定的 IP 地址是否与某个热点连接（具有一定的确定性）。

所以我想知道：

*   有美国热点 IP 数据集吗？
*   是否有任何其他方法或技术可以确定给定 IP 地址是否分配给热点？

任何有用的想法都值得赞赏（批评也值得赞赏）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T18:25:29.240

一些提示。

1.  您实际上想使用 MAC 地址，而不是 IP。IP 可以比 MAC 地址更容易更改。
2.  至少有 2 组 mac/location 数据集，Skyhook 和 Google。[Skyhook](http://www.skyhookwireless.com/location-technology/support.php)有一个网站，您可以在其中了解有关他们的 SDK 的更多信息，我认为 Google 不允许直接访问他们的。使用 Skyhook 的成本各不相同，但通常每台设备约为 0.50 美元，具体取决于多种因素。

# jsf - Primefaces - 在数据表之外找不到具有标识符的组件

> ID：13499642
> 
> 赞同：26
> 
> 时间：2012-11-21T18:22:13.377
> 
> 标签：jsf, primefaces

```
 <ui:define name="content">
    <f:view>                        
    <h:form id="myForm" styleClass="form" >

        <p:dataTable var="provider" id="ss"  value="#{providerSelectBean.providerList}" rowKey="#{provider.license}"  

            selection="#{providerSelectBean.selectedProvider}" selectionMode="single"> 

            <p:ajax listener="#{providerSelectBean.onRowSelect}"    
                            update=":myForm:output"event="rowSelect"/>  

            <p:column sortBy="#{provider.license}" width="110" >
                <f:facet name="header">
                    <h:outputText value="License#" />
                </f:facet>
                <h:outputText value="#{provider.license}" />
            </p:column>

            <p:column sortBy="#{provider.prgName}" width="110" >
                <f:facet name="header">
                    <h:outputText value="Program Name" />
                </f:facet>
                <h:outputText value="#{provider.prgName}" />
            </p:column>

        </p:dataTable><br/>

        <p:panelGrid id="output" >
            <h:outputText value="License" />
            <h:outputText value="#{provider.license}" /> 
        </p:panelGrid>

    </h:form>           
    </f:view>

</ui:define> 
```

这是我第一次使用 JSF2.0 和 primefaces 3.4.1 并且`<p:ajax update`给出了错误

```
javax.faces.FacesException: Cannot find component with identifier  
":myForm:output"  referenced from "myForm:ss" 
```

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-11-21T18:41:42.837

尝试检查生成的 HTML 代码并查看为您的 panelGrid 生成的实际 id 并更新该 id。如果它碰巧是动态的，您总是可以使用 JQuery CSS 选择器（我发现自己经常这样做）。在你的情况下，你可以这样：

```
update="@([id$=output])" 
```

此表达式代表其 id 以输出结尾的每个组件。查看 JQuery 文档以获取更多信息。

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2013-02-04T15:00:23.743

You can also use `:#{p:component(componentId)}` as in

```
<p:ajax listener="#{providerSelectBean.onRowSelect}"  
update=":#{p:component('output')}" event="rowSelect"/> 
```

Quoting BalusC's answer to [Get id of parent naming container in template for in render / update attribute](https://stackoverflow.com/a/8850963/1809603):

> p:component is a helper function that scans the entire view root for a component with the given ID and then returns its client ID.

# ios - YouTube Api 发送 POST 请求

> ID：13499643
> 
> 赞同：0
> 
> 时间：2012-11-21T18:22:20.910
> 
> 标签：ios, http, post, youtube, youtube-api

当我向 YouTube Api 发送 POST 请求时，它会返回如下信息：

```
<errors xmlns='http://schemas.google.com/g/2005'><error><domain>GData</domain>>
<code>ParseException</code><internalReason>Element type "entry" must be followed 
by either         
attribute specifications, "&gt;" or "/&gt;".</internalReason></error></errors> 
```

我不知道这意味着什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T19:56:33.530

如果您的评论中的内容正是您发布的内容，那么您打错了——第二个 xmlns 属性需要在前面的引号和属性名称之间留一个空格，以便将其识别为有效属性——这可能是正在触发解析错误。

# authorize - MVC 4 使用授权和自定义代码不起作用

> ID：13499644
> 
> 赞同：2
> 
> 时间：2012-11-21T18:22:26.587
> 
> 标签：authorize

MVC 4 的新手。我不想做的是使用 MVC 4 附带的内置帐户管理。但是，我在 Views、AccountModel 和 AccountController 下创建了一个 Account 文件夹。

我想做的是限制对帐户文件夹中视图的访问。为此，在我的 AccountController 中，我使用以下内容：

```
[Authorize]
public class AccountController : Controller
{
    [AllowAnonymous]
    public ActionResult Login(string returnUrl)
    {
        ViewBag.ReturnUrl = returnUrl;
        return View();
    }
    public ActionResult bob()
    {
        return View();
    }... 
```

在我的主页上，我有一个指向 Accounts 视图下的 bob 视图的链接，它现在将我重新路由到登录页面（这是正确的）。

现在，在提交表单时，使用正确的凭据（一切正常），我应该能够看到 bob，但由于我没有被授权，我被重定向回登录。编码：

```
 public ActionResult Login(LoginModel model, string returnUrl)
    {
        if (ModelState.IsValid)
        {
            return RedirectToLocal(returnUrl);
        }... 
```

我不想使用内置的连接到数据库，而是我需要根据字符串检查用户名，然后保持授权 = true 以便我可以查看鲍勃？

从长远来看，我计划连接到数据库并使用 SPROC 拉回信息，所以现在，我只想根据检查的字符串对用户进行身份验证。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T22:17:57.497

您将继续被重定向，直到 ASP.net 看到 Forms Authenticated cookie。

```
FormsAuthentication.SetAuthCookie(theUsersNameasString, boolForSessionOrPersistentCookie); 
```

假设您的 Web.Config 配置为表单身份验证

```
 <authentication mode="Forms">
  <forms loginUrl="~/Account/Login" timeout="2880" />
</authentication> 
```

ASP.Net 将寻找 .ASPXAUTH cookie，除非此 cookie 的名称在 WEB.CONFIG 中被更改

# java - 带有 ID 引用而不是包含的 JAXB 序列化 XML

> ID：13499647
> 
> 赞同：6
> 
> 时间：2012-11-21T18:22:39.650
> 
> 标签：java, jaxb, xml-serialization, jersey

在 RestFul-Webservice (Jersey) 上下文中，我需要将对象图编组/序列化为 XML 和 JSON。为简单起见，我尝试用 2-3 个类来解释问题：

*人.java*

```
@XmlRootElement
@XmlAccessorType(XmlAccessType.FIELD)
public class Person {

    private String name;

    // @XmlIDREF
    @XmlElement(name = "house")
    @XmlElementWrapper(name = "houses")
    private Collection<House> houses;

    public Person() {}

    public Person(String name, Collection<House> houses) {
        this.name = name;
        this.houses = houses;
    }
} 
```

*房子.java*

```
@XmlAccessorType(XmlAccessType.FIELD)
public class House {

    // @XmlID
    public String name;

    public String location;

    public House() {}

    public House(String name, String location) {
        this.name = name;
        this.location = location;
    }
} 
```

现在，当我序列化一个 Person 时，XML 将如下所示：

```
<people>
    <person>
        <name>Edward</name>
        <houses>
            <house>
                <name>MyAppartment</name>
                <location>London</location>
            </house>
            <house>
                <name>MySecondAppartment</name>
                <location>London</location>
            </house>
        </houses>
    </person>

    <person>
        <name>Thomas</name>
        <houses>
            <house>
                <name>MyAppartment</name>
                <location>London</location>
            </house>
            <house>
                <name>MySecondAppartment</name>
                <location>London</location>
            </house>
        </houses>
    </person>
</people> 
```

这里的问题是，相同的房子被多次列出。现在我添加未注释`XmlIDREF`和`XmlID`注释，这将导致 XML 类似于：

```
<people>
    <person>
        <name>Edward</name>
        <houses>
            <house>MyAppartment</house>
            <house>MySecondAppartment</house>
        </houses>
    </person>

    <person>
        <name>Thomas</name>
        <houses>
            <house>MyAppartment</house>
            <house>MySecondAppartment</house>
        </houses>
    </person>
</people> 
```

虽然第一个 XML 过于冗长，但这个缺少信息。如何创建（和解组）类似于：

```
<people>
    <person>
        <name>Edward</name>
        <houses>
            <house>MyAppartment</house>
            <house>MySecondAppartment</house>
        </houses>
    </person>

    <person>
        <name>Thomas</name>
        <houses>
            <house>MyAppartment</house>
            <house>MySecondAppartment</house>
        </houses>
    </person>

    <houses>
        <house>
            <name>MyAppartment</name>
            <location>London</location>
        </house>
        <house>
            <name>MySecondAppartment</name>
            <location>London</location>
        </house>
    </houses>
</people> 
```

该解决方案应该是通用的，因为我不想为对象图中的每个新元素编写额外的类。

为了完整起见，这里是宁静的网络服务：

```
@Path("rest/persons")
public class TestService {
    @GET
    @Produces({ MediaType.TEXT_XML, MediaType.APPLICATION_JSON })
    public Collection<Person> test() throws Exception {
        Collection<Person> persons = new ArrayList<Person>();
        Collection<House> houses = new HashSet<House>();
        houses.add(new House("MyAppartment", "London"));
        houses.add(new House("MySecondAppartment", "London"));
        persons.add(new Person("Thomas", houses));
        persons.add(new Person("Edward", houses));
        return persons;
    }
} 
```

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T13:25:38.947

如果您尝试序列化为与您提供的最后一个 XML 示例匹配的格式，那么我相信您的对象图的结构不正确以实现这一目标。

如果您想提供一个`Person`对象集合及其关联的房屋，并提供一个`House`对象集合，那么您需要返回一个包含这两个集合的序列化 XML 消息。看起来好像您在正确的位置有您的`@XmlIDREF`和`@XmlID`注释，以便按照您的意图（根据您的描述）建立人屋关联，但您只返回`Person`对象的集合，而不是返回两个集合。

您的网络服务应该看起来更像这样（省略序列化，因为您很清楚如何序列化它）：

```
@Path("rest/persons")
public class TestService {
    @GET
    @Produces({ MediaType.TEXT_XML, MediaType.APPLICATION_JSON })
    public Map<String, Object> test() throws Exception {
        Map<String, Object> peopleAndHouses = new HashMap<String, Object>();
        Collection<Person> persons = new ArrayList<Person>();
        Collection<House> houses = new HashSet<House>();

        houses.add(new House("MyAppartment", "London"));
        houses.add(new House("MySecondAppartment", "London"));
        persons.add(new Person("Thomas", houses));
        persons.add(new Person("Edward", houses));

        peopleAndHouses.put("houses", houses);
        peopleAndHouses.put("people", persons);
        return peopleAndHouses;
    }
} 
```

还有其他方法可以实现这一点（例如，创建一个具有人和房屋的集合属性的包装器对象等），但希望您能明白这一点。

# c# - 访问注册表项会引发异常？

> ID：13499655
> 
> 赞同：0
> 
> 时间：2012-11-21T18:23:20.467
> 
> 标签：c#

我正在尝试访问寡妇 8 注册表中以下路径中的键：

> 软件\Wow6432Node\Microsoft\Windows\CurrentVersion\Run

我正在使用以下代码来做到这一点：

```
using (RegistryKey baseKey = RegistryKey.OpenBaseKey(RegistryHive.LocalMachine, RegistryView.Default))
{
    using (RegistryKey key = baseKey.OpenSubKey(startUpRegistryPath)) 
```

但这会引发异常：

> SecurityException：不允许请求的注册表访问。

如何使用 C# 代码获得对该路径的写入权限？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T18:25:30.857

可能需要申请管理员权限的[应用程序清单，以便您的应用程序可以访问注册表。](http://msdn.microsoft.com/en-us/library/windows/desktop/aa374191%28v=vs.85%29.aspx)

```
<requestedExecutionLevel level="requireAdministrator" uiAccess="true"/> 
```

UAC 禁止应用程序对被视为“有害”的特定区域拥有权利；其中包括注册表和 Program Files/Windows 目录。

# nginx - NginX 和 Munin - 位置和错误 404

> ID：13499656
> 
> 赞同：3
> 
> 时间：2012-11-21T18:23:20.617
> 
> 标签：nginx, munin

我有一个使用这个简单配置运行 nginx+php-fpm 的服务器：

```
server {
    listen   80;
    server_name ipoftheserver;
    access_log /var/www/default/logs/access.log;
    error_log /var/www/default/logs/error.log;

    location / {
        root   /var/www/default/public_html;
        index  index.html index.htm index.php;
    }

    location ^~ /munin/ {
        root /var/cache/munin/www/;
        index index.html index.htm index.php;
    }

    location ~\.php$ {
    include /etc/nginx/fastcgi_params;
    fastcgi_pass 127.0.0.1:9000;
    fastcgi_index index.php;
    fastcgi_param SCRIPT_FILENAME /var/www/default/public_html$fastcgi_script_name;
    }
} 
```

但是当我打开 ipoftheserver/munin/ 时，我收到 404 错误（当我请求 ipoftheserver/ 时，/var/www/default/public_html 上的文件被正确收听）

Munin 已安装并完美运行。如果我删除此配置并使用另一个配置，则一切正常（但不在 /munin/ 目录中）：

```
server {
  server_name ipoftheserver;
  root /var/cache/munin/www/;
  location / {
    index index.html;
    access_log off;
  }
} 
```

怎么修？非常感谢您的帮助

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-22T14:51:09.797

使用别名而不是根解决

```
server {
    listen   80;
    server_name ipoftheserver;
    access_log /var/www/default/logs/access.log;
    error_log /var/www/default/logs/error.log;

    location / {
        root   /var/www/default/public_html;
        index  index.html index.htm index.php;
    }

    location /munin/ {
        alias /var/cache/munin/www/;
        index index.html index.htm index.php;
    }

    location ~\.php$ {
        include /etc/nginx/fastcgi_params;
        fastcgi_pass 127.0.0.1:9000;
        fastcgi_param SCRIPT_FILENAME /var/www/default/public_html$fastcgi_script_name;
    }
} 
```

# c++ - constexpr 用指针初始化

> ID：13499658
> 
> 赞同：14
> 
> 时间：2012-11-21T18:23:26.377
> 
> 标签：c++, pointers, constants, constexpr

我正在尝试使用指向 int 的指针初始化 constexpr 声明，该指针是一个 const 对象。我还尝试使用非 const 类型的对象来定义对象。

代码：

```
#include <iostream>

int main()
{
constexpr int *np = nullptr; // np is a constant to int that points to null;
int j = 0;
constexpr int i = 42; // type of i is const int
constexpr const int *p = &i; // p is a constant pointer to the const int i;
constexpr int *p1 = &j; // p1 is a constant pointer to the int j; 
} 
```

g++ 日志：

```
constexpr.cc:8:27: error: ‘&amp; i’ is not a constant expression
constexpr.cc:9:22: error: ‘&amp; j’ is not a constant expression 
```

我相信这是因为 main 中的对象没有固定地址，因此 g++ 正在向我抛出错误消息；我将如何纠正这个？不使用文字类型。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-11-21T21:50:36.317

让他们`static`修复他们的地址：

```
int main()
{
  constexpr int *np = nullptr; // np is a constant to int that points to null;
  static int j = 0;
  static constexpr int i = 42; // type of i is const int
  constexpr const int *p = &i; // p is a constant pointer to the const int i;
  constexpr int *p1 = &j; // p1 is a constant pointer to the int j; 
} 
```

这被称为*地址常量表达式*[5.19p3]：

> 地址常量表达式是指针类型的纯右值核心常量表达式，其计算结果为具有静态存储持续时间的对象的地址、函数的地址、空指针值或 std 类型的纯右值核心常量表达式： :nullptr_t。

# c++ - 覆盖虚函数不起作用，头文件和 C++ 文件

> ID：13499665
> 
> 赞同：2
> 
> 时间：2012-11-21T18:23:59.833
> 
> 标签：c++, inheritance, overriding, virtual

我们有一个名为 Student 的父类。我们有一个子类：StudentCS。

学生.h：

```
#include <iostream.h>
#include<string.h>
#include<vector.h>
#include "Course.h"
class Course;

class Student {
public:
    Student();
    Student(int id, std::string dep, std::string image,int elective);
    virtual ~Student();
    virtual void Study(Course &c) const;  // this is the function we have a problem with
    void setFailed(bool f);
[...]

}; 
```

学生.cpp：

```
#include "Student.h"

[...]

void  Student::Study(Course &c) const {

} 
```

我们有 StudentCS.h：

```
#include "Student.h"
class StudentCS : public Student {
public:
StudentCS();
virtual ~StudentCS();
StudentCS (int id, std::string dep, std::string image,int elective);
void Study(Course &c) const;
void Print();
}; 
```

和 StudentCS.cpp：

```
void StudentCS:: Study (Course &c) const{
    //25% to not handle the pressure!
    int r = rand()%  100 + 1;
cout << r << endl;
if (r<25) {
    cout << student_id << " quits course " << c.getName() << endl;
}

 } 
```

我们主要创建学生：

```
Student *s;
vector <Student> uniStudent;
[...]
    if(dep == "CS")
        s = new  StudentCS(student_id,dep,img,elective_cs);
    else
        s = new StudentPG(student_id,dep,img,elective_pg);

    uniStudent.push_back(*s); 
```

然后我们打电话去学习，但我们让父母学习，而不是孩子！请帮忙！

代码可以编译，但是在 uniStudent.Study() 上运行和调用时，它使用父级而不是子级

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-21T18:43:13.287

编辑：编辑后问题很清楚。

问题是您将基础具体对象存储在 STL 容器中。这会产生一个称为[对象切片](http://login2win.blogspot.it/2008/05/c-object-slicing.html)的问题。

当您将学生添加到 a`vector<Student>`时，由于向量的分配器是基于类构建的，因此`Student`派生类的所有附加信息都将被丢弃。一旦将元素插入向量中，它们就会成为基本类型。

要解决您的问题，您应该使用 a`vector<Student*>`并在其中直接存储对学生的引用。所以分配器只与指针相关，不会对你的对象进行切片。

```
vector<Student*> uniStudent;
...
uniStudent.push_back(s);
uniStudent[0]->study(); 
```

请注意，您可能希望使用[智能指针](http://ootips.org/yonat/4dev/smart-pointers.html)以更健壮的方式管理所有内容。

# objective-c - NSDate 和 NSDateFormatter 不一致

> ID：13499670
> 
> 赞同：0
> 
> 时间：2012-11-21T18:24:23.983
> 
> 标签：objective-c, ios

> **可能重复：**
> [NSDateFormatter 没有给我正确的信息](https://stackoverflow.com/questions/11086916/nsdateformatter-not-giving-me-correct)

我正在使用 NSDate ，我使用以下技术仅将其转换为日期：

```
+ (NSDate *) dateOnly:(NSDate *)date
{
    long time = [date timeIntervalSinceReferenceDate];
    long timeMod = time % kNumSecondsInDay;
    NSTimeInterval newTime = time - timeMod;

    return [[NSDate alloc] initWithTimeIntervalSinceReferenceDate:newTime];
} 
```

这给了我预期的结果：

```
 NSLog(@"Due Date:%@", _dueDate); 
```

--> 截止日期：2012-11-21 00:00:00 +0000

但是，当我使用日期格式化程序时，它会给我前一天：

```
 NSDateFormatter *formatter = [[NSDateFormatter alloc] init];
    [formatter setDateStyle:NSDateFormatterShortStyle];
    NSString *result = [formatter stringFromDate:_dueDate];
    NSLog(@"Result: %@", result); 
```

--> 结果：2012 年 11 月 20 日

是什么赋予了？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-21T18:26:26.397

时区。日期为 UTC 时间 11 月 21 日午夜；如果您的时区落后于 UTC，那么它将是 11/20。

# asp.net-mvc - ReturnUrl QueryString 在 MVC 4 中始终为空

> ID：13499677
> 
> 赞同：3
> 
> 时间：2012-11-21T18:24:46.223
> 
> 标签：asp.net-mvc

我有一个使用 get 方法登录的操作方法：

```
public virtual ActionResult LogIn()
{
    return View();
} 
```

以及 Post 方法的操作方法，该方法使用 Ajax.BeginForm() 在 Ajax 调用中发布，例如：

```
[HttpPost]
[AjaxOnly]
[ValidateAntiForgeryToken]
public virtual ActionResult LogIn(LogInViewModel loginInfo, string returnUrl)
{
   ...
} 
```

但是 returnUrl 总是为空！！！

我使用 MVC 4。

这个问题的原因是什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-21T18:47:23.533

您必须将 returnUrl 发送回服务器。例如，您的登录表单应将 returnUrl 作为参数：

```
@using (Html.BeginForm(new { ReturnUrl = ViewBag.ReturnUrl })) {
    ....
    <input type="submit" value="Log in" />
} 
```

它以前在您的登录操作中保存在服务器端，作为使用 AuthorizeAttribute 的结果调用，ReturnUrl 在查询字符串中传递：

```
public ActionResult Login(string returnUrl)
{
    ViewBag.ReturnUrl = returnUrl;
    return View();
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-03-18T10:29:03.597

不确定您的视图是什么样的，但如果您有类似的东西：

```
@using (Html.BeginForm())
{
} 
```

...那么`returnUrl`应该有一个填充值，如果它来自另一个 url。

在我的场景中，它始终为空，我假设它可能与您的操作方式相同。我有这样的：

```
@using (Html.BeginForm("LogOn", "Account", FormMethod.Post, new { role = "form" }))
{
} 
```

我所做的只是将其更改为如下所示：

```
@using (Html.BeginForm("LogOn", "Account", new { returnUrl = Request.QueryString["ReturnUrl"] }, FormMethod.Post, new { role = "form" }))
{
} 
```

`returnUrl`现在有一个我可以使用的值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-03T18:05:40.063

在继续完成@Jaroslaw Waliszko的好答案，这个问题的原因是：

因为我们使用 ajax 请求提交表单，所以不显眼的 ajax 使用

```
$("form").serialize(); 
```

对于这种形式，在这种情况下（使用 ajax）ReturnUrl（和任何其他参数）不发送到服务器，仅将表单输入元素发送到服务器，因此 MVC Auto ModelBinding 不绑定 ReturnUrl，我们必须在这种状态下使用 @Jaroslaw Waliszko 解决方案。

[连载](http://api.jquery.com/serialize/)

> 将一组表单元素编码为字符串以进行提交。

# haxe - Haxe 中具有多种类型的数组

> ID：13499682
> 
> 赞同：3
> 
> 时间：2012-11-21T18:25:22.010
> 
> 标签：haxe

在 Javascript 中，可以在一行代码中创建一个包含嵌套数组的数组。是否有可能在 Haxe 中做同样的事情？

```
var a = [
    ["This is a nested array"],
    ["This is another nested array"],
    "This is not a nested array"
]; 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-21T20:07:43.880

是的，在这种情况下，它的语法完全相同，`a`应输入为`Array<Dynamic>`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T08:38:25.057

处理混合类型数组的另一种方法是使用枚举。这将更改运行时值，但为编译器提供了一种方法来定义和处理数组可能包含的类型。

[https://haxe.org/manual/types-enum-using.html](https://haxe.org/manual/types-enum-using.html)

如果您无法控制数组的填充方式，这种方法将不起作用。

# testing - AngularJS 单元测试不依赖于请求数据的模拟

> ID：13499683
> 
> 赞同：4
> 
> 时间：2012-11-21T18:25:24.367
> 
> 标签：testing, angularjs

我终于完成了我的 AngularJS 测试环境设置，我正在尝试测试我的应用程序上的页面是否正常工作。这包括**模板**、**路由**、**请求**、**指令**等。

根据我的发现，在测试一个工作应用程序时，事实证明大部分工作都需要模拟。虽然这很好，但我仍然想从我的应用程序中测试出实际的模板和数据。

每当在我的应用程序中进行 GET 调用时，我都会收到如下错误：

```
Unexpected request: GET application/templates/home.html
No more request expected
Error: Unexpected request: GET application/templates/home.html 
```

原来它无法正确下载请求。这很好。从我认为的情况来看，测试运行器（testacular）无法下载模板文件，因为它一起位于不同的环境中（没有提供 HTTP 地址）。我遇到的关于如何解决这个问题的唯一解决方案是使用 $httpBackend 服务通过模拟来存根请求。虽然这对某些情况很有用，但我想获取实际数据。

关于如何解决这个问题的任何想法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-23T17:44:24.253

您可能想要编写两种不同类型的测试：

1.  使用 mock 进行单元测试以单独测试组件，例如控制器、指令等
2.  运行完整堆栈的 e2e 测试，包括来自您自己服务器的数据。

这两种测试都需要单独的睾丸配置。

Angular 提供对导航测试浏览器和与您的应用程序交互的支持，就像用户一样。解释和 API 记录在这里：[http ://docs.angularjs.org/guide/dev_guide.e2e-testing](http://docs.angularjs.org/guide/dev_guide.e2e-testing)

我的 testacular e2e 配置和解释发布在这里： [https ://stackoverflow.com/a/13410567/1739247](https://stackoverflow.com/a/13410567/1739247)

如那篇文章所述，针对您自己的服务器运行测试的重要部分是`proxies`。

# c++ - Qchar* 到 char* 的转换

> ID：13499687
> 
> 赞同：0
> 
> 时间：2012-11-21T18:25:40.960
> 
> 标签：c++, qt, serial-port, qchar

我正在构建一个 Qt Gui 应用程序来监视来自串行端口的数据。我正在使用`qextserialport`库。这是我遇到的问题。

```
void MainWindow::onDataAvailable()
{
    QString data_ser,data_trimmed;
    port->readLine(data_ser.data(),0);
    data_trimmed = data_ser.trimmed();
    ui->textEdit->append(data_trimmed);
} 
```

`readLine`方法的第一个参数应该是类型。`char*`如何将`QChar*`返回的`data_ser.data()`转换为`char*`。我可以使用`std::string`而不是，`QString`但是 qt gui 对象与 QString 更好地兼容，我也需要该`trimmed`方法。

这是我得到的错误：

没有匹配的成员函数调用“readLine”。第一个参数没有从 'QChar *' 到 'char *' 的已知转换。

这个怎么解决？？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-21T18:34:15.340

你不能，或者至少你不想（当然在 C++ 中你可以将 QChar* 转换为 char* 但这不会使它工作）。只需将数据读入 QByteArray，然后将其转换为 QString。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-21T18:33:39.203

这有点棘手，因为您需要为 readline() 分配空间来复制。

您可以创建一个具有[初始大小](http://doc.qt.digia.com/main-snapshot/qstring.html#QString-5)的 QString，但我个人会分配一个具有固定合理缓冲区大小的 char*，然后从中创建 QString - 它在您调试时会更清晰。

# css - 获取 DIV 以填充剩余宽度

> ID：13499688
> 
> 赞同：3
> 
> 时间：2012-11-21T18:25:44.450
> 
> 标签：css, layout

我正在尝试使用 CSS 来获得一个 DIV 来填充剩余的页面宽度，在左侧固定宽度的 div 之后（在固定高度的标题下方）

我拥有的CSS是：

```
body{margin:0;padding:0}
#header{height: 100px; background:#ccccff;}
#left {position:absolute; left:0; top:100px; width:200px; background:#ccffcc;}
#main {position:relative; left:200px; background:#ffcccc;} 
```

HTML 是：

```
<div id="header">Header stuff here</div>    
<div id="left">Left stuff here</div>    
<div id="main">Main stuff here</div> 
```

（为了简洁，这里省略了head和doctype）当它被渲染时，主div仍然是整个页面宽度，这意味着右边距浏览器右边200px。如何让主 div 填充剩余的宽度？

（最终我想将其他 div 放在 main 中，并使其宽度以相对于主 div 的百分比表示）

这甚至可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T18:30:37.787

不要使用位置。使用浮点数。将“left” div 向左浮动，设置其宽度。给“主” div 左边 div 的宽度的左边距，并将宽度设置为 auto。

```
#left { float: left; width: 200px;}
#main {margin-left: 201px; width: auto;} 
```

这里的例子：http: [//jsfiddle.net/GhtHp/1/](http://jsfiddle.net/GhtHp/1/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-21T18:45:49.520

不要使用被认为是邪恶的定位，而是使用浮动。

```
#left {float:left; width:200px; background:#ccffcc;}    
#main {margin-left:200px; background:#ffcccc;} 
```

[**演示**](http://jsfiddle.net/WAgz7/3/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-21T18:31:11.157

这是否实现了您正在寻找的东西？

HTML -

```
<div id="header">Header stuff here</div>    
<div id="left">Left stuff here</div>    
<div id="main">Main stuff here</div>​ 
```

CSS -

```
div {
    border: 1px solid black;
}

#left {
    float: left;
}
​ 
```

Jsfiddle - [http://jsfiddle.net/xzWK5/](http://jsfiddle.net/xzWK5/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-21T18:36:38.980

是的，使用 CSS calc 很容易实现。不幸的是，到目前为止，只有 Chrome 支持 CSS calc。

这是一个更好的方法：
HTML：

```
<div id="header"></div>
<div id="left"></div>
<div id="main"></div> 
```

CSS：

```
#header{height: 100px; width: 100%; background:#ccccff}
#main{position: absolute; left: 200px; right: 0; background:#ffcccc}
#left{width: 200px; left: 0} 
```

左边`#main`正好 200px 右边 0px 给你全宽减去`#left`

# ruby - Rally Subversion 连接器在查找工件方面并不可靠

> ID：13499696
> 
> 赞同：1
> 
> 时间：2012-11-21T18:26:11.563
> 
> 标签：ruby, rally

我们的一些工程师发现 Rally-Subversion 连接器不能很好地在提交消息中查找工件，例如，如果它们后跟冒号（例如 DE2222:)

我查看了连接器 3.7 的代码，发现他们首先将消息拆分为单词，但拆分是这样完成的：

```
words = message.gsub(/(\.|,|;)/, ' ').split(' ') 
```

有什么理由不会这样做：

```
 words = message.split(/\W+/) 
```

这似乎会更加强大，我很难想到缺点。

有什么理由我们不应该做出这种改变？

如果没有，是否也可以在连接器的下一个版本中进行此更新？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T20:43:36.323

由于 SCM 连接器源代码是开放的，如果您发现它更有效，那么您确实没有理由不更改提交消息工件“检测”正则表达式。

作为提醒，Rally 的新一代 SCM 连接器（我们称它们为版本控制系统连接器的“VCS”连接器）将不再使用提交后挂钩，而是按预定的时间间隔运行并收集提交来自 SVN 日志的事件。然后，这些收集的事件将作为变更集发布到 Rally。

新的 VCS 连接器不会解析提交消息的日志以转换为工件状态更改 - 因此，最终实现这种类型的功能最终需要客户对连接器代码进行扩展，从长远来看。

# c#-4.0 - 在纹理四边形中播放视频

> ID：13499699
> 
> 赞同：0
> 
> 时间：2012-11-21T18:26:16.977
> 
> 标签：c#-4.0, 3d, xna-4.0

实际上我想播放一个四边形纹理的视频，但是如果我用矩形绘制，显示的视频的颜色会有所贬值。下面是从 mdsn 中获取的示例加上一点修改，有人可以帮我检查一下吗？

提前致谢。

* * *

```
public Game1()
        {
            graphics = new GraphicsDeviceManager(this);

            graphics.PreferredBackBufferWidth = 1920;
            graphics.PreferredBackBufferHeight = 1080;
            graphics.PreferMultiSampling = false;
            graphics.IsFullScreen = false;

            // Set the back buffer format to color
            graphics.PreferredBackBufferFormat = SurfaceFormat.Color;

            Content.RootDirectory = "Content";
        }

        protected override void Initialize()
        {
            // TODO: Add your initialization logic here

            PresentationParameters pp = GraphicsDevice.PresentationParameters;
            pp.MultiSampleCount = 20;

            quad = new Quad(Vector3.Zero, Vector3.Backward, Vector3.Up, 1,1);
            camera = new Camera(this, new Vector3(0, 0, 1.15f), Vector3.Zero, Vector3.Up);
            Components.Add(camera);

            base.Initialize();
        }

        protected override void LoadContent()
        {
            // Create a new SpriteBatch, which can be used to draw textures.
            spriteBatch = new SpriteBatch(GraphicsDevice);

            // TODO: use this.Content to load your game content here

            video = Content.Load<Video>("1");
            player = new VideoPlayer();
            player.IsLooped = true;

            // Setup our BasicEffect for drawing the quad
            World = Matrix.Identity;

            quadEffect = new BasicEffect(graphics.GraphicsDevice);

            quadEffect.EnableDefaultLighting();

            quadEffect.View = camera.view;
            quadEffect.Projection = camera.projection;
            quadEffect.TextureEnabled = true;

            // Create a vertex declaration so we can call
            // DrawUserIndexedPrimitives later
            quadVertexDecl = new VertexDeclaration(VertexPositionTexture.VertexDeclaration.GetVertexElements());   

        }

        protected override void Update(GameTime gameTime)
        {
            // Allows the game to exit
            if (GamePad.GetState(PlayerIndex.One).Buttons.Back == ButtonState.Pressed)
                this.Exit();

            // TODO: Add your update logic here

            // Play the video if it isn't already.
            if (player.State != MediaState.Playing)
                player.Play(video);

            KeyboardState state = Keyboard.GetState();
            .....

            base.Update(gameTime);
        }

        protected override void Draw(GameTime gameTime)
        {
            GraphicsDevice.Clear(Color.Black);

            // TODO: Add your drawing code here
            RasterizerState rs = new RasterizerState();
            rs.CullMode = CullMode.None;
            GraphicsDevice.RasterizerState = rs;

            quadEffect.World = World;

            if (player.State == MediaState.Playing)
                quadEffect.Texture = player.GetTexture();

            foreach (EffectPass pass in quadEffect.CurrentTechnique.Passes)
            {
                pass.Apply();

                GraphicsDevice.SamplerStates[0] = SamplerState.LinearClamp;

                GraphicsDevice.DrawUserIndexedPrimitives(
                        PrimitiveType.TriangleList,
                        quad.Vertices, 0, 4,
                        quad.Indices, 0, 2);
            }
            base.Draw(gameTime);
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T00:24:14.210

您正在使用 quadEffect.EnableDefaultLighting(); 这将添加一个光源。您可以通过设置 quadEffect.LightingEnabled = false 来禁用它；

# python - Django：为继承类提供 PositiveIntegerField 的自定义选择

> ID：13499702
> 
> 赞同：1
> 
> 时间：2012-11-21T18:26:32.640
> 
> 标签：python, django, django-models, django-admin

我有一个继承自 Action 的类 InheritAction。现在我想做的是为 PositiveIntegerField 提供不同的选择。我知道我们不能覆盖 django 中的类属性。但是有没有办法做到这一点。提前致谢

```
 ACTION_TYPE = (
            (1, 'Approve'),
            (2, 'Reject'),
            (3, 'More Information Required'),
            (4, 'Status Update')
            )
    class Action(models.Model):
        type = models.PositiveIntegerField(choices=ACTION_TYPE)

    INHERIT_ACTION_TYPE = (
            (1, 'Approve'),
            (2, 'Reject'),
            (3, 'More Information Required'),
            (4, 'Status Update')
            )
    class InheritAction(Action):
        pass 
```

我试过这样做......

```
InheritAction._meta.get_field('type).choices = INHERIT_ACTION_TYPE 
```

但是报错...

```
AttributeError: can't set attribute 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T20:25:14.010

您可以覆盖表单中的选项。

```
class InheritActionForm(forms.ModelForm):
    type = forms.ChoiceField(choices = INHERIT_ACTION_TYPE)

    class Meta:
        model = InheritAction 
```

如果需要，您可以[在管理员中使用该表单](https://docs.djangoproject.com/en/dev/ref/contrib/admin/#django.contrib.admin.ModelAdmin.form)

据我所知，选择选项不会向数据库添加任何约束，它仅适用于自动生成的表单。

# c# - 如何返回一个空字符串？

> ID：13499705
> 
> 赞同：2
> 
> 时间：2012-11-21T18:26:47.547
> 
> 标签：c#, asp.net

我有以下 getter 和 setter 方法：

```
 private Ansprechpartner partner;
    public virtual Ansprechpartner Partner
    {

        get
        {
            if (partner == null)
            {
               // something like partner = " ";
            }
            return partner;  
        }
        set
        {
            partner = value;
        }
    } 
```

在 if 子句中，我想设置合作伙伴 =“”。但这当然行不通，因为合作伙伴是一个典型的类 Ansprechpartner。

有没有办法做一些等效的事情，所以如果合作伙伴返回一个空字符串`(partner == null)`？

请帮忙

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-21T18:30:22.467

是`Ansprechpartner`你自己的课吗？

如果是这样，那么您可以返回自己对“空”的辩护`Ansprechpartner`

```
return Ansprechpartner.Empty; 
```

然后定义空属性

```
public class Ansprechpartner
{

    public static Ansprechpartner Empty
    {
         get
         {

          //generate an empty Ansprechpartner and return it here

         }
    } 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-21T18:39:44.470

您可以覆盖 Ansprechpartner 中的 ToString 方法并使用如下标志属性：

```
public override ToString()
{
   if (FlagAtrribute == null) //Or if it is a string, you could String.IsNullOrEmpty(FlagAtrribute)
   {
      return "";
   }
   return FlagAtrribute.ToString();
} 
```

在你的吸气剂中，只需返回 Ansprechpartner 类的一个新的空实例

```
get
{
   if (partner == null)
   {
       partner = new Ansprechpartner();
   }
   return partner;
} 
```

在您的代码中，执行以下操作：

```
MyClass.Partner.ToString(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-21T18:29:29.900

您可以执行以下操作：

```
get
{
  if (partner == null)
    return new Ansprechpartner() {whatever = ""};
  else
    return partner;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-21T18:30:03.403

如果您将返回类型从 更改`Ansprechpartner`为`object`，则可以返回任何您希望从`object`. 但我强烈反对采用这种方法。如果你想重新考虑你的整个方法。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-21T18:31:44.383

您的属性实际上似乎并未使用字符串，在这种情况下返回字符串将是一个错误。

但是，直接回答您有关如何返回字符串的问题，请尝试以下操作：

```
get
{
    if (partner == null)
        return String.Empty;
    else
        return partner;  
    }
} 
```

或者，更好的是：

```
get
{
    return partner ?? String.Empty;
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-24T07:42:43.377

在我看来，有一种直接的方法可以准确地了解您的要求，即确保它在语法上是正确的以下内容：

```
get
{
    if (partner == null)
    {
       return = "";
    }
    return partner;  
} 
```

方法是为类提供*隐式转换运算符*。由于隐式转换运算符，String.Empty 或 "" 可以自动转换为 Ansprechpartner 类型，那么您用于 getter 的 sysntax 是完全合法的。

但是什么是 *隐式转换运算符*？您甚至可以看到问题：[如何为我的班级提供自定义演员支持？](https://stackoverflow.com/questions/1407689/how-do-i-provide-custom-cast-support-for-my-class)了解更多详情。

但是，我更喜欢直接测试您的课程的代码：用于成功测试它的代码如下：

```
 private  Ansprechpartner partner;
    public virtual Ansprechpartner Partner
    {
        get
        {    
            // legal assignment thanks to **public static implicit operator Ansprechpartner(string s)**
            return partner ?? String.Empty;            
        }
        set
        {
            partner = value;
        }
    } 
```

我们也尝试做相反的事情：由于 **公共静态隐式运算符 string(Ansprechpartner a)**我们看到可以将 Empty 字符串分配给 Ansprechpartner 实例变量

```
 public void test_method()
    {
        Ansprechpartner s = String.Empty;         
    } 
```

在 Ansprechpartner 类中，我们定义了强制转换运算符

```
class Ansprechpartner
{
    public static implicit operator Ansprechpartner(string s) {
        // put your conversion logic here 
        //    .. i.e: you can simply pass string s to a Ansprechpartner constructor
        Ansprechpartner a = new Ansprechpartner();
        return a;
    }

    public static implicit operator string(Ansprechpartner a)
    {
        if (a == null)
            return ""; 
        else 
            return a.ToString(); 
    }

    public Ansprechpartner()
    {
    }

    public override string ToString()
    {
        return Value;
    }
} 
```

就是这样，如果有什么没有解释的，请发表评论。

# c++ - 在另一个文件中定义一个类方法

> ID：13499708
> 
> 赞同：1
> 
> 时间：2012-11-21T18:27:05.490
> 
> 标签：c++, winapi

我知道如何在类所在的同一文件中定义类方法。

例如：

```
class Robot
{public:
 int location;

 void Moves(); //Class method to be defined
}

void Robot::Moves()
{//Method definition here } 
```

我不知道如何在类所在的文件之外定义一个类。我尝试创建一个 .hpp 文件并在其中定义一个类方法，但我的编译器表明它无法从除了创建类的文件之外的文件，否则就好像我将函数的定义放在包含指令之前。

**请注意：**原始类文件也在 .hpp 文件中，因为我还没有学习如何使用除主文件之外的 .cpp 文件。

*这是使用 C++/Win32 完成的*。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T18:31:36.573

按照这些准则创建一个 .cpp 文件

*   在 .cpp 文件中包含您的类头文件
*   包括您将在 main.cpp 中使用的所有必要标头
*   为您的班级使用范围运算符

* * *

```
#include <iostream>
#include "foo.hpp"

foo::foo()
{
//    code here
}

void foo::OtherFunc()
{
//    other stuff here
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-21T18:33:28.163

只需将您的定义放在 .cpp 文件中并将其与您的应用程序链接即可。

机器人.hpp：

```
class Robot
{public:
 int location;

 void Moves(); //Class method to be defined
} 
```

机器人.cpp：

```
#include "Robot.hpp"

void Robot::Moves()
{//Method definition here } 
```

# javascript - 如何重新排列 KendoGrid 选项卡顺序？

> ID：13499709
> 
> 赞同：13
> 
> 时间：2012-11-21T18:27:06.677
> 
> 标签：javascript, asp.net-mvc-3, telerik, grid, kendo-ui

我正在使用 KendoGrid 并进行内联批量编辑。只有少数几列是可编辑的。当点击选项卡时，下一个列被选中，但它不是下一个可编辑的列。有没有办法控制 KendoGrid 中的选项卡顺序？如何使选项卡跳过不可编辑的列？

我的标记：

```
<div id="employeeGoalsGrid"></div> 
```

我的Javascript：

```
var goalsDataSource = new kendo.data.DataSource({
        transport: {
            read: {
                url: '/MVC/ResearcherPoints/GetEmployeeResearchers',
                type: 'POST',
                contentType: 'application/json'
            },
            update: {
                url: '/MVC/ResearcherPoints/UpdateEmployeeGoal',
                type: 'POST',
                contentType: 'application/json'
                //dataType: "jsonp"
            },
            parameterMap: function (options, type) {
                debugger;
                $.extend(options, { ID: options.id });
                return JSON.stringify(options);
            }
        },
        batch: false,
        schema: {
            model: {
                id: 'ID',
                fields: {
                    id: { editable: false, nullable: false },
                    FirstName: { editable: false, nullable: true  },
                    LastName: { editable: false, nullable: true },
                    Title: { editable: false, nullable: true },
                    TeamName: { editable: false, nullable: true },
                    PointsGoal: { type: "number", nullable: true, validation: { required: false, min: 1 } }
                }
            }
        },
        sortable: true,
        filterable: true,
        columnMenu: true
    });

    $('#employeeGoalsGrid').kendoGrid({
        dataSource: goalsDataSource,
        navigatable: true,
        sortable: true,
        resizable: true,
        toolbar: ["save", "cancel"],
        columns: [
            { field: "FirstName", title: "First Name", width: 200},
            { field: "LastName", title: "Last Name", width: 200 },
            { field: "Title", title: "Title", width: 200 },
            { field: "TeamName", title: "Team", width: 200 },
            { field: "PointsGoal", title: "Goal", width: 200 }],
        editable: true,
        filterable: true,
    }); 
```

任何建议将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-08-28T20:19:42.747

To skip cell you need to use [`tabindex="99999"`](http://jehiah.cz/a/tabindex)

I created a jsfiddle for testing purposes: [http://jsfiddle.net/danieltulp/kfG7y/](http://jsfiddle.net/danieltulp/kfG7y/)

I think you need to look at using attributes: { tabindex: "999999" } in

```
{ field: "UnitsInStock", title: "Units In Stock", width: 110,  attributes: { tabindex: "999999" } } 
```

but this doesn't seem to work. Anyone a better idea?

Perhaps this just isn't possible?

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T16:48:33.367

您可以尝试将`editable`网格选项上的属性从`true`to更改为`"inline"`并告诉我是否可以解决问题吗？我在[这个 JSBin](http://jsbin.com/iyozez/1/)中创建了一个类似的场景，当我编辑一行时，tab 顺序工作正常（OSX 上的 Chrome）。

# google-provisioning-api - Google Provisioning API 不再允许恢复（取消挂起）用户

> ID：13499710
> 
> 赞同：0
> 
> 时间：2012-11-21T18:27:10.123
> 
> 标签：google-provisioning-api

还有人看到这个吗？Google 多域配置 API 似乎发生了一些变化。我有长时间运行的代码可以恢复已停止工作的暂停用户。我使用 Python 和 Python GData 库的 2.0.17 和 UpdateUser 方法来执行此操作。我还注意到同一个库中的 RetrieveUser 不再返回暂停用户的名字和姓氏。我已在 Google Apps-api-issues 提交了一个问题，如果您看到此问题，请加注星标。

[http://code.google.com/a/google.com/p/apps-api-issues/issues/detail?id=3281](http://code.google.com/a/google.com/p/apps-api-issues/issues/detail?id=3281)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T16:59:54.317

这是一个简单的例子，可以解决这个问题。请注意，从暂停用户的 RetrieveUser() 返回的 user_entry 对象将没有名字或姓氏的属性值。修改后的 user_entry 对象被传递给 UpdateUser()，它不允许名字和姓氏的缺失值。

```
#!/usr/bin/python
import sys
import gdata.apps.multidomain.client

if len(sys.argv) < 4:
  print "\nUsage:"
  print sys.argv[0], "admin_email admin_password user_email\n"
  sys.exit(0)

admin = sys.argv[1]
password = sys.argv[2]
email = sys.argv[3]
domain = ""
if '@' in admin:
  admin_name,domain = admin.split('@', 1)
else:
  print "Specify full email address of administrator.\n"
  print "\nUsage:"
  print sys.argv[0], "admin_email admin_password user_email\n"
  sys.exit(0)
if '@' not in email:
  print "Specify full email address of user.\n"
  print "\nUsage:"
  print sys.argv[0], "admin_email admin_password user_email\n"
  sys.exit(0)

md_client = gdata.apps.multidomain.client.MultiDomainProvisioningClient(
  domain=domain)
md_client.ClientLogin(email=admin, password=password, source='MDPROVISIONING')
print "Retrieve user: %s\n" %(email)
user_entry = md_client.RetrieveUser(email)
print user_entry
print ('\nRetrieve results: email: %s, suspended: %s,'
  ' first name: %s, last name: %s\n' 
  %(user_entry.email,user_entry.suspended,
    user_entry.first_name,user_entry.last_name))
print "Update user (suspend): %s\n" %(email)
user_entry.suspended = 'true'
updated_user_entry = md_client.UpdateUser(email, user_entry)
print updated_user_entry
print ('\nSuspend results: email: %s, suspended: %s,'
  ' first name: %s, last name: %s\n' 
  %(updated_user_entry.email,updated_user_entry.suspended,
    updated_user_entry.first_name,updated_user_entry.last_name))
print "Retrieve user: %s\n" %(email)
user_entry = md_client.RetrieveUser(email)
print user_entry
print ('\nRetrieve results: email: %s, suspended: %s,'
  ' first name: %s, last name: %s\n' 
  %(user_entry.email,user_entry.suspended,
    user_entry.first_name,user_entry.last_name))
print "Update user (restore): %s\n" %(email)
user_entry.suspended = 'false'
updated_user_entry = md_client.UpdateUser(email, user_entry)
print updated_user_entry
print ('\nRestore results: email: %s, suspended: %s,'
  ' first name: %s, last name: %s\n' 
  %(updated_user_entry.email,updated_user_entry.suspended,
    updated_user_entry.first_name,updated_user_entry.last_name)) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-25T19:24:37.930

感谢 user1803418，这解释了为什么恢复用户使用 GAM 而不是您的代码。RetrieveUser API 调用中缺少 firstName 和 lastName 绝对是 Google 需要解决的问题。但是，我将 unsuspend 问题描述为客户端库缺陷，该缺陷因 firstName/lastName 问题而加剧。

API 只要求在更新用户 API 调用中提交正在更新的属性。无需指定用户的名字、姓氏和其他对象详细信息。这意味着检索用户以执行更新只会使更新过程花费更长的时间，实际上只需要一个 API 调用。

GAM 使用它自己的多域 API 调用实现，这是我在 multidomain/client.py 发布之前编写的。GAM 的实现不需要设置所有用户属性来执行更新。您可以通过查看以下内容来查看： [http ://code.google.com/p/google-apps-manager/source/browse/trunk/gdata/apps/multidomain/service.py#69](http://code.google.com/p/google-apps-manager/source/browse/trunk/gdata/apps/multidomain/service.py#69)

只有调用 UpdateUser() 时设置的属性才会发送给 Google。您可以通过安装 GAM 并在使用 GAM 命令取消挂起用户之前创建一个名为 debug.gam 的文件来亲自看到这一点：

游戏更新用户暂停

对 Google 的 XML 请求将是最小的，只显示几个字段，包括用户的暂停状态。firstName 和 lastName 不会包含在请求中。

所以我认为你在这里有3个选择：

1) 等待 Google 解决 firstName/lastName 问题。这也应该解决 unsuspend 问题。

2) 重写 multidomain/client.py UpdateUser() 函数，使其不需要设置所有用户属性即可执行更新。

3) 切换您的代码以使用 GAM 的自定义 multidomain/service.py 库，因为它支持仅更新为用户提供的属性。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-26T18:44:56.423

我希望 Google 能尽快修复缺失的名称。在多域客户​​端 (gdata.apps.multidomain.client) 中修改 UpdateUser 似乎可以让事情继续进行：

```
def update_user(self, email, user_entry, **kwargs):

    user_entry = gdata.apps.multidomain.data.UserEntry(
        email=email,first_name=user_entry.first_name,
        last_name=user_entry.last_name,password=user_entry.password,
        change_password=user_entry.change_password_at_next_login,
        suspended=user_entry.suspended, is_admin=user_entry.is_admin,
        ip_whitelisted=user_entry.ip_whitelisted, quota=user_entry.quota)

    return self.update(user_entry,
                   uri=self.MakeMultidomainUserProvisioningUri(email),
                   **kwargs) 
```

# sql - 用户定义的伪列预言机

> ID：13499711
> 
> 赞同：1
> 
> 时间：2012-11-21T18:27:10.500
> 
> 标签：sql, oracle

我在 oracle 数据库中有一个大型数据集，当前一次从 Java 访问一个项目。例如，如果用户尝试批量获取 50 个项目，它将按顺序处理它们，为每个项目调用一个存储过程。我现在正在尝试实现批量获取，但由于用户可以传入范围查询的方式而遇到了一些困难：

一个示例表：

```
prim_key  |  identifier  |  start  |  end
----------+--------------+---------+-------
1         |  aaa         |  1      |  3
2         |  aaa         |  3      |  7
3         |  bbb         |  1      |  5 
```

它的工作方式是，如果您有类似的查询`(id='aaa' and pos=1)`，它将找到`prim_key = 1`，但如果您查询`(id='aaa' and pos=2)`，它将找不到任何东西。如果你这样做`(id='aaa' and pos=-2)`了，它会再次找到 prim_key=1 因为存储的过程将 -2 转换为等效于`start<=2`and的范围扫描`end>2`。

（额外的上下文：开始/结束实际上是日期，这种查询机制允许有效的“最新日期”查询，而不是执行类似 select prim_key 之类的操作，

```
start from myTable 
where start = (select max(start) from myTable where start <= 2)) 
```

这一切都很好，并且对于单次获取可以正常工作，但是现在我正在尝试批量获取，以便我们可以大大加快批处理速度。第一次尝试是对单个调用进行多线程处理，但它给数据库带来了太大的压力，无法在同一张表上执行如此多的并行查询。为了解决这个问题，我一直在尝试创建一个类似的查询

```
select prim_key 
from myTable 
where (identifier='aaa' and start=3) 
or (identifier='aaa' and start<=2 and end>2) 
```

从输入参数列表中构建它`('aaa',3 ; 'bbb',-2)`，它运行良好并使用我期望的所有索引生成解释计划。

**我的问题：**我需要知道检索该行的输入参数是什么，以便进行进一步处理并返回相关的 prim_key。我需要使用可以定义自己的伪列之类的东西：

```
select prim_key, PSUEDO 
from myTable 
where (identifier='aaa' and start=3 and PSUEDO='a3') 
or (identifier='aaa' and start<=2 and end>2 and PSUEDO='a-2') 
```

但是我找不到从 where 子句返回值的任何方法，而且我认为子查询会失去通过一次选择完成所有操作所获得的索引效率。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T18:31:30.733

尝试类似：

```
select
 prim_key,
 case when start = 3 then 'a3' else 'a-2' end pseudo
from
 you_table
where
 ... 
```

# android - 我可以使用 android 应用程序来跟踪用户活动吗？

> ID：13499721
> 
> 赞同：7
> 
> 时间：2012-11-21T18:27:35.643
> 
> 标签：android

我想知道是否可以编写一个在后台运行时可以跟踪用户活动的android应用程序？（例如用户使用了哪些其他应用程序，用户拨打了什么电话号码，用户的GPS位置，等）因为我不确定单个 android 应用程序能否对其他应用程序做出反应，有人知道答案吗？谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-21T18:33:26.080

在一般情况下，不，你不能。用户可能会更喜欢它。

说了这么多，就有了一些局部的解决方案。有时系统非常有用，它会发布反映用户操作的[Intent](http://developer.android.com/reference/android/content/Intent.html)：例如，当用户[卸载应用程序](https://stackoverflow.com/questions/6775514/get-intent-of-uninstall-app-in-android)时- 需要注意的是，您不会在应用程序本身被卸载时获得该意图。

[在 Jelly Bean (4.1) 之前](http://commonsware.com/blog/2012/07/12/read-logs-regression.html)，应用程序可以读取其他应用程序发布的日志并尝试从中提取信息，但这是一项繁琐、容易出错、忘恩负义的任务。例如，浏览器在导航到某个页面时什么也不显示。您可能会阅读日志一段时间，`adb logcat`以了解什么是可能的，什么是不可能的。此操作需要[相关权限](http://developer.android.com/reference/android/Manifest.permission.html#READ_LOGS)，现在普通应用程序无法拥有该权限。

感谢@WebnetMobile 提供有关日志的提示，感谢@CommonsWare 提供链接，请参阅下面的评论。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-21T18:34:14.723

幸运的是，在该级别监视用户是不可能的。某些功能可以通过滥用 android 中的错误来实现，这些错误迟早会被修复。我认为您绝对没有理由知道我正在拨打的电话号码以及我最近在哪里。基本上不关你的事。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-21T18:39:20.777

是的你可以。

例如，您可以在此处查看电话信息： [跟踪电话通话时长](https://stackoverflow.com/questions/10032542/track-a-phone-call-duration)

或者

[http://www.anddev.org/video-tut__-_querying_and_displaying_the_calllog-t169.html](http://www.anddev.org/video-tut_-_querying_and_displaying_the_calllog-t169.html)

有一种方法可以让 Android 和用户知道您正在使用和访问他们的数据，以确定他们是否允许这样做。

我不确定您是否可以简单地访问任何应用程序，但理论上如果您知道如何读取可能可能的保存文件。

例如`Runtime.getRuntime().exec("ls -l /proc");`，将为您提供“proc”根文件夹，其中包含您可能需要的大量数据。这可能已经改变了，我不确定，我也不知道你需要什么。

也许要运行进程尝试：

```
public static boolean getApplications(final Context context) {
   ActivityManager am = (ActivityManager) context.getSystemService(Context.ACTIVITY_SERVICE);
   List<RunningTaskInfo> tasks = am.getRunningTasks(1);
} 
```

为此，您应该将其包含在您的 AndroidManifest.xml 中

```
<uses-permission android:name="android.permission.GET_TASKS" /> 
```

查看更多信息：http: [//developer.android.com/reference/android/app/ActivityManager.html#getRunningAppProcesses%28%29](http://developer.android.com/reference/android/app/ActivityManager.html#getRunningAppProcesses%28%29)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-21T18:31:06.233

您当然可以，但我认为在用户不知情的情况下，通过互联网向您报告这些数据将被视为间谍软件，并且在大多数司法管辖区几乎肯定是非法的。

# java - 将对象作为参数传递

> ID：13499731
> 
> 赞同：1
> 
> 时间：2012-11-21T18:28:00.393
> 
> 标签：java, function, object

我有一个 java 代码，我试图通过将类的对象传递给函数来打印语句。以下是代码：

```
import java.io.*;

class Abc
{

    public static void print(Object o)
    {
       o.name();
    }

    public static void main(String args[])
    {
       Vendor obj=new Vendor();
       print(obj);
    }
}

class Vendor
{
    public void name()
    {
       System.out.println("The name of the customer is chandeep");
    }

} 
```

我得到的错误是，在 Abc 类中找不到符号名称（）。我知道这是一个适当的错误，但我该如何解决它！？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-21T18:29:06.670

它不起作用，因为`Object`class 没有这样的方法`name()`，并且您试图在 type 的引用上调用它`Object`。

只需更改方法签名以将`Vendor`引用作为参数：-

```
public static void print(Vendor vendor) {
     vendor.name();
} 
```

由于您的方法`name()`在`Vendor`类中，并且您正在传递 的引用`Vendor`，因此您不需要`Object`在方法中用作形式参数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-21T18:32:18.130

因为方法的参数`print()`是 type`Object`而不是 type `Vendor`。所以它期待任何类型的实例`Object`，它没有方法`name()`。实际实例当然可能会扩展`Object`并`name()`添加到方法列表中，但编译器无法知道这一点。

如果您希望该`print()`方法只接受`Vendor`，只需将参数从 更改`Object`为`Vendor`。如果您希望它接受不同的对象，那么您需要一种稍微复杂的面向对象的方法。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-11-21T18:30:10.843

如果您知道 o 是 Vendor，则将其转换为 Vendor 类型或将参数类型重写为 Vendor 而不是方法定义中的通用 Object

# jquery - 使用 jQueryCycle 连续循环多张幻灯片

> ID：13499733
> 
> 赞同：0
> 
> 时间：2012-11-21T18:28:07.490
> 
> 标签：jquery, jquery-cycle

我正在使用 jQueryCycle 脚本处理幻灯片时遇到问题。幻灯片由五个滑块组成：一张大幻灯片，其中图像水平移动，四张小幻灯片堆叠在一起，垂直滑动。每当主幻灯片过渡到下一张幻灯片时，垂直幻灯片都会相互同步过渡和移动，底部的小幻灯片图像与主幻灯片匹配。

当我尝试向我的垂直幻灯片添加某个功能时，我的问题就出现了。当用户单击顶部垂直幻灯片时，我希望幻灯片平滑过渡到下一张幻灯片 3 次，因此用户单击的图像现在是底部幻灯片和主幻灯片。

```
for (var i=0; i < 3; i++) {
setTimeout(function() {
    $('#slides').cycle('next');
    $('#slideh1').cycle('next');
    $('#slideh2').cycle('next');
    $('#slideh3').cycle('next');
    $('#slideh4').cycle('next');
}, 2000);
} 
```

当我在顶部的垂直幻灯片上进行测试时，它会等待两秒钟，然后再跳到选定的幻灯片，只显示一个幻灯片过渡而不是三个。我不知道我的逻辑是否存在缺陷，或者我是否没有正确使用 setTimeout 函数，但任何帮助将不胜感激！

完整的测试代码可以在[这里](http://www.asmithspace.net/testing/testslideshow.html)找到。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T16:08:14.313

我以错误的方式解决这个问题。jQuery Cycle 中的幻灯片循环似乎不是一个可以重复的函数，除非您使用 after 回调。

```
jQuery('#slides').cycle({
    fx:     transitionMain
    ,autostop: autoS
    ,speed: delayMain
    ,delay: -'0'
    ,timeout: timeO
   //,pause: '0'
    ,continuous: isContinuous
    ,easeIn: eas
    ,easeOut: eas
    ,speedIn: transitionSpeed
    ,speedOut: transitionSpeed
    ,synch: 'true'
    ,after: mainSlideNum
    ,startingSlide: mainStartSlide
    }); 
```

对于我的主幻灯片，我调用 mainSlideNum 函数作为我的后回调。

```
 function mainSlideNum(curr,next,opts) {
    var totalSlides = opts.slideCount;
    if (opts.currSlide == 0) {
    cSlideMain = (totalSlides)
        } else {
        cSlideMain = opts.currSlide; }
    $('#slides').attr('curSlideNumber', cSlideMain);

    //If vertical slides are clicked, checks to see if the clicked slide matches the current slide. Continues to cycle until it matches.
    if (clickedSlide != cSlideMain && clickedSlide != null) {
        nextSlide();
        }   
    if (clickedSlide == cSlideMain) { //ends the slide cycling
        clickedSlide = null;
    initializeValues();
    changeSlideOptions();   
        }
    } 
```

变量clickedSlide指的是垂直滚动幻灯片的点击幻灯片编号，cSlideMain包含当前显示幻灯片的幻灯片编号。该函数继续循环到下一张幻灯片，直到两个数字匹配。

# sqlite - Windows 8 Metro（现代 UI）应用程序中的 SQLite

> ID：13499740
> 
> 赞同：0
> 
> 时间：2012-11-21T18:28:26.417
> 
> 标签：sqlite, windows-8, microsoft-metro

我想在我的 Windows 8 应用程序中使用 SQlite，但由于某种原因它不起作用。

我用过这个[教程](http://timheuer.com/blog/archive/2012/05/20/using-sqlite-in-metro-style-app.aspx)

Visual Studio 不将 SQlite 识别为关键字并不断告诉我：

> 找不到类型或命名空间名称“SQlite”（您是否缺少 using 指令或程序集引用？）

我已经添加了两个引用（如上面的教程中所示），并且解决方案资源管理器中也显示了它们，但不知何故我无法使用它们。

我错过了什么？

屏幕截图可以在[这里找到](http://imageshack.us/photo/my-images/687/sqlitenotworking.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T18:48:17.433

从您的屏幕截图中，您似乎没有包含 SQLite-net 客户端项目。使用您显示的参考设置 VSIX 允许您在应用程序中嵌入 SQLite 引擎，但它不提供客户端访问层，您可以从 NuGet 获得。

[在Tim 的帖子](http://timheuer.com/blog/archive/2012/05/20/using-sqlite-in-metro-style-app.aspx)中进一步向下滚动到“从您的应用程序访问引擎”

# mysql - DAYOFWEEK，每周日

> ID：13499745
> 
> 赞同：5
> 
> 时间：2012-11-21T18:28:41.137
> 
> 标签：mysql

在工作中，我们需要制作一份 6 个月大的报告。基本上，从 5 月 1 日到 11 月 1 日，报告必须以每周为基础。到目前为止，我一次只能手动完成一个星期......

这是我的代码

```
SELECT displayname, capture_time,
       satisfied_load_time AS load_time,
       satisfied_response_time AS apdex_response_time

FROM   session_page_summary, page, apdex_value 

WHERE  displayname LIKE 'xyz%'    
      AND capture_time >= '2012-11-01 00:00:00' 
      AND capture_time <= '2012-11-07 00:00:00'    
      AND page.page_id = session_page_summary.page_id    
      AND page.page_id = apdex_value.page_id

GROUP BY displayname 
ORDER BY displayname 
```

我删除了一些长代码只是为了让它看起来更好一些。

结果是……

```
displayname  capture_time  loadtime  responsetime         
>xyz-a         11/7/2012     0.12       1.34
>xyz-b         11/7/2012     0.83       2.92
>xyz-c         11/7/2012     0.56       1.02 
```

我怎样才能得到一个包含 6 个月数据的结果，像这样？

```
displayname  capture_time  loadtime  responsetime          
>xyz-a         11/7/2012     0.72       1.82
>xyz-b         11/15/2012    1.23       1.01
>xyz-c         11/22/2012    2.83       0.78 
```

我每 7 天收到一次报告。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T18:33:04.913

该[`YEARWEEK`](http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_yearweek)功能可能是您需要按周分组的功能。它有许多选项来定义一周的开始方式或分类的年份。

您的查询也将受益于使用`BETWEEN`运算符。`x BETWEEN a AND b`通常比 更有效`x > a AND x < b`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T18:34:36.553

```
SELECT displayname, capture_time,
satisfied_load_time AS load_time,
satisfied_response_time AS apdex_response_time
FROM   session_page_summary sps, page p, apdex_value av
WHERE  displayname LIKE 'xyz%'    
AND page.page_id = session_page_summary.page_id    
AND page.page_id = apdex_value.page_id
AND capture_time between '2012-11-01 00:00:00'AND '2012-11-07 00:00:00'    
GROUP BY displayname 
ORDER BY displayname 
```

会好的...

# c# - 选择不同的 Linq

> ID：13499746
> 
> 赞同：0
> 
> 时间：2012-11-21T18:28:41.747
> 
> 标签：c#, .net, linq, linq-to-dataset

我在数据库中有问答表。我使用 Join 来选择带有答案的问题，并尝试使用 LINQ 获取问题和答案。这是我的代码：

```
List<Question> newQuestionList = 
    (from q in dt.AsEnumerable()
     where (q.Field<Guid>("Question") != null))
     select new Question
     {
         Oid = q.Field<Guid>("Question"),
         QuestionContext = q.Field<String>("QuestionContext"),
         Priority = q.Field<Int32>("Priority"),
         Order = q.Field<Int32>("OrderQuestion"),
         Subject = q.Field<Guid>("Subject"),
         Answers = (from a in dt.AsEnumerable()
                    where a.Field<Guid>("Question") == q.Field<Guid>("Question")
                    select
                    new Answer
                    {
                        Oid = a.Field<Guid>("AnswerOid"),
                        AnswerContext = a.Field<String>("Answer"),
                        IsCorrect = a.Field<bool>("Correct")
                    }).ToList()
         }).Distinct().ToList(); 
```

有很多行具有相同的问题（Id）。它遍历所有。对于一个问题，我只需要迭代一次。如果我有 7 个问题，并且每个问题都有 4 个答案，那么这段代码会给我一个计数为 28 的列表。它的计数必须是 7。有人可以帮忙吗？

```
public class Question
{
    private Guid oid;

    public Guid Oid
    {
        get { return oid; }
        set { oid = value; }
    }

    private string questionContext;

    public string QuestionContext
    {
        get { return questionContext; }
        set { questionContext = value; }
    }

    private int priority;

    public int Priority
    {
        get { return priority; }
        set { priority = value; }
    }

    private Guid subject;

    public Guid Subject
    {
        get { return subject; }
        set { subject = value; }
    }

    private List<Answer> answers;

    public List<Answer> Answers
    {
        get { return answers; }
        set { answers = value; }
    }

    private int order;

    public int Order
    {
        get { return order; }
        set { order = value; }
    }
}

public class Answer 
{
    private Guid oid;

    public Guid Oid
    {
        get { return oid; }
        set { oid = value; }
    }

    private string answerContext;

    public string AnswerContext
    {
        get { return answerContext; }
        set { answerContext = value; }
    }

    private bool isCorrect;

    public bool IsCorrect
    {
        get { return isCorrect; }
        set { isCorrect = value; }
    }      
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T18:45:27.870

我相信您只想使用 .GroupBy(n=>n.Oid) 对您的问题进行分组（我假设每个问题都有一个唯一的 Oid，因为它是一个 Guid）

```
var questions = (from q in dt.AsEnumerable()
                 where (q.Field<Guid>("Question") != null))
                 select new Question
                 {
                     Oid = q.Field<Guid>("Question"),
                     QuestionContext = q.Field<String>("QuestionContext"),
                     Priority = q.Field<Int32>("Priority"),
                     Order = q.Field<Int32>("OrderQuestion"),
                     Subject = q.Field<Guid>("Subject"),
                     Answers = (from a in dt.AsEnumerable()
                                where a.Field<Guid>("Question") == q.Field<Guid>("Question")
                                select new Answer
                                {
                                    Oid = a.Field<Guid>("AnswerOid"),
                                    AnswerContext = a.Field<String>("Answer"),
                                    IsCorrect = a.Field<bool>("Correct")
                                }).ToList()
                 }).GroupBy(n=>n.Oid).ToList(); 
```

这不会返回平面集合。如果我正确理解您的结构，这将返回 7 个独特的问题，这些问题已加入到他们的答案中。如果你不关心其他人，你可以选择通过获得第一个答案来展平这个集合。您可以将此附加到您的 GroupBy(n=>n.Oid) 中：

```
GroupBy(n=>n.Oid).Select(g => g.First()).ToList(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-21T19:37:58.447

我认为如果您先进行分组，那么您将不必为每个问题枚举整个表格

```
List<Question> questions = 
    (from q in dt.AsEnumerable()
     where (q.Field<Guid>("Question") != null)
     group q by new {  Oid = q.Field<Guid>("Question"),
                       QuestionContext = q.Field<String>("QuestionContext"),
                       Priority = q.Field<Int32>("Priority"),
                       Order = q.Field<Int32>("OrderQuestion"),
                       Subject = q.Field<Guid>("Subject")
    } into g
    select new Question {
        Oid = g.Key.Oid,
        QuestionContext = g.Key.QuestionContext,
        Priority = g.Key.Priority,
        Order = g.Key.Order,
        Subject = g.Key.Subject,
        Answers = g.Select(a => new Answer() 
        {
            Oid = a.Field<Guid>("AnswerOid"),
            AnswerContext = a.Field<String>("Answer"),
            IsCorrect = a.Field<bool>("Correct")
        }).ToList()
    }).ToList(); 
```

# asp.net-mvc - 如何让 SelectList 使用枚举来尊重 DisplayName 注释？

> ID：13499747
> 
> 赞同：1
> 
> 时间：2012-11-21T18:28:41.407
> 
> 标签：asp.net-mvc, enums, data-annotations

我在我的 ViewModels 中使用枚举来填充`DropDownListFor`这样的：

```
@Html.DropDownListFor(model => model.SelectedDropDownValue, 
       new SelectList(Enum.GetValues(typeof(SearchOptions)), SearchOptions.SSN)) 
```

这很好用。但是，我想显示与枚举中的每个值相关联的`DisplayName`属性。`DisplayNameAttribute`

我搜索了 Stackoverflow 并看到了许多使用帮助程序、扩展程序等执行此操作的方法。是否可以在这样的单个语句中轻松地告诉`SelectList`使用`DisplayNameAttribute`?

我在想类似的事情：

```
@Html.DropDownListFor(model => model.SelectedDropDownValue, 
                      new SelectList(Enum.GetValues(typeof(SearchOptions), 
                      "Value", GetDisplayAnnotation()), SearchOptions.SSN)) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-11T14:41:41.520

我编写了一些代码，除了查找`DescriptionAttribute`.

根据您的情况进行了修改，如下所示：

```
public static string GetDescription(this Enum value)
{
    if (value == null)
        throw new ArgumentNullException("value");        

    var attribute = value.GetType()
        .GetField(value.ToString())
        .GetCustomAttributes(typeof(DisplayNameAttribute), false)
        .Cast<DisplayNameAttribute>()
        .FirstOrDefault();

    return attribute == null ? value.ToString() : attribute.DisplayName;
} 
```

我没有创建一个选择列表并`@Html.DropDownList`在我的视图中调用，而是创建了看起来有点像这样的编辑器和显示模板（称为 Enum.cshtml）：

```
var values = Enum.GetValues(enumType)
    .Cast<Enum>()
    .Select(v => new SelectListItem
    {
        Selected = v.Equals(Model),
        Text = v.GetDescription(),
        Value = v.ToString(),
    });

Html.DropDownList("", values) 
```

然后，我使用 UIHint 属性装饰 ViewModel 中的任何枚举属性，并且任何枚举属性都会自动使用上面的代码。

```
public class MyViewModel
{
    [UIHint("Enum")]
    public MyEnumType MyProperty { get; set; }
} 
```

有几个边缘情况需要注意，例如处理 null 值、可为 null 的类型以及向下拉列表添加默认条目，但这应该可以让您入门。

# asp.net-mvc - 为每个请求调用 ASP.NET MVC 2 + Common.Logging + NLog = Session_Start

> ID：13499751
> 
> 赞同：2
> 
> 时间：2012-11-21T18:28:53.747
> 
> 标签：asp.net-mvc, logging, asp.net-mvc-2, nlog, common.logging

[在将Common.Logging 2.1.1](http://netcommon.sourceforge.net/ ".NET 的通用基础结构库")后面的日志库从 log4net 切换到[NLog 2.0](http://nlog-project.org/ "NLog – 高级 .NET 日志记录")后，我的 ASP.NET MVC 2 应用程序保持正确的日志记录，但它开始`HttpApplication.Session_Start`为每个请求调用该方法。

我正在尝试将 NLog 的`File`目标与以下配置文件一起使用：

### 网络配置

```
<?xml version="1.0" encoding="utf-8"?>
<configuration>
    <configSections>
        <sectionGroup name="common">
            <section
                name="logging"
                type="Common.Logging.ConfigurationSectionHandler, Common.Logging" />
        </sectionGroup>
    .
    .
    .
    <configSections>
    .
    .
    .
    <common>
        <logging>
            <factoryAdapter type="Common.Logging.NLog.NLogLoggerFactoryAdapter, Common.Logging.NLog20">
                <arg key="configType" value="FILE" />
                <arg key="configFile" value="~/NLog.config" />
            </factoryAdapter>
        </logging>
    </common>
</configuration> 
```

### NLog.config

```
<?xml version="1.0" encoding="utf-8" ?>
<nlog xmlns="http://www.nlog-project.org/schemas/NLog.xsd"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
    <!-- 
    See http://nlog-project.org/wiki/Configuration_file 
    for information on customizing logging rules and outputs.
    -->
    <targets async="true">
        <target
            name="f"
            xsi:type="File"
            fileName="${basedir}/bin/statistics/logs/${shortdate}.log" 
            layout="${longdate}&#009;${uppercase:${level}}&#009;${callsite}&#009;${message}"/>
    </targets>
    <rules>
        <logger name="*" minlevel="Trace" writeTo="f" />
    </rules>
</nlog> 
```

我已经尝试过以下方法：

*   调试应用程序。`ASP.NET_SessionId`cookie 被发送到服务器，并且属性`Session.SessionID`在请求之间没有变化。
*   切换回 Common.Logging - log4net 以验证问题是否与 Common.Logging - NLog 有关。有用。
*   省略`async="true"`NLog 配置文件的 targets 节点中的属性以禁用 NLog 的 AsyncWrapper。它不起作用。
*   使用其他 NLog 目标，尝试`Debugger`和`Database`. 有用。

我需要坚持`File`目标，我想使用 NLog。

# javascript - Javascript 中的会话超时

> ID：13499752
> 
> 赞同：0
> 
> 时间：2012-11-21T18:28:55.077
> 
> 标签：javascript, html, dom-events, client-side, session-timeout

我正在开发一个 Javascripyt/html 移动应用程序，我想实现会话超时功能。最简单的方法是使用该`setTimeout`功能，但我想在做出决定之前检查是否执行了任何单击、更改事件。逻辑必须是：

```
checkForSessionTimeout() {
      if(delta(last logged event time) <  session timeout time) {
              // do not timeout
              // reset the delta to 0
      } else {
              //timeout and take to login page
      }
} 
```

我能够获得该功能，但不确定 **如何在浏览器上记录所有点击和更改事件**。

请帮忙！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T18:44:32.567

你在使用 jQuery 吗？这个例子使用了 jQuery，但你应该能够适应你正在使用的任何东西：监听所有 DOM 节点上的事件。使用 jQuery `$('*').on('click', function() ...)`，. 即使使用了更接近的事件绑定，这也可以让您捕获事件`stopPropagation`。

它应该同样适用于改变......

一个例子（打开控制台）：http: [//jsfiddle.net/u6eDj/2/](http://jsfiddle.net/u6eDj/2/)

# matlab - 按每个值出现的次数对向量进行排序

> ID：13499761
> 
> 赞同：4
> 
> 时间：2012-11-21T18:29:34.783
> 
> 标签：matlab, sorting

我们有以下案例：

```
 Q = [idxcell{:,1}];     
    Sort = sort(Q,'descend')                                                                                                                       
    Sort =
          Columns 1 through 13
            23    23    22    22    20    19    18    18    18    18    17    17    17
          Columns 14 through 26
            15    15    14    14    13    13    13    12    12    12    11    10     9
          Columns 27 through 39
             9     9     8     8     8     8     8     7     7     7     7     7     7
          Columns 40 through 52
             7     6     6     6     5     4     4     3     3     3     3     2     2
          Columns 53 through 64
             2     2     2     2     2     2     2     1     1     1     1     1 
```

我们如何根据其值重复的次数对矩阵 Sort 进行排序？

等待结果应该是：

```
repeatedSort =  2(9) 7(7) 1(5) 8(5) 3(4) 18(4) 6(3) 9(3) 12(3) 13(3) 17(3) 4(2) 14(2) 15(2) 22(2) 23(2) 5(1) 10(1) 11(1) 19(1) 20(1)
      or 
repeatedSort = 2 7 1 8 3 18 6 9 12 13 17 4 14 15 22 23 5 10 11 19 20 
```

先感谢您。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-21T22:37:24.840

您可以使用统计工具箱中的[TABULATE](http://www.mathworks.com/help/stats/tabulate.html)函数，然后调用[SORTROWS](http://www.mathworks.com/help/matlab/ref/sortrows.html)按频率排序。

例子：

```
x = randi(10, [20 1]);    %# random values
t = tabulate(x);          %# unique values and counts
t = t(find(t(:,2)),1:2);  %# get rid of entries with zero count
t = sortrows(t, -2)       %# sort according to frequency 
```

结果，其中第一列是唯一值，第二列是它们的计数：

```
t =
     2     4     %# value 2 appeared four times
     5     4     %# etc...
     1     3
     8     3
     7     2
     9     2
     4     1
     6     1 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-21T18:49:31.003

这是一种方法：

```
d      = randi(10,1,30); %Some fake data
n      = histc(d,1:10);
[y,ii] = sort(n,'descend');

disp(ii) % ii is now sorted according to frequency 
```

# android - 在 Visual Studio 2012 中使用 Mono For Android 4.2.7 错误打包 APK

> ID：13499763
> 
> 赞同：0
> 
> 时间：2012-11-21T18:29:38.777
> 
> 标签：android, xamarin.android, apk

我无法使用 Mono for Android 4.2.7 在真实设备中制作应用程序

我在使用带有 Android 2.3.3 的 Xperia X10a

当我试图在真实设备中打开它时，它会关闭；“应用程序意外停止，请重试。”

我在 Project -> Properties 中使用 Visual Studio 2012 Ultimate；配置“发布”，使用共享运行时（否）。

请帮助我，谢谢你的时间。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-28T09:56:11.487

在安装它之前，您必须创建一个序列号然后发布它。更多信息：[Xamarin 文档](http://docs.xamarin.com/guides/android/deployment,_testing,_and_metrics/publishing_an_application/part_1_-_preparing_an_application_for_release/)

# sql - 使用现有字段和函数更新语句

> ID：13499766
> 
> 赞同：0
> 
> 时间：2012-11-21T18:29:57.010
> 
> 标签：sql, postgresql, sql-update, sql-function

我有一个带有名称字段的表，其中包含由空格分隔的名字和姓氏。

这是我正在使用的简单测试数据：

```
DROP TABLE IF EXISTS students;
CREATE TABLE students (
name text,
major text,
gpa float
);
INSERT INTO students
VALUES ('John Smith', 'CS', 3.7),
('Sara Li', 'History', 3.4),
('Mike Adams', NULL, 2.6); 
```

我的目标是更新表，以便我可以使用 Postgresql 中的 split_part 函数将名字和姓氏分别放入新字段 fname 和 lname 中，使用更新语句，并由名称中的空格分隔。

但是，我正在努力让其中一个语句运行。

```
UPDATE students SET first_name = split_part(name, ' '); 
```

我正在努力让查询为表中的每一行执行此操作，而且我也不确定如何处理姓氏，因为我需要获取空格之后的姓氏。

我已经玩过子查询，但仍然没有成功，如果你能帮忙，请告诉我！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T18:33:00.023

尝试

```
UPDATE students SET first_name = split_part(name, ' ', 1); 
```

# wpf - 如何通过在 DataGridTextColumn 中绑定来使用 StringFormat？

> ID：13499767
> 
> 赞同：0
> 
> 时间：2012-11-21T18:30:01.707
> 
> 标签：wpf, mvvm, binding, string-formatting

我想使用 StringFormat 在 DataGrid 中显示我的数据。对象具有我想使用的格式字符串的属性...例如“{0:0.##} mmol/l”或“{0:0.##} mg/dl”来显示结果在不同的单位。

XAML：

```
<DataGrid ItemsSource="{Binding Results}">
   <DataGrid.Columns>
     <DataGridTextColumn Header="Value" Binding="{Binding Value, Converter={StaticResource stringFormatConverter}}" /> 
```

C# 中的转换器：

```
public class StringFormatConverter : IValueConverter
{
    public object Convert(object value, Type targetType, object parameter, CultureInfo culture)
    {
        return string.Format("{0:0.##} mmol/l", value);
    }
    [...]
} 
```

如何告诉转换器使用格式字符串，它是我绑定到的项目的属性，而不是当前版本的转换器中的格式字符串？

**编辑**：结果是 Result 的 ObservableCollection，看起来像

```
public class Result
{
  public double Value {get; set; }
  public string Key {get; set; }
  public string FormatString {get; set; }
  [...]
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T19:25:54.557

您可以将整个对象传递给转换器而不是其`Value`属性：

```
<DataGridTextColumn Header="Value" Binding="{Binding Converter={StaticResource stringFormatConverter}}" /> 
```

然后，您可以更改转换器以根据给定对象格式化字符串：

```
public class StringFormatConverter : IValueConverter
{
    public object Convert(object value, Type targetType, object parameter, CultureInfo culture)
    {
        var result = (Result)value;
        return string.Format(result.FormatString, result.Value);
    }
} 
```

另一种可能的解决方案是让`Result`类公开另一个属性，该属性将返回格式化值，然后绑定`FormattedValue`（没有转换器）：

```
public class Result
{
    public double Value { get; set; }
    public string Key { get; set; }
    public string FormatString { get; set; }

    public string FormattedValue
    {
        get { return string.Format(FormatString, Value); }
    }
} 
```

# javascript - 如何访问拥有 Function.prototype 扩展的函数？

> ID：13499772
> 
> 赞同：0
> 
> 时间：2012-11-21T18:30:17.487
> 
> 标签：javascript, prototype

我正在尝试创建一个函数扩展来消除任何函数的抖动（如果该函数被快速连续多次调用，则只执行一次，并以最佳方式返回一个缓存值）。

我打算在 UI 框架中使用它，但我希望它是可移植的。我到目前为止的代码如下：

```
Function.prototype.debounce = function()
{
    var originalFunction = this; //this should be 'clickButton' in the example implementation
    var originalArguments = arguments;

    function debouncedFunction()
    {
        var originalContext = this;
        return originalFunction.apply(originalContext,originalArguments)
    }

    if(this.__DEBOUNCEDVALUE === undefined)
    {
        this.__DEBOUNCEDVALUE = debouncedFunction();
        if(this.__DEBOUNCEDVALUE === undefined)
            this.__DEBOUNCEDVALUE = null;
        setTimeout(function(){originalFunction.__DEBOUNCEDVALUE = undefined},1000);
    }

    return this;
} 
```

接下来，我定义了一个通用函数“clickButton”，如下所示：

```
function clickButton()
{
    document.getElementById('log').innerHTML += "<br/>Clicked "+arguments[1];
    return "some value";
} 
```

当我打电话时`clickButton.debounce(3,4)`，它可以工作。它每秒只记录一次文档，但每次调用时都会返回。

但是，当我通过侦听器 ( `buttons[i].addEventListener('click',clickButton.debounce)`) 调用它时，`originalFunction`变量被设置为按钮，而不是函数。不是什么大惊喜。`clickButton`在此示例中，如何从 debounce 中获取引用？

编辑：我尝试切换到使用defineProperty，它允许我在访问时保存上下文和函数。不幸的是，这并非在所有情况下都有效（将其放入 Sencha Touch 中的点击处理程序会导致在 Window 范围内调用函数）。这更接近，但仍然不可接受。

```
Object.defineProperty(Function.prototype,'debounce',{get: function()
    {
        var originalFunction = this;
        var execute = function()
        {
            if(originalFunction.__DEBOUNCEDVALUE === undefined)
            {
                originalFunction.__DEBOUNCEDVALUE = originalFunction.apply(this,arguments);
                if(originalFunction.__DEBOUNCEDVALUE === undefined)
                    originalFunction.__DEBOUNCEDVALUE = null;
                setTimeout(function()
                    {
                        originalFunction.__DEBOUNCEDVALUE = undefined;
                        console.log("Reset");
                    },5000);
            }
            else
                console.log("Return cached value");

            return originalFunction.__DEBOUNCEDVALUE;
        }
        return execute;

    }}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T18:34:48.937

这只能通过将函数对象绑定到`debounce`.

一种方法是使用`.bind`

```
buttons[i].addEventListener('click',clickButton.debounce.bind(clickButton)), 
```

* * *

另一种方法是传递一个匿名函数，该函数在`clickButton`.

```
buttons[i].addEventListener('click',function(e) {
    return clickButton.debounce.apply(clickButton, arguments);

        // The following would suffice for this example:
    // return clickButton.debounce(e);
}), 
```

* * *

但除了这些技术之外，`debounce`当传递给`addEventListener`.

# javascript - Ruby 使用 datepicker 输入传递参数

> ID：13499776
> 
> 赞同：1
> 
> 时间：2012-11-21T18:30:34.017
> 
> 标签：javascript, jquery, ruby-on-rails, ruby

我试图通过 Rails 中的 button_to 将值传递到索引页面，但它调用 POST 并在数据库中创建一个新的空值。我所拥有的是：

在 /app/views/index.html.erb

```
<script>$(function() {
  $("#date").datepicker();
});</script>
<% require 'date' %>
<h1>Listing reports for the week of <%= params[:datepicker] || DateTime.now.strftime('%m/%d/%Y') %></h1>

<%= form_tag reports_path do %>
  <input type="string" id="date" name="date" />
  <%= submit_tag "Select Date", :method => "get" %>
<% end %> 
```

在 /app/controllers/reports_controller.rb

```
 def index
    @date = params[:date] || DateTime.now.strftime('%m/%d/%Y')
    @reports = Report.where(:entrydate => Date.strptime(@date, '%m/%d/%Y').beginning_of_week..Date.strptime(@date, '%m/%d/%Y').end_of_week)

    respond_to do |format|
      format.html # index.html.erb
      format.json { render :json => @reports }
      format.js
    end
  end 
```

在 /config/routes.rb

```
 match "reports/*date" => "reports#index" 
```

手动输入日期（例如 localhost:3000/reports/10/29/2012）时，该站点工作正常。

主要问题是我不知道如何从文本字段获取输入以作为 param[:date] 发送到控制器中的报告/索引方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T18:32:45.187

尝试这个：

```
<%= link_to reports_path(:date => @date) %> 
```

编辑（使用表格）：

```
<%= form_tag reports_path do %>
  <input type="string" id="datepicker" name="datepicker"/>
  <%= submit_tag "Select Date" %>
<% end %> 
```

像这样的东西。

# java - 安装了 Java 7u9 和 Eclipse (Juno) 但 Eclipse 没有看到 JavaFX2

> ID：13499779
> 
> 赞同：7
> 
> 时间：2012-11-21T18:30:40.467
> 
> 标签：java, eclipse, javafx-2

在我阅读的所有地方，从 Java 7u7 开始，JavaFX2 都与 JRE 和 JDK 捆绑在一起。所以我很困惑为什么当我运行 Eclipse 时，它​​告诉我“**无法解析导入 javafx** ”。

除了 7u9，我没有安装其他 JDK 或 JRE，那么为什么我无法从 Eclipse 中看到 JavaFX2？

非常感谢 ：）

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-21T18:48:43.870

不幸的是，对于 jdk7u9，当我们创建一个新的 Java 项目时，Eclipse 不会将`jfxrt.jar`您`jre\lib`目录中的文件添加到项目构建路径库中。您必须手动完成，或者您可以将[e(fx)clipse](http://efxclipse.org/)插件安装到 Eclipse，这将使您的 JavaFX 开发更容易:)

Eclipse 遵循 JRE 7u9 默认引导类路径的默认设置（不包括`jfxrt.jar`）。未来的 JRE 版本将放置`jfxrt.jar`在引导类路径中，因此您无需手动将`jfxrt.jar`文件添加到项目构建路径库中。您可以跟踪此[JRE 功能](http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=7166330)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-12T03:02:30.250

添加`jfxrt.jar`到项目构建路径将使 eclipse 能够找到它并允许您在 eclipse 中开发和执行您的代码。但是，当您部署您的软件时，它将不再能够找到`jfxrt.jar`，除非您也将它放在类路径中。这变得一团糟，因为您必须四处寻找`jdk`/的位置`jre`并在里面搜索`jfxrt.jar`.

据我了解，长期计划是`jfxrt.jar`从`lib`文件夹移动`jre`到`lib/ext`文件夹。这会将其放置在默认情况下可以找到的某个位置，而无需将内容添加到您的类路径中。不幸的是，这在 Java 8 发布之前不太可能发生！

同时，最简单的解决方案似乎是使用捆绑[`javafxpackager`](http://docs.oracle.com/javafx/2/deployment/javafxpackager001.htm)工具来创建您的 jar 文件，而不是使用`jar`工具。还有一个`ant`基于解决方案，但我不熟悉它。打包程序将创建您的 jar 文件，并插入一个启动器类，该类会找到 jfxrt.jar 并在运行时将其动态添加到您的应用程序的类路径中。如果`jre`或安装`javafx`太旧，它还会抱怨并提示用户下载较新的版本。然后它通过您在命令行中指定的类调用您的应用程序。（通常是你`main()`方法的类）。

它适用于本机 javafx 应用程序和普通的旧 Swing 应用程序。如果您的 jar 文件的清单中有额外的内容，例如另一个 ClassPath 条目，您也可以在命令行上指定它以包含在新的 jar 文件中。

# mysql - MySQL 创建表脚本 TEXT data_type 语法

> ID：13499781
> 
> 赞同：1
> 
> 时间：2012-11-21T18:31:01.547
> 
> 标签：mysql

对这个语法束手无策。试了下，到处都找不到。

```
CREATE TABLE `#__LISTINGS` (
  `Description` TEXT(M) NOT NULL 
```

如果我想允许最大长度，M 的值是多少？我已经阅读了 mySQL 网站上的参考资料，但它没有给出示例或说明默认值是什么。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-21T18:32:20.203

`(M)`如果您希望大小不受约束，则根本不要包含。

# xaml - VS 2012 中是否有在 XAML 和 Designer 之间切换的键盘快捷键？

> ID：13499782
> 
> 赞同：18
> 
> 时间：2012-11-21T18:31:04.410
> 
> 标签：xaml, visual-studio-2012, xaml-designer

在 Visual Studio 2012 中从代码文件切换到 XAML 文件时，焦点转到设计器。如果我想编辑 XAML（这是 99% 的时间），我需要使用鼠标将焦点移动到 XAML 代码/标记窗口。有没有办法在没有鼠标的情况下将焦点移到 XAML？

注意：SO 中有类似的问题，但它们涉及在代码背后和 XAML 设计器之间移动。

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-11-21T19:06:33.437

是的，肯定是，只需使用`Shift`+ `F7`;)

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-11-23T18:12:48.810

在 99% 的情况下，您可能希望将其设置为默认值

我不知道其他版本，但在 Visual Studio 2010 中，从*菜单栏中*选择**Tools** → **Options...**，从对话框中选择**Text Editor** → **XAML** → **Miscellaneous**，勾选**Always open documents in full XAML view**。现在，每次双击 XAML 文件时，它都会在 XAML（代码）视图中打开，而不是在设计视图中打开。

![Visual Studio 2010 XAML 设置](../Images/260055e306686b13486cda38933c0141.png)

*希望图片不要太大*

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2017-06-27T15:54:28.410

如果`Shift`+`F7`不能立即工作，那么您可能需要重新分配键盘快捷键适用的上下文。当我在 VS 2017 中尝试此操作时，我必须使用以下步骤进入并重新分配快捷方式：

*   **工具**>**选项**
*   在弹出菜单中，选择侧栏中的**环境**>**键盘**
*   `View.ViewDesigner`在搜索栏中输入
*   打开**使用新快捷方式下的菜单：**
*   从菜单中选择`Text Editor`，在分配栏中输入所需的快捷方式，然后单击分配
*   从菜单中选择`XAML Designer`，在分配栏中输入所需的快捷方式，然后单击分配
*   单击`OK`以应用更改并退出选项菜单

**注意：**您**必须**`Text Editor`同时执行这两项操作`XAML Designer`才能使其正常工作。下图显示了上述步骤的结果。

[![键盘菜单图像](../Images/ae16af6942bb5e98f8fc273a775a089a.png)](https://i.stack.imgur.com/rPZo1.png)

# scala - 在可遍历视图上执行 foldLeft 时，Scala 中的类型差异错误

> ID：13499785
> 
> 赞同：2
> 
> 时间：2012-11-21T18:31:11.797
> 
> 标签：scala, compiler-errors, fold, existential-type, lazy-sequences

`Traversable`我正在尝试使用运算符在 Scala 中连接一系列视图，`foldLeft`并且遇到了我不理解的类型差异错误。

我可以像这样`reduce`连接一个`Traversable`视图列表。

```
val xs = List(1,2,3,4).map(Traversable(_).view).reduce((a: TraversableView[Int, Traversable[_]], b: TraversableView[Int, Traversable[_]]) => a ++ b) // TraversableView[Int,Traversable[_]]
// xs.force returns Traversable[Int] = List(1, 2, 3, 4) 
```

（请注意，我必须在`reduce`参数上写类型注释：`reduce(_ ++ _)`不编译。我不明白为什么，也希望能得到解释。）

我还可以将列表分成头部和尾部并将它们连接起来。

```
import collection.TraversableView
val ns = List(1,2,3,4)
val h = Traversable(ns.head).view
val t = ns.tail.map(Traversable(_).view).reduce((a: TraversableView[Int, Traversable[_]], b: TraversableView[Int, Traversable[_]]) => a ++ b)
val xs = h ++ t // TraversableView[Int,Traversable[_]]
// xs.force returns Traversable[Int] = List(1, 2, 3, 4) 
```

但是，如果我尝试对 a 做同样的事情，`foldLeft`我会得到类型差异错误。

```
import collection.TraversableView
val ns = List(1,2,3,4)
val h = Traversable(ns.head).view
val t = ns.tail.map(Traversable(_).view)
val xs = (h /: t)((a: TraversableView[Int, Traversable[_]], b: TraversableView[Int, Traversable[_]]) => a ++ b)
<console>:14: error: type mismatch;
 found   : scala.collection.TraversableView[Int,Traversable[_]]
 required: java.lang.Object with scala.collection.TraversableView[Int,Traversable[Int]]
              (h /: t)((a: TraversableView[Int, Traversable[_]], b: TraversableView[Int, Traversable[_]]) => a ++ b) 
```

我怀疑这个问题与存在类型有关`Traversable[_]`，但我无法弄清楚我到底做错了什么。我在上面的表达式中尝试了各种类型签名，但无济于事。从 Stackoverflow 上的其他问题来看， 的类型有些棘手`foldLeft`，但我找不到解决此问题的问题。

为了比较，相同的算法`Stream`可以顺利运行。

```
val xs = (1 #:: Stream.empty /: List(2,3,4).map(_ #:: Stream.empty))(_ ++ _)
// xs.force returns Stream[Int] = Stream(1, 2, 3, 4) 
```

以上是我想要做的，除了我想使用视图而不是`Stream`因为我不需要记住我的所有结果。

这似乎是一个奇怪的要求。我想这样做的*原因*`foldLeft`是因为执行视图提供`Traversable`了一种有效的方法来实现[惰性深度优先搜索](https://stackoverflow.com/questions/13483931/functional-style-early-exit-from-depth-first-recursion)。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-21T19:31:34.380

这是一个解决方法（在 2.9.2 和 2.10.0-RC2 上测试）：

```
import scala.collection.TraversableView

implicit def `I'm a lie!`[A]: collection.generic.CanBuildFrom[
  TraversableView[A, Traversable[A]], A, TraversableView[A, Traversable[A]]
] = null

val xs = List(1, 2, 3, 4).map(Traversable(_).view).reduce(_ ++ _) 
```

它既编译又做我们想要的：

```
scala> xs.toList
res0: List[Int] = List(1, 2, 3, 4) 
```

`(_ ++ _)`即使使用语法，左折叠版本也可以使用。

问题是该`++`方法需要一个隐式`CanBuildFrom`实例，但实际上并没有使用它。该`TraversableView`对象提供[了一个虚拟实例](https://github.com/scala/scala/blob/v2.9.2/src/library/scala/collection/TraversableView.scala#L23)，但它的类型很奇怪（或者至少这种类型对我来说很奇怪——也许有一个合理的解释）。

无论如何，至少现在将您自己的适当类型的虚拟实例放入范围是可行的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-21T19:08:28.960

视图不会跨`++`操作维护所包含元素的身份。我很确定这是一个错误。您可以通过强制转换来修复它：

```
val xs = List(1,2,3,4).map(Traversable(_).view).
  reduce((a,b) => (a ++ b).asInstanceOf[TraversableView[Int,Traversable[Int]]]) 
```

在折叠情况下：

```
val xs = (Traversable(1).view /: List(2,3,4).map(x => Traversable(x).view)){ (l,r) =>
  (l ++ r).asInstanceOf[TraversableView[Int,Traversable[Int]]]
} 
```

不过要小心！一旦您开始显式转换，您的类型安全性就会下降（即，不犯错误取决于您）。

我猜这是视图没有被大量使用的症状。如果可能的话，我通常会尝试使用`Iterator`，而不是使用各种不同的视图。

# alloy - 合金中的高阶量化

> ID：13499793
> 
> 赞同：2
> 
> 时间：2012-11-21T18:31:42.347
> 
> 标签：alloy

我正在阅读有关合金中高阶量化的内容，并看到以下内容：lone p: some X| F
现在，如果关键字“some”修改 p 或​​ X，我感到困惑。这是否意味着 X 应该是非空的，或者是否意味着 p 的基数应该 >=1。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-22T15:02:38.893

在这种情况下，“some”修改了“X”，这意味着 X 应该是非空的。然而，“lone”仍然修改“p”，意味着 p <= 1 的基数。换句话说，这个约束表示在非空集合“X”中最多有一个“p”，使得“F”成立。

# mysql - 在数据可能存在或可能不存在时连接表

> ID：13499797
> 
> 赞同：15
> 
> 时间：2012-11-21T18:31:53.393
> 
> 标签：mysql, sql, oracle, join

首先让我说我没有设计这个数据库。只是尝试使用它。

我正在尝试检索一组自行车的故障，其中最重要的决定因素是自行车中的任何部件是否具有特定属性。该属性在部件表中设置。该零件是装配的一部分，它引用了更大的装配。该组件可能具有分配给它的特定自行车类型；如果不是，我们假设所有自行车类型都分配给组件。这些零件也可能分配有特定的自行车，由序列号标识。

所以，我们可以假设：

1.  故障表中的记录将始终包括序列号、更高的组件和自行车类型。
2.  零件的装配将始终具有对更高装配的参考
3.  零件的装配可能有也可能没有对自行车类型的引用。
4.  零件可能有也可能没有对特定序列号的引用

在搜索具有特定属性的零件的故障时，如果该零件引用了特定的自行车，我们只想找到那些。如果没有，并且零件的装配有对特定自行车类型的引用，我们只想查找与具有这些类型的引用并包含这些零件的装配相关的故障。否则，我们希望找到与包含这些零件的更高组件相关的所有故障。

我的问题是，如果我加入序列号，我总是只会得到分配了序列号的零件，如果我加入自行车类型，我只会得到组件分配了类型的零件。我不确定我是否正在尝试考虑到数据库设计不现实的东西，或者我是否正在错误地接近连接。

以下是到目前为止的查询。

```
SELECT f_bicycle_type, f_serial_number, f_big_assembly
FROM ( 
    SELECT DISTINCT f.f_bicycle_type, f.f_serial_number, f.f_big_assembly, p_important_attr 
    from failures f 
    left outer join (    
        select distinct bt.bt_bicycle_type, b_serial_number, a_big_assembly, p_important_attr  
        from (          
            select distinct b.b_serial_number, a.a_big_assembly, p.p_assembly_id, p.p_important_attr
            from parts p
            join assemblies a on p.p_assembly_id = a.a_assembly_id
            left outer join parts_bicycles b on b.b_part_id = p.p_id  
            where p.p_important_attr = 'awesome'
        ) p_join_a_and_b 
        left outer join assembly_bicycle_types bt on bt.bt_assembly_id = p_join_a_and_b.p_assembly_id 
    ) p_join_a_and_b_join_bt 
    on f.f_big_assembly = p_join_a_and_b_join_bt.a_big_assembly 
    -- problem join clause - if an explicit type has not been assigned to the assembly, we want to include ALL types
    and f_bicycle_type = p_join_a_and_b_join_bt.bt_bicycle_type
    -- problem join clause - there may not be explicit serial numbers assigned to a given part
    and f_serial_number = b_serial_number
) z
WHERE p_important_attr = 'awesome'; 
```

测试用例 sql（用于 Oracle）：

```
CREATE TABLE failures (
f_bicycle_type VARCHAR(20),
f_serial_number NUMBER(20),
f_big_assembly VARCHAR(5)); 

CREATE TABLE parts (
p_id NUMBER(20),
p_assembly_id NUMBER(20),
p_important_attr VARCHAR(20));

CREATE TABLE assemblies (
a_assembly_id NUMBER(20),
a_big_assembly VARCHAR(5)); 

CREATE TABLE parts_bicycles (
b_part_id NUMBER(20),
b_serial_number NUMBER(20));    

CREATE TABLE assembly_bicycle_types (
bt_assembly_id NUMBER(20),
bt_bicycle_type VARCHAR(20));

INSERT ALL
INTO failures (f_bicycle_type, f_serial_number, f_big_assembly)
VALUES ('tandem', 1000001, 'A1000')
INTO failures (f_bicycle_type, f_serial_number, f_big_assembly)
VALUES ('bmx', 1000002, 'A1000')
INTO failures (f_bicycle_type, f_serial_number, f_big_assembly)
VALUES ('tandem', 1000003, 'B1000')
INTO failures (f_bicycle_type, f_serial_number, f_big_assembly)
VALUES ('cruiser', 1000004, 'B1000')  
INTO failures (f_bicycle_type, f_serial_number, f_big_assembly)
VALUES ('bmx', 1000005, 'C1000')  
INTO failures (f_bicycle_type, f_serial_number, f_big_assembly)
VALUES ('motocross', 1000006, 'C1000')
INTO failures (f_bicycle_type, f_serial_number, f_big_assembly)
VALUES ('cruiser', 1000007, 'C1000')
INTO failures (f_bicycle_type, f_serial_number, f_big_assembly)
VALUES ('bmx', 1000008, 'D1000')
INTO failures (f_bicycle_type, f_serial_number, f_big_assembly)
VALUES ('bmx', 1000009, 'D1000')
INTO failures (f_bicycle_type, f_serial_number, f_big_assembly)
VALUES ('cruiser', 1000010, 'E1000')
INTO parts (p_id, p_assembly_id, p_important_attr)
VALUES (1, 1001, 'awesome')
INTO parts (p_id, p_assembly_id, p_important_attr)
VALUES (2, 1001, 'ordinary')
INTO parts (p_id, p_assembly_id, p_important_attr)
VALUES (3, 2001, 'awesome')
INTO parts (p_id, p_assembly_id, p_important_attr)
VALUES (4, 3001, 'awesome')
INTO parts (p_id, p_assembly_id, p_important_attr)
VALUES (5, 4001, 'awesome')
INTO parts (p_id, p_assembly_id, p_important_attr)
VALUES (6, 5001, 'ordinary')
INTO assemblies (a_assembly_id, a_big_assembly)
VALUES (1001, 'A1000')
INTO assemblies (a_assembly_id, a_big_assembly)
VALUES (2001, 'B1000')
INTO assemblies (a_assembly_id, a_big_assembly)
VALUES (3001, 'C1000')
INTO assemblies (a_assembly_id, a_big_assembly)
VALUES (4001, 'D1000')
INTO assemblies (a_assembly_id, a_big_assembly)
VALUES (5001, 'E1000')
INTO parts_bicycles (b_part_id, b_serial_number)
VALUES (4, 1000005)
INTO parts_bicycles (b_part_id, b_serial_number)
VALUES (4, 1000006)
INTO parts_bicycles (b_part_id, b_serial_number)
VALUES (5, 1000008)
INTO assembly_bicycle_types (bt_assembly_id, bt_bicycle_type)
VALUES (02001, 'tandem')
INTO assembly_bicycle_types (bt_assembly_id, bt_bicycle_type)
VALUES (04001, 'bmx')
SELECT * FROM DUAL; 
```

对于 MySQL：

```
 CREATE TABLE failures (
f_bicycle_type VARCHAR(20),
f_serial_number INTEGER(20),
f_big_assembly VARCHAR(5));
CREATE TABLE parts(
p_id INTEGER( 20 ) ,
p_assembly_id INTEGER( 20 ) ,
p_important_attr VARCHAR( 20 )
);
CREATE TABLE assemblies(
a_assembly_id INTEGER( 20 ) ,
a_big_assembly VARCHAR( 5 )
);
CREATE TABLE parts_bicycles(
b_part_id INTEGER( 20 ) ,
b_serial_number INTEGER( 20 )
);
CREATE TABLE assembly_bicycle_types(
bt_assembly_id INTEGER( 20 ) ,
bt_bicycle_type VARCHAR( 20 )
);

INSERT INTO failures (f_bicycle_type, f_serial_number, f_big_assembly)
VALUES ('tandem', 1000001, 'A1000'),('bmx', 1000002, 'A1000'), ('tandem', 1000003, 'B1000'),    ('cruiser', 1000004, 'B1000') ,('bmx', 1000005, 'C1000'), ('motocross', 1000006, 'C1000')
,('cruiser', 1000007, 'C1000')
,('bmx', 1000008, 'D1000')
,('bmx', 1000009, 'D1000')
, ('cruiser', 1000010, 'E1000');
insert INTO parts (p_id, p_assembly_id, p_important_attr)
VALUES (1, 1001, 'awesome'), (2, 1001, 'ordinary'), (3, 2001, 'awesome'), (4, 3001, 'awesome'), (5, 4001, 'awesome'),(6, 5001, 'ordinary');
INSERT INTO assemblies (a_assembly_id, a_big_assembly)
VALUES (1001, 'A1000'), (2001, 'B1000'), (3001, 'C1000'), (4001, 'D1000'),(5001, 'E1000');
    INSERT INTO parts_bicycles (b_part_id, b_serial_number)
VALUES (4, 1000005),(4, 1000006),(5, 1000008)
INSERT INTO assembly_bicycle_types (bt_assembly_id, bt_bicycle_type)
VALUES (02001, 'tandem'), (04001, 'bmx'); 
```

样本数据和预期结果：

```
-- failures table
-- f_bicycle_type   || f_serial_number  || f_big_assembly
---------------------------------------------------------
  tandem               1000001             A1000
  bmx                  1000002             A1000
  tandem               1000003             B1000
  cruiser              1000004             B1000
  bmx                  1000005             C1000
  motocross            1000006             C1000
  cruiser              1000007             C1000
  bmx                  1000008             D1000
  bmx                  1000009             D1000
  cruiser              1000010             E1000

  -- parts table
  -- p_id   || p_assembly_id    || p_important_attr
  ------------------------------------------------
     1          1001                awesome
     2          1001                ordinary
     3          2001                awesome
     4          3001                awesome
     5          4001                awesome
     6          5001                ordinary

  -- assemblies table
  -- a_assembly_id  || a_big_assembly
  -----------------------------------
     1001              A1000
     2001              B1000
     3001              C1000
     4001              D1000
     5001              E1000

  -- parts_bicycles table
  -- b_part_id  || b_serial_number
  --------------------------------
     4              1000005
     4              1000006
     5              1000008

  -- assembly_bicycle_types table
  -- bt_assembly_id || bt_bicycle_type
  ------------------------------------
     02001             tandem
     04001             bmx

-- desired results from failures table
-- f_bicycle_type   || f_serial_number  || f_big_assembly
---------------------------------------------------------
  tandem               1000001             A1000
  bmx                  1000002             A1000
  tandem               1000003             B1000
  bmx                  1000005             C1000
      motocross            1000006             C1000
  bmx                  1000008             D1000 
```

和实际结果，与问题连接到位：

```
-- actual results from failures table
-- f_bicycle_type   || f_serial_number  || f_big_assembly
---------------------------------------------------------
  bmx                  1000008             D1000 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T05:49:15.683

你去（PostgreSQL 风格）：

```
WITH chosen_parts AS (
  SELECT * FROM parts LEFT JOIN parts_bicycles ON b_part_id = p_id 
    WHERE p_important_attr = 'awesome'
), chosen_assemblies AS (
  SELECT * FROM assemblies JOIN chosen_parts ON p_assembly_id = a_assembly_id 
    LEFT JOIN assembly_bicycle_types ON bt_assembly_id = a_assembly_id 
  WHERE b_serial_number IS NULL
)
SELECT failures.* FROM chosen_parts JOIN failures 
  ON f_serial_number = b_serial_number
UNION
SELECT failures.* FROM chosen_assemblies JOIN failures 
  ON f_big_assembly = a_big_assembly 
  WHERE bt_bicycle_type = f_bicycle_type
    OR bt_bicycle_type IS NULL; 
```

`SELECT DISTINCT * FROM`如果担心重复，请随意添加外部。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-29T20:50:14.413

该查询连接了parts、parts_bicycles、assembly、assembly_bicycle_type。让我们将其保存为视图：

```
create view j_parts as
select p_important_attr, b_serial_number, a_big_assembly, bt_bicycle_type
from
  parts left join parts_bicycles
    on parts.p_id = parts_bicycles.b_part_id
  left join assemblies
    on parts.p_assembly_id=assemblies.a_assembly_id
  left join assembly_bicycle_types
    on assemblies.a_assembly_id =assembly_bicycle_types.bt_assembly_id 
```

这（我认为！）是为您提供所需结果的查询：

```
SELECT failures.*
FROM
  failures inner join j_parts
  on f_serial_number=b_serial_number
     and p_important_attr = 'awesome'
UNION
SELECT failures.*
FROM
  failures inner join j_parts
  on f_big_assembly=a_big_assembly
     and b_serial_number is null
     and j_parts.bt_bicycle_type=f_bicycle_type
     and p_important_attr = 'awesome'
UNION
SELECT failures.*
FROM
  failures inner join j_parts
  on f_big_assembly=a_big_assembly
     and b_serial_number is null
     and j_parts.bt_bicycle_type is null
     and p_important_attr = 'awesome' 
```

**编辑：**我想这样写是因为它更容易阅读和维护。然后可以优化查询。这里有一个选择的所有条件：

```
SELECT failures.*
FROM
  failures inner join
  (parts left join parts_bicycles
   on parts.p_id = parts_bicycles.b_part_id
   left join assemblies
   on parts.p_assembly_id=assemblies.a_assembly_id
   left join assembly_bicycle_types
   on assemblies.a_assembly_id =assembly_bicycle_types.bt_assembly_id)
  on f_serial_number=b_serial_number
     or (f_big_assembly=a_big_assembly
         and b_serial_number is null
         and (bt_bicycle_type=f_bicycle_type
              or bt_bicycle_type is null))
  and p_important_attr = 'awesome' 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-29T22:48:50.990

以下查询返回您想要的结果集。本质上，这首先建立了零件、组件和自行车类型之间的关系，然后对故障执行复杂的、优先级的连接以获得实际结果。

```
SELECT DISTINCT f.f_bicycle_type, f.f_serial_number, f.f_big_assembly
FROM  parts p
      LEFT JOIN parts_bicycles pb
         ON p.p_id = pb.b_part_id
      LEFT JOIN assemblies a
         ON p.p_assembly_id = a.a_assembly_id
      LEFT JOIN assembly_bicycle_types abt
         ON a.a_assembly_id = abt.bt_assembly_id
      LEFT JOIN failures f
         ON -- First priority is parts that map directly
            pb.b_serial_number = f.f_serial_number 
            -- Second priority is assemblies that map to type
            OR (pb.b_serial_number IS NULL 
                AND abt.bt_bicycle_type = f.f_bicycle_type) 
            -- Third priority is assemblies that map directly
            OR (pb.b_serial_number IS NULL 
                AND abt.bt_bicycle_type IS NULL 
                AND a.a_big_assembly = f.f_big_assembly)
WHERE  p.p_important_attr = 'awesome'
ORDER BY f.f_serial_number 
```

[SQL小提琴](http://sqlfiddle.com/#!2/83199/3)

我不认为这解决了未分配的组件属于所有自行车的问题，但是从您的示例数据中不清楚它是如何工作的。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-06T13:09:33.053

修改后的查询可以

```
SELECT f_bicycle_type, f_serial_number, f_big_assembly
FROM ( 
SELECT DISTINCT f.f_bicycle_type, f.f_serial_number, f.f_big_assembly, p_important_attr 
from failures f 
left outer join (    
    select distinct bt.bt_bicycle_type, b_serial_number, a_big_assembly, p_important_attr  
    from (          
        select distinct b.b_serial_number, a.a_big_assembly, p.p_assembly_id, p.p_important_attr
        from parts p
        join assemblies a on p.p_assembly_id = a.a_assembly_id
        left outer join parts_bicycles b on b.b_part_id = p.p_id  
        where p.p_important_attr = 'awesome'
    ) p_join_a_and_b 
    left join assembly_bicycle_types bt on bt.bt_assembly_id = p_join_a_and_b.p_assembly_id 
) p_join_a_and_b_join_bt 
on f.f_big_assembly = p_join_a_and_b_join_bt.a_big_assembly 
-- problem join clause - if an explicit type has not been assigned to the assembly, we want to include ALL types
and (f_bicycle_type = p_join_a_and_b_join_bt.bt_bicycle_type or p_join_a_and_b_join_bt.bt_bicycle_type is null)
-- problem join clause - there may not be explicit serial numbers assigned to a given part
and (f_serial_number = b_serial_number or b_serial_number is null)
) z
WHERE p_important_attr = 'awesome'; 
```

# wpf - 使用 Linq 搜索列表视图项目

> ID：13499799
> 
> 赞同：2
> 
> 时间：2012-11-21T18:31:57.030
> 
> 标签：wpf, linq, listview, binding

我有一个列表视图绑定到实体对象的集合视图（称为消息）

当消息对象集合更改（调度程序计时器）时，会触发列表视图项绑定刷新。

发生这种情况时，列表视图中当前选定的项目将被取消选择。

如何对 listview 项目集合进行 LINQ 搜索以查找某个 id 的消息对象并重新选择它？

```
int id = ((Message)lvMessages.SelectedItem).Id;

lvMessages.DataContext = service.Messages;
ICollectionView view = CollectionViewSource.GetDefaultView(lvMessages.ItemsSource);
view.Filter = new Predicate<object>(FilterMessageItem);

//var li = lvMessages.Items.Cast<Message>().Where(m => m.Id == id).SingleOrDefault();

lvMessages.SelectedItem = li; 
```

我不确定如何设置 Linq 查询，因为我在注释行收到此错误...

> 无法将 System.Collections.Generic.IEnumerable 类型隐式转换为“BusinessObjects.Message”。存在显式转换（您是否缺少演员表？）

也许有更好的方法来使用集合中更改的项目填充列表视图？没有把握。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T03:14:17.527

简短的回答是“你没有”。

如果您已将 Listview 绑定`ItemSource`到 ViewModel 上的集合，则在 ViewModel 上为所选项目创建一个属性（a`DependencyProperty`或带有 的 POCO `INotifyPropertyChanged`）并将 Listview 的`SelectedItem`属性绑定到该属性。

当您在 Listview 中选择一个项目时，该属性值将被更新，并且使用该属性更改 ViewModel 中的值将更新 Listview 中的选择。使用 MVVM 和绑定，真的不需要从 ViewModel 或其他任何地方访问视图控件等，包括代码隐藏。

# c# - 编辑 pdf 文档中的文本样式

> ID：13499800
> 
> 赞同：0
> 
> 时间：2012-11-21T18:31:59.043
> 
> 标签：c#, pdf, itextsharp, edit

我正在开发一个 C# 控制台应用程序，该应用程序旨在编辑现有 PDF 文件中的文本样式，例如将文本样式更改为粗体或斜体或添加字体系列、更改文本颜色...

我使用了 iTextSharp 库，但遇到了以下问题：

1.  PDF 文档中的细空间被修剪。
2.  从现有文档中提取文本时，文本样式被完全忽略（我的意思是字体、粗体、斜体......）
3.  从 PDF 文件中提取内容时不读取特殊格式的数学、图像和文本

是否有任何其他库或任何建议来编辑上述 PDF 文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T23:28:08.667

关于你遇到的问题的一些话......

> 1 PDF 文档中的细空间被修剪。

细空间通常是通过水平坐标偏移产生的。不幸的是，同样的技术也用于字距调整，即使相邻字符看起来更好。如果在解析页面时遇到这样的水平偏移，解析器必须试探性地做出决定，有时是错误的。对于您的文档，这种启发式方法似乎失败了。

> 2 从现有文档中提取文本时，文本样式被完全忽略（我的意思是字体、粗体、斜体..等）

那是`RenderListener`你使用的问题。与 iText(Sharp) 捆绑的侦听器当前专注于文本。它们可以很容易地扩展到传输字体信息。

但是，您应该知道，PDF 不知道粗体、斜体等。在质量好的文档的情况下，xxx 和 xxx 粗体是单独的字体，而在质量较差的文档的情况下，可能会生成穷人的粗体通过以微小的偏移量打印字形两次，或者可以通过适当的倾斜变换矩阵生成倾斜的外观。

> 3 从PDF文件中提取内容时不读取特殊格式的数学、图像和文本

如果您有这方面的样品，请在此处或[itext-questions 邮件列表中提供](https://lists.sourceforge.net/lists/listinfo/itext-questions)。可以肯定的是，您已经实现了一个`RenderListener`在测试时侦听图像事件的方法？

因此，1 是一个一般问题，可能有更好的算法，但不能以 100% 安全的方式解决。2 仅要求您基于现有的纯文本之一实现适当的 RenderListener；实际上有很多关于`RichTextExtractionStrategy`为 iText 创建一个的讨论。但是，必须对 3 进行更严格的检查。

从本质上讲，iText(Sharp)并不是唯一一个具备文本解析能力的PDF库，它们各有各的优势。不过，它确实提供了一个框架，可用于从文档文本样式中检索尽可能多的信息。

> 我正在开发一个 C# 控制台应用程序，该应用程序旨在编辑现有 PDF 文件中的文本样式，例如将文本样式更改为粗体或斜体或添加 font-family ，更改文本颜色...等。

考虑到同一字体系列中的不同字体或不同样式可能具有显着不同的宽度，这是一项了不起的壮举。这可能会导致外观难看或需要重排文本，而这并不是 PDF 真正适合的。

# symfony - Sonata_type_admin 调用时如何在 Sonata 的 Admin 类中获取底层对象？

> ID：13499803
> 
> 赞同：8
> 
> 时间：2012-11-21T18:32:02.913
> 
> 标签：symfony, symfony-sonata, sonata-admin

因此，在 Sonata Admin 的编辑操作中，我试图根据*创建*或*编辑*上下文显示不同的表单字段。

也许先有一些背景..

我有一个与 OneToOne 绑定的 Gallery 实体和一个 CoverPhoto 实体。

**画廊：**

```
/**
 * @ORM\OneToOne(targetEntity="CoverImage", mappedBy="gallery", cascade={"all"}, orphanRemoval=true)
 **/
private $cover; 
```

**封面图片：**

```
/**
 * @ORM\OneToOne(targetEntity="Gallery", inversedBy="cover")
 **/
private $gallery; 
```

这是对应的**GalleryAdmin**类：

```
class GalleriesAdmin extends Admin
{
    protected function configureFormFields(FormMapper $formMapper)
    {
        $formMapper
                -> add('name', null, array('label' => 'Nazwa'))
                -> add('category', 'sonata_type_model', array('label' => 'Kategoria'), array('subject' => $this -> getSubject()))
                -> add('cover', 'sonata_type_admin', array('label' => 'Okładka'))
                -> add('images', 'sonata_type_collection', array('by_reference' => false, 'label' => 'Powiązane zdjęcia'), array(
                    'edit' => 'inline',
                    'sortable' => false,
                    'inline' => 'table',
                ))
            ;
    }

    //other stuff 
} 
```

在这里，我们使用**CoverImageAdmin**：

```
class CoverImagesAdmin extends Admin
{
    protected function configureFormFields(FormMapper $formMapper)
    {
        $formMapper
                -> add('path', 'thumbnail', array('label' => 'Miniatura'))
                -> add('file', 'file', array('required' => false, 'label' => 'Plik'))
        ;
    }
} 
```

“缩略图”是我的自定义表单字段，它显示缩略图（令人震惊）。但现在我希望这个字段只出现在“编辑”上下文中。

这应该是小菜一碟

```
$this -> getSubject() 
```

method of Admin class and condition. Unfortunately when I call getSubject() in CoverImagesAdmin class which is used to render nested form it always returns *null*. The same with getParent();

Calling getForm() results in

> Fatal error: Maximum function nesting level of '500' reached, aborting! in /home/flameheart/Projects/KolberPhotography/vendor/symfony/symfony/src/Symfony/Component /OptionsResolver/Options.php on line 350

I've tried to call about every method of Admin and FormMapper just to determine form's context but ended up with nothing.

Do you guys have any idea how to solve this in a clean way ?

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-01-06T12:58:11.420

I managed to do it this way:

```
protected function configureFormFields(FormMapper $formMapper)
{

    if($this -> getRoot() -> getSubject() -> getCover() && $this -> getRoot() -> getSubject() -> getCover() -> getId() )
    {
        $formMapper -> add('path', 'thumbnail', array('label' => 'Miniatura', 'attr' => array('id' => 'gallery_cover_image'), 'label_attr' => array('id' => 'gallery_cover_label')));
    }

    $formMapper -> add('file', 'file', array('required' => false, 'label' => 'Plik'));
} 
```

Imo, this Sonata thing really needs loads of documentation and refactoring instead of further development.

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2014-02-13T18:21:35.787

It's an old question, I know, but the cleanest way I have found of doing this is:

```
$this->id($this->getSubject()) 
```

If it returns true it is an edit form, if it is false, it is a create form.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-07-09T10:37:48.763

You can get the subject inside of an admin with `$this->subjectExists()` and you can check the context of the `configureFormFields()` admin function with a function `$this->subjectExists()`. If it's true, you're editing, otherwise you're creating!

# ruby-on-rails - 使捆绑器适用于具有不同 Rails 版本的许多 RoR 项目

> ID：13499805
> 
> 赞同：1
> 
> 时间：2012-11-21T18:32:14.417
> 
> 标签：ruby-on-rails, ruby, bundler

所以，似乎每个使用 bundler 的人都只有一个项目同时运行到他们的机器上。我现在正在处理两个项目，都是 RoR，前者使用 rails 3.0.5 并打算在 ruby​​ 1.8.7 上运行，而后者使用 3.2.9 并打算在 ruby​​ 1.9 上运行。 3，所以我希望两者都在我的机器上工作。我是这个 Ruby on Rails 东西的新手，所以正如我所见，每当你想让你的环境工作时，你必须配置你的 Gemfile 然后运行：

```
bundle install 
```

那么，每次我想运行它时，我是否必须为每个项目运行（并通过逻辑安装和卸载 gems）？

还有另一种方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T18:35:15.340

[RVM](https://rvm.io/)正是针对这种情况而设计的。

使用它，`.rvmrc`在每个项目的根目录中放置一个文件，它会自动为您切换 ruby​​ 版本。这几乎是有史以来最好的事情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T18:35:24.490

仅`bundler install`当您更改了`Gemfile`规范、重新安装 Ruby 或安装了未安装 gems 的较新版本，或者您想要更新您的`Gemfile.lock`.

创建 bundler 的原因是允许多个项目并行工作。在任何时候，我都有大约 15-20 个不同的应用程序，它们都由 bundler 管理，并且运行良好。

如果您想为每个项目切换到特定版本的 Ruby，您可以使用[rbenv](https://github.com/sstephenson/rbenv)或[rvm](http://rvm.io/)来管理它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-21T18:35:34.280

有两个答案：

*   rvm（红宝石版本管理器）
*   rbenv

两者都允许您使用不同版本的 gems、ruby 版本等创建环境。

两者都可以与捆绑器一起使用，只要您在“rake”之类的命令和其他命令前加上`bundle exec rake foo:bar`

# c# - C# 自动属性集

> ID：13499808
> 
> 赞同：-1
> 
> 时间：2012-11-21T18:32:32.537
> 
> 标签：c#, properties

我阅读了无数关于自动属性的文章，但无法找到不执行以下示例的理由。我在这里错过了什么吗？即有什么理由我应该在这个例子中使用常规属性？我经常这样做，而且效果很好。

在 StackOverflow 上的另一个线程（[具有额外逻辑的 C#3.0 自动属性](https://stackoverflow.com/questions/1620156/c3-0-automatic-properties-with-extra-logic)）中，答案被声明为否，如“否，自动实现的属性没有声明的实现。您希望提供的任何扩展实现都必须使用常规财产。”

```
 class Foobar
{
    public string Description { get; set; }
    public bool Scary { get; private set; }

    public void Describe(int size)
    {
        if (size <= 3)
        {
            switch (size)
            {
                case 1:
                    Description = "Cute";
                    Scary = false;
                    break;
                case 2:
                    Description = "Interesting";
                    Scary = false;
                    break;
                case 3:
                    Description = "Interesting";
                    Scary = false;
                    break;
            }                
        }
        else if (size > 4 && size < 10)
        {
            Description = "I'm sweating!";
            Scary = true;
        }
        else
        {
            Description = "I'm outta here - every man for himself";
            Scary = true;
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T18:36:22.930

您没有向属性的 get/set 方法添加代码，而是向*使用*get/set 属性的类添加了一个完全独立的方法。

如果有人直接使用 set 方法`Description`，`Scary`而不是使用`Describe`，则不会执行自定义逻辑。例如，没有什么能阻止某人做：`obj.Describe(10); obj.Description = "Cute";`. 如果你重载了`set`这些属性的方法，你可以阻止某人创建这样一个可爱而可怕的对象。

您所链接的问题的答案是完全正确的；您不能向自动实现的属性的 get/set 方法添加验证；如果你愿意，你需要明确定义 get/set 方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-21T18:58:36.027

您发布的代码使用了自动实现的属性，并且很好。

重要的是要从逻辑上理解，您的自动属性与此相同：

```
private string _description;
public string Description 
{ 
    get { return _description; }
    set { _description = value; }
}

private bool _scary;
public bool Scary 
{ 
    get { return _scary; }
} 
```

我认为理解这一点对于理解为什么*“您希望提供的任何扩展实现都必须使用常规属性”至关重要。*

自动属性只能在逻辑上等同于上述内容。换句话说，自动属性就是它。它相当于上面的代码的简写。

因此，如果您想在属性中包含其他或不同的逻辑，则不能使用自动属性。

例如，可以重构您的类（记住“可以”并不意味着“应该”）以完全取消`Describe`方法并将所有逻辑封装到属性中：

```
 class Foobar
{
    private int _size;

    public string Description 
    { 
        get 
        {    
            if (_size == 1)
            {
                return "Cute";
            }
            else if (_size < 4)
            {
                return "Interesting";
            }
            else if (_size < 10)
            {
                return "I'm sweating!";
            }
            else
            {
                return "I'm outta here - every man for himself";
            }
        }
    }

    public bool Scary 
    { 
        get
        {
            return _size > 3;
        }
    }

    public Foobar(int size) 
    {
        _size = size;
    }
} 
```

但是如果你这样做了，你就不能使用自动属性，因为你需要更多的逻辑，而不仅仅是一个简单的 get/set。

如果您只是在学习何时/如何使用自动属性，那么我建议您始终从写出“正常”属性开始。然后，如果您发现自己只是获取/设置支持变量，那么您可以重构以使用自动属性。

# neo4j - 如何使用 neo4j 和 cypher 或 gremlin 创建一个简单的协作过滤器

> ID：13499809
> 
> 赞同：2
> 
> 时间：2012-11-21T18:32:32.400
> 
> 标签：neo4j, cypher, gremlin

所以我想基于一个简单的协同过滤器向用户推荐帖子。过滤器应按如下方式工作

1.  在我喜欢的帖子中找到与我最相似的前 n 个用户（我的导师组）
2.  在这个导师组中找到我还没有喜欢的最受欢迎的帖子

所以我有第一部分，这会给我我的导师

```
START me=node:node_auto_index(uname = "mike")
MATCH me-[:LIKES]->posts<-[:LIKES]-mentors
RETURN person.uname, count(posts)
ORDER BY count(posts) DESC LIMIT 20; 
```

第二部分，在这些导师中找到我还没有喜欢的最喜欢的帖子。

我将如何在 cypher 或 gremlin 中运行第二部分，如果它更有效的话。它是一个两部分的查询，我必须将一个查询结果输入另一个查询，还是可以将它全部合并到一个查询中？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-21T23:57:28.977

我认为这可能会做你想要的：

```
p = [] as Set
g.V('uname','mike').out('likes').aggregate(p).in('likes').groupCount.cap.transform{it.sort{-it.value}[0..19].keySet()}.scatter.out('likes').except(p).groupCount.cap.sort{-it.value}[0..4] 
```

在哪里

```
g.V('uname','mike').out('likes').aggregate(p).in('likes').groupCount 
```

在哈希图中为您提供导师组，其值是他们的权重。接下来，我们选取​​其中的前 20 个（必须通过转换对其进行排序），然后找到这些人喜欢的所有帖子，除了您喜欢的帖子。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T09:59:46.847

[您可以在http://console.neo4j.org/r/meljiv](http://console.neo4j.org/r/meljiv)看到一个非常相似的示例，取自[http://docs.neo4j.org/chunked/snapshot/cypher-cookbook-similar-favorites.html](http://docs.neo4j.org/chunked/snapshot/cypher-cookbook-similar-favorites.html)。

```
START me=node:node_auto_index(name = "Joe")
MATCH me-[:favorite]->stuff<-[:favorite]-person
WHERE NOT(me-[:friend]-person)
RETURN person.name, count(stuff)
ORDER BY count(stuff) DESC 
```

# exception - symfony2 中的多单原则

> ID：13499810
> 
> 赞同：0
> 
> 时间：2012-11-21T18:32:43.753
> 
> 标签：exception, symfony, doctrine

我有很多相关的用户和组，然后删除在我得到的用户中使用的组：

> DBALException：执行“DELETE FROM Groups WHERE id = ?”时发生异常 带参数...完整性约束违规：1451 无法删除或更新父行：外键约束失败...
> 
> DBALException：执行“DELETE FROM Groups WHERE id = ?”时发生异常 带参数...完整性约束违规：1451 无法删除或更新父行：外键约束失败

...这是正常的，我如何捕捉异常，或者检查它是否以某种方式使用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T19:40:55.160

除了`ON DELETE`在数据库级别使用子句（这显然是优雅且独立于框架的方式）之外，您可能希望直接在代码中检查组的现有用户。在这种情况下，您可以执行另一个查询。

```
$em = $this->getDoctrine()->getEntityManager();

// Set your group id as the desired criterion
$criteria = array('GroupId' => $group->getId);

// Get all users that match the criterion
$users = $em->getRepository("YourBundle:User")->findBy($criteria);

// Check whether the returned array is empty
if(count($users) != 0){
    // Do your exception handling
}else {
    // Do regular operations, like deleting the group
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T06:36:32.537

如果要在删除组时删除组内的所有用户，可以告诉学说级联删除。所以元数据文件的 oneToMany 部分（比如 groups.orm.yml）看起来像

```
oneToMany:
    users:
        targetEntity: Users
        mappedBy: user
        cascade: [remove] 
```

更多信息在这里[http://docs.doctrine-project.org/en/2.0.x/reference/working-with-associations.html#transitive-persistence-cascade-operations](http://docs.doctrine-project.org/en/2.0.x/reference/working-with-associations.html#transitive-persistence-cascade-operations)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-21T18:52:01.493

这意味着您可能已经使用外键设置了数据库，如下所示：

```
|---------|
| User    |
|---------|
| id      |
| groupId |
|---------|

|-------|
| Group |
|-------|
| id    |
|-------| 
```

哪里`User.groupId`指`Group.id`。这意味着当您删除一个组时，您需要定义数据库应该对属于该组的用户做什么。

根据您的意图，可以更改您的外键约束来处理这种情况。你没有提到你正在使用什么数据库类型，但我知道在 MySQL 中你可以有一个`CONSTRAINT`with`ON DELETE`子句，并给它`RESTRICT`（默认，你现在看到的）选项，`CASCADE`（删除所有关联的用户与该组），并且`SET NULL`（为删除组的用户设置为）`groupId`。`NULL`

# xcode - 当 alpha 设置为 0.0 时，UIButton 是否会被禁用？

> ID：13499817
> 
> 赞同：26
> 
> 时间：2012-11-21T18:33:09.533
> 
> 标签：xcode, xamarin.ios, monodevelop

我的应用程序中有几个按钮，其 alpha 当前设置为零。这些按钮完全没有响应，但只要我增加它们的 alpha，它们就会开始响应。这是预期的行为吗？

* * *

## 回答 #1

> 赞同：54
> 
> 时间：2012-11-21T18:51:36.437

根据[Apple 的](http://developer.apple.com/library/ios/documentation/uikit/reference/uiview_class/uiview/uiview.html#//apple_ref/occ/instm/UIView/hitTest:withEvent:)'`UIView`方法文档`hitTest:withEvent:`：

> 此方法忽略隐藏、禁用用户交互或 alpha 级别小于 0.01 的视图对象。

因此任何`UIView`alpha 低于 0.01 的事件都会被触摸事件处理系统忽略，即**不会**接收到触摸。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-05-06T19:56:17.020

我玩游戏有点晚了，但您始终可以将 UIButton 背景颜色设置为 clearcolor。这将使他们保持活跃。就我而言，我正在跳动一个按钮以使其具有发光效果，但要做到这一点，我必须将其背景设置为清除，然后添加 UIIMageView 作为子视图并将效果添加到图像，而不是按钮。

希望这可以帮助其他人解决这个问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-21T18:40:16.267

当 alpha 为 0 时，它们没有响应，因为 alpha = 0 就像 hidden = YES 并且您无法单击隐藏按钮。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-12-12T16:16:02.433

是的，最小的 alpha 量应该是`3.0 / 255.0`不被忽略的触摸事件。

# google-maps-api-3 - 谷歌地图 v3 - 风格地图和切换地图类型

> ID：13499818
> 
> 赞同：1
> 
> 时间：2012-11-21T18:33:11.003
> 
> 标签：google-maps-api-3

我想要一张有 2 种地图类型的地图——一种是常规路线图，另一种是风格地图。我见过这样的例子，但今天似乎道路地图类型也显示了样式化的地图样式。

例如， [https://google-developers.appspot.com/maps/documentation/javascript/examples/maptype-styled-simple](https://google-developers.appspot.com/maps/documentation/javascript/examples/maptype-styled-simple)

如果您从“HipHop”地图类型切换到常规地图类型，您仍然会看到样式化地图。这在过去表现正确，就在今天我注意到行为上的差异。对此有什么补救措施吗？

最好的，乔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T18:59:35.463

我确认这是一个错误。如果您设置版本“v=3.9”，则不会发生。

# sql - 在逗号分隔的列表中查找标识符的唯一组合

> ID：13499822
> 
> 赞同：1
> 
> 时间：2012-11-21T18:33:30.957
> 
> 标签：sql, sql-server, tsql, permutation

我有一个复杂的查询，为了简单起见，我暂时将其结果存储在一个临时表中。我有一个逗号=分隔的三个字符唯一标识符组合的列表，例如下面的屏幕截图：

![在此处输入图像描述](../Images/ea7d52163a3c1fdddc2abb975e09ce9c.png)

您可以在第 2 行和第 3 行中看到 3 个字符标识符相同，但顺序相反。计数不同，但这些值是正确的（如果 X 和 Y 的人口规模不相等，则具有 X 和 Y 的人数与具有 Y 和 X 的人数不同）。我想找到所有药物的独特组合，无论它们出现的顺序如何。我设想类似于 a`row_number()`的分区，它为第 2 行和第 3 行提供 1 和 2。

我从来没有在 SQL 中尝试过这样的事情，但我的想法是这样的

```
select *,
    case when LEN(alldrugs)-LEN(replace(alldrugs,',',''))= 1 then 2 
         when LEN(alldrugs)-LEN(REPLACE(alldrugs,',',''))= 2 then 3
         when LEN(alldrugs)-LEN(REPLACE(alldrugs,',',''))= 3 then 4
         when LEN(alldrugs)-LEN(REPLACE(alldrugs,',',''))= 4 then 5
         when LEN(alldrugs)-LEN(REPLACE(alldrugs,',',''))= 5 then 6
         else 1 end as numDrugs
    from #testfix as tf
    order by alldrugs,numDrugs 
```

由于列表是用逗号分隔的，该`case when`语句查找一行中的逗号数并给出要查找的 3 位跨度数。对于包含 2 种药物（一个逗号）的 alldrugs 列，我可以将结果设为 CTE，在该 CTE 上自行加入并检查是否`right(alldrugs,3) = left(alldrugs,3)`. 这显然是不可扩展的。有没有一种惯用的方法来获得这样的独特组合？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T18:59:13.703

好的。这是一个想法，假设您在某处拥有所有可能的 3 个字母代码的列表。这个想法是扩展列表，所以每一行都有一行，然后重新组合结果。在另一个数据库中，您可以使用`group_concat`or `listagg`。对于 SQL Server，我们将不得不使用 set 函数。

展开列表：

```
with fulllist as (
    select yt.*, c.code, row_number() over (order by (select NULL)) as id
    from YourTable yt join
         Codes c
         on ','+yt.AllDrugs+',' like '%,'+c.code+',%'
   ) 
```

接下来，自联接是识别集合何时相同的一种方法。如果两组（“id”）具有相同数量的药物并且都匹配，那么它们是相同的。因此，对于原始表中的每一行，我们将找到具有相同药物的最小行。这成为用于分组目的的 id。

以下（未经测试的）查询实现了这一点：

```
with fulllist as (
    select yt.*, c.code
    from YourTable yt join
         Codes c
         on ','+yt.AllDrugs+',' like '%,'+c.code+',%'
   ),
   Pairs as (
    select id1, min(id2) as minId
    from (select fl1.id as id1, fl2.id as id2
          from (select fl.*, count(*) over (partition by yt.id) as NumCodes
                from fulllist fl
               ) fl1 join
               (select fl.* count(*) over (partition by yt.id
                from fulllist fl
               ) fl2
               on fl1.code = fl2.code and
                  fl1.NumCodes = fl2.NumCodes
          group by fl1.id, fl2.id
          having count(*) as fl1.NumCodes
         ) t
     group by id1
    )
select p.minId, min(fl.AllDrugs), sum(fl.DrugFamilyCounts)
from FullList fl join
     Pairs p
     on fl.id = p.minId
group by p.minId
order by 2 desc 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-21T19:32:44.507

假设您使用的是 SQL Server 2008+，您可以结合使用自定义`split`函数和`STUFF`函数将列表拆分和重新组合为排序顺序。然后，您可以在重新排列的列表中选择不同的，以获得唯一的组合。

`split`这是一个应该可以工作的简单函数（ [source](http://www.sqlteam.com/forums/topic.asp?TOPIC_ID=50648)）：

```
CREATE FUNCTION dbo.Split
(
    @RowData nvarchar(2000),
    @SplitOn nvarchar(5)
)  
RETURNS @RtnValue table 
(
    Id int identity(1,1),
    Data nvarchar(100)
) 
AS  
BEGIN 
    Declare @Cnt int
    Set @Cnt = 1

    While (Charindex(@SplitOn,@RowData)>0)
    Begin
        Insert Into @RtnValue (data)
        Select 
            Data = ltrim(rtrim(Substring(@RowData,1,Charindex(@SplitOn,@RowData)-1)))

        Set @RowData = Substring(@RowData,Charindex(@SplitOn,@RowData)+1,len(@RowData))
        Set @Cnt = @Cnt + 1
    End

    Insert Into @RtnValue (data)
    Select Data = ltrim(rtrim(@RowData))

    Return
END 
```

然后这是一个获取不同列表的查询：

```
select
  distinct
  STUFF((select ',' + data as [text()]
         from dbo.split(tf.alldrugs, ',')
         order by data
         FOR XML PATH('')) , 1 , 1 , '' ) as alldrugsordered

from
  TestFix tf 
```

演示：[http ://www.sqlfiddle.com/#!3/d890b/4](http://www.sqlfiddle.com/#!3/d890b/4)

样本输出：

```
| ALLDRUGSORDERED |
-------------------
|         H2F,H3A |
|             H2S |
|             H3A |
|         H3A,H4B |
|         H3A,H6H |
|             H4B |
|             H6H |
|             J7C | 
```

# python - 使用带有关键字参数的 map() 函数

> ID：13499824
> 
> 赞同：45
> 
> 时间：2012-11-21T18:33:34.023
> 
> 标签：python, arguments, map-function

这是我尝试使用该`map`功能的循环：

```
volume_ids = [1,2,3,4,5]
ip = '172.12.13.122'
for volume_id in volume_ids:
    my_function(volume_id, ip=ip) 
```

有没有办法我可以做到这一点？如果不是`ip`参数，那将是微不足道的，但我不确定如何处理。

* * *

## 回答 #1

> 赞同：89
> 
> 时间：2012-11-21T18:35:32.157

使用[`functools.partial()`](http://docs.python.org/2/library/functools.html#functools.partial)：

```
from functools import partial

mapfunc = partial(my_function, ip=ip)
map(mapfunc, volume_ids) 
```

`partial()`创建一个新的可调用对象，它会将任何参数（包括关键字参数）应用于包装函数，以及传递给该新可调用对象的任何内容。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2012-11-21T18:44:26.810

这是一种 lambda 方法（不是更好，只是不同）

```
volume_ids = [1,2,3,4,5]
ip = '172.12.13.122'
map(lambda ids: my_function(ids, ip), volume_ids); 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2014-03-05T22:17:15.343

这可以通过列表理解轻松完成。

```
volume_ids = [1,2,3,4,5]
ip = '172.12.13.122'
results = [my_function(i,ip=ip) for i in volume_ids] 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2018-06-02T01:53:11.870

通常，可以使用 map 将关键字传递给函数，方法是将函数包装在解包字典的东西中，然后将字典的可迭代传递给 map。例子：

```
from itertools import product

volume_ids = [1,2,3,4,5]
volume_ids = (("volume_id", volume_id) for volume_id in volume_ids)
ips = [("ip", '172.12.13.122')]
kwargs_iterable = map(dict, product(volume_ids, ips))

result = map(lambda kwargs: my_function(**kwargs), kwargs_iterable) 
```

但是，对于您的特殊情况，更简单的解决方案是：

```
map(my_function, volume_ids, [ip]*len(volume_ids)) 
```

这是简洁的，不依赖于任何导入。另一种可能性是结合 itertools 中的产品和星图：

```
from itertools import product, starmap

ips = [ip]
starmap(my_function, product(volume_ids, ips)) 
```

这很好地概括了具有多个 IP 地址或两个以上变量的设置。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-21T19:02:03.050

这个怎么样？

```
results = []
for volume_id in volume_ids:
    results.append(my_function(volume_id, ip=ip)) 
```

这是三行代码而不是一行 --- 它是三行清晰明了的代码，而不是从诸如此类的模块中导入一些特殊情况的帮助程序。这个论点可能是一个品味问题，但它有很大的分量，这取决于你和谁交谈。

# linux - 如何使用 grep、awk 等在 1 中显示 2 行

> ID：13499830
> 
> 赞同：0
> 
> 时间：2012-11-21T18:33:48.940
> 
> 标签：linux, bash, shell, grep

当我启动 bash 命令时，我得到了这个

```
--> '044'    0       ''                               0        
 1> ''                                0         0 
```

这是 1 个寄存器，我有更多寄存器，如何在 1 行中显示每个寄存器？如果可能的话，如何仅用 1 个空格分隔值？

我要这个：

```
'044' 0 '' 0 '' 0 0 
```

* * *

好吧，我把所有命令都放了，不要使用这个：

```
cdmao;(echo "SELECT nulog FROM POSTE WHERE numan='5512204';"|cuser|grep "\--"|grep -v nulog|cut -    c5-11;)|while read poste_id;do echo "SELECT key_id,genrtou,chiftp, sonsurson, mnemo, order_mla, key_mla FROM KEYBOARD WHERE poste_id='$poste_id';"|cuser| tr -s ' ' | 
while read line; do 
  if [[ $i == 1 ]]; then 
    echo -n "$line"; 
    let i+=1; 
  else 
    echo " $line"; 
    let i-=1; 
  fi; 
done 
```

我什么也没收到：只有这个>，没有完成命令

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T18:42:40.633

我假设前几个字符也是输出的一部分，但解决方案不依赖于它。

要删除多余的空格，您可以使用`tr -s`，这将删除传递的字符的重复。将未更改的输出与 tr-ed 输出（两种情况下的第三行和第四行）进行比较：

```
lynx@mobilis gemrb 0 $ echo "--> '044'    0       ''                               0        
>  1> ''                                0         0"
--> '044'    0       ''                               0        
 1> ''                                0         0
lynx@mobilis gemrb 0 $ echo "--> '044'    0       ''                               0        
 1> ''                                0         0" | tr -s ' '
--> '044' 0 '' 0 
 1> '' 0 0 
```

因此，唯一剩下的就是删除该换行符。您也可以使用`tr`( `-d`for delete) 来执行此操作，但是您还将删除将字符串与下一个寄存器分开的换行符。

我不知道这些寄存器转储有多稳定，所以这里有一个不涉及正则表达式的解决方案——它只打印包含换行符的行，每行包含一次：

```
i=1 
echo "--> '044'    0       ''                               0        
 1> ''                                0         0" | tr -s ' ' | 
while read line; do 
  if [[ $i == 1 ]]; then 
    echo -n "$line"; 
    let i+=1; 
  else 
    echo " $line"; 
    let i-=1; 
  fi; 
done
--> '044' 0 '' 0 1> '' 0 0 
```

要使用它，只需将`echo 'long register dump'`字符串替换为您的寄存器转储程序即可。

编辑：好的，如果这是您的整个命令链，那么您必须对它们进行分组，否则过滤器不会捕获它们的部分输出。但我想`cdmao`只是为了进行一些初始化（如果不是，请将所有内容添加到另一个子shell或大括号中）？

主要问题是您没有完成 while 循环（`done`某处丢失）。不确定我是否正确放置，但试试这个：

```
cdmao;
(echo "SELECT nulog FROM POSTE WHERE numan='5512204';"|cuser|grep "\--"|grep -v nulog|cut -    c5-11;) | 
while read poste_id; do
  echo "SELECT key_id,genrtou,chiftp, sonsurson, mnemo, order_mla, key_mla FROM KEYBOARD WHERE poste_id='$poste_id';"; 
done |cuser| tr -s ' ' | 
while read line; do 
  if [[ $i == 1 ]]; then 
    echo -n "$line"; 
    let i+=1; 
  else 
    echo " $line"; 
    let i-=1; 
  fi; 
done 
```

它可以以更漂亮的方式完成，但我不知道涉及的一些命令，所以我保持它接近你的版本。无论如何，使用一些格式和语法错误会更容易发现。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T18:35:51.230

这应该删除输出中所有额外的空格和换行符：

```
your_command_here | tr '\n' ' ' | sed "s/[ ]*/ /g" 
```

如果命令的部分输出除了 stdout 之外还写入 stderr，请执行以下操作：

```
your_command_here 2>&1 | tr '\n' ' ' | sed "s/[ ]*/ /g" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-21T23:49:58.860

```
your command | cut -d '>' -f 2- | paste - - | awk '{$1=$1;print}' 
```

# extjs - ExtJs hiddenName 配置

> ID：13499837
> 
> 赞同：0
> 
> 时间：2012-11-21T18:34:22.287
> 
> 标签：extjs, extjs4

阅读源代码，如果我在组合框中设置 hiddenName 配置，extjs 将创建一个隐藏在 dom 中的输入类型。

但是，要将此值发送到服务器，我需要手动创建一个 hiddenField：

我的组合：

```
xtype: 'combobox',
valueField: 'recid',
hiddenName : 'recid',
name: 'description',
submitValue:false,
displayField: 'description' 
```

我的隐藏字段：

```
xtype: 'hiddenfield',
name: 'recid' 
```

我的隐藏字段收到“recid”值。extjs 创建的隐藏输入接收“描述”值。

怎么了 ？

# windows-phone-7 - 偏航、俯仰和滚动值的延迟

> ID：13499838
> 
> 赞同：0
> 
> 时间：2012-11-21T18:34:22.170
> 
> 标签：windows-phone-7, accelerometer

我正在 windows phone 7.1 中开发一个应用程序，我需要手机在 x 和 y 轴上的当前度数旋转。我尝试使用运动 API 并使用它提供的偏航俯仰和滚动的适当值。但是它提供的值会延迟，因为如果我将手机移动得太快并将其旋转到 90 度，则相应的值需要一点时间才能到达那里，这违背了我的目的。

我在 Android 中做了同样的事情，我可以使用类似的东西来计算手机的即时旋转。

这件事可以在 wp7 上使用陀螺仪来完成，但我想使用加速度计，这样我就可以满足更多设备的需求。

任何有关如何实现目标的帮助将不胜感激

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T12:13:52.843

WP8 Motion API 也有类似的问题。延迟不是唯一的问题。似乎 Motion API 对各种罗盘（或磁力计）误差也非常敏感。更糟糕的是，这些不仅仅影响偏航。运动类 AHRS 算法似乎将俯仰和滚动与偏航耦合。结果，当指南针延迟或以其他方式变得疯狂时，俯仰和滚动也是如此。

我怀疑你可以不用陀螺仪。理论上，您只能从加速度计获得欧拉角（偏航角、俯仰角和滚动角），但前提是手机静止不动。最轻微的运动会导致线性/向心加速度，这会破坏您的方向计算。我想说，任何用手机等手持设备来做到这一点的尝试都注定要失败。此外，Motion API 本身除了加速度计之外还需要指南针和陀螺仪硬件。

无论如何，一切都不会丢失。我一起摆脱了 Motion 类，并按照 Sebastian Madgwick 的 IMU 算法实现了“我自己的”IMU。此处带有 C 代码的 IMU / AHRS 报告：

[http://www.x-io.co.uk/res/doc/madgwick_internal_report.pdf](http://www.x-io.co.uk/res/doc/madgwick_internal_report.pdf)

C源代码可以在这里找到：

[http://www.x-io.co.uk/open-source-imu-and-ahrs-algorithms/](http://www.x-io.co.uk/open-source-imu-and-ahrs-algorithms/)

有了适当的 beta 增益，Madgwick 的 IMU 就像在 Windows Phone 上的魅力一样。IMU 不提供偏航，只提供俯仰和滚动。它只使用陀螺仪和加速度计硬件。如果您也需要偏航，您可以实现上述两个来源中包含的完整 AHRS 算法。那当然也需要指南针。

Madgwick 算法不包括欧拉角计算（只是描述地球和传感器框架之间旋转的四元数），但您会从 Madgwick 的报告中找到方程式。

我没有完整的 AHRS（或 MARG，正如 Madgwick 所说）的经验。然而，该算法将罗盘偏航与俯仰和横滚计算分离，因此即使存在磁干扰，人们也可以期望获得合理的俯仰/横滚读数。

请注意，坐标系不同。在 WP 中，X=pitch 轴，Y=roll 轴，Z=yaw 轴。在上述算法中，Y=pitch，X=roll 和 Z=yaw。因此，您需要交换 X 和 Y 以及反转 Z 加速度的方向。您还需要反转陀螺仪速率（并交换 X 和 Y 速率）。

希望这可以帮助 ：）

# javascript - 通过 Javascript 获取网站数据

> ID：13499839
> 
> 赞同：0
> 
> 时间：2012-11-21T18:34:25.880
> 
> 标签：javascript

我读了这篇[文章](https://stackoverflow.com/questions/2686567/how-javascript-gets-someother-website-data)，并试图做同样的事情，但它不起作用。我在服务器上的javascript 文件“ **myscript.js ”是**

```
/*var win;
function openWindow(){
 win = */

window.open("http://www.yahoo.com","","menubar=no,toolbar=no,width=400,height=600");

/*}

function closeWindow(){
win.close();
}*/ 
```

服务器是真正的服务器，而不是本地主机服务器。

该文件的完整路径是**[http://eddyfreeman.woelmuis.nl/myscript.js](http://eddyfreeman.woelmuis.nl/myscript.js)** 并尝试从我的本地计算机运行以下页面，以便 javascript 文件将从以下页面打开一个新窗口::

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<title>Untitled Document</title>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
<script language="JavaScript" type="text/Javascript">
<!--
  document.write("<script type='text/javascript' src='" + document.location.protocol + "://www.eddyfreeman.woelmuis.nl/myscript.js'></script>"); 

    //-->
</script>
</head>

<body>
<h1>PAGE TESTING</h1>
</body>
</html> 
```

但它不工作。我只看到文本 TESTING PAGE 而不是文本前打开的窗口。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T18:41:28.933

您应该使用[协议相对 URL](http://paulirish.com/2010/the-protocol-relative-url/)并避免使用`document.write`添加脚本标记：

```
<script type='text/javascript' src='//www.eddyfreeman.woelmuis.nl/myscript.js'></script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T18:39:17.337

只需将您的 document.location.protocol 更改为“http”

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-21T18:41:23.153

你期待发生一些你没有告诉发生的事情。首先，您使用 document.write 包含不合适的脚本。这意味着加载已经发生（即 document.write 部分），因此无法解析脚本中包含的内容。如果你想这样做，你需要使用一个函数来代替。

在您的脚本文件中：

```
function openWindow() {
    window.open("http://www.yahoo.com","","menubar=no,toolbar=no,width=400,height=600");
} 
```

在您的 html 文件中：

```
<body onload="openWindow()"> 
```

但是，如果您使用 jQuery 来执行此操作会更好。但是，这可能有点超出您的 javascript 舒适区。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-21T18:48:51.303

```
var url = window.location.protocol + "//www.eddyfreeman.woelmuis.nl/myscript.js";
document.write("<script type='text/javascript' src='" + url + "'></scr"+"ipt>");​ 
```

[http://jsfiddle.net/6STLc/1/](http://jsfiddle.net/6STLc/1/)

一些东西。

`protocol`包括一个冒号。所以`window.location.protocol + "://foo.com"`产量`"http:://foo.com`不好。

`</script>`其次，当字符出现在 javascript 块中时，您必须小心，即使在字符串中也是如此。DOM 解析器注意到并认为您正在关闭脚本标记。如果你在一个语句或字符串的中间，这显然很糟糕。通常将结束脚本标记分解为 2 个字符串以避免此问题。

并避免使用`document.write`，但我不会在我的回答中讨论这个问题。

# c++ - 将浮点值映射到键是一对

> ID：13499844
> 
> 赞同：3
> 
> 时间：2012-11-21T18:34:58.743
> 
> 标签：c++

我正在尝试创建一个映射并将一个浮点值映射到类型为对的键。我无法使用显示功能显示地图。

```
#include <iostream>
#include <utility>
#include <iomanip>
#include <map>

using namespace std;
typedef pair<int, int> Key; //pair

void display (map <Key,float> &m) // to print maps
{
    cout << "\tTotal size: " << m.size() << endl; 
    map <Key,float>::iterator it;
    for (it = m.begin(); it != m.end(); ++it)
       cout << setw(10) << it->first << setw(5) << it->second << endl;

    cout << endl; 
}

int main() {

map< Key , float> mapa; //create map

Key p1 (1, 45); //key values
Key p2 (2, 20);

mapa[p1]= 25.11; //map float to keys
mapa[p2]= 11.23;

display(mapa); //display map

return 0;

} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-21T18:40:51.433

您正在尝试输出 a `std::pair`，这是您的键（即映射的第一个模板参数），但尚未为其定义流运算符。用这个：

```
std::cout << setw(10) << it->first.first
          << setw(5) << it->first.second
          << setw(5) << it->second
          << std::endl; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-21T18:41:36.767

您可以尝试以下方法：

```
for (it = m.begin(); it != m.end(); ++it)
   cout << '(' << setw(10) << it->first.first << ", " << setw(10) << it->first.second << ") -> " << setw(5) << it->second << endl; 
```

# sql-server-2008-r2 - TFS 2012 安装到数据库的连接失败

> ID：13499849
> 
> 赞同：2
> 
> 时间：2012-11-21T18:35:22.943
> 
> 标签：sql-server-2008-r2, database-connection, remote-server

我正在尝试在远程服务器上安装 TFS2012（我们将其称为开发服务器）。我将使用的数据库 (SQL Server 2008 R2) 位于单独的服务器 (db server) 上。当我进入连接屏幕时，出现错误。

您知道我用来登录开发服务器以安装 TFS 的管理员帐户是否还需要对我正在连接的数据库具有管理员权限？我目前有一个可以访问数据库的单独帐户。我已确保端口 1433 已打开并允许远程连接。防火墙也已关闭，并且没有阻止此端口。

有一个复选框可以使用预先存在的空数据库，但我应该在哪里指定空数据库名称？

（注意 - 服务器名称在图片中被部分涂黑） ![在此处输入图像描述](../Images/5c90ab8af9a1fef4d922f69c066f3623.png)

# python - Scipy：几个选定频率的傅立叶变换

> ID：13499852
> 
> 赞同：9
> 
> 时间：2012-11-21T18:35:30.103
> 
> 标签：python, scipy, fft

我`scipy.fft`在一个信号上使用，带有一个移动窗口来绘制频率随时间变化的幅度（这是[一个例子](http://www.presonus.com/uploads/products/media/images/PreSonus_Smaart_Spectra_in_VSL-copy.jpg)，时间在 X 上，频率在 Y 上，幅度是颜色）。

但是，我只对几个频率感兴趣（仅~3、4 个频率）。使用 FFT 似乎我不能只选择我想要的频率（因为显然频率范围是由算法决定的），所以我计算了很多无用的东西，`MemoryError`如果信号太强，我的程序甚至会崩溃长。

我该怎么办 ？我是否必须使用自定义傅立叶变换 - 在这种情况下，欢迎提供良好实现的链接 - 还是有`scipy`办法？

* * *

**编辑**

在@jfaller 回答之后，我决定（尝试）实现 Goertzel 算法。我想出了这个：[https](https://gist.github.com/4128537) ://gist.github.com/4128537 但它不起作用（频率 440 没有出现，没关系峰值，我没有费心应用适当的窗口）。有什么帮助！？我对DSP不好。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-21T19:37:05.667

您真的希望使用 Goertzel 算法：[http](http://en.wikipedia.org/wiki/Goertzel_algorithm) ://en.wikipedia.org/wiki/Goertzel_algorithm 。基本上，它是单点的 FFT，如果您只需要信号中有限数量的频率，它是有效的。如果您在从 Wikipedia 中分离算法时遇到问题，请回复，我会帮助您。此外，如果您搜索一些资源，则存在用 python 编写的 DTMF 解码器（按键式电话解码器）。你可以看看他们是怎么做的。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-11-22T11:49:24.803

在@jfaller、@eryksun 的大力帮助下……我在 Python 中实现了一个简单的 Goertzel 算法：[https](https://gist.github.com/4128537) ://gist.github.com/4128537 。我会在这里重新粘贴。正如@eryksun 提到的，可以使用`scipy.signal.lfilter`and对其进行优化`lfiltic`，但目前我会坚持使用它，因为我可能想用另一种语言实现它：

```
import math

def goertzel(samples, sample_rate, *freqs):
    """
    Implementation of the Goertzel algorithm, useful for calculating individual
    terms of a discrete Fourier transform.

    `samples` is a windowed one-dimensional signal originally sampled at `sample_rate`.

    The function returns 2 arrays, one containing the actual frequencies calculated,
    the second the coefficients `(real part, imag part, power)` for each of those frequencies.
    For simple spectral analysis, the power is usually enough.

    Example of usage : 

        # calculating frequencies in ranges [400, 500] and [1000, 1100]
        # of a windowed signal sampled at 44100 Hz

        freqs, results = goertzel(some_samples, 44100, (400, 500), (1000, 1100))
    """
    window_size = len(samples)
    f_step = sample_rate / float(window_size)
    f_step_normalized = 1.0 / window_size

    # Calculate all the DFT bins we have to compute to include frequencies
    # in `freqs`.
    bins = set()
    for f_range in freqs:
        f_start, f_end = f_range
        k_start = int(math.floor(f_start / f_step))
        k_end = int(math.ceil(f_end / f_step))

        if k_end > window_size - 1: raise ValueError('frequency out of range %s' % k_end)
        bins = bins.union(range(k_start, k_end))

    # For all the bins, calculate the DFT term
    n_range = range(0, window_size)
    freqs = []
    results = []
    for k in bins:

        # Bin frequency and coefficients for the computation
        f = k * f_step_normalized
        w_real = 2.0 * math.cos(2.0 * math.pi * f)
        w_imag = math.sin(2.0 * math.pi * f)

        # Doing the calculation on the whole sample
        d1, d2 = 0.0, 0.0
        for n in n_range:
            y  = samples[n] + w_real * d1 - d2
            d2, d1 = d1, y

        # Storing results `(real part, imag part, power)`
        results.append((
            0.5 * w_real * d1 - d2, w_imag * d1,
            d2**2 + d1**2 - w_real * d1 * d2)
        )
        freqs.append(f * sample_rate)
    return freqs, results

if __name__ == '__main__':
    # quick test
    import numpy as np
    import pylab

    # generating test signals
    SAMPLE_RATE = 44100
    WINDOW_SIZE = 1024
    t = np.linspace(0, 1, SAMPLE_RATE)[:WINDOW_SIZE]
    sine_wave = np.sin(2*np.pi*440*t) + np.sin(2*np.pi*1020*t)
    sine_wave = sine_wave * np.hamming(WINDOW_SIZE)
    sine_wave2 = np.sin(2*np.pi*880*t) + np.sin(2*np.pi*1500*t)
    sine_wave2 = sine_wave2 * np.hamming(WINDOW_SIZE)

    # applying Goertzel on those signals, and plotting results
    freqs, results = goertzel(sine_wave, SAMPLE_RATE, (400, 500),  (1000, 1100))

    pylab.subplot(2, 2, 1)
    pylab.title('(1) Sine wave 440Hz + 1020Hz')
    pylab.plot(t, sine_wave)

    pylab.subplot(2, 2, 3)
    pylab.title('(1) Goertzel Algo, freqency ranges : [400, 500] and [1000, 1100]')
    pylab.plot(freqs, np.array(results)[:,2], 'o')
    pylab.ylim([0,100000])

    freqs, results = goertzel(sine_wave2, SAMPLE_RATE, (400, 500),  (1000, 1100))

    pylab.subplot(2, 2, 2)
    pylab.title('(2) Sine wave 660Hz + 1200Hz')
    pylab.plot(t, sine_wave2)

    pylab.subplot(2, 2, 4)
    pylab.title('(2) Goertzel Algo, freqency ranges : [400, 500] and [1000, 1100]')
    pylab.plot(freqs, np.array(results)[:,2], 'o')
    pylab.ylim([0,100000])

    pylab.show() 
```

# jquery - Python jquery 网页游戏

> ID：13499856
> 
> 赞同：1
> 
> 时间：2012-11-21T18:35:37.910
> 
> 标签：jquery, python, mongodb, web, web.py

我正在尝试开发基于网络的文本策略游戏。这个想法包括在太空中，看到雷达屏幕，四处移动，攻击其他玩家，挖掘行星等等。

我尝试过的当前技术是：

*   用于服务器端游戏引擎/数据库查询的 Python
*   用于托管数据库的 Mongodb
*   Web.py 用于提供网页。
*   Jquery 用于网站上的界面。
*   HTML5 W/canvas 用于显示雷达，这将只是对我当前位置附近的简单查询。

目前发展阶段：

Python：

我编写了一个基于文本的命令行游戏，它通过一些扫描和移动数据库周围的玩家对象。

蒙古数据库：

数据库已设置并运行良好。我能够操作对象和查询对象。

网络.py：

目前支持 'localhost:8080('/', '/register', '/game') 当你到达时，它有一个非常简单的登录框，它不使用真正的身份验证，而是一个简单的 db.users.find({})验证用户。稍后我将对此进行扩展，但是对于与朋友进行的简单测试，我还不太担心安全性。如果他们输入了错误的值，它将滚动到 /register，他们可以在其中创建帐户。然后将它们放入 /game 中，我可以从表单（'name'）中提取用户名并打印一个简单的 Hello %name。

查询：

能够执行 jquery 脚本来操作 div 等等。

HTML5：

还没有真正的开发，但 HTML 是我的强项，所以我现在还不担心。

挑战：

我遇到的真正障碍是试图弄清楚如何向用户提供带有 jquery 的 *.html 页面，并将其发布到我的后端 python 脚本，以对数据库执行查询或更新，或者执行一些战斗代码以及什么不是。

我一直在阅读所有不同的技术和框架，但我还没有真正找到完全符合我需要的东西，或者我缺乏经验使我无法理解如何实现它。

我想知道是否有一种简单的方法可以编写一个 jquery(post) 将数据发布到 python 中，以便我编写的函数可以基于 jquery(post) 执行查询或更新并返回用户请求的数据

我观看了一个发布到 php 的 youtube 教程，它看起来非常简单，但是每当我搜索发布到 python 时，我得到的结果很少，几乎所有人都宣称他们的框架最适合这个。我几乎想知道我是否不应该只切换到 php。

你们能指出我正确的方向吗？我需要废弃 web.py 并切换到 ajax 和 mod_python 吗？

我应该认真阅读 django 的文档吗？

这个周末我的网速非常慢，我希望我能找到正确的研究方向，所以当我周六回到我的位置时，我可以开始研究策略游戏的网络部分。

代码示例：

web.py 脚本：

```
import web
from web import form
import pymongo

db = pymongo.Connection('localhost', 27017).bbarnes_test
render = web.template.render('templates/')
urls = (
  '/', 'index',
  '/register', 'register',
  '/game', 'game')

app = web.application(urls, globals(), True)

login = form.Form(
    form.Textbox("Username",
                form.notnull),
    form.Password("Password",
        form.notnull))

class index:
    def GET(self):
        form = login()
        return render.formtest(form)

    def POST(self):
        form = login()
        if not form.validates():
            return render.formtest(form)
        else:
                        uname = db.users.find_one({'name' : form.d.Username, 'pw' : form.d.Password})

                        if uname != None:
                                return render.game(uname['name'])
                        else:
                                raise web.seeother('/register')

class register:
        def GET(self):
                form = login()
                return render.register(form)

        def POST(self):
                form = login()
                if not form.validates():
                        return render.register(form)
                else:
                        db.users.insert({'name' : form.d.Username, 'pw' : form.d.Password})
                uname = db.users.find_one({'name' : form.d.Username})
                raise web.seeother('/')

class game:
        def GET(self):
                return render.game(form)

if __name__=="__main__":
    web.internalerror = web.debugerror
    app.run()
~ 
```

游戏.html

```
$def with(uname)
<html>
<!DOCTYPE html>
<head>
<script type="text/javascript" src="../static/jquery.js"></script>
<script type="text/javascript">
J = jQuery;
J(document).ready(function(){
        J("p").click(function(){
                J(this).hide();
        });
});

</script>

<title>The Game</title>
</head

<body>
<p> This is a test of jQuery.</p>
<p> Welcome to the game $uname</p>

</body>

</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T19:10:58.070

如果您认为您的 Python 脚本与您的 Web 基础设施是分开的，那么您的想法是错误的。当您谈论对 Web 应用程序进行 POST 之类的 HTTP 调用以操作数据库中的数据时，这就是 Web 服务。我的大部分经验是使用 Pyramid + Cornice 和 Django + Piston（呃），但 web.py 相当有能力，应该能够做到这一点。 [这篇博客文章](http://johnpaulett.com/2008/09/20/getting-restful-with-webpy/)很旧，但看起来很有希望。搜索“RESTful web services python”或类似的东西也会有更多的运气。

# mono - 使用 Yum 在 CentOS 上安装 Mono 和 mod_mono

> ID：13499859
> 
> 赞同：3
> 
> 时间：2012-11-21T18:35:49.653
> 
> 标签：mono, centos, yum, centos6, mod-mono

我一直在试图找到一种让 Mono 进入 Yum 的方法，这里有一个类似的问题：

[使用 YUM 在 Centos 5.5 上安装 Mono](https://stackoverflow.com/questions/3510320/install-mono-on-centos5-5-using-yum)

但是，这已经过时了 - 以下存储库不再存在：http: [//download.opensuse.org/repositories/Mono/RHEL_5/](http://download.opensuse.org/repositories/Mono/RHEL_5/)

[http://ftp.novell.com/pub/mono/download-stable/RHEL_5/](http://ftp.novell.com/pub/mono/download-stable/RHEL_5/)

我可以使用另一个存储库吗？

更新：

*   我宁愿使用 CentOS 6 但如果需要可以降级到 5
*   你可以在 CentOS 5 上运行 'yum groupinstall Mono' 和 'yum install mod_mono' 如果你有额外的存储库，但不是 CentOS 6。这也是 Mono (v1) 的一个非常旧的版本（来源[https://www.centos .org/modules/newbb/viewtopic.php?topic_id=22669](https://www.centos.org/modules/newbb/viewtopic.php?topic_id=22669)）
*   这里有一个 repo，我还没有尝试过，但也很旧： http: [//go-mono.com/monovs-download/latest/RHEL_5/](http://go-mono.com/monovs-download/latest/RHEL_5/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-23T13:57:49.360

您可以通过键入以下命令来安装单声道：

```
yum install mono
yum install xsp
yum install mod_mono 
```

# java - WSDL 文件上的 JAX-WS 错误：“解析组件 's:schema' 时出错”

> ID：13499860
> 
> 赞同：24
> 
> 时间：2012-11-21T18:35:50.503
> 
> 标签：java, jaxb, wsdl, jax-ws, wsimport

## 错误

我在 Java 项目中使用 wsimport 为三个 SOAP Web 服务生成源。前两个工作正常：我使用 JAX-WS Maven 插件来抓取 WSDL 文件并生成相应的 Java 源文件。

这对于一项 Web 服务失败；我收到以下错误：

```
[jaxws:wsimport]
Processing: /home/me/NetBeansProjects/Admin/AdminWeb/src/wsdl/erp-app-devel.srv.mycompany.ca/EgTestReportEngine/Service.asmx.wsdl
jaxws:wsimport args: [-s, /home/me/NetBeansProjects/Admin/AdminWeb/target/generated-sources/jaxws-wsimport, -d, /home/me/NetBeansProjects/Admin/AdminWeb/target/classes, -verbose, -catalog, /home/me/NetBeansProjects/Admin/AdminWeb/src/jax-ws-catalog.xml, -wsdllocation, http://erp-app-devel.srv.mycompany.ca/EgTestReportEngine/Service.asmx?WSDL, -target, 2.0, -extension, -Xnocompile, /home/me/NetBeansProjects/Admin/AdminWeb/src/wsdl/erp-app-devel.srv.mycompany.ca/EgTestReportEngine/Service.asmx.wsdl]
parsing WSDL...

src-resolve.4.2: Error resolving component 's:schema'. It was detected that 's:schema' is in namespace 'http://www.w3.org/2001/XMLSchema', but components from this namespace are not referenceable from schema document 'file:/home/me/NetBeansProjects/Admin/AdminWeb/src/wsdl/erp-app-devel.srv.mycompany.ca/EgTestReportEngine/Service.asmx.wsdl#types?schema1'. If this is the incorrect namespace, perhaps the prefix of 's:schema' needs to be changed. If this is the correct namespace, then an appropriate 'import' tag should be added to 'file:/home/me/NetBeansProjects/Admin/AdminWeb/src/wsdl/erp-app-devel.srv.mycompany.ca/EgTestReportEngine/Service.asmx.wsdl#types?schema1'.
  line 80 of file:/home/me/NetBeansProjects/Admin/AdminWeb/src/wsdl/erp-app-devel.srv.mycompany.ca/EgTestReportEngine/Service.asmx.wsdl#types?schema1

undefined element declaration 's:schema'
  line 80 of file:/home/me/NetBeansProjects/Admin/AdminWeb/src/wsdl/erp-app-devel.srv.mycompany.ca/EgTestReportEngine/Service.asmx.wsdl

undefined element declaration 's:schema'
  line 127 of file:/home/me/NetBeansProjects/Admin/AdminWeb/src/wsdl/erp-app-devel.srv.mycompany.ca/EgTestReportEngine/Service.asmx.wsdl

undefined element declaration 's:schema'
  line 142 of file:/home/me/NetBeansProjects/Admin/AdminWeb/src/wsdl/erp-app-devel.srv.mycompany.ca/EgTestReportEngine/Service.asmx.wsdl 
```

* * *

## 罪魁祸首

此 WSDL 文件与有效文件之间的区别在于错误消息中指出的行，第 80、127 和 142 行：

```
<s:element ref="s:schema" /> 
```

注意：wsdl 文件的根元素定义了“s”命名空间，因此：

```
xmlns:s="http://www.w3.org/2001/XMLSchema" 
```

* * *

## 我试过的

我已经完成了我的研究。看起来其他人也有类似的问题，从“只是不使用`<s:element ref="s:schema" />`”到“使用导入标签”的解决方案，到一些显然在旧的 java.net 论坛上的不可知的解决方案（在它被删除之前，现代亚历山大 Java 知识图书馆的纵火案）。

*   我尝试将以下导入语句放在包含问题标签的元素内：`<s:import namespace="http://www.w3.org/2001/XMLSchema" schemaLocation="http://www.w3.org/2001/XMLSchema.xsd" />`. wsimport 给了我一个新错误：

    ```
    [jaxws:wsimport]
    Processing: /home/me/NetBeansProjects/Admin/AdminWeb/src/wsdl/erp-app-devel.srv.mycompany.ca/EgTestReportEngine/Service.asmx.wsdl
    jaxws:wsimport args: [-s, /home/me/NetBeansProjects/Admin/AdminWeb/target/generated-sources/jaxws-wsimport, -d, /home/me/NetBeansProjects/Admin/AdminWeb/target/classes, -verbose, -catalog, /home/me/NetBeansProjects/Admin/AdminWeb/src/jax-ws-catalog.xml, -wsdllocation, http://erp-app-devel.srv.mycompany.ca/EgTestReportEngine/Service.asmx?WSDL, -target, 2.0, -extension, -Xnocompile, /home/me/NetBeansProjects/Admin/AdminWeb/src/wsdl/erp-app-devel.srv.mycompany.ca/EgTestReportEngine/Service.asmx.wsdl]
    parsing WSDL...

    Element "{http://www.w3.org/2001/XMLSchema}annotation" shows up in more than one properties.
      line 248 of http://www.w3.org/2001/XMLSchema.xsd

    The following location is relevant to the above error
      line 242 of http://www.w3.org/2001/XMLSchema.xsd

    Property "Any" is already defined. Use &lt;jaxb:property> to resolve this conflict.
      line 108 of file:/home/me/NetBeansProjects/Admin/AdminWeb/src/wsdl/erp-app-devel.srv.mycompany.ca/EgTestReportEngine/Service.asmx.wsdl

    The following location is relevant to the above error
      line 109 of file:/home/me/NetBeansProjects/Admin/AdminWeb/src/wsdl/erp-app-devel.srv.mycompany.ca/EgTestReportEngine/Service.asmx.wsdl

    Property "Any" is already defined. Use &lt;jaxb:property> to resolve this conflict.
      line 184 of file:/home/me/NetBeansProjects/Admin/AdminWeb/src/wsdl/erp-app-devel.srv.mycompany.ca/EgTestReportEngine/Service.asmx.wsdl

    The following location is relevant to the above error
      line 185 of file:/home/me/NetBeansProjects/Admin/AdminWeb/src/wsdl/erp-app-devel.srv.mycompany.ca/EgTestReportEngine/Service.asmx.wsdl

    Property "Any" is already defined. Use &lt;jaxb:property> to resolve this conflict.
      line 199 of file:/home/me/NetBeansProjects/Admin/AdminWeb/src/wsdl/erp-app-devel.srv.mycompany.ca/EgTestReportEngine/Service.asmx.wsdl

    The following location is relevant to the above error
      line 200 of file:/home/me/NetBeansProjects/Admin/AdminWeb/src/wsdl/erp-app-devel.srv.mycompany.ca/EgTestReportEngine/Service.asmx.wsdl 
    ```

    此错误中引用的第 108 行和第 109 行是：（第 184-5、199-200 行类似）

    ```
    <s:any minOccurs="0" maxOccurs="unbounded" namespace="http://www.w3.org/2001/XMLSchema" processContents="lax" />
    <s:any minOccurs="1" namespace="urn:schemas-microsoft-com:xml-diffgram-v1" processContents="lax" /> 
    ```

*   我尝试将 jaxws-maven-plugin 从 1.10 升级到 2.2。同样的问题。

*   [这是一个可能的解决方案](http://weblogs.java.net/blog/vivekp/archive/2007/05/how_to_deal_wit.html)——我试图弄清楚如何使用 JAX-WS Maven 插件来实现它。有什么提示吗？

* * *

## 结论

有任何想法吗？您需要任何进一步的信息吗？为简洁起见，我省略了 pom.xml 和 Service.asmx.wsdl 文件，但如果其中包含更重要的信息，可以包含它们。

谢谢！

* * *

## 附加物

[这是另一个有同样问题的人](https://forums.oracle.com/forums/thread.jspa?threadID=437672)，如果这对任何潜在的回答者有帮助的话。 [这是另一个类似的问题。](http://www.jitterbit.com/PhpBB/viewtopic.php?f=4&t=319) 我不是很了解[这篇文章](http://msdn.microsoft.com/en-gb/magazine/cc188755.aspx#S2)，但似乎暗示我必须手动解析 SOAP XML！恐怖！

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-11-22T00:44:02.620

我通过将[Vivek Pandey 的方法](http://weblogs.java.net/blog/vivekp/archive/2007/05/how_to_deal_wit_1.html)适应Maven 解决了这个问题，同时更新到 jaxws-maven-plugin 2.2。为了后代，我将在这里重申：

## 概括

[将此 XJB 定制文件](http://weblogs.java.net/blog/kohsuke/archive/20070228/xsd.xjb)（见下文）放在您的默认绑定文件目录中，并设置 wsimport 以绑定它和[http://www.w3.org/2001/XMLSchema.xsd](http://www.w3.org/2001/XMLSchema.xsd)。

## XJB定制

上述 XML 文件 xsd.xjb 的内容应该放在您的默认绑定文件目录中，如下所示（归功于 Kohsuke）：

```
<?xml version="1.0" encoding="UTF-8"?>
<bindings xmlns="http://java.sun.com/xml/ns/jaxb"
          xmlns:xsd="http://www.w3.org/2001/XMLSchema"
          xmlns:xjc="http://java.sun.com/xml/ns/jaxb/xjc"
          version="2.0">

  <globalBindings>
    <xjc:simple />
  </globalBindings>

  <bindings scd="~xsd:complexType">
    <class name="ComplexTypeType"/>
  </bindings>

  <bindings scd="~xsd:simpleType">
    <class name="SimpleTypeType"/>
  </bindings>

  <bindings scd="~xsd:group">
    <class name="GroupType"/>
  </bindings>

  <bindings scd="~xsd:attributeGroup">
    <class name="AttributeGroupType"/>
  </bindings>

  <bindings scd="~xsd:element">
    <class name="ElementType"/>
  </bindings>

  <bindings scd="~xsd:attribute">
    <class name="attributeType"/>
  </bindings>
</bindings> 
```

## 聚甲醛

这是我的 POM 文件的相关部分，并注明了更改：

```
<plugin>
    <!-- CHANGE: updated groupId and version -->
    <groupId>org.jvnet.jax-ws-commons</groupId>
    <artifactId>jaxws-maven-plugin</artifactId>
    <version>2.2</version>
    <executions>
        <execution> 
            <goals>
                <goal>wsimport</goal>
            </goals>
            <configuration>
                <!-- CHANGE: added args tag to bind http://www.w3.org/2001/XMLSchema.xsd -->
                <args>
                    <arg>-b</arg><arg>http://www.w3.org/2001/XMLSchema.xsd</arg>
                </args>
                <wsdlFiles>
                    <wsdlFile>erp-app-devel.srv.mycompany.ca/EgTestReportEngine/Service.asmx.wsdl</wsdlFile>
                </wsdlFiles>
                <wsdlLocation>http://erp-app-devel.srv.mycompany.ca/EgTestReportEngine/Service.asmx.wsdl</wsdlLocation>
                <staleFile>${project.build.directory}/jaxws/stale/Service.asmx.stale</staleFile>
                <!-- CHANGE: added bindingFiles tag to bind XJB customization, located at the default binding files directory, MyProject/src/jaxws/xsd.xjb . -->
                <bindingFiles>
                    <bindingFile>xsd.xjb</bindingFile>
                </bindingFiles>
            </configuration>
            <id>wsimport-generate-egtestreportengine</id>
            <phase>generate-sources</phase>
        </execution>
    </executions>
    <dependencies>
        <dependency>
            <groupId>javax.xml</groupId>
            <artifactId>webservices-api</artifactId>
            <version>1.4</version>
        </dependency>
    </dependencies>
    <configuration>
        <sourceDestDir>${project.build.directory}/generated-sources/jaxws-wsimport</sourceDestDir>
        <xnocompile>true</xnocompile>
        <verbose>true</verbose>
        <extension>true</extension>
        <catalog>${basedir}/src/jax-ws-catalog.xml</catalog>
        <target>2.0</target>
    </configuration>
</plugin> 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2015-08-12T13:17:51.183

要使 Nick 的解决方案起作用，您可能必须将这两个 jvm 参数添加到您的 pom.xml 所以当遇到这些错误时：

> org.xml.sax.SAXParseException；系统标识：http : [//www.w3.org/2001/XMLSchema.xsd](http://www.w3.org/2001/XMLSchema.xsd)；行号：67；列号：11；外部 DTD：无法读取外部 DTD“XMLSchema.dtd”，因为 accessExternalDTD 属性设置的限制不允许“http”访问。
> 
> [警告] schema_reference：无法读取架构文档“xml.xsd”，因为 accessExternalSchema 属性设置的限制不允许“http”访问。[http://www.w3.org/2001/XMLSchema.xsd](http://www.w3.org/2001/XMLSchema.xsd)的第 91 行

只需将它们添加到您的 pom.xml

```
-Djavax.xml.accessExternalDTD=all
-Djavax.xml.accessExternalSchema=all

<vmArgs>
    <vmArg>-Djavax.xml.accessExternalDTD=all</vmArg>
    <vmArg>-Djavax.xml.accessExternalSchema=all</vmArg>
</vmArgs> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-07-13T13:36:55.253

使用以下命令修复了相同的问题：

`wsimport -b http://www.w3.org/2001/XMLSchema.xsd -b xsd.xjb service.wsdl`

其中`xsd.xjb`指的是：

```
<?xml version="1.0" encoding="UTF-8"?>
<bindings xmlns="http://java.sun.com/xml/ns/jaxb"
          xmlns:xsd="http://www.w3.org/2001/XMLSchema"
          xmlns:xjc="http://java.sun.com/xml/ns/jaxb/xjc"
          version="2.0">

  <globalBindings>
    <xjc:simple />
  </globalBindings>

  <bindings scd="~xsd:complexType">
    <class name="ComplexTypeType"/>
  </bindings>

  <bindings scd="~xsd:simpleType">
    <class name="SimpleTypeType"/>
  </bindings>

  <bindings scd="~xsd:group">
    <class name="GroupType"/>
  </bindings>

  <bindings scd="~xsd:attributeGroup">
    <class name="AttributeGroupType"/>
  </bindings>

  <bindings scd="~xsd:element">
    <class name="ElementType"/>
  </bindings>

  <bindings scd="~xsd:attribute">
    <class name="attributeType"/>
  </bindings>
</bindings> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-21T23:56:25.407

如果您实际上并不关心模型数据的这一特定位，您可以使用 JAXB 绑定文件告诉 JAXB 将有问题的位映射到类型为 DOM 的属性，`Element`而不是实际尝试将它们数据绑定到正常JAXB 类。[非官方](http://jaxb.java.net/guide/Avoid_strong_databinding.html#Mapping_to_DOM)的JAXB 指南有一节介绍这种技术。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-03-20T14:05:57.530

这似乎最终对我有用。我正在使用 apache maven cfx 插件

```
 <plugin>
                <groupId>org.apache.cxf</groupId>
                <artifactId>cxf-codegen-plugin</artifactId>
                <executions>
                    <execution>
                        <id>generate-sources</id>
                        <phase>generate-sources</phase>
                        <configuration>
                            <additionalJvmArgs>
                                -Djavax.xml.accessExternalDTD=all
                            </additionalJvmArgs>
                            <sourceRoot>${basedir}/src/main/generated</sourceRoot> 
                            <wsdlOptions>
                                <wsdlOption>
                                    <extraargs>
                                        <extraarg>-autoNameResolution</extraarg>
                                        <extraarg>-impl</extraarg>
                                        <extraarg>-verbose</extraarg>
                                        <extraarg>-b</extraarg>
                                        <extraarg>http://www.w3.org/2001/XMLSchema.xsd</extraarg>

                                        <extraarg>-p</extraarg>
                                        <extraarg>com.nevado.travelstudio</extraarg>
                                    </extraargs>
                                    <!-- <bindingFiles> <bindingFile>${basedir}/src/main/resources/wsdl/mybindings.xjb</bindingFile> 
                                        </bindingFiles> -->
                                    <wsdl>${basedir}/src/main/resources/wsdl/B2.wsdl</wsdl>
                                </wsdlOption>
                            </wsdlOptions>
                        </configuration>
                        <goals>
                            <goal>wsdl2java</goal>
                        </goals>
                    </execution>
                </executions>
            </plugin> 
```

除了这些更改，我还必须在 ..java/jdk/jre/lib 文件夹中创建具有以下属性的**jaxp.properties文件**

```
 -Djavax.xml.accessExternalDTD=all 
```

# c - 仅从文本文件中读取 C 中的数字

> ID：13499866
> 
> 赞同：3
> 
> 时间：2012-11-21T18:36:02.760
> 
> 标签：c, text, numbers

如何从文本文件中仅读取 C 中的数字。除了空格、符号、回车和字母。

这就是我阅读文本的方式：

```
unsigned char symb, symb1;

FileIn = fopen("InCode.txt","rt"); 
while (!feof(FileIn))
    {
       symb=getc(FileIn);
       symb1=symb;
       printf("%c",symb1);
     } 
```

这是它应该如何工作的：

```
/* Data in the file: */
12hj2 3h23j1

/* Output: */
1223231 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T18:54:53.733

或者你可以`isdigit`从`ctype.h`图书馆使用。

```
while ( ( symb = getc( FileIn ) ) != EOF ) {
    if( isdigit( symb ) != 0 )
        printf("% c",symb);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-21T18:42:04.130

尝试这个 ：

```
 char symb ;
        unsigned char symb1;
        FILE *FileIn;
        FileIn = fopen("InCode.txt","rt"); // Haven't checked fopen failure
        while ((symb=getc(FileIn))!=EOF)
            {
               symb1= (unsigned char) symb;  
               if(symb1 >= '0' && symb1 <='9')
                 printf("%c",symb1);
             } 
```

如果`symb`是在`0`你`9`打印它之间。并丢弃您提到的所有其他字符`space`，`newline`, `alphabats`(lower & upper) ，任何其他符号。

# java - TouchListener 正在覆盖 ClickListener

> ID：13499867
> 
> 赞同：2
> 
> 时间：2012-11-21T18:36:04.257
> 
> 标签：java, android

我有一个带 SlidingDrawer 的 RelativeLayout。我将抽屉用作菜单。当您单击抽屉中的某个项目时，它会将 ImageView 添加到 RelativeLayout。我希望能够移动 ImageView。

我为 SlidingDrawer 中的每个菜单项使用 ClickListener。这部分效果很好。对于我添加到 RelativeView 的对象，我设置了一个 TouchListener。对于要添加的 ImageView，我设置了一个 TouchListener。但添加一个 ImageView 后，菜单项不再起作用。TouchListener 接管控制，而 ClickListener 被绕过。

这是代码：

```
 OnClickListener navClickListener;  //This is set for each menu item
    OnTouchListener objectTouchListener  //This is set for each new ImageView

    navClickListener = new OnClickListener(){
        @Override
        public void onClick(View v){
            performClickAction(v);
        }
    };

    objectTouchListener = new OnTouchListener(){
        @Override
        public boolean onTouch(View v, MotionEvent event){
            performTouchAction(v, event);
            return false;
        }
    }; 
```

为什么 TouchListener 会覆盖 ClickListener，我该如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T20:59:47.933

事实证明，OnTouch 根本没有覆盖 OnClick。图像被添加到布局中，并为两个轴设置了 MATCH_PARENT 并占据了整个屏幕。由于图像是一个圆圈，它似乎并没有占据整个屏幕，侧面的按钮也清晰可见，但 ImageView 显然占据了整个屏幕。

感谢那些回复的人！

# jquery - 使用数组模式 jQuery 访问输入名称

> ID：13499868
> 
> 赞同：1
> 
> 时间：2012-11-21T18:36:04.400
> 
> 标签：jquery

我正在尝试通过 jQuery 访问以下输入名称，以便根据一组可能的选项更改它们的状态属性。标记如下：

```
<input name="extra[00]" id="extra[00]" type="text" class="optional-field extra " value="" disabled="disabled">
<input name="extra[01]" id="extra[01]" type="text" class="optional-field extra " value="" disabled="disabled">
<input name="extra[02]" id="extra[02]" type="text" class="optional-field extra " value="" disabled="disabled">
<input name="extra[20]" id="extra[20]" type="text" class="optional-field extra " value="" disabled="disabled">
<input name="extra[21]" id="extra[21]" type="text" class="optional-field extra " value="" disabled="disabled">
<input name="extra[30]" id="extra[30]" type="text" class="optional-field extra " value="" disabled="disabled"> 
```

name="extra[XX]" 中的第一个数字表示一个组，这就是它可能重复的原因，而第二个数字设置顺序。我正在尝试这个，但找不到获得第二个可能元素的方法：

```
var id = jQuery(this).val(); // Changes from a drop-down
var extra = jQuery('input[name="extra[' + id + ']"]'); 
```

是否可以通过 id=2 ( ) 来计算 DOM 中有多少“额外”元素`jQuery('input[name="extra[2*]"]')`？

提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T18:40:03.343

尝试这个

```
$('input[name^="extra\\[2"]').length 
```

需要用**\\转义****[**

 **这将为您提供以`name="extra[2"`

**^**是`attribute starts with selector`.

**[检查小提琴](http://jsfiddle.net/sushanth009/qp4PQ/)**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-21T18:43:06.593

您可以使用`$("#container input[name=^extra]");`选择所有以 开头的元素`extra`。然后只需计算该列表中的元素数量。:)**

# php - Wordpress 主题选项不会保存

> ID：13499869
> 
> 赞同：2
> 
> 时间：2012-11-21T18:36:09.983
> 
> 标签：php, wordpress, themes, wordpress-theming, options

我创建了一个主要基于 21 主题的自定义主题。我正在尝试添加主题选项。在主题选项页面上，我为“Header Font Family”和“General Font Family”创建了一个文本字段，其想法是用户应该能够用他们喜欢的任何字体系列替换默认字体来更改他们的字体主题。默认值有效（将 CSS 代码添加到站点），但如果我尝试更改文本框中的文本，新设置将不会保存，并且默认值会重新加载到选项页面的文本框中。其他非文本框选项在更改时将正确更新。

下面是 theme-options.php 的代码。非常感谢任何帮助，如有必要，我可以提供更多代码（options.php？functions.php？）。

```
 <?php
/**
 * Somewhere In Between Theme Options
 *
 * @package WordPress
 * @subpackage Somewhere_In_Between
 * @since Somewhere In Between 1.0
 */

/**
 * Properly enqueue styles and scripts for our theme options page.
 *
 * This function is attached to the admin_enqueue_scripts action hook.
 *
 * @since Somewhere In Between 1.0
 *
 */
function somewhereinbetween_admin_enqueue_scripts( $hook_suffix ) {
    wp_enqueue_style( 'somewhereinbetween-theme-options', get_template_directory_uri() . '/inc/theme-options.css', false, '2011-04-28' );
    wp_enqueue_script( 'somewhereinbetween-theme-options', get_template_directory_uri() . '/inc/theme-options.js', array( 'farbtastic' ), '2011-06-10' );
    wp_enqueue_style( 'farbtastic' );
}
add_action( 'admin_print_styles-appearance_page_theme_options', 'somewhereinbetween_admin_enqueue_scripts' );

/**
 * Register the form setting for our somewhereinbetween_options array.
 *
 * This function is attached to the admin_init action hook.
 *
 * This call to register_setting() registers a validation callback, somewhereinbetween_theme_options_validate(),
 * which is used when the option is saved, to ensure that our option values are complete, properly
 * formatted, and safe.
 *
 * @since Somewhere In Between 1.0
 */
function somewhereinbetween_theme_options_init() {

    register_setting(
        'somewhereinbetween_options',       // Options group, see settings_fields() call in somewhereinbetween_theme_options_render_page()
        'somewhereinbetween_theme_options', // Database option, see somewhereinbetween_get_theme_options()
        'somewhereinbetween_theme_options_validate' // The sanitization callback, see somewhereinbetween_theme_options_validate()
    );

    // Register our settings field group
    add_settings_section(
        'general', // Unique identifier for the settings section
        '', // Section title (we don't want one)
        '__return_false', // Section callback (we don't want anything)
        'theme_options' // Menu slug, used to uniquely identify the page; see somewhereinbetween_theme_options_add_page()
    );

    // Register our individual settings fields
    add_settings_field( 'header_font_family', __( 'Header Font Family',     'somewhereinbetween' ), 'somewhereinbetween_settings_field_header_font_family', 'theme_options', 'general' );
    add_settings_field( 'general_font_family', __( 'General Font Family',     'somewhereinbetween' ), 'somewhereinbetween_settings_field_general_font_family', 'theme_options', 'general' );
    add_settings_field( 'link_color', __( 'Link Color',     'somewhereinbetween' ), 'somewhereinbetween_settings_field_link_color', 'theme_options', 'general' );
    add_settings_field( 'layout',     __( 'Default Layout', 'somewhereinbetween' ), 'somewhereinbetween_settings_field_layout',     'theme_options', 'general' );
}
add_action( 'admin_init', 'somewhereinbetween_theme_options_init' );

/**
 * Change the capability required to save the 'somewhereinbetween_options' options group.
 *
 * @see somewhereinbetween_theme_options_init() First parameter to register_setting() is the name of the options group.
 * @see somewhereinbetween_theme_options_add_page() The edit_theme_options capability is used for viewing the page.
 *
 * By default, the options groups for all registered settings require the manage_options capability.
 * This filter is required to change our theme options page to edit_theme_options instead.
 * By default, only administrators have either of these capabilities, but the desire here is
 * to allow for finer-grained control for roles and users.
 *
 * @param string $capability The capability used for the page, which is manage_options by default.
 * @return string The capability to actually use.
 */
function somewhereinbetween_option_page_capability( $capability ) {
    return 'edit_theme_options';
}
add_filter( 'option_page_capability_somewhereinbetween_options', 'somewhereinbetween_option_page_capability' );

/**
 * Add our theme options page to the admin menu, including some help documentation.
 *
 * This function is attached to the admin_menu action hook.
 *
 * @since Somewhere In Between 1.0
 */
function somewhereinbetween_theme_options_add_page() {
    $theme_page = add_theme_page(
        __( 'Theme Options', 'somewhereinbetween' ),   // Name of page
        __( 'Theme Options', 'somewhereinbetween' ),   // Label in menu
        'edit_theme_options',                    // Capability required
        'theme_options',                         // Menu slug, used to uniquely identify the page
        'somewhereinbetween_theme_options_render_page' // Function that renders the options page
    );

    if ( ! $theme_page )
        return;

    add_action( "load-$theme_page", 'somewhereinbetween_theme_options_help' );
}
add_action( 'admin_menu', 'somewhereinbetween_theme_options_add_page' );

function somewhereinbetween_theme_options_help() {

    $help = '<p>' . __( 'Some themes provide customization options that are grouped together on a Theme Options screen. If you change themes, options may change or disappear, as they are theme-specific. Your current theme, Somewhere In Between, provides the following Theme Options:', 'somewhereinbetween' ) . '</p>' .
            '<ol>' .
                '<li>' . __( '<strong>Link Color</strong>: You can choose the color used for text links on your site. You can enter the HTML color or hex code, or you can choose visually by clicking the "Select a Color" button to pick from a color wheel.', 'somewhereinbetween' ) . '</li>' .
                '<li>' . __( '<strong>Default Layout</strong>: You can choose if you want your site&#8217;s default layout to have a sidebar on the left or the right.', 'somewhereinbetween' ) . '</li>' .
            '</ol>' .
            '<p>' . __( 'Remember to click "Save Changes" to save any changes you have made to the theme options.', 'somewhereinbetween' ) . '</p>';

    $sidebar = '<p><strong>' . __( 'For more information:', 'somewhereinbetween' ) . '</strong></p>' .
        '<p>' . __( '<a href="http://codex.wordpress.org/Appearance_Theme_Options_Screen" target="_blank">Documentation on Theme Options</a>', 'somewhereinbetween' ) . '</p>' .
        '<p>' . __( '<a href="http://wordpress.org/support/" target="_blank">Support Forums</a>', 'somewhereinbetween' ) . '</p>';

    $screen = get_current_screen();

    if ( method_exists( $screen, 'add_help_tab' ) ) {
        // WordPress 3.3
        $screen->add_help_tab( array(
            'title' => __( 'Overview', 'somewhereinbetween' ),
            'id' => 'theme-options-help',
            'content' => $help,
            )
        );

        $screen->set_help_sidebar( $sidebar );
    } else {
        // WordPress 3.2
        add_contextual_help( $screen, $help . $sidebar );
    }
}

/**
 * Returns an array of color schemes registered for Somewhere In Between.
 *
 * @since Somewhere In Between 1.0
 */
function somewhereinbetween_color_schemes() {
    $color_scheme_options = array(
        'light' => array(
            'value' => 'light',
            'label' => __( 'Light', 'somewhereinbetween' ),
            'thumbnail' => get_template_directory_uri() . '/inc/images/light.png',
            'default_link_color' => '#1b8be0',
            'default_header_font_family' => 'Futura, "Trebuchet MS", Arial, sans-serif',
            'default_general_font_family' => 'Verdana, Arial, Helvetica, sans-serif',
        ),
        'dark' => array(
            'value' => 'dark',
            'label' => __( 'Dark', 'somewhereinbetween' ),
            'thumbnail' => get_template_directory_uri() . '/inc/images/dark.png',
            'default_link_color' => '#e4741f',
            'default_header_font_family' => 'Futura, "Trebuchet MS", Arial, sans-serif',
            'default_general_font_family' => 'Verdana, Arial, Helvetica, sans-serif',
        ),
    );

    return apply_filters( 'somewhereinbetween_color_schemes', $color_scheme_options );
}

/**
 * Returns an array of layout options registered for Somewhere In Between.
 *
 * @since Somewhere In Between 1.0
 */
function somewhereinbetween_layouts() {
    $layout_options = array(
        'content-sidebar' => array(
            'value' => 'content-sidebar',
            'label' => __( 'Content on left', 'somewhereinbetween' ),
            'thumbnail' => get_template_directory_uri() . '/inc/images/content-sidebar.png',
        ),
        'sidebar-content' => array(
            'value' => 'sidebar-content',
            'label' => __( 'Content on right', 'somewhereinbetween' ),
            'thumbnail' => get_template_directory_uri() . '/inc/images/sidebar-content.png',
        ),
    );

    return apply_filters( 'somewhereinbetween_layouts', $layout_options );
}

/**
 * Returns the default options for Somewhere In Between.
 *
 * @since Somewhere In Between 1.0
 */
function somewhereinbetween_get_default_theme_options() {
    $default_theme_options = array(
        'color_scheme' => 'light',
        'link_color'   => somewhereinbetween_get_default_link_color( 'light' ),
        'header_font_family'   => somewhereinbetween_get_default_header_font_family( 'light' ),
        'general_font_family'   => somewhereinbetween_get_default_general_font_family( 'light' ),
        'theme_layout' => 'content-sidebar',
    );

    if ( is_rtl() )
        $default_theme_options['theme_layout'] = 'sidebar-content';

    return apply_filters( 'somewhereinbetween_default_theme_options', $default_theme_options );
}

/**
 * Returns the default link color for Somewhere In Between, based on color scheme.
 *
 * @since Somewhere In Between 1.0
 *
 * @param $string $color_scheme Color scheme. Defaults to the active color scheme.
 * @return $string Color.
*/
function somewhereinbetween_get_default_link_color( $color_scheme = null ) {
    if ( null === $color_scheme ) {
        $options = somewhereinbetween_get_theme_options();
        $color_scheme = $options['color_scheme'];
    }

    $color_schemes = somewhereinbetween_color_schemes();
    if ( ! isset( $color_schemes[ $color_scheme ] ) )
        return false;

    return $color_schemes[ $color_scheme ]['default_link_color'];
}

/**
 * Returns the default header font family for Somewhere In Between, based on color scheme.
 *
 * @since Somewhere In Between 1.0
 *
 * @param $string $color_scheme Color scheme. Defaults to the active color scheme.
 * @return $string Color.
*/
function somewhereinbetween_get_default_header_font_family( $color_scheme = null ) {
    if ( null === $color_scheme ) {
        $options = somewhereinbetween_get_theme_options();
        $color_scheme = $options['color_scheme'];
    }

    $color_schemes = somewhereinbetween_color_schemes();
    if ( ! isset( $color_schemes[ $color_scheme ] ) )
        return false;

    return $color_schemes[ $color_scheme ]['default_header_font_family'];
}

/**
 * Returns the default general font family for Somewhere In Between, based on color scheme.
 *
 * @since Somewhere In Between 1.0
 *
 * @param $string $color_scheme Color scheme. Defaults to the active color scheme.
 * @return $string Color.
*/
function somewhereinbetween_get_default_general_font_family( $color_scheme = null ) {
    if ( null === $color_scheme ) {
        $options = somewhereinbetween_get_theme_options();
        $color_scheme = $options['color_scheme'];
    }

    $color_schemes = somewhereinbetween_color_schemes();
    if ( ! isset( $color_schemes[ $color_scheme ] ) )
        return false;

    return $color_schemes[ $color_scheme ]['default_general_font_family'];
}

/**
 * Returns the options array for Somewhere In Between.
 *
 * @since Somewhere In Between 1.0
 */
function somewhereinbetween_get_theme_options() {
    return get_option( 'somewhereinbetween_theme_options', somewhereinbetween_get_default_theme_options() );
}

/**
 * Renders the Color Scheme setting field.
 *
 * @since Somewhere In Between 1.0
 */
function somewhereinbetween_settings_field_color_scheme() {
    $options = somewhereinbetween_get_theme_options();

    foreach ( somewhereinbetween_color_schemes() as $scheme ) {
    ?>
    <div class="layout image-radio-option color-scheme">
    <label class="description">
        <input type="radio" name="somewhereinbetween_theme_options[color_scheme]" value="<?php echo esc_attr( $scheme['value'] ); ?>" <?php checked( $options['color_scheme'], $scheme['value'] ); ?> />
        <input type="hidden" id="default-color-<?php echo esc_attr( $scheme['value'] ); ?>" value="<?php echo esc_attr( $scheme['default_link_color'] ); ?>" />
        <input type="hidden" id="default-header-font-family-<?php echo esc_attr( $scheme['value'] ); ?>" value="<?php echo esc_attr( $scheme['default_header_font_family'] ); ?>" />
        <input type="hidden" id="default-general-font-family-<?php echo esc_attr( $scheme['value'] ); ?>" value="<?php echo esc_attr( $scheme['default_general_font_family'] ); ?>" />
        <span>
            <img src="<?php echo esc_url( $scheme['thumbnail'] ); ?>" width="136" height="122" alt="" />
            <?php echo $scheme['label']; ?>
        </span>
    </label>
    </div>
    <?php
    }
}

/**
 * Renders the Link Color setting field.
 *
 * @since Somewhere In Between 1.0
 */
function somewhereinbetween_settings_field_link_color() {
    $options = somewhereinbetween_get_theme_options();
    ?>
    <input type="text" name="somewhereinbetween_theme_options[link_color]" id="link-color" value="<?php echo esc_attr( $options['link_color'] ); ?>" />
    <a href="#" class="pickcolor hide-if-no-js" id="link-color-example"></a>
    <input type="button" class="pickcolor button hide-if-no-js" value="<?php esc_attr_e( 'Select a Color', 'somewhereinbetween' ); ?>" />
    <div id="colorPickerDiv" style="z-index: 100; background:#eee; border:1px solid #ccc; position:absolute; display:none;"></div>
    <br />
    <span><?php printf( __( 'Default color: %s', 'somewhereinbetween' ), '<span id="default-color">' . somewhereinbetween_get_default_link_color( $options['color_scheme'] ) . '</span>' ); ?></span>
    <?php
}

/**
 * Renders the Header Font Family setting field.
 *
 * @since Somewhere In Between 1.0
 */
function somewhereinbetween_settings_field_header_font_family() {
    $options = somewhereinbetween_get_theme_options();
    ?>
    <input type="text" name="somewhereinbetween_theme_options[header_font_family]" id="header-font-family" value="<?php echo esc_attr( $options['header_font_family'] ); ?>" />
    <br />
    <span><?php printf( __( 'Default header font family: %s', 'somewhereinbetween' ), '<span id="default-header-font-family">' . somewhereinbetween_get_default_header_font_family ( $options['color_scheme'] ) . '</span>' ); ?></span>
    <?php
}

/**
 * Renders the General Font Family setting field.
 *
 * @since Somewhere In Between 1.0
 */
function somewhereinbetween_settings_field_general_font_family() {
    $options = somewhereinbetween_get_theme_options();
    ?>
    <input type="text" name="somewhereinbetween_theme_options[general_font_family]" id="general-font-family" value="<?php echo esc_attr( $options['general_font_family'] ); ?>" />
    <br />
    <span><?php printf( __( 'Default general font family: %s', 'somewhereinbetween' ), '<span id="default-general-font-family">' . somewhereinbetween_get_default_general_font_family ( $options['color_scheme'] ) . '</span>' ); ?></span>
    <?php
}

/**
 * Renders the Layout setting field.
 *
 * @since Somewhere In Between 1.0
 */
function somewhereinbetween_settings_field_layout() {
    $options = somewhereinbetween_get_theme_options();
    foreach ( somewhereinbetween_layouts() as $layout ) {
        ?>
        <div class="layout image-radio-option theme-layout">
        <label class="description">
            <input type="radio" name="somewhereinbetween_theme_options[theme_layout]" value="<?php echo esc_attr( $layout['value'] ); ?>" <?php checked( $options['theme_layout'], $layout['value'] ); ?> />
            <span>
                <img src="<?php echo esc_url( $layout['thumbnail'] ); ?>" width="136" height="122" alt="" />
                <?php echo $layout['label']; ?>
            </span>
        </label>
        </div>
        <?php
    }
}

/**
 * Returns the options array for Somewhere In Between.
 *
 * @since Somewhere In Between 1.2
 */
function somewhereinbetween_theme_options_render_page() {
    ?>
    <div class="wrap">
        <?php screen_icon(); ?>
        <?php $theme_name = function_exists( 'wp_get_theme' ) ? wp_get_theme() : get_current_theme(); ?>
        <h2><?php printf( __( '%s Theme Options', 'somewhereinbetween' ), $theme_name ); ?></h2>
        <?php settings_errors(); ?>

        <form method="post" action="options.php">
            <?php
                settings_fields( 'somewhereinbetween_options' );
                do_settings_sections( 'theme_options' );
                submit_button();
            ?>
        </form>
    </div>
    <?php
}

/**
 * Sanitize and validate form input. Accepts an array, return a sanitized array.
 *
 * @see somewhereinbetween_theme_options_init()
 * @todo set up Reset Options action
 *
 * @since Somewhere In Between 1.0
 */
function somewhereinbetween_theme_options_validate( $input ) {
    $output = $defaults = somewhereinbetween_get_default_theme_options();

    // Color scheme must be in our array of color scheme options
    if ( isset( $input['color_scheme'] ) && array_key_exists( $input['color_scheme'], somewhereinbetween_color_schemes() ) )
        $output['color_scheme'] = $input['color_scheme'];

    // Our defaults for the header/general font families andlink color may have changed, based on the color scheme.
    $output['link_color'] = $defaults['link_color'] = somewhereinbetween_get_default_link_color( $output['color_scheme'] );

    // Link color must be 3 or 6 hexadecimal characters
    if ( isset( $input['link_color'] ) && preg_match( '/^#?([a-f0-9]{3}){1,2}$/i', $input['link_color'] ) )
        $output['link_color'] = '#' . strtolower( ltrim( $input['link_color'], '#' ) );

    // Theme layout must be in our array of theme layout options
    if ( isset( $input['theme_layout'] ) && array_key_exists( $input['theme_layout'], somewhereinbetween_layouts() ) )
        $output['theme_layout'] = $input['theme_layout'];

    return apply_filters( 'somewhereinbetween_theme_options_validate', $output, $input, $defaults );
}

/**
 * Enqueue the styles for the current color scheme.
 *
 * @since Somewhere In Between 1.0
 */
function somewhereinbetween_enqueue_color_scheme() {
    $options = somewhereinbetween_get_theme_options();
    $color_scheme = $options['color_scheme'];

    if ( 'dark' == $color_scheme )
        wp_enqueue_style( 'dark', get_template_directory_uri() . '/colors/dark.css', array(), null );

    do_action( 'somewhereinbetween_enqueue_color_scheme', $color_scheme );
}
add_action( 'wp_enqueue_scripts', 'somewhereinbetween_enqueue_color_scheme' );

/**
 * Add a style block to the theme for the current link color.
 *
 * This function is attached to the wp_head action hook.
 *
 * @since Somewhere In Between 1.0
 */
function somewhereinbetween_print_link_color_style() {
    $options = somewhereinbetween_get_theme_options();
    $link_color = $options['link_color'];

    $default_options = somewhereinbetween_get_default_theme_options();

    // Don't do anything if the current link color is the default.
    if ( $default_options['link_color'] == $link_color )
        return;
?>
    <style>
        /* Link color */
        a,
        #site-title a:focus,
        #site-title a:hover,
        #site-title a:active,
        .entry-title a:hover,
        .entry-title a:focus,
        .entry-title a:active,
        .widget_somewhereinbetween_ephemera .comments-link a:hover,
        section.recent-posts .other-recent-posts a[rel="bookmark"]:hover,
        section.recent-posts .other-recent-posts .comments-link a:hover,
        .format-image footer.entry-meta a:hover,
        #site-generator a:hover, #access ul a:hover
        { color: <?php echo $link_color; ?>; }
        section.recent-posts .other-recent-posts .comments-link a:hover {
            border-color: <?php echo $link_color; ?>;
        }
        article.feature-image.small .entry-summary p a:hover,
        .entry-header .comments-link a:hover,
        .entry-header .comments-link a:focus,
        .entry-header .comments-link a:active,
        .feature-slider a.active {
            background-color: <?php echo $link_color; ?>;
        }
    </style>
<?php
}
add_action( 'wp_head', 'somewhereinbetween_print_link_color_style' );

/**
 * Add a style block to the theme for the current header font family.
 *
 * This function is attached to the wp_head action hook.
 *
 * @since Somewhere In Between 1.0
 */
function somewhereinbetween_print_header_font_family() {
    $options = somewhereinbetween_get_theme_options();
    $header_font_family = $options['header_font_family'];

    $default_options = somewhereinbetween_get_default_theme_options();

?>
    <style>
        /* Header font family */
        h1,h2,h3,h4,h5,h6, #access,
        #site-title,
        .entry-title,
        { font-family: <?php echo $header_font_family; ?>; }
    </style>
<?php
}
add_action( 'wp_head', 'somewhereinbetween_print_header_font_family' );

/**
 * Add a style block to the theme for the current general font family.
 *
 * This function is attached to the wp_head action hook.
 *
 * @since Somewhere In Between 1.0
 */
function somewhereinbetween_print_general_font_family() {
    $options = somewhereinbetween_get_theme_options();
    $general_font_family = $options['general_font_family'];

    $default_options = somewhereinbetween_get_default_theme_options();

?>
    <style>
        /* General font family */
        #page
        { font-family: <?php echo $general_font_family; ?>; }
    </style>
<?php
}
add_action( 'wp_head', 'somewhereinbetween_print_general_font_family' );

/**
 * Adds Somewhere In Between layout classes to the array of body classes.
 *
 * @since Somewhere In Between 1.0
 */
function somewhereinbetween_layout_classes( $existing_classes ) {
    $options = somewhereinbetween_get_theme_options();
    $current_layout = $options['theme_layout'];

    if ( in_array( $current_layout, array( 'content-sidebar', 'sidebar-content' ) ) )
        $classes = array( 'two-column' );
    else
        $classes = array( 'one-column' );

    if ( 'content-sidebar' == $current_layout )
        $classes[] = 'right-sidebar';
    elseif ( 'sidebar-content' == $current_layout )
        $classes[] = 'left-sidebar';
    else
        $classes[] = $current_layout;

    $classes = apply_filters( 'somewhereinbetween_layout_classes', $classes, $current_layout );

    return array_merge( $existing_classes, $classes );
}
add_filter( 'body_class', 'somewhereinbetween_layout_classes' );

/**
 * Implements Somewhere In Between theme options into Theme Customizer
 *
 * @param $wp_customize Theme Customizer object
 * @return void
 *
 * @since Somewhere In Between 1.0
 */
function somewhereinbetween_customize_register( $wp_customize ) {
    $wp_customize->get_setting( 'blogname' )->transport = 'postMessage';
    $wp_customize->get_setting( 'blogdescription' )->transport = 'postMessage';

    $options  = somewhereinbetween_get_theme_options();
    $defaults = somewhereinbetween_get_default_theme_options();

    $wp_customize->add_setting( 'somewhereinbetween_theme_options[color_scheme]', array(
        'default'    => $defaults['color_scheme'],
        'type'       => 'option',
        'capability' => 'edit_theme_options',
    ) );

    $schemes = somewhereinbetween_color_schemes();
    $choices = array();
    foreach ( $schemes as $scheme ) {
        $choices[ $scheme['value'] ] = $scheme['label'];
    }

    // Link Color (added to Color Scheme section in Theme Customizer)
    $wp_customize->add_setting( 'somewhereinbetween_theme_options[link_color]', array(
        'default'           => somewhereinbetween_get_default_link_color( $options['color_scheme'] ),
        'type'              => 'option',
        'sanitize_callback' => 'sanitize_hex_color',
        'capability'        => 'edit_theme_options',
    ) );

    $wp_customize->add_control( new WP_Customize_Color_Control( $wp_customize, 'link_color', array(
        'label'    => __( 'Link Color', 'somewhereinbetween' ),
        'section'  => 'colors',
        'settings' => 'somewhereinbetween_theme_options[link_color]',
    ) ) );

    $wp_customize->add_setting( 'somewhereinbetween_theme_options[header_font_family]', array(
        'default'           => somewhereinbetween_get_default_header_font_family( $options['color_scheme'] ),
        'type'              => 'option',
        'sanitize_callback' => 'sanitize_key',
        'capability'        => 'edit_theme_options',
    ) );

    $wp_customize->add_setting( 'somewhereinbetween_theme_options[general_font_family]', array(
        'default'           => somewhereinbetween_get_default_general_font_family( $options['color_scheme'] ),
        'type'              => 'option',
        'sanitize_callback' => 'sanitize_key',
        'capability'        => 'edit_theme_options',
    ) );

    // Default Layout
    $wp_customize->add_section( 'somewhereinbetween_layout', array(
        'title'    => __( 'Layout', 'somewhereinbetween' ),
        'priority' => 50,
    ) );

    $wp_customize->add_setting( 'somewhereinbetween_theme_options[theme_layout]', array(
        'type'              => 'option',
        'default'           => $defaults['theme_layout'],
        'sanitize_callback' => 'sanitize_key',
    ) );

    $layouts = somewhereinbetween_layouts();
    $choices = array();
    foreach ( $layouts as $layout ) {
        $choices[$layout['value']] = $layout['label'];
    }

    $wp_customize->add_control( 'somewhereinbetween_theme_options[theme_layout]', array(
        'section'    => 'somewhereinbetween_layout',
        'type'       => 'radio',
        'choices'    => $choices,
    ) );
}
add_action( 'customize_register', 'somewhereinbetween_customize_register' );

/**
 * Bind JS handlers to make Theme Customizer preview reload changes asynchronously.
 * Used with blogname and blogdescription.
 *
 * @since Somewhere In Between 1.3
 */
function somewhereinbetween_customize_preview_js() {
    wp_enqueue_script( 'somewhereinbetween-customizer', get_template_directory_uri() . '/inc/theme-customizer.js', array( 'customize-preview' ), '20120523', true );
}
add_action( 'customize_preview_init', 'somewhereinbetween_customize_preview_js' ); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T18:42:25.347

看看你的`register_setting()`清理回调；看来您尚未添加选项：

```
function somewhereinbetween_theme_options_validate( $input ) {
    $output = $defaults = somewhereinbetween_get_default_theme_options();

    // Color scheme must be in our array of color scheme options
    if ( isset( $input['color_scheme'] ) && array_key_exists( $input['color_scheme'], somewhereinbetween_color_schemes() ) )
        $output['color_scheme'] = $input['color_scheme'];

    // Our defaults for the header/general font families andlink color may have changed, based on the color scheme.
    $output['link_color'] = $defaults['link_color'] = somewhereinbetween_get_default_link_color( $output['color_scheme'] );

    // Link color must be 3 or 6 hexadecimal characters
    if ( isset( $input['link_color'] ) && preg_match( '/^#?([a-f0-9]{3}){1,2}$/i', $input['link_color'] ) )
        $output['link_color'] = '#' . strtolower( ltrim( $input['link_color'], '#' ) );

    // Theme layout must be in our array of theme layout options
    if ( isset( $input['theme_layout'] ) && array_key_exists( $input['theme_layout'], somewhereinbetween_layouts() ) )
        $output['theme_layout'] = $input['theme_layout'];

    return apply_filters( 'somewhereinbetween_theme_options_validate', $output, $input, $defaults );
} 
```

使用 Settings API 时，`register_setting()`必须通过清理回调将所有设置*列入白名单。*因此，您需要添加对`$input['header-font-family']`和的处理`$input['general-font-family']`。

如果您允许输入文本，那么您将需要清理（例如通过通过`wp_filter_nohtml_kses()`），但您还需要*验证*（即，以某种方式确保输入的文本是有效的字体系列）。

# sox - Mac PPC 10.4 上的 Sox（声音交换）安装问题

> ID：13499871
> 
> 赞同：1
> 
> 时间：2012-11-21T18:36:21.820
> 
> 标签：sox

我正在尝试在 Mac 上掌握 SOX。

我知道如何编写 php。但我需要使用 sox 将音频水印添加到 mp3 文件。

我一直找不到任何现成的 mac scipts。所以我想我需要自己写一个。

虽然我不知道如何编写任何 Ruby 或 python，所以我不确定它会有多难。

我遇到的主要问题是。我为 mac 下载了 sox。我的mac是ppc G5。当我尝试运行 SOX 14-4 时。它给了我一个 -bash 无法执行二进制文件的消息。

这是因为 SOX 14-4 适用于英特尔 mac 吗？我可能需要早期版本的 SOX？

如果不是，我如何在我的 Mac 上使用 SOX。我该如何安装它？

然后我将如何将它安装在运行 linux 的虚拟服务器上？

抱歉，基本问题很大。我是新来的。我想学习 Ruby 寿 .. 因为我喜欢这个名字的声音。

# maven - 如何在 Maven 中使用我的自定义原型？

> ID：13499873
> 
> 赞同：13
> 
> 时间：2012-11-21T18:36:25.050
> 
> 标签：maven, maven-archetype, archetypes

我刚刚创建了我的自定义原型项目，并且完美地运行了“ **mvn install** ”命令。

在我的本地存储库中，我的原型项目是通过`m2/repository/com/mycomp/archetype-project-name`.
（但它不是在原型文件夹中创建的`m2/repository/org/apache/maven/archetypes`:: 也许这很正常）

但是现在我不能将我的新自定义原型与“mvn archetype:generation”命令一起使用：

*   具有良好参数的 Maven 告诉我他没有找到原型
*   没有参数，我的原型不存在于原型列表中。

我也应该执行`mvn deploy`命令吗？我试过这个，但我还没有配置另一个内部存储库，它失败了。

预先感谢您的帮助

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-11-22T06:12:39.567

我找到了一个解决方案：当我安装我的原型时，我需要像这样使用选项**archetype:update-locate-catalog**：

> mvn install archetype:update-local-catalog

取而代之的是一个简单的“mvn install”命令。

现在，当我想生成一个新的自定义项目时，我在本地目录中找到了我的新自定义原型：

> mvn archetype:generate -DarchetypeCatalog=local

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-06-05T06:10:30.723

要安装原型，请运行以下 maven 命令：-

```
mvn clean install archetype:update-local-catalog 
```

这基本上会创建一个与存储库中的原型目录相对应的 xml 文件。此后，您可以在 IDE 中进行 Maven Archetypes 设置并选择 Add Local Cataglog 选项并提供此本地目录路径。现在，当您从 IDE 创建新的 maven 项目时，它应该是可见的。

# jquery-autocomplete - 自动完成搜索选项

> ID：13499875
> 
> 赞同：0
> 
> 时间：2012-11-21T18:36:33.787
> 
> 标签：jquery-autocomplete

我正在尝试在我的 php 网站上构建一个提供自动完成功能的搜索功能。我注意到很多人都在推荐 jquery UI 自动完成。但我在网上查看了他们的示例，搜索他们的示例“鸟类”数据库似乎需要很长时间。我没有花时间分析示例代码，看看是否有办法加快速度。但我只是想我会问我应该探索哪些其他方式来完成同样的事情。
提前感谢您的宝贵时间！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T18:47:48.090

jQuery UI 的自动完成功能非常丰富而且很棒。如果您担心使用 AJAX 从数据库中获取项目的速度，请考虑预先填充嵌入在页面中的相关信息的 JSON 数组的方法。然后它几乎是瞬间的（你只会在页面上有一堆臃肿）

[http://jqueryui.com/autocomplete/#default](http://jqueryui.com/autocomplete/#default)

```
<head>
    <link rel="stylesheet" href="http://code.jquery.com/ui/1.9.1/themes/base/jquery-ui.css" />
    <script src="http://code.jquery.com/jquery-1.8.2.js"></script>
    <script src="http://code.jquery.com/ui/1.9.1/jquery-ui.js"></script>
    <link rel="stylesheet" href="/resources/demos/style.css" />
    <script>
    $(function() {
        var availableTags = [
            "ActionScript",
            "AppleScript",
            "Asp",
            "BASIC",
            "C",
            "C++",
            "Clojure",
            "COBOL",
            "ColdFusion",
            "Erlang",
            "Fortran",
            "Groovy",
            "Haskell",
            "Java",
            "JavaScript",
            "Lisp",
            "Perl",
            "PHP",
            "Python",
            "Ruby",
            "Scala",
            "Scheme"
        ];
        $( "#tags" ).autocomplete({
            source: availableTags
        });
    });
    </script>
</head> 
```

**话虽**如此，AJAX 调用页面、查询数据库和返回数据的速度完全取决于您的连接和运行它的服务器。jQueryUI 的自动完成速度真的很快，我可以保证

看看他们的文档，你会惊讶于这个库的灵活性。远程数据源示例如下所示：

```
<script>
$(function() {
    function log( message ) {
        $( "<div>" ).text( message ).prependTo( "#log" );
        $( "#log" ).scrollTop( 0 );
    }

    $( "#birds" ).autocomplete({
        source: "search.php",
        minLength: 2,
        select: function( event, ui ) {
            log( ui.item ?
                "Selected: " + ui.item.value + " aka " + ui.item.id :
                "Nothing selected, input was " + this.value );
        }
    });
});
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T19:30:45.260

在您的网站中构建自动完成/实时搜索功能时，您不妨考虑使用诸如 rockitsearch.com 之类的服务。它是用于构建自动完成/搜索前端的免费网络服务。

# objective-c - 以编程方式设置一些界面生成器选项

> ID：13499882
> 
> 赞同：1
> 
> 时间：2012-11-21T18:36:57.330
> 
> 标签：objective-c, ios, xcode

出于大约一百个原因，我只需要以编程方式创建这个 UIViewController 子类视图。只有一个，其他所有视图都使用 IB 进行布局。

好吧，现在我完成了使应用程序自动旋转的任务。这在大多数情况下都很好，但我需要帮助理解其中一些布局选项......特定于自动调整大小和对齐

我如何在这里设置它（这将是称为“标题”的对象，所以`[header setAutoresizingMask:...]`

![在此处输入图像描述](../Images/0afaae069efd77d1be9e5646b197bf97.png)

还有这个

![在此处输入图像描述](../Images/55df87091196ce22052fb64627d2bca4.png)

而那些作为`_mapView`

我一直在不断研究可用的选项，但要么没有任何明显的区别，要么我没有设置正确的选项......

```
 header = [UIButton buttonWithType:UIButtonTypeCustom];
    [header setFrame:CGRectMake(0, 0, self.view.frame.size.width, 170)];

    // this one shoves the header button when in landscape mode to out of view :\
    [header setAutoresizingMask:UIViewAutoresizingFlexibleTopMargin];
    // the header remains left aligned when in landscape mode...
    [header setContentVerticalAlignment:UIControlContentHorizontalAlignmentCenter];

    [header setBackgroundImage:[[UIImage imageNamed:@"header.png"] stretchableImageWithLeftCapWidth:10.0 topCapHeight:0.0] forState:UIControlStateNormal];
    [header setBackgroundImage:[[UIImage imageNamed:@"header.png"] stretchableImageWithLeftCapWidth:10.0 topCapHeight:0.0] forState:UIControlStateHighlighted];

    [header addTarget:self action:@selector(goHome) forControlEvents:UIControlEventTouchUpInside];

    _mapView = [[[SPMapView alloc] initWithFrame:CGRectMake(0, 0, self.view.frame.size.width, self.view.frame.size.height)] autorelease];
    [_mapView setDelegate:self];

    [self.view addSubview:_mapView];
    [self.view addSubview:header]; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T18:46:48.977

第一个：

```
CGRect newFrame = mainView.frame;
        newFrame.origin = CGPointMake(160, 170);
        newFrame.size = CGSizeMake(768, 170);
        myView.frame = newFrame;
        myView.autoresizingMask = UIViewAutoresizingFlexibleRightMargin | UIViewAutoresizingFlexibleLeftMargin | UIViewAutoresizingFlexibleBottomMargin; 
```

对于第二个：

```
CGRect newFrame = mainView.frame;
            newFrame.origin = CGPointMake(160, 416);
            newFrame.size = CGSizeMake(320, 247);
            myView.frame = newFrame;
            myView.autoresizingMask = UIViewAutoresizingFlexibleHeight | UIViewAutoresizingFlexibleWidth; 
```

# java - 公共静态方法 howMany

> ID：13499883
> 
> 赞同：1
> 
> 时间：2012-11-21T18:37:06.593
> 
> 标签：java, static

我正在编写一个`public static`方法，它将一个s （nums）和一个（值）`howMany`数组作为参数，并返回一个（计数）在.`int``int``int``value``nums`

我的代码：

```
public static int howMany(int[] nums, int value)
{
    int count = 0;

    for (int i = 0; i < nums.length; i++)
    {
        if (nums[i] == value);
        {
            count++;
        }
    }
    return count;
} 
```

[代码无法正常工作。] 我查看了所有代码，但不知道可能是什么问题。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-21T18:41:13.780

```
if(nums[i] == value); 
```

去掉结尾的分号。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T18:43:44.673

您已将该方法嵌入到类文件中，对吗？如果不是，这可能是问题所在。

# xcode - MonoMac - 将 UI 文件移动到类库

> ID：13499884
> 
> 赞同：1
> 
> 时间：2012-11-21T18:37:10.713
> 
> 标签：xcode, monomac

在 MonoMac 上，是否可以至少将我的 ViewController（以及理想情况下的 .xib 文件）移动到类库项目中？

在尝试这样做时，我的 XCode 集成被破坏了。

例如，在默认项目中：

*   将 MainWindowController.cs 移到类库意味着它不再编译（因为它看不到 MainWindow 类）
*   所以我也将 MainWindow.cs 和 MainWindow.designer.cs 移动到我的类库中。现在，我的解决方案编译但没有运行 - 我在控制台上得到以下信息：

*Interface Builder文件中的未知窗口类MainWindow，而是创建通用窗口*

并在尝试强制转换 MainWindow 的空指针上崩溃

所以很明显，我已经破坏了我的 .xib 和我的托管代码之间的链接。当然，移动.xib 本身并没有帮助——一旦它在类库项目中，我就失去了所有的“魔力”（例如，双击将文件作为MD 中的文本打开，而不是XCode）。

当然，我可以在这里应用一些变通方法 - 使我的控制器尽可能地薄，并尝试将它们构造为在我的类库中的逻辑之上的非常薄的包装器。但如果我能真正移动控制器，那就太好了。深入研究 MonoMac 源代码并没有帮助，显然它非常复杂。

我应该指出，我已经成功地以这种方式构建了一个 MonoTouch 项目。当然不同的是，它没有使用 .xib 文件......

我已经在 Mono 论坛上发帖，但没有任何回应（http://mono.1490590.n4.nabble.com/MonoMac-project-structure-tp4657231.html）。希望我的问题在这里能得到更大的关注。

* * *

编辑：

这仍然行不通。尽管最新的 MonoDevelop 允许我以这种方式创建和编译解决方案，但实际输出并没有按预期工作。调试器从不附加。从 MonoMac 项目中删除 MainWindow 定义（将自定义窗口定义保留在库项目中）会导致相同的错误。

* * *

# rft - 如何为 callScript 创建手动 VP？

> ID：13499889
> 
> 赞同：2
> 
> 时间：2012-11-21T18:37:38.680
> 
> 标签：rft

我有一个脚本可以调用其他测试数据库的脚本。当脚本运行时，它会在控制台中显示查询结果。我怎么可能创建一个手动 VP 来在日志中显示 callScript 的结果？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T08:53:02.847

该`callScript()`方法可以返回`object`结果，但我认为您希望测试查询的结果。

使用`VPManual("YourVPName", baselineData, actualData).performTest()`baselineData 是正确结果，actualData 是执行查询的结果集的方法。

棘手的部分是 RFT chan 仅检查“基本”类型，如数字和字符串。因此，您必须将结果集转换为字符串形式或分别测试每个结果集值。另一种方法是编写自己的相等测试并像本文一样使用它[http://rationalester.wordpress.com/2010/07/26/rational-functional-tester-file-compare/](http://rationaltester.wordpress.com/2010/07/26/rational-functional-tester-file-compare/)
并使用`vpManual("yourVPName", true, compareResultSets(baseResultset, actualResultset));`

（有关如何操作的提示，请检查[Comparing resultsets in jdbc](https://stackoverflow.com/questions/6582093/comparing-resultsets-in-jdbc)）

您可以在此处阅读教程 [http://www.ibmpressbooks.com/articles/article.asp?p=1409808&seqNum=17](http://www.ibmpressbooks.com/articles/article.asp?p=1409808&seqNum=17)

# mysql - 如果值为空，则添加一列

> ID：13499892
> 
> 赞同：3
> 
> 时间：2012-11-21T18:37:47.893
> 
> 标签：mysql

我想根据`field_value`表中的字段是否为`NULL`.

这是我的有效查询：

```
SELECT field_id, (
   SELECT field_value
   FROM employee_field_info
   WHERE employee_id = '1'
   AND field_id = persona_fields.field_id
) AS field_value, ( 
   SELECT field
   FROM FIELDS WHERE id = persona_fields.field_id
) AS field_name
FROM persona_fields
WHERE persona_id = '1' 
```

`field_value`如果是，我想要做的是添加一个 tinyint（用于布尔）列`NULL`。

我试过这个：

```
SELECT field_id, (
   SELECT field_value
   FROM employee_field_info
   WHERE employee_id = '1'
   AND field_id = persona_fields.field_id
) AS field_value, ( 
   SELECT field
   FROM FIELDS WHERE id = persona_fields.field_id
) AS field_name,
IF(field_value IS NULL, "0","1") AS value_bool
FROM persona_fields
WHERE persona_id = '1' 
```

但这只是在'字段列表'中出现“未知列'field_value'。无论如何我可以完成我想做的事情，还是我很不走运？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T18:41:35.990

您不能`SELECT`从子选择中引用父项中的列。子选择基本上是独立运行的。您需要做的是将其重新编写为`JOIN`. 您的查询非常复杂且难以理解，而且我认为不完整，所以我只能近似一个解决方案。

这是一个例子：

```
SELECT field_id,
  employee_field_info.field_value,
  IF(employee_field_info.field_value IS NULL, "0","1") AS value_bool
  FROM persona_fields
  LEFT JOIN employee_field_info ON employee_field_info.field_id=persona_fields.field_id
  WHERE employee_id=1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T18:42:28.387

**我认为答案就在这里..您正在尝试获取field_list**中不可用的字段。有时您会收到此错误，因为您正在使用数据库开发工具，其中字段已修改尚未提交。

关于您的查询：对于这样简单的结果，最好避免这样的子查询，一个简单的连接会很好。

# database - 在 Zend 1.11 上登录后选择学说配置

> ID：13499902
> 
> 赞同：1
> 
> 时间：2012-11-21T18:38:32.790
> 
> 标签：database, login, doctrine

大家！我正在做一个包含多个数据库的应用程序，每个数据库都属于一个特定的部门。

所以，我在我的 Bootstrap.php 中有方法 _initDoctrine() 来初始化与 DB 的连接（同时，我只有一个）。

```
public function _initDoctrine() {
    $this->getApplication()->getAutoloader()
            ->pushAutoloader(array('Doctrine', 'autoload'));
    spl_autoload_register(array('Doctrine', 'modelsAutoload'));

    $manager = Doctrine_Manager::getInstance();
    $manager->setAttribute(Doctrine::ATTR_AUTO_ACCESSOR_OVERRIDE, true);
    $manager->setAttribute(
            Doctrine::ATTR_MODEL_LOADING, Doctrine::MODEL_LOADING_CONSERVATIVE
    );
    $manager->setAttribute(Doctrine::ATTR_AUTOLOAD_TABLE_CLASSES, true);

    $doctrineConfig = $this->getOption('doctrine');

    Doctrine::loadModels($doctrineConfig['models_path']);

    $conn = Doctrine_Manager::connection($doctrineConfig['dsn'], 'doctrine');
    $conn->setAttribute(Doctrine::ATTR_USE_NATIVE_ENUM, true);
    return $conn;
} 
```

在我的登录页面中，用户将选择连接 3 个选项（数据库）。那么，无论如何在登录后初始化学说配置？

PS：对不起我的英语

# django-templates - Backbone.Marionette 模板缓存的优化使用

> ID：13499904
> 
> 赞同：1
> 
> 时间：2012-11-21T18:38:50.387
> 
> 标签：django-templates, memcached, marionette

我将 Django 与 Backbone.marionette 结合使用。

我有一个带有嵌套 Marionette 区域/布局的 base.html。我注意到[Marionette 有一个模板缓存框架](https://github.com/marionettejs/backbone.marionette/blob/master/docs/marionette.templatecache.md)，它将缓存脚本块中的所有内容。

话虽如此，与其在 Django 中扩展 base.html 以适应略有不同的布局，不如简单地使用一个包含所有必要 Marionette 区域的脚本块的 base.html 的优点和缺点。考虑到我只有 3 到 4 个不同的页面需要定期加载，这样可以保持内容干燥且包装整齐。

# ruby-on-rails - Heroku push 拒绝 Rails 3.2.8，bundler 无法继续确保 gem install sqlite3 工作

> ID：13499907
> 
> 赞同：0
> 
> 时间：2012-11-21T18:39:01.930
> 
> 标签：ruby-on-rails, git, heroku

我是新来的铁路。我正在尝试通过 git 将我的新 Rails 应用程序推送到 heroku，但我不断收到错误消息：“安装 sqlite3 (1.3.6) 时发生错误，并且 Bundler 无法继续。确保 'gem install sqlite3 -v' 1.3.6' ' 捆绑前成功。

我检查了一下，我已经有了 sqlite3 gem。同样，我更新了gemfile，但这仍然没有解决heroku推送问题。[同样按照此](https://devcenter.heroku.com/articles/rails3)页面上的教程，我被告知我必须转到我的 Gemfile 并将 sqlite3 替换为 pg。我不应该这样做，因为我目前正在使用 sqlite3 作为我的数据库的应用程序。更改为 pg 会解决我的 heroku 问题吗？它还会影响我的应用程序或我进一步使用 sqlite3 的能力吗？多谢你们

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T18:56:37.687

我不相信 Heroku 支持 SQLLite，或者我上次检查时不支持。您需要使用 PostgreSQL。请参阅这篇文章：[使用 Sqlite3 将 RoR 应用程序部署到 Heroku 失败](https://stackoverflow.com/questions/3897431/deploying-ror-app-to-heroku-with-sqlite3-fails)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T19:12:17.167

更新您的 Gemfile

```
group :production do
  gem 'pg'
end 
```

并将 sqlite3 gem 移动到这个

```
group :development do
  gem 'sqlite3'
end 
```

您仍然可以在开发过程中使用 sqlite 数据库，但 Heroku 将使用 PostgreSQL 数据库。无论您使用哪个数据库平台，您的迁移都将确保正确创建数据库。

# vb.net - 如何从 URL 中获取 HTML 并将其显示在某个位置？

> ID：13499908
> 
> 赞同：0
> 
> 时间：2012-11-21T18:39:06.027
> 
> 标签：vb.net, vb.net-2010

我正在使用 Visual Basic 中的第一个应用程序，并且正在使用 Visual Basic Studio - 我的问题是，如何从指定的 URL 获取原始 HTML 数据，然后在特定位置以我的表单显示它？

我还没有尝试过任何东西，因为我还没有在互联网上找到很多关于这个的解决方案。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-21T19:48:08.927

您需要使用`HttpClient`类或`WebClient`类来获取原始 HTML 作为字符串。然后，您可以简单地在表单上的任何控件中显示该字符串，例如 a`TextBox`或`Label`控件。

例如：

```
Public Sub Button1_Click(sender As Object, e As EventArgs) Handles Button1.Click
    Dim client As WebClient = New WebClient()
    Label1.Text = client.DownloadString("http://www.stackoverflow.com")
End Sub 
```

# googlebot - 阻止谷歌关注我的 api

> ID：13499909
> 
> 赞同：0
> 
> 时间：2012-11-21T18:39:07.500
> 
> 标签：googlebot, robot

好的，我有一个网站，其中包含一系列按钮，这些按钮调用 api 来返回与产品相关的信息。我遇到的问题是谷歌大约每 10 分钟访问和跟踪一次 api，这意味着我每天要进行大量的查找。

我可以阻止谷歌机器人这样做吗？

我有一个 robots.txt 文件，没有关注元数据，但他们似乎没有做太多。

任何意见，将不胜感激。

```
 User-Agent: *
  Disallow:/index/
  Disallow /manufacturer/ 
```

我只是注意到页面没有扩展，即制造商应该是manufacturer.php

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T18:52:57.713

[Google 网站管理员工具](https://www.google.com/webmasters/tools/home)将为您分析您的 robots.txt，并让您知道它的用途。过去我发现它非常有用。您可以粘贴您的 robots.txt，它会指出任何缺陷。

如果没有，您可以访问[论坛](http://productforums.google.com/forum/#!forum/webmasters)。

# solr - solr 3.6.1 在破折号处拆分单词边界

> ID：13499912
> 
> 赞同：4
> 
> 时间：2012-11-21T18:39:28.603
> 
> 标签：solr, lucene, hyphen

我们有一个数字除以破折号的故障单格式，即 n-nnnnnnn

链接 [http://lucidworks.lucidimagination.com/display/solr/Tokenizers](http://lucidworks.lucidimagination.com/display/solr/Tokenizers)（在 Standard Tokenizer 和 Classic Tokenizer 的部分中）暗示在支持 Unicode 标准附件 UAX#29 之前和之后：

单词在连字符处拆分，除非单词中有数字，在这种情况下，不拆分标记并且保留数字和连字符。

我们的 Solr 安装仅使用 StandardTokenizerFactory，但这种故障单格式正在破折号处的查询中拆分。我是 solr/lucene 的新手。我已经下载了 3.6.1 的代码，而评论暗示相反（除非虚线数字仍被视为数字）。我无法遵循 Lex 处理：

*   生成的令牌有以下类型：
*   *   <ALPHANUM>：字母和数字字符序列

    *   <NUM>：一个数字

    *   <SOUTHEAST_ASIAN>：来自南部和东南部的字符序列
    *   亚洲语言，包括泰语、老挝语、缅甸语和高棉语

    *   <IDEOGRAPHIC>：单个 CJKV 表意字符

    *   <平假名>：一个平假名字符

谁能澄清一下谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-07-18T09:39:17.987

您需要正则表达式模式标记器。此标记器使用 Java 正则表达式将输入文本流分解为标记。模式参数提供的表达式可以解释为分隔标记的分隔符，也可以解释为匹配应从文本中提取为标记的模式。

有关Java 正则表达式语法的更多信息，请参阅[java.util.regex.Pattern 的 Javadocs 。](http://java.sun.com/j2se/1.5.0/docs/api/java/util/regex/Pattern.html)

# java - 查看 BufferedImage 是否被点击

> ID：13499918
> 
> 赞同：0
> 
> 时间：2012-11-21T18:40:04.143
> 
> 标签：java, mouseevent, bufferedimage

我正在制作一个游戏，您将鼠标悬停在目标单击（射击）上。我想知道如何确定是否单击了 BufferedImage。

我有这样的代码：

```
import javax.swing.*;
import java.awt.*;
import java.awt.event.*;
import java.awt.Graphics.*;
import java.awt.Graphics2D.*;
import javax.imageio.*;
import java.io.*;

public class icon_clicked {

public static int mouseX;
public static int mouseY;
public static BufferedImage background;
public static BufferedImage cursor;
public static BufferedImage target;

public static void main(String[] args) {

try {
background = ImageIO.read(new File("background.png"));
}
catch(Exception exc) {
System.err.println("An error has occurred. Error: "+exc);
}

try {
cursor = ImageIO.read(new File("cursor.png"));
}
catch(Exception exc) {
System.err.println("An error has occurred. Error: "+exc);
}

try {
target = ImageIO.read(new File("target.png"));
}
catch(Exception exc) {
System.err.println("An error has occurred. Error: "+exc);
}

JFrame frame = new JFrame("Shooting Range");
frame.setSize(500, 500);
frame.setVisible(true);
frame.setDefaultCloseOperation(JFrame.DISPOSE_ON_CLOSE);
frame.setLocationRelativeTo(null);
frame.setAlwaysOnTop(false);
frame.setResizable(false);

frame.addMouseMotionListener(new MouseAdapter() {
@Override
public void mouseMoved(MouseEvent me) {
mouseX = me.getX();
mouseY = me.getY();
 }
});

frame.addMouseListener(new MouseAdapter() {
@Override
public void mouseClicked(MouseEvent me) {
//Solution Code goes here
 }
});

JPanel panel = new JPanel() {
public void paintComponent(Graphics g) {

Graphics2D g2 = (Graphics2D) g;
g2.drawImage(background, 0, 0, null); 
g2.drawImage(cursor, mouseX, mouseY, null); 
g2.drawImage(target, 250, 250, null); 

 }
};

frame.add(panel);

  };
} 
```

我在想图标所在的区域是否有点击。但我似乎无法弄清楚。有人可以给我一个解决方案吗？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T18:43:52.767

您可以检查单击的点是否在图像的矩形内。

```
public void mouseClicked(MouseEvent me) {
    Point clicked = me.getPoint();
    Rectangle bounds = new Rectangle(250, 250, target.getWidth(), target.getHeight());
    if (bounds.contains(clicked)) {
        // target image was clicked
    }
} 
```

# c++ - Windows 对其 Unicode 数据类型使用什么 Unicode 编码（UTF-8、UTF-16 等）？

> ID：13499920
> 
> 赞同：16
> 
> 时间：2012-11-21T18:40:09.943
> 
> 标签：c++, windows, winapi, unicode, encoding

[同一个 Unicode（标准化）表](http://unicode-table.com/en/)有不同的编码。例如，对于 UTF-8 编码`A` [，对应](http://www.utf8-chartable.de/) `0x0041`于 UTF-16 编码，`A`则[表示为](http://www.fileformat.info/info/charset/UTF-16/list.htm) `0xfeff0041`.

从这篇[精彩的文章中](http://www.codeproject.com/Articles/2995/The-Complete-Guide-to-C-Strings-Part-I-Win32-Chara)我了解到，当我使用 C++ 为 Windows 平台编程并处理 Unicode 时，我应该知道它以 2 个字节表示。但它没有说明任何关于编码的内容。（即使它说 x86 CPU 是 little-endian，所以我知道这两个字节是如何存储在内存中的。）但我也应该知道 Unicode 的编码，以便我有关于符号如何存储在内存中的完整信息。C++/Windows 程序员有固定的 Unicode 编码吗？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-11-21T18:54:23.550

存储在 Windows 内存中的值始终是 UTF-16 little-endian。但这不是您在谈论的内容-您正在查看文件内容。Windows 本身并没有指定文件的编码，而是将其留给各个应用程序。

您在文件开头看到的 0xfe 0xff 是[Byte Order Mark 或 BOM](http://en.wikipedia.org/wiki/Byte_order_mark)。它不仅表明该文件很可能是 Unicode，而且还告诉您 Unicode 编码的变体。

```
0xfe 0xff      UTF-16 big-endian
0xff 0xfe      UTF-16 little-endian
0xef 0xbb 0xbf UTF-8 
```

除非您知道它是如何编写的，否则应该假定没有 BOM 的文件是 8 位字符。这仍然不能告诉你它是 UTF-8 还是其他 Windows 字符编码，你只需要猜测。

您可以使用记事本作为如何完成此操作的示例。如果文件有 BOM，那么记事本会读取它并适当地处理内容。否则，您必须使用“编码”下拉列表自己指定编码。

编辑：Windows文档对编码没有更具体的原因是Windows是Unicode的早期采用者，当时每个代码点[只有*一种*16位编码](https://en.wikipedia.org/wiki/Unicode#History)。当 65536 个代码点被确定为不足时，发明了代理对作为扩展范围的一种方式，UTF-16 诞生了。微软已经在使用 Unicode 来指代他们的编码并且从未改变过。

# arrays - Go：数组数组、切片数组、数组切片和切片切片

> ID：13499923
> 
> 赞同：4
> 
> 时间：2012-11-21T18:40:12.477
> 
> 标签：arrays, go, multidimensional-array, slice

试图自学并发现很难找到例子，我的大脑已经陷入困境。非常不确定 3 和 4，需要帮助才能使 5 工作。

```
package main
import "fmt"

func main () {
    println("0\. Array:")
    var a = [...]int{4,5,6,7,8,9} //assign
    fmt.Println(a,"\n")

    println("1\. Slice:")
    var as []int
    as = a[:] //assign
    fmt.Println(as,"\n")

    println("2\. Array of arrays:")
    var b [4][len(a)]int
    for i:= range b { //assign
        b[i]=a
    }
    fmt.Println(b,"\n")

    println("3\. Array of slices:")
    var d [len(b)][]int
    for i:= range b { // assign
        d[i] = b[i][:] //does this really work?
    }
    fmt.Println(d,"\n")

    println("4\. Slice of arrays:")
    var c [][len(a)]int
    c = b[:][:] // assign, does this really work?
    fmt.Println(c,"\n")

    println("5\. Slice of slices:")
    var e [][]int
//  e = c //  ???
    fmt.Println(e,"\n")
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-21T19:12:35.517

第 3 部分有效。

第 4 部分包含一个不必要的`[:]`.

```
println("4\. Slice of arrays:")
var c [][len(a)]int
c = b[:]    // one [:], not two
fmt.Println(c, "\n") 
```

`b[:]`被评估为一个切片，其中每个元素都是 a `[len(a)]int`。如果添加另一个`[:]`，则再次切片。因为对于任何切片 s, `s[:] == s`，它都是无操作的。

第 5 部分，您可以对切片数组进行切片。

```
println("5\. Slice of slices:")
var e [][]int
e = d[:]
fmt.Println(e, "\n") 
```

[我在http://play.golang.org/p/WDvJXFiAFe](http://play.golang.org/p/WDvJXFiAFe)发布了一个完整的示例。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-22T13:32:36.347

“这真的有效吗？”的答案。取决于你的期望。[在http://play.golang.org/p/7Z5hKioTI_](http://play.golang.org/p/7Z5hKioTI_)上考虑这个例子

```
package main

import "fmt"

func main() {
    fmt.Println("0\. Array:")
    var a = [...]int{4, 5, 6, 7, 8, 9}  //assign
    fmt.Println(a, "\n")

    fmt.Println("1\. Slice:")
    var as []int
    as = a[:]   //assign
    fmt.Println(as, "\n")

    fmt.Println("new slice:")
    ns := make([]int, len(a))
    copy(ns, a[:])
    fmt.Print(ns, "\n\n")

    fmt.Println("modifying array...")
    a[0] = 10
    fmt.Print("array is now:\n", a, "\n\n")
    fmt.Print("slice is now:\n", as, "\n\n")
    fmt.Print("new slice is still:\n", ns, "\n")
} 
```

它显示了切片如何具有底层数组，并且 OP 中的示例使用相同的底层数组制作切片。如果希望切片具有独立的内容，则必须制作新切片并复制数据。（或者有附加的技巧......）

另外作为旁注，println 将数据发送到 stderr 而不是 stdout，并且格式化某些数据类型与 fmt.Println 不同。为避免混淆，最好保持使用 fmt.Println 的习惯。

# playn - html上的游戏大小

> ID：13499927
> 
> 赞同：2
> 
> 时间：2012-11-21T18:40:29.117
> 
> 标签：playn

我正在使用来自 git 的最新 PlayN 版本，它从平台中删除了 setSize(w, h) 方法。

在 Java 后端，我为我的游戏提供了所需的维度：

```
Config conf = new Config();
conf.width = 720;
conf.height = 600;

JavaPlatform platform = JavaPlatform.register(conf); 
```

我编译为 HTML，但现在我不确定如何在 HTML 平台上指定游戏大小。我给#playn-root 元素一个这样的样式：

```
<style>
  #playn-root {
    height: 600px;
    width: 720px;
  }
</style> 
```

它*确实*调整了 div 元素的大小，但我的游戏仍然在里面缩小了（大小 300 x 150）

这是游戏的初始化代码：

```
root = _iface.createRoot(new AbsoluteLayout(), rootSheet, graphics().rootLayer()).setSize(graphics().width(), graphics().height()); 
```

我错过了一些东西，但我找不到要改变的东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T21:53:06.300

这是 PlayN（OOO 分支）中的一个错误，已在[https://github.com/threerings/playn/commit/058a2e6919131b39cf2c26eb3db3fb220e523879中修复](https://github.com/threerings/playn/commit/058a2e6919131b39cf2c26eb3db3fb220e523879)

# java - 无法将 ModuleInfo 对象添加到 ArrayList

> ID：13499928
> 
> 赞同：3
> 
> 时间：2012-11-21T18:40:33.137
> 
> 标签：java, generics, netbeans

我不确定我是否正确使用了泛型，但基本上我创建了一个`Arraylist<? extends ModuleInfo> moduleList`and`ModuleInfo m`对象，并尝试调用`moduleList.add(m)`. 但是它不会编译，我收到一条对我来说似乎有点神秘的错误消息。错误消息和代码如下。其他人知道出了什么问题吗？

```
void load() {
    ArrayList<? extends ModuleInfo> moduleList = new ArrayList();
    Iterator<? extends ModuleInfo> iter_m;
    ModuleInfo m;

    //get modules that depend on this module
    //retrieve list of all modules and iterate trough each one
    iter_m = Lookup.getDefault().lookupAll(ModuleInfo.class).iterator();
    while(iter_m.hasNext()) {
        m = iter_m.next();
        //loop through modules dependencies and check for a dependency on this module
        for(Dependency d : m.getDependencies()) {
            //if found, the module to the list
            if(d.getName().equals(GmailAuthManager.class.getPackage().getName())) {
                moduleList.add(m);
                break;
            }
        }
    }
} 
```

错误如下：

```
error: no suitable method found for add(ModuleInfo)
                    moduleList.add(m);
    method ArrayList.add(int,CAP#1) is not applicable
      (actual and formal argument lists differ in length)
    method ArrayList.add(CAP#1) is not applicable
      (actual argument ModuleInfo cannot be converted to CAP#1 by method invocation conversion)
  where CAP#1 is a fresh type-variable:
    CAP#1 extends ModuleInfo from capture of ? extends ModuleInfo 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-21T18:44:41.163

假设您创建一个数组列表： -

```
List<? extends Animal> list = new ArrayList<Dog>(); 
```

现在该列表引用可以指向一个`ArrayList<Dog>`或一个`ArrayList<Cat>`或任何东西。因此，当您尝试添加`Animal`对该列表的引用时，编译器不确定该引用实际上指向与`implementation`实际具体类型中使用的相同`ArrayList`。

例如： - 您可能会在上面的 ArrayList 中添加一个`Animal`指向的引用`Cat`，这是一场灾难。这就是编译器不允许它的原因。

```
Animal cat = new Cat();
list.add(cat);  // OOps.. You just put a Cat in a list of Dog 
```

您可以只创建一个`List<Animal>`，并且可以向其添加任何子类型：-

```
List<Animal> newList = new ArrayList<Animal>();
newList.add(new Cat());  // Ok. Can add a `Cat` to an `Animal` list. 
```

上面的代码有效，因为`List<Animal>`引用只能指向`ArrayList<Animal>`.

* * *

因此，在您的示例中，您可以使用： -

```
List<ModuleInfo> list = new ArrayList<ModuloInfo>(); 
```

作为旁注，您应该始终编程为`interface`而不是`implementation`. 因此，`interface`在这种情况下，请始终使用 ,`List`而不是`ArrayList`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-21T18:49:25.513

要解决您的问题，请使用：

```
ArrayList<ModuleInfo> moduleList = new ArrayList<ModuleInfo>(); 
```

这会将您的列表限制为 ModuleInfo 实例及其子类。

# javascript - 为什么外部 javascript 库会阻止我页面上的 javascript？

> ID：13499929
> 
> 赞同：1
> 
> 时间：2012-11-21T18:40:40.230
> 
> 标签：javascript, external

这是一个我简单的头脑无法回答的非常简单的问题：为什么我在外部库中加载时没有运行下面的匿名和 onload 函数？我错过了一些非常非常基本的东西。Library.js 只有一行：console.log('library')。一个人能得到多少基础？

```
<script type="text/javascript" src='js/library.js' />
<script type="text/javascript">
    (function () {
        console.log('anon');
    })();

    window.onload = function () {
        console.log('onload');
    } ();   
</script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T18:42:48.590

您的脚本语法无效。您应该有一个单独的结束标签而不是自动结束版本。

```
 <!--------- v --------->
<script type="text/javascript" src='js/library.js'></script> 
```

* * *

您还有一个问题是您要`onload`立即调用该函数。

```
window.onload = function () {
    console.log('onload');
}/* () */;
 // ^^---remove these to assign the function instead of invoking it. 
```

# angularjs - 在 AngularJS 中使用带有 Select 标记的 ng-switch 可能存在错误

> ID：13499931
> 
> 赞同：0
> 
> 时间：2012-11-21T18:40:40.713
> 
> 标签：angularjs

我与 ng-switch 一起使用的 Select 标签在设置一次后无法正确显示或正常运行。

```
 <select ng-model="visuals" ng-options="visual for visual in visuals"> 
```

见 JSFiddle：http: [//jsfiddle.net/timothybone/UaFuc/3/](http://jsfiddle.net/timothybone/UaFuc/3/)

提前致谢！:D

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T19:01:01.577

您不应该`visuals`使用 ng-model 进行绑定，因为它是项目列表。设置它用所选项目替换列表值（这是一个字符列表）。导致奇怪的行为。

```
<select ng-model="item" ng-options="visual for visual in visuals"> 
```

这个新变量必须在作用域中声明。它还用于设置初始值：

```
$scope.item = 'none'; 
```

您的开关用法也错误，您需要在开关块中包含条件。

```
 <div ng-switch on="item">
      <span ng-switch-when="lots">Youtube</span>
      <span ng-switch-default></span>
  </div> 
```

如果您想设置 HTML 的内容，`ng-bind-html-unsafe`您应该提供一个变量作为参数（不确定如何以这种方式注入 javascript）。

```
<span ng-switch-when="lots" ng-bind-html-unsafe="youtube">Could not evaluate 'youtube' variable</span> 
```

然后替换 span 内容。当然，必须在作用域中定义一个新变量来保存 HTML 内容：

```
$scope.youtube = "<hr/>This is an HTML content<hr/>"; 
```

我更新了 jsFiddle：http: [//jsfiddle.net/PMpLa/4/](http://jsfiddle.net/PMpLa/4/)

# html - 在表格中设置 TD 中的 div 宽度

> ID：13499937
> 
> 赞同：2
> 
> 时间：2012-11-21T18:41:15.393
> 
> 标签：html, css, html-table, sencha-touch

我正在使用 sencha touch xTemplate。众所周知，sencha touch xtemplate 就是 html。我想在 td 中使用 div ，原因如下：

1.  使用 text-overflow:ellipsis 剪切文本。
2.  我尝试在 中显示文本，然后文本溢出在 IOS Safari 中不起作用。

我的代码是这样的：

```
......
......
'<td>' +
    '<div style = "overflow:hidden; text-overflow:ellipsis; width:80%; max-width: 100%;">'+  
     'Here is the text to cut'+
    '</div>'+
'</td>' +
......
...... 
```

这是一个问题：
当我将 div 放入 td 时，td 会扩展。当我将 max-width 设置为 100px 之类的数字时，它不会扩展。但我不想将宽度设置为固定数字。如何使 div 和 td 不展开？

我在这方面还是初级。所以请帮助我！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-21T18:53:03.297

`width:80%;max-width:100%`没有意义。如果宽度为`80%`，则永远无法达到您为其设置的最大值。至少其中一个`width`或`max-width`应该是绝对值，而不是百分比。

就`<td>`扩展而言，您可以尝试在表格单元格上设置宽度。如果这不起作用，您还可以添加`table-layout:fixed`到表格的样式中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-21T18:56:01.447

删除最大宽度，并尝试在元素上设置`white-space: nowrap;`css 。`td`

这对你有用吗？

[http://jsfiddle.net/YeDjG/2/](http://jsfiddle.net/YeDjG/2/)

# javascript - 一个更好（希望如此）的 JavaScript 倒数计时器

> ID：13499939
> 
> 赞同：0
> 
> 时间：2012-11-21T18:41:27.540
> 
> 标签：javascript

在我们的应用程序中，我们需要一个强大的倒数计时器。当计时器倒计时到零时，我们将用户移至下一页。

这里有很多关于在 JavaScript 中制作倒数计时器的问题。我已经筛选了很多，查看了很多代码示例，尝试了很多插件，但对于这个测试案例，所有这些都失败了：如果你调整你的计算机系统时钟，所有这些计时器都会搞砸（获得时间，失去时间，或者只是冻结）。原因是他们中的大多数基于他们的逻辑保存一些初始开始时间，然后在某个时间间隔（通过 setTimeout 或 setInterval）获取当前时间并在它和开始时间之间进行差异。当您调整系统时间时，“当前”时间可以是开始时间前一小时或几天，也可能是几小时或几天后。

因此，我想出了以下代码来尝试处理这些系统更改场景。我做的主要事情是检查我的开始和当前之间的“差异”是否为负（或大于大约一小时来处理自动夏令时调整），以仅使用滴答间隔作为近似值。此外，在每个刻度上将开始时间重置为当前时间，以便经过时间是差异之间时间的总和，而不仅仅是初始开始时间和当前时间之间的差异。有人看到这种方法有任何缺陷吗？

```
var timeLeft = 60000, // time left in ms, 1 minute for this example
    startTime, 
    totalElapsedTime = 0,
    TICK_INTERVAL = 500; // the setTimeout interval

var timerTick = function () {

    var now = new Date(),
        elapsedTime = now.getTime() - startTime.getTime();

    // if the elapsed time was positive and less than approximately an hour, then add the elapsed time to the total
    // otherwise, add the TICK_INTERVAL, which we know is the theoretical minimum between timerTick() calls

    totalElapsedTime = (elapsedTime > 0 && elapsedTime < 3590000) ? totalElapsedTime + elapsedTime : totalElapsedTime + TICK_INTERVAL;

    // reset start time 
    startTime = now;

    // there is time left, so set up another tick
    if (totalElapsedTime < timeLeft) {

        // update the html that is displaying remaining time

        setTimeout(timerTick, TICK_INTERVAL);          

    }
    else {

        // time ran out, so do whatever you do when it runs out            

    }
}

// start the timer
startTime = new Date();
setTimeout(timerTick, TICK_INTERVAL); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T18:52:12.103

为什么以下内容对您不起作用？

```
var timeleft = 60000,
    tick = 1000,
    intervalID = window.setInterval(function () {
        timeleft = timeleft - tick;
        if (timeleft <= 0) {
            // clear the interval
            clearInterval(intervalID);

            // do something
        }
    }, tick); 
```

**更新**

使用`setTimeout`（这会漂移，但除非您将其用于动画，否则可能没问题）：

```
var timeleft = 60000,
    tick = 1000;

window.setTimeout(function timerFn() {
    timeleft = timeleft - tick;
    if (timeleft > 0) {
        // set the next timeout
        setTimeout(timerFn, tick);
    } else {
        // do something
    }
}, tick); 
```

# php - 如何在php中用另一个数组字符串替换字符串

> ID：13499941
> 
> 赞同：1
> 
> 时间：2012-11-21T18:41:31.307
> 
> 标签：php

实际上我想转换我在输入文本中输入的字符串，然后与另一个数组进行比较。请参见下面的场景：

首先，我在输入文本中输入这种类型的字符串：`acgta` 其次，我想将“acgta”替换为“TGCAT”，即`a=T, c=G, g=C`

这是代码：

```
$data = "acgta";
$s = str_split($data);

$d = array("a" => "T","g" => "C","c" => "G","t" => "A");

foreach($d as $key1 => $value1) {
        echo str_replace($key1,$value1,$data);} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-21T18:45:05.903

```
$data = "acgta";
echo str_replace(array('a', 'c', 'g', 't'), array('T', 'G', 'C', 'A'), $data); 
```

或者

```
$data = "acgta";
echo strtr($data, 'acgt', 'TGCA'); 
```

查看 PHP 手册页：

*   [`str_replace()`](http://php.net/str_replace)
*   [`strtr()`](http://php.net/strtr)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-21T18:45:11.510

您想使用该`strtr`功能。如果您阅读 PHP 文档，这是不言自明的：[http ://www.php.net/manual/en/function.strtr.php](http://www.php.net/manual/en/function.strtr.php)

```
$data = "acgta";
$d = array("a" => "T","g" => "C","c" => "G","t" => "A");

echo strtr($data, $d); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-21T18:45:17.117

[将str_replace](http://php.net/manual/en/function.str-replace.php)与数组元素一起使用会更容易。见下文：

```
$data = "acgta";
$fromArr = array('a', 'g', 'c', 't');
$toArr = array('T', 'C', 'G', 'A');

echo str_replace($fromArr, $toArr, $data); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-21T18:46:31.973

### 你可以简单地使用这个：

```
$string = "acgta";
$from = array('a', 'g', 'c', 't');
$to = array('T', 'C', 'G', 'A');
$string = str_replace($from, $to, $string); 
```

### 或者以一种简单的方式：

```
$string = "acgta";
$string = str_replace(array('a', 'g', 'c', 't'), array('T', 'C', 'G', 'A'), $string); 
```

# android - 在 maven 中为 Android 指定特定的测试用例

> ID：13499953
> 
> 赞同：0
> 
> 时间：2012-11-21T18:42:23.037
> 
> 标签：android, unit-testing, maven

我在这里回答了我之前的问题：[Android Maven 插件：选择要执行的测试用例的包](https://stackoverflow.com/questions/13253906/android-maven-plugin-choose-packages-for-testcases-to-be-executed)

所以我现在像这样指定我的测试用例：

```
<groupId>com.jayway.maven.plugins.android.generation2</groupId>
            <artifactId>android-maven-plugin</artifactId>
            <configuration>
                <test>
                    <createReport>true</createReport>
                    <classes>
                        <class>a.b.c</class>
                        <class>a.b.c2</class>
                        <class>d.e.f</class>
                    </classes></test> 
```

当我只执行前两个类时，测试运行没有问题。但是，当我添加第三类时，测试不再起作用。第三次测试自己运行没有问题。

我得到的错误是这样的：

> 运行指定测试类/方法的测试：[abc,abc2,def] [INFO] 在 de.weptun.android.test 中运行检测测试 192.168.1.31:5555 (avdName=null) [INFO] 运行开始：de.weptun .android.test，0 次测试：[INFO] 运行失败：java.io.IOException：EOF [INFO] 运行结束：0 毫秒 [INFO]
> 测试运行：0，失败：0，错误：0

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T19:22:06.270

最后问题似乎是添加的课程数量。在我的情况下，一旦超过 15，测试就不再起作用了。

通过将其更改回较小的数字，测试可以毫无问题地运行......

# jquery-mobile - 拆分listview文本附加到文本框jquery

> ID：13499960
> 
> 赞同：1
> 
> 时间：2012-11-21T18:42:40.323
> 
> 标签：jquery-mobile

请帮忙，我被困在“&”处拆分列表视图文本。我想将拆分后的文本分别传递给不同的输入框。

```
 $('#art1popsel ul').children('li').on('click',  function () {
      event.preventDefault();
      var selected = $('#art1popsel ul').text();
      var substr = selected.split('&');
      var artikl = substr[0];
      var cijena = substr[1];
      $("#art1").val($('artikl').text());
      $("#cij1").val($('cijena').text());
  }); 
```

它是一个列表视图值：`<li><a href="#R1">122331 SOMETHING&42,00</a></li>`

我哪里做错了？提前Tnx。

# ruby - 使用 rvm gemset 分析内存使用情况是否有技巧？

> ID：13499964
> 
> 赞同：1
> 
> 时间：2012-11-21T18:42:50.603
> 
> 标签：ruby, rvm, ruby-1.8.7, ruby-prof, gemset

我一直在尝试让[ruby​​-prof](https://rubygems.org/gems/ruby-prof)在带有 Ruby 1.8.7 的 Mac OS X 上为内存使用工作，但到目前为止我运气不佳。

我从文档中了解到该`RubyProf::MEMORY`模式[需要修补版本的 Ruby](http://rubyforge.org/tracker/index.php?func=detail&aid=17676&group_id=1814&atid=7062)。我尝试通过 RVM安装 GC 补丁版本（我在[Rails 文档中找到了引用）：](http://edgeguides.rubyonrails.org/performance_testing.html#installing-gc-patched-mri)

```
rvm reinstall 1.8.7 --patch ruby187gc 
```

根据此命令的输出，一切看起来都不错。我在控制台输出中清楚地看到“正在应用补丁 'ruby187gc'”。

尝试使用 RVM gemset 时似乎出现了问题。我编写了以下脚本来测试它：

```
require "ruby-prof"

RubyProf.measure_mode = RubyProf::MEMORY
results = RubyProf.profile do
    # code to measure
end

File.open(File.join(File.dirname(__FILE__), "profile-graph.html"), "w") do |file|
  RubyProf::GraphHtmlPrinter.new(results).print(file)
end 
```

当我在此脚本之前添加 时`rvm use 1.8.7 --patch ruby187gc`，它会创建文件“profile-graph.html”，显示脚本中所有不同方法调用的内存使用情况，正如我所期望的那样。但是，当我尝试类似 时`rvm use 1.8.7@gemset_name --patch ruby187gc`，输出文件包含所有“nan”值。

是什么赋予了？使用修补版本的 Ruby 和 RVM gemset 有什么特别的技巧吗？问题出在其他地方吗？我正在祈祷，希望有人遇到过非常相似的问题并且之前已经解决了这个问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-21T19:19:27.397

啊，我把事情复杂化了。原来我只需要[卸载并重新安装](http://patshaughnessy.net/2010/9/28/ruby187gc-patch)ruby​​-prof gem（在修补 Ruby 之后）。

# java - 如何为我缓存 Spring 应用程序上下文以在许多 JVM 中使用它

> ID：13499965
> 
> 赞同：0
> 
> 时间：2012-11-21T18:42:53.367
> 
> 标签：java, spring, caching, executable-jar

我在一个罐子里有 4 个独立的 java 程序……它是一个 spring 3.0.5 + Maven 项目的罐子……这是我的要求

1）第一个java程序会加载spring应用上下文。

如何在调用其他独立 java 程序时使该应用程序上下文可用？**他们每个人都在自己的 JVM 中运行，**我想我需要将应用程序上下文保存在某种缓存中吗？并且这些程序中的每一个都会在需要时检索应用程序上下文并将上下文更新回缓存中

**我无法在每个程序中加载应用程序上下文......**

请在这里帮助我了解我的思维过程是否正确或是否有其他解决方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T00:07:31.810

您不能（或至少这不是一个好主意）尝试跨多个应用程序共享 Spring 应用程序上下文。这就是为什么它被称为“应用程序上下文”，它定义了在单个应用程序中交互的对象。

如果它们确实是不同的应用程序，我会将您的应用程序上下文重组为 4 个较小的应用程序上下文，用于 4 个不同的应用程序。

另一种选择是调整您的设计，以便第一个应用程序公开一个接口（RMI 或 REST 或其他一些 RPC 机制），以便其他 3 个应用程序可以与第一个应用程序交互。这应该是最后的手段，因为它要复杂得多。

# javascript - JavaScript 数组怪异？

> ID：13499966
> 
> 赞同：1
> 
> 时间：2012-11-21T18:42:58.533
> 
> 标签：javascript, arrays

我认为这只是我不了解 JavaScript 工作原理的一部分。假设我有一个数组，调用它`arr1`，里面有 6 个整数， `[1,2,3,4,5,6]`。如果我创建一个新数组：

```
var arr2 = arr1 
```

（为了保持不变的副本`arr1`），当我更改时`arr1`，更改会反映在`arr2`.

基本上，我在操纵`arr1`. 出于测试目的，我希望有一个未更改的副本，`arr1`这样当我完成后，我可以在我的网页上将它们都控制台记录下来并查看它们之间的差异。但同样，当我在 中进行更改时`arr1`，该更改会反映在`arr2`.

谁能解释为什么会发生这种情况以及可能的解决方法？我对为什么会发生这种情况比如何解决它更感兴趣。

一种方法是创建`arr2`一个单独的数组，并使用 for 循环来填充它`arr1`的数据

```
for(int i = 0; i < arr1.length; i++) arr2[i] = arr1[i] 
```

但是，如果阵列很大，那可能会很昂贵。任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-21T18:44:50.947

当您分配非基元（例如数组）时，**您并没有制作副本。**您正在创建对同一数组的另一个引用。

如果要*复制*数组：

```
var arr2 = arr1.slice();
// or
var arr2 = arr1.concat(); 
```

更多阅读：[https ://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-21T18:44:50.200

对象通过引用而不是值传递。

要创建数组的副本，请尝试：

```
var arr2 = arr1.slice(0); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-21T18:47:24.500

Javascript 通过引用处理数组，因此您的`arr1`和`arr2`实际上指向同一个数组。

您可能想要做的是克隆阵列，您可以使用`slice`

```
var arr2 = arr1.slice(0); 
```

# c# - 通过ftp c#匿名访问和文件上传

> ID：13499967
> 
> 赞同：2
> 
> 时间：2012-11-21T18:43:05.220
> 
> 标签：c#, ftp

我们公司的网站托管在 ORCSWEB。在 ORCS 端设置了某种策略和规则。当人们尝试使用错误的凭据访问我们公司的 ftp 3 次并且失败时，我们的 ftp 将被锁定。我们经常以编程方式通过 ftp 上传文件，但有时会发现 ftp 锁定。所以我与 orcsweb 技术支持人员交谈：他们说我们正在尝试通过代码匿名访问我们的 ftp。所以我用来访问ftp的代码如下。因此，请仔细阅读我的代码，并告诉我代码中有什么问题导致匿名访问，因为我尝试使用正确的凭据进行访问。

```
public static string IsFtpAccessible(string FTPAddress)
    {
        string strError = "";
        FtpWebRequest ftp = (FtpWebRequest)FtpWebRequest.Create(FTPAddress);
        FtpWebResponse res;
        StreamReader reader;

        ftp.Credentials = new NetworkCredential("myuserid", "00000password");
        ftp.KeepAlive = false;
        ftp.Method = WebRequestMethods.Ftp.ListDirectoryDetails;
        ftp.UsePassive = true;
        ftp.UseBinary = true;
        ftp.KeepAlive = false;

        try
        {
            using (res = (FtpWebResponse)ftp.GetResponse())
            {
                reader = new StreamReader(res.GetResponseStream());
            }
        }
        catch(Exception ex)
        {
            strError = "ERROR:" + ex.Message.ToString();
        }
        return strError;
    } 
```

所以告诉我我的代码中缺少什么导致匿名访问。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-21T19:03:41.437

服务器上必须允许匿名访问，根据您的描述，我假设不允许匿名访问。通常，匿名访问凭据的提供方式如下：

```
request.Credentials = new NetworkCredential ("anonymous","janeDoe@contoso.com"); 
```

要点是电子邮件地址是密码。

如果您只是有时发现基于代码的 FTP 被锁定，那么这不是您的问题所在。

# r - 在 R 中分离两个叠加的正态分布

> ID：13499969
> 
> 赞同：3
> 
> 时间：2012-11-21T18:43:08.093
> 
> 标签：r, statistics, probability

我正在 R 中搜索一个函数/包名称，它允许一个人分离两个叠加的正态分布。分布看起来像这样：

```
x<-c(3.95, 3.99, 4.0, 4.04, 4.1, 10.9, 11.5, 11.9, 11.7, 12.3) 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-21T19:18:46.867

过去我使用向量广义线性模型取得了不错的成绩。VGAM[包](http://cran.r-project.org/web/packages/VGAM/index.html)对此很有用。

该`mix2normal1`函数允许估计两个单变量正态分布的混合参数。

小例子

```
require(VGAM)
set.seed(12345)

# Create a binormal distribution with means 10 and 20
data <- c(rnorm(100, 10, 1.5), rnorm(200, 20, 3))

# Initial parameters for minimization algorithm
# You may want to create some logic to estimate this a priori... not always easy but possible
# m, m2: Means - s, s2: SDs - w: relative weight of the first distribution (the second is 1-w)
init.params <- list(m=5, m2=8, s=1, s2=1, w=0.5)

fit <<- vglm(data ~ 1, mix2normal1(equalsd=FALSE), 
                iphi=init.params$w, imu=init.params$m, imu2=init.params$m2, 
                isd1=init.params$s, isd2=init.params$s2)

# Calculated parameters
pars = as.vector(coef(fit))
w = logit(pars[1], inverse=TRUE)
m1 = pars[2]
sd1 = exp(pars[3])
m2 = pars[4]
sd2 = exp(pars[5])

# Plot an histogram of the data
hist(data, 30, col="black", freq=F)
# Superimpose the fitted distribution
x <- seq(0, 30, 0.1)
points(x, w*dnorm(x, m1, sd1)+(1-w)*dnorm(x,m2,sd2), "l", col="red", lwd=2) 
```

这正确地给出了（“真实”参数 - 10、20、1.5、3）

```
> m1
[1] 10.49236
> m2
[1] 20.06296
> sd1
[1] 1.792519
> sd2
[1] 2.877999 
```

![拟合双峰分布](../Images/1ff0e3a3fc8e762bc4e69feed60e748f.png)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-21T18:54:09.847

您可能想要使用`nls`非线性回归工具（或其他非线性回归器）。我猜你有一个代表叠加分布的数据向量。然后，粗略 地说，您的分布`nls(y~I(a*exp(-(x-meana)^2/siga) + b*exp(-(x-meanb)^2/sigb) ),{initial guess values required for all constants} )`在哪里，域在哪里。我根本没有考虑这个，所以我不确定哪种收敛方法不太可能失败。 `y``x`

# php - htaccess with cakephp on justhost 帐户 500 错误

> ID：13499971
> 
> 赞同：4
> 
> 时间：2012-11-21T18:43:10.560
> 
> 标签：php, .htaccess, cakephp

我对 justhost.com 帐户上的 .htaccess 文件有疑问。我经常收到内部 500 错误，并且我在网络上尝试了许多不同的解决方案。这是我的 htaccess 文件的样子：

根 HTACCESS

```
<IfModule mod_rewrite.c>
   RewriteEngine on
   RewriteRule    ^$ app/webroot/    [L]
   RewriteRule    (.*) app/webroot/$1 [L]
</IfModule> 
```

应用程序/HTACCESS

```
<IfModule mod_rewrite.c>
    RewriteEngine on
    RewriteRule    ^$    webroot/    [L]
    RewriteRule    (.*) webroot/$1    [L]
</IfModule> 
```

应用程序/webroot/HTACCESS

```
<IfModule mod_rewrite.c>
    RewriteEngine On
    RewriteCond %{REQUEST_FILENAME} !-d
    RewriteCond %{REQUEST_FILENAME} !-f
    RewriteRule ^(.*)$ index.php [QSA,L]
</IfModule> 
```

问题是我在错误日志中得到了这个：

```
Request exceeded the limit of 10 internal redirects due to probable configuration error. Use 'LimitInternalRecursion' to increase the limit if necessary. Use 'LogLevel debug' to get a backtrace. 
```

我尝试将 RewriteBase 设置为 / 但它没有解决问题。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-28T04:14:52.633

您必须在三个 .htaccess 文件中使用 Rewrite base。根目录中包含目录 app 、 lib 、 plugin 和 vendor 的那个应该看起来像

```
<IfModule mod_rewrite.c>
   RewriteEngine on
   RewriteBase /
   RewriteRule    ^$ app/webroot/    [L]
   RewriteRule    (.*) app/webroot/$1 [L]
</IfModule> 
```

app / htaccess 应该看起来像

```
<IfModule mod_rewrite.c>
    RewriteEngine on
    RewriteBase /app/
    RewriteRule    ^$    webroot/    [L]
    RewriteRule    (.*) webroot/$1    [L]
</IfModule> 
```

最后 app/webroot/htaccess 应该看起来像

```
<IfModule mod_rewrite.c>
    RewriteEngine On
    RewriteBase /app/webroot
    RewriteCond %{REQUEST_FILENAME} !-d
    RewriteCond %{REQUEST_FILENAME} !-f
    RewriteRule ^(.*)$ index.php [QSA,L]
</IfModule> 
```

如果您的 lib 不在根文件夹中，您还必须更改 core.php 中的值以将其映射到相关地址。为此，您可以查看食谱中的高级安装。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-02-23T12:07:08.997

检查您的文件权限。

关闭您的 htacess 文件并写入 echo 1;exit; index.php 并检查天气是否显示。

# twitter-bootstrap - Twitter Bootstrap 背景颜色/容器颜色

> ID：13499974
> 
> 赞同：2
> 
> 时间：2012-11-21T18:43:17.483
> 
> 标签：twitter-bootstrap, background-color

我的 WordPress 网站有一个引导主题，我正在尝试在另一个页面中重新创建主题。

www.bleep.io/blog

主题具有灰色背景，但容器 div 为白色 - 给人以灰色边框的印象。

我试图通过将主体背景颜色和容器背景设置为白色来重新创建它。但这也会使导航栏变白。

任何想法我如何做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T19:01:01.533

嗨，从你所说的你想要一个与 twitter bootstrap css 设计相同的白色背景，但你不能将 body 更改为白色。

所以你需要找到这个代码，因为你的身体有一个类添加到它的标签，在你的页面模板中找到这个（应该就在`<body>`标签之前）：

```
<style type="text/css" id="custom-background-css">
body.custom-background { background-color: #d4d4d4; }
</style> 
```

这就是您要更改背景颜色的方法。

**编辑：**

尝试查找并更改此内容：

```
.container {
background-color: #D4D4D4;
margin: 0px auto;
padding-right:24px;
padding-left:24px;
} 
```

和这个：

```
<style>
body {
padding-top: 60px; 
}
</style> 
```

还请检查页面上的 css 文件，`http://www.bleep.io/contact.html`因为它是一个损坏的链接，这可能是其原因：

```
<link href="assets/css/bootstrap-responsive.css" rel="stylesheet"> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-05-28T14:06:42.870

您可能应该避免编辑主引导文件。为您提供了其他文件以执行自定义。在适当的目录位置查找 main.css 和 main.js 文件。

这将有助于防止现场完全损坏，并且在需要时更容易修复和排除故障。

这当然是针对这些类型的小改动。如果你正在创建一个完整的主题：去吧。

# google-app-engine - 获取在 GAE 上工作的基本 JAXRS + JPA 版本的问题

> ID：13499978
> 
> 赞同：0
> 
> 时间：2012-11-21T18:43:38.963
> 
> 标签：google-app-engine

使用 Eclipse Juno Service Release 1，我创建了一个 Google App Engine 项目，然后手动将 JAX-RS 和 JAXB jar 文件复制到 war/WEB-INF/lib 中（因为试图在“Project Facets”中添加 JAX-RS属性导致错误 - 即需要安装动态 Web 模块，由于 JAR 已包含在 GAE 项目中，我*认为这不是必需的？*

当我在本地运行时，项目启动正常，我可以导航到我的虚拟休息服务，一切正常。

当我查看部署在 GAE 上的版本时，它会在日志文件中产生以下堆栈跟踪。

任何有关解决此问题的步骤的帮助将不胜感激。

非常感谢！抢。

> 2012-11-21 10:35:56.687 /hillingargaeserver 500 2764ms 0kb Mozilla/5.0 (Macintosh; Intel Mac OS X 10_8_2) AppleWebKit/536.26.17 (KHTML, like Gecko) 版本/6.0.2 Safari/536.26.17 87.194。 162.20 - - [21/Nov/2012:10:35:56 -0800] "GET /hillingargaeserver HTTP/1.1" 500 0 "http://hillingartimber.appspot.com/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_8_2) AppleWebKit/536.26.17 (KHTML, like Gecko) Version/6.0.2 Safari/536.26.17" "hillingartimber.appspot.com" ms=2765 cpu_ms=888 loading_request=1 instance=00c61b117cfb3272dbda34e1e6d68729723f98c314 C 2 10:35:56.685 servlet java.lang.IncompatibleClassChangeError 未捕获的异常：在 java.lang.ClassLoader 的 com.google.appengine.runtime.Request.process-ca8643ac95d7d414(Request.java) 实现类。defineClass1(Native Method) at java.lang.ClassLoader.defineClass(ClassLoader.java:634) at java.security.SecureClassLoader.defineClass(SecureClassLoader.java:142) at java.net.URLClassLoader.defineClass(URLClassLoader.java:277)在 sun.reflect.GeneratedMethodAccessor5.invoke(Unknown Source) 在 sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) 在 java.lang.reflect.Method.invoke(Method.java:616) 在 java.lang.ClassLoader .loadClass(ClassLoader.java:266) 在 com.sun.jersey.api.core.ScanningResourceConfig.init(ScanningResourceConfig.java:79) 在 com.sun.jersey.api.core.PackagesResourceConfig.init(PackagesResourceConfig.java:104 ) 在 com.sun.jersey.api.core.PackagesResourceConfig 的 com.sun.jersey.api.core.PackagesResourceConfig.(PackagesResourceConfig.java:78)。(PackagesResourceConfig.java:89) 在 com.sun.jersey.spi.container.servlet.WebComponent.createResourceConfig(WebComponent.java:700) 在 com.sun.jersey.spi.container.servlet.WebComponent.createResourceConfig(WebComponent.java :678) 在 com.sun.jersey.spi.container.servlet.WebComponent.init(WebComponent.java:203) 在 com.sun.jersey.spi.container.servlet.ServletContainer.init(ServletContainer.java:374) 在com.sun.jersey.spi.container.servlet.ServletContainer.init(ServletContainer.java:557) at javax.servlet.GenericServlet.init(GenericServlet.java:212) at org.mortbay.jetty.servlet.ServletHolder.initServlet( ServletHolder.java:440) 在 org.mortbay.jetty.servlet.ServletHolder.doStart(ServletHolder.java:263) 在 org.mortbay.component.AbstractLifeCycle.start(AbstractLifeCycle.java:50) 在 org.mortbay.jetty。servlet.ServletHandler.initialize(ServletHandler.java:685) 在 org.mortbay.jetty.servlet.Context.startContext(Context.java:140) 在 org.mortbay.jetty.webapp.WebAppContext.startContext(WebAppContext.java:1250)在 org.mortbay.jetty.handler.ContextHandler.doStart(ContextHandler.java:517) 在 org.mortbay.jetty.webapp.WebAppContext.doStart(WebAppContext.java:467) 在 org.mortbay.component.AbstractLifeCycle.start(AbstractLifeCycle .java:50) 在 com.google.tracing.TraceContext$TraceContextRunnable.runInContext(TraceContext.java:454) 在 com.google.tracing.TraceContext$TraceContextRunnable$1.run(TraceContext.java:461) 在 com.google.tracing .TraceContext.runInContext(TraceContext.java:703) 在 com.google.tracing.TraceContext$AbstractTraceContextCallback.runInInheritedContextNoUnref(TraceContext.java:338) 在 com.google.tracing.TraceContext$AbstractTraceContextCallback.runInInheritedContext(TraceContext.java:330) 在 com.google.tracing.TraceContext$TraceContextRunnable.run(TraceContext.java:458) 在 java.lang.Thread.run(Thread .java:679)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-01T20:15:39.107

经过大量的实验，我发现我需要添加所有的 JAX-RS Jar 文件（除了在 contrib 文件夹中）和 JAXB Jar 文件（JavaDoc 相关的除外）。

我还将“Servlet”罐子移到所有其他罐子之前。

一个很好的提示，如果您将战争文件复制到 /war/WEB-INF/lib 文件夹中，然后您可以右键单击它们以将它们添加到您的构建路径！- 保存在项目和 WEB-INF 文件夹中的副本。

抢。

# c++ - 散列类散列

> ID：13499979
> 
> 赞同：1
> 
> 时间：2012-11-21T18:43:39.500
> 
> 标签：c++, data-structures, hash

我为学校的作业创建了一个哈希类，它实现了哈希并处理了冲突。当通过上传 25 个项目（学生记录）来测试这个类时，我注意到我的哈希类只是将每个项目按顺序插入到用于存储的数组中（而不是使用哈希码）。然而，在调试模式下， insertItemCollision() 函数会正确计算位置，但项目仍按顺序插入。

是什么导致这种情况发生，如何解决？谢谢！

哈希.h

```
//hash.h
#include <string>
struct Student
{
    std::string name;
    std::string id;
};

class MyHash{
public:
    MyHash();
    int hashCode(int, int);
    void insertItemCollision(std::string, std::string);
    std::string retrieveItem(std::string);
    Student students[100];
}; 
```

哈希.cpp

```
//hash.cpp
#include <iostream>
#include "Hash.h"

MyHash::MyHash()
{
}

int MyHash::hashCode(int id, int max)
{

  return (id % max);
}

void MyHash::insertItemCollision(std::string id, std::string name)
{
    int idInt = atoi(id.c_str());
    int location;

  location = hashCode(idInt, 100);
  while (students[location].id != "")
    location = (location + 1) % 100;
  students[location].id = id;
  students[location].name = name;
}

std::string MyHash::retrieveItem(std::string id)
{
  int location;
  int startLoc;
  int idInt = atoi(id.c_str());
  bool moreToSearch = true;
  bool found;
  std::string item;

  startLoc = hashCode(idInt, 100);
  location = startLoc;
  do
  {
      if (students[location].id == id || students[location].id == "")
      moreToSearch = false;
    else
      location = (location + 1) % 100;
  } while (location != startLoc && moreToSearch);
  found = (students[location].id == id);
  if (found)
      item = students[location].name;
  return item;
} 
```

学生.txt

```
//students.txt
9892 Zack Lewis
4592 Ken Rodriguez
9819 Anderson Clark
1519 Ben Robinson
4597 Abigail Martinez
8542 Madison Garcia
6113 Mia Thompson
8591 Chloe Martin
9491 Daniel Harris
1698 Aiden White
5984 Alexander Walker
6541 Ethan Jackson
9549 Michael Thomas
5949 Emily Anderson
9861 Ava Taylor
5412 Noah Moore
6262 Olivia Wilson
1954 Jayden Miller
4954 William Davis
9567 Emma Brown
5195 Mason Jones
9195 Isabella Williams
5199 Sophia Johnson
1294 Jacob Smith 
```

驱动程序.cpp

```
//driver.cpp
#include <iostream>
#include<string>
#include<fstream>
#include "Hash.h"
using namespace std;

int read(string[]);
void splitString(string, Student&);
void init(string[], MyHash*, int);
int showMenu();

int main()
{
    int size;
    int choice;
    string input[100];
    MyHash* h = new MyHash();
    size = read(input); 
    init(input, h, size);

    do
    {
        choice = showMenu();
        if (choice == 1)
        {
            string id;
            cout << "Enter the id of the sutdent you would like to find: " << endl;
            cin >> id;
            std::string s = (*h).retrieveItem(id);
            if (s != "")
                cout << "The students name is: "<< s << endl;
            else
                cout << "No students matching that id was found!" <<endl;
        }

    }while (choice != 2);

    system("pause");
    return 0;
}

int read(string st[])
{
    int size = 0;
    ifstream infilestream;
    infilestream.open("test.txt");

    for(int i = 0; infilestream.good(); i++)
    {
        getline(infilestream, st[i]);
        cout<<st[i] <<endl;
        size++;
    }
    infilestream.close();
    return size;
}

void splitString(string record, Student& s)
{
    s.id = record.substr(0, 4);
    s.name = record.substr(5, record.length());
}

void init(string inputs[], MyHash* myHash, int size)
{
    for(int i = 0;i < size; i++)
    {
        splitString(inputs[i],myHash->students[i]);
        //cout << stus[i].name << " " << stus[i].id << endl;
        myHash->insertItemCollision(myHash->students[i].id, myHash->students[i].name);
    }
}

int showMenu()
{
    int chs;
    cout << "1\. Find student by id." << endl;
    cout << "2\. Exit." << endl;
    cin >> chs;
    return chs;
} 
```

修复：这两个功能已更新：

```
Student* splitString(string record)
{
    Student* stu = new Student();
    stu->id = record.substr(0, 4);
    stu->name = record.substr(5, record.length());
    return stu;
}

void init(string inputs[], MyHash* myHash, int size)
{
    for(int i = 0;i < size; i++)
    {
        Student* s = new Student();
        s = splitString(inputs[i]);//,myHash->students[i]);
        //cout << stus[i].name << " " << stus[i].id << endl;
        //myHash->insertItemCollision(myHash->students[i].id, myHash->students[i].name);
        myHash->insertItemCollision(s->id, s->name);
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T19:26:45.990

问题是您`students`在插入 ( `insertItemCollision`) 时使用该成员，但在拆分 ( `splitString`) 时也使用该成员。所以他们被覆盖了。

# c - C 在文本中对角线查找字符串

> ID：13499988
> 
> 赞同：-1
> 
> 时间：2012-11-21T18:44:02.797
> 
> 标签：c, algorithm

谁能帮我组织这样的功能（作为我用填字游戏管理的作业）：

1）我有字符串数组（一种文本文件），其中

`row[0] = "str1"` `row[1] = "str2"`等等。

2）每个字符串的长度相同

3）从标准输入输入的单词，如`abcd`

我需要在**对角**`abcd`位置的文本中找到单词（从左到右并不重要，只需要一种算法）并将找到的单词替换为零。可以找到第一个字母，但是如何正确地前进并用零替换文本？谁能给我任何线索？**`strchr`**

 **解决方案：

顺便说一句，Tnx 用于减去。我找到了另一种解决方案，其中每条对角线都生成为 1 条简单线，然后我将`strstr`其应用于查找匹配位置。知道匹配的位置和匹配字符串的长度可以精确地检测匹配单元格在行数组中的位置。

我使用了这样的代码（也许 smn 会发现它很有用）：

```
 /* generating left-right diagonal string str */
  for( col = cols - len; col >= 0; col --, i = 0 ){
  /* where len is the length of searching string */

  while( ( col+i ) < cols && i < rows ){
    *(str + i) = res[i][col+i];
    i ++;
  }

  *(str + i) = '\0';

  //some match seq.
  } 
```

我从左上单元格（第一个字符串的开头）到最后一个顶部单元格（第一个字符串的结尾）做了左右对角线。然后对左列进行相同的程序，因此结果算法将覆盖所有字符串。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T18:47:42.763

您可能想要一个二维字符数组，例如

```
char grid[i][j] 
```

如果你的第一个字母在`grid[i][j]`比对角线的下一个点在

```
grid[i+1][j+1] 
```

依此类推，对于`+1`和的每个组合`-1`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-21T18:48:09.200

找到第一个字母，让我们在 row[5] 处说索引为 7 的字母（so `row[5][7]`）。然后检查是否`row[6][8]`是第二个字母；或`row[4][6]`或 或`row[4][8]`或`row[6][6]`。继续第三个字母，可能是递归的。**

# objective-c - UITableView 在子视图上开始触摸时滚动

> ID：13499989
> 
> 赞同：0
> 
> 时间：2012-11-21T18:44:17.573
> 
> 标签：objective-c, ios, xcode, uitableview

我有一个带有不同类型单元格的表格视图，其中一个有一些 UITextFields 和 UIButton。当我尝试使用从任何这些子视图中开始的触摸来滚动此视图时，表格将不会滚动并将其识别为子视图的“内部触摸”。我之前有过“延迟内容触摸”，但内部按钮的触摸效果不佳。有什么想法可以解决这个问题吗？

我刚刚发现我有一个导致问题的“UITapGestureRecognizer”。感谢您的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T18:51:17.313

在 UITableView 中关闭“可取消的内容触摸”为我解决了这个问题（在 Scroll View / Touch 下的 UITableView 属性检查器中）。我从这个 SO 问题中得到了这个：[Scrolling a UITableView inside a UIScrollView](https://stackoverflow.com/questions/3422915/scrolling-a-uitableview-inside-a-uiscrollview)

从 UIScrollView:canCancelContentTouches 文档：

如果此属性的值为 NO，则一旦内容视图开始跟踪，无论手指移动如何，滚动视图都不会滚动。

# javascript - 最终 CSS3 过渡完成后，正确使用 transitionend 以运行脚本？

> ID：13499993
> 
> 赞同：1
> 
> 时间：2012-11-21T18:44:28.037
> 
> 标签：javascript, jquery, css

我正在尝试学习如何将transitionend与我的CSS3转换一起使用，因此我有一组尺寸为网格的图像以及不透明度从0 - 1更改，理想情况下我想做的是等到所有这些图像已经完成，并且在继续我的下一个代码之前，最后的 transitionend 事件已经触发。目前，我只是想在 transitionend 触发时注销一条消息，但我什么也没得到，这意味着我可能用错了。谁能告诉我如何做到这一点？

**JS 小提琴：http:** [//jsfiddle.net/mWE9W/2/](http://jsfiddle.net/mWE9W/2/)

**CSS**

```
.image img {
  position: absolute;
  top: 0;
  left: 0;
  opacity: 0.01;
  -webkit-transition: all 1s ease-in;
  -webkit-transform: scale(0);
  height: 150px;
  width: 150px;
  display:block;
}

.inner.active .image img {
  -webkit-transform: scale(1);
  top: 0;
  left: 0;
  opacity: 1;
} 
```

**JS**

```
$('.image img').on('webkitTransitionEnd', function(e) {
  console.log('this ran')

  $('h2').fadeIn();
}, false); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T19:13:50.750

1）您不需要方法调用`false`中的最后一个参数。`.on`因此，您的回调从未调用过。

2) 一旦你删除了不需要的参数，你会注意到回调实际上被调用了 16 次。发生这种情况是因为您有 4 个具有 4 个过渡比例的图像。为每个属性设置动画会导致回调被调用。因此，您需要检查图像转换是否完成，并且只有在所有转换完成后才调用您的`.fadeIn()`方法。代码如下所示：

```
var imageCount = $('.image img').length, animatedCount = 0, animCompleteImages = $();
$('img').imagesLoaded(function() {
    $('.inner').addClass('active').on('webkitTransitionEnd', 'img', function(e) {
        if(!animCompleteImages.filter(this).length) {
            animCompleteImages = animCompleteImages.add(this);
            animatedCount++;

            if(animatedCount === imageCount) {
                $('h2').fadeIn();      
            }
        }
    });
});​ 
```

工作 JS fiddle 可[在此处](http://jsfiddle.net/mWE9W/4/)获得。

# php - 查看文件夹而不是 public_html

> ID：13499995
> 
> 赞同：0
> 
> 时间：2012-11-21T18:44:33.703
> 
> 标签：php, .htaccess

我如何“重定向”我的页面，在访问我的域时显示 /v4-beta/ 而不是 ./？

不仅重定向而且在域上显示 v4-beta 的内容，而不是 www.domain.com/v4-beta ？但显示 www.domain.com 但所有内容都来自 v4-beta ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T18:48:54.637

一个简单的解决方案是`include`顶级索引文件中的子文件夹的索引文件。

public_html/index.php：

```
<?php
include("v4-beta/index.php");
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T18:49:15.903

您正在寻找apache http 服务器附带的[重写模块：](http://httpd.apache.org/docs/current/mod/mod_rewrite.html)

```
RewriteEngine on
RewriteCond %{REQUEST_URI} !^/v4-beta/
RewriteRule ^(.*)$ /v4-beta/$1 [L] 
```

必须先加载模块。然后，您可以在邮件服务器配置或所谓的 .htaccess 文件中使用这些命令。第一个选项是首选。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-21T18:50:40.973

访问：

```
RewriteEngine On
RewriteCond %{HTTP_HOST} ^domain.com$
RewriteCond %{REQUEST_URI} !^/v4-beta/
RewriteRule (.*) /v4-beta/$1 
```