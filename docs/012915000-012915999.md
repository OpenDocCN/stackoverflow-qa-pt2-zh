# StackOverflow 问答 12915000-12915999

# jquery - 如何查看显示分钟和秒 CurrentTime 如果使用 jquery，在 html5 中？

> ID：12915018
> 
> 赞同：3
> 
> 时间：2012-10-16T12:43:23.390
> 
> 标签：jquery, html, html5-video

我想在显示屏上看到 CurrentTime 分钟和秒视频。

```
var id = $('#main_video_player');

alert(id.get(0).currentTime); //worked i see '12.324543356'

var minnow=id.get(0).currentTime.split('.')[0];   
alert(minnow); //not worked

var secnow=id.get(0).currentTime.split('.')[1].substr('0','1');   
alert(secnow); //not worked 
```

**谢谢大家的帮助=)**

**显示秒的正确代码：**

```
alert(time.toString().split('.')[0]); 
```

**以小时、分钟和秒为单位显示正确时间的代码：**

```
var id = $('#video');

timenow=id.get(0).currentTime;

if (parseInt(timenow)/60>=1) {
        var h = Math.floor(timenow / 3600);
        timenow = timenow - h * 3600;               
        var m = Math.floor(timenow / 60);
        var s = Math.floor(timenow % 60);
        if(h.toString().length<2){h='0'+h;}
        if(m.toString().length<2){m='0'+m;}
        if(s.toString().length<2){s='0'+s;}
        alert(h+' : '+m+' : '+s);          
    } else {
        var m = Math.floor(timenow / 60);
        var s = Math.floor(timenow % 60);
        if(m.toString().length<2){m='0'+m;}
        if(s.toString().length<2){s='0'+s;}
        alert(m+' : '+s);
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-16T12:54:16.630

您需要将其转换`currentTime`为 a`String`以执行`.split()`并`.substr()`在其上执行，例如

```
var time = id.get(0).currentTime;
var minutes = time.toString().split('.')[0];   
var seconds = time.toString().split('.')[1].substr('0','1'); 
```

要将它们转换回`float`(Number) 以与数值函数一起使用，请执行以下操作：

```
minutes = parseFloat(minutes); 
```

有关工作示例，请参见[http://jsfiddle.net/NpgD5/23/](http://jsfiddle.net/NpgD5/23/)（单击视频以获取时间）。

**编辑：** `currentTime`以秒为单位返回时间，因此您的`minnow`变量实际上是秒和`secnow`毫秒，获取分钟和秒的更好方法`currentTime`是：

```
var time = id.get(0).currentTime;
var minutes = Math.floor(time / 60);   
var seconds = Math.floor(time); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T12:58:16.723

你可以这样编码：

```
var id = $('#main_video_player');
var idn = 'VideoBar_wrap';

alert(id.get(0).currentTime); //worked i see '12.324543356'

var minnow=String(id.get(0).currentTime).split('.')[0];   
alert(minnow);

var secnow=String(String(id.get(0).currentTime).split('.')[1]).substr(0,1);   
alert(secnow); 
```

**您必须将 currentTime 值转换为 String 对象**

# git - Git 壁球合并或 git force push？

> ID：12915025
> 
> 赞同：2
> 
> 时间：2012-10-16T12:43:51.143
> 
> 标签：git, project-management, git-merge, git-rebase, gitlab

我们正在使用[gitlab](http://gitlabhq.com/)。主分支受到保护，只有项目所有者才能向主分支提交/接受合并请求。其他开发人员发送合并请求以将他们的代码放入 master。

当我们发送合并请求（从功能分支到主分支）时，其中一位开发人员会审查代码。如果有任何建议/意见，开发人员会更新他的代码，合并请求也会显示新的提交。

然后 QA 开始在分支上进行测试，开发人员在同一分支中修复错误。当一切都完成并且一切顺利时，QA 在合并请求中添加一条评论，说明它已经过测试。

由于有很多提交，但功能是一个，为了便于管理，我们希望将其作为单个提交推送。

这是项目所有者和我矛盾的地方。我要求项目所有者做一个`git merge --squash`，但他要求我通过将所有内容压缩到最后一次提交并强制推送来重新设置我的分支。既然分支在这之后会死掉，他的论点是，它不太可能造成任何麻烦。

那么，这里最好的方法是什么？

PS 在 gitlab 中没有进行壁球合并的 GUI 选项，唯一可用的选项是按原样合并所有提交。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-17T21:37:48.877

这两个操作的结果非常相似，一个在 master 之上的提交和一个最终会死掉的特性分支。

合并 --squash 迫使项目所有者处理可能出现的冲突。为了避免这个问题，您必须在合并之前在您的功能分支中合并 origin/master。

之后，最终结果的唯一区别是操作后特征分支指向的位置：

1.  在`merge origin/master, merge --squash`: feature 分支之后将指向一个垂死的分支，该分支最终会死掉，但会有些混乱：*它已经合并了吗？*
2.  在`rebase, force push, merge --ff`功能分支之后将指向被压扁的提交。

你必须决定：

*   强制您“删除”功能分支的过程，使其成为保留功能分支历史的明确选择（通过在变基之前创建新的 ref 并推送它 - 可能使用更新的名称：featureA_merged）
*   一个保留所有功能分支但强制您记住/管理已合并的分支的过程。

恕我直言，变基和强制推送毕竟是一个更清洁的解决方案。您处理潜在的冲突，并将引用移出垂死的分支，这可能会在未来引起麻烦和/或混乱。即使做一些现在看起来*不对*的事情，力推。

# api - j2me是否有一些通用的功能来打开/关闭手机手电筒？

> ID：12915026
> 
> 赞同：1
> 
> 时间：2012-10-16T12:44:01.480
> 
> 标签：api, java-me, flashlight

例如，我有一个基于 Java 的旧手机，我想编写一个应用程序来控制它的手电筒二极管。有没有什么通用的方法可以通过 j2me 做到这一点？
就像是：

启用手电筒（）；

这应该适用于每部基于 Java 的手机。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T05:41:13.417

如果您的手机支持广泛传播的 MIDP 2 (JSR 118)，那么您可以使用[Display.flashBacklight](http://docs.oracle.com/javame/config/cldc/ref-impl/midp2.0/jsr118/javax/microedition/lcdui/Display.html#flashBacklight%28int%29) API：

> 请求设备背光的闪烁效果。闪烁效果旨在用于吸引用户的注意力或作为游戏的特殊效果。闪烁的示例是循环打开和关闭背光或反复从暗到亮。返回值指示背光的闪烁是否可以由应用程序控制。
> 
> 闪烁效果在请求的持续时间内发生，或者如果请求的持续时间为零，则将其关闭。该方法立即返回；也就是说，它不能在闪烁效果运行时阻塞调用者。
> 
> 仅当 Display 位于前台时才会调用此方法。如果 Display 在后台，此方法必须不执行任何操作并返回 false。
> 
> 设备可以限制或覆盖持续时间。对于不包含可控背光的设备，调用此方法返回 false....

一般来说，您的问题的答案是**否定**的——例如非常旧的 MIDP 1.0 (JSR 37) Java 手机不支持这样的功能。

# django - 使用 LDAP 身份验证后端时，Django barfs 对会话对象进行酸洗，

> ID：12915030
> 
> 赞同：1
> 
> 时间：2012-10-16T12:44:14.073
> 
> 标签：django, ldap, pickle, django-authentication

我已经按照[这个示例](http://www.djm.org.uk/using-django-auth-ldap-active-directory-ldaps/)设置了[Django LDAP 身份验证](http://packages.python.org/django-auth-ldap/)。而且似乎后端确实有效，即我已经确认

*   LDAP 访问通过[python-ldap完美运行](http://www.python-ldap.org/)
*   调试显示用户实际上可以进行身份​​验证
*   创建用户和用户配置文件对象（并毫无问题地存储到数据库）

但是，当成功登录后的结果页面被呈现时，我得到一个`PicklingError: Can't pickle <type 'module'>: attribute lookup __builtin__.module failed`

使用`model`身份验证后端时不存在此类问题。此外，失败调用中的变量看起来都还不错。这是回溯：

```
Traceback:
File "<anonymized>/lib/Django-1.4.1-py2.6.egg/django/core/handlers/base.py" in get_response
  188\.                 response = middleware_method(request, response)
File "<anonymized>/lib/Django-1.4.1-py2.6.egg/django/contrib/sessions/middleware.py" in process_response
  36\.                 request.session.save()
File "<anonymized>/lib/Django-1.4.1-py2.6.egg/django/contrib/sessions/backends/db.py" in save
  52\.             session_data=self.encode(self._get_session(no_load=must_create)),
File "<anonymized>/lib/Django-1.4.1-py2.6.egg/django/contrib/sessions/backends/base.py" in encode
  79\.         pickled = pickle.dumps(session_dict, pickle.HIGHEST_PROTOCOL)

Exception Type: PicklingError at /
Exception Value: Can't pickle <type 'module'>: attribute lookup __builtin__.module failed 
```

会话字典与来自后端的用户非常相似，`model`但项目除外`'_auth_user_backend': 'django_auth_ldap.backend.LDAPBackend',`

# java - CardLayout 使用 JMenu 发送错误消息

> ID：12915031
> 
> 赞同：2
> 
> 时间：2012-10-16T12:44:24.120
> 
> 标签：java, swing, awt, layout-manager, cardlayout

大家好，我想创建一个简单的程序，在其中我可以使用 menuItems 控制每个 JPanel。例如，如果我选择 File->New，其中 New 是 JmenuItem，它将显示一个名为 newPanel 的 JPanel。此外，如果我选择 Edit->Edit，它将显示名为 editPanel 的 JPanel 以及添加到其中的对象。到目前为止，这就是我所构建的：

```
public class CardLayoutwithMenuBar extends JFrame implements ActionListener {

    private JMenuBar menu;
    private JMenu fileMenu;
    private JMenu editMenu;
    private JMenu exitMenu;

    private JMenuItem openItem;
    private JMenuItem newItem;
    private JMenuItem editItem;
    private JMenuItem exitItem;

    private JPanel newPanel;
    private JPanel openPanel;
    private JPanel editPanel;
    private JPanel exitPanel;

    static private CardLayout cardView;
    static private JPanel cardPanel;

    public CardLayoutwithMenuBar(){
        this.setVisible(true);
        this.setTitle("Controlling Different Panel Using CardLayout");
        this.setSize(400, 150);
        this.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

        //Create Menu bar and add to Frame
        menu = new JMenuBar();
        this.setJMenuBar(menu);

        fileMenu = new JMenu("File");
        editMenu = new JMenu("Edit");
        exitMenu = new JMenu("Exit");

        menu.add(fileMenu);
        menu.add(editMenu);
        menu.add(exitMenu);

        newItem = new JMenuItem("New File");
        openItem = new JMenuItem("File Open");
        editItem = new JMenuItem("Edit Entry");
        exitItem = new JMenuItem("Exit");

        fileMenu.add(newItem);
        fileMenu.add(openItem);
        editMenu.add(editItem);
        exitMenu.add(exitItem);

        //Declare object cardView and cardPanel and set layout of cardPanel to CardLayout
        cardView = new CardLayout();
        cardPanel = new JPanel();
        cardPanel.setLayout(cardView);

        //Create sub-panels that would correspond to each function in the menu item ex. newItem, openItem etc...
        newPanel = new JPanel();
        openPanel = new JPanel();
        editPanel = new JPanel();
        exitPanel = new JPanel();

        //add the sub-panels to the main cardpanel 
        cardPanel.add("New", newPanel);
        cardPanel.add("Open", openPanel);
        cardPanel.add("Edit",editPanel);
        cardPanel.add("Exit",exitPanel);

        newItem.addActionListener(this);
        openItem.addActionListener(this);
        editItem.addActionListener(this);
        exitItem.addActionListener(this);

        this.getContentPane().add(cardPanel, BorderLayout.CENTER);
    }

    public void actionPerformed(ActionEvent evt){
        String menuItemAction = evt.getActionCommand();

            if (menuItemAction.equals("New File")){
                cardView.show(newPanel, "New");
            }
            else if (menuItemAction.equals("File Open")){
                cardView.show(openPanel, "Open");
            }
            else if (menuItemAction.equals("Edit Entry")){
                cardView.show(editPanel, "Edit");
            }
            else if (menuItemAction.equals("Exit")){
                cardView.show(exitPanel, "Exit");
            }
            else{
                System.out.println("Opppsss you pressed something else");
        }
    }   
} 
```

当我尝试运行这个程序时，我总是得到这个错误：

```
Exception in thread "AWT-EventQueue-0" java.lang.IllegalArgumentException: wrong parent for CardLayout
    at java.awt.CardLayout.checkLayout(CardLayout.java:404)
    at java.awt.CardLayout.show(CardLayout.java:526)
    at com.JMenuSample.CardLayoutwithMenuBar.actionPerformed(CardLayoutwithMenuBar.java:132)
    at javax.swing.AbstractButton.fireActionPerformed(AbstractButton.java:2012)
    at javax.swing.AbstractButton$Handler.actionPerformed(AbstractButton.java:2335)
    at javax.swing.DefaultButtonModel.fireActionPerformed(DefaultButtonModel.java:404)
.... and the list goes on 
```

谁能帮我解决这个问题？提前致谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-16T12:55:03.400

*   必须使用适当的方法`CardLayout`-[`public void show(Container parent, String name)`](http://docs.oracle.com/javase/7/docs/api/java/awt/CardLayout.html#show%28java.awt.Container,%20java.lang.String%29)

*   然后使用`cardView.show(cardPanel, "New");` `(insted of cardView.show(newPanel, "New");)`

*   其余的`newPanel as Container`留下来，只改变第二次。`String`形式参数

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-16T13:04:40.777

+1 到 mKorbel（击败我）

但是这里是：

*   `setVisible`在创建之前不要调用`JFrame`。
*   不要使用 setSize 而是找到一个适当的`LayoutManager`或覆盖`getPreferredSize`的`JComponent`
*   调用实例`pack()`_`JFrame`
*   在 s 上使用`switch`块`String`（来自 java 7）而不是`if`语句，因为它更有效
*   不要不必要地`extend`上课`JFrame`

错误的原因在这里：

```
 if (menuItemAction.equals("New File")){
                cardView.show(newPanel, "New");
            }
            else if (menuItemAction.equals("File Open")){
                cardView.show(openPanel, "Open");
            }
            else if (menuItemAction.equals("Edit Entry")){
                cardView.show(editPanel, "Edit");
            }
            else if (menuItemAction.equals("Exit")){
                cardView.show(exitPanel, "Exit");
            }
            else{
                System.out.println("Opppsss you pressed something else");
        } 
```

你的父母是你的`cardPanel`，而不是你想要显示的面板，这是由字符串参数给出的：

```
cardView.show(cardPanel, "New"); 
```

请参阅下面的更改代码：

```
import java.awt.BorderLayout;
import java.awt.CardLayout;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import javax.swing.JFrame;
import javax.swing.JMenu;
import javax.swing.JMenuBar;
import javax.swing.JMenuItem;
import javax.swing.JPanel;
import javax.swing.SwingUtilities;

public class CardLayoutWithMenuBar implements ActionListener {

    private JMenuBar menu;
    private JMenu fileMenu;
    private JMenu editMenu;
    private JMenu exitMenu;
    private JMenuItem openItem;
    private JMenuItem newItem;
    private JMenuItem editItem;
    private JMenuItem exitItem;
    private JPanel newPanel;
    private JPanel openPanel;
    private JPanel editPanel;
    private JPanel exitPanel;
    private CardLayout cardView;
    private JPanel cardPanel;

    public CardLayoutWithMenuBar() {
        JFrame frame = new JFrame();
        frame.setTitle("Controlling Different Panel Using CardLayout");
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

        initComponents(frame);

        frame.pack();
        frame.setVisible(true);
    }

    @Override
    public void actionPerformed(ActionEvent evt) {

        String menuItemAction = evt.getActionCommand();

        switch (menuItemAction) {
            case "New File":
                cardView.show(cardPanel, "New");
                break;
            case "File Open":
                cardView.show(cardPanel, "Open");
                break;
            case "Edit Entry":
                cardView.show(cardPanel, "Edit");
                break;
            case "Exit":
                cardView.show(cardPanel, "Exit");
                break;
            default:
                System.out.println("Opppsss you pressed something else");
                break;
        }
    }

    private void initComponents(JFrame frame) {
        //Create Menu bar and add to Frame
        menu = new JMenuBar();
        frame.setJMenuBar(menu);

        fileMenu = new JMenu("File");
        editMenu = new JMenu("Edit");
        exitMenu = new JMenu("Exit");

        menu.add(fileMenu);
        menu.add(editMenu);
        menu.add(exitMenu);

        newItem = new JMenuItem("New File");
        openItem = new JMenuItem("File Open");
        editItem = new JMenuItem("Edit Entry");
        exitItem = new JMenuItem("Exit");

        fileMenu.add(newItem);
        fileMenu.add(openItem);
        editMenu.add(editItem);
        exitMenu.add(exitItem);

        //Declare object cardView and cardPanel and set layout of cardPanel to CardLayout
        cardView = new CardLayout();
        cardPanel = new JPanel(cardView);

        //Create sub-panels that would correspond to each function in the menu item ex. newItem, openItem etc...
        newPanel = new JPanel();
        openPanel = new JPanel();
        editPanel = new JPanel();
        exitPanel = new JPanel();

        //add the sub-panels to the main cardpanel 
        cardPanel.add("New", newPanel);
        cardPanel.add("Open", openPanel);
        cardPanel.add("Edit", editPanel);
        cardPanel.add("Exit", exitPanel);

        newItem.addActionListener(this);
        openItem.addActionListener(this);
        editItem.addActionListener(this);
        exitItem.addActionListener(this);

       frame.getContentPane().add(cardPanel, BorderLayout.CENTER);
    }

    public static void main(String... args) {

        //create frame and components on EDT
        SwingUtilities.invokeLater(new Runnable() {
            @Override
            public void run() {
                CardLayoutWithMenuBar cardLayoutWithMenuBar = new CardLayoutWithMenuBar();
            }
        });
    }
} 
```

# haskell - 启动开发服务器时yesod开发失败

> ID：12915036
> 
> 赞同：4
> 
> 时间：2012-10-16T12:44:39.903
> 
> 标签：haskell, yesod

我开始阅读 Yesod 并尝试将它安装在我的 Linux Mint Maya 64 位机器上。已经安装了 haskell 平台，我刚刚使用 cabal install yesod-platform 安装了 yesod-platform 包，并且一切正常。

下一步是调用 yesod init 并响应所有问题 - 应用程序名称：test。当我调用 yesod devel 时，问题就开始了......这就是我所拥有的：

```
Yesod devel server. Press ENTER to quit
Resolving dependencies...
Configuring test-0.0.0...
Rebuilding application...
Building test-0.0.0...
Preprocessing library test-0.0.0...
Registering test-0.0.0...
Starting development server: runghc -package-confdist/package.conf.inplace devel.hs

devel.hs:2:1:
    Failed to load interface for `Application'
    It is not a module in the current program, or in any known package.
Exit code: ExitFailure 1 
```

我对这个问题有点迷茫 - 我做了很多相关的研究，但我没有运气......

任何人都可以帮助解决这个问题吗？

这是我的 ghc-pkg 列表：

```
 /var/lib/ghc/package.conf.d:
    Cabal-1.14.0
    GLUT-2.1.2.1
    HDBC-2.3.1.1
    HDBC-odbc-2.2.3.0
    HTTP-4000.2.2
    HUnit-1.2.4.2
    MonadCatchIO-mtl-0.3.0.4
    OpenGL-2.2.3.1
    QuickCheck-2.4.2
    SHA-1.5.0.0
    aeson-0.6.0.0
    ansi-terminal-0.5.5
    array-0.4.0.0
    asn1-data-0.6.1.3
    attoparsec-0.10.1.1
    attoparsec-conduit-0.2.0
    attoparsec-enumerator-0.3
    authenticate-1.0.0.1
    base-4.5.0.0
    base-unicode-symbols-0.2.2.3
    base64-bytestring-0.1.1.0
    bin-package-db-0.0.0.0
    binary-0.5.1.0
    blaze-builder-0.3.1.0
    blaze-builder-conduit-0.2.0
    blaze-html-0.4.3.1
    byteorder-1.0.3
    bytestring-0.9.2.1
    bytestring-lexing-0.4.0
    case-insensitive-0.4.0.1
    cereal-0.3.5.1
    certificate-1.1.0
    cgi-3001.1.8.2
    clientsession-0.7.4.1
    conduit-0.2.0
    containers-0.4.2.1
    convertible-1.0.11.0
    cookie-0.4.0
    cprng-aes-0.2.3
    crypto-api-0.9
    crypto-conduit-0.1.3.1
    crypto-pubkey-types-0.1.0
    cryptocipher-0.3.0
    cryptohash-0.7.4
    css-text-0.1.1
    data-default-0.3.0
    deepseq-1.3.0.0
    directory-1.1.0.2
    dlist-0.5
    email-validate-0.2.8
    entropy-0.2.1
    enumerator-0.4.18
    extensible-exceptions-0.1.1.4
    failure-0.2.0
    fast-logger-0.0.2
    fgl-5.4.2.4
    file-embed-0.0.4.1
    filepath-1.3.0.0
    (ghc-7.4.1)
    ghc-prim-0.2.0.0
    hamlet-0.10.8
    hashable-1.1.2.3
    haskell-src-1.0.1.5
    (haskell2010-1.1.0.1)
    (haskell98-2.0.0.1)
    hjsmin-0.0.15
    hoopl-3.8.7.3
    hpc-0.5.1.1
    html-1.0.1.2
    http-conduit-1.2.5
    http-date-0.0.2
    http-types-0.6.9
    integer-gmp-0.4.0.0
    language-javascript-0.4.10
    largeword-1.0.1
    lifted-base-0.1.0.3
    mime-mail-0.4.1.1
    monad-control-0.3.1
    mtl-2.0.1.0
    network-2.3.0.10
    old-locale-1.0.0.4
    old-time-1.1.0.0
    parallel-3.2.0.2
    parsec-3.1.2
    path-pieces-0.1.0
    persistent-0.8.0.1
    persistent-template-0.8.1.1
    pool-conduit-0.0.0.1
    pretty-1.1.1.0
    primitive-0.4.1
    process-1.1.0.1
    pureMD5-2.1.0.3
    pwstore-fast-2.2
    random-1.0.1.1
    ranges-0.2.4
    regex-base-0.93.2
    regex-compat-0.95.1
    regex-posix-0.95.1
    resource-pool-0.2.1.0
    rts-1.0
    safe-0.3.3
    semigroups-0.8
    shakespeare-0.10.3.1
    shakespeare-css-0.10.7
    shakespeare-i18n-0.0.1
    shakespeare-js-0.11.0.1
    shakespeare-text-0.10.5
    simple-sendfile-0.2.0
    skein-0.1.0.5
    socks-0.4.1
    stm-2.2.0.1
    syb-0.3.6
    system-filepath-0.4.6
    tagged-0.2.3.1
    tagsoup-0.12.6
    template-haskell-2.7.0.0
    text-0.11.1.13
    time-1.4
    tls-0.9.0
    tls-extra-0.4.3
    transformers-0.2.2.0
    transformers-base-0.4.1
    unix-2.5.1.0
    unix-compat-0.3.0.1
    unordered-containers-0.1.4.6
    utf8-light-0.4.0.1
    utf8-string-0.3.7
    vault-0.1.0.0
    vector-0.9.1
    wai-1.1.0.1
    wai-app-static-1.1.2
    wai-extra-1.1.0.1
    wai-logger-0.1.4
    warp-1.1.0.1
    xhtml-3000.2.0.5
    xml-conduit-0.5.3
    xml-types-0.3.1
    xss-sanitize-0.3.1
    yaml-0.5.2
    yesod-0.10.1.3
    yesod-auth-0.8.1.1
    yesod-core-0.10.2.1
    yesod-form-0.4.2
    yesod-json-0.3.1
    yesod-persistent-0.3.1
    yesod-routes-0.0.1
    yesod-static-0.10.1
    zlib-0.5.3.3
    zlib-bindings-0.0.3.2
    zlib-conduit-0.2.0

/home/ionica/.ghc/x86_64-linux-7.4.1/package.conf.d:
    Cabal-1.16.0.1
    HDBC-2.3.1.1
    HDBC-odbc-2.3.1.0
    HDBC-sqlite3-2.3.3.0
    HaXml-1.23.3
    SHA-1.5.1
    aeson-0.6.0.2
    ansi-terminal-0.5.5
    asn1-data-0.7.1
    attoparsec-0.10.2.0
    attoparsec-conduit-0.5.0.2
    authenticate-1.3.1.1
    base-unicode-symbols-0.2.2.4
    base64-bytestring-1.0.0.0
    blaze-builder-0.3.1.0
    blaze-builder-conduit-0.5.0.1
    blaze-html-0.5.1.0
    blaze-markup-0.5.1.1
    byteorder-1.0.3
    cairo-0.12.3.1
    case-insensitive-0.4.0.3
    cereal-0.3.5.2
    certificate-1.2.8
    cipher-aes-0.1.2
    clientsession-0.8.0.1
    conduit-0.5.2.5
    conduit-0.5.2.6
    convertible-1.0.11.1
    cookie-0.4.0.1
    cpphs-1.14
    cprng-aes-0.2.4
    cpu-0.1.1
    crypto-api-0.10.2
    crypto-conduit-0.4.0.1
    crypto-pubkey-types-0.1.1
    cryptocipher-0.3.5
    cryptohash-0.7.5
    css-text-0.1.1
    data-default-0.5.0
    date-cache-0.3.0
    derive-2.5.11
    dlist-0.5
    email-validate-0.2.8
    entropy-0.2.1
    failure-0.2.0.1
    fast-logger-0.3.1
    file-embed-0.0.4.6
    filesystem-conduit-0.5.0.1
    ghc-paths-0.1.0.8
    gio-0.12.3
    glib-0.12.3.1
    gtk-0.12.3.1
    hamlet-1.1.1
    hashable-1.1.2.5
    haskell-src-exts-1.13.5
    hjsmin-0.1.3
    hspec-1.3.0.1
    hspec-expectations-0.3.0.2
    html-conduit-0.1.0.2
    http-conduit-1.6.1.2
    http-date-0.0.2
    http-types-0.7.3.0.1
    language-javascript-0.5.5
    largeword-1.0.3
    lifted-base-0.1.2
    lifted-base-0.2
    mime-mail-0.4.1.2
    mime-types-0.1.0.0
    monad-control-0.3.1.4
    monad-logger-0.2.1
    network-conduit-0.6.0
    network-conduit-0.6.1.1
    pango-0.12.3
    parallel-3.2.0.2
    parallel-3.2.0.3
    parallel-io-0.3.2.1
    path-pieces-0.1.2
    pem-0.1.1
    persistent-1.0.1.3
    persistent-sqlite-0.8.0
    persistent-sqlite-1.0.0
    persistent-template-1.0.0.2
    polyparse-1.8
    pool-conduit-0.1.0.3
    primitive-0.5
    primitive-0.5.0.1
    pureMD5-2.1.2.1
    pwstore-fast-2.3
    ranges-0.2.4
    resource-pool-0.2.1.1
    resourcet-0.4.0.1
    resourcet-0.4.0.2
    safe-0.3.3
    semigroups-0.8.4.1
    shakespeare-1.0.1.4
    shakespeare-css-1.0.1.5
    shakespeare-i18n-1.0.0.2
    shakespeare-js-1.0.0.6
    shakespeare-text-1.0.0.5
    silently-1.2.0.2
    simple-sendfile-0.2.8
    skein-0.1.0.9
    socks-0.4.2
    split-0.1.4.3
    stringsearch-0.3.6.4
    system-fileio-0.3.10
    system-filepath-0.4.7
    tagged-0.4.4
    tagsoup-0.12.8
    tagstream-conduit-0.5.3
    tar-0.3.2.0
    tar-0.4.0.1
    tls-0.9.11
    tls-extra-0.4.7
    transformers-base-0.4.1
    uniplate-1.6.7
    unix-compat-0.4.0.0
    unix-time-0.1.2
    unordered-containers-0.2.2.1
    utf8-string-0.3.7
    vault-0.2.0.1
    vector-0.10
    vector-0.10.0.1
    void-0.5.8
    wai-1.3.0.1
    wai-app-static-1.3.0.2
    wai-extra-1.3.0.3
    wai-logger-0.3.0
    wai-test-1.3.0
    warp-1.3.4.1
    xml-conduit-1.0.3.1
    xml-types-0.3.3
    xss-sanitize-0.3.2
    yaml-0.8.1
    yesod-1.1.2
    yesod-auth-1.1.1.2
    yesod-core-1.1.3.1
    yesod-default-0.6.1
    yesod-default-1.1.0.2
    yesod-form-1.1.3
    yesod-json-1.1.0
    yesod-persistent-1.1.0
    yesod-platform-1.1.4
    yesod-routes-1.1.0.1
    yesod-routes-1.1.0.2
    yesod-static-1.1.0.1
    yesod-test-0.3.0.1
    zlib-bindings-0.1.1.1
    zlib-conduit-0.5.0.1 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T14:43:24.860

在彻底清理系统之后——我的意思是卸载 haskell-platform、yesod-platform 并删除与 haskell、yesod 和 ghc 相关的文件——然后重新安装 haskell-platform + yesod-platform 一切都很好。

# c++ - 链接器错误：已定义

> ID：12915037
> 
> 赞同：4
> 
> 时间：2012-10-16T12:44:44.867
> 
> 标签：c++, mfc, linker, visual-studio-2012

我正在尝试在 Microsoft Visual Studio 2012 中编译我的 Visual C++ 项目（使用 MFC），它返回以下错误：

```
error LNK2005: "void * __cdecl operator new(unsigned int)" (??2@YAPAXI@Z) already defined in LIBCMTD.lib(new.obj)   
error LNK2005: "void __cdecl operator delete(void *)" (??3@YAXPAX@Z) already defined in LIBCMTD.lib(dbgdel.obj) 
error LNK2005: "void __cdecl operator delete[](void *)" (??_V@YAXPAX@Z) already defined in LIBCMTD.lib(delete2.obj)
error LNK1169: one or more multiply defined symbols found 
```

[所以我用谷歌搜索了一下，找到了这个页面：http: //support.microsoft.com/](http://support.microsoft.com/?scid=kb%3Ben-us%3B148652&x=13&y=8) ?scid= kb%3Ben-us%3B148652&x =13&y=8 我尝试了解决方案一，但“忽略库”框不存在，对象/库模块框也是如此。对于 Ignore Libraries，我找到了 Ignore specific library，但跳过第五步只会给我 17xx 错误。

我用谷歌搜索了很多，但总是回到同一个页面，如何在 Visual Studio 2012 中解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T12:50:54.663

The most likely cause of the problem is having different versions of the C runtime (multi- or single-threaded, debug- or non-debug) linked for different parts of the project. Perhaps your main executable has one runtime linked but you are linking to a library built with a different runtime. Use depends.exe to check each library that you are linking explicitly in turn to find the odd one out.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-30T14:49:20.970

我解决了这个问题：我发现这是包含顺序的问题。但是，强制每个文件都包含 afx.h (properties->c/c++/advanced/force include file) 为我解决了这个问题。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-03-29T11:13:51.953

我还发现，如果您使用 LTGC（链接时代码生成）并且您刚刚为`operator new`CRT 中存在的其他符号添加了自定义实现，那么您应该进行*完全重建*，然后增量链接器才会省略“弱引用”。即使在 VS 2015 中也是如此。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-03-04T01:04:20.227

好的，我刚刚在将 .c 文件（编译单元）与 MFC 项目结合时处理了这个问题。.c 文件与我链接的库中的名称（编译单元）相同。我更改了文件名，链接器混乱消失了。

我尝试了上面的其他解决方案，但都没有奏效。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-26T03:30:39.360

您在使用 Visual Studio 2008 或 2010 时遇到过这个问题吗？

我在 Visual Studio 2012 中看到了类似的失败：在早期版本的工具链中链接良好的代码现在提供了多个`error LNK2005: "void * __cdecl operator new(unsigned __int64,void *)" (??2@YAPEAX_KPEAX@Z) already defined`. 与您不同，我们没有使用 MFC。

当然，这不是您的问题的解决方案，但它可能指向 Microsoft 编译器或链接器开发中的回归错误。如果您可以验证相同的代码在 VS2010 中可以正常工作，那将倾向于确认我的诊断。

（要检查这一点，只需将解决方案中所有项目的项目属性>配置属性>常规>平台工具集从“v110”设置为“v100”，然后全部重建。假设您在同一台机器上安装了VS2010，您可以这样做这一切都没有离开VS2012。）

编辑添加：此错误已作为[错误 #768788](http://connect.microsoft.com/VisualStudio/feedback/details/768788)报告给 Microsoft 。

# c++ - 使用静态方法编译时出错

> ID：12915038
> 
> 赞同：0
> 
> 时间：2012-10-16T12:44:45.283
> 
> 标签：c++, static-methods

在我的标题中说明，试图在我的代码中使用静态方法编译我的文件。我`computeCivIndex()`正在尝试从用户那里获取 5 个输入并进行计算并返回浮点值。

`this.sunType`适用于 java 语法，但对于 V++，如果两者同名，我应该用什么将它们链接在一起？

我的代码中有 getter 和 setter 方法，还有 2 个构造函数，它们太长而无法发布。

这是我的错误：

```
test.cpp:159: error: cannot declare member function ‘static float LocationData::computeCivIndex(std::string, int, int, float, float)’ to have static linkage
test.cpp: In static member function ‘static float LocationData::computeCivIndex(std::string, int, int, float, float)’:
test.cpp:161: error: ‘this’ is unavailable for static member functions 
```

编码：

```
class LocationData
{   
    private:
    string sunType;
    int noOfEarthLikePlanets;
    int noOfEarthLikeMoons;
    float aveParticulateDensity;
    float avePlasmaDensity;
    public:
    static float computeCivIndex(string,int,int,float,float);
};
static float LocationData::computeCivIndex(string sunType, int noOfEarthLikePlanets,int     noOfEarthLikemoons, float aveParticulateDensity, float avePlasmaDensity)
{
    this.sunType = sunType;
    this.noOfEarthLikePlanets = noOfEarthLikePlanets;
    this.noOfEarthLikeMoons = noOfEarthLikeMoons;
    this.aveParticulateDensity = aveParticulateDensity;
    this.avePlasmaDensity = avePlasmaDensity;
    if(sunType == "Type O")
         //and more for computation
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-16T12:46:52.673

`static`声明延迟`static`执行。静态实现意味着您的函数符号仅在实现它的文件中可用。

只需在函数实现之前删除静态。此外，静态函数是类函数，您不能访问其中的类的非静态成员。这些意味着在没有对象实例的情况下使用，因此没有实例变量。

```
float LocationData::computeCivIndex(string sunType, int noOfEarthLikePlanets,int     noOfEarthLikemoons, float aveParticulateDensity, float avePlasmaDensity)
{
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-16T12:47:22.437

编译器错误对我来说似乎相当清楚：

> 错误：“this”对于静态成员函数不可用

基本上，因为成员是`static`，所以它不会在该类型的特定实例的上下文中执行 - 所以`this`在方法中使用是没有意义的。您*确实*尝试使用`this`，因此出现错误。

来自[MSDN 文档`static`](http://msdn.microsoft.com/en-us/library/s1sb61xd.aspx)：

> 在类声明中声明成员函数时，static 关键字指定该函数由该类的所有实例共享。静态成员函数无法访问实例成员，因为该函数没有隐式 this 指针。要访问实例成员，请使用实例指针或引用的参数声明函数。

听起来您只是不想将成员声明为静态的。

（顺便说一句，我不喜欢说它“由类的所有实例共享”的描述 - 我更喜欢它不特定于类的任何特定实例的想法。不必创建*任何*实例，完全没有。）

# http - URL 只是删除参数

> ID：12915040
> 
> 赞同：0
> 
> 时间：2012-10-16T12:44:49.877
> 
> 标签：http

我创建了一个在我的网站上使用的 API。

我制作的 API 使用 mysql_real_escape_string 剥离所有内容，然后将其放入数据库。

但我遇到的问题是我的 php 脚本用于访问 API 的 URL 有时会被缩短...

我已将其范围缩小到其中一个参数...

当它的*Ford Mondeo 22'*传递给 simplexml_load_file 的 URL 是

* * *

[http://mydomain.com/api/create.xml?api_number=brho15p6z1dhqwf5tsff&env=live&number=AJ20023232&title=](http://mydomain.com/api/create.xml?api_number=brho15p6z1dhqwf5tsff&env=live&number=AJ20023232&title=Ford)福特蒙迪欧22'&image=http://mydomain.com/wp-content/uploads/2012/10/914955-150x150。 jpg

* * *

但 API 将访问的 URL 报告为

* * *

[http://mydomain.com/api/create.xml?api_number=brho15p6z1dhqwf5tsff&env=live&number=AJ20023232&title=福特](http://mydomain.com/api/create.xml?api_number=brho15p6z1dhqwf5tsff&env=live&number=AJ20023232&title=Ford)

* * *

如果我删除单引号，那么一切正常，任何想法如何纠正这个我怀疑在 URL 中传递变量时我忽略了一些东西

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T12:46:07.093

导致问题的是“Ford Mondeo 22'”值中的空格。URL 中不能有空格。您需要使用转义字符。参数的编码版本应该是

福特%20蒙迪欧%2022'

%20 是空格的转义字符

即整个 URL 应如下所示：

```
http://mydomain.com/api/create.xml?api_number=brho15p6z1dhqwf5tsff&env=live&number=AJ20023232&title=Ford%20Mondeo%2022'&image=http://mydomain.com/wp-content/uploads/2012/10/914955-150x150.jpg 
```

**编辑：** 您的评论表明您使用 PHP。在 PHP 中，您可以使用 urlencode($foo) 和 urldecode($foo) 在普通字符串和编码字符串之间切换。

# iphone - 仍然 dyld：库未加载

> ID：12915050
> 
> 赞同：9
> 
> 时间：2012-10-16T12:45:15.277
> 
> 标签：iphone, objective-c, xcode, ios-simulator, ios6

我正在将 Facebook 集成到我的应用程序中。作为我添加到项目中的所需框架。但是应用程序在没有加载第一个屏幕的情况下崩溃。

```
dyld: Library not loaded: /System/Library/Frameworks/AdSupport.framework/AdSupport
  Referenced from: /var/mobile/Applications/8E09C9AA-CA81-4C26-AEED-B2C632B60A54/Gridlocked.app/Gridlocked
  Reason: image not found 
```

我使用 xcode 4.5 并且我的 iPad 运行 iOS 5.1 该应用程序在模拟器上运行良好（6.0 和 5.1）但是当我连接 iPad 并将部署目标更改为 5.1 时（因为没有显示此设备运行）应用程序崩溃

任何人都可以帮助摆脱它。我真的度过了美好的时光并且仍在努力取得成功

* * *

## 回答 #1

> 赞同：59
> 
> 时间：2012-10-17T07:05:29.757

找到了问题的解决方案。**问题是根据需要**设置添加的框架而不是**可选的**

转到项目-> 目标-> 构建阶段-> 将二进制文件与库链接

在那里，将添加框架的状态设置为**可选**

这解决了我的问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-02-11T07:59:43.247

这可能是由于框架编译而发生的。我解决了

应用程序目标 -> 构建阶段 -> 嵌入框架。

因此，仅在安装时标记副本。清理项目并运行它！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-16T12:51:57.253

您需要将此框架添加到 Xcode。

右键单击“框架”> 选择“添加”>“现有框架”找到“AVFoundation”，然后选择“添加”。

如果要手动添加，请选择另一个按钮并导航至：

```
/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS2.2.1.sdk/System/Library/Frameworks/AVFoundation.framework/ 
```

用您正在构建的任何内容替换 iPhone SDK 版本。

也许也看到这个答案：[Missing AVFoundation.framework](https://stackoverflow.com/questions/385530/missing-avfoundation-framework)

此外，有时您只需要关闭 Xcode，然后清理并重建。

另请参阅[dyld：未加载库：AVFoundation.framework 原因：找不到图像](https://stackoverflow.com/questions/1462964/dyld-library-not-loaded-avfoundation-framework-reason-image-not-found)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-05-10T10:53:41.400

我有同样的问题。我将所有 .dylib 保存在系统根目录**usr/lib**中，它工作正常。在运行时 .o 文件没有得到 .dylib 文件路径，然后它给出了一个错误。

# perl - Mojolicious 基本身份验证在没有 Mojolicious::Lite 的情况下使用“under”

> ID：12915052
> 
> 赞同：9
> 
> 时间：2012-10-16T12:45:19.693
> 
> 标签：perl, mojolicious

我正在寻找一个干净简单的示例，说明如何在“Mojolicious”应用程序中使用“under”功能。我发现的所有示例都在处理“Mojolicious::Lite”（我不使用）。例如，我在这里收听了截屏视频[http://mojocasts.com/e3](http://mojocasts.com/e3)，我想我理解了底层功能的概念。但是我没有使用“Mojolicious::Lite”，所以我似乎无法直接按照示例进行操作。我一直未能尝试将 Lite 示例用于非 Lite 样式。（这可能也是因为我对框架还是个新手）

相关代码如下所示：

```
# Router
my $r = $self->routes;

# Normal route to controller
$r->get('/') ->to('x#a');
$r->get('/y')->to('y#b');
$r->any('/z')->to('z#c'); 
```

所以所有这些路由都需要由用户/通行证保护。我试图做这样的事情：

```
$r->under = sub { return 1 if ($auth) }; 
```

但这无法编译，我只是找不到与这种代码风格匹配的示例......有人可以在这里给我正确的提示或链接吗？如果这是文档中的某个地方，请原谅我......它们可能是完整的，但对于像我这样头脑简单的人来说，它们缺乏可以理解的例子:-P

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-10-16T13:17:40.173

Lite-examples 的类似代码如下所示：

```
# Router
my $r = $self->routes;

# This route is public
$r->any('/login')->to('login#form');

# this sub does the auth-stuff
# you can use stuff like: $self->param('password')
# to check user/pw and return true if fine
my $auth = $r->under( sub { return 1 } );

# This routes are protected
$auth->get ('/') ->to('x#a');
$auth->post('/y')->to('y#b');
$auth->any ('/z')->to('z#c'); 
```

希望这对任何人都有帮助！

（在这里找到的解决方案：http: [//mojolicio.us/perldoc/Mojolicious/Routes/Route#under](http://mojolicio.us/perldoc/Mojolicious/Routes/Route#under)）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-16T12:59:59.333

我正在这样做 - 在一个完整的 mojo（不是 lite）应用程序中：

在`startup`方法中

```
$self->_add_routes_authorization();

# only users of type 'cashier' will have access to routes starting with /cashier
my $cashier_routes = $r->route('/cashier')->over( user_type => 'cashier' );
$cashier_routes->route('/bank')->to('cashier#bank');

# only users of type 'client' will have access to routes starting with /user
my $user_routes = $r->route('/user')->over( user_type => 'client' );
$user_routes->get('/orders')->to('user#orders'); 
```

在主应用程序文件中：

```
sub _add_routes_authorization {
  my $self = shift;

  $self->routes->add_condition(
    user_type => sub {
      my ( $r, $c, $captures, $user_type ) = @_;

      # Keep the weirdos out!
      # $self->user is the current logged in user, as a DBIC instance
      return
        if ( !defined( $self->user )
        || $self->user->user_type()->type() ne $user_type );

      # It's ok, we know him
      return 1;
    }
  );

  return;
} 
```

我希望这有帮助

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-12-30T16:39:34.800

我在我的应用程序中使用了这个场景：

```
my $guest =  $r->under->to( "auth#check_level" );
my $user  =  $r->under->to( "auth#check_level", { required_level =>  100 } );
my $admin =  $r->under->to( "auth#check_level", { required_level =>  200 } );

$guest->get ( '/login'  )->to( 'auth#login'  );
$user ->get ( '/users/profile' )->to( 'user#show' ); 
```

在这之后所有的子路径`$r`都会遍历`check_level`子程序：

```
sub check_level {
    my( $self ) =  @_;

    # GRANT   If we do not require any access privilege
    my $rl =  $self->stash->{ required_level };
    return 1   if !$rl;

    # GRANT   If logged in user has required level OR we raise user level one time
    my $sl =  $self->session->{ user_level };
    my $fl =  $self->flash( 'user_level' );
    return 1   if $sl >= $rl  ||  $fl && $fl >= $rl;

    # RESTRICT 
    $self->render( 'auth/login',  status => 403 );
    return 0;
} 
```

# javascript - 在“for”中使用 eval 的替代方法

> ID：12915057
> 
> 赞同：1
> 
> 时间：2012-10-16T12:45:36.517
> 
> 标签：javascript, jquery, html

我使用以下函数来动态检查可变数量对象的属性。

```
// FUNCTION: Check Objects
var ObjectsN = 4;
function CheckObjects()
{
        for (var i=0; i<=ObjectsN; i++)
        {
            if ((eval("Object"+i+".property")==0)
            {
                if (i==ObjectsN)
                {
                    alert("Function finished");
                }
            }
            else
            {
                return; // end function
            }
        }
} 
```

我需要检查每个对象是否具有相同的属性值。
有没有办法在不使用 eval 的情况下做同样的事情？一个真实的例子将非常感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-16T12:52:39.423

您要查找的结构是[`Array`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array). 所以使用一个数组来存储你的对象：

```
/* assuming `var Object1 = new Object(), Object2 = new Object();` and so on */
var objs = [ Object1, Object2, Object3 ]; 
```

然后测试一个属性应该[`hasOwnProperty`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Object/hasOwnProperty)在迭代时实现：

```
for (var o = 0; i < objs.length; o++){
  if (objs[o].hasOwnProperty('property')){
    // Property exists, test its value:
  }
} 
```

然后，您可以进行测试`objs[o].property`以检索其值并查看它是否符合您的预期。

对于那些可能没有该功能的浏览器，这里有一个跨浏览器版本的`hasOwnProperty`（[来源](https://gist.github.com/332357)，但最初来自 [这里](https://stackoverflow.com/questions/135448/how-do-i-check-to-see-if-an-object-has-an-attribute-in-javascript)）：

```
/*
Cross-browser hasOwnProperty solution, based on answers from:
https://stackoverflow.com/questions/135448/how-do-i-check-to-see-if-an-object-has-an-attribute-in-javascript
*/
if ( !Object.prototype.hasOwnProperty ) {
  Object.prototype.hasOwnProperty = function(prop) {
    var proto = obj.__proto__ || obj.constructor.prototype;
    return (prop in this) && (!(prop in proto) || proto[prop] !== this[prop]);
  };
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-16T12:50:50.177

假设`Object0`, `Object1`, `Object2`, `Object3`&`Object4`是全局变量。

您可以通过使用访问变量`window`

```
var ObjectsN = 4;
function CheckObjects()
{
    for (var i=0; i<=ObjectsN; i++)
    {
        if (window['Object'+i].property == 0)
        {
            if (i==ObjectsN)
            {
                alert("Function finished");
            }
        }
        else
        {
            return; // end function
        }
    } 
```

}

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-16T12:48:57.787

每当您考虑对变量进行编号时。请改用数组。

没有`Object1`,`Object2`等 有`[ x, y, x ]`

然后你可以这样做：

```
for (var i = 0; i < objects.length; i++) {
    var obj = objects[i];
    if ("property" in obj) {
        // Whatever
    }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-16T13:05:16.850

类似于 Neverever 的答案，但传递对全局对象的引用而不是假设有`window`可用的对象。

```
var ObjectsN = 4;
var CheckObjects = (function(global) {

    for (var i=0; i<=ObjectsN; i++) {
        if ( global['Object' + i].property == 0) {
            if (i == ObjectsN) {
                alert("Function finished");
            }
        } else {
            return; // end function
        }
    }
} 
```

你确定那`== 0`是你想要的测试吗？即使该属性不存在，它也会返回 true。该函数不是特别健壮，如果从 0 到 n 的对象不存在，则会抛出错误。

该函数只会在`Objectn.property == 0`返回 true 时继续运行，因此它会在得到一个真实的结果后立即退出（例如`Object0.property = 'foo'`）。

# sql - 内连接和选择

> ID：12915059
> 
> 赞同：0
> 
> 时间：2012-10-16T12:45:38.107
> 
> 标签：sql

> **可能重复：**
> [SQL Server：获得每个组的前 1 个](https://stackoverflow.com/questions/6841605/sql-server-get-top-1-of-each-group)

我在 MS SQL 中有 2 个表。tblProducts 和 tblProductsImage 之一。

所有产品都有最小值。2张图片。但我只想展示第一张图片，每一款产品。

我能做什么这个 INNER JOIN 和 SELECT 命令。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T12:48:42.310

尝试这样的事情：

```
 SELECT * 
FROM   TBLPRODUCTS T1 
       INNER JOIN (SELECT *, 
                          Row_number() 
                            OVER ( 
                              PARTITION BY PRODUCT_ID 
                              ORDER BY X) RN 
                   FROM   TBLPRODUCTSIMAGE)T2 
               ON T1.PRODUCT_ID = T2.PRODUCT_ID 
WHERE  T2.RN = 1 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T12:47:05.960

如果你可以使用 apply 你可以使用这样的查询，但它是按 id 排序的

```
select *
from tblProducts as P
    outer apply
    (
        select top 1 T.Image from tblProductsImage as T
        where T.ProductId = P.Id
        order by T.Id
    ) as PI 
```

# google-app-engine - 当键具有父键时，是否通过键获取特定的 App Engine 实体，即祖先查询？

> ID：12915060
> 
> 赞同：0
> 
> 时间：2012-10-16T12:45:41.883
> 
> 标签：google-app-engine

我需要最新的一致性，而不是最终的一致性，所以看起来我应该使用祖先查询。但是，App Engine 不能告诉我什么时候在 Java 中调用

```
datastoreService.get(myKey) 
```

当 myKey 有一个父键时，这实际上是一个祖先查询？myKey 的父键不是隐含的祖先限制吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-16T13:01:26.607

一致性模型仅与查询相关。A`get`不是查询，而是简单的读取。它们总是非常一致。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-14T16:53:14.360

实际上，可以将 App Engine 数据存储区视为一个键值表。我的理论是，直接从键值表中检索值“不受”最终一致性的影响。相反，当您向 App Engine 发出查询时，查询不会直接转到键值表，而是路由到“索引”表（以便找到键！）。而且您知道构建/更新索引需要一些时间；因此，最终一致性适用于此。

# javascript - Rails - AJAX 用于新/创建操作

> ID：12915062
> 
> 赞同：0
> 
> 时间：2012-10-16T12:45:54.327
> 
> 标签：javascript, jquery, ruby-on-rails, ajax

我有一个带有事件部分的时间线，以便您可以直接在时间线页面上 CRUD 事件。我已经让它工作了，这样您就可以删除一个事件，并且删除部分会随着时间线刷新，而无需刷新页面。

但我不能让它为一个新事件工作，或者编辑一个。请有人可以帮我弄清楚我哪里出错了？谢谢！

我已经把新事件的代码放在这里了，因为我确信在新事件和删除事件之间，我可以弄清楚如何对编辑进行排序。

时间线/节目：

```
 <div id="show-timeline">
   <%= render :partial => "show_timeline" %>
 </div>

    <div id="my-timeline-box">
        <%= render :partial => "my_timeline" %>
    </div>

<div id="new-event">
    <%= render :partial => "new_event", :locals => { :event => Event.new(:timeline_id=>@timeline.id) }, :remote => true %>
</div> 
```

时间线/_new_event.html.erb：

```
<%= form_for(event) do |f| %>
  <% if event.errors.any? %>
    <div id="error_explanation">
      <h2><%= pluralize(event.errors.count, "error") %> prohibited this event from being saved:</h2>

      <ul>
      <% event.errors.full_messages.each do |msg| %>
        <li><%= msg %></li>
      <% end %>
      </ul>
    </div>
  <% end %>

  <%=f.hidden_field 'timeline_id', :value => current_user.timeline.id %>
  <div class="field">
    <%= f.label :date %><br />
    <%= f.date_select :start_date, :order => [:day, :month, :year], :start_year => 1800 %>
  </div>
  <div class="field">
    <%= f.label :title %><br />
    <%= f.text_field :headline, :size => 50 %>
  </div>
  <div class="field">
    <%= f.label :event_description %><br />
    <%= f.text_area :text, :size => "47x4" %>
  </div>
  <%= check_box_tag "blockCheck", :value => "1", :checked => false %>
  <div class="field" id="media_box">
    <%= f.label :media %>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span>Please paste a URL here</span><br />
    <%= f.text_field :media, :size => 50 %>
  </div>
  <div class="field">
    <%= f.label :media_description %><br />
    <%= f.text_area :caption, :size => "47x3" %>
  </div>
  <div class="actions">
    <%= f.submit 'Create Event', :class => "btn btn-success"  %>
  </div>
<% end %> 
```

事件/create.js.erb：

```
$('#new-event').html('<%= escape_javascript( render :partial => "/timelines/new_event", :locals => { :event => Event.new(:timeline_id=>@timeline.id) } ) %>');
$('.notice').html("<p>Event was successfully created.</p>");
$('.notice').show(300);
$('#my-timeline-box').html('<%= escape_javascript( render :partial => "/timelines/my_timeline" ) %>');
$('#show-timeline').html('<%= escape_javascript( render :partial => "/timelines/show_timeline" ) %>'); 
```

事件控制器：

```
def new
    @event = Event.new

    respond_to do |format|
      format.html # new.html.erb
      format.json { render json: @event }
      format.js
    end
  end

def create
    @event = Event.new(params[:event])

    respond_to do |format|
      if @event.save
        format.html { redirect_to @event.timeline, notice: 'Event was successfully created.' }
        format.json { render json: @event, status: :created, location: @event }
        format.js
      else
        format.html { render action: "new" }
        format.json { render json: @event.errors, status: :unprocessable_entity }
        format.js
      end
    end
  end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T22:20:05.697

时间线/显示视图中的`:remote => true`选项`render :partial`不是必需的。

相反，`form_for`in`_new_event.html.erb`应该有选项 :remote （这使得表单通过 ajax 提交）和 :format （这请求响应是在 JavaScript 中），例如：

```
<%= form_for event, :remote => true, :format => :js do |f| %> 
```

# teradata - Teradata：有没有办法从视图或选择语句生成 DDL？

> ID：12915067
> 
> 赞同：5
> 
> 时间：2012-10-16T12:46:16.510
> 
> 标签：teradata

我正在使用全局应用程序用户帐户访问数据库 A。此用户帐户无权修改数据库 A 的架构（即创建表、修改表等）。该用户还可以访问数据库 B，但只能查看。我需要运行 SQL 将数据库 B 中的视图中的数据馈送到数据库 A 中的表中。

在一个完美的世界里，我可以使用这个 SQL：

`create database_a.mytable as (select * from database_b) with no data`

但是，用户不能在数据库 A 中创建表。如果我可以获得 select 语句的 DDL，那么我可以在我的个人帐户下登录（它没有任何访问数据库 B 的权限）并在数据库中运行 DDL A 创建表。

唯一的其他选择是手动编写 SQL，但我不想这样做，特别是因为我要复制的这个视图有许多不同数据类型和大小的列。

**编辑：**我可能越来越近了。我刚刚对此进行了实验：

`show (select * from database_b.myview)`

但是，它生成了视图本身中使用的每个表的 DLL，以及视图的定义。这并没有真正帮助我，因为我只想要 select 语句本身的模式。换句话说，如果我要使用`create table as`上面提到的语句，我需要生成什么。

**为 Rob 编辑：**也许“DDL”是一个错误的术语。使用`show view db.myview`只显示视图的定义，而不是它所代表的模式。在我上面的示例中`create table as`，我展示了如何创建一个模仿 select 中返回的结果集模式的表。它在后端生成一个用于创建表的 DDL，然后执行该 DDL 以实际创建表。然后您可以说出`show table db.newtable`并查看新表的 DDL。我想直接从 select 语句中获取*该*DDL，以便我可以复制它，退出应用程序帐户，进入我的个人帐户，然后执行 DDL 以创建表。

这只是为了让我不必手动输入 DDL 以节省时间并减少输入错误，特别是因为源视图有这么多列。也就是说，我认为找 DBA 或编写一些时髦的存储过程来做动态的东西对于我的需求来说有点过头了。我认为必须有一种方法可以直接从 select 语句中获取用于创建表模式的 DDL。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-16T22:55:02.113

**为对象生成 DDL 语句：**

```
SHOW TABLE {DatabaseB}.{Table1};
SHOW VIEW {DatabaseB}.{View1}; 
```

**视图中的列细分：**

```
HELP VIEW {DatabaseB}.{View1}; 
```

但是，如果没有在目标数据库中创建对象的能力，`DatabaseA`您就没有太多的影响力。显然，如果该对象已经存在`INSERT INTO SELECT ... FROM DatabaseB.Table1`或者`MERGE INTO`是您已经探索过的选项。

**替代解决方案**

是否可以创建一个基于提供的视图名称动态创建表的存储过程？全局应用程序帐户只需要特权即可执行该过程。通常，创建存储过程的用户需要权限才能执行存储过程中包含的操作。（在 Teradata 13.10 中，您有一些额外的灵活性。）

这种方法有一些注意事项。您正在尝试物化可以引用从数百到数十亿条记录的任何地方的视图。这些不是放在目标表之上的简单的 1:1 视图。试图确定目标数据库中实现视图所需的空间将很困难。性能可以并且将根据视图的复杂性和数据量而有所不同。这将不是快速路径或数据块优化操作。

作为一名 DBA，我会担心这种方法被一个全球应用程序帐户采用，而没有完全理解其意图。我相信您与支持该系统所涉及的 DBA 有一个开放的沟通渠道。我敢肯定，你的疯狂是有原因的，这里不能透露。

**可能的解决方案 - 易失性表**

除非已从全局应用程序帐户撤销 CREATE TABLE 的隐式特权，否则此解决方案应该可以工作。

易失性表不需要永久空间。表定义在会话期间持续存在，插入其中的任何数据都依赖于实例化它的用户的假脱机空间。

```
CREATE VOLATILE TABLE {Global Application UserID}.{TableA_Copy} AS 
(
   SELECT *
     FROM {DatabaseB}.{TableA}
)
 WITH NO DATA
   NO PRIMARY INDEX
   ON COMMIT PRESERVE ROWS;

SHOW TABLE {Global Application UserID}.{TableA_Copy}; 
```

我选择使用名为`NO PRIMARY INDEX`. 默认情况下，`CREATE TABLE`AS 将获取`SELECT`语句的第一列并使其成为`PRIMARY INDEX`表的列。根据数据人口统计数据，这可能会导致测试中出现倾斜和烫发空间问题。`PRIMARY INDEX`当您了解基础数据时，您可以自行指定显式。（如果您不确定，请参阅 DDL 手册以获取有关语法的详细信息。）

用于`ON COMMIT PRESERVE ROWS`本示例的意图可能是无关紧要的。但实际上，如果您将任何数据弹出到该表中以测试此子句，则在 Teradata 模式下将是有益的，否则在`CREATE TABLE`对易失性表执行或任何其他数据操作后，数据将立即丢失。

# java - Selenium 独立服务器 jar 文件挂起

> ID：12915072
> 
> 赞同：0
> 
> 时间：2012-10-16T12:46:34.410
> 
> 标签：java, selenium

我在运行 Selenium 独立服务器时遇到问题——它只是在加载过程中挂起。我尝试了几个不同版本的独立服务器，但出现了同样的问题。从我运行的命令行...

```
java -jar selenium-server-standalone-2.25.0.jar 
```

然后回来...

```
Oct 16, 2012 8:29:34 PM org.openqa.grid.selenium.GridLauncher main
INFO: Launching a standalone server
20:29:40.190 INFO - Java: Apple Inc. 20.10-b01-428
20:29:40.193 INFO - OS: Mac OS X 10.7.4 x86_64
20:29:40.202 INFO - v2.25.0, with Core v2.25.0\. Built from revision 17137
20:29:40.322 INFO - RemoteWebDriver instances should connect to: http://127.0.0.1:4444/wd/hub
20:29:40.324 INFO - Version Jetty/5.1.x
20:29:40.324 INFO - Started HttpContext[/selenium-server/driver,/selenium-server/driver]
20:29:40.326 INFO - Started HttpContext[/selenium-server,/selenium-server]
20:29:40.326 INFO - Started HttpContext[/,/]
20:29:40.376 INFO - Started org.openqa.jetty.jetty.servlet.ServletHandler@1f8b81e3
20:29:40.377 INFO - Started HttpContext[/wd,/wd]
20:29:40.382 INFO - Started SocketListener on 0.0.0.0:4444
20:29:40.383 INFO - Started org.openqa.jetty.jetty.Server@4ee1d5ea 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T13:03:53.900

如果评论没有帮助，请尝试将启动命令更改为

```
java -jar lib/selenium-server-standalone-2.25.0.jar -role hub 
```

（这是启动 Selenium Grid 的命令，所以对你来说可能是错的，但我不知道你想达到什么目的）

如上所述，在命令运行后

1.  不要关闭命令行
2.  打开浏览器并加载`http://127.0.0.1:4444/`

您应该看到如下内容：

您正在使用 grid 2.25.0 在官方 selenium wiki 上查找帮助：[更多帮助请点击此处](http://code.google.com/p/selenium/wiki/Grid2)

默认监控页面：控制台

# c# - 为什么在 .net 中对控件使用 Invoke？

> ID：12915076
> 
> 赞同：3
> 
> 时间：2012-10-16T12:46:43.187
> 
> 标签：c#, .net, invoke

> **可能重复：**
> [为什么 .NET 不允许跨线程操作？](https://stackoverflow.com/questions/2896504/why-net-does-not-allow-cross-thread-operations)
> [为什么只允许 UI 线程修改 UI？](https://stackoverflow.com/questions/3794420/why-is-only-the-ui-thread-allowed-to-modify-the-ui)

据我了解，.net 引发非法跨线程调用异常的原因是 GUI 可能会显示不确定的行为。

但是，其他所有对象不都是这种情况吗？如果两个线程在同一个对象上工作，根据代码，该对象可能处于不确定的情况。那么为什么控制元素存在这个例外呢？或者为什么这个例外是控制元素独有的。

以及如何使用调用来提供帮助？它仍然是不确定的。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-16T13:01:06.007

`Invoke`-ing 其他线程上的控件是必需的，因为[不允许跨线程调用控件](https://stackoverflow.com/questions/3794420/why-is-only-the-ui-thread-allowed-to-modify-the-ui)。要更完整地讨论为什么存在此限制，您应该阅读该链接 - 我不会在这里回答，它只是**（**但请确保存在此限制是有充分理由的）。

调用`Invoke`对我们有帮助，因为它允许后台线程在 UI 线程上“做事”——它之所以有效，是因为它不直接调用该方法，而是发送一条[Windows 消息](http://msdn.microsoft.com/en-us/library/windows/desktop/ms644927%28v=vs.85%29.aspx)，上面写着“当你有机会时运行它”。UI 线程正在运行一个[消息泵](https://stackoverflow.com/questions/2222365/what-is-a-message-pump)，该消息泵不断处理发送到该线程的所有消息 - 通常这些消息类似于[“用户单击此按钮”](http://msdn.microsoft.com/en-us/library/windows/desktop/ms645607%28v=vs.85%29.aspx)，在这种情况下，Windows 窗体通过引发`Click`相关控件上的事件来处理此消息。在这种情况下，Windows 窗体通过运行提供的委托来处理消息。

结果是只有 1 个线程在任一时间点（UI 线程）修改/使用 UI 控件。

请注意，[`Invoke`](http://msdn.microsoft.com/en-us/library/zyzhdc6b.aspx)这并不保证代表的运行顺序。`Invoked`如果以正确的顺序执行来自两个不同线程（甚至同一个线程）的两个委托很重要，那么这是一个不同的问题。

* * *

*旁白：*我们谈论“UI 线程”是因为大多数应用程序都有一个线程，所有控件都在该线程上创建，但实际上可以创建不同的控件线程 - 它是创建控件的线程，在哪个线程上处理消息。显然，为了正确处理这些消息，必须在该线程上运行一个消息泵。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-16T12:53:44.197

大多数类型实际上不是线程安全的，但可以在多个线程中使用，只要一次只有*一个*线程使用它们。

UI 控件并不完全相同：它们具有*线程关联性*——它们*只能*在 UI 线程上安全地使用。

部分原因是 UI 线程可能想要随时重绘它们，因此它们必须随时可用。将其与不希望在等待锁定时延迟 UI 线程相结合，*并将*其与希望避免甚至无争议的锁定相结合（如果您可以提供帮助，则 UI 线程将不得不取出*很多*锁）需要为每次访问执行此操作）并且您会得到一个简化的模型，其中更容易说所有访问都*必须*在 UI 线程上。我确信设计一个没有线程关联的 UI 框架是*可能*的，但是让它以可预测的方式执行和表现将是棘手的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-16T12:49:11.903

Invoke is used to make sure you are calling the UI on the correct thread. but this is needed for every .net object. The UI is made to work on a single thread(this is true with WPF and Winforms). Two different threads can access the same object as long as its not at the same time. If it this happens it creates a race case and could end in dead lock

# zend-framework - 如何使用来自不同数据库列的数据填充 zend 表单？

> ID：12915077
> 
> 赞同：0
> 
> 时间：2012-10-16T12:46:46.980
> 
> 标签：zend-framework, zend-form

我有一个表格：

```
$houserent = new Zend_Form_Element_Text('houserent');

$houserent      ->setLabel('House Rent :');
$this   ->addElement($houserent);

$tax = new Zend_Form_Element_Text('tax');
$siteName        ->setLabel('Tax :');
$this    ->addElement($tax);

$internet = new Zend_Form_Element_Text('internet');
$internet->setLabel('Internet :');
$this    ->addElement($internet); 
```

我的数据表“测试”是

```
id   name         value
1   house rent    100
2   tax            10
3   internet       10 
```

我想使用数据库表中的上述数据填充表单。但我不知道该怎么做。请帮我。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T13:34:16.267

您可以覆盖表单中的填充函数。

```
public function populate($data)
{
  foreach($data as $field => $value)
  {
    $this->{$field}->setValue($value);
  }
  return $this;
} 
```

其中 $data 是 name => value 的关联数组。

[编辑]

所以你现在的形式是：

```
<?php
  class Form_Admin_Settings_Add extends Zend_Form
  {
    public function init()
    {
      $houserent = new Zend_Form_Element_Text('houserent');
      $houserent->setLabel('House Rent :');
      $this->addElement($houserent);

      $tax = new Zend_Form_Element_Text('tax');
      $siteName->setLabel('Tax :');
      $this->addElement($tax);

      $internet = new Zend_Form_Element_Text('internet');
      $internet->setLabel('Internet :');
      $this->addElement($internet);
    }

    public function populate($data)
    {
      foreach($data as $field => $value)
      {
        $this->{$field}->setValue($value);
      }
      return $this;
    }
  } 
```

在您的控制器中：

```
<?php
  //instantiate form and model
  $form = new Form_Admin_Settings_Add();
  $model = new Model_Test();

  //get results
  $results = $model->fetchAll()->toArray();
  $data = array();

  //put results into our data array as name => value
  foreach($results as $r)
  {
    $data[$r['name']] = $r['value'];
  }

  //populate our form
  $form->populate(data);
  echo $form; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T12:51:09.707

Try some like this:

```
class Form extends Zend_Form {

   public funcition Form(){
      $houserent = new Zend_Form_Element_Text('houserent');
      $houserent->setLabel('House Rent :')
                ->setValue($this->_Data['houserent']);
      $this->addElement($houserent);
   }

   public function setData($Data){
        $this->_Data = $Data;
        return $this;
    }
} 
```

# playorm - PlayOrm 中的继承

> ID：12915079
> 
> 赞同：1
> 
> 时间：2012-10-16T12:46:58.237
> 
> 标签：playorm

我无法理解注释“@NoSqlDiscriminatorColumn”的使用。有人可以解释一下是否总是需要吗？如果是，为什么？如果不是，那么在单元测试中，Account 扩展了 AccountSuper.. 这也是继承的另一个例子吗？这与 TestInheritanceSingleTable 中使用的实体有什么区别？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T13:31:59.247

我们必须存储保存了哪个子类的信息，因此当我们重新读取它时，我们使用正确的子类。此信息存储在特定列中（您告诉我们使用@NoSqlDiscriminatorColumn 的列），所以基本上这种模式添加了一个不在您的实体中的列。使用这种模式，您可以在同一个表中拥有 N 个子类。

帐户扩展 AccountSuper 没什么特别的。那不是在同一个表中存储不同的实体。那只是存储帐户。它只是发生 Accounts 扩展 AccountSuper ，因此它存储 Account 中的任何字段和 AccountSuper 中的任何字段，因此基本上 Account 表中的所有行通常大小相同。在继承示例中，我们存储了不同的实体，因此这些不同的实体可能会导致不同的行长度，因为每个实体都有不同的列数。

# objective-c - PSPDFKit 无法获取文档参考（尽管文件存在）

> ID：12915089
> 
> 赞同：0
> 
> 时间：2012-10-16T12:47:25.527
> 
> 标签：objective-c, pspdfkit

首先，我使用的是 1.10.2 版本

我在打开 pdf 文档时遇到问题。

```
NSURL* documentURL = [NSURL URLWithString:[[loader getPDFResourcePath:file] stringByAddingPercentEscapesUsingEncoding:NSUTF8StringEncoding]];
PSPDFDocument* document = [PSPDFDocument PDFDocumentWithUrl:documentURL];

PSPDFViewController* pdfController = [[PSPDFViewController alloc] initWithDocument:document];
[self presentModalViewController:pdfController animated:NO]; 
```

但我收到这些错误代码：

```
Oct 16 14:35:52 device-07 MODULESTEST[5150] <Error>: CFURLCreateDataAndPropertiesFromResource: failed with error code -15.
2012-10-16 14:35:52.217 MODULESTEST[5150:707] Error: -[PSPDFGlobalLock documentProviderForDocument:page:]/246 Cannot get document reference (although file exists) for /var/mobile/Applications/24968027-8B41-4B3B-937F-B9624F9661CB/MODULESTEST.app/buildresources/testbundles/bundle_one.bundle//activities/content_specifications.pdf
2012-10-16 14:50:10.038 MODULESTEST[5170:170b] Warning: __45-[PSPDFCache cacheDocument:startAtPage:size:]_block_invoke_0/1015 Document has zero pages. Not caching. 
```

我还使用了 iExplorer3，并且该文件存在于应用程序中。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-16T16:04:48.767

我是 PSPDFKit 的开发者。

这里的问题是你需要用*fileURLWithPath*而不是 URLWithString 来初始化你的 NSURL。（后来一个 CFURLCreateDataAndPropertiesFromResource 失败并出现未记录的错误代码，这很可能意味着它不支持 Web-URL）

# networking - cloudbees tcp 套接字：是否可以在 cloudbees 中创建或监听 TCP 连接（除了监听 HTTP 端口 80）

> ID：12915096
> 
> 赞同：2
> 
> 时间：2012-10-16T12:48:11.860
> 
> 标签：networking, tcp, cloudbees

是否可以从 Cloudbees 创建 TCP 连接？是否可以监听到 cloudbees 上任何端口的 TCP 连接？

编辑：特别是 RUN@cloud （但我对两者都感兴趣）

# asp.net-mvc-3 - 通过 mvc 3 中的另一个下拉列表绑定下拉列表

> ID：12915099
> 
> 赞同：0
> 
> 时间：2012-10-16T12:48:27.067
> 
> 标签：asp.net-mvc-3

我是 mvc 新手，我有 2 个下拉列表，我需要使用 mvc 3 绑定第二个下拉列表。

代码示例

```
@<table>
    <tr>
        <td>
            @Html.DropDownList("Brands", Model.Brands, "Select Brand", New With {.style = "width:150px;"})
        </td>
    </tr>
    <tr>
        <td>
            @Html.DropDownList("Models", Model.Models, "Select Model", New With {.style = "width:150px;"})
        </td>
    </tr>
    <tr>
        <td>
            @Html.DropDownList("Devices", Model.Devices, "Select Device", New With {.style = "width:150px;"})
        </td>
    </tr>
    <tr>
        <td>
            @Html.DropDownList("Systems", Model.Systems, "Select System", New With {.style = "width:150px;"})
        </td>
    </tr>
</table> 
```

我需要按品牌填充模型并按模型填充设备。任何帮助请..

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T13:38:05.547

鉴于：

```
@Html.DropDownListFor( x => x.Model, new SelectList( LookupUtils.GetModelsList(Model.Brand), "Value", "Text", Model.Model)) 
```

LookupUtils 是一个静态类有：

```
public static List<SelectListItem> GetModelsList(int brand)
{
    var dataContext = new YourDataContext(  );
    var data = dataContext.GetModelsFn(brand).ToList();

    var result = ( from res in data
                   select new SelectListItem()
                              {
                                  Text = res.modelName,
                                  Value = res.modelId.ToString()
                              } ).ToList();

    return result;
} 
```

对于动态更新一些下拉列表，你应该使用 jQuery-Collapse 插件：http: [//github.com/danielstocks/jQuery-Collapse/](http://github.com/danielstocks/jQuery-Collapse/)

# javascript - Finding object id's from unordered Google API responses

> ID：12915113
> 
> 赞同：-1
> 
> 时间：2012-10-16T12:49:00.210
> 
> 标签：javascript, node.js, google-maps, asynchronous

I'm writing a backend API in Node.js, however the coolest feature of it, **async functions** are now challenging me with a new problem.

I have a list of objects called **Person** with the information of **ID, Latitude, Longitude**. And what I simply want to do is sort them according to their distance to a certain point *(Let's say Point **A**)*.

When I would like to loop through each object, make a request, (I'm using module **request**. [Can be checked in here](https://github.com/mikeal/request)). However due to it's nature Node first **loops through** all the objects, sends requests, and doesn't wait for the reply. So when the reply comes I cannot understand which reply is for which person. Even though it list's their ID in correct order when I check through Redis I see that responses of the Google API request's are not ordered. Here is my code for a better understanding;

```
for(var i = 0;i < result.length;i++){

    console.log("the iteration time: "+i);
    tempObject = JSON.parse(result[i]);

    console.log("\n I make the request for key: "+tempObject.ID);
    request('http://maps.googleapis.com/maps/api/directions/json?origin='+tempObject.lat+
    ','+tempObject.lon+'&destination=' + targetLatitude + ',' + targetLongitude 
    + '&sensor=false', 
    function (error, response, body) {
      if (!error && response.statusCode == 200) {

            console.log("Lat: "+tempObject.lat);
            console.log("Lon: "+tempObject.lon);

            console.log("key: "+list[counter]);
            tempObj = JSON.parse(body);

            counter++; //For loop end check

            console.log("i: "+i);

            duration = tempObj.routes[0].legs[0].duration.value;

            console.log("Duration: "+tempObj.routes[0].legs[0].duration.value+"\n");

            if(counter == result.length){
                //end loop
            }

        }
    });
} 
```

I would like to state **I do not have any trouble with my code**. I just cannot find the solution for this problem: How can I get the id's of my Person list, when responses from Google Maps Direction API **does not come ordered**. Loop makes the requests one by one for each Person object in list, however the responses from Google are not in order **thus I cannot obtain their ID's**.

I even thought like putting the objects in a list, and later by checking the starting point lat and long in the API response, comparing them with the Person in the list, I can identify whose response came first, but that did not work out as well. Any suggestions?

**PS:** If you see word "key" it means id of the user. I'm using Redis so I tend to use "key" as well.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T13:05:34.573

您可以使用函数闭包将请求与响应相关联。

使用地理编码地址的示例： [http ://www.geocodezip.com/v3_geocoder_multiplePoints.html](http://www.geocodezip.com/v3_geocoder_multiplePoints.html)

# android - How to use thread / timer in android service and update UI?

> ID：12915114
> 
> 赞同：0
> 
> 时间：2012-10-16T12:49:03.650
> 
> 标签：android, multithreading, service, timer

I am developing an android application which will start a service.The service will execute some code after every fixed interval of time and end the result to the activity.The activity should display the result to the user.

First I tried it with a thread. For the service to execute after a fixed interval I create a thread - execute the code, get the result - send this result to activity for display - put the thread to sleep for a some fixed time interval. But it is not working as expected.The code is executed by the thread. The thread goes to sleep and then the result is sent to the activity at the end after the sleep time interval. The requirement is the UI must be immediately updated after the result is obtained by the thread code execution.

I have also tried using Timer and TimerTask. But it gives the same result as above. Please help me on this.

**Service class**

```
@Override
public int onStartCommand(Intent intent, int flags, int startId)
{
    td = new ThreadDemo();
    td.start();
}
private class ThreadDemo extends Thread  
{
    @Override
        public void run()
        {
            super.run();
            String result = //code executes here and returns a result
            sendMessageToUI(result);  //method that will send result to Activity
            ThreadDemo.sleep(5000);
        }
}

private void sendMessageToUI(String strMessage)
{
    Bundle b = new Bundle();
    b.putString(“msg”, strMessage);
    Message msg = Message.obtain(null, 13);
    msg.setData(b);
} 
```

**Activity class**

```
public class MyActivity extends Activity
{
    @Override
    public void onCreate(Bundle savedInstanceState)
    {
        super.onCreate(savedInstanceState);
    }
    class IncomingHandler extends Handler 
    {
        @Override
        public void handleMessage(Message msg)
        {
            System.out.println("in ui got a msg................");
            switch (msg.what)
            {
                case 13:
                    System.out.println("setting status msg..............");
                    String str1 = msg.getData().getString("msg");
                    textview.setText(str1);
                    break;      
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T12:56:46.400

在您的情况下使用广播接收器要好得多。

在活动中注册它并从你的运行目标发送广播

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T13:01:16.753

使用本地广播管理器。您的服务将创建一个本地广播，并且它将可供您的应用程序使用。您可以在应用程序中为该通知编写适当的处理程序并相应地更新用户界面。

将以下代码放入您的服务中

```
Intent i = new Intent("NotificationServiceUpdate");
        LocalBroadcastManager.getInstance(this).sendBroadcast(i); 
```

在您的应用程序中，将以下内容放入您要更新的活动中

```
 LocalBroadcastManager.getInstance(this).registerReceiver(
                mMessageReceiver, new IntentFilter("NotificationServiceUpdate")); 
```

现在，只要服务广播任务完成，您的活动就会收到通知。您可以进一步使此广播对您的应用程序私有。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-16T13:18:07.703

在这里查看我对 ScheduledExecutor 的回答：

[如何在Android的后台每秒调用一段代码](https://stackoverflow.com/questions/12896821/how-to-call-a-section-of-code-every-second-in-background-in-android/12897194#12897194)

并像您目前正在做的那样使用向 UI 发送的消息。

# c++ - 如何从连接的 ssl 会话中获取 base64 编码证书 (PEM)

> ID：12915120
> 
> 赞同：1
> 
> 时间：2012-10-16T12:49:22.593
> 
> 标签：c++, c, openssl, certificate, x509

我正在使用以下内容在 openssl C 中获取连接会话的 PEM 证书。我需要的是获取 base64 编码的证书。

```
if(this->ssl) {
  X509 *cert = SSL_get_certificate(this->ssl);
  EVP_PKEY *pubKey = X509_get_pubkey(cert);
  LOG_INFO("Public key is " << BN_bn2hex(pubKey->pkey.rsa->n));
} 
```

有关如何实现这一目标的任何信息都会有所帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T13:00:00.733

您应该使用[i2d_X509](http://www.openssl.org/docs/crypto/d2i_X509.html#)函数来获取 DER 编码证书。然后使用您最喜欢的 base64 编码器并将其编码为 PEM。如果您想要正确的方式，请不要忘记添加**-----BEGIN CERTIFICATE-----**和**-----END CERTIFICATE----- 。**

[在这里](http://www.ioncannon.net/programming/34/howto-base64-encode-with-cc-and-openssl/)，您可以找到有关如何使用 OpenSSL 本身进行编码的示例。在使用 OpenSSL 时，您可以通过使用**i2d_X509_bio**函数将 DER 编码数据直接放入 BIO 来简化事情。

# tags - How can i pass the parameter using the display tag?

> ID：12915126
> 
> 赞同：0
> 
> 时间：2012-10-16T12:50:04.200
> 
> 标签：tags, struts, query-string, displaytag, querystringparameter

I am using the display tag.In my display:column i need the href link on my record and if click the link of the count it go to my action page of struts at the same time i need 'which instance type' and 'rating element id'.So please give me the suggestion to pass the value as a query string..Currently am using struts version 1.2.9 My sample code is,

<%@include file="/jsp/include/displaytag.jsp"%>

```
<c:if test="${(asnAccuracyListUID.instanceType != null && asnAccuracyListUID.instanceType != 'Sum')}">
    <display:column property="instanceTypeDescription" title="Instance Type" sortable="false"/>
</c:if>
<c:if test="${(asnAccuracyListUID.instanceType != null && asnAccuracyListUID.instanceType == 'Sum')}">
    <display:column property="instanceType" title="Instance Type" sortable="false" style="font-weight:bold;text-align:center"/>
</c:if>

<display:column property="firstWeekOfCount" title="${asnAccuracyFirstWeekOfCount}" sortable="false" >
    <a href="weeklyDlvyInstancesDashboardReportPost.do?method=WeeklyDlvyInstExcelReport&instanceType=${asnAccuracyListUID.instanceType}&ratingElementId=${asnAccuracyListUID.ratingElementId}">${asnAccuracyListUID.firstWeekOfCount}</a>  
</display:column>
<display:column property="secondWeekOfCount" title="${asnAccuracySecondWeekOfCount}" sortable="false"  />
<display:column property="thirdWeekOfCount" title="${asnAccuracyThirdWeekOfCount}" sortable="false"  />
<display:column property="fourthWeekOfCount" title="${asnAccuracyFourthWeekOfCount}" sortable="false" />
<display:column property="fifthWeekOfCount" title="${asnAccuracyFifthWeekOfCount}" sortable="false" />
<display:column property="sixthWeekOfCount" title="${asnAccuracySixthWeekOfCount}" sortable="false"/> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T10:10:21.650

我的问题是..

```
<display:table name="${weeklyDlvyInstancesDashboardReportForm.asnAccuracyListQO}" uid="asnAccuracyListUID" sort="list" defaultsort="1" 
                                        requestURI="/weeklyDlvyInstancesDashboardReportPre.do?method=httpGet" excludedParams="method"
                                        decorator="com.ford.mpl.superg.decorator.WeeklyDeliveryInstancesTypeTableDecorator" keepStatus="true">
                                        <%@include file="/jsp/include/displaytag.jsp"%>
                                        <c:set value="${asnAccuracyListUID.firstWeekOfCountLabel}" var="asnAccuracyFirstWeekOfCount"/>
                                        <c:set value="${asnAccuracyListUID.secondWeekOfCountLabel}" var="asnAccuracySecondWeekOfCount"/>
                                        <c:set value="${asnAccuracyListUID.thirdWeekOfCountLabel}" var="asnAccuracyThirdWeekOfCount"/>
                                        <c:set value="${asnAccuracyListUID.fourthWeekOfCountLabel}" var="asnAccuracyFourthWeekOfCount"/>
                                        <c:set value="${asnAccuracyListUID.fifthWeekOfCountLabel}" var="asnAccuracyFifthWeekOfCount"/>
                                        <c:set value="${asnAccuracyListUID.sixthWeekOfCountLabel}" var="asnAccuracySixthWeekOfCount"/>

                                        <c:if test="${(asnAccuracyListUID.instanceType != null && asnAccuracyListUID.instanceType != 'Sum')}">
                                            <display:column property="instanceTypeDescription" title="Instance Type" sortable="false"/>
                                        </c:if>
                                        <c:if test="${(asnAccuracyListUID.instanceType != null && asnAccuracyListUID.instanceType == 'Sum')}">
                                            <display:column property="instanceType" title="Instance Type" sortable="false" style="font-weight:bold;text-align:center"/>
                                        </c:if>

                                        <display:column property="firstWeekOfCount" title="${asnAccuracyFirstWeekOfCount}" href="${pageContext.request.contextPath }/weeklyDlvyInstancesDashboardReportPost.do?method=WeeklyDlvyInstExcelReport" paramProperty="instanceType" paramId="instanceTypeForJSP" sortable="false" />                          
       <display:column property="secondWeekOfCount" title="${asnAccuracySecondWeekOfCount}" sortable="false"  />
                                        <display:column property="thirdWeekOfCount" title="${asnAccuracyThirdWeekOfCount}" sortable="false"  />
                                        <display:column property="fourthWeekOfCount" title="${asnAccuracyFourthWeekOfCount}" sortable="false" />
                                        <display:column property="fifthWeekOfCount" title="${asnAccuracyFifthWeekOfCount}" sortable="false" />
                                        <display:column property="sixthWeekOfCount" title="${asnAccuracySixthWeekOfCount}" sortable="false"/>
                                    </display:table> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T03:32:16.427

`property="firstWeekOfCount"`从中删除`<display:column property="firstWeekOfCount" title="${asnAccuracyFirstWeekOfCount}" sortable="false" >`

# java - small data sets for Hadoop-MapReduce

> ID：12915128
> 
> 赞同：4
> 
> 时间：2012-10-16T12:50:16.633
> 
> 标签：java, hadoop, dataset, mapreduce

I am trying to be familiar with Hadoop-MapReduce. After studying theoratical knowledge on this concepts, I want to do practise on them.

However, I could not find small data sets ( up to 3 Gb ) for this technology. Where can I find data sets in order to do practise ?

OR, How can I do practise Hadoop-MapReduce ? In other words, are there any tutorial or website which offers exercise ?

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-16T14:29:50.130

***您可以下载和使用的可公开访问的数据集。下面是几个例子。***

[http://www.netflixprize.com/index](http://www.netflixprize.com/index) — 作为竞赛的一部分，它发布了一组用户评分数据，以挑战人们开发更好的推荐算法。未压缩的数据为**2 GB+**。它包含来自 480 K 用户对 17 K 电影的 100 M+ 电影评分。

[http://aws.amazon.com/publicdatasets/](http://aws.amazon.com/publicdatasets/) — 例如，其中一个生物数据集是大约 550 GB 的带注释的人类基因组数据。在经济学下，您可以找到数据集，例如 2000 美国人口普查（大约 200 GB）。

[http://boston.lti.cs.cmu.edu/Data/clueweb09/](http://boston.lti.cs.cmu.edu/Data/clueweb09/) — 卡内基梅隆大学语言技术研究所发布了 ClueWeb09 数据集以帮助进行大规模网络研究。这是对 10 种语言的十亿网页的抓取。未压缩的数据集占用 25 TB。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-16T13:11:53.870

为什么不自己创建一些数据集？

一个非常简单的事情是用数百万个随机数填充一个文件，然后使用 Hadoop 查找重复项、三元组、素数、因子中具有重复项的数字等等。

当然，这并不像寻找常见的 facebook 朋友那么有趣，但获得一些 Hadoop 实践就足够了。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-16T14:49:50.917

> 或者，我该如何练习 Hadoop-MapReduce ？换句话说，有没有提供锻炼的教程或网站？

以下是一些入门的[玩具问题。](http://www.dataenthusiast.com/2011/07/good-toy-problems-data-science/)还要检查[Data-Intensive Text Processing with MapReduce](http://lintool.github.com/MapReduceAlgorithms/index.html)，它有一些算法的伪代码，如在 MapReduce 中实现的页面排名、连接、索引。

以下是随时间收集的一些公共数据集。你可能不得不挖掘小的。

[http://wiki.gephi.org/index.php/Datasets](http://wiki.gephi.org/index.php/Datasets)
[为 Hadoop 下载大数据](https://stackoverflow.com/questions/10843892/download-large-data-for-hadoop)
[http://datamob.org/datasets](http://datamob.org/datasets)
[http://konect.uni-koblenz.de/](http://konect.uni-koblenz.de/)
[http://snap.stanford.edu /data/](http://snap.stanford.edu/data/)
[http://archive.ics.uci.edu/ml/](http://archive.ics.uci.edu/ml/)
[https://bitly.com/bundles/hmason/1](https://bitly.com/bundles/hmason/1)
[http://www.inside-r.org/howto/finding-data-internet](http://www.inside-r.org/howto/finding-data-internet)
[https ://docs.google.com/document/pub?id=1CNBmPiuvcU8gKTMvTQStIbTZcO_CTLMvPxxBrs0hHCg](https://docs.google.com/document/pub?id=1CNBmPiuvcU8gKTMvTQStIbTZcO_CTLMvPxxBrs0hHCg)
[http://ftp3.ncdc.noaa.gov/pub/data/noaa/1990/](http://ftp3.ncdc.noaa.gov/pub/data/noaa/1990/)
[http://data.cityofsantacruz.com/](http://data.cityofsantacruz.com/)

# c# - 如何从 C# 应用程序的控制面板中的“用户帐户”部分启动“管理另一个帐户”页面

> ID：12915129
> 
> 赞同：2
> 
> 时间：2012-10-16T12:50:17.817
> 
> 标签：c#, user-accounts, process.start, controlpanel

如何从 C# 应用程序的控制面板中的“用户帐户”部分启动“管理另一个帐户”页面？

我目前可以使用以下命令启动“用户帐户”应用程序：

System.Diagnostics.Process.Start("control.exe", "nusrmgr.cpl");

但我想避免点击“管理另一个帐户”链接。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T13:31:46.237

您可以使用获取用户：

```
Win + R > control userpasswords2

Start > Search > netplwiz 
```

**更新：**

您也可以使用以下命令调用它，但除了前面所述的命令之外，我找不到如何直接调用“**控制面板\用户帐户和家庭安全\用户帐户\管理帐户”。**

```
User Accounts = control /name Microsoft.UserAccounts

User Account Control Settings = UserAccountControlSettings 
```

资料来源：

[权威的 Windows 7 命令指南](http://www.webtlk.com/the-definitive-windows-7-commands-guide/)

[开始 | 适用于 Windows XP、Vista 和 Windows 7 的运行命令：](http://ss64.com/nt/run.html)

[Windows 7 的运行命令列表](http://www.sevenforums.com/tutorials/5966-run-commands-windows-7-a.html)

# vb.net - 如何在VB.NET中实现向导控件

> ID：12915131
> 
> 赞同：3
> 
> 时间：2012-10-16T12:50:26.710
> 
> 标签：vb.net, containers

在 VB6 中，我经常使用图片框作为容器。例如，我将 5 个图片框放在一个表单上，一旦用户单击“下一步”按钮，我就将下一个图片框带到了前台。这非常方便。

现在我正在努力在 VB.NET 中做类似的事情。我的尝试并没有真正成功。图片框并没有真正容纳我的控件，它们似乎不时跳出，我无法真正确定控件当前位于哪个图片框，因为图片框不像 VB6 中那样不透明。

有人可以告诉我如何在 VB.NET 中以一种好的方式做到这一点吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-16T12:53:59.283

这听起来像是[`Panel`](http://msdn.microsoft.com/en-us/library/e63s4df3.aspx)控制的工作

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T14:54:59.057

对于您发布屏幕截图的面板的问题。您的面板位于另一个容器中，这就是它显示奇怪的原因。尝试单击面板并将其剪切（ctrl-x），然后单击表单标题并粘贴（ctrl-p）。这将确保它不在另一个控件中，因为有时这种情况可能以不完全明显的方式发生（例如您如何在屏幕截图中看到控件边框）。

# python - Deny reading part of a file in python

> ID：12915132
> 
> 赞同：1
> 
> 时间：2012-10-16T12:50:32.137
> 
> 标签：python, security, io, text-files

I have a text file for which I use two write functions: 1) Normal Write, 2) Secure Write.

Now when I want to read the data from the file, I should be only be able to read the data written using the "Normal Write" function and should not be able to read the data written using "Secure Write" function.

My idea was to use a dictionary for this using the key as a flag to check if the value was written using normal write or secure write.

How can I do this in Python?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T13:06:18.943

这完全取决于您希望数据的安全性。最好的解决方案是使用加密，或多个文件，或两者兼而有之。

如果您只是想要一个标志，您的程序可以使用它来判断文件中的数据是正常的还是安全的，有几种方法可以做到这一点。

*   您可以在每次编写时添加标题。
*   您可以以指示安全级别的标志开始每一行，然后只读取具有正确标志的行。
*   您可以为整个文件设置一个标题，指示文件中安全的部分和不安全的部分。

这是我使用第一个选项实现它的一种方式。

```
normal_data = "this is normal data, nothing special"
secure_data = "this is my special secret data!"

def write_to_file(data, secure=False):
    with open("path/to/file", "w") as writer:
        writer.write("[Secure Flag = %s]\n%s\n[Segment Splitter]\n" % (secure, data))

write_to_file(normal_data)
write_to_file(secure_data, True) 

def read_from_file(secure=False):
    results = ""
    with open("path/to/file", "r") as reader:
        segments = reader.read().split("\n[Segment Splitter]\n")
    for segment in segments:
        if "[Secure Flag = %s]" % secure in segment.split("\n", 1)[0]:
            results += segment.split("\n", 1)[0]
    return results

new_normal_data = read_from_file()
new_secure_data = read_from_file(True) 
```

这应该有效。但它不是保护数据的最佳方式。

# windows-phone-7 - 具有动态 URI 的 WP7 流音频

> ID：12915134
> 
> 赞同：0
> 
> 时间：2012-10-16T12:50:41.673
> 
> 标签：windows-phone-7, dynamic, background, agent

我曾经`BackgroundAudioPlayer`从互联网播放 mp3，我知道后台音频代理会自动流式传输 mp3

音频代理是否在完全流式传输 mp3 后播放？

如果 mp3 URI 是动态的，如何播放？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T14:39:53.143

如果是连续的音频流，那么后台音频代理会继续播放。如果是单个文件，播放将在完成时停止。

此外，您无法指定动态 URL。您为必须在应用程序内调整的流指定的核心位置。

# c# - 如何读取代码中的输出类型

> ID：12915135
> 
> 赞同：2
> 
> 时间：2012-10-16T12:50:48.173
> 
> 标签：c#, continuous-integration

我们遇到的一个常见问题是必须根据我们是在本地测试还是为构建服务器提交代码来切换下面的代码。

```
 /// <summary>
    /// Main entry point to the application.
    /// </summary>
    public static void Main()
    {
        // Don't forget to uncomment this if committing (!)
        //var servicesToRun = new ServiceBase[] {new myservice()};
        //ServiceBase.Run(servicesToRun);

        // and re-comment this
        RunAsConsoleApp();

    } 
```

如果有一种方法可以在代码中测试以告知输出类型，并且避免所有“哦，不，我提交并破坏了构建”的时间浪费，那将非常有用。

```
 if (IsConsoleApp)
        {
            Using(var host= new ServiceHost(typeof(myservice))
            {
               host.Open();
               etc....
            }
        }
        else
        {
            var servicesToRun = new ServiceBase[] {new myservice()};
            ServiceBase.Run(servicesToRun);
        } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-16T12:54:56.787

您是否尝试过使用[Environment.UserInteractive](http://msdn.microsoft.com/en-us/library/system.environment.userinteractive.aspx)属性代替`IsConsoleApp`？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-02-17T12:48:31.230

`Environment.UserInteractive`不检测我们是否有控制台在运行，它只检测用户是否可以对正在运行的进程进行某种交互的可能性。如果您想检查应用程序是否是控制台应用程序，我发现它可以工作：

`bool is_console_app = Console.OpenStandardInput(1) != Stream.Null;`

格伦[的](https://stackoverflow.com/questions/1188658/how-can-a-c-sharp-windows-console-application-tell-if-it-is-run-interactively)所有功劳。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-16T12:57:31.213

如果你们都绝对不会提交 Debug 构建.. 那么只要在 Project Properties > Build 选项卡下定义了一个 DEBUG 常量，您就可以尝试：

```
#if DEBUG
    RunAsConsoleApp();
#else
    RunNormally();
#endif 
```

但是，如果有人不小心提交了 Debug 构建，这仍然很容易出错。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-16T12:55:20.343

您可以设置单独的构建配置（例如发布 - 服务）并有条件编译语句在代码块之间切换。

请参阅此处了解更多信息：

[http://msdn.microsoft.com/en-us/library/aa691095(v=vs.71).aspx](http://msdn.microsoft.com/en-us/library/aa691095(v=vs.71).aspx)

因此，在您的 Release - Service 配置中，定义一个常量，例如 RELEASESERVICE。然后像这样使用：

```
#if RELEASESERVICE

    etc 
```

# javascript - 当 jquery-ui 自动完成功能应用于所有输入时，如何引用它所属的特定对象/dom 元素

> ID：12915138
> 
> 赞同：0
> 
> 时间：2012-10-16T12:50:54.217
> 
> 标签：javascript, jquery, jquery-ui

```
$("input[type=text]").autocomplete({
minLength: 3,
source: function (request, response) {
        alert( $(this).val() ); 
```

我有 3 个不同的输入文本框，但`$(this).attr("id")`或`this.id`两者都返回 undefined

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T13:06:11.167

不确定里面有什么`source`关于`this`. 您始终可以将其记录到控制台以查看返回的内容。以下模式有助于在许多元素上实现插件

```
$("input[type=text]").each(function() {
    var id = this.id;
    $(this).autocomplete({
        minLength: 3,
        source: function(request, response) {
            alert(id);
        }
    });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T13:10:50.073

```
alert( $(this.element).attr("id") ); 
```

作品。

# button - Color Single Letters in JavaFX Buttontexts

> ID：12915141
> 
> 赞同：2
> 
> 时间：2012-10-16T12:51:00.890
> 
> 标签：button, javafx-2, letters, text-coloring

the title already describes my problem. I want to color single letters or sequences of letters in a JFX Button but not the whole text. I found a solution for swing components [Is it possible to change the text color in a string to multiple colors in Java?](https://stackoverflow.com/questions/8405661/is-it-possible-to-change-the-text-color-in-a-string-to-multiple-colors-in-java) but not for javafx yet. Can anyone help me plz?

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-16T14:14:42.223

看一下这个

```
public class ColoredButtonTextDemo extends Application {

    @Override
    public void start(Stage primaryStage) {
        Button btn = new Button();
        btn.setContentDisplay(ContentDisplay.GRAPHIC_ONLY);

        HBox coloredTextBox = HBoxBuilder.create().spacing(0).children(
                LabelBuilder.create().text("Say ").textFill(Color.YELLOW).build(),
                LabelBuilder.create().text("'").textFill(Color.DARKBLUE).build(),
                LabelBuilder.create().text("Hell").textFill(Color.RED).build(),
                LabelBuilder.create().text("o ").textFill(Color.GREEN).build(),
                LabelBuilder.create().text("W").textFill(Color.BLUE).build(),
                LabelBuilder.create().text("orld!").textFill(Color.DARKMAGENTA).build(),
                LabelBuilder.create().text("'").textFill(Color.DARKBLUE).build()//
                ).build();

        btn.setGraphic(coloredTextBox);
        StackPane root = new StackPane();
        root.getChildren().add(btn);
        Scene scene = new Scene(root, 300, 250);
        primaryStage.setTitle("Hello World!");
        primaryStage.setScene(scene);
        primaryStage.show();
    }

    public static void main(String[] args) {
        launch(args);
    }
} 
```

输出

![在此处输入图像描述](../Images/9f37b536a2f8213292fe144e1c9a04a9.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-10-11T07:41:43.193

这只是 Uluk Biy 答案的 FXML 形式：

```
<Button>
    <graphic>
        <HBox spacing="0.0">
            <Label text="Colors " style="-fx-text-fill: yellow; -fx-background-color: #1156cf;" />
            <Label text="are " style="-fx-text-fill: red; -fx-background-color: #11cf56;" />
            <Label text="cool!" style="-fx-text-fill: blue; -fx-background-color: #cf1156;" />
        </HBox>
    </graphic>
</Button> 
```

...是的，我喜欢回答 7 岁的问题。;-)

# glassfish-3 - Oracle Apex 4.2 restful URL with GlassFish

> ID：12915144
> 
> 赞同：0
> 
> 时间：2012-10-16T12:51:11.347
> 
> 标签：glassfish-3, oracle-apex

Is there any differences between Restful URL web services if you use embedded HTTP or with Glassfish? the problem i am facing right now, i couldn't access sample Restful web service (get employee) from url :

```
http://localhot:port/apex/hr/employees 
```

i am using glassfish.

Please kindly help me solved this issue.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T21:50:29.790

看起来问题出在我的 listenerAdmin 配置上，现在它工作正常。

# mysql - 在 MySQL 中处理复杂的连接

> ID：12915146
> 
> 赞同：0
> 
> 时间：2012-10-16T12:51:16.853
> 
> 标签：mysql, join, inner-join

这是我正在使用的数据库的架构 - [已编辑]

我正在尝试为 2 个不同的结果集提出 2 个不同的查询 -

1.  销售额最高的销售代表
2.  销售额最高的销售代表按以下方式分组`managerId`

我对第一个查询很幸运；这就是我想出的：

```
SELECT
    SUM(`products`.`cost`) AS `Sale`
    , `employees`.`firstName`
FROM
    `d2dpro`.`sales_reps`
    , `d2dpro`.`products`
    INNER JOIN `d2dpro`.`employees` 
        ON (`sales_reps`.`employeeId` = `employees`.`employeeId`)
    INNER JOIN `d2dpro`.`sold_products` 
        ON (`products`.`productId` = `sold_products`.`productId`)
    INNER JOIN `d2dpro`.`sales` 
        ON (`sold_products`.`saleId` = `sales`.`saleId`) AND (`sales`.`salesCampId` = `sales_reps`.`saleCampId`)
GROUP BY `employees`.`firstName`; 
```

通过这个查询，我遇到了这个错误： `Error Code: 1054 Unknown column 'sales_reps.saleCampId' in 'on clause'`

这个查询有什么帮助吗？还有第二个？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T13:25:08.737

您正在使用一个表 (sales_reps)，它与表 employees、sold_products 和 sales 的 INNER JOIN 交叉连接。为了能够在该 JOIN 中引用 sales_reps，您应该将其包含为内部连接：（FROM 子句应如下所示）

```
FROM `d2dpro`.`products`
    INNER JOIN `d2dpro`.`employees` 
        ON (`sales_reps`.`employeeId` = `employees`.`employeeId`)
    INNER JOIN `d2dpro`.`sold_products` 
        ON (`products`.`productId` = `sold_products`.`productId`)
    INNER JOIN `d2dpro`.`sales` 
        ON (`sold_products`.`saleId` = `sales`.`saleId`)
    INNER JOIN `d2dpro`.`sales_reps` 
        ON (`sales`.`salesCampId` = `sales_reps`.`saleCampId`) 
```

# javascript - multiple canvas at same location using javascript

> ID：12915147
> 
> 赞同：1
> 
> 时间：2012-10-16T12:51:24.277
> 
> 标签：javascript, html, css, html5-canvas

I am trying to make a application one of the module is displaying a multiple canvas at same location. This canvas is used to display graph. I have 2 buttons: pie and bar:

When I click on pie it should display pie chart. and when I click on bar it should display bar graph. I am using following approach:

1.  rendering 2 canvas at same location.

    ```
    .wrapper canvas {
        position: absolute;
        top: 0px;
        left: 0px;
        visibility:hidden;
    } 
    ```

2.  In pie button i'm hiding bar chart and display pie. Same goes for bar button.

    ```
    $("input[type='radio']").change(function(){
      var  whChart = $('input[name="radio-view"]:checked').val();
      var canpie = document.getElementById('pie4');//$("canvas[name='pie4'][0]");
      var canbar = document.getElementById('pie41');//$("canvas[name='pie4'][0]");
      if(whChart == "Pie"){
          RGraph.Effects.jQuery.Snap(pie4);
          canpie.style.visibility='visible';
          canbar.style.visibility='hidden';
      }
      else if( whChart == "Bar"){
            RGraph.Effects.jQuery.Snap(pie41);
            canpie.style.visibility='hidden';
            canbar.style.visibility='visible';
      }
    }); 
    ```

html file

```
<div class="wrapper" style="text-align:center;">
    <canvas id="pie4" width="450" height="250" style="background:black;  z-index: 1; visibility:visible; ">[No canvas support]</canvas>
    <canvas id="pie41" width="450" height="250" style="background:red;  z-index: 2;">[No canvas support]</canvas>
</div> 
```

But the problem is these 2 canvas are displaying one below another. Not at the same place overlapping.

I have checked other post related to double buffering and also tried other options like making 1st canvas height and width to '0', but it doesn't seems to work. Could please someone help in this matter. Since I'm very new to this JavaScript.

p.s : Sorry this is my first post. I know there are lot of mistakes and information missing. If you let me know if anything else needed I will provide.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T13:12:45.507

问题是可见性保留了空间，您想使用不保留空间的显示。

```
var pieState = (whChart == "Pie") ? "block" : "none"; 
var barState = (whChart == "Bar") ? "block" : "none"; 
canpie.style.display = pieState;
canbar.style.display = barState; 
```

请参阅此[stackoverflow 问题](https://stackoverflow.com/questions/133051/what-is-the-difference-between-visibilityhidden-and-displaynone)以获取解释。

由于您似乎在使用 jQuery，您可以只使用 jQuery 的[show()](http://api.jquery.com/show/) / [hide()](http://api.jquery.com/hide/)或[toggle()](http://api.jquery.com/toggle/)

# xquery - Marklogic : unique words count

> ID：12915148
> 
> 赞同：1
> 
> 时间：2012-10-16T12:51:27.787
> 
> 标签：xquery, marklogic

I have the following xml structure:-

```
<Root>
<text>
 Marklogic is a good big data tool. Right now I am exploring Marklogic.
</text>
</Root> 
```

Now I want to count the occurrence of unique words(e.g Marklogic- 2 times, big- 1 time, data-1 time etc). I achieved this by using `fn:count()` but `fn:count()` is too slow in case of large database.

Is there any other optimized way to achieve this ? (something related to indexes)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T15:11:29.670

根据[http://docs.marklogic.com/guide/search-dev/lexicon#chapter](http://docs.marklogic.com/guide/search-dev/lexicon#chapter)，您可以启用 word-lexicon 并使用`cts:words`.

# c# - Keyword entries for videos coming back blank, subsequently deleted

> ID：12915150
> 
> 赞同：0
> 
> 时间：2012-10-16T12:51:28.927
> 
> 标签：c#, .net, youtube-api, gdata-api

***UPDATE: apparently this only happens when fetching videos from a playlist feed, which is what I'm doing.***

I recently noticed my youtube api requests for videos were returning blank keyword entries. I found the blog post at [http://apiblog.youtube.com/2012/08/video-tags-just-for-uploaders.html](http://apiblog.youtube.com/2012/08/video-tags-just-for-uploaders.html), and I'm already sending requests as the channel/video owner, yet I still get blank keywords. This has the undesirable side-effect of *deleting* existing keywords if I make any changes to the video details, such as to descriptions or titles.

For instance, I have video series where every video will have the same description. Perfect place to use the API to run through all the vids in a list and update their details. This used to work fine. But one ill-fated day, this routine became destructive. Any time I do this now, the keywords get blanked out, and I have to go back through all of the affected vids, replacing the lost keywords by hand. I've stopped using my API-based utility since this began happening.

The descriptions and titles will get updated as desired, but the keywords get blanked out, even if I don't touch them. I recall reading somewhere in the API docs something to the effect that when you submit updates for video details, any entries not filled in will be erased. In this instance, because the keyword entries I get back are already blank, any updates I do to the video *other than to the keywords* cause the keywords to be deleted.

Anybody have any ideas or workarounds? If I can't continue using the API to manage keywords, I would at least like to be able to continue making updates to titles and descriptions, but that won't work right now because the keywords get deleted with any title or description updates :(

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T04:07:31.630

`media:keywords`当您对当前帐户中的视频或视频提要发出经过身份验证的请求时，YouTube API 绝对应该返回。你可以自己测试一下

[http://gdata.youtube.com/demo/index.html](http://gdata.youtube.com/demo/index.html)

单击`Authenticate`此处，然后请求**Uploads -> Query**，然后输入`default`用户名。运行该请求并查看响应 - 所有实际具有关键字的视频都应该`media:keywords`为它们返回。（显然，如果您已经删除了给定视频的关键字，它们将不会被返回，因此请使用您已为其设置关键字的新上传视频进行测试。）

我认为有一个内部错误仍然存`media:keywords`​​在，当您获取播放列表提要时，该错误会阻止在播放列表条目中返回。您是否正在从播放列表中阅读您的视频？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T14:49:53.483

实际上，这是一个已知问题，因为 YouTube 决定只允许经过身份验证的用户检索关键字。

这很烦人，但我目前也在寻找一种安全的方式来检索这些关键字，使用 Zend，而不用纯文本写下我的密码。

让我们一起寻找解决方案:)

[YOUTUBE API : 检索视频关键字](https://stackoverflow.com/questions/12784410/youtube-api-retrieve-video-keywords)

# java - selectBooleanCheckbox not updated after filtered data table update

> ID：12915153
> 
> 赞同：0
> 
> 时间：2012-10-16T12:51:44.823
> 
> 标签：java, jsp, primefaces

We have a data table with 3 columns, the first has a selectBooleanCheckbox and the two last have outputText.

We also set up a filter on this table to show or hide rows depending on the filter boolean value.

The entity used for the data table is made with these 3 columns properties, 1 boolean, 2 String. See below.

The problem is, when we select a filter in the first column such as "Yes" and click the update button, the table will be updated but the filter is not applied thus the table filter is not refreshed.

Step to reproduce:

1.  Load the page, don't modify any checkboxes
2.  Select the filter "Yes"
3.  Press update button
4.  The datatable is not updated

**This is my Entity.java**

```
public class Entity {
    boolean                 enabled;
    private String          label;
    private String          description;

    public Entity(boolean enabled, String label, String description) {
        this.enabled    = enabled;
        this.label      = label;
        this.description = description;
    }

    public boolean getEnabled() {
        return enabled;
    }

    public void setEnabled(boolean enabled) {
        this.enabled = enabled;
    }

    public String getLabel() {
        return label;
    }

    public void setLabel(String label) {
        this.label = label;
    }

    public String getDescription() {
        return description;
    }

    public void setDescription(String description) {
        this.description = description;
    }
} 
```

**This is my simple bean**

```
import java.util.ArrayList;
import java.util.List;

import org.springframework.context.annotation.Scope;
import org.springframework.stereotype.Controller;

@Controller
@Scope ("view")
public class TestBean {
    private List<Entity>    list;

    public TestBean() {
        list = new ArrayList<Entity>();

        /* Populate examples */
        list.add(new Entity(true, "Book", "This is a C book"));
        list.add(new Entity(false, "Screen", "21\" HP Screen"));
        list.add(new Entity(true, "Game", "You won 1 million"));
    }

    /*
     * Update list, in the real application it is a little bit more complicated
     * but I simplified it and the problem is reproducible for this stuff too.
     */
    public void update() {
        Entity entity;

        /* "Disable" the third because we didn't win */
        entity = list.get(2);
        entity.setEnabled(false);
    }

    public List<Entity> getList() {
        return list;
    }

    public void setList(List<Entity> list) {
        this.list = list;
    }
} 
```

**This is my little bean for the filter boolean value**

```
import java.io.Serializable;
import java.util.ArrayList;
import java.util.List;

import javax.faces.context.FacesContext;
import javax.faces.model.SelectItem;

import org.springframework.context.annotation.Scope;
import org.springframework.stereotype.Controller;

/**
 * The Class BooleanListBean.
 */
@Controller
@Scope ("session")
@SuppressWarnings ("serial")
public class BooleanListBean implements Serializable {

    /**
     * Instantiates a new boolean list bean.
     */
    public BooleanListBean() {
        super();
    }

    /**
     * Gets the options.
     * 
     * @return the options
     */
    public SelectItem[] getOptions() {
        final List<SelectItem> options = new ArrayList<SelectItem>();

        final FacesContext facesContext = FacesContext.getCurrentInstance();
        options.add(new SelectItem("", "Select"));
        options.add(new SelectItem(Boolean.FALSE.toString(), "No"));
        options.add(new SelectItem(Boolean.TRUE.toString(), "Yes"));

        return options.toArray(new SelectItem[0]);
    }
} 
```

**And finally the xhtml file**

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:fn="http://java.sun.com/jsp/jstl/functions"
    xmlns:p="http://primefaces.org/ui"
    xmlns:ft="http://primefaces.prime.com.tr/facestrace"
    xmlns:t="http://myfaces.apache.org/tomahawk"
    xmlns:util="http://java.sun.com/jsf/composite/components/util">
<ui:composition template="/xhtml/common/toolbarLayout.xhtml">
    <ui:define name="content">
        <p:commandButton value="Update"
            actionListener="#{testBean.update}"
            update=":contentForm:entityList" />

        <p:dataTable value="#{testBean.list}" var="entity" id="entityList" widgetVar="entityList">
            <p:column headerText="Activated"
                filterBy="#{entity.enabled}" filterOptions="#{booleanListBean.options}">

                <h:selectBooleanCheckbox value="#{entity.enabled}" />
            </p:column>

            <p:column headerText="Label">
                <h:outputText value="#{entity.label}" />
            </p:column>

            <p:column headerText="Description">
                <h:outputText value="#{entity.description}" />
            </p:column>
        </p:dataTable>
    </ui:define>
</ui:composition>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T14:14:46.627

我认为 dataTable 应该有过滤的 Value 标签，

```
filteredValue="#{testBean.filteredList}" 
```

在 testBean 中添加一个过滤器列表并引用它。

# node.js - 快速路由共享变量

> ID：12915154
> 
> 赞同：2
> 
> 时间：2012-10-16T12:51:46.583
> 
> 标签：node.js, express

我最近开始学习 node.js + Express，发现它非常有趣。

我读过很多关于在路由中共享变量的帖子，其中很多都在使用 module.exports 和 export。

我决定做一个函数来设置一个局部变量

路线/test.js

```
var db;
exports.setup = function(_db){
  db = _db;
};

exports.doit = function(req, res){
  db.get("testToken", function(err, result) { 
    console.log("err: " + err);
    console.log("result: " + result);
    res.send("respond with a resource");
  });
}; 
```

应用程序.js

```
var redis = require("redis");
var db = redis.createClient();
var test = require("./routes/test.js");
test.setup(db);

// configuration...

app.get('/', test.doit); 
```

可以做这样的事情吗？

我想确保我不会多次建立数据库连接，并且共享 vars 是我能想到的唯一方法......

你能提出任何建议吗？

谢谢！！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-16T13:54:41.747

那应该可以正常工作。不过，您可能会考虑将“设置”与“路由”分开。

由于`db`总是相同的值，您可以使用 Express 3 的[`prototype`对象](https://github.com/visionmedia/express/wiki/New-features-in-3.x)将其附加到所有路由中的`req`和/或对象：`res`

`routes/test.js`

```
exports.doit = function(req, res){
  req.db.get("testToken", function(err, result) { 
    console.log("err: " + err);
    console.log("result: " + result);
    res.send("respond with a resource");
  });
}; 
```

`app.js`

```
var redis = require("redis");
var db = redis.createClient();
var test = require("./routes/test.js");

// "setup"
express.request.db = express.response.db = db;

// configuration

app.get('/', test.doit); 
```

不过，您也可以将“设置”定义为自定义中间件：

```
// before: app.use(app.router);
app.use(function (req, res, next) {
  req.db = res.db = db;
  next();
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T13:27:06.147

基本上，它看起来不错，但它可能`module.exports`不仅仅是`exports`?

此外，我会将模块代码封装到自执行的匿名函数中，以防止名称冲突并声明`module.exports`一次。

像这样的东西：

```
(function() {
  var _db;

  setup = function (db){
    _db = db;
  };

  doit = function (req, res){
    _db.get("testToken", function(err, result) { 
      console.log("err: " + err);
      console.log("result: " + result);
      res.send("respond with a resource");
    });
  };

  module.exports = {
    setup: setup,
    doit: doit
  }
}).call(this); 
```

# asp.net - 在 asp.net 中与 facebook 登录连接

> ID：12915159
> 
> 赞同：1
> 
> 时间：2012-10-16T12:52:04.700
> 
> 标签：asp.net, facebook, facebook-c#-sdk, fbconnect, facebook-login

我想使用 3rd 方身份验证（facebook）登录我的 Web 应用程序。我在谷歌上搜索得到这种类型的代码，大多数用户说它有效但不适合我。我使用以下代码。

1.  ConnectAuthentication 类

    ```
    public class ConnectAuthentication
    {

    public static bool isConnected()
    {
        return (SessionKey != null && UserID != -1);
    }
    public static string ApiKey
    {
        get { return System.Configuration.ConfigurationManager.AppSettings["ApplicationKey"]; }
    }
    public static string SecretKey
    {
        get { return System.Configuration.ConfigurationManager.AppSettings["SecretKey"]; }
    }
    public static string SessionKey
    {
        get { return GetFacebookCookie("session_key"); }
    }
    public static int UserID
    {
        get
        {
            int userID = -1;
            int.TryParse(GetFacebookCookie("user"), out userID);
            return userID;
        }
    }
    private static string GetFacebookCookie(string cookieName)
    {
        string retString = null;
        string fullCookie = ApiKey +"_" + cookieName;
        if (HttpContext.Current.Request.Cookies[fullCookie] != null)
            retString = HttpContext.Current.Request.Cookies[fullCookie].Value;
        return retString;
    } 
    ```

    }

2.  FBLogin.js

```
 function CallFB() {
        FB.ensureInit(function () { FB.XFBML.Host.parseDomTree(); });
        FB.init("203596266327066", "http://localhost:61283/xd_receiver.htm");
    }

    function FBLogOut() {
        FB.ensureInit(function () { FB.XFBML.Host.parseDomTree(); });
        FB.init("203596266327066", "http://localhost:61283/xd_receiver.htm");
        if (FB.Connect != null)
            FB.Connect.logout();
    } 
```

1.  Default.aspx - 起始页

    ```
    <script src="http://static.ak.connect.facebook.com/js/api_lib/v0.4/FeatureLoader.js.php"
        type="text/javascript"></script>
    <script src="js/jquery-1.4.1.js" type="text/javascript"></script>
    <script type="text/javascript" src="JS/fblogin.js"></script>
    <script type="text/javascript">
        $(document).ready(function () {
            CallFB();
        });        
    </script>
    <form id="form1" runat="server">
    <div>
        <br />
        <div id="facebk" style="height: 5px;">
            <fb:login-button length='long' onlogin='window.location.reload()' size='medium'>
            </fb:login-button>
        </div>
    </div>
    </form> 
    ```

3.Default.aspx.cs

```
 protected void Page_Load(object sender, EventArgs e)
    {            
        if (ConnectAuthentication.isConnected())
            Response.Redirect("AuthUser.aspx");
    } 
```

1.  AuthUser.aspx - 仅访问经过身份验证的用户

    $(document).ready(function () { $("#btn").click(function () { FBLogOut(); }); });

# jquery - 获取嵌套 UL/LI 的完整路径并验证

> ID：12915160
> 
> 赞同：1
> 
> 时间：2012-10-16T12:52:08.053
> 
> 标签：jquery

我有这个[UL/LI](http://jsfiddle.net/q6yDe/585/)。

用户将从菜单中选择它们，而我需要实现的是获取整个路线的文本行。例如`First Level 2 - Second Level 1 - Third Level 1`. 而且，与此同时，我想验证右侧没有更多选项。例如，如果用户单击`First Level 2 - Second Level 1`我想要做某事，以便让他知道之后有更多选择`FL2 - SL1`（一个带有 true 或 false 的 bool 变量将完成这项工作，我可以从那里得到一些警告）

我玩过 text 属性，但它不起作用，因为菜单是嵌套的，而不是在单级 UL 中。

任何想法将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T16:49:16.207

而不是 li 的点击事件，我使用锚标记点击事件来获取路线并检查是否存在任何进一步的级别

[http://jsfiddle.net/q6yDe/586/](http://jsfiddle.net/q6yDe/586/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T18:57:28.690

我对解决方案的尝试可以在[http://jsfiddle.net/KVs9C/](http://jsfiddle.net/KVs9C/)找到。

```
$("#mylist a").click(function() {
    var path = "",
        moreChoices = $(this).next().size(); 

    console.log("More choices? " + !!moreChoices);

    $(this).parents("li").each(function() {
        path = $(this).find("a:first").text() + " - " + path;
    });
    console.log(path);
}); 
```

像 fuzionpro 一样，我建议您将点击侦听器添加到锚元素而不是 li 元素。可以通过遍历所有父 li 元素并在每个元素中附加第一个锚标记的文本来构造路径。当前路径以多余的破折号结束，应将其删除。

# sql - SQL：一个值的总和，但仅适用于不同的 id - 条件总和？

> ID：12915162
> 
> 赞同：6
> 
> 时间：2012-10-16T12:52:10.390
> 
> 标签：sql, sum, conditional

我有以下结构：

Day 有 typ1 和 typ2 的多个事件，其中 typ1 和 typ2 具有各自日期的外键。Typ2 也有持续时间。

现在我想计算所有 typ1 事件、所有 typ2 事件和 typ2 持续时间的总和。

示例数据：

天：

```
ID = 1 | Date = yesterday | ... 
```

类型 1：

```
ID = 1 | FK_DAY = 1 | ...

ID = 2 | FK_DAY = 1 | ... 
```

类型 2：

```
ID = 1 | FK_DAY = 1 | duration = 10

ID = 2 | FK_DAY = 1 | duration = 20 
```

我现在想要结果：

```
Day.ID = 1 | countTyp1 = 2 | countTyp2 = 2 | sumDurationTyp2 = 30 
```

我的问题是总和，我需要类似“不同 typ2.ID 的总和”之类的东西......有谁知道解决这个问题的方法？

我正在使用类似以下的东西，但这当然不能按我想要的方式工作：

```
SELECT day.id,
   count( DISTINCT typ1.id ),
   count( DISTINCT typ2.id ),
   sum( duration ) AS duration
FROM days
   LEFT JOIN typ
          ON day.id = typ1.id
   LEFT JOIN typ2
          ON day.id = typ2.id
GROUP BY day.id; 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-10-16T13:03:41.250

我对此的一般方法是在加入之前预先聚合每个表。

部分原因是您实际上并没有对不同的值求和（如果两行中的每一行都有`10`，答案仍然是`20`）。

但主要是因为它实际上更简单。子查询进行聚合，然后连接都是 1:1。

```
SELECT
  days.id,
  typ_agg.rows,
  type2_agg.rows,
  type2_agg.duration
FROM
  days
LEFT JOIN
  (SELECT fk_day, COUNT(*) as rows FROM typ GROUP BY fk_day)  AS typ_agg
    ON days.id = typ_agg.fk_day
LEFT JOIN
  (SELECT fk_day, COUNT(*) as rows, SUM(duration) as duration FROM typ2 GROUP BY fk_day)  AS typ2_agg
    ON days.id = typ2_agg.fk_day 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T12:55:01.293

```
SELECT day.id,
   count( DISTINCT typ1.id ),
   count( DISTINCT typ2.id ),
   (select sum( t2.duration )
    from typ2 t2
    where t2.id = day.id
   ) AS duration
FROM days
   LEFT JOIN typ
          ON day.id = typ1.id
   LEFT JOIN typ2
          ON day.id = typ2.id
GROUP BY day.id; 
```

# objective-c - 如何在离开表格视图之前显示警报。？

> ID：12915166
> 
> 赞同：0
> 
> 时间：2012-10-16T12:52:33.607
> 
> 标签：objective-c, ios, ipad, uitableview, uialertview

我正在使用主详细信息应用程序。在主部分中列出记录，详细部分显示每个记录的详细信息。详细信息部分是一个表格视图，我们可以在其中编辑每条记录。问题是“**在编辑记录时，如果我点击另一侧的记录，我对原始记录所做的任何更改都会丢失，新记录的详细信息会显示在表格视图中”......** 谁能告诉我我如何在**“显示新记录详细信息”**之前显示要求“**保存或取消**”的警报..

 *** * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T13:04:07.147

> 我对原始记录所做的任何更改都将丢失

开发应用程序的一个常见规则是

> **永远不要**丢失用户的工作

因此，最好只保存用户更改的内容。

但是，让我们直接回答您的实际问题：

> 谁能告诉我如何显示警报

我认为您的意思是那些看起来像带有两个按钮的推送通知。您使用 UIAlertView 创建它们。然后在警报的委托中，您可以确定按下了哪个按钮，您可以决定如何继续。只需查看 UIAlertView 的文档 - 它非常简单 :)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T13:04:12.417

尝试这个，

```
-(void)tableView:(UITableView *)tableView1 didSelectRowAtIndexPath:(NSIndexPath *)indexPath { 
    UIAlertView *alert = [[UIAlertView alloc] initWithTitle:LString(@"ISCO_FLOW_CALC") message:LString(@"DELETE_MESSAGE") delegate:self cancelButtonTitle:LString(@"CANCEL") otherButtonTitles:LString(@"SAVE"), nil];
        alert.tag=11;
        [alert show];
        [alert release];
}
- (void)alertView:(UIAlertView *)alertView didDismissWithButtonIndex:(NSInteger)buttonIndex {

    if(buttonIndex==1 && alertView.tag==11)
    {
        //your save data action;
    }
    if(buttonIndex==0 && alertView.tag==11)
    {
        //your Cancel data action;
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-16T13:09:29.407

在 MasterViewController 中保留对您的 DetailViewController 的引用，例如。在您的 MasterViewController.h 中：

```
DetailViewController *detailVC; 
```

将此引用设置为您最近在 didSelectRowAtIndexPath 中的 DetailViewController 并在显示新的 detailVC 之前始终检查它是否不为零

```
DetailViewController *controller=[[DetailViewController alloc] init]; //Or similar
if (detail){
     UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"Save or Cancel"  message:@"Save or Cancel" delegate:self cancelButtonTitle:@"Cancel" otherButtonTitles:@"Save",nil];
    [alert show];
}
else{
detailVC=controller;
//Show controller
} 
```

现在在用户点击 UIAlertView 的按钮后显示新的 detailViewController：

```
- (void)alertView:(UIAlertView *)alertView clickedButtonAtIndex:(NSInteger)buttonIndex {
if (buttonIndex==0) { //Tapped cancel
   //show detailVC
}
else{ //Tapped save
 //save
 //Show detailVC
}
} 
```

希望这可以帮助**

# jsplumb - jsplumb库getconnection函数没有返回值

> ID：12915167
> 
> 赞同：0
> 
> 时间：2012-10-16T12:52:35.693
> 
> 标签：jsplumb

大家好，我在 JS 铅垂图书馆工作以建立联系。我被困在某一点上，需要专家的帮助。这是我的场景。

我有很多连接，我想要的是，当我单击一个连接时，其上会出现一个特定标签以显示它已被选中。当我单击一个其他连接时，以前单击的连接消失并选择了新连接。

到目前为止我所做的是

```
 jsPlumbInst.bind('click', function(c) {
         c.showOverlay('selected');
         var previously_active = jsPlumbInst.getConnections({scope:"active"});//this function not returning me values
         if(previously_active.length != 0) {
               /*So never go in this statement*/
               previously_active[0].hideOverlay('selected');
               previously_active.scope("jsPlumb_DefaultScope");  
          }
     c.scope = "active"; 
   }); 
```

这里的问题是我的连接范围设置为“活动”

> jsPlumbInst.getConnections({scope:"active"}) 没有返回任何东西。

那么任何人都可以指导我是否做对了吗？或者有没有其他方法可以实现这一目标？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-10-04T08:13:06.737

`var sourcecon = jsPlumb.getConnections({source: e}) ; for(i=0; i<sourcecon.length; i++) { var target = getName(sourcecon[i].targetId) ; var source = getName(sourcecon[i].sourceId) ; removefrommatrix(source, target,sourcecon[i].sourceId,sourcecon[i].targetId) ; }` 这是我正在使用的代码片段。它工作正常。您的代码看起来不错，除了您使用 jsPlumbInst 而不是 jsPlumb 的一个区别。我想这可能是问题所在。对我来说，它就像 Java 中的静态类。不确定。但试着看看它是否能帮助你。似乎我迟到了将近一年的回复。一切顺利 ：-）

# java - Liferay 主题 + Maven

> ID：12915172
> 
> 赞同：1
> 
> 时间：2012-10-16T12:52:46.647
> 
> 标签：java, maven, liferay

我想创建 liferay 主题，所以我从原型创建了一个 Maven 项目。我的 pom.xml：

```
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd">
  <modelVersion>4.0.0</modelVersion>
  <groupId>com.liferay.sample</groupId>
  <artifactId>sample-theme</artifactId>
  <packaging>war</packaging>
  <name>sample-theme Theme</name>
  <version>0.0.1-SNAPSHOT</version>
  <build>
    <plugins>
      <plugin>
        <groupId>com.liferay.maven.plugins</groupId>
        <artifactId>liferay-maven-plugin</artifactId>
        <version>6.1.20</version>
        <executions>
          <execution>
            <phase>generate-sources</phase>
            <goals>
              <goal>theme-merge</goal>
              <goal>build-css</goal>
              <goal>build-thumbnail</goal>
            </goals>
          </execution>
        </executions>
        <configuration>
          <autoDeployDir>${liferay.auto.deploy.dir}</autoDeployDir>
          <appServerDeployDir>${liferay.app.server.deploy.dir}</appServerDeployDir>
          <appServerLibGlobalDir>${liferay.app.server.lib.global.dir}</appServerLibGlobalDir>
          <appServerPortalDir>${liferay.app.server.portal.dir}</appServerPortalDir>
          <liferayVersion>${liferay.version}</liferayVersion>
          <parentTheme>${liferay.theme.parent}</parentTheme>
          <pluginType>theme</pluginType>
          <themeType>${liferay.theme.type}</themeType>
        </configuration>
      </plugin>
      <plugin>
        <artifactId>maven-resources-plugin</artifactId>
        <version>2.5</version>
        <configuration>
          <encoding>UTF-8</encoding>
        </configuration>
      </plugin>
    </plugins>
  </build>
  <dependencies>
    <dependency>
      <groupId>com.liferay.portal</groupId>
      <artifactId>portal-service</artifactId>
      <version>6.1.0</version>
      <scope>provided</scope>
    </dependency>
    <dependency>
      <groupId>com.liferay.portal</groupId>
      <artifactId>util-bridges</artifactId>
      <version>6.1.0</version>
      <scope>provided</scope>
    </dependency>
    <dependency>
      <groupId>com.liferay.portal</groupId>
      <artifactId>util-taglib</artifactId>
      <version>6.1.0</version>
      <scope>provided</scope>
    </dependency>
    <dependency>
      <groupId>com.liferay.portal</groupId>
      <artifactId>util-java</artifactId>
      <version>6.1.0</version>
      <scope>provided</scope>
    </dependency>
    <dependency>
      <groupId>javax.portlet</groupId>
      <artifactId>portlet-api</artifactId>
      <version>2.0</version>
      <scope>provided</scope>
    </dependency>
    <dependency>
      <groupId>javax.servlet</groupId>
      <artifactId>servlet-api</artifactId>
      <version>2.4</version>
      <scope>provided</scope>
    </dependency>
    <dependency>
      <groupId>javax.servlet.jsp</groupId>
      <artifactId>jsp-api</artifactId>
      <version>2.0</version>
      <scope>provided</scope>
    </dependency>
  </dependencies>
  <properties>
    <liferay.theme.parent>_styled</liferay.theme.parent>
    <liferay.theme.type>vm</liferay.theme.type>
  </properties>
</project>And I use maven:package and I see an error: 
```

```
[INFO] Scanning for projects...
[INFO]                                                                         
[INFO] ------------------------------------------------------------------------
[INFO] Building sample-theme Theme 0.0.1-SNAPSHOT
[INFO] ------------------------------------------------------------------------
[INFO] ------------------------------------------------------------------------
[INFO] BUILD FAILURE
[INFO] ------------------------------------------------------------------------
[INFO] Total time: 0.400s
[INFO] Finished at: Tue Oct 16 14:47:58 CEST 2012
[INFO] Final Memory: 2M/15M
[INFO] ------------------------------------------------------------------------
[ERROR] Could not find goal 'build-css' in plugin com.liferay.maven.plugins:liferay-maven-plugin:6.1.0 among available goals build-lang, build-wsdd, build-ext, build-service, direct-deploy, theme-merge, build-thumbnail, deploy -> [Help 1]
[ERROR] 
[ERROR] To see the full stack trace of the errors, re-run Maven with the -e switch.
[ERROR] Re-run Maven using the -X switch to enable full debug logging.
[ERROR] 
[ERROR] For more information about the errors and possible solutions, please read the following articles:
[ERROR] [Help 1] http://cwiki.apache.org/confluence/display/MAVEN/MojoNotFoundException 
```

怎么了？我正在尝试更改版本 liferay-maven-plugin 但它不能解决我的问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T13:40:20.973

使用版本，因为版本中`6.1.1`没有`build-css`目标`liferay-maven-plugin.jar``6.1.0`

看看`liferay-maven-plugin.jar/META-INF/maven/plugin.xml`可用的目标。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T05:55:32.760

删除条目 build-css 和 build-thumbnail 并再次部署它，或者您可以检查 pom.xml 文件作为下面链接中给出的参考。

[http://www.liferay.com/community/forums/-/message_boards/message/5220131](http://www.liferay.com/community/forums/-/message_boards/message/5220131)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-11-18T09:24:41.727

正如其他人所写 - 6.1.0 不支持“build-css”目标，因此您应该删除或注释掉您的 pom.xml 中的以下行：

```
<goal>build-css</goal> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-16T21:38:17.853

您没有名为“build-css”的目标您是否使用 groovy 作为配置文件？您在这里粘贴的只是一个构建文件，供 Maven 使用。您的其他目标在哪里，例如，寻找“build-thumbnail”和“theme-merge”？必须在此 Maven 构建文件正在读取的配置文件中。无论这些其他目标在哪里，您都需要在那里或在类似文件中创建您的目标。然后重新构建。

# python - 多处理中不同工作人员的相同输出

> ID：12915177
> 
> 赞同：22
> 
> 时间：2012-10-16T12:53:21.033
> 
> 标签：python, parallel-processing, multiprocessing

我有非常简单的案例，可以将要完成的工作分解并分配给工人。[我从这里](http://broadcast.oreilly.com/2009/04/pymotw-multiprocessing-part-2.html)尝试了一个非常简单的多处理示例：

```
import multiprocessing
import numpy as np
import time

def do_calculation(data):
    rand=np.random.randint(10)
    print data, rand
    time.sleep(rand)
    return data * 2

if __name__ == '__main__':
    pool_size = multiprocessing.cpu_count() * 2
    pool = multiprocessing.Pool(processes=pool_size)

    inputs = list(range(10))
    print 'Input   :', inputs

    pool_outputs = pool.map(do_calculation, inputs)
    print 'Pool    :', pool_outputs 
```

上面的程序产生以下输出：

```
Input   : [0, 1, 2, 3, 4, 5, 6, 7, 8, 9]
0 7
1 7
2 7
5 7
3 7
4 7
6 7
7 7
8 6
9 6
Pool    : [0, 2, 4, 6, 8, 10, 12, 14, 16, 18] 
```

为什么要打印相同的随机数？（我的机器上有 4 个 CPU）。这是最好/最简单的方法吗？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-10-16T12:55:07.003

我认为您需要在函数中使用[numpy.random.seed](http://docs.scipy.org/doc/numpy/reference/generated/numpy.random.seed.html)`do_calculation`重新播种随机数生成器。

我的猜测是，当您导入模块时，随机数生成器 (RNG) 会被播种。然后，当您使用多处理时，您将当前进程与已经播种的 RNG 分叉——因此，您的所有进程都为 RNG 共享相同的种子值，因此它们将生成相同的数字序列。

例如：

```
def do_calculation(data):
    np.random.seed()
    rand=np.random.randint(10)
    print data, rand
    return data * 2 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2019-02-03T19:13:06.037

这篇[博](https://blog.sicara.com/how-numpy-generate-pseudo-random-number-46f705b390e3)文提供了使用 numpy.random 和多处理时的好坏做法示例。更重要的是了解何时创建伪随机数生成器 (PRNG) 的种子：

```
import numpy as np
import pprint
from multiprocessing import Pool

pp = pprint.PrettyPrinter()

def bad_practice(index):
    return np.random.randint(0,10,size=10)

def good_practice(index):
    return np.random.RandomState().randint(0,10,size=10)

p = Pool(5)

pp.pprint("Bad practice: ")
pp.pprint(p.map(bad_practice, range(5)))
pp.pprint("Good practice: ")
pp.pprint(p.map(good_practice, range(5))) 
```

输出：

```
'Bad practice: '
[array([4, 2, 8, 0, 1, 1, 6, 1, 2, 9]),
 array([4, 2, 8, 0, 1, 1, 6, 1, 2, 9]),
 array([4, 2, 8, 0, 1, 1, 6, 1, 2, 9]),
 array([4, 2, 8, 0, 1, 1, 6, 1, 2, 9]),
 array([4, 2, 8, 0, 1, 1, 6, 1, 2, 9])]
'Good practice: '
[array([8, 9, 4, 5, 1, 0, 8, 1, 5, 4]),
 array([5, 1, 3, 3, 3, 0, 0, 1, 0, 8]),
 array([1, 9, 9, 9, 2, 9, 4, 3, 2, 1]),
 array([4, 3, 6, 2, 6, 1, 2, 9, 5, 2]),
 array([6, 3, 5, 9, 7, 1, 7, 4, 8, 5])] 
```

在好的做法中，每个线程创建一次种子，而在不好的做法中，只在导入 numpy.random 模块时创建一次种子。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-05-25T15:49:02.983

这是我使用的（可能需要更新版本的 NumPy）：

```
import numpy as np
from multiprocessing import Pool

entropy = 42
seed_sequence = np.random.SeedSequence(entropy)

number_processes = 5

seeds = seed_sequence.spawn(number_processes)

def good_practice(seed):
    rng = np.random.default_rng(seed)
    return rng.integers(0,10,size=10)

pool = Pool(number_processes)

print(pool.map(good_practice, seeds)) 
```

输出：

```
[array([4, 9, 5, 9, 2, 8, 3, 3, 5, 9]), 
 array([0, 4, 1, 0, 6, 5, 3, 1, 7, 9]), 
 array([7, 0, 7, 7, 1, 0, 1, 3, 9, 6]), 
 array([8, 7, 9, 9, 1, 7, 4, 0, 5, 2]), 
 array([9, 0, 8, 9, 3, 8, 6, 6, 7, 9])] 
```

有关这方面的[NumPy 文档](https://numpy.org/doc/stable/reference/random/bit_generators/generated/numpy.random.SeedSequence.html)实际上很有帮助。[另请参阅](https://numpy.org/doc/stable/reference/random/generator.html?highlight=default_rng#numpy.random.default_rng)。

# linux - 将 Apache vhost 中的 IP 设置为测试域

> ID：12915181
> 
> 赞同：0
> 
> 时间：2012-10-16T12:53:40.407
> 
> 标签：linux, apache, ip, vhosts

我想知道是否可以将服务器外部 IP 设置为域进行测试。

在我的亚马逊服务器设置上它可以工作，因为所有域都指向同一个文件夹。

```
domain1.com - /var/www/domain1
domain2.com - /var/www/domain2
ex.ter.nal.ip - /var/www/ 
```

所以我可以将 ex.ter.nal.ip/test 用于测试网站。

在我的 Linode 设置中，我将文件夹移动到了用户目录中

```
domain1.com - /home/user1/public/domain1
domain2.com - /home/user2/public/domain2
ex.ter.nal.ip goes to domain2.com (I think it points to the last enabled site in Apache -a2ensite) 
```

有没有办法让它工作？我尝试使用 /home/test DocumentRoot 添加一个虚拟主机，但是所有网站都指向测试目录。

我的域虚拟主机文件如下所示：

```
<VirtualHost *:80>
  ServerName  www.domain1.com
  ServerAlias domain1.com

  DirectoryIndex index.html index.php
  DocumentRoot /home/user1/public/domain1.com/public

  <Directory /home/user1/public/domain1.com/public>
    Options Indexes FollowSymLinks MultiViews
    AllowOverride All
    Order allow,deny
    allow from all
  </Directory>
</VirtualHost> 
```

我的测试看起来很轻巧，但是启用后所有域都指向测试文件夹

```
<VirtualHost ex.ter.nal.ip>
  ServerName ex.ter.nal.ip

  DirectoryIndex index.html index.php
  DocumentRoot /home/test/public

  <Directory /home/test/public>
    Options Indexes FollowSymLinks MultiViews
    AllowOverride All
    Order allow,deny
    allow from all
  </Directory>
</VirtualHost> 
```

# javascript - 在现有应用程序中“注入”JavaScript 以操纵 UI (qwebirc)

> ID：12915187
> 
> 赞同：2
> 
> 时间：2012-10-16T12:53:50.907
> 
> 标签：javascript, irc, cross-site

我需要将一些 JavaScript 注入现有的应用程序。

该应用程序通常嵌入`iframe`这样的：

```
<html>
<body>
    <iframe src="http://webchat.quakenet.org/" width="647" height="400"></iframe>
</body>
</html> 
```

它是一个基于 JavaScript 的开源 IRC 客户端[http://webchat.quakenet.org/](http://webchat.quakenet.org/)（[来源](http://hg.qwebirc.org/qwebirc/src/2e37e36ead85f1e36f85f689d5c66dcc8c0b90a3/js?at=default)）。

现在我喜欢注入一些 JS 来突出显示特殊消息，例如。为此，我已经找到要覆盖的[HilighterClass](http://hg.qwebirc.org/qwebirc/src/2e37e36ead85f1e36f85f689d5c66dcc8c0b90a3/js/ui/notifications.js?at=default)。

问题是，我怎么能这样做？`iFrame`我猜现代浏览器不“允许”将 JS 注入到 an中，或者？

如果这`iFrame`是一个问题，也许我可以像他们一样添加客户端：

```
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
  <base />
  <title>QuakeNet Web IRC (qwebirc)</title>
 ...
  <script type="text/javascript">
    var ui = new qwebirc.ui.Interface("ircui", qwebirc.ui.QUI, {"appTitle":"QuakeNet Web     IRC","dynamicBaseURL":"/dynamic/leibniz/","baseURL":"http://webchat.quakenet.org/","validateNickname":false,"networkServices":["Q!TheQBot@CServe.quakenet.org"],"nickValidation":    {"maxLen":15,"validSubChars":"abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ_[]{}`^\\|0123456789-","validFirstChar":"abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ_[]{}`^\\|","minLen":2},"staticBaseURL":"/static/leibniz/","loginRegex":"^You are now logged in as [^ ]+\\.$","networkName":"QuakeNet"});
  </script>
</head>
<body>
  <div id="ircui">
    <noscript>
      <div id="noscript">Javascript is required to use IRC.</div>
    </noscript>
  </div>
</body>
</html> 
```

要求：

*   客户端应该连接到 quakenet.org 服务器。由于某些跨站点脚本限制，这可能是一个问题。
*   如果我的用户不需要其他插件，那最好。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T13:02:02.600

您可以使用像[Privoxy](http://www.privoxy.org/)这样的代理服务器，它可以将 JavaScript 注入页面。不幸的是，您的用户必须通过 Privoxy 进行所有浏览，因此这可能不是一个选择。

或者您设置自己的反向代理（例如 Squid）并在中继之前[更改内容。](https://serverfault.com/questions/125624/modify-html-content-with-squid)您可以通过调用您自己的库来替换对 JavaScript 库的请求，该库包含原始 JavaScript*和*突出显示代码。

Ans 你肯定听说过[Greasemonkey](https://addons.mozilla.org/en-US/firefox/addon/greasemonkey/)，这是一个浏览器插件，可以做到这一点 - 注入内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T12:55:33.357

您不能操纵 iframe 的内容。跨站点脚本不是这里的问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-07-12T09:47:42.760

为了使注入最简单，您可以使用[Gatejs SPDY/HTTP 代理](http://gatejs.org/)并使用[注入 gatejs 操作码](http://gatejs.org/index.php//documentation/1-8/opcode-forward-injection.html)- 它适用于正向和反向代理。

Gatejs 注入将尝试将您的 html 代码添加到 HTML (text/html) 类型的内容中。

下面是一个使用注入的正向代理示例。

```
var serverConfig = function(bs) { return({
    hostname: "testServer0",
    runDir: "/tmp/gatejs",
    dataDir: "/path/to/dataDir",
    logDir: "/var/log/gatejs",

    http: {
        testInterface: {
            type: 'forward',
            port: 8080,
            pipeline: 'pipetest'
        },
    },
    pipeline: {
        pipetest: [
            ['injection', {
                 code: "<h1>w00t injection</h1>"
            }],
            ['proxyPass', { mode: 'host', timeout: 10 }]
        ],
    }
})}; 
```

MK-

# python - scipy.sparse.csr_matrix 如果不 为零则替换值

> ID：12915192
> 
> 赞同：2
> 
> 时间：2012-10-16T12:54:15.133
> 
> 标签：python, matrix, scipy, sparse-matrix

我有以下情况：

我有两个形状相同的 csr_matrices（以向量的形式），如果向量 v 的对应值不为零，我想替换向量 u 的值。

所以：

```
u[i,0] = v[i,0] iff v[i,0] is not zero 
```

当然我可以遍历整个事情，但我在想应该有一个更pythonic的解决方案，这也可以加快整个事情。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T22:42:33.073

我认为你会得到的最好的可能是这个，但是这不会为 的稀疏模式添加新的值`u`，只有当它是 iff `(u[i,j] is nonzero) and (v[i,j] != 0`)！

```
if not isinstance(u, csr_matrix):
    raise ValueError
# make sure that data is as expected. I hope this is all thats necessary. Not sure when it is necessary:
u.sum_duplicates()

col = np.arange(u.shape[0]).repeat(np.diff(u.indptr))
row = u.indices
# You could mask out specific rows/columns here too I guess

new_data = v[row, col]
new_data = np.asarray(new_data).squeeze() # probably not necessary, but doesn't hurt too
mask = new_data != 0
np.putmask(u.data, mask, new_data)

# or if you prefere, but a bit slower for the putmask call:
u.data[mask] = new_data[mask] 
```

对不起，有点来回，所以如果还有什么不太对劲。我有点希望有一个更整洁的解决方案......

# java - 基于电子表格输入的自动化电子邮件服务

> ID：12915196
> 
> 赞同：0
> 
> 时间：2012-10-16T12:54:47.503
> 
> 标签：java, database

我希望为我所属的组创建一个基于 Java 的自动电子邮件服务。目前所有人员的详细信息都存储在 Excel 电子表格中，该信息中最重要的部分是他们的许可证更新日期。

所以 - 如果某人的许可证下周到期，该程序应自动向他们发送一封电子邮件，通知他们何时到期以及下一步该做什么。

我认为最好将数据库导出到 Java 等价物，或者这有关系吗？

关于如何开始的任何提示都会很棒。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T13:11:43.030

您可以创建一个简单的应用程序（Web 或独立），使用[http://jexcelapi.sourceforge.net/](http://jexcelapi.sourceforge.net/)读取 Excel 工作表，然后在处理完适当的字段（并引发标志）后触发电子邮件？

这将避免您必须将 Excel 转换为不同的数据库。大小可能是一个问题（但您没有说明），并且您没有说明您希望它多久运行一次。

希望这可以帮助

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T13:51:04.163

您可以使用任一处理 Excel 电子表格

**Apache POI** [http://poi.apache.org/](http://poi.apache.org/)或**Jexcel**

然后使用**Javamail** [http://www.oracle.com/technetwork/java/javamail/index.html](http://www.oracle.com/technetwork/java/javamail/index.html)

用于发送邮件

# php - 无法使用 PHP 在 MySQL 数据库中插入数据

> ID：12915197
> 
> 赞同：-2
> 
> 时间：2012-10-16T12:54:48.860
> 
> 标签：php, mysql

我是网络开发的新手。我正在检查如何使用 php 将数据从表单更新到服务器中的数据库。我似乎能够连接到数据库，但无法更新数据。

表单的 html：

```
<html>
 <head>
  <title>Experiment with php and db</title>
 </head>

 <body>
   <form name="form1" id="form1" method="post" action="formact.php">
     <p><input type="text" name="fname" placeholder="first name"/></p>
     <p><input type="text" name="lname" placeholder="last name"/></p>
     <p><textarea name="words" placeholder="Enter what you think"></textarea></p>
     <p><button type="submit"></button></p>
   </form>
 </body> 
```

这是formact.php

```
<?php
 $name=$_POST['fname']." ".$_POST['lname'];
 $ta=$_POST['words'];
 $con = mysql_connect();
 $msg="status 0";
 if (!$con)
   {
          $msg="db connect failed";
   die('Could not connect: ' . mysql_error());
   }
   if ($con)
   $msg="db connected";
 mysql_select_db("php_test",$con);
 $success=mysql_query("INSERT INTO news (title, blog_entry) VALUES ('$name','$ta')");
 mysql_close($con);
 ?>
 <html>
 <head>
 <title>Form with php</title>
 </head>
 <body>
 <?php
 echo $name."<br/>";
 echo $ta."<br/>";
 echo $msg."<br/>";
 if(!$success)
 echo "DB update failed..";
 ?>
 </body>
 </html> 
```

我在回声中得到`$msg=="db connected"`and 。`!success==true`你能指出我在哪里做错了吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T14:32:14.883

首先，通过附加“mysql_query”来回显整个查询，然后在 phpmyadmin 上运行该查询，您可以轻松地指出您的错误并纠正它。通过回显，您还可以查看值是否来自帖子...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T13:03:36.633

自从我上次接触 php 以来已经有一段时间了，所以这可能根本没有帮助，但你可以尝试我要提出的以下 2 件事：

1）我不确定，但我相信如果你想使用`$success`你需要`mysql_close($con);`在使用后关闭它。

2）你确定`!$success`是有效的？我的意思`!`是通常不是，但 !success 是什么意思？空的？

就像我说的那样，我可能完全错了，只是想帮助...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-16T13:37:32.553

首先不推荐使用 mysql_* 你应该使用 mysqli_* 或 PDO

第二次相应地连接到数据库

```
<pre>   
    <?php
    $link = mysqli_connect('localhost', 'mysql_user', 'mysql_password'); //By default mysql_user=>root and mysql_password='' mean empty
    if (!$link) {
        die('Could not connect: ' . mysqli_error());
    }
    echo 'Connected successfully';
    mysqli_select_db("php_test", $con);

    mysqli_query("INSERT INTO news (title, blog_entry)
    VALUES ('$name','$ta')");
    mysqli_close($link);
    ?> 
```

# playframework-2.0 - 将 Play 2 应用程序部署到 JBoss 7

> ID：12915199
> 
> 赞同：0
> 
> 时间：2012-10-16T12:54:58.003
> 
> 标签：playframework-2.0, jboss7.x

我正在尝试将 Play (2.0.4) 应用程序部署到 JBoss AS 7.1.0，但过去几天没有成功。

我使用了[Play2WarPlugin](https://github.com/dlecan/play2-war-plugin/)并遵循了描述。（欢迎 root 被禁用，war 重命名为 ROOT.war 等）。但是，部署时出现以下错误

```
14:38:41,625 INFO  [org.jboss.as.server.deployment] (MSC service thread 1-2) JBAS015876: Starting deployment of "ROOT.war"
14:38:49,521 WARN  [org.jboss.as.server.deployment] (MSC service thread 1-1) Class Path entry activation.jar in "/content/ROOT.war/WEB-INF/lib/javax.mail.mail-1.4.1.jar"  does not point to a valid jar for a Class-Path reference.
14:38:49,525 WARN  [org.jboss.as.server.deployment] (MSC service thread 1-1) Class Path entry xml-apis.jar in "/content/ROOT.war/WEB-INF/lib/xalan.serializer-2.7.1.jar"  does not point to a valid jar for a Class-Path reference.
14:38:49,526 WARN  [org.jboss.as.server.deployment] (MSC service thread 1-1) Class Path entry xercesImpl.jar in "/content/ROOT.war/WEB-INF/lib/xalan.xalan-2.7.1.jar"  does not point to a valid jar for a Class-Path reference.
14:38:49,527 WARN  [org.jboss.as.server.deployment] (MSC service thread 1-1) Class Path entry xml-apis.jar in "/content/ROOT.war/WEB-INF/lib/xalan.xalan-2.7.1.jar"  does not point to a valid jar for a Class-Path reference.
14:38:49,528 WARN  [org.jboss.as.server.deployment] (MSC service thread 1-1) Class Path entry serializer.jar in "/content/ROOT.war/WEB-INF/lib/xalan.xalan-2.7.1.jar"  does not point to a valid jar for a Class-Path reference.
14:38:49,566 ERROR [org.jboss.msc.service.fail] (MSC service thread 1-4) MSC00001: Failed to start service jboss.deployment.unit."ROOT.war".PARSE: org.jboss.msc.service.StartException in service jboss.deployment.unit."ROOT.war".PARSE: Failed to process phase PARSE of deployment "ROOT.war"
at org.jboss.as.server.deployment.DeploymentUnitPhaseService.start(DeploymentUnitPhaseService.java:119) [jboss-as-server-7.1.0.Final.jar:7.1.0.Final]
at org.jboss.msc.service.ServiceControllerImpl$StartTask.startService(ServiceControllerImpl.java:1811) [jboss-msc-1.0.2.GA.jar:1.0.2.GA]
at org.jboss.msc.service.ServiceControllerImpl$StartTask.run(ServiceControllerImpl.java:1746) [jboss-msc-1.0.2.GA.jar:1.0.2.GA]
at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886) [classes.jar:1.6.0_35]
at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908) [classes.jar:1.6.0_35]
at java.lang.Thread.run(Thread.java:680) [classes.jar:1.6.0_35]
Caused by: org.jboss.as.server.deployment.DeploymentUnitProcessingException: JBAS018031: Conflict occurred processing web fragment in JAR: com.github.play2war.play2-war-core_2.9.1-0.5.jar
at org.jboss.as.web.deployment.WarMetaDataProcessor.deploy(WarMetaDataProcessor.java:292)
at org.jboss.as.server.deployment.DeploymentUnitPhaseService.start(DeploymentUnitPhaseService.java:113) [jboss-as-server-7.1.0.Final.jar:7.1.0.Final]
... 5 more
Caused by: java.lang.IllegalStateException: Unresolved conflict on servlet class: play.core.server.servlet30.Play2Servlet
at org.jboss.metadata.merge.web.spec.ServletMetaDataMerger.augment(ServletMetaDataMerger.java:93)
at org.jboss.metadata.merge.web.spec.ServletsMetaDataMerger.augment(ServletsMetaDataMerger.java:35)
at org.jboss.metadata.merge.web.spec.WebCommonMetaDataMerger.augment(WebCommonMetaDataMerger.java:313)
at org.jboss.as.web.deployment.WarMetaDataProcessor.deploy(WarMetaDataProcessor.java:290)
... 6 more

14:38:49,579 INFO  [org.jboss.as.server] (DeploymentScanner-threads - 2) JBAS015870: Deploy of deployment "ROOT.war" was rolled back with failure message {"JBAS014671: Failed services" => {"jboss.deployment.unit.\"ROOT.war\".PARSE" => "org.jboss.msc.service.StartException in service jboss.deployment.unit.\"ROOT.war\".PARSE: Failed to process phase PARSE of deployment \"ROOT.war\""}}
14:38:49,653 INFO  [org.jboss.as.server.deployment] (MSC service thread 1-1) JBAS015877: Stopped deployment ROOT.war in 74ms
14:38:49,655 INFO  [org.jboss.as.controller] (DeploymentScanner-threads - 2) JBAS014774: Service status report
JBAS014777:   Services which failed to start:      service jboss.deployment.unit."ROOT.war".PARSE: org.jboss.msc.service.StartException in service jboss.deployment.unit."ROOT.war".PARSE: Failed to process phase PARSE of deployment "ROOT.war"

14:38:49,658 ERROR [org.jboss.as.server.deployment.scanner] (DeploymentScanner-threads - 1) {"JBAS014653: Composite operation failed and was rolled back. Steps that failed:" => {"Operation step-2" => {"JBAS014671: Failed services" => {"jboss.deployment.unit.\"ROOT.war\".PARSE" => "org.jboss.msc.service.StartException in service jboss.deployment.unit.\"ROOT.war\".PARSE: Failed to process phase PARSE of deployment \"ROOT.war\""}}}} 
```

我不确定警告是导致失败的原因还是其他原因。所以我的问题是： *您有什么建议和提示，可能导致错误的原因以及如何解决？*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T08:38:50.520

问题是捆绑的 play2war 插件版本错误。从日志中您可以看到它尝试使用 0.5，但为了部署到 jboss 7.1.1，由于 servlet 3.0 容器，需要 v0.8。

只要配置正确，部署就成功了。

# javascript - 通过拖动元素传递 mouseover 事件

> ID：12915203
> 
> 赞同：5
> 
> 时间：2012-10-16T12:55:01.107
> 
> 标签：javascript, jquery, hover, mouseover, mousemove

我有一个自定义的可拖动元素（拖动开始于单击并结束于单击），它可以放在某些区域。在鼠标悬停区域决定它是否接受当前可拖动，并分别改变它的颜色。一切都像一个魅力，直到客户决定应将可拖动元素定位在光标的上方和左侧，这就是故事的开始。

当我移动它时，我意识到鼠标悬停事件现在转到可拖动区域，而不是该区域。我做了一些搜索，发现了魔法

```
pointer-events:none 
```

CSS 属性。不幸的是，它在 IE9 中不起作用，*它*是我们的目标浏览器。

这是一个简单的例子：http: [//jsfiddle.net/q9njK/5/](http://jsfiddle.net/q9njK/5/)

问题是：我可以让它在 IE9 中以比直接观看 mousemove 并计算指针指向的区域更简单的方式工作吗？

Edit_1：“直接观看mousemove”我的意思是这样的解决方案： http: [//jsbin.com/uhuto](http://jsbin.com/uhuto)在mousemove的情况下它会很慢而且很难看。好吧，我知道，“缓慢而丑陋”是 IE 的座右铭，但如果某个地方存在更优雅的解决方案，我想知道它。

Edit_2：似乎 IE9`pointer-events: none`甚至不支持 SVG（这是一个示例，在 IE9 中不起作用：http: [//jsfiddle.net/q9njK/9/](http://jsfiddle.net/q9njK/9/)），所以除了绑定到 document.mousemove 之外别无他法。或者是吗？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-10-17T21:56:36.467

## 不，相信我；我试过了

遇到了和你完全相同的问题，结果把我的头撞到墙上，只发现你做了什么；指针事件有效，但在 IE9 中无效。

您将不得不使用 js 来克服这个问题 - 抱歉。

一切顺利，

-莱德杰

# android - 如何使用过滤器实现自定义 ExpandableListView？

> ID：12915204
> 
> 赞同：1
> 
> 时间：2012-10-16T12:55:01.370
> 
> 标签：android, expandablelistadapter

我有一个带有光标组元素和数组子元素的自定义可扩展列表适配器。我需要实现过滤器选项。我[使用子搜索过滤器浏览了自定义可扩展列表视图，](https://stackoverflow.com/questions/5775774/custom-expandable-list-view-with-child-search-filter)但我无法理解其中的 MangaNameFilter 类实际上做了什么。请建议一些基本步骤。任何帮助将不胜感激

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T13:01:10.893

当您调用 adapter.getFilter().filter() 时，您将在 performFiltering() 中处理过滤后的字符序列。

并且不要忘记用类的实例覆盖 getFilter()`YourFilter extends Filter`

但另一个建议：不要使用过滤器，只需添加带有 sql 请求的 textwatcher。

# performance - 如何理解 EXPLAIN ANALYZE

> ID：12915209
> 
> 赞同：44
> 
> 时间：2012-10-16T12:55:09.907
> 
> 标签：performance, postgresql, database-design, postgresql-performance

我对查看 EXPLAIN ANALYZE 结果不是很熟悉，我的查询太慢了。我试图阅读如何解释解释查询的结果，但我仍然不知道我应该寻找什么，以及可能有什么问题。我有一种感觉，某处有一些大红灯在闪烁，我只是没看到。

所以查询很简单，看起来像这样：

```
EXPLAIN ANALYZE SELECT "cars".* FROM "cars" WHERE "cars"."sales_state" = 'onsale' AND "cars"."brand" = 'BMW' AND "cars"."model_name" = '318i' AND "cars"."has_auto_gear" = TRUE  LIMIT 25 OFFSET 0 
```

结果是这样的：

```
Limit  (cost=0.00..161.07 rows=25 width=1245) (actual time=35.232..38.694 rows=25 loops=1)
  ->  Index Scan using index_cars_onsale_on_brand_and_model_name on cars  (cost=0.00..1179.06 rows=183 width=1245) (actual time=35.228..38.652 rows=25 loops=1)
        Index Cond: (((brand)::text = 'BMW'::text) AND ((model_name)::text = '318i'::text))
        Filter: has_auto_gear"
Total runtime: 38.845 ms 
```

一点背景知识：我在 Postgresql 9.1.6 上，在 Herokus 专用数据库上运行。我的数据库有大约 7,5Gb 的 RAM，表 cars 包含 3,1M 行，大约 2,0M 的行有 sales_state = 'onsale'。该表有 170 列。它使用的索引如下所示：

```
CREATE INDEX index_cars_onsale_on_brand_and_model_name
  ON cars
  USING btree
  (brand COLLATE pg_catalog."default" , model_name COLLATE pg_catalog."default" )
  WHERE sales_state::text = 'onsale'::text; 
```

有人看到一些明显的大问题吗？

编辑：

```
SELECT pg_relation_size('cars'), pg_total_relation_size('cars'); 
```

pg_relation_size: 2058444800 pg_total_relation_size: 4900126720

```
SELECT pg_relation_size('index_cars_onsale_on_brand_and_model_name'); 
```

pg_relation_size: 46301184

```
SELECT avg(pg_column_size(cars)) FROM cars limit 5000; 
```

平均：636.9732567210792995

没有限制：

```
EXPLAIN ANALYZE SELECT "cars".* FROM "cars" WHERE "cars"."sales_state" = 'onsale' AND "cars"."brand" = 'BMW' AND "cars"."model_name" = '318i' AND "cars"."has_auto_gear" = TRUE

Bitmap Heap Scan on cars  (cost=12.54..1156.95 rows=183 width=4) (actual time=17.067..55.198 rows=2096 loops=1)
  Recheck Cond: (((brand)::text = 'BMW'::text) AND ((model_name)::text = '318i'::text) AND ((sales_state)::text = 'onsale'::text))
  Filter: has_auto_gear
  ->  Bitmap Index Scan on index_cars_onsale_on_brand_and_model_name  (cost=0.00..12.54 rows=585 width=0) (actual time=15.211..15.211 rows=7411 loops=1)"
        Index Cond: (((brand)::text = 'BMW'::text) AND ((model_name)::text = '318i'::text))
Total runtime: 56.851 ms 
```

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-10-16T13:06:47.253

虽然对于像这样的简单计划没有那么有用，但[http://explain.depesz.com](http://explain.depesz.com)确实很有用。见[http://explain.depesz.com/s/t4fi](http://explain.depesz.com/s/t4fi)。注意“统计”选项卡和“选项”下拉菜单。

关于这个计划的注意事项：

*   估计的行数 (183) 与实际行数 (25) 相当。它不是数百倍，也不是 1。当涉及到行数估计或“1 与非 1”问题时，您对数量级更感兴趣。（你甚至不需要“足够接近政府工作”的准确性——“足够接近军事承包会计”就可以了）。选择性估计和统计数据似乎是合理的。

*   它使用提供的两列部分索引 ( `index scan using index_cars_onsale_on_brand_and_model_name`)，因此它匹配部分索引条件。你可以在`Filter: has_auto_gear`. 还显示了索引搜索条件。

*   鉴于表的行数意味着索引相当大，尤其是当它超过两列时，查询性能看起来很合理。匹配的行将分散，因此每一行也可能需要单独的页面读取。

我觉得这里没有错。不过，这个查询可能会极大地受益于 PostgreSQL 9.2 的仅索引扫描。

这里可能存在一些表膨胀，但考虑到 2 列索引和行数，响应时间并非完全不合理，特别是对于具有 170 (!!) 列的表来说，每个列可能适合相对较少的元组页。如果您可以承受一些停机时间，请尝试`VACUUM FULL`重新组织表并重建索引。这将在重建表时以独占方式锁定表一段时间。如果您无法承受停机时间，请参阅[pg_reorg](http://reorg.projects.postgresql.org/)和/或`CREATE INDEX CONCURRENTLY`and `ALTER INDEX ... RENAME TO`。

有时您可能会发现`EXPLAIN (ANALYZE, BUFFERS, VERBOSE)`更多信息，因为它可以显示缓冲区访问等。

一种可能使该查询更快的选项（尽管它可能会降低其他查询的速度）是对表进行分区`brand`并启用`constraint_exclusion`. 请参阅[分区](http://www.postgresql.org/docs/current/static/ddl-partitioning.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T13:10:43.510

嗯...我可以告诉你的第一件事是你的数据库期望（从统计数据）获得 183 行。实际上它有 25 行。尽管在这种情况下这可能不太相关（即，这些少量且没有繁重的操作，不必担心估计错误）。

一个更大的问题（恕我直言）是 25 行的简单索引查找需要 35 毫秒。这似乎有点多。数据库是否足够重，至少可以在内存中包含所有索引？不过这并不过分，对我来说似乎有点慢。

至于查看您的解释，我建议使用[explain.depesz.com：http://explain.depesz.com/s/sA6](http://explain.depesz.com/s/sA6)

# javascript - 如何反转下拉框

> ID：12915212
> 
> 赞同：0
> 
> 时间：2012-10-16T12:55:20.817
> 
> 标签：javascript

我有一个显示下拉框的 ASP.NET 页面。我需要使用javascript来反转它。这可能吗？如何？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T13:11:06.083

```
function fx(e)
{
  for(var i=e.options.length-2;i>=0;i--)
  {
    e.appendChild(e.options[i]);
  }
} 
```

参数 e 是应该反转的选择元素。
这是一种简单的方法，它不处理 optgroups。

演示：http: [**//jsfiddle.net/doktormolle/ke9mX/**](http://jsfiddle.net/doktormolle/ke9mX/)

# excel - 检查Column中是否存在Cell值，然后获取NEXT Cell的值

> ID：12915215
> 
> 赞同：91
> 
> 时间：2012-10-16T12:55:32.013
> 
> 标签：excel

检查列中是否存在单元格值后，我需要**获取匹配单元格旁边的单元格值**。例如，我检查 中的值是否`cell A1`存在于 中`column B`，并假设它匹配`B5`，那么我想要 中的值`cell C5`。

为了解决问题的前半部分，我这样做了......

```
=IF(ISERROR(MATCH(A1,B:B, 0)), "No Match", "Match") 
```

......它奏效了。然后，由于[之前对 SO 的回答](https://stackoverflow.com/a/12642375/979621)，我还能够获得匹配单元格的行号：

```
=IF(ISERROR(MATCH(A1,B:B, 0)), "No Match", "Match on Row " & MATCH(A1,B:B, 0)) 
```

所以很自然地，为了获得下一个单元格的值，我尝试了......

```
=IF(ISERROR(MATCH(A1,B:B, 0)), "No Match", C&MATCH(A1,B:B, 0)) 
```

......它不起作用。

我错过了什么？如何将列号附加到返回的行号以达到所需的结果？

* * *

## 回答 #1

> 赞同：100
> 
> 时间：2012-10-16T13:11:18.583

使用不同的函数，例如 VLOOKUP：

```
=IF(ISERROR(MATCH(A1,B:B, 0)), "No Match", VLOOKUP(A1,B:C,2,FALSE)) 
```

* * *

## 回答 #2

> 赞同：39
> 
> 时间：2012-10-16T13:51:57.733

在[t.thielemans 的回答](https://stackoverflow.com/a/12915478/979621)之后，我就这样工作了

```
=VLOOKUP(A1, B:C, 2, FALSE) 
```

工作正常，做我想要的，除了它返回`#N/A`不匹配；所以它适用于已知该值肯定存在于查找列中的情况。

**编辑**（基于 t.thielemans 的评论）：

为避免`#N/A`不匹配，请执行以下操作：

```
=IFERROR(VLOOKUP(A1, B:C, 2, FALSE), "No Match") 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-10-16T13:21:21.073

这个怎么样？

```
=IF(ISERROR(MATCH(A1,B:B, 0)), "No Match", INDIRECT(ADDRESS(MATCH(A1,B:B, 0), 3))) 
```

末尾的“3”表示 C 列。

# wordpress - 如何在 wordpress 上输出 3 件事

> ID：12915219
> 
> 赞同：0
> 
> 时间：2012-10-16T12:55:40.037
> 
> 标签：wordpress, wordpress-theming

我正在更改 WordPress 主题。该主题突出显示了您可以在管理面板中添加的条目。我可以输入一个标题，正常的描述，在底部我可以放一段特定的摘录。

问题是我必须在家里为这些对象设置标题、副标题和描述。

如果我使用 excerpts()，而 excerpts 的输入为空，则 excerpts 函数采用 X 个描述词。如果我在摘录输入中写了一个副标题，它只显示这些词，而不是条目的描述。

有没有办法在 WordPress 的条目中包含 3 件事，或者显示描述，如带有字数限制的摘录？

提前致谢。

编辑：

```
 <div class="home-sectors-title">
            <h3><?php echo the_title(); ?></h3>
     </div>
     <div class=""home-sectors-subtitle">
            <?php echo excerpt('17'); ?>
     </div>
     <div class="home-sectors-description">
            //description here
     </div> 
```

*   条目的标题（如普通帖子）
*   一个简短的字幕
*   条目的长文本（像普通帖子一样的html文本）

![在此处输入图像描述](../Images/83bbc076fe6c98b75b2a8d509cb191b7.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T13:01:45.213

您可以创建一个子主题，复制所需的文件并在那里编辑代码。在这种情况下，我假设您想删除/评论描述部分？

使用子主题：[http ://codex.wordpress.org/Child_Themes](http://codex.wordpress.org/Child_Themes)

子主题插件：[http ://wordpress.org/extend/plugins/one-click-child-theme/](http://wordpress.org/extend/plugins/one-click-child-theme/)

# javascript - 引导模式 - 单击“号召性用语”按钮时关闭模式

> ID：12915222
> 
> 赞同：60
> 
> 时间：2012-10-16T12:55:51.967
> 
> 标签：javascript, twitter-bootstrap

我的模态中有一个外部链接，我希望在用户单击该链接后隐藏模态。我怎么做？

这是我的代码：

```
<div class="modal hide fade" id="modalwindow">
  <div class="modal-header">
    <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
    <h3>Title</h3>
  </div>
  <div class="modal-body">
    <p>You need to do a search on google.com for that.</p>
  </div>
  <div class="modal-footer">
    <a id="closemodal" href="https://www.google.com" class="btn btn-primary" target="_blank">Launch google.com</a>
  </div>
</div>

<script type="text/javascript">
    $('#closemodal').modal('hide');
</script> 
```

* * *

## 回答 #1

> 赞同：121
> 
> 时间：2012-10-16T12:56:38.983

您需要将模态隐藏调用绑定到`onclick`事件。

假设您使用的是 jQuery，您可以这样做：

```
$('#closemodal').click(function() {
    $('#modalwindow').modal('hide');
}); 
```

还要确保在文档完成加载后绑定点击事件：

```
$(function() {
   // Place the above code inside this block
});
enter code here 
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-10-16T12:57:41.737

**删除您的脚本，并更改​​ HTML：**

```
<a id="closemodal" href="https://www.google.com" class="btn btn-primary close" data-dismiss="modal" target="_blank">Launch google.com</a> 
```

编辑：请注意，目前这将不起作用，因为引导程序中尚不存在此功能。[请参阅此处的问题](https://github.com/twbs/bootstrap/issues/7192)。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2016-06-28T15:13:28.987

使用`data-dismiss="modal"`. 在我使用 v3.3.5 的 Bootstrap 版本中，当 `data-dismiss="modal"`添加到如下所示的所需按钮时，它会漂亮地调用我的外部 Javascript (JQuery) 函数并神奇地关闭模式。太好了，我担心我不得不在另一个函数中调用一些模态隐藏并将其链接到真正的工作函数

```
 <a href="#" id="btnReleaseAll" class="btn btn-primary btn-default btn-small margin-right pull-right" data-dismiss="modal">Yes</a> 
```

在一些外部脚本文件中，并且在我准备好的文档中，当然有一个用于单击该标识符 ID 的功能

```
 $("#divExamListHeader").on('click', '#btnReleaseAll', function () {
               // Do DatabaseMagic Here for a call a MVC ActionResult 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-11-13T20:00:22.030

如图制作。

```
 $(document).ready(function(){
    $('#myModal').modal('show');

    $('#myBtn').on('click', function(){
      $('#myModal').modal('show');
    });

  });
<br/>

<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
<!DOCTYPE html>
<html lang="en">
<head>
  <title>Bootstrap Example</title>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
</head>
<body>

<div class="container">
  <h2>Activate Modal with JavaScript</h2>
  <!-- Trigger the modal with a button -->
  <button type="button" class="btn btn-info btn-lg" id="myBtn">Open Modal</button>

  <!-- Modal -->
  <div class="modal fade" id="myModal" role="dialog">
    <div class="modal-dialog">

      <!-- Modal content-->
      <div class="modal-content">
        <div class="modal-header">
          <button type="button" class="close" data-dismiss="modal">&times;</button>
          <h4 class="modal-title">Modal Header</h4>
        </div>
        <div class="modal-body">
          <p>Some text in the modal.</p>
        </div>

      </div>

    </div>
  </div>

</div>
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-12-24T02:09:20.103

我尝试关闭一个加载了引导 CSS 的模式窗口。close() 方法并没有真正关闭模态窗口。所以我将显示样式添加为“无”。

```
 function closeDialog() {
        let d = document.getElementById('d')
        d.style.display = "none"
        d.close()
    } 
```

HTML 代码在对话窗口中包含一个按钮。

```
<input type="submit" value="Confirm" onclick="closeDialog()"/> 
```

# encryption - 是什么阻止我复制在签名板上签名的签名？

> ID：12915228
> 
> 赞同：2
> 
> 时间：2012-10-16T12:56:04.380
> 
> 标签：encryption, digital-signature

如今，从快递员到银行，有很多电子签名板/设备在使用。假设我刚刚在别人的签名板上签署了一份 PDF 文档。是什么阻止了所有者从技术上将签名复制到另一个文件并说我签署了后者，而不是第一个文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T06:43:21.857

我做了一个简短的屏幕截图来解释“仅添加绘图”不足以“签署”PDF：[http ://www.youtube.com/watch?v=VYK45lhLr8I&list=UUqMYqMmYW0k2BRya20LY7lw](http://www.youtube.com/watch?v=VYK45lhLr8I&list=UUqMYqMmYW0k2BRya20LY7lw)

*如果在没有*任何真实数字签名（涉及签名者拥有的私钥/公钥对）的情况下将“湿墨水签名”外观添加到文档中，则文档不应具有任何法律价值。不幸的是，一些国家/州要求不高，并接受可以伪造的签名。

我对我的银幕演员不再那么满意了，因为我把它弄得太有争议了。我这样做是为了宣传这些白皮书：

*   技术方面：http: [//itextpdf.com/book/digitalsignatures/](http://itextpdf.com/book/digitalsignatures/)
*   法律方面：[http ://www.mnhs.org/preserve/records/legislativerecords/docs_pdfs/CA_Authentication_WhitePaper_Dec2011.pdf](http://www.mnhs.org/preserve/records/legislativerecords/docs_pdfs/CA_Authentication_WhitePaper_Dec2011.pdf)

# msbuild - 参数将 CruiseControl.net 解析为 NANT

> ID：12915230
> 
> 赞同：0
> 
> 时间：2012-10-16T12:56:10.903
> 
> 标签：msbuild, cruisecontrol.net, nant, cruisecontrol, devenv

任何人都可以帮助我将参数（例如：URL）从 CruiseControl.net ccnet.config 文件传递​​到 NANT name.build 文件吗？

以下是我尝试过的（但没有成功）

```
 **CC.net file** 

            <tasks>
                <nant>
                    <executable>C:\Program Files (x86)\NANT\nant-0.92\bin\nant</executable>
                    <buildFile>C:\Program Files (x86)\NANT\nant-0.92\RiDM.Build</buildFile>

                    <targetList>
                        <target>build</target>
                    </targetList>
                    <buildArgs>-D:myProp=C:\build</buildArgs>

                </nant>
            </tasks>

            **.build file**

            <?xml version="1.0"?>
                <project name="Parameter test File" >
                    <description>Test parameter passing among Cruise control and NANt files.enter code here    </description>

                    <echo message="This is echo" />

                    <if test="${property::exists('myProp')}" />
                                            <echo message="URL: ${myProp}" />
                    <echo message="This is also echo" />

                </project> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T17:02:25.437

你看过CCNet网站的场景中的例子吗？ [http://www.cruisecontrolnet.org/projects/ccnet/wiki/Step_2_Build_on_Check-in](http://www.cruisecontrolnet.org/projects/ccnet/wiki/Step_2_Build_on_Check-in) 在底部是一个通过示例使用的 NAnt 构建脚本。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T19:05:01.180

您的 nant 构建文件缺少目标。

像 echo 这样的函数调用必须在目标内，然后在巡航控制的 buildArgs 中指定目标。

见[http://nant.sourceforge.net/release/0.91/help/fundamentals/buildfiles.html](http://nant.sourceforge.net/release/0.91/help/fundamentals/buildfiles.html)

**修改 nAnt 脚本**

```
<project name="Parameter test File" >
  <description>Test parameter passing among Cruise control and NANt files.enter code here</description>
  <target name="build">
    <echo message="This is echo" />
    <if test="${property::exists('myProp')}">
      <echo message="URL: ${myProp}" />
      <echo message="This is also echo" />
    </if>
  </target>
</project> 
```

在您的情况下， nNant 将执行`targetList`ccnet.config 中元素中提到的目标`build`

# cocos2d-iphone - cocos2d iPhone中使用draw方法绘制虚线

> ID：12915233
> 
> 赞同：0
> 
> 时间：2012-10-16T12:56:20.607
> 
> 标签：cocos2d-iphone, draw

我正在努力通过使用绘图方法创建一条虚线，其中没有触摸移动方向的点。我使用 draw 方法在屏幕上创建了一些带有触摸移动点的点。但我想画一条带有触摸移动方向的虚线，就像在飞行控制应用程序中一样，每当触摸结束时，虚线就会消失/淡出，并用相同的点创建一条细的平滑线..

这怎么可能....

请解释一下这个....

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T10:32:12.907

你可以玩 CCMotionStreak，不确定你是否可以把它点缀，但它的东边可以用淡入淡出等画出好的线条。

# php - 如何使用适用于 PHP 的 Google Drive API 向现有的 Google 电子表格添加一行

> ID：12915241
> 
> 赞同：2
> 
> 时间：2012-10-16T12:57:02.073
> 
> 标签：php, google-drive-api

我已经尝试过教程中的示例应用程序，但是如何从我的 php 页面向现有电子表格文件添加一行？

我必须将什么传递给[更新功能](https://developers.google.com/drive/v2/reference/files/update)？？？

我想要完成的是在每次提交表单后插入一个包含一些数据的新行

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-20T16:09:37.773

您正在查看错误的 api。[您需要https://developers.google.com/google-apps/spreadsheets/](https://developers.google.com/google-apps/spreadsheets/)上的电子表格 api ，而不是 Drive api

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2021-03-30T06:52:02.870

```
$client = new \Google_Client();
$client->setApplicationName('GoogleSheets');
$client->setScopes([\Google_Service_Sheets::SPREADSHEETS]);
$client->setAccessType('offline');
$client->setAuthConfig($_SERVER['DOCUMENT_ROOT'] . '/credentials.json');

$service = new Google_Service_Sheets($client);
/**
* Write Row Google Sheet
*/

$spreadsheetID = '------';
$range = 'Sheet1';//Correct here for your sheet name
$values = [
    [1,2,3,4,5,6,7],
];
$body = new Google_Service_Sheets_ValueRange([
    'values' => $values
]);
$params = [
    'valueInputOption' => 'RAW',
];
$insert = [
    "insertDataOption"=> "INSERT_ROWS",
];
$result = $service->spreadsheets_values->append($spreadsheetID, $range, $body, $params, $insert); 
```

# android - 使用 https webservice 将图像上传到服务器

> ID：12915243
> 
> 赞同：-1
> 
> 时间：2012-10-16T12:57:02.700
> 
> 标签：android, https

如何使用 https webservice 将图像上传到服务器 我知道如何使用 http webservices 完成此操作 我需要做一些不同的事情吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T12:58:46.707

https 加密由 Web 服务器和您的浏览器/应用程序透明地处理，因此您无需执行任何其他操作。只需以与使用 http url 相同的方式完成它。

# nsurlconnection - NSURLConnection 在 iphone 3gs 中发布大型视频数据失败

> ID：12915245
> 
> 赞同：2
> 
> 时间：2012-10-16T12:57:04.180
> 
> 标签：nsurlconnection, iphone-3gs

我正在尝试在 iphone 3gs 中使用 nsurconnection 上传大型视频文件。但它失败了。应用程序崩溃而没有任何日志。相同的代码在 iphone4 中运行良好。我想知道这是否是一些内存限制问题。3gs 正在上传具有相同代码的小视频。它仅适用于大尺寸视频

这是我使用的代码：

```
NSMutableURLRequest *request=[[NSMutableURLRequest alloc]
                                              initWithURL:[NSURL URLWithString: urlString]
                                              cachePolicy:NSURLRequestUseProtocolCachePolicy
                                              timeoutInterval:6000.0];

            [request setHTTPMethod:@"POST"];
            [request setValue:postLength forHTTPHeaderField:@"Content-Length"];
            [request setValue:@"application/x-www-form-urlencoded; boundary=AaB03x" forHTTPHeaderField:@"Content-Type"];

            NSLog(@"VideoPathD:%@",videoPathUrl);
            NSError *error;
            [request setHTTPBody: [NSData dataWithContentsOfURL:videoPathUrl options:0 error:&error]];

            [NSURLConnection connectionWithRequest:request delegate:self]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T15:56:22.187

您是否尝试过流式传输 HTTP 正文，而不是使用`NSData`?

代替

```
[request setHTTPBody: [NSData dataWithContentsOfURL:videoPathUrl options:0 error:&error]]; 
```

和

```
NSInputStream *videoStream = [[[NSInputStream alloc] initWithURL:videoPathUrl] autorelease];
[request setHTTPBodyStream:videoStream]; 
```

# iphone - 在完成块中保留循环

> ID：12915250
> 
> 赞同：3
> 
> 时间：2012-10-16T12:57:26.630
> 
> 标签：iphone, objective-c, ios, xcode, cocoa

在我的课堂上，我创建了这个方法。

```
-(void) refreshDatasourceWithSuccess:(CreateDataSourceSuccessBlock) successBlock 
                         failure:(CreateDataSourceFailureBlock) failureBlock; 
```

然后我这样称呼它：

```
[self refreshDatasourceWithSuccess:^(NSArray* array){
    //Success block 
    [self setDataSource:array];
    [self.tableView reloadData];

} failure:^(NSError* error){
    // failure block 
    [self showConnnectionError];
}]; 
```

这是一个保留周期，因为我`self`在完成块内引用了吗？（我没有收到任何警告）

**更新：**

在这种情况下的另一个类中，我收到保留周期的警告

```
typedef void (^SetFavoriteCompletionBlock)(NSError*);

-(void)setFavoriteFriend:(BOOL)pSetFavorite
          completion:(SetFavoriteCompletionBlock)completionBlock
{
   //....
   completionBlock(error);
} 
```

然后在这个电话中我收到警告

```
[self setFavoriteFriend:setFavorite 
             completion:^(NSError *error){
                 [self.tableView reloadData];
             }]; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-16T14:06:22.087

假设您的类中没有存储块的变量，那么这两个示例都不是保留周期。该块具有对自身的引用，但自身不保留对该块的引用。

由于方法的命名，您会在第二种情况下收到警告。它以“set”开头，因此代码分析器假定它正在设置您的类的变量。给它一个不同的名字，警告就会消失。

但是，如果您只从方法中同步调用它们，那么使用完成块进行编码是一种奇怪的方式。因此，我怀疑您实际上确实将块存储在某个地方，然后异步调用它们。在这种情况下，它可能是一个保留周期，具体取决于您存储它们的方式和位置。

# android - 读取文件安卓

> ID：12915251
> 
> 赞同：-2
> 
> 时间：2012-10-16T12:57:30.483
> 
> 标签：android, filepath, android-file

我使用以下代码创建了一个 data.txt ：

```
String data = "etc etc etc etc。。" 
                   try {
                   FileOutputStream fOut;

                   fOut = openFileOutput("data.txt", MODE_WORLD_READABLE);

                   OutputStreamWriter fw = new OutputStreamWriter(fOut); 

                   fw.write(data);
                   fw.flush();
                   fw.close();

                } catch (IOException e) {
                        // TODO Auto-generated catch block
                        e.printStackTrace(); 
```

但是我怎么知道它被写入了哪里？如何为我的 data.txt 定义路径？

我想使用其他活动来阅读它，所以我还需要知道如何从路径中读取..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T13:11:46.047

你可以这样做...

```
 static final String FILE_LOG = "log.txt";

    String s = "Hello";
            File file;
            FileOutputStream fos = null;

            try
            {
                file = new File(getExternalFilesDir(null), FILE_LOG);
                fos = new FileOutputStream(file);
            }
            catch(FileNotFoundException e)
            {
                Toast.makeText(this, e.getMessage(), Toast.LENGTH_SHORT).show();
                return;
            }

            try
            {
                fos.write(s.getBytes());
                fos.close();
            }
            catch(IOException e)
            {
                Toast.makeText(this, e.getMessage(), Toast.LENGTH_SHORT).show();
                return;
            }

   String path = file.getAbsolutePath().toString();
   Toast.makeText(this, "File is saved to " + path, Toast.LENGTH_SHORT).show();
   Log.e("PATH", path); 
```

希望这会帮助你。

谢谢...

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-16T18:31:51.497

我认为这会起作用：

```
File root = Environment.getExternalStorageDirectory();
String data = "etc etc etc etc。。";
try{
    if (root.canWrite()){
        File txtfile = new File(root, "data.txt");
        FileWriter txtwriter = new FileWriter(txtfile, true);
        BufferedWriter out = new BufferedWriter(txtwriter);
        out.write(data);
        out.close();
    }
}
catch (IOException e){
    e.printStackTrace();
} 
```

}

此代码将在您的外部存储根目录中创建一个 data.txt 文件。不要忘记将此权限添加到您的 AndroidManifest.xml 文件中：

```
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE"></uses-permission> 
```

# python - 使用 decorator.http() 授权 tokeninfo oauth2 请求失败

> ID：12915253
> 
> 赞同：1
> 
> 时间：2012-10-16T12:57:33.040
> 
> 标签：python, google-app-engine, oauth, oauth-2.0

要访问 TokenInfo，我使用 Python 的 Google API 客户端库（oauth2client 应用程序引擎）。我收到了一个 oauth2 访问令牌，并且这段代码运行良好：

```
@decorator.oauth_aware        
def get(self):

    ....
    ....
    if decorator.has_credentials() :
        body = urllib.urlencode({'access_token': decorator.credentials.access_token})
        http = httplib2.Http()
        resp, content = http.request("https://www.googleapis.com/oauth2/v1/tokeninfo",method="POST", body=body) 
```

但是当我使用装饰器创建一个授权的 http 实例时：

```
@decorator.oauth_aware        
def get(self):

    ....
    ....
    if decorator.has_credentials() :
        http = decorator.http()                              
        resp, content = http.request("https://www.googleapis.com/oauth2/v1/tokeninfo",method="POST") 
```

我收到：

```
'status' : '400'
{
 "error": "invalid_token",
 "error_description": "either access_token or id_token required"
} 
```

**更新-1**

我研究了 oauth2client\client.py ： decorator.http() 不仅对请求进行授权，而且如果 access_token 已过期，还会刷新它。

我非常欢迎关于如何解决这个问题的想法？谢谢你的帮助。

**UPDATE-2 并已解决**

TokeInfo API 不需要任何授权。请求本身必须包含 access_token。授权标头被忽略。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T12:26:57.343

我研究了 oauth2client\client.py ： decorator.http() 不仅对请求进行授权，而且如果 access_token 已过期，还会刷新它。

我非常欢迎关于如何解决这个问题的想法？谢谢你的帮助。

更新并解决

TokeInfo API 不需要任何授权。请求本身必须包含 access_token。授权标头被忽略。

# ios - Cocos2d 2.x：我的游戏层次结构中的循环引用搞砸了，即使我使用的是启用 ARC 的代码

> ID：12915257
> 
> 赞同：1
> 
> 时间：2012-10-16T12:57:38.683
> 
> 标签：ios, cocos2d-iphone, automatic-ref-counting, circular-reference, memory-management

我为此感到羞耻，但是是的。即使**我使用 ARC** ，我也遇到了问题。

**我的主要问题是：我的代码中有循环引用吗？**

**我的代码说明：**

我有一个带有一系列子节点（背景、playerEntity、inputlayer）的游戏场景。问题是**当我触发游戏并替换场景时，场景不会释放**（我在游戏场景中添加了一个 dealloc 方法，即使我使用 ARC 不需要）。

我相信这是因为在子节点中我指的是游戏场景，而在游戏场景中我指的是它们，创建了一个循环引用。

例如，在游戏场景更新方法中，我调用以下内容：

```
-(void) update:(ccTime)delta
{
bool isGamePaused = [GameController sharedGameController].isGamePaused;

if(isGameOverInProgress==true){
    //Do whatever game over animation u like
}
else if(isGamePaused==false)
{
    elapsedTime+=delta;

    //Update input layer
    InputLayerButtons *inputLayer = (InputLayerButtons *) [self getChildByTag:InputLayerTag];
    [inputLayer update:delta];

    //Move background
    ParallaxMultipleBackgroundOneBatchNode* background = (ParallaxMultipleBackgroundOneBatchNode*) [self getChildByTag:BackgroundNodeTag];
    [background update:delta];

    //verify enemies bullet collision
    [self verifyPlayerBulletCollision];
    [levelSprites update:delta];

    //Update bullets position
    [bulletCache updateVisibleBullets:delta]; 
```

我知道这是一种疯狂的方法，但我想避免在子节点中安排更新，以便在 ShooterScene 类中完全控制游戏中发生的事情。我没有对 ShooterScene 类使用半单例模式，而是有一个半单例 GameController 类实例，用于在节点之间传达游戏状态。

但是在某些子节点中，我不得不引用父 ShooterScene，因为例如使用半单例 GameController 类来存储船位置的响应速度太慢（例如，在更新方法中读取位置并相应地更新船证明要慢得多而不是像我在这里那样直接更新它）。因此，我的方法并不是像我希望的那样 100% 干净（我想避免对父类的所有引用，以避免循环引用的问题，并保持对 ShooterScene 类中所有事件的控制）。

因此，例如，这是我从输入层（即**InputLayerButtons**）更新船舶位置的方法：

```
-(void) update:(ccTime)delta
{
    // Moving the ship with the thumbstick.
    ShooterScene * shooterScene = (ShooterScene *) [self parent];
    ShipEntity *ship = [shooterScene playerShip];
    delta = delta * 2.0f;

    CGPoint velocity = ccpMult(joystick.velocity, 200);
    if (velocity.x != 0 && velocity.y != 0)
    {
        ship.position = CGPointMake(ship.position.x + velocity.x * delta, ship.position.y + velocity.y * delta);
    }     
} 
```

**我认为引用父场景是可以的，并且这不会导致循环引用。但它似乎发生了，所以我对此感到困惑。**

这是游戏结束方法的代码，ShooterScene 的 dealloc 方法从未被调用（而是调用 cleanup）：

```
 [[CCDirector sharedDirector] replaceScene:[CCTransitionFade transitionWithDuration:4.0 scene:[MainMenuScene scene] withColor:ccc3(255, 255, 255)]]; 
```

replaceScene 中有什么我不明白的地方吗？我找不到**replaceObjectAtIndex**的代码，所以在这里我只发布了 replaceScene 的 Cocos2d 2.0 代码

```
-(void) replaceScene: (CCScene*) scene
{
    NSAssert( scene != nil, @"Argument must be non-nil");

    NSUInteger index = [scenesStack_ count];

    sendCleanupToScene_ = YES;
    [scenesStack_ replaceObjectAtIndex:index-1 withObject:scene];
    nextScene_ = scene; // nextScene_ is a weak ref
} 
```

**我试图查看是否会在其他场景中调用 dealloc 方法（比 ShooterScene 更简单，并且没有潜在的循环引用）并且它确实有效。所以我非常有信心这是由于循环引用，但我怎样才能检测到导致这种情况发生的代码呢？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T13:16:55.490

[ARC 不会阻止保留循环](https://stackoverflow.com/questions/12802396/retain-cycle-in-arc)。然而，使用归零弱引用会大大降低创建保留周期的机会。

**作为关于 cocos2d 节点层次结构和保留周期的一般经验法则：**

如果您满足以下条件，则您**没有**保留周期：

*   保持对子（或孙）节点的强引用

是的，就 cocos2d 中的保留周期而言，这是唯一安全的规则！这意味着对不是节点的子节点或孙节点的节点的引用永远不应该是强（保留）引用。

**如果**您：

*   保持对父（或祖父）节点的强引用
*   保持对兄弟节点的强引用，并且兄弟节点直接或间接地保持对原始节点的强引用

如果您满足以下条件，您**可能会有**保留周期：

*   保持对不是子（或孙）节点的节点的强引用，具体取决于该节点是否具有对原始节点的强引用或其他因素。

在您的情况下，这意味着通过保持对父级的强引用，您创建了一个保留周期。在 ARC 下，默认情况下每个 ivar 都是强引用。您可以做两件事来解决这个问题和任何其他潜在的保留周期：

*   将属性更改为弱或将 ivar 更改为 __weak（需要 iOS 5.0 作为最低部署目标 - 强烈推荐）
*   在节点的 -(void) 清理方法中将 ivar 设置为 nil

如何创建弱引用：

```
// weak references to parent nodes are safe:
@interface MyClass : CCNode
{
    __weak CCLayer* _gameLayer;
}
@property (nonatomic, weak) CCScene* gameScene;
@end 
```

如何正确清理：

```
-(void) cleanup
{
    _strongRefToNonChildNode = nil;
    [super cleanup];
}

-(void) momCallsShesAlmostHere
{
    [self cleanupApartment];  // just kidding :)
} 
```

在 dealloc 中进行清理，因为人们可能认为合适，但对于解决保留周期来说为时已晚。因为如果您**有**一个保留周期，您显然无法在 dealloc 中解决它，因为保留周期首先会阻止对象释放。

# ajax - Drupal 更好的暴露过滤器 - 中止 Ajax 请求

> ID：12915259
> 
> 赞同：0
> 
> 时间：2012-10-16T12:57:44.133
> 
> 标签：ajax, drupal, drupal-views

我使用 Drupal 7 和 Views 3。我已经安装了 Better Exposed Filters 模块。我公开了一些过滤器并且我使用 ajax，所以当我更改复选框或选择值时，例如会出现 ajax 请求。通常一切正常。

但是有一个我无法处理的问题：/ 基本上，当我更改选择值时，会发送 ajax 请求。在此请求的结果之前，我再次更改选择值，但没有 ajax 请求。我无法发送另一个 ajax 请求或中止现有的请求。

所以我的问题是，如何中止这个 ajax 请求并立即发送下一个请求？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-06-04T22:33:24.240

我有同样的问题，并设法解决它而无需修改任何核心文件。这个想法是监听 jQuery 的全局 ajaxSend() 事件，存储当前请求的 jqXHR 对象，然后在过滤器的单击处理程序中，检查请求是否已经完成，如果没有完成则中止。所以代码看起来像：

```
var filterXHR = null;
$(document).ajaxSend(function (event, jqXHR, settings) {
  filterXHR = jqXHR; // cache XHR object for current ajax request
});

// event handler for when a filter is selected/changed/etc.
$('#filters-block .form-item a').click(function () {

  // check if there is a previous request that has not yet completed
  if (filterXHR && filterXHR.readyState != 4) {
    // abort ajax request
    filterXHR.abort();

    // subsequent requests will add their own progress indicator,
    // so you probably want to remove the old one here 
    $('.ajax-progress').remove(); 
  }

  // submit exposed form, do other stuff, etc.. 
}); 
```

[我知道恢复旧帖子的互联网礼仪通常很糟糕，但由于这是我在寻找信息时在谷歌上出现的第一个（也是唯一一个）有意义的结果，我认为在这里分享我的解决方案是合适的其他可能有类似问题并最终登陆此页面的人的利益。]

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T09:55:49.283

事实上我已经做到了:)

我覆盖了 Drupal 文件夹中 ajax.js 中的一些原型。

*   更改条件：`if (ajax.ajaxing){ ... }`
*   关闭禁用提交元素
*   `current_ajax`为当前的 ajax 请求添加变量，这样我就可以做到`current_ajax.abort();`

# css - 格式化 CSS 内容图像

> ID：12915260
> 
> 赞同：1
> 
> 时间：2012-10-16T12:57:45.657
> 
> 标签：css

我想将通过 CSS`content`属性添加的图像垂直居中。[小提琴](http://jsfiddle.net/F37pV/13/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T13:01:26.607

为什么不把它作为背景图片呢？查看下面的示例代码，定位是由最后两部分处理的。

```
#bar {
  background: url(http://goo.gl/XWguD) no-repeat right 50%;
  padding: 3px 40px 3px 0;         
} 
```

:after 不支持 < IE7（[请参阅此处](http://caniuse.com/#search=%3aafter)），因为到处都支持背景图像。

[http://jsfiddle.net/spacebeers/F37pV/20/](http://jsfiddle.net/spacebeers/F37pV/20/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T13:01:10.957

为什么要通过内容添加元素？为什么不使用`background-image`？

# jqgrid - 在 jqGrid 中创建复选框

> ID：12915263
> 
> 赞同：6
> 
> 时间：2012-10-16T12:58:09.080
> 
> 标签：jqgrid

我正在尝试在 jqgrid 列中创建复选框并使用以下代码

```
{ 
   name: 'CanDo', width: 50, index: 'CanDo', 
   edittype: 'checkbox', editoptions: { value: "True:False" }, 
   formatter: "checkbox", formatoptions: { disabled: true} 
} 
```

Json 对象返回“True”或“False”

但是复选框本身不是在网格中创建的。会是什么问题？

请帮忙。

编辑：使用 jquery.jqGrid.BasicOnly.min.js 4.1.2

```
$("#pGrid").jqGrid({
            datastr: '@Html.Raw(@Model.PList)',
            datatype: 'jsonstring',
            colNames: ['id','CanDo' ,'Name'],
                colModel: [
                        { name: 'id', hidden: true },
                        { name: 'CanDo', width: 50, index: 'CanDo',editable: true,  edittype: 'checkbox', editoptions: { value: "True:False" }, formatter: "checkbox", formatoptions: { disabled: true},
                        { name: 'Name', width: 150 }                        
                      ],
            pager: '#pager',
            rowNum: 100,
            height: "200",
            viewrecords: true,
            caption: '<span class="spanH2">Test Process</span>'
        }); 
```

**JSON**

```
{"total":1,"page":1,"records":2,
 "rows": [
   {"id":"1","cell":["1","True","Callback"]},
   {"id":"8","cell":["8","False","Complaint"]}]} 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-16T13:43:33.963

我相信你错过了这个`editable:true`选项。试试这个：

```
{ 
 name: 'CanDo', width: 50, index: 'CanDo', 
 editable: true,
 edittype: 'checkbox', editoptions: { value: "True:False" }, 
 formatter: "checkbox", formatoptions: { disabled: true} 
} 
```

# php - 使用 Symfony2 作为跨多个站点的共享库

> ID：12915265
> 
> 赞同：0
> 
> 时间：2012-10-16T12:58:17.983
> 
> 标签：php, symfony, shared-libraries

我是 Symfony2 的新手，但我想将它用作我开发的新网站的首选框架。我想要它，这样我就可以跨多个站点使用该框架，而不必将它单独包含在每个项目中。这似乎令人惊讶地难以实现，或者更确切地说，似乎没有任何标准的方法可以记录下来。

所以：

1.  我可以简单地将我的所有项目链接到框架和公共包存储在文件系统上的单个中心点吗？这似乎不适合目录结构？
2.  我可以使用控制台从此时生成基本应用程序吗？

最终它只是符号链接供应商目录或类似目录的情况吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T13:07:27.207

如果您有多个应用程序，您可以将供应商分开。Vendors 文件夹包含所有 Symfony 相关代码。

[如何更改 Symfony2 默认结构？](https://stackoverflow.com/questions/8280169/how-to-change-symfony2-default-structure)

[是否可以共享 Symfony2 安装（一台服务器上的多个网站 [域]）](https://stackoverflow.com/questions/6883628/is-it-possible-to-share-an-symfony2-installation-multiple-websites-domains-on)

# jquery - jquery选择器循环与每个使用函数

> ID：12915266
> 
> 赞同：8
> 
> 时间：2012-10-16T12:58:17.913
> 
> 标签：jquery

1.  这两个代码片段做相同的事情吗？如果是，什么时候应该使用一个而不是另一个？（除了当你需要做一些涉及`i`或的事情时`value`）

    ```
    $("foo").each(function(i,value) {
        $(this).empty();
    }); 
    ```

    对比

    ```
    $("foo").empty(); 
    ```

2.  通常可以假设这`$("foo").someMethod()`意味着“在与选择器匹配的每个元素上运行`somemethod()`，*除非*方法的名称是`each`？（即每个都是特殊情况）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-16T13:02:24.963

假设您指的是股票 jQuery 函数，是的，这两个代码片段是相同的。

`each()`当您想要使用索引或防止长函数链接时，您应该使用该函数。

`$('foo').someMethod()`您对jQuery 方法的理解是正确的。但请注意，某些插件可能会以不同的方式处理选择器，或者仅影响例如第一个匹配的元素。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-16T13:08:01.683

是的，大多数 jQuery 函数都是这样设计的。

看代码示例：

```
$.fn.someMethod = function() {
   return this.each(function() {
      do_something(this); 
   });
}; 
```

所以即使你可以`.each`再次使用，你也应该使用：

`$(selector).someMethod();`

不是

```
$(selector).each(function() {
  $(this).someMethod();
}); 
```

# c++ - 提升序列化 std::unique_ptr 支持

> ID：12915267
> 
> 赞同：9
> 
> 时间：2012-10-16T12:58:22.993
> 
> 标签：c++, boost, c++11, boost-serialization

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2016-02-25T18:03:27.870

我不确定如何解释[这个列表](http://www.boost.org/doc/libs/1_60_0/libs/serialization/doc/index.html)，但似乎在 1.48 之后的某个时候添加了对此的支持。我使用的是 1.58，它已包含在内。只是

```
#include <boost/serialization/unique_ptr.hpp> 
```

然后它将按如下方式工作：

```
#include <memory>

#include <boost/archive/text_oarchive.hpp>
#include <boost/archive/text_iarchive.hpp>
#include <boost/serialization/unique_ptr.hpp>

#include <fstream>

class Point
{
public:
    Point() { }

    float x = 1.;
    float y = 2.;
    float z = 3.;

private:
    friend class boost::serialization::access;

    template<class TArchive>
    void serialize(TArchive & archive, const unsigned int version)
    {
        archive & x;
        archive & y;
        archive & z;
    }
};

void ValidUniquePointer()
{
    std::unique_ptr<Point> p(new Point());

    std::ofstream outputStream("test.txt");
    boost::archive::text_oarchive outputArchive(outputStream);
    outputArchive << p;
    outputStream.close();

    // read from a text archive
    std::unique_ptr<Point> pointRead;
    std::ifstream inputStream("test.txt");
    boost::archive::text_iarchive inputArchive(inputStream);
    inputArchive >> pointRead;

    std::cout << pointRead->x << " " << pointRead->y << " " << pointRead->z << std::endl;

}

void NullUniquePointer()
{
    std::unique_ptr<Point> p;

    std::ofstream outputStream("test.txt");
    boost::archive::text_oarchive outputArchive(outputStream);
    outputArchive << p;
    outputStream.close();

    // read from a text archive
    std::unique_ptr<Point> pointRead;
    std::ifstream inputStream("test.txt");
    boost::archive::text_iarchive inputArchive(inputStream);
    inputArchive >> pointRead;

    if(pointRead != nullptr) {
        std::cout << pointRead->x << " " << pointRead->y << " " << pointRead->z << std::endl;
    }
    else {
        std::cout << "Pointer is null!" << std::endl;
    }

}

int main()
{
    ValidUniquePointer();
    NullUniquePointer();
    return 0;
} 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-10-16T22:18:18.390

正如[pmr](https://stackoverflow.com/users/105672/pmr)所提到的，我设法提出了以下解决方案，乍一看，一切正常。希望有人能发现它有用：

```
#include <iostream>
#include <memory>
#include <fstream>
#include <boost/archive/text_oarchive.hpp>
#include <boost/archive/text_iarchive.hpp>
namespace boost { 
namespace serialization {

template<class Archive, class T>
inline void save(
    Archive & ar,
    const std::unique_ptr< T > &t,
    const unsigned int /*file_version*/
){
    // only the raw pointer has to be saved
    const T * const base_pointer = t.get();
    ar & BOOST_SERIALIZATION_NVP(base_pointer);
}
template<class Archive, class T>
inline void load(
    Archive & ar,
    std::unique_ptr< T > &t,
    const unsigned int /*file_version*/
){
    T *base_pointer;
    ar & BOOST_SERIALIZATION_NVP(base_pointer);
    t.reset(base_pointer);
}
template<class Archive, class T>
inline void serialize(
    Archive & ar,
    std::unique_ptr< T > &t,
    const unsigned int file_version
){
    boost::serialization::split_free(ar, t, file_version);
}
} // namespace serialization
} // namespace boost

class MyDegrees
{
public:
  void setDeg(int d){deg = d;}
  int getDeg()const {return deg;}
private:
  friend class boost::serialization::access;
    template<class Archive>
    void serialize(Archive & ar, const unsigned int version)
    { ar & deg; }
  int deg;
};
class gps_position
{
private:
    friend class boost::serialization::access;
    template<class Archive>
    void serialize(Archive & ar, const unsigned int version)
    { ar & degrees;  }
    std::unique_ptr<MyDegrees> degrees;
public:
    gps_position(): degrees(std::unique_ptr<MyDegrees>(new MyDegrees)){};
    void setDeg(int d){degrees->setDeg(d);}
    int getDeg() const {return degrees->getDeg();}
};
int main()
{
    std::ofstream ofs("filename");
    gps_position g;
    g.setDeg(45);
    std::cout<<g.getDeg()<<std::endl;
    { boost::archive::text_oarchive oa(ofs); oa << g; }
    gps_position newg;
    {
        std::ifstream ifs("filename");
        boost::archive::text_iarchive ia(ifs);
        ia >> newg;
        std::cout<<newg.getDeg()<<std::endl;
    }
  return 0;
} 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2015-11-24T22:53:46.007

最新版本的 boost 序列化提供对所有 std 智能指针类型的支持。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2019-09-22T03:20:56.017

Boost 现在支持智能指针，您可以为 Unique_Ptr #include 头文件。

```
 #include <boost/serialization/unique_ptr.hpp> 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-16T16:28:57.840

不，没有开箱即用的适应。您需要自己提供一个非侵入式适配器。请参阅[此处的教程](http://www.boost.org/libs/serialization/)以了解如何执行此操作。

# richfaces - 使用 JS 更改丰富的：modalpanel 宽度/高度？

> ID：12915272
> 
> 赞同：0
> 
> 时间：2012-10-16T12:58:37.783
> 
> 标签：richfaces, jboss-4.2.x, richfaces-modal

有可能吗？如果是这样，有没有人有任何例子？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-14T22:31:07.173

Richfaces 4.3.x 中有用于调整弹出面板大小的[Javascript API 。](http://docs.jboss.org/richfaces/latest_4_3_X/Component_Reference/en-US/html/chap-Component_Reference-Panels.html#sect-Component_Reference-richpopupPanel-JavaScript_API)

```
function changePanelSize() {
    var modalPanel = #{rich:component('PanelName')};
    modalPanel.setLeft(200);
    modalPanel.setTop(200);
    modalPanel.resize(500,800);
}; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-09-04T19:28:39.460

在richfaces 3.3.1.SP3 中有点无聊，但我找到了解决方案：

最大化丰富：modalPanel：

```
var PAD = 30; //const
var idModalPanel = "#{idModalPanel}";
var modal = return #{rich:component(idModalPanel)};
modal.setLeft(PAD);
modal.setTop(PAD);
var width = Richfaces.getWindowSize().width - (2 * PAD);
var height = Richfaces.getWindowSize().height - (2 * PAD);
modal.getContentElement().style.width = width + "px";
modal.getContentElement().style.height = height + "px";
//Update the modal points. That's the trick!
var borders = modal.borders;
for (var i = 0; i < borders.length; i++) {
    b = borders[i];
    b.startDrag(b.sizer);
    b.doDrag(b.id);
    b.endDrag();
}
modal.doResizeOrMove(ModalPanel.Sizer.Diff.EMPTY); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-17T10:37:26.440

我不认为richfaces为此提供了js API。如果您查看页面源代码，您会注意到模态面板包含许多嵌套的 div，并且它们以像素为单位设置大小（无论模态是否具有 autosized=true 或否）。可能你可以调整这些 div 的大小，但是，当然，这是一个不好的方法。（我使用的是richfaces 3.3.3）

# eclipse - 在 Eclipse Juno 中安装 Google Drive API

> ID：12915276
> 
> 赞同：2
> 
> 时间：2012-10-16T12:58:48.823
> 
> 标签：eclipse

我在尝试安装与 Eclipse 中的 Google Drive 交互所需的 api 时遇到问题。我已经下载了 zip 文件

google-api-java-client-1.11.0-beta.zip

来自谷歌网站，但它几乎没有关于下载后如何处理它的说明。我浏览了自述文件，但它并没有帮助我完成任何事情。

我还安装了谷歌插件，但这似乎没有帮助，因为我在尝试使用谷歌提供的示例代码时仍然收到错误。

我收到的错误与这些导入语句有关：

```
import com.google.api.client.http.FileContent;
import com.google.api.services.drive.Drive;
import com.google.api.services.drive.model.File; 
```

错误是无法解决导入问题。

任何放置/安装下载的 API 或如何解决导入问题的说明将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T12:21:25.033

要处理与 Drive 相关的导入，您需要一些来自 Google Drive SDK 的 jar。有一些大的，因此您可能需要单独添加它们以适合您的应用程序。

如果这不能解决 com.google.android.gms.* 导入，则需要安装 Google Play 服务插件（从 SDK 管理器中的 Extras -> Google Play 服务）和 google-play-services.jar需要添加到您的构建路径中。

在这种情况下，需要以下罐子：

1.  google-api-services-drive-v2-rev1-1.7.2-beta.jar
2.  google-http-client-1.10.3-beta.jar
3.  google-http-client-android2-1.10.3-beta.jar
4.  google-oauth-client-1.10.1-beta.jar
5.  google-api-client-android2-1.10.3-beta.jar
6.  google-api-client-1.10.3-beta.jar

[从这里](https://code.google.com/p/google-api-java-client/wiki/APIs)下载上面的 jar，除了 google-api-services-drive-v2-rev1-1.7.2-beta.jar

要使用 google-api-services-drive-v2-rev1-1.7.2-beta.jar 首先您需要安装 Google play 服务

[在您的活动中使用此导入](https://developers.google.com/drive/quickstart-android#step_1_generate_the_signing_certificate_fingerprint_sha1)

# c# - MVC 中的 async/await 怎么样？

> ID：12915283
> 
> 赞同：1
> 
> 时间：2012-10-16T12:59:15.443
> 
> 标签：c#, asp.net-mvc, asynchronous

我们团队的其他成员和我创建了一个 Silverlight 应用程序。我们一直在使用 .NET 4.0。尽管我们已经将 async/await 模式放入了我们的应用程序（`Microsoft.CompilerServices.AsyncTargetingPack.Net4`）。

既然 MS 不会在 Silverlight 上投入太多额外的精力，我们只是想，我们构建了一个小的 HTML5/JS 应用程序——只是为了试验问题。

所以...我尝试引导应用程序，就像我们在之前的 SL 应用程序中所做的那样。我正在使用在我们的主应用程序中使用的类库来提供所有数据。为了填充上下文中的所有字典，我们调用一些异步方法来从数据库中检索数据。我也想在 MVC 应用程序中使用这个库，但是我不能调用那些异步方法，因为`Application_Start`在 Global.asax 中不是异步的。

如何做到这一点？

交替库不是一个可行的解决方案，因为它用于生产代码。编写一个新的库也不是一个解决方案，因为我们真的希望尽可能少地维护。

有什么建议么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-16T18:50:26.417

我建议您在 中*启动*异步加载`Application_Start`，然后`await`在您的 MVC 操作中完成它。

您可以通过将 保存`Task<Dictionary<..>>`到静态变量然后对其进行每个异步操作来轻松完成此操作`await`。

```
// Or in a repository or whatever...
public static class SharedData
{
  public static Task<Dictionary<int, string>> MyDictionary;
}

...

Application_Start(..)
{
  // Start the dictionary filling, but don't wait for it to complete.
  // Note that we're saving the Task, not await'ing it.
  MyDictionary = MyLibrary.GetDictionary();
} 
```

然后在每个需要它的[异步操作中：](http://www.asp.net/mvc/tutorials/mvc-4/using-asynchronous-methods-in-aspnet-mvc-4)

```
public async Task<ActionResult> Get()
{
  // Asynchronously wait for the dictionary to load if it hasn't already.
  var dict = await SharedData.MyDictionary;
  ...
  return View();
} 
```

* * *

或者，您可以为此使用异步延迟初始化。[异步延迟初始化由 Stephen Toub](http://blogs.msdn.com/b/pfxteam/archive/2011/01/15/10116210.aspx)首次公开；[我在我的博客上](http://nitoprograms.blogspot.com/2012/08/asynchronous-lazy-initialization.html)记录了代码并将其升级到 .NET 4.5 ，并且最近将它添加到了我的[AsyncEx 库](http://nitoasyncex.codeplex.com/)中。

使用`AsyncLazy<T>`，您的代码将如下所示：

```
// Or in a repository or whatever...
public static class SharedData
{
  public static AsyncLazy<Dictionary<int, string>> MyDictionary =
      new AsyncLazy<Dictionary<int, string>>(async () =>
      {
        var ret = new Dictionary<int, string>();
        await MyLibrary.FillDictionary(ret);
        return ret;
      });
} 
```

然后在每个需要它的[异步操作中：](http://www.asp.net/mvc/tutorials/mvc-4/using-asynchronous-methods-in-aspnet-mvc-4)

```
public async Task<ActionResult> Get()
{
  // Asynchronously wait for the dictionary to load if it hasn't already.
  var dict = await SharedData.MyDictionary;
  ...
  return View();
} 
```

异步延迟初始化具有延迟的能力*，*因此需要特定字典的第一个操作将`await`它。如果有未使用的字典，则永远不会加载它们。

# android - 在我自己的 Android 应用程序中集成 Google 身份验证

> ID：12915291
> 
> 赞同：3
> 
> 时间：2012-10-16T12:59:47.840
> 
> 标签：android, oauth

我有一个安卓应用程序。我需要在我的 android 应用程序中使用 Google (gmail) 帐户登录。

我跟着[这个教程](http://blog.doityourselfandroid.com/2010/11/10/oauth-flow-in-android-app/)。但是当运行我的应用程序时，我得到了这个错误：

```
OAuthRequestTokenTask(1100): oauth.signpost.exception.OAuthCommunicationException: Communication with the service provider failed: Service provider responded in error: 400 (Bad Request) exceptions. 
```

我怎么解决这个问题？

# c++ - 顶点着色器中的矩阵乘法

> ID：12915297
> 
> 赞同：0
> 
> 时间：2012-10-16T13:00:12.527
> 
> 标签：c++, directx, shader, directx-11

当我在 CPU 上乘以矩阵时

```
D3DXMATRIX mb = mbb.matWorld * mbb.matView * mbb.matProj;

D3D11_BUFFER_DESC bd;
ZeroMemory(&bd, sizeof(bd));
bd.Usage = D3D11_USAGE_DEFAULT;
bd.ByteWidth = sizeof(D3DXMATRIX);
bd.BindFlags = D3D11_BIND_CONSTANT_BUFFER;
bd.CPUAccessFlags = 0;

D3D11_SUBRESOURCE_DATA initData;
ZeroMemory(&initData, sizeof(initData));
initData.pSysMem = &mb;
//*****************************************

cbuffer ConstantBuffer : register(cb0)
{
    matrix mat;

float4 vs(float4 pos : POSITION) : SV_POSITION
{
    float4 ret = mul(pos, mat);
        return ret;
} 
```

它工作得很好。但是当我在 GPU 上做的时候

```
struct Buffer
{
    D3DXMATRIX mat[3];
};

Buffer b;
// b[..] = ....

D3D11_BUFFER_DESC bd;
ZeroMemory(&bd, sizeof(bd));
bd.Usage = D3D11_USAGE_DEFAULT;
bd.ByteWidth = sizeof(D3DXMATRIX) * 3;
bd.BindFlags = D3D11_BIND_CONSTANT_BUFFER;
bd.CPUAccessFlags = 0;

D3D11_SUBRESOURCE_DATA initData;
ZeroMemory(&initData, sizeof(initData));
initData.pSysMem = &b;
//*****************************************

cbuffer ConstantBuffer : register(cb0)
{
    matrix matWorld;
    matrix matView;
    matrix matProj;
}

float4 vs(float4 pos : POSITION)
{
    float4 ret = mul(pos, matWorld);
    ret = mul(ret, matView);
    ret = mul(ret, matProj);

    return ret;
} 
```

屏幕上没有呈现任何内容。怎么了？

我一直在使用 PIX 进行调试，它表明在两个版本中 post-vs 顶点是相同的。

我注意到这是由投影矩阵引起的。对于我的投影矩阵，我这样做：

```
D3DXMatrixPerspectiveFovLH(&mbb.matProj, D3DX_PI / 2, (float) init_params.width / init_params.height, 0.01f, 100.0f) 
```

固定的

我必须先转置矩阵，然后再将它们传递给顶点着色器。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-10T15:24:02.493

此外，您始终可以在 mul(); 中切换参数顺序；

mul（矩阵，向量）；

这样，由于 mul() 将“矩阵”解释为行主要，乘法将正确完成。

# postgresql - 使用 Windows 批处理文件我执行了一个 postgres 选择查询，我只需要数据（仅值）作为输出？

> ID：12915298
> 
> 赞同：1
> 
> 时间：2012-10-16T13:00:17.597
> 
> 标签：postgresql, batch-file

对于我的选择查询：

```
SELECT pg_size_pretty(pg_total_relation_size('tablename')) 
```

它返回如下结果。

```
pg_size_pretty
 -----------
    24 kB
   (1 row) 
```

我只需要 24 kB 作为输出。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T13:33:57.423

使用`--tuples-only`标志`psql`：

```
psql databasename --tuples-only -c "SELECT pg_size_pretty(pg_total_relation_size('tablename'));" 
```

# powershell - SQL Server 2012 SQLPs 模块 - 自动更改当前位置？

> ID：12915299
> 
> 赞同：15
> 
> 时间：2012-10-16T13:00:23.013
> 
> 标签：powershell, sql-server-2012

我有一个大型的现有 powershell 脚本库，主要用于运行 SQL Server 和文件系统之间的一些复杂逻辑和交互。

SQL 交互通常通过 cmdlet 执行`Invoke-SQLCmd`。

最近，我所有服务器上的 SSMS 版本都升级到了 2012。这意味着我必须对我的代码进行一些更改以删除对`sqlserverprovidersnapin100`和的引用，`sqlservercmdletsnapin100`因为这些在 2012 年被弃用以支持导入`SQLPs`模块。

这工作正常，但似乎`SQLPs`模块在某些时候将当前位置更改为`PS SQLSERVER>`而不是`<local folder>`，这使得我的许多其他命令都失败了。例如，如果我`Test-Path`在网络驱动器上运行 a ，它在该位置上运行良好，`<local folder>`但在该位置上会失败`SQLSERVER`。

**这是一个已知的问题？我可以为此更改解决方法或设置吗？**

我担心的主要脚本超过 1000 行，并且在我们进行此更改之前已经运行了两年多没有问题，所以如果可以的话，我想避免对其进行逐行测试。

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-01-08T00:55:59.563

关于为什么在 sql 2012 中它正在更改为 SQLSERVER: 目录的更多信息...

当 powershell 导入 sqlps 模块时，manifest 定义了一个名为 SqlPsPostScript.ps1 的 post 脚本文件。此文件（第一行）将当前位置更改为 SQLSERVER：提供程序

在 x64 位盒上，模块位于 - C:\Program Files (x86)\Microsoft SQL Server\110\Tools\PowerShell\Modules\SQLPS。

在 powershell 3.0 中，自动导入可能很难判断何时会发生（根据我的经验）。

目前尚不清楚为什么（从逻辑的角度来看）它应该这样做。我们不想接触 SQL 服务器模块，所以我猜你需要在导入模块后做一个明确的设置位置。您也可以将其视为一种不那么 hacky 的解决方案。

```
Push-Location
Import-Module sqlps
Pop-Location 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-10-16T14:30:27.340

我已经通过添加 a`cd <local folder>`作为脚本的第一行来突破提供程序解决了这个问题。不过感觉很hackish。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-12-16T10:46:14.043

我通过使用我试图复制的文件的 PSPath 属性（其中包含 Microsoft.PowerShell.Core\FileSystem::) 而不是默认属性解决了类似的问题。希望能帮助到你 ！

# multithreading - Restlet 客户端处理 Web 服务正在关闭

> ID：12915300
> 
> 赞同：2
> 
> 时间：2012-10-16T13:00:26.433
> 
> 标签：multithreading, web-services, restlet

我是 Restlet 的新手，我有一个客户端，它调用 Web 服务，并且 Web 服务用于从文件中获取文件名和数据的列表。如果在客户端运行时 Web 服务出现故障，而我再次启动 Web 服务，则客户端将不再继续工作。有人可以向我解释为什么客户端不再调用 Web 服务吗？

只有当我终止进程并重新启动它时，客户端才会再次工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T10:45:38.307

解决了这个问题，因为我没有在每次 Web 服务请求后启动和停止客户端。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T15:06:53.663

您的问题可能与此问题有关：[https ://github.com/restlet/restlet-framework-java/issues/669#issuecomment-9455618](https://github.com/restlet/restlet-framework-java/issues/669#issuecomment-9455618)

# java - JSF & jqPlot 未捕获的类型错误

> ID：12915301
> 
> 赞同：1
> 
> 时间：2012-10-16T13:00:28.187
> 
> 标签：java, javascript, jsf, charts, jqplot

我在使用带有 JSF 的 jqPlot 时遇到问题

我将此代码添加到我的 JSF 页面：

```
$(document).ready(function () {
  var s1 = [200, 600, 700, 1000];
  var s2 = [460, - 210, 690, 820];
  var s3 = [-260, - 440, 320, 200];
  var ticks = ['May', 'June', 'July', 'August'];
  var plot1 = $.jqplot('chart1', [s1, s2, s3], {
    // The "seriesDefaults" option is an options object that will
    // be applied to all series in the chart.
    seriesDefaults: {
      renderer: $.jqplot.BarRenderer,
      rendererOptions: {
        fillToZero: true
      }
    },
    series: [{
      label: 'Hotel'
    }, {
      label: 'Event Regristration'
    }, {
      label: 'Airfare'
    }],
    legend: {
      show: true,
      placement: 'outsideGrid'
    },
    axes: {
      xaxis: {
        renderer: $.jqplot.CategoryAxisRenderer,
        ticks: ticks
      },
      yaxis: {
        pad: 1.05,
        tickOptions: {
          formatString: '$%d'
        }
      }
    }
  });
}); 
```

但是当我尝试加载页面时出现此错误：

```
Uncaught TypeError: Cannot read property 'BarRenderer' of undefined
(anonymous function)portfolioModeling.xhtml:184
f.extend._Deferred.e.resolveWithjquery.min.js:2
e.extend.readyjquery.min.js:2
c.addEventListener.C 
```

我添加了整个所需的 js 文件和 css 文件，但我迷路了，不知道问题出在哪里

提前致谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-17T10:59:07.947

如果您使用的 JSF 组件库本身**已经**随 jQuery 一起提供，例如 PrimeFaces、RichFaces、ICEfaces 等，就会发生这种情况。

然后，您不应该包含另一个版本的 jQuery，这只会导致所有颜色的 JavaScript 错误。

如果您有一个 jQuery 插件和一个依赖于它的脚本，那么您应该将其添加为`<h:outputScript target="head">`内部`<h:body>`而不是`<h:head>`. 这样就可以保证在JSF组件库绑定jQuery*之后加载。*

```
<h:head>
    ...
</h:head>
<h:body>
    <h:outputScript name="js/jquery.jqplot.js" target="head" />
    <h:outputScript name="js/onload.js" target="head" />
    ...
</h:body> 
```

然而，捆绑 jQuery 的 JSF 组件库可能*仅*在视图包含明确需要 jQuery 的组件时自动包含。如果视图不包含它，那么 jQuery 可能不会被自动包含，您的插件和脚本就会中断。如果您需要在*每个*视图中强制包含 jQuery，那么您需要`<h:outputScript>`在`<h:head>`.

目前尚不清楚您使用的是哪个组件库，但对于 PrimeFaces，它是

```
<h:head>
    ...
    <h:outputScript library="primefaces" name="jquery/jquery.js" />
    <h:outputScript name="js/jquery.jqplot.js" />
    <h:outputScript name="js/onload.js" />
</h:head>
<h:body>
    ...
</h:body> 
```

*（然而，手动摆弄 jqPlot 会很奇怪，因为 PrimeFaces 已经提供了几个使用 jqPlot 的 JSF 组件）*

在 RichFaces 4.x 的情况下，它是

```
<h:head>
    ...
    <h:outputScript name="jquery.js" />
    <h:outputScript name="js/jquery.jqplot.js" />
    <h:outputScript name="js/onload.js" />
</h:head>
<h:body>
    ...
</h:body> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-26T13:52:28.257

当我通过包含一些未包含在我所遵循的教程中的基本脚本引用来解决相同的错误时，只是在这里发帖。

HTML 中标题部分缺少的行是（请注意，库位置 './lib...' 将根据本地安装路径而有所不同）：

```
<script language="javascript" type="text/javascript" src="./lib/dist/jquery.jqplot.min.js"></script>
<link rel="stylesheet" type="text/css" href="./lib/dist/jquery.jqplot.css"> 
```

希望这可以帮助某人，

詹姆士

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-17T10:03:22.867

我解决了问题

问题是我在头部包含了样式表和 js 文件，这给 jsf mvc 项目造成了一个大问题

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2014-03-20T08:43:51.167

来自 JQuery 文件的问题，你需要调用 jquery.js

# lines-of-code - 使用 sloccount 时如何忽略生成的文件

> ID：12915303
> 
> 赞同：1
> 
> 时间：2012-10-16T13:00:32.617
> 
> 标签：lines-of-code

如何忽略使用 sloccount 时创建的 sloccount.sc 和 xml 文件我使用以下命令：

```
sloccount --duplicates --wide --details . | | sed "/\/\.svn\//d" | tee sloccount.sc 
```

我正在使用 sloccount 2.26 版

但我也是与 sloccount 结果在同一个文件夹中的单元测试结果，因此 sloccount 会选择 XML 文件

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-08T13:54:48.973

我正在使用以下行来忽略 sloccount.sc：

`sloccount --duplicates --wide --details . | grep -v sloccount.sc | tee sloccount.sc`

您可以`| grep -v .xml`在其中添加一个以忽略 xml 文件，或者使用 egrep 查找`.xml$`您是否担心名称中间可能包含 .xml 的文件

# image - php file_get_contents 函数将无效图像文件保存在我的新网络服务器中

> ID：12915306
> 
> 赞同：2
> 
> 时间：2012-10-16T13:00:39.587
> 
> 标签：image, webserver, file-get-contents, corrupt

我开发了一个 wordpress 插件，用于`file_get_contents()`从远程 url 检索图像并使用 fwrite 函数将其保存在本地文件夹中。图像文件保存在本地文件夹中，以便以后引用。

这在一个网络服务器 1 中运行良好。但是当我在另一个新的网络服务器 2 中维护的 wordpress 中安装插件时，该文件在本地文件夹中创建，但似乎已损坏。我猜该文件是为小于 100kb 的图像正确创建的，但是在以前的网络服务器 1 中正确创建的较大文件在服务器 2 中检索和创建时会损坏。

下面是我用来检索图像并保存到本地文件夹的代码：

```
//$imgurl = url of the image file and $upload_path 
// is path where image will be stored

$file = file_get_contents($imgurl) or die('File too large or inacessible');
$myFile = $upload_path . "\internal\folder\structure\\" . $file_name;
$fh = fopen($myFile, 'w') or die("Error");
$fwrite = fwrite($fh, $file);

if($fwrite === false)
{
    echo "error";
}
else
{
    echo "file has been created ".$file_name;
}

fclose($fh); 
```

在服务器 1 中这工作正常，但在服务器 2 中，文件被创建但无法打开它，因为它已损坏。我想这可能与服务器 2 的 php 配置有关，但我不太确定，所以我期待您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T13:05:50.243

可能有几个原因

1.  由 server2 上的某些东西生成的 PHP 错误

2.  函数之前的一些输出，如换行符或空格

阅读[http://php.net/manual/en/function.file-get-contents.php](http://php.net/manual/en/function.file-get-contents.php)以获得提示

# c# - 如何检查参数是否与 C# 枚举中的值匹配？

> ID：12915307
> 
> 赞同：1
> 
> 时间：2012-10-16T13:00:42.853
> 
> 标签：c#

我有这个枚举：

```
public enum ContentKey {
    Menu = 0,
    Article = 1,
    FavoritesList = 2
}; 
```

这个动作方法：

```
public ActionResult Edit(string pk, string rk, int row = 0) {
    try {
        var content = _contentService.Get(pk, rk); 
```

以下类`Content`基于`TableServiceEntity`. 请注意，这`TableServiceEntity`对我的所有数据类都是通用的。

```
public class Content : TableServiceEntity 
{

public abstract class TableServiceEntity
{
    protected TableServiceEntity();
    protected TableServiceEntity(string partitionKey, string rowKey);
    public virtual string PartitionKey { get; set; } 
```

有没有办法可以检查`pk`匹配枚举值之一的值？我不确定如何检查这一点。我假设我需要在`Content`类中进行检查，但我不确定如何覆盖`virtual string`并在没有匹配项时抛出异常。

**更新**：如果可能的话，我想在 Content 类 get set 中执行此操作，但我不确定如何将 get set 添加到此类。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-16T13:02:57.167

您可以使用[`Enum.IsDefined`](http://msdn.microsoft.com/en-us/library/system.enum.isdefined.aspx)来查看 a 是否`string`与 Enum 值匹配：

```
public enum ContentKey
{
    Menu = 0,
    Article = 1,
    FavoritesList = 2
}

static bool Check(string pk)
{
    return Enum.IsDefined(typeof(ContentKey), pk);
}

static void Main(string[] args)
{
    Console.WriteLine(Check("Menu"));
    Console.WriteLine(Check("Foo"));
} 
```

您还可以定义一个不设置支持字段的设置器，除非将新`value`定义的枚举定义为：

```
class Foo
{
    private string pk;

    public string PK
    {
        get
        {
            return this.pk;
        }
        set
        {
            if(Enum.IsDefined(typeof(ContentKey), value))
            {
                this.pk = value;
            }
            else
            {
                throw new ArgumentOutOfRangeException();
            }
        }
    }
} 
```

这是您自己定义支持字段的非自动属性。新值可通过`value`关键字访问。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T13:05:45.817

您可以使用[Enum.Parse()](http://msdn.microsoft.com/en-us/library/essfb559.aspx)：

```
ContentKey key = (ContentKey) Enum.Parse(typeof(ContentKey), pk); 
```

如果不匹配[定义](http://msdn.microsoft.com/en-us/library/system.argumentexception.aspx)在.`pk``ContentKey`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-16T13:08:44.313

试试这个。

```
if(Enum.IsDefined(typeof(ContentKey),pk))
{
   //Do your work;
} 
```

# objective-c - 将子视图添加到 UITabBarController

> ID：12915313
> 
> 赞同：0
> 
> 时间：2012-10-16T13:01:11.840
> 
> 标签：objective-c, ios, cocoa-touch

我有 a`UITabController`和 3 `UIViewController`s，每个 3 个选项卡一个。

在其中一个选项卡中，我想添加一个子视图（实际上我想用另一个视图替换选项卡的内容。

这就是我正在做的事情：

```
QuestionClass *oView = [[QuestionClass alloc] initWithNibName:@"QuestionClass" bundle:[NSBundle mainBundle]];
    [self presentModalViewController:oView animated:NO]; 
```

它可以工作，但是标签栏被隐藏了，你知道你要显示它吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T13:07:27.123

的文档`presentModalViewController:`说：

*在 iPhone 和 iPod touch 设备上，modalViewController 的视图总是全屏显示。在 iPad 上，演示文稿取决于 modalPresentationStyle 属性中的值。*

如果您在 iPhone (iPod) 上并且希望您的控制器保持在选项卡控制器的视图空间内，您应该考虑让导航控制器推动它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T13:10:47.470

您不能使用呈现视图控制器来使用 TabBar。TabBar 用于切换视图。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-16T13:23:33.740

一种可能性是：

将 navigationController 作为每个选项卡放置（并为相应的 navigationController 推送相应的 viewControllers）

然后 - 在必要的选项卡中您可以推送下一个 ViewController，而 TabBar 仍然可见（在其他选项卡中，信息不会改变）。

请参阅附带的带有 NIB 结构的屏幕截图：

![在此处输入图像描述](../Images/4b2605dcc8c42e26c03b3d3dc241fa3b.png)

# c - 如何使用c求函数的导数

> ID：12915317
> 
> 赞同：16
> 
> 时间：2012-10-16T13:01:28.743
> 
> 标签：c, derivative

是否可以使用 c 程序找到函数的导数。我正在使用 matlab，因为它有一个内置函数 diff() 可用于查找函数的导数。

```
f(x)=x^2 
```

是否可以使用 c 找到上述函数的导数。算法是什么？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-10-16T13:11:44.783

是的，这很有可能。但是，解决方案取决于您的需求。如果您需要一个简单的数值解决方案，则可以执行以下操作（在一定程度上，有一些限制 - 幼稚的实现）：

```
double derive(double (*f)(double), double x0)
{
    const double delta = 1.0e-6; // or similar
    double x1 = x0 - delta;
    double x2 = x0 + delta;
    double y1 = f(x1);
    double y2 = f(x2);
    return (y2 - y1) / (x2 - x1);
}

// call it as follows:
#include <math.h>

double der = derive(sin, 0.0);
printf("%lf\n", der); // should be around 1.0 
```

对于更高级的*数值*计算，您可以使用[GNU Scientific Library。](http://www.gnu.org/software/gsl/)

但是，如果您需要分析地找到给定函数的导数*公式*，那么您必须：

1.  将输入公式解析为某种抽象数据类型，例如 AST；
2.  使用推导的恒等式和规则推导它（只有几个，这部分应该是最简单的），
3.  将您作为派生过程的结果获得的抽象数据类型序列化为字符串并将其作为结果输出。

但是，您不需要执行所有这些操作；有很棒的 C 数学库可以提供这样的功能。

编辑：经过一番谷歌搜索，我找不到一个。我能想到的最接近入门的解决方案是查看[GeoGebra 的源代码](http://dev.geogebra.org/trac)——尽管它是用 Java 编写的，但对于任何足够流利的类 C 语言的人来说，它都相当容易阅读。如果没有，请继续自己实现该算法:)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-16T13:14:26.270

对于简单的函数，以下数值微分效果很好：

```
typedef double (*TFunc)(double);

// general approximation of derivative using central difference
double diff(TFunc f, double x, double dx=1e-10)
{
  double dy = f(x+dx)-f(x-dx);
  return dy/(2.*dx);
}

// more or less arbitrary function from double to double:
double f(double x)
{
   return x*x;
}

// and here is how you get the derivative of f at specified location
double fp = diff(f, 5.); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-16T13:02:40.280

C 语言中没有内置任何东西来实现这一点。如果您在线搜索，您也许可以找到一个数字库来执行此操作，尽管我怀疑是否有任何可用的东西可以提供符号导数。您可以考虑使用前向、后向和/或中心差异自己编码近似数值导数。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-16T13:12:21.813

在 C 中，您可以相对容易地进行粗略的数值微分，但任何类型的符号微分都需要第三方框架或滚动您自己的框架。

C 是一种通用的低级编程语言，与 Matlab 不同，后者专门用于数学计算并具有用于符号计算的高级工具。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-12-01T17:42:50.613

对于想要 f'(x) 背后数学的好奇窥视者，我们使用从极限获得的导数的标准定义，请参阅：[导数公式。](https://i.stack.imgur.com/3NG5q.jpg)

这里，h->0（h趋于0）意味着h是一个非常小的数。对于大多数计算，您可以将此数字设为 10^-5。尽管这两个方程都运行良好，但在实践中，第二个给出了更好的值。然而，人们也可能注意到这些计算非常昂贵，当实际函数可以手动导出时应该避免。

# javascript - 轮播 Jquery/Javascript

> ID：12915318
> 
> 赞同：0
> 
> 时间：2012-10-16T13:01:39.513
> 
> 标签：javascript, jquery

我一直在使用[这个](http://www.bkosborne.com/jquery-waterwheel-carousel/options)轮播在我的 ASP .NET 作业项目中动态加载图像。在此轮播的文档中，有一个名为“activeClassName”的选项用于获取中心项目（如果我已正确解释它），但我仍然无法在我编写了我的 javascript 的 ASPX 文件中获取此类代码，因为我是 Jquery 和 javascript 的新手。我已经通过网络进行了搜索，但我仍然可以制作这样的类的对象：

```
a = new classA; 
```

有人可以给我任何有关如何使用此选项的示例吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T13:13:43.897

如果您阅读以下代码中的评论（来自您链接的网站）

```
$("#waterwheelCarousel").waterwheelCarousel({
     // include options like this:
     // (use quotes only for string values, and no trailing comma after last option)
     // option: value,
     // option: value
 }); 
```

他们告诉你怎么做:)

所以基本上，

```
$("#waterwheelCarousel").waterwheelCarousel({
     activeClassName: 'yourclassname'
 }); 
```

会成功的。

# python - 许多类与许多对象

> ID：12915325
> 
> 赞同：-1
> 
> 时间：2012-10-16T13:02:10.847
> 
> 标签：python, class, object, creation

我正在开发一个 Python 项目，我必须在我的代码中表示一个 GUI 结构。它看起来像这样：

*   窗口 1（包含按钮 1、按钮 2、按钮 3、对话框 1、...）
*   window2（包含 button4、button5、dialog2、list1、...）

所以有许多窗口，每个窗口都有不同的内容，不同元素背后的功能也不同。每个窗口都可以有不同的自定义方法，这些方法只能在那里工作。

现在我有两种可能：

首先：

```
class Window1(object):
    def __init__(self):
        self.elements = {"button1":button1,"button2":button2,...}

    def customMethod(self):
        print "do custom"

class Window2(object):
    def __init__(self):
        self.elements = {"button4":button4,"button5":button5,...}

    def otherCustomMethod(self):
        print "do other custom"

...
window1 = Window1()
window2 = Window2() 
```

但是如果我这样做，就会有很多类，每个窗口一个，我只需要每个窗口的一个实例。所以第二种可能性是动态创建正确的对象：

```
# create template class
class WindowGeneric(object):
    pass

# create first window
window1 = WindowGeneric()
window1.elements = {"button4":button4,"button5":button5,...}

def customMethod(self):
    print "do custom"

window1.customMethod = customMethod.__get__(window1, WindowGeneric) #bind to instance

#create second window
window2 = WindowGeneric()
window2.elements = {"button4":button4,"button5":button5,...}

def otherCustomMethod(self):
    print "do other custom"

window1.otherCustomMethod = otherCustomMethod.__get__(window2, WindowGeneric) #bind to instance 
```

但是这个解决方案看起来也很丑陋，因为**得到**“黑客”的东西。

这实际上是关于对象的创建，窗口的元素在运行之前是已知的，并且在运行期间不会改变。

那么有没有更好的方法来做到这一点？

编辑：澄清一下：我只想创建很多相似但不相等的对象（它们内部可以有不同的方法和变量），但我不知道为每个对象创建一个新类是否更好（版本 1）或通过拥有一个虚拟对象并在之后添加单个功能来创建对象（版本 2）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T13:04:07.220

很难用你的代码片段来判断，但也许你可以使用继承来解决这个问题......

```
class BaseWindow(object):
     def __init__(self,elements):
        self.elements = elements
     def common_method1(self,...):
        ...
     def common_method2(self,...):
        ...

class Window1(BaseWindow):
     def __init__(self):
        BaseWindow.__init__(self,{"button1":button1,"button2":button2,...}) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T13:16:31.683

您在这里需要的是工厂模式。创建一个 FactoryWindow 类，并添加一个类方法`createwindow`来实例化一个基于一些`Window ID`. 维护所有已实例化的 Windows 的字典，如果您正在实例化一个已经存在的实例，则返回前一个实例而不是创建一个新实例

```
class FactoryWindow(object):
    Windows = {1:Window1,2:Window2}
    window_instance = {}
    @classmethod
    def CreateWindow(cls,win_no):
        if win_no in cls.window_instance:
            return cls.window_instance[win_no]
        else:
            cls.window_instance[win_no] = cls.Windows[win_no]()
            return cls.window_instance[win_no]

>>> window1 = FactoryWindow.CreateWindow(1)
>>> window2 = FactoryWindow.CreateWindow(2)
>>> window3 = FactoryWindow.CreateWindow(1)
>>> id(window3) == id(window1)
True 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-16T13:17:41.220

尽可能将表示与逻辑分开通常更清晰。

考虑一个通用窗口，它只是/主要是界面元素的哑容器，加上您需要的任何回调（它们可以只是传递给`__init__`方法的函数或可调用对象，您不需要从外部将新方法破解到对象中）。

这表示：

*   如果您有很多配置（XML 或其他），您可以轻松地从配置（XML 或其他）构建您的哑窗口，从而避免将硬编码的布局信息与您的逻辑混合在一起
*   您可以轻松地模拟一个窗口，或者直接调用您的回调，以便在不显示 GUI 元素的情况下运行测试
*   如果需要，您可以更轻松地移植到不同的 GUI 系统

# android - 有没有更好的方法在 Android 中解析 SoapObject

> ID：12915327
> 
> 赞同：1
> 
> 时间：2012-10-16T13:02:23.583
> 
> 标签：android, web-services, parsing, ksoap2

到目前为止，我已经设法连接到 Web 服务并获得了 SoapObject 响应，但是我在缩小一个好的、干净的解析方式时遇到了麻烦。搜索互联网并没有真正产生太多结果，每个人都有不同的方式和不同的过程，通常针对他们自己的 Web 服务，使其成为一次性使用类型的解决方案。基本上，以下是我从 Web 服务获得的响应

```
anyType{
 schema=anyType{
  element=anyType{
   complexType=anyType{
    choice=anyType{
     element=anyType{
      complexType=anyType{
       sequence=anyType{
        element=anyType{}; 
           element=anyType{}; 
            element=anyType{}; 
              element=anyType{}; }; }; }; }; }; }; };   
      diffgram=anyType{
         NewDataSet=anyType{
          Rep_x0020_Information=anyType{
            Login=CorrectLogin; Password=InCorrectPass; }; }; }; } 
```

基本上我希望能够解析出两个重要的字段（登录名和密码）。根据我阅读的内容，我尝试根据属性计数迭代 SoapObject 响应，但这似乎不起作用。当我尝试时，我得到的响应属性计数为 2，所以我最终做了如下这样的事情：

```
SoapObject response=(SoapObject) envelope.getResponse();

                if  (response != null) {
                    Log.i("Message", "the response contains: " + response.toString());
                    SoapObject diffgram = (SoapObject) response.getProperty("diffgram");
                    SoapObject NewDataSet = (SoapObject) diffgram.getProperty("NewDataSet");
                    SoapObject RepInfo = (SoapObject) NewDataSet.getProperty("Rep_x0020_Information");
                    for (int i = 0; i < RepInfo.getPropertyCount(); i++) {
                        PropertyInfo info = new PropertyInfo();
                        RepInfo.getPropertyInfo(i, info);
                        Log.d("Info", info.name + " : " + RepInfo.getProperty(i).toString());
                    }

 //which gives the following message in LogCat
  D/Info(716): Login : InCorrectLogin
  D/Info(716): Password : InCorrectPass 
```

这个过程有效，因为在最后一个循环中我得到了我想要的两个对象，但我只是觉得有一种更清洁的方法可以做到这一点。我只是问，因为随着我深入了解这个应用程序，将会进行一些更复杂的 Web 服务调用，我希望能够在整个应用程序中拥有可重用的东西，而不必为每个请求构建几个 SoapObjects 只是为了得到到我想要的对象。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T08:18:50.553

从 Web 服务解析对象有两种方法：
**首先**，假设您是 Web 服务的所有者或创建者，您可以让 Web 服务返回一个 Json 字符串，然后从客户端，您可以创建一个到 Json 的实体映射，Json 库将小心为你解析。

**第二**：web服务通常会响应很多复杂的对象，所以你可以让实体与这些对象进行映射。
您可以按照[本教程](http://seesharpgears.blogspot.com/2010/10/ksoap-android-web-service-tutorial-with.html)了解如何映射简单对象，然后从[这个问题](https://stackoverflow.com/a/12912334/719212)转到我的答案以了解解析复杂对象。
就是这样：

```
 HttpTransportSE androidHttpTransport = new HttpTransportSE(SERVER_URL);
 androidHttpTransport.call(SOAP_ACTION, envelope);// call
 Entity entity = (Entity)envelope.bodyIn; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T18:17:10.210

您可以通过在 HttpTransportSE 中设置调试属性并在调用后立即获取 requestDump 和/或 responseDump 以更简单的方式获取响应（和请求）xml。像这样的东西：

```
HttpTransportSE  httpTransport = new HttpTransportSE(wsURL);
httpTransport.debug = true;

httpTransport.call("WS_NAMESPACE" + methodName, envelope);

Log.w("RawXML Request:" + httpTransport.requestDump);
Log.w("RawXML Response:" + httpTransport.responseDump); 
```

您甚至可以在 try catch 块中使用它来分析肥皂错误。

使用后不要忘记禁用调试，因为它会降低性能，在这种情况下，那些转储属性将为空。

# c# - 如何在 C++ 中验证 Validate NCName

> ID：12915333
> 
> 赞同：2
> 
> 时间：2012-10-16T13:02:44.040
> 
> 标签：c#, c++, xml

在.NET中你有

[XmlConvert.VerifyNCName](http://msdn.microsoft.com/en-us/library/system.xml.xmlconvert.verifyncname%28v=vs.100%29.aspx)

[XmlConvert.IsNCNameChar](http://msdn.microsoft.com/en-us/library/system.xml.xmlconvert.isncnamechar%28v=vs.100%29.aspx)

等来验证**[NCName](http://www.w3.org/TR/xmlschema-2/#NCName)**

如何在 C++ 中做同样的事情？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T13:17:53.543

您可以尝试使用 Apache 的[Xerces-C++](http://xerces.apache.org/xerces-c/download.cgi)库，更具体地说是[XMLChar1_1::isValidNCName](http://xerces.apache.org/xerces-c/apiDocs-3/classXMLChar1__1.html#b0c0aa3ecba045789e3f6404845c806e)方法。

如果您使用的是 Visual Studio，您还可以使用 C++/CLI，这将允许您将非托管 C++ 与托管 C++ 混合使用，您将能够在其中使用 .NET 函数。

# php - 存储用户名和密码，然后用户想要检索用户信息但密码已加密

> ID：12915338
> 
> 赞同：1
> 
> 时间：2012-10-16T13:03:15.543
> 
> 标签：php, mysql, hash

所以我一直在学习很多关于 PHP 和 Mysql 的知识，我想知道一些事情。假设我要创建一个只存储用户名和密码的数据库（保持示例简单）。我知道在不加密的情况下存储密码是不安全的，因为有人可能会侵入数据库。
所以我使用 MD5 散列或更安全的东西并加密存储密码，然后我的一个用户忘记了他们的登录信息，他们想通过电子邮件检索它。

如果我使用像 MD5 或更好的单向加密方法，如果他们的密码被加密并且无法解密，我应该如何向用户发送他们的登录信息？
我猜想为此目的（我的意思是检索部分）是否有另一种方式，或者至少是另一个地方，密码只是为此而存储的？

如果有人能建议一种安全存储这些信息的方法，我会很高兴，但如果我的一个用户忘记了他们的登录，我可以通过电子邮件安全地给他们发回邮件。或者现在如何处理这样的问题？
从我读过的内容来看，MD5 哈希已经被黑了，所以更好的加密哈希或方法也会很好。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-16T13:08:01.147

> 那么如果他们的密码被加密并且无法解密，我应该如何向用户发送他们的登录信息？

你不是。您永远不应该将用户密码发送给他们。

如果用户想要重置他们的密码，那么：

1.  生成随机令牌
2.  将该令牌存储在带有时间戳和用户 ID 的数据库中
3.  通过电子邮件将令牌发送给用户
4.  当用户使用令牌访问页面时，允许他们输入新密码
5.  使用后删除令牌
6.  如果在一段时间内（例如 3 小时）未使用令牌，则删除令牌

> 从我读到的 MD5 散列已经被黑了，所以更好的加密散列或方法会很好。

请参阅[PHP 手册，这是一个常见问题解答](http://php.net/manual/en/faq.passwords.php)。

另见，[OWASP](https://www.owasp.org/index.php/Password_Storage_Cheat_Sheet)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T13:06:30.653

首先，不要使用 MD5。阅读我不久前发布的这个问题，它包含许多有用的链接[使用随机盐改进密码散列](https://stackoverflow.com/questions/9420722/improve-password-hashing-with-a-random-salt)

然后，如果您散列用户密码（强烈推荐），您根本无法将密码发回给他们。向他们发送重置密码链接并允许他们设置新密码。它是如此简单。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-16T13:19:19.737

如果您可以轻松解密密码，那么其他人也可以这样做，系统将确保

更好的方法是您根据用户请求生成新密码并使用一些随机字符串更新密码，并通过邮件发送用户更新的**（未加密的）**密码并将其存储在数据库中加密后（例如 md5）......您可以使用我的以下方法生成随机密码

```
<pre>
  <?php
    $randstr = "";
         for($i=0; $i<10; $i++)
           {
            $randnum = mt_rand(0,61);
             if($randnum < 10)
             $randstr .= chr($randnum+48);
             else if($randnum < 36)
                  $randstr .= chr($randnum+55);
             else
                  $randstr .= chr($randnum+61);
          } 
     $original_pass=$randstr;  //Send it via E-mail
     $encrypted_pass=md5($randstr); //Store it in Database 
      ?> 
```

**您还可以通过在前三个字母上使用 md5 并在接下来的两个字母上使用 sha1 并在下一个字母上使用其他一些来使用不同加密算法的组合，并将用户限制为至少 6 个字母或更多的密码** 但是，有一些加密算法，你可以通过提供密钥来使用它们进行解密，但是其他人知道密钥也会解密它们......

**您也可以加密密钥，然后将其存储在数据库中，并在通过其他密钥解密密钥后使用它来解密密码......但这会增加处理时间，并且会有时间复杂度问题。**

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-16T13:06:37.337

我认为您通过存储密码的哈希而不是密码本身来沿着正确的路线前进。

如果他们忘记了，我同意因为您只有一个哈希值，所以您不能向他们显示一个带有密码的屏幕。但是，您可以向他们发送一封电子邮件，其中链接到允许他们*重置*密码的页面。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-16T13:10:29.730

您可以简单地创建一个随机密码并向他们发送激活该密码的激活链接。

我建议您使用 md5 以外的其他东西，或者使用带有盐的 md5 或类似的东西，因为如果密码太简单，有许多在线工具可以为您提供 md5 的字符串。顺便说一句，盐基本上是一组密钥，您可以将它们添加到密码中以使其更难获得。

# sql-server - t-sql 将两个表相乘

> ID：12915339
> 
> 赞同：0
> 
> 时间：2012-10-16T13:03:16.563
> 
> 标签：sql-server, tsql

我有 2 张桌子

```
Plant            config         
------         --------

TRZ1            KS

MAS1            MT 
```

我想要下表有 2 列

```
RESULT
------
TRZ1  KS

TRZ1  MT

MAS1  KS

MAS1   MT 
```

谢谢您的帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T13:08:16.270

目前尚不清楚您是否希望在同一列中，如果是，那么您可以使用以下方法连接值：

```
select p.col1 + ' ' + c.col1 as result
from plant p
outer apply config c 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!3/28782/8)

如果没有，那么您可以使用：

```
select p.col1 plant, c.col1 config
from plant p
outer apply config c 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!3/28782/7)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T13:06:09.220

最短的方法：

```
 select * from plant, config 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-16T14:06:22.697

使用可以使用 CROSS JOIN：

> SELECT P.NAME, C.NAME FROM Plant AS P CROSS JOIN Config AS C

# javascript - 如何在 jQuery Datepicker 中设置日期范围并将其设置为默认值？

> ID：12915347
> 
> 赞同：1
> 
> 时间：2012-10-16T13:03:49.223
> 
> 标签：javascript, jquery, datepicker

1.  我需要将“开始日期”设置为从当天开始的 +1 天。
2.  从“开始日期”开始 +3 天为“结束日期”
3.  （可选）突出显示尾随天数

![在此处输入图像描述](../Images/6224282d14d131866981f90685153894.png)

小提琴可以在这里找到：http: [//jsbin.com/icuduv/1](http://jsbin.com/icuduv/1)

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-16T13:13:43.367

那么你可以简单地这样做

```
var d = new Date(); d.setDate( d.getDate() + 1 );
$('#txtStartDate').datepicker('setDate', d); 
d = new Date(); d.setDate( d.getDate() + 4 );
$('#txtEndDate').datepicker('setDate', d); 
```

我也更新了你的演示，看看[这里](http://jsbin.com/icuduv/7)

要突出显示日期，您可以使用[beforeShowDay](http://jqueryui.com/datepicker/#event-beforeShowDay)事件。它将为需要在日历中显示的每个日期调用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T14:24:09.660

也许你可以试试这个

```
$(function() {
  var $defaultDate = new Date(); 
  $defaultDate.setDate( $defaultDate.getDate() + 1 );
  $('#txtStartDate').datepicker({defaultDate:   $defaultDate}).val(($defaultDate.getMonth()+1) + '/' + $defaultDate.getDate() + '/' +  $defaultDate.getFullYear()); 
  $defaultDate.setDate( $defaultDate.getDate() + 3 );
  $('#txtEndDate').datepicker({defaultDate: $defaultDate}).val(($defaultDate.getMonth()+1) + '/' + $defaultDate.getDate() + '/' +   $defaultDate.getFullYear()); 
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-16T13:09:08.603

使用以下内容获取日期值：

```
var startDate = new Date();
var endDate = new Date();
startDate.setDate(today.getDate()+1);
endDate.setDate(startDate.getDate()+3);

$("#startDateInput").val(startDate.toString('MM/dd/yyyy'));
$("#endDateInput").val(endDate.toString('MM/dd/yyyy')); 
```

这个问题可以帮助突出显示：

[使用 jQuery 的 datepicker 突出显示特定范围内的日期](https://stackoverflow.com/questions/2385332/jquery-datepicker-highlight-dates)

# javascript - 从 lat long 转移到 NMEA 数据包

> ID：12915358
> 
> 赞同：2
> 
> 时间：2012-10-16T13:04:18.193
> 
> 标签：javascript, android

我正在从 lat long 项目中添加简单的 NMEA，Lat long 工作得很好，但是当转移到 nmea 时它给了我错误。

如果有人可以帮助我，我将不胜感激。

```
protected LocationManager locationManager;
protected Button retrieveLocationButton;

@Override
public void onCreate(Bundle savedInstanceState) {

    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    retrieveLocationButton = (Button) findViewById(R.id.retrieve_location_button);

    locationManager = (LocationManager) getSystemService(Context.LOCATION_SERVICE);

    locationManager.requestLocationUpdates(LocationManager.GPS_PROVIDER,2000,0,this);
    locationManager.addNmeaListener(this);

    retrieveLocationButton.setOnClickListener(new OnClickListener() {
        @Override
        public void onClick(View v) {
            showCurrentLocation();
        }
    });     
}    

protected void showCurrentLocation() {
        // TODO Auto-generated method stub

    }

    @SuppressWarnings("unused")
    private class MyLocationListener implements NmeaListener {

    public void onLocationChanged(Location location) {
        String message = String.copyValueOf(null);

        locationManager.requestLocationUpdates(LocationManager.GPS_PROVIDER,0,0,this);

        boolean isGood = locationManager.addNmeaListener((NmeaListener) this);

        Toast.makeText(MainActivity.this, message, Toast.LENGTH_LONG).show();
    }

    public void onStatusChanged(String s, int i, Bundle b) {
        Toast.makeText(MainActivity.this, "Provider status changed",
                Toast.LENGTH_LONG).show();
    }

    public void onProviderDisabled(String s) {
        Toast.makeText(MainActivity.this,
                "Provider disabled by the user. GPS turned off",
                Toast.LENGTH_LONG).show();
    }

    public void onProviderEnabled(String s) {
        Toast.makeText(MainActivity.this,
                "Provider enabled by the user. GPS turned on",
                Toast.LENGTH_LONG).show();
    }

  }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T13:25:25.547

您并没有真正提供有关“错误”的足够信息，但在我看来，以下行将导致编译时错误...

```
locationManager.addNmeaListener(this); 
```

尝试将其更改为...

```
locationManager.addNmeaListener(new MyLocationListener()); 
```

# javascript - 跨帧共享全局 javascript 对象

> ID：12915360
> 
> 赞同：3
> 
> 时间：2012-10-16T13:04:19.817
> 
> 标签：javascript, html, iframe

这听起来可能很荒谬，但在某些情况下我们需要`JavaScript Objects`分享`iframe`。

当我们尝试`localStorage`用于服务目的时，人们说某些浏览器可能不支持它。即使他们支持 localStorage，用户也可能减少了存储容量等等......
所以我的问题是，我们有没有解决方案/Alternative to share `JavaScript`Objects across`iframe` 下面的示例可能会让我们在同一页面上

**父页面.html**

```
<html>
...
<head><script src="script1.js" type="text/Javascript"></script></head>
<body>
...
<iframe src="childpage.html"></iframe>
</body>
</html> 
```

**childpage.html**

```
<html>
...
<head><script src="script2.js" type="text/Javascript"></script></head>
...
</html> 
```

**注意**：
*parentpage.html、childpage.html、script1.js、script2.js*位于同一域和同一位置

假设 script1.js 使用`JavaScript Object`需要公开的 a。

由于浏览器/UserAgent为页面中使用`Window Object`的每个附加项创建一个单独的，并且如果我们将其附加/扩展到，`iframe`我们无法访问它，它的最后希望似乎消失了！`Public JavaScript Object``Window Object/Document Object`

有什么解决方案/解决方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T07:02:24.780

正如@Pointy 建议的那样，`LocalStoage`跨帧共享数据的最佳替代方法是使用`window.top`属性/成员/对象

但是，正如 mozilla 开发文档中提到的那样，该属性是**只读**的，但我仍然想知道它是否不会在未来严格强制不添加新成员/字段`window.top`

参考：[Mozilla 开发文档](https://developer.mozilla.org/en-US/docs/DOM/window.top)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T13:44:11.420

可以通过 postMessage 跨属于多个域的多个 iframe 共享数据

# javascript - Javascript 错误类不支持自动化

> ID：12915366
> 
> 赞同：1
> 
> 时间：2012-10-16T13:04:50.497
> 
> 标签：javascript, pdf

我在页面上有调用 javascript 函数来打开窗口的链接。

有些链接是 HTML，有些是 PDF。

如果我单击其中一个 pdf 链接，然后在该窗口打开时单击任何其他链接，则会发生错误。

如果我首先单击 html 链接，然后单击任何其他链接，则不会发生错误。

所以先点击一个pdf链接再点击另一个链接会抛出这个错误。

```
 w.location.href = url; <<< **********ERROR HERE ********************* 
```

html:

```
 helpMenu.add( new AnchorMenuItem("Features", "javascript:openHelpWindow('../html/help/features.html');") );
    helpMenu.add( new AnchorMenuItem("Overview", "javascript:openHelpWindow('../doc/Overview.pdf');") ); 
```

JS：

```
var w;

function openHelpWindow(url) 
{     
 w = window.open(url, "MSSTHelp", "resizable,scrollbars,height=700,width=900,screenX=100,screenY=100,left=100,top=100");    
 w.location.href = url; <<< **********ERROR HERE *********************
 w.focus();

} 
```

# java - SQL查询在while循环中不起作用 - JAVA

> ID：12915367
> 
> 赞同：3
> 
> 时间：2012-10-16T13:04:58.933
> 
> 标签：java, mysql, netbeans, while-loop, resultset

我在 NetBeans 上用 Java 编写了一段代码：

```
package helloworld;

import java.sql.*;
import java.io.*;
import java.lang.Object;
import java.io.IOException;
import java.sql.SQLException;
import java.sql.Statement;
import java.util.ArrayList;
import java.util.Arrays;
import java.util.Collections;
import java.util.HashSet;
import java.util.List;
import java.util.Map;
import java.util.Set;
import java.util.*;
import org.apache.commons.collections.CollectionUtils;
import org.apache.commons.collections.functors.EqualPredicate;
import org.apache.lucene.queryParser.ParseException;

public class HelloWorld {
    public static void main(String[] args) throws IOException, ParseException {
        // TODO code application logic here       
        Connection conn = null;
        Statement stmt = null;
        ResultSet rs = null;

        String url = "jdbc:mysql://localhost:3306/kdd";
        String user = "root";
        String password = "Pass1234";    

        try {
            conn = DriverManager.getConnection(url, user, password);
            stmt = conn.createStatement();

            String sqlQuery = "Select * from ad_contents";
            rs = stmt.executeQuery(sqlQuery);

            while (rs.next()) { //(rs.next())              
                int adID = rs.getInt(1);
                String keywordTokens = rs.getString(2);
                String titleTokens = rs.getString(3);
                String descriptionTokens = rs.getString(4);

                List<String> keywordList = Arrays.asList(keywordTokens.split("\\|", -1));
                List<String> titleList = Arrays.asList(titleTokens.split("\\|", -1));
                List<String> descriptionList = Arrays.asList(descriptionTokens.split("\\|", -1));
                Set<String> distincts = new HashSet<String>();
                distincts.addAll(keywordList);
                distincts.addAll(titleList);
                distincts.addAll(descriptionList);

                int keywordHit = 0, titleHit = 0, descriptionHit = 0;

                for (String distinctCounter : distincts) {                    
                    keywordHit = CollectionUtils.cardinality(distinctCounter, keywordList);
                    titleHit = CollectionUtils.cardinality(distinctCounter, titleList);
                    descriptionHit = CollectionUtils.cardinality(distinctCounter, descriptionList);
                    String intoQuery = "insert into ad_word_counts values (" + adID + "," + distinctCounter + "," + keywordHit + "," + titleHit + "," + descriptionHit + ")";
                    stmt.execute(intoQuery);
                    //node myNode= new node(adID, Integer.parseInt(distinctCounter) , keywordHit, titleHit, descriptionHit);                                     
                }

            }           
        } catch (SQLException ex) {
        } finally {
            try {
                if (rs != null) {
                    rs.close();
                }
                if (stmt != null) {
                    stmt.close();
                }
                if (conn != null) {
                    conn.close();
                }
            } catch (SQLException ex) {
            }
        }
    }
} 
```

但是，对于 rs 结果集的第一行，它只进入 while 块 1 次。因此，它只为 1 个 adID 写入数据。“intoQuery”不适用于所有 rs 结果集行。我该如何处理？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-16T13:07:21.257

那是因为您在 while 循环内的 for 循环中又执行了一个查询：-

```
for (String distinctCounter : distincts) {                    

    // Create a new statement to execute query in while loop                
    Statement stmt1 = conn.createStatement();  
    stmt1.execute(intoQuery);

} 
```

这将导致旧`result set`的关闭。

看一下：-[`ResultSet#close`](http://docs.oracle.com/javase/7/docs/api/java/sql/ResultSet.html#close%28%29)文档，其中说：-

> 当 Statement 对象关闭、重新执行或用于从多个结果序列中检索下一个结果时，生成它的 Statement 对象会自动关闭 ResultSet 对象。

因此，文档清楚地表明，使用相同的语句重新执行新查询将关闭该`ResultSet`对象。

因此，您需要使用不同的`statement`实例来创建内部查询。

**建议**： -

理想情况下，您上面的代码会抛出一个您不知道的`SQLException`(See )，因为您在块中吞下了异常。[`ResultSet#next`](http://docs.oracle.com/javase/7/docs/api/java/sql/ResultSet.html#next%28%29)`catch`

```
 catch (SQLException ex) {
    } 
```

永远不要使用`empty`catch 块。它没有用，除了它可以防止您的程序在运行时停止。但这不会有任何好处。

# database - 数据库设计 - 关联实体

> ID：12915368
> 
> 赞同：1
> 
> 时间：2012-10-16T13:05:01.210
> 
> 标签：database, many-to-many, entity, modeling, associative

我目前正在设计一个数据库模型，我遇到了一个问题，我想就什么被认为是正确的做事方式提供更多的输入。

在下面的示例中，我有两个表，Persons 和 Roles。现在可以为 1 个人分配 0 个或多个角色。对于多对多关系，这非常简单，但是当您希望允许用户选择他当前“操作”的角色时，就会出现棘手的部分。

假设用户有 5 个角色可供选择，根据他当前选择的角色，应用程序将为他呈现不同的视图/菜单/按钮/等。

我在这里看到两个解决方案：

1：（见下面链接的图片顶部）

在persons 表中，您将一个可为空的FK 包含到多对多关系（关联实体）中。

来自[关联实体的维基百科](http://en.wikipedia.org/wiki/Associative_Entities)

“其他实体”似乎可以引用这种关系。我只是不完全确定这是否包括 Roles 和 Persons 实体。

我喜欢这个设计的一点是，很容易获得一个人所有允许角色的列表，然后你只需指向其中一个允许的角色，说“你是当前/活跃的角色”。这也是确保用户只能拥有当前角色的好方法，如果他有权访问该角色......只是，我在这里也看到了潜在的灾难：如果，persons 表中的 FK 引用另一个用户的关系。DB 设计允许这样做。它只会是阻止它的代码。

2：（见下面链接的图片底部）

我使关联实体保持简单，相反，我在persons 表中有FK，它指向Roles 表中的特定角色。

这里的问题是，在确保一个人的“当前角色”实际上是“允许”的角色方面，我从数据库设计中获得的帮助更少。

[示例图片](http://i.imgur.com/bBbka.png)

对此的任何想法将不胜感激=）

更新：我将包括同一问题的另一个变体。

两个实体：WorkOrders 和 Sites

*   1 个站点可以访问许多工作订单
*   许多站点可以访问 1 个 WorkOrder

所以我们有一个多对多的关系

问题：当只有一个站点拥有一个工作订单时，我们如何最好地在数据库中存储哪个站点是工作订单的所有者。

我们是否将“OwnerSiteId”作为 WorkOrder 表中的一列，或者可以改为引用多对多关系，说“那个”是所有者。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T13:15:21.143

将当前角色与其他会话数据一起存储。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T13:31:13.617

如果您的要求是
**一个人可以担任多个角色，但如果是，则只能担任一个积极角色**
，那么您的两种设计都具有以下优点和缺点

-**设计 1\. 在 PERSON 表中拥有 ROLE 表的键**优点：它会减少连接，因此会降低数据库操作的成本。缺点：您可以为用户分配一个从未出现在其允许列表中的角色。

*   **设计 2\. 在 PERSON 表中拥有 Associate Entity 表的键** pros:PERSON 将只分配给他允许的那些 ROLES。缺点：比第一种方法增加了一个连接成本。

**结论：**如果我是你，我会选择设计 1 并确保从应用程序中分配角色。

# business-process-management - Activiti：如果进程在截止日期之前结束，是否会触发中间计时器事件？

> ID：12915369
> 
> 赞同：1
> 
> 时间：2012-10-16T13:05:02.200
> 
> 标签：business-process-management, bpmn, activiti

我正在学习活动。我有一个带有两个分支的并行网关。一个分支流向一系列用户任务。另一个流到一个中间计时器事件，如果序列未完成，该事件将在 15 天内触发。

我的问题是，如果序列完成并且流程结束，中间计时器事件会消失吗？或者它会在 15 天后继续燃烧吗？

注意：我没有使用边界计时器事件，因为序列中涉及多个任务。

这是我在做什么的粗略图表。如果“用户上传”和“经理审核”过程未完成，计时器事件会执行某些操作。

![在此处输入图像描述](../Images/f5ef0c35a992d49e0a16406b75e02f28.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T12:51:05.263

我目前也在学习 Activiti 框架，所以我的回答可能不是正确的......

我认为，如果您的工作流到达终点，执行/工作流实例就会终止。因此，计时器将不再存在。

也许您可以通过设置 2 分钟计时器并终止您的工作流程来测试它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T17:52:57.380

结束事件消耗分支的令牌。要完成该过程，您必须消耗**所有**令牌。

从理论上讲，该过程尚未完成，因为您在计时器分支中仍然有一个令牌。

有很多设计解决方案可以做你所做的事情。

# objective-c - 从 NIB 加载并使用 addSubView 显示的视图不遵循约束

> ID：12915370
> 
> 赞同：3
> 
> 时间：2012-10-16T13:05:05.037
> 
> 标签：objective-c, uiview, ios6, autolayout

我有一个非常简单的视图加载：

```
self.splashView = [[[NSBundle mainBundle] loadNibNamed:@"DownloadingData"
                                                        owner:nil options:nil] objectAtIndex:0];
[self.view addSubview:self.splashView]; 
```

这是纵向模式下的全高 4 英寸视网膜视图，状态栏、顶部栏和底部栏设置为无。它具有使图像沿底部对齐的约束。我在应用程序其他地方的控制器中使用类似的视图，它们会调整大小进入可用空间（使用 NavigationBar 和 TabBar）绝对没问题。但是，此视图直接从 nib 加载然后添加似乎忽略了约束。

该视图旨在用于各种情况，例如有/没有导航栏/标签栏的任何组合。

我在 splashView 上尝试了`setNeedsLayout`,的各种组合。`setNeedsUpdateConstraints`我也尝试过调用`layoutSubviews`视图本身。

任何人都可以提供一些建议吗？在这种情况下，我应该以另一种方式来做吗？也许使用 viewController，或者在代码中手动添加约束？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-17T11:41:14.960

好吧，我想这很明显：

```
self.splashView = [[[NSBundle mainBundle] loadNibNamed:@"DownloadingData"
                                                 owner:nil options:nil] objectAtIndex:0];
[self.view addSubview:self.splashView];
[self.splashView setFrame:self.view.frame]; 
```

然后自动调整大小/约束按预期工作。

# actionscript-3 - 防火墙使 rtmp flash 播放器延迟 20 秒

> ID：12915372
> 
> 赞同：0
> 
> 时间：2012-10-16T13:05:23.503
> 
> 标签：actionscript-3, flash, apache-flex, rtmp

嗨，有一个播放器可以在 1935 端口上使用 rtmp 数据包在防火墙上工作。我遇到的问题是在我启动播放器 20 秒后开始流式传输。

什么可能导致这个问题。

当防火墙关闭时，播放器会立即从开口处开始流式传输。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T14:02:02.770

RTMP 上的 Flash 播放器有一个备用链，它们尝试在 TCP:1935 连接，如果失败，请尝试 TCP:80。这个回退链可能需要一段时间，特别是如果您的防火墙丢弃 1935 个数据包而不是拒绝它们。

如果您有权访问防火墙配置，请尝试将 1935 策略更改为允许或拒绝（但不能丢弃）。

否则，如果您可以修改 HTML，您可以尝试将 RTMP 链接 URL 架构更改为“rtmpt://”而不是“rtmp://”。这将导致播放器立即尝试端口 80（虽然，当端口 1935 上的 RTMP 工作时，它比端口 80 上的 RTMPT 工作得更好）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T10:41:53.283

事实证明，播放器获得了主机名而不是 IP 地址来进行流式传输，因此它为此苦苦挣扎了 20 秒。好的，我们发现 DNS 没有正确解析流式传输的 url :) 所以使用真实 IP 地址而不是主机名进行流式传输

# mysql - 获取从查询返回的总 mysql 结果有限制：FOUND_ROWS 错误

> ID：12915374
> 
> 赞同：0
> 
> 时间：2012-10-16T13:05:32.980
> 
> 标签：mysql, join, left-join, limit

我有这个mysql查询：

```
SELECT Files.GUID, Files.Name, Files.Type, Files.Visibility, Files.CreationDate, Files.OwnerUser, Date, BackupsCount
FROM Files
  LEFT JOIN (
    SELECT FileGUID, Date, COUNT(*) AS BackupsCount
    FROM Versions
    GROUP BY FileGUID
  ) Versions ON Files.GUID = Versions.FileGUID
WHERE Files.ParentFolder = '96251A8B-B2A8-416B-92D7-3509E6A645C7'
ORDER BY Files.Type DESC, CreationDate ASC
LIMIT 0, 50 
```

我想知道**如果 LIMIT 指令不存在**，这个查询将返回多少条记录，我用谷歌搜索发现我需要添加`SELECT SQL_CALC_FOUND_ROWS`和`SELECT FOUND_ROWS();`

**我的问题是：**我无法让它工作：

```
SELECT SQL_CALC_FOUND_ROWS * FROM (
SELECT Files.GUID, Files.Name, Files.Type, Files.Visibility, Files.CreationDate, Files.OwnerUser, Date, BackupsCount
FROM Files
  LEFT JOIN (
    SELECT FileGUID, Date, COUNT(*) AS BackupsCount
    FROM Versions
    GROUP BY FileGUID
  ) Versions ON Files.GUID = Versions.FileGUID
WHERE Files.ParentFolder = '96251A8B-B2A8-416B-92D7-3509E6A645C7'
ORDER BY Files.Type DESC, CreationDate ASC
LIMIT 0, 50)

-- Find total rows
SELECT FOUND_ROWS() 
```

假设这是个好主意（我的意思是做一个查询而不是两个单独的查询），**我怎样才能让`FOUND_ROWS()`这个查询工作？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T13:37:11.977

查询应该是这样的：

```
SELECT SQL_CALC_FOUND_ROWS Files.GUID, Files.Name, Files.Type, Files.Visibility, Files.CreationDate, Files.OwnerUser, Date, BackupsCount
FROM Files
  LEFT JOIN (
    SELECT FileGUID, Date, COUNT(*) AS BackupsCount
    FROM Versions
    GROUP BY FileGUID
  ) Versions ON Files.GUID = Versions.FileGUID
WHERE Files.ParentFolder = '96251A8B-B2A8-416B-92D7-3509E6A645C7'
ORDER BY Files.Type DESC, CreationDate ASC
LIMIT 0, 50 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T13:41:16.073

这个想法是正确的，第二个查询几乎是瞬时的。但是您必须在 之后添加关键字，仅此而已`SELECT`：

```
SELECT Files.GUID, Files.Name, Files.Type, ... 
```

变成

```
SELECT SQL_CALC_FOUND_ROWS Files.GUID, Files.Name, Files.Type, ... 
```

然后将填充找到的行数，您将能够恢复它。

如果您想运行一个**检索**查询，但您能够**执行**多个查询，那么您可以这样做（这是两个查询）：

```
SELECT COUNT(*) INTO @FOUNDROWS FROM ( YOUR_QUERY_WITHOUT_SELECT ) AS orig; 
```

`@FOUNDROWS as foundrows`并通过添加到字段来更改您的检索查询：

```
SELECT ...YOUR FIELDS..., @FOUNDROWS AS foundrows FROM... 
```

最后，您可以将 JOIN 作为包含两个查询的单个查询运行：

```
SELECT ALL_YOUR_FIELDS, counter.FOUND_ROW_NUMBER FROM
( YOUR_QUERY_WITH_LIMIT ) AS limited
JOIN ( SELECT COUNT(*) AS FOUND_ROW_NUMBER FROM YOUR_QUERY ) AS counter; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-04-06T16:01:52.943

```
A very simple example

 "SELECT SUM(final_cost) as final_cost,
SUM(call_discount) as discount_cost,
(SELECT COUNT(*) FROM call_records WHERE transaction_type ='call' AND account_id='$account_id' AND time_of_call>='$from' AND time_of_call<='$to' ) as calls,
(SELECT COUNT(*) FROM call_records WHERE transaction_type ='text' AND account_id='$account_id' AND time_of_call>='$from' AND time_of_call<='$to' ) as texts,
(SELECT COUNT(*) FROM call_records WHERE transaction_type ='appointment' AND account_id='$account_id' AND time_of_call>='$from' AND time_of_call<='$to' ) as appts
 FROM
 call_records
 WHERE account_id='$account_id'
 AND time_of_call>='$from'
 AND time_of_call<='$to' " 
```

# c# - DrawingArc 和 PaintEventArgs 问题（如何调用此函数）

> ID：12915377
> 
> 赞同：-1
> 
> 时间：2012-10-16T13:05:38.320
> 
> 标签：c#, .net

```
private void Drawarc(PaintEventArgs  e)
{

    // Create pen.
    System.Windows.Media.Pen blackPen = new     
   System.Windows.Media.Pen(System.Windows.Media.Brushes.Black, 3);
    // Create rectangle to bound ellipse.
    Microsoft.Xna.Framework.Rectangle rect = new Microsoft.Xna.Framework.Rectangle(100, 
    100, 140, 140);
    // Create start and sweep angles on ellipse.
    float startAngle = 45.0F;
    float sweepAngle = 270.0F;
    // Draw arc to screen.
   //Graphics.DrawArc(blackPen, rect, startAngle, sweepAngle);
} 
```

我试图这样调用这个函数

```
 this.Drawarc(); 
```

所以它给了我以下错误

方法'Drawarc'没有重载需要0个参数
我知道我做错了什么请帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T13:10:58.963

```
private void Drawarc(PaintEventArgs  e) {
    ...
} 
```

这个函数*显然*需要`PaintEventArgs` 像参数一样的类型对象。这种对象**通常**是在 Form 的`OnPaint(...)`方法中获取的。

# mysql - Ruby CSV 读取多行字段

> ID：12915383
> 
> 赞同：2
> 
> 时间：2012-10-16T13:05:52.777
> 
> 标签：mysql, ruby, csv, fastercsv

我从 SQL 导出表和查询，其中一些字段是多行的。

读取 CSV 的 Ruby（1.9+）方法似乎是：

```
require 'csv'

CSV.foreach("exported_mysql_table.csv", {:headers=>true}) do |row|
    puts row
end 
```

如果我的数据是这样的，那效果很好：

```
"id","name","email","potato"
1,"Bob","bob@bob.bob","omnomnom"
2,"Charlie","char@char.com","andcheese"
4,"Doug","diggyd@diglet.com","usemeltattack" 
```

（第一行是标题/属性）

但如果我有：

```
"id","name","address","email","potato"
1,"Bob","--- 
- 101 Cottage row
- Lovely Village
- \"\"
","bob@bob.bob","omnomnom"
2,"Charlie","--- 
- 102 Flame Street
- \"\"
- \"\"
","char@char.com","andcheese"
4,"Doug","--- 
- 103 Dark Cave
- Next to some geo dude
- So many bats
","diggyd@diglet.com","usemeltattack" 
```

然后我得到错误：

```
.rbenv/versions/1.9.3-p194/lib/ruby/1.9.1/csv.rb:1894:in `block (2 levels) in shift': Missing or stray quote in line 2 (CSV::MalformedCSVError) 
```

这似乎是因为该行的末尾没有关闭引号，因为它跨越了几行。

（我尝试了“FasterCSV”，自 ruby​​ 1.9 以来，该 gem 变成了“csv”）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-16T17:02:44.633

您的问题不是多行而是格式错误的 CSV。

像这样替换`\"`行结束后的和结束空格：

```
require 'csv' 

ml = %q{"id","name","address","email","potato" 
1,"Bob","---  
- 101 Cottage row 
- Lovely Village 
- \"\" 
","bob@bob.bob","omnomnom" 
2,"Charlie","---  
- 102 Flame Street 
- \"\" 
- \"\" 
","char@char.com","andcheese" 
4,"Doug","---  
- 103 Dark Cave 
- Next to some geo dude 
- So many bats 
","diggyd@diglet.com","usemeltattack"}

ml.gsub!(/\" \n/,"\"\n").gsub!(/\\\"/,"__")

CSV.parse(ml, {:headers=>true}) do |row|
  puts row
end 
```

这给出了：

```
"id","name","address","email","potato"
1,"Bob","---  
- 101 Cottage row 
- Lovely Village 
- ____
","bob@bob.bob","omnomnom"
etc 
```

如果您无法控制提供 CSV 的程序，则必须打开文件、读取内容、进行替换，然后解析 CSV。我`__`在这里使用，但您可以使用其他不冲突的字符。

# bash - Unix shell 脚本在不同时间检索多个文件

> ID：12915384
> 
> 赞同：0
> 
> 时间：2012-10-16T13:05:58.277
> 
> 标签：bash, shell, unix

我有以下要求：

我有一个 java 进程，它每天将大量文件写入 unix 文件夹，但下面的文件需要使用 Unix Shell 脚本 sftp 到不同的文件夹

TestSD20121016.csv（每天下午 16:00 将文件写入 unix 文件夹） TestSP20121016.csv（每天晚上 17:00 将文件写入 unix 文件夹）

我写的脚本如下：

```
#!/bin/sh
#------------------------------------------------------------------------
# Parameters
# sftp_file_uploads.sh remoteServer functionalId
#------------------------------------------------------------------------

REMOTE_SERVER=$1
FUNCTIONAL_ID=$2
FILE_TO_UPLOAD= ls -lrt TESTSD`date "+%Y%m%d"`*.CSV  | awk '/TEST/{ f=$NF };END{ print f }'

#------------------------------------------------------------------------
# Create sftp script
#------------------------------------------------------------------------
rm -f /var/tmp/SFTP_FILE_UPLOAD
echo "lcd $3" > /var/tmp/SFTP_FILE_UPLOAD
echo "cd $5" >> /var/tmp/SFTP_FILE_UPLOAD
echo "put $FILE_TO_UPLOAD" >> /var/tmp/SFTP_FILE_UPLOAD
echo "bye" >> /var/tmp/SFTP_FILE_UPLOAD

#------------------------------------------------------------------------
# Do sftp
#------------------------------------------------------------------------
echo " Before SFTP " > /tmp/FILE_UPLOAD_LOG
/usr/bin/sftp -B /var/tmp/SFTP_FILE_UPLOAD $2@$1 1>/var/tmp/sftp.log 2>&1

result=$?
if [ $result -eq 0 ]
then
  echo "SFTP completed successfully"
else
  echo "FAILED to SFTP"
  exit 1
fi

exit 0 
```

问题是脚本能够获取文件 TestSD20121016.csv 但不能获取文件 TestSP20121016.csv，我也不知道如何编写上面的脚本来执行 sftp 第二个文件。

问候，

柴兔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T13:13:06.853

如何添加行：

```
FILE_TO_UPLOAD2= ls -lrt TESTSP`date "+%Y%m%d"`*.CSV  | awk '/TEST/{ f=$NF };END{ print f }' 
```

和线

```
echo "put $FILE_TO_UPLOAD2" >> /var/tmp/SFTP_FILE_UPLOAD 
```

我想你知道应该放在哪里对吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T13:17:56.507

如果问题是单个字符，您可以用 替换它`?`，它告诉它匹配单个字符（任何字符）：

```
FILE_TO_UPLOAD= ls -lrt TESTS?`date "+%Y%m%d"`*.CSV  | awk '/TEST/{ f=$NF };END{ print f }' 
```

# c# - 在两个按钮中调用布尔方法不起作用

> ID：12915389
> 
> 赞同：-1
> 
> 时间：2012-10-16T13:06:12.583
> 
> 标签：c#, asp.net

我有一种`bool`计算总和（数量*价格）的方法，它工作正常。当我从一个按钮调用该方法时，它工作正常。

```
protected void btnupdate_Click(object sender, EventArgs e)     
    {
        calculate_sum();
    } 
```

我还需要从不同的按钮再次调用它。所以我试着写这个：

```
if(calculate_sum())
        {
            something
        }
        else
        {
            something
        } 
```

问题在于第二个按钮它不执行该方法，它只采用在单击按钮之前计算的值`btnupdate`并且不会再次执行它。

该`aspx`页面`updatepanels`包含触发器，也许与此有关？

这是该方法的代码：

```
public bool calculate_sum()
    {

        bool is_ok = true; ;
        double totalsum = 0;
        int qty = 0; ;
        string p = "";
        for (int i = 0; i < GridView2.Rows.Count; i++)
        {
            if (GridView2.Rows[i].RowType == DataControlRowType.DataRow)
            {
                TextBox txtqty = GridView2.Rows[i].FindControl("lblquantity") as TextBox;

                 p = GridView2.Rows[i].Cells[0].Text.ToString();

                 if (Int32.TryParse(txtqty.Text, out qty))
                 {
                     if (qty > 0)
                     {
                         double pr = Convert.ToDouble(p.ToString());
                         //total per row
                         double tcost = qty * pr;
                         totalsum = totalsum + tcost;
                         GridView2.Rows[i].Cells[6].Text = Convert.ToString((tcost));

                     }
                     else
                     {
                         lblGrandTotal.Visible = true;
                         lblGrandTotal.Text = "enter only numbers greater than 0";
                         lblGrandTotal.ForeColor = System.Drawing.Color.Red;
                         is_ok = false;

                     }
                 }

                     else
                     {
                         lblGrandTotal.Visible = true;
                         lblGrandTotal.Text = "enter only numbers greater than 0";
                         lblGrandTotal.ForeColor = System.Drawing.Color.Red;
                         is_ok = false;
                     }
                 }

        }
        if (is_ok)
        {
            lblGrandTotal.ForeColor = System.Drawing.Color.Black;
            lblGrandTotal.Text = Convert.ToString((totalsum));
            return is_ok;

        }
        else
        {
            return is_ok;
        }

    } 
```

这里是aspx页面：

```
<%@ Page Title="Check out" Language="C#" MasterPageFile="~/MasterPage/MasterPage.master" AutoEventWireup="true" CodeFile="CheckOut.aspx.cs" Inherits="CheckOut" %>

<asp:Content ID="Content1" ContentPlaceHolderID="head" Runat="Server">
</asp:Content>
<asp:Content ID="Content2" ContentPlaceHolderID="ContentPlaceHolder1" Runat="Server">

    <asp:ScriptManagerProxy ID="ScriptManagerProxy1" runat="server">
    </asp:ScriptManagerProxy>

    <asp:UpdatePanel ID="UpdatePanel1" runat="server" ChildrenAsTriggers="False" 
        UpdateMode="Conditional">

    <ContentTemplate>

    <asp:HiddenField ID="hfGrandTotal" runat="server"  />
    <asp:GridView ID="GridView2" runat="server" AutoGenerateColumns="False" >

        <Columns>
        <asp:BoundField DataField="Price" HeaderText="Price" ItemStyle-CssClass="price" >

<ItemStyle CssClass="price"></ItemStyle>
            </asp:BoundField>

                         <asp:TemplateField HeaderText="ProductID" Visible="False">
                <ItemTemplate>
                    <asp:Label ID="lblID" runat="server" Text='<%# Eval("ProductID") %>'></asp:Label>
                </ItemTemplate>
            </asp:TemplateField>
             <asp:TemplateField HeaderText="ProductName">
                <ItemTemplate>
                    <asp:Label ID="lblName" runat="server" Text='<%# Eval("ProductName") %>'></asp:Label>
                </ItemTemplate>
            </asp:TemplateField>

             <asp:TemplateField HeaderText="Summary">
                <ItemTemplate>
                    <asp:Label ID="lblSum" runat="server" Text='<%# Eval("Summary") %>'></asp:Label>
                </ItemTemplate>
            </asp:TemplateField>
             <asp:TemplateField HeaderText="picPath" Visible="False">
                <ItemTemplate>
                    <asp:Label ID="lblPic" runat="server" Text='<%# Eval("picPath") %>' ></asp:Label>
                </ItemTemplate>
            </asp:TemplateField>

            <asp:TemplateField HeaderText = "quantity">
            <ItemTemplate>
                <asp:TextBox ID="lblquantity" runat="server"  >1</asp:TextBox>

            </ItemTemplate>
        </asp:TemplateField>

        <asp:TemplateField HeaderText = "Total">
            <ItemTemplate>
                <asp:Label ID="lblTotal" runat="server" ></asp:Label>
            </ItemTemplate>
        </asp:TemplateField>

        </Columns>

    </asp:GridView>
        <br />

total sum:
            <asp:Button ID="btnupdate" runat="server" Text="update quantity" 
                onclick="btnupdate_Click" ValidationGroup="panel1" />
<asp:Label ID="lblGrandTotal" runat="server" ></asp:Label>
</ContentTemplate>
        <Triggers>
            <asp:AsyncPostBackTrigger ControlID="btnupdate" EventName="Click" />
        </Triggers>
    </asp:UpdatePanel>
    <br />
    <br />
    <br />
    <br />
    <br />

    <asp:UpdatePanel ID="UpdatePanel2" runat="server" UpdateMode="Conditional">
    <ContentTemplate>

    <asp:Table ID="Table1" runat="server" CellPadding="7" CellSpacing="7" 
        CaptionAlign="Bottom" HorizontalAlign="Center" BorderStyle="Solid" BorderWidth="1" 
                BorderColor="Black" Height="305px" Width="408px">
        <asp:TableHeaderRow BorderStyle="Solid" BorderWidth="1" BorderColor="Black">
        <asp:TableCell ColumnSpan="3" BorderStyle="Solid" BorderWidth="1" BorderColor="Black">customer details</asp:TableCell>
        </asp:TableHeaderRow>

        <asp:TableRow runat="server" >

            <asp:TableCell runat="server" >  
            <asp:TextBox ID="TextBox1" runat="server" Width="150px"></asp:TextBox>
                &nbsp; &nbsp;<asp:RequiredFieldValidator ID="RequiredFieldValidator1" runat="server" ForeColor="Red" ErrorMessage="חובה" ControlToValidate="TextBox1" Text="requierd" ValidationGroup="panel2"></asp:RequiredFieldValidator>
            </asp:TableCell>

            <asp:TableCell runat="server">    
            <asp:Label ID="Label1" runat="server" Text="name"></asp:Label>
           </asp:TableCell>

        </asp:TableRow>
       <asp:TableRow ID="TableRow1" runat="server">

            <asp:TableCell ID="TableCell1" runat="server">  
            <asp:TextBox ID="TextBox4" runat="server" Width="150px" CausesValidation="True"></asp:TextBox>
            &nbsp; &nbsp;<asp:RequiredFieldValidator ID="RequiredFieldValidator2" runat="server" ForeColor="Red" ErrorMessage="חובה" ControlToValidate="TextBox4" Text="requierd" ValidationGroup="panel2"></asp:RequiredFieldValidator>
               <br /> <asp:RegularExpressionValidator ID="RegularExpressionValidator1"  runat="server" ErrorMessage="הקלד מספר טלפון" ControlToValidate="TextBox4" ForeColor="Red" ValidationExpression="^(02|03|04|08|09|050|052|054|057|074|077)\-\d{7,8}$"></asp:RegularExpressionValidator>
            </asp:TableCell>

            <asp:TableCell ID="TableCell2" runat="server">    
            <asp:Label ID="Label4" runat="server" Text="phone"></asp:Label>

           </asp:TableCell>
        </asp:TableRow>
        <asp:TableRow runat="server">

            <asp:TableCell runat="server">   

            <asp:TextBox ID="TextBox2" runat="server" Width="150px" CausesValidation="True"></asp:TextBox>
           &nbsp; &nbsp; <asp:RequiredFieldValidator ID="RequiredFieldValidator3" runat="server" ForeColor="Red"  ErrorMessage="חובה" ControlToValidate="TextBox2" Text="requierd" ValidationGroup="panel2"></asp:RequiredFieldValidator>
            </asp:TableCell>

       <asp:TableCell>
    <asp:Label ID="Label2" runat="server" Text="address"></asp:Label>
    </asp:TableCell>
        </asp:TableRow>
        <asp:TableRow runat="server">

            <asp:TableCell runat="server">
           <asp:TextBox ID="TextBox3" runat="server" Width="150px"></asp:TextBox>
           &nbsp; &nbsp;<asp:RequiredFieldValidator ID="RequiredFieldValidator4" runat="server" ForeColor="Red" ErrorMessage="חובה" ControlToValidate="TextBox3" Text="requierd" ValidationGroup="panel2"></asp:RequiredFieldValidator>
           <br />
                <asp:RangeValidator ID="RangeValidator1" runat="server" ErrorMessage="only digits" ControlToValidate="TextBox3" ForeColor="Red" MinimumValue="1000" MaximumValue="9999999999999999" ValidationGroup="panel2"></asp:RangeValidator>
            </asp:TableCell>

            <asp:TableCell runat="server">

             <asp:Label ID="Label3" runat="server" Text="number"></asp:Label>
            </asp:TableCell>
        </asp:TableRow>

        <asp:TableRow>
        <asp:TableCell ColumnSpan="3">
        <asp:Button ID="Button1" runat="server" onclick="Button1_Click" Text="pay" Width="150" ValidationGroup="panel2" />
        </asp:TableCell>
        </asp:TableRow>

        <asp:TableRow>
        <asp:TableCell ColumnSpan="3">
         <asp:Label ID="lblmessage" runat="server" Text="Label"  
        Font-Size="XX-Large" Visible="False"></asp:Label>

        </asp:TableCell>
        </asp:TableRow>
    </asp:Table>

    <asp:Button ID="btnPrint" runat="server"  Text="print" 
        onclick="btnPrint_Click" Visible="False" />

    </ContentTemplate>
        <Triggers>
            <asp:AsyncPostBackTrigger ControlID="btnPrint" EventName="Click" />
        </Triggers>
    </asp:UpdatePanel>
    </asp:Content> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T15:01:24.053

你的问题还不是很清楚...

您所指的“第二个按钮”是否命名为“Button1”？

如果是这样 - 请注意它位于不同的 UpdatePanel 中，然后是 Grid 和“更新”按钮。当第二个 UpdatePanel 被触发时（从 Button1），在网格中所做的更改（在另一个 UpdatePanel 中）不一定会连同它一起传回服务器。

我会推荐：

1.  暂时删除两个 UpdatePanel 并查看它是否如您所愿。如果是这样，您知道罪魁祸首并将 UpdatePanel 的[UpdateMode 更改](http://msdn.microsoft.com/en-us/library/system.web.ui.updatepanel.updatemode.aspx)为 Always 可能会解决您的问题。

2.  如果这不能解决您的问题，请按照@JonSkeet 在评论中的建议进行操作，并创建一个显示问题的简短演示，以便我们更好地帮助您...

# javascript - Javascript indexOf() 总是返回 -1

> ID：12915392
> 
> 赞同：1
> 
> 时间：2012-10-16T13:06:31.213
> 
> 标签：javascript

我尝试检索数组中 en 元素的索引。

这完美地工作

```
 var onCreate = function (event) {
        console.assert(markers[markerId] === undefined);

        var markerId = event.markerId;
        markers[markerId] = {};

        var marker = markers[markerId];
        // create the container object
        marker.object3d = new THREE.Object3D();
        marker.object3d.matrixAutoUpdate = false;
        scene.add(marker.object3d);

        //UPDATE ARRAY HOLDING CURRENT MARKERS
        console.log("ON CREATE");
        console.log("current detected markers: " + currentMarkers);
        var idx = currentMarkers.indexOf(markerId); // Find the index
        console.log("marker " + event.markerId + " has index: " + idx);
        if(idx==-1) // if does not exist
            currentMarkers.push(markerId); 
```

但这并不...

```
 var onDelete = function (event) {

        console.assert(markers[event.markerId] !== undefined);
        var markerId = event.markerId;
        //UPDATE ARRAY HOLDING CURRENT MARKERS
        console.log("ON DELETE");
        console.log("current detected markers: " + currentMarkers);
        var idxx = currentMarkers.indexOf(markerId); // Find the index
        console.log("marker " + markerId + " has index: " + idxx);
        if(idxx != -1) {// if DOES exist
            currentMarkers.splice(idxx, 1); //Delete
            var idxxx = currentMarkersCoverChecked.indexOf(markerId); // Find the index
            if(idxxx == -1) // if does NOT exist, so if not being checked
                checkMarkerCovered(markerId);
        }
        onDeleteRandom(markerId);
        var marker = markers[markerId];
        scene.remove(marker.object3d);
        delete markers[markerId]; 
```

看看我的控制台输出：

```
ON CREATE 
current detected markers: 2,1,4 
marker 3 has index: -1 
ON CREATE main.js:266
current detected markers: 2,1,4,3 
marker 4 has index: 2 
ON DELETE 
current detected markers: 2,1,4,3
marker 2 has index: -1 
ON CREATE 
current detected markers: 2,1,4,3 
marker 2 has index: 0 
ON DELETE 
current detected markers: 2,1,4,3 
marker 1 has index: -1 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T13:21:08.973

你检查过值的类型吗`markerId`

JavaScript Array 允许您将`Integer`类型以及`String`类型和`Object`类型插入到`Array`. 如果某个值是类型`Integer`并且如果你尝试`indexOf("stringvalue");`你可能会得到`-1 as return value`

希望这可以帮助您解决问题！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T13:09:30.907

第二个示例不起作用，因为`currentMarkersCoverChecked`未定义。

# c++ - C++ 初始化中的 *

> ID：12915395
> 
> 赞同：6
> 
> 时间：2012-10-16T13:06:52.510
> 
> 标签：c++

> **可能重复：**
> [权威 C++ 书籍指南和列表](https://stackoverflow.com/questions/388242/the-definitive-c-book-guide-and-list)

初始化类时*是什么意思？通常在 AS3 中我会这样做：

```
MyClass myClass = new MyClass 
```

但我在 c++ 中看到过这个

```
 MyClass *myClass = new MyClass 
```

星星有什么用？我见过它有时使用而不是其他。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-16T13:09:31.697

C++ 中的星号有很多含义，具体取决于它在程序中的位置。在这个特定的实例中，它将 的含义修改为指向的实例的`myClass`指针*，*`MyClass`而不是 的实例`MyClass`。

两者的区别在于，实例的生命周期在超出范围时结束，而您通过指针分配和引用的实例即使在指针超出范围后仍然有效。

有这样的声明是有效的：

```
MyClass myClass; // no "new" 
```

在这种情况下，没有必要使用`new`，但实例的生命周期与变量的范围相关联`myClass`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-16T13:08:50.513

星号代表`pointer`. 指针是一个内存地址。当您编写 时`MyClass *myClass`，您会创建一个指向创建新 MyClass 的位范围开头的指针。

用 来创建一个对象`new`，你就要对它的生命周期负责。当您不再需要它们时，您将需要将其删除，而`MyClass myClass;`在退出创建它的范围时，创建将被销毁。即使以这种方式编写，您仍然可以使用`&`运算符访问 myClass 内存地址。

如果您需要更多解释，请尝试获取其中一[本书](https://stackoverflow.com/questions/388242/the-definitive-c-book-guide-and-list)。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-16T13:09:12.427

它被称为指针。如果您使用的是与 C++11 兼容的编译器，则可以执行以下操作：

`auto myClass = std::make_shared<MyClass>();`

如果您使用的是“原始”指针，则需要在使用完内存后手动删除它，使用`shared_ptr`，这不是必需的。

# iphone - 在 iPhone 中使用 UIPanGesture 旋转 UIView 的框架增加减少

> ID：12915397
> 
> 赞同：0
> 
> 时间：2012-10-16T13:06:59.593
> 
> 标签：iphone, objective-c, ios, uigesturerecognizer, uipangesturerecognizer

我创建了一个 UIView 并应用 UIPanGestureRecognizer 用一根手指旋转，并用一根手指增加和减少它的框架。

*   旋转视图放在 UIView 的左下角。
*   调整 UIView 右下角的视图大小。

让我写下一些代码行。

```
//Rotate Apply with Pan Gesture 
    panRotateGesture = [[UIPanGestureRecognizer alloc] initWithTarget:self action:@selector(rotateViewPanGesture:)];
    [rotateView addGestureRecognizer:panRotateGesture];

    //Resize View Apply with Pan Gesture 
    panResizeGesture = [[UIPanGestureRecognizer alloc] initWithTarget:self action:@selector(resizeTranslate:)];
    [resizeView addGestureRecognizer:panResizeGesture];

    [panRotateGesture requireGestureRecognizerToFail:panResizeGesture]; 
```

这是用一根手指用 UIPanGesture 调整视图大小的方法。

```
-(void)resizeTranslate:(UIPanGestureRecognizer *)recognizer
{
    if ([recognizer state]== UIGestureRecognizerStateBegan) 
    {
        prevPoint = [recognizer locationInView:self.superview];
        [self setNeedsDisplay];
    }
    else if ([recognizer state] == UIGestureRecognizerStateChanged)
    {
        if (self.frame.size.width < kFixW)
        {
            self.frame = CGRectMake(self.frame.origin.x, self.frame.origin.y, kFixW, self.frame.size.height);
        }

        if(self.frame.size.height < kFixH)
        {
            self.frame = CGRectMake(self.frame.origin.x, self.frame.origin.y, self.frame.size.width, kFixH);
        }

        CGPoint point = [recognizer locationInView:self.superview];
        float wChange = 0.0, hChange = 0.0;

        wChange = (point.x - prevPoint.x); //Slow down increment
        hChange = (point.y - prevPoint.y); //Slow down increment 

        self.frame = CGRectMake(self.frame.origin.x, self.frame.origin.y, self.frame.size.width + (wChange), self.frame.size.height + (hChange));
        NSLog(@"self.frame : %@",NSStringFromCGRect(self.frame));

        prevPoint = [recognizer locationInView:self.superview];

        [self setNeedsDisplay];
    }
    else if ([recognizer state] == UIGestureRecognizerStateEnded)
    {

        prevPoint = [recognizer locationInView:self.superview];
        [self setNeedsDisplay];
    }
} 
```

在这里，如果用一根手指用 UIPanGesture 旋转 UIView

```
-(void)rotateViewPanGesture:(UIPanGestureRecognizer *)recognizer
{
    if ([recognizer state] == UIGestureRecognizerStateBegan) 
    {
        deltaAngle = atan2([recognizer locationInView:self].y-self.center.y, [recognizer locationInView:self].x-self.center.x);
        startTransform = self.transform;
    }
    else if ([recognizer state] == UIGestureRecognizerStateChanged) 
    {
        float ang = atan2([recognizer locationInView:self.superview].y - self.center.y, [recognizer locationInView:self.superview].x - self.center.x);
        float angleDiff = deltaAngle - ang;
        self.transform = CGAffineTransformMakeRotation(-angleDiff);
        [self setNeedsDisplay];
    }
    else if ([recognizer state] == UIGestureRecognizerStateEnded)
    {
        float ang = atan2([recognizer locationInView:self.superview].y - self.center.y, [recognizer locationInView:self.superview].x - self.center.x);
        deltaAngle = atan2([recognizer locationInView:self].y-self.center.y, [recognizer locationInView:self].x-self.center.x);
        startTransform = self.transform;
        [self setNeedsDisplay];
    }
} 
```

现在的问题是，调整大小和旋转手势都可以正常工作。

**当我使用 panResizeGesture 调整视图大小时，它可以正常工作，但是如果我应用一次 panRotateGesture 并且想要应用 panResizeGesture 它会超出屏幕并且无法正常工作。**

请有任何想法来解决这个问题。

非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T10:34:15.920

[文档](https://developer.apple.com/library/ios/#documentation/UIKit/Reference/UIView_Class/UIView/UIView.html#//apple_ref/occ/instp/UIView/frame)清楚地说：

**如果变换属性不是恒等变换，则此属性的值未定义，因此应被忽略。

如果 transform 属性包含非恒等变换，则 frame 属性的值未定义且不应修改。在这种情况下，您可以使用 center 属性重新定位视图并使用 bounds 属性调整大小。**

所以，只需在 rotateViewPanGesture 方法中将 self.frame 更改为 self.bounds

例如

```
 self.frame = CGRectMake(self.frame.origin.x, self.frame.origin.y, self.frame.size.width, kFixH); 
```

至：

```
 self.bounds = CGRectMake(self.bounds.origin.x, self.bounds.origin.y, self.bounds.size.width, kFixH); 
```

你的代码会很好地工作。

**更新**

我附上了使用您的代码的示例项目。[您可以使用此](https://www.dropbox.com/s/yb0vzy0wao52bgt/SampeResizeView.zip)代码

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T15:14:36.987

我知道这有点晚了，所以也许您已经弄清楚了，但是您的问题在于 locationInView: 部分代码。当您真的想要计算超级视图的 locationInView 时，您正在尝试计算您尝试旋转的实际视图的 locationInView。

```
-(void)rotateViewPanGesture:(UIPanGestureRecognizer *)recognizer{
if ([recognizer state] == UIGestureRecognizerStateBegan) 
{
    deltaAngle = atan2([recognizer locationInView:self.superview].y-self.center.y, [recognizer locationInView:self.superview].x-self.center.x); //here change it to self.superview
    startTransform = self.transform;
}
else if ([recognizer state] == UIGestureRecognizerStateChanged) 
{
    float ang = atan2([recognizer locationInView:self.superview].y - self.center.y, [recognizer locationInView:self.superview].x - self.center.x);
    float angleDiff = deltaAngle - ang;
    self.transform = CGAffineTransformMakeRotation(-angleDiff);
    [self setNeedsDisplay];
}
else if ([recognizer state] == UIGestureRecognizerStateEnded)
{
    float ang = atan2([recognizer locationInView:self.superview].y - self.center.y, [recognizer locationInView:self.superview].x - self.center.x);
    deltaAngle = atan2([recognizer locationInView:self.superview].y-self.center.y, [recognizer locationInView:self.superview].x-self.center.x); //here change it to locationInView:self.superview
    startTransform = self.transform;
    [self setNeedsDisplay];
}} 
```

# javascript - LimeJS goog.event.listen 没有对孩子开火

> ID：12915399
> 
> 赞同：1
> 
> 时间：2012-10-16T13:07:11.133
> 
> 标签：javascript, html, limejs

我对这个活动有一些问题。我最近才开始开发 HTML5 游戏，并且正在使用 LimeJS。当我将以下代码设置为在现场或 flayer 上侦听时，以下代码不会触发警报，它只会响应 Game. 是我做事的顺序有问题还是其他导致事件不触发的事情？

感谢您的阅读。

```
//set main namespace
goog.provide('rtstest');

//get requirements
goog.require('lime.Director');
goog.require('lime.Scene');
goog.require('lime.Layer');
goog.require('lime.RoundedRect');

// entrypoint
rtstest.start = function(){
var director = new lime.Director(document.body,1024,768).setDisplayFPS(false),
Game = new lime.Scene(),

menulayer = new lime.Layer().setAnchorPoint([0,0]).setPosition(0,668),
menubg = new     lime.RoundedRect().setSize(1024,200).setPosition(512,668).setFill('assets/menubg.png');

var field = new lime.Sprite().setSize(1024,568).setAnchorPoint([0,0]).setFill('assets/field1.jpg');
var flayer = new lime.Layer().setAnchorPoint([0,0]).setPosition(0,0);

goog.events.listen(flayer,['mousedown'],function(e){

    alert('derp');

});

menulayer.appendChild(menubg);
flayer.appendChild(field);

Game.appendChild(flayer);
Game.appendChild(menulayer);

director.replaceScene(Game);

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T13:24:22.793

由 LimeJS 板上的某个人修复：

我的代码中的问题是将数组作为参数的 setAnchorPoint 调用。setAnchorPoint 允许 2 个数字或一个 goog.math.Vec2 对象。图层没有锚点（因为它们没有高度和高度）。

所以应该是：menulayer = newlime.Layer().setPosition(0,668),

和 var field = newlime.Sprite().setSize(1024,568).setAnchorPoint(0,0).setFill('assets/field1.jpg');

# ruby-on-rails - 这个 Rails 错误（错误数量的参数）到底告诉我什么？

> ID：12915400
> 
> 赞同：1
> 
> 时间：2012-10-16T13:07:11.480
> 
> 标签：ruby-on-rails, debugging

使用 RSpec 运行某些测试时，我收到此错误（多次）：

```
1) User Pages edit with valid information 
     Failure/Error: visit edit_user_path(user)
     ActionView::Template::Error:
       wrong number of arguments (0 for 1)
     # ./app/views/users/edit.html.haml:15:in `block in _app_views_users_edit_html_haml__2466546393595631499_70225077026800'
     # ./app/views/users/edit.html.haml:6:in `_app_views_users_edit_html_haml__2466546393595631499_70225077026800'
     # ./spec/requests/user_pages_spec.rb:54:in `block (3 levels) in <top (required)>' 
```

我不熟悉阅读 Rails 错误消息；这是否告诉我使用错误数量的参数调用的方法在 edit.html.haml 或 user_pages_spec.rb 中？是说使用 0 个参数调用 edit_user_path 吗？

编辑以添加我的代码：

编辑.html.haml：

```
- provide(:title, "Edit user")
%h1 Update your profile

.row
    .span6.offset3
        = form_for(@user) do |f|

            = f.label :name
            = f.text_field :name

            = f.label :email
            = f.text_field :email

            = f.label :password
            = f.password_field

            = f.label :password_confirmation, "Confirm Password"
            = f.password_field :password_confirmation

            = f.submit "Save changes", class: "btn btn-large btn-primary" 
```

user_pages_spec.rb 的相关部分：

```
describe "edit" do
        let(:user) { FactoryGirl.create(:user) }
        before do
            sign_in user
            visit edit_user_path(user)
        end

        describe "page" do
            it { should have_selector('h1',    text: "Update your profile") }
            it { should have_selector('title', text: "Edit user") }
        end

        describe "with invalid information" do
            before { click_button "Save changes" }

            it { should have_content('error') }
        end

        describe "with valid information" do
            let(:new_name) { "New Name" }
            let(:new_email) { "new@example.com" }
            before do
                fill_in "Name",             with: new_name
                fill_in "Email",            with: new_email
                fill_in "Password",         with: user.password
                fill_in "Confirm Password", with: user.password
                click_button "Save changes"
            end

            it { should have_selector('title', text: new_name) }
            it { should have_success_message('') }
            it { should have_link('Sign out', href: signout_path) }
            specify { user.reload.name.should == new_name }
            specify { user.reload.email.should == new_email }
        end 
    end 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-16T13:18:43.507

基本上，错误数量的参数意味着对于该方法，它认为您应该传递一定数量的变量，并且它接收的数量错误。

在这种情况下，它期望传入 1 个变量，但它没有接收到任何变量。

从它的外观来看，您应该查看您的 edit.html.haml 文件的第 15 行，我猜这里是：

```
= f.label :password
= f.password_field 
```

看起来您缺少 :password - 传递实际变量。

所以改成：

```
= f.password_field :password 
```

你应该很好。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-16T13:18:21.417

所以堆栈跟踪的顶部是最后一个调用的方法，它从那里沿着链向下推进。这表明错误在编辑文件中。如果您粘贴了整个编辑文件，看起来 15 缺少密码字段的参数。应该：

```
= f.password_field :password 
```

# javascript - 排序js对象

> ID：12915408
> 
> 赞同：0
> 
> 时间：2012-10-16T13:07:26.103
> 
> 标签：javascript, object

我有一个看起来像这样的对象：

```
[
Object {url="123456", name="john", count="0", url="name/sine"},
Object {url="1668", name="ben", count="0", url="name/dcdc"},
Object {url="98465", name="mike", count="0", url="name/ssd"},
] 
```

我需要按名称对对象进行排序，但无法弄清楚。

我找到了以下代码片段，它对具有 2 个部分的对象进行排序：

```
namesObject.sort(function(a, b){
    if(a.value > b.value){
        return 1;
    }
    else if(a.value < b.value){
        return -1;
    }
    return 0;
}); 
```

但是我怎么能把它扩展到一个有四个部分的对象呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-16T13:08:27.917

你可以像这样轻松地做到这一点......

```
arr.sort(function(a, b) { return a.name.localeCompare(b.name); }); 
```

# inheritance - 如何在 TypeScript 中扩展宿主对象（例如错误）

> ID：12915412
> 
> 赞同：45
> 
> 时间：2012-10-16T13:07:33.167
> 
> 标签：inheritance, typescript

我想将主机对象扩展`Error`到自定义`UploadError`类。以下示例在我编译时失败：

```
class UploadError extends Error {
    constructor(message: string, private code: number) {
        super(message);
    }

    getCode(): number {
        return this.code;
    }
} 
```

当我运行 TypeScript 编译器时`tsc`，出现以下错误：

```
UploadError.ts(1,0): A export class may only extend other classes, Error is an interface. 
```

它似乎`Error`被定义为一个接口。如果有人知道实现的名称是什么，那会让我非常高兴:-)

# 更新：我想使用 Typescripts 继承，而不是像我目前用来解决这个问题的原型继承：

```
function UploadError (message: string, code: number) {
    this.message = message;
    this.code = code;
}

UploadError.prototype = new Error();

UploadError.prototype.constructor = UploadError;

UploadError.prototype.getCode = (): number => {
    return this.code;
} 
```

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2014-03-26T15:39:53.130

### TypeScript 1.6 更新：

现在可以直接从`Error`类扩展，我原始答案中的代码仍然有效，但不再需要`export declare class Error`.

### 原答案：

这里的大多数答案都不符合我的要求。自 0.9.5 以来，最初接受的答案不再编译，出现重复标识符异常。而且它们都没有真正的堆栈跟踪（JavaScript 问题，而不是 TypeScript）。

对我来说，更优雅的解决方案是：

```
module YourModule {
    export declare class Error {
        public name: string;
        public message: string;
        public stack: string;
        constructor(message?: string);
    }

    export class Exception extends Error {

        constructor(public message: string) {
            super(message);
            this.name = 'Exception';
            this.message = message;
            this.stack = (<any>new Error()).stack;
        }
        toString() {
            return this.name + ': ' + this.message;
        }
    }
} 
```

你可以用它做什么：

*   `new Exception("msg") instanceof Error == true`
*   `class SpecificException extends Exception`
*   `catch (e) { console.log(e.stack); }`

**我发现的唯一限制是您必须在模块中声明它，并且不能将它们设为全局。**对我来说这不是问题，因为我认为模块有助于结构化，并且它们存在于我制作的任何应用程序中。

您可以进行的一项改进是从堆栈跟踪中删除您的自定义代码，我个人认为堆栈跟踪仅适用于开发人员的眼睛，他们知道在哪里看，所以对我来说没什么大不了的。

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2016-12-14T14:08:12.923

注意 Typescript 2.1 的新变化 -[链接](https://github.com/Microsoft/TypeScript/wiki/Breaking-Changes#extending-built-ins-like-error-array-and-map-may-no-longer-work)

因此，您可以扩展 Error 类，但作为建议，您需要在任何 super(...) 调用后立即手动调整原型：

```
class FooError extends Error {
    constructor(m: string) {
        super(m);

        // Set the prototype explicitly.
        Object.setPrototypeOf(this, FooError.prototype);
    }

    sayHello() {
        return "hello " + this.message;
    }
} 
```

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2012-10-16T22:49:23.433

# 更新

TypeScript 1.6 带来了扩展原生类型的能力，所以当它落地时，你应该能够使用

```
class UploadError extends Error {
    //... calls to super and all that jazz
} 
```

# 原始答案

您可以在 TypeScript 中实现错误接口，但这不会让您访问，`super`因为您没有使用继承：

```
class UploadError implements Error {
    public name = "CustomError";

    constructor (public message: string, private code: number){

    }
}

throw new UploadError ("Something went wrong!", 123); 
```

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2012-11-16T03:58:14.860

我发现以下方法有效：

```
declare class ErrorClass implements Error {
    public name: string;
    public message: string;
    constructor(message?: string);
}
var ErrorClass = Error;

class MyError extends ErrorClass {
    public name = "MyError";
    constructor (public message?: string) {
        super(message);
    }
} 
```

生成的脚本如下所示：

```
var ErrorClass = Error;
var MyError = (function (_super) {
    __extends(MyError, _super);
    function MyError(message) {
        _super.call(this, message);
        this.message = message;
        this.name = "MyError";
    }
    return MyError;
})(ErrorClass); 
```

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2015-06-24T22:50:20.703

现在可以扩展`Error`类版本 1.6。请参阅拉取请求*允许类中的表达式扩展子句* [https://github.com/Microsoft/TypeScript/pull/3516](https://github.com/Microsoft/TypeScript/pull/3516)和问题*不能扩展内置类型* [https://github.com/Microsoft/TypeScript/issues/1168](https://github.com/Microsoft/TypeScript/issues/1168)

请注意，它`tsc`不会再抱怨了，但您的编辑器/IDE 会一直抱怨到它更新为止。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2017-05-23T09:44:17.823

[扩展接口是此处](https://github.com/Microsoft/TypeScript-wiki/blob/master/Breaking-Changes.md#extending-built-ins-like-error-array-and-map-may-no-longer-work)记录的一项重大更改。

解决方案：在构造函数中手动更改原型。

```
class MyError extends Error {
    constructor(m: string) {
        super(m);

        // Set the prototype explicitly. If you skip this, iinstanceof will not work :-(
        (<any>this).__proto__ = MyError.prototype;
    }
}

console.log("Instance of works now: "+(new MyError("my error") instanceof MyError)); 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-11-06T15:28:53.083

我知道答案已被接受，并且解决方案绝对令人印象深刻，但我真的不希望我的项目中出现这么多代码只是为了例外。

直到 TypeScript 以某种方式在语言级别获得适当的异常，并且 Error 扩展起来非常麻烦，我现在使用以下非常简单的解决方案：

```
class MyError {
    constructor(error: Error) {
        error.name = this['constructor'].name;
        error['type'] = this; // for type-checking in exception-handlers

        return error;
    }
}

throw new MyError(new Error('aw snap!')); 
```

现在，我的错误类型是真正的类——你可以扩展它们，当抛出未处理的错误时，你会在控制台上看到正确的类名；但我的 Error 对象不是这些类的实例：构造函数*不*返回 MyError 的实例，它只是将它自己的名称应用于您传递给它的 Error 实例。

这也为 Error 在您构造它的点而不是在您抛出它的点产生堆栈跟踪的问题提供了一个简单的解决方法 - 因为构造函数签名会强制您构造一个“真实的”错误实例.

如果您需要检查异常处理程序中的异常类型，请获取该`['type']`属性并使用以下方法进行比较`instanceof`：

```
try {
    // something throws new MyError(new Error('aw snap!'))
} catch (error) {
    console.log(error['type'] instanceof MyError); // => true
} 
```

这并不理想，但它很简单并且有效。

请注意，如果您扩展 MyError，则每次都需要实现构造函数并添加`return super(...)`，因为 TypeScript 生成的默认构造函数不期望使用返回语句的构造函数。它确实允许他们。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2014-02-18T14:33:36.247

Ron Buckton 的解决方案在使用 TypeScript 0.8.3 时对我有用，但它不能在 TypeScript 0.9.5 中编译。TypeScript 生成编译错误：**重复标识符“ErrorClass”。**我已更改代码以使其再次工作：

```
declare class ErrorClass {
    public name: string;
    public message: string;
    constructor(message?: string);
}

// Move following line to a JavaScript
// (not TypeScript) file. 
// var ErrorClass = Error;

class MyError extends ErrorClass {
    public name = "MyError";
    constructor (public message?: string) {
        super(message);
    }
} 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2015-02-26T09:11:47.700

我找到了解决方案。不好，但工作得很好......使用 eval() JS 函数来忽略 TypeScript 检查。

```
declare class ErrorClass implements Error {
    public name: string;
    public message: string;
    constructor(message?: string);
}
eval('ErrorClass = Error');

export = Exception;
class Exception extends ErrorClass implements Error { ... } 
```

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2016-07-30T05:04:18.223

我使用的是 TypeScript 1.8，但这可能适用于早期版本：

```
class MyError extends Error {

  static name: string;

  constructor(public message?: string, public extra?: number) {
    super(message);
    Error.captureStackTrace(this, MyError);
    this.name = (this as any).constructor.name; // OR (<any>this).constructor.name;
  }

}; 
```

请注意，您必须`node`安装类型才能使用`Error.captureStackTrace`.

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2012-10-16T13:13:50.797

您可以使用原型添加功能和属性：

```
interface Error {
   code: number;
   getCode(): number;
}   

Error.prototype.code = 1;

Error.prototype.getCode = function () {
    return this.code;
}  
var myError = new Error();
console.log("Code: " + myError.getCode()); 
```

运行时`node.js`，会产生以下输出：

```
Code: 1 
```

错误定义`lib.d.ts`如下：

```
interface Error {
    name: string;
    message: string;
}

declare var Error: {
    new (message?: string): Error;
    (message?: string): Error;
    prototype: Error;
} 
```

除此之外，我只看到定义您自己的扩展接口的明显解决方案`Error`：

```
interface MyErrorInterface extends Error {       
    code: number;       
    getCode(): number;    
}       
class MyError implements MyErrorInterface {      
    code : number;      
    name : string;      
    message : string;
    constructor(code: number, name? : string, message? : string) {
        this.code = code;
        this.name = name;
        this.message = message;
    }   
    getCode(): number {
        return this.code;
    }   
}   

var myError = new MyError(1);
console.log("Code: " + myError.getCode()); 
```

# php - 来自 Ajax/POST 请求的 responseXML 仅在 Chrome 上为空

> ID：12915413
> 
> 赞同：0
> 
> 时间：2012-10-16T13:07:39.857
> 
> 标签：php, javascript, xml, ajax, google-chrome

我在开发“简单”javascript 应用程序时遇到了一种奇怪的行为。函数通过经典的 Ajax/POST 方法向 .php 页面发送带有一些参数的请求。

```
function sendRequest(params, doAsync, onSending, onDone)
{
var xmlhttp;

if (window.XMLHttpRequest) { // code for IE7+, Firefox, Chrome, Opera, Safari
    xmlhttp = new XMLHttpRequest();
} else { // code for IE6, IE5
    xmlhttp = new ActiveXObject("Microsoft.XMLHTTP");
}

xmlhttp.onreadystatechange = function() {
    if (xmlhttp.readyState < 4) {
        if(typeof onSending == "function") onSending();
    }
    else if (xmlhttp.readyState == 4 && xmlhttp.status == 200) {
        if(typeof onDone == "function") {
            var resultCode = xmlhttp.responseXML.documentElement.getAttribute("result");
            var content = xmlhttp.responseXML.documentElement.childNodes;
            onDone(resultCode, content);
        }
    }
}

xmlhttp.open("POST", "mypage.php", doAsync);
xmlhttp.setRequestHeader("Content-type", "application/x-www-form-urlencoded; charset=UTF-8");
xmlhttp.setRequestHeader("Content-length", params.length);
xmlhttp.setRequestHeader("Connection", "close");
xmlhttp.send(params); 
```

php 页面对其进行处理并以 XML 形式返回一个简单的结果，如下所示：

```
<?xml version="1.0" encoding="utf-8"?>
<MYreply result="0"/> 
```

嗯......这个方法在 IE 和 Firefox 下工作正常，但在 Chrome 上却不行，上面写着“无法读取 null 的属性 'documentElement'”（=> responseXML 为 null）。

我读到`setRequestHeader`Chrome 并不完全支持这些功能（请参阅[WebKit "Refused to set unsafe header 'content-length'"](https://stackoverflow.com/questions/2623963/webkit-refused-to-set-unsafe-header-content-length)）。事实上，Chrome 在执行时会出错，但删除这些行会导致应用程序在 IE 和 Firefox 下也失败。

那么......发出 Ajax/POST 请求并获得相关 XML 响应的交叉兼容方式是什么？

PS：我不想使用 jQuery 库或其他外部库；）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T10:46:34.057

使用以下。

```
var parent = responseXml.getElementsByTagName("MYreply");
var resultvalue = parent[0].getAttribute('result'); 
```

# arrays - 保存 'grep | 的多行输出 切'到一个变量

> ID：12915414
> 
> 赞同：1
> 
> 时间：2012-10-16T13:07:41.340
> 
> 标签：arrays, bash, variables, grep, cut

我是新来的，我会尽力解释我的问题:)

我想编写一个备份脚本来保存`lv`KVM 使用的所有 '。

操作系统：Ubuntu 服务器 x64 12.04

重击 4.2.24

XML文件内容：

```
<source file='/dev/vg1/lv1'/>
<source file='/dev/vg1/lv2'/> 
```

我的 grep/cut 命令

```
grep "<source file='.*.'/>" /backup/$SRCNAME/$DATUM/$SRCNAME.xml | cut -f2 -d"'" | cut -f4 -d"/" 
```

这输出

```
lv1
lv2 
```

我如何让它对每个输出做一些事情 - 将输出存储在数组中是最好的方式吗？

我已经搜索了 2 天的答案:( 我尝试了一些循环和管道，但没有任何效果，因为我的 grep 命令太具体了：/

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-16T13:13:48.320

要将其保存到数组中：

```
array=( $(grep "<source file='.*.'/>" /backup/$SRCNAME/$DATUM/$SRCNAME.xml | cut -f2 -d"'" | cut -f4 -d"/") 
```

您也可以将其通过管道传输到循环中：

```
grep "<source file='.*.'/>" /backup/$SRCNAME/$DATUM/$SRCNAME.xml | cut -f2 -d"'" | cut -f4 -d"/" | while read lv; do
    echo "$lv"
done 
```

但是请注意，由于管道的原因，循环可能会在子 shell 中运行，因此对变量的更改不会传播回父 shell。

希望这会有所帮助=)

# vba - 如何为 VBA 中的单元格编写模块化复制子程序？

> ID：12915415
> 
> 赞同：1
> 
> 时间：2012-10-16T13:07:42.643
> 
> 标签：vba, excel

我需要能够编写一个复制子例程，它将读取输入工作表名称和输入单元格，并将这些数据复制到特定的输出表和输出单元格。该子程序必须模块化，因为它将在多个工作表中使用。它只会将数据从输入表复制到输出表。这是我写的一个，但它不起作用。

```
Public Sub Copy_Input_Data_To_Output_Data( _
 ByVal pv_str_input_worksheet_name As String, _
 ByVal pv_str_output_worksheet_name As String, _
 ByVal pv_str_input_cell_range As String, _
 ByVal pv_str_output_cell_range As String, _
 ByRef pr_str_error_message As String)

 Worksheets(pv_str_input_worksheet_name).Range(pv_str_input_cell_range).Value  = _
 Worksheets(pv_str_output_worksheet_name).Range(pv_str_output_cell_range).Value
End Sub 
```

这是应用于输入表的子例程的代码。

```
Call Copy_Input_Data_To_Output_Data( _
 pv_str_in… _
 pv_str_output_worksheet_name:="Sheet2", _
 pv_str_input_cell_range:="B13:B17", _
 pv_str_output_cell_range:=""B17,B20,B34,B18,B21", _
 pr_str_error_message:=str_error_message) 
```

如您所见，此代码正在复制输入单元格的范围，并且数据将转到另一张表中的特定输出单元格。请帮助我会非常喜欢它！:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T15:53:30.227

试试这个代码。它将连续范围粘贴到/从非连续范围粘贴，反之亦然。您可能可以将它增强到足够智能以检测它是否是两个相同大小的连续范围，因此它不会不必要地循环。

我还改写了代码以简化可读性。

```
Option Explicit

Sub RunIt()

Dim mySheet As Worksheet, yourSheet As Sheet1
Dim myRange As Range, yourRange As Range

Set mySheet = Sheets("mySheet")
Set yourSheet = Sheets("yourSheet")
Set myRange = mySheet.Range("A1:A3")
Set yourRange = yourSheet.Range("A6,B7,C8")

CopyCells mySheet, yourSheet, myRange, yourRange

End Sub

Sub CopyCells(wksIn As Worksheet, wksOut As Worksheet, rngIn As Range, rngOut As Range)

If rngIn.Cells.Count <> rngOut.Cells.Count Then

    MsgBox "Ranges are not equal. Please try again."
    Exit Sub

End If

Dim cel As Range, i As Integer, arrOut() As String
arrOut() = Split(rngOut.Address, ",")

i = 0

For Each cel In wksIn.Range(rngIn.Address)

    wksOut.Range(arrOut(i)).Value = cel.Value

    i = i + 1

Next

End Sub 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T13:37:36.780

试试对象的`Copy`方法`Range`。如下所示，前提是您的范围没问题 - 为了`Range`便于阅读，它们被复制到对象中：

```
Dim oRangeIn as Range
Dim oRangeOut as Range

Set oRangeIn = Worksheets(pv_str_input_worksheet_name).Range(pv_str_input_cell_range)
Set oRangeOut = Worksheets(pv_str_output_worksheet_name).Range(pv_str_output_cell_range)

oRangeIn.Copy oRangeOut

Set oRangeIn = Nothing
Set oRangeOut = Nothing 
```

如果您更改调用 sub 的语句，它将起作用 - 但可能与预期不同：

```
Call Copy_Input_Data_To_Output_Data( _
    "Sheet1", _
    "Sheet2", _
    "B13:B17", _
    "B17,B20,B34,B18,B21", _
    "") 
```

# joomla - joomla 1.5 中的美德玛特实现

> ID：12915416
> 
> 赞同：0
> 
> 时间：2012-10-16T13:07:44.470
> 
> 标签：joomla, virtuemart

我有一个查询。我已经为 joomla 1.5 安装了 meadowmart 组件。现在，如果在我的网站中，库存不可用，那么是否可以重定向到可以使用该特定产品的其他电子商务网站？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T18:36:03.627

我认为本机美德玛特组件不会允许它。据我所知，mercurialmart 组件有一些选项，例如如果没有库存，则禁用立即购买按钮。但我没有看到你要求的这样一个选项。

但是，如果您真的想这样做，您可以通过为 mercurialmart 和产品页面创建另一个主题来实现，您可以检查是否有可用的库存。如果它不可用，那么您可以将您的页面重定向到您想要的任何位置。

如我错了请纠正我。

谢谢你。

# javascript - 在 IFrame 窗口中调用 JS 函数

> ID：12915419
> 
> 赞同：1
> 
> 时间：2012-10-16T13:07:57.997
> 
> 标签：javascript, function, iframe

我有一个 JS 函数，有时我想在主窗口的上下文中调用它，有时在客户端窗口中调用它。类似于以下内容：

```
var f = function() { alert(window.location); };

f(); // should show the location of the parent frame

// DOESN'T WORK, but is intended to show the location of the first IFrame
f.call(window.frames[0]); 
```

谷歌搜索这主要向我展示了如何调用在子框架中*定义的函数。*但是，我想采用在父框架中定义的函数并在子框架中*执行它。*而且，为了消除显而易见的问题，向`window`函数添加参数不是一个可行的选择。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T13:16:38.920

如果要执行在父窗口中但在窗口上下文中定义的函数，可以使用[apply](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Function/apply)：

```
top.someFunction.apply(window); 
```

这两个窗口必须在同一个域中才能正常工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T13:10:15.770

如果您正在调用存在于父页面的全局范围内的函数，请替换`window`为。`top`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-05-30T18:15:04.943

您是否尝试过以下方法：

```
// reference to window in iframe with id or name 'myIframe'
var win = window.frames['myIframe'];

// invoke function in win
win.getEvents(); 
```

# ios - 带有发布权限回调的 Facebook iOS 3.1 sdk 登录

> ID：12915420
> 
> 赞同：16
> 
> 时间：2012-10-16T13:07:58.080
> 
> 标签：ios, facebook, login, sdk, permissions

我在使用 facebook 3.1 ios sdk 中的发布权限登录时遇到问题。

我的应用程序有一个共享视频的按钮，当用户单击它时，我想添加基本 + 发布权限。据我了解，我必须打两个电话-

1.  `openActiveSessionWithReadPermissions`， 接着
2.  `reauthorizeWithPublishPermissions`

这是我现在使用的代码：

```
//Opens a Facebook session and optionally shows the login UX.
- (void)openSessionForReadPermissions
{
    [FBSession openActiveSessionWithReadPermissions:nil
                                       allowLoginUI:YES
                                  completionHandler:
     ^(FBSession *session,
       FBSessionState state, NSError *error) {

         //this is called even from the reauthorizeWithPublishPermissions
         if (state == FBSessionStateOpen && !error)
         {
             [self openSessionForPublishPermissions];
         }
         else if (state == FBSessionStateClosedLoginFailed)
         {
             [FBSession.activeSession closeAndClearTokenInformation];

             [[NSNotificationCenter defaultCenter] postNotificationName:FBLoginErrorNotification object:session];
         }
     }];
}

-(void)openSessionForPublishPermissions
{    
    NSArray* permissions = [NSArray arrayWithObject:@"publish_stream"];

    [[FBSession activeSession] reauthorizeWithPublishPermissions:permissions
                                                 defaultAudience:FBSessionDefaultAudienceFriends
                                               completionHandler:
     ^(FBSession *session, NSError *error)
     {
         if (!error)
         {
             [[NSNotificationCenter defaultCenter]
              postNotificationName:FBLoginSuccessNotification
              object:session];
         }
         else
         {
             [[NSNotificationCenter defaultCenter]
              postNotificationName:FBLoginErrorNotification
              object:session];
         }
     }];
} 
```

我看到 openSessionForReadPermissions 中的块被调用了两次（一次使用 FBSessionStateOpen，一次使用 openSessionForPublishPermissions 调用中的 FBSessionStateOpenTokenExtended），并且在第一次尝试登录应用程序时收到 ErrorReauthorizeFailedReasonUserCancelled（如果 O 之前删除了所有应用程序权限）。

实现此登录的正确方法是什么？该应用程序不需要 Facebook 登录，除了这一功能，因此登录过程应该在同一个按钮按下。

谢谢！

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-10-20T21:54:45.840

我遇到了同样的问题。我找到的解决方案是将调用包装`[self openSessionForPublishPermissions];`在 dispatch_async 块中。

例子：

```
dispatch_async(dispatch_get_current_queue(), ^{
    [self openSessionForPublishPermissions];
}); 
```

原因是对 reauthorize.. 的调用需要在调用 openActiveSession.. 的事件循环之后。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T20:22:05.007

这是否有可能是命中断点的超时？遇到此错误一次，但在禁用断点运行后没有再次出现。

# python - aws dynamodb：写入过程冻结。如何确定 DDB/表的精确状态？

> ID：12915424
> 
> 赞同：0
> 
> 时间：2012-10-16T13:08:07.470
> 
> 标签：python, freeze, amazon-dynamodb

我有一个将大量项目写入 DynamoDB 表的 python 进程。我只是注意到它似乎被冻结了。该过程逐行读取大型文本文件，并将每行的新项目放入表中。它似乎已经冻结在某条线上，并且在没有产生任何异常的情况下没有前进。所以我需要弄清楚问题是否出在与 DynamoDB 或其他地方的交互中。要检查前者，我怎样才能弄清楚桌子发生了什么？我正在查看“监控”下的管理控制台。它在读取容量下显示了一些活动（因为我进行了一些手动查询，试图弄清楚什么已经进入表格，什么没有）但是所有其他图表（写入容量等）都是空的。我如何准确地找出进程卡在哪里？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T14:31:43.383

我认为您已经从 DynamoDB 完成了所有可能的工作。此外，您的问题似乎与 Python 相关，而不是与 DynamoDB 相关。

我在 SO 上发现了一个非常有趣的问题，解释了如何将调试器附加到正在运行的进程。作者好像遇到了和你一样的问题。[显示正在运行的 Python 应用程序的堆栈跟踪](https://stackoverflow.com/questions/132058/showing-the-stack-trace-from-a-running-python-application)。作为这种技术的一个缺点，您必须在启动程序*之前对其进行准备，并且它仅适用于 *NIX*

但这有时与 Python 的解释器错误直接相关。在这种情况下，Python 文档中的这篇文章可能会有所帮助：[http ://wiki.python.org/moin/DebuggingWithGdb](http://wiki.python.org/moin/DebuggingWithGdb)

# python - 在 Windows 7（64 位）中安装 pykml Python 模块

> ID：12915425
> 
> 赞同：2
> 
> 时间：2012-10-16T13:08:10.707
> 
> 标签：python, pip, easy-install, pykml

我是 Python 新手，所以也许我的问题很愚蠢，但我无法安装[pykml 模块](http://packages.python.org/pykml/)。

访问其网站，没有安装 Windows 说明。无论如何，我尝试安装easy_install，但这也不起作用。

从现在开始，我做了：

*   安装 Python 2.7.3
*   手动添加`C:\Python27`到`PATH`环境变量
*   还添加`C:\Python27\Scripts`以允许执行 easy_install
*   执行`easy_install lykml`。`'Could not find suitable distribution for Requeriment.parse('pykml')'`在 easy_install 存储库 ( )中找不到它
*   尝试`easy_install pip`尝试使用 pip 安装。和以前一样的错误。

我的 Windows 7 是 64 位的。我怎么解决这个问题？

编辑：我找到了一些在 .exe 中为 Windows 64 位构建的软件包，并成功安装了它们。例如 easy_install 就是以这种方式安装的。但其他时候我尝试安装 .exe 包分发，如 pyserial 和安装向导所说`'No Python installation found in the registry'`。这可能有关系吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-16T13:56:16.380

您是否尝试[为 lxml 安装这些非官方的二进制文件](http://www.lfd.uci.edu/~gohlke/pythonlibs/#lxml)？使用`amd64`与您的 Python 版本对应的版本。`lxml`安装后，您的安装`pyxml`也应该成功。

# jpa - Guice JPA - “此连接已关闭。” 错误

> ID：12915427
> 
> 赞同：3
> 
> 时间：2012-10-16T13:08:22.993
> 
> 标签：jpa, guice, guice-persist

在 DB 断开空闲连接或 DB 关闭并备份后，我在我的 webapp 中收到以下错误：

```
javax.persistence.PersistenceException: org.hibernate.exception.JDBCConnectionException: could not inspect JDBC autocommit mode
    at org.hibernate.ejb.AbstractEntityManagerImpl.convert(AbstractEntityManagerImpl.java:1365)
    at org.hibernate.ejb.AbstractEntityManagerImpl.convert(AbstractEntityManagerImpl.java:1293)
    at org.hibernate.ejb.QueryImpl.getResultList(QueryImpl.java:265)    
... 60 more
Caused by: org.hibernate.exception.JDBCConnectionException: could not inspect JDBC autocommit mode
    at org.hibernate.exception.internal.SQLStateConversionDelegate.convert(SQLStateConversionDelegate.java:131)
    at org.hibernate.exception.internal.StandardSQLExceptionConverter.convert(StandardSQLExceptionConverter.java:49)
    at org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:125)
    at org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:110)
    at org.hibernate.engine.jdbc.internal.LogicalConnectionImpl.isAutoCommit(LogicalConnectionImpl.java:395)
    at org.hibernate.engine.transaction.internal.TransactionCoordinatorImpl.afterNonTransactionalQuery(TransactionCoordinatorImpl.java:195)
    at org.hibernate.internal.SessionImpl.afterOperation(SessionImpl.java:565)
    at org.hibernate.internal.SessionImpl.list(SessionImpl.java:1220)
    at org.hibernate.internal.QueryImpl.list(QueryImpl.java:101)
    at org.hibernate.ejb.QueryImpl.getResultList(QueryImpl.java:256)
... 70 more
Caused by: org.postgresql.util.PSQLException: This connection has been closed.
    at org.postgresql.jdbc2.AbstractJdbc2Connection.checkClosed(AbstractJdbc2Connection.java:712)
    at org.postgresql.jdbc2.AbstractJdbc2Connection.getAutoCommit(AbstractJdbc2Connection.java:678)
    at sun.reflect.GeneratedMethodAccessor138.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at org.apache.tomcat.jdbc.pool.ProxyConnection.invoke(ProxyConnection.java:126)
    at org.apache.tomcat.jdbc.pool.JdbcInterceptor.invoke(JdbcInterceptor.java:99)
    at org.apache.tomcat.jdbc.pool.DisposableConnectionFacade.invoke(DisposableConnectionFacade.java:63)
    at $Proxy66.getAutoCommit(Unknown Source)
    at org.hibernate.engine.jdbc.internal.LogicalConnectionImpl.isAutoCommit(LogicalConnectionImpl.java:392) 
```

当这开始时，我得到一个

```
SQL Error: 0, SQLState: 08006 - An I/O error occured while sending to the backend. 
```

但在那之后它只是：

```
SQL Error: 0, SQLState: 08003 - This connection has been closed. 
```

问题是：我已经设置了 testOnBorrow，所以我希望只获得打开的连接。

如果这有帮助：池通常包含好连接和坏连接，问题似乎随着时间的推移而消失，但我让服务器运行了 >12 小时，但仍然返回了坏连接。重新启动后一切正常（一段时间）。

我已经对问题进行了更多调试，似乎池返回了错误的连接，例如，如果我在 DB 上杀死了所有连接后，我得到：

```
SQL Error: 0, SQLState: 57P01 
```

然后是通常的东西 - 从池中返回被杀死的连接。问题是：这是应用程序问题吗？

我尝试通过 JMX 清除池，但这似乎没有任何效果。另一个奇怪的事情是，即使应用程序显然没有做任何事情（通过线程转储检查），JMX bean 仍显示 7 个活动连接和 0 个空闲连接。当我执行一个需要访问数据库的请求时，我会立即得到响应（尽管没有可用的空闲连接），但之后 JMX 显示 7 个活动连接和 0 个空闲连接。

PS。也许我遗漏了一些明显的东西，这是我的连接管理问题？我正在使用通过 persistence.xml 配置的 JPA EntityManager，所以也许我做错了什么并且使用后连接没有正确关闭（返回）？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-26T12:41:36.527

实际上，当我怀疑应用程序错误时，我是对的。

这在第 730 期中有很好的描述[：自动启动的 UnitOfWork 永远不会结束](http://code.google.com/p/google-guice/issues/detail?id=730)

> 使用 JpaPersistService 时，如果您尝试访问活动 UnitOfWork 之外的 EntityManager，Guice 将自动为您启动一个。然而，由于 Guice 不（也不可能）知道何时结束这个 UnitOfWork，所以它永远不会知道。
> 
> 结果？在应用程序的整个生命周期中，有问题的线程将被同一个 EntityManager 卡住。这对于应用程序运行来说是一个糟糕的状态，我们不可避免地会在一段时间后耗尽可用内存并崩溃。
> 
> 这里真正的杀手是当你犯了这个错误时一点都不明显。唯一真正的提示是您在不同线程之间从数据库中获取不一致的数据（由于 EM 一级缓存），或者应用程序的内存消耗不断增长。在我的情况下，是池中的活动连接让我怀疑它，然后，当我打开详细日志记录时，我注意到应用程序根本没有从池中借用连接，而是重用了已经持有的连接未关闭的EntityManager。

实际上，报告了此问题的很多重复项：[http ://code.google.com/p/google-guice/issues/list?can=1&q=UnitOfWork](http://code.google.com/p/google-guice/issues/list?can=1&q=UnitOfWork)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-16T20:10:28.877

一个狂野的镜头：[这里](http://grepcode.com/file/repository.springsource.com/org.apache.tomcat/com.springsource.org.apache.tomcat.jdbc/1.0.8.5/org/apache/tomcat/jdbc/pool/PooledConnection.java#346)的代码表明，`validationInterval`也检查了`testOnBorrow`。

由于您将此值从默认的 30 秒设置为 5 分钟，这意味着在数据库断开连接后的 5 分钟内，您仍然可以获得该陈旧连接。如果您的数据库超时时间少于 5 分钟...运气不好。

为了测试这个理论，你可以设置`validationInterval`一个荒谬的低值。

如果这有帮助（阅读：我们找到了正确的旋钮），您应该至少将其设置为比 DB 超时更短的时间。因此，当数据库决定丢弃空闲连接时，下层`validationInterval`将确保在下一次借用之前检查该连接。由于数据库服务器重新启动（即没有超时）而关闭的连接不会受到此解决方案的影响，但至少恢复正常状态的时间也较短。

注意：我刚刚向 Google 询问了代码。我不知道这是实际代码还是古代代码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-16T14:30:57.257

如果你修改了你`META-INF/context.xml`的包含`validationQuery`，Tomcat 很可能会缓存旧的定义在`conf/engine/host/webapp.xml`. 关闭 Tomcat，删除该文件，然后重新启动 Tomcat。`work`在 Tomcat 关闭时删除该目录也没有什么坏处。

# java - 如何池化有状态的bean？

> ID：12915429
> 
> 赞同：0
> 
> 时间：2012-10-16T13:08:26.060
> 
> 标签：java, spring, threadpool, connection-pooling

我在独立环境中使用 Spring 3.1。

我有创建编程原型 bean 的场景。

每个 bean 都有自己的状态。（它们是有状态的，具有唯一的 id 等。）

创建 bean 后，我将它连接到一个主题（通过 DLMC 务实）。

发送到主题的每条消息都包含一个特定的 id（主题的消费者之一）

延迟和吞吐量对我来说非常重要。

因此，如果我将大量消息发送到特定的 bean，我会在每条消息之间出现可笑的延迟，因为该 bean 非常忙，并且在完成当前工作之前它不会空闲。

所以我认为我每次第一次创建它时都需要创建同一个bean的池以避免这种情况。

有什么想法可以实现吗？也许有一个高级解决方案？

我正在以这种方式务实地创建那些弹簧 mdb：

爪哇代码：

```
MyMdb myMdb= (MyMdb) beanFactory.getBean("MyMdb", id); 
```

和 xml：

```
<bean id="fixSessionMDB" class="com.finbird.fixgw.core.mdb.FixSessionMDB"
    scope="prototype" lazy-init="true">
    <constructor-arg ref="0" />
    <constructor-arg ref="0" />
</bean> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T18:19:02.060

You aren't providing too many implementation details, but have a look at the following code snippet:

```
<bean id="uniqueConsumerTarget" scope="prototype" lazy-init="true"/>

<bean id="uniqueConsumer" class="org.springframework.aop.framework.ProxyFactoryBean">
    <property name="targetSource">
        <bean class="org.springframework.aop.target.CommonsPoolTargetSource">
            <property name="targetClass" value="com.example.UniqueConsumer"/>
            <property name="targetBeanName" value="uniqueConsumerTarget"/>
            <property name="maxSize" value="10"/>
            <property name="maxWait" value="5000"/>
        </bean>
    </property>
</bean> 
```

This code is pretty clever. Every time you ask for `"uniqueConsumer"` bean, Spring will actually return some dynamic proxy that will intercept all calls. Once you try to execute any method on that bean, Spring will take one instance from the pool (or create new one) and forward to it.

`"maxSize"` and `"maxWait"` parameters are self-descriptive and are used to fine-tune the pool.

# delphi - 为什么 TDateTimePicker.Checked 在 Windows 7 上总是返回 True？

> ID：12915431
> 
> 赞同：7
> 
> 时间：2012-10-16T13:08:29.000
> 
> 标签：delphi, windows-7, delphi-2007, tdatetimepicker

我有一个应用程序，在 Delphi 2007 中构建，`TDateTimePicker`表单上有一个。此日期时间选择器的`ShowCheckbox`属性设置为`True`，它在日期或时间旁边显示一个复选框，每当用户选择日期或日期或时间由代码更改时，就会自动选中该复选框。此复选框的状态也可以由用户手动控制，其状态可以由`Checked`属性确定。

以下代码显示了如何确定事件中此复选框的状态`OnChange`：

```
procedure TForm1.FormCreate(Sender: TObject);
begin
  DateTimePicker1.ShowCheckbox := True;
end;

procedure TForm1.DateTimePicker1Change(Sender: TObject);
begin
  ShowMessage('Checked: ' + BoolToStr(DateTimePicker1.Checked, True));
end; 
```

上面的代码在 Windows XP 上按预期工作，但在 Windows 7 上，`Checked`无论该复选框的实际状态如何，该属性始终返回 True。

为什么`Checked`即使未选中复选框，属性也总是返回 True？有没有办法以某种方式解决或解决这个问题？

PS 我的应用程序使用 Windows 主题

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-16T13:13:06.603

这是[`known issue`](http://qc.embarcadero.com/wc/qcmain.aspx?d=55052)Delphi 日期时间选择器控件的实现（在 Delphi 2009 中修复，正如 @Remy 在他的评论中指出的那样）。要查询日期时间选择器复选框的状态，应使用[`DTM_GETSYSTEMTIME`](http://msdn.microsoft.com/en-us/library/windows/desktop/bb761769%28v=vs.85%29.aspx)消息或[`DateTime_GetSystemtime`](http://msdn.microsoft.com/en-us/library/windows/desktop/bb761801%28v=vs.85%29.aspx)内部发送此消息的宏。如果消息（或宏）返回`GDT_VALID`值，并且[`DTS_SHOWNONE`](http://msdn.microsoft.com/en-us/library/windows/desktop/bb761728%28v=vs.85%29.aspx#DTS_SHOWNONE)使用了样式（在 Delphi 中当[`ShowCheckbox`](http://docwiki.embarcadero.com/Libraries/XE3/en/Vcl.ComCtrls.TDateTimePicker.ShowCheckbox)属性为 True 时），则表明控件的复选框已选中并且该控件包含有效的日期时间。

以下是如何使用上述宏来确定复选框状态的示例：

```
uses
  CommCtrl;

procedure TForm1.DateTimePicker1Change(Sender: TObject);
var
  SysTime: SYSTEMTIME;
begin
  if DateTime_GetSystemTime(DateTimePicker1.Handle, @SysTime) = GDT_VALID then
    ShowMessage('Check box is checked!')
  else
    ShowMessage('Check box is not checked!');
end; 
```

因此，您可以创建一个这样的辅助函数来解决错误的 Delphi 实现：

```
uses
  CommCtrl;

function IsDateTimePickerChecked(ADateTimePicker: TDateTimePicker): Boolean;
var
  SysTime: SYSTEMTIME;
begin
  Result := DateTime_GetSystemTime(ADateTimePicker.Handle, @SysTime) = GDT_VALID;
end;

procedure TMyForm.ButtonOneClick(Sender: TObject);
begin
  if IsDateTimePickerChecked(DateTimePicker1) then
    ShowMessage('Check box is checked!')
  else
    ShowMessage('Check box is not checked!');
end; 
```

# java - JFreeCharts 轴：刻度标签对齐

> ID：12915434
> 
> 赞同：6
> 
> 时间：2012-10-16T13:08:35.993
> 
> 标签：java, alignment, jfreechart

我正在使用 jFreeChart 1.0.14。我有一个水平的图表`DateAxis`。我正在尝试将刻度标签居中，以便它们位于随后的两个刻度内。

JFreeChart 以这种方式在常见情况下对齐刻度标签：

```
----+------------+------------+----
   Mon          Tue          Wed 
```

[![替代文字](../Images/ce13823b70755f7568266a87458440c2.png "img 在 http://i.stack.imgur.com/CU4w3.png 上可用")](https://i.stack.imgur.com/CU4w3.png)

但我想以这种方式对齐刻度标签：

```
----+------------+------------+------------+----
         Mon          Tue          Wed 
```

[![替代文字](../Images/0525fb29bf2849b3fbd8d7359bc7e87c.png "img 在 http://i.stack.imgur.com/8utFJ.png 上可用")](https://i.stack.imgur.com/8utFJ.png)

图像上的刻度标签通过编辑原始图像在图形编辑器中手动对齐。它不是 jFreeChart 库的输出。

有什么办法，如何通过 DateAxis 的 API 来实现？任何帮助表示赞赏... :)

非常感谢任何帮助或想法。Honza (sporak)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-26T14:08:14.257

由于没有人帮助我任何技巧，我试图覆盖 DateAxis 以获取带有刻度标签对齐的 Axis。我把它命名为' `AlignedDateAxis`'。它仅扩展`DateAxis`和覆盖用于刻度标签呈现的方法。它可以通过两种方式呈现刻度标签：以标准方式将标签放置在刻度下方，以及以所需方式将标签置于间隔中间。

因为我不太了解 JFreeCharts 库，所以理解一些类和方法对我来说并不容易。我希望它在所有常见情况下都能正常工作。我的课程只包含我的母语的 javadoc 和评论，所以我不会在这里完整地发布它们。

```
package x.y.z;

import java.awt.Graphics2D;
import java.awt.Shape;
import java.awt.geom.Line2D;
import java.awt.geom.Rectangle2D;
import java.util.Date;
import java.util.List;

import org.jfree.chart.axis.AxisState;
import org.jfree.chart.axis.DateAxis;
import org.jfree.chart.axis.DateTick;
import org.jfree.chart.axis.DateTickUnit;
import org.jfree.chart.axis.TickType;
import org.jfree.chart.axis.ValueTick;
import org.jfree.text.TextUtilities;
import org.jfree.ui.RectangleEdge;

/**
 * Extension of DateAxis for jFreeChart graphs that can render tick labels in two ways: 
 *   1) labels under ticks (common way, same as DateAxis)
 *   2) labels in the middle of interval (new feature)
 * @author Honza Spurny, Czech Republic
 * @version 1.0
 */
public class AlignedDateAxis extends DateAxis {

    /**
     * Tick labels alignment setting.
     */
    private TickLabelPosition tickLabelPosition = TickLabelPosition.DEFAULT_VALUE;

    /**
     * Value for interface Serializable.
     */
    static private final long serialVersionUID = 1;

    // ***********************
    // ***      Enums      ***
    // ***********************

    /**
     * Tick label alignment modes.
     */
    public enum TickLabelPosition {
        /**
         * Tick label is rendered under/next by own tick. 
         * (common rendering same as in DateAxis)
         */
        INTERVAL_START,
        /**
         * Tick label is placed in the middle of interval
         * (between two subsequent ticks) 
         */
        INTERVAL_MIDDLE;

        static public final TickLabelPosition DEFAULT_VALUE = INTERVAL_START;
    }

    // ******************************
    // ***      Constructors      ***
    // ******************************

    /**
     * Default constructor.
     */
    public AlignedDateAxis() {
        super();
    }

    /**
     * Constructor.
     * @param tickLabelPos tick label alignment mode setting for this axis.
     */
    public AlignedDateAxis(TickLabelPosition tickLabelPos) {
        this();
        this.setTickLabelPosition(tickLabelPos);
    }

    // *********************************
    // ***      GET/SET methods      ***
    // *********************************

    public TickLabelPosition getTickLabelPosition() {
        return this.tickLabelPosition;
    }

    public void setTickLabelPosition(TickLabelPosition value) {
        this.tickLabelPosition = value;
    }

    // *******************************************************
    // ***      Overrided methods for label rendering      ***
    // *******************************************************

    /**
     * Auxiliary method to calculate tick label position of given tick.
     * @param tick tick we need calculate label position for (DateTick is expected)
     * @param cursor the cursor
     * @param dataArea area to draw the ticks and labels in
     * @param edge edge of dataArea
     * @return Returns coordinates [x,y] where label should be placed.
     */
    @Override
    protected float[] calculateAnchorPoint(ValueTick tick, double cursor, Rectangle2D dataArea, RectangleEdge edge) {
        float[] resultAnchor = super.calculateAnchorPoint(tick, cursor, dataArea, edge);

        // Time of tick
        Date tickDate = (tick instanceof DateTick) ? 
                        ((DateTick) tick).getDate() : 
                        new Date((long)tick.getValue());

        // Tick label shift.
        // (for INTERVAL_START it is 0, for INTERVAL_MIDDLE it is calculated)
        double labelShift;

        switch (this.getTickLabelPosition()) {
            case INTERVAL_MIDDLE:
                // Getting next tick value...
                DateTickUnit unit = this.getTickUnit();
                Date nextTickDate = unit.addToDate(tickDate, this.getTimeZone());
                double nextTickVal = this.valueToJava2D(nextTickDate.getTime(), dataArea, edge);

                // Shifting label in between ticks...
                labelShift = (nextTickVal - resultAnchor[0]) / 2;
                break;

            case INTERVAL_START:
            default:
                labelShift = 0;
                break;
        }

        // Edge defines which coordinate is shifted.
        if (RectangleEdge.isTopOrBottom(edge)) {
            resultAnchor[0] += labelShift;
        } else if (RectangleEdge.isLeftOrRight(edge)) {
            resultAnchor[1] += labelShift;
        }

        return resultAnchor;
    }

    /**
     * Renders this axis with ticks and labels.
     * @param g2 graphics to draw the axis in.
     * @param cursor the cursor
     * @param plotArea area to draw the chart in
     * @param dataArea area to draw this axis in
     * @param edge edge of dataArea
     * @return Returns state of axis.
     */
    @Override
    protected AxisState drawTickMarksAndLabels(Graphics2D g2, double cursor, Rectangle2D plotArea, Rectangle2D dataArea, RectangleEdge edge) {
        AxisState state = new AxisState(cursor);
        if (this.isAxisLineVisible()) this.drawAxisLine(g2, cursor, dataArea, edge);

        List<DateTick> ticks = this.refreshTicks(g2, state, dataArea, edge);
        state.setTicks(ticks);
        g2.setFont(this.getTickLabelFont());

        for (DateTick tick: ticks) {        
            if (this.isTickLabelsVisible()) {
                g2.setPaint(this.getTickLabelPaint());
                float anchorPoint[] = this.calculateAnchorPoint(tick, cursor, dataArea, edge);

                // TextUtilities.drawRotatedString(tick.getText(), g2, anchorPoint[0], anchorPoint[1], tick.getTextAnchor(), tick.getAngle(), tick.getRotationAnchor());
                // Commented code above is original code from DateAxis.

                // ---[Override]---
                // Position of tick label is shifted so it can point outside the dataArea.
                // We have to check whether the tick label on this position is drawable into the given area.                            
                Shape labelBounds = TextUtilities.calculateRotatedStringBounds(tick.getText(), g2, anchorPoint[0], anchorPoint[1], tick.getTextAnchor(), tick.getAngle(), tick.getRotationAnchor());
                double labelEdge = (RectangleEdge.isTopOrBottom(edge)) ? (labelBounds.getBounds2D().getMaxX()) : (labelBounds.getBounds2D().getMaxY());
                double dataAreaBound = (RectangleEdge.isTopOrBottom(edge)) ? (dataArea.getMaxX()) : (dataArea.getMaxY());

                // Magic constant 5: tick label can be rendered although it exceeds area edge for max. 5px
                // (it still looks good - visualy tested :-)
                if ((labelEdge - 5) <= dataAreaBound) {
                    TextUtilities.drawRotatedString(tick.getText(), g2, anchorPoint[0], anchorPoint[1], tick.getTextAnchor(), tick.getAngle(), tick.getRotationAnchor());
                }
                // ---[/Override]---
            }

            if ( (this.isTickMarksVisible() && tick.getTickType().equals(TickType.MAJOR)) || (this.isMinorTickMarksVisible() && tick.getTickType().equals(TickType.MINOR)) ) {
                double ol = tick.getTickType().equals(TickType.MINOR) ? this.getMinorTickMarkOutsideLength() : this.getTickMarkOutsideLength();
                double il = tick.getTickType().equals(TickType.MINOR) ? this.getMinorTickMarkInsideLength() : this.getTickMarkInsideLength();
                float tickVal = (float)this.valueToJava2D(tick.getValue(), dataArea, edge);
                Line2D mark = null;
                g2.setStroke(this.getTickMarkStroke());
                g2.setPaint(this.getTickMarkPaint());
                if(edge == RectangleEdge.LEFT) {
                    mark = new Line2D.Double(cursor - ol, tickVal, cursor + il, tickVal);
                } else if(edge == RectangleEdge.RIGHT) {
                    mark = new Line2D.Double(cursor + ol, tickVal, cursor - il, tickVal);
                } else if(edge == RectangleEdge.TOP) {
                    mark = new Line2D.Double(tickVal, cursor - ol, tickVal, cursor + il);
                } else if(edge == RectangleEdge.BOTTOM) {
                    mark = new Line2D.Double(tickVal, cursor + ol, tickVal, cursor - il);
                }
                g2.draw(mark);
            }
        }

        if (this. isTickLabelsVisible()) {
            double used = 0.0;            
                if (edge == RectangleEdge.LEFT) {
                    used += this.findMaximumTickLabelWidth(ticks, g2, plotArea, this.isVerticalTickLabels());
                    state.cursorLeft(used);
                } else if (edge == RectangleEdge.RIGHT) {
                    used = this.findMaximumTickLabelWidth(ticks, g2, plotArea, this.isVerticalTickLabels());
                    state.cursorRight(used);
                } else if (edge == RectangleEdge.TOP) {
                    used = this.findMaximumTickLabelHeight(ticks, g2, plotArea, this.isVerticalTickLabels());
                    state.cursorUp(used);
                } else if (edge == RectangleEdge.BOTTOM) {
                    used = this.findMaximumTickLabelHeight(ticks, g2, plotArea, this.isVerticalTickLabels());
                    state.cursorDown(used);
                }
        }

        return state;
    }
} 
```

这个轴类（AlignedDateAxis）对我来说很好，我在我的项目中使用它。

Honza (sporak)

# cloud - 为什么在测试 python-glanceclients 时测试失败？

> ID：12915441
> 
> 赞同：0
> 
> 时间：2012-10-16T13:09:06.987
> 
> 标签：cloud, openstack

我正在使用 python 2.6.6，为什么 run_tests 试图找到 python 2.7？

```
(os)mirror0@lab:~/tmp/python-glanceclient$ ./run_tests.sh
GLOB sdist-make: /home/mirror0/tmp/python-glanceclient/setup.py
py27 create: /home/mirror0/tmp/python-glanceclient/.tox/py27
ERROR: InterpreterNotFound: python2.7
___________________________________ summary ____________________________________
ERROR:   py27: InterpreterNotFound: python2.7
(os)mirror0@lab:~/tmp/python-glanceclient$ python -V
Python 2.6.6 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T23:28:06.863

您需要安装 python 2.7 才能通过这些测试。

# javascript - 排序一个json列表？

> ID：12915445
> 
> 赞同：7
> 
> 时间：2012-10-16T13:09:17.303
> 
> 标签：javascript, jquery

> **可能重复：**
> [按 JavaScript 中的字段值对数组中的对象进行排序](https://stackoverflow.com/questions/1129216/sorting-objects-in-an-array-by-a-field-value-in-javascript)

```
 var myData = [
                  {"Identifier":1,"Naam":"Van Der Valk","Adres":"Europaweg 218","Postcode":"1238AC","Plaats":"Zoetermeer","Longitude":"4.48822","Latitude":"52.06258", "Status":"Laadpunten Beschikbaar", "lunch":"true", "diner":"true", "meet":"true", "wifi":"true", "Distance": "10.1"},
                  {"Identifier":2,"Naam":"Meram place","Adres":"NOT Given 1","Postcode":"0000LL","Plaats":"Rotterdam","Longitude":"4.48178","Latitude":"51.92422", "lunch":"false", "Distance": "181"},
                  {"Identifier":3,"Naam":"Station Zwolle","Adres":"NOT Given 6","Postcode":"0000LL","Plaats":"Zwolle","Longitude":"6.08302","Latitude":"52.51677", "lunch":"false", "Distance": "5.1"},
                  {"Identifier":4,"Naam":"Pompstation Shell","Adres":"NOT Given 1","Postcode":"0000LL","Plaats":"Den Haag","Longitude":"4.30070","Latitude":"52.07050", "lunch":"false"},
                  {"Identifier":5,"Naam":"Amsterdam Arena","Adres":"NOT Given 218","Postcode":"0000LL","Plaats":"Amsterdam","Longitude":"4.89517","Latitude":"52.37022", "lunch":"true", "diner":"true", "wifi":"true", "meet":"true", "Distance": "34.2"}
                  ]; 
```

我有一个问题，考虑到我有上面的 json .. 我想把它附加到一个列表中，即 ul li .. 怎么可能用距离最短的列表排序等等。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-16T13:15:14.760

那不是 JSON。它已经是一个 JavaScript 对象数组，所以你只需使用`.sort()`.

```
myData.sort(function(a, b) {
    return (+a.Distance || 0) - (+b.Distance || 0);
}); 
```

`0`请注意，如果数字转换`.Distance`失败，我将替换。

请阅读 MDN 文档[`.sort()`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/sort)以了解有关对 JavaScript 数组进行排序的更多信息。

* * *

`$.each()`要创建元素，您可以使用迭代器循环排序数组。

```
var list = $("#mylist");

$.each(myData, function(i, obj) {
    $("<li>", {
         text: obj.Naam + ": Distance - " + obj.Distance
    }).appendTo(list);
}); 
```

# jquery - 如何使用 knockout.js 在下拉列表中绑定项目列表

> ID：12915446
> 
> 赞同：1
> 
> 时间：2012-10-16T13:09:17.143
> 
> 标签：jquery, asp.net-mvc, knockout.js

我正在研究 knockout.js。我对knockout.js 很陌生，所以我正在关注knockout.js 教程。我试图在下拉列表中显示项目列表，基本上它是 knockout.js 教程中提供的实际示例。我写了以下代码，

```
<script type="text/javascript">
        $(document).ready(function () {
            function setreservation(name, initmeal) {
                var self = this;
                self.Name = name;
                self.Meal = ko.observable(initmeal);

                self.FormatPrice = ko.computed(function () {
                    return self.Meal().Price ? "$" + self.Meal().Price.toFixed(2) : "none";
                });
            }

            function ReservationViewModel() {
                var self = this;
                self.availablemeals = [{ "MealName": "standard", "Price": 10 }, { "MealName": "premium", "Price": 20 }, { "MealName": "Platinum", "Price": 30}];
                self.seats = ko.observableArray([new setreservation("karthik", self.availablemeals[0]), new setreservation("Tirumalesh", self.availablemeals[1])]);
                self.ReserveNewSeat = function () {
                    self.seats.push(new setreservation("karhik", self.availablemeals[2]));
                };
            }

            ko.applyBindings(new ReservationViewModel());
        }); 
```

我的看法是，

```
<table cellpadding="3" cellspacing="4">
<thead>
<tr>
<th>Name</th><th>Meal</th><th>Price</th>
</tr>
</thead>
<tbody data-bind="foreach: seats">
<tr>
<td><input data-bind="value:Name" /> 
</td>
<td><select data-bind="options:$root.availablemeals,value:Meal,optionsText:MealName"></select></td>
<td data-bind="text:FormatPrice"></td>
</tr>
</tbody>
</table>
<button data-bind="click:ReserveNewSeat">Reserve New One</button> 
```

所以请指导我我的代码是否有任何问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-16T13:24:56.287

你错过`''`了`optionsText`绑定：

```
<select data-bind="options: $root.availablemeals, value: Meal, optionsText: 'MealName'"> 
```

这是工作小提琴：http: [//jsfiddle.net/vyshniakov/DRDGK/](http://jsfiddle.net/vyshniakov/DRDGK/)

# java - 如何通过 NetworkInterface 发送 DatagramPacket？

> ID：12915448
> 
> 赞同：0
> 
> 时间：2012-10-16T13:09:26.010
> 
> 标签：java, windows-7, network-programming, udp, broadcast

我想发送一个 UDP 广播消息。使用 Windows XP 没有问题，但[Windows 7 只向一个网络接口发送广播](https://stackoverflow.com/questions/4615275/udp-broadcast-in-windows-7-does-it-work)。我应该怎么做？

# cocos2d-iphone - cocos2d OS X：如何检测鼠标右键单击？

> ID：12915453
> 
> 赞同：1
> 
> 时间：2012-09-18T15:02:23.523
> 
> 标签：cocos2d-iphone, events, mouse

在 OS X 的 cocos2d 中，我`ccMouseDown`用来检测鼠标左键点击，并且`ccOtherMouseDown`似乎检测鼠标滚轮的点击。我目前无法检测到鼠标的右键单击。我也没有在 API 中找到任何有关此的信息。

在 OS X 的 cocos2d 中，如何检测鼠标右键单击？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T15:29:01.280

不知道为什么我一开始就没有想到，但正确的方法是`ccRightMouseDown`. 要使用鼠标响应，您必须添加`self.isMouseEnabled = YES;`init 方法。

总的来说，我们有：

```
// Left click
- (BOOL) ccMouseDown:(NSEvent *)event
{   
    CCLOG(@"Left Mouse Button Clicked");
    return YES;
}

// Right click
- (BOOL) ccRightMouseDown:(NSEvent *)event
{
    CCLOG(@"Right Mouse Button Clicked");   
    return YES;
}

// Mouse wheel click
- (BOOL) ccOtherMouseDown:(NSEvent *)event
{
    CCLOG(@"Mouse Wheel Button Clicked");
    return YES;
} 
```

# ios - 我可以检测出导致“applicationWillResignActive”调用的原因吗？

> ID：12915455
> 
> 赞同：1
> 
> 时间：2012-10-16T13:09:34.083
> 
> 标签：ios, background, multitasking

我知道当您点击主页按钮或睡眠/唤醒按钮时会调用“applicationWillResignActive”。当发生中断（如本地调用）时也会调用它。但是我怎样才能确定哪种方法导致了这种方法并做一些不同的实现呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-16T13:17:33.600

您无法直接找出所有原因，但可以稍微缩小范围。

如果按下主页按钮并将应用程序发送到后台，您的应用程序将`applicationDidEnterBackground:`在您的 UIApplicationDelegate 上收到调用。请注意，您将在`applicationWillResignActive:`通话后收到此信息，因此它可能对您没有帮助。

您还可以为音频中断注册一个侦听器

```
AudioSessionInitialize (
                        NULL,                          // 'NULL' to use the default (main) run loop
                        NULL,                          // 'NULL' to use the default run loop mode
                        audioSessionInteruptionListener,  // a reference to your interruption callback
                        self                       // data to pass to your interruption listener callback
                        ); 
```

如果`audioSessionInteruptionListener`被调用并且状态是`kAudioSessionBeginInterruption`before `applicationWillResignActive:`，那么您就知道中断是由电话或警报引起的。我认为您无法获得更多信息。

**编辑**

实际上，我认为您可以走得更远一点，并确定电话与警报中断。现在这个还没有测试，只是为了给更多的调查提供一个起点。

我记得注册了一个回调来捕获音频路由，当接到电话时，路由的音频从扬声器/耳机更改为无到接收器。所以我想你可以使用上面描述的方法捕获 AudioInterruption，并捕获音频路由变化。如果音频路由成为接收者，则中断是一个电话呼叫。否则，它就是别的东西，比如警报。

我的目标是 iOS 5.0，所以它可能不适用于以前的版本，您必须与文档确认。

# c - GIF LZW 压缩流中的编码错误

> ID：12915456
> 
> 赞同：3
> 
> 时间：2012-10-16T13:09:35.210
> 
> 标签：c, encoding, sdl, gif, lzw

我正在编写一个 C 库来将 SDL_Surfaces 导出为各种格式作为练习，到目前为止，我已经掌握了 BMP、TGA 和 PCX 格式。现在我正在研究 GIF 格式，我觉得我非常接近让它工作。我的实现是这个的修改[版本](http://rosettacode.org/wiki/LZW_compression#C)。

我目前的问题是编写 GIF LZW 压缩图像数据子块。一切顺利，直到第一个子块中的位置 208。原始文件中的三个字节是（从位置 207 开始）：十六进制的“B8 29 B2”，我的是“B8 41 B2”。之后，字节再次“同步”。在压缩流的下方，我可以找到类似的差异，这可能是由第一个错误引起的。我的文件也比原来的短。

我应该注意，我将 lzw_entry 结构的类型从 uint16_t 更改为 int 以允许 -1 作为“空”条目，因为 0 是有效条目。不过，它并没有真正对压缩流产生影响。最初的实现使用未初始化的数据来标记一个空条目。

我想我读错了我的字典值，这就是为什么我得到的位置 208 的另一个代码比预期的要好。否则，我的位打包不正确。

我添加了压缩代码的精简版本。可能是什么问题？另外，我如何才能使我的“字典”数据结构更好或使比特流写入更快？

最后，我也知道我可以在这里和那里优化一些代码:)

```
static Uint8 bit_count = 0;
static Uint8 block_pos = 0;

int LZW_PackBits(SDL_RWops *dst, Uint8 *block, int code, Uint8 bits) {
    Uint8 out = 0;

    while (out != bits) {
        if (bit_count == 8) {
            bit_count = 0;

            if (block_pos == 254) { // Thus 254 * 8 + 8 == 2040 -> 2040 / 8 = 255 -> buffer full
                ++block_pos;
                SDL_RWwrite(dst, &block_pos, 1, 1);
                SDL_RWwrite(dst, &block[0], 1, block_pos);
                memset(block, 0, block_pos);
                block_pos = 0;
            } else
                ++block_pos;
        }

        block[block_pos] |= (code >> out & 0x1) << bit_count;
        ++bit_count; ++out;
    }

    return 1;
}

#define LZW_MAX_BITS      12
#define LZW_START_BITS    9
#define LZW_CLEAR_CODE    256
#define LZW_END_CODE      257
#define LZW_ALPHABET_SIZE 256

typedef struct {
    int next[LZW_ALPHABET_SIZE]; // int so that -1 is allowed
} lzw_entry;

int table_size       = 1 << LZW_MAX_BITS; // 2^12 = 4096
lzw_entry *lzw_table = (lzw_entry*)malloc(sizeof(lzw_entry) * table_size);

for (i = 0; i < table_size; ++i)
    memset(&lzw_table[i].next[0], -1, sizeof(int) * LZW_ALPHABET_SIZE);

Uint8 block[255];
memset(&block[0], 0, 255);
Uint16 next_entry = LZW_END_CODE + 1;
Uint8  out_len    = LZW_START_BITS;
Uint8  next_byte  = 0;
int    input      = 0;
int    nc         = 0;

LZW_PackBits(dst, block, clear_code, out_len);

Uint8 *pos = ... // Start of image data
Uint8 *end = ... // End of image data
input = *pos++;

while (pos < end) {
    next_byte = *pos++;
    nc = lzw_table[input].next[next_byte];

    if (nc >= 0) {
        input = nc;
        continue;
    } else {
        LZW_PackBits(dst, block, input, out_len);
        nc    = lzw_table[input].next[next_byte] = next_entry++;
        input = next_byte;
    }

    if (next_entry == (1 << out_len)) { // Next code requires more bits
        ++out_len;

        if (out_len > LZW_MAX_BITS) {
            // Reset table
            LZW_PackBits(dst, block, clear_code, out_len - 1);
            out_len = LZW_START_BITS;
            next_entry = LZW_END_CODE + 1;

            for (i = 0; i < table_size; ++i)
                memset(&lzw_table[i].next[0], -1, sizeof(int) * LZW_ALPHABET_SIZE);
        }
    }
}

// Write remaining stuff including current code (not shown)
LZW_PackBits(dst, block, end_code, out_len);
++block_pos;
SDL_RWwrite(dst, &block[0], 1, block_pos);
SDL_RWwrite(dst, &zero_byte, 1, 1);

const Uint8 trailer = 0x3b; // ';'
SDL_RWwrite(dst, &trailer, 1, 1); 
```

**更新：**我做了更多的测试，并实现了 Aki Suihkonen 建议的位打包算法。它没有明显的区别，它告诉我我在我的 lzw_table 结构中以某种方式错误地查找/存储代码，并且错误在主循环中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T15:56:37.553

这不是问题的原因，但是否需要不时写字符 255？
`SDL_RWwrite(dst, &block_pos, 1, 1);`

第一个指针如何使位写入更快：

```
void bitpacker(int what, int howmany)
{
   static unsigned int bit_reservoir=0;
   static int bits_left = 0;
   static unsigned char *my_block = start_of_block;

   bit_reservoir|=what<<bits_left;   // you can optionally mask: (what & ((1<<howmany)-1))
   bits_left+=howmany;
   while (bits_left >= 8) {
       *myblock++ = bit_reservoir;
       bits_left-=8;
       bit_reservoir>>=8;            // EDIT: added, even though it's so obvious :)
       if (myblock==end_of_block) { my_block=start_of_block;  
           write(my_block,1,block_size, outputfile);
       }
   }
   // and while we are here, why not reserve a few kilobytes at least for myblock?

} 
```

字典的 4MB 内存很多（特别是与 1987 年相比，当时制定了标准），但可能不足以证明编写更复杂的哈希表是合理的。不过，基本单位可能很短。如果您只是将代码+1 写入表（并将其读取为 table[a].next[b] -1），您也可以将其初始化为零。

可以优化清台。保留了 4MB 的内存，但使用的条目少于 4k。

```
 int *clear_table[MAX_CODES];
 ...
 {
     // memorize the address that is changed...
     int *tmp = clear_table[next_entry] = &lzw_table[input].next[next_byte];
     nc    = *tmp = next_entry++;
 }
 if (need_to_clear) { for (int i=258;i<MAX_CODE;i++) *(clear_table[i]) = 0; 
```

# php - 在 pg_fetch_array 之外定义数组键值

> ID：12915457
> 
> 赞同：0
> 
> 时间：2012-10-16T13:09:35.243
> 
> 标签：php, arrays, postgresql

我基本上想`$georesults`在 while 循环之外定义数组及其键值对，但我希望数组由`pg_fetch_array()`while 循环内的行填充。

```
while ($row = pg_fetch_array($result, NULL, PGSQL_ASSOC)) {
        $georesults['results'][] = array(
                    "$columns[0]" => $row["$columns[0]"],
                    "$columns[1]" => $row["$columns[1]"],
                    "$columns[2]" => $row["$columns[2]"],
                    "$columns[3]" => $row["$columns[3]"]
                    );
    } 
```

我不太确定如何实现这一目标。

是否可以定义数组：

```
$georesults['results'][] = array(
                    "$columns[0]" => $row["$columns[0]"],
                    "$columns[1]" => $row["$columns[1]"],
                    "$columns[2]" => $row["$columns[2]"],
                    "$columns[3]" => $row["$columns[3]"]
                    ); 
```

在 while 循环之外，但它是否从结果中填充`pg_fetch_array`？

我想这样做的原因是因为我想根据查询中定义的列动态设置键值对的数量。查询会经常更​​改。取决于用户选择的内容。

问候地理

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T13:40:04.033

//在循环外声明数组变量。

```
 $results=array();

while ($row = pg_fetch_array($result, NULL, PGSQL_ASSOC)) {

        $results[] = $row;
    }
//you can use the result outside the loop.

or

    $results=array();

while ($row = pg_fetch_array($result, NULL, PGSQL_ASSOC)) {

      $results[] = array('id'=>$row['id'],'name'=>$row['name'], 'password'=>$row['password'] );

    }

//use the result outside the loop 
```

希望能帮助到你

# asp.net - ASP.Net 应用程序上的防火墙阻止 DLL

> ID：12915458
> 
> 赞同：1
> 
> 时间：2012-10-16T13:09:43.227
> 
> 标签：asp.net, iis-7.5, ftpwebrequest, windows-firewall

我有一个项目，它在 C# 中创建一个 .dll，其中包含一个非常简单的 ftp 客户端（FtpWebRequest、FtpWebResponse），并希望在包括 Bin 目录中的各种 Web 项目中使用该 .dll。

问题是：Windows 防火墙。

使用该 .dll 的控制台应用程序工作正常，因为我可以在防火墙上制定规则让 .exe 进行 ftp 连接。

Web 应用程序不起作用，因为防火墙阻止它，总是返回 WebException Timeout。

有什么想法如何在不禁用 Windows 防火墙的情况下使其在 Web 应用程序上运行？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T13:11:57.690

您还可以将 iis 工作进程的规则添加为 Windows 防火墙的例外。它的完成方式与控制台应用程序完全相同。

# c# - 从 C# process.StandardOutput.ReadLine() 运行命令行挂起

> ID：12915469
> 
> 赞同：2
> 
> 时间：2012-10-16T13:11:01.773
> 
> 标签：c#

我正在尝试从我的 c# 程序运行命令行。为了简单起见，我所做的就是运行“dir”命令。然后我阅读了结果的每一行。当我到达输出的末尾时，程序挂起。它不做任何事情。下面是程序。

```
 static void Main(string[] args)
    {
        ProcessStartInfo startInfo = new ProcessStartInfo("Cmd.exe");

        startInfo.UseShellExecute = false;
        startInfo.RedirectStandardInput = true;
        startInfo.RedirectStandardOutput = true;

        Process process = new Process();
        process.StartInfo = startInfo;
        process.Start();

        List<string> output = new List<string>();

        process.StandardInput.WriteLine("dir");
        process.StandardInput.Flush();

        while (process.StandardOutput.ReadLine() != null)
        {

            output.Add(process.StandardOutput.ReadLine());

        }
        process.WaitForExit();
        process.Kill();
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-16T13:16:10.713

`Cmd.exe`在您告诉它之前不会退出 - 您正在等待它完成，但它正在等待您的下一个命令。

尝试`process.StandardInput.WriteLine("exit");`告诉进程退出。

# java - 如何使用 JAVA 获取水晶报表参数名称

> ID：12915472
> 
> 赞同：0
> 
> 时间：2012-10-16T13:11:07.323
> 
> 标签：java, parameters, crystal-reports, report

我必须在我的 Java 应用程序中动态地创建报告。

我有一个 CrystalReport 的 (.rpt) 集合，所以这取决于您选择的 rpt。当您选择报告时，我必须使用“file.rpt”中的请求参数创建一个新窗口，因此我需要参数名称来决定用户应该完成哪种参数。

我正在寻找论坛，但找不到任何东西。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-12-11T11:40:26.430

尝试这个！

```
DatabaseController dbController = reportClientDocument.getDatabaseController();
        Tables tables = dbController.getDatabase().getTables();
        ITable table = tables.getTable(0);
        IProcedure command = (IProcedure)table;
        if(table instanceof com.crystaldecisions.sdk.occa.report.data.CommandTable) {

            for (int i=0; i< command.getParameters().size(); i++) {
                ParameterField commandParam = (ParameterField) command.getParameters().get(i);
                String paramName = commandParam.getName();
                String paramType = commandParam.getType().toString().substring(4);
                if(paramType.equalsIgnoreCase("decimal")){
                    paramType = "int";
                }
                paramType = paramType.toLowerCase();
                listOfParameter.put(paramName, paramType);
             }
            return listOfParameter;
        } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T13:31:12.700

```
 ParameterFieldController paramFieldController = reportClientDoc.getDataDefController().getParameterFieldController();

        for(Entry<String,Object> par : parametros.entrySet()) {
            paramFieldController.setCurrentValue("", par.getKey(), par.getValue()); 
        } 
```

# wpf - WPF 自定义控件资源最佳实践

> ID：12915473
> 
> 赞同：0
> 
> 时间：2012-10-16T13:11:11.570
> 
> 标签：wpf, resources, custom-controls

我目前正在开发一个自定义控件，并且我在一般资源方面遇到了一些问题。

1.  我应该把路径或绘图图像等资源放在哪里？
2.  存储在资源字典中时是否应该始终将 a 包装在 ViewBox 中？
3.  如果我在控件的程序集中已经有一些资源字典，我应该将它们与应用程序资源合并吗？
4.  如何为隐式样式准备自定义控件？我的意思是控件应该能够从应用程序级别获取样式...
5.  任何其他关于自定义控制和资源的最佳实践都非常受欢迎:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T13:20:19.327

1.  无论您选择哪里。附属程序集、`App.xaml`专用资源字典或内联。所有这些都有效，具体取决于您的应用程序和架构。
2.  不。无论您缺少什么单词，都无需向任何内容添加 ViewBox，除非您明确*需要*ViewBox。
3.  同样，这取决于您。资源可以集中，也可以根据其预期用途分开。没有适用于每个应用程序的“最佳实践”。
4.  使用 Visual Studio 创建“新自定义控件”将自动生成样板代码以启用隐式样式。只需按照创建控件时提供的指导进行操作即可。

# c++ - 使用 cpp 中的参数动态调用外部 dll

> ID：12915474
> 
> 赞同：1
> 
> 时间：2012-10-16T13:11:12.697
> 
> 标签：c++, dynamic, dll

我在 MSDN 上找到了这个例子，我正在尝试使用它，但我在让它与参数一起工作时遇到了问题（[http://msdn.microsoft.com/en-us/library/ms686944(VS.85).aspx](http://msdn.microsoft.com/en-us/library/ms686944%28VS.85%29.aspx "MSDN 链接")）

下面是我尝试使用的代码，我尝试调用的方法有 4 个参数（CString a、CString b、CString c、BOOL d）。

```
extern "C" __declspec(dllexport) int __stdcall 
    ImportFile(CString a, CString b, CString c, BOOL d)
{
    HINSTANCE hinstLib; 
    MYPROC ProcAdd; 
    BOOL fFreeResult, fRunTimeLinkSuccess = FALSE; 

    // Get a handle to the DLL module.
    hinstLib = LoadLibrary(TEXT("C:\MyDll.dll")); 

    // If the handle is valid, try to get the function address.
    if (hinstLib != NULL) 
    { 
        ProcAdd = (MYPROC) GetProcAddress(hinstLib, "TestFunction"); 

        // If the function address is valid, call the function.
        if (NULL != ProcAdd) 
        {
            fRunTimeLinkSuccess = TRUE;
            (ProcAdd) (a, b, c, d); 
        }
        // Free the DLL module.
        fFreeResult = FreeLibrary(hinstLib); 
    } 

    // If unable to call the DLL function
    if (!fRunTimeLinkSuccess) 
        return -1;

    return 0;
} 
```

任何想法我做错了什么？提前致谢！！！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-16T13:20:21.573

我现在开始工作了。我错过了 typedef 定义的额外参数：

```
typedef int (__cdecl *MYPROC)(CString a, CString b, CString c, BOOL d); 
```

# c# - C# 中的正则表达式替换字体大小、字体系列、行高等

> ID：12915476
> 
> 赞同：0
> 
> 时间：2012-10-16T13:11:16.820
> 
> 标签：c#, regex

目前我正在从 HTML 字符串中删除某些格式标记，并且想了解足够多的关于正则表达式的知识，以便能够替换任何格式。对于初学者来说，这就是我所做的，但我希望它适用于任何字体大小、系列等：

```
 p.body = p.body.Replace("line-height: 14px;", "");
            p.body = p.body.Replace("font-family: Arial, Helvetica, sans;", "");
            p.body = p.body.Replace("font-size: 11px;", ""); 
```

我实际上不确定是否可以在 C# 替换中直接使用正则表达式。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-16T13:22:40.917

辅助函数

```
 public static string RemoveStyle(string html, string style)
    {
        Regex regex = new Regex(style + "\\s*:.*?;?");

        return regex.Replace(html, string.Empty);
    } 
```

用法：

```
string input = "color: red ; line-height: 10px  ; font-family: Arial, Helvetica, sans;  ";
input = RemoveStyle(input, "line-height");
input = RemoveStyle(input, "font-family");

// now, input = "color: red ;" 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-16T13:15:39.647

要在 C# 中使用正则表达式，您需要使用[Regex Class](http://msdn.microsoft.com/en-us/library/system.text.regularexpressions.regex.aspx)。

要仅匹配您提供的特定类型的样式，我会尝试匹配：

```
"line-height\\s:.*?;?"
"font-family\\s:.*?;?"
"font-size\\s:.*?;?" 
```

或者，一起：

```
Regex.Replace(htmlString, "(line-height|font-family|font-size)\\s:.*?;?", String.Empty); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-16T13:16:59.723

[正则表达式替换 - MSDN](http://msdn.microsoft.com/en-us/library/system.text.regularexpressions.regex.replace.aspx)

您可以剥离整个样式属性..也许像这样？

```
Console.Write(Regex.Replace("<td style=\"text-align: right; vertical-align: bottom; width: 368px;\">", " style=\"[^\"]+\"", "")); // outputs "<td>" 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-16T13:32:13.163

好吧，让我首先说你正在尝试的已经成为新的旅行推销员问题。但是，我想参考[这篇文章](https://stackoverflow.com/questions/4231382/regular-expression-pattern-not-matching-anywhere-in-string/4234491#4234491)，其中接受的答案下方的文章指出您实际上**可以**使用正则表达式解析 HTML - 您只是不想这样做。请阅读它，因为它将帮助您了解障碍。

现在，针对您的具体问题。

假设你有一些这样的 HTML：

```
<html>
<head>
</head>
<body>
    <span style="line-height: 14px; font-family: Arial, Helvetica, sans; font-size: 11px;">Some text in the span</span>
</body>
</html> 
```

如果你想找到并替换`line-height`，你可以这样写一个 RegEx：

```
line-height.+?; 
```

而且我认为您可以从该 RegEx 中推断出其余部分。但是，问题在于您***假设***该语句始终有一个`;`结尾-对于CSS，我***不确定***您是否可以假设，所以这就是为什么每个人都告诉您不能使用正则表达式来完成的原因。但是跟我来一分钟。现在，在 C# 中，您可能会编写类似这样的内容（[在此处](http://msdn.microsoft.com/en-us/library/e7f5w83z.aspx)记录）：

```
var newString = RegEx.Replace(htmlString, "(line-height:)(.+?)(;)", "$1 $3"); 
```

`$1`and将`$3`保留第一个和第三个捕获的表达式。

# sql - 在 SQL Server 中，复合主键会增加死锁的几率吗？

> ID：12915480
> 
> 赞同：9
> 
> 时间：2012-10-16T13:11:24.337
> 
> 标签：sql, sql-server

我想知道是否因为增加了行锁定和/或因为增加了持有锁所花费的时间，在表上定义复合主键会增加在更新我的多个线程时出现死锁的机会一次？

感谢您的任何帮助。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-16T13:38:53.323

如果您使用复合 PK 并并行插入大量数据，您可能会受到**资源哈希冲突**的影响。有关真实世界的示例，请参阅[“可疑死锁和不太合乎逻辑的锁的奇怪案例” 。](http://consultingblogs.emc.com/jamesrowlandjones/archive/2009/05/28/the-curious-case-of-the-dubious-deadlock-and-the-not-so-logical-lock.aspx)

对于**资源哈希冲突**的解释，我将在[“%%lockres%% 冲突概率魔法标记：16,777,215”](http://rusanu.com/2009/05/29/lockres-collision-probability-magic-marker-16777215/)（推荐阅读）中引用 Remus Rusanu：

> SQL Server 中的锁管理器不知道它锁定了什么，它只是锁定“资源”（基本上是字符串）。将“资源”提供给锁管理器并请求所需的锁是更高级别组件的工作，例如存储引擎的访问方法。当锁定堆或 b 树中的行时，存储引擎将从记录标识符中合成一个“资源”。由于这些资源的长度有限，存储引擎必须将密钥的有效长度减少到允许呈现给锁管理器的最大长度，这意味着记录的密钥将减少到 6 个字节。这是通过将密钥散列为 6 字节散列值来实现的。

[...]

> 在 6 个字节上有 281,474,976,710,656 个不同的可能值。这是一个相当大的数字？其实没那么大。[...] 因此，SQL %%lockres%% 散列将产生两条具有相同散列的记录，有 50% 的概率在表外，任何表，只有 16,777,215 条记录。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-16T15:49:24.950

由于 SQL Server 的锁管理器使用 lockhash 值（而不是直接使用 PK），我会得出结论，使用单列 PK 与复合 PK 进行锁定没有区别。

[减少 SQL Server 2008R2 中的 lockhash 密钥冲突及其对并发性的影响的改进](http://blogs.msdn.com/b/sqlserverstorageengine/archive/2010/01/18/improvement-in-minimizing-lockhash-key-collisions-in-sql-server-2008r2-and-its-impact-on-concurrency.aspx)

*与其他一些数据库供应商不同，SQL Server 的锁管理器有一个逻辑组件。SQL Server 使用 lockhash 值来表示对 SQL Server 锁管理器中锁结构的锁，而不是使用对行、页或表的物理描述。然后将 lockhash 值保存在内存中。*

我会得出结论，从单列键与复合键中获得锁哈希值的哈希冲突的机会不会更大。如与 SQL 2008R2 的链接中所示，lockhash 得到了显着改进，并专门解决了复合键。

在 2008R2 之前，lockhash 对于单键和复合键都不够完美。
保持 PK 简短是一个好习惯。

.NET KeyValuePair 和 Tuple 不会生成好的散列。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-16T13:20:33.327

一般来说，我倾向于说不，它没有精心设计的代码。原因是死锁的原因和避免/消除它们的技术通常与时间无关。大多数死锁是由于线程内的更新路径不同而发生的。例如，代码 A 更新 Table1 然后更新 Table2 而代码块 B 更新 Table2 然后更新 Table1。避免这种情况的技术涉及确保各种代码块以相同的顺序尝试和更新项目。换句话说，避免线程 1 在 A 上锁定并想要更新 B，而线程 2 在 B 上锁定并想要更新 A 的情况。

但是，如果存在这些冲突的编码块/语句，我认为复合键会增加死锁发生的频率。基本上，事务完成所需的时间越长，另一个线程锁定另一个资源并导致死锁的时间就越多。

除了极小/特定的边缘情况外，我不相信复合键会对死锁的发生产生影响（至少在我的经验中不会）。

# c# - 为什么内联实例化和将 UserControl 添加到 StackPanel 会覆盖现有内容？

> ID：12915485
> 
> 赞同：0
> 
> 时间：2012-10-16T13:11:34.390
> 
> 标签：c#, wpf, user-controls, instantiation, stackpanel

如果我创建 UserControls 的实例，然后将它们添加到 StackPanel，如下所示：

```
var myUC1 = new MyUserControl(GetControlData<Quick_Box>());
var myUC2 = new MyUserControl(GetControlData<Quick_Star>());
myStackPanel.Children.Add(myUC1);
myStackPanel.Children.Add(myUC2); 
```

我可以看到它们是一个接一个地添加的。但是，如果我没有事先创建实例，并尝试在将它们添加到 StackPanel 时创建实例，如下所示：

```
myStackPanel.Children.Add(new MyUserControl(GetControlData<Quick_Box>()));
myStackPanel.Children.Add(new MyUserControl(GetControlData<Quick_Star>())); 
```

第二个实例总是覆盖第一个。为什么是这样？

# iphone - 实现 EGOPhotoViewer 时出错

> ID：12915493
> 
> 赞同：0
> 
> 时间：2012-10-16T13:12:21.230
> 
> 标签：iphone, ios

我有看起来像这样的错误。

```
Undefined symbols for architecture i386:
  "_OBJC_CLASS_$_EGOPhotoViewController", referenced from:
      objc-class-ref in ViewController.o
ld: symbol(s) not found for architecture i386
clang: error: linker command failed with exit code 1 (use -v to see invocation)

"_OBJC_CLASS_$_EGOPhotoViewController", referenced from:
Objc-class-ref in ViewController.o
Symbol(s) not found for architecture i386
Linker command failed with exit code 1 (use -v to see invocation) 
```

我创建了一个 ViewController 并在控制器代码中创建了一个按钮

```
- (IBAction)galleryBtnTapped:(id)sender {
    MyPhoto *photo = [[MyPhoto alloc] initWithImageURL:[NSURL URLWithString:@"http://a3.twimg.com/profile_images/66601193/cactus.jpg"] name:@" First Photo"];
    MyPhoto *photo2 = [[MyPhoto alloc] initWithImageURL:[NSURL URLWithString:@"https://s3.amazonaws.com/twitter_production/profile_images/425948730/DF-Star-Logo.png"] name:@"Second Photo"];
    MyPhotoSource *source = [[MyPhotoSource alloc] initWithPhotos:[NSArray arrayWithObjects:photo, photo2, photo, photo2, photo, photo2, photo, photo2, nil]];

    EGOPhotoViewController *photoController = [[EGOPhotoViewController alloc] initWithPhotoSource:source];
    [self.navigationController pushViewController:photoController animated:YES];

    //[photoController release];
    //[photo release];
    //[photo2 release];
    //[source release];
} 
```

其他与github 上的这个[项目](https://github.com/enormego/PhotoViewer)相同

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T13:20:08.067

![在此处输入图像描述](../Images/f4695bf0848233910cf6da3ec1560902.png)请在**Compile sources > EGoPhotoViewer.m中设置****-fno-objc-arc**标志，位于以下路径

 ****单击您的项目>目标项目（不要选择项目测试）>编译源> EGoPhotoViewer.m**

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-16T13:19:47.847

看起来您没有链接到正确的二进制文件。要将二进制文件包含到项目中，您必须单击项目文件以显示您的目标。从那里，转到“构建阶段”选项卡，然后在“将二进制文件与库链接”下，确保您的 EGOPhotoViewer 库在那里。

这是它应该是什么样子的屏幕截图： ![在此处输入图像描述](../Images/b91001858fa19368033b219e078e9d08.png)**

# c# - 我想在中添加标签和文本框的集合 我怎样才能做到这一点？

> ID：12915494
> 
> 赞同：0
> 
> 时间：2012-10-16T13:12:30.293
> 
> 标签：c#, jquery, asp.net-mvc, asp.net-mvc-3, html

这是我下面的代码。

```
 <div class="carpet bs-docs-example bs-docs-carpet">

            <h4>Please Provide details about your carpetting needs </h4>

            <div class="form-inline">
                <label class="control-label"><b>Length</b></label>
                <input type="text" name="Carpet.Room.Length.Feet" id="Carpet_Room_Length_Feet" style="width: 80px" class="floor-text" />Ft
            <input type="text" name="Carpet.Room.Length.Inch" id="Carpet_Room_Length_Inch" class="floor-text" />Inch
                <label><b>Width</b></label>
                <input type="text" name="Carpet.Room.Width.Feet" id="Carpet_Room_Width_Feet" class="floor-text" />Ft
             <input type="text" name="Carpet.Room.Width.Inch" id="Carpet_Room_Width_Inch" class="floor-text" />Inch<br />
            </div>
            <div></div>
            <a href="#" class="addroom">Add Room</a> / <a href="#" class="removeroom">Remove Room</a>
            <br />
            <div class="control-group">
                @Html.Label("Removing Old flooring", new { @class = "control-label" })
                <div class="controls">
                    @Html.DropDownListFor(model => Model.Carpet.RemoveOldFlooring, new List<SelectListItem>() { new SelectListItem() { Text = "Yes", Value = "True" }, new SelectListItem() { Text = "No", Value = "False" } })
                </div>
            </div>
            <div class="control-group">
                @Html.Label("Molding", new { @class = "control-label" })
                <div class="controls">
                    @Html.DropDownListFor(model => Model.Carpet.Molding, new List<SelectListItem>() { new SelectListItem() { Text = "Yes", Value = "True" }, new SelectListItem() { Text = "No", Value = "False" } })
                </div>
            </div>
            <div class="control-group">
                @Html.Label("Stairs Included?", new { @class = "control-label" })
                <div class="controls">
                    @Html.DropDownListFor(model => Model.Carpet.Stairs, new List<SelectListItem>() { new SelectListItem() { Text = "Yes", Value = "True" }, new SelectListItem() { Text = "No", Value = "False" } })
                </div>
            </div>
            <div class="control-group">
                @Html.Label("How many Steps", new { @class = "control-label" })
                <div class="controls">
                    @Html.EditorFor(x => x.Carpet.StairSteps)
                </div>
            </div>

    </div>​ 
```

我正在使用 Jquery，如下所示

```
 $('body').on('click','a.addroom', function(e) {
     e.preventDefault();

     var $cloned = $('.form-inline:eq(0)').clone();

     $('body').append($cloned);

 }); 

 $('body').on('click', 'a.removeroom' ,function(e) {
     e.preventDefault();
     $(this).closest('div').remove();
}); ​ 
```

它添加但不删除它。我只想添加标签中的内容并在单击链接“添加房间”和“删除房间”时删除这些内容。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T13:21:18.827

为什么不给新添加的内容一个类

```
$('body').on('click','a.addroom', function(e) {
     e.preventDefault();

     var $cloned = $('.form-inline:eq(0)').clone().addClass('NewlyAdded');

     $('body').append($cloned);

 }); 
```

并像这样删除

```
 $('body').on('click', 'a.removeroom' ,function(e) {
    e.preventDefault();         
    $('.NewlyAdded').remove();
 }); ​ 
```

# joomla - 如何在自定义组件中使用 Joomla 中的面包屑？

> ID：12915495
> 
> 赞同：1
> 
> 时间：2012-10-16T13:12:36.487
> 
> 标签：joomla, joomla2.5, breadcrumbs

我通过这个示例编写了简单的组件，但是当我输入它时，我看到的是 Home 而不是我的组件名称。

还有可能更深入，例如 joomla->my_component->some_other_component，但正好在我之后。

附言

找到[http://docs.joomla.org/How_to_add_breadcrumbs](http://docs.joomla.org/How_to_add_breadcrumbs)，但是如何在每个视图中自动使用它？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-16T17:32:59.787

尝试这个：

```
$mainframe = &JFactory::getApplication();
$pathway =& $mainframe->getPathway();
$breadcrumb = $pathway->setPathway(array());
$pathway->addItem( JText::_( 'YOUR_BREDCRUMB_ITEM' ),''); 
```

替换`YOUR_BREDCRUMB_ITEM`为您的项目名称。希望这会有所帮助。

# sql-server-2008 - SQL Server 跨数据库、跨服务器关系

> ID：12915497
> 
> 赞同：0
> 
> 时间：2012-10-16T13:12:40.263
> 
> 标签：sql-server-2008, tsql

在 SQL Server 中，这些事情是否可能

1.  编写一个引用同一服务器上不同数据库的表的选择查询？
2.  编写一个引用来自不同服务器上不同数据库的表的选择查询？
3.  同一台服务器上不同数据库的表之间有主键、外键关系？
4.  不同服务器上不同数据库中的表之间有主键、外键关系吗？

谢谢，

萨钦

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T13:18:38.677

1 & 2 = 是

3 & 4 = 否

SQL Server 不能维护不同数据库中表之间的引用完整性，不同的服务器也是如此。

但是，您可以使用构造在查询中连接这些表`server.database.schema.table`

[edit] 假设您使用的是链接服务器，当然 [/edit]

[这里](http://msdn.microsoft.com/en-us/library/aa213778%28v=sql.80%29.aspx)有关于配置链接服务器的好信息

# ruby-on-rails - Mongrel重启了吗？

> ID：12915500
> 
> 赞同：1
> 
> 时间：2012-10-16T13:12:49.113
> 
> 标签：ruby-on-rails, unix, redmine, mongrel

这是日志代码，但我不知道它是否重新启动，我应该怎么知道？这是什么语言？

**日志文件**

```
Wed Oct 10 11:41:38 -0400 2012: REQUEST DATA: "\r\n\r\n"
---
PARAMS: {}
---
** INT signal received.
** Starting Mongrel listening at 0.0.0.0:3001
** Starting Rails with production environment...
** Mounting Rails at /redmine...
** Rails loaded.
** Loading any Rails specific GemPlugins
** Loading C:\\BitNami/apps/redmine\\scripts\\mongrel_rails_envvars external config script
** Signals ready.  INT => stop (no restart).
** Mongrel 1.1.5 available at 0.0.0.0:3001
** Use CTRL-C to stop.
C:/BitNami/ruby/lib/ruby/gems/1.8/gems/coderay-1.0.6/lib/coderay/helpers/file_type.rb:19: warning: already initialized constant UnknownFileType
C:/BitNami/ruby/lib/ruby/gems/1.8/gems/coderay-1.0.6/lib/coderay/helpers/file_type.rb:126: warning: already initialized constant TypeFromExt
C:/BitNami/ruby/lib/ruby/gems/1.8/gems/coderay-1.0.6/lib/coderay/helpers/file_type.rb:132: warning: already initialized constant TypeFromShebang
C:/BitNami/ruby/lib/ruby/gems/1.8/gems/coderay-1.0.6/lib/coderay/helpers/file_type.rb:138: warning: already initialized constant TypeFromName
** INT signal received.
** Starting Mongrel listening at 0.0.0.0:3001
** Starting Rails with production environment...
** Mounting Rails at /redmine...
** Rails loaded.
** Loading any Rails specific GemPlugins
** Loading C:\\BitNami/apps/redmine\\scripts\\mongrel_rails_envvars external config script
** Signals ready.  INT => stop (no restart).
** Mongrel 1.1.5 available at 0.0.0.0:3001
** Use CTRL-C to stop.
Mon Oct 15 11:05:14 -0400 2012: Read error: #<Errno::ECONNABORTED: An established connection was aborted by the software in your host machine.>
C:/BitNami/ruby/lib/ruby/gems/1.8/gems/mongrel-1.1.5-x86-mingw32/bin/../lib/mongrel/http_response.rb:137:in `write'
C:/BitNami/ruby/lib/ruby/gems/1.8/gems/mongrel-1.1.5-x86-mingw32/bin/../lib/mongrel/http_response.rb:137:in `write'
C:/BitNami/ruby/lib/ruby/gems/1.8/gems/mongrel-1.1.5-x86-mingw32/bin/../lib/mongrel/http_response.rb:103:in `send_body'
C:/BitNami/ruby/lib/ruby/gems/1.8/gems/mongrel-1.1.5-x86-mingw32/bin/../lib/mongrel/http_response.rb:147:in `finished'
C:/BitNami/ruby/lib/ruby/gems/1.8/gems/mongrel-1.1.5-x86-mingw32/bin/../lib/mongrel.rb:165:in `process_client'
C:/BitNami/ruby/lib/ruby/gems/1.8/gems/mongrel-1.1.5-x86-mingw32/bin/../lib/mongrel.rb:285:in `run'
C:/BitNami/ruby/lib/ruby/gems/1.8/gems/mongrel-1.1.5-x86-mingw32/bin/../lib/mongrel.rb:285:in `initialize'
C:/BitNami/ruby/lib/ruby/gems/1.8/gems/mongrel-1.1.5-x86-mingw32/bin/../lib/mongrel.rb:285:in `new'
C:/BitNami/ruby/lib/ruby/gems/1.8/gems/mongrel-1.1.5-x86-mingw32/bin/../lib/mongrel.rb:285:in `run'
C:/BitNami/ruby/lib/ruby/gems/1.8/gems/mongrel-1.1.5-x86-mingw32/bin/../lib/mongrel.rb:268:in `initialize'
C:/BitNami/ruby/lib/ruby/gems/1.8/gems/mongrel-1.1.5-x86-mingw32/bin/../lib/mongrel.rb:268:in `new'
C:/BitNami/ruby/lib/ruby/gems/1.8/gems/mongrel-1.1.5-x86-mingw32/bin/../lib/mongrel.rb:268:in `run'
C:/BitNami/ruby/lib/ruby/gems/1.8/gems/mongrel-1.1.5-x86-mingw32/bin/../lib/mongrel/configurator.rb:282:in `run'
C:/BitNami/ruby/lib/ruby/gems/1.8/gems/mongrel-1.1.5-x86-mingw32/bin/../lib/mongrel/configurator.rb:281:in `each'
C:/BitNami/ruby/lib/ruby/gems/1.8/gems/mongrel-1.1.5-x86-mingw32/bin/../lib/mongrel/configurator.rb:281:in `run'
C:/BitNami/ruby/lib/ruby/gems/1.8/gems/mongrel-1.1.5-x86-mingw32/bin/mongrel_rails:128:in `run'
C:/BitNami/ruby/lib/ruby/gems/1.8/gems/mongrel-1.1.5-x86-mingw32/bin/../lib/mongrel/command.rb:212:in `run'
C:/BitNami/ruby/lib/ruby/gems/1.8/gems/mongrel-1.1.5-x86-mingw32/bin/mongrel_rails:281
C:/BitNami/ruby/bin/mongrel_rails:19:in `load'
C:/BitNami/ruby/bin/mongrel_rails:19
C:/BitNami/ruby/lib/ruby/gems/1.8/gems/coderay-1.0.6/lib/coderay/helpers/file_type.rb:19: warning: already initialized constant UnknownFileType
C:/BitNami/ruby/lib/ruby/gems/1.8/gems/coderay-1.0.6/lib/coderay/helpers/file_type.rb:126: warning: already initialized constant TypeFromExt
C:/BitNami/ruby/lib/ruby/gems/1.8/gems/coderay-1.0.6/lib/coderay/helpers/file_type.rb:132: warning: already initialized constant TypeFromShebang
C:/BitNami/ruby/lib/ruby/gems/1.8/gems/coderay-1.0.6/lib/coderay/helpers/file_type.rb:138: warning: already initialized constant TypeFromName
Mon Oct 15 15:05:02 -0400 2012: 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T13:25:44.427

它不是一种语言，它只是 Mongrel 应用程序的日志/控制台输出，包括一些错误堆栈信息，这些信息与您在 Ruby 其他任何地方都可以找到。

可以在这里找到辨别 Mongrel 是否正在启动的赠品：`** Starting Mongrel listening at 0.0.0.0:3001`- 这表明 Mongrel 的一个实例正在开始侦听端口 3001。据我所知，两个实例不能同时使用同一个端口，所以上面的日志中，该启动行出现了两次，表示重新启动。

# python - 如何在大文本文件中标记情感极性？

> ID：12915501
> 
> 赞同：1
> 
> 时间：2012-10-16T13:12:58.260
> 
> 标签：python, nltk, tweets

需要一些帮助！对不起，如果这听起来很愚蠢。我是 python 新手，想试试[这个](https://gist.github.com/1266556)例子....

但是如果我有两个 .txt 文件（pos 和 neg）每个都有 1000 条推文，那么标签是手动制作的。

使用上面的示例如何将它与文本文件一起使用？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-16T13:16:14.013

如果我理解正确，您需要找出一种将文本文件读入 Python 对象的方法。

考虑到您有两个文本文件，其中包含正样本和负样本 (`pos.txt`和`neg.txt`)，每行一条推文：

```
train_samples = {}

with file('pos.txt', 'rt') as f:
    for line in f.readlines():
        train_samples[line] = 'pos' 
```

对负面推文重复上述循环，您就完成了填充`train_samples`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T13:19:39.340

您应该从 numpy 包中查找 genfromtxt 函数：http: [//docs.scipy.org/doc/numpy/user/basics.io.genfromtxt.html](http://docs.scipy.org/doc/numpy/user/basics.io.genfromtxt.html)

它返回一个矩阵，给定正确的参数（分隔符、换行符、...）

# php - 将网站登录与 wordpress 登录集成

> ID：12915504
> 
> 赞同：0
> 
> 时间：2012-10-16T13:13:08.767
> 
> 标签：php, wordpress, codeigniter, customization

[使用wordpress登录功能](https://stackoverflow.com/questions/4734237/using-wordpress-login-functions)

参考上面的链接，我尝试将 wordpress 的登录与我的网站集成

但它显示以下错误致命错误：调用未定义函数 wp_signon()

我正在使用 codeigniter 框架......我从一个模型中调用它

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-10-16T14:39:23.953

我需要看看你的代码。

如果您在未正确加载 WordPress 核心的情况下尝试使用[`wp_signon()`](http://codex.wordpress.org/Function_Reference/wp_signon)，它将无法正常工作。`wp-blog-header.php`在尝试使用 WordPress 功能之前，您需要包含。

您找到的线程中的信息假定您已经在 WordPress 环境中。在你的情况下，听起来你不是。

# selenium-ide - Selenium IDE 在运行相同的代码时给出不同的结果

> ID：12915505
> 
> 赞同：0
> 
> 时间：2012-10-16T13:13:20.233
> 
> 标签：selenium-ide

我是 Selenium 的新手，只是在玩 IDE。我有一个在我的机器上本地运行的网站，它有一个 IFrame 和一些弹出窗口。以下代码在中速模式或慢速模式下运行得很好，但在快速模式下运行失败，它会给出错误（见下面的第 15 行）。即使我尝试保留等待语句以使事物同步。

另请注意，无论运行慢还是快，相同的代码在第 9 行都执行得很好。

```
01    open          /default.aspx
02    type          id=loginContent_txtPassword xxxx
03    clickAndWait      id=loginContent_btnSet  
04    windowFocus       
05    click         //div[@id='lBar_leftItem_4']/a  
06    waitForFrameToLoad            aframe 30000
07    selectFrame               aframe  
08    click         css=img[title="Properties"] 
09    waitForPopUp      doc              30000
10    selectWindow      name=doc    
11    close     
12    selectWindow      null    
13    selectFrame               aframe  
14    click         css=img[title="Properties"] 
15    waitForPopUp      doc                        30000   ***[error] can't access dead object**
16    selectWindow      name=doc    
17    verifyText        id=popupContent_lblOwner           XYZ*
18    close 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T19:49:48.463

尝试了很多事情......但最终在导致问题的语句解决问题之前暂停（几秒钟）。也许硒请求没有同步，它会在浏览器处理它之前向浏览器发送一些请求（只是我的猜测！）

# ruby - 删除 mongo 数据库中的 orhpan 子文档

> ID：12915506
> 
> 赞同：0
> 
> 时间：2012-10-16T13:13:22.743
> 
> 标签：ruby, mongodb, orm, mongoid, hierarchy

我的理解是，当您在 Mongo 中销毁父文档时，您也会销毁其子文档，并且它将沿链向下级联，直到删除所有引用的文档。

我有一个如下的集合结构

```
class A
    include Mongoid::Document
    field :name, :type => String
    has_many :bs
end

class B
    include Mongoid::Document
    field :name, :type => String
    has_many :cs
end

class C
    include Mongoid::Document
    field :name, :type => String
end 
```

我在我的代码中遇到了一种情况，我需要删除一个 A 类及其所有相关文档。由于这些模型中的每一个都基于 Mongoid，因此我使用了 destroy_all 方法，如下所示

```
a = A.where({'_id' => "123456789"})
a.bs.destroy_all
 => 'however many a's I had' 
```

通过阅读文档，我认为每个引用的文档也会被删除。

不幸的是，我所有的 b 类都消失了，我的数据库中有一堆孤立的 c 类。

所以：

A) 假设 destroy_all 没有按照我的想法做。有什么东西可以用来在 mongoid 中实际删除父对象及其所有引用的文档吗？

B）虽然我在本地机器上执行了这个操作，但我仍然想知道，有没有办法从更改的集合中删除孤立文档？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T23:36:14.400

您需要添加：

```
:dependent => :destroy 
```

到你的协会。

请参阅“依赖行为”：[http ://two.mongoid.org/docs/relations/referenced/1-n.html](http://two.mongoid.org/docs/relations/referenced/1-n.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T13:23:18.547

> 我的理解是，当您在 Mongo 中销毁父文档时，您也会销毁其子文档

仅当它是单个文档时。您正在显示许多文档的结构。

我不是 Ruby 程序员，我从未使用过 mongoid，但它似乎`destroy_all`本质`remove`上匹配多个文档，如文档支持：http: [//two.mongoid.org/docs/persistence/standard.html#destroy_all](http://two.mongoid.org/docs/persistence/standard.html#destroy_all)

> 在给定条件的情况下删除数据库中的所有匹配文档。有关执行这些操作的首选方法，请参阅删除标准部分。这将对所有匹配的文档运行销毁回调。

我猜如果您也希望删除孩子，您将需要手动指定它们，因为 MongoDB 没有关系行为，因此无法自行级联您的“关系”。

我想说，删除孤立文档的唯一真正方法很可能是通过遍历子集合中对父文档的所有不同引用查询父集合以查看它是否存在的艰难方法。如果它不存在，请将其删除。

# c# - Linq to xml for 循环提前意外终止

> ID：12915507
> 
> 赞同：1
> 
> 时间：2012-10-16T13:13:27.127
> 
> 标签：c#, .net, xml, linq, linq-to-xml

我的 linq to xml foreach 循环提前意外终止。没有提出异常。这是怎么回事？

* * *

```
var doc = XDocument.Parse("<a><b>one</b><b>two</b></a>");

foreach(var element in doc.Root.Elements("b"))
{
 element.ReplaceWith(XElement.Parse("<c>fixed</c>"));
}

doc.Dump(); 
```

给我

```
<a>
  <c>fixed</c>
  <b>two</b>
</a> 
```

当我期待

```
<a>
  <c>fixed</c>
  <c>fixed</c>
</a> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-16T13:14:46.767

> 我的 linq to xml foreach 循环提前意外终止。这是怎么回事？

当您在*同一文档上*迭代延迟评估的查询时，修改文档通常是一个坏主意。在某些情况下，它可能会起作用，但很难预测，而且我不知道这种行为是否被记录在案。（想象一下，如果评估持续到“当前”元素，并且每次都询问它的下一个兄弟元素 - 当元素从文档中删除时不会再有任何结果！）

如果您首先实现查询，则它可以正常工作：

```
foreach(var element in doc.Root.Elements("b").ToList())
{
    // Removed the pointless XElement.Parse call; it's cleaner just to create
    // an element with the data you want.
    element.ReplaceWith(new XElement("c", "fixed"));
} 
```

# oracle - 如何禁用外键，然后从存储过程中回滚 Oracle 数据库？

> ID：12915508
> 
> 赞同：1
> 
> 时间：2012-10-16T13:13:30.613
> 
> 标签：oracle, plsql, sql-update, rollback

我正在开发一个 Oracle sql 数据库。我有一个存储过程，我需要更新表中主键的值。该值由另一个表中的外键引用。

我可以禁用该外键约束，然后执行更新，然后重新启用它，这样就可以了。

问题是，如果在更改外键状态后出现问题，我无法在更新之前回滚。

恢复：

1.  更新
2.  更改外键
3.  回滚

有什么方法可以在执行更新之前回滚到状态，如果是，那么如何？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-16T13:28:55.647

不幸的是没有。ALTER TABLE 是 DDL 命令，不能`ROLLBACK`编辑 DDL 语句。所以你不能在这个命令之前回滚。

您的解决方案可能是将外键更改为延迟验证。然后，您可以在 ona 事务中使用两个更新来更改主键和外键。约束将在下次提交时验证。

# eclipse - Eclipse如何下载和存储XSD外部文件？

> ID：12915515
> 
> 赞同：1
> 
> 时间：2012-10-16T13:13:58.493
> 
> 标签：eclipse, xsd

当我在 Eclipse 中打开 XSD 文件（在 XSD 编辑器中）时，它下载`xsd:import`的所有文件都包含在文件中。但是如果我没有互联网，编辑器无法下载，这是显而易见的。在首选项（`Window -> Preferences`）中是`XML-> XML Catalog`。是否可以将我的`xsd:import`（xsd 文件）添加到目录中，Eclipse 将在离线模式下使用它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T13:44:26.083

是的，您可以将 xsd/dtd 文件添加到目录中。

我这样做（用于测试）并且eclipse没有抱怨：

```
Entry element:    URI
Location:         C:\Users\me\Desktop\log4j.dtd
URI:              file:///C:/Users/me/Desktop/log4j.dtd
Key type:         URI
Key:              http://logging.apache.org/log4j/1.2/apidocs/org/apache/log4j/xml/doc-files/log4j.dtd 
```

之后我在 log4j.xml 中使用了本机 URL

```
<!DOCTYPE log4j:configuration SYSTEM "http://logging.apache.org/log4j/1.2/apidocs/org/apache/log4j/xml/doc-files/log4j.dtd"> 
```

我想这也应该适用于 xsd 文件。

这来自我的另一个[答案](https://stackoverflow.com/a/5001223/367285)。

# php - php 从 epoch ms 获取日期

> ID：12915517
> 
> 赞同：0
> 
> 时间：2012-10-16T13:14:02.080
> 
> 标签：php, epoch

我有一个来自纪元的毫秒字段，例如 1350393140000。我需要在 PhP 中将此字段作为日期时间，将其时间部分更改为上午 7 点（UTC 时间）并将其从纪元转换回毫秒。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T13:16:52.450

```
$input = 1350393140000;

$dt = new DateTime('@' . floor($input / 1000));
$dt->setTimeZone(new DateTimeZone('UTC'));
$dt->modify('07:00');

$output = $dt->format('U') * 1000; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T13:17:08.267

```
date_default_timezone_set('UTC');
$ts = 1350393140000 / 1000;
$ts = mktime(7, date('i', $ts), date('s', $ts), date('n', $ts), date('j', $ts), date('Y', $ts));
$ts = $ts * 1000; 
```

# left-join - 如何 hql“左连接提取”和

> ID：12915520
> 
> 赞同：1
> 
> 时间：2012-10-16T13:14:12.953
> 
> 标签：left-join, fetch

当我使用 fetch 时怎么办？“与”不起作用。

```
ISession session = NHibernateHelper.GetSession();

string sql = "FROM Filial fi " +
             "left join fetch fi.LstUsuario usr " +
             "with usr.NumSequencial = :idUsr " +
             "order by fi.Nome";

IQuery query = session.CreateQuery(sql);

query.SetParameter("idUsr", usuario.NumSequencial, NHibernateUtil.Int64);

lstFilial = (List<Filial>)query.List<Filial>(); 
```

错误消息：意外令牌：使用 [FROM Entidade.Filial fi left join fetch fi.LstUsuario usr with usr.NumSequencial = :idUsr order by fi.Nome]

**SQL 中的代码**

```
select *
from TFILIAL fi
  left join TPERMIS_USR_FILIAL usrFi
    on fi.anum_sequ_filial = usrfi.anum_sequ_filial
    and usrfi.anum_sequ_usuario = 2; 
```

先感谢您。

# java - 架构：针对 ManagedBean 的服务

> ID：12915521
> 
> 赞同：1
> 
> 时间：2012-10-16T13:14:14.060
> 
> 标签：java, ajax, web-services, jsf, ejb

我一直在使用 JSF，例如前端和 EJB 到业务模型。我听说过另一种架构，其中使用 Web 服务而不是 EJB，并且这些是通过 ajax 请求调用的。使用最后一个模型有什么好处？

问候，

萨朗

# .net - .NET Treeview：如何防止未更改的子节点被重绘？

> ID：12915525
> 
> 赞同：3
> 
> 时间：2012-10-16T13:14:28.567
> 
> 标签：.net, winforms, performance, events, treeview

我正在使用 .NET 2010 中的 WinForms。我创建了一个从 Treeview 继承的用户控件，并且我正在为我的树节点的文本部分使用所有者绘图。

现在我不得不解决一个奇怪的性能问题：

当树节点（我称之为“父节点”）的文本发生更改时，树视图控件会为“父节点”的每个子节点触发 DrawNode 事件，无论它们是否可见！！！

这给我的应用程序带来了很大的性能问题。如何防止树视图控件为每个子节点触发 DrawNode 事件？

提前为您提供帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T13:28:51.230

我没有得到很好的重现，它只为可见节点生成 DrawNode 事件。但是，我确实看到它为父节点折叠的子节点生成 DrawNode 事件。您可以像这样过滤：

```
 private void treeView1_DrawNode(object sender, DrawTreeNodeEventArgs e) {
        if (e.Bounds.Height == 0) return;
        // etc..
    } 
```

# emacs - 在 emacs 中更容易的大纲导航

> ID：12915528
> 
> 赞同：3
> 
> 时间：2012-10-16T13:14:54.147
> 
> 标签：emacs, org-mode

我为 Org-mode 找到了这个漂亮的小功能：

```
;;; Move to next heading with dedicated buffer preview
(defun ded/org-show-next-heading-tidily ()
  "Show next entry, keeping other entries closed."
  (if (save-excursion (end-of-line) (outline-invisible-p))
      (progn (org-show-entry) (show-children))
    (outline-next-heading)
    (unless (and (bolp) (org-on-heading-p))
      (org-up-heading-safe)
      (hide-subtree)
      (error "Boundary reached"))
    (org-overview)
    (org-reveal t)
    (org-show-entry)
    (show-children))) 
```

它从一个标题移动到另一个标题，并显示其直接内容和子项。我喜欢这个想法，但更希望它显示在专用缓冲​​区中，使用`(org-tree-to-indirect-buffer)`.

我试着这样做：

```
(defun ded/org-show-next-heading-test ()
  "Show next entry, keeping other entries closed."
  (if (save-excursion (end-of-line) (outline-invisible-p))
      (progn (org-show-entry) (org-tree-to-indirect-buffer))
    (outline-next-heading)
    (unless (and (bolp) (org-on-heading-p))
      (org-up-heading-safe)
      (hide-subtree)
      (error "Boundary reached"))
    (org-overview)
    (org-reveal t)
    (org-tree-to-indirect-buffer)
    (show-children))) 
```

但是然后我必须双击该键-一旦它在专用缓冲​​区中显示条目，然后它仍然显示该条目。我试图删除该`progn`功能，但后来它并没有完全起作用。

我不是一个 lisp 程序员，我试着用它玩了一个小时左右但无济于事，所以我希望有经验的人帮我解决这个问题 :)

非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T13:29:38.397

不太确定你想要什么，但据我所知，你应该`org-tree-to-indirect-buffer`在最后打电话：

```
;;; Move to next heading with dedicated buffer preview
(defun ded/org-show-next-heading-tidily ()
  "Show next entry, keeping other entries closed."
  (if (save-excursion (end-of-line) (outline-invisible-p))
      (progn (org-show-entry) (show-children))
    (outline-next-heading)
    (unless (and (bolp) (org-on-heading-p))
      (org-up-heading-safe)
      (hide-subtree)
      (error "Boundary reached"))
    (org-overview)
    (org-reveal t)
    (org-show-entry)
    (show-children)
    (org-tree-to-indirect-buffer))) 
```

如果这不是您想要的，那么您能否提供更多详细信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T15:03:37.883

我最终制作了自己的简单功能，以便更轻松地导航：

```
(defun forward-and-preview ()
    "Go to same level next heading and show preview in dedicated buffer"
    (hide-subtree)
    (org-speed-move-safe (quote outline-next-visible-heading))
    (show-children)
    (org-tree-to-indirect-buffer)
    )
(defun back-and-preview ()
    "Go to same level previous heading and show preview in dedicated buffer"
    (hide-subtree)
    (org-speed-move-safe (quote outline-previous-visible-heading))
    (show-children)
    (org-tree-to-indirect-buffer)
    )
(defun up-back-and-preview ()
    "Go to previous level heading and show preview in dedicated buffer"
    (org-speed-move-safe (quote outline-up-heading))
    (org-tree-to-indirect-buffer)
    (hide-subtree)
    )
(defun up-forward-and-preview ()
    "Go to previous level next heading and show preview in dedicated buffer"
    (org-speed-move-safe (quote outline-up-heading))
    (hide-subtree)
    (org-speed-move-safe (quote outline-next-visible-heading))
    (org-tree-to-indirect-buffer)
    )
(defun inside-and-preview ()
    "Go to next level heading and show preview in dedicated buffer"
    (org-speed-move-safe (quote outline-next-visible-heading))
    (show-children)
    (org-tree-to-indirect-buffer)
    )
(add-to-list 'org-speed-commands-user '("l" inside-and-preview))
(add-to-list 'org-speed-commands-user '("j" forward-and-preview))
(add-to-list 'org-speed-commands-user '("k" back-and-preview))
(add-to-list 'org-speed-commands-user '("J" up-forward-and-preview))
(add-to-list 'org-speed-commands-user '("K" up-back-and-preview)) 
```

# arrays - 如何对多行数据执行函数，这些数据由它们在 R 中的列所分解？

> ID：12915529
> 
> 赞同：1
> 
> 时间：2012-10-16T13:14:57.553
> 
> 标签：arrays, r, function, data.table

我在一个文件中有一个表，其中有很多行，我已经读入 R 使用

```
data <-read.table("path/to/data.txt",header=TRUE, sep="\t",row.names=1)
            A1    A2    A3    B1    B2    B3
    Row1    1      3    2     3     2     6    
    Row2    3      2    1     3     6     7
    ... 
```

然后我使用

```
df <-data.frame(data) 
```

我想执行一个函数（）来比较每行的 A 样本和 B 样本，

```
function(A,B) 
```

但我不确定如何只为每一行指定数据框中的 A 和 B - 有没有办法为整个数据表一次完成所有这些操作？我是否必须将数据读入帧中，还是可以直接从初始的 read.table 数据开始工作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T13:46:39.710

试试这个：

```
set.seed(001) # Generating some data
DF <- data.frame(A1=sample(1:9, 10, T),
                 A2=sample(1:9, 10, T),
                 A3=sample(1:9, 10, T),
                 B1=sample(1:9, 10, T),
                 B2=sample(1:9, 10, T),
                 B3=sample(1:9, 10, T))

sampA <- DF[,grep('A', names(DF))]  # Sample with columns A
sampB <- DF[,grep('B', names(DF))]  # Sample with columns B

lapply(1:nrow(DF), function(i){
  wilcox.test(as.numeric(sampA[i,]), as.numeric(sampB[i,]), exact=FALSE )
})  # Performing the test 
```

结果如下所示：

```
[[1]]

    Wilcoxon rank sum test with continuity correction

data:  as.numeric(sampA[i, ]) and as.numeric(sampB[i, ]) 
W = 3, p-value = 0.6579
alternative hypothesis: true location shift is not equal to 0 

[[2]]

    Wilcoxon rank sum test with continuity correction

data:  as.numeric(sampA[i, ]) and as.numeric(sampB[i, ]) 
W = 0, p-value = 0.0722
alternative hypothesis: true location shift is not equal to 0 

[[3]]

    Wilcoxon rank sum test with continuity correction

data:  as.numeric(sampA[i, ]) and as.numeric(sampB[i, ]) 
W = 6, p-value = 0.6579
alternative hypothesis: true location shift is not equal to 0 
```

我只显示了前 3 个结果，完整的列表长度为 10，因为`DF`有 10 行。

# facebook - 如何获取评论编辑历史

> ID：12915530
> 
> 赞同：9
> 
> 时间：2012-10-16T13:15:08.283
> 
> 标签：facebook

在 facebook 中，我们现在可以根据需要编辑我们的评论，并且我们可以通过单击已编辑按钮查看编辑历史记录。

但是我无法通过 FQL 或图形 api 获取编辑历史记录，有人知道如何获取吗？

# linux - 我如何获取登录名中第一个字符为“g”的所有用户？

> ID：12915534
> 
> 赞同：-1
> 
> 时间：2012-10-16T13:15:20.137
> 
> 标签：linux, redhat

拜托，任何人都可以帮助我获取登录名中第一个字符为 'g' 的所有用户吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-16T13:39:46.833

```
cat /etc/passwd | cut -d ":" -f 1 | egrep "^g" 
```

足够？

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2021-01-13T00:37:06.767

```
Grep '^g*' /etc/passwd 
```

你可以改变`/etc/passwd`任何你想要的路径

# php - MySQL 在使用压力时不会在谷歌地图上加载标记

> ID：12915535
> 
> 赞同：0
> 
> 时间：2012-10-16T13:15:34.947
> 
> 标签：php, mysql, google-maps-api-3, utf-8

我的 MySQL 有问题，

当我保存对路线名称有压力的路线时，它不会在地图上加载标记，我使用的是 utf8

例如，如果我写：“á、â、ã、ó 等……”我的标记会停止出现在地图上。

PHP解决方案：（唯一有效的方法是使用`str_replace`）

```
function parseToXML($htmlStr) 
{ 
$xmlStr=str_replace('<','&lt;',$htmlStr); 
$xmlStr=str_replace('>','&gt;',$xmlStr); 
$xmlStr=str_replace('"','&quot;',$xmlStr); 
$xmlStr=str_replace("'",'&#39;',$xmlStr); 
$xmlStr=str_replace("&",'&amp;',$xmlStr); 
$xmlStr = str_replace( 'À', '&#192;', $xmlStr ); 
$xmlStr = str_replace( 'Á', '&#193;', $xmlStr ); 
$xmlStr = str_replace( 'Â', '&#194;', $xmlStr ); 
$xmlStr = str_replace( 'Ã', '&#195;', $xmlStr ); 
$xmlStr = str_replace( 'Ä', '&#196;', $xmlStr ); 
$xmlStr = str_replace( 'Å', '&#197;', $xmlStr ); 
$xmlStr = str_replace( 'Æ', '&#198;', $xmlStr ); 
$xmlStr = str_replace( 'Ç', '&#199;', $xmlStr ); 
$xmlStr = str_replace( 'È', '&#200;', $xmlStr ); 
$xmlStr = str_replace( 'É', '&#201;', $xmlStr ); 
$xmlStr = str_replace( 'Ê', '&#202;', $xmlStr ); 
$xmlStr = str_replace( 'Ë', '&#203;', $xmlStr ); 
$xmlStr = str_replace( 'Ì', '&#204;', $xmlStr ); 
$xmlStr = str_replace( 'Í', '&#205;', $xmlStr ); 
$xmlStr = str_replace( 'Î', '&#206;', $xmlStr ); 
$xmlStr = str_replace( 'Ï', '&#207;', $xmlStr ); 
$xmlStr = str_replace( 'Ð', '&#208;', $xmlStr ); 
$xmlStr = str_replace( 'Ñ', '&#209;', $xmlStr ); 
$xmlStr = str_replace( 'Ò', '&#210;', $xmlStr ); 
$xmlStr = str_replace( 'Ó', '&#211;', $xmlStr ); 
$xmlStr = str_replace( 'Ô', '&#212;', $xmlStr ); 
$xmlStr = str_replace( 'Õ', '&#213;', $xmlStr ); 
$xmlStr = str_replace( 'Ö', '&#214;', $xmlStr ); 
$xmlStr = str_replace( '×', '&#215;', $xmlStr );  // Yeah, I know.  But otherwise the gap is confusing.  --Kris 
$xmlStr = str_replace( 'Ø', '&#216;', $xmlStr ); 
$xmlStr = str_replace( 'Ù', '&#217;', $xmlStr ); 
$xmlStr = str_replace( 'Ú', '&#218;', $xmlStr ); 
$xmlStr = str_replace( 'Û', '&#219;', $xmlStr ); 
$xmlStr = str_replace( 'Ü', '&#220;', $xmlStr ); 
$xmlStr = str_replace( 'Ý', '&#221;', $xmlStr ); 
$xmlStr = str_replace( 'Þ', '&#222;', $xmlStr ); 
$xmlStr = str_replace( 'ß', '&#223;', $xmlStr ); 
$xmlStr = str_replace( 'à', '&#224;', $xmlStr ); 
$xmlStr = str_replace( 'á', '&#225;', $xmlStr ); 
$xmlStr = str_replace( 'â', '&#226;', $xmlStr ); 
$xmlStr = str_replace( 'ã', '&#227;', $xmlStr ); 
$xmlStr = str_replace( 'ä', '&#228;', $xmlStr ); 
$xmlStr = str_replace( 'å', '&#229;', $xmlStr ); 
$xmlStr = str_replace( 'æ', '&#230;', $xmlStr ); 
$xmlStr = str_replace( 'ç', '&#231;', $xmlStr ); 
$xmlStr = str_replace( 'è', '&#232;', $xmlStr ); 
$xmlStr = str_replace( 'é', '&#233;', $xmlStr ); 
$xmlStr = str_replace( 'ê', '&#234;', $xmlStr ); 
$xmlStr = str_replace( 'ë', '&#235;', $xmlStr ); 
$xmlStr = str_replace( 'ì', '&#236;', $xmlStr ); 
$xmlStr = str_replace( 'í', '&#237;', $xmlStr ); 
$xmlStr = str_replace( 'î', '&#238;', $xmlStr ); 
$xmlStr = str_replace( 'ï', '&#239;', $xmlStr ); 
$xmlStr = str_replace( 'ð', '&#240;', $xmlStr ); 
$xmlStr = str_replace( 'ñ', '&#241;', $xmlStr ); 
$xmlStr = str_replace( 'ò', '&#242;', $xmlStr ); 
$xmlStr = str_replace( 'ó', '&#243;', $xmlStr ); 
$xmlStr = str_replace( 'ô', '&#244;', $xmlStr ); 
$xmlStr = str_replace( 'õ', '&#245;', $xmlStr ); 
$xmlStr = str_replace( 'ö', '&#246;', $xmlStr ); 
$xmlStr = str_replace( '÷', '&#247;', $xmlStr );
$xmlStr = str_replace( 'ø', '&#248;', $xmlStr ); 
$xmlStr = str_replace( 'ù', '&#249;', $xmlStr ); 
$xmlStr = str_replace( 'ú', '&#250;', $xmlStr ); 
$xmlStr = str_replace( 'û', '&#251;', $xmlStr ); 
$xmlStr = str_replace( 'ü', '&#252;', $xmlStr ); 
$xmlStr = str_replace( 'ý', '&#253;', $xmlStr ); 
$xmlStr = str_replace( 'þ', '&#254;', $xmlStr ); 
$xmlStr = str_replace( 'ÿ', '&#255;', $xmlStr ); 
return $xmlStr; 
} 
```

在 MySQL 上出现带有重音的名称，问题是当我加载它时，问题出在 uft8 还是 PHP 上？

![在此处输入图像描述](../Images/7bce8e43822cdc6639a42930da49eb08.png)

# jquery - 使用 JQuery 加载刷新后，HTML 表行变得太宽

> ID：12915538
> 
> 赞同：4
> 
> 时间：2012-10-16T13:15:48.093
> 
> 标签：jquery, html, asp.net-mvc-3, html-table, partial-page-refresh

我的客户网站有问题（仅在 Internet Explorer 中，使用 Internet Explorer 9 测试）。每次使用 JQuery 的 load-Function 刷新 div 中的表时，单个表行就会变得太宽，如下面的屏幕截图所示。我已经检查了生成的 HTML 代码和 JQuery-Function，我找不到任何错误。

有没有人见过这样的事情或者只是知道如何解决它？

此外，该网站在 Firefox 和 Chrome 中运行良好。

我希望表格具有动态宽度。页面的当前布局由左侧固定宽度的导航区域和右侧的内容区域组成，应该动态缩放。

**格式错误的网站截图**

![最后第三行太宽了](../Images/e3ed9bb2f5610c8e9eed0327cbf983fe.png)

**用于屏幕截图的 Html 代码**

```
<table class="tableBenutzerverwaltung" cellpadding="5px" rules="rows" >
    <thead>
        <tr>
            <td align="right" valign="top" colspan="6"><a href='javascript:showNewUserDialog();' class="NewButton"/></td>
        </tr>
        <tr>
            <th align="left" valign="top">Username</th>
            <th align="left" valign="top">Vorname</th>
            <th align="left" valign="top">Nachname</th>
            <th style="width:16px;">&nbsp;</th>
            <th style="width:16px;">&nbsp;</th>
            <th style="width:16px;">&nbsp;</th>
        </tr>
   </thead>
    <tbody>
            <tr>
                <td align="left" valign="top"><label for="User">UserDomain\JohnDoe</label></td>
                <td align="left" valign="top">John</td>
                <td align="left" valign="top">Doe</td>

                <td align="right" valign="top">&nbsp;</td>
                <td align="right" valign="top"><a href='javascript:showEditUserDialog("b97d5f56-1edc-4dba-b170-f75ccb8f37d2");' class="EditButton"/></td>
                <td align="right" valign="top"><a href='javascript:showDeleteUserDialog("b97d5f56-1edc-4dba-b170-f75ccb8f37d2");' class="Delete"/></td>
            </tr> 
```

**用于刷新表的 JQuery-Code**

```
$(function()
{
    $("#dlgBenutzer").dialog(
    {
        modal: true,
        autoOpen: true,
        resizable: true,
        width: 375,
        height: 220,
        title: "@ViewBag.Title",
        buttons:
        {            
            Speichern: function()
            {
                $.post("@Url.Action("AddUser", "Administration")",
                {
                    objectOneId: $('#userId').val(),
                    username: $('#username').val(),
                    vorname: $('#vorname').val(),
                    nachname: $('#nachname').val()
                },
                function(data, status, xhr)
                {
                    $(".UserList").load("@Url.Action("UserList", "Administration")/?random=" + unique_requestid());
                    $('#dlgBenutzer').dialog("close");
                    $('#dlgBenutzer').dialog("destroy");
                    $('#dlgBenutzer').remove();
                });
            },
            Abbrechen: function()
            {
                $(this).dialog("close");
                $(this).dialog("destroy");
            }
        },
        close: function()
        {
            $(this).dialog('destroy').remove();
        }
    }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T14:50:51.970

我现在自己找到了解决方案。这似乎是我用来生成表的 MVC3 (.NET) 的问题。

如果代码是格式化编写的，它似乎会为随机行添加某种边距。

```
 <tbody>
        @foreach (LE.Library.User user in Model.UserCol.OrderBy(u => u.Name))
        {
            <tr>
                <td style="width: 30%; text-align: left; vertical-align: top;">@Html.Raw(Html.Encode(user.Username))</td>
                <td style="width: 35%; text-align: left; vertical-align: top;">@Html.Raw(Html.Encode(user.Vorname))</td>
                <td style="width: 35%; text-align: left; vertical-align: top;">@Html.Raw(Html.Encode(user.Name))</td>
                <td style="width: 16px; text-align: right; vertical-align: top;">&nbsp;</td>
                <td style="width: 16px; text-align: right; vertical-align: top;"><a href='javascript:showEditUserDialog("@user.ID");' class="EditButton"/></td>
                <td style="width: 16px; text-align: right; vertical-align: top;"><a href='javascript:showDeleteUserDialog("@user.ID");' class="Delete"/></td>
            </tr>            
        }
    </tbody> 
```

如果代码是在没有格式化的情况下编写的（都在一行上），那么输出在任何情况下都很好。

```
 <tbody>
        @foreach (LE.Library.User user in Model.UserCol.OrderBy(u => u.Name))
        {
            <tr><td style="width: 30%; text-align: left; vertical-align: top;">@Html.Raw(Html.Encode(user.Username))</td><td style="width: 35%; text-align: left; vertical-align: top;">@Html.Raw(Html.Encode(user.Vorname))</td><td style="width: 35%; text-align: left; vertical-align: top;">@Html.Raw(Html.Encode(user.Name))</td><td style="width: 16px; text-align: right; vertical-align: top;">&nbsp;</td><td style="width: 16px; text-align: right; vertical-align: top;"><a href='javascript:showEditUserDialog("@user.ID");' class="EditButton"/></td><td style="width: 16px; text-align: right; vertical-align: top;"><a href='javascript:showDeleteUserDialog("@user.ID");' class="Delete"/></td></tr>            
        }
    </tbody> 
```

我不知道这种行为究竟来自哪里。`<TD>`此外，随着列开始自行增加宽度，我不得不为每个列添加宽度。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T13:42:56.007

解决此问题的最简单方法可能是明确定义所需的宽度：

```
<table style="table-layout:fixed;">
    <colgroup>
        <col style="width: 150px;" />
        <col style="width: 130px;" />
        <col style="width: 170px;" />
        <col style="width: 30px;" span="3" />
    </colgroup>
    <!-- Actual table data goes here -->
</table> 
```

这将强制在桌子上明确定义的尺寸，修复大多数不良行为。

# networking - 使用 Wireshark 的 TCP 数据包的 RTT 计时

> ID：12915540
> 
> 赞同：7
> 
> 时间：2012-10-16T13:15:54.793
> 
> 标签：networking, tcp, wireshark

我想计算 TCP 数据包的往返时间。

但是在wireshark中，我没有看到任何特定的RTT时间字段用于TCP数据包，例如RTP数据包。

Wireshark 确实计算了 RTT 图，但我没有找到它是如何计算的。

有人可以帮我找到用于相同的公式吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-16T14:19:52.390

TCP 内部没有任何东西可以提供往返时间。它是由内核根据接收到已发送数据的 ACK 所需的时间来估计的。它记录给定序列号何时发出的时间戳，并将其与相应 ACK 的时间戳进行比较。最初的 3 次握手为此提供了一个不错的起始值。

然而，这只是一个估计，因为如果接收方认为它可以用一个回复来响应多个传入的数据包，它可以在短时间内自由地延迟 ACK。

由于网络条件的变化，RTT 在会话期间经常发生变化。端点越远，效果（显然）越明显。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-03-23T15:01:09.763

如果你想得到由wireshark/tshark计算的RTT的值，下面的技巧让我把它们打印到stdout上：

```
tshark -r myfile.pcap -Y 'ip.addr == AA.BB.CC.DD' -T fields -e tcp.analysis.ack_rtt 
```

（我使用显示过滤器`-Y`将分析限制为仅一台远程主机）

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-03-15T16:21:04.830

如果您使用的是wireshark，它会显示iRtt =initial Round Trip和每个发送数据包的Rtt，只需查看“在新窗口/seq/ack分析中显示数据包”

# php - 不使用php的高效好友建议sql查询

> ID：12915547
> 
> 赞同：2
> 
> 时间：2012-10-16T13:16:13.803
> 
> 标签：php, mysql, sql

我有一个成员表，其中每个站点成员都是唯一的 ID。例如

```
id  firstname   secondname  emailaddress    country city    gender 
```

第二个表是朋友表，结构如下

```
id  meid    friendid    date 
```

我将使用什么查询来根据共同的朋友获取特定用户的朋友建议并进行相应的排序。在我使用 php 循环并收集共同的朋友之前，但随着网站的增长，php 开始出现异常并耗尽内存。

这是我正在使用的功能

```
//-----------------------------------------------    
function getFriendSuggestions($id)    
{
            $friendids=getFriendIdArray($id);  //returns list of your friends
            $networkids=getNetworkIdArray($id);//returns list of all members in your network(friends and their friends)
            $diff=array_merge(array(),array_diff($networkids,$friendids));
            $diff_mutual=array();
            $diff_mutual_total=array();
            for ($n=0;$n<count($diff);$n++)
            {
                $ff=getFriendIdArray($diff[$n]);
                $mf=array_merge(array(),array_intersect($ff,$friendids));
                $diff_mutual[]=$mf;
                $diff_mutual_total[]=count($mf);
            }
            $diff=array_merge(array(),$diff);
            $diff_mutual=array_merge(array(),$diff_mutual);
            $diff_mutual_total=array_merge(array(),$diff_mutual_total);    
            $w=$diff_mutual_total;
            arsort($w);
            $d=array();
            $dm=array();
            foreach ($w as $key => $value)
            {
                $d[]=$diff[$key];
                $dm[]=$diff_mutual[$key];
            }
            $cv=array($d,$dm);
            return $cv;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-16T13:27:13.377

如果有大量此类条目，我们说 B 可能是 A 的朋友

```
(B, someguy) (someguy, A) 
```

在数据库中，并且没有（B，A）条目。

我们知道用户 A 的 ID 并将其设为 AID。然后我们可以这样做：

```
SELECT b.meid, COUNT(b.meid) AS incommon
FROM friends AS b
JOIN friends AS a ON (b.friendid = a.meid AND a.friendid = AID)
GROUP BY b.meid ORDER BY incommon DESC; 
```

这将告诉我们 A 的所有“可能的朋友”，包括那些已经是 A 朋友的人。然后我们必须排除它们：

```
SELECT maybe.meid, maybe.incommon FROM
( SELECT b.meid, COUNT(b.meid) AS incommon
FROM friends AS b
JOIN friends AS a ON (b.friendid = a.meid AND a.friendid = AID)
GROUP BY b.meid ORDER BY incommon DESC ) AS maybe
LEFT JOIN friends AS already ON (maybe.friendid = already.meid AND already.friendid = AID) WHERE already.friendid IS NULL; 
```

然后我们需要填充其余的字段：

```
SELECT members.firstname, members.secondname, maybe.incommon FROM
( SELECT b.meid, COUNT(b.meid) AS incommon
FROM friends AS b
JOIN friends AS a ON (b.friendid = a.meid AND a.friendid = AID)
GROUP BY b.meid ORDER BY incommon DESC ) AS maybe
LEFT JOIN friends AS already ON (maybe.friendid = already.meid AND already.friendid = AID) 
    JOIN members ON (members.id = maybe.meid)
    WHERE already.friendid IS NULL; 
```

这将返回 AID 的朋友建议，包括每个选择有多少共同点（例如“John Doe（15 个共同朋友）”等）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-16T13:25:36.247

你想要*“我朋友的朋友，但不是我的朋友”*。

```
SELECT
  me.id                               AS member_id,
  their_friends.friendid              AS suggested_friend_id,
  COUNT(*)                            AS friends_in_common
FROM
  members        AS me
INNER JOIN
  friends_map    AS my_friends
    ON my_friends.meid = me.id
INNER JOIN
  friends_map    AS their_friends
    ON their_friends.meid = my_friends.friendid
LEFT JOIN
  friends_map    AS friends_with_me
    ON  friends_with_me.meid     = their_friends.friendid
    AND friends_with_me.friendid = me.id
WHERE
  friends_with_me.meid IS NULL
GROUP BY
  me.id,
  their_friends.friendid 
```

# vb.net - 我无法使用 form.ShowDialog() 显示不是顶级的表单

> ID：12915548
> 
> 赞同：0
> 
> 时间：2012-10-16T13:16:18.000
> 
> 标签：vb.net, winforms

我的启动表单是一种模式安全表单，可以正常工作。但是，如果用户“注销”，则安全表单必须再次显示为模式对话框。最后一步是一切都出错的地方。它在我的其他表单之前显示表单，但它不是模态的......

首先，我调用一个在模块中编写的方法，因为我必须能够从我想要的每个表单中调用这个方法。

```
Public Sub CallWaiterKey()
Dim oForm As frmWaiterKey = New frmWaiterKey()
    Try
        If mWaiterKey.Length > 0 And mWaiterKeyType.Length > 0 Then

            If Convert.ToInt32(mWaiterKey) > 0 And Convert.ToInt32(mWaiterKeyType) = 2 Then
                oForm.TypeOfKey = 2
            ElseIf Convert.ToInt32(mWaiterKey) > 0 And Convert.ToInt32(mWaiterKeyType) = 1 Then
                oForm.TypeOfKey = 1
            End If
            'here it goes wrong
            oForm.ShowDialog()
        End If

    Catch ex As Exception
        MsgBox(ex)
    End Try
End Sub 
```

当我调用`oForm.ShowDialog()`（即`frmWaiterKey`）时，它会出现但不是模态的。我仍然可以单击放置在`frmMenu`我调用的表单上的按钮`CallWaiterKey()`。

我在这里做错了吗？
还是我应该以其他方式拨打电话？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T13:43:00.620

我不使用 ShowDialog；但我**相信**您需要指定窗口所有者才能强制执行该模式。如果我在这里错了，其他人会纠正我。

```
oForm.ShowDialog(me) 
```

** HOLD ON ** 我会在一秒钟内改变这个，我刚刚记得你是从一个模块调用的，**我**没有在一个基本模块中进行评估。

这是一个[MSDN 参考](http://msdn.microsoft.com/en-us/library/system.windows.forms.form.showdialog%28vs.71%29.aspx)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-16T13:49:36.793

（我的 VB 很烂所以忽略语法错误）

要实现您的要求，请指定托管表单。

```
Public Sub CallWaiterKey(ownerForm as Form)
  Dim oForm As frmWaiterKey = New frmWaiterKey()
     ' .... 
            'here it goes wrong
            oForm.ShowDialog(ownerForm)
     ' ....
End Sub 
```

# r - 在 r 中创建漂亮的输出

> ID：12915550
> 
> 赞同：0
> 
> 时间：2012-10-16T13:16:23.553
> 
> 标签：r, output

我正在从数据集进行大量计算，我想在 txt 文档中以结构化和有序的方式显示最终结果。

到目前为止，我已经尝试了一些非常混乱但它有点工作的东西（见下文），但我确信有更好、更优雅的解决方案。使用 cbind 时，我在数据顶部获得了 [,1] [,2] 等标签，并且在输出中不需要它们。

```
 id = c(1, 2,3,4)
  age = c(10, 12, 14, 17)
  gender = c("m", "f", "m", "f")
  dataset = data.frame (id,age, gender)
  attach (dataset)
  space = "+++++++++++++++++++++++++++++++"
  print1 = summary (dataset)
  print2 = cbind("age oldest student", max(age))
  printfull = capture.output(print1, space, print2, space)
  write.table(printfull, "C:/Users/me/Desktop/dataset123.txt") 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T13:25:58.410

您可以使用 RJSONIO 将您的 r 对象转换为 json

```
library('RJSONIO')
toJSON(list(list(1,2,3),1,2,4:5)) 
```

# java - 如何获取从客户端位置到服务器的正确时间

> ID：12915551
> 
> 赞同：0
> 
> 时间：2012-10-16T13:16:28.803
> 
> 标签：java, web-services, web

我的客户分布在不同的国家。但是，我的服务器在不同的国家。然后在服务器上，我如何才能在我的客户端上获得时间。我知道我可以使用脚本来获取客户端机器上的系统时间。但是，如果我的客户机器上的时间设置不正确，这将失败。

有什么建议么 ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T13:24:10.383

```
// if you try to print it, it will return something like:
// Sat Mar 21 2009 20:13:07 GMT-0400 (Eastern Daylight Time)
// This time comes from the user's machine.
var myDate = new Date();

//Pass myDate to the server by loading something with an ajax call
$(someSelector).load('serviceurl.com?d='+myDate) 
```

使用服务器端脚本处理以 $_GET['d'] 形式接收的数据

要检查时间是否正确，您可以使用三方服务，但这更有可能让您获得错误的数据，然后是客户端计算机上的系统时间。有关详细信息[IP 到位置 + 本地时间，请参阅此内容？](https://stackoverflow.com/questions/5828228/ip-to-location-local-time)

# icalendar - 无法在 Mountain Lion 中订阅基于 ics 的日历

> ID：12915555
> 
> 赞同：0
> 
> 时间：2012-10-16T13:16:41.377
> 
> 标签：icalendar

我有一个基于 iCalendar ics 的日历，我在我的网站上发布。在 Outlook (Windows)、iCal (SL、Lion) 和 GMail 中运行良好。我只是无法在 ML 的日历 6.0 中订阅这个。

为了验证不仅仅是我疯了，我从 Apple (webcal://ical.mac.com/ical/US32Holidays.ics) 下载了一个在 ML 中工作的工作 ics，并将它上传到我的网站 webcal:// www.gbnetworksinc.com/US32Holidays.ics 并引发相同的错误。

“订阅日历的请求存在未指定的错误（错误 -1）”

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T11:54:42.413

Maky，我遇到了同样的问题。

如果您正在运行 IIS 服务器，则必须将 .ics 的 MIME 类型更改为 text/calendar ，这应该可以解决问题！

# mongodb - 使用 MongoDB 存储缩略图的推荐方法是什么？

> ID：12915564
> 
> 赞同：1
> 
> 时间：2012-10-16T13:17:13.730
> 
> 标签：mongodb, gridfs

使用 MongoDB 存储缩略图的推荐方法是什么？（注意：图像只是缩略图，实际大图不是必需的）我可以将它以字节存储在文档中吗？还是我应该使用 GridFS？缩略图实际上是一个小图标，在查询时始终作为完整文档的一部分返回。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-16T14:26:41.053

存储每个文档可能是这里的最佳方法，因为 gridfs 会分配不需要的空间和范围以适应每个块的标准 256k（如此处所述：[http](http://www.mongodb.org/display/DOCS/GridFS+Specification) ://www.mongodb.org/display/DOCS/GridFS+Specification ）大小`fs.chunks`集合内。

此外，正如您所说，这些是缩略图，因此您可能希望将它们与主文档一起使用，因此看起来很自然，不仅您的编程而且您的数据库使用更有效地返回此图像及其主文档文档。

# html - 在 Firefox 和 IE 中无法通过表格单元格的左边框

> ID：12915566
> 
> 赞同：0
> 
> 时间：2012-10-16T13:17:27.600
> 
> 标签：html, css, html-table, border

我正在尝试为表格单元格提供左边框。它在 Chrome 中运行良好，但在 Firefox 和 IE 中不显示边框。

我在文档中看到左右边界没有得到广泛支持，但也许有一种解决方法，或者我在代码中做错了什么。

奇怪的是，我的表格中有圆形边框，有左边框和下边框，它们在每个浏览器上都显示得很好。

以下是相关代码：

```
<tr class="Panel_Middle_Row">
    <td class="Panel_Middle_Left_Cell" width="20"></td>
    <td class="Panel_Middle_Middle_Cell">blablabla</td>
    <td class="Panel_Middle_Right_Cell"></td>
</tr> 
```

和相应的CSS：

```
.Panel_Middle_Left_Cell {
  width: 20px;
  border-left-style:solid;
  border-left-color:#CCC;
  border-left-width:2px;
}
.Panel_Middle_Right_Cell {
  width: 20px;
  border-right-style:solid;
  border-right-color:#CCC;
  border-right-width:2px;*/
} 
```

[你可以在这里](http://cryo.dixys.com/Code/Webshop/WS_Shop.asp?CID=157&SCID=0&AID=1&LC=NL)找到一个例子。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T13:25:14.043

你`td`是空的，因为它们没有显示出来。添加一个`&nbsp;`.

或将其添加到您的表类中：`empty-cells: show;`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T13:29:21.450

试试这个：

```
<!DOCTYPE html>
<html>
<head>
<style>    
td.Panel_Middle_Left_Cell {
  width: 20px;
  border-left-style:solid;
  border-left-color:#CCC;
  border-left-width:2px;
}

td.Panel_Middle_Right_Cell {
  width: 20px;
  border-right-style:solid;
  border-right-color:#CCC;
  border-right-width:2px;
}
</style>
</head>

<body>
<table>
<tr class="Panel_Middle_Row">
    <td class="Panel_Middle_Left_Cell">jcjgcjgc</td>
    <td class="Panel_Middle_Middle_Cell">blablabla</td>
    <td class="Panel_Middle_Right_Cell"></td>
</tr>
</table>
</body>
</html> 
```

# scala - 使用 Scala Akka 框架来阻止 CLI 调用

> ID：12915570
> 
> 赞同：4
> 
> 时间：2012-10-16T13:17:30.843
> 
> 标签：scala, akka, blocking

我对 Akka 和 Scala 比较陌生，但我想使用 Akka 作为通用框架来收集来自各种 Web 工具和 cli 命令的信息。

我理解在演员模型中的一般原则，非常希望不要让演员阻塞。对于 http 请求，有异步 http 客户端（例如 Spray），这意味着我可以在 Actor 框架内异步处理请求。

但是，我不确定将参与者与现有的阻塞 API 调用（例如 scala ProcessBuilder/ProcessIO 库）结合起来的最佳方法是什么。在发出这些 CLI 命令方面，我预计并发量相对较少，例如，可能在 12 核机器上执行最多 10 个并发 CLI 调用。

让单个参与者管理这些 CLI 命令，将实际工作分配给根据需要创建的 Future 是否更好？或者仅仅维护一组由 PinnedDispatcher 支持的独立参与者会更干净吗？或者是其他东西？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-16T13:31:51.467

从 Akka 文档（[http://doc.akka.io/docs/akka/snapshot/general/actor-systems.html#Blocking_Needs_Careful_Management](http://doc.akka.io/docs/akka/snapshot/general/actor-systems.html#Blocking_Needs_Careful_Management)）：

" ***阻塞需要小心管理***

在某些情况下，不可避免地会进行阻塞操作，即让线程休眠一段不确定的时间，等待外部事件发生。示例是遗留的 RDBMS 驱动程序或消息传递 API，并且通常（网络）I/O 发生在幕后的根本原因。面对这种情况，您可能会想将阻塞调用包装在 Future 中并使用它来代替，但是这种策略太简单了：当应用程序运行时，您很可能会发现瓶颈或内存或线程不足在增加的负载下。

“阻塞问题”的适当解决方案的非详尽列表包括以下建议：

*   在一个actor（或由路由器[Java，Scala]管理的一组actor）中执行阻塞调用，确保配置一个专用于此目的或足够大的线程池。
*   在 Future 中执行阻塞调用，确保在任何时间点此类调用的数量都有上限（提交无限数量的这种性质的任务将耗尽您的内存或线程限制）。
*   在 Future 中执行阻塞调用，为线程池提供一个线程数上限，该上限适用于运行应用程序的硬件。专用单个线程来管理一组阻塞资源（例如，驱动多个通道的 NIO 选择器）并在事件作为参与者消息发生时分派事件。

第一种可能性特别适合本质上是单线程的资源，例如传统上一次只能执行一个未完成的查询并使用内部同步来确保这一点的数据库句柄。一种常见的模式是为 N 个参与者创建一个路由器，每个参与者都包装一个 DB 连接并处理发送到路由器的查询。然后必须调整数字 N 以获得最大吞吐量，这将取决于部署在什么硬件上的 DBMS。”

# jquery - 关于 jquery 基本滑块和 jquery UI 选项卡的问题？

> ID：12915579
> 
> 赞同：0
> 
> 时间：2012-10-16T13:17:58.717
> 
> 标签：jquery

我无法同时使用 Jquery 滑块和 jquery UI 选项卡。当时只有一个滑块或选项卡在工作。在将脚本保留在网页中的同时，是否有任何顺序需要维护...

```
<!Doctype html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <title> My website</title>
    <!--slylesheet-->
    <link rel="Shortcut Icon" href="images/favicon.ico">
    <link rel="stylesheet" type="text/css" href="reset.css">
    <link rel="stylesheet" type="text/css" href="respon.css">
    <!--flexslider-->

    <link rel="stylesheet" href="flexslider.css" type="text/css" media="screen" />
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1/jquery.min.js"></script>

    <script src="jquery.flexslider-min.js"></script>
    <script src="jquery.flexslider.js"></script>
    <script type="text/javascript">
            $(window).load(function() {
                $('.flexslider').flexslider(){
                  animation: "slide",
                  controlsContainer: ".flexslider-container"
              });
            });

        </script>

        <!--jquery UI tab-->
        <link rel="stylesheet" href="tab.css" />
    <script src="http://code.jquery.com/jquery-1.8.2.js"></script>
    <script src="http://code.jquery.com/ui/1.9.0/jquery-ui.js"></script>
    <link rel="stylesheet" href="/resources/demos/style.css" />
    <script>
    $(function() {
        $( "#tabs" ).tabs();
    });
    </script>

</head>
<body>
    </html> 
```

# javascript - 消除控制台中的 404 url 错误？

> ID：12915582
> 
> 赞同：14
> 
> 时间：2012-10-16T13:18:19.833
> 
> 标签：javascript, jquery, safari, console, web-inspector

我尝试消除由于缺少源（src）而发生的 404 错误..

```
var $chart = $("<img />")
    .addClass("trend-pic")
    .error(function(){
        console.log("error loading..")
    });
try{
    $chart.attr("src", jobs[counter].url + "test/trend")
}catch(err){
    $chart.attr("src", "");
} 
```

如果尝试了很多东西来捕捉错误，即`.error(function(){})`在最后放置一个。使用`$chart.load()`- 方法检查图像是否被加载？这些都没有帮助？

`GET {myURLString} 404 (Not Found)`

浏览器：Safari

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T13:21:57.017

您不能真正从控制台中删除那些 404 错误。您能做的最好的事情是进行一些 ajax 调用并查看返回码，但随后您将被限制为仅向您自己的域请求。

编辑 -

哦，是的，这些错误将继续显示在“请求”选项卡中！它们只是不会出现在“控制台”选项卡中（在 Chrome 中）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T13:28:52.967

我认为除了使用正确的 url 之外，没有办法消除控制台中的错误。在带有 try {} catch() 的代码中，会抛出错误，`$chart.attr`并将使用空字符串再次调用。

您可以做的是在设置之前添加这样的检查`.attr()`

```
if (jobs[counter].url !== void 0 && 
    jobs[counter].url.length !== 0) {

       $chart.attr("src", jobs[counter].url + "test/trend")
} 
```

所以你可以删除 try{} catch()

希望能帮助到你。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-06-24T10:00:21.107

Ajax 仍然在未找到的文件上引发错误 (404)

我正在使用这个功能

```
function doIfFileServerAccessible(url, callbackFileServerAccessible, callbackNotFileServerAccessible) {
  try {
    var xhr = new XMLHttpRequest();
    xhr.open('HEAD', url, true);
    xhr.onreadystatechange = function () {
      if (this.readyState !== 4) { return; };
      if (this.status !== 200) {
        //alert('file on your site not found');
        callbackNotFileServerAccessible(this.responseText); return;
      } else {
        //alert('file on your site FOUND');
        callbackFileServerAccessible(this.responseText);
      };
    };
  } catch (error) { }

  try {
    xhr.send(); 
  } catch (error) { }
}

function callbackNotFileServerAccessible() {
  //example
  element.src = other
}

function callbackFileServerAccessible() {
  element.src = the one you tried
} 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2017-09-28T12:22:08.237

答案是否定的。因为这是服务器发送“有错误”的唯一方式。

参考这个。

[防止控制台出现 404 错误](https://stackoverflow.com/questions/7035466/check-if-file-exists-but-prevent-404-error-in-console-from-showing-up)

* * *

## 回答 #5

> 赞同：-3
> 
> 时间：2012-10-16T13:31:37.957

404 不是错误。这是服务器表示它没有客户端引用的源的方式。

# java - JAVA for windows mobile 5.0

> ID：12915583
> 
> 赞同：1
> 
> 时间：2012-10-16T13:18:20.423
> 
> 标签：java, windows-mobile-5.0

我为运行 windows mobile 5.0 的扫描仪编写的应用程序遇到了这个问题。我不知道这是什么意思，有一些Java Cre-Me，windows mobile 经验的人可以提供一些帮助吗？

执行时出现错误：

```
java.lang.UnsatisfiedLinkError: no SymbolJavaApi in java.library.path
    at java.lang.ClassLoader.loadLibraryInternal() 
    at java.lang.ClassLoader.loadLibrary()
    at java.lang.Runtime.loadLibrary0()
    at java.lang.System.loadLibrary()
    at 
    at com.vmt.plugins.symbol.barcodescanner.services.ScannerImplementation.read()
    at com.vmt.plugins.symbol.barcodescanner.ScannerPlugin.invoke()
    at ScannerTest.startScanning()
    at ScannerTest.createwindow()
    at ScannerTest.main() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T13:26:56.600

对于`UnsatisfiedLinkError`，JDK 声明：

> 如果 Java 虚拟机找不到声明为本地的方法的适当本地语言定义，则抛出此异常。

这意味着内部有一个方法`ScannerImplementation.read()`是本机调用定义，它不能在`java.library.path`或任何系统定义的库中。

这意味着您需要的 DLL`ScannerImplementation`未在 Java LIB 路径中注册，因此 JVM 无法进行本机调用。

我希望这有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T13:27:26.757

Java 类加载器尝试访问 Symbol API，但在给定的库路径中找不到所需的库。

在桌面系统上，我会说你需要：

1.  相应地扩展类路径或
2.  将缺少的外部 DLL 复制到应用程序所在的路径

我确信 Symbol/Motorola 有一些示例，您可以在其中了解如何执行此操作 - 也许您需要先使用 CAB 文件将类安装到设备上。

我来自 .NET 背景，为此，有一个 Symbol API CAB 文件，它将所需的 DLL 安装到设备上。

# c# - 天蓝色队列性能

> ID：12915585
> 
> 赞同：2
> 
> 时间：2012-10-16T13:18:32.493
> 
> 标签：c#, performance, azure

对于 Windows azure 队列，每个存储的可扩展性目标应该是大约 500 条消息/秒 ( [http://msdn.microsoft.com/en-us/library/windowsazure/hh697709.aspx](http://msdn.microsoft.com/en-us/library/windowsazure/hh697709.aspx) )。我有以下简单的程序，它只是将一些消息写入队列。该程序需要 10 秒才能完成（4 条消息/秒）。我正在从虚拟机内部（在西欧）运行该程序，并且我的存储帐户也位于西欧。我没有为我的存储设置异地复制。我的连接字符串设置为使用 http 协议。

```
 // http://blogs.msdn.com/b/windowsazurestorage/archive/2010/06/25/nagle-s-algorithm-is-not-friendly-towards-small-requests.aspx
        ServicePointManager.UseNagleAlgorithm = false;

        CloudStorageAccount storageAccount=CloudStorageAccount.Parse(ConfigurationManager.AppSettings["DataConnectionString"]);

        var cloudQueueClient = storageAccount.CreateCloudQueueClient();

        var queue = cloudQueueClient.GetQueueReference(Guid.NewGuid().ToString());

        queue.CreateIfNotExist();
        var w = new Stopwatch();
        w.Start();
        for (int i = 0; i < 50;i++ )
        {
            Console.WriteLine("nr {0}",i);
            queue.AddMessage(new CloudQueueMessage("hello "+i));    
        }

        w.Stop();
        Console.WriteLine("elapsed: {0}", w.ElapsedMilliseconds);
        queue.Delete(); 
```

知道如何获得更好的性能吗？

编辑：

根据 Sandrino Di Mattia 的回答，我重新分析了我最初发布的代码，发现它不够完整，无法重现错误。事实上，我在调用 ServicePointManager.UseNagleAlgorithm = false; 之前创建了一个队列。重现我的问题的代码看起来更像这样：

```
 CloudStorageAccount storageAccount=CloudStorageAccount.Parse(ConfigurationManager.AppSettings["DataConnectionString"]);

        var cloudQueueClient = storageAccount.CreateCloudQueueClient();

        var queue = cloudQueueClient.GetQueueReference(Guid.NewGuid().ToString());

        //ServicePointManager.UseNagleAlgorithm = false; // If you change the nagle algorithm here, the performance will be okay.
        queue.CreateIfNotExist();
        ServicePointManager.UseNagleAlgorithm = false; // TOO LATE, the queue is already created without 'nagle'
        var w = new Stopwatch();
        w.Start();
        for (int i = 0; i < 50;i++ )
        {
            Console.WriteLine("nr {0}",i);
            queue.AddMessage(new CloudQueueMessage("hello "+i));    
        }

        w.Stop();
        Console.WriteLine("elapsed: {0}", w.ElapsedMilliseconds);
        queue.Delete(); 
```

Sandrino 建议的使用 app.config 文件配置 ServicePointManager 的解决方案的优点是 ServicePointManager 在应用程序启动时被初始化，因此您不必担心时间依赖性。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-16T13:44:12.323

几天前我回答了一个类似的问题：[如何使用 azure storage tables 实现每秒更多 10 次插入](https://stackoverflow.com/questions/12750302/how-to-achive-more-10-inserts-per-second-with-azure-storage-tables/12750535#12750535)。

在表存储中添加 1000 个项目需要 3 多分钟，而随着我在回答中描述的更改，它下降到 4 秒（250 个请求/秒）。最后，表存储和存储队列并没有什么不同。后端是相同的，数据只是以不同的方式存储。而且表存储和队列都通过 REST API 公开，因此如果您改进处理请求的方式，您将获得更好的性能。

最重要的变化：

*   `expect100Continue`： 错误的
*   `useNagleAlgorithm`: false （你已经这样做了）
*   并行请求结合`connectionManagement/maxconnection`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-22T20:21:39.670

此外，ServicePointManager.DefaultConnectionLimit 应在创建服务点之前增加。实际上 Sandrino 的回答说的是同样的事情，但使用的是 config.

即使在云中也关闭代理检测。在代理配置元素中自动检测。减慢初始化。

选择分布式分区键。

将您的帐户配置在计算和客户附近。

设计以根据需要添加更多帐户。

截至 2012 年 7 月，Microsoft 将队列和表的 SLA 设置为 2,000 tps。

抱歉，我没有阅读 Sandrino 的链接答案，只是在这个问题上，因为我正在观看 Build 2012 会议。

# c# - 从旧网站创建新网站

> ID：12915589
> 
> 赞同：1
> 
> 时间：2012-10-16T13:18:45.193
> 
> 标签：c#, entity-framework-4, asp.net-mvc-4

我有一个使用 Entity Framework 和 LINQ 创建的网站，我稍微修改了模型并更改了表和关系的名称，以便在编码时看起来更好。现在我想使用这种结构创建一个新网站。

但是如果我将 DB.edmx 和 DB.Designer.cs 复制到新项目中，我不会将表映射到数据库。

唯一的解决方案是删除表并再次更新模型，但我不想这样做，因为我会丢失对模型的所有修改，并且我的代码结构会产生错误，因为我没有例如db.Products，我会有 db.products（-> 数据库中表的实际名称）。

如何从旧项目创建一个新项目，以便保留其大部分功能，只更改视图并拥有一个良好的网站？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T15:56:43.500

我不确定这是否是“正确”的方法，但这是我为基于包含数据库/模型的模板的网站所做的。

我生成脚本来重新创建数据库，并将其保存为项目模板的一部分。然后我在“新”数据库上运行该脚本，并修改新项目中 EF 连接的配置以指向新数据库。

我不会在这些步骤之间做任何机会；这可以确保 EF 在其“新”位置看到“相同”的数据库，并且一切都应该从那里正常工作。同样，前提是您在此期间不进行任何更改。（您可以在之后更改内容，然后刷新模型）

# java - Java，运行时错误

> ID：12915590
> 
> 赞同：-6
> 
> 时间：2012-10-16T13:18:48.893
> 
> 标签：java, runtime-error

当您在执行程序时看到这些运行时错误时会发生什么。

1.  `Exception in thread "main" java.lang.NullPointerException at WhatHappens.main(WhatHappens.java:7)`
2.  `Exception in thread "main" java.lang.NoClassDefFoundError: WhatHappen`
3.  `Exception in thread "main" java.lang.ArrayIndexOutOfBoundsException at WhatHappens.main(WhatHappens.java:6)`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T13:26:50.733

我假设这个问题真的是已经发生的事情：

1.  您试图取消引用`null`; 例如使用它调用一个方法，使用它访问一个字段等等。这通常是由于某些代码忽略了初始化类或实例变量或数组元素造成的。

2.  类加载或类初始化失败。有很多事情会导致这种情况。

3.  您尝试使用超出允许范围的索引值来索引数组；即索引值小于零，或大于`array.length - 1`。

* * *

如果你真的想知道异常抛出后会发生什么，答案是除非某些代码捕获到异常，否则当前线程或整个应用程序都会死掉。

接下来你应该做的是找到问题的原因并解决它。关键是首先要了解导致异常抛出的原因；看上面。检查堆栈跟踪，阅读错误消息，从堆栈跟踪中读取类名/行号以找出代码的位置......并利用您的分析能力找出具体导致问题的原因。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2017-03-27T13:14:10.690

java运行时错误主要是由于环境变量设置不当造成的。这可以通过右键单击我的电脑有一个名为环境变量的选项并将您的java jdk bin路径添加到它来完成。例如。C:\Program Files\Java\jdk1.8.0_65\bin

[jre错误已解决](https://www.youtube.com/watch?v=wekrWcJTGdo)

# iphone - 更改 rootviewcontroller +[NSNotificationCenter dictationViewClass] 后出错

> ID：12915593
> 
> 赞同：0
> 
> 时间：2012-10-16T13:19:04.427
> 
> 标签：iphone, objective-c, ios, nsnotificationcenter

更改 UIWindow 的 rootViewControler 后出现以下错误。

```
2012-10-16 15:12:35.653 repdocApp[22898:c07] *** Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: '+[NSNotificationCenter dictationViewClass]: unrecognized selector sent to class 0x1d63914' 
```

奇怪的是，只有当我的代码中有一行此时永远不会执行时才会发生。

```
-(void)collectionView:(UICollectionView *)collectionView didSelectItemAtIndexPath:(NSIndexPath *)indexPath
{   
    AppDelegate *app = (AppDelegate *) [[UIApplication sharedApplication] delegate];
    OverviewModel *model = [self.dataArray objectAtIndex:indexPath.row];

if (model.modelType == ModelTypeCatalog)
{
     NSLog(@"HERE");
    if (app.window.rootViewController == app.catalogViewController)
    {
        return;
    }
    // with this return no error but this branch is never executed
    // return;
    [UIView transitionFromView:app.window.rootViewController.view
                        toView:app.catalogViewController.view
                      duration:0.45f
                       options:UIViewAnimationOptionTransitionCrossDissolve
                    completion:^(BOOL finished){
                        app.window.rootViewController = app.catalogViewController;
                    }];
}
else
{
    if (app.window.rootViewController == app.catalogViewController)
    {
        [app.navigationPopoverController dismissPopoverAnimated:NO];
        [UIView transitionFromView:app.window.rootViewController.view
                            toView:app.splitViewController.view
                          duration:0.45f
                           options:UIViewAnimationOptionTransitionCrossDissolve
                        completion:^(BOOL finished){
                            app.window.rootViewController = app.splitViewController;
                        }];
    }
} 
```

}

我搜索了整个互联网，但我没有发现任何关于 +[NSNotificationCenter dictationViewClass] 或这可能是什么的信息。

编辑：我现在注意到，只有当我在转换中更改 rootViewController 时才会发生，如果我直接这样做，则不会发生错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T13:31:59.903

您的错误日志`is 2012-10-16 15:12:35.653 repdocApp[22898:c07] Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: '+[NSNotificationCenter dictationViewClass]: unrecognized selector sent to class 0x1d63914`

您正在调用错误的方法。`dictationViewClass`ios中不存在。这只是意味着您正在尝试调用对应类（`NSNotificationCenter`）不存在的方法。您应该如下更改设置通知

```
 [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(yourMethodWantToExcute:) name:@"NSNotificationName" object:nil]; 
```

我希望它对你有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T13:25:23.007

发送到类的无法识别的选择器意味着没有为这个类定义这样的方法。尝试：

1.  删除该行并尝试它是否有效。
2.  如果包含此方法，请在您的来源中查找类别
3.  编写自己的同名空白方法
4.  试着弄清楚这个方法的意义并实现它

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-19T06:40:35.417

这不是一个真正的答案，但无论动画如何，不同的动作都会再次发生相同的错误。问题似乎是rootviewcontroller的变化，我用隐藏的tabbarcontroller替换它并在选项卡之间切换，问题就消失了。

# ruby-on-rails - 如何为 Sunspot 编写 rspec 测试

> ID：12915594
> 
> 赞同：1
> 
> 时间：2012-10-16T13:19:05.713
> 
> 标签：ruby-on-rails, rspec, sunspot

运行测试后，我修改了覆盖范围。我不知道如何编写测试的一件事是：

```
 def index_advt
    Sunspot.index(advt) if advt
  end 
```

会有什么线索吗？

# javascript - 测试是否真的在 HTML5 画布上绘制了形状

> ID：12915598
> 
> 赞同：3
> 
> 时间：2012-10-16T13:19:18.830
> 
> 标签：javascript, html, html5-canvas

> **可能重复：**
> [HTML Canvas 单元测试](https://stackoverflow.com/questions/4406864/html-canvas-unit-testing)

我想编写一个单元测试（使用 Jasmine）来确定一个函数是否正确地在 HTML5 画布上绘制了一些线条。这是被测代码的简化版本：

```
var plotter = {};
plotter.draw = function(input) {
    var canvas = document.createElement('canvas');
    var context = canvas.getContext('2d');
    context.beginPath();
    context.lineWidth = 5;
    context.moveTo(input.startX, input.startY);
    context.lineTo(input.endX, input.endY);
    context.stroke();
    return canvas;
}; 
```

如何检查画布以确保绘图功能正常工作？可能吗？如果不是，最好将一些元数据与画布一起返回，然后检查元数据？

# ios - 如何在 iOS 上创建具有 3 个按钮的复选框的自定义 UIAlertView

> ID：12915604
> 
> 赞同：-1
> 
> 时间：2012-10-16T13:19:39.723
> 
> 标签：ios, uiview, uialertview

我想创建一个弹出对话框，它有一个标签、复选框（不是 Switch）和 3 个按钮。我还想自定义文本和按钮的字体、文本和颜色。继承 UIView 是否比继承 UIAlertView 更好？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T13:28:40.483

在我看来，你应该继承 UIView 来创建一个很好的可定制的弹出对话框。我为我的一个应用程序这样做了，它真的像一个魅力。
为了获得与 UIAlertView 类似的弹出效果，我使用了 3 个动画。第一个将视图的比例从 0.001 更改为 1.1，第二个更改为 0.9，最后一个更改为 1。所有动画持续 0.3 秒
，你有它！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T13:27:25.240

UIAlertView 非常有限。使用普通的 UIView，并以模态方式呈现。或使用 UIAlertView 替代品，例如[TSAlertView](https://github.com/TomSwift/TSAlertView)

# php - 使用 ajax 显示 MySQL 数据

> ID：12915605
> 
> 赞同：0
> 
> 时间：2012-10-16T13:19:40.280
> 
> 标签：php, javascript, ajax, jquery

嗨，我是 php 新手，我真的不知道 ajax。我制作了一个照片库网站我使用下面的代码来显示我需要使用 ajax 或任何其他语言实现的照片，当有人点击 index.php 中的照片时，标题示例：“2012 年快乐的一天”想要这张照片显示在另一个页面示例：“photo/happy-day-2012”

```
<?php 
$link = mysql_connect("localhost", "root","");
mysql_select_db("test", $link);
$query = "select * from post order by id DESC;";
$results = mysql_query($query, $link) or die ("error!".mysql_error());
if($results){
$i = 1;
while ($row = mysql_fetch_assoc($results)){
echo $row['title']. "<img src=/1/" . $row['location']."width=580px>"."<br/><br/><br/>";
}
}
?> 
```

如果可能，请对代码使用大量注释。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T23:28:35.300

根据之前的评论，您不需要 AJAX，您真正需要的是 mod_rewrite。mod_rewrite 是一个 Apache 模块，可让您根据某种模式或规则重写 url。为此，通常使用 .htaccess 文件（该文件应位于您的站点根目录中）。如果您使用的是开发机器，请确保您已在 Apache 配置文件中启用 AllowOverride。

之后你可以轻松地做这样的事情

```
<IfModule mod_rewrite.c>
  RewriteEngine On
  RewriteBase /
  RewriteRule    ^photo/(.+)$ viewer.php?photo=$1 [L]
</IfModule> 
```

这是一个非常粗略的示例，但基本上它的作用是...检测 URI 何时以“photo/”开头并将之后的所有内容发送到另一个 URL（$1 引用找到的内容）。

稍后，您可以在**viewer.php上使用****$_GET['photo']**变量确定要显示的内容。

但是，如果您是 PHP 新手，这还是相当先进的。

# c - 通过分解空指针显着减少编译代码大小

> ID：12915606
> 
> 赞同：0
> 
> 时间：2012-10-16T13:19:41.657
> 
> 标签：c, optimization, microcontroller, void-pointers, code-size

我最近一直在用 C 语言为一个只有 2kB 闪存的微控制器开发一些嵌入式软件。在编程结束时，我一直在达到代码限制。到现在为止，当这种情况发生时，我一直在提高编译器优化的水平，重新测试，然后愉快地继续。但是，我最近达到了优化的极限，并且添加了最后一点功能，再次耗尽了内存。结果，我不得不让 George Foreman 了解我的源代码并消耗一些脂肪。

我在这里和那里减少了一些抽象层，这有点帮助但还不够。接下来我看到的是我有函数原型

```
void process_event(Event event, void *data); 
```

它将要处理的事件和可用于将附加数据传递给调用的空指针作为其*参数*。如果我不需要任何额外的数据，我通过`NULL`. 这个函数是在开发的早期写的，我意识到我从来没有使用过`data`，所以我把它分解了。这一更改为我节省了所需的编译代码大小（~100 字节），我想知道*为什么*，特别是考虑到我通常`NULL`在`process_event`被调用时通过？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T14:10:12.917

大约 100 个字节可能与您的调用站点在每次调用该函数时都必须传递一个额外参数这一事实相符——这至少需要清除一个寄存器，并且根据您的芯片，将其存储在调用前堆栈。

每次调用减少一条指令的这种简单减少也可能导致删除更多代码，这完全取决于跳转的实现方式，因为您可能会发现某些代码现在位于使用较短相对偏移量的跳转指令的范围内而不是一个长的。尝试加载常量时可以进行类似的节省。

# progress-bar - NSIS中的进度条位置

> ID：12915612
> 
> 赞同：0
> 
> 时间：2012-10-16T13:19:50.293
> 
> 标签：progress-bar, nsis

如何更改进度条位置，例如在安装页面上并将其放置在表单的中心而不是默认的顶部位置？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T14:20:14.967

**A)使用**[Resource Hacker](http://www.angusj.com/resourcehacker/)编辑其中一个 UI 文件并使用[ChangeUI](http://anders_k.users.sourceforge.net/public/NSIS/2.46/Manual.html#achangeui)应用它

或者

**B）**在运行时更改它：

```
outfile "$%temp%\test.exe"
requestexecutionlevel user
showinstdetails nevershow

Page instfiles "" instfilesshow

Function instfilesshow
FindWindow $9 "#32770" "" $HWNDPARENT
GetDlgItem $8 $9 0x3EC
System::Call '*(i,i,i,i)i.r7' ; Allocate a RECT struct
System::Call 'USER32::GetClientRect(ir9,ir7)'
System::Call '*$7(i,i,i.r0,i.r1)' ; Get inner dialog width/height
System::Call 'USER32::GetWindowRect(ir8,ir7)'
System::Call '*$7(i.r2,i.r3,i.r4,i.r5)'
System::Free $7
IntOp $5 $5 - $3 ; progress height
StrCpy $2 10 ; left padding
IntOp $4 $0 - 20 ; width = dialog - left+right padding
IntOp $0 $5 / 2
IntOp $1 $1 / 2
IntOp $1 $1 - $0
!define SWP_NOZORDER 4
System::Call 'USER32::SetWindowPos(ir8,i0,ir2,ir1,ir4,ir5,i${SWP_NOZORDER})'
FunctionEnd

Section
SectionEnd 
```

# php - 日期字段正则表达式

> ID：12915614
> 
> 赞同：-3
> 
> 时间：2012-10-16T13:19:58.973
> 
> 标签：php, regex, validation

与之前的问题类似，我想请求一个正则表达式，因为我不需要自己编写它的知识......

我能否得到以下示例，作为正则表达式

值必须等于：

```
nn-nn-nnnn
nn/nn/nnnn 
```

其中 n = 整数。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T13:30:44.007

试试这个

[0-9-]{2}(/|-)[0-9]{2}(/|-)[0-9]{4}

我在 [http://regex.larsolavtorvik.com/中检查了这个](http://regex.larsolavtorvik.com/)

及其工作正常

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T13:48:33.733

我更喜欢强迫用户以标准格式（ISO 8601）输入他们的日期数据。

我将它用于年-月-日期（带有可选分隔符：/、-）。请注意，在将值插入数据库的`date`列时，这仍然可能导致错误，因为它允许月份和日期为例如 99。

```
^(\d{4})[/|-]?(\d{2})[/|-]?(\d{2})$ 
```

如果您对 ISO 8601 不满意，您可以将正则表达式中的元素调整为例如月-日-年。但随后您将面临 Kolink 提到的问题。输入的值真的是月-日-年还是日-月-年？（如果您对日期和月份使用单独的表单输入字段，这不一定是问题。）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-16T13:22:15.807

正则表达式中的“整数”是`\d`，对于某个数字，您可以用 来量化`{x}`，x 是您想要的数字。对于允许使用什么符号的选项，`[...]`用于列出有效字符。请记住，`-`除非它是括号内的第一个或最后一个字符，否则它在那里具有特殊含义。剩下的就看你了，但是...

您怎么知道 04-03-2012 的实际含义？4月3日还是3月4日？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-16T14:04:46.593

看看检查[日期](http://php.net/manual/en/function.checkdate.php)

> 检查参数形成的日期的有效性。如果正确定义了每个参数，则日期被认为是有效的。

# javascript - 引导手风琴菜单

> ID：12915620
> 
> 赞同：1
> 
> 时间：2012-10-16T13:20:20.387
> 
> 标签：javascript, jquery, css, twitter-bootstrap, bootstrap-accordion

我的问题是我为我的 wordpress 网站使用了 bootstrap 手风琴菜单。

每个菜单项都有子菜单作为链接，因此每当我单击任何链接时，它都会将我带到另一个页面，这意味着页面已重新加载，但手风琴菜单会关闭，我希望它保持打开状态并使用所选链接。

我的整个网站都在引导程序上。我是 wordpress 的新手，所以甚至不知道哪个 jquery 函数正在这个手风琴菜单上工作。

这是我的手风琴菜单代码：

```
<div id="accordion2" class="accordion">
    <div class="accordion-group">
        <div class="accordion-heading">
            <a class="accordion-toggle" href="#collapseOne" data-toggle="collapse" data-parent="#accordion2">B.A Honours Programmes</a>
        </div>
        <div id="collapseOne" class="accordion-body collapse">
            <div class="accordion-inner">
                <a href="http://pearlacademy.com/wp/fashion-design/" class="accordion-toggle">Fashion Design</a>
            </div>
            <div class="accordion-inner">
                <a href="#" class="accordion-toggle">Fashion Styling & Image Design</a>
            </div>
            <div class="accordion-inner">
                <a href="#" class="accordion-toggle">Textile Design for Fashion And Interiors</a>
            </div>
            <div class="accordion-inner">
                <a href="#" class="accordion-toggle">Communication Design</a>
            </div>
            <div class="accordion-inner">
                <a href="#" class="accordion-toggle">Interior Architecture and Design</a>
            </div>
            <div class="accordion-inner">
                <a href="#" class="accordion-toggle">Interior Product Design</a>
            </div>
            <div class="accordion-inner">
                <a href="#" class="accordion-toggle">Jewellery Design</a>
            </div>
            <div class="accordion-inner">
                <a href="#" class="accordion-toggle">Fashion Media Communication</a>
            </div>
            <div class="accordion-inner">
                <a href="#" class="accordion-toggle">Fashion Business Management</a>
            </div>
            <div class="accordion-inner">
                <a href="#" class="accordion-toggle">Fashion Marketing and Retailing Management</a>
            </div>
        </div>
    </div>
    <div class="accordion-group">
        <div class="accordion-heading">
            <a class="accordion-toggle" href="#collapseTwo" data-toggle="collapse" data-parent="#accordion2">Postgraduate Diploma Programmes</a>
        </div>
        <div id="collapseTwo" class="accordion-body collapse">
            <div class="accordion-inner">
                <a href="#" class="accordion-toggle">Fashion Design</a>
            </div>
            <div class="accordion-inner">
                <a href="#" class="accordion-toggle">Textile Design</a>
            </div>
            <div class="accordion-inner">
                <a href="#" class="accordion-toggle">Fashion Retail</a>
            </div>
            <div class="accordion-inner">
                <a href="#" class="accordion-toggle">Fashion Marketing</a>
            </div>
            <div class="accordion-inner">
                <a href="#" class="accordion-toggle">Garment Manufacturing</a>
            </div>
            <div class="accordion-inner">
                <a href="#" class="accordion-toggle">Fashion Merchandising</a>
            </div>
        </div>
    </div>
    <div class="accordion-group">
        <div class="accordion-heading">
            <a class="accordion-toggle" href="#collapseThree" data-toggle="collapse" data-parent="#accordion2">Masters Programmes</a>
        </div>
        <div id="collapseThree" class="accordion-body collapse">
            <div class="accordion-inner">
                <a href="#" class="accordion-toggle">MA Design(Fashion and Textile)</a>
            </div>
            <div class="accordion-inner">
                <a href="#" class="accordion-toggle">MA Fashion Marketing</a>
            </div>
        </div>
    </div>
    <div class="accordion-group">
        <div class="accordion-heading">
            <a class="accordion-toggle" href="#collapseFour" data-toggle="collapse" data-parent="#accordion2">Professional Programmes</a>
        </div>
        <div id="collapseFour" class="accordion-body collapse">
            <div class="accordion-inner">
                <a href="#" class="accordion-toggle">Luxury Brands</a>
            </div>
        </div>
    </div>
    <div class="accordion-group">
        <div class="accordion-heading">
            <a class="accordion-toggle" href="#collapseFive" data-toggle="collapse" data-parent="#accordion2">Diploma Programmes</a>
        </div>
        <div id="collapseFive" class="accordion-body collapse">
            <div class="accordion-inner">
                <a href="#" class="accordion-toggle">Visual Merchandising & Store Design</a>
            </div>
            <div class="accordion-inner">
                <a href="#" class="accordion-toggle">Professional Photography with BTK Germany</a>
            </div>
            <div class="accordion-inner">
                <a href="#" class="accordion-toggle">Digital Film Making</a>
            </div>
            <div class="accordion-inner">
                <a href="#" class="accordion-toggle">Creative Graphic Design</a>
            </div>
            <div class="accordion-inner">
                <a href="#" class="accordion-toggle">Styling for Interiors</a>
            </div>
            <div class="accordion-inner">
                <a href="#" class="accordion-toggle">Fashion & Lifestyle Ecommerce</a>
            </div>
            <div class="accordion-inner">
                <a href="#" class="accordion-toggle">Fashion Media Makeup</a>
            </div>
            <div class="accordion-inner">
                <a href="#" class="accordion-toggle">New Media Design</a>
            </div>
            <div class="accordion-inner">
                <a href="#" class="accordion-toggle">Retail Operations</a>
            </div>
            <div class="accordion-inner">
                <a href="#" class="accordion-toggle">Entrepreneurship and Business Management for Creative Industries</a>
            </div>
            <div class="accordion-inner">
                <a href="#" class="accordion-toggle">Apparel Manufacturing</a>
            </div>
            <div class="accordion-inner">
                <a href="#" class="accordion-toggle">Interior Styling</a>
            </div>
        </div>
    </div>
    <div class="accordion-group">
        <div class="accordion-heading">
            <a class="accordion-toggle" href="#collapseSix" data-toggle="collapse" data-parent="#accordion2">Certificate Programmes</a>
        </div>
        <div id="collapseSix" class="accordion-body collapse">
            <div class="accordion-inner">
                <a href="#" class="accordion-toggle">Creative Fashion & Technology in Women's Wear</a>
            </div>
            <div class="accordion-inner">
                <a href="#" class="accordion-toggle">Apparel Marketing & Merchandising</a>
            </div>
            <div class="accordion-inner">
                <a href="#" class="accordion-toggle">Personal Styling & Grooming</a>
            </div>
        </div>
    </div>
</div> 
```

这是位于*bootstrap.css*中的手风琴菜单的 CSS ：

```
.accordion {
  margin-bottom: 20px;
}
.accordion-group {
  margin-bottom: 2px;
  /*border: 1px solid #e5e5e5;
  -webkit-border-radius: 4px;
  -moz-border-radius: 4px;
  border-radius: 4px;*/
}
.accordion-heading {
  border-bottom: 0;
  background-color:#cccccc;
}
.accordion-heading .accordion-toggle {
  display: block;
  padding: 2px 4px;
  text-decoration:none;
  /*background-color:#e52b27;*/
}
.accordion-toggle {
  cursor: pointer;
  color:#5e5e5e;
  text-decoration:none;
}
.accordion-inner {
  padding: 2px 4px;
  border-top: 1px solid #e5e5e5;
  text-decoration:none;
} 
```

我认为这是 JS 的工作（不确定）：

```
/* COLLAPSE PUBLIC CLASS DEFINITION
* ================================ */

 var Collapse = function (element, options) {
    this.$element = $(element)
    this.options = $.extend({}, $.fn.collapse.defaults, options)

    if (this.options.parent) {
      this.$parent = $(this.options.parent)
    }

    this.options.toggle && this.toggle()
  }

  Collapse.prototype = {

    constructor: Collapse

  , dimension: function () {
      var hasWidth = this.$element.hasClass('width')
      return hasWidth ? 'width' : 'height'
    }

  , show: function () {
      var dimension
        , scroll
        , actives
        , hasData

      if (this.transitioning) return

      dimension = this.dimension()
      scroll = $.camelCase(['scroll', dimension].join('-'))
      actives = this.$parent && this.$parent.find('> .accordion-group > .in')

      if (actives && actives.length) {
        hasData = actives.data('collapse')
        if (hasData && hasData.transitioning) return
        actives.collapse('hide')
        hasData || actives.data('collapse', null)
      }

      this.$element[dimension](0)
      this.transition('addClass', $.Event('show'), 'shown')
      $.support.transition && this.$element[dimension](this.$element[0][scroll])
    }

  , hide: function () {
      var dimension
      if (this.transitioning) return
      dimension = this.dimension()
      this.reset(this.$element[dimension]())
      this.transition('removeClass', $.Event('hide'), 'hidden')
      this.$element[dimension](0)
    }

  , reset: function (size) {
      var dimension = this.dimension()

      this.$element
        .removeClass('collapse')
        [dimension](size || 'auto')
        [0].offsetWidth

      this.$element[size !== null ? 'addClass' : 'removeClass']('collapse')

      return this
    }

  , transition: function (method, startEvent, completeEvent) {
      var that = this
        , complete = function () {
            if (startEvent.type == 'show') that.reset()
            that.transitioning = 0
            that.$element.trigger(completeEvent)
          }

      this.$element.trigger(startEvent)

      if (startEvent.isDefaultPrevented()) return

      this.transitioning = 1

      this.$element[method]('in')

      $.support.transition && this.$element.hasClass('collapse') ?
        this.$element.one($.support.transition.end, complete) :
        complete()
    }

  , toggle: function () {
      this[this.$element.hasClass('in') ? 'hide' : 'show']()
    }

  } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T13:47:05.300

这是你应该做的。扔掉你写的代码，因为你在滥用手风琴。要使用下拉菜单进行导航，这里有一个示例。

```
<div class="navbar">
    <div class="navbar-inner">
        <div class="container">
            <a class="btn btn-navbar" data-toggle="collapse" data-target=".subnav-collapse"> <span class="icon-bar"></span> <span class="icon-bar"></span> <span class="icon-bar"></span> </a>
            <a class="brand" href="#">Title</a>
            <div class="nav-collapse subnav-collapse">
                <ul class="nav">
                    <li class="active">
                        <a href="#">Home</a>
                    </li>
                    <li>
                        <a href="#">Link</a>
                    </li>
                    <li>
                        <a href="#">Link</a>
                    </li>
                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Dropdown <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                            <li>
                                <a href="#">Action</a>
                            </li>
                            <li>
                                <a href="#">Another action</a>
                            </li>
                            <li>
                                <a href="#">Something else here</a>
                            </li>
                            <li class="divider"></li>
                            <li class="nav-header">
                                Nav header
                            </li>
                            <li>
                                <a href="#">Separated link</a>
                            </li>
                            <li>
                                <a href="#">One more separated link</a>
                            </li>
                        </ul>
                    </li>
                </ul>
            </div><!-- /.nav-collapse -->
        </div>
    </div><!-- /navbar-inner -->
</div> 
```

编辑：

要在页面加载时打开手风琴，这应该可以：

分配您要打开的手风琴`class="open-accordion"`并添加到您的 javascript 文件或`<script></script>`以下代码段中：

```
$('.open-accordion').on('hidden', function () {
$('.open-accordion').collapse('show')
}) 
```

我没有测试过它，但应该根据引导文档工作。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-03T18:13:10.850

```
<ul class="accordion">
    <li id="one" class="files">
        <a href="#one">Admin Video</a>
        <ul class="sub-menu">
            <li><a href="<?php echo base_url();?>index.php/admin/adminvideo/addvideo"><em>01</em>Add video</a></li>
            <li><a href="<?php echo base_url();?>index.php/admin/adminvideo"><em>02</em>List Video</a></li>
            <li><a href="<?php echo base_url();?>index.php/admin/adminvideo/categorys"><em>03</em>Video Categories</a></li>                 
        </ul>
    </li>

    <li id="two" class="mail">
        <a  href="#two">Users</a>
        <ul class="sub-menu">
            <li><a href="<?php echo base_url();?>index.php/admin/admin/listsubs"><em>01</em>Subscribers List</a></li>
            <li><a href="<?php echo base_url();?>"><em>02</em>User Video Suggestion</a></li>
        </ul>
    </li>

    <li id="three" class="cloud">
        <a class="active" href="#three">Background Image options</a>
        <ul class="sub-menu">
            <li><a href="<?php echo base_url();?>index.php/admin/adminsettings"><em>01</em>Add</a></li>
            <li><a href="<?php echo base_url();?>index.php/admin/adminsettings/listbgs"><em>02</em>List</a></li>
        </ul>
    </li>
</ul> 
```

$(文档).ready(函数() {

```
var accordion_head = $('.accordion > li > a'),
    accordion_body = $('.accordion li > .sub-menu');
$.each($(".accordion > li > a"), function(){
    if($(this).attr('class') == 'active')
    {
        $(this).next().slideDown('normal');
    }           
});

// Open the first tab on load

//accordion_head.first().addClass('active').next().slideDown('normal');

// Click function

accordion_head.on('click', function(event) {

    // Disable header links

    event.preventDefault();

    // Show and hide the tabs on click

    if ($(this).attr('class') != 'active'){
        accordion_body.slideUp('normal');
        $(this).next().stop(true,true).slideToggle('normal');
        accordion_head.removeClass('active');
        $(this).addClass('active');
    }

}); 
```

});

# php - 显示数据库 CakePHP 中的最后 3 条记录

> ID：12915622
> 
> 赞同：3
> 
> 时间：2012-10-16T13:20:20.860
> 
> 标签：php, cakephp

显示来自数据库的新闻时出现问题！

**截图：![在此处输入图像描述](../Images/713cfebb0283edff8618aa1aefde3ce5.png)**

```
Database(table) Articals: ID, Title, Content, User 
```

很简单，我只想在视图中显示来自数据库的最后 3 条新闻（我的控制器向我发送 $artical 中的 3 条记录数组，这没关系），但视图无法显示这个..请帮助我，我的截止日期是明天。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-16T13:26:36.053

在 cakephp 中，如果您将创建和修改的字段 (DATETIME) 放入表中，mvc 会自动插入创建日期或修改日期。

因此，当您检索数据时，您可以在此模式下进行

```
$articals = $this->Artical->find('all', array(
  'limit' => 3,
  'order' => 'Artical.created DESC' )
)); 
```

或者在您的情况下，如果您可以在此模式下执行增量 id（但我建议您使用 created 并将其插入表中）

```
 $articals = $this->Artical->find('all', array(
          'limit' => 3, 
          'order' => 'Artical.ID DESC' )
        )); 
```

如果您在打印数据时遇到问题，请尝试制作`var_dump($articals)`; 尝试像这样打印出您的内容后：

```
foreach ($articals as $artical) {
     echo '<p>'.$artical['Artical']['Content'].'</p>';
} 
```

# sql - 索引所有列

> ID：12915623
> 
> 赞同：28
> 
> 时间：2012-10-16T13:20:25.323
> 
> 标签：sql, sql-server, indexing

知道索引列会带来更好的性能，是否值得对数据库所有表中的所有列进行索引？这种方法的优点/缺点是什么？

如果值得，有没有办法在 SQL Server 中自动创建索引？我的应用程序动态添加表和列（取决于用户配置），我想让它们自动索引。

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-10-16T13:47:03.103

由于上述原因，很难想象在现实世界中为每一列建立索引会很有用。这种场景需要一堆不同的查询，所有查询都只访问表的一列。每个查询都可能访问不同的列。

其他答案没有解决查询*选择*端的问题。显然，维护索引是一个问题，但是如果您创建表一次然后读取很多次，则不需要考虑更新/插入/删除的开销。

索引包含原始数据以及指向数据所在记录/页面的点。索引的结构可以快速执行以下操作：查找单个值、按顺序检索值、计算不同值的数量以及查找最小值和最大值。

索引不仅占用磁盘空间。更重要的是，它占用了内存。而且，内存争用通常是决定查询性能的因素。一般来说，在每一列上建立一个索引会比原始数据占用更多的空间。（一个例外是相对宽且值相对较少的列。）

此外，为了满足许多查询，您可能需要一个或多个索引*加上*原始数据。您的页面缓存会充满数据，这会增加缓存未命中的数量，从而产生更多开销。

我想知道您的问题是否真的表明您没有充分建模数据结构。您希望用户构建临时永久表的情况很少。更典型的是，他们的数据将以预定义的格式存储，您可以针对访问要求进行优化。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-10-16T13:25:16.793

不，因为您必须考虑到每次添加或更新记录时，都必须重新计算索引，并且在所有列上建立索引会花费大量时间并导致性能不佳。

因此，仅使用选择查询的数据仓库之类的数据库是一个好主意，但在普通数据库上却是个坏主意。

此外，不是因为您在 where 子句中使用列，您必须在其上添加索引。尝试找到一个记录几乎都是唯一的列，例如主键，并且您不经常编辑。一个坏主意是索引一个人的性别，因为只有 2 个可能的值，并且索引的结果只会拆分数据，然后它将搜索几乎每条记录。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-10-16T13:27:38.453

不，您不应该索引所有列，这有几个原因：

*   在插入、更新或删除语句期间维护每个索引是有成本的，这将导致每个事务花费更长的时间。
*   它将增加所需的存储空间，因为每个索引都会占用磁盘空间。
*   如果列值不分散，则不会使用/忽略索引（例如：性别标志）。
*   组合索引（多列的索引）对于频繁运行的 WHERE、GROUP BY、ORDER BY 或 JOIN 子句可以极大地提高性能，并且不能组合多个单索引。

您最好使用解释计划和数据访问并在必要时添加索引（并且仅在必要时，恕我直言），而不是预先创建它们。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-10-16T13:23:45.677

不，维护索引有开销，因此索引所有列会减慢所有插入、更新和删除操作。您应该索引在 WHERE 子句中经常引用的列，您会看到好处。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-10-16T13:24:51.617

索引占用空间。而且它们会花费时间来创建、重建、维护等。因此，对任何旧列进行索引都不能保证性能回报。您应该索引为您将使用的操作提供性能的列。索引有助于阅读，因此，如果您主要阅读，索引列将被搜索、排序或关联到其他表。否则，它比您可能看到的好处更昂贵。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-01-30T21:11:39.947

*   每个索引在插入和删除期间都需要额外的 CPU 时间和磁盘 I/O 开销。
*   非主键上的独立可能必须在更新时挂起，尽管主键上的索引可能不会（这是因为更新通常不会修改主键属性）。
*   每个额外的索引都需要额外的存储空间。
*   对于涉及多个搜索键上的条件的查询，即使只有一些键上有独立，也可能不坏。因此，当已经存在许多独立时，通过添加独立来较少地提高数据库性能。

# php - yii 多个 listBox 选中的值在上面

> ID：12915633
> 
> 赞同：1
> 
> 时间：2012-10-16T13:21:09.873
> 
> 标签：php, yii

有没有办法在顶部显示所有多个选定的值。
例如。如果列表包含 1 到 10，并且选定的值为 4,8，则列表框应具有类似 4,8,1,2,3,5,6,7,9,10 的值

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T13:31:37.240

这是列出选择数据的两种常用方法。

```
echo CHtml::dropDownList('public', $model, array('0' => 'Private', '1' => 'Public'));

echo CHtml::activeDropDownList($model, 'developers_id', CHtml::listData(Developers::model()->findAll(), 'id', 'email') , array('prompt'=>'Select')); 
```

第一个使用数组，您可以根据用户偏好定义、重新定位数组键。

其次，可能会在 findAll() 调用中引入一个 Criteria，它将首先对用户选择的值进行排序，它会完成这项工作。

**更新**

你可以这样做：

```
echo CHtml::listBox('listname',$selectedlist,array_intersect_key($alllist,array_flip($selectedlist))+$alllist,array('multiple' => 'multiple')); 
```

在示例中：

```
$selectedlist=array(3,5);
$alllist=array(1=>'one',2=>'two',3=>'three',4=>'four',5=>'five');

$a=array_intersect_key($alllist,array_flip($selectedlist))+$alllist;
print_r($a);

Array ( [3] => three [5] => five [1] => one [2] => two [4] => four ) 
```

查看实际代码[http://ideone.com/6BDxQ](http://ideone.com/6BDxQ)

# excel - 对象定义错误

> ID：12915636
> 
> 赞同：1
> 
> 时间：2012-10-16T13:21:29.450
> 
> 标签：excel, vba

我正在使用 excel 2007。我正在使用一个宏，它将所有可见工作表复制到新工作簿并保存为文本文件。我有超过 12 张纸，我必须从中复印至少 10 张纸。4 个可见工作表是副本，但在第五个工作表上我收到了 Application_defined 或 Object_defined 错误。我有其他六张表。请帮我解决这个问题。

```
Sub day_end_process()

'Working in 97-2010
Dim FileExtStr As String
Dim FileFormatNum As Long
Dim Sourcewb As Workbook
Dim Destwb As Workbook
Dim sh As Worksheet
Dim DateString As String
Dim FolderName As String

'Copy every sheet from the workbook with this macro
Set Sourcewb = ThisWorkbook

'Create new folder to save the new files in
DateString = Format(Now, "yyyy-mm-dd hh-mm-ss")
FolderName = Sourcewb.path & "\" & Sourcewb.Name & " " & DateString
MkDir FolderName

'Copy every visible sheet to a new workbook
For Each sh In Sourcewb.Worksheets

    'If the sheet is visible then copy it to a new workbook
    If sh.Visible = -1 Then
        sh.Copy

        'Set Destwb to the new workbook
        Set Destwb = ActiveWorkbook

        'Determine the Excel version and file extension/format
        With Destwb
            FileExtStr = ".txt": FileFormatNum = -4158
        End With

        'Change all cells in the worksheet to values if you want
        'I get error in this if statement.

        If Destwb.Sheets(1).ProtectContents = False Then
            With Destwb.Sheets(1).UsedRange
                .Cells.Copy
                .Cells.PasteSpecial xlPasteValues
                .Cells(1).Select
            End With
            Application.CutCopyMode = False
        End If
        'Save the new workbook and close it
        With Destwb
            .SaveAs FolderName _
                  & "\" & Destwb.Sheets(1).Name & FileExtStr, _
                    FileFormat:=FileFormatNum
            .Close False
        End With
    End If
GoToNextSheet:
Next sh
MsgBox "You can find the files in " & FolderName
Sheets("Main Page").Select
With Application
    .ScreenUpdating = True
    .EnableEvents = True
    .Calculation = xlCalculationAutomatic
End With
Sheets("Main Page").Select
ActiveWorkbook.Save

End Sub 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T18:54:57.813

代替

```
 If Destwb.Sheets(1).ProtectContents = False Then 
        With Destwb.Sheets(1).UsedRange 
            .Cells.Copy 
            .Cells.PasteSpecial xlPasteValues 
            .Cells(1).Select 
        End With 
        Application.CutCopyMode = False 
    End If 
```

也许尝试：

```
 If Destwb.Sheets(1).ProtectContents = False Then 
        Destwb.Sheets(1).UsedRange.value = Destwb.Sheets(1).UsedRange.value 
    End If 
```

# opera-extension - 检测是否使用 JavaScript 安装和禁用了自己的 Opera 扩展

> ID：12915637
> 
> 赞同：1
> 
> 时间：2012-10-16T13:21:29.597
> 
> 标签：opera-extension

我可以通过在注入的脚本中设置新的**窗口**对象属性（例如**window.isExtensionInstalled**）并在网页 javaScript 中检查它来检测是否安装了我的**Opera**扩展。

 ****但这不是解决方案，以防扩展被禁用。

如何检测禁用的扩展程序？

是否以与**Chrome**扩展相同的方式提供资源网络访问等功能？

可能还有一些其他有用的功能？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T12:56:12.900

不，没有这样的功能。

根据定义，每个扩展都存在于自己的沙箱中，不知道其他扩展。

唯一的机会是向外看`window`（对象）并搜索其他扩展的足迹（窗口或子对象的修改）。如果这些被迫留在家里（停用），就不能留下脚印..

对不起，太形象化了；）****

# c# - 如何找到部分网址

> ID：12915638
> 
> 赞同：0
> 
> 时间：2012-10-16T13:21:31.213
> 
> 标签：c#, regex

如何使用正则表达式查找 url 部分？

网址：/text1/text2/text3-text4-text5-text6-text7/aaa/100

我怎么能找到aaa？？？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-16T13:22:57.257

```
var uri = new Uri(s);
return uri.Segments[uri.Segments.Length-2]; 
```

或者

```
new Uri(s).Segments.Where(x => x == "aaa"); 
```

或者

```
new Uri(s).Segments.Where(x => Regex.IsMatch(x, "^a+$"); 
```

...

你的问题对于你*真正*想要什么以及目的是什么相当模糊。

# ruby-on-rails-3 - 我的 rspec 示例正在通过，即使我预计它会失败

> ID：12915641
> 
> 赞同：2
> 
> 时间：2012-10-16T13:21:51.140
> 
> 标签：ruby-on-rails-3, rspec

我无法弄清楚为什么我的第二个示例通过了，即使它应该失败了

这是我的 person_spec.rb：

```
require 'spec_helper'

describe Person do
  it "must have a first name" do
    subject { Person.new(first_name: "", last_name: "Kowalski") }
    subject.should_not be_valid
  end

  it "must have a last name" do
    subject { Person.new(first_name: "Jan") }
    subject.should_not be_valid
  end
end 
```

这是我的人.rb

```
class Person < ActiveRecord::Base
  attr_accessible :first_name, :last_name

  validates :first_name, presence: true

  def full_name
    return "#{@first_name}  #{@last_name}"
  end
end 
```

我的 rspec 输出：

```
Person
  must have a last name
  must have a first name

Finished in 0.09501 seconds
2 examples, 0 failures

Randomized with seed 51711 
```

更糟糕的是，我的进一步示例以非常意想不到的方式失败/通过。似乎不知何故，我的主题是 Person 的一个实例，但既没有分配 first_name 也没有分配 last_name

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T14:22:39.850

我认为你在这里有两个主要问题。首先，如果我没记错的话，您应该`subject`在组范围内使用，而不是在实际规范中使用。[这是rspec 文档](https://www.relishapp.com/rspec/rspec-core/v/2-6/docs/subject/explicit-subject#subject-block-is-invoked-at-most-once-per-example)中的一个示例：

```
describe Array, "with some elements" do
  subject { [1,2,3] }
  it "should have the prescribed elements" do
    subject.should == [1,2,3]
  end
end 
```

请注意，在块`subject`之外声明了。`it`所以，我认为在这里看到一些意想不到的行为是合理的。我还没有深入研究这里的源代码，但我觉得这很有教育意义。

其次，遵循David Chelimsky的[这些指导方针](http://blog.davidchelimsky.net/2012/05/13/spec-smell-explicit-use-of-subject/)可以大大简化您的规格。您的规范可能看起来更像这样：

```
describe Person do
  it { should validate_presence_of(:first_name) }
end 
```

更短，更甜，并且可能会正常工作。

# python - 类变量查找与实例变量查找

> ID：12915642
> 
> 赞同：0
> 
> 时间：2012-10-16T13:21:51.743
> 
> 标签：python, instance-variables, class-variables

我有一个包含许多**类变量**的类：

`c_dict1`, `c_dict2`,`c_dict3`

它们都是字典，并使用下面的一些实例变量作为键来存储一些值。

我有这个类*的几百个*实例，每个实例都有以下**实例变量**：

`i_key1`, `i_key2`, `i_key3`, `i_attr1`, `i_attr2`,`i_attr3`

它们的前三个 ( `i_key*`) 可用于`i_attr*`在类变量中查找后三个 ( )。换句话说：

```
self.i_attr1 = MyClass.c_dict1(i_key1)
self.i_attr2 = MyClass.c_dict2(i_key2)
self.i_attr3 = MyClass.c_dict3(i_key3) 
```

我的问题是：

在性能方面，我应该在`i_attr*`本地维护实例变量，还是应该使用类变量通过字典查找来访问它们`c_dict*`？显然，通过类变量来消除每个实例的三个指针，这可能会节省一些内存，但是这样做有没有显着的速度损失？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-16T13:36:37.780

> 在性能方面，我应该在本地维护实例变量 i_attr*，还是应该使用类变量 c_dict* 通过字典查找来访问它们？

如果这种恒定时间的微优化很重要且不为时过早，则可能不要使用 python。

我强烈怀疑这是过早的优化，并且您还没有将其识别为热点，因为如果您有，您可以双向分析您的代码，并且不会在这里询问。

你可以通过担心你的架构来获得更多的加速，你是否应该运行一个可以利用 PyPi 的长期进程等。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T13:31:05.663

就性能而言，您的问题没有一般性的答案，因为它取决于访问频率以及您如何使用结果，您只需要尝试看看即可。`timeit`使用或运行代码`profile`以查看结果。

如果您想与 保持`c_dictN`同步`i_attrN`，最好使用以下内容：

```
self.i_attrN = property(lambda self:       MyClass.c_dictN[i_keyN], 
                        lambda self, val:  MyClass.c_dictN[i_keyN] = val) 
```

（请注意，如果它们真的像您的示例一样命名，您也可以使用`setattr`and将所有字段设置在一个循环中）。`getattr`

如果您可以按照上述方式进行操作，并且可以更改类的合同，则另一种解决方案是使用索引访问器，例如：

```
def __getitem__(self, idx):
    return MyClass.c_dict[idx][self.i_key[idx]]

def __setitem__(self, idx, val):
    MyClass.c_dict[idx][self.i_key[idx]] = val 
```

然后您可以更改访问权限

```
a = myobj.i_attrN
myobj.i_attrN = b 
```

到

```
a = myobj[N]
myobj[N] = b 
```

# apache - 在重写规则方面需要帮助

> ID：12915646
> 
> 赞同：0
> 
> 时间：2012-10-16T13:22:00.887
> 
> 标签：apache, .htaccess, mod-rewrite, url-rewriting

我的应用程序使用的实际 URL 是：

`http://site.com/gallery?id=23` 但我希望有可能达到同样的效果

`http://site.com/topic/place/new-delhi/gallery/23` 我没有重写规则的经验，我该如何设置？

其中 'place' 和 'new-delhi' 是两个动态值。这可能吗？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T13:43:55.690

你是什​​么意思说*'地方'和'新德里'是两个动态值*

规则是：

```
RewriteRule /topic/([a-z-]*)/([a-z-]*)/gallery/([0-9]*) /gallery?id=$3 [R=301] 
```

使用此规则，地点存储在 1 美元中，新德里存储在 2 美元中

你可以像这样得到它们

```
RewriteRule /topic/([a-z-]*)/([a-z-]*)/gallery/([0-9]*) /gallery?var1=$1&city=$2&id=$3 [R=301] 
```

如果你去，`http://site.com/topic/place/new-delhi/gallery/23`你会被重定向到`http://site.com/gallery?var1=place&city=new-delhi&id=23`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T13:51:22.190

通过启用 mod_rewrite 和 .htaccess `httpd.conf`，然后将此代码放在您`.htaccess`的`DOCUMENT_ROOT`目录下：

```
Options +FollowSymLinks -MultiViews
# Turn mod_rewrite on
RewriteEngine On
RewriteBase /

RewriteRule ^topic/[^/]+/[^/]+/gallery/([^/]+)/?$ gallery?id=$1 [L,QSA,NC] 
```

# c# - 确保一组值都是唯一的最干净的方法是什么？

> ID：12915650
> 
> 赞同：2
> 
> 时间：2012-10-16T13:22:20.813
> 
> 标签：c#, logic

假设我有五个整数值，它们都必须是唯一的。

```
int a;
int b;
int c;
int d;
int e; 
```

显然我可以做这样的事情来测试：

```
if (a == b) {
    return false;
} else if (a == c) {
    return false;
} else if (a == d) {
    return false;
}
//etc etc 
```

但在我看来，这会导致代码非常混乱。有没有一种“更清洁”的方式来做到这一点？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-16T13:23:46.250

您可以将所有值放入一个集合中，并确保该集合的基数等于您放入的值的数量：

```
ISet<int> vals = new HashSet<int> {
    a, b, c, d, e
};
if (vals.Count != 5) {
    Console.WriteLine("All values must be unique");
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-16T13:25:06.030

可能有点开销，但你可以这样做：

```
new [] {a, b, c, d, e}.Distinct().Count() == 5 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-16T13:33:59.873

未经测试，但您也可以制作这样的辅助方法：

```
static bool AreDistinct<T>(params T[] vals)
{
    for(int i = 0; i < vals.Length - 1; i++)
        for(int j = i + 1; j < vals.Length; j++)
            if(vals[i].Equals(vals[j]))
                return false;

    return true;
} 
```

并称它为：

```
AreDistinct(a, b, c, d, e) 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-16T13:26:50.217

```
List<int>() list = new List<int>(){a,b,c,d,e};

bool unique = list.Count() == list.Distinct().Count(); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-16T13:39:08.450

由于您一次只比较两个值，因此您将拥有 (n-1)！比较。

你真的应该考虑 Ic. 的回答。他将 j 偏移 i 的值 +1 以避免冗余比较。这是尽可能简洁和有效的。

但是，如果您必须写出比较：

```
if (a == b || a == c || a == d || a == e)
    return false;

if (b == c || b == d || b == e)
    return false;

//etc. 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-10-16T13:25:42.413

```
List<int> elements = new List<int>(){a,b,c,d,e};
if (elements.Distinct().Count() == elements.Count)
{
    //all elements are different
}
else
{

} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-10-17T18:35:18.877

清洁度可能会引起争议，但是如果您对它们进行排序，那么（根据需要）比较您所在的每个相邻对（n lg n）而不是（n^2）。

# ruby - fields_for 中的 if-block 正在呈现 HTML 转义的隐藏字段

> ID：12915652
> 
> 赞同：0
> 
> 时间：2012-10-16T13:22:27.257
> 
> 标签：ruby, ruby-on-rails-3, haml

这是一个带有 HAML 的 Rails 3 应用程序。我有以下内容：

```
= f.fields_for :bar_memberships do |bar_membership_fields|
  = 'FIELD' 
```

我已经封装了这个问题。此代码按预期打印： FIELD FIELD FIELD。

但是下面的代码：

```
= f.fields_for :bar_memberships do |bar_membership_fields|
  - if bar_membership_fields.object.new_record?
    = 'FIELD' 
```

在源代码中呈现大量 HTML 转义的隐藏输入，并将它们显示在页面上！

```
'<input id="person_bar_memberships_attributes_0_id" name="person[bar_memberships_attributes][0][id]" type="hidden" value="824" />
<input id="person_bar_memberships_attributes_1_id" name="person[bar_memberships_attributes][1][id]" type="hidden" value="825" />'
FIELD 
```

任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-09T05:34:50.237

您必须返回块中以外`nil`的内容。`fields_for`

[这个问题已由 mattwildig 在 Haml 4.0.4 中修复](https://github.com/haml/haml/issues/439)：

> 助手为每条记录生成一个隐藏的`#fields_for`输入字段，并将其添加到捕获块的结果中。通常返回值`capture`是 a `SafeBuffer`，所以不会被转义。但是，如果块没有向缓冲区写入任何内容，则 Haml`String`从`capture`. 隐藏的输入元素被连接到这个字符串，当它与其余条目组合时，因为它是`String`被添加到 a 的`SafeBuffer`，所以它被转义。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T12:22:43.430

我修复了以下代码：

```
= f.fields_for :bar_memberships do |bar_membership_fields|
  - if bar_membership_fields.object.new_record?
    = 'FIELD' 
```

通过做：

```
= f.fields_for :bar_memberships do |bar_membership_fields|
  = ""
  - if bar_membership_fields.object.new_record?
    = 'FIELD' 
```

如果有人知道为什么，请告诉我。

# ruby-on-rails - 如何让 Rails 将发布的字符串解析为 json 而不发送 'Content-type: application/json' 标头？

> ID：12915653
> 
> 赞同：6
> 
> 时间：2012-10-16T13:22:28.343
> 
> 标签：ruby-on-rails, ruby-on-rails-3, json, rest, content-negotiation

当发送标头“Content-type: application/json”时，Rails 会在多个级别更改行为：

*   提交的帖子正文被解析为 json 而不仅仅是字符串参数
*   config/initializers/wrap_parameters.rb 中的 wrap_parameters :format => [:json] 用于解析已发布的参数（因此您可以发送带有或不带有根元素的 json）

如果我不能信任（外部）客户端传递正确的标头怎么办？换句话说，我想让我的应用程序表现得好像客户端*总是*通过'Content-type：application/json'标头，即使客户端实际上没有？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-11T18:11:30.443

您可以使用在操作中设置类型

```
request.format = :json 
```

我用

```
class ExampleController < ApplicationController

  def always_accept_json
    request.format = :json
    respond_to do |format|
      format.json { raise "HEY" }
      format.html 
    end
  end
end 
```

您可以在 Any ActionController 中的任何位置执行此操作，即，如果您希望在顶层使所有请求都以 content_type 的形式出现在您的应用程序中，`application/json`只需使其成为`application_controller.rb`该集合的过滤器`request.format`

# javascript - unescape() 函数不能正常工作

> ID：12915654
> 
> 赞同：0
> 
> 时间：2012-10-16T13:22:30.827
> 
> 标签：javascript

在一个站点中有以下代码：

```
document.write(unescape('%41%54%50%20%2f%20%20%57%54%41%20%4d%6f%73%63%6f%77')); 
```

这会产生

```
ATP /  WTA Moscow (Shvedova - Pavlyuchenkova) 
```

但是如果运行该代码，我只会得到`ATP / WTA Moscow`

任何想法为什么会发生这种情况？

**编辑：//**这里是网站

[http://www.frombar.tv/](http://www.frombar.tv/)

检查这场比赛

ATP / WTA 莫斯科（马卡罗娃 - 奇布尔科娃）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T13:27:14.180

您提供的字符串中有 18 个编码字符。

`ATP / WTA Moscow`长度为 18 个字符。

无论生成什么`(Shvedova - Pavlyuchenkova)`，都不是您提供的代码。

也就是说，`unescape`对于非 ASCII 字符已损坏，因此已[弃用](https://developer.mozilla.org/en-US/docs/JavaScript/Guide/Functions?redirectlocale=en-US&redirectslug=Core_JavaScript_1.5_Guide%2FFunctions#escape_and_unescape_functions)

> 这是网站……</p>

括号中的文本作为常规 HTML 出现在脚本元素之后。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T13:33:56.940

```
str = Array.prototype.map.call('ATP /  WTA Moscow (Shvedova - Pavlyuchenkova)', function(x){return '%'+x.charCodeAt(0).toString(16);}).join('');

str === '%41%54%50%20%2f%20%20%57%54%41%20%4d%6f%73%63%6f%77%20%28%53%68%76%65%64%6f%76%61%20%2d%20%50%61%76%6c%79%75%63%68%65%6e%6b%6f%76%61%29';

str !== '%41%54%50%20%2f%20%20%57%54%41%20%4d%6f%73%63%6f%77'; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-16T13:26:11.260

该字符串不可能产生另一行。每个*%XX*代表一个字母。unescape 不能神奇地组成不在该字符串中的字符。

随着编辑。查看页面源码你会看到()中的文字不在unescape调用中

```
<script language='Javascript'>document.write(unescape('%41%54%50%20%2f%20%20%57%54%41%20%4d%6f%73%63%6f%77'));</script> (Kuznetsov - Berlocq)</a></td> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-16T13:26:41.977

> （什韦多娃 - 帕夫柳琴科娃）

在该代码之后添加。

> %41%54%50%20%2f%20%20%57%54%41%20%4d%6f%73%63%6f%77

仅代表“ATP / WTA 莫斯科”

转义字符串中的每 3 个字符代表 1 个可读字符。

% = 转义和 [0-9a-f] = 字符的十六进制表示

%20 = 字符 32 = " " [空格]

%41 = 字符 65 = "A"

# html - 填充在输入类型收音机上不起作用

> ID：12915655
> 
> 赞同：2
> 
> 时间：2012-10-16T13:22:32.227
> 
> 标签：html, css

填充属性不适用于单选按钮，它仅适用于 IE。小提琴链接[http://jsfiddle.net/yvHPn/](http://jsfiddle.net/yvHPn/)

```
<head>
<style>

body {margin:0; padding:0}
.radio input{ padding-left:20px;}

</style>

</head>

<body>
<div class="radio">

<input type="radio" />
</div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-16T13:25:59.983

您只需要像这样将填充放在 .radio 类中

`.radio { padding-left:20px;}`

# java - 使用 servlet 传递 PDF

> ID：12915663
> 
> 赞同：2
> 
> 时间：2012-10-16T13:22:50.017
> 
> 标签：java, pdf, servlets, request, response

我正在向一个 servlet 发送一个请求，该请求被查看类似于`http://url:8080/getDocument?docName=doc.pdf`我不太确定发出请求的 servlet 在返回时如何处理 PDF 文件，然后将响应发送回我的网页供用户下载或保存。

我已经有代码可以发送回 XML 文档并且处理得当。我会做类似的方法吗？

1) servlet 如何通过网络发送 pdf 文件？

2）接收servlet如何处理pdf？

3) 收到 servlet 后，如何将其传递给用户下载或查看？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T13:41:25.637

如果您发送的回复是 pdf 文档，您应该添加

```
response.setContentType("application/pdf") 
```

在您的 servlet 代码中。

# python - 在python程序中需要制作一个简单的计算器来根据用户的输入进行响应

> ID：12915667
> 
> 赞同：1
> 
> 时间：2012-10-16T13:23:03.630
> 
> 标签：python, calculator

以下是我所做的：想法是能够从 2 个数字中计算结果，具体取决于用户是否想要将它们相加、相减、相除或相乘。

```
 print 'Welcome to my calculator program'
    Equation = raw_input('You want to add, subtract, divide or multiply? '
    firstno = raw_input ('Please enter first number ')
    secondno = raw_input('Please enter second number ')
    F1 = int(firstno)
    F2 = int(secondno)
    F3 = F1 + F2
    print F1, '+' ,F2, '=' ,F3 
```

我实际上并没有响应用户的输入，而是假设他会键入 add。如果用户想要减去而不是添加等等，我该如何对其进行编码，以便它会做出不同的反应？求救。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-16T13:30:58.067

You could use a dictionary dispatch and some of the functions in the `operator` module as a base.

```
import operator as op

operations = {
    'add': {'func': op.add, 'char': '+'},
    'minus': {'func': op.sub, 'char': '-'}
} 
```

Then lookup the keyword and apply the function and display the equation:

```
print F1, operations[Equation]['char'], F2, '=', operations[Equation]['func'](F1, F2) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-01-12T22:26:33.973

定义开始（）：

```
#main input variable to get a sign to do
calculator = input('What would you like to calculate? (x, /, +, -): ')
#gets 2 #'s to multiply, add, subtract, or divide 
if (calculator) == ('+'):
    add = input('what is the frist number would you like to add? ')
    addi = input('what is the second number would you like to add? ')
elif (calculator) ==('-'):
    sub = input('what is the first number would you like to subtract? ')
    subt = input('what is the second number you would like to subtract? ')
elif (calculator) == ('/'):
    div = input('what is the first number would you like to divide? ')
    divi = input('what is the second number would you like to divide? ')
elif (calculator) == ('x'):
    mult = input('what is the first number would you like to multiply? ')
    multi = input('what is the second number would you like to multiply? ')

#failsafe if done incorrect
elif (calculator) != ('x', '/', '-', '+'):
    print('try again')
    return

#adds 2 inputted #'s
if calculator == '+' :
    sumAdd = float (add) + float (addi)
    print(sumAdd)
#multiplies the 2 inputted #'s
elif calculator == 'x' :
    sumMul =  float (mult) * float (multi)
    print(sumMul)
#divides the 2 inputted #'s
elif calculator == '/' :
    sumDiv = float (div) / float (divi)
    print(sumDiv)
#subtracting the 2 inputted #'s
elif calculator == '-' :
    sumSub = float (sub) - float (subt)
    print(sumSub)

#returns to top of code to do another setup

return 
```

开始（）

有我的计算器记住在你的+、-、*、/上输入，然后再输入数字

# python - Python字典打印第一次出现

> ID：12915668
> 
> 赞同：2
> 
> 时间：2012-10-16T13:23:04.240
> 
> 标签：python, printing, dictionary, unique

在 Python 中，我目前有一个字典（它有一个来自列表中的列表的复合键），当我打印它时，它看起来类似于以下内容：

第一个值是一个数字，第二个值（A 或 B）指的是一个文本值，这些数字是它们出现在该字典派生的原始列表列表中的次数的计数。

我需要的是一种以以下格式打印数据的方法。对于字典中数值的唯一出现（即在本例中为第一个和第三个值），打印出相关的文本值及其计数。所以它看起来像

类型：111 文本计数

```
 A     4
       B    10

      Total: 14 
```

类型：112 文本计数

```
 A      3

     Total:   3 
```

我知道当与 If 语句结合使用时，我需要使用某种 while 循环。根据我迄今为止的研究（与迄今为止我所学的 Python 相关），我需要使用 if 语句编写循环以仅打印我想要打印的内容。所以我需要在它们第一次出现时打印新的数值，而不是它们出现的第二次（或第三次或第四次等）。我假设部分执行此操作，我将它们放在一个变量中，然后将它们与当前值进行比较。如果它们相同，我不打印它们，但如果它们不同，我打印旧数值的“总数”，将其添加到总总数中，然后打印新数值。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-16T13:28:47.267

我会使用对象的层次结构而不是一个平面字典，例如字典内的字典、字典内的元组等。

考虑一个在 dict 中包含 dicts 的示例：

```
data = { 
    '111': {
        'A': 4,
        'B': 10,
    },
    '112': {
        'A': 3
    },
} 
```

现在您可以更轻松地访问内容。例如“111”内的显示属性：

```
for key in data['111']:
    print "%s\t%s" % (key, data['111'][key]) 
```

通过组合两个 for 循环，可以轻松创建所需的输出：

```
for datatype in data:
    print("Type: %s Text Count" % datatype)
    items = data[datatype]
    total = 0
    for key in items:
        print "%s\t%s" % (key, items[key])
        total += items[key]
    print("Total:\t%s\n" % total) 
```

使用给定的数据运行上述代码将产生以下输出：

```
Type: 111 Text Count
A       4
B       10
Total:  14

Type: 112 Text Count
A       3
Total:  3 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-16T13:28:58.717

在我看来，更好的数据结构是：

```
{111:[('A', 4),('B',10)], 112:[('A': 3)]} 
```

然后你可以轻松地打印字典：

```
for k,v in d.items():
   print "Type: {0}\t Text Count".format(k)
   for item in v:
       print "\t\t{0}  {1}".format(*v) 
```

要将您的 dict 转换为这种形式，我会使用`defaultdict`：

```
from collections import defaultdict
d = defaultdict(list)
for k,v in yourdict.items():
    new_key,value0 = (x.strip() for x in k.split(','))
    d[int(new_key)].append((value0,v)) 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-16T13:30:49.187

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-16T13:40:42.693

您可以使用元组作为键。而不是`'111, A'`尝试`('111', 'A')`

它允许您轻松地在字典中循环查找与第一个或第二个键值匹配的内容。就像您所拥有的一样，除了更改密钥：

```
for row in lists: 
    key = (row[0], row[1])
    if key in dictionary: 
        dictionary[key] += 1 
    else: 
        dictionary[key] = 1

#gives
dictionary = {('111', 'A'): 4, ('111', 'B'):10, ('112', 'A'):4} 
```

现在，您是完全正确的：您需要一个变量来存储总数，您需要遍历字典，并且您需要在循环中使用条件语句。你到底在问什么？

您可以像这样遍历字典：

```
for k in d:
    print k, d[k] 
```

如果您保留字符串键，则需要从每个键中提取两个值，您可以使用`split`. （如果您使用元组，则无需执行此步骤）：

```
#with string keys
key_1, key_2 = k.split(',') 
```

您需要测试第一个键值是否与所需的数字匹配，然后您要打印字母和值 d[k]，并更新总变量：

```
if key_1 == desired:
    print key_2, d[k]
    total += d[k] 
```

所以你可以把它放在一起，在这样的函数中：

```
def f(d, desired):
    total = 0
    for k in d:
        key_1, key_2 = k.split(',')
        if key_1 == desired:
            print key_2, d[k]
            total += d[k]
    print 'total', total 
```

如果您使用元组而不是键，则可以删除拆分步骤，只需使用 k[0] 和 k[1] 即可获得两个值：

```
def f(d, desired):
    total = 0
    for k in d:
        if k[1] == desired:
            print k[0], d[k]
            total += d[k]

    print 'total', total 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-16T13:40:15.377

我写了一个简单的函数来打印你想要的。它需要字典作为第一个参数，类型作为 int 作为第二个参数（例如`fancy_print({'111, A': 4, '112, A': 3,'111, B': 10}, 111)`）：

```
def fancy_print(d, typ):
    res=[]
    for k in d:
        kp=[q.strip() for q in k.split(',')]
        if int(kp[0])==typ:
            res.append((kp[1],d[k]))
    res.sort()
    print('\tType: %d Text Count' % typ)
    for t,n in res:
        print('\t%s\t%2d' % (t, n))
    print()
    print('\tTotal:\t%2d' % sum([n[1] for n in res])) 
```

# c++ - 在代码中设置 char** argv

> ID：12915669
> 
> 赞同：0
> 
> 时间：2012-10-16T13:23:05.517
> 
> 标签：c++, visual-c++, argv

所以我有一个名为 prog.exe 的程序，它以

```
int main(int argc, char** argv) 
```

我传递给它的参数是

```
prog.exe news-rec 
```

或 prog.exe news-rec -t -p

如何在代码中配置这些参数的值，这样我就不必从命令行运行程序。

例如对于

```
prog.exe news-rec 
```

我认为 argc = 1 但我将如何配置 argv 它会是什么？我试着做

```
argv[0] = "news-rec"; 
```

但这不起作用

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-16T13:24:32.957

因为`argv[0]`包含可执行文件本身的名称。尝试

```
argc = 2;
argv[1] = "news-recc"; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-16T13:27:28.797

您不需要在命令行参数中提供**prog.exe**，因为 exe 名称始终是**argv[0]**即第一个参数。除此之外，您可以根据需要在**argv**中存储任意数量的参数，例如::

```
argv[1] = "new-rec" ;
argv[2] = "-t" ;
argv[3] = "-p" ; 
```

等等...

假设从标签中，您正在使用 Visual Studio，您可以尝试::

**项目选项卡-> 属性-> 配置属性-> 调试，然后在 (Command Arguments) 下的右侧输入**要传递的参数，**不**包括**prog.exe**。**argc**将自动计算您传递的参数数量。

# asp.net-mvc - 错误 System.Web.HttpCompileException (0x80004005)

> ID：12915673
> 
> 赞同：4
> 
> 时间：2012-10-16T13:23:24.283
> 
> 标签：asp.net-mvc, asp.net-mvc-3, runtime-error

我现在突然在仅 1 页中收到以下消息。可能是什么问题？

我正在使用 MVC ASP .NET 做一个网站。

> System.Web.HttpCompileException (0x80004005): c: \Windows\Microsoft.NET\Framework\v4.0.30319\Temporary ASP.NET Files\root\fcd5a636\19fe4d1\App_Web_create.cshtml.c6727781.9mayykrj.0.cs(162) ：错误CS1528：预期；或 = （不能在声明中指定构造函数参数）在 System.Web.Compilation.BuildProvidersCompiler.PerformBuild() 在 System.Web.Compilation.AssemblyBuilder.Compile() 在 System.Web.Compilation.BuildManager.CompileWebFile(VirtualPath virtualPath) 在 System .Web.Compilation.BuildManager.GetVPathBuildResultInternal(VirtualPath virtualPath, Boolean noBuild, Boolean allowCrossApp, Boolean allowBuildInPrecompile, Boolean throwIfNotFound, Boolean ensureIsUpToDate) at System.Web.Compilation.BuildManager.GetVPathBuildResultWithNoAssert(HttpContext context, VirtualPath virtualPath, Boolean noBuild,`1 locations, String name, String controllerName, String areaName, String cacheKey, String[]& searchedLocations) at System.Web.Mvc.VirtualPathProviderViewEngine.GetPath(ControllerContext controllerContext, String[] locations, String[] areaLocations, String locationsPropertyName, String name, String controllerName, String cacheKeyPrefix, Boolean useCache, String[]& searchedLocations) at System.Web.Mvc.VirtualPathProviderViewEngine.FindView(ControllerContext controllerContext, String viewName, String masterName, Boolean useCache) at System.Web.Mvc.ViewEngineCollection.<>c__DisplayClassc.<FindView>b__b(IViewEngine e) at System.Web.Mvc.ViewEngineCollection.Find(Func`2 在 System.Web.Mvc.ViewResult.FindView(ControllerContext context) 在 System.Web.Mvc.ViewEngineCollection.FindView(ControllerContext controllerContext, String viewName, String masterName) 在 System.Web.Mvc.ViewResultBase.FindView(ControllerContext context) 的查找，布尔 trackSearchedPaths) (ControllerContext 上下文) 在 System.Web.Mvc.ControllerActionInvoker.InvokeActionResult(ControllerContext controllerContext, ActionResult actionResult) 在 System.Web.Mvc.ControllerActionInvoker.<>c_ *DisplayClass1c.b* _19() 在 System.Web.Mvc.ControllerActionInvoker.InvokeActionResultFilter( IResultFilter 过滤器、ResultExecutingContext preContext、Func`1 continuation) at System.Web.Mvc.ControllerActionInvoker.<>c__DisplayClass1c.<>c__DisplayClass1e.<InvokeActionResultWithFilters>b__1b() at System.Web.Mvc.ControllerActionInvoker.InvokeActionResultWithFilters(ControllerContext controllerContext, IList`1 个过滤器，ActionResult actionResult) 在 System.Web.Mvc.ControllerActionInvoker.InvokeAction(ControllerContext controllerContext, String actionName) 在 System.Web.Mvc.Controller.ExecuteCore() 在 System.Web.Mvc.ControllerBase.Execute(RequestContext requestContext) 在System.Web.Mvc.ControllerBase.System.Web.Mvc.IController.Execute(RequestContext requestContext) 在 System.Web.Mvc.MvcHandler.<>c_ *DisplayClass6.<>c* _DisplayClassb.b_ *5() 在 System.Web.Mvc .Async.AsyncResultWrapper.<>c* _DisplayClass1.b_0 *() 在 System.Web.Mvc.Async.AsyncResultWrapper.<>c* _DisplayClass8 `1.<BeginSynchronous>b__7(IAsyncResult _) at System.Web.Mvc.Async.AsyncResultWrapper.WrappedAsyncResult`1.End() 在 System.Web.Mvc.MvcHandler.<> *c_DisplayClasse.b*_d() 在 System.Web.Mvc.SecurityUtil.ProcessInApplicationTrust 的 System.Web.Mvc.SecurityUtil.b__0(Action f) 在 System.Web.Mvc.MvcHandler.EndProcessRequest(IAsyncResult asyncResult) 在 System.Web。 Mvc.MvcHandler.System.Web.IHttpAsyncHandler.EndProcessRequest(IAsyncResult result) at System.Web.HttpApplication.CallHandlerExecutionStep.System.Web.HttpApplication.IExecutionStep.Execute() at System.Web.HttpApplication.ExecuteStep(IExecutionStep step, Boolean& completedSynchronously)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-16T13:29:00.907

这个错误意味着：**预期；or =（不能在声明中指定构造函数参数）**

对类的引用就像正在创建该类的对象一样。例如，尝试将变量传递给构造函数。使用 new 运算符创建一个类的对象。

以下示例生成 CS1528：

```
// CS1528.cs
using System;

public class B
{
   public B(int i)
   {
      _i = i;
   }

   public void PrintB()
   {
      Console.WriteLine(_i);
   }

   private int _i;
}

public class mine
{
   public static void Main()
   {
      B b(3);   // CS1528, reference is not an object
      // try one of the following
      // B b;
      // or
      // B bb = new B(3);
      // bb.PrintB();
   }
} 
```

希望这可以帮助。 [资源](http://msdn.microsoft.com/en-us/library/dbk331e6%28v=vs.71%29.aspx)

# ios - 就地 UITableView 编辑：添加行崩溃

> ID：12915674
> 
> 赞同：0
> 
> 时间：2012-10-16T13:23:26.913
> 
> 标签：ios, uitableview, crash, edit-in-place

我的 tableview 使用就地编辑和添加。按下编辑按钮时会添加一个新行，并且可以编辑和提交该新行。将新行提交到 tableview 时，会添加新行并将空白单元格向下移动，随后可以对其进行编辑并再次添加另一行。但是，在同一编辑会话期间尝试添加另一行时，出现错误：

```
*** Assertion failure in -[UITableView _endCellAnimationsWithContext:]
*** Terminating app due to uncaught exception 'NSInternalInconsistencyException', 
reason: 'attempt to insert row 2 into section 0, but there are only 2 rows in section 0 after the update' 
```

我在只添加一行之前遇到了这个错误，但是在遵循了就地编辑的教程之后，我认为我已经解决了。以下是一些相关的方法：

```
- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView {
    return 1;
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section {

    int count = [items count];
    if(self.editing)count++;
    return count;

}

- (void)setEditing:(BOOL)editing animated:(BOOL)animated
{
    [super setEditing:editing animated:animated];

    [keyphraseTextField setEnabled:YES];

    NSArray *paths = [NSArray arrayWithObject:
                      [NSIndexPath indexPathForRow:[items count] inSection:0]];
    if (editing)
    {
        [[self tableView] insertRowsAtIndexPaths:paths
                                withRowAnimation:UITableViewRowAnimationTop];
    }
    else {
        [[self tableView] deleteRowsAtIndexPaths:paths
                                withRowAnimation:UITableViewRowAnimationTop];
    }
}

- (void)tableView:(UITableView *)tableView
commitEditingStyle:(UITableViewCellEditingStyle)editingStyle
forRowAtIndexPath:(NSIndexPath *)indexPath {

    if (editingStyle == UITableViewCellEditingStyleDelete) {

        [self deleteItemAtIndexPath:indexPath];

        [self.tableView deleteRowsAtIndexPaths:[NSArray arrayWithObject:indexPath] withRowAnimation:UITableViewRowAnimationFade];

    }

    else if (editingStyle == UITableViewCellEditingStyleInsert) {

        NSIndexPath *thePath = [NSIndexPath indexPathForRow:[items count] inSection:0];

        DBAccess *dbaccess = [[DBAccess alloc] init];

        NSInteger keyphraseCount = [dbaccess getDomainKeyphraseCount:domain_id];
        NSInteger keyphraseCountLimit = [dbaccess getDomainKeyphraseCountLimit:domain_id];

        [dbaccess closeDatabase];

        [dbaccess release];

        if(![keyphraseTextField.text isEqualToString:@""] && keyphraseCount<keyphraseCountLimit){

            [self insertItemAtIndexPath:thePath];

            [self readItems];

            [self.tableView insertRowsAtIndexPaths:[NSArray arrayWithObject:thePath] withRowAnimation:UITableViewRowAnimationLeft];

            [self makeNSURLConnection];

        }else{

            if([keyphraseTextField.text isEqualToString:@""]){
                UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"Alert" message:@"Please insert Keyphrase." delegate:self cancelButtonTitle:@"Not Now." otherButtonTitles:@"Upgrade!", nil];
                [alert setTag:10];
                [alert show];
                [alert release];
            }
            if(keyphraseCount>=keyphraseCountLimit){
                UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"Alert" message:@"Kindly upgrade your subscription to add more keyphrases!" delegate:self cancelButtonTitle:@"Not Now." otherButtonTitles:@"Upgrade!", nil];
                [alert setTag:10];
                [alert show];
                [alert release];
            }

        }

    }

}

- (UITableViewCellEditingStyle)tableView:(UITableView *)aTableView editingStyleForRowAtIndexPath:(NSIndexPath *)indexPath {

    if (self.editing == NO || !indexPath) return UITableViewCellEditingStyleNone;

    if (self.editing && indexPath.row == ([items count])) {

        return UITableViewCellEditingStyleInsert;

    } else {

        return UITableViewCellEditingStyleDelete;

    }

    return UITableViewCellEditingStyleNone;

} 
```

如何解决此问题，以便用户能够在单个编辑“会话”中逐行添加？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T05:13:48.823

`[self.tableview beginUpdates];`您应该在和之间放置插入/删除/选择行`[self.tableview endUpdates];`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T16:23:10.267

最后，我不得不进行很多更改，并为每次更新后更改的 tablview 中的行数添加手动计数。这不是我喜欢的编码方式，但它有效，我无法弄清楚出了什么问题。

# c++ - 如何避免编译器错误：std::transform？

> ID：12915676
> 
> 赞同：7
> 
> 时间：2012-10-16T13:23:32.897
> 
> 标签：c++, visual-c++, stl, compiler-errors, genetic-algorithm

这是我的 C++ 代码（我使用的是 Visual C++ 2010）：

```
int absd(int t)
{
    return abs(t);
}
int main()
{
    try
    {
        int dpi = 137;
        int dpiCriterionAry[] = {100, 150, 200, 300, 400, 500, 600};
        std::vector<int> vec(dpiCriterionAry, dpiCriterionAry + _countof(dpiCriterionAry));
        std::transform(vec.begin(), vec.end(), vec.begin(), std::bind1st(std::minus<int>(), dpi));
        std::transform(vec.begin(), vec.end(), vec.begin(), absd);
        //std::transform(vec.begin(), vec.end(), vec.begin(), abs);
        copy(vec.begin(), vec.end(), ostream_iterator<int>(cout, "\t"));
        cout << endl;
    }
    catch(exception& e)
    {
        cerr << e.what() << endl;
    }
    return 0;
} 
```

当我取消注释该行时：

```
//std::transform(vec.begin(), vec.end(), vec.begin(), abs); 
```

我收到错误消息：

```
1>------ Build started: Project: Console, Configuration: Release Win32 ------ 
1>Build started 2012/10/16 21:17:19\. 1>InitializeBuildStatus: 1>  Creating "..\Intermediate\Console.unsuccessfulbuild" because "AlwaysCreate" was specified. 1>ClCompile: 1>  Console.cpp
1>Console.cpp(16): error C2780: '_OutIt std::transform(_InIt1,_InIt1,_InIt2,_OutIt,_Fn2)' : expects 5 arguments - 4 provided 
1>          D:\ProgramFiles\VS 2010\VC\include\algorithm(1155) : see declaration of 'std::transform'
1>Console.cpp(16): error C2914: 'std::transform' : cannot deduce template argument as function argument is ambiguous 
1>Console.cpp(16): error C2914: 'std::transform' : cannot deduce template argument as function argument is ambiguous 
1>Console.cpp(16): error C2784: '_OutIt std::transform(_InIt,_InIt,_OutIt,_Fn1)' : could not deduce template argument for '_OutIt' from 'std::_Vector_iterator<_Myvec>' 
1>          with 
1>          [ 
1>              _Myvec=std::_Vector_val<int,std::allocator<int>> 
1>          ] 
1>          D:\ProgramFiles\VS 2010\VC\include\algorithm(1051) : see declaration of 'std::transform' 
1> 
1>Build FAILED. 
1> 
1>Time Elapsed 00:00:02.48 ========== Build: 0 succeeded, 1 failed, 0 up-to-date, 0 skipped ========== 
```

但是，代码行：

```
std::transform(vec.begin(), vec.end(), vec.begin(), absd); 
```

能行得通。实际上，我使用的是相同的功能：`abs`，我对结果感到困惑。另外，我想知道是否可以将以下两行代码合并为一行（即一次`std::transform`调用，效果相同）：

```
std::transform(vec.begin(), vec.end(), vec.begin(), std::bind1st(std::minus<int>(), dpi));
std::transform(vec.begin(), vec.end(), vec.begin(), absd); 
```

任何人都可以帮助我解决这两个问题吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-16T13:32:10.700

问题是`std::abs`有[几个重载](http://en.cppreference.com/w/cpp/numeric/math/abs)。`std::transform`这就是为什么编译器无法确定您在函数调用中尝试使用的重载。

为了解决它，您可以执行@Xeo 在他的评论中提到的操作：

```
std::transform(vec.begin(), vec.end(), vec.begin(), [&](int i){ return abs(i); }); 
```

或者您可以静态转换以获得适当的函数地址：

```
std::transform(vec.begin(), vec.end(), vec.begin(), static_cast<int(*)(int)>(abs)); 
```

关于你的最后一个问题，是的，lambda 在这里很有魅力：

```
std::transform(vec.begin(), vec.end(), vec.begin(), [&](int i) { return absd(dpi - i); } ); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-16T13:34:22.977

`abs`是一个重载函数，而不是单个实体，因此调用`std::transform`不能推导出模板参数，因为 name 没有引用单个函数`abs`。

它等价于：

```
void foo(int) { }
void foo(const char*) { }

template<typename T>
int bar(T)
{ return 0; }

int i = bar(foo);  // which 'foo' ? 
```

您可以通过将其显式转换为您所指的函数的类型来告诉编译器`abs`您的意思：

```
std::transform(vec.begin(), vec.end(), vec.begin(), (int (*)(int))abs); 
```

或者通过创建一个引用您想要的函数的变量：

```
int (*p)(int) = abs;
std::transform(vec.begin(), vec.end(), vec.begin(), p); 
```

要将两种转换合并为一个，您可以使用 lambda，如 Xeo 建议的那样，或使用`std::bind`例如

```
using std::placeholders::_1;
int (*p)(int) = abs;
std::transform(vec.begin(), vec.end(), vec.begin(),
               std::bind(p, std::bind(std::minus<int>(), dpi, _1))); 
```

或者对于 C++03，您可以`boost::bind`改用。

# php - PHP/MySQL 字符串搜索查询

> ID：12915677
> 
> 赞同：0
> 
> 时间：2012-10-16T13:23:34.380
> 
> 标签：php, html, mysql

我有一个包含“客户”信息的数据库设置。我有一个 PHP 表单来搜索字符串、名字 (fname)、姓氏 (lname) 和电话号码 (phone)。出于某种原因，我什至没有让助手显示这些功能正在运行？我一遍又一遍地重新阅读这段代码，似乎无法弄清楚我在哪里遗漏了一些东西。

```
<form name="search" method="post" action="<?=$PHP_SELF?>">
 Seach for: <input type="text" name="find" /> in 
 <Select NAME="field">
 <Option VALUE="fname">First Name</option>
 <Option VALUE="lname">Last Name</option>
 <Option VALUE="phone">Phone #</option>
 </Select>
 <input type="hidden" name="searching" value="yes" />
 <input type="submit" name="search" value="Search" />
 </form>
 <? 
 //This is only displayed if they have submitted the form 
 if ($searching =="yes") 
 { 
 echo "<h2>Results</h2><p>"; 

 //If they did not enter a search term we give them an error 
 if ($find == "") 
 { 
 echo "<p>You forgot to enter a search term"; 
 exit; 
 } 

 // We preform a bit of filtering 
 $find = strtoupper($find); 
 $find = strip_tags($find); 
 $find = trim ($find); 

 //Now we search for our search term, in the field the user specified 
 $data = mysql_query("SELECT * FROM customer WHERE upper($field) LIKE'%$find%'"); 

 //And we display the results 
 while($result = mysql_fetch_array( $data )) 
 { 
 echo $result['fname']; 
 echo " "; 
 echo $result['lname']; 
 echo "<br>"; 
 echo $result['phone']; 
 echo "<br>"; 
 echo "<br>"; 
 } 

 //This counts the number or results - and if there wasn't any it gives them a little message explaining that 
 $anymatches=mysql_num_rows($data); 
 if ($anymatches == 0) 
 { 
 echo "Sorry, but we can not find an entry to match your query<br><br>"; 
 } 

 //And we remind them what they searched for 
 echo "<b>Searched For:</b> " .$find; 
 } 
 ?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T13:33:20.713

您的脚本中有一些错误，我会尽力帮助您：

```
<? --> <?php 
```

然后您的表单通过方法 POST 传递参数，因此您必须像这样检查搜索：

```
if ($_POST['searching'] =="yes") 
```

你在这里有同样的错误：

```
if ($_POST['find'] == "") 
```

和这里：

```
 $find = strtoupper($_POST['find']); 
```

再见！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T13:28:27.643

您应该首先创建一个如下所示的查询字符串，然后在`mysql_query`Hope this 中使用该字符串。

```
str = "SELECT * FROM customer WHERE upper(".$field.") LIKE'%".$find%."'"; 
```

# android - 读取文件但来自不同的活动

> ID：12915679
> 
> 赞同：1
> 
> 时间：2012-10-16T13:23:40.683
> 
> 标签：android, android-file

```
String data = "my data";
FileOutputStream fos = openFileOutput("data", MODE_PRIVATE);
fos.write(data.getBytes());
fos.close(); 
```

读取文件但来自不同的活动，有什么想法吗？我听说如果我不定义它的路径，当我这样阅读它时，它会自动检测文件的位置，是真的吗？

回到我的问题：读取文件但来自不同的活动帮助！

# c# - 从存储过程中检索返回值

> ID：12915684
> 
> 赞同：0
> 
> 时间：2012-10-16T13:23:45.190
> 
> 标签：c#, asp.net, sql-server, stored-procedures

我有一个存储过程，如下所示：

```
CREATE PROCEDURE procTest 
    -- Add the parameters for the stored procedure here
    @gameId int = NULL, 
    @memberID int = NULL,
    @mediatorID int = NULL,
    @id int OUTPUT
AS
BEGIN
    -- SET NOCOUNT ON added to prevent extra result sets from
    -- interfering with SELECT statements.
    SET NOCOUNT ON;

    -- Insert statements for procedure here
    INSERT INTO tblSiteChallengeMember (gameId, creatorId, mediatorId, completed, dateAdded) VALUES (@gameId, @memberId, @mediatorID, 0, GETDATE())
END
GO 
```

我需要返回 的 ID `tblSiteChallengeMember`，但我不知道该怎么做。

我已经看到了['round about here](http://forums.asp.net/post/1987936.aspx)的例子，但我担心：

```
SELECT TOP 1 @ProductName=PRODUCTNAME, @Quantity =quantity 
FROM Products P, [Order Details] OD, Orders O, Customers C 
WHERE C.CustomerID = @CustomerID 
AND C.CustomerID = O.CustomerID AND O.OrderID = OD.OrderID AND OD.ProductID = P.ProductID 
```

不起作用，因为单个用户可以多次输入，而这些时间可能根本不是唯一的。

如何获取插入到我的 ASP.net 页面的最后一行的 ID？

* * *

将我的存储过程更新为：

```
ALTER PROCEDURE [dbo].[procCreateChallengeMember]
    -- Add the parameters for the stored procedure here
    @gameId int = NULL, 
    @memberID int = NULL,
    @mediatorID int = NULL,
    @id int OUTPUT
AS
BEGIN
    -- SET NOCOUNT ON added to prevent extra result sets from
    -- interfering with SELECT statements.
    SET NOCOUNT ON;

    -- Insert statements for procedure here
    INSERT INTO tblSiteChallengeMember (gameId, creatorId, mediatorId, completed, dateAdded) VALUES (@gameId, @memberId, @mediatorID, 0, GETDATE())

    SELECT @id = SCOPE_IDENTITY()
END 
```

SQL表是：

```
GO

/****** Object:  Table [dbo].[tblSiteChallengeMember]    Script Date: 10/17/2012 08:05:12 ******/
SET ANSI_NULLS ON
GO

SET QUOTED_IDENTIFIER ON
GO

CREATE TABLE [dbo].[tblSiteChallengeMember](
    [id] [int] IDENTITY(1,1) NOT NULL,
    [gameId] [int] NULL,
    [creatorId] [int] NOT NULL,
    [mediatorId] [int] NULL,
    [completed] [tinyint] NULL,
    [dateAdded] [datetime] NULL,
 CONSTRAINT [PK__tblSiteD__3213E83F628FA481] PRIMARY KEY CLUSTERED 
(
    [id] ASC
)WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON) ON [PRIMARY]
) ON [PRIMARY]

GO 
```

aspx.cs 是：

SqlConnection db = DataConn.SqlConnection();

```
db.Open();
SqlTransaction transaction = db.BeginTransaction();

try
{
    int id = 0;

    SqlCommand sqlComm =
            new SqlCommand(
                "procCreateChallengeMember @gameId, @creatorId, @mediatorId, @id", db, transaction) { CommandType = CommandType.Text };

    sqlComm.Parameters.Add(new SqlParameter("@gameId", SqlDbType.Int)).Value = 1;
    sqlComm.Parameters.Add(new SqlParameter("@creatorId", SqlDbType.Int)).Value = 1;
    sqlComm.Parameters.Add(new SqlParameter("@mediatorId", SqlDbType.Int)).Value = 1;
    SqlParameter param = new SqlParameter("@id", SqlDbType.Int)
        {
            Direction = ParameterDirection.Output
        };

    sqlComm.Parameters.Add(param);
    sqlComm.ExecuteNonQuery();

    //if(param.Value != DBNull.Value)
    //{
        id = Convert.ToInt32(param.Value);
        Response.Write("One: " + id + "<br/>");
    //}
    transaction.Commit();
    //Response.Write("Two: " + sqlComm.Parameters["expr"].Value + "<br/>");

}
catch (Exception ess)
{
    transaction.Rollback();
    Response.Write(ess.Message);
} 
```

现在得到错误 **Object cannot be cast from DBNull to other types。**（当我删除该 IF 语句时）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T13:25:33.323

“如何获取插入到我的 ASP.net 页面的最后一行的 ID？”

```
SELECT @id = SCOPE_IDENTITY() 
```

获取插入行以返回它的存储过程。

**编辑**

针对后续问题。

您需要让您的 SqlCommand 知道有一个参数正在输出。

```
 // Just below where you added your other params
   SqlParameter outputParam = new SqlParameter("@id", SqlDbType.Int)
   { 
      Direction = ParameterDirection.Output 
   };

   sqlComm.Parameters.Add(outputParam);

   sqlComm.ExecuteNonQuery(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T13:31:20.640

```
IF (@@error <> 1)
    BEGIN
    SELECT @id=scope_identity()
    END
ELSE
    BEGIN
    set @id=0
    RETURN 0 
    END 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-16T13:47:14.413

`SCOPE_IDENTITY`在您的 PROC 中使用后从 C# 获取它

```
SqlParameter param = new SqlParameter("@Id", SqlType.Int);
param.Direction = ParameterDirection.Output;

command.Parameters.Add(param);
command.ExecuteNonQuery();

int id = 0;
if(param.Value != null)
   id = Convert.ToInt32(param.Value) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-17T06:40:09.480

终于找到了我自己的解决方案（有效）。

SQL：

```
-- =============================================
-- Author:      Darren Whitfield
-- Create date: 7 October 2012
-- Description: This will create a new challenge holder, and return its ID
-- =============================================
ALTER PROCEDURE [dbo].[procCreateChallengeMember]
    -- Add the parameters for the stored procedure here
    @gameId int = NULL, 
    @memberID int = NULL,
    @mediatorID int = NULL,
    @id int OUTPUT
AS
BEGIN
    -- SET NOCOUNT ON added to prevent extra result sets from
    -- interfering with SELECT statements.
    -- SET NOCOUNT ON;

    -- Insert statements for procedure here
    INSERT INTO tblSiteChallengeMember (gameId, creatorId, mediatorId, completed, dateAdded) VALUES (@gameId, @memberId, @mediatorID, 0, GETDATE())

    SET @id = @@IDENTITY
    SELECT @id AS iden
END 
```

aspx.cs：

```
string identity = "";
        SqlConnection db = DataConn.SqlConnection();

        db.Open();
        SqlTransaction transaction = db.BeginTransaction();

        try
        {

            SqlCommand sqlComm =
                    new SqlCommand(
                        "procCreateChallengeMember @gameId, @creatorId, @mediatorId, @id", db, transaction) { CommandType = CommandType.Text };

            sqlComm.Parameters.Add(new SqlParameter("@gameId", SqlDbType.Int)).Value = 2;
            sqlComm.Parameters.Add(new SqlParameter("@creatorId", SqlDbType.Int)).Value = 1;
            sqlComm.Parameters.Add(new SqlParameter("@mediatorId", SqlDbType.Int)).Value = 1;
            sqlComm.Parameters.Add(new SqlParameter("@id", SqlDbType.Int) { Direction = ParameterDirection.Output });

            using (SqlDataReader rdr = sqlComm.ExecuteReader())
            {
                while (rdr.Read())
                {
                    identity = rdr["iden"].ToString();
                }
            }

            Response.Write("One: " + identity + "<br/>");

            transaction.Commit();

        }
        catch (Exception ess)
        {
            transaction.Rollback();
            Response.Write(ess.Message);
        } 
```

***返回 ID***
**感谢所有花时间提出想法和意见的人。没有它，我永远不会成功。**

# ruby-on-rails - Rails URL 参数无法使用

> ID：12915685
> 
> 赞同：1
> 
> 时间：2012-10-16T13:23:45.790
> 
> 标签：ruby-on-rails, ruby-on-rails-3, link-to, actioncontroller

我正在传递一个`suggestion_id`参数，`link_to`以便可以将其保存为`create`不同控制器中操作的一部分。

```
<%= link_to "I'm interested", new_interested_path(:controller => :interested, 
    :suggestion_id => suggestion.id, :method => :get), :class => 'btn btn-mini' %> 
```

这是生成的 URL：

```
http://localhost:3000/interesteds/new?controller=interested&method=get&suggestion_id=1 
```

据此，我应该能够使用以下代码来访问我在另一个控制器中的创建操作中的[参数](http://guides.rubyonrails.org/v2.3.11/action_controller_overview.html)`suggestion_id`：

```
@interested.suggestion_id = params[:suggestion_id] 
```

然而，这不是真的。每当创建“感兴趣的”对象时，suggest_id 就为零。什么给出了，为什么我找不到帮助我解决这个问题的文档？不要告诉我看[这里，](http://api.rubyonrails.org/classes/ActionController/Base.html)因为我也已经这样做了。这不是很有帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T13:26:50.203

也许试试这样：

```
<%= link_to "I'm interested", new_interested_path(:suggestion_id => suggestion.id), :method => :get, :class => 'btn btn-mini' %> 
```

该`new_interested_path`方法已经表明它正在使用“感兴趣的”资源，因此不需要（也不应该）传入控制器名称。并且该方法不应该是 URL 的一部分，它是 rails 的 http 方法将请求发送到 URL 时将使用。

您关于`suggestion_id`为零的观点取决于您要做什么。在您的情况下，您不是在访问`create`操作，而是`new`您可以用来初始化对象以进行表单呈现的操作。为了在提交时`suggestion_id`传递给`create`操作，您的`new.html.erb`视图模板需要有一个分配该属性的字段（可能是隐藏字段） - 如下所示：

```
form_for @interested, interesteds_path do |f|
  ... # other fields
  f.hidden_field :suggestion_id
  f.submit
end 
```

提交此表单时，`params[:interested]`将包含所有已填充字段的值（包括`suggestion_id`），并可用于构建和创建新的 ActiveRecord 对象。

您的控制器操作应如下所示：

```
def new
  @interested = Interested.new(:suggestion_id => params[:suggestion_id])
end

def create
  @interested = Interested.new(params[:interested])
  if @interested.save
    # do something
  else
    # alert user
  end
end 
```

# mongodb - 用于 MongoDB 的 phalcon 0.6.0 ODM（对象文档映射器）我如何使用？

> ID：12915687
> 
> 赞同：3
> 
> 时间：2012-10-16T13:23:52.183
> 
> 标签：mongodb, phalcon

在公告中

> 0.6.0 包括 MongoDB 的基本 ODM（对象文档映射器）

有人可以提供更多信息吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-16T16:48:40.790

Phalcon 0.6.0 将提供 ODM 以面向对象的方式操作 Mongo 文档。这不是最终的用法，但它会给你一个想法：

```
<?php

//Register the mongo db connection in the DI
$di->set('mongo', function() {
     $mongo = new Mongo("mongodb://localhost");
     return $mongo->selectDB('invo');
});

//Register a collection manager
$di->set('collectionManager', function() {
     return new Phalcon\Mvc\Collection\Manager();
});

//A model that maps to the products collection
class Products extends Phalcon\Mvc\Collection
{

}

//Create a document
$product = new Products();
$product->name = 'Artichoke';
$product->status = 'Active';
$product->save();

//Create another document
$product = new Products();
$product->name = 'Carrots';
$product->price = 15.20;
$product->status = 'Active';
$product->save();

//Updating a product
$product = Products::findFirst();
$product->status = 'Inactive';
$product->save();

//Deleting a product
$product = Products::findFirst();
$product->delete();

//Finding documents
$products = Products::find();
foreach($products as $product){
   echo $product->name;
}

$products = Products::find(array(
      'conditions' => array('$gt' => array('price', '5')),
      'sort' => array('name' => 1),
      'limit' => 2
)); 
```

由于此功能正在全面开发中，某些方面可能会在最终版本之前发生变化。

# c# - 改变构造函数行为的最坏方法

> ID：12915688
> 
> 赞同：5
> 
> 时间：2012-10-16T13:23:54.697
> 
> 标签：c#, massive

我觉得我在这里陷入了几个糟糕的解决方案之间，需要一些关于如何尽量减少未来痛苦的建议。我们正在使用 Massive ORM，它的构造函数中有以下几行：

```
var _providerName = "System.Data.SqlClient";

if (ConfigurationManager.ConnectionStrings[connectionStringName].ProviderName != null)
    _providerName = ConfigurationManager.ConnectionStrings[connectionStringName].ProviderName;

_factory = DbProviderFactories.GetFactory(_providerName);
ConnectionString = ConfigurationManager.ConnectionStrings[connectionStringName].ConnectionString; 
```

对我来说重要的部分是它从`ConfigurationManager`. 我们正在尝试集中配置，在此过程中，我们希望将连接字符串排除在 web/app.configs 之外（我们有大约 150 个已部署的主机，因此开销变得很大）。但是，由于此处读取的配置文件是硬编码的，并且该`ConnectionStrings`集合是只读的（有一些变通方法，但它们都很脏），因此这会发生故障。

解决此问题的一种可能方法是将这些行提取到虚拟方法中，然后通过继承对其进行更改。但是，当我们想要更新 Massive 时，这并不是很好，而且从构造函数调用虚拟方法也可能很糟糕。

我还有什么其他选择？这里的主要优先事项是尽量减少更新时的影响。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T16:23:25.427

您可以通过构造函数传入所有必需的字段来消除对象的配置源依赖关系。

请参阅[Martin Fowler](http://martinfowler.com/articles/injection.html)关于依赖注入的文章。同样的概念在这里也适用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-20T06:49:34.980

最后，我们决定通过使其部分化来对大规模类进行最小的更改。然后在一个单独的文件中，我们添加了一个额外的构造函数，它接受不同的参数。这样，如果我们更新库，我们需要做的唯一更改就是`partial`再次添加。

# php - 如何在第一次将禁用属性设置为禁用 Zend Framework 2 形式的

> ID：12915689
> 
> 赞同：3
> 
> 时间：2012-10-16T13:24:00.573
> 
> 标签：php, zend-form, zend-framework2

我正在使用 Zend Framework 2 开发一个应用程序，并且我正在使用两个多选框。第一个填充了来自数据库的数据，第二个是空的。

**我打算在两个选择的第一个选项中将禁用属性设置为“禁用”。** 这样，第一个选项将无法使用且无法点击。因此，用户在使用添加/删除按钮时将无法将这些第一个选项从一个选择传递到另一个选择。

**选择 1**

```
 <select id="AttributesId" multiple="multiple" size="7" title="Select an Attribute" name="idAttributes[]">
   <option value="0">Please Select an Attribute</option>
    <option value="1"> Attribute 1</option>
    <option value="2"> Attribute 2</option>
   </select> 
```

**选择 2**

```
<select id="SelectedAttributesId" multiple="multiple" size="7" title="Selected Attributes" name="selectedAttributes[]">
<option value="0">Current Selection</option>
</select> 
```

在 ZF2 上生成两个选择的 php 代码是：

(...)

```
public function __construct ($em = null)
    {
        parent::__construct("typeset");
        $this->setAttribute("method", "post")
            ->setAttribute("class", "contact-form");

        if(null !== $em)
        {
            $this->setEntityManager($em);
        }

        $em = $this->getEntityManager();
        $query = $em->createQuery("SELECT a.idAttribute, a.internalName FROM ProductCatalog\Entity\Attribute\Attribute a ORDER BY a.internalName ASC");
        $attributes = $query->getResult();

        $select = new Element\Select('idAttributes');
        $select->setAttribute('title', 'Select an Attribute')
                ->setAttribute('size', 7)
                ->setAttribute('multiple', 'multiple')
                ->setAttribute('id', 'AttributesId');

        $selected = new Element\Select('selectedAttributes');
        $selected->setAttribute('title', 'Selected Attributes')
               ->setAttribute('size', 7)
               ->setAttribute('multiple', 'multiple')
               ->setAttribute('id', 'SelectedAttributesId');

        $labelIdAttributes = 'Attributes List: ';
        $labelSelectedAttributes = 'Selected Attributes List: ';

        $options[0] = 'Please Select an Attribute'; 
```

// 下面这行不起作用，但你可以了解我需要什么 //$options[0]->setAttribute('deselect', 'deselect');

```
 foreach ($attributes as $key => $value)
        {
            $options[$value['idAttribute']] = $value['internalName'];
        }

        $selectedOptions[0] = 'Current Selection';

        $select->setLabel($labelIdAttributes)
               ->setValueOptions($options);

        $selected->setLabel($labelSelectedAttributes)
                ->setValueOptions($selectedOptions);

        $this->add($select);
        $this->add($selected);

(...) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-16T13:51:57.793

如果我没记错的话，您需要稍微不同地格式化选项数组：

```
$options = array(
    array('value' => '0', 'label' => ' Please Select an Attribute', 'disabled' => 'disabled'),
    array('value' => '1', 'label' => ' Attribute 1'),
    array('value' => '2', 'label' => ' Attribute 2')
); 
```

禁用是有效属性之一。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-06-08T08:27:52.167

只需获取表单元素并使用禁用属性

```
$form->get('select_element')->setAttribute('disabled', 'disabled'); 
```

# android - 从共享首选项设置微调器默认值

> ID：12915690
> 
> 赞同：0
> 
> 时间：2012-10-16T13:24:01.263
> 
> 标签：android

这是我的问题。我在 Main Activity 类上有一个微调器。在我用作首选项类的单独类中，我有一个具有相同微调器值的列表视图。我希望用户能够从首选项类列表视图中选择一个值，并自动将该值设置为主类中微调器的当前值。此外，我希望保存该值，以便当用户启动应用程序时，他们选择作为首选项类中的默认值的值是在微调器上设置的值。我希望我已经把自己说得够清楚了。我没有提供任何鳕鱼，但我正在对我正在尝试做的事情进行测试模型，稍后我将发布。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T13:30:46.990

尝试这个，

要将值存储在共享首选项中：

```
 SharedPreferences preferences = PreferenceManager.getDefaultSharedPreferences(this);
  SharedPreferences.Editor editor = preferences.edit();
  editor.putString("SpinnerValueKey","YourValue");
  editor.commit(); 
```

要从共享首选项中检索值：

```
 SharedPreferences preferences = PreferenceManager.getDefaultSharedPreferences(this);
  String YourValue = preferences.getString("SpinnerValueKey",""); 
```

如果您想通过名称获取 Spinner Position，那么您可以在此处查看[mypost](https://stackoverflow.com/questions/10634180/how-to-set-spinner-default-by-its-value-instead-of-postion)。

如果你想要更多，那么你可以在[这里](http://developer.android.com/guide/topics/data/data-storage.html#pref)找到。

android sdk 的示例目录包含检索和检索共享首选项的示例。它位于：

```
<android-sdk-home>/samples/android-<platformversion>/ApiDemos directory 
```

如果您的应用程序具有复杂的存储空间，那么我建议您使用 Sqlite 数据库。

希望能帮助到你。

# iphone - iPhone中日期字符串的问题？

> ID：12915695
> 
> 赞同：0
> 
> 时间：2012-10-16T13:24:17.333
> 
> 标签：iphone, ios, string, nsdateformatter

我正在开发一个 iPhone 应用程序。我`NSDateFormatter`用来格式化日期`NSString`，然后我尝试将该日期字符串设置为`UILabel`. 我试过这段代码：

```
NSDateFormatter *dateFormat = [[NSDateFormatter alloc] init];
[dateFormat setDateFormat:@"dd/MM/yyyy"];
NSDateFormatter *timeFormat = [[NSDateFormatter alloc] init];
[timeFormat setDateFormat:@"HH:mm:ss"];
NSDate *now = [[NSDate alloc] init];
NSString *theDate = [dateFormat stringFromDate:now];
Result: theDate:16/10/2012 
```

但我收到一个错误：

```
UILabel *lbl = [[UILabel alloc]init];
lbl.text = theDate; // the error comes here 
```

错误信息：

```
Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: '-[__NSCFArray isEqualToString:]: unrecognized selector sent to instance 0x6b837e0'
*** First throw call stack: 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T13:31:10.073

尝试这个，

```
UILabel *lbl = [[UILabel alloc]initWithFrame:CGRectMake(50, 50, 100, 30)];
    lbl.text = theDate;
    [self.view addSubview:lbl]; 
```

这是工作

# c# - C#如何根据每个项目内的字符子集使用 lambda 表达式对字符串列表进行排序

> ID：12915705
> 
> 赞同：2
> 
> 时间：2012-10-16T13:24:57.537
> 
> 标签：c#, list, sorting, lambda

我有一个字符串列表，它们是记录的名称。一个例子：

```
Record_One
Record_Two
Records_Three 
```

有时，我想删除一条记录。出于记录目的，我不删除字符串。我通过在末尾添加单词 _Deleted 来更改它，例如：

```
Record_One_Deleted
Record_Two
Record_Three_Deleted 
```

我的问题是这样的：

我怎样才能让我的字符串列表按字母顺序排列，同时将所有 _Deleted 记录放在底部？

预期结果将如下所示（使用新的示例数据集）：

```
B
C
D
E
A_Deleted
F_Deleted 
```

请注意，我的列表按字母顺序排列，但包含“_Deleted”的字符串位于底部。

我希望使用 Lambda 表达式，因为我已经可以使用以下方式对列表进行字母排序：

```
A_List.Sort((x, y) => string.Compare(x.Name, y.Name)); 
```

而且我发现单行表达式相当流畅。

任何想法或评论都非常感谢任何可能拥有它们的人！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-16T13:27:23.553

您可以使用`OrderBy`布尔值：

```
list.OrderBy(str => str.EndsWith("_Deleted"))
    .ThenBy(str => str); 
```

这是一个演示：http: [//ideone.com/m6Zgd](http://ideone.com/m6Zgd)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-16T13:35:22.350

您可以派生出自己的[`Comparer<string>`](http://msdn.microsoft.com/en-us/library/cfttsh47.aspx)并将其传递给适当的[`OrderBy`](http://msdn.microsoft.com/en-us/library/bb549422.aspx)重载。

我相信这会比排序然后子排序更有效。

* * *

```
public DeletedLastStringComparer : Comparer<string>
{
    private const string Deleted = "_Deleted";

    private readonly stringComparison;

    public DeletedLastStringComparer() :
        this DeletedLastStringComparer(StringComparison.InvariantCulture)
    {
    }

    public DeletedLastStringComparer(StringComparison stringComparison)
    {
        this.stringComparison;
    }

    public override int Compare(string x, string y)
    {
        var xDeleted = x.EndsWith(Deleted, this.stringComparison);
        var yDeleted = y.EndsWith(Deleted, this.stringComparison);

        if (xDeleted ^ yDeleted)
        {
            if (xDeleted)
            {
                return -1;
            }

            return 1;
        }
        else
        {
            return string.Compare(x, y, this.stringComparison);
        }
    }
} 
```

你可以这样使用

```
list.OrderBy(s => s, new DeletedLastStringComparer(StringComparison.Ordinal)); 
```

这具有可重用并允许传递显式比较类型的最佳实践的好处。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-16T13:28:54.837

我的第一个想法是这样的：

```
A_List.Where(li => !li.EndsWithd("_DELETED").ToList().Sort((x, y) => string.Compare(x.Name, y.Name)); 
```

但在此示例中，列表中没有已删除的项目。您可以将它们保存在单独的列表中，然后将此列表添加到另一个列表中。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-16T13:49:56.827

您也许可以使用 linq OrderBy Extension 并执行以下操作：

```
 List<string> strings = new List<string>()
            {
                "A",
                "B",
                "C_DELETED",
                "E_DELETED",
                "D",
                "C_DELETED",
            };

 var result = strings.OrderBy(i => i.Replace("_DELETED", string.Empty)); 
```

# crystal-reports - 水晶报表交叉表或图表中的公式

> ID：12915711
> 
> 赞同：0
> 
> 时间：2012-10-16T13:25:15.977
> 
> 标签：crystal-reports, charts, formula, crosstab, crystal-reports-xi

我正在构建一个报告，其中应包含一个图表，其中包含每个客户包含特定项目的订单百分比。

在简单的报告表单中，我可以通过按客户分组然后使用两个运行字段轻松完成此操作 - 一个用于不同数量的订单 ID，另一个用于订单 ID 计数，条件是订单行表中的项目 ID 匹配寻找的特定项目 - 以及一个公式字段，将后者除以前者并乘以 100。

现在，将这些数据写入图表让我无法理解。图表和交叉表似乎都不允许我使用这个公式。

任何想法如何解决这个问题？

——编辑——</p>

来自数据库的数据示例：

```
╔════════╗
║订单║
╠════════╩═╤══════════╤═════════════════════╤═════ ╗
║ 订单编号 │ 客户 │ 订单日期 │ ... ║
╠══════════╪══════════╪═════════════════════╪═════ ╣
║ 1 │ 0080 │ 2012-09-24 13:16:17 │ ... ║
╟──────────┼──────────┼──────────────────────┼──── ╢
║ 2 │ GKEM │ 2012-09-22 19:31:54 │ ... ║
╟──────────┼──────────┼──────────────────────┼──── ╢
║ ... │ ... │ ... │ ... ║
╚══════════╧══════════╧═════════════════════╧═════ ╝

╔════════════╗
║ 订单项║
╠════════════╩═╤══════════╤═════════╤════╕
║ OrderItem ID │ Order ID │ Item ID │ ... ║
╠══════════════╪══════════╪═════════╪════╕
║ 1 │ 1 │ PNA │ ... ║
╟──────────────┼──────────┼──────────┼──────╢
║ 2 │ 1 │ PKA │ ... ║
╟──────────────┼──────────┼──────────┼──────╢
║ 3 │ 2 │ KARE01 │ ... ║
╟──────────────┼──────────┼──────────┼──────╢
║ 4 │ 2 │ PPKI │ ... ║
╟──────────────┼──────────┼──────────┼──────╢
║ 5 │ 2 │ PNA │ ... ║
╟──────────────┼──────────┼──────────┼──────╢
║ ... │ ... │ ... │ ... ║
╚══════════════╧══════════╧═════════╧════╕

```

我可以在交叉表（或图表）中获取给定时间段内给定客户的订单数量。
在交叉表（或图表）中获取包含在给定时间段内从给定客户订购的特定商品的订单数量，我也可以这样做。
在交叉表（或图表）中获取在给定时间段内从给定客户订购的特定项目的订单*百分比是问题所在。*

报表必须在 Crystal Reports XI 中，因为运行报表的自动报表生成软件无法处理较新的 Crystal Reports 文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T12:49:01.370

我怀疑您正在与 Crystal 报表无法将打印时间变量放入图表中发生冲突。例如，如果您的公式使用了运行总计，那么它将不起作用。也就是说，您可以将这些值传递给子报告，然后您可以在图表中使用该数据，这可能是您最好的选择。

# windows - 一个有延迟的全局键盘钩子

> ID：12915734
> 
> 赞同：2
> 
> 时间：2012-10-16T13:26:30.730
> 
> 标签：windows, winapi

我正在为条形码扫描仪制作“驱动程序”。

这种特殊的扫描仪基本上是一个 USB 键盘，每当扫描某些东西时都会产生击键。

我想找到一种方法来区分这些击键和正确的键盘发送的那些击键。不幸的是，唯一的区别是扫描仪生成击键的速度*非常*快，在几分之一秒内就可以完成一系列按键操作和按键操作。

我看到它的方式是我必须设置一个全局键盘挂钩来拦截所有输入，以某种方式存储它，等待一点点然后将这些击键进一步发送到挂钩链中，或者假设它们是扫描仪生成并处理它们的东西适当地。

但是，之前没有使用钩子的经验，我不确定正确的方法。我可以只调用其他线程`CallNextHookEx()`以外`KeyboardProc()`的方法来传递延迟的击键事件吗？还是我应该`WM_KEYPRESS`手动生成一条新消息？也许有更好的方法来处理这件事？

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-25T07:47:19.570

好的，如果有人遇到类似问题，这是我的解决方案。

首先，使用`WH_KEYBOARD_LL`hook 而不是`WH_KEYBOARD`.

其次，使用`SendInput()`API 函数将不需要的击键传递给活动窗口。

第三，低级键盘钩子的回调函数有一个指针`KBDLLHOOKSTRUCT`作为参数之一；`LLKHF_INJECTED`在其位域中使用位`flags`来区分真正的击键和您刚刚生成的击键。如果您偏执并担心其他人可能会使用相同的技巧，请同时使用`dwExtraInfo`结构的成员`SendInput()`和挂钩回调使用来区分您自己和其他人注入的击键。

第四，请注意，如果处理输入的时间过长，Windows 7 往往会默默地取消挂钩低级挂钩，因此要么保持挂钩回调尽可能简单，并确保尽可能频繁地抽取 Windows 消息队列钩住钩子的线；或者 - 如果你是一个坏孩子 - 有一个注册表项`HKCU\Control Panel\Desktop\[DWORD]LowLevelHooksTimeout`，将其设置为一个相当大的值也可能会起作用。

# c# - 在 Windows 8 上对 Facebook 执行 Get 请求

> ID：12915736
> 
> 赞同：2
> 
> 时间：2012-10-16T13:26:34.303
> 
> 标签：c#, facebook

我已经很好地下载了 Facebook SDK，但教程部分似乎有弃用的代码。

我想对用户个人资料发出获取请求以返回照片。从教程中，他们提出了这样的建议

```
var client = new FacebookClient();
dynamic me = client.Get("totten"); 
```

事情是在我的最新版本中，FacebookClient 类不存在 Get 方法。对于如何执行这个简单的请求，我终其一生都找不到明确而明确的答案。

任何帮助都会很棒。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-18T05:45:35.483

如果您还没有得到这个...您可以为 client.GetCompleted 分配一个处理程序并调用 client.GetAsync()。这是我从示例代码中得到的——

```
 private void GraphApiSample()
    {
        var fb = new FacebookClient(_accessToken);
        fb.GetCompleted += (o, e) =>
        {
            if (e.Error != null)
            {
                Dispatcher.BeginInvoke(() => MessageBox.Show(e.Error.Message));
                return;
            }
            var result = (IDictionary<string, object>)e.GetResultData();
            Dispatcher.BeginInvoke(() =>
            {
                ProfileName.Text = "Hi " + (string)result["name"];
                FirstName.Text = "First Name: " + (string)result["first_name"];
                FirstName.Text = "Last Name: " + (string)result["last_name"];
            });
        };
        fb.GetAsync("me"); 
    } 
```

# iphone - 在 iphone 中点击 3Dmodel 时从 3dmodel 获取顶点

> ID：12915745
> 
> 赞同：1
> 
> 时间：2012-10-16T13:26:51.467
> 
> 标签：iphone

我正在使用 OpenGLES 渲染 3d 模型，我想知道是否有任何东西可以让我获得 3d 模型的触摸部分的顶点。

提前致谢。

# parsing - Z3 c++，如何解析 smt-competition unsat 核心实例

> ID：12915746
> 
> 赞同：3
> 
> 时间：2012-10-16T13:26:52.087
> 
> 标签：parsing, runtime-error, z3

我正在尝试将 Z3 与 c++ api（版本 Z3 4.1.0.0）一起使用，即我正在尝试解析来自 smt-competition unsat core track 的实例。我（基于示例）编写了以下代码：

```
context c;
Z3_ast f;
f = Z3_parse_smtlib2_file(c, "smtlib_uc/QF_IDL/queens_bench/n_queen/queen3-1.smt2.uc.smt2", 0, 0, 0, 0, 0, 0);
expr r = to_expr(c, f);
solver s(c);
s.add(r);
std::cout << s << "\n"; 
```

但我收到以下错误：

*（错误“第1行第34列：错误设置'：produce-unsat-cores'，初始化后无法修改选项值”）*

*（错误“第 220 行第 15 列：未启用未饱和核心构造，使用命令（set-option :produce-unsat-cores true）”）*

*意外错误：解析器错误*

有谁知道如何克服这个错误？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T13:47:48.620

`Z3_parse_smtlib*`函数仅用于解析公式；因此，许多选项不适用于它们。

您可以简单地删除`(set-option :produce-unsat-cores true)`输入文件中的行并在初始化时设置该选项`context`。您可以使用[Z3_solver_get_unsat_core](http://research.microsoft.com/en-us/um/redmond/projects/z3/group__capi.html#gabb4f8ed6a09873f5aeefe9cc01010864)检索未饱和核心。

如果您不想修改输入文件，则应使用 Z3 二进制文件。这些选项将使用 Z3 二进制文件成功解析。

# oracle - Oracle Apex - 动态检查不在报告中的复选框项目

> ID：12915748
> 
> 赞同：1
> 
> 时间：2012-10-16T13:27:00.997
> 
> 标签：oracle, oracle-apex

我的页面上有一个复选框项目（注意：这不在报告中），我想在页面加载时动态检查复选框。我有一个表，其中包含所有复选框类型和一个表，该表标识用户可以访问或更好的术语应该检查哪些复选框。

我的问题是，在 Apex 复选框项目中，您如何告诉它动态检查复选框。我让它在报告中工作，我的查询如下所示：

```
SELECT at.name AS TITLE,
     CASE
         WHEN at.name IN (SELECT atp.name FROM preferences p) THEN apex_item.checkbox(1,at.value,'CHECKED')
         ELSE apex_item.checkbox(1,at.value, 'UNCHECKED')
      END AS CHECKBOX
FROM access_types at 
```

我可以在 oracle apex 复选框项目中做类似的事情吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-17T08:33:34.727

不确定它是否是您想要的，但如果您只需要在页面加载时初始化一个复选框项目，您可以：

1 - 使用复选框项目的***Source***属性并设置以下属性：

*   *使用的来源*：`Always, replacing any existing value in session state`
*   *源类型*：`SQL Query (return single value)`或者`SQL Query (return colon separated value)`取决于您的复选框项目是否包含多个复选框。
*   *源值或表达式*：返回正确值的查询。

2 - 使用**Before 标头计算**来计算您的项目：

*   *计算项目*：您的复选框项目
*   *计算点*：`Before header`
*   *计算类型*：`SQL Query (return single value)`或者`SQL Query (return colon separated value)`取决于您的复选框项目是否包含多个复选框。
*   计算：您的查询返回正确的值。

* * *

***注意***：我也在报告中使用复选框，但我注意到当你有很多行时，它比使用简单的 HTML 复选框要慢得多，所以如果你认为你的报告很慢，我建议你从你的生成简单的 HTML 复选框询问 ：

```
SELECT
  at.name AS TITLE,
  CASE WHEN at.name IN (SELECT atp.name FROM preferences p) THEN
    '<input type="checkbox" value="'||at.value||'" checked="checked" />'
  ELSE
    '<input type="checkbox" value="'||at.value||'" />'
  END AS CHECKBOX
FROM
  [...] 
```

# jsf - JSF 重新渲染复合组件：insertChildren 问题

> ID：12915749
> 
> 赞同：2
> 
> 时间：2012-10-16T13:27:01.790
> 
> 标签：jsf, rendering, composite-component

我正在 JSF 中制作我的第一个复合组件，但我被一个行为奇怪的重新渲染难住了。这是组件实现（它应该是一个弹出窗口）：

```
 <composite:implementation>
    <h:outputScript name="nb-popup.js" library="js"/>
    <h:outputStylesheet name="nb-popup.compiled.css" library="style"/>
    <div id="#{cc.clientId}_container" class="nb_popup_container">
        <div style="width:#{cc.attrs.width};height:#{cc.attrs.height};" id="#{cc.clientId}" class="nb_popup">
            <div id="#{cc.clientId}_header" class="nb_popup_header">
                <span class="nb_popup_header_content">
                    <composite:renderFacet name="header"/>
                </span>
                <span class="nb_popup_header_controls">
                    <composite:renderFacet name="controls"/>
                </span>
            </div>
            <div id="#{cc.clientId}_content" class="nb_popup_content">
                <composite:insertChildren/>
            </div>
        </div>
    </div>
    <script>popup('#{cc.clientId}');</script>
</composite:implementation> 
```

例如，假设我们有：

```
<nb:popup id="extract">
    test
</nb:popup> 
```

生成的 HTML 没问题：

```
 <div id="extract_container" class="nb_popup_container">
        <div style="width:auto;height:auto;" id="extract" class="nb_popup">
            <div id="extract_header" class="nb_popup_header">
                <span class="nb_popup_header_content">
                </span>
                <span class="nb_popup_header_controls">
                </span>
            </div>
            <div id="extract_content" class="nb_popup_content">
              test

            </div>
        </div>
    </div> 
```

现在假设我有一个按钮：

```
 <h:commandLink value="reload">
        <f:ajax render=":extract"/>
    </h:commandLink> 
```

按下它后，我得到以下部分响应，其中实际内容显然不是它应该在的位置：

```
 <div id="extract_container" class="nb_popup_container">
        <div style="width:auto;height:auto;" id="extract" class="nb_popup">
            <div id="extract_header" class="nb_popup_header">
                <span class="nb_popup_header_content">
                </span>
                <span class="nb_popup_header_controls">
                </span>
            </div>
            <div id="extract_content" class="nb_popup_content">
            </div>
        </div>
    </div>
    <script>popup('extract');</script>
    test
]]> 
```

现在假设我将 insertChildren 移动到标题：

```
 <div id="#{cc.clientId}_header" class="nb_popup_header">
                <span class="nb_popup_header_content">
                    <composite:renderFacet name="header"/>
                <composite:insertChildren/>
                </span>
                <span class="nb_popup_header_controls">
                    <composite:renderFacet name="controls"/>
                </span>
            </div> 
```

初始负载再次应为：

```
 <div id="extract_header" class="nb_popup_header">
                <span class="nb_popup_header_content">
         test

                </span>
                <span class="nb_popup_header_controls">
                </span>
            </div> 
```

但是在重新加载时，内容会再次移动：

```
 <div id="extract_header" class="nb_popup_header">
                <span class="nb_popup_header_content">
                </span>
                <span class="nb_popup_header_controls">
    test

                </span>
            </div> 
```

知道在 ajax 重新渲染后可能导致 insertChildren 看似随机放置的原因是什么吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-18T08:39:01.920

正如 BalusC 在评论中所建议的那样，将 cc:insertChildren 包装在 ah:panelGroup 中似乎可行。例如这有效：

```
 <div id="#{cc.clientId}_content" class="nb_popup_content">
                <h:panelGroup>
                    <composite:insertChildren/>
                </h:panelGroup>
            </div> 
```

这使我可以在复合组件中保留样式和 js（使用 target="head"），因此总体而言这是一个更好的解决方案。

* * *

由于 outputStylesheet 和 outputScript 标签，这是 Mojarra 中的一个错误。如果你添加 target="head" 你会得到实际的 IndexOutOfBoundExceptions。如果没有目标，它只会在回发时做一些奇怪的事情。

当前的解决方案是在主应用程序中包含样式表和脚本。但是，这部分否定了复合材料的可重用性。

相关未决问题：

*   [http://java.net/jira/browse/JAVASERVERFACES-1853](http://java.net/jira/browse/JAVASERVERFACES-1853)
*   [http://java.net/jira/browse/JAVASERVERFACES-2053](http://java.net/jira/browse/JAVASERVERFACES-2053)

# c# - WPF：单击鼠标右键/中键时 DoDragDrop 被中断

> ID：12915754
> 
> 赞同：3
> 
> 时间：2012-10-16T13:27:13.033
> 
> 标签：c#, wpf, drag-and-drop, devexpress, mousemove

我扩展了 Canvas {System.Windows.Controls} 和可拖入 Canvas 的项目。在拖动过程中，我有 OnDragOver 事件，当用户单击并按住鼠标中键时，我会在其中进行平移。

在**Item**站点上：`DoDragDrop`- 常见的拖动功能
在**Canvas**站点上：`OnDragOver`- 平移画布

因此用户可以同时拖动和平移。

一切正常，直到我搬到新的笔记本电脑（联想）和 Visual Studio 2012（2010 之前）。现在，当我按下鼠标中键（或右键）时，Canvas 的 OnMouseMove 事件会立即被触发。之后立即停止拖动，也不再平移。

我的同事尝试从 Visual Studio 2010 运行相同的代码，并且运行正常。他设置了他的版本，所以我尝试了它，结果是一样的 - 在我的笔记本电脑上，我在拖动时无法平移..

有人知道是什么问题吗？硬件、软件、联想、Windows？

项目信息：WPF、DevExpress 12.1、.NET 4、Windows 7 Proffesional、VS 2012

请记住，我在 WPF 中还是新手 :)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-01-18T15:20:52.997

只是为了回答我自己的问题，也许它对某人有用。

我没有发现问题出在哪里，但我的结论是，在某些 PC 上，当用户在拖动时按下鼠标中键/右键时，DragDrop 可能会中断。

要覆盖此行为，您需要将[QueryContinueDragHandler](http://msdn.microsoft.com/en-us/library/system.windows.dragdrop.addquerycontinuedraghandler%28v=vs.110%29.aspx)添加到 DragDrop。然后在您自己的处理程序中使用您的逻辑来响应鼠标/键盘输入。

所以我的代码如下所示：

```
DragDrop.AddQueryContinueDragHandler(this, QueryContinueDragHandler);
DragDrop.DoDragDrop(this, dataObject, DragDropEffects.Copy);
DragDrop.RemoveQueryContinueDragHandler(this, QueryContinueDragHandler); 
```

和自定义处理程序：

```
/// <summary>
/// Own handler. This event is raised when something happens during DragDrop operation (user presses Mouse button or Keyboard button...)
/// Necessary to avoid canceling DragDrop on MouseMiddleButon on certain PCs.
/// Overrides default handler, that interrupts DragDrop on MouseMiddleButon or MouseRightButton down.
/// </summary>
/// <param name="source"></param>
/// <param name="e"></param>
private void QueryContinueDragHandler(Object source, QueryContinueDragEventArgs e)
{
    e.Handled = true;

        // if ESC
        if (e.EscapePressed)
        {
            //  -->  cancel DragDrop
            e.Action = DragAction.Cancel;

            return;
        }

        // if LB
        if (e.KeyStates.HasFlag(DragDropKeyStates.LeftMouseButton))
        {
            //  -->  continue dragging
            e.Action = DragAction.Continue;
        }
        // if !LB (user released LeftMouseButton)
        else
        {
            // and if mouse is inside canvas
            if (_isMouseOverCanvas)
            {
                //  -->  execute Drop
                e.Action = DragAction.Drop;
            }
            else
            {
                //  -->  cancel Drop 
                e.Action = DragAction.Cancel;                    
            }

            return;
        }

        // if MB
        if (e.KeyStates.HasFlag(DragDropKeyStates.MiddleMouseButton))
        {
            //  -->  continue dragging
            e.Action = DragAction.Continue;
        }    
} 
```

# php - Symfony2：始终将变量返回给 TWIG

> ID：12915757
> 
> 赞同：0
> 
> 时间：2012-10-16T13:27:20.013
> 
> 标签：php, symfony, doctrine-orm, twig

*   我创建了一个实现 UserInterface 的用户实体。一切安好。
*   我创建了两个辅助表，管理角色和权限（每个角色都有一些权限）。

所以，我的实体是：

**用户**->有一个角色（一个角色，这个角色来自--->）

**角色**-> 只是角色的名称

**权限**-> 只是权限的名称

**RolePermission** -> 创建角色和权限之间的关系。

我需要做的是获取当前登录用户拥有的权限：如何做到这一点？首先查找用户的角色，然后查看 RolePermission 具有哪些权限。

没关系，但是一旦我拥有此权限，我需要将其发送给 TWIG。

我可以手动执行此操作，在每个`$this->render`应用程序上发送一个数组这些权限，但我认为这不是最好的解决方案（懒惰......）。

每次渲染 TWIG 模板时是否可以发送此数据（具有权限的数组）？如何？

编辑：

这个问题是关于获取与登录用户相关的信息，但不是要检查 TWIG 中的角色（is_granted）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T13:54:33.560

假设这样的数据库模式......

```
[table User] --ManyToOne--> [table Role] --OneToMany--> [table Permission] 
```

...您可以尝试以下方法：

```
{% for permission in app.user.role.permissions %}
    {{ permission.name }}
{% endfor %} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T13:32:21.323

在 Twig 中，使用该[`is_granted()`](http://symfony.com/doc/master/book/security.html#access-control-in-templates)函数检查当前用户是否具有特定角色：

```
{% if is_granted('ROLE_ADMIN') %}
    {# output stuff for an admin #}
{% endif %} 
```

* * *

如果要获取当前用户的角色，请执行以下操作：

```
{% for role in app.user.roles %}
    {# do what you want with the role #}
{% endif %} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-23T13:25:50.037

经过大量研究，并且由于我的需要，我终于返回并在每个`->render`

# wpf - 用户注销/机器关闭时的窗口关闭事件

> ID：12915763
> 
> 赞同：0
> 
> 时间：2012-10-16T13:27:29.670
> 
> 标签：wpf, events, formclosing

我有一个带有一个窗口的 WPF 应用程序。用户不能终止此应用程序，但可以关闭窗口。

我有以下代码可以防止窗口关闭

```
 private void Window_Closing(object sender, System.ComponentModel.CancelEventArgs e)
    {
        e.Cancel = true;
        this.Visibility = Visibility.Hidden;
    } 
```

一切正常。

但是，当应用程序因用户注销或机器关闭而关闭时，我需要将数据集合保存到 XML 文件中。我很好保存，但无法弄清楚要使用什么事件。根据我在`Application.SessionEnding`触发事件时所读到的内容，窗口可能无法访问？我读过的所有帖子都讨论了应用程序关闭事件，但没有一个帖子让我知道在窗口关闭之前能够访问窗口中的数据。

有没有办法确定在上述事件中窗口是如何关闭的？

# android - 使用来自 RESTful API 的 Spring Android 客户端使用图像附件

> ID：12915764
> 
> 赞同：0
> 
> 时间：2012-10-16T13:27:32.180
> 
> 标签：android, spring, rest

我一直在网上搜索，试图找到一个使用 Android 客户端从 REST API 下载文件附件的示例，该示例使用通过 Spring for Android 提供的 REST 模板。

我找不到任何有用的东西。服务器返回一个内容类型为 image/jpeg 或 image/png 的实体。返回的标头包括内容处置标头，如下所示：

内容处置：附件；文件名=示例名

我们不使用文件扩展名，因为我们在客户端协商并根据 Android 管理图像的方式处理它。我想我想弄清楚 Spring for Android 框架是否可以做到这一点，或者我是否需要构建自己的框架。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T16:36:52.287

在我开始使用 Spring 之前，我自己实现了一个 Web 图像加载器。假设您不需要 Spring 的图像或任何身份验证（您可以添加后者），我使用的类似于以下类的东西应该适合您。请注意，`SimpleBitmapCache`该类只是 LruCache 的一个包装器（在支持包中可用），并且`getBitmapSafely`是一个`BitmapFactory.decodeStream()`用于捕获和处理的包装器`OutOfMemoryError`（它递归地增加`inSampleSize`直到某个点，最终放弃）。

```
import android.graphics.Bitmap;
import android.graphics.drawable.AnimationDrawable;
import android.os.AsyncTask;
import android.util.Log;
import android.widget.ImageView;
import com.google.inject.Inject;
import com.google.inject.Singleton;

import java.io.IOException;
import java.io.InputStream;
import java.lang.ref.WeakReference;
import java.net.HttpURLConnection;
import java.net.URL;

@Singleton
public class WebImageLoader {
    private static final String TAG = WebImageLoader.class.getSimpleName();
    protected SimpleBitmapCache simpleBitmapCache;
    protected Pattern cachedImagePattern;

    @Inject
    public WebImageLoader(SimpleBitmapCache simpleBitmapCache) {
        this.simpleBitmapCache = simpleBitmapCache;
    }

    public void fetchImageForImageView(ImageView imageView, URL url,
                                       int maxWidth, int maxHeight, ImageView.ScaleType scaleType) {
        // Sanity check: Does the request make sense?
        if (imageView == null)
            Log.w(TAG, "imageView doesn't exist!", new Exception());
        if (url == null)
            Log.w(TAG, "No URL to load!", new Exception());
        if (imageView == null || url == null)
            return;

        // Set a tag so the downloader will set the image automatically, and so that only the correct picture is shown.
        imageView.setTag(url);
        // We only need to start the Downloader if the Bitmap isn't cached
        if (!isBitmapCached(url)) {
            new Downloader(imageView, url, scaleType).execute();
        } else {
            imageView.setScaleType(scaleType);
            imageView.setImageBitmap(getBitmapFromCache(url));
        }
    }

    public void clearCache() {
        simpleBitmapCache.clear();
    }

    private boolean isBitmapCached(URL url) {
        return (simpleBitmapCache != null) && (simpleBitmapCache.contains(url));
    }

    private Bitmap getBitmapFromCache(URL url) {
        return (Bitmap) simpleBitmapCache.get(url);
    }

    private void setBitmapIntoCache(Bitmap bitmap, URL url) {
        if (simpleBitmapCache != null) {
            simpleBitmapCache.put(url, bitmap);
        }
    }

    private class Downloader extends AsyncTask<Void, Void, Bitmap> {
        protected final static int DEFAULT_ATTEMPTS = 3;
        protected final static long SLEEP_TIME = 3000;
        private final static String TAG = Downloader.class.getSimpleName();
        protected WeakReference<ImageView> imageViewRef;
        protected ImageView.ScaleType finalScaleType;
        protected URL url;

        public Downloader(final ImageView imageView, URL url, ImageView.ScaleType scaleType) {
            this.imageViewRef = new WeakReference<ImageView>(imageView);
            this.url = url;
            if (scaleType == null)
                this.finalScaleType = ImageView.ScaleType.FIT_CENTER;
            else
                this.finalScaleType = scaleType;

            // Set a download animation
            imageView.setScaleType(ImageView.ScaleType.CENTER);
            imageView.setImageResource(android.R.drawable.stat_sys_download);
            AnimationDrawable animation = (AnimationDrawable)imageView.getDrawable();
            imageView.post(animation);
        }

        @Override
        protected Bitmap doInBackground(Void... params) {
            return downloadBitmap(url);
        }

        @Override
        protected void onPostExecute(Bitmap bitmap) {
            // Update the cache
            setBitmapIntoCache(bitmap, url);

            ImageView imageView = imageViewRef.get();

            if (imageView != null) {
                // Let's verify if that ImageView wasn't recycled
                if (imageView.getTag() != null && imageView.getTag().equals(url)) {
                    imageView.setScaleType(finalScaleType);
                    imageView.setImageBitmap(bitmap);
                    imageView.setTag(null); // because it WILL be recycled later
                }
            }
        }

        protected Bitmap downloadBitmap(URL url) {
            return downloadBitmap(url, DEFAULT_ATTEMPTS);
        }
        protected Bitmap downloadBitmap(URL url, int attemptsLeft) {
            Bitmap bitmap = null;
            InputStream is = null;
            HttpURLConnection connection = null;
            int responseCode = -1;
            attemptsLeft--;

            //Log.v(TAG, "Downloading "+url);
            try {
                connection = (HttpURLConnection) url.openConnection();
            } catch (IOException e) {
                Log.e(TAG, "Failed to open HttpConnection for "+url.getPath(), e);
            }

            if (connection != null) {
                try {
                    responseCode = connection.getResponseCode();
                } catch (IOException e) {
                    Log.e(TAG, "Failed to get response code for "+connection.getURL(), e);
                }

                if (200 == responseCode) {
                    try {
                        is = connection.getInputStream();
                    } catch (IOException e) {
                        Log.e(TAG, "Failed to open InputStream for "+connection.getURL(), e);
                    }

                    // Finally create the bitmap from the InputStream
                    if (is != null) {
                        try {
                            bitmap = ImageUtil.getBitmapSafely(is, 1);
                        } catch (ImageUtil.BitmapTooLargeException e) {
                            Log.e(TAG, "Giving up on decoding "+connection.getURL());
                        }
                    }
                } else if (responseCode != -1) {
                    if (responseCode == 404)
                        Log.d(TAG, "Image not found: "+url.toString());
                    else
                        Log.e(TAG, "Unexpected response code "+responseCode+" for "+connection.getURL());
                }
            }

            if (bitmap == null && responseCode == -1 && attemptsLeft > 0) {
                try {
                    Thread.sleep(SLEEP_TIME);
                } catch (InterruptedException e) {
                    Log.w(TAG, "Download interrupted: "+url.getPath(), e);
                    return bitmap;
                }
                Log.d(TAG, "Retrying download of "+url.getPath());
                return downloadBitmap(url, attemptsLeft);
            }

            return bitmap;
        }
    }
} 
```

# sql - 在 SQL Server 2005 中遇到异常时继续在临时表中插入数据（也适用于 2008）

> ID：12915765
> 
> 赞同：2
> 
> 时间：2012-10-16T13:27:34.370
> 
> 标签：sql, sql-server-2008, sql-server-2005

我有 2 张简单的桌子

```
+------|---------|----------+
+  ID  |  Value  |   Test   +
+------|---------|----------+
+  3   |   Test  |   12345  +
+  4   |  MyVal  |   56789  +
+  5   |  Another|   101010 +
+------|---------|----------+

+------|---------|----------+
+  ID  |  Value  |   Test   +
+------|---------|----------+
+  3   |   Test  |   12345  +
+  7   |  MyVal12|   56789  +
+  5   |  Another|   101010 +
+------|---------|----------+ 
```

`ID`两个表中的都是主键。

在我的存储过程中，我创建了一个像这样的临时表：

```
CREATE TABLE #tempTable(
        ID int NOT NULL PRIMARY KEY NONCLUSTERED,
        FIELD VARCHAR(255)) 
```

以及我的过程的一部分存储在`try-catch`块中：

```
BEGIN TRY
INSERT INTO #tempTable(ID, FIELD)
EXEC sp_executesql @myCustomSql, @paramList, @param1, @param2 ...
END TRY

BEGIN CATCH
      // what to put here ?
END CATCH 
```

我想向我的临时表中添加行（您将看到 ID = 3 和 5 的重复项）并且我想继续添加。最后，我希望表格具有以下内容：

```
+------|---------+
+  ID  |  FIELD  +
+------|---------+
+  3   |   Test  +
+  4   |  MyVal  +
+  5   |  Another+ 
+  7   |  MyVal12+
+------|---------+ 
```

我在这里给出了一个简化的例子，在我的数据库中我有超过十万行和很多列。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-16T14:02:01.200

要忽略（带有警告）尝试插入重复键而不是引发错误并使整个语句失败，您可以使用该[`IGNORE_DUP_KEY`](http://msdn.microsoft.com/en-us/library/ms186869.aspx)选项。

```
CREATE TABLE #tempTable
  (
     ID    INT NOT NULL PRIMARY KEY NONCLUSTERED WITH (IGNORE_DUP_KEY = ON),
     FIELD VARCHAR(255)
  ) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T13:45:52.963

你能不能只在两个表之间的@myCustomSQL 中加入一个 UNION 来过滤掉重复项？

如果不是，那么也许 GOTO 对你来说是最好的，

```
DECLARE @minID int;
SET @minID = 0;

-- Ensure your myCustomerSql only gets records with ID greater than @minID

:CarryOn

BEGIN TRY
INSERT INTO #tempTable(ID, FIELD)
EXEC sp_executesql @myCustomSql, @paramList, @param1, @param2 ...
END TRY

BEGIN CATCH
    IF ERROR_NUMBER() = 2627 -- Error code for duplicate key
    THEN
        SET @min_ID = SELECT MAX(ID) + 1 FROM #TempTable;
        GOTO CarryOn
    ELSE
        --Handle other errors somehow
END CATCH 
```

我通常不会推荐任何像那样混乱的东西，但你显然已经有了脏数据，所以我希望这是一次修复它。

# c# - 如何获取应用程序目录中复制文件的路径

> ID：12915768
> 
> 赞同：0
> 
> 时间：2012-10-16T13:27:39.207
> 
> 标签：c#, resources

我有一些文件添加到我的应用程序的资源中。这些文件的“复制到输出目录”属性设置为“始终复制”，因此这些文件将出现在*applicationDirectiry/Resources*目录中。

我想要的是访问这些文件。当然我可以使用下面的代码：

```
Environment.CurrentDirectory 
 + Path.DirectorySeparatorChar
 + "Resources\ResourceFileName.xslt"; 
```

这里的问题是，如果我想重命名文件或*\Resources*目录，我将不得不修改所有字符串。

编辑：例如，我的资源中有一个*MasterData.xslt*文件。构建后，它将放置在 _ApplicationFolder\Resources_ 目录中。该文件的路径是*ApplicationFolder\Resources\MasterData.xslt*。在我的代码中，我可以使用访问该文件的内容

```
Resources.MasterData 
```

有没有办法获取文件路径（*ApplicationFolder\Resources\MasterData.xslt*）而不是其内容？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T13:30:04.490

当您在构建期间将文件放在那里时，该位置应被视为“神奇”常量。

只需在`const string resFolder = "Resources";`某个地方使用，以便您有一个单点定义。

OT：并用于`System.IO.Path.Combine()`构造文件路径：

```
 string myPath = Path.Combine(Environment.CurrentDirectory, 
        resFolder, "ResourceFileName.xslt"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T13:36:40.623

如果 Resources 是应用程序运行时目录下的子目录，则可以这样做：

```
string fileName = 
    System.Reflection.Assembly.GetExecutingAssembly().Location +    
    Path.DirectorySeparatorChar + 
    "Resources" + 
    Path.DirectorySeparatorChar +
    "ResourceFileName.xslt"; 
```

另请注意，我两次使用 Path.DirectorySeparatorChar 而不是“\”。

# objective-c - 目标 c：将 iso 8601 日期时间转换为本地日期时间

> ID：12915771
> 
> 赞同：-1
> 
> 时间：2012-10-16T13:28:07.773
> 
> 标签：objective-c, ios, xcode

> **可能重复：**
> [是否有将 ISO8601 时间戳转换为格式化的 NSDate 的简单方法？](https://stackoverflow.com/questions/2201216/is-there-a-simple-way-of-converting-an-iso8601-timestamp-to-a-formatted-nsdate)
> [将 ISO 8601 时间戳转换为 NSDate：如何处理 UTC 时间偏移？](https://stackoverflow.com/questions/5185230/converting-an-iso-8601-timestamp-into-an-nsdate-how-does-one-deal-with-the-utc)

我正在尝试将日期时间转换为 iso 8601 格式的 int 本地时间。转换这个：

```
2012-10-15T09:46:16+02:00 
```

对此：

```
2012-10-15 11:46:16 
```

我尝试以下代码，但返回 null

```
NSDateFormatter *dateFormatter = [[NSDateFormatter alloc] init];
[dateFormatter setDateFormat:@"yyyy-MM-dd'T'HH:mm:ssZZZ"];
NSDate *dt = [dateFormatter dateFromString:@"2012-10-15T09:46:16+02:00"];
NSString *dateTime= [NSDateFormatter localizedStringFromDate:dt dateStyle:NSDateFormatterShortStyle timeStyle:NSDateFormatterShortStyle];
NSLog(@"DATE FORMAT:%@", dateTime); 
```

知道我在做什么错吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T13:48:26.443

您需要使用 ISO8601DateFormatter。这是为此而设计的课程。您使用的日期格式不仅限于 NSDateFormatter 日期格式的一种格式。ISO8601DateFormatter 已经识别并解析了日期格式，只要它是 ISO8601。[http://boredzo.org/iso8601unparser/](http://boredzo.org/iso8601unparser/)

# biztalk - 在 Biztalk 中嗅探配置的 http 标头

> ID：12915774
> 
> 赞同：1
> 
> 时间：2012-10-16T13:28:25.300
> 
> 标签：biztalk

我正在制作一个使用 HTTP 适配器和动态发送端口的 biztalk 应用程序，并且我正在尝试在编排中配置发送端口，但是在配置之后，我无法使用wireshark 在 http 标头中看到标记 AUTHORIZATION。

编排中的一些代码：

```
PrtGenericIssuer(Microsoft.XLANGs.BaseTypes.Address) = wsUri;
PrtGenericIssuer(Microsoft.XLANGs.BaseTypes.TransportType) = "HTTP";
reqIssuerGetAccounts(HTTP.UseSSO) = false;
reqIssuerGetAccounts(HTTP.AuthenticationScheme) = "Basic";
reqIssuerGetAccounts(HTTP.Username) = wsUsr;
reqIssuerGetAccounts(HTTP.Password) = wsPwd; 
```

我错过了什么？

# javascript - Javascript，Jquery - 中断 if 语句

> ID：12915776
> 
> 赞同：0
> 
> 时间：2012-10-16T13:28:27.827
> 
> 标签：javascript, jquery

我有这部分代码：

```
if(mess <= 0 || mess < -width) {
img_container.find('ul').animate({'margin-left' : mess + 'px' }, 1000);
} 
```

**当混乱**小于**-width**时，我需要它来停止工作。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-16T13:30:19.423

查看是否将宽度作为字符串获取，如果是，请使用 JS`parseInt`函数。

如果您希望停止动画语法，请参阅[http://api.jquery.com/stop/](http://api.jquery.com/stop/)

它可能是`img_container.find('ul').stop();`

这可能会有所帮助：

```
if(mess < (-1 * width)){
   img_container.find('ul').stop();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T13:32:23.740

如果乱七八糟小于宽度，您不希望它这样做吗？

您想使用 AND 而不是 OR

```
if(mess <= 0 && mess > -width) { 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-16T13:33:03.497

`mess`如果小于，您希望条件失败`-width`，这意味着您只希望它*成功*if `mess >= -width`。

由于它是一个必需的条件，就像`mess <= 0`，你需要`&&`而不是`||`。

# java - java外部类编译会影响内部类吗

> ID：12915778
> 
> 赞同：4
> 
> 时间：2012-10-16T13:28:35.677
> 
> 标签：java, class, inner-classes

我需要给 websphere 打一个补丁。我有一个主要的 java 类，它有三个内部类。我对主类的代码更改很少，但对任何内部类都没有更改。现在我的问题是我是否需要将所有内部类以及主类文件作为补丁或主类的一部分单独提供？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-16T13:32:44.550

这不是一个权威的答案，但是每次我做这样的补丁时，我都复制了所有的类（外部*和*内部类），即

```
Outer.class
Outer$1.class     // These indexes might change ...
Outer$2.class     // ... between compilation runs
Outer$Inner.class // This name should never change 
```

当我不这样做时，通常会有一些迟到的类加载副作用。在我看来，这最常发生是因为*匿名*内部类，它们并不总是重新生成相同的“匿名类索引”（如`$1`,`$2`等），具体取决于它们在`.java`文件中的顺序。

所以，可以肯定的是，因为这种修补无论如何都是一种流氓技术，所以我总是复制所有的类。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T13:33:40.450

内部类就像隐含引用外部类的普通类一样，所以我会说**如果**你真的没有改变内部类，那么只给出外部类是安全的。

# html - 网站显示正方形而不是字符？

> ID：12915782
> 
> 赞同：0
> 
> 时间：2012-10-16T13:28:46.830
> 
> 标签：html, css

在不同的页面上，我的网站使用了标准英语中没有的字符，例如“ÿ ä æ ç”，而不是那些我看到的字母是正方形和问号。

我正在使用字体 Nueva STD。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T13:30:53.183

你能举个例子吗？您使用的字体似乎没有国际字符。尝试切换到默认字体，例如 Helvetica，看看是否可以解决问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T13:33:47.927

我查了你使用的字体，它似乎有特殊字符。如果您使用的是`@font-face`我有一些实例，由于某种原因我必须重新生成文件。这通常会为我解决。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-10-16T13:46:29.603

如果您直接在页面中使用字符，您是否尝试过将它们更改为 HTML 实体？例如，不要直接输入 ÿ，而是尝试`&yuml;`.

# excel - 这个日期是否在今天的 1 年内？

> ID：12915785
> 
> 赞同：0
> 
> 时间：2012-10-16T13:28:53.133
> 
> 标签：excel

我怎样才能有一个条件格式公式来检查其单元格中的日期，然后如果日期在今天的 1 年内对其进行格式化？

我知道我可以做 =EDATE(A5,16) ，它在 A5 上增加了 16 个月，但我不知道如何在上面实现这一点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T14:35:46.667

我假设您有 Excel 2007 或更高版本，在 Excel 2003 或更早版本中，EDATE 不能用于条件格式。在任何版本中，您都可以使用 DATEDIF，例如这个公式

`=DATEDIF(TODAY(),A1,"y")=0`

如果该单元格中的日期为**>=TODAY**且**< TODAY + 1 年，则将格式化 A1**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T13:44:58.907

转到条件格式，选择自定义选项并使用此公式+选择格式。选择要使用它的范围。

```
=$H8<=EDATE(NOW();12)
*H being the column with dates* 
```

![在此处输入图像描述](../Images/f89933c51405bbdc97ba0e1a0b01a11a.png)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-16T20:41:34.630

**你不能这样做：**

**适用于您的范围：** ![条件格式示例1](../Images/787af1731573c22ee960d6791d96ecc6.png)

**使用这个公式：** ![条件格式示例2](../Images/efa3e11876aade966fcd2f0ab0044e28.png)

# javascript - 从javascript中的另一个函数调用变量

> ID：12915794
> 
> 赞同：0
> 
> 时间：2012-10-16T13:29:10.963
> 
> 标签：javascript, jquery

我有一个变量，我想在另一个函数中使用，但不知道如何正确调用它。外部 JS 文件：

```
<script>
function search ()
{
var subscriptionId = "";

if (document.getElementById('deleteyes').checked)
 {
  alert(subscriptionId);
 }
}
<script> 
```

HTML 文件：

```
<script>
$(document).ready(function() { 
    $.getJSON(ravenUrl + '/indexes/dynamic/Subscriptions?query=Email%253A' + email, function(json) {
        subscriptions = json.Results;
        var html = '';
        for (var i in json.Results) {
            html += '<option value="' + i + '">Edit "' + json.Results[i].Name + '"</option>';
        }
        $('#subscriptionSelector').append(html);
    });

    $("#subscriptionSelector").change(function() { //alert('#forumSelector');
    var subscriptionIndex = $(this).val();
    var subscriptionId = subscriptions[subscriptionIndex]["@metadata"]["@id"].substring(7);
    alert(subscriptionId);
    });
}
</script>

    <body>
<script type="text/javascript" src="externaljsfile.js"></script>
                                                        <p>create / edit subscription</p>
                                                            <select id="subscriptionSelector"><option selected="true" value="-1">Create new</option></select>
                                                <p>delete subscription</p>
     <div style="margin-left:35px;margin-top:6px;float:left;"><input type="radio" name="delete" id="deleteno" class="div1" checked />no</div>
    <div style="margin-left:35px;margin-top:6px;float:left;"><input type="radio" name="delete" id="deleteyes" class="div1"/>yes</div>

        </body> 
```

在 html 文件中的 javascript 中正确生成了警报（订阅 ID），但外部 js 文件中的警报显然没有生成正确的订阅 ID。

我意识到这可能是一个非常简单的问题，但我的技能水平甚至无法执行搜索以找到与 javascript 相关的问题的答案，所以请耐心等待。先感谢您。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T13:32:47.957

将变量声明放在函数之外`var subscriptionId = "";`（全局变量）

然后您可以从任何其他功能访问它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T13:31:56.877

最简单的解决方案是`subscriptionId`在全局范围内声明。

这意味着“在”之外`search()`：

```
var subscriptionId = "";

function search ()
{

if (document.getElementById('deleteyes').checked)
 {
  alert(subscriptionId);
 }
}
subscriptionId = "what?";
search(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-16T13:46:32.697

这里的问题是范围之一，您（正确地）`subsriptionId`在函数范围中声明。但是，一旦该函数返回，该变量就会被 GC（*垃圾收集*）。

正如@GungFoo 所说，起初，您可能会认为全局声明变量（因此永远不会有 var GC'ed）会解决问题，而且一开始会。但是很快你就会污染全局范围，以至于你会遇到问题。例如，您可能会无意中更改另一个函数所依赖的变量的值。只需在谷歌上搜索几篇关于此问题的文章，您很快就会发现为什么这不是一个好主意。

几种选择：

假设*“其他功能”*是在全局范围内定义的，您可以为其分配一个属性：

```
function()
{//this declares and assigns subscriptionId
    var subscriptionId = subscriptions[subscriptionIndex]["@metadata"]["@id"].substring(7);
    theOtherFunction.subscId = subscriptionId;//assign property
    alert(subscriptionId);
}
//the other one
function theOtherFunction()
{
    alert(theOtherFunction.subscId);//will alert the correct value
} 
```

更简单的是，只需使用 jQuery：

```
function theOtherFunction()
{
    var id = subscriptions[$("#subscriptionSelector").val()]["@metadata"]["@id"].substring(7);
    alert(id);//will work, too
} 
```

后者的缺点是每次调用都会扫描 DOM，以找到特定的元素 ( `$("#subscriptionSelector")`)。要解决这个问题，您可以使用闭包：

```
var theOtherFunction = (function(selector)//takes DOM element as argument
{
    return function()//this is the actual function
    {//thanks to closures, selector will not be GC'ed
        var id = subscriptions[selector.val()]["@metadata"]["@id"].substring(7);
        alert(id);//works like a charm
    };
})($("#subscriptionSelector"))//pass DOM element as argument 
```

最后一种方法起初可能看起来有点令人生畏，但花一些时间阅读 IIFE、闭包和范围魔法。它是 JS 最好的特性之一，非常强大，掌握了基本概念也不会那么难！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-16T13:33:53.273

**最好**的解决方案是将`subscriptionID`over 传递给`search`函数。如果这是不可能的，您将不得不将其推入更高的范围（例如全局范围）。

要使其全球可用，请更改此：

```
var subscriptionId = subscriptions[subscriptionIndex]["@metadata"]["@id"].substring(7); 
```

对此：

```
window.subscriptionId = subscriptions[subscriptionIndex]["@metadata"]["@id"].substring(7); 
```

然后它也将在外部 javascript 中可用。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-16T13:33:56.003

subscriptionId 仅在函数范围内可用

在 html 文件中移动`var subscriptionId = "";`前面的 $(document)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-16T13:33:58.420

代替

```
<script>
function search ()
{
var subscriptionId = ""; 
```

和：

```
<script>
var subscriptionId = "";
function search ()
{ 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-10-16T13:35:12.257

做 ：

```
$("#subscriptionSelector").on('change', function() { //alert('#forumSelector');
    var subscriptionIndex = this.value;
    var subscriptionId = subscriptions[subscriptionIndex]["@metadata"]["@id"].substring(7);
    $(this).data('checked', subscriptionId); //store as data
    alert(subscriptionId);
}); 
```

接着 ：

```
function search () {
    var subscriptionId = $("#subscriptionSelector").data('checked');
    if ($('#deleteyes').prop('checked')) {
        alert(subscriptionId);
    }
} 
```

这样，数据将存储在元素上。

更多关于`data()`jQuery 的信息：http: [//api.jquery.com/jQuery.data/](http://api.jquery.com/jQuery.data/)

# syntax-highlighting - gVim：删除语法高亮组

> ID：12915797
> 
> 赞同：7
> 
> 时间：2012-10-16T13:29:12.500
> 
> 标签：syntax-highlighting, vim, color-scheme, vim-syntax-highlighting

[*原标题是 «特定于语言的颜色方案防止简单的颜色方案为某些特定于语言的标签着色*»]

我正在使用 gVim 7.3 [（在~~Ubuntu 12.04~~ Arch x86/64 上，就此而言）]。

## 更新（2013-03-02）：

我想我终于可以准确地表达我的意思了（我仍然找不到正确的命令，假设它甚至存在！）。基本上这是流程：

1.  使用定义了几个基本组（如语句、注释、函数）的*小尺寸*颜色方案开始会话；
2.  切换到“更大”的配色方案（如 Solarized 或 Jellybeans），它定义了更具体的组（如 vimCommand、hsImport 或 ruby​​BeginEnd）。这些更具体的组覆盖了基本组；
3.  切换回“较小”的配色方案（未定义特定组的配色方案）。

结果是会议上充斥着“无家可归”的群体，这些群体掩盖了基本的群体，并阻止了一些词被突出显示。这些无家可归的群体如下所示：

**输入** `:hi vimCommand``Enter`
**输出** `vimCommand xxx cleared`

*顺便说一句，在 Solarized 的 github 问题跟踪器中体验和发布了类似的东西 → [Vim 色彩方案在切换时留下了破坏的痕迹](https://github.com/altercation/solarized/issues/102)*

* * *

## 更新（2012-11-25）：

一个好的解决方案可能是清除当前会话的“突出显示”变量（我不是在谈论像`smartindent`, `encoding`,之类的`number`变量，而是谈论像`Statement`, `Comment` `rubyClass`,`xmlTag`之类的变量，即由 , 等命令定义的`hi link ...`变量`highlight ...`）。
如果有人能解释它是如何存储在内存中的，它可能会帮助我弄清楚如何清理它（我尝试过保存会话`:mksession mysession.vim`然后查看它，但没有任何语法高亮变量的痕迹）。

此外，这只是一个模糊的假设，似乎`:hi clear`不清理*突出显示组*的原因是“剩余”是通过间接定义（例如`hi link`）定义的。

* * *

## 原来的：

当我的默认颜色方案（[blueshift 的修改版本](https://gist.github.com/3899006)）被加载时，每个应该突出显示的标签都被正确着色。
![在此处输入图像描述](../Images/cf920248b16f8118816990893c75f2a2.png)

在会话期间，我切换到[jellybeans](http://www.vim.org/scripts/script.php?script_id=2555)颜色方案 ( `:colo jellybeans`)，它比我的默认颜色方案有更多选项：
![果冻豆.vim](../Images/cb9bb0052d108f8ee5a9272f9f6899e1.png)

如果我再次切换到默认颜色方案 ( `:colo blueshifted`)，则会禁用某些突出显示：
![在此处输入图像描述](../Images/beb18e52aac1928cf8682267bdb0292d.png)

似乎在会话开始时，如果我使用未指定某些特定语言标签行为的配色方案，则这些标签将使用某些现有颜色*自动着色。*

我知道*jellybeans*的特定语言标签保留在“缓存”中，并且负责禁用自动着色功能，因为如果我在没有特定语言标签的颜色方案之间切换（从未使用过*jellybeans*），自动着色没有被破坏。

其他颜色方案也是如此（例如 railscasts.vim 使用 HTML 特定的颜色）。*我知道我可以通过在不太具体*的配色方案中添加缺少的标签来解决这个问题，但我正在寻找一个更通用的解决方案。

**问题**

*   当在更详细的配色方案之后加载不太详细的配色方案时，我该怎么做才能避免这些自动设置颜色（在加载第一个配色方案时使用）被禁用？

*   我可以在更改配色方案时清理会话缓存（即从“会话缓存”中删除 jellybeans.vim 使用的特定标签）吗？

**我的尝试** 这些是我在各种组合中使用的命令，但无济于事：

```
:syntax off
:syntax clear
:hi clear
:syntax reset 
```

唯一有效的（显然！）是手动重新定义`hi link`“简单”颜色方案中缺少的命令。但是，当然这与使用其他颜色方案（如 Solarized）改变颜色并没有什么不同。当然，这不是“如何删除突出显示组剩余部分？”问题的解决方案。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-05-18T23:29:58.893

我可能有点晚了:-)但我相信我解决了这个问题。以下是我在 GitHub[上的 Solarized 问题跟踪器上发表的帖子的引述。](https://github.com/altercation/solarized/issues/102#issuecomment-18109651)

* * *

大家好，

很抱歉在上次发表评论一年后在这里闯入并建议关闭我未参与的项目的问题（尽管我是一个快乐的用户:-) 但是我相信：1.这是由一个错误引起的Vim 和 2。我找到了一个相当优雅的解决方法。所以我想这个问题可以关闭吗？

几年前，我为 Vim 编写了一个配色方案切换器插件，但从未发布过。创建插件后不久，我注意到这个问题中描述的行为并对此感到恼火，确信这是 Vim 中的一个错误。我什至尝试修复 Vim C 代码中的问题，但这对我来说有点太多了:-]。那时我从未听说过 Solarized。我遇到了其他几个配色方案（包括我自己的）的问题。

今天我决定发布配色方案切换器插件（请参阅[xolox/vim-colorscheme-switcher](http://github.com/xolox/vim-colorscheme-switcher)），在发布插件之前，我决定再次尝试解决此处描述的问题。我尝试了各种令人讨厌的黑客攻击，但最终得到了一个相当优雅的解决方法，看起来并不太脆弱。自述文件/主页包含[对其工作原理的解释](http://peterodding.com/code/vim/colorscheme-switcher/#known_problems)（为方便起见，我在下面引用它）。

* * *

Vim 配色方案的编写方式与在大量配色方案之间快速切换的想法并不兼容。在我看来，这是 Vim 内部工作方式的一个丑陋的实现细节，换句话说，我认为这是一个应该修复的错误……以下是一些详细解释问题的参考资料：

*   [Vim 配色方案在切换时留下了破坏的痕迹](https://github.com/altercation/solarized/issues/102)
*   [gVim：删除语法高亮组](https://stackoverflow.com/questions/12915797/gvim-remove-syntax-highlighting-groups)

由于这种行为会阻碍循环使用配色方案，因此配色方案切换器插件包含一个可以隐藏问题的解决方法：

1.  启动时会创建一个字典，用于记住突出显示组之间的链接。
2.  在加载配色方案之前和之后，配色方案切换器插件会运行不带任何参数的[:highlight命令来查找突出显示组之间的链接。](http://vimdoc.sourceforge.net/htmldoc/syntax.html#:highlight)找到的每个链接都会添加到字典中。现有条目已更新。这是通过调用来完成的`xolox#colorscheme_switcher#find_links()`。
3.  加载配色方案后，配色方案切换器插件运行不带任何参数的[:highlight](http://vimdoc.sourceforge.net/htmldoc/syntax.html#:highlight)命令以查找处于“已清除”状态的突出显示组。对于这些组中的每一个，如果它们先前已链接，则链接将恢复。这是通过调用来完成的`xolox#colorscheme_switcher#restore_links()`。

可能这个解决方案仍然不完美，但它比开箱即用的行为要好得多：在我实施上述步骤之前，当我循环浏览我的配色方案时，Vim 最终会以白色背景上的黑色文本结束，并且没有其他的！通过上述步骤，我可以根据需要循环多次，并且到目前为止我检查过的所有配色方案看起来都很好。

* * *

我希望得到有关配色方案切换器（所使用的技术）的反馈；我希望它对你和我一样有效。我在 Linux (GTK) 上的 Vim 7.3 和 MacVim 7.3 中对其进行了测试。

# mongodb - 使用内部字段比较与 $where 进行查询

> ID：12915798
> 
> 赞同：0
> 
> 时间：2012-10-16T13:29:12.990
> 
> 标签：mongodb

我有一个名为`people`.

我知道我可以这样做：

```
db.people.find( { $where: "this.lastname == this.firstname" } ); 
```

但我怎么能做这样的事情：

```
db.people.find( { $where: "this.lastname == Acquaintances.lastname" } ); 
```

人工翻译：所有至少有一个熟人同名的人。

Acquaintances 是一组子文档。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T14:52:52.813

mongodb`$where`命令类似于`map reduce`，它在提取的数据上处理 javascript 表达式。它只适用于运行缓慢的后台作业。在任何正常情况下都不要使用它。

```
function () {
    var arr = [];
    for (i in this.Acquaintances) {
        arr.push(this.Acquaintances[i].lastname);
    }
    return arr.indexOf(this.lastname) > -1;
}

db.people.find(f) 
```

检查此[链接](http://www.mongodb.org/display/DOCS/Server-side+Code+Execution#Server-sideCodeExecution-%7B%7B%24where%7D%7DClausesandFunctionsinQueries)以获取更多信息`$where`

# iphone - 如何显示可以在 iOS 中打开 PDF 的外部应用程序列表？

> ID：12915799
> 
> 赞同：1
> 
> 时间：2012-10-16T13:29:18.157
> 
> 标签：iphone, ios, ipad, pdf

我正在开发一个下载或查看 PDF 的 iPhone 应用程序。

在此应用程序中，我想显示可以查看 PDF 的可能外部应用程序列表（iBooks、Adobe Reader 等）。单击应用程序中的按钮时，如何确定这些应用程序并显示这样的列表？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T08:55:54.910

您可以通过两种不同的情况来实现这一点，因为这取决于您的要求。在这里，我已经包括了这两个案例，这将与魅力一起工作：

**案例1：下载PDF，在本地写入并设置路径。**

```
NSData *pdfData = [[NSData alloc] initWithContentsOfURL:[NSURL URLWithString:@"PDFurlString"]];

//Store the Data locally as PDF File

NSString *resourceDocPath = [[NSString alloc] initWithString:[[[[NSBundle mainBundle]  resourcePath] stringByDeletingLastPathComponent] stringByAppendingPathComponent:@"Documents"]];

NSString *filePath = [resourceDocPath stringByAppendingPathComponent:@"myPDF.pdf"];

[pdfData writeToFile:filePath atomically:YES];

//Now create Request for the file that was saved in your documents folder

NSURL *url = [NSURL fileURLWithPath:filePath];

NSURLRequest *requestObj = [NSURLRequest requestWithURL:url];

[webView setUserInteractionEnabled:YES];

[webView setDelegate:self];

[webView loadRequest:requestObj]; 
```

**案例 2：使用 NSData 直接在 WebView 中查看 PDF。**

```
[webview loadData:fileData MIMEType:@"application/pdf" textEncodingName:@"utf-8" baseURL:nil]; 
```

**现在，最后，如果您想在其他应用程序中打开 PDF，**

**第 1 步：** 使用第一种情况，只需获取 url。

**第 2 步：** 您可以在此处找到这些[url 方案](http://wiki.akosma.com/IPhone_URL_Schemes)的最大数据库。现在，如何使用？我们只需要 UIApplication。首先，我们需要检查 iOS 是否可以打开特定的 url。

```
[[UIApplication sharedApplication] canOpenURL:[NSURL urlWithString:@"fb://profile"]]; 
```

**第 3 步：**如果此方法返回 yes，则用户已安装 facebook 应用程序。要打开以下应用程序，您需要调用：

```
[[UIApplication sharedApplication] openURL:[NSURL urlWithString:@"fb://profile"]]; 
```

这将在 facebook 应用程序上打开您的 facebook 个人资料。

唉，不可能在 iOS 上禁用任何其他应用程序，因为每个第三方软件都被沙盒化了。

希望这对您有所帮助。

# tfs - 文件夹转换为分支？

> ID：12915808
> 
> 赞同：24
> 
> 时间：2012-10-16T13:30:17.767
> 
> 标签：tfs, branch, branching-and-merging

在 TFS（我们使用的是 2012）中，为什么默认将源文件夹转换为分支？ ![选项](../Images/4bfcf4beb07dbe0dc47ba541c6a2f6c6.png)

我真的不认为源是一个分支。这有什么优点/缺点（如果有的话）？

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2015-04-09T13:57:29.443

只是澄清詹姆斯里德的回答中的一些术语。

**回复：“我不认为来源是一个分支”**

在生物树中，*Trunk*不称为*Branch*。

在计算机术语中，a 的两边`branching relationship`都称为`Branches`。只有可视化选择将原始*分支*显示为*树干*，就像在生物树上一样。（因为可视化工具是由我们人类编写的，并且是为我们人类编写的，他们更愿意*将*[第 1 原版]`source branch`视为生物树的树干，并将其视为*树干*`target branch`的*分支**。*）

 *在 TFS 2008 术语中， a`Branch`是 a`Folder`与`branching relationship`另一个`Folder`. 在内部，它们都是`folder objects`.

在 TFS（自 2010 年以来）术语中，a`Branch`是一个`branch object`[非常类似于] a 的内部，`folder object`具有许多额外的元数据（和不同的图标）。

**回复：为什么默认将源文件夹转换为分支？**

在几乎所有正常情况下，当您想要**分支 Trunk**时，您希望源`Folder`[object] 转换为`Branch`[object]，以便您拥有所有额外的元数据，这允许额外的 Visualizations 和 Manipulations 不可用仅仅是`Folder`[对象]。

一个限制是一个`Branch`[object] 不能包含另一个`Branch`[object]，但一个`Branch`[object] 可以包含一个`Folder`[object]。所以有时，在一个复杂的项目中，你可能需要将一个`Branch`[object] 转换回一个`Folder`[object]，这样你就可以把它放在一个更高的`Branch`[object] 中。

为此，请使用菜单命令**File / Source Control / Branching and Merging / Convert to Folder**。（：它不在右键单击上下文菜单上，因为它很少需要。:)

如果在管理整个项目时，您发现需要/想要将 a 转换`Folder`为 a `Branch`（尚未`branching relationship`使用普通`Branch`命令创建 a），请使用菜单命令**File / Source Control / Branching and Merging / Convert to Branch**。

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2012-10-16T14:31:08.027

我不确定您所说的“我不认为源是分支”是什么意思，根据定义，只要您从中创建一个分支，源文件夹就会成为一个分支。目标文件夹也是一个分支，它是源分支的子分支。

启用此功能没有任何缺点。无论您是否启用此功能，源和目标都将具有分支关系，您将能够合并两个分支之间的更改。

如果您启用了此框，并且能够在源和目标之间合并，您还可以使用 Visual Studio 中的分支可视化工具。当您想了解代码如何在分支和合并关系之间流动时，这些工具很有用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-02-12T16:24:35.083

扩展詹姆斯·里德的答案。根据[此处](https://docs.microsoft.com/en-us/azure/devops/repos/tfvc/branch-folders-files?view=tfs-2017#see-also)关于 TFS 的 Microsoft 文档：

与“文件夹”相比，“分支”有两个主要优势：

1.  能够查看您的分支层次结构

2.  能够跟踪您的变更集

> 分支文件夹或文件
> 
> > 虽然您可以直接分支文件夹或文件，但我们建议您避免使用它。否则，您将无法查看您的分支层次结构或跟踪您的变更集。*

# eclipse-plugin - 如何创建 ILaunchConfiguration 或 ILaunch 的新实例？

> ID：12915810
> 
> 赞同：1
> 
> 时间：2012-10-16T13:30:31.010
> 
> 标签：eclipse-plugin

目前我的插件可以通过创建相应的启动配置然后按“运行”来启动。现在我想扩展插件，以便可以右键单击文件并在所选文件上运行插件。相应地扩展菜单已经有效。

但是，现在我需要一个 ILaunchConfiguration 实例（或至少一个 ILaunch 实例）来输入我现有的设置。然后从 ILaunch 对象中获取进程并开始通信。

如何根据已知的默认设置和特定的输入文件创建新的 ILaunchConfiguration？我没有看到任何可以使用的公共构造函数。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T13:38:09.883

以下是获取方法`ILaunchConfiguration`：

```
ILaunchManager mgr = DebugPlugin.getDefault().getLaunchManager();
ILaunchConfigurationType lct = mgr.getLaunchConfigurationType(IOpcodeConstants.LAUNCH_CFG_TYPE);
ILaunchConfiguration[] lcs = mgr.getLaunchConfigurations(lct); 
```

# c# - C# 中的 MySqlDataReader 没有行

> ID：12915811
> 
> 赞同：1
> 
> 时间：2012-10-16T13:30:32.713
> 
> 标签：c#, mysql, mysqldatareader

我正在尝试使用 mysql 数据库在 C#（我的第一个 C# 应用程序）中开发一个小的用户用户消息系统。

我知道最佳实践是使用 EF 之类的东西来处理数据库，但我以“愚蠢”的方式编写此代码只是为了熟悉语法。

我来自 vb 背景，所以我基本上只是在转换我通常在 vb 中所做的事情，这就是为什么我不明白为什么，尽管我的数据库中有匹配的行，但 DataReader 仍然没有行返回。见下文：

```
 protected void btnLogin_Click(object sender, EventArgs e)
    {
        Page.Validate("Login");

        if (!IsValid)
        {
            return;
        }

        if (checkLogin())
        {
            Response.Redirect("Default.aspx");
        }
        else
        {
            lblErr.Text = "Invalid login attempt";
        }
    }

    protected Boolean checkLogin()
    {
        MySql db = new MySql();

        string sql = "select userid, firstname, lastname, ifnull(lastlogin, '') from users where email = @email and pass = @pass";

        List<MySqlParameter> args = new List<MySqlParameter>();
        args.Add(new MySqlParameter() { ParameterName = "@email", MySqlDbType = MySqlDbType.VarChar, Size = 100, Value = txtEmail.Text });
        args.Add(new MySqlParameter() { ParameterName = "@pass", MySqlDbType = MySqlDbType.VarChar, Size = 20, Value = txtPass.Text });

        MySqlDataReader dr = db.getReader(sql, args);

        if (dr.HasRows)
        {
            dr.Read();

            Session["userid"] = dr.GetInt32("userid");
            Session["firstname"] = dr.GetString("firstname");
            Session["lastname"] = dr.GetString("lastname");
            Session["lastlogin"] = dr.GetDateTime("lastlogin");

            dr.Close();

            return true;
        }
        else
        {
            return false;
        }
    } 
```

上面的代码根据数据库检查用户输入，如果表中有任何行与用户输入匹配，则返回一行...

这是与数据库交互的代码...

```
public class MySql
{
    static string connStr = "data source=localhost; initial catalog=mail; user id=root; password=Ly@12157114;";
    MySqlConnection conn = new MySqlConnection(connStr);

    public MySqlDataReader getReader(string sql, List<MySqlParameter> args)
    {
        if (args.Count == 0)
        {
            return getReader(sql);
        }
        else
        {
            return getReader(sql, args.ToArray());
        }
    }
    public MySqlDataReader getReader(string sql, MySqlParameter[] args = null)
    {
        MySqlCommand cmd = new MySqlCommand(sql, conn);

        if (args != null)
        {
            cmd.Parameters.AddRange(args);
        }

        conn.Open();

        MySqlDataReader dr = cmd.ExecuteReader();

        conn.Close();

        return dr;
    }
} 
```

我没有收到任何错误或任何迹象表明这里出了问题，并且我很肯定有数据与我在登录字段中的输入相匹配。

谁能帮我理解为什么 DataReader 总是空着回来？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-16T13:43:34.087

使用数据阅读器时必须打开它的连接。DataReader 在您创建它时不会检索任何数据，它会在您使用它时检索数据。在您关闭连接之前，它无法检索您的所有数据库。

# c# - 在创建时将属性分配给控件？

> ID：12915814
> 
> 赞同：-1
> 
> 时间：2012-10-16T13:30:44.557
> 
> 标签：c#, asp.net, controls

只是想知道是否可以不拆分以下步骤......

```
Button b = new Button()
{
    // You can access Attributes here, but only get, not set.
    ID = "btnExample",
    Text = "Click Me"
};

b.Attributes.Add("onclick", "alert('hello, world')"); 
```

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T13:47:52.290

您可以从 Button 驱动并将其添加到构造函数中：

```
class MyButton: Button
{
    MyButton(MyAttributes atr)
    {
       for each (elm in atr)
       {
          base.Attributes.Add(elm.Key, elm.Value);
       }
    }
} 
```

# hibernate - HQL查询在IN子句中有一组列

> ID：12915815
> 
> 赞同：0
> 
> 时间：2012-10-16T13:30:45.470
> 
> 标签：hibernate

我需要将下面的 SQL 查询转换为 HQL 查询。

> select * from table where (column1, column2 , column3) in (('A','B','C'),('D','E','F'));

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T10:07:16.527

如果 IN 子句包含 ID，则下面提到的代码工作得非常好，但如果我必须为非键列或部分键列设置 IN 子句，它将不起作用。

```
List ids = new ArrayList<SomeEntityId>(2);
ids.add( new SomeEntityId(1,12) );
ids.add( new SomeEntityId(10,23) );
ids.add( new SomeEntityId(10,22) );
Query query=s.createQuery( "from SomeEntity e where e.id in (:idList)" );
query.setParameterList( "idList", ids );
List list=query.list(); 
```

但是，如果我将 HQL 创建为“来自 SomeEntity e where (column1, column2)in (:idList)”，它就不起作用。

# jsf - JSF 2.1 web-app runs on Tomcat 6 but fails on Tomcat 7

> ID：12915819
> 
> 赞同：0
> 
> 时间：2012-10-16T13:30:53.380
> 
> 标签：jsf, primefaces, tomcat6, tomcat7

I have a JSF 2.1 web-application that uses Primefaces 3.1.1\. The integration-tests run fine on Tomcat 6, but on an identically configured Tomcat 7 I get the following error:

```
[INFO] [talledLocalContainer] 16.10.2012 15:25:13 com.sun.faces.context.PartialViewContextImpl$PhaseAwareVisitCallback visit
[INFO] [talledLocalContainer] SEVERE: java.lang.NullPointerException 
```

No further stacktrace or anything that could hint at the problem (all logging levels set to `ALL`). I can load the application in the browser, but it does not respond to any input.

I am using Primefaces 3.1.1 and Mojorra 2.1.13\. Is this a known issue? What has changed from Tomcat 6 to 7 that could have this effect?

P.S.: I have also tried JBOSS AS 7 with the built-in JSF, which also runs fine.

After some digging around I found that I seem to have stumbled upon [this issue](https://stackoverflow.com/questions/10814557/tomcat-resource-annotations-api-annotation-stops-working-in-tomcat-7). Does anyone have resolution for that?

# uml - Generate test cases (use case scenarios) from use case

> ID：12915824
> 
> 赞同：1
> 
> 时间：2012-10-16T13:31:00.120
> 
> 标签：uml, use-case, tool-uml

Is there any tool which can automatically extract all possible scenarios from an use case UML diagram?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T22:52:19.653

不，我不这么认为。问题是用例图在 UML 中几乎完全没有内容。它实际上只是如何阅读用例主体规范并记录它们之间的关系的指南。测试用例生成器需要读取用例主体，但是 UML 没有为它们定义标准形式或语义，因此测试用例生成器没有什么可以使用的。

# json - 访问 Moodle 网络服务

> ID：12915825
> 
> 赞同：1
> 
> 时间：2012-10-16T13:31:04.557
> 
> 标签：json, web-services, moodle

我正在尝试通过 json Web 服务协议与 moodle2 实例通信。无论我尝试了多长时间，我都无法让它工作。我生成了一个 API 密钥，用于在浏览器中调用以下 url：

```
http://<moodle base url>/webservice/rest/server.php?wsfunction=get_course_contents&wstoken=<api key>&courseid=916 
```

由于似乎没有用于访问 API 的开发人员文档，因此我阅读了源代码并找到了`coursed`该函数所需的参数。

在我的浏览器中调用此 URL 会导致一个白色窗口 - 服务器只返回任何内容，但接受我的 url（没有 404 或类似的东西）。服务器部分必须启动并运行，因为官方 Moodle 应用程序可以以某种方式与实例通信。

我究竟做错了什么？是否有列出所有功能及其参数的开发人员文档？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T14:09:57.003

我的问题是我们的组织不允许我查看管理后端。它包括所有功能和服务的完整文档。

遗憾的是，互联网上的任何地方都没有提到该文档（尤其是在 noodle wiki / 站点上）。

# jquery - 带有响应滑块的事件回调

> ID：12915830
> 
> 赞同：1
> 
> 时间：2012-10-16T13:31:11.357
> 
> 标签：jquery, slider

你好 Stackoverflowers，

我真的很难弄清楚这一点。

我的问题：要创建带有一些回调函数的 jquery 幻灯片（我首先尝试使用 woothemes flexslider，然后使用 ResponsiveSlides），以便在幻灯片更改时，我的背景颜色淡入另一种背景颜色（如 Wordpress 自定义字段中指定的那样，但那是没什么大不了）

我一开始是用 Flexslider 做的，但由于某种原因，如果我不添加任何 bkgnd 动画，我的东西就可以工作

```
before: function(slider) {
  animate = 'bg'+slider.animatingTo;
  $('body').addClass(animate);
  current = 'bg'+slider.currentSlide;
  $('body').removeClass(current);
} 
```

如果我出于某种原因添加了一个像 addClass(animate, 1000) 这样的动画，那么淡入淡出效果很好，并且不能向后工作（我想当你向后退时它无法理解它的动画位置）

所以我尝试在 responsiveslides 中执行此操作，但由于没有 API，我只是尝试用一些代码填充 before: 函数以实现我需要的功能。

任何建议将不胜感激！

# php - 无法将记录从一个表更新到另一个表

> ID：12915835
> 
> 赞同：1
> 
> 时间：2012-10-16T13:31:23.710
> 
> 标签：php, mysql

嗨，我有一个邮政编码数据库，其中包含邮政编码以及经纬度详细信息，在另一个表中，我有一个带有邮政编码的公司列表，并希望将经纬度详细信息添加到匹配的邮政编码中，而不是使用连接查询等。下面是我正在使用的代码，我以前使用过类似的东西，但我无法弄清楚为什么这不起作用。

```
$host    = "localhost";
$username = "";
$password = "";
$database = "";
mysql_connect( $host, $username, $password );
mysql_select_db( $database ) or die( "Unable to select database" );

$query = "SELECT * FROM postcodes";      
$result = mysql_query($query) or die(mysql_error());
while($row = mysql_fetch_array($result)){   

$postcode = $row['postcode'];   
$lat = $row['lat']; 
$lon = $row['lon']; 

$result = mysql_query("UPDATE companies SET lat ='$lat' and lng ='$lon'  
WHERE postal_code = '$postcode'") 
or die(mysql_error());  

} 
```

我得到的错误是：警告：mysql_fetch_array()：提供的参数不是第 15 行 /home/visitrac/public_html/postcode.php 中的有效 MySQL 结果资源

如果我移动封闭括号，使其在更新之前，则错误消失但没有信息进入数据库，我认为这是因为它不在循环中。我已经尝试了各种各样的事情，但似乎没有任何效果，因此任何朝着正确方向的推动都会受到赞赏。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T13:35:06.423

试试这个：

```
"UPDATE companies SET lat ='"+$lat+"' and lng ='"+$lon+"'   
 WHERE postal_code = '"+$postcode+"'" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T13:35:44.540

确实不需要循环遍历邮政编码结果。您可以在一条 SQL 语句中更新所有公司。

```
UPDATE companies c
    INNER JOIN postcodes p
        ON c.postal_code = p.postcode
    SET c.lat = p.lat,
        c.lng = p.lon 
```

# php - PDO 加入不显示任何内容

> ID：12915840
> 
> 赞同：0
> 
> 时间：2012-10-16T13:31:38.830
> 
> 标签：php, pdo

PDO 没有显示任何数据，有人可以帮助我：

```
$ClanData_users = sql::db()->prepare('SELECT * FROM clan_game INNER JOIN clan_page ON clan_game.clan_home = clan_page.id ORDER BY clan_game.date ASC');
$ClanData_users->execute();
$q = ($ClanData_users);

$content .= '<table class="forum"><tbody><tr class="bericht-content"><td> Kalender</td></tr>';
while($r = $q->fetch()){
    $content .= '<tr><td><span class="beschrijving"><p> '.$r['clan_game.clan_home'].' '.$r['clan_challenger'].' '.ucfirst(strftime("%A %H <b>%B</b> %Y | %R", strtotime($r['date']))).'  </p></span></td></tr> ';
}
$content .= '</tbody></table>'; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T13:36:34.677

`SELECT *`在查询中通常不是一个好主意`JOIN`。相反，请具体说明您需要的列，并在名称重叠时为它们分配别名。获取后无法通过表名访问它们`$r['table_name.column_name']`。关联列只能`$r['column_name']`通过列名或别名使用，因此所有列名/别名必须是唯一的。

```
$ClanData_users = sql::db()->prepare('
  SELECT 
    /* If both tables have the same column name, use an alias */
    clan_game.id AS clan_game_id,
    clan_home.id AS clan_home_id,
    clan_game.clan_home AS clan_home,
    clan_challenger,
    /* etc... Be specific and alias as necessary */
  FROM clan_game 
    INNER JOIN clan_page ON clan_game.clan_home = clan_page.id
  ORDER BY clan_game.date ASC'); 
```

提取时，仅使用列名或别名

```
// Why reference $ClanData_users as $q here? That's confusing. Just fetch from $ClanData_users
while($r = $ClanData_users->fetch(PDO::FETCH_ASSOC)){
    $content .= '<tr><td><span class="beschrijving"><p> '.$r['clan_home'].' '.$r['clan_challenger'].' '.ucfirst(strftime("%A %H <b>%B</b> %Y | %R", strtotime($r['date']))).'  </p></span></td></tr> ';
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T14:02:36.887

如果`$r`为假，则查询不成功。在这一点上，我们无法判断您的代码有什么问题，因为我们没有您的数据库模式。SQL 语法对我来说似乎很好。了解问题所在的唯一方法是尝试在 PhpMyAdmin 中运行查询。

# android - 在 Android 中发送电子邮件时出现错误“错过对 unregisterReceiver() 的调用”

> ID：12915842
> 
> 赞同：0
> 
> 时间：2012-10-16T13:31:44.177
> 
> 标签：android

```
package com.testing.email;

import android.app.Activity;
import android.content.ContentResolver;
import android.content.Intent;
import android.database.Cursor;
import android.os.Bundle;
import android.provider.ContactsContract;
import android.provider.ContactsContract.CommonDataKinds.Phone;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;

public class AndroidEmailActivity extends Activity implements OnClickListener{
/** Called when the activity is first created. */
String msg = "**********Backup Phone Contacts**********\n\n";

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    Button send = (Button)findViewById(R.id.button1);
    send.setOnClickListener(this);
}

public void onClick(View view){

    ContentResolver cr = getContentResolver();
    Cursor cursor = cr.query(ContactsContract.CommonDataKinds.Phone.CONTENT_URI, null, null, null, null);

    while(cursor.moveToNext()){
        String name = cursor.getString(cursor.getColumnIndexOrThrow(Phone.DISPLAY_NAME));
        String number = cursor.getString(cursor.getColumnIndexOrThrow(Phone.NUMBER));

        msg += name + "\t\t\t" + number + "\n";         
    }

    String emailAddress = "testing@hotmail.com";
    String emailSubject = "Testing";
    String emailText = msg;

    String emailAddressList[] = {emailAddress};

    Intent intent = new Intent(Intent.ACTION_SEND); 
    intent.setType("plain/text");
    intent.putExtra(Intent.EXTRA_EMAIL, emailAddressList);  
    intent.putExtra(Intent.EXTRA_SUBJECT, emailSubject); 
    intent.putExtra(Intent.EXTRA_TEXT, emailText); 
    startActivity(Intent.createChooser(intent, "Android apps send email:"));
    }
} 
```

日志猫

```
10-16 13:18:41.435: E/ActivityThread(732): Activity com.android.internal.app.ChooserActivity has leaked IntentReceiver com.android.internal.app.ResolverActivity$1@41071180 that was originally registered here. Are you missing a call to unregisterReceiver()?
10-16 13:18:41.435: E/ActivityThread(732): android.app.IntentReceiverLeaked: Activity com.android.internal.app.ChooserActivity has leaked IntentReceiver com.android.internal.app.ResolverActivity$1@41071180 that was originally registered here. Are you missing a call to unregisterReceiver()?
10-16 13:18:41.435: E/ActivityThread(732):  at android.app.LoadedApk$ReceiverDispatcher.<init>(LoadedApk.java:763)
10-16 13:18:41.435: E/ActivityThread(732):  at android.app.LoadedApk.getReceiverDispatcher(LoadedApk.java:567)
10-16 13:18:41.435: E/ActivityThread(732):  at android.app.ContextImpl.registerReceiverInternal(ContextImpl.java:1043)
10-16 13:18:41.435: E/ActivityThread(732):  at android.app.ContextImpl.registerReceiver(ContextImpl.java:1030)
10-16 13:18:41.435: E/ActivityThread(732):  at android.app.ContextImpl.registerReceiver(ContextImpl.java:1024)
10-16 13:18:41.435: E/ActivityThread(732):  at android.content.ContextWrapper.registerReceiver(ContextWrapper.java:341)
10-16 13:18:41.435: E/ActivityThread(732):  at com.android.internal.content.PackageMonitor.register(PackageMonitor.java:65)
10-16 13:18:41.435: E/ActivityThread(732):  at com.android.internal.app.ResolverActivity.onCreate(ResolverActivity.java:99)
10-16 13:18:41.435: E/ActivityThread(732):  at com.android.internal.app.ChooserActivity.onCreate(ChooserActivity.java:53)
10-16 13:18:41.435: E/ActivityThread(732):  at android.app.Activity.performCreate(Activity.java:4465)
10-16 13:18:41.435: E/ActivityThread(732):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1049)
10-16 13:18:41.435: E/ActivityThread(732):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1920)
10-16 13:18:41.435: E/ActivityThread(732):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1981)
10-16 13:18:41.435: E/ActivityThread(732):  at android.app.ActivityThread.access$600(ActivityThread.java:123)
10-16 13:18:41.435: E/ActivityThread(732):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1147)
10-16 13:18:41.435: E/ActivityThread(732):  at android.os.Handler.dispatchMessage(Handler.java:99)
10-16 13:18:41.435: E/ActivityThread(732):  at android.os.Looper.loop(Looper.java:137)
10-16 13:18:41.435: E/ActivityThread(732):  at android.app.ActivityThread.main(ActivityThread.java:4424)
10-16 13:18:41.435: E/ActivityThread(732):  at java.lang.reflect.Method.invokeNative(Native Method)
10-16 13:18:41.435: E/ActivityThread(732):  at java.lang.reflect.Method.invoke(Method.java:511)
10-16 13:18:41.435: E/ActivityThread(732):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
10-16 13:18:41.435: E/ActivityThread(732):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
10-16 13:18:41.435: E/ActivityThread(732):  at dalvik.system.NativeStart.main(Native Method) 
```

我正在开发一个应用程序，当手机丢失或被盗时，用户可以使用电子邮件找回所有手机联系人。我只是在测试一些简单的编码并尝试检索所有联系人号码并将它们放入消息中并发送到定义的电子邮件地址。我正在使用 Android 模拟器对此进行测试，并且我已经在模拟器中保存了 5 个示例联系人以进行实验。但是当我收到从这个应用程序发送的电子邮件时，我收到了超过 5 个联系电话，并且有很多联系电话不应该在我的模拟器中。我附上了我的代码和logcat，请有人帮我检查一下...谢谢...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T13:46:40.017

有更多人对某些 android 版本有此问题：

[安卓错误](http://code.google.com/p/android/issues/detail?id=29399)

[所以问题1](https://stackoverflow.com/questions/10068954/why-does-intent-createchooser-need-a-broadcastreceiver-and-how-to-implement)

[所以问题2](https://stackoverflow.com/questions/11308260/chooser-activity-leak-android)

[所以问题3](https://stackoverflow.com/questions/9318095/leaked-intentreceiver-from-sharing-menu)

和更多 ：）

# iphone - iOS TableView 加载数据非常慢

> ID：12915855
> 
> 赞同：2
> 
> 时间：2012-10-16T13:32:24.007
> 
> 标签：iphone, ios, ios5, ios6

我正在开发一个从 Web 服务解析数据并显示在表格视图中的项目。一切正常，但我对tableview的表现并不满意。从 web 解析数据后，我调用了 reload data 来显示数据，但它没有立即显示单元格。它显示 10/15 秒后的数据。在调用重新加载数据之前，我已经检查了所有数据是否已加载。奇怪的是，如果我尝试拖动表格，它会立即显示单元格。

任何的想法？

**更新**

```
-(void)receivedCategories:(NSMutableArray *)categoryItems{
  [self.spinner stopAnimating];
  self.categories=categoryItems;
  if (self.tableView!=nil) {
    [self.tableView reloadData];
  }
}

- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
{
  return 1;
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
  return [self.categories count];
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
  static NSString *CellIdentifier = @"CategoryCell";
  CategoryCell    *cell           = [self.tableView dequeueReusableCellWithIdentifier:CellIdentifier];
  cell.category                   = [self.categories objectAtIndex:indexPath.row];
  return cell;
} 
```

CategoryCell.m

```
@implementation CategoryCell

- (void)setCategory:(Category *)category
{
  [self.categoryTitle setText:category.title ];
  [self.categorySubTitle setText:category.description];
}

@end 
```

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-10-17T05:10:14.820

看来您没有`[self.tableView reloadData];`从主线程调用，这可能是您的问题的原因。

你可以试试：

```
[self.tableView performSelectorOnMainThread:@selector(reloadData) withObject:nil waitUntilDone:YES]; 
```

另请在[此处查看接受的答案](https://stackoverflow.com/a/3633841/653513)以获取更多信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-05-19T21:17:57.087

我遇到了同样的问题，[tableview reloaddata] 和调用方法 [cellForRowAtIndexPath] 的应用程序之间的时间间隔太长（几秒钟）。将 [reloaddata] 方法放在 a `dispatch_async(dispatch_get_main_queue(), ^{}`中解决了这个问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-07-13T10:27:54.740

您是否使用自定义字体？

我有一个非常相似的问题，我的 UITableView 需要很长时间才能加载。我终于找到了解决方案，它与我的代码或我加载自定义单元格的方式没有任何关系。

问题发生在运行时，当系统从情节提要加载我的自定义 UITableViewCells（带有预定义的自定义字体）时，由于自定义字体没有正确安装，系统会到处寻找字体文件，导致相当大的加载文件时滞后。

为确保您的字体已正确安装：

1.  在你的 XCode 项目中包含你的字体
2.  确保它们包含在目标中
3.  仔细检查您的字体是否作为资源包含在您的捆绑包中
4.  在您的应用程序列表中包含您的 iOS 自定义字体
5.  查找字体名称（要找到正确的名称，可以打印所有已安装的字体）

    ```
    for (NSString* family in [UIFont familyNames]){

        NSLog(@"Family %@", family);

        for (NSString* name in [UIFont fontNamesForFamilyName: family]){

            NSLog(@"\t Font%@", name);
        }
    } 
    ```

6.  使用 UIFont 并指定字体的名称

    ```
    [UIFont fontWithName:@"FONT_NAME" size:size]; 
    ```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-16T14:12:09.543

对于您显示的代码量（无），我不得不说您遇到的性能损失是因为您正在调用具有大量记录的 reloadData，或者因为您正在执行一些耗时的解析/计算创建单元格。此外，如果您在这些单元格上显示图像，也可能会导致性能问题。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-10-16T14:32:26.787

当你创建 CategoryCell？在第一次 dequeueReusableCell 将返回 nil。然后制作类别单元格。

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
  static NSString *CellIdentifier = @"CategoryCell";
  CategoryCell    *cell           = [self.tableView dequeueReusableCellWithIdentifier:CellIdentifier];
  if (!cell) {
    cell = [[[CategoryCell alloc] init] autorelease];   }

  cell.category                   = [self.categories objectAtIndex:indexPath.row];
  return cell;
} 
```

# android - 自定义视图访问中的 Android NullPointerException

> ID：12915856
> 
> 赞同：1
> 
> 时间：2012-10-16T13:32:24.007
> 
> 标签：android, android-layout, nullpointerexception, custom-view

我创建了一个自定义视图名称**StepView**。这是 StepView 的代码。

```
public class StepView extends LinearLayout {

    private Context cont;
    private LinearLayout stepHolder;

    public StepView(Context context, AttributeSet attrs) {
        super(context);
        // TODO Auto-generated constructor stub
        LayoutInflater.from(context).inflate(R.layout.stepview, this, true);
        stepHolder = (LinearLayout) findViewById(R.id.stepHolder);

        cont = context;
    }

    public void addStep(String title, int drawableId, View.OnClickListener stepAction){

        View step = LayoutInflater.from(cont).inflate(R.layout.step, this, true);
        TextView txtText = (TextView) step.findViewById(R.id.txtText);
        ImageView imgStep = (ImageView) step.findViewById(R.id.imgStep);

        txtText.setText(title);
        imgStep.setImageResource(drawableId);

        stepHolder.addView(step);
    }

} 
```

它是 stepview.xml 的代码。

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >
    <LinearLayout
        android:id="@+id/stepHolder"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:orientation="horizontal" >

    </LinearLayout>

</LinearLayout> 
```

步骤.xml

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

    <ImageView 
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:id="@+id/imgStep"/>
    <TextView
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:id="@+id/txtText">

    </TextView>

</LinearLayout> 
```

现在我在主布局中使用了 XML。

```
<?xml version="1.0" encoding="utf-8"?>
<merge xmlns:android="http://schemas.android.com/apk/res/android" >

    <LinearLayout
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:orientation="horizontal" >
 ..................
     </LinearLayout>

    <com.orthokeys.view.StepView
        android:id="@+id/stepMenu"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content" >
    </com.orthokeys.view.StepView>

</merge> 
```

我已经确认它显示正确。但是当我添加以下代码时，它给出了 NullPointerException。

```
StepView stepMenu = (StepView) findViewById(R.id.stepMenu);
stepMenu.addStep("Picture", R.drawable.step01, null); 
```

我已经检查过它`stepMenu`是空的。

我的代码有什么问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-18T05:02:03.687

我解决了问题...更改 StepView 类的构造函数中的代码

```
public StepView(Context context, AttributeSet attrs) {
  super(context, attrs);
  ....................
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T14:08:22.560

您没有显示出现错误的完整代码块，但看起来您可能忘记了使用`setContentView(R.layout.main_layout);`来设置正在使用的布局。

# php - 使用 PHP OOP 在链接列表中的特定索引处插入节点

> ID：12915859
> 
> 赞同：2
> 
> 时间：2012-10-16T13:32:34.587
> 
> 标签：php, linked-list

我想使用 PHP OOP 在链接列表中的特定索引处插入节点...我在开头插入节点和在结尾插入节点的代码如下

```
//top class for creating node
class ListNode
{
    public $data;
    public $next;
    function __construct($data)
    {
        $this->data = $data;
        $this->next = NULL;
    }

    function readNode()
    {
        return $this->data;
    }
}

//main class which will insert node

class LinkList
{
    private $firstNode;
    private $lastNode;
    private $count;
    function __construct()
    {
        $this->firstNode = NULL;
        $this->lastNode = NULL;
        $this->count = 0;
    }
    //insertion in start of linklist

    public function insertFirst($data)
    {
        $link = new ListNode($data);
        $link->next = $this->firstNode;
        $this->firstNode = &$link;
        /* If this is the first node inserted in the list
           then set the lastNode pointer to it.
        */
        if($this->lastNode == NULL)
            $this->lastNode = &$link;

        $this->count++;
    }
    //insertion at the last of linklist
    public function insertLast($data)
    {
        if($this->firstNode != NULL)
        {
            $link = new ListNode($data);
            $this->lastNode->next = $link;
            $link->next = NULL;
            $this->lastNode = &$link;
            $this->count++;
        }
        else
        {
            $this->insertFirst($data);
        }
    }
  } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T13:54:06.197

将此添加到 ListNode

```
function addAtIndex($index, $data) {
      if ($index != 0) {
            //pass through links till you hit the index
            $next->addAtIndex($index-1, $data)
         } else {
            $node = new ListNode($data);
            $node->next = $this->next;
            $this->next = &node;
         }
} 
```

像这样调用：

`$firstNode->addAtIndex($index, $data)`

未测试...只是一个想法

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T13:55:56.897

您可以做些什么来保持 OOP 是在**ListNode**类上创建一些方法，例如**insertBeforeMe**和**insertAfterMe**。正如@Flame 指出的那样，不是**LinkList**业务

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-17T10:08:10.350

通过以下代码修复它

```
public function insert($NewItem,$key){
        if($key == 0){
        $link = new ListNode($NewItem);
        $link->next = $this->firstNode;
        $this->firstNode = &$link;

        /* If this is the first node inserted in the list
           then set the lastNode pointer to it.
        */
        if($this->lastNode == NULL)
            $this->lastNode = &$link;

        $this->count++;
    }
    else{
        $link = new ListNode($NewItem);
        $current = $this->firstNode;
        $previous = $this->firstNode;

        for($i=0;$i<$key;$i++)
        {       
                $previous = $current;
                $current = $current->next;
        }

           $previous->next = $link;
           $link->next = $current; 
           $this->count++;
    }

    } 
```

# c# - C# FTP 库与 FTP 命令行应用程序

> ID：12915860
> 
> 赞同：0
> 
> 时间：2012-10-16T13:32:39.780
> 
> 标签：c#, command-line, ftp

我可以选择使用 C# FTP 库或标准 FTP 命令行应用程序来连接并从 FTP 服务器检索数据。

有人可以就更喜欢什么提供建议。？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T13:37:19.480

尽量保持语言的习惯用法，所以尽可能使用库。将使用 C# 的异常来处理错误，而不是检查一些晦涩的命令行错误级别值。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-16T13:38:06.923

为什么要从代码中使用面向最终用户的命令行工具？您将很难阅读和解析`stdout`并`stderr`获得命令导致的响应或错误。

只需使用[`FtpWebRequest`](http://msdn.microsoft.com/en-us/library/system.net.ftpwebrequest.aspx)and[`FtpWebResponse`](http://msdn.microsoft.com/en-us/library/system.net.ftpwebresponse.aspx)因为它们提供了一个不错的、易于使用的界面，其中包含错误检查等。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-16T13:38:15.800

使用库，您可以访问类、事件、异常处理等，它们可以更好地与您的代码集成。我想说这比必须解释命令行应用程序的文本输出和返回代码更易于维护。所以我的建议是使用图书馆。

# c# - 尝试获取进程的可执行路径返回 null

> ID：12915861
> 
> 赞同：3
> 
> 时间：2012-10-16T13:32:40.437
> 
> 标签：c#, process, null, executable-path

我有一段 C# 代码遍历所有正在运行的进程，找到一个特定的，并获取它的 ExecutablePath。问题是，尽管它设法找到想要的进程，但尝试获取 ExecutablePath 会返回 null。

现在，我对此做了一些更多的实验，结果发现，一些进程的代码获得了路径，其他进程返回 null，而且它似乎是任意的，因为我找不到进程与它是否返回之间的任何关联路径。

代码很好，但无论如何都是这样：

```
 string path = null;
    string processNameLowerCase = processName.ToLower() + ".exe";
    ManagementClass managementClass = new ManagementClass("Win32_Process");
    ManagementObjectCollection managementObjects = managementClass.GetInstances();
    foreach (ManagementObject managementObject in managementObjects) {
        string managedProcessNameLowerCase = ((string)managementObject["Name"]).ToLower();
        if (managedProcessNameLowerCase.StartsWith(processNameLowerCase)) {
            path = (string)managementObject["ExecutablePath"];
            break;
        }
    } 
```

总而言之，我想知道的是如何获得我想要的进程的可执行文件路径。

# c# - 将一个对象的属性复制到另一个对象

> ID：12915864
> 
> 赞同：0
> 
> 时间：2012-10-16T13:32:48.857
> 
> 标签：c#, linq, reflection, entity-framework-4

涉及：[使用 linq 和反射设置不为空的属性](https://stackoverflow.com/questions/12881866/set-properties-that-not-null-using-linq-and-reflection/12881949#12881949)

嗨专家

我更改了上面链接中的代码：

```
public static void MyCopy<T>(this T src, T dest)
{
    var notNullProps = typeof(T).GetProperties()
                                .Where(x => x.GetValue(src, null) != null);

    foreach (var p in notNullProps)
    {
        p.SetValue(dest, p.GetValue(src, null),null);
    }
} 
```

我写了这段代码来复制属性：

```
NorthwindModel1.Order ord1 = new NorthwindModel1.Order() {CustomerID="Nima",Freight=1.33m,ShipCity="Agha" };
NorthwindModel1.Order ord2 = new NorthwindModel1.Order() ;

ord1.MyCopy(ord2); 
```

但我收到了这个错误：

> EntityReference 已经被初始化。InitializeRelatedReference 只能用于在实体对象的反序列化期间初始化新的 EntityReference。

请帮我解决这个问题

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-16T16:28:26.360

正如评论中提到的，您的反射代码不是问题，而是（正如异常消息明确告诉的那样）您间接触发了您的一个实体引用的重置这一事实。我的建议是双重的：要么修改你的反射代码，只复制**标量**属性（字符串、日期等）——或者忽略引用和集合——或者使用序列化：

```
public static T CloneBySerialization<T>(this T source) where T : EntityObject {
    var serializer = new DataContractSerializer(typeof(T));
    using (var ios = new MemoryStream()) {
        serializer.WriteObject(ios, source);
        ios.Seek(0, SeekOrigin.Begin);
        return ((T) serializer.ReadObject(ios));
    }
} 
```

我必须警告你，使用这种方法你最终会得到完整的对象图或引用。如果克隆的对象是一个实体，**您将无法使用它/将其附加到另一个上下文**，因为引用和外键也已被“逐字”复制，这都可能导致冲突。如果您在键中使用标识列，问题会变得更糟。

在我之前的工作中，我在这些问题上做了很多魔术，就克隆而言，上面的代码就是你所需要的。所有，真的。

**但是，**要解决上下文问题和克隆实体的可用性，您必须清除引用并假设您也在 ¹ ↔ * 方向关系图中使用“根”实体（我希望我很清楚，因为故事很长）以下也是必要的。

```
public static void ClearReferences(this EntityObject entity) {
    if (entity == null)
        return;

    foreach (var p in entity.GetType().GetProperties()) {
        if (p.PropertyType.IsGenericType) {

            var propertyType = p.PropertyType.GetGenericTypeDefinition();

            if (propertyType == typeof(EntityReference<>)) {
                var reference = p.GetValue(entity) as dynamic;
                if (reference.EntityKey != null) {
                    reference.EntityKey = null;
                    ((EntityObject) reference.Value).ClearReferences();
                }
            }

            if (propertyType == typeof(EntityCollection<>)) {
                var children = (p.GetValue(entity) as IEnumerable<EntityObject>).ToList(); // covariance
                foreach (var child in children)
                    child.ClearReferences();
            }
        }
    }
} 
```

所以这个想法是你首先克隆（通过序列化/反序列化），然后你“净化”。

# localization - 融合图表。Pbarloading文本本地化

> ID：12915867
> 
> 赞同：0
> 
> 时间：2012-10-16T13:33:15.333
> 
> 标签：localization, fusioncharts

我试图在俄语上本地化图表。所有消息都翻译好了，但是 PBarLoadingText 显示错误的符号。这是我的代码：

```
var renderMyChart = new FusionCharts(fileRenderChartType, "myChartDataId" + i, "100%", "100%", "0", "1");
renderMyChart.setXMLData($(this).html());
renderMyChart.setTransparent(true); 
```

where `fileRenderChartType`="..../flash/MSColumn3D.swf?ChartNoDataText=График пустой по причине отсутствия данный для него&PBarLoadingText=Загрузка...";

问题只在`PBarLoadingText`。Firebug 正确显示参数。我尝试使用配置方法而不是它，但我得到了相同的结果。

如何解决这个问题呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T10:23:23.970

正确的属性是 LoadingText 而不是 PBarLoadingText，我已经对其进行了测试并且可以正常工作。可能会有来自 FusionCharts 的人尽快更新文档，以便对所有人有所帮助。

快乐编码！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-17T13:54:30.183

LoadingText 似乎仅适用于 JavaScript 图表。 [http://docs.fusioncharts.com/charts/contents/advanced/ChartMessages.html](http://docs.fusioncharts.com/charts/contents/advanced/ChartMessages.html)

# ios - Trigger.IO 动量滚动

> ID：12915869
> 
> 赞同：3
> 
> 时间：2012-10-16T13:33:28.233
> 
> 标签：ios, scroll, trigger.io, smooth-scrolling, momentum

是否可以将动量/惯性滚动添加到[滚动](http://trigger.io)？

我目前正在构建一个基本应用程序，并注意到 Webview 在滚动内容（iOS 6；iPhone 5）时不会响应滑动动作的动量。换句话说，*慢速滑动*和*快速滑动*最终会滚动到 Web 视图的同一部分（不像原生应用程序，其中说*快速滑动*应该滚动到更远的部分）。

是否有可能改变这种行为并使其更像原生？我已经尝试按照[这些 iOS 动量滚动指令](http://johanbrook.com/browsers/native-momentum-scrolling-ios-5/)并修改 CSS，如下所示，但这不起作用：

```
html {
overflow: scroll;
-webkit-overflow-scrolling: touch;
} 
```

作为一种解决方法，我觉得我可能会在我的 web 视图中使用 intertia 模拟 JS 库，但是如果可能的话，我想避免这个选项。

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-16T08:17:27.763

我对您的应用程序的 css 了解不多，但`-webkit-overflow-scrolling: touch;`只会将触摸滚动惯性赋予视口中具有固定高度/宽度的固定或绝对元素。应用`-webkit-overflow-scrolling: touch`到 body 或 html 元素只有在你做了类似的事情时才有效

```
body {
    position:fixed;
    top:0;
    right:0;
    bottom: 0;
    left: 0;
    overflow: auto;
    -webkit-overflow-scrolling: touch;
} 
```

我们在触发器应用程序中使用它来模拟 UITableView

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T19:28:47.447

是的。试试 Hojoki，您可以在其中看到动量滚动： [https ://itunes.apple.com/us/app/hojoki/id525010205?mt=8](https://itunes.apple.com/us/app/hojoki/id525010205?mt=8)

你不需要做任何特别的事情来在 iOS 中启用动量滚动。如果您没有看到它，那么您使用的某些样式或第 3 方库很可能受到了它的干扰。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-02T08:17:19.427

是的。我已经设法用 iScroll 实现它，但不得不修改库。我真的不推荐`-webkit-overflow-scrolling: touch`，因为它不会在发生动量滚动时呈现任何 DOM 更改。因此，如果您因元素滚动而重新调整元素，它看起来很糟糕。

这是我的存储库，我在其中添加了一个新回调`onScrolling()`以在 iScroll 中发生滚动动画时发出警报：[https ://github.com/simpleshadow/iscroll/blob/master/src/iscroll.js](https://github.com/simpleshadow/iscroll/blob/master/src/iscroll.js)

这是我在 Trigger.io 应用程序中使用的一个示例，我在动量和触摸滚动期间更改 div 的高度：http: [//jsfiddle.net/simpleshadow/wQQEM/22/](http://jsfiddle.net/simpleshadow/wQQEM/22/)

# java - 无法从 src\test 文件夹“运行文件”-> 找不到或无法加载主类

> ID：12915870
> 
> 赞同：3
> 
> 时间：2012-10-16T13:33:34.677
> 
> 标签：java, testing, maven, netbeans, exec

我只想在我的测试文件夹中运行一个 .java 文件以进行调试和测试。如果我在我的主文件夹中运行它，一切都很好，如果我在我的测试文件夹中运行它，我得到一个错误：

我的项目结构：

```
src
|_____ main
      |_____ java -> MainSrc.java
|_____ test
      |_____ java -> MainTest.java 
```

MainSrc / MainTest.java 包含：

```
public class MainSrc / MainTest
{
    public static void main(String[] args)
    {
        System.out.println("test");
    }
} 
```

现在，如果我在 netbeans 中右键单击并点击“运行文件”：

主\java\MainSrc.java

```
run:
test
BUILD SUCCESSFUL (total time: 0 seconds) 
```

测试\java\MainTest.java

```
cd C:\Java\MainTest; "JAVA_HOME=C:\\Program Files (x86)\\Java\\jdk1.7.0_02" 
"\"C:\\Program Files\\NetBeans 7.2\\java\\maven\\bin\\mvn.bat\"" 
"-Dexec.args=-classpath %classpath Test" 
"-Dexec.executable=C:\\Program Files (x86)\\Java\\jdk1.7.0_02\\bin\\java.exe" 
-Dexec.classpathScope=test --offline --errors process-classes org.codehaus.mojo:exec-maven-plugin:1.2:exec
Error stacktraces are turned on.
Scanning for projects...

------------------------------------------------------------------------
Building Test 1.0
------------------------------------------------------------------------

[resources:resources]
[debug] execute contextualize
Using 'windows-1252' encoding to copy filtered resources.
Copying 0 resource

[compiler:compile]
Nothing to compile - all classes are up to date

[exec:exec]
Error: could not find or load main class MainTest
------------------------------------------------------------------------
BUILD FAILURE 
```

我的操作是（也尝试过 classPathScope=test）：

```
 <action>
        <actionName>run</actionName>
        <goals>
            <goal>process-classes</goal>
            <goal>org.codehaus.mojo:exec-maven-plugin:1.2:exec</goal>
        </goals>
        <properties>
            <exec.args>-classpath %classpath MainTest</exec.args>
            <exec.executable>java</exec.executable>
            <exec.classpathScope>${classPathScope}</exec.classpathScope>
            <exec.workingdir>D:\Dropbox\Java\Test Automation Selenium</exec.workingdir>
        </properties>
    </action> 
```

我不是 Java 专业人士，我大部分时间都在谷歌上搜索，但我找不到解决方案。我也不明白为什么它不起作用。我试图从我的默认包中访问测试包，但那是不可能的...

请帮忙？：） 谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-17T20:09:48.903

这听起来像是神奇的“找不到主类”异常（如果没有，对不起！）。

我已经在 NB 用户邮件列表上看到过很多次了，而且每年一次我也遇到了这个神奇的例外。我[收集了](http://www.locked.de/2010/04/30/no-main-class-found/)我找到的解决方案，这些解决方案通常可以帮助我修复这些异常/错误（列表基于 NB 6.8 的时间，但可能仍然存在）。

*   确保您有一个包含 main 方法的公共类
*   这个类必须有一个明确定义的 main 方法：“public static void main(String[] args) { }”
*   您已经使用正确的类设置了项目配置：Project Properties > Run > Main Class（可能只是再次设置它，以便再次写入项目属性文件）
*   尝试重建项目： Menu > Run > Clean & Build Main Project
*   还是没有成功？尝试重命名类 (Foo -> Foo1) 并将其重命名为 (Foo1 -> Foo)。这应该使该文件的 NetBeans 缓存无效（假设 - 我不是 NetBeans 开发人员）。
*   还是没有成功？？您可能必须通过删除目录“.netbeans\6.8\var\cache”来清除 NetBeans 缓存（当然，6.8 可能会根据您的 NetBeans 版本而有所不同）。在删除缓存之前关闭 NetBeans - 下一次启动可能需要一些时间，因为 NB 很可能需要再次扫描您的代码。
*   还是没有运气？您可能想咨询 NetBeans 用户论坛或 nbusers-Mailinglist（请保持友好、耐心并以其他人能够提供帮助的方式报告错误）。

# c++ - 我是否需要对 K 类进行完整排序才能使用 std::map

> ID：12915872
> 
> 赞同：2
> 
> 时间：2012-10-16T13:33:37.143
> 
> 标签：c++, class, map, std

> **可能重复：**
> [std::map 键类必须满足哪些要求才能成为有效键？](https://stackoverflow.com/questions/6573225/what-requirements-must-stdmap-key-classes-meet-to-be-valid-keys)

我想`std::map`用作从我的班级到另一个班级的地图。如果我尝试以下代码，我会收到错误“ `undefined operator <`”。这是否意味着我需要在课堂上订购`K`才能使用`map`？它必须是完整的订购吗？我需要所有四个排序运算符还是`>`就足够了？

```
#include <iostream>
#include <map>
#include <stdio.h>
using namespace std;

struct K {
    int i, j;

    K(int i, int j) : i(i), j(j){}

    friend bool operator==(const K& x, const K& y){ return (x.i==y.i)&&(x.j==y.j); }
    friend bool operator!=(const K& x, const K& y){ return !(x==y); }

/*  friend bool operator<(const K&x, const K&y){
        if(x.i<y.i) return true;
        if(x.i>y.i) return false;
        return x.j<y.j;
    }
    friend bool operator>(const K&x, const K&y){ return y<x; }
    friend bool operator<=(const K&x, const K&y){ return !(y<x); }
    friend bool operator>=(const K&x, const K&y){ return !(x<y); }
*/
};

int main(){
    map<K, float> m;
    m[K(1,2)]=5.4;
    if(m.find(K(1,2))!=m.end())
        cout << "Found: " << m[K(1,2)] << endl;
    else
        cout << "Not found" << endl;
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-16T13:37:09.183

**是**的，您需要一种比较元素 ( `operator<`) 的方法才能使用 std::map。map 的特点之一是它保持其内容的排序，但要实现这一点，它需要知道如何比较项目。

您有三个选项来实现比较方法：

1.  `operator<`在 K 中添加定义
2.  制作一个`comp`知道如何比较两个 K 元素的仿函数并将其添加为模板参数`map<K, float, comp> m`；

    ```
    struct comp {
        bool operator()(const K& first, const K& second) {
            /*****/
        }
    }; 
    ```

3.  您可以为 K 定义 std::less 特化

    ```
    template<>  struct less<K>
    {
        bool operator()(const K& first, const K& second) {
            /*****/
        }
    }; 
    ```

并且使用简单`map<K, float> m;`

这是因为 map 的模板定义将比较函数设置为 std::less。

> 模板< class Key, class T, **class Compare = less** , class Allocator = allocator >> class map

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-16T13:51:03.657

地图中的元素由您提供的 Key 类型的比较函数引用。隐含地[`std::less`](http://en.cppreference.com/w/cpp/utility/functional/less)或显式地作为[第三个模板参数](http://en.cppreference.com/w/cpp/container/map)。

如果您使用自定义键类型，您还需要提供适当的比较函数（或功能对象），对键施加[严格的弱排序](http://www.sgi.com/tech/stl/StrictWeakOrdering.html)。也就是说，如果键看起来相等

```
!(key1 < key2 || key2 < key1) 
```

这些项目被认为是等效的。

因此，如果您的比较函数仅提供键的[部分顺序](http://en.wikipedia.org/wiki/Partial_order)，则元素可能被认为是相等的，但实际上是不同的，因此它们的值可能会相互干扰。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-16T13:38:45.033

只需定义`operator<`

`std::map`出于订购的目的，其他一切都是不必要的。

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-10-16T13:41:32.927

std::map 只需要一个 operator<。实现通常使用“红黑”树，可以构建为只需要 < 运算符。

但是，您可以完全按照刚才的方式使用 std::unordered_map。它通常使用通用哈希函数；如果适合 C++11 以来的问题空间，您可以自由地为其提供自己的哈希函数。

# python - Python：比较两个字典并将两者中的相同条目写入单独的文件

> ID：12915877
> 
> 赞同：2
> 
> 时间：2012-10-16T13:33:42.867
> 
> 标签：python, python-3.x, python-2.7

我有两个制表符分隔的文件。文件中的行数不一样。我已将每个文件的前两列放入字典中。我想将两个文件中相同的（键，值）对放入单独的输出文件中。

例如

```
dict1 = {'sim3_orf00006': 'gi|224475510|ref|YP_002633116.1|', 'sim3_orf00005': 'gi|224475511|ref|YP_002633117.1|'}
dict2 = {'gi|224475987|ref|YP_002633593.1|': 'sim2_orf00909', 'gi|224477510|ref|YP_002635116.1|': 'sim1_orf00452'} 
```

文件1：

```
sim2_orf01946    gi|224475611|ref|YP_002633217.1|    100.0 
```

文件2：

```
gi|224475496|ref|YP_002633102.1|     sim3_orf00019   100.0 
```

更新：谢谢大家的回复

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-16T13:38:27.217

使用对集合的交集`(key, value)`：

```
with open('output_file', 'w') as f:
    for key, value in set(dict1.items()) & set(dict2.items()):
        f.write("%s\t%s" % (key, value)) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T13:55:19.900

无需在内存中创建临时集。字典已经提供了`O(1)`查找复杂性：

```
dict1 = {'a':'b', 'c':'d'}
dict2 = {'c':'d', 'e':'f'}

filtered = ((item,value) for (item,value) in dict1.iteritems() if item in dict2 and value==dict2[item])
with open('output_file', 'w') as f:
    for key, value in filtered:
        text = '{}\t{}'.format(key, value)
        print(text)
        f.write(text) 
```

`value==dict2[item]``item in dict2`仅当返回时才会计算，`True`因为`and`是[衬衫电路运算符](http://docs.python.org/library/stdtypes.html#boolean-operations-and-or-not)。

此外，重要的是要注意，该解决方案对于第一个字典的长度和第二个字典的长度的复杂性`n`是`m`通过在第二个字典中查找的`n`迭代`O(1)`，给出`O(n)`. 因此，如果`m`小于`n`，则值得交换字典，因此复杂度将变为`O(m)`。

使用`set`不会做得更好，因为[集合交集`s&t`](http://wiki.python.org/moin/TimeComplexity#set)具有`O(min(len(s), len(t))`复杂性。

因此，这种方法将减少内存占用，保持相同的复杂性。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-16T14:09:54.383

你可以使用：

```
for key, d1v in dict1.iteritems():
    try:
        if d1v == dict2[key]:
            pass # it's a match
    except KeyError as e:
        pass # no corresponding key 
```

或者，如果预计重叠较低，则预先计算要比较的键：

```
for key in (dict1.viewkeys() & dict2.viewkeys()): # use .keys() in 3.x
    if dict1[key] == dict2[key]:
         pass # match 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-16T13:38:09.030

这将写入您的第三个文件，仅写入两个`dict`s 中存在的键、值对。但是，如果您想要原始文件中的整行，则需要以不同的方式处理。一种可能的方法是将这些行直接添加到您的行`dict`中以便更快地查找

```
outfile = open('path/to/output/file', 'w')
for k,v in dict1.iteritems():
    if k in dict2 and dict2[k]==v:
        outfile.write('\t'.join([k,v]) + '\n')
outfile.close() 
```

希望这可以帮助

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-16T13:38:21.093

```
A = {}
B = {}

# put stuff in them

for key in A.keys():
    if key in B.keys() and A[key] == B[key]:
        #write to file 
```

或者

```
shared_keys = [key for key in A.keys() if key in B.keys() and A[key] == B[key]]
with open("path/to/file", 'w') as writer:
    for key in shared_keys:
        writer.write("Key: %s, A: %s, B: %s" % (key, A[key], B[key])) 
```

# javascript - 显示/隐藏以前的表单字段条目

> ID：12915878
> 
> 赞同：0
> 
> 时间：2012-10-16T13:33:46.367
> 
> 标签：javascript, jquery, html, forms, browser

我想知道是否有人知道是什么控制了表单中先前表单字段条目的显示。

例如，如果在名称字段中，我输入“John”，它会出现在字段下方。这是浏览器的功能还是javascript之类的？

另外，如果是浏览器，有没有办法可以为给定的表单关闭它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T13:36:02.880

您可能正在查看自动完成功能，如果是这样`autocomplete="off"`，请在相关字段的 HTML 中将其关闭：

```
<input type="text" name="firstname" autocomplete="off" /> 
```

参考：

*   [`input`元素](https://developer.mozilla.org/en-US/docs/HTML/Element/Input)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T13:36:31.477

它是由浏览器制作的，如果您使用的是 HTML5，您可以为 input-element 设置一个属性以将其删除。

```
<input type="text" autocomplete="off" /> 
```

# c# - 嵌套事务范围，必需 -> 禁止 -> 必需

> ID：12915888
> 
> 赞同：4
> 
> 时间：2012-10-16T13:34:14.753
> 
> 标签：c#, .net, sql-server, transactions, transactionscope

内部 TransactionScope 将哪个事务作为环境事务？

```
using ( var t1 = new TransactionScope( TransactionScopeOption.Required ) )
{
    //MyStuff

    using ( var t2 = new TransactionScope( TransactionScopeOption.Suppress) )
    {
        //MyStuff

        using ( var t3 = new TransactionScope( TransactionScopeOption.Required) )
        {
            //Mystuff

            t3.Complete();
        }

        t2.Complete();
    }

    t1.Complete();
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-16T13:43:27.550

t3。那里没有其他选择，因为 t2 的范围是抑制 t1，而不是创建它自己的环境。因此在最里面的范围内只有 t3 而没有别的。

如果 t2 是，`RequireNew`那么最内部的范围环境将是 t2，因为 t3 将加入 t2。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-07-29T12:51:17.340

请记住：被抑制的 TransactionScope 不需要“完成”

没有交易。

例如，您可以在此处执行此操作：

```
 static void TestMethod()
    {
        using (Model1 ctx = new Model1())
        {
            Console.WriteLine("Count = {0}", ctx.Test.Count());
            Console.WriteLine("Has Value 'Test1' = {0}", ctx.Test.Count(x => x.Value == "Test1"));
            Console.WriteLine("Has Value 'Test2' = {0}", ctx.Test.Count(x => x.Value == "Test2"));
        }

        using (Transactions.TransactionScope scope = new Transactions.TransactionScope())
        {
            using (Model1 ctx = new Model1())
            {
                ctx.Test.Add(new Test { Value = "Test1" });

                Console.WriteLine("Add 'Test1'");
                Console.WriteLine("SaveChanges = {0}", ctx.SaveChanges());
            }

            using (Transactions.TransactionScope scope2 = new Transactions.TransactionScope(Transactions.TransactionScopeOption.Suppress))
            {
                using (Model1 ctx = new Model1())
                {
                    ctx.Test.Add(new Test { Value = "Test2" });

                    Console.WriteLine("Add 'Test2'");
                    Console.WriteLine("SaveChanges = {0}", ctx.SaveChanges());
                }
            }
        }

        using (Model1 ctx = new Model1())
        {
            Console.WriteLine("Count = {0}", ctx.Test.Count());
            Console.WriteLine("Has Value 'Test1' = {0}", ctx.Test.Count(x => x.Value == "Test1"));
            Console.WriteLine("Has Value 'Test2' = {0}", ctx.Test.Count(x => x.Value == "Test2"));
        }
    } 
```

输出：

*   计数 = 1
*   具有值“Test1”= 0
*   具有值“Test2”= 0
*   添加“测试1”
*   保存更改 = 1
*   添加“测试2”
*   保存更改 = 1
*   计数 = 1
*   具有值“Test1”= 0
*   具有值“Test2”= 1

这意味着受抑制范围内的每个查询都不能仅通过处置范围来回滚。

但如果你这样做：

```
 static void TestMethod()
    {
        using (Model1 ctx = new Model1())
        {
            Console.WriteLine("Count = {0}", ctx.Test.Count());
            Console.WriteLine("Has Value 'Test1' = {0}", ctx.Test.Count(x => x.Value == "Test1"));
            Console.WriteLine("Has Value 'Test2' = {0}", ctx.Test.Count(x => x.Value == "Test2"));
            Console.WriteLine("Has Value 'Test3' = {0}", ctx.Test.Count(x => x.Value == "Test3"));
        }

        using (Transactions.TransactionScope scope = new Transactions.TransactionScope())
        {
            using (Model1 ctx = new Model1())
            {
                ctx.Test.Add(new Test { Value = "Test1" });

                Console.WriteLine("Add 'Test1'");
                Console.WriteLine("SaveChanges = {0}", ctx.SaveChanges());
            }

            using (Transactions.TransactionScope scope2 = new Transactions.TransactionScope(Transactions.TransactionScopeOption.Suppress))
            {
                using (Model1 ctx = new Model1())
                {
                    ctx.Test.Add(new Test { Value = "Test2" });

                    Console.WriteLine("Add 'Test2'");
                    Console.WriteLine("SaveChanges = {0}", ctx.SaveChanges());
                }

                using (Transactions.TransactionScope scope3 = new Transactions.TransactionScope())
                {
                    using (Model1 ctx = new Model1())
                    {
                        ctx.Test.Add(new Test { Value = "Test3" });

                        Console.WriteLine("Add 'Test3'");
                        Console.WriteLine("SaveChanges = {0}", ctx.SaveChanges());
                    }

                    scope3.Complete();
                }
            }
        }

        using (Model1 ctx = new Model1())
        {
            Console.WriteLine("Count = {0}", ctx.Test.Count());
            Console.WriteLine("Has Value 'Test1' = {0}", ctx.Test.Count(x => x.Value == "Test1"));
            Console.WriteLine("Has Value 'Test2' = {0}", ctx.Test.Count(x => x.Value == "Test2"));
            Console.WriteLine("Has Value 'Test3' = {0}", ctx.Test.Count(x => x.Value == "Test3"));
        }
    } 
```

输出：

*   计数 = 0
*   具有值“Test1”= 0
*   具有值“Test2”= 0
*   具有值“Test3”= 0
*   添加“测试1”
*   保存更改 = 1
*   添加“测试2”
*   保存更改 = 1
*   添加“测试3”
*   保存更改 = 1
*   计数 = 2
*   具有值“Test1”= 0
*   具有值“Test2”= 1
*   具有值“Test3”= 1

你可以看到：“scope”和“scope3”之间没有关系，因为“scope3”提交了它的变化。

“scope2”也提交其更改，因为“scope2”是一个抑制范围。

# javascript - 在 WinPhone 上通过 JavaScript 对只读输入禁用虚拟键盘

> ID：12915889
> 
> 赞同：0
> 
> 时间：2012-10-16T13:34:15.300
> 
> 标签：javascript, input, keyboard, virtual, readonly

我有一个带有只读属性的输入，我不能将它设置为禁用，因为它应该能够选择和复制值。当我将焦点放在输入上时，我看到光标（在 WinPhone 和 IE 上）并出现虚拟键盘。起码虚拟键盘怎么废？

# c# - c# 加密，获取 .der 和 .pem 文件作为输入

> ID：12915891
> 
> 赞同：5
> 
> 时间：2012-10-16T13:34:16.100
> 
> 标签：c#, encryption

我是 C# 的新手。在我将该信息发布到外部 URL 之前，我被要求加密一个字符串。我从该外部应用程序获得的所有输入都是一个 .der 文件和一个 .pem 文件。他们要求我发送加密的（字符串）信息，以便他们可以解密。

我已经阅读了很多帖子，但无法得到关于如何解决这个问题的确切答案。

我正在使用下面的代码片段来读取 .pem 文件并创建证书。但是在*新的 X509Certificate2(certBuffer);* 行向我抛出“找不到请求的对象”错误。我不确定我是否朝着正确的方向前进。如果是，请帮助我找出问题所在。否则给我一个方法。提前致谢！

```
 var pem = System.IO.File.ReadAllText("C:\\Users\\bvarapr1\\Desktop\\fordsync\\public_qa.pem");
    byte[] certBuffer = GetBytesFromPEM(pem, "PUBLIC KEY");
    var certificate = new X509Certificate2( certBuffer );            
    RSACryptoServiceProvider provider = (RSACryptoServiceProvider)certificate.PrivateKey;
    string testString = "DIGITALMOON";
    string encryptedVIN = RSAEnc(provider, testString);

    byte[] GetBytesFromPEM(string pemString, string section)
    {
        var header = String.Format("-----BEGIN {0}-----", section);
        var footer = String.Format("-----END {0}-----", section);

        var start = pemString.IndexOf(header, StringComparison.Ordinal) + header.Length;
        var end = pemString.IndexOf(footer, start, StringComparison.Ordinal) - start;

        if (start < 0 || end < 0)
        {
            return null;
        }

        return Convert.FromBase64String(pemString.Substring(start, end));
    } 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-16T16:02:53.467

```
static void Main(string[] args)
{
    System.Security.Cryptography.RSACryptoServiceProvider rsa = new System.Security.Cryptography.RSACryptoServiceProvider();
    System.Security.Cryptography.RSAParameters rsaParam = rsa.ExportParameters(false);
    rsaParam.Modulus = Convert.FromBase64String(System.IO.File.ReadAllText(@"C:\keys\public_key.pem").Replace("-----BEGIN PUBLIC KEY-----", "").Replace("-----END PUBLIC KEY-----", ""));
    rsa.ImportParameters(rsaParam);

    string msg = "This is a test.";
    byte[] encValue = rsa.Encrypt(Encoding.UTF8.GetBytes(msg), false);

    Console.WriteLine("Message Before Encryption: " + msg);
    Console.WriteLine("Encrypted Message:\r\n" + Convert.ToBase64String(encValue));

    Console.WriteLine("\r\nPress any key to exit.");
    Console.ReadKey();
} 
```

# c++ - 用于读取音频文件的库

> ID：12915892
> 
> 赞同：9
> 
> 时间：2012-10-16T13:34:21.383
> 
> 标签：c++, c, mp3, wav, audio-processing

我想在线/现场处理音频，我不断地从音频文件中读取音频样本，处理这些（例如应用一些效果），并将处理后的样本转发到像声卡这样的音频输出设备。输入文件具有常见的格式，例如 wav、mp3，甚至可能是 ogg。

是否有类似于 libav/ffmpeg 的用于音频文件的库，可以简化读取各种音频格式并为我提供源源不断的原始音频样本流？还是为每种格式使用单独的库的最佳解决方案？这些库应该是 c/c++ 和跨平台兼容（Mac、Win、Linux、ARM）。

**编辑**感谢所有答案。我评估了所有库并得出结论，最好还是坚持使用 libav/ffmpeg，因为大多数库都需要 ffmpeg 作为后端。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-16T13:56:36.817

我可以推荐[RtAudio](http://www.music.mcgill.ca/~gary/rtaudio/)或[PortAudio](http://www.portaudio.com/)用于跨平台音频 I/O。对于音频解码，您可能需要查看[libsndfile](http://www.mega-nerd.com/libsndfile/)或[libaudiodecoder](https://github.com/asantoni/libaudiodecoder/)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-16T13:54:21.500

退房[朱斯](http://www.rawmaterialsoftware.com/juce.php)。它是一个大型库，用于开发音乐软件的 VST 音频插件。里面有很多你不需要的东西，但我认为你可以只挑选音频部分来包含在你的构建中。[AudioFormatReader](http://www.rawmaterialsoftware.com/juce/api/classAudioFormatReader.html)及其关联的类可以做文件读取，也有输出到声卡的类。还有很多其他的音频处理工具。它是 GPL 许可的，跨平台的，并且他们声称支持实验性的 Android。我还没有将它用于项目，但我正在等待灵感！

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-16T14:02:36.543

我会检查[libSDL](http://libsdl.org/)，它有一个音频子系统，专为执行此类操作而构建，并处理 ogg、mp3、flac、wav 等。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-16T13:46:24.457

LibVLC 可以做到这一点。libvlc 支持最多样化的音频（和视频）格式。它是一个 C/C++ 跨平台库。它还应该支持 Arm 代码生成。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-19T09:02:25.913

您可以使用[irrKlang](http://www.ambiera.com/irrklang/)库。我已经将它用于我的游戏。这是一个非常简单的库，例如播放一些文件“somefile.mp3”，你只需要编写

```
engine->play2D("somefile.mp3", true); 
```

这个库也是跨平台的。并适用于 C++、C# 和所有 .NET 语言。

该库的更多功能（来自其自己的站点）

> 它具有低级音频库中已知的所有功能以及许多有用的功能，例如复杂的流引擎、可扩展的音频读取、单线程和多线程模式、低端硬件的 3D 音频仿真、插件系统、多个滚降模型等等. 所有这些都可以通过一个极其简单的 API 来访问。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-11-07T13:41:45.343

[GAudio Library](http://www.geek-audio.org/)可能是您所追求的。它简单、强大、跨平台和可扩展

GAudio的hello world是这样的：

```
gaudio_init("addons");

const char* filename = "..\\media\\trek12.wav";

gsource* source = gaudio_source_create_from_file(filename,FALSE);
if(source == NULL)
{   
    printf("load file:%s error!\n",filename);
    printf("bad source.\nerror code:%d.\n",gaudio_error_get());
    gaudio_deinit();
    return -1;
}

printf("play filename:%s\n",filename);

gaudio_source_play(source,FALSE);

printf("\nplaying, press any key to quit.\n");
getch();

gaudio_source_stop(source);
gaudio_source_destroy(source);

gaudio_deinit(); 
```

# php - file_get_contents 无法从 facebook 图片 url 读取图片

> ID：12915894
> 
> 赞同：1
> 
> 时间：2012-10-16T13:34:27.953
> 
> 标签：php, facebook, facebook-graph-api, curl, file-get-contents

我有一个来自 facebook 的图片网址：

```
https://fbcdn-sphotos-e-a.akamaihd.net/hphotos-ak-prn1/s720x720/156510_443901075651849_1975839315_n.jpg 
```

我需要将其保存在本地。当我使用`file_get_contents`它时，它给出了错误`failed to open stream`。当我在浏览器中打开图像时，它显示正常。我只是明白该怎么做。

事实上，我以下列方式使用 curl 并没有得到任何回应

$url = [https://fbcdn-sphotos-ea.akamaihd.net/hphotos-ak-prn1/s720x720/156510_443901085651849_1975839315_n.jpg](https://fbcdn-sphotos-e-a.akamaihd.net/hphotos-ak-prn1/s720x720/156510_443901085651849_1975839315_n.jpg)；

```
$ch = curl_init();
curl_setopt($ch, CURLOPT_URL, $url);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
curl_setopt($ch, CURLOPT_HEADER, 0);
$response = curl_exec($ch);
curl_close($ch);
$filename = 'ex'.$src['photo_id'].'.jpg';
$imgRes = imagecreatefromstring($response);
imagejpeg($imgRes, $filename, 70);

header("Content-Type: image/jpg");
imagejpeg($imgRes, NULL, 70); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-16T14:02:35.100

这是因为您正在请求一个安全的 URL，而您的服务器可能在没有配置的情况下不支持它。您可以使用 CURL 来请求带有有效证书的 URL，也可以尝试在没有 SSL 的情况下请求它：

```
<?php

$file = 'http://url/to_image.jpg';
$data = file_get_contents($file);

header('Content-type: image/jpg');
echo $data; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T14:06:08.407

您需要告诉 cURL 您不想验证 SSL 连接。

以下是经过测试和工作的。

```
$url = "https://******";

$ch = curl_init();
curl_setopt($ch, CURLOPT_URL, $url);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, false); // ignore SSL verifying
curl_setopt($ch, CURLOPT_HEADER, 0);
$response = curl_exec($ch);
curl_close($ch);

header("Content-Type: image/jpg");
echo $response; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-16T13:39:40.750

Facebook 很可能需要一个有效的 User-Agent 字符串并拒绝您的请求，因为`file_get_contents`在访问远程文件时不发送。

你可以使用这个：

```
if( $f = fsockopen($host="fbcdn-sphotos-e-a-.akamaihd.net",80)) {
    fputs($f,"GET /hphotos-ak-prn1/........ HTTP/1.0\r\n"
            ."Host: ".$host."\r\n"
            ."User-Agent: My Image Downloader\r\n\r\n");
    $ret = "";
    $headers = true;
    while(!feof($f)) {
        $line = fgets($f);
        if( $headers) {
            if( trim($line) == "") $headers = false;
        }
        else $ret .= $line;
    }
    fclose($f);
    file_put_contents("mylocalfile.png",$ret);
} 
```

# mongodb - db文件在哪里？在 /var/lib/mongodb 我找不到任何增加的大小。我跑了一个很大的循环来创建十万个对象

> ID：12915898
> 
> 赞同：5
> 
> 时间：2012-10-16T13:34:41.180
> 
> 标签：mongodb

我正在使用 /etc/mongod.conf 中的 UBUNTU，我发现 /var/lib/mongdb 是数据的路径。

我在该目录中找到了一些文件，例如 collectionname.0、.1、.ns。但是当我运行一个非常大的循环（十万）时，我可以使用 mongo shell 将它们取回，但是 mongodb 目录大小并没有增加，所以必须有其他地方存储这些数据

那是什么地方？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-16T14:33:59.983

没有别的地方了。正如@itsbruce 所指出的，在Ubuntu 中它是/var/lib/mongodb。

在非打包安装中（在 Linux 上），即没有 /etc/mongodb.conf 文件，默认为 /data/db/（除非另有说明）。

您可以修改命令行上的开关“--dbpath”，为 mongod 实例指定一个不同的目录来存储其数据。典型位置包括：/srv/mongodb、/var/lib/mongodb 或 /opt/mongodb。

（Windows 系统使用 \data\db 目录。）如果您使用包管理系统安装。

我建议在插入数据时使用[此处](http://docs.mongodb.org/manual/reference/collection-statistics/)`db.collection.stats`概述的命令来监控集合的大小。该链接还解释了每个字段（在输出中）的含义。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T13:39:51.747

这是 Ubuntu 上 MongoDB 的正确数据位置。MongoDB[预先分配](http://www.mongodb.org/display/DOCS/Excessive+Disk+Space)文件空间。您确定您生成的数据超出了初始预分配文件的容量吗？尝试清除所有现有数据文件并使用 --noprealloc 标志重新启动 Mongo。然后添加数据。

# ios - 需要一种正确构建 NSURL 的方法

> ID：12915899
> 
> 赞同：0
> 
> 时间：2012-10-16T13:34:42.243
> 
> 标签：ios, xcode, uiwebview, nsurl

我将用户的网站地址存储在常规 NSString 中。
有些是“www.somewebsite.com”，有些是“http://somewebsiteothersite.org”。

我的应用程序应该打开一个 UIWebView 并打开该网页：

```
 NSURLRequest *requestObj = [NSURLRequest requestWithURL:[NSURL URLWithString:[self websiteString]]];
    NSLog(@"visiting: %@",websiteString);
    [webView loadRequest:requestObj]; 
```

但是会发生的是，如果`http://`省略 ， UIWebView 将不会打开页面。

是否有一种下降方式可以为 UIWebView 正确构建 NSURL？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T13:38:28.160

`http://`如果没有就添加？

```
if (![urlStr hasPrefix:@"http://"] && ![urlStr hasPrefix:@"https://"]) {
    urlStr = [@"http://" stringByAppendingString:urlStr];
} 
```

提防那些打算没有的链接，`http://`例如`ftp://`或`mailto:`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T13:50:58.320

我知道 Mathias 回答得更快，但我想分享一个类似的解决方案

```
//first detect if your string has contains http:// if not add http:// to your string
    NSMutableString *websiteString = @"www.x.com";
    if ([websiteString rangeOfString:@"http://"].location == NSNotFound) {
        NSLog(@"contains http:// == false");
        websiteString = [@"http://" stringByAppendingString:websiteString];

    } else {
        NSLog(@"contains http:// == true");

    }

    NSURLRequest *requestObj = [NSURLRequest requestWithURL:[NSURL URLWithString:[self websiteString]]];
    NSLog(@"visiting: %@",websiteString);
    [webView loadRequest:requestObj]; 
```

# tableau-api - 随着时间的推移甘特图和总和条

> ID：12915900
> 
> 赞同：0
> 
> 时间：2012-10-16T13:34:54.567
> 
> 标签：tableau-api

我在 Tableau 中创建以下图表时遇到问题。

我的数据如下所示：

```
name    date    count
a   11/10/2012  2
a   12/10/2012  3
a   13/10/2012  2
b   12/10/2012  6
b   13/10/2012  2
b   14/10/2012  3
c   14/10/2012  2
c   15/10/2012  2 
```

我想创建一个条形图，其中 y 轴上的计数和 x 轴上的时间之和。条的宽度应该是时间的长度，就像甘特图一样。每个名字都有自己的酒吧。这是一张显示我所追求的图像。

![示例图像](../Images/2e3c2fa6456ce334a235153a74d78655.png)

如果时间重叠，条形应该重叠。

我在 Tableau 中尝试了各种方法，但还没有真正接近。

这种图表在 Tableau 中是否可行？如果不是在 7 中，它会在 8 中吗？我听说它可以创建一些更复杂的图表类型。

可以在[http://community.tableausoftware.com/servlet/JiveServlet/download/188799-12362/Gantt%20over%20time%20with%20summed%20bar.twbx.zip找到包含数据的工作簿](http://community.tableausoftware.com/servlet/JiveServlet/download/188799-12362/Gantt%20over%20time%20with%20summed%20bar.twbx.zip)

谢谢你的帮助，安德鲁

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T18:03:17.150

Tableau 中甘特图的诀窍是在尺寸架子上进行计算，以天为单位计算每个条形的持续时间。[请参阅Tableau 示例](http://i.stack.imgur.com/7Qe5Q.jpg)中的示例屏幕截图

您还需要列架上的连续日期字段来获得水平时间轴。

在这个例子中，我还做了一些其他可选的事情，例如，在分析菜单下关闭聚合以获取每个数据行的标记，而不是聚合它们，在行架中添加离散日期以使每个条继续不同的行（只要每个条从不同的日期开始）并隐藏该开始日期的列。

# c# - 在 C# 中使用可变数量的参数调用 GetStoredProcCommand？

> ID：12915902
> 
> 赞同：3
> 
> 时间：2012-10-16T13:34:55.163
> 
> 标签：c#, .net, arguments, enterprise-library, system.data

在我的代码中，我一直在重复这样的代码块：

```
var returnData = MyDb.ExecuteDataSet(
    MyDb.GetStoredProcCommand("MyTable_Insert", columnOne, columnTwo, columnThree),
    transaction
);

var returnId = (int)returnData.Tables[0].Rows[0]["INSERTED_ID"]; 
```

在我看来，这似乎是一个相当大的代码块，要重复很多次，但我不知道如何将它概括为一个方法，因为每个存储过程的参数数量不同。

（对我而言）显而易见的解决方案是将我的参数传递给数组中的函数，然后将它们展开为 call `GetStoredProcCommand`，但我找不到这样做的方法：

```
private int CallStoredProcedure(string procName, List<dynamic> parameterValues) {
    ..
    MyDb.GetStoredProcCommand(procName, expand parameterValues);
    // ERROR: Obviously "expand" doesn't exist
    ..
} 
```

我可以使用冗长的方式来传递参数 using `AddInParameter`，但是我需要将类型信息与参数值一起传递：

```
private int CallStoredProcedure(string procName, IDictionary<DbType, IDictionary<string, string>> paramsKeyValuesByType) {
    ..
    MyDb.AddInParameter(myProcCommand, param.Value.Key, param.Key, param.Value.Value);
    ..
} 
```

但随后我必须`IDictionary`在调用该方法之前构造该对象，这比我最初调用该过程的方式更加冗长。

谁能想到一个优雅的解决方案？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-16T13:37:01.367

您可以使用以下`params`关键字：

```
private int CallStoredProcedure(string procName, params object[] parameterValues) {
    ..
    MyDb.GetStoredProcCommand(procName, parameterValues);
    ..
} 
```

# java - 在方法中创建弱引用

> ID：12915915
> 
> 赞同：3
> 
> 时间：2012-10-16T13:35:49.340
> 
> 标签：java, android, bitmap, out-of-memory, weak-references

我有以下方法，它有一个 ImageSwitcher，用户可以左右滑动。所选图像显示在屏幕中央。我已经在低内存手机上对高分辨率图像进行了一些图像缩放，但是当快速从左向右滑动时，我仍然遇到 Bitmap OutOfMemoryEexception。我想将线`mSwitcher.setImageURI(myUri);`（这是导致 OOME 的线）转换为使用弱引用，以便可以自动对它进行垃圾收集。我怎样才能做到这一点？这是性能优化此方法的最佳方法吗？

谢谢

方法：

```
 public void onItemSelected(AdapterView parent, View v, int position, long id) {

    File mediaStorageDir = new File(Environment.getExternalStoragePublicDirectory(
            Environment.DIRECTORY_PICTURES), "MyAppName");
    File[] cachedOnSDImages = mediaStorageDir.listFiles();
    countArray = new Integer[cachedOnSDImages.length];
    fileArray = new String[cachedOnSDImages.length];
    fileArray[position] = cachedOnSDImages[position].getAbsolutePath();
    Uri myUri = Uri.parse(fileArray[position]);
    mSwitcher.setImageURI(myUri); // weakly reference myUri in this line
    this.currentpos = position;
} 
```

我应该在这里添加 mSwitcher 实例化：

```
 private void makeSwitcher() {
    mSwitcher =  (ImageSwitcher) findViewById(R.id.switcher);
    mSwitcher.setFactory(this);
    mSwitcher.setInAnimation(AnimationUtils.loadAnimation(this,
        android.R.anim.fade_in));
    mSwitcher.setOutAnimation(AnimationUtils.loadAnimation(this,
        android.R.anim.fade_out));
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-16T13:39:38.270

```
import java.lang.ref.WeakReference;

public class ReferenceTest {
        public static void main(String[] args) throws InterruptedException {

            WeakReference r = new WeakReference(new String("I'm here"));
            WeakReference sr = new WeakReference("I'm here");
            System.out.println("before gc: r=" + r.get() + ", static=" + sr.get());
            System.gc();
            Thread.sleep(100);

            // only r.get() becomes null
            System.out.println("after gc: r=" + r.get() + ", static=" + sr.get());

        }
} 
```

取自[wiki 弱引用](http://en.wikipedia.org/wiki/Weak_reference#Java)

这就是在 Java 中可以使用弱引用的方式 - 但这也意味着它在您的情况下不起作用，因为切换器必须显式接受 WeakReference 对象而不是 URI。

# google-maps - 如何找到街道上的最后一个数字是多少？

> ID：12915916
> 
> 赞同：1
> 
> 时间：2012-10-16T13:35:48.730
> 
> 标签：google-maps

我想在谷歌地图 API 中找到一条街道的最后一个数字。有那么容易吗？或者，如果这是不可能的，我可以找到是否存在街道号码？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-16T19:33:02.540

有个家伙一直在为 Smarty Streets 做广告，试试看，否则，这里有一些伪代码

[http://smartystreets.com/](http://smartystreets.com/)

1.  输入 0 到 1000 之间的随机数
2.  运行地理编码器；您最终可能会得到一个位于城镇另一部分的结果。所以你需要某种错误验证或捕获地理编码器抛出的那些错误
3.  将数字增加 100 或 500
4.  `setTimeout`再次运行地理编码器，记住使用某种睡眠功能将其限制 0.5 秒或更长时间。否则会出现 *OVER_QUERY_LIMIT* 错误。
5.  从 #1 重复

*评论中的建议（杰森）：*

从中间（已知存在的）数字开始并向前和向后搜索，或者将数字加倍和减半。这是一个很好的建议。

示例：您知道 #2000 存在，因此检查 #500 和 #4000 并查看哪个会引发错误

# iphone - 在动态 UITextfield 上设置标签

> ID：12915919
> 
> 赞同：0
> 
> 时间：2012-10-16T13:35:57.343
> 
> 标签：iphone, uitextfield

如果我以编程方式创建 UITextField，它是否具有标记的值？我可以为标签设置一个值吗？基本上我有一个应用程序，允许某人点击一个加号并创建一个新的 uitextfield。我需要捕获文本字段的值并跟踪该值用于哪个字段。我正在使用 tag 属性来确定哪个 uitextfield 是哪个，然后根据它进行存储。基本上，我想为每个 uitextfield 分配一个唯一的 id。可以设置标签吗？我知道我可以扩展 UITextField 类并以这种方式实现它。这是唯一的方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T13:41:14.393

`tag`是 的一个属性`UIView`。A`UITextField`是 的一种`UIView`。因此，您的`UITextField`.

它的默认值应该是 0 但它肯定是可写的，所以类似的东西`textField.tag = 42;`是有效的。

# wpf - 窗口展开时用户控件垂直展开

> ID：12915920
> 
> 赞同：0
> 
> 时间：2012-10-16T13:36:01.413
> 
> 标签：wpf, xaml, user-interface

当我的窗口展开时，我无法让我的 UserControl 垂直展开。

我的 UserControl 当前位于 ItemsControl 内，通过在 ItemsControl 上设置 VerticalAlignment="Stretch" 属性可以正确拉伸。

我将以下 UserControl 添加到 ItemsControl：

```
<UserControl MinWidth="930">
     <Grid VerticalAlignment="Stretch" Background="Red">
          <Grid.ColumnDefinitions>
               <ColumnDefinition Width="200" />
               <ColumnDefinition Width="730*" />
          </Grid.ColumnDefinitions>
          <Grid.RowDefinitions>
               <RowDefinition Height="400" />
               <RowDefinition Height="*" />
          </Grid.RowDefinitions>

          <DockPanel Grid.Column="1" Grid.ColumnSpan="1" Grid.RowSpan="2" Grid.Row="0" HorizontalAlignment="Stretch" VerticalAlignment="Stretch" Background="Pink" LastChildFill="True">

              <ItemsControl Name="itemPanelOverview" Grid.Column="1" Background="Black" Margin="0"/>
         </DockPanel>
     </Grid>
</UserControl> 
```

UserControl 在 TabControl 内的 ItemsControl 中被调用，如下所示：

```
<TabItem>
     <TabItem.Header>
          HEADER EG
     </TabItem.Header>

     <ItemsControl Name="contentItems" Grid.ColumnSpan="2" Grid.Column="1" Grid.Row="1" VerticalAlignment="Stretch" Background="Blue">
          <Grid Height="35" Background="{DynamicResource GrayMenuGradient}" >
               <Image Source="..." Stretch="None" />
               <TextBlock Text="{Binding WelcomeMessage}" />
          </Grid>
    </ItemsControl>
</TabItem> 
```

似乎 ItemsControl (contentItems) 正在按预期拉伸，因为我可以看到蓝色背景正确拉伸。

除了行定义之外，我没有在任何地方设置此 UserControl 的高度。有什么我想念的吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T13:47:29.497

这里至少有两个方面在起作用：

第一个是当您在 an 中有项目时`ItemsControl`，每个项目实际上都在 an`ItemContainer`中，因此它是您要拉伸的容器。

`ItemContainerTemplate`您可以通过为您声明一个来设计容器：http `ItemsControl`: [//msdn.microsoft.com/en-us/library/system.windows.controls.itemcontainertemplate.aspx](http://msdn.microsoft.com/en-us/library/system.windows.controls.itemcontainertemplate.aspx)

第二个考虑因素是`ItemsPanelTemplate`，它决定将项目放置到哪种类型的面板中。中的项目`ItemsControl`填充可用空间的能力将取决于容器的类型和`ItemContainer`. 例如，如果您将 a`StackPanel`用于`ItemsPanelTemplate`，它不会填满可用空间，因为它会`StackPanel`根据其内容增长和缩小。A`DockPanel`可能会起作用，但只有最后一个孩子会长大以填充可用空间。也许`UniformGrid`可以做到这一点。

# elasticsearch - 弹性搜索和“数据库”

> ID：12915922
> 
> 赞同：3
> 
> 时间：2012-10-16T13:36:05.423
> 
> 标签：elasticsearch

抱歉标题模棱两可，再合适不过了。

我正在探索 Elastic Search，它看起来很酷。我的问题是概念性的，因为我习惯了 sql。

在 Sql 中，您有不同的数据库，并且您将每个应用程序的数据存储在那里。ES中是否存在相同的概念？还是来自我所有应用程序的所有数据最终都将放在同一个地方？在这种情况下，避免不合适的数据产生不需要的结果的最佳实践是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-16T13:47:48.647

无模式并不意味着无结构：

*   在弹性搜索中，您可以将数据组织到文档集合中
*   一个顶级文档集合大致相当于一个数据库
*   您还可以在顶级集合中分层创建新的文档集合，这是一个非常粗略的数据库表等价物
*   当您搜索文档时，您在特定文档集合中搜索文档（例如搜索 blog1 中的所有帖子）
*   单个文档可以被视为等同于数据库表中的行
*   另请注意，我说的大致等价——SQL 中的数据通常通过关系规范化为表，而文档（在 ES 中）通常包含大型数据实体。例如，将所有评论嵌入到博客文章文档中通常是有意义的，而在 SQL 中，您可以将评论和博客文章规范化到单独的表中。

对于一个不错的教程，我建议看一下[“ElasticSearch in 5 minutes”](http://www.elasticsearchtutorial.com/elasticsearch-in-5-minutes.html)教程。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-16T13:52:15.823

从 SQL 切换到搜索引擎有时可能具有挑战性。Elasticsearch 有一个索引的概念，可以粗略地映射到数据库和类型，也可以非常粗略地映射到表。Elasticsearch 具有非常强大的机制，可以选择单一类型的记录（行）并组合来自不同类型和索引（联合）的结果。但是，目前不支持联接。elasticsearch 支持的唯一关系是 has_child，但它不适合建模多对多关系。因此，在大多数情况下，您需要准备好对数据进行非规范化，以便将其存储在单个表中。

# clickonce - ClickOnce 证书不再有效，但未过期

> ID：12915925
> 
> 赞同：3
> 
> 时间：2012-10-16T13:36:21.993
> 
> 标签：clickonce, signing, pfx

几年来，我一直在使用相同的系统从 VS.NET 2008/2010 命令提示符创建长期证书。但是，截至今天早上（可能更早），我所有的发布尝试都失败了。

多年来，我一直在使用（*基本上*）这个批处理文件来生成 PFX 文件：

```
@echo PFX key creation utility: Usage:
@echo CreatePFX.bat [key name]
@echo THIS MUST BE RUN FROM A VS.NET 2010 COMMAND PROMPT
makecert.exe -sv %1.pvk -n "CN=MY KEY" %1.cer
pvk2pfx.exe -pvk %1.pvk -spc %1.cer -pfx %1.pfx
del %1.pvk
del %1.cer 
```

这些证书直到 2039 年才过期。它们已经工作了多年，但是当我单击“发布”并出现错误时突然失败：

> 签名时出错：无法签名 bin\Debug\app.publish\setup.exe。SignTool 错误：签名者的证书对签名无效。SignTool 错误：尝试签名时出错：bin\Debug\app.publish\setup.exe

此错误通常归因于过期的密钥，此处并非如此。有没有其他人看到使用本地创建的活动 PFX 密钥发生这种情况？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T13:41:01.383

哇---看起来我不是第一个看到这个的人：

我有完全相同的经历......添加“-r”开关可以解决问题，但我不确定为什么它只是因为一个问题。

[使用 makecer/pvk2pfx 时，ClickOnce 签名者的证书对签名无效](https://stackoverflow.com/questions/12844868/clickonce-signers-certificate-not-valid-for-signing-when-using-makecer-pvk2pfx)

# jquery - Zencoder 状态 URL

> ID：12915926
> 
> 赞同：0
> 
> 时间：2012-10-16T13:36:26.577
> 
> 标签：jquery, json, zencoder

我正在使用 zencoder 编写视频转换应用程序。我的转换部分设置得很好，但我很难理解如何在处理输出时查看输出的状态。输出的状态存储在此 URL 中：

[https://app.zencoder.com/api/v2/outputs/](https://app.zencoder.com/api/v2/outputs/) + jobID + /progress.json?api_key=mysecretcode

但为了动态访问它，您必须检索 jobID。现在在我看来，它是 zencoder 分配给输出的唯一随机数。有谁知道我在php中创建工作后如何获得jobID？任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-16T18:36:31.233

当您提交作业创建请求时，您将收到来自 Zencoder 的响应，其中包括作业 ID 以及任何输出的 ID。如果您使用的是[Zencoder PHP 库](https://github.com/zencoder/zencoder-php)，请查看 README 中的示例，特别是：

```
echo "Job ID: ".$encoding_job->id."\n"; 
```

该作业 ID 是您需要回电以取得进展的 ID。

# asp.net-mvc-3 - 允许管理员通过 Windows Live Writer 和/或 Word 发布 html

> ID：12915932
> 
> 赞同：1
> 
> 时间：2012-10-16T13:36:42.197
> 
> 标签：asp.net-mvc-3, publish, windows-live-writer

目前，我有一个所见即所得的编辑器，供管理员在 MVC3 网站上发布 HTML 页面（使用表单身份验证。）但是我看到了[这个视频](http://www.youtube.com/watch?feature=player_detailpage&v=c7uLIuMOc_c#t=287s)（大约 4 分 45 秒，如果它没有带你去那里），一个人可以通过单击 Windows Live Writer 上的发布按钮（可能还有 Word，但我不必确认或玩弄；）来发布到 MVC3 站点，并且所有内容都很容易发布。

我查看了这些程序的这个很酷的功能，但无法在 MVC3 网站上找到有关如何实现它的任何信息。我看到了一些关于如何将它与 Blogger 或 WordPress 一起使用的信息，但没有看到 MVC（我的 Windows 系统上没有 Live Writer 或 Word，这无济于事。）

所以我问是否有人知道如何做到这一点，你能给我指一个关于这个 Windows 编辑器功能以及如何在 MVC3 程序中使用它的教程吗？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T14:54:25.713

给你，由 Scott Hanselman 提供。

[http://www.hanselman.com/blog/TheWeeklySourceCode55NotABlogALocalXMLRPCMetaWebLogEndpointThatLiesToWindowsLiveWriter.aspx](http://www.hanselman.com/blog/TheWeeklySourceCode55NotABlogALocalXMLRPCMetaWebLogEndpointThatLiesToWindowsLiveWriter.aspx)

# xml - xml到oracle数据库

> ID：12915933
> 
> 赞同：0
> 
> 时间：2012-10-16T13:36:42.770
> 
> 标签：xml, database, oracle

我必须将 xml 文件导入 oracle 数据库，但该文件具有以下结构：

任务：

1.  解析给定的 XML 文件并将其导入 Oracle 数据库
2.  基于 XML 结构创建数据库

xml文件：

```
 <root>
    <customers>
     <customer id=1>e-mag</customer>
     <customer id=2>Eurofigher</customer>
    </customers>
    <customer_invoices>
     <invoice id=1>
      <customer_id>1</customer_id>
      <items>
       <item id=1 unit_value=10 tva=21 units=5>Laptop</item>
       <item id=2 unit_value=20 tva=21 units=3>Monitors</item>
      </items>
     </invoice> 
    </customer_invoices>
  </root> 
```

最好的方法是什么？请帮我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T13:43:42.897

如果要以关系结构导入它们。首先将其加载到 XMLTYPE 列中

```
DROP TABLE XMLTEST;

CREATE TABLE XMLTEST
(   XML_COL XMLTYPE);

DECLARE
  poXML CLOB; 
BEGIN   
  -- Store the Purchase Order XML in the CLOB variable
  poXML := '<?xml version="1.0"?>
<rooms>
    <room room_id="1">
        <alt_id>88</alt_id>
        <display_naam>01 West 430</display_naam>
        <alt_db>eXpress_BK</alt_db>
    </room>
    <room room_id="2">
        <alt_id>170</alt_id>
        <display_naam>02 Midden 010</display_naam>
        <alt_db>eXpress_BK</alt_db>
    </room>
    <room room_id="3">
        <alt_id>173</alt_id>
        <display_naam>02 Midden 110</display_naam>
        <alt_db>eXpress_BK</alt_db>
    </room>
    <room room_id="4">
        <sil_id>F491B0A119DABE76B2F6B2C0A3E902F6</sil_id>
        <alt_id>183</alt_id>
        <display_naam>02 Oost 010</display_naam>
        <alt_db>eXpress_BK</alt_db>
    </room>
    <room room_id="5">
        <alt_id>172</alt_id>
        <display_naam>02 Oost 300</display_naam>
        <alt_db>eXpress_BK</alt_db>
    </room>
  .
  .
  .
    <room room_id="126">
        <sil_id>F491B0A119DABE76B2F6B2C0A3E901E3</sil_id>
        <alt_id>129</alt_id>
        <display_naam>HB.02.140</display_naam>
        <alt_db>eXpress_EWI</alt_db>
    </room>
</rooms>';

  INSERT INTO xmltest (xml_col) VALUES (XMLTYPE(poXML));

END; 
```

然后根据 XML 结构创建一个表

```
drop table rooms;
create table rooms as 
select xt.room_id
,      xt.alt_id
,      xt.sil_id
,      xt.alt_db
,      xt.display_naam
from xmltest xts
,    XMLTable('rooms/room' PASSING xts.xml_col 
                   columns room_id INTEGER PATH '@room_id'
                             ,alt_id INTEGER PATH 'alt_id'
                             ,sil_id VARCHAR2(100) PATH 'sil_id'
                             ,display_naam VARCHAR2(100)PATH 'display_naam'
                             ,alt_db VARCHAR2(100)PATH 'alt_db') xt; 
```

我认为您将不得不创建三个创建表语句。一种用于客户，一种用于customer_invoices，另一种用于cursomer_invoice_items，因为它们显然不适合一张关系表。

# sql - SQL中按月求和

> ID：12915934
> 
> 赞同：-1
> 
> 时间：2012-10-16T13:36:43.990
> 
> 标签：sql

我正在尝试按月汇总我的每日数据 (trunc(DM_OWNER.LD_LEG_DW.CPLD_DTT)。这是在 Web Intelligence BI 报告中创建的。

```
SELECT
  DM_OWNER.LD_LEG_DW.LGST_GRP_CD,
  DM_OWNER.LGST_GRP_T.LGSTGRP_DESC,
  DM_OWNER.LD_LEG_DW.CARR_CD,
  DM_OWNER.LD_LEG_DW.LD_LEG_ID,
  DM_OWNER.LD_LEG_DW.BILL_TO_CUST_CD,
  trunc(DM_OWNER.LD_LEG_DW.CPLD_DTT),
  trunc(DM_OWNER.VCHR_AP_T.CRTD_DTT),
  AP_Detail.PYMNT_AMT_DLR
FROM
  DM_OWNER.LD_LEG_DW,
  DM_OWNER.LGST_GRP_T,
  DM_OWNER.VCHR_AP_T,
  DM_OWNER.CHRG_DETL_T_NOTOTAL_V  AP_Detail
WHERE
  ( DM_OWNER.LD_LEG_DW.LD_LEG_ID=DM_OWNER.VCHR_AP_T.LD_LEG_ID(+)  )
  AND  ( DM_OWNER.VCHR_AP_T.VCHR_NUM=AP_Detail.VCHR_NUM_AP  )
  AND  ( DM_OWNER.LD_LEG_DW.LGST_GRP_CD=DM_OWNER.LGST_GRP_T.LGST_GRP_CD  )
  AND  
  (
   DM_OWNER.LD_LEG_DW.LGST_GRP_CD  In  ( 'PBRK'  )
   AND
   trunc(DM_OWNER.VCHR_AP_T.CRTD_DTT)  >=  '01-10-2012 00:00:00'
  ) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T13:40:57.560

没有明确的字段名称，或者对数据结构的解释，这太模糊了。但原理是

```
select 
     displayfields,
     year(datefield), month(datefield), 
     sum(valuefield)
from yourtable
group by 
     displayfields,
     year(datefield), month(datefield), 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T13:48:11.653

在不涉及查询的细节的情况下，这是一种通用方法。

CAST 很讨厌，但这样做的好处是给你一个实际的 DATETIME 作为石斑鱼。

```
SELECT
   SUM(Amount) AS MonthTotal,
   CAST(CAST(YEAR(DateCollected) AS VARCHAR(4)) 
     + '/' + CAST(MONTH(DateCollected) AS VARCHAR(2)) 
     + '/01' AS DATETIME) AS PaymentMonth
FROM
   PaymentsReceived
GROUP BY
   CAST(CAST(YEAR(DateCollected) AS VARCHAR(4)) 
     + '/' + CAST(MONTH(DateCollected) AS VARCHAR(2)) + '/01' AS DATETIME) 
```

# charts - Javafx - 旋转节点以在手持设备上以横向/纵向显示

> ID：12915935
> 
> 赞同：1
> 
> 时间：2012-10-16T13:36:54.533
> 
> 标签：charts, tableview, javafx-2, javafx, landscape

我正在开发的 javafx 应用程序最终将在分辨率为 800x480 的手持设备上运行。应用程序通常以纵向模式运行，但对于某些功能（例如显示图表和表格），它需要切换到横向模式以更好地显示数据。

我的问题是，是否有一种直接的方式来操作旋转 90 度倍数的节点？

我可以通过调用 setRotate() 来旋转表格，尽管这会引入几个新问题：

要在旋转时调整列宽，用户必须从左到右拖动列分隔符（与标题行正交），表格仍将其宽度/高度扩展到其父级的大小，尽管这不起作用旋转 -90 度（或 90 的其他倍数）时。

另一个约束是图表内容包含在 BorderPane 的中心，BorderPane 的顶部和底部包含工具栏，这会阻止整个场景的旋转。

这是我的SSCCE；如果下面的代码有任何问题，请纠正我。

```
 import javafx.application.Application;
    import javafx.event.ActionEvent;
    import javafx.event.EventHandler;
    import javafx.scene.Scene;
    import javafx.scene.control.Button;
    import javafx.scene.control.TableColumn;
    import javafx.scene.control.TableView;
    import javafx.scene.layout.BorderPane;
    import javafx.scene.layout.Pane;
    import javafx.scene.layout.VBox;
    import javafx.stage.Stage;

    public class TablePanelTrial extends Application {

        BorderPane root = new BorderPane();
        private boolean isRotated=false;

        public static void main(String[] args) {
            launch(args);
        }

        @Override
        public void start(final Stage primaryStage) {
            primaryStage.setTitle("Table Panel Trial");

            final TablePanel tp = new TablePanel();

            Button btnRotate = new Button("Rotate");
            btnRotate.setOnAction(new EventHandler() {
                @Override
                public void handle(ActionEvent event) { 
                    double r = -90;        
                    if(isRotated){
                        r=0;
                        isRotated = !isRotated;
                    }
                    else{
                        r=-90;
                        tp.tv.setMinHeight(200);
                        isRotated = !isRotated;
                    }
                    tp.rotate(r);
                }
            });        

            root.setTop(btnRotate);
            root.setCenter(tp.getVB());
            primaryStage.setScene(new Scene(root, 480, 800));
            primaryStage.show();
        }  

        class TablePanel{
            private VBox vbox = new VBox();
            private TableView tv = new TableView();
            private String[] labelVal = {"Column 1", "Element", "Difference", "File Name", "Report Number"};

            public TablePanel(){
                TableColumn column1 = new TableColumn(labelVal[0]);
                TableColumn column2 = new TableColumn(labelVal[1]);
                TableColumn column3 = new TableColumn(labelVal[2]);
                TableColumn column4 = new TableColumn(labelVal[3]);
                TableColumn column5 = new TableColumn(labelVal[4]);
                tv.getColumns().addAll(column1, column2, column3, column4,column5);
                vbox.getChildren().add(tv);
                tv.setPrefHeight(2000);
            }

            public Pane getVB(){
                return vbox;
            }

            public void rotate(double r){
                vbox.setRotate(r);
            }
        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-06-17T10:34:35.470

我认为，当设备进入横向模式时，Android 不会执行旋转功能。必须重新绘制布局才能显示它。使用 JavaFX，您可以做的是在场景中添加一个侦听器以侦听宽度的变化，因为这基本上是发生的。您很可能可以这样做：

```
 scene.widthProperty().addListener((observable, oldValue, newValue) -> {
         ....initialize the changes to layout here....
    );
});
```

可能不是最好的解决方案，但我猜它的东西。

# svn - 将 svn 模块安装到 Apache 后 wamp 服务器无法正常工作

> ID：12915939
> 
> 赞同：0
> 
> 时间：2012-10-16T13:37:05.923
> 
> 标签：svn, wampserver

我用 Apache 2.0.63 和 Php 5.2.9 和 mysql 5.1.33 版本安装了 wamp 服务器。我的 svn 服务器是[usvn](https://github.com/usvn/usvn)。wamp full-fill 的[usvn 要求](https://github.com/usvn/usvn)。正如其[Wiki](https://github.com/usvn/usvn/wiki/Installation)对我所说，我安装了除“mod_authz_svn.so”和“mod_dav_svn.so”之外的所有模块。在安装这个所有模块之前，我重新启动了我的 Wamp 服务器，并对本地主机进行了良好的 PING。但是在安装“mod_authz_svn.so”和“mod_dav_svn.so”模块后，我无法启动我的 wamp 服务器。

在观看 Error - Logs Of APACHE, PHP, MYSQL 之后，我在 Mysql 的日志中出现错误。它说我那个**主机是空的，所以它把默认主机作为 0.0.0.0，所以 Failed to start**。

如果您看起来有什么问题，请帮助我。

谢谢阅读...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T09:50:32.380

我使用的是旧版本的 Apache，而我的“mod_authz_svn.so”和“mod_dav_svn.so”模块是用新版本的 Apache 编译的，所以我的 Apache 服务没有成功启动。在阅读了 subversion 的文档后，我知道了，这两个模块都是用新版本的 Apache 编译的，然后我用最新的版本更改了 Apache 服务并获得成功。

感谢您阅读我的问题。

# sql-server-2008 - AppHarbor 共享 SQL 空间分配错误

> ID：12915940
> 
> 赞同：0
> 
> 时间：2012-10-16T13:37:06.953
> 
> 标签：sql-server-2008, appharbor

我们正在使用 10GB 存储空间的“纳米”计划下运行共享 SQL Server 插件。

我们还没有接近我们的存储限制，但是在写入数据库时​​我们间歇性地遇到这个 SQL 错误：

> 无法为对象 'dbo. *MyTable* ' 在数据库 ' *MyDatabaseId* ' 中，因为 'PRIMARY' 文件组已满。通过删除不需要的文件、删除文件组中的对象、向文件组添加其他文件或为文件组中的现有文件设置自动增长来创建磁盘空间。

问题似乎是因为我们在任何给定时间都没有足够的未使用空间来存储我们正在写入的表。这是`sp_spaceused`每个表的输出：

```
name             rows      reserved    data        index_size   unused
---------------- --------- ----------- ----------- ------------ ------
MyTable1         382862    177608 KB   177536 KB   8 KB         64 KB
---------------- --------- ----------- ----------- ------------ ------
MyTable2         137091    34248 KB    34240 KB    8 KB         0 KB
---------------- --------- ----------- ----------- ------------ ------ 
```

编辑：进一步检查显示物理 .mdf 文件的 Auto-Grow 设置为 1024KB，我们是否应该期望看到更大比例的未使用表空间？

这会阻止我们创建索引，更糟糕的是还会导致我们丢失数据。有没有办法增加我们的分配或采取其他方法？请指教。

# jaxb - JAXB 可以处理多个“根”元素吗？

> ID：12915968
> 
> 赞同：5
> 
> 时间：2012-10-16T13:38:29.360
> 
> 标签：jaxb

我有一个类似于以下的模式......

```
<?xml version="1.0" encoding="UTF-8"?>
<xs:schema xmlns:xs="http://www.w3.org/2001/XMLSchema">
    <xs:element name="t1" type="t1Type"/>
    <xs:element name="t2" type="t2Type"/>
    <xs:element name="t3" type="t3Type"/>
</xs:schema> 
```

起初我认为这是一个无效的模式，但我在网上做的所有检查都验证了它。这意味着提供 XML 的人可以发送任何（或所有）列出的类型，并且仍然符合模式。

如何使用 JAXB 映射和解组所有不同的可能性？

我不知道我会收到哪一个。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-16T13:59:41.730

您将需要利用带有`@XmlRegistry`（通常称为`ObjectFactory`）注释的工厂类。该类将为`create`每个可能的根元素都包含一个方法，并用`@XmlElementDecl`. 有关更多详细信息和示例，请参阅我写的这篇[文章。](http://blog.bdoughan.com/2012/07/jaxb-and-root-elements.html)

# javascript - 调整大小时链接变为空白

> ID：12915969
> 
> 赞同：0
> 
> 时间：2012-10-16T13:38:30.027
> 
> 标签：javascript, html, css, ipad, wordpress

出于某种原因，当我在 Windows（不是 mac）上缩小浏览器屏幕（chrome）或在 ipad 上旋转时，链接颜色从黑底白字变为白底白字。悬停效果仍然有效，但链接完全消失了。

见这里：[http ://www.keganquimby.com/pf/](http://www.keganquimby.com/pf/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-16T13:43:10.437

你有这个规则：

```
@media screen and (max-width: 1023px) and (min-width: 768px) {
    #main-nav ul li a {
        color: #fff;
    }
} 
```

在 style.css 的第 4798 行，我猜这是原因。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-16T13:43:08.977

这是你的问题

```
@media screen and (max-width: 1023px) and (min-width: 768px)
#main-nav ul li a {
    color: white;
} 
```

您已将链接颜色设置为白色，更改它即可

# websphere - JSR-160 对安全 WebSphere AppServer 的访问

> ID：12915971
> 
> 赞同：1
> 
> 时间：2012-10-16T13:38:35.113
> 
> 标签：websphere, jmx, jsr160

我正在尝试使用 JSR-160 类访问启用了安全性的 WebSphere 7 AppServer。如果我定义指向各种 WebSphere lib 目录的 java.ext.dirs 系统属性，我可以获得与以下内容的连接：

```
Hashtable env = new Hashtable();
env.put("java.naming.factory.initial", "com.ibm.websphere.naming.WsnInitialContextFactory");
env.put("java.naming.provider.url", "corbaloc:iiop:myhost:2809/WsnAdminNameService");
env.put("jmx.remote.credentials", new String[] { "admin", "password" });
JMXConnector connector = JMXConnectorFactory.connect(new JMXServiceURL("service:jmx:rmi:///jndi/JMXConnector"), env); 
```

但是，一旦我访问`stats`MBean 上的属性之类的东西，就会收到以下错误：

```
javax.management.JMRuntimeException:
        >> SERVER (id=4773e3aa, host=myhost) TRACE START:
        >>    javax.management.JMRuntimeException: ADMN0022E: Access is denied for the getStats operation on J2CResourceAdapter MBean because of insufficient or empty credentials. 
```

在过去的两天里，我用谷歌搜索了我能想象到的各种解决方案，但没有任何效果。

实际上是否可以通过 JSR-160 在安全的 WebSphere AppServer 中查询 MBean 属性？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T08:41:52.040

使用 JSR-160 连接到不安全的 WebSphere 实例非常简单。正如您所注意到的，当连接到安全实例时，事情会变得更加复杂。您需要在类路径中有正确的库，还需要设置一些配置文件（`sas.client.props`和`ssl.client.props`）。就个人而言，我可以在我的计算机上进行配置，但是当一位同事要求我在他的计算机上进行设置时，我们无法使其正常工作。

如果您想避免这些麻烦，并且您的唯一要求是使用标准 JMX API（但您不关心底层协议），那么您可以使用以下文档中描述的方法：

[http://code.google.com/p/xm4was/wiki/JmxClientConnector](http://code.google.com/p/xm4was/wiki/JmxClientConnector)

# c# - 不被数字或字母数字包围的图案

> ID：12915976
> 
> 赞同：0
> 
> 时间：2012-10-16T13:38:44.860
> 
> 标签：c#, regex

我想找到一些没有被任何数字或字母数字包围或什么都没有包围的单词。所以如果我正在寻找 Foo123 我想要这个结果

```
="Foo123"; =>TRUE
barFoo123; =>FALSE
Foo123 =>TRUE
BarBar123Foo123Bar; =>FALSE
;Foo123 =>TRUE 
```

我刚刚构建了这个表达式：

```
(^[^0-9a-zA-Z]?)WORDTOFIND([^0-9a-zA-Z]?$) 
```

我很确定我的方法是正确的，但是当我像这样使用它时：

```
if (Regex.IsMatch(line, string.Format(@"(^[^0-9a-zA-Z]?){0}([^0-9a-zA-Z]?$)",snCode)) )
{   
} 
```

它不起作用。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-16T13:41:33.057

你本质上是在寻找

```
 (?<![a-zA-Z0-9])Foo123(?![a-zA-Z0-9]) 
```

这使用前瞻和后瞻来确保 before 或 after 没有字母数字字符`Foo123`。不过，这假定为 ASCII。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T14:32:19.397

以下匹配您不想要的字符串`!Regex.IsMatch()`

```
(^([0-9a-zA-Z])+{0}.*)|(.*{0}([0-9a-zA-Z])+) 
```

# python - 多线程和 ZMQ DEALER/REP hello world 不起作用

> ID：12915982
> 
> 赞同：1
> 
> 时间：2012-10-16T13:38:54.570
> 
> 标签：python, zeromq, pyzmq

首先是我的代码（很大程度上来自 ZMQ 文档[http://zguide.zeromq.org/py:mtserver](http://zguide.zeromq.org/py:mtserver)）：

```
import zmq
import time
import sys
import threading

#SOCKET_NAME = "tcp://127.0.0.1:8000"
SOCKET_NAME = "inproc://mysocket"

def dealerRoutine(context):
    socket = context.socket(zmq.DEALER)
    socket.bind(SOCKET_NAME)
    time.sleep(12)
    socket.send("hello")
    socket.send("hello")
    print socket.recv()
    print socket.recv()
    socket.close()

def workerRoutine(context):
    socket = context.socket(zmq.REP)
    socket.connect(SOCKET_NAME)
    s = socket.recv()
    print s
    socket.send("world")

context = zmq.Context()

workers = []
for i in range(0, 2):
    worker = threading.Thread(target=workerRoutine, args=([context]))
    workers.append(worker) 
    worker.start()

dealerRoutine(context)

for worker in workers:
    worker.terminated = True

context.term() 
```

我已经用 inproc 和 tcp 套接字尝试了这段代码。

*   当工作人员尝试连接时，inproc 会出错
*   TCP 只是在经销商发送后等待，工人没有打印，经销商没有收到其他消息
*   我已经想到了慢连接器问题并添加了一个睡眠（一个在工人连接之前，一个在经销商的 send() 之前）：这只会导致 inproc 的行为与 TCP 相同。

PS：我很抱歉camelCase，但我对它上瘾了。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-16T20:59:25.330

我通过以下方式使其工作：

*   对于经销商，多部分发送您的消息，第一部分是空消息，第二部分是您的消息
*   减少了计时器（虽然那个没有帮助）

这是代码：

```
import zmq
import time
import sys
import threading

SOCKET_NAME = "tcp://127.0.0.1:8000"
#SOCKET_NAME = "inproc://mysocket"

def dealerRoutine(context):
    socket = context.socket(zmq.DEALER)
    socket.bind(SOCKET_NAME)
    time.sleep(1)
    socket.send("", zmq.SNDMORE)
    socket.send("hello")
    socket.send("", zmq.SNDMORE)
    socket.send("hello")
    print socket.recv()
    print socket.recv()
    socket.close()

def workerRoutine(context):
    socket = context.socket(zmq.REP)
    socket.connect(SOCKET_NAME)
    s = socket.recv()
    print s
    socket.send("world")

context = zmq.Context()

workers = []
for i in range(0, 2):
    worker = threading.Thread(target=workerRoutine, args=([context]))
    workers.append(worker) 
    worker.start()

dealerRoutine(context)

for worker in workers:
    worker.terminated = True

context.term() 
```

# core-plot - 找不到 CPTNativeEvent 类

> ID：12915984
> 
> 赞同：0
> 
> 时间：2012-10-16T13:39:07.253
> 
> 标签：core-plot

我更新了我的项目以使用 core plot 1.0 plot，但我找不到 CPTNativeEvent 类。

```
-(void)barPlot:(CPTBarPlot *)plot barWasSelectedAtRecordIndex:(NSUInteger)index withEvent:(CPTNativeEvent *)event; 
```

[如果我在http://code.google.com/p/core-plot/source/browse/](http://code.google.com/p/core-plot/source/browse/)中搜索 CPTNativeEvent ，则该类就在那里。

但是，如果我在我的 CorePlot-CocoaTouch.xcodeproj 中搜索它，它就不存在。

[我从http://code.google.com/p/core-plot/downloads/list](http://code.google.com/p/core-plot/downloads/list)下载了 core plot 1.0

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T01:13:22.187

这是一个简单的 typedef。它相当于`UIEvent`在 iOS 和`NSEvent`Mac 上。它在**CPTPlatformSpecificDefines.h**中定义，在 Xcode 项目的“仅限 iPhone”文件夹中可见。

# jquery - 过滤 JQuery 数据表后检索行数据

> ID：12915988
> 
> 赞同：16
> 
> 时间：2012-10-16T13:39:23.113
> 
> 标签：jquery, jquery-datatables

看起来应该很容易，但是...

有谁知道如何从过滤的数据表中返回当前行？该`oTable.fnGetNodes()`方法返回*所有*行，我只想要过滤（可见，但包括分页）的行

```
// filter on division
var oTable = $('#summary-table').dataTable();
oTable.fnFilter(division_text, 2, true);

// Get the nodes from the table  
var nNodes = oTable.fnGetNodes(); // <-- still retrieves original list of rows 
```

我检查了：[从数据表中检索可见数据，](https://stackoverflow.com/questions/11513858/retrieving-visible-data-from-datatables)但那里没有太多帮助。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2015-04-29T17:27:00.503

从 Datatables 1.10 开始，有一种内置方法可以在搜索后获取过滤或未过滤的行。

```
var table = $('#example').DataTable();
table.rows( {search:'applied'} ).nodes();
table.rows( {search:'removed'} ).nodes(); 
```

还有其他选项可以仅获取当前页面或所有页面以及订单。更多细节在这里： [http ://datatables.net/reference/type/selector-modifier](http://datatables.net/reference/type/selector-modifier)

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2013-09-03T20:23:38.650

最简单的方法实际上是内置在[DataTables API](http://datatables.net/api)中：

```
_('tr', {"filter": "applied"}) 
```

在函数中使用：

```
function get_filtered_datatable() {
    var filteredrows = $("#mydatatable").dataTable()._('tr', {"filter": "applied"});

    for ( var i = 0; i < filteredrows.length; i++ ) {
        debug.console(filteredrows[i]);
    };
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-12-22T17:37:09.167

如果您尝试获取实际的 tr DOM 元素而不是数据，则该解决方案类似于上面提供的下划线解决方案，但您使用 $ 方法代替。

```
function getFilteredDatatable() {
    return $("table.dataTable").dataTable().$('tr', { "filter": "applied" });
} 
```

API 文档页面上提供了更多信息。[http://datatables.net/api](http://datatables.net/api)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-07-30T14:12:36.103

迟到总比没有好，但我自己也在为此苦苦挣扎。这是我想出的

```
$.fn.dataTableExt.oApi.fnGetVisibleData = function(){
    displayed = [];
    currentlyDisplayed = this.fnSettings().aiDisplay; //gets displayed rows by their int identifier
    for (index in currentlyDisplayed){
        displayed.push( this.fnGetData( currentlyDisplayed[index] ));
    }
    return displayed;

} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-16T14:43:04.813

想出答案，如果有人需要这个：

首先，使用这个数据表扩展来获取所有隐藏的行：

```
$.fn.dataTableExt.oApi.fnGetHiddenTrNodes = function (oSettings, arg1, arg2) {

/* Note the use of a DataTables 'private' function thought the 'oApi' object */

var anNodes = this.oApi._fnGetTrNodes(oSettings);
var anDisplay = $('tbody tr', oSettings.nTable);

/* Remove nodes which are being displayed */
for (var i = 0; i < anDisplay.length; i++) {
    var iIndex = jQuery.inArray(anDisplay[i], anNodes);

    if (iIndex != -1) {
        anNodes.splice(iIndex, 1);
    }
}

/* Fire back the array to the caller */
return anNodes;
} 
```

然后过滤掉隐藏节点，只得到可见节点：

```
 var rows = oTable.fnGetNodes(); // get all nodes            
 var rows_hidden = oTable.fnGetHiddenTrNodes(); // get all hidden nodes

 var result = [], found;

 // remove hidden nodes from all nodes
 for (var i = 0; i < rows.length; i++) {
  found = false;
    for (var j = 0; j < rows_hidden.length; j++) {
      if (rows[i] == rows_hidden[j]) {
        found = true;
          break;
                }
            }
            if (!found) {
                result.push(rows[i]); 
            }
    } 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2020-01-27T12:55:42.790

感谢 AlecBoutin，这是最简单的方法。
我正在尝试搜索以选项卡排列的多个表，并且我想显示找到结果的表。您的解决方案非常简单

```
 // make the global search input search into all tables (thanks to a class selector)
    $('#oversearch').on( 'keyup', function () {
        $('.table').DataTable().search( this.value ).draw();

        var row = $('.table').DataTable().$('tr', { "filter": "applied" });
        console.log(row.parents("div")[1]);
    }); 
```

然后，您可以使用 parents() jquery 导航到您需要的任何父级。（这里我选择遇到的第二个 div 父级）

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-06-19T04:32:48.930

您可以获得更改 fnGetHiddenTrNodes 函数的可见行列表，如下所示。

```
 $.fn.dataTableExt.oApi.fnGetVisibleTrNodes = function (oSettings, arg1, arg2) {

            /* Note the use of a DataTables 'private' function thought the 'oApi' object */

            var anNodes = this.oApi._fnGetTrNodes(oSettings);
            var anDisplay = $('tbody tr', oSettings.nTable);
            var visibleNodes = [];

            for (var i = 0; i < anDisplay.length; i++) {
                var iIndex = jQuery.inArray(anDisplay[i], anNodes);

                if (iIndex != -1) {
                    visibleNodes.push(anDisplay[i]);
                }
            }

            /* Fire back the array to the caller */
            return visibleNodes;
        } 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2015-03-13T12:56:25.523

设置表格对我有用

```
$(document).ready(function() {
    var myDataTableHandle = $('#example').dataTable({"bPaginate": false});

   $('#selectAllCheckBox').click(function() {
       if($(this).is(':checked')){ 
          var filteredRows  =   myDataTableHandle._('tr', {"filter":"applied"});
          alert( filteredRows.length +' nodes were returned' );     
          $(myDataTableHandle.fnGetNodes()).find($('input[name=idCheckBox]')).each(function () {
              $(this).prop('checked', true);
           });
        else{ 
          $('input[name=idCheckBox]:checked').prop('checked', false);
         } 
      });
}); 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2021-03-29T03:27:17.450

我曾经在 1.10.x 版本中使用 Datatable

```
var table = $('#example').DataTable();
var filtered_data = table.rows( {search:'applied'} ).data();
var removed_data = table.rows( {search:'removed'} ).data(); 
```

检查示例[Codepen](https://codepen.io/Bossken26/pen/MWJeZMW?editors=1111)

# python - 烧瓶会话不持久

> ID：12915989
> 
> 赞同：2
> 
> 时间：2012-10-16T13:39:25.967
> 
> 标签：python, ajax, session, flask

我有一个在 Flask 后端运行的 Web 应用程序，其中一个 JS 客户端处理前端工作。`flask.session`我在尝试通过简单的 Flask API将键值对保存到 Flask 的会话对象 () 时遇到问题。

我试图修改的会话对象被调用`account_id`，两个 API 路由基本上如下所示：

**得到**

```
@access_service.route('/current_account.json', methods=['GET'])
@login_required
def show_current_account():
    return jsonify(account_id=session.get('account_id')) 
```

**邮政**

```
@access_service.route('/current_account.json', methods=['POST'])
@login_required
def update_current_account():
if request.json:
    session['account_id'] = request.json['account_id']
    return jsonify(account_id=session.get('account_id'))
return jsonify() 
```

在 JS 前端中，对 POST 路由的调用如下：

```
$.ajax({
  url: '/current_account.json',
  contentType: 'application/json',
  type: 'POST',
  data: JSON.stringify({ 'account_id': 10 })
}); 
```

看起来确实可以正常工作，ajax 调用返回 200 OK 和正确的返回值。来自 Flask 应用程序的日志还显示会话现在包含值为 10 的键。但是，在发出 POST 请求后立即`account_id`查找只会返回一个带值的值。`/current_account.json``account_id``null`

更奇怪的是，使用简单的浏览器内 REST 客户端并发出相同的 POST 请求以`current_account.json`使会话通过整页刷新等按预期工作和持续存在。既然是这样，它让我相信问题与请求本身有关，而不是与 Flask 的会话对象有关，尽管我似乎无法弄清楚究竟是什么导致了它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-01-22T05:59:47.863

在我之前的项目中，我们遇到了同样的问题，结果表明 $.ajax 不携带 cookie。我们使用手动会话存储来解决问题。

# sql - 加入具有多个匹配项的表，但只带回指定的匹配项

> ID：12915993
> 
> 赞同：4
> 
> 时间：2012-10-16T13:39:45.767
> 
> 标签：sql, sql-server-2008, tsql

我有 3 张桌子。
表 A 包含我的查询将基于的数据。它包含 id1。表 B 是我的连接表，它包含我关心的 2 列：id1 和 id2。

表 C 是我的查找表，它包含 id2 和 ReasonName。我需要“原因名称”列和表 A 中的所有数据。

如果我执行以下 SQL：

```
 SELECT NAME, 
       STARTDATE, 
       ENDDATE, 
       REASON, 
       ID1 
FROM   TABLEA 
       LEFT JOIN TABLEB 
              ON TABLEA.ID1 = TABLEB.ID1 
```

然后我可以对 TableC 进行第二次连接，但这就是问题所在。TableC 中有多个匹配项，因此我的总行数增加了。我需要避免这种情况。请参阅图片了解 TableC 的外观：

![在此处输入图像描述](../Images/407e5e69d4c54c9c1517865eb522c7b9.png)

如果我的 SQL 语句现在看起来像这样：

```
 SELECT TABLEA.NAME, 
       TABLEA.STARTDATE, 
       TABLEA.ENDDATE, 
       TABLEA.REASON, 
       TABLEA.ID1, 
       TABLEC.REASONNAME 
FROM   TABLEA 
       LEFT JOIN TABLEB 
              ON TABLEA.ID1 = TABLEB.ID1 
       LEFT JOIN TABLEC 
              ON TABLEB.ID2 = TABLEC.ID2 
```

然后我的行增加了大约 1000。这是因为 TableA.id1 很可能与 TableC 中找到的多个 id2 匹配。然后它复制除了不同的 TableC.ReasonName 之外的行。

在 TableC 中有一个我关心的 ReasonName。对于这个例子，我会说它是'reasonf'。

我需要的是通过 TableC 中的 ReasonName，但只有那些包含 reasonf 的，其余的我想说 NULL 或用“No Reason”进行 COALESCE。我尝试将 WHERE 子句放入语句中。请参阅 SQL：

```
 SELECT TABLEA.NAME, 
       TABLEA.STARTDATE, 
       TABLEA.ENDDATE, 
       TABLEA.REASON, 
       TABLEA.ID1, 
       TABLEC.REASONNAME 
FROM   TABLEA 
       LEFT JOIN TABLEB 
              ON TABLEA.ID1 = TABLEB.ID1 
       LEFT JOIN TABLEC 
              ON TABLEB.ID2 = TABLEC.ID2 
WHERE  TABLEC.ID2 = 'asd1f5as98a4' 
```

但是它只会带来那些与'reasonf'匹配的记录，我希望它显示reasonf人并忽略其余的（保留为null或其他东西）所以我没有重复但我的完整结果集。

我在想我可能需要更改为正确的连接或可能更改 WHERE，但我不完全确定。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-16T13:46:03.960

将您的 WHERE 子句移动到连接中...

```
select 
  TableA.name,
  TableA.startDate,
  TableA.endDate,
  TableA.Reason,
  TableA.id1,
  COALESCE(TableC.ReasonName, 'No Reason') AS FilteredReasonName
from
  TableA
left join
  TableB
    on  TableA.id1 = TableB.id1
    and TableB.id2 = 'asd1f5as98a4'
left join
  TableC
    on  TableB.id2 = TableC.id2 
```

现在，TableB *（重复的来源）*只有在是 ReasonF 或根本不是时才加入。然后下一个连接会查找该代码的 ReasonName。

如果没有找到，COALESCE() 将 NULL 替换为`'No Reason'`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T13:45:13.867

如果我正确理解你想要什么......

```
select 
    TableA.name,
    TableA.startDate,
    TableA.endDate,
    TableA.Reason,
    TableA.id1,
    TableC.ReasonName
from
TableA
left join TableB on TableA.id1 = TableB.id1
left join TableC on TableB.id2 = TableC.id2 and TableC.id2 = 'asd1f5as98a4' 
```

# jquery - 使用 jquery 触发 .appendTo() 之前的空容器

> ID：12915995
> 
> 赞同：0
> 
> 时间：2012-10-16T13:39:48.950
> 
> 标签：jquery, appendto

我有一个容器`#boxes`，我需要清空并添加内容以使用`.imagesLoaded()`然后应用砌体。默认情况下，内容包含我要删除的砌体项目，然后添加响应中包含的新项目。我的代码的问题是它在我相信附加之后清空了内容。有任何想法吗？

```
$(document).ready(function($){
    $('div.profile-archive').click(function(){
        $("#boxes").empty();
        $this = $(this);
        var postType = $this.attr("rel");
        data = {
          action: 'fetch_profile_archive',
              postType : postType
        };
        $.post(ajaxurl, data, function (response) {
            var $response = $(response);
            $response.imagesLoaded(function() {
              $("#boxes").masonry('reload');
            }).appendTo("#boxes");
        });
    });

}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T17:06:23.580

我认为你的问题在于`imagesloaded`功能。您当前将结果附加`imagesloaded`到`boxes`，我的猜测是您首先将响应添加到`boxes`然后`imagesLoaded`运行`boxes`。

```
$("#boxes")
  .append($response)
  .hide() // If you don't want to show the content until loaded
  .imagesLoaded(function() {
    $("#boxes")
      .show() // If you want to show the content after it's loaded
      .masonry('reload');
  }); 
```

# java - 如何清空 Actor 死信队列

> ID：12915997
> 
> 赞同：4
> 
> 时间：2012-10-16T13:39:52.927
> 
> 标签：java, scala, akka, actor

我有一个用例，我想清空我的 Akka 演员的死信队列。

我的本地演员与远程演员交谈，定期向其发送一些数据。我认为这些会排队，因为当远程参与者可用时，它会收到大量事件。

是否可以限制此队列的大小？或者甚至更好地访问它，以根据某些标准清理多余的项目？（在这一点上，我什至很高兴只是清理整个事情，或者禁用这个功能）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-16T14:55:32.450

你不需要清理它。默认情况下，它只会将消息推送到事件总线：[请参见此处](https://github.com/akka/akka/blob/master/akka-actor/src/main/scala/akka/actor/ActorRef.scala#L474)。如果没有订阅者，它将被丢弃：[请参阅此处](https://github.com/akka/akka/blob/master/akka-actor/src/main/scala/akka/event/EventBus.scala#L228)。