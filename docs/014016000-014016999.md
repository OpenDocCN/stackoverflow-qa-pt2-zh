# StackOverflow 问答 14016000-14016999

# wcf - 如何将 BeginExecuteReader 与异步 WCF 方法一起使用

> ID：14016001
> 
> 赞同：2
> 
> 时间：2012-12-24T01:01:37.050
> 
> 标签：wcf, asynchronous

我正在尝试在异步 WCF 方法中使用 ADO.Net 的 BeginExecuteReader 方法，但无法获得它。

我有以下合同和服务代码。我不明白如何在服务的开始方法中填写回调方法的详细信息。**任何帮助将不胜感激，因为我在网上找不到任何示例或 MSDN 上的任何文档。**甚至一些指向示例代码的链接也会有所帮助，因为我完全不知道如何做到这一点。

**合约代码：**

```
 [ServiceContract(Namespace = ServiceConstants.ServiceContractNamespace,
    Name = ServiceConstants.ServiceName)]
    public interface IAsyncOrderService
    {
       [OperationContract(AsyncPattern=true)]
       IAsyncResult BeginGetProducts(string vendorId, AsyncCallback callback,
                                                object state);

       List<Product> EndGetProducts(IAsyncResult result);
    } 
```

**服务代码为：**

```
 public IAsyncResult BeginGetProducts(string vendorId, AsyncCallback cb, object s)
    {
        DocumentsSummaryByProgram summary = null;

        SqlConnection conn = new SqlConnection(System.Configuration.ConfigurationManager.ConnectionStrings["Conn1"].ConnectionString);
        SqlCommand sqlCmd = null;

        sqlCmd = new SqlCommand("dbo.GetProducts", conn);
        sqlCmd.CommandType = CommandType.StoredProcedure;

        sqlCmd.Parameters.AddWithValue("@vendorId", sqlCmd);

        conn.Open();

        return sqlCmd.BeginExecuteReader(cb, vendorId);
    }

    public List<Product> EndGetProducts(IAsyncResult r)
    {
        List<Product> products = new List<Product>();
        SqlCommand cmd = r.AsyncState as SqlCommand;
        if (cmd != null)
        {
            SqlDataReader dr = cmd.EndExecuteReader(r);
            while (dr.Read())
            {
                //do your processing here and populate products collection object
            }
        }

        return products;
    } 
```

**更新 1：** 这**似乎是**一项不可能完成的任务。Microsoft 应该提供示例来展示如何以异步方式从 WCF 调用 ADO.Net 异步方法，因为这对于许多想要可扩展的应用程序很有用。

**更新 2：**在我能够在 WCF 中成功实现异步模式之后，我已经为我的问题提供了详细的答案。请在下面的单独帖子中查看答案。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-24T01:05:08.893

你从来没有打电话打开你的`SqlConnection`

```
conn.Open(); 
```

您还创建了两个`SqlConnection`对象：

```
SqlConnection conn = new SqlConnection(System.Configuration.ConfigurationManager.ConnectionStrings["Conn1"].ConnectionString); 
```

和：

```
sqlCmd = new SqlCommand("dbo.GetProducts", new SqlConnection(System.Configuration.ConfigurationManager.ConnectionStrings["VHA_EDM"].ConnectionString)); 
```

**编辑**

要添加异步回调，您将执行以下操作：

```
var callback = new AsyncCallback(HandleCallback);
sqlCmd.BeginExecuteReader(callback, command); 
```

如果您没有计划在两者之间运行的任何异步代码，那么`BeginExecuteReader`最好`EndExecuteReader`只使用`ExecuteReader`.

**编辑 2**

委托人具有以下`AsyncCallback`签名：

```
public delegate void AsyncCallback(IAsyncResult ar); 
```

从该委托方法中，您可以使用`Invoke`您的`EndGetProducts`方法。

**编辑 3**

以下是使用检索数据的示例`BeginExecuteReader`：

```
public SqlCommand Command { get; set; }

public IAsyncResult BeginGetStuff()
{
    var connect = "[enter your connection string here]";
    // Note: Your connection string will need to contain:
    // Asynchronous Processing=true;

    var cn = new SqlConnection(connect);
    cn.Open();

    var cmd = new SqlCommand("[enter your stored proc name here]", cn);
    cmd.CommandType = CommandType.StoredProcedure;
    this.Command = cmd;

    return cmd.BeginExecuteReader();
}

public List<string> EndGetStuff(IAsyncResult r)
{
    var dr = this.Command.EndExecuteReader(r);
    var list = new List<string>();
    while (dr.Read())
        list.Add(dr[0].ToString());
    return list;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-25T19:08:56.210

我提供了一个单独的帖子来回答我的问题，因为这是一个很长的答案。我希望它可以帮助其他人在他们的 WCF 中快速实现异步模式。在 WCF 中实现异步模式时我遗漏的要点如下。没有这些，我要么收到一个挂起的 WCF 问题，说“正​​在连接...”，要么在 WCF 级别操作被中止/取消错误消息。在下面的解决方案中，我没有讨论 WCF 端异步模式中的异常处理以保持简单。

*   **不要通过代码调用 WCF 的 EndGetProducts 方法，**例如使用 delagateInstance.Invoke 或任何其他方式调用它。在异步模式中，您需要做的就是调用客户端回调，当您的长异步操作完成时，这将导致调用您的客户端回调，然后调用 WCF EndGetProduct 方法（例如：cb( asyncResult1) 其中 cb 是调用此 WCF 的客户端代码传递的回调委托实例）。*我试图通过使用 Invoke 来调用 EndGetProducts WCF 方法，这是错误的。*即使客户端没有为客户端回调传递任何内容，仍应执行此操作以调用 WCF 中的 End 方法。
*   **不要返回从 ADO.Net async begindatareader 方法和 BeginGetProducts 方法获得的 asyncresult**，因为它需要与客户端调用 WCF 的上下文中的 AsyncResult 相同。这意味着您必须在 BeginGetProducts 将返回的 AsyncResult 中包含客户端回调和客户端状态对象，即使客户端没有为这些传递任何内容。*我从 BeginGetProducts 返回 ADO.Net 异步方法 begindatareader 的 AsyncResult，这是错误的。*
*   **从 WCF 调用客户端回调委托实例时，请确保传递包含**我在上一个项目符号中讨论的客户端上下文的 AsyncResult。此外，当您的异步操作完成时执行此操作，我在创建 List 对象后的 beginexecutereader 回调中执行此操作。
*   要记住的最后一点是，**您必须在 WCF 和 ADO.Net 级别设置足够大的超时**，因为您的异步操作可能需要相当长的时间，否则您将在 WCF 中获得超时。为此，将 ADO.Net 命令超时设置为 0（无限超时）或适当的值，对于 WCF，您可以包括如下配置。

    ```
    <binding name="legacyBinding" openTimeout="00:10:00" sendTimeout="00:10:00"    
    receiveTimeout="00:10:00" closeTimeout="00:10:00"  maxBufferPoolSize="2147483647" 
    maxReceivedMessageSize="2147483647" > 
    ```

现在的代码可能看起来很长，但我的目的是让其他人更容易在他们的 WCF 中实现异步模式。这对我来说相当困难。

**WCF 合同**

```
 [OperationContract(AsyncPattern = true)]
    [FaultContract(typeof(string))]
    IAsyncResult BeginGetProducts(string vendorId, AsyncCallback cb, object s);
    //The End method must return the actual datatype you intend to return from 
    //your async WCF operation. Also, do not decorate the End method with 
    //OperationContract or any other attribute
    List<Product> EndGetProducts(IAsyncResult r); 
```

**WCF 实施**

```
 public IAsyncResult BeginGetProducts( string vendorId, AsyncCallback cb, object s)
    {

        SqlCommand sqlCmd = null;
        sqlCmd = new SqlCommand("dbo.ABC_sp_GetProducts", "Data Source=xyz;Initial Catalog=NorthwindNew;Integrated Security:true;asynchronous processing=true;"));
        sqlCmd.CommandType = CommandType.StoredProcedure;
        sqlCmd.Parameters.AddWithValue("@vendorId", vendorId);
        sqlCmd.CommandTimeout = 0;//async operations can be long operations so set a long timeout

        //THIS ASYNRESULT MUST REFLECT THE CLIENT-SIDE STATE OBJECT, AND IT IS WHAT SHOULD FLOW THROUGH TO END METHOD of WCF.
        //THE CLIENT CALLBACK (PARAMETER 'cb') SHOULD BE INVOKED USING THIS ASYNCRESULT, ELSE YOUR WCH WILL HANG OR YOUR WCF WILL GET ABORTED AUTOMATICALLY.
        AsyncResult<FinalDataForDocumentsSummary> asyncResult1 = new AsyncResult<FinalDataForDocumentsSummary>(false, s);//this is the AsyncResult that should be used for any WCF-related method (not ADO.Net related)

        AsyncCallback callback = new AsyncCallback(HandleCallback);//this is callback for ADO.Net async begindatareader  method

        sqlCmd.Connection.Open();

        //AsynResult below is for passing information to ADO.Net asyn callback
        AsyncResult<Product> cmdResult = new AsyncResult<Product>(false, new object[] {sqlCmd, cb,s});

        sqlCmd.BeginExecuteReader(HandleCallback, cmdResult);

         return asyncResult1;//ALWAYS RETURN THE ASYNCRESULT INSTANTIATED FROM CLIENT PARAMETER OF STATE OBJECT. FOR DATAREADER CREATE ANOTHER ASYNCRESULT THAT HAS COMMAND OBJECT INSIDE IT.
    }

     /// <summary>
     /// This is the callback on WCF side for begin data reader method.
     /// This is where you retrieve data, and put it into appropriate data objects to be returned to client.
     /// Once data has been put into these objects, mark this ASYNC operation as complete and invoke the
    ///  client callback by using 'cb(asyncResult1)'. Use the same asyncresult that contains the client passed state object.
     /// </summary>
     /// <param name="result"></param>
    public void HandleCallback(IAsyncResult result)
    {
        List<Product> summaries = new List<Product>();
        Product product = null;

        //THIS ASYNCRESULT IS ONLY FOR DATAREADER ASYNC METHOD AND NOT TO BE USED WITH WCF, ELSE BE READY FOR WCF FAILING
        AsyncResult<Product> asyncResult = result.AsyncState as AsyncResult<Product>;

        object[] objects = asyncResult.AsyncState as object[];
        SqlCommand cmd = objects[0] as SqlCommand;
        AsyncCallback cb = objects[1] as AsyncCallback;
        object s = objects[2];
       //CREATE THE SAME ASYNCRESULT THAT WE HAD IN BEGIN METHOD THAT USES THE CLIENT PASSED STATE OBJECT
        AsyncResult<Product> asyncResult1 = new AsyncResult<Product>(false, s);

        SqlDataReader dr = null;
        if (cmd != null)
        {
            try
            {
                  dr = cmd.EndExecuteReader(result);
                while (dr.Read())
                {
                    product = new Product(dr.GetInt32(0), dr.GetString(1));
                    summaries.Add(summary);
                }

                dr.Close();
                cmd.Connection.Close();

                //USE THE CORRECT ASYNCRESULT. WE NEED THE ASYNCRESULT THAT WE CREATED IN BEGIN METHOD OF WCF.
                asyncResult1.Data = new FinalDataForDocumentsSummary(count, summaries.OrderByDescending(x => x.CountOfOverDue).ToList());

            }
            finally
            {
                if (dr != null)
                {
                    dr.Close();
                }
                if (cmd.Connection != null)
                {
                    cmd.Connection.Close();
                    cmd.Connection.Dispose();
                }

                //USE THE CORRECT ASYNCRESULT. WE NEED THE ASYNCRESULT THAT WE CREATED IN BEGIN METHOD OF WCF
                asyncResult1.Complete();

                //THIS IS REQUIRED ELSE WCF WILL HANG. EVEN WHEN NO CALLBACK IS PASSED BY CLIENT,
                //YOU MUST EXECUTE THIS CODE. EXECUTE IT AFTER YOUR OPERATION HAS COMPLETED, 
                //SINCE THIS IS WHAT CAUSES THE END METHOD IN WCF TO EXECUTE. 
                //DON'T TRY TO CALL THE WCF END METHOD BY YOUR CODE (like using delegateInstance.Invoke) SINCE THIS WILL HANDLE IT.
                cb(asyncResult1);

            }
        }

    }
    /// <summary>
    /// This method gets automatically called by WCF if you include 'cb(asyncResult1)' in the reader's callback meethod, so don't try to call it by your code. 
    /// But always use 'cb(asyncResult1)' just after data has been successfully retrieved from database and operation is marked as complete.
    /// </summary>
    /// <param name="r"></param>
    /// <returns></returns>
    public List<Product> EndGetProducts(IAsyncResult r)
    {

       AsyncResult<Product> result = r as AsyncResult<Product>;

       // Wait until the AsyncResult object indicates the 
       // operation is complete, in case the client called the End method just after the Begin method.
        if (!result.CompletedSynchronously)
        {
            System.Threading.WaitHandle waitHandle = result.AsyncWaitHandle;
            waitHandle.WaitOne();
        }

        // Return the database query results in the Data field
        return result.Data;

    } 
```

**异步模式中需要的 AsyncResult 的泛型类**

```
using System;
using System.Threading;

class AsyncResult<T> : IAsyncResult
{
    private T data;
    private object state;
    private bool isCompleted = false;
    private AutoResetEvent waitHandle;
    private bool isSynchronous = false;

    public T Data
    {
        set { data = value; }
        get { return data; }
    }

    public AsyncResult(bool synchronous, object stateData)
    {
        isSynchronous = synchronous;
        state = stateData;
    }

    public void Complete()
    {
        isCompleted = true;
        ((AutoResetEvent)AsyncWaitHandle).Set();
    }

    public object AsyncState
    {
        get { return state; }
    }

    public WaitHandle AsyncWaitHandle
    {
        get
        {
            if (waitHandle == null)
                waitHandle = new AutoResetEvent(false);

            return waitHandle;
        }
    }

    public bool CompletedSynchronously
    {
        get
        {
            if (!isCompleted)
                return false;
            else
                return isSynchronous;
        }
    }

    public bool IsCompleted
    {
        get { return isCompleted; }
    }
} 
```

**如何从客户端调用它：**

```
 protected void Page_Load(object sender, EventArgs e)
    {
        using (ABCService.ServiceClient sc = new ABCService.ServiceClient())
        {
           // List<ABCService.Product> products = sc.GetDocSummary("Vend1", null, false);//this is synchronous call from client
          sc.BeginGetProducts("Vend1",GetProductsCallback, sc);//this is asynchronous call from WCF

        }

    }

    protected void GetProductsCallback(IAsyncResult asyncResult)
    {
        List<ABCService.Product> products = ((ABCService.ServiceClient)asyncResult.AsyncState).EndGetProducts(asyncResult);//this will call the WCF EndGetProducts method

    } 
```

# visual-studio-2012 - 安装 VS 2012 Ultimate 期间出现 .NET 4.5 致命错误

> ID：14016002
> 
> 赞同：3
> 
> 时间：2012-12-24T01:01:41.013
> 
> 标签：visual-studio-2012, .net-4.5

当我尝试在**Windows 7 32bit SP1上安装****VS 2012 Ultimate**时，它​​给了我下一个错误：

 **> “Microsoft .NET Framework 4.5 - 安装过程中的致命错误”

我的安装日志：[这里](https://skydrive.live.com/redir?resid=38F0378B03409974!128&authkey=!ABM7gxQbOjNbo_g)

我的 vslog.cab 文件：[这里](https://skydrive.live.com/redir?resid=38F0378B03409974!127&authkey=!ADcyFHmb6NmKNp4)

![Microsoft .NET Framework 4.5 - 安装过程中的致命错误](../Images/4c925fe8e1e735b5416d755fbc4583f4.png)

我尝试单独安装 .NET 4.5，但也没有用。[.NET 4.5 日志错误](https://skydrive.live.com/redir?resid=38F0378B03409974!129&authkey=!AHFIZhIyhBcM3k4)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-27T18:52:22.527

此问题是由您计算机上的防病毒扫描程序引起的。您能否检查防病毒扫描程序日志并查看是否为 c:\config.msi 记录了异常？还让我们知道您在机器上安装了哪种防病毒软件？我们（Microsoft）希望与他们联系以更改他们的产品以更好地与安装程序配合使用。

日志文件表明其他一些应用程序（如防病毒扫描程序）在 MSI 创建/移动备份文件后打开没有 FILE_SHARE_DELETE 的备份文件。

MSI (s) (D8:C8) [11:31:49:844]：产品：Microsoft .NET Framework 4.5 -- 安装程序在安装此软件包时遇到意外错误。这可能表明此软件包有问题。错误代码为2329。参数为：32，C:\Config.Msi\b8265.rbf，

安装程序在安装此软件包时遇到意外错误。这可能表明此软件包有问题。错误代码为2329。参数为：32，C:\Config.Msi\b8265.rbf，

解决方法：禁用防病毒软件并在计算机上安装 .Net 4.5，然后再次启用防病毒软件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T02:02:12.963

打开 cmd 输入命令“net stop WuAuServ”（禁用 Windows 更新）转到运行（您可以通过按 Win + R 来执行此操作）并输入“%windir%”（此命令可让您转到 Windows 系统文件夹）找到文件夹“SoftwareDistribution”并将其重命名为“SDold” 然后，返回之前的命令提示符并运行命令“net start WuAuServ” 现在，再次尝试安装 .NET Framework

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-12-24T01:09:43.057

只是尝试将您的 .NET Framework 更新到 4.5 版本？**

# wordpress - 如何去除多余的 以及 来自 WordPress 简码的结果

> ID：14016007
> 
> 赞同：4
> 
> 时间：2012-12-24T01:03:21.363
> 
> 标签：wordpress, shortcode

我用shortcode在一个变量中输出如下html，但是br、p标签等冗余代码太多了，怎么去掉？谢谢！

**我的简码功能：**

```
add_shortcode('portfolios', 'van_portfolios_shortcode');
function van_portfolios_shortcode( $atts, $content) {
    extract(shortcode_atts(array(
        'number'=>'9',
        'slug'=>''
    ), $atts)); 
   $str=van_portfolios($slug,$number,false);
   return $str;
}

function van_process_shortcode($content) {
    global $shortcode_tags;
    // Backup current registered shortcodes and clear them all out
    $orig_shortcode_tags = $shortcode_tags;
    $shortcode_tags = array();
    add_shortcode('portfolios', 'van_portfolios_shortcode');

    // Do the shortcode (only the one above is registered)
    $content = do_shortcode($content);
    // Put the original shortcodes back
    $shortcode_tags = $orig_shortcode_tags;
    return $content;
}
add_filter('the_content', 'van_process_shortcode', 7); 
```

**正确的妆容是**

```
<div class="portfolio-item">
           <a class="overlay" href="#">
             <h3>...</h3>
             <p>...</p>
           </a>
           <div class="tools"><a href="#" class="zoomin" rel="lightbox">ZoomIn</a><a href="#" class="info">Info</a></div>
           <a href="#" class="item">...</a>
         </div> 
```

**输出：**

```
<div class="portfolio-item">
           <a class="overlay" href="#">
             <br /><!--This <br />is redundant code-->
             <h3>...</h3>
             <p>...</p><p><!--This <p> is redundant code-->
           </a>
           <div class="tools"><a href="#" class="zoomin" rel="lightbox">ZoomIn</a><a href="#" class="info">Info</a></div>
           <p><!--This <p> is redundant code--><a href="#" class="item">...</a>
         </div> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-24T01:10:38.080

尝试在显示内容之前添加此代码：

**更新**

```
// From your question 
$content = do_shortcode($content);
// Put the original shortcodes back
$shortcode_tags = $orig_shortcode_tags;

// Add this code 
$content = preg_replace( '%<p>&nbsp;\s*</p>%', '', $content ); // Remove all instances of "<p>&nbsp;</p>" to avoid extra lines.
$Old     = array( '<br />', '<br>' );
$New     = array( '','' );
$content = str_replace( $Old, $New, $content );

// From your question
return $content; 
```

# objective-c - 以编程方式创建视网膜屏幕截图导致非视网膜图像

> ID：14016010
> 
> 赞同：3
> 
> 时间：2012-12-24T01:03:54.507
> 
> 标签：objective-c, ios, xcode, screenshot, retina-display

我正在尝试以编程方式截取视网膜屏幕截图，并且我已经尝试了在网上找到的所有方法，但我无法将屏幕截图变成视网膜。

我了解以下私有 API：

```
UIGetScreenImage(); 
```

不能使用，因为 Apple 会拒绝您的应用。但是，此方法返回的正是我需要的（屏幕的 640x960 屏幕截图）。

我已经在我的 iPhone 4 以及视网膜硬件上的 iPhone 4 模拟器上尝试过这种方法，但生成的图像始终是 320x480。

```
-(UIImage *)captureView
{

    AppDelegate *appdelegate = [[UIApplication sharedApplication]delegate];

    if ([[UIScreen mainScreen] respondsToSelector:@selector(scale)])
        UIGraphicsBeginImageContextWithOptions(appdelegate.window.bounds.size, NO, 0.0);
        else
            UIGraphicsBeginImageContext(appdelegate.window.bounds.size);

            [appdelegate.window.layer renderInContext:UIGraphicsGetCurrentContext()];
    UIImage *image = UIGraphicsGetImageFromCurrentImageContext();
    UIGraphicsEndImageContext();

    NSLog(@"SIZE: %@", NSStringFromCGSize(image.size));
    NSLog(@"scale: %f", [UIScreen mainScreen].scale);

    return image;
} 
```

我也尝试过苹果推荐的方式：

```
- (UIImage*)screenshot
{
    // Create a graphics context with the target size
    // On iOS 4 and later, use UIGraphicsBeginImageContextWithOptions to take the scale into consideration
    // On iOS prior to 4, fall back to use UIGraphicsBeginImageContext
    CGSize imageSize = [[UIScreen mainScreen] bounds].size;
    if (NULL != UIGraphicsBeginImageContextWithOptions)
        UIGraphicsBeginImageContextWithOptions(imageSize, NO, 0);
        else
            UIGraphicsBeginImageContext(imageSize);

            CGContextRef context = UIGraphicsGetCurrentContext();

            // Iterate over every window from back to front
            for (UIWindow *window in [[UIApplication sharedApplication] windows])
            {
                if (![window respondsToSelector:@selector(screen)] || [window screen] == [UIScreen mainScreen])
                {
                    // -renderInContext: renders in the coordinate space of the layer,
                    // so we must first apply the layer's geometry to the graphics context
                    CGContextSaveGState(context);
                    // Center the context around the window's anchor point
                    CGContextTranslateCTM(context, [window center].x, [window center].y);
                    // Apply the window's transform about the anchor point
                    CGContextConcatCTM(context, [window transform]);
                    // Offset by the portion of the bounds left of and above the anchor point
                    CGContextTranslateCTM(context,
                                          -[window bounds].size.width * [[window layer] anchorPoint].x,
                                          -[window bounds].size.height * [[window layer] anchorPoint].y);

                    // Render the layer hierarchy to the current context
                    [[window layer] renderInContext:context];

                    // Restore the context
                    CGContextRestoreGState(context);
                }
            }

    // Retrieve the screenshot image
    UIImage *image = UIGraphicsGetImageFromCurrentImageContext();

    UIGraphicsEndImageContext();

    NSLog(@"Size: %@", NSStringFromCGSize(image.size));

    return image;
} 
```

但它也返回非视网膜图像：2012-12-23 19:57:45.205 PostCard[3351:707] size: {320, 480}

我有什么明显的遗漏吗？怎么会有假设采取视网膜屏幕截图的方法返回非视网膜屏幕截图？提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-24T01:51:19.320

我看不出你的代码有什么问题。除此之外`image.size`，您是否尝试过记录`image.scale`？是1还是2？如果它是 2，它实际上是一个视网膜图像。

[`UIImage.scale`](http://developer.apple.com/library/ios/documentation/uikit/reference/UIImage_Class/Reference/Reference.html#//apple_ref/doc/uid/TP40006890-CH3-SW39)表示图像的比例。因此，`UIImage.size`320×480 和`UIImage.scale`2 的图像的实际尺寸为 640×960。来自苹果的文档：

> 如果您将图像的逻辑大小（存储在[`size`](http://developer.apple.com/library/ios/documentation/uikit/reference/UIImage_Class/Reference/Reference.html#//apple_ref/occ/instp/UIImage/size)属性中）乘以此属性中的值，您将获得图像的尺寸（以像素为单位）。

`UIImage`这与使用`@2x`修饰符将图像加载到 a 时的想法相同。例如：

```
a.png (100×80)      => size=100×80 scale=1
b@2x.png (200×160)  => size=100×80 scale=2 
```

# sql - SQL：使用存储在 table_1 中的值根据 table_2 中列出的变量填充 table_2 中的列

> ID：14016012
> 
> 赞同：2
> 
> 时间：2012-12-24T01:04:02.417
> 
> 标签：sql, database, sqlite

我对 sql 很陌生，在学校上课，但它非常基础。我有 2 个表我想以某种方式链接在一起，但不知道从哪里开始。我有一个月表，列出了该月的员工和已完成的服务电话。每个员工的每次通话和通话类型的报酬都不同。所以我有一个佣金表，其中列出了每个员工、服务电话的类型，并且列中的数据是每个员工为每种不同类型的电话所做的美元金额。我想链接每个表中的员工 ID，以便我可以做这样的事情......

```
SELECT sum(TypeOfCall) as "Total Commission" 
from December
where TypeOfCall='abc' and EmployeeID='John'; 
```

但是存储在列中的数据`MothTable`是`TypeOfCall`一个变量，如“ `abc`”或“ `cdf`”，每个变量都在 CommissionsTable 中列出并给出了一个值。如何使用`TypeOfCall`列中`MonthTable`列出的值获得列的总和`CommissionsTable`？

实际的表、列和类型如下：

```
CREATE TABLE "December" (
    "EmployeeID" INTEGER NOT NULL,
    "InvoiceType" VARCHAR (6),
    "DR" VARCHAR (8),
    "TypeOfCall" VARCHAR (6),
    "CommissionType" VARCHAR (6),
    "Date DD/MM/YY" VARCHAR (10),
    "InvoiceNumber" INTEGER,
    "InvoiceAmount" FLOAT (6),
    "KeyCode" VARCHAR(20)
) 
```

和...

```
CREATE TABLE "Commissions" (
    "EmployeeID" VARCHAR(25) PRIMARY KEY  NOT NULL UNIQUE,
    "T3" INTEGER NOT NULL,
    "T5" INTEGER NOT NULL,
    "T7" INTEGER NOT NULL,
    "7B" INTEGER NOT NULL,
    "Other10" INTEGER NOT NULL,
    "Other12" INTEGER NOT NULL,
    "Other13" INTEGER NOT NULL,
    "Other14" INTEGER NOT NULL,
    "Other15" INTEGER NOT NULL
) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-24T01:10:50.823

您真正需要的是`SUM(CommissionsTable.value)`（替换正确的列名）`INNER JOIN`在月份表和`CommissionsTable`.

```
SELECT
  December.TypeOfCall,
  SUM(CommissionsTable.value) AS "Total Commission"
FROM
  December
  /* Substitute the correct column name for ComissionsTable.TypeOfCall */
  INNER JOIN CommissionsTable WHERE December.TypeOfCall = CommissionsTable.TypeOfCall
WHERE
  December.TypeOfCall = 'abc' 
  AND EmployeeID = 'John'
/* GROUP BY needed if you were retrieving more than just 'abc' */
GROUP BY December.TypeOfCall 
```

但是，每个月都有一个单独的表格是*不合适的。*相反，您的表列出调用应该包括每个调用的日期值，以及它的类型和`EmployeeID`. 就像是：

```
CREATE TABLE calls (
  EmployeeID VARCHAR(32) NOT NULL,
  TypeOfCall CHAR(3) NOT NULL,
  CallDate INTEGER NOT NULL
) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-24T03:45:48.350

调用表存储记录在一张或多张表中取决于记录的数量和数据保存时间，如果acount非常非常大，分区表或多表是不错的选择。在 December.TypeOfCall 上创建索引可能会调整性能。

# plugins - Joomla 3.0 SEF URL 发送到随机错误文章

> ID：14016016
> 
> 赞同：0
> 
> 时间：2012-12-24T01:05:13.263
> 
> 标签：plugins, joomla-extensions, joomla-sef-urls, joomla3.0

我的站点[Eighttwentydesign](http://www.eighttwentydesign.com)正在运行 Joomla 3.0。我打开了 SEF URL，并且已经做了一段时间没有问题。但是今天，当您访问该站点并单击任何内容时，比如说投资组合，您会在投资组合的 URL 下获得主页，但是如果您在末尾添加一个前导斜杠，则会显示正确的文章（投资组合）。此外，如果您点击说“网页设计”，它会将您带到投资组合页面。我可能会添加这个菜单是 Joomla 中的一个菜单 - 不是手动添加内部链接

不起作用：[http ://www.eighttwentydesign.com/portfolio](http://www.eighttwentydesign.com/portfolio)

是否有效：[http ://www.eighttwentydesign.com/portfolio/](http://www.eighttwentydesign.com/portfolio/)

我已经检查了 .htaccess，实际上没有运气将其恢复为原始文件，我检查了全局配置，但我看不到任何可能导致这种情况的东西。昨天工作得很好。在过去的几周里，我没有适应任何 PHP 源代码或任何东西，我所做的唯一需要通知的事情是昨天启用了缓存 - 其他人在这样做之后遇到了问题吗？我已在全局配置下禁用它，但无济于事。

确切的 Joomla 版本是 3.0.2，插件很少

我确实有每日备份，但我宁愿找到一个解决方案并能够从中找出预防措施，而不是仅仅使用创可贴。

我已经搜索了好几个小时，除了无法修复它之外，似乎没有其他人遇到过这种情况，所以我开始认为这可能是一个错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-24T01:05:13.263

就在我即将发布此内容时，我发现了我的解决方案。

如果您的 SEF URL 显示错误的内容，请通过禁用缓存插件来解决它。您可以通过执行以下步骤来做到这一点

1.  登录到 Joomla 后端
2.  导航到扩展 > 插件
3.  转到“系统缓存”
4.  禁用系统缓存

我希望这对将来的某人有所帮助，因为我真的很难找到任何答案。

# php - 随机发布破坏了我的 Wordpress 评论部分

> ID：14016020
> 
> 赞同：2
> 
> 时间：2012-12-24T01:05:58.660
> 
> 标签：php, wordpress, plugins

我目前在我的模板上有这个代码：

```
<?php
$args = array( 'numberposts' => 5, 'orderby' => 'rand', 'post_status' => 'publish', 'offset' => 1);
$rand_posts = get_posts( $args );
foreach( $rand_posts as $post ) : ?>
<li><h2><a href="<?php the_permalink(); ?>"><?php the_title(); ?></a></h2><p><?php the_excerpt(); ?>
</p></li>
<?php endforeach; ?>
</ul> 
```

代码的本质是从博客文章中生成[随机文章列表。](http://www.bendaggers.com/add-related-post-in-blogger-using-linkwithin/)问题是，代码通过向不相关的博客文章显示错误的评论列表开始破坏我的评论部分。

*在上面的链接中查看我的示例*

要做的常识是删除我模板中的代码。我的问题是关于如何修复上面的代码以便我仍然可以使用它的任何想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-24T01:46:00.240

如果您使用 get_posts，并且需要覆盖 $post，则必须这样做：

```
<?php
global $post;
$tmp_post = $post;
$args = array( 'numberposts' => 5, 'orderby' => 'rand', 'post_status' => 'publish', 'offset' => 1);
$rand_posts = get_posts( $args );
foreach( $rand_posts as $post ) : ?>
    <li><h2><a href="<?php the_permalink(); ?>"><?php the_title(); ?></a></h2><p><?php the_excerpt(); ?>
    </p></li>
<?php endforeach; ?>
</ul>
<?php $post = $tmp_post; // reset the $post to the original ?> 
```

# emacs - emacs make-frame 在恢复之前不会在当前显示器上显示框架

> ID：14016022
> 
> 赞同：3
> 
> 时间：2012-12-24T01:07:04.933
> 
> 标签：emacs, elisp

我遇到了麻烦。我想按下`F11`并让 Emacs 创建一个新框架，然后设置其大小，然后启动`gnus`. 在此期间，我希望它将新框架带到前面。我似乎无法弄清楚最后一部分。这是我的代码减去前面的部分：

```
(defun launch_gnus_new_frame ()
  "Open a new frame and then launch gnus"
  (interactive)
  (let* (new_frame_gnus (new-frame))
    (switch-to-buffer-other-frame new_frame_gnus)
    (if window-system
        (set-frame-size (selected-frame) 101 90))
    (gnus)))

(global-set-key [f11] 'launch_gnus_new_frame) 
```

任何想法，将不胜感激。谢谢！

**编辑**：这是我当前的代码。

```
(defun launch_gnus_new_frame ()
  "Open a new frame and then launch gnus"
  (interactive)
  (let ((gmail_frame (make-frame '((name . "gmail") (window-system . x)))))
    (select-frame-set-input-focus gmail_frame)
    (if window-system
        (set-frame-size (selected-frame) 101 90))
    (gnus)))

(global-set-key [f11] 'launch_gnus_new_frame) 
```

我已经确定新框架已经创建，我的观点是在新的缓冲区运行`gnus`中。但是，在我最小化并恢复它之前，该框架不会出现在我的显示器上。如果我跑步，`M-x` `make-frame`我会得到相同的行为。我正在使用 Cinnamon 桌面运行 Linux Mint。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T06:52:19.907

看看`x-focus-frame`功能。

```
(when (fboundp 'x-focus-frame)
  (x-focus-frame nil)) 
```

# c++ - OpenMP 和 #pragma omp atomic

> ID：14016026
> 
> 赞同：9
> 
> 时间：2012-12-24T01:07:45.433
> 
> 标签：c++, parallel-processing, openmp, atomic

我对 OpenMP 有疑问。MSVS 编译*器向我抛出“pragma omp atomic 格式不正确”*。我不知道为什么。代码：（程序使用积分法指定 PI 号）

```
#include <stdio.h>
#include <time.h>
#include <omp.h>

long long num_steps = 1000000000;
double step;

int main(int argc, char* argv[])
{
    clock_t start, stop;
    double x, pi, sum=0.0;
    int i;
    step = 1./(double)num_steps;
    start = clock();

    #pragma omp parallel for
    for (i=0; i<num_steps; i++)
    { 
        x = (i + .5)*step;
        #pragma omp atomic //this part contains error
        sum = sum + 4.0/(1.+ x*x);  
    }

    pi = sum*step;
    stop = clock();

    // some printf to show results
return 0;
} 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-12-25T22:52:53.723

根据当前的 OpenMP 标准，您的程序是语法上完全正确的 OpenMP 代码（例如，它未经 GCC 4.7.1 修改即可编译），除了`x`应该声明`private`（这不是语法错误，而是语义错误）。不幸的是，Microsoft Visual C++ 实现了一个非常古老的 OpenMP 规范（2002 年 3 月的 2.0），它只允许在`atomic`构造中接受以下语句：

> *x* binop= *expr*
> *x* ++
> ++ *x*
> *x* --
> -- *x*

后来的版本包括*x* = *x* binop *expr*，但即使在 VS2012 中，MSVC 也永远停留在 OpenMP 2.0 版。只是为了比较，当前的 OpenMP 版本是 3.1，我们预计 4.0 将在接下来的几个月内推出。

在 OpenMP 2.0 中，您的声明应为：

```
#pragma omp atomic
sum += 4.0/(1.+ x*x); 
```

但正如已经注意到的那样，使用减少会更好（并且通常更快）：

```
#pragma omp parallel for private(x) reduction(+:sum)
for (i=0; i<num_steps; i++)
{ 
    x = (i + .5)*step;
    sum = sum + 4.0/(1.+ x*x);  
} 
```

（你也可以写`sum += 4.0/(1.+ x*x);`）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-24T01:26:08.247

尝试更改`sum = sum + 4.0/( 1\. + x*x )`为`sum += 4.0/(1.+ x*x)`，但恐怕这也行不通。您可以尝试像这样拆分工作：

```
x = (i + .5)*step;
double xx = 4.0/(1.+ x*x);
#pragma omp atomic //this part contains error
sum += xx; 
```

这应该可以，但我不确定它是否符合您的需求。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-24T04:24:23.080

代替 ：

```
#pragma omp atomic 
```

由`#pragma omp reduction(+:sum)` 或 `#pragma omp critical`

但我想 #pragma omp reduction 将是一个更好的选择，因为你有 sum+=Var;

这样做：

```
x = (i + .5)*step;
double z = 4.0/(1.+ x*x);
#pragma omp reduction(+:sum)
sum += z; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-24T01:36:12.783

您可能需要回顾一下`#pragma`问题的真正解决方案。

`#pragma`是一组**非标准的**、**特定于编译器**的，并且大多数情况下是特定于**平台/系统**的 - 这意味着在具有相同操作系统的不同机器上或只是在具有不同设置的机器上行为可能不同 - 用于 pre 的一组指令-处理器。

因此，只有查看适用于您选择的平台的编译器的官方文档，才能解决 pragma 的任何问题，这里有 2 个链接。

*   [http://msdn.microsoft.com/en-us/library/d9x1s805.aspx](http://msdn.microsoft.com/en-us/library/d9x1s805.aspx)
*   [http://msdn.microsoft.com/en-us/library/0ykxx45t.aspx](http://msdn.microsoft.com/en-us/library/0ykxx45t.aspx)

因为标准的 C/C++`#pragma`不存在。

# java - 使用应用引擎 url fetch 发布用户凭据时遇到问题

> ID：14016028
> 
> 赞同：1
> 
> 时间：2012-12-24T01:08:21.840
> 
> 标签：java, google-app-engine, cookies

我正在开发一个应用程序，该应用程序需要能够代表用户登录网站并进行一些 html 抓取。像许多其他开发人员一样，应用引擎在 cookie 管理方面给我带来了麻烦。我登录的服务器在初始 POST 之后发送重定向，然后将另一个重定向发送到最终登录页面。据我所知，目的是让服务器验证 cookie 是否正常工作。我已经从 SO 上的其他答案中拼接了以下帮助程序类。

```
public class Utilities {

    public static String smartPost(String url, String data) throws IOException {
        // storage for cookies between redirects
        Map<String, String> cookies = new HashMap<String, String>();

        HttpURLConnection connection;
        StringBuilder response = new StringBuilder();
        response.append(url);
        URL resource = new URL(url);
        connection = (HttpURLConnection) resource.openConnection();
        connection.setRequestMethod("POST");
        connection.setRequestProperty("Content-Type",
                "application/x-www-form-urlencoded");

        connection.setRequestProperty("Content-Length",
                "" + Integer.toString(data.getBytes().length));
        connection.setRequestProperty("Content-Language", "en-US");

        connection.setUseCaches(false);
        connection.setInstanceFollowRedirects(false);
        connection.setDoInput(true);
        connection.setDoOutput(true);

        // Send request
        DataOutputStream wr = new DataOutputStream(connection.getOutputStream());
        wr.writeBytes(data);
        wr.flush();
        wr.close();

        url = connection.getHeaderField("location");

        while (url != null) {
            // Get Cookies
            getCookiesFromConnection(connection, cookies);
            URL redirectResource = new URL(url);
            response.append(url);
            connection = (HttpURLConnection) redirectResource.openConnection();
            connection.setRequestMethod("GET");
            addCookiesToConnection(connection, cookies);
            connection.setInstanceFollowRedirects(false);

            connection.setUseCaches(false);
            connection.setDoInput(true);
            url = connection.getHeaderField("location");
            connection.disconnect();
        }

        // Arrived at final location
        InputStream is = connection.getInputStream();
        BufferedReader rd = new BufferedReader(new InputStreamReader(is));
        String line;
        while ((line = rd.readLine()) != null) {
            response.append(line);
            response.append('\r');
        }
        rd.close();

        return response.toString();
    }

    static void addCookiesToConnection(HttpURLConnection c,
            Map<String, String> storage) {
        StringBuilder cookieStringBuilder = new StringBuilder();
        for (Entry<String, String> e : storage.entrySet()) {
            cookieStringBuilder.append(e.getKey());
            cookieStringBuilder.append("=");
            cookieStringBuilder.append(e.getValue());
            cookieStringBuilder.append(";");
        }
        c.setRequestProperty("Cookies", cookieStringBuilder.toString());
    }

    static void getCookiesFromConnection(HttpURLConnection c,
            Map<String, String> storage) {
        Map<String, List<String>> headers = c.getHeaderFields();
        for (Entry<String, List<String>> e : headers.entrySet()) {
            if (e.getKey().equalsIgnoreCase("Set-Cookie")) {
                for (String cookieHeader : e.getValue()) {
                    String cookie = cookieHeader.substring(0,
                            cookieHeader.indexOf(";"));
                    String key = cookie.substring(0, cookie.indexOf("="));
                    String value = cookie.substring(cookie.indexOf("=") + 1);
                    storage.put(key, value);
                }
            }
        }
    }
} 
```

我的目标是手动处理重定向并将 cookie 传递到最终页面。它在开发服务器上运行良好，但我不认为这是我的代码在工作，而是本地服务器上的默认行为。有人有在生产服务器上实现这种功能的经验吗？我对 java.net 包非常缺乏经验，所以我可能离解决方案还很远。

我最初尝试在 Go 中实现这一点，但我得到了相同的结果，并认为这只是我完全缺乏 Go 的经验。由于 Jsoup，Java 无论如何都会更容易进行 html 抓取，但我不反对使用 python 或继续这样做，如果这会以某种方式使其更容易。这是一个大项目的一小部分，我不会太远切换。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-28T19:58:40.520

在为此苦苦挣扎了几天之后，我发现这篇[文章](http://everydayscripting.blogspot.com/2009/08/google-app-engine-cookie-handling-with.html) 在 python 中完全符合我的要求。我决定在这个项目中使用 python，我将使用 BeautifulSoup 进行 html 抓取。仍然不确定我的代码最初有什么问题。

# xml - 将新父级添加到选定节点 xslt

> ID：14016029
> 
> 赞同：-2
> 
> 时间：2012-12-24T01:08:25.803
> 
> 标签：xml, xslt

我正在尝试将新父级添加到选定节点，同时保留所有其他结构和属性。

原始结构（从样本中删除的属性和其他子项）

```
<document>
<pages>
    <page>
        <stream>
            <block>
                <table/> <!-- any number or tables or groups can exist in a block -->
                <group/>
            </block>
        </stream>
    </page>
</pages>
</document> 
```

要求的结果：

```
<document>
<pages>
    <page>
        <stream>
            <block>
                <category> <!-- NEW PARENT, only 1 table per category-->
                    <table/> 
                </category>
                <category> <!-- NEW PARENT, only 1 group per category -->
                    <group/>
                </category>
            </block>
        </stream>
    </page>
</pages>
</document> 
```

这似乎是一个微不足道的问题，但我似乎无法弄清楚或在线找到解决方案。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T01:16:22.887

一个[身份转换](http://en.wikipedia.org/wiki/Identity_transform)，带有一个额外的模板匹配`block/*`，然后将每个匹配包装在`<category></category>`.

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
    version="1.0">
    <xsl:template match="@*|node()">
        <xsl:copy>
            <xsl:apply-templates select="@*|node()"/>
        </xsl:copy>
    </xsl:template>
    <xsl:template match="block/*">
        <category>
            <xsl:copy>
                <xsl:apply-templates select="@*|node()"/>
            </xsl:copy>
        </category>
    </xsl:template>
</xsl:stylesheet> 
```

# magento - Magento - 通过颜色属性可配置产品切换到简单产品

> ID：14016030
> 
> 赞同：0
> 
> 时间：2012-12-24T01:09:18.090
> 
> 标签：magento, colors, swap, configurable

任何人都可以帮我解决这个问题：http: [//www.lahalleauxchaussures.com/chaussures-de-sport-converse-60884.html](http://www.lahalleauxchaussures.com/chaussures-de-sport-converse-60884.html) ？

当您为可配置产品选择颜色时，将为您带来该颜色的简单产品。

提前致谢 ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-24T07:15:02.163

您可以根据需要使用以下扩展程序[查看此 URL](http://amasty.com/color-swatches-pro.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-24T04:00:04.113

Because this is associated product with main config ! its not product option, this is why each color is different entity.

If you want one product create custom options or assign different values for product attribute, and don't make Main configurable product and associate simple products with it.

# networking - 通过 sockaddr_in* 检测数据包是否来自本地主机

> ID：14016031
> 
> 赞同：2
> 
> 时间：2012-12-24T01:09:24.930
> 
> 标签：networking, network-programming

我有一个客户端，它通过带有回调的第三方库订阅了多个多播提要。第三方库做这样的事情：

```
sockaddr_in senderAddr;
socklen_t len = sizeof(struct sockaddr_in);
for fd in allMulticastFeeds:
{
    recvfrom(fd, buf, sizeof(buf), 0, (struct sockaddr*)&senderAddr, &len);    
    (*func)(buf, rc, &senderAddr, 0, stuff*);
} 
```

有几个听众订阅了我，我的工作是解析 buf 中包含的消息并回调订阅我的适当客户端。订阅我的客户给我的选项之一是他们是否想要接收从本地主机传出的消息。因为我的不同订阅者可能想要不同的行为，所以我根本无法将其转换为禁用多播，我必须为每个客户端检查他或她是否请求本地消息，如果没有，则只有在我可以验证的情况下才将其移交给`sockaddr_in`他们不是本地的。

我这样做的方法是在我的服务的构造函数中执行以下操作：

```
sockaddr_in self;
hostent *he;
char local[HOST_NAME_MAX];
gethostname(local, sizeof(local));
he = gethostbyname(local);

if (he)
{
    memcpy(&self.sin_addr, he->h_addr_list[0], he->h_length);
    selfAddr_ = self.sin_addr.s_addr;
} 
```

其中`selfAddr_`是类型的成员变量`long`。然后，当我从网络侦听器获得上述回调时，我会执行以下操作：

```
//code to get the correct listener for this type of packet after parsing it
if (listener->AskedForLocal || selfAddr_ != s_addr)
    listener->onFoo(bla,bla); 
```

我从第三方库调用中获得`s_addr`的`sin_addr.s_addr`内容在哪里？当我测试它时这似乎有效，但我感觉它有时会失败，这可能与临时使用. 这种方法是否不可靠，如果是，是否是检查传入的每个元素的唯一可靠方法？`sockaddr_in*``recvfrom``he->h_addr_list``he->h_addr_list``s_addr`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T18:17:50.517

查看服务的构造函数并在作为 virtualbox 映像运行的 Ubuntu 10.04 LTS 上尝试我得到 selfAddr_ = 0x10107f 这对应于环回地址 127.0.0.1

这可能不是您要查找的内容-我怀疑您可能在寻找特定网络接口的 IP 地址，如果是这样，请尝试此[答案](https://stackoverflow.com/questions/2283494/get-ip-address-of-an-interface-on-linux)。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-30T08:48:34.907

抱歉，但不知何故，我没有看到对应于 127.0.0.1 的 0x10107f ... 那不应该是 0x0100007F ...

# c# - EF Model First 的 1:1 关系问题

> ID：14016035
> 
> 赞同：1
> 
> 时间：2012-12-24T01:10:37.887
> 
> 标签：c#, .net, entity-framework, foreign-key-relationship, ef-model-first

我正在尝试使用 EF 将应用程序开发为 Model-First。我尝试了一切来完成表格拆分模式和 1:1 关系，但看起来 EF 不允许我这样做。

假设我确实使用了 Model-First - 有没有办法建立 1:1 的关系而不会弄乱生成的文件，而 EF 会让人讨厌：

> 多重性在关系“Blabalbala”中的角色“Blablalah”中无效。因为从属角色属性不是关键属性，所以从属角色的多重性的上限必须是*。

我已经尝试将我的 FK 设置为目标表上的主键，但仍然没有帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-25T19:25:44.923

在数据库设计中，1:1 关系通常定义为在第一个表中具有外键，然后在删除时将其级联。

IE：用户表和用户属性表。用户表将有一个 UserPropertiesId 作为外键，而 UserProperties 本质上会将用户视为一个用户属性的多个用户。事情就是这样，如果您只按用户表进行选择，这不是问题。

# git - git 有类似 svn_load_dirs.pl 的东西吗？

> ID：14016042
> 
> 赞同：2
> 
> 时间：2012-12-24T01:12:45.363
> 
> 标签：git, svn

有时我们使用第三方代码。但是我们无法访问这些代码的存储库，这意味着它们只能在 tarball 中发布。在这种情况下，svn_load_dirs.pl 是一个非常方便的脚本，可以将这些代码提交到供应商分支并在外部制作虚假历史记录。这将使合并更容易。我的问题是 git 有什么相似之处吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-24T01:54:04.970

Git 似乎并不需要这样做：

每个第三方都可以存储在自己的 git 存储库中，并在您的主存储库[中作为子模块](http://git-scm.com/book/en/Git-Tools-Submodules)引用。[在“ Git 中的供应商分支](https://stackoverflow.com/questions/769786/vendor-branches-in-git)
”中 查看更多信息。

或者您可以创建一个供应商分支，并将其导入那里，如“[如何将第三方库导入 git？](https://stackoverflow.com/questions/1695925/how-do-i-import-a-third-party-lib-into-git) ”。

在这两种情况下，更新内容都非常简单：
只需删除所有内容，解压缩新版本，然后`git add .`：git 将检测演变、删除和添加。

# android - 从 onContextItemSelected 显示的 DialogFragment 无法在 onPause/onResume 中继续存在

> ID：14016043
> 
> 赞同：8
> 
> 时间：2012-12-24T01:12:47.650
> 
> 标签：android, android-fragments, android-dialog, android-lifecycle

我有一个 DialogDragment 可以显示以下两种方式之一：

1）通过从其 OnItemClickListener 中点击 ListView 项目

2) 通过激活 ListView 的上下文菜单并选择一个菜单项

执行 #1 在所有生命周期事件下都可以正常工作，但是如果我通过 #2 调用它并暂停活动（通过返回主页）并通过任务切换器恢复它，则不再显示对话框。片段就在那里，我可以旋转设备并显示对话框。

我进行了实验，如果我将 DialogFragment 的显示放入一个延迟至少 1/2 秒的 Handler 中，它就可以工作。

以下片段失败 - 它显示对话框，但随后暂停/恢复隐藏它：

```
public boolean onContextItemSelected(android.view.MenuItem item) {
    boolean consumed = false;

    switch (item.getItemId()) {
    case R.id.menu_item:
        showMyDialogFragment();
        consumed = true;
        break;
    }

    return consumed;
} 
```

所以下面的代码片段有效。暂停/恢复再次正确显示对话框：

```
public boolean onContextItemSelected(android.view.MenuItem item) {
    boolean consumed = false;

    switch (item.getItemId()) {
    case R.id.menu_item:
        new Handler().postDelayed(new Runnable() {
            public void run() {
                showMyDialogFragment();
            }
        }, 300);

        consumed = true;
        break;
    }

    return consumed;
} 
```

用 0 毫秒或 250 毫秒的延迟替换 300 毫秒的秒延迟会导致它再次被破坏。这可重复 100% 的时间。

这显然是一个可怕的黑客攻击，可能取决于设备速度的常数使情况变得更糟。

有人知道为什么会这样和/或提供更好的解决方案吗？我在这个问题上花了几个小时，这是我能想到的最好的。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-25T19:39:30.487

我可以在 Android 4.2（ARM 模拟器和 Galaxy Nexus）上重现这个。我无法在 x86 4.1 模拟器、Nexus S (4.1) 和 Motorola RAZR i (4.0) 上重现您的发现。我还可以通过修改我自己的一本图书样本来重现该问题。我使用您的示例提交了一个问题：[http](http://code.google.com/p/android/issues/detail?id=41901) ://code.google.com/p/android/issues/detail?id=41901请添加您认为有助于他们诊断问题的任何其他信息。

关于解决方法，如果 300 毫秒有效，那么我们有一个可爱的“时间问题”，我不知道你会如何解决它，除非不使用菜单来显示它。例如，对于您的示例应用程序，只需切换到`SHOW_AS_ACTION_ALWAYS`（因此使其成为操作栏上的项目而不是溢出菜单中的项目）就足以使`DialogFragment`行为正常。希望您有办法调整您的 UI 以弥补此错误，或者也许有人会提出另一种解决方法并将其发布在此处或问题上。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-24T01:23:12.840

我建议在所有暂停时销毁对话框，并根据状态在 onResume 中重新创建，而不管如何调用对话框。如果应用程序在暂停时被操作系统杀死，否则这样做可能会导致内存泄漏。

要明确回答您的问题，请不要依赖操作系统来维护您的应用程序状态。

# html - css min-width 和 min-height 不起作用

> ID：14016045
> 
> 赞同：1
> 
> 时间：2012-12-24T01:13:12.547
> 
> 标签：html, wrapper, css

我正在重新设计我的网站，目前我只是将布局涂黑。我有一门以一切为中心的课程：

```
.centre
{
position:absolute;
left:50%;
top:50%;
} 
```

然后使用边距抵消一切。

我有一个给出最小高度和最小宽度的包装器

```
#wrapper {
position:relative;
left:0px;
top:0px;
min-height:600px;
min-width:600px;
} 
```

min-width 和 min-height 都完成了它们的工作，但由于某种原因，在应用此包装器后，网站不再垂直居中。您可以在这里查看网站：http: [//testerwebby.tumblr.com/](http://testerwebby.tumblr.com/)

我想知道这是什么原因，以及解决方案是什么。
谢谢，
狄龙布兰尼克。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T01:17:32.743

您的问题是您的页面正文没有垂直填充整个浏览器窗口。您可以通过使用 Firebug 并悬停您的 body 元素来检查这一点 - 不是整个浏览器窗口都会变成蓝色调。

尝试使用以下 CSS 解决此问题：

```
html, body
{
    height: 100%;
} 
```

# css - 滚动上的可移动 div

> ID：14016046
> 
> 赞同：2
> 
> 时间：2012-12-24T01:13:51.393
> 
> 标签：css, html, scroll, movable

```
<div id="blue">
    <div id="red"></div>
</div> 
```

我希望这个红色 div 在滚动时移动到蓝色 div 内。

它不应该永远无法退出蓝色 div。

有代码：http: [//jsfiddle.net/zhQZt/2/](http://jsfiddle.net/zhQZt/2/)

我希望你明白我的意思...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-24T01:27:18.200

您正在寻找的 CSS 代码是`overflow: scroll;`，在这里解释：http: [//www.w3schools.com/cssref/pr_pos_overflow.asp](http://www.w3schools.com/cssref/pr_pos_overflow.asp)。

```
#blue {
    height:300px;
    width:200px;
    background:blue;
    overflow: scroll;
}

#red {
    height:50px;
    width:250px;
    background:red;
} 
```

[http://jsfiddle.net/zhQZt/2/](http://jsfiddle.net/zhQZt/2/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-24T01:40:26.470

您可以通过一些巧妙的定位和 z-index 来实现这一点，使其看起来像红色 div 包含在蓝色 div 中。添加了一个新的 div，其`z-index`值高于红色框，并添加了背景颜色以在红色框溢出时隐藏它。

新的 CSS：

```
#continue {
 background:white;
position:relative;
 z-index:2;
height:100%;
 width: 200px;

}
#blue {
    height:300px;
    width:200px;
    background:blue;

position:relative
}

#red {
    height:50px;
    width:200px;
    position:fixed;
    background:red;
    overflow:hidden;
    z-index:1;
}​ 
```

新的 HTML：

```
<div id="blue">
<div id="red">
</div>
</div>
<div id="continue">
<!--Your line breaks -->
</div>​ 
```

有关工作示例，请参见 jsfiddle：http: [//jsfiddle.net/zhQZt/5/](http://jsfiddle.net/zhQZt/5/)

# asp.net-mvc - 会员提供者 - 2 个不同的数据库

> ID：14016049
> 
> 赞同：0
> 
> 时间：2012-12-24T01:15:40.340
> 
> 标签：asp.net-mvc, membership-provider

当 MVC3 涉及 2 个不同的数据库时，我一直在研究一种使用会员提供程序的方法。

这是问题所在。

当用户登录时，数据库 A 用于获取角色和权限成功登录后，数据从数据库 B 处理。我有一个自定义提供程序。

寻找解决方案之一是在运行时在自定义提供程序中更改连接字符串。但我不确定何时何地去做。

如果有任何其他优雅的方式来处理角色和权限，请指向我那个方向。

谢谢

# regex - mvc3 正则表达式问题

> ID：14016051
> 
> 赞同：0
> 
> 时间：2012-12-24T01:15:46.773
> 
> 标签：regex, asp.net-mvc-3

我的页面上有一个正则表达式以允许 HTML 的某些标签我允许“p”但是如果有人输入“p style=”它会显示为无效字符我该如何更改它以允许“p style=”

```
[AllowHtml]
    [RegularExpression(@"^([^<]|<em>|</em>|<p>|</p>|<i>|</i>|<b>|</b>|<strong>|</strong>|a z|A Z|1 9|(.\.))*$", ErrorMessage = "Invalid character")] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-24T01:37:25.553

你改变这一点

```
<p> 
```

对此

```
<p( style=)?> 
```

但大概你想在你的风格标签中允许内容，比如`<p style="width:20">`

这可能是

```
<p( style="[^"]*") 
```

那么单引号呢？`<p style='width:20'>`

```
<p( style=["'][^"']*["']) 
```

但*真正的*答案是不要使用正则表达式来解析HTML，它必然会出错。我不使用 asp.net，但我想有可用的库。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-24T01:38:35.430

将部分更改`<p>`为： `<p( style=('[^']*'))?>`

请注意`?`这使得样式可选。

支持“引用”样式。如果您愿意，您可以使用“双引号”样式执行类似的操作。

# java - 为什么我会收到“Persistence Manager 已关闭”异常

> ID：14016052
> 
> 赞同：-1
> 
> 时间：2012-12-24T01:15:58.343
> 
> 标签：java, google-app-engine, jdo

我的应用程序的各个部分偶尔会抛出以下异常

```
Javax.jdo.JDOFatalUserException: Persistence Manager has been closed
    at org.datanucleus.jdo.JDOPersistenceManager.assertIsOpen(JDOPersistenceManager.java:2125)
    at org.datanucleus.jdo.JDOPersistenceManager.newQuery(JDOPersistenceManager.java:1247)
    at org.datanucleus.jdo.JDOPersistenceManager.newQuery(JDOPersistenceManager.java:1198)
    at org.datanucleus.jdo.JDOPersistenceManager.newQuery(JDOPersistenceManager.java:1352)
    at vik.sakshum.sakshumweb.server.LoginModuleServiceImpl.recoverPassword(LoginModuleServiceImpl.java:377)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:616)
    at com.google.apphosting.runtime.security.shared.intercept.java.lang.reflect.Method_$1.run(Method_.java:165)
    at java.security.AccessController.doPrivileged(Native Method)
    at com.google.apphosting.runtime.security.shared.intercept.java.lang.reflect.Method_.privilegedInvoke(Method_.java:163)
    at com.google.apphosting.runtime.security.shared.intercept.java.lang.reflect.Method_.invoke_(Method_.java:124)
    at com.google.apphosting.runtime.security.shared.intercept.java.lang.reflect.Method_.invoke(Method_.java:43)
    at com.google.gwt.user.server.rpc.RPC.invokeAndEncodeResponse(RPC.java:561)
    at com.google.gwt.user.server.rpc.RemoteServiceServlet.processCall(RemoteServiceServlet.java:208)
    at com.google.gwt.user.server.rpc.RemoteServiceServlet.processPost(RemoteServiceServlet.java:248)
    at com.google.gwt.user.server.rpc.AbstractRemoteServiceServlet.doPost(AbstractRemoteServiceServlet.java:62)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:637)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
    at org.mortbay.jetty.servlet.ServletHolder.handle(ServletHolder.java:511)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1166)
    at com.google.apphosting.utils.servlet.ParseBlobUploadFilter.doFilter(ParseBlobUploadFilter.java:102)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
    at com.google.apphosting.runtime.jetty.SaveSessionFilter.doFilter(SaveSessionFilter.java:35)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
    at com.google.apphosting.utils.servlet.TransactionCleanupFilter.doFilter(TransactionCleanupFilter.java:43)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
    at org.mortbay.jetty.servlet.ServletHandler.handle(ServletHandler.java:388)
    at org.mortbay.jetty.security.SecurityHandler.handle(SecurityHandler.java:216)
    at org.mortbay.jetty.servlet.SessionHandler.handle(SessionHandler.java:182)
    at org.mortbay.jetty.handler.ContextHandler.handle(ContextHandler.java:765)
    at org.mortbay.jetty.webapp.WebAppContext.handle(WebAppContext.java:418)
    at com.google.apphosting.runtime.jetty.AppVersionHandlerMap.handle(AppVersionHandlerMap.java:266)
    at org.mortbay.jetty.handler.HandlerWrapper.handle(HandlerWrapper.java:152)
    at org.mortbay.jetty.Server.handle(Server.java:326)
    at org.mortbay.jetty.HttpConnection.handleRequest(HttpConnection.java:542)
    at org.mortbay.jetty.HttpConnection$RequestHandler.headerComplete(HttpConnection.java:923)
    at com.google.apphosting.runtime.jetty.RpcRequestParser.parseAvailable(RpcRequestParser.java:76)
    at org.mortbay.jetty.HttpConnection.handle(HttpConnection.java:404)
    at com.google.apphosting.runtime.jetty.JettyServletEngineAdapter.serviceRequest(JettyServletEngineAdapter.java:146)
    at com.google.apphosting.runtime.JavaRuntime$RequestRunnable.run(JavaRuntime.java:447)
    at com.google.tracing.TraceContext$TraceContextRunnable.runInContext(TraceContext.java:454)
    at com.google.tracing.TraceContext$TraceContextRunnable$1.run(TraceContext.java:461)
    at com.google.tracing.TraceContext.runInContext(TraceContext.java:703)
    at com.google.tracing.TraceContext$AbstractTraceContextCallback.runInInheritedContextNoUnref(TraceContext.java:338)
    at com.google.tracing.TraceContext$AbstractTraceContextCallback.runInInheritedContext(TraceContext.java:330)
    at com.google.tracing.TraceContext$TraceContextRunnable.run(TraceContext.java:458)
    at com.google.apphosting.runtime.ThreadGroupPool$PoolEntry.run(ThreadGroupPool.java:251)
    at java.lang.Thread.run(Thread.java:679) 
```

这样的一段代码是here

```
public class AdminDashBoardServiceImpl extends RemoteServiceServlet
implements AdminDashBoardService{   
private static final Logger log =
Logger.getLogger(AdminDashBoardServiceImpl.class.getName());

private PersistenceManager pm;

private static final long serialVersionUID = 1L;

@Override
public List<NotificationBean> pullNotifications() throws Exception {
    log.info("start of pullNotifications");
     Long userId = getUserId();
    try{ 
         pm = PMF.get().getPersistenceManager();
         log.info("Logged in user is:" + userId);

         Query query = pm.newQuery(NotificationRecepient.class, "userId == :userId");
         @SuppressWarnings("unchecked")
         List<NotificationRecepient> notifyList = (List<NotificationRecepient>)query.execute(userId);
         if(notifyList.size() == 0)
             return null;

         //find associated notifications
         List<NotificationBean> nList = new ArrayList<NotificationBean>();
         for(NotificationRecepient notify: notifyList){
                Notification nData = pm.getObjectById(Notification.class, notify.getNotificationSeq());
                NotificationBean bean = new NotificationBean(nData.getNotificationSeq(), nData.getTitle(), nData.getDetail(),
                        nData.getCreationDate(), nData.isClosable());

                //#41769745 add notification in the right order
                boolean inserted = false;
                for(int i=0; i < nList.size(); i++){
                    if(bean.getCreationDate() != null && nList.get(i).getCreationDate() != null )
                    if(bean.getCreationDate().before(nList.get(i).getCreationDate())){
                        nList.add(bean);
                        inserted = true;
                        break;
                    }
                }

                if(inserted == false)
                    nList.add(bean);
             }  

         return nList;

    }catch(Exception e) {
        CommonServiceCode csc = new CommonServiceCode();
        csc.postToPivotalTracker("Error while pulling notifications", "User Data: userId:" + userId, e);

        log.severe("Exception in execute of pullNotifications");
        log.severe("Exception class is :" + 
                             e.getClass().getName());
        log.severe("Exception is :" + e.getMessage());
        e.printStackTrace();

        throw new Exception(e.getMessage() + "\nError while pulling notifications");

      } finally {
          try {
              if(pm != null && pm.isClosed() == false)
                  pm.close();
          } catch (Exception e) {
              log.severe("Exception in finally of execute of pullNotifications");
              log.severe("Exception class is :" + 
                                 e.getClass().getName());
              log.severe("Exception is :" + e.getMessage());
              throw new Exception(e.getMessage() + "Unable to close persistence manager");
          }
           log.info("end of pullNotifications");
      }
} 
```

}

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-16T09:54:09.887

我有两个建议，尽管可能无法解决您的问题，但可能会间接帮助您。

1.  不要声明`pm`为类级数据成员。你有需要这样做吗？我从来没有做。如果可以，请`pm`根据需要声明您的内部方法。一旦你关闭它，它就可以被丢弃（并且可能会最大限度地减少你获得异常的机会）。

2.  简化您的`pm.close()`代码。如果您不使用事务，为什么不尝试这样的事情：

    ```
    PersistenceManager pm = PMF.get().getPersistenceManager();
    try
    {
      //
      // Do your query stuff...
      //
    }
    catch(Exception e)
    {
      //
      // Your code...
      //
    }
    finally
    {
      pm.close();
    } 
    ```

# css - 让两个 div 漂浮在另一个的角落

> ID：14016061
> 
> 赞同：0
> 
> 时间：2012-12-24T01:17:44.303
> 
> 标签：css, html, position, z-index

这是我需要的。我将有一个主 div，其中包含我的大部分内容。我不知道会有多少内容，所以我不能对主 div 的高度（比如说，以 px 为单位）做出任何假设。我需要做的是使两个 div（具有一定的固定大小）位于主 div 的左上角（当然，z-index 大于主 div）和右下角相同的div。我真的不知道如何做到这一点：谁能告诉我该怎么做？

非常感谢你！

马泰奥

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-24T01:34:02.913

您需要做的就是将主 div 位置设置为相对并将两个“角”覆盖绝对放置，一个顶部和左侧 0，另一个底部和右侧 0。如果您必须重叠角落，您将拥有使用负值（例如顶部：-5px；左侧：-5px；）。

```
/* The required CSS rules */
#container {
  position:relative;
}

.tl,.br {
  position:absolute;
}

.tl {
  left:0;
  top:0;
}

.br {
  right:0;
  bottom:0;
} 
```

这里是 HTML 代码：

```
<div id="container">
  <div class="tl"></div>
  <div class="br"></div>
</div> 
```

看看[这里](http://jsfiddle.net/axelmichel/7Bk7E/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-12-10T01:10:13.040

这应该适用于在另一个角落制作两个 div

```
.container{
  display: flex;
  justify-content: space-between;
  align-items: center;
}
```

```
<div class="container">
  <div>move left side</div>
  <div>move right side</div>
</div>
```

# android - 如何使用我的 Android 自定义应用程序图像创建图库小部件

> ID：14016063
> 
> 赞同：0
> 
> 时间：2012-12-24T01:18:18.593
> 
> 标签：android, android-widget, widget, android-gallery, android-photos

我想为我的应用程序创建一个小部件。我希望它像默认的画廊小部件或 Youtube 小部件，用户可以在其中滚动浏览卡片堆栈。我的应用程序中有一些自定义图像。我想显示这些自定义图像并让用户滚动浏览它。当他单击图像时，我想将他带到应用程序。

是否有任何类型的库或任何代码示例可以用来执行此操作。请让我知道任何对我有帮助的信息。感谢您的时间和努力。

![在此处输入图像描述](../Images/a6820b09832c21e682f3f9000000d76e.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-29T08:45:46.677

您想要的功能可以通过使用该`StackView`功能来实现。在这里，我为您提供了一些查看链接，它肯定会对您有所帮助。
链接：
1）[StackView1](http://mytutorialonline.com/android/stackview)
2）[StackView 2](http://www.thaicreate.com/mobile/android-stackview.html)
3）[StackWidget](http://docs.huihoo.com/android/3.0/resources/samples/StackWidget/src/com/example/android/stackwidget/index.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-24T04:19:18.907

是的，你可以使用图库小部件来做到这一点。

这是 XML 中的厨房视图：

```
<Gallery 
    android:id="@+id/Gallery01" 
    android:layout_width="fill_parent" 
    android:layout_height="wrap_content"
    > 
```

这将使您能够水平滚动，并且您可以为此执行功能..您可以谷歌搜索 Galleyview 选项，有很多可用的教程..

# python - Django - syncdb 不创建表

> ID：14016064
> 
> 赞同：8
> 
> 时间：2012-12-24T01:18:23.477
> 
> 标签：python, django

我向现有模型添加了一个多对多字段，并希望`syncdb`创建一个新表，但那里什么都没有。这是模型的样子：

```
class Author(models.Model):
    first_name = models.CharField(max_length=50)
    last_name = models.CharField(max_length=50)
    email = models.EmailField()

    def __unicode__(self):
        return "{0} {1}".format(self.first_name, self.last_name)

class Book(models.Model):
    title = models.CharField(max_length=100)
    authors = models.ManyToManyField(Author)

    def __unicode__(self):
        return self.title 
```

运行`sql myapp`使用新表打印正确的语句，但这在我运行时没有反映出来`syncdb`。`validate`也没有返回错误。有谁知道这里可能是什么问题？还是更好的诊断方法？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-12-24T01:28:53.850

根据设计，syncdb 命令不会为现有模型创建多对多表。此决定在[票 2229](https://code.djangoproject.com/ticket/2229)上进行了解释。

这给你留下了几个选择。

*   如果您的 Book 模型中没有任何数据，请删除该表并重新运行 syncdb。Django 将重新创建 book 表和多对多表。
*   使用 dbshel​​l 命令，并使用 sql myapp 的输出创建多对多连接表。
*   如果您使用 Django 进行多个模式迁移，请与[South](http://south.readthedocs.org/en/latest/about.html)交朋友。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-24T02:46:58.060

我在 django 文档中发现这个解释很有用：[SchemaEvolution](https://code.djangoproject.com/wiki/SchemaEvolution)。

数据库迁移的事实标准是 Django South。

它并不完美，但是，它工作得很好。在运行迁移文件之前，您应该始终检查（并在必要时进行编辑），以确保它确实完成了它应该做的事情。[你可以在这里](http://south.readthedocs.org/en/latest/tutorial/part1.html)查看他们的教程。

此外，如果您运行：

```
python manage.py inspectdb > somefile.txt 
```

您可以快速检查您的数据库结构是否与您的 django 模型匹配。

# java - AppEngine - 列表字段上的 JDO 查询

> ID：14016065
> 
> 赞同：1
> 
> 时间：2012-12-24T01:18:48.300
> 
> 标签：java, google-app-engine, google-cloud-datastore, jdo

我正在使用 AppEngine for Java，我有一个 JDO 实体定义如下：

```
Quote
| id(Long) | quote(String) | author(String) | 
```

我意识到我的引用可能来自多个作者，以防我想进行简短的讨论，所以我需要将作者从简单`String`更改为`List<String>`.

我似乎明白我现在可以使用 IN 运算符而不是标准 == 来查询单个（或多个）作者，如下所示：

```
Query q = _pm.newQuery(Quote.class);
//q.setFilter("author == authorParam");
q.setFilter("author IN [authorParam]");
q.declareParameters("String authorParam"); 
```

这适用于 Java SDK 吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-24T08:18:55.553

从什么时候开始“IN”成为 JDOQL 关键字？JDOQL 与 Java 共享语法，因此使用*{collectionObj}.contains(Object)*是该主题的所有文档所说的，其中 collectionObj 可以是输入集合参数

# ruby-on-rails - 仅显示前 n 条关联记录 - Rails 视图

> ID：14016066
> 
> 赞同：2
> 
> 时间：2012-12-24T01:19:01.060
> 
> 标签：ruby-on-rails, ruby-on-rails-3

```
class Car < ActiveRecord::Base
    has_many :pictures
end

class Picture < ActiveRecord::Base
    belongs_to :car
end 
```

在我的一个观点中，我想显示前 8 张图片。

我有以下内容，但不确定这是否是最好的方法

```
# simplified...
<% @car.pictures.each_with_index do |p,i| %>
    <%= p.image.url %>
    <% break if i == 7 %>
<% end %> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-24T01:22:50.657

```
<% @car.pictures.limit(8).each do |p| %>
  <%= p.image.url %>
<% end %> 
```

# javascript - Paper.js 垫片配置 Require.js

> ID：14016068
> 
> 赞同：5
> 
> 时间：2012-12-24T01:19:13.833
> 
> 标签：javascript, jquery, requirejs, paperjs

我正在尝试初始化应用程序，但似乎无法让纸质 js 正确加载到我的脚本中。我使用 require.js 作为我的 AMD 加载程序，并尝试使用 shim 模块加载纸质 js。

这是我的代码：

```
requirejs.config({
    urlArgs: "bust=" + (new Date()).getTime(),//used to keep the browser from caching the scripts as we move
    baseUrl : "scripts",//base scripts page!
    paths : {   
        'jquery' : "../components/jquery/jquery.min", //specific libraries -- can be specified later
        'underscore' : "../components/underscore/underscore",
        'paper' : "../components/paper/paper"
    },
    shim: {
        'underscore': {
            exports: '_'
        },
        'paper' : {
            exports: 'Paper'
        },
    },
});

// initialize the document with a doc ready!

requirejs(["jquery", "underscore", "paper"], function ($, _, Paper) {
    alert(_);
    alert(Paper);
}); 
```

第一个警报工作正常，（下划线）意味着它加载正常，但我似乎无法弄清楚如何让 paper.js 正常工作。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T08:13:28.773

PaperJS 全局命名空间是“paper”。

只需将“Paper”替换为“paper”，它应该可以工作。

```
'paper' : {
    exports: 'paper'
} 
```

# windows - 当目标应用程序在后台执行时，为什么我的 SendMessage 调用失败？

> ID：14016069
> 
> 赞同：-1
> 
> 时间：2012-12-24T01:19:20.030
> 
> 标签：windows, winapi

我正在尝试将文本发送到 3rd 方应用程序中的 2 个不同的文本框。我的代码有效。虽然如果我的应用程序在后台执行它就不起作用。只有当我发送文本的程序在我的后面时。

有谁知道这是什么原因？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T03:43:16.063

使用 PostMessage 而不是 SendMessage - SendMessage 在返回之前等待被调用的 winproc 处理消息，PostMessage 将消息放在应用程序队列中并立即返回。

# mysql - MySQL 找不到我的表？

> ID：14016070
> 
> 赞同：0
> 
> 时间：2012-12-24T01:19:33.133
> 
> 标签：mysql

我重新格式化了我的 C 盘，重新安装了 windows 的 mysql，然后删除了我的 2 个日志文件 + ibdata1。我在我的配置文件中设置了数据路径，并且能够连接到我的数据库。我看到了我所有的数据库但是如果我尝试选择任何数据我会得到一个错误

我记得我需要为每张桌子设置文件，所以我写了

```
innodb_file_per_table 
```

我重新启动了mysqld，但仍然出现错误。这是我具体得到的。t 是我的数据库的名称（它是一个测试数据库）。我看到了我拥有的所有数据库`show databases`。`show tables;`也可以。但我不能选择任何东西或`desc TABLE`. 我的数据库总共有 60GB，所以我担心我把它都弄坏了。

```
mysql> select * from inc;
ERROR 1146 (42S02): Table 't.inc' doesn't exist 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T03:24:26.940

问题是新的 my.ini 文件不再具有`innodb_data_home_dir="c:/path/to"`. 我从外部 HD 查看了我的 ini 文件以获取不同的数据库。我必须有不同版本的安装程序/mysql（即使它仍然是 5.5）

# mysql - 使用 PHP 将 MySQL 视图中的数据呈现为 HTML

> ID：14016073
> 
> 赞同：-1
> 
> 时间：2012-12-24T01:19:51.510
> 
> 标签：mysql, php

我正在尝试使用 PHP 在 MySQL 中简单地显示一个视图，但我不断出错。关于 T_STRING 错误可能是什么的任何建议？谢谢。

> 解析错误：语法错误，第 14 行 /home/theaudit/public_html/_sandbox/index.php 中的意外 T_STRING

```
<?php

// connection parameters
$db_host="a";
$username="b";
$password="c";
$db_name="d";

// connection variables
$db_con=mysql_connect($db_host,$username,$password);
$connection_string=mysql_select_db($db_name);

// page variables
$query = SELECT * FROM a_aif_remaining;
$result = mysql_query($query);

// connection to mysql and db 
mysql_connect($db_con) or die("Unable to connect to MySQL");
mysql_select_db($db_name) or die("Unable to select database");

// successful result

echo "<table border=1>
        <tr>
        <th>aif</th>
        <th>fee_source</th>
        <th>company_screename</th>
        <th>filing_date</th>
        <th>document_subtype</th>
    </tr>";

while($row = mysql_fetch_array($result))
  {
  echo "<tr>";
  echo "<td>" . $row['aif_id'] . "</td>";
  echo "<td>" . $row['fee_source_id'] . "</td>";
  echo "<td>" . $row['company_name_per_sedar'] . "</td>";
  echo "<td>" . $row['document_filing_date'] . "</td>";
  echo "<td>" . $row['document_subtype'] . "</td>";
  echo "</tr>";
  }
echo "</table>";

mysql_close($con);
?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-24T01:22:08.353

```
$query = SELECT * FROM a_aif_remaining; 
```

需要是：

```
$query = "SELECT * FROM a_aif_remaining"; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-24T01:23:30.770

让自己成为一个更好的编辑器，您可以立即修复和改进您的代码：

```
<?php

// connection parameters
$db_host = "a";
$username = "b";
$password = "c";
$db_name = "d";

// connection variables + connection to mysql and db
$db_con = mysql_connect($db_host, $username, $password);
$result = mysql_select_db($db_name, $db_con);

// page variables
$query = 'SELECT * FROM a_aif_remaining';
$result = mysql_query($query, $db_con);

// successful result
echo '<table border=1>
    <tr>
    <th>aif</th>
    <th>fee_source</th>
    <th>company_screename</th>
    <th>filing_date</th>
    <th>document_subtype</th>
</tr>';

while ($row = mysql_fetch_array($result)) {
    echo "<tr>";
    echo "<td>" . $row['aif_id'] . "</td>";
    echo "<td>" . $row['fee_source_id'] . "</td>";
    echo "<td>" . $row['company_name_per_sedar'] . "</td>";
    echo "<td>" . $row['document_filing_date'] . "</td>";
    echo "<td>" . $row['document_subtype'] . "</td>";
    echo "</tr>";
}
echo "</table>";

mysql_close($db_con);
?> 
```

# python - 在 PyQT 中显示 QDialog 之后执行代码的惯用方式是什么？

> ID：14016077
> 
> 赞同：1
> 
> 时间：2012-12-24T01:21:26.063
> 
> 标签：python, qt, pyqt, pyside, qdialog

在使用任何一个显示 QDialog 之后，`show()`或者`exec_()`我需要动态添加一些额外的小部件。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T02:00:25.943

只需调用`show()`您的小部件：

```
#!/usr/bin/env python
#-*- coding:utf-8 -*-

import sip
sip.setapi('QString', 2)
sip.setapi('QVariant', 2)

from PyQt4.QtCore import *
from PyQt4.QtGui import *

class testDialogs(QWidget):
    def __init__(self, parent=None):
        super(testDialogs, self).__init__(parent)

        self.verticalLayout = QVBoxLayout(self)

        self.pushButton = QPushButton(self)
        self.pushButton.setText("Open a Dialog")

        self.pushButton1 = QPushButton(self)
        self.pushButton1.setText("Add a Text Edit")

        self.plainTextEdit = QPlainTextEdit(self)
        self.plainTextEdit.appendPlainText("This is a Widget")

        self.verticalLayout.addWidget(self.pushButton)
        self.verticalLayout.addWidget(self.pushButton1)
        self.verticalLayout.addWidget(self.plainTextEdit)

        self.pushButton.clicked.connect(self.on_pushButton_clicked)
        self.pushButton1.clicked.connect(self.on_pushButton1_clicked)

    @pyqtSlot()
    def on_pushButton_clicked(self):
        dialog = QDialog(self)
        verticalLayout = QVBoxLayout(dialog)

        plainTextEdit = QPlainTextEdit(dialog)
        plainTextEdit.appendPlainText("This is a Dialog")

        buttonBox = QDialogButtonBox(dialog)
        buttonBox.setOrientation(Qt.Horizontal)
        buttonBox.setStandardButtons(QDialogButtonBox.Cancel|QDialogButtonBox.Ok)
        buttonBox.setObjectName("buttonBox")

        verticalLayout.addWidget(plainTextEdit)
        verticalLayout.addWidget(buttonBox)

        buttonBox.accepted.connect(dialog.close)
        buttonBox.rejected.connect(dialog.close)
        dialog.show()

    @pyqtSlot()
    def on_pushButton1_clicked(self):
        plainTextEdit = QPlainTextEdit(self)
        plainTextEdit.appendPlainText("This is another Text Edit")

        self.verticalLayout.addWidget(plainTextEdit)
        plainTextEdit.show()

if __name__ == "__main__":
    import  sys

    app = QApplication(sys.argv)
    main = testDialogs()
    main.show()
    sys.exit(app.exec_()) 
```

# compiler-construction - LR Parser GOTO 函数和 Epsilon

> ID：14016082
> 
> 赞同：2
> 
> 时间：2012-12-24T01:22:17.083
> 
> 标签：compiler-construction, lr

我正在尝试学习编译器构造，我刚刚通读了关于 SLR 解析器的 Dragon Book 章节。因此，我决定制作一个简单的语法并尝试手动编写解析器代码。语法如下所示：

```
S -> A
A -> (A)A
A -> e, 
```

哪里`e`是空字符串产生。

根据 StackOverflow 上的[另一个问题](https://stackoverflow.com/questions/486920/lr1-parser-and-epsilon)，处于起始状态的项目应如下所示

```
S -> .A
A -> .(A)A
A -> .e, 
```

但是 GOTO 函数会是什么样子。我知道这一点`GOTO( '(' ) = *some state with A -> (.A)A*`，但我无法真正理解`GOTO(e)`。解析器看到一个空字符串并没有什么意义。可以？

谢谢大家！

迈克尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-09T20:00:02.143

不，解析器看不到空字符串。它看到的是传入的符号（下一个令牌）。如果传入的符号没有导致 goto 操作（进入新状态），则解析器被迫进行归约 (A -> e)，然后基于 A 执行 goto（非终结转换）。

```
In State:   

A -> '(' . A ')' A
A -> . '(' A ')' A 
A -> e

if the input symbol is not '(', then the parser will make the reduction:

A -> e

and go to the new state:

A -> '('  A . ')' A 
```

# css - Firefox中图像悬停的css3变换

> ID：14016087
> 
> 赞同：0
> 
> 时间：2012-12-24T01:23:14.907
> 
> 标签：css

```
 .mark.studio{
       background: url(../images/studio_icon.png) no-repeat;
       -webkit-transition: all .3s ease-in-out;
      -moz-transition: all .3s ease-in-out; 
       -ms-transition: all .3s ease-in-out; 
       height: 50px;
       width: 50px;
       z-index:103 !important;
    }

    .mark.studio:hover{
       -webkit-transition: all .3s ease-in-out;
      -moz-transition: all .3s ease-in-out; 
      -ms-transition: all .3s ease-in-out; 
       background: url(../images/studio_icon-hover.png) no-repeat;
       z-index:103 !important;

} 
```

有了这个悬停的css，图像从原始图像变形为悬停图像，产生了非常酷的效果，在Firefox和IE9中，我只是得到了一个悬停图像替换。我将 -webkit-transition 放在两个选择器中，但我很确定它只需要在 .mark.studio

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T01:25:42.530

`transition`指定;的无前缀版本 Firefox 和 Internet Explorer 删除了前缀。（请注意，它是 Internet Explorer **10**；IE9 不支持`transition`。）

```
.mark.studio {
    background: url(../images/studio_icon.png) no-repeat;
    -webkit-transition: all .3s ease-in-out;
       -moz-transition: all .3s ease-in-out; 
            transition: all .3s ease-in-out; 
    height: 50px;
    width: 50px;
    z-index: 103 !important;
}

.mark.studio:hover {
    background-image: url(../images/studio_icon-hover.png);
} 
```

我冒昧地离开`z-index`和`transition`离开`:hover`国家；再次添加它们是没有意义的。（除非你有另一个`z-index`覆盖`!important`它，这将是一个*非常糟糕的设计*。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-24T01:27:39.267

Internet Explorer 9 不支持 -ms-transition 标签，它只能在 Internet Explorer 10 及更高版本上正常工作。IE10 两者都支持。

# .net - 二进制流损坏的可能原因是什么？

> ID：14016089
> 
> 赞同：0
> 
> 时间：2012-12-24T01:23:33.850
> 
> 标签：.net, serialization, c++-cli, runtime, binary-serialization

我正在尝试学习如何进行二进制序列化。

每次我尝试反序列化之前序列化的对象时都会引发此异常：

```
Binary stream '161' does not contain a valid BinaryHeader. Possible causes are invalid 
stream or object version change between serialization and deserialization. 
```

这是我班级的标题：

```
 [Serializable]
    public ref class Servis{
        String ^_nazivServisa;
        DateTime ^_datumOsnivanjaServisa;
        double _popustZaStalneKlijente;          
        [NonSerialized] List<Izvjestaj ^> ^_izvjestaji;
        [NonSerialized] List<StalniKlijent ^> ^_stalniKlijenti;
        [NonSerialized] List<Vozilo ^> ^_poznataVozila; 
```

这是 GetObjectData 方法，在同一个类中设置为公共：

```
 virtual void GetObjectData(SerializationInfo^ info, StreamingContext context){
                info->AddValue("Naziv servisa", _nazivServisa);
                info->AddValue("Datum osnivanja servisa", _datumOsnivanjaServisa->ToString());
                info->AddValue("Popust za stalne klijente", _popustZaStalneKlijente);
            } 
```

这是用于反序列化的构造函数：

```
 protected:
        Servis(SerializationInfo ^info, StreamingContext context){
                _nazivServisa = info->GetString("Naziv servisa");
                _datumOsnivanjaServisa = Convert::ToDateTime(info->GetString("Popust za stalne klijente"));
                _popustZaStalneKlijente = info->GetDouble("Popust za stalne klijente");
                _izvjestaji=gcnew List<Izvjestaj ^>;
                _stalniKlijenti = gcnew List<StalniKlijent ^>;
                _poznataVozila = gcnew List<Vozilo ^>;
            } 
```

这是我尝试打开文件并反序列化它的代码块；如果文件不存在，则会显示一个新对话框来输入一些数据，然后对文件进行序列化

```
 BinaryFormatter ^b = gcnew BinaryFormatter;
        try{
            FileStream ^fs = gcnew FileStream("..\\Datoteke\\Servis.dat", FileMode::Open);              
            _servis = dynamic_cast<Servis ^>(b->Deserialize(fs));   
            fs->Close();
            }
        catch(FileNotFoundException ^exc){
            KreirajServis();
            try{
                FileStream ^fs = gcnew FileStream("..\\Datoteke\\Servis.dat", FileMode::Create);                    
                b->Serialize(fs, _servis);
                fs->Close();
                }
            }
           }

private: void KreirajServis(){
         PrvoPokretanje ^p = gcnew PrvoPokretanje();
         p->ShowDialog();
         _servis=p->dajServis();

         } 
```

现在，异常消息说可能的原因是无效的流或序列化和反序列化之间的对象版本更改。由于我在序列化和反序列化之间没有接触过我的课程，我猜问题出在流上，它是无效的（或者是别的什么东西！？）。

请有人指出我正确的方向，将不胜感激。:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T08:10:15.057

DateTime 是一个值类。因此，最简单的方法是在 Servis 中使用该 sintax，而不是对 DateTime 使用处理程序

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-24T03:51:18.983

您的序列化代码示例用于编写日期/时间：

```
info->AddValue("Datum osnivanja servisa", _datumOsnivanjaServisa->ToString()); 
```

但反序列化代码如下：

```
_datumOsnivanjaServisa = Convert::ToDateTime(info->GetString("Naziv servisa")); 
```

因此，您正在编写一个名称为“Datum osnivanja servisa”的值，但尝试使用名称“Naziv servisa”读回它。

如果您的代码是这样编写的，而不仅仅是您问题中的转录错误，那么它几乎肯定是您的问题的原因。

# php - 向 Magento 用户帐户添加新页面

> ID：14016092
> 
> 赞同：0
> 
> 时间：2012-12-24T01:24:44.837
> 
> 标签：php, magento, content-management-system, user-accounts

一段时间以来，我一直停留在正确的方法上。登录/创建后，我想在前端的 Magento 用户帐户中添加一个新页面。除了帐户创建之外，我们还希望从客户那里收集一些信息。该页面需要动态生成，因为它将从数据库中提取信息，因此 CMS 不是一个选项。

我知道我需要创建一个模板 .phtml 文件。我也知道在哪里覆盖 customer.xml 以显示链接。

但是，我不知道如何使页面显示（我可以添加链接，但它转到 404）。我假设有某种 xml 引用可以将 url 关联到文件，以及要使用的模板。如果有人能指出我正确的方向，我可能可以对格式进行逆向工程。

我也不知道如何正确使用 Magento 的现有功能来获取提交信息。我想在提交后显示相同的页面，并准备好更改字段中的信息。我可以/应该只使用相同的 .phtml 模板文件来处理表单提交吗？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-24T07:34:11.463

1.  创建具有所需功能的自定义 phtml 页面。
2.  创建一个 cms 页面并从其中调用 .phtml 页面，如下所示，

> {{block type="core/template" template=".../.../yourcustom.phtml"}}

3.你的问题解决了。

我认为您对如何处理 cms 页面以获得所需的功能有一个很好的想法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-24T04:03:57.527

可以自定义账户信息页面的phtml文件../customer/account/edit/

但是要强制填写此表格，您需要制作模块并添加观察者控制器操作预分配并添加检查所需数据的方法，如果没有将它们重定向到帐户信息页面

# ruby-on-rails - 为什么我的帖子将我带到错误的 URL？

> ID：14016093
> 
> 赞同：2
> 
> 时间：2012-12-24T01:24:55.847
> 
> 标签：ruby-on-rails, ruby-on-rails-3, routing

当我发帖时，它需要我

> example.com/shop.:community_name

代替

> example.com/shop/:community_name

**我的路线.rb**

```
resources :communities, :path => "shop", do
    resources :community_topics, :path => "topic", :as => :'topic'
end 
```

**_form.html.erb**

```
<%= form_for @community, :html => { :class => 'form-horizontal' } do |f| %>
...
    <%= f.submit nil, :class => 'btn btn-primary' %>
    <%= f.submit 'Destroy', 
    :confirm => t('.confirm', :default => t("helpers.links.confirm", :default => 'Are you sure?')),
    :class => 'btn btn-danger', :name => 'destroy' unless @community.new_record? %>
<% end %> 
```

**在 community_controller.rb 中更新操作**我使用 to_param 这就是为什么使用 community_name

```
def update

        @community = Community.find_by_community_name(params[:id])      

        respond_to do |format|
            if @community.update_attributes(params[:community])
                format.html { redirect_to communities_path(@community.community_name), notice: 'Community was successfully updated.' }
                format.json { head :no_content }
            else
                format.html { render action: "edit" }
                format.json { render json: @community.errors, status: :unprocessable_entity }
            end
        end
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T01:30:36.887

它应该是

```
... redirect_to community_path(@community.community_name) ... 
```

在`update`你的行动中`CommunitiesController`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-24T01:35:12.400

讨厌命名路线...

```
redirect_to @community 
```

# c# - 使用 C# 在 Windows 8 上获取当前线程 ID

> ID：14016094
> 
> 赞同：12
> 
> 时间：2012-12-24T01:24:58.460
> 
> 标签：c#, multithreading, windows-runtime, windows-store-apps

System.Threading.Thread（带有 .CurrentThread.ThreadId 等）已从 WinRT 中删除。是否可以在 Windows 8 中获取当前线程 ID（用于调试和日志记录？）？

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-12-24T11:07:47.790

查看[`Environment.CurrentManagedThreadId`](http://msdn.microsoft.com/en-us/library/system.environment.currentmanagedthreadid.aspx)Windows 商店应用程序支持哪些。

> **适用于 Windows 应用商店应用的 .NET**
> 
> 支持：Windows 8

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-24T11:03:11.277

回到根源：

[GetCurrentThreadId 函数](http://msdn.microsoft.com/en-us/library/windows/desktop/ms683183%28v=vs.85%29.aspx) `Retrieves the thread identifier of the calling thread.`

*Windows XP、Windows Server 2003、Windows Vista、Windows 7、Windows Server 2008 和 Windows Server 2008 R2 上的 WinBase.h（包括 Windows.h）；Windows 8 和 Windows Server 2012 上的 Processthreadsapi.h。*

# mysql - MySQL获取一个字段属于数组的所有行，并且所有成员在另一个字段中都有一个共同的值

> ID：14016097
> 
> 赞同：0
> 
> 时间：2012-12-24T01:25:12.797
> 
> 标签：mysql, sql

假设我有下表的用户属性：

```
id, user_id  properties
1,  NULL,    prop_ss1
2,  NULL,    prop_ss2
3,  2,       prop_1
4,  2,       prop_2
5,  3,       prop_1
6,  3,       prop_2
7,  3,       prop_3
8,  4,       prop_1 
```

给定一个 user_ids 数组，我如何获得所有 user_id 为 NULL 的属性的列表（如果您愿意，可以将其称为全局属性），或者在给定数组中的所有 user_ids 之间共享？

例如，给定一个数组 (2,3)，我想得到：

```
prop_ss1
prop_ss2
prop_1
prop_2 
```

或者，给定一个数组（2,3,4），我想得到：

```
prop_ss1
prop_ss2
prop_1 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T01:28:17.483

尝试两个单独查询的 UNION：

```
SELECT properties FROM your_table WHERE user_id IS NULL

UNION

SELECT properties
FROM your_table
WHERE user_id IN (2, 3)
GROUP BY properties
HAVING COUNT(DISTINCT user_id) = 2 
```

在线查看它：[sqlfiddle](http://sqlfiddle.com/#!2/bd707/4)

最后一行中的数字`2`是您要查询的用户数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-24T01:30:50.013

```
select distinct properties from table
where user_id is null
or user_id in (1,2,3) 
```

抱歉误读了您的帖子，需要分组并拥有

# groovy - 在 gremlin 中保存中间步骤

> ID：14016100
> 
> 赞同：1
> 
> 时间：2012-12-24T01:25:52.327
> 
> 标签：groovy, neo4j, gremlin

我正在编写一个查询，它应该检测图表中的某些循环，这意味着我需要为路径中的某些节点分配名称，以便稍后可以将路径中的节点与保存的节点进行比较。例如 A -> B -> C -> A。这在 gremlin 中可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T14:58:38.940

听起来你正在寻找这样的东西：

[https://github.com/tinkerpop/gremlin/wiki/Except-Retain-Pattern](https://github.com/tinkerpop/gremlin/wiki/Except-Retain-Pattern)

您可以在其中保留先前遍历的顶点列表，然后在稍后的遍历中使用该列表。

# java - 高效地执行具有多个相似类的 CRUD 操作？

> ID：14016118
> 
> 赞同：2
> 
> 时间：2012-12-24T01:28:51.230
> 
> 标签：java, oop, optimization

我有一个我们称之为**Vehicle**的抽象类。**柴油**、**电动**和**燃气**类扩展**了车辆**。这 3 个类有自己的方法和变量，以及它们从**Vehicle**继承的内容。

我想将**Diesel**、**Electric**和**Gas**对象中的变量放入数据库**中的同一个表**中。从*Electric*对象创建的记录只会有几个空列，其中没有与*Diesel*对象相同的变量，等等。

我想创建插入行、更新行和检索行的方法，所有这些方法都接受来自这些类的对象作为参数。

我正在寻找这个问题的最佳解决方案，因为我认为我不知道它是什么。到目前为止，我能想到一些解决方案，但我不喜欢其中任何一个：

1.  **创建以下每个方法中的 4 个：**插入、更新、删除和检索/选择。这将导致**大量**重复代码。

    ```
    public void AddVehicle(Diesel diesel)
    public void AddVehicle(Electric electric)
    public void AddVehicle(Gas gas)

    public Electric ViewVehicles()
    public Diesel ViewVehicle()
    public Gas ViewVehicle()

    public void RemoveVehicle(Diesel diesel)
    public void RemoveVehicle(Electric electric)
    public void RemoveVehicle(Gas gas)

    public void UpdateVehicle(Diesel diesel)
    public void UpdateVehicle(Electric electric)
    public void UpdateVehicle(Gas gas) 
    ```

2.  **创建每个方法以便它可以接受任何对象：（**而不是采用**任何**对象，有没有办法指定它可以采用的对象列表，但仍然只采用其中一个？即*。public void AddVehicle（Dieseldiesel | | 电电 || 气气)* )

    ```
    public void AddVehicle(Object vehicle)

    public Object ViewVehicle(Object vehicle)

    public void RemoveVehicle(Object vehicle)

    public void UpdateVehicle(Object vehicle) 
    ```

3.  **创建一个“主”类，该类可以包含任何类**（柴油、电力或燃气），然后将其传递到插入/更新/查看/删除方法中。（将插入/更新/查看方法设置为接受此“主”类作为参数。）“主”类的不完整构造函数：

    ```
    public MasterVehicle(Diesel diesel)
    public MasterVehicle(Electric electric)
    public MasterVehicle(Gas gas) 
    ```

4.  **其他一些适当的、更清洁的、更有意义的解决方案。**

但是＃4可能是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-25T12:15:05.677

我建议将持久层（关系数据库）与面向对象的模型层（Java）分离，忘记“CRUD”操作，更多地考虑**对象行为**。

有一个类`Garage`实现以下[集合](http://docs.oracle.com/javase/7/docs/api/java/util/Collection.html)会很好`Vehicles`：

```
interface Garage extends Collection<? extends Vehicle> {
  Vehicle find(int id);
} 
```

然后，您可以像这样使用它：

```
Garage garage = new GarageInSql(/* your persistence layer details */);
Electric vehicle = Electric.class.cast(garage.find(123));
int mileage = vehicle.mileage();
vehicle.rename("Chevrolet");
garage.remove(vehicle); 
```

如果需要控制交易，再介绍一种方法`Garage#commit()`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-24T01:44:34.783

正如您在问题开始时所说：

> 我有一个抽象类，我们称之为 Vehicle。柴油、电动和燃气器具类车辆。

因此，Vehicle 是超类，而 Diesel、Electric 和 Gas 是专业。

db 上的表可以反映这种布局

```
Vehicle (id, brand, price, type) // type could help you selecting electric,gas,diesel

Electric(vehicle_id, volts, amp, ohms, other_specific_stuff)
Gas(vehicle_id, pressure, gas_type, other_specific_stuff) 
Diesel(vehicle_id, other_specific_stuff) 
```

当您查询您的车辆时，您可以使用左外连接

```
select * from vehicle as v
    left outer join electric as e on (v.id = e.vehicle_id)
    left outer join gas as g on (v.id = g.vehicle_id)
    left outer join diesel as d on (v.id = d.vehicle_id) 
```

然后使用 type 字段映射到特定的子类。

当您存储或更新数据库中的对象时，您需要一个方法来存储公共部分：

```
void update(Vehicle v) { 
    // store v.* in Vehicle table
} 
```

以及为特定汽车存储其余部分的方法

```
void update(Electric e) {
    update(v)
    // store e.* on Electric table
} 
```

删除和插入也是一样。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-24T01:46:09.183

幸运的是，其他人也必须处理这个问题:)

你实际上有两个问题。一个是您确定的 API 的设计，另一个是如何处理对 DB 的实际存储/读取。

至于第一个问题，我会选择你的选项#2，因为它最好遵循 OO 设计原则。但我不会让该方法接受`Object`. 相反，让它接受一个`Vehicle`类型。

对于第二个问题，您可以查看以下链接：[实体继承映射策略](http://docs.oracle.com/javaee/6/tutorial/doc/bnbqn.html#bnbqr)。即使您不打算使用 JPA（或任何 ORM 框架），这些也可能是您想要了解的策略。

这里对上面链接中提到的单表策略进行更详细的解释。这应该给你一个好主意 --> [继承：单表策略](https://docs.jboss.org/ejb3/app-server/tutorial/singleinheritance/single.html)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-24T01:40:44.067

关于您的选择**二**：首先，只要 **Diesel**、**Electric**和**Gas**实施/扩展**Vehicle ，您就可以拥有****Vehicle**而不是**Object**。它应该完成这项工作。

 ******另外对于选项二中的 ViewVehicle ：

> public Object ViewVehicle（对象车辆）

您可以使用通用方法，以便它始终返回与它相同的类型。更多信息在这里：[http](http://docs.oracle.com/javase/tutorial/extra/generics/methods.html) ://docs.oracle.com/javase/tutorial/extra/generics/methods.html ...虽然我我不清楚为什么你试图将一个对象发送到一个方法，然后从该方法返回。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-12-24T01:51:47.423

Generic DAO 是您可能感兴趣的内容。尽量避免编写冗长的答案，所以这里是链接。 [j-genericdao](http://www.ibm.com/developerworks/java/library/j-genericdao/index.html)

您可以在互联网上找到很多通用 dao 的变体。******

# android - 微调器和编辑文本

> ID：14016119
> 
> 赞同：0
> 
> 时间：2012-12-24T01:28:52.943
> 
> 标签：android, if-statement, android-edittext, spinner

我正在尝试制作一个简单的应用程序，但我遇到了问题。我有一个由 4 个字符串组成的微调器 - 日期、日期、时间、位置。在微调器下，有 7 个从星期一到太阳的日期复选框，日期的编辑文本，时间的编辑文本和位置的编辑文本（纬度和经度）。如果我在微调器中选择“天”，如何使日期、时间和位置字段不可编辑？如果我在微调器中选择另一个字符串，反之亦然？意味着如果我选择时间，只能使用时间的edittext，另外3个变得不可编辑。som1 请帮助我，tq..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-24T01:38:00.213

您可以使用禁用/启用 EditText

```
EditText.setEnabled(false); 
```

或者您也可以通过将 setKeyListener null 设置为来禁用 EditText：

```
EditText.setKeyListener(null); 
```

例如 ：

```
private static final String[] weekitems={"day","date","time","location"};

    daySpinner.setOnItemSelectedListener(
        new OnItemSelectedListener() {
            @Override
            public void onItemSelected(
                AdapterView<?> parent, View view, int pos, long id
            ) {

                  String strsel=weekitems[pos];
                      if(strsel.equalsIgnoreCase("day")){
                         //disable EditText here
                      }else{
                          //enable EditText here
                      } 
            }

            @Override
            public void onNothingSelected(AdapterView<?> arg0) {}

        }
    ); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-24T01:32:57.950

您可以使用以下方法禁用 EditText：

```
EditText.setEnabled(false); 
```

你需要实现`OnItemSelectedListener`，然后在你的`onItemSelected`方法中你可以切换位置：

```
 public void onItemSelected(AdapterView<?> parent, View v, int position,
                long id) {
            switch(position){
                        case 0:
                         enableAll();
                         EditText.setEnabled(false);
                        break;

                      // etc.
}
        } 
```

# php - 使用 createNativeQuery 连接两个没有外键的实体

> ID：14016121
> 
> 赞同：2
> 
> 时间：2012-12-24T01:28:54.490
> 
> 标签：php, mysql, symfony, doctrine-orm

我想根据一个字段（类型）的值从两个不同的表中检索数据。基本上，如果类型是 2 或 3，则将 'subcategory_id' 分别与 category2 或 category3 相关联

简单的 SQL：

```
SELECT s.id, s.subcategory_id, s.type, IF(s.type = 2, c2.name, c3.name) as name
                                   FROM show_subcategory s
                                   LEFT JOIN category2 c2 ON (s.type = 2 AND s.subcategory_id = c2.id)
                                   LEFT JOIN category3 c3 ON (s.type = 3 AND s.subcategory_id = c3.id)
                                   WHERE s.category1_id = 1 ORDER BY s.order_list 
```

将 DQL 转换为存储库类：

```
$em = $this->getEntityManager();
    $rsm = new ResultSetMapping;
    $rsm->addEntityResult('Acme\CoreBundle\Entity\ShowSubcategory', 's');
    $rsm->addFieldResult('s', 'id', 'id');
    $rsm->addFieldResult('s', 'subcategory_id', 'subcategoryId');
    $rsm->addFieldResult('s', 'type', 'type');
    $rsm->addFieldResult('s', 'order_list', 'orderList');

    $rsm->addJoinedEntityResult('Acme\CoreBundle\Entity\Category2' , 'c2', 's', 'category2');
    $rsm->addFieldResult('c2', 'id', 'id');
    $rsm->addFieldResult('c2', 'name', 'name');

    $rsm->addJoinedEntityResult('Acme\CoreBundle\Entity\Category3' , 'c3', 's', 'category3');
    $rsm->addFieldResult('c3', 'id', 'id');
    $rsm->addFieldResult('c3', 'name', 'name');

     $q = $em->createNativeQuery("SELECT s.id, s.subcategory_id, s.type, IF(s.type = 2, c2.name, c3.name) as name
                                   FROM show_subcategory s
                                   LEFT JOIN category2 c2 ON (s.type = 2 AND s.subcategory_id = c2.id)
                                   LEFT JOIN category3 c3 ON (s.type = 3 AND s.subcategory_id = c3.id)
                                   WHERE s.category1_id = ? ORDER BY s.order_list", $rsm);
    $q->setParameter(1, $category1);

    return $q->getResult(); 
```

在 ShowSubcategory 的实体中，我添加了两个新属性来处理这个查询（category2，category3）：

```
/**
 * @var integer $id
 *
 * @ORM\Column(name="id", type="integer", nullable=false)
 * @ORM\Id
 * @ORM\GeneratedValue(strategy="AUTO")
 */
protected $id;

/**
 * @var integer $subcategoryId
 *
 * @ORM\Column(name="subcategory_id", type="integer", nullable=false)
 */
protected $subcategoryId;

/**
 * @var smallint $type
 *
 * @ORM\Column(name="type", type="smallint", nullable=false)
 */
protected $type;

/**
 * @var smallint $orderList
 *
 * @ORM\Column(name="order_list", type="smallint", nullable=true)
 */
protected $orderList;

/**
 * @var \Category1
 *
 * @ORM\ManyToOne(targetEntity="Acme\CoreBundle\Entity\Category1")
 * @ORM\JoinColumns({
 *   @ORM\JoinColumn(name="category1_id", referencedColumnName="id")
 * })
 */
protected $category1;

/**
 * @var category2
 *
 * @ORM\ManyToOne(targetEntity="Acme\CoreBundle\Entity\Category2")
 * @ORM\JoinColumns({
 *   @ORM\JoinColumn(name="subcategory_id", referencedColumnName="id")
 * })
 * @Assert\Blank()
 */
protected $category2;

/**
 * @var category3
 *
 * @ORM\ManyToOne(targetEntity="Acme\CoreBundle\Entity\Category3")
 * @ORM\JoinColumns({
 *   @ORM\JoinColumn(name="subcategory_id", referencedColumnName="id")
 * })
 * @Assert\Blank()
 */
protected $category3;

/**
 * Get id
 *
 * @return integer
 */
public function getId()
{
    return $this->id;
}

/**
 * Set category1
 *
 * @param \Acme\CoreBundle\Entity\Category1 $category1
 * @return ShowSubcategory
 */
public function setCategory1(\Acme\CoreBundle\Entity\Category1 $category1 = null)
{
    $this->category1 = $category1;

    return $this;
}

/**
 * Get category1
 *
 * @return Acme\CoreBundle\Entity\Category1
 */
public function getCategory1()
{
    return $this->category1;
}

/**
 * Set subcategoryId
 *
 * @param integer $subcategoryId
 * @return ShowSubcategory
 */
public function setSubcategoryId($subcategoryId)
{
    $this->subcategoryId = $subcategoryId;

    return $this;
}

/**
 * Get subcategoryId
 *
 * @return integer
 */
public function getSubcategoryId()
{
    return $this->subcategoryId;
}

/**
 * Set type
 *
 * @param smallint $type
 * @return ShowSubcategory
 */
public function setType($type)
{
    $this->type = $type;

    return $this;
}

/**
 * Get type
 *
 * @return smallint
 */
public function getType()
{
    return $this->type;
}

/**
 * Set order
 *
 * @param smallint $OrderList
 * @return ShowSubcategory
 */
public function setOrderList($orderList)
{
    $this->orderList = $orderList;

    return $this;
}

/**
 * Get OrderList
 *
 * @return smallint
 */
public function getOrderList()
{
    return $this->orderList;
}

public function getCategory2()
{
    return $this->category2;
}

public function setCategory2(Category2 $category2 = null)
{
    $this->category2 = $category2;
    return $this;
}

public function getCategory3()
{
    return $this->category3;
}

public function setCategory3(Category3 $category3 = null)
{
    $this->category3 = $category3;
    return $this;
} 
```

}

我得到这个错误：

```
Notice: Undefined index: id in /var/www/project/vendor/doctrine/orm/lib/Doctrine/ORM/UnitOfWork.php line 2402 
```

我不知道出了什么问题我尝试了几个想法，但似乎没有任何效果。有什么建议吗？。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-24T09:36:08.460

我想您必须明确添加`id`SELECT 子句：

```
SELECT s.id, s.subcategory_id, s.type, IF(s.type = 2, c2.name, c3.name) as name, c2.id as c2id, c3.id as c3id
    FROM show_subcategory s
    LEFT JOIN category2 c2 ON (s.type = 2 AND s.subcategory_id = c2.id)
    LEFT JOIN category3 c3 ON (s.type = 3 AND s.subcategory_id = c3.id)
    WHERE s.category1_id = ? ORDER BY s.order_list 
```

并调整 ResultSet 如下：

```
$rsm = new ResultSetMapping;
$rsm->addEntityResult('Acme\CoreBundle\Entity\ShowSubcategory', 's');
$rsm->addFieldResult('s', 'id', 'id');
$rsm->addFieldResult('s', 'subcategory_id', 'subcategoryId');
$rsm->addFieldResult('s', 'type', 'type');
$rsm->addFieldResult('s', 'order_list', 'orderList');

$rsm->addJoinedEntityResult('Acme\CoreBundle\Entity\Category2' , 'c2', 's', 'category2');
$rsm->addFieldResult('c2', 'c2id', 'id');
$rsm->addFieldResult('c2', 'name', 'name');

$rsm->addJoinedEntityResult('Acme\CoreBundle\Entity\Category3' , 'c3', 's', 'category3');
$rsm->addFieldResult('c3', 'c3id', 'id');
$rsm->addFieldResult('c3', 'name', 'name'); 
```

# php - 如果地址扩展 id = 'x' 则重定向页面？

> ID：14016122
> 
> 赞同：-1
> 
> 时间：2012-12-24T01:29:03.717
> 
> 标签：php, redirect

我正在尝试找到一种在 php 中重定向页面的方法，如果用户单击一个链接，该链接基本上会将它们从名为“profile.php?id=99994”的页面（如果 id 扩展名等于“99994”）和将它们重定向到 page.php。

这可以做到吗？

我知道这是一个非常奇怪的问题，但必须以这种方式完成。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-24T01:31:16.217

如，从内部`profile.php`？

```
if(isset($_GET['id']) && $_GET['id'] === '99994') {
    header('Location: page.php');
    exit();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-24T01:31:08.967

```
if ($_GET['id'] == 99994) {
    header("Location: /pathto/page.php");
    exit;
} 
```

php 函数`header()`用于重定向页面。显然我不知道你的路径系统，所以你必须稍微调整一下。`$_GET`但是当“ID”的值等于（并且仅等于）99994时，此代码将重定向。

# php - Eclipse/ZEND PHP 总是返回 500 服务器错误

> ID：14016128
> 
> 赞同：0
> 
> 时间：2012-12-24T01:30:21.500
> 
> 标签：php, eclipse, debugging, zend-framework, internal-server-error

最奇怪的是，我运行的每个脚本都会返回 500 服务器错误。

即使在一个全新的 PHP 项目中的一个空白文件中也是如此：

```
<?php echo "1"; ?> 
```

这只是突然发生的，没有配置更改。PHP 错误日志、Eclipse 或 PHP 服务器（ZEND 的查看器）中没有错误。为了以防万一，我重新启动了计算机。我在同一工作区中的另一个项目似乎运行良好，没有 500 个错误？

我一直在尝试返回不同的响应代码（将 REST API 放在一起），但我看不出我在 PHP 脚本中所做的任何事情会如何永久更改所有新项目中所有脚本的响应标头。对脚本的 Javascript 调用得到相同的错误（但看到 1）；

上面确实返回了 1，但 Eclipse 调试输出中的标题显示：

```
Status: 500 Internal Server Error
X-Powered-By: PHP/5.3.14 ZendServer
Set-Cookie: ZDEDebuggerPresent=php,phtml,php3; path=/
Set-Cookie: ZendDebuggerCookie=192.168.1.120%3A10000%3A0||00C|77742D65|1000; path=/
Content-type: text/html

1 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-03-12T16:20:00.357

删除此文件，然后使用 filezil 重新创建它

# javascript - 找不到javascript函数调用的来源

> ID：14016129
> 
> 赞同：2
> 
> 时间：2012-12-24T01:30:34.787
> 
> 标签：javascript, debugging

好的，所以我需要在网站上找到特定 javascript 函数的源代码。（除非没有办法按照我的要求去做，否则细节并不重要）

我可以在 html 代码 onclick="inbox.sendMessage();" 的链接中看到函数调用

我知道该函数确实有效，因为如果我使用插件 a 可以调用该页面上的函数，但是，我已经搜索了该页面中引用的每个 .js 文件，并且它们都不包含名为 sendMessage 的函数。

我要问的是，有没有办法将代码跟踪到源代码，也许是否有办法调试 html 并在触发 onclick 时中断，然后进入函数查看其源代码，但我确实这样做了不知道我该怎么做，或者是否有可能。任何帮助将不胜感激，谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-24T01:44:48.790

我想你可以这样做：

```
inbox.sendMessage 
```

在网络控制台中。（不带括号的函数名）
打印出函数的源代码。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-24T01:36:35.533

我通常使用 Opera，至少我是这样做的：

1.  打开 Opera Dragonfly ( `Ctrl`+ `Shift`+ `I`)。
2.  单击带有`onclick`处理程序的 HTML 标记。
3.  转到右侧列中的侦听器选项卡。
4.  查看`click`事件的侦听器。它向您显示文件和行号。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-24T02:07:08.477

sendMessage 可以声明为：

```
var inbox{
  sendMesssage:function(){
  }
}

//or

function inbox(){
  this.sendMessage=function(){
  }
}

// or

inbox.sendMessage=function(){}

// or ... 
```

因此，寻找“sendMessage(”或“函数 sendMessage”不会找到任何东西。

在 chrome、Internet Explorer 和 Firefox（带有 firebug）中，您可以按 F12 并进入调试，在那里您可以检查已加载的脚本，因为可能已经动态加载了脚本。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-24T02:26:45.860

```
#!/usr/bin/env ruby

Dir::glob("*").each do |name| 

        lineCount = 1

        File.open(name, "r").each do |line|
            puts "\nFile name: " + name + "\nline: " + lineCount.to_s  if line =~ /inbox.sendMessage/  && name != "findfunction.rb"
            lineCount += 1
        end

end 
```

写了一个快速的 ruby​​ 脚本来帮助你。要执行，首先确保您的机器上有一个 ruby​​ 解释器，然后将脚本放在包含所有相关文件的目录中。加载命令行终端，导航到所述目录并键入“ruby findfunction.rb”。

它会告诉你“inbox.sendMessage”的所有实例（文件+行号）。

# java - 具有未定义类型的 Java 参数

> ID：14016132
> 
> 赞同：3
> 
> 时间：2012-12-24T01:30:59.693
> 
> 标签：java, parameters

在 python 中，您不必指定函数参数的类型。有没有办法为 Java 方法参数执行此操作？如果说我不确定将输入什么样的参数。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-24T01:36:33.037

用对象或泛型试试这个：

目的：

```
public void foo(Object bar)
{

} 
```

泛型：

```
public <T> void foo(T bar) {

} 
```

* * *

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-24T01:49:54.143

Python、JavaScript 和类似的动态类型语言具有具有任意属性的对象，例如您可以编写以下代码：

```
someObj.someAttr 
```

如果类型具有这样的属性并且已设置，它将返回属性值，否则返回 null。

在 java 中最接近这个的是带有 String 键和 Object 值的 Map，所以试试这个：

```
public void someMethod(Map<String, Object> map) {
    Object o = map.get("someAttr");
    // do something with o, which may be null
} 
```

# objective-c - indexPath.row 使用 didSelectRow 正确返回，但没有使用 accessoryButtonTapped？

> ID：14016136
> 
> 赞同：1
> 
> 时间：2012-12-24T01:31:27.967
> 
> 标签：objective-c, uitableview

这是我的代码：

```
- (void)tableView:(UITableView *)tableView accessoryButtonTappedForRowWithIndexPath:(NSIndexPath *)indexPath
{
    [self performSegueWithIdentifier:@"editInfo" sender:nil];
}

- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender
{
    if ([[segue identifier] isEqualToString:@"editInfo"]) {
        EditInfoViewController *vc = [segue destinationViewController];
        NSInteger selectedIndex = [[self.tableView indexPathForSelectedRow] row];
        NSLog(@"%d",selectedIndex);
        [vc setSelectedIndex:selectedIndex];
    }
    else if ([[segue identifier] isEqualToString:@"sendMessage"]) {
                 ...
    }
} 
```

selectedIndex 变量始终 NSLogged 为 0...有什么建议吗？谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-24T03:13:49.230

点击 UITableViewCell 的附件按钮不会选择包含附件按钮的行。

当您调用时`performSegueWithIdentifier`，您可以将`indexPath`其作为传递`sender`，然后您可以在 中引用它`prepareForSegue`。

# jquery - 如何定位其类不包含此元素 ID 的元素？

> ID：14016138
> 
> 赞同：5
> 
> 时间：2012-12-24T01:31:32.410
> 
> 标签：jquery

具体来说，我想说：*对于class值不包含这个元素的ID值的元素，执行这个函数*。

例如，单击`#foo`将`fadeOut()`在其类不包含`.foo`在以下 HTML 中的列表项上执行：

```
<button id="foo">foo</button>
<button id="bar">bar</button>
<button id="baz">baz</button>
<ul>
    <li class="foo">Lorem</li>
    <li class="foo bar">Ipsum</li>
    <li class="baz">Dolor</li>
</ul> 
```

因此，单击`#foo`后，最后一个列表项应该会消失，因为前两个都包含`.foo`该类。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-24T01:36:41.430

尝试

```
$('button').on('click', function(){
    $('li:not(.'+this.id+')').fadeOut();
}); 
```

[**演示**](http://jsfiddle.net/mowglisanu/PM9gw/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-24T01:39:04.287

您需要以某种方式选择按钮，以便附加您的事件。然后你需要提取 id 并选择那些不包含该类的。这是使用该`not`方法的示例：

```
 $(':button').click(function(){
  $('li').not('.' + $(this).attr('id')).fadeOut(); 
}); 
```

[http://jsfiddle.net/ureyes84/Fr7dm/2/](http://jsfiddle.net/ureyes84/Fr7dm/2/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-24T01:43:16.187

您可以使用非选择器：[http ://api.jquery.com/not-selector/](http://api.jquery.com/not-selector/)

```
$('#foo').click(function() {
    $('li').not('.foo').fadeOut();
});​ 
```

看：

[http://jsfiddle.net/dSSza/](http://jsfiddle.net/dSSza/)

# django - Django：强制用户重新登录

> ID：14016139
> 
> 赞同：0
> 
> 时间：2012-12-24T01:31:36.560
> 
> 标签：django, authentication, login

我想知道如何强制用户重新登录 django？

我的情况如下：我正在开发一个 facebook 应用程序，我在其中存储了他们的一些数据。

有时，更新所有用户信息很昂贵（耗时），我不会在每次访问时都这样做，但只有在他们登录时才这样做。

有时，我确实想重新更新他们的数据以存储新的可用数据甚至是由于新权限的数据，所以我想要一种强制他们重新登录的方法。这将最终完成，因此不需要自动化。

有任何想法吗？提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-24T01:39:29.877

只需删除 Session 表。他们的会话存储在那里，一旦他们返回站点，他们将不得不再次登录。

# opencv - 使用opencv缩小走廊和路径

> ID：14016141
> 
> 赞同：0
> 
> 时间：2012-12-24T01:32:25.840
> 
> 标签：opencv, javacv

我有最适合描述为迷宫的图像。重要的特点是他们有我所说的走廊或路径。

我正在尝试在不完全关闭它们的情况下缩小这些走廊/路径。我对处理过的走廊必须有多窄没有任何严格的要求，我只需要把它们缩小一点。但是，我*永远无法*完全关闭一个。

这是未处理的图像

![未经处理的图像](../Images/406b276899f266ada1dd997e8d6b2191.png)

这是应用高斯模糊后的图像 `cvSmooth(img, img, CV_GAUSSIAN, 9);`

![高斯模糊](../Images/c63b7110a552a8e7f70b74fdcb0833df.png)

结果非常好，但我不知道我的走廊在传入的图像中会有多宽，而且它们不一定有这么直的规则角度的墙壁，也没有一致的走廊宽度，所以这样一个幼稚的解决方案肯定会完全阻挡一些的走廊。

我考虑过一次模糊一点，在图像上运行寻路算法以确保我没有关闭走廊，但我认为这太慢了。

所以，我正在寻找一种快速缩小走廊的方法，而不会有完全关闭任何通道的风险。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T01:50:54.953

你可以试试这两个...

1.  在图像上使用带有 3 X 3 掩码的`Mat::ones(3,3,CV_8UC1)`扩张...扩张可能比高斯模糊更快...通过扩张，您知道您已经将图像扩大了一个像素级别...
2.  要检查白色路径区域的连通性，您可以使用连接组件标记...使用一次扫描连接组件进行更快的标记...
3.  您还可以使用白色路径的轮廓来检查连接性......这就是我现在能想到的......！！

# php - Instagram API 自定义图像宽度

> ID：14016142
> 
> 赞同：7
> 
> 时间：2012-12-24T01:32:42.790
> 
> 标签：php, instagram

我正在尝试使用 Instagram API 为 Instagram 中的图像设置自定义宽度。我正在使用主题标签来获取所有相关的图像。我可以要求 Instagram 为我提供自定义图像尺寸吗？我知道有 3 种尺寸：缩略图、低分辨率、标准分辨率。这就是我所能得到的吗？谢谢！

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2015-08-18T11:04:42.997

Instagram API 返回三种标准图像分辨率。还有一个额外的未记录的图像大小，您也可以使用，但是，这在未来可能会有点脆弱/可靠的变化，也可能违反他们的服务条款（不确定）。当我看到 Instagram 网站提供更高分辨率的图片时，我注意到这张图片是可用的——我不太确定 Instagram 为什么选择不提供这张图片。

从 API 中，您可以获得以下标准图像尺寸：

**缩略图 (150 x 150)**

[https://scontent.cdninstagram.com/hphotos-xaf1/t51.2885-15/s150x150/e15/11821182_168255950173048_11130460_n.jpg](https://scontent.cdninstagram.com/hphotos-xaf1/t51.2885-15/s150x150/e15/11821182_168255950173048_11130460_n.jpg)

**低分辨率 (320 x 320)**

[https://scontent.cdninstagram.com/hphotos-xaf1/t51.2885-15/s320x320/e15/11821182_168255950173048_11130460_n.jpg](https://scontent.cdninstagram.com/hphotos-xaf1/t51.2885-15/s320x320/e15/11821182_168255950173048_11130460_n.jpg)

**标准分辨率 (640 x 640)**

[https://scontent.cdninstagram.com/hphotos-xaf1/t51.2885-15/s640x640/sh0.08/e35/11821182_168255950173048_11130460_n.jpg](https://scontent.cdninstagram.com/hphotos-xaf1/t51.2885-15/s640x640/sh0.08/e35/11821182_168255950173048_11130460_n.jpg)

然后，通过查看他们的网站，我注意到他们提供了 1080 x 1080 的更大版本的文件：

**无证大图 (1080 x 1080)**

[https://scontent.cdninstagram.com/hphotos-xaf1/t51.2885-15/s1080x1080/e15/11821182_168255950173048_11130460_n.jpg](https://scontent.cdninstagram.com/hphotos-xaf1/t51.2885-15/s1080x1080/e15/11821182_168255950173048_11130460_n.jpg)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-01-28T00:04:02.897

简单地在_5（或_6，即）上进行搜索和替换以获得您想要的大小（见下文）：

图像尺寸似乎是：

**[http://distilleryimage7.s3.amazonaws.com/xxxxxxxxx_7.jpg](http://distilleryimage7.s3.amazonaws.com/xxxxxxxxx_7.jpg)**

612 像素 × 612 像素

**[http://distilleryimage7.s3.amazonaws.com/xxxxxxxxx_6.jpg](http://distilleryimage7.s3.amazonaws.com/xxxxxxxxx_6.jpg)**

306 像素 × 306 像素

**[http://distilleryimage7.s3.amazonaws.com/xxxxxxxxx_5.jpg](http://distilleryimage7.s3.amazonaws.com/xxxxxxxxx_5.jpg)**

150 像素 × 150 像素

_8,_4,_3 似乎不是有效的尺寸。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-27T23:55:21.400

Instagram 使用[Amazon S3](https://stackoverflow.com/questions/12547077/how-does-instagram-use-amazon-s3)来保存其照片，并具有一定的命名约定，如下所示：

```
http://distilleryimage7.s3.amazonaws.com/f4947c1004ca11e2a0c81231380ff428_7.jpg
http://distilleryimage7.s3.amazonaws.com/f4947c1004ca11e2a0c81231380ff428_6.jpg
http://distilleryimage7.s3.amazonaws.com/f4947c1004ca11e2a0c81231380ff428_5.jpg 
```

通过简单地通过 API 获取照片 URL，然后将图像 URL 中的 _7、_6、_5 更改为另一个值（通过搜索/替换），您可以控制图像的大小。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-01-20T18:27:07.630

我知道这是一篇旧帖子，但我想我应该补充一点，可用的图像尺寸不止三个（或四个）。我写了一个简短的 Python 脚本，发现以下内容：

```
 12    90   200   376   719
  16    96   203   390   720
  24   100   206   403   750
  30   111   224   405   768
  32   112   240   408   800
  34   114   243   417   810
  40   118   256   468   936
  43   120   262   479   959
  48   128   270   480   960
  50   129   279   512  1008
  56   130   280   515  1024
  57   133   285   540  1029
  60   135   288   562  1056
  64   147   306   564  1080
  68   148   319   599  1225
  73   150   320   600  1300
  74   160   332   624  1440
  75   180   338   640  1536
  80   190   350   672  2048
  86   192   360   704 
```

据我所知，高于 1080 的所有值（即 1225、1300、1440、1536、2048）都返回 1080。

我用一张方形照片对其进行了测试，所以我不知道不同纵横比会提供什么。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-07-07T21:38:35.103

正如之前的海报所描述的，Instagram 无法以您需要的确切尺寸提供图像。它们只有三个或四个可用的默认尺寸。

您需要实现某种中间件来为您调整图像大小或使用[https://tiny.pictures/](https://tiny.pictures/)之类的服务（免责声明：我是开发人员）为您完成。

# tree - XQuery 可以支持树结构查询吗？

> ID：14016143
> 
> 赞同：3
> 
> 时间：2012-12-24T01:32:55.390
> 
> 标签：tree, xquery, openehr

我已经使用 sql 和基于实体值属性的数据库设计实现了树结构查询机制。我想看看基于 XQuery 的方法的相同功能的性能，假设可以使用 XQuery 来完成任务。我的树（XLM 文档）的简化形式如下： ![在此处输入图像描述](../Images/96e6413e3e64e64a5e51e71e1b85eac3.png)

有不同类型的节点，但我在查询中使用的唯一属性是节点的 archetype_node_id 属性。我尝试编写的测试查询旨在选择具有 2 个元素节点的评估节点（在右侧）。查询实现需要所用语言的两个关键功能：支持结构定义的能力（使用布尔运算符），以及定义节点属性约束的能力（在这种情况下为 xml 属性）。

使用 XQuery，我有两个问题 1) 我似乎无法声明对所有感兴趣节点的引用，即我在图中感兴趣的任何节点 2) 我不知道如何返回匹配项，因为这棵树右侧的匹配项将具有一个具有评估的组合，而评估又具有两个元素。

这是我第一次尝试使用 FLWR：

```
 for     $composition in doc("composition-visit.xml")//element()
let    $evaluation := (
                        for $evalsneeded in $composition//element() 
                        let $elementat02 := 
                                            (for $el02 in $evalsneeded//element() 

                                             where $el02/@archetype_node_id = 'at0002'
                                                  and exists($evalsneeded//$el02)
                                             return  $el02
                                            ),
                            $elementat03 := 
                                        (for $el03 in $evalsneeded//element() 

                                         where $el03/@archetype_node_id = 'at0003'
                                                and exists($evalsneeded//$el03)
                                         return  $el03
                                        )
                        where $evalsneeded/@archetype_node_id = 'openEHR-EHR-EVALUATION.goal.v1'
                                 and 
                                    exists ($evalsneeded//$elementat02)
                                     and
                                     exists ($evalsneeded//$elementat03)

                        return $evalsneeded)
where $composition/@archetype_node_id = 'openEHR-EHR-COMPOSITION.encounter.v1'                
        and exists($composition//$evaluation)

return $evaluation/@archetype_node_id/string(.) 
```

我的问题是我最终将评估和元素节点推送到子查询，因为如果我将它们作为主要 FLOWR 主体中的全局变量引入，则基于它们的属性值和位置进行过滤不起作用。

在返回结果时我更加一无所知，但我不想为此提出单独的问题。

理想情况下，当我对具有 at0002 和 at0003 代码的元素的评估强制执行 AND 约束时，我应该得到树的右侧，如果我对相同的元素使用 OR 约束，我应该得到整个树。

这对 XQuery 可行吗？它可以作为我在树中寻找的结构是否存在的测试，但我也想访问单个节点。

更新：这是我的第二次尝试。这实际上为我一直在尝试做的事情打开了大门，但我不确定这是否是在 XQuery 中执行此操作的正确方法。我应该问另一个问题来改进这种方法吗？：

```
 <result>
{
    for     $composition in doc("composition-visit.xml")//element() 

    where $composition/@archetype_node_id = 'openEHR-EHR-COMPOSITION.encounter.v1'                

    return <composition>
                <name>{$composition/name/value/string(.)}</name>
                <evaluation>{for $eval in $composition//element()
                             let $el1 := (for $el1_in_eval in $eval//element()
                                            where $el1_in_eval/@archetype_node_id = 'at0002'
                                            return $el1_in_eval ),
                                 $el2 := (for $el2_in_eval in $eval//element()
                                            where $el2_in_eval/@archetype_node_id = 'at0003'
                                            return $el2_in_eval )

                                     where $eval/@archetype_node_id = 'openEHR-EHR-EVALUATION.goal.v1'
                                            and
                                            (exists($el1)
                                            and
                                            exists($el2)
                                            )
                                     return <eval>
                                                   <name>{$eval/name/value/string(.)}</name>
                                                   <element1>{for $element1 in $eval//element()
                                                             where $element1/@archetype_node_id = 'at0002'

                                                             return $element1}</element1>
                                                     <element2>{for $element2 in $eval//element()
                                                     where $element2/@archetype_node_id = 'at0003'

                                                     return $element2}</element2>
                                           </eval>
                            }</evaluation>
            </composition>
}
</result> 
```

基本上，我使用 let 语句强制执行父/子关系，并使用 return 来获取 let 对应匹配项的值，这反过来可能会在树下做同样的事情。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-08-14T22:03:56.930

看起来您的用例正在查询“原型”openEHR 数据。

随意查看开源[https://github.com/LiU-IMT/EEE](https://github.com/LiU-IMT/EEE)，它使用 xQuery 处理与您的用例类似的请求，但数据建模略有不同。

例如，在论文[http://www.ep.liu.se/ecp/070/009/ecp1270009.pdf](http://www.ep.liu.se/ecp/070/009/ecp1270009.pdf)中使用了它，您可以在其中找到一个查询示例，该示例返回具有组织学检查结果的所有记录 ID，表明肿瘤病变之间2006-01-01 和 2006-05-01。

在 AQL（原型查询语言）中，它表示为...

```
SELECT e/ehr_id/value as ehr_id
FROM Ehr e
CONTAINS VERSION v
CONTAINS COMPOSITION c [openEHR-EHR-COMPOSITION.histologic_exam.v1]
CONTAINS OBSERVATION obs [openEHR-EHR-   OBSERVATION.histological_exam_result.v1]
WHERE (EXISTS obs/data[at0001]/events[at0002]/data[at0003]/items[at0085]/items[at0033]/items[at0034] 
OR
EXISTS obs/data[at0001]/events[at0002]/data[at0003]/items[at0085]/items[at0033]/items[at0035])
AND c/context/start_time/value >= '2006-01-01T00:00:00,000+01:00'
AND c/context/start_time/value < '2006-05-01T00:00:00,000+01:00'` 
```

...当自动解析并转换为 XQuery 时，它看起来像这样：

```
declare namespace v1 = "http://schemas.openehr.org/v1";
declare default element namespace "http://schemas.openehr.org/v1";
declare namespace xsi = "http://www.w3.org/2001/XMLSchema-instance";
declare namespace eee = "http://www.imt.liu.se/mi/ehr/2010/EEE-v1.xsd";
declare namespace res = "http://www.imt.liu.se/mi/ehr/2010/xml-result-v1#";
<res:xml-results>
<res:head><res:variable name="ehr_id"/></res:head>
<res:results>
 {let $ehrRoot := //eee:EHR
  for $e in $ehrRoot
  for $v in $e/eee:versioned_objects/eee:versions
  for $c in $v//*[@xsi:type='v1:COMPOSITION' and @archetype_node_id="openEHR-EHR-COMPOSITION.histologic_exam.v1"]
  for $obs in $c//*[@xsi:type='v1:OBSERVATION' and @archetype_node_id= "openEHR-EHR-OBSERVATION.histological_exam_result.v1"]
  where
   (
    exists($obs/data[@archetype_node_id = 'at0001']/events[@archetype_node_id = 'at0002']/data[@archetype_node_id='at0003']/items[@archetype_node_id = 'at0085']/items[@archetype_node_id = 'at0033']/items[@archetype_node_id = 'at0034'])
   or
    exists($obs/data[@archetype_node_id = 'at0001']/events[@archetype_node_ id = 'at0002']/data[@archetype_node_id = 'at0003']/items[@archetype_node_id = 'at0085']/items[@archetype_node_id = 'at0033']/items[@archetype_node_id = 'at0035'])
   )
   and
    $c/context/start_time/value >= '2006-01-01T00:00:00,000+01:00' 
   and 
    $c/context/start_time/value < '2006-05-01T00:00:00,000+01:00'
return
<res:result><res:binding name="ehr_id">{$e/eee:ehr_id/value}</res:binding></res:result>}
</res:results>
</res:xml-results> 
```

这种模式可能也值得在您的用例中尝试。有关解决方案和上下文的更多详细信息，请参阅论文[http://www.biomedcentral.com/1472-6947/13/57](http://www.biomedcentral.com/1472-6947/13/57)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-24T16:22:31.323

> 如果树是二叉搜索树，这已使用 XQuery 实现。看到这个帖子：

[http://dnovatchev.wordpress.com/2012/01/09/the-binary-search-tree-data-structurehaving-fun-with-xpath-3-0/](http://dnovatchev.wordpress.com/2012/01/09/the-binary-search-tree-data-structurehaving-fun-with-xpath-3-0/)

> 这可能为时已晚，无法使用......但是......看起来您正在根据抽象树定义的具体树之上实现抽象树。只需直接使用元素树，而不是使用 XML 元素实现树...

# c++ - 无法编译简单的 Bullet Physics 应用程序

> ID：14016147
> 
> 赞同：4
> 
> 时间：2012-12-24T01:33:39.917
> 
> 标签：c++, visual-studio, linker, bullet

我正在尝试从 Visual Studio 2012 Express 中的 Bullel Physics Wiki 编译[Hello World](http://bulletphysics.org/mediawiki-1.5.8/index.php/Hello_World "教程：Hello World 应用程序")程序。
我能够生成并导入运行示例所需的三个库项目，但链接它们时似乎存在问题。
在编译日志中有 38 个这样的错误，每个库都重复了很多次。

```
error LNK2038: mismatch detected for 'RuntimeLibrary': value 'MDd_DynamicDebug' doesn't match value 'MD_DynamicRelease' in Main.obj 
```

我不明白出了什么问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-18T05:25:09.720

我也有这个问题，一旦你意识到它很容易解决。

确保您的所有项目与每个配置都匹配相同的运行时库。

更多信息： [http ://www.davidlenihan.com/2008/01/choosing_the_correct_cc_runtim.html](http://www.davidlenihan.com/2008/01/choosing_the_correct_cc_runtim.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-31T05:47:55.987

添加到TIHan的答案

一个值得一看的地方是在你的`Linker->Input->Additional Dependencies`部分。我最后注意到我有一个发布版本链接到我的应用程序，而调试版本应该是链接的版本。一旦我更改它，错误就消失了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-16T16:59:46.697

要检查的另一件事是项目配置窗口，您可以在该窗口中为解决方案的当前配置设置选择每个项目实际使用的配置。例如，我最近有一个解决方案，其中发布配置有一个静态库项目设置为构建导致此错误的调​​试版本。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-01-30T12:15:09.690

You could also get this error if a dependent project (producing a .lib) is not included in the solution and therefore has not been built properly.

# javascript - Meteor/Mongo：查找和更新集合中的某些元素

> ID：14016149
> 
> 赞同：9
> 
> 时间：2012-12-24T01:34:37.440
> 
> 标签：javascript, mongodb, meteor

我从 Meteor 开始，需要一些关于 Mongo 的帮助。我有一组显示在列表中的名称，并且希望能够根据其他条件更新数据库中某些条目的一个变量。基本上我想做的是：

对于特征 A = true 且 B = true 的每个条目，将特征 C 更改为 false。

到目前为止，我一直在试图弄清楚 Mongo 如何处理集合元素上的“for each”循环，并为每个元素检查条件 A 和 B 是否成立，然后 collection.update(element, {C ： 错误的}）。事实证明，这比我想象的要麻烦得多。我想做这样的事情（使用虚拟变量名）：

```
for (i = 0; i < collection.find().count(); i++){
    if (collection[i].A===true && collection[i].B===true)
        collection.update(collection[i], {$set: {C: false}});
}; 
```

我一直在改变这个基本代码，但我开始感觉到我缺少一些关于索引/集合如何在 Mongo 中工作的基本知识。你能像这样索引一个集合吗（如果是这样，这甚至是做我想做的最方便的方法吗？）？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-12-24T01:40:24.840

当然，我在发布后就知道如何做到这一点，当然，在 Meteor 文档中也有建议！

当然，这是一个简单的解决方案：

```
collection.update({A: true, B: true}, {$set: {C:false}}); 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2014-10-17T07:09:58.220

正如评论中已经建议的那样，正确的答案是：

```
collection.update({A: true, B: true}, {$set: {C:false}}, {multi: true}); 
```

（至少在纯 MongoDB 中，[请参见那里](http://docs.mongodb.org/manual/reference/method/db.collection.update/#multi-parameter)）。

没有`multi: true`它，只会更改一个符合条件的文档。

在 Meteor 中它有点棘手，因为除了匹配它之外，您不允许进行客户端更新（因此各种标准都不可能，也不可能`multi`），请参阅[http://docs.meteor.com/#更新](http://docs.meteor.com/#update)。

您*可以*遍历所有发现，但最好在服务器端运行此类代码。

# java - Google App Engine：URLFetch 最大超时是从任务开始的 250 秒，而不是 600 秒（10 分钟）

> ID：14016150
> 
> 赞同：1
> 
> 时间：2012-12-24T01:34:52.360
> 
> 标签：java, google-app-engine, urlfetch

根据官方文档，如果从任务发出，则通过 Google App Engine 上的 URLFetch 发出的 http 请求的超时时间为 10 分钟：

[https://developers.google.com/appengine/docs/java/urlfetch/overview#Quotas_and_Limits](https://developers.google.com/appengine/docs/java/urlfetch/overview#Quotas_and_Limits)

不幸的是，无论如何我都会遇到 250 秒（4:10 分钟）超时

我已经设置为在 Apache 上运行的简单 php 测试脚本（但我也使用 Lighttpd 对其进行了测试），我从 GAE 调用它只等待 300 秒然后返回

Http 钩子：

```
echo "Starting to wait\n";

$waited = 0;
while($waited < 300) {
  sleep(5);
  $waited += 5;
  echo "Waited so far $waited seconds\n";
}

echo "all done\n"; 
```

调用总是在大约 250 秒后失败，并在 GAE 日志中引发以下错误

```
IOException : Could not fetch URL ... 
```

这甚至不是与超时相关的异常

另一方面，Web 服务器记录了一个成功的调用，http 返回码为 200

我用来进行调用的 Java 代码如下

```
HTTPRequest httpReq = new HTTPRequest(new URL(http://example.com/very-slow.php),  HTTPMethod.GET, FetchOptions.Builder.allowTruncate().doNotValidateCertificate().setDeadline(3600d));

HTTPResponse resp = null;

try {
Future<HTTPResponse> futureResp = urlService.fetchAsync(httpReq);

log.info("Aync Call request lodged, waiting for a response");

resp = futureResp.get();

log.info("Aync Call completed");

} catch(Throwable th) {
log.warning("URLFetch execution error: " + th.getMessage());
} 
```

我尝试使用 setDeadline 方法指定各种不同的值，但运气不佳。如果我指定的值低于 250 秒，则会使用它并引发超时异常。超过 250 秒的任何内容都将被忽略，而是抛出一个通用的 IOException。

我很确定这看起来像是一个 GAE 错误，在查看了谷歌代码上的错误列表后，我吓坏了有多少未解决的错误在那里等待多年......

在这个阶段对 Google App Engine 非常失望......

## 更新

1.  只有生产环境受到影响。在开发服务器上我没有遇到任何问题。但是，通常不会在开发服务器上强制执行超时...
2.  我已经尝试过同步和异步 URLFetch 方法：结果相同。
3.  我尝试过使用低级 GAE 专有 URLFetch 或 java.net URLConnection 对象：结果相同

# cocoa - NSComboBox 对象类型

> ID：14016151
> 
> 赞同：1
> 
> 时间：2012-12-24T01:35:09.340
> 
> 标签：cocoa, user-interface, nscombobox

我对 Cocoa 很陌生，我有一个 NSComboBox，我正在用 NSComboBoxDataSource 填充它。到目前为止一切顺利，但我无法弄清楚的一件事是可以存储什么类型的对象。我在字符串方面取得了成功，但我希望能够存储比显示的信息更多的信息。我尝试存储一个自定义对象，该对象代表正在列出的内容（客户端），但当然没有显示任何内容。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T06:39:11.753

您可以在模型中保存任何`object`, 。

但出于显示目的，字符串会很好。并且基于字符串值的选择，您可以获取整个对象（它可能在数组或字典中）。然后在你的 gui 中的任何地方你都可以显示所有的属性。

因为，当您 nslog 包含对象的字典或数组时，您只会看到它的内存位置，而不是对象内的值。你必须再次打破它们才能显示。这里的情况也是如此。

# java - 如何模拟 Jersey REST 客户端以抛出 HTTP 500 响应？

> ID：14016154
> 
> 赞同：5
> 
> 时间：2012-12-24T01:35:12.957
> 
> 标签：java, rest, jersey, mockito

我正在编写一个 Java 类，它在后台使用[Jersey](https://jersey.java.net/)将 HTTP 请求发送到 RESTful API（第 3 方）。

我还想编写一个模拟 API 发送回 HTTP 500 响应的 JUnit 测试。作为泽西岛的新手，我很难看出我必须做什么来模拟这些 HTTP 500 响应。

到目前为止，这是我最好的尝试：

```
// The main class-under-test
public class MyJerseyAdaptor {
    public void send() {
        ClientConfig config = new DefaultClientConfig();
        Client client = Client.create(config);
        String uri = UriBuilder.fromUri("http://example.com/whatever").build();
        WebResource service = client.resource(uri);

        // I *believe* this is where Jersey actually makes the API call...
        service.path("rest").path("somePath")
                .accept(MediaType.TEXT_HTML).get(String.class);
    }
}

@Test
public void sendThrowsOnHttp500() {
    // GIVEN
    MyJerseyAdaptor adaptor = new MyJerseyAdaptor();

    // WHEN
    try {
        adaptor.send();

        // THEN - we should never get here since we have mocked the server to
        // return an HTTP 500
        org.junit.Assert.fail();
    }
    catch(RuntimeException rte) {
        ;
    }
} 
```

我熟悉 Mockito，但对模拟库没有偏好。基本上，如果有人能告诉我需要模拟哪些类/方法来抛出 HTTP 500 响应，我就可以弄清楚如何实际实现模拟。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-24T02:01:33.430

尝试这个：

```
WebResource service = client.resource(uri);

WebResource serviceSpy = Mockito.spy(service);

Mockito.doThrow(new RuntimeException("500!")).when(serviceSpy).get(Mockito.any(String.class));

serviceSpy.path("rest").path("somePath")
            .accept(MediaType.TEXT_HTML).get(String.class); 
```

我不知道球衣，但据我了解，我认为实际调用是在调用 get() 方法时完成的。因此，您可以只使用一个真实的 WebResource 对象并替换`get(String)`方法的行为来引发异常，而不是实际执行 http 调用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-24T01:54:34.003

我正在编写一个 Jersey Web 应用程序......我们为 HTTP 错误响应抛出 WebApplicationException。您可以简单地将响应代码作为构造函数参数传递。例如，

```
throw new WebApplicationException(500); 
```

当服务器端抛出此异常时，它会在我的浏览器中显示为 500 HTTP 响应。

不确定这是否是您想要的……但我认为输入可能会有所帮助！祝你好运。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-10-30T17:05:54.783

我能够使用以下代码模拟 500 响应：

```
@RunWith(MockitoJUnitRunner.class)
public class JerseyTest {

    @Mock
    private Client client;
    @Mock
    private WebResource resource;
    @Mock
    private WebResource.Builder resourceBuilder;

    @InjectMocks
    private Service service;

    @Before
    public void setUp() {
        MockitoAnnotations.initMocks(this);
    }

    @Test
    public void jerseyWith500() throws Exception {

        // Mock the client to return expected resource
        when(client.resource(anyString())).thenReturn(resource);
        // Mock the builder
        when(resource.accept(MediaType.APPLICATION_JSON)).thenReturn(resourceBuilder);

        // Mock the response object to throw an error that simulates a 500 response
        ClientResponse c = new ClientResponse(500, null, null, null);

        // The buffered response needs to be false or else we get an NPE
        // when it tries to read the null entity above.
        UniformInterfaceException uie = new UniformInterfaceException(c, false);
        when(resourceBuilder.get(String.class)).thenThrow(uie);

        try {
            service.get("/my/test/path");
        } catch (Exception e) {
            // Your assert logic for what should happen here.
        }
    }
} 
```

# php - 如何向我的所有应用用户发布帖子？

> ID：14016159
> 
> 赞同：1
> 
> 时间：2012-12-24T01:36:58.730
> 
> 标签：php, facebook, facebook-graph-api, facebook-php-sdk

我正在尝试发布到我所有的应用程序用户墙＆并且我使用此代码仅发布给一个用户：==>>

此代码仅张贴在一面墙上

```
 <?

  $config = array(
    'appId' => 'xxxxxxxxxxxxxxxxxx',
    'secret' => 'xxxxxxxxxxxxxxxxxxxxxxxxx',
  );

  $facebook = new Facebook($config);
  $user_id = $facebook->getUser();
?>
<html>
  <head></head>
  <body>

  <?
    if($user_id) {

      // We have a user ID, so probably a logged in user.
      // If not, we'll get an exception, which we handle below.
      try {
        $ret_obj = $facebook->api('/me/feed', 'POST',
                                    array(
                                      'link' => 'www.example.com',
                                      'message' => 'Posting with the PHP SDK!'
                                 ));
        echo '<pre>Post ID: ' . $ret_obj['id'] . '</pre>';

      } catch(FacebookApiException $e) {
        // If the user is logged out, you can have a 
        // user ID even though the access token is invalid.
        // In this case, we'll get an exception, so we'll
        // just ask the user to login again here.
        $login_url = $facebook->getLoginUrl( array(
                       'scope' => 'publish_stream'
                       )); 
        echo 'Please <a href="' . $login_url . '">login.</a>';
        error_log($e->getType());
        error_log($e->getMessage());
      }   
      // Give the user a logout link 
      echo '<br /><a href="' . $facebook->getLogoutUrl() . '">logout</a>';
    } else {

      // No user, so print a link for the user to login
      // To post to a user's wall, we need publish_stream permission
      // We'll use the current URL as the redirect_uri, so we don't
      // need to specify it here.
      $login_url = $facebook->getLoginUrl( array( 'scope' => 'publish_stream' ) );
      echo 'Please <a href="' . $login_url . '">login.</a>';

    } 

  ?>      

  </body> 
</html> 
```

如何向我的所有应用用户发布帖子？！！

请指教 ！

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-24T06:15:29.540

1.  获取所有应用用户-

    使用 FQL，只需执行以下操作：

    ```
    $fql="SELECT uid FROM user
    WHERE uid IN (SELECT uid2 FROM friend WHERE uid1 = ".$me['id'].")
    AND is_app_user = 1"; 
    ```

2.  循环遍历每个用户并使用**提要**

# opengl - 删除过多的代码

> ID：14016167
> 
> 赞同：2
> 
> 时间：2012-12-24T01:37:58.950
> 
> 标签：opengl, for-loop, code-cleanup

我正在尝试在 OpenGL 中制作游戏并想移动相机。我已经使用以下代码完成了它：

```
t.calculations(&t1, 5.54, 1.54, 10, 10, 1);
t.calculations(&t2, 5.54, 1.54, 10, 10, 1);
t.calculations(&t3, 5.54, 1.54, 10, 10, 1);
t.calculations(&t4, 5.54, 1.54, 10, 10, 1);
t.calculations(&t5, 5.54, 1.54, 10, 10, 1);
t.calculations(&t6, 5.54, 1.54, 10, 10, 1);
t.calculations(&t7, 5.54, 1.54, 10, 10, 1);

t.calculations(&t8, 5.54, 1.54, 10, 10, 1);
t.calculations(&t9, 5.54, 1.54, 10, 10, 1);
t.calculations(&t10, 5.54, 1.54, 10, 10 ,1);
t.calculations(&t11, 5.54, 1.54, 10, 10, 1);
t.calculations(&t12, 5.54, 1.54, 10, 10, 1);
t.calculations(&t13, 5.54, 1.54, 10, 10, 1);
t.calculations(&t14, 5.54, 1.54, 10, 10, 1);
t.calculations(&t15, 5.54, 1.54, 10, 10, 1);
t.calculations(&t16, 5.54, 1.54, 10, 10, 1);
t.calculations(&t17, 5.54, 1.54, 10, 10, 1);
t.calculations(&t18, 5.54, 1.54, 10, 10, 1); 
```

但是正如你所看到的，这看起来像是代码的过度重复。我曾尝试使用以下方法而不是上述方法：

```
for (int i = 1; i < 19; i++) {
   t.calculations(&t+i, 5.54, 1.54, 10, 10, 1);
} 
```

但它不起作用。谁能告诉我一个替代解决方案？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-24T02:15:31.140

假设 t [i]个变量都是同一类型且类型为 double：

```
// The following sentence declares an array initialized with the 18 t variables
// think of this array as a slot container of values, the following is just syntax
// to declare and initialize the array 
// IMPORTANT: Once the array is initialized, you can't modify its structure, you can 
// replace the content of every cell, but, you can add neither remove elements from it
double t[] = { t1, t2, t3, t4, t5, t6, t7, t8, t9, t10, t11, t12, t13, t14, t15, t16, t17, t18 };

// Then, you can read every cell of the array using the [] operator like this:
// (Another important hint, arrays starts from '0')
for (int 0 = 1; i < 18; i++) {
   // You take the address of every ti variable stored in each "cell" of the array 
   t.calculations(&t[i], 5.54, 1.54, 10, 10, 1);
} 
```

或者，使用不那么冗长的语法（但相当复杂），上面的代码可以表示为：

```
for (int i = 0; i < 18; i++) {
   t.calculations(t + i, 5.54, 1.54, 10, 10, 1);
} 
```

有关更多信息，请查看 c/c++ 中数组的在线[文档](http://www.mycplus.com/tutorials/c-programming-tutorials/arrays/)和教程。类似的语法在其他语言中广泛使用

# wordpress - 为什么来自类别 id 的 get_posts 不起作用

> ID：14016169
> 
> 赞同：2
> 
> 时间：2012-12-24T01:38:31.150
> 
> 标签：wordpress

使用以下代码从类别 id 获取投资组合类型的帖子，但它不起作用。

```
$args = array( 'numberposts' => $items, 'post_type'=>'portfolio','orderby' => 'post_date','order'=>'DESC','category' => 5 );
$posts = get_posts($args);
foreach($posts as $post){
    setup_postdata($post);
    $return_html='......';
} 
```

但是，如果我将类别 ID 留空，则可以，并且会显示所有类别的帖子。我敢肯定，第 5 类下有很多帖子。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-24T10:32:43.217

```
/* below mention code u may have the idea */ 
/* You have to not pass the category id in the argument. */
/* You have to pass category type and category slug*/
$args = array( 'post_type' => 'portfolio', 'posts_per_page' => 10,'orderby' => 'post_date','order'=>'DESC','category-type' => $category-slug );
$loop = new WP_Query( $args );              
if($loop->have_posts()) :
while ( $loop->have_posts() ) : $loop->the_post();
/*... Your post data here */

endwhile;
endif;
wp_reset_query(); 
```

# visual-c++ - 使用 WRL 编写 WinRT 组件

> ID：14016175
> 
> 赞同：1
> 
> 时间：2012-12-24T01:39:53.600
> 
> 标签：visual-c++, windows-8, microsoft-metro, windows-runtime

我一直在使用 VS2012 附带的名为“Windows 运行时组件”的项目模板来创建基于 C++/CX 的 WinRT 组件。

我现在希望在不使用 C++/CX 而是通过 WRL 的情况下做同样的事情。当我这样做时，有些东西（引用、与主应用程序项目自动打包、基于 Winmd 的智能感知等）在 VS2012 中不起作用。如何确保我可以在我的组件项目中使用 WRL，并且仍然像使用基于 C++/CX 的模板一样获得完整的 IDE 体验？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-24T01:39:53.600

在此处查看 WRL 组件的 Visual Studio 项目模板：http: [//visualstudiogallery.msdn.microsoft.com/346e6fbc-6508-43c8-af7f-9a922bb57128](http://visualstudiogallery.msdn.microsoft.com/346e6fbc-6508-43c8-af7f-9a922bb57128)

这在设计时和运行时都实现了与基于 C++/CX 的项目模板类似的结果。

# emacs - Emacs 模糊自动补全

> ID：14016178
> 
> 赞同：12
> 
> 时间：2012-12-24T01:40:22.230
> 
> 标签：emacs, autocomplete, fuzzy, ido

我真的很喜欢`ido`emacs 中的模糊匹配。我想拥有自动完成功能。最好使用`auto-complete`，因为我已经`ac-python`和其他设置了`auto-complete`. 我知道`auto-complete`如果没有找到正常匹配，它会提供模糊匹配，但我通常想要这个。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-24T09:32:37.913

您可以绑定`ac-fuzzy-complete`到您喜欢的某个组合键并使用它来代替您用于完成的其他方法。它已经是交互式的，但没有绑定到任何键。这样的事情会做：

```
(global-set-key (kbd "M-C-I") 'ac-fuzzy-complete) 
```

（`M-C-i`否则是用于 的组合键`complete-symbol`）

# unit-testing - netbeans cakephp unittest PHP 致命错误：在 {filename} 第 3 行中找不到类“App”

> ID：14016182
> 
> 赞同：1
> 
> 时间：2012-12-24T01:40:38.350
> 
> 标签：unit-testing, cakephp, netbeans-7

我正在尝试从 netbeans 运行单元测试，但由于此错误而失败。

```
PHP Fatal error:  Class 'App' not found in /home/user/cakephp/app/Test/Case/Model/AceScoreTest.php on line 3
Stack trace:
1\. {main}() /usr/bin/phpunit:0
2\. PHPUnit_TextUI_Command::main() /usr/bin/phpunit:46
3\. PHPUnit_TextUI_Command->run() /usr/share/php/PHPUnit/TextUI/Command.php:129
4\. PHPUnit_Runner_BaseTestRunner->getTest() /usr/share/php/PHPUnit/TextUI/Command.php:150
5\. ReflectionMethod->invoke() /usr/share/php/PHPUnit/Runner/BaseTestRunner.php:124
6\. NetBeansSuite::suite() /usr/local/netbeans-7.2.1/php/phpunit/NetBeansSuite.php:0 
```

从命令行运行时单元测试工作正常 `./cake test app Model/AceScore`

我需要做什么才能让 cakephp 单元测试在 Netbeans 中工作？一定有办法告诉 phpunit 在里面寻找 App.php`lib/Cake/Core/App.php`

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-19T10:29:16.090

也许，您必须为 PHPUnit 创建一个引导文件并将其设置为 NetBeans。

我在 CakePHP pluign for NetBeans[2] 中添加了新的 Action（PHPUnit Test Init Action[1]）。如果您正在使用这个插件，请尝试一下；）请参阅 [1] 关于引导文件。

[1] [https://github.com/junichi11/cakephp-netbeans#phpunit-test-settings-phpunit-test-init-action](https://github.com/junichi11/cakephp-netbeans#phpunit-test-settings-phpunit-test-init-action)
[2] [http://plugins.netbeans.org/plugin/44579/php-cakephp -框架](http://plugins.netbeans.org/plugin/44579/php-cakephp-framework)

# java - 如何在没有 SVN 元数据的情况下在 Eclipse 中克隆 SVN 管理的项目？

> ID：14016186
> 
> 赞同：2
> 
> 时间：2012-12-24T01:41:30.050
> 
> 标签：java, eclipse, svn, project, subclipse

我在 Eclipse 中有一个由 SVN（Subclipse）管理的 Java 项目。我想制作项目的精确副本，但名称不同，并且我不想复制任何 SVN 元数据。

换句话说，`myProject`它是托管在 SVN 存储库中的项目的工作副本。我想制作`myProject-clone`，但这`myProject-clone`也不是 SVN 项目的工作副本。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T01:46:36.967

只需使用 svn export 命令。你也可以试试

复制项目 $source -destination $dest -exclude *.svn -recurse

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-24T01:47:23.770

我会转到插件所在的文件夹，复制插件并粘贴到临时文件夹中。然后在该临时文件夹中，假设您正在使用 Windows 搜索 *.svn，然后选择所有搜索结果，这将删除所有 svn 元数据。可能还有其他方法，但我以前就是这样做的。另一种方法是“断开”项目并选择清除所有 svn 元数据，然后重新签出

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-24T02:20:33.217

如果您使用的是 Mac、*nix 或其他环境，`rsync`您可以传入`-C`参数以忽略 SVN/CVS 元数据：

```
rsync -avC /path/to/working_dir /path/to/copy_dir 
```

# ios - 如果内容需要与 iCloud 同步，我应该如何存储图像

> ID：14016187
> 
> 赞同：3
> 
> 时间：2012-12-24T01:41:47.867
> 
> 标签：ios, image, core-data, icloud

我正在为我的应用启用 iCloud 支持，但遇到了问题。在用户创建的我的内容对象中，他们可以为他们的对象选择一张图片。目前我将该图像作为二进制数据存储在 coredata 中，并使用外部存储选项，因为在测试中我发现图像的大小范围为 1-3mb。

**注意**：我保存的是数据本身而不是对所选图像的引用，这样用户就不会通过从照片流或相机胶卷中删除图像来意外删除他们添加到我的应用程序内容对象中的图像资产。

在阅读 Apple 在 iCloud 上的信息时，他们提到不要存储下载的大型数据文件。（[来源](http://developer.apple.com/library/mac/#documentation/General/Conceptual/iCloudDesignGuide/Chapters/iCloudFundametals.html#//apple_ref/doc/uid/TP40012094-CH6-SW1)）

鉴于我当前的数据结构似乎在没有 iCloud 的情况下工作，我应该如何修改它以便我可以合并 iCloud 以跨设备同步数据？如果 Apple 建议不要同步大文件，那么这些数据应该如何在设备之间发送？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-31T18:46:29.533

这取决于用户从哪里选择这些图片。基本上，如果您*不*通过 iCloud 发送图像，还有其他方法可以获得吗？

如果它们来自某些在线资源并且可以再次从那里下载，那么您将属于“大型下载数据文件”类别。传递有关如何从一台设备重新下载到另一台设备并根据需要再次下载的 URL 或其他详细信息。

如果它们来自其他设备上不容易获得的其他来源（例如，用户从他们的相机胶卷中选择了一张照片），请继续并按原样在设备之间传递它。这更像是用户文档或数据，而不是您可以按需重新下载的东西。

# c# - Monotouch - 访问应用程序级变量 (CS0120)

> ID：14016188
> 
> 赞同：2
> 
> 时间：2012-12-24T01:42:05.013
> 
> 标签：c#, xamarin.ios

我正在 AppDelegate.cs 中创建某个东西（数据库类）的实例，并希望从我的 ViewControllers 访问这个实例。它返回一个 CS0120 错误，“访问非静态成员 `GeomExample.AppDelegate._db' (CS0120) 需要对象引用”

我在 AppDelegate 中创建我的实例，如下所示：

```
[Register ("AppDelegate")]
    public partial class AppDelegate : UIApplicationDelegate
    {
        ...
        public Database _db;

        public override bool FinishedLaunching (UIApplication app, NSDictionary options)
        {
            ...
            _db = new Database (Path.Combine (Environment.GetFolderPath (Environment.SpecialFolder.MyDocuments), "myDb.db"));
            _db.Trace = true; 
```

然后我尝试像这样访问它，这会产生错误：

```
IEnumerable<DbShapeElement> shapes = AppDelegate._db.GetShapeElements (_shapeName, null); 
```

任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-24T01:55:27.450

警告：我不知道 MonoTouch，但阅读这个问题：[Monotouch：如何更新 AppDelegate 部分类中的文本字段？](https://stackoverflow.com/questions/4715488/monotouch-how-to-update-a-textfield-in-appdelegate-partial-class).

在我看来，这 ：

`public Database _db;`是非静态的。您需要使用您拥有的 AppDelegate 的实例。

尝试这个：

```
var ad = (AppDelegate) UIApplication.SharedApplication.Delegate;
IEnumerable<DbShapeElement> shapes = ad._db.GetShapeElements (_shapeName, null); 
```

**编辑：**

与其使用公共实例变量，不如使用带有私有 setter 的属性来防止在 AppDelegate 类之外进行修改：

```
[Register ("AppDelegate")]
public partial class AppDelegate : UIApplicationDelegate
{
    ...
    public Database Db {
        get;
        private set;
    }

    public override bool FinishedLaunching (UIApplication app, NSDictionary options)
    {
        ...
        Db = new Database (Path.Combine (Environment.GetFolderPath (Environment.SpecialFolder.MyDocuments), "myDb.db"));
        Db.Trace = true;
        ... 
```

然后你在 AppDelegate 类之外像这样访问它：

```
var ad = (AppDelegate) UIApplication.SharedApplication.Delegate;
IEnumerable<DbShapeElement> shapes = ad.Db.GetShapeElements (_shapeName, null); 
```

# c++ - 更改优先级队列元素是否会导致重新使用队列？

> ID：14016189
> 
> 赞同：8
> 
> 时间：2012-12-24T01:42:05.090
> 
> 标签：c++, stl, queue, priority-queue

我有一个priority_queue，我想修改它的一些内容（优先级值），那么队列会被使用吗？

这取决于它是使用 push/pop（更有可能，因为您只需要“插入”，而不是全部使用），还是在访问 top 或 pop 时。

我真的很想更改队列中的一些元素。像这样的东西：

```
priority_queue<int> q;

int a=2,b=3,c=5;
int *ca=&a, *cb=&b, cc=&c;

q.push(a);
q.push(b);
q.push(c); //q is now {2,3,5}

*ca=4;

//what happens to q?
// 1) {3,4,5}
// 2) {4,2,5}
// 3) crash 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-24T01:45:20.113

`priority_queue`复制您推入其中的值。您最后的分配将对优先级队列的顺序以及存储在其中的值产生零影响。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-24T02:11:34.820

不幸的是，`std::priority_queue`该类不支持`increase/decrease_key`您正在寻找的操作。当然，可以在堆中找到要更新的元素，然后调用`make_heap`以恢复二进制堆不变量，但这不能像`std::`容器/算法那样有效。扫描堆以查找项目`O(N)`，然后`make_heap`是最重要的 -对于正确支持更新的二进制堆，应该`O(N)`可以这样做。`increase/decrease_key``O(log(N))`

Boost 提供了一[组优先队列实现](http://www.boost.org/doc/libs/1_52_0/doc/html/heap.html)，它们可能比`std::priority_queue`（配对堆、斐波那契堆等）更有效，并且还提供可变性，因此您可以有效地执行动态更新。所以总的来说，使用 boost 容器可能是一个更好的选择。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-09-14T20:52:50.563

在考虑将优先级队列用于 A* 算法时，我偶然发现了这个问题。

基本上，C++ 优先级队列是一个非常有限的玩具。

动态更改排队元素的优先级需要手动执行底层堆的完整重建，这甚至不能保证在给定的 STL 实现上工作***并且***效率非常低。
此外，重建堆需要丑陋的代码，这些代码必须隐藏在另一个混淆的类/模板中。

至于 C++ 中的许多其他东西，您将不得不重新发明轮子，或者找到任何为您重新发明它的时尚库。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-12-24T02:14:11.510

好的，经过一番搜索，我发现了如何“重新排序”队列，因此在每次更改优先级值后，您需要调用：

```
std::make_heap(const_cast<Type**>(&queue.top()),
     const_cast<Type**>(&queue.top()) + queue.size(),
     ComparerClass()); 
```

然后必须排队

```
std::priority_queue<Type*,vector<Type*>,ComparerClass> queue; 
```

希望这可以帮助。

# ruby - 加载新的 Bash shell 时找不到 RVM

> ID：14016190
> 
> 赞同：4
> 
> 时间：2012-12-24T01:42:12.390
> 
> 标签：ruby, rvm

我真的很困惑这个 RVM Bash 找不到我的目录。这真是要了我的命。每当我加载一个新的 bash shell 时，它总是告诉我：

```
-bash: /Users/<username>/.rvm/scripts/rvm : No such file or directory 
```

我无法弄清楚我的 bash 有什么问题。

以下是我的`.bashrc`样子：

```
1 export PATH=/usr/local/bin:/usr/local/sbin:$PATH
2 
3 
4 export PATH=/usr/local/bin:/usr/local/sbin:/Library/Frameworks/Python.framework/Versions/2.7/bin:/opt/local/bin:/opt/local/sbin:/Users/<username>/.rvm/gems/ruby-1.9.2-p290/bin:/    Users/<username>/.rvm/gems/ruby-1.9.2-p290@global/bin:/Users/<username>/.rvm/rubies/ruby-1.9.2-p290/bin:/Users/<username>/.rvm/bin:/usr/local/bin:/usr/local/sbin:/usr/local/mysq    l/bin:/usr/bin:/bin:/usr/sbin:/sbin:/usr/local/bin:/usr/X11/bin:/usr/local/git/bin:/usr/local/MacGPG2/bin
5 
6 
7 # This line for ruby version manager has been commented out
8 PATH=$PATH:$HOME/.rvm/bin # Add RVM to PATH for scripting 
```

以下是我的`.bash_profile`：

```
 6 [[ -s "$HOME/.rvm/scripts/rvm" ]] && . "$HOME/.rvm/scripts/rvm" # Load RVM function
 7 
 8 ##
 9 # Your previous /Users/<username>/.bash_profile file was backed up as /Users/<username>/.bash_profile.macports-saved_2011-11-01_at_20:41:30
10 ##
11 
12 # MacPorts Installer addition on 2011-11-01_at_20:41:30: adding an appropriate PATH variable for use with MacPorts.
13 export PATH=/opt/local/bin:/opt/local/sbin:$PATH
14 # Finished adapting your PATH environment variable for use with MacPorts.
15 
16 
17 # Setting PATH for Python 2.7
18 # The orginal version is saved in .bash_profile.pysave
19 PATH="/Library/Frameworks/Python.framework/Versions/2.7/bin:${PATH}"
20 export PATH 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-24T01:51:32.897

这通常发生在 RVM 安装损坏的情况下。您是否只是尝试删除 RVM 或意外删除 ~/.rvm？

我会首先尝试删除 .bash_profile 中的第 6 行，因为现在加载 RVM 的官方方法似乎是 .bashrc 第 8 行中的内容。另外，请确保您的 .bashrc 实际正在加载。在 OS X 上，默认情况下不加载 .bashrc。

请务必关闭所有终端窗口并重新打开它们，以便再次获取所有配置文件脚本，并且不会错过任何一个。

如果它仍然不起作用，我建议您重新安装它`curl -L https://get.rvm.io | bash -s stable`

# windows-phone-7 - 用于 Windows 手机开发的 64 位与 32 位

> ID：14016191
> 
> 赞同：6
> 
> 时间：2012-12-24T01:42:12.803
> 
> 标签：windows-phone-7, windows-8, visual-studio-2012, windows-phone-8

我一整天都在用我所有的开发工具加载我的新 Windows 8 笔记本电脑。才发现我的操作系统版本是 32 位版本。

当我尝试为我的 windows phone 8 应用程序运行模拟器时，我收到一条错误消息，提示我需要“Hyper-V”。显然“Hyper-V”仅适用于 64 位版本。

我有一个两部分的问题。如何使用我当前的 32 位操作系统和开发工具进行开发？从我正在阅读的内容来看，我仍然可以使用已注册的手机进行测试。有关如何执行此操作的任何信息？

另一个问题是，我现在是否咬紧牙关升级到 64 位操作系统（这是重新格式化并重新安装所有内容）？

谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-24T02:25:49.850

我会咬紧牙关，现在升级到 64 位。Windows Phone 8 开发的完整系统要求在[这里](http://www.microsoft.com/en-us/download/details.aspx?id=35471)。除了需要 64 位 Windows 8 Pro 或更高版本才能使用 Windows Phone 8 模拟器外，另一个“问题”是需要支持二级地址转换 (SLAT) 的处理器。

支持 SLAT 的 PC 是基于 Intel 的以 i 开头的处理器（例如 i3、i5、i7、i9）或任何基于 Nehalem、Westmere 或 Sandybridge 微架构的 CPU。 

要确定您的机器是否支持 SLAT，请执行以下步骤：

1.  [在http://technet.microsoft.com/en-us/sysinternals/cc835722](http://technet.microsoft.com/en-us/sysinternals/cc835722)下载 SysInternals/TechNet CoreInfo
2.  运行“核心信息-v”
3.  如果“EPT”旁边有“*”，那应该没问题。如果 EPT 旁边有“-”，则您的处理器不支持 SLAT。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-24T02:18:28.690

如果您拥有 Windows Phone 8 设备，您可以“解锁”它并在其中部署和调试应用程序，这样您就可以保留 32 位操作系统。

否则，您需要格式化并安装 64 位版本的 Windows 8。

# android - 开发 Android 应用程序时，如何取消正在运行的 AsyncTask？

> ID：14016192
> 
> 赞同：4
> 
> 时间：2012-12-24T01:42:57.883
> 
> 标签：android, asynchronous, android-asynctask

> **可能重复：**
> [取消正在执行的 AsyncTask 的理想方法](https://stackoverflow.com/questions/2735102/ideal-way-to-cancel-an-executing-asynctask)

当我开发一个Android应用程序时，我用an`AsyncTask`来下载东西，我用a`progressDialog`来显示这个AsyncTask的进度，现在**当我按下后退按钮时，我想取消这个AsycTask**，我调用了`AsycTask.cancel()`，但是它不起作用. 如何取消正在运行的 AsyncTask ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T03:24:02.893

```
 class ImplementAsynctask extends AsyncTask implements OnDismissListener{
       ProgressDialog dialog = new ProgressDialog(ActivityName.this);

       protected onPreExecute() {
           //do something and show progress dialog
       }
       protected onPostExecute() {
          //cancel dialog after completion
       }

       @Override
        public void onDismiss(DialogInterface dialog) {
            //cancel AsycTask in between.
            this.cancel(true);
        }
}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-24T04:37:31.287

单击后退按钮执行以下操作：

将您的 Aynctask 声明为全局变量，如下所示：

```
//AysncTask class
private contactListAsync async;

    if(async != null){

    async.cancel(true);

    async= null;

    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-24T02:04:28.237

最正确的方法是定期检查`doInBackground`任务是否被取消（即通过调用`isCancelled`）。从[http://developer.android.com/reference/android/os/AsyncTask.html](http://developer.android.com/reference/android/os/AsyncTask.html)：

**取消任务：**

可以通过调用随时取消任务 `cancel(boolean)`。调用此方法将导致后续调用 `isCancelled()`返回`true`。调用此方法后 ，将在返回后调用`onCancelled(Object)`, 而不是。为了确保尽快取消任务，如果可能（例如在循环内），您应该始终从 定期检查 isCancelled() 的返回值。`onPostExecute(Object)``doInBackground(Object[])``doInBackground(Object[])`

如果您需要更多信息，请查看此博客文章：http: [//vikaskanani.wordpress.com/2011/08/03/android-proper-way-to-cancel-asynctask/](http://vikaskanani.wordpress.com/2011/08/03/android-proper-way-to-cancel-asynctask/)

# java - 爪哇错误？为什么画矩形而不是椭圆？

> ID：14016194
> 
> 赞同：4
> 
> 时间：2012-12-24T01:43:17.763
> 
> 标签：java, swing, scale, java-2d

下面的代码绘制矩形和 2 个椭圆。

![在此处输入图像描述](../Images/57a5b101b849b95ae9f0ab41ac3ecf38.png)

虽然应该画3个椭圆。

我的操作系统是 Windows 7 prof 64 位

我的 Java 是 1.6 x86 也经过 1.7 x64 测试。

为什么？

```
package tests;

import java.awt.BasicStroke;
import java.awt.Color;
import java.awt.Graphics;
import java.awt.Graphics2D;
import java.awt.Rectangle;
import java.awt.RenderingHints;
import java.awt.geom.AffineTransform;
import java.awt.geom.Ellipse2D;

import javax.swing.JFrame;
import javax.swing.JPanel;
import javax.swing.SwingUtilities;

import net.miginfocom.swing.MigLayout;

public class AntialiacingScaleTester {

    public static void main(String[] args) {

        SwingUtilities.invokeLater(new Runnable() {

            @Override
            public void run() {

                JPanel circlePanel = new JPanel() {
                    @Override
                    public void paintComponent(Graphics g) {

                        super.paintComponent(g);

                        Graphics2D g2d = (Graphics2D)g;
                        g2d.setRenderingHint(RenderingHints.KEY_ANTIALIASING, RenderingHints.VALUE_ANTIALIAS_ON);

                        g2d.setColor(Color.RED);
                        g2d.setStroke(new BasicStroke(1));
                        //g2d.drawOval(0, 0, 200, 200);
                        g2d.draw(new Ellipse2D.Double(0, 0, 200, 200));

                        AffineTransform old = g2d.getTransform();

                        g2d.setColor(Color.GREEN);
                        g2d.scale(1000, 1000);
                        g2d.setStroke(new BasicStroke(0.001f));
                        g2d.draw(new Ellipse2D.Double(0, 0, 0.225, 0.225));

                        g2d.setColor(Color.BLUE);
                        g2d.scale(10, 10);
                        g2d.setStroke(new BasicStroke(0.001f));
                        g2d.draw(new Ellipse2D.Double(0, 0, 0.025, 0.025));

                        g2d.setTransform(old);

                    }
                };

                JFrame frame = new JFrame();
                frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

                //frame.setLayout(new MigLayout("fill"));
                //frame.add(circlePanel, "w 300, h 300, grow");

                //frame.add(circlePanel);

                frame.setLayout(null);
                circlePanel.setBounds(new Rectangle(0, 0, 300, 300));
                frame.add(circlePanel);

                frame.setBounds(0, 0, 350, 300);

                //frame.pack();
                frame.setVisible(true);

            }
        });

    }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-24T01:51:45.160

我复制/粘贴了您的代码，它绘制了您写的 2 个省略号，我所做的唯一更改是替换您`MigLayout`的 by `null`，手动设置框架和面板尺寸并删除`frame.pack()`调用：

```
import java.awt.BasicStroke;
import java.awt.Graphics;
import java.awt.Graphics2D;
import java.awt.Rectangle;
import java.awt.RenderingHints;
import java.awt.geom.AffineTransform;
import java.awt.geom.Ellipse2D;
import javax.swing.JFrame;
import javax.swing.JPanel;

public class Test {
    /**
     * @param args
     */
    public static void main(String[] args) {
        JPanel circlePanel = new JPanel() {
            @Override
            public void paint(Graphics g) {

                Graphics2D g2d = (Graphics2D) g;
                g2d.setRenderingHint(RenderingHints.KEY_ANTIALIASING, RenderingHints.VALUE_ANTIALIAS_ON);

                g2d.setStroke(new BasicStroke(1));
                //g2d.drawOval(0, 0, 200, 200);
                g2d.draw(new Ellipse2D.Double(0, 0, 200, 200));

                AffineTransform old = g2d.getTransform();

                g2d.scale(10000, 10000);
                g2d.setStroke(new BasicStroke(0.001f));
                g2d.draw(new Ellipse2D.Double(0, 0, 0.025, 0.025));

                g2d.setTransform(old);

            }
        };

        JFrame frame = new JFrame();
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

        frame.setLayout(null);
        circlePanel.setBounds(new Rectangle(0, 0, 300, 300));
        frame.add(circlePanel);

        frame.setBounds(0, 0, 350, 300);

        //frame.pack();
        frame.setVisible(true);
    }
} 
```

![在此处输入图像描述](../Images/ad76abb352763f628a795ae8c7f1ee1f.png)

**更新：** 可以使用 Oracle JDK（java 版本“1.8.0-ea”）而不是 OpenJDK 重现该问题。得到了菱形，正如另一个答案中指出的那样，比例因子是形状退化的根本原因，虽然不知道这是否应该是适当的行为，所以这些 JRE 中一定有一个错误。以下测试程序适用于两个 JRE：

```
import java.awt.BasicStroke;
import java.awt.Graphics;
import java.awt.Graphics2D;
import java.awt.Rectangle;
import java.awt.RenderingHints;
import java.awt.geom.AffineTransform;
import java.awt.geom.Ellipse2D;
import javax.swing.JFrame;
import javax.swing.JPanel;

public class Test {
    /**
     * @param args
     */
    public static void main(String[] args) {
        JPanel circlePanel = new JPanel() {
            @Override
            public void paint(Graphics g) {

                Graphics2D g2d = (Graphics2D) g;
                g2d.setRenderingHint(RenderingHints.KEY_ANTIALIASING, RenderingHints.VALUE_ANTIALIAS_ON);

                g2d.setStroke(new BasicStroke(1));
                //g2d.drawOval(0, 0, 200, 200);
                g2d.draw(new Ellipse2D.Double(0, 0, 200, 200));

                AffineTransform old = g2d.getTransform();

                g2d.scale(10, 10);
                g2d.setStroke(new BasicStroke(1.0f));
                g2d.draw(new Ellipse2D.Double(0, 0, 25.0, 25.0));

                g2d.setTransform(old);

            }
        };

        JFrame frame = new JFrame();
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

        frame.setLayout(null);
        circlePanel.setBounds(new Rectangle(0, 0, 300, 300));
        frame.add(circlePanel);

        frame.setBounds(0, 0, 350, 300);

        //frame.pack();
        frame.setVisible(true);
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-25T23:18:22.380

在 Eclipse 中的 Java 7、Windows 7 上复制，删除了布局管理器。

我的感觉是，这是由于小浮点值的高缩放和不准确性相结合，减少了生成的点数。

如果您替换值介于 0.0363 和 0.0362 之间，则渲染 API 会中断。它不再生成弧，而是生成正方形。

解决方法是停止将巨大的缩放与微小的对象结合起来。缩小并增加尺寸。

# c# - Sitecore 子项目排序问题

> ID：14016196
> 
> 赞同：4
> 
> 时间：2012-12-24T01:43:29.943
> 
> 标签：c#, asp.net, content-management-system, sitecore, sitecore6

当没有选中子项排序时，默认的排序方式是什么？根据 sitecore 文档：

“如果您没有为项目指定子排序规则，Sitecore 将应用默认子排序规则，用户可以手动对项目进行排序。”

并将默认定义为：

“默认：按名称的字母顺序对项目进行排序，而不是将前导数字解释为数字。前导下划线排在最后。这是默认的子排序规则。”

但是，我有一个输入一堆项目的脚本，我只希望它们按照我输入它们的顺序显示（这本质上是“创建”选项） - 然后我希望用户可以控制它们的方式在那之后订购它。不幸的是，它不会保留我输入它们的顺序（而且似乎也不是默认顺序）。

如果我选择任何子项目排序选项，那么用户就不能再订购它了……我该怎么做？有没有办法设置起始排序顺序，然后仍然让用户订购项目？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-24T09:00:03.397

您应该做的是将该`Subitems Sorting`字段留空，然后将排序顺序值（在该`__Sortorder`字段中）添加到脚本插入的每个项目（将每个项目的值增加 100，从 100 开始）。

这应该会产生您想要的结果；您的项目按插入顺序排序，用户仍然可以在内容编辑器中更改其顺序。

# sql-server - 如何处理可更新的语言及其单词

> ID：14016199
> 
> 赞同：1
> 
> 时间：2012-12-24T01:43:55.043
> 
> 标签：sql-server, asp.net-mvc-3

我的项目中有两个用于多语言的数据库表：

```
Word -ID-      -En-          -Ge-
       1       Hello         Hallo
       2       Yes            Ja

Lang -ID-   -Name-  -FlagFileName- 
       1   English    flag-en.jpg
       2   Deutsch    flag-ge.jpg 
```

但是，我需要能够将新语言添加到系统中。我可以向 Lang 表添加一个新行，向 Word 表添加一个新列，但我无法更新我的 ASP.NET MVC3 项目中的 DBContext 对象。我的模型中的我的数据库对象。

```
public class Word
{
    public int ID { get; set; }
    public string English { get; set; }
    public string Deutsch { get; set; }
}
public class Language
{
    public int ID { get; set; }
    public string Name { get; set; }
    public string ImageFileName { get; set; }
} 
```

我需要一种方法来定义 Word，因为它可以添加新的语言。如何更新 Word 对象？这在某种程度上是可行的吗？

我也有处理动态视图的问题：

```
@{
    Type objectType = Type.GetType(typeof(MyProjectNamespace.Models.Word).AssemblyQualifiedName);
    System.Reflection.PropertyInfo[] fields = objectType.GetProperties();
}

<table>
@foreach (System.Reflection.PropertyInfo f in fields)
{ 
    <th> @f.Name.ToString() </th>
}
@foreach (var item in Model) {
<tr>
    @foreach (System.Reflection.PropertyInfo f in fields)
    { 
      <td>@Html.DisplayFor(modelItem => item.English)</td>
      <td>@Html.DisplayFor(modelItem => item.Deutsch)</td>
      <td>//How can I display for a new Language here?</td>
    }
</tr>
}
</table> 
```

我可以使用下面的代码获取 Word 的每个属性并将它们打印为标题，但是如何打印这些动态属性中的值？这是可行的吗？

我很欣赏任何想法，我什至准备重新创建表格。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-24T03:42:54.433

我决定简单点。处理动态模型对象并获取它们的动态属性可能是可行的，但不值得。所以我决定我需要一个 Word 表格，例如：

```
Lang -ID-   -Name-  -FlagFileName- 
       1   English    flag-en.jpg
       2   Deutsch    flag-ge.jpg

Word -ID-    -Text-     -LanguageID-
       1     Hallo          2
       2     Hello          1
       3      Yes           1
       4      Ja            2 
```

随着新语言的添加，单词不会出现在数学索引中，例如：

```
 --indexed--                    --index broken--
 1-English Word                 1-English Word
 2-German Word                  2-German Word
 3-English Word                 3-Spanish Word
 4-German Word                  4-Dutch Word 
```

并且计算机无法理解具有 %100 可靠性的单词的含义，我决定保留一个含义表，该表仅包含英语单词：

```
Meaning -ID-   -Text-
          1    Hello
          2    Yes 
```

并将含义与实际单词绑定：

```
Word -ID-    -Text-     -LanguageID-  -MeaningID-
       1     Hallo          2              1
       2     Hello          1              1
       3      Yes           1              2
       4      Ja            2              2 
```

我将 WordID 分配给新的动态元素，例如“新类型”，它将用于在某处填充下拉框。现在我将它绑定到一个 MeaningID。

我猜这个解决方案是清晰、易于理解且易于实施的。一周内我不会接受我自己的答案，以防我当前的表格可能会出现一些明确的解决方案。

# javascript - Node.js - 无效的 select() 参数

> ID：14016200
> 
> 赞同：2
> 
> 时间：2012-12-24T01:44:16.703
> 
> 标签：javascript, node.js, mongodb, mongoose

我正在尝试创建一个列表来显示`teams`我的数据库中的所有内容。我得到错误`TypeError: Invalid select() argument. Must be a string or object.`任何人都可以帮我弄清楚如何解决这个问题吗？我只是想用它来打印当前团队的列表，然后可以单击此团队列表来编辑团队名称！

所以在我`Schema`的 for`Team`我有这个：

```
Team.statics.getAllMeta = function(cb){
  var query = this.find({}, ['key', 'name'], cb);
  return query.exec(cb);
}; 
```

然后在我的`index.js` `routes`我有这个：

```
var getAllMeta = function(req, res, next){
  Team.getAllMeta(function(err, teamsList){
    if(!err && teamsList){
      req.teamsList = teamsList;
    }
    next(err);
  });
}; 
```

这样我就可以像这样调用`routes`我的`team`页面：

```
 app.get('/team', getAllMeta, function(req, res){
    util.log('Serving request for url[GET] ' + req.route.path);
    res.render('team', {'teamsList' : req.teamsList});
  }); 
```

仅供参考，这里是来自的其他相关`index.js`部分`routes`

```
 app.get('/', function(req, res){
    logger.log('Serving request for url [GET]' + req.route.path)
    Team.getAll(function(err, allTeams){
      if(!err && allTeams){
        res.render('index', {'allTeams' : allTeams});
      }else{
        util.log('Error fetching team from database : ' + err);
        res.render('error');
      }
    });
  });

  app.get('/show/team/:key', function(req,res){
    Team.findByKey(req.params.key, function(err, teamData){
      if(!err && teamData){
        teamData = teamData[0];
          res.json({
            'retStatus' : 'success',
            'teamData' : teamData
          });
      } else {
        util.log('Error in fetchin Team by key: ' + req.params.key);
        res.json({
          'retStatus' : 'failure',
          'msg' : 'Error in fetching Team by key: ' + req.params.key
        });
      }
    });
  }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T01:58:53.043

尝试

```
var query = this.find({}, 'key name', cb); 
```

[https://github.com/LearnBoost/mongoose/issues/1087](https://github.com/LearnBoost/mongoose/issues/1087)

# text - 用于从博客条目中分类性别的文本分类

> ID：14016201
> 
> 赞同：1
> 
> 时间：2012-12-24T01:44:28.603
> 
> 标签：text, categorization

我正在研究“文本分析”。现在我有一套语料库，我知道每个文件作者的性别。那么，如何为分类器（贝叶斯、SVM...）构建特征向量。或者你能为我推荐一些关于这个主题的有用文件吗？谢谢！

# visual-studio-2010 - CLI 中的多行定义指令

> ID：14016203
> 
> 赞同：1
> 
> 时间：2012-12-24T01:44:40.463
> 
> 标签：visual-studio-2010, preprocessor, command-line-interface

我试图在我的 CLI 程序中使用很长的定义，但因此我得到了很多错误。

这是我的代码。

```
#define OPERATION_MACRO(character)                                  \
        array<Byte>^ opRes = gcnew array<Byte>(args[0]->Length);    \
        for(int i=0;i<args[0]->Length;i++)                          \
        {                                                           \
            double result=0;                                        \
            for(int k=0;k<args->Length;k++)                         \
            {                                                       \
            result character##= args[k][i];                     \   
            }                                                       \
            graphicUtils::round(result);                            \
            opRes[i] = result;                                      \
        }                                                           \
        return opRes;

array<Byte>^ myInterpreter::mathOp(array< array<Byte>^ >^ args, Char opr)
{
        switch(opr)
        {
            case '*':
                OPERATION_MACRO(*)
            case '/':
                OPERATION_MACRO(/)
            case '+':
                OPERATION_MACRO(+)
            case '-':
                OPERATION_MACRO(-)
            case '%':
                OPERATION_MACRO(%)
            case '^':
                OPERATION_MACRO(^)
        }
} 
```

是因为 CLI 编译器中的换行符不同吗？

# javascript - 使用 onload 未完全加载图像

> ID：14016205
> 
> 赞同：4
> 
> 时间：2012-12-24T01:44:57.810
> 
> 标签：javascript, image, canvas, onload

`canvasArray`包含拆分图像，当在浏览器中打开时，`<canvas>`元素应该显示在表格中，例如 3x3
第一次打开页面时，屏幕上会呈现一个空表（问题），再次单击时，它会`<canvas>`正确显示元素，大概是因为它们被缓存了
他们为什么没有第一次显示？我尝试`ctx.drawImage(img,xoffset,yoffset);`在代码中使用两次，在`onload`事件内部和外部
思考是如果图像没有在循环外正确绘制，一旦`onload`事件触发它会再试一次，但它不会..

```
Image URL<input type="text" id="image" value="images/hippo.jpg"/><br>

var canvasArray = Project.split( $("#image").val() , rowCount * rowCount); 
 // eg Project.split("https://image.com/funny.jpg, 3, 3");

var Project = {
  split: function(imgsrc, tiles) {

    var img = new Image(),
        canvasArray = new Array(),
        imgWidth,
        imgHeight,
        r,g,b = 0;
    img.onload = function(){
        xoffset = 0,
        offset = 0;

        for (var i = 0; i < tiles; i++){

            //create canvas element and set attributes and get the canvas context
            canvasArray[i] = document.createElement('canvas');
            canvasArray[i].setAttribute('width', tileW);
            canvasArray[i].setAttribute('height', tileH);    
            canvasArray[i].setAttribute('id', 'canvas'+i);
            var ctx = canvasArray[i].getContext('2d');

            ctx.drawImage(img,xoffset,yoffset);

            //if i is a multiple of the total number of tiles to a row,
            //move down a column and reset the row_col
            if((i + 1) % row_col == 0){
                yoffset -= tileH;
                xoffset =0;
            }else{
                //otherwise move across the image
                xoffset -= tileW; 
            }
        }
    };
    img.src = imgsrc;   

    //get the number of tiles in a row or column (row == column )
    var row_col = Math.sqrt(tiles),
        tileH = img.height / row_col,
        tileW = img.width / row_col,
        canvasArray = [tiles];

    var xoffset = 0,
        yoffset = 0;

    for (var i = 0; i < tiles; i++){

        //create canvas element and set attributes and get the canvas context
        canvasArray[i] = document.createElement('canvas');
        canvasArray[i].setAttribute('width', tileW);
        canvasArray[i].setAttribute('height', tileH);
        canvasArray[i].setAttribute('id', 'canvas'+i);
        var ctx = canvasArray[i].getContext('2d');

        ctx.drawImage(img,xoffset,yoffset);

        //if i is a multiple of the total number of tiles to a row,
        //move down a column and reset the row_col
        if((i + 1) % row_col == 0){
            yoffset -= tileH;
            xoffset =0;
        }else{
            //otherwise move across the image
            xoffset -= tileW; 
        }
    }

    return canvasArray;
}}; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-24T02:00:04.847

您需要检查`complete`img，选择图像本身而不是`val`，在 onload 处理程序中计算图像尺寸，而且由于图像加载是异步操作，您需要使用回调，而不是返回数组：

```
// eg Project.split("https://image.com/funny.jpg, 3*3,function(canvasArray)");
var Project = {
    split: function(imgsrc, tiles, callback) {

        var canvasArray = new Array(),
            imgWidth, imgHeight, r, g, b = 0;
        var split = function() {
            console.log(1);
            var row_col = Math.sqrt(tiles),
                tileH = Math.round(img.height / row_col),
                tileW = img.width / row_col,

                xoffset = 0,
                yoffset = 0;
            for (var i = 0; i < tiles; i++) {
                //create canvas element and set attributes and get the canvas context
                canvasArray[i] = document.createElement('canvas');
                canvasArray[i].setAttribute('width', tileW);
                canvasArray[i].setAttribute('height', tileH);
                canvasArray[i].setAttribute('id', 'canvas' + i);
                var ctx = canvasArray[i].getContext('2d');

                ctx.drawImage(img, xoffset, yoffset);

                //if i is a multiple of the total number of tiles to a row,
                //move down a column and reset the row_col
                if ((i + 1) % row_col == 0) {
                    yoffset -= tileH;
                    xoffset = 0;
                } else {
                    //otherwise move across the image
                    xoffset -= tileW;
                }
            }
            callback(canvasArray);
        };
        var img = new Image();
        img.src = imgsrc;
        console.log(img.complete);
            if (img.complete) {split()} else  $(img).load(split);
    }
};
var tn = 3;
$("button").bind('click', function() {
    Project.split($("#image").val(), tn * tn, function(canvasArray) {
        for (var i in canvasArray) {
            $('body').append(canvasArray[i]);
            if ((i * 1 + 1) % tn == 0) {
                $('body').append($('<br>'))
            }
        }
        console.log(canvasArray);
    });

});

$("button").click();​ 
```

[演示](http://jsfiddle.net/oceog/ezAqY/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-24T02:06:31.673

在画布中使用图像之前，我确保它们是使用[Imagesloaded jQuery Plugin](https://github.com/desandro/imagesloaded)加载的。

您可以选择页面上的任何 DOM 元素，或者您可以动态创建图像并将它们添加到隐藏的 DOM 元素，然后您可以在图像完成加载（包括失败）时执行回调函数

```
 var img = new Image();
 img.src = imgsrc;
 $(document.body).append(img);
 $(document.body).imagesLoaded( [ callback ] ); 
```

我使用这个插件是因为有一些问题和边缘情况，浏览器不会报告图像已完全加载。这包括浏览器向后导航、已超过磁盘限制的已启动缓存、从不触发缓存图像的移动浏览器等等。

# ruby-on-rails - link_to 创建新的nested_resource

> ID：14016209
> 
> 赞同：2
> 
> 时间：2012-12-24T01:45:39.287
> 
> 标签：ruby-on-rails, nested-resources

我定义了接下来的事情：

`task.rb`：

```
class Task < ActiveRecord::Base
   belongs_to :worker
   attr_accessible :done, :name
end 
```

`worker.rb`：

```
class Worker < ActiveRecord::Base
  has_many :tasks
  attr_accessible :name
end 
```

我在“views/workers/index.html.erb”中编写了下一个代码：

```
<h1>Listing workers</h1>

<table>
  <tr>
    <th>Name</th>
    <th>Task</th>
    <th>Done</th>
    <th></th>
    <th></th>
    <th></th>
  </tr>

<% @workers.group_by(&:name).each do |name, tasks| %>
  <tr>
    <td><%= name %></td>
    <td><%= tasks.size %></td>
    <td><%= tasks.select{ |task| task.done != 'yes' }.size %></td>
    <td><%= link_to 'new Task', new_worker_task_path(name) %></td>
    <td><%= link_to 'Show Tasks', worker_tasks_path(name) %></td>

  </tr>
<% end %>
</table> 
```

为了使用链接：new_worker_task_path，

我在task_controller中定义：

```
def new
    @worker = Worker.find(params[:worker_id])
    @task = @worker.tasks.new
    respond_with(@worker)
end 
```

另外，我在views/tasks中定义了：new.html.erb，里面也有：“Hi”。

当我按下“新任务”的链接时，我得到了：

```
Couldn't find Worker with id=alon
Rails.root: /home/alon/projects/TODO

Application Trace | Framework Trace | Full Trace
app/controllers/tasks_controller.rb:48:in `new'
Request

Parameters:

{"worker_id"=>"alon"} 
```

**第一个问题：**如何找到我想给他添加任务的工人？

**第二个问题：**正如我所说，我定义：

```
<td><%= link_to 'new Task', new_worker_task_path(name) %></td> 
```

为什么我必须发送姓名？我用这个值？我真的不明白为什么这个参数是必要的..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T02:02:54.587

您必须发送实际的 :param_key，默认情况下是 ID。

所以，

```
new_worker_task_path()

# have to receive worker's ID as argument. Or worker object, accepted too...

new_worker_task_path(@worker) 
```

更新第一个问题：让我猜你想要什么。

```
<% @workers.group_by(&:name).each do |name, workers| %>
  <tr>
    <td><%= name %></td>
    <td><%= workers.map {|w| w.tasks.size}.sum %></td>
    <td><%= workers.map {|w| w.tasks.select{ |task| task.done != 'yes' }.size}.sum %></td>
    <td>
      <% workers.each do |worker| %>
        <%= link_to 'new Task', new_worker_task_path(worker) %>
      <% end %>
    </td>
    <td>
      <% workers.each do |worker| %>
        <%= link_to 'Show Tasks', worker_tasks_path(worker) %>
      <% end %>
    </td>
  </tr>
<% end %> 
```

# perl - 在 Perl 中模块化 Gearman 工人

> ID：14016212
> 
> 赞同：0
> 
> 时间：2012-12-24T01:46:07.327
> 
> 标签：perl, perl-module, gearman

我需要在 Perl 中模块化 gearman 工作者，这样我就可以注册不同的工作者函数名称及其实现并重用所有其他代码。

```
use strict;
use warnings;

use Getopt::Std;
use JSON qw( decode_json );

use FindBin qw($Bin);
use lib ("$Bin/../blib/lib", "$Bin/../blib/arch");

use Gearman::XS qw(:constants);
use Gearman::XS::Worker;

my %opts;
if (!getopts('h:p:t:', \%opts))
{
    usage();
    exit(1);
}

if(!defined($opts{h})) {
    usage();
    exit(1);
}

my $host    = $opts{h} || '';
my $port    = $opts{p} || 4730;
my $timeout = $opts{t} || -1;

my $worker= new Gearman::XS::Worker;

if ($timeout >= 0)
{
    $worker->set_timeout($timeout);
}

my $ret= $worker->add_server($host, $port);
if ($ret != GEARMAN_SUCCESS)
{
    printf(STDERR "%s\n", $worker->error());
    exit(1);
}

#----------------------------------------------------------------------
# Register function
#----------------------------------------------------------------------

$ret= $worker->add_function("do_work", 0, \&do_work, ''); # <-- 1\. This function name can be changed
if ($ret != GEARMAN_SUCCESS)
{
    printf(STDERR "%s\n", $worker->error());
}

#----------------------------------------------------------------------
# Wait for job
#----------------------------------------------------------------------

while (1)
{
    my $ret = $worker->work();
    if ($ret != GEARMAN_SUCCESS)
    {
        printf(STDERR "%s\n", $worker->error());
    }
}

#----------------------------------------------------------------------
# Worker Function
#----------------------------------------------------------------------

sub do_work {   # 2\. And then this implementation can be changed
    my $job         = shift;

    my $result      = '';
    my $workload    = $job->workload();
    my $params      = decode_json $workload;

    my $input_file  = $params->{'inFile'};
    my $output_file = $params->{'outFile'};
    my $options     = $params->{'options'};
    my $timeout     = $params->{'timeout'};

    # Worker code

    my $ret= $job->send_status(1, 1);
    if ($ret != GEARMAN_SUCCESS)
    {
        return '';
    }

    return $result;
}

#----------------------------------------------------------------------
# Usage
#----------------------------------------------------------------------

sub usage {
    printf("\nusage: %s [-h <host>] [-p <port>]\n", $0);
    printf("\t-h <host>    - job server host\n");
    printf("\t-p <port>    - job server port\n");
    printf("\t-t <timeout> - timeout in milliseconds\n");
}

exit; 
```

我想重用使用 Perl 模块的所有功能，除了我可以在不同的文件中注册不同的函数名称及其实现，例如：

**模块G.php**

```
# All the gearman connection and common code goes here 
```

**WorkerFunction.php**

```
Use ModuleG

$SomeVAR = $worker->add_function("do_new_work", 0, \&do_new_work, '');
do_new_work() {
    # code goes here
} 
```

你能帮我吗，我如何模块化这段代码。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-05T18:27:54.173

它与 php 非常相似。

1.  将德语连接代码拆分为 .pm 文件

2.  添加`package ModuleG;`到文件的顶部和`1;`底部

3.  在 ModuleG.pm 中创建一个函数来访问 worker `Sub worker { return $worker; }`，因为从模块中公开变量被认为是不好的做法

4.  调用 worker sub as`ModuleG->worker()->add_function("do_new_work", 0, \&do_new_work, '');`并将 sub 定义为正常。

# python - 如何在 .py 文件中使用 Matplotlib 在绘图的图例中编写 Latex 公式？

> ID：14016217
> 
> 赞同：66
> 
> 时间：2012-12-24T01:46:43.987
> 
> 标签：python, matplotlib, latex

我正在用 Python（.py 文件）编写脚本，并且正在使用 Matplotlib 绘制一个数组。我想在情节中添加一个带有公式的图例，但我无法做到。我以前在 IPython 或终端中做过这个。在这种情况下，编写如下内容：

```
legend(ur'$The_formula$') 
```

完美地工作。但是，当我从终端/IPython 调用我的 .py 脚本时，这不起作用。

* * *

## 回答 #1

> 赞同：73
> 
> 时间：2012-12-24T03:14:54.013

最简单的方法是在绘制数据时分配标签，例如：

```
import matplotlib.pyplot as plt
ax = plt.gca()  # or any other way to get an axis object
ax.plot(x, y, label=r'$\sin (x)$')

ax.legend() 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-12-24T01:51:39.553

在为标签编写代码时，它是：

```
import pylab

# code here

pylab.plot(x,y,'f:', '$sin(x)$') 
```

所以也许`pylab.legend('$latex here$')`

编辑：

`u`用于 unicode 字符串，请尝试`r'$\latex$'`

# r - r - 革命 R - 是否需要修改我原来的 R 脚本？

> ID：14016221
> 
> 赞同：1
> 
> 时间：2012-12-24T01:48:30.583
> 
> 标签：r

我从网上了解到，Revolution R 允许多线程并优化我的 R 脚本的运行。

我的问题是：安装Revolution R 后，如果我在Revolution R 环境下运行我的R 脚本，它会自动优化我的R 脚本的运行吗？或者我需要修改我的 R 脚本以允许 Revolution R 优化我的 R 脚本的运行？

非常感谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-24T02:27:36.887

我认为您的术语可能需要一些改进。您可能需要区分多处理和多线程。Revolution R 确实链接到 Windows 的多线程 BLAS 库，除非您编译了您的版本，否则该库可能不可用。这是否会提高您的性能显然在某种程度上取决于您使用的功能。

要在 R 中使用多处理，您需要适当地设置您的机器资源，然后使用分发并行任务的代码。当您询问修改脚本时，这些似乎是您正在考虑的应用程序。Revo-R 曾经在这里比常规 R 具有优势，但在最近的几个版本中，所有用户都可以使用“并行”包。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-24T02:24:15.760

Revo R 具有多线程 BLAS，这不需要更改您的脚本。

GNU R 或 Standard R 当然也可以使用多线程 BLAS，如[R 安装和管理手册的附录 A.3.1 中所述](http://cran.r-project.org/doc/manuals/R-admin.html#BLAS%20%22Section%20A.3.1%20of%20the%20R%20Inst+Admin%20Manual)。

# gnuplot - 跳过/前进到 gnuplot 中的记录

> ID：14016225
> 
> 赞同：1
> 
> 时间：2012-12-24T01:49:42.493
> 
> 标签：gnuplot

我有一个包含两列时间和数据的时间序列，并且想计算导数的估计值。粗略的方式可能只使用先前的值；更好的方法可以使用上一个和下一个。*一般来说，跳过n*条记录可能很有用，而不仅仅是一条。通常我只是重新处理我的数据，但是**有没有一种通用的方法来跳过或推进 gnuplot 中的记录，使用常见的 *nix 命令行工具**？

# android - android 4.0 cursor android.database.StaleDataException: 试图访问

> ID：14016230
> 
> 赞同：3
> 
> 时间：2012-12-24T01:50:59.153
> 
> 标签：android, listview, contact

请查看联系人列表代码 [http://www.pocketmagic.net/2011/03/android-contacts-a-simple-contact-selector/#.UNe0j7YzAQQ](http://www.pocketmagic.net/2011/03/android-contacts-a-simple-contact-selector/#.UNe0j7YzAQQ)

当我在 android 4.0+ 上运行代码时

会出现错误android.database.StaleDataException: Attempted to access

2.3版本正常工作。

# ruby-on-rails - Rails 通过 Ajax 破坏 js 错误

> ID：14016231
> 
> 赞同：1
> 
> 时间：2012-12-24T01:51:02.333
> 
> 标签：ruby-on-rails, ajax, ruby-on-rails-3, jquery

好的，所以我正在使用项目应用程序构建一个非常简单的列表，与您的标准待办事项列表应用程序几乎完全相同。我已经设法在列表（点`belongs_to :list`和列表`has_many :points`）中创建新的“点”，但我在“销毁”操作时遇到了麻烦。

当我在浏览器中单击破坏链接时，没有明显发生任何事情，并且`Error: Syntax error, unrecognized expression: /lists/10/points/125`根据列表和点的 id，我显然会收到不同值的错误。

如果我刷新页面或查看数据库，很明显该条目确实已被删除。如果没有 ajax，我的销毁操作就可以正常工作。我觉得我一定遗漏了一些明显的东西，有什么想法吗？

仅供参考，“pro”属性只是与每个点相关的布尔值。

### points_controller.rb

```
def destroy 
  @point = @list.points.find(params[:id])
  @point.destroy
  respond_to do |format|
    format.html { redirect_to list_url(@list) }
    format.js
  end
end 
```

### 列表/show.html.erb

```
 <% @list.points.each do |point| %>
      <% if point.pro == true and point.valid? == true %>
        <li class="weight-<%= point.weight %>"><%= point.content %>
          <%= link_to "&times;".html_safe, [@list, point],  
                  :remote => true,
                  :method => :delete, 
                  :class=> "close", 
                  :data => {:dismiss => 'alert'} %>
    </li> 
```

**我在views/points/destroy.js.erb**中放什么似乎并不重要，因为代码似乎没有被执行。

## 更新

我想通了，我必须将删除链接中的路径更改为`list_point_url(@list, point)`. 另一个问题是我的无效 javascript 导致服务器错误，所以我没有意识到问题是什么（结果`#<%= dom_id(@point) %>`需要用引号括起来）。

谢谢大家！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-24T02:18:54.640

也许检查删除链接是否路由到`destroy`控制器操作，因为`list_point_path`看起来并不像删除路由。

* * *

**编辑**

对不起知识湖，但我不确定`[@list, point]`会产生什么作为路线。这是我个人的看法，仅供参考：

```
link_to "Delete", admin_photo_path(photo), :method => :delete, :confirm => "Delete this image?", :class => "btn-trash" 
```

My`admin_photo_path`是一条通往单个`Photo`实例的单一路径；不是一个集合。

**编辑**

简单的方法可能是将删除发送到点对象，也许这会有所帮助？

```
link_to "&times;".html_safe, point,  
              :remote => true,
              :method => :delete, 
              :class=> "close", 
              :data => {:dismiss => 'alert'} 
```

# c++ - 无法在 Allegro 中加载字体

> ID：14016233
> 
> 赞同：3
> 
> 时间：2012-12-24T01:51:26.660
> 
> 标签：c++, visual-studio, visual-studio-2012, allegro, allegro5

我在 C++ 和 Visual Studio 2012 中使用 Allegro 5，但由于某种原因，我无法使用 Allegro wiki 中的示例代码加载字体：

```
 ALLEGRO_FONT *font = al_load_ttf_font("pirulen.ttf",72,0 );

   if (!font){
      fprintf(stderr, "Could not load 'pirulen.ttf'.\n");
      return false;
   }

   al_clear_to_color(al_map_rgb(50,10,70));
   al_draw_text(font, al_map_rgb(255,255,255), 640/2, (480/4),ALLEGRO_ALIGN_CENTRE, "It worked!"); 
```

我已经尝试将字体文件放置在我的 Visual Studio 项目中的每个可行目录中，以及 .exe 所在的目录中（正如其他几个线程所建议的那样）。我还尝试将它的副本放在 C: 驱动器上并使用完全限定的路径调用它：我尝试过`C:\\pirulen.ttf`，`C:/pirulen.ttf`但都没有奏效。我也尝试将它添加到我项目中的“资源文件”文件夹中，但这也不起作用。

关于可能发生的事情有什么建议吗？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-24T04:35:20.100

需要说的都在这里：

*   [加载资源（故障排除）](http://wiki.allegro.cc/index.php?title=Loading_Resources_(Troubleshooting))

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-06-20T16:50:35.063

我知道这是一个古老的问题，但我刚刚找到它并阅读了 Matthew 建议的文档（每个人都应该这样做），所以我想我会在此处添加此内容以供其他人寻找简单答案。

如果您愿意，您可以为每个资源创建一个路径，但使用它`al_change_directory`来设置您的资源目录更容易，然后您可以在那里找到您的资产。

```
al_init_font_addon(); // initialize the font addon
al_init_ttf_addon();// initialize the ttf (True Type Font) addon

ALLEGRO_PATH *path = al_get_standard_path(ALLEGRO_RESOURCES_PATH);
al_append_path_component(path, "resources");
al_change_directory(al_path_cstr(path, '/'));
al_destroy_path(path); 
```

然后您可以引用相对于`resource`根的路径。

```
ALLEGRO_FONT* font = al_load_ttf_font("LibreCaslonText-Bold.ttf", 72, 0);

// Check font is loaded
if (!font) {
    fprintf(stderr, "failed to load font!\n");
    al_destroy_font(font);
    return -1;
} 
```

澄清`LibreCaslonText-Bold.ttf`存在于`project_dir/resources/LibreCaslonText-Bold.ttf`

*边注*

就我而言，我还需要将资源复制到我的构建目录中。所以我将此添加到我的`CMakeLists.txt`.

```
if (NOT ${PROJECT_SOURCE_DIR} STREQUAL ${CMAKE_CURRENT_BINARY_DIR})
    file(COPY "${PROJECT_SOURCE_DIR}/resources" DESTINATION ${CMAKE_CURRENT_BINARY_DIR})
endif() 
```

# python - 在 pandas 数据框中查找具有 NaN 的行的整数索引

> ID：14016247
> 
> 赞同：112
> 
> 时间：2012-12-24T01:53:49.930
> 
> 标签：python, pandas

我有一个像这样的熊猫数据框：

```
 a         b
2011-01-01 00:00:00 1.883381  -0.416629
2011-01-01 01:00:00 0.149948  -1.782170
2011-01-01 02:00:00 -0.407604 0.314168
2011-01-01 03:00:00 1.452354  NaN
2011-01-01 04:00:00 -1.224869 -0.947457
2011-01-01 05:00:00 0.498326  0.070416
2011-01-01 06:00:00 0.401665  NaN
2011-01-01 07:00:00 -0.019766 0.533641
2011-01-01 08:00:00 -1.101303 -1.408561
2011-01-01 09:00:00 1.671795  -0.764629 
```

有没有一种有效的方法来查找具有 NaN 的行的“整数”索引？在这种情况下，所需的输出应该是`[3, 6]`.

* * *

## 回答 #1

> 赞同：154
> 
> 时间：2012-12-25T18:41:23.723

这是一个更简单的解决方案：

`inds = pd.isnull(df).any(1).nonzero()[0]`

```
In [9]: df
Out[9]: 
          0         1
0  0.450319  0.062595
1 -0.673058  0.156073
2 -0.871179 -0.118575
3  0.594188       NaN
4 -1.017903 -0.484744
5  0.860375  0.239265
6 -0.640070       NaN
7 -0.535802  1.632932
8  0.876523 -0.153634
9 -0.686914  0.131185

In [10]: pd.isnull(df).any(1).nonzero()[0]
Out[10]: array([3, 6]) 
```

* * *

## 回答 #2

> 赞同：53
> 
> 时间：2012-12-24T03:02:12.320

对于数据框`df`：

```
import numpy as np
index = df['b'].index[df['b'].apply(np.isnan)] 
```

会给你返回`MultiIndex`你可以用来索引的东西`df`，例如：

```
df['a'].ix[index[0]]
>>> 1.452354 
```

对于整数索引：

```
df_index = df.index.values.tolist()
[df_index.index(i) for i in index]
>>> [3, 6] 
```

* * *

## 回答 #3

> 赞同：21
> 
> 时间：2019-01-15T11:23:19.883

一条线解决方案。但是它仅适用于一列。

```
df.loc[pandas.isna(df["b"]), :].index 
```

* * *

## 回答 #4

> 赞同：12
> 
> 时间：2017-09-07T14:49:25.130

以防万一，如果您想为所有列找到“nan”的坐标（假设它们都是数字），请执行以下操作：

```
df = pd.DataFrame([[0,1,3,4,np.nan,2],[3,5,6,np.nan,3,3]])

df
   0  1  2    3    4  5
0  0  1  3  4.0  NaN  2
1  3  5  6  NaN  3.0  3

np.where(np.asanyarray(np.isnan(df)))
(array([0, 1]), array([4, 3])) 
```

* * *

## 回答 #5

> 赞同：10
> 
> 时间：2018-09-11T13:07:05.907

不知道这是否为时已晚，但您可以使用 np.where 来查找非值的索引，如下所示：

```
indices = list(np.where(df['b'].isna()[0])) 
```

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2019-05-03T21:34:42.710

如果您有日期时间索引并且您希望获得以下值：

```
df.loc[pd.isnull(df).any(1), :].index.values 
```

* * *

## 回答 #7

> 赞同：5
> 
> 时间：2019-08-28T18:02:08.573

以下是一些方法的测试：

```
%timeit np.where(np.isnan(df['b']))[0]
%timeit pd.isnull(df['b']).nonzero()[0]
%timeit np.where(df['b'].isna())[0]
%timeit df.loc[pd.isna(df['b']), :].index 
```

以及它们对应的时间：

```
333 µs ± 9.95 µs per loop (mean ± std. dev. of 7 runs, 1000 loops each)
280 µs ± 220 ns per loop (mean ± std. dev. of 7 runs, 1000 loops each)
313 µs ± 128 ns per loop (mean ± std. dev. of 7 runs, 1000 loops each)
6.84 ms ± 1.59 µs per loop (mean ± std. dev. of 7 runs, 100 loops each) 
```

就时间而言，这似乎`pd.isnull(df['DRGWeight']).nonzero()[0]`赢得了胜利，但前三种方法中的任何一种都具有可比的性能。

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2019-12-18T15:03:36.437

另一个简单的解决方案是`list(np.where(df['b'].isnull())[0])`

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2018-05-03T17:14:50.383

这是另一个更简单的方法：

```
df = pd.DataFrame([[0,1,3,4,np.nan,2],[3,5,6,np.nan,3,3]])

inds = np.asarray(df.isnull()).nonzero()

(array([0, 1], dtype=int64), array([4, 3], dtype=int64)) 
```

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2018-10-04T15:20:54.630

我正在寻找具有 NaN 值的行的所有索引。
我的工作解决方案：

```
def get_nan_indexes(data_frame):
    indexes = []
    print(data_frame)
    for column in data_frame:
        index = data_frame[column].index[data_frame[column].apply(np.isnan)]
        if len(index):
            indexes.append(index[0])
    df_index = data_frame.index.values.tolist()
    return [df_index.index(i) for i in set(indexes)] 
```

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2021-06-16T03:12:47.610

这将为您提供每列中 nan 的索引值：

```
df.loc[pd.isna(df).any(1), :].index 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2019-05-20T11:33:45.600

让数据框命名为***df***，感兴趣**的列（即我们试图在其中查找 null 的列**）为***'b'***。然后以下代码段给出了数据框中所需的 null 索引：

```
 for i in range(df.shape[0]):
       if df['b'].isnull().iloc[i]:
           print(i) 
```

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2021-12-02T11:27:12.467

```
 index_nan = []
        for index, bool_v in df["b"].iteritems().isna():
           if bool_v == True:
               index_nan.append(index)
    print(index_nan) 
```

# foursquare - 在开发者模式下连接到 Foursquare 应用

> ID：14016251
> 
> 赞同：1
> 
> 时间：2012-12-24T01:54:39.173
> 
> 标签：foursquare

根据 Stack Overflow 用户的建议（关于我之前提出的问题：[Lastest Foursquare check-in on map](https://stackoverflow.com/questions/14015293/lastest-foursquare-checkin-on-map)），我编写了一个基于 PHP 的 Foursquare 应用程序，它使用 Push API 在地图上显示我最近的签到然后可以嵌入到我的博客中。

显然我想保持这个应用程序的私密性，以便它只显示我最近的签到。我认为最好的方法是将应用程序保持在开发人员模式，但在这种模式下，我自己似乎无法连接到应用程序（即使用与创建应用程序相同的帐户）。这也意味着我什至无法测试应用程序是否正常运行，因为当我签到某些位置时，我无法从自己的帐户发送测试推送消息。有没有办法解决这个问题？或者，还有哪些其他选项可用于将应用程序保密？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-24T18:50:31.840

在“开发者模式”下创建应用程序后，查找`Client ID`并手动导航到：

`https://foursquare.com/app/<CLIENT_ID>`

# mysql - 选择图像尺寸 (hxw) 大于或等于

> ID：14016252
> 
> 赞同：0
> 
> 时间：2012-12-24T01:54:54.797
> 
> 标签：mysql

我有一张 MySQL 照片表，并将它们的尺寸存储在一个 varchar 字段中，即。“1024x768”。有没有办法选择高于或等于给定尺寸的照片，而无需修改表格以分别存储“高度”和“宽度”？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T02:01:00.307

```
SELECT *
FROM photos
WHERE CAST(SUBSTR(dimensions, 1, LOCATE("x", dimensions)-1) as NUMBER) > @height
AND CAST(SUBSTR(dimensions, LOCATE("x", dimensions)+1)) as NUMBER) > @width 
```

# web - 如何在 Racket 中阅读网页？

> ID：14016254
> 
> 赞同：7
> 
> 时间：2012-12-24T01:55:18.940
> 
> 标签：web, lisp, scheme, racket

我可以在网上找到的所有信息都是关于编写 Web 服务器的，但似乎很少有关于对 Web 客户端有用的功能。理想情况下，我希望函数看起来像这样：

```
(website "http://www.google.com") 
```

并返回一个包含整个网页的字符串，但我会对任何有效的东西感到满意。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-24T04:25:24.153

这是一个简单的程序，它看起来像你想要的那样：

```
#lang racket

(require net/url)

(port->bytes
 (get-pure-port (string->url "http://www.google.com"))) 
```

如果您像我一样，您可能还想将其解析为 s 表达式。尼尔·范戴克的做法是`neil/html-parsing`：

```
#lang racket

(require (planet neil/html-parsing:2:0)
         net/url)

(html->xexp
 (get-pure-port (string->url "http://www.google.com"))) 
```

注意，由于这个程序是指一个planet包，第一次运行这个程序会下载并安装htmlprag包。构建文档可能需要相当长的时间。不过，这是一次性成本，再次运行该程序不会超过几秒钟。

# codeigniter - 无法通过 codeigniter 发送电子邮件

> ID：14016256
> 
> 赞同：-1
> 
> 时间：2012-12-24T01:55:31.920
> 
> 标签：codeigniter, smtp, wampserver

我正在使用带有 wamp 的 codeIgniter 作为本地服务器，我编写了发送电子邮件代码

```
 $config = array( 
      'protocol'=>'smtp',
      'smtp_port'=>'465',
      'smtp_host'=>'ssl://smtp.googlemail.com',
      'smtp_user'=>'myemail@gmail.com',
      'smtp_pass'=>'*********'
    );
    $this->load->library('email',$config);
    $this->email->set_newline("\r\n");//set the new line rule 
    $this->email->from('myemail@gmail.com', 'Imran Tufail');
    $this->email->to('myemail@gmail.com');

    $this->email->subject('Email Test');
    $this->email->message("The stuff works");

    if($this->email->send())
    {
         echo "Mail sent ";
    }
    else{
    echo $this->email->print_debugger();
        }
    } 
```

此代码正在生成错误

```
A PHP Error was encountered
Severity: Warning
Message: fsockopen(): unable to connect to ssl://smtp.googlemail.com:465 (Unable to find the socket transport "ssl" - did you forget to enable it when you configured PHP?) 
```

文件名：库/Email.php

行号：1869

遇到以下 SMTP 错误：1706213911 无法找到套接字传输“ssl” - 您在配置 PHP 时是否忘记启用它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-24T02:34:47.920

我解决了我的问题。因为我们使用的是 ssl smtp 并且没有在 wamp 服务器中启用 ssl 扩展

所以转到任务栏中的 wanpserver 图标，

```
 wampserver->php->phpextansions-> then check the php_openssl extansion 
```

# javascript - 为什么我的 ActionButton 基类被覆盖？

> ID：14016257
> 
> 赞同：2
> 
> 时间：2012-12-24T01:56:40.167
> 
> 标签：javascript, asp.net, inheritance

我的“基类”似乎没有正确填充。为什么？

```
<script type="text/javascript">

    var exceptions = {
        NotImplementedException: function (message) {
            this.name = 'NotImplementedException';
            this.message = message || 'Property or method is not implemented.';
        }
    };
    exceptions.NotImplementedException.prototype = Error.prototype;

    function ActionButton() {
        this.execute = function () {
            throw new exceptions.NotImplementedException("Execute is not implemented.");
        };
        this.render = function (data) {
            throw new exceptions.NotImplementedException("Render is not implemented.");
        };
        this.$template = function () {
            throw new exceptions.NotImplementedException("$template is not implemented.");
        };
    };

    function ImageActionButton() {
        this.image = { url: '' };
    };
    function TextActionButton() {
        this.text = '';
    };
    function StandardActionButton() {
        this.text = '';
        this.image = { url: '' };
    };
    function MenuActionButton() {
        this.buttons = [];
    };

    ImageActionButton.prototype = new ActionButton();
    ImageActionButton.prototype.constructor = ImageActionButton;

    TextActionButton.prototype = new ActionButton();
    TextActionButton.prototype.constructor = TextActionButton;

    StandardActionButton.prototype = new ActionButton();
    StandardActionButton.prototype.constructor = StandardActionButton;

    MenuActionButton.prototype = new ActionButton();
    MenuActionButton.prototype.constructor = MenuActionButton;

    // This fails
    if (ImageActionButton.prototype != ActionButton) {
        alert("ImageActionButton prototype is not ActionButton!");
    }
    // This works
    if (ImageActionButton.prototype.constructor != ImageActionButton) {
        alert("ImageActionButton prototype.constructor is not ImageActionButton!");
    }
</script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-24T02:14:31.020

我认为你会想要使用[instanceof](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Operators/instanceof)而不是像你一样进行比较。

```
if (ImageActionButton instanceof ActionButton) {
    alert("ImageActionButton prototype is not ActionButton!");
} 
```

# javascript - 滑动切换时添加当前类

> ID：14016258
> 
> 赞同：1
> 
> 时间：2012-12-24T01:56:59.760
> 
> 标签：javascript, jquery

我尝试用简单的代码创建简单的手风琴菜单。

这是我的[Jsfiddle](http://jsfiddle.net/aCaEG/)

```
$('li').click(function(ev) {
    $(this).find('>ul').slideToggle();
    ev.stopPropagation();
}); 
```

我的问题是如何`current`在向下滑动时向父 li 添加类，如下所示：

```
<ul>
    <li class="current">
        level 2 
```

`current`并在幻灯片关闭时删除课程。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-24T02:02:29.400

根据您的小提琴，这可以解决问题。

```
$('li').click(function(ev) {
    $(this).find('>ul').slideToggle('slow', function(){
        $(this).parent().toggleClass('current');
    });
    ev.stopPropagation();
});​ 
```

这[是该示例的小提琴](http://jsfiddle.net/AcW84/)，带有彩色背景以进行可视化`.current`

# c++ - iOS 6 中使用 AudioFileServices 进行粒度合成

> ID：14016259
> 
> 赞同：4
> 
> 时间：2012-12-24T01:57:42.617
> 
> 标签：c++, iphone, objective-c, audio, core-audio

我有一个关于我正在开发的声音合成应用程序的问题。我正在尝试读取音频文件，使用[粒度合成技术](http://en.wikipedia.org/wiki/Granular_synthesis)创建随机“颗粒” ，将它们放入输出缓冲区，然后能够使用 OpenAL 将其回放给用户。出于测试目的，我只是将输出缓冲区写入一个文件，然后我可以回听。

从我的结果来看，我在正确的轨道上，但遇到了一些混叠问题和播放声音似乎不太正确。输出文件的中间通常会有相当响亮的爆裂声，有时音量非常大。

以下是我为获得所需结果而采取的步骤，但我对一些事情有点困惑，即我为我的 AudioStreamBasicDescription 指定的格式。

1.  从我的 mainBundle 中读取一个音频文件，这是一个 .aiff 格式的单声道文件：

    ```
    ExtAudioFileRef extAudioFile;
    CheckError(ExtAudioFileOpenURL(loopFileURL,
                               &extAudioFile),
           "couldn't open extaudiofile for reading");
    memset(&player->dataFormat, 0, sizeof(player->dataFormat));

    player->dataFormat.mFormatID = kAudioFormatLinearPCM;
    player->dataFormat.mFormatFlags = kAudioFormatFlagIsSignedInteger | kAudioFormatFlagIsPacked;
    player->dataFormat.mSampleRate = S_RATE;
    player->dataFormat.mChannelsPerFrame = 1;
    player->dataFormat.mFramesPerPacket = 1;
    player->dataFormat.mBitsPerChannel = 16;
    player->dataFormat.mBytesPerFrame = 2;
    player->dataFormat.mBytesPerPacket = 2;

    // tell extaudiofile about our format
    CheckError(ExtAudioFileSetProperty(extAudioFile,
                                   kExtAudioFileProperty_ClientDataFormat,
                                   sizeof(AudioStreamBasicDescription),
                                   &player->dataFormat),
           "couldnt set client format on extaudiofile");

    SInt64 fileLengthFrames;
    UInt32 propSize = sizeof(fileLengthFrames);
    ExtAudioFileGetProperty(extAudioFile,
                        kExtAudioFileProperty_FileLengthFrames,
                        &propSize,
                        &fileLengthFrames);

    player->bufferSizeBytes = fileLengthFrames * player->dataFormat.mBytesPerFrame; 
    ```

2.  接下来我声明我的 AudioBufferList 并设置更多属性

    ```
    AudioBufferList *buffers;
    UInt32 ablSize = offsetof(AudioBufferList, mBuffers[0]) + (sizeof(AudioBuffer) * 1);
    buffers = (AudioBufferList *)malloc(ablSize);

    player->sampleBuffer = (SInt16 *)malloc(sizeof(SInt16) * player->bufferSizeBytes);

    buffers->mNumberBuffers = 1;
    buffers->mBuffers[0].mNumberChannels = 1;
    buffers->mBuffers[0].mDataByteSize = player->bufferSizeBytes;
    buffers->mBuffers[0].mData = player->sampleBuffer; 
    ```

3.  我的理解是 .mData 将是 formatFlags 中指定的任何内容（在这种情况下，键入 SInt16）。由于它是 (void *** ) 类型，我想将其转换为浮点数据，这对于音频操作是显而易见的。在我设置一个 for 循环之前，它只是遍历缓冲区并将每个样本转换为 float*。这似乎没有必要，所以现在我将 .mData 缓冲区传递给我创建的函数，然后将音频细化：

    ```
     float *theOutBuffer = [self granularizeWithData:(float *)buffers->mBuffers[0].mData with:framesRead]; 
    ```

4.  在这个函数中，我动态分配一些缓冲区，创建随机大小的颗粒，在使用汉明窗口将它们开窗后将它们放入我的输出缓冲区并返回该缓冲区（这是浮点数据）。到目前为止，一切都很酷。

5.  接下来，我设置了所有输出文件 ASBD 等：

    ```
    AudioStreamBasicDescription outputFileFormat;

    bzero(audioFormatPtr, sizeof(AudioStreamBasicDescription));

    outputFileFormat->mFormatID = kAudioFormatLinearPCM;
    outputFileFormat->mSampleRate = 44100.0;
    outputFileFormat->mChannelsPerFrame = numChannels;
    outputFileFormat->mBytesPerPacket = 2 * numChannels;
    outputFileFormat->mFramesPerPacket = 1;
    outputFileFormat->mBytesPerFrame = 2 * numChannels;
    outputFileFormat->mBitsPerChannel = 16;
    outputFileFormat->mFormatFlags = kAudioFormatFlagIsFloat | kAudioFormatFlagIsPacked;

    UInt32 flags = kAudioFileFlags_EraseFile;
    ExtAudioFileRef outputAudioFileRef = NULL;
    NSString *tmpDir = NSTemporaryDirectory();
    NSString *outFilename = @"Decomp.caf";
    NSString *outPath = [tmpDir stringByAppendingPathComponent:outFilename];
    NSURL *outURL = [NSURL fileURLWithPath:outPath];

    AudioBufferList *outBuff;
    UInt32 abSize = offsetof(AudioBufferList, mBuffers[0]) + (sizeof(AudioBuffer) * 1);
    outBuff = (AudioBufferList *)malloc(abSize);

    outBuff->mNumberBuffers = 1;
    outBuff->mBuffers[0].mNumberChannels = 1;
    outBuff->mBuffers[0].mDataByteSize = abSize;
    outBuff->mBuffers[0].mData = theOutBuffer;

    CheckError(ExtAudioFileCreateWithURL((__bridge CFURLRef)outURL,
                                     kAudioFileCAFType,
                                     &outputFileFormat,
                                     NULL,
                                     flags,
                                     &outputAudioFileRef),
           "ErrorCreatingURL_For_EXTAUDIOFILE");

    CheckError(ExtAudioFileSetProperty(outputAudioFileRef,
                                   kExtAudioFileProperty_ClientDataFormat,
                                   sizeof(outputFileFormat),
                                   &outputFileFormat),
           "ErrorSettingProperty_For_EXTAUDIOFILE");

    CheckError(ExtAudioFileWrite(outputAudioFileRef,
                             framesRead,
                             outBuff),
           "ErrorWritingFile"); 
    ```

该文件以 CAF 格式正确写入。我的问题是：我是否正确处理了 .mData 缓冲区，因为我将样本转换为浮动数据，操纵（颗粒化）各种窗口大小，然后使用 ExtAudioFileWrite（CAF 格式）将其写入文件？有没有更优雅的方法来做到这一点，例如将我的 ASBD formatFlag 声明为 kAudioFlagIsFloat？我的输出 CAF 文件中有一些点击，当我在 Logic 中打开它时，看起来有很多别名。如果我试图向它发送浮点数据，这是有道理的，但发生了某种我不知道的转换。

提前感谢您对此事的任何建议！我一直是在线几乎所有源材料的狂热阅读者，包括核心音频书、各种博客、教程等。我的应用程序的最终目标是通过耳机向用户实时播放精细化的音频，因此写入文件的东西目前仅用于测试。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T04:48:54.840

您对第 3 步所说的话向我表明您正在将一组短裤解释为一组浮点数？如果是这样，我们找到了您的麻烦的原因。您可以将短值一个一个地分配到一个浮点数组中吗？那应该解决它。

它看起来像是指向一组短裤`mData`。`void *`将此指针转换为 a`float *`不会将基础数据更改为，`float`但您的音频处理函数会将它们视为它们。但是，`float`值`short`以完全不同的方式存储，因此您在该函数中执行的数学运算将在与您的真实输入信号无关的非常不同的值上运行。要通过实验对此进行调查，请尝试以下操作：

```
short data[4] = {-27158, 16825, 23024, 15};
void *pData = data; 
```

指针不指示它`void`指向的数据类型，因此错误地认为它指向`float`值。请注意，a`short`是 2 字节宽，但 a`float`是 4 字节宽。巧合的是，您的代码没有因访问冲突而崩溃。解释为`float`上面的数组只够长两个值。让我们看看第一个值：

```
float *pfData = (float *)pData;
printf("%d == %f\n", data[0], pfData[0]); 
```

其输出将说明您如何获得粗略`-27158 == 23.198200`而不是预期。发生了两件有问题的事情。首先，不是。其次，浮点数的“一和零”的存储方式与整数非常不同。请参阅[http://en.wikipedia.org/wiki/Single_precision_floating-point_format](http://en.wikipedia.org/wiki/Single_precision_floating-point_format)。`-27158.0f``23.2f``sizeof(float)``sizeof(short)`

如何解决问题？至少有两个简单的解决方案。首先，您可以在将数组的每个元素输入音频处理器之前对其进行转换：

```
int k;
float *pfBuf = (float *)malloc(n_data * sizeof(float));
short *psiBuf = (short *)buffers->mBuffers[0].mData[k];
for (k = 0; k < n_data; k ++)
{
    pfBuf[k] = psiBuf[k];
}
[self granularizeWithData:pfBuf with:framesRead];
for (k = 0; k < n_data; k ++)
{
    psiBuf[k] = pfBuf[k];
}
free(pfBuf); 
```

您会看到，您很可能必须`short`在调用`granularizeWithData: with:`. 所以第二种解决方案是进行所有处理，`short`尽管从你写的内容来看，我想你不会喜欢后一种方法。

# css - CSS中不需要的填充

> ID：14016260
> 
> 赞同：1
> 
> 时间：2012-12-24T01:57:50.227
> 
> 标签：css, wordpress, padding

[http://www.milknhny.co.uk/](http://www.milknhny.co.uk/)

我有一个似乎无法找到的 CSS 问题，这肯定不在我的 style.css 中，我对它的来源感到困惑。

我试图为我的菜单设计样式，这总体上给我造成了严重破坏。

它正在创建的 css 如下：

```
ul, menu, dir {
display: block;
list-style-type: disc;
-webkit-margin-before: 1.1em;
-webkit-margin-after: 0em;
-webkit-margin-start: 0px;
-webkit-margin-end: 0px;
-webkit-padding-start: 40px;
} 
```

我被告知这是谷歌自己的风格，它超越了我自己的风格。

现在我已将其添加到我自己的 CSS 中，并将 40px 覆盖为 0 px ！在 padding-start 上很重要。但是我希望避免这种情况。

任何人都可以提供有关如何解决的建议吗？因为这是在我的菜单上创建一个大的左手边距（见网站）

***请忽略菜单的位置，因为在我解决此问题之前，它还没有完全设计***

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-24T02:22:05.327

我刚刚明白了。`#agent li`除了您在CSS 部分中提到的填充值之外，用户代理样式表还给出了填充值。我只是对删除 chrome DOM 检查器中的 CSS 感兴趣，并且网站对我来说看起来不错

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-24T02:24:24.887

只会说和**ashutosh 一样**。如果您指定 UL 具有零填充应该可以正常工作。我认为应该尽可能避免使用 !important 和内联 CSS。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-24T02:10:45.127

如此[处](https://stackoverflow.com/questions/4873867/whats-the-best-way-to-override-a-user-agent-css-stylesheet-rule-that-gives-unor)所述，您可以使用该`!important`标签。

另一种选择是在受影响的项目上使用内联 css：

```
<div id="menuwrapper">
<div id="menuwrapperinner">
<div id="access">
<div class="menu">
   <ul style="padding: 0;"  >
   <!-- or 
   <ul style="-webkit-padding-start: 0;" > -->
       <!-- your <li></li> items here -->
   </ul> 
```

（您可能想尝试使用 Chrome 开发工具）

PS：使用 wordpress 的主题或查看 Bootstrap 来实现自己的菜单。

# java - 带有匿名 EventListener 的 JPanel - 为什么 GC 不销毁侦听器？

> ID：14016262
> 
> 赞同：2
> 
> 时间：2012-12-24T01:58:12.817
> 
> 标签：java, swing, garbage-collection, event-listener, jmapviewer

[我一直在阅读 JMapViewer](http://wiki.openstreetmap.org/wiki/JMapViewer)的开源代码。如果其他人希望查看它，请检查[SVN](http://svn.openstreetmap.org/applications/viewer/jmapviewer/)。

简而言之，主类是`JMapViewer`，它是 a 的扩展`JPanel`。还有另一个非常重要的类称为`DefaultMapController`主`MouseListener`类。

我注意到的第一件奇怪的事情是查看器没有对控制器的引用。构造`JMapViewer`函数实例化 的匿名实例`DefaultMapController`，如下所示：

```
public JMapViewer() {
    // other stuff
    new DefaultMapController(this);
} 
```

在我看来，这似乎是一个糟糕的设计选择，因为控制器有大量的方法（选项、切换等 - 示例如下所示），现在根本无法访问，那么它们有什么好处呢？

```
public void setMovementMouseButton(int movementMouseButton) {
    // changes which mouse button is used to move the map
} 
```

如上面的第一个片段所示，控制器**确实具有对查看器的引用，这就是它能够行使控制的方式。**

然而，我想到了更奇怪的事情！如果侦听器的这个匿名实例没有引用，为什么还要允许它存活呢？GC不应该快速销毁它吗？或者 GC 是否足够聪明，可以知道引用 live 的侦听器类也`JComponent`必须保持活跃才能正常工作，即使由于某种奇怪的原因它没有名称？

所以，两个真正的问题：

*   为什么 GC 不销毁对象？
*   这确实是一个糟糕的设计选择，还是有某种我不知道从实例化查看器的类访问控制器的方式？

我想为这个开源库做出贡献，我的第一个更改想法是更改`JMapViewer`类以具有引用其控制器的字段，并更改构造函数以将当前匿名控制器分配给这个新字​​段。但是，我想确保我不会无知地遗漏一些东西。我已经在整个代码库中搜索了 text `DefaultMapController`，它只出现在它自己的类定义中，以及`JMapViewer`构造函数中的匿名实例中。

* * *

编辑：

确实似乎有一种方法可以通过使用`java.awt.Component`method来访问匿名侦听器`getMouseListeners()`。所以从技术上讲，在我的应用程序中，我可以在这个集合中搜索 的实例`DefaultMapController`，并使用它来访问我需要用来更改控制器选项的方法。

不过，为了扮演魔鬼的拥护者，如果我按照最初的想法为地图提供其控制器的引用，现在我有一种循环引用（地图知道控制器，控制器知道地图）。这是一个坏主意吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-24T02:29:27.263

抽象父级，`JMapController`持有`JMapViewer`对构造函数传递到那里的引用`DefaultMapController`：

```
public DefaultMapController(JMapViewer map) {
    super(map);
} 
```

附录：`map`控制器持有的引用用于（有选择地）将最多三个控制器引用添加到地图的[`EventListenerList`](http://java.sun.com/javase/7/docs/api/javax/swing/event/EventListenerList.html)，在[此处](https://stackoverflow.com/q/2159803/230513)讨论。其中任何一项都会排除 GC。至少一个有益的设计好处是具体`JMapController`需要只实现可用的接口。

正如这个[MVC 大纲](https://stackoverflow.com/a/2687871/230513)中所建议的，给视图提供对控制器的引用是不寻常的。相比之下，让控制器注册为视图的侦听器并没有错，正如[这里](https://stackoverflow.com/a/3072979/230513)所建议的那样。

请注意，只有无参数`JMapViewer`构造函数会安装`DefaultMapController`. 您可以使用备用构造函数，如`Demo.java`. [此处](https://stackoverflow.com/a/39461854/230513)检查了一个完整的示例。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-24T02:08:07.263

1）您所知道的一切是，如果VM认为合适，它将收集部分或全部死对象。GC 不需要做任何事情。

2）最好的办法是向图书馆的维护者询问。无论如何，作为一般规则，我不会费心去改变任何东西，除非有充分的理由，例如，如果它*明智地*提高了可读性，并且宁愿让自己专注于真正的问题。

3) 不确定是否是这种情况，但是，当您序列化 JComponent 时，您还序列化了它的所有字段。而且您不想序列化很多未使用的东西。

# c# - Microsoft.Office.Interop.Excel.ApplicationClass 没有定义构造函数

> ID：14016264
> 
> 赞同：22
> 
> 时间：2012-12-24T01:59:02.153
> 
> 标签：c#, excel, interop, excel-interop

我尝试按照[如何在 C#](http://csharp.net-informations.com/excel/csharp-open-excel.htm)教程中打开 Excel 文件，即在`Com`选项卡上添加了一个引用`Microsoft Office 14.0 Object Library`并尝试编译代码：

```
using Excel = Microsoft.Office.Interop.Excel;
//...
Excel.Application xlApp;
Excel.Workbook xlWorkBook;
Excel.Worksheet xlWorkSheet;

xlApp = new Excel.ApplicationClass();//error here
//... 
```

并面临编译时错误，说

> 没有为 Microsoft.Office.Interop.Excel.ApplicationClass 类型定义构造函数。

我错过了什么？

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2012-12-24T02:02:28.830

尝试这个：

```
Excel._Application xlApp = new Excel.Application(); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-08-29T05:24:20.740

如果您使用的是 C# 4.0 (.NET 4)，则可以使用更简单的语法

```
var app = new Application( );

var workbook = app.Workbooks.Open("test.xls"); 
```

关于**var**：它使您的工作更轻松，因为 C# 决定选择和使用哪种类型。如果有兴趣，您可以阅读有关**dynamic**和**var** *样式*的信息。

请记住，C# 4.0 之前的互操作是完全不同的现象，以及 C# 用于处理 Microsoft 对象的方式。

只是为了让您知道有多么不同，这就是您应该在 C# 4.0 之前对其进行编码以与**Word**文档对话的方式。

```
object fileName = @"WordFile.docx";
object missing = System.Reflection.Missing.Value;
object readOnly = true;
var doc = wordApp.Documents.Open(ref fileName, ref missing, ref readOnly,
ref missing, ref missing, ref missing, ref missing, ref missing,
ref missing, ref missing, ref missing); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-24T02:02:57.453

使用以下命令打开它：

```
xlApp = CreateObject("Excel.Application"); 
```

CreateObject 创建并返回对 COM 对象的引用。文档可以在这里找到：

[http://msdn.microsoft.com/en-us/library/7t9k08y5%28v=vs.71%29.aspx](http://msdn.microsoft.com/en-us/library/7t9k08y5%28v=vs.71%29.aspx)

# android - 在 sqlite 中使用变量

> ID：14016266
> 
> 赞同：-2
> 
> 时间：2012-12-24T01:59:26.410
> 
> 标签：android, iphone, sqlite, mobile

我正在制作一个测验应用程序，我必须根据用户的选择来选择问题的数量。实际上我想要这样的东西

```
 db.execute('select * from Quiz limit **Variable**')//Here i want to use variable instead of constant value. 
```

你能帮我吗

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-24T02:04:54.643

为什么不使用这样的东西：

```
 int num = 10;
 db.execSQL("select * from Quiz limit "  + num) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-24T02:05:05.913

将您的代码更改为：

```
public void selectall(String variable){

Cursor c=db.rawQuery("SELECT from Quiz limit "+variable);

} 
```

其中变量根据用户选择设置

**注意：** `db.execute`不是Android 中的[SQLiteDatabase](http://developer.android.com/reference/android/database/sqlite/SQLiteDatabase.html)类方法，您需要使用[execSQL](http://developer.android.com/reference/android/database/sqlite/SQLiteDatabase.html#execSQL%28java.lang.String%29)或[查询](http://developer.android.com/reference/android/database/sqlite/SQLiteDatabase.html#query%28java.lang.String,%20java.lang.String%5B%5D,%20java.lang.String,%20java.lang.String%5B%5D,%20java.lang.String,%20java.lang.String,%20java.lang.String,%20java.lang.String%29)方法来查询数据库表

并查看本教程以在 android 中对数据库执行所有选择、删除、更新和插入操作：

[http://www.androidhive.info/2011/11/android-sqlite-database-tutorial/](http://www.androidhive.info/2011/11/android-sqlite-database-tutorial/)

# openssl - 使用 openSSL 验证身份验证

> ID：14016270
> 
> 赞同：1
> 
> 时间：2012-12-24T02:00:26.457
> 
> 标签：openssl, authenticity

鲍勃创建了一个私钥

```
openssl genrsa -out Private.pem 1024 
```

然后用

```
openssl rsa -in Private.pem -out Public.pem -outform PEM -pubout 
```

他创建了一个名为 data.txt 的文件，其中包含“hello”纯文本并运行命令

```
openssl dgst -sha1 -sign Private.pem data.txt| openssl enc -base64 -A > signature.txt 
```

现在他把文件发给了爱丽丝`data.txt`。和`signature.txt`文件`Public.pem`。

爱丽丝如何验证真伪？

提前谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-27T08:37:30.460

首先，您需要解码您的 base64 编码签名，然后验证签名：

```
openssl enc -d -A -base64 -in signature.txt -out signature.sha1
openssl dgst -sha1 -verify Public.pem -signature signature.sha1 data.txt 
```

# asp.net-mvc - Kendo Grid 和 ASP.NET MVC4 包装器和条件 .ToClientTemplate()

> ID：14016271
> 
> 赞同：1
> 
> 时间：2012-12-24T02:00:38.793
> 
> 标签：asp.net-mvc, razor, asp.net-mvc-4, kendo-ui

我想将我的网格放在部分中，并为每个传递数据的网格视图提供一个强类型模型，并指定是否应将网格呈现给客户端模板。

例如：

```
--MODEL
    class ProductGridModel
    {
      public List<Products> Products{get;set;}
      public bool LoadAsChildGrid{get;set;}
      public string ParentGrid {get;set;}
    }
--VIEW
    @(Html.Kendo().Grid<Models.ProductGridModel>()
    {
        .Ajax()
        .Read(read => read.Action("GetProducts", "Products", new 
            { orderID=(@Model.LoadAsChildGrid)?"#=OrderID":@Model.OrderID }))
    ...
        .ToClientTemplate(@Model.LoadAsChildGrid)//!!!<-- This can't be done
        .Events(e => e.DataBound((@Model.LoadAsChildGrid)?"BaseGridOnDataBound('grdProducts_#=OrderID#')":""))
    }
--CONTROLLER
    public ActionResult GetProducts(int orderID, [DataSourceRequest] DataSourceRequest request)
    {          
        try
        {
            base.RequireAuthorization(xxxx.StockAdmin, orderID);
            List<Products> products= new ProductManagement().GetProductsByOrderID(orderID);
            return Json(products.ToDataSourceResult(request), JsonRequestBehavior.AllowGet);
        }
        catch (Exception e)
        {
            ModelState.AddModelError("", e.ToString());
            throw e;
        }
    } 
```

有没有办法选择性地呈现 ToClientTemplate ？？？。如果没有解决方法，那么我唯一的选择是实现自定义 HTmlHelper KendoGridBuilder：

```
public virtual GridBuilder<T> Grid<T>() where T : class; 
```

，我现在不想这样做。如果我必须扩展和实现一个网格，我一直在寻找关于如何完成它的分步指南。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-24T08:25:05.157

尝试这个：

```
@{
 var grid = (Html.Kendo().Grid<Models.ProductGridModel>()
          ...
       );
}

@if(@Model.LoadAsChildGrid) {
  @grid.ToClientTemplate()
} else {
  @grid
} 
```

# ruby-on-rails - Heroku config：推送不更新环境变量

> ID：14016273
> 
> 赞同：5
> 
> 时间：2012-12-24T02:01:02.667
> 
> 标签：ruby-on-rails, heroku, environment-variables, heroku-toolbelt

我已经将一个应用程序部署到 Heroku，并且我目前将我的环境变量存储在一个 .env 文件中。我曾经`heroku config:push`将变量推到heroku，效果很好。

现在，我想更新其中之一。我在 .env 文件中更改了它，然后`heroku config:push`再次运行。push 说它成功了，但是当我运行时`heroku config`，我可以看到这些值实际上并没有改变。我试过运行`heroku restart`，但这并没有做任何事情。

如何在heroku中更新我的环境变量？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-12-24T02:13:07.687

弄清楚了。您需要运行`heroku config:push --overwrite`，因为默认情况下它不会覆盖现有变量。这没有很好的记录：-/

# redirect - 无法获得 301 重定向以在 .htacess 中工作

> ID：14016274
> 
> 赞同：0
> 
> 时间：2012-12-24T02:01:04.787
> 
> 标签：redirect

我一直在查看与 .htacess 301 重定向相关的各种线程，但我根本找不到解决问题的方法。我已将此添加到 .htaccess 中，该文件以前是一个空文件...

重定向 301 [http://www.architekogp.com/index.html](http://www.architekogp.com/index.html) http://www.owenprescott.com/index.php

.htaccess 位于 architekogp.com 根文件夹 (public_html/.htaccess)。我不确定 .html 到 .php 是否会导致问题？提前感谢您的任何建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T02:06:30.330

等等，.htaccess 中的所有代码都是：
redirect 301 [http://www.architekogp.com/index.html](http://www.architekogp.com/index.html) http://www.owenprescott.com/index.php

正确的？

# javascript - 识别并提取网页中呈现的 DOM

> ID：14016276
> 
> 赞同：0
> 
> 时间：2012-12-24T02:01:24.273
> 
> 标签：javascript, .net, browser, firefox-addon, html-rendering

我有兴趣提取在工作流程期间呈现在网页中的文本/字符串文字。我想将呈现的字符串与隐藏的字符串隔离开来。

我的目的是找到被渲染的字符串并将它们映射到我的应用程序中的每个工作流。（我有一种方法可以唯一地标识每个字符串，这样就解决了。不用担心。）

有没有一种方法可以让我更好地使用 .net 或在 JScript 或浏览器插件中或在浏览器中使用一些跟踪选项来实现它？

任何帮助表示感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-24T02:14:56.800

你是如何拉取内容的？仅获取可见内容的一种方法是使用 Jquery 的可见选择器。只需将 :visible 添加到您的 jQuery 选择器 (http://api.jquery.com/visible-selector/)。例如，在此页面上，您可以使用 $('.post-text:visible') 仅在问题文本可见时才找到它。

# mysql - 在 MySQL 中提交后有什么方法可以回滚吗？

> ID：14016278
> 
> 赞同：24
> 
> 时间：2012-12-24T02:01:33.477
> 
> 标签：mysql, sql-update, rollback, autocommit

我犯了一个大错误，我在 MySQL 中更新了一个没有“where”子句的表:'(

它是自动提交的。

有没有办法从它回滚？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-12-24T03:01:54.820

不，没有任何查询可以“撤消”已提交的数据修改查询。

如果您有数据库的备份，则可以恢复备份并使用 DBA 工具（在 MySQL 的情况下，它是[mysqlbinlog](https://dev.mysql.com/doc/refman/5.5/en/mysqlbinlog.html)）从备份回数据库后的日志中“重播”所有数据修改查询，但跳过问题查询。

如果您没有备份以及自该备份以来的所有日志，则您无法恢复数据。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-24T02:05:59.003

查找事务日志。我会更新更多信息，但日志可能只会在有限的时间内保留，所以时间至关重要！

请参阅：[http ://dev.mysql.com/doc/refman/5.0/en/point-in-time-recovery.html](http://dev.mysql.com/doc/refman/5.0/en/point-in-time-recovery.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-12-04T06:15:06.480

如果您启用了 mysql binlog 并且它是基于 ROW 的格式，那么您可以获取更新前后每一行的值。使用它可以恢复表的状态。

# objective-c - For 循环不起作用

> ID：14016280
> 
> 赞同：0
> 
> 时间：2012-12-24T02:01:43.510
> 
> 标签：objective-c, for-loop, uialertview

我正在尝试为学校制作一个猜测应用程序。

```
-(IBAction)check:(id)sender
{
    if (answerField.text.length > 0)
    {
        [self number];
    }
    else
    {
        UIAlertView *error = [[UIAlertView alloc]
                              initWithTitle:@"Error"
                              message:@"Please type in more than one chracter"
                              delegate:self
                              cancelButtonTitle:@"Okay!"
                              otherButtonTitles:nil];

        [error show];
    }
}
-(void)number
{

    for (int i = 0; i < 100; i++)
    {
        if (answerField.text > strNumber)
        {

            hlLabel.text = @"Guess Lower";
            answerField.text = @"";
        }
        if (answerField.text < strNumber)
        {

            hlLabel.text = @"Guess Higher";
            answerField.text = @"";
        }
    }

} 
```

**问题：** for 循环不起作用。它只检查一次。此外，每次检查时，它总是说“猜高”，而事实上，我猜高于计算机生成的数字。

**其他信息：**我有一种方法，每次我从文本字段中单击键盘时，它都会检查数字方法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-24T02:24:06.760

`answerField.text`正在返回一个`NSString`，而不是一个数字。

试试`answerField.text.intValue`。

并且`strNumber`必须是一个整数才能工作，顺便说一句。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-24T05:07:48.943

我花了一些时间来理解你想要做什么。但我怀疑你只是想让用户在一个字段中输入一些数字来猜测一个数字，最多 100 次尝试。类似的东西。

但是 for 循环并不是让*用户*重试某事的方式。您需要的是保存在对象（即 ivar）中的一些状态，它计算每次尝试。

这里的第二个问题是，您似乎在数字比较字符串，这在这里没有意义。你想比较*数值*。

所以你的程序可能看起来像：

```
-(IBAction)check:(id)sender
{
    if (answerField.text.length > 0)
    {
        [self checkFieldValueAgainstCorrectAnswer]; // use better naming
    }
    else
    {
        UIAlertView *error = [[UIAlertView alloc]
                              initWithTitle:@"Error"
                              message:@"Please type in more than one chracter"
                              delegate:self
                              cancelButtonTitle:@"Okay!"
                              otherButtonTitles:nil];

        [error show];
    }
}

-(void)checkFieldValueAgainstCorrectAnswer
{
    NSUInteger fieldValue = [answerField.text unsignedIntegerValue];
    NSUInteger correctValue = [strNumber unsignedIntegerValue];
    if (fieldValue > correctValue) {
        // guess lower
    } else if(fieldValue < correctValue) {
        // guess higher
    } else {
        // you won!
        return;
    }
    answerField.text = @"";
    attempts++;
    if (attempts > 100) {
        // Too many attemps, you lost!
    }
 } 
```

# centos - 如何在不知道版本号的情况下以编程方式安装最新的 epel-release rpm？

> ID：14016286
> 
> 赞同：11
> 
> 时间：2012-12-24T02:02:51.373
> 
> 标签：centos, rpm, yum

我在这里的第一篇文章，但我用谷歌搜索并找不到一个简单的方法来做到这一点。

我有一个程序可以在新的 CentOS Linux 服务器上线时自动配置它们。作为该过程的一部分，它会安装最新版本的 epel-release rpm。

我使用的命令如下所示：

```
$ rpm -Uvh http://dl.fedoraproject.org/pub/epel/6/x86_64/epel-release-6-7.noarch.rpm && \
     yum clean all 
```

这很好用……直到他们将 rpm 文件更改为 epel-release-6-8.noarch，然后是 epel-release-6-9.noarch，等等。他们似乎每 3-4 个月更新一次版本。这是一个问题，因为如果存储库更新了 epel-release 版本号，我的脚本将失败，因为它不知道该版本应该是什么。

我找不到可能重定向到最新 epel rpm 文件的链接，所以我别无选择，只能将版本硬编码到我的安装脚本中，并在它们失败时更改它。

有人知道在不知道版本号的情况下下载最新 epel rpm 的简单（非硬编码）方法吗？我希望有一种不涉及在 repo 文件列表上卷曲和 grep'ing url 的方法，但好奇有人会建议什么？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-01-04T10:26:01.310

以下脚本可以解决问题：

```
cat <<EOM >/etc/yum.repos.d/epel-bootstrap.repo
[epel]
name=Bootstrap EPEL
mirrorlist=http://mirrors.fedoraproject.org/mirrorlist?repo=epel-\$releasever&arch=\$basearch
failovermethod=priority
enabled=0
gpgcheck=0
EOM

yum --enablerepo=epel -y install epel-release
rm -f /etc/yum.repos.d/epel-bootstrap.repo 
```

它应该适用于 RHEL/CentOS 5 和 6。我没有测试版本 4。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-03-26T16:06:12.417

[EPEL 项目](https://fedoraproject.org/wiki/EPEL)最近为 epel-release 包实现了“最新的”符号链接。

[https://dl.fedoraproject.org/pub/epel/epel-release-latest-5.noarch.rpm](https://dl.fedoraproject.org/pub/epel/epel-release-latest-5.noarch.rpm)
​<a href="https://dl.fedoraproject.org/pub/epel/epel-release-latest -6.noarch.rpm" rel="nofollow">https://dl.fedoraproject.org/pub/epel/epel-release-latest-6.noarch.rpm
[https://dl.fedoraproject.org/pub/ epel/epel-release-latest-7.noarch.rpm](https://dl.fedoraproject.org/pub/epel/epel-release-latest-7.noarch.rpm)

见[https://fedorahosted.org/epel/ticket/8#comment:12](https://fedorahosted.org/epel/ticket/8#comment:12)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-02-14T18:26:28.680

直接从 shell 执行：

```
$ EPEL_BASEURL=http://dl.fedoraproject.org/pub/epel/$(awk '/rhel/ {print $2}' /etc/rpm/macros.dist)/$(uname -p)/
$ rpm -ivh $EPEL_BASEURL$(curl -s $EPEL_BASEURL | grep epel-release | awk -F'<|>' '{print $5}')
Retrieving http://dl.fedoraproject.org/pub/epel/6/x86_64/epel-release-6-8.noarch.rpm
warning: /var/tmp/rpm-tmp.zRXE1U: Header V3 RSA/SHA256 Signature, key ID 0608b895: NOKEY
Preparing...                ########################################### [100%]
   1:epel-release           ########################################### [100%] 
```

我已经在 CentOS 6.4、6.5 和 6.6 以及 RHEL 6.5 和 6.6 上对此进行了测试，但是 /etc/rpm/macros.dist 的内容和来自[http://dl.fedoraproject.org](http://dl.fedoraproject.org)的 HTML 代码应该在所有平台上保持一致，所以这应该适用于所有平台。

为了后代的缘故，这里有更多细节：

```
$ EPEL_BASEURL=http://dl.fedoraproject.org/pub/epel/$(awk '/rhel/ {print $2}' /etc/rpm/macros.dist)/$(uname -p)/
# http://dl.fedoraproject.org/pub/epel/6/x86_64/
$ EPEL_RELEASE_RPM=$(curl -s $EPEL_BASEURL | grep epel-release | awk -F'<|>' '{print $5}')
# epel-release-6-8.noarch.rpm
$ EPEL_RELEASE_RPMURL=$EPEL_BASEURL$EPEL_RELEASE_RPM
# http://dl.fedoraproject.org/pub/epel/6/x86_64/epel-release-6-8.noarch.rpm
$ rpm -ivh $EPEL_RELEASE_RPMURL
Retrieving http://dl.fedoraproject.org/pub/epel/6/x86_64/epel-release-6-8.noarch.rpm
warning: /var/tmp/rpm-tmp.ep6xy3: Header V3 RSA/SHA256 Signature, key ID 0608b895: NOKEY
Preparing...                ########################################### [100%]
   1:epel-release           ########################################### [100%] 
```

# python - 正则表达式如何在python中反向搜索

> ID：14016289
> 
> 赞同：0
> 
> 时间：2012-12-24T02:03:00.420
> 
> 标签：python, regex

例如。字符串如下
`"cd 1.2 ab 2.3 cd"`。
如果我使用 pattern `"[0-9]*\.[0-9]*"`，并`re.search`找到子字符串。它会返回`1.2`。我想回来`2.3`。
我怎样才能让 python 搜索相反的方向。我不喜欢使用`findall`函数来获取所有子字符串。然后使用最后一个

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-24T02:05:03.417

这将在这种情况下工作：`\d+\.\d+(?=\D*$)`

当整个字符串中没有其他人跟随它时，它将抓取最后一个数字。

演示+说明：[http ://regex101.com/r/hE0lE4](http://regex101.com/r/hE0lE4)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-24T02:13:49.637

使用`re.finditer()`：

```
In [150]: strs="cd 1.2 ab 2.3 cd"

In [151]: for x in re.finditer(r"\d+\.\d+",strs):pass

In [152]: x.group()
Out[152]: '2.3' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-24T02:43:14.713

如果您想要最后一个（或您愿意匹配模式的最后一个），只需使用最贪婪的`.*`匹配到最后一个感兴趣的模式匹配：

```
>>> import re
>>> st="cd 1.2 dv 1.4 ab 2.3 cd"
>>> re.match(r'.*(\d\.\d)',st).group(1)
'2.3' 
```

但是`re.findall`更灵活和直接，可能是最快的：

```
>>> re.findall(r'(\d\.\d)',st)
['1.2', '1.4', '2.3']
>>> re.findall(r'(\d\.\d)',st)[-1]
'2.3'
>>> re.findall(r'(\d\.\d)',st)[-2]
'1.4' 
```

当然，您可以反转字符串，将 FIRST 匹配与反转的正则表达式匹配（如果它不是对称的），然后将结果反转回来：

```
>>> re.search(r'(\d\.\d)',st[::-1]).group(1)[::-1]
'2.3' 
```

[这是在 Perl 中定期完成的](http://www.perl.com/pub/2001/05/01/expressions.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-24T17:50:19.510

```
 1\. re.search('[0-9]*\.[0-9]*',a[::-1]).group()

   2\. re.search(r'(\d\.\d)(\s\w+$)',a).group(1) 
```

# appharbor - AppHarbor 管理域是否有 API？

> ID：14016297
> 
> 赞同：0
> 
> 时间：2012-12-24T02:05:36.920
> 
> 标签：appharbor

例如，如果我的应用程序需要通过 API 调用向我的应用程序添加新域名，我将如何实现呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-24T06:28:31.943

AppHarbor 有一个 API，可让您完成大多数管理功能，包括创建主机名。文档在这里：

*   [概述](http://support.appharbor.com/kb/api/api-overview)
*   [创建主机名](http://support.appharbor.com/kb/api/hostnames-api#create)

# ios - UIActivityViewController 内存泄漏

> ID：14016311
> 
> 赞同：1
> 
> 时间：2012-12-24T02:09:01.850
> 
> 标签：ios, memory-leaks, xcode-instruments, uiactivityviewcontroller

我正在使用以下代码（使用 ARC）呈现 UIActivityViewController：

```
- (IBAction)share:(id)sender {
UIActivityViewController *activityController = [[UIActivityViewController alloc]
                                                initWithActivityItems:[NSArray arrayWithObjects:@"Cat",@"Dog" , nil]
                                                applicationActivities:nil];

[self presentViewController:activityController  animated:YES completion:nil];} 
```

使用仪器“泄漏”在 iphone 模拟器上运行程序。呈现视图并单击取消后：在以下行出现泄漏（100%）：

```
 [self presentViewController:activityController  animated:YES completion:nil]; 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T08:11:17.733

由`alloc`自动平衡`ARC`。但是将 移交`activityController`给 self 会增加引用计数，并将对象放入`autorelease pool`中（如果存在）。因此，如果您的代码在没有 的线程中运行，则`autorelease pool`此对象将泄漏。

# php - 按日期高效扫描目录树

> ID：14016312
> 
> 赞同：3
> 
> 时间：2012-12-24T02:09:16.653
> 
> 标签：php, filter, scandir

在php中给定日期之后获取新文件列表的最有效方法是什么，或者可能使用系统调用？

我可以完全控制收到文件时文件的存储方式，所以我认为最好将它们存储在像年/月/日/文件名这样的文件夹结构中，然后我所要做的就是扫描大于或等于我想使用 scandir 检索并将目录名称转换为 int 值的日期。但我不确定我是否遗漏了一些能让这更容易/更快的东西。我对执行此操作的最有效方式感兴趣，因为随着时间的推移会有很多文件堆积，我不想重新扫描旧目录。基本上，目录结构应该很适合有效的手动过滤，但我想检查一下我是否遗漏了一些东西。

简单示例用法：

```
'2012/12/1' contains files test1.txt, test2.txt
'2012/12/2' => test3.txt, test4.txt
'2011/11/1' => test5.txt
'2011/11/2' => test6.txt 
```

如果我在 2011 年 11 月 2 日或之后搜索文件，那么我希望返回除 test5.txt 之外的所有文件。

提前感谢您的任何见解！

编辑：文件的存储和实际处理是两个独立的过程，所以我不能只处理它们，这显然是最好的解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T05:06:30.893

一般来说，我创建目录喜欢`YYYY/MM/DD`存储我的文件，通常为不同的源设置另一个级别。有时我会使用`YYYY-MM/DD`或类似的东西。请注意，十年中只有 3652 天，因此您甚至可以拥有一个类似的级别`YYYY-MM-DD`，而不会获得太大而难以处理的目录。如果你有一个索引目录的文件系统，你可以很容易地在一个目录中拥有成千上万个文件，否则一千个应该是你的上限。

要处理这些文件，我不会费心对目录名称进行任何实际搜索。因为我知道我感兴趣的日期，所以我可以简单地生成路径并仅扫描包含正确日期范围内的文件的目录。

例如，假设我想处理过去一周的所有文件：

```
for $date = today() - 7 to today():
    $path = strftime("%Y/%m/%d", $date)
    for $filename in getFiles($path):
        processFile($path, $filename) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-24T02:24:57.843

根据您编写路径的方式，您似乎在 linux 或 mac 上。

find 命令可以返回在特定日期内修改（或访问）的文件列表。

```
// find files that were modified less than 30m ago
$filelist = system("find /path/to/files -type f -mmin -30"); 
```

我认为应该谨慎使用系统调用，因为它们会降低可移植性。

正如您提到的那样存储在目录中是有道理的，因为它会减少搜索空间。

# windows-xp - USB“大容量存储模式”下智能手机中的 MicroSD 在 XP 上的随机写入工作负载下断开连接

> ID：14016313
> 
> 赞同：1
> 
> 时间：2012-12-24T02:09:20.057
> 
> 标签：windows-xp, usb

我的智能手机（摩托罗拉 Atrix 4G）中有一个 32GB 的 MicroSD。手机连接到我的 Windows XP (SP3) 笔记本电脑，micro sd 以“大容量存储模式”访问，即它被分配了一个驱动器号，可以从笔记本电脑访问。MicroSD 使用 FAT32 格式化。MicroSD 包含一个虚拟硬盘 (vmdk)，包含 12 个扩展区（大小为 2GB）。我的代码将本地硬盘上的重做文件与 microsd 上的 vmdk 扩展区合并。代码循环重做文件中的所有“grain table”条目，如果grain table 条目不为零，它会读取引用的“grain”或连续的grain组（vmware术语中的grain是重做文件中的64k块）从重做文件中，寻找 vmdk 中的相应位置并将颗粒写入该位置。

问题是在这个“提交”操作的中间，MicroSD 断开连接（并不总是在同一时间点）。我收到“无磁盘”错误消息。事件日志记录一个 ID 为 51 的警告 - “在分页操作期间在设备 \Device\Harddisk2\D 上检测到错误”。在此错误之后，microsd 上的文件不再从 Windows 系统“可见”。重新连接设备后，所有文件再次从笔记本电脑可见。

到目前为止，我已经尝试了以下方法：

1.  尝试了不同的电缆，其中一根短至 13'' -> 没有效果

2.  通过读卡器将 microsd 卡（三星，10 级 32GB）连接到主机系统 -> 问题没有出现

3.  尝试了不同的 microsd（Lexar，10 级 32GB）-> 相同的问题

4.  使用直接连接的读卡器尝试了 Lexar microsd -> 没有出现问题

5.  尝试了不同的手机（三星 Galaxy S2、摩托罗拉 Razr M）-> 相同的问题

6.  在运行 Windows 7 的多个系统上运行代码，包括显示 XP 行为的同一系统 -> 未出现问题 (!!!!)

7.  我有一个相同的第二个 XP 系统 -> 相同的问题

8.  在将“grain”写入磁盘后，我立即降低了插入 Sleep(500) 的写入操作 -> 问题没有出现

不幸的是，8 不是一个很好的解决方法，因为它减慢了提交操作。

有什么想法吗？

先感谢您

# spring - Spring 3 中使用 maven 的 jdbc 属性

> ID：14016316
> 
> 赞同：0
> 
> 时间：2012-12-24T02:10:09.860
> 
> 标签：spring, maven

我正在春季 3 开发一个 Maven 多模块项目。我有两个项目。我在项目 A 中有一个名为 jdbc.properties 的属性文件（它包含数据库用户名、密码），但项目 B 没有 jdbc.properties 。我已将项目 a 作为依赖项包含在项目 b 中，以在项目 b 中获取项目 a 的一些通用代码。我的问题是如何使用 maven 在 Project b spring-context.xml 文件中使用 Project A jdbc.properties 的属性

应用程序上下文.xml (SNIPPET)

```
<property name="jdbcUrl" value="${jdbc.url}"/>
 <property name="user" value="${jdbc.username}"/>
 <property name="password" value="${jdbc.password}"/> 
```

这是我的项目的结构

```
**Projects**
 - Project A
src/main/java
  +src/main/resource
    -Database.properties
    Database file has following properties 
    jdbc.driverClassName=org.h2.Driver
    jdbc.url=jdbc:h2:tcp://localhost/~/tododb
    jdbc.username=sa
    jdbc.password=
    jpa.database=H2
    jpa.showSql=true
    pom.xml

 - Project b
  +src/main/java
  src/main/resource (don't want to have jdbc.properties file in this project)
  pom.xml (I have added Project as dependencies in Project B because 
  i am using some  common classes of project a in project b) 
```

这是两个项目的 POM 文件 两个项目的 **POM 配置**

```
 - Project A (pom.xml)
  <parent>
    <groupId>com.ambientideas</groupId>
    <artifactId>sample08-multimodulejava-parent</artifactId>
    <version>0.0.1-SNAPSHOT</version>
  </parent>
  <groupId>com.ambientideas1</groupId>
  <artifactId>sample-multimodulejava-module1</artifactId>
  <name>sample application 1</name>
  <packaging>jar</packaging> 
  <dependencies>
    <dependency>
      <groupId>junit</groupId>
      <artifactId>junit</artifactId>
      <version>4.1</version>
      <scope>test</scope>
    </dependency>
  </dependencies>
</project>

 - Project B (Pom.xml)
  <parent>
    <groupId>com.ambientideas</groupId>
    <artifactId>sample08-multimodulejava-parent</artifactId>
    <version>0.0.1-SNAPSHOT</version>
  </parent>
  <artifactId>sample-multimodulejava-module2</artifactId>
    <packaging>jar</packaging> 
<dependencies> (using Project a common classes in project b)
        <dependency>
            <groupId>com.ambientideas1</groupId>
            <artifactId>sample-multimodulejava-module1</artifactId>
            <version>${version}</version>
        </dependency>
</dependencies> 
</project> 
```

这是我项目的 Spring 配置的两个 jdbc-context.jdbc 文件。 **现在春天配置**

```
In Both Projects (Project a, Project b), i have two jdbc.content.xml files( Spring xml's)

<bean id="dataSource" class="com.mchange.v2.c3p0.ComboPooledDataSource" destroy-method="close">
<context:property-placeholder location="/META-INF/classes/jdbc.properties" /> 
    <property name="driverClass" value="${jdbc.driverClassName}"/>
        <property name="jdbcUrl" value="${jdbc.url}"/>
        <property name="user" value="${jdbc.username}"/>
        <property name="password" value="${jdbc.password}"/>
        </bean> 
```

问题：我不想在项目 A 和项目 b 中有两个 database.proprties 文件。我想要的是我只想在项目A中只有一个jdbc.properties文件，然后想在项目B中使用项目A的JDBC.propties文件的属性。

```
 <property name="driverClass" value="${jdbc.driverClassName}"/>
        <property name="jdbcUrl" value="${jdbc.url}"/>
        <property name="user" value="${jdbc.username}"/>
        <property name="password" value="${jdbc.password}"/>
        </bean> 
```

有什么办法吗？这是项目 B pom.xml 的限制

```
 <project>
    <parent>
    <groupId>com.ambientideas</groupId>
    <artifactId>sample08-multimodulejava-parent</artifactId>
    <version>0.0.1-SNAPSHOT</version>
    </parent>
    <artifactId>sample-multimodulejava-module2</artifactId>
    <packaging>jar</packaging> 
    <dependencies>
    <dependency>
    <groupId>com.ambientideas1</groupId>
    <artifactId>sample-multimodulejava-module1</artifactId>
    <version>${version}</version>
    <description>Project B<description>
</dependency>
    </dependencies> 
    </project> 
```

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-24T03:50:13.067

如果您的属性文件内置到项目 A 的 jar 中，那么它也可以在类路径中用于加载任何其他代码，因此您应该能够以与使用相同的方式从项目 B 中使用它它来自项目 A。

请注意，这只是一个方便的意外，绝对*不是*我建议您设置项目的方式。配置应始终外部化，以便您的工件独立于任何环境。

PS 环境创意？那不是马修·麦卡洛的公司吗？如果是这样，那么您在一般 Java 尤其是 Maven 方面拥有大量内部专业知识。你不应该需要很多外部指导。

# c++ - fstream 二进制读/写行为

> ID：14016317
> 
> 赞同：0
> 
> 时间：2012-12-24T02:10:12.467
> 
> 标签：c++, fstream, binary-data

我在写入/读取二进制值时遇到了一个“奇怪”的问题：

```
bool readHeader(std::fstream &file)
{
    file.seekg(0);
    int a = file.tellg();
    file.get(reinterpret_cast<char*>(&a), sizeof(a));
    int b = file.tellg();
    file.get(reinterpret_cast<char*>(&b), sizeof(b));
    int c = file.tellg();
    file.seekg(32);
    return !(file.bad());
}

bool writeHeader(std::fstream &file)
{
    file.seekg(0);
    int a = file.tellg();
    file.write(reinterpret_cast<char*>(&a), sizeof(a));
    int b = file.tellg();
    file.write(reinterpret_cast<char*>(&b), sizeof(b));
    int c = file.tellg();
    file.seekg(32);
    return !(file.bad());
} 
```

其中“a”是 uint32_t，“b”是 uint64_t。

这里有什么奇怪的 - 变量 a、b 和 c 具有以下值：

在 readHeader: 0, 3, 10

在 writeHeader: 0, 4, 12

而这个原因，我将不得不做出：

```
file.seekg(1, std::ios_base::cur); 
```

每次get操作后。这是正确的吗？我做错了什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T09:10:06.413

使用[read()](http://linux.die.net/man/2/read)。

get() 将最多 n-1 个字符或 EOF 或错误（以第一个）的 \n 提取到 C 样式字符串中

read 将最多 n 个字符或 EOF（以第一个字符为准）提取到任何内存位置。

# android - 安卓同步

> ID：14016319
> 
> 赞同：0
> 
> 时间：2012-12-24T02:10:18.900
> 
> 标签：android

我有两个进程“Loaddata(); Workoffline();”，现在我想要进程 Loaddata(); 运行直到完成，应用程序可以切换到下一个进程 Workoffline(); 。但我不知道该怎么办，期待人们帮助我。

```
public void test(){    
            runOnUiThread(new Runnable() {

                @Override
                public synchronized void run() {

                    loaddata();
                    //your UI interaction code here

                }
            });
            runOnUiThread(new Runnable() {

                @Override
                public void run() {
                    // TODO Auto-generated method stub
                    workoffline();
                }
            });
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-24T02:31:23.380

**-**最好的方法是`CountDownLatch`在`java.util.concurrent`包装中使用。

**-**您可以使用`CountDownLatch's`方法`countDown()`通知完成`loaddata()`，然后使用`await()`方法允许执行`workoffline()`。

**-**另一种方法是使用`join()`

**例如：**

```
Thread t1 = new Thread(new Runnable(){

public void run(){

    handler.post(new Runnable(){   // Declare the Handler handler = new Handler();
                                   // in onCreate()
          public void run(){

              loaddata();
        }

  });
}

});

t1.start();

try{
t1.join();
}catch(InterruptedException ex){

}

Thread t2 = new Thread(new Runnable(){

public void run(){

    handler.post(new Runnable(){

          public void run(){

               workoffline();

        }

  });
}

});

t2.start(); 
```

# d3.js - 修改 d3js 解析可重用图表

> ID：14016320
> 
> 赞同：1
> 
> 时间：2012-12-24T02:10:20.447
> 
> 标签：d3.js, charts, visualization

我是 D3js 的新手，正在使用 parsets 可重用图表 (http://www.jasondavies.com/parallel-sets/)。我想对此图表进行更改，例如在鼠标悬停时根据色带的厚度添加排序，并将两个平行集相互叠加以一次比较不同的数据集（后面的那个被淡化了）。

作为 D3js 的新手，我很难理解从哪里开始。我目前正在尝试理解 d3.parsets.js 的代码，但进展不太顺利。如果有人以前使用过这个并理解代码中遵循的过程，请帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-06-11T21:03:24.083

我见过的对 d3.parsets.js 的最佳改编是 Hongjian Yang 的：[Airline Vis 改编自 d3.parsets](http://hacker-yhj.github.io/projects/vis_course_assignment/)。它可能能够完成您正在寻找的一些东西，尽管我不确定您是否能够轻松覆盖两个数据集（我也不确定我是否理解这样做的必要性）。

# c# - 如何知道编译时错误代码？

> ID：14016325
> 
> 赞同：1
> 
> 时间：2012-12-24T02:11:20.937
> 
> 标签：c#, visual-studio-2010, ide

我认为每个编译时错误都有其独特的代码，我可以用它来搜索它。在VS2010哪里可以找到？

另一种用法是在我不确定如何翻译错误文本时（只要我使用 IDE 的本地化副本），通过这段代码找到它的英文等价物，如果我只是想询问错误在这里。

![在此处输入图像描述](../Images/8a9bc8e6a50f044513dcd2c77157afd9.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-24T02:58:03.607

`Right click > Show Error &Help`可以是一种方式。该 URL 将包含代码，即使您没有 Internet 连接。

我认为它应该是屏幕截图中从上数第三个。

如果您的最终目标是用 Google 搜索英文文档的代码，这会更直接。

* * *

另一种方法是切换到 SharpDevelop，它总是显示错误代码。当然，这需要在 IDE 中进行切换，并浪费您购买 Visual Studio 的钱。
此外，它可能只会附带英语，这没有意义，因为您可能会在 Visual Studio 中切换到英语。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-24T03:08:22.247

还有另一种方法-查看“输出”窗口（查看->输出），如果窗口显示其他内容，则从下拉列表中选择“构建”。

`Output:Build`显示包含错误代码和文件名的编译器的原始输出，这与`Errors`显示相同数据的精美视图的窗口不同。`Output:Build`允许以类似的方式浏览错误（双击当前错误和`F8`/`Shift+F8`下一个/上一个错误），因此可以与`Errors`窗口互换使用（除非您需要显示在错误视图中的非编译错误）。

# sed - 在匹配之前删除行上的回车（使用 sed、tr 或 awk）

> ID：14016328
> 
> 赞同：0
> 
> 时间：2012-12-24T02:11:41.510
> 
> 标签：sed, awk, grep, tr

我正在寻找一种在 sed 匹配*之前*删除行上的回车的方法。例如，我想删除任何“[”实例之前的回车符。

样本输入：

```
MESSAGE: Location
latitude
[-Pi/4,Pi/4]
longitude
[-Pi,Pi]
altitude
[10000,120000] 
```

样本输出：

```
MESSAGE: Location
latitude [-Pi/4,Pi/4]
longitude [-Pi,Pi]
altitude [10000,120000] 
```

任何使用 sed、tr 或 awk 的建议将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T02:41:22.780

快速搜索会得到这篇文章[https://stackoverflow.com/a/1252191/722238](https://stackoverflow.com/a/1252191/722238)的结果。

使用该帖子中的解决方案解决您的问题，这是答案：

`sed ':a;N;$!ba;s/\n\[/ [/g' yourinput.txt`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-24T03:01:14.200

您可以使用 Perl：

```
use warnings;
use strict; 

my $p; 

while (<>) {
  if (/^\[/) {
    chomp $p; 
    print "$p $_";
    undef $p;
  } else {
    print $p if defined $p; 
    $p = $_; 
  }
} 
```

或者从命令行：

```
perl -lane ' if (/\[/) { print "$p $_"; undef $p} else { print $p if defined $p; $p = $_; }' input 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-24T08:45:58.067

这可能对您有用（GNU sed）：

```
sed '$!N;s/\n\[/ [/;P;D' file 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-24T17:11:54.043

使用 awk：

```
awk 'NR == 1 {previous = $0}
     NR > 1 && $0 ~  "^[[]" {previous = previous $0}
     NR > 1 && $0 !~ "^[[]" {print previous; previous = $0}
     END{print previous}' your_file.txt 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-06-04T05:25:32.500

```
#!/usr/bin/awk -f
BEGIN {
  RS = ""
}
{
  gsub(/\n\[/, " [")
}
1 
```

# c# - 如何检查本地文件是否是tfs中的最新版本？

> ID：14016329
> 
> 赞同：5
> 
> 时间：2012-12-24T02:12:00.840
> 
> 标签：c#, tfs, tfs-sdk

我希望能够询问 TfsTeamProjectCollection 并确定服务器上是否有更新版本的文件。我希望能够在不实际获取文件的情况下执行此操作。

这可能在某个地方吗？我已经做了一些刮擦，到目前为止还画了一些空白。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-08-07T14:43:14.727

最简单的方法是[`QueryHistory`](http://msdn.microsoft.com/en-us/library/microsoft.teamfoundation.versioncontrol.client.versioncontrolserver.queryhistory.aspx)在工作区版本和最新版本之间切换；如果它们不同，则服务器上存在更新的最新版本。例如：

```
versionControlServer.QueryHistory(
    serverPath,
    VersionSpec.Latest,
    0,
    RecursionType.Full,
    new WorkspaceVersionSpec(workspace),
    versionFrom,
    null,
    Int32.MaxValue,
    true,
    true); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-02-01T14:02:38.817

这是检查给定文件是否最新的另一种方法。

```
string file_path = @"your_file_path";

WorkspaceInfo info = Workstation.Current.GetLocalWorkspaceInfo(file_path);

Workspace ws = info.GetWorkspace(new TfsTeamProjectCollection(info.ServerUri));

GetStatus status = ws.Get( new GetRequest(
                                          new ItemSpec ( file_path, RecursionType.Full ), 
                                          VersionSpec.Latest ), 
                            GetOptions.Preview );

if(status.NoActionNeeded)
     MessegeBox.Show("Latest");
else
     MessegeBox.Show("Not Latest"); 
```

**脚步**

**1）**我们需要获取`Workspace`包含文件路径的那个。我们用

[`Workstation.GetLocalWorkspaceInfo Method (String)`](https://msdn.microsoft.com/en-us/library/bb139693(v=vs.120).aspx)

获取[`WorkspaceInfo`](https://msdn.microsoft.com/en-us/library/microsoft.teamfoundation.versioncontrol.client.workspaceinfo(v=vs.120).aspx)包含包含指定文件的工作区属性的对象。

我们可以使用这个`WorkspaceInfo`对象来获取该工作区的实例，方法是使用

[`WorkspaceInfo.GetWorkspace Method (TfsTeamProjectCollection)`](https://msdn.microsoft.com/en-us/library/ff732927(v=vs.120).aspx)

**2)**现在我们需要对`Get`工作区对象执行操作。

[`Workspace.Get Method (GetRequest[], GetOptions)`](https://msdn.microsoft.com/en-us/library/bb139314(v=vs.120).aspx)

第二个参数，[`GetOptions`](https://msdn.microsoft.com/en-us/library/microsoft.teamfoundation.versioncontrol.client.getoptions(v=vs.120).aspx)有六个可能的成员值。每个人都有一个目的。

由于您不需要下载文件，

我们将使用成员**`Preview`**值`Executes a get without modifying the disk.`

**3)**`Get`操作返回一个[`GetStatus`](https://msdn.microsoft.com/en-us/library/microsoft.teamfoundation.versioncontrol.client.getstatus(v=vs.120).aspx)表示操作状态的对象`Workspace.Get`。

这包含有关在处理操作时发生了多少操作、冲突、错误等的信息`Get`。

`GetStatus`对象有许多属性。我们使用名为的属性**`NoActionNeeded`**来获取一个标志，该标志指示是否没有发生故障和操作。

如果未发生任何操作或错误，则标志值为**True 。**即，该文件已经是最新版本。否则，该标志将为**False**，这意味着该文件不是 TFS 中可用的最新版本。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-04-02T11:13:30.677

//我们必须指定已经映射到本地工作空间的文件，以便在此处进行比较

```
 var serverPath = workspace.GetServerItemForLocalItem(Vars.sLocalPath);
            var serverVersion = new DiffItemVersionedFile(versionControlServer, serverPath, VersionSpec.Latest);
            var localVersion = new DiffItemLocalFile(Vars.sLocalPath, System.Text.Encoding.UTF8.CodePage, DateTime.Now, false);

            try
            {
                using (var stream = new MemoryStream())
                using (var writer = new StreamWriter(stream))
                {
                    var diffOptions = new DiffOptions
                    {
                        Flags = DiffOptionFlags.EnablePreambleHandling,
                        OutputType = DiffOutputType.Unified,
                        TargetEncoding = System.Text.Encoding.UTF8,
                        SourceEncoding = System.Text.Encoding.UTF8,
                        StreamWriter = writer
                    };

                    Difference.DiffFiles(versionControlServer, serverVersion, localVersion, diffOptions, serverPath, true);
                    writer.Flush();

                    diff = System.Text.Encoding.UTF8.GetString(stream.ToArray());
                    if (diff != "")
                    {
                        newutils.WriteLogFile("Vars.enumExitCode.Success");
                        iRtnCode = (int)Vars.enumExitCode.Success;
                        return iRtnCode;
                    }
                }
            }
            catch (Exception)
            {

            } 
```

# c++ - 交付运行时库/DLL 的要求

> ID：14016330
> 
> 赞同：6
> 
> 时间：2012-12-24T02:12:15.360
> 
> 标签：c++, gcc, dll, runtime, mingw

我已经阅读了这两个 SO 问题：[要发布哪些运行时库？](https://stackoverflow.com/questions/1873969/which-runtime-libraries-to-ship)和[GCC 中包含的运行时库的许可证？](https://stackoverflow.com/questions/10838807/license-of-runtime-libraries-included-in-gcc)- 两者都非常有帮助，但不是我想要的。

我一直只是编写在自己的机器上使用的程序，这从来没有给我带来任何问题，但是现在我想开始在其他机器上运行软件并且我对运行时要求很谨慎。

**编辑：请参见下面的示例，这具有误导性。**

~~具体来说，如果我在 Windows 机器上编写 C++ 程序，通过 MinGW 使用 gcc 编译，并希望在另一台机器上运行它：~~

*   ~~我必须将 libstdc++.dll 与我的程序一起发送吗？~~
*   ~~这个单个文件（我假设放在可执行文件的目录中）是否足以让程序运行？~~

~~还有一个相同的例子，只不过这次是一个 Objective-C 程序。将 libobjc.dll 文件发送到另一台机器是否足以让程序正常执行？~~

我习惯于在安装了开发人员工具等的机器上运行程序，但现在我希望在通用机器（朋友、同事等）上运行它们，我不太确定该怎么做！

* * *

**编辑：**回应*edifice*的回答，我觉得我应该澄清我在寻找什么。我知道如何识别我的程序使用的必要 DLL（/dylibs 等）（尽管我习惯于手动完成这项工作；我没有听说过任何工具）。我的问题更多的是“我现在该怎么办？”

*可能需要一个更一般的例子：*

假设我编写了一个程序，该程序具有从 C++、C 和/或 Objective-C(2) 代码派生的目标文件。我使用了一些使用 MinGW 的 gcc 成功编译的 Windows API 代码。我还有一个在 Visual Studio (C++) 中编写的自定义 DLL。

我已经确定了我的程序将在运行时使用哪个 DLL（其中一个可能是 GCC 的 libobjc.dll，我不确定这是否会/应该在 Windows 机器上有所作为，但我想让它尽可能通用) - “*必备 DLL* ”。

我想在我同事的计算机上运行它，其中大多数运行 Windows 7，但现在有些运行 Windows 8。为了完整起见，从一开始就开始：

*   我需要将*必备的 DLL*传输到我同事的计算机吗？
*   我应该将它们放在什么目录中？（exe目录/系统目录？）
*   一旦到位，这些 DLL 的存在是否允许程序正确执行？（假设它知道在哪里可以找到它们）
*   是否有任何其他文件应与 DLL 一起传输？

基本上，我试图根据系统运行时要求确定在另一台机器上开发和运行应用程序的整个思考过程。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-29T08:53:33.050

加载 DLL 时，Windows 会首先查看 exe 所在的目录。因此，将 DLL 放在那里可能会很好。

不过，对于 Microsoft DLL，我认为让您的同事安装 Visual C++ 运行时更有意义，它是 Microsoft 的可再发行包。理想情况下，您会使用 WiX 之类的东西制作安装程序，它会为您安装该先决条件，但只需告诉您的同事就可以了。

如果您包含来自 gcc 的 DLL，请务必在您的软件中包含许可证文件，因为 GPL 需要它。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-27T07:48:50.100

libstdc++ 不一定足够。您几乎肯定也需要 libgcc，但实际依赖项可能会因您的特定应用程序而异。

确定您需要随应用程序提供什么的**最佳方法是将您的 EXE 加载到**[Dependency Walker](http://www.dependencywalker.com/)之类的程序中。

举个例子，我编译了一个测试 C++ 程序，它只打印一个 std::string。[如您所见](http://i.imgur.com/h2yVp.png)，它直接依赖于Windows自带的**两个模块之外的模块；**`libgcc_s_dw2-1.dll`除了`libstdc++-6.dll`.

您应该记住在每个 DLL 下展开树，以确保它本身没有任何其他依赖项（如果 A 依赖于 B，即使 A 不直接依赖于 C，B 也可能依赖于 C）。

如果您担心并希望得到最有力的保证，您可以将 Windows 安装到虚拟机中（VirtualBox 是免费的）并在其中测试您的应用程序。如果您使用 Microsoft API，您可能希望查看 MSDN 文档以了解它们引入的 Windows 版本，并确保它与您的目标最低 Windows 版本一致。

**更新：**正如*xtofl*指出的那样，这不会涵盖使用动态加载的库`LoadLibrary`。如果您想覆盖此基础，请使用进程监视器检查运行应用程序时触及的 DLL 文件。（在 EXE 的路径中添加一个“图像路径”标准，以免被淹没。）这具有额外的优势，它涵盖了您的应用程序所依赖的所有文件、注册表项等，而不仅仅是 DLL。

# c# - 仅在正则表达式搜索中找到第一个匹配项

> ID：14016331
> 
> 赞同：0
> 
> 时间：2012-12-24T02:12:40.823
> 
> 标签：c#, regex

```
Regex messageServerRegex = 
    new Regex(@"([0-9\-]{10})\ ([0-9:]{8})\ \[TEXT\]\ (\[Server\])\ ([^\[]*)");

if (messageServerRegex.IsMatch(rchConsoleText))
{
    var infoMatches = messageServerRegex.Split(rchConsoleText);
    Console.WriteLine("Date: {0}\nTime: {1}\nType: {2}\nMessage: {3}",
    infoMatches[1], infoMatches[2], infoMatches[3], infoMatches[4]);
} 
```

这是我们希望服务器过滤的文本的两个示例

> 2012-12-24 02:24:18 [TEXT] [Server] 2012-12-24 02:24:18 [TEXT] [Server] 示例文本。

我们希望从这一行得到的结果是：

```
日期：2012-12-14  
时间：02:24:18  
类型：[文本] [服务器]  
消息：2012-12-24 02:24:18 [TEXT] [Server] 示例文本。  

```

但它会回复：

```
日期：2012-12-14  
时间：02:24:18  
类型：[文本] [服务器]  
留言：2012-12-24 02:24:18  

```

如您所见，它只显示日期和时间，那是因为正则表达式过滤了它，所以我如何让它只削减日期和时间 1 次？

第二个示例运行良好，即：

> 2012-12-24 02:24:18 [TEXT] [Server] 示例文本示例文本示例文本。

我们希望从这一行得到的结果是：

```
日期：2012-12-14  
时间：02:24:18  
类型：[文本] [服务器]  
消息：示例文本示例文本示例文本。  

```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-24T02:46:28.000

我不知道您的输入是否被分成几行。如果是这样，使用 Match 很容易。

```
 var inputs = new string[]{
        @"2012-12-24 02:24:18 [TEXT] [Server] 2012-12-24 02:24:18 [TEXT] [Server] Sample text.",
        @"2012-12-24 02:24:18 [TEXT] [Server] Sample text sample text sample text."};

     foreach(string input in inputs)
     {
        string pattern = @"([0-9\-]{10}) ([0-9:]{8}) \[TEXT\]\ (\[Server\]) (.*)";
        var match = Regex.Match(input, pattern);
        Console.WriteLine(
           "Date: {0}\nTime: {1}\nType: {2}\nMessage: {3}",
           match.Groups[1].Value, match.Groups[2].Value, match.Groups[3].Value, match.Groups[4].Value);
     } 
```

如果没有，它会变得更难 - 而不是 a`.*`它将是`((?!something that indicates the next entry).)`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-24T02:32:59.560

正则表达式中的最后一组不包括 '[' 字符，如果它包含 [ 字符，则会导致该行的文本部分不匹配。如果输入表示单个日志消息，则排除似乎是不必要的。尝试不排除，.*，看看是否有效

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-24T02:47:40.743

怎么样：

```
^([0-9\-]{10})\ ([0-9:]{8})\s*\[TEXT\]\s*\[Server\]\s*(.*) 
```

# android - 如何使用 amack 通过 xmpp 获取邀请者姓名？

> ID：14016332
> 
> 赞同：0
> 
> 时间：2012-12-24T02:12:41.730
> 
> 标签：android, xmpp, smack, asmack

通过阅读 asmack 源码，在创建聊天室并邀请用户加入时，消息添加了 extension `MUCUser.Invite`。

```
public void invite(Message message, String user, String reason) {
    // TODO listen for 404 error code when inviter supplies a non-existent JID
    message.setTo(room);

    // Create the MUCUser packet that will include the invitation
    MUCUser mucUser = new MUCUser();
    MUCUser.Invite invite = new MUCUser.Invite();
    invite.setTo(user);
    invite.setReason(reason);
    mucUser.setInvite(invite);
    // Add the MUCUser packet that includes the invitation to the message
    message.addExtension(mucUser);

    connection.sendPacket(message);
} 
```

我使用`message.getExtension( "x","http://jabber.org/protocol/muc#user")`，但它返回 DefaultPacketExtension，而不是 MUCUser.Invite。所以我怀疑我怎么能得到邀请者的名字。任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T10:37:18.977

使用 message.getBody() 可以获取邀请原因和包含邀请人姓名的内容。使用 subString()，我得到了邀请者的名字。但我认为这不是一个好的解决方案，我在问题中的疑问没有解决。</p>

# c++ - 共享父类成员的子类

> ID：14016338
> 
> 赞同：1
> 
> 时间：2012-12-24T02:13:56.547
> 
> 标签：c++

我有一个尴尬的问题。我认为这是不可能的，但我需要确定。这有点奇怪，但我需要我的子类共享父类的 SAME Pixels 向量。

基本上，我想创建一个 Image 类的实例。该 Image 类将保存 Bitmap 和 Png 类的像素，因此如果我需要从 Bitmap 转换为 PNG，反之亦然，它们使用相同的矢量，而不是我创建 Bitmap 和 PNG 类。

```
class Image
{
    private:
        std::vector<RGB> Pixels;
};

class Bitmap : Image
{
    public:
        Bitmap() : Image() {};
};

class Png : Image
{
    public:
        Png() : Image() {};
}; 
```

这样当我这样做时：

```
int main()
{
    Image Img();

    Img.GetBitmapPixels();  //This
    Img.GetPngPixels();     //And this, return the same Pixels Vector.

    Bitmap Foo = Img.ToPng();
    Png Moo = Img.ToBitmap();
    //Such that both Foo and Moo have the exact same underlying Pixels Vector.
} 
```

目前我的课程看起来像：

```
class Bitmap
{
    private:
        std::vector<RGB> Pixels;

    public:
        Bitmap();
        std::vector<RGB> GetPixels() {return Pixels;}
        void SetPixels(std::vector<RGB> Pixels) {this->Pixels = Pixels;}
};

class Png
{
    private:
        std::vector<RGB> Pixels;

    public:
        Png();
        std::vector<RGB> GetPixels() {return Pixels;}
        void SetPixels(std::vector<RGB> Pixels) {this->Pixels = Pixels;}
}; 
```

要从一种转换为另一种，我必须这样做：

```
int main()
{
    Bitmap Bmp();
    Png PNG();

    PNG.SetPixels(BMP.GetPixels);   //BMP has to COPY PNG's Pixels and vice-versa..
} 
```

这是一个愚蠢的问题。我只是不想复制像素。我只想能够在两个类之间进行转换而无需任何复制，因为这两个类都拥有一个 std::vector Pixels 成员并且数据对齐相同。

我想我正在努力做到：PNG.SaveAsBitmap(...); 或 BMP.SaveAsPNG(...); 不创建另一个的新实例。

如何避免复制/创建和创建我要转换到的另一个类的新实例？我可以拥有彼此继承的类吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T02:27:09.983

由于它们共享一个父元素作为一个共同因素，您可以选择使用指针（这被认为是浅拷贝），但这通常是不明智的，深拷贝通常更好。也许您可以创建两个函数，一个创建浅拷贝，一个创建深拷贝。因为 Bitmap 和 Png 是独立的实体（它们是兄弟）。也许您应该允许 BMP 成为 png 的父级？

您也可以选择完全解耦编码以节省成本，只处理原始图像数据。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-24T02:29:48.710

我可能过于简单化了这一点。你是如何加载数据的？如果每种图像类型都相同，您是否可以在图像类中加载并重载翻译函数。我不是图像数据方面的专家，但你能做一些类似的事情吗：

```
 public Image
    {
       private Pixels data;
       public void GetPixels();
       public virtual Pixels ToFormat(FormatEnum format);
    }

    public Bitmap:Image
    {
        public override Pixels ToFormat(FormatEnum format)
        {
            switch(format){  
                case FormatEnum.Bitmap:return data;break;
                case FormatEnum.Png:return doSomethingElse();break;
            }
        }
    } 

   int main()
   {
      Image Img();

      Img.GetPixels();

       Bitmap Foo = Img.ToFormat(Format.BitMap);
       Png Moo = Img.ToFormat(Format.Png);

   } 
```

# iphone - 如何在 iOS 应用内切换运营商

> ID：14016340
> 
> 赞同：-2
> 
> 时间：2012-12-24T02:14:07.517
> 
> 标签：iphone, ios

iOS 应用程序是否可以使用 Apple 批准的 API（即无需越狱）切换手机使用的电话运营商？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-24T02:59:08.690

运营商不只是那样工作。iPhone 一次激活一个运营商，并且一次只激活一个运营商。如果您的意思是从美国的 AT&T 转移运营商，然后进入加拿大并使用 Rogers 网络，那么 iPhone 将自行完成，因为该 API 不公开。应用程序不仅无法访问该功能，而且它实际上不适用于 iPhone 应用程序，甚至无法执行该功能。但 iPhone 只能使用插入的 Carrier Sim 卡激活，前提是它是 GSM 运营商或在启动时由单个 CDMA 运营商插入。所以 iPhone 不能简单地“选择”跳转到任何可用的网络，除非得到运营商的授权并得到内部 Apple 代码的允许。不仅不同的蜂窝网络广播方式不同，

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-24T02:59:10.107

在 GSM 手机上，确实存在可以通过编程处理多个 IMSI 和 KI 值的 SIM 卡，从而允许手机在多个网络之间进行选择。我不相信有任何 API 可以向 iOS 中的开发人员公开。

# java - 意外的 JDWP 错误 21

> ID：14016343
> 
> 赞同：4
> 
> 时间：2012-12-24T02:14:11.053
> 
> 标签：java, netbeans, java-me, midlet

HttpConnection conn = (HttpConnection) Connector.open(strDefURL + strBloggersURL);

我有这行抛出“InternalException：意外的 JDWP 错误：21”，我正在使用它从我创建的 servlet 中获取一些 XML。奇怪的是，字符串后来被来自 servlet 的 XML 填充。我无法解析这个，显然需要从上到下进行调试，这是我的代码中的第一个错误。

迄今为止找不到已解决的票，我自己添加了一张：http: //netbeans.org/bugzilla/show_bug.cgi?id= [224188](http://netbeans.org/bugzilla/show_bug.cgi?id=224188)

# ruby-on-rails - 未设置 Carrierwave 唯一文件名

> ID：14016344
> 
> 赞同：1
> 
> 时间：2012-12-24T02:14:24.460
> 
> 标签：ruby-on-rails, ruby, carrierwave

我查看了github上的carrierwave wiki，并使用了[他们描述的方法](https://github.com/jnicklas/carrierwave/wiki/How-to%3a-Create-random-and-unique-filenames-for-all-versioned-files)来生成唯一的文件名：

```
def filename
   @filename ||= "#{secure_token}.#{file.extension}" if original_filename.present?
end

private
def secure_token
    var = :"@#{mounted_as}_secure_token"
    random_token = Digest::SHA2.hexadigest("#{Time.now.utc}--#{model.id.to_s}").first(20)
    model.instance_variable_get(var) or model.instance_variable_set(var, random_token)
end 
```

（虽然使用哈希）

我遇到的问题是文件名仍被设置为原始文件的名称。就好像`filename`方法被忽略了。不太确定发生了什么。我重置了服务器和所有内容，仍然在上传的文件和缩略图版本上获得原始文件名。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-24T02:50:41.853

我不确定为什么文档`||=`在方法中使用运算符`filename`，但是这样不会设置唯一文件名，除非`@filename`is `nil`，这似乎不是通常的情况。使用`=`代替`||=`（或根本不使用赋值）似乎可以解决问题。

```
def filename
  @filename = "#{secure_token}.#{file.extension}" if original_filename.present?
  # The following line works too
  #"#{secure_token}.#{file.extension}" if original_filename.present?
end 
```

# python - 回滚事务 SQL

> ID：14016347
> 
> 赞同：1
> 
> 时间：2012-12-24T02:15:04.220
> 
> 标签：python, iis, transactions, rollback, sql-server-profiler

我有一个 IIS 托管的 Python 应用程序，前端应用程序总是无法保存。

我注意到当 SQL Profiler 运行并且那些应用程序名称是 IIS 时，有很多事务计数超过 0 然后回滚。

有时它确实在事务计数也超过 0 时提交。

我想知道这是什么意思，我在哪里可以找到执行此控件的脚本。

会不会是查询设计问题造成的？非常感谢任何建议。

```
IF @@TRANCOUNT > 0
        ROLLBACK TRANSACTION; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T02:19:20.767

您发布的代码：

```
IF @@TRANCOUNT > 0
   ROLLBACK TRANSACTION; 
```

如果有任何事务处于活动状态，则表示回滚。

这可能不是你想要的！

我怀疑你真正想要的是：

```
IF @@TRANCOUNT > 0
   COMMIT TRANSACTION; 
```

# php - php-mysql 从数据库中获取下一个和上一个 id

> ID：14016354
> 
> 赞同：2
> 
> 时间：2012-12-24T02:16:05.400
> 
> 标签：php, mysql

我有下表：

```
**id**         **username**         **activity**
1              user1                  activity-like
2              user1                  activity-share
3              user3                  activity-like
4              user4                  activity-like
5              user1                  activity-share
6              user6                  activity-like
8              user1                  activity-share
9              user3                  activity-like
10             user5                  activity-share 
```

（注：没有id = 7）

我正在尝试使用 php-mysql 来获取 user1 进行的活动并获取 id。在这种情况下，活动的 ID 为（1、2、5 和 8）。

```
$currentId = 5; 
```

如果它们存在（在本例中为 2 和 8），我想获取下一个和上一个 id。

```
$fetch = mysql_query("SELECT * FROM `main` WHERE `username` = 'user1' AND id > '$id'");
if(mysql_num_rows($fetch) == 1){
while (){

}
$result = $fetch['id'];
} 
```

我不确定如何为此编写查询。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-24T02:33:38.373

你可以这样做：

对于下一个 ID，

```
SELECT id from tablename where username = 'user1' AND id > $currentId ORDER BY ID ASC LIMIT 1; 
```

对于以前的 id，

```
SELECT id from tablename where username = 'user1' AND id < $currentId ORDER BY ID DESC LIMIT 1; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-24T02:30:55.143

我认为您可以使用`union`如下查询：

```
 (SELECT ID, USERNAME, ACTIVITY FROM MAIN WHERE username = 'user1' AND ID < '$id'
 ORDER BY ID DESC LIMIT 1)
 UNION 
 (SELECT ID, USERNAME, ACTIVITY FROM MAIN WHERE username = 'user1' AND ID > '$id'
 ORDER BY ID ASC LIMIT 1); 
```

第一个查询片段应该返回 ID =`2`如果它存在，第二个应该返回 ID = `8`。

# jquery - 在 jQuery 中获取表值

> ID：14016355
> 
> 赞同：2
> 
> 时间：2012-12-24T02:16:40.693
> 
> 标签：jquery, jquery-selectors

```
<table>
  <tr>
    <td>dovecot</td>
    <td></td>
    <td>0.00</td>
    <td>0.10</td>
    <td>0.0</td>
  </tr>
  <tr>
    <td>dpsel</td>
    <td>dps-e-learn.in</td>
    <td>0.00</td>
    <td>0.06</td>
    <td>0.0</td>
  </tr>
  <tr>
    <td>svarun</td>
    <td>svarun.in</td>
    <td>0.00</td>
    <td>0.02</td>
    <td>0.0</td>
  </tr>
  <tr>
    <td>DELAYED</td>
    <td></td>
    <td>0.00</td>
    <td>0.00</td>
    <td>0.1</td>
  </tr>
  <tr>
    <td>hostc1</td>
    <td>hostraptor.in</td>
    <td>0.00</td>
    <td>0.05</td>
    <td>0.0</td>
  </tr>
  <tr>
    <td>Top Process</td>
    <td>%CPU 0.1</td>
    <td colspan="3">
      httpd [ecomwel.hostraptor.in] [/wp-content/plugins/nextgen-gallery/xml/media-rss.php?gid7]
    </td>
  </tr>
  <tr>
    <td>astrore</td>
    <td>astroreddy.com</td>
    <td>0.00</td>
    <td>0.02</td>
    <td>0.0</td>
  </tr>
  <tr>
    <td>cpanel</td>
    <td></td>
    <td>0.00</td>
    <td>0.00</td>
    <td>0.0</td>
  </tr>
  <tr>
    <td>named</td>
    <td></td>
    <td>0.00</td>
    <td>0.20</td>
    <td>0.0</td>
  </tr>
</table> 
```

我有一个像上面这样的表，我需要使用 jQuery 在该表中动态搜索名称

例如：我需要使用 astrore 进行搜索，我需要获取下一个元素，我的意思是我需要获取此域名...

这`tr td`将每2分钟更改一次...

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-24T02:18:45.420

[包含选择](http://api.jquery.com/contains-selector/)器：

```
var value = $("td:contains('astrore')").next().text(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-24T02:22:48.980

这允许重复检查该值：

```
function scanForValue(value) {
    $("td").each(function() {
        if ($(this).text()==value) {
            console.log($(this).next().text());
        }
    });

    window.setTimeout("scanForValue('"+value+"');", 120000);
}

scanForValue('astrore'); 
```

[http://jsfiddle.net/hLKRd/3/](http://jsfiddle.net/hLKRd/3/)

# python - jinja2：宏选择宏或动态宏调用

> ID：14016356
> 
> 赞同：7
> 
> 时间：2012-12-24T02:16:51.880
> 
> 标签：python, templates, jinja2

我有一个我正在经历的命名元组列表，每个在渲染要求上都略有不同，所以我想根据属性调用正确的宏。我所拥有的是：

```
{% macro format_item(item) %}
    {% if item.type_of == 'a' %}
        {{ format_a(item) }}
    {% elif item.type_of == 'b' %}
        {{ format_b(item) }}
    {% elif item.type_of == 'c'%}
        {{ format_c(item) }}
    {% elif item.type_of == 'd'%}
        {{ format_d(item) }}
    {% else %}
        {{ format_general(item) }}
    {% endif %}
{% endmacro %} 
```

但我想要的是：

```
...iterating through list of items
{{ call macro based off item.type_of }} 
```

此时在常规python中我会做类似的事情

```
getattr(object_with_method_to_produce_templates, item) 
```

但还没有找到有效使用 attr 过滤器的方法（如果我能在这种情况下正确使用它的话）。

我发现 flask.get_template_attribute 在其他地方寻找可能很有趣（如果我可以提前完成所有操作并将预先计算和预先格式化的项目发送到模板）。也许太多了，超出了我此时想做的事情。

从各种宏列表中调用而不是从将来可能会变得相当大的 if then 列表中调用的更好方法是什么？似乎是一个常见问题，但我并没有偶然发现我正在寻找的确切答案。

编辑：

我将此添加到我正在做的事情中，试图生成一个可调用宏作为我要渲染的项目的一部分

```
from flask import get_template_attribute
from jinja2 import Template
test_template = Template('{% macro test_macro(item) %}<div id="test-div">sent to me: {{ item }}</div>{% endmacro %}') 
```

...在项目生成中...

```
 template = get_template_attribute(test_template, 'test_macro') 
```

...在模板中...迭代项目然后为每个项目

```
{{ item.template("testing this method") }} 
```

哪种方法有效，但只为字母生成字符串字母，而不是像常规宏那样（即 div 不呈现为 div，仅呈现为文本）。

```
<div id="test-div">sent to me: testing this method</div> 
```

所以我需要给模板一些上下文，或者一些更接近目标但似乎不正确的东西。

编辑2：

```
{{ item.template("testing this method")|safe }} 
```

返回我正在寻找的东西，所以这是可以通过的，我可能能够绕过我拥有的 namedtuple 安排，只需传递一个宏......我想更多的工作。这是最佳/优选还是一团糟？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2014-07-03T12:16:38.823

您可以创建一个 Jinja2 过滤器，它从当前上下文中获取宏，然后评估宏。过滤器是：

```
@contextfilter
def call_macro_by_name(context, macro_name, *args, **kwargs):
    return context.vars[macro_name](*args, **kwargs) 
```

[在此处](https://stackoverflow.com/a/24553389/888653)查看完整答案。

# javascript - IE678中pre的innerHTML如何处理，缩进在哪里？

> ID：14016361
> 
> 赞同：0
> 
> 时间：2012-12-24T02:17:39.350
> 
> 标签：javascript, html, internet-explorer

谁能告诉我如何处理**IE678**中 pre 的 innerHTML ？我知道使用 br，但是如何处理缩进？

我的**HTML**：

```
<div id="box">
    <pre id="code">

       var a = "before";
       function b(){
           alert(a);
       }

    </pre>
</div> 
```

我的**JS**：

```
<script>
    var pre = document.getElementById("code");
    var str = pre.innerHTML;
    var newstr = str.replace("before", "after").replace(/\n/ig, "<br />");
    pre.innerHTML = newstr;
</script> 
```

页面中的正确**结果**：

```
var a = "after";
function b(){
    alert(a);    //note the indentation before alert 
} 
```

**IE678**页面中的错误**结果**：

 **```
var a = "after"; 
function b(){ 
alert(a);        //indentation is disappeared......
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-24T02:44:14.120

抱歉，没有看到你用 JavaScript 改变了 pre 的文本，这把它搞砸了。这是您可以执行的操作：

```
 var pre = document.getElementById("code");
    var str = (pre.innerText) ? pre.innerText : pre.textContent;
    var newstr = str.replace("before", "after");//.replace(/\n/ig, "<br />");
    if(pre.textContent){pre.textContent = newstr};
    if(pre.innerText){pre.innerText = newstr}; 
```**

# java - 有时写入文件块

> ID：14016362
> 
> 赞同：0
> 
> 时间：2012-12-24T02:18:04.063
> 
> 标签：java, android, file, buffer

我实现了一个下载管理器，它工作得很好，除了我注意到一件事，有时线程在写入文件时会阻塞一段时间（50 毫秒到最多 10 秒），我在 Android（基于 Linux）上运行这个程序，我的猜测是操作系统级别是否有某种**缓冲区**需要刷新，而我的写入实际上写入了该缓冲区，如果该缓冲区已满，则写入需要等待。

我的问题是可能导致阻塞的可能原因是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-24T03:32:16.727

众所周知，IO 是一种“阻塞”活动，因此您的问题应该是“当您的程序忙于等待 IO 完成时您应该做什么”

采用一些众所周知的并发策略和基于事件的编程模式是一个好的开始

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-24T02:23:10.673

**-**我已经通过以下方式完成了文件的写入和读取，并且从未遇到任何问题。

**例如：**

```
File f = new File("Path");
FileWriter fw = new FileWriter(f);
BufferedWriter bw = new BufferedWriter(fw); 
```

**-**您也可以试用`NIO`Java 中的包。

# google-chrome - 将 VNC 或 RDC 用于全屏 Chrome 的远程桌面是否重要？

> ID：14016366
> 
> 赞同：1
> 
> 时间：2012-12-24T02:18:29.490
> 
> 标签：google-chrome, rdp, vnc, vnc-server, vnc-viewer

我一直在尝试了解 VNC 和 RDP 之间的区别。我的理解是VNC或多或少只是传输桌面的图片。然而，RDP 对桌面上发生的事情有更多的语义理解，并传输如何呈现某些类型的窗口、按钮等。（我不知道这有多相关，除非人们使用 Windows Presentation Foundation 或类似的东西...)

所以看起来 RDP 是一个更有效的协议。

但是，我的主要用例是监控具有 Chrome 浏览器全屏的桌面。在这种情况下，RDP 会做与 VNC 相同的事情并传输 Chrome 浏览器的内容吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T16:58:33.387

我认为 RDP 处理矢量图形，而 vnc 主要基于屏幕图像，我认为你是正确的。

另一个区别是 RDP 在发生更改时通知客户端，而 VNC 服务器等待客户端请求屏幕更新。这也使 RDP 更加高效。

然而，随着用户越来越希望获得与远程计算机相同的体验，现在 RDP 很少发送矢量图形，即 RDP 几乎也发送屏幕图像差异。RDP 仍然更快的原因是因为微软在 Windows 中内置了驱动程序来检测显示变化，而 VNC 使用解决方法来做到这一点，你可以想象微软在这方面做得更好。因此，即使两种协议都发送相同的图像，微软的效率也要高得多。事实上，没有任何 Windows 远程处理软件能像 RDP 那样高效（我知道 Citrix 的 ICA，让我们把它放在同一个 RDP 类别下）。

如果您打算远程使用 Chrome 浏览视频，您可能会对 RDP 感到失望，因为它很慢，除非您打开 RemoteFX，但它只能在 Windows 2008 服务器上使用（不过我不确定 Windows 8 是否支持它）。

所以我的建议是，尽可能使用 RDP。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-04T12:29:46.740

我认为您将 RDP 和 VNC 与 chrome 相关联感到困惑。VNC（Virtual Network Computing）指各种远程支持工具，如 Ultra VNC、Real VNC、logmeinrescue、gosupportnow、GoToMyPC 等。RDP 表示远程桌面访问、远程桌面协议、微软远程桌面软件等。与 RDP 相关的含义多种多样和VNC。这是一个非常详细的主题讨论，需要很多时间。

# jquery - 将外部模板加载到工具栏 Kendo UI

> ID：14016367
> 
> 赞同：0
> 
> 时间：2012-12-24T02:18:31.187
> 
> 标签：jquery, asp.net-mvc-4, kendo-ui

目标是将外部模板加载到 Kendo UI 网格的工具栏中。我不希望直接在视图本身中有任何脚本（如 Kendo 网站上的示例所示）。我一直在搞乱 $.get 但并没有完全成功。将模板分配给下面的工具栏的最佳方法是什么？

剑道版本 2012.3.1114，Visual Studio 2012

设置网格设置的脚本中的函数调用：

```
 var configureGrid = function() {
        var grid = $('#allItemsGrid').kendoGrid({
            dataSource: {
                type: 'json',
                transport: {
                    read: {
                        url: "api/GridApi/GetAll",
                        dataType: 'json',
                        type: 'GET',
                        contentType: "application/json; charset=utf-8"
                    }
                },
                schema: {
                    model: {
                        fields { {
                            MusicItemId: { type: "integer" },
                            Artist: { type: "string" },
                            Title: { type: "string" },
                            Genre: { type: "string" },
                            Format: { type: "string" },
                            Notes: { type: "string" },
                            Country: { type: "string" }
                        }
                    }
                },
                pageSize: 5
            },
            toolbar: // load external template????
            sortable: true,
            pageable: { pageSizes: [5, 10, 15] },
            columns: gridCols.GridColumns
        }); 
```

这是我在 MVC 项目根目录下的 Tmpl 文件夹中的一个模板：

```
 <script type="text/x-kendo-template" id="tmplTarget">
        <div class="toolbar">
            <label class="category-label" for="category">Show By Genre:</label>
            <input type="search" id="category"></input>
        </div>
        <div class="toolbar">
            <label class="category-label" for="category">Show By Format:</label>
            <input type="search" id="category2"></input>
        </div>
        <a class="k-button" id="searchCriteria" href="\\\#" onclick="test_fn()">Search</a>
    </script> 
```

根据瑞恩的要求。下面的代码是重做的，只是为了看看我是否可以根据 kendo 文档使事情正常进行。编码：

```
 <!DOCTYPE html/>
    <html>
        <head>
            <title>The Grid</title>
            <script src="~/Scripts/jquery-1.8.3.min.js"></script>
            <script src="~/Scripts/kendo.web.min.js"></script>
            <script src="~/Scripts/templateLoader.js"></script>
            <link href="~/Content/kendo/2012.3.1114/kendo.common.min.css" rel="stylesheet" />
            <link href="~/Content/kendo/2012.3.1114/kendo.default.min.css" rel="stylesheet" />
        </head>
        <script type="text/javascript">
            templateLoader.loadExtTemplate("@Url.Content("~/Tmpl/Test.tmpl.html")");

            $(document).ready(function () {
                var _itemTemplate;
                $(document).bind("TEMPLATE_LOADED", function (e, path) {
                    console.log('Templates loaded');

                    _itemTemplate = kendo.template($('#template').html(), { useWithBlock: false });

            });
            $('#allItemsGrid').kendoGrid({
                dataSource: {
                    type: 'json',
                    transport: {
                        read: {
                            url: "", // left blank, not concerned with pulling data back for now
                            dataType: 'json',
                            type: 'GET',
                            contentType: "application/json; charset=utf-8"
                        }
                    },
                    schema: {
                        model: {
                            fields: {
                                MusicItemId: { type: "integer" },
                                Artist: { type: "string" },
                                Title: { type: "string" },
                                Genre: { type: "string" },
                                Format: { type: "string" },
                                Notes: { type: "string" },
                                Country: { type: "string" }
                            }
                        }
                    },
                    pageSize: 5
                },
                toolbar: [{ name: 'customTemplate', template: _itemTemplate }],
                sortable: true,
                pageable: { pageSizes: [5, 10, 15] },  // page size using pager
                columns: [
                { field: "Artist", title: "Aritst" },
                { field: "Title", title: "Title" },
                { field: "Genre", title: "Genre" },
                { field: "Format", title: "Format" },
                { field: "Notes", title: "Notes" },
                { field: "Country", title: "Country" }
                ]
            });
        });
    </script>

    <style scoped="scoped">
        #grid .k-toolbar {
            min-height: 27px;
        }
        .category-label {
            vertical-align: middle;
            padding-right: .5em;
            float: left;
        }
        #category {
            vertical-align: middle;
        }
        .toolbar {
            float: right;
            margin-right: .8em;
        }
    </style>
    <body>
        <div id="allContainer">
            <div id="allItemsGrid"></div>
        </div>
    </body>
</html> 
```

这是 templateLoader.js 文件：

```
 var templateLoader = (function($, host) {
        return {
            loadExtTemplate: function(path) {
                var tmplLoader = $.get(path)
                    .success(function(result) {
                        $('body').append(result);
                    })
                    .error(function(result) {
                        alert("Error loading template...");
                });

                tmplLoader.complete(function() {
                    $(host).trigger("TEMPLATE_LOADED", [path]);
                });
            }
        };
    })(jQuery, document); 
```

模板与上面发布的相同。显然这不起作用，因为它将结果附加到文档的正文中。我需要的是附加到网格工具栏中模板的结果。通过观察网络流量验证，成功拉下模板。

# ios - NSMutableArray 替换对象 insted 添加

> ID：14016370
> 
> 赞同：-1
> 
> 时间：2012-12-24T02:18:46.880
> 
> 标签：ios, object, nsmutablearray

我正在使用 NSMutableArray 来存储一个名为 poligonon 的对象。这个对象有一个 NSMutableArray 作为属性来存储坐标 X。但是当我添加第二个对象时，数组上的第一个对象会变换自身。数组上的所有对象都必须不同，但它们等于数组中的最后一个对象。

示例：

`coordArrayX`是一个属性（NSMutableArray）

`-saveDataIntoArray`

```
{
poligonon.coorArrayX = coordArrayX;
arrayPoligonon addObject: poligonon;
} 
```

用户第一次单击保存时，第一个坐标是 74。现在，他创建一个坐标为 45 的新 poligonon，并将其添加到数组中。

当用户检查时，第一个 poligonon 的坐标 = 45。

怎么解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-24T03:10:11.557

每次您将相同的内容添加`poligonon`到数组并覆盖`coorArrayX`.

代替，

```
{
  poligonon.coorArrayX = coordArrayX;
  arrayPoligonon addObject: poligonon;
} 
```

尝试这个，

```
{
  poligonon = [[Poligonon alloc] init];
  poligonon.coorArrayX = coordArrayX;
  [arrayPoligonon addObject:poligonon];
} 
```

# ios - 以编程方式将方向转换为横向的代码？

> ID：14016377
> 
> 赞同：3
> 
> 时间：2012-12-24T02:19:31.593
> 
> 标签：ios, cocoa-touch, api, uiinterfaceorientation

在 FirstViewController 中有一个按钮。按下后，有一个模态转场转到 SecondViewController。FirstViewController 是纵向的，而 SecondViewController 是横向的。在故事板文件中，我将 SecondVC 设置为 Landscape，但 iOS 模拟器不会自动更改它的方向。
有人可以帮我找到自动将 SecondViewController 从 Portait 变为 Landscape 的代码吗？

`viewDidLoad`SecondVC 中的声明：

```
-(void)viewDidAppear:(BOOL)animated  {
    UIDeviceOrientationIsLandscape(YES);
    sleep(2);
    santaImageTimer = [NSTimer scheduledTimerWithTimeInterval:0.5
                                                       target:self
                                                     selector:@selector(santaChangeImage)
                                                     userInfo:NULL
                                                      repeats:YES];
    [santaImageTimer fire];
    image1 = YES;
} 
```

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-24T03:13:30.627

可悲的是，虽然您尝试打电话`UIDeviceOrientationIsLandscape(YES);`是一次勇敢的尝试，但实际上并没有改变方向。该方法用于确认保持方向的变量是否为横向。

例如，如果持有横向，`UIInterfaceOrientationIsLandscape(toInterfaceOrientation)`则返回 TRUE ，否则返回 FALSE。`toInterfaceOrientation`

*UIViewController 类参考中的*[处理视图旋转](http://developer.apple.com/library/ios/documentation/uikit/reference/UIViewController_Class/Reference/Reference.html#//apple_ref/doc/uid/TP40006926-CH3-SW57)中概述了更改方向的正确技术。具体来说，在 iOS 6 中，您应该：

 *```
- (BOOL)shouldAutorotate
{
    return YES;
}

- (NSUInteger)supportedInterfaceOrientations
{
    return UIInterfaceOrientationMaskLandscape;
} 
```

在 iOS 5 中，必要的方法是：

```
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)toInterfaceOrientation
{
    if (UIInterfaceOrientationIsLandscape(toInterfaceOrientation))
        return YES;
    else
        return NO;
} 
```*

# c# - 在 c# 中搜索 split 返回的每个项目的文本行

> ID：14016385
> 
> 赞同：1
> 
> 时间：2012-12-24T02:21:44.420
> 
> 标签：c#, logging, strip, logfile

我正在尝试阅读我的 apache 日志并对其进行一些处理。我使用一个字符串拆分函数，其中包含以这种方式引用我的日志行。我想删除这些行。下面的代码表明我有。它只删除“127.0.0.1”，但出现所有“192.168.1.x”行。

如何删除每个拆分字符串？

```
 public void GetTheLog()
    {
        string path = "c:\\program files\\Zend\\apache2\\logs\\access.log";
        string path2 = @"access.log";
        int pos;
        bool goodline = true;

        string skipIPs = "127.0.0.1;192.168.1.100;192.168.1.101;192.168.1.106;67.240.13.70";
        char[] splitchar = { ';' };
        string[] wordarray = skipIPs.Split(splitchar);
        FileStream fs = new FileStream(path, FileMode.Open, FileAccess.Read, FileShare.ReadWrite);
        StreamReader reader = new StreamReader(fs);
        TextWriter tw = new StreamWriter(path2);

        while (!reader.EndOfStream)
        {
            string line = reader.ReadLine();

            // initialize goodline for each line of reader result
            goodline = true;
            for (j = 0; j < wordarray.Length; j++)
            {
                pos = -10;
                srch = wordarray[j];
                ln = line.Substring(0,srch.Length);
                pos = ln.IndexOf(srch);
                if (pos >= 0) goodline = false;
            }
            if (goodline == true)
            {
                tw.WriteLine(line);
                listBox2.Items.Add(line);
            }
        }

        // Clean up
        reader.Close();
        fs.Close();
        listBox1.Items.Add(path2);
        tw.Close();
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T02:51:20.877

```
var logPath = @"c:\program files\Zend\apache2\logs\access.log";
var skipIPs = "127.0.0.1;192.168.1.100;192.168.1.101;192.168.1.106;67.240.13.70";
var filters = skipIPs.Split(';');
var goodlines = File.ReadLines(logPath)
                    .Where(line => !filters.Any(f => line.Contains(f))); 
```

那么你也能

```
File.WriteAllLines(@"access.log", goodlines); 
```

而且看起来您正在将行转储到列表框中

```
listBox2.Items.AddRange(goodlines.Select(line=> new ListItem(line)).ToArray()); 
```

此外，由于您`skipIPs`只是一个静态字符串，您可以稍微重构一下，然后做

```
var filters = new []{"127.0.0.1","192.168.1.100","192.168.1.101",...}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-24T06:30:26.990

arrrrrr din得到你想要的......

好的，如果您想从当前文件中删除跳过 IP 中存在的所有 IP，让我试试。

那么你可以简单地使用....

```
 if(ln==srch)
    {
     goodline = false;
    } 
```

代替

```
 pos = ln.IndexOf(srch);
    if (pos >= 0) goodline = false; 
```

在你的 for 循环中。

希望它会刺激你... :)

# c# - 打开网址并登录

> ID：14016390
> 
> 赞同：0
> 
> 时间：2012-12-24T02:22:35.063
> 
> 标签：c#

我的任务是使用 Excel 报告重新调整在线报告，确保两者中的数据始终匹配。我现在正在手动操作，并考虑使用 C# 将其自动化。

阅读excel文件应该不难。
但是，要打开在线报告，我必须打开一个 URL，填写用户名和密码，导航到报告，填写报告的参数。
一份报告显示为在线 SSRS 报告，另一份报告只是一个网页。

我想知道如何自动执行此任务，这意味着如何以编程方式登录页面。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T02:27:14.000

这是一个非常通用且开放式的问题。我建议从[WebClient 类](http://msdn.microsoft.com/en-us/library/system.net.webclient.aspx)开始并使用诸如[fiddler2](http://www.fiddler2.com/fiddler2/)之类的工具。使用 fiddler 监控 Web 表单值并构建您的请求。注意标题和 cookie。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-24T02:43:23.610

WatiN 似乎是我要找的那个！感谢 ryan 和其他因未知原因投票关闭线程的人。

# php - 在新的弹出窗口中打开标题位置？

> ID：14016395
> 
> 赞同：-1
> 
> 时间：2012-12-24T02:23:37.410
> 
> 标签：php, jquery, window, hyperlink

我正在尝试查看是否可以打开这样的标题位置：

```
if ($_GET['id'] == 99993) {
    header("Location: page.php");
} 
```

并让它在 jQuery 弹出窗口中打开（'prettyPhoto' 一个在线 jQuery 弹出窗口）

我正常的 a href 链接会这样写：

```
<a href="page.php?iframe=true&height=260"   rel="prettyPhoto[1]">Link</a> 
```

但我不知道如何为标题位置编写它。有人可以告诉我。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-24T03:03:16.783

重定向到漂亮的照片 URL 而不是 php 文件。

header("位置：http: //yoursite.com/page? [pretty_photo_url](http://yoursite.com/page?pretty_photo_url) ");

# jquery - jQuery 选择具有任何可见的 2 级子级的元素

> ID：14016401
> 
> 赞同：0
> 
> 时间：2012-12-24T02:25:10.480
> 
> 标签：jquery, jquery-selectors

我有以下代码，我试图`div.validation-summary-errors`根据内部是否有任何错误来隐藏和显示

```
$('div.validation-summary-errors').each(function (index, element) {
    if ( ????? ) {
        $(element).parent().css({ "visibility": "visible" });
    }
    else {
        $(element).parent().css({ "visibility": "hidden" });
    }
}); 
```

标记如下所示。这是应该隐藏的情况，因为内部`li`没有任何错误，并且`display: none`

```
<div class="validation-summary-errors">
   <ul>
      <li style="display:none"></li>
   </ul>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T02:34:09.773

```
if($(this).find('li').text().length){
    //there's an error
}else{
    //there is no error
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-24T02:35:21.597

尝试这样的事情。您需要迭代列表项，而不是`ul`像您在示例中那样迭代列表项本身。

```
$('div.validation-summary-errors li').each(function (index, element) {
    var $el = $(element);
    if ($el.text().length > 0) {
        $el.parent().css({ "visibility": "visible" });
    }
});​ 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-24T02:39:52.513

```
var errorEls=$('.validation-summary-errors');

errorEls.filter(':has(li:empty').show().end().filter(':not(:has(li:empty))').hide() 
```

如果您有`display:none`如图所示的内联 css...`css visibility`将不会使其可见。

`show()`并且`hide()`会改变`display`

# python - 彩票概率Python代码

> ID：14016409
> 
> 赞同：1
> 
> 时间：2012-12-24T02:26:35.980
> 
> 标签：python

我正在编写代码来解决这个问题：

你和你的朋友在纽约，正计划去看一场百老汇音乐剧。不幸的是，纽约就是纽约，门票只是有点贵。但是其中一个节目每晚都有一张彩票，像你这样的穷人有机会赢得购买稍微便宜一点的好座位门票的权利。彩票操作如下。首先，每个有兴趣的人都进入彩票。然后，抽出 n 位幸运中奖者，每人最多可购买 t 张门票。

给定您组中的人数 p（所有这些人都参加了抽奖）和参加抽奖的总人数 m，您能够获得整个组的门票的概率是多少？假设n个幸运的中奖者是从m人中均匀随机抽取的，每个人最多可以中奖一次。

这是我的代码：

```
import math

def lottery():

    m = int(raw_input('The number of people who entered the lottery: '))
    n = int(raw_input('The number of winner drawn from the total: '))
    t = int(raw_input('The number of tickets each winner can purchase: '))
    p = int(raw_input('The number of people in your group: '))

    def combinations(n, k):
        if 0 <= k <= n:
            ntok = 1
            ktok = 1
            for t in xrange(1, min(k, n - k) + 1):
                ntok *= n
                ktok *= t
                n -= 1
            return ntok // ktok
        else:
            return 0

    needed_wins = int(math.ceil(p/t))

    others = m - p

    loss = 0
    for i in range(needed_wins):
        loss += combinations(others, n-i) * combinations(p, i)

    total = combinations(m, n)

    prob = 1 - loss / total

    print(prob) 
```

我试图运行它，但结果是错误的。例如，如果组合为 (100,10,2,1)，则结果应为 0.1；相反，它返回了 1。如果有人能在这里帮助我，我真的很感激。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-24T02:35:52.060

在 Python 2 中，当你将两个整数相除时，你总是得到一个整数结果。尝试将此行添加到文件的顶部，这将为您提供新的 Python 3 行为，其中除法整数会产生浮点数：

```
from __future__ import division 
```

# wcf - 使用 miniprofiler 分析 wcf 和 mvc 4

> ID：14016412
> 
> 赞同：1
> 
> 时间：2012-12-24T02:27:02.573
> 
> 标签：wcf, asp.net-mvc-4, profiling, mvc-mini-profiler, mvcminiprofiler

我正在使用 miniprofiler，发现它非常有帮助。

我有一个 mvc4 应用程序，它通过命名管道从一组 wcf 服务中获取其数据。我控制着 mvc4 应用程序和 wcf 服务。

我正在阅读这篇关于如何分析架构较低层的[帖子](https://stackoverflow.com/questions/7530027/mvcminiprofiler-profiling-web-app-and-lower-layers) ，但也许我遗漏了一些东西，但找不到 MvcMiniProfiler.WCF 包或 MvcMiniProfiler 包的一部分。这仍然可用吗？

我的另一个问题是可以设置 miniprofiler 以记录到文件吗？我有针对我的应用程序运行的自动化性能测试，我想记录分析以了解应用程序在负载下的行为方式。

# php - Str_Replace 的问题

> ID：14016415
> 
> 赞同：3
> 
> 时间：2012-12-24T02:27:22.473
> 
> 标签：php, regex, str-replace

我是一名初学者程序员，制作了一个相当简单的抓取网站，并将信息私下存储在 mysql 数据库中，以了解有关编程的更多信息。

这是我要抓取的代码：

```
<li id="liIngredient" data-ingredientid="3914" data-grams="907.2">
                <label>
                    <span class="checkbox-formatted"><input id="cbxIngredient" type="checkbox" name="ctl00$CenterColumnPlaceHolder$recipeTest$recipe$ingredients$rptIngredientsCol1$ctl01$cbxIngredient" /></span>
                    <p class="fl-ing" itemprop="ingredients">
                        <span id="lblIngAmount" class="ingredient-amount">2 pounds</span>
                        <span id="lblIngName" class="ingredient-name">ground beef chuck</span>

                    </p>
                </label>
            </li>

<li id="liIngredient" data-ingredientid="5838" data-grams="454">
                <label>
                    <span class="checkbox-formatted"><input id="cbxIngredient" type="checkbox" name="ctl00$CenterColumnPlaceHolder$recipeTest$recipe$ingredients$rptIngredientsCol1$ctl02$cbxIngredient" /></span>
                    <p class="fl-ing" itemprop="ingredients">
                        <span id="lblIngAmount" class="ingredient-amount">1 pound</span>
                        <span id="lblIngName" class="ingredient-name">bulk Italian sausage</span>

                    </p>
                </label>
            </li> 
```

抓取数据后，我试图使用 str_replace 来删除除（使用第一个示例）2 磅碎牛肉（或第二个示例中的 1 磅散装意大利香肠）之外的所有内容。

这是我的尝试：

```
$ingredients = str_replace('#<label>\s<span class="checkbox-formatted"><input id="cbxIngredient" type="checkbox" name=".*?" /></span>\s<p class="fl-ing" itemprop="ingredients">\s#', null, $ingredients);
              echo $ingredients; 
```

从理论上讲，应该删除该`span id=lblIngAmount`部分的所有内容。我哪里错了？文本在 str_replace 之后和之前保持不变。怎么来的？

感谢您的任何帮助！如果您需要更多详细信息，我很乐意提供！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-24T02:30:06.323

您想使用[preg_replace()](http://us3.php.net/preg_replace)但是您不应该真正使用正则表达式来操作 HTML。请改用 PHP 的[DOMDocument](http://php.net/manual/en/class.domdocument.php)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-24T02:37:40.017

不要使用正则表达式来解析 HTML。

请参阅[如何解析 HTML](https://stackoverflow.com/questions/3577641/how-to-parse-and-process-html-xml-with-php)。

正则表达式可以在这种特定情况下工作，但由于这是一个学习项目，所以你想把它做好。

# html - CSS中的线程

> ID：14016416
> 
> 赞同：2
> 
> 时间：2012-12-24T02:27:26.980
> 
> 标签：html, css

我现在尝试了很长一段时间来获得在 css 中工作的动态高度线。

它应该水平连接不同TextItems的图标。

这些项目是动态的，例如它们甚至会在点击时发生变化。我试图用一个伪元素来做到这一点，`.item`所以它的高度与项目相同，但由于某种原因它总是太长。

代码：http: [//jsfiddle.net/BCwwb](http://jsfiddle.net/BCwwb)

目标：使线程从第一个`.item`到最后一个产生`.item`，但不再进一步。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-24T02:33:39.793

Give`.item` `position: relative;`使其绝对定位`::before`将相对于它定位：

```
.item {
    position: relative;
} 
```

[这是更新的小提琴。](http://jsfiddle.net/BCwwb/1/)

如果您打算将其隐藏在最后一个...那么也这样做:)

```
.item:last-child::before {
    display: none;
} 
```

[还有另一个 jsFiddle。](http://jsfiddle.net/BCwwb/2/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-24T02:46:29.180

为什么不简化解决方案并将所有`.item`元素包装在父元素中。这看起来像一个项目列表，所以我通常使用`ul`or `ol`，但如果你不了解语义，只需使用 a `div`（看起来你很满意）。

[http://jsfiddle.net/BCwwb/3/](http://jsfiddle.net/BCwwb/3/)

# iphone - UIViewAnimationCurveLinear 完全隐藏视图

> ID：14016419
> 
> 赞同：1
> 
> 时间：2012-12-24T02:27:36.700
> 
> 标签：iphone, objective-c, xcode

我试图通过使用页面卷曲效果在两个视图之间切换，`UIViewAnimationCurveLinear`但是当我执行这个动画时，页面卷曲的顶部仍然存在于第二个视图中。![在此处输入图像描述](../Images/55cc5772947560e4eb2a65d32a5a8061.png)

我通过使用实现此操作

```
 -(IBAction)menu:(id)sender{

    MenuViewController *view=[[MenuViewController alloc] initWithNibName:nil bundle:nil];
    view.modalTransitionStyle=UIViewAnimationCurveLinear;
    [self presentModalViewController:view animated:YES];

} 
```

任何人都知道如何从屏幕上完全删除以前的视图？提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-24T04:33:47.983

`UIViewAnimationCurveLinear`不是模态过渡样式。如果你想要 page curl 那么你可能想要`UIModalTransitionStylePartialCurl`.

# java - 使用 Java 代码操作 MFC 对话框可执行文件

> ID：14016423
> 
> 赞同：2
> 
> 时间：2012-12-24T02:28:55.183
> 
> 标签：java, mfc

我有一个 MFC 对话框可执行文件。我没有关于这个可执行文件的任何文件。我想使用 Java 代码来操作它（在输入文本字段中填写一些值并单击一个按钮，然后从输出文本文件中获取结果）。另一个限制是我不知道这个可执行文件背后的细节。例如函数名和钩子。谁能帮我？

此致，

郑。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T02:40:10.517

尝试使用 Microsoft UI 自动化。此接口适用于残障人士，但您拥有清晰的 API，并且适合您的场景。

# php - PHP：使用 file_put_contents 更改图像的类型

> ID：14016426
> 
> 赞同：-3
> 
> 时间：2012-12-24T02:29:30.887
> 
> 标签：php, image, gif

好吧，本质上，这是我正在使用的脚本

```
<?php
$src = "http://upload.wikimedia.org/wikipedia/commons/4/4b/Everest_kalapatthar_crop.jpg";
$data = file_get_contents($src);
file_put_contents("picture.gif", $data);
$image = imagecreatefromgif("picture.gif");
?> 
```

最后一行用于测试 php 如何处理图像文件，但是 php 会抛出此错误：

```
Warning: imagecreatefromgif() [function.imagecreatefromgif]: 'picture.gif' is not a valid GIF file 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T02:32:34.843

您可以使用[**imagecreatefromstring**](http://php.net/manual/en/function.imagecreatefromstring.php)，如果您的 PHP 构建支持它们，这些类型将被自动检测：JPEG、PNG、GIF、WBMP 和 GD2。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-24T03:10:49.913

你并不遥远：

```
$src   = "http://upload.wikimedia.org/wikipedia/commons/4/4b/Everest_kalapatthar_crop.jpg";
$data  = file_get_contents($src);
$image = imagecreatefromstring($data); 
```

然后在转换中执行任何额外步骤（可选，仅当您喜欢/需要时）并保存为 gif：

```
$saved = imagegif($image, "picture.gif"); 
```

另见：

*   [使用 PHP 将 jpg 图像转换为 gif、png 和 bmp 格式](https://stackoverflow.com/q/755781/367456)

# sql - 无法让 DISTINCT + GROUP 与具有两个值的 Postgres 一起使用

> ID：14016435
> 
> 赞同：2
> 
> 时间：2012-12-24T02:32:18.743
> 
> 标签：sql, postgresql, group-by, distinct

尝试获取具有不同 user_id 的最新活动，按“最新”排序（顺序“id desc”或“created_at desc”）：

```
SELECT DISTINCT ON (id, user_id) id,user_id 
FROM "activities" 
GROUP BY id,user_id 
ORDER BY id desc LIMIT 10 
```

但这会返回 10 个带有以下 user_ids 的结果：

```
2863, 2863, 2863, 2863, 2863, 2863, 2863, 2863, 2863, 2615 
```

显然，这并不明显。我将如何得到它，使其具有不同的（分组的）user_id？

编辑：也许我解释得不好，我很抱歉。真的很简单，我想要来自唯一 user_id 的最新活动。到最近，我*更*喜欢 created_at ，但 id 也可以。我只想要每个用户一个，没有重复。

再次编辑：意识到第一句话真的让回答者望而却步。很抱歉把每个人都扔在那里，我想要的真的很简单：/。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T02:56:51.293

试试这个：

```
select user_id, array_agg(id) as ids
from activities
group by user_id
having count(*) > 1; 
```

该[`array_agg()`](http://www.postgresql.org/docs/8.4/static/functions-aggregate.html)函数将组的所有值作为逗号分隔的列表返回。

### 编辑：

从评论看来，您可能只想要这个：

```
select distinct user_id
from activities; 
```

或者可能是这个，它只显示那些有重复的用户 ID：

```
select user_id
from activities
group by user_id
having count(*) > 1; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-24T03:23:59.077

我不确定你想要什么，但试试这个：

```
SELECT id, user_id
FROM (
   SELECT id
        , user_id
        , ROW_NUMBER () OVER (PARTITION BY id
                              ORDER BY user_id DESC) as rn
   FROM "activities"
   ) as xx
WHERE rn = 1
ORDER BY id desc 
LIMIT 10 
```

`ROW_NUMBER`OLAP 函数将在 的值内分配一个计数器`id`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-25T00:16:50.260

RE: 我想要来自唯一 user_id 的最新活动

```
SELECT DISTINCT ON (user_id) user_id, created_at
FROM "activities" 
ORDER BY user_id, created_at desc 
```

RE: 那我怎么拿到身份证呢？我还需要身份证

重复使用上面的查询：

```
with latest_activities as
(
  SELECT DISTINCT ON (user_id) user_id, created_at
  FROM "activities" 
  ORDER BY user_id, created_at desc
)
select l.user_id, l.created_at, array_agg(a.id) as ids
from latest_activities l
join activities a using(user_id)
group by l.user_id, l.created_at 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-25T00:35:32.247

如果您有一些最新的活动，例如

```
user_id created_at      id
john    july 4, 2010    1
john    july 4, 2010    2
john    july 12, 2010   3        -- ties with id# 4
john    july 12, 2010   4        -- ties with id# 3
john    july 5, 2010    5
paul    july 13, 2010   6
paul    july 12, 2010   7 
```

使用dense_rank：

```
with latest_activities as
(
    SELECT user_id, created_at, id,
        dense_rank() 
        over(partition by user_id order by created_at desc) as the_ranking
    FROM activities     
)
select * 
from latest_activities
where the_ranking = 1
order by user_id, id; 
```

上面的查询将显示：

```
user_id created_at      id 
john    july 12, 2010   3
john    july 12, 2010   4
paul    july 13, 2010   6 
```

如果您希望每个用户的多个 id 仅出现在一行上，请使用~~group_concat~~ array_agg，它将显示以下内容：

```
user_id created_at      ids
john    july 12, 2010   3, 4
paul    july 13, 2010   6 
```

数组聚合：

```
with latest_activities as
(
    SELECT user_id, created_at, id,
        dense_rank() 
        over(partition by user_id order by created_at desc) as the_ranking
    FROM activities     
)
select user_id, created_at, array_agg(id order by id) as ids
from latest_activities
where the_ranking = 1
group by user_id, created_at 
```

请注意，上面的查询也在处理没有关联的数据

现场测试：[http ://www.sqlfiddle.com/#!12/c48ec/8](http://www.sqlfiddle.com/#!12/c48ec/8)

# javascript - 使用 websocket 反序列化服务器中的 html 表单

> ID：14016439
> 
> 赞同：1
> 
> 时间：2012-12-24T02:33:06.713
> 
> 标签：javascript, jquery, python, forms, websocket

我通过 将表单的内容发送到服务器`WebSocket`，如下所示：

```
ws = new WebSocket("ws://localhost:8888/dh");
var formdata = $('eventForm').serialize();
ws.onopen = function()
{
    ws.send(formdata);
}; 
```

它在此处的服务器上接收：

```
def on_message(self, message):
    print 'message received %s' % message 
```

如何反序列化服务器上​​的表单数据？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T02:39:26.350

这将是一个查询字符串，所以一种方法是使用[`urlparse.parse_qs`](http://docs.python.org/2/library/urlparse.html#urlparse.parse_qs)：

```
import urlparse
⋮
data = urlparse.parse_qs(message) 
```

`data`将是一个表示表单的字典。

在 Python 3 中，它`urllib.parse`不是`urlparse`.

# html - 如何列出 BlackBerry-10 联系人列表中的所有联系人？

> ID：14016443
> 
> 赞同：0
> 
> 时间：2012-12-24T02:33:50.573
> 
> 标签：html, blackberry-webworks, blackberry-10

我正在为黑莓 10 创建一个短信聊天应用程序。所以我想列出黑莓数据库中的所有联系人并将其列出给用户，以便用户可以轻松选择收件人的手机号码。有没有办法使用 html5/webworks.I只想将所有联系人的姓名和手机号码放入数组或类似的东西中。任何人都可以帮忙吗？提前致谢。

[https://developer.blackberry.com/html5/apis/blackberry.pim.contacts.contact.html](https://developer.blackberry.com/html5/apis/blackberry.pim.contacts.contact.html)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T12:56:21.450

BB10 有严格的[用户界面指南](https://developer.blackberry.com/design/bb10/)。你可以通过两种方式做到这一点。您可以调用已经存在的原生联系人列表“卡片”或直接调用查找 API。

要调用联系人列表卡，请使用[invokeContactPicker](https://developer.blackberry.com/html5/apis/blackberry.pim.contacts.html#.invokeContactPicker)调用模式。完整的示例代码位于黑莓开发者网站[https://developer.blackberry.com/html5/apis/blackberry.pim.contacts.html#.invokeContactPicker](https://developer.blackberry.com/html5/apis/blackberry.pim.contacts.html#.invokeContactPicker)，但这里是调用单个选择卡的重要片段（您可以调用单个、多个和属性选择）：

```
function onCancel() {
    alert("User pressed cancel in contact picker.");
}

function onInvoke(error) {
    if (error) {
       alert("Error invoking contact picker: " + error.code);
    } else {
       alert("Contact picker invoked!");
    }
}

function onContactSelected(data) {
   var contact = contacts.getContact(data.contactId);
   if (contact) {
      alert("Contact id #" + contactId + " corresponds to '" + contact.name.givenName + " " + contact.name.familyName +"'.");
   } else {
      alert("There is no contact with id: " + contactId);
   }

}

function onContactsSelected(data) {
    alert("Total # contacts selected: " + data.contactIds.length);
}
function invokeContactPickerSingle() {
    contacts.invokeContactPicker({
        mode: ContactPickerOptions.MODE_SINGLE,
        fields: ["phoneNumbers"]
    }, onContactSelected, onCancel, onInvoke);
} 
```

要收集联系人并直接处理它们，请使用[blackberry.pim.contacts.find](https://developer.blackberry.com/html5/apis/blackberry.pim.contacts.html#.find) API。完整的示例代码在黑莓网站上，这里：[https](https://developer.blackberry.com/html5/apis/blackberry.pim.contacts.html#.find) ://developer.blackberry.com/html5/apis/blackberry.pim.contacts.html#.find但下面是相关代码的片段：

```
function listAllContacts() {
    var sort = [{
             "fieldName": ContactFindOptions.SORT_FIELD_FAMILY_NAME,
             "desc": false
        }, {
             "fieldName": ContactFindOptions.SORT_FIELD_GIVEN_NAME,
             "desc": true
        }],
        // no filter - return all contacts
        findOptions = { 
             // sort contacts first by family name (desc), then by given name (asc)
             sort: sort,  
             limit: -1 // limit - all contacts returned
        };
    contacts.find(["name"], findOptions, onFindSuccess, onFindError);
}
function onFindSuccess(results) {
    console.log("Found " + results.length + " contacts in total");
}

function onFindError(error) {
    console.log("Error: " + error.code);
} 
```

让我知道这是否有帮助！

# java - 从内存中删除 ArrayList 对象

> ID：14016446
> 
> 赞同：3
> 
> 时间：2012-12-24T02:34:25.567
> 
> 标签：java

我有一堆对象`ArrayList`，如果我打电话`ArrayList.remove(object)`我需要做任何其他事情来从内存中删除对象吗？我正在以相当快的速度从这个列表中添加和删除对象，所以如果它没有从内存中删除，它将开始占用空间并开始减慢游戏速度。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-24T02:38:28.703

**-**当您调用时`ArrayList.remove(object)`，您只需从`List` **Not from the Memory**中删除对象。

**-**这将取决于`Garbage Collector`决定何时从堆中删除对象，在正常情况下，它的对象已准备好进行垃圾回收，因为它**不再引用它。**

**-**有一个经典示例说明为什么**不应使用**`String`Java 中的对象来存储密码，而应使用该对象。**`char[]`**

 **看这个链接...

[为什么 char[] 优于 String 的密码？](https://stackoverflow.com/questions/8881291/why-is-char-preferred-over-string-for-passwords/8881376#8881376)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-24T04:04:49.477

if you chew through the heap quick enough, you can nudge the gc along with some jvm args ... we have an app that handles billions of operations a day and have tuned it heavily with the [ergonomic gc settings](http://docs.oracle.com/javase/1.5.0/docs/guide/vm/gc-ergonomics.html) I'd encourage you to play with the adaptive size policy, and the max pause setting primarily. Run the program with a profiler exercising the arraylist as you normally would for a while (several minutes) and see how the ambient state of the various heap generations looks. You may end up having to also tweak the [memory allocations to generations](https://stackoverflow.com/questions/2129044/java-heap-terminology-young-old-and-permanent-generations).

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-24T02:37:40.523

Java 进行自动垃圾收集。所以一旦一个对象不再被引用，它就**可以**被删除，但这并不意味着它会被删除。垃圾收集是自动的，您可以通过调用 System.gc() 来要求它完成，但这只是运行它的建议。

[http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/System.html#gc%28%29](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/System.html#gc%28%29)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-24T02:37:43.790

不，您不必做任何其他事情，只要那是引用该对象的唯一地方。欢迎来到垃圾收集语言的乐趣！当 Java 决定需要回收一些内存时，它会清理旧的、未引用的对象。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-24T02:38:58.097

ArrayList.remove 从数组中删除对象，然后如果该对象没有被任何其他对象引用，GC 将删除该对象。**

# android-pay - 有人知道如何获取谷歌钱包的商家密钥吗？

> ID：14016454
> 
> 赞同：0
> 
> 时间：2012-12-24T02:35:59.607
> 
> 标签：android-pay

有人知道如何获取goole钱包的商家密钥吗？

支持表明我应该在设置中有一个集成菜单，但该菜单未显示

[http://support.google.com/checkout/sell/bin/answer.py?hl=en&answer=42963](http://support.google.com/checkout/sell/bin/answer.py?hl=en&answer=42963)

谢谢

大卫。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T14:47:36.293

AFAIK，`merchant key`仅与“旧版”Google Checkout 相关 - 回复：您的帐户必须是用于网站的 Google 电子钱包（在您的网站上出售的产品/服务）。

您拥有的`merchant key`支持链接中引用的内容（仅用于）*该特定 API*。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-23T03:24:25.830

Google 电子钱包集成设置页面位于[https://checkout.google.com/inapp/merchant/settings.html](https://checkout.google.com/inapp/merchant/settings.html)。

出于某种原因，无法从 Google 电子钱包商家界面中的任何位置访问此页面。

# java - 从python调用java类

> ID：14016459
> 
> 赞同：0
> 
> 时间：2012-12-24T02:37:07.837
> 
> 标签：java, python

> **可能重复：**
> [从 Python 调用 Java](https://stackoverflow.com/questions/3652554/calling-java-from-python)

我对java不太熟悉..但我想在python中使用java库（第3方）。？假设我有三个库。

```
foo.java,bar.java,foobar.java 
```

然后..他们定义类，并且他们的构造函数每个都接受一个变量

```
int foo1, int bar1 respectively

Now.. foo.java  and bar.java imports foobar.java 
```

所以基本上.. 我想与 foo.java 和 bar.java 交互.. 然后它们与其他 java 文件交互..

我该如何解决这个问题。我也研究了其他 stackoverflow 问题，但其中大多数对我来说都是非常高级的问题，而我觉得我有一个非常简单的需求。任何指针谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-24T02:45:54.643

你可以试试

1) [Py4J](http://py4j.sourceforge.net/index.html)或 2) [JPYPE](http://jpype.sourceforge.net/)

# php - 我应该将我的 $mysqli 变量传递给每个函数吗？

> ID：14016462
> 
> 赞同：9
> 
> 时间：2012-12-24T02:37:39.847
> 
> 标签：php, mysql, database, function, mysqli

我在从 mysql_* 传递到 mysqli 面向对象时遇到了一点问题。

我的**index.php**文件的结构类似于包括两个文件：

```
include('connect.php');
include('function.php'); 
```

connect.php 文件包含：

```
<?php
$mysqli = new mysqli("localhost", "root", "test", "test");

if (mysqli_connect_errno($mysqli)) {
    printf("Connection failed: %s\n", mysqli_connect_error());
    exit();
}
?> 
```

在**function.php**文件中有一个名为***showPage***的函数，它不接受任何参数，但使用**$mysqli**连接，如...

```
$result = $mysqli -> query("SELECT * FROM $table ORDER BY ID DESC"); // Seleziono tutto il contenuto della tabella 
```

**如果不将 $mysqli 变量传递给函数，**我无法让它工作，但是当我使用 mysql_* 不推荐使用的函数时，这不是必需的！

我能理解为什么，解决这个问题的最佳方法是什么？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-24T02:57:26.353

用户定义的函数在 PHP 中有自己的变量范围。您需要`$mysqli`作为参数传递给函数，或者使用`global $mysqli`.

[这个确切的问题在“变量范围](http://php.net/manual/en/language.variables.scope.php)”页面上作为示例给出：

> 但是，在用户定义的函数中，引入了本地函数范围。默认情况下，函数内部使用的任何变量都仅限于本地函数范围。**例如，此脚本不会产生任何输出，因为 echo 语句引用了 $a 变量的本地版本，并且尚未在此范围内为其分配值。**您可能会注意到这与 C 语言有点不同，因为 C 中的全局变量自动可用于函数，除非被局部定义特别覆盖。这可能会导致一些问题，因为人们可能会无意中更改全局变量。在 PHP 中，如果要在函数中使用全局变量，则必须在函数中声明它们为全局变量。

```
<?php
$a = 1; /* global scope */ 

function test()
{ 
    echo $a; /* reference to local scope variable */ 
} 

test();
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-24T03:03:05.913

> **如果不将 $mysqli 变量传递给函数，**就无法让它工作，但是当我使用 mysql_* 不推荐使用的函数时，这不是必需的！

这并不正确。即使在旧`mysql_*`函数中，如果您需要指定与*哪个*数据库连接相关，您实际上也必须传递链接标识符，例如：

```
$result = mysql_query($sql, $link); 
```

此外，此示例还显示，您也必须传递`$result`. 如果您确实遗漏了`$link`参数：

```
$result = mysql_query($sql); 
```

mysql 扩展确实在内部查找最后使用的连接。如果没有找到，它将使用 php.ini 中设置的参数创建一个新的。这只是为了让您更好地了解过去为什么以及如何工作。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2014-09-02T06:44:18.670

您也可以使用连接池，值得一[试](https://stackoverflow.com/questions/830707/php-connection-pooling-mysql)。

```
$mysqli = new mysqli('p:localhost', 'username', 'password', 'db_name'); 
```

# c# - 是否需要在客户端机器上安装 sqlite3 才能运行批处理文件？

> ID：14016465
> 
> 赞同：0
> 
> 时间：2012-12-24T02:37:54.913
> 
> 标签：c#, sqlite, batch-file

我想创建一个批处理文件来导入/转储 sqlite 数据库中的数据。我担心的是，如果我的客户只是双击批处理文件而不先安装 sqlite3，这个批处理文件会运行吗？

我会将 sqlite3.exe 包含在与批处理文件和数据库相同的文件夹中。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T08:32:45.270

SQLite 是一个*嵌入式*数据库，这意味着使用它的典型和推荐方式是将其编译到程序中。

该`sqlite3.exe`程序没有任何依赖关系，无需在任何机器上安装即可运行。

# php - 我似乎无法使用 Twitter API 方法提取推文。我哪里出错了？

> ID：14016468
> 
> 赞同：0
> 
> 时间：2012-12-24T02:38:33.167
> 
> 标签：php, twitter

所以我正在测试变量是否返回指定用户的屏幕名称 tweets 的 JSON 数据.. 但它没有返回任何内容，我使用了正确的 get 方法.. 我哪里出错了.. 下面是代码..

```
 <?php
$url= "http://api.twitter.com/1/statuses/user_timeline.json?screen_name=agasaro&count=5";
$results = json_decode(file_get_contents($url));
var_dump($results); 
```

VAR_DUMP 返回这个

```
 Warning: file_get_contents(http://api.twitter.com/1/statuses/user_timeline.json?screen_name=agasaro&count=5) [function.file-get-contents]: failed to open stream: HTTP request failed! HTTP/1.0 400 Bad Request in 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-24T02:45:32.487

好吧，您从未将该请求发送到 twitter 服务器。您所做的只是创建了一个 url 字符串，然后使用`json_decode`了相同的字符串。没有调用 API 函数，因此可以返回一些数据。

在您的浏览器中转到您创建的 url 字符串。您将获得 JSON 输出。

您必须使用 API 函数并将此 url 传递给该函数，以便它返回其他用于`curl`手动向该 url 发出请求并获取数据然后`json_decode`它的东西。

编辑：使用已编辑的问题，我无法重现该错误。它在这里工作正常。看到这个输出。

```
array (size=2)
0 => 
object(stdClass)[2]
  public 'created_at' => string 'Thu Dec 20 11:11:29 +0000 2012' (length=30)
  public 'id' => float 2.8171845961476E+17
  public 'id_str' => string '281718459614760960' (length=18)
  public 'text' => string 'RPFâ€™S 25-YEAR JOURNEY - The New Times Rwanda http://t.co/BvEuZz06 via @NewTimesRwanda' (length=87)
  public 'source' => string '<a href="http://twitter.com/tweetbutton" rel="nofollow">Tweet Button</a>' (length=72)
  public 'truncated' => boolean false
  public 'in_reply_to_status_id' => null
  public 'in_reply_to_status_id_str' => null
  public 'in_reply_to_user_id' => null
  public 'in_reply_to_user_id_str' => null
  public 'in_reply_to_screen_name' => null
  public 'user' => 
    object(stdClass)[3]
      public 'id' => int 17686705
      public 'id_str' => string '17686705' (length=8)
      public 'name' => string 'Angelica Gasaro' (length=15)
      public 'screen_name' => string 'agasaro' (length=7)
      public 'location' => string 'SW florida' (length=10)
      public 'url' => null
      public 'description' => string '' (length=0)
      public 'protected' => boolean false
      public 'followers_count' => int 63
      public 'friends_count' => int 43
      public 'listed_count' => int 0
      public 'created_at' => string 'Thu Nov 27 19:42:59 +0000 2008' (length=30)
      public 'favourites_count' => int 5
      public 'utc_offset' => int -18000
      public 'time_zone' => string 'Eastern Time (US & Canada)' (length=26)
      public 'geo_enabled' => boolean true
      public 'verified' => boolean false
      public 'statuses_count' => int 70
      public 'lang' => string 'en' (length=2)
      public 'contributors_enabled' => boolean false
      public 'is_translator' => boolean false
      public 'profile_background_color' => string 'B2DFDA' (length=6)
      public 'profile_background_image_url' => string 'http://a0.twimg.com/images/themes/theme13/bg.gif' (length=48)
      public 'profile_background_image_url_https' => string 'https://si0.twimg.com/images/themes/theme13/bg.gif' (length=50)
      public 'profile_background_tile' => boolean false
      public 'profile_image_url' => string 'http://a0.twimg.com/profile_images/2849801480/1d045f13f7b8d248516900a1960be54c_normal.jpeg' (length=90)
      public 'profile_image_url_https' => string 'https://si0.twimg.com/profile_images/2849801480/1d045f13f7b8d248516900a1960be54c_normal.jpeg' (length=92)
      public 'profile_banner_url' => string 'https://si0.twimg.com/profile_banners/17686705/1352931714' (length=57)
      public 'profile_link_color' => string '93A644' (length=6)
      public 'profile_sidebar_border_color' => string 'EEEEEE' (length=6)
      public 'profile_sidebar_fill_color' => string 'FFFFFF' (length=6)
      public 'profile_text_color' => string '333333' (length=6)
      public 'profile_use_background_image' => boolean true
      public 'default_profile' => boolean false
      public 'default_profile_image' => boolean false
      public 'following' => null
      public 'follow_request_sent' => null
      public 'notifications' => null
  public 'geo' => null
  public 'coordinates' => null
  public 'place' => null
  public 'contributors' => null
  public 'retweet_count' => int 0
  public 'favorited' => boolean false
  public 'retweeted' => boolean false
  public 'possibly_sensitive' => boolean false
1 => 
object(stdClass)[4]
  public 'created_at' => string 'Sun Dec 09 15:19:29 +0000 2012' (length=30)
  public 'id' => float 2.777946036069E+17
  public 'id_str' => string '277794603606896640' (length=18)
  public 'text' => string 'â€œ@RichardDreyfuss: The Island Where People Forget to Die http://t.co/rhN3s5E9â€' (length=82)
  public 'source' => string '<a href="http://twitter.com/download/iphone" rel="nofollow">Twitter for iPhone</a>' (length=82)
  public 'truncated' => boolean false
  public 'in_reply_to_status_id' => null
  public 'in_reply_to_status_id_str' => null
  public 'in_reply_to_user_id' => null
  public 'in_reply_to_user_id_str' => null
  public 'in_reply_to_screen_name' => null
  public 'user' => 
    object(stdClass)[5]
      public 'id' => int 17686705
      public 'id_str' => string '17686705' (length=8)
      public 'name' => string 'Angelica Gasaro' (length=15)
      public 'screen_name' => string 'agasaro' (length=7)
      public 'location' => string 'SW florida' (length=10)
      public 'url' => null
      public 'description' => string '' (length=0)
      public 'protected' => boolean false
      public 'followers_count' => int 63
      public 'friends_count' => int 43
      public 'listed_count' => int 0
      public 'created_at' => string 'Thu Nov 27 19:42:59 +0000 2008' (length=30)
      public 'favourites_count' => int 5
      public 'utc_offset' => int -18000
      public 'time_zone' => string 'Eastern Time (US & Canada)' (length=26)
      public 'geo_enabled' => boolean true
      public 'verified' => boolean false
      public 'statuses_count' => int 70
      public 'lang' => string 'en' (length=2)
      public 'contributors_enabled' => boolean false
      public 'is_translator' => boolean false
      public 'profile_background_color' => string 'B2DFDA' (length=6)
      public 'profile_background_image_url' => string 'http://a0.twimg.com/images/themes/theme13/bg.gif' (length=48)
      public 'profile_background_image_url_https' => string 'https://si0.twimg.com/images/themes/theme13/bg.gif' (length=50)
      public 'profile_background_tile' => boolean false
      public 'profile_image_url' => string 'http://a0.twimg.com/profile_images/2849801480/1d045f13f7b8d248516900a1960be54c_normal.jpeg' (length=90)
      public 'profile_image_url_https' => string 'https://si0.twimg.com/profile_images/2849801480/1d045f13f7b8d248516900a1960be54c_normal.jpeg' (length=92)
      public 'profile_banner_url' => string 'https://si0.twimg.com/profile_banners/17686705/1352931714' (length=57)
      public 'profile_link_color' => string '93A644' (length=6)
      public 'profile_sidebar_border_color' => string 'EEEEEE' (length=6)
      public 'profile_sidebar_fill_color' => string 'FFFFFF' (length=6)
      public 'profile_text_color' => string '333333' (length=6)
      public 'profile_use_background_image' => boolean true
      public 'default_profile' => boolean false
      public 'default_profile_image' => boolean false
      public 'following' => null
      public 'follow_request_sent' => null
      public 'notifications' => null
  public 'geo' => null
  public 'coordinates' => null
  public 'place' => null
  public 'contributors' => null
  public 'retweet_count' => int 0
  public 'favorited' => boolean false
  public 'retweeted' => boolean false
  public 'possibly_sensitive' => boolean false 
```

注意：检查链接 [file_get_contents throws 400 Bad Request error PHP](https://stackoverflow.com/questions/8482782/file-get-contents-throws-400-bad-request-error-php) & [https://dev.twitter.com/discussions/678](https://dev.twitter.com/discussions/678)

可能您已经达到了当天的 api 限制，这就是他们阻止您并向您发送 400 响应的原因。

# android - 如何在 Maven 上解禁项目

> ID：14016470
> 
> 赞同：16
> 
> 时间：2012-12-24T02:38:58.540
> 
> 标签：android, maven

我正在尝试将文件安装到我的本地 Maven 存储库（按照[https://gist.github.com/4211293](https://gist.github.com/4211293)中的步骤），但是，我总是收到以下错误消息：

```
 PS C:\Android\android-sdk\extras\google\google_play_services\libproject\google-play-services_lib> mvn install:install-file  -DgroupId=com.google.android.gms -DartifactId=google-play-services-jar -Dversion=4 -Dpackaging=jar -Dfile=.\libs\google-play-services.jar
    [INFO] Scanning for projects...
    [INFO]
    [INFO] ------------------------------------------------------------------------
    [INFO] Building google-play-services 4
    [INFO] ------------------------------------------------------------------------
    [INFO]
    [INFO] --- maven-install-plugin:2.4:install-file (default-cli) @ google-play-services ---
    [INFO] Installing C:\Android\android-sdk\extras\google\google_play_services\libproject\google-play-services_lib to C:\Users\Juliano\.m2\repository\com\google-play-services-jar\4\google-play-services-jar-4.jar
    [INFO]
    [INFO] ------------------------------------------------------------------------
    [INFO] Skipping google-play-services
    [INFO] This project has been banned from the build due to previous failures.
    [INFO] ------------------------------------------------------------------------
    [INFO] ------------------------------------------------------------------------
    [INFO] BUILD FAILURE
    [INFO] ------------------------------------------------------------------------
    [INFO] Total time: 1.534s
    [INFO] Finished at: Mon Dec 24 00:05:04 BRST 2012
    [INFO] Final Memory: 6M/89M
    [INFO] ------------------------------------------------------------------------
    [ERROR] Failed to execute goal org.apache.maven.plugins:maven-install-plugin:2.4:install-file (default-cli) on project google-play-services: Error installing artifact 'com:google-play-services-jar:jar': Failed to install artifact com:google-play-services-jar:jar:4: C:\Android\android-sdk\extras\google\google_play_services\libproject\google-play-services_lib
    (Access is denied) -> [Help 1]
    [ERROR]
    [ERROR] To see the full stack trace of the errors, re-run Maven with the -e switch.
    [ERROR] Re-run Maven using the -X switch to enable full debug logging.
    [ERROR]
    [ERROR] For more information about the errors and possible solutions, please read the following articles:
    [ERROR] [Help 1] http://cwiki.apache.org/confluence/display/MAVEN/MojoExecutionException 
```

我不确定这个错误是否是因为 google-play-services 被跳过了，如果你认为是这样，请帮助解禁它。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-24T03:44:01.407

据我所知，一个项目只有在它所依赖的其他模块未能构建时才会以这种方式被“禁止”。这就是“以前的失败”的含义。您需要回到第一个故障并修复它。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-12-24T09:44:06.093

问题解决了。该错误与 -Dfile 参数有关，因为它似乎不接受相对路径。

PS: Another problem I had was that I've been using PowerShell to run maven commands but there's some kind of incompatibility.

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-06-14T08:46:02.633

This error msg appears in maven, when you try to deploy the same release-version (not *-SNAPSHOT) to repository multiple times. That is generally forbidden, to prevent unpredictable builds. If you want to deploy the same version multiple times it needs to be -SNAPSHOT version.

I guess the same thing happens in your case, when you do install-file and the file already exists and is not a -SNAPSHOT version. Maven then concludes the install will fail again on any repeated attempts and therefore marks it as "banned".

Solution then, is to change artifact version to a -SNAPSHOT version or increase to next release-version - then build again.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-01-27T08:27:49.583

Problem:- If you are deploying your artifact with **maven deploy** plugin using "deploy-file" goal and error "this project has been banned from the build due to previous failures" occurs then following below is the solution.

Solution:- 1) make sure all required parameters are valid. so check for white space.

2) -Dfile=target/artifactid is generated and found at correct place.

3) Durl=[http://localhost:8081/nexus/repo](http://localhost:8081/nexus/repo) have correct access.

Cheers

# c# - 不包含带 2 个参数的构造函数

> ID：14016475
> 
> 赞同：0
> 
> 时间：2012-12-24T02:40:15.433
> 
> 标签：c#, .net, asp.net-mvc, compiler-errors

我不确定这里发生了什么。该模型是从数据库中自动生成的，我看不到任何明显的东西（请注意，现在是英国时间凌晨 2.30 点，所以也许我睡着了）。我收到错误消息：ActiveCitizenSystemMimic.Models.ActiveCitizenProperties 不包含采用 2 个参数的构造函数。

模型：

```
namespace ActiveCitizenSystemMimic.Models
{
    using System;
    using System.Collections.Generic;

    public partial class ActiveCitizenProperties
    {
        public int FK_ActiveCitizen { get; set; }
        public int FK_PropertyType { get; set; }
    }
} 
```

控制器：

```
List<ActiveCitizenProperties> activeCitizenProperties = new List<ActiveCitizenProperties>();
activeCitizenProperties.Add(new ActiveCitizenProperties(1, 2)); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-24T02:43:29.270

错误意味着它所说的：ActiveCitizenProperties 构造函数不接受两个参数。在给定的代码中，类中根本没有定义构造函数。

您可以使用：

```
new ActiveCitizenProperties { FK_ActiveCitizen = 1, FK_PropertyType = 2 }; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-24T02:44:07.357

您可以将代码替换为：

```
List<ActiveCitizenProperties> activeCitizenProperties = new List<ActiveCitizenProperties>();
activeCitizenProperties.Add(new ActiveCitizenProperties(){ FK_ActiveCitizen = 1, FK_PropertyType = 2 }); 
```

您的“自动生成”类显然不包含带有 2 个参数的构造函数。如果有，它会是这样的：

```
namespace ActiveCitizenSystemMimic.Models
{
    using System;
    using System.Collections.Generic;

    public partial class ActiveCitizenProperties
    {
        public int FK_ActiveCitizen { get; set; }
        public int FK_PropertyType { get; set; }

        public ActiveCitizenProperties(int a, int b)
        {
            this.FK_ActiveCitizen = a;
            this.FK_PropertyType = b;
        }
    }
} 
```

# javascript - Node中对象数组中的IndexOf

> ID：14016476
> 
> 赞同：2
> 
> 时间：2012-12-24T02:40:20.457
> 
> 标签：javascript, node.js

我不确定在对象数组中使用 indexOf

不工作的代码是：

```
if (res.locals.company.companies.indexOf(req.query.companyId) >= 0) return next() 
```

if 条件将始终返回 false。

我也在控制台中测试过，实际上是错误的：

```
>> var zio = { __v: 1,
  _id: '50bc0238049a1ff10b000001',
  companies: 
   [ { _id: '50bc01938f164ee80b000001', name: 'Test' },
     { _id: '50bc01ac4e860ee90b000001', name: 'zio' } ],
}

>> zio.companies.indexOf("50bc01938f164ee80b000001")
-1 
```

而它应该是真的。

我应该使用任何神秘的下划线实用程序吗？

**更新/澄清：**我的目的只是检查 50bc01938f164ee80b000001 是否存在于其中一个 id 中，我不需要知道它实际上在哪里。这是非常关键的性能！

Nodejs 解决方案或技巧将是惊人的！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-24T02:45:26.980

这没有错。该*Array*不包含这样的*String*，而仅包含两个*Object 引用*。因此，结果是正确的`-1`。

要从包含搜索到的*字符串值的**对象引用*中获取索引，我们可以这样

 *```
var index;
zio.companies.some(function( obj, idx ) {
    if( obj._id === '50bc01938f164ee80b000001' ) {
        index = idx;
        return true;
    }
});

console.log('index is: ', index); 
```

* * *

根据您的 ninja 编辑，如果您只想知道持有特定*id*的对象引用是否包含在该数组中，请像这样使用它

```
var check = zio.companies.filter(function( obj ) {
    return obj._id === '50bc01938f164ee80b000001';
});

if( check.length ) {
    console.log('yep');
} else {
    console.log('nope');
} 
```

* * *

第二次编辑：如果您真的并且仅在性能之后，您可能不希望在任何搜索中都有任何*函数调用开销。*我会使用类似的东西

```
function inObject(arr, search) {
    var len = arr.length;
    while( len-- ) {
        if(arr[len]._id === search)
           return true;
    }
}

if( inObject( zio.companies, 'AAA' ) ) {
} 
```

该代码比此处提供的任何代码段都高出几个数量级。[看这里](http://jsperf.com/json-stringify-vs-prototype-filter/2)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-24T02:45:32.270

您需要遍历元素并检查是否`_id`相等。

[indexOf](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/indexOf)检查严格相等，这些对象当然不等于那个字符串。（这与 . 的逻辑相同`"hello" === {foo: "hello"}`。那将永远是错误的。）

我敢肯定 node 有一些花哨的方法可以做到这一点，但裸 JS 方法是：

```
var i,
    arr = [{foo: 'bar'}, {foo: 'baz'}],
    idx = -1;
for (i = 0; i < arr.length; ++i) {
    if (arr[i].foo === 'bar') {
        idx = i;
        break;
    }
} 
```

你也可以很容易地把它变成一个函数：

```
function indexOf(arr, pred) {
    for (var i = 0; i < arr.length; ++i) {
        if (pred(arr)) {
            return i;
        }
    }
    return -1;
} 
```

虽然这会给您带来更多冗长的使用（并且性能会更差），但如果您发现自己需要经常这样做，它也可能会更灵活一些。

```
console.log(indexOf(arr, function(elem) { return elem.foo === 'bar'; }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-24T02:48:31.120

您`companies`似乎是一个对象数组（不是 ids），它具有`Id`属性之一。`indexOf`函数用于查找匹配元素的索引。**由于您传递了一个 ID 值来搜索索引，因此它没有将它作为数组中的元素找到，因此返回 false。**

要解决此问题，您有两种选择：

1.  迭代公司元素比较 ID 值，如果匹配则返回 true，否则返回 false。

2.  在函数中使用具有所需 id 的对象作为参数`indexOf`。如果值大于 -1，则返回 true，否则返回 false。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-24T02:48:36.567

`.indexOf`正在返回正确的输出；您的数组没有包含该字符串的元素。实际上，它是一个包含两个对象字面量的数组。您不需要`.indexOf`对象，而是我们必须创建自己的函数：

```
 var inObject = function( object, val ) {

     for (var i in object) { if ( object.hasOwnProperty(i) ) {

             if ( obj[i] === val ) {

                 return true;
             }

         }

     }
     return false;
 };

>>> inObject( zio.companies[0], '50bc01938f164ee80b000001' );
    : true 
```*

# javascript - 如何将 div 用作网格？

> ID：14016478
> 
> 赞同：2
> 
> 时间：2012-12-24T02:40:38.553
> 
> 标签：javascript, html, css, responsive-design

好的，所以我正在制作一个网站来显示数据库中的最后八个条目并以网格格式显示它们，但是网格没有正确显示，它们显示如下： [1](https://i.stack.imgur.com/hrDGM.png)：![在此处输入图像描述](../Images/a701dff5c77f769c8d2d8e9fc22c99c0.png)

但我希望它们显示类似于：![在此处输入图像描述](../Images/c1418ab315be5260b0c313d8851a9106.png)

我想在图纸上多画一列对不起。并且无论什么保持在应有的列和行中，但也位于其上方的下方。代码在我的 jsfiddle 上：http: [//jsfiddle.net/PGdMd/](http://jsfiddle.net/PGdMd/)

此外，css 需要响应，因为每个 div 的内容文本将根据在 mySQL 数据库中输入的数据而变化。

```
<h1>Sorry it made me put this here</h1> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T02:51:33.387

阅读相关问题，您似乎想要[jQuery 的 masonary](http://masonry.desandro.com/)。要么那个，要么[同位素](http://isotope.metafizzy.co/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-24T02:51:03.277

看看砌体。这是一个 jQuery 插件，它可以做你想做的事情以及更多。

[http://osvaldas.info/responsive-jquery-masonry-or-pinterest-style-layout](http://osvaldas.info/responsive-jquery-masonry-or-pinterest-style-layout)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-24T02:51:48.143

您是否考虑过一些可用于轻松实现布局的 css 框架？Blueprint、960 Grid、Twitter Bootstrap、foundation 等。有很多可用的 3 列实现，不仅可以简化此操作，而且总体上可以简化您的项目。

# c - 这段代码中的段错误来自哪里？

> ID：14016483
> 
> 赞同：0
> 
> 时间：2012-12-24T02:42:29.533
> 
> 标签：c, segmentation-fault

> **可能重复：**
> [为什么 char* 会导致未定义的行为，而 char[] 不会？](https://stackoverflow.com/questions/8302290/why-does-char-cause-undefined-behaviour-while-char-doesnt)

请看下面的代码

```
int main (int argc, char* argv[])
{   
    char* s = "Hello world!";
    s[0] = 'X';
    return 0;
} 
```

这段代码中的段错误来自哪里？

**更新：** 相反，下面的代码没有给出段错误，为什么？

```
int main (int argc, char* argv[])
{   
    char s[] = "Hello world!";
    s[0] = 'X';
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-24T02:44:11.580

`"Hello world!"`是一个静态字符串，你不能改变它。

# random - 使用 C# 实现随机决策森林

> ID：14016487
> 
> 赞同：0
> 
> 时间：2012-12-24T02:43:31.923
> 
> 标签：random, decision-tree, random-forest, alglib

您好我正在尝试使用 ALGLIB 来计算 rdf。不幸的是，我的每个训练样本都有两个以上的变量。我应该使用下面的函数，但我的训练数据有 7 个变量。我认为 ALGLIB 的实现仅针对 2 个变量。我怎样才能将它用于 7 个可变训练样本？

```
public static void alglib.dfbuildrandomdecisionforestx1(
double[,] xy,
int npoints,
int nvars,
int nclasses,
int ntrees,
int nrndvars,
double r,
out int info,
out decisionforest df,
out dfreport rep) 
```

提前致谢。如果有另一个库适合我的训练集并且实现了我可以使用的随机决策森林，我不会坚持使用 ALGLIB。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-28T05:15:17.520

您应该将所有训练样本放入大小为 [npoints, nvars+1] 的二维数组中，其中 npoints = 训练示例数，nvars = 变量数（在您的情况下为 7），最后一列（+1）用于类标签。

您可以在函数定义附近找到有关参数的更多信息。

有关数据集格式的更多信息，请阅读此 ->[数据集格式](http://www.alglib.net/dataanalysis/generalprinciples.php)

# powershell - 使用 VBscript 隐藏 Powershell 窗口：-file 文件路径中的空格

> ID：14016488
> 
> 赞同：3
> 
> 时间：2012-12-24T02:43:37.213
> 
> 标签：powershell, vbscript, window, hide

用户 JPBlanc 和其他人已经给出了一个很好的解决方案来解决这样的问题：

```
Set Args = Wscript.Arguments
'MsgBox  "Chemin LDAP: " & Args(0)
'MsgBox  "Classe: " & Args(1)

Set objShell = CreateObject("Wscript.Shell")
objShell.Run "c:\Windows\System32\WindowsPowerShell\v1.0\powershell.exe -nologo -Noninteractive -file c:\SlxRH\RhModif.ps1 " & chr(34) & Args(0) & chr(34) , 0 
```

我已经测试了这样的解决方案，它工作正常。但是，我的问题涉及标识为“-file”选项的参数的文件路径中包含空格的情况；例如，如果上面的代码示例的文件路径为：

> c:\Slx RH\RhModif.PS1

观察文件路径中的空白。问题是：如何正确转义文件路径。我还没有找到一种方法来做到这一点（让它发挥作用）。

我在这个站点和一般的“interweb”上进行了搜索，并且了解到（我认为）有两个级别的脚本解释正在进行：VBscript 和 Wscript。另一个很好的例子出现在这里（链接到具有此标题的完整页面）：

[在 PowerShell 中使用 WinForm GUI 运行计划任务](http://www.leporelo.eu/blog.aspx?id=run-scheduled-tasks-with-winform-gui-in-powershell)

```
Dim objShell
Set objShell=CreateObject("WScript.Shell")
strExpression="get-date | add-content c:\temp\test.txt"
strCMD="powershell -sta -noProfile -NonInteractive  -nologo -command " & Chr(34) & "&{" & strExpression &"}" & Chr(34) 
objShell.Run strCMD,0 
```

我已经对此进行了测试，它对我有用。虽然不使用“-file”选项，但此示例给出（您会想到的）将是为 strCMD 变量放置“-command”或“-file”输入的通用方法。但是，当我使用以下代码时，它不起作用：

```
Dim objShell
Set objShell=CreateObject("WScript.Shell")

strExpression="C:\aP_RDB\Set Up\SimpleInsert.PS1"
strCMD="powershell -noprofile -executionpolicy Unrestricted -NonInteractive -file " & Chr(34) & "&{" & strExpression &"}" & Chr(34) 

objShell.Run strCMD,0 
```

在上面的示例中，我基本上复制了上面的代码参考（以及列出的链接），将 PS 命令替换为变量 strExpression 的文件路径（包括空格），并通过替换“-command”更新了 strCMD 定义" 参数与 "-file" 参数。但是，错误消息指向无法识别的参数“c:\aP_RDB\Set”，即它*看不到*整个路径“C:\aP_RDB\Set Up\SimpleInsert.PS1”。似乎引号（或其他东西）的转义不起作用......更好地说，我没有正确地做。

任何深思熟虑的建议将不胜感激。仅供参考：我已经尝试过 Powershell 中的*-WindowStyle Hidden*选项；我喜欢许多人发现这不是跨 Windows 平台的一致方法（更具体地说，对我来说：我无法让它工作）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T08:09:14.873

感谢您的参考，这里有两种方法可以在名称中使用空格来启动脚本：

1) 使用双" ("")

```
set Args = Wscript.Arguments
MsgBox "Chemin LDAP: " & Args(0)
'MsgBox "Classe: " & Args(1)

Set objShell = CreateObject("Wscript.Shell")
objShell.Run "c:\Windows\System32\WindowsPowerShell\v1.0\powershell.exe -nologo -Noninteractive -file ""c:\temp\test arg.ps1"" " & chr(34) & Args(0) & chr(34) , 0 
```

2) 包括在没有控制台的情况下编写自己的 PowerShell.exe，正如我在本文末尾所解释的[“”PowerShell.exe“ne sait pas démarrer sans afficher une fenêtre”](http://www.silogix.fr/Blog-Silogix/powershell-ne-sait-pas-demarrer-sans-afficher-une-fenetre.aspx)（对不起，法语）

# c# - 带 BindingList 的 DataGridView 不工作

> ID：14016489
> 
> 赞同：1
> 
> 时间：2012-12-24T02:43:39.057
> 
> 标签：c#, winforms, outlook, vsto

我正在尝试将绑定列表绑定到数据网格，并将 autogeneratecolumns 设置为 true。但是没有显示任何列，我想知道为什么。

代码片段：

```
datagridResults.AutoGenerateColumns = true;
List<MailItem> mailItems = new List<MailItem>();

//readPst() returns a List<MailItem> populated with MailItems from the specified PST.
mailItems = readPst(txtBoxPST.Text, "Archive Folders");
BindingList<MailItem> bl = new BindingList<MailItem>(mailItems);

datagridResults.DataSource = bl;
datagridResults.Refresh(); 
```

数据网格最终为空白。我确信 BindingList 包含 MailItems，如果我将其从 BindingList 的绑定更改为 bl 中的 Foreach MailItem m ...手动添加行它工作正常。所以我最好的猜测是 AutoGenerateColumns 不适用于 MailItem 类？我不知道为什么，或者解决它的最佳方法。

MailItem 类是 Microsoft.Office.Interop.Outlook.MailItem 类。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T05:06:45.960

代替

```
BindingList<MailItem> mailItems 
```

至

```
MailItem[] mailItems 
```

即将列表转换为数组并重试

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-24T02:47:27.900

~~只需添加`ToList()`，不需要刷新`DataGridView`~~

~~datagridResults.DataSource = bl.Tolist();~~

**更新**

`MailItems`这是如何阅读`OutLook`

```
public static void DisplayInbox(ApplicationClass o)
{
  // Get items in my inbox. 
  NameSpace outlookNS = o.GetNamespace("MAPI");
  MAPIFolder inboxFolder 
    = outlookNS.GetDefaultFolder(OlDefaultFolders.olFolderInbox);
  // Print out some basic info. 
  Console.WriteLine("You have {0} e-mails.", 
    inboxFolder.Items.Count);
  Console.WriteLine();
  foreach(object obj in inboxFolder.Items)
  {
    MailItem item = obj as MailItem;
    if(item != null)
    {
      Console.WriteLine("-> Received: {0}", 
        item.ReceivedTime.ToString());
      Console.WriteLine("-> Sender: {0}", item.SenderName);
      Console.WriteLine("-> Subject: {0}", item.Subject);
      Console.WriteLine();
    }
  }
} 
```

资料来源：[使用 C# 编程 Outlook 2003 简介](http://msdn.microsoft.com/en-us/library/aa289167%28v=vs.71%29.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-24T02:52:04.060

也许它是您设置的 DataGridView 属性。尝试删除 Form 上的 DataGridView 并拖放一个新的，只设置它的 name 属性。然后试试这个有效的代码：

```
public class MailItems
{
    public string name { get; set; }
    public string address { get; set; }
}

List<MailItems> items = new List<MailItems>();
public Form1()
{
    InitializeComponent();
    items.Add(new MailItems(){address = "1 Some St",name = "Kiklion"});
}

private void button1_Click(object sender, EventArgs e)
{
    datagridResults.AutoGenerateColumns = true;
    BindingList<MailItems> gridItems = new BindingList<MailItems>(items);
    dataGridView1.DataSource = gridItems;
} 
```

您的代码应该可以工作：

```
datagridResults.AutoGenerateColumns = true;
BindingList<MailItem> mailItems =  new BindingList<MailItems>(readPst(txtBoxPST.Text, "Archive Folders"));
datagridResults.DataSource = mailItems; 
```

**编辑**

它不能在 Microsoft.Office.Interop.Outlook.MailItem 类上使用 BindingList。我建议您不要将 DataGridView.Datasource 直接绑定到 Outlook Interop 类，正如我所展示的那样抽象该类，并使用自定义代码更新 Outlook 邮件项。

# eclipse - Eclipse RCP propertychangelistener 的用法，正确的方法？

> ID：14016501
> 
> 赞同：1
> 
> 时间：2012-12-24T02:46:00.527
> 
> 标签：eclipse, rcp, propertychangelistener

我正在使用编辑器来更改 emf 对象列表。我想要的是每次修改这些 emf 对象时，我的编辑器都会刷新以反映更改。

我之前尝试过的方法是在所述 emf 对象上使用一个包装器对象（因为我不知道如何或应该如何修改 emf 生成的源代码）以包含需要刷新的编辑器。更改将在该包装对象之上进行，并且将在 emf 对象更改后调度 propertychangelistener。然而，这个解决方案非常难看，因为：

*   每个对象都需要获取对编辑器本身的引用，引入引用依赖
*   拥有一个像这样的单独覆盖对象会使维护代码变得复杂

正确的方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-24T16:43:07.387

我想添加绑定框架来处理模型对象的变化

您可能希望以以下教程为起点。

[http://www.vogella.com/articles/EclipseDataBinding/article.html](http://www.vogella.com/articles/EclipseDataBinding/article.html)

# javascript - 从 json 获取数据并用作链接

> ID：14016502
> 
> 赞同：3
> 
> 时间：2012-12-24T02:46:00.917
> 
> 标签：javascript, html

`data.query.results.item[0].link`将返回一个链接。现在有什么方法可以将其用作`<a></a>`标签内的链接吗？

```
var url = 'http://query.yahooapis.com/v1/public/yql?q=select%20*from%20feed%20where%20url%3D%22http%3A%2F%2Fwww.amaderbarisal.com%2Ffeed%22&format=json&diagnostics=true&callback?';
$.getJSON(url,function(data){

     data.query.results.item[0].link
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-24T02:53:54.993

HTML：

```
<a id="somelink" href="#">click here</a> 
```

JS：

```
$.getJSON(url,function(data){
   $("#somelink").attr('href', data.query.results.item[0].link);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-24T02:54:59.083

您可以执行以下操作：

```
var url = 'http://query.yahooapis.com/v1/public/yql?q=select%20*from%20feed%20where%20url%3D%22http%3A%2F%2Fwww.amaderbarisal.com%2Ffeed%22&format=json&diagnostics=true&callback?';
$.getJSON(url,function(data){
  var a = $('<a>').attr('href', data.query.results.item[0].link);
  $('#content').append(a);
} 
```

这会将链接附加到 id 为“content”的 div。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-24T02:55:26.223

根据锚点是否已经存在或需要创建，您可以使用：

```
 //already exist
    document.getElementById("somea").href="http://mysite.com";
    document.getElementById("somea").innerHTML="text of the link";

    //create one
    var myA=document.createElement("a");
    myA.innerHTML="text of the link";
    myA.href="http://mysite.com";
    document.getElementById("somediv").appendChild(myA); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-24T02:56:07.713

我不确定您是要求通过链接触发 getJSON 还是使用响应来构建锚标记。如果您的意思是后者，您使用的是 jquery，为什么不直接使用它来构建链接呢？

```
$('<a>',{
   text: 'Text',
   title: 'Blah',
   href: data.query.results.item[0].link,
   click: nil }
}).appendTo('body'); 
```

注意：以上代码未经测试。

# jndi - Jboss 7.1 数据库查询挂起

> ID：14016509
> 
> 赞同：2
> 
> 时间：2012-12-24T02:47:23.560
> 
> 标签：jndi, jboss7.x

我之前使用的是 Jboss 4.2.2，最近我在 linux 机器上安装了 Jboss 7.1。它在登台服务器上运行良好，但我在生产中遇到了奇怪的问题。

启动几个小时后，我的数据库查询开始挂起。结果没有从数据库中返回。我正在使用在standalone.xml 中定义的JNDI。

```
 <subsystem xmlns="urn:jboss:domain:datasources:1.0">
        <datasources>
            <datasource jndi-name="java:/MyDatabaseDS" pool-name="MyDatabaseDS" enabled="true" use-java-context="true">
                <connection-url>jdbc:mysql://host:3306/database?zeroDateTimeBehavior=convertToNull&amp;cacheServerConfiguration=true&amp;useConfigs=maxPerformance</connection-url>
                <driver>mysql</driver>
                <pool>
                    <min-pool-size>10</min-pool-size>
                    <max-pool-size>100</max-pool-size>
                    <prefill>true</prefill>
                </pool>
                <security>
                    <user-name>user_name</user-name>
                    <password>password</password>
                </security>
                <timeout>
                    <blocking-timeout-millis>50000</blocking-timeout-millis>
                    <idle-timeout-minutes>5</idle-timeout-minutes>
                </timeout>
            </datasource>
            <drivers>
                <driver name="mysql" module="com.mysql">
                    <xa-datasource-class>com.mysql.jdbc.Driver</xa-datasource-class>
                </driver>
            </drivers>
        </datasources>
    </subsystem> 
```

请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T05:58:23.747

虽然我对您的问题没有明确的解决方案，但您可以做以下几件事来进一步隔离问题：

*   监控数据库性能和吞吐量。由于您提到该问题仅发生在生产中，因此可能与负载有关。也许您的事务专门锁定太多对象太久，因此当使用负载开始达到峰值时，下一个事务必须等到前一个事务首先完成
*   监控服务器硬件，下次出现“挂起”时，注意 CPU / 内存 / 磁盘使用率是否达到峰值
*   观察“挂起”期间数据库上发生的其他活动，如果完成了任何繁重的工作，这可能会显着减慢您的应用程序
*   针对类似的生产负载在您的测试/登台环境中执行负载测试。如果您可以重现“挂起”症状，那么您的代码可能存在可伸缩性问题

# openfire - Smack 错误地显示在线/离线状态

> ID：14016512
> 
> 赞同：1
> 
> 时间：2012-12-24T02:47:55.580
> 
> 标签：openfire, smack

这是我在网上显示当前用户的朋友圈的代码。

```
 final String me = "hieugioi@xxx.xxx.x.xx";
        connection.connect();
        connection.login(me, "123456");
        final Roster roster = connection.getRoster();

    final Collection<RosterEntry> entries = roster.getEntries();
    for(final RosterEntry entry : entries) {
        System.out.println("User: " + entry.getUser());
        System.out.println("Name: " + entry.getName());
        //System.out.println("Status: " + entry.getStatus());

        final Presence p = roster.getPresence(entry.getUser());
        System.out.println("====== Mode: " + p.getMode());
        System.out.println("====== Status: " + p.getStatus());
    } 
```

日志显示

```
12-24 09:37:18.029: I/System.out(2831): User: hieungoan@xxx.xxx.x.xx
12-24 09:37:18.029: I/System.out(2831): Name: hieungoan
12-24 09:37:18.029: I/System.out(2831): ====== Mode: null
12-24 09:37:18.029: I/System.out(2831): ====== Status: null
12-24 09:37:18.029: I/System.out(2831): User: hieutot@xxx.xxx.x.xx
12-24 09:37:18.029: I/System.out(2831): Name: hieutot
12-24 09:37:18.029: I/System.out(2831): ====== Mode: null
12-24 09:37:18.029: I/System.out(2831): ====== Status: null
12-24 09:37:18.029: I/System.out(2831): User: hieuhay@xxx.xxx.x.xx
12-24 09:37:18.029: I/System.out(2831): Name: hieuhay
12-24 09:37:18.029: I/System.out(2831): ====== Mode: null
12-24 09:37:18.029: I/System.out(2831): ====== Status: null
12-24 09:37:18.029: I/System.out(2831): User: hieukhoe@xxx.xxx.x.xx
12-24 09:37:18.029: I/System.out(2831): Name: hieukhoe
12-24 09:37:18.029: I/System.out(2831): ====== Mode: null
12-24 09:37:18.029: I/System.out(2831): ====== Status: null 
```

事实上，用户`hieutot`和在 Openfire`hieungoan`中**在线**，但它总是显示为 NULL，如上！我的代码有什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T18:22:10.280

请查看[**聆听名单和状态变化**](http://www.igniterealtime.org/builds/smack/docs/latest/documentation/roster.html)的部分。

# django - 修复 virtualenvwrapper 现在 setuptools 在 pip install 上失败

> ID：14016513
> 
> 赞同：0
> 
> 时间：2012-12-24T02:48:15.817
> 
> 标签：django, heroku, pip, setuptools, distribute

我刚刚通过使用此页面作为指南修复 virtualenvwrapper：

[http://www.jongales.com/blog/2012/07/25/fixing-virtualenv-after-installing-mountain-lion/#comment-37964](http://www.jongales.com/blog/2012/07/25/fixing-virtualenv-after-installing-mountain-lion/#comment-37964)

现在当我`pip install -r requirements.txt`让我的 Django 项目工作时，我在 setuptools 的东西上失败了？

有人有什么建议吗？

```
MacBook-Pro:staging macbook$ ls
Procfile        manage.py       settings.py     urls.py         wsgi.py
local_settings.py   medint          settings.pyc        urls.pyc
local_settings.pyc  requirements.txt    stuff           wiki
macBook-Pro:macbook$ pip install -r requirements.txt
Downloading/unpacking Django==1.4.1 (from -r requirements.txt (line 1))
  Downloading Django-1.4.1.tar.gz (7.7MB): 7.7MB downloaded
  Running setup.py egg_info for package Django

Downloading/unpacking distribute==0.6.10 (from -r requirements.txt (line 2))
  Downloading distribute-0.6.10.tar.gz (389kB): 389kB downloaded
  Running setup.py egg_info for package distribute

Downloading/unpacking dj-database-url==0.2.1 (from -r requirements.txt (line 3))
  Downloading dj-database-url-0.2.1.tar.gz
  Running setup.py egg_info for package dj-database-url

Downloading/unpacking gunicorn==0.14.6 (from -r requirements.txt (line 4))
  Downloading gunicorn-0.14.6.tar.gz (219kB): 219kB downloaded
  Running setup.py egg_info for package gunicorn

Downloading/unpacking mailsnake==1.6.1 (from -r requirements.txt (line 5))
  Downloading mailsnake-1.6.1.tar.gz
  Running setup.py egg_info for package mailsnake

    file mailsnake.py (for module mailsnake) not found
Downloading/unpacking newrelic==1.5.0.103 (from -r requirements.txt (line 6))
  Downloading newrelic-1.5.0.103.tar.gz (186kB): 186kB downloaded
  Running setup.py egg_info for package newrelic

Downloading/unpacking psycopg2==2.4.5 (from -r requirements.txt (line 7))
  Downloading psycopg2-2.4.5.tar.gz (719kB): 719kB downloaded
  Running setup.py egg_info for package psycopg2

    no previously-included directories found matching 'doc/src/_build'
Downloading/unpacking requests==0.14.2 (from -r requirements.txt (line 8))
  Downloading requests-0.14.2.tar.gz (361kB): 361kB downloaded
  Running setup.py egg_info for package requests

    warning: no files found matching 'tests/*.'
Downloading/unpacking simplejson==2.6.2 (from -r requirements.txt (line 9))
  Downloading simplejson-2.6.2.tar.gz (53kB): 53kB downloaded
  Running setup.py egg_info for package simplejson

Requirement already satisfied (use --upgrade to upgrade): wsgiref==0.1.2 in /usr/local/Cellar/python/2.7.3/Frameworks/Python.framework/Versions/2.7/lib/python2.7 (from -r requirements.txt (line 10))
Installing collected packages: Django, distribute, dj-database-url, gunicorn, mailsnake, newrelic, psycopg2, requests, simplejson
  Running setup.py install for Django
    changing mode of build/scripts-2.7/django-admin.py from 644 to 755

    changing mode of /Users/tmacbook/Envs/medint2/bin/django-admin.py to 755
  Running setup.py install for distribute
    Before install bootstrap.
    Scanning installed packages
    Setuptools installation detected at /Users/tmacbook/Envs/medint2/lib/python2.7/site-packages/setuptools-0.6c11-py2.7.egg
    Egg installation
    Patching...
    Renaming /Users/macbook/Envs/medint2/lib/python2.7/site-packages/setuptools-0.6c11-py2.7.egg into /Users/macbook/Envs/medint2/lib/python2.7/site-packages/setuptools-0.6c11-py2.7.egg.OLD.1356316395.42
    Patched done.
    Relaunching...
    Traceback (most recent call last):
      File "<string>", line 1, in <module>
    NameError: name 'install' is not defined
    Complete output from command /Users/macbook/Envs/medint2/bin/python -c "import setuptools;__file__='/Users/macbook/Envs/medint2/build/distribute/setup.py';exec(compile(open(__file__).read().replace('\r\n', '\n'), __file__, 'exec'))" install --record /var/folders/qm/dvrz87yj6px11mw0sxcy88lh0000gn/T/pip-RJZBEP-record/install-record.txt --single-version-externally-managed --install-headers /Users/tmacbook/Envs/medint2/bin/../include/site/python2.7:
    Before install bootstrap.

Scanning installed packages

Setuptools installation detected at /Users/macbook/Envs/medint2/lib/python2.7/site-packages/setuptools-0.6c11-py2.7.egg

Egg installation

Patching...

Renaming /Users/macbook/Envs/medint2/lib/python2.7/site-packages/setuptools-0.6c11-py2.7.egg into /Users/macbook/Envs/medint2/lib/python2.7/site-packages/setuptools-0.6c11-py2.7.egg.OLD.1356316395.42

Patched done.

Relaunching...

Traceback (most recent call last):

  File "<string>", line 1, in <module>

NameError: name 'install' is not defined

----------------------------------------
Command /Users/macbook/Envs/medint2/bin/python -c "import setuptools;__file__='/Users/tmacbook/Envs/medint2/build/distribute/setup.py';exec(compile(open(__file__).read().replace('\r\n', '\n'), __file__, 'exec'))" install --record /var/folders/qm/dvrz87yj6px11mw0sxcy88lh0000gn/T/pip-RJZBEP-record/install-record.txt --single-version-externally-managed --install-headers /Users/tmacbook/Envs/medint2/bin/../include/site/python2.7 failed with error code 1 in /Users/tmacbook/Envs/medint2/build/distribute
Storing complete log in /Users/tmacbook/.pip/pip.log 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-24T03:48:51.590

升级分发==0.6.32

这似乎可以解决它。

# android - nullpointerexception 和数据库未创建

> ID：14016515
> 
> 赞同：0
> 
> 时间：2012-12-24T02:48:22.150
> 
> 标签：android, sqlite, listview, simplecursoradapter

我正把头从桌子上撞下来。我似乎无法弄清楚这一点。我要做的就是在创建活动时使用我的 SQLite 数据库中的项目填充列表视图。

也许我错过了一些小东西，我现在不知道并且非常沮丧。我知道数据库没有被创建，因为它不存在于文件资源管理器中。

这是DatabaseHandler.java：

```
package com.dd.gfit;

import android.content.Context;
import android.database.Cursor;
import android.database.sqlite.SQLiteDatabase;
import android.database.sqlite.SQLiteOpenHelper;

public class DatabaseHandler extends SQLiteOpenHelper {

    private SQLiteDatabase db;

    // database strings
    public static final String DATABASE_NAME = "gfit.db";
    public static final int DATABASE_VERSION = 1;   

    // table strings
    public static final String TABLE_ROUTINES = "routines"; 

    // key strings
    public static final String KEY_ROUTINES_ID = "id";
    public static final String KEY_ROUTINES_NAME = "name";

    public DatabaseHandler(Context context) {
        super(context, DATABASE_NAME, null, DATABASE_VERSION);
    }

    @Override
    public void onCreate(SQLiteDatabase db) {

        // create routines table
        db.execSQL("CREATE TABLE IF NOT EXISTS " + TABLE_ROUTINES + " ("
                    + KEY_ROUTINES_ID + " INTEGER PRIMARY KEY AUTO_INCREMENT,"
                    + KEY_ROUTINES_NAME + " VARCHAR"
                    + ")");

        // insert test data into routines table
        db.execSQL("INSERT INTO " + TABLE_ROUTINES + " (" + KEY_ROUTINES_NAME + ") VALUES ('Test Routine 1')");
        db.execSQL("INSERT INTO " + TABLE_ROUTINES + " (" + KEY_ROUTINES_NAME + ") VALUES ('Test Routine 2')");
        db.execSQL("INSERT INTO " + TABLE_ROUTINES + " (" + KEY_ROUTINES_NAME + ") VALUES ('Test Routine 3')");
        db.execSQL("INSERT INTO " + TABLE_ROUTINES + " (" + KEY_ROUTINES_NAME + ") VALUES ('Test Routine 4')");
        db.execSQL("INSERT INTO " + TABLE_ROUTINES + " (" + KEY_ROUTINES_NAME + ") VALUES ('Test Routine 5')");

    }

    @Override
    public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
        // do database upgrades here
    }

    public Cursor fetchRoutines() {
        Cursor cursor = db.query(TABLE_ROUTINES, new String[] {KEY_ROUTINES_ID, KEY_ROUTINES_NAME}, null, null, null, null, null);

        if (cursor != null) {
            cursor.moveToFirst();
        }

        return cursor;
    }

} 
```

这是 RoutinesActivity.java：

```
package com.dd.gfit;

import android.os.Bundle;
import android.app.Activity;
import android.database.Cursor;
import android.support.v4.app.NavUtils;
import android.view.Menu;
import android.view.MenuInflater;
import android.view.MenuItem;
import android.widget.ListAdapter;
import android.widget.ListView;
import android.widget.SimpleCursorAdapter;

public class RoutinesActivity extends Activity {

    private DatabaseHandler db = new DatabaseHandler(this);
    private Cursor cursor = db.fetchRoutines();

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_routines);

        // Show the Up button in the action bar.
        getActionBar().setDisplayHomeAsUpEnabled(true);

        // open the database and show the routines
        db.getWritableDatabase();
        displayRoutines();
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        MenuInflater inflater = getMenuInflater();
        inflater.inflate(R.menu.activity_routines, menu);
        return true;
    }

    @Override
    public boolean onOptionsItemSelected(MenuItem item) {
        switch (item.getItemId()) {
        case android.R.id.home:
            NavUtils.navigateUpFromSameTask(this);
            return true;
        }
        return super.onOptionsItemSelected(item);
    }

    private void displayRoutines() {

        ListAdapter adapter = new SimpleCursorAdapter(
            this, 
            R.layout.listitem_routine, cursor, 
            new String[] { db.KEY_ROUTINES_NAME }, 
            new int[] { R.id.listitem_routine_name });

        ListView routineList = (ListView)findViewById(R.id.list_routines);
        routineList.setAdapter(adapter);
    }

} 
```

这是activity_routines.xml：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    tools:context=".RoutinesActivity" >

    <ListView
        android:id="@+id/list_routines"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"        
        android:layout_margin="10dp" >

    </ListView>

</RelativeLayout> 
```

这是 listitem_routine.xml：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="horizontal"
    android:gravity="center_vertical" >

    <TextView
        android:id="@+id/listitem_routine_name"
        android:layout_width="0dip"
        android:layout_height="wrap_content"
        android:layout_weight="1"
        android:text="@string/lorem_routine_item"
        android:textAppearance="?android:attr/textAppearanceMedium" />

    <ImageView
        android:id="@+id/button_routine_edit"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:src="@drawable/ic_action_edit"
        android:contentDescription="@string/ic_action_edit" />

    <ImageView
        android:id="@+id/button_routine_delete"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:src="@drawable/ic_action_delete"
        android:contentDescription="@string/ic_action_delete" />

</LinearLayout> 
```

这里有什么问题？此外，一旦我开始工作，每个列表视图项中都有按钮，您可以通过 listitem_routine.xml 看到。我想以某种方式将 KEY_ROUTINES_ID 传递到按钮中，以便可以即时编辑每个项目。有没有我可以使用任何人都知道的教程，或者只是一个片段？

编辑：

这是日志：

```
12-24 02:52:24.429: D/dalvikvm(783): GC_FOR_ALLOC freed 49K, 7% free 2564K/2732K, paused 68ms, total 69ms
12-24 02:52:24.449: I/dalvikvm-heap(783): Grow heap (frag case) to 3.616MB for 1048592-byte allocation
12-24 02:52:24.559: D/dalvikvm(783): GC_FOR_ALLOC freed 2K, 5% free 3585K/3760K, paused 110ms, total 110ms
12-24 02:52:24.659: D/dalvikvm(783): GC_CONCURRENT freed <1K, 5% free 3585K/3760K, paused 5ms+3ms, total 102ms
12-24 02:52:24.839: D/dalvikvm(783): GC_FOR_ALLOC freed <1K, 5% free 3585K/3760K, paused 51ms, total 51ms
12-24 02:52:24.869: I/dalvikvm-heap(783): Grow heap (frag case) to 5.863MB for 2359312-byte allocation
12-24 02:52:24.989: D/dalvikvm(783): GC_CONCURRENT freed 0K, 3% free 5889K/6068K, paused 24ms+33ms, total 115ms
12-24 02:52:25.319: D/gralloc_goldfish(783): Emulator without GPU emulation detected.
12-24 02:52:31.950: E/Trace(827): error opening trace file: No such file or directory (2)
12-24 02:52:32.660: D/dalvikvm(827): GC_FOR_ALLOC freed 52K, 7% free 2564K/2736K, paused 25ms, total 28ms
12-24 02:52:32.670: I/dalvikvm-heap(827): Grow heap (frag case) to 3.616MB for 1048592-byte allocation
12-24 02:52:32.710: D/dalvikvm(827): GC_FOR_ALLOC freed 2K, 5% free 3585K/3764K, paused 40ms, total 40ms
12-24 02:52:32.760: D/dalvikvm(827): GC_CONCURRENT freed <1K, 5% free 3585K/3764K, paused 5ms+3ms, total 50ms
12-24 02:52:32.840: D/dalvikvm(827): GC_FOR_ALLOC freed <1K, 5% free 3585K/3764K, paused 19ms, total 19ms
12-24 02:52:32.860: I/dalvikvm-heap(827): Grow heap (frag case) to 5.863MB for 2359312-byte allocation
12-24 02:52:33.000: D/dalvikvm(827): GC_CONCURRENT freed 0K, 4% free 5889K/6072K, paused 77ms+13ms, total 140ms
12-24 02:52:33.250: D/gralloc_goldfish(827): Emulator without GPU emulation detected.
12-24 02:52:36.120: D/AndroidRuntime(827): Shutting down VM
12-24 02:52:36.140: W/dalvikvm(827): threadid=1: thread exiting with uncaught exception (group=0x40a70930)
12-24 02:52:36.190: E/AndroidRuntime(827): FATAL EXCEPTION: main
12-24 02:52:36.190: E/AndroidRuntime(827): java.lang.RuntimeException: Unable to instantiate activity ComponentInfo{com.dd.gfit/com.dd.gfit.RoutinesActivity}: java.lang.NullPointerException
12-24 02:52:36.190: E/AndroidRuntime(827):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2106)
12-24 02:52:36.190: E/AndroidRuntime(827):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2230)
12-24 02:52:36.190: E/AndroidRuntime(827):  at android.app.ActivityThread.access$600(ActivityThread.java:141)
12-24 02:52:36.190: E/AndroidRuntime(827):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1234)
12-24 02:52:36.190: E/AndroidRuntime(827):  at android.os.Handler.dispatchMessage(Handler.java:99)
12-24 02:52:36.190: E/AndroidRuntime(827):  at android.os.Looper.loop(Looper.java:137)
12-24 02:52:36.190: E/AndroidRuntime(827):  at android.app.ActivityThread.main(ActivityThread.java:5039)
12-24 02:52:36.190: E/AndroidRuntime(827):  at java.lang.reflect.Method.invokeNative(Native Method)
12-24 02:52:36.190: E/AndroidRuntime(827):  at java.lang.reflect.Method.invoke(Method.java:511)
12-24 02:52:36.190: E/AndroidRuntime(827):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
12-24 02:52:36.190: E/AndroidRuntime(827):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
12-24 02:52:36.190: E/AndroidRuntime(827):  at dalvik.system.NativeStart.main(Native Method)
12-24 02:52:36.190: E/AndroidRuntime(827): Caused by: java.lang.NullPointerException
12-24 02:52:36.190: E/AndroidRuntime(827):  at com.dd.gfit.DatabaseHandler.fetchRoutines(DatabaseHandler.java:51)
12-24 02:52:36.190: E/AndroidRuntime(827):  at com.dd.gfit.RoutinesActivity.<init>(RoutinesActivity.java:17)
12-24 02:52:36.190: E/AndroidRuntime(827):  at java.lang.Class.newInstanceImpl(Native Method)
12-24 02:52:36.190: E/AndroidRuntime(827):  at java.lang.Class.newInstance(Class.java:1319)
12-24 02:52:36.190: E/AndroidRuntime(827):  at android.app.Instrumentation.newActivity(Instrumentation.java:1054)
12-24 02:52:36.190: E/AndroidRuntime(827):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2097)
12-24 02:52:36.190: E/AndroidRuntime(827):  ... 11 more 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T02:56:00.793

`this`以下行中的关键字是您崩溃的原因。您在创建对象之前使用了“this”关键字。

```
 private DatabaseHandler db = new DatabaseHandler(this); 
```

请执行下列操作

```
private DatabaseHandler db;   

    @Override
        protected void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);
            setContentView(R.layout.activity_routines);
    db = new DatabaseHandler(this);

        } 
```

还将以下行移至 onCreate()

```
private Cursor cursor = db.fetchRoutines(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-24T02:57:33.583

```
private DatabaseHandler db = new DatabaseHandler(this);
private Cursor cursor = db.fetchRoutines(); 
```

你不能调用它，因为它还没有调用`onCreate()`。`db.fetchRoutines();`将从您的数据库中调用某些内容。但是您已经创建了 db 对象。'this' 不能使用，因为该对象尚未构造。

```
private DatabaseHandler db = null;
    private Cursor cursor = null;
@Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_routines);

        // Show the Up button in the action bar.
        getActionBar().setDisplayHomeAsUpEnabled(true);

        // open the database and show the routines
        db = new DatabaseHandler(this);
        db.getWritableDatabase();

        cursor = db.fetchRoutines();
        displayRoutines();
    } 
```

这种方法

```
db = new DatabaseHandler(this); 
```

是您创建对象的地方。

```
 db.getWritableDatabase(); 
```

是您获取数据库的地方，您只能在此行之后使用数据库操作。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-24T03:18:03.323

在`DatabaseHandler`中，您永远不会分配 的值`db`。因此，当您调用`db.query()`时`fetchRoutines()`，它会崩溃。

您需要设置您的`db`成员变量，以便您以后可以使用它。将以下行添加到 的末尾`DatabaseHandler.onCreate()`：

```
this.db = db; 
```

# c++ - 用于包装类方法的回调函数和 static_cast

> ID：14016519
> 
> 赞同：0
> 
> 时间：2012-12-24T02:49:27.747
> 
> 标签：c++, static-cast

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-24T03:08:00.960

Assuming the Jack API is written for the C language, there is a *formal* problem already with the working callback that you have. Namely that it then needs to be `extern "C"`, and that as a static member function it cannot be. So formally it needs to be a free-standing function.

The [documentation](http://jackaudio.org/files/docs/html/group__ErrorOutput.html#ga550faaef2bb17b03b0068fe094e7b92f) that you link to for the `jack_set_error_function` gives this signature, presumably expressed in C:

```
void jack_set_error_function( void(*)(const char *) func); 
```

For C++ the callback must be assumed to be `extern "C"`, so,

```
extern "C" void MyErrorFunction( char const* errorMessage )
{
    // Whatever, e.g. post a message to the GUI event queue, or terminate.
} 
```

If you want this function to in turn call a method on an object, then unless the library provides some special mechanism to help you, you will just have to use one of the following techniques:

*   a namespace scope variable accessed by the callback, or

*   a dynamically generated callback.

C++ does not as of yet support the second approach, at all, so the first one is strongly indicated – *if* you want a callback on a method of an object.

* * *

**EDIT**: Sorry, I forgot to mention,

        *the function declarations in the API documentation are syntactically invalid*.

E.g. the documentation’s signature

```
void jack_set_info_function( void(*)(const char *) func ); 
```

simply won’t compile with a standard-conforming compiler. Not as C, and not as C++. It’s syntactically invalid in both languages.

Instead it should be

```
void jack_set_info_function( void(*func)(const char *) ); 
```

Since the documentation apparently is generated by DOxygen, it stands to reason that it's been generated from source code that compiles. If so then this is a bug in DOxygen, and a problem with the quality assurance of the library provider. However it might be a problem that lies solely with the library provider, or, I might be mistaken in the assumption that this is a C library?

# perl - LWP UserAgent 发布 @list

> ID：14016522
> 
> 赞同：2
> 
> 时间：2012-12-24T02:50:07.313
> 
> 标签：perl

我仍然在为最基本的 Perl 语法和谷歌搜索运算符苦苦挣扎，除非你知道你不知道什么以便使用正确的术语。所以 2 个问题，1）什么是正确的语法和 2）我用来找到答案的术语是什么？

语法——我有一个列表（哈希？）：

```
my @list = [ "foo"=> "bar", "foo"=>"orange"]; 
```

我需要声明列表，然后单独添加每个项目（填充将在循环和其他方法中完成），但似乎找不到正确的语法：

```
my @list = [];
# add foo=bar
# add foo=orange 
```

最终目标是通过`LWP::UserAgent`和`$ua->post( $url, \@form )`方法发布一个不幸使用重复键的表单。我可以让它一次性声明列表和所有内容，但似乎找不到正确的语法来拆分它并逐步构建内容。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-24T03:03:02.680

您将使用 perldoc（您​​计算机上的程序或[网站](http://perldoc.perl.org/)上的程序）来查找答案。

```
my @list = [ "foo"=> "bar", "foo"=>"orange"]; 
```

你没有列表，你有一个数组（称为`@list`）。该数组有一个元素，它是对（另一个）数组的引用，该数组包含四个字符串：`foo`、`bar`、`foo`、`orange`。我怀疑这是你想要的：

```
my @list = ("foo" => "bar", "foo" => "orange"); 
```

似乎更有可能（这是一个直接包含四个字符串的数组，没有额外的嵌套数组）。

要在程序上构建它，您可以执行以下操作：

```
my @list;
push @list, "foo";
push @list, "bar";
push @list, "foo";
push @list, "orange"; 
```

或者：

```
my @list;
push @list, "foo" => "bar";
push @list, "foo" => "orange"; 
```

与此相关的 perldoc 页面将是`perldoc perldata`,`perldoc perlreftut`和`perldoc -f push`.

# html - 背景中有圆圈的简单瓷砖：图像与文本？

> ID：14016523
> 
> 赞同：-1
> 
> 时间：2012-12-24T02:50:27.823
> 
> 标签：html, css, web-applications

一个主要的技术问题-

我正在开发一个界面 - 基本上 - 将使用预定义的方形瓷砖有一个看起来有点随机的背景。每个图块将非常简单地在其中包含许多任意放置的不同大小的圆圈。会有**很多**瓷砖——让我们假设它们都是独一无二的。

我一直在玩弄的一个选项是我可以使用文本的想法。`white-space: pre-wrap`每个图块的不同字体大小和样式的时期。我想我已经确定就文件大小而言，这将比使用圆圈的图像更小......它也会有点聪明。

然而，有些事情我并不喜欢。例如，也许图像的缓存最终会使它们最终加载得比页面加载时的空格/周期块更快，即使它们最初需要更长的时间来下载。

我认为确定文本的整体尺寸会有点像噩梦，但我*真的*不需要知道这些信息，我想如果我使用像 Georgia 这样的字体（这似乎包含在所有系统中/browsers），我可能无论如何都能找到该信息。

如果你有时间在世界上并且你想让项目尽可能地在美学上完美（内部和外部），你会如何处理这种情况？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-24T03:26:24.373

如果你想做背景，我不会使用文字——对我来说这有点恶心。

就个人而言，由于背景不是“内容”，我相信它不会出现在您的 HTML 中，应该使用 CSS 或 Javascript 来完成。

在这种情况下，我会使用背景图像。

看[蝉原理](http://designfestival.com/the-cicada-principle-and-why-it-matters-to-web-designers/)。

仅使用几张图像，您可以获得非常酷、随机的背景。

[这个例子](http://designfestival.com/cicada/break-it-down/?id=95)少于 7k 的图像。

这是[另一个](http://designfestival.com/cicada/break-it-down/?id=102)可以用圆圈复制的。

# twitter-bootstrap - 如何让引导按钮显示活动状态？

> ID：14016530
> 
> 赞同：6
> 
> 时间：2012-12-24T02:51:24.287
> 
> 标签：twitter-bootstrap

我遇到了一组单选按钮的问题。

```
<div class="btn-group control-buttons" data-toggle="buttons-radio">
    <button type="button" class="btn">One</button>
    <button type="button" class="btn">Two</button>
    <button type="button" class="btn">Three</button>
</div> 
```

见这里：http: [//jsfiddle.net/dhbenson/LM9uW/](http://jsfiddle.net/dhbenson/LM9uW/)

当按钮被点击时，它们不会一直处于压抑状态（即没有任何一个看起来是“活跃的”）。

有谁知道为什么不？我还需要做什么才能使这些按钮正常工作？

*编辑*

啊，我明白了。我忘了包含引导 js 代码。

这个小提琴有效：http: [//jsfiddle.net/dhbenson/qNeSS/](http://jsfiddle.net/dhbenson/qNeSS/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-24T03:13:31.383

您需要该功能的引导 javascript。

将此添加到您的 HTML 头部：

```
<script src="http://code.jquery.com/jquery-1.8.3.min.js"></script>
<script src="http://netdna.bootstrapcdn.com/bootstrap/3.1.1/js/bootstrap.min.js"></script> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-24T07:02:37.443

试试这个代码：

```
<div class="btn-group" data-toggle="buttons-checkbox">
    <button type="button" class="btn">Left</button>
    <button type="button" class="btn">Middle</button>
    <button type="button" class="btn">Right</button>
</div> 
```

并添加一个文件，即`bootstrap-button.js`

# android - 如何为安卓多屏设计？

> ID：14016535
> 
> 赞同：0
> 
> 时间：2012-12-24T02:52:24.867
> 
> 标签：android, android-layout

第一张图片：默认普通屏幕 第二张图片：Galaxy Nexus 4.65"（尽管它看起来更大，但在普通屏幕下） 第三张图片：大屏幕

如何针对特定的屏幕尺寸进行设计？我的意思是第一张和第二张图片都在“正常屏幕”下。假设如果我为 Galaxy Nexus (4.65",720x1280) 创建新的布局文件夹并且我正在处理它，它会影响默认布局文件夹。

![普通屏幕 Nexus One](../Images/f33d3f75db67351cb84dc4b67c9c3471.png)

![普通屏幕 Galaxy Nexus](../Images/cb790c80ed44bfcc7a308e96ad38de3d.png)

![大屏幕](../Images/293687b1a290558fb56c5c0ae9fa6c6c.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-24T04:29:16.097

这是我关于如何针对不同屏幕进行设计的一般指南：

[https://stackoverflow.com/a/12739568/1369222](https://stackoverflow.com/a/12739568/1369222)

如果您只想针对三星 Galaxy Nexus，请参见此处：

[https://stackoverflow.com/a/9212675/1369222](https://stackoverflow.com/a/9212675/1369222)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-24T03:34:07.620

如果上述解决方案不起作用。试试这个，它肯定会起作用，我已经测试过了。如果您希望您的应用程序在不同版本的操作系统上运行。使用这三种布局。

```
 For 
                            tablet>3.2 and up verion
                            1-layout-sw600dp

                            For 
                            tablet<3.2 and lower version
                            1-layout-xlarge

                            For 
                            Smart phone
                            1-layout 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-24T05:23:12.333

如果您正在寻找这样的东西，idk，我想获得一些选票

```
xlarge screens are at least 960dp x 720dp
large screens are at least 640dp x 480dp
normal screens are at least 470dp x 320dp
small screens are at least 426dp x 320dp
Generalised Dpi values for screens:

ldpi Resources for low-density (ldpi) screens (~120dpi)
mdpi Resources for medium-density (mdpi) screens (~160dpi). (This is the baseline density.)
hdpi Resources for high-density (hdpi) screens (~240dpi).
xhdpi Resources for extra high-density (xhdpi) screens (~320dpi).
Therefore generalised size of your resources (assuming they are full screen):

ldpi
Vertical = 426 * 120 / 160 = 319.5px
Horizontal = 320 * 120 / 160 = 240px
mdpi
Vertical = 470 * 160 / 160 = 470px
Horizontal = 320 * 160 / 160 = 320px
hdpi
Vertical = 640 * 240 / 160 = 960px
Horizontal = 480 * 240 / 160 = 720px
xhdpi
Vertical = 960 * 320 / 160 = 1920px
Horizontal = 720 * 320 / 160 = 1440px

px = dp*dpi/160 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-24T03:12:38.573

使用此链接[http://developer.android.com/training/multiscreen/screendensities.html](http://developer.android.com/training/multiscreen/screendensities.html)

在这里，它们为具有相同图像的每个屏幕提供可绘制（如果您想使用图像），您的设备会根据其密度自动选择自己的图片。

```
res/
    drawable-xhdpi/
        awesomeimage.png
    drawable-hdpi/
        awesomeimage.png
    drawable-mdpi/
        awesomeimage.png
    drawable-ldpi/
        awesomeimage.png 
```

这是用于布局的，在您的 res 文件夹中创建新文件夹并将其命名为 layout-large 并将相同的 xml 文件放入此即 main.xml 中。

```
res/
        layout/
            main.xml
        layout-large/
            main.xml 
```

# c# - RichTextBox 到 BackgroundWorker

> ID：14016536
> 
> 赞同：0
> 
> 时间：2012-12-24T02:52:28.330
> 
> 标签：c#

如何在 C# 中将`RichTextBox1`' 值扔给 a ？`BackgroundWorker`

```
public void button4_Click(object sender, EventArgs e)
{
    if (String.IsNullOrEmpty(richTextBox1.Text.Trim())){
        MessageBox.Show("No value in RichTextBox?");
        return;
    }

    if (backgroundWorker1.IsBusy != true)
    {
        // Start the asynchronous operation.
        backgroundWorker1.RunWorkerAsync(richTextBox1);
    } 
```

这是我`BackgroundWorker`的代码：

```
public void backgroundWorker1_DoWork(object sender, DoWorkEventArgs e) {
    HtmlAgilityPack.HtmlDocument document = new HtmlAgilityPack.HtmlDocument();
    foreach (string vr in richTextBox1.Lines)
    {
    ⋮
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-24T06:20:54.933

由于上述原因，您不能传递 RichTextBox，但您可以传递作为 RichTextBox.Lines 属性的字符串数组并对其进行迭代。

```
private void button1_Click(object sender, EventArgs e)
{
    bg.RunWorkerAsync(richTextBox1.Lines);
}

void bg_DoWork(object sender, DoWorkEventArgs e)
{
    string[] lines = (string[])e.Argument;
    foreach(string vr in lines)
    {

    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-24T02:56:39.467

通常只有 Main UI 线程可以与 Forms 和 Controls 交互。

考虑将它需要的所有数据传递给该`RunWorkerAsync`方法——也许`RunWorkerAsync(richTextBox1.Lines.ToList())`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-24T06:00:33.300

```
private void button1_Click(object sender, EventArgs e)
    {
        backgroundWorker1.RunWorkerAsync(richTextBox1.Text);

    }

    private void backgroundWorker1_DoWork(object sender, DoWorkEventArgs e)
    {
        string text = (string)e.Argument;
        MessageBox.Show(text);

    } 
```

文本作为对象 e.argument 发送。要检索它，请将 e.argument 转换回字符串（或 string[] 等，具体取决于您传递的内容）

# eclipse - 通过代码断开 Eclipse 项目与 svn 的连接

> ID：14016538
> 
> 赞同：1
> 
> 时间：2012-12-24T02:53:35.663
> 
> 标签：eclipse, svn, disconnect

我在eclipse`REST`中调用了一个方法，通过在服务器端调用来通过代码`SVNKitUtil`删除项目。`SVN`

我也删除`.svn`了这个项目下的文件夹，但该项目仍然与 Eclipse 中的 SVN 链接。

我应该怎么做才能通过代码删除链接？（不是eclipse中直接操作，需要代码实现。）

# c++ - C++11 可选模板类型参数？

> ID：14016541
> 
> 赞同：4
> 
> 时间：2012-12-24T02:55:10.173
> 
> 标签：c++, templates, c++11

如果我想编写一个具有可选类型参数的类，我可以执行以下操作：

```
template<typename T>
struct X
{
        T t;
};

template<>
struct X<void>
{

};

int main()
{
        X<int> a;
        X<void> b;
}; 
```

有没有办法写出来，这样 void 是不必要的？IE：

```
int main()
{
        X<int> a;
        X b;
}; 
```

我试过这个：

```
template<typename T = void>
struct X
{
    T t;
};

template<>
struct X<void>
{

};

int main()
{
    X<int> a;
    X b;
}; 
```

但我得到：

```
test.cpp: In function ‘int main()’:
test.cpp:16:4: error: missing template arguments before ‘b’
test.cpp:16:4: error: expected ‘;’ before ‘b’ 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-24T03:18:03.380

从技术上讲，您需要编写：

```
X<> b; 
```

但是您可以使用 typedef 简单地修复这种丑陋：

```
typedef X<> Y; 
```

然后你可以这样做：

```
Y b; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-27T01:09:52.313

如果这是可能的：

```
template <typename T>
using X = std::is_void<T>::value ? _X<> : _X<T> 
```

但这并不能编译，所以不幸的是你被困`typedef`在另一个答案中。

# c#-4.0 - GUID 错误，将 GUID 从 EF 传递到 DTO

> ID：14016545
> 
> 赞同：0
> 
> 时间：2012-12-24T02:55:48.390
> 
> 标签：c#-4.0

错误：无法隐式转换类型“System.Guid？” 到“System.Guid”。存在显式转换（您是否缺少演员表？） C:\XXX.asmx.cs

无法隐式转换类型“System.Guid？” 到“System.Guid”。

```
 public partial class DOCUMENT
{      
    public Guid DOCUMENT_GUID { get; set; }        
}

return query.Select(x => new DOCUMENT()
            {
                //CORE DOCUMENT                   
                DOCUMENT_GUID = x.DOCUMENT_GUID,
            }).ToList(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-24T02:59:33.050

`Guid?`是 . 的语法糖`Nullable<Guid>`。看来您可能需要在`.Value`这里说：

```
return query.Select(x => new DOCUMENT()
        {
            //CORE DOCUMENT                   
            DOCUMENT_GUID = x.DOCUMENT_GUID.Value,
        }).ToList(); 
```

当然，您可以改为将`DOCUMENT.DOCUMENT_GUID`类更改为具有`Nullable<Guid> DOCUMENT_GUID`.

# macos - 通过 MacPorts 安装 Open MPI

> ID：14016546
> 
> 赞同：0
> 
> 时间：2012-12-24T02:55:51.067
> 
> 标签：macos, macports, openmpi

我想在 XCode 中使用 MPI。

Open MPI的安装过程[有一个页面说明。](http://www.underworldproject.org/documentation/OpenMPIDownload.html)但它说我应该有openmpi，`/usr/local/openmpi`但我没有。而不是这个，我有`/opt/local/include/openmpi`标题和`/opt/local/lib/openmpi`库。

它还说`LD_LIBRARY_PATH`应该包含一个带有 openmpi 库的文件夹，但仅在该文件夹`LA`中`SO`放置文件，既不`LD`，也不`DYLD`. 这些环境变量让我完全搞砸了。有人可以为我澄清一下吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-24T20:47:27.380

`sudo port install openmpi`**macports**会处理好一切。

# ruby-on-rails - Rails 单元测试之谜：方法运行，值更改，断言失败

> ID：14016550
> 
> 赞同：1
> 
> 时间：2012-12-24T02:56:13.690
> 
> 标签：ruby-on-rails, unit-testing, mongomapper, testunit

我有一个单元测试来检查方法是否执行以下操作：

1.  查找具有特定值的模型的所有实例，
2.  将它们更改为另一个值，
3.  将模型保存到数据库。

该方法似乎正在做它应该做的事情，但测试数据库似乎正在恢复到原始值。

```
class PostTest < ActiveSupport::TestCase
  test "publish queued posts" do
    post = Post.new({:published => 'queue'})
    post.save
    Post.handle_queue
    assert(post.published == 'published', "post should be published. actual value: #{post.published}")
  end
end 
```

* * *

```
test_publish_queued_posts(PostTest) ../test/unit/post_test.rb:13]:
post should be published. actual value: queue 
```

单步执行代码，很明显`post`'published' 属性设置为`published`，但在该点和断言之间的一段时间内，该值又更改回`queue`。

这是可怕的混乱。你知道这里发生了什么吗？如果这有什么不同，我将使用 mongo_mapper 进行持久性。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-24T02:58:47.657

我认为在断言之前重新加载你的模型应该这样做。

```
post.reload
assert(post.published == 'published', "post should be published. actual value: #{post.published}") 
```

# php - 如何在我的 PHP 中修复此 SQL 查询

> ID：14016554
> 
> 赞同：-3
> 
> 时间：2012-12-24T02:56:57.193
> 
> 标签：php, mysql

我有一个我正在尝试运行的 MySQL 查询，但我不知道如何修复它。

```
$sql="INSERT INTO ratings (epoch, ip, step, maxstep, threadid) VALUES
('."shell_exec(date             +%s.)".','.mysql_real_escape_string(inet_pton($_COOKIE[".id."])).','.$page.', '.$pagedecode[".numpages."].', '.$ourid.')'"; 
```

我知道这真的很糟糕 :( 解析错误：语法错误，意外的 '"'，期待 T_STRING 或 T_VARIABLE 或 T_NUM_STRING

谢谢杰米

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T02:59:40.710

```
$sql = "INSERT INTO ratings (epoch, ip, step, maxstep, threadid) VALUES ('" . shell_exec(date +%s.) . "','" . mysql_real_escape_string(inet_pton($_COOKIE[id])). "','" . $page . "','".$pagedecode[numpages]."', '".$ourid."')'"; 
```

但查询易受攻击`SQL Injection`。请阅读下面的文章以了解如何预防

*   [如何防止 PHP 中的 SQL 注入？](https://stackoverflow.com/questions/60174/how-to-prevent-sql-injection)

# php - 标准化表

> ID：14016555
> 
> 赞同：1
> 
> 时间：2012-12-24T02:57:06.093
> 
> 标签：php, html, database, phpmyadmin, normalization

我有一张这样的桌子：

```
+--------+---------------+--------------+---------------+
|   id   |   firstname   |   lastname   |   foods       |
+--------+---------------+--------------+---------------+
|   1    |   James       |   Bonds      |   BBQ         |
|   2    |   James       |   Bonds      |   Hamburger   |
|   3    |   James       |   Bonds      |   Pizza       |
|   4    |   David       |   Smith      |   BBQ         |
|   5    |   David       |   Smith      |   Pizza       |
+--------+---------------+--------------+---------------+ 
```

这是我插入数据库时​​的代码：

```
if($_POST["Submit"]=="Submit"){
for ($i=0; $i<sizeof($checkbox);$i++){
$sql="INSERT INTO tbl_info VALUES ('NULL', '$fname','$lname', '".$checkbox[$i]."')";
$result=mysql_query($sql);
 }
} 
```

或者是否有可能使它像这样：

```
+--------+---------------+--------------+---------------+
|   id   |   firstname   |   lastname   |   foods       |
+--------+---------------+--------------+---------------+
|   1    |   James       |   Bonds      |   BBQ         |
|   1    |   James       |   Bonds      |   Hamburger   |
|   1    |   James       |   Bonds      |   Pizza       |
|   2    |   David       |   Smith      |   BBQ         |
|   2    |   David       |   Smith      |   Pizza       |
+--------+---------------+--------------+---------------+ 
```

'foods' 列是一个复选框值，所以它出现了多余的（如果用户选择了 10 个复选框值，它也会产生 10 行具有相同名字的行，依此类推）。

问题是如果我需要更改用户的信息，我必须一个一个地更改它，这是错误的。如果我要删除用户信息，训练列的值也应该一次性删除。（我不能使用内爆或爆炸）。对不起。php新手。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-24T03:02:34.677

你应该有三个表：

```
Person Table (person_id, firstname, lastname)

Food Table (food_id, name)

PersonFood Table (person_id, food_id) 
```

插入记录时，将人员详细信息输入到人员表中。将食物详细信息存储在食物表中。当一个人喜欢某种食物时，将一条记录添加到 PersonFood 表中，该表将包含 person_id 和 food_id。这样，当人员详细信息更改时，您只需更改人员表中的记录。检索结果时，您可以进行联接查询。

这种归一化形式称为[第三范式](http://en.wikipedia.org/wiki/Third_normal_form)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-24T03:21:34.183

这是 N:N 关系。

N人存在

N种食物存在

任何人都可以想要任何食物。

你写的表的**问题是这样的：**

1.  假设您删除了詹姆斯邦德。汉堡包现在已从表中删除。但是汉堡仍然存在，但在你的桌子上看起来它不存在（明白吗？）

2.  假设我选择了所有喜欢披萨和汉堡的人。詹姆斯邦兹的名字会出现两次这是错误的，因为他是一个人

....我可以继续指出您上面描述的概念的方法。

**如何规范化它**

你应该有 3 张桌子

```
Person (person_id, firstname, lastname)

Food (food_id, name)

PersonFood_Join (person_id, food_id) 
```

在哪里（我希望你知道外键）

> PersonFood_Join(person_id) 是 Person(person_id) 的外键
> 
> Food_Join(food_id) 是 Food(food_id) 的外键。

由于食物数据是静态的（一堆复选框），因此很容易插入它们并将它们永久保存在那里。

每人添加 1 行会删除上面指出的所有异常（注意现在只有一份人名和一份食物副本，因此没有重复）

[这](http://psoug.org/reference/normalization.html)是一篇关于范式的文章

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-24T03:00:32.720

我会有一个 FOOD 表，里面有物品。如果 PERSON 只能有一个收藏夹，那么 FOOD 的外键就足够了。如果可以有很多收藏夹，则需要一个 JOIN 表。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-24T03:38:29.140

在对表格进行规范化时，您需要问自己：我要处理多少种数据？

在这种情况下，您有两种数据：一个人的姓名和一个食物项目。可以通过说一个人的名字由名字和姓氏组成来进一步分解它，但是为此我们只说两种数据就足够了。

所以，我们需要一张桌子来放人、食物，然后一张桌子把它们放在一起。所以，像这样：

```
Person
+--------+---------------+--------------+
|   id   |   firstname   |   lastname   |
+--------+---------------+--------------+
|   1    |   James       |   Bonds      |
|   2    |   David       |   Smith      |
+--------+---------------+--------------+
Food
+--------+---------------+
|   id   |   name        |
+--------+---------------+
|   1    |   BBQ         |
|   2    |   Hamburger   |
|   3    |   Pizza       |
+--------+---------------+
FoodFavorites
+--------+---------------+--------------+
|   id   |   person_id   |   food_id    |
+--------+---------------+--------------+
|   1    |   1           |   1          |
|   2    |   1           |   2          |
|   3    |   1           |   3          |
|   4    |   2           |   1          |
|   5    |   2           |   3          |
+--------+---------------+--------------+ 
```

您可以像这样插入新值：

```
$sql = "INSERT INTO FoodFavorites (person_id, food_id) VALUES ($person_id, $food_id)"; 
```

# opencart - opencart - 客户表，购物车字段编码

> ID：14016557
> 
> 赞同：1
> 
> 时间：2012-12-24T02:57:12.647
> 
> 标签：opencart

我需要向我的访客展示废弃的购物车。我环顾四周，发现 opencart 将购物车保存在购物车字段下客户表中的序列化数组中。我的问题是，即使我对数组进行反序列化，我也无法真正说出客户选择了哪些选项，因为它仍然以某种方式对我来说是不可读的。我不确定它是否需要某种解码，这可能是我可能需要的。这是我的购物车字段，`a:1:{s:31:"59:YToxOntpOjIzNztzOjI6IjQyIjt9";i:1;}` 但是当我反序列化它时，它显示了一个像这样的数组

```
array(1) { ["59:YToxOntpOjIzNztzOjI6IjQyIjt9"]=> int(1) } 
```

我知道 59 是 product_id，我不知道它 (YToxOntpOjIzNztzOjI6IjQyIjt9) 之后是什么？或者如何解码它？任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-24T03:11:03.860

在该字符串上使用 base64_decode。这是来自 system/library/cart.php 的线索：

```
$options = unserialize(base64_decode($product[1])); 
```

# php - PHP用随机名称重命名目录中的所有文件

> ID：14016563
> 
> 赞同：-2
> 
> 时间：2012-12-24T02:57:37.127
> 
> 标签：php, image, rename

我的网站上有一个包含 5000 张图片的目录。我可以在 PHP 中做什么来用完全随机的名称（例如 ri32rif293jf32f3f 或其他）重命名目录中的所有图像？

我需要知道这一点，这样我就可以每隔几个月随机重命名它们。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T03:05:55.793

这很简单：

1.  您自己创建一个可以生成随机文件名的函数。
2.  您将获得该目录中的文件列表。
3.  您创建第二个列表，每个旧列表的每个文件都有一个条目，该条目带有使用 1.) 中的函数生成的新名称，并且不存在于 2.) 的列表中，并且到目前为止还不是3.) 的清单。
4.  将 2.) 的文件重命名为新名称 3.)

完毕。将所有这些包装到它自己的函数中，这样您就可以每隔几个月轻松调用它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-24T03:27:36.787

```
function random($numchars,$digits,$small,$capital,$splchr)
{
$dig = "0123456789";

$sml = "abcdefghijklmnopqrstuvwxyz";

$spl = "!@#$%*";

$cap = "ABCDEFGHJKLMNOPQRSTUVWXYZ";

if($digits == 1)
{
    $str .= $dig;
}

if($small == 1)
{
    $str .= $sml;
}

if($capital == 1)
{
    $str .= $cap;
}

if($splchr == 1)
{
    $str .= $spl;
}

for($j=0; $j < $numchars; $j++)
{
    $randomized .= $str{ rand() % strlen($str) };
}

return $randomized;
}

    $source = "/source direcotry/";
    $destination = "/destination directory/";
    function getDirectory( $source, $destination, $level=0)
    {
    $count =1;

       $ignore = array( 'cgi-bin', '.', '..' );
       if($handle = opendir($source))
       { 
        //one by one reading a file
        while(false !== ($file = readdir($handle))) 
        {
           if( is_dir( "$source/$file" ) )
              if (!file_exists($destination.$file))
                 mkdir("$destination$file", 0700);
           if( !in_array( $file, $ignore ) )
           {
              if( is_dir( "$source/$file" ) )
              {
                getDirectory( "$source$file/", "$destination$file/", ($level+1));
              }
              else 
              { 
                  $rand = random(16,1,1,1,1);
                  $srcfile = file_get_contents($source.$file);
                  $extfile=substr($file, strrpos($file, "."));      
                  file_put_contents($destination.$rand.$extfile , $srcfile);
              }
           }
        }
        $total[$level] = $total + intval($count-1);
        echo "<br/><b> $destination  ---- ".intval($count-1)."</b><br/><br/>";
      }
      closedir($handle); 
    }
    //calling getDirectory function for repeat the for all sub folders.
    getDirectory( $source , $destination, 0); 
```

# mysql - 需要帮助为食物银行设计 ERD

> ID：14016569
> 
> 赞同：3
> 
> 时间：2012-12-24T02:58:48.320
> 
> 标签：mysql, sql, erd

这是我在校外的第一个项目，所以我生疏且缺乏实践。

我想创建一个数据库，但我不确定到目前为止我是否做得很好。我需要一些关于报告表的帮助。

情况：

*   食物银行有多个分发食物的机构
*   每个机构都必须提交一份报告，其中包含从一长串邮政编码中服务的家庭/人数。
*   我想在 Report to Zips 表上放一个 fk。但这会让选择多个拉链成为不可能吗？

也许我离基地很远。有人对我有什么建议吗？

![在此处输入图像描述](../Images/1f5a9801ed1e39cf24b17213cacca029.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T03:20:04.027

通常拥有像“Food”这样的孤儿表是缺少某些东西的标志。如果涉及到这么多数据，你会认为它会以某种方式与订单模型相关联，或者至少你会有某种迹象表明哪个机构储存了哪种食物。

奇怪的是，像“家庭服务”这样的数据是如何从这个模式中计算出来的。似乎没有此信息的来源，甚至没有“家庭服务”记录，也没有用于放入和汇总的每日或每周摘要的位置。

仅当存在可能通过邮政编码链接的其他数据时，“邮编”表才相关。如果您有经纬度数据库或人口统计数据，这将是有意义的。不过，拥有一个实际的外键有点笨拙。如果你不知道拉链怎么办？如果出于某种原因，邮编在美国境外怎么办？您将如何处理五位和九位邮政编码？

由于 zip 不是由用户创建的，因此 zips 表主要是可能会或可能不会被引用的辅助信息。这是一个孤立的“参考”表的良好候选者。

请记住，这样的图表结构很大程度上受应用程序前端的影响。如果用户正在添加食品订单，这将转化为所有三件事之间的关系。如果机构根据日常活动日志生成报告，那么您再次需要这三个实体之间的关系。

前端通常基于用例，因此请确保您包含所有相关的内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-24T03:21:25.003

此表的更好名称可能是 FoodService 或其他名称。我想你真正想要的报告类型不只是该表中的一行，因此将其命名为 Report 有点混乱。

在任何情况下，每个报告都是 {Agency ID, ZIP code, Date} 的唯一组合，当然，Agency ID 是一个外键。如您所指出的，此表中的其他列将是服务的家庭和人数。这意味着您将拥有每个机构-ZIP-日期组合的行，如下所示：

```
Agency   | ZIP   | Date   | FamiliesServed | PeopleServed
Agency A | 12345 | Jan-12 | 100            | 245
Agency A | 12340 | Jan-12 | 20             | 31
Agency B | 12345 | Jan-12 | 80             | 178
Agency B | 12340 | Jan-12 | 0              | 0 
```

这些总数是否也按“程序”细分？如果是这样，程序需要成为该表的主键的一部分。否则，程序不属于这里。

最后，除非您要开始存储*有关*邮政编码本身的数据，否则您不需要邮政编码表。

# maven - 使用 maven 在 Jenkins 上发布 JavaDoc

> ID：14016574
> 
> 赞同：11
> 
> 时间：2012-12-24T02:59:24.140
> 
> 标签：maven, jenkins, javadoc

我有由 Jenkins-CI 构建的 Maven 项目。如何在 Jenkins 上生成和发布 JavaDoc？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-12-24T03:09:31.013

1.  确保已安装 Jenkins javadoc 插件。
    转到[http://yourjenkinsserver.com/jenkins/pluginManager/installed](http://yourjenkinsserver.com/jenkins/pluginManager/installed)查看已安装插件的列表。
    插件页面[https://wiki.jenkins-ci.org/display/JENKINS/Javadoc+Plugin](https://wiki.jenkins-ci.org/display/JENKINS/Javadoc+Plugin)
2.  配置 Jenkins 作业：
    在构建部分，目标和选项行添加：

    javadoc:javadoc

就这样。无需更改 pom.xml

![詹金斯的工作观](../Images/a7fdd6438cc63621227fb174504cac8b.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-24T03:54:48.277

最简单的做法是创建一个单独的任务，该任务运行 thr javadoc 命令，并在编译任务之后运行。您将输入和输出目录传递给它。

我会为您的 CI 网站运行一个单独的 tomcat - 它更容易。

# c# - 处理 Windows App Store 应用内购买收据

> ID：14016576
> 
> 赞同：0
> 
> 时间：2012-12-24T02:59:31.447
> 
> 标签：c#, windows-8, microsoft-metro

我想在这种情况下处理这种情况，用户在这台机器上执行购买，但在另一台机器上运行该功能。

我知道我必须检查收据。我想知道，这是正确的方法吗？请注意，我绕过签名检查。因为，我需要设置一个我现在不想考虑的后端系统。我什至无法在本地执行签名检查，因为 Windows 8 Store App 不提供 System.Security.Cryptography API。

**我想知道，以下代码片段是否足以处理大多数情况？**请注意，我无法测试代码，因为我需要发布新版本才能测试代码。

```
private async void history_Click(object sender, RoutedEventArgs e)
{
    bool OK = true;

    // The next line is commented out for production/release.       
    LicenseInformation licenseInformation = CurrentApp.LicenseInformation;
    if (!licenseInformation.ProductLicenses["PremiumFeatures"].IsActive)
    {
        try
        {
            // The customer doesn't own this feature, so 
            // show the purchase dialog.

            String receipt = await CurrentApp.RequestProductPurchaseAsync("PremiumFeatures", true);
            // the in-app purchase was successful

            licenseInformation = CurrentApp.LicenseInformation;
            if (licenseInformation.ProductLicenses["PremiumFeatures"].IsActive || receipt.Length > 0)
            {
                // In some situations, you may need to verify that a user made an in-app purchase. 
                // For example, imagine a game that offers downloaded content. If the user who 
                // purchased the content wants to play the game on another PC, you need to verify 
                // that the user purchased the content.
                //
                // Receipt is used to handle such situation.
                //
                // Validate receipt is complicated, as it requires us to setup a backend system.
                // http://msdn.microsoft.com/en-US/library/windows/apps/jj649137
                //
                // I will just assume non empty receipt string means valid receipt.
                OK = true;
            }
            else
            {
                OK = false;
            }
        }
        catch (Exception)
        {
            // The in-app purchase was not completed because 
            // an error occurred.
            OK = false;
        }
    }
    else
    {
        // The customer already owns this feature.
        OK = true;
    }

    if (OK)
    {
        // Launch premium feature.
        Frame.Navigate(typeof(HistoryPage));
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-24T09:40:29.843

您可以使用[CurrentAppSimulator](http://msdn.microsoft.com/en-us/library/windows/apps/hh779766.aspx)而不是`CurrentApp`. 在我看来没问题。

# c++ - 非阻塞 Connect() 上的 WSAEWOULDBLOCK 错误

> ID：14016579
> 
> 赞同：1
> 
> 时间：2012-12-24T02:59:41.293
> 
> 标签：c++, winsock, winsock2

我正在尝试通过非阻塞 connect() 连接到另一台机器上的服务器。

但是，当我这样做时，Connect() 返回 -1，并且我从 WSAGetLastError() 收到 WSAEWOULDBLOCK。

MSDN 文档指出： WSAEWOULDBLOCK 报告为在非阻塞 SOCK_STREAM 套接字上调用 connect 的结果是正常的，因为必须经过一段时间才能建立连接（[参考](http://msdn.microsoft.com/en-us/library/windows/desktop/ms740668%28v=vs.85%29.aspx)）。

问题是我总是收到错误，即使我的服务器没有运行，也会从 connect() 返回 -1。

正如建议的那样，我的套接字是 SOCK_STREAM 套接字。我该如何补救？我是否应该在 connect() 调用后提供超时以确保有足够的时间让 connect 建立连接？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-24T03:03:23.193

使用[`ConnectEx`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms737606.aspx)并传递`OVERLAPPED`结构。这样，您可以稍后在连接尝试完成时检索实际状态。

# django - django-autocomplete-light 链接无法定位 iframe

> ID：14016582
> 
> 赞同：1
> 
> 时间：2012-12-24T03:00:30.727
> 
> 标签：django, iframe, video-streaming, django-autocomplete-light

如果我的术语是非标准的，请先抱歉，但我是 Django 和 Python 的新手……我在 Mac OSX 10.7 (Lion) 上使用 Python 2.7.3 和 Django 1.4.3。Django-autocomplete-light 版本 1.1.7。

我正在使用 django-autocomplete-light 模块创建一个页面，我可以在其中搜索一组视频（托管在 Youtube 等外部资源上）。我定义了一个名为 Videos 的模型/应用程序，其中包含托管在此第三方网站上的一组视频。在我的视频/index.html 页面的顶部，我有一个由 django-autocomplete-light 模块驱动的搜索框。我已经得到了整体搜索功能——当我在搜索框中输入内容时，相关视频会自动显示在下拉菜单中。我希望点击的视频在页面上的嵌入式播放器中播放——出于某种原因，这会继续将视频加载到整个现有文档/页面中，而不仅仅是 iFrame。在我的搜索框结构中，我已经包含了“目标”属性。我的理解是，包括“

旁注——我在私人服务（不是 Youtube）上托管视频，所以我不喜欢使用像 jQuery TubePlayer 这样的库......但概念保持不变）。

我的问题 - 还有其他方法可以做到这一点吗？我错过了一些明显的东西吗？django-autocomplete-light 不能与 iFrame 配合使用吗？

（模板/视频/index.html）

```
<iframe name="tvplayer" width="560" height="315" src="http://www.youtube.com/embed/CE0Q904gtMI" frameborder="0" allowfullscreen></iframe> 
```

(navigation_autocomplete/autocomplete.html)--我知道所有视频都将使用此代码返回相同的链接，但我什至无法让这个工作！

```
{% for video in videos %}    
    <a style="display:block" href="http://www.youtube.com/embed/3svKWr9LH4I" target="tvplayer">{{ video.title }} - {{ video.desc }}</a> 
{% endfor %} 
```

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T22:04:37.093

解决了我自己的问题...在 navigation_autocomplete/script.html 页面中，您必须直接更改 navigation_autocomplete javascript 处理程序，因为它会覆盖您放入 a 标签的任何其他样式/参数。

# php - 使用 $facebook->api 从页面中删除 Facebook 帖子

> ID：14016584
> 
> 赞同：5
> 
> 时间：2012-12-24T03:00:58.300
> 
> 标签：php, facebook, facebook-graph-api

我无法从我的网络应用程序中删除 Facebook 帖子。现在我知道[Facebook 文档](https://developers.facebook.com/docs/reference/api/)和其他 SO 帖子说要这样做：

```
You can delete objects in the graph by issuing HTTP DELETE requests to 
the object URLs, i.e,

DELETE https://graph.facebook.com/ID?access_token=... HTTP/1.1 
```

但由于我是个菜鸟，我不完全理解用 HTTP 请求删除的简短解释。由于我尝试时它不起作用，我假设简单地重定向到上面示例中形成的 url 不会删除任何内容。这意味着我现在必须了解 Web 开发的一些新领域……HTTP 请求。

这些是如何在php中完成的？[php手册](http://us.php.net/manual/en/class.httprequest.php)也没有多大帮助。

* * *

## 附加信息：

我尝试了许多不同的变体：

```
$facebook->api($post_url, 'DELETE', array('method'=> 'delete') ); 
```

我传递的 URL 是`'/post_id'`. 在`post_id`创建后捕获并存储到数据库中。此 id 与`$_GET['story_fbid']`可以在任何帖子永久链接上找到的匹配。也许这不是正确的 id？我正在使用以下内容检索 id：

```
//post to wall
$postResult = $facebook->api($post_url, 'post', $msg_body );
//capture the id of the post
$this->fb_post_id = $postResult['id']; 
```

当我运行上面的代码时，不会抛出任何错误。它被触摸是因为`echo`它运行后的诊断。

这些是我传递给 api 的不同字符串组合`$post_url`：

```
/postid                  api returns true, nothing is deleted from Facebook
/userid_postid           api returns false, Error: (#100) Invalid parameter
/postid_userid           api returns false, Error: (#1705) : Selected wall post for deletion does not exist
/accesstoken_postid      api returns false, Error: (#803) Some of the aliases you requested do not exist 
/postid_accestoken       api returns false, Error: (#803) Some of the aliases you requested do not exist 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-24T03:24:22.070

这应该有效：

```
$facebook->api("/YOUR_POST_ID","DELETE"); 
```

将返回一个布尔值，如果成功则返回 true，如果失败则返回 false。

尝试在删除时将 userid 添加到对象 ID，例如：

```
$facebook->api("/USER-ID_YOUR-POST-ID","DELETE"); 
```

喜欢：

```
$facebook->api("/12345132_5645465465454","DELETE");
//where 12345132 is fb userid and
//5645465465454 is object id --> post id 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T22:43:40.403

我已经使用具有 read_stream 和 manage_pages 权限的页面访问令牌成功地从页面中删除了帖子。

```
try {

        $args = array(
                  'access_token' => $page_token
                );

        $deleted = $facebook->api('/'.$post_id, 'DELETE', $args);

} catch (FacebookApiException $e) { 

            echo 'Delete review page wall error: ' . $e->getType() . ' ' . $e->getMessage();

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-10T10:30:04.663

您不能“取消发布”帖子，但这与删除帖子不同。删除帖子非常容易。

您只需要获取 COMMENT_ID 并将其发布到 Facebook。

```
 $post_url = 'https://graph.facebook.com/'. $COMMENT_ID .'?access_token=' .  $page_access_token . '&method=delete';
$ch = curl_init();
curl_setopt($ch, CURLOPT_URL, $post_url);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
$return = curl_exec($ch);
curl_close($ch); 
```

为了澄清这一点：如果您有权管理帖子，这在 Page API 之外有效。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-24T03:46:09.683

更新的答案：

根据您的评论“这是一个页面”，我查看了[Graph API 的页面](https://developers.facebook.com/docs/reference/api/page/)详细信息。如果我正确理解详细信息，则**[Page Posts](https://developers.facebook.com/docs/reference/api/page/#posts)****不支持 Delete**。详细信息（事件、帖子、问题等）中的每个连接都有一个创建部分，如果连接支持删除它有一个删除描述。Posts (to feed) 部分仅提及 Create，而不是 Delete。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-12-26T19:48:24.077

我可以使用 php SDK 5.4 从页面中删除帖子

```
$post = $fb->request('DELETE', '/'.$post_id,[], $page['accesstoken']) 
```

# ios - iOS：tabBarController 中的 setSelectedViewController 崩溃

> ID：14016588
> 
> 赞同：0
> 
> 时间：2012-12-24T03:01:41.690
> 
> 标签：ios

我正在开发一个 iOS 应用程序，其中我有一个标签栏控制器和相应的视图控制器。对于使用视图控制器设置的选项卡控制器中的每个选项卡。此设置在 .xib 文件本身中完成。但是，在 didFinishLaunchingWithOptions 中，我还添加了以下代码，以便在我的应用启动时将默认视图作为第二个选项卡视图启动，

```
self.viewController = [[SecondViewController alloc]initWithNibName:@"SecondViewController" bundle:[NSBundle mainBundle]];
[self.tabBarController setSelectedViewController:self.viewController]; // crash 
```

这里发生的情况是，它在 iOS 4 模拟器和设备上运行良好，但崩溃发生在 iOS 5 模拟器和设备中此代码的第二行。我们试图找出为什么它只在 iOS 5 设备/模拟器上崩溃，但仍然无法得出结论。如果视图控制器已经在 .xib 文件本身中设置，那么我不需要实例化对象并在 iOS5 的 didFinishLaunchingWithOptions 中进行这样的设置？这次崩溃的原因可能是什么，请指教。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-24T03:45:04.770

当您使用`setSelectedViewController`时，控制器必须是标签栏控制器`viewControllers`数组中的一个。但是你在这里创建了一个新的控制器，所以它必然会失败。你应该只使用`setSelectedIndex`. 这是最简单的。

因此，如果您使用的是 NIB，则`didFinishLaunchingWithOptions`可能如下所示：

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    self.window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];

    UIViewController *viewController1 = [[FirstViewController alloc] initWithNibName:@"FirstViewController" bundle:nil];
    UIViewController *viewController2 = [[SecondViewController alloc] initWithNibName:@"SecondViewController" bundle:nil];
    self.tabBarController = [[UITabBarController alloc] init];
    self.tabBarController.viewControllers = @[viewController1, viewController2];
    self.window.rootViewController = self.tabBarController;
    [self.window makeKeyAndVisible];

    // tell the tab bar controller to start with the second tab

    [self.tabBarController setSelectedIndex:1];

    return YES;
} 
```

如果使用故事板，并且您的初始控制器是该选项卡栏控制器，您可以：

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    UITabBarController *tabController = (UITabBarController *)self.window.rootViewController;
    [tabController setSelectedIndex:1];

    return YES;
} 
```

# jquery - jquery 事件传播

> ID：14016592
> 
> 赞同：0
> 
> 时间：2012-12-24T03:02:59.397
> 
> 标签：jquery, html

我有一个网页，当我点击一个链接时，它会打开一个“查看此项目”页面。在这第二页上，我可以单击 esc 键返回上一页。

在第二页上，我有一个按钮，它创建了一个用于选择照片的弹出表单。在这个弹出表单上，我可以单击 esc 返回主第二页。

问题是，当我在弹出表单中单击 esc 时，它会关闭弹出表单，然后返回到第一页。即就像我点击了两次 esc 一样。

我知道事件传播并尝试调用 e.preventDefault(); 在这部分代码之前，但它似乎不起作用。

我在这里缺少什么吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-24T03:11:11.490

您正在寻找的是对象`stopPropagation()`上的方法`Event`。这可以在 jquery 事件处理程序中调用，但它只是普通的 DOM/（纯 js）。所以在 jQuery 中：

```
$('#modal').on('keyup', function(e) {
  if (e.which === 27) {
    e.stopPropagation();
    // close the window
  }
}); 
```

这将防止事件冒泡到您的其他处理程序当前返回同一事件的页面。

# sql-server - 一次循环 5 条记录并将其分配给变量

> ID：14016596
> 
> 赞同：4
> 
> 时间：2012-12-24T03:03:13.887
> 
> 标签：sql-server, ssis

我有一个包含 811 条记录的表。我想**一次获取五条记录**并将其分配给变量。下次我在**SSIS**`foreach`中运行循环任务时，它将循环另外五条记录并覆盖变量。我试过用光标做，但找不到解决方案。任何帮助将不胜感激。我有这样的桌子，例如

 **```
ServerId ServerName
1         Abc11
2         Cde22
3         Fgh33
4         Ijk44
5         Lmn55
6         Opq66
7         Rst77
.           .
.           .
.           . 
```

我希望查询应该采用如下前五个名称并将其分配给变量

```
ServerId ServerName
1         Abc11
2         Cde22
3         Fgh33
4         Ijk44
5         Lmn55 
```

然后下一个循环采用另外五个名称并覆盖变量值，依此类推，直到最后一条记录被消耗。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-24T09:54:46.077

考虑到 ltn 的回答，这就是您如何实现限制 SSIS 中的行。

设计看起来像

![在此处输入图像描述](../Images/e02517857e308f55e8fc2f5108dbcd14.png)

第 1 步：创建变量

```
 Name       DataType 
  Count        int
  Initial      int
  Final        int 
```

第 2 步：对于第一个执行 SQL 任务，编写 sql 来存储计数

```
 Select count(*) from YourTable 
```

在`General`此任务的选项卡中选择 ResultSet as `Single Row`。

在 ResultSet 选项卡中，将结果映射到变量

```
 ResultName       VariableName
    0               User::Count 
```

第 3 步：在 For Loop 容器中输入如下所示的表达式

![在此处输入图像描述](../Images/9334828eec683f1b89123630eb1e34d6.png)

第 4 步：在 For 循环中拖动一个执行 SQL 任务并编写表达式 ![在此处输入图像描述](../Images/3c120cfb93f6eeb77b096a76f3dfa538.png)

在参数映射中映射`initial`变量

```
 VariableName    Direction   DataType   ParameterName   ParameterSize
   User::Initial   Input       NUMERIC     0                -1 
```

结果集选项卡

```
 Result Name     Variable Name
   0                 User::Final 
```

在 DFT 中，您可以编写 sql 来获取特定的行

![在此处输入图像描述](../Images/67240316deaa6554122d101119ea22de.png)

单击参数并选择变量`INITIAL`和`FINAL`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-24T03:21:49.667

如果您的数据不会在分页周期之间更新并且排序顺序始终相同，那么您可以尝试类似于以下的方法：

```
CREATE PROCEDURE TEST
(
    @StartNumber INT,
    @TakeNumber INT
)
AS
SELECT TOP(@TakeNumber) 
    *
FROM(
    SELECT
        RowNumber=ROW_NUMBER() OVER(ORDER BY IDField DESC),
        NameField
    FROM 
        TableName
)AS X   
WHERE RowNumber>=@StartNumber 
```**

# c# - 我可以运行 sqlite3 命令，但它不包含在环境变量中？

> ID：14016599
> 
> 赞同：0
> 
> 时间：2012-12-24T03:04:10.927
> 
> 标签：c#, sqlite

我只是好奇，当我找不到 sqlite3.exe 文件时，我怎么可能执行 sqlite3 命令？

试图在程序文件中找到它，没有找到。试图在环境变量中找到它，也没有找到。有任何想法吗？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-24T03:19:49.643

仅仅因为*你*不能并不意味着系统不能:-)

该[`where.exe`](https://stackoverflow.com/questions/304319/is-there-an-equivalent-of-which-on-windows)命令可用于查看在何处找到可执行文件：

```
> where sqlite3.exe 
```

（可执行文件应位于当前工作目录中*或*[`%PATH%`](https://superuser.com/questions/284342/what-are-path-and-other-environment-variables-and-how-can-i-set-or-use-them)作为环境变量中列出的路径之一中的文件。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-24T03:12:10.790

它的命令行 shell，不包含在 SQLite 框架中，
你可以从[这里](http://www.sqlite.org/sqlite-shell-win32-x86-3071501.zip)
下载它 更多种类的下载看[这里](http://www.sqlite.org/download.html)

# hadoop - 如何在 Hadoop 中的 close() 方法中发出？

> ID：14016602
> 
> 赞同：0
> 
> 时间：2012-12-24T03:05:18.957
> 
> 标签：hadoop, mapreduce

> **可能重复：**
> [如何在 Reducer 的 close 方法中发出](https://stackoverflow.com/questions/13557007/how-to-emit-in-the-close-method-of-reducer)

*如何在mapper类的**close*方法中发出 mapper 的最终结果？结果应该存储在哪里？有人可以通过为我编写一些代码来解释它吗？谢谢。

 ** * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-30T14:39:13.343

这是一些示例 Mapper 代码，基于 Reducer 中相同功能的类似答案。

```
public class Map extends MapReduceBase implements Mapper<LongWritable, Text, Text, IntWritable> {

    private OutputCollector<Text, IntWritable> collector = null;

    public void map(LongWritable key, Text value, OutputCollector<Text, IntWritable> output, Reporter reporter) throws IOException {

        // Mapper logic goes here

        collector = output;

    }

    public void close() {

        // Write to private variable collector here...

    }
} 
```*

# django - 如何检查通用模型模板中的权限？

> ID：14016605
> 
> 赞同：0
> 
> 时间：2012-12-24T03:05:49.817
> 
> 标签：django, django-models, django-templates, django-views

这可能有点难以解释，所以请多多包涵。

我有一个模板页面用作查看模型的基本页面：

```
<head>
    <title>{% block title %}{% endblock %}</title>
    <script type="text/javascript">
        <!--stuff-->
    </script>
</head>
<body>
    {% block detail %}{% endblock %}
    <p><input type="button" value="Edit" onclick="javascript:location.href='{{ model.get_edit_url }}';"/></p>
    <p><input type="button" value="Delete" onclick="confirm_delete('{{ model.get_delete_url }}');"/></p>
    <p><input type="button" value="Return" onclick="javascript:location.href='{{ model.get_show_all_url }}';"/></p>
</body> 
```

**我想在编辑**和**删除**按钮周围添加一个权限标签？

所以我想补充一点：`{% if perms.model.edit_model %}`但我必须做些什么才能让它通用？希望这个问题很清楚。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T03:16:26.067

我建议为此使用 django-guardian。

在模型的元类中，您可以将权限分配为元组。

权限=（（“编辑”，“可以编辑模型”）等）

然后您可以管理每个对象的编辑和删除。

然后要检查用户是否有权对该对象执行操作，您可以使用此处找到的模板标签[http://django-guardian.readthedocs.org/en/latest/api/guardian.templatetags.guardian_tags.html](http://django-guardian.readthedocs.org/en/latest/api/guardian.templatetags.guardian_tags.html) .

京东

# python - 将 dict 键折叠成一个键：Python

> ID：14016607
> 
> 赞同：-4
> 
> 时间：2012-12-24T03:05:57.577
> 
> 标签：python

所以我在一个列表中有一堆字典，它们的键是数字，值是字符串对象。类似的东西`[{0:'tom',1:'cat',2:'apache',3:'server',4:'open', 5:'now'},...]`，我喜欢得到类似的东西

`[{0: 'tom cat apache', 1:'server',2:'open',3:'now'},...]`通过将前 3 个键折叠成 1 个键并添加它们的值。这些键可能总是连续的，也可能不总是连续的或从零开始。

我可以使用 for 循环和 if 语句来做到这一点，但我的实现似乎很混乱。我敢肯定有一种pythonic方式。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T03:16:36.290

由于键不一定是连续的，我能想到的最好方法是：

```
items = sorted(d.items())

dict(enumerate([' '.join(b for a, b in items[:3])] + [b for a, b in items[3:]])) 
```

[这是一个演示。](http://codepad.org/VWHtgYoc)

# android - Android：使用索引颜色创建 8 位位图

> ID：14016608
> 
> 赞同：6
> 
> 时间：2012-12-24T03:06:06.597
> 
> 标签：android, graphics

你好。我正在Android平台上开发游戏应用程序。这是我的第一次安卓开发体验。我的游戏将实现精灵图形。我有 8 位格式的精灵，并为每个精灵系列定义了调色板。我需要将此精灵加载到 android.graphics.Bitmap 对象中。现在我像这样实现它：

```
int [] pixels = new int[spriteWidth * spriteHeight];
//here i'm filling pixels array
//... pixels[x,y] = myPalette[colorIndex];
Bitmap.createBitmap(spriteWidth, spriteHeight, Bitmap.Config.ARGB_8888);
bitmap.setPixels(pixelsArray, 0, spriteWidth, 0, 0, spriteWidth, spriteHeight); 
```

它工作得很好，但由于我指定了 ARGB_8888，我被迫为每个像素使用 4 个字节，所以我担心内存使用。

我的问题是：有没有办法用索引颜色创建 8 位位图，为其定义调色板并定义每个像素颜色索引？

PS 我注意到，如果我手动形成字节流，包含适当的 bmp 标头、调色板和像素数据，那么我可以使用以下方法正确加载它：

```
BitmapFactory.decodeStream(bmpStream); 
```

这是我的第二个问题：如果我以这种方式加载图像，在内存使用方面会比上述解决方案更有效吗？或者也许 bitmapFactory 使用自己的内部例程将我的流解码为相同的每像素 32 位格式？

非常感谢任何帮助。对不起，我的英语不好。

# assembly - x86 指令帮助：MOV [edx], eax

> ID：14016610
> 
> 赞同：8
> 
> 时间：2012-12-24T03:06:33.677
> 
> 标签：assembly, x86, mov

我正在阅读一本描述 C 链表以及它们如何在 x86 ASM 中表示的书。我很难理解指令`MOV [edx], eax`。

如果指令颠倒过来，`MOV eax, [edx]`我会理解为复制存储在 edx 中的内存地址所代表的 4 个字节，并将其存储在 eax 中。

MOV`[edx], eax`代表什么？

如果使用`[]`with`MOV`指令，我认为这意味着将驻留在内存地址的数据复制到它的目的地。如果这是真的，你怎么能把里面的东西复制`eax`到里面的数据值`edx`？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-12-24T11:39:03.763

这是英特尔汇编语法。在 Intel 汇编语法中，目标始终是第一个操作数，其余操作数是源操作数。x86 的另一种常用汇编语法是 AT&T，但由于 Intel 和 AT&T 语法看起来非常不同，因此它们很容易区分。

`mov [edx],eax`将 的值`eax`存储到内存中给定的地址`edx`（以小端字节顺序）。

`mov eax,[edx]`完全相反，从内存中读取存储的值，从给定的地址`edx`，并将其存储在`eax`.

`[reg]`总是意味着间接寻址，就像`*reg`C中的指针一样。

要复制`eax`to的内容`edx`，您只需要`mov edx,eax`. 目标是第一个操作数，源是第二个操作数。

# c# - 如何在wp7中将对象列表保存在隔离存储中

> ID：14016613
> 
> 赞同：2
> 
> 时间：2012-12-24T03:07:16.790
> 
> 标签：c#, .net, windows-phone-7, isolatedstorage

嗨，我有这个类来保存 RSS 提要项目。我有一个它们的列表，我想将它存储在 Windows phone 7 中的独立存储中。有人可以帮助我吗？我知道如何序列化类并将其作为单个 RSS 项目的单个对象保存在隔离存储中。

```
 public class RssItem
{       
    public RssItem(string title, string summary, string publishedDate, string url ,string subtitle ,string duration, Enclosure enclosure)
    {
        Title = title;
        Summary = summary;
        PublishedDate = publishedDate;
        Url = url;
        Subtitle = subtitle;
        Enclosure = enclosure;
        Duration = duration;
        PlainSummary = HttpUtility.HtmlDecode(Regex.Replace(summary, "<[^>]+?>", ""));
    }

   public string Title { get; set; }
   public string Summary { get; set; }
    public string PublishedDate { get; set; }
    public string Url { get; set; }
    public string PlainSummary { get; set; }
    public Enclosure Enclosure { get; set; }
    public string Description { get; set; }
    public string Mp3Url { get; set; }
    public string Subtitle { get; set; }
    public string Duration { get; set; }
} 
```

任何帮助，将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-24T09:15:38.320

您可以使用 xmlserializer 来完成。

保存列表的代码如下：

```
 var store = IsolatedStorageFile.GetUserStoreForApplication();
     if (store.FileExists(filePath))
            {
                store.DeleteFile(filePath);
            }
         using (var stream = new IsolatedStorageFileStream(filePath, FileMode.OpenOrCreate, FileAccess.Write, store))
         {
            var serializer = new XmlSerializer(typeof(List<RssItem>));
            serializer.Serialize(stream, RssItemsList);
         } 
```

检索代码如下：

```
var store = IsolatedStorageFile.GetUserStoreForApplication();

        if (store.FileExists( filePath))
        {
            using (var stream = new IsolatedStorageFileStream( filePath, FileMode.OpenOrCreate, FileAccess.Read, store))
            {
                var reader = new StreamReader(stream);

                if (!reader.EndOfStream)
                {
                    var serializer = new XmlSerializer(typeof(List<RssItem>));
                        RssItemsList= (List<RssItem>)serializer.Deserialize(reader);
                }
            }
        } 
```

您也可以使用 DataContractJsonSerializer 类以 Json 格式执行此操作

# javascript - 用于设计 Metro 风格网站的 CSS 和 JS 技术

> ID：14016617
> 
> 赞同：3
> 
> 时间：2012-12-24T03:08:15.223
> 
> 标签：javascript, css, jquery-plugins, user-interface, microsoft-metro

我正在使用[此代码建立一个网站](http://jsfiddle.net/fru9V/12/)

```
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <title>Title</title>
    <style>
        body {
            padding: 0;
            margin: 0;
            background-color: #dcf0f9;
            direction : rtl;
        }

        .clearfix:before, .clearfix:after {
            content: "";
            display: table;

        }

        .clearfix:after {
            clear: both;
        }

        .tile_1_1 {
            width: 120px;
            height: 120px;
        }

        .tile_2_1 {
            width: 248px;
            height: 120px;
        }

        .tile_2_2 {
            width: 248px;
            height: 248px;
        }

        .tile_1_2 {
            width: 120px;
            height: 248px;
        }

        .tile_4_3 {
            width: 504px;
            height: 376px;
        }

        .tile {
            float: right;
            margin: 4px;
            box-shadow: inset 0 0 0 1px rgba(255, 255, 255, 0.2);
        }

        .bottom {
            margin-bottom: 0;
        }

        .bottom_left {
            margin: 4px 4px 0 0;
        }

        .bottom_right {
            margin: 4px 0 0 4px;
        }

        .bottom_left_right {
            margin: 4px 0 0 0;
        }

        .top {
            margin-top: 0;
        }

        .top_left {
            margin: 0 4px 4px 0;
        }

        .top_right {
            margin: 0 0 4px 4px;
        }

        .top_left_right {
            margin: 0 0 4px 0;
        }

        .left {
            margin-left: 0;
        }

        .right {
            margin-right: 0;
        }

        .left_right {
            margin: 4px 0 4px 0;
        }

        .column_4 {
            width: 504px;
            float: right;
        }

        .column_2 {
            width: 248px;
            float: right;
        }

        .column_left {
            margin: 0 4px 0 0;
        }

        .column_midde {
            margin: 0 4px 0 4px;
        }

        .column_right {
            margin: 0 0 0 4px;
        }

        .backToOrigin {
            margin-top: -120px;
        }

        #container {
            margin-top: 150px;
            width: 3000px;
        }

        #sectionA {
            float: right;
            width: 1016px;
        }

        #sectionB {
            float: right;
            width: 504px;
            margin-right: 112px;
        }

        #slideShow {
            background-color: #aaa;
        }

        .typeB {
            background-color: #21b044;
        }

        .typeA {
            background-color: #1f65c5;
        }

        .typeC {
            background-color: #21b1e5;
        }

        .redBox {
            background-color: #fd3f1b;
        }

        .yellowBox {
            background-color: #fdbe21;
        }

        .greyBox {
            background-color: #5a5a5a;
        }

        .greenBox {
            background-color: green;
        }
    </style>
</head>
<body>
    <div id="container" class="clearfix">
        <section id="sectionA">
            <div class="column_4 column_right">
                <div id="slideShow" class="tile_4_3 tile top_left_right"></div>
                <div class="tile_2_1 tile tile bottom_right typeA"></div>
                <div class="tile_1_1 tile bottom typeB"></div>
                <div class="tile_1_1 tile bottom_left typeA"></div>
            </div>
            <div class="column_2 column_midde">
                <div class="tile_2_1 tile top_left_right typeB"></div>
                <div class="tile_1_1 tile right typeA"></div>
                <div class="tile_1_1 tile left yellowBox"></div>
                <div class="tile_1_1 tile right typeB"></div>
                <div class="tile_1_2 tile bottom_left typeA"></div>
                <div class="tile_1_1 tile bottom_right redBox backToOrigin"></div>
            </div>
            <div class="column_2 column_left">
                <div class="tile_1_1 tile top_right typeA"></div>
                <div class="tile_1_1 tile top_left typeC"></div>
                <div class="tile_2_1 tile left_right greyBox"></div>
                <div class="tile_2_2 tile bottom_left_right typeC"></div>
            </div>
        </section>
        <section id="sectionB">
            <div class="column_2 column_right">
                <div class="tile_2_1 tile top_right typeA"></div>
                <div class="tile_1_1 tile right typeC"></div>
                <div class="tile_1_1 tile left typeA"></div>
                <div class="tile_2_2 tile bottom_left_right greenBox"></div>
            </div>
            <div class="column_2 column_left">
                <div class="tile_1_1 tile top_right greenBox"></div>
                <div class="tile_1_1 tile top_left yellowBox"></div>
                <div class="tile_2_1 tile left_right typeC"></div>
                <div class="tile_1_2 tile bottom_right typeA"></div>
                <div class="tile_1_1 tile left typeB"></div>
                <div class="tile_1_1 tile bottom_left greyBox"></div>
            </div>
        </section>
    </div>
</body> 
```

​</p>

我使用浮动在页面中放置图块

我知道这不是这种设计的最佳方法

我希望这些图块在未来是动态的，我的意思是我将添加 JS 用于拖动和删除和移动这些图块并相互推动以适应该位置，另一件事是我想设计这个页面响应式，我的意思是调整窗口大小这些瓷砖移动并改变它们的位置和调整大小

我检查了[gridster 插件](http://gridster.net/)，但需要从头开始才能获得更多功能

这是我的问题：

CSS 是否有更好的解决方案，而不是使用浮动和不定位？（绝对，相对和......）

（不与以后的JS和上面的语句冲突）

支持IE8对我来说很重要

感谢您的帮助，这也是我的第一个 STACKOVERFLOW 问题；）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T03:24:22.460

我创建了类似`<div>`的东西，我只使用 float 来制作这些块。见[我的例子](http://jsfiddle.net/licson0729/WhpA9/)。它适用于浏览器，我希望这可以帮助你。

编辑：更新示例以显示使用不同大小的块时的布局。尽管如此，该示例仅使用 1 个`<div>`标签作为目标。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-24T03:47:24.753

你可能想看看像[流体广场](http://fluidsquares.com/)这样的东西，因为我认为这就是你想要的效果？

[这](http://dinosaurswithlaserz.com/2011/07/18/fluid-squares-v2/)是一篇关于它的博客文章。

# php - 在 smarty 中执行多维度的 sql 代码

> ID：14016633
> 
> 赞同：1
> 
> 时间：2012-12-24T03:12:04.537
> 
> 标签：php, mysql, smarty

我一直在尝试这样做很长时间，但我找不到如何做到这一点的好解决方案！Smarty 让我的事情变得更难了！尽管如此，我还是想在 Smarty 中展示它，因为我所有的程序都在 Smarty 中。我到处寻找解决方案或与我想要的类似的东西，但我找不到任何东西，我猜这里有人可以给我一个我想要的示例或给我一个适用于我给出的示例的代码。不管怎样，让我告诉你我有什么：

我有一个看起来像这样的表（表名：章节）：

```
date_add    manga_name  manga_title chapter_num 
12/23/2012  One Piece      OnePiece    002
12/23/2012  One Piece      OnePiece    003
12/22/2012  Naruto         Naru        002 
```

在 tpl 文件中可以说我有这个

```
{section name=chp loop=$chpt}   

{$chpt[chp].date_add}
{$chpt[chp].manga_name}</a>
<a href="{$chpt[chp].manga_title}/{$chpt[chp].chapter_num} ">{"%03d"|sprintf:$chpt[chp].chapter_num} </a>

{/section} 
```

这将在现实生活中以这种方式显示：

```
12/23/2012  One Piece  [0002][withURL]
12/23/2012  One Piece  [0003][withURL]
12/22/2012  Naruto [0002][withURL] 
```

我想如何展示它是这样的：

```
One Piece :
0002[withURL] 12/23/2012
0003[withURL] 12/23/2012
Naruto : 
0002[withURL] 12/22/2012 
```

我尝试了很多方法来执行它，但都失败了！我找了一些例子，但没有找到！我需要的是一个与我的相似的例子，以及如何用 smarty 做到这一点！Smarty 让事情变得更难，因为我不知道如何使用多维部分！以及为我的 MYSQL 查询添加什么！必须有办法做到这一点！这是我的带有 SQL 语句的 PHP 代码：

```
$chapter = $db->query("SELECT  date_add,  manga_name, manga_title, chapter_num FROM chapter ORDER BY ch_Id DESC Limit 0,6");
while($chpt = $db->fetch_array($chapter))
{$chps[] = $chpt;}
$smarty->assign('chpt' , $chps); 
```

这只是我所拥有的一个样本，如果你能给我一个灵魂，那么我可以理解其余的。

**基本上我想删除重复的 manga_name 结果并在它们下添加属于 manga_name 的所有 chapter_num。**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T04:27:18.397

我可以为你想两个选择。一种是格式化查询结果，使章节按manga_name 分组。下一步将是使用 mysql 中的存储过程来生成格式化的查询结果。或者，您可以使用我所说的先前/当前检查来跳过循环中的相同漫画名称。

这是第二个选项的原始未经测试的示例代码

```
{$prevMangaName = ''}
{foreach $chapters as $chapter}
    {if $chapter.manga_name != $prevMangaName}
        {$chapter.manga_name|capitalize}:<br>
    {/if}        
    {$chapter.chapter_num}[withURL] {$chapter.date_add}[withURL]<br>
    {$prevMangaName = $chapter.manga_name}
{/foreach} 
```

这里发生的情况是，之前的 manga_name 的记录被保留并与当前名称进行检查，并且仅在它们不同时才打印。

选项 1 解决方案。[PHP] 首先让我们从 DB 中获取数据，将所有 chapter_num(s) 连接成一个用逗号连接的字符串。（如果您正确地将章节存储为直接在数据库表中的串联字符串，您可以轻松避免此麻烦）

```
[_PSEUDO_CODE_ SOMEWHERE IN YOUR PHP]
$chapters = $db->query("select manga_name,group_concat(chapter_num separator ',') as chapter_numbers from chapter");

[SOMEWHERE IN YOUR TEMPLATE FILE]
// convert the chapter_numbers string into array, loop over and print results
{foreach $chapters as $chapterRow}
    {$chapterRow.manga_name|capitalize}:<br>
    {$chapterNumberArray = $chapterRow.chapter_numbers|explode:','}
    {foreach $chapterNumberArray as $chapterNumber}
        {$chaperNumber}[withURL] {$chapterRow.date_add}[withURL]<br>
    {/foreach}
{/foreach} 
```

参考：

[mysql group_concat](https://stackoverflow.com/questions/276927/can-i-concatenate-multiple-mysql-rows-into-one-field)

希望能帮助到你

# jquery - 进行两次 jQuery AJAX 调用并获取两者的上下文，即使其中一次失败

> ID：14016638
> 
> 赞同：0
> 
> 时间：2012-12-24T03:12:45.250
> 
> 标签：jquery, ajax, jquery-deferred

我想要两个对数据发出两个 AJAX 请求。一个或两个请求可能会失败。在这种情况下，我仍然想与来自两个请求（或成功请求）的数据进行交互。

如果我这样做：

```
$.when($.get("page1"), $.get("page2")).then(function(a1, a2) {

}) 
```

`then`只有两个请求都成功时，才会调用该函数，所以如果一个失败，我无法从成功的请求中获取任何数据。如果我当时使用failCallback，或者使用always方法，如下所示：

```
$.when($.get("page1"), $.get("page2")).then(function(a1, a2) {
    console.log("this is only called if both succeed.");
}, function(a1, a2, a3) {
    console.log("this is only called with a then() failure");
}).always(function(a1, a2, a3) {
    console.log("this will fire when always() does.");
}); 
```

failCallback 和 always 回调仅报告失败请求的数据，因此我无法获取有关成功请求的数据。同样，如果其中一个请求失败，则使用 done() deferred 不会调用。所以有一种情况，如果一个请求 404s，我无法从成功的函数中获取任何数据。

我想我可以解耦延迟，所以它们不在 when 循环中。但是，随后我遇到了确保两者都在继续之前完成的问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T03:21:56.820

这是一个选项（很抱歉没有使用 jQuery 延迟工具）

```
var NUM_CALLS = 2, count = 0, results = [], errors = [];
function callback(err, data) {
  count++;

  if (err){
    errors.push(err);
  }

  if (data){
    results.push(data);
  }

  if (count === NUM_CALLS) {
    done(errors,results);
  }
}

function ajax(url) {
  $.ajax({
    type: 'GET',
    url: url,
    success: function(){ return callback(null, arguments); },
    error: function(){ return callback(arguments, null)
  });
}

ajax('page1');
ajax('page2');

// now you have the errors and results
function done(errors, results) {

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-25T07:54:57.547

实用方法`$.get()`仅提供成功回调，但低级别`$.ajax()`提供成功、错误和始终回调（或它们的`.done()`, `.fail()`,`.then()`等价物）。通过解决您自己的 Deferred（对于每个将是 .get()），无论 ajax 是成功还是失败，您都可以获得所需的控制。

制定代码的方法一定有很多；这是一个，涉及一个适配器函数`liberalGet()`，它返回一个自由化的承诺，无论结果如何，它总是被解决并且永远不会被拒绝`$.ajax()`。

```
function liberalGet(url) {
    var dfrd = $.Deferred();
    $.ajax({
        url: url
    }).then(dfrd.resolve);
    return dfrd.promise();
}

$.when(liberalGet("page1"), liberalGet("page2")).done(function(a1, a2) {
    var textStatus = [ a1[1], a2[1] ];//"success", "notmodified", "error", "timeout", "abort", or "parsererror".
    console.log(textStatus.join(', '));
}); 
```

如您所见， arguments`a1[1]`使`a2[1]`您可以访问每个 ajax 响应的 textStatus。`a1[0]`，`a2[0]`让您可以访问 jqXHR 对象（及其属性）。因此，您可以根据应用程序的需要在处理程序内循环和分支。

# c++ - c++模板、静态方法和构造函数

> ID：14016639
> 
> 赞同：0
> 
> 时间：2012-12-24T03:12:48.987
> 
> 标签：c++, templates, destructor

以下代码在 Food-destructor 上（/之后）崩溃；如下面的堆栈所示；

```
6 operator delete()  0xb7e5f4bf 
5 std::string::_Rep::_M_destroy()  0xb7ec648b   
4 <symbol is not available> 0xb7ec64d0  
3 std::basic_string<char, std::char_traits<char>, std::allocator<char> >::~basic_string()  0xb7ec653e   
2 Food::~Food() Main.cpp:126 0x0804c33c 
1 main() Main.cpp:199 0x0804c288 
```

Food-ctor 从未被调用，但析构函数是？当“字符串 _text”的资源被释放时，AFAICT 事情变得一团糟，但我似乎无法理解为什么会出错。显然我可以将“string _text”更改为“string* _text”，但我宁愿理解为什么会出错。

```
class Food {
private:
    string _text;
public:
    Food(){
        cout << "ctor Food" << endl;
    }
    Food(string name) {
        cout << "ctor Food: name=" << name << endl;
    }

    virtual ~Food() {
        cout << "dtor Food" << endl;
    }
};

template<typename T>
class Action {
public:
    static T eat(int i) {
        cout << "Eat: " << i << endl;
    }
};

int main() {
    auto x = Action<Food>::eat(1);
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-24T03:17:06.333

你正在做的是*未定义的行为*。您将函数 ( `eat`) 定义为返回类型`T`，但实际上并没有*返回*任何内容。这导致分配未定义。

# perl - 在 perl 中移动目录

> ID：14016649
> 
> 赞同：4
> 
> 时间：2012-12-24T03:14:51.613
> 
> 标签：perl

我正在尝试使用 perl 在 ubuntu 的同一卷中移动目录。

我在 Perl 中使用了 move （ File::Copy ）命令，如下所示

```
move($dir1, $dir2);.  # Doesn't work. 
```

预计移动后 $dir1 将位于 $dir2 之下。但是收到一个错误，说“是一个目录”。

但是当我使用 system mv 时，它可以完美运行。

```
system("mv $dir1 $dir2"); #This works!. 
```

我搜索了谷歌并了解到 move 应该与 linux 中的 mv 完全一样？有任何想法吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-12-24T03:24:27.903

如果要移动调用 move`./dir1`下的目录，如下所示：`./dir2`

```
move("./dir1", "./dir2/dir1"); 
```

我认为你正在做：

```
move("./dir1", "./dir2/"); 
```

抱怨是因为`./dir2`已经存在。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-24T04:00:28.547

```
use File::Copy::Recursive;
rmove('foo/bar/baz', '/etc/'); 
```

# ruby - 乘客找不到捆绑器

> ID：14016650
> 
> 赞同：0
> 
> 时间：2012-12-24T03:14:53.367
> 
> 标签：ruby, rubygems, bundler, passenger, redmine

我拼命地尝试在我的 debian 服务器上设置 Redmine。我管理了几乎所有东西（该界面与 webrick 一起使用），但我希望它可以通过 dev.kaleydra.de 访问，我想通过使用乘客 + apache2 模块来解决这个问题。
所以现在当我访问 dev.kaleydra.de 时，我的当前状态是这条消息

错误消息：Redmine 需要 Bundler。请安装它`gem install bundler`。

但是捆绑器肯定已安装！（捆绑安装工作完美）

一些信息：

```
 gem environment
RubyGems Environment:
  - RUBYGEMS VERSION: 1.8.23
  - RUBY VERSION: 1.9.3 (2012-04-20 patchlevel 194) [x86_64-linux]
  - INSTALLATION DIRECTORY: /usr/local/lib/ruby/gems/1.9.1
  - RUBY EXECUTABLE: /usr/local/bin/ruby
  - EXECUTABLE DIRECTORY: /usr/local/bin
  - RUBYGEMS PLATFORMS:
    - ruby
    - x86_64-linux
  - GEM PATHS:
     - /usr/local/lib/ruby/gems/1.9.1
     - /root/.gem/ruby/1.9.1
  - GEM CONFIGURATION:
     - :update_sources => true
     - :verbose => true
     - :benchmark => false
     - :backtrace => false
     - :bulk_threshold => 1000 
```

我尝试将其添加到 enviroment.rb：

```
ENV['GEM_HOME']='/usr/local/lib/ruby/gems/1.9.1'
ENV['GEM_PATH']='/usr/local/lib/ruby/gems/1.9.1' 
```

我可能会注意到我无法运行乘客安装 apache2 模块，因为它不允许我安装 libpq5（Plesk 使用较新的版本，并且它特别请求“libpq5（= 8.4.13-0squeeze1）”与 apt -get），但是由于乘客正在显示页面，因此看起来它已经可以工作了...

我有点绝望，有什么线索吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-05T23:15:38.020

我需要你的 apache 配置文件。

如果您安装了所有需要的 gem，但乘客仍然抱怨找不到 gem，请检查您的“apache 用户”是否有权访问 gem 文件夹。

例如，您的 gems 是由 root 安装的，但您的 apache-user 不是 root，那么就会发生此错误。

解决方案很简单，如果有一个名为 root 的帐户（例如在 Centos 中），只需将这些行添加到您的 apache 配置文件（httpd.conf 左右）

```
User root
Group root 
```

有关“root，apache”的更多详细信息，请参阅此帖子：[https ://serverfault.com/questions/103644/apache-user-root-access](https://serverfault.com/questions/103644/apache-user-root-access)

# java - 使用 for 循环将节点项添加到 Java Graph

> ID：14016652
> 
> 赞同：1
> 
> 时间：2012-12-24T03:15:02.990
> 
> 标签：java, graph, edges

我正在尝试将新创建的对象添加到网格和图形中。具体来说，如何使用 for 循环有效地将节点添加到图中。它们的网格被设置为双数组，以更新初始视图。（对象网格是模型并通过推送更新视图）。我还使用 for 循环中 i 和 j 中的项目设置了一个 HashMap，以定义对象的键。但是，为了建立一个图形以便以后计算从节点到节点的最短路径，我需要将这些节点添加到图形中。我想使用 Djikstra 的算法来计算最短路径。我可以创建一个条件语句来定义网格中的角节点和边缘节点是什么，并定义哪些项目将具有双向边缘，但这似乎是一个“长切”。

下面是关于我如何创建前两项（创建双数组和 HashMap）的构造函数代码：

```
// **Constructor
// Construct a new Grid object. Sets up a HashMap of square object in order efficiently to get 
// and add Square objects later.
public ObjectGrid(Integer width, Integer height) 
{
    // View
    gui = new GUI();        // Instantiate GUI
    boardView = new BoardView(width,height);        // Instantiate BoardView

    // Initialize Gui, set time and add simulation event listener to model (ObjectGrid)
    gui.initGUI(BoardView);
    gui.addSimulationEventListener(this);

    // Initialize turnInSteps variable count to 0
    turnInSteps = 0;

    // Initialize numberOfDays variable count to 0
    numberOfDays = 1;

    // Instantiate HashMap
    objectHashMap = new HashMap();

    // Declare new object grid using double array of type objects.
    // Size determined by parameter Integer values in constructor
    myObjectGrid = new ObjectType[width][height];

    // Instantiate Graph object
    Graph graph = new ListGraph();

    // For loop sets up the initial grid with ObejctType using a double array. After
    // the completion of this loop, the grid will have XXX objects in the grid
    // each with a reference to an object. Objects are also added 
    // to HashMap using coordinates as keys and square objects as values.
    for(int i = 0; i < width; i++) 
    {  
        // Iterate through rows
        for(int j = 0; j < height; j++) 
        {  
            // Iterate through columns
            myObjectGrid[i][j] = new ObjectType();  // Instantiate a new Square at each row/column using default constructor
            gridView.addObjectView(myObjectGrid[i][j].getObjectView(), i, j);  // Add object view to each row/column placement
            String hashMapKey = (i + ", " + j); // Use values from i and j as Key for objects HashMap
            myObjectGrid[i][j].setID(hashMapKey);  // Add ID's for each ObjectView to display in object using values from i and j
            objectHashMap.add(hashMapKey, myObjectGrid[i][j]);  // Add object to HashMap using string value of coordinates as key
            listGraph.add(myObjectGrid[i][j]);

            // Pseudo code
            if (i != (width-height) && (j != height) etc) 
            {
                listGraph.addBidirectionalEdge(mySquareGrid[i][j], (mySquareGrid[i][j+1]), 1);
                listGraph.addBidirectionalEdge(mySquareGrid[i][j], (mySquareGrid[i+1][j]), 1);
                listGraph.addBidirectionalEdge(mySquareGrid[i][j], (mySquareGrid[i+1][j+1]), 1);
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-24T05:03:15.190

> 通过我所做的单元测试，图中的顶点返回 null。

原因是以下几行：

```
listGraph.addBidirectionalEdge(mySquareGrid[i][j], (mySquareGrid[i][j+1]), 1);
listGraph.addBidirectionalEdge(mySquareGrid[i][j], (mySquareGrid[i+1][j]), 1);
listGraph.addBidirectionalEdge(mySquareGrid[i][j], (mySquareGrid[i+1][j+1]), 1); 
```

您正在初始化`mySquareGrid`并使用来自未来的节点创建边。`j+1`这些带有和的节点`i+1`此时为空。

尝试最简单的解决方案 - 在网格初始化之后，通过网格执行相同的循环并创建图形的边缘。

此外，您可以尝试将其更改为以下内容：

```
listGraph.addBidirectionalEdge(mySquareGrid[i][j-1], (mySquareGrid[i][j]), 1);
listGraph.addBidirectionalEdge(mySquareGrid[i-1][j], (mySquareGrid[i][j]), 1);
listGraph.addBidirectionalEdge(mySquareGrid[i-1][j-1], (mySquareGrid[i][j]), 1); 
```

# c# - 移除距离太近的数组元素

> ID：14016660
> 
> 赞同：-2
> 
> 时间：2012-12-24T03:16:12.590
> 
> 标签：c#, arrays

我有一个浮点元素数组，我正在尝试删除彼此靠近的元素。即，如果有两个元素的距离小于 0.4（例如 15.1 和 15.3），我想删除第二个元素。0.4 应该是算法的输入参数。

该数组已按特定顺序（不是升序/降序）排序，我需要保留该顺序。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-24T04:13:47.463

我创建了一个`ApproximateFloatComparer`类，如下所示：

```
public class ApproximateFloatComparer : IComparer<float>
{
    public float Range { get; set; }

    public ApproximateFloatComparer(float range)
    {
        this.Range = range;
    }

    public int Compare(float x, float y)
    {
        if (x - this.Range < y && x + this.Range > y)
            return 0;
        else return x.CompareTo(y);
    }
} 
```

然后创建一个去重的方法：

```
public static List<float> Deduplicate(List<float> floats, float range)
{
    var dedup = new List<float>();
    var comparer = new ApproximateFloatComparer(range);
    foreach (var @float in floats)
        if (!dedup.Any(f => comparer.Compare(f, @float) == 0))
            dedup.Add(@float);
    return dedup;
} 
```

然后将它们结合起来：

```
var floats = new List<float>() { 5, 8, 2, 13, 6, 9, 4, 3, 2.1f, 8.6f, 2.2f };
floats = Deduplicate(floats, 0.4f); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-24T04:28:56.913

通过一个简单的`while`, 使用`List<float>`而不是`array`, 和一个扩展方法：

```
public static void Deduplicate(this List<float> values, float delta, int decimals)
{
    int index = 0;
    while (index < values.Count)
    {
        float value = values[index];

        int i = index + 1;
        while (i < values.Count)
        {
            if (Math.Round(Math.Abs(value - values[i]), decimals) < delta)
                values.RemoveAt(i);
            else
                ++i;
        }
        ++index;
    }
} 
```

并使用它：

```
List<float> values = new List<float> { 3.4f, 1, 2, 3, 4, 1.2f, 2.5f, 3.6f, 1 };
values.Deduplicate(0.4f, 5);//       { 3.4f, 1, 2,    4,       2.5f          }
values.Deduplicate(0.4f, 10);//      { 3.4f, 1, 2, 3, 4,       2.5f          } 
```

# javascript - 全选方法后jQuery复选框不触发事件

> ID：14016664
> 
> 赞同：0
> 
> 时间：2012-12-24T03:16:45.023
> 
> 标签：javascript, php, jquery, checkbox, jquery-events

我有一个带有一些 jQuery 复选框的表格。单击每个复选框时，这会触发一个方法来更新底行中的总计，使用：`onclick="UpdateTotalFee()"`

当页面最初加载时，一切都按预期完美运行。每个复选框单击都会触发该`UpdateTotalFee()`方法。

出现问题的地方是在用户单击全选链接之后。这可以正确选择所有复选框，但是，随后单击复选框不再触发更新总数的方法。

当我在 firebug 中进行检查时，我可以看到的一个区别是，当页面首次加载时，单击复选框似乎是在单击`span.checkboxplaceholder`，但是在单击全选链接后，随后单击复选框似乎不会调用一样。

我希望我已经很好地解释了这种情况。以下是该表的完整代码：

```
<table border="1">
<tr>
    <th></th>
    <th style="vertical-align:middle;">Number</th>
    <th style="text-align:left; vertical-align:middle;">Owner</th>
    <th style="text-align:left; vertical-align:middle;">Address</th>
    <th style="vertical-align:middle;">Code</th>
    <th style="vertical-align:middle;">Class</th>
    <th style="vertical-align:middle;">Filing Fee</th>
    <th style="text-align:center; width:75px;">Review ?<br />
    <a href="" onclick="select_all_com(); return false"><strong>All</strong></a>
     &nbsp;&nbsp;or&nbsp;&nbsp;
    <a href="" onclick="select_none_com(); return false"><strong>None</strong></a>
    </th>
</tr>

<?php foreach ($property['commercial'] as $key => $value): ?>
    <tr>
        <th><?php echo str_pad($row++, 2, '0', STR_PAD_LEFT); ?></th>
        <td><a href= "<?php echo site_url() . "propertydetail/viewpropertydetail/" . $value['property#']; ?>"><?php echo RollNumber($value['property#']); ?></a></td>
        <td style="text-align:left"><?php echo $value['Property Owner']; ?> </td>
        <td style="text-align:left"><?php echo $value['Property Address']; ?></td>
        <td style="text-align:middle" ><?php echo number_format($value['PC'],0); ?></td>
        <td><?php echo $value['Class']; ?></td>
        <td><?php echo money_format('$%.0i', 140); ?></td>
        <td id="com" style="padding-left:25px;" onclick="UpdateTotalFee()">
<input type="checkbox" name="file_com_appeal" class="com-checkbox" value="<?php echo $value['property#'] ?>"></td>
    </tr>
<?php endforeach; ?>
    <th colspan="6" style="text-align:right; padding:1% 1% 1% 0%;">       
    <h4>TOTAL</h4><h5><span id="AppealSelected"></span></h5></th>
    <th ><h4><span id="AppealFeeTotal"></span></h4></th>
    <th></th> 
```

这是应该在每次单击复选框时调用的 Javascript 函数：

```
function UpdateTotalFee(){
        var AppealCount = 0;
        $('input[name=file_com_appeal]').each(function(){
            if($(this).attr('checked')){
               AppealCount++;
            }
        });
        $('#AppealSelected').text(                                      
        (AppealCount == 0 ? '' : '(' + AppealCount + ' of ' + <?php echo count($property['commercial']);?> + (AppealCount == 1 ? ' property selected)' : ' properties selected)')));    
        $('#AppealFeeTotal').text("$"+(AppealCount*140));
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T03:44:59.910

如果它是（未）选中的，复选框会触发“ `onchange`”事件。所以宁愿在你的 javascript 代码中监听这个事件。然后检查是否在您的事件处理程序中选中该复选框以将更改应用于总金额。样本：

```
[HTML]
<input type="checkbox" name="check" id="check" value="1" onchange="updateAmount();"/>

[JS]
function updateAmount(){
     if($('input#check').is(':checked')){
           // checked
     }else{
          // unchecked
     }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-24T06:59:14.557

请创建一个新函数并在单击全选时调用该函数并将总行数作为该函数的参数传递，以便您可以轻松计算总金额。

喜欢`totalamount= count*140` 并使用以下代码设置此值

```
$('#AppealFeeTotal').text("$"+(totalamount)); 
```

# c# - c# 通过cmd运行命令

> ID：14016665
> 
> 赞同：0
> 
> 时间：2012-12-24T03:16:52.247
> 
> 标签：c#, .net, apache, cmd

我需要在 cmd 上执行两个命令。尽管我进行了研究，但我还没有找到可行的解决方案来解决我的问题。首先，我需要 cd 到目录，然后在该目录中运行一个 exe。

```
using (Process process = new Process())
{
    process.StartInfo.UseShellExecute = false;
    process.StartInfo.RedirectStandardOutput = true;
    process.StartInfo.RedirectStandardError = true;
    process.StartInfo.WorkingDirectory = @"C:\Program Files\Blacksmith\bin\apache\bin";
    process.StartInfo.FileName = "cmd.exe";
    process.StartInfo.Arguments = @" \c httpd.exe";

    // Redirects the standard input so that commands can be sent to the shell.
    process.StartInfo.RedirectStandardInput = true;

    process.OutputDataReceived += ProcessOutputDataHandler;
    process.ErrorDataReceived += ProcessErrorDataHandler;

    process.Start();
    process.BeginOutputReadLine();
    process.BeginErrorReadLine();

    process.WaitForExit();
} 
```

我正在尝试通过 cmd.exe 执行 httpd.exe 以阻止 apache 作为 Windows 服务运行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T23:10:40.543

我认为您可以尝试 /c 而不是 \c

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-24T03:27:20.497

这对你有用吗？

```
using (Process process = new Process())
{
    process.StartInfo.UseShellExecute = false;
    process.StartInfo.FileName = @"C:\Program Files\Blacksmith\bin\apache\bin\httpd.exe";

    // Redirects the standard input so that commands can be sent to the shell.
    process.StartInfo.RedirectStandardOutput = true;
    process.StartInfo.RedirectStandardError = true;

    process.OutputDataReceived += ProcessOutputDataHandler;
    process.ErrorDataReceived += ProcessErrorDataHandler;

    process.Start();
    process.BeginOutputReadLine();
    process.BeginErrorReadLine();

    process.WaitForExit();
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-24T03:33:53.503

尝试这个

```
using (Process process = new Process())
{
    process.StartInfo.UseShellExecute = false;
    process.StartInfo.RedirectStandardOutput = true;
    process.StartInfo.RedirectStandardError = true;
    process.StartInfo.WorkingDirectory = @"C:\Program Files\Blacksmith\bin\apache\bin";
    process.StartInfo.FileName = "httpd.exe";

    // Redirects the standard input so that commands can be sent to the shell.
    process.StartInfo.RedirectStandardInput = true;

    process.OutputDataReceived += ProcessOutputDataHandler;
    process.ErrorDataReceived += ProcessErrorDataHandler;

    process.Start();
    process.BeginOutputReadLine();
    process.BeginErrorReadLine();

    process.WaitForExit();
} 
```

# php - 如果访问页面超过 5 次，将访问者重定向到不同的 url？

> ID：14016674
> 
> 赞同：1
> 
> 时间：2012-12-24T03:18:31.820
> 
> 标签：php, session, redirect, cookies

如果用户访问页面超过 5 次，我会尝试重定向用户。所以基本的想法是，如果用户没有登录我的网站并且他们正在浏览用户个人资料（profile.php），那么这会计算 cookie 会话的点击次数并重定向到一个页面以表示注册或其他内容.

我是 php 新手，不知道从哪里开始。有人可以告诉我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-24T03:28:41.107

基本上，您应该能够在服务器端或 cookie 的会话变量中设置计数器。在每次访问个人资料页面时增加该计数器。如果该计数器大于`5`然后使用 php`header`函数将用户重定向到您的注册页面。这是使用会话变量来实现此目的的快速代码提示：

```
if(! isset($_SESSION["ProfileVisitCount"])){
    $_SESSION["ProfileVisitCount"] = 1;
}

$_SESSION["ProfileVisitCount"]++;

if($_SESSION["ProfileVisitCount"] > 5){
    header("Location: http://domain.com/signup");
    exit();
} 
```

还要确保在使用这些代码之前启动 php 会话`session_start()`。

同样的事情可以使用这样的 cookie 来实现：

```
if(! isset($_COOKIE["ProfileVisitCount"])){
    setcookie("ProfileVisitCount", "1", time()+3600);
}

if($_COOKIE["ProfileVisitCount"] > 5){
    header("Location: http://domain.com/signup");
    exit();
}
else {
    setcookie("ProfileVisitCount", ($_COOKIE["ProfileVisitCount"] + 1), time()+3600);
} 
```

## 参考

*   [PHP setcookie() 定义了一个 cookie 与其余的 HTTP 标头一起发送。](http://php.net/manual/en/function.setcookie.php)
*   [PHP会话基本用法](http://php.net/manual/en/session.examples.basic.php)
*   [PHP header() — 发送原始 HTTP 标头](http://php.net/manual/en/function.header.php)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-24T03:29:02.480

这在 PHP 中很容易实现。只需使用计数值设置一个会话并在每次访问后读取它。然后如果计数为 5 或更多，则可以重定向。下面是一个示例代码

```
!session_id() ？session_start() : null;
if(!isset($_SESSION['page_access_count'])){
    $_SESSION['page_access_count'] = 1;
}elseif($_SESSION['page_access_count'] >= 5){
    //重定向到注册页面
    header('位置：/signup.php');
    出口;
}

    // 增加页面访问会话值
    $_SESSION['page_access_count']++;

    ...

```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-24T03:30:42.290

使用 cookie。这是我在 PHP 中的做法：

```
<?php
if (!isset($_COOKIE["cookie1"]))
{
  setcookie(
  "cookie1",
  "1",
  time() + (20 * 365 * 24 * 60 * 60),
  '/',
  '.example.com'
);
}
else{
  setcookie(
  "cookie2",
  "2",
  time() + (20 * 365 * 24 * 60 * 60),
  '/',
  '.example.com'
);
else{
  setcookie(
  "cookie3",
  "3",
  time() + (20 * 365 * 24 * 60 * 60),
  '/',
  '.example.com'
);
}
else{
  setcookie(
  "cookie4",
  "4",
  time() + (20 * 365 * 24 * 60 * 60),
  '/',
  '.example.com'
);
}
else{
  setcookie(
  "cookie5",
  "5",
  time() + (20 * 365 * 24 * 60 * 60),
  '/',
  '.example.com'
);
}
else
{
header("Location: http://domain.com/signup");
}
}
?> 
```

确保将 .example.com 替换为您的域名。并保留“。” 而不是“www”。如果您希望它在使用带有“www”的域名运行它时工作，或者没有它。

告诉我它是否有效......我总是可以修改它。

# bash - 加快我的 bash 脚本的方法？

> ID：14016676
> 
> 赞同：-1
> 
> 时间：2012-12-24T03:18:44.963
> 
> 标签：bash

然而，我知道它比手工操作要快得多。但是有没有可能加快这个脚本的速度？多线程什么的？我是 unix 新手，这是我的第一个脚本 =)。打开以获取建议或所做的任何更改。脚本似乎在某个生成的域上随机暂停了很多。

```
#!/bin/bash
for domain in $(pwgen -1A0B 2 10000); 
do
      whois $domain.com | egrep -q '^No match|^NOT FOUND|^Not fo|AVAILABLE|^No Data   Fou|has not been regi|No entri'
          if [ $? -eq 0 ]; then
              echo "$domain.com : available"
              else
              echo "$domain.com"
          fi
done 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T03:41:54.120

首先创建一个具有所需域名的文件。调用这个`domains.lst`：

```
pwgen -1A0B 2 10000 > domains.lst 
```

然后从中创建较小的文件：

```
split --lines=100 domains.lst domains.lst. 
```

然后创建一个脚本，该脚本获取文件名并使用`whois`. 还创建一个输出文件`input.out`。

创建另一个脚本，用于`&`在后台为所有小块启动上述脚本。在所有后台任务完成后合并输出。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-24T08:52:28.590

在拆分和分配之前，

**警告**这似乎没有用：要求`pwgen`构建由和之间的字符组成的 10'000 行......`two`也只有可能性（事实上，当尝试构建*可*说的单词时，只有 625 种可能性）。`a``z``echo $((26*26)) -> 676``pwgen`

 *```
pwgen -1A0B 2 10000 | sort | uniq -c | sort -n | tail
 27 ju
 27 mu
 27 vs
 27 xt
 27 zx
 28 df
 28 sy
 28 zc
 29 dp
 29 zd 
```

因此，使用此命令，您最多可以执行**29 次**相同的操作。

尝试运行 10 倍以`pwgen -1A0B 2 10000`打印提出了多少不同的组合以及提出了更多时间和更少时间的组合：

```
for ((i=10;i--;)); do
    echo $(
        (
            (
                pwgen -1A0B 2 10000 |
                    sort |
                    uniq -c |
                    sort -n |
                    tee /dev/fd/6 |
                    wc -l >/dev/fd/7
            ) 6>&1 | (
                head -n1
                tail -n1
            )
        ) 7>&1
    )
  done
6 bd 625 31 bn
3 bj 625 29 sq
6 je 625 30 ey
4 ac 625 30 sz
5 ds 625 29 wf
4 xw 625 28 qb
4 jj 625 30 pa
6 io 625 29 sg
4 vw 625 30 kb
5 fz 625 31 os 
```

这个打印：

```
|  |  |   |  |
|  |  |   |  \- max proposed pattern
|  |  |   \---- number of times max proposed pattern was issued
|  |  \-------- number of different differents purposes
|  \----------- min proposed pattern
\-------------- number of times min proposed pattern was issued 
```*

# java - 将preparedstatement插入数据库 - PSQL

> ID：14016677
> 
> 赞同：0
> 
> 时间：2012-12-24T03:18:48.683
> 
> 标签：java, postgresql, jdbc

这似乎是一个非常简单的问题，但我无法弄清楚我的问题是什么。我有一个 addTask 方法，它向我们的数据库添加一些信息，如以下代码所示：

```
public static boolean addTask(String name, String question, int accuracy, int type){
    StringBuilder sql = new StringBuilder();
      sql.append("INSERT INTO tasks (name, question, type, accuracy) ");
      sql.append("VALUES(?, ?, ?, ?)");
      try {
        Connection c = DbAdaptor.connect();
        PreparedStatement preparedStatement = c.prepareStatement(sql.toString());
        preparedStatement.setString(1, name);
        preparedStatement.setString(2, question);
        preparedStatement.setInt(3, type);
        preparedStatement.setInt(4, accuracy);
        preparedStatement.execute();
        preparedStatement.close();
        c.close();
            return true;
      }       
      catch (SQLException e) {
          e.printStackTrace();
          return false;
      }
} 
```

我的问题是preparedStatement.execute() 总是返回false，表示信息没有被添加到数据库中。我可以运行 psql ，这确认没有任何内容写入数据库。该连接肯定连接到正确的数据库（我放入了一些其他的 printlns 等来检查这个）。我正在尝试插入一个新初始化的表，如下所示：

```
CREATE TABLE tasks
(
  id SERIAL PRIMARY KEY,
  submitter INTEGER REFERENCES accounts (id),
  name VARCHAR(100) NOT NULL,
  question VARCHAR(100) NOT NULL,
  accuracy INTEGER NOT NULL,
  type INTEGER REFERENCES types (id),
  ex_time TIMESTAMP,
  date_created TIMESTAMP
); 
```

DbAdaptor.connect() 的代码：

```
public static Connection connect(){
    try {
        Class.forName("org.postgresql.Driver");
    } catch (ClassNotFoundException e1) {
        // TODO Auto-generated catch block
        e1.printStackTrace();
    }
    Properties properties = new Properties();
      properties.setProperty("user", USER);
      properties.setProperty("password", PASSWORD);
    try {
        return DriverManager.getConnection(URL, properties);
    } catch (SQLException e) {
        e.printStackTrace();
    }
    return null;
} 
```

where`USER`和`PASSWORD`是类中的静态字段

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-24T03:23:30.523

您误解了 的返回值[`PreparedStatement#execute()`](http://docs.oracle.com/javase/7/docs/api/java/sql/PreparedStatement.html#execute%28%29)。

请仔细阅读[javadoc](http://docs.oracle.com/javase/7/docs/api/java/sql/PreparedStatement.html#execute%28%29)：

> ### 回报：
> 
> `true`如果第一个结果是一个`ResultSet`对象；`false`如果第一个结果是更新计数或没有结果。

`false`因此，它在`INSERT`查询中返回 - 正如完全预期的那样。它仅`true`在`SELECT`查询时返回（但您通常希望使用[`executeQuery()`](http://docs.oracle.com/javase/7/docs/api/java/sql/PreparedStatement.html#executeQuery%28%29)它直接返回 a `ResultSet`）。

如果您对受影响的行感兴趣，请[`PreparedStatement#executeUpdate()`](http://docs.oracle.com/javase/7/docs/api/java/sql/PreparedStatement.html#executeUpdate%28%29)改为使用。`int`它根据[javadoc](http://docs.oracle.com/javase/7/docs/api/java/sql/PreparedStatement.html#executeUpdate%28%29)返回一个：

> ### 回报：
> 
> (1) SQL 数据操作语言 (DML) 语句的行数或 (2) 0 用于不返回任何内容的 SQL 语句

返回值 1 或更大则表示插入成功。

* * *

**与具体问题无关**：您的代码正在泄漏数据库资源。请仔细阅读[JDBC 中 Connection、Statement 和 ResultSet 应该多久关闭一次？](https://stackoverflow.com/questions/5602772/how-often-should-statement-and-resultset-objects-be-closed-in-jdbc)

# registrykey - 是否可以为单个 MIME 类型注册 2 个扩展名（文件类型）？

> ID：14016678
> 
> 赞同：0
> 
> 时间：2012-12-24T03:19:07.757
> 
> 标签：registrykey

我有 2 个文件扩展名需要与一个应用程序关联。例如，我正在注册一个：

```
Registry.SetValue(HKEY_CLASSES_ROOT, ".xyz", "Content Type", "application/x-player", REG_SZ);
Registry.SetValue(HKEY_CLASSES_ROOT, "MIME\\Database\\Content Type\\application/x-player", "", "", REG_SZ);
Registry.SetValue(HKEY_CLASSES_ROOT, "MIME\\Database\\Content Type\\application/x-player", "Extension", ".xyz", REG_SZ); 
```

是否可以为此 mime 类型条目注册附加扩展？

# ruby - Ruby中数组的反向顺序与索引计数器

> ID：14016680
> 
> 赞同：0
> 
> 时间：2012-12-24T03:19:27.967
> 
> 标签：ruby

我有一个数组`@dates`，它们是 UTC 日期，并且按递增顺序排列。我想翻转数组的索引，以便日期按降序排列。我熟悉 JS 和 Java，不知道如何在 ruby​​ 中使用指针/索引计数器。

```
@dates = [//dates are in here already]

@reverseDates = []
@dates.each do |d|
  @reverseDates << @dates.last
end

@dates = @reverseDates 
```

部分问题是我认为它正在复制 的最后一个索引`@dates`，而不是在推送时将其移动到另一个数组。

所以我通过在数组前面加上它来让它工作，但是你如何在 Ruby 中包含索引计数器来完成这个？

```
@reverseDates = []
@dates.each do |d|
  @reverseDates.unshift(d)
end

@dates = @reverseDates 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-24T03:37:41.147

Ruby 有一个反转数组：

```
@dates.reverse! 
```

来自[http://ruby-doc.org/core-1.8.7/Array.html#method-i-reverse-21](http://ruby-doc.org/core-1.8.7/Array.html#method-i-reverse-21)

# url - URL 重写 htaccess 我的网站

> ID：14016691
> 
> 赞同：0
> 
> 时间：2012-12-24T03:21:40.807
> 
> 标签：url, rewrite

我希望能够在我的网站上访问此 URL：

www.mysite.com/author/username

通过这个

www.mysite.com/username

请考虑人们应该能够使用这两个 url 访问，并且“用户名”总是根据用户而变化。

最好的方法是什么？htaccess 重写？

感谢您的时间！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-24T03:32:24.410

如果您的用户创建的名称与与现有或未来路径重叠的路径相匹配，似乎它可能会变得混乱并让您陷入困境。

```
RewriteCond %{REQUEST_URI} ^/[a-z]+$    #1
RewriteCond %{REQUEST_FILENAME} !-f     #2
RewriteRule ^/([a-z]+)$ /author/$1 [P]  #3 
```

1.  尽量将其限制为您的用户名模式
2.  仅在路径不存在时才重写
3.  URL 的 /author/username 版本的代理

# javascript - jquery .find 并附加 img 标签

> ID：14016699
> 
> 赞同：2
> 
> 时间：2012-12-24T03:22:48.187
> 
> 标签：javascript, jquery

我正在尝试从 xml 对象加载图片名称并附加到 div。我对附加输入布局感到困惑，无法找到我在哪里输入错误。

这是有效的

```
$("#nn").append("<img id='theImg' src='/pic/jas/pic1.jpg'/>"); 
```

这不起作用

```
$("#nn").append("<img id='theImg' src='/pic/jas/'" + customer.find("pic_name") + "/>"); 
```

我的 jquery 脚本部分是

```
function OnSuccess(response) {
        var xmlDoc = $.parseXML(response.d);
        var xml = $(xmlDoc);
        pageCount = parseInt(xml.find("PageCount").eq(0).find("PageCount").text());
        var pic_infoVar = xml.find("pic_info");

        pic_infoVar.each(function () {
            var customer = $(this);
        $("#picDiv").append("<img id='theImg' src='/pic/jas/'" + customer.find("pic_name") + "/>");
        });

        $("#loader").hide();
    } 
```

html div 标签

```
<div id="picDiv">
    LoadPic
</div> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-24T03:33:34.157

证明 pic_name 实际上是 XML 数据结构中的一个元素（例如：<pic_name>pic1.jpg</pic_name>），将执行您想要的代码是：

```
$("#nn").append("<img id='theImg' src='/pic/jas/" + customer.find("pic_name").text() + "'/>"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-24T03:44:46.703

这就是我以前的做法

```
document.getElementById('nn').innerHTML +='<img src="'+customer.find(\"pic_name\")+'"/>'; 
```

# java - 我应该知道 EJB 才能学习 CDI

> ID：14016705
> 
> 赞同：1
> 
> 时间：2012-12-24T03:24:19.900
> 
> 标签：java, cdi

我想知道，我应该知道 EJB 作为 CDI 的先决条件吗？因为我已经阅读了一些 CDI 示例，发现大量 EJB 注释与 CDI 代码混合在一起，如果没有，学习 EJB 会简化 CDI 学习吗？期待阅读您的精彩答案，谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T04:27:30.557

CDI 是一种技术，您可以使用它来避免手动找出对象之间的依赖关系。使用 CDI，您只需声明您的对象（类）依赖于其他一些对象（类）。“CDI 容器”将在运行时为您创建并注入此依赖项

EJB 是一种专注于帮助您实现一些常见的企业编程问题（存储和检索数据、调用远程方法等）的技术。

在最新版本的 Java EE 中，推荐的创建/获取 EJB 引用的方法是通过 CDI，但 CDI 也适用于其他资源，例如数据源、JMS 等

所以是的，对 EJB 有一点了解会有所帮助，但我想说的是仅限于基础知识，不要太深入。Java 领域内有大量的技术。它们变化非常快，并且经常相互重叠，因此当您尝试学习一个时很容易迷失方向。暂时只关注CDI本身。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-24T04:28:52.243

没有 EJB 不是 CDI 的先决条件，但它会有所帮助。请参阅此 [CDI](http://www.oracle.com/technetwork/articles/java/cdi-javaee-bien-225152.html)文章以获得明确的区别。

# ruby-on-rails - 在 Hartl 的 Rails 教程中无法获得“登录”链接。获取：没有路线匹配 [GET] "/signin_path"

> ID：14016710
> 
> 赞同：0
> 
> 时间：2012-12-24T03:25:04.330
> 
> 标签：ruby-on-rails, railstutorial.org

正如标题所说，在运行我的本地主机应用程序时单击“登录”链接时出现以下错误：没有路由匹配 [GET]“/signin_path”

这是一些相关的文件/信息：

运行 rake 路由时：

```
 users GET    /users(.:format)          users#index
        POST   /users(.:format)          users#create
new_user GET    /users/new(.:format)      users#new
edit_user GET    /users/:id/edit(.:format) users#edit
   user GET    /users/:id(.:format)      users#show
        PUT    /users/:id(.:format)      users#update
        DELETE /users/:id(.:format)      users#destroy
sessions POST   /sessions(.:format)       sessions#create
new_session GET    /sessions/new(.:format)   sessions#new
session DELETE /sessions/:id(.:format)   sessions#destroy
 signin        /signin(.:format)         sessions#new
signout DELETE /signout(.:format)        sessions#destroy
   root        /                         static_pages#home
 signup        /signup(.:format)         users#new
   help        /help(.:format)           static_pages#help
  about        /about(.:format)          static_pages#about
contact        /contact(.:format)        static_pages#contact 
```

配置/路由文件：

```
SampleApp::Application.routes.draw do
resources :users
resources :sessions, only: [:new, :create, :destroy]

match '/signin', to: 'sessions#new'
match '/signout', to: 'sessions#destroy', via: :delete

root to: 'static_pages#home'

match '/signup', to: 'users#new'
match '/help', to: 'static_pages#help'
match '/about', to: 'static_pages#about'
match '/contact', to: 'static_pages#contact' 
```

标题部分：

```
<header class="navbar navbar-fixed-top navar-inverse">
  <div class="navbar-inner">  
    <div class="container">
      <%= link_to "Sample App", root_path, id: "logo" %>
      <nav>
        <ul class="nav pull-right">
          <li><%= link_to "Home",     root_path %></li>
          <li><%= link_to "Help",     help_path %></li>
          <% if signed_in? %>
            <li><%= link_to "Users", '#' %></li>
            <li id="fat-menu" class="dropdown">
              <a href="#" class="dropdown-toggle" data-toggle="dropdown">
                Account <b class="caret"></b>
              </a>
              <ul class="dropdown-menu">
                <li><%= link_to "Profile", current_user %></li>
                <li><%= link_to "Settings", '#' %></li>
                <li class="divider"></li>
                <li>
                   <%= link_to "Sign out", signout_path, method: "delete" %>
                </li>
              </ul>
            </li>
          <% else %>
            <li><%= link_to "Sign In",  'signin_path' %></li>
          <% end %>
        </ul>
      </nav>
    </div>
  </div>
</header> 
```

最后是 sessesion_controller 文件：

类 SessionsController < ApplicationController

```
def new
end

def create
  user = User.find_by_email(params[:session][:email].downcase)
  if user && user.authenticate(params[:session][:password])
    sign_in user
    redirect_to user
  else
    flash.now[:error] = 'Invalid email/password combination' 
    render 'new'
  end
end

  def destroy
  end
end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-24T03:32:11.173

尝试更新你的 routes.rb 看起来像[https://gist.github.com/dd6821926dc94e6587f8](https://gist.github.com/dd6821926dc94e6587f8)

然后改变 `<li><%= link_to "Sign In", 'signin_path' %></li>`

到

`<li><%= link_to "Sign In", signin_path %></li>`

# java - 使用 JTextPane 更改 setText() 方法的颜色

> ID：14016712
> 
> 赞同：1
> 
> 时间：2012-12-24T03:26:07.640
> 
> 标签：java, swing, colors, jtextpane

我已经尝试了很多不同的事情，但我似乎无法弄清楚如何去做。关于如何设置窗格中所有文本的颜色，我已经阅读了大约 40 页，但没有一个特定的位。我有一些源代码是 SSCCEE（无论它叫什么），但它没有我尝试过的内容，它只是显示我想要改变颜色的内容。

在`tf.addActioListener()`里面有一点

```
else {
tf.setText("> ");
tp.setText(tp.getText() + "> ERROR: Invalid Command" + newline);
try {
FileWriter fw = new FileWriter(file);
fw.write(tp.getText());
fw.close();
} catch (IOException ioe) {}
} 
```

我希望将“> 错误：无效命令”的颜色更改为红色。

PS我忘了提到这是我正在制作的基于文本的游戏。在此先感谢，布雷登

代码：

```
package net.GUI.frame;

import java.awt.event.*;
import java.awt.*;
import java.io.*;
import javax.swing.*;

public class Frame {
    public static void main(String[] args) {
        JFrame frame = new JFrame();
        final JTextPane tp = new JTextPane();
        final JTextField tf = new JTextField();
        JScrollPane sp = new JScrollPane();
        JPanel panel = new JPanel();
        final File file = new File("log.txt");
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        frame.setVisible(true);
        frame.setSize(350,410);
        tp.setEditable(false);
        tp.setForeground(Color.blue);
        tf.setText("> ");
        sp.setViewportView(tp);
        GroupLayout jPanel2Layout = new javax.swing.GroupLayout(panel);
        panel.setLayout(jPanel2Layout);
        jPanel2Layout.setHorizontalGroup(
                jPanel2Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
               .addComponent(tf)
                .addComponent(sp, javax.swing.GroupLayout.Alignment.TRAILING, javax.swing.GroupLayout.DEFAULT_SIZE, 380, Short.MAX_VALUE)
            );
        jPanel2Layout.setVerticalGroup(
                jPanel2Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                .addGroup(javax.swing.GroupLayout.Alignment.TRAILING, jPanel2Layout.createSequentialGroup()
                    .addComponent(sp, javax.swing.GroupLayout.DEFAULT_SIZE, 352, Short.MAX_VALUE)
                    .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                    .addComponent(tf, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
            );
        GroupLayout layout = new javax.swing.GroupLayout(frame.getContentPane());
        frame.getContentPane().setLayout(layout);
        layout.setHorizontalGroup(
                layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                .addGroup(layout.createSequentialGroup()
                    .addContainerGap()
                    .addComponent(panel, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                    .addContainerGap())
            );
        layout.setVerticalGroup(
                layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                .addGroup(layout.createSequentialGroup()
                    .addContainerGap()
                    .addComponent(panel, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                    .addContainerGap())
        );
        frame.addWindowListener( new WindowAdapter() {
            public void windowOpened( WindowEvent e ){
                tf.requestFocus();
            }
        });
        /**File file10 = new File("Rooms/Room1/roomDescription.txt");
        ByteArrayOutputStream baos = new ByteArrayOutputStream();
        PrintStream ps = new PrintStream(baos);
        PrintStream old = System.out;
        System.setOut(ps);

        try {
            FileReader fr = new FileReader(file10);
            int ch = fr.read();

            while(ch != -1) {
                System.out.print((char) ch);
                ch = fr.read();
            }
        } catch (Exception ex) {

        }
        System.out.flush();
        System.setOut(old);
        tp.setText(baos.toString());
        try {
            FileWriter fw = new FileWriter(file);
            fw.write(tp.getText());
            fw.close();
        } catch (IOException ioe) {

        }*/

        tp.setText("You find yourself in a blank room with a cot and a small stool. The walls are made of cold " +
                "grey concrete and have been sanded smooth. There is a solid iron door set into one of the walls." +
                " There are no windows." +
                "\nWhat do you want to do?" +
                "\n" +
                "\n");

        tf.addActionListener(new ActionListener() {
            public void actionPerformed(ActionEvent e) {
                String newline = "\n";
                if(tf.getText().equals("> inspect cot")) {  
                    String string = tf.getText();
                    tp.setText(tp.getText()+string + newline);
                    tf.setText("> ");
                    File file1 = new File("Rooms/Room1/inspectCot.txt");
                    ByteArrayOutputStream baos = new ByteArrayOutputStream();
                    PrintStream ps = new PrintStream(baos);
                    PrintStream old = System.out;
                    System.setOut(ps);

                    try {
                        FileReader fr = new FileReader(file1);
                        int ch = fr.read();

                        while(ch != -1) {
                            System.out.print((char) ch);
                            ch = fr.read();
                        }
                    } catch (Exception ex) {

                    }

                    System.out.flush();
                    System.setOut(old);
                    tp.setText(tp.getText() + (baos.toString()));
                    try {
                        FileWriter fw = new FileWriter(file);
                        fw.write(tp.getText());
                        fw.close();
                    } catch (IOException ioe) {

                    }
                } else {
                    tf.setText("> ");
                    tp.setText(tp.getText() + "> ERROR: Invalid Command" + newline);
                    try {
                        FileWriter fw = new FileWriter(file);
                        fw.write(tp.getText());
                        fw.close();
                    } catch (IOException ioe) {

                    }
                }
            }
        });
    }
} 
```

我已经使用 JTextArea 制作了游戏，但想让它在美学上更令人愉悦，如果你明白我的意思吗？

这是原始游戏的链接：[http ://www.mediafire.com/?vp8baa2u03aafob](http://www.mediafire.com/?vp8baa2u03aafob)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-24T04:01:22.210

如果要更改文本窗格中子字符串的颜色，则需要在 HTML 中设置文本而不是普通文本。您可以将其设置为：`tp.setContentType ( "text/html" );`并像使用它一样使用它：`tp.setText("<html>any string <font color='red'>> ERROR: Invalid Command</font></html>");`。您可以仅在字体标签中覆盖子字符串，而在简单的 html 标签中覆盖其他子字符串。

例如，您可以尝试自己的示例（但您需要在所有地方将其更改为 html）：

```
import java.awt.event.*;
import java.awt.*;
import java.io.*;
import javax.swing.*;

public class Test {
public static void main(String[] args) {
    JFrame frame = new JFrame();
    final JTextPane tp = new JTextPane();
    tp.setContentType ( "text/html" );
    final JTextField tf = new JTextField();
    JScrollPane sp = new JScrollPane();
    JPanel panel = new JPanel();
    final File file = new File("log.txt");
    frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    frame.setVisible(true);
    frame.setSize(350,410);
    tp.setEditable(false);
    tp.setForeground(Color.blue);
    tf.setText("> ");
    sp.setViewportView(tp);
    GroupLayout jPanel2Layout = new javax.swing.GroupLayout(panel);
    panel.setLayout(jPanel2Layout);
    jPanel2Layout.setHorizontalGroup(
            jPanel2Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
           .addComponent(tf)
            .addComponent(sp, javax.swing.GroupLayout.Alignment.TRAILING, javax.swing.GroupLayout.DEFAULT_SIZE, 380, Short.MAX_VALUE)
        );
    jPanel2Layout.setVerticalGroup(
            jPanel2Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(javax.swing.GroupLayout.Alignment.TRAILING, jPanel2Layout.createSequentialGroup()
                .addComponent(sp, javax.swing.GroupLayout.DEFAULT_SIZE, 352, Short.MAX_VALUE)
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addComponent(tf, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
        );
    GroupLayout layout = new javax.swing.GroupLayout(frame.getContentPane());
    frame.getContentPane().setLayout(layout);
    layout.setHorizontalGroup(
            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(layout.createSequentialGroup()
                .addContainerGap()
                .addComponent(panel, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                .addContainerGap())
        );
    layout.setVerticalGroup(
            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(layout.createSequentialGroup()
                .addContainerGap()
                .addComponent(panel, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                .addContainerGap())
    );
    frame.addWindowListener( new WindowAdapter() {
        public void windowOpened( WindowEvent e ){
            tf.requestFocus();
        }
    });
    /**File file10 = new File("Rooms/Room1/roomDescription.txt");
    ByteArrayOutputStream baos = new ByteArrayOutputStream();
    PrintStream ps = new PrintStream(baos);
    PrintStream old = System.out;
    System.setOut(ps);

    try {
        FileReader fr = new FileReader(file10);
        int ch = fr.read();

        while(ch != -1) {
            System.out.print((char) ch);
            ch = fr.read();
        }
    } catch (Exception ex) {

    }
    System.out.flush();
    System.setOut(old);
    tp.setText(baos.toString());
    try {
        FileWriter fw = new FileWriter(file);
        fw.write(tp.getText());
        fw.close();
    } catch (IOException ioe) {

    }*/

    tp.setText("You find yourself in a blank room with a cot and a small stool. The walls are made of cold " +
            "grey concrete and have been sanded smooth. There is a solid iron door set into one of the walls." +
            " There are no windows." +
            "\nWhat do you want to do?" +
            "\n" +
            "\n");

    tf.addActionListener(new ActionListener() {
        public void actionPerformed(ActionEvent e) {
            String newline = "\n";
            if(tf.getText().equals("> inspect cot")) {  
                String string = tf.getText();
                tp.setText(tp.getText()+string + newline);
                tf.setText("> ");
                File file1 = new File("Rooms/Room1/inspectCot.txt");
                ByteArrayOutputStream baos = new ByteArrayOutputStream();
                PrintStream ps = new PrintStream(baos);
                PrintStream old = System.out;
                System.setOut(ps);

                try {
                    FileReader fr = new FileReader(file1);
                    int ch = fr.read();

                    while(ch != -1) {
                        System.out.print((char) ch);
                        ch = fr.read();
                    }
                } catch (Exception ex) {

                }

                System.out.flush();
                System.setOut(old);
                tp.setText(tp.getText() + (baos.toString()));
                try {
                    FileWriter fw = new FileWriter(file);
                    fw.write(tp.getText());
                    fw.close();
                } catch (IOException ioe) {

                }
            } else {
                tf.setText("> ");
                tp.setText("<html>any string <font color='red'>> ERROR: Invalid Command</font></html>" + newline);
                try {
                    FileWriter fw = new FileWriter(file);
                    fw.write(tp.getText());
                    fw.close();
                } catch (IOException ioe) {

                }
            }
        }
    });
}
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-24T05:52:28.177

作为使用 HTML 标记的替代方法，[`TextComponentDemo`](http://docs.oracle.com/javase/tutorial/uiswing/components/editorpane.html#eg)展示了如何应用一些`StyleConstants`，包括字体大小、样式、对齐方式和颜色。样式可以[直接](https://stackoverflow.com/a/8534162/230513)`Document`应用于`initAttributes()`_ `StyledEditorKit`_

# java - 如何将项目从 Eclipse 提交到主干（通过 Subclipse）？

> ID：14016718
> 
> 赞同：3
> 
> 时间：2012-12-24T03:27:18.247
> 
> 标签：java, eclipse, svn, subclipse

我在 Eclipse 中有一个项目`MyProject/`，我想分享并导入到我的 SVN 存储库中：

```
MyProject/
    src/
    dist/
    lib/
    ...etc. 
```

最终，我想为这个项目创建一个 SVN 存储库，如下所示：

```
svn://mySVNrepo/
    MyProject/
        trunk/
            src/
            dist/
            lib/
        branches/
        tags/ 
```

但是当我右键单击`MyProject`并选择`Team >> Share`并按照提示操作时，我最终得到：

```
svn://mySVNrepo/
    MyProject/
        src/
        dist/
        lib/ 
```

所以它是：（1）不允许我创建主干、分支和标签目录，以及（2）不允许我将导入的项目“嵌套”到主干中。

然后我尝试从 SVN Repo Explorer 视图手动创建目录，并创建：

```
svn://mySVNrepo/
    MyProject/
        trunk/
        branches/
        tags/ 
```

然后，我尝试在以下位置分享我的项目：

```
svn://mySVNrepo/trunk 
```

当我尝试运行此初始导入时，我收到来自 Eclipse 的警告：

> 警告：指定的文件夹已存在于存储库中。如果您继续，该文件夹将被签出到您的本地工作区，并且您的项目将连接到这个现有位置。你要继续吗？

*   我**不想**覆盖我的本地副本（我正在尝试共享）；它有很多工作要做！
*   我真的不明白这个警告告诉我什么，基本上我不想搞砸任何事情！

所以我问：我的方法是错误的，如果是这样，我怎样才能第一次将我的项目提交到`trunk/`子目录中？如果我的方法是正确的，那么请帮助我破译这个警告信息并建议我应该做什么。提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-24T04:00:43.307

一种可行的方法是将您手动创建的trunk/branches/tags 目录保留在SVN 中。将空 /trunk 检出到本地工作站上的并行目录中（假设目录 #2，本地项目为 #1）。然后将您的项目 + 代码从 #1 复制到该 /trunk 目录并提交到 SVN。

然后您可以在本地创建第三个目录，并签出您的 SVN 副本并确保它可以正确编译/运行。如果是这样，您可以删除中间的#1/#2 目录，或者将您的初始项目作为备份以防万一（但它将是非版本化的）。然后继续使用目录#3 作为新的 SVN 监控工作区。

如果我不确定我的更改将如何影响我不想丢失的工作，我会尝试采用这样的方法，这样如果出现问题（例如使用 SVN 命令/我不熟悉的操作等）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-07-22T13:39:16.570

1.  从菜单中，选择*Window* > *Open Perspective* > *SVN Repository Exploring*

2.  右键单击您的*存储库*>*新项目结构*>*单个项目或多个项目布局*> 输入“MyProject”作为名称。这将创建具有`/trunk/branches/tags/`项目结构的新项目。

3.  创建完成后，右键单击项目并选择*Checkout*。

4.  “MyProject”现在应该在您的导航视图中。从那里您可以将您的`/src` `/dist`和`/lib`文件夹复制到“我的项目”*主干*文件夹中。

5.  右键单击您的项目并选择*Team* > *Commit*。

**编辑：**

你也可以试试 Eclipse 的[Subversive](http://eclipse.org/subversive/)插件。这个插件有一个更简单的方法来分享你现有的项目到 svn 作为一个多项目布局（`trunk/branches/tags`文件夹结构）。

我在类似的[线程](https://stackoverflow.com/a/27966251/2434565)中发布了这些步骤。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-12-14T14:30:40.480

经过一小时的反复试验，我做了以下事情：

1.  共享到错误的文件夹
2.  进入 SVN 资源管理器并将文件夹（带有 src 等）重命名为 trunk
3.  将主干移动到 svn 中的正确位置（例如项目/主干）
4.  Got into the Project Explorer in Eclipse, right click on the project, team, switch and select the new trunk.

# android - 下载图片后刷新gridview

> ID：14016720
> 
> 赞同：-2
> 
> 时间：2012-12-24T03:27:21.620
> 
> 标签：android, gridview, download, refresh

> **可能重复：**
> [如何将图像动态添加到 GridView？](https://stackoverflow.com/questions/8053919/how-can-i-dynamically-add-images-to-a-gridview)

在我的应用程序中，它允许用户从服务器下载图像并将其存储到内部存储中。下载完成后，gridview 没有更新并显示从服务器下载的图像。除非我重新启动应用程序或活动通过`onCreate()`。无论如何，我可以在应用程序完成下载过程后立即动态更新 gridview 吗？我试图用 invalidateView(); 刷新视图 它也不起作用。任何意见将不胜感激。

**OnCreate()**

```
 final GridView imagegrid = (GridView) findViewById(R.id.WebImageGrid);
    imageAdapter = new ImageAdapter();
    imagegrid.setAdapter(imageAdapter);

    Button loadContent = (Button) findViewById(R.id.load_btn);
    loadContent.setOnClickListener(new View.OnClickListener(){
        @Override
        public void onClick(View v){
            if(load_images<count){
                load_images++;
                imageAdapter.LoadImage();
                imagegrid.invalidateViews();
                imagegrid.setAdapter(imageAdapter);
            }
            else{
                Toast.makeText(getApplicationContext(), "Successfully load all the content. Subscribe to get more content.", Toast.LENGTH_SHORT).show();
            }
        }
    }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-24T04:17:02.270

Grid View 有一个函数 invalidateViews() 尝试使用它。它用于使所有视图无效或重新绘制。下载完成后放置此行，它将再次重绘网格视图。语法：yourGridView.invalidateViews();

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-24T04:12:45.967

最好使用延迟加载图像概念来满足您的要求。正如您所说，您正在从网络下载图像，最好使用延迟加载概念，这也可以为您提供更好的性能。您可以在此[链接](http://thinkandroid.wordpress.com/2012/06/13/lazy-loading-images-from-urls-to-listviews/)上获得参考。在此链接中，显示在列表视图中加载图像，您的要求是网格视图。使用相同的适配器，一切都会正常工作。

# asp.net-mvc - 如何将 Ninject 与 ASP.NET Web API 一起使用？

> ID：14016727
> 
> 赞同：19
> 
> 时间：2012-12-24T03:28:20.700
> 
> 标签：asp.net-mvc, dependency-injection, asp.net-web-api, ninject

在 MVC 中，我只是简单地创建`NinjectControllerFactory`实现`DefaultControllerFactory`接口的类，然后在其中进行一些绑定。最后在`Global`我运行它：

```
ControllerBuilder.Current.SetControllerFactory(new NinjectControllerFactory()); 
```

但是在 ASP.NET Web API 中使用 Ninject 怎么样？网上有一些信息，但已经过时并且是预发布版本。

**有没有解决这个问题的直接方法？**

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-12-24T08:18:46.487

很多文章都是旧的原因是因为方法自 2012 年 6 月以来没有改变（RC 于 5 月 31 日发布）。您需要添加 Ninject MVC3 Nuget 包，然后实现“IDEpenencyResolver”，然后注册您的实现。

最好的两个步行方式是：

1.  [http://www.strathweb.com/2012/05/using-ninject-with-the-latest-asp-net-web-api-source/](http://www.strathweb.com/2012/05/using-ninject-with-the-latest-asp-net-web-api-source/)
2.  [http://www.peterprovost.org/blog/2012/06/19/adding-ninject-to-web-api/](http://www.peterprovost.org/blog/2012/06/19/adding-ninject-to-web-api/)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2014-09-22T15:08:39.490

当前版本的 Ninject.Web.WebApi，至少从 3.2.1.0 开始，不再需要手动添加任何额外内容。像往常一样，只需添加包并在 NinjectWebCommon.cs 中注册所有内容。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2016-04-22T06:32:25.343

对于 Web Api 2，您需要这些 nuget 包 -

```
Ninject
Ninject.Web.Common
Ninject.Web.WebApi 
Ninject.Web.Common.WebHost
WebActivatorEx 
```

您需要编辑`NinjectWebCommon.CreateKernel(..)`以包含

```
RegisterServices(kernel);
GlobalConfiguration.Configuration.DependencyResolver = new NinjectDependencyResolver(kernel);
return kernel; 
```

我在这里写了一篇详细的博客文章 - [http://NoDogmaBlog.bryanhogan.net/2016/04/web-api-2-and-ninject-how-to-make-them-work-together/](http://nodogmablog.bryanhogan.net/2016/04/web-api-2-and-ninject-how-to-make-them-work-together/)包括一个完整的解决方案去下载。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-07-09T05:16:24.053

以下步骤可以让 Ninject 在 WebAPI 项目上工作：

1.  安装 Ninject.Web.WebApi NuGet 包。
2.  安装 Ninject.Web.WebApi.WebHost NuGet 包。
3.  在添加到 App_Start 文件夹的文件 NinjectWebCommon 中的方法“RegisterServices”中注册您的依赖项。像这样：

`Private static void RegisterServices(IKernel kernel)`
`{`

```
 kernel.Bind <IFoo>().To <Foo>();

} 
```

# grails - 在 grails 域类中编写类方法的优缺点是什么？

> ID：14016728
> 
> 赞同：2
> 
> 时间：2012-12-24T03:28:33.557
> 
> 标签：grails, groovy, grails-domain-class

在 grails 域类中编写类方法的优缺点是什么？我在问，因为我经常在域类中看不到任何带有方法的 grails 项目，只有数据成员。这样做有缺点吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-24T03:40:17.390

当一个域类（不仅在 grails 中，而且在一般的面向对象编程中）时，这被称为[贫血域模型](http://martinfowler.com/bliki/AnemicDomainModel.html)。Martin Fowler 建议将域逻辑放入域类中以创建丰富的域模型。通过这样做，域类变得更智能并且知道如何执行操作，而不是让另一个服务类必须对域类进行操作。拥有丰富领域模型的优点是类封装了更多自己的行为，并且更加自包含。另一方面，它确实使域类更加复杂。虽然我认为域类应该不仅仅是一个业务对象。

在 grails 中，我倾向于尝试结合使用丰富的域模型和使用服务。很难对方法何时应该在域类中以及何时应该在服务中做出笼统的陈述。不过，作为一般规则，如果一个操作很复杂并且需要多个协作者，我倾向于将它放在一个服务类中。如果该方法看起来应该是域类的行为，我会把它放在那里。

举一个更具体的例子，我们来`Person`上课。

```
class Person {
  String firstName
  String lastName
  List<Person> friends
} 
```

在我们的应用程序中，一个人可以说话。现在我可以拥有一个`TalkService`知道一个人如何说话的人。但在这种情况下，我认为这`talk`是人的核心行为，所以我会`talk`在`Person`.

假设我还有一个功能，我想找到人的朋友的所有朋友（二级朋友）。对我来说，这不是 a 的核心行为`Person`，所以我会将其委托给服务。

回顾一下，一般来说，当域类是对象的核心行为（例如，它是域方法）时，我会将其添加到域类中，否则，我会将其放入服务中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-24T22:39:17.427

在 Java 项目中，您必须具有表示模型的 POJO 类。例如：人员、发票、书...

然后是服务层，它包含用户进行一些数据库查询的接口，它接受你的模型参数，并返回模型，还有负责重定向和注入你的服务的控制器层。

在 grails 中，使用将服务注入控制器非常容易

现在，我们什么时候需要在域类中使用方法？只有模型负责我们需要做什么，例如，Person X 的年龄（从出生日期算起），Invoice 中存在多少项目（从 List 算起），认为是我们只有在我们操作当前对象的数据时才使用它。

例如，对于保存方法，您不能将其添加到模型中

个人控制器：

```
def personService

def save() {
...
Person person = ...
personService.save(person);
...
} 
```

这个更进化

# java - 如何在android中释放对象？

> ID：14016732
> 
> 赞同：2
> 
> 时间：2012-12-24T03:29:03.803
> 
> 标签：java, android

> **可能重复：**
> [Java 垃圾收集](https://stackoverflow.com/questions/5086800/java-garbage-collection)

我知道我们必须在处理完成后释放 C、C++ 中的对象以取回内存。但是，我不知道如何在 java 和 android 中释放对象。`null`仅分配给对象就足够了吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-24T03:31:55.550

**在 Java 中，不需要释放对象。**

Java 有一个内置的垃圾收集器，它在需要时运行并清除所有不再使用的资源以释放内存。java 开发人员可能会调用 java 运行时来运行垃圾收集器，`System.gc();`但这只是对运行时的建议，可能并不总是会导致它运行。

如果您使用阅读器和图像，请务必致电`.recycle()`并`.close()`在适用的情况下致电。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-24T03:49:48.220

**如果**其他对象没有引用它，垃圾收集器可以释放一个简单的 java 对象（例如模型对象） 。

如果我是你，不要太相信垃圾收集器，因为有些对象是你必须释放的，其中之一就是`Bitmap`对象

`Bitmap`在你的安卓应用程序中吃更多的内存。

```
Bitmap b = createLargeBitmap();
Bitmap b2 = b; 
```

如果您删除对该对象的所有引用并让垃圾收集器将其杀死

```
b = null;
b2 = null; 
```

您可能会遇到内存泄漏或`OutOfMemory`错误。

所以你需要调用`recycle()`来完全释放位图。

```
b.recycle();
b = null;
b2 = null; 
```

// 抱歉我的语法错误 :)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-24T03:31:43.403

在大多数情况下，将 var 设置为 null 就足够了。回答您的问题的一个更好的答案是如何泄漏内存，这在[这篇](https://stackoverflow.com/questions/6470651/creating-a-memory-leak-with-java)文章中有详细说明。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-24T03:32:03.857

内存释放由 Java 垃圾收集器自动完成。您不能强制垃圾收集器通过您的代码释放内存。

调用`System.gc()`不保证垃圾收集器**运行并释放**内存，最终决定由 Java 运行时决定。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-24T03:49:49.250

Android（使用 Java 语言）是一个垃圾收集环境，这意味着虚拟机将自动删除不再有任何引用的对象。

因此，您应该问的问题是：如何确保您的程序不使用太多内存。这通常是通过确保不要在内存数据结构中放置太多对象、将信息保存到文件系统等来实现的。

# javascript - 使用 jQuery/JS，我可以将 JS 对象的属性直接“绑定”到表单输入元素的值吗？

> ID：14016733
> 
> 赞同：2
> 
> 时间：2012-12-24T03:29:07.830
> 
> 标签：javascript, jquery, forms, oop, pass-by-reference

我正在为我所在城市的宠物寄养业务建立一个在线预订系统，但对于如何有效地执行这一特定功能，我遇到了困难。

用户流程的快速要点...

1.  给出了一些初步信息（客户信息、宠物信息等）。
2.  用户选择2个日期；入住和退房日。
3.  该程序计算客户停留的天数，并将每一天投入到类“Day”的构造函数中。每天都会生成一个 ... 块并显示给用户。还可能值得注意的是，所有 Day 对象都存储在一个数组中，然后包含在 mama 类“ReservationData”中......除了 Day 数组还包含一些与预订本身有关的元数据。

无论如何，我的问题是，一旦“dayBlocks”被列出并显示给用户，用户就必须能够在特定的日子检查他们想要的宠物的个别“额外”。

所以我将其分解为 {ReservationData} <--（有一个数组）-- {Days} <--（有一个数组）-- {Extras}。有 14 种额外的服务可供选择，因此显示的每一天都有一个简单的复选框和标签列表。

理想情况下，我希望它进行设置，以便当用户选中复选框时，它会直接并立即相应地更改其在 reservationDataDaysExtraDeepArray 中的相应变量。我的 C 程序员想为每个复选框绑定一个指针，但我（至少我认为）很确定这不适用于 jQuery。

虽然我认为我解释得很清楚，但这里有一些代码：

```
//Day Object/Class
function day(_date, _daynum) {
    this.date = new Date(_date);
    this.dayNum = _daynum;
    this.dayExtras = {
        'YH': false,  //<--- How can I directly manipulate
        'PP': false,  //<--- all of these guys via user-control
        'EE': false,  //<--- of corresponding/assigned 
        'ST': false,  //<--- checkboxes?
        'PT': false,
        'TT15': false,
        'TT30': false,
        'TT45': false,
        'DC': false   //--- Or can I? :/        
    };

    console.log("Day object created with date of " + day.date + " and day-number of " + day.dayNum + ".");

    this.getDayNum = function() { return this.dayNum; }
    this.getDayDate = function() { return this.date; }
} 
```

这是我在这个网站上的第一个问题，但我做了很多搜索，但仍然迷路......谢谢大家！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-24T04:40:15.890

得到它的工作，感谢您为我指出正确的方向！

```
function saveExtra(me) {
    var extraName = me.attr('name');
    var extraVal = me.val();
    (reservationData[extraName]).dayExtras[extraVal] = me.prop('checked');
    for (key in reservationData) {
        (reservationData[key]).dump(); //Day data-dump method.
    }
}

this.generateExtrasGrid = function() {
    var fieldName = "day" + this.dayNum + "";
    var exGrid = "";
    exGrid += "<form class='extrasGrid' id='" + this.dayNum + "'>";
    exGrid += "<input type='checkbox' class='extra' name='" + fieldName + "' value='YH' onclick='saveExtra($(this))' />";............
    exGrid += "</form>";
    return exGrid;
}​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-24T04:07:11.640

Assuming the name of your checkboxes correspond to the keys in your dayExtras object something like this would do..

```
//Day Object/Class
function day(_date, _daynum) {
    this.date = new Date(_date);
    this.dayNum = _daynum;
    this.dayExtras = {
        'YH': false,  //<--- How can I directly manipulate
        'PP': false,  //<--- all of these guys via user-control
        'EE': false,  //<--- of corresponding/assigned 
        'ST': false,  //<--- checkboxes?
        'PT': false,
        'TT15': false,
        'TT30': false,
        'TT45': false,
        'DC': false   //--- Or can I? :/        
    };

    console.log("Day object created with date of " + day.date + " and day-number of "+day.dayNum+".");

    this.getDayNum = function() { return this.dayNum; }
    this.getDayDate = function() { return this.date; }
    this.setDayExtras = function (key,val) {
      if(key in this.dayExtras){
        this.dayExtras[key] = val;
      }
    }
}

var myDay = new day(null,null);

$(document).on('change','#myForm input[type="checkbox"]', function () {
  myDay.setDayExtras(this.name,this.checked);
}); 
```

# .htaccess - 通过 htaccess 更改 url

> ID：14016735
> 
> 赞同：0
> 
> 时间：2012-12-24T03:29:29.967
> 
> 标签：.htaccess, url, web

我有一个网址是[http://www.testingmyweb.comli.com的网站](http://www.testingmyweb.comli.com)

在我的网站上有一个文件夹 TCWEB。我的网站在这个文件夹中。

我想将[http://testingmyweb.comli.com/TCWEB/home.html](http://testingmyweb.comli.com/TCWEB/home.html)映射到[http://testingmyweb.comli.com/](http://testingmyweb.comli.com/)

我可以在`.htaccess`文件中进行哪些更改？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-24T09:24:53.197

根据您的评论，您的 htaccess 文件如下所示：

```
RewriteBase /
RewriteEngine on
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME}\.html -f
RewriteRule ^(.*)$ $1.html

Redirect /TCWEB/home.html testingmyweb.comli.com 
```

`.html`您附加到针对 html 文件（但没有扩展名）的请求的规则。您下面的重定向需要删除。为了让您重写`/`为`/TCWEB/home.html`，该 mod_alias 指令将导致循环。将其替换为以下规则：

```
RewriteRule ^$ /TCWEB/home.html [L]
RewriteCond %{THE_REQUEST} /TCWEB/home.html
RewriteRule ^ / [L,R=301] 
```

第一条规则使请求`/`映射到`/TCWEB/home.html`，但浏览器地址栏中的 URL 仍然存在`http://www.testingmyweb.comli.com`。第二条规则做的事情`Redirect`，除了它检查请求实际上是为 发出的`/TCWEB/home.html`，而不是内部重写的 URI。因此，当有人直接转到 时`/TCWEB/home.html`，他们会被重定向到`/`，然后应用第一条规则。

# php - HTML Simple Dom 和 Mysql 插入问题

> ID：14016737
> 
> 赞同：3
> 
> 时间：2012-12-24T03:30:14.197
> 
> 标签：php, simple-html-dom

我是一名初级程序员，正在尝试从该[来源捕获数据](http://allrecipes.com/recipe/boilermaker-tailgate-chili/detail.aspx?event8=1&prop24=SR_Title&e8=Quick%20Search&event10=1&e7=Recipe%20Hub)

这是我要捕获的特定部分：

```
<ul class="ingredient-wrap">

            <li id="liIngredient" data-ingredientid="3914" data-grams="907.2">
                <label>
                    <span class="checkbox-formatted"><input id="cbxIngredient" type="checkbox" name="ctl00$CenterColumnPlaceHolder$recipeTest$recipe$ingredients$rptIngredientsCol1$ctl01$cbxIngredient" /></span>
                    <p class="fl-ing" itemprop="ingredients">
                        <span id="lblIngAmount" class="ingredient-amount">2 pounds</span>
                        <span id="lblIngName" class="ingredient-name">ground beef chuck</span>

                    </p>
                </label>
            </li>

            <li id="liIngredient" data-ingredientid="5838" data-grams="454">
                <label>
                    <span class="checkbox-formatted"><input id="cbxIngredient" type="checkbox" name="ctl00$CenterColumnPlaceHolder$recipeTest$recipe$ingredients$rptIngredientsCol1$ctl02$cbxIngredient" /></span>
                    <p class="fl-ing" itemprop="ingredients">
                        <span id="lblIngAmount" class="ingredient-amount">1 pound</span>
                        <span id="lblIngName" class="ingredient-name">bulk Italian sausage</span>

                    </p>
                </label>
            </li>

            <li id="liIngredient" data-ingredientid="10429" data-grams="1278">
                <label>
                    <span class="checkbox-formatted"><input id="cbxIngredient" type="checkbox" name="ctl00$CenterColumnPlaceHolder$recipeTest$recipe$ingredients$rptIngredientsCol1$ctl03$cbxIngredient" /></span>
                    <p class="fl-ing" itemprop="ingredients">
                        <span id="lblIngAmount" class="ingredient-amount">3 (15 ounce) cans</span>
                        <span id="lblIngName" class="ingredient-name">chili beans, drained</span>

                    </p>
                </label>
            </li> 
```

每个 li 包含两组单词，例如：**3 (15 ounce) cans** and **chili beans, drained**我正在尝试使用 foreach 循环从每个 li 中获取两组单词，然后组合并保存到数据库中.

这是我的代码：

```
foreach($html->find(".ingredient-wrap", 0)->children as $e){
              $ingredients = $e->plaintext;
              echo trim($ingredients);
              $hostname = 'localhost';
              $username = '********';
              $password = '*******';
              $conn = new PDO("mysql:host=$hostname;dbname=*********", $username, $password);
              $sql = ("INSERT INTO ingredients (recipe_id, ingredientname) VALUES (?, ?)");
              $q = $conn->prepare($sql);
              $q->execute(array($recipe_id,$ingredients));
          } 
```

这样做的问题是，在插入数据库后，每个成分名称的值都是**...**，即使您回显出来，`echo $ingredients."<br/>"`您也会看到一个组合词的列表，后面有一个空格。

感谢您的任何帮助！如果您有任何问题或需要更多澄清，我在这里回复！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T03:51:12.027

获得“清单”是正常的。你是`->innertext`用来获取成分的。本质上，您正在`striptags()`处理包含成分的 html，只留下一些裸文本。您应该分别循环遍历每个成分标签。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-24T03:53:30.930

可以试试正则...

```
preg_match_all('/<span id="lblIngAmount" class="ingredient-amount">(.*)<\/span>\s+<span id="lblIngName" class="ingredient-name">(.*)<\/span>/', $ingredients, $matches, PREG_PATTERN_ORDER); 
```

返回：

```
Array
(
[0] => Array
    (
        [0] => <span id="lblIngAmount" class="ingredient-amount">2 pounds</span>
                    <span id="lblIngName" class="ingredient-name">ground beef chuck</span>
        [1] => <span id="lblIngAmount" class="ingredient-amount">1 pound</span>
                    <span id="lblIngName" class="ingredient-name">bulk Italian sausage</span>
        [2] => <span id="lblIngAmount" class="ingredient-amount">3 (15 ounce) cans</span>
                    <span id="lblIngName" class="ingredient-name">chili beans, drained</span>
    )

[1] => Array
    (
        [0] => 2 pounds
        [1] => 1 pound
        [2] => 3 (15 ounce) cans
    )

[2] => Array
    (
        [0] => ground beef chuck
        [1] => bulk Italian sausage
        [2] => chili beans, drained
    )

) 
```

所以：

```
echo $matches[2][0].": ".$matches[1][0]; 
```

会给：

```
ground beef chuck: 2 pounds 
```

# iphone - MKPinAnnotationView 可拖动选项

> ID：14016741
> 
> 赞同：1
> 
> 时间：2012-12-24T03:31:20.533
> 
> 标签：iphone, mkmapview, draggable, mkpinannotationview

我在我的 iPhone 应用程序中使用 MKMapView。我想实现引脚注释拖动功能。我该如何实现这一点。函数 setCoordinate: 显示警告，MKPinAnnotationView 可能不响应 setCoordinate:。请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T09:50:01.973

这是因为`MKPinAnnotationView`没有实现坐标，但是注释却实现了。

尝试使用：

```
 [pin.annotation setCoordinate:(CLLocationCoordinate2D)]; 
```

这应该是诀窍（鉴于您称您`MKPinAnnotationView`为“pin”。

# python - 如果没有提供命令行参数，则检测并打印

> ID：14016742
> 
> 赞同：3
> 
> 时间：2012-12-24T03:31:33.147
> 
> 标签：python

这是我的程序：

```
from sys import argv

script, arg1 = argv

def program(usr_input, arg1):
    if(usr_input == arg1):
        print "CLI argument and user input are identical"

    else:
        print "CLI argument and user input aren't identical"

if arg1 != "":
    usr_input = raw_input("enter something: ")
    program(usr_input, arg1)

else:
    print "You have not entered a CLI argument at all." 
```

我得到：

```
Traceback (most recent call last):
  File "filename.py", line 3, in <module>
    script, arg1 = argv
ValueError: need more than 1 value to unpack 
```

如何检测缺少命令行参数并抛出错误/异常而不是接收此错误？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-12-24T03:51:17.393

我建议只检查`__main__`脚本位置中的程序参数，作为整个应用程序的入口点。

```
import sys
import os

def program(*args):
    # do whatever
    pass

if __name__ == "__main__":
    try:
        arg1 = sys.argv[1]
    except IndexError:
        print "Usage: " + os.path.basename(__file__) + " <arg1>"
        sys.exit(1)

    # start the program
    program(arg1) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-24T03:43:56.167

您可以处理异常：

```
In [6]: def program(argv):
    try:
        script, argv1 = argv
    except ValueError:
        print("value error handled")
   ...:         

In [7]: program(argv)
value error handled 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-24T04:30:49.507

试试这个：

```
script = argv[0]
try:
    arg1 = argv[1]
except:
    arg1 = '' 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-24T03:43:15.417

你可以在`try`那里使用一个语句：

```
#!/usr/bin/env python
#-*- coding:utf-8 -*-

import sys

class MyError(Exception):
    def __init__(self, value):
        self.error_string = value

    def __str__(self):
        return eval(repr(self.error_string))

try:
    script, arg1 = sys.argv

except ValueError:     
    raise MyError, "Not enough arguments" 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-12-24T03:57:57.180

看到这`sys.argv`是一个列表，您应该检查列表的长度以确保它是您希望的。您的脚本稍作更改以检查长度：

```
from sys import argv

def program(usr_input, arg1):
    if(usr_input == arg1):
        print "CLI argument and user input are identical"
    else:
        print "CLI argument and user input aren't identical"

if len(argv)== 2:
    arg1 = argv[1]
    usr_input = raw_input("enter something: ")
    program(usr_input, arg1)
else:
    print "You have not entered a CLI argument at all." 
```

# ios - 如何在 IOS 应用程序中下载 m3u 视频？

> ID：14016750
> 
> 赞同：5
> 
> 时间：2012-12-24T03:32:37.600
> 
> 标签：ios, video, download, m3u, m3u8

我正在开发一个 IOS 应用程序，它将一些视频下载到本地，以便用户可以离线观看这些视频。但目前，很多视频都是 m3u 和 m3u8 格式。据我所知，m3u 和 m3u8 只是一个视频列表。所以我的问题是如何将真实的视频文件下载到本地并以 m3u 和 m3u8 格式播放它们。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-24T03:36:08.233

首先，`m3u`还是`m3u8`一个播放列表，不包含音乐数据。

要解析文件，您可以按照[此处](https://stackoverflow.com/questions/10914330/parsing-of-m3u-files-in-objective-c-for-iphone-from-file-system-or-url)的答案进行操作。解析文件后，您可以获取真实的媒体 URL 并使用媒体播放器加载它。

维基百科中M3U文件格式的参考：[http ://en.wikipedia.org/wiki/M3U](http://en.wikipedia.org/wiki/M3U)

**更新：**此外，另一个人正在做类似的事情。[你可以在这里](https://stackoverflow.com/questions/13833731/how-to-play-m3u-audio-stream-in-ios-app)查看他的代码。

# c++ - 通过visual C++访问串口

> ID：14016753
> 
> 赞同：6
> 
> 时间：2012-12-24T03:33:32.203
> 
> 标签：c++, winapi, serial-port

我想通过visual c ++访问串口我从互联网上获取程序但是当我运行程序时，似乎端口无法打开

这是我的程序serialClass.cpp

```
#ifndef SERIALCLASS_H_INCLUDED
#define SERIALCLASS_H_INCLUDED
#define ARDUINO_WAIT_TIME 2000
#include <windows.h>
#include <stdio.h>
#include <stdlib.h>

class Serial
{
private:
    HANDLE hSerial;
    bool connected;
    COMSTAT status;
    DWORD errors;

public:
    Serial(char *portName);
    //Serial();
    ~Serial();
    int ReadData(char *buffer, unsigned int nbChar);
    bool WriteData(char *buffer, unsigned int nbChar);
    bool IsConnected();
};
#endif // SERIALCLASS_H_INCLUDED 
```

和我的 Serial.cpp

```
#include "SerialClass.h"
 Serial::Serial(char *portName)
 //Serial::Serial()
{
//We're not yet connected
this->connected = false;

//Try to connect to the given port throuh CreateFile
this->hSerial = CreateFile((LPCWSTR) portName,
        GENERIC_READ | GENERIC_WRITE,
        0,
        NULL,
        OPEN_EXISTING,
        FILE_ATTRIBUTE_NORMAL,
        0);

//Check if the connection was successfull
if(this->hSerial==INVALID_HANDLE_VALUE)
{
    //If not success full display an Error
    if(GetLastError()==ERROR_FILE_NOT_FOUND){

     printf("ERROR: Handle was not attached. Reason: COM1 not available.\n");
    }
    else
    {
        printf("ERROR!!!");
    }
}
else
{
    //If connected we try to set the comm parameters
    DCB dcbSerialParams = {0};

    //Try to get the current
    if (!GetCommState(this->hSerial, &dcbSerialParams))
    {
        //If impossible, show an error
        printf("failed to get current serial parameters!");
    }
    else
    {
        //Define serial connection parameters for the arduino board
        dcbSerialParams.BaudRate=CBR_19200;
        dcbSerialParams.ByteSize=8;
        dcbSerialParams.StopBits=ONESTOPBIT;
        dcbSerialParams.Parity=NOPARITY;
        dcbSerialParams.fOutX=TRUE;
        dcbSerialParams.fInX=TRUE;

         //Set the parameters and check for their proper application
         if(!SetCommState(hSerial, &dcbSerialParams))
         {
            printf("ALERT: Could not set Serial Port parameters");
         }
         else
         {
             //If everything went fine we're connected
             this->connected = true;
             //We wait 2s as the arduino board will be reseting
             //Sleep(ARDUINO_WAIT_TIME);
             printf("Current Settings\n Baud Rate %d\n Parity %d\n Byte Size %d\n Stop Bits %d", dcbSerialParams.BaudRate, 
    dcbSerialParams.Parity, dcbSerialParams.ByteSize, dcbSerialParams.StopBits);
         }
    }
}
}

Serial::~Serial()
{
//Check if we are connected before trying to disconnect
if(this->connected)
{
    //We're no longer connected
    this->connected = false;
    //Close the serial handler
    CloseHandle(this->hSerial);
}
}

 int Serial::ReadData(char *buffer, unsigned int nbChar)
 {
//Number of bytes we'll have read
DWORD bytesRead;
//Number of bytes we'll really ask to read
unsigned int toRead;

//Use the ClearCommError function to get status info on the Serial port
ClearCommError(this->hSerial, &this->errors, &this->status);

//Check if there is something to read
if(this->status.cbInQue>0)
{
    //If there is we check if there is enough data to read the required number
    //of characters, if not we'll read only the available characters to prevent
    //locking of the application.
    if(this->status.cbInQue>nbChar)
    {
        toRead = nbChar;
    }
    else
    {
        toRead = this->status.cbInQue;
    }

    //Try to read the require number of chars, and return the number of read bytes on success
    if(ReadFile(this->hSerial, buffer, toRead, &bytesRead, NULL) && bytesRead != 0)
    {
        return bytesRead;
    }
}
//If nothing has been read, or that an error was detected return -1
return -1;
}

bool Serial::WriteData(char *buffer, unsigned int nbChar)
{
DWORD bytesSend;

//Try to write the buffer on the Serial port
if(!WriteFile(this->hSerial, (void *)buffer, nbChar, &bytesSend, 0))
{
    //In case it don't work get comm error and return false
    ClearCommError(this->hSerial, &this->errors, &this->status);

    return false;
}
else
    return true;
}

bool Serial::IsConnected()
{
     //Simply return the connection status
return this->connected;
 } 
```

结果总是

错误：未连接手柄。原因：COM1 不可用。

任何机构都可以提供帮助吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-24T04:08:20.877

问题在于转换为宽字符串而不是转换，我用以下代码替换了打开端口的那部分代码，它起作用了：

```
wchar_t wcPort[64];
size_t convertedChars = 0;
mbstowcs_s(&convertedChars, wcPort, strlen(portName), portName, _TRUNCATE);

this->hSerial = CreateFile(wcPort,
    GENERIC_READ | GENERIC_WRITE,
    0,
    NULL,
    OPEN_EXISTING,
    FILE_ATTRIBUTE_NORMAL,
    0); 
```

或者正如[Ben Voigt](https://stackoverflow.com/users/103167/ben-voigt)在评论中指出的那样，您也可以调用 CreateFileA 变体，以便 Windows 为您执行转换。

# c# - 在 c# 中调用特定的 div id

> ID：14016757
> 
> 赞同：0
> 
> 时间：2012-12-24T03:33:55.157
> 
> 标签：c#, javascript, asp.net, html

我正在尝试根据`page_prerender`事件中的 id 调用特定的 div，但它不会导航到特定的 div id。

```
<div id="div1">1</div>
<div id="div2">2</div>
<div id="div3">3</div> 
```

* * *

```
protected void page_prerender()
{
   Response.Redirect("Default.aspx#div1");
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-24T04:52:08.050

使用[FindControl](http://msdn.microsoft.com/en-us/library/486wc64h.aspx)方法定位 div - 将 div 的 id 作为参数传递。

```
<div id="div1" runat="server">1</div>

FindControl("div1"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-24T04:15:48.927

使用 jQuery 或者，您可以使用它在页面加载动画时滚动到特定元素：在 aspx 页面上尝试

```
$(function(){
   $('html, body').animate({ scrollTop: $("#div1").offset().top });
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-26T05:00:13.633

请放`runat="server"`。因此，您将能够在后面的代码上访问它

```
<div id="div1" runat="server">1</div>
<div id="div2" runat="server">2</div>
<div id="div3" runat="server">3</div> 
```

谢谢

# visual-studio-2010 - 解决方案平台设置为 x86，但加载 bin 文件夹中的 dll 文件而不是 bin/x86/debug

> ID：14016759
> 
> 赞同：-1
> 
> 时间：2012-12-24T03:34:23.690
> 
> 标签：visual-studio-2010

我在将解决方案平台设置为 x86 时遇到问题，但加载的是 bin 文件夹中的 dll 文件而不是 bin/x86/debug。每当我想调试 Web 应用程序时，我必须将 dll 文件和 pdb 文件从 bin/x86/debug 复制到 bin 文件夹以启用调试模式。否则会显示

> 断点当前不会被命中。没有为此文档加载符号。

自几周前以来，我一直受到这个问题的困扰。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-24T13:45:43.990

检查项目属性中的构建目标。

# python - Python将列表值转换为字符串

> ID：14016761
> 
> 赞同：2
> 
> 时间：2012-12-24T03:34:33.287
> 
> 标签：python, list, python-2.7

我将列表值存储为：

```
country = [u'USA'] 
```

我怎样才能把它变成“美国”。我试过`str(country)`了，但是没有用。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-12-24T03:35:31.537

应用于`str()`不在列表中的元素：

```
In [206]: country = [u'USA']

In [207]: country[0] = str(country[0])

In [208]: country
Out[208]: ['USA'] 
```

或者你的意思是这样的：

```
In [217]: country = [u'USA']

In [218]: country = str(country[0])

In [219]: country
Out[219]: 'USA' 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-24T04:28:33.367

`country`是一个已经包含 Unicode 字符串的列表。你不需要转换它。`u''`语法只是作为 Python 文字的项目表示（如何在 Python 源代码中键入它）。

如果你确实需要一个字节串；使用`.encode()`具有适当字符编码的方法，例如：

```
b = country[0].encode("ascii") 
```

通常，将文本处理代码构造为[Unicode 三明治](http://nedbatchelder.com/text/unipain/unipain.html)，即内部使用 Unicode，仅使用字节与外界通信；不要将两者混合。

# c++ - T*和T*&C++的区别

> ID：14016770
> 
> 赞同：2
> 
> 时间：2012-12-24T03:36:07.243
> 
> 标签：c++

下面的两个复制功能有什么区别？我似乎看不出它们之间有什么区别。特别是 void*& 与 void*。

那么T*&和T*有什么区别呢？我什么时候会使用其中一个？另外，如果我让他们接受 const 参数，会发生什么？会有什么不同？

```
#include <iostream>

void Copy(void* Source, void* Destination, int Size)
{
    //memcpy(Destination, Source, Size);
    char* S = static_cast<char*>(Source);
    char* D = static_cast<char*>(Destination);
    *D = *S;
}

void Copy2(void* &Source, void* &Destination, int Size)
{
    char* S = static_cast<char*>(Source);
    char* D = static_cast<char*>(Destination);
    *D = *S;
}

int main()
{
    int A = 2;
    int B = 5;
    int C = 7;

    void* pA = &A;
    void* pB = &B;
    void* pC = &C;

    Copy(pA, pB, 1);
    Copy2(pA, pC, 1);

    std::cout<< B <<std::endl;
    std::cout<< C <<std::endl;
} 
```

以上都打印“2”。两者都一样不是吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-24T03:44:33.410

一个是指针，另一个是指针的引用。

谷歌两者并拿起一本 C++ 基础书籍。

将指针传递视为按值传递内存地址（即副本）。在接收函数中，您拥有内存地址的副本，您可以更改该内存地址指针指向的位置以及目标内存内容的外观。当您从该函数返回时，目标内存仍会更改，但原始指针未更改。

相反，对指针的引用允许您在从函数返回后更改该内存指向的位置。否则是一样的。

一个常见的用法是分配内存的函数，例如：

```
SomeClass *someClass = null;
PopulateSomeClass(someClass);
...

void PopulateSomeClass(SomeCLass* &someCLass)
{
   someClass = new SomeClass;
} 
```

但实际上，请在谷歌上搜索更多细节 - 这是一个更基本的 C++ 概念。

例如，引用通常在编译器的内部实现为 const *。所以它是一个指向指针的 const 指针。

# c# - 自定义路由实现和 ChildAction

> ID：14016773
> 
> 赞同：1
> 
> 时间：2012-12-24T03:36:08.880
> 
> 标签：c#, asp.net-mvc-3, asp.net-mvc-4, asp.net-mvc-routing, url-routing

我有一个自定义路由实现，用于使 url 段降低和虚线，如下所示：

```
/Home/About -> /home/about/
/MyDocs/MyPage/23 -> /my-docs/my-pages/23/ 
```

等等。它工作正常，在我决定切换到`MVC 4`. 在新项目中，正常操作正常工作。但我有问题打电话`Html.Action`或`Html.RenderAction`。例如，`MyDocsController.MyChild`它找不到控制器 ( `my-docs`) 或`MydocsController.MyChild`它找到控制器 ( `mydocs`) 但找不到动作 ( `my-child`)。`MVC 3`和`MVC 4`路由之间有什么区别吗？为什么它适用于`MVC 3`但不适用`MVC 4`？

# jsf - 如何使用 p:media 标签从项目文件夹外部加载 PDF

> ID：14016774
> 
> 赞同：2
> 
> 时间：2012-12-24T03:36:25.533
> 
> 标签：jsf, jsf-2, primefaces

```
<p:media value="C:/Users/xyz/Desktop/sample.pdf" width="100%" height="600px">    
</p:media> 
```

我正在使用此代码加载放置在我桌面上的 PDF，但它没有从那个地方加载 PDF。我搜索了很多但找不到原因。所以从 JSF 专家那里我想知道是否可以加载使用primefaces媒体标签从项目文件夹之外的文件/pdf/图像（任何资源）？如果是，那么如何？

**注意：**如果我将它放在我的项目文件夹中，我可以加载它。但我想从外部加载它。
谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-24T04:19:08.627

该值必须指向有效的 URL，而不是本地磁盘文件系统路径。必须从该 URL 下载 PDF 的是网络浏览器。正如您所期望的那样，不是网络服务器必须以某种方式将 PDF 自动包含在 HTML 输出中。

您不能期望每个网页访问者都在他们自己的本地磁盘文件系统上的那个位置准确地拥有那个 PDF 文件。更不用说他们还运行 Windows。

最简单的方法是将该 PDF 移动到公共 Web 内容文件夹（您也将 JSF 页面放入其中）并按如下方式引用它

```
<p:media value="/sample.pdf" width="100%" height="600px" /> 
```

假设有问题的 JSF 页面是通过[http://example.com/context/page.xhtml](http://example.com/context/page.xhtml)提供的，那么网络浏览器将通过[http://example.com/context/sample.pdf](http://example.com/context/sample.pdf)下载 PDF （并且您需要确保它也可以通过该 URL 单独使用）。

如果您不想将 PDF 文件放在您的 web 应用程序中，而是在其他地方，则另一种选择是将该磁盘文件系统位置作为“虚拟主机”准确添加到服务器配置中，以便它可以通过 URL 使用。你可以在这里找到一些提示：[How to show the server path image to PrimeFaces p:graphicImage?](https://stackoverflow.com/questions/10844869/how-to-show-the-server-path-image-to-primefaces-pgraphicimage/10844924#10844924)

# gwt - GWT 在 Composite 上捕获键盘事件

> ID：14016775
> 
> 赞同：0
> 
> 时间：2012-12-24T03:36:37.827
> 
> 标签：gwt

当没有焦点的小部件时，我正在尝试捕获键盘事件。我尝试将其添加到复合小部件：

```
 addDomHandler(new KeyPressHandler(){
        public void onKeyPress(KeyPressEvent event) {
            logger.info("onKeyPress: "+event);
        }
    }, KeyPressEvent.getType()); 
```

但我没有捕获键盘事件。我希望能够确定在事件发生时何时`Ctrl`按下键。`mousedown`我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T05:19:57.227

使用 MouseDownHandler：

```
MouseDownHandler mouseDownHandler = new MouseDownHandler() {

    @Override
    public void onMouseDown(MouseDownEvent event) {
        if (event.isControlKeyDown()) {
            // do something
        }
    }

};
myCompositeWidget.addDomHandler(mouseDownHandler, MouseDownEvent.getType()); 
```

# javascript - 如何为 TinyMCE 超链接对话框启用 CORS

> ID：14016778
> 
> 赞同：2
> 
> 时间：2012-12-24T03:36:56.897
> 
> 标签：javascript, tinymce, cors, django-tinymce

我有一个要求，我需要发出跨域请求来为 TinyMCE 文本添加超链接。这将打开一个包含 CORS url 的对话框。问题是我不知道如何为 TinyMCE 插件启用 CORS。有什么建议么？提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-12-01T21:48:14.270

查看[此](http://enable-cors.org/)内容以获取有关 CORS 的更多信息。

基本上你不能从客户端做很多事情，它必须由服务器启用。更详细地说，必须添加一些特定的标题。如果您有权访问服务器端文件，那么您自己启用它应该不难。

如果您使用的是 PHP，一切都可以在一行代码中完成：

```
header("Access-Control-Allow-Origin: *"); 
```

# .net - 跨多个“流”管理共享资源的正确模式

> ID：14016780
> 
> 赞同：0
> 
> 时间：2012-12-24T03:37:02.143
> 
> 标签：.net, multithreading, design-patterns

我试图获得一个允许启动多个进程的程序流。流程的每个步骤（活动）都可以选择是模态的。

如果一个进程在另一个模态活动正在运行时尝试开始一个模态活动，则它应该排队。

我可以设想拥有一个`ProcessManager`包含对进程的引用并（可能）处理“模态”资源/队列的。

但是我应该如何连接流程和活动？每个进程都需要能够在即将进入模态状态时发出信号并等待直到被授予访问权限。

我应该将线程安全的回调方法/对象传递给每个进程还是有更好的方法？

请注意，我并不总是想阻塞排队进程上的线程 - 该进程可能随后决定它不再需要模态活动，然后可以恢复处理。

# python-3.x - Python 3.3 密码脚本

> ID：14016782
> 
> 赞同：-2
> 
> 时间：2012-12-24T03:37:57.940
> 
> 标签：python-3.x

所以我在 python 3.3 中有这个代码，它用停止者密码来加密文本。我需要知道的是如何制作一个脚本，将其从原始版本转换回来，以便我发送它的人也可以阅读它。

```
message = input("Input: ")
key = 11
coded_message = ""

for ch in message:
    code_val  = ord(ch) + key
    if ch.isalpha():
        if code_val > ord('z'):
            code_val -= ord('z') - ord('a')
        coded_message = coded_message + chr(code_val)
    else:
        coded_message = coded_message + ch
# print ("Input: " + message)
print ("Output: " + coded_message) 
```

还有一件事，我打算把它放在一个 tkinter 消息框，两个输入字段用于输入和输出。一个字段应该用来输入我想要转换的内容，另一个应该用来显示文本加密后的样子。该按钮应该开始加密。这是代码：

```
import sys
from tkinter import *
def mHello():
    mLabel = Label(mGui,text = input("Hello World"))
    mLabel.grid(row=3, column=0,)

mGui = Tk()
ment = StringVar()
mGui.geometry("450x450+250+250")
mGui.title("My TKinter")
# input label
mLabel = Label(mGui,text = "Input",)
mLabel.grid(row=1,column=0,)
# output label
mLabeltwo = Label(mGui,text = "Input",)
mLabeltwo.grid(row=2,column=0,)
# convert button
mButton = Button(text = "Convert",command = mHello)
mButton.grid(row=3,column=0)
# input entry
mEntry = Entry(mGui,textvariable=ment)
mEntry.grid(row=1,column=1)
# output entry
mEntryTwo = Entry(mGui,textvariable=ment)
mEntryTwo.grid(row=2,column=1)

mGui.mainloop() 
```

顺便说一句，我只有 15 岁，这是我学习 python 的第二天。一些功劳归功于这个论坛上的资源，这些资源为我提供了一些代码片段，提前谢谢你们！

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2012-12-24T05:32:26.193

Before i say anything else you should be aware that minds much greater the mine have advised **against** writing your own cypher script for *anything other then learning*

If you want them to be able to decode your code then provide them with a key. so in your case:

```
s maps to h
t maps to i
f maps to t 
```

I hope this code illustrates my suggestion:

```
In [1]: from cyro import your_cyrptic_function

In [2]: key = {'s':'h', 't':'i', 'f':'t'}

In [3]: secret_word = your_cyrptic_function('hit')

In [4]: decyrpted_secret_word = ''

In [5]: for letter in secret_word:
    decyrpted_secret_word += key[letter]
   ...:                 

In [6]: print(decyrpted_secret_word)
hit 
```

For the code above i turned your original code into a function:

```
def your_cyrptic_function(secret):

    message = secret
    key = 11
    coded_message = ""

    for ch in message:
        code_val  = ord(ch) + key
        if ch.isalpha():
            if code_val > ord('z'):
                code_val -= ord('z') - ord('a')
            coded_message = coded_message + chr(code_val)
        else:
            coded_message = coded_message + ch
    # print ("Input: " + message)
    return coded_message 
```

there are several great ways to do this in python. If your interested in cyptopgraphy then check out [Udacities class cs387 applied cryptography](http://www.udacity.com/)

# javascript - 函数.原型.方法

> ID：14016783
> 
> 赞同：1
> 
> 时间：2012-12-24T03:38:22.713
> 
> 标签：javascript

我想问一下下面的代码

```
Function.prototype.method = function (name, func) {
   this.prototype[name] = func;
   return this;
}; 
```

这是否意味着“函数”和任何新函数都将继承方法创建的函数？

为了更清楚

```
Function.method('test', function () {return 1;}); 
```

test 现在是否可以作为 Function 或任何其他函数的方法调用？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-24T03:41:28.473

不，`this`函数内部是指调用它的对象。在这种情况下，它应该是一个函数，更具体地说，是一个构造函数。它应该像这样使用：

```
function SomeObject() {}

SomeObject.method('doSomething', function() {
    alert('Something!');
});

new SomeObject().doSomething(); // Something! 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-24T03:40:35.640

JavaScript 是一种典型语言。当在对象上调用函数但未找到时，开始搜索原型链。它将搜索原型链中的所有对象，直到原型链结束于`Object`所有对象的父级。

所有函数都直接或间接继承`Function`，这意味着所有函数都将具有您指定的“方法”，即使是已经创建的函数。

* * *

```
Function.prototype.printSup = function () { console.log('sup'); }
Math.max.printSup();
String.pringSup();
'asdf'.substr.printSup() 
```

# ruby-on-rails - 批量更新属性

> ID：14016785
> 
> 赞同：3
> 
> 时间：2012-12-24T03:39:22.527
> 
> 标签：ruby-on-rails, ruby, activerecord, sinatra

我正在使用 Sinatra，但我猜这也适用于 Rails（如果没有，请删除标签或让我知道，我将删除它）。

我有一个 ActiveRecord::Base 类`User`。它有很多属性，我正在显示一个允许某人更新特定用户的页面。问题是，我很难以 DRY 方式实现更新功能。我的意思是，当我收到`params`一个 POST 请求时，我可以这样做：

```
a_user.update_attributes params 
```

因为 params 也包含其他一堆废话（比如`:splat`- 那是什么？），它会抛出一个未知的属性错误。相反，我要做的是：

```
a_user.update_attributes {:attrA => params[:attrA], 
                          :attrB => params[:attrB], ...etc } 
```

*（记住有很多属性）*

这是我应该怎么做的吗？对我来说，出于某种原因……感觉不对。例如，如果我有另一个需要以类似方式更新的模型，我必须再次手动重写所有属性。

我正在寻找的是类似的东西：

```
a_user.filter_and_update_attributes params 
```

其中 filter_and_update_attributes 自动过滤任何不良/未知属性的参数，我可以在任何模型的任何地方使用它，而必须重写这么多无用的代码。

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-24T03:48:49.897

如果您像这样构建表单：

```
<form action="/users" method="post">
  <input id="user_email" name="user[email]" type="text">
  <input id="user_name" name="user[name]" type="text">
  <input id="user_phone_number" name="user[phone_number]" type="text">
  ...
  <input id="user_email" name="user[email]" type="text">
  <input name="commit" type="submit" value="Submit">
</form> 
```

你应该能够像这样使用参数：

```
@user.update_attributes params[:user] 
```

当您将 html 字段命名为 时`user[email]`，参数哈希如下所示：

```
{ user: { email: "example@example.com", name: "Example" } } 
```

因此，使用`params[:user]`可以让您获得属于用户的嵌套参数散列。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-24T03:55:57.660

You can filter a hash using [`select`](http://ruby-doc.org/core-1.9.3/Hash.html#method-i-select). Find a list of [all attributes](https://stackoverflow.com/q/1526066/520779) of your model and test if the keys are in that list:

```
attrs = a_user.attributes.keys - User.protected_attributes.to_a
a_user.update_attributes params.select {|k,v| attrs.include?(k)} 
```

# ruby-on-rails - 具有活动记录的同一字段上的多个子查询

> ID：14016787
> 
> 赞同：2
> 
> 时间：2012-12-24T03:39:38.013
> 
> 标签：ruby-on-rails, activerecord, subquery

在activerecord中，最好没有文字sql，我试图大致做到这一点：

```
Thing.where(:id => Link.select(:col1).where(subquery1), :id => Link.select(:col2).where(subquery2)) 
```

我需要它在子查询之间给我一个 AND，但最后一个子查询会覆盖前面的子查询。

注意：我从每个子查询的链接表中选择不同的列

我已经尝试过这个：

```
t = Thing.where(:id => Link.where(subquery1))
t.where(:id => Link.where(subquery2)) 
```

另请注意子查询的性质意味着我不能将我的 AND 放入单个子查询

有什么方法可以在 ActiveRecord 中做到这一点而不求助于 SQL？

我正在使用 Rails 3 和 PostgreSQL

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T03:53:41.960

您最好将两个 where 条件链接起来，然后将它们组合起来。

```
Thing.where(:id => Link.select(:col1).where(subquery1)).where(:id => Link.select(:col2).where(subquery2)) 
```

这将`AND`在两个`IN`查询之间添加。

# ios - 如果用户未在特定选项卡上登录，如何显示登录视图控制器？

> ID：14016798
> 
> 赞同：1
> 
> 时间：2012-12-24T03:42:16.647
> 
> 标签：ios, ios5, ios6

我有一个允许匿名访问的选项卡栏控制器应用程序，但是一个选项卡需要用户登录。我不确定如何实现它。我有一个登录视图控制器，它有一个登录/取消选项，我可以在标签栏控制器的视图加载时模态显示，但是用户可以简单地按下取消，从而关闭登录视图控制器。我不清楚如何实现它的逻辑。我如何让我的应用程序正确地流向用户可以匿名浏览的位置，但保持一个选项卡是唯一登录的选项。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T04:09:30.817

以下可能会起作用：

`[self.tabBarController.selectedViewController presentModalViewController:loginVC animated:NO];`

在不了解更多代码结构的情况下，我无法更具体地提出建议。它的要点是，您需要找到能够处理 presentModalViewController 的导航控制器或可接受的视图控制器层次结构来呈现您的登录视图控制器。

# android - 在 iOS 上下载失败比在 Android 上更频繁？

> ID：14016802
> 
> 赞同：1
> 
> 时间：2012-12-24T03:42:57.357
> 
> 标签：android, ios, download

在我的 iOS 项目中，我使用 NSURLConnection 下载文件。我的代码就像[http://developer.apple.com/library/ios/#documentation/Cocoa/Conceptual/URLLoadingSystem/Tasks/UsingNSURLConnection.html](http://developer.apple.com/library/ios/#documentation/Cocoa/Conceptual/URLLoadingSystem/Tasks/UsingNSURLConnection.html)文档。在我团队的 Android 项目中，我们使用 Android 的 API 下载相同的文件。也没什么特别的。iOS 和 Android 项目都有相同的失败重试机制，它们都向服务器发送相同的统计数据。他们试图下载的文件在 1M 到 10M 之间。

统计服务器显示，对于相同的 URL，在 android 上下载失败率为 2%，但在 iOS 上为 20%！由于他们试图下载相同的 URL，这似乎不是服务器的问题，而更像是客户端的问题。

为什么iOS下载会如此频繁地失败？我应该为 iOS 使用任何特殊的 API，以使下载变得健壮吗？目前我正在使用NSURLConnection，我刚刚发现NSURLDownloader 写文件更方便。它们的下载成功率会有所不同吗？

PS我得到的错误 -
`(void) connection: (NSURLConnection *) connection didFailWithError: (NSError *) , is usually -1005, NSURLErrorNetworkConnectionLost.`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T04:02:15.827

我建议您更多地了解为什么您会收到 NSURLErrorNetworkConnectionLost。即使您的设备显示已连接，有时它也可能会丢失连接并在指标相应更新之前尝试重新连接。

这是更好地处理可达性的更多信息的一个很好的起点。[在 Objective C 中检查 Internet 连接](https://stackoverflow.com/questions/477852/checking-for-internet-connectivity-in-objective-c)

否则，我建议您发布与下载相关的代码，以便其他人可以查找可能的问题。

# jquery - Google+ API 上的 jQuery JSON 解析和代码优化

> ID：14016804
> 
> 赞同：0
> 
> 时间：2012-12-24T03:43:29.197
> 
> 标签：jquery, json, google-plus

我正在尝试从 Google+ API 解析个人资料名称和个人资料图片。我制作了一个脚本，为一个配置文件提取数据，但我需要从多个帐户中提取数据。这是我到目前为止所做的：http: [//jsfiddle.net/KTbcX/](http://jsfiddle.net/KTbcX/)

我想将配置文件数据插入每个 .box 类，但我这样做的方式似乎效率低下。我想做的是让每个 data-id 属性都将自己插入到脚本中。像这样

```
<div class="box">
  <div class="gplus-data" data-id="113411411661448774142"></div>
</div>
<div class="box">
  <div class="gplus-data" data-id="100300281975626912157"></div>
</div>
<div class="box">
  <div class="gplus-data" data-id="104560124403688998123"></div>
</div>

<script>
$(function() {
    $.getJSON("https://www.googleapis.com/plus/v1/people/ [data-id would go here] ?fields=displayName%2Cimage&key=AIzaSyAQtjGlomf-jLktD8h6je_bHnxYkSDOOyQ", function(data) {
        $('.gplus-data').append('<tbody class="items"></tbody>');
        $('.gplus-data tbody').prepend('<tr><th>Name</th><th>Image</th></tr>');          
            var item = '<td>' + data.displayName + '</td>';
            item += '<td><img src="' +data.image.url + '"></td>';
            $('.items').append('<tr>' + item + '</tr>');
    });
});
</script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-24T03:51:07.667

试试这个

```
$(function() {

    $('.gplus-data').each(function() {
        var that = this;
        $.getJSON("https://www.googleapis.com/plus/v1/people/" + $(this).data('id') + "?fields=displayName%2Cimage&key=AIzaSyAQtjGlomf-jLktD8h6je_bHnxYkSDOOyQ", function(data) {

            $(that).append('<tbody class="items"></tbody>');
            $(that).find('tbody').prepend('<tr><th>Name</th><th>Image</th></tr>');
            var item = '<td>' + data.displayName + '</td>';
            item += '<td><img src="' + data.image.url + '"></td>';
            $(that).find('.items').append('<tr>' + item + '</tr>');

        });

    });

});​ 
```

# jquery - jQuery 导航帮助

> ID：14016805
> 
> 赞同：0
> 
> 时间：2012-12-24T03:43:39.320
> 
> 标签：jquery

更新以修复标记问题：/

[http://jsfiddle.net/G7p2U/1/](http://jsfiddle.net/G7p2U/1/)这是更好地理解一切的链接

我正在使用的 jQuery 是

```
$(document).ready( function() {
  $(".crumbs a").each( function() {
    $(this).append('<div class="indicator"></div>');
  });
var i = 0;
var linkpos= new Array("0,0", "0,110", "0,220", "0,330", "0,440", "0,550", "0,660");
    $(".crumbs").each( function() {
 var s = linkpos[i];
 var x = s.split(",");
 var t = x[0];
 var l = x[1];
$(this).css({ "top":t+"px", "left":l+"px" });
 i++;
 }); 
}); 
```

问题是，当它被编写时它工作正常，现在出现了问题。在标记是这样之前

```
 <div class="pun-crumbs">
    <div class="crumbs">
     <a href="#">Index</a>
   </div>
  <div class="crumbs">
     <a href="#">Profile</a>
  </div>
     <div class="crumbs">
       <a href="#">Recent</a>
    </div>
    <div class="crumbs">
      <a href="#">Link 4</a>
   </div>
 </div>​ 
```

虽然这不是 PHP 解析数据标记的方式，但它实际上是这样出来的

```
 <div class="pun-crumbs">
   <div class="crumbs">
     <a href="#">Index</a>
      <a href="#">Profile</a>
        <a href="#">Recent</a>
         <a href="#">Link 4</a>
      </div>
    </div>​ 
```

所以我现在的麻烦是由于某种原因我无法像我需要的那样将链接分开..

应该看起来像这样 [http://jsfiddle.net/nXrDn/](http://jsfiddle.net/nXrDn/)

有什么帮助吗？

​</p>

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-24T03:51:01.263

[***jsFiddle 演示***](http://jsfiddle.net/G7p2U/4/)

您可以通过运行以下脚本来准备元素，从新 HTML 开始重现您的原始标记：

```
$(".crumbs > a").unwrap();
$(".pun-crumbs > a").wrap("<div class='crumbs' />"); 
```

您所要做的就是将它放在您的文档就绪处理程序中，在您当前的代码之前，如演示中所示。

这非常直观：它删除了`.crumbs`div（解开它的子元素），然后将每个元素包装在一个新的`.crumbs`div 中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-24T03:54:20.973

[http://jsfiddle.net/G7p2U/12/](http://jsfiddle.net/G7p2U/12/)

```
$(document).ready( function() {
$(".crumbs").addClass("crumby").removeClass("crumbs")
$(".crumby a").wrap('<div class="crumbs" />');
$(".crumbs a").each( function() {
//rest of code 
```

# css - Node.js Stylus Interpolation 未呈现文档中显示的样式

> ID：14016806
> 
> 赞同：1
> 
> 时间：2012-12-24T03:43:54.410
> 
> 标签：css, node.js, mixins, stylus

我正在尝试使用手写笔运行供应商特定的 css mixin，我直接从文档中获取了这个，但它似乎根本没有渲染 css。有什么想法吗？

```
vendor(prop, args)
  -webkit-{prop} args
     -moz-{prop} args
      -ms-{prop} args
       -o-{prop} args
          {prop} args

border-radius()
  vendor('border-radius', arguments)

li
 border-radius 3px 3px 0 0 
```

应该可以工作，但是在呈现样式表时没有border-radius 属性？

此外，只做 mixin 工作正常

```
border-radius()
  -webkit-border-radius arguments
  -moz-border-radius arguments
  -ms-border-radius arguments
  -o-border-radius arguments
  border-radius arguments

li
  border-radius 3px 
```

渲染：

```
li{
  -webkit-border-radius: 3px
  -moz-border-radius: 3px
  -ms-border-radius: 3px
  -o-border-radius: 3px
  border-radius: 3px
} 
```

正如预期的那样。对此有什么想法吗？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-24T04:07:00.383

Hey I figured this out and thought I would post back the answer. What was tripping me up was that the mixin vendor(prop, args) were indented thus it was not rendering the code. Watch the indents!

```
vendor(prop, args)
  -webkit-{prop} args
     -moz-{prop} args
      -ms-{prop} args
       -o-{prop} args
          {prop} args 
```

Should be:

```
vendor(prop, args)
  -webkit-{prop} args
  -moz-{prop} args
  -ms-{prop} args
  -o-{prop} args
  {prop} args 
```

# jquery - 动画期间列被下推页面

> ID：14016809
> 
> 赞同：0
> 
> 时间：2012-12-24T03:44:02.300
> 
> 标签：jquery, css

我有 3 个 div，最初的宽度都是 33.333%。单击一个 div 时，我希望该 div 展开到 80%，而其他两个未选中的 div 折叠到 10%。我也希望这个过程是动画的。当我尝试时，最右边的列被向下推到页面下，直到动画完成。我怎样才能使这个过程流利？

HTML：

```
<html>
    <head>
        <script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>        
    <title>
    </title>
    </head>
    <body>
        <div class="column" id="column1">    
            1
        </div>
        <div class="column" id="column2">
            2
        </div>
        <div class="column" id="column3">
            3
        </div>
    </body>    
</html>​ 
```

CSS：

```
body {
     margin-top: 0px;
     margin-right: 0px;
     margin-bottom: 0px;
     margin-left: 0px
}
.column {
    height:100%;
    float:left;
}
#column1{
    width:33.33333%;
    background:red;
}
#column2{
    width:33.33333%;
    background:white;
}
#column3{
    width:33.33333%;
    background:blue;
}​ 
```

JS：

```
$(document).ready(function(){
  $("#column1").click(function(){
    $("#column1").animate({width:"80%"},{duration:1500,queue:false});
    $("#column2").animate({width:"10%"},{duration:1500,queue:false});
    $("#column3").animate({width:"10%"}, {duration:1500,queue:false});
  });
  $("#column2").click(function(){
    $("#column1").animate({width:"10%"},{duration:1500,queue:false});
    $("#column2").animate({width:"80%"},{duration:1500,queue:false});
    $("#column3").animate({width:"10%"}, {duration:1500,queue:false});
  });
  $("#column3").click(function(){
    $("#column1").animate({width:"10%"},{duration:1500,queue:false});
    $("#column2").animate({width:"10%"},{duration:1500,queue:false});
    $("#column3").animate({width:"80%"}, {duration:1500,queue:false});
  });
}); 
```

[http://jsfiddle.net/KkxHS/](http://jsfiddle.net/KkxHS/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-24T16:06:50.410

Atif，非常感谢您的回复。在我发帖和您的回复之间的时间里，我找到了这个线程，[浮动元素上的 jquery 动画](https://stackoverflow.com/questions/12377986/jquery-animation-on-floating-elements)。我遵循了这个例子，它产生了我正在寻找的东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-24T03:46:29.083

欢迎来到 StackOverflow，试试这个

```
$(document).ready(function() {
    var selectedWidth = "80%";
    var othersWidth = "10%"
    $(".column").click(function() {
        var self = $(this);
        $(this).siblings().animate({
            width: "10%"
        }, 1500, function() {
            self.animate({
                width: "80%"
            }, {
                duration: 1500,
                queue: false
            });

        });
    });
});​ 
```

小提琴 - [http://jsfiddle.net/atif089/KkxHS/3/](http://jsfiddle.net/atif089/KkxHS/3/)

或者

```
$(document).ready(function() {
    $(".column").click(function() {
        var self = this;
        $(this).siblings().animate({
            width: "10%"
        }, {
            duration: 1500,
            queue: false
        });
        setTimeout(function() {
            console.log(self);
            $(self).animate({
                width: "80%"
            }, {
                duration: 1500,
                queue: false
            });
        }, 500);

    });
});​ 
```

小提琴 - [http://jsfiddle.net/atif089/KkxHS/4/](http://jsfiddle.net/atif089/KkxHS/4/)

# c++ - C++11 动态转换 If Else Chain -> Switch

> ID：14016810
> 
> 赞同：7
> 
> 时间：2012-12-24T03:44:21.033
> 
> 标签：c++, templates, c++11, rtti

考虑以下：

```
struct B { };

template<typename T>
struct D : B
{
    T t;
}

void g(int i) { ... }
void g(string s) { ... }
void g(char c) { ... }

void f(B* b)
{
    if (dynamic_cast<D<int>*>(b))
    {
        g(dynamic_cast<D<int>*>(b)->t);
    }
    else if (dynamic_cast<D<string>*>(b))
    {
        g(dynamic_cast<D<string>*>(b)->t);
    }
    else if (dynamic_cast<D<char>*>(b))
    {
        g(dynamic_cast<D<char>*>(c)->t)
    }
    else
        throw error;
}; 
```

这里只有三种可能的 T 类型——int、string、char——但如果可能的类型列表更长，比如 n，if else 链将花费 O(n) 来执行。

解决这个问题的一种方法是以某种方式在 D 中存储一个额外的类型代码，然后`switch`在类型代码上存储一个额外的类型代码。

RTTI 系统必须已经有这样的代码。有什么办法可以访问它并打开它吗？

还是有更好的方法来做我想做的事情？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-24T03:51:21.100

C++11*几乎*就在那里。

在 C++03 中这是不可能的，因为获得编译时常量（`case`需要）的唯一方法是通过类型系统。由于`typeid`总是返回相同的类型，它不能为`switch`.

C++11 添加`constexpr`和`type_info::hash_code`作为类型的唯一标识符，但不组合它们。您可以`typeid`在类型名称或静态类型表达式上的常量表达式中使用，但因为`hash_code`是非`constexpr`函数，您不能调用它。

当然，有多种解决方法，您描述了其中一种，其中最通用的一种是使用模板元编程将访问者应用于类型向量。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-24T04:00:55.187

因为只有少数类型是有效的，你可以用虚函数和模板特化来解决这个问题：

```
struct B
{
    virtual void g() = 0;
}

template<typename T>
struct D : public B
{
    T t;
};

template<>
struct D<int> : public B
{
    int t;
    void g() { /* do something here */ }
};

template<>
struct D<std::string> : public B
{
    std::string t;
    void g() { /* do something here */ }
};

template<>
struct D<char> : public B
{
    char t;
    void g() { /* do something here */ }
};

void f(B* b)
{
    b->g();
} 
```

如果您提供了错误的类型，或者需要运行时检查（C++ 非常不擅长），这将在编译时失败。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-24T04:47:26.340

C++ 中运行时切换类型的主要选择是虚函数。

这很简单：

```
#include <string>
#include <iostream>
using namespace std;

struct Base
{
    virtual void g() const = 0;
};

template< class Type > void g( Type const& );

template<> void g( int const& ) { cout << "int" << endl; }
template<> void g( string const& ) { cout << "string" << endl; }
template<> void g( char const& ) { cout << "char" << endl; }

template< class Type >
struct Derived: Base
{
    Type t;
    virtual void g() const override { ::g<Type>( t ); }
};

void f( Base& b ) { b.g(); }

int main()
{
    Derived<int>().g();
} 
```

如你所见，它也是有效的，O(1) 而不是愚蠢的 O( *n* )。另外，使用静态（编译时）类型检查而不是动态（运行时）类型检查，节省了大量烦人的测试。我还能说什么？真的，忘记类型代码和枚举等。请记住，Bertrand Meyer 选择*不支持*Eiffel 中的枚举，正是因为这个原因，人们倾向于滥用它们作为类型代码。一定要使用虚函数。

嘿，虚拟功能！

当您需要动态分派类型时，它们非常有用。

因此，我建议为此使用虚函数。:)

* * *

**编辑**：模板化`::g`以避免实际代码中可能出现的歧义。

# excel - VBscript 抛出异常说“IsError”是未定义的变量

> ID：14016818
> 
> 赞同：0
> 
> 时间：2012-12-24T03:45:18.980
> 
> 标签：excel, vbscript, vba

如果以下错误处理程序不起作用，仍然会抛出未定义“IsError”变量的异常。

```
 If not IsError(objExcel1.Application.Match(ParentID, ob3.Columns(1), 0)) Then    
    ParentMatchRowNum = objExcel1.Application.Match(ParentID, ob3.Columns(1), 0)
  Else
     '-- do something
  End if 
```

**快照**

![在此处输入图像描述](../Images/f64e2c1e6d278ded6df67f5cf01893c8.png)

你能在这里帮我吗，如何解决这个问题？

谢谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-24T04:24:14.093

据我所知， IsError 不是 VBscript 函数。支持证据：[VBScript 函数](http://webcheatsheet.com/asp/vbscript_functions.php)和[使用 VBScript 函数](http://msdn.microsoft.com/en-us/library/aa227640%28v=vs.60%29.aspx)。你会注意到`IsError`丢失了。

相反，您需要进行错误捕获。像这样的东西应该适合。

```
On Error Resume Next
ParentMatchRowNum = objExcel1.Application.Match(ParentID, ob3.Columns(1), 0)
If err then
   err.clear
   'Do something
end if
on Error Goto 0 
```

# scala - Spark如何实现交互式内存缓存？

> ID：14016819
> 
> 赞同：1
> 
> 时间：2012-12-24T03:45:20.643
> 
> 标签：scala, jvm, mapreduce, apache-spark

我想知道一个程序是否结束，用于该程序的内存被 GC 释放。

当我在交互式 Scala 解释器中时，如何在 Spark 中缓存数据？

这是否意味着一次翻译在一个过程中？

但更多时候，我使用终端来运行代码，而不是在解释器本身，在这种情况下，我怎样才能实现 In-Memory？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-09T08:58:23.987

无论您是从解释器还是通过命令提示符工作，都`rdd.cache()`可以使用将 rdd 保存在内存中。

# android - 从一个活动传递值以覆盖其在另一个活动中的值

> ID：14016821
> 
> 赞同：0
> 
> 时间：2012-12-24T03:45:55.153
> 
> 标签：android, android-intent

我有一个应用程序，它需要一个字符串来计算一些算法。它工作正常。现在我试图从主要活动中调用此活动，因此主要活动需要用户输入来覆盖第二个活动中的字符串。我在主要活动中有一个可编辑字段。我无法将主要活动的值传递给第二个活动。我怎样才能做到这一点？我的主要活动代码如下所示

```
public void onClick(View view){
       switch (view.getid())

    case R.id.calculate:

    setname= insertname.getText.toString(); //insertname is the Editablefield
    Intent i = new Intent(this, themain.class);

    i.putExtra("Name",insertname); //
    startActivityForresult(i,1);

    }

protected void onActivityResult(int requestCode, int resultCode,Intent data) {
    super.onactivityresult(requestcode resultcode data);
    switch (requestcode ){

    case 1:
    //return result form activity 2
    }
    }

// Code for second activity is something like this:

public void onClick(View view) {
    switch (view.getid()) {

    case R.id.calculate:
        break;
    /*
     * this bit of code takes a string and gets data for this user and
     * returns it in an array. I am trying to overwrite this string
     */

    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T03:58:16.950

尝试使用

```
Intent i = new Intent(this, themain.class);

i.putExtra("Name",setname);  // replace here with setname
startActivityForresult(i,1); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-24T04:00:01.787

you can send your string to activity2 from your activity as following:

```
String str = "My Data"; //Data you want to send
Intent intent = new Intent(FirstActivity.this, SecondActivity.class);
intent.putExtra("name",str);
startActivityForresult(i,1); 
```

you can receive str in activity2 as following:

```
String name = this.getIntent().getStringExtra("name"); 
```

# java - JAVA - 为什么 a == "1" 返回 false

> ID：14016828
> 
> 赞同：-5
> 
> 时间：2012-12-24T03:47:47.407
> 
> 标签：java

> **可能重复：**
> [字符串不等于字符串？](https://stackoverflow.com/questions/7128775/string-is-not-equal-to-string)
> [是什么让参考比较 (==) 对 Java 中的某些字符串起作用？](https://stackoverflow.com/questions/9698260/what-makes-reference-comparison-work-for-some-strings-in-java)

有人可以按照java代码解释我吗

```
String a = "1";
if(a == "1") {
//print compare 1 is true;
} else { 
//print compare 1 is false;
}

if(a.equals("1")) {
//print compare 2 is true;
} else { 
//print compare 2 is false;
} 
```

结果就像

```
compare 1 is false
compare 2 is true 
```

我唯一的解释是它比较内存地址而不是值本身。但我不确定。可以请一些人把它点亮。在 .Net == 运算符被重载以比较字符串的内容。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-24T03:48:42.650

use `"1".equals(a)`, String 是一个对象，所以`equals()`用来比较

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-24T03:50:49.963

我知道`==`运算符是比较**“它是同一个对象吗？”**

对象`a`与常量字符串不同`"1"`。

所以返回假

# javascript - 在 DOM 中切换 HTML 元素而不复制 HTML

> ID：14016830
> 
> 赞同：0
> 
> 时间：2012-12-24T03:48:05.170
> 
> 标签：javascript, jquery, html, dom

假设我`<div>`在 DOM 中有两个元素。我可以使用 jQuery 在它们之间轻松切换它们的标记，如下所示：

```
function switch_html(el1, el2){
        var el1_content = el1.html();
        var el2_content = el2.html();
        el1.html(el2_content);
        el2.html(el1_content);
} 
```

但是，我如何实际切换 DOM 元素，而不仅仅是复制和切换 HTML 源？例如，在我目前正在开发的应用程序中，我正在交换`<div>`包含已填写`<input>`字段的内容。如果仅复制这些字段的源 HTML，则输入中包含的值将丢失。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-24T03:57:59.810

您可以使用 jQuery append / element.appendChild 移动实际的 DOM 节点。移动实际的 DOM 节点，不要尝试制作副本/克隆。

试试这个：

```
var children1 = $('#el1').children();
var children2 = $('#el2').children();

$('#el1').append(children2);
$('#el2').append(children1); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-24T03:53:29.293

javascript 有一个 cloneNode() 函数，它在传递 true 时执行“深度”克隆。

所以：

```
 function switch_html(el1, el2){
      var el1Clone = el1.cloneNode(true);
      var el2Clone = el2.cloneNode(true);
      el2.replaceNode(el1Clone);
      el1.replaceNode(el2Clone);
 } 
```

或者对于（稍微）性能更高的解决方案：

```
 function switch_html(el1, el2){
      var el2Clone = el2.cloneNode(true);
      el2.replaceNode(el1);
      el1.replaceNode(el2Clone);
 } 
```

请注意，这里的假设是您想在原始 JavaScript 中执行此操作，即：没有 jQuery

# ios - 是否可以使用 UIButton 实例更改系统音量？

> ID：14016831
> 
> 赞同：0
> 
> 时间：2012-12-24T03:48:13.980
> 
> 标签：ios, volume

我试图避免使用 MPVolumeView，因为它没有提供太多的自定义余地。基本上，我想实现一个音量控制，让用户提前设置来电者的音量。这就是那个屏幕的用途看起来像：

![在此处输入图像描述](../Images/741fa43e4accb8e39115636ffbb812e5.png)

我想使用 UIButton 来创建增加和减少音量按钮，我正在考虑在 IB 中实现一个目标动作机制，如下所示：

```
- (IBAction)increaseVolume:(id)sender
{
    [someVolumeObject setVolume:[systemVolume volume] + 1];
}

- (IBAction)decreaseVolume:(id)sender
{
    [someVolumeObject setVolume:[systemVolume volume] - 1];
} 
```

有谁知道是否有一个类可以让我提取系统卷元素并以这种方式增加它们（基本上不必使用 MPVolumeView）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T05:49:49.767

试试这样

1.定义属性并合成到您的 MPMusicPlayerController 对象，

```
@property (nonatomic, retain) MPMusicPlayerController *musicPlayer;
@synthesize musicPlayer; 
```

2.取一个浮点变量为，

```
 float volume_control=0; 
```

3.在你的 viewDidLoad 方法中使用 NSNotification 来改变音量，

```
self.musicPlayer = [MPMusicPlayerController iPodMusicPlayer];
NSNotificationCenter* notificationCenter = [NSNotificationCenter defaultCenter];
    [notificationCenter addObserver:self 
                       selector:@selector(handleExternalVolumeChanged:)
                           name:MPMusicPlayerControllerVolumeDidChangeNotification 
                         object:self.musicPlayer];
[self.musicPlayer beginGeneratingPlaybackNotifications]; 
```

4.define Method for handleExternalVolumeChanged: as,

```
- (void)handleExternalVolumeChanged:(id)notification {
  volume_control = self.musicPlayer.volume;
} 
```

5.现在定义你的音量控制按钮来增加/减少音量，

```
-(IBAction)decrease_volume:(id)sender{
  if (volume_control>0) {
      self.musicPlayer.volume =self.musicPlayer.volume-0.1;  
      volume_control-=0.1;
      }
   }
 -(IBAction)increase_volume:(id)sender{
    if (volume_control<1) {
    self.musicPlayer.volume =self.musicPlayer.volume+0.1;  
    volume_control+=0.1;
   }
  } 
```

希望它会帮助你..

# javascript - 嵌套在原型函数下的函数表现不同

> ID：14016841
> 
> 赞同：2
> 
> 时间：2012-12-24T03:49:21.303
> 
> 标签：javascript

嵌套在原型函数下的函数不会获得为原型定义的 this.variables。

```
var Person, p;

Person = function(name, age) {
  this.name = name;
  this.age = age;
};

Person.prototype.getInfo = function() {
  var innerFun;
  innerFun = function() {
    return this.name;
  };
  return "name: " + (innerFun()) + " age: " + this.age;
};

p = new Person('dork', 99);

console.log(p.getInfo());      // name:  age: 99 
```

我认为由于每个函数都是一个对象，**因此**在每个函数定义中都会有所不同；但是下面的代码打破了这个逻辑。

```
var getInfo;

getInfo = function() {
  var display;
  this.name = 'dork';
  return display = function() {
    return this.name;
  };
};

console.log(getInfo()());     // dork 
```

这种行为背后是否有逻辑，或者我应该把它作为一个规则并使用 call() 来解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T04:01:42.580

行为的简短版本`this`：

1.  在调用 as 的函数中`x.f()`，`this`将是`x`.
    （注意：*调用*为`x.f()`。无论您如何以及在何处定义它都无关紧要）
2.  在调用 as 的函数中`f()`，`this`将是`window`.
3.  在调用 as 的函数中`x['f']()`，`this`将是（不知道为什么我不这么认为）~~`window`~~ `x`
4.  在作为`f.call(x)`或调用的函数中`f.apply(x)`，`this`将是`x`。

同样，原型并不重要，如果你这样做

```
var f = p.getInfo;
console.log(f()); 
```

你会发现只有调用风格很重要。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-24T14:10:43.803

**总结结论**：

> 规则：如果函数调用没有使用上下文，则默认上下文是全局窗口对象

```
this.name = 'global';
console.log(p.getInfo());       // name: global age: 99 
```

*解决方案1*
​​使用呼叫/申请

```
return "name: " + (innerFun.call(this)) + ": Age " + this.age; 
```

*解决方案2* **将此**
用于内部功能

 **```
this.innerFun = function() {
  return this.name;
};
return "name: " + (this.innerFun()) + ": Age " + this.age; 
```

*解决方案3*

```
self = this
innerFun = function() {
  return self.name;
}; 
```**

# oracle - How to schedule a work to run at particular time using dbms_scheduler

> ID：14016842
> 
> 赞同：2
> 
> 时间：2012-12-24T03:49:27.550
> 
> 标签：oracle, oracle10g, oracle11g, advanced-queuing, dbms-scheduler

Im not clear about this, here in DBMS_SCHEDULER we have CREATE_PROGRAM CREATE_JOB CREATE_SCHEDULE etc., after reading the oracle doc still im unclear what to use, On the Oracle side, i am going to use DBMS_SCHEDULER to insert a new message into the queue at the appropriate time, i planned to create scheduler to execute it on particular time and then create program to execute my PL/SQL block which will enqueue the message in the queue Or instead of using CREATE_SCHEDULE and CREATE_PROGRAM, CREATE_JOB does both the jobs, which to use? please guide me whether i am doing correctly, if not please correct me.

Thankyou

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-24T10:46:59.597

`create_job`是安排通话的基本通话。您不必创建命名程序或时间表来执行此操作。如果您有多个要使用此调用的作业，则创建命名程序/时间表很有用。您可以只引用指定的程序时间表，而不是让每个作业都保存一份副本。

例如，如果您有 5 个作业想要调用您的包`MYPKG.ENTRY_PROG(param)` ，并且每个作业只使用不同的参数值，我会说您想使用`create_program`来定义该 pl/sql 调用，然后`create_job`引用该程序名称 + 设置选择的参数值. 这样，如果您想稍后重命名 API 或其他什么，您不必更改五个单独的作业来执行此操作。

如果您的工作只是一个独立的工作，它调用不会被其他工作调用的例程，那么您不必使用`create_program`/ `create_schedule`，直接使用`create_job`即可。

我使用的一个示例`create_program`是调用测试工具。我的测试工具包被调用`pkg_test_harness.queue_tests(p_set_name in varchar2)`，因此我定义了一些作业，这些作业将各种 API 排入队列，以便在上午 9 点、中午 12 点和下午 5 点运行。我没有单独定义每个作业调用，而是`create_program`像这样调用：

```
 dbms_output.put('Setting up TEST_HARNESS_ENQUEUE scheduler program...');
    dbms_scheduler.create_program(program_name        => 'TEST_HARNESS_ENQUEUE',
                                  program_type        => 'STORED_PROCEDURE',                                                          
                                  program_action      => 'pkg_test_harness.queue_tests', 
                                  number_of_arguments => 1,
                                  enabled             => false,
                                  comments            => 'Program to enqueue a set of API test for the test harness to run.');

    dbms_scheduler.define_program_argument(program_name      => 'TEST_HARNESS_ENQUEUE',
                                           argument_name     => 'p_set_name',
                                           argument_position => 1,
                                           argument_type     => 'VARCHAR2',
                                           default_value     => '');

    dbms_scheduler.enable (name => 'TEST_HARNESS_ENQUEUE');

    dbms_output.put_line('done.'); 
```

然后每个“工作”都被定义为指向程序。

```
dbms_output.put('Setting up TEST_HARNESS_ENQUEUE_9AM scheduler job...');
dbms_scheduler.create_job(job_name        => 'TEST_HARNESS_ENQUEUE_9AM',
                          program_name    => 'TEST_HARNESS_ENQUEUE',
                          start_date      => systimestamp,
                          end_date        => null,
                          repeat_interval => 'freq=daily; byhour=9; byminute=0; bysecond=0;',
                          enabled         => true,
                          auto_drop       => false,
                          comments        => 'Job to enqueue a set of API test for the test harness to run.');

dbms_scheduler.set_job_argument_value(job_name          => 'TEST_HARNESS_ENQUEUE_9AM',
                                      argument_position => 1,
                                      argument_value    => 'DAILY_9AM');
dbms_output.put_line('done.');

dbms_output.put('Setting up TEST_HARNESS_ENQUEUE_12PM scheduler job...');
dbms_scheduler.create_job(job_name        => 'TEST_HARNESS_ENQUEUE_12PM',
                          program_name    => 'TEST_HARNESS_ENQUEUE',
                          start_date      => systimestamp,
                          end_date        => null,
                          repeat_interval => 'freq=daily; byhour=12; byminute=0; bysecond=0;',
                          enabled         => true,
                          auto_drop       => false,
                          comments        => 'Job to enqueue a set of API test for the test harness to run.'); 
```

我没有创建一个命名的时间表，因为这些时间表是个别工作所独有的。

# php - PHP中的字节和有符号短整数

> ID：14016848
> 
> 赞同：0
> 
> 时间：2012-12-24T03:49:50.907
> 
> 标签：php, integer, byte

我想在 php 中发送一个 udp 数据包。我正在使用 mac os x 10.6。

我的问题是我想以小时和分钟分别发送当前时间，每个占用一个字节，但我找不到如何在 php 中发送字节的方法，因为字节不是 php 中的原始数据类型。我在发送有符号短整数时也遇到了问题。

提前致谢。

# regex - 解析许多小字符串或单个大字符串 - 哪个更快？

> ID：14016861
> 
> 赞同：3
> 
> 时间：2012-12-24T03:52:05.327
> 
> 标签：regex, performance

在必须使用正则表达式解析大量字符串的场景中，考虑到所有测试都使用相同的 RegEx 指针，这样会更快：

1.  单独测试数组中的每个字符串，或者；
2.  将所有内容连接成一个大字符串并只测试一次？

我相信数字 2 最好，而不是多次启动 RegEx 引擎来处理字符串数组。然而，在 PHP (PCRE) 中进行了一些测试后，这似乎是不真实的。

# 基准

* * *

我在 PHP 5.3 [（源代码）](http://pastebin.com/znW5jYY9 "源代码")中做了一个简单的基准测试，得到了以下结果：

> **122185 次**交互在 5 秒内测试数组中的多个较小字符串
> 
> **5 秒内完成26853 次**交互，进行单个大字符串测试

因此，我必须得出结论，第一种方法最多快 5 倍。但是，我想要求一个权威的答案来确认这一点；由于一些我不知道的 PHP 优化，我可能会错误地假设事情。

在使用正则表达式测试大字符串之前，是否总是一个更优化的解决方案，而不是专门在 PCRE 中？

## preg_grep()

我认为这里不应该考虑这个功能。这是一个基准测试，而不是优化问题。更不用说该函数是特定于 PHP 的方法。此外，`preg_match_all`返回所有匹配的子字符串，而`preg_grep`仅指示匹配的数组元素。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-24T05:32:00.740

你的基准有缺陷。看看你的这段代码：

```
while(time() - $TimeStart < 5)
    for($i = 0; $i < $Length; $i++, $Iterations++)
    {
        preg_match_all($RegEx, $Input[$i], $m);
    }
} 
```

`$Iterations`应该*只*增加在里面，而`while`不是里面`for`。将前一个结果除以：

```
24437 iterations using array
26853 iterations using big string 
```

您不应该`time()`用于时间测量，`microtime()`更适合获得准确性。

最后，这个基准测试并不完整，因为要为两个测试获得相同的结果，数组方法需要`array_merge()`在每次迭代后执行。此外，在某个地方需要将大字符串转换为数组，这也需要时间。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-24T10:49:23.913

您绝对不应该**将**所有目标字符串合并为一个。一方面，它会破坏很多在较短字符串上可以正常工作的正则表达式。`^`和`$`、`\A`和等锚点`\z`会突然发现自己没有可匹配的对象。此外，严重依赖诸如`.* or`.*?` 之类的正则表达式，尽管其固有的低效率，但在较短的字符串上工作，当在 Frankenstring 上使用时往往会变得非常缓慢[。](http://www.regular-expressions.info/catastrophic.html)

但即使连接版本更快，这有关系吗？有没有试过阵列版，发现太慢了？这是一个非常激进的解决方案（如果是解决方案）；如果我是你，我会推迟实施它，直到我有它可以解决的问题。

# ruby - 身份验证数据错误？

> ID：14016864
> 
> 赞同：2
> 
> 时间：2012-12-24T03:52:21.680
> 
> 标签：ruby, twitter

使用“推特”宝石：

```
Twitter.configure do |config|
  config.consumer_key = ENV['TWITTER_KEY'],
  config.consumer_secret = ENV['TWITTER_SECRET']
end

twitter = Twitter::Client.new(
  oauth_token: current_user.twitter_token,
  oauth_token_secret: current_user.twitter_secret
) 
```

并得到一个

```
Twitter::Error::Unauthorized: Could not authenticate you 
```

尝试打电话时

```
twitter.user_timeline('saiko_chriskun') 
```

密钥应该没问题，因为它们可以通过omniauth ok 并且我能够获取用户的oauth_token 和秘密。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T03:11:10.870

请看这个：

```
Twitter.configure do |config|
  config.consumer_key = YOUR_CONSUMER_KEY
  config.consumer_secret = YOUR_CONSUMER_SECRET
  config.oauth_token = YOUR_OAUTH_TOKEN
  config.oauth_token_secret = YOUR_OAUTH_TOKEN_SECRET
end 
```

[http://sferik.github.com/twitter/](http://sferik.github.com/twitter/)

# javascript - 在 DIV 中水平滚动动画的行为很奇怪

> ID：14016865
> 
> 赞同：0
> 
> 时间：2012-12-24T03:52:21.480
> 
> 标签：javascript, jquery, navigation, scroll, jquery-animate

我正在尝试在 DIV 内进行水平滚动锚定。如果我只是为整个身体标签设置动画，但似乎对我来说在 DIV 中不起作用。

继承人的JavaScript

```
 <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1/jquery.min.js"></script>      

    <script type="text/javascript">
            jQuery(document).ready(function($) {

                $(".scroll").click(function(event){     
                    event.preventDefault();
                    $('#wrapper').animate({scrollLeft:$(this.hash).offset().left}, 500);
                });
            });
    </script> 
```

和继承人的HTML

```
<body>
    <div id="wrapper">
    <div id="wrappercontent">
    <div id="section1" class="section">

        <img src="images/big_head.png" />

    </div>
    <div id="section2" class="section">
        <img src="images/whatis.png" />

    </div>
    <div id="section3" class="section">
        <h2>Section 3</h2>
        <p>
            blahblahblabh

        </p>

    </div>
    </div>
 <div id="nav">
            <li><a href="#section1" class="scroll">1</a></li>
            <li><a href="#section2" class="scroll">2</a></li>
            <li><a href="#section3" class="scroll">3</a></li>
        </div>

        </div>
</body> 
```

这是样式表

```
 *{
    margin:0;
    padding:0;
}
body{
    background:#f0efe4;
    letter-spacing:-1px;
     font-family:Georgia;
    font-size: 34px;
    font-style: italic;
    width:12000px;
}
#wrapper{
    width:1000px;
    height:700px;

    overflow:scroll;
}
#wrappercontent{
    height:auto;
    width:12000px;

}

#nav{
    z-index:1;
    position:fixed;
}
.section{
    margin:0px;
    bottom:0px;
    width:4000px;
    float:left;
    height:100%;
    text-shadow:1px 1px 2px #f0f0f0;
} 
```

它的行为很奇怪。请帮忙

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-24T04:06:50.273

您只需要在计算中考虑当前滚动位置：

```
scrollLeft: $('#wrapper').scrollLeft() + $(this.hash).offset().left 
```

**演示：http:** [//jsfiddle.net/brianpeiris/h6hvq/](http://jsfiddle.net/brianpeiris/h6hvq/)

# php - 特定的 php 文件未打开

> ID：14016866
> 
> 赞同：1
> 
> 时间：2012-12-24T03:52:27.107
> 
> 标签：php, file, apache2

希望有人可以阐明我的问题。我刚刚重新安装了我的操作系统（lubuntu 12.10）并设置了我的本地服务器。除了我目前正在处理的一个文件之外，一切似乎都正常工作。当我尝试在浏览器中运行它时，它会下载和/或给出服务器错误（HTTP 错误 500）。

我不认为这是 Apache 或 PHP 问题，因为其他文件工作正常，但我认为相关文件中的代码没有任何问题。

还有什么可能导致这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-24T04:00:00.170

这个问题很可能是由权限问题引起的。

Apache 服务器以`www-data:www-data`. 这意味着其他用户创建的文件可能存在一些权限问题。

要解决这个问题，您应该将您的用户添加到`www-data`组并设置`/var/www`目录以继承组`www-data`，或者您可以使用`chown`更改所有文件的所有权以在`www-data`组中。

为了保持系统的安全，您还应该确保所有文件都具有权限集`660`，这意味着文件的所有者和用户组的任何人都可以读取和写入，但任何其他用户将不能用它做任何事情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-24T04:12:25.320

如果你有一个运行超过 30 秒（默认）的 php 脚本，你必须[`max_execution_time`](http://php.net/manual/en/info.configuration.php#ini.max-execution-time)使用[`ini_set`](http://php.net/manual/en/function.ini-set.php)函数来更改 的值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-24T04:20:07.693

没有必要“假设”或设计“更有可能”的原因或猜测“还有什么”。

HTTP 错误 500 表示服务器的`error_log`.
只需打开它即可获得问题的确切解释。

请不要盲目行动，仅仅出于猜测。你可以让事情变得更糟。

# arrays - 在openmp中将多个不同长度的文件加载到一个大数组中

> ID：14016867
> 
> 赞同：0
> 
> 时间：2012-12-24T03:52:45.547
> 
> 标签：arrays, fortran, openmp

我有 4 个不同长度（n1、n2、n3、n4）的文件（file1、file2、file3、file4），每个文件都包含以下类型的数据：

```
x1,y1,z1
x2,y2,z2
...
xn,yn,zn 
```

将这些加载到内存中的最快方法是什么 - 可以同时从 4 个较小的数组创建一个大数组（即 totarray(1:n1+n2+n3+n4,1:3)）吗？如果这不能在 openmp 中完成 - 最快的方法是什么？目前，我只是遍历每个文件名并将其添加到临时数组的底部，该数组在每次迭代中都填充了新数据。每个文件中有数百万个条目，我想加快读取速度。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T18:16:26.727

除非每个文件都在不同的介质上，否则最快的方法可能是一次读取一个文件，这听起来就像你正在做的那样。在这种情况下，OpenMP 不会帮助您，并且可能会使事情变得更糟，因为线程将竞争单个慢速磁盘。不过，这假设您受 I/O 限制。

但是，您没有指定文件的格式。如果它是二进制格式，那么除非您想从压缩开始，否则您将无法做得更好。但是，如果它是文本格式，由于涉及到所有文本解析，您可能会受到 CPU 的限制，并且只需转换为二进制格式就可能获得巨大的加速。这将比 OpenMP 并行化更有效。

[HDF](https://en.wikipedia.org/wiki/Hierarchical_Data_Format)是您可能会考虑的一种很好的二进制格式，但您也可以使用像 fortran“未格式化”文件这样简单的东西。

# drupal-6 - Theme_image() 不返回任何内容

> ID：14016868
> 
> 赞同：-1
> 
> 时间：2012-12-24T03:53:03.333
> 
> 标签：drupal-6

我被最简单的事情困住了。在 Drupal 6 中，我试图获取用户输入的图像路径并将该图像输出到页面。这是一段代码：

```
$slogan_image = theme('image', $slogan_image_path);
dpm("\$slogan_image_path = '$slogan_image_path'");
dpm("\$slogan_image = '$slogan_image'"); 
```

开发输出显示：

```
$slogan_image_path = '/sites/default/files/images/Family.jpg'
$slogan_image = '' 
```

'/sites/default/files/images/Family.jpg' 中有一张图片；如果我浏览到`www.mysite.com/sites/default/files/images/Family.jpg`，将显示图像。

我究竟做错了什么？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-25T18:54:31.020

问题是我的路径以斜线开头。Drupal 路径没有那个初始斜线。Drupal 是开源的，我可以参考[Drupal 6 api 文档](http://api.drupal.org/api/drupal/6)并查看 theme_image 的代码包括这一行：

```
$url = (url($path) == $path) ? $path : (base_path() . $path); 
```

向我展示了 Drupal 会在我的路径前面加上 base_path()。我自己在 Execute PHP 页面中执行该代码，让我看到 theme_image 最终会`//sites/default/files/images/Family.jpg`用作 $url，这显然是一个非法值。

我想我会把这个简短的解释附加到我的小问题中，以帮助初学者了解我是如何调试它的。

# ruby-on-rails - 10.1.3“用户/微博关联”错误

> ID：14016874
> 
> 赞同：1
> 
> 时间：2012-12-24T03:53:55.860
> 
> 标签：ruby-on-rails, rspec, railstutorial.org

我对 Ruby on Rails 相当陌生，并且正在阅读 Michael Hartl 的 Rails 教程。我在第 10 章遇到了一个似乎无法修复的错误（特别是 10.1.3“用户/微帖子关联”）。我遇到的错误是当我执行以下 rspec 命令时：

$ bundle exec rspec 规范/模型

它引发以下错误：

```
Failures:

  1) Micropost accessible attributes should not allow access to user_id
     ←[31mFailure/Error:←[0m ←[31mexpect do←[0m
       ←[31mexpected ActiveModel::MassAssignmentSecurity::Error but nothing was
raised←[0m
←[36m     # ./spec/models/micropost_spec.rb:28:in `block (3 levels) in <top (req
uired)>'←[0m

Finished in 5.79 seconds
←[31m27 examples, 1 failure←[0m

Failed examples:

←[31mrspec ./spec/models/micropost_spec.rb:27←[0m ←[36m# Micropost accessible at
tributes should not allow access to user_id←[0m 
```

这是 micropost_spec.rb 的代码：

```
require 'spec_helper'

describe Micropost do

let(:user) { FactoryGirl.create(:user) }
before { @micropost = user.microposts.build(content: "Lorem ipsum") }

subject { @micropost }

  it { should respond_to(:content) }
  it { should respond_to(:user_id) }
  it { should respond_to(:user) }
  its(:user) { should == user }

  it { should be_valid }

  describe "when user_id is not present" do
    before { @micropost.user_id = nil }
    it { should_not be_valid }
  end

  describe "accessible attributes" do
    it "should not allow access to user_id" do
      expect do
       Micropost.new(user_id: user.id)
      end.to raise_error(ActiveModel::MassAssignmentSecurity::Error)
    end
  end
end 
```

应用程序.rb：

```
require File.expand_path('../boot', __FILE__)

# Pick the frameworks you want:
require "active_record/railtie"
require "action_controller/railtie"
require "action_mailer/railtie"
require "active_resource/railtie"
require "sprockets/railtie"
# require "rails/test_unit/railtie"

  if defined?(Bundler)
 # If you precompile assets before deploying to production, use this line
 Bundler.require(*Rails.groups(:assets => %w(development test)))
 # If you want your assets lazily compiled in production, use this line
 # Bundler.require(:default, :assets, Rails.env)
end

module SampleApp
  class Application < Rails::Application
   # Settings in config/environments/* take precedence over those specified here.
   # Application configuration should go into files in config/initializers
   # -- all .rb files in that directory are automatically loaded.
config.active_record.whitelist_attributes = true
   # Custom directories with classes and modules you want to be autoloadable.
   # config.autoload_paths += %W(#{config.root}/extras)

    # Only load the plugins named here, in the order given (default is alphabetical).
# :all can be used as a placeholder for all plugins not explicitly named.
# config.plugins = [ :exception_notification, :ssl_requirement, :all ]

# Activate observers that should always be running.
# config.active_record.observers = :cacher, :garbage_collector, :forum_observer

# Set Time.zone default to the specified zone and make Active Record auto-convert to this zone.
# Run "rake -D time" for a list of tasks for finding time zone names. Default is UTC.
# config.time_zone = 'Central Time (US & Canada)'

# The default locale is :en and all translations from config/locales/*.rb,yml are auto loaded.
# config.i18n.load_path += Dir[Rails.root.join('my', 'locales', '*.{rb,yml}').to_s]
# config.i18n.default_locale = :de
# Configure the default encoding used in templates for Ruby 1.9.
config.encoding = "utf-8"

# Configure sensitive parameters which will be filtered from the log file.
config.filter_parameters += [:password]

# Enable the asset pipeline
config.assets.enabled = true

# Version of your assets, change this if you want to expire all your assets
config.assets.version = '1.0'
 end
 end 
```

微博.rb...

```
class Micropost < ActiveRecord::Base
  attr_accessible :content
  belongs_to :user

  validates :user_id, presence: true
end 
```

在此先感谢您的帮助！

泰国

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-22T21:04:51.603

尝试添加

```
config.active_record.mass_assignment_sanitizer = :strict 
```

对于您的 application.rb 文件，我发现如果不严格，它只会抛出警告而不是异常。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-01T18:42:40.080

像您一样，我尝试了上述所有解决方案，但都没有运气。我还注意到，Hartl 为 Rails 4 编写的最新版本的书不包含这些测试，所以我怀疑这种测试可访问性的方法在以后的版本中不起作用。也许专家（没有通过 Rails 教程运行的人）可以插话。

但是....我在另一个 StackOverflow 线程中注意到这个响应，推荐使用“should-matchers”Gem 来测试它，这为我解决了这个问题（[https://stackoverflow.com/a/11876425/3899955](https://stackoverflow.com/a/11876425/3899955)）。在研究该 Gem 时，我发现它是一种为许多常见的 ActiveModel、ActiveRecord 和 ActionController 测试生成可读测试的好方法。我很高兴将它添加到我的箭袋中，也许你也会。

我不相信这个答案，只是想发布这个，以便如果其他人在第 10.5 章或完成第 9 章中的练习 6 时遇到这种挫败感。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-24T05:34:35.460

So `expected ActiveModel::MassAssignmentSecurity::Error but nothing was raised` when `Micropost.new(user_id: user.id)` is called.

For it to work correctly:

1.  The Rails application should be configured to explicitly whitelist or blacklist accessible parameters; in rails versions before `3.2.3` this was on by default; in previous versions, it has to be done by the following line in `config/application.rb` as detailed in [Listing 10.6 of RailsTutorial book](http://ruby.railstutorial.org/chapters/user-microposts#code-application_whitelist):

    `config.active_record.whitelist_attributes = true`

2.  There shouldn't be a `attr_accessible :user_id` in the `micropost.rb` model file.

# objective-c - class_getInstanceSize 是否有关于返回不正确大小的已知错误？

> ID：14016877
> 
> 赞同：1
> 
> 时间：2012-12-24T03:54:38.903
> 
> 标签：objective-c

阅读与我类似的其他问题，我发现大多数人都想知道为什么你需要知道实例的大小，所以我会继续告诉你，尽管这并不是问题的核心。我正在开发一个需要分配数千到数十万个非常小的对象的项目，而对象的默认分配模式根本无法解决。我已经通过创建一个对象池类来解决这个问题，它允许一次性分配和初始化大量对象；释放也可以完美地工作（对象返回到池中）。

它实际上工作得很好，不是我的问题，但我注意到`class_getInstanceSize`返回异常大的尺寸。例如，一个存储一个`size_t`和两个（包括`isA`）`Class`实例变量的类被报告为 40-52 字节大小。我给出了一个范围，因为`class_getInstanceSize`多次调用，即使是连续调用，也不能保证返回相同的大小。事实上，每个对象`NSObject`似乎都报告了与它们应有的大小相去甚远的随机大小。

作为测试，我尝试了：

```
printf("Instance Size: %zu\n", class_getInstanceSize(objc_getClass("MyClassName")); 
```

那行代码总是返回一个值，该值与我手动计算的正确大小相对应。例如，前面的例子是 12 字节（32 位）和 24 字节（64 位）。

考虑到运行时可能在幕后做一些需要更多内存的事情，我观察了每个对象的实际内存使用情况。对于给出的示例，唯一读取或写入的内存在我计算为预期大小的 12/24 字节块中。

`class_getInstanceSize`在 Apple 和 GNU 2.0 运行时都这样。那么是否存在`class_getInstanceSize`导致这种行为的已知错误，或者我是否在做一些根本错误的事情？在你责怪我的对象池之前；我在一个全新的项目中尝试了同样的测试，使用传统的`alloc`类方法和`class_createInstance(self, 0);`在自定义类方法中分配对象。

我之前忘记提到的两件事：我几乎完全在我自己的自定义类上对此进行了测试，所以我知道这个诡计不在于该类实际上是一个类集群或任何废话；其次，`class_getInstanceSize([MyClassName class])`很少`class_getInstanceSize(self) \\ Ran inside a class method`产生相同的结果，尽管两者都只是简单地引用`isA`. 同样，这发生在两个运行时。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T10:24:06.713

我想我已经解决了这个问题，这可能是有史以来最愚蠢的原因。

我使用的是旧的分析/调试库；事实上，我不知道它的实际名称（库是 libcs​​uomm；它的标头没有识别信息）。我所知道的只是它是 compsci 实验室的计算机上的一个图书馆（我在转学地质学专业之前做了一年的 Comp-Sci，毕业并且永不回头）。

无论如何，该库的重点在于它提供了许多分析和调试功能；我最常使用它的是内存泄漏检测，因为它实际上跟踪每个对象，这与我最喜欢的基于 C 的内存泄漏库（现在不受支持，MSS）不同，它不知道原始分配之外的对象。

因为我调试的时候用的太多了，所以总是想都没想就默认设置好了。因此，即使在创建我的测试项目以尝试查明错误时，我也没有考虑任何想法就设置了它。好吧，事实证明该库通过拉一些运行时技巧来工作，因此它可以正确跟踪对象。现在我禁用了它，事情似乎正常工作，所以我相信它是我问题的根源。

现在我对草率地得出关于它是一个错误的结论感到难过，但当时我在我自己的代码中看不到任何可能导致该问题的东西。

# ios - 加载照片库图像时发生错误：错误：FigCreateCGImageFromJPEG 返回 -12910。423114 字节。我们将退回到软件解码

> ID：14016879
> 
> 赞同：2
> 
> 时间：2012-12-24T03:54:48.240
> 
> 标签：ios, image, alassetslibrary, photolibrary

我正在使用从照片库加载图像的应用程序。

我正在使用以下代码将图像绑定到 imageView。

```
-(void)loadImage:(UIImageView *)imgView FileName:(NSString *)fileName
{
   typedef void (^ALAssetsLibraryAssetForURLResultBlock)(ALAsset *asset);
   typedef void (^ALAssetsLibraryAccessFailureBlock)(NSError *error);    

   ALAssetsLibraryAssetForURLResultBlock resultblock = ^(ALAsset *myasset)
   {
     ALAssetRepresentation *rep = [myasset defaultRepresentation];
     CGImageRef iref = [rep fullResolutionImage];
     UIImage *lImage;
     if (iref)
     {
        lImage = [UIImage imageWithCGImage:iref scale:[rep scale] orientation:(UIImageOrientation)[rep orientation]];   
     }
     else
     {
        lImage = [UIImage imageNamed:@"Nofile.png"];
     }
     dispatch_async(dispatch_get_main_queue(), ^{
         [imgView setImage:lImage];
     });
   };

   ALAssetsLibraryAccessFailureBlock failureblock  = ^(NSError *myerror)
   {
       UIImage *images = [UIImage imageNamed:@"Nofile.png"];
        dispatch_async(dispatch_get_main_queue(), ^{
             [imgView setImage:images];
     });        
   };                   

    NSURL *asseturl = [NSURL URLWithString:fileName];

    ALAssetsLibrary *asset = [[ALAssetsLibrary alloc] init];
    [asset assetForURL:asseturl
           resultBlock:resultblock
          failureBlock:failureblock];
} 
```

但是当我试图运行它时，一个错误来了，应用程序有时会崩溃。控制台上打印的错误是：

** *** 错误：FigCreateCGImageFromJPEG 返回 -12910。423114 字节。我们将回到软件解码。收到内存警告。** 我的照片库包含高分辨率图像，它们的大小在 10-30 MB 之间。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-27T14:02:22.757

最后我解决了这个问题。我认为问题在于获取全分辨率图像。

代替 ：

`CGImageRef iref = [rep fullResolutionImage];`

我用了：

```
CGImageRef iref = [myasset aspectRatioThumbnail]; 
```

一切正常。控制台没有错误，没有崩溃，但图像的质量/分辨率降低了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-27T14:35:29.450

我有一个类似的错误：

***** 错误：FigCreateCGImageFromJPEG 返回 -12909。0 字节。我们将回到软件解码。****

 **随叫随到的应用程序迷恋：

```
CGImageRef originalImage = [representation fullResolutionImage]; 
```

我通过替换来修复它：

```
CGImageRef originalImage = [representation fullScreenImage]; 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-04T10:19:13.647

```
[UIImage imageWithCGImage:] 
```

`imageWithCGImage`是一个堆栈内存函数，如果大图像似乎溢出。使用堆函数怎么样？

```
lImage = [[[UIImage alloc]initWithCGImage:iref scale:[rep scale] orientation:(UIImageOrientation)[rep orientation]] autorelease]; 
```**

# c - epoll 返回 0 个事件

> ID：14016882
> 
> 赞同：0
> 
> 时间：2012-12-24T03:55:16.070
> 
> 标签：c, linux

我有两个文件描述符，一个在管道上读取文件描述符，另一个是套接字连接描述符。它们都不是非阻塞的。它们都通过单个 EPOLLIN 事件添加到 epoll 上下文中。最后，我用 timeout = -1 调用 epoll_wait。下面是示例代码。我有两个问题：-

1.  管道和连接描述符是否需要是非阻塞的。这不是边沿触发的。如果是，这是良好做法还是强制性的，如果是强制性的，为什么？

2.  我将超时设置为 -1，但 epoll_wait 立即返回并返回值 0。为什么会这样？超时时间为 -1，epoll_wait 应该仅在有事件时返回。

    ```
    int total_fd_ready = -1;
    struct epoll_event pipe_event, connection_event, total_events[64];

    pipe_event.data.fd = pipe_fd[0];
    piple_event.events = EPOLLIN;
    connection_event.data.fd = conn_fd;
    connection_event.events = EPOLLIN;

    total_fd_ready = Epoll_wait(epoll_fd, total_events, 64, -1);
     printf("%d\n", total_fd_ready); 
    ```

    epoll_wait 定义为

    ```
    int Epoll_wait(int e_fd, struct epoll_event *events, int max_events, int timeout)
    {
    #ifdef DBG
            printf("Epoll_wait called on epoll_fd: %d with max_events: %d and timeout: %d\n", e_fd, max_events, timeout);
    #endif

    int result = -1;
    if(result = (epoll_wait(e_fd, events, max_events, timeout)) < 0)
            if(errno != EINTR)
                    err_sys("epoll_wait error with epoll fd: %d and timeout : %d\n", e_fd, timeout);
            #ifdef DBG
            else
                    printf("epoll_wait was interrupted\n");
            #endif
    return result;
    } 
    ```

更新：找到了问题，但我无法解释为什么结果设置为 0。我需要在以下 if 语句中使用括号

```
 if((result = (epoll_wait(e_fd, events, max_events, timeout))) < 0) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-24T04:11:45.680

答案是比较运算符的`<`优先级高于赋值，这意味着`result` 被赋值为表达式的结果`(epoll_wait(e_fd, events, max_events, timeout)) < 0`。

# opengl-es - 不能用单色绘制立方体

> ID：14016884
> 
> 赞同：0
> 
> 时间：2012-12-24T03:55:54.077
> 
> 标签：opengl-es, opengl-es-2.0

这是立方体的样子： ![在此处输入图像描述](../Images/2bfc88eddfd7037666019ec4e06f3d20.png)

在绘制立方体之前，我使用单一颜色来指定每个顶点，但立方体结果并不如我所愿。我已经启用并且在绘图之前`depth_color_test`也很清楚。`COLOR_BUFFER_BIT``DEPTH_BUFFER_BIT`

这是代码： [https ://github.com/ufo22940268/Android_RollingBall/blob/master/src/hongbosb/rollingball/model/GLEnvironmentEntity.java](https://github.com/ufo22940268/Android_RollingBall/blob/master/src/hongbosb/rollingball/model/GLEnvironmentEntity.java)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-24T03:59:24.193

这里的小数分隔符：

```
static public final float VERTEX_COLOR_ARRAY[] = {
    1.0f, **0,0f**, 0.0f, 1.0f,
    1.0f, **0,0f**, 0.0f, 1.0f,
    1.0f, **0,0f**, 0.0f, 1.0f,
    1.0f, **0,0f**, 0.0f, 1.0f,

    0.0f, **1,0f**, 0.0f, 1.0f,
    0.0f, **1,0f**, 0.0f, 1.0f,
    0.0f, **1,0f**, 0.0f, 1.0f,
    0.0f, **1,0f**, 0.0f, 1.0f,

    0.0f, **0,0f**, 1.0f, 1.0f,
    0.0f, **0,0f**, 1.0f, 1.0f,
    0.0f, **0,0f**, 1.0f, 1.0f,
    0.0f, **0,0f**, 1.0f, 1.0f,

    1.0f, **0,0f**, 0.0f, 1.0f,
    1.0f, **0,0f**, 0.0f, 1.0f,
    1.0f, **0,0f**, 0.0f, 1.0f,
    1.0f, **0,0f**, 0.0f, 1.0f,
};
```

应该是句点 ( `.`)，而不是逗号。现在，它们被视为单独的元素，并使您的索引失控。

# c++ - mgiza 编译错误

> ID：14016886
> 
> 赞同：1
> 
> 时间：2012-12-24T03:56:04.943
> 
> 标签：c++, boost, compiler-errors, giza++

我正在尝试在我的 Ubuntu 机器上安装最新版本的 mgiza++ (0.7.1)，但出现以下错误。我已经通过运行以下命令安装了 Boost：sudo apt-get install libboost-all-dev

运行后 ./configure

```
checking for a BSD-compatible install... /usr/bin/install -c
checking whether build environment is sane... yes
checking for a thread-safe mkdir -p... /bin/mkdir -p
checking for gawk... no
checking for mawk... mawk
checking whether make sets $(MAKE)... yes
checking whether to enable maintainer-specific portions of Makefiles... no
checking for style of include used by make... GNU
checking for gcc... gcc
checking whether the C compiler works... yes
checking for C compiler default output file name... a.out
checking for suffix of executables... 
checking whether we are cross compiling... no
checking for suffix of object files... o
checking whether we are using the GNU C compiler... yes
checking whether gcc accepts -g... yes
checking for gcc option to accept ISO C89... none needed
checking dependency style of gcc... gcc3
checking for library containing strerror... none required
checking for g++... g++
checking whether we are using the GNU C++ compiler... yes
checking whether g++ accepts -g... yes
checking dependency style of g++... gcc3
checking for gcc... (cached) gcc
checking whether we are using the GNU C compiler... (cached) yes
checking whether gcc accepts -g... (cached) yes
checking for gcc option to accept ISO C89... (cached) none needed
checking dependency style of gcc... (cached) gcc3
checking how to run the C preprocessor... gcc -E
checking for grep that handles long lines and -e... /bin/grep
checking for egrep... /bin/grep -E
checking for ANSI C header files... yes
checking for ranlib... ranlib
checking build system type... x86_64-unknown-linux-gnu
checking host system type... x86_64-unknown-linux-gnu
checking how to print strings... printf
checking for a sed that does not truncate output... /bin/sed
checking for fgrep... /bin/grep -F
checking for ld used by gcc... /usr/bin/ld
checking if the linker (/usr/bin/ld) is GNU ld... yes
checking for BSD- or MS-compatible name lister (nm)... /usr/bin/nm -B
checking the name lister (/usr/bin/nm -B) interface... BSD nm
checking whether ln -s works... yes
checking the maximum length of command line arguments... 1572864
checking whether the shell understands some XSI constructs... yes
checking whether the shell understands "+="... yes
checking how to convert x86_64-unknown-linux-gnu file names to x86_64-unknown-linux-gnu format... func_convert_file_noop
checking how to convert x86_64-unknown-linux-gnu file names to toolchain format... func_convert_file_noop
checking for /usr/bin/ld option to reload object files... -r
checking for objdump... objdump
checking how to recognize dependent libraries... pass_all
checking for dlltool... no
checking how to associate runtime and link libraries... printf %s\n
checking for ar... ar
checking for archiver @FILE support... @
checking for strip... strip
checking for ranlib... (cached) ranlib
checking command to parse /usr/bin/nm -B output from gcc object... ok
checking for sysroot... no
checking for mt... mt
checking if mt is a manifest tool... no
checking for sys/types.h... yes
checking for sys/stat.h... yes
checking for stdlib.h... yes
checking for string.h... yes
checking for memory.h... yes
checking for strings.h... yes
checking for inttypes.h... yes
checking for stdint.h... yes
checking for unistd.h... yes
checking for dlfcn.h... yes
checking for objdir... .libs
checking if gcc supports -fno-rtti -fno-exceptions... no
checking for gcc option to produce PIC... -fPIC -DPIC
checking if gcc PIC flag -fPIC -DPIC works... yes
checking if gcc static flag -static works... yes
checking if gcc supports -c -o file.o... yes
checking if gcc supports -c -o file.o... (cached) yes
checking whether the gcc linker (/usr/bin/ld -m elf_x86_64) supports shared libraries... yes
checking whether -lc should be explicitly linked in... no
checking dynamic linker characteristics... GNU/Linux ld.so
checking how to hardcode library paths into programs... immediate
checking whether stripping libraries is possible... yes
checking if libtool supports shared libraries... yes
checking whether to build shared libraries... yes
checking whether to build static libraries... yes
checking how to run the C++ preprocessor... g++ -E
checking for ld used by g++... /usr/bin/ld -m elf_x86_64
checking if the linker (/usr/bin/ld -m elf_x86_64) is GNU ld... yes
checking whether the g++ linker (/usr/bin/ld -m elf_x86_64) supports shared libraries... yes
checking for g++ option to produce PIC... -fPIC -DPIC
checking if g++ PIC flag -fPIC -DPIC works... yes
checking if g++ static flag -static works... yes
checking if g++ supports -c -o file.o... yes
checking if g++ supports -c -o file.o... (cached) yes
checking whether the g++ linker (/usr/bin/ld -m elf_x86_64) supports shared libraries... yes
checking dynamic linker characteristics... (cached) GNU/Linux ld.so
checking how to hardcode library paths into programs... immediate
configure: creating ./config.status
config.status: creating Makefile
config.status: creating src/Makefile
config.status: creating src/mkcls/Makefile
config.status: creating config.h
config.status: executing depfiles commands
config.status: executing libtool commands 
```

运行 make 后

```
...
/usr/include/c++/4.7/backward/backward_warning.h:33:2: warning: #warning This file includes at least one deprecated or antiquated header which may be removed without further notice at a future date. Please use a non-deprecated interface with equivalent functionality instead. For a listing of replacement headers and interfaces, consult the file backward_warning.h. To disable this warning use -Wno-deprecated. [-Wcpp]
In file included from StatVar.h:33:0,
                 from Problem.h:34,
                 from KategProblem.h:34,
                 from KategProblemTest.h:30,
                 from KategProblemTest.cpp:27:
myleda.h: In instantiation of ‘B& leda_h_array<A, B>::operator[](const A&) [with A = std::basic_string<char>; B = int]’:
KategProblemTest.cpp:96:18:   required from here
myleda.h:221:5: error: ‘insert’ was not declared in this scope, and no declarations were found by argument-dependent lookup at the point of instantiation [-fpermissive]
myleda.h:221:5: note: declarations in dependent base ‘__gnu_cxx::hash_map<std::basic_string<char>, int, my_hash<std::basic_string<char>, std::less<std::basic_string<char> > >, std::equal_to<std::basic_string<char> >, std::allocator<int> >’ are not found by unqualified lookup
myleda.h:221:5: note: use ‘this->insert’ instead
myleda.h: In instantiation of ‘B& leda_h_array<A, B>::operator[](const A&) [with A = std::pair<std::basic_string<char>, std::basic_string<char> >; B = int]’:
KategProblemTest.cpp:265:38:   required from here
myleda.h:221:5: error: ‘insert’ was not declared in this scope, and no declarations were found by argument-dependent lookup at the point of instantiation [-fpermissive]
myleda.h:221:5: note: declarations in dependent base ‘__gnu_cxx::hash_map<std::pair<std::basic_string<char>, std::basic_string<char> >, int, my_hash<std::pair<std::basic_string<char>, std::basic_string<char> >, std::less<std::pair<std::basic_string<char>, std::basic_string<char> > > >, std::equal_to<std::pair<std::basic_string<char>, std::basic_string<char> > >, std::allocator<int> >’ are not found by unqualified lookup
myleda.h:221:5: note: use ‘this->insert’ instead
make[3]: *** [mkcls-KategProblemTest.o] Error 1
make[3]: Leaving directory `/home/peter/Dropbox/senior_thesis/mgizapp/src/mkcls'
make[2]: *** [all-recursive] Error 1
make[2]: Leaving directory `/home/peter/Dropbox/senior_thesis/mgizapp/src'
make[1]: *** [all-recursive] Error 1
make[1]: Leaving directory `/home/peter/Dropbox/senior_thesis/mgizapp'
make: *** [all] Error 2 
```

我怀疑我没有在 Make 文件中正确链接 Boost 库。如果您有任何想法，请告诉我。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-25T08:09:08.007

我通过编辑 src/mkcls/myleada.h 的第 220 行解决了这个问题

起初：

```
insert(typename MY_HASH_BASE::value_type(a,init)); 
```

我将其更改为：

```
this->insert(typename MY_HASH_BASE::value_type(a,init)); 
```

# sql - sql Join条件中的动态列

> ID：14016887
> 
> 赞同：0
> 
> 时间：2012-12-24T03:56:07.930
> 
> 标签：sql, sql-server-2008, tsql, dynamic-sql

```
Customer

customer_id |   customer_name | customer_city | customer_number
---------------------------------------------------------------
   1        |   john          | sanjose       | 978234
   2        |   chris         | newyork       | 293
   3        |   mary          | madrid        | 342943
   4        |   tom           | bangkok       | 8627093
---------------------------------------------------------------

Data

data_id |   data_name  |    data_city   |   data_number |   data_cust_id |  customer_id
--------------------------------------------------------------------------------------------
   1    |   abc        |    xyz         |   990         |   1        |  NULL
   2    |   john       |    sanjose     |   978234      |   1        |  NULL
   3    |   mary       |    madrid      |   8627093     |   3        |  NULL
   4    |   tom        |    LA          |   7729        |   4        |  NULL

ActionType

action_id | action_description
-----------------------------------
1         | customer_name
2         | customer_number
3         | customer_city

DataToAction

id |    data_id | action_id
--------------------------
1  |    1       | 1
2  |    1       | 2
4  |    2       | 1
5  |    2       | 2
6  |    2       | 3
7  |    3       | 1
8  |    3       | 2
9  |    4       | 1 
```

有4张桌子 -

1.  客户 - 有客户数据
2.  数据 - 从外部来源提取的原始数据（有客户数据和其他数据）
3.  ActionType - 具有将在连接条件中使用的列名
4.  DataToAction - 对于数据表中的每个原始数据行，在此处指定要在联接中使用的列。

**目标**- 在“数据”表中填充 customer_id。我需要这样的东西

```
UPDATE D
SET D.customer_id = C.customer_id
FROM Data D
INNER JOIN Customer C on D.data_cust_id = C.customer_id
WHERE *("GET THE COLUMNS TO BE MATCHED FROM DATATOACTION TABLE AND USE HERE")* 
```

例如，对于数据 id 1，我将根据 customer_name 和 customer_number 更新 customer_id，对于数据 id 2，我将根据 customer_name、customer_number 和 customer_city 更新 customer_id，依此类推。

如何在 where 子句中为要匹配的列在不同表中指定的每一行应用动态列条件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-24T06:44:55.063

好吧，这个问题很不清楚。你能详细说明最终的结果吗？ActionType 表的用途？？

`UPDATE D`
`SET D.customer_id = C.customer_id`
`FROM Data D`
`INNER JOIN Customer C on D.data_cust_id = C.customer_id`
`INNER JOIN DataToAction DA ON DA.data_id = D.data_id`

# php - 使用 jquery 创建 php 会话

> ID：14016889
> 
> 赞同：1
> 
> 时间：2012-12-24T03:56:51.870
> 
> 标签：php, jquery

我希望使用 jquery 添加到 DOM 中`<ul>`，我想`<li>'s`在列表中添加更多内容，但只是为了与 php 进行会话。

例如

```
$lists = $_SESSION['names']
//which contains an array of all the 'names', and then I would run a loop:

echo "<ul>";
foreach($lists as $list) {
  echo "<li>$list</li>";
}
echo "</ul>"; 
```

因此，用户可以在此会话期间将这些变量添加到列表中。这将如何完成，jquery 如何能够像这样与 php 交互？什么方法最简单？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-24T04:08:15.437

您似乎误解了 PHP 的工作原理。

PHP 是一个服务器端脚本。这意味着它在服务器上运行，用户看不到它正在运行或代码出现在他身边。

jQuery 是一个 JavaScript 库。它是用户交互的客户端助手。

所以基本上没有办法直接从 HTML 文档运行 PHP

但间接存在AJAX。

AJAX 允许您在不重新加载页面的情况下访问页面（基本上是运行 PHP 脚本）。

[http://api.jquery.com/jQuery.ajax/](http://api.jquery.com/jQuery.ajax/)

例子

```
$.ajax({
 type: "POST",
 url: "some.php",
 data: { list: jQueryVariableList
  }).done(function( msg ) {
      alert( "Data Saved: " + msg );
}); 
```

现在在 PHP 端，您可以使用`$_POST['jQueryVariableList']`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-24T09:05:50.807

看看这个：

**在 JavaScript 中：**

```
jQuery('#div_session_write').load('session_write.php?session_name=new_value'); 
```

**在 session_write.php 文件中：**

```
<?
session_start();

if (isset($_GET['session_name'])) {$_SESSION['session_name'] = $_GET['session_name'];}
?> 
```

**在 html 中：**

```
<div id='div_session_write'> </div> 
```

# android - SqlLite Query() 参数的使用

> ID：14016890
> 
> 赞同：0
> 
> 时间：2012-12-24T03:56:53.583
> 
> 标签：android, sqlite

```
SQLiteDatabase db = this.getReadableDatabase();
Cursor mCursor =db.query(TABLE_ACCOUNTS, new String[]{a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s}, null,null, null, null, null); 
```

我的问题是：这个初始化是否允许返回 db 数据库和表中的所有值？

就我的项目而言，它似乎只返回 NULL 值。（无错误）a = null，b = null，c = null

当我用 a+"=?" 操作第三个参数时检测到一些实际值 和变体（现在为空）。

或者防止实际值是别的什么？（假设将数据添加到数据库有效）

（添加代码）

```
public void addAccount() {
        SQLiteDatabase db = this.getWritableDatabase();
     Account account = new Account();
        ContentValues values = new ContentValues();
        values.put(id, account.getA()); // Contact Name
        values.put(a, account.getA()); // Contact Phone Number
        values.put(b, account.getB()); // Contact Phone Number
        values.put(c, account.getC());
...

        db.insert(TABLE_ACCOUNTS, null, values);
        db.close(); // Closing database connection

    } 
```

（光标代码）

```
 if ( (mCursor != null && mCursor.moveToFirst()) ) {

            do {
                stringResult1 = 
                        "a: "+ mCursor.getString(0)+ "\n"
                     + "b: " + mCursor.getString(1) + "\n"
                     + "c: " + mCursor.getString(2) + "\n"
                     + "d: " + mCursor.getString(3) + "\n"
                     + "e: " + mCursor.getString(4) + "\n"
                     + "f: " + mCursor.getString(5) + "\n"
                     + "g: " + mCursor.getString(6) + "\n"
                     + "h: " + mCursor.getString(7) + "\n"
                     + "i " + mCursor.getString(8) + "\n"
                     + "j: " + mCursor.getString(9) + "\n"
                     + "k: " + mCursor.getString(10) + "\n"
                     + "l: " + mCursor.getString(11) + "\n"
                     + "m: " + mCursor.getString(12) + "\n"
                     + "n: " + mCursor.getString(13) + "\n"
                     + "o: " + mCursor.getString(14) + "\n"
                     + "p: " + mCursor.getString(15) + "\n"
                     + "q: " + mCursor.getString(16) + "\n"
                     + "r: " + mCursor.getString(17) + "\n"
                     + "s: " + mCursor.getString(18) + "\n";
            } while (mCursor.moveToNext());

        // make sure to close the cursor
        mCursor.close();
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-24T04:48:24.043

```
Cursor mCursor =db.query(TABLE_ACCOUNTS, new String[]{a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s}, null,null, null, null, null); 
```

关于上述查询.. 第二个参数，即字符串数组是投影参数，表示您要从 db 中获取的列并将其填充到光标中。

因为如果在查询中 a,b,c,d,e... 变量的值可能与 db 中的列的值不同，因此游标中不存在所请求列的值。

希望有帮助！谢谢

# android - 安卓手机操作系统兼容性

> ID：14016891
> 
> 赞同：2
> 
> 时间：2012-12-24T03:57:05.710
> 
> 标签：android, rom

我正在尝试创建 Android 模组并且我有一个旧的 HTC Magic (Froyo)。是否可以将 4.0 加载到这个旧设备中？如果不是，我必须考虑哪些硬件需求？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T04:17:02.443

这是官方兼容性文档，其中详细介绍了运行 ICS 的所有必备和必备功能。对此进行深入研究应该可以帮助您找到所需的一切。

[http://static.googleusercontent.com/external_content/untrusted_dlcp/source.android.com/en//compatibility/4.0/android-4.0-cdd.pdf](http://static.googleusercontent.com/external_content/untrusted_dlcp/source.android.com/en//compatibility/4.0/android-4.0-cdd.pdf)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-08T14:37:05.667

如果有人来寻找这个问题，Jelly Bean 的一个是[http://static.googleusercontent.com/external_content/untrusted_dlcp/source.android.com/en/us/compatibility/4.1/android-4.1-cdd。 pdf](http://static.googleusercontent.com/external_content/untrusted_dlcp/source.android.com/en/us/compatibility/4.1/android-4.1-cdd.pdf)

# c# - 向 WPF 添加表单看起来很糟糕

> ID：14016892
> 
> 赞同：1
> 
> 时间：2012-12-24T03:57:11.103
> 
> 标签：c#, wpf, winforms, forms, button

我已将表单作为设置对话框添加到 WPF 项目中。我将文本框设置为 3d 边框，将按钮设置为标准外观。这是我的结果。

![在此处输入图像描述](../Images/041c542d7b417b0416efb4ba42b5b369.png)

WPF中的表单呈现这样的原因是否有原因？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-24T07:36:20.910

打开项目的**App.xaml.cs**并覆盖**App**类的**OnStartup**方法。所以你的**App**类应该是这样的：

 ****```
public partial class App : Application
{
    protected override void OnStartup(StartupEventArgs e)
    {
        base.OnStartup(e);
        System.Windows.Forms.Application.EnableVisualStyles();
    }
} 
```

这应该使您的**表单**在您的 WPF 应用程序中看起来更好。****

# javascript - 按钮元素事件

> ID：14016893
> 
> 赞同：1
> 
> 时间：2012-12-24T03:57:45.580
> 
> 标签：javascript, jquery

我有以下代码：

HTML

```
<div id="pressed">I'm shown when button pressed</div>
<div id="relaxed">I'm shown when button relaxed</div>
<button>press_me</button> 
```

CSS

```
#pressed {
 display: none;   
}​

JS

$('button').mousedown(function() {
    $('#pressed').show();
    $('#relaxed').hide();
});

$('button').bind('mouseup ',function() {
    $('#pressed').hide();
    $('#relaxed').show();
}); 
```

​ 当我按下并按住鼠标按钮并将鼠标移出按钮元素时，放松按钮第二个处理程序不会触发，因此`#pressed`div 仍然处于活动状态并且`#relaxed`不是，我可以设置`mouseout`事件，但在这种情况下，按钮元素将看起来像被按下。但是放松的事件已经被解雇了。

我应该设置哪个事件处理程序来实现预期的行为？ [小提琴](http://jsfiddle.net/pn47K/3/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T04:15:20.777

我最好的选择是使用全局变量或附加到该 dom 的变量，并将 mousedown 事件附加到文档而不是按钮上。

```
var btn_mousedown = false;
$('button').mousedown(function() {
    $('#pressed').show();
    $('#relaxed').hide();
    btn_mousedown = true;
});

/* When I push mouse down and move out of button, than relax button
I do not get that event triggered, how to fix ? 
*/
$(document).bind('mouseup ', function() {
    if (btn_mousedown == true) {
        $('#pressed').hide();
        $('#relaxed').show();
        btn_mousedown = false;
    }
});​ 
```

小提琴 - [http://jsfiddle.net/atif089/pn47K/8/](http://jsfiddle.net/atif089/pn47K/8/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-24T04:06:13.363

问题可能是因为按钮，它总是看起来像它被按下，因为鼠标按钮仍然处于保持状态，无论鼠标指针是否在按钮顶部。也许这可以通过自定义样式的按钮来完成。

JS：

```
$('#im-a-button').mousedown(function() {
   $('#pressed').show();
   $('#relaxed').hide();
});

$('#im-a-button').mouseup(function() {
   $('#pressed').hide();
   $('#relaxed').show();
});

$('#im-a-button').mouseout(function(){
   $('#pressed').hide();
   $('#relaxed').show();
}); 
```

标记：

```
<div id="pressed">I'm shown when button pressed</div>
<div id="relaxed">I'm shown when button relaxed</div>
<p id="im-a-button">Press Me</p> 
```

CSS：

```
#pressed {
 display: none;   
}

#im-a-button {
  color: blue;    
  cursor: pointer;   
}

#im-a-button:hover {
  color: red;       
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-24T04:19:28.067

用这个 JS 试试这个：

```
var delm = document.documentElement ? document.documentElement : document.body; 
```

[jsFiddle](http://jsfiddle.net/vusan/pn47K/10/)

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-12-24T04:13:13.490

添加`mouseleave`

```
$('button').bind('mouseup mouseleave',function() {
    $('#pressed').hide();
    $('#relaxed').show();
}); 
```

演示：http: [//jsfiddle.net/pn47K/6/](http://jsfiddle.net/pn47K/6/)

# mysql - mysql：检查日期范围

> ID：14016897
> 
> 赞同：2
> 
> 时间：2012-12-24T03:58:26.150
> 
> 标签：mysql, sql

我们有像这样的表结构

```
id | startDay | startMonth | startYear | endDay | endMonth | endYear    
1  | 22       | 12         | 2012      | 25     | 1        | 2013 
```

现在我们有了另一个日期范围，例如 startDate,startMonth, startYear 即**25|12|2012**和 endDay,endMonth,endYear 即**10|1|2013**。

我希望查询从表中提供的日期范围存在的表中获取记录。在这种情况下意味着首先记录。
如何为此编写查询？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-24T04:02:05.970

放弃这种结构，并使用本机日期字段：

```
id start_date  end_date
1  2012-12-22  2013-1-25 
```

然后你可以使用本地 mysql 日期/时间函数和比较，例如

```
SELECT id WHERE yourdate BETWEEN start_date AND end_date 
```

而不必使用丑陋的多级比较来正确比较这些碎片值：

```
SELECT id where YEAR(yourdate) < startYear OR (YEAR(yourdate) > startYear AND MONTH(yourdate) < startMOnth) etc... etc....etc.. 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-24T04:08:50.983

首先，**[听听@MarcB](https://stackoverflow.com/users/118068/marc-b)**[的建议](https://stackoverflow.com/a/14016918/491243)。但是，如果您没有时间更改您的表，或者，您也可以使用以下查询。

```
SELECT *
FROM tableName
WHERE ('2012-12-25' BETWEEN DATE(CONCAT_WS('-', startYear, startMonth, startDay)) AND
                  DATE(CONCAT_WS('-', endYear, endMonth, endDay))) AND
      ('2013-01-10' BETWEEN DATE(CONCAT_WS('-', startYear, startMonth, startDay)) AND
                  DATE(CONCAT_WS('-', endYear, endMonth, endDay))) 
```

*   [SQLFiddle 演示链接](http://sqlfiddle.com/#!2/4f3a2/4)

# python - Port MATLAB bounding ellipsoid code to Python

> ID：14016898
> 
> 赞同：17
> 
> 时间：2012-12-24T03:58:45.310
> 
> 标签：python, matlab, porting, linear-programming, bounding-box

MATLAB code exists to find the so-called "minimum volume enclosing ellipsoid" (e.g. [here](https://stackoverflow.com/a/1768440/1205799), also [here](http://www.mathworks.com/matlabcentral/fileexchange/9542-minimum-volume-enclosing-ellipsoid/content/MinVolEllipse.m)). I'll paste the relevant part for convenience:

```
function [A , c] = MinVolEllipse(P, tolerance)
[d N] = size(P);

Q = zeros(d+1,N);
Q(1:d,:) = P(1:d,1:N);
Q(d+1,:) = ones(1,N);

count = 1;
err = 1;
u = (1/N) * ones(N,1);

while err > tolerance,
    X = Q * diag(u) * Q';
    M = diag(Q' * inv(X) * Q);
    [maximum j] = max(M);
    step_size = (maximum - d -1)/((d+1)*(maximum-1));
    new_u = (1 - step_size)*u ;
    new_u(j) = new_u(j) + step_size;
    count = count + 1;
    err = norm(new_u - u);
    u = new_u;
end

U = diag(u);
A = (1/d) * inv(P * U * P' - (P * u)*(P*u)' );
c = P * u; 
```

Here is some MATLAB test code:

```
points  = [[ 0.53135758, -0.25818091, -0.32382715], 
    [ 0.58368177, -0.3286576,  -0.23854156,], 
    [ 0.18741533,  0.03066228, -0.94294771], 
    [ 0.65685862, -0.09220681, -0.60347573],
    [ 0.63137604, -0.22978685, -0.27479238],
    [ 0.59683195, -0.15111101, -0.40536606],
    [ 0.68646128,  0.0046802,  -0.68407367],
    [ 0.62311759,  0.0101013,  -0.75863324]];

[A centroid] = minVolEllipse(points',0.001);
A
[~, D, V] = svd(A);

rx = 1/sqrt(D(1,1));
ry = 1/sqrt(D(2,2));
rz = 1/sqrt(D(3,3));

[u v] = meshgrid(linspace(0,2*pi,20),linspace(-pi/2,pi/2,10));

x = rx*cos(u').*cos(v');
y = ry*sin(u').*cos(v');
z = rz*sin(v');

for idx = 1:20,
    for idy = 1:10,
        point = [x(idx,idy) y(idx,idy) z(idx,idy)]';
        P = V * point;
        x(idx,idy) = P(1)+centroid(1);
        y(idx,idy) = P(2)+centroid(2);
        z(idx,idy) = P(3)+centroid(3);
    end
end

figure
plot3(points(:,1),points(:,2),points(:,3),'.');
hold on;
mesh(x,y,z);
axis square;
alpha 0; 
```

which will produce the the covariance matrix:

```
A =
  47.3693 -116.0758  -79.1861
-116.0758  458.0874  280.0656
 -79.1861  280.0656  179.3886 
```

![MATLAB ellipsoid](../Images/e2a3f1e3903d15bf050420a2a2a75454.png)

Now, here is my attempt at port this code to Python (2.7):

```
from __future__ import division
import numpy as np
import numpy.linalg as la

def mvee(points,tol=0.001):
    N, d = points.shape

    Q = np.zeros([N,d+1])
    Q[:,0:d] = points[0:N,0:d]  
    Q[:,d] = np.ones([1,N])

    Q = np.transpose(Q)
    points = np.transpose(points)
    count = 1
    err = 1
    u = (1/N) * np.ones(shape = (N,))

    while err > tol:

        X = np.dot(np.dot(Q, np.diag(u)), np.transpose(Q))
        M = np.diag( np.dot(np.dot(np.transpose(Q), la.inv(X)),Q)) 
        jdx = np.argmax(M)
        step_size = (M[jdx] - d - 1)/((d+1)*(M[jdx] - 1))
        new_u = (1 - step_size)*u 
        new_u[jdx] = new_u[jdx] + step_size
        count = count + 1
        err = la.norm(new_u - u)       
        u = new_u

    U = np.diag(u)    
    c = np.dot(points,u)
    A = (1/d) * la.inv(np.dot(np.dot(points,U), np.transpose(points)) - np.dot(c,np.transpose(c)) )    
    return A, np.transpose(c) 
```

The corresponding test code:

```
from mpl_toolkits.mplot3d import Axes3D
from mpl_toolkits.mplot3d.art3d import Poly3DCollection
import matplotlib.pyplot as plt
from scipy.spatial import Delaunay

#some random points
points = np.array([[ 0.53135758, -0.25818091, -0.32382715], 
[ 0.58368177, -0.3286576,  -0.23854156,], 
[ 0.18741533,  0.03066228, -0.94294771], 
[ 0.65685862, -0.09220681, -0.60347573],
[ 0.63137604, -0.22978685, -0.27479238],
[ 0.59683195, -0.15111101, -0.40536606],
[ 0.68646128,  0.0046802,  -0.68407367],
[ 0.62311759,  0.0101013,  -0.75863324]])

# compute mvee
A, centroid = mvee(points)
print A

# point it and some other stuff
U, D, V = la.svd(A)    

rx, ry, rz = [1/np.sqrt(d) for d in D]
u, v = np.mgrid[0:2*np.pi:20j,-np.pi/2:np.pi/2:10j]    

x=rx*np.cos(u)*np.cos(v)
y=ry*np.sin(u)*np.cos(v)
z=rz*np.sin(v)

for idx in xrange(x.shape[0]):
    for idy in xrange(y.shape[1]):
        x[idx,idy],y[idx,idy],z[idx,idy] = np.dot(np.transpose(V),np.array([x[idx,idy],y[idx,idy],z[idx,idy]])) + centroid

fig = plt.figure()
ax = fig.add_subplot(111, projection='3d')
ax.scatter(points[:,0],points[:,1],points[:,2])    
ax.plot_surface(x, y, z, cstride = 1, rstride = 1, alpha = 0.1)
plt.show() 
```

produces this:

```
[[ 0.84650504 -1.40006147  0.39857055]
[-1.40006147  2.60678264 -1.52583781]
[ 0.39857055 -1.52583781  1.04581752]] 
```

![enter image description here](../Images/3e6f458954bd0b1741b4fc4a8ab83c3b.png)

Clearly different. What gives?

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-12-24T19:42:40.040

使用 Octave，我发现在 MinVolEllipse 中的 while 循环结束后，

```
u =

   0.0053531
   0.2384227
   0.2476188
   0.0367063
   0.0257947
   0.2124423
   0.0838103
   0.1498518 
```

`u`这与Python 函数找到的结果一致`mvee`。更多关于 Octave 端产量的调试打印语句

```
(P*u) = 

   0.50651
  -0.11166
  -0.57847 
```

和

```
(P*u)*(P*u)' =

   0.256555  -0.056556  -0.293002
  -0.056556   0.012467   0.064590
  -0.293002   0.064590   0.334628 
```

但在 Python 方面，

```
c = np.dot(points.T,u)
print(c) 
```

产量

```
[ 0.50651212 -0.11165724 -0.57847018] 
```

和

```
print(np.dot(c,np.transpose(c))) 
```

产量

```
0.60364961984    # <-- This should equal (P*u)*(P*u)', a 3x3 matrix. 
```

知道问题后，解决方案就很简单了。`(P*u)*(P*u)'`可以计算：

```
np.multiply.outer(c,c) 
```

* * *

```
import numpy as np
import numpy.linalg as la
import matplotlib.pyplot as plt
from mpl_toolkits.mplot3d import Axes3D

pi = np.pi
sin = np.sin
cos = np.cos

def mvee(points, tol = 0.001):
    """
    Finds the ellipse equation in "center form"
    (x-c).T * A * (x-c) = 1
    """
    N, d = points.shape
    Q = np.column_stack((points, np.ones(N))).T
    err = tol+1.0
    u = np.ones(N)/N
    while err > tol:
        # assert u.sum() == 1 # invariant
        X = np.dot(np.dot(Q, np.diag(u)), Q.T)
        M = np.diag(np.dot(np.dot(Q.T, la.inv(X)), Q))
        jdx = np.argmax(M)
        step_size = (M[jdx]-d-1.0)/((d+1)*(M[jdx]-1.0))
        new_u = (1-step_size)*u
        new_u[jdx] += step_size
        err = la.norm(new_u-u)
        u = new_u
    c = np.dot(u,points)        
    A = la.inv(np.dot(np.dot(points.T, np.diag(u)), points)
               - np.multiply.outer(c,c))/d
    return A, c

#some random points
points = np.array([[ 0.53135758, -0.25818091, -0.32382715], 
                   [ 0.58368177, -0.3286576,  -0.23854156,], 
                   [ 0.18741533,  0.03066228, -0.94294771], 
                   [ 0.65685862, -0.09220681, -0.60347573],
                   [ 0.63137604, -0.22978685, -0.27479238],
                   [ 0.59683195, -0.15111101, -0.40536606],
                   [ 0.68646128,  0.0046802,  -0.68407367],
                   [ 0.62311759,  0.0101013,  -0.75863324]])

# Singular matrix error!
# points = np.eye(3)

A, centroid = mvee(points)    
U, D, V = la.svd(A)    
rx, ry, rz = 1./np.sqrt(D)
u, v = np.mgrid[0:2*pi:20j, -pi/2:pi/2:10j]

def ellipse(u,v):
    x = rx*cos(u)*cos(v)
    y = ry*sin(u)*cos(v)
    z = rz*sin(v)
    return x,y,z

E = np.dstack(ellipse(u,v))
E = np.dot(E,V) + centroid
x, y, z = np.rollaxis(E, axis = -1)

fig = plt.figure()
ax = fig.add_subplot(111, projection='3d')

ax.plot_surface(x, y, z, cstride = 1, rstride = 1, alpha = 0.05)
ax.scatter(points[:,0],points[:,1],points[:,2])

plt.show() 
```

![在此处输入图像描述](../Images/14ec93265684c8021864690977126219.png)

* * *

顺便说一句，这种计算使用了大量的矩阵乘法，使用时`np.dot`看起来相当冗长。如果我们将 NumPy 数组转换为 NumPy 矩阵，则矩阵乘法可以用 表示`*`。例如，

```
A = la.inv(np.dot(np.dot(points.T, np.diag(u)), points)
           - np.dot(c[:, np.newaxis], c[np.newaxis, :]))/d 
```

变成

```
A = la.inv(points.T*np.diag(u)*points - c.T*c)/d 
```

由于可读性很重要，您可能希望使用 NumPy 矩阵进行主要计算：

```
def mvee(points, tol = 0.001):
    """
    Find the minimum volume ellipse.
    Return A, c where the equation for the ellipse given in "center form" is
    (x-c).T * A * (x-c) = 1
    """
    points = np.asmatrix(points)
    N, d = points.shape
    Q = np.column_stack((points, np.ones(N))).T
    err = tol+1.0
    u = np.ones(N)/N
    while err > tol:
        # assert u.sum() == 1 # invariant
        X = Q * np.diag(u) * Q.T
        M = np.diag(Q.T * la.inv(X) * Q)
        jdx = np.argmax(M)
        step_size = (M[jdx]-d-1.0)/((d+1)*(M[jdx]-1.0))
        new_u = (1-step_size)*u
        new_u[jdx] += step_size
        err = la.norm(new_u-u)
        u = new_u
    c = u*points
    A = la.inv(points.T*np.diag(u)*points - c.T*c)/d    
    return np.asarray(A), np.squeeze(np.asarray(c)) 
```

# c# - string manipulation using Directory.GetFiles()

> ID：14016907
> 
> 赞同：0
> 
> 时间：2012-12-24T04:00:24.053
> 
> 标签：c#, string

i am assigning `images[]` with an array that holds images file names with full path of given Directory.

```
string[] images = DirLoad.FileNamesArray(
                                          IO.Loaders.PathType.full, 
                                          IO.Loaders.FileExtension.jpg
                                        ); 
```

...now, that `images[]` stores all the file names i need, as I had to use the **full path** to get it done,

using `Directory.GetFiles()`

Next action requires it as a **local file name**.

(each is then passed as string type parameter to another method)

so my question is :

**How can i omit first part - `HttpRuntime.AppDomainAppPath` ...if it's same in every element of array ?**

this is usage example, the string is `currentDir` i need to trim from each element in `images[]`

```
 public class IO
    {
        public class Loaders
        {
            readonly string currentDir = HttpRuntime.AppDomainAppPath;

            public string selecedDirName { get; set; }
            /// <summary>
            /// assign The Loaders.selectedDir First before calling
            /// </summary>
            /// <param name="foldertoLoad"></param>
            /// <returns></returns>
            public enum PathType
            {
                full, local
            }
            public enum FileExtension
            {
                jpg,png,txt,xml,htm,js,aspx,css
            }
            public string[] FileNamesArray(PathType SelectedPathMode, FileExtension selectedfileType)
            {
                string thisFolder = "";
                string thatFileType= string.Format("*.{0}",selectedfileType.ToString());
                switch (SelectedPathMode)
                {
                    case PathType.full:
                        thisFolder = Path.Combine(currentDir, selecedDirName);
                        break;
                    case PathType.local:
                        thisFolder = selecedDirName;
                        break;
                    default:
                        break;
                }

                string[] foundArr = Directory.GetFiles(thisFolder, thatFileType);
                return foundArr;
            }
        }

    } 
```

Update , this is what i've tried

```
string fileName;
string[] images = DirLoad.FilesArray(IO.Loaders.PathType.full, IO.Loaders.FileExtention.jpg);
        foreach (var currImage in images)
        {
              int startingAt = DirLoad.currentDir.Length ;
              int finalPoint = currImage.Length - startingAt;
              fileName = new String(currImage.ToCharArray(startingAt, finalPoint));
              baseStyle.Add(string.Format("{0}url({1}) {2}", BackGroundCssProp, fileName, imageProps));
        }

        return baseStyle.ToArray(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T06:13:05.717

我仍然无法理解，您从头到尾都在尝试完成什么，但是..如果您有一组完整路径并且您只需要从这些路径中获取文件名，您可以执行以下操作：

实际上`files`可能包含随机的、绝对不同的路径，但根据我从问题中得到的信息，它是：

```
var files = Directory.GetFiles(@"path"); 
```

然后，您可以使用[Path.GetFileName 方法](http://msdn.microsoft.com/en-us/library/system.io.path.getfilename.aspx)通过简单的[Enumerable.Select](http://msdn.microsoft.com/en-us/library/bb548891.aspx) LINQ 语句从这些路径中仅检索文件名：

```
var fileNamesOnly = files.Select(f => Path.GetFileName(f)); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-24T04:47:26.450

我不完全确定你到底需要什么。对于你的句子：

> 字符串是 currentDir 我需要从 images[] 中的每个元素中修剪

您可以使用 LINQ 尝试以下操作：

```
string currDir = "SomeString";
string[] images = new string[] { "SomeStringabc1.jpg", "SomeStringabc2.jpg", "SomeStringabc3.jpg", "abc.jpg" };
string[] newImages = images.Select(r => r.StartsWith(currDir) 
                                                ? r.Replace(currDir, "") : r)
                            .ToArray(); 
```

或使用[string.TrimStart](http://msdn.microsoft.com/en-us/library/system.string.trimstart.aspx)

```
string[] newImages = images.Select(r => r.TrimStart(currDir.ToCharArray())).ToArray(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-24T06:01:20.547

对不起，但我不清楚......如果你只想要整个路径中的文件名，那么你可以简单地使用 Split ，用特殊字符分割整个路径并使用最后一个数组元素。

一旦您获得“图像”数组中的所有路径，您可以尝试下面的代码。

例如：-

```
 for(i=0;i<images.length;i++)
    {
     string [] cuttofilename=images[i].split('\');
     string filename=cuttofilename[cuttofilename.lentgh-1];
    } 
```

# html - Tweet button iframe size 107px

> ID：14016908
> 
> 赞同：0
> 
> 时间：2012-12-24T04:00:24.607
> 
> 标签：html, iframe, twitter, share

I'm trying to get the tweet button from twitter to work but the iframe generated by the code always gives me a width of 107px by default... I'd like the size of the iframe to change according to the button real size... I can change that via css but giving it a width size of auto doesnt work...

thank you guys

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T20:26:03.670

您可以在一定程度上控制 iFrame 中 Twitter 按钮的呈现。您可以在调用中添加一个`size`属性，它会为您提供几个可供选择的尺寸版本。

例如：

```
<iframe allowtransparency="true" frameborder="0" scrolling="no"
        src="https://platform.twitter.com/widgets/tweet_button.html?size=medium"
        style="width:130px; height:20px;"></iframe> 
```

尺寸为中*号、大号*

如需完整参考，请参阅[Tweet Button 文档](https://dev.twitter.com/docs/tweet-button)

另外，因为它的[记录很差](https://dev.twitter.com/discussions/5415)。有关向推文按钮的 iFrame 版本添加参数的帮助，请参阅Twitter 开发人员倡导者的[此注释](https://groups.google.com/d/msg/twitter-development-talk/gr5XkY3dqYs/v0iLNLUusw4J)。

同样，看这里[如何更改 Twitter 的分享按钮高度？](https://stackoverflow.com/questions/8121119/how-can-i-change-twitters-share-button-height)

# c# - AuthorizationContext.Principal 自动从 ClaimsPrincipal 更改为 GenericPrincipal

> ID：14016915
> 
> 赞同：0
> 
> 时间：2012-12-24T04:01:23.607
> 
> 标签：c#, .net, .net-4.5, claims-based-identity

我不知道 AuthorisationManager 中的上下文原则是如何变化的。我的代码就像

```
 public class AuthorisationManager : ClaimsAuthorizationManager
{
    public override bool CheckAccess(AuthorizationContext context)
    {
        var resource = context.Resource.First().Value;
        var action = context.Action.First().Value;
        return context.Principal.HasClaim(resource, action);
    }
    public override void LoadCustomConfiguration(System.Xml.XmlNodeList nodelist)
    {
        base.LoadCustomConfiguration(nodelist);
    }
} 
```

我在 GUI 中有项目列表。它第一次运行良好，但是当我选择第二项时，context.Principle 被更改为 GenericPrinciple。

任何想法都会对此有所帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T10:12:37.383

好的 - WPF。

是的，我隐约记得 WPF 中围绕 Thread.CurrentPrincipal 有一些“功能”。

尝试

Thread.CurrentPrincipal = 主体

AppDomain.CurrentDomain.SetThreadPrincipal(principal);

IIRC，您可能必须在 App 类（ctor？）中这样做。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-27T11:59:19.077

“返回 context.Principal.HasClaim(resource, action);”

好吧-通常没有索赔和授权“决定”的1：1关联。同样在典型的场景中，声明只保存身份数据 - 稍后可以使用某些数据来作为授权决策的基础。然后授权管理器使用它自己的数据管理来做出这些决定。

现在，由于这是一个客户端应用程序（我不知道它是 WPF），您可能会做一些不同的事情。在服务器应用程序中，您的方法可以很好地扩展。

# c++ - C ++中最小堆的比较器

> ID：14016921
> 
> 赞同：25
> 
> 时间：2012-12-24T04:02:39.360
> 
> 标签：c++, stl, heap, comparator, min-heap

我正在尝试使用 STL 等在 C++ 中创建 s的最小堆¹，但我的比较器似乎没有正确比较。以下是我目前的比较器：`long``make_heap`

```
struct greater1{
    bool operator()(const long& a,const long& b) const{
        return a>b;
    }
}; 
```

但是，当我执行`std::pop_heap(humble.begin(),humble.end(),g);`where `g`is an instance `greater1`and `humble`is a heap who make `[9,15,15,25]`when `sort_heap`is called 时，我会`15`弹出一个。

我的比较器正确吗？可能出了什么问题？

编辑：
我意识到我正在运行没有比较器的 sort_heap，而当我运行这个比较器时，我`[15,15,9,25]`从`sort_heap`. 现在我在想我的比较器肯定不起作用，但不确定为什么。

¹ STL 默认创建一个最大堆，所以我需要一个比较器。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-12-24T04:28:15.777

也许您在某处遗漏了一些东西，下面的代码按预期工作：

```
#include <vector>
#include <algorithm>
#include <iostream>

struct greater1{
  bool operator()(const long& a,const long& b) const{
    return a>b;
  }
};

int main() {
  std::vector<long> humble;
  humble.push_back(15);
  humble.push_back(15);
  humble.push_back(9);
  humble.push_back(25);

  std::make_heap(humble.begin(), humble.end(), greater1());
  while (humble.size()) {
    std::pop_heap(humble.begin(),humble.end(),greater1());
    long min = humble.back();
    humble.pop_back();  
    std::cout << min << std::endl;
  }

  return 0;
} 
```

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2013-07-25T07:39:08.507

只需使用 `greater<int>()`. 它是在标准中预定义的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-07-31T23:25:35.190

您想再次在向量上调用*make_heap ，而不是**sort_heap*。鉴于大于比较器，*make_heap会将您的整个向量重新排列到最小堆中，而**sort_heap*将您的元素按升序排序，并且根本不再是堆！

```
#include <algorithm>
#include <iostream>
#include <vector>

struct greater1{
    bool operator()(const long& a,const long& b) const{
        return a>b;
    }
};

int main()
{
  unsigned int myints[] = {10,20,30,5,15};
  vector<unsigned int> v(myints, myints+5);

  //creates max heap
  std::make_heap(v.begin(). v.end()); // 30 20 10 5 15

  //converts to min heap
  std::make_heap(v.begin(). v.end(), greater1()); // 5 15 10 20 30

  unsigned int s =  v.size();

  //ALSO NEED TO PASS greater1() to pop()!!!
  for(unsigned int i = 0; i < s; i++)
    std::pop_heap(v.begin(). v.end(), greater1()); // popping order: 5 10 15 20 30

  return 0;
} 
```

# vim - 我的视图的文件名是什么？

> ID：14016924
> 
> 赞同：0
> 
> 时间：2012-12-24T04:04:04.967
> 
> 标签：vim, view

我在用：

```
 au BufWinLeave ?* mkview 1
au BufWinLeave ?* silent loadview 1 
```

这可以保存我的折叠，但我不确定它们被保存到哪里。我希望能够使用 bzr 提交折叠，以便我的团队能够利用它们。视图文件在哪里？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T04:44:40.887

如果您想共享折叠，最好的选择是使用折叠标记：

```
#{{{1 First-level fold name
…
#{{{2 Second-level fold name
…
#}}}2 End of second-level fold
…
#{{{1 Next first-level fold name
… 
```

我更喜欢做不同的事情：

```
#▶1 First-level fold
…
#▲1 End of first-level fold
# vim: fmr=▶,▲ 
```

. 但是，如果您仍然想使用手动折叠，这里是文档：

> `:h :mkview`
> 
> ```
> :mkvie[w][!] [file]   Write a Vim script that restores the contents of the
>             current window.
>             When [!] is included an existing file is overwritten.
>             When [file] is omitted or is a number from 1 to 9, a
>             name is generated and 'viewdir' prepended.  When the
>             last directory name in 'viewdir' does not exist, this
>             directory is created. 
> ```
> 
> `:h 'viewdir'`，通常在上一个帮助文本中`<C-]>`光标打开时跳转到使用。`'viewdir'`
> 
> ```
> 'viewdir' 'vdir'  string  (default for Amiga, MS-DOS, OS/2 and Win32:
>                              "$VIM/vimfiles/view",
>                  for Unix: "~/.vim/view",
>                  for Macintosh: "$VIM:vimfiles:view"
>                  for VMS: "sys$login:vimfiles/view"
>                  for RiscOS: "Choices:vimfiles/view") 
> ```

如果您自己阅读文档会更好，vim 有很好的文档。

# iis-7 - 网站托管作为 IIS 7 中的应用程序

> ID：14016930
> 
> 赞同：-1
> 
> 时间：2012-12-24T04:04:59.997
> 
> 标签：iis-7

我有一个网络应用程序。当我作为站点（www.example.com）托管时，我的应用程序可以正常工作。但是当尝试在我的网站 (www.example.com/everway) 下作为应用程序托管时，css 文件和 javascript (window.location.href) 不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-24T04:19:02.823

在 www.example.com/everway 托管时，您的资产 URL 看起来像 www.example.com/everway/javascripts/application.js，对吗？

www.example.com/javascripts/application.js 和 www.example.com/everway/javascripts/application.js 不一样。

您的应用程序是否考虑了这种差异？

# java - 使用引用库 Eclipse 进行调试/编译

> ID：14016932
> 
> 赞同：2
> 
> 时间：2012-12-24T04:05:08.303
> 
> 标签：java, eclipse

这是一个愚蠢的问题，但我在使用 Eclipse 时遇到了一些麻烦。我正在使用 htmlunit.jar 构建一个小型测试应用程序。我已将 .jar 添加到库下的构建路径中，并且在编写代码时 eclipse 中没有错误。

但是，每当我尝试调试程序时，它都会抛出 NoClassDefFoundError，即使我引用了该库。我究竟做错了什么？

提前非常感谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-24T04:09:44.737

htmlunit 对其他库有很多依赖项，您还必须将这些依赖项添加到您的库中。

我的建议：尝试使用 maven 或一些类似的构建系统来管理依赖项

# windows - Node-webkit 本地网络服务器

> ID：14016933
> 
> 赞同：1
> 
> 时间：2012-12-24T04:05:43.530
> 
> 标签：windows, node-webkit

是否可以将 node-webkit 应用程序用作本地网络的网站（在 Windows 中）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-24T04:33:04.110

是的。这是可能的并且得到支持。只需以与在 Node.js 中相同的方式编写代码即可。

# ios - Accessing textField embedded in cell

> ID：14016938
> 
> 赞同：2
> 
> 时间：2012-12-24T04:06:58.387
> 
> 标签：ios, uitableview, uitextfield, uitextfielddelegate

I have created a table which dynamically creates cells which are customized to contain a textField. When I run the program, I am able to enter text into the textFields. However, I am not able to collect the text entered into them before quitting the program/switching to a different viewController. Can you please suggest what I should do in order to extract the text entered by the user.

I understand that I can access the cells using the following code...

```
for (int section = 1; section < [self.tableView numberOfSections]; section++) // section 0: profile picture
{
    for(int row = 0; row < [self.tableView numberOfRowsInSection:section]; row++)
    {
        NSLog(@"section = %d, row = %d", section, row);
        NSIndexPath *tempIndexPath = [NSIndexPath indexPathForRow:row inSection:section];
        UITableViewCell *tempCell = [self tableView:self.tableView cellForRowAtIndexPath:tempIndexPath];
//            NSLog(@"tempCell = %@", tempCell);

    }
} 
```

But I am not able to extract the text contained in them.

I also referred to: [Accessing UITextField in a custom UITableViewCell](https://stackoverflow.com/questions/4375442/accessing-uitextfield-in-a-custom-uitableviewcell). But I am looking for a cleaner solution.

Thanks!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T05:34:40.007

The link that you refer to is very close to what you need to do, however there is a better way to get the indexPath.

A common mis-conception when starting with iOS programming is that you need to get all of the values of the text fields at the time you need the data (such as when the user hits "Submit"). The problem, especially when they are in a table, is that the text fields are not always available. If the cell is off the screen, it quite possibly doesn't exist, or it has been reused in a different row of the table. Text fields are **view**'s which are supposed to **display** data, and not act as your model where you store it.

So, the first thing that you need to do is to make your view controller conform to the `UITextFieldDelegate` protocol and set the delegate of the textfield when you create it to your view controller:

Your .h file (the `<UITextFieldDelegate>` is the important part):

```
@interface YourViewController : UIViewController <UITextFieldDelegate> 
```

When you create your text field:

```
myNewTextfield.delegate = self; 
```

This tells the text field to inform you of important changes to it. Now, you only need to create the text field delegate method which is called *as soon as they finish editing* the text field and wait for it to be called so that you can store the text:

```
- (void) textFieldDidEndEditing:(UITextField *)textField {
    // If you need the index path of the table view cell which contains the text field in order to know how to store it, use:
    CGRect position = [self convertRect:textField.frame toView:self.tableView];
    NSArray *indexPaths = [self.tableView indexPathsForRowsInRect:position];
    NSIndexPath *indexPath = [indexPaths objectAtIndex:0];

    // Save the contents of the text field somewhere so that you have it later when you need it:
    something = textField.text;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T19:54:17.263

[本](http://www.appcoda.com/ios-programming-customize-uitableview-storyboard/)教程对我很有帮助。您可以通过标签引用您需要的任何对象。

在情节提要中拖动`UIImageView`或`UITextField`等并将标签设置为 100（无论您想要什么），然后在您`- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath`使用标签来引用它。

这是您可以做的事情，只需记住在情节提要中设置标签：

```
 - (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
 {
static NSString *CellIdentifier = @"Cell";
UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

// Configure the cell...
if (cell == nil) {
    cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];
}

 UITextField *tField = (UITextField *)[cell viewWithTag:100];

return cell;
 } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-03-12T00:56:58.763

这是我的 Swift 4 解决方案，因为我遇到了同样的问题。

我也将文本字段添加到单元格中，并且表格是动态创建的，因此表格视图控制器无法直接访问文本字段。

首先，我创建了一个协议，允许表格视图控制器保存单元格文本字段的输入值的数据。

```
protocol SMTextFieldRowCellProtocol: class {
    var dataValues: [String: String] { get set }
    func updateDataValues(with data: [String: String])
} 
```

在单元格的自定义类中，添加以下委托属性：

```
var delegate: SMTextFieldRowCellProtocol? 
```

仍然在单元格的类中，使其符合`UITextFieldDelegate`，将文本字段的委托设置为 self 在`awakeFromNib()`.

```
textField.delegate = self 
```

然后在单元格的类中，添加`UITextFieldDelegate`' 方法并使其调用该`updateDataValues`方法。我使我的键等于单元格的标题标签，所以所有键都是唯一的。

```
func textFieldDidEndEditing(_ textField: UITextField) {
    delegate?.updateDataValues(with: [titleLabel.text!: textField.text!])
} 
```

上述方法将更新表视图控制器的字典。几乎完成了，但是每当您在表格视图的 cellForRow 方法中创建行时，请设置单元格的委托：

```
cell.delegate = self 
```

最后，将协议添加到类并遵守它：

```
class SMEditProfileTVC: UITableViewController, SMTextFieldRowCellProtocol {
    var dataValues: [String: String] = [String: String]()
    func updateDataValues(with data: [String: String]) {
        for key in data.keys {
            dataValues[key] = data[key]
        }
    }
} 
```

所以发生的事情是，当您完成对单元格文本的编辑时，它将调用表格视图控制器的`updateDataValues`方法并将数据保存到`dataValue`的字典中。现在，这将使在保存等时或在视图控制器中完成时传输数据变得容易。

# django - 模型在 Django 中创建与更新

> ID：14016941
> 
> 赞同：0
> 
> 时间：2012-12-24T04:07:14.987
> 
> 标签：django, django-models

我想在我的 Django 模型中有几个字段，它们仅在创建时保存，而其他字段仅在更新时保存。例如“date_created”和“author”与“date_edited”和“last_editor”。

我如何实现这一点以及如何创建 2 个不同的场所/工作流来保存和更新模型，这在从管理员和我可能创建的自定义客户端表单保存时都有效？

编辑：

我正在谈论的字段不会出现在表单中，它们将在视图中创建。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-24T04:17:42.723

如果您想保留自定义视图和管理的功能，最好的地方是保存方法。其次，如果您尝试保存编辑日期时间，我建议您查看`auto_now_add`与or`auto_now`一起使用的参数。它们提供了一种方法来保存创建和最新编辑的时间戳记的值。看看[这里](https://docs.djangoproject.com/en/dev/ref/models/fields/#datefield)。最后，其他解决方案可能是使用它为您提供一种在为模型调用 save 方法时调用方法的方法。这将帮助您解耦逻辑。`DateTimeField``DateField``Django Signals`

```
class ExModel(models.Model):
  ...
  ...

  def save(self):
     if self.id:
       #update logic here
     else:
       #New creation logic here 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-24T04:17:04.017

您可以覆盖`save`模型的方法并通过检查主键是否有价值来识别那里的创建和更新。

```
 def save(self,*args,**kwargs):
        if not self.pk: #object is being created
            self.author = 'abc'
            self.date_created = datetime.now()
        else: #object is being updated
            self.last_editor = 'abc'
            self.date_edited = datetime.now()
        super(MyModel,self).save(*args,**kwargs) 
```

# android - Android bulkTransfer 读取数据时返回 -1 但缓冲区中确实有一些数据

> ID：14016943
> 
> 赞同：8
> 
> 时间：2012-12-24T04:07:39.180
> 
> 标签：android, usb, host

我在galaxy tab p7300中编写了一个应用程序，以通过otg电缆与密钥（scsi设备）进行通信。我可以第一次使用 bulkTransfer() 读取数据，但下次不能。然后我使用 Ellisys Visual USB 嗅探数据，我发现密钥确实返回了 13 个字节的数据。但是在 android 客户端（GT-P7300）中，我收到了 bulkTransfer 返回的 -1。我的想法已经用完了。感谢任何可以给我线索的人。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-04T10:25:15.670

使用 USB 批量传输时，以下是交易失败时要检查的事项列表

a) 验证您通过 bulkTransfer 函数**的端点的方向**

b) 确保缓冲区有足够的**长度来存储**传入的数据

c)**长度字段**可能是最重要的。如果您知道响应的确切大小，请使用它。

d)**超时参数**。如果您向设备发送查询并且在侦听响应时未提供足够的超时，则 bulkTransfer 可以返回 -1。

看起来超时正在影响您案例中的行为。我的建议是在每个响应的长度字段中使用确切的字节数，并使用更长的超时时间（如 1000），这样您就有足够的时间来完成批量请求。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-12-16T12:37:31.600

发布解决方案为时已晚，但如果将来有人需要帮助，可以从这里得到答案。

我遇到了同样的问题。我使用 Android (Samsung Galaxy s3) 作为 USB 主机设备。我弄清楚了读取端点和写入端点不使用 USB BulkTransfer 传输数据。我尝试为主机模​​式切换端点，它识别并成功写入/读取数据。

```
 mReadEndpoint = mDataInterface.getEndpoint(0);// tweaking endpoints // 1 was for read and 0 was for write
 mWriteEndpoint = mDataInterface.getEndpoint(1); 
```

PS有一个可用于android的应用程序，名为“USB设备信息”。它对我理解我的 USB 设备的接口和端点有很大帮助。

# java - Flurry enableAppCircle() 方法未定义

> ID：14016955
> 
> 赞同：1
> 
> 时间：2012-12-24T04:09:09.760
> 
> 标签：java, android, sdk, import, flurry

这可能更像是一个库导入问题。

我的 android java 项目中有 Flurry SDK。最新版本的 FlurryAgent.jar 在我的 libs 文件夹中。（版本 3.0.5）

某些方法有效，例如`startSession`and `logEvent`，但 Flurry 文档说应该存在的其他方法不在 SDK 中。

IE。enableAppCircle() 未定义。

这可能是导入错误或不完整的吗？一些方法确实有效并在 Flurry Web 控制台上记录事件。

如何获得 Appcircle 方法

我正在使用 Eclipse

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-24T07:26:03.540

适用于 Android 的 Flurry SDK v3.x 包含所有现有的 Flurry 分析功能以及新的广告功能。AdUnity 包含在包含 Analytics 库的同一 JAR 文件中，因此不需要其他库。此外，此 SDK 中不再提供 enableAppCircle() 方法。您只需要在代码中初始化和请求广告。SDK 文件夹中提供了集成说明。或者，您可以参考支持页面了解更多详情： http: [//support.flurry.com/index.php](http://support.flurry.com/index.php?title=Publisher/GettingStarted/TechnicalQuickStart/Android) ?title=Publisher/GettingStarted/TechnicalQuickStart/Android 。（全面披露：我在 Flurry 的支持团队工作）

# visual-studio - 具有多个项目的 Visual Studio 自定义项目模板

> ID：14016957
> 
> 赞同：1
> 
> 时间：2012-12-24T04:09:19.057
> 
> 标签：visual-studio, templates

我正在尝试为我的团队编写一些自定义项目模板，以便我们可以在为我们的应用程序创建新模块时保持一致，也可以更轻松地创建新模块。我大部分时间都在工作，但我在添加项目引用时遇到了问题。

我的目标是这样的项目结构：

```
/Root
    /Modules
        /ModuleName
        /ModuleName.Interface
        /ModuleName.ViewModels
        /ModuleName.Views 
```

ModuleName 项目具有对所有这些项目的引用，ModuleName.Views 项目具有对 ModuleName.Interface 和 ModuleName.ViewModels 项目的引用。所以我已经设置了所有的 vstemplate 文件，除了项目引用之外，所有项目都正确生成。

我在模块的主 vstemplate 中定义了这个：

```
<TemplateContent>
    <ProjectCollection>
        <ProjectTemplateLink ProjectName="$safeprojectname$.Interface">Module.Interface\Module.Interface.vstemplate</ProjectTemplateLink>
        <ProjectTemplateLink ProjectName="$safeprojectname$">Module\Module.vstemplate</ProjectTemplateLink>
        <ProjectTemplateLink ProjectName="$safeprojectname$.ViewModels">Module.ViewModels\Module.ViewModels.vstemplate</ProjectTemplateLink>
        <ProjectTemplateLink ProjectName="$safeprojectname$.Views">Module.Views\Module.Views.vstemplate</ProjectTemplateLink>
    </ProjectCollection>
</TemplateContent> 
```

我在我的 Module.Views.vstemplate 文件中定义了这个：

```
<Project File="Module.Views.csproj" TargetFileName="$safeprojectname$.Views.csproj" ReplaceParameters="true">
    <ProjectItem TargetFileName="packages.config" ReplaceParameters="false">packages.config</ProjectItem>
    <ProjectItem TargetFileName="assemblyinfo.cs" ReplaceParameters="true">properties\assemblyinfo.cs</ProjectItem>
</Project> 
```

然后我在我的 Module.Views.csproj 文件中定义了这个：

```
<ItemGroup>
    <ProjectReference Include="..\$safeprojectname$.Interface\$safeprojectname$.Interface.csproj">
        <Project>{4f6aa0f2-a984-43c3-8fad-7e2f00351f7e}</Project>
        <Name>$safeprojectname$.Interface</Name>
    </ProjectReference>
    <ProjectReference Include="..\$safeprojectname$.ViewModels\$safeprojectname$.ViewModels.csproj">
        <Project>{e5a562f9-58b2-4ab5-bb9d-8dc806322e62}</Project>
        <Name>$safeprojectname$.ViewModels</Name>
    </ProjectReference>
</ItemGroup> 
```

它正确命名了所有项目，但我的项目引用最终如下：

```
ModuleName.Views.Interface
ModuleName.Views.ViewModels 
```

看起来 $safeprojectname$ 宏在应用于 vstemplate 和 csproj 文件时表现不同。似乎在处理 vstemplate 文件时 $safeprojectname$ 是您在 IDE 提示时输入的项目的名称，但在 csproj 文件中 $safeprojectname$ 是特定于该 vstemplate 的扩展项目名称，例如 ModuleName.Views 当我期望它是 ModuleName。

我尝试使用 CustomParameters 但它们似乎被推迟到最后一分钟，例如：

```
<CustomParameters>
    <CustomParameter Name="$ModuleInterfaceProjectName$" Value="$safeprojectname$.Interface"/>
    <CustomParameter Name="$ModuleProjectName$" Value="$safeprojectname$"/>
    <CustomParameter Name="$ModuleViewModelsProjectName$" Value="$safeprojectname$.ViewModels"/>
    <CustomParameter Name="$ModuleViewsProjectName$" Value="$safeprojectname$.Views"/>
</CustomParameters> 
```

这导致对 ModuleName.Views.Interface 的相同引用。

有谁知道如何解决这种行为？我知道我可以编写一个自定义向导来解决这个问题，但我希望不要走那么远。

# python - 我应该使用 LEFT JOIN、RIGHT JOIN 和派生表、不同的表设计还是需要编码？

> ID：14016963
> 
> 赞同：3
> 
> 时间：2012-12-24T04:09:48.843
> 
> 标签：python, mysql, sql, pivot

> **可能重复：**
> [MySQL 数据透视表](https://stackoverflow.com/questions/7674786/mysql-pivot-table)

我应该使用派生表的*左联接、使用派生表*的*右联接*、不同的表设计，还是需要查询表并编写 Python 代码以产生如下所示的所需输出？

我想得到的输出将产生以下输出示例：

```
==========================
| 2005   |  2006 |  2007 |  <--- These headings are not necessary
==========================
|   A    |  A    |  A    |
--------------------------
|  AA    |  AA   |  AA   |
--------------------------
|  BB    |  BB   |       |
--------------------------
|  C     |       |   C   |
-------------------------- 
```

查询的数据位于包含（符号，年份）的两列表中：

```
====================
|  Symbol |  Year  |
====================
|   A     |  2005  |
--------------------
|   AA    |  2005  |
--------------------
|   BB    |  2005  |
--------------------
|   C     |  2005  |
--------------------
|   A     |  2006  |
--------------------
|   AA    |  2006  |
--------------------
|   BB    |  2006  |
--------------------
|   A     |  2007  |
--------------------
|   AA    |  2007  |
--------------------
|   C     |  2007  |
-------------------- 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-24T04:13:53.063

```
SELECT MAX(CASE WHEN year = 2005 THEN Symbol ELSE NULL END) `2005`,
       MAX(CASE WHEN year = 2006 THEN Symbol ELSE NULL END) `2006`,
       MAX(CASE WHEN year = 2007 THEN Symbol ELSE NULL END) `2007`
FROM tableName
GROUP BY Symbol 
```

*   [SQLFiddle 演示](http://sqlfiddle.com/#!2/83fb5/2)

如果您有未知的年份值，则非常喜欢*动态 SQL 查询。*

```
SET @sql = NULL;
SELECT
  GROUP_CONCAT(DISTINCT
    CONCAT(
      'MAX(CASE WHEN year = ',
      year,
      ' THEN Symbol ELSE NULL end) AS ',
      CONCAT('`', year, '`')
    )
  ) INTO @sql
FROM TableName;

SET @sql = CONCAT('SELECT  ', @sql, ' 
                   FROM tableName 
                   GROUP BY Symbol');

PREPARE stmt FROM @sql;
EXECUTE stmt;
DEALLOCATE PREPARE stmt; 
```

*   [SQLFiddle 演示](http://sqlfiddle.com/#!2/83fb5/6)

如果你想显示空字符串而不是`null`值，`COALESCE`是必需的。

*   [SQLFiddle 演示](http://sqlfiddle.com/#!2/83fb5/7)
*   [SQLFiddle 演示（*动态查询*）](http://sqlfiddle.com/#!2/83fb5/12)

# php - 使用 cake php form helper 在表单元素内添加 html 元素

> ID：14016966
> 
> 赞同：2
> 
> 时间：2012-12-24T04:10:17.683
> 
> 标签：php, html, cakephp, formhelper

我正在尝试创建一个看起来像这样的简单 html 输出

```
<button class="searchbutton" id="search_button" type="submit">-->
      <i class="icon-search"></i> Search</button> 
```

使用 Cake php 的表单助手，我无法弄清楚为什么 'after' 属性不添加内部`<i> </i>`html 元素。

这是我尝试过的。

```
 echo $this->Form->button('Search', array('type' => 'submit','id' => 'search_button','class' => 'searchbutton',
        'after' => "<i class='icon-search'></i>")); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-05-16T04:12:25.540

`<i></i>`您只需在按钮中包含额外的标签`$title`，还包括`'escape' => false`以确保标记不会被转义，即使在 v3.1.1 上默认情况下没有转义，这可能会在未来发生变化，谁知道..

例子：

```
echo $this->Form->button("<i class='icon-search'></i> Search", array('type' => 'submit','id' => 'search_button', 'class' => 'searchbutton', 'escape' => false)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-24T04:41:44.440

请尝试以下代码。

```
echo $this->Form->button('Search', array('type' => 'submit','id' => 'search_button','class' => 'searchbutton','escape' => true,
        'after' => "<i class='icon-search'></i>")); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-05-26T09:39:29.340

看到这个

`echo $this->Form->button('Search', array('type' => 'submit','id' => 'search_button','class' => 'searchbutton','escape' => true, 'after' => "<i class='icon-search'></i>"));`

# ios - iOS：同时缩放和 3D 旋转动画

> ID：14016969
> 
> 赞同：8
> 
> 时间：2012-12-24T04:10:39.780
> 
> 标签：ios, uiview, core-animation, cgaffinetransform, catransform3d

我制作了一个视频来演示我正在尝试完成的动画：[就是这样。](http://cl.ly/LmSM)

请注意，视频说明了从侧面看到的动作。相机图标代表用户的 POV。它基本上是通过比例变换完成的 Z 轴之间平移的模拟，同时沿 X 轴发生独立的两步 3D 旋转。

看起来和听起来都很简单，对吧？错误的。这是理想的代码，它不起作用：

```
[UIView animateWithDuration:0.4 delay:0.0 options:UIViewAnimationOptionCurveEaseInOut animations:^{
    view.transform = CGAffineTransformMakeScale(1.0, 1.0);
} completion:^(BOOL finished) {}];

[UIView animateWithDuration:0.2 delay:0.0 options:UIViewAnimationOptionCurveEaseInOut animations:^{
    CATransform3D rotation = CATransform3DIdentity;
    rotation.m34 = 1.0 / - 1800;
    rotation = CATransform3DRotate(rotation, - 20 * M_PI / 180.0f, 1, 0, 0);

    view.layer.transform = rotation;

} completion:^(BOOL finished) {
    [UIView animateWithDuration:0.2 delay:0.0 options:UIViewAnimationOptionCurveEaseInOut animations:^{
        view.layer.transform = CATransform3DIdentity;

    } completion:^(BOOL finished) {}];
}]; 
```

事实证明，如果你这样做，3D 旋转将被完全忽略。我尝试了许多其他方法，但都失败了。

### 一些要求：

*   比例尺最好是`CGAffineTransform`
*   缓动应如图所示，尤其是在旋转时

当然，如果出现需要改变其中一些的解决方案，我可以适应。

提前感谢您的帮助。如果您需要澄清，请询问。

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-12-24T10:49:17.207

如果不取消第一个动画，则无法为同一属性设置动画。您应该选择使用 Core Animation 并制作两个动画或一个关键帧动画。

## 两个变换动画

通过创建一个用于缩放的动画（如果需要，您可以将其作为 z 平移）和一个用于旋转的动画，为它们提供非常具体的关键路径，它们不会相互抵消。

```
CABasicAnimation *scale = [CABasicAnimation animationWithKeyPath:@"transform.scale"];
scale.fromValue = @0.75; // Your from value (not obvious from the question)
scale.toValue = @1.0;
scale.duration = 0.4;
scale.timingFunction = [CAMediaTimingFunction functionWithName:kCAMediaTimingFunctionEaseInEaseOut];

CAKeyframeAnimation *rotate = [CAKeyframeAnimation animationWithKeyPath:@"transform.rotation.x"];
rotate.values = @[@0.0, @(- 20 * M_PI / 180.0f), @0.0];
rotate.duration = 0.4;
rotate.timingFunctions = @[[CAMediaTimingFunction functionWithName:kCAMediaTimingFunctionEaseInEaseOut],
[CAMediaTimingFunction functionWithName:kCAMediaTimingFunctionEaseInEaseOut]];

[view.layer addAnimation:scale forKey:@"move forward by scaling"];
[view.layer addAnimation:rotate forKey:@"rotate back and forth"];
view.transform = CGAffineTransformIdentity; // Set end value (animation won't apply the value to the model) 
```

## 单个关键帧动画

由于您拥有三个非常好的关键帧，因此在三个关键帧之间进行动画处理的代码将很容易阅读和理解。如果您想将缩放的时间与旋转的时间分开，您可能会失去一些控制。

```
CATransform3D firstFrame  = CATransform3DMakeScale(0.75, 0.75, 1.0);
CATransform3D secondFrame = CATransform3DMakeScale(0.875, 0.875, 1.0); // halfway to 1.0 from 0.75
secondFrame = CATransform3DRotate(secondFrame, -20.0*M_PI/180.0, 1.0, 0.0, 0.0);
CATransform3D lastFrame   = CATransform3DIdentity;

CAKeyframeAnimation *scaleAndRotate = [CAKeyframeAnimation animationWithKeyPath:@"transform"];
scaleAndRotate.values = @[[NSValue valueWithCATransform3D:firstFrame],
                          [NSValue valueWithCATransform3D:secondFrame],
                          [NSValue valueWithCATransform3D:lastFrame] ];
scaleAndRotate.duration = 1.0;
scaleAndRotate.timingFunctions = @[[CAMediaTimingFunction functionWithName:kCAMediaTimingFunctionEaseInEaseOut],
[CAMediaTimingFunction functionWithName:kCAMediaTimingFunctionEaseInEaseOut]];

[view.layer addAnimation:scaleAndRotate forKey:@"entire animation"];
view.transform = CGAffineTransformIdentity; // Set end value (animation won't apply the value to the model) 
```

## 看法

在这两种情况下，我通过在动画视图的超层上设置 sublayerTransform 来进行透视（假设那里只有一个带有变换的子视图）

```
CATransform3D perspective = CATransform3DIdentity;
perspective.m34 = 1.0 / - 1800.0;    
view.superview.layer.sublayerTransform = perspective; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-12-21T07:49:29.693

我找到了一种方法，但它更像是一个黑客。请执行下列操作 -

1）创建一个具有透明背景的视图-（此视图将翻译）2）创建一个子视图1）-（此视图将旋转）。

现在使用创建两个变换，视图 1) 的缩放变换和视图 2) 的旋转变换并同时应用它们。

# javafx - 从其他线程进程接收事件后 JavaFX UI 冻结

> ID：14016970
> 
> 赞同：1
> 
> 时间：2012-12-24T04:10:41.333
> 
> 标签：javafx

我是 JavaFX 的新手。我想要实现的只是在控制器从另一个线程接收到事件后更新 JavaFX 文本区域上的文本。但它有时会挂起同样的异常。

这是发生的事情：

```
Other thread -> Trigger event -> Do proccess at an event handler on JavaFX controller -> Hang with exception. 
```

我总是得到的例外是这样的：

```
java.lang.ArrayIndexOutOfBoundsException: -1
    at java.util.ArrayList.elementData(ArrayList.java:371)
    at java.util.ArrayList.get(ArrayList.java:384)
    at com.sun.javafx.collections.ObservableListWrapper.get(ObservableListWrapper.java:208)
    at com.sun.javafx.scene.control.skin.TextAreaSkin$ContentView.layoutChildren(TextAreaSkin.java:291)
    at javafx.scene.Parent.layout(Parent.java:1018)
    at javafx.scene.Parent.layout(Parent.java:1028)
    at javafx.scene.Scene.layoutDirtyRoots(Scene.java:513)
    at javafx.scene.Scene.doLayoutPass(Scene.java:484)
    at javafx.scene.Scene.access$3900(Scene.java:169)
    at javafx.scene.Scene$ScenePulseListener.pulse(Scene.java:2199)
    at com.sun.javafx.tk.Toolkit.firePulse(Toolkit.java:363)
    at com.sun.javafx.tk.quantum.QuantumToolkit.pulse(QuantumToolkit.java:460)
    at com.sun.javafx.tk.quantum.QuantumToolkit$9.run(QuantumToolkit.java:329)
    at com.sun.glass.ui.InvokeLaterDispatcher$Future.run(InvokeLaterDispatcher.java:76) 
```

我在事件类上调用事件处理程序的代码是这样的：

```
private void propertyChanged(String propertyName)
{
    CortexInspectorEvent event = new CortexInspectorEvent(this);

    Iterator i = this.listeners.iterator();

    while (i.hasNext())
    {
        ICortexInspectorEventListener listener = (ICortexInspectorEventListener) i.next();

        try
        {
            listener.onProperpertyChanged(event, propertyName);
        }
        catch(Exception ex)
        {
            System.out.println(ex.getMessage());
        }   
    }
} 
```

即使我放置了 try-catch，也从未捕获到异常并且 UI 仍然挂起。

在我的事件处理程序方法中，即使我放置了空方法，UI 仍然会挂起。

```
@Override
public void onProperpertyChanged(CortexInspectorEvent e, String propertyName) 
{
    CortexInspector inspector = (CortexInspector) e.getSource();

    this.logln(inspector.getLog()); // This line of code is just for appending some String to a text area.
} 
```

不知道怎么问goo*le这样的问题，试了一堆关键词还是没有得到正确的答案，所以在这里问。请帮忙。谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T05:22:46.607

您需要对 JavaFX 应用程序线程上的文本区域执行更新。

[在Platform.runLater](http://docs.oracle.com/javafx/2/api/javafx/application/Platform.html#runLater%28java.lang.Runnable%29)调用中包装对您的侦听器的调用。这将确保侦听器通知发生在 JavaFX 应用程序线程上。

```
private void propertyChanged(final String propertyName) {
  final CortexInspectorEvent event = new CortexInspectorEvent(this);
  final Iterator i = this.listeners.iterator();
  while (i.hasNext()) {
    final ICortexInspectorEventListener listener = (ICortexInspectorEventListener) i.next();
    Platform.runLater(new Runnable() {
      @Override public void run() {
        listener.onProperpertyChanged(event, propertyName);
      }
    });
  }
} 
```

对于 Java8，你可以写：

```
Platform.runLater(() -> listener.onProperpertyChanged(event, propertyName)); 
```

您的 try catch 逻辑似乎不起作用的原因是在 JavaFX 应用程序线程上引发了异常，该线程不是执行 try catch 代码的线程。

你是在写[脑部扫描仪](http://en.wikipedia.org/wiki/Cerebral_cortex)还是什么的；-)

# xcode - 一个视图中的两个 UIViewtable

> ID：14016971
> 
> 赞同：-3
> 
> 时间：2012-12-24T04:10:41.710
> 
> 标签：xcode, uitableview

我正在构建一个 RSS 应用程序。在这个应用程序中，我为新闻源创建水平表，而在其他 uitableview 中，将根据用户在水平表中的选择从 rss 提要加载新闻列表。

问题是我想在一个视图中显示两个表。第一个表格在中间，新闻列表在中间到底部。我的问题是如何在用户单击第一个表中的条目后在同一视图中加载第二个表。

我可以使用导航控制器来做到这一点，但我想在同一个视图中呈现它。

顺便说一句，我也有两个表有 2 个单独的数据源和委托。

这是将打开一个新视图的 firsttable.m 文件的代码。感谢任何反馈。

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath{

NSDictionary * newsSourceItem = (NSDictionary *)[_newsSourceList objectAtIndex:indexPath.row];

[tableView deselectRowAtIndexPath:indexPath animated:YES];

  RSSListViewController * rssListViewController = [[RSSListViewController alloc] initWithRSSURL:[newsSourceItem objectForKey:@"BlogURL"]];
[rssListViewController setTitle:[newsSourceItem objectForKey:@"BlogTitle"]];

[self.navigationController pushViewController:rssListViewController animated:YES];
[rssListViewController release];

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-24T04:28:57.090

您可以这样做： **在 your.h 文件中定义两个表，并使用它们的实例管理它们。**

```
@interface VehicleViewController : UIViewController {

  UITableView *listVehicle;
  UITableView *listMaintenance;
}

@property (nonatomic, retain) IBOutlet UITableView *listVehicle;
@property (nonatomic, retain) IBOutlet UITableView * listMaintenance; 
```

*在 .m 文件中* *** 声明两个 UITableView 属性，然后在你的各种委托方法中你可以做一个条件语句来查看它是哪个属性。前任：**

1) 使用 tableView 对象

```
if (tableView == [self listVehicle]) 
```

或者 ***为每个表视图分配一个标签，然后在您的各种委托方法中，您可以执行条件语句来查看它是哪个标签。前任：**

```
if ([tableView tag] == myConstantForTableA) 
```

如需更多帮助，请查看：[单个 ViewController 中的两个 TableViews](https://stackoverflow.com/questions/2086974/how-to-manage-2-tableviews-in-1-viewcontroller)

# java - 如何从 JavaScript 调用在小程序中声明的方法

> ID：14016972
> 
> 赞同：5
> 
> 时间：2012-12-24T04:10:53.317
> 
> 标签：java, javascript, applet

我正在尝试制作一个基本的[Java 小程序](https://en.wikipedia.org/wiki/Java_applet)来为他们打开客户端计算机上的文件。我想通过JavaScript调用下面Java小程序中的openFile函数。

```
import java.awt.Desktop;
import java.io.File;
import java.io.IOException;

import javax.swing.JApplet;

public class Test extends JApplet {
    public void openFile(String filePath) {
        File f = new File(filePath);

        try {
            Desktop.getDesktop().open(f);
        } catch (IOException e) {
            e.printStackTrace();
        }
    }
} 
```

在我网页的正文标签之间，我有以下内容：

```
<applet code="Test.class" height="0" width="0"></applet>

<script type="text/javascript">
    document.applets[0].openFile("C:\\test.log");
</script> 
```

当我加载页面时，我收到错误：

> TypeError：对象#没有方法'openFile'

我需要做些什么来修复此错误并使小程序正常工作？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-24T04:14:56.847

利用：

```
<script src=
  "http://www.java.com/js/deployJava.js"></script>

<script>
    <!-- The applet id can be used to get a reference to
    the applet object -->
    var attributes = { id:'mathApplet',
        code:'jstojava.MathApplet',  width:1, height:1};
    var parameters = {jnlp_href: 'math-applet.jnlp'};
    deployJava.runApplet(attributes, parameters, '1.6');
</script> 
```

参考：*[从 JavaScript 调用 Applet 方法](http://docs.oracle.com/javase/tutorial/deployment/applet/invokingAppletMethodsFromJavaScript.html)*

允许 JavaScript 直接调用小程序的公共方法或公共变量。JavaScript 将嵌入式小程序视为一个对象。通过为小程序提供一个 ID，JavaScript 可以通过以下方式访问它：

```
 document.Applet_ID.Applet_Method() 
```

你可以用这个，

### 文件*MyApplet.html*

```
<html>
<head>
    <script language="Javascript">
        function accessAppletMethod()
        {
            document.getElementById("AppletABC").appendText("Applet Method");
        }
    </script>

    <title>Testing</title>
</head>

<body onload="accessAppletMethod()">

    <h1>Javascript acess Applet method</h1>

    <applet width=300 height=100 id="AppletABC"
        code="JavaScriptToJava.class">
    </applet>
</body>

</html> 
```

### 文件*JavaScriptToJava.java*

```
import java.applet.Applet;
import java.awt.FlowLayout;
import java.awt.TextArea;

public class JavaScriptToJava extends Applet{

    TextArea textBox;

    public void init(){
        setLayout(new FlowLayout());
        textBox = new TextArea(5, 40);
        add(textBox);
    }

    public void appendText(String text){
        textBox.append(text);
    }
} 
```

# java - 从另一个 java 进程在 Windows 控制台中运行 java 进程

> ID：14016973
> 
> 赞同：1
> 
> 时间：2012-12-24T04:10:59.417
> 
> 标签：java, windows, jar, console, processbuilder

我正在尝试从我的 Java 进程启动另一个 Java 进程。问题是我希望出现 Windows 控制台并希望将 AnotherApp 写入该控制台。

这个 Java 片段确实启动了一个新进程，**但没有出现控制台。**

```
ProcessBuilder pb = new ProcessBuilder("cmd", "/k", "java", "-jar", "AnotherApp.jar");
pb.start(); 
```

如果我从开始运行 - 运行

```
cmd /k java -jar AnotherApp.jar 
```

然后创建一个新的控制台并启动 java 进程。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-24T04:22:24.090

尝试以下操作：

```
ProcessBuilder pb = new ProcessBuilder("cmd", "/c", "start", "java", "-jar", "AnotherApp.jar"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-24T04:42:51.757

另一种选择。

```
String cmd[]={"cmd", "/c", "start", "java", "-jar", "AnotherApp.jar"};

Runtime rt=Runtime.getRuntime();

Process p=rt.exec(cmd); 
```

您可以获得 p 的输出流（将作为输入流提供给您以供读取）并将其打印到任何控制台。

# javascript - 无法理解 javascript 的正则表达式的工作方式

> ID：14016974
> 
> 赞同：1
> 
> 时间：2012-12-24T04:11:08.877
> 
> 标签：javascript, regex

为什么这段代码（[这里是 JSBin](http://jsbin.com/ijihaw/5/edit)）：

```
var text = "T: 01202 870738";

var regex1 = /T: (.*)/;
var matches1 = text.match(regex1);

for(var i = 0; i < matches1.length; i++) {
  log("[" + i + "]: " + matches1[i]);
} 
```

记录这个：

```
[0]: T: 01202 870738
[1]: 01202 870738 
```

和这段代码（注意我添加了`g`选项）：

```
var regex2 = /T: (.*)/g;
var matches2 = text.match(regex2);

for(var i = 0; i < matches2.length; i++) {
  log("[" + i + "]: " + matches2[i]);
} 
```

记录这个：

```
[0]: T: 01202 870738 
```

我实际上什至不明白为什么将第一个代码记录`01202 870738`为第二个匹配项。`/T: (.*)/`如果它不包含 a怎么匹配`T:`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-24T04:13:29.903

第二个是全局正则表达式，因此返回的数组是字符串中表达式的所有匹配项的列表。第一个不是，所以它是一个组列表，就像你从`exec`. （第 0 组是整个比赛，第 1 组是唯一带括号的……组。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-24T04:40:31.007

让您失望的是您从带有和不带有`g`标志的正则表达式中获得的不同行为。`String.match`使用标记的正则表达式调用`g`将返回`String`对象内所有模式实例的数组。例如，表达式：

`"Hello World!".match(/l/g);`

将返回此数组：

`["l", "l", "l"]`

但是，在没有标志的情况下调用相同的函数`g`将返回一个数组，其第一个元素是匹配的模式。此后的任何元素都将匹配括号内的每个表达式。例如，表达式：

`"Hello World!".match(/(Hell)o World(!)/);`

将方便地返回此数组：

`["Hello World!", "Hell", "!"]`

# mysql - 使用 where = false 的 rails 范围，在 heroku 上的工作方式不同

> ID：14016977
> 
> 赞同：1
> 
> 时间：2012-12-24T04:12:15.540
> 
> 标签：mysql, ruby-on-rails, postgresql, heroku

我的代码上有这个：

```
scope :to_send, where(:sent => false) 
```

在本地使用 mysql 我看到了这个：

```
`scheduled_messages`.`sent` = 0 
```

在 Heroku 上（使用 pg）：

```
"scheduled_messages"."sent" = 'f' 
```

为什么？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-24T04:31:39.747

PostgreSQL 有一个本地[`boolean`](http://www.postgresql.org/docs/current/interactive/datatype-boolean.html)类型，其中 true 由字符串字面量表示，`'t'`而 false 由`'f'`（还有其他字面量，但这些是最常见的字面量）。MySQL 没有本机布尔类型，而是使用 C 样式的整数作为布尔值。

Rails 的 MySQL 和 PostgreSQL 适配器负责将原生 Ruby 值（例如`false`）转换为相关数据库的等效值（`0`对于 MySQL，`'f'`对于 PostgreSQL）。

看起来您是在 MySQL 之上开发，但在 PostgreSQL 上部署。布尔处理的差异是您最不担心的。您确实应该在同一个数据库之上进行开发和部署。

# jsp - IBM Portal 中的 Struts2 动态 url 操作

> ID：14016978
> 
> 赞同：0
> 
> 时间：2012-12-24T04:12:15.883
> 
> 标签：jsp, url, dynamic, struts2, action

我正在尝试使用 struts2 url 标签创建一个动态菜单栏。我从 webservice 获得了菜单列表，并尝试为每个菜单生成相应的 URL。我试过这段代码

```
<s:iterator value="roleMenus" id="child">
<s:if test="parentCode == #parent.childCode">
    <s:if test="childCode != #parent.childCode">
        <c:set var="link"><s:property value='menuLink'/></c:set>
        <% menulink = (String)pageContext.getAttribute("link"); 
            System.out.println(menulink);%>
        <li><a id='<s:property value="menuLink"/>' name="menulink" href="<s:url action='xxxxx'/>"><s:property value="menuName"/></a></li>
    </s:if>
</s:if> 
```

在 scriptlet 中传递 Action 属性值

```
<%=menuLink%> 
```

或 JSTL 变量

```
${link} 
```

但它会引发异常

```
According to TLD or attribute directive in tag file, attribute "[action]" does not accept any expressions. 
```

所以我想这不能在 Action 属性中使用任何类型的动态表达式来完成。

我正在考虑在调用 s:url 标记时覆盖生成 URL 的方法，但我不知道该怎么做。它在 IBM Portal 中生成这样的 url：

```
/wps/myportal/!ut/p/b1/jZDbToNAFEW_pR9gzhmG6-OEyMVhUGCowAsh2BiQS6yI0q-X9qkm1va87WSt7J0DBeTE1C2dWhrVIYNiqObmtZqacai6Yy70MmSpw9mTio9oOujHWkKpESnoHoX8HEBCcAU8LVWEUNZ4m2-7zFONANEMXA195qWxFVGKjF7zn6H4jfyx4AT8V3EC8MIxhNAb-x3kK2Zc3GIiZHOz-4LtMO779XUSMlTLpF3GT56ME3_J94ttvi_p24T1HEoctu1yCKRNs28tFtI2Hg6ilC2JCLO7KKxbkWA_obgj3Knvmctn7n9soC86x_JbNffZ5gdG203G/dl4/d5/L0lDU0NtbUEhL3dPb0JKaVVNcHJDSy80RzNhRFVRZy9aN19OQVVGS0FQNDBPMDhGMElSNVMzMzdRMjA4MC8lMHZpZXclMEFwcExvZw!!/ 
```

有没有人对此有任何想法？任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T04:54:48.273

这是生成动态 url 的示例示例。我希望这可以帮助你。

```
<s:set name="days" value="{'monday', 'tuesday', 'wednesday','thrusday','friday' }" />

<s:iterator var="day" value="#days">
    <s:url action="%{#day}" var="urlTag"></s:url>
    <s:property value="%{urlTag}"/><br/>
</s:iterator> 
```

# c# - DataTrigger 绑定到属性

> ID：14016979
> 
> 赞同：2
> 
> 时间：2012-12-24T04:12:23.317
> 
> 标签：c#, wpf, button, styles, datatrigger

我试图在属性值更改时更改控件的外观。我正在使用下面的 XAML 和 C# 代码，但是当我单击更改属性 myProperty 值的按钮时没有任何反应，除非我第一次运行应用程序。有什么建议么？

```
 <Window x:Class="WpfApplication3.MainWindow"

        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="MainWindow" Height="350" Width="525">

    <Grid>
        <Button Height="34" HorizontalAlignment="Left" x:Name="toggleBroadcast" VerticalAlignment="Top" Width="133" Margin="180,0,0,0">
            <Button.Style>
                <Style x:Name="bb" TargetType="{x:Type Button}">
                    <Setter Property="Content" Value="Original Content"/>
                    <Style.Triggers>
                        <DataTrigger Binding="{Binding Path=myProperty}" Value="true">
                            <Setter Property="Content" Value="IS TRUE"/>
                        </DataTrigger>
                        <DataTrigger Binding="{Binding Path=myProperty}" Value="false">
                            <Setter Property="Content" Value="IS FALSE"/>
                        </DataTrigger>
                    </Style.Triggers>

                </Style>
            </Button.Style>
         </Button>
        <Button Content="Click on This Button" HorizontalAlignment="Left" Width="158" Click="Button_Click_1" Height="34" VerticalAlignment="Top"/>
   </Grid>
</Window>

using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Threading.Tasks;
using System.Windows;
using System.Windows.Controls;
using System.Windows.Data;
using System.Windows.Documents;
using System.Windows.Input;
using System.Windows.Media;
using System.Windows.Media.Imaging;
using System.Windows.Navigation;
using System.Windows.Shapes;

namespace WpfApplication3
{
    public partial class MainWindow : Window
    {
        Boolean _myProperty = false;
        public MainWindow()
        {
            DataContext = this;
            InitializeComponent();
        }
        public Boolean myProperty
        {
            get
            {
                return _myProperty;
            }
        }

        private void Button_Click_1(object sender, RoutedEventArgs e)
        {
            _myProperty = !_myProperty;
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-24T04:39:51.877

如果您不使用 a `DependencyProperty`，则必须实施`INotifyPropertyChanged`，以便它可以通知 Xaml 该属性已更改

```
public partial class MainWindow : Window, INotifyPropertyChanged
{
    private bool _myProperty = false;
    public MainWindow()
    {
        InitializeComponent();
        DataContext = this;
    }

    public bool myProperty
    {
        get { return _myProperty; }
        set { _myProperty = value; NotifyPropertyChanged("myProperty"); }
    }

    private void Button_Click_1(object sender, RoutedEventArgs e)
    {
        myProperty = !myProperty;
    }

    public event PropertyChangedEventHandler PropertyChanged;
    /// <summary>
    /// Notifies the property changed.
    /// </summary>
    /// <param name="property">The property name that changed.</param>
    public void NotifyPropertyChanged(string property)
    {
        if (PropertyChanged != null)
        {
            PropertyChanged(this, new PropertyChangedEventArgs(property));
        }
    }
} 
```

或使用`DependencyProperty`

```
public partial class MainWindow : Window
{
    public MainWindow()
    {
        InitializeComponent();
        DataContext = this;
    }

    public bool myProperty
    {
        get { return (bool)GetValue(myPropertyProperty); }
        set { SetValue(myPropertyProperty, value); }
    }

    // Using a DependencyProperty as the backing store for myProperty.  This enables animation, styling, binding, etc...
    public static readonly DependencyProperty myPropertyProperty =
        DependencyProperty.Register("myProperty", typeof(bool), typeof(MainWindow), new UIPropertyMetadata(false));

    private void Button_Click_1(object sender, RoutedEventArgs e)
    {
        myProperty = !myProperty;
    }
} 
```

# php - 文件夹文件权限不足

> ID：14016987
> 
> 赞同：0
> 
> 时间：2012-12-24T04:13:21.820
> 
> 标签：php, phpmyadmin, file-permissions

我收到**您无权访问此服务器上的 /phpMyEdit/phpMyEdit.class.php 的权限。**尝试直接链接此处时出错。

[http://reports.caredatapro.com/phpMyEdit/phpMyEdit.class.php](http://reports.caredatapro.com/phpMyEdit/phpMyEdit.class.php)

子文件夹和文件都存在，权限修改为766。

我在这里检查时还缺少什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T05:23:07.060

我认为这个链接可以帮助你解决你的问题：
[链接一](https://stackoverflow.com/questions/10600795/wamp-server-error-forbidden-you-dont-have-permission-to-access-phpmyadmin-on)
[链接二](https://stackoverflow.com/questions/8366976/wamp-error-forbidden-you-dont-have-permission-to-access-phpmyadmin-on-this-s)

阅读它们并不需要很长时间。

大多数时候你只需要编辑两个文件：

> 1 - httpd.conf
> 
> 2 - phpmyadmin.conf

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T17:06:12.157

该文件用于包含，而不是用于显示页面。您要浏览的文件是“设置”文件： [http ://reports.caredatapro.com/phpMyEdit/phpMyEditSetup.php](http://reports.caredatapro.com/phpMyEdit/phpMyEditSetup.php)

这就是您用来生成文件的内容，然后您将使用该文件来浏览/编辑/删除您的数据等。

# java - 如何在 Web 应用程序容器上为特定用户创建文件夹？

> ID：14016991
> 
> 赞同：1
> 
> 时间：2012-12-24T04:14:00.507
> 
> 标签：java, web-applications

我想在我的服务器上创建一个文件夹，对应于我的 Web 应用程序中的每个用户。

我如何通过java动态创建一个新文件夹？我希望该新文件夹包含与特定用户相对应的资源。我现在可以通过直接提供该资源的 URL 来作为客户端访问这些资源吗例如..

```
 http://localhost:8080/myapp/newfolder/a.pdf 
```

那可能吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-24T04:41:26.163

我不会直接通过 URL 公开文件夹，因为这将是一个严重的安全问题，如果理解命名方案，一个用户可以访问另一个用户的文件夹。

相反，我会

*   在无法通过 URL 访问的单独位置按用户名创建文件夹，使用[`java.io.File.mkdir()`](http://docs.oracle.com/javase/6/docs/api/java/io/File.html#mkdir%28%29).
*   编写一个简单的 Servlet，它会从路径中读取[`servletRequest.getPathInfo()`](http://docs.oracle.com/javaee/6/api/javax/servlet/http/HttpServletRequest.html#getPathInfo%28%29)、标识用户名以及要提供的文件。为此，servlet 类和 URL 模式应定义如下：

    ```
    <servlet-mapping>
        <servlet-name>read-file</servlet-name>
        <url-pattern>/read-file/*</url-pattern>
    </servlet-mapping> 
    ```

    要访问`a.pdf`用户文件`xyz`，URL 将是`http://server/read-file/xyz/a.pdf`.

*   检查访问 URL 的用户是否与路径信息中找到的用户名相同。

*   [在和](http://en.wikipedia.org/wiki/List_of_HTTP_header_fields#Responses)标头中设置适当的值后，通过 a in 块读取文件`FileInputStream`，例如 1MB，并写入（中间不存储任何位置） 。`ServletOutputStream`[`Content-Type``Content-Disposition`](http://en.wikipedia.org/wiki/List_of_HTTP_header_fields#Responses)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-24T04:38:26.267

只需检查一下。 [在 Windows 和 Linux 机器上使用 Java 程序创建一个新文件夹](https://stackoverflow.com/questions/4427270/create-a-new-folder-using-java-program-on-windows-and-linux-machines)

此外，您可以存储目录和相应用户的路径映射。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-24T04:39:34.800

您可以使用 Java 创建一个目录`new File("path"+File.seperator+"foldername").mkdir()`

我假设您的目标是在 web 应用程序的 war 文件夹中创建它。这不是推荐的方法，因为如果您重新部署您的战争，您将丢失用户数据。

更好的方法是使用系统属性将存储库路径配置到您的应用程序中

例如：repository=D:\userdata 并在此 repo 中创建您的文件夹。然后您可能需要一个自定义 servlet 以允许下载此文件，您必须阅读该文件并将其放入 servlet 响应中。此文件夹不会受到重新部署war文件的影响。

即使这种方法也是错误的，因为您无法在这种方法中扩展到多个应用服务器，最好将用户数据存储在中央存储库（amazon s3，机架空间文件）或数据库中。

# c++ - 对 -Waggregate-return 的目的/行为感到困惑？

> ID：14016993
> 
> 赞同：10
> 
> 时间：2012-12-24T04:14:30.613
> 
> 标签：c++, gcc, g++, warnings, gcc-warning

在查看[GCC 的警告选项](http://gcc.gnu.org/onlinedocs/gcc/Warning-Options.html#Warning-Options)时，我遇到了*-Waggregate-return*。

> **-Waggregate-return**
> 如果定义或调用任何返回结构或联合的函数，则发出警告。（在可以返回数组的语言中，这也会引发警告。）

* * *

**引发警告的小例子：**

```
class foo{};
foo f(void){return foo{};}
int main(){} 
```

> $ g++ -std=c++0x -Waggregate-return -o main main.cpp
> main.cpp：在函数'foo f()'中：
> main.cpp:2:5：警告：函数返回一个聚合[-Waggregate-返回]

* * *

**另一个不会引起警告的小例子：**

```
#include <string>
std::string f(void){return "test";}
int main(){} 
```

* * *

使用 -Waggregate-return 有什么好处？
为什么有人要被警告这一点？
另外，std::string 不是一个类吗？-为什么我不警告第二个示例中的“返回的聚合”？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-24T04:23:36.667

在@AlokSave 发表评论之后，这里是稍后编辑的答案：

三是此编译器标志的两种可能解释。由于有关它的文档很少，因此它的原始含义有些不清楚，但主要有两种可能的解释：

1) 警告用户返回聚合对象，让他知道如果返回聚合对象（分配在堆栈上），堆栈可能会溢出。

2）显然，一些旧的 C 编译器不支持返回聚合（你必须返回一个指针）。

这两个哪个是最好的，我很难判断。但是，可以在以下链接中找到有关此标志的更多相关信息：

[http://bytes.com/topic/c/answers/644271-aggregate-return-warnings](http://bytes.com/topic/c/answers/644271-aggregate-return-warnings)

[https://lists.gnu.org/archive/html/bug-gnulib/2012-09/msg00006.html](https://lists.gnu.org/archive/html/bug-gnulib/2012-09/msg00006.html)

引用后一个链接：

> > > > 在我熟悉的 GNU 应用程序（Emacs、coreutils、...）中，我们只需禁用 -Waggregate-return。这是一个完全不合时宜的警告，因为它的动机是支持与不允许返回结构的 C 编译器的向后兼容性。那些编译器早已死去，不再具有实际意义。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-24T04:22:21.967

聚合在 C 和 C++ 标准中定义。C 版本说（C99 6.2.5 Types/20-21）：

> 结构类型描述了一个顺序分配的非空成员对象集（在某些情况下，一个不完整的数组），每个对象都有一个可选的指定名称和可能的不同类型。
> 
> [...]
> 
> 算术类型和指针类型统称为标量类型。数组和结构类型统称为聚合类型。

C++ 版本说（N3485 8.5.1 [dcl.init.aggr]/1）：

> 聚合是一个数组或一个类（第 9 条），没有用户提供的构造函数（12.1），没有用于非静态数据成员的大括号或等号初始化器（9.2），没有私有或受保护的非静态数据成员（第 11 条），没有基类（第 10 条），也没有虚函数（10.3）。

您的第二个示例（带有`std::string`）不会触发警告，因为`std::string`具有用户提供的构造函数；并且有私有数据成员。

我怀疑这个警告的存在是因为在 C 中返回聚合被认为是糟糕的风格；在那种语言中，最好传递一个 out 指针。我认为它不适用于 C++。但我无法用任何数据证实这一点。

# webserver - 在 CentOS 中设置 Web 服务器

> ID：14016994
> 
> 赞同：1
> 
> 时间：2012-12-24T04:14:47.813
> 
> 标签：webserver, centos

嘿伙计们，我有一个大问题。我一直在尝试在 CentOS 中设置我的网络服务器。我已经成功设置了 LAMP，但我的朋友无法访问它。我该如何解决？以及如何在 Apache 中设置域名？我尝试将 ServerAddress 更改为喜欢*www.example.com*，但是当我在 Chrome 中输入我的服务器地址时，它说找不到 www.example.com。可能是什么问题呢？请帮我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-24T04:25:29.570

## 域名系统

在 apache 中设置 ServerName 不会影响其他计算机。您的计算机有一个 IP 地址。DNS 是如何将 example.com 之类的名称转换为 IP 地址的方式。

暂时尝试在浏览器中使用您的 IP 地址。您可以使用该`ifconfig`命令找到您的 IP 地址。然后在您的浏览器中为您的 IP 地址加上 http:// 前缀。

如果您没有公共 IP 地址（在路由器后面等），则只有您网络上的人可以访问它。 [http://192.168.XX](http://192.168.X.X)是私网IP，还有几个

伪造 DNS 的一种快速方法是使用“主机”文件。

如果所有这些都已设置但仍然无法正常工作，请检查防火墙...

## 防火墙

尝试禁用防火墙以测试访问。

```
service iptables stop && sleep 60 && service iptables start 
```

这将关闭您的防火墙 1m。如果这是问题所在，请在防火墙中为端口 80 打开一个洞并重新启动它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-24T04:24:57.727

首先，您需要一个 ServerName 指令。请参阅[http://httpd.apache.org/docs/2.2/vhosts/name-based.html](http://httpd.apache.org/docs/2.2/vhosts/name-based.html)

其次，DNS 必须将该服务器名称解析为正确路由到运行 Apache 的机器的 IP。