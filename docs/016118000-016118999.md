# StackOverflow 问答 16118000-16118999

# sql-server - How to user previous resultset into next query in SQL Server

> ID：16118002
> 
> 赞同：2
> 
> 时间：2013-04-20T07:46:01.273
> 
> 标签：sql-server, tsql

I want to generate access token if username and password will match in users table. But how can I use previous returned value to next insert query? I have marked missing value with ###I don't know###.

```
CREATE PROCEDURE [dbo].[GetAccessToken]
    @userId varchar(50),
    @password varchar(50)
AS
   SELECT Id 
   FROM Users 
   WHERE UserId = @userId AND Password = @password 

   IF @@ROWCOUNT != 0 
   BEGIN
       SET @token = NEWID();

       INSERT INTO AccessTokens (Token, UserId) 
       VALUES(CONVERT(varchar(255), @token), ###I Don't Know###)
        END
       RETURN 0
   END 
```

Please help me. Thanks, in advance.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-20T08:49:59.397

只需将`@userId`作为您的第二个参数传递给`INSERT`

```
INSERT INTO AccessTokens (Token, UserId) 
VALUES(CONVERT(varchar(255), @token), @userId) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-20T10:10:14.343

使用带有 INSERT .. SELECT .. 模式的选项

```
CREATE PROCEDURE [dbo].[GetAccessToken]
@userId varchar(50),
@password varchar(50)
AS
BEGIN
  INSERT INTO AccessTokens (Token, UserId)
  SELECT CONVERT(varchar(255), NEWID()), Id
  FROM Users 
  WHERE UserId = @userId AND Password = @password
END 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-20T08:47:13.477

尝试这个：

```
CREATE PROCEDURE [dbo].[GetAccessToken]
    @userId varchar(50),
    @password varchar(50)
AS
   DECLARE @ID INT
   SELECT @ID = Id 
   FROM Users 
   WHERE UserId = @userId AND Password = @password 

   IF (@ID IS NOT NULL )
   BEGIN
       SET @token = NEWID();

       INSERT INTO AccessTokens (Token, UserId) 
       VALUES(CONVERT(varchar(255), @token), @ID)

       RETURN 0
   END 
```

# android - 在没有 paddingLeft 属性的情况下实现相同的结果

> ID：16118003
> 
> 赞同：0
> 
> 时间：2013-04-20T07:46:01.583
> 
> 标签：android

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:orientation="vertical"
    android:padding="5dip" >

    <LinearLayout
        android:id="@+id/linearLayout1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_marginRight="5dip"
        android:padding="1dip" >

        <TextView
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:gravity="left"
            android:paddingLeft="20dp"
            android:text="Total Pregnancies"
            android:textColor="#000000" />

        <TextView
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:gravity="left"
            android:paddingLeft="30dp"
            android:text="10"
            android:textColor="#000000" />

        <TextView
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:gravity="left"
            android:paddingLeft="160dp"
            android:text="Full Term"
            android:textColor="#000000" />

        <TextView
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:gravity="left"
            android:paddingLeft="75dp"
            android:text="11"
            android:textColor="#000000" />

        <TextView
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:gravity="left"
            android:paddingLeft="190dp"
            android:text="Premature"
            android:textColor="#000000" />

        <TextView
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:gravity="left"
            android:paddingLeft="30dp"
            android:text="12"
            android:textColor="#000000" />

    </LinearLayout>

    <LinearLayout
        android:id="@+id/linearLayout2"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignLeft="@+id/linearLayout1"
        android:layout_below="@+id/linearLayout1"
        android:layout_marginTop="35dp"
        android:padding="1dip" >

        <TextView
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:gravity="left"
            android:paddingLeft="20dp"
            android:text="Multiples"
            android:textColor="#000000" />

        <TextView
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:gravity="left"
            android:paddingLeft="85dp"
            android:text="16"
            android:textColor="#000000" />

        <TextView
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:gravity="left"
            android:paddingLeft="160dp"
            android:text="Living"
            android:textColor="#000000" />

        <TextView
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:gravity="left"
            android:paddingLeft="95dp"
            android:text="17"
            android:textColor="#000000" />
    </LinearLayout>

    <LinearLayout
        android:id="@+id/linearLayout3"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignLeft="@+id/linearLayout1"
        android:layout_centerVertical="true"
        android:padding="1dip" >

        <TextView
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:gravity="left"
            android:paddingLeft="20dp"
            android:text="Ab Included"
            android:textColor="#000000" />

        <TextView
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:gravity="left"
            android:paddingLeft="70dp"
            android:text="13"
            android:textColor="#000000" />

        <TextView
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:gravity="left"
            android:paddingLeft="160dp"
            android:text="Ab Spontaneous"
            android:textColor="#000000" />

        <TextView
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:gravity="left"
            android:paddingLeft="30dp"
            android:text="14"
            android:textColor="#000000" />

        <TextView
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:gravity="left"
            android:paddingLeft="190dp"
            android:text="Ectopics"
            android:textColor="#000000" />

        <TextView
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:gravity="left"
            android:paddingLeft="35dp"
            android:text="15"
            android:textColor="#000000" />
    </LinearLayout>

</RelativeLayout> 
```

这就是屏​​幕的外观，谁能告诉我如何实现这种布局。我想出了布局，但似乎它不适合所有屏幕。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T07:49:58.217

使用 TableLayout 这里是[一个例子](http://www.mkyong.com/android/android-tablelayout-example/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-20T08:18:26.843

使`LinearLayout`宽度`fill_parent`使用屏幕的整个宽度。然后对于每个`TextView`，将 设置`layout_width`为 0dp，并设置`layout_weight`为您希望该视图具有的屏幕比例。

在填充中，指定不同单元格之间所需的最小数量。

例如，如果您希望文本占据数字的两倍空间，请使用以下代码：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:orientation="vertical"
    android:padding="5dip" >

    <LinearLayout
        android:id="@+id/linearLayout1"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_marginRight="5dip"
        android:padding="1dip" >

        <TextView
            android:layout_width="0dp"
            android:layout_weight="2"
            android:layout_height="wrap_content"
            android:gravity="left"
            android:paddingLeft="5dp"
            android:text="Total Pregnancies"
            android:textColor="#000000" />

        <TextView
            android:layout_width="0dp"
            android:layout_weight="1"
            android:layout_height="wrap_content"
            android:gravity="left"
            android:paddingLeft="5dp"
            android:text="10"
            android:textColor="#000000" />

        <TextView
            android:layout_width="0dp"
            android:layout_weight="2"
            android:layout_height="wrap_content"
            android:gravity="left"
            android:paddingLeft="5dp"
            android:text="Full Term"
            android:textColor="#000000" />

        <TextView
            android:layout_width="0dp"
            android:layout_weight="1"
            android:layout_height="wrap_content"
            android:gravity="left"
            android:paddingLeft="5dp"
            android:text="11"
            android:textColor="#000000" />

        <TextView
            android:layout_width="0dp"
            android:layout_weight="2"
            android:layout_height="wrap_content"
            android:gravity="left"
            android:paddingLeft="5dp"
            android:text="Premature"
            android:textColor="#000000" />

        <TextView
            android:layout_width="0dp"
            android:layout_weight="1"
            android:layout_height="wrap_content"
            android:gravity="left"
            android:paddingLeft="5dp"
            android:text="12"
            android:textColor="#000000" />

    </LinearLayout>
</RelativeLayout> 
```

# sql-server-2008 - Different Items in single row to get the total amount of that order

> ID：16118009
> 
> 赞同：1
> 
> 时间：2013-04-20T07:46:33.293
> 
> 标签：sql-server-2008

I Have an order table in which i insert all the items that my customer placed in his order in single row.like

`Table_ORDER` ( `Od_id` is primary key auto incrementd)

```
Od_Id    Cust_Name  Quantity of 101(int)    Quantity of 102       Quantity of 103
-----     -------   --------------------       ---------------    --------------
1          John          5                          4                  7
2           Kim           4                          3                  2 
```

* * *

Another Table of Price is like

```
Table_ Price 

Prod_ID      Price (money)
-------      ------
101           5.2
102           2.5
103           3.5 
```

* * *

Now I want to get the total amount of specific order placed by customer. Problem is that if i use differnt rows for different item that Order id will be changed and if i use single row then How I calculate the total price as i can put jst single Prod_ID colum.

Kindly Guide me and send some solutions

Regards

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T08:07:34.363

我确实看到表设计违反了大多数设计值，表之间没有外键。

但是您的问题的最坏情况解决方案在这里：

```
select ( q101*price101.price+q102*price102.price) as 'Total Price' from
(select p.id, q101, price from `order`, price p where p.id=101) as price101,
(select p.id, q102, price from `order`, price p where p.id=102) as price102,
(select p.id, q103, price from `order`, price p where p.id=103) as price103 
```

我只是想建立表来连接你的两个表，然后基于它进行查询。

但随着产品数量的增加，它变得乏味。我真的建议考虑一个设计替代方案。

注意：我选择了这样的列名： 101 的数量 = q101

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-20T19:15:12.817

“问题是，如果我对不同的项目使用不同的行，则订单 ID 将被更改”。如果您通过将订购的产品和数量移动到通过外键与主订单表相关的单独表中来更改数据库的设计，这很容易解决。

这是一个非常简单的例子：

三个表，定义如下：

```
表顺序
------------
OrderID（身份列）
顾客姓名

表订单详情
------------------
OrderID（这是 Order 表中的外键）
ProductID（这是 Products 表中的外键）
数量

餐桌产品
--------------
产品编号
价格

```

现在，您可以通过执行如下查询来获取给定订单的总数：

```
SELECT SUM(ISNULL(od.Quantity, 0) * p.Price)
FROM   Orders o
JOIN   OrderDetail od
       ON o.OrderID = od.OrderID
JOIN   Products p
       ON od.ProductID = p.ProductID
WHERE  OrderID = 1 
```

对于客户 1 (John)，结果为 60.50。对于客户 2 (Kim)，结果为 35.30（基于您问题中的数据）。

这种设计的好处是允许您将产品添加到 Products 表中，而无需更改 Orders 表的架构（列）。

同样，这是一个非常简单的示例，只是为了说明这个概念。

# c - 语法高亮运算符，例如 *,->

> ID：16118011
> 
> 赞同：2
> 
> 时间：2013-04-20T07:46:56.663
> 
> 标签：c, vim, syntax-highlighting

我在 OS X 上使用 spf-13 vim 发行版（这个问题并不特定于这个发行版）。我尝试了几种不同的配色方案（solarized、default、desert），但它们都没有突出 C 特定的运算符，例如 *、-> 等。进一步阅读表明，这取决于定义的正则表达式来识别这些运算符。我对 vim 脚本/正则表达式还不够精通，无法在配色方案上尝试这种修改。

是否可以修改 solarized 或任何其他方案以在 C 中突出显示这些运算符？如果有已经支持这一点的配色方案，那将是理想的。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-20T08:09:09.150

颜色方案仅定义语法文件（和默认组）中定义的语法/突出显示组的颜色。

由于默认的 C 语法文件似乎没有为这些运算符（或任何其他运算符）定义任何内容，因此您无法对颜色方案进行任何操作以使它们脱颖而出。这是应该修改的语法文件......或扩展。

[此语法文件](http://www.vim.org/scripts/script.php?script_id=3064)扩展了默认语法文件，其中包括运算符。

# php - 检查 mysql 表上的值并选择设置为“1”的值

> ID：16118013
> 
> 赞同：-1
> 
> 时间：2013-04-20T07:47:04.633
> 
> 标签：php, mysql

我都看了一遍。我无法弄清楚这一点。

```
<?php
session_start();
if (!empty($_POST[username]))
{
    require_once("connect.php");

    // Check if he has the right info.
    $query = mysql_query("SELECT * FROM members
                            WHERE username = '$_POST[username]'
                            AND password = '$_POST[password]'")
    or die ("Error - Couldn't login user.");

    $row = mysql_fetch_array($query)
    or die ("Error - Couldn't login user.");

    if (!empty($row[username])) // he got it.
    {
        $_SESSION[username] = $row[username];
        echo "Welcome $_POST[username]! You've been successfully logged in.";
        exit();
    }
    else // bad info.
    {
        echo "Error - Couldn't login user.<br /><br />
            Please try again.";
        exit();
    }

    if($isadmin["admin"]==1)
{
echo $admin;
}
else
{
}

}

$admin = <<<XYZ
<div id="admintab">
Admin &nbsp;&#0187;
<div id="admin">
ADMIN PANEL
<div id="exitadmin">
</div>
<div id="artistline" />
</div>
</div>
XYZ;

?> 
```

我确实知道这个`$admin`价值正在发挥作用。我已经测试过了。基本上，我有一个注册系统。默认情况下，它将您的管理员值设置为“0”。但是，假设我想添加一个管理员。我通过mysql将'0'更改为'1'。我想知道如何让 php 找到数据库中管理员值设置为“1”的用户（行名：admin），并只向他们显示管理面板。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T07:57:41.120

你为什么用

`if($isadmin["admin"]==1)`

正如你所拥有的

`$row = mysql_fetch_array($query)`

所以转换

`if($isadmin["admin"]==1)`

到

`if($row["admin"]==1)`

您应该在插入之前检查值并选择数据并使用

`mysql_real_escape_string($_POST['username'])`

使sql注入不适用

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-20T07:51:56.333

首先，我有义务指出，由于 SQL 注入，不过滤 $_POST（以及 $_GET 和 $_COOKIE 等）是非常危险的。其次，变量 $isadmin 在您定义它之前不会神奇地存在。

我建议设计一个功能更强大的用户组系统，但只是为了回答这个问题，您要检查的变量是 $row["is_admin"]，因为 is_admin 是表中的有效列。此外，您不需要在 PHP 中执行 if ($row["is_admin"] == 1) - 1 评估为 TRUE 的操作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-20T08:06:37.543

您需要更改`if($isadmin["admin"]==1)`为`if($row['admin'] == 1)`- 如果 1 和 0 是唯一答案，您可以省略该`== 1`部分，因为 1 始终为真，0 为假。

必须要指出的是，以纯文本形式将密码存储在数据库中是一个坏主意，您至少应该在存储它们之前对它们进行哈希处理。就像`$password = hash('sha256', $salt.$_POST['password'])`在注册和登录阶段一样。

我还应该指出，您不应该通过查询将裸值输入数据库，如果您正在对其进行哈希处理，则无需担心密码，但如果您不是，您需要这样做并且您需要用户名无论如何，否则任何人都可以在您的数据库中运行 SQL 查询：

`$username = mysql_real_escape_string($_POST['username'])`

# c# - 使用 ThreadStart 我的 UI 卡住了

> ID：16118017
> 
> 赞同：-1
> 
> 时间：2013-04-20T07:47:36.013
> 
> 标签：c#, multithreading, user-interface

我是线程的新手，我的 UI 在进程完成之前没有响应。任何人都告诉我这里有什么问题。

减少代码：

```
 static string replacedname = "", replacedwith;
            private void startProcess(string FPath, string RNo)
            {
                if (FPath != "" && RNo != "")
                {
                    ....

                    UnZip(FPath, Path.GetDirectoryName(FPath) + "\\" + replacedwith);

                    DirectoryInfo dir = new DirectoryInfo(Path.GetDirectoryName(FPath) + "\\" + replacedwith);
                    foreach (FileInfo File1 in dir.GetFiles("*.zip"))
                    {
                        UnZip(File1.FullName, Path.GetDirectoryName(File1.FullName));
                        File.Delete(File1.FullName);
                    }

                }

                replacedname = "";
                MessageBox.Show("Completed");

            }
            private void button1_Click(object sender, EventArgs e)
            {

                ThreadStart threadStart = delegate() { startProcess(textBox1.Text, textBox2.Text); };

                threadStart.BeginInvoke(null, null);

            }
            private void UnZip(string zipToExtract, string unzipDirectoryl) // Extract zip/lot file in same directory
            {

                if (this.progressBar1.InvokeRequired)
                {
                    progressBar1.Invoke(new Action(delegate() { UnZip(zipToExtract, unzipDirectoryl); }));

                }
                else if (this.label3.InvokeRequired)
                {
                    label3.Invoke(new Action(delegate() { UnZip(zipToExtract, unzipDirectoryl); }));
                }
                else
                {                        ....
                            progressBar1.Value += 1;
                            progressBar1.Refresh();
                            label3.Text = ((progressBar1.Value * 100) / (progressBar1.Maximum)).ToString();
                            label3.Refresh();
                        ...
                }
            }

            private void status(string msg, Color selcColor)
            {
                if (this.richTextBox1.InvokeRequired)
                {
                    richTextBox1.Invoke(new Action(delegate() { status(msg, selcColor); }));
                }
                else
                {
                    richTextBox1.SelectionStart = richTextBox1.Text.Length;
                    var oldcolor = richTextBox1.SelectionColor;

                    richTextBox1.SelectionColor = selcColor;
                    richTextBox1.AppendText(msg + "\n");
                    richTextBox1.SelectionColor = oldcolor;
                    richTextBox1.Refresh();
                    richTextBox1.ScrollToCaret();
                }
            } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-20T08:09:10.373

替换你的代码

```
 private void button1_Click(object sender, EventArgs e)
        {
            ThreadStart threadStart = delegate() { startProcess(textBox1.Text, textBox2.Text); };
            threadStart.BeginInvoke(null, null);
        } 
```

和

```
 private void button1_Click(object sender, EventArgs e)
        {
            ThreadStart threadStart = delegate() { startProcess(textBox1.Text, textBox2.Text); };
            Thread thread = new Thread(threadStart);
            thread.Start();
        } 
```

这将使用您分配的委托启动一个新线程。
有关 MSDN 参考，请参见[此处](http://msdn.microsoft.com/en-us/library/xx3ezzs2.aspx)。

**编辑**

在您的`UnZip`-method 中，您正在做一些奇怪的事情

```
private void UnZip(string zipToExtract, string unzipDirectoryl){

            if (this.progressBar1.InvokeRequired)
            {
                progressBar1.Invoke(new Action(delegate() { UnZip(zipToExtract, unzipDirectoryl); }));

            }
            else if (this.label3.InvokeRequired) // why else if on another control???
            {
                label3.Invoke(new Action(delegate() { UnZip(zipToExtract, unzipDirectoryl); }));
            }
            else
            {                        ....
                        progressBar1.Value += 1;
                        progressBar1.Refresh(); //why use Refresh()?
                        label3.Text = ((progressBar1.Value * 100) / (progressBar1.Maximum)).ToString();
                        label3.Refresh();
                    ...
            }
        } 
```

您不能调用`progressbar1.InvokeRequired`，如果它返回错误`else if`，请在标签控件上使用！您必须`if/else`对每个控件使用单独的。

```
if (this.progressBar1.InvokeRequired)
     progressBar1.Invoke(new Action(delegate() { progressbar1.Value++; }));
else 
     progressbar1.Value++; //pseudo-code 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-20T08:59:29.880

您应该在 WinForms 中使用 BackgroundWorker 控件进行异步操作。有关其使用细节和示例，请参阅[此](http://msdn.microsoft.com/en-IN/library/system.componentmodel.backgroundworker.aspx)MSDN 文章。

# jquery - 动态更改 kendoui 中工具提示的内容

> ID：16118020
> 
> 赞同：6
> 
> 时间：2013-04-20T07:48:17.127
> 
> 标签：jquery, jquery-ui, kendo-ui

我有拖放功能。拖动时`element`，我想动态设置元素的位置并将其显示在`tooltip`. 我怎么能用 kendoui 做到这一点。

我已经定义为：

```
<div id='drag'><p>Drag me</p></div> 
```

我已将工具提示定义为：

```
$("#drag").kendoToolTip({
   position:"top",
   content: "Initial"
}); 
```

用于拖动

```
 $("#drag").draggable({
   drag: function(){
       $("#drag").data("kendoToolTip").content("Dragging");
    },
   stop: function(){
      $("#drag").data("kendoToolTip").content("Drag stopped");
    } 
 }); 
```

我想在`div`不断地显示工具提示`dragging`。我该怎么做 任何帮助表示赞赏

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-09-20T14:35:14.667

试试这个朋友，

```
 $("#drag").data("kendoTooltip").options.content = "set content here...";

 $("#drag").data("kendoTooltip").refresh(); 
```

# drupal - drupal multi site setup for a migrationed copy

> ID：16118021
> 
> 赞同：0
> 
> 时间：2013-04-20T07:48:25.617
> 
> 标签：drupal, drupal-6, apache2

drupal multisite setup dump folder configuration:

We migrated a drupal folder from some server to new server. And that dump was put in a fresh drupal 6 folder with old db structure and the folder structure is as :

*   drupal/sites/www.site1.com
*   drupal/sites/www.site2.com
*   drupal/sites/www.site3.com
*   and drupal folder is in data directory.

Now I am working on www.site1.com and it has to run with a domain name called dev.example.com. For that it is configured in etc/apache2/sites-available with Document root with data/drupal.

When I opened dev.example.com it is showing install.php page. How can I directly access settings.php/modules/themes from www.site1.php?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T19:36:05.033

将“www.site1.com”文件夹重命名为“dev.example.com”。

之后转到：/sites/dev.example.com/settings.php 并确保提到的数据库详细信息是正确的。

之后，您可以运行 dev.example.com/update.php 并清除 drupal 缓存。

希望这能解决问题。

# qt - Qt：在标签或按钮上显示动态组合的非英文文本

> ID：16118029
> 
> 赞同：0
> 
> 时间：2013-04-20T07:49:12.650
> 
> 标签：qt, translation, hindi, qpushbutton

我正在尝试在 QPushbutton 上显示一些动态生成的印地语文本。

请看下面的代码：

```
char nam[] = { 40, 9, 62, 9, 46, 9 };
QString nameStringInHindi(QString::fromRawData((QChar *)nam, 3));
qDebug() << nameStringInHindi; 
```

输出：“नाम”

但是如果我执行 ui->pushButton->setText(nameStringInHindi) //一些垃圾字符会被打印出来。

我也尝试过设置应用程序字体。

```
QFontDatabase::addApplicationFont("/usr/share/fonts/lohit-devanagari/Lohit-Devanagari.ttf") 
```

和 QApplication::setFont(QFont("Lohit Devanagari",12));

但它没有帮助。

有人可以帮我解决这个问题吗？非常感谢您的参与。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T10:26:12.513

我不知道*为什么*您的代码不起作用，但是向从原始数据创建的字符串添加一个空字符串以某种方式修复了该字符串。这适用于带有 Qt 5.0.1 的 Linux：

```
QString nameStringInHindi(QString::fromRawData((QChar*)nam, 3) + ""); 
```

# php - 使用ffmpeg上传视频并将其转换为flv时文件大小增加

> ID：16118030
> 
> 赞同：0
> 
> 时间：2013-04-20T07:49:22.843
> 
> 标签：php, video, ffmpeg, converter

我需要上传任何格式的视频并将其转换为flv。我正在使用 ffmpeg 执行此操作并使用此 ffmpeg 命令

```
ffmpeg -i input.mp4 -vcodec flv -sameq -ar 22050  -f flv output.flv 
```

该命令运行良好，但问题是输出文件的文件大小是原始输入文件的 5 倍，如果我减少它，它也会降低质量，需要帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T07:58:47.160

你的命令揭示了这一点

```
删除了选项“sameq”。如果您正在寻找一个选项来保存
质量（这不是 -sameq 的用途），使用 -qscale 0 或等效的
品质因数选项。

```

这对我有用

```
ffmpeg -i input.mp4 -vcodec flv -q:a 0 -q:v 0 -ar 22050 -f flv output.flv 
```

# ruby-on-rails - IF conditions in rails is not executing

> ID：16118031
> 
> 赞同：0
> 
> 时间：2013-04-20T07:49:24.000
> 
> 标签：ruby-on-rails, search, solr

I'm trying to do solr search based on the text entered by the user. Firts I've to check whether the entered text is store or brand or category. After checking that condition I want to display corresponding riesults which are in the MainNavigationUrls table using solr search. Here is the controller action. It is working fine if I enter any store and can get proper results. But it is not going inside brands loop if the storesearch is found nill. Please explain why it is not executing the second case.

```
def search_all
    @storesearch=Site.search do
      fulltext params[:text]
      with(:multibrand,1)
    end

    if(@storesearch.nil?)
      @brandsearch=Brand.search do
        fulltext params[:text]
      end
      if(@brandssearch.nil?)
        @itemcategorysearch=MainCategory.search do
          fulltext params[:text]
        end
        @itemcategorysearch.results.each do |result|
          @itemcategorysearch1=MainNavigationUrl.search do
            with :main_categoty_id, result.id
            with :department_id, params[:deptid].to_i
            paginate :page=>params[:page], :per_page=>45
          end
        end
      else
        @brandsearch.results.each do |result|
          @brandsearch1=MainNavigationUrl.search do
            with :brand_id, result.id
            with :department_id, params[:deptid].to_i
            paginate :page=>params[:page], :per_page=>45  
          end
        end

    else
      @storesearch.results.each do |result|
        @storesearch1=MainNavigationUrl.search do
          with :site_id, result.id
          with :department_id, params[:deptid].to_i
          paginate :page=>params[:page], :per_page=>45
        end
      end
    end
  end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T08:51:33.467

而不是.nil？，也许你可以使用.blank？更好？

```
@array = []
@array.nil? -false
@array.blank?  -true 
```

我认为您正在检查 @storesearch 是否包含某些元素？

# xcode - Using FaceBook SDK why do I get 'NSInvalidArgumentException', reason: '-[__NSDictionaryM length]: unrecognized selector sent to instance

> ID：16118032
> 
> 赞同：1
> 
> 时间：2013-04-20T07:49:27.433
> 
> 标签：xcode, facebook-graph-api

This code gives this error...why ?

'NSInvalidArgumentException', reason: '-[__NSDictionaryM length]: unrecognized selector sent to instance

```
 NSMutableDictionary *info = [NSMutableDictionary dictionaryWithObjectsAndKeys:longitude,@"longitude",latitude,@"latitude",nil];

 NSMutableDictionary *params = [NSMutableDictionary dictionaryWithObjectsAndKeys:  info, @"venue", nil];

 NSString *graphPath = [NSString stringWithFormat:@"/%@", (ID_OF_EVENT)];
 FBRequest *updateEvent = [FBRequest requestWithGraphPath:graphPath parameters:params HTTPMethod:POST];
 [updateEvent startWithCompletionHandler: ^(FBRequestConnection *connection,
                                                       NSDictionary* result,
                                                       NSError *error) { 
```

I am trying to set the venue longitude and latitude, but no matter what I try I keep getting the run time error. What am I missing ? I thought "venue" is a dictionary under the main event and has the valid keys "longitude" and "latitude". Have one my parameters got to be an Array and not a dictionary ?

Actually I suspect these elements are non writable and I probably have to add the address at @"location" to see the details appear.

Regards

# jakarta-ee - EclipseLink: Value of Column is null while Deleting in ManyToMany-Relationship

> ID：16118036
> 
> 赞同：1
> 
> 时间：2013-04-20T07:50:19.577
> 
> 标签：jakarta-ee, jpa, glassfish, eclipselink

I have a problem with one of my entities.

There are 3 Tables (UserAccount, UserRole, Role) for Glassfish Access Management and two Entities UserAccount and Role mapped by "ManyToMany" to each other.

To change the roles of an UserAccount, I apply a new List of chosen Roles via the setRoles()-Method of UserAccount. When I add new roles, everything works fine, the statement is correct:

```
INSERT INTO UserRole (Role_roleName, UserAccount_email,
                             UserAccount_Account_accountId) 
    VALUES ('Client', 'email@example.com', 1) 
```

But when I remove an item from the list, the removed entry in the join table should also be removed. As expected, there is the query submitted but with the email column set to "null".

```
DELETE FROM UserRole WHERE ((Role_roleName = 'Administrator') 
    AND ((UserAccount_Account_accountId = 1) AND (UserAccount_email = null))) 
```

Has anybody an idea why this column is set to null? When I output the email with userAccount.getEmail() right after and before the merge to the database, it returns the email adress...

Any Help is very appreciated.

Thanks, Manuel

Setup: Container: Glassfish 3.1.2 JPA: Eclipse Persistence Services - 2.3.2.v20111125-r10461

UserAccount entity:

```
@Entity
@Table(name="UserAccount")
@PrimaryKeyJoinColumn(name = "Account_accountId")
public class UserAccount extends Account implements Serializable {
  private static final long serialVersionUID = 1L;

  private String password;

  //bi-directional one-to-one association to Account
  @OneToOne
  @JoinColumn(name="Account_accountId")
  private Account account;

  @Column(name="email")
  private String email;

  //bi-directional many-to-many association to Role
  @ManyToMany
  @JoinTable(
    name="UserRole"
    ,

    joinColumns={

        @JoinColumn(name="UserAccount_email", referencedColumnName="email"),
        @JoinColumn(name="UserAccount_Account_accountId", referencedColumnName="Account_accountId")
        }
    , inverseJoinColumns={
        @JoinColumn(name="Role_roleName")
        }
    )
  private List<Role> roles;       
       //getter and setters 
```

Account Entity

```
@Entity
@Table(name="Account")
@Inheritance(strategy=InheritanceType.JOINED)
public abstract class Account implements Serializable {
   private static final long serialVersionUID = 1L;

   @Id
   @GeneratedValue(strategy=GenerationType.IDENTITY)
   private int accountId;

   private boolean active;

   private String address;

   private String dtype;

   private String firstname;

   private String handy;

   private String name;

   private String tel;

       //getter and setters 
```

Role Entity:

```
@Entity
@Table(name="Role")
public class Role implements Serializable {
    private static final long serialVersionUID = 1L;

    @Id
    @GeneratedValue(strategy=GenerationType.IDENTITY)
    private String roleName;

    @Lob
    private String roleDescription;

    //bi-directional many-to-many association to UserAccount
    @ManyToMany(mappedBy="roles")
    private List<UserAccount> userAccounts;

    //getter and setters 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T13:17:43.197

您的模型似乎很混乱。

如果UserAccount是Account的子类，那么它就是一个Account，不应该有一个OneToOne来记账吗？

电子邮件不是帐户 ID 的一部分，因此不能，也不需要作为连接表中的连接列。您只需要帐户ID。

# sandbox - eBay API in Sandbox returns response as a continuous string

> ID：16118037
> 
> 赞同：0
> 
> 时间：2013-04-20T07:50:22.603
> 
> 标签：sandbox, ebay-api, responseformat

Just started using the eBay API.

I created some products and purchased it with another Sandbox account. In the Sellers account, I can see 2 products under the 'Sold' section.

I am using the `GetOrders` API call to fetch the orders/sales. And in the response I am getting a continuous string.

```
2013-04-20T07:28:55.919ZSuccess819E819_CORE_API_15993720_R111false260765010Completed0.038.00.0NoPaymentFailure2013-04-09T07:15:25.000ZPayPalCompletefalse0.0false0.0StandardShippingFromOutsideUS4.01false510103falseBuyer2013-04-09T07:15:25.000ZPayPalTest UseraddresscityWAUSUnited States1 800 111 1111981026806769eBayStandardShippingFromOutsideUS4.034.038.0xxx.yyy@gmail.com1012013-04-06T11:32:41.000Z110115066261US1000New1None023.0112.51USeBay2.00.0110115066261-0xxx.yyy@gmail.com1022013-04-09T07:13:20.000Z110115066411US1000Brand New1None2705398200111.078.41USeBay2.00.0110115066411-27053982001testuser_xxxyyy252013-04-09T07:15:25.000ZfalsenY+sHZ2PrBmdj6wVnY+sEZ2PrA2dj6wFk4GhCpKBpwidj6x9nY+seQ==None10011 
```

I don't see any labels associated with the values, like `date = 2013-04-09T07:15:25.000Z`

And why is it not formatted?

Any help would be appreciated.

Thank you.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T07:43:08.717

正如我认为你的问题是当你`echo`回答时，你的浏览器会自动将标题设置为 html 并导致你的视图。所以只需在文件顶部添加 xml 标头（请记住，除了一个 xml 之外不要回显其他任何内容，否则您将收到标头错误）。

```
header ("Content-Type:text/xml"); 
```

关于您关于按时间过滤的问题，您的回答我肯定会去，`NumberOfDays`因为我看到您使用过。否则，您可以添加`ModTimeFrom`最后`ModTimeTo`一次`x`修改的订单或`CreateTimeFrom`检查`CreateTimeTo`输入的新订单。

# ruby - nil:NilClass 的未定义方法“strftime”

> ID：16118038
> 
> 赞同：1
> 
> 时间：2013-04-20T07:50:22.927
> 
> 标签：ruby, ruby-on-rails-3, datetime

我有一个变量：`@delivery_time`.

当我这样做时

```
o.delivery_time.strftime("%H:%M:%S") 
```

它给

```
undefined method `strftime' for nil:NilClass 
```

当我这样做时：

```
debug o.delivery_time 
```

它给：

```
--- 2000-01-01 11:00:00.000000000 Z  ... 
```

此外，输出：

```
o.delivery_time 
```

是

```
2000-01-01 11:00:00 UTC 
```

在这里，我只想要时间值，即 11:00。所以尝试了 srtftime 但它不起作用。

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2016-04-06T12:07:58.197

我有同样的问题，下面的代码帮助我显示字段“时间”的小时和分钟。

```
 o.try(:delivery_time).try(:strftime, ("%H:%M")) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-25T14:10:40.593

尝试这个 ：`(:strftime,(" %m/%d/%Y %I:%M"))`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-20T07:56:19.553

错字：delievery_time vs delivery_time

**编辑**试试这个：

```
o.try(:delivery_time).strftime("%H:%M:%S") 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-20T08:35:49.687

这做了一个伎俩：

```
 o.delivery_time.to_formatted_s(:time) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-03-22T17:54:11.673

我有同样的问题并以这种方式解决：

```
o.delivery_time.strftime("%H:%M:%S") unless o.delivery_time.nil? 
```

# sql - 在 sql server management studio 消息窗口中查找错误（错误行）

> ID：16118040
> 
> 赞同：3
> 
> 时间：2013-04-20T07:50:55.270
> 
> 标签：sql, sql-server, sql-server-2008

我有超过 5000 个插入查询，我想在 Sql 服务器管理工​​作室（SSMS）中执行这些插入查询在消息窗口中执行没有问题显示**查询已成功执行** 但我的问题是当其中一些查询有错误时消息是**查询完成但有错误**，在消息窗口中很难找到

（1 行受影响）

（1 行受影响）

（1 行受影响）

（1 行受影响）

（1 行受影响）

（1 行受影响）

消息 2627，第 14 级，状态 1，第 1 行...

****我的错误详情.... ****

（1 行受影响）

（1 行受影响）

（1 行受影响）

有什么办法只是 sql server 在消息窗口中显示错误？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-20T07:57:38.670

要抑制受影响消息的行，请使用[`SET NOCOUNT ON`](http://msdn.microsoft.com/en-us/library/ms189837.aspx).

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-20T10:26:59.700

我找到它的方法从编辑菜单打开快速查找窗口并搜索“Msg”我可以通过这种方式发现错误。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-20T08:11:46.643

您还可以启动 SQL Server Profiler 以仅显示错误，如下图所示

![在此处输入图像描述](https://i.stack.imgur.com/sN2aH.jpg)

# ios - RACSignal 间隔不能立即工作

> ID：16118043
> 
> 赞同：4
> 
> 时间：2013-04-20T07:51:10.403
> 
> 标签：ios, objective-c, reactive-cocoa

我正在尝试使用 RACSignal 类的 ReactiveCocoa 的间隔方法。以下代码在 1 秒后每秒运行一次。但我希望它立即和每一秒都有效。最好的方法是什么？

```
@weakify(self);
[[[RACSignal interval:1.0] takeUntilBlock:^BOOL(id x) {
    return [AClass count] == 0;
}] subscribeNext:^(id x) {
    dispatch_async(dispatch_get_main_queue(), ^{
        @strongify(self);
        NSUInteger count = [AClass count];
        self.title = [NSString stringWithFormat:@"%u", count];
    });
}      completed:^{
    dispatch_async(dispatch_get_main_queue(), ^{
        @strongify(self);
        self.title = @"";
    });
}]; 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-25T17:02:36.240

我相信你正在寻找[`-startWith:`](https://github.com/ReactiveCocoa/ReactiveCocoa/blob/d05cd9f1fe77a8fac1960f9b09c10c5fc47baae7/ReactiveCocoaFramework/ReactiveCocoa/RACStream.h#L175-177).

```
[[[RACSignal interval:1] startWith:NSDate.date] takeUntilBlock:^(id _) { // ... 
```

# r - 如何检查向量是否包含n个连续数字

> ID：16118050
> 
> 赞同：30
> 
> 时间：2013-04-20T07:52:15.197
> 
> 标签：r

假设我的向量数包含 c(1,2,3,5,7,8)，我希望找出它是否包含 3 个连续的数字，在这种情况下是 1,2,3。

```
numbers = c(1,2,3,5,7,8)
difference = diff(numbers) //The difference output would be 1,1,2,2,1 
```

为了验证我的数字向量中是否有 3 个连续整数，我尝试了以下方法，但几乎没有回报。

```
rep(1,2)%in%difference 
```

上面的代码在这种情况下有效，但如果我的差异向量 = (1,2,2,2,1)，即使“1”不连续，它仍然会返回 TRUE。

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-04-20T08:02:42.590

使用`diff`and `rle`，这样的事情应该可以工作：

```
result <- rle(diff(numbers))
any(result$lengths>=2 & result$values==1)
# [1] TRUE 
```

针对下面的评论，我之前的回答是专门只测试`length==3`不包括较长长度的运行。更改`==`为`>=`解决此问题。它也适用于涉及负数的运行：

```
> numbers4 <- c(-2, -1, 0, 5, 7, 8)
> result <- rle(diff(numbers4))
> any(result$lengths>=2 & result$values==1)
[1] TRUE 
```

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2013-04-20T12:37:43.780

## 基准！

我包括我的几个功能。随意添加你的。要符合条件，您需要编写一个通用函数来判断向量是否`x`包含`n`或更多连续数字。我在下面提供了一个单元测试功能。

* * *

竞争者：

```
flodel.filter <- function(x, n, incr = 1L) {
  if (n > length(x)) return(FALSE)
  x <- as.integer(x)
  is.cons <- tail(x, -1L) == head(x, -1L) + incr
  any(filter(is.cons, rep(1L, n-1L), sides = 1, method = "convolution") == n-1L,
      na.rm = TRUE)
}

flodel.which <- function(x, n, incr = 1L) {
  is.cons <- tail(x, -1L) == head(x, -1L) + incr
  any(diff(c(0L, which(!is.cons), length(x))) >= n)
}

thelatemail.rle <- function(x, n, incr = 1L) {
  result <- rle(diff(x))
  any(result$lengths >= n-1L  & result$values == incr)
}

improved.rle <- function(x, n, incr = 1L) {
  result <- rle(diff(as.integer(x)) == incr)
  any(result$lengths >= n-1L  & result$values)
}

carl.seqle <- function(x, n, incr = 1) {
  if(!is.numeric(x)) x <- as.numeric(x) 
  z <- length(x)  
  y <- x[-1L] != x[-z] + incr 
  i <- c(which(y | is.na(y)), z) 
  any(diff(c(0L, i)) >= n)
} 
```

* * *

单元测试：

```
check.fun <- function(fun)
  stopifnot(
    fun(c(1,2,3),   3),
   !fun(c(1,2),     3),
   !fun(c(1),       3),
   !fun(c(1,1,1,1), 3),
   !fun(c(1,1,2,2), 3),
    fun(c(1,1,2,3), 3)
  )

check.fun(flodel.filter)
check.fun(flodel.which)
check.fun(thelatemail.rle)
check.fun(improved.rle)
check.fun(carl.seqle) 
```

* * *

基准：

```
x <- sample(1:10, 1000000, replace = TRUE)

library(microbenchmark)
microbenchmark(
  flodel.filter(x, 6),
  flodel.which(x, 6),
  thelatemail.rle(x, 6),
  improved.rle(x, 6),
  carl.seqle(x, 6),
  times = 10)

# Unit: milliseconds
#                   expr       min       lq   median       uq      max neval
#    flodel.filter(x, 6)  96.03966 102.1383 144.9404 160.9698 177.7937    10
#     flodel.which(x, 6) 131.69193 137.7081 140.5211 185.3061 189.1644    10
#  thelatemail.rle(x, 6) 347.79586 353.1015 361.5744 378.3878 469.5869    10
#     improved.rle(x, 6) 199.35402 200.7455 205.2737 246.9670 252.4958    10
#       carl.seqle(x, 6) 213.72756 240.6023 245.2652 254.1725 259.2275    10 
```

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2013-04-20T08:02:36.490

在`diff`您可以检查`any`连续`1`的 s 之后 -

```
numbers = c(1,2,3,5,7,8)

difference = diff(numbers) == 1
## [1]  TRUE  TRUE FALSE FALSE  TRUE

## find alteast one consecutive TRUE
any(tail(difference, -1) &
    head(difference, -1))

## [1] TRUE 
```

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2013-04-20T08:33:24.767

很高兴在这里看到本土解决方案。

Stack Overflow 用户[Carl Witthoft](https://stackoverflow.com/users/884372/carl-witthoft)发布了一个他命名的函数并[在此](https://stackoverflow.com/a/8402950/1270695)`seqle()`分享。

该函数如下所示：

```
seqle <- function(x,incr=1) { 
  if(!is.numeric(x)) x <- as.numeric(x) 
  n <- length(x)  
  y <- x[-1L] != x[-n] + incr 
  i <- c(which(y|is.na(y)),n) 
  list(lengths = diff(c(0L,i)),
       values = x[head(c(0L,i)+1L,-1L)]) 
} 
```

让我们看看它的实际效果。首先，一些数据：

```
numbers1 <- c(1, 2, 3, 5, 7, 8)
numbers2 <- c(-2, 2, 3, 5, 6, 7, 8)
numbers3 <- c(1, 2, 2, 2, 1, 2, 3) 
```

现在，输出：

```
seqle(numbers1)
# $lengths
# [1] 3 1 2
# 
# $values
# [1] 1 5 7
# 
seqle(numbers2)
# $lengths
# [1] 1 2 4
# 
# $values
# [1] -2  2  5
# 
seqle(numbers3)
# $lengths
# [1] 2 1 1 3
# 
# $values
# [1] 1 2 2 1
# 
```

您特别感兴趣的是结果中的“长度”。

另一个有趣的观点是`incr`争论。在这里，我们可以将增量设置为“2”，并查找数字之间的差为 2 的序列。因此，对于第一个向量，我们希望检测到 3、5 和 7 的序列。

我们试试看：

```
> seqle(numbers1, incr = 2)
$lengths
[1] 1 1 3 1

$values
[1] 1 2 3 8 
```

因此，如果我们设置 ，我们可以看到我们有 1 (1)、1 (2)、3 (3, 5, 7) 和 1 (8) 的序列`incr = 2`。

* * *

它如何与 ECII 的第二个挑战一起工作？好像没问题！

```
> numbers4 <- c(-2, -1, 0, 5, 7, 8)
> seqle(numbers4)
$lengths
[1] 3 1 2

$values
[1] -2  5  7 
```

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2013-04-20T08:31:53.883

简单但有效

```
numbers = c(-2,2,3,4,5,10,6,7,8)
x1<-c(diff(numbers),0)
x2<-c(0,diff(numbers[-1]),0)
x3<-c(0,diff(numbers[c(-1,-2)]),0,0)

rbind(x1,x2,x3)
colSums(rbind(x1,x2,x3) )==3 #Returns TRUE or FALSE where in the vector the consecutive intervals triplet takes place
[1] FALSE  TRUE  TRUE FALSE FALSE FALSE  TRUE FALSE FALSE

sum(colSums(rbind(x1,x2,x3) )==3) #How many triplets of consecutive intervals occur in the vector
[1] 3

which(colSums(rbind(x1,x2,x3) )==3) #Returns the location of the triplets consecutive integers
[1] 2 3 7 
```

请注意，这对于连续的负间隔不起作用，`c(-2,-1,0)`因为它是如何`diff()`工作的

# c - 维护一个单独的迭代函数可以继续访问的排序数组

> ID：16118054
> 
> 赞同：0
> 
> 时间：2013-04-20T07:53:28.737
> 
> 标签：c, machine-learning

我正在用 C 编写决策树的代码。现在它给了我正确的结果（0% 的训练错误，低测试错误），但是运行需要很长时间。

问题在于我运行 qsort 的频率。我的基本算法是这样的：

```
 for every feature
        sort that feature column using qsort
        remove duplicate feature values in that column
        for every unique feature value
          split
          determine entropy given that split
    save the best feature to split + split value
    for every training_example
      if training_example's value for best feature < best split value, store in Left[]
      else store in Right[]
    recursively call this function, using only the Left[] training examples
    recursively call this function, using only the Right[] training examples 
```

因为最后两行是迭代调用，并且因为树可以扩展到几十个分支，所以对 qsort 的调用数量是巨大的（特别是对于我的数据集具有 > 1000 个特征）。

我减少运行时间的想法是创建一个二维数组（在一个单独的函数中），其中每一列都是一个排序的特征列。然后，只要我为每个递归调用在 Left[] 和 Right[] 中维护训练示例的行号向量，我就可以调用这个单独的函数，在预排序的特征向量中获取我想要的行，并节省每次必须进行 qsort 的成本。

我对C相当陌生，所以我不确定如何编写代码。在 MatLab 中，我可以拥有一个任何函数都可以更改或访问的全局数组，在 C 中寻找类似的东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T09:26:16.957

C 中的全局数组是完全可能的。实际上有两种方法可以做到这一点。在第一种情况下，数组的维度对于应用程序是固定的：

```
#define NROWS   100
#define NCOLS   100
int array[NROWS][NCOLS];

int main(void)
{
        int     i, j;

        for (i = 0; i < NROWS; i++)
        for (j = 0; j < NCOLS; j++)
        {
                array[i][j] = i+j;
        }
        return 0;
} 
```

在第二个示例中，维度可能取决于来自输入的值。

```
#include <stdlib.h>
int **array;

int main(void)
{
        int     nrows = 100;
        int     ncols = 100;
        int     i, j;

        array = malloc(nrows*sizeof(*array));
        for (i = 0; i < nrows; i++)
        {
                array[i] = malloc(ncols*sizeof(*(array[i])));
                for (j = 0; j < ncols; j++)
                {
                        array[i][j] = i+j;
                }
        }
} 
```

尽管两个示例中对数组的访问看起来非常相似，但数组的实现却大不相同。在第一个示例中，数组位于一块内存中，访问行的步幅是整行。在第二个示例中，每个行访问都是指向行的指针，该行是一块内存。然而，不同的行可以位于存储器的不同区域。在第二个示例中，行也可能具有不同的长度。在这种情况下，您还需要将每行的长度存储在某处。

我不完全理解您要达到的目标，因为我不熟悉*决策树*、*特征*和训练集的标准方法的术语。但您可能还想看看其他数据结构来维护排序数据：

1.  [http://en.wikipedia.org/wiki/Red](http://en.wikipedia.org/wiki/Red) –black_tree 维护了一个或多或少平衡和排序的树。
2.  [AVL 树](http://en.wikipedia.org/wiki/AVL_tree)有点慢，但更平衡和排序树。
3.  [在元素列表上尝试](http://en.wikipedia.org/wiki/Trie)排序树。
4.  [散列函数](http://en.wikipedia.org/wiki/Hash_function)可以轻松地将复杂元素映射到可用于对元素进行排序的整数值。适合查找精确的元素，但元素本身没有真正的顺序。

P.S1：来自 Matlab，您可能需要考虑使用与 C 不同的语言来迁移。C++ 有标准库来支持上述数据结构。如果你有胆量的话，你会想到 Java、Python 甚至 Haskell。C 中的指针处理可能非常乏味且容易出错。

P.S2：我无法`-`在 StackOverflow 的 URL 中包含一个。所以红黑树链接有点偏，不能点击。如果有人可以编辑我的帖子以修复它，那么我将不胜感激。

# javascript - 如何动态改变内容高度

> ID：16118055
> 
> 赞同：0
> 
> 时间：2013-04-20T07:53:40.570
> 
> 标签：javascript, asp.net-mvc, dhtmlx

我正在使用加载选项卡内容

```
tabbar.setContentHref("a1","Home/About"); 
```

我还有另一个选择是使用 . 加载内容，

```
 tabbar.setContentHtml("<iframe src='/Home/About'>") 
```

我想要的是在加载时动态改变内容高度。我用谷歌搜索，但没有解决方案对我有用。有没有其他方法可以加载内容？？？。谁能帮我解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-15T09:51:22.077

如果您知道高度，则可以使用下一种方法：

```
<div id="a_tabbar" class="dhtmlxTabBar" tabstyle="silver" imgpath="../dhtmlxTabbar/codebase/imgs/" style="width:755px; color:#FFFFFF;" onbeforeinit="a_tabbar.enableAutoSize(true,true)" oninit="a_tabbar.normalize(755,true); a_tabbar.setTabActive('a1');" offset="15">
<div id="a1" name="Tab 1-1" style="height: 300px; background-color: black;">Content 1</div>
<div id="a2" name="Tab 1-2" style="height: 600px; background-color: #556b2f;">Content 2</div>
</div> 
```

# mysql - 在服务器端集成 Paypal 支付 API

> ID：16118056
> 
> 赞同：0
> 
> 时间：2013-04-20T07:53:44.743
> 
> 标签：mysql, api, paypal, integration, backend

我有一个 Java 服务器为我的前端 Web 应用程序提供 Web 服务。我们的网络应用程序的功能之一是接受我们客户的定期付款，并使用“支付我”选项向销售代理付款。

我希望我的后端 Java 服务器直接与 PAypal apis 对话并处理所有付款。例如：当销售代理说“付钱给我”时，我将捕获他/她的贝宝帐户 ID 并存储在我的数据库中。然后后端进程将启动并使用 paypal apis 向代理付款。

贝宝 API 可以做到这一点吗？

我已经看到了贝宝集成可以通过网络发生的每一个地方

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T13:57:48.097

只要您的系统可以从后端执行 API 操作，就没有任何理由认为它不应该工作。我设置了一个每天早上运行并执行 API 调用的 cron 作业。

# xcode - xcode 4.6 的 firemonkey 或下载 Xcode 4.1 的链接

> ID：16118059
> 
> 赞同：1
> 
> 时间：2013-04-20T07:53:53.813
> 
> 标签：xcode, firemonkey, xcode4.6, xcode4.1

我正在使用 Delphi XE2-firemonkey 进行 iOS 应用程序开发。delphi 目录中提供的firemonkey-ios.dmg 文件不能用Xcode 4.6 安装。它需要 Xcode 4.1，Apple 开发下载中不再提供该版本。（相信我，我找了大约一百万次！！！）

任何人都可以帮我找到适合 Xcode 4.6 的 firemonkey 或者至少是一个下载 Xcode 4.1 的链接吗？我正在使用 MacOS 狮子。

干杯！

# visual-studio-2010 - Visual Studio 2012 应用程序的水晶报表

> ID：16118069
> 
> 赞同：5
> 
> 时间：2013-04-20T07:54:54.580
> 
> 标签：visual-studio-2010, visual-studio-2012, crystal-reports

使用 Visual Studio 2012 和 Crystal Report 9

当我在客户端机器上运行报告时，显示错误为“ `Could not load file or assembly "CrystalDecisions.Windows.Forms,Version = 13.0.2000.0 Culture = neutral PublickeyToken = 692bea5521e1304 or noe of its depcendenceis. The system cannot find the file specifified.`”

我无法`crredist2010_x86`从互联网上找到文件。

我从 SAP 站点“”下载了文件`CRforVS_13_0_5.exe`，然后我尝试在客户端机器上安装它显示错误，因为需要至少安装`vs2010`或`vs2012`继续此安装。

如何解决这个问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-20T08:48:30.123

这里是！

2013 年 1 月 14 日 SAP 发布 SAP Crystal Reports，Microsoft Visual Studio 开发版 - 2012 **[你可以在这里下载](http://downloads.businessobjects.com/akdlm/cr4vs2010/CRforVS_13_0_5.exe)**

```
Support integration with Visual Studio 2012 and 4.5 .NET Framework runtime.
Added support for following platforms:
    OS: Windows 7 SP1, Windows 8, Windows 2012
    Database: SQL Server 2012, HANA SP5
    Web Browser: Firefox 16, IE10 (limited support; more information forthcoming soon)
    Other technology: IIS 8, Flash 11
29 Customer Escalations resolved 
```

这是[介绍文章。](http://scn.sap.com/docs/DOC-35074) 在[此页面](http://scn.sap.com/docs/DOC-7824)中，您可以找到实际和以前的版本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-24T12:01:14.940

我有一个用 VS 2008 制作的应用程序，我已经安装了所有东西，但找不到所需的 dll。我做了这样的解决方法，从 Crystal Report 添加了新报告，VS 添加了引用本身。

# visual-studio-2012 - 在VB2012中创建一个源目录？

> ID：16118072
> 
> 赞同：1
> 
> 时间：2013-04-20T07:55:45.887
> 
> 标签：visual-studio-2012

所以，我对所有这些 C++ 都是新手，我正在慢慢学习。不过我遇到了一些麻烦。我知道如何移动目录和文件。我只是不知道安装目录。我已经准备好所有文件，我只是不知道如何让我的程序将目录安装到运行它的其他计算机上。我想我在 VB 中有一个源目录来放置文件还是什么？同样，如果有人感到困惑，我不是在尝试安装我的程序，而是在尝试创建我的 OWN 安装程序。

# ios - 计算器除以零

> ID：16118080
> 
> 赞同：0
> 
> 时间：2013-04-20T07:57:28.620
> 
> 标签：ios, objective-c, math

我创建了一个简单的计算器。一切都很好；但是，如果我除以零，我想显示一条错误消息。我知道如何做警报弹出窗口，但我不知道如何实现它，所以当我除以零时它会出现。这是我的计算器代码的片段：

```
- (IBAction)buttonOperationPressed:(id)sender {
    if (currentOperation == 0) result = currentNumber;
    else {
        switch (currentOperation) {
            case 1:
                result = result + currentNumber;
                break;
            case 2:
                result = result - currentNumber;
                break;
            case 3:
                result = result * currentNumber;
                break;
            case 4:
                result = result / currentNumber;
                break;
            case 5:
                currentOperation = 0;
                break;
            default:
                break;
        }
    }
    currentNumber = 0;
    CalcDisplay.text = [NSString stringWithFormat:@"%g",result];
    if ([sender tag] == 0) result = 0;
    currentOperation = [sender  tag];
    userInTheMiddleOfEnteringDecimal = NO; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-20T08:00:21.917

您可以在进行除法之前添加一个测试，例如更改：

```
 case 4:
            result = result / currentNumber;
            break; 
```

到：

```
 case 4:
            if (currentNumber == 0)
                // ... do alert here ...
            else
                result = result / currentNumber;
            break; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-20T08:01:37.417

```
- (IBAction)buttonOperationPressed:(id)sender {
if (currentOperation == 0) result = currentNumber;
else {
    switch (currentOperation) {
       case 1:
            result = result + currentNumber;
            break;
        case 2:
            result = result - currentNumber;
            break;
        case 3:
            result = result * currentNumber;
            break;
        case 4:
            if(currentNumber == 0){
                UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"Title" message:@"Message" delegate:nil cancelButtonTitle:@"OK" otherButtonTitles:nil, nil];
[alert show];
            }else{

                result = result / currentNumber;

            }

            break;
        case 5:
            currentOperation = 0;
            break;
        default:
            break;
    }
}
currentNumber = 0;
CalcDisplay.text = [NSString stringWithFormat:@"%g",result];
if ([sender tag] == 0) result = 0;
currentOperation = [sender  tag];
userInTheMiddleOfEnteringDecimal = NO; 
```

请尝试此代码，我已复制并粘贴了您提供的代码，并在其中添加了一些必要的行，我认为这可以解决您的问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-20T08:17:30.127

您必须检查第二个除法操作数是否为零，如果是，则打印一条错误消息。不要忘记，你不能只比较`double`或与`==`，你必须使用 presicion，像这样：

```
case 4:
    if(ABS(currentNumber) < 1e-12) // most probably its zero
        // your message
        return; 
```

# javascript - 范围内的非重复数字并从表单提交到页面

> ID：16118084
> 
> 赞同：2
> 
> 时间：2013-04-20T07:57:41.883
> 
> 标签：javascript, javascript-events

请问我能得到一些帮助吗？

我需要从 1 - 80 范围内选择一个不重复的随机数，但不要重复它。而不是我的表单从用户那里获取范围，我希望在 java 脚本中定义它，并在按下提交按钮时，它会在文本区域中生成一个 1 - 80 范围内的非重复数字，就像这样的表单提交、清除和结果文本区域。

这是我的表单代码：

```
<form name="generate">
<table>
    <tr>
      <td colspan="2"><input TYPE="button" name="send_it" VALUE="ENTER" onClick="chooseRandom(this.form)">&nbsp; &nbsp; <input TYPE="reset" VALUE="CLEAR" onClick="clearForm(this.form)"><br />
      <br />
      </td>
    </tr>
    <tr>
      <td>Random Number:&nbsp;</td>
      <td><input TYPE="text" NAME="result" SIZE="5"></td>
    </tr>
  </table>
</form> 
```

这是我的java脚本：

```
<script type="text/javascript">

function chooseRandom(form) {

var m = parseInt(form.lower.value);

var n = parseInt(form.upper.value) - m;

var output = Math.floor(Math.random() * n) + m;
        if (m < 0) {
            alert('Enter # greater than 0');
        }
        if (n > 79) {
            alert('Enter # less than 80');
        }

form.result.value = output;

}
// Clears the form

function clearForm(form) {

    form.upper.value="";

    form.lower.value="";

    form.upper.focus();

    form.upper.select();

}
</script> 
```

任何帮助将不胜感激。TYVY 贾里德·摩尔

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-20T09:08:48.650

希望这是您想要的:) 我是在这里回答问题的新手。

```
var rand = [];

for(var i = 1;i<=80;i++){
    rand.push(i);
}
function getRand(){
    var index = Math.floor(Math.random()*rand.length)
    return rand.splice(index,1)
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-20T11:53:01.773

我相信这就是您正在寻找的。您将不得不使用 ajax 来发布表单，以便不进行重置“usedNumbers”的页面刷新。

```
<form id="generate" name="generate">
    <table>
        <tr>
          <td colspan="2"><input type="button" name="send_it" value="ENTER" onclick="chooseRandom(this.form)">&nbsp; &nbsp; <input type="reset" value="CLEAR" onclick="clearForm(this.form)">
          <br />
          <br />
          </td>
        </tr>
        <tr>
          <td>Random Number:&nbsp;</td>
          <td><input TYPE="text" NAME="result" SIZE="5"></td>
        </tr>
    </table>
</form> 
```

和

```
<script>
function chooseRandom(form) {
    form.result.value = getNonRepeatingRandomNumberWithinRange();

    // Do ajax based post thereby preventing page refresh
}

var usedNumbers = [],
    min = 1,
    max = 80;

function getNonRepeatingRandomNumberWithinRange() {
    // Generate random number within range
    var num = Math.floor(Math.random() * max) + min;

    // If number already used, try again (if all slots are used we return the number anyway)
    if (contains(usedNumbers, num) && usedNumbers.length < max)
        return getRand();

    // Store number and return as value
    return usedNumbers[usedNumbers.length - 1] = num;
}

// Helper function for determining if an array contains value
function contains(arr, obj) {
    var i = arr.length;
    while (i--) {
        if (arr[i] === obj)
            return true;
    }
    return false;
}
</script> 
```

# c# - 将一个对象映射到另一个对象的最佳实践

> ID：16118085
> 
> 赞同：43
> 
> 时间：2013-04-20T07:57:46.613
> 
> 标签：c#, design-patterns, mapping

我的问题是，以最可维护的方式将一个对象映射到另一个对象的最佳方法是什么。我无法更改我们获得的 Dto 对象的设置方式以更加规范化，因此我需要创建一种方法将其映射到我们的对象实现。

这是显示我需要发生的事情的示例代码：

```
class Program
{
    static void Main(string[] args)
    {
        var dto = new Dto();

        dto.Items = new object[] { 1.00m, true, "Three" };
        dto.ItemsNames = new[] { "One", "Two", "Three" };            

        var model = GetModel(dto);

        Console.WriteLine("One: {0}", model.One);
        Console.WriteLine("Two: {0}", model.Two);
        Console.WriteLine("Three: {0}", model.Three);
        Console.ReadLine();
    }

    private static Model GetModel(Dto dto)
    {
        var result = new Model();

        result.One = Convert.ToDecimal(dto.Items[Array.IndexOf(dto.ItemsNames, "One")]);
        result.Two = Convert.ToBoolean(dto.Items[Array.IndexOf(dto.ItemsNames, "Two")]);
        result.Three = dto.Items[Array.IndexOf(dto.ItemsNames, "Three")].ToString();

        return result;
    }
}

class Dto
{
    public object[] Items { get; set; }
    public string[] ItemsNames { get; set; }
}

class Model
{
    public decimal One { get; set; }
    public bool Two { get; set; }
    public string Three { get; set; }
} 
```

我认为如果我有某种映射器类可以接收模型对象 propertyInfo、我想要转换的类型以及我想要提取的“项目名称”，那将会很棒。有没有人有任何建议让这个更清洁？

谢谢！

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2013-04-20T10:02:29.030

我会选择[AutoMapper](http://automapper.org/)，这是一个开源和免费的映射库，它允许根据约定将一种类型映射到另一种类型（即映射具有相同名称和相同/派生/可转换类型的公共属性，以及许多其他[智能](https://github.com/AutoMapper/AutoMapper/wiki/Projection)类型）。非常容易使用，会让你实现这样的事情：

```
Model model = Mapper.Map<Model>(dto); 
```

不确定您的具体要求，但 AutoMapper 还支持[自定义值解析器](https://github.com/AutoMapper/AutoMapper/wiki/Custom-value-resolvers)，这应该可以帮助您编写特定映射器的单一通用实现。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-04-20T08:30:35.017

这是一个可能的通用实现，使用一点反射（伪代码，现在没有 VS）：

```
public class DtoMapper<DtoType>
{
    Dictionary<string,PropertyInfo> properties;

    public DtoMapper()
    {
        // Cache property infos
        var t = typeof(DtoType);
        properties = t.GetProperties().ToDictionary(p => p.Name, p => p);
     }

    public DtoType Map(Dto dto)
    {
        var instance = Activator.CreateInstance(typeOf(DtoType));

        foreach(var p in properties)
        {
            p.SetProperty(
                instance, 
                Convert.Type(
                    p.PropertyType, 
                    dto.Items[Array.IndexOf(dto.ItemsNames, p.Name)]);

            return instance;
        }
    } 
```

用法：

```
var mapper = new DtoMapper<Model>();
var modelInstance = mapper.Map(dto); 
```

创建映射器实例时这会很慢，但稍后会快得多。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2020-11-25T09:03:21.940

Efran Cobisi 关于使用 Auto Mapper 的建议是一个很好的建议。我使用 Auto Mapper 已经有一段时间了，它运行良好，直到我找到了更快的替代方案[Mapster](https://github.com/MapsterMapper/Mapster)。

给定一个大列表或 IEnumerable，Mapster 的性能优于 Auto Mapper。我在某处找到了一个基准，显示 Mapster 的速度是原来的 6 倍，但我再也找不到它了。您可以查找它，然后，如果它适合您，请使用 Mapster。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2021-12-06T09:22:10.587

**映射两个对象的最快方法**是**inline-mapping**，但可能需要一些时间才能使用**[MappingGenerator](https://marketplace.visualstudio.com/items?itemName=54748ff9-45fc-43c2-8ec5-cf7912bc3b84.mappinggenerator)**

此外，您可以查看 Jason Bock 的基准进行比较，下面是更好的：

[![在此处输入图像描述](https://i.stack.imgur.com/04FNH.jpg)](https://i.stack.imgur.com/04FNH.jpg) [youtube 上的完整视频](https://youtu.be/4DVV7FXukC8)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-06-22T19:35:40.487

```
/// <summary>
/// map properties
/// </summary>
/// <param name="sourceObj"></param>
/// <param name="targetObj"></param>
private void MapProp(object sourceObj, object targetObj)
{
    Type T1 = sourceObj.GetType();
    Type T2 = targetObj.GetType();

    PropertyInfo[] sourceProprties = T1.GetProperties(BindingFlags.Instance | BindingFlags.Public);
    PropertyInfo[] targetProprties = T2.GetProperties(BindingFlags.Instance | BindingFlags.Public);

   foreach (var sourceProp in sourceProprties)
   {
       object osourceVal = sourceProp.GetValue(sourceObj, null);
       int entIndex = Array.IndexOf(targetProprties, sourceProp);
       if (entIndex >= 0)
       {
           var targetProp = targetProprties[entIndex];
           targetProp.SetValue(targetObj, osourceVal);
       }
   }
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-08-05T20:03:54.463

使用反射

```
 public interface IModelBase
    {
        int Id { get; set; }
    }
    public interface IDtoBase  
    {
        int Id { get; set; }
    }
    public class Client : IModelBase
    {
        public int Id { get; set; }
        public string Name { get; set; }
        public ICollection<SomeType> ListOfSomeType { get; set; }
    }
    public class ClientDto : IDtoBase
    {
        public int Id { get; set; }
        public string Name { get; set; }
    }

    public static class Extensions
    {
        public static TDto AsDto<T, TDto>(this T item)
            where TDto : class, IDtoBase
            where T : class, IModelBase
        {
            var list = item.GetType().GetProperties();
            var inst = Activator.CreateInstance(typeof(TDto));
            foreach (var i in list)
            {
                if (((TDto)inst).GetType().GetProperty(i.Name) == null)
                    continue;
                var valor = i.GetValue(item, null);
                ((TDto)inst).GetType().GetProperty(i.Name).SetValue((TDto)inst, valor);
            }
            return (TDto)inst;
        }
    }

How to use it:

    Client client = new { id = 1, Name = "Jay", ListOfSomeType = new List<SomeType>() };
    ClientDto cdto = client.AsDto<Client, ClientDto>(); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-04-08T13:11:01.417

我创建了一个受 DKM 回答启发的通用方法。

```
public static class DbHelper
{
    public static T FillWith<T>(this T targetObj, T sourceObj)
    {
        Type T1 = sourceObj.GetType();
        Type T2 = targetObj.GetType();

        PropertyInfo[] sourceProprties = T1.GetProperties(BindingFlags.Instance | BindingFlags.Public);
        PropertyInfo[] targetProprties = T2.GetProperties(BindingFlags.Instance | BindingFlags.Public);

        foreach (var sourceProp in sourceProprties)
        {
            object osourceVal = sourceProp.GetValue(sourceObj, null);
            int entIndex = Array.IndexOf(targetProprties, sourceProp);
            if (entIndex >= 0)
            {
                var targetProp = targetProprties[entIndex];
                targetProp.SetValue(targetObj, osourceVal);
            }
        }
        return targetObj;
    }
} 
```

用法：

```
var oldUser = new User();
oldUser.FillWith(updatedUser); 
```

# ruby - 如何在 MiniTest 的所有测试中在每个测试用例之前运行代码？

> ID：16118086
> 
> 赞同：7
> 
> 时间：2013-04-20T07:57:57.027
> 
> 标签：ruby, minitest

我需要在 MiniTest 中的所有测试中的每个测试之前运行代码。

在我做之前：

```
MiniTest::Unit::TestCase.add_setup_hook do
   ...code to run before each test
end 
```

在我将 MiniTest 升级到 4.7.2 版本后，它显示以下错误：

```
undefined method `add_setup_hook' for MiniTest::Unit::TestCase:Class (NoMethodError) 
```

我正在使用 Ruby MRI 2.0.0p0。

**解决方案**

```
module MyMinitestPlugin
  def before_setup
    super
    # ...code to run before all test cases
  end

  def after_teardown
    # ... code to run after all test cases
    super
  end
end

class MiniTest::Unit::TestCase
  include MyMinitestPlugin
end 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-20T08:40:57.600

`add_setup_hook`在 4.6.0 中被删除。 [https://github.com/seattlerb/minitest/commit/792a480ebeb32983b9150adae575b7c396e2ae63](https://github.com/seattlerb/minitest/commit/792a480ebeb32983b9150adae575b7c396e2ae63)

改为使用[`before_setup`](http://www.ruby-doc.org/stdlib-2.0/libdoc/minitest/rdoc/MiniTest/Unit/LifecycleHooks.html#method-i-before_setup)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-20T08:18:28.123

我认为您正在寻找[`setup()`](http://www.ruby-doc.org/stdlib-1.9.3/libdoc/minitest/unit/rdoc/MiniTest/Unit/TestCase.html#method-i-setup)方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-10-25T10:42:00.757

**2019 年更新**

不要为此编写插件，插件适用于扩展 Minitest 功能的 gem，而不是测试作者。

如果您编写 Minitest Specs，则可以改为执行以下操作：

```
class Minitest::Spec
  before :each do
    [do stuff]
  end
end 
```

# html - 为屏幕固定的 html back 背景

> ID：16118087
> 
> 赞同：0
> 
> 时间：2013-04-20T07:58:14.267
> 
> 标签：html, css, background

我正在处理一个基本的 html 页面，我有这个背景图片 bg.jpg。但问题在于您拥有的屏幕尺寸和屏幕有多少像素我无法查看我想要的整个背景图像。

如何使背景固定，以便您可以看到整个背景？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T07:59:37.123

你可以这样做：

```
html { 
  background: url(images/bg.jpg) no-repeat center center fixed; 
  -webkit-background-size: cover;
  -moz-background-size: cover;
  -o-background-size: cover;
  background-size: cover;
} 
```

你可以在这里阅读更多：[链接](http://css-tricks.com/perfect-full-page-background-image/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-20T08:00:08.907

如果您的意思是整页背景图片，那么您可以简单地使用 CSS3`background-size`属性

```
body { 
  background: url(bg.jpg) no-repeat center center fixed; 
  -webkit-background-size: cover;
  -moz-background-size: cover;
  -o-background-size: cover;
  background-size: cover;
} 
```

如果你需要附加它，有点固定，不应该滚动，而不是使用

```
background-attachment: fixed; 
/* This is already used in above CSS declaration using CSS Short Hand*/ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-20T08:01:43.543

删除您的“身体背景图像代码”，然后粘贴此代码：

```
html 
{ 
        background: url(../img/bg.jpg) no-repeat center center fixed #000; 
        -webkit-background-size: cover;
        -moz-background-size: cover;
        -o-background-size: cover;
        background-size: cover;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-20T08:04:55.907

您可以使用 CSS 伪选择器。

```
body:after
{
    content: url(your_image)
    /* Styling your image here just like a div */
} 
```

当然，其他解决方案也可以，但它们只适用于最新的现代浏览器。这种伪选择解决方案适用于当今使用的大多数浏览器。如果你想支持更老的浏览器，比如旧版本的 IE，那么你可以使用 div 来包含背景图像并根据需要设置它的样式。

# javascript - 如何更改输入框的值只是为了在 html 5 网页中显示

> ID：16118089
> 
> 赞同：-1
> 
> 时间：2013-04-20T07:58:42.120
> 
> 标签：javascript, html

我有一个文本字段，我在其中输入数据我希望如果用户输入 1000，那么它会在文本字段中显示 1,000，但是同样的值 1000 也用于进一步计算，所以如果用户输入 1000 那么如何解决这个问题，然后只是为了显示它显示 1,000如果我们在计算中使用，那么相同的 var 显示 1000 进行计算。

```
 <HTML>
  <body>
  <input type="text" id="test" value="" />
  </body>

   <script>

     var c=document.getElementById(test);
   </script>
  </html> 
```

所以如果 c 用户输入 1000 那么它应该显示 1,000 来显示一个并且如果用户在脚本中使用

```
 var test=c 
```

然后测试应该显示 1000

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T08:07:21.977

`document.getElementById`返回`null`唯一元素或对唯一元素的引用，在本例中为`input`元素。输入元素具有`value`包含其当前值（作为字符串）的属性。

所以你可以使用

```
var test = parseInt(c.value, 10); 
```

获取**当前值**。这意味着如果您没有使用任何预定义的值`test`，则`NaN`.

但是，这只会被评估一次。为了更改值，您需要添加一个事件侦听器，它处理对输入的更改：

```
// or c.onkeyup
c.onchange = function(e){
    /* ... */
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-20T08:24:22.990

Zeta离开的继续形式：

```
var testValue = parseInt(c.value); 
```

现在让我们根据需要组合显示：1,000

```
var textDecimal = c.value.substr(c.value.length-3); // last 3 characters returned
var textInteger = c.value.substr(0,c.value.length-3); // characters you want to appear to the right   of the coma
var textFinalDisplay = textInteger + ',' + textDecimal

alert(textFinalDisplay); 
```

现在您将显示保存为 textFinalDisplay 作为字符串，并将实际值保存为 c.value 中的整数

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-20T09:36:00.207

这适用于 Firefox (Linux) 上的整数。您可以使用函数“intNumValue()”访问“非逗号”值：

```
<!DOCTYPE html>
<html>
<head>
<title></title>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<script type="text/javascript">
    String.prototype.displayIntNum = function()
    {
    var digits = String(Number(this.intNumValue())).split(""); // strip leading zeros
    var displayNum = new Array();
    for(var i=0; i<digits.length; i++) {
        if(i && !(i%3)) {
        displayNum.unshift(",");
        }
        displayNum.unshift(digits[digits.length-1-i]);
    }
    return displayNum.join("");
    }
    String.prototype.intNumValue = function() {
    return this.replace(/,/g,"");
    }
    function inputChanged() {
    var e = document.getElementById("numInp");
    if(!e.value.intNumValue().replace(/[0-9]/g,"").length) {
        e.value = e.value.displayIntNum();
    }
    return false;
    }
    function displayValue() {
    alert(document.getElementById("numInp").value.intNumValue());
    }
</script>
</head>
<body>
<button onclick="displayValue()">Display value</button>
<p>Input integer value:<input id="numInp" type="text" oninput="inputChanged()">
</body>
</html> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-20T08:31:40.563

```
<input type="text" id="test" value=""></input>
<button type="button" id="get">Get value</input>

var test = document.getElementById("test"),
    button = document.getElementById("get");

function doCommas(evt) {
    var n = evt.target.value.replace(/,/g, "");
        d = n.indexOf('.'),
        e = '',
        r = /(\d+)(\d{3})/;

    if (d !== -1) {
        e = '.' + n.substring(d + 1, n.length);
        n = n.substring(0, d);
    }

    while (r.test(n)) {
        n = n.replace(r, '$1' + ',' + '$2');
    }

    evt.target.value = n + e;
}

function getValue() {
    alert("value: " + test.value.replace(/,/g, ""));
}

test.addEventListener("keyup", doCommas, false);
button.addEventListener("click", getValue, false); 
```

在[jsfiddle上](http://jsfiddle.net/Xotic750/uvZ4T/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-20T08:34:47.807

您可以从变量 x 中获取实际值

```
<html>
<head>
    <script type="text/javascript"> 
        function abc(){
            var x = document.getElementById('txt').value;               
            var y = x/1000;
            var z = y+","+ x.toString().substring(1);
            document.getElementById('txt').value = z;
        }
    </script>
</head>
<body>
    <input type="text" id="txt" value="" onchange = "abc()"/>
</body> 
```

# javascript - 如何检查是否加载了某些 extjs 面板

> ID：16118092
> 
> 赞同：1
> 
> 时间：2013-04-20T07:58:50.907
> 
> 标签：javascript, html, extjs

加载某些面板后，我必须添加一个 javascript 代码（我必须使用面板 ID）。如何检查该面板是否已呈现，现在我可以使用 document.getElementbyId 访问其 ID。谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-20T08:05:53.057

尝试

```
var cmp = Ext.getCmp('<panel-id>');
if(cmp){
    //panel exists
    if(cmp.rendered){
        //panel is rendered
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-20T08:08:50.333

您应该查阅[文档](http://docs.sencha.com/extjs/4.0.7/#!/api/Ext.panel.Panel-event-afterrender)。

对于您的每个问题：

1.  您可以公开众多事件之一。有一个[后渲染](http://docs.sencha.com/extjs/4.0.7/#!/api/Ext.panel.Panel-event-afterrender)事件。
2.  您相应地设置`id`面板的 。由于继承自`AbstractComponent`，所有组件都具有此 id 属性，请参阅[有关此的文档](http://docs.sencha.com/extjs/4.0.7/#!/api/Ext.AbstractComponent-cfg-id)。

这是代码：

```
var myPanel = Ext.create('Ext.panel.Panel', {  
    id : 'thisIsYourId', //<<set this
    renderTo: Ext.getBody()
});
myPanel.on("afterrender", function() {  
    //this code will run after the panel renders.
}); 
```

# c - 串口，WriteFile 影响 ReadFile

> ID：16118096
> 
> 赞同：2
> 
> 时间：2013-04-20T07:59:32.993
> 
> 标签：c, serial-port

我的串口代码有问题。

我只是做：

```
opencomm(); 
send(); 
closecomm(); 
```

以及与发送金额相同的`ClearCommError() (inside recv())`退货 。`comstat.cbInQue`

所以，如果`sizeof (sendbuff)`是 100，我得到 100 `comstat.cbInQue`。

`ReadFile`用,读取一个字节`comstat.cbInQue`后（当然是在随后`ClearCommError()`的 , 之后）。

读取的值不是写入的值。没有设备连接到端口。

最奇怪的是**这段代码曾经可以工作**，但现在不行了。

```
WORD sendbuff[128];
static HANDLE hComm; 

static void opencomm (void) 
{ 
    static COMMTIMEOUTS timeouts = {0,0,0,0,0}; 

    static DCB dcb = { 
        sizeof (DCB),   //   DCBlength 
        115200, // * BaudRate 
        1,      //   fBinary 
        0,      // * fParity 
        0,      //   fOutxCtsFlow 
        0,      //   fOutxDsrFlow 
        0,      //   fDtrControl 
        0,      //   fDsrSensitivity 
        1,      //   fTXContinueOnXoff 
        0,      //   fOutX 
        0,      //   fInX 
        0,      //   fErrorChar 
        0,      //   fNull 
        0,      //   fRtsControl 
        0,      //   fAbortOnError 
        0,      //   fDummy2 
        0,      //   wReserved 
        8*k,    //   XonLim 
        2*k,    //   XoffLim 
        8,      // * ByteSize 
        0,      // * Parity 
        0,      // * StopBits 
        0,      //   XonChar 
        1,      //   XoffChar 
        0,      //   ErrorChar 
        0,      //   EofChar 
        0,      //   EvtChar 
        0       //   wReserved1 
    }; 

        hComm = CreateFile("COM1", GENERIC_READ | GENERIC_WRITE, 0, NULL, OPEN_EXISTING, 0, NULL); 
        if (hComm != INVALID_HANDLE_VALUE) { 
            SetupComm(hComm, 16*k, 16*k); 
            SetCommState(hComm, &dcb); 
            SetCommTimeouts(hComm, &timeouts); 
        } 
} 

static void closecomm (void) 
{ 
        CloseHandle(hComm); 
} 

static BYTE recv (void) 
{ 
    BYTE text; 
    DWORD temp; 

    COMSTAT comstat; 

        while (1) { 
            ClearCommError(hComm, &temp, &comstat); 
            if (comstat.cbInQue != 0) break; 

            Sleep(1); 
        } 

        ReadFile(hComm, &text, 1, &temp, NULL); 

        return text; 
} 

static void send (void) 
{ 
    DWORD temp; 

        // send to other comp 
        WriteFile(hComm, sendbuff, sizeof (sendbuff), &temp, NULL); 

        // check other comp done 
        if (recv() != 0xAA) { 
            Beep(1000, 100); 
            quit(); // comm error 
        } 
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T09:05:13.510

那是电缆。没有正确屏蔽和太长。

# laravel - 如何使用 Laravel 的 Blade 模板将变量传递给布局？

> ID：16118104
> 
> 赞同：106
> 
> 时间：2013-04-20T08:01:06.090
> 
> 标签：laravel, laravel-4, blade

在 Laravel 4 中，我的控制器使用 Blade 布局：

```
class PagesController extends BaseController {
    protected $layout = 'layouts.master';
} 
```

主布局输出变量标题，然后显示一个视图：

```
...
<title>{{ $title }}</title>
...
@yield('content')
.... 
```

但是，在我的控制器中，我似乎只能将变量传递给子视图，而不是布局。例如，一个动作可以是：

```
public function index()
{
    $this->layout->content = View::make('pages/index', array('title' => 'Home page'));
} 
```

这只会将`$title`变量传递给视图的内容部分。如何将该变量提供给整个视图，或者至少提供给主布局？

* * *

## 回答 #1

> 赞同：245
> 
> 时间：2015-03-29T21:38:54.460

如果您`@extends`在内容布局中使用，则可以使用：

```
@extends('master', ['title' => $title]) 
```

**请注意**，与上述相同的方法适用于儿童，例如：

> ```
> @include('views.subView', ['my_variable' => 'my-value']) 
> ```

## 用法

然后在变量被传递到的地方，像这样使用它：

```
<title>{{ $title ?? 'Default Title' }}</title> 
```

* * *

## 回答 #2

> 赞同：49
> 
> 时间：2016-06-13T12:55:43.463

对于未来使用 Laravel 5 的 Google 用户，您现在也可以将它与包含一起使用，

```
@include('views.otherView', ['variable' => 1]) 
```

* * *

## 回答 #3

> 赞同：23
> 
> 时间：2015-05-24T15:55:39.313

在 Blade 模板中：定义一个像这样的变量

```
@extends('app',['title' => 'Your Title Goes Here'])
@section('content') 
```

在 app.blade.php 或您选择的任何其他内容中（我只是遵循默认的 Laravel 5 设置）

```
<title>{{ $title or 'Default title Information if not set explicitly' }}</title> 
```

这是我在这里的第一个答案。希望它有效。祝你好运！

* * *

## 回答 #4

> 赞同：19
> 
> 时间：2013-06-10T07:10:50.170

通过将其添加到我的控制器方法中，我能够解决该问题：

```
 $title = 'My Title Here';
    View::share('title', $title); 
```

$this->layout->title = '主页'; 也没有工作。

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2016-05-13T07:25:35.397

最简单的解决方法：

```
view()->share('title', 'My Title Here'); 
```

或使用视图外观：

```
use View;

...

View::share('title', 'My Title Here'); 
```

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2013-04-20T08:04:02.447

似乎我可以使用布局对象上的属性将变量传递给整个布局，例如为了解决我的问题，我能够执行以下操作：

```
$this->layout->title = 'Home page'; 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2014-04-07T14:30:45.827

```
class PagesController extends BaseController {
    protected $layout = 'layouts.master';

    public function index()
    {
        $this->layout->title = "Home page";
        $this->layout->content = View::make('pages/index');
    }
} 
```

在 Blade Template 文件中，请记住在变量前面使用 @。

```
...
<title>{{ $title or '' }}</title>
...
@yield('content')
... 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2020-08-30T17:48:00.113

如果您想获取部分的变量，您可以像这样支付：

```
$_view      = new \View;
$_sections  = $_view->getFacadeRoot()->getSections();
dd($_sections);
/*
Out:
array:1 [▼
  "title" => "Painel"
]
*/ 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2021-06-29T12:37:07.477

以下是对我有用的简单解决方案。在布局中

```
 <title>@yield('Page-Title') </title> 
```

在你的刀片中

```
@section('Page-Title')
Add {{ucFirst($payor->name)}}
@endsection 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2019-10-19T07:34:44.913

试试这个简单的方法：在控制器中：-

```
 public function index()
   {
        $data = array(
            'title' => 'Home',
            'otherData' => 'Data Here'
        );
        return view('front.landing')->with($data);
   } 
```

在你的布局中（app.blade.php）：

```
<title>{{ $title }} - {{ config('app.name') }} </title> 
```

就这样。

* * *

## 回答 #11

> 赞同：-1
> 
> 时间：2013-08-02T08:00:24.993

你可以试试：

```
public function index()
{
    return View::make('pages/index', array('title' => 'Home page'));
} 
```

* * *

## 回答 #12

> 赞同：-2
> 
> 时间：2013-08-02T04:28:29.263

```
$data['title'] = $this->layout->title = 'The Home Page';
$this->layout->content = View::make('home', $data); 
```

到目前为止，我已经这样做了，因为我需要在视图和主文件中。似乎如果您不使用 $this->layout->title 它在​​主布局中将不可用。欢迎改进！

# ios - UITextView - 奇怪的文本剪辑

> ID：16118106
> 
> 赞同：3
> 
> 时间：2013-04-20T08:01:25.753
> 
> 标签：ios, iphone, objective-c, uitableview, uitextview

我已将 a`UITextView`放入 a`UITableViewCell`并按我想要的大小调整它。我可以看到大小已正确设置（通过设置文本视图的背景颜色）。. . 但是文本视图中的文本有奇怪的剪辑。

我怎样才能避免这种情况？

![在此处输入图像描述](https://i.stack.imgur.com/uq9lD.png)

更新：

*   我最终`UITextView`在一个全新的视图控制器中放置了一个空视图，*但仍然*注意到了这个问题。
*   下一步是创建一个新项目并开始一个一个地添加东西。
*   从单个视图控制器开始，并使用`UITextView`- 好的视图。
*   添加了带有方便视图放置方法的库 - 已损坏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T19:51:14.773

此问题是由为 UIView 放置添加一些便捷方法的库引起的。例如，它包含如下方法：

*   view.x = someFloat
*   view.width = someWidth

我怀疑与 UITextView 使用的内部方法存在命名空间冲突，我不确定是哪种方法导致了问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-20T09:51:52.963

在这一行：

```
_textView.frame = CGRectMake(self.x + 20, _label.y + _label.height, self.width - _label.x -14, 66); 
```

您将高度设置为 66。我不知道您应该在哪里将其设置为单元格高度。

不应该是这样的：

```
_textView.frame = CGRectMake(self.x + 20, _label.y + _label.height, self.width - _label.x -14, self.height - (_label.y+_label.height)); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-20T08:43:03.943

看起来您没有调整表格视图单元格的高度。实施

```
tableView:heightForRowAtIndexPath: 
```

根据 Eugene 的建议 - 您的内容大小调整也可能负责。请记住，`contentSize`只有在将文本视图添加到其父视图之后才会建立。也许你不应该设置`contentSize`自己。

# python - 如何在 IPython 笔记本中编写内联乳胶代码

> ID：16118112
> 
> 赞同：9
> 
> 时间：2013-04-20T08:01:49.367
> 
> 标签：python, latex, ipython

这可能很明显，但是如何在 IPython 笔记本文件中内联编写 Latex 脚本，以便在解析时不会开始新行？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-04-20T11:44:14.243

答案可以在这本有用的[食谱中找到](http://www.personal.ceu.hu/tex/cookbook.html)

内联使用`$...$`

显示使用`$$...$$`

# php - preg_replace 不忽略字符串中的 []

> ID：16118115
> 
> 赞同：0
> 
> 时间：2013-04-20T08:02:09.597
> 
> 标签：php, preg-replace

这是我的代码：

```
$string = "Hello this is my text [readmore] and this is remaining text";
echo preg_replace("[readmore]","",$string); 
```

这是我的**预期**输出：

```
Hello this is my text and this is remaining text 
```

这是我的**实际**输出：

```
Hello this is my text [] and this is remaining text 
```

问题也很简单，如何获得“[]”？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T08:13:12.910

你需要逃避`[`& `]`。试试下面的正则表达式，

```
preg_replace("/\[([^\[\]]++|(?R))*+\]/", "", $string); 
```

**输出：**

```
Hello this is my text and this is remaining text 
```

[**键盘演示。**](http://codepad.viper-7.com/VsDLVz)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-20T08:12:59.963

您需要转义括号以在正则表达式中使用。此外，您可能需要查看手册[`preg_replace`](http://php.net/manual/en/function.preg-replace.php)，因为您省略了`/`需要在您的正则表达式周围的内容。

```
$string = "Hello this is my text [readmore] and this is remaining text";
echo preg_replace("/\[readmore\]/","",$string); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-20T08:13:10.497

转义 '[' 和 ']' 字符：

这个脚本：

```
 $string = "Hello this is my text [readmore] and this is remaining text";
 echo preg_replace("[\\[readmore\\] ]","",$string); 
```

这个结果（我测试了这个）：

```
 Hello this is my text and this is remaining text 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-20T08:20:45.770

利用`str_replace`

```
$string = "Hello this is my text [readmore] and this is remaining text";
echo str_replace("[readmore]","",$string); 
```

**输出**

```
Hello this is my text and this is remaining text 
```

# javascript - DIV Hover 使另一个 DIV 移动

> ID：16118117
> 
> 赞同：1
> 
> 时间：2013-04-20T08:02:13.557
> 
> 标签：javascript

我想请你帮忙。

[http://jsfiddle.net/perRL/9/](http://jsfiddle.net/perRL/9/)

```
<div class="header-logo">
<a href="#"><img src="http://www.bendaggers.com/wp-content/themes/Anakin%20Skywalker/Images/BenDaggers%20Logo.PNG" /></a>
</div>

<div class="xbdlogo">
<img src="http://www.bendaggers.com/wp-content/themes/Anakin%20Skywalker/Images/Bendaggers%20Logo%20Two.PNG" />
</div> 
```

我想要做的是，当您将徽标“bendaggers”悬停时，它旁边的小徽标将从它的 css 样式（来自）**顶部：-50px；到顶部：30px；**

如果有人可以帮我在javascript上做到这一点？谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-20T08:04:36.330

如果我没有错，您正在实现这样的目标吗？

[**演示**](http://jsfiddle.net/perRL/10/)

仅 CSS 就足以完成工作

CSS

```
.header-logo:hover + .xbdlogo {
    top:40px;
    -webkit-transition:all 0.3s ease-in-out;
    -moz-transition:all 0.3s ease-in-out;
    -o-transition:all 0.3s ease-in-out;
    transition:all 0.3s ease-in-out;
} 
```

# google-maps-api-3 - 谷歌地图 v3 按地址或纬度对多个自定义标记进行地理编码

> ID：16118118
> 
> 赞同：0
> 
> 时间：2013-04-20T08:02:13.987
> 
> 标签：google-maps-api-3

我需要使用 MapsV3 api 通过地址或纬度/经度绘制多个自定义地图标记。我将以下代码放在一起，它适用于 lon/lat，但如果数据包含地址，则地理编码器不会返回任何内容。有想法该怎么解决这个吗。

```
 $(document).ready(function () { initialize(); });   

     function initialize() {
        var centerMap = new google.maps.LatLng(-27.0,133.0);

        var options = {
            panControl: false,
            zoomControl: true,
            scaleControl: false,
            mapTypeControl: false,
            streetViewControl: false,
            zoom: 3,
            center: centerMap,
            mapTypeId: google.maps.MapTypeId.ROADMAP
        }

        var map = new google.maps.Map(document.getElementById("map"), options);

                  var data = [
                    {
                    'title':'F C Building Construction ...',
                    'address':'', 
                    'zindex':20,
                    'lat':'-33.797847', 
                    'lon':'151.259928', 
                    'marker_number':1,
                    'marker_html':' html content...',
                    'image': {
                        url:'//localhost/assets/images/markers/marker_1.png', 
                        size: new google.maps.Size(24, 29), 
                        origin: new google.maps.Point(0,0), 
                        anchor: new google.maps.Point(10, 29)
                    }
                    }];

            setMarkers(map, data);

                    var infowindow = new google.maps.InfoWindow();

    }

    function showMapPin(i) { } 

    function setMarkers(map,data) {         
        var bounds = new google.maps.LatLngBounds();
        for (var i = 0; i < data.length; i++) {
            setMarker(map, data[i], bounds);
        }
        map.fitBounds(bounds);
    }

    function setMarker(map, m, bounds) {

        if(m["address"]!="") {
            var geocoder = new google.maps.Geocoder();
            geocoder.geocode( { "address": m["address"] }, function(results, status) {
                if (status == google.maps.GeocoderStatus.OK) {
                    var siteLatLng = results[0].geometry.location;
                } 
            });

        } else {
            var siteLatLng = new google.maps.LatLng(m["lat"], m["lon"]);
        }

        if(siteLatLng) {

            var marker = new google.maps.Marker({
                position: siteLatLng,
                map: map,
                //shadow: shadow,
                icon: m["image"],
                title: m["title"],
                zIndex: m["zindex"],
                html: m["marker_html"]
            });

            bounds.extend(siteLatLng);

            google.maps.event.addListener(marker, "click", function() {
                infowindow.setContent(this.html);
                infowindow.open(map, this);
            });

        } // if latlng  
    }//]]> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T09:19:46.547

回顾代码后，我意识到变量 siteLatLng 在地理编码函数范围内，因此它永远不会被传递，也无法返回。在此函数中设置标记有效。

# mysql - 关于在 LAMP 环境中安装 mysql

> ID：16118120
> 
> 赞同：0
> 
> 时间：2013-04-20T08:02:17.150
> 
> 标签：mysql, lamp

在ubuntu-12.10搭建LAMP环境的时候，我先用mysql-5.5.12.tar.gz安装了mysql，但是提示找不到configure文件，就在这里：

```
root@tryandchange-QTH6:/usr/local/src# cd mysql-5.5.12

root@tryandchange-QTH6:/usr/local/src/mysql-5.5.12# ./configure --prefix=/usr/local/mysql

bash: ./configure: 没有那个文件或目录(not exists the document or the file) 
```

谁能告诉我为什么？或者告诉我建立LAMP环境的好方法，但不是'apt-get install'。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T08:35:13.333

XAMPP 有可下载的 Linux 二进制文件，您只需下载、解压并运行`/path/to/xampp/xampp start`- 我推荐这些作为设置 LAMPP 堆栈的最简单方法。

[链接到 XAMPP for Linux](http://www.apachefriends.org/en/xampp-linux.html)

显然，通过避免使用 apt，您知道您的 apache/php/mysql 将过时，您将不得不努力确保它们的安全和最新。

# python - 使用 Python 语言解析 XML 时无法访问子节点

> ID：16118122
> 
> 赞同：1
> 
> 时间：2013-04-20T08:02:38.120
> 
> 标签：python, xml, python-2.7

我对 python 脚本语言非常陌生，最近正在研究一个解析基于 Web 的 xml 文件的解析器。

我可以在 python 中使用 minidom 检索除一个元素之外的所有元素，没有任何问题，但是我有一个节点，但我遇到了问题。我从 XML 文件中需要的最后一个节点是“图像”标签中的“url”，这可以在以下 xml 文件示例中找到：

```
<events>
    <event id="abcde01">
        <title> Name of event </title>
        <url> The URL of the Event <- the url tag I do not need </url>
        <image> 
            <url> THE URL I DO NEED </url>
        </image>
    </event> 
```

下面我复制了我认为可能相关的代码的简短部分。我非常感谢任何帮助以检索最后一个图像 url 节点。我还将包括我尝试过的内容以及在 GAE 中运行此代码时收到的错误。我使用的 python 版本是 Python 2.7，我可能还应该指出我将它们保存在一个数组中（以便以后输入到数据库）。

```
class XMLParser(webapp2.RequestHandler):
def get(self):
        base_url = 'http://api.eventful.com/rest/events/search?location=Dublin&date=Today'
        #downloads data from xml file:
        response = urllib.urlopen(base_url)
        #converts data to string
        data = response.read()
        unicode_data = data.decode('utf-8')
        data = unicode_data.encode('ascii','ignore')
        #closes file
        response.close()
        #parses xml downloaded
        dom = mdom.parseString(data)        
        node = dom.documentElement  #needed for declaration of variable
        #print out all event names (titles) found in the eventful xml
        event_main = dom.getElementsByTagName('event')

        #URLs list parsing - MY ATTEMPT - 
        urls_list = []
        for im in event_main:
            image_url = image.getElementsByTagName("image")[0].childNodes[0]
            urls_list.append(image_url) 
```

我收到的错误如下，非常感谢任何帮助，凯伦

```
image_url = im.getElementsByTagName("image")[0].childNodes[0]
IndexError: list index out of range 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T08:16:00.653

首先，不要*重新*编码内容。没有必要这样做，XML 解析器完全有能力处理编码的内容。

接下来，我将使用[ElementTree API](http://docs.python.org/2/library/xml.etree.elementtree.html)来完成这样的任务：

```
from xml.etree import ElementTree as ET

response = urllib.urlopen(base_url)
tree = ET.parse(response)

urls_list = []
for event in tree.findall('.//event[image]'):
    # find the text content of the first <image><url> tag combination:
    image_url = event.find('.//image/url')
    if image_url is not None:
        urls_list.append(image_url.text) 
```

这仅考虑`event`具有直接`image`子元素的元素。

# ruby-on-rails - Belongs_to 只能被控制台识别，不能被服务器识别

> ID：16118127
> 
> 赞同：0
> 
> 时间：2013-04-20T08:03:47.370
> 
> 标签：ruby-on-rails, foreign-keys, entity-relationship, models, belongs-to

我的项目遇到了一个非常奇怪的问题。我有 2 个模型，一个是 Link，另一个是 Category。我有一个索引视图，其中应列出所有链接以及相应的类别名称。运行服务器并尝试使用时

```
<%= link.category.name %> 
```

我收到一个错误页面，内容如下：

```
undefined method `name' for nil:NilClass 
```

但是当我打开控制台并写下：

```
link = Link.find(1) #there is currently only one link
link.category.name 
```

它返回正确的类别名称。

这是我的模型和 schema.rb：

```
class Link < ActiveRecord::Base
  attr_accessible :category_id, :description, :title, :url, :visible

  belongs_to :category

  scope :visible, lambda { where(visible: true) }
end 
```

.

```
class Category < ActiveRecord::Base
  attr_accessible :name

  has_many :links

end 
```

.

```
ActiveRecord::Schema.define(:version => 20130420070717) do

  create_table "categories", :force => true do |t|
    t.string   "name"
    t.datetime "created_at", :null => false
    t.datetime "updated_at", :null => false
  end

  add_index "categories", ["id"], :name => "index_categories_on_id"

  create_table "links", :force => true do |t|
    t.string   "title"
    t.text     "description"
    t.string   "url"
    t.integer  "category_id"
    t.boolean  "visible"
    t.datetime "created_at",  :null => false
    t.datetime "updated_at",  :null => false
  end

  add_index "links", ["category_id"], :name => "index_links_on_category_id"
  add_index "links", ["id"], :name => "index_links_on_id"
end 
```

这怎么可能发生？非常感谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T09:09:21.090

也许我可以帮助其他面临同样问题的人。

category_id 通过从数据库查询现有类别的表单分配给链接。

```
<%= f.select(:category_id, @categories.collect { |c| c.name }) %> 
```

我要分配的类别的 id = 1。从下拉菜单中选择类别后，link.category_id 为 0，它应该是 1。

更新：

我通过以下方式修复了错误的索引：

```
<%= f.collection_select :category_id, @categories, :id, :name, :prompt => "Select a category" %> 
```

# php - 如何使 PHP 库松耦合？

> ID：16118128
> 
> 赞同：2
> 
> 时间：2013-04-20T08:03:49.000
> 
> 标签：php, oop, language-agnostic

我的“框架”中有一些库，例如路由、配置、记录器……我希望它们彼此独立，就像一些众所周知的 PHP 框架一样。

我了解松散耦合的所有原则，但我不知道如何同时遵循松散耦合和 DRY 原则。如果我制作配置和记录器的路由库，那么我不会重复自己，但如果我想单独使用路由器，它将无法工作。同样，如果我将日志记录和配置代码写入我的路由库，我会重复自己。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-20T08:13:31.407

*松散耦合*通常意味着您的组件不需要具体实例，而只需要一个具有兼容接口的实例。

然后，每个协作者都可以替换为相同类型的不同协作者。该代码不再依赖于其中之一的具体实现。

所以：

*   不使用：

    *   全局（静态）函数

        ```
        Foo:bar(); 
        ```

    *   基于类的编程（传递类名）

        ```
        stream_wrapper_register("var", "VariableStream"); 
        ```

    *   全局常量

        ```
        if ( !defined('ABSPATH') )   
            define('ABSPATH', dirname(__FILE__) . '/'); 
        ```

*   但：

    *   使用对象

        ```
        $foo->bar(); 
        ```

    *   针对接口编程

        ```
        public function __construct(LoggerInterface $logger) { 
        ```

    *   使用模拟进行单元测试

        ```
        $logger = $this->getMock('LoggerInterface', array('log')); 
        ```

另见：

*   [不要愚蠢：抓牢！（2011 年 12 月；由 NikiC）](http://nikic.github.io/2011/12/27/Dont-be-STUPID-GRASP-SOLID.html)

# xslt - XSLT 1.0：如何打印两个的第一个非空值（见内部）

> ID：16118130
> 
> 赞同：3
> 
> 时间：2013-04-20T08:04:04.917
> 
> 标签：xslt, attributes

我想获得两个的第一个非空值并将其放入文本输入的“值”属性中。所以，我这样做：

```
<input type="text">
  <xsl:attribute name="value">
    <xsl:choose>
      <xsl:when test="some/@attr != ''">
        <xsl:value-of select="some/@attr" />
      </xsl:when>
      <xsl:otherwise>
        <xsl:value-of select="some/another/@attr" /> <!-- always non-empty, so get it -->
      </xsl:otherwise>
    </xsl:choose>
  </xsl:attribute>
</input> 
```

问题是：有没有办法用更少的代码行？..也许，像那样：`<input type="text" value="some/@attr or some/another/@attr" />`或者什么？..就像在 Perl 中：`my $val = 0 || 5;`

在此先感谢您的帮助

UPD XSLT 1.0

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-20T09:11:46.537

如果你使用

```
<xsl:attribute name="value">
  <xsl:value-of select="some/@attr[. != ''] | some/another/@attr"/>
</xsl:attribute> 
```

然后使用 XSLT 1.0语义输出`value-of`选择的第一个节点的字符串值。`some/@attr[. != ''] | some/another/@attr`因此，如果`some/@attr[. != '']`选择一个节点，它应该被输出，否则`some/another/@attr`（我认为在文档顺序中`some/@attr`被认为是前面的）。`some/child-element/@attr`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-21T16:18:46.660

**甚至可以避免联合**：

```
<input type="text" 
       value="{some/@attr[string(.)]}{some[not(string(@attr))]/another/@attr}">
</input> 
```

**在这里，我们还避免了所有其他给定答案共有的两个属性的优先级依赖性**——我们不假设第一个属性在文档顺序中位于第二个属性之前。

**我们可以编写这个等效的代码，颠倒两个 AVT 的顺序**：

```
<input type="text" 
       value="{some[not(string(@attr))]/another/@attr}{some/@attr[string(.)]}">
</input> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-20T09:48:13.430

接力魔术已经在@Martin Honnen 的答案中。作为增强，为了让它更短一点，你可以使用“属性值模板”

```
<input type="text" value="{some/@attr[. != ''] | some/another/@attr}">
</input> 
```

# java - 正则表达式中的性能问题

> ID：16118131
> 
> 赞同：2
> 
> 时间：2013-04-20T08:04:17.703
> 
> 标签：java, regex, optimization, pattern-matching, matcher

我的 REST 服务在重负载下运行，这意味着它每天会获得大约数百万次读取调用的大量流量。我的 REST 服务将根据用户 ID 从数据库中进行查找，并检索与该用户 ID 对应的几列列。

所以我目前在我的代码中看到了高性能问题。我怀疑下面的方法将是我首先应该开始优化的方法之一。

下面的方法将接受一个`attributeName`然后基于它会使用正则表达式给我匹配。

举个例子——如果`attrName`是`technology.profile.financial`

那么下面的方法会将我返回为`technology.profile`. 这样它也适用于其他情况。

```
private String getAttrDomain(String attrName){
    Pattern r = Pattern.compile(CommonConstants.VALID_DOMAIN);
    Matcher m = r.matcher(attrName.toLowerCase());
    if (m.find()) {
      return m.group(0);
    }
    return null;
} 
```

在`CommonConstants`类文件中

```
String  VALID_DOMAIN = "(technology|computer|sdc|adj|wdc|pp|stub).(profile|preference|experience|behavioral)"; 
```

我只是想看看，这里是否可能存在一些性能问题或不使用上面的正则表达式？如果是，那么在牢记性能问题的情况下，再次重写这个东西的最佳方法是什么？

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-20T08:33:47.313

我用 caliper 测试了这个和这个，结果是：如果你在每个方法调用之前编译 Pattern，这将是最快的方法。

**您的正则表达式方法是最快的方法，但是**您需要做的唯一更改是预先计算 Pattern ，而不是每次：

```
 private static Pattern p = Pattern.compile(VALID_DOMAIN); 
```

然后在你的方法中：

```
 Matcher matcher = pattern.matcher(input); ... 
```

对于感兴趣的人，这是我用于卡尺的设置：--warmupMillis 10000 --runMillis 100

```
 package stackoverflow;

 import java.util.regex.Matcher;
 import java.util.regex.Pattern;

 import com.google.caliper.Param;
 import com.google.caliper.Runner;
 import com.google.caliper.SimpleBenchmark;
 import com.google.common.base.Splitter;
 import com.google.common.collect.Iterables;

 public class RegexPerformance extends SimpleBenchmark {
      private static final String firstPart    = "technology|computer|sdc|adj|wdc|pp|stub";
      private static final String secondPart   = "profile|preference|experience|behavioral";
      private static final String VALID_DOMAIN = "(technology|computer|sdc|adj|wdc|pp|stub)\\.(profile|preference|experience|behavioral)";

      @Param({"technology.profile.financial", "computer.preference.test","sdc.experience.test"})
      private String input;

      public static void main(String[] args) {
           Runner.main(RegexPerformance.class, args);
      }

      public void timeRegexMatch(int reps){
          for(int i=0;i<reps;++i){
              regexMatch(input);
          }
      }

      public void timeGuavaMatch(int reps){
          for(int i=0;i<reps;++i){
              guavaMatch(input);
          }
      }

      public void timeRegexMatchOutsideMethod(int reps){
          for(int i=0;i<reps;++i){
              regexMatchOutsideMethod(input);
          }
      }

    public String regexMatch(String input){
        Pattern p = Pattern.compile(VALID_DOMAIN);
        Matcher m = p.matcher(input);
        if(m.find()) return m.group();
        return null;
    }

    public String regexMatchOutsideMethod(String input){
          Matcher matcher = pattern.matcher(input);
          if(matcher.find()) return matcher.group();
          return null;
    }

    public String guavaMatch(String input){
        Iterable<String> tokens = Splitter.on(".").omitEmptyStrings().split(input);
        String firstToken  = Iterables.get(tokens, 0);
        String secondToken = Iterables.get(tokens, 1);
        if( (firstPart.contains(firstToken) ) && (secondPart.contains(secondToken)) ){
            return firstToken+"."+secondToken;
        }
        return null;
    }
} 
```

以及测试结果：

```
 RegexMatch technology.profile.financial 2980 ========================
             RegexMatch     computer.preference.test 2861 =======================
            RegexMatch           sdc.experience.test 3683 ==============================
RegexMatchOutsideMethod technology.profile.financial  179 =
RegexMatchOutsideMethod     computer.preference.test  227 =
RegexMatchOutsideMethod           sdc.experience.test  987 ========
             GuavaMatch technology.profile.financial  406 ===
             GuavaMatch     computer.preference.test  421 ===
            GuavaMatch           sdc.experience.test  382 === 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-20T09:16:39.530

两个小点：

除了在函数之外编译表达式，如评论中所述，您可以进行`()`非捕获，因此不保存每个匹配的内容，即

```
String  VALID_DOMAIN = "(?:technology|computer|sdc|adj|wdc|pp|stub)\\.(?:profile|preference|experience|behavioral)"; 
```

如果有效域必须始终出现在属性名称的开头，您也许可以使用该`lookingAt`方法而不是`find`，因此匹配可能会更快失败，即

```
 if (m.lookingAt()) { 
```

如果表达式是在函数之外编译的，你可以添加`Pattern.CASE_INSENSITIVE`这样，那么你就不必每次都调用`toLowerCase()`了。`attrName`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-20T09:24:49.917

有什么理由不能将正则表达式保存为 Pattern ratter 而不是字符串？如果正则表达式永远不会改变，那么每次使用它时都会浪费大量时间重新编译正则表达式。对于这样一个简单的模式，编译正则表达式可能比实际匹配它花费更多的时间。

至于正则表达式本身，我建议进行一些更改。这些更改将使正则表达式更加高效，但可能不足以引起注意。目的是让它更健壮。

*   `foo_technology.profile`将其括在单词边界中以避免像or之类的字符串出现误报`technology.profile_bar`。我敢肯定你知道这种事情会发生在你的身上，但既然如此容易避免，为什么还要冒最小的风险呢？
*   正如[@plaix 建议](https://stackoverflow.com/questions/16118131/performance-issues-in-regular-expression#comment23020316_16118131)的那样，避开点。
*   使用非捕获组而不是捕获。（假设您真的不需要分解属性名称的各个组成部分。）

```
static final Pattern VALID_DOMAIN_PATTERN = Pattern.compile(
    "\\b(?:technology|computer|sdc|adj|wdc|pp|stub)\\.(?:profile|preference|experience|behavioral)\\b"); 
```

# asp.net-mvc - 在 redirect_uri 中指定 QueryString 参数

> ID：16118137
> 
> 赞同：0
> 
> 时间：2013-04-20T08:05:24.953
> 
> 标签：asp.net-mvc, facebook, facebook-graph-api

我已经使用 facebook 功能实现了 Signup，它工作正常，现在我必须在 中指定一个参数`redirect_uri`，我已经指定了它，但是当我访问 FB 时，它给出了错误：

> (OAuthException) 验证验证码时出错。请确保您的 redirect_uri 与您在 OAuth 对话请求中使用的相同

如果我`redirect_uri`是这个

```
http://localhost:5000/SignUp/FBOAuth 
```

它工作正常，但是当我指定这样的参数时（这个参数可以有空值）

```
http://localhost:5000/SignUp/FBOAuth?CheckOut= 
```

或者

```
http://localhost:5000/SignUp/FBOAuth?CheckOut= 
```

它开始给出错误，是否可以在中指定参数`redirect_uri`？我在 facebook 开发者的网站上读到它是一个错误，[这里](http://developers.facebridge.net/bugs/589787261035915?browse=search_512d2c9d8a9a96143590858)

# web-applications - 跨平台应用部署工具

> ID：16118138
> 
> 赞同：1
> 
> 时间：2013-04-20T08:05:46.993
> 
> 标签：web-applications, mobile, deployment, sencha-touch

我用 Sencha Touch 开发了一个移动应用程序，目前在 iOS 和 Android 设备上运行。它也适用于 Chrome 和 Safari，它也是 Chrome 打包的应用程序，可从 Chrome Web Store 访问。它具有 PHP 部分，这是应用程序的骨干。因为源代码是开源的，您可以在 github [https://github.com/umrashrf/IQRA-University-Smartphone-App](https://github.com/umrashrf/IQRA-University-Smartphone-App)上查看整个结构。

现在一切都很酷，除了部署这个应用程序很痛苦。每当我更改**/sencha**文件夹中的任何内容时，我都必须更新**/android**、**/ios**和**ftp** chnaged 的​​东西。请注意，我只是不将这些文件夹替换为**/sencha**文件夹，但也需要修改一些文件。例如，要为 web 提供 ftp 内容，我必须确保 /sencha/index.html 中没有**cordova.js**但 android 和 iOS 版本有。另外因为**/sencha/app.js**中的**BaseURL**是开发模式下的相对 URL，我必须将其更改为 android 和 iOS 生产版本的绝对 Internet URL。

是否有一个部署工具可以告诉我将哪些文件发送到**/android**、**/iOS**和**ftp**？并且还以某种方式指定为不同的生产版本更改一些文件？

**更新**

此外，当我为 android 和 iOS 构建时，我必须增加它们的版本代码以进行部署。

我正在寻找一键式部署工具。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T16:54:59.337

根据我的理解，听起来您在描述已**修补的应用程序模式**，其中您有一个代码库，通过在编译之前或之后应用补丁程序最终将其转换为多个不同的应用程序。

这种模式在“准定制”软件中很常见，其中有一个为每个客户定制的“产品”。核心代码库是共享的，每个客户都有自己的调整（无论是徽标文件、运行时发现文件、.cs 文件中的更改等），这些调整在构建步骤之前或之后应用。

我看到这种模式在[BuildMaster](http://inedo.com)中使用了几种不同的技术实现了很多。一个应用程序中的多个可部署项（如果它们总是同时部署），或者使用“导入的可部署”（如果每个实例可以在不同时间部署）。

# ruby-on-rails - Rails 3 表单的简单自定义发布操作

> ID：16118139
> 
> 赞同：1
> 
> 时间：2013-04-20T08:05:49.247
> 
> 标签：ruby-on-rails, ruby-on-rails-3.2

我在`ActionView::MissingTemplate`不需要视图的表单控制器操作上遇到了一个错误，因为它将参数数据传递给控制器​​，然后控制器将发布 API 请求。

```
# Newsletter controller

def index
end

def subscribe
  Gibbon.list_subscribe({:id => "my-list-id", :email_address => params[:email]})
end 
```

在我的路线中：

```
# Routes
match "/subscribe", to: "newsletter#subscribe", :via => :post 
```

查看我的表单所在的位置

```
# newsletter/index.html.erb
<%= form_tag subscribe_path, class: "form", remote: true do %>
    <%= text_field_tag :email, nil, :class => 'email', :type=>"email", :placeholder => 'Sign up for newsletter' %>
    <%= submit_tag "Go", class: "submit-button"%>
<% end %> 
```

从通讯索引页面有一个表格，我想做的就是将用户电子邮件地址的请求发送到我的订阅操作

```
Error:

Started POST "/subscribe" for 127.0.0.1 at 2013-04-20 18:01:02 +1000
Processing by HomeController#subscribe as JS
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"ZseTNfGI5151hk7fIhQH5/l536hc9/kdARf57352Y=", "email"=>"test-user@email.com", "commit"=>"Go"}
Completed 500 Internal Server Error in 1836ms

ActionView::MissingTemplate (Missing template home/subscribe, application/subscribe with {:locale=>[:en], :formats=>[:js, "application/ecmascript", "application/x-ecmascript", :html, :text, :js, :css, :ics, :csv, :png, :jpeg, :gif, :bmp, :tiff, :mpeg, :xml, :rss, :atom, :yaml, :multipart_form, :url_encoded_form, :json, :pdf, :zip], :handlers=>[:erb, :builder, :coffee]}. Searched in:
  * "/Code/myapp/app/views"
): 
```

以上是我收到的错误。我想知道如何假装这个模板问题，因为该操作不需要视图。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T08:43:48.933

你可以试试这个

```
def subscribe
  if request.post?
    Gibbon.list_subscribe({:id => "my-list-id", :email_address => params[:email]})
    redirect_to root_url, :notice => 'Success'
  else
    redirect_to some_place
  end
end 
```

在您的路线中

```
post "/subscribe", to: "newsletter#subscribe" 
```

检查您的路线以双重确认

# r - 从多个 URL 自动下载，处理反馈对话框 / cookie

> ID：16118140
> 
> 赞同：2
> 
> 时间：2013-04-20T08:05:52.320
> 
> 标签：r, cookies, download, rcurl

我尝试从[该站点](http://www.eea.europa.eu/data-and-maps/data/clc-2006-vector-data-version-2)批量下载 CORINE Landcover zip 文件，但我认为来自 Google Analytics 的相互关联的反馈调查窗口在这里造成了麻烦。这些问题是否有某种 Curl 处理程序？

我在 sqlite manager 中查看了 cookie，这些是条目：baseDomain = "europa.eu", name = "clc06_c133.zip", value = "sectors%3Denvironment", host = "www.eea.europa.eu",。 . cookie 路径是“C:\Users\Kay\AppData\Roaming\Mozilla\Firefox\Profiles\ckut8fjm.default\cookies.sqlite”

```
setwd("D:/GIS DataBase/CorineLC/")

mylist <- list(
clc06_1 <- "111 - Continuous urban fabric",
clc06_2 <- "112 - Discontinuous urban fabric",
clc06_3 <- "121 - Industrial or commercial units",
clc06_4 <- "122 - Road and rail networks and associated land",
clc06_5 <- "123 - Port areas",
clc06_6 <- "124 - Airports",
clc06_7 <- "131 - Mineral extraction sites",
clc06_8 <- "132 - Dump sites",
clc06_9 <- "133 - Construction sites",
clc06_10 <- "141 - Green urban areas",
clc06_11 <- "142 - Sport and leisure facilities",
clc06_12 <- "211 - Non-irrigated arable land",
clc06_13 <- "212 - Permanently irrigated land",
clc06_14 <- "213 - Rice fields",
clc06_15 <- "221 - Vineyards",
clc06_16 <- "222 - Fruit trees and berry plantations",
clc06_17 <- "223 - Olive groves",
clc06_18 <- "231 - Pastures",
clc06_19 <- "241 - Annual crops associated with permanent crops",
clc06_20 <- "242 - Complex cultivation patterns",
clc06_21 <- "243 - Land principally occupied by agriculture, with significant areas of natural vegetation",
clc06_22 <- "244 - Agro-forestry areas",
clc06_23 <- "311 - Broad-leaved forest",
clc06_24 <- "312 - Coniferous forest",
clc06_25 <- "313 - Mixed forest",
clc06_26 <- "321 - Natural grasslands",
clc06_27 <- "322 - Moors and heathland",
clc06_28 <- "323 - Sclerophyllous vegetation",
clc06_29 <- "324 - Transitional woodland-shrub",
clc06_30 <- "331 - Beaches, dunes, sands",
clc06_31 <- "332 - Bare rocks",
clc06_32 <- "333 - Sparsely vegetated areas",
clc06_33 <- "334 - Burnt areas",
clc06_34 <- "335 - Glaciers and perpetual snow",
clc06_35 <- "411 - Inland marshes",
clc06_36 <- "412 - Peat bogs",
clc06_37 <- "421 - Salt marshes",
clc06_38 <- "422 - Salines",
clc06_39 <- "423 - Intertidal flats",
clc06_40 <- "511 - Water courses",
clc06_41 <- "512 - Water bodies",
clc06_42 <- "521 - Coastal lagoons",
clc06_43 <- "522 - Estuaries",
clc06_44 <- "523 - Sea and ocean")

# extract the CLC codes which are the 3-digit number in the string:
foo1 <- function(x) unlist(strsplit(x, " - "))[[1]]
# and the names
foo2 <- function(x) unlist(strsplit(x, " - "))[[2]]

codes <- sapply(mylist, foo1, simplify = T)
names <- sapply(mylist, foo2, simplify = T)

# make urls
names_url <- gsub(",", "",  gsub("\\s", "-", names))
dl_url <- paste0("http://www.eea.europa.eu/data-and-maps/data/clc-2006-vector-data-version-2/",
                 codes, "-", names_url, "/clc06_c", codes, ".zip/at_download/file")

# get zip file names
get_zip_name <- function(x) unlist(strsplit(x, "/"))[grep(".zip", unlist(strsplit(x, "/")))]

# function to plug into sapply
dl_url_to_zip <- function(x) download.file(x, dest = get_zip_name(x))

# gives http status 404!
sapply(dl_url, dl_url_to_zip) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-20T12:22:06.437

您可以使用该`httr`软件包：

```
require(httr)
require(XML)

response <- GET("http://www.eea.europa.eu/data-and-maps/data/clc-2006-vector-data-version-2")
doc <- htmlParse(content(response,as="text"))
files <- xpathSApply(doc,'//*/a[contains(@href,"http://www.eea.europa.eu/data-and-maps/data/clc-2006-vector-data-version-2/")]/@href')
files <- files[-c(1,47:50)]

files[10]
#href 
#"http://www.eea.europa.eu/data-and-maps/data/clc-2006-vector-data-version-2/141-green-urban-areas/clc06_c141.zip/at_download/file" 
dl_url[10]
#[1] "http://www.eea.europa.eu/data-and-maps/data/clc-2006-vector-data-version-2/141-Green-urban-areas/clc06_c141.zip/at_download/file" 
```

注意你有大写`Green-urban-areas`而不是`green-urban-areas`

```
response <- GET(files[10])
writeBin(content(response),'test.zip') 
```

我从`httr`package 开始，因为我认为我们可能需要 cookie。实际上

```
download.file(files[10],'test.zip',mode="wb") 
```

也会同样有效。原始代码中的错误是大写。

# php - 如何在字符串 PHP 的末尾添加 A 到 Z

> ID：16118142
> 
> 赞同：0
> 
> 时间：2013-04-20T08:06:04.540
> 
> 标签：php, concatenation, increment

我正在做的是获取车辆 VIN 号并获取它的最后 6 位数字并将其存储为库存号。我遇到的问题是我有一个函数可以检查数据库以确保库存号存在。如果是这样（可以通过回购等再次将相同的车辆放入库存中），我想在 A 到 Z 的结尾处连接。

```
if(strlen($vin) > 9) {
    $stocknum = substr($vin,-6);
    while(verfiyUnique($mysqli, $stocknum) != true) {
        if(strlen($stocknum < 7)) {
            $stocknum = substr($vin,-6) . "A";
        }else{
            ?
        }
    }
    return $stocknum; 
```

如果匹配，我如何增加让我们说 A 到 B 或 B 到 C？

在此先感谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T08:09:27.510

您可以增加 ascii 编号并使用该`chr()`函数将其转换为相关字符。例如：`chr(65)`会输出`A`

有关更多信息以及指向 ASCII 表的链接，请参见[http://php.net/manual/en/function.chr.php 。](http://php.net/manual/en/function.chr.php)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-20T08:14:57.003

您还可以使用`$letters = range('A','Z')`创建一个大写字母数组，然后增加一个索引变量来访问该数组。例如：`$letters[$i]`会输出`A`

# php - mysql / php - 3 个表（如果存在数字）

> ID：16118147
> 
> 赞同：0
> 
> 时间：2013-04-20T08:06:55.127
> 
> 标签：php, html, mysql, random

我有个问题，

我正在为浏览器游戏建立一个自己的注册表单。

我必须将地球放在用户得到的寄存器上。

所以我有：9 个星系，每个星系有 400 个系统，每个系统最多可以有 15 个行星。表：星系、系统、行星。

现在我正在创建兰特数字，它工作正常。它创造了行星，但我不知道如何检查一个星系是否已满，或者一个系统是否已经有 15 个行星可供下一个。

有人知道如何解决吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T08:18:17.873

在 SQL 方面假设是链接到`system_id`的外键：`planets``systems`

```
SELECT system_id, COUNT(system_id) 
FROM planets 
GROUP BY system_id; 
```

这应该为您提供每个系统（ID）以及其中的行星数量。

```
system_id  |  count
1             12
2             10
...           ... 
```

在 php 方面，您将使用此数组查看是否有任何已达到 15 并停止分配给它。

# database - 数据库设计问题

> ID：16118151
> 
> 赞同：1
> 
> 时间：2013-04-20T08:07:29.200
> 
> 标签：database

我有两个关于项目的问题。如果我能得到澄清，将不胜感激。

1.  我通过分解为最小单位将地址分解为单个实体。Bur 地址在几个表中重复。像地址字段一样存在于 `Client`表中以及`Employee`表中。我们是否应该将地址分隔到一个单独的表中，其中只有一个链接字段

    **例如**

2.  创建`ADDRESS`具有以下属性的表：

    *   Entity_ID（可以是员工 ID（家庭地址）或客户 ID（办公室地址））
    *   单元
    *   建造
    *   街道
    *   地方性
    *   城市
    *   状态
    *   国家
    *   邮政编码
3.  从`Employee`表格和`Client`表格中删除所有地址字段

我们可以通过获取`employee`ID并参考`ADDRESS`地址表来获取地址

哪种方法更好？在所有表中都有地址字段或分开，如上所示。关于哪种设计更好的想法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-20T08:15:57.310

亚肯定分开地址更好因为人们可以有多个地址，所以它会增加数据冗余。

根据我的说法，您可以通过两种方式为这个问题设计数据库。

A. 使用一张桌子

表名 --- **ADDRESS**

*列名*

1.  序列号（唯一 ID 或主键）
2.  客户/员工 ID
3.  地址。

B. 使用两个表

表名 --- **CLIENT_ADDRESS**

*列名*

1.  序列号（唯一 ID 或主键）
2.  客户 ID（客户表的外键）
3.  地址。

表名 --- **EMPLOYEE_ADDRESS**

*列名*

1.  序列号（唯一 ID 或主键）
2.  客户 ID（员工表的外键）
3.  地址。

**当然，您可以使用尽可能多的列而不是地址，例如您提到的 Unit、Building、Street 等**

***根据我的经验，还有一个建议***

请在您的每个表格中添加这五列。

1.  CREATED_BY（创建此行的人表示应用程序的用户）
2.  CREATED_ON（创建表行的时间和日期）
3.  MODIFIED_ON（修改此行的人表示应用程序的用户）
4.  MODIFIED_BY（修改表行的时间和日期）
5.  DELETE_FLAG（0 -- 已删除和 1 -- 激活）

从大多数开发人员的角度来看，这样做的原因是，您的客户可以随时要求任何时间段的记录。因此，如果您在现实中删除，那么这对您来说将是一个严重的情况。因此，每当应用程序用户从 gui 中删除记录时，您必须将标志设置为 0 而不是实际删除它。默认值为 1，表示该行仍处于活动状态。

在检索时，您可以像这样选择 where 条件

```
select * from EMPOLOYEE_TABLE where DELETE_FLAG = 1; 
```

**注意：**这是根据我的经验提出的建议。我一点也不强迫你采用这个。所以请根据您的要求添加它。

没有任何重要用途的表也不需要这个。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-20T08:10:36.513

将地址分成单独的表是一个更好的设计决策，因为这意味着任何数据库端验证逻辑等只需要在一个地方维护。

# asp.net-mvc-4 - System.Web.Security.Roles.GetRolesForUser(currentUser.Identity.Name) 只需一次即可

> ID：16118154
> 
> 赞同：1
> 
> 时间：2013-04-20T08:07:57.347
> 
> 标签：asp.net-mvc-4, roles, roleprovider

在 Internet mvc 4 项目中，当以调试模式运行项目并登录到应用程序时，将识别之前分配的用户角色。我用于获取用户角色的功能是：

```
System.Web.Security.Roles.GetRolesForUser(currentUser.Identity.Name) 
```

但是当我停止调试并再次以调试模式运行应用程序时，用户已通过身份验证，但 GetRolesForUser 返回字符串 [0]。为什么它会发生并且不返回角色？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-06-15T07:46:18.743

我有同样的问题，我修复了它，改变了寻找角色的方式：

```
var manager = new UserManager<ApplicationUser>(new UserStore<ApplicationUser>(new PlutusDbContext()));

var user = manager.FindByName(currentUser.Identity.Name);
var userRoles = manager.GetRoles(user.Id); 
```

PS：我正在使用 Microsoft.AspNet.Identity 2.0.1

# c++ - 用户定义的无序映射散列函数

> ID：16118155
> 
> 赞同：3
> 
> 时间：2013-04-20T08:08:12.057
> 
> 标签：c++, hash, unordered-map

我已经为 unrorderd_map 定义了我自己的哈希函数。但我无法使用 find 功能在容器中搜索。我尝试在散列函数中使用打印语句进行调试，它生成的散列值与插入键/值时生成的散列值相同。如果有人能指出错误，那就太好了。我在 Windows 上使用 Eclipse IDE，并且正在使用 -std=c++11 进行编译

```
typedef struct tree node;

struct tree
{
int id;
node *left;
node *right;
};

class OwnHash
{
public:
    std::size_t operator() (const node *c) const
    {
       cout << "Inside_OwnHash: " <<std::hash<int>()(c->id) + std::hash<node *>()(c->left) + std::hash<node *>()(c->right) << endl;
       return std::hash<int>()(c->id) + std::hash<node *>()(c->left) + std::hash<node *>()(c->right);
    }
};

int main()
{
std::unordered_map<node *,node *,OwnHash> ut;

node * one = new node;
one->id = -1;
one->left = nullptr;
one->right = nullptr;
ut.insert({one,one});

node * zero = new node;
zero->id = 0;
zero->left = NULL;
zero->right = NULL;
ut.insert({zero,zero});

node * cur = new node;
cur->id = 5;
cur->left = zero;
cur->right = one;
ut.insert({cur,cur});

for (auto& elem : ut)
{
    std::cout << "key: " << elem.first << "\t" << "value: " << elem.second->id << std::endl;
}

node * parse = new node;
parse->id = 5;
parse->left = zero;
parse->right = one;

std::unordered_map<node *,node *>::const_iterator got1 = ut.find (parse);

if ( got1 == ut.end() )
    std::cout << "not found";
else
    std::cout << got1->first << " is " << got1->second->id << std::endl;

return EXIT_SUCCESS;
}

    Output:
    Inside_OwnHash: 4294967295
    Inside_OwnHash: 0
    Inside_OwnHash: 22946517
    key: 0xaf11b0   value: 5
    key: 0xaf1180   value: 0
    key: 0xaf1150   value: -1
    Inside_OwnHash: 22946517
    not found 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-20T08:30:09.020

哈希是不够的，你还必须实现相等比较！

散列必须是一个函数，如果项目相等，则它们的散列相等。但是由于项目可能是任意复杂的，并且哈希结果只是 size_t，因此相反的含义不成立，也不能成立。因此，要找到确切的元素，您也需要进行相等比较。

查找时，哈希函数将其指向正确的“桶”，但其中可能有多个元素，或者那里可能有一个元素，但不是您要查找的那个。因此，它获取存储桶中的所有元素并将每个元素与您正在搜索的元素进行比较。

现在您提供了一个哈希函数，但没有提供相等比较器。因此它使用默认值，即`operator==`用于定义为比较地址的指针。并且地址*不*相等。您需要提供比较值的相等函子。

# c++ - C++ 中的错误 LNK1120 和 LNK 2019

> ID：16118156
> 
> 赞同：0
> 
> 时间：2013-04-20T08:08:20.817
> 
> 标签：c++, visual-studio-2010, visual-studio, visual-c++, c++11

我的程序中有一个致命错误，如下所示：

```
Error   1   error LNK2019: unresolved external symbol "public: void __thiscall ApplicationManager::AddConnector(class Connector *)" (?AddConnector@ApplicationManager@@QAEXPAVConnector@@@Z) referenced in function "public: virtual void __thiscall AddConnectors::Execute(void)" (?Execute@AddConnectors@@UAEXXZ) C:\Users\akabbag\Desktop\Programming\CMP103 Project S2013 - ALL Docs - Students\Project Framework\AddConnectors.obj 
```

和

```
Error   2   error LNK1120: 1 unresolved externals 
```

......................

我所做的一切就是我有一个名为 ApplicationManager.cpp 的类及其 .h 文件，该文件从一个名为 (AddConnectors) 的类中调用一个新对象，该类继承自一个抽象类 (Actions)，该类从类 Connectors (包含我使用的一些功能）这是我在（AddConnectors.cpp）类中包含的工作序列：

```
#include "AddConnectors.h"
#include "..\ApplicationManager.h" 
```

在 (AddConnectors.h) 中：

```
#include "Action.h"
#include "..\Statements\Connector.h" 
```

我还定义了：

```
#ifndef ADD_CONNECTORS_H
#define ADD_CONNECTORS_H 
```

`#endif`最后_

.................... 说真的，我不知道为什么会出现这个错误.. 我读了很多关于这些错误的文章，我发现其中一个问题可能是错误的定义（AddConnectors）的.h文件，但没有我还发现项目可能从一开始就错误地构建了所以我做了一个新项目Console Win 32！所以有什么建议吗？

# java - 如何用“-”分隔[String]并在android上制作多列？

> ID：16118159
> 
> 赞同：0
> 
> 时间：2013-04-20T08:08:40.183
> 
> 标签：java, android, sqlite

我正在研究可搜索的字典。它的原始数据库由“-”分隔，如

```
ColumnA(Key_Word)     ColumnB(Key_defination)
Apple                 - One kind of Fruit
Mango                 - One fruit also 
```

但我想让它成为 3 列，（C 列将是 Key_details）

```
ColumnA          ColumnB                 ColumnC (Key_details)
Apple          - One kind of Fruit     - Round shape
Mango          - One fruit also        - Found in Bangladesh 
```

当人们搜索 A 时，应用程序将显示 B 列和 C 列。我拆分字符串的原因是我想在不同的窗口上显示 B 列和 C 列。怎么做？这是我的来源-

```
/**
 * Contains logic to return specific words from the dictionary, and
 * load the dictionary table when it needs to be created.
 */
public class DictionaryDatabase {
    private static final String TAG = "DictionaryDatabase";

    //The columns we'll include in the dictionary table
    public static final String KEY_WORD = SearchManager.SUGGEST_COLUMN_TEXT_1;
    public static final String KEY_DEFINITION = SearchManager.SUGGEST_COLUMN_TEXT_2;

    private static final String DATABASE_NAME = "dictionary";
    private static final String FTS_VIRTUAL_TABLE = "FTSdictionary";
    private static final int DATABASE_VERSION = 2;

    private final DictionaryOpenHelper mDatabaseOpenHelper;
    private static final HashMap<String,String> mColumnMap = buildColumnMap();

    public DictionaryDatabase(Context context) {
        mDatabaseOpenHelper = new DictionaryOpenHelper(context);
    }

    private static HashMap<String,String> buildColumnMap() {
        HashMap<String,String> map = new HashMap<String,String>();
        map.put(KEY_WORD, KEY_WORD);
        map.put(KEY_DEFINITION, KEY_DEFINITION);
        map.put(BaseColumns._ID, "rowid AS " +
                BaseColumns._ID);
        map.put(SearchManager.SUGGEST_COLUMN_INTENT_DATA_ID, "rowid AS " +
                SearchManager.SUGGEST_COLUMN_INTENT_DATA_ID);
        map.put(SearchManager.SUGGEST_COLUMN_SHORTCUT_ID, "rowid AS " +
                SearchManager.SUGGEST_COLUMN_SHORTCUT_ID);
        return map;
    }

    public Cursor getWord(String rowId, String[] columns) {
        String selection = "rowid = ?";
        String[] selectionArgs = new String[] {rowId};

        return query(selection, selectionArgs, columns);

    }

    public Cursor getWordMatches(String query, String[] columns) {
        String selection = KEY_WORD + " MATCH ?";
        String[] selectionArgs = new String[] {query+"*"};

        return query(selection, selectionArgs, columns);
    }

    private Cursor query(String selection, String[] selectionArgs, String[] columns) {
        SQLiteQueryBuilder builder = new SQLiteQueryBuilder();
        builder.setTables(FTS_VIRTUAL_TABLE);
        builder.setProjectionMap(mColumnMap);

        Cursor cursor = builder.query(mDatabaseOpenHelper.getReadableDatabase(),
                columns, selection, selectionArgs, null, null, null);

        if (cursor == null) {
            return null;
        } else if (!cursor.moveToFirst()) {
            cursor.close();
            return null;
        }
        return cursor;
    }

    private static class DictionaryOpenHelper extends SQLiteOpenHelper {

        private final Context mHelperContext;
        private SQLiteDatabase mDatabase;
        private static final String FTS_TABLE_CREATE =
                    "CREATE VIRTUAL TABLE " + FTS_VIRTUAL_TABLE +
                    " USING fts3 (" +
                    KEY_WORD + ", " +
                    KEY_DEFINITION + ");";

        DictionaryOpenHelper(Context context) {
            super(context, DATABASE_NAME, null, DATABASE_VERSION);
            mHelperContext = context;
        }

        @Override
        public void onCreate(SQLiteDatabase db) {
            mDatabase = db;
            mDatabase.execSQL(FTS_TABLE_CREATE);
            loadDictionary();
        }

        private void loadDictionary() {
            new Thread(new Runnable() {
                public void run() {
                    try {
                        loadWords();
                    } catch (IOException e) {
                        throw new RuntimeException(e);
                    }
                }
            }).start();
        }

        private void loadWords() throws IOException {
            Log.d(TAG, "Loading words...");
            final Resources resources = mHelperContext.getResources();
            InputStream inputStream = resources.openRawResource(R.raw.definitions);
            BufferedReader reader = new BufferedReader(new InputStreamReader(inputStream));

            try {
                String line;
                while ((line = reader.readLine()) != null) {
                    String[] strings = TextUtils.split(line, "-");
                    if (strings.length < 2) continue;
                    long id = addWord(strings[0].trim(), strings[1].trim());
                    if (id < 0) {
                        Log.e(TAG, "unable to add word: " + strings[0].trim());
                    }
                }
            } finally {
                reader.close();
            }
            Log.d(TAG, "DONE loading words.");
        }

        public long addWord(String word, String definition) {
            ContentValues initialValues = new ContentValues();
            initialValues.put(KEY_WORD, word);
            initialValues.put(KEY_DEFINITION, definition);

            return mDatabase.insert(FTS_VIRTUAL_TABLE, null, initialValues);
        }

        @Override
        public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
            Log.w(TAG, "Upgrading database from version " + oldVersion + " to "
                    + newVersion + ", which will destroy all old data");
            db.execSQL("DROP TABLE IF EXISTS " + FTS_VIRTUAL_TABLE);
            onCreate(db);
        }
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T08:14:27.290

```
String[] arr = string.split("-"); 
```

[字符串#split（字符串正则表达式）](http://docs.oracle.com/javase/6/docs/api/java/lang/String.html#split%28java.lang.String%29)

> 返回通过围绕给定正则表达式的匹配拆分此字符串计算的字符串数组。

**编辑：**

```
long id = addWord(strings[0].trim(), strings[1].trim()); 
```

上面的行应该是：

```
long id = addWord(strings[0].trim(), strings[1].trim(),strings[2].trim()); 
```

并更改您的 addWord 函数，如下所述。

```
public long addWord(String word, String definition,String details) {
        ContentValues initialValues = new ContentValues();
        initialValues.put(KEY_WORD, word);
        initialValues.put(KEY_DEFINITION, definition);
        initialValues.put(KEY_DETAILS, details);

        return mDatabase.insert(FTS_VIRTUAL_TABLE, null, initialValues);
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-20T09:02:13.550

处理标记化的更好方法是使用 StringTokenizer

```
StringTokenizer token = new StringTokenizer(str,"-"); 
```

要访问令牌，

```
while(token.hasNext())
{
    String tmp = token.nextToken();
    ...
} 
```

# php - PHP（使用 Apache 或 Nginx）可以在 POST 请求完成之前检查 HTTP 标头吗？

> ID：16118160
> 
> 赞同：1
> 
> 时间：2013-04-20T08:08:44.413
> 
> 标签：php, linux, apache, http, file-upload

这是一个简单的文件上传表单 HTML。

```
<form enctype="multipart/form-data" action="upload.php" method="POST">
    Send this file: <input name="userfile" type="file" />
    <input type="submit" value="Send File" />
</form> 
```

php 文件也很简单。

```
<?php
die(); 
```

如您所见，PHP 脚本在服务器端什么都不做。但是当我们上传一个大文件时，这个过程仍然需要很长时间。

我知道，我的 PHP 代码将在 POST 过程结束后执行。PHP*必须*在解析第一行代码之前准备名为 $_POST 和 $_FILES 的数组。

所以我的问题是：PHP（使用 Apache 或 Nginx）可以在 POST 请求完成之前检查 HTTP 标头吗？

例如，一些 PHP 扩展或 Apache 模块。

有人告诉我 Python 或 node.js 可以解决这个问题，只是想知道 PHP 是否可以。

谢谢。

================ 更新1 ================

我的目标是尝试阻止一些意外的文件上传请求。例如，我们生成了一个唯一令牌作为 POST 目标 URL（如[http://some.com/upload.php?token=268dfd235ca2d64abd4cee42d61bde48&t=1366552126](http://some.com/upload.php?token=268dfd235ca2d64abd4cee42d61bde48&t=1366552126)）。在服务器端，我的代码如下：

```
<?php
define(MY_SALT, 'mysalt');
if (!isset($_GET['t']) || !isset($_GET['token']) || abs(time()-$_GET['t'])>3600 || md5(MY_SALT.$_GET['t'])!=$_GET['token']) {//token check
    die('token incorrect or timeout');
}
//process the file uploaded
/* ... */ 
```

代码看起来很有意义：-P 但不能像我预期的那样节省带宽。原因是 PHP 代码运行太晚，我们无法在文件上传完成之前检查令牌。如果有人在 url 中上传没有正确令牌的文件，我的服务器的网络和 CPU 仍然浪费。

欢迎任何建议。非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T00:53:34.050

答案总是肯定的，因为这是开源的。但首先，一些背景知识：（我只讲nginx，Apache也差不多。）

上传请求不会立即发送到您的 PHP 后端——nginx 会缓冲上传正文，因此您的 PHP 应用程序不会占用 100MB 的 RAM 等待某人通过 300 波特调制解调器上传。不利的一面是，您的应用在完成或大部分完成上传（取决于`client_body_buffer_size`）之前甚至不会发现上传。

但是您可以编写一个模块来挂钩到 nginx 内部的不同“阶段”。当标头完成时，将调用其中一个钩子。您可以在 LUA 中编写模块，但它仍然相当复杂。可能有一个模块会通过 HTTP 将“预上传”挂钩发送到您的脚本。但这对性能来说并不是很好。

您很可能甚至不需要模块。nginx.conf 文件可以做你需要的。（即根据标头将请求路由到不同的脚本，或根据标头返回不同的错误代码。）请参阅此页面以获取标头检查的示例（尤其是“WordPress w/ W3 Total Cache using Disk (Enhanced)”）：[http:// /kbeezie.com/nginx-configuration-examples/](http://kbeezie.com/nginx-configuration-examples/)

阅读文档，因为一些常见的标头检查需求已经有自己的指令（即`client_max_body_size`，如果 Content-Length 标头太大，将拒绝请求。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-03T03:13:32.557

水平上没有解决方案`HTTP`，但水平上是可能的`TCP`。请参阅我在另一个问题中选择的答案：

[通过 PHP 或 Apache 中断从服务器端上传的 HTTP 文件](https://stackoverflow.com/questions/16167935/break-http-file-uploading-from-server-side-by-php-or-apache)

# winforms - 调试时不出现窗口

> ID：16118164
> 
> 赞同：0
> 
> 时间：2013-04-20T08:09:12.817
> 
> 标签：winforms, window

```
`using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Threading.Tasks;
using System.Net.Sockets;
using System.Net;
using System.Threading;

namespace Server_chat
{
    class server
    {
        private static int myProt = 10000;
        private static byte[] buf2 = new byte[1024];
        private static Socket serverSocket;
        private static string message2;

        /// <summary>
        /// server socket
        /// </summary>
        public void Server_run()
        {
            IPHostEntry ipHost = Dns.Resolve(Dns.GetHostName());
            IPAddress ip = ipHost.AddressList[0];

            serverSocket = new Socket(AddressFamily.InterNetwork, SocketType.Stream, ProtocolType.Tcp);
            serverSocket.Bind(new IPEndPoint(ip,Program.form1.localport));
            serverSocket.Listen(10);
            Program.form1.myscan_box = "启动监听成功 ！！";

            Thread myThread = new Thread(ListenClientConnect);
            myThread.IsBackground = true;
            myThread.Start();
        }

        /// <summary>  
        /// 监听客户端连接  
        /// </summary>  
        private static void ListenClientConnect()
        {
            while (true)  // 点对点通信
            {
                Socket clientSocket = serverSocket.Accept();
                if (clientSocket.Connected == true)
                {
                    IPEndPoint client_endpoint = (IPEndPoint)clientSocket.RemoteEndPoint;
                    Program.form1.myclientip_box = client_endpoint.Address.ToString() + "\\" + client_endpoint.Port.ToString();
                    Program.form1.myscan_box = "连接客户端 " + client_endpoint.Address.ToString() + " 成功 !!";
                    //服务端接收线程
                    Thread receiveThread = new Thread(ReceiveMessage);
                    receiveThread.IsBackground = true;
                    receiveThread.Start(clientSocket);
                    //服务端发送线程
                    Thread sendThread = new Thread(SendMessage);
                    sendThread.IsBackground = true;
                    sendThread.Start(clientSocket);
                    break;
                }
            }
        }

        /// <summary>  
        /// receive message 
        /// </summary>  
        /// <param name="clientSocket"></param>  
        private static void ReceiveMessage(object clientSocket)
        {
            Socket myClientSocket = (Socket)clientSocket;
            while (true)
            {
                try
                {
                    int len = myClientSocket.Receive(buf2);
                    message2 = Encoding.ASCII.GetString(buf2).Substring(0, len);
                    IPEndPoint client_endpoint = (IPEndPoint)myClientSocket.RemoteEndPoint;
                    Program.form1.myscan_box = client_endpoint.Address +": "+ message2;
                }
                catch (Exception ex)
                {
                    Program.form1.myscan_box = ex.Message;
                    myClientSocket.Shutdown(SocketShutdown.Both);
                    myClientSocket.Close();
                    break;
                }
            }
        }

        /// <summary>
        /// send message
        /// </summary>
        /// <param name="clientSocket"></param>
        private static void SendMessage(object clientSocket)
        {
            Socket myClientSocket = (Socket)clientSocket;
            while (true)
            {
                if (Program.form1.send_flag11 == 1)
                {
                    myClientSocket.Send(Encoding.ASCII.GetBytes(Program.form1.message11));
                    Program.form1.send_flag11 = 0;
                }
            }

        }

    }
} 
```

`当启动或调试我的程序时，窗口没有出现。但是 vs2012 表明调试会话已准备就绪。

启动程序时，会出现窗口，但会弹出一个窗口，提示“程序已停止工作，选择调试或停止”。

有什么问题？我应该怎么办？

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Threading.Tasks;
using System.Windows.Forms;
using System.Net;
using System.Threading;

namespace Server_chat
{
    public partial class Form1 : Form
    {
        public string localip;
        public int localport = 10002;
        public string s_sendMessage;
        public static int send_flag = 0;

        public string message11
        {
            get { return s_sendMessage; }
        }
        public int send_flag11
        {
            get { return send_flag; }
            set { send_flag = value; }
        }

        public Form1()
        {
            InitializeComponent();
            Control.CheckForIllegalCrossThreadCalls = false;
            IPHostEntry ipHost = Dns.Resolve(Dns.GetHostName());
            IPAddress ipAddr = ipHost.AddressList[0];
            localip = ipAddr.ToString();

            myip_box.Text = localip;
            port_box.Text = localport.ToString();

            server myserver = new server();
            Thread th_server = new Thread(myserver.Server_run);
            th_server.IsBackground = true;
            th_server.Start();
        }

        private void setting_btn_Click(object sender, EventArgs e)
        {
            localport = Int16.Parse(port_box.Text);
            scan_box.AppendText("\r\n" + "端口改成： " + port_box.Text);
        }

        private void send_btn_Click(object sender, EventArgs e)
        {
            s_sendMessage = chat_box.Text;
            chat_box.Text = "";
            scan_box.AppendText(s_sendMessage + "\r\n");
            send_flag = 1;
        }

    }
} 
```

# redis - Redis DB 主从设置

> ID：16118165
> 
> 赞同：3
> 
> 时间：2013-04-20T08:09:23.103
> 
> 标签：redis, master, slave

我已经为我的 nodeJS 应用程序安装了 Redis，并将其配置为在不同服务器上运行的另一个 Redis DB 实例的从属。我可以让 Redis 的相同实例（不同的 DB）（作为从属运行）充当本地安装应用程序的主控吗？

提前致谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-20T11:03:49.313

是的，你可以，但有一个很大的**警告**。

任何从属实例都可以是一个或多个其他实例的主实例。因此，您可以想象菊花链式从属服务器并构建分层复制系统。

现在，我的理解是您不需要您的从属服务器来提供另一个 Redis 实例，而只需允许应用程序在从属实例的另一个数据库中执行读/写操作。

要允许它，您需要在从属配置中将 slave-read-only 参数的值设置为“no”：

```
# You can configure a slave instance to accept writes or not. Writing against
# a slave instance may be useful to store some ephemeral data (because data
# written on a slave will be easily deleted after resync with the master) but
# may also cause problems if clients are writing to it because of a
# misconfiguration.
#
# Since Redis 2.6 by default slaves are read-only.
#
# Note: read only slaves are not designed to be exposed to untrusted clients
# on the internet. It's just a protection layer against misuse of the instance.
# Still a read only slave exports by default all the administrative commands
# such as CONFIG, DEBUG, and so forth. To a limited extend you can improve
# security of read only slaves using 'rename-command' to shadow all the
# administrative / dangerous commands.
slave-read-only no 
```

现在，您将在此实例上运行的所有写入操作都将是**短暂**的。如果 master 和 slave 之间的链接丢失，slave 将再次完全同步到 master。您在从站上设置的所有数据都**将丢失**。如果您停止并重新启动从站，您还将丢失所有临时数据。

它可能适合也可能不适合您的需求。

无法在数据库级别参数化同步（或持久性选项）。你不能告诉 Redis 同步一个给定的数据库，而不是另一个。配置始终适用于实例级别。

# asp.net-mvc-4 - 在 MVC 4 中创建下拉列表的最佳方法是什么？

> ID：16118175
> 
> 赞同：8
> 
> 时间：2013-04-20T08:11:57.663
> 
> 标签：asp.net-mvc-4, html.dropdownlistfor, html-select, viewdata, viewbag

我想知道，在 MVC 4 中创建下拉列表的最佳方法是什么？使用**ViewBag**还是其他方法？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-20T10:55:58.877

我会争辩说，由于这些项目是*您视图中的变量值*，因此它们属于视图模型。视图模型*不一定*只用于*从*视图返回的项目。

模型：

```
public class SomethingModel
{
    public IEnumerable<SelectListItem> DropDownItems { get; set; }
    public String MySelection { get; set; }

    public SomethingModel()
    {
        DropDownItems = new List<SelectListItem>();
    }
} 
```

控制器：

```
public ActionResult DoSomething()
{
    var model = new SomethingModel();        
    model.DropDownItems.Add(new SelectListItem { Text = "MyText", Value = "1" });
    return View(model)
} 
```

看法：

```
@Html.DropDownListFor(m => m.MySelection, Model.DropDownItems) 
```

在控制器或适合该场景的其他任何地方填充它。

或者，为了获得更大的灵活性，请切换并执行以下操作`public IEnumerable<SelectListItem>`：`public IEnumerable<MyCustomClass>`

```
@Html.DropDownFor(m => m.MySelection,
    new SelectList(Model.DropDownItems, "KeyProperty", "ValueProperty") 
```

在这种情况下，您当然还必须修改控制器操作以填充`model.DropDownItems`of 的实例`MyCustomClass`。

# php - 在 mysql/php 中增加字段默认值

> ID：16118178
> 
> 赞同：1
> 
> 时间：2013-04-20T08:12:30.380
> 
> 标签：php, mysql, increment

```
$saa = "update  aspirantdt set vote = 'vote'+1 where 'post_id' = '$id' "; 
```

当我检查数据库时，值没有增加。帮帮我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T08:16:45.900

您的查询中有一个**sintax**错误[`update`](http://dev.mysql.com/doc/refman/5.0/en/update.html)，您使用的是引号而不是反引号。对列名使用反引号，对值使用引号尝试更改如下

```
$saa = "update  `aspirantdt` set `vote` = (`vote`+1) where `post_id` = '".$id."' "; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-20T08:17:02.953

只需删除引号或使用 Backtics 作为列名。

```
$saa = "UPDATE  aspirantdt SET vote = vote + 1 where post_id = '$id' "; 
```

或者用反引号

```
$saa = "UPDATE  `aspirantdt` SET `vote` = `vote` + 1 where `post_id` = '$id' "; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-20T08:17:32.927

```
$saa = "update aspirantdt set vote = 'vote'+1 where 'post_id' = '$id' "; 
```

表示`'vote'`and`'post_id'`是*文字字符串*，而不是表名（也就是说，它将`$id`与实际字符串`post_id`而不是列的值进行比较`post_id`）。

您想要的是反引号将它们引用为列/表名称；

```
$saa = "update `aspirantdt` set `vote` = `vote`+1 where `post_id` = '$id' "; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-20T08:40:14.260

您不需要引号`vote`作为列名，而不是字符串。

您的 SQL 可能正试图放入`vote1`一个 int 列。

# xamarin - OSX/Linux 上 MonoDevelop 中的 NuGet 包还原

> ID：16118189
> 
> 赞同：9
> 
> 时间：2013-04-20T08:13:47.240
> 
> 标签：xamarin, nuget, monodevelop

我正在尝试在 MonoDevelop 下使用 NuGet 包还原编译 Visual Studio 项目，但它不能开箱即用。

NuGet 应该可以在 Mono 上运行，甚至在 nuget.targets 中内置了支持，那么缺少什么？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-20T08:13:47.240

基于此处跟踪的问题：[https ://nuget.codeplex.com/workitem/3278](https://nuget.codeplex.com/workitem/3278)

1.  您必须将 xbuild 与应在构建时恢复包的所有项目一起使用。MonoDevelop->首选项->构建![在 MonoDevelop 或 Xamarin Studio 中启用 xbuild](https://i.stack.imgur.com/mBEgA.png)
2.  Unix 文件系统区分大小写。这会破坏 nuget.targets，因为文件内的大小写被假定为全部小写，而添加到 .nuget 文件夹中解决方案的文件的大小写类似于“NuGet”。修复 nuget.targets 或将解决方案 .nuget 文件夹中的文件名更改为全部小写。
3.  在 nuget.targets 中，RequireRestoreConsent 默认为 true。编辑 nuget.targets 并将其更改为 false。
4.  包还原将包文件夹放在一个*奇怪*的位置，`$(SolutionDir)/ /packages`（是的，两者之间有一个空白文件夹）。原因是 nuget.targets 在 after `$(SolutionDir)`in 中有一个尾随空格`<RestoreCommand>$(NuGetCommand) install "$(PackagesConfig)" -source "$(PackageSources)" $(RequireConsentSwitch) -solutionDir "$(SolutionDir) "</RestoreCommand>`

# java - Java - 带有自定义 OutputStream 的 PrintStream 上的奇怪行为

> ID：16118191
> 
> 赞同：0
> 
> 时间：2013-04-20T08:13:55.047
> 
> 标签：java, behavior, outputstream, printstream

我正在尝试编写一个将 System.out 重定向到 JTextArea 的程序（它不必是 JTextArea），但是当我调用 System.out.println("Test!") 时，文本区域的输出就像所以：

```
\n
st!
\n 
```

我的输出流的代码：

```
package gui;

import java.awt.*;
import java.io.*;
import javax.swing.text.*;

public class LogOutputStream extends OutputStream
{
    public void write(final int b) throws IOException
    {
        EventQueue.invokeLater(new Runnable()
        {
            public void run()
            {
                write0(b);
            }
        });
    }

    public void write(final byte[] b, final int off, final int len)
    {
        EventQueue.invokeLater(new Runnable()
        {
            public void run()
            {
                write0(b, off, len);
            }
        });
    }

    public void write(final byte[] b)
    {
        EventQueue.invokeLater(new Runnable()
        {
            public void run()
            {
                write0(b);
            }
        });
    }

    private void write0(int b)
    {
        Document doc = FernflowerGUI.frame.textArea.getDocument();
        try
        {
            doc.insertString(doc.getLength(), String.valueOf((char)b), null);
        }
        catch(BadLocationException impossible)
        {

        }
    }

    private void write0(byte[] b, int off, int len)
    {
        Document doc = FernflowerGUI.frame.textArea.getDocument();
        try
        {
            doc.insertString(doc.getLength(), new String(b, off, len), null);
        }
        catch(BadLocationException impossible)
        {

        }
    }

    private void write0(byte[] b)
    {
        write0(b, 0, b.length);
    }
} 
```

创建 PrintStream 的代码：

```
PrintStream ps = new PrintStream(new LogOutputStream(), true); 
```

谁能告诉我地球上发生了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T08:39:48.543

基本上，您的代码不是线程安全的。

您正在接受一个接受字节数组的*同步*调用 - 然后您稍后使用该字节数组，并假设它仍然具有相同的内容。如果调用者`write()`在方法返回后立即覆盖字节数组中的数据怎么办？当您开始使用它时，您将无法获得正确的数据。

我会`String`在您的调用中从字节数组中提取`write`，然后`String`在调用`write0`.

（我个人也会使用 a`Writer`而不是`OutputStream`- 基本上你想处理文本数据，而不是二进制数据。）

# javascript - 通过 CSS 隐藏包含 iframe 的 div 的底部

> ID：16118194
> 
> 赞同：0
> 
> 时间：2013-04-20T08:14:48.847
> 
> 标签：javascript, css, iframe

我的 html 页面中有任何 iframe！我已将 iframe 高度设置为 100% 并且滚动 = 否。但是框架页面底部有很多空白区域！我需要通过样式表删除 100px 的底部，但我无法更改 iframe 高度！

我可以将 iframe 放在 div 中，然后通过 css 隐藏 div 的底部。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T08:43:29.273

您需要将 iframe 放置在 iframe 高度为 100% 的 div 中，并通过提供固定高度（iframe 高度 -100px）根据它调整 div 的高度。您需要使用以下 css 样式删除该 div 的滚动：

```
overflow-y:hidden;
overflow-x:hidden; 
```

# yii - 我们什么时候使用 Yii RbAC？

> ID：16118207
> 
> 赞同：0
> 
> 时间：2013-04-20T08:16:23.513
> 
> 标签：yii, rbac

因为在 Yii 中所有的动作都是通过控制器完成的，通过控制器过滤器和一些签入动作，可以实现良好的安全措施。当然，这种检查比 RbAC 更快（如果我的陈述有误，请告诉我）。

> 那么什么时候我们发现使用 Yii RbAC 更好呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T08:45:58.320

这是个人喜好和倾向的问题，但可能是当您的授权要求更复杂时。恕我直言，使用 RBAC 和一些 GUI 扩展来管理它更容易和更直观地维护复杂的权限方案（例如，我使用 RBAM 和 SRBAC 扩展）。

# javascript - 在 JavaScript 中解析 PHP 数组

> ID：16118218
> 
> 赞同：3
> 
> 时间：2013-04-20T08:17:41.613
> 
> 标签：javascript, node.js, parsing

我有一些 PHP 源代码是简单的键值数组，如下所示：

```
return array('var1' => 'var2' ); 
```

和

```
return array('sub' => array( 'var1' => 'var2' ) ); 
```

而且我需要将它们解析为 JavaScript 对象，因为我有一个 PHP 库的 JavaScript 实现，我想使用原始测试用例测试兼容性。

有超过 100 个测试，因此手动转换是不切实际的。

有没有一种简单的方法可以在不使用 PHP 的情况下将它们转换为 JavaScript 对象？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-20T09:34:20.467

要真正回答您的问题——如何在不使用 PHP 的情况下将 PHP 的关联数组解析为 JSON——让我们使用一些 JavaScript 代码。

```
"array('sub' => array( 'var1' => 'var2' ) );".replace(/array\(/g, '{').replace(/\)/g, '}').replace(/=>/g, ':').replace(/;/g, '').replace(/'/g, '"'); 
```

这是假设您碰巧坐在一些源代码上并希望将其复制到[Node.js](http://en.wikipedia.org/wiki/Node.js)应用程序中，并且所有数据看起来都像这样。如果数据恰好位于多行，如果您甚至想解析“return”/“;” 部分，如果某些数据包含索引数组，或者任何值包含我只是天真地解析掉的字符串，您必须使这个脚本更聪明一点。

正如其他人所说，如果您正在与 PHP 服务交互，只需使用`json_encode()`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-20T09:08:11.743

这应该工作！

```
<?# somefile.php ?>
<script type="text/javascript">
    var json = '<?= json_encode(array('sub' => array( 'var1' => 'var2' ))) ?>';
    var object = JSON.parse(json);
    console.log(object);
</script> 
```

输出

```
{
  sub: {
    var1: "var2"
  }
} 
```

* * *

更常见的是，您会看到一个与语言无关的 API，它只提供 JSON 响应。您可以使用 JavaScript 对 API 的异步请求轻松测试这一点（在浏览器中，通过[Node.js](http://en.wikipedia.org/wiki/Node.js)等）；

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-20T08:29:37.007

如果我理解正确，您需要像这样使用[json_encode()](http://www.php.net/manual/en/function.json-encode.php)：

```
return json_encode(array('sub' => array( 'var1' => 'var2' ))); 
```

返回值：`{"sub":{"var1":"var2"}}`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-20T08:28:58.753

您可以`json_encode()`在 PHP 和`JSON.parse()`JavaScript 中使用。

# c# - 检测音频流中的特征

> ID：16118219
> 
> 赞同：5
> 
> 时间：2013-04-20T08:17:41.427
> 
> 标签：c#, algorithm, fft

我想编写/编程/开发一种算法，该算法可以识别来自线路输入/麦克风音频的数据中的许多特征。音频流将是音乐，我想过滤掉特征以区分歌曲，通过区分我的意思是您可以将歌曲的流派分开。

我绝对想检测的一件关键事情是这首歌有什么样的小节/节拍。例如，我想知道这首歌是否是 3/4 拍。

我发现的唯一有用的文章是关于 BPM 检测的，但这不足以区分一首歌曲和另一首歌曲。

FFT 是从音频流中获得不同特征的良好开端，但我不知道从哪里开始。是否可以通过 FFT 获得小节/节拍？有没有关于这个的好的教程/代码示例？

FFT 是否足以获得音频流的良好特征，或者是否有任何其他算法可以很好地获得音频流的特征？

最好我会在 C# 中执行此操作，因为这是我最有经验的编程语言。这在 C# 中是可能的还是另一种语言更好？

总结一下我的问题，我正在寻找有关在音频流中查找特征以获取节拍/小节和其他信息以区分歌曲的任何信息。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-20T09:20:28.593

我喜欢阅读这个博主的相关文章：

[http://www.redcode.nl/blog/2010/06/creating-shazam-in-java/](http://www.redcode.nl/blog/2010/06/creating-shazam-in-java/)

作者讨论了指纹歌曲。如果您将一组歌曲[标记](http://en.wikipedia.org/wiki/Supervised_learning)为具有您正在寻找的品质，然后将数据输入某种[学习算法](http://en.wikipedia.org/wiki/Machine_learning)/[分类器](http://en.wikipedia.org/wiki/Statistical_classification)，您可能会取得一些成功。

我不认为这是一个已解决的问题，因此据我所知，给你一个明确的答案是不可能的。

祝你好运！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-10T22:06:04.637

开源的[abio](http://aubio.org/)库从音频中提取特征。它是用 C 语言编写的，但可以作为托管实现的参考。或者你可以 P/Invoke 到它。

> aubio 是一种用于从音频信号中提取注释的工具。它的功能包括在每次攻击之前对声音文件进行分段、执行音高检测、敲击节拍以及从现场音频中生成 MIDI 流。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-21T07:50:14.260

傅立叶变换会告诉您声音中的频率。这可能足以告诉你他们在哪里记录了它。我怀疑它会告诉你更多。

软件（如 Shazam）可以将两段录制的音乐识别为相同的。你想做一些不同的事情——你想以分类的形式提取意义。将此与语音识别进行比较；这是一个类似的问题。音乐实际上要困难得多，因为通常涉及多种乐器。我们的大脑可以使用非常复杂的模式识别来提取单个乐器（鼓、吉他），然后使用单个乐器来确定节拍和节拍。就像我们可以在电视声音打开的情况下进行对话一样。计算机（还）不能将声音分解成单独的声音，而只能听到连续的声音。这让我认为提取有意义的信息（节拍、米）至少要等到我们可以在计算机上将声音解析为单独的“声音”。

你想做的事情总有一天会成为可能，而且会很棒。但我认为我们还有一段距离；也许当计算机可以流利地解释语音时，它们也将能够流利地解释音乐。也许10年后。

# jquery - 滑动面板显示

> ID：16118222
> 
> 赞同：0
> 
> 时间：2013-04-20T08:17:58.243
> 
> 标签：jquery, panel

我已经用简单的 jQuery 制作了一个滑动面板，但这并不是我想要的。

我想要的就是[这个](http://jquerymobile.com/demos/1.3.0-beta.1/docs/panels/)，但只有当你点击“显示”时出现的面板。现在，我的面板执行“叠加”命令，这是我不想要的。我试图从上面的网站中提取代码，但它是一团糟。

如果你们中的任何人能想出一个滑动面板“Reveal”，我将不胜感激。最好使用 jQuery。

先感谢您！

这是我当前的代码：

```
$(document).ready(function(){
    $('#show_menu').on('click' , function() {
        $('div.panel').animate({
            'width' : 'show'} ,500,
            function() {
                $('div.home').fadeIn(400);
        });
    });

    $('span.close').on('click' , function() {
        $('div.home').fadeOut(400 , function() {
            $('div.panel').animate({
                'width':'hide'}, 500);
            });
        });
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2018-01-11T14:43:52.090

这个答案很晚，但对于任何路过的人来说，这里是 jQuery Mobile 和“Revealing”面板的一个[很好](http://demos.jquerymobile.com/1.4.5/panel-responsive/)的起点。

左右滑动面板都有示例，并且源代码很容易获得。

# javascript - 无法为 iframe 调用 null 的方法“appendChild”

> ID：16118223
> 
> 赞同：0
> 
> 时间：2013-04-20T08:18:02.973
> 
> 标签：javascript, google-chrome

我有以下脚本来创建 iframe

```
 function createIframe() {
    var iframe = document.createElement("iframe");
    iframe.style.position = "absolute";
    iframe.style.visibility = "hidden";

    document.body.appendChild(iframe);

    // Firefox, Opera
    if(iframe.contentDocument) iframe.doc = iframe.contentDocument;
    // Internet Explorer
    else if(iframe.contentWindow) iframe.doc = iframe.contentWindow.document;

    // Magic: Force creation of the body (which is null by default in IE).
    // Also force the styles of visited/not-visted links.
    iframe.doc.open();
    iframe.doc.write('<style>');
    iframe.doc.write("a{color: #000000; display:none;}");   
    iframe.doc.write("a:visited {color: #FF0000; display:inline;}");    
    iframe.doc.write('</style>');
    iframe.doc.close();

    // Return the iframe: iframe.doc contains the iframe.
    return iframe;
  } 
```

但是在 chrome 控制台中，它给了我错误 Cannot call method 'appendChild' of null

为什么它不工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T08:25:00.620

代码是正确的。您是否在页面中添加了正文？

尝试这个：

```
<html>
<body>
<script>
window.onload=function() {
   createIframe()
};
function createIframe() {
    var iframe = document.createElement("iframe");
    iframe.style.position = "absolute";
    iframe.style.visibility = "hidden";

    document.body.appendChild(iframe);

    // Firefox, Opera
    if(iframe.contentDocument) iframe.doc = iframe.contentDocument;
    // Internet Explorer
    else if(iframe.contentWindow) iframe.doc = iframe.contentWindow.document;

    // Magic: Force creation of the body (which is null by default in IE).
    // Also force the styles of visited/not-visted links.
    iframe.doc.open();
    iframe.doc.write('<style>');
    iframe.doc.write("a{color: #000000; display:none;}");   
    iframe.doc.write("a:visited {color: #FF0000; display:inline;}");    
    iframe.doc.write('</style>');
    iframe.doc.close();

    // Return the iframe: iframe.doc contains the iframe.
    return iframe;
  }  
</script>
</body>
</html> 
```

iframe.doc.write 不是最干净的解决方案....

# classification - 计算 B 和 |V| 在朴素贝叶斯文本分类中

> ID：16118230
> 
> 赞同：0
> 
> 时间：2013-04-20T08:18:33.117
> 
> 标签：classification, term, multinomial

我找到了一个关于多项式朴素贝叶斯分类器的链接

[多项朴素贝叶斯链接](http://nlp.stanford.edu/IR-book/html/htmledition/naive-bayes-text-classification-1.html#laplace)

我们如何计算`B'`or `|V|`？

该页面说它是词汇表中的术语数。在它的例子中，我们怎么能`6`得到`B`？它是所有术语的计数吗？

> “中国”、“北京”、“上海”、“meacao”、“东京”、“日本”

还有一个问题，如果新词出现在测试文档中怎么办？例如，在 doc 6 中出现了“bangkok”或任何从未出现过的新词。如何计算新词的概率？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T08:29:24.967

你说的对。它是词汇表中的单词总数，因为词汇表中的一个术语只能有一个条目。

# php - 如何使用 jQuery/javascript 创建文本类型编写器效果？

> ID：16118235
> 
> 赞同：-1
> 
> 时间：2013-04-20T08:20:13.203
> 
> 标签：php, javascript, jquery

如何使用 jQuery /javascript 创建文本类型编写器效果？

我试图用谷歌搜索，发现 jtypewritter，但给出的演示页面[**`jQuery Plugin jtypewriter`**](http://archive.plugins.jquery.com/project/jTypeWriter)无法正常工作/打开。

链接： http: [//archive.plugins.jquery.com/project/jTypeWriter](http://archive.plugins.jquery.com/project/jTypeWriter)

[**`project's home page`**](http://www.dummwiam.com/jTypeWriter)也不工作。

**问题 ：**

1.  如何使用 jQuery 或 java 脚本创建文本类型编写器效果？
2.  有没有办法通过任何其他技巧产生相同的效果？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T08:28:11.870

这是如何使用 jQuery 创建文本打字机效果的示例

演示：http: [//jsbin.com/araget/5/](http://jsbin.com/araget/5/)

**插件**：

```
(function ($) {
  // writes the string
  //
  // @param jQuery $target
  // @param String str
  // @param Numeric cursor
  // @param Numeric delay
  // @param Function cb
  // @return void
  function typeString($target, str, cursor, delay, cb) {
    $target.html(function (_, html) {
      return html + str[cursor];
    });

    if (cursor < str.length - 1) {
      setTimeout(function () {
        typeString($target, str, cursor + 1, delay, cb);
      }, delay);
    }
    else {
      cb();
    }
  }

  // clears the string
  //
  // @param jQuery $target
  // @param Numeric delay
  // @param Function cb
  // @return void
  function deleteString($target, delay, cb) {
    var length;

    $target.html(function (_, html) {
      length = html.length;
      return html.substr(0, length - 1);
    });

    if (length > 1) {
      setTimeout(function () {
        deleteString($target, delay, cb);
      }, delay);
    }
    else {
      cb();
    }
  }

  // jQuery hook
  $.fn.extend({
    teletype: function (opts) {
      var settings = $.extend({}, $.teletype.defaults, opts);

      return $(this).each(function () {
        (function loop($tar, idx) {
          // type
          typeString($tar, settings.text[idx], 0, settings.delay, function () {
            // delete
            setTimeout(function () {
              deleteString($tar, settings.delay, function () {
                loop($tar, (idx + 1) % settings.text.length);
              });
            }, settings.pause);
          });

        }($(this), 0));
      });
    }
  });

  // plugin defaults  
  $.extend({
    teletype: {
      defaults: {
        delay: 100,
        pause: 5000,
        text: []
      }
    }
  });
}(jQuery)); 
```

**html**：

```
<span id="target"></span>
<span id="cursor"></span> <!-- used for the blinking cursor effect --> 
```

**初始化**：

```
$('#target').teletype({
  text: [
    'Lorem ipsum dolor sit amet, consetetur sadipscing elitr,',
    'sed diam nonumy eirmod tempor invidunt ut labore et dolore',
    'magna aliquyam erat, sed diam voluptua. At vero eos et',
    'accusam et justo duo dolores et ea rebum. Stet clita kasd',
    'gubergren, no sea takimata sanctus est Lorem ipsum dolor sit',
    'amet. Lorem ipsum dolor sit amet, consetetur sadipscing elitr,',
    'sed diam nonumy eirmod tempor invidunt ut labore et dolore',
    'magna aliquyam erat, sed diam voluptua. At vero eos et accusam',
    'et justo duo dolores et ea rebum. Stet clita kasd gubergren,',
    'no sea takimata sanctus est Lorem ipsum dolor sit amet.'
  ]
});

$('#cursor').teletype({
  text: ['_', ' '],
  delay: 0,
  pause: 500
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-20T08:49:24.737

我假设`text type writer effect`，您的意思是 Microsoft PowerPoint 演示文稿幻灯片动画中的那个 :)

即随机彩色文本从左到右出现，稍有延迟。

你可以创建你自己的。看我这个非常简单（而且丑陋）的演示：

```
var data="this is the data to be shown in effect";
var index=0;

var cursor="<span id='cursor'>_</span>";
$('.content').append(cursor);

function test(){
    //Clear the interval once entire characters are processed 
    if(index>=data.length-1){
        clearInterval(T);
    }

    //Generate random color
    var hue = 'rgb('
            + (Math.floor(Math.random() * 256)) + ','
            + (Math.floor(Math.random() * 256)) + ','
            + (Math.floor(Math.random() * 256)) + ')';

    //wrap each of the characters in a span tag with the currently generated 
    //random style color. 
    _span = '<span style="color:'+hue+'">'+data[index]+'</span>';

    //and append the span just before the cursor
    $('#cursor').before(_span);
    index++;
}

//call the function repeatedly, till all the characters are processed, hence
//setInterval(code,duration) 
var T=setInterval("test()",200); 
```

看到这个[**小提琴**](http://jsfiddle.net/pSUk6/5/)

如果要增加动画效果，只需在 setInterval 中减小 Interval 即可，反之亦然。此外，您可以通过原型制作使其更加优雅。

它应该给你一个想法。

用于重新启动。只需这样做，而不是清除间隔

```
if(index>=data.length-1){
        $('span').not('#cursor').remove();
        index=0;
} 
```

[小提琴](http://jsfiddle.net/pSUk6/6/)

# visual-studio-2012 - VS 2012 Update 2 安装一开始就挂了

> ID：16118239
> 
> 赞同：4
> 
> 时间：2013-04-20T08:20:29.323
> 
> 标签：visual-studio-2012

我正在安装 VS2012 更新 2，但现在每当我尝试安装时，安装在开始时挂起，同时应用“Microsoft Portable Library Multi-Target Pack”并且根本无法进行。我正在运行带有最新更新和 VS2012 Ultimate 的 Windows 8 x64。

有人遇到过同样的情况吗？有人让它工作吗？

顺便说一句，我有 2 台 win8 x64 机器，都有这个问题。

# ios - 如何在目标c中访问值json对象

> ID：16118243
> 
> 赞同：-1
> 
> 时间：2013-04-20T08:21:28.507
> 
> 标签：ios, objective-c, json

我有一个 json 文件，代码如下：

```
{"fileContent":[{"name":"directorffdsgfg","type":"file","ext":"sql","modified":"2013\/04\/11 - 10:00","created":"2013\/04\/11 - 10:00","size":"1577"},{"name":"directory02","type":"file","ext":"sql","modified":"2013\/04\/11 - 12:10","created":"2013\/04\/11 - 12:10","size":"1577"},{"name":"jquery-mousewheel-master","type":"file","ext":"zip","modified":"2013\/04\/11 - 12:10","created":"2013\/04\/11 - 12:10","size":"5213"}],"folderContent":[{"name":"Folder 2","type":"folder","ext":"sql","modified":"2013\/04\/11 - 05:04","created":"2013\/04\/11 - 05:04","size":"1577"},{"name":"Folder 1","type":"folder","ext":"zip","modified":"2013\/04\/15 - 09:08","created":"2013\/04\/15 - 09:08","size":"11867"}],"files":9,"folders":2} 
```

我想知道对象 json 中的访问值是什么。（例如，我想访问文件、文件夹、文件内容、文件夹内容的值）

我不知道。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-20T08:30:12.910

JSON 是一个字典，您可以使用 NSJSONSerialization 将此字符串转换为字典：

```
NSData *jsonData = [jsonString dataUsingEncoding:NSUTF8StringEncoding];
NSDictionary *json = [NSJSONSerialization JSONObjectWithData:jsonData options:0 error:nil]; 
```

然后您可以通过键访问属性，以便获取文件夹内容数组：

```
NSArray *folderContent = [json objectForKey:@"folderContent"]; 
```

# php - imageline (PHP+gd) 创建过长的线

> ID：16118246
> 
> 赞同：0
> 
> 时间：2013-04-20T08:22:14.287
> 
> 标签：php, math, line, gd, complex-numbers

我试图在圆上画一条表示复数的线（基本图像：http: [//i.imgur.com/MnGENrP.png](http://i.imgur.com/MnGENrP.png)），从圆心开始，到圆上的一个点结束。但是问题来了： ~~我尝试了很多公式来找到 $x2 和 $y2 但我总是以随机定位的行结束。计算结束坐标的正确公式是什么？~~

编辑：感谢 Cleong 我解决了定位问题，但线仍然太长，它超出了圆圈甚至超出了图像。截至目前，我使用的公式是：

```
$x2=$half+($radius*(cos(deg2rad($theta))));
$y2=$half-($radius*(sin(deg2rad($theta)))); 
```

其中 $half 是圆的中心（以像素为单位），$radius 是以像素为单位的圆的半径，$theta 是以弧度为单位的角度。提前致谢。

# php - While循环中的不同值

> ID：16118247
> 
> 赞同：0
> 
> 时间：2013-04-20T08:22:20.523
> 
> 标签：php, mysql, while-loop

我只想从不同变量的while循环中获取4个值。例如我想要这样

```
$Var1 = "value1";
$Var2 = "value2";
$Var3 = "value3";
$Var4 = "value4"; 
```

这是我的while循环

```
while($rw = $oAppl->row($rsimg))
        {
             //get value here
             $var1 = $rw['thumb'];
        } 
```

但是没有值是可重复的，我只返回了拇指。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T08:29:11.910

如果您想设置 var1, 2, 3, 4 然后停止，您需要跟踪循环经过了多少次迭代。（或者 for 循环可以更好地执行此任务）

```
$i = 1;
while ($rw = $oAppl->row($rsimg)) {
    if ($i > 4) break;
    eval("$Var" . $i . " = '" . $rw['thumb'] . "';");
    $i++;
} 
```

如果不需要在 $varNUM 中存储值，我建议使用数组来存储这些变量，而不是使用单独的变量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-20T08:35:22.273

你不能在一个变量中存储多个值，你可以 echo while`looping`

```
while($rw = $oAppl->row($rsimg))
{
     //get value here
     echo $rw['thumb'] . '<br>';
} 
```

或创建一个新数组以稍后使用所有值

```
$thumbs = array();
while($rw = $oAppl->row($rsimg))
{
     //get value here
     $thumbs[] = $rw['thumb'];
} 
```

# php - 判断一个账户是否过期 PHP

> ID：16118248
> 
> 赞同：-2
> 
> 时间：2013-04-20T08:22:39.967
> 
> 标签：php

如何确定帐户已过期。

帐户的到期日期以这种格式“dd/mm/yyyy”存储

例如，用户的到期日期为“2012 年 12 月 8 日”我如何将其与今天的日期进行比较并使用 PHP 找出其过期帐户？

我试过

```
$expiry = strtotime("12/8/2012");
$now         = new DateTime();
echo ($now < $expiry ? 'active' : 'expired'); 
```

它向我显示了一个错误

```
Object of class DateTime could not be converted to int 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-20T08:26:07.157

yuo 可以使用[`date`](http://php.net/manual/en/function.date.php)函数和[`strtotime`](http://www.php.net/manual/en/function.strtotime.php)函数

```
$today = date('Y-m-d H:i:s');
$expiry = date('Y-m-d H:i:s', strtotime("12/8/2012"));

if($today >= $expiry)
{
    echo 'Account expired';
}
else
{
    echo 'Account still valid.';
} 
```

这将输出

```
Account expired 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-20T08:24:57.277

使用 time() 而不是 DateTime 对象进行快速比较。

从长远来看，您可能希望将日期格式转换为时间戳以便于操作。

# asp.net - 如何在asp.net web表单中默认设置角色

> ID：16118249
> 
> 赞同：0
> 
> 时间：2013-04-20T08:22:49.733
> 
> 标签：asp.net

我有两个`Roles "Administrator" , " Basic USer"`。我希望当有人默认注册时，他的角色是“基本用户”。我试图在网络管理工具中找到但找不到。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T10:57:12.853

正如建议的那样，您可能希望使用 Roles API 的 AddUserToRole 方法。查看[此](http://runtingsproper.blogspot.in/2009/10/easy-default-roles-for-new-users-with.html)链接，该链接显示了如何执行此操作：

# php - Javascript-PHP - 将连接字符串分配给变量

> ID：16118250
> 
> 赞同：-1
> 
> 时间：2013-04-20T08:23:05.053
> 
> 标签：php, string, concatenation

我想在两个字符串之间包含一个变量并将其分配给一个新变量。我试过

```
 var row="<tr><td>".$i."</td></tr>"; 
```

和

```
 var row="<tr><td>"$i"</td></tr>"; 
```

和

```
var row="<tr><td>$i</td></tr>"; 
```

和

```
var row=$("<tr><td>$i</td></tr>"); 
```

和

```
var row=$("<tr><td>"$i"</td></tr>"); 
```

和

```
var row=$("<tr><td>".$i."</td></tr>"); 
```

但以前的作品都没有。有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T08:25:09.967

您的语法错误，应该是：

```
$row = '<tr><td>'.$i.'</td></tr>'; 
```

在 PHP 中使用`$`符号而不是`var`声明变量

如果您想在 JavaScript var 字符串中回显 PHP 变量，请执行以下操作：

```
var row = '<tr><td><?php echo $i ?></td></tr>' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-20T08:25:35.953

您正在混合 js 和 php。

**PHP：**

```
$row = "<tr><td>" . $i . "</td></tr>"; 
```

或者

```
$row = "<tr><td>$i</td></tr>"; 
```

**JAVASCRIPT：**

```
var row = "<tr><td>" + i + "</td></tr>"; 
```

# android - Android - Alpha 通道上的可绘制滤镜颜色

> ID：16118255
> 
> 赞同：0
> 
> 时间：2013-04-20T08:24:35.447
> 
> 标签：android, colors, drawable, alpha

我从 android 资源中获得了一些 Drawable，我想将那里的颜色和 alpha 通道更改为纯色（图像具有不透明度）。我尝试使用`setFilterColor`，但它只是改变了颜色，alpha 通道仍然是半透明的。我怎样才能改变不透明度呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T16:28:25.253

我找到了班级[`ColorMatrixColorFilter`](http://developer.android.com/reference/android/graphics/ColorMatrixColorFilter.html)

# c++ - 测试基于挂钟时间的算法

> ID：16118256
> 
> 赞同：1
> 
> 时间：2013-04-20T08:24:42.480
> 
> 标签：c++, unit-testing

我目前正在维护一种算法，该算法使用挂钟时间来做出各种决定（例如，哪些解决方案可以快速计算，哪些解决方案需要很长时间并且需要废弃）。

在尝试测试算法时，由于机器负载、操作系统调度、IO 等任意数量的变量，每次结果都可能略有不同。

测试这样一个系统的标准方法是什么？执行 CPU 指令之类的东西是我的一个想法，但是我不确定这在现代多核 x86 处理器上有多实用。

后备计划是向内部计数器添加增量并更改算法的限制以尝试匹配现有挂钟版本的性能。然而，这将涉及大量的试验和错误，所以我想知道在我开始走这条路之前是否有更简单的方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-20T09:32:44.353

简单但粗略的选择是“抽象掉”墙上时间检索逻辑。

比如说，使用`WallTime`带有`GetTime`方法的类并在整个应用程序中使用它。

这个类可以使用两个时间“提供者”。一是系统中的RT时钟。

另一个只是从预先记录的列表中返回值。

您记录第一次通过算法并存储返回的值`GetTime`。这些值将形成第二个“时间提供者”的“预先记录”值列表。

假设第二次运行将以`GetTime`完全相同的顺序调用，您可以简单地返回与第一次运行相同的时间值:)

如果您想调整一些时间，您也可以编辑列表。您还可以有多个存储列表，以模拟不同的硬件。

例子：

假设算法是这样工作的：

1.  `GetTime`-> 从时钟返回 T1
2.  调用函数 X
3.  `GetTime`-> 从时钟返回 T2
4.  `Y`根据 (T2 - T1)决定接下来要调用的函数（例如）
5.  `GetTime`-> 从时钟返回 T3
6.  调用函数`Y`
7.  `GetTime`-> 从时钟返回 T4 ...

将 T1、T2、T3 和 T4 保存在列表中后，您可以准确地重播上述运行（关于返回的值`GetTime`）。

如果在第 6 步执行的函数（这是您的算法根据性能选择的函数）在第二次运行中不同，即使 (T2 - T1) 时间差相同，则此解决方案将失败，即取决于在一个可变的、非时间相关的参数上。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-20T15:20:57.657

我喜欢@Andrei 的解决方案，但根据您的描述，您的算法似乎并不总是以相同的顺序进行计时调用。在这种情况下，我可能会创建一个简单的`WallClockTimer`类，它可以按名称/枚举记录各种持续时间（使用 和 之类的方法`startTimerFor(SOME_KEY)`）`getElapsedTimeFor(SOME_KEY)`。您的算法将与此计时器协作以做出其运行时决策。要测试这些决定，您可以`MockWallClockTimer`为给定的键返回预先指定的持续时间。

# android - 与活动一起保留片段状态

> ID：16118257
> 
> 赞同：0
> 
> 时间：2013-04-20T08:24:56.497
> 
> 标签：android

通过将意图标志设置为单顶，我在活动之间切换时保留了活动的状态。活动包含片段。活动状态被保留，但片段被重新创建。如何使用标志保留活动状态以及片段状态android？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T08:30:48.440

您可以调用该`fragment.setRetainInstance(true);`方法来告诉片段在重新创建活动时它应该保持其状态：

[http://developer.android.com/reference/android/app/Fragment.html#setRetainInstance(boolean)](http://developer.android.com/reference/android/app/Fragment.html#setRetainInstance(boolean))

# tfsbuild - 在连接到安装在非域服务器上的 TFS 服务器时，是否可以在域服务器上安装 TFS 构建服务

> ID：16118258
> 
> 赞同：0
> 
> 时间：2013-04-20T08:24:56.870
> 
> 标签：tfsbuild

我的情况是：

**我在工作组**中的服务器 (s1) 上安装了 TFS 服务器 2012 (application tie) 。**然后我在域**(d1)中的服务器 (s2) 上安装了 TFS 2012 Build 服务。

我使用相同的密码在 s1 和 s2 的域控制器上创建了一个用户 (build_user)。

然后我启动了 TFS 管理控制台 -> 构建配置 -> 配置已安装的功能 -> 配置构建服务 -> 在 s1 上连接到 TFS 服务器 -> 运行构建服务为：“build_user”，当我单击“测试”时，它通过了 - > 一切顺利。但是在我单击“配置”后，我收到一条错误消息，**提示用户“d1\build_user”未找到**。

我必须在工作组中的服务器上安装 TFS 构建服务吗？如果没有，我该怎么办？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T06:32:07.877

我有类似的设置，除了我的 TFS 服务器在我的域上，而我的构建服务器不在。您应该能够按如下方式进行设置：

1.  确保两台机器都有一个密码相同的**build_user**。
2.  **以build_user 身份**登录构建机器
***   加载`Control Panel`->`Credential Manager`*   创建以下凭据：
    *   **Windows 凭据**
        *   网络地址：TFS 服务器的 IP 地址
        *   用户名：workgroup\build_user
    *   **通用凭证**
        *   网络地址：`http://AddressOfTFSServer:8080/`
        *   用户名：workgroup\build_user
    *   **通用凭证**
        *   网络地址：`http://AddressOfTFSServer:8080/tfs`
        *   用户名：workgroup\build_user
    *   **通用凭证**
        *   网络地址：`http://AddressOfTFSServer:8080/tfs/collectionname`
        *   用户名：workgroup\build_user**

 **以上可能需要修改以适应您的设置，但以上允许我将非域构建服务器连接到域 TFS 服务器。

我希望这有帮助。**

# git - git diff (git patch) 和 git push 的区别

> ID：16118266
> 
> 赞同：3
> 
> 时间：2013-04-20T08:25:48.180
> 
> 标签：git

`git push`用于将更改推送到远程存储库。`git diff`显示自远程存储库的最后一次拉取操作以来所做的所有更改。`git diff`同义词用作`git patch`。获得差异后，补丁将通过`git am`或应用`git apply`到另一个存储库以进行更新。

`git diff`那么，这两个命令本质上是相同的还是和之间有什么区别`git push`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-20T08:35:17.807

首先

```
$ git patch
git: 'patch' is not a git command. See 'git --help'. 
```

现在就 [`git diff`](http://kernel.org/pub/software/scm/git/docs/git-diff.html) 与 [`git push`](http://kernel.org/pub/software/scm/git/docs/git-push.html)

```
姓名
       混帐差异

描述
       显示工作树和索引或树之间的变化，变化
       索引和树之间，两棵树之间的变化，或变化
       磁盘上的两个文件之间。

```

```
姓名
       混帐推送

描述
       使用本地引用更新远程引用，同时发送必要的对象
       完成给定的参考。

```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-20T08:35:31.323

`git push`是将您在文件中所做的所有更改推送到存储库。这是您在项目中添加更改的最后一步。

`Git diff`用于查看自上次提交以来对不同文件所做的所有更改。它显示了添加或删除到项目中的所有行。

基本流程是这样的。

您在项目中进行了一些更改。-> 你做`git add` ->`git diff`如果你想看看做了什么更改就做 -> 你使用提交`git commit` -> 使用`git push`.

如果您是 git 新手，请学习这个交互式教程[http://try.github.com/](http://try.github.com/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-20T08:41:10.873

`git diff`不会改变任何东西，它只是报告差异。`git push`通过推送更改来更改远程存储库。

这些命令完全不同，并且您对它们的描述是正确的（因此您的问题本身就有效地回答了）。

# iphone - 在目标 c 中使用 AVFoundation 进行视频编辑

> ID：16118268
> 
> 赞同：3
> 
> 时间：2013-04-20T08:25:56.903
> 
> 标签：iphone, ios, objective-c, avfoundation

1.  是否可以在使用相机录制视频时在视频屏幕上添加时间戳？
2.  我们可以在现有视频的屏幕上添加时间戳并从现有视频中删除音频吗？

我在互联网上搜索过，但找不到线索，请提供参考教程的指导吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T10:21:49.510

Apple 提供了用于视频编辑的示例。你可以检查一下。AVEditDemo 示例位于 WWDC 2010 示例代码包中

谢谢，

# java - OCPJP 考试中是否应该存在棘手的问题？

> ID：16118270
> 
> 赞同：2
> 
> 时间：2013-04-20T08:26:27.360
> 
> 标签：java, scjp, ocpjp

当我练习参加 OCJP 考试时，我发现我想练习的问题通常是欺骗性的问题，试图欺骗我回答错误。该示例来自 Bathes / Sierra 书中，一个典型的技巧问题是：

![在此处输入图像描述](https://i.stack.imgur.com/Yzb7t.png)

现在我想知道您是否可以告诉我，真实考试中的问题是否也经常是这样的技巧题，或者实际考试是否有另一种风格，或者这是否接近我的预期？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-20T08:29:23.670

给定的示例并不棘手。它只是衡量您是否知道*构造函数*和*方法*之间的区别。构造函数和方法可能具有相同的名称，这不是编译错误。

考试可能包含这样的问题，以使参与者绊倒。但是，您应该记住，考试中的每个问题都只是为了衡量您在某些**考试目标**中的能力和知识。你应该在阅读这个问题时问自己：“这个问题可能衡量的是什么目标？”

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-20T08:44:13.603

> 现在我想知道您是否可以告诉我，真实考试中的问题是否也经常是这样的技巧题，或者实际考试是否有另一种风格，或者这是否接近我的预期？

通过这些问题盘问你的目的是帮助你加强防御。这不是@Juvanis 指出的一个技巧问题，但这些问题将帮助您开发一种模式来识别代码中的错误。通常一个模式开始出现，你的大脑开始像这样分析代码......

1.  是否存在所有必要的导入，它们是否正确？
2.  是否从静态上下文访问非静态变量？
3.  检查方法返回值和返回类型。
4.  检查自动装箱/拆箱错误。
5.  ... 等等

真正的考试更容易。但是，如果您准备更难的问题，成功的机会就会更大。

# svg - 在three.js中将带孔的SVG路径转换为挤压形状

> ID：16118274
> 
> 赞同：7
> 
> 时间：2013-04-20T08:26:56.933
> 
> 标签：svg, path, three.js, polygon

我有一个由 4 个多边形组成的形状：2 个非孔和 2 个孔。这只是一个例子。实际上，可以有一个由 50 个多边形组成的形状，其中 20 个是非孔，30 个是孔。在 SVG 路径中，这种多边形可以通过结合 moveto:s 和 lineto:s 轻松表示。路径字符串中的每个子多边形（孔或非孔）都以 moveto-command 开头并以 z（end）命令结束，非孔具有 CW 缠绕顺序和孔 CCW。非常简单直观。

SVG 中的形状以这种方式表示（[http://jsbin.com/osoxev/1/edit](http://jsbin.com/osoxev/1/edit)）：

```
<path d="M305.08,241.97 L306,251.51 L308.18,256.39 L311.72,259.09 L317.31,260.01 L324.71,259.01 L332.45,255.86 L335.57,257.53 L337.6,260.44 L336.94,262.33 L328.27,268.74 L317.89,273.41 L307.94,275.49 L296.26,275.23 L286.64,272.99 L279.78,269.31 L274.14,263.55 L271.65,260.21 L269.2,261.06 L254.83,268.51 L242.11,272.97 L227.59,275.23 L209.91,275.48 L197.47,273.63 L187.91,270.13 L180.48,265.09 L175.32,258.88 L172.2,251.44 L171.1,242.23 L172.24,233.63 L175.49,226.24 L181, 219.54 L189.42,213.3 L201.36,207.73 L217.23,203.25 L238.28,200.1 L265.24,198.78 L269.37,198.47 L269.98,182.93 L268.74,171.32 L266.05,163.7 L261.58,157.72 L255.24,153.24 L247.06,150.32 L235.44,149.13 L224.71,150.05 L215.91,153 L210.23,156.86 L207 .64,160.85 L207.19,165.28 L209.34,169.86 L212.01,174.15 L212.14,177.99 L209.8,181.78 L204.22,185.79 L197.62,187.68 L188.65,187.43 L182.41,185.39 L178.45,181.77 L176.2,176.9 L176.03,170.64 L178.2,164.13 L183.09,157.69 L191.04,151.36 L202.01,145.82 L216.09,141.57 L232.08,139.24 L250.07,139.18 L266.13,141.23 L279.05,145.06 L289.15,150.3 L295.91,156.19 L300.73,163.41 L303.85,172.47 L305 .07,183.78 L305.07,241.97 L305.08,241.97Z

M243.99,64.95 L255.92,66.06 L266.21,69.28 L274.98,74.44 L280.64,80.64,80.19 L284.02,86.86.85 L285 L285.26,94.26,94.52 L284.27.27.27.27.27.27.27.27.284.27.284，l27.27.284,184.27.84，l284.27.84，l284.27.84，l284.27.84，l284.27.84，l284.24.27.84，升L245.79,125.33 L232.93,124.53 L222.21,121.74 L213.14,117.11 L207.36,111.92 L203.7,105.75 L201.94,98.18 L202.34,90.12 L204.86,83.4 L210.01,76.81 L217.49,71.33 L227.17,67.31 L238\. 35,65.2 L243.75,64.95 L243.99,64.95Z

M269.99,212.88 L269.48,208.76 L266.59,208.36 L245.76,210.86 L230.95,214.67 L220.9,219.34 L213.82,224.85 L209.69,230.71 L207.92,237.03 L208.4,244.49 L210.86,250.57 L215.2,255.08 L221.69,258.13 L230.57,259.43 L242.52,258.58 L255.27,255.23 L266\. 07,250.04 L269.34,247.02 L269.99,244.81 L269.99,212.88 L269.99,212.88Z

M243.63,73.34 L235.93,74.4 L230.07,77.36 L225.65,82.21 L2233.05,88.57.57 L222.41,96.96.92 L2223.94,11104.53 L2227.227.23,1110.221110.223,9111.23,9191919191919191919191919191919919919199199191919191919191919191919191919191919191919191919191919199999999199199199919999号87,111.5 L262.63,106.12 L264.64,98.93 L264.59,90.25 L262.47,83.41 L258.65,78.43 L253.37,75.08 L246.08,73.43 L243.68,73.34 L243.63,73.34

```

当我尝试在 three.js 中遵循相同的逻辑时，我遇到了问题。下面是一张图片：

![在此处输入图像描述](https://i.stack.imgur.com/zRpRG.png)

three.js 似乎不明白 moveto 是什么意思。它应该使“笔起来”并且在前一点和 moveto 命令点之间不画任何东西。但是“笔不上”，形状断裂。

代码部分是这样的（不要混淆变量名，它们来自其他示例）：

```
// 创建字形形状（抱歉名称混淆）：
var starPoints2 = new THREE.Shape();

// 添加第一个多边形
starPoints2.moveTo(307.94,275.49);
starPoints2.lineTo(296.26,275.23);
// .....
starPoints2.lineTo(286.64,272.99);
starPoints2.lineTo(307.94,275.49);

// 添加第二个多边形
starPoints2.moveTo(245.79,125.33);
starPoints2.lineTo(232.93,124.53);
// .....
starPoints2.lineTo(257.68,123.93);
starPoints2.lineTo(245.79,125.33);

// 为孔创建路径
var smileyEye1Path = new THREE.Path();

// 第一个洞
笑脸1Path.moveTo(221.69,258.13);
笑脸1Path.lineTo(215.2,255.08);
// .....
笑脸1Path.lineTo(230.57,259.43);
笑脸1Path.lineTo(221.69,258.13);

//第二个洞
笑脸1Path.moveTo(238.44,116.65);
笑脸1Path.lineTo(231.99,114.29);
// .....
笑脸1Path.lineTo(246.81,116.94);
笑脸1Path.lineTo(238.44,116.65);

// 为形状添加孔
var starShape = starPoints2;
starShape.holes.push(smileyEye1Path);

// 之后拉伸。在此处查看完整代码：
// http://jsfiddle.net/pHn2B/33/

```

`function(){}` [http://jsfiddle.net/pHn2B/33/](http://jsfiddle.net/pHn2B/33/)

我在我的代码中做错了什么或者在three.js中有错误？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-20T14:50:40.393

形状定义的中间不能有 a `moveTo`。你必须有两个不同的形状。你可以这样做：

```
var object = new THREE.Object3D();

var shape1 = new THREE.Shape();
var shape2 = new THREE.Shape();

var hole1 = new THREE.Path();
var hole2 = new THREE.Path();

shape1.holes.push( hole1 );
shape2.holes.push( hole2 );

. . .

object.add( mesh1 );
object.add( mesh2 );

scene.add( object ); 
```

小提琴：http: [//jsfiddle.net/pHn2B/34/](http://jsfiddle.net/pHn2B/34/)

三.js r.58

PS 友好提示：在未来，让人们更容易帮助您将是一个好主意——编辑您的变量名称并从您的示例中删除不相关的代码。

# visual-studio-2010 - 使用 VTK 的 Visual Studio 2010 链接错误

> ID：16118275
> 
> 赞同：0
> 
> 时间：2013-04-20T08:27:28.787
> 
> 标签：visual-studio-2010, dll, linker, shared-libraries, vtk

我无法在 Windows 7 64 位 SP1 上的 Visual Studio 2010 中编译 VTK 5.10.1 示例代码。

首先，我使用[本教程](http://homepage.cs.uiowa.edu/~cwyman/classes/common/howto/winVTK.html)安装了 VTK 。安装 VTK 时没有发生错误，并且位于 C:\VTK5.10.1_cmake\bin\Release 的示例可执行文件（如 cone.exe）运行良好。

在 Visual Studio 2010 中，我启动了一个新的 Win32 控制台应用程序并测试了[该站点](http://www.vtk.org/VTK/help/examplecode.html)的第一个示例代码。我编辑了项目属性（额外的包含目录、额外的库目录和额外的依赖项）。

链接器错误如下所示：

`vtktest.obj : error LNK2019: unresolved external symbol ""public: void __thiscall vtkRenderer::AddActor(class vtkProp *)" (?AddActor@vtkRenderer@@QAEXPAVvtkProp@@@Z)" referenced in function "_main".`

大多数具有相同错误的其他人忘记将库添加到其他依赖项中。但是我在 C:\VTK5.10.1_bin\lib\vtk-5.10 目录和 opengl32 库中添加了所有库。我试图用空格、分号和换行来分隔库。

然后，我读到人们正在使用共享库。我对dll并不熟悉。我在打开共享库选项的情况下重新安装了 VTK，并将生成的 dll 复制到 System32 目录。现在，错误看起来略有不同：

`vtktest.obj : error LNK2019: unresolved external symbol ""__declspec(dllimport) public: void __thiscall vtkRenderer::AddActor(class vtkProp *)" (__imp_?AddActor@vtkRenderer@@QAEXPAVvtkProp@@@Z)" referenced in function "_main".`

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T10:30:00.923

没关系，忘记将平台更改为 x64 ：/

# algorithm - 快速从大文本文件形成矩阵

> ID：16118281
> 
> 赞同：2
> 
> 时间：2013-04-20T08:28:58.503
> 
> 标签：algorithm, matlab, file-io, matrix

嗨，我正在努力从文件中快速读取数据。（目前离开 4 小时，然后崩溃）必须是一种更简单的方法。

文本文件看起来像这样：

```
From To
1    5
3    2
2    1
4    3 
```

由此我想形成一个矩阵，以便在相应的 [m,n] 中有一个 1

当前代码是：

```
 function [z] = reed (A)

    [m,n]=size(A);
    i=1;

    while (i <= n)
        z(A(1,i),A(2,i))=1;
        i=i+1;
    end 
```

输出以下矩阵z：

```
 z =

 0     0     0     0     1
 1     0     0     0     0
 0     1     0     0     0
 0     0     1     0     0 
```

我的实际文件有 280,000,000 个往返链接，这个代码对于这个大小的文件来说太慢了。有谁知道在matlab中这样做更快吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-20T08:51:25.107

您可以按照以下方式执行操作：

```
>> A = zeros(4,5);
>> B = importdata('testcase.txt');
>> A(sub2ind(size(A),B.data(:,1),B.data(:,2))) = 1; 
```

我的测试用例，`'testcase.txt'`包含您的样本数据：

```
From To
1    5
3    2
2    1
4    3 
```

结果将是：

```
>> A

A =

     0     0     0     0     1
     1     0     0     0     0
     0     1     0     0     0
     0     0     1     0     0 
```

## 编辑 - 1

查看您的数据后，似乎即使您适当修改此代码，您也可能没有足够的内存来执行它，因为矩阵`A`会变得太大。

因此，您可以使用`sparse`矩阵来实现如下所示：

```
>> B = importdata('web-Stanford.txt');
>> A = sparse(B.data(:,1),B.data(:,2),1,max(max(B.data)),max(max(B.data))); 
```

这将是我推荐的方法，因为由于内存限制，您的`A`矩阵的大小`[281903,281903]`通常太大而无法处理。`sparse`另一方面，矩阵仅维护那些非零的矩阵条目，从而节省了大量空间。在大多数情况下，您可以或多或少地使用稀疏矩阵，就像使用普通矩阵一样。

[此处](http://www.mathworks.in/help/matlab/ref/sparse.html)`sparse`提供了有关该命令的更多信息。

## 编辑 - 2

我不确定为什么它不适合你。这是我如何做到的截图，以防万一：

![在此处输入图像描述](https://i.stack.imgur.com/3kvOO.png)

## 编辑 - 3

似乎你在得到一个`double`矩阵，`B`而我得到一个`struct`. 我不确定为什么会这样；我只能推测您在使用之前从输入文件中删除了标题行`importdata`。

基本上只是我`B.data`的和你的一样`B`。因此，您应该能够改用以下内容：

```
>> A = sparse(B(:,1),B(:,2),1,max(max(B)),max(max(B))); 
```

# emacs - 在 Emacs SLIME 中关闭调试器

> ID：16118283
> 
> 赞同：1
> 
> 时间：2013-04-20T08:29:02.483
> 
> 标签：emacs, lisp, common-lisp, slime, sbcl

根据[这个问题](https://stackoverflow.com/questions/3074586/how-to-turn-off-the-debugger-in-sbcl)，我可以自定义变量`*DEBUGGER-HOOK*`，使其回退到顶层（在 REPL 中）而不是调试器。我已将此行添加到我的 ~/.sbclrc 中，当我从命令行启动 sbcl 时一切正常。

```
(setf *debugger-hook* #'(lambda (c h) (declare (ignore h)) (print c) (abort))) 
```

但是，以上不适用于 Emacs SLIME。每当我编译/加载文件（Cc Ck）时，它仍然会调用调试器（带有中止计算、重新启动、输入新值等选项）。我怎样才能让 SLIME 只打印错误消息并让我回到顶层？是的，它与 SBCL 和 ~/.sbclrc 和以前一样。看起来 SLIME 不尊重用户的`*DEBUGGER-HOOK*`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T15:13:55.887

根据[http://common-lisp.net/project/slime/doc/html/Other-configurables.html](http://common-lisp.net/project/slime/doc/html/Other-configurables.html)在文件中设置`SWANK:*GLOBAL-DEBUGGER*`为零`~/.swank.lisp`应该强制 SLIME 不替换`*DEBUGGER-HOOK*`为`SWANK:SWANK-DEBUGGER-HOOK`（显示重启列表等），但它以某种方式对我不起作用，即`SWANK:*GLOBAL-DEBUGGER*`nil 但无论如何`*DEBUGGER-HOOK*`都被 SLIME 取代。也许你会更幸运。

作为一种解决方法，我可以建议`*DEBUGGER-HOOK*`在 slime-repl 缓冲区中手动设置您想要的任何内容，这对我有用。

# android - Android：从surfaceview回到菜单

> ID：16118285
> 
> 赞同：0
> 
> 时间：2013-04-20T08:29:20.407
> 
> 标签：android, layout, surfaceview, void

我正在制作一个简单的游戏，其中我在 SurfaceView 上的 Canvas 上绘制了一组位图。现在在我的主要活动中，我有一个 LinearLayout，我在其中设计了一个按钮。在`onClick()`这个按钮中，我写道：

```
setContentView(new surfaceviewclass(this)); 
```

它工作正常。它打开 SurfaceView，我玩游戏等。但我想再次看到我开始的按钮，我的意思是当游戏结束时，我希望菜单重新出现。我已经尝试过调用 void

```
main.menu(); 
```

但应用程序崩溃..请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T10:48:58.570

创建一个新的活动类并将其写入它的 onCreate() 方法

```
setContentView(new surfaceviewclass(this)); 
```

并在上一个活动中创建一个 Intent 并在单击按钮时启动这个新活动

```
e.g ....// onclick method of btn on old activity
    {
        Intent i=new Intent(OldClass.this, NewClass.class);
        startActivity(i);
    }
    .... 
```

# ios6 - iOS 6 中的 NSNotification 和 didReceiveMemoryWarning

> ID：16118290
> 
> 赞同：0
> 
> 时间：2013-04-20T08:29:41.963
> 
> 标签：ios6, nsnotifications, didreceivememorywarning, viewdidunload

从 iOS 6.0 开始，不推荐使用 viewDidUnload 方法。在 iOS 6 之前，我曾经在 viewDidUnload 方法中删除 NSNotification 的Observer。但由于它已弃用，我已将其移至 didReceiveMemoryWarning。现在，如果我的应用收到低内存警告，通知将被删除。所以我用 NSNotification 编写的代码不起作用。

谁能告诉我如何解决这个问题？

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-20T09:22:23.057

我假设您在`viewDidLoad`. 问题是，即使在内存不足的情况下，iOS 6 上的视图也不会被卸载。因此，如果您删除了 中的观察者`didReceiveMemoryWarning`，`viewDidLoad`将不会再次被调用。

您可以选择两种相对简单的替代方案：

*   在 中添加观察者`viewWillAppear`并将其删除`viewWillDisappear`。
*   `initXXX`在您的方法中添加观察者并在`dealloc`.

我*可以*在中添加观察者`viewDidLoad`并将其删除`didReceiveMemoryWarning`。但是你必须“手动卸载”中的视图`didReceiveMemoryWarning`，以便`viewDidLoad`稍后再次调用。有关如何强制卸载视图的示例代码，请参见例如[https://stackoverflow.com/a/15805715/1187415 。](https://stackoverflow.com/a/15805715/1187415)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-20T10:33:53.890

问题是你完全误解了这`viewDidUnload`意味着什么。*卸载*`viewDidUnload`视图时调用。在 iOS 6 之前的版本中，当您使用完视图控制器后，它的视图*不会被卸载*。在 iOS 6 之前的版本中，99% 的时间你永远不会看到正在运行，因为视图通常不会被卸载。在 iOS 6 之前的版本中，仅在响应内存警告时才会卸载视图，并且视图不可见。在 iOS 6 中，唯一的变化是视图永远不会被卸载，即使在内存警告中也是如此。**`viewDidUnload`**

 **的行为`viewDidUnload`在 iOS 6 之前的版本和 iOS 6 中是相同的——它在视图被卸载时被调用。因此，您不必更改 iOS 6 的任何代码。如果这样做，则说明您做错了。

> 在 iOS 6 之前，我曾经在 viewDidUnload 方法中删除 NSNotification 的Observer。

如果您的意思是在 中添加了观察者`viewDidLoad`，那么您*必须*在 中将其删除`dealloc`。否则你的代码会崩溃。正如我上面所说，99% 的时间，在 iOS 6 之前的版本中，视图不会被卸载。典型的流程是`init`-> `viewDidLoad`-> `dealloc`。视图不会在中间卸载。

您还可以选择删除 中的观察者`viewDidUnload`。这是一个好主意，因为它将视图返回到加载视图之前的状态。然而，这并不是绝对必要的，因为当视图再次加载时，`viewDidLoad`将被调用，并覆盖之前的任何状态。

所以答案是，你不应该为了响应 iOS 6 而改变任何东西。你所做的任何事情都应该在（可选）和（必需）`viewDidLoad`中都被撤销。在 iOS 6 和 iOS 6 之前的版本中都是如此。`viewDidUnload``dealloc`**

# python - Matplotlib：使用 savefig() 和 bbox_extra_artists 使最终图形尺寸与 figsize 匹配

> ID：16118291
> 
> 赞同：14
> 
> 时间：2013-04-20T08:29:45.430
> 
> 标签：python, matplotlib, plot

我正在使用 matplotlib 制作用于发布的图形，并希望输出尺寸非常精确的图形。我需要这个，以便我可以确定在插入乳胶文档时不需要调整图形的大小，这会与图形中的字体大小混淆，我希望与字体大小保持一致的比例主要文件。

我需要使用这个`bbox_extra_artists`参数，`savefig`因为如果我不这样做，我在底部有一个图例，它会被切断。我遇到的问题是，我还没有找到一种方法来让我`figsize`在创建绘图时指定的原始图形尺寸在调用`savefig`.`bbox_extra_artists`

我的电话`savefig`看起来像这样：

```
savefig(output_file, bbox_inches='tight', pad_inches=0.0,dpi=72.27,bbox_extra_artists=(lgd,tp,ur,hrs)) 
```

我指定的图形宽度`figsize`是：

```
516.0 * (1/72.27) = 7.1398 inches = 181.3532 millimeters 
```

我使用`savefig()`上面的调用得到的输出 PDF 宽度是`171 millimeters`（不是所需的 181.3532 毫米）。

我在 SO 的其他问题中看到的解决方案是调用`tight_layout()`. 所以，在我的电话上方`savefig()`，我写了以下内容：

```
plt.tight_layout(pad=0.0,h_pad=0.0,w_pad=0.0) 
```

这会产生一个有宽度的图形`183 millimeters`（同样，不是我想要的 181.3532 毫米）。如果我使用，并从对的调用中`tight_layout`删除参数，我会得到一个宽度（同样，不是我想要的 181.3532 毫米）。除此之外，在我的情况下，移除会通过切断东西来破坏身材。`bbox_extra_artists``savefig()``190 millimeters``bbox_extra_artists`

所以我想这是一个两部分的问题：

*   使用时`tight_layout`，即使没有`bbox_extra_artists`，为什么输出图形的大小不正确？
*   使用时有*什么*方法可以获得正确大小的图形`bbox_extra_artists`吗？

我知道几毫米听起来像一个微不足道的差异，但事实上，我担心的是任何差异。这意味着存在一些变量，这可能会在我的其他数字中发生变化，从而导致一定程度的错误，并且该错误很可能在其他地方被放大。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-20T21:44:37.350

您获得较小图的原因是因为您指定`bbox_inches='tight'`.

`bbox_inches='tight'`根据情节中艺术家的范围裁剪情节。如果您希望输出与您指定的大小完全相同，那么只需完全省略`bbox_inches`and `bbox_extra_artists`kwargs。

如果您只是不做`savefig(output_file, dpi=72.72)`任何其他事情，那么绘图将完全是您在创建图形时指定的大小。

# c# - 如何使用 Selenium 向输入元素发送单引号？

> ID：16118296
> 
> 赞同：0
> 
> 时间：2013-04-20T08:30:16.050
> 
> 标签：c#, selenium

当我使用 SendKeys() 方法发送单引号时，Selenium 会发送两个单引号。我将 C# 与 Chrome 驱动程序一起使用。

这是我的代码：

```
IWebDriver driver = new ChromeDriver();
var element = driver.FindElement(By.Id("uid"));
element.Clear();
element.SendKeys("admin'--"); 
```

测试网页上的文本框接收以下值：

行政'' -

如何向元素发送单引号？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T09:33:51.073

您发送的代码示例对我有用。

我尝试使用 fireFoxDriver：

```
IWebDriver driver = new FirefoxDriver();
        driver.Navigate().GoToUrl("http://www.google.com");
        var element = driver.FindElement(By.Name("q"));
        element.Clear();
        element.SendKeys("one quote: ', double quote \""); 
```

谷歌搜索框中的输出是：

单引号：'，双引号"

尝试从最简单的例子开始，并插入一个引号：“'”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-20T08:31:42.713

尝试用\转义字符串，还记得逐字使用@符号

```
element.SendKeys(@"admin\'--\'"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-10-08T09:24:15.397

我也认为它与 ChromeDriver 有关，因为它适用于 Firefox。无论如何，我已经为此使用了 JavaScript，并且它有效。

```
WebElement element = driver.findElement(By.id("id"));
JavascriptExecutor executor = (JavascriptExecutor)driver;
executor.executeScript("arguments[0].value="test'w";", element); 
```

# sqlite - 如何在不丢失数据的情况下升级sqlite数据库？

> ID：16118303
> 
> 赞同：0
> 
> 时间：2013-04-20T08:30:57.650
> 
> 标签：sqlite, upgrade

我有一个使用 System.Data.SQLite 的 C# 应用程序。就我而言，我使用的是最新版本的 SQL Lite 数据库，现在我可以看到新版本已经发布，并且 int sqlite.org 网页上说建议升级数据库。

我的问题是如何在不丢失实际数据库中的信息的情况下进行升级。

如何检查数据的版本

谢谢。

编辑：我的意思是当我用 sqlite3 库创建一个新数据库时，我猜数据库文件，我的 database.db 有一个版本。当我更新 sqlite3 库时，我正在更新 sqlite3 命令行，但数据库文件仍然具有我创建它时的版本。

所以如果在新版本中例如向数据库添加新功能，例如触发器，外键等，如果我没记错的话，这个功能必须在数据库文件中，而不是在 sqlite3 库中，因为当我访问时以实体框架为例，我不使用 sqlite3 库，我使用 System.SQLite.Data 库。

我错了吗？数据文件永远不会更新，只有库可以更新？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T08:44:19.393

升级 SQLite 库不会对您的数据库文件产生任何影响。

外键等更改不会影响数据库文件。影响文件格式的最后一次更改是[很久以前的事了](http://www.sqlite.org/fileformat2.html#schemaformat)。

# asp.net-mvc - Orchard 自定义模块共享目录

> ID：16118305
> 
> 赞同：1
> 
> 时间：2013-04-20T08:31:07.227
> 
> 标签：asp.net-mvc, orchardcms, orchardcms-1.6

MVC 视图引擎的 Orchard 实现似乎没有像默认视图引擎那样在“共享”目录中找到视图或部分视图。

因此，如果在我的 cshtml 中我指的是部分视图，例如：

```
@Html.Partial("ViewFromShared") 
```

这将在自定义 Orchard 模块中失败（但在正常的 ASP .NET 网站中工作）。

如何让 Orchard 视图引擎搜索共享目录？

另外，有什么方法可以让 Orchard 识别我的 ViewStart 页面？

谢谢你。

更新：

我可以按照以下确切步骤进行重现：

*   创建一个新的 ASP .NET MVC 4 项目 (MyApp)。
*   在 Shared 目录 (SharedFile.cshtml) 中添加一个新的 cshtml。
*   添加一个新的视图（Views/XYZ/MyView）和控制器（Controllers/XYZController）。
*   从新的控制器索引方法调用 View("MyView")。
*   将 Html.Partial("SharedFile") 添加到 MyView
*   将网站发布到 Orchard/Modules/MyApp。
*   添加一个 Module.txt（名称：MyApp）
*   添加 IRouteProvider 和以下 RouteDescriptor

    ```
    new RouteDescriptor
            {
                Priority = 5,
                Route = new Route(
                    "Modules/MyApp/{controller}/{action}",
                    new RouteValueDictionary
                        {
                            {"area", "MyApp"}
                        },
                    new RouteValueDictionary(),
                    new RouteValueDictionary
                        {
                            {"area", "MyApp"}
                        },
                    new MvcRouteHandler())
            }, 
    ```

*   在浏览器中转到 myorchardsite/Modules/MyApp/XYZ/Index。

*   未找到 ViewFromShared 并引发异常：

预期结果：ViewFromShared 应呈现在页面上

*   如果我删除对@Html.Partial("ViewFromShared") _ViewStart.cshtml 和 _Layout.cshtml 的调用，并且没有 html/head/body 标记...只是 MyView.cshtml 的内容。

预期结果：我应该在页面中呈现 _ViewStart.cshtml 和 _Layout.cshtml。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-04-25T18:23:51.943

您可以使用`@Display.ViewFromShared()`动态创建形状并使其在适当位置渲染。如果需要，您甚至可以使用诸如`@Display.ViewFromShared(SomeProperty: val, SomeOtherProperty: 42)`. 有关动态创建形状的更多详细信息，请参阅[https://weblogs.asp.net/bleroy/creating-shapes-on-the-fly](https://weblogs.asp.net/bleroy/creating-shapes-on-the-fly)。

# sql - sql server 2008 case语句在where子句不起作用

> ID：16118306
> 
> 赞同：1
> 
> 时间：2013-04-20T08:31:27.337
> 
> 标签：sql, sql-server, sql-server-2008

我有 3 张桌子`Documents`，`SR`和`events`

在`documents`我保存所有与 SR 和事件相关的文档。

我想在一页中显示所有文档。

所以我正在使用这个选择查询

```
Select * 
from documents d, SR s, Events e 
where d.relationid = ( case d.documenttype when 'SR' the s.SRId else 'e.eventid end) 
```

但它不起作用。

我的`document`表结构是这样的：

```
documentid int, 
documenttype nvarchar(50),
relationid int,
document image,
docdate date 
```

谁能指出我的错误？

我想选择所有具有相关信息的文档。表示如果其 SR 文档而不是 SR 详细信息应显示其他事件。目前只有两种类型的文件。

我的选择查询应该是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T08:45:12.940

沿着这些思路

```
SELECT 
    CASE WHEN SR.DocumentType = 'SR' THEN s.SRid ELSE e.eventId END AS Id
FROM documents d
LEFT JOIN SR s
ON s.SRId = d.relationId
LEFT JOIN Events e
ON e.EventId = d.relationId 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-20T08:45:31.550

这应该有效。

```
Select * 
from documents d
    left join SR s on d.relationid = d.SRId
    left join Events e on d.relationid = e.eventid
where d.relationid = ( case when d.documenttype = 'SR' then s.SRId else e.eventid end) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-20T08:36:59.967

你可以加入然后使用`LEFT JOIN`，

```
SELECT  d.*,
        COALESCE(s.Col1, e.Col1) AS Col1,
        COALESCE(s.Col2, e.Col2) AS Col2,
        COALESCE(s.Col3, e.Col3) AS Col3,
        COALESCE(s.Col4, e.Col4) AS Col4
FROM    documents d
        LEFT JOIN SR s
            ON d.relationID = d.SRID
        LEFT JOIN Events e
            ON d.relationID = e.eventID 
```

`Col1,...., Col4`您希望根据 显示的每个表的列在哪里`documenttype`。

要进一步了解有关联接的更多信息，请访问以下链接：

*   [SQL 连接的可视化表示](http://www.codinghorror.com/blog/2007/10/a-visual-explanation-of-sql-joins.html)

上面查询的更安全版本假设相同的 ID 可以包含 on`SR`和`Events`table 将通过使用`CASE()`

```
SELECT  d.*,
        CASE WHEN d.documenttype = 'SR' THEN s.Col1 ELSE e.Col1 END) AS Col1,
        CASE WHEN d.documenttype = 'SR' THEN s.Col2 ELSE e.Col2 END) AS Col2,
        CASE WHEN d.documenttype = 'SR' THEN s.Col3 ELSE e.Col3 END) AS Col3,
        CASE WHEN d.documenttype = 'SR' THEN s.Col4 ELSE e.Col4 END) AS Col4
FROM    documents d
        LEFT JOIN SR s
            ON d.relationID = d.SRID
        LEFT JOIN Events e
            ON d.relationID = e.eventID 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-20T09:17:09.173

您无需编写 Where 子句，因为您需要所有记录

下面的查询肯定有效

```
Select DocumentID,
       DocumentType,
       RelationID,
       case when DocumentType = 'SR' then S.SRID else E.EventID end as Doc_DataID
From 
      Documents D
Left outer join SR S on D.RelationID = S.SRID
LEFT OUTER JOIN EVENTS E on E.EventiD = D.RelationID 
```

# java - 用 Java 解析 JSON

> ID：16118312
> 
> 赞同：0
> 
> 时间：2013-04-20T08:31:53.653
> 
> 标签：java, android, xml, json

我创建了一个涉及 JSON 解析的 android 应用程序。当我在模拟器中运行该应用程序时，它可以工作，但是当我在我的 android 手机中运行它时，它会输出错误“不幸的是已停止”。

这是我的 JSON 类：

```
package com.example.uichandbook;

import java.io.BufferedReader;
import java.io.IOException;
import java.io.InputStreamReader;
import java.net.HttpURLConnection;
import java.net.MalformedURLException;
import java.net.URL;
import java.util.List;

import org.apache.http.HttpResponse;
import org.apache.http.client.methods.HttpGet;
import org.apache.http.impl.client.DefaultHttpClient;
import org.json.JSONArray;
import org.json.JSONObject;

import android.app.Activity;
import android.content.Context;
import android.content.Intent;
import android.graphics.Paint;
import android.net.ConnectivityManager;
import android.net.NetworkInfo;
import android.os.Bundle;
import android.util.Log;
import android.view.Gravity;
import android.view.View;
import android.widget.Button;
import android.widget.LinearLayout;
import android.widget.TextView;
import android.widget.Toast;

public class MainActivity extends Activity {    
     Button b1; 
     Button copy;
     Button search;
     int final_id = 0;
     int final_id2 = 0;
     int large1 = 0;
     int large2 = 0;
     int counter2;
     int counter1;
     String parse;

    // url to make request
    private static String url = "http://lynda.byethost32.com/UICHandbook/contents.json";
    private static String url2 = "http://lynda.byethost32.com/UICHandbook/sub_contents.json";

 int id;
   DatabaseHandler db = new DatabaseHandler(this);
    // contacts JSONArray
    JSONArray contacts = null;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);  

                  if (DetectConnection
                          .checkInternetConnection(MainActivity.this) == true) {
                        Toast.makeText(MainActivity.this,
                           "You have Internet Connection", Toast.LENGTH_LONG)
                           .show(); 
                     updates();
                     } 
      DatabaseHandler db = new DatabaseHandler(this);
        List<data2> contacts = db.getAllContent();

        for (data2 cn : contacts) { 

             LinearLayout lnr = (LinearLayout) findViewById(R.id.container);
             lnr.setPadding(1, 1, 1, 1);
           b1 = new Button(this);
           LinearLayout.LayoutParams lp = new LinearLayout.LayoutParams(LinearLayout.LayoutParams.MATCH_PARENT, LinearLayout.LayoutParams.WRAP_CONTENT); // Verbose!
           lp.weight = 1.0f; // This is critical. Doesn't work without it.
           b1.setId(cn.getid());

           final int _id = b1.getId();
           b1.setText(cn.getcontentname());
           lnr.addView(b1, lp);

           copy = ((Button)findViewById(_id));

           copy.setOnClickListener(new View.OnClickListener(){         
               public void onClick(View view){
                   Intent intent = new Intent(MainActivity.this, subcontent.class);
                   intent.putExtra("id", _id);           
                   startActivity(intent);
               }
               });
              }

        db.close();

            }

    public void getjson()
    {
          // Creating JSON Parser instance
        JSONParser jParser = new JSONParser();
        // getting JSON string from URL
        JSONObject json = jParser.getJSONFromUrl(url);
        try{
            // Create a new HTTP Client
            DefaultHttpClient defaultClient = new DefaultHttpClient();
            // Setup the get request
            HttpGet httpGetRequest = new HttpGet(url);
            // Execute the request in the client
            HttpResponse httpResponse = defaultClient.execute(httpGetRequest);
            // Grab the response
            BufferedReader reader = new BufferedReader(new InputStreamReader(httpResponse.getEntity().getContent(), "UTF-8"));
            String jsonreader = reader.readLine();
            // Instantiate a JSON object from the request response
            JSONObject jsonObject = new JSONObject(jsonreader);
            contacts = jsonObject.getJSONArray("tbl_content");
            for(int i = 0; i < contacts.length(); i++){
            JSONObject c = contacts.getJSONObject(i);
            Log.d("contact", c.getString("content_name"));
            Log.d("contact", c.getString("content"));
            Log.d("contact", c.getString("content_id"));
            Log.d("contact", c.getString("book_id"));
            DatabaseHandler db = new DatabaseHandler(this);
            db.addcontent(new data2(c.getInt("content_id"), c.getString("content_name"),c.getString("content"),c.getInt("book_id")));
            }
            } catch(Exception e){
            // In your production code handle any errors and catch the individual exceptions
            e.printStackTrace();
            }
        }

public void getjson2()
{
      // Creating JSON Parser instance
    JSONParser jParser = new JSONParser();

    // getting JSON string from URL
    JSONObject json = jParser.getJSONFromUrl(url2);

    try{
        // Create a new HTTP Client
        DefaultHttpClient defaultClient = new DefaultHttpClient();
        // Setup the get request
        HttpGet httpGetRequest = new HttpGet(url2);
        // Execute the request in the client
        HttpResponse httpResponse = defaultClient.execute(httpGetRequest);
        // Grab the response
        BufferedReader reader = new BufferedReader(new InputStreamReader(httpResponse.getEntity().getContent(), "UTF-8"));
        String jsonreader = reader.readLine();
        // Instantiate a JSON object from the request response
        JSONObject jsonObject = new JSONObject(jsonreader);
        contacts = jsonObject.getJSONArray("subcontent");
        for(int i = 0; i < contacts.length(); i++){
        JSONObject c = contacts.getJSONObject(i);
        Log.d("contact", c.getString("subcontent_name"));
        Log.d("contact", c.getString("subcontent"));
        Log.d("contact", c.getString("subcontent_id"));
        Log.d("contact", c.getString("content_id"));

        DatabaseHandler db = new DatabaseHandler(this);

        db.subaddcontent(new data3(c.getInt("subcontent_id"), c.getString("subcontent_name"),c.getString("subcontent"),c.getInt("content_id")));

        }
        } catch(Exception e){
        // In your production code handle any errors and catch the individual exceptions
        e.printStackTrace();
        }

        }

final static String SYSTEM_NEWLINE  = "\n";
final static float COMPLEXITY = 5.12f;  //Reducing this will increase effici    ency but will decrease effectiveness
final static Paint p = new Paint();

public static void justifyText(final TextView tv, final float origWidth){
    String s = tv.getText().toString();
    p.setTypeface(tv.getTypeface());        
    String [] splits = s.split(SYSTEM_NEWLINE);
    float width = origWidth - 5;
    for(int x = 0; x<splits.length;x++)
        if(p.measureText(splits[x])>width){
            splits[x] = wrap(splits[x], width, p);
            String [] microSplits = splits[x].split(SYSTEM_NEWLINE);
            for(int y = 0; y<microSplits.length-1;y++)
                microSplits[y] = justify(removeLast(microSplits[y], " "), width, p);
            StringBuilder smb_internal = new StringBuilder();
            for(int z = 0; z<microSplits.length;z++)
                smb_internal.append(microSplits[z]+((z+1<microSplits.length) ? SYSTEM_NEWLINE : ""));
            splits[x] = smb_internal.toString();
        }       
    final StringBuilder smb = new StringBuilder();
    for(String cleaned : splits)
        smb.append(cleaned+SYSTEM_NEWLINE);
    tv.setGravity(Gravity.LEFT);
    tv.setText(smb);
}
private static String wrap(String s, float width, Paint p){
    String [] str = s.split("\\s"); //regex
    StringBuilder smb = new StringBuilder(); //save memory
    smb.append(SYSTEM_NEWLINE);
    for(int x = 0; x<str.length; x++){
        float length = p.measureText(str[x]);
        String [] pieces = smb.toString().split(SYSTEM_NEWLINE);
        try{
            if(p.measureText(pieces[pieces.length-1])+length>width)         
                smb.append(SYSTEM_NEWLINE);
        }catch(Exception e){}
        smb.append(str[x] + " ");
    }
    return smb.toString().replaceFirst(SYSTEM_NEWLINE, "");
}
private static String removeLast(String s, String g){
    if(s.contains(g)){
        int index = s.lastIndexOf(g);
        int indexEnd = index + g.length();
        if(index == 0) return s.substring(1);
        else if(index == s.length()-1)  return s.substring(0, index);
        else
            return s.substring(0, index) + s.substring(indexEnd);
    }
    return s;
}
private static String justifyOperation(String s, float width, Paint p){
    float holder = (float) (COMPLEXITY*Math.random());
    while(s.contains(Float.toString(holder)))
        holder = (float) (COMPLEXITY*Math.random());
    String holder_string = Float.toString(holder);
    float lessThan = width;
    int timeOut = 100;
    int current = 0;
    while(p.measureText(s)<lessThan&&current<timeOut) {
        s = s.replaceFirst(" ([^"+holder_string+"])", " "+holder_string+"$1");
        lessThan = p.measureText(holder_string)+lessThan-p.measureText(" ");
        current++;          
    }
    String cleaned = s.replaceAll(holder_string, " ");
    return cleaned;
}
private static String justify(String s, float width, Paint p){
    while(p.measureText(s)<width){
        s = justifyOperation(s,width, p);
    }
    return s;

} 

 public void updates()
 {
    DatabaseHandler db = new DatabaseHandler(this);
    db.deletetable1();
    db.deletetable2();
    getjson();
    //getjson2();
 }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T07:59:08.817

您在 android 中的主线程上执行网络调用，暂停主线程超过 5 秒将导致 ANR 错误或强制关闭。使用 Asynctask。

```
 public class WS_GetSMS_Asynctask extends AsyncTask<Void,Void,Void>{
        @Override
        protected Void doInBackground(Void... params) {
        //do your work here 

              // Creating JSON Parser instance
            JSONParser jParser = new JSONParser();
            // getting JSON string from URL
            JSONObject json = jParser.getJSONFromUrl(url);
            try{
                // Create a new HTTP Client
                DefaultHttpClient defaultClient = new DefaultHttpClient();
                // Setup the get request
                HttpGet httpGetRequest = new HttpGet(url);
                // Execute the request in the client
                HttpResponse httpResponse = defaultClient.execute(httpGetRequest);
                // Grab the response
                BufferedReader reader = new BufferedReader(new InputStreamReader(httpResponse.getEntity().getContent(), "UTF-8"));
                String jsonreader = reader.readLine();
                // Instantiate a JSON object from the request response
                JSONObject jsonObject = new JSONObject(jsonreader);
                contacts = jsonObject.getJSONArray("tbl_content");
                for(int i = 0; i < contacts.length(); i++){
                JSONObject c = contacts.getJSONObject(i);
                Log.d("contact", c.getString("content_name"));
                Log.d("contact", c.getString("content"));
                Log.d("contact", c.getString("content_id"));
                Log.d("contact", c.getString("book_id"));
                DatabaseHandler db = new DatabaseHandler(this);
                db.addcontent(new data2(c.getInt("content_id"), c.getString("content_name"),c.getString("content"),c.getInt("book_id")));
                }
                } catch(Exception e){
                // In your production code handle any errors and catch the individual exceptions
                e.printStackTrace();
                }  
    return null;
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T03:59:16.083

您正在对`Activity's Main Thread`. 请使用`AsyncTask`从网络下载您的数据。

从 Android 4.0 + 版本开始，必须使用 Worker Thread。

异步任务文档链接：[AsyncTask](http://developer.android.com/reference/android/os/AsyncTask.html)

# ios - Parse.com 和 Facebook 登录，运行无限循环

> ID：16118314
> 
> 赞同：2
> 
> 时间：2013-04-20T08:32:03.033
> 
> 标签：ios, facebook, ios6, facebook-login, parse-platform

我将 Parse 和 Facebook iOS SDK 都更新到了最新版本，当我尝试使用 Facebook 登录时，我的应用程序崩溃了，从调试器中我可以看到它正在无限循环中调用 3-4 个方法。

我的登录代码如下所示：

```
- (void)openSession
{
    UIViewController *topViewController = self.window.rootViewController;
    NSArray *permissions = [NSArray arrayWithObjects:@"user_likes", @"friends_likes", nil];

    // Login PFUser using Facebook
    [PFFacebookUtils logInWithPermissions:permissions block:^(PFUser *user, NSError *error) {
        if (!user) {
            if (!error) {
                NSLog(@"Uh oh. The user cancelled the Facebook login.");
            } else {
                NSLog(@"Uh oh. An error occurred: %@", error);
            }
        } else if (user.isNew) {
            NSLog(@"User with facebook signed up and logged in!");

            if ([[topViewController presentedViewController] isKindOfClass:[PALoginViewController class]]) {
                [topViewController dismissViewControllerAnimated:YES completion:nil];
            }
        } else {
            NSLog(@"User with facebook logged in!");
            if ([[topViewController presentedViewController] isKindOfClass:[PALoginViewController class]]) {
                [topViewController dismissViewControllerAnimated:YES completion:nil];
            }
        }
    }];
} 
```

`logInWithPermissions`调用时发生错误。它崩溃到 Xcode 并且 Debugger 显示了大量对 FB 登录方法的调用 - 实际上有数千个：

[![堆栈跟踪](https://i.stack.imgur.com/juKsa.png)](https://i.stack.imgur.com/juKsa.png)

有什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T18:30:12.533

此问题在 Facebook 上被报告为错误：[https ://developers.facebook.com/bugs/188127071335876?browse=search_5176d24c698df3761093726](https://developers.facebook.com/bugs/188127071335876?browse=search_5176d24c698df3761093726)

它现在已经修复，我可以确认登录现在可以正常工作 - 即使启用了沙盒。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T18:01:45.577

关闭沙箱，然后它应该可以工作。

# poco - Poco / zlib：错误 LNK2019 未解决的外部“_gzopen”

> ID：16118315
> 
> 赞同：0
> 
> 时间：2013-04-20T08:32:30.373
> 
> 标签：poco, zlib, poco-libraries

我在使用 poco c++ 库时尝试使用 zlib 函数。直接链接到 zlib 库不起作用，因为 poco 也链接到它，并且在链接时我得到了几个重复项。所以我从我的库列表中删除了 zlib.lib 并只使用了 poco 版本。

因为 zlib.h 是 poco 的一部分，所以编译效果很好，但是现在链接会导致以下错误

```
error LNK2019 unresolved external "_gzopen" 
```

`duplicate`所以我可以在和之间切换`unresolved`。谁能帮帮我？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T13:30:34.430

在 Windows 上，定义[ZLIB_DLL](https://github.com/pocoproject/poco/blob/develop/Foundation/include/Poco/zconf.h#L309)应该强制导出本机 zlib 接口。可选地，Poco [InflatingStream](https://github.com/pocoproject/poco/blob/develop/Foundation/include/Poco/InflatingStream.h#L57)和[DeflatingStream](https://github.com/pocoproject/poco/blob/develop/Foundation/include/Poco/DeflatingStream.h#L57)包装 zlib 功能。一个警告：这些是 std 流的衍生产品，可能会有性能损失。

# java - 如何从会话中以 JsonNode 身份访问 | ${user.get()}

> ID：16118317
> 
> 赞同：0
> 
> 时间：2013-04-20T08:32:54.450
> 
> 标签：java, json, web-services, servlets, el

我正在创建一个简单的会话对象（JsonNode）

```
JsonNode me = mapper.readValue(result, JsonNode.class);

HttpSession session = request.getSession(true);
session.setAttribute("user", me); 
```

试图像这样访问它。

```
${user} // works print {"id":8,"name":"jones"..}
${user.id} // trows Error "Property 'id' not found on type org.codehaus.jackson.node.ObjectNode"
${user.get(0)} // nothing printed out.
${user.size()} // return 4, id,name,username,token 
```

我将如何重新考虑我的代码以解决问题，甚至选择器？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T17:45:13.083

@mindas 建议的版本应该可以工作，除非您使用的是 Tomcat 7。似乎 Tomcat 7 在使用 JSP EL 调用重载方法时存在错误（[请参阅此处的问题](https://stackoverflow.com/questions/11273626/call-method-in-expression-language)）。你用的是Tomcat 7吗？

没有打印任何内容，因为该`${user.get(0)}`方法用于访问数组节点的指定元素的值。你的不是一个数组节点，如果你使用`${user.get("id")}`你应该得到该`id`字段的值，除非你在 Tomcat 7 上你会得到一些错误，比如`Cannot convert id of type class java.lang.String to int`.

你可以尝试一个快速而肮脏的测试，`${user.findValue("id")}`看看你是否至少得到了一些结果，但如果你不介意我说，我认为如果你不`JsonNode`向 JSP 公开一个原始对象会更好，而是某种形式`User` [POJO](http://en.wikipedia.org/wiki/Plain_Old_Java_Object)的getter 和 setter用于`id`,`name`和。然后您可以在 JSP 中使用，并且您对 Tomcat 没有任何问题。`username``token``${user.id}`

# css - 在选择器 ID 上使用 CSS 选择器特异性？

> ID：16118319
> 
> 赞同：1
> 
> 时间：2013-04-20T08:33:21.250
> 
> 标签：css, css-selectors

在课堂上，我们被教导避免在 HTML 中创建 ID，以便您可以使用它们来识别 CSS 文件中的元素。相反，我们必须尽可能地使用选择器特异性。

以这个简单的 HTML 为例：

```
<body>
  <div>
     <div>
       <div>
          The div you want to style.
       </div>
     </div>
  </div>
</body> 
```

使用这个更好吗：

```
body > div > div > div{
     color: blue;
} 
```

或者给元素一个id（让我们取'middle'）并使用它：

```
#middle{
     color: blue;
} 
```

在性能和可用性方面有什么区别（如果有的话）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-20T10:04:56.763

现代浏览器中 ID 和类之间的速度差异在现实世界中可以忽略不计，这真的不是问题。因此，当前的主要思路是使用需要额外清晰度和特异性的类。通过这种方式，您可以避免特殊性战争，并在可维护性和代码纯度之间取得平衡。

```
<body>
  <div>
     <div class="more-specific-if-needed">
       <div class="middle">
          The div you want to style.
       </div>
     </div>
  </div>
</body>

.make-more-specific-if-needed .middle {
    /* cool styles */
} 
```

甚至使用链式选择器来获得额外的特异性。然后，您可以将样式拆分为基于结构的构建样式和基于外观的主题样式。

```
<body>
  <div>
     <div>
       <div class="semantic-role theme">
          The div you want to style.
       </div>
     </div>
  </div>
</body>

.semantic-role.theme {
    /* cool styles */
} 
```

进一步阅读：

*   [http://csswizardry.com/2011/09/writing-efficient-css-selectors/](http://csswizardry.com/2011/09/writing-efficient-css-selectors/)
*   [为什么浏览器从右到左匹配 CSS 选择器？](https://stackoverflow.com/questions/5797014/why-do-browsers-match-css-selectors-from-right-to-left)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-20T08:39:23.997

用身份证好很多。性能差异很小，并不是重点。我认为代码的可读性/可维护性更重要。

使用 ID 的一个优点是，您可以将元素移动到页面的不同部分，并且它会保留其样式规则 - 不计算包含的元素。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-20T08:35:33.133

**性能**方面，通过它获取元素`id`比遍历 dom 最快。

从**可用性**的角度来看，我会小心使用太多的 id，因为它们只能用于一个元素一次。

所以这是一个你认为更重要的问题以及我们在谈论多少项目。*速度增益是否值得失去可重用性*

# spring - Spring相当于EJB Singleton Session Bean的并发保证

> ID：16118321
> 
> 赞同：1
> 
> 时间：2013-04-20T08:33:34.000
> 
> 标签：spring, jakarta-ee, concurrency

我正在将 Java EE 6 应用程序转换为 Spring + 非 EE 容器（例如 Jetty），并且我正在寻找 Java EE 的 Singleton Session Bean 的替代方案（通常通过使用`@Singleton`注释来实现）。

它的*Singleton*方面很容易由 Spring 处理。但是`@Singleton`注解也暗示了并发保证：默认情况下，Singleton Session Bean 的所有方法都由写锁严格序列化。（可以使用`@Lock`注释来更改行为。）

Spring 中是否有任何（理想情况下是临时的）等价物？自`@Lock`定义功能不是必需的，我只是在寻找比手动同步每个 Singleton Session Bean 的每个方法更好的选择。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-02T10:12:48.343

Spring 中似乎没有等价物。我最终在必要时使用了手动同步。

# iframe - 仅通过 iframe 可用

> ID：16118329
> 
> 赞同：0
> 
> 时间：2013-04-20T08:34:51.570
> 
> 标签：iframe

有没有办法让网页只能通过 iframe 访问？基本上，如果您直接访问 iframe 源，您将无法看到内容，但如果您通过 iframe 查看站点，您*将*能够看到内容。

一个 jQuery 或 Javascript 解决方案将是完美的，我*必须*有权编辑源代码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T08:50:14.413

尝试将其添加到您的网页头部

```
 <script type="text/javascript">
 if (top === self) { 
 alert('Sorry ! WebPage is only accesible via iframe')  //if current window is topmost window
  window.close();
 } else {
 alert('Well Done'); 
 }
 </script> 
```

`self`表示当前窗口，`top`表示浏览器的最顶层窗口

# android - 添加横幅广告时出现 Nullpointer 异常

> ID：16118330
> 
> 赞同：3
> 
> 时间：2013-04-20T08:35:12.380
> 
> 标签：android, nullpointerexception, revmob

我正在尝试在我的游戏中显示横幅广告，因此我使用 revmob 来显示横幅广告和全屏广告。现在全屏广告正在显示，但横幅广告未显示在 view.addView(banner) 中出现空指针异常。

```
enter code herepublic class MainActivity extends Activity {
private CCGLSurfaceView mGLSurfaceView;
private boolean isCreated = false;
public static FrameLayout m_rootLayout;

public static String APPLICATION_ID = "514c7c57cee0500d00000001";
public static RevMob revmob;

// This is used to display Toast messages and is not necessary for your app
@Override
protected void onCreate(Bundle savedInstanceState) {
    if (!isCreated) {
        isCreated = true;
    } else {
        return;
    }

    super.onCreate(savedInstanceState);

    setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_PORTRAIT);
    requestWindowFeature(Window.FEATURE_NO_TITLE);
    getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN,
            WindowManager.LayoutParams.FLAG_FULLSCREEN);

    setContentView(R.layout.activity_main);

    revmob = RevMob.start(this, APPLICATION_ID);
    displayRevMob();

    mGLSurfaceView = new CCGLSurfaceView(this);
    setContentView(mGLSurfaceView);

    CCDirector.sharedDirector().attachInView(mGLSurfaceView);

    getScaledCoordinate();

    Global.assetManager = getAssets();
    Global.context = this;
    Global.loadUserInfo();
    CCScene scene = CCScene.node();
    scene.addChild(new SplashScene(), -1);

    CCDirector.sharedDirector().runWithScene(scene);

    //-------------IAP-----------------------
    Log.d(TAG1, "Creating IAB helper.");
        mHelper = new IabHelper(this, base64EncodedPublicKey);
        mHelper.enableDebugLogging(true);
        Log.d(TAG1, "Starting setup.");
        mHelper.startSetup(new IabHelper.OnIabSetupFinishedListener() {
            public void onIabSetupFinished(IabResult result) {
                Log.d(TAG, "Setup finished.");

                if (!result.isSuccess()) {
                    // Oh noes, there was a problem.
                    complain("Problem setting up in-app billing: " + result);
                    return;
                }

                // Hooray, IAB is fully set up. Now, let's get an inventory of stuff we own.
                Log.d(TAG, "Setup successful. Querying inventory.");
                mHelper.queryInventoryAsync(mGotInventoryListener);
            }
        });

      RevMobBanner banner = revmob.createBanner(this);
       ViewGroup view = (ViewGroup) findViewById(R.id.banner);
       view.addView(banner);

}

public void displayRevMob(){
    revmob.showFullscreen(this);
   }

} 
```

日志猫：

```
 04-20 14:05:53.591: E/AndroidRuntime(1066): FATAL EXCEPTION: main
04-20 14:05:53.591: E/AndroidRuntime(1066): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.game.puzzlegame/com.game.puzzlegame.MainActivity}: java.lang.NullPointerException
04-20 14:05:53.591: E/AndroidRuntime(1066):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1956)
04-20 14:05:53.591: E/AndroidRuntime(1066):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1981)
04-20 14:05:53.591: E/AndroidRuntime(1066):     at android.app.ActivityThread.access$600(ActivityThread.java:123)
04-20 14:05:53.591: E/AndroidRuntime(1066):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1147)
04-20 14:05:53.591: E/AndroidRuntime(1066):     at android.os.Handler.dispatchMessage(Handler.java:99)
04-20 14:05:53.591: E/AndroidRuntime(1066):     at android.os.Looper.loop(Looper.java:137)
04-20 14:05:53.591: E/AndroidRuntime(1066):     at android.app.ActivityThread.main(ActivityThread.java:4424)
04-20 14:05:53.591: E/AndroidRuntime(1066):     at java.lang.reflect.Method.invokeNative(Native Method)
04-20 14:05:53.591: E/AndroidRuntime(1066):     at java.lang.reflect.Method.invoke(Method.java:511)
04-20 14:05:53.591: E/AndroidRuntime(1066):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
04-20 14:05:53.591: E/AndroidRuntime(1066):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
04-20 14:05:53.591: E/AndroidRuntime(1066):     at dalvik.system.NativeStart.main(Native Method)
04-20 14:05:53.591: E/AndroidRuntime(1066): Caused by: java.lang.NullPointerException
04-20 14:05:53.591: E/AndroidRuntime(1066):     at com.game.puzzlegame.MainActivity.onCreate(MainActivity.java:122)
04-20 14:05:53.591: E/AndroidRuntime(1066):     at android.app.Activity.performCreate(Activity.java:4465)
04-20 14:05:53.591: E/AndroidRuntime(1066):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1049)
04-20 14:05:53.591: E/AndroidRuntime(1066):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1920)
04-20 14:05:53.591: E/AndroidRuntime(1066):     ... 11 more 
```

xml

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
 android:layout_width="fill_parent"
 android:layout_height="fill_parent"
 android:orientation="vertical" >

 <LinearLayout android:id="@+id/banner"
           android:layout_width="wrap_content"
           android:layout_height="wrap_content" >
 </LinearLayout>

</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-20T08:43:52.517

问题出在这里：

```
ViewGroup view = (ViewGroup) findViewById(R.id.banner);
view.addView(banner); 
```

显然`findViewById()`返回`null`，这意味着在您的 xml 布局文件中找不到`View`调用。`banner`

您已`R.layout.activity_main`设置为您的内容视图。确保您在此文件中`View`有`banner`id。

# vb.net - VS2008 中的非智能文本框

> ID：16118333
> 
> 赞同：0
> 
> 时间：2013-04-20T08:35:15.403
> 
> 标签：vb.net, winforms, textbox, keyboard-shortcuts

我在 vb.net 应用程序中有一个 WinForm。它有 4 到 7 个多行文本框。我希望能够将信息复制并粘贴到这些文本框中或从中取出，但这似乎是不可能的。没有可用的右键单击剪切复制或粘贴，并且键盘快捷键也不起作用。

所有文本框的属性都已启用、可见并已启用快捷方式

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T16:23:20.847

这似乎是一个奇怪的问题。确保您使用的是真正的文本框控件而不是一些自定义用户控件。您在设计器和代码中所做的更改也可能没有写入 exe。当您调试项目时，您可能会看到旧版本的程序，其中属性可能设置为 false。在这种情况下，您只需删除 bin\debug 文件夹中的 exe 并重建您的项目。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-20T12:55:30.423

1.  首先创建一个 ContextMenuStrip。
2.  添加新菜单项：'Paste'，将 menuItem 的 ShortcutKeys 属性设置为 CTRL+V。
3.  将 (Rich)Textbox -> ContextMenuStrip 属性设置为创建的菜单控件。
4.  处理“粘贴”菜单项单击事件。
5.  试试结果。

# bash - 删除 5 天前不活动的文件

> ID：16118336
> 
> 赞同：0
> 
> 时间：2013-04-20T08:35:23.210
> 
> 标签：bash, shell

我的目标是删除超过 5 天的旧文件，这些文件不再被任何进程使用。作为初学者，我编写了以下脚本，但它不起作用，说找不到第 10 行命令。

```
HOME=~/var

cd $HOME

for f in `find . -type f`; do
  if [`lsof -n $f`]; then

       echo $f
  fi

done 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-20T11:05:11.743

嗯，它没有正确完成试试这个：

```
#!/bin/bash

     DIR=$HOME/var
     ##########################################################
     ## files older than 5 days and recursive value set to 1 
     # for f in $(find  $DIR -mtime +5 -maxdepth 1 -type f); do
     ##########################################################
     for f in $(find  $DIR -type f); do
        # run lsof and look for pattern a-z send it to dev null
        lsof -n $f |grep [a-z] > /dev/null
        # If it was found the exit status will be 0 or success
        if  [ $? = 0 ]; then
           echo "$f in use -->"
        else
                echo "File $f not in use"
        fi
    done 
```

在您的脚本中，您已将 HOME 定义为 ~/var - 在脚本中使用波浪线我会尽量远离。其次，您在脚本中更改了环境变量的值。从命令行尝试

```
env|grep HOME 
```

这种新方法更清洁

现在这是另一个指针，可能意味着您需要进行进一步的更改...

您的脚本会在 cron 作业中运行吗？它将作为这个现有用户的 cron 条目运行吗？如果设置为 root 运行，那么上面将失败，我将向您展示如何：

```
echo $HOME
/home/myuser

sudo -i

echo $HOME
/root 
```

注意 home 的 ~ 或 $HOME 值是如何改变的。所以如果你决定将它作为另一个用户的 cron 条目运行，那么试试这个

```
scriptuser="your_user"
getent passwd $scriptuser|awk -F":" '{print $6}' 
```

如果是当前用户，则 sudo su - 或 sudo -i 然后执行脚本，然后尝试：

```
getent passwd $(logname)|awk -F":" '{print $6}' 
```

# asp.net-mvc - 通过 jquery ajax 传递数据时出错

> ID：16118341
> 
> 赞同：0
> 
> 时间：2013-04-20T08:35:34.663
> 
> 标签：asp.net-mvc, jquery

我有一个非常简单的 ajax 请求，我将其发送到服务器以获取一些数据并填写我的编辑模式。但由于某种原因，它不断返回错误，我不知道为什么。我已经调试了服务器端，参数输入正确，所有数据都正确找到并返回，但仍然是一个错误。

这是我的代码，所以有人可能会看到我在这里缺少什么。

要求：

```
function EditNorm(id) {
    $.ajax({
        type: "POST",
        url: "@Url.Action("GetNormViewModel")",
        dataType: 'json',
        contentType: 'application/json; charset=utf-8',
        data: JSON.stringify({id : id}),
        cache: false,
        success: function(data) {
            FillFormForEditing(data.nvm);
        },
        error: function() {
            alert("Error On EditNorm function");
        }
    });
} 
```

服务器端：

```
public JsonResult GetNormViewModel(int id)
    {
        var nvm = new NormViewModel {Norm = db.Norms.Find(id), Materials = db.Materials.ToList()};

        return Json(new {nvm = nvm}, JsonRequestBehavior.AllowGet);
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T11:29:44.767

首先：当您的控制器接受 Get 时，您在 javascript 上使用 POST 方法，将其添加到您的操作中：

```
[HttpPost]
public JsonResult GetNormViewModel(int id)
{
   return Json(new { ... });
} 
```

其次：`db`LinqToSQL/实体框架上下文是什么？如果是这样，请确保在返回数据后不调用您的数据上下文。（即更改您的操作并简单地返回`return Json(new { nvm = "test" });`并`console.log/alert`确保您已获得结果。这将告诉您，由于某些后期绑定而返回时，您的模型失败了。

# windows - 在 Windows 上通过 gdb 开始使用 Android C++ 调试：从哪里获取 gdbserver for Android？

> ID：16118343
> 
> 赞同：1
> 
> 时间：2013-04-20T03:26:21.867
> 
> 标签：windows, debugging, command-line, android-ndk, usb-debugging

我不明白如何在 android 上调试 C++ APK。有人可以帮我开始吗？

我发现了这个： [http ://www.kandroid.org/online-pdk/guide/debugging_gdb.html](http://www.kandroid.org/online-pdk/guide/debugging_gdb.html)

但从`gdbserver -help`实际设备上的终端模拟器运行返回“gdbserver：未找到”。我在网上找到的所有内容都说要在设备上运行 gdbserver，但我不知道如何获取它。或者从那里做什么。

请注意，我正在运行 Windows 进行`adb`连接，但 ndk 构建系统通过终端位于 Linux 虚拟机中。`gdb-ndk`必须直接从 Windows 运行此 Android 设备才能通过 USB 进行通信。`adb logcat`只能在 Windows 下找到设备。

谢谢

我还看到了这些链接：

1.  [Windows 上的 ndk-gdb](https://stackoverflow.com/questions/12020245/ndk-gdb-on-windows)
2.  [http://mhandroid.wordpress.com/2011/01/23/using-eclipse-for-android-cc-debugging/](http://mhandroid.wordpress.com/2011/01/23/using-eclipse-for-android-cc-debugging/)
3.  [http://mhandroid.wordpress.com/2011/01/25/how-cc-debugging-works-on-android/](http://mhandroid.wordpress.com/2011/01/25/how-cc-debugging-works-on-android/)
4.  [http://cgdb.github.io/](http://cgdb.github.io/)
5.  [http://mhandroid.wordpress.com/2011/01/23/using-cgdb-with-ndk-debug-and-cgdb-tutorial/](http://mhandroid.wordpress.com/2011/01/23/using-cgdb-with-ndk-debug-and-cgdb-tutorial/)
6.  [http://geekswithblogs.net/raccoon_tim/archive/2011/09/12/working-with-android-on-windows-and-without-cygwin.aspx](http://geekswithblogs.net/raccoon_tim/archive/2011/09/12/working-with-android-on-windows-and-without-cygwin.aspx)
7.  [http://www.eclipse.org/sequoyah/documentation/native_debug.php](http://www.eclipse.org/sequoyah/documentation/native_debug.php)

# r - 用于绘制 x 个变量的 R 函数

> ID：16118346
> 
> 赞同：0
> 
> 时间：2013-04-20T08:35:51.577
> 
> 标签：r, function, plot

我正在尝试编写一个将插入到更大脚本中的函数。此函数的目的是接受任意数量的输入变量，然后相应地绘制它们：

```
Plot_funct <- function(FigFolder,var1,var2,var3,...){

nargin <- length(as.list(match.call())) -1 
```

}

这就是我开始的地方，这里我们有 FigFolder，它是应该保存数字的路径（如 .pdf），我定义了指定输入参数数量的 'nargin'，然后我计划循环通过每个参数（var1、var2 等）并相应地绘制。我主要关心的是如何设置允许任意数量的输入的功能？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-20T08:40:03.977

更容易的是只提供这些变量的列表：

```
plot_funct = function(FigFolder, variable_list, ...) {
   for(variable in variable_list) {
      # Make plot here
   }
}) 
```

或者更多的R，比如：

```
plot_variable = function(variable, ...) {
   # Make plot here
})

plot_funct = function(FigFolder, variable_list, ...) {
   lapply(variable_list, plot_variable, ...)
}) 
```

您也可以坚持使用单独的变量，并使用`...`：

```
plot_function = function(..., FigFolder) {
   variable_list = list(...)
   # and use any of the two strategies given above, I'll use lapply
   lapply(variable_list, plot_variable)
}) 
```

请注意，这比真正的 R 代码更像是伪代码，但它说明了一般策略。

# ios - 电子表格样式控制（iOS）？

> ID：16118347
> 
> 赞同：0
> 
> 时间：2013-04-20T08:36:07.390
> 
> 标签：ios, objective-c, xcode

在我正在编写的 iOS 应用程序中，我需要一个能够密切代表电子表格样式的控件。

UICollectionView 会**提供**这种外观吗？

我需要做的就是显示数据，这样就不需要编辑所需的数据。

可炸食品。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-20T09:26:47.753

几个月前我正在寻找类似的东西。最终编写了我自己的一组课程。

我在 github 上查看了一些项目，看看它们是否有用 -

[https://github.com/macmoe/JDMTableGridView](https://github.com/macmoe/JDMTableGridView)

[https://github.com/yuch/GridTable](https://github.com/yuch/GridTable)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-20T08:40:52.640

您可能需要一个 UIScrollView 来自己管理“单元格”。

如果您需要您的内容以某种方式“流动”，我认为这里不是这种情况，集合视图很有用。

您可能会考虑包含垂直滚动和行编辑等的表格视图，但您仍然必须自己处理水平的屏幕外内容。

使用 UIScrollView，您可以完全灵活地以固定方式根据需要布置单元格（如瓷砖）。平移和缩放是免费的。

# java - 在没有 web.xml 的情况下，如何在 Eclipse 中创建 Servlet 过滤器？

> ID：16118348
> 
> 赞同：0
> 
> 时间：2013-04-20T08:36:16.160
> 
> 标签：java, eclipse, servlet-filters

我正在使用 Eclipse 3.6.2 并开发一个 Dynamic Web App 项目。我需要使用 servlet 过滤器。（我来自自动创建 web.xml 的 NetBeans）在创建这个项目时，我没有点击 Generate Deployment Descriptor，现在 Eclipse 不允许我创建它。有没有办法在没有 web.xml 的情况下使用 servlet 过滤器？如果您想了解更多信息，请告诉我。（重新创建项目不是一种选择，因为它是一个巨大的设置，考虑到我的工作日程，我需要花费数周时间）我在现有问题中没有找到答案！非常感谢您提前！

# c# - Excel公式框中的字体错误？

> ID：16118351
> 
> 赞同：0
> 
> 时间：2013-04-20T08:36:30.490
> 
> 标签：c#, excel, excel-formula, export-to-excel, npoi

我有一个 Excel 文件 (.xls)，它有大约 1400 行，有一些行以正确的字体显示（在表格单元格和停靠在顶部的公式框中）。但是，有些行在工作表单元格中以正确的字体显示，但如果我选择它并查看公式框，它会以错误的字体（某种错误或不受支持的字体）显示所选行的文本。

我的 excel 文件的内容包含 unicode 文本，我的笔记本电脑安装了最常见的 unicode 字体（只是我的语言需要 unicode 才能正确显示，而且我总是安装许多 unicode 字体）。我正在使用 Excel 2013，但我认为问题与缺少字体无关……也许公式框和工作表单元格使用不同的字体。值得注意的一点是，在公式框中以错误字体显示其内容的所有单元格（我将这些单元格称为 B 组单元格）的格式与其他单元格的字体不同（我将这些单元格称为 A 组单元格）。我尝试将 B 组单元格的字体更改为 A 组单元格的字体，但它们的内容显示为错误的字体（在单元格和公式框中）。

如果每项工作都只处理 Excel 文件，则问题不大，但是我有一个项目必须将此 Excel 文件导入数据库。我尝试了一个演示，它加载了带有很多字体错误的 Excel 文件。这些错误正是我在 Excel 窗口中看到的公式框中显示的错误。我不知道如何解决这个问题。问题是客户假设Excel文件是OK的，看起来是这样的（因为单元格的内容在单元格中显示OK，错误只是在公式框中）。我没有任何理由要求客户提供另一个 Excel 文件。

我正在使用 NPOI 读取 Excel 文件，我认为它读取单元格内容的方式与公式框读取的方式相同，我尝试在读取其字符串之前为每一行应用正确的字体，但它似乎不起作用. 您对此有什么想法吗，我只需要一些建议，不希望有一个完整或完美的解决方案（我知道这并不容易）？我的第一个想法是首先尝试在 Excel 窗口的公式框中以正确/正确的字体显示单元格的内容，然后尝试使用带有 NPOI（或另一个库）的代码来执行此操作，然后正常导入 Excel 文件，我希望有一个更简单的解决方案，可以在读取单元格时提取内容（使用正确的字体）。

你的建议对我解决这个问题很有帮助。谢谢！

==================================================== =========

更新示例 xls 文件[xls 文件](https://sites.google.com/site/thecabinet3/home/files-store/sample.xls?attredirects=0&d=1)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T20:00:59.323

我在 Win 7 64b 上使用 Excel 2010。

*我没有安装 .VnTime 字体，但是由于您的屏幕截图，我看到了您所看到的内容，并且单元格显示*的内容（字体格式的文本）与公式栏显示的内容之间似乎存在一些脱节。不知何故，这会影响您的应用程序读取单元格值的方式。

在大多数情况下，将 仅`cell`作为范围对象读取是安全的。

您可以尝试的三种替代方法是更改​​您的代码以读取：

*   `cell.Formula`， 或者
*   `cell.Text`， 或者
*   `cell.Value`

一个潜在的问题是格式可能是 Excel 独有的，因此如果您的应用程序、数据库或客户端的系统/计算机不支持底层字符集，则这种不匹配错误可能会持续存在。

这里可能有一些附加信息（尽管主要与数字和日期格式有关）：

[http://blogs.office.com/b/microsoft-excel/archive/2007/11/12/manipulating-and-massaging-data-in-excel.aspx](http://blogs.office.com/b/microsoft-excel/archive/2007/11/12/manipulating-and-massaging-data-in-excel.aspx)

# php - 通过html表单将文件上传到Google驱动器并将url存储在输入文本框中以写入mysql？

> ID：16118355
> 
> 赞同：3
> 
> 时间：2013-04-20T08:36:46.810
> 
> 标签：php, google-drive-api, google-api-php-client

如何通过文件上传或谷歌文件选择器通过 html 表单上传文件并将文件 url 存储到 mysql 数据库？

我尝试通过文件上传上传文件并将其传递给下面代码中的 $file 变量，文件正在上传但在 Google 驱动器中无效？

```
 <?php
require_once 'google-api-php-client/src/Google_Client.php';
require_once 'google-api-php-client/src/contrib/Google_DriveService.php';

$myfile=$_REQUEST['file'];

$type=mime_content_type($myfile);

$client = new Google_Client();
// Get your credentials from the APIs Console
$client->setClientId('');
$client->setClientSecret('');
$client->setRedirectUri('');
$client->setScopes(array('https://www.googleapis.com/auth/drive'));

$service = new Google_DriveService($client);

$authUrl = $client->createAuthUrl();

//Request authorization
print "Please visit:\n$authUrl\n\n";
print "Please enter the auth code:\n";
$authCode = trim(fgets(STDIN));

// Exchange authorization code for access token
$accessToken = $client->authenticate($authCode);
$client->setAccessToken($accessToken);

//Insert a file
$file = new Google_DriveFile();
$file->setTitle('My New document');
$file->setDescription('A test document');
$file->setMimeType($type);

$data = file_get_contents($myfile);

$createdFile = $service->files->insert($file, array(
      'data' => $data,
      'mimeType' => $type,
    ));

print_r($createdFile);

?> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-20T13:41:54.697

使用`$myfile=$_FILES['file']['tmp_name'];`而不是`$myfile=$_REQUEST['file'];`

你使用'trim(fgets(STDIN));' 这不适用于 html 页面。

`$_GET['code']`当谷歌将授权用户重定向回您的网站时，您的应用程序必须读取您的授权码。

您可以使用下面显示的代码对此进行测试。要对其进行测试，您必须将代码另存为`index.php`并在`http://localhost/`. `setRedirectUri`只允许重定向到主域（`http://localhost/test.php`不允许）。当`$_GET['code']`为空时，您将被重定向到 accounts.google.com。在您授予应用程序后，您将被发送回`http://localhost/?code={your authcode}`. 现在您也可以保存授权码以在其他页面上使用它。

在此测试代码中，文件上传表单将提交 `http://localhost/?code={your authcode}`导致 action 属性为空。

`print_r($createdFile);`将为您提供将文件 url 存储在数据库中的信息。

不要忘记先设置一个 Google API 控制台项目以获取您的凭据，另请参阅[http://enarion.net/programming/php/google-client-api/google-client-api-php/](http://enarion.net/programming/php/google-client-api/google-client-api-php/)

```
<?php
error_reporting(E_ALL);
ini_set('display_errors', 1);
require_once 'google-api-php-client/src/Google_Client.php';
require_once 'google-api-php-client/src/contrib/Google_DriveService.php';
$client = new Google_Client();
// Get your credentials from the APIs Console
$client->setClientId('**********.apps.googleusercontent.com');
$client->setClientSecret('********************');
$client->setRedirectUri('http://localhost/');
$client->setScopes(array('https://www.googleapis.com/auth/drive'));

if(empty($_GET['code']))
{
    $client->authenticate();
}
?>
<form method="post" enctype="multipart/form-data" action="">
<input type="file" name="file">
<input type="submit" value="verzenden">
</form>
<?

if(!empty($_FILES['file']['tmp_name']))
{

$myfile=$_FILES['file']['tmp_name'];

$type=mime_content_type($myfile);

$service = new Google_DriveService($client);

// Exchange authorization code for access token
$accessToken = $client->authenticate($_GET['code']);
$client->setAccessToken($accessToken);

//Insert a file
$file = new Google_DriveFile();
$file->setTitle('My New document');
$file->setDescription('A test document');
$file->setMimeType($type);

$data = file_get_contents($myfile);

$createdFile = $service->files->insert($file, array(
      'data' => $data,
      'mimeType' => $type,
    ));

print_r($createdFile);
} 
```

# css - 媒体查询。划分背后有什么意义：@media all 还是@media screen？

> ID：16118359
> 
> 赞同：2
> 
> 时间：2013-04-20T08:37:37.453
> 
> 标签：css, media-queries

简单是辉煌的关键。

我看到后面`@media print`和`@media screen`标签有些意义。但是与`@media screen`（`@media all`而不是打印）的比较让我感到困惑。

除法背后是否有任何意义：`@media all`和`@media screen`？默认情况下，我更喜欢直觉，`@media screen`但在这种情况下可能会失败吗？有什么好例子吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-20T08:49:46.563

您将错过所有其他媒体类型（很少使用，但存在）：

从 w3c 页面：

```
braille
    Intended for braille tactile feedback devices.
embossed
    Intended for paged braille printers.
handheld
    Intended for handheld devices (typically small screen, limited bandwidth).
projection
    Intended for projected presentations, for example projectors. 
speech
    Intended for speech synthesizers. 
tty
    Intended for media using a fixed-pitch character grid (such as teletypes, terminals,   )     
tv
    Intended for television-type devices (low resolution, color, limited-scrollability screens, sound available). 
```

# iphone - iOS 中的消耗品与非消耗品

> ID：16118365
> 
> 赞同：10
> 
> 时间：2013-04-20T08:38:55.463
> 
> 标签：iphone, ios, in-app-purchase, appstore-approval

我们是三个人，他们为 iPhone 制作了一款[免费游戏](https://itunes.apple.com/us/app/sugu/id533780972?ls=1&mt=8)，该游戏已经在 App Store 上架了将近一年。

该应用程序是一款棋盘游戏，您可以在其中创建用户或使用您的 Facebook 凭据登录。您可以退出游戏并使用其他帐户重新登录。

现在我们已经更新了应用程序，能够将用户升级为高级用户。允许个人和全球游戏统计。

但苹果在审批过程中让我们头疼，拒绝接受我们的应用内购买。首先他们不会批准它，因为它没有恢复按钮。然后当我们告诉他们不需要恢复按钮时，因为它是消耗品购买，他们现在要求我们将其更改为非消耗品并添加恢复按钮。

如果购买是非消耗品，请考虑这种情况。

1.  用户登录。
2.  用户将帐户升级到高级
3.  用户注销。
4.  用户使用不同的帐户登录。
5.  用户恢复之前的购买。

这将允许您将两个帐户升级为高级帐户，但只需购买一次。

Apple 的论点是，如果设置了新设备或恢复了设备，我们的用户需要能够恢复购买。

但这不是它的工作方式。用户将其帐户升级为高级帐户。现在，当他们购买新设备或恢复现有设备时，他们只需使用现有游戏帐户登录，即可升级，因为我们在服务器端已将帐户标记为高级帐户。

所以我的问题基本上是。当我们选择使用消耗品而不是非消耗品时，我们是否完全错了。如果是这样，应该如何实施非消耗品以便（可能）在同一设备上使用不同的游戏帐户多次购买？

其次，如果我们对消耗品应用内购买的使用是正确的，我们应该说什么来说服苹果，我们走在正确的道路上？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-20T08:58:12.597

如果您的高级帐户是您的用户只需购买一次的东西，那么 Apple 绝对正确地要求您切换到非消耗性应用内。

您描述的场景很有可能（我也不得不面对它），但是如果您在解锁高级功能（保存与用户关联的所有交易）之前添加应用内收据的服务器端验证，您就有机会验证购买是新的或恢复的，检查字段`original_transaction_id`和`original_purchase_date`收据数据。通过这种方式，您可以查看恢复购买的用户是否与最初购买的用户相同（可能检查其 facebook 用户 ID）。

无论如何，经验告诉我发生这种情况的可能性并不高，我不建议实施此检查（尽管服务器端验证几乎总是必须的;-)）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-20T08:54:13.863

根据[应用内购买编程指南的“恢复交易”部分：](https://developer.apple.com/library/ios/#documentation/NetworkingInternet/Conceptual/StoreKitGuide/MakingaPurchase/MakingaPurchase.html#//apple_ref/doc/uid/TP40008267-CH3-SW2)

如果您的应用程序支持必须可恢复的产品类型，则您必须包含一个允许用户恢复这些购买的界面。

如果您的应用包含非消耗性购买，并且如果您不包含恢复按钮，Apple 将不会批准您的应用。

在 2012 年 6 月之后，Apple 已要求这样做。

所以回答你的问题：不，看来你必须使用`restoreCompletedTransactions`.

希望它可以帮助你。

# zend-framework - 将模型保存到多个表

> ID：16118366
> 
> 赞同：0
> 
> 时间：2013-04-20T08:38:56.983
> 
> 标签：zend-framework, zend-form, zend-db

也许你们中的一个可以帮助我解决我现在正在处理的一个小问题。

我有一个简单的表格：登录名，登录密码，姓名，名字，年龄。现在我想将这些信息保存在两个不同的表中。用户和用户信息。

我有一个保存登录信息的模型“用户”。现在我想将附加数据保存在另一个数据库表中。

用户信息始终与普通用户相关联。

我的想法是，将所有信息存储在一个大的“用户模型”中，并在 $model->save() 将数据存储在相关表中。

尤其是在不同模块中使用模型时，在模型中而不是控制器中完成所有魔法会很有帮助。

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T14:50:30.817

我认为您要做的是创建一个模型映射器来处理将引用您的两个表模型的用户数据。

这里有一个很好的例子：

[使用 Zend_Model_Mappers 和 Zend_Db_Table_Abstract 的单个模型的多个表](https://stackoverflow.com/questions/7869564/multiple-tables-for-a-single-model-using-zend-model-mappers-and-zend-db-table-ab)

# mysql - Delphi 5，如何从MySQL的tis620字段中检索数据？

> ID：16118370
> 
> 赞同：3
> 
> 时间：2013-04-20T08:39:24.443
> 
> 标签：mysql, delphi, utf-8, character-encoding, collation

我有一个用 PHP 编写的 Web 应用程序，它使用 MySQL 作为数据库后端。

为了存储我的语言（泰语）数据，我在我的数据库表上使用了 tis620 字符集，这个设置目前非常适合我的 Web 应用程序。

我将编写一个 Windows 应用程序来访问与我的 Web 应用程序相同的数据库，但我遇到了从 tis620 字段中检索数据的问题。

这是我的表的默认排序规则，使用 tis620

![在此处输入图像描述](https://i.stack.imgur.com/6UJlh.png)

出于测试目的，我将 eng 字段的排序规则设置为使用 utf8 ![在此处输入图像描述](https://i.stack.imgur.com/c7xYr.png)

我在表中插入了一条示例记录

![在此处输入图像描述](https://i.stack.imgur.com/9RXRf.png)

我使用 Oracle 的 MySQL 连接器/ODBC 5.1 作为 ODBC 驱动程序，并尝试设置为 utf8 和 tis620

![在此处输入图像描述](https://i.stack.imgur.com/jfVUX.png)

我正在使用 Delphi 5，TTable 连接数据库表

1.  可以检索带有 utf8 的字段
2.  无法检索带有 tis620（表的默认值）的字段

    *   虽然使用字段编辑器创建所有字段，但我只能获得 utf8 字段。

![在此处输入图像描述](https://i.stack.imgur.com/1U02j.png)

请给我一些建议，目前tis620最适合我的Web应用程序，如果我将字段转换为utf8，我会解决这个问题，但我的Web应用程序会出现问题。

那么如何使用 BDE 数据访问组件（TTable、TQuery）从 tis620 字段中检索数据呢？

请帮忙。

感谢大家。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-20T11:34:06.497

您是否在 Windows 设置中使用“泰语”作为非 Unicode 应用程序的语言？Delphi 5 应用程序可以很好地同时使用泰语和英语。您不能开箱即用的是混合字符集。但我怀疑你不需要完整的 Unicode，只是为了显示一些泰语和英语内容。

然后在您的 ODBC 驱动程序中设置代码页 Win-874。

或者，您可以从已弃用的 BDE 切换到更新的库。如果您坚持使用 Delphi 5，我建议您测试原生支持的[FreeDAC](http://www.da-soft.com/freedac)：

*   Oracle v 8.0.3 及更高版本；
*   MySQL v 3.23 及更高版本；
*   MSSQL v 2000 及更高版本；
*   MSAccess v 2000 及更高版本；
*   IBM DB2 UDB v 8 及更高版本；
*   Sybase ASA v 8 及更高版本。

当然，这个库已被弃用（有利于其 AnyDAC/FireDAC 进化），但它是 AFAIK 的 Delphi 5 最佳解决方案之一。它是免费的，有源代码。恕我直言，在 Delphi 世界中，它比任何基于 ADO 的组件都更受欢迎。

如果您使用 FreeDAC，则不需要配置 ODBC（当然也不需要配置 BDE），因为它提供对 MySQL 的直接访问。

# c# - 是否可以在 GTK#/mono 中使用 GTK SourceView？

> ID：16118373
> 
> 赞同：1
> 
> 时间：2013-04-20T08:39:51.650
> 
> 标签：c#, mono, gtk

是否可以`SourceView`在使用 mono / GTK# 编写的 c# 应用程序中使用 GTK 控件？

我确实只在 github 下找到了 2 个空存储库，并且从 mono 官方页面链接的链接已失效。是否有一些替代包装？

# iphone - AVPlayer 设置初始播放时间 iOS

> ID：16118374
> 
> 赞同：4
> 
> 时间：2013-04-20T08:39:51.860
> 
> 标签：iphone, ios, objective-c, avplayer

添加`KVO`了`AVPlayer`何时按原样播放`queuePlayer`视频`AVPlayer`

```
[self.queuePlayer addObserver:self forKeyPath:@"status" options:0 context:NULL]; 
```

`observer` `method`：

```
-(void)observeValueForKeyPath:(NSString *)keyPath ofObject:(id)object change:(NSDictionary *)change context:(void *)context {
  if ([keyPath isEqualToString:@"status"]) {
    if (self.queuePlayer.status == AVPlayerStatusReadyToPlay) {

        NSInteger step = (NSInteger)(startTimeForVideo/0.04);
        [self.queuePlayer.currentItem stepByCount:step];

        //CMTime seekTime = CMTimeMake(startTimeForVideo*timeScale,timeScale);
        //if (CMTIME_IS_VALID(seekTime)) 
        //  [self.queuePlayer seekToTime:seekTime toleranceBefore:kCMTimePositiveInfinity toleranceAfter:kCMTimePositiveInfinity];
        //else
        //  NSLog(@"In valid time");

        [self.queuePlayer play];
    } else if (self.queuePlayer.status == AVPlayerStatusFailed) {
        /* An error was encountered */
    }
} 
```

这里`startTimeForVideo`最初`playBack time`用于`video`

`seekToTime`也不工作`stepByCount`

**编辑**：用于`Values`是和即使`object``methods``correct``no luck`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-22T09:40:51.683

`KVO`方法`queuePlayer`的变化`AVPlayer`：

```
if (self.queuePlayer.status == AVPlayerStatusReadyToPlay) 
{
  //firstly make cmtime as here startTimeForVideo is Float64 value in seconds
  //get video's time scale as CMTime has it. 
  int32_t timeScale = self.queuePlayer.currentItem.asset.duration.timescale
  CMTime seektime=CMTimeMakeWithSeconds(startTimeForVideo, timeScale);
  //use this cmtime for seekToTime. 
  [self.queuePlayer seekToTime:seektime toleranceBefore:kCMTimeZero toleranceAfter:kCMTimeZero];
}
............ 
```

**编辑**：在这`kCMTimeZero`两种`tolerance field`方法`exact location`中`seekToTime: toleranceBefore: toleranceAfter:`

# html - 如何在不使用边距的情况下对齐页面中间的框？

> ID：16118378
> 
> 赞同：0
> 
> 时间：2013-04-20T08:40:16.987
> 
> 标签：html, css, margin

我试图在不使用边距的情况下在页面中间获得一个框。

我试过了-

```
.box-middle
{
vertical-align:middle;
height:100px;
width:100px;
border:1px solid #ddd;

} 
```

这根本行不通-

但是设置边距属性的东西有效，我不想使用`margin`. 因为提供边距会破坏响应式网页设计。

所以我有一个登录表单，想将它设置在页面中间。

请指导！

在这里你可以用这个盒子做技巧 -

[请让我居中](http://jsfiddle.net/stackmanoz/LTec3/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-20T20:23:00.203

使用以下 jQuery 代码：

```
 $(window).resize(function(){

  $('.className').css({
    position:'absolute',
    left: ($(window).width() - $('.className').outerWidth())/2,
    top: ($(window).height() - $('.className').outerHeight())/2
  });

  }); 
```

// 初始运行函数：

```
 $(window).resize(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-20T10:21:00.103

我已经更新了你的[小提琴](http://jsfiddle.net/LTec3/3/)

```
.box-middle
 {
 text-align:center;
 margin: 50px auto;
 height:100px;
 width:100px;
 border:1px solid #ddd;
background:#98bf26;

 }

<div style="border:1px solid">
 <div class="box-middle"></div>
</div> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-20T08:43:20.180

尝试这个：

```
.box-middle
{
margin-top:-50px;/*half the box's height*/
    margin-left:-50px;/*half the box's width*/
height:100px;
width:100px;
border:1px solid #ddd;
    background:#98bf26;
position: absolute;
top: 50%; left: 50%;

} 
```

[http://jsfiddle.net/LTec3/1/](http://jsfiddle.net/LTec3/1/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-20T09:25:09.927

您可以使用绝对位置手动居中

这将使大小为 20/60/20，并将根据用户窗口的一侧进行调整：

```
<DIV style="position:absolute; top:249px; left:20%; width:60%; height:700px;"> 
```

或者

```
<DIV style="position:absolute; top:249px; left:435px; width:233px; height:700px;"> 
```

还有简单的中心标签：

```
<center> 
```

# python - 获取字符串的字符（从右开始）

> ID：16118379
> 
> 赞同：2
> 
> 时间：2013-04-20T08:40:18.863
> 
> 标签：python, string

我正在寻找获取看起来像这样的变量的文件名的最佳方法：

```
 a = 'this\is\a\path\to\file'
 print a[-4:] 
```

我试图通过使用 print a[-4:] 提取最后四个字母来获取“文件”，但结果是：

```
 ile 
```

如果我 print a[-5:] 我得到：

```
 ofile 
```

我猜python的反斜杠有问题，转义它没有帮助。你会如何解决这个问题？你会按照我的方式去做，还是有一种更高效的方式来通过从右到左搜索“\”来获取“文件”？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-20T08:41:36.947

`\f`是 Python 中的单个字符（换页符）。尝试将反斜杠加倍：

```
a = 'this\\is\\a\\path\\to\\file' 
```

或者，等效地：

```
a = r'this\is\a\path\to\file' 
```

之后`print a[-4:]`将打印`file`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-20T09:13:18.897

```
>>> import os
>>> a = 'A/B'
>>> os.path.normpath(a)
'A\\B'
>>> a = 'A/./B'
>>> os.path.normpath(a)
'A\\B'
>>> a = 'A\B'
>>> os.path.normpath(a)
'A\\B'
>>> a = 'A\\B'
>>> os.path.normpath(a)
'A\\B' 
```

然后，而不是使用 [-4:] 更好的做法是使用 'A//B'.split(os.path.sep)[-1] 那么你确定你得到了整个路径的最后一部分。os.path.sep 返回当前操作系统中的分隔符。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-20T08:42:37.060

```
>>> a = r'this\is\a\path\to\file'
>>> print a[-4:]
file 
```

# php - PHP file_get_contents 无法获取 html 代码

> ID：16118385
> 
> 赞同：0
> 
> 时间：2013-04-20T08:40:56.077
> 
> 标签：php, html

我一直在使用以下代码来获取网页的 html 内容

```
$url = "http://mysmallwebpage.com/";
$html = file_get_contents($url); 
```

但是，`file_get_contents`无法打开以下形式的 URL，但是如果我在 Web 浏览器的地址栏中键入它们，这些 URL 可以正常打开。

```
www.etsy.com/listing/118415624/not-my-small-diary-17-true-high-school
blog.al.com/birmingham-news-commentary/2012/11/naked_art_gallery_gives_back_t.html
mysmallwebpage.com/ 
```

你能告诉我我可以用什么在php中打开上面的URL吗？

跟随不起作用

```
$url = "www.etsy.com/listing/118415624/not-my-small-diary-17-true-high-school";
$html = file_get_contents($url); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-20T08:44:02.390

除非您不使用`http://`PHP 前缀，否则不会知道您想要一个网页并尝试使用文件系统：

```
$url = "http://www.etsy.com/listing/118415624/not-my-small-diary-17-true-high-school";
$html = file_get_contents($url);
if (FALSE === $html) {
    throw new Exception(sprintf('Failed to open HTTP URL "%s".', $url));
} 
```

在开发中，启用所有错误、警告和通知。PHP 通常会告诉您这些问题当时以及它们出现的位置。

完整示例（[演示](http://codepad.viper-7.com/M728DJ)）：

```
<?php
/**
 * PHP file_get_contents can't get html code
 * @link http://stackoverflow.com/q/16118385/367456
 */
header('Content-Type: text/plain');
$url = "http://www.etsy.com/listing/118415624/not-my-small-diary-17-true-high-school";
$html = file_get_contents($url);
if (FALSE === $html) {
    throw new Exception(sprintf('Failed to open HTTP URL "%s".', $url));
}

$xml = simplexml_import_dom(@DOMDocument::loadHTML($html), 'SimpleXMLIterator');
$tree = new RecursiveTreeIterator($xml);

foreach($tree as $element => $line) {
    printf("%s <%s>\n", $tree->getPrefix(), $element);
} 
```

输出：

```
|- <head>
| |- <meta>
| |- <meta>
| |- <meta>
| |- <meta>
| |- <meta>
| |- <meta>
| |- <meta>
| |- <meta>
| |- <meta>
| |- <title>
| |- <meta>
| |- <link>
| |- <link>
| |- <link>
| |- <link>
| |- <link>
| |- <meta>
| |- <meta>
| |- <meta>
| |- <link>
| |- <link>
| |- <link>
| |- <link>
| |- <link>
| |- <link>
| |- <link>
| |- <script>
| |- <script>
| |- <script>
| |- <script>
| |- <script>
| |- <script>
| |- <link>
| |- <meta>
| |- <meta>
| |- <meta>
| |- <meta>
| |- <meta>
| |- <meta>
| |- <meta>
| |- <meta>
| |- <meta>
| |- <meta>
| |- <meta>
| |- <meta>
| |- <meta>
| |- <meta>
| |- <meta>
| |- <meta>
| |- <meta>
| |- <meta>
| |- <meta>
| |- <meta>
| |- <meta>
| |- <meta>
| |- <meta>
| |- <meta>
| |- <meta>
| |- <meta>
| |- <meta>
| |- <meta>
| |- <meta>
| |- <meta>
| \- <link>
\- <body>
  |- <div>
  |- <noscript>
  | \- <div>
  |   \- <p>
  |     \- <a>
  |- <script>
  |- <div>
  | |- <div>
  | | |- <ul>
  | | | |- <li>
  | | | | \- <a>
  | | | |- <li>
  | | | | |- <a>
  | | | | \- <span>
  | | | |- <li>
  | | | | |- <a>
  | | | | \- <div>
  | | | |   |- <div>
  | | | |   | \- <div>
  | | | |   |   \- <ul>
  | | | |   |     |- <li>
  | | | |   |     | \- <a>
  | | | |   |     |- <li>
  | | | |   |     | \- <a>
  | | | |   |     |- <li>
  | | | |   |     | \- <a>
  | | | |   |     |- <li>
  | | | |   |     | \- <a>
  | | | |   |     \- <li>
  | | | |   |       \- <a>
  | | | |   \- <span>
  | | | |- <li>
  | | | | |- <a>
  | | | | \- <div>
  | | | |   |- <div>
  | | | |   | \- <div>
  | | | |   |   \- <ul>
  | | | |   |     |- <li>
  | | | |   |     | \- <a>
  | | | |   |     |- <li>
  | | | |   |     | \- <a>
  | | | |   |     |- <li>
  | | | |   |     | \- <a>
  | | | |   |     \- <li>
  | | | |   |       \- <a>
  | | | |   \- <span>
  | | | |- <li>
  | | | | \- <a>
  | | | |- <li>
  | | | | \- <a>
  | | | \- <li>
  | | |   \- <a>
  | | \- <ul>
  | |   \- <li>
  | |     \- <a>
  | \- <div>
  |   |- <h1>
  |   | \- <a>
  |   |- <ul>
  |   | |- <li>
  |   | | \- <a>
  |   | \- <li>
  |   |   \- <a>
  |   |- <input>
  |   |- <input>
  |   |- <input>
  |   |- <input>
  |   |- <input>
  |   |- <form>
  |   | |- <div>
  |   | | |- <input>
  |   | | |- <button>
  |   | | \- <div>
  |   | |   \- <ul>
  |   | |- <input>
  |   | \- <input>
  |   \- <div>
  |     \- <a>
  |       \- <span>
  |- <div>
  | \- <div>
  |   |- <a>
  |   | \- <span>
  |   |- <ul>
  |   | |- <li>
  |   | | \- <a>
  |   | \- <li>
  |   |   \- <a>
  |   \- <div>
  |     |- <div>
  |     | |- <div>
  |     | | \- <p>
  |     | |- <div>
  |     | \- <form>
  |     |   |- <div>
  |     |   | \- <h2>
  |     |   |- <div>
  |     |   | |- <div>
  |     |   | | |- <a>
  |     |   | | | \- <span>
  |     |   | | \- <div>
  |     |   | |- <input>
  |     |   | |- <input>
  |     |   | |- <input>
  |     |   | |- <input>
  |     |   | \- <p>
  |     |   |- <div>
  |     |   | \- <span>
  |     |   |- <div>
  |     |   | |- <label>
  |     |   | |- <span>
  |     |   | |- <span>
  |     |   | \- <input>
  |     |   |- <div>
  |     |   | |- <label>
  |     |   | |- <span>
  |     |   | \- <input>
  |     |   |- <div>
  |     |   | |- <input>
  |     |   | |- <label>
  |     |   | |- <input>
  |     |   | |- <label>
  |     |   | |- <input>
  |     |   | \- <label>
  |     |   |- <hr>
  |     |   |- <div>
  |     |   | |- <label>
  |     |   | |- <span>
  |     |   | | |- <span>
  |     |   | | \- <span>
  |     |   | |- <span>
  |     |   | \- <input>
  |     |   |- <div>
  |     |   | |- <label>
  |     |   | |- <span>
  |     |   | \- <input>
  |     |   |- <div>
  |     |   | |- <label>
  |     |   | |- <span>
  |     |   | \- <input>
  |     |   |- <div>
  |     |   | |- <label>
  |     |   | |- <span>
  |     |   | |- <input>
  |     |   | |- <div>
  |     |   | | |- <span>
  |     |   | | \- <span>
  |     |   | \- <div>
  |     |   |   |- <span>
  |     |   |   \- <span>
  |     |   |- <hr>
  |     |   |- <p>
  |     |   | |- <a>
  |     |   | \- <a>
  |     |   |- <p>
  |     |   | |- <input>
  |     |   | |- <input>
  |     |   | |- <input>
  |     |   | |- <span>
  |     |   | | \- <span>
  |     |   | |   \- <input>
  |     |   | \- <span>
  |     |   \- <div>
  |     |     |- <input>
  |     |     \- <label>
  |     \- <div>
  |       |- <div>
  |       | \- <p>
  |       \- <form>
  |         |- <div>
  |         | |- <label>
  |         | |- <input>
  |         | \- <span>
  |         |- <div>
  |         | |- <label>
  |         | |- <input>
  |         | \- <span>
  |         |- <div>
  |         | |- <input>
  |         | \- <label>
  |         |- <p>
  |         | |- <input>
  |         | |- <input>
  |         | |- <input>
  |         | |- <span>
  |         | | \- <span>
  |         | |   \- <input>
  |         | \- <span>
  |         |- <hr>
  |         |- <p>
  |         | \- <a>
  |         \- <p>
  |           \- <a>
  |- <div>
  | \- <div>
  |   \- <div>
  |- <script>
  |- <script>
  |- <div>
  | \- <div>
  |   \- <p>
  |     |- <strong>
  |     |- <strong>
  |     \- <strong>
  |- <div>
  | |- <ul>
  | | |- <li>
  | | | |- <a>
  | | | \- <span>
  | | \- <li>
  | |   \- <a>
  | \- <div>
  |   \- <div>
  |     |- <div>
  |     | |- <div>
  |     | | |- <div>
  |     | | | |- <input>
  |     | | | |- <div>
  |     | | | | \- <a>
  |     | | | |   \- <span>
  |     | | | \- <div>
  |     | | |   |- <h3>
  |     | | |   \- <p>
  |     | | |- <div>
  |     | | | |- <h1>
  |     | | | \- <p>
  |     | | |   \- <a>
  |     | | |- <div>
  |     | | | |- <div>
  |     | | | | \- <a>
  |     | | | |   \- <img>
  |     | | | \- <div>
  |     | | |   \- <a>
  |     | | |- <div>
  |     | | | |- <a>
  |     | | | | \- <img>
  |     | | | |- <a>
  |     | | | | \- <img>
  |     | | | |- <a>
  |     | | | | \- <img>
  |     | | | |- <a>
  |     | | | | \- <img>
  |     | | | \- <a>
  |     | | |   \- <img>
  |     | | |- <div>
  |     | | | \- <div>
  |     | | |   |- <br>
  |     | | |   \- <p>
  |     | | |     |- <br>
  |     | | |     \- <a>
  |     | | |- <div>
  |     | | | |- <h3>
  |     | | | | \- <span>
  |     | | | |- <h4>
  |     | | | \- <table>
  |     | | |   |- <tr>
  |     | | |   | |- <th>
  |     | | |   | |- <th>
  |     | | |   | \- <th>
  |     | | |   |- <tr>
  |     | | |   | |- <td>
  |     | | |   | |- <td>
  |     | | |   | | |- <span>
  |     | | |   | | |- <span>
  |     | | |   | | \- <span>
  |     | | |   | \- <td>
  |     | | |   |   |- <span>
  |     | | |   |   |- <span>
  |     | | |   |   \- <span>
  |     | | |   \- <tr>
  |     | | |     |- <td>
  |     | | |     |- <td>
  |     | | |     | |- <span>
  |     | | |     | |- <span>
  |     | | |     | \- <span>
  |     | | |     \- <td>
  |     | | |       |- <span>
  |     | | |       |- <span>
  |     | | |       \- <span>
  |     | | |- <div>
  |     | | | |- <div>
  |     | | | | |- <h3>
  |     | | | | \- <ul>
  |     | | | |   |- <div>
  |     | | | |   | |- <p>
  |     | | | |   | | \- <span>
  |     | | | |   | \- <span>
  |     | | | |   |- <li>
  |     | | | |   | \- <span>
  |     | | | |   \- <li>
  |     | | | |     \- <span>
  |     | | | \- <div>
  |     | | |   |- <h3>
  |     | | |   \- <ul>
  |     | | |     |- <li>
  |     | | |     | \- <a>
  |     | | |     \- <li>
  |     | | |       \- <a>
  |     | | |- <div>
  |     | | | |- <ul>
  |     | | | | |- <li>
  |     | | | | | \- <a>
  |     | | | | |   \- <strong>
  |     | | | | |     |- <span>
  |     | | | | |     \- <span>
  |     | | | | \- <li>
  |     | | | |   |- <div>
  |     | | | |   | \- <a>
  |     | | | |   \- <div>
  |     | | | \- <div>
  |     | | |   |- <div>
  |     | | |   | |- <div>
  |     | | |   | | |- <h3>
  |     | | |   | | |- <p>
  |     | | |   | | |- <h3>
  |     | | |   | | \- <p>
  |     | | |   | \- <div>
  |     | | |   |   |- <h3>
  |     | | |   |   \- <p>
  |     | | |   |- <div>
  |     | | |   | \- <div>
  |     | | |   |   |- <h3>
  |     | | |   |   \- <div>
  |     | | |   |     |- <a>
  |     | | |   |     |- <a>
  |     | | |   |     \- <a>
  |     | | |   \- <div>
  |     | | |     \- <ul>
  |     | | |       |- <li>
  |     | | |       \- <li>
  |     | | |- <div>
  |     | | | |- <h3>
  |     | | | \- <div>
  |     | | |   \- <ul>
  |     | | \- <script>
  |     | |- <div>
  |     | | |- <div>
  |     | | | |- <div>
  |     | | | | |- <div>
  |     | | | | |- <div>
  |     | | | | | |- <span>
  |     | | | | | |- <span>
  |     | | | | | |- <a>
  |     | | | | | | \- <span>
  |     | | | | | \- <span>
  |     | | | | \- <div>
  |     | | | \- <div>
  |     | | |   |- <div>
  |     | | |   |- <div>
  |     | | |   | \- <div>
  |     | | |   |   \- <div>
  |     | | |   \- <div>
  |     | | |     |- <div>
  |     | | |     | \- <form>
  |     | | |     |   |- <input>
  |     | | |     |   |- <input>
  |     | | |     |   |- <input>
  |     | | |     |   |- <input>
  |     | | |     |   |- <input>
  |     | | |     |   \- <span>
  |     | | |     |     \- <span>
  |     | | |     |       \- <input>
  |     | | |     \- <div>
  |     | | |       \- <div>
  |     | | |         |- <input>
  |     | | |         |- <input>
  |     | | |         |- <input>
  |     | | |         \- <a>
  |     | | |           \- <span>
  |     | | |- <div>
  |     | | | \- <p>
  |     | | |   |- <span>
  |     | | |   \- <span>
  |     | | |     \- <span>
  |     | | |- <script>
  |     | | |- <div>
  |     | | | |- <div>
  |     | | | | |- <h2>
  |     | | | | |- <ul>
  |     | | | | | |- <li>
  |     | | | | | | \- <span>
  |     | | | | | |   \- <a>
  |     | | | | | \- <li>
  |     | | | | |- <div>
  |     | | | | | \- <div>
  |     | | | | |   |- <span>
  |     | | | | |   |- <div>
  |     | | | | |   | \- <a>
  |     | | | | |   |   \- <img>
  |     | | | | |   |- <div>
  |     | | | | |   | \- <a>
  |     | | | | |   |   \- <img>
  |     | | | | |   \- <div>
  |     | | | | |     \- <a>
  |     | | | | |       \- <span>
  |     | | | | \- <ul>
  |     | | | |   |- <li>
  |     | | | |   | |- <input>
  |     | | | |   | \- <a>
  |     | | | |   |   \- <span>
  |     | | | |   \- <li>
  |     | | | |     \- <a>
  |     | | | |       \- <span>
  |     | | | |- <div>
  |     | | | | |- <h2>
  |     | | | | \- <div>
  |     | | | |   |- <div>
  |     | | | |   | \- <a>
  |     | | | |   |   \- <img>
  |     | | | |   \- <ul>
  |     | | | |     |- <li>
  |     | | | |     | \- <a>
  |     | | | |     |- <li>
  |     | | | |     |- <li>
  |     | | | |     | \- <a>
  |     | | | |     |- <li>
  |     | | | |     | \- <a>
  |     | | | |     |- <li>
  |     | | | |     | \- <a>
  |     | | | |     \- <li>
  |     | | | |       \- <a>
  |     | | | |         \- <span>
  |     | | | \- <div>
  |     | | |   |- <h2>
  |     | | |   |- <ul>
  |     | | |   | |- <li>
  |     | | |   | | |- <input>
  |     | | |   | | \- <a>
  |     | | |   | |   |- <span>
  |     | | |   | |   \- <span>
  |     | | |   | |- <li>
  |     | | |   | | \- <a>
  |     | | |   | |   \- <span>
  |     | | |   | \- <li>
  |     | | |   |   \- <a>
  |     | | |   |     |- <span>
  |     | | |   |     \- <span>
  |     | | |   |- <hr>
  |     | | |   |- <ul>
  |     | | |   | |- <li>
  |     | | |   | | |- <script>
  |     | | |   | | \- <a>
  |     | | |   | |   |- <span>
  |     | | |   | |   \- <span>
  |     | | |   | |- <li>
  |     | | |   | | |- <script>
  |     | | |   | | \- <a>
  |     | | |   | \- <li>
  |     | | |   |   |- <like>
  |     | | |   |   \- <script>
  |     | | |   |- <hr>
  |     | | |   \- <div>
  |     | | |     \- <ul>
  |     | | |       |- <li>
  |     | | |       \- <li>
  |     | | |         \- <a>
  |     | | \- <div>
  |     | |   |- <div>
  |     | |   | |- <div>
  |     | |   | |- <div>
  |     | |   | | |- <span>
  |     | |   | | |- <span>
  |     | |   | | |- <a>
  |     | |   | | | \- <span>
  |     | |   | | \- <span>
  |     | |   | \- <div>
  |     | |   \- <div>
  |     | |     |- <div>
  |     | |     |- <div>
  |     | |     | \- <div>
  |     | |     |   \- <div>
  |     | |     \- <div>
  |     | |       |- <div>
  |     | |       | \- <form>
  |     | |       |   |- <input>
  |     | |       |   |- <input>
  |     | |       |   |- <input>
  |     | |       |   |- <input>
  |     | |       |   |- <input>
  |     | |       |   \- <span>
  |     | |       |     \- <span>
  |     | |       |       \- <input>
  |     | |       \- <div>
  |     | |         \- <div>
  |     | |           |- <input>
  |     | |           |- <input>
  |     | |           |- <input>
  |     | |           \- <a>
  |     | |             \- <span>
  |     | |- <script>
  |     | |- <div>
  |     | | \- <div>
  |     | |   |- <span>
  |     | |   \- <a>
  |     | |     \- <span>
  |     | \- <script>
  |     |- <div>
  |     \- <div>
  |       |- <div>
  |       | |- <div>
  |       | | |- <h2>
  |       | | \- <a>
  |       | |   \- <span>
  |       | \- <form>
  |       |   |- <div>
  |       |   | |- <div>
  |       |   | |- <div>
  |       |   | |- <input>
  |       |   | |- <div>
  |       |   | |- <div>
  |       |   | | |- <label>
  |       |   | | \- <select>
  |       |   | |   |- <option>
  |       |   | |   |- <optgroup>
  |       |   | |   \- <optgroup>
  |       |   | \- <div>
  |       |   |   |- <label>
  |       |   |   \- <input>
  |       |   \- <div>
  |       |     |- <button>
  |       |     \- <div>
  |       |       \- <span>
  |       \- <div>
  |         \- <div>
  |           |- <a>
  |           | \- <span>
  |           |- <h2>
  |           \- <a>
  |- <div>
  |- <div>
  | |- <p>
  | |- <ul>
  | | |- <li>
  | | | \- <a>
  | | |- <li>
  | | | \- <a>
  | | |- <li>
  | | | \- <a>
  | | |- <li>
  | | | \- <a>
  | | |- <li>
  | | | \- <a>
  | | |- <li>
  | | | \- <a>
  | | |- <li>
  | | | \- <a>
  | | |- <li>
  | | | \- <a>
  | | \- <li>
  | |   \- <a>
  | |- <p>
  | | |- <a>
  | | | \- <span>
  | | |- <a>
  | | | \- <span>
  | | |- <a>
  | | \- <span>
  | \- <script>
  |- <script>
  |- <script>
  |- <div>
  | \- <div>
  |   |- <div>
  |   | \- <h2>
  |   \- <div>
  |     \- <div>
  |       \- <a>
  |         \- <span>
  |- <script>
  |- <script>
  |- <script>
  |- <script>
  |- <script>
  |- <script>
  |- <script>
  |- <noscript>
  | \- <iframe>
  |- <script>
  |- <script>
  |- <script>
  |- <script>
  |- <script>
  |- <script>
  |- <script>
  |- <script>
  |- <script>
  |- <script>
  |- <script>
  |- <script>
  |- <script>
  |- <script>
  \- <script> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-20T08:48:56.067

`http://`之前使用`"www.etsy.com/listing/118415624/not-my-small-diary-17-true-high-school"`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-20T08:53:52.650

> $url = " [http://www.etsy.com/listing/118415624/not-my-small-diary-17-true-high-school](http://www.etsy.com/listing/118415624/not-my-small-diary-17-true-high-school) "; $html = file_get_contents($url); 使用它正在工作的这个网址。

你在 url 中使用 http。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-20T08:53:05.517

试试这个它工作正常

```
$url = "http://www.etsy.com/listing/118415624/not-my-small-diary-17-true-high-school";
$html = file_get_contents($url);

echo "<pre>";
print_r($html);
exit; 
```

# javascript - 我想调用setinterval，当setinterval完成后，换页

> ID：16118386
> 
> 赞同：0
> 
> 时间：2013-04-20T08:40:56.943
> 
> 标签：javascript, jquery

我想使用设置间隔，当间隔完成时，更改页面 - 但是，在下面的情况下，当我想在 myNumber >= 300 时更改页面时，它会在 1 个间隔运行后更改页面。

我会很感激任何帮助，谢谢

```
 var myNumber = 0;

function openportal() {

    var myInterval = window.setInterval(myzoom,2);
        document.location.href ="http://next page";

}

function myzoom () {

      if(myNumber>=300){
          clearInterval(myInterval);
      }
      myNumber++;

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T08:45:36.673

问题是您正在调用`document.location.href ="http://next page";`该`openportal`方法，该方法将设置间隔，然后将页面重定向到新位置。

```
var myNumber = 0, myInterval;

function openportal() {
    myInterval = window.setInterval(myzoom,2);    
}

function myzoom () {
    if(myNumber>=300){
        clearInterval(myInterval)
        document.location.href ="http://next page";
    }
    myNumber++;

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-20T08:47:39.103

该`setInterval`方法是异步的。它不会等待间隔停止。

更改停止间隔的页面：

```
var myNumber = 0;
var myInterval;

function openportal() {

  myInterval = window.setInterval(myzoom,2);

}

function myzoom () {

  if(myNumber>=300){
    clearInterval(myInterval);
    document.location.href ="http://next page";
  }
  myNumber++;
} 
```

# java - 使用休眠查询迭代列表

> ID：16118396
> 
> 赞同：0
> 
> 时间：2013-04-20T08:42:12.113
> 
> 标签：java, hibernate, jsp, spring-mvc, hibernate-annotations

我有用户表

uid 用户名 密码 1 stephen 1542S 2 james 8452b

**存储过程名称：** sp_gridview **查询：** select * from userTable

```
List list=null; 
list=hibernateTemplate.
getSessionFactory().openSession()
.createSQLQuery("call sp_gridview").list();

for(int i=0; i<list.size(); i++)
{
System.out.println(list.get(i));
} 
```

在这里我没有使用泛型，因为我的要求不需要。我尝试迭代上面的列表，但它显示结果是哈希码。

```
output: [Ljava.lang.Object;@3c668d12. 
```

我如何迭代一个列表并获得一个没有哈希码的值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T08:49:22.833

似乎您得到了`Object`支持，并且`Object.toString()`在尝试打印时会调用它来打印它。要解决它，您可以将其转换为实际类型`Object`以获取特定`toString()`方法。像这样：

```
System.out.println((String)list.get(i)); 
```

# sql - 在oracle sql中自动增加带有字符串前缀的ID？

> ID：16118398
> 
> 赞同：1
> 
> 时间：2013-04-20T08:42:26.193
> 
> 标签：sql, database, oracle

我创建了下表，并且希望在数据库中添加一行时让用户 ID 自动递增。但是，我希望将 ID 格式化为 000001，例如如下所示，因为有几个表，最好给每个 ID 一个字符串前缀：

```
userID
----------
user000001
user000002
user000003

CREATE TABLE UserTable (
userID VARCHAR(20),
username VARCHAR(250) NOT NULL,
firstName VARCHAR(250) NOT NULL,
lastName VARCHAR(250) NOT NULL,
CONSTRAINT pkUserID
    PRIMARY KEY (userID),
CONSTRAINT uniUsername
    UNIQUE (username)
); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-20T08:49:11.657

您必须使用触发器和序列的组合，如下面的代码所示：

```
CREATE SEQUENCE CREATE SEQUENCE usertable_seq
START WITH 1
INCREMENT BY 1
NOCACHE
NOCYCLE;
/

CREATE OR REPLACE TRIGGER usertable_trigger  
BEFORE INSERT ON UserTable
FOR EACH ROW

BEGIN
  SELECT 'user' || to_char(usertable_seq.NEXTVAL, '000099')
  INTO   :new.userID
  FROM   dual;
END;
/ 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-20T08:50:15.193

前缀`user`绝对没有意义，因为它附加到每个 ID。放下它并`ID NUMBER`只使用一个。另外，请遵循 Jugal 的建议。

# c++ - VC 2005 错误“'P1' 版本 '20060201' 和 'P2' 版本 '20050411' 之间不匹配”

> ID：16118404
> 
> 赞同：0
> 
> 时间：2013-04-20T08:43:21.663
> 
> 标签：c++, visual-studio-2005

我遇到了一个错误，我只是找不到问题，有人可以帮助我或解释什么是错误的吗？仍然试图注释掉问题或搜索只是找不到与此错误相关的任何线索：

```
 1>Compiling...
1>option.cpp
1>Linking...
1>fatal error C1900: Il mismatch between 'P1' version '20060201' and 'P2' version '20050411'
1>LINK : fatal error LNK1257: code generation failed
1>Build log was saved at "file://c:\Users\modestas\Desktop\ybtx\code\game\gas\GameGas\Release\BuildLog.htm"
1>GameGas - 1 error(s), 0 warning(s)
========== Build: 0 succeeded, 1 failed, 12 up-to-date, 0 skipped ========== 
```

没有代码，因为无法理解发生这种情况的位置。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-20T08:46:40.913

这意味着，你`InitVariantContainer`在类中定义了声明，但你没有实现它的主体：

```
void CCypherVariantHolderForDecode::InitVariantContainer(void)
{
  // ...
} 
```

# mysql - 命令行 mysql 客户端未打开 ubuntu 12.10

> ID：16118409
> 
> 赞同：-2
> 
> 时间：2013-04-20T08:43:47.947
> 
> 标签：mysql, lamp

**我无法在终端中启动 mysql 客户端我使用以下命令来统计 mysql 客户端**

> 须藤mysql

并得到以下错误

> ERROR 2002 (HY000): 无法通过套接字 '/var/run/mysqld/mysqld.sock' 连接到本地 MySQL 服务器 (2)

我用这个命令来启动我的服务器

> sudo /opt/lampp/lampp 开始

请告诉我做错了什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T09:04:54.473

试试`mysql -u root -h 127.0.0.1`。

出于某种原因，来自 XAMPP 的 mysql 没有绑定套接字。

# java - exec 命令在 php 脚本中不起作用

> ID：16118413
> 
> 赞同：0
> 
> 时间：2013-04-20T08:44:03.410
> 
> 标签：java, php, exec

我有一个 java 文件，它会生成 iTunes 报告。我想在我的 php 脚本中执行这个。我在php中使用exec（）函数：它在linux中正常工作。但在windows中没有。我错过了什么吗？任何帮助将不胜感激。

```
exec("java Autoingestion ".'USERNAME'." '".'PASSWORD'."' ".'VENDORID'." ".'REPORT_TYPE'." ".'DATE_TYPE'." ".'REPORT_SUB_TYPE'." ".'2012-05-28'."",$output,$return); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T08:56:39.370

检查字符串连接的结果。它看起来有点不确定：

```
"java Autoingestion USERNAME 'PASSWORD' VENDORID REPORT_TYPE DATE_TYPE REPORT_SUB_TYPE 2012-05-28" 
```

您没有使用任何变量或其他任何东西，因此没有理由连接东西。

即使大写部分是占位符，您也不必连接。只需使用变量插值：

```
$username = 'USERNAME';
$password = 'PASSWORD';
$exec = "java Autoingestion '{$username}', '{$password}', ...";
exec($exec); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-20T08:50:28.830

我建议您检查脚本输出（在 stdout 和 stderr 上）。

还要检查运行脚本所需的环境变量。

# haskell - kind * -> * 类型的示例，它不能是 Functor 的实例

> ID：16118414
> 
> 赞同：22
> 
> 时间：2013-04-20T08:44:11.093
> 
> 标签：haskell, functional-programming

我是一个 Haskell 新手，如果答案很明显，我很抱歉，但我正在通过 Typeclassopedia 努力更好地理解类别。在为 Functors 部分做练习时，我遇到了这个问题：

> 举一个 * -> * 类型的例子，它不能成为 Functor 的实例（不使用 undefined）。

我的第一个想法是定义某种无限递归的 fmap 定义，但这`undefined`与定义中使用的 if 本质上不一样吗？

如果有人可以解释答案，将不胜感激。

谢谢！

原始练习的来源，第 3 部分：[http ://www.haskell.org/haskellwiki/Typeclassopedia#Introduction](http://www.haskell.org/haskellwiki/Typeclassopedia#Introduction)

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-04-20T09:01:07.390

一个简单的例子是

```
data K a = K (a -> Int) 
```

ghci 告诉我们的是，我们尝试自动`Functor`为 派生一个实例`K`：

```
Prelude> :set -XDeriveFunctor
Prelude> data K a = K (a -> Int)
Prelude> :k K
K :: * -> *
Prelude> data K a = K (a -> Int) deriving Functor

<interactive>:14:34:
    Can't make a derived instance of `Functor K':
      Constructor `K' must not use the type variable in a function argument
    In the data type declaration for `K' 
```

问题是标准`Functor`类实际上表示*协变*函子（`fmap`将其参数提升到`f a -> f b`），但是您无法组合`a -> b`并`a -> Int`获得类型的函数`b -> Int`（请参阅 Ramon 的回答）。但是，可以为逆变函子定义类型类：

```
class Contravariant f where
    contramap :: (a -> b) -> f b -> f a 
```

并创建`K`一个实例：

```
instance Contravariant K where
    contramap f (K g) = K (g . f) 
```

有关 Haskell 中协变/逆变的更多信息，请参见[此处](https://stackoverflow.com/questions/9302739/covariance-contravariance-in-haskell)。

**编辑：**这里也是Chris Smith 在 Reddit[上对这个主题的一个很好的评论。](http://www.reddit.com/r/haskell/comments/1cht4v/what_does_coalgebra_mean_in_the_context_of/c9gzulr)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-04-20T09:07:30.873

要扩展我的（简短）评论和米哈伊尔的回答：

鉴于`(-> Int)`，您希望`fmap`看起来像这样：

```
(a -> Int) -> (a -> b) -> (b -> Int) 
```

或者：

```
(a -> Int) -> (a -> b) -> b -> Int 
```

很容易证明，从三个参数`(a -> Int)`，`(a -> b)`，`b`没有可能到达`Int`（没有`undefined`），因此从`(a -> Int)`，`(a -> b)`没有办法到达`(b -> Int)`。结论：不`Functor`存在`(-> Int)`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-10-20T01:59:22.637

我也遇到了这个问题，我发现 Ramon 和 Mikhail 的回答内容丰富——谢谢！我把它放在答案而不是评论中，因为 500 个字符太短，而且对于代码格式化。

我很难理解什么是协变的，`(a -> Int)`并想出了这个反例，显示`data K a = K (a -> Int)` *可以*作为 Functor 的一个实例（反驳 Ramon 的证明）

```
data K a = K (a -> Int)
instance Functor K where
  fmap g (K f) = K (const 0) 
```

如果它编译，它一定是正确的，对吧？;-) 我花了一些时间尝试其他排列。翻转函数只是让它更容易：

```
-- "o" for "output"
-- The fmapped (1st) type is a function output so we're OK.
data K0 o = K0 (Int -> o)
instance Functor K0 where
  fmap :: (oa -> ob) -> (K0 oa) -> (K0 ob)
  fmap g (K0 f) = K0 (g . f) 
```

将 Int 转换为类型变量将其简化为第 3.2 节练习 1 第 2 部分：

```
-- The fmapped (2nd) type argument is an output
data K1 a b = K1 (a -> b)
instance Functor (K1 a) where
  fmap :: (b1 -> b2) -> K1 a b1 -> K1 a b2
  fmap g (K1 f) = K1 (g . f) 
```

强制 fmapped 类型成为函数的参数是关键......就像米哈伊尔的回答所说，但现在我明白了;-)

```
-- The fmapped (2nd) type argument is an input
data K2 a b = K2 (b -> a) 
instance Functor (K2 o) where
  fmap :: (ia -> ib) -> (K2 o ia) -> (K2 o ib)
  -- Can't get our hands on a value of type o
  fmap g (K2 f) = K2 (const (undefined :: o))
  -- Nor one of type ia
  fmap g (K2 f) = K2 (const (f (undefined :: ia))) 
```

# ruby-on-rails - 如何通过rails中的控制器设置外键？

> ID：16118417
> 
> 赞同：0
> 
> 时间：2013-04-20T08:44:19.740
> 
> 标签：ruby-on-rails, associations

我有一个嵌套在用户表单中的地址表单，但无法填写外键。我看到人们建议使用隐藏字段，但从安全角度来看，这似乎是个坏主意。您如何使用控制器设置外键？现在我在尝试提交时收到地址用户不能为空白错误

MVC 下面

用户\new.html.erb

```
<div>
    <%= form_for(@user) do |f| %>
        <%= render 'shared/error_messages' %>

        <%= f.label :rank %>
        <%= f.text_field :rank %>

        <%= f.label :firstName, "First Name" %>
        <%= f.text_field :firstName %>

        <%= f.label :lastName, "Last Name" %>
        <%= f.text_field :lastName %>

        <%= f.label :middleInitial, "Middle Initial" %>
        <%= f.text_field :middleInitial %>

            <%= fields_for :address do |a| %>

                <%= a.label :address %>
                <%= a.text_field :address %>

                <%= a.label :city %>
                <%= a.text_field :city %>

                <%= a.label :state %>
                <%= a.text_field :state %>

                <%= a.label :zip, "Zip Code" %>
                <%= a.text_field :zip %>
            <% end %>

        <%= f.label :email %>
        <%= f.text_field :email %>

        <%= f.label :dateOfBirth, "Date of Birth" %>
        <%= f.text_field :dateOfBirth %>

        <%= f.label :MOS, "MOS" %>
        <%= f.text_field :MOS %>

        <%= f.label :ets_pcsDate, "ETS/PCS Date" %>
        <%= f.text_field :ets_pcsDate %>

        <%= f.label :phoneNum, "Phone Number" %>
        <%= f.text_field :phoneNum %>

        <%= f.label :password %>
        <%= f.text_field :password %>   

        <%= f.label :password_confirmation, "Confirmation" %>
        <%= f.text_field :password_confirmation %>  

        <%= f.submit "Sign up" %>
    <% end %>
</div>

<h1>Users#new</h1>
<p>Find me in app/views/users/new.html.erb</p> 
```

楷模

用户

```
class User < ActiveRecord::Base
  attr_accessible :MOS, :dateOfBirth, :ets_pcsDate, :firstName, 
  :lastName, :middleInitial, :phoneNum, :rank, :email, :password, 
  :password_confirmation

  has_secure_password
  has_one :address, dependent: :destroy

  accepts_nested_attributes_for :address

  before_save {  |user| user.email = email.downcase  }
  before_save :create_remember_token

  validates :rank,          presence: true
  validates :firstName,         presence: true, length: {  maximum: 15  }
  validates :lastName,      presence: true, length: {  maximum: 20  }
  validates :middleInitial,     presence: true, length: {  maximum: 1  }

  VALID_EMAIL_REGEX = /\A[\w+\-.]+@[a-z\d\-.]+\.[a-z]+\z/i
  validates :email,         presence: true, 
                format: {  with: VALID_EMAIL_REGEX  },
                    uniqueness: {  case_sensitive: false  }

  validates :dateOfBirth,       presence: true
  validates :MOS,               presence: true
  validates :ets_pcsDate,           presence: true
  validates :phoneNum,          presence: true
  validates :password,      length: {  minimum: 6  }
  validates :password_confirmation, presence: true

  private

    def create_remember_token
      self.remember_token = SecureRandom.urlsafe_base64
    end
  end 
```

地址

```
class Address < ActiveRecord::Base
  attr_accessible :address, :city, :state, :zip

belongs_to :user

validates :address,         presence: :true
validates :city,              presence: :true
validates :state,               presence: :true
validates :zip,           presence: true
    validates :user_id,       presence: true
end 
```

控制器

```
class UsersController < ApplicationController
  before_filter :signed_in_user, only: [:index, :edit, :update, :show, :destory]
  before_filter :correct_user, only:[:edit, :update]
  before_filter :admin_user, only: :destroy

  def new
@user = User.new
    @user.address.build
  end

  def create
@user = User.new(params[:user])
@address = @user.build_address(params[:address])
   if @user.save
    sign_in @user
            flash[:success] = "Welcome to B Troop!"
    redirect_to @user
else
    render 'new'
end
  end

  def show
@user = User.find(params[:id])
  end

  def index
    @users = User.paginate(page: params[:page])
  end

  def edit
  end

  def update
    if @user.update_attributes(params[:user])
      flash[:success] = "Profile updated"
      sign_in @user
      redirect_to @user
    else
      render 'edit'
    end
  end

  def destroy
    User.find(params[:id]).destroy
    flash[:success] = "User removed"
    redirect_to users_path
  end

  private
    def signed_in_user
      unless signed_in?
        store_location
        redirect_to root_path, notice: "Please sign in."
      end
    end

    def correct_user
      @user = User.find(params[:id])
      redirect_to(root_path) unless current_user?(@user)
    end

    def admin_user
      redirect_to(root_path) unless current_user.admin?
    end
end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T02:57:50.440

删除 user_id 验证就可以了。

# javascript - 使用自定义指令时模板未更新且 $http 未触发请求

> ID：16118418
> 
> 赞同：0
> 
> 时间：2013-04-20T08:44:31.027
> 
> 标签：javascript, angularjs

我正在尝试创建一个自定义指令来处理粘贴事件，这就是我想出的：

```
app.directive('ngPaste', function(){
    var obj = {
        compile: function(element, attrs) {
            return function(scope, elem, attrs){
                elem.bind('paste', function() {
                    var funcName = attrs.ngPaste.replace('(', '').replace(')', '');
                    if(typeof(scope[funcName]) == 'function') {
                        setTimeout(function(){
                            scope.$apply(scope[funcName]);
                        }, 10);
                    }
                });
            };
        }
    };
    return obj;
}); 
```

问题是我在回调中更改的模型不会更新模板，并且 $http 对象不会触发任何请求。我一定错过了一些非常简单的东西，但不幸的是，文档在这些问题上相当缺乏。

我该如何解决这个问题？

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T18:49:59.030

问题是我使用的是不稳定的 angular 1.1.4。我降级到 1.1.1（它也不稳定，但具有我需要的功能）并且问题不再发生。

# android - Android - 如何使用外部应用程序打开音频流 url？

> ID：16118419
> 
> 赞同：0
> 
> 时间：2013-04-20T08:44:51.640
> 
> 标签：android, android-intent, android-activity

我想让用户选择使用他已经安装的音频播放器打开音频流 url。

到目前为止，以下代码的工作原理是用户获取已安装音频应用程序的列表，然后可以在其中进行选择。

```
Intent intent = new Intent();
intent.setAction(Intent.ACTION_VIEW);
intent.setDataAndType(Uri.parse(stream.getAudio()), "audio/*");
startActivity(intent); 
```

但它会打开一个只存在于我的应用程序中的意图。因此，如果用户关闭我的应用程序，播放将停止。如何更改行为，以便不启动新活动，而是启动整个应用程序并与我的应用程序分离。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T10:08:06.307

我猜这是因为音频播放器是在您的应用程序的同一任务堆栈中打开的。尝试[`Intent.FLAG_ACTIVITY_NEW_TASK`](http://developer.android.com/reference/android/content/Intent.html#FLAG_ACTIVITY_NEW_TASK)将其作为新任务启动，例如：

```
intent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK); 
```

请参阅[任务和返回堆栈](http://developer.android.com/guide/components/tasks-and-back-stack.html)以了解更多信息。

# javascript - 获取与元素关联的所有 CSS

> ID：16118421
> 
> 赞同：1
> 
> 时间：2013-04-20T08:45:22.303
> 
> 标签：javascript, jquery, css

如何获取与元素关联的所有 CSS？[这里](https://stackoverflow.com/a/6416527/698072)有一个可用的解决方案，它基于`window.getComputedStyle`将返回由浏览器（计算后）生成的值的函数，它完全是浏览器特定的。而且它还产生了很长的代码。例如，，

```
#check {
 background: orange;
 padding: 2em;   
} 
```

将在 chrome 中检索以下代码，

```
background-attachment: scroll; background-clip: border-box; background-color: rgb(255, 165, 0); background-image: none; background-origin: padding-box; background-size: auto; border: 0px none rgb(0, 0, 0); border-bottom-left-radius: 0px; border-bottom-right-radius: 0px; border-collapse: separate; border-image-outset: 0px; border-image-repeat: stretch; border-image-slice: 100%; border-image-source: none; border-image-width: 1; border-top-left-radius: 0px; border-top-right-radius: 0px; bottom: auto; box-shadow: none; box-sizing: content-box; caption-side: top; clear: none; clip: auto; color: rgb(0, 0, 0); cursor: auto; direction: ltr; display: block; empty-cells: show; float: none; font-family: 'Times New Roman'; font-size: 16px; font-style: normal; font-variant: normal; font-weight: normal; height: 20px; image-rendering: auto; left: auto; letter-spacing: normal; line-height: normal; list-style: disc outside none; margin: 0px; max-height: none; max-width: none; min-height: 0px; min-width: 0px; opacity: 1; orphans: auto; outline: rgb(0, 0, 0) none 0px; outline-offset: 0px; overflow-wrap: normal; overflow: visible; padding: 32px; page-break-after: auto; page-break-before: auto; page-break-inside: auto; pointer-events: auto; position: static; resize: none; right: auto; speak: normal; table-layout: auto; tab-size: 8; text-align: start; text-decoration: none; text-indent: 0px; text-rendering: optimizelegibility; text-shadow: none; text-overflow: clip; text-transform: none; top: auto; transition: all 0s ease 0s; -webkit-transition: all 0s ease 0s; unicode-bidi: normal; vertical-align: baseline; visibility: visible; white-space: normal; widows: auto; width: 496px; word-break: normal; word-spacing: 0px; word-wrap: normal; z-index: auto; zoom: 1; -webkit-animation: none 0s ease 0s 1 normal none; -webkit-animation-play-state: running; -webkit-appearance: none; -webkit-backface-visibility: visible; -webkit-background-clip: border-box; -webkit-background-composite: source-over; -webkit-background-origin: padding-box; -webkit-background-size: auto; -webkit-border-fit: border; border-spacing: 0px; -webkit-border-image: none; -webkit-box-align: stretch; -webkit-box-decoration-break: slice; -webkit-box-direction: normal; -webkit-box-flex: 0; -webkit-box-flex-group: 1; -webkit-box-lines: single; -webkit-box-ordinal-group: 1; -webkit-box-orient: horizontal; -webkit-box-pack: start; -webkit-box-reflect: none; -webkit-box-shadow: none; -webkit-clip-path: none; -webkit-color-correction: default; -webkit-column-break-after: auto; -webkit-column-break-before: auto; -webkit-column-break-inside: auto; -webkit-column-axis: auto; -webkit-column-count: auto; -webkit-column-gap: normal; -webkit-column-progression: normal; -webkit-column-rule-color: rgb(0, 0, 0); -webkit-column-rule-style: none; -webkit-column-rule-width: 0px; -webkit-column-span: none; -webkit-column-width: auto; -webkit-filter: none; -webkit-align-content: stretch; -webkit-align-items: stretch; -webkit-align-self: stretch; -webkit-flex: 0 1 auto; -webkit-flex-flow: row nowrap; -webkit-justify-content: flex-start; -webkit-font-kerning: auto; -webkit-font-smoothing: auto; -webkit-font-variant-ligatures: normal; -webkit-grid-auto-flow: none; -webkit-highlight: none; -webkit-hyphenate-character: auto; -webkit-hyphenate-limit-after: auto; -webkit-hyphenate-limit-before: auto; -webkit-hyphenate-limit-lines: no-limit; -webkit-hyphens: manual; -webkit-line-align: none; -webkit-line-box-contain: block inline replaced; -webkit-line-break: auto; -webkit-line-grid: none; -webkit-line-snap: none; -webkit-locale: auto; -webkit-margin-before-collapse: collapse; -webkit-margin-after-collapse: collapse; -webkit-marquee-direction: auto; -webkit-marquee-increment: 6px; -webkit-marquee-repetition: infinite; -webkit-marquee-style: scroll; -webkit-mask-box-image: none; -webkit-mask-box-image-outset: 0px; -webkit-mask-box-image-repeat: stretch; -webkit-mask-box-image-slice: 0 fill; -webkit-mask-box-image-source: none; -webkit-mask-box-image-width: auto; -webkit-mask: none 0% 0% / auto repeat border-box border-box; -webkit-mask-composite: source-over; -webkit-mask-size: auto; -webkit-nbsp-mode: normal; -webkit-order: 0; -webkit-perspective: none; -webkit-perspective-origin-x: 280px; -webkit-perspective-origin-y: 42px; -webkit-print-color-adjust: economy; -webkit-rtl-ordering: logical; -webkit-tap-highlight-color: rgba(0, 0, 0, 0.180392); -webkit-text-combine: none; -webkit-text-decorations-in-effect: none; -webkit-text-emphasis-color: rgb(0, 0, 0); -webkit-text-emphasis-position: over; -webkit-text-emphasis-style: none; -webkit-text-fill-color: rgb(0, 0, 0); -webkit-text-orientation: vertical-right; -webkit-text-security: none; -webkit-text-stroke-color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-transform: none; -webkit-transform-origin: 280px 42px; -webkit-transform-style: flat; -webkit-user-drag: auto; -webkit-user-modify: read-only; -webkit-user-select: text; -webkit-writing-mode: horizontal-tb; -webkit-app-region: no-drag; clip-path: none; clip-rule: nonzero; mask: none; filter: none; flood-color: #000000; flood-opacity: 1; lighting-color: #ffffff; stop-color: #000000; stop-opacity: 1; color-interpolation: srgb; color-interpolation-filters: linearrgb; color-rendering: auto; fill: #000000; fill-opacity: 1; fill-rule: nonzero; marker-end: none; marker-mid: none; marker-start: none; mask-type: luminance; shape-rendering: auto; stroke: none; stroke-dasharray: none; stroke-dashoffset: 0px; stroke-linecap: butt; stroke-linejoin: miter; stroke-miterlimit: 4; stroke-opacity: 1; stroke-width: 1px; alignment-baseline: auto; baseline-shift: baseline; dominant-baseline: auto; kerning: 0px; text-anchor: start; writing-mode: lr-tb; glyph-orientation-horizontal: 0deg; glyph-orientation-vertical: auto; -webkit-svg-shadow: none; vector-effect: none; background-position: 0% 0%; background-repeat: repeat repeat; 
```

和Firefox会产生，

```
animation: 0s cubic-bezier(0.25, 0.1, 0.25, 1) 0s normal none 1 none; animation-play-state: running; backface-visibility: visible; background: none repeat scroll 0% 0% rgb(255, 165, 0); border: 0px none rgb(0, 0, 0); border-radius: 0px 0px 0px 0px; border-collapse: separate; border-spacing: 0px; bottom: auto; box-shadow: none; caption-side: top; clear: none; clip: auto; color: rgb(0, 0, 0); content: none; counter-increment: none; counter-reset: none; cursor: auto; direction: ltr; display: block; empty-cells: show; float: none; font: 400 16px/20px serif; height: 20px; ime-mode: auto; left: auto; letter-spacing: normal; list-style: disc outside none; margin: 0px; marker-offset: auto; max-height: none; max-width: none; min-height: 0px; min-width: 0px; opacity: 1; outline: 0px none rgb(0, 0, 0); outline-offset: 0px; overflow: visible; padding: 32px; page-break-after: auto; page-break-before: auto; page-break-inside: auto; perspective: none; perspective-origin: 280px 42px; pointer-events: auto; position: static; quotes: "“" "”" "‘" "’"; resize: none; right: auto; table-layout: auto; text-align: start; -moz-text-blink: none; -moz-text-decoration-color: rgb(0, 0, 0); -moz-text-decoration-line: none; -moz-text-decoration-style: solid; text-indent: 0px; text-overflow: clip; text-shadow: none; text-transform: none; top: auto; transform: none; transform-origin: 280px 42px 0px; transform-style: flat; transition: all 0s cubic-bezier(0.25, 0.1, 0.25, 1) 0s ; unicode-bidi: -moz-isolate; vertical-align: baseline; visibility: visible; white-space: normal; width: 496px; word-break: normal; word-spacing: 0px; word-wrap: normal; z-index: auto; -moz-appearance: none; -moz-background-inline-policy: continuous; -moz-binding: none; -moz-box-align: stretch; -moz-box-direction: normal; -moz-box-flex: 0; -moz-box-ordinal-group: 1; -moz-box-orient: horizontal; -moz-box-pack: start; -moz-box-sizing: content-box; -moz-columns: auto auto; -moz-column-gap: 16px; -moz-column-rule: 0px none rgb(0, 0, 0); -moz-float-edge: content-box; -moz-force-broken-image-icon: 0; -moz-hyphens: manual; -moz-image-region: auto; -moz-orient: horizontal; -moz-outline-radius: 0px 0px 0px 0px; -moz-stack-sizing: stretch-to-fit; -moz-tab-size: 8; -moz-text-align-last: auto; -moz-text-size-adjust: auto; -moz-user-focus: none; -moz-user-input: auto; -moz-user-modify: read-only; -moz-user-select: auto; -moz-window-shadow: default; clip-path: none; clip-rule: nonzero; color-interpolation: srgb; color-interpolation-filters: linearrgb; dominant-baseline: auto; fill: rgb(0, 0, 0); fill-opacity: 1; fill-rule: nonzero; filter: none; flood-color: rgb(0, 0, 0); flood-opacity: 1; image-rendering: auto; lighting-color: rgb(255, 255, 255); marker: none; mask: none; shape-rendering: auto; stop-color: rgb(0, 0, 0); stop-opacity: 1; stroke: none; stroke-dasharray: none; stroke-dashoffset: 0px; stroke-linecap: butt; stroke-linejoin: miter; stroke-miterlimit: 4; stroke-opacity: 1; stroke-width: 1px; text-anchor: start; text-rendering: optimizelegibility; vector-effect: none; 
```

那么如何获得**`Evernote`**可以为任何浏览器重现的正确 CSS 代码呢？或者有什么方法可以从生成的 CSS 中生成正确的 CSS？对此的任何帮助都会非常有用..提前谢谢..

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-20T09:13:08.913

我通过一些 hack 实现了这一点。您仍然会获得许多无用的属性，但它肯定会减少属性的数量。

```
var oCheck = document.getElementById("Check"); 
```

比较这个对象

```
window.getComputedStyle(oCheck) 
```

有了这个

```
window.getComputedStyle(document.createElement(oCheck.tagName)); 
```

并且只考虑不匹配的属性。

# yii - 使用 Yii 权限的好处？

> ID：16118427
> 
> 赞同：0
> 
> 时间：2013-04-20T08:45:59.053
> 
> 标签：yii, yii-extensions

除了创建 RbAC 文件，Yii Rights 模块还有什么优势？Yii RbAC 不支持的 Yii 权限模块有哪些？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T16:30:05.263

你可以在这里找到所有这些问题的答案：[http ://www.yiiframework.com/extension/rights/](http://www.yiiframework.com/extension/rights/)

基本上，你可以用 Rights 做的所有事情，你都可以用 RbAC 做，但是 Rights 让这一切变得更容易管理。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-20T19:53:55.470

*   允许在后端管理访问：动态创建角色并将其附加到用户。
*   角色访问与代码的绑定较弱，因为它基于您可以授予用户的面向模块控制器操作的权限。这一切都可以通过后端接口即时管理。
*   具有面向任务（而非角色）的访问权限 - 当您可以创建自定义任务（例如文本编辑）并将您的逻辑基于任务权限而不是角色时

# python - 通过 python 脚本从维基百科下载图像时出错

> ID：16118430
> 
> 赞同：0
> 
> 时间：2013-04-20T08:46:44.673
> 
> 标签：python, web-crawler, beautifulsoup

我正在尝试下载特定维基百科页面的所有图像。这是代码片段

```
from bs4 import BeautifulSoup as bs
import urllib2
import urlparse
from urllib import urlretrieve

site="http://en.wikipedia.org/wiki/Pune"
hdr= {'User-Agent': 'Mozilla/5.0'}
outpath=""
req = urllib2.Request(site,headers=hdr)
page = urllib2.urlopen(req)
soup =bs(page)
tag_image=soup.findAll("img")
for image in tag_image:
        print "Image: %(src)s" % image
        urlretrieve(image["src"], "/home/mayank/Desktop/test") 
```

运行程序后，我看到以下堆栈错误

```
Image: //upload.wikimedia.org/wikipedia/commons/thumb/0/04/Pune_Montage.JPG/250px-Pune_Montage.JPG
Traceback (most recent call last):
  File "download_images.py", line 15, in <module>
    urlretrieve(image["src"], "/home/mayank/Desktop/test")
  File "/usr/lib/python2.7/urllib.py", line 93, in urlretrieve
    return _urlopener.retrieve(url, filename, reporthook, data)
  File "/usr/lib/python2.7/urllib.py", line 239, in retrieve
    fp = self.open(url, data)
  File "/usr/lib/python2.7/urllib.py", line 207, in open
    return getattr(self, name)(url)
  File "/usr/lib/python2.7/urllib.py", line 460, in open_file
    return self.open_ftp(url)
  File "/usr/lib/python2.7/urllib.py", line 543, in open_ftp
    ftpwrapper(user, passwd, host, port, dirs)
  File "/usr/lib/python2.7/urllib.py", line 864, in __init__
    self.init()
  File "/usr/lib/python2.7/urllib.py", line 870, in init
    self.ftp.connect(self.host, self.port, self.timeout)
  File "/usr/lib/python2.7/ftplib.py", line 132, in connect
    self.sock = socket.create_connection((self.host, self.port), self.timeout)
  File "/usr/lib/python2.7/socket.py", line 571, in create_connection
    raise err
IOError: [Errno ftp error] [Errno 111] Connection refused 
```

请帮助解决导致此错误的原因？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T08:54:57.333

`//`是当前协议的简写。似乎 Wikipedia 正在使用速记，因此您必须明确指定 HTTP 而不是 FTP（Python 出于某种原因假设）：

```
for image in tag_image:
    src = 'http:' + image 
```

# ruby-on-rails - 在模型方法中定义变量

> ID：16118431
> 
> 赞同：1
> 
> 时间：2013-04-20T08:46:46.287
> 
> 标签：ruby-on-rails

我`keywords`从具有不同关键字的 html 表单中获取数组。我需要将它们放入具有这样值的字符串中`keyword1,keyword2,keyword3`。

问题在于`keywords_line`字符串。我看到它在 .each 周期内具有价值，但它并没有脱离它。如何设置`keywords_line`才能正常工作？

```
 # models/item.rb
  before_save :create_slug_and_keywords

  def create_slug_and_keywords

    if defined? self.keywords
      self.keywords.each do |k|
        if defined? keywords_line
          keywords_line = keywords_line + ',' + k
        else 
          keywords_line = k
        end 
      end

      if defined? keywords_line # keywords_line is not defined here
        keywords = keywords_line
      else 
        keywords = nil
      end
    end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T09:38:23.737

如果关键字是一个数组，那么 self.keywords.join(',')

以及文档的链接。

[http://ruby-doc.org/core-1.8.7/Array.html#method-i-join](http://ruby-doc.org/core-1.8.7/Array.html#method-i-join)

# java - 我可以错过 catch 子句向其调用者抛出异常吗？

> ID：16118432
> 
> 赞同：0
> 
> 时间：2013-04-20T08:46:47.053
> 
> 标签：java, exception, finally

这段代码可能会出现什么样的问题？我认为即使发生异常，这段代码也可以将异常抛出给它的调用者。所以它不会产生任何麻烦。

我该如何改进它？

```
public static void cat(File named) {
  RandomAccessFile input = null;
  String line = null;
  try {
    input = new RandomAccessFile(named, “r”);
    while ((line = input.readLine()) != null {
      System.out.println(line);
    }
    return;
  } finally {
    if (input != null) {
      input.close();
    }
  }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-20T08:54:06.317

代码必须抛出 IOException - 尝试使用 eclipse 编辑代码，您还会收到抛出异常的建议。

[Java 1.7 还具有“ try-with-resources](http://docs.oracle.com/javase/tutorial/essential/exceptions/tryResourceClose.html) ”的新概念——请参见下面的 try 语句。中使用的资源`try (...)`会自动关闭。

```
public static void cat(File named) throws IOException
{
    try (RandomAccessFile input = new RandomAccessFile(named, "r"))
    {
        String line = null;
        while ((line = input.readLine()) != null)
        {
            System.out.println(line);
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-20T08:55:04.020

> 这段代码可能会出现什么样的问题？

*   [公共 RandomAccessFile](http://docs.oracle.com/javase/6/docs/api/java/io/RandomAccessFile.html#RandomAccessFile%28java.io.File,%20java.lang.String%29) **`throws FileNotFoundException`**。
*   [公共最终字符串 readLine()](http://docs.oracle.com/javase/6/docs/api/java/io/RandomAccessFile.html#readLine%28%29) **`throws IOException`**。
*   [公共无效关闭（）](http://docs.oracle.com/javase/6/docs/api/java/io/RandomAccessFile.html#close%28%29) **`throws IOException`**。

自从**`public class FileNotFoundException extends IOException`**

您可以将方法更改为：

```
public static void cat(File named) throws IOException 
```

现在你不需要*try-catch*块了。

调用者应该捕获该`exception`方法抛出的内容。

但是你为什么不想要`catch`例外呢？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-20T08:56:41.803

在你的方法中添加 throws 声明，然后这个方法的调用者应该有这个异常的 try catch 块。

```
public static void cat(File named) throws IOException {
      RandomAccessFile input = null;
      String line = null;
      try {
        input = new RandomAccessFile(named, "r");
        while ((line = input.readLine()) != null ){
          System.out.println(line);
        }
        return;
      } finally {
        if (input != null) {
          input.close();
        }
      }
    }
  //caller 
   try{
     Class.cat(new File("abc.txt"));
    }catch(IOException e)
    {
      //
    } 
```

# django - Django - 在管理员中分配 m2m 关系

> ID：16118433
> 
> 赞同：0
> 
> 时间：2013-04-20T08:46:52.693
> 
> 标签：django, django-models, m2m

在我正在构建的应用程序中，一些用户具有“编码器”角色并被分配到“分配”。
我似乎无法开始工作的是管理员将编码员分配给作业的过程。

这是我到目前为止的模型代码（可能完全错误）：

```
class Coder(models.Model):
"""Every user can be a coder. Coders are assigned to Assignments"""
user = models.OneToOneField(User)

class Admin:
    list_display = ('',)
    search_fields = ('',)

def __unicode__(self):
    return u"Coders"

class Assignment(models.Model):
"""(Assignment description)"""
title = models.CharField(blank=True, max_length=100)
start_year = models.IntegerField(blank=True, null=True)
end_year = models.IntegerField(blank=True, null=True)
country = models.IntegerField(blank=True, null=True)
coders = models.ManyToManyField(Coder)

class Admin:
    list_display = ('',)
    search_fields = ('',)

def __unicode__(self):
    return u"Assignment" 
```

这是管理代码：

```
class AssignmentCoderInline(admin.StackedInline):
model = Assignment.coders.through
can_delete = False
verbose_name_plural = 'coder'

class AssignmentAdmin(admin.ModelAdmin):
fieldsets = [
    ('Assignment', {'fields': ['title', 'start_year', 'end_year']})
]
inlines = (AssignmentCoderInline,)

class CoderInline(admin.StackedInline):
model = Coder
can_delete = False
verbose_name_plural = 'coder' 
```

现在，当我在管理员中时，我想创建一个作业并向其中添加编码器。然而，当我尝试这样做时，我看到的只是：
![这是我在管理员中看到的](https://i.stack.imgur.com/Omhuu.png)

如何将一名编码员/用户添加到作业中，以便稍后在视图中向他展示他拥有的所有作业？这可能是一个非常愚蠢的问题，但无论如何请回答，我非常感谢任何帮助:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T08:56:29.497

如果我没记错的话，看起来你想调用一个编码器到一个视图，然后显示一个用户的所有分配。

首先，我可能会首先为编码器和分配模型之间的关系分配一个[related_name ，以便您以后可以轻松地引用它们。](https://docs.djangoproject.com/en/dev/ref/models/fields/#django.db.models.ForeignKey.related_name)

```
class Assignment(models.Model):
    coders = models.ManyToManyField(Coder, related_name='assignments')

class Coder(models.Model):
    user = models.OneToOneField(User, related_name="coder") 
```

然后我会使用[一对一的关系](https://docs.djangoproject.com/en/dev/topics/db/examples/one_to_one/)在模板中引用用户：

```
 {% for assignment in user.coder.assignments.all %} 
```

此外，看起来问题在于您如何设置模型。在查看了`django.db.models.base`“models.Model”类和“ModelBase”类之后，看起来没有“Admin”子类。您可能希望从一开始就删除它们。

接下来，该`__unicode__`字段显示代表屏幕上对象的默认可见值。在这种情况下，您已将其强制为“编码器”。如果您有 5 位编码员参与一项作业，您会看到“编码员、编码员、编码员、编码员、编码员”而不是“admin、user1、bob22、harry8、stadm1in”等。让我们覆盖**unicode**以显示更有意义的内容。由于 coders 字段只有 user 字段，让我们引用它`self.user.username`。我们也将`Assignment()`'s 的**unicode**更改`self.title`为。

ModelForm 也没有“Admin”子类，所以让我们删除它。

```
MODELS:

class Coder(models.Model):
    """Every user can be a coder. Coders are assigned to Assignments"""
    user = models.OneToOneField(User, related_name='coder')

    def __unicode__(self):
        return self.user.username

class Assignment(models.Model):
    """(Assignment description)"""
    title = models.CharField(blank=True, max_length=100)
    start_year = models.IntegerField(blank=True, null=True)
    end_year = models.IntegerField(blank=True, null=True)
    country = models.IntegerField(blank=True, null=True)
    coders = models.ManyToManyField(Coder, related_name='assignments')

    def __unicode__(self):
        return self.title

ADMIN:

class AssignmentCoderInline(admin.StackedInline):
    model = Assignment.coders.through
    can_delete = False
 #   verbose_name_plural = 'coder'

class AssignmentAdmin(admin.ModelAdmin):
    fieldsets = [
        ('Assignment', {'fields': ['title', 'start_year', 'end_year']})
    ]
    inlines = (AssignmentCoderInline,) 
```

# java - 休眠错误：org.hibernate.InvalidMappingException：无法从资源中解析映射文档

> ID：16118440
> 
> 赞同：4
> 
> 时间：2013-04-20T08:48:25.680
> 
> 标签：java, hibernate

当我运行该项目时，它会发生如下异常。在我在 Hibernate 中添加视图表之前，一切都很好，包括 Blame.hbm.xml 和其他。它可以从数据库中读取数据。ShowOrderDaoImpl.java中这句话出现异常：`session=HibernateSessionFactory.getSession();`

我的例外

```
 org.hibernate.InvalidMappingException: Could not parse mapping document from resource pojo/Blame.hbm.xml
    at org.hibernate.cfg.Configuration$MetadataSourceQueue.processHbmXml(Configuration.java:3415)
    at org.hibernate.cfg.Configuration$MetadataSourceQueue.processHbmXmlQueue(Configuration.java:3404)
    at org.hibernate.cfg.Configuration$MetadataSourceQueue.processMetadata(Configuration.java:3392)
    at org.hibernate.cfg.Configuration.secondPassCompile(Configuration.java:1341)
    at org.hibernate.cfg.Configuration.buildSessionFactory(Configuration.java:1737)
    at session.factory.HibernateSessionFactory.rebuildSessionFactory(HibernateSessionFactory.java:75)
    at session.factory.HibernateSessionFactory.getSession(HibernateSessionFactory.java:57)
    at dao.impl.ShowOrderDaoImpl.queryTradesByBid(ShowOrderDaoImpl.java:24)
    at test.testHibernate.main(testHibernate.java:45)
Caused by: org.hibernate.DuplicateMappingException: Duplicate class/entity mapping pojo.Blame
ok
    at org.hibernate.cfg.Configuration$MappingsImpl.addClass(Configuration.java:2580)
    at org.hibernate.cfg.HbmBinder.bindRoot(HbmBinder.java:174)
    at org.hibernate.cfg.Configuration$MetadataSourceQueue.processHbmXml(Configuration.java:3412)
    ... 8 more
java.lang.NullPointerException
    at dao.impl.ShowOrderDaoImpl.queryTradesByBid(ShowOrderDaoImpl.java:25)
    at test.testHibernate.main(testHibernate.java:45) 
```

我的 hibernate.cfg.xml 文件

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE hibernate-configuration PUBLIC "-//Hibernate/Hibernate Configuration DTD 3.0//EN"
                                         "http://hibernate.sourceforge.net/hibernate-configuration-3.0.dtd">
<hibernate-configuration>
 <session-factory>
  <property name="hibernate.connection.driver_class">com.mysql.jdbc.Driver</property>
  <property name="hibernate.connection.password">root</property>
  <property name="hibernate.connection.url">jdbc:mysql://localhost:3306/disputesystem</property>
  <property name="hibernate.connection.username">root</property>
  <property name="hibernate.dialect">org.hibernate.dialect.MySQLDialect</property>
  <property name="hibernate.show_sql">true</property>
  <mapping resource="pojo/Blame.hbm.xml"/>
  <mapping resource="pojo/Buyer.hbm.xml"/>
  <mapping resource="pojo/Dispute.hbm.xml"/>
  <mapping resource="pojo/Evidence.hbm.xml"/>
  <mapping resource="pojo/Goods.hbm.xml"/>
  <mapping resource="pojo/Message.hbm.xml"/>
  <mapping resource="pojo/Record.hbm.xml"/>
  <mapping resource="pojo/Seller.hbm.xml"/>
  <mapping resource="pojo/Staff.hbm.xml"/>
  <mapping resource="pojo/Trade.hbm.xml"/>
  <mapping resource="pojo/Fund.hbm.xml"/>
  <mapping resource="pojo/Showorderbybid.hbm.xml"/>
 </session-factory>
</hibernate-configuration> 
```

我的 ShowOrderDaoImpl.java 文件

```
package dao.impl;

import java.util.ArrayList;
import java.util.Date;
import java.util.Iterator;
import java.util.List;

import org.hibernate.Query;
import org.hibernate.Session;
import org.hibernate.Transaction;

import pojo.Showorderbybid;
import session.factory.HibernateSessionFactory;
import dao.intf.ShowOrderDao;

public class ShowOrderDaoImpl implements ShowOrderDao{

    @Override
    public List<Showorderbybid> queryTradesByBid(String bid) throws Exception {
        Session session=null;
        Transaction transaction=null;
        List<Showorderbybid> orders=new ArrayList<Showorderbybid>();
        try {
            session=HibernateSessionFactory.getSession();
            transaction=session.beginTransaction();
            Query query=session.createQuery("from Showorderbybid where bid=?");
            query.setParameter(0, bid);
            orders=(List<Showorderbybid>)query.list();
            List CountView = new ArrayList(); 
            Iterator it = orders.iterator(); 
            while (it.hasNext()) {
                Object[] all = (Object[]) it.next(); 
                Showorderbybid countViewId = new Showorderbybid(); 
                countViewId.setAmount((Integer) all[0]); 
                countViewId.setBid((String) all[1]); 
                countViewId.setDetail((String) all[2]); 
                countViewId.setGid((String)all[3]); 
                countViewId.setGname((String)all[4]);
                countViewId.setLogistics((String)all[5]);
                countViewId.setSid((String)all[6]);
                countViewId.setSname((String)all[7]);
                countViewId.setStatus((String)all[8]);
                countViewId.setTid((String)all[9]);
                countViewId.setTotalmoney((Integer) all[10]);
                countViewId.setTradetime((Date)all[11]);
                orders.add(countViewId);  
            } 

        } catch (Exception e) {
            e.printStackTrace(); 
        }finally{
            HibernateSessionFactory.closeSession();
        }
        return orders;
    }

} 
```

我的 Blame.hbm.xml 文件

```
 <?xml version="1.0"?>
<!DOCTYPE hibernate-mapping PUBLIC "-//Hibernate/Hibernate Mapping DTD 3.0//EN"
"http://hibernate.sourceforge.net/hibernate-mapping-3.0.dtd">
<!-- Generated 2013-4-19 23:02:05 by Hibernate Tools 3.4.0.CR1 -->
<hibernate-mapping>
    <class name="pojo.Blame" table="blame" catalog="disputesystem">
        <id name="id" type="java.lang.Integer">
            <column name="id" />
            <generator class="identity" />
        </id>
        <many-to-one name="dispute" class="pojo.Dispute" fetch="select">
            <column name="disputeid" length="20" not-null="true" />
        </many-to-one>
        <property name="blametime" type="timestamp">
            <column name="blametime" length="19" not-null="true" />
        </property>
        <property name="content" type="string">
            <column name="content" length="1000" />
        </property>
    </class>
</hibernate-mapping> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-20T09:09:02.840

看起来还有另一个映射`pojo.Blame`。你可能犯了一个`copy/paste`错误：

```
<class name="pojo.Blame" 
```

在另一个`hbm`文件中。

这个

```
Caused by: org.hibernate.DuplicateMappingException: Duplicate class/entity mapping pojo.Blame 
```

声明当到达一个`hbm`文件时，它已经有一个名为`pojo.Blame`.

在某些文件中看起来像：

```
<mapping resource="pojo/Blame.hbm.xml"/>
<mapping resource="pojo/Buyer.hbm.xml"/>
<mapping resource="pojo/Dispute.hbm.xml"/>
<mapping resource="pojo/Evidence.hbm.xml"/>
<mapping resource="pojo/Goods.hbm.xml"/>
<mapping resource="pojo/Message.hbm.xml"/>
<mapping resource="pojo/Record.hbm.xml"/>
<mapping resource="pojo/Seller.hbm.xml"/>
<mapping resource="pojo/Staff.hbm.xml"/>
<mapping resource="pojo/Trade.hbm.xml"/>
<mapping resource="pojo/Fund.hbm.xml"/>
<mapping resource="pojo/Showorderbybid.hbm.xml"/> 
```

是错位`<class name="pojo.Blame"`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-02-08T19:26:27.997

确保你已经覆盖了 Pojo 中的 equals/tostring 和 hash 方法

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-04-20T09:04:47.443

检查为什么 session=HibernateSessionFactory.getSession(); 正在为空。这就是空指针的原因

# unix - 想要使用 unix sort 命令对日期格式为 ddMONYYYY 的大型 csv 文件进行排序

> ID：16118443
> 
> 赞同：0
> 
> 时间：2013-04-20T08:48:50.420
> 
> 标签：unix, sorting, csv

```
aman@gmail.com,"08OCT2012"
abc@gmail.com,"11JUL2012"
def@gmail.com,"16DEC2010"
abc@gmail.com,"16MAR2011"
aman@gmail.com,"21APR2011"
abc@apple.com,"12DEC2010"
xyz@fb.com,"06MAR2011" 
```

想要使用 unix 排序命令对 csv 进行排序，首先按电子邮件地址，然后按日期

我尝试过类似的东西

```
sort -k1 -k212 -k23M -k26 file.csv 
```

但它没有成功。有人知道如何对这个csv进行排序吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-20T09:00:09.000

您可能需要`sort -t,`指出分隔符是逗号`,`。

然后，这样的事情应该可以工作：

```
sort -t, -k1 -k2 file.csv 
```

无论如何，要按日期排序，您应该首先在您的日期字段中进行一些 -> 到 UNIX 戳记转换。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-20T09:01:40.373

你不能。始终在表格数据中使用 ISO8601，因为它是唯一可以按词法排序（大端）的真正格式。

# java - zk 控制器中的有线变量为空

> ID：16118444
> 
> 赞同：0
> 
> 时间：2013-04-20T08:48:53.050
> 
> 标签：java, model-view-controller, controller, null, zk

我正在使用 java 中的 zk 框架进行开发（使用 eclipse ）。
我正在尝试通过
有线变量将一些文本框（视图）链接到控制器。
问题是在控制器中，当调用提交事件时，连线变量为空。
索引：[Index.zul](http://pastebin.com/caDZq2pV)
登录：[Login.java](http://pastebin.com/aujTjhHy)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T18:43:47.360

在你的**doAfterCompose**方法中添加这一行，或者你可以像这样使用**doAfterCompose**方法

```
 @AfterCompose
public void afterCompose(@ContextParam(ContextType.VIEW) Component view){
Selectors.wireComponents(view, this, false);
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-20T09:43:21.213

不要在`@Wire`参数中使用 CSS 选择器，只需使用 ZK 组件 id。也就是说，离开`#`.

此外，如果 Java 变量名称与 ZK 组件 ID 相同（例如“win”），您可以将`@Wire`参数全部省略，它仍然可以正常工作。

编辑：
您的代码中还有另一个问题。`Textbox`您正在导入的来自 POI 包 = X

# prestashop - prestashop 如何改变一些变量？

> ID：16118446
> 
> 赞同：0
> 
> 时间：2013-04-20T08:48:59.213
> 
> 标签：prestashop

我昨天下载了 prestashop，现在我想做一些更改。页脚.tpl

```
<div id="right_column" class="column grid_2 omega">
    {$HOOK_RIGHT_COLUMN}
</div> 
```

有可能改变`$HOOK_RIGHT_COLUMN`吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2020-12-19T18:30:35.677

例如，您可以签入 v1.6.1.24，FrontController.php 第 582 行

```
'HOOK_RIGHT_COLUMN' => ($this->display_column_right ? Hook::exec('displayRightColumn', array('cart' => $this->context->cart)) : ''), 
```

因此，如果您需要更多列，您可以多做一个（或更多），在表格挂钩中创建相应的挂钩，并创建挂钩到此自定义挂钩的模块。

# coldfusion - 带 sftp 的 RAILO

> ID：16118448
> 
> 赞同：1
> 
> 时间：2013-04-20T08:49:20.033
> 
> 标签：coldfusion, sftp, railo

RAILO 支持 sftp 映射，我们可以使用 cffile 标签进行各种操作，更多信息在 [https://github.com/getrailo/railo/wiki/Railo-Resources#mappings](https://github.com/getrailo/railo/wiki/Railo-Resources#mappings)

我可以创建映射

```
this.mappings["/ftpdir"] = "ftp://username:password@server.com/dir"; 
```

并且在复制/移动等方面对我来说工作得很好。唯一的问题是，如果我想使用 SFTP 而不是 FTP，映射中应该有什么变化。

**更新** 我注意到 SFTP 中使用的是端口 22，所以我尝试在 ftp 路径中提供如下

```
this.mappings["/ftpdir"] = "ftp://username:password@server.com:22/dir"; 
```

但不起作用。RAILO 试图在我的本地计算机而不是 FTP 服务器中搜索目录。

谢谢，普利特什

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T05:42:51.123

如果要使用 sftp 而不是 ftp，请将 URL 中的协议更改为 sftp://。

我认为您不需要明确指定端口 22。SSH/SFTP 是默认设置。

# python - 如何让 Sublime 2 与 Python 2.7 一起工作

> ID：16118452
> 
> 赞同：1
> 
> 时间：2013-04-20T08:49:59.100
> 
> 标签：python, ide, sublimetext2

对不起，伙计们，我不完全了解如何让 sublime 在我的机器上与 python 交互。谁能帮忙。

我做 ctrl-B 时得到的错误如下：

> [错误2] 系统找不到指定的文件[cmd: [u'python', u'-u', u'C:\Users\User\AppData\Roaming\Sublime Text 2\Packages\User\Default (Windows ).sublime-keymap']] [目录：C:\Users\User\AppData\Roaming\Sublime Text 2\Packages\User] [路径：C:\Program Files\Common Files\Microsoft Shared\Windows Live;C: \Program Files (x86)\Common Files\Microsoft Shared\Windows Live;C:\Windows\system32;C:\Windows;C:\Windows\System32\Wbem;C:\Windows\System32\WindowsPowerShell\v1.0\ ;C:\Program Files\Intel\WiFi\bin\;C:\Program Files\Common Files\Intel\WirelessCommon\;C:\Program Files (x86)\Windows Live\Shared;c:\Program Files (x86) \Common Files\Roxio Shared\DLLShared\;c:\Program Files (x86)\Common Files\Roxio Shared\10.0\DLLShared\;c:\Program Files\WIDCOMM\Bluetooth Software\;c:\Program Files\WIDCOMM\Bluetooth Software\syswow64;C:\Program Files\Samsung\AllShare Framework DMS\1.3.06\;C:\Program Files\Samsung\AllShare Framework DMS\1.3.06\64bit\;C:\ Program Files\Intel\WiFi\bin\;C:\Program Files\Common Files\Intel\WirelessCommon] [已完成]

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-20T10:33:17.883

我认为您应该在环境变量中添加`C:\Python27`变量`PATH`，否则`cmd`将`sublimetext`无法识别python命令。

相关视频：[将 Python 添加到 DOS 路径](http://showmedo.com/videotutorials/video?name=960000&fromSeriesID=96)

请注意，`sublimetext2`不支持来自 的输入`STDIN`，因此可能必须切换到不同的 IDE。

# php - 如何检查文件完整性

> ID：16118463
> 
> 赞同：1
> 
> 时间：2013-04-20T08:51:51.363
> 
> 标签：php, android, hash, integrity

我正在开发一个需要每隔几分钟下载一些文件的应用程序。

使用 php，我列出了所有文件，并从 java 获取此列表并检查文件是否存在。下载后，我需要检查完整性，因为有时在下载后，某些文件已损坏。

```
try{
    String path = ...
    URL url = new URL(path);
    URLConnection conn = url.openConnection();
    conn.setDoOutput(true);         
    conn.setReadTimeout(30000);
    is = conn.getInputStream();
    ReadableByteChannel rbc = Channels.newChannel(is);
    FileOutputStream fos = null;
    fos = new FileOutputStream(local);
    fos.getChannel().transferFrom(rbc, 0, 1 << 24);
    fos.close();
    rbc.close();
} catch (FileNotFoundException e) {
    if(new File(local).exists()) new File(local).delete();
       return false;
} catch (IOException e) {
    if(new File(local).exists()) new File(local).delete();
       return false;
} catch (IOException e) {
    if(new File(local).exists()) new File(local).delete();
       return false;
}

return false; 
```

我可以在 php 和 java 中使用什么来检查文件完整性？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-20T08:52:50.577

[在您的服务器上](http://www.tuxradar.com/practicalphp/8/15/0)维护一个校验和列表，下载文件，[生成下载文件的校验和](https://stackoverflow.com/q/304268/1069068)并检查它是否与服务器上的相同。如果是的话，你的文件没问题。

# java - 如何在 Java 中读取一个大的二进制文件

> ID：16118468
> 
> 赞同：1
> 
> 时间：2013-04-20T08:53:00.497
> 
> 标签：java, file, memory, binary

我想用 Java 读取一个包含 m 个数据集的二进制文件。我知道每个数据集由 3 个元素组成：一个长数字、一个双精度数字和一个长数字序列。数据集一个接一个地重复，直到文件结束。假设数据集的数量 m 是已知的，如何在不将所有数据集传递到主存的情况下用 Java 读取文件，以便也能够读取不“适合”在主存中的大文件？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-20T09:10:07.300

如果要顺序访问：

```
import java.io.FileInputStream;
import java.io.DataInputStream;

DataInputStream dis = new DataInputStream(new FileInputStream("input.bin"))
for(int i = 0; i < m; i++){
    long l1 = dis.readLong();
    double d1 = dis.readDouble();
    long l2 = dis.readLong();
    /* do what you need */
}
dis.close(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-09T08:49:19.033

我使用了 java.nio [http://download.oracle.com/javase/7/docs/api/java/nio/package-summary.html](http://download.oracle.com/javase/7/docs/api/java/nio/package-summary.html)，它提供了缓冲，因为我还需要一些额外的功能，比如设置字节顺序。除了 johnchen902 的解决方案之外，您还可以从流中读取缓冲区中的字节数并将它们放入缓冲区中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-20T09:10:37.640

如果文件中的“记录”具有固定大小，则可以使用`RandomAccessFile`，尤其是`seek`移动到要读取的位置的方法。API 还提供了读取 long 和 double 的方法。

> 我的指令是：“数据集不应该全部读入主存储器”。我该如何解决这个问题？

用于`seek`定位文件，只读取需要读取的数据集。

# eclipse - 无法使用 Eclipse 在 WebLogic 10.3.3 上运行 spring struts maven 项目

> ID：16118471
> 
> 赞同：1
> 
> 时间：2013-04-20T08:53:18.750
> 
> 标签：eclipse, maven, struts2, eclipse-plugin, weblogic

如果我构建这个项目来进行战争并将其部署在 WebLogic 上，它运行良好，但如果我使用 Eclipse 在服务器上运行，我会收到此错误：

```
Caused By: Bean type class com.opensymphony.xwork2.ObjectFactory 
with the name xwork has already been loaded by bean - 
zip:D:/Documents%20and%20Settings/admini/.m2/repository/org/apache/struts/struts2-core/2.3.12/struts2-core-2.3.12.jar!/struts-default.xml:29:72 - bean - 
zip:H:/runtime/weblogic1033/user_projects/domains/crmFrameworkDomain/servers/AdminServer/tmp/_WL_user/_auto_generated_ear_/nefp93/war/WEB-INF/lib/struts2-core-2.3.12.jar!/struts-default.xml:29:72 
```

堆栈跟踪

```
<2013/4/20 下午06時59分34秒 CST> <Error> <HTTP> <BEA-101165> <Could not load user defined filter in web.xml: org.apache.struts2.dispatcher.ng.filter.StrutsPrepareAndExecuteFilter.
Unable to load configuration. - bean - zip:H:/runtime/weblogic1033/user_projects/domains/crmFrameworkDomain/servers/AdminServer/tmp/_WL_user/_auto_generated_ear_/nefp93/war/WEB-INF/lib/struts2-core-2.3.12.jar!/struts-default.xml:29:72
    at org.apache.struts2.dispatcher.Dispatcher.init(Dispatcher.java:485)
    at org.apache.struts2.dispatcher.ng.InitOperations.initDispatcher(InitOperations.java:74)
    at org.apache.struts2.dispatcher.ng.filter.StrutsPrepareAndExecuteFilter.init(StrutsPrepareAndExecuteFilter.java:51)
    at weblogic.servlet.internal.FilterManager$FilterInitAction.run(FilterManager.java:332)
    at weblogic.security.acl.internal.AuthenticatedSubject.doAs(AuthenticatedSubject.java:321)
    Truncated. see log file for complete stacktrace

Caused By: Unable to load configuration. - bean - zip:H:/runtime/weblogic1033/user_projects/domains/crmFrameworkDomain/servers/AdminServer/tmp/_WL_user/_auto_generated_ear_/nefp93/war/WEB-INF/lib/struts2-core-2.3.12.jar!/struts-default.xml:29:72
    at com.opensymphony.xwork2.config.ConfigurationManager.getConfiguration(ConfigurationManager.java:70)
    at org.apache.struts2.dispatcher.Dispatcher.init_PreloadConfiguration(Dispatcher.java:429)
    at org.apache.struts2.dispatcher.Dispatcher.init(Dispatcher.java:473)
    at org.apache.struts2.dispatcher.ng.InitOperations.initDispatcher(InitOperations.java:74)
    at org.apache.struts2.dispatcher.ng.filter.StrutsPrepareAndExecuteFilter.init(StrutsPrepareAndExecuteFilter.java:51)
    Truncated. see log file for complete stacktrace

Caused By: Unable to load bean: type: class:com.opensymphony.xwork2.ObjectFactory - bean - zip:H:/runtime/weblogic1033/user_projects/domains/crmFrameworkDomain/servers/AdminServer/tmp/_WL_user/_auto_generated_ear_/nefp93/war/WEB-INF/lib/struts2-core-2.3.12.jar!/struts-default.xml:29:72
    at com.opensymphony.xwork2.config.providers.XmlConfigurationProvider.register(XmlConfigurationProvider.java:245)
    at org.apache.struts2.config.StrutsXmlConfigurationProvider.register(StrutsXmlConfigurationProvider.java:102)
    at com.opensymphony.xwork2.config.impl.DefaultConfiguration.reloadContainer(DefaultConfiguration.java:226)
    at com.opensymphony.xwork2.config.ConfigurationManager.getConfiguration(ConfigurationManager.java:67)
    at org.apache.struts2.dispatcher.Dispatcher.init_PreloadConfiguration(Dispatcher.java:429)
    Truncated. see log file for complete stacktrace

Caused By: Bean type class com.opensymphony.xwork2.ObjectFactory with the name xwork has already been loaded by bean - zip:D:/Documents%20and%20Settings/admini/.m2/repository/org/apache/struts/struts2-core/2.3.12/struts2-core-2.3.12.jar!/struts-default.xml:29:72 - bean - zip:H:/runtime/weblogic1033/user_projects/domains/crmFrameworkDomain/servers/AdminServer/tmp/_WL_user/_auto_generated_ear_/nefp93/war/WEB-INF/lib/struts2-core-2.3.12.jar!/struts-default.xml:29:72
    at com.opensymphony.xwork2.config.providers.XmlConfigurationProvider.register(XmlConfigurationProvider.java:229)
    at org.apache.struts2.config.StrutsXmlConfigurationProvider.register(StrutsXmlConfigurationProvider.java:102)
    at com.opensymphony.xwork2.config.impl.DefaultConfiguration.reloadContainer(DefaultConfiguration.java:226)
    at com.opensymphony.xwork2.config.ConfigurationManager.getConfiguration(ConfigurationManager.java:67)
    at org.apache.struts2.dispatcher.Dispatcher.init_PreloadConfiguration(Dispatcher.java:429)
    Truncated. see log file for complete stacktrace 
```

不知道为什么_auto_generated_ear 里面多了一个struts2-core.2.3.12.jar

我应该更改插件的任何配置吗？

weblogic 10.3.3
jdk 1.6
eclipse juno
maven 3.0.5

这是我的 Eclipse 项目存档： [Loki.zip](https://dl.dropboxusercontent.com/u/16041054/Loki.zip)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-10T11:27:14.767

我也面临同样的问题。在我的情况下，struts.xml 中配置的一个或多个动作类未在包中定义。一旦我定义了缺少的类，它就可以正常工作。请确保在 struts.xml 中配置的所有动作类都定义在正确的位置。

struts.xml

```
 <action name="welcome" class="com.vk.translate.action.DummyAction">
            <result name="success">/login.jsp</result>
        </action> 
```

上面的代码中没有定义 DummyAction。一旦我定义它就起作用了。

# java - 如何从 Java 移动应用程序上传更大的文件？

> ID：16118473
> 
> 赞同：0
> 
> 时间：2013-04-20T08:53:22.237
> 
> 标签：java, file-upload, mobile-application

我已经为包括诺基亚在内的 java 手机做了一个备份和恢复应用程序，它工作正常，但无法上传大于 1 MB 的图片是否可以上传大于 1 MB 的文件，如果可以，请建议我是否可以在 HTTP 或FTP。

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-20T09:27:15.500

看看这个分步教程。您需要的是通过持久`HTTP`连接分多个部分发送文件。

[**在 Android 上使用 POST 将文件上传到 HTTP 服务器。**](https://stunningco.de/2010/04/25/uploading-files-to-http-server-using-post-android-sdk/)

# python-3.x - Python 3.x 中的 k 组合

> ID：16118484
> 
> 赞同：0
> 
> 时间：2013-04-20T08:55:10.600
> 
> 标签：python-3.x, combinations

从给定的 python 集中生成具有所有 k 组合的 k 元组的最有效方法是什么？有合适的内置函数吗？有些东西告诉我应该可以使用两行 for 循环。

PS我确实进行了搜索，发现“Python中的列表组合等”主题的各种条目，但所有提出的解决方案似乎都相当“非python”。我希望有一个令人兴奋的、惯用的 Python 表达式。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T08:58:04.003

[`itertools`](http://docs.python.org/3/library/itertools.html#itertools.combinations)具有所有这些类型的功能：

```
import itertools

for combination in itertools.combinations(iterable, k):
    print(combination) 
```

# android - 处理 xml 中所有布局的触摸事件

> ID：16118488
> 
> 赞同：0
> 
> 时间：2013-04-20T08:56:39.457
> 
> 标签：android, android-layout, android-widget

我有一个线性布局，其中包含 5 个线性布局作为其子级。我想为每个子线性布局处理触摸事件。我的布局看起来像这样

```
 <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
             android:id="@+id/container">

             <LinearLayout android:id="@+id/item1"  
            android:layout_width="match_parent"
            style="@style/NavLinkItemContainer"
            android:layout_height="wrap_content">
             <TextView              
                style="@style/NaviLinkSelected"
                android:text="First"/>
            </LinearLayout>

        <LinearLayout android:id="@+id/item2"
            android:layout_width="match_parent"
            style="@style/NavLinkItemContainer"
            android:layout_height="wrap_content">          
        <TextView                  
            style="@style/NaviLinks"
            android:text="Second"/>
        </LinearLayout>

        <LinearLayout android:id="@+id/item3"
            android:layout_width="match_parent"
            style="@style/NavLinkItemContainer"
            android:layout_height="wrap_content">
        <TextView 
            style="@style/NaviLinks"
            android:text="Third"/>
        </LinearLayout>

        <LinearLayout android:id="@+id/item4"
            android:layout_width="match_parent"
            style="@style/NavLinkItemContainer"
            android:layout_height="wrap_content">
        <TextView 
            style="@style/NaviLinks"
            android:text="Fourth"/>
        </LinearLayout>

        <LinearLayout android:id="@+id/item5"
            android:layout_width="match_parent"
            style="@style/NavLinkItemContainer"
            android:layout_height="wrap_content">
        <TextView
            style="@style/NaviLinks"
            android:text="Fifth"/>
        </LinearLayout>

 </LinearLayout> 
```

我使用布局的活动看起来像

```
public class MainActivity extends Activity implements OnTouchListener{

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);  
    }

    @Override
    public boolean onTouch(View v, MotionEvent event) {
        Log.d("","ON TOUCH VIEW ######## "+v.getId());
        return false;
    }
} 
```

触摸子布局时，在 onTouch 事件中没有得到 id(item1,item2...) 请建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-20T08:59:25.263

对于要添加触摸侦听器的每个布局，设置 onTouchListener。

例如，

```
LinearLayout l1 = (LinearLayout) findViewById(R.id.item2);
l1.setOntouchListener(this); 
```

因此，您必须为每个 ViewGroup 设置侦听器。其余的事情已经由您完成。int onTouch 方法可以处理触摸或所有ViewGroup

```
@Override
public boolean onTouch(View v, MotionEvent event) {
    switch (v.getId()) {
    case R.id.item2:
        do something 
        break;
    case R.id.item3:
        do something 
        break;
    default:
        break;
    }
       // if you want to consume the behavior then return true else retur false
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-05-02T18:40:40.893

这是一个向约束中的每个元素添加 OnTouchListener 的解决方案，它会在您每次触摸除排除列表中的对象之外的对象时隐藏键盘。

```
import android.content.Context;
import android.support.constraint.ConstraintLayout;
import android.support.v7.app.AppCompatActivity;
import android.os.Bundle;
import android.support.v7.app.AppCompatCallback;
import android.util.Log;
import android.view.MotionEvent;
import android.view.View;
import android.view.ViewGroup;
import android.view.WindowManager;
import android.view.inputmethod.InputMethodManager;
import android.widget.EditText;

import java.util.ArrayList;

public class MainActivity extends AppCompatActivity {
    ConstraintLayout constraintLayout = null;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        final EditText editText = findViewById(R.id.editText);
        //Get current ViewGroup. Might have to add an id in the layout xml for the constraint.
        constraintLayout = findViewById(R.id.constraint);

        //List of items that should be excluded
        ArrayList<Integer> listOfExclusion = new ArrayList<>();
        listOfExclusion.add(editText.getId());

        addTouchListeners(listOfExclusion, constraintLayout);

    }

    /**
     * @param excludedResIds ArrayList of list of ids that should be excluded by the addTouchListener
     * @param parent ViewGroup containing the elements you want to lose focus off.
     */
    void addTouchListeners(ArrayList<Integer> excludedResIds, ViewGroup parent){
        parent.setOnTouchListener(new View.OnTouchListener() {
            @Override
            public boolean onTouch(View v, MotionEvent event) {
                InputMethodManager imm = (InputMethodManager) getSystemService(Context.INPUT_METHOD_SERVICE);
                constraintLayout.requestFocus();
                imm.hideSoftInputFromWindow(v.getWindowToken(), 0);
                return false;
            }
        });
        addTouchListener(excludedResIds,parent);
    }

    /**
     * @param excludedResIds ArrayList of list of ids that should be excluded by the addTouchListener
     * @param parent ViewGroup containing the elements you want to lose focus off.
     */
    void addTouchListener(ArrayList<Integer> excludedResIds, ViewGroup parent)
    {
        for(int index = 0; index<parent.getChildCount(); ++index) {
            View nextChild = parent.getChildAt(index);
            try{
                addTouchListener(excludedResIds, (ViewGroup) nextChild);
            }catch (Exception e){

            }
            if(!excludedResIds.contains(nextChild.getId()))
                nextChild.setOnTouchListener(new View.OnTouchListener() {
                    @Override
                    public boolean onTouch(View v, MotionEvent event) {
                        InputMethodManager imm = (InputMethodManager) getSystemService(Context.INPUT_METHOD_SERVICE);
                        constraintLayout.requestFocus();
                        imm.hideSoftInputFromWindow(v.getWindowToken(), 0);
                        return false;
                    }
                });
        }
    }

} 
```

# c# - 合并gridview行并消除重复

> ID：16118490
> 
> 赞同：3
> 
> 时间：2013-04-20T08:56:44.600
> 
> 标签：c#, asp.net, sql, sql-server-2008, pivot

我有 2 张桌子：

```
Table 1

id   question   customerId
1     bla1         1
2     bla2         2    

Table 2

id    customerId    Key         Value
1      1           firstname    John
2      1           lastname     Doe
3      2           firstname    Billy
4      2           lastname     Jones 
```

我需要让我的gridview显示：

```
Row 1: John Doe        Bla1
Row 2: Billy Jones     Bla2 
```

目前它显示：（但我不希望这样）：

```
Row 1: John      Bla1
Row 2: Doe       Bla1
Row 3: Billy     Bla2
Row 4: Jones     Bla2 
```

我想我已经尝试了一切，可以使用你的帮助！谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-20T09:01:22.967

```
SELECT  [firstname],[lastname], question
FROM
        (
            SELECT  a.question, b.[key], b.[value]
            FROM    Table1 a
                    INNER JOIN Table2 b
                        ON a.customerID = b.CustomerID
        ) org
        PIVOT
        (
            MAX([value])
            FOR [KEY] IN ([firstname],[lastname])
        ) pvt 
```

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!3/71db7/1)

输出

```
╔═══════════╦══════════╦══════════╗
║ FIRSTNAME ║ LASTNAME ║ QUESTION ║
╠═══════════╬══════════╬══════════╣
║ John      ║ Doe      ║ bla1     ║
║ Billy     ║ Jones    ║ bla2     ║
╚═══════════╩══════════╩══════════╝ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-20T09:25:20.903

```
SELECT [firstname],[lastname], question
FROM
(
    SELECT Q.ID, Question, Q.CUSTOMERID, KeyId, KeyValue 
    FROM QUESTION Q
            INNER JOIN CUSTOMERMAP C ON Q.CUSTOMERID=C.CUSTOMERID
) as Data
PIVOT
(
   MAX(KeyValue)
   FOR KeyId in ([firstname],[lastname])
) as PT; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-20T09:28:28.123

使用以下查询选择绑定网格的数据：

```
SELECT 
    a.id, 
    a.Question,
    (SELECT Value + ' ' FROM Table2 b WHERE b.customerId=a.customerid 
        FOR XML PATH(''),type).value('.','nvarchar(max)') Value
FROM Table1 a 
```

# r - 如何在图表中添加条形值？

> ID：16118491
> 
> 赞同：1
> 
> 时间：2013-04-20T08:56:55.360
> 
> 标签：r, ggplot2

我有以下 R 代码，它生成每周警报数量的图表。该图看起来很棒，但我想添加条形的确切值。我一直在尝试使用 geom_text 来做到这一点，但我无法让它工作。它不知道变量 ..count.. 并且我不知道如何引用 bar 的值。

```
a = c(0, 0, 0, 1, 2, 3, 3, 3)
b = c(1, 1, 0, 0, 1, 1, 1, 1)
sa2 = data.frame(WeekOfYear = a, UrgentState = b, IsUrgent = b)

p <- qplot(factor(WeekOfYear), data=sa2, geom="bar", fill=factor(UrgentState), order=-as.numeric(IsUrgent))
p <- p + geom_bar()
# p <- p + geom_text(aes(label = factor(WeekOfYear), y = ..count..)) THIS DOESN'T WORK
p <- p + ggtitle("Number of alerts per week")
p <- p + scale_x_discrete(name="Week")
p <- p + scale_y_continuous(name="Number of alerts") 
```

有没有办法为栏中的所有值添加值（填充）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-20T09:22:05.580

```
p + stat_bin(aes(fill=NA,label=..count..),
            geom="text",vjust=-1) 
```

`fill=NA`如果您不想要总条数的数字，请忽略。

# html - href 标记中的 Razor 对象

> ID：16118493
> 
> 赞同：0
> 
> 时间：2013-04-20T08:57:06.420
> 
> 标签：html, razor, asp.net-mvc-4

我是 MVC 4 和 Razor 领域的新手。我正在尝试使用“CSS3 Lightbox”构建一个图库。一切看起来都不错，但我的问题是我无法使用剃须刀和链接。我无法理解 pre 和 next url 的链接有什么问题。希望你能帮忙，我认为可能有问题。我的代码如下所示：

```
 @for (var i = 1; i < ViewBag.GallaryItems.Length; i++)
{
<li>
    <a href="#image-@i">
        <img src="@ViewBag.GallaryItems[i].path" />
     <!--   <img src"~/Images/gallary/pic1.jpg" alt="image01"/> -->

        <span>Pointe</span>
    </a>
    <div class="lb-overlay" id="image-@i">
        <img src="@Url.Content(ViewBag.GallaryItems[i].path)"  />
        <div>
            <h3>@ViewBag.GallaryItems[i].title<span>/point/</span></h3>
            <p>@ViewBag.GallaryItems[i].description</p>
            <a href="#image-@i--" class="lb-prev">Prev</a>
            <a href="#image-@i++" class="lb-next">Next</a>
        </div>
        <a href="#page" class="lb-close">x Close</a>
    </div>
</li>
       } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T14:18:05.763

上一个简单的 href="#image-@(i-1) 和下一个 href="#image-@(i+1) ，现在一切正常！

# php - mysql在多个表中获取最大最小值

> ID：16118494
> 
> 赞同：0
> 
> 时间：2013-04-20T08:57:13.500
> 
> 标签：php, mysql

我想从两张表中获取某些产品的价格范围。

表1（产品）：

```
pid | products_name | products_model
1   | Product 1.....| model 1
2   | Product 2.....| model 2 
```

表2（products_prices）：

```
pid | nerchant_id   | price | sale_price | sale_start_date | sale_expire_date
1   | RVTBV         | 11.90 | 0          | NULL            | NULL
1   | QNUNU         | 11.90 | 9.90       | 2013-05-01      | 2013-12-31
1   | YOLOR         | 12.90 | 10.90      | 2013-04-01      | 2013-12-31
2   | RVTBV         | 20.90 | 0          | NULL            | NULL
2   | QNUNU         | 29.90 | 25.90      | 2013-04-01      | 2013-12-31
2   | YOLOR         | 29.90 | 0          | NULL            | NULL 
```

如何获得价格范围如下所示的结果：

```
pid | products_name | products_model | min_price | max_price
1   | Product 1.... | model 1 ...... | 10.90 ... | 12.90
2   | Product 2.... | model 2 ...... | 20.90 ... | 29.90 
```

我正在使用主查询从 table1 获取产品数据，然后使用 php foreach 产品循环来根据销售开始和到期日期获取最小最大值。

它可以工作，但我不喜欢 php 的子查询。出于性能原因，我更喜欢一个 MySQL 查询。

感谢您的帮助。

到现在为止最好的说法是

```
SELECT      p.pid,

                p.manufacturers_id,

                p.products_image,

        p.products_name,

                (select min(if(CURRENT_DATE BETWEEN pp.sale_start_date AND pp.sale_expire_date and pp.sale_price>'0', pp.sale_price, pp.price)) from products_prices pp where p.pid = pid) as min_price,

                (select max(if(CURRENT_DATE BETWEEN pp.sale_start_date AND pp.sale_expire_date and pp.products_sale_price>'0', pp.sale_price, pp.price)) from products_prices pp where p.pid = pp.pid) as max_price

                       FROM products p

                       WHERE p.products_status = '1'

                       AND p.categories_id = '1'

                       ORDER BY min_price ASC  LIMIT 0, 100 
```

可以稍微优化一下吗？

恢复：

有时解决方案如此简单以至于我看不到它；）

好的，该项目是一个价格比较平台。产品将每小时更新一次或类似的东西，但并非所有价格都会改变。因此，假设 10% 将被更新。但必须在每次访问网站时检索数据。

在这种情况下，读取次数将多于写入次数 (80-20)。

我可以在产品表中添加两个额外的列（min_price 和 max_price），如果 price_data 发生变化，我只更新一次。

一方面，更新会稍微复杂一些，但这不是戏剧。另一方面，数据将被非常快速地检索。

我有基于 15000 个产品的 testet 3 选项来检索 100 行：最差：按方法分组（超过 1 秒）好：arheops 的方法（0,12 秒）最好：用两个额外的列更新一次（0,07 秒)

我选择第三个选项。

还是要谢谢你的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T09:53:57.577

```
SELECT   products.*,
         MIN(IF(CURRENT_DATE BETWEEN sale_start_date AND sale_expire_date, sale_price, price)) min_price,
         MAX(price) max_price
FROM     products JOIN products_prices USING (pid)
GROUP BY pid 
```

在[sqlfiddle](http://sqlfiddle.com/#!2/a485e/1)上查看。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-20T09:09:42.530

以下应该满足您的要求。

**更新：** 第一个查询现在还考虑`start/end date`了销售价格

```
SELECT
  p.pid,
  p.products_name,
  p.products_model,
  pp.price as min_price,
  pp.sale_price as max_price
FROM
  products p
  JOIN products_prices pp ON ( p.pid = pp.pid )
  LEFT JOIN products_prices pp2 ON ( pp2.pid = pp.pid AND pp2.price > pp.price AND pp.sale_start_date BETWEEN pp2.sale_start_date AND pp2.sale_expire_date )
WHERE
  pp2.pid IS NULL AND NOW() BETWEEN pp.sale_start_date and pp.sale_expire_date 
```

下面的，获取产品`max`可用的 ,`min``prices`

```
SELECT
  p.pid,
  p.products_name,
  p.products_model,
  MIN( LEAST( pp.price, pp.sale_price) ) as min_price,
  MAX( GREATEST( pp.price, pp.sale_price) ) as max_price
FROM
  products p
  JOIN products_prices pp ON ( p.pid = pp.pid )
WHERE
  pp.sale_price <> 0
GROUP BY
  p.pid 
```

[**SQLFIDDLE**](http://sqlfiddle.com/#!2/4bfa2/27)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-20T09:12:05.990

这取决于你的查询。

如果您只从产品中查询一些值，这将是最佳的：

```
select pid,products_name,products_model,
   (select min(price) from price where price.pid=product.pid) as min_price,
   (select max(price) from price where price.pid=product.pid) as max_price
 from product  where some_filter_here; 
```

如果你需要 FULL 表，这个是最好的：

```
select a.pid,products_name,products_model,min_price,max_price 
     from product as a 
 left join ( 
   select pid,min(price) as min_price, max(price) as max_price 
        from price group by pid
           ) as b on b.pid=a.pid 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-20T12:12:12.427

我想你实际上是在追求这个。如果没有销售，我已将 sale_price 修改为 NULL，如果您要坚持在 products_prices 表中包含销售信息，那应该是这样......

```
 DROP TABLE IF EXISTS products;
 CREATE TABLE products
 (pid INT NOT NULL AUTO_INCREMENT PRIMARY KEY
 ,products_name VARCHAR(12) NOT NULL
 ,products_model VARCHAR(12) NOT NULL
 );

 INSERT INTO products VALUES 
 (1   ,'Product 1','model 1'),
 (2   ,'Product 2','model 2');

 DROP TABLE IF EXISTS products_prices;
 CREATE TABLE products_prices
 (pid INT NOT NULL
 ,merchant_id CHAR(5) NOT NULL
 ,price DECIMAL(5,2)NOT NULL
 ,sale_price DECIMAL(5,2) NULL
 ,sale_start_date DATE
 ,sale_expire_date DATE
 ,PRIMARY KEY(pid,merchant_id)
 );

 INSERT INTO products_prices VALUES
 (1,'RVTBV',11.90,NULL,NULL,NULL),
 (1,'QNUNU',11.90,9.90,'2013-05-01','2013-12-31'),
 (1,'YOLOR',12.90,10.90,'2013-04-01','2013-12-31'),
 (2,'RVTBV',20.90,NULL,NULL,NULL),
 (2,'QNUNU',29.90,25.90,'2013-04-01','2013-12-31'),
 (2,'YOLOR',29.90,NULL,NULL,NULL);

 SELECT p.* 
      , MIN(CASE WHEN CURDATE() BETWEEN sale_start_date AND sale_expire_date THEN pp.sale_price ELSE pp.price END) min_price 
      , MAX(CASE WHEN CURDATE() BETWEEN sale_start_date AND sale_expire_date THEN pp.sale_price ELSE pp.price END) max_price 
   FROM products p 
   JOIN products_prices pp 
     ON pp.pid = p.pid 
  GROUP 
     BY p.pid;

+-----+---------------+----------------+-----------+-----------+
| pid | products_name | products_model | min_price | max_price |
+-----+---------------+----------------+-----------+-----------+
|   1 | Product 1     | model 1        |     10.90 |     11.90 |
|   2 | Product 2     | model 2        |     20.90 |     29.90 |
+-----+---------------+----------------+-----------+-----------+ 
```

# sql - 按升序显示名字和姓氏是什么意思？

> ID：16118498
> 
> 赞同：1
> 
> 时间：2013-04-20T08:57:34.907
> 
> 标签：sql, oracle, oracle11g

这是问题：“列出 CRN 1003 的课程 ID、课程名称、部分、学生 ID 和学生姓名。按学生姓氏和名字的升序显示列表。”

我的问题：

因为我需要按学生姓氏和名字的升序显示列表。我想知道如何在一个 ORDER By 子句中实现两者？我写了以下查询：

```
SELECT A.cid, A.cname,
B.sid, B.lname,B.fname,
C.section,c.crn
FROM courses A, students B, sections C, Registration D
WHERE A.cid = C.cid AND
B.sid = D.sid AND
c.crn = d.crn AND
c.crn = 1003 ;
ORDER BY B.lname ASC; 
```

在上面的查询中，我不能将 B.Fname 与 B.lname 一起包含。如果我在某个地方错了，请纠正我。我对问题的最后一行感到困惑“按学生姓氏和名字的升序显示列表”

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T08:58:46.770

您可以在 中指定多个列`ORDER BY`：

```
...
ORDER BY B.lname ASC, B.fname ASC; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-20T08:59:10.210

.. 按学生**姓氏**和**名字**升序排列..

```
SELECT A.cid, A.cname,
B.sid, B.lname,B.fname,
C.section,c.crn
FROM courses A, students B, sections C, Registration D
WHERE A.cid = C.cid AND
B.sid = D.sid AND
c.crn = d.crn AND
c.crn = 1003 ;
ORDER BY B.lname,B.fname ASC; 
```

ORDER BY 首先按姓氏应用，然后按名字应用

# java - 自定义 SimpleCursorAdapter - onClickListener 的重载 bindView 问题

> ID：16118499
> 
> 赞同：0
> 
> 时间：2013-04-20T08:57:47.287
> 
> 标签：java, android, android-cursoradapter

我创建了一个自定义的 SimpleCursorAdapter，我已经在其中覆盖了它，`bindView`因此我可以`onClick`在列表项布局中连接 ImageButton 的侦听器。我想在单击按钮时使用`Intent`来自底层的一些额外数据集来启动一个新应用程序`Cursor`启动一个新应用程序。

问题是当`onClick`按钮的函数被调用时，光标似乎不再指向数据库中的正确行（我认为这是因为它已更改为在列表滚动时指向不同的行）。

这是我的代码：

```
private class WaveFxCursorAdapter extends SimpleCursorAdapter {

public WaveFxCursorAdapter(Context context, int layout, Cursor c,
    String[] from, int[] to, int flags) {
    super(context, layout, c, from, to, flags);
}

@Override
public void bindView(View v, Context context, Cursor c) {
    super.bindView(v, context, c);
    ImageButton b = (ImageButton) v.findViewById(R.id.btn_show_spec);

    // fchr is correct here:
    int fchr = c.getInt(c.getColumnIndex(
                 WaveDataContentProvider.SiteForecast.FORECAST_PERIOD));

    Log.d(TAG, "ChrisB: bindView: FCHR is: " + fchr );

    b.setOnClickListener(new OnClickListener() {
        @Override
        public void onClick(View v) {
            Intent i = new Intent(getActivity(), SpecDrawActivity.class);
            i.setAction(Intent.ACTION_VIEW);
            i.putExtra("com.kernowsoft.specdraw.SITENAME", mSitename);

            // fchr is NOT CORRECT here! I can't use the fchr from the
            // bindView method as Lint tells me this is an error:
            int fchr = c.getInt(c.getColumnIndex(
                 WaveDataContentProvider.SiteForecast.FORECAST_PERIOD));

            Log.d(TAG, "bindView: Forecast hour is: " + fchr);
            i.putExtra("com.kernowsoft.specdraw.FCHR", fchr);
            getActivity().startActivity(i);
        }
    });
} 
```

正如您从上面代码中的注释中看到的那样，`fchr`当我将其打印到登录时`bindView`是正确的，但在`onClick`方法中却不正确。我尝试从方法中引用`fchr`变量，但 Andriod Lint 告诉我我不能这样做：`bindView``onClick`

> 不能在不同方法中定义的内部类中引用非最终变量 fchr

我的问题是：如何正确地将`fchr`变量从光标传递到`onClick`方法中？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-20T09:01:06.097

错误的原因是变量`fchr`是 bindView() 方法中的局部变量。您使用匿名类创建的对象可能会持续到 bindView() 方法返回之后。

当 bindView() 方法返回时，局部变量将从堆栈中清除，因此在 bindView() 返回后它们将不再存在。

但是匿名类对象引用了变量`fchr`。如果匿名类对象在清理变量后试图访问它，事情就会变得非常糟糕。

通过使`fchr`final，它们不再是真正的变量，而是常量。然后，编译器只需将`fchr`匿名类中的使用替换为常量的值，您就不会再遇到访问不存在的变量的问题了。

请参阅[使用内部类](http://mobile.tutsplus.com/tutorials/android/java-inner-classes_android/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-20T09:19:52.350

代替：

```
b.setOnClickListener(new OnClickListener() { 
```

利用：

```
b.setOnClickListener(new MyClickListener(fchr)); 
```

MyClickListener 类看起来像：

```
class MyClickListener implements OnClickListener {
    int mFchr;
    public MyClickListener(int fchr) {
        mFchr = fchr;
    }
    @Override
    public void onClick(View v) {
        // here you can access mFchr
    }
} 
```

# javascript - 当另一个方法完成时调用一个方法

> ID：16118500
> 
> 赞同：-5
> 
> 时间：2013-04-20T08:57:50.800
> 
> 标签：javascript, jquery

我在 javascript 中有一个由 ajax 调用组成的函数。我们称它为 search();

然后我有一个事件 onKeyUp。

在 onKeyUp 事件中，我有一个 enterPressed() 函数。

我想在 search() 完成后调用这个函数。

我认为回调在这里无济于事。

这是我的代码：

```
function search () {
       ...
}

ed.onKeyUp.add(function (ed, e) {

    if (e.keyCode == 13)
                enterPressed();

}

function enterPressed() {
       ...
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-20T09:01:03.113

回调是前进的方向。

任何一个：

1.  在搜索完成时触发的回调中绑定您的 keyup 事件处理程序*或*
2.  设置一个变量（在两个函数的范围内）并在搜索完成时更改其值。在 keyup 处理程序中执行任何操作之前，请检查值，如果没有更改，请`return`立即检查。

（这假设`enterPressed`从 keyup 函数调用很重要。如果包含 keyup 代码是一个红鲱鱼，只是表明你也想在其他时间调用它，*那么*直接将它用作回调）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-20T09:02:12.447

您将使用成功/完成回调在完成时调用您的函数。就像是：

```
$.ajax({
    ...
    success: enterPressed,
    ...
:); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-20T09:03:35.523

完成第一个函数后，将第二个函数作为参数传递给第一个函数并在最后执行它。

```
function search (callback) {
    // your code here
    callback();
}

search(function () {
    ed.onKeyUp.add(function (ed, e) {
        if (e.keyCode == 13) {
            enterPressed(); }
    }
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-20T09:04:24.153

尝试这个：

```
var searchDone = false;

function search () {
       ...
   searchDone = true;
}

ed.onKeyUp.add(function (ed, e) {

    if (e.keyCode == 13)
                enterPressed();

}

function enterPressed() {
   if (!searchDone) {
      setTimeout(enterPressed,100); 
      return;
   }

       ...
} 
```

显然，您必须检查 searchDone 迟早会成真……但是您知道现在可以做什么：)

# php - Mysql 选择值然后更新

> ID：16118501
> 
> 赞同：1
> 
> 时间：2013-04-20T08:57:52.033
> 
> 标签：php, mysql, sql, mysqli

基本上我想要做的是从表中获取一个转弯ID，但是在返回值之后它需要增加1。在10个增量之后，它重置为0；

所以我想做类似的事情，但我似乎无法让它工作：

```
UPDATE `gan` SET `turn` = (SELECT `turn` FROM `gan` WHERE `gan_id`='$gan_id') + 1 
```

我还没有弄清楚如何检查该值是否为 10 以将其重置为 0；

所以我需要做的是，在我的 php mysql 查询中，为我传入的 gan_id 返回当前轮次，并在返回值后将其递增。

我尝试运行两个单独的查询，但我遇到了多个用户轮到同一轮的问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-20T09:16:29.120

```
mysql_query("SET AUTOCOMMIT = 0");
mysql_query("START TRANSACTION");
$result = mysql_query("SELECT turn FROM gan WHERE gan_id = $gan_id FOR UPDATE");
$turn = mysql_fetch_array($result);
$someNewVal = $turn == 10 ? 0 : $turn + 1;
$resUpdate = mysql_query("UPDATE gan SET turn = $someNewVal WHERE gan_id = $gan_id");
mysql_query("SET AUTOCOMMIT = 1");
mysql_query("COMMIT"); 
```

不？如果你想处理并发，你需要选择 FOR UPDATE。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-20T09:06:11.263

试试这个查询：

```
UPDATE `gan` SET `turn` =(SELECT MAX(`turn`) FROM `gan` WHERE `gan_id`='$gan_id')+ 1) 
```

这将增加值。

要检查该值并将其重置为 0，您必须锁定表，然后执行您的任务

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-20T09:28:48.313

使用[`CASE`表达式](http://dev.mysql.com/doc/en/control-flow-functions.html#operator_case)：

```
UPDATE gan
SET    turn = CASE turn WHEN 10 THEN 0 ELSE turn + 1 END
WHERE  gan_id = ? 
```

或[`IF()`功能](http://dev.mysql.com/doc/en/control-flow-functions.html#function_if)：

```
UPDATE gan SET turn = IF(turn<10, turn+1, 0) WHERE gan_id = ? 
```

# ios - 如何使 UIButton 可拖动但不触发点击事件

> ID：16118502
> 
> 赞同：3
> 
> 时间：2013-04-20T08:58:03.100
> 
> 标签：ios, uibutton

我一般用这种方法来实现UIButton可移动；

```
[button addTarget:self action:@selector(dragMoving:withEvent:) forControlEvents:UIControlEventTouchDragInside]; 
```

但它会同时触发 touchUpInside 事件，我需要 touchUpInside 事件来做一些其他的事情。

那么有人知道如何避免这种情况吗？

非常感谢;

使用下面的这些代码来解决它；

```
 [button addTarget:self action:@selector(touchDown:withEvent:) forControlEvents:UIControlEventTouchDown];

    [button addTarget:self action:@selector(touchDragInside:withEvent:) forControlEvents:UIControlEventTouchDragInside];
        [button addTarget:self action:@selector(touchUpInside:withEvent:) forControlEvents:UIControlEventTouchUpInside];

    - (void) touchUpInside :(UIControl*)c withEvent:ev{
    NSLog(@"touch Up inside");
    if (count) {
        NSLog(@"here I can do something about clicking event");
    }
}

    - (void) touchDown:(UIControl*)c withEvent:ev{
    NSLog(@"touch Down");
    count = YES;
}

    -(void) touchDragInside:(UIControl*)c withEvent:ev{
    NSLog(@"touch drag inside");
    c.center = [[[ev allTouches] anyObject] locationInView:self.view];
    count = NO;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-08-25T11:05:30.790

实际上，最好的方法是使用 UIPanGestureRecognizer 并将其添加到按钮中。它可以很好地处理拖动，您也可以点击它而无需做任何其他事情。

# c# - 显示未处理异常的对话框

> ID：16118516
> 
> 赞同：3
> 
> 时间：2013-04-20T08:59:31.240
> 
> 标签：c#, android, xamarin.android, xamarin

我希望能够在我的 Xamarin Android 应用程序崩溃时显示一个对话框。诸如“抱歉应用程序已崩溃”之类的内容。您想向开发者发送错误报告吗？”。

我已经连接到 Thread.DefaultUncaughtExceptionHandler，它在捕获到异常时调用 UncaughtException。

当异常被捕获时，我尝试启动一个新的活动来显示对话框 - 对话框被创建但只显示一个带有标题的空白对话框。OnCreate 永远不会被调用，对话框似乎只是挂起。

如果我在应用程序运行时调用代码以正常显示对话框，它会显示并正确运行，因此对话框代码似乎没有任何问题。

有谁知道如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-03T12:37:11.207

目前没有支持和推荐的方法来捕获和识别 Xamarin.Android 中未处理的异常。希望他们能尽快解决这个问题。

见[http://mono-for-android.1047100.n5.nabble.com/Catch-all-the-exceptions-td5165993.html](http://mono-for-android.1047100.n5.nabble.com/Catch-all-the-exceptions-td5165993.html)

请参阅 Jonathan Pryor-2 帖子。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-11-24T15:45:41.017

我找到了一种捕获未处理异常的方法。这取决于抛出异常的位置。如果异常发生在后台线程上，则可以通过在继承自 Mono Application 类的类中连接以下事件来发现它。

```
AppDomain.CurrentDomain.UnhandledException 
```

我认为您的应用程序已崩溃，并且系统没有可用的上下文来创建您的新活动并显示您的对话框。

我已经使用了下面链接中的示例，只要异常发生在主 ui 线程之外，我就能够恢复并显示 toast，所以我相信它可以用来做你需要的事情。

更多信息：http: [//xandroid4net.blogspot.com/2013/11/how-to-capture-unhandled-exceptions.html](http://xandroid4net.blogspot.com/2013/11/how-to-capture-unhandled-exceptions.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-04-11T15:01:56.393

当应用程序因您提供的示例而崩溃时，我可以显示 Toast 消息。但我无法显示警报窗口。我正在编写以下代码以在 Android 设备的 UnHandled Exception 事件中显示和警告消息。

```
 'alert.SetTitle("Un Handled Exception Event");
 SetMessage("Un Handled Exception Event triggered");
 SetCancelable(true);
 Show();' 
```

# javascript - 用于 linux 的 Java 脚本编辑器或 IDE

> ID：16118521
> 
> 赞同：5
> 
> 时间：2013-04-20T09:00:12.917
> 
> 标签：javascript, linux, ide, editor

我是 node js 的新手，我正在寻找适用于 linux 的优秀且免费的编辑器（具有良好的自动完成功能）或 IDE（如果它可以自己运行 nodejs，那就太好了）。（当然，跨平台更好：D）任何帮助将不胜感激：D

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-20T10:24:49.183

我[为 ubuntu](http://www.ubuntuupdates.org/ppa/sublime)和[SublimeText-Nodejs推荐 sublime](https://github.com/tanepiper/SublimeText-Nodejs)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-12T10:13:22.800

我绝对推荐一个完整的 IDE。我使用 Sublime Text 进行所有编码，但是当您尝试调试与 CMS 或其他任何人的代码冲突的 2000 行怪物时，能够使用可变荧光笔真是太好了。我投票给 Eclipse。当谈到深夜咖啡研磨时，您无法击败可靠的 IDE。

# php - 嗅探器片段以允许在新行上使用括号

> ID：16118523
> 
> 赞同：6
> 
> 时间：2013-04-20T09:00:42.063
> 
> 标签：php, codesniffer

是否有一个代码嗅探器片段允许/强制 { } 为每个函数/方法放在换行符上？

基本上，强迫这样的事情：

```
if (TRUE)
{
     // Code logic
}
else
{
    // Code Logic
} 
```

和

```
public function test()
{
     // Code logic
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-20T09:17:17.050

是的，有一个现成的。它被称为`OpeningFunctionBraceBsdAllmanSniff`，你可以在下面找到它`/path/to/CodeSniffer/Standards/Generic/Sniffs/Functions`。但这仅适用于函数的声明。

对于控制结构，您可以从中获取`/path/to/Standards/Squiz/Sniffs/ControlStructures/ControlSignatureSniff.php`并调整模式数组

```
protected function getPatterns()
{
    return array(
            'try {EOL...} catch (...) {EOL',
            'do {EOL...} while (...);EOL',
            'while (...) {EOL',
            'for (...) {EOL',
            'if (...) {EOL',
            'foreach (...) {EOL',
            '} else if (...) {EOL',
            '} elseif (...) {EOL',
            '} else {EOL',
           );

}//end getPatterns() 
```

到，即

```
protected function getPatterns()
{
    return array(
            'try {EOL...} catch (...) {EOL',
            'do {EOL...} while (...);EOL',
            'while (...) {EOL',
            'for (...) {EOL',
            'if (...)EOL{',              // that's what you need
            'foreach (...) {EOL',
            '} else if (...) {EOL',
            '} elseif (...) {EOL',
            '} elseEOL{',               // and this
           );

}//end getPatterns() 
```

如果您需要将相同的规则应用于其他控制结构，您可以采用相同的方式，通过更改数组中的模式。

**更新：**当然，一种更简洁的解决方案是编写您自己的类来扩展上述内容并覆盖该`getPatterns()`方法。

# unix - 试图从nawk脚本中的名字中获取第一个字母到html

> ID：16118525
> 
> 赞同：0
> 
> 时间：2013-04-20T09:00:48.247
> 
> 标签：unix, nawk

为什么第 17 行不起作用（在代码中注释）？：

```
#!/bin/nawk -f

BEGIN {
    print "<html>"
    print "<body>"
    print "  <table border=2>"
    print "    <tr>"
    print "      <th>Name</th>"              
    print "      <th>Username</th>"              
    print "      <th>Email</th>"                    
    print "    </tr>"
}

{
    print "    <tr>"
    print "      <td>" $2 " " $1"</td>"                   
    print "      <td>"'{Substr($1,1,1)}' "</td>"  ###### Line 17                 
is
    print "      <td>" $3 "</td>" 
```

我可以在第 17 行写这样的声明吗？我试图得到名字的第一个字母。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T09:30:01.410

应删除此行中的单引号。目前，引用允许 shell 解析 Substr 并且您不希望这种情况发生。

该命令也是 substr 而不是 Substr。

```
print "      <td>"'{Substr($1,1,1)}' "</td>"  ###### Line 17 
```

改成-：

```
print "      <td>" substr($1,1,1) "</td>" 
```

# javascript - '\352'十进制值的javascript行为

> ID：16118528
> 
> 赞同：0
> 
> 时间：2013-04-20T09:01:06.877
> 
> 标签：javascript, salt

在检查登录页面时，我发现了以下 JS 代码

```
hexMD5('\232' + document.login.password.value + '\305\334\122\134\352'); 
```

所以，我在问`\352`它会占用一个字节并因此导致溢出和产量`96`或 java 脚本解释器促进它`short`以保持其价值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T09:04:48.623

JavaScript 没有字节、短整数或整数*，它只有[`Number`type](http://www.ecma-international.org/ecma-262/5.1/#sec-8.5)，它是一个双精度 IEEE-754 数字。但这与您显示的代码并不真正相关，除非`charCodeAt`在字符串上使用某些东西来获取其中一个字符的相应代码点，因为您在字符串中定义代码点（松散地，“字符”），不是数字。[JavaScript 中的字符是 16 位实体](http://www.ecma-international.org/ecma-262/5.1/#sec-8.4)，因此八进制转义`'\352'`编码字符 234 十进制，这显然很容易适应字符的 16 位范围。

旁注：八进制转义不是主要标准的一部分，在严格模式下是不允许的。它们是规范的[非规范性附件](http://www.ecma-international.org/ecma-262/5.1/#sec-B.1.2)的一部分。我建议使用十六进制转义或 unicode 转义而不是八进制转义。

* 好吧，在一些与位相关的计算中，JavaScript 确实有 32 位整数作为*暂时*的东西，例如由`&`and`|`运算符执行的计算。

# angularjs - 无法注册自定义 angularjs 过滤器

> ID：16118530
> 
> 赞同：1
> 
> 时间：2013-04-20T09:01:12.420
> 
> 标签：angularjs

我正在尝试用角度编写我自己的过滤器。但是在尝试注册过滤器时出现错误，

> 错误：没有模块：customFilterModule

[打破这个错误]

throw Error('没有模块：' + name);

angular.js（第 1090 行）

> 错误：没有模块：myApp

[打破这个错误]

throw Error('没有模块：' + name);

Javascript：

```
angular.module('customFilterModule')
.filter('customFilter', function() {
    return function(listing, param) {
        var out = [];
        // perform my filtering logic to return a smaller array
        return out;
    };
});

var myApp = angular.module('myApp', ['customFilterModule']);

function AppController($scope) {
    // my controller code
} 
```

HTML：

```
 <div class="container" id="mainBody" ng-app="myApp">

        <div id="listingsListBody" class="row" ng-controller="MyController">
        ...
           <div class="sub-container">
              <div class="elem-box" ng-repeat="elem in elems | customFilter:jObj>
              ...
             </div>
         </div>
    </div> 
```

我传递给“customFilter”的参数 jObj 是控制器填充的 JSON 对象的一部分。

我似乎无法弄清楚我做错了什么。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-20T09:14:08.583

在 plunker 中使用实时代码可以让人们立即回答您的问题，因此附上实时代码示例（使用 plunker、jsfiddle 或类似工具）总是一个好主意。

根据您的代码示例，我可以发现 2 件可疑的事情：

1）在这段代码中：

```
angular.module('customFilterModule')
.filter('customFilter', function() {
    return function(listing, param) {
       . . .
    };
}); 
```

看起来您正在尝试检索（！）一个现有的`customFilterModule`，而您可能正在尝试创建一个新的。你应该改写`angular.module('customFilterModule', [])`（注意括号作为第二个参数）

2）从您的代码中不清楚`listingFilter`模块的定义位置。我认为这可能是你的问题，所以你应该写：

```
var myApp = angular.module('myApp', ['customFilterModule']); 
```

# jquery - cgi.pm 重定向不打印到目标 _top

> ID：16118534
> 
> 赞同：0
> 
> 时间：2013-04-20T09:02:00.253
> 
> 标签：jquery, perl, cgi

我不确定我需要在这里提供多少信息..所以在我尝试解释这个场景时请多多包涵。抱歉，如果有太多“填充”

我有一个应用程序，我在其中使用 CGI::Session 来保证安全性。各种页面是通过 jquery、perl、ajax 调用等的组合引入的。当我打印一个受密码保护的页面时，我会检查 CGI::Session 记录的登录状态，并在必要时重定向到主页以下perl：

```
print $cgi->redirect( -URL => $homepage); 
```

这可以按预期完美运行。

然而 ...

在其中一个受密码保护的页面中有一个 DIV，其中包含一个控制面板......它本身是通过 jquery 和 ajax 调用拉入的。我最近决定在用户​​单击“确定”时为保存此数据添加一些额外的安全性......这会调用另一个对 perl (ControlPanelSave.pl) 的 ajax 调用。在 perl 中，我决定为 CGI::Session 登录标志添加相同的检查（用户可能在控制面板上坐得太久，当他们点击保存时，他们已经超时 - 或者可能是坏人找到了javascript）。因此，如果未登录，perl 会检查并重定向到主页。

我遇到的问题是主页随后打印在控制面板 DIV 中，就像它是一个框架一样。

我尝试使用我能想到的唯一方法来修复它：

```
print $cgi->redirect( -URL => $homepage, -target => '_top' ); 
```

这没有任何区别 - 它仍然在控制面板 DIV 内打印主页。

重定向它的正确方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T09:10:32.450

您必须编辑 JavaScript 以识别它没有获得它所期望的数据并`location`在客户端上设置。

# twitter-bootstrap - Twitter Bootstrap 的手风琴和多个孩子

> ID：16118539
> 
> 赞同：0
> 
> 时间：2013-04-20T09:03:35.040
> 
> 标签：twitter-bootstrap, accordion, jquery-ui-accordion

如何扩展/显示多个孩子？目前未显示 Service2。

```
<div class="accordion" id="accordion1">
<div class="accordion-group">
    <div class="accordion-heading">
        <div class="accordion-toggle group-accordion-toggle">
            <a href="#collapseOne" data-parent="#accordion1"
               data-toggle="collapse" class=""><i
                    class="icon-plus"></i></a>
            <a href="http://www.example.com">Operator</a>
        </div>
    </div>

    <div id="collapseOne" class="accordion-body collapse">
        <div class="accordion-inner"><a
                href="http://www.example.com/service1">Service1</a></div>
    </div>

    <div id="collapseOne" class="accordion-body collapse">
        <div class="accordion-inner"><a
                href="http://www.example.com/service2">Service2</a></div>
    </div>

</div> 
```

[http://jsfiddle.net/mejo/CXDC8/](http://jsfiddle.net/mejo/CXDC8/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-05T08:54:52.220

你能不能把`<div id="collapseOne" class="accordion-body collapse">`容器从里面取出来`Section2`？

```
 <div id="collapseOne" class="accordion-body collapse">

        <div class="accordion-inner"><a
                href="http://www.example.com/service1">Service1</a>
        </div>

        <div class="accordion-inner"><a
                href="http://www.example.com/service2">Service2</a>
        </div>
    </div> 
```

这是一个[JSFiddle](http://jsfiddle.net/SiCurious/CXDC8/2/)说明我的意思。

此外，让两个元素具有相同的 ID 也是一种不好的做法，并且可能会导致进一步的问题。

# php - 如何以及在哪里为模块包含 js 和 css？

> ID：16118542
> 
> 赞同：1
> 
> 时间：2013-04-20T09:03:46.413
> 
> 标签：php, yii, yii-modules

我有类别的模块：

```
+modules/
 +category/
    +assets/
      +css/
      +js/
      +images/
    +components/
    +controllers/
    +models/
    +views/
    -CategoryModule.php 
```

将 css 和 jss 包含到所有视图中的最佳方式是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-20T11:10:26.833

在方法中发布和注册`CategoryModule` `init`- 这将使您的 css 和 js 在类别模块中可用。
像这样的东西：

```
public function  init() {
    $path = $this->assetManager->publish(Yii::getPathOfAlias('application.modules.category.assets'));
    $this->clientScript->registerCssFile($path . '/css/some-css.css', 'screen, projection');
    $this->clientScript->registerScriptFile($path . '/js/some-js.js');
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-20T11:43:21.377

在视图/布局下创建模块布局文件并在模块配置文件中调用它

```
$this->layoutPath = Yii::getPathOfAlias('application.modules.moduleName.views.layouts');
        $this->layout = '/layouts/layoutname'; 
```

将所有 js 和 css 文件注册为@PeterM 提到的

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-21T13:11:55.280

在您的视图文件夹中创建一个文件夹“布局”。在该布局文件夹中创建 main.php。

在您的 中，添加以下代码：

```
<link rel="stylesheet" href="<?php echo Yii::app()->request->baseUrl; ?>/css/style.css" type="text/css" media="screen"/>
<script type="text/javascript" src="<?php echo Yii::app()->request->baseUrl; ?>/js/cycle.js"></script> 
```

这是您的默认布局。所以添加，

```
<?php echo $content; ?> 
```

这是在所有视图中包含 css 和 js 的另一种方法。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2014-05-09T18:46:12.437

使用这种静态方法很容易

```
<?php Yii::app()->clientScript->registerCssFile(Yii::getPathOfAlias('application.modules.curriculo.assets') . '/bootstrap/datepicker/css/datepicker.css'); ?>
<?php Yii::app()->clientScript->registerScriptFile(Yii::getPathOfAlias('application.modules.curriculo.assets') . '/bootstrap/datepicker/js/bootstrap-datepicker.js'); ?> 
```

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2013-04-22T07:38:32.120

这应该可以帮助您：

[http://www.yiiframework.com/wiki/249/understanding-the-view-rendering-flow/](http://www.yiiframework.com/wiki/249/understanding-the-view-rendering-flow/)

详细解释了所有三个部分（beginContent、container 和 endContent）。

# java - 到处覆盖 onStop？

> ID：16118543
> 
> 赞同：1
> 
> 时间：2013-04-20T09:03:48.663
> 
> 标签：java, android

**简介：** 我做了一个淡出/淡入淡出，淡出所有视图的不透明度。我想在切换活动之间制作动画。我现在必须将淡入/淡出添加到每个活动中的每个 onStop/onResume。

**问题：**是否可以创建一个自定义的重写 onStop 函数并在每个活动中使用它？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-20T09:09:53.777

创建一个像这样的基础活动

```
public abstract class BaseActivity extends Activity {

..................
..................
    @Override
    public void onStop() {
        super.onStop();
        // Do your stuff
    }
....................
...................
} 
```

现在在每个活动中扩展基本活动，例如

```
public class Activity1 extends BaseActivity 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-20T09:40:41.370

This is a suggestion rather than the answer to your questions.

Based on your description, it seems like you want to define a custom transition animation between activities. Why not just define a Style? All you need to do is define `windowExitAnimation`and `windoEnterAnimation` in your custom style, and then override `windowAnimationStyle`.

Check out the developer guide on how how to define your own style [Styles and Themes](http://developer.android.com/guide/topics/ui/themes.html#ApplyATheme).

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-20T09:10:10.287

是的，您绝对可以覆盖 onStop() 函数。使用 onStop 覆盖器创建活动 StopperActivity

```
@Override
public void onStop() {
    super.onStop();

} 
```

在其他活动中，只需扩展这个自定义活动而不是活动

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-20T09:12:13.867

创建类**BaseActivity**

例如

```
class BaseActivity extends Activity
{
   void onResume()
   {
      super.onResume();
       // your code here (Need to write only once for entire app)
   }
   void onStop()
   {
        super.onStop();
       // your code here of onStop (Need to write only once for entire app)
   }
} 
```

现在将此**BaseActivity**用于您班级中的所有活动。

```
class MainActivity extends BaseActivity
{
   ...
}
class AnotherActivity extends BaseActivity
{
   ...
} 
```

这样，您只需为 BaseActivity 中的淡入和淡出编写一次代码。

# sql - Entity Framework v5.0 Exception 'From' 是一个保留关键字，不能用作别名，除非它被转义

> ID：16118544
> 
> 赞同：1
> 
> 时间：2013-04-20T09:04:01.857
> 
> 标签：sql, entity-framework, orm, entity-framework-5

我使用 EntityFrameWork v5.0，EntityDataSource 控件。

在代码中我设置了 SQL 查询，但是当我在编译后打开页面时出现异常。我该如何解决？

代码：

```
entryListDs.CommandParameters.Add(new Parameter("subId", DbType.Int32, Common.CurrentUserID.ToString()));
entryListDs.CommandParameters.Add(new Parameter("typeId", DbType.Int32, ((int)MessageType.Wall).ToString()));

entryListDs.CommandText = @"SELECT 
m.ID,
m.To,
m.Subject,
m.BodyHtml,
m.CreationDate,
m.New,
m.TypeID
FROM 
message AS m
JOIN subscription AS s
ON m.From = s.ObjectID
WHERE s.SubscriberID = @subId and m.TypeID = @typeId
ORDER BY m.CreationDate DESC"; 
```

打开页面时出现异常：

**'From' 是保留关键字，不能用作别名，除非它被转义。在第 12 行第 6 列附近。**

```
Description: An unhandled exception occurred during the execution of the current web request. Please review the stack trace for more information about the error and where it originated in the code.

Exception Details: System.Data.EntitySqlException: 'From' is a reserved keyword and cannot be used as an alias, unless it is escaped. Near line 12, column 6.

Source Error:

An unhandled exception was generated during the execution of the current web request. Information regarding the origin and location of the exception can be identified using the exception stack trace below.

Stack Trace:

[EntitySqlException: 'From' is a reserved keyword and cannot be used as an alias, unless it is escaped. Near line 12, column 6.]
   System.Data.Common.EntitySql.CqlLexer.MapUnescapedIdentifier(String symbol) +8073331
   System.Data.Common.EntitySql.CqlLexer.MapIdentifierOrKeyword(String symbol) +57
   System.Data.Common.EntitySql.CqlLexer.Accept_83() +36
   System.Data.Common.EntitySql.CqlLexer.yylex() +386
   System.Data.Common.EntitySql.CqlParser.yylex() +16
   System.Data.Common.EntitySql.CqlParser.yyparse() +132
   System.Data.Common.EntitySql.CqlParser.internalParseEntryPoint() +101
   System.Data.Common.EntitySql.CqlParser.Parse(String query) +148
   System.Data.Common.EntitySql.CqlQuery.Parse(String commandText, ParserOptions parserOptions) +41
   System.Data.Common.EntitySql.CqlQuery.CompileCommon(String commandText, Perspective perspective, ParserOptions parserOptions, Func`3 compilationFunction) +84
   System.Data.Common.EntitySql.CqlQuery.CompileQueryCommandLambda(String queryCommandText, Perspective perspective, ParserOptions parserOptions, IEnumerable`1 parameters, IEnumerable`1 variables) +100
   System.Data.Objects.EntitySqlQueryState.Parse() +8608663
   System.Data.Objects.EntitySqlQueryState.GetResultType() +4
   System.Data.Objects.ObjectQuery.GetResultType() +58
   System.Web.UI.WebControls.EntityDataSourceQueryBuilder`1.BuildBasicQuery(ObjectContext context, Boolean computeCount) +108
   System.Web.UI.WebControls.EntityDataSourceView.ExecuteSelectTyped(DataSourceSelectArguments arguments, Creator qbConstructor) +355
   System.Web.UI.WebControls.EntityDataSourceView.ExecuteSelect(DataSourceSelectArguments arguments) +606
   System.Web.UI.DataSourceView.Select(DataSourceSelectArguments arguments, DataSourceViewSelectCallback callback) +21
   System.Web.UI.WebControls.DataBoundControl.PerformSelect() +138
   System.Web.UI.WebControls.ListView.PerformSelect() +102
   System.Web.UI.WebControls.BaseDataBoundControl.DataBind() +30
   System.Web.UI.WebControls.BaseDataBoundControl.EnsureDataBound() +105
   System.Web.UI.WebControls.ListView.CreateChildControls() +52
   System.Web.UI.Control.EnsureChildControls() +83
   System.Web.UI.Control.PreRenderRecursiveInternal() +42
   System.Web.UI.Control.PreRenderRecursiveInternal() +168
   System.Web.UI.Control.PreRenderRecursiveInternal() +168
   System.Web.UI.Control.PreRenderRecursiveInternal() +168
   System.Web.UI.Control.PreRenderRecursiveInternal() +168
   System.Web.UI.Control.PreRenderRecursiveInternal() +168
   System.Web.UI.Control.PreRenderRecursiveInternal() +168
   System.Web.UI.Page.ProcessRequestMain(Boolean includeStagesBeforeAsyncPoint, Boolean includeStagesAfterAsyncPoint) +974

Version Information: Microsoft .NET Framework Version:4.0.30319; ASP.NET Version:4.0.30319.18033 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T09:07:12.443

它在您的 Exception: 中说`From is a reserved keyword`。

在您的查询中，您有`ON m.From = s.ObjectID`. 您需要将`From`列重命名为其他名称。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-20T09:24:32.480

如果在列名中使用关键字或特殊符号，则需要括号。只需将列名放在方括号中：

```
ON m.[From] = s.ObjectID 
```

# javascript - 使用 java 脚本画布绘制带圆圈的多边形

> ID：16118553
> 
> 赞同：0
> 
> 时间：2013-04-20T09:05:08.203
> 
> 标签：javascript, canvas, graph, polygon, geometry

大家好，有没有一种方法可以使用 java 脚本画布绘制一个带有圆圈的多边形，这样我就可以将每个圆圈称为一个包含其坐标和索引的对象。我想直观地绘制完整的 k 部图。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T09:27:45.090

画布的工作原理很像 ms paint。一旦你在上面画了一个圆圈，计算机就会忘记这个圆圈，只记住像素。您需要自己跟踪它：

我还没有测试过下面的代码，但希望你能明白。

希望这可以帮助您入门：http: [//blog.nihilogic.dk/2009/02/html5-canvas-cheat-sheet.html](http://blog.nihilogic.dk/2009/02/html5-canvas-cheat-sheet.html)

```
var canvas = document.getElementById("mainCanvas");
var ctx = canvas.getContext("2d");
var circles =[];
function addCircle(arg_x,arg_y,arg_rad){
    var newCirc = {};
    newCirc.x = arg_x
    newCirc.y = arg_y
    newCirc.rad = arg_rad
    circles.push(newCirc)
}

function redrawCirc(){
    // loop through circles array and redraw entire graph
    // whenever something changes
    for(var i =0;i<circles.length;i++){
        ctx.arc(circles[i].x,circles[i].y,circles[i].rad,0,Math.PI*2);
    }
} 
```

# java - SmsManager 发送多条消息

> ID：16118556
> 
> 赞同：1
> 
> 时间：2013-04-20T09:05:35.827
> 
> 标签：java, android, sms

我正在开发一个自动回复 android 应用程序，如果它与所选号码匹配，即保存在数据库中，它将向传入号码发送消息。它运行成功，但有时会发送两次消息，它会向该传入号码发送三条消息。

我正在使用以下代码：

```
void processCall(String inNumber, String msg) {

    try {

        String sent = "android.telephony.SmsManager.STATUS_ON_ICC_SENT";
        PendingIntent pisent = PendingIntent.getBroadcast(getBaseContext(),0, new Intent(sent), 0);
        PendingIntent pidel = PendingIntent.getBroadcast(getBaseContext(),0, new Intent("Dilivered"), 0);
        SmsManager man = SmsManager.getDefault();

        //ArrayList<String> smstext = man.divideMessage(msg);
        man.sendTextMessage(inNumber, null, msg, pisent, null);
        //man.sendMultipartTextMessage(inNumber, null, smstext, null, null);
        Toast.makeText(getBaseContext()," msg send successfully to " + inNumber, Toast.LENGTH_SHORT).show();
        ContentValues sentSms = new ContentValues();
        sentSms.put(TELEPHON_NUMBER_FIELD_NAME, inNumber);
        sentSms.put(MESSAGE_BODY_FIELD_NAME, msg);
        ContentResolver contentResolver = getContentResolver();
        contentResolver.insert(SENT_MSGS_CONTET_PROVIDER, sentSms);
        return;
    }
    catch (Exception e) {

        Toast.makeText(getApplicationContext(), "SMS faild, please try again later!", Toast.LENGTH_LONG).show();
        e.printStackTrace();
    } 
```

我哪里做错了？任何帮助是极大的赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T09:15:00.840

尝试在两者之间放入日志消息，看看这个函数被执行了多少次。此外，如果这是一个正在运行的服务，请查看您是否多次触发该服务

# windows-phone-7 - 使用 Web API 和 Windows Phone

> ID：16118558
> 
> 赞同：0
> 
> 时间：2013-04-20T09:06:02.407
> 
> 标签：windows-phone-7, visual-studio-2012, asp.net-web-api, iis-express, lan

我正在开发一个由两个元素组成的解决方案：一个发布一些 REST 服务的 Web 服务器和一个使用这些服务的移动客户端。为了实现 REST 服务，我使用了 Web API 技术。

当我在调试中启动 Web 项目时，一切正常。我可以通过指向 localhost:63954/api 来使用这些服务。一个奇怪的事实：如果我将“localhost”更改为“127.0.0.1”或机器的 LAN 地址 192.168.xxx.xxx，服务器将不再响应！

然后，当我启动在虚拟化模拟器中运行的 Windows Phone 客户端时，它无法连接到 Web 服务器！即使这两个组件在同一台机器上运行。显然，在 Windows Phone 中我不能使用“localhost”，因为手机的 localhost 就是手机本身。所以我尝试使用 192.168.xxx.xxx 地址，它是运行 Web 服务的机器的地址。但是手机模拟器无法访问webservice。

我需要在 Visual Studio 2012 中运行 Web 服务器，因为我需要对其进行调试，并使其可以从 Windows Phone Emulator 访问，但我不知道该怎么做。你能帮助我吗？任何想法？

非常感谢你，里卡多。

编辑：通过点击此处找到的链接（将[IIS Express 绑定到 IP 地址](https://stackoverflow.com/questions/4866547/binding-iis-express-to-an-ip-address)）并关闭我的防火墙，我可以在 VS12 之外运行 Web 应用程序，并且可以从网络中的其他电脑访问它，也可以从 WP 访问它模拟器。这可能是一种解决方法，但我无法以这种方式在 VS 中调试 REST 服务，这并不好......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T15:30:46.500

Windows Phone 8 模拟器在您的网络上作为单独的机器工作，具有自己的 IP 地址和配置。因此，为了让模拟器能够访问您的服务，您需要确保您尝试访问的端口已为入站连接打开。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T21:29:32.187

正如您提到的Windows Phone在您的客户端机器上单独运行，解决此问题的一种方法是，将您机器的IP地址绑定到Web Api，因此可以使用机器的IP地址访问Web api。您可以绑定IP使用 Microsoft Webmatrix 为项目添加地址。因此，您可以使用 IP 地址访问 Web Api。希望这会有所帮助。

# iphone - 如何修复 iOS 中的视频方向问题

> ID：16118559
> 
> 赞同：12
> 
> 时间：2013-04-20T09:06:05.107
> 
> 标签：iphone, ios, objective-c, avasset

我正在使用用户从照片中选择视频并将其上传到服务器的应用程序。由于我的服务器是 .Net 服务器，因此视频会旋转。我知道问题的原因可能与图像的情况相同（您可以参考我之前的答案[https://stackoverflow.com/a/10601175/1030951](https://stackoverflow.com/a/10601175/1030951)），所以我用谷歌搜索并获得了修复**视频方向**的代码，我从 RayWenderlich.com 获得代码并按以下方式修改。现在我的输出视频工作正常，但视频静音。它播放但不播放音频。如果我遗漏了什么，请帮助我。

我通过`-(void)imagePickerController:(UIImagePickerController *)picker didFinishPickingMediaWithInfo:(NSDictionary *)info`方法信息字典

```
- (void)fix:(NSDictionary*)pobjInfoDirectory withFileName:(NSString*)pstrOutputFileName
{
    firstAsset = [AVAsset assetWithURL:[pobjInfoDirectory objectForKey:UIImagePickerControllerMediaURL]];

    if(firstAsset !=nil)
    {
        //Create AVMutableComposition Object.This object will hold our multiple AVMutableCompositionTrack.
        AVMutableComposition* mixComposition = [[AVMutableComposition alloc] init];

        //VIDEO TRACK
        AVMutableCompositionTrack *firstTrack = [mixComposition addMutableTrackWithMediaType:AVMediaTypeVideo preferredTrackID:kCMPersistentTrackID_Invalid];
        [firstTrack insertTimeRange:CMTimeRangeMake(kCMTimeZero, firstAsset.duration) ofTrack:[[firstAsset tracksWithMediaType:AVMediaTypeVideo] objectAtIndex:0] atTime:kCMTimeZero error:nil];

        AVMutableVideoCompositionInstruction * MainInstruction = [AVMutableVideoCompositionInstruction videoCompositionInstruction];

                MainInstruction.timeRange = CMTimeRangeMake(kCMTimeZero, firstAsset.duration);

        //FIXING ORIENTATION//
        AVMutableVideoCompositionLayerInstruction *FirstlayerInstruction = [AVMutableVideoCompositionLayerInstruction videoCompositionLayerInstructionWithAssetTrack:firstTrack];

        AVAssetTrack *FirstAssetTrack = [[firstAsset tracksWithMediaType:AVMediaTypeVideo] objectAtIndex:0];

        UIImageOrientation FirstAssetOrientation_  = UIImageOrientationUp;

        BOOL  isFirstAssetPortrait_  = NO;

        CGAffineTransform firstTransform = FirstAssetTrack.preferredTransform;

        if(firstTransform.a == 0 && firstTransform.b == 1.0 && firstTransform.c == -1.0 && firstTransform.d == 0)
        {
            FirstAssetOrientation_= UIImageOrientationRight; isFirstAssetPortrait_ = YES;
        }        
        if(firstTransform.a == 0 && firstTransform.b == -1.0 && firstTransform.c == 1.0 && firstTransform.d == 0)
        {
            FirstAssetOrientation_ =  UIImageOrientationLeft; isFirstAssetPortrait_ = YES;
        }
        if(firstTransform.a == 1.0 && firstTransform.b == 0 && firstTransform.c == 0 && firstTransform.d == 1.0)
        {
            FirstAssetOrientation_ =  UIImageOrientationUp;
        }
        if(firstTransform.a == -1.0 && firstTransform.b == 0 && firstTransform.c == 0 && firstTransform.d == -1.0)
        {
            FirstAssetOrientation_ = UIImageOrientationDown;
        }

        CGFloat FirstAssetScaleToFitRatio = 320.0/FirstAssetTrack.naturalSize.width;

        if(isFirstAssetPortrait_)
        {
            FirstAssetScaleToFitRatio = 320.0/FirstAssetTrack.naturalSize.height;
            CGAffineTransform FirstAssetScaleFactor = CGAffineTransformMakeScale(FirstAssetScaleToFitRatio,FirstAssetScaleToFitRatio);
            [FirstlayerInstruction setTransform:CGAffineTransformConcat(FirstAssetTrack.preferredTransform, FirstAssetScaleFactor) atTime:kCMTimeZero];
        }
        else
        {
            CGAffineTransform FirstAssetScaleFactor = CGAffineTransformMakeScale(FirstAssetScaleToFitRatio,FirstAssetScaleToFitRatio);
            [FirstlayerInstruction setTransform:CGAffineTransformConcat(CGAffineTransformConcat(FirstAssetTrack.preferredTransform, FirstAssetScaleFactor),CGAffineTransformMakeTranslation(0, 160)) atTime:kCMTimeZero];
        }
        [FirstlayerInstruction setOpacity:0.0 atTime:firstAsset.duration];

        MainInstruction.layerInstructions = [NSArray arrayWithObjects:FirstlayerInstruction,nil];;

        AVMutableVideoComposition *MainCompositionInst = [AVMutableVideoComposition videoComposition];
        MainCompositionInst.instructions = [NSArray arrayWithObject:MainInstruction];
        MainCompositionInst.frameDuration = CMTimeMake(1, 30);
        MainCompositionInst.renderSize = CGSizeMake(320.0, 480.0);

        NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
        NSString *documentsDirectory = [paths objectAtIndex:0];
        NSString *myPathDocs =  [documentsDirectory stringByAppendingPathComponent:[NSString stringWithFormat:@"mergeVideo-%d.mov",arc4random() % 1000]];

        NSURL *url = [NSURL fileURLWithPath:myPathDocs];

        AVAssetExportSession *exporter = [[AVAssetExportSession alloc] initWithAsset:mixComposition presetName:AVAssetExportPresetHighestQuality];

        exporter.outputURL=url;
        exporter.outputFileType = AVFileTypeQuickTimeMovie;
        exporter.videoComposition = MainCompositionInst;
        exporter.shouldOptimizeForNetworkUse = YES;
        [exporter exportAsynchronouslyWithCompletionHandler:^
         {
             dispatch_async(dispatch_get_main_queue(), ^{
                 [self exportDidFinish:exporter];
             });
         }];
    }
}

- (void)exportDidFinish:(AVAssetExportSession*)session
{
    if(session.status == AVAssetExportSessionStatusCompleted)
    {
        NSURL *outputURL = session.outputURL;
        ALAssetsLibrary *library = [[ALAssetsLibrary alloc] init];

        if ([library videoAtPathIsCompatibleWithSavedPhotosAlbum:outputURL])
        {
            if ([self.delegate respondsToSelector:@selector(videoExported)])
                [self.delegate videoExported];    
        }
    }       
    firstAsset = nil;
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-20T16:46:26.887

`//VIDEO TRACK`在部分之后添加这个

```
 //AUDIO TRACK
        AVMutableCompositionTrack *firstAudioTrack = [mixComposition addMutableTrackWithMediaType:AVMediaTypeAudio preferredTrackID:kCMPersistentTrackID_Invalid];
        [firstAudioTrack insertTimeRange:CMTimeRangeMake(kCMTimeZero, firstAsset.duration) ofTrack:[[firstAsset tracksWithMediaType:AVMediaTypeAudio] objectAtIndex:0] atTime:kCMTimeZero error:nil]; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-04-10T04:58:23.623

```
AVURLAsset* videoAsset = [[AVURLAsset alloc]initWithURL:@"your video url here..." options:nil]; 
```

添加之后`AVMutableCompositionTrack`。

在此处设置`setPreferredTransform:`您要以相同方向导出的源视频。

```
 // Grab the source track from AVURLAsset for example.
AVAssetTrack *assetVideoTrack = [videoAsset tracksWithMediaType:AVMediaTypeVideo].lastObject;

// Grab the composition video track from AVMutableComposition you already made.
AVMutableCompositionTrack *compositionVideoTrack = [mixComposition tracksWithMediaType:AVMediaTypeVideo].lastObject;

// Apply the original transform.
if (assetVideoTrack && compositionVideoTrack) {
        [compositionVideoTrack setPreferredTransform:assetVideoTrack.preferredTransform];
    } 
```

# java - 查询数据库时出现空指针异常

> ID：16118562
> 
> 赞同：0
> 
> 时间：2013-04-20T09:06:19.830
> 
> 标签：java, database, hibernate, session

我正在尝试从数据库中查询它的休眠项目

```
public class FeedInputParamsDaoImpl implements IFeedInputParamsDao {
 @Autowired
private SessionFactory sessionFactory;

public void setSessionFactory(SessionFactory sessionFactory) {
    this.sessionFactory = sessionFactory;
}

private int BATCH_SIZE = 50;

public Session getSession() {
/*null pointer exception*/Session session = sessionFactory.openSession();
    return session;
}
      @Override
public List<FeedInputParams> getAllFeedInputParamslist (int feedKey) {
    String queryString = "from FeedInputParams as feedInputParams where feedInputParams.feedKey > ?";
    Session session =  getSession();
    Query query = session.createQuery(queryString);
    query.setParameter(0, feedKey);
    List<FeedInputParams> feedInputParamsList = query.list();
    return feedInputParamsList;
}

} 
```

而这个**getAllFeedInputParamslist(int feedKey)**是从方法中调用的

```
 public void readFile()
        throws Exception {  
    FeedInputParamsDaoImpl feedInputParamsDaoImpl=new FeedInputParamsDaoImpl();
    List<FeedInputParams> feedInputParamsList=feedInputParamsDaoImpl.getAllFeedInputParamslist(0);
    System.out.println("feedInputParamsList...."+feedInputParamsList);

} 
```

我收到**空指针异常**

```
java.lang.NullPointerException at com.vxl.appanalytix.dao.impl.FeedInputParamsDaoImpl.getSession(FeedInputParamsDaoImpl.java:28) 
 at com.vxl.appanalytix.dao.impl.FeedInputParamsDaoImpl.getAllFeedInputParamslist(FeedInputParamsD0Impl.java:44) 
at 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T09:09:01.810

SessionFactory 为空 - 由于某种原因，它没有被 spring 自动装配。您对 FeedInputParamsDaoImpl 类有任何注释吗？

# php - 将日期时间舍入到最后一小时

> ID：16118565
> 
> 赞同：23
> 
> 时间：2013-04-20T09:06:46.540
> 
> 标签：php, datetime, rounding

我试图寻找这个，但我找不到我想要做的很好的例子。

我在 MySQL 数据库中得到了 datetime 值，在使用该值时必须向下舍入。

例如，所有这些值：

> 2013-04-20 07:14:42
> 2013-04-20 07:19:51
> 2013-04-20 07:37:26
> 2013-04-20 07:46:28
> 2013-04-20 07:59:44

应四舍五入为：

> 2013-04-20 07:00:00

和

> 2013-04-20 16:25:34

应该：

> 2013-04-20 16:00:00 等...

获取日期值的 PHP 代码：

```
$d = strtotime($row["date"]); 
```

那么，如何舍入日期时间值呢？

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2013-04-20T09:10:07.863

试试这个，

```
$date = "2013-04-20 16:25:34"; 
echo date("Y-m-d H:00:00",strtotime($date)); 
```

**[键盘演示。](http://codepad.viper-7.com/QnIwaw)**

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2014-04-02T10:29:55.567

如果您使用的是 PHP 的 Carbon DateTime 库（您确实应该使用它 - [https://github.com/briannesbitt/Carbon](https://github.com/briannesbitt/Carbon)）

您可以使用轻松实现它

`Carbon::now()->minute(0)->second(0);`

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2015-11-03T18:56:07.823

由于您已经拥有 Unix 时间戳`$d`，因此最有效的方法是仅使用算术而不是日期函数 - 特别是如果您要遍历结果集。

```
$hourTimestamp = $d - ($d % 3600); 
```

模运算符为您提供从时间戳中减去的余数以获得小时时间戳。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-04-20T09:12:04.893

在这种情况下，一个简单的`substr`可以做到：

```
echo substr($date, 0, 13) . ":00:00"; 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-20T09:10:26.517

您可以使用 函数功能[`date`](http://php.net/manual/en/function.date.php)来[`strtotime`](http://www.php.net/manual/en/function.strtotime.php)实现这一点，只需更改您的分秒和秒针

```
 $date = '2013-04-20 07:14:42';
    $newdate = date('Y-m-d H:00:00', strtotime($date));

    echo $newdate; 
```

这将输出

```
2013-04-20 07:00:00 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-04-20T09:11:39.657

`00:00`这通过直接输出分钟和秒而不是写入将日期写入字符串`i:s`：

```
$date = date("Y-m-d H:00:00", $d); 
```

* * *

或者你需要它作为unix时间戳吗？然后切断分钟和秒（总是最后 5 个字节）并将它们替换为`00:00`.

```
$d = strtotime(substr($row["date"], 0, -5)."00:00")); 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-04-20T09:15:29.403

`strtotime()`给你一个 Unix 时间戳，它是自 1970-01-01 00:00:00 以来的秒数。

如果只除以 3600 秒（秒等于 1 小时）并忽略余数（您想要的分钟和秒）怎么办？

```
$d = strtotime($row["date"]);
$rounded_d = intval($d / 3600);
$formatted_rounded_d = date('Y-m-d H:i:s', $rounded_d) 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2016-04-27T08:00:09.080

对于那些关注的人（很久以后！）：Carbon 有一个简单的方法来做到这一点

```
$date = (new Carbon($row['date']))->minute(0)->second(0)->getTimestamp(); 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2021-12-24T14:12:59.110

参考@Dayson 响应，这是使用 Carbon 将日期时间舍入到最后一小时的更好方法

```
$dt = Carbon::create(2012, 1, 31, 15, 32, 45);
echo $dt->startOfHour();  // 2012-01-31 15:00:00 
```

检查Carbon [Doc中的](https://carbon.nesbot.com/docs/#api-humandiff)*修饰符部分*

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2019-02-04T20:03:53.863

我会`setTime()`在这样的函数中使用 DateTime 的方法。

```
<?php

/**
 * @param \DateTime $dateTime
 *
 * @return \DateTime
 */
function roundDownToHour(\DateTime $dateTime)
{
    $dt = $dateTime; // clone

    return $dt->setTime(
        $dateTime->format("H"),
        0,
        0
    );
}

$testDate = date("Y-m-d H:i:s", mktime(9, 59, 59, 1, 30, 2019));
$roundedDownToHour = roundDownToHour(new \DateTime($testDate));

var_dump($testDate); //=> 2019-01-30 9:59:59
var_dump($roundedDownToHour->format("Y-m-d H:i:s")); //=> 2019-01-30 09:00:00 
```

结果如下。

```
// the results
string(19) "2019-01-30 09:59:59"
string(19) "2019-01-30 09:00:00" 
```

* * *

## 回答 #11

> 赞同：-1
> 
> 时间：2020-10-19T14:09:25.640

使用内置 PHP 函数进行舍入时间以考虑日期和时间是很重要的。例如`2020-10-09 23:37:35`需要`2020-10-10 00:00:00`在四舍五入到最接近的小时时变为。

*循环时间到最近的时间*：

```
$time = '2020-10-09 23:37:35';

$time = date("Y-m-d H:i:s", round(strtotime($time) / 3600) * 3600); // 2020-10-10 00:00:00

$time = '2020-10-09 23:15:35';

$time = date("Y-m-d H:i:s", round(strtotime($time) / 3600) * 3600); // 2020-10-09 23:00:00 
```

*舍入到最近的 20 分钟增量*：

```
$time = '2020-10-09 23:15:35';

$time = date("Y-m-d H:i:s", ceil(strtotime($time) / (60*20))*(60*20)); // 2020-10-09 23:20:00

$time = '2020-10-09 23:41:35';

$time = date("Y-m-d H:i:s", ceil(strtotime($time) / (60*20))*(60*20)); // 2020-10-10 00:00:00 
```

如果您需要四舍五入*到最接近的 20 分钟增量*，请更改`ceil`为`floor`例如

```
$time = date("Y-m-d H:i:s", floor(strtotime($time) / (60*20))*(60*20)); // 2020-10-09 23:40:00 
```

如果您需要将时间四舍五入到另一分钟增量，您可以简单地执行以下操作：

```
$time = date("Y-m-d H:i:s", ceil(strtotime($time) / (60*15))*(60*15)); // 2020-10-09 23:45:00 
```

# r - 使用 R 和眼动仪数据创建热图

> ID：16118566
> 
> 赞同：2
> 
> 时间：2013-04-20T09:07:03.820
> 
> 标签：r, csv, ggplot2, heatmap

我有一个由以下数据组成的表

```
frame,X,Y 
```

这是几个眼动追踪分析的结果数据。现在我想使用 R 创建一个热图，如下所示 ![在此处输入图像描述](https://i.stack.imgur.com/jqbi9.jpg)

我尝试了在网上找到的几个脚本，但没有一个给我这个结果。

我能怎么做？

* * *

这里有一些示例数据忽略前两列

```
task,visualization,frame,X,Y
1,b,1,383,221
1,b,1,632,356
1,b,1,947,663
1,b,1,546,206
1,b,1,488,272    
1,b,1,578,752
1,b,1,415,261
1,b,1,693,158
1,b,1,684,528
1,b,1,592,67
1,b,1,393,180
1,b,1,1033,709
1,b,1,1080,739
1,b,1,711,523
1,b,1,1246,49
1,b,1,742,69
1,b,1,601,370
1,b,10,902,684
1,b,10,517,241
1,b,10,583,86
1,b,10,582,754
1,b,10,426,257
1,b,10,575,229
1,b,10,697,150
1,b,10,379,520
1,b,10,390,286
1,b,10,618,396
1,b,10,710,143
1,b,10,383,188
1,b,10,1026,713
1,b,10,1078,625
1,b,10,713,521 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-20T11:50:36.500

你可以很容易地使用`stat_bin2d`from获得这种类型的情节`ggplot2`：

```
library(ggplot2)
ggplot(dat, aes(x = X, y = Y)) + stat_bin2d(bins = 10) 
```

![在此处输入图像描述](https://i.stack.imgur.com/plWaE.png)

正如@RomanLustrik 建议的那样，这可以进行简单的分箱，您还可以执行某种内核平滑。这也可以使用`ggplot2`：

```
ggplot(dat, aes(x = X, y = Y)) + 
 stat_density2d(geom = "tile", aes(fill = ..density..), contour = FALSE) + 
 geom_point() 
```

![在此处输入图像描述](https://i.stack.imgur.com/wNdAH.png) 请注意，这`dat`是您提供的示例数据，将您的数据放入`data.frame`：

```
dat = read.table(textConnection("task,visualization,frame,X,Y
    1,b,1,383,221
    1,b,1,632,356
    1,b,1,947,663
    1,b,1,546,206
    1,b,1,488,272    
    1,b,1,578,752
    1,b,1,415,261
    1,b,1,693,158
    1,b,1,684,528
    1,b,1,592,67
    1,b,1,393,180
    1,b,1,1033,709
    1,b,1,1080,739
    1,b,1,711,523
    1,b,1,1246,49
    1,b,1,742,69
    1,b,1,601,370
    1,b,10,902,684
    1,b,10,517,241
    1,b,10,583,86
    1,b,10,582,754
    1,b,10,426,257
    1,b,10,575,229
    1,b,10,697,150
    1,b,10,379,520
    1,b,10,390,286
    1,b,10,618,396
    1,b,10,710,143
    1,b,10,383,188
    1,b,10,1026,713
    1,b,10,1078,625
    1,b,10,713,521"), header = TRUE, sep = ",") 
```

# java - Java 泛型和类型转换

> ID：16118578
> 
> 赞同：19
> 
> 时间：2013-04-20T09:09:13.010
> 
> 标签：java, oop, generics, casting

我有一个创建错误的容器对象，它将不同 Java 类型的值（字符串、布尔值等 ..）保存在一起

```
public class BadlyCreatedClass {
    public Object get(String property) {
        ...;
    }
}; 
```

我们以这种方式从中提取值

```
String myStr = (String) badlyCreatedObj.get("abc");
Date myDate = (Date) badlyCreatedObj.get("def"); 
```

我被迫使用这个对象编写一些新代码，我试图看看是否有干净的方法来做到这一点。更具体地说，以下哪种方法是首选？

**显式演员表**

```
String myStr = (String) badlyCreatedObj.get("abc")
Date myDate = (Date) badlyCreatedObj.get("def"); 
```

**使用泛型演员表**

```
public <X> X genericGet(String property) {

}

public String getString(String property) { 
return genericGet(property); 
}

public Date getDate(String property) { 
return genericGet(property); 
} 
```

**使用 Class.cast**

```
<T> T get(String property, Class<T> cls) {
    ;
} 
```

我已经解决了几个关于 SO [Java 泛型函数的相关问题：how to return Generic type](https://stackoverflow.com/questions/1959022/java-generic-function-how-to-return-generic-type)，[Java generic return type](https://stackoverflow.com/questions/2669326/java-generic-return-type)他们似乎都说这种类型转换是危险的，虽然我没有看到这三者之间有太大的区别，鉴于这种方法会你比较喜欢 ？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-20T11:16:40.997

通用转换方法导致编译器发出未经检查的警告。未经检查的警告表示强制转换问题在运行时没有（完全）检查，即它可能会成功，即使值不是正确的类型。这可能导致变量保存与其声明的类型不兼容的值，Java 语言规范称为[堆污染的情况](http://docs.oracle.com/javase/specs/jls/se7/html/jls-4.html#jls-4.12.2)的情况。

以下程序演示了这一点：

```
class Holder {
    Object value;

    Holder(Object value) {
        this.value = value;
    }

    <T> T get() {
        return (T) value;
    }
}

class C<T> {
    T value;

    C(Holder h) {
        value = h.get();
    }
}

public class Test {
    public static void main(String [] args) throws IOException {
        Holder holder = new Holder("Hello");
        C<Integer> c = new C<Integer>(holder);
        System.out.println("I just put a String into a variable of type Integer");

        // much later, possibly in a different part of your program
        c.value.longValue(); // throws ClassCastException
    }
} 
```

因此，我强烈建议使用检查演员表。检查普通演员表（您的第一种方法）和反射演员表（您的第三种方法）。但是，反射投射不适用于参数化类型（`List<String>.class`不编译......）。

因此，最简单、最灵活的安全解决方案是普通演员。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-20T09:18:58.613

给出一个快速的答案，而不是深入了解良好的编程实践......

我会使用：

```
private <X> X genericGet(String property) {

}

public String getString(String property) { 
//... checks on property (String specific)...
Object obj = genericGet(property);
//... checks if obj is what is expected and if good return it
return obj; 
}

public Date getDate(String property) { 
//... checks on property (Date specific)...
Object obj = genericGet(property);
//... checks if obj is what is expected and if good return it
return obj
} 
```

注意私有genericGet。通过这种方式，我可以检查 get 属性是否是我正在等待接收并以正确方式处理它的内容。

我可以在 getString 中添加检查取决于属性，以确保答案是 String 对象。

我可以对属性中的 getDate 进行其他检查，以确保它是返回的日期。

ETC...

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-20T09:25:08.450

就个人而言，将许多不同的对象放在一个地方，然后检查您想要返回的内容似乎有点错误。也许您可以将持有人存储在 BadlyCreatedClass 中。

就像是：

```
class Holder {
    private long id;
    private String name;
    private Date dateofBirth;

    //getters and setters
} 
```

然后根据 id 检索，因此不需要强制转换。

你也可以告诉我们你想要做什么。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-20T09:31:22.460

因为所有选项都涉及类型转换，所以它们都以某种方式“不安全”并且可能因`ClassCastExceptions`.

对于经常存储在此对象中的常见类型，我肯定会建议使用辅助方法，例如`getString()`, 。`getDate()`这些方法对所有三个选项都很有用，因为减少了对象用户必须编写的代码。

但是您仍然需要一种从对象接收“不常见”类型的方法。为此，我将使用显式强制转换或类强制转换。这样做的原因是我认为这两种方式是使用最多的方式。即使通用方法调用可以正常工作，我认为方法调用`obj.genericGet<String>("myproperty");`并不是每个 Java 开发人员都知道的。在实践中很少见到。

`getObject()`即使我不喜欢将类型转换移动到对象的用户，个人也会向辅助方法添加一个方法。`getString()`这样做的好处是您将拥有一致的界面，如果我看到类似or的方法，这就是我所期望的`getDate()`。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-20T09:19:20.257

我更喜欢使用通用演员表。为什么？

*   显式演员表总是更难维护。当您阅读代码时，您根本不知道此方法可能返回什么。更重要的是，该方法在运行时被错误使用的概率`ClassCastException`很高，有些会在运行时发生。

*   班级演员表更难以维护。在我看来，您以这种方式创建了一些可能被称为意大利面条代码的东西。

*   当您创建类似的方法`getString`并`getDate`为您的类提供非常清晰的接口时。更重要的是，总是可以获得其他类的对象，`String`因为`Date`您还提供了泛型方法。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-04-20T09:24:34.570

正如您已经提到的，上述所有方法都是危险的，并且可能在运行时导致`ClassCastException`s 。

如果确实有必要，我更喜欢**“通用转换”**方法，因为它使接口变得明确且不言自明（`genericGet`在这种情况下是私有的）。当然，您必须为`class`容器中的每个创建样板代码。所以**'Class.cast'**的优点是你不需要那些样板方法。

结论：如果容器中有明确定义的类数量，我会选择“通用转换”。如果您需要支持无数的课程，我会选择“Class.cast”

更新：**“显式转换”**确实有一个优势——调用者（容器的用户）会收到一个提醒，提示存在类转换风险！

只是一个意见...

# python - 树莓派 Python bus.read_byte

> ID：16118580
> 
> 赞同：2
> 
> 时间：2013-04-20T09:09:36.807
> 
> 标签：python, raspberry-pi, i2c

是否有一个 Python 函数会像 arduino 中的 Wire.available 函数一样响应来获取线上的所有数据，而不必指定要抓取多少字节？

这就是我现在所拥有的，它工作正常，但我必须知道有多少数据从网络中传出，否则会产生意想不到的结果。

```
for i in range(0, 13):
 data += chr(bus.read_byte(address)); 
```

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T04:35:14.290

这不是一个完美的解决方案，但我找到了一种方法来确切地知道有多少字节在路上。

在 Arduino 上，我指定了缓冲区的最大大小（128），添加我的数据，然后将其余部分归零，然后发送整个内容。在 Pi 上，我收到整个缓冲区，然后发生的第一件事就是过滤`\x00`字符。它并不完美，但它现在有效。

```
for i in range(0, 128):
    data += chr(bus.read_byte(address))

print repr(data) 
    #prints the whole string as it is received

data = filter(lambda a: a != '\x00')

print repr(data)
    #prints the string without any '\x00' characters. 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2015-03-31T20:08:48.213

我将 PIGPIO 库用于 raspberrypi 上的 i2c 命令，它的功能更接近有线。

[http://abyz.co.uk/rpi/pigpio/python.html#i2c_read_device](http://abyz.co.uk/rpi/pigpio/python.html#i2c_read_device)

我认为这就是您正在寻找的功能。

# android - 在 Android 中加载带有图像 url 的本地 json 文件

> ID：16118582
> 
> 赞同：0
> 
> 时间：2013-04-20T09:09:44.313
> 
> 标签：android, image-loading, android-async-http

我正在使用从 url 加载图像的源。图像链接存储在 json 文件中，而 json 文件将托管在服务器中。但我希望本地存储的 json 文件可能在资产或可绘制中。我的问题是，如果我使用资产管理器，它必须使用流管理器，并且流管理器不与 url 一起使用，它与加载图像 url 的上下文相关联。如果我将 config_wallpaper_manifest_url 的 url 更改为本地资产 url，即。example.json，同样永远不会加载。什么是可能的解决方案？谢谢。

```
public void loadData (Bundle savedInstanceState) {

    // Check Network State
    if (!NetworkUtil.getNetworkState(this)) {
        final RetryFragment fragment = RetryFragment.getFragmentWithMessage("No connection");
        this.addFragment(fragment, RetryFragment.TAG, true);
        return;
    }

    if (savedInstanceState == null || savedInstanceState.get(KEY_LIST_DATA) == null) {
        final String url = super.getResources().getString(R.string.config_wallpaper_manifest_url);
        if (url != null && URLUtil.isValidUrl(url)) {
            // Add Loading Fragment
            final LoadingFragment fragment = new LoadingFragment();
            this.addFragment(fragment, LoadingFragment.TAG, true);

            // Load Data
            final RestClientHandler handler = new RestClientHandler(this);
            RestClient.get(this, url, handler);
        }

    } else {
        Log.i(TAG, "Restored Instance");
        this.mData = (ArrayList<NodeCategory>) savedInstanceState.get(KEY_LIST_DATA);
        this.mPosition = savedInstanceState.getInt(KEY_LIST_POSITION);
        if (this.mPosition != -1) {
            mIgnoreSelection = true;
        }

        this.configureActionBar();
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T09:23:41.093

JSON 基本上是文本。将其存储在应用程序的内部存储器中。或者在 SQLite 数据库中。看看这个：

[在内部存储器中创建文件夹以保存文件并稍后检索它们](https://stackoverflow.com/questions/8493642/creating-folder-in-internal-memory-to-save-files-and-retrieve-them-later)

# scripting - 监控驱动器。使用 VB 脚本

> ID：16118586
> 
> 赞同：2
> 
> 时间：2013-04-20T09:10:08.347
> 
> 标签：scripting, vbscript, wmi, wmi-query, wmi-service

我想使用 VBScript 监视驱动器的文件更改。我有下面的代码。它适用于`InstanceCreationEvent`和`InstanceDeletionEvent`。但`InstanceModificationEvent`没有发生。从谷歌搜索我知道我们需要使用`CIM_DataFile`而不是`CIM_DirectoryContainsFile`监控`InstanceModificationEvent`。我不确定如何修改代码。任何人都可以帮忙。

仅供参考：一个脚本应该监视驱动器中的所有文件夹和子文件夹。

PS：任何改进代码和性能的建议或其他想法也欢迎。

我的代码：

```
Dim arrFolders 
Dim strComputer 
Dim objWMIService 
Dim strFolder 
Dim strCommand 
Dim i 
Dim strQuery 

strChangeFile = "MonitorFolder_Log.txt"
strMailIDFile = "MonitorFolder_MailIDs.txt"

'Check if the log file exists, if not ceate a new file and exit the script. Restart the script again.
Set oFSO = CreateObject("Scripting.FileSystemObject")     
If not oFSO.FileExists(strChangeFile)  then
    'WScript.Echo "Change Log File Not Found. Creating new file..."
    Set oTxtFile = oFSO.CreateTextFile(strChangeFile)  
    WScript.Echo strChangeFile & " File Created." & vbCrLf & "Please restart the script." & vbCrLf
    WScript.Quit
End If

'Prompt for which drive should be monitored. If not a valid drive, then exit the script.
strDrive = InputBox("Enter the drive to monitor: " & vbCrLf & "E.g.: Input C to monitor C:\ drive.", "Monitor Folder - Oracle", "E")
If strDrive = "" then
    WScript.Echo "Not a valid drive. Terminating the script."
    WScript.Quit
End If

'Append ":" with the drive name.
strDrive = strDrive & ":"

'Read the mail IDs.
Set objFSOMailID = CreateObject("Scripting.FileSystemObject")
Set oTSMailID = objFSOMailID.OpenTextFile(strMailIDFile)
strMailIDsList = oTSMailID.ReadAll
oTSMailID.close
'WScript.Echo strMailIDsList

'Array to store the existing folder paths that should be monitored.
arrFolders = Array()
i = 0

Set FSO = CreateObject("Scripting.FileSystemObject")
ShowSubfolders FSO.GetFolder(strDrive)

Sub ShowSubFolders(Folder)
    For Each Subfolder in Folder.SubFolders
    i = i + 1
        folderPath = "" & Subfolder.Path & ""
    folderPath = Replace(folderPath ,"\","\\\\")
    ReDim Preserve arrFolders(i)
    arrFolders(i) = folderPath
    'Wscript.Echo i & " " & arrFolders(i)
        ShowSubFolders Subfolder
    Next
End Sub 

'Set the first path to be the drive.
arrFolders(0) = strDrive & "\\\\"

'Use WMI query to get the file changes.
strComputer = "." 
Set objWMIService = GetObject("winmgmts:\\" & strComputer & "\root\CIMV2") 
'Loop throught the array of folders setting up the monitor for Each 
i = 0 
For Each strFolder In arrFolders 
   'Create the event sink 
   'WScript.Echo "setup for folder: " & strFolder & vbLf
   strCommand = "Set EventSink" & i & " = WScript.CreateObject" & "(""WbemScripting.SWbemSink"", ""SINK" & i & "_"")" 
   ExecuteGlobal strCommand
   'Setup Notification 
   strQuery = "SELECT * " _
           & "FROM __InstanceOperationEvent " _
           & "WITHIN 1 " _
           & "WHERE Targetinstance ISA 'CIM_DirectoryContainsFile'" _
           & "  AND TargetInstance.GroupComponent = " & "'Win32_Directory.Name=""" & strFolder & """'"
   strCommand = "objWMIservice.ExecNotificationQueryAsync EventSink" & i & ", strQuery"
   ExecuteGlobal strCommand 
   'Create the OnObjectReady Sub 
   strCommand = "Sub SINK" & i & "_OnObjectReady(objObject, " &  "objAsyncContext)" & vbLf _
             & "  'Wscript.Echo objObject.TargetInstance.PartComponent" & vbLf _
             & "  SendNotification(objObject)" & vbLf _
             & "End Sub"
   'WScript.Echo strCommand 
   ExecuteGlobal strCommand 
   i = i + 1 
Next 

'Wait for events.
WScript.Echo "Waiting for events..." 
i = 0 
While (True) 
   Wscript.Sleep(1000) 
Wend

Function SendNotification(objObject)

    strEventType = objObject.Path_.Class
    strPartComp = Split(objObject.TargetInstance.PartComponent, "=")
    strFileName = Replace(strPartComp(1), "\\", "\")

    WScript.Echo strEventType
    WScript.Echo strFileName

    'Some more code to send mail and logs...

End Function 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-20T11:31:27.113

监视整个文件系统以创建文件是不可行的。它会占用系统资源并可能严重影响系统运行。只监视选定的文件夹。以下应该有效：

```
Const Interval = 1

Set monitor = CreateMonitor("C:\foo")
Do
  Set evt = monitor.NextEvent()
  Select Case evt.Path_.Class
    Case "__InstanceCreationEvent"     : SendNotification evt.TargetInstance
    Case "__InstanceModificationEvent" : ...
    Case "__InstanceDeletionEvent"     : ...
  End Select
Loop

Function CreateMonitor(path)
  Set wmi = GetObject("winmgmts://./root/cimv2")
  Set fso = CreateObject("Scripting.FileSystemObject")

  path = Split(fso.GetAbsolutePathName(path), ":")
  drv  = path(0) & ":"
  dir  = Replace(path(1), "\", "\\")
  If Right(dir, 2) <> "\\" Then dir = dir & "\\"

  query = "SELECT * FROM __InstanceOperationEvent" & _
          " WITHIN " & Interval & _
          " WHERE Targetinstance ISA 'CIM_DataFile'" & _
          " AND TargetInstance.Drive='" & drv & "'" & _
          " AND TargetInstance.Path='" & dir & "'"
  Set CreateMonitor = wmi.ExecNotificationQuery(query)
End Function

Sub SendNotification(tgtInst)
  'send notification
End Sub 
```

您应该将不同文件夹的监视器作为单独的进程运行，因为这`NextEvent()`是一个阻塞操作。

# xcode - iPhone 应用程序在尝试播放视频时崩溃

> ID：16118589
> 
> 赞同：0
> 
> 时间：2013-04-20T09:10:24.317
> 
> 标签：xcode, video

我正在尝试获取一个简单的基于视图的应用程序来播放视频，但是它崩溃了，这是我的代码，

```
 - (IBAction)playButton:(id)sender {

   NSString *stringPath = [[NSBundle mainBundle] pathForResource:@"1" ofType:@"mov"];
   NSURL *url = [NSURL fileURLWithPath:stringPath];

    mpc = [[MPMoviePlayerController alloc]initWithContentURL:url];
     [mpc setMovieSourceType:MPMovieSourceTypeFile];

     [[self view]addSubview:mpc.view];

     [mpc setFullscreen:YES];

      [mpc play];
      }
      @end 
```

这是失败时带我进入xcode的地方

```
 //
 //  main.m
 //  video_play
 //
 //  Created by nathaniel harman on 20/04/2013.
 //  Copyright (c) 2013 machupicchumobile. All rights reserved.
 //

 #import <UIKit/UIKit.h>

 #import "VideoPlayAppDelegate.h"

 int main(int argc, char *argv[])
 {
     @autoreleasepool {
    return UIApplicationMain(argc, argv, nil, NSStringFromClass([VideoPlayAppDelegate           class]));
}
 } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-29T09:00:00.943

试试这个，你会发现我用来播放电影或视频的代码。

[http://kiranjasvanee.wordpress.com/2013/09/19/play-video-or-movie-in-iphone/?preview=true&preview_id=3&preview_nonce=cf5d01de8d](http://kiranjasvanee.wordpress.com/2013/09/19/play-video-or-movie-in-iphone/?preview=true&preview_id=3&preview_nonce=cf5d01de8d)

让我在这里实现这段代码，所以可以查看它，

首先，您必须导入 MediaPlayer 头库以使用它的 MPMoviePlayer 播放任何电影或视频。您可以在 .h 或 .m 视图控制器中导入此库 - 取决于您声明 MPMoviePlayerViewController 对象的位置。

库导入：-

```
#import MediaPlayer/MediaPlayer.h 
```

对象声明：-

```
MPMoviePlayerViewController *moviePlayer; 
```

当按下播放电影时，在 .m 文件中实现以下代码：- 下面使用的 Movie_URL 标识符包含视频或电影的 URL。

```
- (IBAction)BtnVideoShowCalled:(id)sender 
{ 
// Put your Navigation and Tabbar related code here. 
Ex :- /* self.navigationController.navigationBarHidden=YES; */ 

//If you wanna play a video from tableview, then assign tag to _btn and add target this function to that _btn. Ex :-
/* 
//Where, record is a object of Messages class.
NSInteger tid = [sender tag];
*/

    NSURL *URL = [NSURL URLWithString:[NSString stringWithFormat:@"%@",Movie_URL]];

    if(URL)
    {
        Class mplayerControllerClass = NSClassFromString(@"MPMoviePlayerViewController");
        if(mplayerControllerClass != nil) {
            moviePlayer = [[MPMoviePlayerViewController alloc] initWithContentURL:URL];
            moviePlayer.wantsFullScreenLayout = YES;
            [moviePlayer shouldAutorotateToInterfaceOrientation:YES];
            if(moviePlayer)
            {
                [self presentMoviePlayerViewControllerAnimated:moviePlayer];
            }
           [movieplayer readyPlayer];
        }
    }

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-20T09:20:14.833

试试这样

```
NSString *audio=[[NSBundle mainBundle]pathForResource:@"1" ofType:@"mov"];
    NSURL *url=[[NSURL alloc]initFileURLWithPath:audio]; 
```

# javascript - JavaScript - 缓存小书签，但始终加载最新版本

> ID：16118597
> 
> 赞同：4
> 
> 时间：2013-04-20T09:11:09.690
> 
> 标签：javascript, browser-cache, bookmarklet

我正在开发一个 JavaScript 小[书签](http://en.wikipedia.org/wiki/Bookmarklet)，它允许用户发送指向网站的链接。如果有新版本可用，是否可以缓存小书签但也可以重新加载它？（也许用htaccess？）

编辑：这是我的书签：

```
javascript:javascript:(function(){new_script=document.createElement('SCRIPT');new_script.src='https://www.example.com/folder/bookmarklet.js?v=1';document.getElementsByTagName('head')[0].appendChild(new_script);new_script.type='text/javascript';})(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T09:13:09.310

小书签的本质是“缓存”与它们无关：它完全存在于浏览器的书签存储中，没有服务器调用（除非您编写一个作为小书签代码的一部分）。

您可以使用 ajax 或 JSONP 加载您的小书签并从您的网站检查版本字符串。

# python - 如何在美丽的汤中仅使用 find_all 显示文本？

> ID：16118598
> 
> 赞同：0
> 
> 时间：2013-04-20T09:11:15.400
> 
> 标签：python, text, python-2.7, beautifulsoup, findall

有一个非常简洁的解决方案可以使用漂亮的汤显示来自 div 的文本，`find`这里 [https://stackoverflow.com/a/8994150/1063287](https://stackoverflow.com/a/8994150/1063287)：

`result = soup.find('div', {'class' :'flagPageTitle'}).text`

我想在以下场景中应用相同的逻辑：

`content = original_content("div","class1 class2")`

如果我将其修改为：

`content = original_content("div","class1 class2").text`

我收到错误：

`AttributeError: 'ResultSet' object has no attribute 'text'`

谁能告诉我如何使用最初显示的相同逻辑，但在我使用上述 find_all 的情况下？（注意我使用的`find_all`是不输入的快捷方式，请参见[此处](http://www.crummy.com/software/BeautifulSoup/bs4/doc/#calling-a-tag-is-like-calling-find-all)）

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-20T10:36:47.090

直接调用元素时使用的是隐含`.find_all()`方法，该方法返回结果集（类似列表的对象）。使用`limit`不会改变返回的内容，只会返回多少。

如果要获取该集合的*第一个*元素，请使用切片：

```
original_content("div","class1 class2", limit=1)[0].text 
```

或明确说明并`.find()`改用：

```
original_content.find("div","class1 class2").text 
```

要获取所有匹配项的文本，您需要遍历结果集。列表理解将是最简单的：

```
[el.text for el in original_content("div","class1 class2")] 
```

# sql - 列在选择列表中无效，因为它不包含在聚合函数或 GROUP BY 子句中

> ID：16118601
> 
> 赞同：0
> 
> 时间：2013-04-20T09:11:37.697
> 
> 标签：sql, sql-server, group-by

我正在尝试选择一组患者及其单位和部门，并且我想按单位名称对结果进行分组，但是此代码不会执行并将错误作为此问题的主题。

```
SELECT TOP (100) PERCENT 
    Pat.PatName AS Name, 
    srvDiv.sgMType AS Perkhidmatan,
    Pat.PatMRank AS Pangkat, 
    Pat.PatMilitaryID AS [No# Tentera],
    unt.untName AS Unit,
    fct.pesStatusCode as StatusCode,
    fct.pesSignedDate AS SignedDate

FROM dbo.FactPES AS fct INNER JOIN 
    dbo.DimPatient AS Pat ON fct.pesPatID = Pat.PatID LEFT OUTER JOIN
    dbo.DimUnit AS unt ON fct.pesUnitID = unt.untID LEFT OUTER JOIN 
    dbo.DimServiceDiv AS srvDiv ON fct.pesServiceDivID = srvDiv.sgID 
GROUP BY unt.untName
HAVING (deas.diDate BETWEEN  
    CONVERT(DATETIME, @FromDate, 102) 
AND 
    CONVERT(DATETIME, @ToDate, 102)) 
```

我认为这是因为 unt.UntName 在我的左连接中，所以我可能无法在连接之外使用它？我有点困惑，因为当我这样说时它可以工作：

```
GROUP BY unt.untName, Pat.PatName, srvDiv.sgMType, 
    Pat.PatMRank, Pat.PatMilitaryID, unt.untName, 
    fct.pesStatusCode, fct.pesSignedDate 
```

任何帮助表示赞赏

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T05:45:51.393

首先，请不要使用`TOP (100) PERCENT`; 连读书都痛。

其次，您的查询不包含聚合函数，例如没有`SUM`或。`COUNT`当您说要“按单位名称分组”时，我怀疑您可能只是想要按单位名称排序的结果。在这种情况下，您需要`ORDER BY`。（其他人关于研究做什么的建议`group by`很受欢迎。）

最后，您可能最终不需要这些`CONVERT`功能，具体取决于您的 DBMS。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-20T09:17:59.590

每当您使用`GROUP BY`- 时，它都应该作为列出现在`SELECT`语句中。如果您不想将其包含在 a 中，`GROUP BY`请将其用作.`AGGREGATE``SELECT`

所以现在在你的情况下`GROUP BY`，你的问题中陈述的第二个将起作用。

阅读本文以了解有关[GROUP BY的更多信息](http://www.w3schools.com/sql/sql_groupby.asp)

# java - 通过 sql-lite 保存数据库属性

> ID：16118604
> 
> 赞同：0
> 
> 时间：2013-04-20T09:12:04.843
> 
> 标签：java, database, sqlite, xml-formatting

在我的程序中，我为用户提供了设计自己的数据库的便利。我已经成功地将表及其值保存在我的类对象中。

现在我想将它保存在 sql lite/创建该数据库的输出 xml 文件。

```
public class Table
{
private ArrayList<Column> columns;
private String NAME;
private static int count=0;
public Table() 
{
    columns = new ArrayList<Column>();
    NAME=new String();

    this.NAME="Table"+count;
    count++;
}

public void AddColumn(Column column)
{
    for(Column c: columns)
    {
       if(c.getname().equals(column.getname())){return;}
    }

    columns.add(column);

}

public void SaveToFile() throws IOException
{

    FileWriter fw = new FileWriter("C:/Users/Ashad/Desktop/text.txt", true);
    BufferedWriter bw = new BufferedWriter(fw);
     bw.write("\r\n");
    bw.write(this.NAME);
     bw.write("\r\n");

for(Column c: columns)
{
 bw.write("\r\n");
        bw.write(c.getname()+"  ");

        bw.write(c.getdatatype()+"  ");

 if(c.getPK()== true)
 {
        bw.write("true"+"  ");

 }    
    else
    {   bw.write("false"+"  ");

    }
if(c.getNN()== true)
{
    bw.write("true"+"   ");

}     
else
    {bw.write("false"+"  "); } 

}
bw.close();
}

public boolean DeleteColumn(String name)
{
    for (Column c : columns)
    {
        if (c.getname().equals(name)) {return columns.remove(c);}
    }
    return false;
}

public void viewColumns()
{
      System.out.append(NAME+"  ");

    for(Column c: columns)
  {
      System.out.append("\n");
      System.out.append(c.getname()+"  ");

      System.out.append( c.getdatatype()+"  ");

if(c.getPK()== true)
{
    System.out.print(true);
}     
else
    System.out.print(false);  
  }
}

public String getNAME() {

    return NAME;
}

}

public class Column
{
private String name;
   private String dataType;
  private boolean PK;
  private boolean NN;

  public Column()
 {
 String name=new String();
 String dataType=new String();  
 boolean PK=false;
 boolean NN=false;
 }  
 public String getname(){return name;}
 public String getdatatype(){return dataType;}
 public boolean getPK(){return PK;}
 public boolean getNN(){return NN;}

 public void setname(String n){name=n;}
 public void setdatatype(Object object){dataType=(String) object;}
 public void setPK(boolean p){PK=p;}
 public void setNN(boolean n){NN=n;}

} 
```

# c - 在 c 中使用 scanf() 获取多行输入

> ID：16118610
> 
> 赞同：0
> 
> 时间：2013-04-20T09:12:36.153
> 
> 标签：c, input, scanf

我正在尝试使用 scanf 获取多行输入，所有行都具有相同的格式示例行：

1, 05:05:04, 1, 1103

我目前的代码只有一行

```
scanf(" %d, %d:%d:%d, %d, %d", int1, int2, int3, int4, int5, int6); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-20T09:18:25.070

你在找这个吗？

```
while (scanf("%d,%d:%d:%d,%d,%d",
           &int1, &int2, &int3, &int4, &int5, &int6) == 6) {
    //use int1, int2, int3, int4, int5, int6
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-20T09:20:13.133

这scanfs 2行：

```
scanf("%d, %d:%d:%d, %d, %d\n%d, %d:%d:%d, %d, %d", &int1, &int2...) 
```

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-04-20T09:19:39.117

您可以尝试使用 for 循环。所以它会是

`for (int i =0; i < NumberOfLines;i++) { scanf(" %d, %d:%d:%d, %d, %d", int1, int2, int3, int4, int5, int6); }`

# ios - 更改按钮标签

> ID：16118617
> 
> 赞同：0
> 
> 时间：2013-04-20T09:13:04.877
> 
> 标签：ios, objective-c, ipad

我是 iOS 应用程序开发的新手。目前我正在开发一个非常简单的应用程序，它在屏幕上显示两个单词，用户选择一个，应用程序只输出你选择的 x。

我创建了两个 plist，并将它们加载到一个数组中，并将它们随机化到数组中。在我看来，我有两个按钮，我希望文字显示在它们上面。但是，我有两个问题.. 1。我希望按钮上的标签在应用程序启动时发生变化。所以用户不必点击按钮或任何东西。2\. 我希望 array_1 中的一个随机单词（从 plist 加载）出现在随机按钮上。button_1 或 button_2 和列表 array_2 相同。

这是我到目前为止所做的。（在论坛的一些帮助下（：）

```
- (IBAction)buttonpressed:(id)sender {

    // Load contents of plist onto array

    NSString *path = [[NSBundle mainBundle] pathForResource:@"wordsOne" ofType:@"plist"];
    NSMutableArray *words = [NSMutableArray arrayWithContentsOfFile:path];

    //shuffle them using Fisher–Yates shuffle algorithm

    for (int i = words.count-1; i>=0; i--) {
        int r = arc4random_uniform(words.count);
        [words exchangeObjectAtIndex:i withObjectAtIndex:r];
    }

    // assign word to the button
    for (int j =0; j<_WordButton.count; j++) {
        UIButton *button = [_WordButton objectAtIndex:j];
        button.titleLabel.text = [words objectAtIndex:j];
    }

} 
```

上面的代码有明显的缺陷，比如它只使用了一个 plist 并且没有在两个按钮上随机显示单词。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-20T09:45:32.903

您可以使用以下代码设置 UIButton 标题：

```
[button setTitle:titleString forState:UIControlStateNormal]; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-20T09:58:28.303

要实现您想要做的事情，您必须为 .xib 文件上的按钮创建一个 IBOutlet。您可以通过使用简单的 Xcode 快捷方式来完成此操作，该快捷方式将创建 IBOutlet 代码并同时为您建立从 .xib 文件到代码的连接：

1.  在 Xcode 中打开 .xib 文件，该文件将使用 Interface Builder 显示一个图形文件。
2.  In the toolbar at the top-right of Xcode is an icon that allows you to toggle through different modes, select the 'Assistant Editor'. The Interface Builder will slide over to share the window with a code file, this should automatically select your ViewController.h
    The toolbar should look like this:
    ![enter image description here](https://i.stack.imgur.com/h2Niz.png)

3.  Insert some curly-brace in your code like so:

`

```
@interface CustomViewController : UIViewController {
// This is where you will control-drag to from the Interface Builder to have it create an IBOutlet to the button for you
}

// Your already set-up IBAction Method
- (IBAction)buttonpressed:(id)sender
@end 
```

`

4.  Control-drag from the button you wish your label to change to the area between the curly-braces in the .h file:
    ![enter image description here](https://i.stack.imgur.com/ikpX2.png)

5.  A new dialog box will appear. Make sure that the settings are as follow:
    a. Connection = IBOutlet
    b. Name = (Whatever you want to call the button, you've used '_wordButton')
    c. Type = UIButton
    d. Storage = WEAK

![enter image description here](https://i.stack.imgur.com/5P8gf.png)

6.  Now in your action method `- (IBAction)buttonpressed:(id)sender` and in your application:didFinishLaunchingWithOptions (to automatically load a word into the label when the application is launched) you can set the button title with the following:

`

```
// Create a string from the word that you pull out of the plist file
NSString *labelWord = ???;

// Set the label of the button
[_wordLabel setTitle:word forState:UIControlStateNormal]; 
```

`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-20T09:53:05.840

像这样做：

```
-(void)viewDidLoad{
[self setnewtitle];

}

-(void)setnewtitle{
NSString *pathone = [[NSBundle mainBundle] pathForResource:@"wordsOne" ofType:@"plist"];
    NSMutableArray *wordsOne = [NSMutableArray arrayWithContentsOfFile:pathone];
NSString *pathtwo = [[NSBundle mainBundle] pathForResource:@"wordsOne" ofType:@"plist"];
    NSMutableArray *wordsTwo = [NSMutableArray arrayWithContentsOfFile:pathtwo];
int words = "the number of objects(words) in your plist";
int randombutton = arc4random() % 2;
int randomplist = arc4random() % 2;
int randomWord = arc4random() % words;

if (randombutton==0){
if (randomplist==0){
[[_WordButton objectatIndex:randombutton] setTitle:[wordsOne objectatIndex:randomWord]];
} else {
[[_WordButton objectatIndex:randombutton] setTitle:[wordsTwo objectatIndex:randomWord]];

}
}else {
if (randomplist==0){
[[_WordButton objectatIndex:randombutton] setTitle:[wordsOne objectatIndex:randomWord]];
} else {
[[_WordButton objectatIndex:randombutton] setTitle:[wordsTwo objectatIndex:randomWord]];

}
}

} 
```

请确保数组中包含的按钮已初始化和分配，如果您有任何问题，请随时提问

# python - 两个列表中的第一个公共元素

> ID：16118621
> 
> 赞同：12
> 
> 时间：2013-04-20T09:13:31.827
> 
> 标签：python

```
x = [8,2,3,4,5]
y = [6,3,7,2,1] 
```

如何以简洁优雅的方式找出两个列表（在本例中为“2”）中的第一个公共元素？任何列表都可以是空的，也可以没有公共元素——在这种情况下 None 就可以了。

我需要这个来向不熟悉它的人展示 python，所以越简单越好。

UPD：顺序对我的目的并不重要，但假设我正在寻找 x 中也出现在 y 中的第一个元素。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-20T09:16:27.103

这应该是直截了当的~~几乎和它一样有效~~（更有效的解决方案检查[Ashwini Chaudharys 的答案](https://stackoverflow.com/a/16118787/1149736)和最有效的检查[jamylaks 的答案](https://stackoverflow.com/a/16118989/1149736)和评论）：

```
result = None
# Go trough one array
for i in x:

    # The element repeats in the other list...
    if i in y:

        # Store the result and break the loop
        result = i
        break 
```

或者更优雅的事件是使用 PEP 8 封装相同的功能来运行[[，如编码风格约定](http://www.python.org/dev/peps/pep-0008/#documentation-strings)]：

```
def get_first_common_element(x,y):
    ''' Fetches first element from x that is common for both lists
        or return None if no such an element is found.
    '''
    for i in x:
        if i in y:
            return i

    # In case no common element found, you could trigger Exception
    # Or if no common element is _valid_ and common state of your application
    # you could simply return None and test return value
    # raise Exception('No common element found')
    return None 
```

如果你想要所有常见的元素，你可以这样做：

```
>>> [i for i in x if i in y]
[1, 2, 3] 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-04-20T09:57:26.607

排序不是最快的方法，它可以在 O(N) 时间内用一个集合（散列图）完成。

```
>>> x = [8,2,3,4,5]
>>> y = [6,3,7,2,1]
>>> set_y = set(y)
>>> next((a for a in x if a in set_y), None)
2 
```

或者：

```
next(ifilter(set(y).__contains__, x), None) 
```

这就是它的作用：

```
>>> def foo(x, y):
        seen = set(y)
        for item in x:
            if item in seen:
                return item
        else:
            return None

>>> foo(x, y)
2 
```

为了显示不同方法（朴素方法、二分搜索和集合）之间的时间差异，这里有一些时间。我不得不这样做来反驳那些认为二分搜索更快的人的惊人数量......：

```
from itertools import ifilter
from bisect import bisect_left

a = [1, 2, 3, 9, 1, 1] * 100000
b = [44, 11, 23, 9, 10, 99] * 10000

c = [1, 7, 2, 4, 1, 9, 9, 2] * 1000000 # repeats early
d = [7, 6, 11, 13, 19, 10, 19] * 1000000

e = range(50000) 
f = range(40000, 90000) # repeats in the middle

g = [1] * 10000000 # no repeats at all
h = [2] * 10000000

from random import randrange
i = [randrange(10000000) for _ in xrange(5000000)] # some randoms
j = [randrange(10000000) for _ in xrange(5000000)]

def common_set(x, y, ifilter=ifilter, set=set, next=next):
    return next(ifilter(set(y).__contains__, x), None)
    pass

def common_b_sort(x, y, bisect=bisect_left, sorted=sorted, min=min, len=len):
    sorted_y = sorted(y)
    for a in x:
        if a == sorted_y[min(bisect_left(sorted_y, a),len(sorted_y)-1)]:
            return a
    else:
        return None

def common_naive(x, y):
    for a in x:
        for b in y:
            if a == b: return a
    else:
        return None

from timeit import timeit
from itertools import repeat
import threading, thread

print 'running tests - time limit of 20 seconds'

for x, y in [('a', 'b'), ('c', 'd'), ('e', 'f'), ('g', 'h'), ('i', 'j')]:
    for func in ('common_set', 'common_b_sort', 'common_naive'):        
        try:
            timer = threading.Timer(20, thread.interrupt_main)   # 20 second time limit
            timer.start()
            res = timeit(stmt="print '[', {0}({1}, {2}), ".format(func, x, y),
                         setup='from __main__ import common_set, common_b_sort, common_naive, {0}, {1}'.format(x, y),
                         number=1)
        except:
            res = "Too long!!"
        finally:
            print '] Function: {0}, {1}, {2}. Time: {3}'.format(func, x, y, res)
            timer.cancel() 
```

测试数据为：

```
a = [1, 2, 3, 9, 1, 1] * 100000
b = [44, 11, 23, 9, 10, 99] * 10000

c = [1, 7, 2, 4, 1, 9, 9, 2] * 1000000 # repeats early
d = [7, 6, 11, 13, 19, 10, 19] * 1000000

e = range(50000) 
f = range(40000, 90000) # repeats in the middle

g = [1] * 10000000 # no repeats at all
h = [2] * 10000000

from random import randrange
i = [randrange(10000000) for _ in xrange(5000000)] # some randoms
j = [randrange(10000000) for _ in xrange(5000000)] 
```

结果：

```
running tests - time limit of 20 seconds
[ 9 ] Function: common_set, a, b. Time: 0.00569520707241
[ 9 ] Function: common_b_sort, a, b. Time: 0.0182240340602
[ 9 ] Function: common_naive, a, b. Time: 0.00978832505249
[ 7 ] Function: common_set, c, d. Time: 0.249175872911
[ 7 ] Function: common_b_sort, c, d. Time: 1.86735751332
[ 7 ] Function: common_naive, c, d. Time: 0.264309220865
[ 40000 ] Function: common_set, e, f. Time: 0.00966861710078
[ 40000 ] Function: common_b_sort, e, f. Time: 0.0505980508696
[ ] Function: common_naive, e, f. Time: Too long!!
[ None ] Function: common_set, g, h. Time: 1.11300018578
[ None ] Function: common_b_sort, g, h. Time: 14.9472068377
[ ] Function: common_naive, g, h. Time: Too long!!
[ 5411743 ] Function: common_set, i, j. Time: 1.88894859542
[ 5411743 ] Function: common_b_sort, i, j. Time: 6.28617268396
[ 5411743 ] Function: common_naive, i, j. Time: 1.11231867458 
```

这让您了解它将如何扩展更大的输入，O(N) vs O(N log N) vs O(N^2)

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-04-20T10:27:23.313

一个衬垫，`next`用于从生成器中取出第一个项目：

```
x = [8,2,3,4,5]
y = [6,3,7,2,1]

first = next((a for a in x if a in y), None) 
```

或者更有效，因为`set.__contains__`它比 快`list.__contains__`：

```
set_y = set(y)
first = next((a for a in x if a in set_y), None) 
```

或者更有效但仍然在一行中（不要这样做）：

```
first = next((lambda set_y: a for a in x if a in set_y)(set(y)), None) 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-04-20T09:36:09.100

使用带有的`for`循环`in`会导致`O(N^2)`复杂度，但您可以`y`在此处排序并使用二进制搜索将时间复杂度提高到`O(NlogN)`.

```
def binary_search(lis,num):
    low=0
    high=len(lis)-1
    ret=-1  #return -1 if item is not found
    while low<=high:
        mid=(low+high)//2
        if num<lis[mid]:
            high=mid-1
        elif num>lis[mid]:
            low=mid+1
        else:
            ret=mid
            break

    return ret

x = [8,2,3,4,5]
y = [6,3,7,2,1]
y.sort()

for z in x:
    ind=binary_search(y,z)
    if ind!=-1
        print z
        break 
```

输出： `2`

使用该`bisect`模块执行与上述相同的操作：

```
import bisect

x = [8,2,3,4,5]
y = [6,3,7,2,1]
y.sort()

for z in x:
    ind=bisect.bisect(y,z)-1  #or use `ind=min(bisect.bisect_left(y, z), len(y) - 1)`
    if ind!=-1 and y[ind] ==z:
        print z      #prints 2
        break 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2013-04-20T10:03:15.540

我假设你想教这个人 Python，而不仅仅是编程。因此，我会毫不犹豫地使用`zip`丑陋的循环变量来代替；它是 Python 中非常有用的部分，不难解释。

```
def first_common(x, y):
    common = set(x) & set(y)
    for current_x, current_y in zip(x, y):
        if current_x in common:
            return current_x
        elif current_y in common:
            return current_y

print first_common([8,2,3,4,5], [6,3,7,2,1]) 
```

如果您真的不想使用`zip`，以下是如何在没有的情况下使用：

```
def first_common2(x, y):
    common = set(x) & set(y)
    for i in xrange(min(len(x), len(y))):
        if x[i] in common:
            return x[i]
        elif y[i] in common:
            return y[i] 
```

对于那些感兴趣的人，这就是它如何扩展到任意数量的序列：

```
def first_common3(*seqs):
    common = set.intersection(*[set(seq) for seq in seqs])
    for current_elements in zip(*seqs):
        for element in current_elements:
            if element in common:
                return element 
```

最后，请注意，与其他一些解决方案相比，如果第一个公共元素首先出现在第二个列表中，这也可以正常工作。

我刚刚注意到您的更新，这提供了一个更简单的解决方案：

```
def first_common4(x, y):
    ys = set(y) # We don't want this to be recreated for each element in x
    for element in x:
        if element in ys:
            return element 
```

以上可以说比生成器表达式更具可读性。

太糟糕了，没有内置的有序集。这将是一个更优雅的解决方案。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-04-20T09:40:47.887

This one uses sets. It returns the first common element or None if no common element.

```
def findcommon(x,y):
    common = None
    for i in range(0,max(len(x),len(y))):
        common = set(x[0:i]).intersection(set(y[0:i]))
        if common: break
    return list(common)[0] if common else None 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-04-20T10:37:18.267

```
def first_common_element(x,y):
    common = set(x).intersection(set(y))
    if common:
        return x[min([x.index(i)for i in common])] 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2013-04-20T09:18:49.603

使用 for 循环似乎最容易向新人解释。

```
for number1 in x:
    for number2 in y:
        if number1 == number2:
            print number1, number2
            print x.index(number1), y.index(number2)
            exit(0)
print "No common numbers found." 
```

NB 未测试，只是在我脑海中。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2019-08-05T15:40:09.377

只是为了好玩（可能效率不高），另一个版本使用`itertools`：

```
from itertools import dropwhile, product
from operator import __ne__

def accept_pair(f):
    "Make a version of f that takes a pair instead of 2 arguments."
    def accepting_pair(pair):
        return f(*pair)
    return accepting_pair

def get_first_common(x, y):
    try:
        # I think this *_ unpacking syntax works only in Python 3
        ((first_common, _), *_) = dropwhile(
            accept_pair(__ne__),
            product(x, y))
    except ValueError:
        return None
    return first_common

x = [8, 2, 3, 4, 5]
y = [6, 3, 7, 2, 1]
print(get_first_common(x, y))  # 2
y = [6, 7, 1]
print(get_first_common(x, y))  # None 
```

`lambda pair: pair[0] != pair[1]`使用它代替.更简单，但没有那么有趣`accept_pair(__ne__)`。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2013-04-20T09:35:52.930

使用 set - 这是任意数量列表的通用解决方案：

```
def first_common(*lsts):
    common = reduce(lambda c, l: c & set(l), lsts[1:], set(lsts[0]))
    if not common:
        return None
    firsts = [min(lst.index(el) for el in common) for lst in lsts]
    index_in_list = min(firsts)
    trgt_lst_index = firsts.index(index_in_list)
    return lsts[trgt_lst_index][index_in_list] 
```

事后的想法 - 不是一个有效的解决方案，这个减少了多余的开销

```
def first_common(*lsts):
    common = reduce(lambda c, l: c & set(l), lsts[1:], set(lsts[0]))
    if not common:
        return None
    for lsts_slice in itertools.izip_longest(*lsts):
        slice_intersection = common.intersection(lsts_slice)
        if slice_intersection:
            return slice_intersection.pop() 
```

# c++ - 使用 MinGW 构建 wxwidget 时无法清理

> ID：16118623
> 
> 赞同：2
> 
> 时间：2013-04-20T09:14:34.503
> 
> 标签：c++, user-interface, mingw, wxwidgets

使用 MinGW 清理 wxwidget 时出现问题。最后一个错误是这样的：

```
make (e=2):system cannot find the file specified.
mingw32-make : *** [clean] error 2 
```

并且似乎所有错误都与我在上面发布的错误相同，并且可以从清洁过程开始时看到错误（在输入 mingw32 clean 指令之后）。

你知道如何解决这个问题吗？

我已经按照 wxwidgets wiki 和任何其他解释安装方式的 wiki 中提到的每个步骤进行操作。当然，我没有安装 MSYS 或 wiki 中提到的任何东西，只安装了 minGW（和 Code::Blocks，但它们都是单独安装的）。

顺便说一句，我使用的是最新的稳定 minGW (3.8x)，我遇到问题的 wxwidgets 版本是 2.9.4。

任何帮助，将不胜感激。对不起，我的英语不好 ：）

# postgresql - 从 Postgres 中的现有函数创建一个新函数？

> ID：16118624
> 
> 赞同：0
> 
> 时间：2013-04-20T09:14:37.117
> 
> 标签：postgresql, pgadmin, pg-dump

我`function_1()`在 Postgres 中创建了一个函数。
现在我想创建另一个类似`function_2()`的功能并复制`function_1()`.

任何 Postgres 命令行都可以做到这一点？

到目前为止我只在命令行中使用了copy&paste的方法来创建`function_2()`（粘贴后需要将函数名改为“function_2”）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-20T10:13:34.263

`pg_dump`函数定义，或者使用`pg_get_functiondef`函数获取函数定义。修改它取决于你。

如果您尝试以编程方式创建函数，则最好使用 PL/PgSQL 的`EXECUTE`命令和`format`创建动态函数的函数。

需要这样做是很不寻常的，这表明您可能正在做一些更容易以另一种方式完成的事情。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-20T12:04:12.187

如果您使用的是 GUI [**pgAdmin**](http://pgadmin.org/) *，您可以简单地在对象浏览器中选择函数并在SQL 编辑器*窗口中打开反向工程 SQL 脚本。

选项中有一个专门的项目来自动化它：

选项 - 查询工具 - 查询编辑器 -**将 SQL 从主窗口复制到查询工具**

# maven - 如何使用 Maven 为 restlet 添加 javadocs？

> ID：16118629
> 
> 赞同：0
> 
> 时间：2013-04-20T09:15:42.340
> 
> 标签：maven, restlet-2.0

我使用 m2eclipse 插件创建了一个 maven 项目，我可以通过以下代码导入依赖项，

```
<repositories>
    <repository>
        <id>maven-restlet</id>
        <name>Public online Restlet repository</name>
        <url>http://maven.restlet.org</url>
    </repository>
</repositories>

<dependencies>
    <dependency>
        <groupId>junit</groupId>
        <artifactId>junit</artifactId>
        <version>3.8.1</version>
        <scope>test</scope> 
    </dependency>
<dependency>  
   <groupId>org.restlet.jse</groupId>  
   <artifactId>org.restlet</artifactId>  
   <version>2.1.2</version>  
</dependency> 
```

但是，我想**为下载的依赖项配置 javadocs，**以便我可以在工作时检查文档。我如何实现目标？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T06:14:39.460

设置好 pom.xml 后，**右键单击您的项目 -> Maven -> 下载 JavaDoc**。

# html - Opera 12 不隐藏带有边框半径的内容

> ID：16118630
> 
> 赞同：1
> 
> 时间：2013-04-20T09:15:47.187
> 
> 标签：html, css

也许我太愚蠢了，但我不明白为什么 Opera 12 没有所需的行为。我创建了一个最小样本：

```
 <div id="outer" style="width: 500px; height: 500px; border: 1px solid black; border-radius: 100px; overflow: hidden;">
        <div id="inner" style="width: 500px; height: 500px; background-color: red;">
        </div>
    </div> 
```

外部容器具有边界半径。必须删除与外部 div 重叠的内部 div 中的所有内容。这是通过“溢出：隐藏”完成的。

这在 Firefox、Internet Explorer、Chrome 和 Safari 中完美运行。唯一不这样做的浏览器是 Opera。我测试了 Opera 11 和 12。

有任何想法吗？

# php - Textarea 未在 php 中显示。什么是错误？

> ID：16118643
> 
> 赞同：0
> 
> 时间：2013-04-20T09:17:26.650
> 
> 标签：php, html, mysql

我有以下脚本来打印一个文本区域和一些文本。加载页面时，即使 while 条件为真，textarea 也不会出现。可能是什么问题呢？

```
$seq_query = "SELECT * FROM `mcsm`.`conseq_human` WHERE `MCSM_Id`='$mcsm_id';";
$seq_result = mysql_query($seq_query);

print '<table border="0" align="left" style="margin-left:207px"><tr><th align="left">Conserved sequence</th></tr>';

if(!$conseq = mysql_fetch_array($seq_result))
{
    print "<tr><td><p>Not sufficient information yet.</p></td></tr></table>";
}
else
{
    while($conseq = mysql_fetch_array($seq_result))
    {
        print "<tr><td><textarea name='seq_textarea' cols='100' rows=''>".$conseq['ConSequence']."</textarea></td></tr>
        <tr><td>Based on MSA of ".$conseq['MSA_No_of_Seq']." sequences from <a href='results1.php?category=".$conseq['FamilyName']."' target='_self'>".$conseq['FamilyName']."</a> family.</td></tr></table>";
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-20T09:23:18.363

尝试这个

```
$seq_query = "SELECT * FROM `mcsm`.`conseq_human` WHERE `MCSM_Id`='$mcsm_id';";
$seq_result = mysql_query($seq_query);
print '<table border="0" align="left" style="margin-left:207px"><tr><th align="left">Conserved sequence</th></tr>';
if(mysql_num_rows($seq_result)>0)
{
    while($conseq = mysql_fetch_array($seq_result))
   {
    print "<tr><td><textarea name='seq_textarea' cols='100'        rows=''>".$conseq['ConSequence']."</textarea></td></tr>
    <tr><td>Based on MSA of ".$conseq['MSA_No_of_Seq']." sequences from <a href='results1.php?category=".$conseq['FamilyName']."' target='_self'>".$conseq['FamilyName']."</a> family.</td></tr></table>";
   }
}
else{
print "<tr><td><p>Not sufficient information yet.</p></td></tr></table>";
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-20T10:18:34.467

您正在`</table>`为每次`while`迭代打印。试试这个：

```
$seq_query = "SELECT * FROM `mcsm`.`conseq_human` WHERE `MCSM_Id`='$mcsm_id';";
$seq_result = mysql_query($seq_query);
if (!$seq_result) {
    die('Invalid query: ' . mysql_error());
}
else{
    print '<table border="0" align="left" style="margin-left:207px"><tr><th align="left">Conserved sequence</th></tr>';
    if(mysql_num_rows($seq_result)==0)
    {
        print "<tr><td><p>Not sufficient information yet.</p></td></tr></table>";
    }
    else
    {
        while($conseq = mysql_fetch_array($seq_result))
        {
            print "<tr><td><textarea name='seq_textarea' cols='100' rows=''>".$conseq['ConSequence']."</textarea></td></tr>
                   <tr><td>Based on MSA of ".$conseq['MSA_No_of_Seq']." sequences from <a href='results1.php?category=".$conseq['FamilyName']."' target='_self'>".$conseq['FamilyName']."</a> family.</td></tr>";
        }
        echo '</table>';
    }
} 
```

# linux - 用较短的交换 unix 编译器标志

> ID：16118646
> 
> 赞同：0
> 
> 时间：2013-04-20T09:18:00.267
> 
> 标签：linux, unix, gcc, compilation, flags

我一直在 linux 中运行 ns3 sumulations，每次编译时我都必须输入

```
g++ -Wall -o simulacija simulacija.cc -DNS3_ASSERT_ENABLE -DNS3_LOG_ENABLE `pkg-config --libs --cflags
libns3.16-core-debug libns3.16-network-debug libns3.16-applications-debug libns3.16-internet-debug
libns3.16-point-to-point-debug libns3.16-point-to-point-layout-debug libns3.16-csma-debug
libns3.16-csma-layout-debug libns3.16-topology-read-debug libns3.16-wifi-debug` 
```

有没有办法将标志缩短为例如：

```
g++ -Wall simulacija.cc -o simulacija -my_params 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T09:22:01.587

您可以创建一个`myparams.sh`输出参数的 shell 脚本：

```
#!/bin/sh
echo -n "-DNS3_ASSERT_ENABLE -DNS3_LOG_ENABLE"
pkg-config --libs --cflags libns3.16-core-debug [...] 
```

现在你可以运行

```
g++ -Wall simulacija.cc -o simulacija `./myparams.sh` 
```

（别忘了`chmod +x myparams.sh`）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-20T10:58:06.857

GCC 编译器支持在`@`文件中嵌入一系列参数的表示法。阅读[GCC 整体选项](http://gcc.gnu.org/onlinedocs/gcc/Overall-Options.html)页面的接近尾声。

所以你可以在一些文件`params.args`中加入以下几行

```
-Wall
-I /usr/local
-DNS3_ASSERT_ENABLE 
-DNS3_LOG_ENABLE
-O 
```

并调用

```
g++ @params.args  simulacija.cc -o simulacija 
```

你可以有一个`Makefile`规则来构建它`params.args` （例如用`pkg-config`等......）

实际上，是时候学习如何使用[GNU make](http://www.gnu.org/software/make/)了。

`@`请注意，其他一些编译器（如 GCC 处理它）不理解该选项。

# reflection - Groovy：如何获取在基类中声明的属性

> ID：16118648
> 
> 赞同：6
> 
> 时间：2013-04-20T09:18:16.327
> 
> 标签：reflection, properties, groovy

在下面的代码中，我需要`Child`类（即`foo, bar`）中可用的所有属性。我对 groovy 添加的所有其他属性不感兴趣。

```
class Parent {def foo}
class Child extends Parent {def bar} 
```

到目前为止，这些都没有得到结果：

```
println Child.fields
println Child.properties.each{k,v->println "$k -> $v"}
println Child.declaredFields.findAll { !it.synthetic }.collect {it.name}
println Child.methods.findAll {it.name.startsWith("get")}.collect {it.name} 
```

我试图找出一些直接的方法来给我这个。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-21T18:46:54.510

这将为您提供所需的：

```
assert ['foo', 'class', 'bar'] == B.metaClass.properties*.name 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-20T12:02:14.523

检查实例呢？另外，我错过`extends`了`Child`

```
class A { def foo }
class B extends A { def bar }

b = new B(foo: 'foo', bar: 'bar')

assert b.properties == [foo: 'foo', class: B, bar: 'bar'] 
```

# php - file_get_contents 失败时如何跳过代码？

> ID：16118658
> 
> 赞同：1
> 
> 时间：2013-04-20T09:19:18.817
> 
> 标签：php

当我使用如下的有效 URL 时，`file_get_contents`将返回 html 代码

```
$html = file_get_contents("http://www.google.com/"); 
```

但如果 URL 无效：

```
$html = file_get_contents("http://www.go1235ogle.com/"); //Invalid URL. This line give Error Message 
```

我的代码将输出一条错误消息`Notice: Trying to get property of non-object`

如果`file_get_contents`无法打开给定的 URL，我想隐藏它输出的错误消息并用`if else`语句跳过下面的代码。

```
if (FALSE === $html) 
{
  //skip the code in here ?
} 
```

但上面的代码没有帮助。你能告诉我如何纠正这个问题吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-20T09:25:56.847

您可以通过添加 @ 来隐藏错误

```
$html = @file_get_contents("http://www.google.com/");
if ($html === FALSE){
  // Error
}
else {
  // No errors
} 
```

来源：[https ://stackoverflow.com/a/272377/1907875](https://stackoverflow.com/a/272377/1907875)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-20T09:25:44.017

```
if (FALSE === $html) 
{
  // TODO: handle the case when file_get_contents fails
} else {
  // TODO: handle the case when file_get_contents succeeds
} 
```

要摆脱，要么通过关闭（在生产环境中推荐）`Notice: Trying to get property of non-object`完全关闭输出错误消息，要么设置为较低的级别。[`display_errors`](http://www.php.net/manual/en/errorfunc.configuration.php#ini.display-errors)[`error_reporting`](http://www.php.net/manual/en/errorfunc.configuration.php#ini.error-reporting)

但是，您发布的代码不应生成`Notice: Trying to get property of non-object`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-20T09:24:49.780

你要执行代码，除非值为false，所以把代码放在一个`if (false !== $html)`块中

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-20T09:35:43.400

该行不会产生错误，您需要检查其余代码，因为您可能`$html`稍后会使用。

# html - 图像在html中保持相同的位置

> ID：16118666
> 
> 赞同：1
> 
> 时间：2013-04-20T09:20:00.220
> 
> 标签：html, image, position

我正在处理一个基本的 html 页面，但我仍在学习 html。无论如何，我的页面上有 2 张图片放在我想要的位置，但问题是，如果你调整网页/浏览器的大小，图片不再处于正确的位置。或者是因为我给了它一个带有像素的特定位置，但无论浏览器窗口有多大，我都希望它保持在同一个位置。

如果你理解我。

我当前的代码：

```
<div style="position: absolute; left: 590px; top: 320px;">
<img src="map.png" width="215" height="202">
</div> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-20T09:24:07.587

您必须使用百分比，例如：

**HTML**

```
<img class="imageEl" src="folder-image-transp.png" width="215" height="202"> 
```

**CSS**

```
img.imageEl{
   position:absolute;
   left: 50%;
   top: 50%;
} 
```

如果您希望元素保持在屏幕中间，您还必须应用与图像一半一样大的边距。例子：

```
img.imageEl{
   position:absolute;
   left: 50%;
   top: 50%;
   margin-left: -(Half of image width)px
   margin-top:  -(Half of image height)px
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-20T09:38:15.673

在这种情况下，您应该使用跨越您的内容的容器元素。例如

```
<div id="wrap">
 <img src='' alt=''/>
</div> 
```

现在将您的#wrap 动态定位，并将您的 img 绝对定位在包装中。

```
#wrap {
  position: relative;
  width: 90%;
  max-width: 960px;
  margin: 0 auto;
 }

 #wrap img {
   position: absolute;
   top: abc;
   left: abc;
 } 
```

通过这种方式，您可以确保您的设计保持响应性，但也可以保持您对网站的想法。

玩得开心:)

# linux - 嵌入式 Linux poll() 不断返回

> ID：16118668
> 
> 赞同：3
> 
> 时间：2013-04-20T09:20:14.337
> 
> 标签：linux, embedded-linux

我有一个特别的问题。当我知道没有什么可读的时候，民意调查不断返回。

所以设置如下，我有 2 个文件描述符，它们构成轮询监视的 fd 集的一部分。一种是用于引脚从高到低的变化 (GPIO)。另一个用于代理输入。代理输入出现问题。

处理顺序为：启动主函数；然后它将轮询；将数据写入代理；民意调查将中断；接受数据；通过 SPI 发送数据；通过将 GPIO 拉低来接收从设备，想要发送 ack 的信号；Poll() 感知到这种下降并做出反应；无限波林 :(

如果我在 Poll 功能上没有超时，则程序运行良好。我在投票中包含超时的那一刻。民意调查不断返回。不知道我在这里做错了什么。

```
 while(1)
         {
            memset((void*)fdset, 0, sizeof(fdset));
            fdset[0].fd = gpio_fd;
            fdset[0].events = POLLPRI; // POLLPRI - There is urgent data to read 

            fdset[1].fd = proxy_rx;
            fdset[1].events = POLLIN; // POLLIN   - There is data to read
            rc = poll(fdset, nfds, 1000);//POLL_TIMEOUT);

            if (rc < 0)     // Error
            {
                    printf("\npoll() failed/Interrupted!\n");
            }
            else if (rc == 0)       // Timeout occurred
            {
                  printf(" poll() timeout\n");
            }

            else {
                   if (fdset[1].revents & POLLIN)
                   {
                     printf("fdset[1].revents & POLLIN\n");
                    if( (resultR =read(fdset[1].fd,command_buf,10)<0) {                                   
                                    printf("Failed to read Data\n");

                            }
                    if (fdset[0].revents & POLLPRI)
                            //if( (gpio_fd != -1) && (FD_ISSET(gpio_fd, &err)))
                    {
                         lseek(fdset[0].fd, 0, SEEK_SET); // Read from the start of the file
                            len = read(fdset[0].fd, reader, 64);

                     } 
```

这就是我的代码的要点，抱歉不整洁，这个界面有点习惯了。

我也使用过 GDB，在调试时，我发现 GPIO 描述符设置为 revents = 0x10，这意味着发生了错误并且也发生了 POLPRI。

[poll(2) 不会清空事件队列](https://stackoverflow.com/questions/3021146/poll2-doesnt-empty-the-event-queue) 在上面的链接中，类似的问题得到了解决。但是当我得到 POLLIN 时，我确实一直在阅读。令人惊讶的是，这个问题仅在我包含超时时才会出现，如果我将轮询超时替换为 -1，它会完美运行。

请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T10:45:14.887

当`poll`失败（返回-1）时，你应该做一些事情`errno`，也许通过`perror`; 并且您的`nfds`（的第二个参数`poll`）没有设置，但它应该是常数 2。

可能 GCC 编译器会给出一个警告，至少在启用所有警告的情况下 ( `-Wall`)，关于`nfds`未设置。

^(（我猜`nfds`未初始化可能是一些“随机”大值......所以内核可能正在轮询其他“随机”文件描述符，那些在你的 `fdset` 后索引2......）)

顺便说一句，你可以`strace`你的程序。而且使用`fdset`名称有点混乱（可以参考`select(2)`）。

# c - ORA-24811: 写入 LOB 时，提供的数据少于指示的数据

> ID：16118674
> 
> 赞同：1
> 
> 时间：2013-04-20T09:20:57.103
> 
> 标签：c, oracle, clob, lob, embedded-sql

每当我运行我的 Pro*C 代码时，它使用 CLOB 将一个大缓冲区插入到表中。

ORA-24811：写入 LOB 时，提供的数据少于指示的数据。

代码如下

```
OCIClobLocator *lob;  
...  
EXEC SQL insert into TAB (MSG,STATUS ,ERROR_DESC ,ACCESS_DATE   )  
       values   (empty_clob(),:status,:error_desc,:sys_date_time);  
    /* Allocate and Initialize the Locator: */  
EXEC SQL ALLOCATE :lob;  
printf("CLOB Allocated\n");  
EXEC SQL SELECT MSG INTO :lob  
      FROM TAB WHERE STATUS = :status FOR UPDATE;  

/***opening the CLOB***/  
EXEC SQL LOB OPEN :lob READ WRITE;  
/*** writing to clob ***/  
printf("messlen:%d, actual string length:%d\n",messlen,strlen(buffer));  
EXEC SQL LOB WRITE ONE :messlen FROM :buffer INTO :lob;  
SYS_CHECK_SQL_ERROR 
```

输出

```
 CLOB Allocated  
    messlen:6348, actual string length:6348  
    ***** ERROR sqlca=|-24811|***** 
```

缓冲区有一个很大的 xml 文件。谁能解释我错过了什么？

# php - Symfony2 从演示包转移到生产

> ID：16118682
> 
> 赞同：0
> 
> 时间：2013-04-20T09:22:06.363
> 
> 标签：php, symfony

我正在彻底了解 Symfony 2 的[快速](http://symfony.com/doc/current/quick_tour/the_big_picture.html)入门，但我感到很困惑。解压 Symfony2 后，我有以下目录结构（如文档中所述）：

```
/var/www/ <- web root directory
    Symfony/ <- unpacked archive
        app/
            cache/
            config/
            logs/
            Resources/
        bin/
        src/
            Acme/
                DemoBundle/
                    Controller/
                    Resources/
                    ...
        vendor/
            symfony/
            doctrine/
            ...
        web/
            app.php
            ... 
```

我有演示工作在`<host>/Symfony2/web/app_dev.php/demo/welcome/James`。到现在为止还挺好。

我知道我不能使用 apache `mod_rewrite`，`app_dev.php`所以我想知道是否有人可以一步一步地给我：

*   **移到`DemoBundle`使用`app.php`**（因为`<host>/Symfony2/web/app.php/demo/hello/James`不工作。它抛出了一个 Symfony 错误。我发誓我什么都没碰过。我在[教程第一页的](http://symfony.com/doc/current/quick_tour/the_big_picture.html)底部）
*   **使用时保留开发工具栏`app.php`**（我是否只是`web_profiler:`从`config/config_dev.yml`？）
*   **在网络路由之外设置 Symfony2** *（我认为最好的安全措施？！？）*（我应该有一个`/var/www/index.php`指向的软链接`/home/<name>/Symfony2/web/app.php`吗？）
*   **现在我在生产版本上，我可以去`<host>/demo/welcome/James`吗，如果不能，为什么不呢？**（我安装了 apache `mod_rewrite`）*（我真的很想让这个工作）*

*（我在学习 django 时遇到了同样的问题，刚开始需要吸收很多信息。）*

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-20T09:54:13.880

*   该演示并不打算在生产中运行。但是，如果您希望出于学习目的这样做，只需将路线`_demo`和`_demo_secured`从移动`app/config/routing_dev.yml`到`app/config/routing.yml`。

*   在生产环境中使用 web profiler 也是不明智的。网站访问者不得访问此类信息。这就是为什么有两个单独的前端控制器（`app.php`和`app_dev.php`）的原因。他们都为不同的目的而设置。

*   设置 Web 服务器的最佳做法是让 Web 根指向`./web`.

# android - 主屏幕小部件中gridview中的OnScrollListener，有可能吗？

> ID：16118683
> 
> 赞同：0
> 
> 时间：2013-04-20T09:22:16.983
> 
> 标签：android, widget, homescreen, onscroll

我有一个带有 gridview 的主屏幕小部件（android > 4.0）并在其中显示一些图片。我想让一些额外的视图（带有图标的图像视图或其他任何东西）在滚动这个网格时可见。

因此，如果用户浏览网格，每张图片中的小图标都会可见。那可能吗？

我在 RemoteViews 上搜索了类似 setOnScrollListener 的东西，但我没有找到任何东西，也没有找到 getParent 来从 griditem 中访问网格。

提前致谢！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T11:48:36.743

您不需要`OnScrollListener`为此。`GridView`已经知道如何滚动并且已经知道如何根据滚动填充网格中的其他单元格。只需将您的数据提供给`GridView` （在这种情况下，通过 a `RemoteViewsFactory`）。

# javascript - 如何在AngularJS中动画菜单打开/关闭

> ID：16118689
> 
> 赞同：1
> 
> 时间：2013-04-20T09:22:48.033
> 
> 标签：javascript, html, angularjs, angularjs-directive

我正在尝试确定解决此问题的“正确”方法。

我有一个带有子菜单的菜单。当我的路线改变时，我想制作动画（使用 jQuery 过渡）上滑和下滑效果。

我知道我不应该从我的控制器操作我的 DOM，因为这是一种不好的做法。我应该使用监听路由变化的指令吗？服务？

（例子）

```
ul
  li
  li
  li
    ul
      li
      li 
```

![在此处输入图像描述](https://i.stack.imgur.com/vTJA3.png)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-20T09:29:53.673

你应该看看 ngAnimate。[这里](http://www.yearofmoo.com/2013/04/animation-in-angularjs.html)有教程

然后，您将能够在应该动画的元素上指定动画。

例如，您可以在基于范围内的值动态显示/隐藏的元素上指定“进入”和“离开”动画。然后可以在 CSS3（推荐）或使用 jQuery、mootools 和其他库中指定动画。

```
<li ng-repeat="item in parent.items" ng-animate="'slide'" ng-show="parent.open">{{item.text}}</li> 
```

**编辑：**此 API 已被弃用，但它是一个更好的 API 和类似的方法。在此处阅读更多信息：[http](http://www.yearofmoo.com/2013/08/remastered-animation-in-angularjs-1-2.html) ://www.yearofmoo.com/2013/08/remastered-animation-in-angularjs-1-2.html 。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-11-23T15:25:33.233

这非常类似于： [使用 ng-show 和 ng-animate 的上滑/下滑效果](https://stackoverflow.com/questions/16677304/slide-up-down-effect-with-ng-show-and-ng-animate)

该指令：[https](https://github.com/EricWVGG/AngularSlideables) ://github.com/EricWVGG/AngularSlideables将创建一个简单的 API 来为任何元素添加滑动。

如果您愿意使用 jQuery：[https](https://github.com/onokumus/metisMenu) ://github.com/onokumus/metisMenu可以为您创建可扩展的菜单。

如果您从后端填充菜单，菜单控制器中的以下内容将允许您设置导航，然后实例化菜单。

```
 $scope.response = null;
       $http.get(ENV.api.endpoint+"/menu").
        then(function(response) {
            $scope.navItems = response.data;
            $timeout(function() {
               jQuery('.metismenu').metisMenu();
            });
        }, function(response) {
            // called asynchronously if an error occurs
            // or server returns response with an error status.
        }); 
```

我的导航角度代码是：（注意 navItems 中的 :: 使它只填充一次。）

```
 <ul side-navigation class="nav metismenu" id="side-menu" >
        <li ui-sref-active="active" ng-repeat="Item in ::navItems.Regular">
            <a ui-sref="{{Item.state}}"><i class="fa {{Item.icon}}"></i> <span class="nav-label">{{Item.title}}</span></a>
        </li>
        <li ng-class="{active: $state.includes(Item.state)}" ng-repeat="Item in ::navItems.DropDown">
            <a href=""><i class="fa" ng-class="Item.icon"></i> <span class="nav-label">{{Item.title}}</span><span class="fa arrow"></span></a>
            <ul class="nav nav-second-level collapse" ng-class="{in: $state.includes(Item.state)}">
                <li ui-sref-active="active" ng-repeat="Subitem in Item.items">
                    <a ui-sref="{{Subitem.state}}"><i class="fa {{Subitem.icon}}"></i> {{Subitem.title}}</a>
                </li>
            </ul>
        </li>
    </ul> 
```

JSON然后看起来像：

```
{
    "Regular": [
        {
            "title": "Directory",
            "icon": "fa-archive",
            "state": "directory"
        }
    ],
    "DropDown": [
        {
            "title": "Accounting",
            "icon": "fa-dollar",
            "state": "accounting",
            "items": [
                {
                    "title": "Approve Time",
                    "state": "accounting.staffTimeclockActApprove",
                    "icon": "fa-check-circle-o"
                },
                {
                    "title": "Notify Time",
                    "state": "accounting.staffTimeclockActNotify",
                    "icon": "fa-envelope-o"
                }
            ]
        }
    ]
} 
```

# hash - determining hash function used in digital signature

> ID：16118690
> 
> 赞同：1
> 
> 时间：2013-04-20T09:22:56.560
> 
> 标签：hash, rsa, pkcs#1

I have a digital signature (RSA - PKCS#1). After decrypting it with the RSA public key I get the following 128 bytes

```
00 01 ff ff ff .. ff 00 30 31 30 0d 06 09 60 86 48 01 65 03 04 02 01 05 00 04 20 77 51 1b f4 d7 17 d7 ad 8c 2d e5 89 2a ca e0 6d a3 c0 7d 13 4d d7 b8 01 14 87 03 00 69 e4 9b b3 
```

PKCS#1 padding removed, 51 bytes left:

```
30 31 30 0d 06 09 60 86 48 01 65 03 04 02 01 05 00 04 20 77 51 1b f4 d7 17 d7 ad 8c 2d e5 89 2a ca e0 6d a3 c0 7d 13 4d d7 b8 01 14 87 03 00 69 e4 9b b3 
```

I would like two things about this:

1.  Is it possible to determine the hash function used? Encoded algorithm ID should be prepended to the actual body of the digest, is it possible to tell what algorithm it is from the raw bytes?

2.  Where does the actual digest start (how long the head / digest is)?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T10:13:00.500

This appears to be EMSA-PKCS1-v1_5 as described in [RFC 3447](https://www.rfc-editor.org/rfc/rfc3447), which means that after removing the header and padding, you have a DER encoding of an `AlgorithmIdentifier` followed by the hash value itself.

From the RFC:

> 1.  For the six hash functions mentioned in Appendix B.1, the DER encoding T of the `DigestInfo` value is equal to the following:
>     
>     
>     
>     [...]
>     
>     
>     
>     SHA-256: `(0x)30 31 30 0d 06 09 60 86 48 01 65 03 04 02 01 05 00 04 20 || H.`

So in your example, the hash value is the SHA-256 hash starting `77511bf4d7...`.

# objective-c - 很难在哪里放置 CFRelease 调用

> ID：16118692
> 
> 赞同：1
> 
> 时间：2013-04-20T09:23:13.100
> 
> 标签：objective-c, cocoa, memory-leaks

我很难将我的`CFRelease()`电话放在下面的代码中。如果我将我的`CFRelease()`放在一个括号内，它会抱怨在另一个括号中丢失。

```
ABMutableMultiValueRef phones = ABRecordCopyValue(person, kABPersonPhoneProperty);

if (phones == nil || ABMultiValueGetCount(phones) == 0) {

    CFArrayRef linkedContacts = ABPersonCopyArrayOfAllLinkedPeople(person);
    phones = ABMultiValueCreateMutable(kABPersonPhoneProperty);

    for (int i = 0; i < CFArrayGetCount(linkedContacts); i++) {

        ABRecordRef linkedContact = CFArrayGetValueAtIndex(linkedContacts, i);
        ABMultiValueRef linkedPhones = ABRecordCopyValue(linkedContact, kABPersonPhoneProperty);

        if (linkedPhones != nil && ABMultiValueGetCount(linkedPhones) > 0) {

            for (int j = 0; j < ABMultiValueGetCount(linkedPhones); j++) {

                ABMultiValueAddValueAndLabel(phones, ABMultiValueCopyValueAtIndex(linkedPhones, j), NULL, NULL);
            }
        }
    }

    if (ABMultiValueGetCount(phones) == 0) {

        return NO;
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-20T10:09:29.207

您可能知道，您必须释放您“拥有”的所有对象，即从名称中带有“Create”或“Copy”的函数返回的所有对象，*但前提*是调用成功。如果函数返回`NULL`，则不能调用`CFRelease`返回值。

例如，在您的代码中

```
ABMultiValueRef linkedPhones = ABRecordCopyValue(linkedContact, kABPersonPhoneProperty);
if (linkedPhones != nil && ABMultiValueGetCount(linkedPhones) > 0) {
    // ...
} 
```

不清楚是否`CFRelease(linkedPhones)`在 if 块结束时调用。单独检查呼叫是否成功可能会更好。

所以你的那部分代码看起来像：

```
ABMultiValueRef linkedPhones = ABRecordCopyValue(linkedContact, kABPersonPhoneProperty);
if (linkedPhones != nil) {
    for (int j = 0; j < ABMultiValueGetCount(linkedPhones); j++) {
        CFTypeRef value = ABMultiValueCopyValueAtIndex(linkedPhones, j);
        if (value != nil) {
            ABMultiValueAddValueAndLabel(phones, value, NULL, NULL);
            CFRelease(value);
        }
    }
    CFRelease(linkedPhones);
} 
```

我希望这能让您开始重写您的完整功能 Analyzer-safe！

# c# - 单击按钮时记录已删除的文件？记录所有文件（已删除和未删除）

> ID：16118694
> 
> 赞同：2
> 
> 时间：2013-04-20T09:23:28.703
> 
> 标签：c#

我正在编写一个应用程序来删除超过 6 个月的测试文件夹上的文件，该应用程序工作正常，因为我已经对其进行了测试，我想创建一个日志文件来跟踪已删除文件的名称以用于审计目的。

但是下面的脚本确实记录了所有文件（已删除和未删除），我只需要记录日期和时间以及已删除文件的名称即可。

谢谢

**下面的脚本：**

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Text;
using System.Windows.Forms;
using System.IO;

namespace Delete_PDF_Files
{
    public partial class Form1 : Form
    {
        private string strLogText;
        public Form1()
        {
            InitializeComponent();
        }

        private void btnCheck_Click(object sender, EventArgs e)
        { 
            // check the number of file in the CPS directory on S drive
            listBox1.Items.Clear();

            string[] files = System.IO.Directory.GetFiles(@"C:\test\"); // @"S:\CPS Papers\"
            this.listBox1.Items.AddRange(files);
            textBox1.Text = listBox1.Items.Count.ToString();
        }

        // delete button to delete files over 6 months from CPS folder
        private void btnDelete_Click(object sender, EventArgs e)
        {
            string[] files = System.IO.Directory.GetFiles(@"C:\test\"); //S:\CPS Papers  test C:\test\

            foreach (string file in files)
            {
                System.IO.FileInfo fi = new System.IO.FileInfo(file);

                if (fi.LastWriteTime < DateTime.Now.AddMonths(-6))
                    fi.Delete();

                // Create a writer and open the file: //C:\test\log
                System.IO.StreamWriter log;

                if (!System.IO.File.Exists("C:\\test\\log\\logfile.txt"))
                {
                    log = new System.IO.StreamWriter("C:\\test\\log\\logfile.txt");
                }
                else
                {
                    log = File.AppendText("C:\\test\\log\\logfile.txt");
                }

                // Write to the file:
                log.WriteLine(DateTime.Now); 
                log.WriteLine(strLogText);
                log.WriteLine();
                log.WriteLine();

                // Close the stream:
                log.Close();

            }
        }

        // Exit button
        private void btnExit_Click(object sender, EventArgs e)
        {
            Application.Exit();
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T09:36:27.620

我建议您使用像[Log4Net](http://logging.apache.org/log4net/)这样的好库，而不是像您那样使用自定义日志记录。为什么要重新发明轮子？我知道它的学习曲线时间很短，但是一旦你了解了你，你就可以轻松地将它集成到任何新项目中。

只需将配置部分添加到您的 app.config 中，如[这里](http://logging.apache.org/log4net/release/config-examples.html)给出的和几行代码，您就应该准备好了。

可以在[这里找到关于 Log4Net 的一个很好的教程](http://www.codeproject.com/Articles/140911/log4net-Tutorial)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-20T09:31:28.783

用这个替换你的删除代码：

```
private void btnDelete_Click(object sender, EventArgs e)
    {
        string[] files = System.IO.Directory.GetFiles(@"C:\test\"); //S:\CPS Papers  test C:\test\

        foreach (string file in files)
        {
            System.IO.FileInfo fi = new System.IO.FileInfo(file);
            //if (fi.LastAccessTime < DateTime.Now.AddMonths(-3))
            if (fi.LastWriteTime < DateTime.Now.AddMonths(-6))
            {
                fi.Delete();
                using (StreamWriter writer = File.AppendText("C:\\test\\log\\logfile.txt"))
                {
                    writer.Write("File: " + file + " deleted at : "+DateTime.Now);
                    writer.WriteLine("----------------------------------------------------");
                    writer.Flush();
                    writer.Close();

                }
            }

        }
    } 
```

# rdf - 将数据插入 OWL 本体

> ID：16118708
> 
> 赞同：0
> 
> 时间：2013-04-20T09:25:06.627
> 
> 标签：rdf, semantic-web, jena, owl

我有一个自定义的 OWL 本体，我像这样上传到我的模型中：

```
 OntModel=ModelFactory.createOntologyModel();

    InputStream in = FileManager.get().open(urlFile);   
    model.read(in,""); 
```

我将整个本体放入我的模型中。现在我不知道如何将一些数据添加到该模型中。要插入的数据必须与我上传的那个本体相匹配。

你能给出一些提示或标记来做到这一点吗？我在这里很迷路。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-02T12:34:22.160

如果我理解正确，您想将数据添加到模型中。

您可以将语句添加到模型中

```
 model.add(statement); 
```

或另一个模型本身作为

```
 model.add(newModel); 
```

希望这会帮助你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-20T14:33:18.880

您可能会发现模型 API[教程](http://jena.apache.org/tutorials/rdf_api.html)对于学习如何使用 Jena 模型很有用。此外，Jena [javadocs](http://jena.apache.org/documentation/javadoc/jena/index.html)始终是一个很好的参考。

本教程将向您展示如何将数据添加到您的模型。

我不确定您对本体的“适当”是什么意思。您可以开始在 RDF 中陈述事实；如果你陈述与你的本体相矛盾的东西，它的状态只是不一致，但事情仍然有效。

了解模型不一致、具有不可满足的类以及其他 OWL（实际上是 DL）特定构造意味着什么，您应该查看 DL 手册。第2章特别好。

如果适当地指的是类似于关系系统中的完整性约束，那么它不会那样工作。开放世界的假设使这有点棘手，如果不“关闭”世界，您将无法真正获得您可能期望的行为。[Pellet 的 ICV 页面](http://clarkparsia.com/pellet/icv/)上对此进行了很好的讨论，目前在[Stardog](http://stardog.com/docs/sdp/)中实现。

希望有帮助。

# macos - 我的 gdb 反汇编没有正确显示

> ID：16118712
> 
> 赞同：0
> 
> 时间：2013-04-20T09:25:41.547
> 
> 标签：macos, ubuntu, gdb, disassembly

![在此处输入图像描述](https://i.stack.imgur.com/uwBOb.png)

我正在使用 GDB 使用布局 asm 和布局 regs 分析二进制文件。在我输入 layout asm 和 layout regs 后，它会正确显示。但是，在我输入了几个步骤命令后，屏幕无法正常显示。我在我的 macAir 上运行 ubuntu。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T15:52:57.650

> 在我输入了几个步骤命令后，屏幕无法正常显示

执行`refresh`命令或键入`Control-L`

# tablesorter - jquerycsvtotable + tablesorter：保持显示直到所有内容都加载？

> ID：16118717
> 
> 赞同：0
> 
> 时间：2013-04-20T09:26:00.263
> 
> 标签：tablesorter

我将 tablesorter 与 jquerycsvtotable 结合使用。一切正常，但是......在加载表格的那一刻和显示表格排序器的那一刻之间存在延迟，这使得数据在屏幕上显示时没有任何格式。时间因数据量而异，介于 2 秒到 5 秒之间。

有什么方法可以显示“正在加载”的 gif，或者在所有过程完成之前什么都不显示，以避免显示丑陋的数据？

谢谢！

PS：我并不是说当您单击某个标题单元格时，时间表排序器需要重新排序行，我知道该单元格已经安排了标题中显示的可选处理 gif ......

编辑：请在我的代码下面找到。

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<link rel="stylesheet" type="text/css" href="/js/ts/css/theme.default.css">
<script type="text/javascript" src="http://code.jquery.com/jquery-1.9.1.js"></script>
<script type="text/javascript" src="/js/ts/js/jquery.tablesorter.min.js"></script>
<script type="text/javascript" src="/js/ts/js/jquery.tablesorter.widgets.min.js"></script>
<script type="text/javascript" src="/js/csv/js/jquery.csvToTable.js"></script>

<script>
$(function() {
  var mytable = $('#tabla1')
    .CSVToTable('/est/data/cli_30_0000.txt',{
      loadingImage: '/js/csv/images/loading.gif',
      separator: ";"
    })
    .bind("loadComplete",function(){
      var footer = mytable.find('tr:last');
      mytable
        .find('thead').after( footer.wrap('<tfoot/>').parent() ).end()
        .tablesorter({
          sortList: [[5,0]],
          widthFixed : true,
          widgets: ["zebra", "filter", "stickyHeaders"],
          widgetOptions: {filter_hideFilters : true}
        });
    });
});
</script>

</head>
<body>

<p>
<a href=../../>Home</a> <a href=../>30</a> <a href=./>0000</a><br>
2013-04-15 12:45:17
</p>

<div>
<table id="tabla1" class="tablesorter">
</div>

</table>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T13:02:25.110

我想知道解决方案是否就像将“tablesorter”类名添加到表中一样简单。如果您使用的不是默认主题，则还应包括该主题名称：

```
 var mytable = $('#tabla1')
    .CSVToTable('/est/data/cli_30_0000.txt',{
      tableClass: 'tablesorter tablesorter-default', // adjust theme name here
      loadingImage: '/js/csv/images/loading.gif',
      separator: ";"
    }) 
```

# .net - 多发性遗传

> ID：16118718
> 
> 赞同：1
> 
> 时间：2013-04-20T09:26:07.427
> 
> 标签：.net, vb.net, visual-studio, visual-studio-2008

我有一些具有 .NET 控件的类：

```
Class MyTextBox : Inherits MyControl
    Control As TextBox 
```

我想使用继承而不是使用包含 .NET 控件的变量：

```
Class MyTextBox : Inherits TextBox 
```

由于 .NET 不支持多重继承，有没有办法让我从 MyControl 类继承并拥有 .NET TextBox 的所有实现？

```
Class MyControl : Inherits Control

Class MyTextBox : Inherits MyControl
    (all methods, property, events of the TextBox class) 
```

所以我可以在我的子类中拥有 TextBoxes、ComboBoxes 和任何东西的所有属性/操作，加上我的个人属性/操作以及 MyControl 类上从子类继承的通用 atts/ops。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-20T09:50:41.390

正如您所说，.NET（以及大多数现代语言和 OOP 环境）不支持多继承-这是一个很好的设计决策-。

不是一种解决方法，但实际的解决方案是*wrapping*。

如果您希望您的控制是`MyControl`并且`TextBox`还有其他获得这种关系的方法：*接口*。

您的专业`TextBox`应该继承.NET 内置`TextBox`控件类并实现`IMyControl`接口。

`SpecializedTextBox`必须实现的功能可以在单独的类中实现，`IMyControl`并在 on的实现中使用其成员`SpecializedTextBox`。

我将用 C# 编写一个示例，但对于您来说应该足够了，因为您是 VB.NET 开发人员，并且解决方案是语言中立的：

```
public interface IMyControl 
{
     void Do();
}

public class SpecializedTextBox : TextBox, IMyControl
{
     private readonly MyControlExtension _extension = new MyControlExtension(this);

     public MyControlExtension Extension 
     {
          get { return _extension; }
     }

     public void Do()
     {
          Extension.Do();
     }
}

public class MyControlExtension
{
    public MyControlExtension(Control wrappedControl)
    {
         _wrappedControl = wrappedControl;
    }

    private readonly Control _wrappedControl;

    public Control WrappedControl { get { return _wrapedControl; } }

    public void Do() 
    {
         // Do some stuff with the WrappedControl property contained control

    } 
} 
```

现在`SpecializedTextBox`控制有两个`IMyControl`和`TextBox`成员。

据我所知，这足以*模拟*多继承，因为一个类可以实现一个或多个接口。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-20T09:53:19.950

你可以看看下面的文章

*   [C# 的模拟多重继承模式](http://www.codeproject.com/Articles/10072/Simulated-Multiple-Inheritance-Pattern-for-C)

# java - java swing应用程序中的未知错误

> ID：16118720
> 
> 赞同：1
> 
> 时间：2013-04-20T09:26:33.160
> 
> 标签：java, swing, jtable, indexoutofboundsexception, defaulttablemodel

嗨，我使用第二个线程每 2 秒更新一次 JTable 的 DefaultTableModel 并且显然是随机的，它会引发以下错误。

```
    线程“AWT-EventQueue-0”中的异常 java.lang.ArrayIndexOutOfBoundsException: 2 >= 2
    在 java.util.Vector.elementAt(Vector.java:470)
    在 javax.swing.table.DefaultTableModel.getValueAt(DefaultTableModel.java:649)
    在 javax.swing.JTable.getValueAt(JTable.java:2716)
    在 javax.swing.JTable.prepareRenderer(JTable.java:5714)
    在 javax.swing.plaf.basic.BasicTableUI.paintCell(BasicTableUI.java:2108)
    在 javax.swing.plaf.basic.BasicTableUI.paintCells(BasicTableUI.java:2010)
    在 javax.swing.plaf.basic.BasicTableUI.paint(BasicTableUI.java:1806)
    在 javax.swing.plaf.ComponentUI.update(ComponentUI.java:161)
    在 javax.swing.JComponent.paintComponent(JComponent.java:769)
    在 javax.swing.JComponent.paint(JComponent.java:1045)
    在 javax.swing.JComponent.paintChildren(JComponent.java:878)
    在 javax.swing.JComponent.paint(JComponent.java:1054)
    在 javax.swing.JViewport.paint(JViewport.java:731)
    在 javax.swing.JComponent.paintChildren(JComponent.java:878)
    在 javax.swing.JComponent.paint(JComponent.java:1054)
    在 javax.swing.JComponent.paintToOffscreen(JComponent.java:5212)
    在 javax.swing.BufferStrategyPaintManager.paint(BufferStrategyPaintManager.java:295)
    在 javax.swing.RepaintManager.paint(RepaintManager.java:1236)
    在 javax.swing.JComponent._paintImmediately(JComponent.java:5160)
    在 javax.swing.JComponent.paintImmediately(JComponent.java:4971)
    在 javax.swing.RepaintManager$3.run(RepaintManager.java:796)
    在 javax.swing.RepaintManager$3.run(RepaintManager.java:784)
    在 java.security.AccessController.doPrivileged（本机方法）
    在 java.security.ProtectionDomain$1.doIntersectionPrivilege(ProtectionDomain.java:76)
    在 javax.swing.RepaintManager.paintDirtyRegions(RepaintManager.java:784)
    在 javax.swing.RepaintManager.paintDirtyRegions(RepaintManager.java:757)
    在 javax.swing.RepaintManager.prePaintDirtyRegions(RepaintManager.java:706)
    在 javax.swing.RepaintManager.access$1000(RepaintManager.java:62)
    在 javax.swing.RepaintManager$ProcessingRunnable.run(RepaintManager.java:1651)
    在 java.awt.event.InvocationEvent.dispatch(InvocationEvent.java:251)
    在 java.awt.EventQueue.dispatchEventImpl(EventQueue.java:727)
    在 java.awt.EventQueue.access$200(EventQueue.java:103)
    在 java.awt.EventQueue$3.run(EventQueue.java:688)
    在 java.awt.EventQueue$3.run(EventQueue.java:686)
    在 java.security.AccessController.doPrivileged（本机方法）
    在 java.security.ProtectionDomain$1.doIntersectionPrivilege(ProtectionDomain.java:76)
    在 java.awt.EventQueue.dispatchEvent(EventQueue.java:697)
    在 java.awt.EventDispatchThread.pumpOneEventForFilters(EventDispatchThread.java:242)
    在 java.awt.EventDispatchThread.pumpEventsForFilter(EventDispatchThread.java:161)
    在 java.awt.EventDispatchThread.pumpEventsForHierarchy（EventDispatchThread.java:150）
    在 java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:146)
    在 java.awt.EventDispatchThread.pumpEvents（EventDispatchThread.java:138）
    在 java.awt.EventDispatchThread.run(EventDispatchThread.java:91)

```

该程序一直运行良好，但我不知道我的代码中的错误在哪里，因为我的所有类都没有出现在堆栈跟踪中。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-20T09:30:29.110

欢迎来到 Event Dispatch Thread 违规（和竞态条件）的精彩世界。

基本上，您不应该从除 EDT 之外的任何线程更新（直接或间接）任何 UI 组件。

基本上，当您更新时`TableModel`，它会触发一个事件，该事件被表捕获，该表试图更新自身，但模型状态不断变化，对表没有意义......

相反，尝试使用 a`SwingWorker`更新您的模型，使用 publish 和 process 方法使更新与 EDT 保持同步

查看[Swing 中的并发以](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/)获取更多详细信息和示例。

# android - 电话灯 来电时亮起

> ID：16118721
> 
> 赞同：2
> 
> 时间：2013-04-20T09:26:35.160
> 
> 标签：android, android-hardware

我接到来电并且工作良好。但是当我的屏幕关闭并且有来电时。然后我的屏幕**灯不亮**。我在 onCreate() 中使用此代码：-

```
getWindow().addFlags(
            WindowManager.LayoutParams.FLAG_ALLOW_LOCK_WHILE_SCREEN_ON
          | WindowManager.LayoutParams.FLAG_SHOW_WHEN_LOCKED
          );

    PowerManager pm = (PowerManager) getSystemService(Context.POWER_SERVICE);
     wl = pm.newWakeLock(PowerManager.SCREEN_BRIGHT_WAKE_LOCK, "My Tag");
    wl.acquire(); 
```

此外，当我的屏幕灯亮起并且有来电时，我与服务器的连接成功。但是当我的屏幕灯熄灭并且来电时（通过服务在后台运行以向服务器注册），我的**注册失败**。

请安卓专家帮帮我！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T11:56:23.317

在 oncreate 中使用以下内容

```
 getWindow().addFlags(WindowManager.LayoutParams.FLAG_DISMISS_KEYGUARD);
    getWindow().addFlags(WindowManager.LayoutParams.FLAG_SHOW_WHEN_LOCKED);
    getWindow().addFlags(WindowManager.LayoutParams.FLAG_TURN_SCREEN_ON);
    getWindow().addFlags(WindowManager.LayoutParams.FLAG_KEEP_SCREEN_ON); 
```

并使用权限

```
<uses-permission android:name="android.permission.WAKE_LOCK" >
</uses-permission>
<uses-permission android:name="android.permission.DISABLE_KEYGUARD" >
</uses-permission> 
```

# database - postgresql - 在 mac 上启动 - `pg_ctl` 不起作用

> ID：16118723
> 
> 赞同：13
> 
> 时间：2013-04-20T09:26:46.643
> 
> 标签：database, postgresql, shell, command-line

我想在我的本地机器（mac os 10.7.5）上使用预安装的 postgresql，当我运行时`which psql`我找到它（in `/usr/bin/psql`），然后运行

```
pg_ctl -D /usr/bin/psql -l /usr/bin/psql/server.log start 
```

结果是：

```
-bash: pg_ctl: command not found 
```

如何启动/使用我的 postgresql 数据库？我需要安装它（比如 Homebrew）还是可以在我的 Mac 上使用预装的？我也尝试使用`initdb`命令 ( `initdb /usr/bin/psql -E utf8`) 并得到相同的消息：`-bash: initdb: command not found`.

另外，这`psql`和 一样`postgres`吗？（我试过`which postgres`了，一无所获）

更新：我在命令行中使用命令，`psql`但收到以下消息（例如）：`psql -l``psql -a`

```
psql: could not connect to server: No such file or directory
Is the server running locally and accepting
connections on Unix domain socket "/var/pgsql_socket/.s.PGSQL.5432"? 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-20T10:17:38.573

OS X 附带命令行客户端（用于与 postgres 数据库交互）而不是服务器。

您需要安装服务器。

检查[postgres 站点](http://www.postgresql.org/download/macosx/)或获取[postgres.app](http://postgresapp.com/)

# java - 我无法理解的 Java 小异常

> ID：16118726
> 
> 赞同：3
> 
> 时间：2013-04-20T09:27:01.180
> 
> 标签：java, exception, jmonkeyengine

你能帮我解决这个问题吗？

```
Exception in thread "main" com.jme3.asset.AssetNotFoundException: Interface/splash.png
    at com.jme3.system.JmeDesktopSystem.showSettingsDialog(JmeDesktopSystem.java:112)
    at com.jme3.system.JmeSystem.showSettingsDialog(JmeSystem.java:128)
    at com.jme3.app.SimpleApplication.start(SimpleApplication.java:125)
    at adventure.Q3World.main(Q3World.java:85) 
```

它曾经可以工作，然后我不得不重新打包所有东西，现在我可能忘记了一个设置，或者在 Eclipse 中同样如此。启动文件在那里，但它不在某个路径上。

我想要做的是这个，它在我以前的构建中有效：

`settings.setSettingsDialogImage("Interface/splash.png");`

我也尝试将路径添加到资源面板，但没有其他效果：

![在此处输入图像描述](https://i.stack.imgur.com/jX7Va.png)

在 Java 构建路径中，列出了资源，但它仍然无法正常工作：

![在此处输入图像描述](https://i.stack.imgur.com/MuGok.png)

我想要工作的更大的代码块以及在构建的 jar 中工作但不在 eclipse juno 中的代码块是：

```
public static void main(String[] args) {

        File file = new File("quake3level.zip");
        if (!file.exists()) {
            useHttp = true;
        }
        Q3World app = new Q3World();
        AppSettings settings = new AppSettings(true);
        settings.setTitle("Dungeon World");
        settings.setSettingsDialogImage("Interface/splash.png");
        app.setSettings(settings);

        app.start();
    } 
```

## 成功

![在此处输入图像描述](https://i.stack.imgur.com/q937d.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T09:39:30.347

Can you tell us how you run your code (e.g. command line, if so, what is the classpath), and where all the locations of splash.png are in your folder structure?

The file needs to be on the classpath, as that appears to be from where this code loads the image.

[http://code.google.com/p/jmonkeyengine/source/browse/trunk/engine/src/desktop/com/jme3/system/JmeDesktopSystem.java?spec=svn10038&r=10038#112](http://code.google.com/p/jmonkeyengine/source/browse/trunk/engine/src/desktop/com/jme3/system/JmeDesktopSystem.java?spec=svn10038&r=10038#112)

```
 String iconPath = sourceSettings.getSettingsDialogImage();        
    if(iconPath == null){
        iconPath = "";
    }
    final URL iconUrl = JmeSystem.class.getResource(iconPath.startsWith("/") ? iconPath : "/" + iconPath);
    if (iconUrl == null) {
        // *****LINE 112 below*****
        throw new AssetNotFoundException(sourceSettings.getSettingsDialogImage());
    } 
```

# php - twitter api 1.1 的 Oauth 标头问题

> ID：16118728
> 
> 赞同：2
> 
> 时间：2013-04-20T09:27:24.790
> 
> 标签：php, oauth, twitter

我已经尝试访问新的 twitter api (1.1) 3 天了，新的 oauth 系统和我不兼容。我只想获取我最新的 3 条推文（这些推文是公开的，所以为什么需要 oauth 而不是简单的 rss 很烦人）

```
<?php

$header = 'GET /statuses/user_timeline.json?screen_name=NAME&count=3&include_rts=false HTTP/1.1
Host: https://www.twtter.com:443
Authorization: OAuth realm="https://https://www.twtter.com/statuses/user_timeline.json",
    oauth_consumer_key="key",
    oauth_token="mytoken",
    oauth_nonce="",
    oauth_timestamp="0",
    oauth_signature_method="HMAC-SHA1",
    oauth_version="1.0",
    oauth_signature="O4yJhqnYlxMP5U97rJ%2F4UuLjh84%3D"';

$url = "https://api.twitter.com/1.1/statuses/user_timeline.json?screen_name=NAME&count=3&include_rts=false";

$options = array( 
            CURLOPT_HTTPHEADER => $header,
            CURLOPT_HEADER => false,
            CURLOPT_URL => $url,
            CURLOPT_RETURNTRANSFER => true,
            CURLOPT_SSL_VERIFYPEER => false
        );

        $feed = curl_init();
        curl_setopt_array($feed, $options);
        $json = curl_exec($feed);
        curl_close($feed);
?> 
```

标题似乎是问题（我使用生成它：http: [//hueniverse.com/oauth/guide/authentication/](http://hueniverse.com/oauth/guide/authentication/)）

NAME、MYTOKEN、KEY 是帖子的占位符。

任何人都可以看到问题是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T12:32:05.670

这就是我使用的。打电话`returnTweet()`

有关“user_timeline”的更多信息，请访问[API 文档](https://dev.twitter.com/docs/api/1.1/get/statuses/user_timeline)

```
function buildBaseString($baseURI, $method, $params) {
    $r = array();
    ksort($params);
    foreach($params as $key=>$value){
        $r[] = "$key=" . rawurlencode($value);
    }
    return $method."&" . rawurlencode($baseURI) . '&' . rawurlencode(implode('&', $r));
}

function buildAuthorizationHeader($oauth) {
    $r = 'Authorization: OAuth ';
    $values = array();
    foreach($oauth as $key=>$value)
        $values[] = "$key=\"" . rawurlencode($value) . "\"";
    $r .= implode(', ', $values);
    return $r;
}    

function returnTweet(){
        $oauth_access_token         = "xxx";
        $oauth_access_token_secret = "xxx";
        $consumer_key               = "xxx";
        $consumer_secret            = "xxx";

        $twitter_timeline           = "user_timeline";  //  mentions_timeline / user_timeline / home_timeline / retweets_of_me

        //  create request
            $request = array(
                'trim_user'     => 1,
                'screen_name'   => 'budidino',
                'count'         => '3'
            );

        $oauth = array(
            'oauth_consumer_key'        => $consumer_key,
            'oauth_nonce'               => time(),
            'oauth_signature_method'    => 'HMAC-SHA1',
            'oauth_token'               => $oauth_access_token,
            'oauth_timestamp'           => time(),
            'oauth_version'             => '1.0'
        );

        //  merge request and oauth to one array
            $oauth = array_merge($oauth, $request);

        //  do some magic
            $base_info              = buildBaseString("https://api.twitter.com/1.1/statuses/$twitter_timeline.json", 'GET', $oauth);
            $composite_key          = rawurlencode($consumer_secret) . '&' . rawurlencode($oauth_access_token_secret);
            $oauth_signature            = base64_encode(hash_hmac('sha1', $base_info, $composite_key, true));
            $oauth['oauth_signature']   = $oauth_signature;

        //  make request
            $header = array(buildAuthorizationHeader($oauth), 'Expect:');
            $options = array( CURLOPT_HTTPHEADER => $header,
                              CURLOPT_HEADER => false,
                              CURLOPT_URL => "https://api.twitter.com/1.1/statuses/$twitter_timeline.json?". http_build_query($request),
                              CURLOPT_RETURNTRANSFER => true,
                              CURLOPT_SSL_VERIFYPEER => false);

            $feed = curl_init();
            curl_setopt_array($feed, $options);
            $json = curl_exec($feed);
            curl_close($feed);

        return json_decode($json, true);
    } 
```

我希望它有帮助；）

# ios - 您可以在 iOS 中注册的 Twitter 帐户是否有限制？

> ID：16118730
> 
> 赞同：-3
> 
> 时间：2013-04-20T09:27:34.743
> 
> 标签：ios, twitter

我正在尝试在我的应用程序中使用 twitter 实现登录。我希望用户选择他想登录的 Twitter 帐户。所以我想知道在设置应用程序中注册的 Twitter 帐户是否有限制，以便我可以决定 UI？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T11:48:24.170

为什么不让应用程序使用存储在 twitter 客户端中的帐户？

我有 7 个 Twitter 帐户存储在 twitter 客户端中，我可以将其中的任何一个与任何 Iphone 应用程序一起使用

# sql - 查找不活跃的后续记录

> ID：16118733
> 
> 赞同：0
> 
> 时间：2013-04-20T09:28:26.027
> 
> 标签：sql, sql-server

我有一个 DD 信息表，我需要从中选择任何已取消但没有后续活动记录的记录

我努力了

```
select 
    d1.DDIReference 
FROM DDI d1
LEFT OUTER JOIN DDI d2 ON (d1.DDIReference = d2.DDIReference AND d1.TransactionID < d2.TransactionID)
INNER JOIN [TM113 File for Jo to Check] tm on tm.[DDI Reference] = d1.DDIReference
WHERE 
    d1.DDStatus = 'CAN'
AND d2.DDStatus <> 'ACT' 
```

但这将返回我可以取消、取消、取消、活动的记录的 DDIReference。

我只想返回已取消且没有活动的记录。

谢谢

达伦

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T09:38:10.873

我不完全确定我是否正确理解了您的问题，但是此查询获取已取消的记录，其中不`TransactionID`存在更高的活动记录。请注意，与您的原始查询一样，如果`CAN`存在多个具有状态的记录，您将在每条记录的结果中获得一行。在这种情况下，您可以使用`SELECT DISTINCT`来避免这种情况。

```
SELECT d1.DDIReference 
FROM DDI d1
INNER JOIN [TM113 File for Jo to Check] tm on tm.[DDI Reference] = d1.DDIReference
WHERE d1.DDStatus = 'CAN'
AND NOT EXISTS(
    SELECT *
    FROM DDI d2
    WHERE d2.DDIReference = d1.DDIReference
    AND d2.TransactionID > d1.TransactionID
    AND d2.DDStatus = 'ACT') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-20T09:31:53.497

```
select 
    d1.DDIReference 
FROM DDI d1
LEFT OUTER JOIN DDI d2 ON (d1.DDIReference = d2.DDIReference AND d1.TransactionID < d2.TransactionID)
INNER JOIN [TM113 File for Jo to Check] tm on tm.[DDI Reference] = d1.DDIReference
WHERE 
    d1.DDStatus = 'CAN'
AND d1.DDIReference  not in (select DDIReference from DDIReference  where DDStatus = 'ACT' ) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-20T12:08:29.083

您可以将选项与 OUTER [APPLY](http://msdn.microsoft.com/en-us/library/ms175156%28v=sql.105%29.aspx) + [TOP](http://msdn.microsoft.com/en-us/library/ms189463.aspx) 1 运算符一起使用

```
SELECT d1.DDIReference 
FROM DDI d1 INNER JOIN [TM113 File for Jo to Check] tm on tm.[DDI Reference] = d1.DDIReference
            OUTER APPLY (
                         SELECT TOP 1 d2.DDStatus
                         FROM DDI d2
                         WHERE d1.DDIReference = d2.DDIReference
                           AND d1.TransactionID < d2.TransactionID
                         ORDER BY d2.TransactionID DESC
                         ) o
WHERE d1.DDStatus = 'CAN' AND o.DDStatus <> 'ACT' 
```

# jsf - 如何将 solr 集成到 JSF 应用程序中？

> ID：16118736
> 
> 赞同：1
> 
> 时间：2013-04-20T09:29:01.710
> 
> 标签：jsf, solr

我想使用 apache solr 作为我的 JSF 应用程序的搜索引擎。我已成功安装 solr 作为部署到 glassfish 的独立应用程序。而且我知道如何配置 solrconfig.xml 和 schema.xml 以在我的应用程序中使用它。我不知道如何制作 java bean 类（或任何其他方法）以及如何在我的 jsf 页面中调用它。在网上搜索了两天后，我找不到教程或示例，也找不到任何资源。非常感谢任何帮助或提供现场示例或教程，因为我已经为此工作了整整一周。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T11:07:47.047

Param 博客中的以下文章对我很有帮助。他们帮助我理解了整个想法。

[Solrj 代码和使用示例](http://www.params.me/2011/09/solrj-code-and-usage-example.html)以及[使用 MySQL 配置 Apache Solr 1.4](http://www.params.me/2011/03/configure-apache-solr-14-with-mysql.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-20T09:52:32.297

您可以检查 Solr java 客户端[Solrj](http://wiki.apache.org/solr/Solrj)，它将帮助您查询 Solr 并在 java 对象中取回结果并将它们转换为 java bean。

您也可以[直接将它们映射到 POJO](http://wiki.apache.org/solr/Solrj#Directly_adding_POJOs_to_Solr)

# php - Cakephp 处理 MySQL 枚举

> ID：16118741
> 
> 赞同：1
> 
> 时间：2013-04-20T09:29:58.707
> 
> 标签：php, cakephp

我在 MySQL 表中有一个枚举数据类型字段，名为“privacy”= enum("Public","Private","Custom")。我想在我的编辑视图上显示这个字段，例如，

```
<?php 
    echo $this->Form->input(
              "privacy",array(
                   'label'=>'',
                   'type'=>'select'
              )
         );
  ?> 
```

我尝试[了这个](http://debuggable.com/posts/How_to_Fetch_the_ENUM_Options_of_a_Field_The_CakePHP_Enumerable_Behavior:4a977c9b-1bdc-44b4-b027-1a54cbdd56cb)链接解决方案，但发现了两个主要问题。

1.）我需要将可用选项从控制器传递给视图，并需要将它们分配给视图文件中的字段。

2.）它将数组作为数字索引传递，因此表单提交视图将传递值的索引而不是它的值。因此，如果我选择隐私选项作为“自定义”，视图将作为 2 传递，最终不会保存在数据库中，导致它的枚举和 2 不是有效选项。

我认为 cakePHP 足够聪明，可以评估提供的字段是枚举，它会从数据库中获取所有可用选项并自行处理该字段。

cakephp 中是否有任何选项可以解决我的问题，或者我是否需要将硬编码的关联数组传递给我的视图？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T09:49:33.867

这是一些对您选择性别作为枚举数据类型非常有用的代码

在视图文件中

```
<?php
                echo $form->input('gender', array(
                        'type'=>'select',
                        'options'=>array("male" => "Male", "female" => "Female")
                    )
                ); 
```

对于控制器，您只需初始化

```
$this->data['Profile']['gender'] = $sel_gender['Profile']['gender']; 
```

让我知道我是否可以为您提供更多帮助...

# git - GIT 预览结帐或合并

> ID：16118743
> 
> 赞同：0
> 
> 时间：2013-04-20T09:30:06.500
> 
> 标签：git, bash

我想做一个脚本，通过在 GIT 中签出一个仓库来帮助我发布一个系统。

我的任务是我是否可以通过某种方式测试来检查一个分支以确定我是否有错误而不依赖于文件系统。

同样，我可以在不修改文件系统的情况下轻松预览 GIT 合并以识别冲突吗？

（如果有帮助，完整的系统将在 Linux 系统上运行）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T10:35:40.477

使用`git merge --ff-only`- 只有当它可以快速转发时它才会合并分支。这意味着冲突是不可能的，并且它将始终有效（当然系统故障除外，例如磁盘空间不足）。显然，这意味着不应该分叉分支，但是在大多数情况下是这样，如果不是，您应该在另一个 repo 中与潜在的冲突合并，保持“发布 repo”不变。

这里的另一种方法是使用符号链接（linux 或 ntfs）。您应该有两个存储库`repo1`和一个指向其中`repo2`一个的符号链接。`releaserepo`说，你有`releaserepo`-> `repo1`。现在您可以更新`repo2`，检查是否一切正常，然后只需将符号链接更改为它，下次您将更新`repo1`并翻转符号链接。If 也将避免所有系统故障，因为创建符号链接操作是原子的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-20T10:04:02.150

如果你签出一个分支，你将永远不会出错。结帐只是恢复分支的先前状态。

如果您想检查合并，情况会有所不同。

如果你有一个分支`mybranch`并且你想合并`otherbranch`到它，记住`mybranch`合并之前的状态：

```
git log -1 --oneline 
```

这将返回最后一次提交的哈希。请注意哈希（例如`CAFEBABE`）。

现在，尝试进行合并：

```
git merge otherbranch 
```

如果一切正常。美好的。如果您遇到任何错误并且不愿意解决它们：

```
git reset --hard CAFEBABE 
```

这将重置`mybranch`为完成之前的状态`git merge`。

除了记住 hash 之外`CAFEBABE`，您还可以`ORIG_HEAD`按照此处所述使用：[Git 中的 HEAD 和 ORIG_HEAD](https://stackoverflow.com/questions/964876/head-and-orig-head-in-git)

# twitter-bootstrap - Bootstrap 导航栏边距

> ID：16118747
> 
> 赞同：6
> 
> 时间：2013-04-20T09:31:11.427
> 
> 标签：twitter-bootstrap, less

我想让导航栏 conetnt 的左右边距更小，以便“品牌”（最左边的组件）出现在左边更多，然后是默认值，右边组件相同。

有人可以指出我要修改的相关较少变量吗？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-20T10:44:57.473

使用基本布局，您想要的 CSS 选择器是

```
body > .navbar .brand 
```

使用 margin-left 和 margin-right 直到你得到你想要的结果。根据您调用 CSS 样式的方式，您可能还需要添加 !important，例如

```
body > .navbar .brand{
margin-left:-20px !important;
margin-right:-20px !important;  
} 
```

如果您对此没有任何成功，请尝试省略*body >*

**编辑**

如果要更改整个导航栏的宽度，请尝试类似

```
.navbar{
margin-left:-20px;
margin-right:-20px;
} 
```

您可能还需要调整 navbar-inner 的详细信息，例如

```
.navbar-inner{
padding-left:0;
padding-right:0;
} 
```

**编辑**
看看这是否有帮助：http: [//jsfiddle.net/panchroma/zBeZF/](http://jsfiddle.net/panchroma/zBeZF/)

祝你好运！

# c++ - 在 windows xp 上运行 VS 2012 编译 MFC 程序

> ID：16118748
> 
> 赞同：7
> 
> 时间：2013-04-20T09:31:16.837
> 
> 标签：c++, mfc, windows-xp

我在 Windows 7 上有 VS 2012。我想构建一个可以在 Windows XP 上运行的 MFC 程序。但是，当我将 exe 文件移动到 Windows XP 时，我收到以下错误：“它不是有效的 win32 应用程序”。

在网上搜索后，我发现我应该安装[Visual Studio 2012 Update 1](http://support.microsoft.com/kb/2797915)并将平台工具集从“Visual Studio 2012 (v110)”更改为“Visual Studio 2012 - Windows XP (v110_xp)”。我还将目标机器更改为“MachineX86 (/MACHINE:X86)”。这次我在 Windows XP 上运行 exe 文件时收到另一个错误：“过程入口点 initializecriticalsection 无法位于动态库 KERNEL32.dll 中”。

现在我不知道该怎么做:(。如果有人可以帮助我，我将不胜感激:)。

请注意，我尝试了一个简单的对话框 MFC 程序，但没有添加任何代码。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-07T12:36:02.297

[这是 Visual Studio 2012 Update 2 中的一个错误](https://connect.microsoft.com/VisualStudio/feedback/details/783276/vs2012-2-v110-xp-broken-the-procedure-entry-point-initializecriticalsectionex-could-not-be-located-in-the-dynamic-link-library-kernel32-dll)。该链接有一个更新 2 的解决方法（尽管来自社区），微软有这样的说法：

> **微软于 2013 年 6 月 5 日 16:16 发表**
> 
> 是的，这在更新 3 中已修复

所以你最好的选择是回滚到更新 1 或等待更新 3。

**编辑** [Visual Studio 2012 Update 3 Release Candidate 已发布，带有“上线”许可](http://www.microsoft.com/en-us/download/details.aspx?id=38832)。警告：

> **支持声明**：
> 
> Visual Studio 2012 Update 3 RC 和带有 Update 3 RC 的 Team Foundation Server 2012 已“上线”。这意味着客户可以在生产环境中使用这些构建。**这些仍然是预发布版本**，因此可能会有一些错误将在最终版本中修复。支持从 Update 3 RC 升级到 Update 3 RTM。为了升级到未来的版本，客户必须首先从 Update 3 RC 升级到 Update 3 RTM。

更多信息可[在此处](http://blogs.msdn.com/b/vcblog/archive/2013/05/07/fix-visual-studio-2012-update-2-breaks-windows-xp-targeting-with-atl-and-or-statically-linking-mfc.aspx)获得。

**编辑 2**结果[回滚到更新 1 会破坏 Visual Studio](https://connect.microsoft.com/VisualStudio/feedback/details/785396/uninstalling-vs2012-update-2-and-repair-of-vs-results-in-atl-files-missing) ...

# java - 如何在java中使用预先给定的整数列表进行评分系统？

> ID：16118751
> 
> 赞同：1
> 
> 时间：2013-04-20T09:31:30.677
> 
> 标签：java

我想将给出的分数列表转换为等级。

```
public static void main (String[] arg){

   int[] m= Student.getMarks();

}

public static char grade (int[] m){
  int[] lowestg = {80,70};
  char[] g = new char[m.length];
  for (int x=0; x<m.length; x++){
    n=0;        
    for (int y=0; y<m.length; y++){
       if (m[x]>=lowestg[0]){
        g[y] = 'H';
       }
       else if (m[x]>=lowestg[1]){
        g[y] = 'D';
       }
       else 
        g[y] = 'F';
    }
  return g;
  }
 } 
```

我也想把它放到一个字符数组中。

当我尝试构建它时，它正在炫耀

> 错误：不兼容的类型

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-20T09:34:48.130

```
 g[y] = 'HD'  --> HD is not a char... 
```

您可以将 char [] g 更改为 String [] g

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-20T09:41:58.467

您的代码不清楚。我想这就是你想要的。

```
public static char[] grade(int[] m) {
    char[] g = new char[m.length];
    for (int i = 0; i < m.length; i++) {
        if (m[i] >= 80)
            g[i] = 'H';
        else if (m[i] >= 70)
            g[i] = 'D';
        else
            g[i] = 'F';
    }
    return g;
} 
```

它`public static char[] grade(int[] m)`不在`public static char grade(int[] m)`我的代码中。

# sql-server-2005 - SQL Server 2005 存储过程中的无效列

> ID：16118755
> 
> 赞同：0
> 
> 时间：2013-04-20T09:31:58.057
> 
> 标签：sql-server-2005, stored-procedures

我刚刚在一个`UserBasics`名为 name的表中创建了一个属性`SkillType`。

我正在尝试`SkillType`在我的存储过程中使用（新值）：

```
CREATE PROCEDURE SelectMentor 
    -- Add the parameters for the stored procedure here
    @Zip varchar(20) = NULL,
    @Company varchar(200) = NULL,
    @Designation varchar(100) = NULL,
    @Interest varchar(200) = NULL,
    @CurrentID varchar(200) = NULL,
    @SkillType varchar(50)  =NULL
AS
BEGIN
    -- SET NOCOUNT ON added to prevent extra result sets from
    -- interfering with SELECT statements.
    SET NOCOUNT ON;

    -- Insert statements for procedure here
    SELECT 
       user_Id, user_Fullname,
       Designation, Company,user_Email
    FROM
       (SELECT
           user_Id, user_Fullname, user_Zip ,user_Need,user_Email,
           STUFF(
               (SELECT ', ' + Designation
                FROM   UserProfession
                WHERE  Prof_ID = a.user_Id
                FOR XML PATH (''))
                , 1, 1, '')  AS Designation,
           STUFF(
               (SELECT DISTINCT ', ' + Company
                FROM   UserProfession
                WHERE  Prof_ID = a.user_Id
                FOR XML PATH (''))
                , 1, 1, '')  AS Company
        FROM UserBasics AS a
        GROUP BY 
             user_Id, user_Fullname, user_Zip, user_Need, user_Email) s
   WHERE  
      (@Zip is null or user_Zip like '%'+@Zip+'%') and
      (@Interest is null or user_Need like '%'+@Interest+'%') and
      (@Company is null or Company like '%'+@Company+'%') and
      (user_Id != @CurrentID) and
      (SkillType = @SkillType) and
      (@Designation is null or Designation like '%'+@Designation+'%')
END
GO 
```

但它说

> 消息 207，级别 16，状态 1，过程 SelectMentor，第 46 行
> 无效的列名称“SkillType”。

我知道它的缓存问题，但是我如何刷新 SQL Server 2005 中的缓存。

请指导我正确的方向

问候，

**编辑**

我还尝试刷新对象资源管理器并尝试重新启动服务，但仍然出现错误。我可以看到表格中的列。重新创建存储过程也没有让我走向成功

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-20T09:34:03.683

您需要将新列 , 包含`SkillType`在子选择的选择列表中：

```
FROM
    (
      SELECT
           user_Id, user_Fullname, user_Zip ,user_Need,user_Email, 
           SkillType   -- <-----
           STUFF(
               (SELECT ', ' + Designation
                FROM   UserProfession
                WHERE  Prof_ID = a.user_Id
                FOR XML PATH (''))
                , 1, 1, '')  AS Designation,
           STUFF(
               (SELECT DISTINCT ', ' + Company
                FROM   UserProfession
                WHERE  Prof_ID = a.user_Id
                FOR XML PATH (''))
                , 1, 1, '')  AS Company
      FROM UserBasics AS a
      GROUP BY user_Id, user_Fullname, user_Zip ,user_Need,user_Email, 
               SkillType  -- <-----
    ) s 
```

否则，您不能在外部`WHERE`子句中引用它。

# angularjs - orderBy后Angularjs错误的$index

> ID：16118762
> 
> 赞同：92
> 
> 时间：2013-04-20T09:32:56.403
> 
> 标签：angularjs, sorting, indexing, angularjs-orderby

我是 Angular.js 的新手，在排序数组和处理排序数据时遇到了一些问题。

我有一个包含项目的列表，并希望按“Store.storeName”对它进行排序，到目前为止它正在工作。但是在对数据进行排序后，我的删除功能不再起作用。我认为那是因为 $index 在排序后是错误的，所以错误的数据被删除了。

我该如何解决？在范围内而不是在视图中排序数据？怎么做？

以下是一些相关代码：

在视图中：

```
<tr ng-repeat="item in items | orderBy:'Store.storeName'">
                <td><input class="toggle" type="checkbox" ng-model="item.Completed"></td>
                <td>{{item.Name}}</td>
                <td>{{item.Quantity}} Stk.</td>
                <td>{{item.Price || 0 | number:2}} €&lt;/td>                
                <td>{{item.Quantity*item.Price|| 0 | number:2}} €&lt;/td>
                <td>{{item.Store.storeName}}</td> 
                <td><a><img src="img/delete.png" ng-click="removeItem($index)">{{$index}}</a></td>
            </tr> 
```

在我的控制器中，我有这个删除功能，它应该删除特定的数据：

```
$scope.removeItem = function(index){
        $scope.items.splice(index,1);
    } 
```

这在视图中订购之前效果很好。如果缺少重要的东西，请让我现在。

谢谢！

* * *

## 回答 #1

> 赞同：140
> 
> 时间：2013-04-20T09:49:15.137

相反，或者中继`$index`- 正如您所注意到的 - 将指向已排序/过滤数组中的索引，您可以将项目本身传递给您的`removeItem`函数：

```
<a><img src="img/delete.png" ng-click="removeItem(item)">{{$index}}</a> 
```

并修改`removeItem`函数以使用数组的方法查找索引`indexOf`，如下所示：

```
$scope.removeItem = function(item){
   $scope.items.splice($scope.items.indexOf(item),1);
} 
```

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2014-09-16T05:59:03.423

我开始学习角度并面临类似的问题，根据@pkozlowski-opensource 的回答，我解决了它

```
<a>
  <img src="img/delete.png" ng-click="removeItem(items.indexOf(item))">
  {{items.indexOf(item)}}
</a> 
```

* * *

## 回答 #3

> 赞同：19
> 
> 时间：2014-04-10T03:33:22.073

我有同样的问题，这个主题的其他答案不适合我的情况。

我用自定义过滤器解决了我的问题：

```
angular.module('utils', []).filter('index', function () {
    return function (array, index) {
        if (!index)
            index = 'index';
        for (var i = 0; i < array.length; ++i) {
            array[i][index] = i;
        }
        return array;
    };
}); 
```

可以这样使用：

```
<tr ng-repeat="item in items | index | orderBy:'Store.storeName'"> 
```

然后在 HTML 中你可以使用`item.index`而不是`$index`.

此方法适用于对象的集合。

请注意，此自定义过滤器应该是应用的所有过滤器列表中的第一个过滤器（orderBy 等），它会将附加属性`index`（名称可自定义）添加到集合的每个对象中。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-07-25T12:49:39.993

尝试这个：

```
$scope.remove = function(subtask) {

    var idx = $scope.subtasks.indexOf(subtask),
        st = $scope.currentTask.subtasks[idx];

    // remove from DB
    SubTask.remove({'subtaskId': subtask.id});

    // remove from local array
    $scope.subtasks.splice(idx,1);

} 
```

你可以在我的博客的[这篇](http://sky2high.net/en/2013/04/angularjs-do-not-pass-index-in-ng-repeat-if-you-use-orderby/)文章中找到详细的解释。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2017-07-24T10:40:55.620

如果有人需要使用`$index`，您可以为排序/过滤的数组命名：

```
<tr ng-repeat="item in sortedItems = (items | orderBy:'Store.storeName') track by $index"> 
```

[在这里](https://stackoverflow.com/a/45278243/5268014)查看我的答案。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2014-08-06T18:45:43.057

我本来只是发表评论，但我没有“声誉”。

mile 的解决方案也正是我所需要的。回答 pkozlowski.opensource 的问题：当您有嵌套`ngRepeat`的 s、动态列表（例如，您允许删除的地方）或两者（这是我的情况）时，使用`$index`不起作用，因为它将是后端的错误索引排序后的数据和`ngInit`用于缓存值的数据也不起作用，因为列表更改时不会重新评估它。

请注意，mile 的解决方案允许通过传递参数来自定义附加的索引属性名称`<tr ng-repeat="item in items | index:'originalPosition' | orderBy:'Store.storeName'">`

我的调整版本：

```
.filter( 'repeatIndex', function repeatIndex()
{
// This filter must be called AFTER 'filter'ing 
//  and BEFORE 'orderBy' to be useful.
    return( function( array, index_name )
    {
        index_name = index_name || 'index';
        array.forEach( function( each, i )
        {each[ index_name ] = i;});
        return( array );
    });
}) 
```

# testing - 可扩展性与负载或性能测试有何不同？

> ID：16118764
> 
> 赞同：1
> 
> 时间：2013-04-20T09:33:08.910
> 
> 标签：testing, load, scalability

我希望这个问题适合这里。我一直在对上述主题进行研究，但看不出有什么区别。许多消息来源简单地说“可扩展性测试确保软件产品在未来和现在都符合效率要求”。在我看来，这听起来像是具有未来预期负载的纯负载测试，可扩展性部分在哪里？我期望某种扩展（缩放）系统。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-20T10:21:27.790

**可伸缩性测试**与**负载测试**不同。

**可扩展性测试：**测试要升级的软件产品以适应增加的负载的能力。

然而，

**负载测试：**一种性能测试类型，用于评估组件或系统在负载增加时的行为，例如并行用户的数量和/或事务的数量，以确定组件或系统可以处理哪些负载。

# asp.net - 为什么我在下面的代码中得到 NULL EXCEPTION？

> ID：16118766
> 
> 赞同：0
> 
> 时间：2013-04-20T09:33:30.547
> 
> 标签：asp.net, gridview

我正在获取`NULLREFERENCEEXCEPTION`网格视图中的更新查询。

```
protected void GridView1_RowUpdating(Object sender, GridViewUpdateEventArgs e)
{
   TextBox txtname = (TextBox)GridView1.Rows[e.RowIndex].FindControl("txtname1");
   cmd.Connection = con;
   cmd.CommandText = "update test1 set Name='" + txtname.Text + "' where Roll_No = '" 
                     + GridView1.DataKeys[e.RowIndex].Values[0].ToString() + "'";
   con.Open();
   int temp = cmd.ExecuteNonQuery();
   if (temp == 1)
   {
      Label1.Text = "Record updated sucessfully"; 
   }
   GridView1.EditIndex = -1;
   FillGrid();
   con.Close();        
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T09:47:59.717

试试这个来验证问题的根源：

```
 TextBox txtname = GridView1.Rows[e.RowIndex].FindControl("txtname1") as TestBox;
   if(txtname is null)
   {
     Response.Write("Unable to find txtname");
     return;
   } 
```

如果您的网格位于母版页的 ContentPlaceHolder 中，则控件的 Id 将在运行时更改。您可以将文本框的“ClientIdMode”属性设置为“静态”，以便 ID 在运行时保持不变。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-20T09:44:34.723

使用它来调试它。

```
try{ 
TextBox txtname = (TextBox)GridView1.Rows[e.RowIndex].FindControl("txtname1");
cmd.Connection = con;
cmd.CommandText = "update test1 set Name='" + txtname.Text + "' where Roll_No = '" + GridView1.DataKeys[e.RowIndex].Values[0].ToString() + "'";
con.Open();
int temp = cmd.ExecuteNonQuery();
if (temp == 1)
{ Label1.Text = "Record updated sucessfully"; }
else{Label1.Text = "Updating failure";}
GridView1.EditIndex = -1;
FillGrid();
con.Close();
}
catch (Exception e)
{
e.printStackTrace();
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-20T09:38:09.530

有很多，但有些可能性是

```
TextBox txtname = (TextBox)GridView1.Rows[e.RowIndex].FindControl("txtname1"); 
```

该行中没有文本框。由于某种原因。

```
GridView1.DataKeys[e.RowIndex].Values[0].ToString() 
```

上述值为空。

其他原因可能是您可能将其绑定`page_load`而不是`page_load (!Page.IsPostBack)`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-20T09:38:50.110

确保您拥有正确的控件名称并检查 null

```
if(GridView1.Rows[e.RowIndex].FindControl("txtname1")!=null)
{
  //your code
} 
```

调试您的代码并查看它在哪里生成异常。

# visual-studio - 如何通过 TFS 2010 中的时间表更改工作项的已完成工作

> ID：16118770
> 
> 赞同：1
> 
> 时间：2013-04-20T09:34:13.320
> 
> 标签：visual-studio, tfs

我想要一个简单的编辑器来填写开发人员的时间表。增加已完成工作的主要问题是我们无法对过去几天进行更改。

我在 codeplex 找到了这个很棒的工具：http://tfstimesheet.codeplex.com/[但](http://tfstimesheet.codeplex.com/) 它似乎不适用于 TFS 2010，因为它的最后一个版本是 2009 年的，并且记录在 TFS 2008 上使用。

有没有其他方法可以填写 TFS 2010 中的时间表？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-22T09:54:50.957

Tfs doesn't provide time-sheet functionality and has no concept of date in regard to completed work (in default templates atleast).

Any tool including the one you linked relies on its own datastore and timesheet frontend to fill data into tfs workitems and attach required timesheet information and save it into datastore. Depending on its sofistication it may or may not detect changes done directly in workitem (most likly will not).

Quick google search 'tfs timesheet application' returns several options, i have used chrono and it generaly gets the job done, cant say anything on install and configuration as i was not involved with those.

[http://tfstimesheets.codeplex.com/](http://tfstimesheets.codeplex.com/)

[http://www.teamexpand.com/product/tx-chrono](http://www.teamexpand.com/product/tx-chrono)

# c# - 自动在网站 Facebook 页面发布网站帖子

> ID：16118773
> 
> 赞同：4
> 
> 时间：2013-04-20T09:34:44.980
> 
> 标签：c#, facebook

我有一个网站，当在我的网站中创建新帖子时，我也想在网站的 Facebook 页面中发布它（作为 Facebook 页面管理员，而不是在网站上发布它的用户）。当然，我是 Facebook 页面的管理员。如何做呢？

我要发布的内容是一张图片和一些描述。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-08-28T20:15:50.817

您可以将[Facebook Graph API](https://developers.facebook.com/docs/graph-api/common-scenarios)和[Facebook SDK for .NET](https://github.com/facebook-csharp-sdk/facebook-csharp-sdk)用于您的目的。

`C#`如果你想用代码而不是来做到这一点`java-script`，你会得到类似下面的代码：

**C＃**

```
private void SendToFacebook(string facebookUserScreenName, string fbAppToken, string link, string linkName, string message, string caption, string imageUrl)
{
   var client = new FacebookClient(fbAppToken);
   dynamic feedRez = client.Get(facebookUserScreenName);
   var userId = feedRez.id;

   var url = String.Format("https://graph.facebook.com/{0}/feed?access_token={1}", userId, fbAppToken);

   var req = WebRequest.Create(url);
   req.Method = "POST";
   req.ContentType = "application/x-www-form-urlencoded";

   var post = String.Format("{0}&message={1}&link={2}&name={3}&caption={4}&picture={4}",
                                 HttpUtility.UrlEncode(fbAppToken),
                                 HttpUtility.UrlEncode(message),
                                 HttpUtility.UrlEncode(link),
                                 HttpUtility.UrlEncode(linkName),
                                 HttpUtility.UrlEncode(caption),
                                 HttpUtility.UrlEncode(imageUrl));

   var byteArray = Encoding.UTF8.GetBytes(post);
   var stream = req.GetRequestStream();

   stream.Write(byteArray, 0, byteArray.Length);
   stream.Close();

   try
   {
      WebResponse response = req.GetResponse();
   }
   catch (Exception ex)
   {
      //log exception
   }
} 
```

要获取更多详细信息，请参阅[发布到 Feed](http://facebooksdk.net/docs/windows/howtos/publish-to-feed/)

我希望它能帮助你解决你的问题

# php - PayPal IPN 的问题

> ID：16118775
> 
> 赞同：0
> 
> 时间：2013-04-20T09:35:11.880
> 
> 标签：php, paypal, paypal-ipn

只是想知道是否有人可以帮助我解决我在 PayPal IPN 方面遇到的令人沮丧的问题。我的代码是：

```
<?php
    error_reporting(E_ALL);
    // tell PHP to log errors to ipn_errors.log in this directory
    ini_set('log_errors', true);
    ini_set('error_log', dirname(__FILE__).'/ipn_errors.log');

    // intantiate the IPN listener
    include('ipnlistener.php');
    $listener = new IpnListener();

    // tell the IPN listener to use the PayPal test sandbox
    $listener->use_sandbox = false;

    // try to process the IPN POST
    try {
       $listener->requirePostMethod();
       $verified = $listener->processIpn();
    } catch (Exception $e) {
       error_log($e->getMessage());
       exit(0);
    }

    // TODO: Handle IPN Response here
    // ... 

    if ($verified) {
       echo 'hello';
       // TODO: Implement additional fraud checks and MySQL storage
       mail('my email here', 'Valid IPN', $listener->getTextReport());
    } else {
       // manually investigate the invalid IPN
       mail('my email here', 'Invalid IPN', $listener->getTextReport());
    } 
```

?>

我的 ipnlistener.php 是这里给出的：[https ://github.com/Quixotix/PHP-PayPal-IPN](https://github.com/Quixotix/PHP-PayPal-IPN)

当有人提交付款时，我确实收到了 Valid IPN 电子邮件，正如我在代码中应该看到的那样，但没有其他任何回显（即 hello 没有回显），并且我的页面的页脚不存在。这就像拒绝回应任何东西，但确实遵循其余的命令。在我的错误日志中，我总是得到“无效的 HTTP 请求方法”。

任何人都可以帮忙吗？

谢谢。

编辑：以防万一它有助于知道，之前的任何回应

```
try {
   $listener->requirePostMethod();
   $verified = $listener->processIpn();
} catch (Exception $e) {
   error_log($e->getMessage());
   exit(0);
} 
```

很好，但是之后的任何回声都不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T14:22:11.613

“无效的 HTTP 请求方法”错误是由 requirePostMethod() 故意抛出的。这个想法是这个页面应该只接受 POST 请求。当您在浏览器中查看该页面时，这是一个 GET 请求。

编辑：当 requirePostMethod() 抛出异常时，这会阻止 PHP 解析页面的其余部分，这就是为什么事后没有回显的原因。

查看 GitHub 上对 requirePostMethod 的评论 => [https://github.com/Quixotix/PHP-PayPal-IPN/blob/master/ipnlistener.php](https://github.com/Quixotix/PHP-PayPal-IPN/blob/master/ipnlistener.php)（就在底部）。

希望有帮助！

# javascript - 如何将此JS代码转换为异步

> ID：16118781
> 
> 赞同：0
> 
> 时间：2013-04-20T09:35:52.990
> 
> 标签：javascript

给定一组相互依赖的选择框（在 A 中选择某些内容会用值填充 B），我希望构建一个具有可能值组合的对象。

```
# out = { FieldNameA: [ { key: 'A', value: '', dep: { FieldNameB: [ { key: 'B', value: '', dep: [] } ] } } ] } 
```

这是我正在使用的代码。

```
function getFieldValues(selectors) {
  if (selectors.length == 0) {
    return [];
  }

  var fieldInfo = selectors.shift();
  var field = document.querySelector(fieldInfo['selector']);

  for (var i=0; i<field.options.length; i++) {
    var evt = document.createEvent("HTMLEvents");
    evt.initEvent("change", false, true);

    field.selectedIndex = i;
    field.dispatchEvent(evt);

    var option = field.options[i]; 
    var fieldName = fieldInfo['name'];

    if (!result[fieldName]) {
      result[fieldName] = [];
    }

    var fieldData = { key: option.value, value: option.innerHTML };

    alert('starting child retrieval of data');
    var dependencies = getFieldValues(selectors.slice(0));

    if (dependencies) {
      fieldData['dependencies'] = dependencies;
    }

    result[fieldName].push(fieldData);
  }

  return result;
}

out = getFieldValues(selectors);
console.log(JSON.stringify(out)); 
```

我需要使其异步以在调度事件代码之后添加延迟，以便填充第二个选择中的值。但是，我转换此代码的尝试失败了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T09:42:55.333

我为每个循环处理异步的简单方法是这样做

```
function myfunc(callback) {
  var dfd = jQuery.Deferred();
  dfd.done(callback);
  var A = [var1,var2,var3]
  var index = 0;
  var next = function() {
    if(index<A.length) {
      var item = A[index];
      index++;
      // Do what you want.
      setTimeout(next, 1); // or only next();
    } else {
      dfd.done();
    }
  };
  next();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-20T09:55:15.573

如果您想使其异步并添加延迟，您可以使用 javascript **Timing Event**

```
setTimeout(function(){<Code you want to execute>}, <delay in milliseconds>); 
```

检查：[http ://www.w3schools.com/js/js_timing.asp](http://www.w3schools.com/js/js_timing.asp)

希望这可以帮助

# ruby-on-rails - 在所有页面上呈现操作

> ID：16118783
> 
> 赞同：0
> 
> 时间：2013-04-20T09:36:01.803
> 
> 标签：ruby-on-rails

为所有页面呈现动作（即“新闻”）的正确方法是什么？我想要这样的东西：

应用程序.html.erb

```
<!DOCTYPE html>
<html>
...
 <div class="side">
  <%= render :template => 'news/index' %> 
 </div>
 <div class="main">
  <%= yield %>
 </div>
...
</html> 
```

和 news_controller.rb

```
class NewsController < ApplicationController
  def index
   @news_previews = News.news_for_quick_preview
    render :layout => false 
  end
end 
```

但现在它不起作用。@news_previews => 无

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-20T09:40:49.760

add `before_filter :load_news` in application controller

```
before_filter :load_news 
def load_news
  @news_previews = News.news_for_quick_preview
end 
```

# c++ - c ++函数返回一个枚举？

> ID：16118785
> 
> 赞同：14
> 
> 时间：2013-04-20T09:36:06.617
> 
> 标签：c++, function, enums

所以我有一个名为 paddleNS 的命名空间，用于名为 paddle 的类，在 paddleNS 内部我有一个名为 color 的枚举

```
namespace paddleNS
{
   enum COLOUR {WHITE = 0, RED = 1, PURPLE = 2, BLUE = 3, GREEN = 4, YELLOW = 5, ORANGE = 6};
}

class Paddle : public Entity
{
private:
    paddleNS::COLOUR colour;
public:
    void NextColour();
    void PreviousColour();
    void PaddleColour(paddleNS::COLOUR col) { colour = col; }
}; 
```

现在，我想知道的是我将如何创建一个函数来返回当前的颜色，还有一种更简单的方法可以以文本形式而不是值返回它，还是我最好只使用 switch弄清楚颜色是什么？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-04-20T09:37:57.390

只需按值返回枚举：

```
class Paddle : public Entity
{
  // as before...

  paddleNS::COLOUR currentColour() const { return colour; }
}; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2018-11-14T09:02:52.717

嘿，您可以在标题中创建如下所示的函数：

```
enum COLOUR function(); 
```

当你定义一个函数时：

```
enum Paddle::COLOUR Paddle::function(){
        // return some variable that hold enum of COLOUR
} 
```

在 main.cpp 我`enter code here`认为你可以管理它

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-20T09:49:52.167

```
class Paddle : public Entity
{
  // ----

  const char* currentColour() const { 
switch(couleur)
{
 case WHITE:
   return "white";
   break;
//And so on
}
}
}; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-07-14T20:14:27.160

保留一个字符串数组，其中该字符串数组的索引与您正在使用的枚举值匹配。

因此，如果您有：

```
enum COLOUR {WHITE = 0, RED = 1, PURPLE = 2, BLUE = 3, GREEN = 4, YELLOW = 5, ORANGE = 6}; 
```

然后我将定义一个数组：

```
String colors[] = {white, red, purple, blue, green, yellow, orange} 
```

然后，当您有一个函数返回此类型的枚举时，您可以将其放入数组中并以字符串格式获取正确的颜色。

# asp.net - 如何在asp.net中将会话值从第2页传递到第1页？

> ID：16118786
> 
> 赞同：0
> 
> 时间：2013-04-20T09:36:06.947
> 
> 标签：asp.net, session, file-upload, listbox

我在第 1 页上有一个列表框和按钮，当我单击该按钮时，第 2 页将在新选项卡中打开。在第 2 页中，我将照片上传到文件夹并设置 session["FileName"] 值。我希望当我关闭第 2 页时，已上传图像的名称显示在列表框中。

注意： session["FileName"] = 上传图片的名称。

有人有想法吗？请帮我。

谢谢你。

我的上传课程：

```
public void ProcessRequest(HttpContext context)
{      
    if (context.Request.Files.Count > 0)
    {
        // get the applications path 

        string uploadPath = context.Server.MapPath(context.Request.ApplicationPath + "/Temp");
        for (int j = 0; j <= context.Request.Files.Count - 1; j++)
        {
            // loop through all the uploaded files 
            // get the current file 
            HttpPostedFile uploadFile = context.Request.Files[j];

            // if there was a file uploded 
            if (uploadFile.ContentLength > 0)
            {
                context.Session["FileName"] = context.Session["FileName"].ToString() + uploadFile.FileName+",";
                uploadFile.SaveAs(Path.Combine(uploadPath, uploadFile.FileName));
            }
        }
    }
    // Used as a fix for a bug in mac flash player that makes the 
    // onComplete event not fire 
    HttpContext.Current.Response.Write(" ");
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T09:43:07.150

Session 是 ASP.NET 中的服务器对象。这意味着，当您在一个页面上创建 Session 时，您可以在任何其他页面上使用它，只要 Session 对象没有被删除或过期。

假设您在 page1.aspx.cs 上执行此操作

```
Session["FileName"] = "file1"; 
```

然后您可以像这样在 page2.aspx.cs 上访问它：

```
if(Session["FileName"]!=null)
    Label1.Text = (string)Session["FileName"] 
```

因此，您只能在 .aspx 页面或 Control 派生类上访问 Session 变量。

如果要访问类库项目中的 Session 变量，请执行以下操作：

```
HttpContext.Current.Session["FileName"] 
```

此外，您似乎已经创建了一个 Custom `HttpModule`。

通知您的 HTTPModule 不得处理在会话状态初始化之前发生的任何管道事件。

[阅读本文](https://stackoverflow.com/questions/276355/can-i-access-session-state-from-an-httpmodule)以了解有关如何以及何时访问 HttpModule 中的 Session 变量的更多信息

# android - 为 android 自定义快速操作对话框

> ID：16118789
> 
> 赞同：5
> 
> 时间：2013-04-20T09:36:15.850
> 
> 标签：android, android-activity, customization, quickaction

我正在开发一个应用程序，我必须在单击按钮时显示快速操作对话框。这是我希望如何实现的示例。

![我想要实现的。](https://i.stack.imgur.com/ubuq5l.png)

直到现在我还想不出如何制作一个自定义的快速操作对话框。但是我尝试过使用一项活动以及一些我必须达到的目标。这是我到目前为止所做的。

单击按钮时，我将意图传递给活动：

```
if (v.getId() == R.id.points) {
        Toast.makeText(MainActivity.this, "Clicked on points",
                Toast.LENGTH_SHORT).show();
        Intent i = new Intent(MainActivity.this, PointsActionMenu.class);
        startActivity(i);
    } 
```

而且我习惯于`styles.xml`使活动透明。

样式.xml

```
<style name="Theme.Transparent" parent="android:Theme">
    <item name="android:windowIsTranslucent">true</item>
    <item name="android:windowBackground">@android:color/transparent</item>
    <item name="android:windowContentOverlay">@null</item>
    <item name="android:windowNoTitle">true</item>
    <item name="android:windowIsFloating">true</item>
    <item name="android:backgroundDimEnabled">false</item>
</style> 
```

实现这些东西我在我的屏幕上得到了这个 UI。 ![到达这里](https://i.stack.imgur.com/fhOyvl.png)

现在，我有两个问题：

1.  我使用了活动并设计了一个布局来满足我的需求。是否有任何简单的方法可以使用快速操作对话框来实现这一点。我已经为此经历了 2-3 个示例，但我无法根据需要对其进行自定义。
2.  就我使用活动实现而言，它显示在屏幕中央，我可以将活动的默认位置更改为右上角，如图所示。

任何一个答案都可以帮助我。

任何形式的帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-20T09:56:31.043

我想我解决了我的问题。这就是它现在的样子。

![What I found](https://i.stack.imgur.com/NAsqV.png)

集成以下代码来设置它的位置。

```
WindowManager.LayoutParams wmlp = this.getWindow().getAttributes();

    wmlp.gravity = Gravity.TOP | Gravity.LEFT;
    wmlp.x = 80; // x position
    wmlp.y = 60; // y position 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-20T10:32:37.833

您可能需要考虑在不同的设备和屏幕尺寸上会发生什么。考虑使用以下方法将像素缩放到 dp：

```
int x = (int) TypedValue.applyDimension(TypedValue.COMPLEX_UNIT_DIP, 80, getResources().getDisplayMetrics());
int y = (int) TypedValue.applyDimension(TypedValue.COMPLEX_UNIT_DIP, 60, getResources().getDisplayMetrics()); 
```

**编辑：**

```
wmlp.x = (int) TypedValue.applyDimension(TypedValue.COMPLEX_UNIT_DIP, 80, getResources().getDisplayMetrics());
wmlp.y = (int) TypedValue.applyDimension(TypedValue.COMPLEX_UNIT_DIP, 60, getResources().getDisplayMetrics()); 
```

# ruby-on-rails - 跨协会订购的最佳方式

> ID：16118791
> 
> 赞同：1
> 
> 时间：2013-04-20T09:36:22.907
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我有 3 个模型：

```
class Post
  has_many :comments
end

class Comment
  belongs_to :user
  belongs_to :post
end

class User
  has_many :comments
end 
```

现在在控制器中，我想调用@post.comments 并按 user.postcode 对这些评论进行排序。我尝试了以下但没有奏效：

```
class Post
  has_many :comments, :order => "user.postcode"
end 
```

我也试过：

```
class Comment
  def order_by_user_postcode
    includes(:user).order("user.postcode ASC")
  end
end

class PostsController
  @post.comments.order_by_user_postcode
end 
```

这导致

```
undefined method for ActiveRecord::Relation 
```

如何编写一个链接到@post.comments 以按user.postcode 排序的方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T13:02:20.727

您必须订购：

```
has_many :comments, :order => "users.postcode" 
```

表名是用户而不是用户。

第二个选项：

您必须实现类方法（或范围）之类的方法，而不是实例方法

```
 def self.order_by_user_postcode
   joins(:user).order("users.postcode ASC")
 end 
```

或范围：

```
scope :order_by_user_postcode, joins(:user).order("users.postcode ASC") 
```

# c - 使用 SLRE 库的未定义引用

> ID：16118792
> 
> 赞同：1
> 
> 时间：2013-04-20T09:36:25.877
> 
> 标签：c

我正在使用 SLRE ( [http://slre.sourceforge.net/](http://slre.sourceforge.net/) ) 在 C 程序中进行 REGEX 检查。我包括头文件，然后我执行以下操作：

```
void checkRegex() {
    struct slre slre;
    struct cap captures[4+1];

    if(!slre_compile(&slre, "regularexpression") {
        printf("error");
    }
} 
```

我正在使用该命令进行编译：`gcc example1.c -o test.cgi -L. -lconfig`我得到了那个错误：`example1.c:(.text+0x1af3): undefined reference to 'slre_compile'`

任何想法我做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-20T09:46:56.373

我查看了该库，它由 slre.c 和 slre.h 组成，因此您可能像这样编译它

```
gcc slre.c -o slre.o -c
gcc example1.c slre.o -o test.cgi -L -lconfig 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-20T09:43:50.287

您必须在程序中包含头文件**并**包含**slre.c。**SLRE 不是“仅标头”库。

* * *

编辑：刚刚在您的答案中看到了编译行。您可以使用此单线：

```
gcc example1.c slre.c -o test.cgi -L. -lconfig 
```

但是，这将（重新）每次编译 SLRE。为了节省一些编译时间，您应该使用 Adrian 的答案中的行缓存已编译的 SLRE。

# sql - UNION 查询错误

> ID：16118794
> 
> 赞同：0
> 
> 时间：2013-04-20T09:36:32.790
> 
> 标签：sql, oracle, oracle11g

我有以下两个表（DEPT 和 EMP）：

```
DEPT

DEPTNO,DNAME,LOC

EMP

EMPNO, ENAME,JOB,MGR,HIREDATE,SAL,COMM,DEPTNO 
```

我正在执行以下查询：“使用 UNION 显示部门编号和名称以及员工编号和名称。选择适当的列标题并按名称升序对其进行排序。”

这是我的查询：

```
SELECT Deptno, Dname 
FROM DEPT
ORDER BY Dname ASC
UNION
SELECT EMPNO,ENAME 
FROM   EMP
ORDER BY ENAME ASC; 
```

我想知道为什么会出现以下错误：

> 第 4 行的 UNION * 错误：ORA-00933：SQL 命令未正确结束。

谁能告诉我这里有什么问题？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-20T09:50:19.090

尝试这个

```
SELECT Deptno AS ID, Dname  AS NAME
FROM DEPT
UNION
SELECT EMPNO  AS ID,ENAME  AS NAME
FROM   EMP
ORDER BY NAME ASC 
```

**编辑**

要显示四列，请使用联接检查以下查询

```
SELECT E.EMPNO ,E.ENAME ,D.Deptno , D.Dname 
FROM DEPT D
INNER JOIN 
EMP E ON E.DeptNO = D.DeptNo
ORDER BY E.ENAME ASC 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-20T09:42:47.647

Remove `ORDER BY` clause in the first query.

So change to:

```
SELECT Deptno, Dname 
FROM DEPT
UNION
SELECT EMPNO,ENAME 
FROM   EMP
ORDER BY Dept.Dname, Emp.Ename ASC; 
```

Should work.

# css - 样式 CSS 不使用 CodeIgniter - Baseurl

> ID：16118795
> 
> 赞同：0
> 
> 时间：2013-04-20T09:36:46.387
> 
> 标签：css, image, codeigniter, base-url

这个问题已经被问过好几次了，但还没有找到适用于我的项目的正确答案。

我喜欢的 CSS 文件

```
<link rel="stylesheet" type="text/css" href="assets/css/style.css"/> 
```

css 文件位于：

```
-main_directory
  -Application
  -Assets
    -css
       -style.css
  -System 
```

我也尝试使用 base_url 链接 css，`href="<?php echo base_url('assets/css/style.css');?>"`但它对我不起作用。

那么问题是什么？任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T01:14:54.213

您的 base_url() 方法配置正确吗？检查这里...

```
ci_app_folder/config/config.php 
```

如果您的位于 c:/xampp/htdocs/ci_app_name

```
$config['base_url'] = 'localhost/ci_app_name'; //or localhost:90/ci_app_name if you had changed port 
```

然后你可以使用这个

```
<link rel="stylesheet" type="text/css"  href="<?php echo base_url('assets/css/style.css'); ?>" > 
```

您还可以将 base_url() 设置为空。如果您还没有上传到虚拟主机/服务器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-20T10:56:59.747

你的结构应该是这样的

```
myproject
  application
  assets
    css
       style.css
 system 
```

自动加载 url 助手`config/autoload.php`

```
$autoload['helper'] = array('url'); 
```

现在

```
<link href = '<?php echo base_url()?>/assets/css/style.css'> 
```

这应该有效。如果您使用的是 linux，请确保您的拼写正确并查看 casd 敏感问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-20T10:39:40.193

```
Try this once -
<link rel="stylesheet" type="text/css" href="<?php echo base_url();?>assets/css/style.css" /> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-05-08T23:05:17.507

您可以像这样放置自定义 css 链接：

```
 background-image:url(../../); moving back to the directory you want 
```

使用 CI，您需要使用内联 css：例如。

```
 <div style = background-image: url(<?php echo base_url();?>)assets/images/>
    </div> 
```

# android - 如何在保持比例的同时在 Android 中缩放位图？

> ID：16118796
> 
> 赞同：0
> 
> 时间：2013-04-20T09:36:54.277
> 
> 标签：android, bitmap, scale

我想为每个身体部位绘制一个人体`Bitmap`（因为我将对每个部位应用不同的滤色器和效果）。

所以我在 Photoshop 中画了一个身体，把它分成几部分，并将每一部分保存到一个单独的文件中，背景是透明的，并且所有这些都具有相同的尺寸。因此，如果我在彼此的视图中一个一个地绘制，最终的结果*应该是*整个身体，就像在切割零件之前一样。

但是我不知道如何管理布局可以使视图的可能缩放以保持每个身体部位的相对位置并实现人体的完美表示。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T12:53:04.063

如果要缩放位图，可以使用此功能：

```
 Bitmap scaledBmp = Bitmap.createScaledBitmap(originalBmp, int finalWidth, int finalHeight, false); 
```

此函数将“originalBmp”缩放为 finalWidth 和 finalHeight。如果您想保持比例将 finalWidth 替换为“originalBmp.getWidth()*0.8”，这将使位图小 20%（也可以使用高度）。

# git - git push 到远程存储库“无法从远程存储库读取”

> ID：16118797
> 
> 赞同：33
> 
> 时间：2013-04-20T09:36:56.560
> 
> 标签：git, ssh, repository, git-remote

我搜索了一段时间，但找不到解决问题的方法。

`git`我有一个服务器，我可以使用用户名和本地 git 存储库通过 ssh 连接。
现在我想将我的本地存储库推送到服务器上新创建的存储库。

这是我所做的：

*   在中创建了一个 git 存储库`/home/git/test.git`
*   将存储库初始化为裸
*   在本地机器上添加远程存储库
    `git remote add test ssh://git@serverIp:/home/git/test.git`
*   现在我执行了推送命令：
    `git push test master`

> 我总是得到

```
fatal: could not read from remote repository

Please make sure you have the correct access rights
and the repository exists. 
```

我正在使用本地 Windows 7 机器并想上传到 linux 服务器。
我可以使用用户通过 ssh 登录`git`。我还尝试以`root`用户身份执行此操作（以使事情工作一次），结果相同。
我从来没有被要求提供 ssh `password`。

我真的不知道我做错了什么。
在你称之为重复之前，我搜索了很多这个问题，但似乎没有人谈论同样的问题。

更新：

*   “哪个 git”返回 /usr/bin/git
*   PATH 回显包括 /usr/bin
*   id_rsa 和 id_rsa.pub 文件均已设置并输入密码
*   ssh git@serverIp which git-receive-pack 也可以工作并返回 /usr/bin/git-receive-pack
*   ssh git@serverIp ls /home/git/test.git 有效
*   所有相关目录都是 chmod 755
*   git 是存储库的所有者
*   auth.log 文件在尝试推送命令时没有新条目
*   GIT_TRACE=2 git push test master 返回：

    > 'C:\Program Files (x86)\PuTTY\plink.exe' '-batch' 'git@serverIp' 'git-receive-pack '\''/home/git/test.git'\''' 致命：无法从远程存储库中读取。请确保您具有正确的访问权限并且存储库存在。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-04-20T10:47:13.360

在这种情况下，使用 openssh 而不是 putty 是关键。

* * *

原始答案（调试提示）

> 我可以使用用户通过 ssh 登录`git`。

这意味着这有效：

```
ssh git@serverIp 
```

您确实`HOME`定义了一个变量，并且 ssh 公钥/私钥 ( `id_rsa`/ `id_rsa.pub`) 在`%HOME%/.ssh/`.

[这个问题](https://stackoverflow.com/a/13509396/6309)提出了一个不同的网址：

```
git remote set-url test git@serverIp:/home/git/test.git 
```

确保您确实将您的 git 存储库创建为 git（而不是作为 root，当您创建 git 帐户时，如[本问题所示](https://stackoverflow.com/q/15367016/6309)）。
`ssh git@serverIp "which git"`应该返回 git 可执行文件的路径。

还要检查所有父目录是否为用户或组`x`设置了相关（执行）位，运行。 此外，可以通过以下方式获取 git 命令的更多信息：`git``gitgroup``ls -ld /home /home/git /home/git/test.git`

*   `git push --verbose`
    或者：
*   `GIT_TRACE=2 git push test master`

如果您有带密码的 ssh 私钥，最好先使用*未受*密码保护的 ssh 私钥测试这些 ssh 命令，看看问题是否仍然存在。
或者，您可以保留受密码保护的 ssh 密钥，但[在此答案中](https://stackoverflow.com/a/11918742/6309)[仔细检查您的`.bashrc`](https://stackoverflow.com/a/11918742/6309)密钥。

* * *

对于任何 ssh 连接问题（需要 git 的密码），请检查：

*   `/var/log/auth.log`,
*   sshd[调试会话](https://serverfault.com/questions/130482/how-to-check-sshd-log)

* * *

在您的情况下，由于它适用于`ssh git@serverIp`（交互式安全外壳），但不适用于 git（打开一个非交互式安全外壳），请查看[此线程](https://groups.google.com/forum/?fromgroups=#!topic/git-users/fdxAkWOTTC8)，它引用[了这个](http://lists.apple.com/archives/macos-x-server/2008/Jun/msg00251.html)：

> 当使用命令行启动 ssh 时，会启动一个非交互式非登录 shell。
> 但是...在这种情况下`bash`不使用`$BASH_ENV`，因此将其设置为`~/.ssh/environment`（例如 to `/etc/profile`）无济于事。
> bash 所做的是 source`/etc/bashrc`和`~/.bashrc`.

确保`/etc/profile`确实定义了 的[路径`git`](https://stackoverflow.com/a/15532349/6309)，因为[可以在此处使用非登录帐户](https://stackoverflow.com/a/15651459/6309)（此处似乎就是这种情况，因为`ssh git@serverIp "which git"`有效，而且`ssh git@serverIp "git --version"`应该也是如此）。

但也要检查正确的问题，并`chmod 755`在`/home`,`/home/git`和上测试 a `/home/git/test.git`。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2014-07-13T15:33:48.240

您还可以通过以下方式检查您的 SSH 身份：

```
$ ssh-add -L 
```

我有一个类似的问题。我的身份中有一个错误的密钥，不记得为什么。我只是删除了我所有的身份（也许您需要再次添加密钥）：

```
$ ssh-add -D 
```

然后我没有问题地推/拉。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2014-01-29T10:58:48.380

我个人对此有两个不同的问题：

1.  `plink`（在 Windows 上由 git 使用）不接受`id_rsa`私钥，因为它是 OpenSSH 2 格式 => 我必须将它（使用`puttygen`）转换为 PuTTY 自己的`.ppk`格式并通过 Git 扩展“ `Remotes`”对话框附加

2.  我错误地指定了 git 文件夹的路径，因为我的 ssh 会话被 chroot（这可能是错误的词）并且我将我的 FTP“ `root`”指定为“ `/`”，而它是“ `/home/www/username/`”。

我理解了这一切，`GIT TRACE=2`如上所述使用，也通过使用`procmon`来确定确切的命令行`plink`，然后使用它，添加“ `-v`”选项（“详细”）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-11-04T20:31:52.263

将 GIT_SSH 环境变量设置为`TortoisePlink.exe`（您可能需要为此下载 TortoiseGit）的完整路径，而不是 PuTTY 的`plink.exe`. 这将允许弹出对话框窗口提示一些事情，即确认指纹或输入密码。如果`plink.exe`通过 Git 使用，则无法对 plink.exe 提示输入响应，如果有任何提示将导致您看到的致命错误。

# windows - Windows 如何跟踪 VirtualAllocdBlocks 的大小？

> ID：16118798
> 
> 赞同：0
> 
> 时间：2013-04-20T09:37:05.777
> 
> 标签：windows, heap-memory, windbg

我想知道 Windows 如何跟踪“VirtualAllocdBlocks”的大小。根据 WinDBG，内存块在双向链表中进行管理。但是这个结构（_LIST_ENTRY）只包含两个指针。如何获得这样一个块的大小（在 WinDBG 中）以及存储在内存中的大小？

```
0:008> dt _HEAP 0x00150000 
ntdll!_HEAP
   ...
   +0x050 VirtualAllocdBlocks : _LIST_ENTRY [ 0x3e40000 - 0x13950000 ]
   ...
0:008> dt _LIST_ENTRY 0x3e40000 
ntdll!_LIST_ENTRY
 [ 0x3f50000 - 0x150050 ]
   +0x000 Flink            : 0x03f50000 _LIST_ENTRY [ 0x4050000 - 0x3e40000 ]
   +0x004 Blink            : 0x00150050 _LIST_ENTRY [ 0x3e40000 - 0x13950000 ] 
```

# c++ - opengl 3.3 / glew 1.9 VBO 支持返回 false

> ID：16118799
> 
> 赞同：0
> 
> 时间：2013-04-20T09:37:11.687
> 
> 标签：c++, opengl, vbo, glew

我已经构建了一个简单的 OpenGL 窗口并检查了它的支持。它返回的支持：

*   发光：1.9.0

*   OpenGL：3.3.0

我遇到的问题是由于创建形状（VBO）。在根据教程创建形状时，我无法将图像（简单的三角形）显示到屏幕上。实现此目的的唯一方法是使用即时模式或基本顶点数组。

我询问是否使用 GLEW 检查 vbo 支持，但我发现的所有建议都包括：

```
if ( glewGetExtension("GL_VERSION_1_9") 
    && glewGetExtension( "GL_ARB_vertex_buffer_object" ))
        {
            std::cout << "VBO supported." << std::endl;
        }
    else
        {
            std::cerr << "ARB_vertex_buffer_object not supported!" << std::endl;
        } 
```

返回错误。

关于可能是什么问题的任何建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T10:52:42.980

停止检查`ARB_vertex_buffer_object`。事实上，停止*使用*ARB_vertex_buffer_object。使用[*核心*](http://www.opengl.org/wiki/Buffer_Object)[功能，](http://www.opengl.org/wiki/Buffer_Object)[而](http://www.opengl.org/wiki/Buffer_Object)*不是扩展功能。如果您要求使用 OpenGL 3.3 版，那么您在核心中*有*缓冲区对象功能。用那个。*

 *```
glewGetExtension("GL_VERSION_1_9") 
```

没有这样的扩展。也没有 OpenGL 1.9 版，所以我不知道你为什么要这样检查。

如果要检查 OpenGL 版本，则应[使用 OpenGL 功能](http://www.opengl.org/wiki/Get_Context_Info#OpenGL_version_number)来执行此操作：

```
GLint major = 0;
GLint minor = 0;
glGetIntegerv​(GL_MAJOR_VERSION​, &major);
glGetIntegerv​(GL_MINOR_VERSION​, &minor); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-21T07:49:22.723

弄清楚我为什么会出错。问题是我在创建窗口之前检查了 glew 。所以我在创建窗口后添加条件后，一切都开始正常工作。万一有人遇到这个问题，请`glewInit()`在创建窗口后调用。*

# c# - SQL查询后存储主键

> ID：16118800
> 
> 赞同：3
> 
> 时间：2013-04-20T09:37:44.500
> 
> 标签：c#, sql, sql-server

以下情况：

我有一个用于在 ESX 环境中创建 VM 的 ASP.NET 网站。用户可以选择一些设置并单击一个按钮来创建 VM。

此按钮的 Click-Event 检查值并将其写入 MS SQL Server。该表有一个`primary key (Integer, IDENTITY)`我不需要插入的（因为`IDENTITY`）。

但我需要这个主键，因为我在事件发生后将用户重定向到另一个页面，而这个页面需要主键进行常规查询（使用查询字符串发送）。

目前，我在查询之后直接进行 SELECT`INSERT INTO`查询并获取最后一个条目。只要只有一个用户使用此页面，它就可以工作。

我的问题是：

是否可以`IDENTITY`直接从`INSERT INTO`查询中接收主键（如函数的返回值）？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-20T09:38:58.830

Yes.

Use the [`OUTPUT`](http://msdn.microsoft.com/en-us/library/ms177564%28v=sql.105%29.aspx) clause

example from the MSDN link:

> The following example inserts a row into the ScrapReason table and uses the OUTPUT clause to return the results of the statement to the @MyTableVar table variable. Because the ScrapReasonID column is defined with an IDENTITY property, a value is not specified in the INSERT statement for that column.

```
USE AdventureWorks2008R2;
GO
DECLARE @MyTableVar table( NewScrapReasonID smallint,
                           Name varchar(50),
                           ModifiedDate datetime);
INSERT Production.ScrapReason
    OUTPUT INSERTED.ScrapReasonID, INSERTED.Name, INSERTED.ModifiedDate
        INTO @MyTableVar
VALUES (N'Operator error', GETDATE());

--Display the result set of the table variable.
SELECT NewScrapReasonID, Name, ModifiedDate FROM @MyTableVar;
--Display the result set of the table.
SELECT ScrapReasonID, Name, ModifiedDate 
FROM Production.ScrapReason;
GO 
```

(Assuming you are using Sql Server)

-==========================

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-20T09:40:11.193

Off the top of my head, [@@IDENTITY](http://msdn.microsoft.com/en-gb/library/aa933167%28v=sql.80%29.aspx) is what you want here.

That is of course assuming you are using MS SQL server.

eg `Insert into xxx.... ; select @@IDENTITY`

**EDIT:**

As Mitch Wheat pointed out, [@@SCOPE_IDENTITY](http://msdn.microsoft.com/en-gb/library/ms190315.aspx) is a better option than @@IDENTITY. This is because @@SCOPE_IDENTITY returns the ID in the current scope, whereas @@IDENTITY may return an ID created by a trigger or a UDF.

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-20T10:09:38.837

我认为您也可以使用 Sequence 来解决您的问题。

序列自动生成一系列唯一编号，可用作主键。

# html - 以从文本文件读取后可以提交的表单格式输出

> ID：16118810
> 
> 赞同：0
> 
> 时间：2013-04-20T09:38:46.787
> 
> 标签：html, output, submission, forms, http-post

我有以下文本文件：

```
$string = 
'1 The most important feature of spiral model is: requirement analysis. risk    management. quality management. configuration management 2 The worst type of coupling is: Data coupling. control coupling. stamp coupling. content coupling 3 One of the fault base testing techniques is: unit testing. beta testing. Stress testing. mutation testing 4 A fault simulation testing technique is: Mutation testing. Stress testing. Black box testing. White box testing 5 RS is also known as: specification of White box testing. Stress testing. Integrated testing. Black box testing 6 what is you name: Collins. Achieng. Ogwethi. Kamanda'; 
```

以下代码以表单格式读取文本文件和输出，并带有下拉菜单以选择多个问题。这就是我正在尝试的方式，

```
<html>
<head>
<title>read</title>
</head>
<body>
    <b><u> QUESTIONS AND ANSWERS QUIZ</u></b> <br /><br />
<?php
$openFile = fopen("questionandanswers.txt", "r") or exit ("unable to open the text       file");
$string = fread($openFile, filesize("questionandanswers.txt"));

//Regex to get from the first number to the string's end, so we ignore the Number     Question... bit;
preg_match('/\d.*/', $string, $match);

//We get all the strings starting with a number until it finds another number (which will be the beginning of another question;
preg_match_all('/\d\D*/', $match[0], $results);

$qas = array(); // We prepare an array with all the questions/answers
foreach($results[0] as $result){
//Separating the answer from the string with all the answers.
list($question, $all_answers) = explode(':', $result);

//Separating the different answers
$answers_array = explode('.', $all_answers);

//Stuffing the question and the array with all the answers into the previously prepared   array;
$qas[] = array('question' => $question, 'answers' => $answers_array);
}
?>
<form name="processor" action="processor.php" method="post">
<?php
//Looping through the array and outputting all the info into a form;
foreach($qas as $k => $v)?>
echo "<label>{$v['question']}</label><br/>";
echo "<select name='answers[]'>";

//we loop through $v['answers'] because its an array within the array with all the    answers.
foreach($v['answers'] as $answer)
{
    echo "<option>$answer</option>";//the output
}
echo "</select>";
echo "<br/><br/>";
?>
<input type="submit" value="Submit">
</form>
</body>
</html> 
```

我希望能够将输出提交到另一个将输出处理为 $_POST 的 php 文件。有谁能帮助我解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T15:55:37.957

我认为你只需要更正这一行：

```
echo "<select>"; 
```

至：

```
echo "<select name='answers[]'>"; 
```

在 processor.php 文件中，您将能够选择所有答案作为数组：

```
var_dump($_POST['answers']) 
```

但是您应该重新考虑这一行，因为它似乎破坏了文档模型：

```
<input type="text" name="question" value="<? 
```

# ios - iOS Stretching View using Auto Layout in Landscape

> ID：16118815
> 
> 赞同：1
> 
> 时间：2013-04-20T09:39:16.897
> 
> 标签：ios, rotation, autolayout

I just started using Auto Layout for my upcoming projects. I created an UIImageView inside a UIScrollView like shown in the image below:

![UIScrollView with UIImageView](https://i.stack.imgur.com/pWInX.png)

Auto Layout works as expected and positions the UImageView correctly after rotation. My problem is that I want the UIImageView to stretch in Landscape Mode so that it fills the whole width. How can I do that? At the moment it has the same size as in Portrait Mode.

When I place the UIImageView directly in the UIViewControllers View without using an UIScrollView it stretches correctly. Why is that? I would be happy for some hints.

I am using the following constraints (Leading and Trailing Space are equal 0): ![Constraints](https://i.stack.imgur.com/l9Ij4.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T12:08:49.680

好的，我发现使用自动布局时，UIImageView 总是继承其 UIImage 的大小。因此，如果我在旋转时更改图像， UIImageView 只会正确调整大小。

# wordpress - 如何在插件开发中使用wordpress中的会话

> ID：16118817
> 
> 赞同：29
> 
> 时间：2013-04-20T09:39:22.097
> 
> 标签：wordpress, php

我是编写插件的新手..我有一个 testplugin.php 文件和一个 ajax.php 文件..

我在 testplugin.php 中的代码是

```
global $session;

print_r($abc); //$abc is array of my data ..

$session['arrayImg']=$abc; //saving data in session 

echo  $session['arrayImg']; //displayin "Array" 
```

我的 ajax.php 包含以下代码

```
global $session;

$abc = $session['arrayImg'];

print_r ("abs== ".$abc); //displayin "abs== Array" 
```

如果使用`session_start();`

我收到以下错误

```
Warning: session_start() [function.session-start]: Cannot send session cache limiter - headers already sent 
```

我只想将数据数组从插件的一个文件发送到另一个文件......

* * *

## 回答 #1

> 赞同：56
> 
> 时间：2013-04-20T11:35:45.717

### 在您的插件或主题`functions.php`文件上添加以下内容

```
function wpse16119876_init_session() {
    if ( ! session_id() ) {
        session_start();
    }
}
// Start session on init hook.
add_action( 'init', 'wpse16119876_init_session' ); 
```

### 接下来，添加数据`SESSION`-

```
// If session has started, this data will be stored.
$_SESSION['arrayImg'] = $abc; 
```

### 要获取有关 ajax 挂钩函数的数据 -

```
// handle the ajax request
function wpse16119876_handle_ajax_request() {
    if ( ! session_id() ) {
        session_start();
    }

    if ( array_key_exists( 'arrayImg', $_SESSION ) ) {
        $abc = $_SESSION['arrayImg'];
    } else {
        $abc = 'NOT IN SESSION DATA';
    }

    // Do something with $abc
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-07-23T04:16:00.947

就我而言，我也在插件激活中使用了该会话变量。所以做了一些非正统的事情。我没有在挂钩中定义 session_start，而是将其作为插件的第一行 :)。

为了解决插件问题，一旦 wordpress 扫描我的文件，它就会启动会话。

最后，我不会在用户注销时破坏会话。我只是取消设置我的变量。这是为了以防万一其他插件也在使用会话。如果我销毁会话，它可能会影响其他插件。

干杯。

# html - IE10字体太粗

> ID：16118820
> 
> 赞同：3
> 
> 时间：2013-04-20T09:39:39.160
> 
> 标签：html, css

我有一些 HTML 表格标题，它们使用 CSS“font-weight:bold”加粗。这在 IE8 模式下的 Chrome、Firefox 和 IE10 中看起来不错，但是当我在 IE10 模式下访问 IE10 中的页面时，文本太粗了。

如何解决这个问题？

```
*{
    font-family:        Arial, Helvetica, sans-serif;
    font-size:          12px;
}
.widetableheader{
    font-weight:bold;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-20T10:07:42.320

要专门针对 IE10，您将需要使用 javascript，因为它们已经删除了条件注释。（感谢stereoscott指出这一点）这是使用jquery执行此操作的快速方法：

```
if ($.browser.msie && $.browser.version == 10) {
  $("html").addClass("ie10");
} 
```

如果 IE9 或更低，我会建议做 Conditional Comments。

为此，首先设置一个特定于 IE10 的样式表，您可能会遇到其他在 IE 中看起来很奇怪的事情，因为 IE 是破坏代码并使事情看起来很糟糕的最佳浏览器。

```
<!--[if IE 9]>
<link rel="stylesheet" type="text/css" href="ie10.css">
<![endif]--> 
```

现在在该样式表中指定字体粗细，因为它只适用于 IE 10：

```
.widetableheader{
  font-weight:500;
} 
```

在字体粗细中操作该数字，直到您在 IE 中得到它就好了。

祝你好运，如果您有任何问题，请告诉我:)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-25T17:42:48.973

通过使用修复它：

```
*{
    font-family:        Arial, Helvetica, sans-serif;
    font-size:          12px;
    font-weight:        normal;
} 
```

因此，通过在 CSS 表的“根”处添加字体粗细。感谢所有的可能性！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-20T09:40:48.633

也许尝试一个数值。

进一步阅读：

[https://developer.mozilla.org/en-US/docs/CSS/font-weight](https://developer.mozilla.org/en-US/docs/CSS/font-weight)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-20T09:49:37.550

这不是一个真正的“正确”解决方案，但使用 jquery 你可以设置一组新的样式：

```
if ($.browser.msie && $.browser.version == 10.0) {
    $("html").addClass("ie10");
} 
```

在 CSS 中：

```
.ie10 .widetableheader{
    font-weight:500;
} 
```

可能有更优雅的解决方案。

# android - Get names of all friends from Twitter API

> ID：16118824
> 
> 赞同：1
> 
> 时间：2013-04-20T09:40:02.333
> 
> 标签：android, twitter

I want to get names of all friends in efficient way within the API limit of Twitter. I know I can use this method:

```
IDs ids = twitter.getFriendsIDs(cursor); 
```

But this method only gives the ids and I need to iterate on this list, which is not efficient at all and will exceed the API call limit.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T09:47:32.127

参考[这个](https://dev.twitter.com/docs/api/1/get/friends/ids)和[这个](http://grepcode.com/file/repo1.maven.org/maven2/org.twitter4j/twitter4j-examples/2.2.4/twitter4j/examples/list/GetAllUserLists.java)..它会帮助你。

也检查[Twitter Counter API](http://twittercounter.com/pages/api?ref=footer)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-20T09:51:08.677

您需要的是以下 API 调用之一：

*   [https://dev.twitter.com/docs/api/1.1/get/friends/list](https://dev.twitter.com/docs/api/1.1/get/friends/list)
*   [https://dev.twitter.com/docs/api/1.1/get/followers/list](https://dev.twitter.com/docs/api/1.1/get/followers/list)

你的 Twitter-API 客户端应该有这些方法。

# c - Does this paragraph allow an implementation to optimize out volatile accesses in C?

> ID：16118829
> 
> 赞同：1
> 
> 时间：2013-04-20T09:40:26.803
> 
> 标签：c, volatile

The C Standard says

> An actual implementation need not evaluate part of an expression if it can deduce that its value is not used and that no needed side effects are produced (including any caused by calling a function or accessing a volatile object)

When is a `volatile` variable not needed? According to this paragraph, `volatile` appears to become subject to the as-if rule just like any other non-`volatile` object.

* * *

The answers given in the non-duplicate linked question are not helpful to me as they do not address the above quoted paragraph

*   When is a value considered to be "used"? It appears to be different than "reading the value from an object" because the corresponding access can be omitted, according to the above quote.
*   What is a "needed side effect"?

Refer to the comments below.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T09:51:00.843

我认为他们可能指的是这样的情况

```
void test(int volatile *y)
{
    int x = *y;
}

int main(void)
{
    test(some_volatile_y);
    return 0;
} 
```

内存中的负载可以被优化掉（未评估），因为它的结果不一定在每个实现中都需要。（当然，在内存加载可以触发某些事件的实现中，结果当然是“需要的”并且不能被优化掉。）

* * *

感谢 Alex 在下面的评论中指出了 C 标准中的这个脚注（C99：6.7.3 类型限定符：脚注 114）：

> volatile 声明可用于描述对应于内存映射输入/输出端口的对象或由异步中断函数访问的对象。对如此声明的对象的操作不应被实现“优化”或重新排序，除非评估表达式的规则允许。

请注意，它说*可能*——它是在举例说明。A 子句 J.3 然后提到对具有 volatile 限定类型的对象的访问是实现定义的，这是有道理的：前面的子句是“访问”*可能*意味着什么的示例，但它可能意味着什么其他取决于实现。

因此，在系统知道这不会导致任何需要的副作用的实现中，可以删除易失性访问。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-20T09:44:44.417

这部分标准意图是说可以删除以下代码中的 volatile 读取，因为它永远不会被评估：

```
volatile a;
if (0 && a) something(); 
```

但不是下一个中的易失性读取

```
volatile a;
int b;
b = 0*a; 
```

作为围绕 mehrdad 回答的讨论的后续行动：我确实认为 J.3.10

> J.3 实现定义的行为
> 
> J.3.10 限定词
> 
> — 什么构成对具有 volatile 限定类型的对象的访问（6.7.3）。

意味着编译器可以定义无意义的`volatile`访问，从而允许自己基本上忽略它。当然它也不能实现任何信号，但是可以忽略异步信号的存在。唯一不能忽视的地方`volatile`就是a周围`longjmp`。

当然，这样的选择使得这个编译器对于任何严肃的系统开发都*毫无用处*，但是一些应用程序不需要它，并且该标准允许对这种简单的体系结构及其应用程序进行兼容的实现。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-20T10:27:04.800

我认为这里的关键点是“评估表达式的一部分”。所以，如果我们有：

```
volatile int *wd_ptr = (volatile int *)0xF9000000;   // My watchdog timer. 

#define FREQUENCY_MULTIPLIER (4.9171E6/1000)

void wd_tickle()
{
    int time_left;

    time_left = (int)*wd_ptr * FREQUENCY_MULTIPLIER; 
    // Side effect of reading the , resets the timer to it's programmed value.
#if WD_DEBUG
    if (time_left < 100000)
    {
        printf("Oops, less than 100000 ticks left on watchdog.\n"
               "Maybe you need to tickle the watchdog a bit more often\n");
    }
#endif
} 
```

现在，编译器可以消除我们从计算 time-left 中得到的浮点乘法，但它不能删除对`*wd_ptr`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-20T10:44:01.283

> 什么时候不需要 volatile 变量？

在我看来，您可能误解了 5.1.2.3p4。如果编译器可以证明以下两个，那么它可以优化一个表达式：

1.  不使用它的值。
2.  不会产生任何需要的副作用（包括由调用函数或访问 volatile 对象引起的任何副作用）。

总之，编译器*无法*优化访问 volatile 对象的表达式。

* * *

> 编译器现在是否决定我是否需要对 volatile 访问产生副作用？

标准决定了这一点，而编译器通过成为符合标准的实现来决定。5.1.2.3p6：*对 volatile 对象的访问严格按照抽象机的规则进行评估。*

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-04-20T10:29:32.397

如果我（现在）正确理解了这个问题，那么您会问为什么标准说“*需要*副作用”，以及这是否意味着兼容的编译器可以省略它可以证明在某种程度上不是“需要”的访问。

我的简单解读是他们使用“需要的副作用”来表示总是需要副作用，而不是作为修饰符，并且他们可以简单地从上面的段落中删除“需要”而不改变含义。

（但是，我没有标准的副本来确认它是否确定副作用是否可以确定为“需要”。似乎不太可能。）

# java - Sparql Query results in Tamil using Eclipse

> ID：16118836
> 
> 赞同：0
> 
> 时间：2013-04-20T09:41:00.853
> 
> 标签：java, sparql, protege, tamil

We are trying to execute SparQL query for our OWL Ontology created in Tamil using Protege in Eclipse IDE. The code works fine but the results don't seem to appear in Tamil. The following is the code and the output.

```
import java.lang.*;
import java.util.regex.*;
import java.io.*;
import com.hp.hpl.jena.sparql.*;
import com.hp.hpl.jena.*;
import com.hp.hpl.jena.rdf.model.Model;
import com.hp.hpl.jena.rdf.model.ModelFactory;
import com.hp.hpl.jena.query.*;
import java.io.File;
import java.io.FileInputStream;
import java.io.FileNotFoundException;
import java.io.FileOutputStream;
import java.io.IOException;
import java.io.InputStream;
import java.io.OutputStream;
import java.util.Iterator;

import com.hp.hpl.jena.ontology.OntClass;
import com.hp.hpl.jena.ontology.OntModel;
import com.hp.hpl.jena.ontology.OntModelSpec;
import com.hp.hpl.jena.query.Query;
import com.hp.hpl.jena.query.QueryExecution;
import com.hp.hpl.jena.query.QueryExecutionFactory;
import com.hp.hpl.jena.query.QueryFactory;
import com.hp.hpl.jena.query.ResultSet;
import com.hp.hpl.jena.query.ResultSetFormatter;
import com.hp.hpl.jena.rdf.model.Model;
import com.hp.hpl.jena.rdf.model.ModelFactory;
import com.hp.hpl.jena.util.FileManager;
import com.hp.hpl.jena.vocabulary.OWL;
import com.hp.hpl.jena.vocabulary.RDFS;

import edu.stanford.smi.protegex.owl.ProtegeOWL;
import edu.stanford.smi.protegex.owl.jena.JenaOWLModel;
import edu.stanford.smi.protegex.owl.model.OWLModel;

public class Sample {
public static void main(String[] args) throws FileNotFoundException, IOException,           NullPointerException {

try
{
    //opening owl file
    InputStream in = new FileInputStream(new  File("C:/Users/Sandhya/Desktop/Ontology/newtamil.owl"));
    Model model=ModelFactory.createMemModelMaker().createDefaultModel() ;
    model.read(in,null);       
  System.out.println(model);
   in.close();
   String queryString =
         "PREFIX pizza:   <http://www.semanticweb.org/ontologies/2013/3/newtamil.owl#> "+     

   " PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#> "+
     "PREFIX owl: <http://www.w3.org/2002/07/owl#> "+
     "PREFIX xsd: <http://www.w3.org/2001/XMLSchema#> "+
     "PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#> "+
     "SELECT ?subject ?object "+
     "  WHERE { ?subject rdfs:subClassOf ?object }";
    com.hp.hpl.jena.query.Query q = QueryFactory.create(queryString);
    QueryExecution qe = QueryExecutionFactory.create(q, model);
    ResultSet results = qe.execSelect();
    while (results.hasNext())
    {
        System.out.println(results.getResourceModel() );

    ResultSetFormatter.out(System.out, results, q);
    qe.close();
    }
   }catch(java.lang.NullPointerException e){ System.out.println(e);}
    catch(Exception e){
  System.out.println("Query Failed !");
    }

   }

   } 
```

Output: -------------------------------------------------------------------------------------- -----------------------------------------------------------------------------------------------------------------------------------------------------

# | subject | object |

|%E0%AE%AA%E0%AE%AA%E0%AF%80%E0%AE%BE%E0%AF%82 | %E0%AF%8D%E0%AE%A4%E0%AF%81%E0%AE%B0%E0%AE%AA |

## |%E0%AE%95%E0%AF%81%E0%AE%B0%E0%AF%82%E0%AE%95%E0%AE%A4%E0%AE%AA | %E0%AF%8D%E0%AE%A4%E0%AF%81%E0%AE%B0%E0%AE%AA |

We want this to be displayed in Tamil. We also installed unicode and redirected the output into a text file and checked but it still does not give the expected result. Thanks in advance.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T11:51:49.300

Jena 以 UTF-8 打印。

看起来数据已经被 % 编码了。

# iphone - 具有动态高度的 UILabel 不适用于 iOS 中的相同字符串

> ID：16118837
> 
> 赞同：0
> 
> 时间：2013-04-20T09:41:05.427
> 
> 标签：iphone, ios, objective-c, ios6, uilabel

我在我的应用程序中使用以下代码来获取 UILabel 的动态高度。

```
CGSize maximumLabelSize = CGSizeMake(231, FLT_MAX);

    CGSize expectedLabelSize = [labelString
                            sizeWithFont:self.verbLabel.font
                            constrainedToSize:maximumLabelSize
                            lineBreakMode:self.verbLabel.lineBreakMode];

    //adjust the label the the new height.
    CGRect newFrame = self.verbLabel.frame;
    newFrame.size.height = expectedLabelSize.height;
    self.verbLabel.frame = newFrame;
    return newFrame; 
```

我的 labelString 是 如果你问一个有争议的公众人物怎么办？他/她可能提出什么想法？所以有时我可以显示整个字符串，但有时它只是剪切了一些文本。我该如何解决这个问题......请帮助我，让我知道如果我做错了什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-20T09:47:02.937

将 numberOfLines 设置为 0 以允许任意数量的行。

```
label.numberOfLines = 0; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-20T10:41:12.190

我建议您使用以下方法代替`sizeWithFont:`：

```
CGSize maximumLabelSize = CGSizeMake(231, FLT_MAX);
CGSize requiredSize = [self.verbLabel sizeThatFits: maximumLabelSize];
self.verbLabel.frame = CGRectMake(x, y, requiredSize.width, requiredSize.height); 
```

这更清洁，并且可能对您更有效！

设置`self.verbLabel.numberOfLines = 0;`也可能是有益的。

[这是](http://doing-it-wrong.mikeweller.com/2012/07/youre-doing-it-wrong-2-sizing-labels.html)一个很好的解释，为什么 using`sizeThatFits`比 using 更好`sizeWithFont`。

# r - 使用while循环将元素添加到R中的向量

> ID：16118839
> 
> 赞同：0
> 
> 时间：2013-04-20T09:41:26.090
> 
> 标签：r, while-loop

假设我的向量如下：

```
fruit = c("apple", "orange") 
```

我一次采样一个水果并将所选水果存储在向量中。

```
chosen=sample(fruit, size = 1, replace = TRUE) 
```

假设我想继续采样，直到橙子的总数比苹果的总数多 2，但是我无法将所有样本合并到一个向量中。

```
i = 1
keepgoing = TRUE
while(keepgoing){
  i=sample(fruit, size = 1, replace = TRUE)
  i+1=sample(fruit, size = 1, replace = TRUE)
  fruitlist=rbind(i, i+1)
  if(sum(fruitlist=="orange")-sum(fruitlist=="apple")==2){
  keepgoing = FALSE}
  i = i +2
  } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-20T09:51:35.180

@Arun 的建议确实是您想要的，但是您的 while 循环示例看起来像：

```
keepgoing = TRUE
all_fruit = NULL
while(keepgoing) {
   next_piece_of_fruit = sample(fruit, 1, TRUE)
   all_fruit = c(all_fruit, next_piece_of_fruit)
   if (sum(all_fruit == "orange") - 
       sum(all_fruit == "apple")) == 2) keepgoing = FALSE
} 
```

请注意，您在这里的循环内增长了一个向量，对于大量采样，这可能会变得非常缓慢......

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-20T11:04:48.627

由于样本单元是独立的（后面单元的概率不依赖于前面单元的概率，在这种情况下始终为 0.5），我们可以使用另一种策略。我们可以先绘制一个大（r）样本，然后在满足我们所需条件的点处将其切断，而不是增加样本：

```
makeSample <- function(n=20) {

    fruit <- c("apple", "orange")

    full.sample <- sample(x = fruit, size = n, replace = TRUE)
    apples  <- cumsum(full.sample == "apple")
    oranges <- cumsum(full.sample == "orange")
    diff <- oranges - apples

    exit.position <- match(2L, diff)
    if (is.na(exit.position))
        stop("The condition specified not achieved, try again or increase N")
    result <- head(full.sample, exit.position)
    return(result)
} 
```

功能真的很简单。它绘制所需长度的大（超集）样本，默认值为 20。创建两个逻辑向量（`full.sample == "orange"`和`full.sample=="apple"`），每个连续步骤中的苹果和橙子的数量用 计算`cumsum()`，因为 TRUE 等于 1（存在水果）和 FALSE 为 0（没有水果）。然后我们取这些向量之间的差异，看看在任何时候差异是否满足我们的条件。如果是，该函数将返回您最初想要的结果样本。如果没有，它会抛出错误，敦促您重试或增加 N。

这在更大的样本上应该更有效，并且可以很容易地调整到更复杂的条件。当 N 较小时，您可能不会得到结果，而不是循环解决方案。随着 N 的增加，您的机会接近 1。您可以包装`makeSample()`另一个函数，以确保您始终获得结果。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-20T11:30:52.030

IMO 你需要使用`rbinom`. 假设`orange`=`1`和`apple`= `0`：

```
set.seed(56)
fruit.sample <- c()
while(TRUE)
{
    fruit.sample <- c(fruit.sample, rbinom(1,1,0.5))

    if (sum(fruit.sample==1) == sum(fruit.sample==0)+2)
        break
}

fruit.sample
## [1] 0 1 0 1 0 0 0 0 1 1 1 0 1 1 1 0 1 1 
```

基本上停止采样一次的想法`Num.Oranges`= `Num.Apples + 2`。如果你用不同的种子重复实验，你会得到不同的结果。

# parsing - 我可以使用 LLVM 来解析 Fortran 吗？

> ID：16118840
> 
> 赞同：6
> 
> 时间：2013-04-20T09:41:27.690
> 
> 标签：parsing, fortran, llvm, abstract-syntax-tree

我是 LLVM 的新手。我的基本需求是解析 Fortran 代码。通过查看 LLVM 网站，似乎 LLVM 可以用作解析代码的库。那么我可以用它来解析 Fortran 代码，并提取有关代码的信息（AST？）吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-04-20T12:31:27.273

LLVM 是一个编译器后端。它唯一知道如何解析的是 LLVM IR——一种设计用于从编程语言前端发出的中间语言。LLVM 的官方前端是 Clang，可以处理 C、C++ 和 ObjC。如果您对其他语言感兴趣，还有[DragonEgg](http://dragonegg.llvm.org/)，它是 gcc 的 LLVM 插件。它使用 gcc 的前端和 LLVM 作为后端，因此它可以解析 gcc 知道如何解析的任何内容。我知道正在做的工作是让它从 Ada 和 Fortran 生成正确的代码。以下是其页面的摘录：

> 当前状态
> 
> *   最适合 gcc-4.6。
> *   Fortran 运行良好。Ada、C 和 C++ 也运行良好。Ada 在 gcc-4.7 上的表现不佳。
> *   它可以编译合理数量的 Obj-C、Obj-C++ 和 Go。
> *   它可以编译简单的 Java 程序，但它们不能正确执行（这是 java 前端不支持 GCC 的 LTO 的结果）。
> *   调试信息很差。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-20T09:48:11.620

不，LLVM 不是用于解析 Fortran 的库。LLVM 是一个用于实现编译器后端的库。您需要自己编写 Fortran 前端。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-02-18T14:29:53.430

添加到 Eli Bendersky 评论中，您可以在 gfortran 中使用 -fdump-parse-tree 选项“在开始代码生成之前输出内部解析树”。

# java - Which is the best charset to pass data to php?

> ID：16118843
> 
> 赞同：0
> 
> 时间：2013-04-20T09:42:09.140
> 
> 标签：java, php, arrays, string, byte

In my Java App, I want to pass individual bytes of information to a php script via POST. In order to do that, I convert the byte[] into a String. Now, which charset is best for this operation? I want to keep the amount of data transmitted as tiny as possible. Right now, I'm using ISO-8859-1, but i was worried, as it contains '?' and '=', whicht I thought, might make php interpret the data wrong...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T12:19:34.890

所以，我发现使用 Base64 编码可能是实现这一目标的最佳方法^^

我使用[了这个类](http://www.java2s.com/Code/Java/Development-Class/Base64encoderdecoder.htm)，并修改它以使用 _ - ~ 作为特殊字符，而不是 / = +

# java - 多线程我是否正确使用等待和通知

> ID：16118845
> 
> 赞同：0
> 
> 时间：2013-04-20T09:42:28.813
> 
> 标签：java, multithreading

我写了一个哲学家问题的解决方案。它正在运行，我在控制台上得到了正确的输出，但`println()`之后`wait()`从未打印过。请告诉我为什么。我在代码中指出了这一点。

该解决方案*类似于*[http://en.wikipedia.org/wiki/Dining_philosophers_problem#Resource_hierarchy_solution](http://en.wikipedia.org/wiki/Dining_philosophers_problem#Resource_hierarchy_solution)

```
public class Philosopher extends Thread {
    String name;
    // boolean je, czeka;
    int nr;
    Fork left, right;

    public Philosopher(String name, int nr, Fork left, Fork right) {
        this.nr = nr;
        this.name = name;
        this.left = left;
        this.right = right;
        System.out.println("NR " + nr +"  "+ left + " " + right);
    }

    public void run() {
        // while(true){
        try {
            Fork minF = Fork.min(left, right);
            Fork maxF = Fork.max(left, right);

            synchronized (minF) {
                if (!minF.used) {
                    minF.used = true;
                    System.out.println("P" + nr + " took fork " + minF);
                } else {
                    minF.wait();
                    minF.used = true;
                    System.out.println("I waited and took fork " + minF); //why it is never PRINTEDDD???
                }
                synchronized (maxF) {
                    if (!maxF.used) {
                        maxF.used = true;
                        System.out.println("P" + nr + " took fork "
                                + maxF);
                    } else {
                        maxF.wait();
                        maxF.used = true;
                        System.out.println("I waited and took fork "+ maxF); //why it is never PRINTEDDD??
                    }
                    System.out.println("I am eating right now" + this);
                    eating();
                    System.out.println("P" + nr
                            + " I have eaten  I am giving back the forks");
                    minF.used = false;
                    System.out.println("P" + nr +  " NOTIFY fork" + minF);
                    minF.notify();
                    maxF.used = false;
                    System.out.println("P" + nr + " NOTIFY fork" + maxF);
                    maxF.notify();
                }
            }
        } catch (Exception e) {
        }

        // }
    }

    public void eating() throws InterruptedException {
        int time = (int) (Math.random() * 2000);

        for (int i = 0; i < 5; i++) {
            System.out.println("P" + nr + " " + i);
            Thread.sleep(time / 5);
        }
    }

    public String toString() {
        return "Philosopher " + nr;
    }

    public static void startPhilosophers(Philosopher[] f) {
        for (int i = f.length - 1; i >= 0; i--) {
            f[i].start();
        }
    }

    public static void main(String[] args) {
        Fork[] t = Fork.getArrayOfForks();
        Philosopher[] f = { new Philosopher("philosopher 1", 1, t[0], t[4]),
                new Philosopher("philosopher 2", 2, t[1], t[0]),
                new Philosopher("philosopher 3", 3, t[2], t[1]),
                new Philosopher("philosopher 4", 4, t[3], t[2]),
                new Philosopher("philosopher 5", 5, t[4], t[3]), };
        startPhilosophers(f);

    }

} 
```

* * *

```
public class Fork {
    boolean used;
    int nr;

    public Fork(boolean used, int nr) {
        this.used = used;
        this.nr = nr;
    }

    @Override
    public String toString() {
        return "F" + nr;
    }
    public static Fork min(Fork l, Fork p){
        if(l.nr < p.nr)
            return l;
        return p;
    }

    public static Fork max(Fork l, Fork p){
        if(l.nr > p.nr)
            return l;
        return p;
    }
    public static Fork[] getArrayOfForks() {
        Fork[] t = new Fork[5];
        for (int i = 0; i < t.length; i++) {
            t[i] = new Fork(false, (i + 1));
        }
        return t;
    }
} 
```

* * *

```
EXAMPLE output
NR 1  F1 F5
NR 2  F2 F1
NR 3  F3 F2
NR 4  F4 F3
NR 5  F5 F4
P5 took fork F4
P5 took fork F5
I am eating right nowPhilosopher 5
P4 took fork F3
P5 0
P2 took fork F1
P2 took fork F2
I am eating right nowPhilosopher 2
P2 0
P5 1
P2 1
P5 2
P2 2
P5 3
P2 3
P5 4
P2 4
P5 I have eaten  I am giving back the forks
P5 NOTIFY forkF4
P5 NOTIFY forkF5
P4 took fork F4
I am eating right nowPhilosopher 4
P4 0
P2 I have eaten  I am giving back the forks
P2 NOTIFY forkF1
P2 NOTIFY forkF2
P3 took fork F2
P1 took fork F1
P1 took fork F5
I am eating right nowPhilosopher 1
P1 0
P1 1
P4 1
P1 2
P4 2
P1 3
P4 3
P1 4
P4 4
P1 I have eaten  I am giving back the forks
P1 NOTIFY forkF1
P1 NOTIFY forkF5
P4 I have eaten  I am giving back the forks
P4 NOTIFY forkF3
P4 NOTIFY forkF4
P3 took fork F3
I am eating right nowPhilosopher 3
P3 0
P3 1
P3 2
P3 3
P3 4
P3 I have eaten  I am giving back the forks
P3 NOTIFY forkF2
P3 NOTIFY forkF3 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-20T10:35:56.823

```
synchronized (minF) {
    if (!minF.used) { // always
        minF.used = true;
    }
    ...
    minF.used = false;
    minF.notify();
} 
```

您正在对叉子进行同步，因此哲学家在检查它们是否正在使用时已经锁定了它们。哲学家设置`fork.used`为真，但在离开同步块并释放锁之前将其设置回假。

编辑：根据要求，更新版本的代码。如果您使用已经使用的同步块，则无需自己进行管理：

```
synchronized (minF) {
    synchronized (maxF) {
        System.out.println("I am eating right now" + this);
        eating();
        System.out.println("P" + nr
            + " I have eaten  I am giving back the forks");
    }
} 
```

如果您想明确地写出来，我会使用这些`java.util.concurrent`类并让 Fork 从[Semaphore](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/concurrent/Semaphore.html)扩展。您的代码如下所示：

叉子：

```
public class Fork extends Semaphore {
int nr;

public Fork(int nr) {
    super(1); // can be handed out to only one person at a time
    this.nr = nr;
}
... 
```

和哲学家：

```
minF.acquire();
maxF.acquire();
System.out.println("I am eating right now" + this);
eating();
System.out.println("P" + nr
    + " I have eaten  I am giving back the forks");
maxF.release();
minF.release(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-20T11:08:00.890

Flup 已经回答了你的问题，但是移动同步块是不够的；如果您想将您的`used`标志与`wait`and一起使用`notify`，您需要`wait`在循环中检查您正在寻找的条件，因为`wait`即使没有`notify`.

一种解决方案可能是：

```
public class Demo
{

    public static class Philosopher
        extends Thread
    {

        String name;

        int nr;

        Fork left, right;

        public Philosopher( String name, int nr, Fork left, Fork right )
        {
            this.nr = nr;
            this.name = name;
            this.left = left;
            this.right = right;
            System.out.println( "NR " + nr + "  " + left + " " + right );
        }

        @Override
        public void run()
        {
            // while ( true )
            try {
                Fork minF = Fork.min( left, right );
                Fork maxF = Fork.max( left, right );

                synchronized ( minF ) {
                    if ( ! minF.used ) {
                        minF.used = true;
                        System.out.println( "P" + nr + " took fork " + minF );
                    } else {
                        while ( minF.used )
                            // <- YOU NEED TO CHECK THIS IN A LOOP
                            minF.wait();
                        minF.used = true;
                        System.out.println( "I waited and took fork " + minF ); // why it is never PRINTEDDD???
                    }
                }
                synchronized ( maxF ) {
                    if ( ! maxF.used ) {
                        maxF.used = true;
                        System.out.println( "P" + nr + " took fork " + maxF );
                    } else {
                        while ( maxF.used )
                            // <- YOU NEED TO CHECK THIS IN A LOOP
                            maxF.wait();
                        maxF.used = true;
                        System.out.println( "I waited and took fork " + maxF ); // why it is never PRINTEDDD??
                    }
                }

                System.out.println( "I am eating right now" + this );
                eating();
                System.out.println( "P" + nr + " I have eaten  I am giving back the forks" );

                synchronized ( minF ) {
                    minF.used = false;
                    System.out.println( "P" + nr + " NOTIFY fork" + minF );
                    minF.notify();
                }

                synchronized ( maxF ) {
                    maxF.used = false;
                    System.out.println( "P" + nr + " NOTIFY fork" + maxF );
                    maxF.notify();
                }
            } catch ( Exception e ) {
                // ignore
            }
        }

        public void eating()
            throws InterruptedException
        {
            int time = (int) ( Math.random() * 2000 );

            for ( int i = 0; i < 5; i ++ ) {
                System.out.println( "P" + nr + " " + i );
                Thread.sleep( time / 5 );
            }
        }

        public String toString()
        {
            return "Philosopher " + nr;
        }

        public static void startPhilosophers( Philosopher[] f )
        {
            for ( int i = f.length - 1; i >= 0; i -- ) {
                f[ i ].start();
            }
        }

    }

    public static class Fork
    {

        boolean used;

        int nr;

        public Fork( boolean used, int nr )
        {
            this.used = used;
            this.nr = nr;
        }

        @Override
        public String toString()
        {
            return "F" + nr;
        }

        public static Fork min( Fork l, Fork p )
        {
            if ( l.nr < p.nr )
                return l;
            return p;
        }

        public static Fork max( Fork l, Fork p )
        {
            if ( l.nr > p.nr )
                return l;
            return p;
        }

        public static Fork[] getArrayOfForks()
        {
            Fork[] t = new Fork[ 5 ];
            for ( int i = 0; i < t.length; i ++ ) {
                t[ i ] = new Fork( false, ( i + 1 ) );
            }
            return t;
        }
    }

    public static void main( String[] args )
    {
        Fork[] t = Fork.getArrayOfForks();
        Philosopher[] f =
            { new Philosopher( "philosopher 1", 1, t[ 0 ], t[ 4 ] ), new Philosopher( "philosopher 2", 2, t[ 1 ], t[ 0 ] ),
                new Philosopher( "philosopher 3", 3, t[ 2 ], t[ 1 ] ), new Philosopher( "philosopher 4", 4, t[ 3 ], t[ 2 ] ),
                new Philosopher( "philosopher 5", 5, t[ 4 ], t[ 3 ] ), };
        Philosopher.startPhilosophers( f );
    }

} 
```

但是，请务必了解，在此示例中，您使事情变得过于复杂。当您对锁有订单时，您可以摆脱`used`并简化这一点：

```
public class Demo2
{

    public static class Philosopher
        extends Thread
    {

        String name;

        int nr;

        Fork left, right;

        public Philosopher( String name, int nr, Fork left, Fork right )
        {
            this.nr = nr;
            this.name = name;
            this.left = left;
            this.right = right;
            System.out.println( "NR " + nr + "  " + left + " " + right );
        }

        @Override
        public void run()
        {
            // while ( true )
            try {
                Fork minF = Fork.min( left, right );
                Fork maxF = Fork.max( left, right );

                synchronized ( minF ) {
                    synchronized ( maxF ) {
                        System.out.println( "I am eating right now" + this );
                        eating();
                        System.out.println( "P" + nr + " I have eaten  I am giving back the forks" );
                    }
                }
            } catch ( Exception e ) {
                // ignore
            }
        }

        public void eating()
            throws InterruptedException
        {
            int time = (int) ( Math.random() * 2000 );

            for ( int i = 0; i < 5; i ++ ) {
                System.out.println( "P" + nr + " " + i );
                Thread.sleep( time / 5 );
            }
        }

        public String toString()
        {
            return "Philosopher " + nr;
        }

        public static void startPhilosophers( Philosopher[] f )
        {
            for ( int i = f.length - 1; i >= 0; i -- ) {
                f[ i ].start();
            }
        }

    }

    public static class Fork
    {

        int nr;

        public Fork( int nr )
        {
            this.nr = nr;
        }

        @Override
        public String toString()
        {
            return "F" + nr;
        }

        public static Fork min( Fork l, Fork p )
        {
            if ( l.nr < p.nr )
                return l;
            return p;
        }

        public static Fork max( Fork l, Fork p )
        {
            if ( l.nr > p.nr )
                return l;
            return p;
        }

        public static Fork[] getArrayOfForks()
        {
            Fork[] t = new Fork[ 5 ];
            for ( int i = 0; i < t.length; i ++ ) {
                t[ i ] = new Fork( i + 1 );
            }
            return t;
        }
    }

    public static void main( String[] args )
    {
        Fork[] t = Fork.getArrayOfForks();
        Philosopher[] f =
            { new Philosopher( "philosopher 1", 1, t[ 0 ], t[ 4 ] ), new Philosopher( "philosopher 2", 2, t[ 1 ], t[ 0 ] ),
                new Philosopher( "philosopher 3", 3, t[ 2 ], t[ 1 ] ), new Philosopher( "philosopher 4", 4, t[ 3 ], t[ 2 ] ),
                new Philosopher( "philosopher 5", 5, t[ 4 ], t[ 3 ] ), };
        Philosopher.startPhilosophers( f );
    }

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-20T10:11:58.540

在您的代码中，Fork->used 属性始终在 getArrayOfForks() 方法中初始化为 false，因此您的 if 条件将始终在每个同步块上的 wait() 处于 else 条件的地方执行。

# mysql - Get all points within some distance by the path

> ID：16118846
> 
> 赞同：0
> 
> 时间：2013-04-20T09:42:34.143
> 
> 标签：mysql, path, coordinates, point

I have multiple points with coordinates which represent the path on a map. Then I have multiple points, which represent for example restaurants. I'd like to get all the restaurants, which are near my path, like to 1 km. One of the solutions is that for each point I'll search for the restaurant in the circle of 1 km from that point in the MySQL database, but I'd like to know some other option.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T10:11:01.910

我会从路径创建一个多边形，代表感兴趣的区域，然后测试交叉点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-20T10:21:50.573

您可以进一步在路径上的每对相邻点之间放置线，然后计算从线到代表餐厅的每个点的最短距离。然后，您只需过滤掉距离大于 1 公里的餐馆。

对于线和点之间的距离计算，请查看此[Wiki](http://en.wikipedia.org/wiki/Distance_from_a_point_to_a_line)

# android - 每次访问选项卡时如何重新创建活动

> ID：16118847
> 
> 赞同：0
> 
> 时间：2013-04-20T09:42:40.127
> 
> 标签：android, android-tabhost, tabactivity

我有一个`TabActivity`，并且我想重新创建带有已访问选项卡的活动（调用`onCreate()`每次访问的内容）。如何 ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-20T09:46:42.663

```
public void onResume() 
```

每次活动进入前台时都会调用此方法。所以你需要做的就是重写这个方法

```
public void onResume(){
    super.onResume();
   // do your stuffs
} 
```

要了解有关活动生命周期的更多信息，请参阅此[文档](http://developer.android.com/guide/components/activities.html)

现在您想每次调用 onCreate ，似乎每次活动进入前台时您都有一些初始化任务。所以我的建议是使用onResume中的初始化东西而不是onCreate。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-20T09:50:30.737

你可以用....

```
this.finish(); // this is instance of TabActivity 
```

....关闭当前的并使用创建一个新的意图

```
Intent intent = new Intent(this, TabActivity.class);
intent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK) 
startActivity(intent); 
```

**编辑：** `Intent.FLAG_ACTIVITY_CLEAR_TOP`实际上似乎也可以~~可能行不通，因为~~尽管它旨在带来现有的活动~~刚带来~~到前面（没有娱乐）。

看看[这个](http://blog.akquinet.de/2010/04/15/android-activites-and-tasks-series-intent-flags/)了解更多。

干杯!

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-20T09:44:18.633

在开始每个选项卡的意图之前，将意图标志设置为“清除顶部”。

IE

```
intent.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP); 
```

检查我的答案以供参考在这个问题 [activity-in-tabactivity-doesnt-run-oncreate-method-when-clicked-second-time](https://stackoverflow.com/questions/15967384/activity-in-tabactivity-doesnt-run-oncreate-method-when-clicked-second-time/15967633#15967633)

# javascript - Jquery 可拖动/可放置和可排序组合

> ID：16118853
> 
> 赞同：7
> 
> 时间：2013-04-20T09:43:12.237
> 
> 标签：javascript, jquery, draggable, jquery-ui-droppable, jquery-ui-sortable

我被要求创建一个正方形网格，其中每个正方形可能包含也可能不包含链接，并且这些链接应该能够在网格周围移动。

我认为可拖动/可放置将是可行的方法，并且工作正常，但是，现在我们希望能够在将一个拖放到另一个之上时交换可拖动对象。所以现在看起来 sortable 本来是要走的路。然而， sortable 看起来更像是用于列表，而我并没有像列表那样写它。

有没有一种简单的方法可以让我到目前为止的工作，或者我是否需要使用 sortable 完全重写它？我是 javascript 新手，我花了一段时间才走到这一步，而且我不是要代码，但我害怕不得不再次弄清楚整个事情的想法！有什么意见吗？

这是我的代码的小提琴：http: [//jsfiddle.net/kvVkT/](http://jsfiddle.net/kvVkT/)

和代码：

html

```
<div id="gridcontainer">
    <div id="-2:-2" class="droppable occupied">
        <a href="" id ="508" class="bookmark draggable white" title="white" "target="_blank">1</a>
    </div>
    <div id="-2:-1" class="droppable">2</div>
    <div style="clear:both"></div>
    <div id="-2:0" class="droppable">3</div>
    <div id="-2:1" class="droppable occupied">
        <a href="" id ="567" class="bookmark draggable white" title="white" "target="_blank">4</a>
    </div>
    <div style="clear:both"></div>
</div> 
```

css

```
#gridcontainer{position:relative;padding:25px;color:#ff0004;background:#ffffff;}
.droppable{width:65px; height:65px;float:left; margin:5px;background:#000000;}
.bookmark {float:left;width:65px; height:65px;display:block;position:absolute;}
.position{float:left;width:65px; height:65px;display:block;}
.position:hover{background-image:url(../img/tilehover.png);}
.bookmark.ui-draggable-dragging {-moz-box-shadow: 0 0 5px #d9d9d9; -webkit-box-shadow: 0 0 5px #d9d9d9; box-shadow: 0 0 5px #d9d9d9;}
.draggable{ background:#888888;}
[draggable] {
  -moz-user-select: none;
  -khtml-user-select: none;
  -webkit-user-select: none;
  user-select: none;
} 
```

javascript

```
$('.draggable').draggable({ start: function() {$('#dropdownAddTile').slideDown();},  stop: function() {$('#dropdownAddTile').slideUp();}, containment: '#container', snap:'.droppable', snapMode:'inner', revert:'invalid',snapTolerance: 32});
$('.droppable').droppable({drop: handleDropEvent, accept: function(e){if(e.hasClass('draggable')) { if (!$(this).hasClass('occupied')) {return true; }}}});
function handleDropEvent( event, ui ) {
      event.preventDefault();
      var draggable = ui.draggable;
      var droppable = $(this);
      var droppableId = $(this).attr("id");
      var draggableId = ui.draggable.attr("id");
      $('.draggable').draggable({containment: '#container', snap:'.droppable', snapMode:'inner', revert:'invalid',snapTolerance: 32});
      $('.droppable').droppable({drop: handleDropEvent, accept: function(e){if(e.hasClass('draggable')) { if (!$(this).hasClass('occupied')) {return true; }}}});
      var initPosit = ui.draggable.parent().attr('id');
      //save new position
      $.post("tiles/updateTilePosition", { draggableId:draggableId, droppableId: droppableId }).done(function(data) {
         //alert(data);
      })
      $(this).addClass('occupied');
      ui.draggable.parent().removeClass('occupied');
      if($(ui.draggable).parent() !==$(this)){
            $(ui.draggable).appendTo($( this ));
      }
} 
```

感谢收到任何意见

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-23T15:07:21.950

首先，***切勿***使用以数字或符号开头的 ID。根据这个[解决方案](https://stackoverflow.com/questions/70579/what-are-valid-values-for-the-id-attribute-in-html#answer-79022)：

> ID 和 NAME 标记必须以字母 ([A-Za-z]) 开头，后跟任意数量的字母、数字 ([0-9])、连字符 ("-")、下划线 ("_") , 冒号 (":") 和句点 (".")。

* * *

现在让我们清理一些代码。对于您目前的情况，我建议使用[`.draggable()`](http://jqueryui.com/draggable/)and [`.droppable()`](http://jqueryui.com/droppable/)。

我从头开始，但保留了在您的[jsfiddle](http://jsfiddle.net/kvVkT/)`draggable`中使用的&`droppable`选项。这是我想出的（随意更改它的任何方面）：

***演示：http:*** [//jsfiddle.net/dirtyd77/Y8dLz/](http://jsfiddle.net/dirtyd77/Y8dLz/)
[http://fiddle.jshell.net/dirtyd77/Y8dLz/show/](http://fiddle.jshell.net/dirtyd77/Y8dLz/show/)

### JAVASCRIPT：

```
$(function () {
    $('#container div').draggable({
        containment: "#container",
        helper: 'clone',
        snap: true,
        snapMode: 'inner',
        snapTolerance: 32,
        revert: 'invalid'
    });

    $('#container div').droppable({
        hoverClass: 'ui-state-highlight',
        drop: function (event, ui) {
            var _drop = $(this), 
                _drag = $(ui.draggable),
                _dropChildren = _drop.children(), //original drop children
                _dragChilden = _drag.children(); //original drag children

            if(_dropChildren.length > 0){
                _dropChildren.appendTo(_drag);
            }

            _dragChilden.appendTo(_drop);
        }
    });
}); 
```

### HTML：

```
<div id="container">    
    <div>
        <a href="#somelink1" class="link1">Link 1</a>
    </div>  

    <div></div>

    <div>
        <a href="#somelink2" class="link2">Link 2</a>
    </div>

    <div></div>

    <div>
        <a href="#somelink3" class="link3">Link 3</a>
    </div>

    <div>
        <a href="#somelink1" class="link1">Link 4</a>
        <a href="#somelink3" class="link3">Link 5</a>
    </div>
</div> 
```

### CSS：

```
div:not(#container) {
    border:1px solid orange;
}
#container {
    padding:20px;
    margin:10px;
    float: left; /* needed for containment option */
    width: 336px;
    height: auto;
    border:1px solid green;
}
#container div {
    margin: 4px;
    padding: 0px;
    float: left;
    width: 100px;
    height: 90px;
    text-align: center;
}
.link1{
    color: purple;   
}
.link2{
    color: red;   
}
.link3{
    color: green;   
} 
```

我希望这就是你要找的！如果您需要任何进一步的解释或有任何其他问题，请告诉我！快乐编码！

# r - r中n个参数的绘图例程

> ID：16118855
> 
> 赞同：0
> 
> 时间：2013-04-20T09:43:31.443
> 
> 标签：r, function, plot

我有以下要绘制的参数：

```
weight <- c(102,20,30,04,022,01,220,10)
height <- c(102,20,30,04,022,01,220,10)

catg <- c(102,20,30,04,022,01,220,10)
catg <- matrix(height,nrow = 2) 
```

这些应该绘制在保存在路径中的 pdf 文件中：

```
FigureFolder <- "C:\\..." 
```

我正在尝试编写一个函数，该函数接受 n 个输入参数并将它们保存到一个文件中（在这种情况下，如果该文件由 FigureFolder 定义）。我有以下功能：

```
 Plotting_Function <- function( ...,FigureFolder){

      # find the number of input arguments
      nargin <- length(as.list(match.call())) -1  
      nargin <- nargin - 2

      variable_list <- list(...)
      variable_list <- variable_list[1:nargin]

      for (i in 1:length(variable_list)){
        if (variable_list[i] == "catg")   

routine 1 will go here

        if(variable_list[i] != "catg")

routine 2 will go here

      }
    } 
```

因此，从这里我试图使函数工作，以便如果将变量“catg”插入函数中，绘图例程将遵循例程 1（在我的情况下为轮廓），否则它将遵循例程 2（在 y 情况下为线图）。

但是，我遇到的问题是 variable_list 返回一个数字而不是插入的变量的名称，例如

```
Plotting_Function <- function(weight,height,catg,FigureFolder) 
```

variable_list 将是 1,2 和 3，而不是体重、身高和 catg，因此我不能使用我显示的 if 语句。任何人都可以提出一种方法来完成这项工作吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T01:18:20.130

如果我了解您要做什么，这将起作用：

```
Plotting_Function <- function( ... , FigureFolder) {

  v_names <- as.list(match.call())
  #variable_list <- list(...)
  variable_list <- v_names[2:(length(v_names)-1)]

  for (i in 1:length(variable_list)) {

    if (variable_list[i] == "catg") print("category") # example

      #routine 1 will go here

    if (variable_list[i] != "catg") print(as.character(variable_list[i][[1]])) # example

      #routine 2 will go here

  }
} 
```

# jquery - 单击链接后Jquery动画不起作用

> ID：16118860
> 
> 赞同：0
> 
> 时间：2013-04-20T09:43:56.923
> 
> 标签：jquery, hyperlink, jquery-animate

我刚开始使用 Jquery，我喜欢它，但我遇到了一个无法解决的问题。

我已经实现了一个我购买的插件，它创建了一个拇指网格，然后您可以过滤属性。（通过李课）

此外，我还写了一小段代码，可以在点击时扩展 div。在使用菜单（按属性过滤）之前，这两者都可以正常 [工作](http://media-surfer.nl/test)

如果您需要在此处粘贴的所有代码，我会这样做，但由于数量很多，我认为最好保留概述并访问链接。

我真的一生都无法弄清楚这一点，因此非常感谢您的帮助！提前致谢:)

这是我写的代码：

```
<!-- collapse expand jquery -->
<script type="text/javascript">

    $(document).ready(function(){

        $(".inhoud").hide();
        $(".show_hide").show();

        $('.show_hide').click(function(event) { 

            $(".inhoud").parent().animate({
                width: '160'
            }, 500, function() {
            // Animation complete.
          });

        var $inhoud = $(this).next(".inhoud");

        if($inhoud.hasClass("active")) 
        {
            $(this).parent().animate({
                width: '160'
              }, 500, function() {
                // Animation complete.
            });
            $inhoud.removeClass("active");
        } else {
            $(this).parent().animate({
                width: '769'
              }, 500, function() {
                // Animation complete.
            });
            $inhoud.addClass("active");
        }

    });

});

</script>
 <!-- collapse expand jquery --> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T10:30:12.763

Sooo .. 你在你的页面上发现了一个错误？:D

我想我曾经使用过同样的排序插件，它正在做的是创建一个新的元素集合（匹配排序标准），然后动画。我的**猜测**是这就是它破坏点击功能的确切原因，因为在准备好文档时，您将其绑定到现有元素，并且通过对插件进行排序会生成没有绑定点击事件的新元素。尝试`.on()`通过替换此行来使用：

```
$('.show_hide').click(function(event) { 
```

和

```
$(document).on('click','.show_hide', function(event) { 
```

# delphi - Delphi中actionmanager的动作不会出现快捷键

> ID：16118876
> 
> 赞同：0
> 
> 时间：2013-04-20T09:46:29.323
> 
> 标签：delphi, delphi-7, tactionmanager

我尝试在delphi7中使用actionmanager，几乎可以，除非我需要让action1的标题包含在快捷键中，例如：

```
Action1 CTRL+D 
```

当我为操作项分配快捷方式时，我需要什么，我希望它自动出现在工具栏的按钮中。 ![截屏](https://i.stack.imgur.com/w3N2w.png)

# blackberry - 黑莓：- 带有 ui 的背景线程

> ID：16118880
> 
> 赞同：1
> 
> 时间：2013-04-20T09:47:30.720
> 
> 标签：blackberry, blackberry-jde

我曾开发过生日提醒之类的应用程序。这里我同时需要一个 UI 和后台线程：一个在安装应用程序后开始运行并且始终在后台运行的线程，不受 UI 影响。打开或关闭 UI 不应影响线程。它会一直运行，直到应用程序被卸载。该线程总是每 1 分钟检查一次数据库中的更新，在后台静默检查。

问题是当我关闭 UI 时，线程会自动停止，当我再次打开应用程序 UI 时，它会再次启动。

为什么是这样？我希望我的线程始终运行..

# angularjs - ng-grid headerRowTemplate - 有人用过这个吗？

> ID：16118882
> 
> 赞同：7
> 
> 时间：2013-04-20T09:47:44.310
> 
> 标签：angularjs, ng-grid

我的团队想要使用 ng-grid 的这个特性。但是，它似乎没有在任何地方记录。我们想要做的是在 ng-grid 的标题区域的最后一列中放置一个“加号”图标。

有没有人找到这样做的好方法？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-10-25T17:37:14.867

只需修改`headerCellTemplate`网格中最后一列的 （参见[https://github.com/angular-ui/ng-grid/wiki/Templating](https://github.com/angular-ui/ng-grid/wiki/Templating)）。

这是一个示例（`<img src="PLUS-ICON.png" />`第二行中的注释）：

```
var myHeaderCellTemplate = '<div class="ngHeaderSortColumn {{col.headerClass}}" ng-style="{\'cursor\': col.cursor}" ng-class="{ \'ngSorted\': !noSortVisible }">' +
                           '<div ng-click="col.sort($event)" ng-class="\'colt\' + col.index" class="ngHeaderText">{{col.displayName}} <img src="PLUS-ICON.png" /></div>' +
                           '<div class="ngSortButtonDown" ng-show="col.showSortButtonDown()"></div>' +
                           '<div class="ngSortButtonUp" ng-show="col.showSortButtonUp()"></div>' +
                           '<div class="ngSortPriority">{{col.sortPriority}}</div>' +
                           '<div ng-class="{ ngPinnedIcon: col.pinned, ngUnPinnedIcon: !col.pinned }" ng-click="togglePin(col)" ng-show="col.pinnable"></div>' +
                           '</div>' +
                           '<div ng-show="col.resizable" class="ngHeaderGrip" ng-click="col.gripClick($event)" ng-mousedown="col.gripOnMouseDown($event)"></div>';
$scope.gridOptions = {
    data: self.myData,
    columnDefs: [
        { field: 'firstField', displayName: 'First Column' },
        { field: 'secondField', displayName: 'Second Column' },
          ...
        { field: 'lastField', displayName: 'Last Column', headerCellTemplate: myHeaderCellTemplate }
    ]
}; 
```

# configuration - propel 找不到 postgresql 驱动程序 - 错误的 pdo 版本？

> ID：16118884
> 
> 赞同：0
> 
> 时间：2013-04-20T09:47:48.903
> 
> 标签：configuration, propel, postgresql-9.1, postgresql-8.4

我无法在我的系统上运行推进脚本。

我的 build.properties 看起来像这样：

```
propel.project = test

# The Propel driver to use for generating SQL, etc.
propel.database = pgsql

# This must be a PDO DSN
propel.database.url = pgsql:host=localhost;port=5432;dbname=test
propel.database.user = user
propel.database.password = password 
```

运行 propel-gen 时出现以下错误。撤销：

> [propel-schema-reverse] 从元数据构建 XML 时出错：/home/user/web/dev/vendor/propel/generator/build-propel.xml:296:1: 找不到驱动程序

pdo_pgsql 已启用（有几个应用程序成功运行它）；但在我的 phpinfo 中似乎有一个错误的版本：

> PostgreSQL(libpq) 版本 8.4.13

我正在运行 PostgreSQL 9.1。我认为这会导致错误，但我不知道为什么版本不同。我首先安装了 PostGreSQL，然后通过 apt-get 安装了 php5-fpm 等。

在 Ubuntu 11.04 上使用 PHP 5.3.5。有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-18T15:14:44.470

删除 buildtime-conf.xml 中 xml 标记之间的所有空格和换行符。这对我有用。

使用 runtime-conf.xml 作为 buildtime-conf.xml 的模板后，我的文件看起来像这样

```
...
            <adapter>
mysql
            </adapter>

... 
```

现在它看起来像那样并且有效

```
...
            <adapter>mysql</adapter>

... 
```

# python - 函数在递归大数时抛出错误

> ID：16118885
> 
> 赞同：3
> 
> 时间：2013-04-20T09:47:50.517
> 
> 标签：python, python-2.7

我正在使用 Python 2.7.3 并具有此功能：

```
def f(n):
    if n == 0:
        return 0
    else:
        return (n % 3 == 0 or n % 5 == 0) * n + f(n - 1) 
f(999) 
```

它在 f(993) 之前有效，但在 f(999) 之前无效。当我尝试时，不断弹出无数错误。我不明白。谁能告诉我怎么了？

**编辑：** 谢谢大家的回答。我想我最好在 python 中使用迭代。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-20T10:04:45.183

在 Python 中，递归仅限于**999**次递归调用。

如果你真的想改变递归调用的限制，你可以使用[sys.setrecursionlimit(limit)](http://docs.python.org/2/library/sys.html#sys.setrecursionlimit)。

例如：

```
sys.setrecursionlimit(2000) 
```

但是，更改递归限制可能很**危险**。堆栈帧可能会变得太大。

[从文档：](http://docs.python.org/2/library/sys.html#sys.getrecursionlimit)

> 此限制可防止**无限**递归导致 C 堆栈溢出和 Python 崩溃。可以设置`setrecursionlimit()`。

**你可以做的是：**

就像@Dan D. 所说，你最好迭代地重写你的代码。[这就是你应该这样做的原因](https://stackoverflow.com/a/2651200/1031955)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-20T09:53:38.520

最好使用迭代：

```
def f(n):
    s = 0
    while n > 0:
        s += (n%3==0 or n%5==0)*n
        n -= 1
    return s
print f(999) 
```

输出：

```
233168 
```

也可以这样写`sum`：

```
def f(n):
    return sum((n%3==0 or n%5==0)*n for n in reversed(range(1,n+1))) 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-20T10:27:46.987

正如您已经从其他答案中了解到代码失败的原因一样，您可能已经通过增加递归限制或使用迭代解决方案获得了替代解决方案

或者，有一种更聪明的方法来解决您的问题，这需要对您实际想要实现的目标进行一些反省

> 将 3 和 5 的所有因数相加，从 0 到 N

这简单地归结为

```
>>> def fn_ab(n):
    numbers = [0]*n
    numbers[0:n:3] = range(0,n,3)
    numbers[0:n:5] = range(0,n,5)
    return sum(numbers) 
```

# android - android中选定日期和选定时间的弹出警报

> ID：16118887
> 
> 赞同：2
> 
> 时间：2013-04-20T09:47:59.313
> 
> 标签：android, android-intent

我想在选定的日期（即星期一、星期二等）弹出警报。并在每周的选定时间。我对间隔有一个想法，但我不知道如何获得第二天并弹出警报？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T09:50:03.250

您需要使用[`AlarmManager`](http://developer.android.com/reference/android/app/AlarmManager.html)并花一些`WakeClock`时间处理`Intent`in `Service`（确保释放它并选择正确的类型）。

这是一个很好的例子： [https ://stackoverflow.com/a/8801990/220710](https://stackoverflow.com/a/8801990/220710)

要获取当前星期几，请查看以下问题： [Android：如何以用户的语言获取当前星期几（星期一等）？](https://stackoverflow.com/questions/7651221/android-how-to-get-the-current-day-of-the-week-monday-etc-in-user-languag)

然后你会使用：

> *setInexactRepeating(int type, long triggerAtMillis, long intervalMillis, PendingIntent 操作)*
> 
> 安排触发时间要求不准确的重复警报；例如，每小时重复一次的警报，但不一定在每小时的开头。

然后你需要设置：

*   类型 =`RTC_WAKEUP`
*   intervalMillis = 一周内的毫秒数
*   triggerAtMillis = `System.currentTimeMillis()`+ ms 到下周一、周二或其他任何时间
*   意图 = 您要向`Service`将处理它的意图触发的意图。

# c++11 - C++ 11 等效于 java.util.ConcurrentHashMap

> ID：16118889
> 
> 赞同：7
> 
> 时间：2013-04-20T09:48:03.537
> 
> 标签：c++11, map, concurrency, stl, containers

我发现自己一直在编写 Mutex 代码，以便同步对 std::unordered_map 和其他容器的读/写访问，以便我可以像使用 java.util.concurrent 容器一样使用它们。我正要开始编写一个包装器来封装 Mutex，但我宁愿使用一个经过良好测试的库，这样我就不会塞满线程。

有这样的图书馆吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-20T09:54:51.443

英特尔制作了一个名为[Threading Building Blocks](http://threadingbuildingblocks.org/)的库，其中包含两个这样的东西：concurrent_hash_map 和 concurrent_unordered_map。它们的[特性](http://threadingbuildingblocks.org/docs/help/reference/containers_overview/concurrent_unordered_map_cls.htm)略有不同，但其中一种可能适合您的需求。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-09-11T10:02:18.890

[Folly](https://github.com/facebook/folly)有一个`AtomicHashmap`实现。主要限制是您只能使用`int32`或`int64`键。[在此处](https://github.com/facebook/folly/blob/master/folly/docs/AtomicHashMap.md)查看文档（特别是“限制”部分）

# c# - 使用 SevenZip 提取文件

> ID：16118894
> 
> 赞同：-1
> 
> 时间：2013-04-20T09:48:13.453
> 
> 标签：c#, multithreading, 7zip

我在这方面遇到了异常，任何人都可以帮助我吗？

```
Exception:Unable to cast COM object of type 'System.__ComObject' to interface type 'SevenZip.IInArchive'. This operation failed because the QueryInterface call on the COM component for the interface with IID '{23170F69-40C1-278A-0000-000600600000}' failed due to the following error: No such interface supported (Exception from HRESULT: 0x80004002 (E_NOINTERFACE)) 
```

代码：

```
private void UnZip(string zipToExtract, string unzipDirectoryl) // Extract zip/lot file in same directory
    {

            #region Extraction test - ExtractFiles
            using (var tmp = new SevenZipExtractor(zipToExtract))
            {
                if (this.progressBar1.InvokeRequired)
                {
                    progressBar1.Invoke(new Action(delegate()
                    {
                        progressBar1.Maximum = tmp.ArchiveFileData.Count;
                        progressBar1.Value = 0;
                    }));
                }
                else
                {
                    progressBar1.Maximum = tmp.ArchiveFileData.Count;
                    progressBar1.Value = 0;

                }
                for (int i = 0; i < tmp.ArchiveFileData.Count; i++)
                {
                    tmp.ExtractFiles(unzipDirectoryl, tmp.ArchiveFileData[i].Index);

                    int tempval = 0,tot=0;
                    if (this.progressBar1.InvokeRequired)
                    {
                        progressBar1.Invoke(new Action(delegate() { progressBar1.Value++; tempval = progressBar1.Value; progressBar1.Refresh(); tot = progressBar1.Maximum; }));
                    }
                    else
                    {
                        progressBar1.Value++; //pseudo-code
                        progressBar1.Refresh();
                        tempval = progressBar1.Value;
                        tot = progressBar1.Maximum;
                    }
                    //progressBar1.Value += 1;
                    //progressBar1.Refresh();

                    if (this.label3.InvokeRequired)
                    {
                        label3.Invoke(new Action(delegate() { label3.Text = ((tempval * 100) / (tot)).ToString(); label3.Refresh(); }));
                    }
                    else
                    {
                        label3.Text = ((tempval * 100) / (tmp.ArchiveFileData.Count)).ToString();
                        label3.Refresh();
                    }
                    if (!tmp.ArchiveFileData[i].IsDirectory)
                    {
                        FileInfo f = new FileInfo(unzipDirectoryl + "\\" + tmp.ArchiveFileData[i].FileName);
                        if (f.Length == 0)
                        {
                            status("Error :Zero byte file observed: \\" + tmp.ArchiveFileData[i].FileName, Color.Red);
                        }
                    }
                }
                // To extract more than 1 file at a time or when you definitely know which files to extract,
                // use something like
                //tmp.ExtractFiles(@"d:\Temp\Result", 1, 3, 5);
            }

            #endregion

    } 
```

我得到了自己的解决方案：这种变化让我得到了完美的结果，但为什么？

```
int temp= tmp.ArchiveFileData.Count;
if (this.progressBar1.InvokeRequired)
            {
                progressBar1.Invoke(new Action(delegate()
                {
                    progressBar1.Maximum = temp;
                    progressBar1.Value = 0;
                }));
            } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T05:40:00.903

它将帮助我摆脱异常：

```
int temp= tmp.ArchiveFileData.Count;
if (this.progressBar1.InvokeRequired)
        {
            progressBar1.Invoke(new Action(delegate()
            {
                progressBar1.Maximum = temp;
                progressBar1.Value = 0;
            }));
        } 
```

# c++ - 将“常量指针”传递给函数

> ID：16118895
> 
> 赞同：1
> 
> 时间：2013-04-20T09:48:16.677
> 
> 标签：c++

我编写了在二叉树上执行各种操作的程序。一开始我设置了空根指针，然后调用了几个`insert()`向树添加新节点的函数。

最后，我调用`search()`函数找到请求的结构节点并返回它。

* * *

`insert()`函数有两个参数 - 对根指针的引用和常量 int 键，它将被转换为节点结构并添加到树中

`search()`函数采用“恒定根指针” - 不是引用，因为我想直接对本地指针进行操作，并且我不希望更改它。它需要的另一个参数是 int key。

* * *

这是整个程序：

```
#include <iostream>

struct node
{
    node *p; // parent
    node *left, *right;
    int key;
};

void insert(node *&root, const int key)
{
    node newElement = {};
    newElement.key = key;

    node *y = NULL;
    while(root)
    {
        if(key == root->key) exit(EXIT_FAILURE);
        y = root;
        root = (key < root->key) ? root->left : root->right;
    }

    newElement.p = y;

    if(!y) root = &newElement;
    else if(key < y->key) y->left = &newElement;
    else y->right = &newElement;
}

node* search(const node *root, const int key)
{
    while( (root) && (root->key != key) )
        root = (key < root->key) ? root->left : root->right;

    return root;
}

int main()
{
    using namespace std;
    node *root = NULL;
    insert(root, 5);
    insert(root, 2);

    cout << search(root, 5)->key << endl;
    return 0;
} 
```

**我的问题是 -**为什么搜索功能不起作用？它显示错误 - 返回值类型与函数类型不匹配。但我归还了指针，就像声明中所说的那样！

另外，`"const"`这里的关键字可以吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-20T09:51:17.960

`root`是`const node*`，你的返回值是`node*`。应改为`const node*`.

```
const node* search(const node *root, const int key); 
```

如果你需要一个`search`函数来给你一个非常量`node`，那么它需要一个非常量`node`参数。您可以提供重载以允许两种可能性

```
node* search(node *root, const int key); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-20T09:54:03.623

由于您返回的是相同的指针，因此您不能有一个 const 参数和一个非常量返回。而是编写两个版本，一个 const 和一个非常量。

这是 const_cast 合理的少数情况之一。编写两个版本的搜索函数，一个可以使用 const_cast 调用另一个。

```
const node* search(const node *root, const int key)
{
    while( (root) && (root->key != key) )
        root = (key < root->key) ? root->left : root->right;

    return root;
}

node* search(node *root, const int key)
{
    return const_cast<node *>(search(const_cast<const node *>(root), key));
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-20T09:51:09.017

在里面`search`，变量`root`是一个`const node*`。但是，您试图将其作为`node*`. 你不能这样做，因为它会违反 const 正确性。如果您返回一个指向真正`const`对象的指针，那么客户端将能够修改该对象。

相反，您需要使函数返回一个`const node*`. 要么，要么`root`应该只是一个`node*`.

# php - 使用 php mail() 发送附件

> ID：16118896
> 
> 赞同：0
> 
> 时间：2013-04-20T09:48:18.587
> 
> 标签：php

我想使用 mail() 函数将图像作为附件附加。
我正在使用 xampp 并希望将图像从我的计算机发送到电子邮件 ID。此代码很容易发送文本电子邮件：

```
<?php 
    if(mail('abc@gmail.com','Hello','Testing  Testing','From:xyz@gmail.com'))
    {
       echo "Success";
    } else {
       echo "Fail";
    }
?> 
```

我想使用php的普通邮件方法在它之后添加一个图像。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T10:10:46.683

您需要使用 pear 库来撰写或发送邮件。

```
 include_once('Mail.php');
 include_once('Mail_Mime/mime.php');
 $message = new Mail_mime();

 $message->setTXTBody($text);

$message->addAttachment($path_of_uploaded_file);

$body = $message->get();

$extraheaders = array("From"=>$from, "Subject"=>$subject,"Reply-To"=>$visitor_email);

$headers = $message->headers($extraheaders);

$mail = Mail::factory("mail");

$mail->send($to, $headers, $body); 
```

这是一种[方法](http://www.html-form-guide.com/email-form/php-email-form-attachment.html#pearinstall)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-20T09:57:21.777

您可以使用 Zend 库中的 Mail 类，非常简单且不依赖 PEAR。

它已在前面的问题中介绍[过](https://stackoverflow.com/questions/3164766/how-to-use-zend-library-without-installation-of-zend-framework)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-20T11:50:51.223

我建议使用 Swiftmailer。它是最新的，易于安装和使用。您可以通过 PEAR[安装](http://swiftmailer.org/docs/installing.html)它，但还有许多其他选项您可能会发现更方便。

发送带有手册附件的邮件的示例代码：

```
require_once 'lib/swift_required.php';

 // Create the message
 $message = Swift_Message::newInstance()

 // Give the message a subject
 ->setSubject('Your subject')

 // Set the From address with an associative array
 ->setFrom(array('john@doe.com' => 'John Doe'))

 // Set the To addresses with an associative array
 ->setTo(array('receiver@domain.org', 'other@domain.org' => 'A name'))

 // Give it a body
 ->setBody('Here is the message itself')

 // And optionally an alternative body
->addPart('<q>Here is the message itself</q>', 'text/html')

// Optionally add any attachments
->attach(Swift_Attachment::fromPath('my-document.pdf')); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-03-03T10:03:28.510

这是使用 php 和 ajax 它将工作 100%

```
 <?php
        include "db.php";
        if(isset($_POST['tourid']))
       {

        $to=$_POST['email'];
        $file_name = "test/sample.pdf";                               
        require 'class/class.phpmailer.php';
        $mail = new PHPMailer;
        $mail->IsSMTP();                                           //Sets Mailer to send message using SMTP
        $mail->Host = '';                                           //Sets the SMTP hosts of your Email hosting, this for Godaddy
        $mail->Port = '';                                       //Sets the default SMTP server port
        $mail->SMTPAuth = true;                                     //Sets SMTP authentication. Utilizes the Username and Password variables
        $mail->Username = '';                                        //Sets SMTP username
        $mail->Password = '';                                       //Sets SMTP password
        $mail->SMTPSecure = '';                                      //Sets connection prefix. Options are "", "ssl" or "tls"
        $mail->From = '';                                              //Sets the From email address for the message
        $mail->FromName = '';                                          //Sets the From name of the message
        $mail->AddAddress($to, 'Name');                                 //Adds a "To" address
        $mail->WordWrap = 50;                         ``                  //Sets word wrapping on the body of the message to a given number of characters
        $mail->IsHTML(true);                                            //Sets message type to HTML 
        $mail->AddAttachment($file_name);                                //Adds an attachment from a path on the filesystem
        $mail->Subject = 'Customer Details';                             //Sets the Subject of the message
        $mail->Body = 'Please Find Tour details in attached PDF File.';  //An HTML or plain text message body
        if($mail->Send())                                                //Send an Email. Return true on success or false on error
        {
           $message = '<label class="text-success">Tour Details has been send successfully...</label>';
           echo $message;
           unlink($file_name);
        }

        }
         else
        {

             echo "sending error";
        }

        ?> 
```

# c# - 我可以在直接子类中访问抽象类的具体方法吗？

> ID：16118899
> 
> 赞同：0
> 
> 时间：2013-04-20T09:48:44.893
> 
> 标签：c#, .net, abstract-class, abstraction

有没有一种方法可以访问直接子类中抽象类的具体方法，如下所示

```
 abstract class ParameterBase
  {           
        public void test()
        { 
            string name = "testname";
            console.writeline(name);
        }          
  }

  public  class Parameter1 : ParameterBase 
  {
       //I Need to call(access) the Test() Method here i.e print "testname" in the  console         
  } 
```

现在我知道我们可以创建一个类型为**ParameterBase**的子类的实例，并访问**ParameterBase()中的****test()**方法， 如下所示

 **```
 ParameterBase PB = new Parameter1();
   PB.test(); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-20T09:55:07.760

您必须在继承类时保持可访问性级别。你可以这样做 ：

```
abstract class ParameterBase
{
    public void test()
    {
        string name = "testname";
        Console.WriteLine(name);
    }
}

class Parameter1 : ParameterBase
{
    void getvalue()
    {
        Parameter1 pb = new Parameter1();
        pb.test();
    }        
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-02-15T05:54:53.893

请看这个： -

```
class Program
{
    static void Main(string[] args)
    {
        Test2 t = new Test2();
        t.display();
        t.absDsisplay();
    }
}

abstract class Test1
{
    public void display()
    {
        Console.WriteLine("display");
    }
    public abstract void absDsisplay();

}
class Test2 : Test1
{

    void GetValu()
    {

    }

    public override void absDsisplay()
    {
        Console.WriteLine("absDisplay");
    }
} 
```**

# knitr - 无法在 Lyx for MacBook 上运行 knitr

> ID：16118901
> 
> 赞同：1
> 
> 时间：2013-04-20T09:48:57.400
> 
> 标签：knitr, lyx

我在 LyX 2.0.5.1 和 RStudio 0.97.318 上使用最新版本。我已经在 R 中安装了 knitr，我的 /usr/bin/Rscript 在 LYX 的 PATH 前缀中，但我仍然无法运行示例文件 knitr.lyx。我得到的错误是：

```
An error occurred while running:
Rscript --verbose --no-save --no-restore
"/Applications/LyX.app/Contents/Resources/scripts/lyxknitr.R"
"/var/folders/ls/mbs_stj505lc25gj2m7h5h100000gn/T/lyx_tmpdir.JL9170/lyx_tmpb... 
```

我将 lyxknitr.R 更改为官方引用中列出的其他版本，它也不适用于它们。当我在 Windows 7 上做类似的事情时，它运行正常。我试图重新安装lyx，它没有帮助。我还可以做些什么？

谢谢！

更新：我在 R 中安装了 stringer 包，重新配置，但 Lyx 仍然给出错误：

```
12:24:25.747: Rscript --verbose --no-save --no-restore "/Applications/LyX.app/Contents/Resources/scripts/lyxknitr.R" "/var/folders/ls/mbs_stj505lc25gj2m7h5h100000gn/T/lyx_tmpdir.JL2777/lyx_tmpbuf3/""knitr.Rnw" "/var/folders/ls/mbs_stj505lc25gj2m7h5h100000gn/T/lyx_tmpdir.JL2777/lyx_tmpbuf3/""knitr.tex" ISO-8859-15 "/Users/Natasha/Stats315b/HW1/"
12:24:25.749: running
12:24:25.758:   '/Library/Frameworks/R.framework/Versions/2.15/Resources/bin/R --slave --no-restore --no-save --no-restore --file=/Applications/LyX.app/Contents/Resources/scripts/lyxknitr.R --args /var/folders/ls/
12:24:25.759: mbs_stj505lc25gj2m7h5h100000gn/T/lyx_tmpdir.JL2777/lyx_tmpbuf3/knitr.Rnw /var/folders/ls/mbs_stj505lc25gj2m7h5h100000gn/T/lyx_tmpdir.JL2777/lyx_tmpbuf3/knitr.tex ISO-8859-15'
12:24:25.759: 
12:24:25.946: Error in loadNamespace(i, c(lib.loc, .libPaths())) : 
12:24:25.951:   there is no package called 'stringr'
12:24:25.957: Error: package/namespace load failed for 'knitr'
12:24:25.957: Execution halted

Running: Rscript --verbose --no-save --no-restore "/Applications/LyX.app/Contents/Resources/scripts/lyxknitr.R" "/var/folders/ls/mbs_stj505lc25gj2m7h5h100000gn/T/lyx_tmpdir.JL2777/lyx_tmpbuf3/""knitr.Rnw" "/var/folders/ls/mbs_stj505lc25gj2m7h5h100000gn/T/lyx_tmpdir.JL2777/lyx_tmpbuf3/""knitr.tex" ISO-8859-15 "/Users/Natasha/Stats315b/HW1/"
support/Systemcall.cpp (273): Systemcall: 'Rscript --verbose --no-save --no-restore "/Applications/LyX.app/Contents/Resources/scripts/lyxknitr.R" "/var/folders/ls/mbs_stj505lc25gj2m7h5h100000gn/T/lyx_tmpdir.JL2777/lyx_tmpbuf3/""knitr.Rnw" "/var/folders/ls/mbs_stj505lc25gj2m7h5h100000gn/T/lyx_tmpdir.JL2777/lyx_tmpbuf3/""knitr.tex" ISO-8859-15 "/Users/Natasha/Stats315b/HW1/"' finished with exit code 1
Error: Cannot convert file
----------------------------------------
An error occurred while running:
Rscript --verbose --no-save --no-restore
"/Applications/LyX.app/Contents/Resources/scripts/lyxknitr.R"
"/var/folders/ls/mbs_stj505lc25gj2m7h5h100000gn/T/lyx_tmpdir.JL2777/lyx_tmpb...
12:24:27.545: Error while previewing format: pdf2 
```

我不必在 Windows 下安装 stringr，它工作正常。感谢帮助！

# java - 仅获取 Liferay 中的特定数据记录

> ID：16118903
> 
> 赞同：1
> 
> 时间：2013-04-20T09:49:09.437
> 
> 标签：java, database, liferay, liferay-6

我正在使用 Liferay 开发一个模块。一部分涉及仅从数据库中获取员工休假状态为待处理的那些记录。我必须获取“待处理”记录的代码是：

```
 @SuppressWarnings("unchecked")
   public static List<Employee> getEmployeeData() throws    PortalException, SystemException{

   List<Employee> employeeDetails;

   try{
    int totalEmployees = EmployeeLocalServiceUtil.getEmployeesCount();
            for(Employee emp: employeeDetails   {
               if(emp.getEmpStatus.equals("Pending")  {
    employeeDetails=  EmployeeLocalServiceUtil.getEmployees(0,totalEmployees);
           }
    }           
                      }catch(SystemException se){
                          employeeDetails = Collections.emptyList();
                     }

                     return employeeDetails;
                } 
```

上面的代码获取所有详细信息 - 待处理和非待处理。我知道这是由于上面代码中的语句而发生的：

employeeDetails= EmployeeLocalServiceUtil.getEmployees(0,totalEmployees);

因为它获取所有行。那么我应该如何构建和修改我的代码以仅获取待处理的详细信息？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-20T16:26:04.753

当您在 Liferay 中处理自定义实体时，您可以在 service.xml 中使用 finder 标签来处理这种情况。在 service.xml 中为 empStatus 字段定义查找器。

```
<finder name="EmpStatus" return-type="Collection">
  <finder-column name="empStatus"/>
</finder> 
```

*这将在** *Persistence.java 中创建 finder[findByEmpStatus(String status)] 方法，该方法将根据 status 返回特定的行，现在您需要手动将方法添加到您的 *(Local)ServiceImpl.java 文件中。这些方法将调用您的 *persitence.finderMethodName() 方法。

高温下，

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T12:16:11.867

一个快速但非常糟糕的做法是让您的代码保持这种更改：

```
List<Employee> employeeDetails = new ArrayList<Employee>;
try{

List<Employees> allEmployees = EmployeeLocalServiceUtil.getAllEmployees();

        for(Employee emp: allEmployees {
           if(emp.getEmpStatus.equals("Pending")  {
employeeDetails.add(emp);
       }
}return employeeDetails; 
```

现在，正确的方法是：

1.  正如@Pankaj Kathiriya 已经提议的那样，添加一个Finder。然后，构建服务
2.  转到 EmployeeLocalServiceImpl，并添加

    ```
    public List getAllEmployeesByEmpStatus (String status) { 
    try { 
        return employeePersistence.findByEmpStatus(status); 
    } catch (SystemException e) {
        e.printStackTrace(); return Collections.emptyList(); 
        }
    } 
    ```

然后再次构建服务

1.  将您的代码替换为

    ```
     List employeeDetails = EmployeeLocalServiceUtil.getAllEmployeesByEmpStatus("Pending") ; 
    return employeeDetails; 
    ```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-22T10:32:31.903

我有一个解决方案。我在论坛中收到了在 liferay 中使用动态查询的建议。

这很简单。

在 liferay 上阅读有关动态查询的 wiki。

好吧，回答我自己的问题，这是我找到的解决方案：

```
 DynamicQuery dynamicQuery = DynamicQueryFactoryUtil.forClass(LeaveApplication.class);

  dynamicQuery.add(PropertyFactoryUtil.forName("EmpStatus").eq("Pending")); 
```

然后我返回那些状态未决的人..

希望它可以帮助某人..欢迎更多建议:)

# ios - StoreKit 框架 2 题

> ID：16118905
> 
> 赞同：-3
> 
> 时间：2013-04-20T09:49:17.717
> 
> 标签：ios, objective-c, cocoa-touch, storekit

刚开始使用商店工具包框架。我有两个问题：

1）有没有办法找出当前用户购买的所有物品？（获取 id 列表） 2) 有没有办法购买所有物品？还是我必须提示用户每一个？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T10:15:05.957

有一种方法可以通过调用 [[SKPaymentQueue defaultQueue] restoreCompletedTransactions]; 来找出购买的物品。

然后

```
-(void)paymentQueue:(SKPaymentQueue *)queue updatedTransactions:(NSArray *)transactions{

for (SKPaymentTransaction * transaction in transactions) {
    switch (transaction.transactionState)
    {
        case SKPaymentTransactionStatePurchased:   break;
   case SKPaymentTransactionStateRestored: 
```

// 从 transaction.originalTransaction.payment.productIdentifier 中获取有关商品的信息

```
 [[SKPaymentQueue defaultQueue] finishTransaction:transaction];
            break;

        case SKPaymentTransactionStateFailed:     break;

        case SKPaymentTransactionStatePurchasing:      break;

        default:
              break;
}
} 
```

}

2）即使您可以告诉用户可以一键购买所有商品。用户将被要求单独购买每件商品。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-20T10:05:57.827

1.  `[[SKPaymentQueue defaultQueue] restoreCompletedTransactions];`
2.  如果 iTunes 中的 IAP 不同，您必须提示每个用户。但是，如果您愿意，您可以在 iTunes 中创建单个 IAP（例如 com.abc.packOfTen），并在购买时向用户提供 10 个项目。

# php - 努力让这个上传到我的数据库中

> ID：16118910
> 
> 赞同：-4
> 
> 时间：2013-04-20T09:50:02.280
> 
> 标签：php, image, upload

```
// Check his status.
if (!empty($_SESSION[username]))
{
echo "Hi, <b>$_SESSION[username]</b>.";

if ($_POST['submit'])
{

    //get file attributes
    $name = $_FILES['myfile']['name'];
    $tmp_name = $_FILES['myfile']['tmp_name'];

if ($name)
{
    //start upload process

    $location = "avatars/$name";
    move_uploaded_file($tmp_name,$location);

        $query = mysql_query("UPDATE members SET imagelocation='$location' WHERE username='$username'");

        die("Your image has been uploaded! <a href='dashboard.php'>Back</a>");

}
else
die("Please select file");
}
echo "upload your image:

<form action='profile.php' method='POST' enctype='multipart/formdata'>

File: <input type='file' name='myfile'> <input type='submit' name='Submit' value='Upload'></form>";

} 
```

它显示用户名很好，我在数据库中有正确的表和列但是当你点击上传时它什么都不做？

您可以通过以用户名登录自己查看：test 密码：test url：learning.iamdanbarrett.com

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T09:58:22.360

我认为您的查询有问题

```
$query = mysql_query("UPDATE members SET imagelocation='$location' WHERE username='$username'"); 
```

因为您没有在脚本中的任何位置定义 $username 变量，因此您的查询正在检查

```
UPDATE members SET imagelocation='$location' WHERE username =''; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-20T10:01:52.113

**if ($_POST['submit'])**应该是**if ($_POST['Submit'])**因为您的提交按钮名称以大写**S**开头而不是小 s

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-20T10:33:55.277

代替

```
if ($_POST['submit']) 
```

和

```
if (isset($_POST['submit'])) 
```

# javascript - 在 Cloud9 上通过 nodejs 进行的车把预编译失败

> ID：16118911
> 
> 赞同：1
> 
> 时间：2013-04-20T09:50:03.017
> 
> 标签：javascript, node.js, handlebars.js, cloud9-ide, pre-compilation

我正在使用车把模板预编译器进行 express ( [https://github.com/diffsky/hbsc](https://github.com/diffsky/hbsc) ) 在 nodejs 中预编译我的模板。

当我在本地执行它时效果很好，但是当我在 cloud9 ide ( [https://c9.io](https://c9.io) ) 中尝试它时它第一次有效，然后我只得到异常。

这是我在 app.js 中的配置

```
var hbsc = require('hbsc');
    hbsc.compile({
      dir: __dirname + '/views/public',
      outfile: __dirname + '/public/javascripts/compiled-templates.js',
      extensions: ['hbs', 'handlebars']
    }); 
```

这是我的简单模板

```
<b>All users</b>

<div>
    {{#each this}}
    <li>{{email}}</li>
    {{/each}}
</div> 
```

这是我得到的例外

```
/var/lib/stickshift/5168822b4382ec505c0000ba/app-root/data/471704/views/public/listusers.handlebars:1
(function (exports, require, module, __filename, __dirname) { <b>All users</b>
                                  ^
SyntaxError: Unexpected token <
    at Module._compile (module.js:437:25)
    at Object.Module._extensions..js (module.js:467:10)
    at Module.load (module.js:356:32)
    at Function.Module._load (module.js:312:12)
    at Module.runMain (module.js:492:10)
    at process.startup.processNextTick.process._tickCallback (node.js:244:9) 
```

如果我删除已编译的模板文件并在一段时间后重试，它会成功（有时）但如果我更改模板，则会返回错误。

同样，此代码在本地运行时运行良好，因此看起来 cloud9 处理的方式有所不同。

这个错误真的让我很困惑，因为我发现它没有逻辑。任何人都可以帮助我了解从哪里开始解决这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T16:27:41.747

这是服务器的车把模板和客户端的车把模板之间的冲突。我使用 express3-handlebars 为服务器编译模板，错误来自该编译器，而不是基于客户端的编译器。

我的解决方案是将客户端模板重命名为 .html。这样两个编译器似乎相处得很好。

我仍然无法解释为什么我在本地 nodejs 安装中从来没有遇到同样的错误。

# javascript - DOM如何在一个div中添加多个样式

> ID：16118921
> 
> 赞同：0
> 
> 时间：2013-04-20T09:51:02.027
> 
> 标签：javascript, dom

我正在尝试使用 DOM 添加多个样式属性`setAttribute`，但它不起作用。我怎样才能使用 JavaScript 做到这一点？

```
 var modificar = document.getElementById('opciones');
 modificar.setAttribute('style','float:left');
 modificar.setAttribute('style','margin:0px'); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-20T09:52:53.043

在元素上使用[`style`对象：](http://www.w3.org/TR/html5/dom.html#dom-style)

```
modificar.style.cssFloat = "left";
modificar.style.margin = "0px"; 
```

（请注意，它来自 JavaScript `cssFloat`，而不是。这是因为它是 ECMAScript 规范第 3 版中的“未来保留字”[它不再在 ES5 中]，并且在以文字表示法编写属性名称时不能使用保留字.所以在定义样式对象时，他们选择了冲突时的名称。）`float``float``cssFloat`

对于带有破折号的属性，您可以使用 camelCase 代替：

```
modificar.style.backgroundColor = "#eee"; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-20T09:56:51.000

`setAttribute`很可能工作正常，但由于您调用它两次，第一次调用的结果被第二次覆盖。

要么做：

```
modificar.setAttribute('style','float: left; margin:0px;'); 
```

或者使用`style`另一个答案中建议的属性。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-20T09:58:01.403

有两种方法可以做到：

```
modificar.style.setAttribute('float','left');
modificar.style.setAttribute('margin','0px'); 
```

或者：

```
modificar.style.cssFloat  = 'left';
modificar.style.margin = '0px'; 
```

`cssFloat`（编辑：根据后面的帖子更正）

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-20T10:09:10.987

您可以将类设置为 div，例如：

```
var modificar = document.getElementById('opciones');
x.className = "someClass"; 
```

在 CSS 中，添加任意数量的样式：

```
.someClass {
    float:left;
    margin:0px;
    color : red;
    ...
    ...
} 
```

# c# - 检查 Windows 驱动器是否存在

> ID：16118927
> 
> 赞同：3
> 
> 时间：2013-04-20T09:51:32.880
> 
> 标签：c#, windows

我将编写 C# 代码来检查 C、D、E...（Windows 磁盘驱动器）是否存在？最后找到客户端窗口中存在的驱动器，将我的文件复制到那里。

我想编写类似于以下逻辑的代码：

```
If ( !Exist(Drive "C:\" ) )
{
   If ( !Exist(Drive "D:\" ) )
   {
      If ( !Exist(Drive "E:\" ) )
      {
         ...
         search to fined existence drive
         copy file to a path of that existence drive
      }
   }
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-20T09:54:36.790

试试这个：

```
 //Get Drive names with DriveInfo.GetDrives()
 var drives= DriveInfo.GetDrives();

       foreach (var item in drives)
       {
           //Do Something
       } 
```

**已编辑**（检查存在）

```
 var drives= DriveInfo.GetDrives();
       if (drives.Where(data => data.Name == "C:\\").Count() == 1 &&
           drives.Where(data => data.Name == "D:\\").Count() == 1 &&
           drives.Where(data => data.Name == "E:\\").Count() == 1)
       {

       } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-20T09:59:15.870

您可以使用 Directory.Exists() 检查目录是否存在。

```
foreach (DriveInfo item in DriveInfo.GetDrives())
{
        if (Directory.Exists(item.Name))
        {
            // item.name is existed
        }
} 
```

[您可以从这里](http://msdn.microsoft.com/en-us/library/system.io.directory.exists.aspx)了解这一点。

# c# - 动态循环检查复选框以检查它是否为真

> ID：16118929
> 
> 赞同：0
> 
> 时间：2013-04-20T09:51:46.037
> 
> 标签：c#, .net, vb.net, winforms, checkbox

我在一个表单上有 37 个复选框。我保留了每个复选框的名称，例如：`p1` `p2` `p3` `.........` `p36` `p37`. 所以现在在 VB.NET 中，我使用通过点字符串循环所有控件来控制转换并获取复选框的值。

下面是我使用的 VB.NET 代码，它可以工作。

```
 Dim Start As Integer = 0
        Dim StrAdd As String = ""
        For i As Integer = 1 To 37
            Const chk As String = "p"
            Dim chkBox As CheckBox = CType(per_box.Controls(chk & i), CheckBox)
            If chkBox.Checked = True Then
                If Start = 0 Then
                    StrAdd = StrAdd + "1"
                    Start = 1
                Else
                    StrAdd = StrAdd + ":1"
                End If
            Else
                If Start = 0 Then
                    StrAdd = StrAdd + "0"
                    Start = 1
                Else
                    StrAdd = StrAdd + ":0"
                End If
            End If
        Next 
```

但是，在创建 C# 应用程序时，我尝试做同样的事情，但它不起作用。任何人都可以帮忙。

这是我的 C# 代码：

```
 string chk = "p";
        int start = 1;
        string str = "";
        for (int i = 1; i <= 37; i++)
        {
            chk = chk + i;
            CheckBox chkBox = (CheckBox)tab_patients.Controls[chk + i];
            if (chkBox.Checked == true)
            {
                if (start == 1)
                {
                    str = str + "1";
                    start = 0;
                }
                else
                {
                    str = str + ":1";
                }
            }
            else
            {
                if (start == 1)
                {
                    str = str + "0";
                    start = 0;
                }
                else
                {
                    str = str + ":0";
                }
            }
        } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-20T09:59:25.950

删除此行

```
chk = chk + i; 
```

因为当你这样做时，你`chk`就像`chk1`第一次迭代一样，然后你通过`Controls`数组访问控件，如下所示：

```
CheckBox chkBox = (CheckBox)tab_patients.Controls[chk + i]; 
```

你实际上是在这样做：

```
CheckBox chkBox = (CheckBox)tab_patients.Controls[chk11]; 
```

幸运的是，你有`chk11`，所以它可能适用于第一次迭代。

现在看看下一次迭代会发生什么，

`chk`对于当前具有 value的下一次迭代，`chk1`将是`chk+i`ie `chk12` ，并且您再次在 .Controls 中附加一个 i，因此`chk`value 变为`chk122`

```
CheckBox chkBox = (CheckBox)tab_patients.Controls[chk122]; 
```

这没什么，因此不起作用。等等

您不应该修改该`chk`值。只需在 中使用它`Controls`，但不要为其分配值。

同样在 VB 中，您正在这样做：

```
If chkBox.Checked = True Then
                If Start = 0 Then
                    StrAdd = StrAdd + "1"
                    Start = 1
                Else
                    StrAdd = StrAdd + ":1"
                End If 
```

在 C# 中你正在这样做：

```
 if (chkBox.Checked == true)
            {
                if (start == 1)
                {
                    str = str + "1";
                    start = 0;
                }
                else
                {
                    str = str + ":1";
                }
            } 
```

两种逻辑略有不同。您在 Vb 中比较 0，如果为真，则附加 1，但在 C# 中，您在比较 1，如果为真，则附加 1

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-20T10:41:02.553

这是一种不好的编程习惯。为什么不将所有复选框放在面板中，然后循环通过面板的控件（在本例中为复选框）？

```
Dim str as string=""
:For i as integer =0 to 36
:Select case panel1.controls(i).checked
:Case true
:Str=str & "1:"
:Case false
:Str=str & "0:" 
:End select
:Next i
:Str=microsoft.visualbasic.right(str,str.length-1)'remove the colon at last 
```

'这样你就可以避免许多不需要的变量，比如 start 和 chk 'constant 和 if 语句。将上面的代码转换为 c# 不会有任何困难。

# c++ - 具有相反关联性顺序的 C++ 重载运算符

> ID：16118934
> 
> 赞同：7
> 
> 时间：2013-04-20T09:52:05.187
> 
> 标签：c++, operator-overloading, associativity

很难想出一个标题......（我不是以英语为母语的人。）

```
struct A
{
    int value;
    A operator+(int i) const
    {
        A a;
        a.value=value+i;
        return a;
    };
};
int main(){
    A a;
    a.value=2;
    a=a+2;
    return 0;
} 
```

此代码按预期编译/工作，但是当我将 a=a+2 更改为 a=2+a 时，它将不再编译。GCC 给了我这个错误：

```
no match for ”operator+” in ”2 + a” 
```

有没有办法让 2+a 像 a+2 一样工作？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-20T09:55:43.700

你需要一个自由函数，在类*之后定义*

```
struct A
{
   // ...
};

A operator+(int i, const A& a)
{
  return a+i; // assuming commutativity
}; 
```

此外，您可以考虑`A& operator+=(int i);`在`A`实现中定义两个版本的`operator+`自由函数。您可能还对 Boost.Operators 或其他简化帮助程序感兴趣`A`，请参阅我的个人资料以获取两个选项。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-20T09:56:19.653

当然，在类外定义逆运算符：

```
struct A
{
    int value;
    A operator+(int i) const
    {
        A a;
        a.value=value+i;
        return a;
    };
};
//marked inline to prevent a multiple definition
inline A operator+(int i, const A& a)
{
    return a + i;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-11-28T00:35:09.800

这里的其他答案工作正常。但是，您还有另一个选择是为这样的单曲创建一个构造函数`int`：

```
struct A
{
    int value;
    A(int i) {
        value = i;
    }
}; 
```

这允许整数被隐式转换，并允许您只为您的运算符重载`struct`：

```
A operator+(const A& other) const
{
    // All you need to do is work with an A, and associativity works fine
}; 
```

当然，这确实允许所有整数隐式转换为`A`s，这可能是可取的，也可能不是可取的。

# sql-server-2008 - 如何避免约束 SQL Server 2008

> ID：16118936
> 
> 赞同：1
> 
> 时间：2013-04-20T09:52:20.507
> 
> 标签：sql-server-2008

我有个问题。我有 2 个表，有 1 个外键。

表 A 和表 B

```
CREATE TABLE A
kdtrans int (5) primary key

INSERT INTO A Values
(1),(2),(3) 
```

然后我想插入表 B

```
CREATE TABLE B
kdtrans int (5) primary key,
FOREIGN KEY kdtrans REFERENCES A(kdtrans)

INSERT INTO B Values
(1),(2),(3),(4),(5) 
```

这些查询是约束的错误原因。所以我应该怎么做才能避免约束。我不会在表 A 中插入新记录。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T10:02:15.600

可以通过禁用约束来做到这一点，但你也可以放弃它，因为它应该保证的东西不再是真的。

要禁用约束，您可以使用

```
CREATE TABLE A
  (
     kdtrans INT PRIMARY KEY
  )

INSERT INTO A
VALUES      (1),
            (2),
            (3)

CREATE TABLE B
  (
     kdtrans INT PRIMARY KEY CONSTRAINT FK FOREIGN KEY REFERENCES A(kdtrans)
  )

ALTER TABLE B
  NOCHECK CONSTRAINT FK

INSERT INTO B
VALUES      (1),
            (2),
            (3),
            (4),
            (5) 
```

要放弃它，你会使用

```
ALTER TABLE B DROP CONSTRAINT FK 
```

# python - django，如何在输入框中显示带有空格的数据？

> ID：16118942
> 
> 赞同：0
> 
> 时间：2013-04-20T09:53:04.010
> 
> 标签：python, html, django

我通过作为“Catho Fransis”的输入框从用户那里获取名字，并将其保存到我的 mysql 数据库中的单个字段中。

当我试图在另一个页面的另一个文本框中显示此名称时，仅显示“Catho”。空格后面的单词被忽略。

```
<td>
     <input disabled type="text" name="fname" style="width:235px;" value={{ user.first_name }}  > 
</td> 
```

**如何显示名称？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T10:22:41.267

尝试在周围加上引号`{{ user.first_name }}`

```
<td><input disabled type="text" name="fname" style="width:235px;" value="{{ user.first_name }}"> </td> 
```

更多信息：[见这里](https://stackoverflow.com/questions/6495310/do-you-quote-html5-attributes)

# java - 多项目Maven Java环境下共享测试代码

> ID：16118943
> 
> 赞同：2
> 
> 时间：2013-04-20T09:53:04.357
> 
> 标签：java, maven, junit

我有一个 Maven 多项目设置，其中包含一个父 POM、一个库类型的 jar 和几个使用此库的应用程序 jar。现在我想在应用程序的单元测试中利用这个库类型 jar 的测试工具（尤其是 API 模拟功能），以避免在所有应用程序中重复相同的单元测试代码，我现在正在这样做。然而，这似乎不是微不足道的。

你们中的任何人都这样做过，或者有任何其他解决方案可以解决这个问题吗？

[编辑] 澄清：

如果我有应用程序 A、B 和库 L，以及这样的依赖项：

```
A -> L <- B 
```

我希望上面的测试代码有相应的依赖关系：

```
A' -> L' <- B' 
```

所以应用程序的测试代码可以看到库的测试代码。

# c# - C# 从项目 B 中获取项目 A 的表单名称

> ID：16118946
> 
> 赞同：0
> 
> 时间：2013-04-20T09:53:17.203
> 
> 标签：c#, winforms, forms

我在一个解决方案中有两个项目，`project A`并且`project B`( `using VS2010 Ultimate and C# windows application`)。 `Project B`充当`project A`. 在`project B`我有一个包含一个`chekcedlistbox`控件的表单，该控件将列出所有`project A`表单名称和文本（此表单将让系统管理员根据用户的安全组授予用户允许查看/编辑的表单）这是我的代码：

```
 private void GetFormNames()
    {
        foreach (Assembly a in AppDomain.CurrentDomain.GetAssemblies())
        {
            foreach (Type t in a.GetTypes())
            {
                if (t.BaseType == typeof(Form))
                {
                    var emptyCtor = t.GetConstructor(Type.EmptyTypes);
                    if (emptyCtor != null)
                    {
                        var f = (Form)emptyCtor.Invoke(new object[] { });
                        string FormText = f.Text;
                        string FormName = f.Name;
                        checkedListBox1.Items.Add("" + FormText + "//" + FormName + "");
                    }
                }
            }

        }

    } 
```

我得到的结果是我当前项目 (B) 和空行 (//) 和`Select Window//MdiWindowDialog`,的表单名称`PrintPreview`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T11:32:51.150

```
Assembly[] assemblies = AppDomain.CurrentDomain.GetAssemblies(); 
foreach (Assembly a in assemblies) 
{ 
    Type[] types = a.GetTypes(); 
    foreach (Type t in types) 
    { 
        if (t.BaseType == typeof(Form)) 
        { 
                  //Do Your works
        } 
    } 
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-20T12:37:21.793

我将假设您已`ProjectA`正确引用并且您感兴趣的所有表单实际上都有一个无`public`参数构造函数。该问题可能是由于`ProjectA`尚未加载引起的，您可以通过多种方式解决此问题。可能最直接的方法是使用[`static Assembly.Load`](http://msdn.microsoft.com/en-us/library/ky3942xh.aspx)（只要文件在同一目录中，否则会变得更复杂）。

```
try
{
    Assembly projectA = Assembly.Load("ProjectA"); // replace with actual ProjectA name 
    // despite all Microsoft's dire warnings about loading from a simple name,
    // you should be fine here as long as you don't have multiple versions of ProjectA
    // floating around

    foreach (Type t in projectA.GetTypes())
    {
        if (t.BaseType == typeof(Form))
        {
            var emptyCtor = t.GetConstructor(Type.EmptyTypes);
            if (emptyCtor != null)
            {
                var f = (Form)emptyCtor.Invoke(new object[] { });
                // t.FullName will help distinguish the unwanted entries and
                // possibly later ignore them
                string formItem = t.FullName + " // " + f.Text + " // " + f.Name;
                checkedListBox1.Items.Add(formItem);
            }
        }
    }
}
catch(Exception err)
{
    // log exception
} 
```

另一个（可能是更清洁的解决方案）是让您感兴趣的所有表单都从单个基本表单继承。然后，您可以从已知的程序集加载程序集，并在将其添加到列表之前`Type`检查每个枚举的继承自它。`Type`然而，这是一个更广泛的变化，并且涉及`ProjectA`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-20T11:50:07.280

试试这个代码：

```
 private void GetFormNames()
    {

        Type[] AllTypesInProjects = Assembly.GetExecutingAssembly().GetTypes();
            for (int i = 0; i < AllTypesInProjects.Length; i++)
            {
                if (AllTypesInProjects[i].BaseType == typeof(Form))
                {            /* Convert Type to Object */
                    Form f = (Form)Activator.CreateInstance(AllTypesInProjects[i]);
                    string FormText = f.Text; 
                    listBox1.Items.Add(FormText);
                }
            }

    } 
```

# git - 如何在 Gerrit 中创建新的补丁集？

> ID：16118947
> 
> 赞同：14
> 
> 时间：2013-04-20T09:53:18.677
> 
> 标签：git, gerrit, git-commit, git-amend

我是 Gerrit 的新手，想在提交新更改时创建一个新补丁。我使用本指南设置 Gerrit [https://review.typo3.org/Documentation/install-quick.html](https://review.typo3.org/Documentation/install-quick.html)

然后我尝试使用[http://gerrit.googlecode.com/svn/documentation/2.0/user-changeid.html](http://gerrit.googlecode.com/svn/documentation/2.0/user-changeid.html)创建一个新补丁，并`Change-Id`在提交消息的底部添加一行。

但我得到的是新的变更而不是新的补丁集。谁能帮我？

谢谢

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2013-04-26T06:06:37.390

**第 1 步**：为 gerrit 安装 commit-msg 挂钩

```
scp -p -P 29418 <gerrit_url>:hooks/commit-msg .git/hooks/ 
```

**第 2 步**：创建正常提交和推送（对于 Patchset1）

例如：

```
git add Server.java
git commit -m "server added"
git push origin HEAD:refs/for/master 
```

**第 3 步**：对 Server.java 进行一些更改后

最后创建新的补丁集（Patchset 2）

```
git add Server.java
git commit --amend
git push origin HEAD:refs/for/master 
```

重复步骤 3 以获取更多补丁

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-20T21:59:32.700

不要自己添加*Change-Id*。[按照此处](http://gerrit.googlecode.com/svn/documentation/2.0/user-changeid.html#creation)所述安装 commit-msg 挂钩。这将自动为您创建*Change-Id*。

如果您想通过上传新的补丁集来改进补丁，请使用并`git-commit --amend`保留*Change* *-Id*行。

您可以在此处查看工作流程的描述：[http ://wiki.typo3.org/Contribution_Walkthrough_with_CommandLine](http://wiki.typo3.org/Contribution_Walkthrough_with_CommandLine)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-25T12:50:45.407

即使您手动添加更改 ID，它也应该是您提交消息的最后一段。
语法应该是：

```
change ID : [change ID ] 
```

# mysql - 同一个表中的一个查询中的两个 SELECT

> ID：16118949
> 
> 赞同：3
> 
> 时间：2013-04-20T09:53:34.153
> 
> 标签：mysql, select

我有一张桌子：

```
id | parent_id | name
1  | NULL      | audi
2  | 1         | a5
3  | 1         | a6
4  | NULL      | opel
5  | 4         | astra
6  | 4         | vectra 
```

我想获取记录的名称和记录父级的名称。

一个示例是获取 id=5 的名称及其父名称。

```
id | name  | parent_name
5  | astra | opel 
```

对此的 SQL 查询是什么？

我的查询：

```
SELECT name, parent_id FROM `cats` WHERE `id` = 5 OR `id` = 
cats.parent_id LIMIT 0 , 30 
```

没用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T09:57:48.043

这项工作是如果您一次只有 1 个父母（无递归）：

```
SELECT a.name name, b.name parent_name
FROM tablexyz a,tablexyz b where
a.id=5 AND a.parent_id=b.id; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-20T10:01:02.723

您可以使用以下查询：

```
SELECT T1.id, T1.name, T2.name as parentname
FROM TABLE1 T1
    INNER JOIN TABLE1 T2 ON T1.id = T2.parent_id
WHERE T2.ID = 5 
```

[SQL 小提琴](http://www.sqlfiddle.com/#!3/0dae8/6)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-20T10:08:04.447

这对我来说很好。请检查一下。

```
select a.id,a.name,b.name as parent from cats a,cats b where b.id=a.parent_id; 
```

您也可以添加任何其他条件。（确保使用正确的表标识符；`a`或`b`）

# asp.net-mvc - AJAX POST 到 MVC 控制器显示 302 错误

> ID：16118956
> 
> 赞同：6
> 
> 时间：2013-04-20T09:54:12.413
> 
> 标签：asp.net-mvc, jquery, asp.net-mvc-4, asp.net-ajax

我想在我的 MVC 视图中做 AJAX POST。我写了以下内容：

**视图中的脚本代码**

```
$('#media-search').click(function () {
    var data = { key: $('#search-query').val() };

    $.ajax({
        type: 'POST',
        url: '/Builder/Search',
        data: JSON.stringify(data),
        dataType: 'json',
        contentType: 'application/json; charset=utf-8',
        success: function (data) {
            $('.builder').empty();
                alert("Key Passed Successfully!!!");
        }
    });
}); 
```

**控制器代码**

```
[HttpPost]
public ActionResult Search(string key)
{
    return RedirectToAction("Simple", new { key=key });
} 
```

但是在 AJAX POST 上我得到了**302 found Error**

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-20T10:08:09.480

“302”响应代码是重定向。您的控制器操作显式返回 a `RedirectToAction`，它仅返回 302。由于此重定向指令由您的 AJAX 调用使用，而不是由您的浏览器直接使用，因此如果您希望浏览器被重定向，您需要执行以下操作：

```
$.ajax({
     type: 'POST',
     url: '/Builder/Search',
     data: JSON.stringify(data),
     dataType: 'json',
     contentType: 'application/json; charset=utf-8',
     success: function (data) {
          if (data.redirect) {
              window.location.href = data.redirect;
          }
          $('.builder').empty();
          alert("Key Passed Successfully!!!");
     }
}); 
```

如果没有，您需要从控制器返回比重定向指令更有意义的内容。

# function - 从函数列表中清除重复项

> ID：16118958
> 
> 赞同：3
> 
> 时间：2013-04-20T09:54:28.813
> 
> 标签：function, haskell, duplicates

是否可以从 Haskell 中的函数列表中删除重复项（如在 nub 中）？基本上，是否可以为 (Eq (Integer -> Integer)) 添加一个实例

在 ghci 中：

```
let fs = [(+2), (*2), (^2)]
let cs = concat $ map subsequences $ permutations fs
nub cs

<interactive>:31:1:
No instance for (Eq (Integer -> Integer))
  arising from a use of `nub'
Possible fix:
  add an instance declaration for (Eq (Integer -> Integer))
In the expression: nub cs
In an equation for `it': it = nub cs 
```

提前致谢。

...

此外，根据 larsmans 的回答，我现在可以做到这一点

```
> let fs = [AddTwo, Double, Square]
> let css = nub $ concat $ map subsequences $ permutations fs 
```

为了得到这个

```
> css

[[],[AddTwo],[Double],[AddTwo,Double],[Square],[AddTwo,Square],[Double,Square],[AddTwo,Double,Square],[Double,AddTwo],[Double,AddTwo,Square],[Square,Double],[Square,AddTwo],[Square,Double,AddTwo],[Double,Square,AddTwo],[Square,AddTwo,Double],[AddTwo,Square,Double]] 
```

然后这个

```
> map (\cs-> call <$> cs <*> [3,4]) css

[[],[5,6],[6,8],[5,6,6,8],[9,16],[5,6,9,16],[6,8,9,16],[5,6,6,8,9,16],[6,8,5,6],[6,8,5,6,9,16],[9,16,6,8],[9,16,5,6],[9,16,6,8,5,6],[6,8,9,16,5,6],[9,16,5,6,6,8],[5,6,9,16,6,8]] 
```

，这是我的初衷。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-20T09:57:56.023

不，这是不可能的。不能比较函数是否相等。

这样做的原因是：

1.  指针比较对 Haskell 函数意义不大，因为之后 和 的相等性`id`会`\x -> id x`根据后一种形式是否优化为`id`.
2.  函数的扩展比较是不可能的，因为它需要对停止问题的积极解决方案（两个函数具有相同的停止行为是相等的必要条件）。

解决方法是将函数表示为数据：

```
data Function = AddTwo | Double | Square deriving Eq

call AddTwo  =  (+2)
call Double  =  (*2)
call Square  =  (^2) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-20T10:11:11.380

不，不可能对`Integer -> Integer`函数执行此操作。

***但是***，如果您也可以使用更通用的类型签名*，*`Num a => a -> a`如您的示例所示！一种天真的方式（不安全），会像

```
{-# LANGUAGE FlexibleInstances           #-}
{-# LANGUAGE NoMonomorphismRestriction   #-}

data NumResLog a = NRL { runNumRes :: a, runNumResLog :: String }
             deriving (Eq, Show)

instance (Num a) => Num (NumResLog a) where
  fromInteger n = NRL (fromInteger n) (show n)
  NRL a alog + NRL b blog
            = NRL (a+b) ( "("++alog++ ")+(" ++blog++")" )
  NRL a alog * NRL b blog
            = NRL (a*b) ( "("++alog++ ")*(" ++blog++")" )
  ...

instance (Num a) => Eq (NumResLog a -> NumResLog a) where
  f == g  = runNumResLog (f arg) == runNumResLog (g arg)
     where arg = NRL 0 "THE ARGUMENT"

unlogNumFn :: (NumResLog a -> NumResLog c) -> (a->c)
unlogNumFn f = runNumRes . f . (`NRL`"") 
```

它基本上通过比较函数源代码的“规范化”版本来工作。当然，当您比较 eg 时`(+1) == (1+)`，这会失败，它们在数字上是等效的，但 yield `"(THE ARGUMENT)+(1)"`vs.`"(1)+(THE ARGUMENT)"`因此被指示为不相等。但是，由于函数`Num a => a->a`本质上被限制为多项式（是的，`abs`这`signum`让它变得更加困难，但它仍然可行），您可以找到一种能够正确处理这些等价的数据类型。

这些东西可以这样使用：

```
> let fs = [(+2), (*2), (^2)]
> let cs = concat $ map subsequences $ permutations fs
> let ncs = map (map unlogNumFn) $ nub cs
> map (map ($ 1)) ncs
[[],[3],[2],[3,2],[1],[3,1],[2,1],[3,2,1],[2,3],[2,3,1],[1,2],[1,3],[1,2,3],[2,1,3],[1,3,2],[3,1,2]] 
```

# python - multiprocessing.pool 上下文和负载平衡

> ID：16118960
> 
> 赞同：1
> 
> 时间：2013-04-20T09:54:34.330
> 
> 标签：python, multiprocessing, load-balancing

我遇到了 python 多处理池类的一些意外行为。

以下是我的问题：
1) Pool 何时创建其上下文，稍后用于序列化？
*只要在 Container 定义之后创建 Pool 对象，下面的示例就可以正常运行。如果交换池初始化，则会发生序列化错误。在我的生产代码中，我想在定义容器类之前初始化 Pool 方式。是否可以刷新池“上下文”或以其他方式实现此目的。*
2) Pool 是否有自己的负载平衡机制，如果有，它是如何工作的？
*如果我在具有 8 个进程池的 i7 机器上运行类似的示例，我会得到以下结果：
- 对于轻量级评估函数，Pool 倾向于仅使用一个进程进行计算。它根据要求创建了 8 个进程，但大多数时候只使用一个（我从内部打印了 pid，并且在 htop 中也看到了这个）。
- 对于繁重的评估函数，行为符合预期。它平等地使用所有 8 个进程。*
3) 使用 Pool 时，我总是看到我请求的另外 4 个进程（即对于 Pool(processes=2)，我看到 6 个新进程）。他们的作用是什么？

我将 Linux 与 Python 2.7.2 一起使用

```
from multiprocessing import Pool
from datetime import datetime

POWER = 10

def eval_power(container):
    for power in xrange(2, POWER):
        container.val **= power
    return container

#processes = Pool(processes=2)

class Container(object):
    def __init__(self, value):
        self.val = value

processes = Pool(processes=2)

if __name__ == "__main__":
    cont = [Container(foo) for foo in xrange(20)]
    then = datetime.now()
    processes.map(eval_power, cont)
    now = datetime.now()
    print "Eval time:", now - then 
```

**编辑 - 对 BAKURIU**
1) 我担心是这样的。
2）我不明白linux调度程序与python将计算分配给进程有什么关系。我的情况可以用下面的例子来说明：

```
from multiprocessing import Pool
from os import getpid
from collections import Counter

def light_func(ind):
    return getpid()

def heavy_func(ind):
    for foo in xrange(1000000):
        ind += foo
    return getpid()

if __name__ == "__main__":
    list_ = range(100)
    pool = Pool(4)
    l_func = pool.map(light_func, list_)
    h_func = pool.map(heavy_func, list_)

    print "light func:", Counter(l_func)
    print "heavy func:", Counter(h_func) 
```

在我的 i5 机器（4 个线程）上，我得到以下结果：
*light func: Counter({2967: 100})
Heavy func: Counter({2969: 28, 2967: 28, 2968: 23, 2970: 21})*
看来情况正如我所描述的那样。但是我仍然不明白为什么python会这样做。我的猜测是它试图最小化通信费用，但它用于负载平衡的机制仍然未知。文档也不是很有帮助，多处理模块的文档记录很差。
3）如果我运行上面的代码，我会得到 4 个以上的进程，如前所述。画面来自htop：http: [//i.stack.imgur.com/PldmM.png](http://i.stack.imgur.com/PldmM.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-20T10:36:56.637

1.  该`Pool`对象在调用期间创建子流程，`__init__`因此您**必须**在之前定义`Container`。顺便说一句，我不会将所有代码包含在一个文件中，而是使用一个模块来实现`Container`和其他实用程序，并编写一个启动主程序的小文件。

2.  `Pool`完全符合[文档](http://docs.python.org/2/library/multiprocessing.html#module-multiprocessing.pool)中的描述。特别是它无法控制进程的调度，因此您看到的是 Linux 的调度程序认为它是正确的。对于小型计算，它们花费的时间很短，以至于调度程序不会费心将它们并行化（由于核心亲和力等原因，这可能具有更好的性能）

3.  您能否通过示例以及您在任务管理器中看到的内容来展示这一点？我认为它们可能是处理内部队列的进程`Pool`，但我不确定。在我的机器上，我只能看到主进程和两个子进程。

* * *

更新第 2 点：

该`Pool`对象只是将任务放入队列中，子进程从该队列中获取参数。如果一个进程几乎不需要时间来执行一个对象，那么 Linux 调度程序会让进程执行更多时间（因此从队列中消耗更多的项目）。如果执行需要很长时间，则此调度程序将更改进程，因此也会执行其他子进程。

在您的情况下，一个进程正在消耗所有项目，因为计算花费的时间非常短，以至于在其他子进程准备好之前它已经完成了所有项目。

正如我所说，`Pool`在平衡子流程的工作方面没有做任何事情。它只是一个队列和一堆工人，池将项目放入队列中，进程获取项目并计算结果。AFAIK 控制队列的唯一方法是将一定数量的任务放在队列中的单个项目中（请参阅[文档](http://docs.python.org/2/library/multiprocessing.html#multiprocessing.pool.multiprocessing.Pool.map)），但不能保证哪个进程将获取哪个任务。其他一切都留给操作系统。

在我的机器上，结果没有那么极端。对于轻型计算，两个进程的调用数量大约是其他两个的两倍，而对于重型计算，它们的处理项目数量或多或少相同。可能在不同的操作系统和/或硬件上，我们会得到甚至不同的结果。

# ruby-on-rails - 无法通过本地网络访问 sinatra 应用程序

> ID：16118971
> 
> 赞同：11
> 
> 时间：2013-04-20T09:55:54.210
> 
> 标签：ruby-on-rails, sinatra, local-network

我有rails应用程序。如果我从`rails s`（端口 3000）开始，它可以通过 ip 地址（在我的情况下为 192.168.0.3）在我的机器和本地网络上的每个设备上完美运行。
我有 sinatra 应用程序。如果我使用`ruby app.rb`（端口 4567）启动它，它可以在我的机器上完美运行，但它无法从本地网络上的其他设备访问。

![在此处输入图像描述](https://i.stack.imgur.com/4FlwH.png)

两个应用程序都使用 Thin 作为应用服务器。

这与 sinatra 的工作方式有关吗？

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2013-04-20T11:09:09.767

尝试`ruby app.rb -o 0.0.0.0`或`ruby app.rb -e production`。要么应该工作。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-10-07T03:07:50.017

让我在伊万的回答中添加一些进一步的信息。Sinatra 在命令行上的[README](http://www.sinatrarb.com/intro.html#Command%20Line)说：

```
Sinatra applications can be run directly:

ruby myapp.rb [-h] [-x] [-e ENVIRONMENT] [-p PORT] [-o HOST] [-s
HANDLER] 

Options are:

-h # help
-p # set the port (default is 4567)
-o # set the host (default is 0.0.0.0)
-e # set the environment (default is development)
-s # specify rack server/handler (default is thin)
-x # turn on the mutex lock (default is off) 
```

根据文档，默认主机是 0.0.0.0，但我仍然必须像 Ivan 所说的那样指定“-o 0.0.0.0”。否则无法从服务器机器外部访问服务器。多奇怪！

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2013-12-08T14:09:26.247

只是想补充一下伊万的回答和罗伯特的澄清。

默认情况下，您的 sinatra 以开发模式运行，而不是生产模式。在开发模式下，sinatra 绑定的默认主机是'localhost'，这意味着只有本地机器可以与之交互。

一旦你指定了“-e production”，你的 sinatra webapp 就会在生产模式下运行，它绑定的默认主机是 0.0.0.0，这意味着它可以与所有其他主机交互。

或者，如果您想继续开发，请指定“-o 0.0.0.0”

# jquery - 异步加载车把模板

> ID：16118974
> 
> 赞同：7
> 
> 时间：2013-04-20T09:56:15.600
> 
> 标签：jquery, handlebars.js, promise

我正在尝试编写一个函数，该函数将为我提供一个已编译的车把模板（我的所有模板都在单独的文件中），使用 ajax 调用来获取模板并编译它以供使用，但我需要使用一个承诺，所以我可以实际使用它。

```
function getTemplate(name){
    $.get('/'+name+'.hbs').success(function(src){
       var template = Handlebars.compile(src);
       //can't return the template here.
    });
} 
```

我如何通过承诺来做到这一点，以便我可以做类似的事情：

```
$("a").click(function(e){
    getTemplate('form').done(function(template){
       $("body").append(template({
               name: "My Name"
           })
       );
    });
}); 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-04-21T14:20:31.153

Chovy，我看到你已经接受了一个答案，但你可能有兴趣知道`getTemplate`，通过链接`.then()`而不是`.success()`，几乎可以像问题中那样写：

```
function getTemplate(name) {
    return $.get('/'+name+'.hbs').then(function(src) {
       return Handlebars.compile(src);
    });
} 
```

或者，采用 charlietfl 的思想传入数据并返回一个完全组合片段的 Promise ：

```
function getTemplate(name, data) {
    return $.get('/'+name+'.hbs').then(function(src) {
       return Handlebars.compile(src)(data);
    });
} 
```

nett 效果与 charlietfl 的版本相同，`getTemplate`但`.then()`无需显式创建 Deferred。因此代码更加紧凑。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-20T10:53:09.383

以下向`getTemplate`函数添加数据参数以及模板名称。

```
$(function(){
  var postData={title: "My New Post", content: "This is my first post!"};
 getTemplate('template-1',postData).done(function(data){
   $('body').append(data)
 })
});

function getTemplate( name,data){
  var d=$.Deferred();

  $.get(name+'.html',function(response){

    var template = Handlebars.compile(response);
    d.resolve(template(data))
  });

  return d.promise();

} 
```

`**[DEMO](http://plnkr.co/edit/KaGbknpFwljYodTMZ7mz?p=preview)**`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-08-10T14:13:54.833

我创建了一个库来帮助解决此类问题，请查看[github](https://github.com/juanjardim/ember-template-factory)

您只需将其添加到您的主应用程序视图中：

```
<script type="text/x-handlebars" data-template-name="application">
    <!-- Your HTML code -->
    <div class="container">
        <div class="modal fade" id="editView" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
            <div class="modal-dialog">
                <div class="modal-content">
                    {{view MainApp.ModalContainerView elementId="modalContainerView"}}
                </div><!-- /.modal-content -->
            </div><!-- /.modal-dialog -->
        </div><!-- modal edit dialog -->
        {{view MainApp.AppContainerView elementId="appContainerView"}}
        {{outlet}}
    </div> <!-- main container -->
</script> 
```

把它放到你的 MainApp

```
var MainApp = Em.Application.create({
    LOG_TRANSITIONS: true,
    ready: function () {
    /** your code **/
    MainApp.AppContainerView = Em.ContainerView.extend({});
    MainApp.ModalContainerView = Em.ContainerView.extend({});
    /** And other containerView if you need for sections in tabs **/
    }); 
```

例如，他们要使用您想要的模板打开一个模式，您只需：

```
FactoryController.loadModalTemplate(templateName, callback); 
```

并且不要忘记添加 FactoryController 和 RepositoryController

# c# - LINQ to custom objects with List member CHV1 CDD1 CHV2 CDD2 CHV3 CDD3 CHV4 C 问问题 问问题 2013-04-20T09:56:16.557 3201 次 This question shows research effort; it is useful and clear 0 This question does not show any research effort; it is unclear or not useful Bookmark this question. Show activity on this post. CHV1 CDD1 CHV2 CDD2 CHV3 CDD3 CHV4 CDD4 SortCol SearchColCount ---- -------------------------------------------------- ---- -------------------------------------------------- ---- -------------------------------------------------- ----------- ------------------------------------------------------------------------------------------------------------------------------ ------------------------------------------------------------------------------------------------------------------------------ -------------- Adventure Cafe Columbus Back Of The House Cook 624 Adams, Donald, 4180259, A A, Adams, Donald, 4180259 0 Adventure Cafe Columbus Back Of The House Cook 643 Conard, Virgil, 4180469, A A, Conard, Virgil, 4180469 0 Adventure Cafe Columbus Back Of The House Cook 629 Pheiffer, Seth, 4180373, A A, Pheiffer, Seth, 4180373 0 Adventure Cafe Columbus Back Of The House Cook 645 Sees, Patrick, 4180474, A A, Sees, Patrick, 4180474 0 Adventure Cafe Columbus Back Of The House Cook 657 Walter, Derek, 4180508, A A, Walter, Derek, 4180508 0 The above is the dataset from the DB. I am trying to use LINQ to take a dataset and create a custom object type, based on the above data structure, but one of the members of that object is a List data type. I originally found the following article, but it wasn't working exactly, since it was a simple string List object type: Convert Datatable to Object with Linq and Group by This is giving me the following error: Cannot implicitly convert type 'System.Collections.Generic.IEnumerable' to 'System.Collections.Generic.List'. An explicit conversion exists (are you missing a cast?) I have listed my adaptation to the code from the above referenced article. Ideally, I would like to be able to dynamically create multiple "folderItem" Lists based on CDD2, CDD3, CDD4, etc... The number of CDD columns would be variable, which further complicated things. This data will ultimately be return from a WCF service as JSON. dnFolders = from row in dnDataTable.AsEnumerable() group row by new { id = row.Field<string>(1), value = row.Field<string>(2) } into folder select new folder { id = folder.Key.id, value = folder.Key.value folderItem = section.Select(r=>r.Field<String>(3)).ToList() }; folder class definition: public class folder { [DataMember(Name = "id", Order = 1)] public string id { get; set; } [DataMember(Name = "value", Order = 2)] public string value { get; set; } [DataMember(Name = "type", Order = 3)] public string type { get; set; } [DataMember(Name = "sortCol", Order = 4)] public string sortCol { get; set; } [DataMember(Name = "folderItems", Order = 5)] public List<folderItem> folderItems { get; set; } } folderItem class definition public class folderItem { [DataMember(Name = "value", Order = 1)] public string value { get; set; } [DataMember(Name = "id", Order = 2)] public string id { get; set; } [DataMember(Name = "type", Order = 2)] public string type { get; set; } } Determine that the languages accepted by two NFA's are same or not I have two NFA's. I need to determine whether both recognize the same language I would be much obliged if anyone could be so kind enough to explain how to do this. c#jsonlinq 4 2 回答 2 This answer is useful 1 也许来自lazyberezovsky的回答的一些调整 我相信您的错误来自您的 dnFolders 变量是 List 吗？在这种情况下，您必须 .ToList() 整个查询 dnFolders = (from row in dnDataTable.AsEnumerable() group row by new { id = row.Field<string>(1), value = row.Field<string>(2) } into g select new folder { id = g.Key.id, value = g.Key.value folderItems = g.Select(r => r.Field<FolderItems>(5) }) .ToList() }).ToList(); 于 2013-04-20T10:19:22.417 回答 This answer is useful 0 您的查询中有几个问题： 没有section定义变量 类中没有folderItem属性folder 您应该folderItem从每个组中选择对象列表，但您选择的是字符串列表 这是您的查询应该是什么样子（我不知道应该去folderItem对象，所以type只用属性初始化它）： dnFolders = from row in dnDataTable.AsEnumerable() group row by new { id = row.Field<string>(1), value = row.Field<string>(2) } into g select new folder { id = g.Key.id, value = g.Key.value folderItems = g.Select(r => new folderItem { type = r.Field<string>(3) }) .ToList() }; 于 2013-04-20T10:02:04.857 回答 Related 2 java - wso2 ESB Aggregator - AggregateMediator 错误评估表达式 2 angularjs - 我怎样才能只在 ng-views 上使用 ng-animate 而不是 ng-repeats？ 2 ios - FBGraph api 不想访问好友列表 2 javascript - 缺点和替代方案 - JS 方法链接 2 bash - AWK：根据第二列“名称总计”添加列值的脚本 2 javascript - 将新 div 滑到另一个 div 下方 2 php - 重置ajax表单提交，以便可以再次发送新信息 1 linux - 交换分区中的读取错误如何影响正在运行的进程？ 2 sql - SQL查询两个表之间的差异 1 php - 如何在 CodeIgniter 的“core”文件夹中加载自定义配置文件 Reference php × 1429865 c/c++ × 756500 nginx × 49975 mongodb × 159057 mybatis × 3233 anaconda × 13410 pycharm × 14671 python × 1902243 vscode × 56040 docker × 110988 github × 49000 flask × 49129 ffmpeg × 24037 jmeter × 16910 matplotlib × 63493 bootstrap × 54641

> ID：16118975
> 
> 赞同：0
> 
> 时间：
> 
> 标签：c#, json, linq

```
CHV1 CDD1                                               CHV2 CDD2                                               CHV3 CDD3                                               CHV4        CDD4                                                                                                                           SortCol                                                                                                                        SearchColCount
---- -------------------------------------------------- ---- -------------------------------------------------- ---- -------------------------------------------------- ----------- ------------------------------------------------------------------------------------------------------------------------------ ------------------------------------------------------------------------------------------------------------------------------ --------------

 Adventure Cafe Columbus                                 Back Of The House                                       Cook                                               624         Adams, Donald, 4180259, A                                                                                                      A, Adams, Donald, 4180259                                                                                                      0
 Adventure Cafe Columbus                                 Back Of The House                                       Cook                                               643         Conard, Virgil, 4180469, A                                                                                                     A, Conard, Virgil, 4180469                                                                                                     0
 Adventure Cafe Columbus                                 Back Of The House                                       Cook                                               629         Pheiffer, Seth, 4180373, A                                                                                                     A, Pheiffer, Seth, 4180373                                                                                                     0
 Adventure Cafe Columbus                                 Back Of The House                                       Cook                                               645         Sees, Patrick, 4180474, A                                                                                                      A, Sees, Patrick, 4180474                                                                                                      0
 Adventure Cafe Columbus                                 Back Of The House                                       Cook                                               657         Walter, Derek, 4180508, A                                                                                                      A, Walter, Derek, 4180508                                                                                                      0 
```

The above is the dataset from the DB.

I am trying to use LINQ to take a dataset and create a custom object type, based on the above data structure, but one of the members of that object is a List data type.

I originally found the following article, but it wasn't working exactly, since it was a simple string List object type: [Convert Datatable to Object with Linq and Group by](https://stackoverflow.com/questions/13130094/convert-datatable-to-object-with-linq-and-group-by) This is giving me the following error:

> Cannot implicitly convert type 'System.Collections.Generic.IEnumerable' to 'System.Collections.Generic.List'. An explicit conversion exists (are you missing a cast?)

I have listed my adaptation to the code from the above referenced article. Ideally, I would like to be able to dynamically create multiple "folderItem" Lists based on CDD2, CDD3, CDD4, etc... The number of CDD columns would be variable, which further complicated things.

This data will ultimately be return from a WCF service as JSON.

```
dnFolders = from row in dnDataTable.AsEnumerable()
    group row by new
    {
        id = row.Field<string>(1),
        value = row.Field<string>(2)

    } into folder
    select new folder
    {
        id = folder.Key.id,
        value = folder.Key.value
        folderItem = section.Select(r=>r.Field<String>(3)).ToList()
    }; 
```

folder class definition:

```
public class folder
{
    [DataMember(Name = "id", Order = 1)]
    public string id { get; set; }

    [DataMember(Name = "value", Order = 2)]
    public string value { get; set; }

    [DataMember(Name = "type", Order = 3)]
    public string type { get; set; }

    [DataMember(Name = "sortCol", Order = 4)]
    public string sortCol { get; set; }

    [DataMember(Name = "folderItems", Order = 5)]
    public List<folderItem> folderItems { get; set; }
} 
```

folderItem class definition

```
public class folderItem
{
    [DataMember(Name = "value", Order = 1)]
    public string value { get; set; }

    [DataMember(Name = "id", Order = 2)]
    public string id { get; set; }

    [DataMember(Name = "type", Order = 2)]
    public string type { get; set; }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T10:19:22.417

也许来自lazyberezovsky的回答的一些调整

我相信您的错误来自您的 dnFolders 变量是 List 吗？在这种情况下，您必须 .ToList() 整个查询

```
dnFolders = 
    (from row in dnDataTable.AsEnumerable()
    group row by new
    {
        id = row.Field<string>(1),
        value = row.Field<string>(2)
    } into g
    select new folder
    {
        id = g.Key.id,
        value = g.Key.value
        folderItems = g.Select(r => r.Field<FolderItems>(5) })
                       .ToList()
    }).ToList(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-20T10:02:04.857

您的查询中有几个问题：

*   没有`section`定义变量
*   类中没有`folderItem`属性`folder`
*   您应该`folderItem`从每个组中选择对象列表，但您选择的是字符串列表

这是您的查询应该是什么样子（我不知道应该去`folderItem`对象，所以`type`只用属性初始化它）：

```
dnFolders = 
    from row in dnDataTable.AsEnumerable()
    group row by new
    {
        id = row.Field<string>(1),
        value = row.Field<string>(2)
    } into g
    select new folder
    {
        id = g.Key.id,
        value = g.Key.value
        folderItems = g.Select(r => new folderItem { type = r.Field<string>(3) })
                       .ToList()
    }; 
```

# nfa - 确定两个 NFA 接受的语言是否相同

> ID：16118976
> 
> 赞同：0
> 
> 时间：2013-04-20T09:56:16.563
> 
> 标签：nfa

我有两个**NFA**的。我需要确定两者是否都能识别相同的语言，如果有人能如此友好地解释如何做到这一点，我将非常感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-26T19:31:32.413

You can get a canonical representation of an NFA by computing its equivalent **minimal** DFA. If two NFA's have the same canonical representation, they accept the same language.

# ruby-on-rails - How to parse text file in Ruby on Rails

> ID：16118977
> 
> 赞同：-1
> 
> 时间：2013-04-20T09:56:17.093
> 
> 标签：ruby-on-rails, ruby

Below is the text file:

```
Old count: 56
S id: 1
M id: 1 
New count: 2
Old count: 56
S id: 1
M id: 2
New count: 20
Old count: 56
S id: 1
M id: 2
New count: 32
-----------------------------
Old count: 2
S id: 2
M id: 1
New count: 4
--------------------------------
.
.
.
. 
```

I have used delimiter "---------------" for each ids.

How to parse the value such that the lines with in the delimiter "-----" that is new count is added like this: `2+20+32 = 54`

Hash array: `count << {'new count' => 54}` for first block and so on for remaining blocks.

I have tried like this..

```
begin
f=File.open("out2", "r")
f.each_line do |line|
@data+=line
end

s_rec=@data.split("------")
s_rec.each do |rec|
row_s=rec.split(/\n/)

row_s.each do |row|

  if r.include?"New count"
    rv=row.split(":")
    @db=rv[1]
  end

  end
  end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T10:10:57.293

不确定您要实现的输出格式，但给出了文本：

```
text = <<__
Old count: 56
S id: 1
M id: 1 
New count: 2
Old count: 56
S id: 1
M id: 2
New count: 20
Old count: 56
S id: 1
M id: 2
New count: 32
-----------------------------
Old count: 2
S id: 2
M id: 1
New count: 4
--------------------------------
.
.
.
.
__ 
```

这个：

```
text
.split(/^-{5,}/)
.map{|s| s.scan(/\bNew count: (\d+)/).map{|match| match.first.to_i}.inject(:+)} 
```

给出：

```
[
  54,
  4,
  nil
] 
```

* * *

在回复评论时，仍然不清楚您想要什么，因为您编写的不是有效的 Ruby 对象，但是：

```
text
.scan(/^S id: (\d+).+?^New count: (\d+)/m)
.inject(Hash.new(0)){|h, (k, v)| h[k.to_i] += v.to_i; h}
.map{|k, v| {"S id" => k, "new count" => v}} 
```

给出：

```
[
  {
    "S id"      => 1,
    "new count" => 54
  },
  {
    "S id"      => 2,
    "new count" => 4
  }
] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-20T15:28:48.613

我会开始：

```
data = 'Old count: 56
S id: 1
M id: 1 
New count: 2
Old count: 56
S id: 1
M id: 2
New count: 20
Old count: 56
S id: 1
M id: 2
New count: 32
-----------------------------
Old count: 2
S id: 2
M id: 1
New count: 4
--------------------------------
'

ary = data.split("\n").slice_before(/^---/).map{ |a| a.select{ |s| s['New count:'] }.map{ |s| s[/\d+/].to_i }.inject(:+) }.compact 
```

这给了我一个数组：

```
[
    [0] 54,
    [1] 4,
] 
```

`compact`之所以需要，是因为有一个尾随块分隔符，它在发挥它的魔力`----`时会导致一个空数组。`slice_before`

从那时起，很容易创建一个哈希数组：

```
Hash[ ary.map.with_index(1) { |v, i| ["S #{ i }", "new count #{ v }" ] } ] 
```

看起来像：

```
{
    "S 1" => "新计数 54",
    "S 2" => "新计数 4"
}

```

分解它，代码通过`slice_before`返回：

```
[
    [0] [
        [0]“--------------------------------”，
        [1]“旧计数：56”，
        [2]“S id：1”，
        [3]“中号：1”，
        [4]“新计数：2”，
        [5]“旧计数：56”，
        [6]“S id：1”，
        [ 7]“中号：2”，
        [8]“新计数：20”，
        [9]“旧计数：56”，
        [10]“S id：1”，
        [11]“中号：2”，
        [12]“新计数：32”
    ],
    [1] [
        [0] "-----------------",
        [1]“旧计数：2”，
        [2] "S id: 2",
        [3]“中号：1”，
        [4]“新计数：4”
    ]
]

```

从那里很简单，选择每个子数组中需要的行，提取值，然后使用`inject`.

完成后，它只需使用`map`并`with_index`构建字符串和名称/值对，然后`Hash`将它们转换为哈希。

# java - Sending parameter input type hidden value to another jsf page

> ID：16118979
> 
> 赞同：0
> 
> 时间：2013-04-20T09:56:21.430
> 
> 标签：java, jsf

```
 <h:commandLink  action="http://192.168.2.66:8084/TekirMobile2/customerListDetailed.xhtml" value="#{item.code}" >
                                <h:inputHidden value="#{item.address}" />
                                 <h:inputHidden value="#{item.name}" />

                            </h:commandLink> 
```

I have above code. This code in customerList.xhtml and after user click to the commandLink button i want to send input hidden value to customerListDetailed.xhtml. How can i do that?

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-04-20T10:32:24.820

为此，您可以在 commandLink 标记之后编写隐藏标记。请注意，您应该将上述代码添加到 h:form 标记中

例子：

```
 <h:form>
             <h:commandLink 
    action="http://192.168.2.66:8084/TekirMobile2/customerListDetailed.xhtml" 
            value="#{item.code}" >     
            </h:commandLink>
            <h:inputHidden value="#{item.name}" name="name" id="name" />
  <h:inputHidden value="#{item.address}" name="address" id="address" />
        </h:form> 
```

支持豆

```
@ManagedBean(name="item")
public class Item implements Serializable{
    private String code;
    private String address;
    private String name;
    public Item(){
        String name= FacesContext.getCurrentInstance().
    getExternalContext().getRequestParameterMap().get("name");
        String address= FacesContext.getCurrentInstance().
    getExternalContext().getRequestParameterMap().get("address");
    }
   //getters and setters

} 
```

# android-intent - intent.ACTION_VIEW together with intent.setComponent()

> ID：16118980
> 
> 赞同：1
> 
> 时间：2013-04-20T09:56:25.267
> 
> 标签：android-intent

Android: Is there a way to send intent.ACTION_VIEW together with intent.setComponent(), so that there in no choose of apps, but to launch a special app (not my own) on phone **with** ACTION_VIEW? Something like this (but does not work):

```
String url = "http://something";
Intent in = new Intent(Intent.ACTION_VIEW); 
in.setData(Uri.parse(url));
in.setComponent(new ComponentName(packageName, name));
startActivity(in); 
```

Of cause this works:

```
String url = "http://something";
Intent in = new Intent(Intent.ACTION_VIEW); 
in.setData(Uri.parse(url));
startActivity(in); 
```

and this too:

```
Intent in = new Intent("android.intent.action.MAIN");
in.addCategory("android.intent.category.LAUNCHER");
in.setComponent(new ComponentName(packageName, name));
startActivity(in); 
```

# .htaccess - .htaccess 在我的 PHP MVC 框架中不起作用

> ID：16118987
> 
> 赞同：2
> 
> 时间：2013-04-20T09:57:21.393
> 
> 标签：.htaccess, url-rewriting

我正在 ubuntu 上从头开始构建自己的 PHP MVC 框架。`.htaccess`文件在其中无法正常工作。文件夹结构和`.htaccess`文件内容如下。

## 文件夹结构

```
/MyMVCProject
/controllers
     index.php
     help.php
/libs
/modles
/views
.htaccess
index.php 
```

## `.htaccess`文件内容

```
RewriteEngine On
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-l
RewriteRule ^(.*)$ index.php?url=$1 [QSA,L] 
```

当我输入`localh0st/MyMVCProject/help`它给我以下错误。

> 未找到
> 在此服务器上未找到请求的 URL /MyMVCProject/help。
> Apache/2.2.22 (Ubuntu) 服务器在 localh0st 端口 80

而且我确定我已经启用了 mod_rewrite。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T10:16:01.100

尝试遵循 RewriteRule （从 Zend 框架复制和修改）

```
RewriteEngine On
RewriteCond %{REQUEST_FILENAME} -s [OR]
RewriteCond %{REQUEST_FILENAME} -l [OR]
RewriteCond %{REQUEST_FILENAME} -d
RewriteRule ^.*$ - [NC,L]
RewriteRule ^(.*)$ index.php?url=$1 [QSA,NC,L] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-20T10:02:36.347

尝试以这种方式执行此操作，`$_REQUEST`您可以从数组中获取 url 参数并在 index.php 文件中处理它。

也出于测试目的添加

```
echo <pre>;
print_r($_REQUEST);
echo </pre>; 
```

在第一行`index.php`

```
<ifModule mod_rewrite.c>
    RewriteEngine On

    RewriteCond %{REQUEST_URI} ^/$ [NC]
    RewriteRule ^(.*)$ /$1 [R=301,L]
</ifModule> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-04-20T10:56:02.753

我遇到了同样的事情，在我的情况下，当我`help.php`在同一目录中有一个文件时会产生错误。不知道为什么会发生这种情况......

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-04-26T06:44:21.707

您需要添加：

```
RewriteBase /MyMVCProject 
```

到您的 .htaccess 文件。

# android - 适用于 Android 的 Google 地球插件

> ID：16118988
> 
> 赞同：0
> 
> 时间：2013-04-20T09:57:25.603
> 
> 标签：android, api, google-maps, plugins

我正在尝试在我的 PhoneGap / Android 应用程序上添加月球地图。

当我尝试在应用程序上使用 Google 地球 API 时，我收到以下错误：

```
The Google Earth Plugin is currently only available on Windows and Mac OS X 10.6+. 
```

是否有另一种方法，甚至可能是另一种 API，在移动设备上创建*月球地图。*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-20T10:00:17.950

There are not any current published API's for Google Earth Android version. The current version does handle search intents. You can launch Google Earth in Android and fly to a location with the following intent: Please keep in mind Google could change this at any time and the following code might not work.

```
// the new intent we will launch 
Intent myIntent = new Intent(); 

// send the intent directly to the google earth activity that can 
handle search 
myIntent.setClassName("com.google.earth", 
"com.google.earth.EarthActivity"); 

// we are doing a search query 
myIntent.setAction(Intent.ACTION_SEARCH); 

// change this address to any address you want to fly to 
myIntent.putExtra(SearchManager.QUERY, "2900 Frenchmen Street, New 
Orleans, LA"); 

// always trap for ActivityNotFound in case Google earth is not on the 
device 
try { 
    // launch google earth and fly to location 
    this.startActivity(myScanIntent); 
} 
catch (ActivityNotFoundException e) { 
    showGoogleEarthDialog(); 
} 

... 

// if the user does not have google earth prompt to download it 
private void showGoogleEarthDialog() { 

        AlertDialog.Builder downloadDialog = new AlertDialog.Builder(this); 
        downloadDialog.setTitle("Install Google Earth?"); 
        downloadDialog.setMessage("This application requires Google Earth. 
Would you like to install it?"); 
        downloadDialog.setPositiveButton("Yes", new 
DialogInterface.OnClickListener() { 
            public void onClick(DialogInterface dialogInterface, int i) { 
                Uri uri = Uri.parse("market://search? 
q=pname:com.google.earth"); 
                Intent intent = new Intent(Intent.ACTION_VIEW, uri); 
                MainActivity.this.startActivity(intent); 
            } 
        }); 
        downloadDialog.setNegativeButton("No", new 
DialogInterface.OnClickListener() { 
              public void onClick(DialogInterface dialogInterface, int i) {} 
        }); 
        downloadDialog.show(); 

} 
```

# xna - 制作游戏面板

> ID：16118991
> 
> 赞同：0
> 
> 时间：2013-04-20T09:57:31.050
> 
> 标签：xna, xna-4.0, viewport

1）我目前正在制作 2d 坦克游戏。我需要制作面板，在那里我可以绘制有关坦克等的信息。最好的方法是什么？我需要制作 2 个视口（1 个用于游戏，1 个用于面板）还是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T14:00:03.317

您可以制作一个固定区域来显示您的 gui/hud 中的信息。或者，您可以在将鼠标悬停在文本上时弹出文本。因此，找到鼠标所在的位置，如果它悬停在精灵上，则开始在光标位置绘制文本。

# image - 在matlab中将数组转换为灰度

> ID：16118992
> 
> 赞同：0
> 
> 时间：2013-04-20T09:57:36.443
> 
> 标签：image, matlab, plot, grayscale

我正在尝试以灰度绘制一组数据。但是，我得到的图像似乎总是蓝色的。

我有一组数据，`albedo`范围从`[0, 0.068]`，即`1X1 double`.

我的代码是：

```
 for all px,py
    albedoMax = 0.0679; albedoMin = 0;
    out_im(px,py) = 1/(albedoMax-albedoMin)*(albedo - albedoMin);
    imshow(out_im);
    drawnow;
 end 
```

基本上`px,py`是我必须迭代的图像坐标，并且公式试图将输入范围映射`[0, 0.068]`到`[0 1]`. 但是，通过运行此代码，我注意到输出始终是蓝色的。我想知道出了什么问题。

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T10:01:51.640

你不能使用 rgb2gray 函数吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-20T12:35:04.390

您正在制作的是 RGB 图像的一层。如果您正在创建具有恒定颜色的均匀蓝色图像，则归一化是错误的。但是，如果只是蓝色而不是灰色的问题，那么只需使用以下方法进行转换：

```
ImGray = rgb2gray(Im); 
```

不要忘记像网格/网格一样分布像素，以填充所有图像而不仅仅是其中的一部分。

# java - 活动及其生命周期

> ID：16118993
> 
> 赞同：1
> 
> 时间：2013-04-20T09:57:44.363
> 
> 标签：java, android, android-activity, lifecycle

考虑一下：

*   活动一
*   活动 B

*   活动 C

单击启动器图标时会启动活动 A。活动 B 由活动 A 启动 - 没什么特别的。但是 Activity C 应该只由应用程序本身启动（而不是点击或类似的东西），比如广播。

问题：

当 Activity C 由应用程序自动启动时，当我在此 Activity 上按下 HOME 按钮时，当我点击启动器图标（以显示 Main Activity - A ）时，它会显示我的活动 C。如果我在此活动上按下 BACK 按钮，然后我可以毫无问题地进行活动A。

如何解决这个问题？在按下 HOME 按钮时杀死活动 C，还是有其他方法可以做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-20T10:03:23.863

在您的活动 A put`android:launchMode="singleTask" android:clearTaskOnLaunch="true"`和其余活动 put 的清单中`android:clearTaskOnLaunch="false"`，这将解决您的问题。希望这会帮助你。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-20T10:26:54.387

只需添加`android:noHistory="true"`到`<activity>`AndroidManifest.xml 中的 Activity C 元素即可。

设置[android:noHistory](http://developer.android.com/guide/topics/manifest/activity-element.html#nohist)`true`将使活动不留下历史痕迹。它不会保留在任务的活动堆栈中，因此用户将无法返回它。

# transbase - TransBase，选择包含给定列的所有表

> ID：16118994
> 
> 赞同：2
> 
> 时间：2013-04-20T09:57:45.553
> 
> 标签：transbase

我需要查询语句来列出数据库中包含 TransBase 中给定列名的所有表。

非常感谢您提前。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-20T10:38:33.240

select * from syscolumn col inner join systable tbl on tbl.segno=col.tsegno where col.cname like '%col_name%';

那很快！对于将来可能需要这个的每个人。