# StackOverflow 问答 14028000-14028999

# php - 类似于 CTRL + F 功能的搜索框

> ID：14028003
> 
> 赞同：0
> 
> 时间：2012-12-25T05:37:48.830
> 
> 标签：php, javascript, html

我想创建一个类似于`Ctrl`+的搜索框`F`，但只能找到某些东西。

当您在“跳至：”框中输入内容时，您将只能在下面的列表中找到名称。我试图搜索它，但我找不到这样做的方法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-25T05:49:27.223

您可以使用 jquery 自动完成插件 [http://jqueryui.com/autocomplete/](http://jqueryui.com/autocomplete/)

使用 javascript 数组作为数据源。您可以通过选择具有名称属性的链接文本来动态构建数组，例如`$("a[name]")`

当一个建议的选项被点击/选择时，你可以使用 select 事件来改变`document.location.hash`选项值，这样浏览器就会导航到锚点 [http://api.jqueryui.com/autocomplete/#event-select](http://api.jqueryui.com/autocomplete/#event-select)

# windows-phone-7 - 如何在 wp7 市场中保留 wp7 应用程序名称？

> ID：14028004
> 
> 赞同：0
> 
> 时间：2012-12-25T05:37:55.977
> 
> 标签：windows-phone-7, marketplace

是否可以在应用程序进入应用商店或市场之前“注册”一个 windows phone7 应用程序名称？

例如，我想在我的应用程序完成之前注册名称，这样其他人就不会想出相同的名称。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-25T09:46:01.390

不，你不能。无论如何，Windows Phone 市场上都允许重复名称，因此保留名称没有意义。

# asp.net-mvc-3 - 以编程方式更改数据库表 EntityFramework 模型对象 指

> ID：14028005
> 
> 赞同：0
> 
> 时间：2012-12-25T05:37:58.383
> 
> 标签：asp.net-mvc-3, entity-framework

问题在标题中。我们能否以编程方式更改 Model 类中的对象（如下图所示）所引用的数据库表并继续对新表进行操作？

```
public class Word
{
    public int ID { get; set; }
    public string Text { get; set; }
} 
```

这最初是指 EntityFramework 中的“Words”表，有没有办法在运行之前/期间更改它？如果是这样，怎么做？

**编辑：**

我通过他们的 ID 从数据库表“Words”中获取项目中视图中使用的所有字符串。现在，我想要的是，用户向系统输入一种新语言，然后将创建一个新表，例如 WordsEnglish。从那时起，如果用户选择英语作为语言，Word 对象将引用 WordEnglish。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-25T08:58:42.110

最好有一个用例来更好地理解你想要完成的事情，但是这里有......

在[DbContext.OnModelCreating](http://msdn.microsoft.com/en-us/library/system.data.entity.dbcontext.onmodelcreating%28v=vs.103%29.aspx)方法中，您可以配置模型，例如

```
// Removes pluralization convention for all tables.
modelBuilder.Conventions.Remove<PluralizingTableNameConvention>(); 
```

或者

```
// Specific table name for Word Entity.
modelBuilder.Entity<Word>().ToTable("TableContainingWords"); 
```

如果您要更改模型，则可能需要[Code First 迁移。](http://msdn.microsoft.com/en-us/data/jj591621.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-26T03:48:46.237

我还没有找到一种在运行时真正动态扩展 EF 模型的方法。考虑到数据库上下文继承类中发生的情况，使用生成的视图来提高性能和模型类方法，避免重新编译似乎很困难。我已经使用程序集发现方法生成代码、编译和访问它。但从我的角度来看，这一切都不能令人满意，所以我已经停止研究这条路了。非常笨拙的结果。

具有讽刺意味的是，您作为此类问题的用例提供的主题在我看来是不需要动态 EF 的主题。

我有完全相同的用例，特定于语言的消息/标签等查找，即特定于语言的文本池。

为什么不将语言添加到类/表中。为支持的语言使用表或枚举。在文本池表中使用语言

使用不同的模型类进行演示。（查看模型）。所以你可以像 .

```
public class Word
{
     Guid ID {get;set;}                   // logical key is WordID + Language
     public int WordID { get; set; }      // implement with new id or 2 field key
     public Language Language {get;set;}    // see cultureInfo for more details 
     public bool IsMaster {get;set;}
     public string Text { get; set; }    // consider renaming due to reserved word implications
}

public class language
{
 int ID,
 String Lang
}

} 
```

# c# - 如何隐藏 DataGridView 中的任何或所有列标题？

> ID：14028009
> 
> 赞同：4
> 
> 时间：2012-12-25T05:38:19.500
> 
> 标签：c#, winforms, datagridview, header, hide

我目前正在使用 C# 开发 Windows 应用程序。我有这个datagridview，它的第一个图像列是编辑和删除。我有一个隐藏他们的标题的问题。我怎样才能做到这一点，但保持以下列的标题可见？

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-25T05:41:39.720

在使用 C# 时，您可以编写以下内容

```
this.dataGridView1.Columns["CustomerID"].Visible = false; 
```

并隐藏您可以使用的所有列标题：

```
dataGridView1.ColumnHeadersVisible = false; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-05-11T09:41:53.337

选择 datagridview 并打开属性，在属性列表中，您可以将其设置为 false，如屏幕截图中所述。

[![截屏](../Images/b53ce4a0808e4221f74839572ef7b7c3.png)](https://i.stack.imgur.com/3U4HS.png)

在您的 filename.cs 文件中，您可以添加类似这样的内容..

```
dataGridView1.ColumnHeadersVisible = false; 
```

在您的 filename.Designer.cs 文件中，您将拥有..

```
this.dataGridView1.ColumnHeadersVisible = false; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-06-15T16:36:33.263

对于 C# Winforms，

```
dataGridView1.ColumnHeadersVisible = false; 
```

对于 asp.net（寻找网络解决方案的读者）

```
dataGridView1.ShowHeader = false; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2021-05-16T09:22:25.683

隐藏所有列标题

```
dataGridView.ColumnHeadersVisible = false; 
```

隐藏特定的列标题

```
dataGridView.Columns[4].Name = "Delete"; //Add name you want
dataGridView.Columns[4].HeaderText = ""; 
```

我添加了一个列名，然后将列标题文本设为空。但是如果它不可见，我可以使用列名。这对我有用。

# javascript - Lessc 比例或替代品

> ID：14028012
> 
> 赞同：0
> 
> 时间：2012-12-25T05:38:30.103
> 
> 标签：javascript, less, handlebars.js, mustache

我正在寻找在不破坏服务器的情况下从不太动态地生成 css 文件的正确方法。

小部件的用户选择他们的配色方案并将小部件添加到他们的站点。小部件加载然后下载首选项（配色方案等），我正在寻找如何从首选项生成 css 的方法。

为每个用户生成 css 会增加加载时间，我想在客户端完成所有工作。

包含 less.js 会增加页面时间的负担，我想避免它。我愿意使用小胡子或把手来动态生成 css，但有某些元素，如变暗、变亮等，我不确定如何使用 javascript 生成。

以这种方式生成css的正确方法是什么？以正确的方式为每个用户生成 css。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-25T05:45:03.510

当您生成用户页面时，请在`link`元素中使用生成的文件名（例如，包括用户设置的哈希）。然后在提供该 CSS 时，在服务器端编译它，并将缓存标头放在它上面。这样，只要设置不变，文件名不变，浏览器就会使用缓存的版本。当设置更改时，文件名更改，并且不再缓存，从而触发服务器上的重新编译。

# macos - Applescript 更改山狮通知中心背景的应用程序

> ID：14028014
> 
> 赞同：0
> 
> 时间：2012-12-25T05:39:24.453
> 
> 标签：macos, applescript, notificationcenter

我想创建一个应用程序来更改通知中心的背景，因此对其进行了编写。有人请告诉我我的代码有什么问题。

```
set NCBGPath to "/System/Library/CoreServices/Notification Center/Contents/Resources/"
set NCBackground to "linen.tiff"
set themeFolder to (choose folder with prompt "Choose a Theme") as text
set themePath to themeFolder & NCBackground
set posixNCPath to NCBGPath & NCBackground

set shouldCopy to false
tell application "Finder"
    if exists file themePath then set shouldCopy to true
end tell

if shouldCopy then
    do shell script "cp " & quoted form of POSIX path of themePath & space & quoted form of posixNCPath with administrator privileges
    -- you probably should correct the file permissions too as the copied file probably won't have the proper owner and stuff
else
    display dialog "Could not find the background file in the chosen folder."
end if 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-25T19:46:30.957

可能是这样的：“如果 cp 检测到尝试将文件复制到自身，则复制将失败。”

如果将最后一个 if 语句更改为：

```
if shouldCopy then
    do shell script "cp " & quoted form of POSIX path of themePath & space & quoted form of NCBGPath with administrator privileges
    -- you probably should correct the file permissions too as the copied file probably won't have the proper owner and stuff
else
    display dialog "Could not find the background file in the chosen folder."
end if 
```

# python - Web2Py 最小用户身份验证（仅用户名）

> ID：14028015
> 
> 赞同：1
> 
> 时间：2012-12-25T05:40:05.930
> 
> 标签：python, database, authentication, web2py

我在网上没有找到任何东西，所以我在这里问。

有没有办法创建只需要用户名的自定义身份验证？这意味着登录到一个特定的子页面只需要输入用户名，没有电子邮件和密码等？

还是有更好的方法来做到这一点？例如，只有当用户名（或类似用户名）存在于数据库表中时才能访问子页面？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T17:28:41.797

是的，你可以这样做：

（在模型文件中，或者在控制器的顶部，或者更好地制作一个函数装饰器）

检查`session.logged_in_user`它是否为无，如果为无，则重定向到 /default/login，在其中向用户提供表单：

```
form = FORM(Field('username'), requires=IS_IN_DB(db, db.users.username)) 
```

在提交表单时（请参阅 web2py 表单处理手册），如果有效（例如，如果用户名存在于 db.users 表中），设置`session.logged_in_user = request.vars.username`

这是一个完整的示例（未经测试）：

**模型/Auth.py**

```
# Could also check whether session.logged_in_user exists in DB, but probably not needed
# If so though, should be renamed zAuth or something to come after db.py file
if not session or not session.logged_in_user:
  redirect(URL('default','login', vars={'next':request.vars.url})) 
```

**控制器/default.py**

```
#in file: controllers/default.py
...
def login():
   form = FORM(Field('username', requires=IS_IN_DB(db, db.users.username))

   if form.process().accepted:
     session.logged_in_user = form.vars.username
     redirect(request.vars.next)
   elif form.errors:
     session.logged_in_user = None # not necessary, but oh well
     response.flash = "Please enter a valid username"

   return dict(form=form) 
```

**意见/默认/login.html**

```
{{ extend 'layout.html' }}
{{ =form }} 
```

通过将代码放在模型文件中，您可以确保在每个页面请求上都执行它。

这将不允许您使用 web2py 的身份验证机制（即`auth = AUTH()`），但我不确定您是否想要它，除非您对使用组和权限等感兴趣。但如果是这种情况，请添加密码（即使它是通用密码或空白密码）似乎不会太麻烦。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-07T19:42:05.233

web2py 默认允许空白密码。因此，只需使用 CSS 隐藏登录和注册表单中的密码字段即可。您应该能够使用默认身份验证。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-01-20T15:01:56.263

如果您只想使用您唯一的用户名和密码登录，请转到 db.py 并编写以下代码：

```
auth.define_tables(username=True,signature=True)
db.auth_user.username.requires = IS_NOT_IN_DB(db, 'auth_user.username')
db.auth_user.email.readable = False
db.auth_user.email.writable = False
db.auth_user.first_name.readable = False
db.auth_user.first_name.writable = False
db.auth_user.last_name.readable = False
db.auth_user.last_name.writable = False 
```

对我来说它有效

# ruby-on-rails - 进入 2013 年，我应该选择 Dragonfly、Paperclip 还是 Carrierwave？

> ID：14028017
> 
> 赞同：14
> 
> 时间：2012-12-25T05:40:24.240
> 
> 标签：ruby-on-rails, ruby-on-rails-3, paperclip, carrierwave, dragonfly-gem

我只是另一个希望加入社交网络潮流的普通人。我想知道我应该为我的应用程序的用户使用哪个照片上传/调整大小的 gem。如果您能解释原因，那就太好了。

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2012-12-25T08:03:47.770

**[Carrierwave](https://github.com/jnicklas/carrierwave/)**对 DataMapper、Mongoid、Sequel 等外部事物有很好的支持，甚至可以与 cloudinary 等第 3 方图像管理[一起](http://cloudinary.com/documentation/rails_integration)使用 该解决方案似乎最完整，支持几乎所有内容，但解决方案也更加混乱（对我来说至少）因为您需要处理更多代码。它由其丰富的社区创建的大量附加组件积极维护，以支持许多功能。它还具有来自其他附件解决方案（例如回形针）的迁移说明。它有大约 3-4 个活跃的贡献者/维护者

**[Paperclip](https://github.com/thoughtbot/paperclip)**来自thoughtbot，因此它应该是一个精心策划、功能齐全、易于处理的附加文件解决方案。它利用了许多内置功能，使在 Rail 环境中的体验不那么紧张。Paperclip 更适合使用 activerecord 的有机 Rails 环境，而不是所有其他替代方案。Paperclip 对于刚开始的 Rails 开发人员来说更容易处理，并且它还为高级开发人员提供了高级功能。它有大约 2-3 个活跃的维护者。查看 github 图表，似乎过去几个月对于回形针而言并不是非常多产，对代码的提交相对较少。希望这种变化可以与carrierwave相提并论（通常更多的维护者意味着更多的代码）

**[Dragonfly](https://github.com/markevans/dragonfly)**是一种基于机架的附件解决方案。它对 Rails 以外的其他框架有很多支持，它有几个用于外部服务支持的插件，但是从它的 github 页面可以看出，仍然缺少很多东西。这可能是因为它有 1 个活跃的维护者，并且自 2012 年 4 月以来没有提交。如果它没有得到真正的提升，我认为它的寿命不会更长。尤其是即将推出的 Rail 4。

最后，每个解决方案都有其优点和缺点，并且每个解决方案都最适合每个开发人员。

请参阅以下列表，了解人们对每个问题的看法，并确定他们提出的问题是否与您有关：

[Rails 3回形针vscarrierwave vs蜻蜓vs attachment_fu](https://stackoverflow.com/questions/7419731/rails-3-paperclip-vs-carrierwave-vs-dragonfly-vs-attachment-fu?rq=1)

[https://stackoverflow.com/questions/1614842/what-is-the-best-file-upload-attachment-plugin-rails?rq=1](https://stackoverflow.com/questions/1614842/what-is-the-best-file-upload-attachment-plugin-rails?rq=1)

[Rails3 的 Attachment_fu 或 Paperclip](https://stackoverflow.com/questions/4445244/attachment-fu-or-paperclip-for-rails3?rq=1)

[载波或蜻蜓](https://stackoverflow.com/questions/3755662/carrierwave-or-dragonfly?rq=1)

要回答您的问题 -**载波和回形针都可以上传和调整图像大小。**

至于您在评论中提出的问题，我使用回形针，但由于carrierwave 有能力从回形针迁移到它，如果它不再适合我的需要，我可能会切换。目前确实如此。

最好的选择方法是选择一个，尝试一下，然后自己决定。

# c# - 为什么查询字符串参数被包含两次 - asp.net boolean

> ID：14028020
> 
> 赞同：4
> 
> 时间：2012-12-25T05:40:42.513
> 
> 标签：c#, asp.net-mvc, viewmodel, strongly-typed-view

我的索引页面包含以下代码：

```
 <div class="editor-field">
        @Html.CheckBoxFor(model => model.IncludeArchive)
        @Html.ValidationMessageFor(model => model.IncludeArchive)
    </div> 
```

我的模型是：

```
public class SearchModel
{
    public string FirstName { get; set; }
    public string LastName { get; set; }
    public string TestNumber { get; set; }
    public bool IncludeArchive { get; set; } 
}

    [Authorize]
    public ActionResult Index(SearchModel search)
    {
        var test= db.Test.AsQueryable();

        if (Request.QueryString.Count > 0) {
            if (!search.IncludeArchive) test = test.Where(x => x.Status == "Active");
        } else {
            test= test.Where(x => x.Status == "Active");
        }

        ViewBag.testList = test.ToList(); 
```

当浏览到页面然后选择 IncludeArchive 复选框以将其启用为 true 时，查询字符串变为

```
http://localhost:64005/test/?FirstName=&LastName=&TestNumber=&IncludeArchive=true&IncludeArchive=false 
```

为什么它在查询字符串中包含两次变量 IncludeArchive？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-25T10:37:16.910

这就是 MVC 使用复选框的方式。如果您浏览页面的 HTML，您会注意到对于使用 HTML 帮助器呈现的每个复选框，您都有一个带有 false 值的隐藏字段。这可以确保在用户未选中您的复选框的情况下发送错误值。这就是为什么如果你选择一个复选框你有两个值，如果你不选择它只有一个值。有关更多详细信息，您还可以查看以下帖子： [asp.net mvc：为什么 Html.CheckBox 会生成额外的隐藏输入](https://stackoverflow.com/questions/2697299/asp-net-mvc-why-is-html-checkbox-generating-an-additional-hidden-input) [为什么 CheckBoxFor 会呈现额外的输入标签，以及如何使用 FormCollection 获取值？](https://stackoverflow.com/questions/2860940/asp-net-mvcwhy-does-the-checkboxfor-render-an-additional-input-tag-and-how-can)

希望能帮助到你。

# python - 在 Python 中查找括号的正则表达式

> ID：14028023
> 
> 赞同：3
> 
> 时间：2012-12-25T05:41:21.433
> 
> 标签：python, regex

我正在尝试查找大写字母后跟括号的所有匹配项，即 A)、B)、C) 等。我通过重试 (http://re-try.appspot.com/) 对其进行了测试完美运行，但是当我在我的程序中实现它时，它给了我一条错误消息： sre_constants.error: unbalanced parenthesis

```
parens = re.findall(r'[A-Z]\)', test_file) 
```

似乎它忽略了转义字符，但这是为什么呢？任何帮助或替代方法将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-25T05:50:03.153

这有效：

```
>>> st='first A) you have B) and then C)'
>>> re.findall(r'[A-Z]\)',st)
['A)', 'B)', 'C)'] 
```

或者：

```
>>> re.findall('[A-Z]\\)',st)
['A)', 'B)', 'C)'] 
```

实际上是`test_file`字符串吗？你所拥有的应该工作（在 Python shell 中尝试），所以我怀疑是你的第二个参数`re.findall`...

如果，正如你的命名所暗示的，它是一个文件对象，你需要这样做：

```
with open('file.txt','r') as f:
    for line in f:
        line_matches=re.findall(pattern,line)
        ... do something with a list of matches from that line
        ... next line 
```

或者，对于整个文件

```
with open('file.txt', 'r') as f:
    contents=f.read()
    file_matches=re.findall(pattern,contents,flags=re.MULTILINE)
    ... do something with a list of matches from the whole file 
```

或者，该文件的编码可能是错误的......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-25T06:04:09.960

正则表达式很好，问题可能是 test_file 的编码。

检查此[Python Unicode 正则表达式](https://stackoverflow.com/questions/1168894/python-unicode-regular-expression)以查看是否有帮助。

# javascript - History API 和 History.js 后退按钮问题

> ID：14028024
> 
> 赞同：6
> 
> 时间：2012-12-25T05:41:23.713
> 
> 标签：javascript, jquery, ajax, history.js

我正在通过 Ajax 加载页面。当用户单击链接时，页面正在成功加载 AJAX，但是当用户单击后退按钮时，页面会重新加载初始页面。所以场景是这样的。

1.  加载初始页面（index.php）
2.  用户点击链接
3.  页面加载成功
4.  单击返回按钮
5.  初始页面现在显示两次。

这是标记。

```
 $(function() {
            // Prepare
            var History = window.History; // Note: We are using a capital H instead of a lower h
            if (!History.enabled) {
                // History.js is disabled for this browser.
                // This is because we can optionally choose to support HTML4 browsers or not.
                return false;
            }

            // Bind to StateChange Event
            History.Adapter.bind(window, 'statechange', function() { // Note: We are using statechange instead of popstate
                var State = History.getState();
                $('#content').load(State.url);
            });

            $('a').click(function(evt) {
                evt.preventDefault();
                History.pushState(null, $(this).text(), $(this).attr('href'));
                alert(State.url)
            });
        }); 
```

这是标记

```
 <div id="wrap">
            <a href="page1.html">Page 1</a>
        </div>

        <div id="content">
            <p>Content within this box is replaced with content from
                supporting pages using javascript and AJAX.</p>
        </div> 
```

如果您仍然没有得到我的问题或场景

这是完整的场景。初始页面

![在此处输入图像描述](../Images/4b1eafb0f9e1a42b921ae7ae59268fd7.png)

当用户单击链接时，所选页面成功加载

![在此处输入图像描述](../Images/846df76308cf2ebce1652089dd69431b.png)

当我单击后退按钮时，初始页面现在翻了一番

![在此处输入图像描述](../Images/912d7442ac1551fc4006a9bd3aa819a5.png)

如您所见，“Page1”链接翻了一番。这是浏览器的问题吗？还是我对历史 API 的理解是缺少或缺失的？对此有什么可能的解决方案？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-29T21:26:27.810

如果您构建您的站点以对主页面和内容页面使用类似的模板，您可以使用 jquery.load 的容器选择器语法：

```
// See: http://api.jquery.com/load/
$('#result').load('ajax/test.html #container'); 
```

在您的情况下会导致：

```
$('#content').load(State.url + ' #content'); 
```

这将具有额外的好处，即内容 url 页面也可以直接访问，而无需添加太多技巧。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-27T11:03:34.743

这可能会发生，因为当您向后导航时，它会触发 'statechange' 事件，并且在您的回调中，您正在使用给定的 url: 加载该页面的内容`$('#content').load(State.url);`，所以当您向后导航到`/`URL 时，它将加载内容该索引页面的内容并将其放置在您的容器中，因此您的标记实际上如下所示：

```
<div id="wrap">
        <a href="page1.html">Page 1</a>
</div>

<div id="content">
    <div id="wrap">
        <a href="page1.html">Page 1</a>
    </div>

    <div id="content">
        <p>Content within this box is replaced with content from
            supporting pages using javascript and AJAX.</p>
    </div>
</div> 
```

有几种方法可以解决这个问题 - 最简单的一种是检测用户是否导航到初始页面并且不通过 ajax 加载此页面，而是插入预定义的内容。如果请求是通过 ajax 发出的，您还可以在服务器端检测，然后仅返回更新页面所需的内容（在您的情况下可能是`<p>Content within this box is replaced with content from supporting pages using javascript and AJAX.</p>`）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-27T11:42:53.130

```
 $(function() {
            // Prepare
            var History = window.History; // Note: We are using a capital H instead of a lower h
            if (!History.enabled) {
                // History.js is disabled for this browser.
                // This is because we can optionally choose to support HTML4 browsers or not.
                return false;
            }

            // Bind to StateChange Event
            History.Adapter.bind(window, 'statechange', function() { // Note: We are using statechange instead of popstate
                var State = History.getState();
                if(State.url==document.URL){
                    $.ajax({
                          url: State.url,
                          success: function(data) {
                                        var dom_loaded=$(data);
                                        $('#content').html($('#content',dom_loaded).html());
                          }
                        });

                }else{
                    $('#content').load(State.url);
                }
            });

            $('a').click(function(evt) {
                evt.preventDefault();
                History.pushState(null, $(this).text(), $(this).attr('href'));
                alert(State.url)
            });
        }); 
```

试试这个js。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-30T21:05:45.257

我遇到了类似的问题。我只是在通过 ajax 加载之前添加了 $content.html("") 来清除容器。请参阅片段相关部分以 **//由 Joel 添加以修复内容在后退按钮上加载两次**

```
$.ajax({
            url: url,
            success: function (data, textStatus, jqXHR) {
                // Prepare
                var 
                    $data = $(documentHtml(data)),
                    $dataBody = $data.find('.document-body:first'),
                    $dataContent = $dataBody.find(contentSelector).filter(':first'),
                    $menuChildren, contentHtml, $scripts;

                // Fetch the scripts
                $scripts = $dataContent.find('.document-script');
                if ($scripts.length) {
                    $scripts.detach();
                }

                // Fetch the content
                contentHtml = $dataContent.html() || $data.html();
                if (!contentHtml) {
                    document.location.href = url;
                    return false;
                }

                // Update the menu
                $menuChildren = $menu.find(menuChildrenSelector);
                $menuChildren.filter(activeSelector).removeClass(activeClass);
                $menuChildren = $menuChildren.has('a[href^="' + relativeUrl + '"],a[href^="/' + relativeUrl + '"],a[href^="' + url + '"]');
                if ($menuChildren.length === 1) { $menuChildren.addClass(activeClass); }

                // Update the content
                $content.stop(true, true);
                //added by Joel to fix content loading twice on back button
                $content.html("");
                //end added by joel
                $content.html(contentHtml).ajaxify().css('opacity', 100).show(); /* you could fade in here if you'd like */

                // Update the title
                document.title = $data.find('.document-title:first').text();
                try {
                    document.getElementsByTagName('title')[0].innerHTML = document.title.replace('<', '&lt;').replace('>', '&gt;').replace(' & ', ' &amp; ');
                }
                catch (Exception) { }

                // Add the scripts
                $scripts.each(function () {
                    var $script = $(this), scriptText = $script.text(), scriptNode = document.createElement('script');
                    scriptNode.appendChild(document.createTextNode(scriptText));
                    contentNode.appendChild(scriptNode);
                });

                // Complete the change
                if ($body.ScrollTo || false) { $body.ScrollTo(scrollOptions); } /* http://balupton.com/projects/jquery-scrollto */
                $body.removeClass('loading');
                $window.trigger(completedEventName);

                // Inform Google Analytics of the change
                if (typeof window._gaq !== 'undefined') {
                    window._gaq.push(['_trackPageview', relativeUrl]);
                }

                // Inform ReInvigorate of a state change
                if (typeof window.reinvigorate !== 'undefined' && typeof window.reinvigorate.ajax_track !== 'undefined') {
                    reinvigorate.ajax_track(url);
                    // ^ we use the full url here as that is what reinvigorate supports
                }
            },
            error: function (jqXHR, textStatus, errorThrown) {
                document.location.href = url;
                return false;
            }
        }); // end ajax 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-03-12T06:47:13.697

我正在使用此代码，希望这会对您有所帮助。

```
 //get the contents of #container and add it to the target action page's #container
    $('#container').load(url+' #container',function(){
        $('#container').html($(this).find('#container').html());
    }); 
```

# jquery - 更新或扩展 $.ajax jQuery

> ID：14028025
> 
> 赞同：0
> 
> 时间：2012-12-25T05:41:29.867
> 
> 标签：jquery

我想更新 jQuery 的 $.ajax 方法，因此它的默认超时时间为 20 秒，超时后我想调用我自己的函数，并且我还想创建网络错误函数。

这可能吗 ？

我想这样做是因为我不想在我的所有 $.ajax 请求中添加超时。

请询问是否有任何

像这样对于每个功能都需要我添加超时。

```
$.ajax(
                        {
                            url: "getDuctions.php",
                            type: "POST",
                            data: {dept_cd: dept, filter: "payroll_struct_empl_map", primary: "empl_cd"},
                            beforeSend: function() {
                                $("#duct").html("<option value=''>Loading</option>");
                            },
                            success: function(data) {
                                $("#duct").html(data);
                            },timeout:20000,
                        }
                ); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-25T05:45:04.853

可以使用[$.ajaxSetup()声明默认选项](http://api.jquery.com/jQuery.ajaxSetup/)

更新：您还可以在 ajaxSetup 中使用默认功能

```
$.ajaxSetup({
    timeout:20000,
    error: function(jqXHR, textStatus, errorThrown){
        if( textStatus == 'timeout'){
            // Write timeout callback function here...
        }
    }
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-25T05:52:13.120

你可以这样做：

```
$.ajax({
 complete: callbackFunction, 
 url: 'some_url', 
 type: "POST",
 ......
 timeout: 20000, 
 error: errorCallback
}); 
```

或者

```
$.ajaxSetup({timeout: 20000, error: errorCallback}); 
```

错误函数在失败（例如 404 错误）或超时时被调用。

有没有这样的意思。。

# ios - 需要有关 MKMapItem 的帮助

> ID：14028033
> 
> 赞同：1
> 
> 时间：2012-12-25T05:43:45.943
> 
> 标签：ios, mkmapitem

我正在使用此代码获取当前位置想要使用此信息进行共享，例如 whatsapp。在共享位置按钮上点击我想将纬度和经度发送给其他用户。但它显示完全不同的位置

```
CLLocationManager *lm = [[CLLocationManager alloc] init];
    lm.delegate = self;
    lm.desiredAccuracy = kCLLocationAccuracyBest;
    lm.distanceFilter = kCLDistanceFilterNone;
    [lm startUpdatingLocation];

    CLLocation *location = [lm location];

    CLLocationCoordinate2D coord = [location coordinate] ;

    Class mapItemClass = [MKMapItem class];
    if (mapItemClass && [mapItemClass respondsToSelector:@selector(openMapsWithItems:launchOptions:)])
    {
        // Create an MKMapItem to pass to the Maps app
        CLLocationCoordinate2D coordinate = CLLocationCoordinate2DMake(coord.longitude, coord.latitude);
        MKPlacemark *placemark = [[MKPlacemark alloc] initWithCoordinate:coordinate addressDictionary:nil];
        MKMapItem *mapItem = [[MKMapItem alloc] initWithPlacemark:placemark];
        [mapItem setName:@"My Place"];
        // Pass the map item to the Maps app
        [mapItem openInMapsWithLaunchOptions:nil];
    } 
```

是否有可能像 whatsapp 一样显示附近的街道或地名来分享。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T06:41:27.323

您可以使用**CLLocationManagerDelegate**更新位置并将其存储在全局变量中。

将 locationManager 初始化为

```
 _locationManager = [[CLLocationManager alloc] init];
     _locationManager.delegate = _locationObjVC;
     locationManager.desiredAccuracy = kCLLocationAccuracyBest;

 [_locationManager startUpdatingLocation]; // start updating it.. 
```

// 处理德尔门

```
-(void) locationManager:(CLLocationManager *)manager didUpdateToLocation:(CLLocation *)newLocation fromLocation:(CLLocation *)oldLocation
{
 CLLocation *location = [[CLLocation alloc] initWithLatitude:_userAnnotationPoint.coordinate.latitude longitude:_userAnnotationPoint.coordinate.longitude];
    [_geocoder reverseGeocodeLocation:location completionHandler:
     ^(NSArray *placemarks, NSError *error)
     {
         NSLog(@"reverseGeocodeLocation:completionHandler: Completion Handler called!");
         if (error){
             NSLog(@"Geocode failed with error: %@", error);
             //[self displayError:error];
             _userAnnotationPoint.subtitle = [NSString stringWithFormat:@"Lati:%f Long:%f",_userAnnotationPoint.coordinate.latitude,_userAnnotationPoint.coordinate.longitude];
         }
         else
         {
             CLPlacemark *placemark = [placemarks objectAtIndex:0];

             NSLog(@"Received placemarks: %@", [NSString stringWithFormat:@"%@",[[placemark.addressDictionary valueForKey:@"FormattedAddressLines"] componentsJoinedByString:@", "]]);
             //            clickedAnnotationPoint.subtitle = [NSString stringWithFormat:@"%@ %@ %@ %@ %@ %@ %@ %@ %@",
             //            placemark.ISOcountryCode,placemark.country,placemark.postalCode,placemark.administrativeArea,          placemark.subAdministrativeArea,placemark.locality,placemark.subLocality,placemark.thoroughfare,           placemark.subThoroughfare];
             _userAnnotationPoint.subtitle = [NSString stringWithFormat:@"%@",[[placemark.addressDictionary valueForKey:@"FormattedAddressLines"] componentsJoinedByString:@", "]];
         }

     }];
    } 
```

# node.js - 如何在 node.js 中使用 express 上传

> ID：14028036
> 
> 赞同：3
> 
> 时间：2012-12-25T05:44:10.740
> 
> 标签：node.js, file-upload, express

我的代码是这样的：

```
app.configure(function () {
    app.use(express.static(__dirname + "/media"));
    app.use(express.bodyParser({
          keepExtensions: true
    }));
})

app.post('/upload', function (req, res) {
    console.log(req.files);

    res.send("well done");
    return;
}) 
```

蚂蚁做一些工作，比如：

1.Do someting on the `progoress`event，我如何将处理程序绑定到`progress`，`complete`事件，我试过了`req.files.on('progress', fn)`，但它不起作用

2 我知道如何`req.files`获取文件信息，但是如何在上传前限制上传文件的大小，或者限制上传图片的分辨率？</p>

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-25T21:17:07.930

您应该查看[多部分中间件文档](http://www.senchalabs.org/connect/multipart.html)，这是文件上传所涉及的文档。

它说限制是通过“限制”选项设置的，如果将“延迟”选项设置为 true，则可以收听进度。在这种情况下，上传使用的表单被设置为您请求的属性。然后你就可以收听[进度事件](https://github.com/felixge/node-formidable#progress)了。

所以你的代码应该是这样的（尚未测试）：

```
app.configure(function () {
    app.use(express.static(__dirname + "/media"));
    app.use(express.bodyParser({
          keepExtensions: true,
          limit: 10000000, // 10M limit
          defer: true              
    }));
})

app.post('/upload', function (req, res) {
    req.form.on('progress', function(bytesReceived, bytesExpected) {
        console.log(((bytesReceived / bytesExpected)*100) + "% uploaded");
    });
    req.form.on('end', function() {
        console.log(req.files);
        res.send("well done");
    });
}) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-25T08:31:48.907

我的项目中有一个加载文件的函数，可能会对您有所帮助：

```
var app = express.createServer(
    express.bodyParser({uploadDir: "public/files", keepExtensions: true})
  , express.cookieParser()
  , express.session({ secret: 'keyboard cat' })
);

app.post('/upload', function (req, res) {
var msg = '';
var img = '';

//console.log("type: "+req.files.image.type);
//console.log("size: "+req.files.image.size);

if(req.files.image.type != 'image/png' && req.files.image.type != 'image/jpeg' && req.files.image.type != 'image/gif')
{
    msg = 'Invalid format, accepts only: jpg, png and gif.<br/>';
}

if(req.files.image.size > 307200) // 300 * 1024
{
    msg += 'File size no accepted. Máx: 300kb.<br/>';
}

if(msg == '')
{
    if(diff > 0)
    {
        name = name.substring(name.length-diff, name.length);
    }

    var date = new Date();
    var name = req.files.image.name;
    var diff = name.length - 20;
    var rnd_number = Math.floor(Math.random()*101);
    var new_name = date.format('yyyymmdd_HHMMssl_') + rnd_number +'_'+ name;

    fs.renameSync(req.files.image.path, 'public/files/img'+new_name);

    img = '<img src="public/files/img/'+new_name+'" width="100%"/>';
}

res.render('admin/upload', {layout: false, img: img, msg: msg});

}) 
```

# php - 抓取数据时禁止显示

> ID：14028039
> 
> 赞同：1
> 
> 时间：2012-12-25T05:44:25.057
> 
> 标签：php

我想从网站上获取数据。但它显示我被禁止。看看这段代码：

```
<?php
$link='http://www.sitedossier.com/site/wikipedia.org';
$so=file_get_contents($link);
echo ($link);
echo "</br>";
echo ($so);
?> 
```

但它显示禁止。脚本结果是：

```
http://www.sitedossier.com/site/wikipedia.org
Forbidden. 
```

但如果我只给出主站点名称：`http://www.sitedossier.com`用于获取数据。它在抢。

这里有什么问题 ？我的脚本错误或网站禁止使用任何脚本？如果是这样，那么我该如何绕过它？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-25T05:51:07.450

有些网站不喜欢机器人。如果你有它，你可以使用 cURL 来解决这个问题：

```
<?php
$ch = curl_init('http://www.sitedossier.com/site/wikipedia.org');
curl_setopt($ch, CURLOPT_FOLLOWLOCATION, true);
curl_setopt($ch, CURLOPT_USERAGENT, 'Mozilla/5.0 (Windows NT 6.1; rv:20.0) Gecko/20121221 Firefox/20.0');
curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
curl_setopt($ch, CURLOPT_REFERER, 'http://www.sitedossier.com');
curl_setopt($ch, CURLOPT_COOKIEFILE, 'cookie.txt');
curl_setopt($ch, CURLOPT_COOKIEJAR, 'cookie.txt');

$data = curl_exec($ch);
echo $data;
?> 
```

编辑：它现在有效。我猜他们设置了网站需要的 cookie。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-25T05:48:01.387

该网站需要一个`file_get_contents`不发送的用户代理字符串。

使用`fsockopen`和相关功能确保发送正确的标头。

# android - 从命令行创建项目时如何在android中使用代码模板？

> ID：14028047
> 
> 赞同：5
> 
> 时间：2012-12-25T05:45:02.567
> 
> 标签：android, templates, command-line

我在 Eclipse 中使用了 android 代码模板，例如空白活动、登录活动等。我想在从命令行创建项目时使用这些模板。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-15T23:52:07.350

[您可以使用 Ruby 的ERB](http://en.wikipedia.org/wiki/ERuby#erb) gem编写和呈现这些模板（或您想要创建的任何其他模板） 。

来自[http://www.ictforu.com/index.php/Ruby/erb-ruby.html](http://www.ictforu.com/index.php/Ruby/erb-ruby.html)：

> ERB 是 Embedded Ruby 的缩写
> 
> ERB 是 Ruby 的一项功能，它使用户能够从模板动态生成任何类型的文本。这些模板将纯文本与 Ruby 代码相结合，用于变量替换和流控制，这使得它们易于编写和维护。
> 
> ERB 常用于 Rails 平台生成网页，也用于生成 XML 文件、源代码等。

虽然它很常见，`Ruby on Rails`你可以在任何你想要的地方使用它;-)

我建议你检查：

*   [ERB 文件](http://ruby-doc.org/stdlib-1.9.3/libdoc/erb/rdoc/ERB.html)
*   [如何在没有 Web 服务器的情况下从命令行执行 ruby​​ 模板文件 (ERB)？](https://stackoverflow.com/questions/980547/how-do-i-execute-ruby-template-files-erb-without-a-web-server-from-command-lin)

# image - 无法使用虚拟主机获取 zend 公共子文件夹

> ID：14028049
> 
> 赞同：0
> 
> 时间：2012-12-25T05:45:15.697
> 
> 标签：image, zend-framework, localhost, virtualhost, subdirectory

我创建了一个 Zend 项目。我的图像位于 public/icons 文件夹中，当我使用 url 运行项目时它们可用，`http://localhost/zendproject/public/icons/image.png`但是当我使用 virtualhost 时，`http://zend.gameblog`我无法通过 url 获取此图像`http://zendgameblog/icons/image.png`。浏览器显示“403 Forbidden”，我不明白为什么。我也有 public/captcha 文件夹和来自这个位置的任何图像总是可以通过 url 获得`http://zend.gameblog/captcha/image.png`。

我使用：win7 x86、WAMP、zend framework 1.12、Zend Studio 9.0.4。我手动创建的一些资源和文件夹不是通过 Zend Studio。

请帮助我并告诉我在真实服务器上运行我的项目时是否会遇到这样的问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-25T09:35:41.280

对于网站上的所有 css、js 和 img，请使用[baseUrl 助手](http://framework.zend.com/manual/1.12/en/zend.view.helpers.html#zend.view.helpers.initial.baseurl)：

```
$this->baseUrl('/icons/image.png');
//or
$this->baseUrl('/css/css_file.css'); 
```

对于网站上的所有链接，请使用[URL View Helper](http://blog.ericlamb.net/2010/04/zend-framework-url-view-helper/)：$this->url(...)

# php - 如何使用 php 日期函数从 oracle 日期字段中选择日期和时间

> ID：14028063
> 
> 赞同：2
> 
> 时间：2012-12-25T05:48:07.690
> 
> 标签：php, sql, oracle

如何从存储为 12/25/2012 5:12:05 AM 的日期开始计算时间。

```
date('l F j, Y, g:i a',strtotime($last_login_details[FL_DATETIME])); 
```

上述函数返回时间为上午 12:00，应该返回上午 5:12。

FL_DATETIME 具有数据类型 DATE。

在数据库中，值的存储方式如下：

```
 12/25/2012 5:12:05 AM 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-25T06:29:57.183

根据文档 - [http://docs.oracle.com/cd/B19306_01/server.102/b14220/datatype.htm#i1847](http://docs.oracle.com/cd/B19306_01/server.102/b14220/datatype.htm#i1847) -

> 对于日期的输入和输出，标准的 Oracle 日期格式是 DD-MON-YY

这很可能`$last_login_details[FL_DATETIME]`是回声的原因`25-DEC-12`

尝试使用更改您的查询`TO_CHAR()`

```
SELECT TO_CHAR(FL_DATETIME, 'MM/DD/YYYY HH24:MI:SS A.M.') AS FL_DATETIME ... 
```

见[http://infolab.stanford.edu/~ullman/fcdb/oracle/or-time.html#date](http://infolab.stanford.edu/~ullman/fcdb/oracle/or-time.html#date)格式

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-25T06:26:34.163

通过以下方式解决了我的问题：

```
SELECT TO_CHAR(FL_DATETIME, 'DD.MM.YYYY:HH24:MI:SS') FROM "FMS_LOG" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-25T06:03:05.117

首先，在我看来，您应该将所有日期存储为 unix 时间戳。这使您可以更轻松地对时间进行搜索，并消除日期字符串操作可能引起的任何不一致。

其次，我测试了你的代码；据我所知，它看起来还不错。回显您在 $last_login_details[FL_DATETIME] 变量中得到的内容。问题可能在于变量赋值，而不是日期字符串操作。

希望有帮助！

# redirect - nginx：使用相同的链接将 domain1 重定向到 domain2

> ID：14028068
> 
> 赞同：1
> 
> 时间：2012-12-25T05:49:17.170
> 
> 标签：redirect, nginx

如何将链接从一个域重定向到另一个域并保留相同的链接结构？

例如：我想重定向`domain.com/ma-page/15/03/`到`domain.org/ma-page/15/03/`

我试过的

```
server_name  domain.com;
#rewrite ^/(.*) http://domain.org permanent;
#rewrite ^ http://domain.org$request_uri? permanent;
rewrite ^/(.*) http://domain.org/$1 permanent; 
```

# php - php，mysql，postgresql

> ID：14028075
> 
> 赞同：1
> 
> 时间：2012-12-25T05:50:21.863
> 
> 标签：php, mysql, postgresql, group-by

> **可能重复：**
> [php、postgresql、mysql](https://stackoverflow.com/questions/14027801/php-postgresql-mysql)

我想过滤查询以产生如下结果：

`sum of amount_to_be_paid`, `contractor name`, `sum of amount paid`.

我的问题出在表映射中。它产生双重结果 bcozcontractor_task 的表有 2 个条目具有相同的承包商但不同的工作类型。请告诉我如何获得承包商的单一结果，即使他从事不同的任务。

询问：

```
select distinct contractors.name, cont.total,cp.amount_paid
                FROM
                (
                  select contractor_id,sum(amount_to_be_paid) as total
                  from contractor_tasks left join worktypeids as wt on worktypeid_id = wt.id where wt.project_id=2
                  group by contractor_id
                )cont
                left join
                (
                  select project_id,contractor_id,sum(amount_paid) as amount_paid
                  from contractor_payments 
                  group by contractor_id,project_id
                )cp

                    on cont.contractor_id= cp.contractor_id
                              left join contractors on cont.contractor_id=contractors.id 
```

# c - 用于展开支持的内存利用率（在 ARM 架构上）

> ID：14028076
> 
> 赞同：11
> 
> 时间：2012-12-25T05:50:37.187
> 
> 标签：c, gcc, embedded, arm, ld

我目前正在尝试用 C 语言为 SAM7X256 微控制器开发软件。该设备正在运行 contiki OS，我正在使用 yagarto 工具链。

在研究地图文件时（试图找出 .text 区域增长如此之多的原因），我发现有几个 kb 的 .text 区域分配给展开支持（见下文）

```
.text           0x00116824      0xee4 c:/toolchains/yagarto/bin/../lib/gcc/arm-none-eabi/4.6.2\libgcc.a(unwind-arm.o)
                0x00116c4c                _Unwind_VRS_Get
                ......   
                0x0011763c                __gnu_Unwind_Backtrace

.text           0x00117708      0x1b0 c:/toolchains/yagarto/bin/../lib/gcc/arm-none-eabi/4.6.2\libgcc.a(libunwind.o)
                0x00117708                __restore_core_regs
                0x00117708                restore_core_regs
                ....
                0x00117894                _Unwind_Backtrace

.text           0x001178b8      0x558 c:/toolchains/yagarto/bin/../lib/gcc/arm-none-eabi/4.6.2\libgcc.a(pr-support.o)
                0x00117958                __gnu_unwind_execute
                ...
                0x00117e08                _Unwind_GetTextRelBase 
```

我试图寻找一些关于展开的信息并找到[1](http://en.wikipedia.org/wiki/Call_stack#Unwinding)和[2](http://sourceware.org/binutils/docs/as/ARM-Unwinding-Tutorial.html)。但是，我仍然不清楚以下内容：

1.  何时/为什么我需要平仓支持？
2.  我的代码的哪一部分导致 pr-support.o、unwind-arm.o 和 libunwind.o 被链接？
3.  如果适用，我如何避免链接以下项目。

如果有必要，我会包含指向完整[地图文件的链接](http://pastebin.com/HuAXLPrh)

在此先感谢您的帮助

**编辑 1：添加链接器命令**

```
CC       = arm-none-eabi-gcc
CFLAGSNO = -I. -I$(CONTIKI)/core -I$(CONTIKI_CPU) -I$(CONTIKI_CPU)/loader \
       -I$(CONTIKI_CPU)/dbg-io \
           -I$(CONTIKI)/platform/$(TARGET) \
           ${addprefix -I,$(APPDIRS)} \
           -DWITH_UIP -DWITH_ASCII -DMCK=$(MCK) \
           -Wall $(ARCH_FLAGS) -g -D SUBTARGET=$(SUBTARGET)

CFLAGS  += $(CFLAGSNO) -O -DRUN_AS_SYSTEM -DROM_RUN  -ffunction-sections

LDFLAGS += -L $(CONTIKI_CPU) --verbose -T $(LINKERSCRIPT) -nostartfiles  -Wl,-Map,$(TARGET).map

$(CC) $(LDFLAGS) $(CFLAGS) -nostartfiles -o project.elf -lc Project.a 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-12-27T17:49:03.457

这个答案的几个部分：

*   展开库函数是从某些 GCC 库函数模块的异常表中提到的异常“个性例程”（__aeabi_unwind_cpp_pr0 等）中提取的。

*   您的地图文件显示 bpapi.o（包含整数除法函数的模块）引入了此异常代码。我在最新的 YAGARTO 中没有看到这一点，但我在 _divdi3.o 中执行此操作，这是另一个整数除法辅助模块。我可以通过编写一个执行 64 位除法的简单 main() 来重现展开代码的效果。

*   C 代码具有（非平凡的）异常表的一般原因是，当您在应用程序中任意混合 C 和 C++ 代码时，可以“通过”C 代码抛出 C++ 异常。

*   不能抛出或调用抛出函数的函数，如果它们根本有异常表，则应该只需要标记为 CANTUNWIND 的琐碎的函数，这样展开库就不会被拉入。你会期望除法助手在这个类别，实际上在 CodeSourcery 的发行版中，_divdi3.o 被标记为 CANTUNWIND。

*   所以根本原因是YAGARTO的GCC库（libgcc.a）构建不当。并非完全不正确，因为它应该仍然可以工作，但这是您在嵌入式工具链中不会想到的代码膨胀。

你能对此做些什么吗？似乎没有简单的方法让 GNU 链接器忽略 ARM 异常部分，即使使用 /DISCARD/ 脚本也是如此——文本部分的链接会覆盖它。但是您可以做的是为异常个性例程添加一个存根定义：

```
void __aeabi_unwind_cpp_pr0(void) {}
int main(void) { return *(unsigned long long *)0x1000 / 3; } 
```

与没有存根的 14K 相比，使用 YAGARTO 编译为 4K。但是您可能也想研究替代的 GNU 工具发行版。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-04-19T17:41:45.967

GCC 有一个选项可以消除异常处理。

```
-fno-exceptions 
```

虽然我不熟悉 yagarto 可以肯定地说，它可能有类似的选择。在 GCC 上，此选项以对标准异常的支持为代价消除了这种开销。

# c# - 如何在 silverlight 程序中存储和执行 SQL 文件？

> ID：14028081
> 
> 赞同：0
> 
> 时间：2012-12-25T05:51:21.853
> 
> 标签：c#, silverlight

我找到了一些关于如何在 SL 程序中存储资源的信息。但是如何存储包含 SQL 代码的文件，并针对数据库运行该代码？

我已经让我的 SL 程序能够查询数据库，我需要知道如何将 SQL 文件存储为资源并从我的 SL 程序执行查询。

有人对如何做到这一点有任何线索吗？

# ios - iOS Facebook 原生分享对话框：初始文本

> ID：14028083
> 
> 赞同：0
> 
> 时间：2012-12-25T05:51:32.793
> 
> 标签：ios, facebook-ios-sdk

我在我的 iOS 应用程序中使用 Facebook Native Share Dialog。我给出了初始文本，但是当对话框弹出时，它会将帖子 URL 添加到我的初始文本中。我怎么解决这个问题？这里是代码。

```
BOOL displayedNativeDialog =
    [FBNativeDialogs
     presentShareDialogModallyFrom:self
     initialText:@"Say something about this..."
     image:[UIImage imageWithData:imageData]
     url:[NSURL URLWithString:activityUrl]
     handler:^(FBNativeDialogResult result, NSError *error) {
         if (error) {
         } else {
             if (result == FBNativeDialogResultSucceeded) {
             } else {
             }
         }
     }]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-28T17:50:11.973

如果您正在共享一个 URL（链接共享）并且图像位于该链接内，则只需将图像参数设置为 nil。然后帖子 URL 将不会添加到初始文本中。如果您提供图像，就好像您正在共享照片并将链接（和文本）添加为照片标题信息。

因此，根据您要执行的操作，选择适合您的选项，即是链接共享还是照片共享。

# ember.js - Emberjs：{{#view}} 助手上的 classBinding 使用的上下文是什么？

> ID：14028086
> 
> 赞同：2
> 
> 时间：2012-12-25T05:52:17.770
> 
> 标签：ember.js, view-helpers

该[doc](http://emberjs.com/documentation/#toc_modifying-a-view-s-html)的示例暗示a`context`是`instance`a`View`没有 a `controller`。但我不能用最新版本试试这个，请检查[这个 jsfiddle 的链接](http://jsfiddle.net/gqRmv/)。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-25T21:51:54.293

这是我这样做的方式：http: [//jsfiddle.net/arasbm/ACqjt/1/](http://jsfiddle.net/arasbm/ACqjt/1/)

只是为了澄清视图的上下文默认设置为它的控制器。如果您想访问视图的属性，例如`flag`在视图模板内部，您将使用`view.flag`它来引用它。

我更喜欢在视图本身内设置视图类名绑定：

```
classNameBindings: ['flag:A:B'] 
```

您还应该能够在模板中进行绑定，但我不确定为什么这在您的小提琴中不起作用。在定义视图时不要使用引号，而是使用：

```
{{view App.CustomDiv}} 
```

或者

```
{{#view App.CustomDiv}}{{/view}} 
```

如果您不想为视图使用单独的模板。我喜欢为我拥有的每个视图设置一个模板。例如，我将它们放在单独的文件中`custom.handlebars`，但为了在 jsFiddle 中进行演示，您可以使用该`data-template-name`属性来命名您要使用的模板，然后在视图定义中使用`templateName`. 我希望这可以帮助您继续前进。

# qunit - 在测试运行器栏中选择 QUnit 模块列表？

> ID：14028087
> 
> 赞同：6
> 
> 时间：2012-12-25T05:52:25.740
> 
> 标签：qunit

我记得曾经在 QUnit 的测试运行器工具栏中看到过 QUnit 测试模块选择列表的屏幕截图。我的印象是，在选择列表中选择一个模块会导致该模块的测试运行。

问题：QUnit 是否真的存在这样的功能 OOB？我知道可以通过 URL 设置过滤器，但我想要一个更“可发现”的选项。

谢谢！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-25T06:17:22.770

只有在测试套件中定义了多个[模块时，选择列表才会显示。](http://api.qunitjs.com/module/)

此外，请确保您的测试套件在 QUnit 初始化之前准备就绪。即，当页面完成加载（onload 事件）时，QUnit 会自行初始化。如果您碰巧在此之后定义了您的测试套件，那么您必须调用（未记录的）`QUnit.load()`方法来通知 QUnit 您的测试套件已经定义。

**演示：http:** [//jsfiddle.net/brianpeiris/98fc8/show/](http://jsfiddle.net/brianpeiris/98fc8/show/)

# java - 无法在 Eclipse 中导入字体，但可以在 Dr. Java 中导入

> ID：14028088
> 
> 赞同：1
> 
> 时间：2012-12-25T05:52:56.210
> 
> 标签：java, eclipse, fonts, drjava

所以我有这个代码

```
File fontFile = new File("FrizQuadrataTT.ttf");;
FileInputStream in = new FileInputStream(f);
Font dFont = Font.createFont(Font.TRUETYPE_FONT, in);
Font f1 = dFont.deriveFont(15f); 
```

其中导入了一个名为 FrizQuadrataTT.ttf 的字体文件。我曾经使用 Dr. Java 编写代码，最近开始使用 Eclipse，但现在在 Eclipse 中，此代码不起作用。然而，它确实适用于 Dr. Java。

```
Exception in thread "main" java.io.FileNotFoundException: FrizQuadrataTT.ttf (The system cannot find the path specified)
at java.io.FileInputStream.open(Native Method)
at java.io.FileInputStream.<init>(Unknown Source) 
```

这是运行时给出的错误消息。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-25T05:57:02.670

该文件必须位于应用程序的类路径中。我相信Eclipse会自动将项目的根目录添加到类路径中，所以你应该`FrizQuadrataTT.ttf`直接放入项目的根目录。

# java - Java RegEx 将自关闭 xml 标签转换为关闭标签

> ID：14028090
> 
> 赞同：3
> 
> 时间：2012-12-25T05:53:32.153
> 
> 标签：java, regex

我不太擅长正则表达式。有人可以帮我更换

```
<MessageParam name="0" desc="Source Queue" /> 
```

和

```
<MessageParam name="0" desc="Source Queue"></MessageParam> 
```

使用正则表达式

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-25T05:58:20.093

正则表达式匹配：

```
(<\s*MessageParam[^>]*)/\s*> 
```

替换字符串：

```
$1></MessageParam> 
```

您可能需要转义`\`字符（在它之前添加一个额外的字符`\`）。

我假设`>`没有出现在属性值中，并且 XML 是有效的。

更通用的版本：

正则表达式匹配：

```
<\s*([^\s>]+)([^>]*)/\s*> 
```

替换字符串：

```
<$1$2></$1> 
```

对于这个，我不确定我所做的所有假设。但我仍然假设`>`没有出现在属性值中，并且 XML 是有效的。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-25T06:24:25.503

正则表达式

```
<(\w+)(.+?)/> 
```

用。。。来代替

```
<$1$2></$1> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-25T07:50:19.103

```
public static void format(String xmlNode) {
    Pattern patt = Pattern.compile("(<MessageParam[^>]*)(\\s*/>)");
    Matcher mattcher = patt.matcher(xmlNode);
    while (mattcher.find()){
        String result = mattcher.replaceAll("$1></MessageParam>");
        System.out.println(result);
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-12-17T16:18:24.770

这对我有用：

```
xmlString.replaceAll("<(\\w*:*\\w+)/>", "<$1></$1>"); 
```

# mysql - 如何防止我的表中的重复记录插入忽略在此处不起作用

> ID：14028093
> 
> 赞同：14
> 
> 时间：2012-12-25T05:55:03.917
> 
> 标签：mysql, sql, insert

```
mysql> select * from emp;

    +-----+---------+------+------+------+
    | eno | ename   | dno  | mgr  | sal  |
    +-----+---------+------+------+------+
    |   1 | rama    |    1 | NULL | 2000 |
    |   2 | kri     |    1 |    1 | 3000 |
    |   4 | kri     |    1 |    2 | 3000 |
    |   5 | bu      |    1 |    2 | 2000 |
    |   6 | bu      |    1 |    1 | 2500 |
    |   7 | raa     |    2 | NULL | 2500 |
    |   8 | rrr     |    2 |    7 | 2500 |
    |   9 | sita    |    2 |    7 | 1500 |
    |  10 | dlksdgj |    2 |    2 | 2000 |
    |  11 | dlksdgj |    2 |    2 | 2000 |
    |  12 | dlksdgj |    2 |    2 | 2000 |
    |  13 | dlksdgj |    2 |    2 | 2000 |
    |  14 | dlksdgj |    2 |    2 | 2000 |
    +-----+---------+------+------+------+ 
```

这是我的桌子。我想*消除*或*防止*插入重复记录，因为该`eno`字段是`auto increment`总行永远不会重复，但记录是重复的。如何防止插入那些重复的记录？

我尝试使用`INSERT IGNORE AND ON DUPLICATE KEY UPDATE`（*我认为我没有正确使用它们*）。

我使用它们的方式是，

```
mysql> insert into emp(ename,dno,mgr,sal) values('dlksdgj',2,2,2000);
Query OK, 1 row affected (0.03 sec)

mysql> insert ignore into emp(ename,dno,mgr,sal) values('dlksdgj',2,2,2000);
Query OK, 1 row affected (0.03 sec)

mysql> insert into emp(ename,dno,mgr,sal) values('dlksdgj',2,2,2000) ON DUPLICATE KEY UPDATE eno=eno;
Query OK, 1 row affected (0.03 sec)
mysql> insert into emp(ename,dno,mgr,sal) values('dlksdgj',2,2,2000) ON DUPLICATE KEY UPDATE eno=eno;
Query OK, 1 row affected (0.04 sec

mysql> desc emp;
+-------+-------------+------+-----+---------+----------------+
| Field | Type        | Null | Key | Default | Extra          |
+-------+-------------+------+-----+---------+----------------+
| eno   | int(11)     | NO   | PRI | NULL    | auto_increment |
| ename | varchar(50) | YES  |     | NULL    |                |
| dno   | int(11)     | YES  |     | NULL    |                |
| mgr   | int(11)     | YES  | MUL | NULL    |                |
| sal   | int(11)     | YES  |     | NULL    |                |
+-------+-------------+------+-----+---------+----------------+ 
```

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-12-25T05:57:21.873

`UNIQUE`通过添加约束来更改表

```
ALTER TABLE employee ADD CONSTRAINT emp_unique UNIQUE (ename,dno,mgr,sal) 
```

但是如果表`employee`是空的，你可以这样做。

或者如果存在记录，请尝试添加`IGNORE`

```
ALTER IGNORE TABLE employee ADD CONSTRAINT emp_unique UNIQUE (ename,dno,mgr,sal) 
```

**更新 1**

出事了，我猜。您只需要在列上添加唯一约束，`ename`因为`eno`由于`AUTO_INCREMENT`.

为了添加唯一约束，您需要对表进行一些清理。

下面的查询删除了一些重复的记录，并通过在列上添加唯一约束来更改表`ename`。

```
DELETE a
FROM Employee a
     LEFT JOIN
     (
        SELECT ename, MIN(eno) minEno
        FROM Employee
        GROUP BY ename
     ) b ON a.eno = b.minEno
WHERE b.minEno IS NULL;

ALTER TABLE employee ADD CONSTRAINT emp_unique UNIQUE (ename); 
```

这是一个完整的演示

*   [SQLFiddle 演示](http://sqlfiddle.com/#!2/29964/1)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-12-25T05:57:46.737

创建一个`UNIQUE CONSTRAINT`你认为存在重复的地方。

喜欢

```
ALTER TABLE MYTABLE ADD CONSTRAINT constraint1 UNIQUE(column1, column2, column3) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-07-30T10:17:41.953

无论您是否先清理表（即您可以立即停止插入重复项并按单独的计划清理）并且无需添加任何唯一约束或以任何其他方式更改表，这都将起作用：

```
INSERT INTO
    emp (ename, dno, mgr, sal)
SELECT
    e.ename, 2, 2, 2000
FROM
    (SELECT 'dlksdgj' AS ename) e
    LEFT JOIN emp ON e.ename = emp.ename
WHERE
    emp.ename IS NULL 
```

上面的查询假设您想`ename`用作“唯一”字段，但您可以按照相同的方式将任何其他字段或其组合定义为唯一用于 this 的目的`INSERT`。

它之所以有效，是因为它是一种`INSERT ... SELECT`格式，如果它的左连接还没有该值，则该`SELECT`部分仅产生一行（即要插入的东西） 。`emp`自然，如果您想更改定义此“唯一性”的字段，您将相应地修改 the`SELECT`和 the `LEFT JOIN`。

# symfony-2.1 - “symfony2 链式选择器”的答案不清楚

> ID：14028095
> 
> 赞同：2
> 
> 时间：2012-12-25T05:55:53.430
> 
> 标签：symfony-2.1

我有与[本](https://stackoverflow.com/questions/10186185/symfony2-chained-selectors)主题中描述的相同的任务。

当我在寻找答案时，我无法得到一件事。应该在ajax中设置什么url。

```
$(document).ready(function () {
$('#city_country').change(function(){
    $('#city_state option:gt(0)').remove();
    if($(this).val()){
        $.ajax({
            type: "GET",
            data: "country_id=" + $(this).val(),
            url: Routing.generate('state_list'),
            success: function(data){
                $('#city_state').append(data);
            }
        });
    }
}); 
```

});

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T22:11:48.270

您将使用指向控制器的路由，该控制器接受国家 ID 并返回该国家/地区内的州 ID 列表。

# xcode - Xcode - 如果 iPhone 不充电时发出警报

> ID：14028103
> 
> 赞同：0
> 
> 时间：2012-12-25T05:57:25.413
> 
> 标签：xcode

> **可能重复：**
> [如何知道设备何时充电？](https://stackoverflow.com/questions/13186203/how-to-know-when-the-device-is-charging)

我在 Xcode 上是个菜鸟，如果我让我自欺欺人，我很抱歉。我正在尝试制作一个应用程序，其中一个功能是检查 iphone/ipod/ipad 是否正在充电。如果不充电，我希望它播放声音并闪烁 LED。另外，如果它正在充电，我想让它显示诸如“设备充电:)”之类的文本。顺便说一句，我使用的是 FlipsideViewController 的方法，但这些功能将在 MainView 中。我查看了各种示例，并查看了下面的示例以及许多测试应用程序，但我不知道如何使用它。先感谢您！！

代码：

```
[[UIDevice currentDevice] setBatteryMonitoringEnabled:YES];

if ([[UIDevice currentDevice] batteryState] != UIDeviceBatteryStateUnplugged) {
//Device is connected (charging or fully charged)
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-25T06:08:25.367

将此添加到 appDelegate.m

```
- (void)applicationDidBecomeActive:(UIApplication *)application{
    [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(batteryStateDidChange:) name:UIDeviceBatteryStateDidChangeNotification object:nil];
    [[UIDevice currentDevice] setBatteryMonitoringEnabled:YES];
}

- (void)applicationWillResignActive:(UIApplication *)application {
    [[UIDevice currentDevice] setBatteryMonitoringEnabled:NO];
}

- (void)batteryStateDidChange(NSNotification*)notif {
    // check the status here. 
    // See if it is charging, or not and respond to the change.
} 
```

（编辑以使代码更明确）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-25T06:25:43.377

听起来您可能想从一些编写 iPhone 应用程序的教程开始，因为上面的代码看起来不错（尽管我没有专门尝试过）。如果您不了解如何执行我在下面描述的某些事情（或者某些术语不熟悉），我建议您买一本好书或查看一些教程：

[书籍：iOS 6 SDK 开发（亚马逊）](https://rads.stackoverflow.com/amzn/click/com/1934356948)

[教程：Ray Wenderlich 在他的网站上有很多很好的教程](http://www.raywenderlich.com/tutorials)

[苹果文档非常好](https://developer.apple.com/library/ios/navigation/)

仅仅为您编写代码是没有意义的，因为您可能想学习如何编程，如果有人为您编写代码，您将学不到太多东西。

这里有一些关于如何考虑这个问题的建议，尽管你想要的行为从你所说的并不完全明显。

如果我理解您，您希望在显示主视图时发生两种不同的操作。

首先，为什么不让它在字段中设置文本字符串以匹配充电/未充电状态？

因此，您需要在 Xcode 的主视图 .xib 文件中添加一个 UILabel，并在视图控制器中为其添加一个插座，以便您可以在运行时设置它的文本。

然后你会想要调用上面的第一行开始监控（参数是：YES），一旦视图消失，再次调用 NO 停止监控。如果您查看位于[`UIViewController`](http://www.raywenderlich.com/tutorials) 顶部附近的 developer.apple.com 的文档，您将看到 UIViewController 实现的方法列表。在这种情况下，您可能想要覆盖（创建您自己的版本）`viewWillAppear`并将带有 YES 和 NO`viewWillDisappear`的`setBatteryMonitoringEnabled`调用分别放入这两个方法中。

这样就可以启用/禁用电池状态监控。现在您需要测试状态并采取行动（这是`batteryState`上面代码中的调用）。

从您的描述中不明显的关于设计的一个问题是，如果您想在视图出现时执行此操作一次，或者您是否希望它持续监视状态。

如果你想做一次，你可以把上面的调用放在`viewDidAppear`，比如说，然后使用 UILabel 的插座根据结果将标签中的消息设置为“正在充电”或“不充电”`batteryState`方法。

如果您想要监视充电状态变化的东西，那么您需要订阅通知并将您的代码更改为该通知的处理程序中的 UILabel（或您最终为响应更改所做的任何事情）。

您可以通过阅读 developer.apple.com 上的[UIDevice](https://developer.apple.com/library/ios/#documentation/UIKit/Reference/UIDevice_Class/Reference/UIDevice.html#//apple_ref/doc/uid/TP40006902)文档或 Xcode 的 Organizer 窗口的 Documentation 部分了解这一点。如果您阅读该`UIDevice`方法的文档，`batteryMonitoringEnabled`您会看到“另请参阅”部分包含两个通知条目，您可以订阅以了解 Level 或 State 何时更改： `UIDeviceBatteryLevelDidChangeNotification`和`UIDeviceBatteryStateDidChangeNotification`. 要了解如何订阅通知，您需要查看[`NSNotificationCenter`](https://developer.apple.com/library/ios/#documentation/Cocoa/Reference/Foundation/Classes/NSNotificationCenter_Class/Reference/Reference.html#//apple_ref/doc/uid/TP40003701)文档。

然后，一旦您开始工作，您就可以添加更高级的警报（小心重复发出警报！）和声音（尽管在电池不充电时播放声音会使用电池，这有点值得怀疑......只是确保不要也许反复做）。

祝你好运！

# ios - UITextField，在缩放模式下聚焦时文本模糊

> ID：14028107
> 
> 赞同：2
> 
> 时间：2012-12-25T05:58:17.253
> 
> 标签：ios, uitextfield

## 标题

我在这个问题中迷失了很长时间，并没有在谷歌或 stackoverflow 上找到答案。

我添加了 setContentScaleFactor，现在当焦点在字段中时，文本会变得模糊。集中注意力时，文字会很清晰。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-25T06:20:28.367

```
[yourTextFeild setContentScaleFactor:scale]; 
```

每次缩放时都调用它。

这可能会对您有所帮助。

# javascript - 使用 javascript 加载不同的 CSS 样式表

> ID：14028113
> 
> 赞同：1
> 
> 时间：2012-12-25T05:58:44.507
> 
> 标签：javascript, ios, css, wordpress

我需要使用 javascript 根据正在传递的 URL 变量加载不同的样式表。

场景是这样的：我们需要维护一个具有一个 CSS 样式表的移动网站，以及一个不同的样式表，当通过 iOS 应用程序中加载的 Web 视图访问同一页面时，该样式表将用于设置该页面的样式。

如果您查看 www.blog.meetcody.com，您会发现我们已经在使用媒体查询和响应式网页设计。这对我们来说不够的原因是因为媒体查询无法检测到页面是通过原生应用程序中的 webview 加载还是通过移动 safari 加载的。我们需要分别处理这两种情况。该博客是一个托管的 wordpress 博客，我们通过 iOS 应用程序中的 JSON API 访问该博客。

我们处理这个问题的方式如下：当通过我们的 iOS 应用程序加载网页时，我们将一个变量附加到 URL“/?app=true”的末尾。我想做的是检查 URL 是否包含此字符串，如果是，请使用不同的 webview。

我正在尝试使用以下代码执行此操作：

```
 <script language="javascript" type="text/javascript">
    if(window.location.href.indexOf('/?app=true') > -1) {

        document.write("<link rel=\"stylesheet\" type=\"text/css\" href=\"http://blog.meetcody.com/wp-content/themes/standard/appstyle.css\" />");
    }
    document.close(); 
</script> 
```

我遇到的问题是，当 ?app=true 是 URL 的一部分时，上面的代码实际上并没有加载 appstyle.css 样式表。

如果你看一下[http://blog.meetcody.com/wp-content/themes/standard/appstyle.css?ver=3.4.2](http://blog.meetcody.com/wp-content/themes/standard/appstyle.css?ver=3.4.2)你可以看到我正在通过设置背景来测试这个：黑色正文 {} 标签

```
body {
background: black;
} 
```

而在[http://blog.meetcody.com/wp-content/themes/standard/style.css?ver=3.4.2](http://blog.meetcody.com/wp-content/themes/standard/style.css?ver=3.4.2)的 style.css 中，主体背景颜色为 #F2F0EB；在正文 {} 标记中

```
 body {
        background: #F2F0EB;
   } 
```

当然，我们想做的不仅仅是改变背景颜色，但我只是将其作为示例。

有没有更好的方法来做到这一点，还是我的代码有问题？也许我不能在 javascipt 中使用指向 appstyle.css 和 href 的直接链接？非常感谢帮助。和圣诞快乐！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-25T06:04:08.890

您可以使用 appendChild() 添加 CSS 样式表，如下所示：

```
 var header = $.getElementsByTagName('head')[0];
 var styleSheet = $.createElement('link');
 styleSheet.rel = 'stylesheet';
 styleSheet.type = 'text/css';
 styleSheet.href = 'style.css'; // name of your css file
 styleSheet.media = 'all';
 header.appendChild(styleSheet); 
```

当然，您可以通过执行以下操作更改此示例以根据当前 URL 容纳不同的 css 文件名：

```
 styleSheet.href = (isMobile == true) ? 'mobile.css' : 'default.css'; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-25T06:10:02.717

使用内联脚本时，永远不要尝试关闭文档。仅当您 document.write 到 iframe、框架或新窗口时才需要 document.close

另外我建议您测试 location.search 而不是 href 因为那是您放置标志的位置。

请试试

```
<script language="javascript" type="text/javascript">
if (location.search.indexOf('app=true') > -1) {
  document.write('<link rel="stylesheet" type="text/css" href="http://blog.meetcody.com/wp-content/themes/standard/appstyle.css" />');
}
</script> 
```

并且可能将该脚本放置在其他样式表之后，如果您想覆盖在您的站点上的 10 多个工作表之一中设置的内容，或者更好：在服务器上测试查询字符串，或者将查询字符串设置为 app=yes ，在会话中设置一些东西或类似的东西，并使用它在服务器上包含正确的 css 而不是依赖 JS

PS：你的body标签在你的主页上有home和blog的类。我建议您查看上面提到的样式表，看看这些类的颜色是什么。

PPS：我在这里没有看到任何媒体检测

```
<link rel='stylesheet' id='standard-activity-tabs-css'  href='/wp-content/themes/standard/lib/activity/css/widget.css?ver=3.4.2' type='text/css' media='all' />
<link rel='stylesheet' id='gcse-widget-css'  href='/wp-content/themes/standard/lib/google-custom-search/css/widget.css?ver=3.4.2' type='text/css' media='all' />
<link rel='stylesheet' id='standard-ad-300x250-widget-css'  href='/wp-content/themes/standard/lib/standard-ad-300x250/css/widget.css?ver=3.4.2' type='text/css' media='all' />
<link rel='stylesheet' id='standard-ad-125x125-widget-css'  href='/wp-content/themes/standard/lib/standard-ad-125x125/css/widget.css?ver=3.4.2' type='text/css' media='all' />
<link rel='stylesheet' id='standard-ad-468x60-css'  href='/wp-content/themes/standard/lib/standard-ad-billboard/css/widget.css?ver=3.4.2' type='text/css' media='all' />
<link rel='stylesheet' id='standard-personal-image-widget-css'  href='/wp-content/themes/standard/lib/personal-image/css/widget.css?ver=3.4.2' type='text/css' media='all' />
<link rel='stylesheet' id='standard-influence-css'  href='/wp-content/themes/standard/lib/influence/css/widget.css?ver=3.4.2' type='text/css' media='all' />
<link rel='stylesheet' id='bootstrap-css'  href='/wp-content/themes/standard/css/lib/bootstrap.css?ver=3.4.2' type='text/css' media='all' />
<link rel='stylesheet' id='bootstrap-responsive-css'  href='/wp-content/themes/standard/css/lib/bootstrap-responsive.css?ver=3.4.2' type='text/css' media='all' />
<link rel='stylesheet' id='standard-css'  href='/wp-content/themes/standard/style.css?ver=3.4.2' type='text/css' media='all' /> 
```

# iphone - 带有 UICollectionViewFlowLayout 的 UICollectionViewCells - 发生了奇怪的布局

> ID：14028117
> 
> 赞同：0
> 
> 时间：2012-12-25T05:59:04.537
> 
> 标签：iphone, ios, xcode, uicollectionview, autolayout

我目前正在 xcode 中测试一个只有一个水平行的 UICollectionView，就像一个封面流。基本上我有自己的自定义单元格类和单元格的 xib 文件，然后在每个单元格上添加另一个带有 xib 的 UIView。如果您想知道为什么，我可以将不同的 UIView 添加到单元格中。现在我只添加一个。

**编辑我按照 WWDC 2012 视频创建 UICollectionViewCell 的 linelayout 有一个区别。不是中间的细胞变大，而是所有其他细胞变小。**

**下面的一切对我的问题来说都是新的。**

```
-(NSArray *)layoutAttributesForElementsInRect:(CGRect)rect {

NSArray *array = [super layoutAttributesForElementsInRect:rect];
CGRect visibleRect;
visibleRect.origin = self.collectionView.contentOffset;
visibleRect.size = self.collectionView.bounds.size;

    for (UICollectionViewLayoutAttributes *attributes in array){

    if (CGRectIntersectsRect(attributes.frame, rect)) {
        CGFloat distance = CGRectGetMidX(visibleRect) - attributes.center.x;
        CGFloat normalizedDistance = distance / ACTIVE_DISTANCE;
        if (ABS(distance) < ACTIVE_DISTANCE) {
            //THIS WOULD MAKE THE MIDDLE BIGGER
            //CGFloat zoom = 1 + ZOOM_FACTOR *(1- ABS(normalizedDistance));
            //attributes.transform3D = CATransform3DMakeScale(zoom, zoom, 1.0);
            //attributes.zIndex = round(zoom);
        } else {
            //THIS MAKES ALL THE OTHERS NOT IN THE RECT SMALLER
            CGFloat zoom = 1 + ZOOM_FACTOR *(1- ABS(normalizedDistance));
            attributes.transform3D = CATransform3DMakeScale(zoom, zoom, 1.0);
            attributes.zIndex = round(zoom);
        }
    }
}

return array; 
```

}

可以在附图中看到问题。

![重用单元格未调整大小](../Images/ca4a04af88b05052f7a7bc8b41efbe1e.png)

粉红色 = 收藏视图尺寸

棕色 = 单元格大小

绿色 = 单元格内容大小和附加到内容大小的 xib。

我认为我遇到的问题是布局。当卖出出列时，上面的代码使它变小。然后当它被重用时，CELL 会再次变大，但内容视图不会。

我已经厌倦了手动设置内容视图的框架，但这无济于事。

**更新 1：这也仅在我将 xib 添加到单元格内容视图时才会发生。如果内容视图没有子视图，则没有问题**

**更新2：似乎单元格的子视图，我的xib没有调整大小。我曾尝试手动更改其帧大小，但唯一有帮助的地方是单元格 drawrect 方法，这对我来说就像是 hack。**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-25T09:41:33.263

重复使用的单元格无法重绘自己，因此请致电

```
-(void)setFrame:(CGRect)frame {
    [super setFrame:frame];
    [self setNeedsDisplay]; // force drawRect:
} 
```

来自 UICollectionView 的 cellForItemAtIndexPath。也看看[这个链接](https://gist.github.com/4075682)

这个[问题](https://stackoverflow.com/questions/12927027/uicollectionview-flowlayout-not-wrapping-cells-correctly-ios)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T16:29:50.660

我的回答非常具体，我不确定它会帮助任何人。

问题是我在灰色视图的底部有一个约束。在我将此约束更改为小于或等于之后，由于某种原因它起作用了。

现在我知道这并不能解释为什么它没有发生在每个单元格上，但它解决了我的问题。

因此，如果您在搜索后登陆这里，Harsh 的答案也可能值得一看。

编辑：6.0 UiCollectionView 控制器中似乎也存在一些错误，这些错误似乎已在 6.1 中修复

# android - Flurry 广告杀死了我的 android 服务和小部件视图

> ID：14028123
> 
> 赞同：2
> 
> 时间：2012-12-25T06:00:17.383
> 
> 标签：android, service, widget, ads, flurry

我添加了

`FlurryAgent.getAds(..)`在我的活动范围内。我的活动由小部件启动，信息通过服务缓存。

如果用户点击广告并进入全屏状态，我的小部件将不再响应点击，并且服务不再更新小部件上的视图。除非用户从启动器屏幕中删除小部件并重新添加它，否则它会保持这种状态。

我以这种方式使用服务处理内存不足的情况`onStartCommand()`：

```
 RemoteViews views = new RemoteViews(getPackageName(), R.layout.activity_main);
    AppWidgetManager appWidgetManager = AppWidgetManager
            .getInstance(context);
    int[] appWidgetIds = appWidgetManager
            .getAppWidgetIds(new ComponentName(context,
                    MainWidget.class.getName()));
    for (int i = 0; i < appWidgetIds.length; i++) {
        appWidgetManager.updateAppWidget(appWidgetIds[i], views);
    }

    return START_STICKY; 
```

`appWidgetIds`总是应该更新 appWidgetManager 以保持远程视图可点击，并且该标志`START_STICKY`应该处理有关服务重新实例化的确切情况。

Flurry 全屏广告似乎无论如何都会杀死它

请指教

# javascript - 当内容溢出div的固定高度时如何创建新的div？

> ID：14028126
> 
> 赞同：8
> 
> 时间：2012-12-25T06:00:52.243
> 
> 标签：javascript, jquery, dynamic, text, overflow

CSS

```
.page{ 
      width: 275px;
      hight: 380px;
      overflow: auto;
     } 
```

HTML

```
<div class="page">dynamic text</div> 
```

当动态文本溢出div的固定高度时如何创建一个新的div？

例子：

```
<div class="page">Some dynamic texts will appear here</div> 
```

当动态文本溢出div的固定高度时，上面的内容会是这样的。

```
<div class="page">Some dynamic</div>
<div class="page">texts will</div>
<div class="page">appear here</div> 
```

我试过在 PHP 中使用 wordwrap 函数，`wordwrap($dynamic_text, 600, '</div><div class="page">');`它可以运行，但是从 Ms.Words 复制字符时出现问题。因此，通过检测溢出的文本，将其剪切，然后将其粘贴到新的 div 元素中是更好的解决方案，我猜。但是，我不知道如何使用 JQuery 或 Javascript 来执行此解决方案。

有任何想法吗？提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-25T08:03:26.757

你可以做到，而且不仅仅是几行代码。一个非常有经验的开发人员花了几天时间。抱歉，无法分享代码。

Javascript：将整个内容放入 div 中。您可以将其隐藏或在 DOM 之外一段时间。遍历 div 的孩子。找到 top+scrollHeight 超过 div 高度的那个。递归遍历它。最终，您将找到不适合的不可分割元素，例如图像，或者在文本节点中找到分割文本的位置。从 div 中删除该部分和所有其他元素。将它们添加到新的。

有很多细节要解决，所以并不简单。但可行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-04-12T17:55:52.620

我今天在寻找答案时有类似的工作，但似乎没有任何直截了当的事情。

虽然我正在使用`Array.reduce()`您应该能够使用`Array.forEach()`您喜欢的任何其他迭代代码来执行此操作。

```
words.reduce(function(acc, value) 
```

这是通过计算如果我们在实际渲染**之前添加另一个单词，元素是否会溢出来完成的。**这里的 hacky 是在其中添加另一个`block`元素`visibility: hidden`。

```
element.innerHTML = '<div style="visibility: hidden; height: 100%; width=100%">' + textToBeAdded + '</div>'; 
```

这样，`block`元素仍然采用其父元素**尺寸**，并且可以检查父元素是否溢出。

检查溢出的方法是将元素的滚动高度与其高度进行比较：

```
if (element.scrollHeight > element.offsetHeight) 
```

如果它溢出，我们保持原样并**创建一个新元素**并将当前`value`（单词）放入迭代中。然后我们将它附加到与前一个元素**相同的 DOM 树上**（作为其父元素的子元素......就像有一个新兄弟）

```
var newPageEl = document.createElement('div');
newPageEl.classList = 'page';
newPageEl.textContent = word;
parentElement.appendChild(newPageEl); 
```

希望这是有道理的。

```
var page = document.getElementsByClassName('page')[0];

if (page.scrollHeight > page.offsetHeight) {
  // is overflowing
  fixOverflow(page);
}

function fixOverflow(element) {
  var words = element.textContent.split(' ');
  // delete previous text content
  element.textContent = '';

  words.reduce(function(acc, value) {
    // store current element's text
    var currentElementText = element.textContent.toString().trim();
    var textToBeAdded = currentElementText + ' ' + value;

    element.innerHTML = '<div style="visibility: hidden; height: 100%; width=100%">' + textToBeAdded + '</div>';

    if (element.scrollHeight > element.offsetHeight) {
      // is overflowing with the new word
      element.innerHTML = "";
      // leave the last page element as is
      element.textContent = currentElementText;
      // create another element with the new value to be added
      // ** IMPORTANT replace the memory of the previous element variable 
      element = createPageElement(value);
      // add it to the same DOM tree as the previous page element
      page.parentElement.appendChild(element); // could also be document.getElementById('page-container').appendChild(element);
    } else {
      // if not overflowing add another word 
      element.innerHTML = currentElementText + ' ' + value;    
    }
  }, "");
}

function createPageElement(text) {
  // create element with class page
  var newPageEl = document.createElement('div');
  newPageEl.classList = 'page';
  newPageEl.textContent = text;
  return newPageEl;
}
```

# android - 在Android的警报对话框中显示来自谷歌的格式化电话号码？

> ID：14028128
> 
> 赞同：0
> 
> 时间：2012-12-25T06:01:39.197
> 
> 标签：android, google-places-api

我一直在使用以下关于 Google Maps API 和 Google Places API 的教程。

[http://www.androidhive.info/2012/08/android-working-with-google-places-and-maps-tutorial/](http://www.androidhive.info/2012/08/android-working-with-google-places-and-maps-tutorial/)

这很棒。我设法在地图上显示附近地点的标记，并为不同类别显示不同类型的标记。但是，当用户单击我的标记之一时，我还想在警报对话框中显示该机构的电话号码。为此，我正在使用 Place Detail 搜索。

下面，我将提供我遇到问题的 Map Activity 代码片段。

```
//Map Activity OnCreate()
//Check for null nearPlaces
if(nearPlaces.results!=null)
{
    //Loop through all places
    for(Place place:nearPlaces.results)
    {

        latitude=place.geometry.location.lat;
        longitude=place.geometry.location.lng;
        placeRef=place.reference;

        new LoadDetails().execute(placeRef);

        for(String s:place.types)
        {
            if(s.contains("restaurant"))
            {
                Drawable rMarker=this.getResources().getDrawable(R.drawable.restaurant);

                //phone=lp.getPhone();
                iOverlay=new MyItemizedOverlay(rMarker,this);

                //GeoPoint to place on map
                gp=new GeoPoint((int)(latitude*1E6),(int)(longitude*1E6));

                //Map overlay item
                oItem=new OverlayItem(gp, place.name, place.vicinity+"\n"+"Rating: "+place.rating+" "+phone);

                iOverlay.addOVerlay(oItem);

                iOverlay.addOVerlay(oItem);
                mapOverlays.add(iOverlay);
            } 
```

我有一个可变的字符串电话，我想成为该机构的电话号码。

这是扩展 AsyncTask 的 LoadDetails 类

```
private class LoadDetails extends AsyncTask<String, String, String>
{
    @Override
    protected void onPostExecute(String result) {
                if(placeDetails!=null)
                {
                    if(placeDetails.status.equals("OK"))
                    {
                        if(placeDetails.result!=null)
                        {
                            phone=placeDetails.result.formatted_phone_number;
                            Log.d("Phone #'s",phone);
                        }
                    }
                }

    }

    @Override
    protected String doInBackground(String... params) {

        String reference=params[0];
        googlePlaces=new GooglePlaces();

        try{
            placeDetails=googlePlaces.getPlaceDetails(reference);
        }catch (Exception e){
            e.printStackTrace();
        }
        return null;
    }

} 
```

在 OnPostExecute 中，设置了变量 phone 并且我的 LogCat 显示了各个地方的电话号码。但是，当我在手机上转到 Map Activity 并单击餐厅的标记时，变量 phone 始终为空。我该如何解决？

任何帮助都会很棒。

提前致谢。

编辑：整个 MapActivity

公共类地图扩展 MapActivity{

```
MapView mapView;
MapController mc;
GeoPoint gp, fGP;
List<Overlay> mapOverlays;
OverlayItem oItem;
MyItemizedOverlay iOverlay;

String placeRef,phone,placePhone;
double latitude,longitude;
double user_lat,user_long;
double friendLat,friendLong;
String userName,friendName,userStatus,userPhoneNumber;

//Nearest Places
PlacesList nearPlaces;

GooglePlaces googlePlaces;

PlaceDetails placeDetails;

@Override
protected void onCreate(Bundle arg0) {
    // TODO Auto-generated method stub
    super.onCreate(arg0);
    setContentView(R.layout.map);

    mapView=(MapView) findViewById(R.id.mapView);
    mapView.setBuiltInZoomControls(true);

    mc=mapView.getController();

    Intent i=getIntent();

    if (i!=null)
    {
    //Receive User's Lat and Long   
    user_lat=i.getDoubleExtra("userLAT", 0);
    user_long=i.getDoubleExtra("userLONG",0);

    userPhoneNumber=i.getStringExtra("userNUMBER");

    //Get User's Status they posted
    userStatus=i.getStringExtra("STATUS");
    //Get User's Name
    userName=i.getStringExtra("userNAME");

    //Receive Friend's Lat and Long

    friendLat=i.getDoubleExtra("friendLAT", 0);
    friendLong=i.getDoubleExtra("friendLong",0);

    //Obtain nearPlaces List from Main Activity
    nearPlaces=(PlacesList) i.getSerializableExtra("userNearPlaces");

    friendName=i.getStringExtra("friendNAME");
    Log.d("Map", userName+ " " +user_lat + " " + user_long);
    Log.d("Map2", friendName+ " " + friendLat + " " + friendLat);
    gp=new GeoPoint((int)(user_lat*1E6),(int)(user_long*1E6));

    //Friend's GeoPoint
    fGP=new GeoPoint((int)(friendLat*1E6),(int)(friendLong*1E6));

    }

    mapOverlays=mapView.getOverlays();
    Drawable marker=this.getResources().getDrawable(R.drawable.you);

    iOverlay=new MyItemizedOverlay(marker, this);
    oItem=new OverlayItem(gp,"Your Location, "+userName,userStatus);

    iOverlay.addOVerlay(oItem);
    mapOverlays.add(iOverlay);

    Drawable fMarker=this.getResources().getDrawable(R.drawable.smiley);

    iOverlay=new MyItemizedOverlay(fMarker,this);

    //Add friend marker to the map
    oItem=new OverlayItem(fGP,friendName+"'s Location", "This is your friend");
    iOverlay.addOVerlay(oItem);
    mapOverlays.add(iOverlay);

    //Check for null nearPlaces
    if(nearPlaces.results!=null)
    {
        //Loop through all places
        for(Place place:nearPlaces.results)
        {

            latitude=place.geometry.location.lat;
            longitude=place.geometry.location.lng;
            placeRef=place.reference;
            placePhone=place.phone;

            new LoadDetails().execute(placeRef);

            for(String s:place.types)
            {
                if(s.contains("restaurant"))
                {
                    Drawable rMarker=this.getResources().getDrawable(R.drawable.restaurant);

                    //phone=lp.getPhone();
                    iOverlay=new MyItemizedOverlay(rMarker,this);

                    //GeoPoint to place on map
                    gp=new GeoPoint((int)(latitude*1E6),(int)(longitude*1E6));

                    //Map overlay item
                    oItem=new OverlayItem(gp, place.name, place.vicinity+"\n"+"Rating: "+place.rating+" "+placePhone);

                    iOverlay.addOVerlay(oItem);

                    iOverlay.addOVerlay(oItem);
                    mapOverlays.add(iOverlay);
                }

                if((s.contains("cafe"))||place.name.contains("cafe"))
                {
                    Drawable cafeMarker=this.getResources().getDrawable(R.drawable.cafe);

                    iOverlay=new MyItemizedOverlay(cafeMarker,this);
                    //GeoPoint to place on map
                    gp=new GeoPoint((int)(latitude*1E6),(int)(longitude*1E6));

                    //Map overlay item
                    oItem=new OverlayItem(gp, place.name, place.vicinity+"\n"+"Rating: "+place.rating);

                    iOverlay.addOVerlay(oItem);

                    iOverlay.addOVerlay(oItem);
                    mapOverlays.add(iOverlay);

                }

                else if((s.contains("liquor_store"))||place.name.contains("liquors"))
                {
                    Drawable barMarker=this.getResources().getDrawable(R.drawable.bar);

                    iOverlay=new MyItemizedOverlay(barMarker,this);
                    //GeoPoint to place on map
                    gp=new GeoPoint((int)(latitude*1E6),(int)(longitude*1E6));

                    //Map overlay item
                    oItem=new OverlayItem(gp, place.name, place.vicinity+"\n"+"Rating: "+place.rating);

                    iOverlay.addOVerlay(oItem);

                    iOverlay.addOVerlay(oItem);
                    mapOverlays.add(iOverlay);

                }

                else if(s.contains("department_store")||s.contains("clothing_store")||s.contains("convenience_store"))
                {
                    Drawable shopMarker=this.getResources().getDrawable(R.drawable.mall);

                    iOverlay=new MyItemizedOverlay(shopMarker,this);
                    //GeoPoint to place on map
                    gp=new GeoPoint((int)(latitude*1E6),(int)(longitude*1E6));

                    //Map overlay item
                    oItem=new OverlayItem(gp, place.name, place.vicinity+"\n"+"Rating: "+place.rating);

                    iOverlay.addOVerlay(oItem);

                    iOverlay.addOVerlay(oItem);
                    mapOverlays.add(iOverlay);

                }

                else if(s.contains("hospital"))
                {
                    Drawable hMarker=this.getResources().getDrawable(R.drawable.hospital);

                    iOverlay=new MyItemizedOverlay(hMarker,this);
                    //GeoPoint to place on map
                    gp=new GeoPoint((int)(latitude*1E6),(int)(longitude*1E6));

                    //Map overlay item
                    oItem=new OverlayItem(gp, place.name, place.vicinity+"\n"+"Rating: "+place.rating);

                    iOverlay.addOVerlay(oItem);

                    iOverlay.addOVerlay(oItem);
                    mapOverlays.add(iOverlay);

                }

                else if(s.contains("movie_theater"))
                {
                    Drawable movieMarker=this.getResources().getDrawable(R.drawable.movierental);

                    iOverlay=new MyItemizedOverlay(movieMarker,this);
                    //GeoPoint to place on map
                    gp=new GeoPoint((int)(latitude*1E6),(int)(longitude*1E6));

                    //Map overlay item
                    oItem=new OverlayItem(gp, place.name, place.vicinity+"\n"+"Rating: "+place.rating);

                    iOverlay.addOVerlay(oItem);

                    iOverlay.addOVerlay(oItem);
                    mapOverlays.add(iOverlay);

                }

                else if(s.contains("pharmacy"))
                {
                    Drawable pMarker=this.getResources().getDrawable(R.drawable.pharmacy);

                    iOverlay=new MyItemizedOverlay(pMarker,this);
                    //GeoPoint to place on map
                    gp=new GeoPoint((int)(latitude*1E6),(int)(longitude*1E6));

                    //Map overlay item
                    oItem=new OverlayItem(gp, place.name, place.vicinity+"\n"+"Rating: "+place.rating);

                    iOverlay.addOVerlay(oItem);

                    iOverlay.addOVerlay(oItem);
                    mapOverlays.add(iOverlay);

                }
                else if(s.contains("hair_care"))
                {
                    Drawable bMarker=this.getResources().getDrawable(R.drawable.barber);

                    iOverlay=new MyItemizedOverlay(bMarker,this);
                    //GeoPoint to place on map
                    gp=new GeoPoint((int)(latitude*1E6),(int)(longitude*1E6));

                    //Map overlay item
                    oItem=new OverlayItem(gp, place.name, place.vicinity+"\n"+"Rating: "+place.rating);

                    iOverlay.addOVerlay(oItem);

                    iOverlay.addOVerlay(oItem);
                    mapOverlays.add(iOverlay);

                }

            }

        }
    }

    mapView.getController();

    mc.animateTo(gp);
    mc.setZoom(15);
    mc.setCenter(gp);

    mapView.invalidate();
}

@Override
protected boolean isRouteDisplayed() {
    // TODO Auto-generated method stub
    return false;
}

private class LoadDetails extends AsyncTask<String, String, String>
{
    @Override
    protected void onPostExecute(String result) {
        placePhone=result;

                    //My Logcat shows phone numbers being assigned to placePhone
        Log.d("placePhone",placePhone); 

    }

    @Override
    protected String doInBackground(String... params) {

        String reference=params[0];
        googlePlaces=new GooglePlaces();

        try{
            placeDetails=googlePlaces.getPlaceDetails(reference);
        }catch (Exception e){
            e.printStackTrace();
        }
        if(placeDetails!=null)
        {
            if(placeDetails.status.equals("OK"))
            {
                if(placeDetails.result!=null)
                {
                    phone=placeDetails.result.formatted_phone_number;

                }
            }
        }
        return phone;
    }

}

private class MyItemizedOverlay extends ItemizedOverlay<OverlayItem>
{
    private ArrayList<OverlayItem> mOverlays=new ArrayList<OverlayItem>();
    Context mContext;

    public MyItemizedOverlay(Drawable marker) {
        super(boundCenterBottom(marker));
    }

    public MyItemizedOverlay(Drawable marker,Context context) {
        super(boundCenterBottom(marker));
        mContext=context;
    }

    @Override
    protected OverlayItem createItem(int i) {
        return mOverlays.get(i);
    }

    @Override
    public int size() {
        return mOverlays.size();
    }

    public void addOVerlay(OverlayItem overlay)
    {
        mOverlays.add(overlay);
        populate();
    }

    @Override
    public boolean onTap(int i) {

        OverlayItem item= mOverlays.get(i);
        AlertDialog.Builder dialog = new AlertDialog.Builder(mContext);
        dialog.setTitle(item.getTitle());
        dialog.setMessage(item.getSnippet());

        if(item.getTitle().contains("Location"))
        {
        dialog.setNegativeButton("Send SMS", new OnClickListener() {

            public void onClick(DialogInterface dialog, int which) {
                Intent smsIntent=new Intent(Intent.ACTION_SENDTO);
                smsIntent.addCategory(Intent.CATEGORY_DEFAULT);
                smsIntent.setType("vnd.android-dir/mms-sms");
                smsIntent.setData(Uri.parse("sms:"+userPhoneNumber));
                startActivity(smsIntent);

            }
        });

        dialog.setPositiveButton("Call", new OnClickListener() {

            public void onClick(DialogInterface dialog, int which) {
                String uri="tel:"+userPhoneNumber.trim();
                Intent callIntent=new Intent(Intent.ACTION_CALL);
                callIntent.setData(Uri.parse(uri));
                startActivity(callIntent);

            }
        });
        }
        dialog.show();

        return true;
    }

} 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-25T06:14:40.897

```
oItem=new OverlayItem(gp, place.name, place.vicinity+"\n"+"Rating: "+place.rating+" "+ place.formatted_phone_number); 
```

试试这个地方。formatted_phone_number

# c# - 获取满足条件的集合项索引的哪种方法更好？

> ID：14028129
> 
> 赞同：1
> 
> 时间：2012-12-25T06:01:47.127
> 
> 标签：c#, linq, collections

假设我有一个字符串集合。

```
List<string> lines = new List<string>(File.ReadAllLines("Test.txt")); 
```

以及用于在该集合中搜索匹配项的正则表达式：

```
Regex r = new Regex(@"some regular expression"); 
```

我怎样才能得到元素的索引，匹配正则表达式？

我有三个想法。

* * *

第一个：

```
var indeces1 = lines.Where(l => r.IsMatch(l))
                    .Select(l => lines.IndexOf(l));
foreach (int i in indeces1)
{
    Console.WriteLine(i);//Do the index-based task instead...
} 
```

我不喜欢它的是`IndexOf`在原始集合上使用。我错了吗，没关系？

* * *

```
var indeces2 = lines.Select((l, i) => new { Line = l, Index = i })
                    .Where(o => r.IsMatch(o.Line));

foreach (var o in indeces2)
{
    Console.WriteLine(o.Index);//Do the index-based task instead...
} 
```

它似乎比第一个更好，但是有没有办法在不创建匿名对象的情况下做同样的事情？

* * *

最后一个：

```
for (int i = 0; i < lines.Count; i++)
{
    if (r.IsMatch(lines[i]))
    {
        Console.WriteLine(i);//Do the index-based task instead...
    }
} 
```

实际上我现在有这个工作。但是因为我确实喜欢 LINQ，所以我希望有一种 LINQ 方式来做同样的事情。

那么有没有更好的 LINQ 方法来完成这个简单的任务呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-25T06:06:52.277

如果你喜欢 LINQ，你可以使用[Enumerable.Range](http://msdn.microsoft.com/en-us/library/system.linq.enumerable.range.aspx)更简单：

```
var indexes = Enumerable.Range(0, lines.Count)
                        .Where(i => r.IsMatch(lines[i])); 
```

**编辑：**

而不是使用`File.ReadAllLines`将所有行放入内存：

```
List<string> lines = new List<string>(File.ReadAllLines("Test.txt")); 
```

如果您的文件很大，您应该考虑使用[`ReadLines`](http://msdn.microsoft.com/en-us/library/dd383503.aspx)延迟执行以提高效率：

```
var lines = File.ReadLines("C:\\Test.txt")); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-25T06:17:46.663

如果您只需要索引，那么为什么不尝试 .Select(t => t.Index); 在您的选项 2\. *（最后）*仅获取 IEnumerable 索引。您将摆脱 Anonymous 对象。

所以你的查询是：

```
var indeces2 = lines.Select((l, i) => new { Line = l, Index = i })
        .Where(o => r.IsMatch(o.Line))
        .Select(t => t.Index); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-25T06:19:09.363

在这种情况下，我会使用您不起眼的迭代器版本：

```
for (int i = 0; i < lines.Count; i++)
{
    if (r.IsMatch(lines[i]))
    {
        Console.WriteLine(i);//Do the index-based task instead...
    }
} 
```

对于这种情况，与选项 3 相比，LINQ 并没有真正减少行数并增加可读性。所以在这种情况下，我会选择最简单的版本。

# c++ - 打开 MPI“你好，世界！” 没有编译

> ID：14028136
> 
> 赞同：11
> 
> 时间：2012-12-25T06:02:45.803
> 
> 标签：c++, g++, mpi

这是一个简单的 MPI “Hello, World!” 程序。

```
#include <stdio.h>
#include <mpi.h>

int main(int argc, char **argv)
{
   int size, rank;
   MPI_Init(&argc, &argv);
   MPI_Comm_size(MPI_COMM_WORLD, &size);
   MPI_Comm_rank(MPI_COMM_WORLD, &rank);
   printf("SIZE = %d RANK = %d\n",size,rank);
   MPI_Finalize();   
   return(0);
} 
```

但是，它似乎没有编译：

```
Undefined                       first referenced
 symbol                             in file
MPI::Datatype::Free()               /var/tmp//ccE6aG2w.o
MPI::Win::Free()                    /var/tmp//ccE6aG2w.o
MPI::Comm::Comm()                   /var/tmp//ccE6aG2w.o
ld: fatal: symbol referencing errors. No output written to main
collect2: ld returned 1 exit status 
```

我用谷歌搜索了很多，查看了数千个邮件列表。他们说`libmpi_cxx`没有链接。但它在编译器标志中。

这是`--showme`数据：

```
mpic++ --showme:compile
-I/usr/openmpi/ompi-1.5/include -I/usr/openmpi/ompi-1.5/include/openmpi

mpic++ --showme:link
-R/opt/mx/lib -R/usr/openmpi/ompi-1.5/lib -L/usr/openmpi/ompi-1.5/lib -lmpi -lopen-rte -lopen-pal -lnsl -lrt -lm -ldl -lsocket -lmpi_cxx 
```

我的编译器是 g++。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-12-25T09:19:22.577

只需将**mpi.h**头文件放在所有头文件之上，有时会导致编译问题

我不确定你如何执行你的代码。编译

```
mpic++ your_code_file.c 
```

执行

```
mpirun -np <no. of Processors> ./a.out 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-27T21:03:16.090

A few notes:

1.  Note that Open MPI 1.5 is ancient. Please upgrade to the latest version in the Open MPI 1.6.x series (which is currently 1.6.3, but note that the www.open-mpi.org web site is currently undergoing a planned year-end maintenance and won't be back up until later today, Thursday, December 28, 2012).

2.  I'm curious: why are you compiling a C program with mpic++? You only need to use mpicc -- the C MPI wrapper compiler. That would definitely avoid your issue. However, if you are using this small C hello world program as a simple example and your actual target is to compile a C++ MPI program, then mpic++ is the correct wrapper to try (even with a simple C program). If that's the case, then you have some kind of incompatibility / misconfiguration between your C++ compiler and the C++ compiler that Open MPI was compiled/installed with.

3.  Looking at your mpic++ --showme output, it looks like you have some kind of package distribution of Open MPI -- -R is not put in the flags by default, for example. Where did you get this Open MPI installation? It's quite possible that it is not (fully) compatible with your g++ installation (e.g., if it was compiled with a different version of g++).

4.  That being said, your mpic++ --showme output is also weird in that it lists -lmpi_cxx at the *end* of the line. It should be to the *left* of -lmpi, not to the *right* of it. I'm not show how your installation got borked like that, but that is another possible cause.

So to sum up, my answer is:

1.  Please try upgrading Open MPI and see if the problem goes away.
2.  Double check that your installation of Open MPI is compatible with your system.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-25T09:41:05.307

在“Eclipse for Parallel Application Developers”IDE 中编译 openmpi 和 mpi 程序也更加容易和灵活。

[http://www.eclipse.org/downloads/packages/eclipse-parallel-application-developers/junosr1](http://www.eclipse.org/downloads/packages/eclipse-parallel-application-developers/junosr1)

# javascript - 在 img 标签中上传图片

> ID：14028141
> 
> 赞同：6
> 
> 时间：2012-12-25T06:04:02.907
> 
> 标签：javascript, html, css, file-upload, image

祝大家圣诞快乐。

我有 4 个部分，每个部分包含一个空的 img 标签。上传图像时，它必须适合相应的部分。

当我单击“在第 1 部分中添加图像”并上传图像时，它必须像所有四个一样在 Image_1 div 中修复。但是当我在我的代码中插入点击功能时它不起作用。

我的错误是什么。

```
<div class="pre_img" >
  <span>
     <img class="prw_img"  src="http://www.iconshock.com/img_jpg/REALVISTA/general/jpg/128/preview_icon.jpg" alt="your image" />
  </span> 
</div>

<input id="file" type="file" name="files[]" onChange="readURL(this);" />

<div id="Image_1">
    <button> AddImage to section 1</button>
    <img id="img_1" alt="" width="100px" height="100px" style="Border 1px solid #ccc"/>
</div>

<div id="Image_2">
    <button> AddImage to section 2</button>
    <img id="img_2" alt="" width="100px" height="100px" style="Border 1px solid #ccc"/>
</div>

<div id="Image_3">
    <button> AddImage to section 3</button>
    <img id="img_3" alt="" width="100px" height="100px" style="Border 1px solid #ccc"/>
</div>

<div id="Image_4">
    <button> AddImage to section 4</button>
    <img id="img_4" alt="" width="100px" height="100px" style="Border 1px solid #ccc"/>
</div> 
```

这是我的脚本

```
function readURL(input) {
     if (input.files && input.files[0]) {
           var reader = new FileReader();

           reader.onload = function (e) {
                $('.prw_img,#img_1').attr('src', e.target.result).width(112).height(112);
                $('#img_1').css('display','inline');
           };
           reader.readAsDataURL(input.files[0]);
     }
} 
```

为了便于理解，我制作了一个[JSBIN](http://jsbin.com/imonub/3/)我没有添加点击并尝试添加该功能，然后整个脚本无法正常工作

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-25T06:37:54.213

给图像部分一个类，或者将它们包含在一个容器中以使事件侦听器更易于处理

HTML：

```
 <div class="pre_img">
    <span><img class="prw_img" src=
    "http://www.iconshock.com/img_jpg/REALVISTA/general/jpg/128/preview_icon.jpg" alt=
    "your image"></span>
  </div>

  <form>
    <input id="file" type="file" name="files[]" onchange="readURL(this);">
  </form>

  <div id="Image_1" class="imageSection"><button>AddImage to section 1</button> <img id=
  "img_1" alt="" width="100px" height="100px" style="Border 1px solid #ccc" name=
  "img_1"></div>

  <div id="Image_2" class="imageSection"><button>AddImage to section 2</button> <img id=
  "img_2" alt="" width="100px" height="100px" style="Border 1px solid #ccc" name=
  "img_2"></div>

  <div id="Image_3" class="imageSection"><button>AddImage to section 3</button> <img id=
  "img_3" alt="" width="100px" height="100px" style="Border 1px solid #ccc" name=
  "img_3"></div>

  <div id="Image_4" class="imageSection"><button>AddImage to section 4</button> <img id=
  "img_4" alt="" width="100px" height="100px" style="Border 1px solid #ccc" name=
  "img_4"></div> 
```

然后使用以下脚本将上传的图像显示到一个类[在本例中为`activeImage`类]，并将侦听器绑定到切换“活动”容器的按钮

JS：

```
$(".imageSection button").click(function() {
    $(".imageSection img").removeClass("activeImage");
    $(this).parent().find("img").addClass("activeImage");
});
$(".imageSection:eq(0) img").addClass("activeImage");

function readURL(input) {
    if (input.files && input.files[0]) {
        var reader = new FileReader();

        reader.onload = function(e) {
            $('.prw_img,.activeImage').attr('src', e.target.result).width(112).height(112);

            $('.activeImage').css('display', 'inline');
        };

        reader.readAsDataURL(input.files[0]);
    }
} 
```

JsBin：http: [//jsbin.com/imonub/8/edit](http://jsbin.com/imonub/8/edit)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-25T06:38:12.017

试试这个：http: [//jsbin.com/imonub/7/edit](http://jsbin.com/imonub/7/edit)

```
var id = '1'; // set default id for first img tag

function readURL(input) {
 if (input.files && input.files[0]) {
    var reader = new FileReader();

    reader.onload = function(e) {
        $('.prw_img').attr('src', e.target.result).width(112).height(112);

        $('#img_' + id).attr('src', e.target.result).width(112).height(112);
        $('#img_' + id).css('display', 'inline');
    };

    reader.readAsDataURL(input.files[0]);
 }
}
$(document).ready(function() {
$('button').click(function() {
    id = $(this).html().replace('AddImage to section', '').trim();
});
});​ 
```

# jquery - 将拖放文件附加到输入或将其转换为 Base64

> ID：14028142
> 
> 赞同：0
> 
> 时间：2012-12-25T06:04:05.537
> 
> 标签：jquery, html, fileapi

我有一个如何使用 HTML5 文件 API 拖放和预览图像的工作示例（[带有 jquery 的 html5 的文件 api 示例？](https://stackoverflow.com/questions/4722500/html5s-file-api-example-with-jquery)）。我的兴趣是创建一个使用 AJAX 回传到服务器的图像上传表单。

我有兴趣知道的是，如果有一种方法可以将拖放文件附加到`

或者...

是否可以将文件转换为 Base64 并将其附加到隐藏的输入字段？

我对跨浏览器支持不感兴趣，我现在听到这个词都感到恶心:(。

我对 jQuery 和 JS 很陌生，所以如果你能用一点信息解释一下，那将是一个加分项。

# javascript - 在javascript中将整数数组转换为字符串

> ID：14028148
> 
> 赞同：8
> 
> 时间：2012-12-25T06:05:56.920
> 
> 标签：javascript, utf-8

这是php代码：

```
$arr=array(228,184,173,230,150,135,99,104,105,110,101,115,101);
$str='';
foreach ($arr as $i){
    $str.=chr($i);
}
print $str; 
```

输出是：`中文chinese`

这是javascript代码：

```
var arr=[228,184,173,230,150,135,99,104,105,110,101,115,101];
var str='';
for (i in arr){
    str+=String.fromCharCode(arr[i]);
}
console.log(str); 
```

输出是：`ä¸­æchinese`

那么我应该如何在javascript中处理数组呢？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-12-25T06:24:44.367

JavaScript 字符串由[UTF-16](https://en.wikipedia.org/wiki/UTF-16)代码单元组成，但数组中的数字是[UTF-8](https://en.wikipedia.org/wiki/UTF-8)字符串的字节。这是转换字符串的一种方法，它使用[decodeURIComponent()](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/decodeURIComponent)函数：

```
var i, str = '';

for (i = 0; i < arr.length; i++) {
    str += '%' + ('0' + arr[i].toString(16)).slice(-2);
}
str = decodeURIComponent(str); 
```

以传统方式执行 UTF-8 到 UTF-16 的转换可能更有效，但需要更多代码。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2015-01-04T10:11:31.940

```
var arry = [3,5,7,9];
console.log(arry.map(String)) 
```

结果将是`['3','5','7','9']`

```
var arry = ['3','5','7','9']
console.log(arry.map(Number)) 
```

结果将是`[3,5,7,9]`

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-05-17T12:07:17.663

另一种不`decodeURIComponent`包含最多 3 个字节 (U+FFFF) 的字符的解决方案。该函数假定字符串是有效的 UTF-8，没有太多的错误检查......

```
function atos(arr) {
    for (var i=0, l=arr.length, s='', c; c = arr[i++];)
        s += String.fromCharCode(
            c > 0xdf && c < 0xf0 && i < l-1
                ? (c & 0xf) << 12 | (arr[i++] & 0x3f) << 6 | arr[i++] & 0x3f
            : c > 0x7f && i < l
                ? (c & 0x1f) << 6 | arr[i++] & 0x3f
            : c
        );

    return s
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2017-07-26T22:22:01.020

这些天似乎最好的方法如下：

```
function bufferToString(arr){
    return arr.map(function(i){return String.fromCharCode(i)}).join("")
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-12-25T06:33:52.867

中文字符集具有不同的编码，其中一个字符的长度超过一个字节。当你这样做时

```
for (i in arr){
    str+=String.fromCharCode(arr[i]);
} 
```

您正在将每个字节转换为 char（实际上是字符串）并将其添加到字符串 str。您需要做的是，将字节打包在一起。

我将您的数组更改为此，它对我有用：

```
var arr=[20013,25991,99,104,105,110,101,115,101]; 
```

我从[这里](https://www.martineve.com/2007/05/23/string-fromcharcode-encoder/)得到了这些代码。

您还可以查看[此](https://codereview.stackexchange.com/questions/3569/pack-and-unpack-bytes-to-strings)内容以将字节打包到字符串中。

# grails - grails 2.2中的控制器继承

> ID：14028149
> 
> 赞同：4
> 
> 时间：2012-12-25T06:06:20.227
> 
> 标签：grails

我有一些代码试图从 Grails 1.3.7 移植到 Grails 2.2。

当前的问题是我有一个`BaseController`类，它定义了一些便利方法，以及从它继承的特定控制器（实际上由 Grails 实例化的控制器）。

```
package com.fxpal.querium

import grails.converters.JSON
import groovy.lang.Closure;

abstract class BaseController {

    protected def executeSafely(Closure c) {
        def resp = null
        try { 
            populateContext();
            resp = c() 
        }
        catch(Exception ex) {
            resp = [error: ex.message]
            ex.printStackTrace()
        }
        def json = resp as JSON
        return json
    }

    protected void populateContext() {

    }
} 
```

派生类的一个例子是

```
package com.fxpal.querium

import grails.converters.JSON
import grails.plugins.springsecurity.Secured
import javax.servlet.http.HttpServletResponse

@Secured(['IS_AUTHENTICATED_REMEMBERED'])
class DocumentController extends BaseController {

    def grailsApplication

    @Secured(['IS_AUTHENTICATED_ANONYMOUSLY'])
    def getText = {
        try {
            String text = new URL(grailsApplication.config.querium.docurl + params.paperId).text
            render contentType: 'text/plain', text: text            
        }
        catch(Exception ex) {
            render contentType: 'text/plain', text: "Error loading document: ${ex.getMessage()}; please retry"
        }
    }

...
} 
```

这在 Grails 1.3.7 中有效。当我尝试使用 Grails 2.2 编译我的应用程序时，我收到以下错误：

```
C:\code\querium\AppServer-grails-2\grails-app\controllers\com\fxpal\querium\DocumentController.groovy: -1: The return ty
pe of java.lang.Object getGrailsApplication() in com.fxpal.querium.DocumentController is incompatible with org.codehaus.
groovy.grails.commons.GrailsApplication getGrailsApplication() in com.fxpal.querium.BaseController
. At [-1:-1]  @ line -1, column -1. 
```

是否不再支持此模式？我尝试添加`abstract`声明`BaseController`（在 Grails 1.3.7 中没有必要），但这似乎没有任何区别。如果这很重要，我在清理后编译了我的代码。

PS：对于那些可以：请创建一个`grails-2.2`标签

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-12-25T11:22:44.723

删除`def grailsApplication`- 该字段已通过 AST 转换作为类型化字段 ( `GrailsApplication`) 添加到类字节码中，因此您的`def`字段创建第二个具有较弱类型 ( `Object`) 的 get/set 对。

# javascript - 如何从 JavaScript 'onclick window.open' 事件中抓取 URL？

> ID：14028152
> 
> 赞同：3
> 
> 时间：2012-12-25T06:07:15.257
> 
> 标签：javascript, ruby, screen-scraping, web-scraping, mechanize

我正在尝试从使用 JavaScript 的页面中抓取 URL。他们没有在页面上提供链接，而是`onClick`为许多表格行创建了事件，因此，当您单击该行时，它会将您带到链接。

我尝试使用 Mechanize 抓取 URL：

```
agent = Mechanize.new
page = agent.get(url)

page.links_with(:href => /^http?/).each do |link|
  puts link.href
end 
```

但是，通过 HREF 参考查找链接在这里不起作用，因为它们作为`onClick`事件的一部分在页面上：

```
<tr onclick="window.open('/someurl');"> 
```

有没有一种使用 Mechanize 或其他 gem 来解析页面上的代码并提取`onClick`事件中嵌入的 URL 的好方法？

如果没有好的开箱即用解决方案，那么最好的正则表达式可能是什么？我对正则表达式有点陌生，所以还不能自己拼凑一些东西。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-25T07:05:29.247

您应该使用解析器。正则表达式和 HTML/XML 不能很好地混合，因为正则表达式不是为处理 HTML 和 XML 文档包含的不规则而设计的。非常简单的任务可能适用于模式，但您很快就会发现它们很脆弱，并且在 HTML 更改时很容易被破坏。

Mechanize for Ruby 在内部使用[Nokogiri](http://nokogiri.org)，这是获取这些参数的绝佳方式。您可以访问 Mechanize 的内部 Nokogiri 文档，并从中找到`<tr>`标签：

```
require 'mechanize'

page = Mechanize.new
page = agent.get('http://somesite.foo.com')

page.search('tr[onclick]').map{ |n| n['onclick'][/\(['"]([^)]+)['"]\)/, 1] } 
```

如果我直接使用 Nokogiri 来解析这个片段：

```
<tr onclick="window.open('/someurl');"> 
```

我可以做这个：

```
require 'nokogiri'

page = Nokogiri::HTML(%[<tr onclick="window.open('/someurl');">])
page.search('tr[onclick]').map{ |n| n['onclick'][/\(['"]([^)]+)['"]\)/, 1] }
=> ["/someurl"] 
```

请注意，我正在使用 CSS 访问器进行搜索`'tr[onclick]'`，这使得查找特定节点变得非常容易。如果您了解 JavaScript、CSS 或 jQuery，您会发现使用 Nokogiri 内置的 CSS 支持非常容易上手。

还，

```
n['onclick'][/\(['"]([^)]+)['"]\)/, 1] 
```

可以交替写成：

```
n['onclick'][/\(([^)]+)\)/, 1][1..-2] 
```

# css - IE 中的 Dnn 菜单控件

> ID：14028155
> 
> 赞同：0
> 
> 时间：2012-12-25T06:07:23.653
> 
> 标签：css, dotnetnuke

我有一个 dnn 幻灯片菜单，我只在 IE 中遇到问题，只有一个子项仅在 IE 中不显示，当我检查元素时，IE 中的结构如下所示。，

```
<span style="vertical-align: middle; display: table-cell;" ?="" vertical-align:middle;="" display:table-cell;=""/> 
```

在火狐浏览器中是这样的

```
<span style="display:table-cell; vertical-align:middle; width:18px;"></span>
<span style="display:table-cell; vertical-align:middle; ">E-Participation</span> 
```

任何帮助，将不胜感激

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T04:23:47.423

最后通过更改相应的页面设置找到了解决方案，取消选中禁用的复选框，它工作正常。但我仍然不明白为什么它在 Firefox 中运行良好而在 IE7 中运行不正常

# javascript - 过滤小数字的 jqGrid 错误

> ID：14028156
> 
> 赞同：0
> 
> 时间：2012-12-25T06:07:31.000
> 
> 标签：javascript, jquery, jqgrid

圣诞节快乐！

我最近遇到了一个尝试使用 jqGrid 过滤小数字的错误。我正在过滤大小范围从 10 到 1 到 10^(-8) 或更小的数字。我发现它可以很好地过滤这些数字......直到它们变得小于 10^(-6)。

这个数字有什么有趣的地方？从我的控制台（Chrome）查看以下输出：

```
>e6=.000001
 0.000001
>e7=.0000001
 1e-7 
```

这是浏览器（或 JavaScript）开始使用科学记数法的时候。

没有进一步的告别，这是演示该错误的代码。

```
$(document).ready(function() {

    var smallnumbers = {
        values: [
            {value: 100, text: "100"},
            {value: 10, text: "10"},
            {value: 1, text: "1"},
            {value: .1,  text: "10^(-1)"},
            {value: .01, text: "10^(-2)"},
            {value: .001, text: "10^(-3)"},
            {value: .0001, text: "10^(-4)"},         
            {value: .00001, text: "10^(-5)"},
            {value: .000001, text: "10^(-6)"},   
            {value: .0000001, text: "10^(-7)"},   
            {value: .00000001, text: "10^(-8)"},   
            {value: .000000001, text: "10^(-9)"},   
            {value: .00000000001, text: "10^(-10)"},
        ]
    };

    var myfilter = {
        groupOp: "OR",
        rules: [
            {field: 'value', op: 'lt', data: 1}
        ]
    };

    var grid = $('#demo').jqGrid({
        datatype: 'local',
        colNames: ['Value', 'Text'],
        colModel: [
        {
            name: 'value',
            index: 'value',
            width: '100'
        },
        {
            name: 'text',
            index: 'text',
            width: 100
        }
        ],
        data: smallnumbers.values,
        width: 500,
        height: '100%',
        pager: '#pager',
        viewrecords: true,
        caption: 'Bug with filtering small numbers',
        search: true,
        postData: {
            filters: myfilter
        }
    });
}); 
```

JavaScript 能够对小于 10^(-6) 的数字执行分支语句，如下所示：

```
> if (e7 < 1) { console.log("This should appear"); }
This should appear
> if (e7 > 1) { console.log("This should not appear"); }
> 
```

但似乎 jqGrid 不是！

是什么赋予了？此错误的一种解决方法是将小数字向上舍入，只要边界始终大于它们四舍五入的值。但我仍然想知道发生了什么。是时候看看源代码了……

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T01:04:54.837

我们找到了解决方案：将 sorttype: 'float' 添加到 colModel 中的每一列。

# asp.net-mvc - 菜单导航和局部视图 Asp.Net MVC

> ID：14028159
> 
> 赞同：0
> 
> 时间：2012-12-25T06:08:30.920
> 
> 标签：asp.net-mvc, partial-views

我有一个水平菜单，它是视图之一内的部分视图，它在 RenderBody 部分内呈现，如此处所示。 ![在此处输入图像描述](../Images/e68383758538996e3474886d008de023.png)

我在部分视图（菜单）下方有一个 div 元素。当用户在不使用 Ajax 的情况下单击上面的导航链接时，是否可以使用不同的局部视图加载 div。是否可以使用 RenderAction 在 div 中加载局部视图？

或者有没有其他方法可以安排布局以使这成为可能？

**更新：** 我最终将部分视图菜单放在所有视图上。令我惊讶的是，当我在单击菜单后从一个视图导航到另一个视图时，菜单部分甚至没有闪烁。所以我想我会保留这种方法除非有人建议其他明智的。

谢谢 ！

# ios - 如何确定用户何时复制了文本

> ID：14028160
> 
> 赞同：2
> 
> 时间：2012-12-25T06:08:53.190
> 
> 标签：ios, copy, uimenucontroller

我很难弄清楚用户何时以默认的 iOS 方式选择并复制了文本：

![在此处输入图像描述](../Images/71df211c7d495a74d2242484d89d34ae.png)

`canPerformSelector`在呈现此菜单之前工作，但我有兴趣在用户按下复制按钮后知道。

谢谢你

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-25T06:19:23.823

`NSNotification`用作观察者，`UIPasteboardChangedNotification:`然后每次用户复制时，它将调用您在`Notification`观察者中指定的方法

像这样的东西

```
[[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(ClipBoardChanged) name:UIPasteboardChangedNotification object:nil];

-(void)ClipBoardChanged{
   NSLog(@"ClipBoard data changed %@",[UIPasteboard generalPasteboard].string);
 } 
```

# angularjs - 使用 Angular 的多个 *Window* 应用程序

> ID：14028161
> 
> 赞同：9
> 
> 时间：2012-12-25T06:09:07.143
> 
> 标签：angularjs

我们正在设计一个在多个浏览器窗口中运行的复杂网络应用程序。将使用 AngularJS

（注意它必须看起来/感觉像一个应用程序——只是它分布在多个浏览器窗口中）

只要父窗口保留对其他窗口的引用，Javascript 就允许父窗口引用其他窗口上的对象。这些对象可以通过本机访问器或例如 jQuery 访问。

多窗口应用程序是以前用 Angular 完成的吗？如何将这样的应用程序构建为可扩展的？

（我已经看到了大型[“angular-app”参考应用程序](https://github.com/angular-app/angular-app)，它是大型应用程序的模板（如果我只能让它工作的话！）但没有发现任何关于使用多个浏览器窗口的信息......

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-11T22:01:47.760

可能不是您正在寻找的答案，但根据我使用 AngularJS 的经验，您在 Angular 的反模式中寻找的似乎是什么。具体来说，角度在范围界定方面很重要——所以控制器和视图只会“知道”它自己的东西。同一页面或其他窗口等上的任何其他控制器/视图不一定会相互引用。相反，页面上的应用程序将有一个 $rootScope，它可以用作带有 $emit()、on$() 的消息总线。

因此，也许可以将其视为具有集中消息总线的松散耦合部分，该消息总线可以确定哪些窗口获得了哪些事件。然后每个部分（应用程序/控制器/视图）只是响应这些事件。

注意：我们有一个测试应用程序，它通过在 iFrame 中托管每个 Angular 应用程序来模拟移动应用程序中的多个 UIWebView，并成功使用了这种方法。非常可组合，非常可测试。高温高压

# python - python列出复制是深拷贝还是浅拷贝，它是如何完成的？

> ID：14028164
> 
> 赞同：1
> 
> 时间：2012-12-25T06:09:36.257
> 
> 标签：python, list, shallow-copy, deep-copy

如何在 python 中为列表完成深度复制？

我对复制列表有点困惑。是使用浅拷贝还是深拷贝？另外，子列表的语法是什么？是`g=a[:]`吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-25T06:13:28.027

新列表是参考的副本。`g[0]`并且`a[0]`都引用同一个对象。因此这是一个浅拷贝。您可以看到该`copy`模块`deepcopy`递归复制容器的方法，但根据我的经验，这不是常见的操作。

从风格上讲，我更喜欢更明确`g = list(a)`地创建列表的副本，但创建完整的切片具有相同的效果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-25T06:15:38.760

从[Python Doc](http://docs.python.org/2/library/copy.html)你必须使用`copy.deepcopy(x)`

# afnetworking - AFNetworking 编译错误

> ID：14028168
> 
> 赞同：1
> 
> 时间：2012-12-25T06:10:36.397
> 
> 标签：afnetworking

我是 AFNetworking 的新手，之前我使用的是 ASIHTTPRequest，现在我想在 google 上进行大量研究后转向 AFNetworking。但是现在当我下载库并想查看示例项目时，我遇到了代码错误。

我刚刚编译，我得到了 13 个错误，请看下面的图片，任何帮助将不胜感激。![在此处输入图像描述](../Images/4fae56d90fdad0280d8f03fe92d24826.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-25T06:18:37.693

错误与 AFNetworking 无关，它是您示例项目中的 Post.m 文件。您是否在 Post.h 中声明了 text 和 user 属性？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-25T11:55:33.817

该示例应该可以正常运行，因为它作为 github 上 AFNetworking 脚本的一部分提供

这些是 AFNetworking 项目的需求说明 [https://github.com/AFNetworking/AFNetworking](https://github.com/AFNetworking/AFNetworking)

> AFNetworking 1.0 及更高版本需要 iOS 5.0 及更高版本，或 Mac OS 10.7（具有现代 Cocoa 运行时的 64 位）及更​​高版本。
> 
> 为了与 iOS 4.3 兼容，请使用最新的 0.10.x 版本。
> 
> 弧
> 
> AFNetworking 从 1.0 版本开始使用 ARC。
> 
> 如果您在非 arc 项目中使用 AFNetworking 1.0，则需要在所有 AFNetworking 源文件上设置 -fobjc-arc 编译器标志。相反，如果要添加 1.0 之前的 AFNetworking 版本，则需要设置 -fno-objc-arc 编译器标志。
> 
> 要在 Xcode 中设置编译器标志，请转到您的活动目标并选择“构建阶段”选项卡。现在选择所有 AFNetworking 源文件，按 Enter，插入 -fobjc-arc 或 -fno-objc-arc，然后“完成”以启用或禁用 AFNetworking 的 ARC。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-25T07:56:23.207

您需要将对象的属性定义为 unsafe_unretained/strong/weak/copy/retain/assign。

# python - python: 为什么是 getter & setter？如何快速设置属性？

> ID：14028169
> 
> 赞同：1
> 
> 时间：2012-12-25T06:10:50.673
> 
> 标签：python, setter, getter

> **可能重复：**
> [对 python 类使用“get 函数”有什么好处？](https://stackoverflow.com/questions/13852279/what-is-the-benefit-to-using-a-get-function-for-a-python-class)

我刚开始阅读 Python，但我想知道为什么 Python 需要 setter 和 getter？它已经有像属性一样的对象变量

考虑

```
class C(object):
    def _init_(self):
        self._x = None

    def get_x(self):
        return self._x

    def set_x(self, value):
        self._x = valu
    x = property(get_x, set_x) 
```

我们可以在这里使用 Cx = "value" 来做我们想做的事情吗？财产有什么好处？

顺便说一句，以这种方式创建属性/设置器/获取器对我来说很麻烦，有没有办法简化这个？喜欢

```
class C()
   has_attributes("x", "y", "z") 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-25T07:29:54.657

使用普通属性：

```
class C(object):
    def __init__(self):
        self.x = None 
```

*稍后*，如果有必要，可以将 x 更改为属性。“@property”的美妙之处在于它允许开发人员不使用 getter、setter 和“@property”。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-25T06:33:31.993

你可以使用 a`property`来获得你想要的：

```
class C(object):
    def _init_(self):
        self._x = None
    @property
    def x(self):
        return self._x

    @x.setter
    def x(self, value):
        self._x = value 
```

然后您可以使用通常的属性语法访问该属性：

```
c = C()
c.x = 10    #calls the setter
print(c.x)  #calls the getter 
```

使用属性而不是普通数据属性有一些原因：

*   您可以记录属性
*   您可以通过将其设为只读或检查设置的类型/值来控制对属性的访问
*   您不会破坏向后兼容性：如果某物是普通的实例属性，然后您决定将其转换为属性，则使用该属性的代码仍然可以工作。如果您使用 get/set 显式方法，则所有使用旧 API 的代码都必须更改
*   它比使用显式的 get/set 方法更具可读性。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-25T06:33:04.237

```
class C(object):
    def _init_(self):
        self._x = None

    def get_x(self):
        return self._x

    def set_x(self, value):
        self._x = value

    x = property(get_x, set_x) 
```

现在您可以透明地使用 cx = "foo" 和 set 并获取。

set 和 getter 的目的是不暴露类内部。

想象一下，在未来

```
self._x 
```

更改为

```
sql.save(id(self), value) 
```

和 get_x 到：

```
value= sql.sql(id(self))
return convertFromDbFormatToExpectedApiFormat(value) 
```

您只需要更改该类中的 getter 和 setter 代码，而不需要更改与其通信的所有类。

```
class C(object):
    def _init_(self):
        self.sql = DDBB()

    def get_x(self):
        dbregistry = self.sql.fetch(id(self))
        return convertFromDbFormatToExpectedApiFormat(dbregistry)

    def set_x(self, value):
        self.sql.save(id(self), value)

    x = property(get_x, set_x) 
```

# windows-8 - 我的 Windows 8 应用程序没有出现在其他商店中

> ID：14028170
> 
> 赞同：0
> 
> 时间：2012-12-25T06:10:56.243
> 
> 标签：windows-8, windows-store-apps, windows-store

我开发了一个**windows 8 游戏**，在其他商店找不到。

即使我更改了 Windows 应用商店应用程序的偏好……我的应用程序没有结果，我已经在 Dev Center - Windows 应用商店应用程序上检查了所有国家/地区的应用程序。

如何为我的应用添加法语描述和屏幕截图？

我不确定这是否是提出此类问题的正确地方。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-26T05:41:48.307

在您上传指定法语语言支持的应用程序包之前，无法添加法语元数据（如应用程序的描述和屏幕截图）。（这是[验证这一点的来源](http://social.msdn.microsoft.com/Forums/en-US/windowsstore/thread/340d3c3f-05a9-4342-b274-ee4d6a9ba7c4)。）

有关如何在您的应用程序中正确实现本地化支持，请参阅[这篇文章](http://blogs.msdn.com/b/jennifer/archive/2012/11/16/common-windows-store-certification-errors-6-5-app-must-be-localized.aspx)，其中解释了基础知识并提供了在一个地方编译的本地化资源。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-26T17:31:24.270

这是多语言支持的解决方案

如何使用多语言应用工具包 (Windows)：http: [//msdn.microsoft.com/en-us/library/windows/apps/jj569303.aspx](http://msdn.microsoft.com/en-us/library/windows/apps/jj569303.aspx)

# java - Java - 从列表中检索值

> ID：14028171
> 
> 赞同：-5
> 
> 时间：2012-12-25T06:10:58.537
> 
> 标签：java, string, list, arraylist

我在一个列表中添加了 3 个字符串（我应该称之为 ArrayList 吗？）并且不知道如何检索。

```
 String f1;
      String f2;
      String f3;
      f1="1";
      f2="2";
      f3="3";
      List<String[]> list = new ArrayList<String[]>();
      String[] e = new String[] {f1,f2,f3};
       list.add(e);
       System.out.println(list.get(0,1));
      for (int inT=0;inT<=list.size();inT++)
      {
          System.out.println(list.get(inT));
      } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-25T06:15:44.440

如果您只想添加一些项目并检索它们，则不需要将单独的数组存储在 ArrayList 中。List 表示数组列表而不是字符串列表。

你应该这样做，

```
String f1;
String f2;
String f3;
f1 = "1";
f2 = "2";
f3 = "3";
List<String> list = new ArrayList<String>();
list.add(f1);
list.add(f2);
list.add(f3);

for (String listItem : list) {
    System.out.println(listItem);
} 
```

# android - 创建多级列表视图应用程序

> ID：14028173
> 
> 赞同：0
> 
> 时间：2012-12-25T06:11:20.830
> 
> 标签：android, listview, hierarchy

所以这里是代码。它非常不言自明。我遇到的唯一问题是保留 int 级别的值。每次都输了。我需要保留价值，它会起作用。这是一张快照。它应该可以扩展到尽可能多的深度和每个级别的项目。

XML 代码：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
tools:context=".MainActivity" >

<ListView
    android:id="@+id/listView1"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:layout_alignParentLeft="true"
    android:layout_alignParentTop="true" >
</ListView>

</RelativeLayout> 
```

Java代码：

```
package com.example.kjkjsdkjdsjkdfs;

import android.app.ListActivity;
import android.content.Intent;
import android.os.Bundle;
import android.view.Menu;
import android.view.View;
import android.widget.ArrayAdapter;
import android.widget.ListView;

public class MainActivity extends ListActivity {
String categoryselected = "main";
public int level = 0;

@SuppressWarnings("null")
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    String[] array;
    Intent received = getIntent();
    // Setup as main ListView
    if (received == null || !received.hasExtra("array")) {
        array = new String[] { "1", "2", "3" };
    }

    // Setup as sub ListView
    else {
        array = received.getStringArrayExtra("array");

    }
    if(received != null || !received.hasExtra("level")) {
        level = received.getIntExtra("level", 0);
    }
    setListAdapter(new ArrayAdapter<String>(this, android.R.layout.simple_list_item_1, array));
}

@Override
protected void onListItemClick(ListView l, View v, int position, long id) {
    level = level + 1;
    Intent starting = new Intent(MainActivity.this, MainActivity.class);
    switch (level) {
    case 1:
        switch (position) {
        case 0:
            starting.putExtra("array", new String[] { "1a", "1b", "1c" });
            starting.putExtra("level", level);
            break;
        case 1:
            starting.putExtra("array", new String[] { "2a", "2b", "2c" });
            starting.putExtra("level", level);
            break;
        case 2:
            starting.putExtra("array", new String[] { "3a", "3b", "3c" });
            starting.putExtra("level", level);
            break;
        }

        break;

    case 2:
        switch (position) {
        case 0:
            starting.putExtra("array", new String[] { "1aa", "1ab" });
            starting.putExtra("level", level);
            break;

        }

        break;
    case 3:
        switch (position) {
        case 0:
            starting.putExtra("array", new String[] { "1aaa", "1aab" });
            starting.putExtra("level", level);
            break;
        }
        break;
    }

    startActivity(starting);

}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    // Inflate the menu; this adds items to the action bar if it is present.
    getMenuInflater().inflate(R.menu.activity_main, menu);
    return true;
}

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-25T07:40:56.200

**像这样更新**您的代码：

```
import android.app.ListActivity;
import android.content.Intent;
import android.os.Bundle;
import android.view.Menu;
import android.view.View;
import android.widget.ArrayAdapter;
import android.widget.ListView;

public class ListItems extends ListActivity {
    String categoryselected = "main";
    public int level = 0;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        String[] array;
        Intent received = getIntent();
        // Setup as main ListView
        if (received == null || !received.hasExtra("array")) {
            array = new String[] { "1", "2", "3" };
        }

        // Setup as sub ListView
        else {
            array = received.getStringArrayExtra("array");

        }
        if(received != null || !received.hasExtra("level")) {
            level = received.getIntExtra("level", 0);
        }
        setListAdapter(new ArrayAdapter<String>(this, android.R.layout.simple_list_item_1, array));
    }

    @Override
    protected void onListItemClick(ListView l, View v, int position, long id) {
        level = level + 1;
        Intent starting = new Intent(ListItems.this, ListItems.class);
        switch (level) {
        case 1:
            switch (position) {
            case 0:
                starting.putExtra("array", new String[] { "1a", "1b", "1c" });
                starting.putExtra("level", level);
                break;
            case 1:
                starting.putExtra("array", new String[] { "2a", "2b", "2c" });
                starting.putExtra("level", level);
                break;
            case 2:
                starting.putExtra("array", new String[] { "3a", "3b", "3c" });
                starting.putExtra("level", level);
                break;
            }

            break;

        case 2:
            switch (position) {
            case 0:
                starting.putExtra("array", new String[] { "1aa", "1ab" });
                starting.putExtra("level", level);
                break;

            }

            break;
        case 3:
            switch (position) {
            case 0:
                starting.putExtra("array", new String[] { "1aaa", "1aab" });
                starting.putExtra("level", level);
                break;
            }
            break;
        }

        startActivity(starting);

    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.activity_main, menu);
        return true;
    }

} 
```

# python - 在 Python 中定义函数列表

> ID：14028175
> 
> 赞同：5
> 
> 时间：2012-12-25T06:12:12.687
> 
> 标签：python, loops, lambda

> **可能的重复：**
> [Python lambdas 和作用域](https://stackoverflow.com/questions/1924214/python-lambdas-and-scoping)

我希望以下内容会生成一个包含 3 个取值 0、1 和 2 的常量函数的列表：

```
lis = []
for i in range(3):
    lis.append( lambda: i ) 
```

但它们最终都取值为 2。我希望深度复制能够解决问题，但它似乎不起作用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-26T01:28:08.137

@Boud 给出了一个很好的答案，解释了为什么你的代码不能像你期望的那样工作。`i`基本上，您必须在 lambda 引用它之前评估它的值。这是一个有点hacky的方法：

```
lis = []
for i in range(3):
    lis.append( lambda i=i: i ) 
```

这使用了 Python 的默认函数参数的值特性，例如在一个函数中可以这样写：

```
def f(i=10):
    return i 
```

现在，诀窍是参数的默认值存储在创建函数（方法，lambda 表达式）时。因此：

```
j = 10
def f(i=j):
    return i

j = 20
print( f(125) ) # no matter that j has been changed, the output is...
>>> 125 
```

同样的技巧也适用于 lambda。为了更清楚一点：

```
lis = []
for j in range(3):
    lis.append( lambda i=j: i )

# Calling the lambdas
print(lis[1]())
>>> 1 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-26T01:22:39.083

你循环以避免写这样的东西：

```
lis.append( lambda: 0 )
lis.append( lambda: 1 )
lis.append( lambda: 2 ) 
```

您的意图是编写返回常量整数的 lambda 函数。但是您正在定义和附加一个返回 object 的函数`i`。因此，3 个附加功能是相同的。

创建的函数背后的字节码返回`i`：

```
In [22]: import dis
In [25]: dis.dis(lis[0])
  3           0 LOAD_GLOBAL              0 (i)
              3 RETURN_VALUE        

In [26]: dis.dis(lis[1])
  3           0 LOAD_GLOBAL              0 (i)
              3 RETURN_VALUE        

In [27]: dis.dis(lis[2])
  3           0 LOAD_GLOBAL              0 (i)
              3 RETURN_VALUE 
```

调用这些函数中的任何一个都会返回示例代码中`i`的最新值：`2`

```
In [28]: lis[0]()
Out[28]: 2 
```

如果你删除`i`对象，你会得到一个错误：

```
In [29]: del i

In [30]: lis[0]()
---------------------------------------------------------------------------
NameError                                 Traceback (most recent call last)
<ipython-input-30-c9e334d64652> in <module>()
----> 1 lis[0]()

<ipython-input-18-15df6d11323a> in <lambda>()
      1 lis = []
      2 for i in range(3):
----> 3     lis.append( lambda: i )

NameError: global name 'i' is not defined 
```

* * *

一个解决方案可能是继续使用循环来编写带有您需要的常量的代码并实际运行该代码：

```
In [31]: lis = []
    ...: for i in range(3):
    ...:     exec 'lis.append( lambda: {} )'.format(i)
    ...: 
```

结果如下：

```
In [44]: lis[0]()
Out[44]: 0

In [45]: lis[1]()
Out[45]: 1

In [46]: dis.dis(lis[0])
  1           0 LOAD_CONST               1 (0)
              3 RETURN_VALUE        

In [47]: dis.dis(lis[1])
  1           0 LOAD_CONST               1 (1)
              3 RETURN_VALUE 
```

# c# - 设计从二叉树类继承的二叉搜索树类

> ID：14028178
> 
> 赞同：1
> 
> 时间：2012-12-25T06:12:42.220
> 
> 标签：c#, oop, data-structures, binary-tree, binary-search-tree

我正在 C# 中创建一个二叉搜索树类。我通过从二叉树类派生来创建该类，因为二叉搜索树是一种二叉树。所以我将在二叉树类中拥有大部分常用方法，并在二叉搜索树中共享它们。

现在：BinaryTree 类有两个方法“AddToLeft”和“AddToRight”方法，这两个方法必须能够在这个类之外访问，即在Main 方法中向二叉树添加节点。所以我把它们公开了。并且这两种方法也应该可以在二叉搜索树类（重用）中访问，以根据条件将节点添加到二叉搜索树。

但是现在由于 Insert 方法是二叉搜索树将节点插入 BST 的候选方法，但 AddToLeft 和 AddToRight 不是。所以这两种方法不应该暴露给我在 BST 对象上的二叉搜索树的客户端（外部世界）。如何设计这个类。？

我试过了：

1.  将这两种方法密封在二叉树类中，它没有帮助。
2.  在 base 中声明它们是 public 并在派生中声明它们。这也没有帮助，因为 public 不能在派生类中被继承为 protected。

请帮助设计课程。

```
public class BTNode
{
    public int data;
    public BTNode Left { get; set; }
    public BTNode Right { get; set; }
    public BTNode(int data)
    {
        this.data = data;
    }
}

public class BinaryTree
{
    public BTNode Root { get; set;}
    public BinaryTree() : this(null) { }
    public BinaryTree(BTNode node) { Root = node; }
    // this method common for its derived class too
    public void AddToLeft(BTNode current, BTNode node) 
    {
        current.Left = node;
    }

    // this method common for its derived class too
    public void AddToRight(BTNode current, BTNode node)
    {
        current.Right = node;
    }
}

public class BinarySearchTree : BinaryTree
{       
    public BinarySearchTree(int val)
    {
        Root = new BTNode(val);    
    }
    public void Insert(int val)
    {
        BTNode node = new BTNode(val);

        if (Root.data >= val)
            base.AddToLeft(Root, node); // I should be able to call this method here
        else
            base.AddToRight(Root, node); // I should be able to call this method here
    }
}

class Program
{
    static void Main(string[] args)
    {
        BinaryTree bt = new BinaryTree();
        BTNode root = new BTNode(3);
        BTNode node1 = new BTNode(4);
        BTNode node2 = new BTNode(7);

        bt.AddToLeft(root,node1); // i should be able to access this method here.
        bt.AddToLeft(root, node2); // i should be able to access this method here.

        BinarySearchTree bst = new BinarySearchTree(6);
        bst.Insert(4);
        bst.Insert(8);

        // This is the problem.
        // these two methods should not be visible on the bst object.
        // insertion to bst is done only through insert() method
        // but these two methods should be accessible inside the binarysearchtree class
        // to add the nodes.
        bst.AddToLeft(root,node1); // i should not access this method here on this object
        bst.AddToRight(root, node2); // i should not access this method here on this object
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-25T08:20:17.100

您在键入代码时尝试做的事情是矛盾的。您是说您的班级`BinaryTree`是`BinaryTree`.

我可能会做的不是派生自`BinaryTree`，而是拥有一个私有字段，该字段`BinaryTree`在您的`BinarySearchTree`类中保存 a 并公开您希望通过公共访问器公开的功能`BinaryTree`（因此`BinarySearchTree`不再是二叉树的一种类型，但仍然可以访问通过使用 a 的实例初始化的私有字段实现功能`BinaryTree`。）

我当然可以理解做`BinarySearchTree`一个类型的吸引力`BinaryTree`，但是你要么放弃这两种方法的封装，要么放弃基类型的分类。当您不提供与它相同的外部 API 时，您不能声称满足基本类型分类的要求。

如果您真的希望能够尝试像上面那样做事情，您可以覆盖您不希望客户使用的方法并`InvalidOperationException`从这些方法中抛出 s。但这不是很优雅，因为它在编译时对您没有帮助，只会在运行时抱怨，这不是谨慎的设计。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-25T11:05:24.337

尝试使用 AddToLeft 和 AddToRight 方法的 private 关键字而不是 public。因为私有方法只对基类可见。

谢谢

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-20T16:56:28.750

更多关于矛盾 - 这是一个形而上学问题：如果 BinaryTree 的定义是它必须能够执行左右加法，则 BinarySearchTree 不是 BinaryTree。如您所知，二叉树是一种*结构*，每个节点都有两个子节点。BinarySearchTree 不是 BinaryTree，而是*使用*BinaryTree 进行内部存储的基于键的排序列表。

第一个是结构，第二个是更高级别的结构，具有特定的内部存储结构和算法。BinarySearchTree 可能是 Dictionary 的最佳子类，其中 KeyType 是索引类型，ValueType 是存储在每个节点（可能是一个集合）的类型。您希望能够将带有键的元素添加到集合中，并稍后通过该键将它们拉回，并具有一些额外的好处（可能是排序遍历等）。那是一个字典扩展，而不是 BinaryTree 扩展，所以你将它包装起来的方法是要走的路，我会实现 IDictionary。

# javascript - 什么是一个好的 JavaScript 日历，可以随着时间的推移存储用户数据？

> ID：14028185
> 
> 赞同：-1
> 
> 时间：2012-12-25T06:13:59.320
> 
> 标签：javascript, html, mobile, calendar

我正在使用佣金计算器，想知道我如何获取用户输入的销售额并将其保存以返回 MTD/YTD 佣金金额？

我目前正在学习输入表单的 html/javascript，但现在我想知道如何将销售数据链接到一个不错的日历。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-25T06:18:02.790

你有两个主要方向：

1.  您可以将销售数据保存到中央服务器，以便用户可以从任何计算机登录和查看他们的信息，从而安全保存。

2.  您可以在本地存储（仅限现代浏览器）中将销售数据保存在本地计算机上。本地存储通常是持久的，但不能保证永远持续下去，它只存在于特定的本地计算机上。

如果这是一个重要的业务应用程序，我通常认为您会将数据保存到中央服务器，在这种情况下，您需要一个服务器和一个服务器端语言（可能是 PHP）和数据库（可能是 mySQL），您可以接收使用服务器端 Web 应用程序形成数据并安全地存储。您可能还需要创建一个登录系统，以便用户只能访问他们自己的数据。

# opencv - 矩阵 OpenCV 的大小

> ID：14028193
> 
> 赞同：143
> 
> 时间：2012-12-25T06:15:32.900
> 
> 标签：opencv, opencv-mat

我知道这可能非常初级，但我是 OpenCV 的新手。你能告诉我如何在 OpenCV 中获取矩阵的大小吗？我用谷歌搜索，我仍在搜索，但如果你们中的任何人知道答案，请帮助我。

大小为行数和列数。

有没有办法直接获得二维矩阵的最大值？

* * *

## 回答 #1

> 赞同：263
> 
> 时间：2012-12-25T06:29:06.153

```
cv:Mat mat;
int rows = mat.rows;
int cols = mat.cols;

cv::Size s = mat.size();
rows = s.height;
cols = s.width; 
```

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2014-02-23T07:19:46.740

请注意，除了行和列之外，还有许多通道和类型。当明确什么类型时，通道可以作为 CV_8UC3 中的额外维度，因此您可以将矩阵寻址为

```
uchar a = M.at<Vec3b>(y, x)[i]; 
```

所以基本类型元素的大小是 M.rows * M.cols * M.cn

要找到可以使用的最大元素

```
Mat src;
double minVal, maxVal;
minMaxLoc(src, &minVal, &maxVal); 
```

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2016-06-16T14:43:45.913

对于二维矩阵：

mat.rows – 二维数组中的行数。

mat.cols – 二维数组中的列数。

或者：C++：大小 Mat::size() const

该方法返回一个矩阵大小： Size(cols, rows) 。当矩阵大于 2 维时，返回的大小为 (-1, -1)。

对于多维矩阵，您需要使用

```
int thisSizes[3] = {2, 3, 4};
cv::Mat mat3D(3, thisSizes, CV_32FC1);
// mat3D.size tells the size of the matrix 
// mat3D.size[0] = 2;
// mat3D.size[1] = 3;
// mat3D.size[2] = 4; 
```

注意，这里 2 代表 z 轴，3 代表 y 轴，4 代表 x 轴。x、y、z 表示维度的顺序。x 索引变化最快。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2017-12-15T21:23:45.817

如果您使用的是 Python 包装器，那么（假设您的矩阵名称是**mat**）：

*   **mat.shape**为您提供一个类型为 [height, width, channels] 的数组

*   **mat.size**为您提供数组的大小

示例代码：

```
import cv2
mat = cv2.imread('sample.png')
height, width, channel = mat.shape[:3]
size = mat.size 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2016-10-20T06:06:14.577

一个完整的C++代码示例，可能对初学者有帮助

```
#include <iostream>
#include <string>
#include "opencv/highgui.h"

using namespace std;
using namespace cv;

int main()
{
    cv:Mat M(102,201,CV_8UC1);
    int rows = M.rows;
    int cols = M.cols;

    cout<<rows<<" "<<cols<<endl;

    cv::Size sz = M.size();
    rows = sz.height;
    cols = sz.width;

    cout<<rows<<" "<<cols<<endl;
    cout<<sz<<endl;
    return 0;
} 
```

# ruby - 服务器场和/或其他快速运行 ruby 脚本的解决方案

> ID：14028197
> 
> 赞同：1
> 
> 时间：2012-12-25T06:15:52.593
> 
> 标签：ruby, server-farm

我有一个 ruby​​ 脚本，它需要大约 5 个小时来处理我指定的 rmbp。问题：我们在 2 小时内需要它。

正在运行的代码是非线程安全的，它会从 xlsx 输入中输出一个 csv 文件。...我以前从未使用过服务器场，但我猜非线程安全的 ruby​​ 不完全是他们的东西（？）

简而言之，是否有任何类型的服务器场或服务或任何方式我可以在不到一两个小时的时间内处理一个需要 5 小时的 ruby​​ 脚本？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-26T00:10:06.103

我使用 Heroku 和[Sidekiq](http://sidekiq.org/)做了类似的事情。Heroku 为低成本计算提供[免费和迷你计划，Sidekiq gem 可以让您将工作分块给多个工作人员，让他们同时运行，从而更快地完成。](http://www.heroku.com/pricing#0-0)

你知道你的瓶颈在哪里吗？是 XLSX 文件的输入还是 CSV 的输出？如果是后者，请带入您的 XLSV 文件，并将其中的一部分分块发送给 Sidekiq 工作人员。

例如，您可以将 XLSX 文件拆分为 1000 行的块，然后

```
rows.each do |row|
  MySidekiqWorker.perform_async(row)
end 
```

您的 MySidekiqWorker 可能如下所示：

```
class MySidekiqWorker
  include Sidekiq::Worker

  def perform(row)
    # append processed data to CSV
  end
end 
```

您的工作人员完成了所有繁重的工作，并且几乎可以肯定，如果没有此类帮助，您的速度会比您的笔记本电脑快。

# java - JPA：为什么将注释应用于 getter 或字段

> ID：14028198
> 
> 赞同：5
> 
> 时间：2012-12-25T06:15:57.717
> 
> 标签：java, hibernate, jpa, annotations, jpa-2.0

为什么将 jpa 注释应用于字段或 getter 方法。如果我尝试在 setter 方法上应用注释，则编译器会生成错误。因为编译器忽略了 setter 方法的注释。他们背后的原因是什么？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-12-25T06:26:50.067

这就是它的指定方式。根据[JPA 规范](http://download.oracle.com/otndocs/jcp/persistence-2.0-fr-eval-oth-JSpec)：

> *   当使用基于字段的访问时，实体类的对象/关系映射注解注解实例变量，持久化提供者运行时直接访问实例变量。所有未使用 Transient 注解的非瞬态实例变量都是持久的。
> *   当使用基于属性的访问时，实体类的对象/关系映射注解注解 getter 属性访问器[7]，持久化提供者运行时通过属性访问器方法访问持久化状态。所有未使用 Transient 注释注释的属性都是持久的。
> *   映射注释不得应用于瞬态或瞬态的字段或属性。

你有两个选择。使用字段级注释或属性（getter 方法）注释。没有第三种选择。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-25T06:43:17.343

因为对于一个对象，只有两种方法可以访问属性，直接访问字段或间接访问 getter。

对于实体bean，注解指定如何将属性映射到列，而JPA需要访问实体的这些状态，所以我想这是直接将注解放在字段上或getter上的最直观的方式。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-25T06:18:18.613

当我们在 getter 上放注解时，JPA 通过 getter 访问属性。不需要在 setter 上放注解。

# php - PHP_CodeCoverage_Filter::getInstance() 运行 phpunit 时出错

> ID：14028200
> 
> 赞同：4
> 
> 时间：2012-12-25T06:16:24.217
> 
> 标签：php, zend-framework, phpunit, code-coverage

我已经在我的 ubuntu 11.10 中安装了 phpunit，它的 php 版本为 5.2.14。

但是当我运行我的测试模块时，它会抛出错误，

```
PHP Fatal error:  Call to undefined method PHP_CodeCoverage_Filter::getInstance() in /usr/share/php/PHPUnit/Autoload.php on line 64 
```

我按照这个堆栈问题中提到的步骤进行操作，但仍然没有运气。

[调用未定义的方法 PHP_CodeCoverage_Filter::getInstance()](https://stackoverflow.com/questions/9186000/call-to-undefined-method-php-codecoverage-filtergetinstance)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-26T05:44:38.813

以下步骤解决了我的问题。

```
sudo apt-get remove phpunit

sudo pear channel-discover pear.phpunit.de

sudo pear channel-discover pear.symfony.com

sudo pear channel-discover components.ez.no

sudo pear update-channels

sudo pear upgrade-all

sudo pear install --alldeps phpunit/PHPUnit

sudo pear install --force --alldeps phpunit/PHPUnit 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-25T08:30:17.277

一种解决方法 - 授予，不是真正的解决方案 - 是绕过 PEAR install 并通过[Composer install](http://getcomposer.org/doc/00-intro.md)使用本地副本。

在项目根目录中创建一个名为`composer.json`：

```
{
    "require": {
        "phpunit/phpunit" : "3.7.*"
    }
} 
```

当然，如果您有这样的要求，请将 phpunit 版本修改为“3.6.*”或类似的。

在项目根目录：

```
# Install composer
$ curl -s https://getcomposer.org/installer | php

# Tell composer to install the dependencies identified in composer.json
$ php composer.phar install

# Now you can invoke the *local* copy of phpunit
$ ./vendor/phpunit/phpunit/composer/bin/phpunit --version 
```

为简单起见，您可以创建指向 phpunit 可执行文件的符号链接。假设您想要一个名为的目录中的符号链接`tests`：

```
$ ln -s ./vendor/phpunit/phpunit/composer/bin/phpunit ./tests/phpunit 
```

然后你可以调用（从项目根目录）：

```
$ cd tests
$ ./phpunit --version 
```

更简单的是，您可以指示 Composer 为您处理符号链接。将此添加到您的`composer.json`：

```
"config": {
    "bin-dir": "tests"
} 
```

然后，像以前一样，您可以调用 as（从项目根目录）：

```
$ cd tests
$ ./phpunit --version 
```

实际上，我通常做的是有一个名为的项目级目录`scripts`并将我的作曲家指向`bin-dir`那里。然后我手动创建一个`tests`指向`scripts/phpunit`. 但这最后一步可能比任何要求都更符合个人品味。

仅仅解决 PEAR 问题可能还有很长的路要走，但我发现基于 Composer 的安装对我来说非常可靠。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-20T06:33:22.777

我的平台 Symfony 1.4 没有安装与最新 phpunit 版本兼容的最新版本插件。所以更新到最新版本的[https://github.com/JWT-OSS/sfJwtPhpUnitPlugin/](https://github.com/JWT-OSS/sfJwtPhpUnitPlugin/)对我有用。

# file - Lua加载文件找不到文件

> ID：14028205
> 
> 赞同：2
> 
> 时间：2012-12-25T06:17:32.633
> 
> 标签：file, lua, null, lua-loadfile

我有一些带有以下行的lua代码：

```
JSON = loadfile("JSON.lua")() 
```

文件 JSON.lua 与该行来自的 lua 代码位于同一目录中。这段代码为我工作了一段时间，然后，我没有更改 lua 源或 JSON.lua，或任何文件的权限，或运行 lua 代码的目录，我开始得到一个该行没有错误。（我只记得没有可能对 lua 代码产生任何影响的相关更改。）

添加断言表明错误是由未找到文件引起的。使用文件权限，重新启动我的机器并没有解决问题，并且撤回我已经签入并且运行良好的代码并没有解决错误。

我通过更改上面的行以提供该 JSON.lua 文件的绝对路径来解决错误。

有什么可以解释为什么没有绝对路径的代码可以工作一段时间然后停止工作？

注意：这种工作然后不工作的行为在一周内发生在我身上两次。我很困惑，虽然我现在找到了解决办法，但我真的很好奇这种间歇性行为的解释。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-26T00:13:45.410

Lua 使用[`package.path`](http://www.lua.org/manual/5.1/manual.html#pdf-package.path)，其默认值来自环境变量 LUA_PATH （如果已设置），作为要搜索的目录列表。你可以把`.`这个列表放在前面来从当前目录加载文件，或者你可以把你的文件放在一个路径列表中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-10-19T18:33:38.390

一个迟到的答案，因为我发现了完全相同的问题。

首先，与上一个答案相反，`loadfile`不使用`package.path`搜索路径。它只在指定的目录中查找。如果您不指定目录，它只会在“当前目录”中查找。我无法准确解释为什么它停止为您工作，但可能您的 Lua 代码以某种方式在与以前不同的“当前目录”运行。

有两种可能的解决方法：一种是指定`loadfile`.

```
JSON = loadfile("c:\\my_folder\\JSON.lua")() 
```

替代修复取决于您使用的特定库，我怀疑是[Jeffrey Friedl 的 Lua JSON lilbrary](http://regex.info/blog/lua/json)。因为它支持较新的 Lua 模块机制，所以您可以使用 加载 modulw `require`，它*确实*支持`package.path`搜索路径。

```
JSON = require("JSON") 
```

# ruby-on-rails - Ubuntu 上的新 Rails 项目

> ID：14028206
> 
> 赞同：0
> 
> 时间：2012-12-25T06:17:39.490
> 
> 标签：ruby-on-rails, command, rvm, ubuntu-12.04

我正在尝试运行我的第一个 Rails 项目，它是“hello world！” 但我认为有一些问题..

我已经通过 rvm 安装了 ruby​​、rails、apache、mysql。

我使用这些命令来启动我的项目

```
rails new hello 
```

这是输出：

```
 create  
      create  README.rdoc
      create  Rakefile
      create  config.ru
      create  .gitignore
      create  Gemfile
      create  app
      create  app/assets/images/rails.png
      create  app/assets/javascripts/application.js
      create  app/assets/stylesheets/application.css
      create  app/controllers/application_controller.rb
      create  app/helpers/application_helper.rb
      create  app/views/layouts/application.html.erb
      create  app/mailers/.gitkeep
      create  app/models/.gitkeep
      create  config
      create  config/routes.rb
      create  config/application.rb
      create  config/environment.rb
      create  config/environments
      create  config/environments/development.rb
      create  config/environments/production.rb
      create  config/environments/test.rb
      create  config/initializers
      create  config/initializers/backtrace_silencers.rb
      create  config/initializers/inflections.rb
      create  config/initializers/mime_types.rb
      create  config/initializers/secret_token.rb
      create  config/initializers/session_store.rb
      create  config/initializers/wrap_parameters.rb
      create  config/locales
      create  config/locales/en.yml
      create  config/boot.rb
      create  config/database.yml
      create  db
      create  db/seeds.rb
      create  doc
      create  doc/README_FOR_APP
      create  lib
      create  lib/tasks
      create  lib/tasks/.gitkeep
      create  lib/assets
      create  lib/assets/.gitkeep
      create  log
      create  log/.gitkeep
      create  public
      create  public/404.html
      create  public/422.html
      create  public/500.html
      create  public/favicon.ico
      create  public/index.html
      create  public/robots.txt
      create  script
      create  script/rails
      create  test/fixtures
      create  test/fixtures/.gitkeep
      create  test/functional
      create  test/functional/.gitkeep
      create  test/integration
      create  test/integration/.gitkeep
      create  test/unit
      create  test/unit/.gitkeep
      create  test/performance/browsing_test.rb
      create  test/test_helper.rb
      create  tmp/cache
      create  tmp/cache/assets
      create  vendor/assets/javascripts
      create  vendor/assets/javascripts/.gitkeep
      create  vendor/assets/stylesheets
      create  vendor/assets/stylesheets/.gitkeep
      create  vendor/plugins
      create  vendor/plugins/.gitkeep
         run  bundle install --local
/usr/bin/ruby1.9.1: No such file or directory -- /usr/bin/bundle (LoadError) 
```

在最后一行，有一个错误。我的服务器也不能正常工作。我无法访问 localhost:3000

请帮助我，我正在为此工作 2 天 :)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-25T06:52:16.040

你已经安装了 ruby​​ 1.9.3。但它正在寻找 ruby​​ 1.9.1

所以，如果你想使用 1.9.1，那么使用 rvm 安装 ruby​​ 1.9.1。否则在创建项目之前键入以下命令。

```
 rvm use 1.9.3 
```

# java - 如何监控 Java 程序中变量的值？

> ID：14028208
> 
> 赞同：5
> 
> 时间：2012-12-25T06:17:46.423
> 
> 标签：java

假设我的 Java 代码中有几个循环。为了检查我的代码是否正确，我将所有必要的变量写在纸上，并想象代码在我的脑海中执行。我在纸上的每一步都记下了它们的价值。有时我还必须使用打印语句来发现错误。

是否有任何软件（我使用的 Eclipse IDE 的独立或插件）可以为我跟踪所有这些事情？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-25T06:27:19.880

这正是调试器的用途。抵制写入控制台或文件以跟踪这些值的冲动。

花一些时间学习如何正确使用调试器，将来您将花费大量时间使用它。

注意：我认为您本能地得出结论认为应该存在诸如调试器之类的工具是非常积极的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-25T06:21:32.183

如果您使用 Eclipse IDE，[请参阅此链接。](http://www.ibm.com/developerworks/library/os-ecbug/)

大多数情况下，所有 IDE 都有一个内置调试器，它允许您设置断点并逐行执行程序，查看每一步的变量值。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-25T06:22:01.297

这真的取决于你追求什么。如果你想调试不工作的代码，你可以像你一样使用 print 语句，或者用 Eclipse 启动调试器。这两种方法都有其优点和局限性。

如果您正在查看某些变量内容的统计信息，您可以使用[http://metrics.codahale.com](http://metrics.codahale.com)之类的工具。

圣诞节快乐。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-25T07:00:35.650

考虑一下`assert`声明。它将允许您在代码本身中指定您的知识。

请注意，它们必须在启动 JVM 时显式启用。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-25T06:20:14.850

在您的代码中放置一些调试点并调试应用程序。如果您使用的是 Eclipse IDE，请尝试使用调试器。

# lisp - Common Lisp 中的关键字是如何工作的？

> ID：14028209
> 
> 赞同：19
> 
> 时间：2012-12-25T06:17:59.067
> 
> 标签：lisp, common-lisp

问题不在于*使用*关键字，而实际上是关于关键字*实现*。例如，当我使用关键字参数创建一些函数并进行调用时：

```
(defun fun (&key key-param) (print key-param)) => FUN
(find-symbol "KEY-PARAM" 'keyword) => NIL, NIL   ;;keyword is not still registered
(fun :key-param 1) => 1
(find-symbol "KEY-PARAM" 'keyword) => :KEY-PARAM, :EXTERNAL 
```

如何使用关键字来传递参数？关键字是其值本身的符号，那么如何使用关键字来绑定对应的参数呢？

关于关键字的另一个问题——关键字用于定义包。我们可以定义一个用已经存在的关键字命名的包：

```
(defpackage :KEY-PARAM) => #<The KEY-PARAMETER package, 0/16 ...
(in-package :KEY-PARAM) => #<The KEY-PARAMETER package, 0/16 ...
(defun fun (&key key-param) (print key-param)) => FUN
(fun :KEY-PARAM 1) => 1 
```

系统如何区分`:KEY-PARAM`包名和函数参数名的用法？如果我们定义函数`KEY-PARAM`并导出它（实际上不是函数，而是名称），我们也可以让事情变得更复杂：

```
(in-package :KEY-PARAM)
(defun KEY-PARAM (&key KEY-PARAM) KEY-PARAM) => KEY-PARAM
(defpackage :KEY-PARAM (:export :KEY-PARAM))  
   ;;exporting function KEY-PARAM, :KEY-PARAM keyword is used for it
(in-package :CL-USER) => #<The COMMON-LISP-USER package, ...
(KEY-PARAM:KEY-PARAM :KEY-PARAM 1) => 1
   ;;calling a function KEY-PARAM from :KEY-PARAM package with :KEY-PARAM parameter... 
```

问题是一样的，Common Lisp 是如何区分`:KEY-PARAM`这里关键字的用法的呢？

如果有一些关于 Common Lisp 中关键字的手册并解释了它们的机制，如果您在此处发布链接，我将不胜感激，因为我只能找到一些仅关于关键字用法的简短文章。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-25T08:01:45.647

有关关键字参数的完整详细信息，请参阅[Common Lisp Hyperspec](http://www.lispworks.com/documentation/HyperSpec/Body/03_dad.htm)。请注意

```
(defun fun (&key key-param) ...) 
```

实际上是以下简称：

```
(defun fun (&key ((:key-param key-param)) ) ...) 
```

关键字参数的完整语法是：

```
((keyword-name var) default-value supplied-p-var) 
```

`default-value`并且`supplied-p-var`是可选的。虽然习惯上使用关键字符号作为`keyword-name`，但这不是必需的；如果只指定 a`var`而不是`(keyword-name var)`，则默认`keyword-name`为关键字包中与 . 同名的符号`var`。

因此，例如，您可以这样做：

```
(defun fun2 (&key ((myoption var))) (print var)) 
```

然后将其称为：

```
(fun 'myoption 3) 
```

它在内部工作的方式是当函数被调用时，它会逐步遍历参数列表，收集成对的参数`<label, value>`。对于每一个`label`，它会在参数列表中查找具有该参数的参数`keyword-name`，并将对应的绑定`var`到`value`。

我们通常使用关键字的原因是因为`:`前缀突出。并且这些变量已经进行了自我评估，因此我们不必也引用它们，即你可以写`:key-param`而不是`':key-param`（仅供参考，后一种表示法在早期的 Lisp 系统中是必要的，但 CL 设计者认为它很丑，而且多余的）。而且我们通常不会使用指定与变量名称不同的关键字的功能，因为这会造成混淆。这样做是为了完全通用。此外，允许常规符号代替关键字对于 CLOS 等工具很有用，其中参数列表被合并并且您希望避免冲突 - 如果您正在扩展通用函数，您可以添加关键字在您自己的包中的参数不会发生碰撞。

在定义包和导出变量时使用关键字参数再次只是一种约定。 `DEFPACKAGE`, `IN-PACKAGE`,`EXPORT`等只关心他们的名字，而不关心它在什么包里。你可以写

```
(defpackage key-param) 
```

它通常也可以正常工作。许多程序员不这样做的原因是因为它在他们自己的包中实习了一个符号，如果这个符号恰好与他们试图从另一个包中导入的符号同名，这有时会导致包冲突。使用关键字将这些参数从应用程序的包中分离出来，避免了这样的潜在问题。

底线是：当你使用一个符号并且你只关心它的名字而不是它的身份时，使用关键字通常是最安全的。

最后，关于以不同方式使用关键字时的区别。关键字只是一个符号。如果在函数或宏只需要普通参数的地方使用它，则该参数的值将是符号。如果您正在调用具有`&key`参数的函数，那是唯一一次将它们用作将参数与参数相关联的标签。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-25T08:05:19.830

好的手册是[PCL 的第 21 章](http://gigamonkeys.com/book/programming-in-the-large-packages-and-symbols.html)。

简要回答您的问题：

*   关键字是包中的导出**符号**`keyword`，因此您不仅可以将它们称为`:a`，还可以称为`keyword:a`

*   函数参数列表（称为`lambda-list`s）中的关键字可能以下列方式实现。在存在`&key`修饰符的情况下，`lambda`表单将扩展为类似于以下内容：

    ```
    (let ((key-param (getf args :key-param)))
      body) 
    ```

*   当您使用关键字命名包时，它实际上用作`string-designator`. 这是一个 Lisp 概念，它允许传递给某个处理字符串的函数，这些字符串稍后将用作符号（对于不同的名称：包、类、函数等），不仅是字符串，还有关键字和符号. 所以，定义/使用包的基本方法实际上是这样的：

    ```
    (defpackage "KEY-PARAM" ...) 
    ```

    但你也可以使用：

    ```
    (defpackage :key-param ...) 
    ```

    和

    ```
    (defpackage #:key-param ...) 
    ```

    （这里`#:`是一个读取器宏来创建不需要的符号；这种方式是首选方式，因为您不会在此过程中创建不需要的关键字）。

    后两种形式将转换为大写字符串。因此，关键字仍然是关键字，并且包将其命名为字符串，从该关键字转换而来。

总而言之，关键字具有自身的价值，以及任何其他符号。不同之处在于关键字不需要对`keyword`包或其显式使用进行显式限定。作为其他符号，它们可以作为对象的名称。例如，您可以使用关键字命名一个函数，它可以在每个包中“神奇地”访问 :) 有关详细信息，请参阅 @Xach 的博[文](http://xach.livejournal.com/301076.html)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-25T08:03:57.513

不需要“系统”来区分关键字的不同用途。它们只是用作名称。例如，想象两个 plist：

```
(defparameter *language-scores* '(:basic 0 :common-lisp 5 :python 3))
(defparameter *price* '(:basic 100 :fancy 500)) 
```

产生语言分数的函数：

```
(defun language-score (language &optional (language-scores *language-scores*))
  (getf language-scores language)) 
```

关键字与 一起使用时`language-score`，表示不同的编程语言：

```
CL-USER> (language-score :common-lisp)
5 
```

现在，系统如何区分关键字 in`*language-scores*`和 in `*price*`？绝对没有。关键字只是名称，在不同的数据结构中指定不同的事物。它们并不比自然语言中的同音异义词更显着——它们的使用决定了它们在给定上下文中的含义。

在上面的例子中，没有什么能阻止我们在错误的上下文中使用函数：

```
(language-score :basic *prices*)
100 
```

语言并没有阻止我们这样做，不那么花哨的编程语言和不那么花哨的产品的关键字是一样的。

有很多可能性可以防止这种情况发生：首先不允许可选参数 for `language-score`，放入`*prices*`另一个包而不将其外部化，关闭词法绑定而不是使用全局特殊`*language-scores*`，而只公开添加和检索条目的方法。也许仅仅我们对代码库或约定的理解就足以阻止我们这样做。重点是：系统区分关键字本身并不是实现我们想要实现的功能所必需的。

您询问的特定关键字使用没有什么不同：实现可能将关键字参数的绑定存储在 alist、plist、哈希表或其他任何东西中。在包名称的情况下，关键字仅用作包指示符，而包名称作为字符串（大写）可能仅用作代替。实现是否将字符串转换为关键字、关键字转换为字符串或内部完全不同的东西并不重要。重要的只是名称，以及在什么上下文中使用它。

# java - JSON XML 转换问题-空白

> ID：14028211
> 
> 赞同：1
> 
> 时间：2012-12-25T06:18:13.170
> 
> 标签：java, xml, json

我正在尝试使用 json lib-2.4.jar 将 json 字符串转换为 xml，但出现以下异常。

线程“main”中的异常 nu.xom.IllegalNameException：0x20 不是 nu.xom.Verifier.throwIllegalNameException 处的合法 NCName 字符（未知来源）

我已经确定了这个问题，因为 json 字符串的“位置”标签中有一个空格字符 (0x20)，并且它没有被正确解析。我已经删除了空间并测试了一次，然后它按预期工作。我还尝试了通过使用 StringEscapeUtils.escapeXml 和一些自定义方法来删除空格字符的不同方法，如下所示

```
StringBuffer s1 = new StringBuffer();
  for (char c : value.toCharArray()) {// value is the json string
    // System.out.println(c);
       s1.append(c);
       if (c == 0x20) {
       s1.append(" ");
        }
       } 
```

但这些方法都没有给出预期的结果。

我还在下面附加了 Json 字符串。

```
{
"ArticleList": [
{
"hash": "4b8e81ec1197aa071eb62238465e4cf4",
"data":{"twitter":{"id":"276992360028712960","text":"{James 2:13} Mercy triumphs over judgment.","source":"<a href=\"http://www.abcd.com\" rel=\"nofollow\">TweetCaster<\/a>","created_at":"Fri, 07 Dec 2012 10:11:39 +0000","user":{"id":12121,"location":"{GALATIANS 2:20}","friends_count":153,"description":"Drafter#Photographer","name":"Ervin","created_at":"Sat, 28 Jan 2012 00:26:08 +0000","screen_name":"E_doubleU","id_str":"476305028","statuses_count":1212,"lang":"en","followers_count":114}},"salience":{"content":{"sentiment":0}},"klout":{"score":31},"interaction":{"id":"1e240567d69faf80e","content":"{James 2:13} because Mercy triumphs over judgment.","schema":{"version":3},"author":{"id":4763,"username":"E_doubleU","link":"http://twitter.com/","name":"Ervin wooddruff","avatar":"http://a0.twimg.com/profile_images/2921703982/13ff21c643da6b748f279baee376f58c_normal.jpeg"},"source":"TweetCaster  Android","link":"http://twitter.com/","created_at":"Fri, 07 Dec 2012 10:11:39 +0000","type":"twitter"},"language":{"tag":"en","confidence":90},"demographic":{"gender":"male"}}}
]
} 
```

对此的任何帮助将是非常可观的

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-25T07:44:38.913

JSON 标记和 XML 标记中允许的字符存在一些不匹配。例如，空白在 JSON 标记中有效，但在 XML 标记中无效。因此，如果您需要提出一个通用的解决方案，您将不得不发明一些方法来通过转义序列表示 xml 标签中不允许的字符。

从您的问题中并不完全清楚，但我想问题是您实际上得到了类似于`..., " location":"{GALATIANS..."`JSON 字符串的东西，这是发件人中的一个问题，标签实际上应该只是“位置”。如果是这种情况，您可以使用该`java.lang.String.trim`方法去除前导和尾随空格。

# c++ - 添加两个文本框浮点值并需要显示在第三个文本框中

> ID：14028212
> 
> 赞同：0
> 
> 时间：2012-12-25T06:18:14.130
> 
> 标签：c++, visual-c++

我基本上是在尝试在 Visual Studio 2008 中编写一个基本的转换器，我有 3 个文本框，两个从用户那里获取输入，一个提供结果输出。

例如：

文本框 1：1.0000，
文本框 2：1.12，
文本框 1 值 + 文本框 2 值

我应该在文本框中显示 3:1.00001.12

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-25T07:49:18.547

这里是：

```
private: System::Void button1_Click(System::Object^  sender, System::EventArgs^  e) {
                 textBox3->Text = Convert::ToString(float::Parse(textBox1->Text) + float::Parse(textBox1->Text));
             } 
```

好好享受。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-25T06:46:12.417

我不是专家，但似乎你需要一个 concat。文本框必须有字符串而不是浮动，所以无论你在其中输入什么都是字符串，你只需要在那之后使用字符串 concat。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-28T12:34:36.080

```
float flowcal1 = 1.0001
float flowcal2 = 1.12

flow.Format(_T("%.4f%.2f"),flowcal1,flowcal2);

flow = 1.00011.12 
```

# android - android中的线程同步

> ID：14028222
> 
> 赞同：0
> 
> 时间：2012-12-25T06:19:30.447
> 
> 标签：android, multithreading, thread-synchronization

我有两个服务

1.  服务A
2.  服务乙
3.  服务中心

**服务 A 代码：**

```
public class ServiceA extends Service  {

    @Override
public IBinder onBind(Intent arg0) {
    return null;
}

@Override
public void onCreate() {
    super.onCreate();
    testfunction1();
            Thread1();

}

public synchronized void testfunction1(){
    Log.d("Thread","Hi I Am Test 1");
}

public void Thread1(){
    new Thread(new Runnable() {
        public void run() {
            while (true) {
                try {
                    Thread.sleep(5000);

                }catch (InterruptedException e) {
                    e.printStackTrace();
                }
                testfunction1();

            }
          }                        
        }).start();
}

@Override
public void onDestroy() {
    super.onDestroy();
} 
```

**服务 B 代码**

```
public class ServiceB extends Service  {

@Override
public IBinder onBind(Intent arg0) {
    return null;
}

@Override
public void onCreate() {
    super.onCreate();
    testfunction2();
            Thread2();
}

public synchronized void testfunction2(){
    Log.d("Thread","Hi I Am Test 2");
}

public void Thread2(){
    new Thread(new Runnable() {
        public void run() {
            while (true) {
                try {
                    Thread.sleep(5000);

                }catch (InterruptedException e) {
                    e.printStackTrace();
                }
                testfunction2();

            }
          }                        
        }).start();
}

@Override
public void onDestroy() {
    super.onDestroy();
} 
```

编辑：添加服务 3

```
**Service C Code**

    public class ServiceC extends Service  {

    @Override
    public IBinder onBind(Intent arg0) {
        return null;
    }

    @Override
    public void onCreate() {
        super.onCreate();
        Intent ServiceA = new Intent("ServiceA Package Name");
        this.startService(ServiceA);
        Intent ServiceB = new Intent("ServiceB Package Name");
        this.startService(ServiceB);
        ServiceA admin = new ServiceA();
        admin.Thread1();
        ServiceB security = new ServiceB();
        security.Thread2();
    }
} 
```

问题是当我运行这两个服务时

它将继续记录

线程你好我是测试 1

线程你好我是测试 1

线程你好我是测试 1

线程你好我是测试 1

线程你好我是测试 1

线程你好我是测试 1

为什么我没有收到 Service 2 日志？

# javascript - 使用 ajax（XmlHttpRequest 对象）将 xml 文件发布到服务器

> ID：14028223
> 
> 赞同：1
> 
> 时间：2012-12-25T06:20:02.957
> 
> 标签：javascript, xml, ajax, base64

我需要使用**XMLHTTPREQUEST**或 Microsoft Equivalent 从客户端浏览器向服务器发布一个长 xml 文件（例如 10 KB 大小）。如何使用ajax发布它？我应该在发送时进行 Base64 编码，因为数据更长（这样数据不会因任何错误而改变）吗？（如果是的话怎么做？）。我正在使用 Http POST 方法。有没有更好的方法？以下代码在 Firefox 中不起作用：

```
var postxmldata = function(xmldata, location, method, async, param) {
    var params = param+"="+xmldata;
    var http = initXml();
    if(!http) return;
    http.open("POST", location, async);
    http.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
    http.setRequestHeader("Content-length", xmldata.length);
    http.setRequestHeader("Connection", "close");
    http.onreadystatechange = function() {//Call a function when the state changes.

        if(http.readyState == 4 && http.status == 200) {
            alert(http.responseText);
        }
    }
    http.send(params);
} 
```

# highcharts - 如何设置固定范围？

> ID：14028226
> 
> 赞同：0
> 
> 时间：2012-12-25T06:20:24.570
> 
> 标签：highcharts, highstock

我有[图表](http://jsfiddle.net/elias2012/226ny/)

我的数据范围从 1 到 40

在我的图表上签名 1 具有功能：

```
tickPositioner: function(min, max) {
  // specify an interval for ticks or use max and min to get the interval
  var interval = Math.round((max-min)/4);
  // push the min value at beginning of array
  var dataMin=this.dataMin;
  var dataMax=this.dataMax;          
  var positions = [dataMin];
  var defaultPositions = this.getLinearTickPositions(interval, dataMin, max);
  //push all other values that fall between min and max
  for (var i = 0; i < defaultPositions.length; i++) {
    if (defaultPositions[i] > dataMin && defaultPositions[i] < dataMax) {
      positions.push(defaultPositions[i]);
    }
  }
  // push the max value at the end of the array
  positions.push(dataMax);
  return positions;
} 
```

但我想设定一个固定范围（1 到 10、10 到 20、20 到 30、30 到 40） -[例如](http://regexinfo.ru/my_infa/parse_position/good/chart/1.JPG)？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-25T07:17:06.443

如果您的限制始终相同（1-40），您可能可以对刻度位置进行硬编码，如下所示

```
tickPositioner: function(min, max) {
     return [1,10,20,30,40];
} 
```

或者，如果您希望您的刻度始终相隔 10，您可以通过指定[`tickInterval`](http://api.highcharts.com/highstock#yAxis.tickInterval)as`10`

[**演示**](http://jsfiddle.net/jugal/QPctg/)

# java - 使用 Java 像在 Windows 中一样创建“用户帐户”界面

> ID：14028233
> 
> 赞同：0
> 
> 时间：2012-12-25T06:21:56.037
> 
> 标签：java, swing, user-interface, user-accounts

我正在开发一个应用程序，我必须为此创建一个类似于 Winodows OS 中的“用户帐户”控制面板，其中登录用户可以管理其他用户、他自己的密码等。

我请求您检查 Windows 中的“用户帐户”控制面板的外观和工作方式。

现在您已经注意到有些选项看起来类似于网络链接（当您将指针放在它们上时，箭头会变为手形符号），当您单击它们时，会在同一框架上加载不同的表单。例如：当您点击“更改密码”时会发生什么？

我不知道如何做到这一点，我们如何提供看起来像超链接的选项并单击它们，更改表单。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-25T07:14:05.047

在 Windows 上，此类超链接是通过 Windows XP 引入的[SysLink](http://msdn.microsoft.com/en-us/library/windows/desktop/bb760706%28v=vs.85%29.aspx)标准控件实现的。

Swing 中没有链接控件。但是，您可以`JXHyperlink`从[SwingX](http://java.net/projects/swingx)库中使用，它在 LGPL-2.1 许可下。

如果此许可证不可接受，那么您甚至可以自己实施一个。自定义组件看起来像标签，但表现为按钮。

* * *

要更改“表单”，您可以在用户单击命令链接时切换可显示面板。我的意思是您将隐藏当前可见的面板并显示为用户单击的命令提供 UI 的新面板。您可以将其视为选项卡式对话框，但选项卡栏是不可见的，您可以通过编程方式切换活动选项卡。

# android - 需要帮助将变量从列表视图项传递到另一个活动

> ID：14028235
> 
> 赞同：0
> 
> 时间：2012-12-25T06:22:08.603
> 
> 标签：android, listview, listadapter

我需要某种类型的解释，说明如何从数据库中为列表视图项传递我想要的任何数据库列值。

我希望能够获取任何值，并通过 putExtras 将其传递给另一个活动。我知道如何做那部分，我没有掌握的是如何在通过意图发送它之前从列表视图中获取我想要的值。

这是我的代码和更多详细信息，可帮助您帮助我：

日.java：

```
package com.dd.gfit;

public class Day {

    private long id;
    private long id_routine;
    private String name;
    private String day;

    public long getId() { return id; }  
    public long getIdRoutine() { return id_routine; }   
    public String getName() { return name; }    
    public String getDay() { return day; }

    public void setId(long id) { this.id = id; }    
    public void setIdRoutine(long id_routine) { this.id_routine = id_routine; } 
    public void setName(String name) { this.name = name; }  
    public void setDay(String day) { this.day = day; }

} 
```

这是存储和检索值的地方。我明白了。

DaysDataSource.java：

```
package com.dd.gfit;

import android.content.Context;
import android.database.Cursor;
import android.database.SQLException;
import android.database.sqlite.SQLiteDatabase;

public class DaysDataSource {

    private SQLiteDatabase database;
    private MySQLiteHelper dbHelper;
    private String[] allColumns = { MySQLiteHelper.COLUMN_ID, MySQLiteHelper.COLUMN_ID_ROUTINE, MySQLiteHelper.COLUMN_NAME, MySQLiteHelper.COLUMN_DAY };

    public DaysDataSource(Context context) {
        dbHelper = new MySQLiteHelper(context);
    }

    public void open() throws SQLException {
        database = dbHelper.getWritableDatabase();
    }

    public void close() {
        dbHelper.close();
    }

    public Cursor fetchAllDays(long id) {     
        Cursor cursor = database.query(MySQLiteHelper.TABLE_DAYS, allColumns, MySQLiteHelper.COLUMN_ID_ROUTINE + " = " + id, null, null, null, null);
        if (cursor != null) { cursor.moveToFirst(); }
        return cursor;
    }

} 
```

这是我可以将所有日期及其列值检索到游标中的数据源，以在要应用于列表视图的简单游标适配器中使用。我也明白了。

DaysActivity.java：

```
package com.dd.gfit;

import android.app.ListActivity;
import android.database.Cursor;
import android.os.Bundle;
import android.view.Menu;
import android.view.MenuInflater;
import android.widget.SimpleCursorAdapter;

public class DaysActivity extends ListActivity {

    private DaysDataSource datasource;
    private SimpleCursorAdapter dataAdapter;

    @Override
    public void onCreate(Bundle savedInstanceState) {       
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_days);

        datasource = new DaysDataSource(this);
        datasource.open();

        Cursor cursor = datasource.fetchAllDays(routineDataID);
        String[] columns = new String[] { MySQLiteHelper.COLUMN_NAME, MySQLiteHelper.COLUMN_DAY };
        int[] to = new int[] { R.id.listitem_day_name, R.id.listitem_day_day };
        dataAdapter = new SimpleCursorAdapter(this, R.layout.listitem_day, cursor, columns, to, 0);
        setListAdapter(dataAdapter);
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {     
        MenuInflater inflater = getMenuInflater();
        inflater.inflate(R.menu.activity_days, menu);
        return true;        
    }

    @Override
    protected void onListItemClick(ListView l, View v, int position, long thisID)
    {
        Day day = (Day)getListAdapter().getItem(position);
        long id = day.getId();

        Intent startDayActivity = new Intent(this, DayActivity.class);
        startDayActivity.putExtra("routineDataID", id);
        this.startActivity(startDayActivity);
    }

} 
```

这是我没有得到的部分。首先，列表视图完美地显示了我想要的内容。该`onListItemClick()`功能导致应用程序在被触发时崩溃（当我单击列表项时）。`id`似乎即将出现空值或什么？就像从未为列表项分配值一样。

我需要知道我在这里缺少什么。我需要有人帮助我，告诉我需要在代码中添加什么以及在哪里添加，这样我才能更好地了解将来如何正确执行此操作。

我假设我需要`day`在尝试使用该`getId()`函数之前获得应用的值？任何帮助都会很棒。

编辑：

我在列表视图中有一个按钮，我还希望能够在`id`单击此按钮时获取。

下面是使用我想转换为简单光标适配器的数组适配器的代码：

```
public void onClick(View view) {    
    @SuppressWarnings("unchecked")
    ArrayAdapter<Day> adapter = (ArrayAdapter<Day>)getListAdapter();
    ListView lv = getListView();
    int position = lv.getPositionForView(view);
    Day day = (Day) getListAdapter().getItem(position);
    long id = day.getId();
} 
```

再次编辑：

弄清楚了。继承人的代码：

```
 ListView l = getListView();
    int position = l.getPositionForView(view);

    Cursor cursor = ((SimpleCursorAdapter)l.getAdapter()).getCursor();
    cursor.moveToPosition(position);
    long id = cursor.getLong(cursor.getColumnIndex(MySQLiteHelper.COLUMN_ID));
    String name = cursor.getString(cursor.getColumnIndex(MySQLiteHelper.COLUMN_NAME)); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-25T06:29:08.897

更改您的`onListItemClick`代码以从光标中获取选定的值：

```
@Override
    protected void onListItemClick(ListView l, View v, int position, long thisID)
    {
      Cursor cursor = ((SimpleCursorAdapter)l.getAdapter()).getCursor();
      cursor.moveToPosition(position);
      long id = cursor.getLong(cursor.getColumnIndex("YOUR_COLUMN_NAME_HERE"));

      Intent startDayActivity = new Intent(DaysActivity.this, DayActivity.class);
      startDayActivity.putExtra("routineDataID", id);
      startActivity(startDayActivity);
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-25T06:35:49.220

用这个：

String selectedData =(String) (l.getItemAtPosition(position));

# git - Git克隆私人仓库，权限被拒绝

> ID：14028237
> 
> 赞同：7
> 
> 时间：2012-12-25T06:22:28.620
> 
> 标签：git, ssh, repository, clone, private

我正在尝试克隆另一个开发人员拥有的私有存储库。我没有与该开发人员直接沟通。他们向我发送了 theirusername-id_rsa.pub 文件和 theirusername-priv.key.ppk 文件。我了解 ppk 文件特定于 Putty ssh 客户端。有人可以向我提供如何克隆他们的回购的步骤吗？我已经用我自己的帐户配置了 git，我想我必须将他们的 ssh 密钥添加到我的 ssh/config 文件或其他东西中，但我有点 ssh 菜鸟。

```
git clone git@github.com:theirusername/pro.git
Cloning into 'pro'...
Permission denied (publickey).
fatal: The remote end hung up unexpectedly 
```

编辑：我能够访问 github 存储库并将自己添加为协作者。即使这样做了我也不能

```
git clone git@github.com:theirusername/pro.git 
```

然而

```
git clone https://github.com/theirusername/pro.git 
```

确实有效。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-12-26T02:22:36.547

> 他们向我发送了 theirusername-id_rsa.pub 文件和 theirusername-priv.key.ppk

首先，告诉他们*永远*不要这样做。出于某种原因，这样调用公钥/私钥。让多个实例（人或计算机）共享同一个密钥是违反其观点的。您应该为每个单独的密钥使用一个单独的密钥，以在它们之间建立一对一的关联。

如果他们无法将您添加为合作者（这需要您自己的用户帐户），那么他们应该将**您的**密钥添加到他们自己的个人资料中。我强调的是“你的密钥”，因为**你**应该生成它并只向他们发送公钥。私人的应该永远对其他人保密。

话虽如此，当您拥有 PPK、PuTTY 私钥文件时，您有两个选择。首先是使用 PuTTY 的*pageant*加载密钥文件并让 Git 使用 PuTTY 的*plink*作为 SSH 客户端。您可以通过将`GIT_SSH`环境变量设置为 的路径来做到这一点`plink.exe`，例如`C:\Program Files\PuTTY\plink.exe`。

第二种选择是将 PPK 转换为 Git 附带的 SSH 客户端可以使用的 OpenSSH 密钥文件。您可以通过使用 PuTTYgen 打开 PPK 并选择“转换/导出 OpenSSH 密钥”来做到这一点。您应该将文件保存为`C:\Users\<username>\.ssh\id_rsa`让 Git 使用它。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-25T10:22:11.050

你需要：

*   确保您`HOME`定义了环境变量（如果您从[git bash session](https://stackoverflow.com/a/3455231/6309)执行 git 操作，即使在 Windows 上也应该为您定义）
*   将您的 ppk 密钥转换为 id_rsa 和 id_rsa.pub：请参阅“[如何告诉 Git for Windows 在哪里可以找到我的私有 RSA 密钥？](https://serverfault.com/questions/194567/how-to-i-tell-git-for-windows-where-to-find-my-private-rsa-key) ”。
*   定义您的配置文件或将您的密钥添加到 ssh 代理，如“[指定执行 shell 命令时使用的私有 SSH 密钥](https://stackoverflow.com/questions/4565700/specify-private-ssh-key-to-use-when-executing-shell-command-with-or-without-ruby)”中所述。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-11-18T11:58:41.440

只需将以下代码复制并粘贴到 bat 文件中并执行即可

echo y|"C:\Program Files (x86)\PuTTY\plink.exe" root@XXX.XXX.XXX.XXX -pw XXXX 退出

XXX.XXX.XXX.XXX ：这是您设备的 IP 地址。

XXX : 这是您设备的密码

# mysql - 使用全文搜索搜索 500 万条记录

> ID：14028239
> 
> 赞同：2
> 
> 时间：2012-12-25T06:23:15.733
> 
> 标签：mysql, full-text-search

我有大约 530 万条记录的数据集。我对这个查询有一个非常微不足道的问题：

```
select 
  SystemId, 
  Id, 
  FirstName, 
  LastName,
  AptUnitNo, 
  Zip, 
  StreetName,
  streetnumber,
  (case 
     when LastName like '%robe%' 
       then -8 
     else 
       0 
    end ) as Ordervalue 
 From registeredusers 
 Where LastName like '%robe%'
 Order by Ordervalue, LastName, FirstName, StreetName, StreetNumber ASC 
 limit 0,50 
```

此查询根据在姓氏中找到的最佳匹配提供记录。我在姓氏上添加了全文索引。

我需要一些帮助如何将上述查询转换为基于全文索引的工作。

我尝试使用 match against 而不是`like`运算符，但它给了我一个错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-25T13:40:45.467

请注意，约束“LastName like '%robe%'”因为开头“%”将强制 MySQL 对所有 500 万行执行全表扫描。这非常慢，而且大多数时候对于网站等生产系统来说是不可接受的。问题是您无法创建有效的索引来帮助此查询。MySQL 全文索引稍微好一点，但性能不佳。

在这种情况下，像 Sphinx 或 Solr 这样的外部搜索引擎在性能和功能方面都是出路。

# ruby-on-rails-3.2 - 无法在 Rails 3.2 中设置 Rspec 和 Capybara

> ID：14028247
> 
> 赞同：5
> 
> 时间：2012-12-25T06:24:48.367
> 
> 标签：ruby-on-rails-3.2, capybara, rspec-rails

我正在为 rspec 测试创建一个示例应用程序，并 **在 Gemfile 中按照以下步骤操作：**

```
gem "rspec-rails", :group => [:test, :development]
group :test do
  gem "factory_girl_rails"
  gem "capybara"
  gem "guard-rspec"
end 
```

**然后执行以下步骤：**

1.  捆。
2.  rails g rspec：安装。
3.  mkdir 规范/支持规范/模型规范/路由。

**在我的 spec_helper 文件中添加了“需要 capybara/rspec”**

**创建了一个示例测试，如下所示：**

```
require 'spec_helper'
describe "Users" do
  describe " List users" do
    it "List all users" do
      get users_path
      page.has_content?('List Users')
    end
  end
end 
```

但它不起作用，出现以下错误

* * *

```
undefined local variable or method `page' 
```

***我怀疑我没有正确配置 capybara，让我知道配置 capybara 的正确方法。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-25T12:51:59.023

由于您没有在 Gemfile 中为**Capybara**指定版本，我假设您已经获得了版本`>= 2.0`，这意味着任何使用的测试都`page`应该放在**spec/features**目录下。

请查看以下链接以获取更多信息：

*   [rspec-rails 和 capybara 2.0：你需要知道的](http://alindeman.github.com/2012/11/11/rspec-rails-and-capybara-2.0-what-you-need-to-know.html)
*   [rspec-rails gem Capybara 页面](https://github.com/rspec/rspec-rails/blob/master/Capybara.md)

如果您不想使用**spec/features**目录，您应该能够通过`feature`以下方式将测试标记为：

```
require 'spec_helper'
describe "Users" do
  describe " List users", type: :feature do
    it "List all users" do
      get users_path
      page.has_content?('List Users')
    end
  end
end 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-25T06:54:53.490

在将 capybara dsl 包含到规范助手后开始工作

```
config.include Capybara::DSL 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-06T01:21:31.590

值得一试新的 Capybara DSL 进行集成测试（注意 features 目录）：

```
# spec/features/user_list_spec.rb
require 'spec_helper'

feature 'User list' do
  scenario 'List all users' do
    visit users_path
    expect(page).to have_content 'List Users'
  end
end 
```

我写了一篇博客文章，详细介绍了使用 RSpec 集成测试和 Capybara使用 RSpec 2.0 expect 语法[进行端到端测试](http://robots.thoughtbot.com/post/33771089985/rspec-integration-tests-with-capybara)`feature/scenarios`，以及 Capybara DSL for .

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-09-05T12:44:31.730

您也可以将其添加到您的 spec_helper.rb 中：

```
require 'capybara/rspec' 
```

# ajax - ajax 控制工具包需要asp.net ajax 4.0 脚本

> ID：14028249
> 
> 赞同：1
> 
> 时间：2012-12-25T06:25:04.387
> 
> 标签：ajax, controls, toolkit

我面临以下错误：

`AjaxControlToolkit requires ASP.NET Ajax 4.0 scripts. Ensure the correct version of the scripts are referenced. If you are using an ASP.NET ScriptManager, switch to the ToolkitScriptManager in AjaxControlToolkit.dll`

我在我的页面中使用 ToolScriptManager，我也在使用 VS2012，当我创建我的项目时，它的目标是 .NET 4.5。但是我的 Ajax 控件 dll 与 .NET 4.0 兼容，因此我的 ajax 控件无法正常工作。然后，我从解决方案的属性将我的项目版本从 4.5 更改为 4.0，然后它开始工作。但是最近我的项目中的一些设置发生了变化，我再次收到错误。

我不知道出了什么问题。

我再次使用 VS 2012，.NET Framework 在我的项目中从 4.5 更改为 4.0，并且正在使用 Ajax 控制工具包 4.0

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T21:07:14.613

删除 /bin 文件夹中的“Microsoft.ScriptManager.MsAjax.dll”文件后查看它是否正常工作。另外，不要忘记删除 Site.Master 文件中的 asp:ScriptReference Name="MsAjaxBundle" 行。

# windows - 在我的 Windows 7 电脑中通过 OfficeSIP 服务器创建使用，但它没有显示用户在线

> ID：14028252
> 
> 赞同：0
> 
> 时间：2012-12-25T06:25:12.317
> 
> 标签：windows, operating-system, webserver, windows-server-2008

我是新手`OfficeSIP server`。我面临一些问题。我尝试谷歌，但我没有找到任何解决方案。我`OfficeSIP server`在我的 Windows 7 电脑（笔记本电脑）中设置，但在笔记本电脑中不运行`windows server os`。

`I follow this link to setup` [http://www.officesip.com/support.html](http://www.officesip.com/support.html)。

设置后我创建了一个用户，但它显示用户离线。

![在此处输入图像描述](../Images/ff9d90ecc3ec209716d78653eaffde00.png)

```
Now My question is: 
 1\. windows server os need to run OfficeSIP server.
 2\. Need any more windows configuration to run OfficeSIP server.
 3\. I do not configuration DNS server. This configuration are make any problem.
 4\. Give me any web url or like to set by set guide to setup OfficeSIP server. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-25T11:16:44.667

1.  不，任何带有 .net 3.5 SP1 的窗口
2.  不
3.  不
4.  [http://www.thewindowsclub.com/set-up-sip-server-windows](http://www.thewindowsclub.com/set-up-sip-server-windows) , [http://www.youtube.com/user/sipreview](http://www.youtube.com/user/sipreview)

您使用哪个 sip 客户端？

# actionscript-3 - 如何使用类属性（外部代码.as）使用 gotoandplay 场景链接

> ID：14028256
> 
> 赞同：0
> 
> 时间：2012-12-25T06:25:53.627
> 
> 标签：actionscript-3, flash, flash-cs5

我正在使用`gotoandplay`此代码逐个场景链接。如果我在同一时间线（内部）中使用它，它可以正常工作，但是当我将此代码作为一个类使用时，我会收到此错误：

> 调用可能未定义的方法 MovieClip。

**我在时间轴上使用此代码**

```
b_enter.addEventListener(MouseEvent.CLICK, fl_ClickToGoToScene_enter1);
function fl_ClickToGoToScene_enter1(event:MouseEvent):void
{
    MovieClip(this.root).gotoAndPlay("p menu", "Menu");
} 
```

**我在课堂上使用此代码**

```
package  {

    import flash.display.SimpleButton;

    public class next extends SimpleButton {

        public function next() {
            // constructor code
            MovieClip(this.root).gotoAndStop("p2", "page2")
        }
    }

} 
```

[您可以使用此链接](http://www.delta-adv.com/nav/np.rar)下载 Flash 文件

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-25T06:58:55.747

只是快速猜测一下，它似乎找不到 MovieClip 方法...尝试导入 MovieClip 类。

在课堂上的其他导入语句旁边添加：

```
import flash.display.MovieClip; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-25T16:53:37.597

如果我理解正确，您正在尝试制作自定义按钮类：

所以你可以扩展一个 flash.display.Sprite 然后为每个状态添加 4 个 DiplayObjects（MovicLip 或 Sprite 或 Bitmap），向上等。然后监听适当的鼠标事件 MouseEvent.ROLL_OVER、MouseEvent.ROLL_OUT 等。 . 然后根据需要切换四个显示的可见性。还设置时间轴上的状态并制作扩展 flash.display.Movieclip 的文档类并监听不同的鼠标事件并调用 gotoAndStop(frame/label); 例如：假设您将使用第二种解决方案，并在您的 fla 中设置 4 种不同的状态 over、up、down 和 click

```
package
{
    import flash.display.MovieClip;
    import flash.events.Event;
    import flash.events.MouseEvent;

    public class MyCustomButton extends MovieClip
    {
        public function MyCustomButton()
        {
            if(stage)init();
            else this.addEventListener(Event.ADDED_TO_STAGE, init);
        }
        protected function init(event:Event=null):void
        {
            this.addEventListener(MouseEvent.ROLL_OVER,onOver);
            this.addEventListener(MouseEvent.ROLL_OUT,onOut);
            this.addEventListener(MouseEvent.CLICK,onClick);
            this.addEventListener(MouseEvent.MOUSE_DOWN,onDown);
        }

        protected function onDown(event:MouseEvent):void
        {
            //  gotoAndStop("down") or gotoAndPlay("down")
        }

        protected function onClick(event:MouseEvent):void
        {
            //  gotoAndStop("click") or gotoAndPlay("click")
        }

        protected function onOut(event:MouseEvent):void
        {
            //  gotoAndStop("out") or gotoAndPlay("out")
        }

        protected function onOver(event:MouseEvent):void
        {
            //  gotoAndStop("over") or gotoAndPlay("over")
        }
    }
} 
```

# m2eclipse - maven-war-plugin 错误的解决方法：无法复制工件的文件

> ID：14028257
> 
> 赞同：6
> 
> 时间：2012-12-25T06:26:07.107
> 
> 标签：m2eclipse, maven-war-plugin

如果我在 Eclipse 中有一个简单的 maven webapp 项目，它依赖于我的工作区中的另一个 maven 项目，我会收到错误消息...

无法复制工件 [group:artifact:jar:version:compile] 的文件 (org.apache.maven.plugins:maven-war-plugin:2.3:exploded:make-war-exploded:compile) pom.xml /Project line xx Maven 构建问题

它在网上提到了几个地方（在 maven 团队之间就损坏的部分、如何修复它等进行了辩论）——我发现唯一的解决方法是“禁用工作区分辨率”。嗯，好的，但这就是为什么我在我的工作区中拥有该项目的原因 - 因此可以对其进行编辑并且无需每次都安装即可获取更改。

我们最近刚刚转换为使用 maven，所以我没有太多经验 - 不知何故，我们的 SVN 中有一些项目即使使用相同的配置也不会出现该错误（它们是由不在这里的顾问创建的不再）。我不知道有什么区别——我使用了几乎相同的 pom，尝试了不同版本的 eclipse/war 插件，添加了构建助手/wtp 集成，以不同的方式创建项目，比较了 eclipse 配置文件等。我能想到的唯一区别是那些已部署，而我不在家里这样做。

我只是希望该错误消失（不禁用工作区分辨率），因此我不必忽略所有错误或在每次运行时都得到一个对话框来确认继续。这可能是我错过/不知道的简单事情。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2014-02-12T22:06:34.920

这可能是 m2eclipse 插件的问题。要解决此问题：

打开项目->属性->Maven。取消选中“解决工作区项目中的依赖项”，这解决了 m2eclipse 中的 war 插件问题。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-26T14:47:48.803

看起来另一种可能的解决方法是（暂时？）将依赖项标记为具有“提供”范围。或者忽略 maven-war-plugin 执行（现在似乎是 m2e-wtp 生命周期映射元数据中的默认设置） - 这似乎再次违背了在 eclipse 中使用它来自动更新事物的目的。

令我惊讶的是，似乎没有其他人在使用 eclipse 时遇到这种情况（或者禁用工作区分辨率或忽略执行对于那些人来说似乎是可以接受的）。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-06-23T18:52:33.467

我遇到了同样的问题，并找到了一个“修复”，可以让一切顺利完成。我关闭了 Eclipse 工作区中的所有其他项目。我相信当项目打开时，Eclipse 可能对文件有一些锁定？

# python - 如何告诉 Scrapy 只抓取 Xpath 中的链接？

> ID：14028258
> 
> 赞同：6
> 
> 时间：2012-12-25T06:26:07.743
> 
> 标签：python, web-scraping, scrapy

我是 Scrapy 的新手，我想做的是制作一个爬虫，它只会跟随给定的 HTML 元素内的链接`start_urls`

举个例子，我只想让爬虫通过`start_urls`设置为[https://www.airbnb.com/s?location=New+York%2C+NY&checkin=&checkout=&guests=1的 AirBnB 列表](https://www.airbnb.com/s?location=New+York%2C+NY&checkin=&checkout=&guests=1)

我不想抓取 URL 中的所有链接，我只想抓取 xpath 中的链接`//*[@id="results"]`

目前我正在使用以下代码来抓取所有链接，我怎样才能让它只抓取`//*[@id="results"]`

```
 from scrapy.selector import HtmlXPathSelector
    from tutorial.items import DmozItem
    from scrapy.contrib.spiders import CrawlSpider, Rule
    from scrapy.contrib.linkextractors.sgml import SgmlLinkExtractor
    from scrapy.selector import HtmlXPathSelector

    class BSpider(CrawlSpider):
            name = "bt"
            #follow = True
            allowed_domains = ["mydomain.com"]
            start_urls = ["http://myurl.com/path"]
            rules =(Rule(SgmlLinkExtractor(allow = ()) ,callback = 'parse_item', follow=True),)

        def parse_item(self, response):
        {parse code} 
```

任何正确方向的提示将不胜感激，谢谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-25T09:57:02.163

您可以将restrict_xpaths 关键字参数传递给SgmlLinkExtractor。从[文档](http://doc.scrapy.org/en/latest/topics/link-extractors.html#sgmllinkextractor)：

*   **restrict_xpaths** (str or list) – 是一个 XPath（或 XPath 的列表），它定义了响应中应该从中提取链接的区域。如果给定，则仅扫描由这些 XPath 选择的文本以查找链接。

# javascript - 在 Javascript 中解析 JSON 响应以获取键/值对

> ID：14028259
> 
> 赞同：74
> 
> 时间：2012-12-25T06:26:11.117
> 
> 标签：javascript, json, parsing

如何仅在 Javascript 中获取每个对象的名称和值？

* * *

## 回答 #1

> 赞同：147
> 
> 时间：2012-12-25T06:30:42.890

有两种方法可以访问对象的属性：

```
var obj = {a: 'foo', b: 'bar'};

obj.a //foo
obj['b'] //bar 
```

或者，如果您需要动态执行此操作：

```
var key = 'b';
obj[key] //bar 
```

如果您还没有将其作为对象，则需要[将其转换为](https://stackoverflow.com/questions/4935632/how-to-parse-json-in-javascript).

对于更复杂的示例，假设您有一个代表用户的对象数组：

```
var users = [{name: 'Corbin', age: 20, favoriteFoods: ['ice cream', 'pizza']},
             {name: 'John', age: 25, favoriteFoods: ['ice cream', 'skittle']}]; 
```

要访问第二个用户的年龄属性，您可以使用`users[1].age`. 要访问第一个用户的第二个“favoriteFood”，您可以使用`users[0].favoriteFoods[2]`.

另一个例子：`obj[2].key[3]["some key"]`

这将访问名为 2 的数组的第三个元素。然后，它将访问该数组中的“key”，转到该数组的第三个元素，然后访问属性 name `some key`。

* * *

正如 Amadan 所指出的，可能还值得讨论如何遍历不同的结构。

要遍历数组，可以使用简单的 for 循环：

```
var arr = ['a', 'b', 'c'],
    i;
for (i = 0; i < arr.length; ++i) {
    console.log(arr[i]);
} 
```

循环一个对象有点复杂。如果您绝对肯定该对象是普通对象，则可以使用普通`for (x in obj) { }`循环，但添加[hasOwnProperty](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Object/hasOwnProperty)检查会更安全。在您无法验证对象不具有继承属性的情况下，这是必需的。（它还对代码进行了一些未来的证明。）

```
var user = {name: 'Corbin', age: 20, location: 'USA'},
    key;

for (key in user) {
    if (user.hasOwnProperty(key)) {
        console.log(key + " = " + user[key]);
    }
} 
```

（请注意，我假设您使用的任何 JS 实现都有`console.log`. 如果没有，您可以使用`alert`或某种 DOM 操作来代替。）

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2012-12-25T06:35:17.283

试试 Douglas Crockford 在[github 上](https://github.com/douglascrockford/JSON-js)的 JSON Parser 。然后，您可以简单地从您的 String 变量中创建一个 JSON 对象，如下所示：

```
var JSONText = '{"c":{"a":[{"name":"cable - black","value":2},{"name":"case","value":2}]},"o":{"v":[{"name":"over the ear headphones - white/purple","value":1}]},"l":{"e":[{"name":"lens cleaner","value":1}]},"h":{"d":[{"name":"hdmi cable","value":1},{"name":"hdtv essentials (hdtv cable setup)","value":1},{"name":"hd dvd \u0026 blue-ray disc lens cleaner","value":1}]}'

var JSONObject = JSON.parse(JSONText);
var c = JSONObject["c"];
var o = JSONObject["o"]; 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-12-25T06:55:11.213

好的，这是JS代码：

```
var data = JSON.parse('{"c":{"a":{"name":"cable - black","value":2}}}')

for (var event in data) {
    var dataCopy = data[event];
    for (data in dataCopy) {
        var mainData = dataCopy[data];
        for (key in mainData) {
            if (key.match(/name|value/)) {
                alert('key : ' + key + ':: value : ' + mainData[key])
            }
        }
    }
}​ 
```

[在这里提琴](http://jsfiddle.net/yLfwD/)

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-12-25T06:49:53.403

```
var yourobj={
"c":{
    "a":[{"name":"cable - black","value":2},{"name":"case","value":2}]
    },
"o":{
    "v":[{"name":"over the ear headphones - white/purple","value":1}]
},
"l":{
    "e":[{"name":"lens cleaner","value":1}]
},
"h":{
    "d":[{"name":"hdmi cable","value":1},
         {"name":"hdtv essentials (hdtv cable setup)","value":1},
         {"name":"hd dvd \u0026 blue-ray disc lens cleaner","value":1}]
}} 
```

*   首先，组织起来是个好主意
*   顶级引用必须是比 a..v... 等更方便的名称
*   在 ov,oie 中不需要数组 [] 因为它是一个 json 条目

**我的解决方案**

```
var obj = [];
for(n1 in yourjson)
    for(n1_1 in yourjson[n])
        for(n1_2 in yourjson[n][n1_1])
            obj[n1_2[name]] = n1_2[value]; 
```

**批准代码**

```
for(n1 in yourobj){
    for(n1_1 in yourobj[n1]){
    for(n1_2 in yourobj[n1][n1_1]){
            for(n1_3 in yourobj[n1][n1_1][n1_2]){
      obj[yourobj[n1][n1_1][n1_2].name]=yourobj[n1][n1_1][n1_2].value;
            }
    }
 }
}
console.log(obj); 
```

结果

*使用 [] 方法或点符号时应使用区分配件

![证明](../Images/ed804cf15488d9f6788041db09510d33.png)

# iphone - 谷歌地图在xcode中的方向

> ID：14028267
> 
> 赞同：0
> 
> 时间：2012-12-25T06:27:58.417
> 
> 标签：iphone, google-maps, uiwebview

在 TableView 中，我有一个“方向”按钮，当单击它时，Google 地图应该打开相应的 url。我需要在 WebView 上加载 GoogleMaps。但我无法加载 webView。

```
ViewController.h:

@property(nonatomic,retain)BusinessNearbyLocationsMapView *businessNearbyLocationMapView;

In ViewController.m:
@synthesize businessNearbyLocationMapView;

- (void)viewDidLoad
{
    [super viewDidLoad];

    UIImage *image = [UIImage imageNamed: @"ic_launcher.png"];
    UIImageView *imageView = [[UIImageView alloc] initWithImage: image];
    imageView.frame =CGRectMake(0,0,120,50);
    [self.navigationBar setFrame:CGRectMake(0,0,320,70)];
    self.navigationBar.tintColor=[UIColor whiteColor];
    [self.navigationBar addSubview:imageView];
    [imageView release];
}
-(IBAction)showDirections:(id)sender
{
     selectedRow=[sender tag];
    NSMutableDictionary * location = [[[places objectAtIndex:selectedRow]objectForKey:@"geometry"]objectForKey:@"location"];
    NSString * lat = [location objectForKey:@"lat"];
    NSString * lng = [location objectForKey:@"lng"];

    AppAppDelegate  *appDelegate=(AppAppDelegate *)[[UIApplication sharedApplication]delegate];

    businessNearbyLocationMapView.url =@"http://maps.google.com/maps?saddr=%f,%f&daddr=%@,%@",appDelegate.userlatitude,appDelegate.userlongitude,lat,lng;

    [self.navigationController pushViewController:self.businessNearbyLocationMapView animated:YES];
}

BusinessNearbyLocationsMapView.m:

- (void)viewWillAppear:(BOOL)animated {
    NSString *fullUrl = [[NSString alloc] initWithFormat:@"http://%@", self.url];
    NSURL *aboutURL = [[NSURL alloc] initWithString:fullUrl];
    [fullUrl release];
    [viewWebView loadRequest:[NSURLRequest requestWithURL:aboutURL]];
    [super viewWillAppear:animated];
} 
```

但是我看不到加载了相应 url 的 webview？我哪里错了？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-25T06:33:51.823

为了在 GoogleMaps 应用程序中显示路线，使用新的 GoogleMaps URL 方案，如下所示：

```
comgooglemaps://?saddr=Google+Inc,+8th+Avenue,+New+York,+NY&daddr=John+F.+Kennedy+International+Airport,+Van+Wyck+Expressway,+Jamaica,+New+York&directionsmode=transit 
```

1.  在此处查看此文档[URl Scheme](https://developers.google.com/maps/documentation/ios/urlscheme)

您也可以在[此处查看链接](https://stackoverflow.com/questions/13879211/how-to-integrate-new-google-map-app-with-ios-app/13879366#13879366)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-25T07:04:32.960

只需使用 self.url 而不是`http://`在此 url 之前添加..它已经附加在`self.url`变量中...例如使用如下所示..

```
- (void)viewWillAppear:(BOOL)animated {
        viewWebView.delegate=self;
        NSString *fullUrl =  self.url;
        fullUrl = [self removeNull:fullUrl];
        [fullUrl retain];
        NSURL *targetURL = [NSURL fileURLWithPath:fullUrl];
        NSURLRequest *request = [NSURLRequest requestWithURL:targetURL];
        [viewWebView loadRequest:request];
        [super viewWillAppear:animated];
} 
```

并在您的文件中添加这两种方法`BusinessNearbyLocationsMapView.m`..

```
-(NSString*) trimString:(NSString *)theString {
    NSString *theStringTrimmed = [theString stringByTrimmingCharactersInSet: [NSCharacterSet whitespaceAndNewlineCharacterSet]];
    return theStringTrimmed;
}

-(NSString *) removeNull:(NSString *) string {    

    NSRange range = [string rangeOfString:@"null"];
    //NSLog(@"in removeNull : %d  >>>> %@",range.length, string);
    if (range.length > 0 || string == nil) {
        string = @"";
    }
    string = [self trimString:string];
    return string;
} 
```

以上两种方法是我的自定义方法，通过我们`null`从字符串中删除或空格，它的问题可能是因为在 url 某处空格或空值消失了......

**更新：**

```
-(IBAction)showDirections:(id)sender
{
     selectedRow=[sender tag];
    NSMutableDictionary * location = [[[places objectAtIndex:selectedRow]objectForKey:@"geometry"]objectForKey:@"location"];
    NSString * lat = [location objectForKey:@"lat"];
    NSString * lng = [location objectForKey:@"lng"];

    AppAppDelegate  *appDelegate=(AppAppDelegate *)[[UIApplication sharedApplication]delegate];

    BusinessNearbyLocationsMapView *newbusinessNearbyLocationMapView =[[BusinessNearbyLocationsMapView alloc]initWithNibName:@"BusinessNearbyLocationsMapView" bundle:nil];
    newbusinessNearbyLocationMapView.url =[NSString stringWithFormat:@"http://maps.google.com/maps?saddr=%f,%f&daddr=%@,%@",appDelegate.userlatitude,appDelegate.userlongitude,lat,lng];
    [newbusinessNearbyLocationMapView.url retain];
    [self.navigationController pushViewController:newbusinessNearbyLocationMapView animated:YES];
    [newbusinessNearbyLocationMapView relese];

} 
```

希望这对你有帮助...

# makefile - GNU Make 中通配符目标的正确方法

> ID：14028268
> 
> 赞同：21
> 
> 时间：2012-12-25T06:28:05.027
> 
> 标签：makefile, wildcard, gnu-make, target

我正在尝试编写一个将源文件和目标文件分开的 Makefile，但我似乎无法找到完成此任务的正确方法。我有两种可行的方法，但我希望有人能指出“正确”的方法来做到这一点。

我的项目被分成一个`src`和`obj`文件夹，其中 Makefile 与这些文件夹处于同一级别。

第一种方法使用通配符函数查找源文件，`src`然后使用文本替换确定对应的目标文件。

```
SRC = $(wildcard src/*.cpp)
OBJ = $(SRC:.cpp=.o)

prog: $(OBJ)
       $(CC) $(CFLAGS) $(LDFLAGS) $(LIBS) -o prog $(patsubst src/,obj/,$(OBJ))

%.o: %.cpp
     $(CC) $(CFLAGS) -c $< -o $(COMPILE)/$(@F) 
```

然而，这似乎有效，每次我运行`make prog`它都会重新编译所有目标文件。该`OBJ`变量必须`src/`在所有对象的前面，否则我会得到“没有规则来制作目标”。从好的方面来说，我可以轻松地在目标中使用 patsubst`prog` 来指定目标文件。

第二种方法类似，但在`OBJ`变量上使用 vpaths 和文本替换：

```
 vpath = %.cpp src
 vpath = %.o obj

 SRC = $(wildcard src/*.cpp)
 OBJ = $(subst src/,,$(SRC:.cpp=.o))
 POBJ = $(patsubst src/,obj/$(SRC:.cpp=.o))

 prog: $(OBJ)
       $(CC) $(CFLAGS) $(LDFLAGS) $(LIBS) -o prog $(POBJ)

 %.o: %.cpp
     $(CC) $(CFLAGS) -c $< -o $(COMPILE)/$(@F) 
```

这消除了目标文件的重新编译，但需要我`POJB`为`prog`目标添加另一个变量（因为我不能只对没有 basedir 的目标文件执行任何 patsubst）。

两种方法都有效，并且每种方法都比另一种具有优势，但是哪一种是“正确”的方法，如果两者都不是，那么实现这种类型的建筑的正确方法是什么？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-12-25T06:46:34.380

你的第一个例子几乎就在那里：

```
SRC = $(wildcard src/*.cpp)
OBJ = $(patsubst src/%.cpp, obj/%.o, $(SRC))

prog: $(OBJ)
  $(CC) $(CFLAGS) $(LDFLAGS) $(LIBS) $(OBJ) -o prog 

obj/%.o: src/%.cpp
  $(CC) $(CFLAGS) -c $< -o $@ 
```

# html - 与在样式表的 ul 中使用 ul 冲突

> ID：14028273
> 
> 赞同：1
> 
> 时间：2012-12-25T06:28:28.663
> 
> 标签：html, css, html-lists, stylesheet

唯一的问题是，当我将鼠标悬停在“部分”链接时，列表会以内联显示的形式出现。我希望它以列表的形式出现，我的意思是每个链接都在另一个链接之下。只有部分的列表。我试过这个样式表，但它不适合。

这是我的html

```
<div class="nav">
  <ul class="navbar" >
    <li><a href="Home.aspx">Home</a></li>
    <li><a href="#">About us</a></li>
    <li><a href="#">Sections</a>
        <ul class="SectionList">
          <li><a href="#">haha</a></li>
          <li><a href="#">haha</a></li>
          <li><a href="#">haha</a></li>
        </ul>
     </li>
     <li><a href="#">Appointment</a></li>
     <li><a href="Registeration.aspx">Registration</a></li>
  </ul>
</div> 
```

这是我的样式表

```
ul.navbar
{
  list-style-type:none;
  padding:6px 0 6px 0;
  margin:0;
}

ul.navbar li
{
  display:inline;
  float:left;
}

.SectionList
{
  display:none;
  padding: 0;
  margin: 0;
}

ul.SectionList li
{
  padding:0;
  margin:0;
}

.navbar li:hover .SectionList
{
  display:block;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-25T06:40:48.707

请参阅小提琴以获得您需要处理其外观和感觉的所需输出。[http://jsfiddle.net/PthNP/](http://jsfiddle.net/PthNP/)

```
ul.navbar
{
list-style-type:none;
padding:6px 0 6px 0;
margin:0;

}

ul.navbar li
{
display:inline;
float:left;
}

.SectionList
{
display:none;
padding: 0;
margin: 0;
}

ul.SectionList li
{
padding:0;
margin:0;
}

.navbar li:hover .SectionList
{
display:block;
   width:50px;

}

.SectionList li
{
    width:100px;
    display:block;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-25T07:17:57.373

用萤火虫检查表明：

```
ul.navbar li
{
  display:inline;
  float:left;
} 
```

正在申请

```
display:inline 
```

给所有的后代。要修复，请将其更改为：

```
ul.navbar > li
{
  display:inline;
  float:left;
} 
```

这将只选择第一个后代。[这](http://www.w3.org/TR/CSS21/selector.html#child-selectors)是一个 CSS 参考。

[此外，您可能会从GRC 纯 CSS 菜单](http://www.grc.com/menudemo.htm)中获得一些好主意，这样您就不必完全重新发明轮子。祝你好运。

# iphone - 使用 for 循环搜索数组中的键

> ID：14028284
> 
> 赞同：-1
> 
> 时间：2012-12-25T06:30:42.437
> 
> 标签：iphone, objective-c, ios

我创建了一个字典，并在字典中设置名称键值数据，并在数组中添加字典，使用 for 循环迭代数据。但我想搜索名称为 vinod.below 的关键名字。下面是我的代码。

```
 NSDictionary *dic2 =[[NSDictionary alloc] init];        
    NSDictionary *dic1 =[[NSDictionary alloc] init];
    [dic1 setValue:@"Vinod" forKey:@"fname"];
    [dic2 setValue:@"vishw" forKey:@"lname"];

    [dic2 setValue:@"Tazeen" forKey:@"fname"];  

    [dic2 setValue:@"momin" forKey:@"lname"];

    NSMutableArray *arr =[[NSMutableArray alloc] initWithObjects:dic1,dic2, nil];

    NSLog(@"inside the view did load");

    NSMutableArray *arr2=[[NSMutableArray alloc] init];

    for (int i=0; i<[arr count]; i++)
    {
        NSString *str =[arr objectAtIndex:i];

        NSLog(@"inside the loop");

        [arr2 addObject:str];

     //   NSArray *arr =[[NSArray alloc] initWithObjects:str, nil];
        if ([arr2 containsObject:@"vinod"])
        {
            NSLog(@"first name found in the array");
        }
    } 
```

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-25T06:45:42.390

您的代码包含一些愚蠢的错误，例如向不可变字典添加值。

我已更正并找到代码：

```
NSMutableDictionary *dic2 =[[NSMutableDictionary alloc] init];
NSMutableDictionary *dic1 =[[NSMutableDictionary alloc] init];
[dic1 setValue:@"Vinod" forKey:@"fname"];
[dic2 setValue:@"vishw" forKey:@"lname"];

[dic2 setValue:@"Tazeen" forKey:@"fname"];

[dic2 setValue:@"momin" forKey:@"lname"];

NSMutableArray *arr =[[NSMutableArray alloc] initWithObjects:dic1,dic2, nil];

for (NSDictionary *dictObj in arr) {
    if ([[dictObj valueForKey:@"fname"]isEqualToString:@"Vinod"]) {
        NSLog(@"name found");
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-25T06:35:25.283

好的...也许完全重写是为了。您的代码既复杂又令人费解，在某些地方完全是错误的，我在下面已经指出。

```
NSMutableDictionary *dic1 =[[NSMutableDictionary alloc] init]; //Your dictionary needs to 
//be mutable, otherwise it will throw exceptions.  
//NSDictionary is immutable.
NSMutableDictionary *dic2 =[[NSMutableDictionary alloc] init];
[dic1 setValue:@"Vinod" forKey:@"fname"];
[dic1 setValue:@"vishw" forKey:@"lname"];

[dic2 setValue:@"Tazeen" forKey:@"fname"];
[dic2 setValue:@"momin" forKey:@"lname"];

//Add all the values from the dictionaries into one master array.
NSMutableArray *arr =[[NSMutableArray alloc] init];
[arr addObjectsFromArray:[dic1 allValues]];
[arr addObjectsFromArray:[dic2 allValues]];

NSLog(@"inside the view did load");

//load those values into a set for faster lookup
NSSet *set = [[NSSet alloc]initWithArray:arr];

//For-in the values.  Fast enumeration is a lot better at this than c-loops
for (NSString *value in arr) {
    if ([set containsObject:@"Vinod"]) {
        NSLog(@"first name found in the array");
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-25T06:37:13.600

我希望这会对您有所帮助，此示例代码使用[NSFastEnumeration](http://developer.apple.com/library/ios/#documentation/cocoa/reference/NSFastEnumeration_protocol/Reference/NSFastEnumeration.html)和块。

```
NSDictionary *dic2 =[[NSDictionary alloc] init];
NSDictionary *dic1 =[[NSDictionary alloc] init];
[dic1 setValue:@"Vinod" forKey:@"fname"];
[dic2 setValue:@"vishw" forKey:@"lname"];

[dic2 setValue:@"Tazeen" forKey:@"fname"];

[dic2 setValue:@"momin" forKey:@"lname"];

NSMutableArray *arr =[[NSMutableArray alloc] initWithObjects:dic1,dic2, nil];

NSLog(@"inside the view did load");

[arr enumerateObjectsUsingBlock:^(id obj, NSUInteger idx, BOOL *stop) {

    if ([[obj valueForKey:@"fname"] isEqual:@"Vinod"]) {

        NSLog(@"Found it!");

        *stop = YES;

    }

}]; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-25T07:01:44.340

“试试这个：-

```
 NSPredicate *predicate = [NSPredicate predicateWithFormat:@"fname = %@",@"Vinod];
    NSMutableArray *aMutArray = [NSMutableArray arrayWithArray:aYourArray];
    [aMutArray filterUsingPredicate:predicate];
    NSMutableDictionary *aDictTemp = [aMutArray objectAtIndex:0]; 
```

通常 NSPredicate 用于过滤掉数组或在数组内搜索。有关更多信息，请查看此链接：-

[https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSPredicate_Class/Reference/NSPredicate.html](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSPredicate_Class/Reference/NSPredicate.html)

# c# - 读取excel应用程序状态栏文字

> ID：14028286
> 
> 赞同：6
> 
> 时间：2012-12-25T06:31:08.713
> 
> 标签：c#, .net, excel, vsto, vba

有没有办法获取excel应用程序状态栏文本？

![在此处输入图像描述](../Images/46dbc430153a4cd4cb5c1b45f7fb9940.png)

任何答案将不胜感激。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-25T06:38:00.093

我绝对不确定，但你可以这样尝试；

[`Microsoft.Office.Interop.Excel.Application`](http://msdn.microsoft.com/en-us/library/ms282265%28v=office.14%29.aspx)接口有[`StatusBar`](http://msdn.microsoft.com/en-us/library/microsoft.office.interop.excel._application.statusbar%28v=office.14%29.aspx)属性。

> 返回或设置状态栏中的文本。
> 
> 如果 Microsoft Excel 可以控制状态栏，则此属性返回 False。要恢复默认状态栏文本，请将属性设置为 False；即使状态栏被隐藏，这也有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-26T02:24:29.887

尝试

```
.LogAction "New Status" 
```

或者

```
LOG_Handler.LogAction "New Status" 
```

# android - android发送带图片的短信

> ID：14028289
> 
> 赞同：0
> 
> 时间：2012-12-25T06:31:24.757
> 
> 标签：android

如何在**没有用户干预的情况下发送带有图像的文本消息**

```
short SMS_PORT = 15005; 
SmsManager smsManager = SmsManager.getDefault();
smsManager.sendTextMessage(phoneNo, null, sms, null, null);
smsManager.sendDataMessage("5556",null,SMS_PORT,bFile,null,null);
//bFile is a Image byte Array which is stored in sdcard 
```

短信发送成功，但图片没有发送

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-12-25T06:37:21.013

使用此代码并让我知道它是否有效：

```
Intent sendIntent = new Intent(Intent.ACTION_SEND); 
sendIntent.putExtra("sms_body", "some text"); 
sendIntent.putExtra(Intent.EXTRA_STREAM, Uri.parse(url));
sendIntent.setType("image/png"); 
```

# xml - 谷歌协议缓冲区 vs json vs XML

> ID：14028293
> 
> 赞同：231
> 
> 时间：2012-12-25T06:32:28.697
> 
> 标签：xml, json, protocol-buffers, data-serialization

我想知道优缺点

*   Google 协议缓冲区
*   JSON
*   XML

我想为两个应用程序实现一个通用框架，一个在 Perl 中，第二个在 Java 中。因此，想创建可以被两种技术（即 Perl 和 Java）使用的公共服务。

两者都是网络应用程序。

请分享您对此的宝贵想法和建议。我在谷歌上看到了很多链接，但都有不同的意见。

* * *

## 回答 #1

> 赞同：290
> 
> 时间：2012-12-25T08:37:27.417

json

*   人类可读/可编辑
*   无需预先知道模式即可解析
*   优秀的浏览器支持
*   比 XML 更简洁

XML

*   人类可读/可编辑
*   无需预先知道模式即可解析
*   SOAP等标准
*   良好的工具支持（xsd、xslt、sax、dom 等）
*   相当冗长

原型缓冲区

*   非常密集的数据（小输出）
*   在不知道架构的情况下很难稳健地解码（数据格式在内部是模棱两可的，需要架构来澄清）
*   处理速度非常快
*   不适用于人眼（密集二进制）

在大多数平台上都有很好的支持。

就个人而言，这些天我很少使用 XML。如果消费者是浏览器或公共 API，我倾向于使用 json。对于内部 API，我倾向于使用 protobuf 来提高性能。在公共 API 上提供两者（通过标头或单独的端点）也很有效。

# c# - 触发 listview 的 IsSelected 属性（初学者）

> ID：14028297
> 
> 赞同：6
> 
> 时间：2012-12-25T06:33:03.520
> 
> 标签：c#, wpf, triggers

我正在尝试执行以下操作：一旦我的 listview `IsSelected`，我想将我的按钮`IsEnabled`属性设置为 true。

这是我尝试过的，但出现以下异常：

`'Initialization of 'System.Windows.Controls.ListView' threw an exception.' Line number '25' and line position '19'.`

这是代码：

```
 <ListView ItemsSource="{Binding ReferenceCollection}" SelectedItem="{Binding SelectedReference}" Grid.ColumnSpan="2" Name="ListView1"  >
        <ListView.Triggers>
            <Trigger Property="ListView.IsSelected" Value="True">
                <Setter TargetName="okBtn" Property="Button.IsEnabled" Value="True" />
            </Trigger>
        </ListView.Triggers>
        <ListView.ItemTemplate>
            <DataTemplate>
                <StackPanel Orientation="Horizontal">
                    <Label Content="{Binding ReferenceName}" />
                </StackPanel>
            </DataTemplate>
        </ListView.ItemTemplate>
    </ListView> 
```

和按钮：

```
 <Button IsEnabled ="False" Grid.Row ="2" Content="OK" Name="okBtn" Click="addReference_Click" /> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-25T07:19:43.233

您可以在按钮中使用 DataTrigger：

```
<ListView Name="YourList">
        <ListViewItem Content="1234" />
        <ListViewItem Content="1234" />
        <ListViewItem Content="1234" />
    </ListView>
    <Button Content="OK">
        <Button.Style>
            <Style TargetType="{x:Type Button}">
                <Style.Triggers>
                    <DataTrigger Binding="{Binding SelectedItem, ElementName=YourList}"
                                 Value="{x:Null}">
                        <Setter Property="IsEnabled"
                                Value="False" />
                    </DataTrigger>
                </Style.Triggers>
            </Style>
        </Button.Style>
    </Button> 
```

# c# - wpf 从包装面板中查找按钮

> ID：14028301
> 
> 赞同：1
> 
> 时间：2012-12-25T06:33:27.407
> 
> 标签：c#, wpf, button, mouseevent, wrappanel

我有`Buttons`，`WrapPanel`那些是动态创建的。我想更改特定`Button`on的高度/宽度`Click_event`。

这是我在做什么：

```
 for (int i = 1; i <= count; i++)
    {
                btn = new Button();
                btn.MinHeight = 22;
                btn.MinWidth = 22;

                btn.Content = i.ToString();
                int _id = id++;
                btn.Name = "btn"+_id.ToString();
                wrpQuestionsMap.Children.Add(btn);

                btn.Click += new RoutedEventHandler(btn_Click);
    }

    private void btnNext_Click_1(object sender, RoutedEventArgs e)
        {
            if (this.view.CurrentPosition < this.view.Count - 1)
            {
                this.view.MoveCurrentToNext();

                Button b = (Button)this.wrpQuestionsMap.FindName("btn"+view.CurrentPosition.ToString());
                if (b != null)
                {
                    b.Width = 30;
                }
            }
        } 
```

我在上面尝试过，但它变得空了，不知道为什么。请帮忙谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-25T06:39:59.477

如果我理解正确并且您想更改单击按钮的大小： 对于这行代码：

```
btn.Click += new RoutedEventHandler(btn_Click); 
```

你应该有这样的方法：

```
void btn_Click(object sender, RoutedEventArgs e)
{
  Button btn=(Button)sender; // this is the clicked Button
  btn.Width=30.0;            //changes its Width
} 
```

**编辑：**

```
foreach (Button btn in wrpQuestionsMap.Children)
{
    string name= btn.Content.ToString();
    if  (name == "yourName")   // yourName is the name you are searching for
    {
         btn.Width = 30.0   //change size
         break;             // no need to search more
    }
} 
```

**编辑 2：** 从您问题中的代码来看，您的 Buttons 的内容似乎是一个 number `btn.Content = i.ToString();`。您在评论中说这`view.CurrentPosition.ToString()`是您当前问题的编号。如果要更改此按钮的宽度，请使用：

```
foreach (Button btn in wrpQuestionsMap.Children)
{
    string name= btn.Content.ToString(); // it must be a number, check it in the debug, and if it is not, Let me know
    if  (name == view.CurrentPosition.ToString())
    {
         btn.Width = 30.0   //change size
         break;             // no need to search more
    }
} 
```

如果你想改变另一个按钮的宽度，你应该让我知道那个按钮上写了什么。

# mysql - 复制 MySQL InnoDB 文件

> ID：14028306
> 
> 赞同：4
> 
> 时间：2012-12-25T06:33:58.420
> 
> 标签：mysql, backup, innodb

我知道复制 mySQL InnoDB 文件（frm 等）是自找麻烦。但是如果我照原样复制整个 MSYSQL 目录呢？bin，数据，文档等。这行得通吗？我相信它应该工作。我对吗？

除非明确设置，否则我认为 MySQL 不会在 MySQL 文件夹之外执行任何操作。

对于那些想知道为什么我需要这样做的人，我构建了 Intranet 应用程序，我通常为这些东西制作简单的 1 单击基于 WINDOWS 的安装程序。这意味着在虚拟机器上准备 WAMP/XAMPP SERVER 状态、配置和所有内容，然后对其进行快照。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-25T08:49:26.077

从命令行，备份到 SQL 文件：

> mysqldump -u 用户名 -p --lock-tables DB1 > 数据库备份.sql

对于多个数据库

> mysqldump -u 用户名 -p --lock-tables --databases DB1 DB2 DB3 ... > 数据库备份.sql

对于所有数据库

> mysqldump -u 用户名 -p --lock-tables --all-databases > 数据库备份.sql

使用“--lock-tables”来防止转储时访问数据库。

导入数据库：

> mysql -u 用户名 -p DB1 < 数据库备份.sql

对于多个数据库：

> mysql -u 用户名 -p < 数据库备份.sql

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-25T08:24:04.797

是的，您可以使用这种方法创建数据库的备份，但您需要先停止服务器，否则将面临数据不一致的风险。如果您只有 MyISAM 表，您通常可以通过`FLUSH TABLES WITH READ LOCK`复制目录和`UNLOCK TABLES`.

有关更多信息，请参阅[http://dev.mysql.com/doc/mysql-backup-excerpt/5.0/en/backup-methods.html](http://dev.mysql.com/doc/mysql-backup-excerpt/5.0/en/backup-methods.html)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-09-25T17:20:49.913

对于 InnoDB 表，mysql>>data 文件夹中有一个日志文件。复制数据文件夹中的日志文件“ibdata1”，新安装的 Phpmyadmin 也会显示 innodb 表。否则它只会显示 MyISAM 表。

但是要注意一件事，如果您当前的数据文件夹中已经有 ibdata1 文件，则从备份中替换 ibdata1 文件可能会导致当前 InnoDB 表出现问题，但是如果您将备份数据库安装到新安装的 Xampp/Wamp，它会工作的。

# jquery - 在 jQuery UI 的 resizeable() 上指定自定义句柄

> ID：14028307
> 
> 赞同：0
> 
> 时间：2012-12-25T06:34:08.140
> 
> 标签：jquery, jquery-ui

请参阅[以下 JSFiddle](http://jsfiddle.net/eYNNg/)。

我可以在`resizeable()`没有自定义处理程序的情况下使`console.log('Begin');`.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-25T06:49:04.230

这是 jQuery UI 中的一个已知错误。看起来它从 1.7 开始就已经存在，并且有一个里程碑要在 2.0 之前修复。

[http://bugs.jqueryui.com/ticket/4310](http://bugs.jqueryui.com/ticket/4310)

# wpf - 创建 WPF windows 应用程序的多个 ClickOnce 部署

> ID：14028311
> 
> 赞同：0
> 
> 时间：2012-12-25T06:35:24.067
> 
> 标签：wpf, clickonce, mage

我们有一个通过 ClickOnce 部署分发的 WPF 应用程序。我们有大约 400 个不同的用户（客户）使用这个应用程序。每个客户唯一变化的是应用程序的 app.config 中存在的 Web 服务 URL。

对于这些客户中的每一个，更改 app.config 然后使用 mage 或 mage UI 签署 clickonce 部署既耗时又容易出错。

有没有办法以自动化的方式做到这一点，以便我们可以管理所有这些客户并更快地创建新的签名部署？

**编辑**：如果仅在部署级别没有直接的方法来管理此问题，我愿意进行应用程序或首次流程更改。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-25T07:30:30.160

类似于在您的顶级窗口中放置一个变量，当您的客户第一次登录或启动时，您要求他们选择一个变量（区域？网站？公司？等），这会设置该变量，这然后每次程序启动时存储和调用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T04:00:00.260

您可以向 ClickOnce 安装 URL 添加一个或多个参数[，如此 MSDN 文章中所述](http://msdn.microsoft.com/en-us/library/ms172242.aspx)。该参数值仅在初始安装或更新期间出现，因此如果您允许从开始菜单运行应用程序，则必须在本地存储 Web 服务 URL。

# oracle - pl/sql中测试过程的键盘快捷键？

> ID：14028313
> 
> 赞同：0
> 
> 时间：2012-12-25T06:35:24.913
> 
> 标签：oracle, plsql, plsqldeveloper

我正在使用 pl/sql 开发人员在 Oracle 中编写存储过程。在编写存储过程或函数时，我需要对其进行测试。对于测试，我必须右键单击程序名称，然后从弹出菜单中单击测试。

是否有任何键盘快捷键或其他方便的方法来测试它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-25T06:57:35.933

默认情况下没有分配组合键。因此，您需要执行以下操作：

1.  去专区`Tools\Preferences`选择`Key configuration`_`User interface`
2.  在出现的列表中找到`Name`调用`File/New/Test Window`并按下您想要用来打开测试窗口的任意组合键。

# c# - 以流格式保存图片框中的图像

> ID：14028315
> 
> 赞同：2
> 
> 时间：2012-12-25T06:36:12.230
> 
> 标签：c#, c#-4.0, c#-2.0

我想保存加载到图片框中的图片以流式传输。当我以 png 格式保存时，它可以正常工作，但是当我想以其他格式保存时，我得到

> GDI + 异常中发生一般错误

它是我的代码：

```
Image Img = pictureBox1.Image;
byte[] inputImage = new byte[Img.Width * Img.Height];
System.IO.MemoryStream ms = new System.IO.MemoryStream();
ms.Read(inputImage, 0, Img.Width * Img.Height);

if (System.Drawing.Imaging.ImageFormat.Jpeg.Equals(Img.RawFormat))
{
    pictureBox1.Image.Save(ms, System.Drawing.Imaging.ImageFormat.Jpeg);
}
else if (System.Drawing.Imaging.ImageFormat.Gif.Equals(Img.RawFormat))
{
    ms.Seek(0, SeekOrigin.Begin);
    pictureBox1.Image.Save(ms, System.Drawing.Imaging.ImageFormat.Gif);
}
else if (System.Drawing.Imaging.ImageFormat.Png.Equals(Img.RawFormat))
{
    pictureBox1.Image.Save(ms, System.Drawing.Imaging.ImageFormat.Png);
}
else if (System.Drawing.Imaging.ImageFormat.Bmp.Equals(Img.RawFormat))
{
    pictureBox1.Image.Save(ms, System.Drawing.Imaging.ImageFormat.Bmp);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-25T06:41:18.567

试试这个方法：

```
public Stream ImageToStream(Image image, System.Drawing.Imaging.ImageFormat format)
{
    MemoryStream ms = new MemoryStream();
    image.Save(ms, format);
    return  ms;
} 
```

并使用它：

```
using(Stream stream = ImageToStream(pictureBox1.Image, 
                           System.Drawing.Imaging.ImageFormat.Gif))
{
    ...
} 
```

# javascript - 如何在kineticjs中通过json在舞台上绘制图层

> ID：14028320
> 
> 赞同：3
> 
> 时间：2012-12-25T06:36:35.563
> 
> 标签：javascript, html, canvas, kineticjs

KineticJS 中有一种方法可以从 json 中绘制舞台（画布）

```
Kinetic.Node.create(JSON, 'container'); 
```

舞台上有很多层次。我已将图层保存到 JSON

如何在现有舞台上仅绘制一层？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T04:51:07.320

为什么不直接使用 AJAX 来执行代码呢？

```
 $.ajax(
   url:
   success: function(response){
      stage.add(new Kinetic.Layer());
   }
 ); 
```

您可以使这取决于存储在 JSON 对象中的内容。

# android - 带有 URL 链接的自定义视图

> ID：14028321
> 
> 赞同：0
> 
> 时间：2012-12-25T06:36:39.000
> 
> 标签：android, listview

下图是我的视图示例。从服务器检索由 URL 组成的文本片段数组（可能是单个片段中的两个 URL）。我需要将其呈现为带有滚动的项目列表。当用户点击链接时，一个网页视图会出现在屏幕上（通常是一个对话屏幕）。

在这种情况下，我对这两个选项感到困惑：

1）列表视图（不知道链接是否完美）

2）滚动视图中的文本视图（不知道如何附加所有文本片段和分隔符）

哪个选项更好？如果您有更好的解决方案，请告诉我。

谢谢阿斯温

![查看示例](../Images/34429ba798a3df5c6e2b6a832275977d.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-30T14:11:44.460

列表视图会做得很好。对于链接，您可以在定义 ListView 适配器时将 TextView 设置为具有 onClickListener()。

# android - 如何检索存储在数据库中的空值？

> ID：14028325
> 
> 赞同：1
> 
> 时间：2012-12-25T06:36:55.803
> 
> 标签：android, sqlite, exception

我正在使用 Sqlite 数据库并为行存储空值。我正在使用此代码在数据库中存储空值：

```
 ContentValues values = new ContentValues();
            values.put(KEY_NAME,"");
            values.put(KEY_PH_NO,"");           
            values.put(KEY_FOLDER_NAME, contact.getFolderName());
            values.put(KEY_FolderAddress, contact.getParentFolderAddress());
            values.put(KEY_TIME, contact.getTime());    
            values.put(KEY_DATE, contact.getDate()); 
```

我正在使用以下查询来检索具有空值的数据库条目：

```
String selectQuery = "SELECT  * FROM " + TABLE_CONTACTS + " WHERE "+KEY_FolderAddress+" ='"
                     +FileAddress+"'"+" AND "+KEY_FOLDER_NAME+" ='"+FileName+"'"+" AND "+KEY_DATE+" ='"+"0"+"'"
                     +" AND "+KEY_PH_NO+" ='"+""+"'"+" AND "+KEY_NAME+" ='"+""+"'"; 
```

但是我在检索空值时遇到了这个异常：

```
12-25 11:52:40.531: E/Exception:(1990): android.database.sqlite.SQLiteException: unknown error: , while compiling: SELECT  * FROM rules WHERE folderaddress ='/sdcard/Velosys/a' AND folder_name ='a' AND date ='0' AND phone_number ='' AND name ='' Exception occured in getTimeOfTheFolderFromContact() of DatabaseHandlerRule.java 
```

我进行了很多搜索，但没有得到解决方案。请帮助我找到从 sqlite 数据库中检索空值的正确方法。提前致谢

编辑：

```
I am storing 2 entries with empty values i.e KEY_NAME and KEY_PH_NO 
```

这是表格格式：

```
String CREATE_CONTACTS_TABLE = "CREATE TABLE " + TABLE_CONTACTS + "("
            + KEY_ID + " INTEGER PRIMARY KEY, " +KEY_NAME+" TEXT, "+ KEY_PH_NO + " TEXT, "
            +KEY_FOLDER_NAME+" TEXT, "+ KEY_FolderAddress + " TEXT, "+KEY_TIME + " TEXT, "+KEY_DATE+" TEXT "+")";
            db.execSQL(CREATE_CONTACTS_TABLE); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-25T07:11:07.977

您必须使用一些常见的值来存储在数据库中：

```
ContentValues values = new ContentValues();
            values.put(KEY_NAME,"null");
            values.put(KEY_PH_NO,"null"); 
```

请使用此代码检索空值：是的，您是对的，因为“空”值将作为字符串值存储在数据库中。

```
int i = resultSet.getInt(resultSet.getColumnIndex(columnName));
        String str = resultSet.getString(resultSet.getColumnIndex(columnName));
        boolean bool = resultSet.isNull(resultSet.getColumnIndex(columnName));
        if( str == null )
        {
            return -1;
        }
        return i; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-25T07:37:00.590

对于插入任何值，您的方法是正确的。例如：

```
public boolean insertSample() {
    boolean success = false;

    ContentValues values = new ContentValues();
    values.put(KEY_NAME, "");
    values.put(KEY_PH_NO, "");
    values.put(KEY_FOLDER_NAME, "foldername");
    values.put(KEY_FolderAddress, "folderAddress");
    values.put(KEY_TIME, "anytime");
    values.put(KEY_DATE, "date");

    long id = database.insert(TABLE_SAMPLe_DETAIL, null, values);

    success = id > 0;

    return success;
} 
```

对于检索，您可以像这样使用。

```
public Cursor getAllSample(String fileAddress, String fileName,
        String keyDate, String keyPhone, String keyName) {

    String whereClause = KEY_FolderAddress + "=? AND " + KEY_FOLDER_NAME
            + " =? AND " + KEY_DATE + " =? AND " + KEY_PH_NO + " =? AND "
            + KEY_NAME + " =?";
    String[] whereArgs = new String[] { String.valueOf(fileAddress),
            String.valueOf(fileName), String.valueOf(keyDate),
            String.valueOf(keyPhone), String.valueOf(keyName) };

    Cursor cursor = database.query(TABLE_SAMPLe_DETAIL, null, whereClause, whereArgs,
            null, null, null);

    if(cursor != null && cursor.getCount() > 0) {
        System.out.println("Your Query is correct");
    }

    return cursor;
} 
```

您可以将此方法称为：getAllSample("folderAddress", "foldername", "date", "", "");

其中数据库是 SQLiteDatabase 的对象。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-25T07:42:26.100

尝试将这两个值保存为字符串

```
 values.put(KEY_TIME, contact.getTime());    
        values.put(KEY_DATE, contact.getDate()); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-25T08:28:03.027

在运行每个 sql 查询之前最好在 Sqliteman 或任何 sqlite 查询浏览器上运行它，这有两个优点：
1-您可以看到语法错误并且可以修复它们。
2-你知道表的列的默认值

因此，如果 null 存储在列中，您可以在查询的 where 子句中使用“IS NULL”。

# asp.net - 在进行 AJAX 调用时，我究竟何时何地将 int 转换为枚举

> ID：14028335
> 
> 赞同：2
> 
> 时间：2012-12-25T06:39:10.660
> 
> 标签：asp.net, ajax, json, enums

我的 web 方法接收一个枚举参数。我知道从客户端我可以发送一个 int 然后将其转换为枚举。但我不知道我在何时何地进行这个选角？假设我有以下服务器方法：

```
[WebMethod]
 public static void MethodThatReceivesAnEnum(enum myEnum)
 { } 
```

这是 AJAX 调用：

```
function enumTest(){
var enumArgument=1;
$.ajax({        
    type: "POST",
    url: "Ajax.aspx/MethodThatReceivesAnEnum",
    data: JSON.stringify({ myEnum:enumArgument }),
    contentType: "application/json; charset=utf-8",
    dataType: "json",
    success:function(){}});
} 
```

我必须在 JavaScript 函数或服务器方法中做某事，还是两者都做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-25T06:43:07.257

当您传递时，`number (int) from javascript`您可以`int`在服务器上接收并将其转换为您的枚举。

```
public static void MethodThatReceivesAnEnum(int myEnumValue)
{ 
    YourEnum foo = (YourEnum)myEnumValue;
} 
```

enum 具有整数兼容类型，您可以尝试向其发送值并检查您是否获得了正确的对象。

```
public static void MethodThatReceivesAnEnum(YourEnum myEnumValue)
{ 
      if(myEnumValue == YourEnum.SomeEquilantValue)
      {

      }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-25T07:00:46.553

令我惊讶的是，只为枚举参数发送一个 int 就可以了。因此，序列化程序会自行处理转换。我应该检查然后问这个问题，但我永远不会相信这可能是真的。

# xtragrid - 如何添加到 GRidViewColumnMenu 颜色和字体编辑器

> ID：14028338
> 
> 赞同：0
> 
> 时间：2012-12-25T06:39:33.327
> 
> 标签：xtragrid

我使用 Xtragrid。我想更改默认的弹出菜单 columnmenu GridViewColumnMenu 并添加 ColorPieker 和 FontEditor 以更改列中单元格的颜色和列的字体。添加到标准菜单栏的两个编辑器都失败了。更准确地说，添加了菜单项，但是通过单击它们，什么也没有发生。我还尝试使用编辑器将所有标准菜单项添加到菜单中，并将其全部显示在 barmanager 中。在这种情况下，作为颜色和字体选择的编辑器，但标准菜单（GridViewColumnMenu）项不起作用

```
 if (e.MenuType == DevExpress.XtraGrid.Views.Grid.GridMenuType.Column)
        {
            DevExpress.XtraGrid.Menu.GridViewColumnMenu menu = e.Menu as GridViewColumnMenu;

           // menu.Items.Clear();//Erasing the default menu items 

            if (menu.Column != null)
            {
                ClickedColumn = "";
                ClickedColumn = menu.Column.FieldName;

                    DXPopupMenu dxPopupMenu = new DXPopupMenu();

                    dxPopupMenu.Items.Add(new DXEditMenuItem("Color",
                                                              new RepositoryItemColorEdit(),
                                                              new EventHandler(OnColumnsColorChanged),
                                                              null, null, 100, 0));
                    dxPopupMenu.Items.Add(new DXEditMenuItem("Font",
                                                              new RepositoryItemFontEdit(),
                                                              new EventHandler(OnColumnsFontChanged),
                                                              null, null, 100, 0));
                    DXPopupMenu sub = new DXPopupMenu();
                    sub.Caption = "FixedStyle";
                    sub.Items.Add(CreateCheckItem("Fixed None", menu.Column, FixedStyle.None, null));
                    sub.Items.Add(CreateCheckItem("Fixed Left", menu.Column, FixedStyle.Left, null));
                    sub.Items.Add(CreateCheckItem("Fixed Right", menu.Column, FixedStyle.Right, null));
                    dxPopupMenu.Items.Add(sub);

                /*
                    DXPopupMenu dx = new DXPopupMenu();
                    dx.Caption = "dx";
                    foreach (DXMenuItem item in menu.Items)
                    {
                        dx.Items.Add(item);
                    }
                    //dxPopupMenu.Items.Add(dx);
                 */

                    menu.Items.Clear();
                    Point p = e.Point;
                   // p.X += 210;
                    dxPopupMenu.MenuViewType = MenuViewType.Menu;

                    ((IDXDropDownControl)dxPopupMenu).Show(barManager1, this, p); 
```

试图同时显示菜单和菜单编辑器barmanager，一切正常。但有时菜单相互重叠并不容易。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T17:49:05.557

我有点晚了，但是如果您仍然需要帮助，请执行以下操作：

1.  处理 GridView 的 PopupMenuShowing 事件，并检查 e.MenuType 是否等于 GridMenuType.Column。
2.  将 e.Menu 对象转换为 GridViewColumnMenu，然后您可以访问其 Column 属性，该属性引用菜单触发列。此外，您现在可以访问菜单的 Items 集合。
3.  创建一个新的 DXEditMenuItem 对象，在其构造函数中，您可以设置其标题，以及要嵌入其中的任何 RepositoryItem（编辑器模板）（在您的情况下，例如颜色编辑器）。在构造中，您还必须为项目的 EditValueChanged 事件指定事件处理程序。
4.  将 Column 对象分配给 DXEditMenuItem 的 Tag 属性，以便在您处理项目 Click 事件时能够将其取回。将该项目添加到菜单的 Items 集合中。
5.  创建事件处理程序。在其中，您可以将 sender 对象强制转换为触发事件的 DXEditMenuItem，然后您可以读取它的 EditValue，以及保存 Column 对象的标签。在那里你可以做任何你需要的操作。

# c++ - 查找字符串是否包含 C++ 中的字符（允许提升）

> ID：14028343
> 
> 赞同：15
> 
> 时间：2012-12-25T06:40:24.447
> 
> 标签：c++, string, boost

假设我有一个字符串，并且我想查找是否存在特定字符（如“|”），那么最好和最快的技术是什么？我知道字符串查找实现。我要求比这个更快的实现。

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2012-12-25T06:42:46.337

利用[`std::string::find`](http://en.cppreference.com/w/cpp/string/basic_string/find)

```
if (str.find('|') != std::string::npos)
{
    // ...
} 
```

不太可能有更有效的方法。O(n) 是你能做的最好的。标准库的实现应该是最佳的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-12-28T18:22:56.033

从[这个使用 Visual Studio 2013 编译器完成的源](http://adec.altervista.org/blog/optimization-find-char-implementations-time-comparison/)经验测试表明，**strchr**例程比**std::string::find**实现快约**2 倍。**

 *** * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-12-06T13:07:44.567

添加汤姆坦纳的答案。如果您不想进行任何先验计算，您将陷入 O(n)，即您正在搜索的字符串的长度与时间消耗之间存在线性相关性。Tom 建议设置一个布尔数组（或向量）来指示某个字符是否出现。它需要 O(n) 一次来索引字符串，但是如果包含它，您可以检查 O(1) （恒定时间）中的任意数量的字符。这种方法的缺点是您将需要大量内存（一旦您决定需要支持 unicode）。

作为妥协，您可以使用 std::set 或类似的，仅存储输入字符串中实际存在的字符。内存消耗将与字符串中不同字符的数量呈线性关系，但查找将是 O(log n)，即时间上的对数。

当然，您应该测量/分析，然后在这里解释您实际优化的用例。在您这样做之前，请坚持使用最容易理解和阅读的内容。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-11-26T18:15:59.710

另一种方法是在对应的 c_str 字符串上使用 strchr 函数：

```
if(strchr(str.c_str(), '|'))
{
    \\found
} 
```

不知道它在速度方面与 std find 相比如何......

找到的字符的位置是

```
size_t pos = strchr(str.c_str(),'|') - str.c_str(); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-25T08:05:56.760

只有一种方法可以做到这一点。只需遍历字符串以检查您正在寻找的字符是否存在。您可以通过使用该`string::find`函数来执行此操作，该函数获取一个字符并返回它在字符串中出现的第一个位置，或者`string::npos`如果该值不存在。您还可以使用`std::find`，它获取两个迭代器`begin`和`end`一个键值 'k' 并返回一个迭代器，该迭代器指向 k 在 range 中的第一次出现`[begin, end]`，或者`end`如果`k`没有找到。当然，你也可以自己实现 find 函数，像这样：

```
string::size_type pos=string::npos;
for(string::size_type i=0; i<s.size(); ++i) {
  if(s[i] == key) {
     pos=i;
     break;
  }
}
if(pos != string::npos) {
  // key was found
} else {
  // not found
} 
```

或这个：

```
string::iterator pos=s.end();
for(string::iterator i=s.begin(); i!=s.end(); ++i) {
  if(*i == key) {
    pos=i;
    break;
  }
}
if(pos != s.end()) {
  // found
} else {
  // not found
} 
```

更多关于`std::string::find`and `std::find`：

*   [http://www.cplusplus.com/reference/string/string/find/](http://www.cplusplus.com/reference/string/string/find/)
*   [http://www.cplusplus.com/reference/algorithm/find/](http://www.cplusplus.com/reference/algorithm/find/)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-25T09:49:58.253

鉴于您说您想要比 string::find 更快的东西，我唯一能想到的就是创建一个具有高度自定义赋值运算符的类，该类在每次更新字符串时都会更新一个包含第一个位置的内部表每个可能字符的字符串（char 字符串为 256，宽字符串为 65536(?)）。这具有 O(1) 查找，但代价是非常量操作增加了相当多的复杂性。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-06-02T14:04:24.370

你可以试试这个：

```
 string s1 = "Hello";
   string s2 = "el";
   if(strstr(s1.c_str(),s2.c_str()))
   {
    cout << " S1 Contains S2";
   } 
```**

# floating-point - 浮点数与定点数和性能

> ID：14028346
> 
> 赞同：2
> 
> 时间：2012-12-25T06:41:23.777
> 
> 标签：floating-point, fixed-point, decimal

我很好奇浮点运算在专用硬件与固定硬件上的速度有多快。

对于定点，假设您有数字 555，并且您想乘以 1.54，您需要将值 555、154 和 100 加载到寄存器（三个时钟）中，将 555 乘以 154（四个时钟），然后除以 100 （四个时钟），然后将输出寄存器加载到内存中（一个时钟）。

使用浮点，您可以将值 555 和 1.54 加载到寄存器（两个时钟）中，获得更大的缩放/指数（一个时钟），减去缩放（一个时钟），标准化一个（四个时钟进行乘法），乘法（四个时钟），然后将输出寄存器保存到内存中（一个时钟）。

12 个固定时钟和 13 个浮动时钟。那么我是否遗漏了一些东西，并且有真正的性能优势，还是只是易于使用？我只是使用四个时钟进行乘法，显然它不会在所有处理器上都相同，但它提供了一个总体思路。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-25T07:36:27.520

使用定点数 1.54 已经以适合您的格式存储。然后，您只需进行整数乘法，然后进行常数加法以补偿舍入误差和一些筛选以使基数正确。参见[维基百科：Q 数字格式](http://en.wikipedia.org/wiki/Q_%28number_format%29)。

例如，假设 Q15.16 格式（整数 15 位，小数部分 16 位），您可以像这样执行乘法：

```
int32_t a = 555 * (1 << 16);  /* constant */
int32_t b = 1.54 * (1 << 16); /* constant, no calculations needed at run time */

int64_t temp = ((((int64_t) a) * b) + (1 << 15)) >> 16;
int32_t result = (int32_t) temp; 
```

不需要除法或其他计算（除非您需要从外部读取输入）`1.54`。`b`使用您假设的 CPU 两个负载，双精度乘法，常数加法（如果您一次执行多次乘法，则已经在寄存器中）和移位。

使用专用硬件（例如 DSP 内核或指令扩展）`Qn.m`可以直接支持某些类型，也可以采用矢量化方式。尽管使用更高级别的 CPU（现代 Intel 或 AMD），但我相信使用定点可能没有太多好处，因为浮点指令已经非常有效。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-25T09:49:30.290

对于现代处理器，查看单个指令的性能并不是很有用。许多指令既是[流水线](http://en.wikipedia.org/wiki/Instruction_pipeline)的又是超标量的，因此多条指令处于同时执行的不同阶段。

从处理器规格和代码计算性能非常困难。我通常只会这样做来估计尚不存在的处理器的性能。如果处理器和代码都存在，则更容易测量。

# jquery - 正确制作 Wookmark jQuery 顺序 div？

> ID：14028347
> 
> 赞同：1
> 
> 时间：2012-12-25T06:41:33.533
> 
> 标签：jquery, html, css

好的，所以我想使用 jQuery 插件“Wookmark”以数字顺序显示数据库中的数据。但他们按以下顺序显示它：![在此处输入图像描述](../Images/1f66974b18fcc3c16e22f94e54eb9445.png)

正如你所知道的，它们从右到左显示，然后在四个矩形之后，从左到右显示。我怎样才能让它以数字顺序显示，如下所示：

[1] [2] [3] [4]
[5] [6] [7] [8]

我不确定如何解决这个问题，所以可以在这里查看 GitHub：[https ://github.com/GBKS/Wookmark-jQuery](https://github.com/GBKS/Wookmark-jQuery)

# jquery - 为 jquery 翻转添加淡入淡出效果

> ID：14028349
> 
> 赞同：0
> 
> 时间：2012-12-25T06:42:15.180
> 
> 标签：jquery

我有这个小脚本，它通过查看包含 _off/_on 后缀的图像来完成翻转。效果很好，但我想做的是添加一个淡入淡出功能来打磨它。对不起，如果这真的很幼稚（感觉像这样）：/

我很想像这样保持简单。

```
<script type="text/javascript">
    $(document).ready(function() {
    $("img.rollover").hover(
    function() { this.src = this.src.replace("_off", "_on");
    }, 
    function() { this.src = this.src.replace("_on", "_off");
    });
    });
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-25T06:54:29.893

```
$(function(){

    var a = '_off',
        b = '_on';

    $('img.rollover').on({
        'mouseover': function() {
            $(this).fadeOut(500, function() {
                $(this).prop('src', $(this).prop('src').replace(a, b)).fadeIn(500);
            });
        },
        'mouseout': function() {
            $(this).fadeOut(500, function() {
                $(this).prop('src', $(this).prop('src').replace(b, a)).fadeIn(500);
            });
        }
    });​
 }); 
```

[一个样本小提琴](http://jsfiddle.net/AApNf/)

这应该运作良好。

# proguard - ProGuard：如何保持整个班级，但它的构造者

> ID：14028353
> 
> 赞同：0
> 
> 时间：2012-12-25T06:42:38.930
> 
> 标签：proguard

有没有办法指定保留一个类的所有成员和方法，而不是它的构造函数。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-25T06:51:03.223

使用该`-keep`选项并指定构造函数名称。更多信息在这里（向下滚动到“保留选项”部分：[Proguard 使用](http://proguard.sourceforge.net/index.html#manual/usage.html)

例如，您可以使用 ! 执行以下操作：

```
-keep class !com.yourcompany.YourClass {
  <init>(...);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-26T10:19:51.893

这是一个不寻常的要求，但这应该有效：

```
-keepclassmembers class mypackage.MyClass {
  <fields>;
  *** !<init>(...);
} 
```

第三行匹配具有任何返回值、任何参数和任何名称的方法，除了`<init>`.

保留一个类`-keep`也会自动保留其无参数构造函数。

在代码中实例化一个类当然也会导致相应的构造函数被保留。

# c - 使用构造 struct { a[0] } 测试；

> ID：14028359
> 
> 赞同：0
> 
> 时间：2012-12-25T06:44:35.363
> 
> 标签：c, linux-kernel

我猜不出结构的使用，例如

```
struct 
{
    uint64_t offsets[0];
} table; 
```

请给我一些提示。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-25T06:50:11.250

您发布的代码正式无效。形式上 C 语言不支持 size 的数组`0`。

一些编译器（带有松散/遗留错误检查）允许在结构末尾放置一个大小为零的数组，这有时用于实现所谓的[“struct hack”](https://stackoverflow.com/questions/3711233/is-the-struct-hack-technically-undefined-behavior)。（更好的方法是使用大小为 1 的尾随数组。）但是，您的声明并未提供该用途。“结构破解”需要命名结构类型，并且必须动态分配实际对象。在您的情况下，结构类型未命名，并且变量`table`是非动态定义的。因此，假设您正确复制了代码，“struct hack”在这里是没有问题的。

因此，即使它编译，您最终也会得到`table`不包含可用数据的变量。这个变量的唯一用途（如果用静态存储持续时间声明）是通过`&table`表达式（“指向匿名结构的指针”类型的指针）产生一个唯一的地址常量。

将您的声明变成更接近“struct hack”的一种方法是`typedef`在它前面添加一个

```
typedef struct 
{
  uint64_t offsets[0];
} table; 
```

但是，“struct hack”的“人工生成”结构声明通常会在灵活数组声明之前包含其他数据字段（没有它们，在普通数组上选择“struct hack”根本没有意义）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-25T06:51:18.460

这是一个技巧，可让您将任意大小的内存块转换为指针类型，并使最后一个数组成员成为可变长度数组。虽然可能不是标准的，但这是可行的，因为 C 数组没有经过边界检查。

这是一个非常简单的示例来演示它：

```
typedef struct Foo
{
    int count;
    int array[0];
} Foo;

Foo* foo = (Foo*)malloc(sizeof(Foo) + 5 * sizeof(int));
foo->count = 5; 
```

然后，您可以使用该`count`字段来了解`Foo*`. 由于如上所述，C 数组没有边界检查，因此`foo->array`当您尝试读取或写入它时，编译器和运行时都不会捕获大小为 0 的数组。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-25T06:48:41.513

您定义的未命名`struct`实际上`table`是对象而不是`struct`名称。

所以，如果你有这个声明

```
typedef struct 
{
    uint64_t offsets[0];
} table; 
```

或者，

```
 struct table
    {
        uint64_t offsets[0];
    } table; 
```

然后，这称为变长数组（称为**struct hack**）。

有一个限制，它应该是结构的最后一个成员。

有关它的更多信息，[请参阅这篇关于 struct hack 的文章](http://www.geeksforgeeks.org/struct-hack/)

# iphone - iphone SDK中的自定义导航栏？

> ID：14028361
> 
> 赞同：-2
> 
> 时间：2012-12-25T06:45:09.003
> 
> 标签：iphone, objective-c, uinavigationcontroller

如何设置导航栏外观如下：

![在此处输入图像描述](../Images/776a4d3a168d40c86ef02a9c6da13269.png)

*我只有白色三角形的图像。*

我怎样才能设置像那个图像的栏按钮一样的背景？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-25T08:16:36.460

将导航项的标题视图设置为分段控件。然后将段的图像设置为您的箭头。

您可以在 xib 或情节提要中完成整个界面。只需将分段控件拖到视图控制器中的标题上即可。

# qt - Qt Fresh Gui 应用程序在启动时崩溃，在 QtCore4.dll 出现故障

> ID：14028362
> 
> 赞同：1
> 
> 时间：2012-12-25T06:45:23.317
> 
> 标签：qt, user-interface, crash, mingw

我对在 C++ 中开发 GUI 应用程序比较陌生，并且在开始时遇到了一些问题。所以这里的故事：

*   我下载并使用 MinGW 4.7.2 编译了 QT 库 (v4.8.3) 并配置了 qtcreator 以使用它。

*   我可以编译和运行一个普通的非 qt 控制台应用程序就好了。

但是当我尝试创建一个新的 GUI 应用程序时，Windows 7 说创建的 exe “已停止工作......”详细信息：

```
 Fault Module Name:    QtCore4.dll
  Fault Module Version: 4.7.0.0 
```

现在困扰我的是它说版本是 4.7，但我真的打算使用 4.8.3。现在，当我通过事件查看器进一步调查时，我注意到：
`Faulting module path: C:\Windows\system32\QtCore4.dll`
但我的系统上不存在这样的文件！ **此外，当我将 QtCore4.dll 和 QtGui4.dll（均为 v4.8.3）**复制到包含 exe 的“发布”文件夹时
，我发现我的应用程序可以正常工作。

 **所以我真的很想知道神秘的旧 dll 是如何出现并把事情搞砸的……

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-25T08:35:33.627

您将看到正在运行的[Windows 7 32 位兼容层](http://en.wikipedia.org/wiki/WoW64)。里面的文件`system32`其实就是各种系统文件的64位版本。您应该在`C:\Windows\SysWOW64`.**

# python - Django注册无法显示欢迎页面

> ID：14028363
> 
> 赞同：2
> 
> 时间：2012-12-25T06:45:38.677
> 
> 标签：python, django, bitbucket, django-login

我对 Django/Python 很陌生。我使用[了 bitbucket 的](https://bitbucket.org/ubernostrum/django-registration/src/27bccd108cde/docs/quickstart.rst#id1) **Django 注册指南**。我已经完成了所有必要的事情。我可以登录[数据库更新]并正确注册，但登录后显示错误。`settings.py`文件有： `ROOT_URLCONF = 'myhandbook.urls'`而我的`urls.py`有：

```
from django.conf.urls.defaults import *

urlpatterns = patterns('',
    (r'^accounts/', include('registration.urls')),
) 
```

我已经提到了`url`错误是关于的部分`urls`。我收到一个`Page Not Found (404)`错误。

在[bitbucket 的](https://bitbucket.org/ubernostrum/django-registration/src/27bccd108cde/docs/quickstart.rst#id1)文档中有一部分**设置 URL**是我无法理解的，并且尝试了很多方法来纠正它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-25T08:02:48.813

您需要为主页添加 url。例如：

```
from django.views.generic import TemplateView

urlpatterns = patterns('',
    url(r'^$', TemplateView.as_view(template_name="home.html"), name='home'),
    (r'^accounts/', include('registration.urls')),
) 
```

然后你可以用你的视图替换它。

# hyperlink - 如何从另一个页面链接到任何尾声滑块选项卡

> ID：14028367
> 
> 赞同：1
> 
> 时间：2012-12-25T06:45:59.077
> 
> 标签：hyperlink, tabs, slider, coda

我无法从另一个页面直接链接到 coda 滑块的选项卡。[Coda Slider](http://kevinbatdorf.github.com/codaslider/)的网站介绍了如何从同一页面链接到任何选项卡。像这样

`<a href="#3" data-ref="slider-id">Tab 3</a>` （第三个标签的#3）

但是没有从另一个页面链接的信息。

我的滑块页面是 index.html ，同一文件夹中的另一个页面是 abc.html 。

我试过`<a href="index.html#3" data-ref="slider-id">Tab 3</a>`了，但没有用。

请帮忙。

# java - 如何获取显示大于 500 行的 Java 类的报告？（并在 Jenkins 上发布）

> ID：14028371
> 
> 赞同：-1
> 
> 时间：2012-12-25T06:46:36.363
> 
> 标签：java, jenkins, static-code-analysis

我有很多太大的类的遗留项目。我需要将其作为报告提交给经理，以开始清理和重构。我已经为这个项目配置了[PMD](http://pmd.sourceforge.net/) maven 目标的[Jenkins](http://jenkins-ci.org/)工作：

> pmd:pmd

我正在研究：

如何获取超过 500 行的 Java 类（和 JavaScript、HTML 文件......）列表？

如何获取函数超过 50 行的 Java 类列表？

最好在 Jenkins 上发布，即作为报告。
但是，任何简单的解决方案都可以。例如：作为完整的类名、LOC（代码行）的普通列表。按 LOC 降序排序。

简单格式

```
Name LOC
com.example.HugeClass 5000
com.example.BigClass  3540
com.example.BigClass2 3390 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-25T08:32:43.423

使用[Checkstyle](http://checkstyle.sourceforge.net/config_sizes.html)，或使用[SONAR](http://www.sonarsource.org/)，它聚合了 Checkstyle、PMD、Findbugs 和其他检查并生成报告等。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-28T05:06:40.913

有很多工具。[http://en.wikipedia.org/wiki/List_of_tools_for_static_code_analysis#Java](http://en.wikipedia.org/wiki/List_of_tools_for_static_code_analysis#Java) 您需要选择一个并了解如何配置它。

# javascript - iframe 跨域问题

> ID：14028372
> 
> 赞同：0
> 
> 时间：2012-12-25T06:47:02.010
> 
> 标签：javascript, jquery, iframe, cross-domain

我想每隔几秒钟将一条消息从 iframe 传递到父页面，例如：

```
Iframe Domain = www.abc.com
Parent Domain = www.xyz.com 
```

检查：

*   [跨域 iframe 问题](https://stackoverflow.com/questions/9393532/cross-domain-iframe-issue)
*   [https://stackoverflow.com/questions/5203741/jquery-cross-iframe-script-loading-ownerdocument-issue](https://stackoverflow.com/questions/5203741/jquery-cross-iframe-script-loading-ownerdocument-issue)

有人可以帮我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-10-27T17:22:03.833

我最近刚刚帮助了另一个有类似问题的人，在 IFrame 之间传递消息。（请参阅[IFrame 和父级之间的跨文档消息传递问题](https://stackoverflow.com/questions/39992021/issues-with-cross-document-messaging-between-iframe-parent/40288576#40288576)）。

使用我在上述主题中从**suamikim借来的代码的修改版本，我集成了一个计时器。**这对您来说应该是一个很好的起点。这些父 html 页面和子 html 页面将跨域工作，正如**Amadan**在上面的评论中所描述的那样。我刚刚测试并确认了这一点，将***parent.html***放在一个域上，该域指向一个完全独立的不受信任域上的***child.html 。***

***父.html***

```
<html>
<head>
    <script type="text/javascript">
        function parentInitialize() {
            var count = 0;
            window.addEventListener('message', function (e) {
                // Check message origin etc...
                if (e.data.type === 'iFrameRequest') {
                    var obj = {
                        type: 'parentResponse',
                        responseData: 'Response #' + count++
                    };
                    e.source.postMessage(obj, '*');
                }
                // ...
            })
		}
    </script>
</head>
<body style="background-color: rgb(72, 222, 218);" onload="javascript: parentInitialize();">
    <iframe src="child.html" style="width: 500px; height:350px;"></iframe>
</body>
</html>
```

***child.html***

```
<html>
<head>
    <script type="text/javascript">
        function childInitialize() {
            // ...

            try {
                if (window.self === window.top) {
                    // We're not inside an IFrame, don't do anything...
                    return;
                }
            } catch (e) {
                // Browsers can block access to window.top due to same origin policy.
                // See https://stackoverflow.com/a/326076
                // If this happens, we are inside an IFrame...
            }

            function messageHandler(e) {
                if (e.data && (e.data.type === 'parentResponse')) {
                    // Do some stuff with the sent data
                    var obj = document.getElementById("status");
                    obj.value = e.data.responseData;
                }
            }

            window.addEventListener('message', messageHandler, false);

            setInterval(function () {
                window.parent.postMessage({ type: 'iFrameRequest' }, '*');
            }, 1000);
            // ...
        }
    </script>
</head>
<body style="background-color: rgb(0, 148, 255);" onload="javascript: childInitialize();">
    <textarea type="text" style="width:400px; height:250px;" id="status" />
</body>
</html>
```

祝你好运！

# hibernate - Hibernate 用 ArrayList 替换 PersistentBag 在同一个请求中再次返回

> ID：14028373
> 
> 赞同：1
> 
> 时间：2012-12-25T06:47:11.627
> 
> 标签：hibernate, jsf-2, lazy-loading, mojarra

在支持 bean`edit()`方法中，我有以下代码

```
public void edit(Entity e) {
    this.entity = entityService.find(e);
    this.entity.setLazyList(new ArrayList(this.entity.getLazyList()));
}
public Entity getEntity() {
    return this.entity;
} 
```

如图所示，我通过用自己的`ArrayList`. **奇怪的是，内部惰性列表一存在方法`PersistentBag`就会返回`edit()`**。我做了什么来发现这种行为：

1.  在编辑方法中放置一个断点。找到后，我看到已创建实体的 JVM ID，说它是 101。
2.  在方法中设置一个断点`getEntity()`。`edit()`存在后被`getEntity()`调用，实体的JVM ID还是101，但是`entity.lazyList`有`PersistentBag`而不是`ArrayList`。

我的 LazyList 绑定到 . 然后，当我在 JSF 页面中按下保存按钮时，此 PersistentBag 会导致 LazyInitializationException。抛出异常（在调用支持 bean 中的 save() 方法之前）因为来自 Mojarra 的这一部分（也用 MyFaces 测试，它也抛出异常）：

*菜单渲染器，行：365*

```
// No cloned instance so if the modelType happens to represent a
// concrete type (probably not the norm) try to reflect a
// no-argument constructor and invoke if available.
if (targetCollection == null) {
    //noinspection unchecked
    targetCollection =
          createCollection(currentValue, modelType);
} 
```

由于`currentValue`不幸的是 PersistentBag（并且也已初始化），因此 createCollection() 返回此对象的新实例，该实例不再知道会话和加载的对象。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T05:26:38.510

刚刚添加**`<f:attribute name="collectionType" value="java.util.ArrayList" />`**到我`<h:selectManyCheckBox>`的里面，懒惰的异常就解决了。不再需要使用 ArrayList 手动更改 PersistentBag：

```
this.entity.setLazyList(new ArrayList(this.entity.getLazyList())); 
```

此属性（适用于 Mojarra 和 MyFaces）告诉 JSF impl 使用此集合类型而不是绑定到元素的原始类型：

```
<h:selectManyCheckbox value="#{backingBean.entity.lazyList}">
     <f:attribute name="collectionType" value="java.util.ArrayList" />
     <f:selectItems value="#{backingBean.allItems}" var="i" itemLabel="#{i.title}"/>
</h:selectManyCheckbox> 
```

# sql - 从两张桌子上获得派对余额

> ID：14028376
> 
> 赞同：0
> 
> 时间：2012-12-25T06:48:39.553
> 
> 标签：sql, sql-server, sql-server-2008

> **可能重复：**
> [显示多个表中的帐户余额](https://stackoverflow.com/questions/14027868/show-account-balance-from-multiple-tables)

我有两个表如下

凭证Cr

```
srno    vouchertype voucherprefix   voucherno   crparty cramount
1        PURCHASE       P              1            2   55000
2        PAYMENT        R              1            1   55000 
```

凭证博士

```
srno    vouchertype voucherprefix   voucherno   drparty dramount
1        PURCHASE       P              1            4   54000
2        PAYMENT        R              1            2   55000
3        PURCHASE       P              1            4       1000 
```

在这里，在 PURCHASE 凭证 P/1 中，我从第 2 方购买价值 55000 的商品，在 PAYMENT 凭证 R/1 中，我向第 2 方支付 55000 卢比。

现在如果我查询第 2 方，我想以以下格式显示信息

```
VTYPE      VPRE      VNO      AGAINSTPARTY      CREDIT      DEBIT
PURCHASE   P         1        4                 55000       NULL
PAYMENT    R         1        1                 NULL        55000 
```

因此，第 2 方的期末余额将为零，因为我已向他们支付 55000，而不是购买 55000

你能帮助我吗？

**更新** 我尝试了以下但没有结果

```
select * from voucherCr vc
full outer join voucherDr vd
on vc.voucherno=vd.voucherno
and vc.voucherprefix=vd.voucherprefix
and vc.vouchertype=vd.vouchertype
where vc.crparty=2 or vd.drparty=2 
```

**更新 2**

如果任何一个表中有多个条目用于相同的凭证编号和凭证前缀，我会得到错误的结果。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-25T08:17:07.950

我认为你需要这个：

```
select C.vouchertype,C.voucherprefix,C.voucherno,D.drparty,C.cramount AS CREDIT,NULL as DEBIT
from voucherCr C
inner join voucherDr D on C.vouchertype=D.vouchertype and C.voucherprefix=D.voucherprefix    and C.voucherno=D.voucherno
and C.crparty=2
union
select D.vouchertype,D.voucherprefix,D.voucherno,C.crparty,NULL as CREDIT,D.dramount AS   DEBIT
from voucherCr C
inner join voucherDr D on C.vouchertype=D.vouchertype and C.voucherprefix=D.voucherprefix and C.voucherno=D.voucherno
and D.Drparty=2 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-25T10:07:54.487

```
`SELECT *   
 FROM voucherCr VC  
   FULL OUTER JOIN voucherDr VD ON VC.crparty = VD.drparty  
 WHERE  
   (VC.crparty IS NULL OR VD.drparty IS NULL)` 
```

示例：[http ://www.sqlfiddle.com/#!3/74419/45](http://www.sqlfiddle.com/#!3/74419/45)

# java - 自动添加日志事件的 Java Eclipse 插件

> ID：14028383
> 
> 赞同：3
> 
> 时间：2012-12-25T06:49:16.340
> 
> 标签：java, eclipse, logging, eclipse-plugin

我想在我的 Eclipse(Helios) 中添加一个插件，用于记录我的函数开始和结束。更准确地说，我正在寻找这样的东西。

```
TestClass {

    private static final Logger logger = Logger.getLog("TestClass");

    public void displayHello () {
        System.out.println("Fooo");
    }
} 
```

添加插件并启用功能日志记录后，我期待以下内容

```
TestClass {
  private static final Logger logger = Logger.getLog("TestClass");
   public void displayHello () {
     logger.debug ("displayHello() - Started");
     System.out.println("Fooo");
     logger.debug ("displayHello() - Ended");
   }
 } 
```

我记得以前用过一些方法来获得相同的东西，但现在无法回忆起来。有人可以帮我解决这个问题吗？

谢谢阿尼什

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-25T07:08:02.013

你应该看看[AspectJ](http://www.eclipse.org/aspectj/)和[Spring AOP](http://static.springsource.org/spring/docs/2.5.x/reference/aop.html)它支持这样的东西，

```
execution(* com.java.test..*.*(..)) 
```

这将涵盖项目所有子包中的所有方法。所以不需要一一定义所有的方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T05:24:26.693

Since the question is about Eclipse plugins, I am assuming that the places you want to log do not necessarily exist in a single plugin. AspectJ is a good suggestion. However, standard AspectJ or Spring AOP will not be sufficient since it is classloader based. You will need to use [Equinox Weaving](https://www.eclipse.org/equinox/weaving/).

Equinox Weaving performs load-time weaving in an OSGi-aware way. Essentially, you create your plugins and augment your manifest files with the proper weaving configuration.

# amazon-web-services - 很少有关于 AWS 实例连接和 CPU 利用率的查询

> ID：14028385
> 
> 赞同：0
> 
> 时间：2012-12-25T06:49:41.093
> 
> 标签：amazon-web-services, amazon-ec2

我们有一个在 AWS 上运行的网站。详情如下：

1.  实例类型为 m1.medium（之前为 t1.micro，最近升级为 medium）。
2.  AMI：Ubuntu 12.04
3.  安装了 Apache 和 PHP

该网站运行顺利，除了一些 PHP 代码和 JavaScript 外，该网站还没有使用任何数据库。该网站处理显示图像，但不在服务器上存储图像。但该实例的平均 CPU 利用率图表显示从一开始就频繁出现峰值。可以从此[链接](http://imgur.com/WzhqM)查看屏幕截图。

我们尝试按照此处其他线程中的建议使用 SSH 运行“top”命令。但问题是，当我们在“top”命令后按回车时，什么都没有显示；它挂断了。我们尝试使用 root 和默认用户。

此外，我们可以通过 SSH 进行 FTP 和连接，但不能下载/打开文件（但可以添加/删除文件）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-25T09:23:00.160

从图中看来，cpu 负载似乎始终保持在 100% 每小时 2 次（在 :15 和 :45）。我建议您检查您的 crontab（在您的用户和 root 用户上），看看是否有任何条目可能导致这个。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-25T11:34:12.927

如果您试图发现每分钟运行的内容，您可以运行`top`到一个文件中

```
top -n 60 -b -d 60 > whats_running.txt 
```

它将在批处理模式下运行 60 次，在采样之间等待 60 秒

记得运行是`root`

# c# - 复合控件 - 如何从 postbackdatacollection 中获取数据

> ID：14028389
> 
> 赞同：0
> 
> 时间：2012-12-25T06:50:17.630
> 
> 标签：c#, asp.net, custom-controls

我知道复合控件会自动处理回发数据。但是我有一个要求，我将下拉列表放在复合控件中并将其绑定到每个回发。

每次回发后，我看到下拉菜单保留了其选定的值。

问题是，在回发期间，当我尝试获取所选值时，它是空的。

我认为这是因为我试图过早地获得选定的值。（在做 dropdown.databind() 之后）

有人能告诉我，如何从回发数据收集中获取选定的值吗？或者在什么情况下我会在复合控件中获得正确的选定值？

这是我的 ovverriden 数据绑定方法：

```
public override void DataBind()
{
    base.DataBind();

    addressDataSet = new AddressDataSet();
    countryAdapter = new CountriesForAddressTableAdapter();
    countryAdapter.Fill(addressDataSet.CountriesForAddress);

    maindropdown.DataSource = addressDataSet.CountriesForAddress;
    maindropdown.DataTextField = "Name";
    maindropdown.DataValueField = "CountryId";
    maindropdown.DataBind();

    if (!maindropdown.Value.IsNullOrEmpty()) <- THIS Value ALWAYS COMES AS NULL
    {
        fieldAdapter = new CountrySpecificFieldsTableAdapter();
        fieldAdapter.Fill(addressDataSet.CountrySpecificFields, int.Parse(maindropdown.Value));
    }
} 
```

* * *

//HttpContext.Current.Request.Form[] <- 我在这里找到了 DROPDOWN 的值

但想知道我必须做什么才能通过下拉属性获取价值，即 dropdown.selectedValue

# full-text-search - 创建 sphinx conf 文件

> ID：14028390
> 
> 赞同：0
> 
> 时间：2012-12-25T06:50:19.940
> 
> 标签：full-text-search, sphinx

我有一个查询如下

```
select SystemId, Id, FirstName, LastName,AptUnitNo, Zip, StreetName,streetnumber (case when LastName like 'robe%' then -8 else 0 end ) as Ordervalue 
from registeredusers 
Where LastName like 'robe%') 
order by Ordervalue, LastName,FirstName , StreetName, StreetNumber ASC 
limit 0,50 
```

如何为上述查询创建 sphinx conf 文件。

戴尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-25T13:29:58.393

您需要将查询放在配置文件中的 sql_query 选项中。

您可以在此处找到有关如何创建配置文件、执行初始索引和运行您的第一个 Sphinx 查询的分步指南：http: [//astellar.com/2011/12/replacing-mysql-full-text-search-with-sphinx /](http://astellar.com/2011/12/replacing-mysql-full-text-search-with-sphinx/)

# php - 修改 cakephp 中的 Url 并在 url 上添加参数？

> ID：14028395
> 
> 赞同：0
> 
> 时间：2012-12-25T06:51:18.287
> 
> 标签：php, cakephp

如何从 cakephp 中的 Url 中删除操作名称？我试图从 routes.php 做到这一点，但没有成功我的网址是：[http ://www.example.com/liberty_new/users/home](http://www.example.com/liberty_new/users/home)

在 routes.php 我已经完成了

```
Router::connect('/', array('controller' => 'users', 'action' => 'home')); 
```

我想从 url 中删除操作名称，并且只想在 url 中设置参数。如果我使用 $this->redirect(array('controller'=>'users','action'=>'home','parm1',param2));

在这个重定向 URL 中看起来像

[http://www.example.com/users/home/param1/param2](http://www.example.com/users/home/param1/param2) 但我希望 url 看起来像

[http://www.example.com/users/param1/param2](http://www.example.com/users/param1/param2)

其中“用户”是我的控制器名称
请建议我解决方案

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-25T07:18:45.097

如果你有

```
Router::connect('/', array('controller' => 'users', 'action' => 'home')); 
```

你应该去

```
/ 
```

什么不工作？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-29T08:59:50.987

```
Router::connect('/', array('controller' => 'users', 'action' => 'home'));
Router::connect('/users/*', array('controller' => 'users', 'action' => 'home')); 
```

# epoll - 如何将 epoll 与 data->ptr 一起使用，而不是 data.fd？

> ID：14028401
> 
> 赞同：4
> 
> 时间：2012-12-25T06:52:47.210
> 
> 标签：epoll

我正在使用 epoll 和大量 fd 编写应用程序。为了改进 fd 对应用程序相关 DB 的搜索，我想传递给 epoll 应用程序信息，例如 DB 数组中的索引。我想过使用data->ptr（epoll_data_t --> *ptr），据我了解，我可以给出保存应用层fd和私有信息的指针，但找不到任何文档或示例。

找到了这个帖子，好像是相关的，但是没有实现例子…… [如何使用epoll_event data.ptr](https://stackoverflow.com/questions/11916707/how-to-use-epoll-event-data-ptr)

谢谢

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-25T07:12:45.187

你可以放任何你想要的东西`data`。epoll 本身不使用它，它只是在参数列表中指定的 fd 上发生事件时返回它。

# java - Java XML - 同名的嵌套元素

> ID：14028404
> 
> 赞同：-1
> 
> 时间：2012-12-25T06:53:30.170
> 
> 标签：java, xml, xml-parsing

如何使用 Java XML 访问具有相同名称和递归包含的元素？这在 python ElementTree 中有效，但由于某种原因，我需要让它在 Java 中运行。

我试过了：

```
String filepath = ("file.xml");
DocumentBuilderFactory docFactory = DocumentBuilderFactory.newInstance();
DocumentBuilder docBuilder = docFactory.newDocumentBuilder();
Document doc = docBuilder.parse(filepath);

NodeList nl = doc.getElementsByTagName("*/*/foo"); 
```

例子

```
<foo>
  <foo>
     <foo>
     </foo>
  </foo>
</foo> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-25T07:58:22.350

您似乎认为[`getElementsByTagName`](http://docs.oracle.com/javase/7/docs/api/org/w3c/dom/Document.html#getElementsByTagName%28java.lang.String%29)采用 XPath 表达式。它没有。如文件所述：

> 返回具有给定标签名称并包含在文档中的所有元素的节点列表。

如果您需要使用 XPath，您应该查看[`javax.xml.xpath`](http://docs.oracle.com/javase/7/docs/api/javax/xml/xpath/package-frame.html)包。示例代码：

```
Object set = xpath.evaluate("*/*/foo", doc, XPathConstants.NODESET);

NodeList list = (NodeList) set;
int count = list.getLength();
for (int i = 0; i < count; i++) {
    Node node = list.item(i);
    // Handle the node
} 
```

# apache - Ubuntu VPS 上的虚拟主机

> ID：14028407
> 
> 赞同：1
> 
> 时间：2012-12-25T06:54:14.440
> 
> 标签：apache, virtualhost

运行 ubuntu 11.10 的 VPS

使用 Webmin 创建了一个虚拟主机 [www.site1.com] 一切正常。

使用 Webmin 创建另一个虚拟主机 [www.site2.com] 此时 www.site1.com 和 www.site2.com 都指向同一个 www.site2.com，即使它们具有不同的文档根目录。

site1.com 和 site2.com 名称服务器都是在同一台服务器上创建的。

如果虚拟主机 www.site2.com 被删除，则 www.site1.com 开始正常运行。

我究竟做错了什么？

提前致谢。

# javascript - 更快地显示 HTML 标题属性

> ID：14028408
> 
> 赞同：4
> 
> 时间：2012-12-25T06:54:18.740
> 
> 标签：javascript, html

有没有办法减少 HTML 标题属性的显示延迟？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-25T06:56:33.320

如果您实现自己的工具提示机制，您可以自由调整显示时间。无法修改本机工具提示。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-25T06:58:11.533

假设没有延迟，当您将鼠标移到页面上时，如果您经过的每个元素都立即弹出标题工具提示，那将是多么令人困惑。我认为 ew 无法消除这种延迟。

有许多可用的 jquery api，可以用作工具提示功能的替代品。例如：qtip

# asp.net - 发布后，我的 Umbraco 管理面板没有在 IE9 中显示。但它出现在 FF 和 Chrome 浏览器中

> ID：14028410
> 
> 赞同：6
> 
> 时间：2012-12-25T06:54:26.097
> 
> 标签：asp.net, web, umbraco, publishing-site

发布后，我的 Umbraco 管理面板没有在 IE9 中显示。但它出现在 FF 和 Chrome 浏览器中。

注意：在发布网站之前，我从 Visual Studio 2012 运行它，我观察到一切正常。

谁能帮我？

![在 IE9 中](../Images/100a6b39efc471951f685608a57c3a55.png) ![在火狐中](../Images/1d78917e5661d6d61a203051c3a25c77.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T15:14:49.070

消失的树通常与`Treedataservice.ashx`调用中的错误有关。

如果您在 IE9 中使用 F12 开发人员工具，您应该能够从“网络”选项卡中获取此 Web 服务调用的 URL，它看起来像这样：

> [http://your-domain.local/umbraco/webservices/TreeDataService.ashx?rnd=d4859dc821714624be368bdafb1dd1d9&id=-1&treeType=content&contextMenu=true&isDialog=false&rnd2=89.4](http://your-domain.local/umbraco/webservices/TreeDataService.ashx?rnd=d4859dc821714624be368bdafb1dd1d9&id=-1&treeType=content&contextMenu=true&isDialog=false&rnd2=89.4)

然后，当您直接从浏览器调用 Web 服务 url 时，您应该能够看到返回的错误，从而确定确切的问题。

我已经用 IE9 测试了 4.11.1 并且树工作正常，因此它表明问题出在您的实例上。

如果上述 Web 服务正常运行（它应该返回 JSON），那么可能值得检查其他 Web 服务调用，例如`TreeClientService.asmx`是否有错误。

在大多数情况下，检查这些 Web 服务将揭示导致树无法呈现的实际问题。

# makefile - 在宏定义中设置变量的推荐方法是什么

> ID：14028420
> 
> 赞同：0
> 
> 时间：2012-12-25T06:56:16.243
> 
> 标签：makefile

我在 gmake 中定义了一个宏来在调用底层函数之前设置一个变量，然后将其重置：

```
define InstallWithPermission
    $(eval ORIG_INSTALL_FILE_MODE = $(INSTALL_FILE_MODE))
    $(eval INSTALL_FILE_MODE = $(1))
    $(InstallFile)
    $(eval INSTALL_FILE_MODE = $(ORIG_INSTALL_FILE_MODE))
    $(eval ORIG_INSTALL_FILE_MODE = )
endef 
```

此处 $(InstallFile) 将调用*安装*命令，并将 INSTALL_FILE_MODE 作为其文件模式。

*   为了在宏定义中设置变量，我使用*eval*函数
*   为了确保 ORIG_INSTALL_FILE_MODE 是*本地*的，我在 maro 结束时将其重置为空

这应该是在宏定义中操作“局部变量”的正确方法吗？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-25T14:07:02.910

有一种更清洁的方法来做你正在尝试的事情。诀窍是仔细跟踪扩展，在这种情况下，使用简单的扩展变量来避免循环定义：

```
define InstallWithPermission
  ORIG_INSTALL_FILE_MODE := $(INSTALL_FILE_MODE)
  INSTALL_FILE_MODE := $(1)
  $$(InstallFile)
  INSTALL_FILE_MODE := $$(ORIG_INSTALL_FILE_MODE)
endef 
```

但我建议你完全不用这些局部变量，并`InstallFile`接受一个论点。

# javascript - 检查选择框值并将它们与输入进行比较

> ID：14028428
> 
> 赞同：1
> 
> 时间：2012-12-25T06:57:47.633
> 
> 标签：javascript, jquery

我想检查文本字段 newTeamName 是否已经在存储在选择框中的团队名称列表中。不幸的是，我的代码不起作用 - 它有什么问题？哦，我没有控制台问题。

```
 optionList = [];
    $('#chooseTeam option').each(function() {
        optionList.push($(this).val())
    });
    if (form.newTeamName.value in optionList) {
        $("#text-error").html("Team exists");
        $('#text-error').fadeIn(400).delay(3200).fadeOut(800);
        return false;
    } 
```

小更新：

哦，我的 form.name.value 工作正常，因为它们适用于其他 if 语句。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-25T07:04:46.030

`optionList`是一个[`in`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Operators/in)用于对象属性（或数字数组索引）的数组，您可以使用它[`indexOf`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/indexOf)来测试一个值是否在数组中

```
optionList = [];
$('#chooseTeam option').each(function() {
    optionList.push($(this).val())
});
if (optionList.indexOf(form.newTeamName.value) > -1) {
    $("#text-error").html("Team exists");
    $('#text-error').fadeIn(400).delay(3200).fadeOut(800);
    return false;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-25T07:08:17.657

修复。

```
 $('#chooseTeam option').each(function() {
        if (form.newTeamName.value == $(this).val()){
            $("#text-error").html("Team exists");
            $('#text-error').fadeIn(400).delay(3200).fadeOut(800);
            return false;
        }
    }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-25T07:41:52.673

尝试这样的事情

```
 my_array = Array();

  //To find if a value or element exists in an array
  if (my_array.indexOf(‘find_this_value’) != -1)
  {
        alert(‘Value exists in array.’);
  }

 //To find if a value or element DOES NOT exist in an array
 if (my_array.indexOf(‘find_this_value’) == -1)
 {
     alert(‘Value does not exist in array.’);
 } 
```

# android - 创建 SpannableString 时抛出 NullPointerException

> ID：14028430
> 
> 赞同：0
> 
> 时间：2012-12-25T06:58:06.053
> 
> 标签：android, textview, spannablestring

我正在尝试创建一个 textview，其文本使用 spannableString 部分下划线，但是当我尝试这样做时，我得到了一个 nullpointerexception。这是我的代码：

```
tv = (TextView) findViewById(R.id.tvHelp);
    SpannableString content = new SpannableString("Underlined text");
    content.setSpan(new UnderlineSpan(), 0, content.length(), 0);
    tv.setText(content+"non-underlined text"); //exception is thrown here
    super.onCreate(savedInstanceState); 
```

在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-25T07:05:42.177

```
tv = (TextView) findViewById(R.id.tvHelp);
SpannableString content = new SpannableString("Underlined text");
content.setSpan(new UnderlineSpan(), 0, content.length(), 0);
tv.setText(content+"non-underlined text"); //exception is thrown here 
```

将上面的代码写在后面

```
super.onCreate(savedInstanceState);
and
setContentView("Your Layout"); 
```

# java - 请帮我开发一个 cq 5.4 WorkflowProcess

> ID：14028432
> 
> 赞同：-2
> 
> 时间：2012-12-25T06:58:23.250
> 
> 标签：java, jakarta-ee, aem

我正在尝试创建一个`CQ`5.4 工作流程来更新启动此工作流程的数字资产图像的描述。`CQ`我的问题是，当我编译和构建此代码时，WorkFlow Process 没有出现在5.4 作者服务器实例中的 Process Step 下拉列表中。

这是代码，如果需要任何其他步骤或者我在某处做错了，请告诉我，

```
import org.apache.felix.scr.annotations.Component;
import org.apache.felix.scr.annotations.Properties;
import org.apache.felix.scr.annotations.Property;
import org.apache.felix.scr.annotations.Service;
import org.slf4j.Logger;
import org.slf4j.LoggerFactory;

import com.day.cq.dam.commons.process.AbstractAssetWorkflowProcess;
import com.day.cq.workflow.WorkflowException;
import com.day.cq.workflow.WorkflowSession;
import com.day.cq.workflow.exec.WorkItem;
import com.day.cq.workflow.exec.WorkflowProcess;
import com.day.cq.workflow.metadata.MetaDataMap;

@Component
@Service(WorkflowProcess.class)
@Properties({ 
    @Property(name = "service.description", value = "Update the Image Description"),
    @Property(name = "service.vendor", value = "******"),
    @Property(name = "process.label", value = "Update the Image Description") })

public class RemoveImgPropBatchWorkFlowProcessStep extends AbstractAssetWorkflowProcess{
    private static final Logger log = LoggerFactory.getLogger(RemoveImgPropBatchWorkFlowProcessStep.class);
    @Override
    public void execute(WorkItem workItem, WorkflowSession workFlowSesion, MetaDataMap meta)
            throws WorkflowException {
        // TODO Auto-generated method stub
        log.info("RemoveImgPropBatchWorkFlowProcessStep Workflow called up");
        workItem.getNode().setDescription("Image is updated");

    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T11:20:06.463

问题已解决，所有依赖包均未激活，因此未显示工作流程过程。问候， 亚什

# c# - 在 SQL Server 中插入新行时，如何将主键值设置为表中的其他 col

> ID：14028433
> 
> 赞同：0
> 
> 时间：2012-12-25T06:58:23.993
> 
> 标签：c#, sql-server, linq, linq-to-sql

我正在使用 LINQ-to-SQL 类。我正在使用 LINQ 方法插入新行`object.InsertOnSubmit()`。

`Identity`我需要为表主键列设置由 SQL Server（使用）生成的相同值。

现在我在将新行插入表时需要相同的值。并且仅在插入时为同一表中的其他列设置相同的值。

因为插入后我无法更新，因为表有 UPDATE TRIGGER。

我尝试了以下

```
_db.EmpNews.InsertOnSubmit(_EmpNews);
...
_db.DisplaySeq = _EmpNews.ID;
...
_db.SubmitChanges(); 
```

`ID`自动生成的 ( `Identity`) 列在哪里。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-25T07:34:01.670

第一个问题确实是：***为什么***需要将相同的值存储在同一个表的两个单独的列中？你需要这个做什么？对我来说似乎没有多大意义......

由于该`IDENTITY`列的值仅在**实际插入**该行后才可用，因此**无法**在该行确实保存到数据库表之前获取该值并将其设置为另一列。

这基本上留下了三个选项来获取该值并将其存储在其他地方：

*   您可以编写一个`AFTER INSERT`触发器，将*另一*列设置为刚刚插入该`IDENTITY`列的值

*   您可以将整个保存过程包装到您从 C# 代码调用的存储过程中（而不仅仅是保存对象），然后您将执行`INSERT`该行，然后获取新创建的`IDENTITY`值并使用该新值再次更新该行. 但这会导致`UPDATE`发生 - 你似乎说因为`UPDATE`触发器而对你来说是不可能的（不太清楚**为什么**这应该是一个问题......）

*   您可以编写两行 C# 代码来获取`IDENTITY`插入后的值（并且在`ID`对象的属性中可用），然后再次存储该对象。但这也会导致`UPDATE`发生 - 你似乎说因为`UPDATE`触发器而对你来说是不可能的（不太清楚**为什么**这应该是一个问题......）

所以我想你最好的选择是`INSERT`触发这样做。

尝试这样的事情：

```
CREATE TRIGGER trInsertEmpNews 
ON dbo.EmpNews AFTER INSERT 
AS BEGIN
    UPDATE dbo.EmpNews 
    SET DisplaySeq = i.ID
    FROM INSERTED i
    WHERE dbo.EmpNews.ID = i.ID
END 
```

# c++ - 如何对模板参数强制执行子 X 限制？

> ID：14028437
> 
> 赞同：9
> 
> 时间：2012-12-25T06:59:29.023
> 
> 标签：c++, templates, c++11, typetraits

*假设我想强制限制传入的模板参数是 Foo 的子级。*

有没有办法通过类型特征来强制执行这一点？编译时`static_assert`失败会很棒。

在下面的代码中，让我们把它变成一个两部分（单独）的问题。

1.  只允许`My_Limited_Template<Bar>`编译。
2.  只允许`My_Limited_Template<TBar>`编译。

**编辑** 我为错误的命名道歉：`TBar`并且`TBaz`目的是非模板类。我只是在名称前附加了 T 以消除与第 1 部分中的类的歧义。

**代码**

```
struct Foo { };                // no
struct Bar : public Foo { };   // yes
struct Baz { };                // no

template< typename T >
struct TFoo { };                       // no
struct TBar : public TFoo<TBar> { };   // yes
struct TBaz { };                       // no

template< typename T >
struct My_Limited_Template
{
  // Part One:
  //   My_Limited_Template<Foo>  // disallow
  //   My_Limited_Template<Bar>  // allow
  //   My_Limited_Template<Baz>  // disallow
  // 
  // Part Two:
  //   My_Limited_Template<TFoo<int>> // disallow
  //   My_Limited_Template<TBar>      // allow
  //   My_Limited_Template<TBaz>      // disallow
}; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-25T07:17:53.257

我假设您在 and 的定义中犯了错误`TBar`，`TBas`请检查我的修改是否正确。

```
#include <type_traits>    

struct Foo { };                // don't allow this
struct Bar : public Foo { };   // allow this
struct Baz { };                // don't allow this

template< typename T > struct TFoo { };                       
template< typename T > struct TBar : public TFoo<TBar<T>> { }; 
template< typename T > struct TBaz { };                       

template< typename T >
struct My_Limited_Template
{
        static_assert(
                (std::is_base_of<Foo,T>::value && !std::is_same<T,Foo>::value)
                || 
                (std::is_base_of<TFoo<T>,T>::value && !std::is_same<T,TFoo<T>>::value),
                "fail2"
        ); 
}; 
```

# java - 在指定时间后在文本字段中显示文本

> ID：14028438
> 
> 赞同：0
> 
> 时间：2012-12-25T07:00:00.097
> 
> 标签：java, swing, timer, jtextfield

我需要在另一个文本框中提供的一定时间（以秒为单位）后在文本字段中显示文本。请给我建议，我是这种类型要求的新手。提前致谢。

嘿，感谢您的所有回复，很抱歉应该用 javascript 完成，我做到了。感谢你..

这里z代码......在javascript中

```
<script type="text/javascript" >

            function timer(){
             var textbox3 = document.getElementById('t2');
             var temp=textbox3.value*1000;
             alert(temp);
     setTimeout('myMethod()',temp);

     }
     function myMethod()
     {

     var textbox1 = document.getElementById('t1');
     var textbox3 = document.getElementById('t3');
     textbox3.value=textbox1.value;
    //alert("hi");
     }

</script>
<form >
<input type='text' name='txt1' id="t1"></input>
<input type='text' name='txt2' id="t2"></input>
<input type='text' name='txt3'id="t3"></input>
<input type="button" name="btn" value="schedule" onclick="timer()"></input>
</form> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-25T08:13:58.647

检查这个

```
public class TimerExample extends JFrame {

    private JTextField textField1;
    private JTextField textField2;
    private JTextField textField3;
    private JButton btnSubmit ;
    private Timer timer;
    public TimerExample() {
        super("List");
    }

    public void createAndShowGUI() {

        setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        setLayout(new FlowLayout());
        textField1 = new JTextField(20) ; 
        textField2 = new JTextField(2) ; 
        textField3 = new JTextField(20) ; 
        btnSubmit = new JButton("Submit");
        add(textField1);
        add(textField2);
        add(btnSubmit);
        add(textField3);

        btnSubmit.addActionListener(new ActionListener() {

            @Override
            public void actionPerformed(ActionEvent e) {
                int sec = Integer.parseInt(textField2.getText());
                 timer = new Timer(sec*1000, new ActionListener() {
                    @Override
                    public void actionPerformed(ActionEvent e) {
                        textField3.setText(textField1.getText());
                        timer.stop();
                    }
                });
                timer.start();
            }
        });
        pack();
        setVisible(true);
    }

    public static void main(String[] args) {
        SwingUtilities.invokeLater(new Runnable() {
            @Override
            public void run() {
                TimerExample gui = new TimerExample();
                gui.createAndShowGUI();
            }
        });
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-25T07:22:20.160

当您使用 gui 时，我假设您了解线程。

所以开始一个这样运行的线程。

```
..run(){
..while(true){
..textbox1.setText(textbox2.getText());
..Thread.sleep(time interval);
..}
..} 
```

时间间隔以毫秒为单位。1秒写1000。（删除开始的点）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-25T07:33:27.220

将[ChangeListener](https://stackoverflow.com/questions/3953208/value-change-listener-to-jtextfield)添加到要从中复制文本的 field1。还要在 ChangeListner 中保留一个[Timer属性。](http://docs.oracle.com/javase/7/docs/api/javax/swing/Timer.html)在 field1 发生任何变化时，如果之前的计时器处于活动状态，则停止它，从 timeField 获取时间并重新启动计时器。

定时器的 ActionListener 可以将 field1 的值复制到 field2。

# android - Android：拍摄快照活动包括相机和 3D 对象

> ID：14028440
> 
> 赞同：1
> 
> 时间：2012-12-25T07:00:16.960
> 
> 标签：android

我已经研究找到解决方案来拍摄当前活动的快照，我找到了 2 个拍摄快照的解决方案，但它们都不能帮助我得到我想要的正确的东西。

我的活动使用相机，并在该布局中显示 3D 对象（与 AR 相同，但不使用标记，只需在相机框架中绘制 3D 对象）。

因此，当我使用找到的解决方案时，我只是得到父布局（我用来保存相机和 3D 对象的相对布局）和一些其他对象（一些按钮），该位图与 XML 文件的物理设计屏幕相同。

我使用此解决方案获取快照：

```
private Bitmap takeScreenShot(Activity activity)
 {
     View view = activity.getWindow().getDecorView();
     view.setDrawingCacheEnabled(true);
     view.buildDrawingCache();
     Bitmap b1 = view.getDrawingCache();
     Rect frame = new Rect();
     activity.getWindow().getDecorView().getWindowVisibleDisplayFrame(frame);
     int statusBarHeight = frame.top;
     int width = activity.getWindowManager().getDefaultDisplay().getWidth();
     int height = activity.getWindowManager().getDefaultDisplay().getHeight();

     Bitmap b = Bitmap.createBitmap(b1, 0, statusBarHeight, width, height  - statusBarHeight);
     view.destroyDrawingCache();
     return b;
 } 
```

这个解决方案：

```
public Bitmap snap() {
    Bitmap bitmap = Bitmap.createBitmap(this.view.getWidth(), this.view.getHeight(), Config.ARGB_8888);
    Canvas canvas = new Canvas(bitmap);
    view.draw(canvas);
    return bitmap;
  } 
```

但我得到了同样的结果。

请帮助我找到解决此问题的好方法。

谢谢。

# solaris-10 - 在 Solaris 10 上可以使用什么 POSIX 系统调用来代替 forkall？

> ID：14028441
> 
> 赞同：1
> 
> 时间：2012-12-25T07:00:19.003
> 
> 标签：solaris-10

在 Solaris 10 上可以使用什么**POSIX**系统调用来代替[*forkall() ？*](http://docs.oracle.com/cd/E19082-01/819-2241/forkall-2/index.html)

可以在 Solaris 10 上使用*forkall*，但是如何确定预处理器中的操作系统和操作系统版本？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-25T07:07:27.280

Forall 不是 POSIX 系统调用。它仅适用于 solaris。它在 POSIX 中没有任何替代品。您应该尝试编写可移植的代码。

. . . . . . . ..

# actionscript-3 - dispatchEvent() 可以在 AS3 中携带参数吗？

> ID：14028444
> 
> 赞同：-1
> 
> 时间：2012-12-25T07:00:42.327
> 
> 标签：actionscript-3, events, parameters, addeventlistener, dispatchevent

看这个例子：

```
addEventListener("myEventType", myFunction("argument"));

function myFunction(args:String):Function {
    return function(evt:Event):void {
        trace(evt.currentTarget, "has", args);
    };
}

dispatchEvent(new Event("myEventType", true)); 
```

有用。

我可以做类似的事情，但`"argument"`通过`dispatchEvent()`吗？

在与and`dispatchEvent()`完全分开的类的情况下，这将非常方便。`addEventListener()``myFunction()`

我会非常需要这个，所以我想在不为每种情况创建自定义事件类的情况下做到这一点。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-25T08:20:25.450

在需要将参数传递给事件处理程序的所有情况下，您都可以使用本机`flash.events.DataEvent`传递`String`参数或`DataEvent`使用属性创建自定义。`data:*`

如果您想自定义事件侦听器的行为来代替添加事件侦听器，您可以创建“侦听器”对象来保存此自定义参数（但我认为这种技术比自定义事件更复杂） ：，这样的类`addEventListener("myEventType", new EventListener("param1").onEvent);`在哪里`EventListener`：

```
public class EventListener
{
    private var params:*;

    public function EventListener(params:*)
    {
            this.params = params;
    }

    public function onEvent(event:Event):void
    {
            trace("onEvent, params = ", params);
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-25T09:33:13.960

你可以看看 Signals ( [https://github.com/robertpenner/as3-signals](https://github.com/robertpenner/as3-signals) )。它们是事件的替代品，您可以使用信号发送任何您想要的额外参数。

# android - 我们如何在列表中传递字符串日期并可以从数据库中检索到列表中

> ID：14028449
> 
> 赞同：0
> 
> 时间：2012-12-25T07:01:43.283
> 
> 标签：android, string, sqlite, date

这是我的代码，我想将日期保存到我的数据库中并希望保存到列表中。
我们如何将日期存储在数据库中？我们如何保存日期`int`或`String`？

它在“datePickerBtn1”、“datePickerBtn2”、“datePickerBtn3”下方显示卷曲的红线。我使用按钮显示日期对话框，但我想将日期作为文本存储在列表中。

我正在尝试制作记事本或任务提醒。

```
case R.id.savebutton:
    String subject = editsubject.getText().toString();
    String description =editdescription.getText().toString();
    int created = datepickerbtn1.getText().toString();        //save into database and get list
    int due = datepickerbtn2.getText().toString();
    int completed = datepickerbtn3.getText().toString();**

    if(!subject.equals("") || !description.equals("")) {
        Database_List db = new Database_List(this);
        db.addList(subject, description, created, due, completed );
    }

break; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-25T07:13:45.953

我想知道你怎么能用这些代码行编译你的代码

```
int created = datepickerbtn1.getText().toString();        //save into database and get list
    int due = datepickerbtn2.getText().toString(); 
```

请将此更改为

```
String created = datepickerbtn1.getText().toString();        //save into database and get list
    String due = datepickerbtn2.getText().toString(); 
```

您可以将日期存储为字符串或日期字段。为简单起见，存储为字符串。

# c# - 不能应用于“int”和“int”类型的操作数”

> ID：14028455
> 
> 赞同：1
> 
> 时间：2012-12-25T07:03:15.123
> 
> 标签：c#

我的 C# 代码：

```
public int printallancestor(Node root, Node key)
{
     if(root == null)
          return 0;
     if(root == key)
          return 1;
     if(printallancestor(root.leftChild,key)||printallancestor(root.rightChild,key))
     {
          Console.WriteLine(root.iData);
          return 1;
     }
     return 0;
} 
```

上面代码中的以下行`if(printallancestor(root.leftChild,key)||printallancestor(root.rightChild,key))`我得到以下错误**不能应用于 'int' 和 'int' 类型的操作数**。这有什么问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-25T07:05:07.110

它看起来像你的方法：

```
printallancestor(root.leftChild,key) 
```

返回一个整数值，并且您正试图在条件中使用它。您只能像现在这样在条件下使用**布尔类型**

我相信您期望您的方法分别返回`1`或返回`0`true 和 false，您无法在 C# 中执行您现在正在执行的操作。你可以试试：

```
if(printallancestor(root.leftChild,key) == 1|| .... 
```

或者，如果您期望大于 1 的值为真，则：

```
if(printallancestor(root.leftChild,key) > 1) // true 
```

你可能会看到：
[|| 运算符（C# 参考）](http://msdn.microsoft.com/en-us/library/6373h346%28v=vs.110%29.aspx)

> **条件或运算符 (||)对其布尔操作数**执行逻辑或。如果第一个操作数的计算结果为真，则不计算第二个操作数。如果第一个操作数的计算结果为 false，则第二个运算符确定整个 OR 表达式的计算结果为 true 还是 false。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-25T07:06:17.873

printallancestor 的返回类型是 int。您正在使用 || 用于布尔的运算符。尝试

`if(printallancestor(root.leftChild,key) != 0||printallancestor(root.rightChild,key) != 0)`

这应该可以解决问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-25T07:06:17.897

运算符 OR (||) 需要两个 bool 操作数，而不是 int。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-25T07:07:04.073

您的方法返回`int`，但您尝试在 if 条件下使用。那不行。您可以使用仅条件`bool`类型。

像这样试试；

```
if(printallancestor(root.leftChild,key) == 1|| .. 
```

> 条件或运算符 (||) 对其布尔操作数执行逻辑或。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-25T07:07:25.303

做这个

```
 public bool printallancestor(Node root, Node key)
    {
        if(root == null)
            return false;
        if(root == key)
            return true;
        if(printallancestor(root.leftChild,key)||printallancestor(root.rightChild,key))

        {
            Console.WriteLine(root.iData);
            return true;
        }
        return false;
    } 
```

# iphone - DropBox 与 iphone 应用程序集成时出错

> ID：14028459
> 
> 赞同：9
> 
> 时间：2012-12-25T07:04:26.687
> 
> 标签：iphone, objective-c, ios, dropbox-api, app-id

我正在尝试将 DropBox 集成到我的 iPhone 应用程序中。但我得到错误

```
[ERROR] DropboxSDK: unable to link; app isn't registered for correct URL scheme (db-xpt9oxj57x9ftci) 
```

谁能帮我解决这个问题？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-12-25T07:06:07.687

大多数情况下，该问题是由配置错误的 Info.plist 文件引起的。你能确保你遵循了关于更改 Info.plist 文件的文档/index.html 吗？在信息 plist 中，在 urltype (urlschema) 中设置 db-xpt9oxj57x9ftci。这应该够了吧。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-25T07:09:06.160

我用谷歌搜索，Dropbox sdk 有专门用于在您的应用 plist 文件中添加应用密钥的行

> DBRoulette-Info.plist 文件中还需要您的应用程序密钥，以便应用程序可以注册正确的 url 方案。为此，在左窗格的 Resources 组下找到该文件，右键单击它并选择 Open As → Source Code。将文本 APP_KEY 替换为您应用的密钥

[https://www.dropbox.com/developers/start/setup#ios](https://www.dropbox.com/developers/start/setup#ios)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-07-06T08:27:48.087

我找到了这个解决方案。

我在 Windows Visual Studio 2015 中使用 Xamarin，正如其他在线查询中所述，没有可用的“URL 方案”选项。所以解决办法是手动修改info.plist。您的 Dropbox 特定 plist 方案应如下所示：

```
<key>LSApplicationQueriesSchemes</key>
  <array>
    <string>dbapi-2</string>
    <string>dbapi-8-emm</string>
  </array>
<key>CFBundleURLTypes</key>
  <array>
    <dict>
      <key>CFBundleURLSchemes</key>
      <array>
        <string>db-APP_KEY</string>
      </array>
    </dict>
  </array>
```

我获得这些信息的一个很好的帮手是这个的“info.plist [”](https://www.dropbox.com/developers-v1/core/sdks/ios)。这种“信息”修改应该适用于任何 xamarin 项目。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-04-01T18:38:42.973

如果您修复了任何拼写错误或忘记了“db”并且仍然遇到问题，那么清理和重建可能会有所帮助。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-08-22T16:00:31.793

您的 URL 方案应该是`db-<Your App key>`. 例子`db-a7ghdtthegj6z1g`

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-08-03T05:44:13.167

我刚才遇到了这个问题，并且是在 db- 前缀之前的一个空格中完成的。在 plist 编辑器中很难看到，但是当我查看 XML 时非常明显。

# asp.net - 3层编程图

> ID：14028460
> 
> 赞同：0
> 
> 时间：2012-12-25T07:04:28.103
> 
> 标签：asp.net, visual-studio-2010, charts, 3-tier

我希望使用 microsoft Visual Studio 2010 创建一个图表，但我不知道该怎么做。尝试用谷歌搜索答案，但没有一个是 3 层的。

这是我的数据访问层代码

```
 public List<AdvertisementDAL> displayChart()
    {
        List<AdvertisementDAL> dal = new List<AdvertisementDAL>();
        string sql = "Select * From AdvertisementRecord";
        SqlConnection conn = new SqlConnection(_connStr);
        SqlCommand cmd = new SqlCommand(sql, conn);
        conn.Open();
        SqlDataReader dr = cmd.ExecuteReader();
        while (dr.Read())
        {
            _recordID = int.Parse(dr["RecordID"].ToString());
            _recordDate = dr["RecordDate"].ToString();
            _noOfClick = int.Parse(dr["NoOfClick"].ToString());
            _noOfView = int.Parse(dr["NoOfView"].ToString());
            _advertisementID = int.Parse(dr["FK_AdvertisementID"].ToString());
            dal.Add(new AdvertisementDAL(_recordID, _recordDate, _noOfClick, _noOfView, _advertisementID));
        }
        conn.Close();
        dr.Close();
        dr.Dispose();
        return dal;
    }
} 
```

这是我的业务逻辑层

```
 public List<AdvertisementDAL> pieChart()
    {
        AdvertisementDAL dal = new AdvertisementDAL();
        List<AdvertisementDAL> dll = new List<AdvertisementDAL>();
        dll = dal.displayChart();
        return dll;
    } 
```

这是我的表示层（我只知道将数据绑定在一起）

```
 protected void Page_Load(object sender, EventArgs e)
    {
        if (!IsPostBack)
        {

            AdvertisementBLL bll = new AdvertisementBLL();
            Chart1.DataSource = bll.pieChart();
            Chart1.DataBind();
        }
    } 
```

我想我被困在表示层有什么帮助吗？酒吧看起来像这样

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-25T07:14:41.020

你可以这样使用

```
// Set series members names for the X and Y values 
chart1.Series["Series 1"].XValueMember = "porpery1"; 
chart1.Series["Series 1"].YValueMembers = "property 2"; 
// Data bind to the selected data source 
chart1.DataBind(); 
```

更多阅读[资源](http://blogs.msdn.com/b/alexgor/archive/2009/02/21/data-binding-ms-chart-control.aspx)

我认为这是一个很好的例子，你可以通过这个链接
[http://blogs.msdn.com/b/alexgor/archive/2009/02/21/data-binding-ms-chart-control.aspx](http://blogs.msdn.com/b/alexgor/archive/2009/02/21/data-binding-ms-chart-control.aspx)
[http:// documentation.devexpress.com/#XtraCharts/CustomDocument7787](http://documentation.devexpress.com/#XtraCharts/CustomDocument7787)
[http://www.codeproject.com/Articles/117998/A-look-inside-the-ASP-NET-Charting-conlrol](http://www.codeproject.com/Articles/117998/A-look-inside-the-ASP-NET-Charting-conlrol)

# php - 来自 SQL 的 PHP 动态复选框列表，基于 Cascade Select 选择

> ID：14028462
> 
> 赞同：3
> 
> 时间：2012-12-25T07:04:34.347
> 
> 标签：php, jquery, mysql

我自愿并想为我的学校创建一些数据库，以有效地跟踪学生的不当行为。我不是专家。我一直在做的是，我在谷歌上搜索我想要的东西，自学，并尝试将所有内容拼接在一起。

我遇到了这个教程，几乎是我想要的，我基于这个在数据库上工作：[http ://www.yourinspirationweb.com/en/how-to-create-chained-select-with-php-and-jquery /](http://www.yourinspirationweb.com/en/how-to-create-chained-select-with-php-and-jquery/)

结果，我得出了这个：http: [//ipoh.wesleyschool.edu.my/ace_beta.php](http://ipoh.wesleyschool.edu.my/ace_beta.php)

整个想法是基于班级的选择，该班级的学生会以列表的形式出现。

整个事情目前有效，但我想把它推到另一个层次。如您所见，我写的内容一次只允许一个学生，如果我希望同时选择多个学生做同样的错误怎么办？

我用谷歌搜索了“动态复选框”等，但不知何故我不知道将它们链接起来，让它发挥作用……我已经尝试过，这就是为什么你在这里找到我问的原因。

**代码（ace_beta.php）：**

主页运行在：ace_beta.php；其中我相信我被困在这个地方：

```
<td width="25%" valign="top"'>

<table border="0" width="100%" cellpadding="6">
<tr>
<td width="100%" align="middle" valign="top" bgcolor='#636363'>
<font face="Arial" size='5' color='#ffffff'><b> STEP ONE </b></font>
</td></tr></table>

<br />
<b> STUDENT INFORMATION ::. </b>
<br />

<table border="0" width="100%" cellpadding="3">

<tr>
<td width="20%" align="right"> class </td>
<td width="80%" align="left">
    <select id="class" name="class">
        <?php echo $opt->ShowClass(); ?>
    </select></td>
</tr>

<tr>
<td width="20%" align="right"> student </td>    
<td width="80%" align="left">
    <select id="student" name="student">
         <option value="0">choose...</option>
         </select></td>
</tr>

</table>

</td> 
```

ace_beta.php 与存储函数的 select.class.php 密切相关...

**代码（select.class.php）**

```
<?php
class SelectList
{
    protected $conn;

        public function __construct()
        {
            $this->DbConnect();
        }

        protected function DbConnect()
        {
            include "db_config.php";
            $this->conn = mysql_connect($host,$user,$password) OR die("Unable to connect to the database");
            mysql_select_db($db,$this->conn) OR die("can not select the database $db");
            return TRUE;
        }

        public function ShowClass()
        {
            $sql = "SELECT * FROM class";
            $res = mysql_query($sql,$this->conn);
            $class = '<option value="0">choose...</option>';
            while($row = mysql_fetch_array($res))
            {
                $class .= '<option value="' . $row['id_cls'] . '">' . $row['name'] . '</option>';
            }
            return $class;
        }

        public function ShowStudent()
        {
            $sql = "SELECT * FROM student WHERE id_cls=$_POST[id]";
            $res = mysql_query($sql,$this->conn);
            $student = '<option value="0">choose...</option>';
            while($row = mysql_fetch_array($res))
            {
                $student .= '<option value="' . $row['id_stu'] . '">' . $row['name'] . '</option>';
            }
            return $student;
        }

}

$opt = new SelectList();

?> 
```

**问题**

有人可以指导我如何执行以下操作：

1.  根据 ace_beta.php 中的“班级选择”，在 ace_beta.php 的“学生区”会出现一个包含相应学生的复选框列表
2.  在点击“提交”按钮后的 ace_add.php 中处理所选名称的方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-25T09:51:31.780

首先，您需要将数据库查询分离到拥有一个与数据库的连接的类中。要得到这个，你需要一个[单例](http://en.wikipedia.org/wiki/Singleton_pattern)。

```
/**
 * Simple DB class as Singleton.
 */
class Database {

    /**
     * @var PDO
     */
    protected $conn;

    /**
     * @var Database
     */
    private static $instance;

    /**
     * Method that ensures you have only one instance of database
     *
     * @return Database
     */
    public static function getInstance() {
        if (self::$instance === null) {
            self::$instance = new self();
        }

        return self::$instance;
    }

    /**
     * Query method.
     *
     * @example Database::getInstance()->query("SELECT * FROM table where param1 = ? AND param2 = ?", array($param1, $param2));
     *
     * @param string $sql
     *
     * @return array
     */
    public function query($sql) {
        $statement = $this->conn->prepare($sql);
        $args = func_get_args();
        array_shift($args);
        $statement->execute($args);
        return $statement->fetchAll(PDO::FETCH_ASSOC);
    }

    /**
     * Gets connection
     *
     * @return PDO
     */
    public function getConnection() {
        return $this->conn;
    }

    protected function DbConnect()
    {
        include "db_config.php";

        $dsn = sprintf('mysql:dbname=%s;host=%s', $db, $host);

        try {
            $this->conn = new PDO($dsn, $user, $password,

                // be sure you are have ut8 symbols
                array(PDO::MYSQL_ATTR_INIT_COMMAND => 'SET NAMES \'UTF8\''));

            // all errors from DB are exceptions
            $this->conn->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);

        } catch (PDOException $e) {
            echo 'Connection failed: ' . $e->getMessage();
            return FALSE;
        }

        return TRUE;
    }

    private function __construct()
    {
        $this->DbConnect();
    }

    private function __clone() {}
    private function __wakeup() {}

} 
```

我已经稍微改变了你的代码。现在看起来更简单了，是吧？

```
class SelectList
{

    /**
     * Get class list
     *
     * @return array
     */
    public function getClass()
    {
        $sql = "SELECT * FROM class";
        $res = Database::getInstance()->query($sql);

        return $res;
    }

    /**
     * Get list of students from $classId
     *
     * @param int $classId class students from
     *
     * @return array
     */
    public function getStudent($classId)
    {
        $sql = "SELECT * FROM student WHERE id_cls= ?";

        $res = Database::getInstance()->query($sql, array($classId));

        return $res;
    }

} 
```

这是你的改变`ace_beta.php`

```
<!--
 considering you are have form that looks like
 <form method="post" action="ace_beta.php">

 and somewhere you are have submit button :)
-->

<td width="25%" valign="top">

    <table border="0" width="100%" cellpadding="6">
        <tr>
            <td width="100%" align="middle" valign="top" bgcolor='#636363'>
                <font face="Arial" size='5' color='#ffffff'><b> STEP ONE </b></font>
            </td></tr></table>

    <br />
    <b> STUDENT INFORMATION ::. </b>
    <br />

    <table border="0" width="100%" cellpadding="3">

        <tr>
            <td width="20%" align="right"> class </td>
            <td width="80%" align="left">
                <select id="class" name="class">
                    <option value="0">choose...</option>
                    <?php foreach ($opt->getClass() as $class): ?>
                        <option value="<?php echo $class['id_cls'] ?>"><?php echo $class['name'] ?></option>
                    <?php endforeach; ?>
                </select>
            </td>
        </tr>

        <tr>
            <td width="20%" align="right"> student </td>
            <td width="80%" align="left">
                <div id="students">

                </div>
            </td>
        </tr>

    </table>

</td> 
```

现在为您的任务：

为了让学生复选框，您需要使用[AJAX](http://en.wikipedia.org/wiki/Ajax_%28programming%29)。为此，您需要有一个单独的文件，例如`get_students.php`

```
include 'select.class.php';
$opt = new SelectList();

// watch if there are any GET request coming with `class=ID`
if (isset($_GET['class'])) {
    $result = $opt->getStudent($_GET['class']);
    // header for JSON
    header('Content-type: application/json');
    // output JSON (need php 5.2 at least)
    echo json_encode($result);
} 
```

添加到`ace_beta.php`页面底部的某处。

```
<!-- this just in case you are have no jQuery yet. -->
<script type="text/javascript" src="//ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>
<script type="text/javascript">
    $(document).ready(function(){
        // when you slect new item.
        $('#class').change(function(){
            $.ajax({
                // go to url with ?class=ID
                url: '//get_students.php?class=' + $(this).val(),
                dataType: 'json'
                // when all is ok:
                success: function(data){
                    var studentsContainer = $('#students');
                    // empty checkboxes.
                    studentsContainer.html('');

                    // iterate throug data
                    $.each(data, function(index, item) {
                        // create new checkobx
                        var checkbox = $('<input type="checkbox" name="students[]" />');
                        // assign value and id for it.
                        checkbox.attr('value', item.id)
                                .attr('id', 'student_' + item.id);

                        // create a label with name inside
                        var label = $('<label />');
                        label.attr('for', 'student_' + item.id);
                        label.html(item.name);

                        // append all of new elements and "<br />" for readability.
                        studentsContainer.append(checkbox);
                        studentsContainer.append(label);
                        studentsContainer.append('<br />');
                    });
                }
            });
        });
    });
</script> 
```

上面的 javascript 将创建以下 HTML：

```
<input type="checkbox" name="students[]" value="1" id="student_1" /><label for="student_1" /><br />
<input type="checkbox" name="students[]" value="2" id="student_2" /><label for="student_2" /><br />
<input type="checkbox" name="students[]" value="3" id="student_3" /><label for="student_3" /><br /> 
```

我还没有测试所有这些，但希望这有助于让你朝着正确的方向前进！

# c# - InstallShield 2012 与数据库的使用

> ID：14028465
> 
> 赞同：0
> 
> 时间：2012-12-25T07:05:06.063
> 
> 标签：c#, sql, installshield-2012

我在 VS2012 中创建了一个应用程序，它使用数据库来存储和检索数据，我想为此应用程序创建一个安装文件，目前我使用 InstallShield LE 2012。

我试图用它来部署应用程序，但是当我将它安装在另一台计算机上时，由于数据库，它会抛出一个异常。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T05:16:09.517

如果您收到 Null 引用异常错误，这通常是因为代码中的某些地方无法创建对象。然后稍后使用该对象失败并出现 Null 异常，因为该对象不存在。

在这种情况下，听起来好像无法创建某个对象，该对象是创建数据库的依赖项。我知道这并不能真正深入了解为什么会发生这种情况。但这里有一些需要寻找的点。

*   目标 PC 是否运行 SQL 服务器，或者您的安装包是否部署了 SQL Express？
*   它是 MS SQL DB 还是其他
*   运行 install shield 的用户是否具有 SQL Server 创建数据库的权限？

# python - 数据未写入文件 [Python]

> ID：14028475
> 
> 赞同：1
> 
> 时间：2012-12-25T07:06:16.680
> 
> 标签：python

```
final=open("war.txt","w+")
for line in madList:
  line=line.split('A ')
  dnsreg= line[1]
  print dnsreg
  final.write(dnsreg) 
```

打印`dnsreg`时我可以看到输出，但是当我将其写入文件时，没有写入任何内容。也没有语法错误。任何的想法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-25T07:13:55.840

写入文件的数据不会立即写入，而是保存在缓冲区中，并且一次写入大量数据，因此可以节省写入磁盘的开销。但是，在关闭文件时，所有缓冲的数据都会刷新到磁盘。

所以，你可以做两件事：

1.  完成后致电`final.close()`，或
2.  如果您不想关闭文件，请`final.flush()`稍后调用。`final.write()`

感谢@Matt Tanenbaum，在 python 中处理这个问题的一个非常好的方法是在一个`with`块内进行写入：

```
with open("war.txt","w+") as final:
    for line in madList:
        line=line.split('A ')
        dnsreg= line[1]
        print dnsreg
        final.write(dnsreg) 
```

这样做，您将永远不必担心关闭文件！但是如果程序过早终止（例如由于异常），您可能需要刷新。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-25T07:28:24.943

`with`当使用必须设置和拆除的资源时，您应该在 Python 中使用该语句，例如打开和关闭文件。就像是：

```
with open("war.txt","w+") as myFile:
    for line in madList:
        line=line.split('A ')
        dnsreg= line[1]
        myFile.write(dnsreg) 
```

如果您不想使用`with`，则必须手动关闭该文件。在这种情况下，您可以使用`try...finally`块来处理此问题。

```
try:
    myFile = open("war.txt", "w+")
    for line in madList:
    line=line.split('A ')
    dnsreg= line[1]
    myFile.write(dnsreg)
finally:
    myFile.close() 
```

`finally`将始终有效，因此您的文件已关闭，并写入更改。

# spring - 使用 Maven 的 Java Web API 冲突

> ID：14028476
> 
> 赞同：0
> 
> 时间：2012-12-25T07:06:25.133
> 
> 标签：spring, session, maven, web.xml

我对需要你帮助的情况有点困惑:)

我有一个通过 Maven 运行的 Spring Web MVC3 项目。所有库都已下载，并且作为一个基本的 Web 应用程序运行，我刚刚创建了一个主页，该主页在我运行项目时启动。

现在，我在我的应用程序中引入了单元/集成测试，问题就出现了。

根据以下依赖项，我了解它只是一个规范，而不是核心 API。

```
<dependency>
<groupId>javax</groupId>
<artifactId>javaee-web-api</artifactId>
<version>6.0</version>
<scope>compile</scope>
</dependency> 
```

因此，当我尝试对我编写的类进行单元测试时，它抛出了方法体不存在的异常。我通过添加以下依赖项并删除规范之一解决了这个问题。

```
<dependency>
<groupId>org.apache.tomcat</groupId>
<artifactId>tomcat-catalina</artifactId>
<version>7.0.30</version>
</dependency>

<dependency>
<groupId>org.apache.geronimo.specs</groupId>
<artifactId>geronimo-jpa_2.0_spec</artifactId>
<version>1.1</version>
<scope>provided</scope>
</dependency> 
```

测试成功，一切正常。

现在，有趣的是，我在我的一个控制器中使用了一个 HttpSession 对象。在 web.xml 中，一个会话配置参数。

当我运行应用程序时，它会抛出以下错误。

```
SEVERE: Parse error in application web.xml file at jndi:/localhost/vdb/WEB-INF/web.xml
org.xml.sax.SAXParseException; systemId: jndi:/localhost/vdb/WEB-INF/web.xml; lineNumber: 11; columnNumber: 22; Error at (11, 22) : org.apache.catalina.deploy.WebXml setSessionConfig
    at org.apache.tomcat.util.digester.Digester.createSAXException(Digester.java:2687)
    at org.apache.tomcat.util.digester.Digester.createSAXException(Digester.java:2719)
    at org.apache.tomcat.util.digester.Digester.endElement(Digester.java:1054)
    at com.sun.org.apache.xerces.internal.parsers.AbstractSAXParser.endElement(AbstractSAXParser.java:606)
    at com.sun.org.apache.xerces.internal.impl.XMLDocumentFragmentScannerImpl.scanEndElement(XMLDocumentFragmentScannerImpl.java:1742)
    at com.sun.org.apache.xerces.internal.impl.XMLDocumentFragmentScannerImpl$FragmentContentDriver.next(XMLDocumentFragmentScannerImpl.java:2900)
    at com.sun.org.apache.xerces.internal.impl.XMLDocumentScannerImpl.next(XMLDocumentScannerImpl.java:607)
    at com.sun.org.apache.xerces.internal.impl.XMLDocumentFragmentScannerImpl.scanDocument(XMLDocumentFragmentScannerImpl.java:489)
    at com.sun.org.apache.xerces.internal.parsers.XML11Configuration.parse(XML11Configuration.java:835)
    at com.sun.org.apache.xerces.internal.parsers.XML11Configuration.parse(XML11Configuration.java:764)
    at com.sun.org.apache.xerces.internal.parsers.XMLParser.parse(XMLParser.java:123)
    at com.sun.org.apache.xerces.internal.parsers.AbstractSAXParser.parse(AbstractSAXParser.java:1210)
    at com.sun.org.apache.xerces.internal.jaxp.SAXParserImpl$JAXPSAXParser.parse(SAXParserImpl.java:568)
    at org.apache.tomcat.util.digester.Digester.parse(Digester.java:1537)
    at org.apache.catalina.startup.ContextConfig.parseWebXml(ContextConfig.java:1875)
    at org.apache.catalina.startup.ContextConfig.webConfig(ContextConfig.java:1256)
    at org.apache.catalina.startup.ContextConfig.configureStart(ContextConfig.java:878)
    at org.apache.catalina.startup.ContextConfig.lifecycleEvent(ContextConfig.java:369)
    at org.apache.catalina.util.LifecycleSupport.fireLifecycleEvent(LifecycleSupport.java:119)
    at org.apache.catalina.util.LifecycleBase.fireLifecycleEvent(LifecycleBase.java:90)
    at org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:5173)
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
    at org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:901)
    at org.apache.catalina.core.ContainerBase.addChild(ContainerBase.java:877)
    at org.apache.catalina.core.StandardHost.addChild(StandardHost.java:633)
    at org.apache.catalina.startup.HostConfig.deployDescriptor(HostConfig.java:655)
    at org.apache.catalina.startup.HostConfig.deployApps(HostConfig.java:536)
    at org.apache.catalina.startup.HostConfig.check(HostConfig.java:1453)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at org.apache.tomcat.util.modeler.BaseModelMBean.invoke(BaseModelMBean.java:301)
    at com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.invoke(DefaultMBeanServerInterceptor.java:819)
    at com.sun.jmx.mbeanserver.JmxMBeanServer.invoke(JmxMBeanServer.java:791)
    at org.apache.catalina.manager.ManagerServlet.check(ManagerServlet.java:1445)
    at org.apache.catalina.manager.ManagerServlet.deploy(ManagerServlet.java:860)
    at org.apache.catalina.manager.ManagerServlet.doGet(ManagerServlet.java:357)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:621)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.apache.catalina.filters.SetCharacterEncodingFilter.doFilter(SetCharacterEncodingFilter.java:108)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:222)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:123)
    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:581)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:168)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:99)
    at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:929)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)
    at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1002)
    at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:585)
    at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:312)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)
    at java.lang.Thread.run(Thread.java:722)
Caused by: java.lang.NoSuchMethodException: org.apache.catalina.deploy.WebXml setSessionConfig
    at org.apache.tomcat.util.IntrospectionUtils.callMethod1(IntrospectionUtils.java:855)
    at org.apache.tomcat.util.digester.SetNextRule.end(SetNextRule.java:201)
    at org.apache.tomcat.util.digester.Digester.endElement(Digester.java:1051)
    ... 56 more 
```

而且，这是 web.xml

```
<?xml version="1.0" encoding="UTF-8"?>

<web-app xmlns="http://java.sun.com/xml/ns/javaee"
         xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
         xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd"
         version="3.0">
    <session-config>
        <session-timeout>
            30
        </session-timeout>
    </session-config>

    <listener>
        <listener-class>org.springframework.web.context.ContextLoaderListener</listener-class>
    </listener>
    <listener>
        <listener-class>org.springframework.web.context.request.RequestContextListener</listener-class>
    </listener>

    <context-param>
        <param-name>contextConfigLocation</param-name>
        <param-value>
            /WEB-INF/vdb-data.xml
        </param-value>
    </context-param>

    <servlet>
        <servlet-name>vdb</servlet-name>
        <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
        <load-on-startup>2</load-on-startup>
    </servlet>

    <servlet-mapping>
        <servlet-name>vdb</servlet-name>
        <url-pattern>/</url-pattern>
    </servlet-mapping>

    <welcome-file-list>
        <welcome-file></welcome-file>
    </welcome-file-list>

</web-app> 
```

任何建议将不胜感激。

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-25T08:28:50.007

Java EE 和 Tomcat 库不得部署为 Web 应用程序的一部分。Tomcat 实现了这些 API，并且在它自己的类路径中已经有了这些库。

使用`provided`范围而不是`compile`pom.xml 中这些库的范围。并确保 Java EE API 和 Tomcat jar 文件不在您部署的 webapp 的 WEB-INF/lib 目录中。

如果您需要有关某些代码引发的异常的帮助，请向我们展示代码和异常的堆栈跟踪。您不应该在代码和测试中依赖 Tomcat 特定的类。

# jquery - jquery：从外部 html 加载值并填充许多本地 字段，只需读取一次 html

> ID：14028480
> 
> 赞同：1
> 
> 时间：2012-12-25T07:07:18.880
> 
> 标签：jquery, html, dynamic, external

我现在正在使用这段代码，效果很好，除了它向网络服务器发出三个请求：

```
var refreshspeed=1000

        function moreSnow() {
    $("#uptimedynamic").load("index.html #uptimedynamic");
    $("#cpuloaddynamic").load("index.html #cpuloaddynamic");
    $("#meminfodynamic").load("index.html #meminfodynamic");
    setTimeout("moreSnow()", refreshspeed);
    } 
```

有人可以告诉我如何让它做同样的事情，但只读取一次 index.html 吗？它需要保持相同的重复循环设置:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-25T07:15:23.223

这应该这样做

```
/* cache selectors in main page to avoid searching for them every second*/
var $upTime=$("#uptimedynamic"),  $cpuload = $("#cpuloaddynamic"), $meminfo=$("#meminfodynamic")

function moreSnow() {
    $.get("index.html", function(data){
        /* create a jQuery object from the retrieved page html that can then be traversed*/
        var $data=$(data);

        $upTime.html( $data.find('#uptimedynamic').html() );
        $cpuload.html( $data.find("#cpuloaddynamic").html() );
        $meminfo.html( $data.find("#meminfodynamic").html() );

    });
} 
```

通过仅检索每个元素的内容，您还可以避免在页面中重复 ID 和潜在的样式问题

# iphone - 发现多个名为“标签”的方法结果不匹配

> ID：14028483
> 
> 赞同：3
> 
> 时间：2012-12-25T07:07:28.683
> 
> 标签：iphone, objective-c, ios

我已`GDataframework`在我的项目中添加，添加后，我收到错误“发现多个名为 'tag' 的方法结果不匹配”。如果我删除`GDataFramework`它工作正常。我可以修改`GDataframework`还是应该在我的项目中完成？

```
int buttonTag=[sender tag]  //here that error prompts up at every place in my project 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-01-02T15:41:41.917

Is your code inside an action method, like this?

```
- (IBAction)buttonPressed:(id)sender {
    int buttonTag = [sender tag];
} 
```

Then you can solve the problem by replacing `id` with the correct type of the sender (`UIButton *` in this case):

```
- (IBAction)buttonPressed:(UIButton *)sender {
    int buttonTag = [sender tag];
} 
```

because the compiler then knows that `sender` is an instance of the `UIButton` class, and therefore knows which `tag` method is applied here.

Note that you can define the correct type already when creating the connection in Xcode:

![enter image description here](../Images/fc3db3507803e0b2af924e5fbfa4ca2c.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-21T10:47:39.727

在一种情况下，如果创建对象的工厂方法具有返回类型“id”，那么编译器将检查所有类中的方法签名。如果编译器在多个类中发现相同的方法签名，则会引发问题。因此，将返回类型“id”替换为“特定类名”。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-25T07:11:48.320

此链接存在与您类似的问题：[击败“找到多个名为 'xxx:' 的方法”错误](https://stackoverflow.com/questions/1038171/defeating-the-multiple-methods-named-xxx-found-error)尝试遵循该问题的答案在您自己的应用程序中所做的指南。

# php - 解析错误：语法错误，Facebook 应用程序中的意外 $end

> ID：14028484
> 
> 赞同：0
> 
> 时间：2012-12-25T07:07:42.807
> 
> 标签：php, facebook-graph-api

使用 Facebook PHP SDK。我正在按照教程进行操作，但在加载此页面时遇到了问题，这是我得到的错误：

![错误截图](../Images/5d8de7785a3323bfab45ad0a49c142ca.png)

这是代码（App ID 和 Secret key 已被删除）。我从教程中获得了文件，并从 GitHub 上提供的文件中填写了一些内容。

```
<?php

require 'src/facebook.php'

$app_id = ""; // has been removed
$secret = ""; // has been removed
$app_url = "http://apps.facebook.com/instahomework/";

// Create our Application instance (replace this with your appId and secret). 
$facebook = new Facebook(array(
  'appId'  => $app_id,
  'secret' =>  $secret,
));

// Get User ID
$user = $facebook->getUser();

// We may or may not have this data based on whether the user is logged in.
//
// If we have a $user id here, it means we know the user is logged into
// Facebook, but we don't know if the access token is valid. An access
// token is invalid if the user logged out of Facebook.

if ($user) {
  try {
    // Proceed knowing you have a logged in user who's authenticated.
    $user_profile = $facebook->api('/me');
  } catch (FacebookApiException $e) {
    error_log($e);
    $user = null;
  }
}

// Login or logout url will be needed depending on current user state.
if ($user) {
  $logoutUrl = $facebook->getLogoutUrl();
} else {
  $loginUrl = $facebook->getLoginUrl();

// This call will always work since we are fetching public data.
$naitik = $facebook->api('/naitik');

?>
<!doctype html>
<html xmlns:fb="http://www.facebook.com/2008/fbml">
<head>
<title>php-sdk example 1 - user login and authorisation</title>
<style>
body { font-family: Helvetica, Verdana, Arial, sans-serif; }
a { text-decoration:none; }
a:hover { text-decoration:underline; }
</style>
</head>
<body>
<pre>
<?php print_r($_REQUEST); ?>
</pre>
    <?php if ($user) { ?>
        <h2>Welcome</h2>
        <img src="https://graph.facebook.com/<?php echo $user; ?>/picture"><br/>
        <a href="<?php echo $link; ?>"><?php echo $name; ?></a><br/>
        <br/>
        Gender : <?php echo $gender; ?><br/>
        Locale : <?php echo $locale; ?><br/>
        Username : <?php echo $username; ?><br/>
    <?php } else { ?>
        <strong><em>You have not granted this App permission to access your data. Redirecting to permissions request...</em></strong>
<?php } ?>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-25T07:14:06.880

```
if ($user) {
 $logoutUrl = $facebook->getLogoutUrl();
} else {
  $loginUrl = $facebook->getLoginUrl();
} 
```

少了一个括号，我会建议你使用eclipse IDE，对于这样的错误，它会在编写代码时自动显示这些类型的错误

# java - org.zkoss.zk.ui.event.EventListener 不带参数

> ID：14028487
> 
> 赞同：0
> 
> 时间：2012-12-25T07:08:12.210
> 
> 标签：java, zk

我需要声明

```
private final EventListener<Event> eventListener; 
```

但出现以下错误

```
org.zkoss.zk.ui.event.EventListener does not take parameter. 
```

在文章这个链接[http://java.dzone.com/articles/advanced-zk-asynchronous-ui](http://java.dzone.com/articles/advanced-zk-asynchronous-ui)中使用它。如何使用这个命令？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-25T09:37:49.347

这可能是因为您使用的 ZK 版本与文章作者不同。

这是[5.0.12 版的 javadoc](http://www.zkoss.org/javadoc/5.0.12/zk/org/zkoss/zk/ui/event/EventListener.html)（不采用任何通用参数），这[是最新版本的 javadoc](http://www.zkoss.org/javadoc/latest/zk/org/zkoss/zk/ui/event/EventListener.html)，它采用通用参数。

# objective-c - 指针初始化

> ID：14028489
> 
> 赞同：2
> 
> 时间：2012-12-25T07:08:24.297
> 
> 标签：objective-c, ios

我知道在 Objective-C 中以及在 iOS SDK 上编程期间，一直使用指针。

在 Objective-C 中了解指针是否已初始化的最佳方法是什么？检查它是否为零？

```
CSomeClass *p;
//....
if(p==nil)
?? 
```

PS：换句话说，Objective-C 中变量的默认值是什么？指针？

* * *

## 更新

其实我有以下情况。

想象一下，我有一些指针`Pointer *p1`，`Pointer *p2`在某个班级。然后想象有人调用这个类，即它是一个视图，必须显示。然后在我的课堂上我想检查是否没有初始化`p1`并且`p2`（例如，`p1 == nil`？？`p2==nil`）我想显示空文本。

这些是在 Objective-C 中进行的某种比较吗？例如，如果没有初始化，默认值是`p1`多少`p2`？默认情况下，值是否被初始化为 Objective-C 中的某些内容？也许为空？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-25T07:54:18.427

> *在Objective C中了解指针是否已初始化的最佳方法是什么？检查它是否为零？？？*

*   是的，您是正确的（通过初始化，我假设您的意思是分配而不是设置默认属性的实际初始化）。您可以检查`nil`您是否已`CSomeClass *p;`在 ARC 中声明它。在非 ARC 中，您应该将其初始化为`CSomeClass *p = nil;`.

所以在这里你可以这样做，

```
if (p) { //or if (p != nil)
  //do your operations
} else { //same as if (!p) or if (p == nil)
  //display error message
} 
```

> *Actually I have following situation. Imagine I have some pointers `Pointer *p1`, `Pointer *p2` in some class. Then imagine someone calls this class, i.e., it is a view and must be displayed. Then in my class I want to check that if none had initialized p1 and p2 (e.g., p1 == nil? p2==nil?) I want to display empty text. Are these sort of comparisons done in ObjC?*

*   Yes, that is fine in Objective C. You can check it as `if (p1 && p2)` or `if ((p1 != nil) && (p2 != nil))`. Both are fine. In the else part, you can add the empty text which should be displayed.

> *For example what are the default values of p1 and p2 if they were not initialized? Do values by default get initialized to something in ObjC?? maybe to null?*

*   In ARC, it will be nil. In non-ARC you should equate to `CSomeClass *p1 = nil;` before doing this or else it will be a dangling pointer with some garbage value.

Here is the [documentation on ARC.](http://developer.apple.com/library/ios/#releasenotes/ObjectiveC/RN-TransitioningToARC/Introduction/Introduction.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-25T07:55:16.627

Something important to understand here is that Objective-C uses reference counting - this is why the terminology of saying "a pointer is initialized" is a bit problematic.

The way to know if an object even exists (Doesn't mean it's initialized!)

```
if (!object) {
      NSLog(@"Object is nil");
} 
```

If you wish to release an object, it's always best practice to nil it out. This way, others won't send a message to deallocated instance (causes a nasty crash):

```
[object release],object = nil; 
```

# spring-security - 在运行时在 Spring Security 中添加 URL 而无需重新启动应用程序

> ID：14028490
> 
> 赞同：0
> 
> 时间：2012-12-25T07:08:35.970
> 
> 标签：spring-security

在我的基于 java 的 Web 应用程序中，用户想要在应用程序中添加他的 URL。我使用了 Spring Security，它从数据库中选择用户以及一些预定义的 URL。现在，如果用户想要添加新的 URL 并允许他自己的 URL（它不在我的安全 URL 列表中），我可能需要将该 URL 放入数据库中，重新启动应用程序，然后用户将登录，然后他可以访问该 URL。我希望用户可以在运行时提供此 URL，并且只需注销并登录。Spring 安全应该授权该 URL。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-25T12:59:31.520

将您的 url 和权限规则存储在实现[DefaultFilterInvocationSecurityMetadataSource -- Requestmap](http://static.springsource.org/spring-security/site/docs/3.0.x/apidocs/org/springframework/security/web/access/intercept/DefaultFilterInvocationSecurityMetadataSource.html)表的域类中，该表可以动态更新。

# c# - 虚拟键码星号键

> ID：14028496
> 
> 赞同：1
> 
> 时间：2012-12-25T07:09:46.267
> 
> 标签：c#, keyboard, keycode

我想创建一个屏幕键盘，但我不知道星号/星号键的键码是什么（在数字键盘范围内）。谁能帮我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-25T07:14:11.793

检查它的一种简单方法是，如果您将 Key Press 事件附加到文本框，并且如果您放置一个断点以查看针对`*`星号返回的内容。其值为：

```
e = {KeyChar = 42 '*'} 
```

# loops - 从 Common Lisp 中的嵌套循环返回

> ID：14028497
> 
> 赞同：4
> 
> 时间：2012-12-25T07:09:46.550
> 
> 标签：loops, common-lisp, nested-loops

我正在尝试将此 Python 代码转换为 Common Lisp：

```
for a in xrange(1,1000):
    for b in xrange(a,1000):
        c = (a**2 + b**2) ** 0.5
        s = a + b + c
        if s == 1000:
            return a * b * c 
```

我的第一次尝试是：

```
(loop for a from 1 to 999
      do (loop for b from a to 999
               for c = (sqrt (+ (expt a 2) (expt b 2)))
               for s = (+ a b c)
               until (= s 1000)
               finally return (* a b c)))) 
```

这行不通。我的任务是：当`s`点击 1000 时，使上面的整个表达式返回`(* a b c)`。如何从嵌套循环宏中返回一些值？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-25T07:29:22.393

可以使用`block`and`return-from`操作符：`block`建立一个命名的代码块，你可以`return-from`使用该块的名称从这个块返回

```
(let (c s)
  (block nested-loops
    (do ((a 1 (1+ a))) ((= a 999))
      (do ((b a (1+ b))) ((= b 999))
        (setf c (sqrt (+ (expt a 2) (expt b 2)))
              s (+ a b c))
        (if (= s 1000)
            (return-from nested-loops (* a b c))))))) 
```

PS，我`loop`这里没用过，只是习惯了`do`。

也来自[http://www.gigamonkeys.com/book/loop-for-black-belts.html](http://www.gigamonkeys.com/book/loop-for-black-belts.html)

要允许使用 RETURN-FROM 从特定循环返回（在嵌套 LOOP 表达式时很有用），您可以使用命名的循环关键字命名 LOOP。如果命名子句出现在循环中，它必须是第一个子句。举个简单的例子，假设列表是一个列表列表，并且您希望在其中一个嵌套列表中找到与某些条件匹配的项目。你可以通过一对这样的嵌套循环找到它：

```
(loop named outer for list in lists do
     (loop for item in list do
          (if (what-i-am-looking-for-p item)
            (return-from outer item)))) 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-12-25T08:52:23.317

Python`return`语句不会从循环中返回，它会从包含循环的整个函数中返回。在 Common Lisp 中，函数会建立一个与函数同名的隐式块。所以你可以使用：

```
(return-from function-name (* a b c)) 
```

执行与 Python 代码等效的返回。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-12-18T14:48:59.957

我认为您的解决方案应该在尝试保持 python 代码的原始形式的同时进行少量调整

```
(loop named outer for a from 1 below 1000 do
 (loop for b from a below 1000
    for c = (sqrt (+ (expt a 2) (expt b 2)))
    for s = (+ a b c)
    if (= s 1000) do (return-from outer (* a b c)))) 
```

如果你想输入中缀方程，你可以使用 quicklisp 提供的中缀库和 (ql:quickload :infix)，然后修改上面得到

```
(loop named outer for a from 1 below 1000 do
 (loop for b from a below 1000
    for c = #i(sqrt (a^^2 + b^^2))
    for s = #i(a + b + c)
    if (= s 1000) do (return-from outer #i(a * b * c)))) 
```

# android - 隐藏最近的应用系统对话框

> ID：14028499
> 
> 赞同：0
> 
> 时间：2012-12-25T07:10:32.920
> 
> 标签：android, android-intent, android-widget

我通过在活动中覆盖以下方法来关闭最近的应用程序对话框：

```
public void onWindowFocusChanged(boolean hasFocus) {
super.onWindowFocusChanged(hasFocus);  
if(!hasFocus) {
Intent closeDialog = new Intent(Intent.ACTION_CLOSE_SYSTEM_DIALOGS);
sendBroadcast(closeDialog);
}
} 
```

但是我面临的问题是，如果`AlertDialog`当前在活动中可见，则不会调用此方法。如果在活动中可见，`onWindowFocusChanged()`则在按下最近的应用程序按钮时，我没有得到回调或任何其他活动生命周期方法。 有什么方法可以捕获最近的应用程序按钮的事件或任何其他方式来阻止或禁用最近的应用程序按钮`AlertDialog`

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-25T07:14:10.147

`onResume(){...}`您可以从您的活动中调用此方法。

# c# - mvc3中可点击的复选框技能

> ID：14028500
> 
> 赞同：-1
> 
> 时间：2012-12-25T07:10:48.253
> 
> 标签：c#, asp.net-mvc-3

> **可能重复：**
> [MVC3 razor 中的 CheckboxList 事件](https://stackoverflow.com/questions/14021204/checkboxlist-event-in-mvc3-razor)

谁能帮我这个？当我点击复选框时，只有复选框被选中，但即使我也点击标签，我也想选择复选框。

我的控制器是：

```
 IEnumerable<TblSkill> skillList = (from x in db.TblSkills select x).ToList();
                ViewBag.skill = skillList.Select(c => new SelectListItem{
                    Text = c.Skills.ToString(),
                    Value = c.SkillsId.ToString()
                }); 
```

我的观点是：

```
<div class="editor-field">
            @{
IEnumerable<SelectListItem> skill = ViewBag.skill;
       foreach (var item in skill)
       {           
                <input type="checkbox" name="skillsId" value="@item.Text" /> 
                <label>@item.Text</label>  
                @Html.ValidationMessageFor(model => model.Skills)
       }
            }
           </div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-25T09:00:16.703

尝试这个：

```
<input id="kibble" type="checkbox" value="kibble" />
<label for="kibble">Kibble</label> 
```

`for="kibble"`- “粗磨”在哪里`id`

演示：[复选框的标签](http://www.10sharpdesign.com/accessibility/forms/3b-ii-labels-checkboxes.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-25T07:14:50.157

该复选框具有名为“文本”的属性，请使用该属性。标签将自动呈现，当您单击该标签时。复选框将被切换。

# php - 如何使用 PHP 评估 MySQL 中的数据

> ID：14028505
> 
> 赞同：-1
> 
> 时间：2012-12-25T07:12:09.237
> 
> 标签：php, mysql, sql

**问题：**

如何在网页上一次显示 100 条记录（按 from 的降序排列`id's`）`table1`以及`record B`from table1 不在的地方`table2`添加“Y”或“N”属性，就像我在 php_object 的 F 列中所做的那样. 不太确定所需的代码以及这是否是我应该在 PHP 或 MySQL 中做的事情以及如何做？提前致谢。我还想知道如何使结果一次只显示来自 table1 的一条记录，该记录不在表 2 中（而不是最近的 100 条） - 请参阅下面的答案格式。

```
table1                 table2                 php_object1?

  A  |   B  |  C         D  |   B  |  E         A  |   B  |  F     
--------------------   --------------------   -------------------------- 
  X  |   X  |  X         X  |   X  |  X         X  |   X  |  Y
  X  |   X  |  X         X  |   -  |  X         X  |   X  |  N
  X  |   X  |  X         X  |   X  |  X         X  |   X  |  Y
 ...                     ...                   ... 
```

**答案最终将采用以下格式**

## 桌子

类似于上面创建的 php_object。我想查看表 1 中的所有记录（天气 B 是否存在）。根据 B 是否存在，制作列 Y 或 N 并向 html 中显示的 table1 添加条件格式（即**突出显示 table1 中 B 不存在于 table2 中的行**）

## 句子

“这是第一个`record1`不`table1`存在 B 的地方`table2`。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-25T07:19:42.933

`LEFT JOIN`在第一种情况下使用，

```
SELECT  a.*, 
        IF(b.B IS NULL, 'N', 'Y') F
FROM    table1 a
        LEFT JOIN table2 b
            ON a.B = b.B
ORDER BY a.ID DESC
// LIMIT 
```

至于下一个要一次显示 100 条记录的问题，请参阅分页

*   [PHP 分页](http://www.phpeasystep.com/phptu/29.html)
*   [PHP 分页](http://php.about.com/od/phpwithmysql/ss/php_pagination.htm)

# css - 为动态复选框放置适当的 CSS - Spring MVC

> ID：14028506
> 
> 赞同：0
> 
> 时间：2012-12-25T07:12:15.680
> 
> 标签：css, jsp, spring-mvc

这是一个微不足道的问题，但我对此很陌生，请处理它。

我正在使用`Spring MVC`以下是复选框填充的代码：

```
<form:checkboxes items="${evaluateAttributeList}" path="evaluateAttribute"/>
<span id="availmsg" style="display:none"></span>
<form:errors path="evaluateAttribute" cssClass="error"/> 
```

我是从那里经过`evaluateAttributeList`的`Controller`，它的人口众多。

我知道在每一行中放置一个`< p >`或将会使一个。`< br >`

我想以正确的顺序排列它们（即每行两个复选框）。我需要在 jsp 方面进行哪些调整？

我需要在 JSP 中进行哪些更改，以便将 CSS 用于所有复选框而不是整个复选框？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-25T07:25:29.983

一些谷歌搜索使我找到了这个[链接](http://www.mkyong.com/spring-mvc/spring-mvc-checkbox-and-checkboxes-example/)。

我最好的猜测是，您将不得不在html 的s 和s 中使用`form:checkboxes`和组合`form:checkbox``<td>``<tr>``<table>`

# qt-creator - qt 创建者代码开始进程

> ID：14028509
> 
> 赞同：0
> 
> 时间：2012-12-25T07:12:35.637
> 
> 标签：qt-creator

我想从我的 qt creator 项目中启动进程（我的意思是打开一个可执行文件），例如在 c# 中我们使用：system.diagonistic.procces.start(file/path); qt creator 中对应的是什么？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-30T21:32:27.807

你检查过 QProcess 的文档吗？

# web-applications - 丰富的Web应用平台建议

> ID：14028514
> 
> 赞同：0
> 
> 时间：2012-12-25T07:12:48.447
> 
> 标签：web-applications, ria, web-frameworks, intranet

我们决定开发一个实时监控 Intranet 应用程序。此工具的用户数约为 50+。考虑到趋势，我们决定它是基于网络的。我们的后端服务器广泛使用java，但是实时监控代理和服务器之间的通信将基于xml，因此我们也可以考虑使用.net技术。对所选平台的移动性支持是必要的，尽管这不是我们目前主要关注的问题。考虑到我们的情况，您会推荐哪种富客户端 Web 应用程序平台？请在您的建议中考虑学习曲线和在线社区支持。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-25T09:20:36.883

鉴于您的 Java 后端基础设施，我建议 GWT 作为一个明显的选择。

[谷歌网络工具包](https://developers.google.com/web-toolkit/)

# javascript - 使用 jquery 在大型数据表中显示/隐藏列/行排序/固定标题的建议

> ID：14028517
> 
> 赞同：1
> 
> 时间：2012-12-25T07:13:00.163
> 
> 标签：javascript, jquery, html, css, jquery-ui

我有一个很大的表，里面装满了数据

第一个 - 我想使用显示/隐藏列：
问题是当我的列传递 10-12 到更多时，它变得非常慢
，因为我给每个列一个类，它所在的列并调用它
来切换与关联的锚（） .

第二和第三 - 我想使用固定标题，因为我的行超过 1000 行，
因为我这样做我不能有效地使用我用 js 编写的搜索，
实际上是一个轻量级代码。

PS。请记住，我有一个非常大的 json 生成表，其中包含 20 多列和 1000 多行，我 ** 不能使用任何框架，除了 JQUERY 和 JQUERYUI **

编辑：为显示/隐藏添加一些代码

```
 $('#columnSelect').on('click', 'li', function(){
        var columnTmp = $(this).children('a').text()
        $('#dataTable').find('.'+columnTmp).toggle()
    }) 
```

我有一个标签列表，它也是通过我的第一个 ajax 调用动态创建的

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-25T10:52:53.040

如果您真的是 jQuery 爱好者，那么我建议您使用一些免费的 jQuery Grid API，例如 Slick Grid 或 Flexi Grid

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-25T10:14:37.127

我为我的一些“大表”使用了两个插件的组合

这用于格式化表格，提供排序和其他功能： [http ://www.tablefixedheader.com/fullpagedemo/](http://www.tablefixedheader.com/fullpagedemo/)

而且，这提供了过滤，快速且非常有效，如果您有很多列/数据，它可能会很有帮助。在每列的顶部有一个搜索框或单独下拉，允许对该列进行过滤，以及一个“快速查找”类型的搜索框，它将搜索/过滤所有列 [http://www.picnet.com.au /picnet-table-filter.html](http://www.picnet.com.au/picnet-table-filter.html)

# c#-4.0 - 在 c# .net 中控制 .exe 参数

> ID：14028518
> 
> 赞同：0
> 
> 时间：2012-12-25T07:13:02.300
> 
> 标签：c#-4.0, parameter-passing

我想在 .exe 文件再次运行时控制它的参数。例如

**DocumentViewer.exe** -DocID=1097911 -DBName "TEST.WORLD" -DBUname "DB1" -DBPwd "DB1" -AccessUserName "user1" -AccessPassword "pass1" -AccessPath "C:\..."

如果用户运行具有不同 DocID 的 .exe 文件的新实例，则此 .exe 文件正在运行，我想通知用户“您应该使用 DocID:1097911 完成您的工作以打开新文档”。

我不明白我应该在哪里获得第二个实例的参数来控制第一个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T17:27:13.593

您需要某种类型的数据存储来保存参数。然后在实例终止后，您需要清除数据存储。在这个例子中，为了简单起见，我将使用一个文本文件。

当您的 .exe 实例启动时，首先从集中的文本文件中读取。如果文本文件为空，则使用实例的参数更新文件并继续启动。如果它不为空，则使用文本文件中的 DocId 通知用户。

# c - Borland C 5.5 编译器不工作

> ID：14028520
> 
> 赞同：3
> 
> 时间：2012-12-25T07:13:12.457
> 
> 标签：c, compiler-construction

我正在使用 Windows 7-64 位。Borland C++ 5.5 不工作。

测试文件 Hello.c

```
#include<stdio.h>

int main(void)
{  
   printf("Hello world!\n");
   return 0; 
} 
```

> 错误 E2209 Hello.c 1：无法打开包含文件“stdio.h”
> 警告 W8065 Hello.c 5：调用函数“printf”，而函数 main 中没有原型
> *** 1 编译中的错误 ***

我已经用这些配置制作了 bcc32.cfg 和 ilink.cfg

bcc32.cfg

```
-I"c:\Borland\BCC55\include"  
-L"c:\Borland\BCC55\lib" 
```

ilink32.cfg

```
-L"c:\Borland\BCC55\lib" 
```

：使困惑：

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-29T06:01:55.193

首先查找您的包含和库目录，看看它是否与您的 borland C 目录选项中的相同

# c# - 非静态字段、方法或属性“masterpage.fileupload”需要对象引用

> ID：14028525
> 
> 赞同：0
> 
> 时间：2012-12-25T07:13:46.137
> 
> 标签：c#, asp.net, .net, file-upload, asp.net-4.0

我正在使用静态方法将图像上传到项目文件夹中，但由于出现错误而无法这样做：

> 非静态字段、方法或属性“inheritedclass.fileupload”需要对象引用

我的功能如下：

```
[WebMethod]
public static string FileUploadUsingJqueryNew(string nameofimage)
{
    string File_Name = nameofimage;       
    FileUploadID.SaveAs(Server.MapPath("~/UploadFile/" + File_Name));
    imgID.ImageUrl = "../UploadFile/" + File_Name;
    imgID.Visible = true;
    return nameofimage;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-25T07:20:29.670

您使用页面上的 WebControl 的[FileUpload.SaveAs](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.fileupload.saveas.aspx)方法。您的页面是具有属性的对象，其中之一是您的`FileUpload`.

您不能将控件的引用传递给静态方法。您只能使用非静态方法来使用您的`FileUpload`控件。

**更新：**
根据您使用的`[WebMethod]`属性，我认为您正在尝试将文件传递给 Web 服务方法。这可以通过使用[HttpPostedFile.InputStream](http://msdn.microsoft.com/en-us/library/system.web.httppostedfile.inputstream.aspx)`FileUpload`添加一个将文件内容传递给`[WebMethod]`as的处理程序来完成。`Stream`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-25T07:35:12.993

*   `FileName = nameofimage`

你不能定义`Filename`这样的。`FileName`是一个属性。像这样使用`String fileName = FileUpload1.FileName;` **不要忘记逗号！**

*   `FileUpload.SaveAs()`

你不能这样做。您可以将其与控制中的非静态方法一起使用[`FileUpload`](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.fileupload%28v=vs.110%29.aspx)。像这样使用；

```
FileUpload f = new FileUpload();
f.SaveAs(); 
```

# android - 错误：从活动外部调用活动

> ID：14028532
> 
> 赞同：2
> 
> 时间：2012-12-25T07:14:10.583
> 
> 标签：android, android-intent

我确实有一个应用程序，它的屏幕（活动）很少。从其中之一，即支持屏幕，我必须能够运行电子邮件、共享和其他活动。因此，我以这种方式添加了发送电子邮件选项：

```
 case R.id.firstColumn:
            /* Create the Intent */
            final Intent emailIntent = new Intent(android.content.Intent.ACTION_SEND);

            /* Fill it with Data */
            emailIntent.setType("plain/text");
            emailIntent.putExtra(android.content.Intent.EXTRA_EMAIL, new String[]{"elitedrumbeat@gmail.com"});
            emailIntent.putExtra(android.content.Intent.EXTRA_SUBJECT, "Feedback from customers");

            /* Send it off to the Activity-Chooser */
            context.startActivity(Intent.createChooser(emailIntent, "Send mail..."));
            break; 
```

我建议它将运行默认的内置电子邮件应用程序，并为用户提供填写正文然后发送电子邮件的选项。不幸的是，logcat 给出了这个错误：

```
12-25 12:06:17.074: E/AndroidRuntime(8153): FATAL EXCEPTION: main
12-25 12:06:17.074: E/AndroidRuntime(8153): java.lang.IllegalStateException: Could not execute method of the activity
12-25 12:06:17.074: E/AndroidRuntime(8153):     at android.view.View$1.onClick(View.java:3063)
12-25 12:06:17.074: E/AndroidRuntime(8153):     at android.view.View.performClick(View.java:3534)
12-25 12:06:17.074: E/AndroidRuntime(8153):     at android.view.View$PerformClick.run(View.java:14263)
12-25 12:06:17.074: E/AndroidRuntime(8153):     at android.os.Handler.handleCallback(Handler.java:605)
12-25 12:06:17.074: E/AndroidRuntime(8153):     at android.os.Handler.dispatchMessage(Handler.java:92)
12-25 12:06:17.074: E/AndroidRuntime(8153):     at android.os.Looper.loop(Looper.java:137)
12-25 12:06:17.074: E/AndroidRuntime(8153):     at android.app.ActivityThread.main(ActivityThread.java:4441)
12-25 12:06:17.074: E/AndroidRuntime(8153):     at java.lang.reflect.Method.invokeNative(Native Method)
12-25 12:06:17.074: E/AndroidRuntime(8153):     at java.lang.reflect.Method.invoke(Method.java:511)
12-25 12:06:17.074: E/AndroidRuntime(8153):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
12-25 12:06:17.074: E/AndroidRuntime(8153):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
12-25 12:06:17.074: E/AndroidRuntime(8153):     at dalvik.system.NativeStart.main(Native Method)
12-25 12:06:17.074: E/AndroidRuntime(8153): Caused by: java.lang.reflect.InvocationTargetException
12-25 12:06:17.074: E/AndroidRuntime(8153):     at java.lang.reflect.Method.invokeNative(Native Method)
12-25 12:06:17.074: E/AndroidRuntime(8153):     at java.lang.reflect.Method.invoke(Method.java:511)
12-25 12:06:17.074: E/AndroidRuntime(8153):     at android.view.View$1.onClick(View.java:3058)
12-25 12:06:17.074: E/AndroidRuntime(8153):     ... 11 more
12-25 12:06:17.074: E/AndroidRuntime(8153): Caused by: android.util.AndroidRuntimeException: Calling startActivity() from outside of an Activity  context requires the FLAG_ACTIVITY_NEW_TASK flag. Is this really what you want?
12-25 12:06:17.074: E/AndroidRuntime(8153):     at android.app.ContextImpl.startActivity(ContextImpl.java:847)
12-25 12:06:17.074: E/AndroidRuntime(8153):     at android.content.ContextWrapper.startActivity(ContextWrapper.java:276)
12-25 12:06:17.074: E/AndroidRuntime(8153):     at tt.tt.tt.gui.SupportScreen.onClick(SupportScreen.java:38) 
```

谷歌搜索我发现我需要添加以下行：

```
 emailIntent.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK); 
```

这不是可取的，但添加该行仍然没有帮助。那么，有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-25T08:22:50.790

这个问题已经解决。我不知道为什么我使用上下文来运行意图。

```
context.startActivity(Intent.createChooser(emailIntent, "Send mail...")); 
```

应该

```
 startActivity(Intent.createChooser(emailIntent, "Send mail...")); 
```

完成，这行得通。

# android - 在eclipse中为Android三星SDK设置开发环境

> ID：14028535
> 
> 赞同：4
> 
> 时间：2012-12-25T07:14:25.240
> 
> 标签：android, eclipse, samsung-mobile

有人可以帮我在eclipse中为android samsung sdk设置开发环境吗？
我正在使用 eclipse helios 并尝试添加附加站点 url [http://innovator.samsungmobile.com/android/repository/repository.xml](http://innovator.samsungmobile.com/android/repository/repository.xml)

但它不会连接。
有人遇到过这个问题吗？
请帮忙。
谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-25T09:34:14.573

我不确定您指的是哪种类型的三星 SDK，但给定的 URL 无效，您只需在浏览器中打开它即可看到。您将被重定向到三星的开发者网站。

也就是说，您不需要任何三星 SDK 来进行纯 Android 开发。如果您安装了 Android 开发工具包和 Android 平台 SDK，就可以开始使用了。您可以创建“蒙皮”的模拟器，使其看起来像某些开箱即用的三星设备（使用 Android SDK 21）。

如果您要设置新环境，请使用 Eclipse Juno 而不是 Helios。否则，您将错过所有 Eclipse 工具中一年的错误修复和功能......

# entity-framework - 应用前的 DbContext 操作

> ID：14028538
> 
> 赞同：1
> 
> 时间：2012-12-25T07:14:51.200
> 
> 标签：entity-framework, dbcontext

我有几个实体继承了具有以下公共字段的基类：

```
[DataType(DataType.Text)]
[StringLength(100)]
public string CreatedBy { get; set; }

[DataType(DataType.DateTime)]
public DateTime? CreatedDate { get; set; }

[DataType(DataType.Text)]
[StringLength(100)]
public string ModifiedBy { get; set; }

[DataType(DataType.DateTime)]
public DateTime? ModifiedDate { get; set; } 
```

我想在进入 contex 之前填写这些字段。是否有一些事件/方法/处理程序可以在实体放置到上下文之前重复使用以对实体执行一些操作？我希望这些字段在添加到上下文时填充，而不是放入数据库中。

**解决方案：[Entity Framework/SQL2008 - 如何自动更新实体的 LastModified 字段？](https://stackoverflow.com/questions/3879011/entity-framework-sql2008-how-to-automatically-update-lastmodified-fields-for-e)**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-25T07:21:39.080

不确定 100% 通过在这些字段进入数据库之前将它们填充到上下文中是什么意思。但是如果你想在某个时候将它们持久化，这些字段应该是对象（实体）的一部分，然后你可以使用填充 poco设置方法。您可以随时调用 context.Save()/Update() 方法。

# asp.net - 通用控件页面

> ID：14028539
> 
> 赞同：1
> 
> 时间：2012-12-25T07:15:00.820
> 
> 标签：asp.net, visual-studio-2012

我有一个 webapp（vs2012），它有几个页面，在一些常用控件的几个页面中。
我不想使用母版页。如果我使用`UserControl`可以访问 UC 的控件吗？

请推荐一个好方法

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-25T07:26:58.727

我可以访问 UC 的控件吗？

答案是肯定的
，您可以为您的 UC 上的每个控件公开您的 UC 上的公共属性。
并使用这些属性，您可以访问这些控件
您可以通过此链接
[http://www.c-sharpcorner.com/UploadFile/Santhi.M/PassingValuesfrmUCtoASPX11212005050040AM/PassingValuesfrmUCtoASPX.aspx](http://www.c-sharpcorner.com/UploadFile/Santhi.M/PassingValuesfrmUCtoASPX11212005050040AM/PassingValuesfrmUCtoASPX.aspx)

# php - 在 php while 循环中传递 javascript 动作

> ID：14028545
> 
> 赞同：2
> 
> 时间：2012-12-25T07:16:23.573
> 
> 标签：php, javascript

我需要以下功能：

“选中复选框时，必须突出显示相应的文本框，并且用户可以在其中输入一些文本..”

复选框正在工作，但是当一个复选框被选中时，相应的文本框没有激活，如何解决这个问题？

这是我的php代码：

```
<?php
if ($handle = opendir('/year_no/albums')) {
    $blacklist = array('.', '..');
    while (false !== ($file = readdir($handle))) {
        if (!in_array($file, $blacklist)) {
            echo "<form name='form1'>
            <div class='controlset-pad'>
            <font color='black'><label><input type='checkbox' name='album[]' value='$album' onclick='enable_text(this.checked)' class='medium'/><span>$album</span></label><br/></div>​";
            echo"<script> 
            function enable_text(status)
            {
                status=!status;
                document.form1.other_name.disabled = status;
            }
            </script>";
            echo "<div class='field4'><label>Add your comment here</label><input type='text' name='other_name' class='medium' disabled='disabled'/></div></form>";
        }
    }
    closedir($handle);
}
?> 
```

修改后的代码：

```
<script> 
function enable_text(status, sub)
{
status=!status;
document.getElementById(sub).disabled = status;
}
</script>
<form name='form1'>
<?php
if ($handle = opendir('/year_no/albums')) {
    $blacklist = array('.', '..');
    while (false !== ($file = readdir($handle))) {
        if (!in_array($file, $blacklist)) {
echo "<div class='controlset-pad'>
<font color='black'><label><input type='checkbox' name='file[]' value='$file' onclick='enable_text(this.checked, $file)' class='medium'/><span>$file</span></label>
</div>";
echo "<div class='field4'><label>Add your comment here</label><input type='text' name='sub' id='$file' class='medium' disabled='disabled'/></div>";
        }
    }
    closedir($handle);
}
?>
</form> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-25T09:48:20.797

**试试这个：**

*正如您所说，下面的代码具有在选中复选框时启用文本框并在未选中时再次禁用它的功能。*

这是一个工作[**示例：**](http://kapadiapankit.in/testhere.php)

```
<script type="text/javascript" src="http://code.jquery.com/jquery-1.8.3.min.js">    </script>
<!-- include JQuery using above line -->

<!-- Here is your small javascript -->
<script type="text/javascript">
$(document).ready(function(e) {
    $("input[type=checkbox]").on("click",function(){
        if($(this).is(':checked')){
                    //If checkbox is checked do whatever you want to do here.
            $("#txt_"+$(this).attr("id")).removeAttr("disabled");
                    $("#drpdwn_"+$(this).attr("id")).removeAttr("disabled");
        } else {
                   // If unchecked.
            $("#txt_"+$(this).attr("id")).attr("disabled","disabled");
                    $("#drpdwn_"+$(this).attr("id")).attr("disabled","disabled");
        }
    });
});
</script>
<?php
$dir = "/year_no/albums";

if(is_dir($dir)) {
    if ($dh = opendir($dir)) {
        $blacklist = array('.', '..');
        $count=1;
        while (($file = readdir($dh)) !== false) {
            if (!in_array($file, $blacklist)){  
                echo "<div class='controlset-pad'>
                        <font color='black'>
                            <label>
                                <input type='checkbox' name='file[]' id='".$count."' value='enabletxtbox' class='medium'/>
                                <span>".$file."</span>
                            </label>
                    </div>";
                echo "<div class='field4'>
                        <label>Add your comment here</label>
                        <input type='text' name='sub' id='txt_".$count."' class='medium' disabled='disabled'/>";

                if(filetype($dir.$file) == "dir"){
                        $dir2 = $dir.$file;
                        $dh2=opendir($dir2);
                        $drpdwn="<select id='drpdwn_".$count."' disabled='disabled'>";
                        while(($file2 = readdir($dh2)) !== false){
                            if(!in_array($file2, $blacklist)){
                                $drpdwn.='<option>'.$file2.'</option>';
                            }
                        }
                        $drpdwn.="</select>";
                        closedir($dh2);
                        echo $drpdwn;

                }
                echo"</div>";
            }
            $count++;
        }
        closedir($dh);
    }
}
?> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-25T07:26:12.837

您的代码是完美的，只需添加如下的小改动。

代替`id`

```
document.getElementById('other_name').disabled = status; 
```

请注意，`id`每个元素必须是唯一的。

编辑使用此代码

```
<?php
if ($handle = opendir('/year_no/albums')) {
    $blacklist = array('.', '..');
    while (false !== ($file = readdir($handle))) {
        if (!in_array($file, $blacklist)) {
echo "<form name='form1'>
<div class='controlset-pad'>
<font color='black'><label><input type='checkbox' name='album[]' value='$album' onclick='enable_text(this.checked, $album)' class='medium'/><span>$album</span></label><br/>
</div>?";
echo"<script> 
function enable_text(status, album)
{
status=!status;
document.getElementById(album).disabled = status;
}
</script>";
echo "<div class='field4'><label>Add your comment here</label><input type='text' name='other_name' id = '$album' class='medium' disabled='disabled'/></div></form>";
        }
    }
    closedir($handle);
}
?> 
```

注意 $album 值不能为空

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-25T07:32:13.980

使用这个例子

```
 <form name="form1">
    <script>
    function enable_text(status)
            {
            alert(status)
            status=!status;
            document.form1.other_name.disabled = status;
            }
    </script>
        <input type='checkbox' name='album' value='hi' onclick='enable_text(this.checked)' class='medium'/>
        <input type='text' name='other_name' class='medium' disabled='disabled'/>
    </form> 
```

# iphone - Initialize multiple objects with different name

> ID：14028547
> 
> 赞同：0
> 
> 时间：2012-12-25T07:16:45.927
> 
> 标签：iphone, objective-c, ios, ios5

How can I `Initialize` and `allocate` multiple objects with different name and pass it to the `NSArray`. from Below code the object is initialized once in loop and I need to initialized multiple times as per the For loop will go with different name..and then pass it to `NSArray`.please check the code below.. when **For** loop will start means **i=0** ..initialized item would be`tempItemi` now next time when **i=1 and i=2** the `tempItemi` name will be same .how can i change this with in loop..and pass it to `NSArray *items`

```
for (int i = 0; i< [Array count]; i++)
{
    id object = [Array objectAtIndex:i];

    if ([object isKindOfClass:[NSDictionary class]])
    {
        NSDictionary *objDict = (NSDictionary *)object;

        ECGraphItem *tempItemi = [[ECGraphItem alloc]init];

        NSString *str = [objDict objectForKey:@"title"];

        NSLog(@"str value%@",str);
        float f=[str floatValue];
        tempItemi.isPercentage=YES;
        tempItemi.yValue=f;
        tempItemi.width=30;

        NSArray *items = [[NSArray alloc] initWithObjects:tempItemi,nil];
        //in array need to pass all the initialized values

        [graph drawHistogramWithItems:items lineWidth:2 color:[UIColor blackColor]];
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-25T07:24:48.780

Why dont you just make the array mutable and then add the object each time like this:

```
NSMutableArray *items = [[NSMutableArray alloc] init];
// a mutable array means you can add objects to it!

for (int i = 0; i< [Array count]; i++)
{
    id object = [Array objectAtIndex:i];

    if ([object isKindOfClass:[NSDictionary class]])
    {
        NSDictionary *objDict = (NSDictionary *)object;

        ECGraphItem *tempItemi = [[ECGraphItem alloc]init];

        NSString *str = [objDict objectForKey:@"title"];

        NSLog(@"str value%@",str);
        float f=[str floatValue];
        tempItemi.isPercentage=YES;
        tempItemi.yValue=f;
        tempItemi.width=30;

        [items addObject: tempItemi];
        //in array need to pass all the initialized values

       }
}

    [graph drawHistogramWithItems:items lineWidth:2 color:[UIColor blackColor]]; 
```

Anyways `items` in your original code will be reinitializing each time and you are drawing a new histogram each time so your code won't work... This should work...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-25T07:24:31.073

The code you have written is ok but, `NSArray *items` will always contain only one item at each loop. just declare that outside for loop as `NSMutableArray`, and go with the same code you are using.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-25T07:44:56.893

As you said you want to make variable dynamically as

ECGraphItem *tempItemi = [[ECGraphItem alloc]init];

here `i` will be changing in the loop,

You can create a `NSDictionary` with key/value as per with your tempItem1/2/3/4.... as key and save values by alloc/init.

Then instead of a variable `tempItem32`, you will be using `[dict valueForKey:@"tempItem32"]`.

EDIT:

Check this example if this may come handy

```
NSMutableDictionary *dict=[NSMutableDictionary new];
for (int i=1; i<11; i++) {
    NSString *string=[NSString stringWithFormat:@"string%d",i];
    [dict setObject:[NSString stringWithFormat:@"%d", i*i] forKey:string];

}
NSLog(@"dict is %@",dict);

NSString *fetch=@"string5";
NSLog(@"val:%@, for:%@",[dict valueForKey:fetch],fetch); 
```

# android - 在列表视图上加载数据

> ID：14028549
> 
> 赞同：0
> 
> 时间：2012-12-25T07:17:09.033
> 
> 标签：android

我想通过一个中间类将数据加载到listview，我通过构造函数传输数据。但是在数据加载过程中遇到了我无法解决的错误，希望大家帮帮我。

类加载列表视图

```
public class LoadListView {
private Context mContext = null;
ArrayList<String> phonenumberArray = new ArrayList<String>();
ArrayList<String> codeInvoiceArray = new ArrayList<String>();
ArrayList<String> nameArray = new ArrayList<String>();
ArrayList<String> addressArray = new ArrayList<String>();
ArrayList<String> urlArray = new ArrayList<String>();
ListView listview=(ListView)((Activity)mContext).findViewById(R.id.listView1);
String name,phonenumber,address,url,code,iddelivery;

public LoadListView(Context mContext, String name,String phone,String address,String url,String code, String ID)
{
    this.mContext=mContext;
    this.name=name;
    this.phonenumber=phone;
    this.code=code;
    this.address=address;
    this.url=url;
    this.iddelivery=ID;
}

// Xóa các item trong mảng để tránh sự trùng lặp
public void clearArray()
{
    codeInvoiceArray.clear();
    nameArray.clear();
    phonenumberArray.clear();
    addressArray.clear();
    urlArray.clear();
}

// load dữ liệu lên listview
public void loaddatalistview()
{
    clearArray();
    phonenumberArray.add(phonenumber);
    codeInvoiceArray.add(code);
    nameArray.add(name);
    addressArray.add(address);
    urlArray.add(url);
    listview.setAdapter(new DataAdapter(mContext, codeInvoiceArray
            .toArray(new String[codeInvoiceArray.size()]), nameArray
            .toArray(new String[nameArray.size()]), phonenumberArray
            .toArray(new String[phonenumberArray.size()]), addressArray
            .toArray(new String[addressArray.size()])));
    listview.setOnItemClickListener(new OnItemClickListener() {

        // xử lý sự kiện khi chọn item trên listview
        @Override
        public void onItemClick(AdapterView<?> parent, View view,
                int position, long id) {
            Intent j = new Intent(mContext, Menu_Main.class);

            // lấy thông tin thông qua vị trí của item được chọn
            String url = urlArray.get(position);
            String address = addressArray.get(position);
            String mahoadon = codeInvoiceArray.get(position);
            String phone = phonenumberArray.get(position);

            // chuyển thông tin này qua bên phần MENU
            j.putExtra("url", url);
            j.putExtra("address", address);
            j.putExtra("mahoadon", mahoadon);
            j.putExtra("phone", phone);
            j.putExtra("ID", iddelivery);
            mContext.startActivity(j);
        }
    });
}

} 
```

类主

```
public class Invoice extends Activity {
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.invoice);
    mDb.openDB();
        Cursor mCursor = mDb.getAllInvoice(IDDelivery);
        if (mCursor.moveToFirst()) {
            do {

                LoadListView load=new LoadListView(Invoice.this, mCursor.getString(1), mCursor.getString(2) ,mCursor.getString(3), mCursor.getString(4), mCursor.getString(5), IDDelivery);
                load.loaddatalistview();

            } while (mCursor.moveToNext());
            //loaddatalistview();
        }
        mDb.closeDB();
} 
```

错误通知

```
12-25 14:03:38.033: W/System.err(21335): java.lang.NullPointerException
12-25 14:03:38.041: W/System.err(21335):    at Support.LoadListView.<init>(LoadListView.java:23)
12-25 14:03:38.041: W/System.err(21335):    at com.longvan.saigonfleamarket.Invoice.workoffline(Invoice.java:226)
12-25 14:03:38.041: W/System.err(21335):    at com.longvan.saigonfleamarket.Invoice.onCreate(Invoice.java:65)
12-25 14:03:38.041: W/System.err(21335):    at android.app.Activity.performCreate(Activity.java:4465)
12-25 14:03:38.041: W/System.err(21335):    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1053)
12-25 14:03:38.041: W/System.err(21335):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1934)
12-25 14:03:38.041: W/System.err(21335):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1995)
12-25 14:03:38.041: W/System.err(21335):    at android.app.ActivityThread.access$600(ActivityThread.java:128)
12-25 14:03:38.041: W/System.err(21335):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1161)
12-25 14:03:38.041: W/System.err(21335):    at android.os.Handler.dispatchMessage(Handler.java:99)
12-25 14:03:38.041: W/System.err(21335):    at android.os.Looper.loop(Looper.java:137)
12-25 14:03:38.041: W/System.err(21335):    at android.app.ActivityThread.main(ActivityThread.java:4514)
12-25 14:03:38.041: W/System.err(21335):    at java.lang.reflect.Method.invokeNative(Native Method)
12-25 14:03:38.041: W/System.err(21335):    at java.lang.reflect.Method.invoke(Method.java:511)
12-25 14:03:38.041: W/System.err(21335):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:790)
12-25 14:03:38.041: W/System.err(21335):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:557)
12-25 14:03:38.041: W/System.err(21335):    at dalvik.system.NativeStart.main(Native Method)
12-25 14:03:38.041: I/System.out(21335): Workoffline!!! 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-25T07:24:12.247

此行看起来不正确，因为您试图在空对象上调用方法：

```
ListView listview=(ListView)((Activity)mContext).findViewById(R.id.listView1); 
```

这应该在构造函数中完成：

```
public class LoadListView {
  // ... (declare ListView with other class variables)
  ListView listview;

public LoadListView(Context mContext, String name,String phone,String address,String url,String code, String ID)
{
    // ... (setting other class variables)
    this.listview = (ListView)((Activity)mContext).findViewById(R.id.listView1);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-25T07:26:09.227

请按照 log-cat 的说法检查您的第 23 行，

我建议，您应该检查 mContext 是否不为空 `mContext != null`

所以只需在之前获取“ **mContext** ”的值

```
ListView listview=(ListView)((Activity)mContext).findViewById(R.id.listView1); 
```

# opencv - Mat 数据类型变量的最大值

> ID：14028569
> 
> 赞同：1
> 
> 时间：2012-12-25T07:22:03.040
> 
> 标签：opencv

我是opencv的新手，所以请帮我解决这个基本查询。我试图找到最大值。Mat 变量的值。我尝试使用 max_element 和 minMaxLoc，但最终遇到错误，因为函数一直说匹配的数据类型是错误的。我一遍又一遍地检查它，但没有成功。这是我的代码。ABS_DST 是 MAT 变量

```
 double *estimate,*min;
    CvPoint *minLoc,*maxLoc;

    Size s = abs_dst.size();
    int rows = s.height;
    int cols = s.width;
    double imagearray[rows][cols] = abs_dst.data();

    minMaxLoc(imagearray,min,estimate,minLoc,maxLoc); 
```

我什至尝试直接给 Mat 变量 abs_dst 。但一直没有成功。有一个可选的输入掩码数组，我忽略了它，因为我不需要它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-25T07:53:30.610

接下来做：

```
Point[] Mat_To_Point = Your_Mat_Variable.toArray(); 
```

接下来你可以对你的数组进行排序

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-25T08:55:32.127

我想我得到了答案。感谢您的努力。问题是 minMaxLoc 不采用 RGB 图像数组，因为它是 3 通道。我不得不将 ABS_DST 转换为灰度。

第二，

它不是

```
 CvPoint *minLoc,maxLoc; 
```

它是

```
 Point *minLoc,*maxLoc; 
```

我不需要将其转换为数组，因为转换为灰度将直接给我一个一维通道，对于 minMaxLoc 来说已经足够了。我为自己的错误道歉，并再次感谢您的努力。

# c# - 在c#中以编程方式查询网卡的入站/出站IPv4数据包计数统计

> ID：14028570
> 
> 赞同：-1
> 
> 时间：2012-12-25T07:22:11.377
> 
> 标签：c#, networking, ip, wmi-query, performancecounter

我想获取有关网卡发送和接收数据包计数（IP 级别：包括 TCP、UDP 等）的统计信息。

如何从 Windows 查询该信息？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-25T07:35:17.713

WMI。

从 C# 中不容易使用，但可能。

所需课程的文档位于

[http://msdn.microsoft.com/library/default.asp?url=/library/en-us/wmisdk/wmi/win32_perfformatteddata_tcpip_networkinterface.asp](http://msdn.microsoft.com/library/default.asp?url=/library/en-us/wmisdk/wmi/win32_perfformatteddata_tcpip_networkinterface.asp)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T06:49:16.267

首先你有

```
using System.Net.NetworkInformation; 
```

接下来你有：

```
var iFaceArr = NetworkInterface.GetAllNetworkInterfaces();
NetworkInterface iface = iFaceArr[0];
IPv4InterfaceStatistics iFaceStats = iface.GetIPv4Statistics(); 
```

然后你有这些变量：

```
iFaceStats.UnicastPacketsReceived;
iFaceStats.UnicastPacketsSent;
iFaceStats.NonUnicastPacketsReceived;
iFaceStats.NonUnicastPacketsSent; 
```

[参考](http://www.m0interactive.com/archives/2008/02/06/how_to_calculate_network_bandwidth_speed_in_c_/)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-12-25T07:32:55.743

你可以看看[Pcap.Net](http://pcapdotnet.codeplex.com/)。

> ```
> Getting the list of Live Devices on the local host.
> Reading packets from Live Devices (Network Devices) and Offline Devices (Files) using the different WinPcap methods.
> Receiving statistics on the entire capture.
> Receiving statistics of packets instead of the full packets.
> Using different sampling methods.
> Applying Berkley Packet Filters.
> Sending packets to Live Devices directly or using WinPcap's send queues.
> Dumping packets to Pcap files.
> Using Enumerables to receive packets (and LINQ). 
> ```

请注意，必须在您的系统上安装 winpcap 驱动程序。

# java - 泛型类型的 GSON（Java 集合）

> ID：14028571
> 
> 赞同：0
> 
> 时间：2012-12-25T07:22:13.530
> 
> 标签：java, gson

我正在尝试使用 Gson 保存一个类的对象，但不幸的是它不起作用。我的班级正在使用 ArrayList 实现 Collection 接口。当我尝试获取 json 字符串时，我得到了一个丑陋的错误。这是一些代码：

```
public class Prob1<T> implements Collection<T>{

    ArrayList<T> alb = new ArrayList<>();

    @Override
    public boolean add(T e) {
        // TODO Auto-generated method stub
        alb.add(e);
        return false;
    }

    @Override
    public boolean addAll(Collection<? extends T> c) {
        // TODO Auto-generated method stub
        return false;
    }

    @Override
    public void clear() {
        // TODO Auto-generated method stub

    }

    @Override
    public boolean contains(Object o) {
        // TODO Auto-generated method stub
        return alb.contains(o);
    }

    @Override
    public boolean containsAll(Collection<?> c) {
        // TODO Auto-generated method stub
        return false;
    }

    @Override
    public boolean isEmpty() {
        // TODO Auto-generated method stub
        return alb.isEmpty();
    }

    @Override
    public Iterator<T> iterator() {
        // TODO Auto-generated method stub
        return null;
    }

    @Override
    public boolean remove(Object o) {
        // TODO Auto-generated method stub
        alb.remove(o);
        return false;
    }

    @Override
    public boolean removeAll(Collection<?> c) {
        // TODO Auto-generated method stub
        return false;
    }

    @Override
    public boolean retainAll(Collection<?> c) {
        // TODO Auto-generated method stub
        return false;
    }

    @Override
    public int size() {
        // TODO Auto-generated method stub
        return alb.size();
    }

    @Override
    public Object[] toArray() {
        // TODO Auto-generated method stub
        return null;
    }

    @Override
    public <T> T[] toArray(T[] a) {
        // TODO Auto-generated method stub
        return null;
    }
    public String toString() {
        return alb.toString();
    }
} 
```

这是我尝试使用 GSon 获取 JSON 字符串：

```
Prob1 p = new Prob1<String>();
    p.add("Johny");
    p.add("Albus");
    p.add("Sirrius");
    System.out.println(p);

    Gson gson = new Gson();
    String json = gson.toJson(p); 
```

这是我得到的错误：

> com.google.gson.internal.bind.CollectionTypeAdapterFactory$Adapter.write(CollectionTypeAdapterFactory.java:95) 在 com.google.gson.internal.bind.CollectionTypeAdapterFactory$Adapter.write 的线程“主”java.lang.NullPointerException 中的异常(CollectionTypeAdapterFactory.java:60) 在 com.google.gson.Gson.toJson(Gson.java:586) 在 com.google.gson.Gson.toJson(Gson.java:565) 在 com.google.gson.Gson。 toJson(Gson.java:520) 在 com.google.gson.Gson.toJson(Gson.java:500) 在 Prob1.main(Prob1.java:104)

有什么想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-25T07:36:20.373

您创建了一个集合，该集合违反了[interface](http://docs.oracle.com/javase/7/docs/api/java/util/Collection.html)给出的合同。这是在您的班级用户中获得奇怪行为的秘诀。我检查了 Gson 源，特别是对于您的情况，它看起来像是进入 a `NullPointerException`，因为您在 iterator() 方法中返回 null 。

我不确定您为什么要创建自己的 Collection 类，以及是否真的需要这样做。如果你这样做，我建议你从 Google guava 扩展[ForwardingCollection](http://docs.guava-libraries.googlecode.com/git/javadoc/com/google/common/collect/ForwardingCollection.html)，并且只覆盖你真正需要覆盖的方法。

# html - 为什么 span 默认设计为比其父元素的宽度短，当 span 用于包含

> ID：14028573
> 
> 赞同：2
> 
> 时间：2012-12-25T07:22:20.237
> 
> 标签：html, css

```
<body>
  <div>
    <input type="text">
  </div>
  <span>
    <input type="text">
  </span>
</body> 
```

我的问题很简单。为什么 div 的宽度与其父级的宽度相同，而 span 的宽度比其父级的宽度短？即如果body的宽度是1000px，那么div也有1000px，但是span只有300px（因浏览器而异）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-25T07:26:23.677

`div`是块级元素，`span`而是内联元素。块级元素将占据父元素的宽度，而行内元素则不会。

例如，`a`是一个内联元素。您不会期望，也不会希望它占据整个父母：

```
Some text <a href="#">and an engaging link</a>. 
```

但是，`p`是块级元素。它将占据整个父级（并且它不会容忍其他块级元素在它旁边）*：*

```
<p>Some text</p>
<p>Other text -- not on the same line.</p> 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-25T07:27:08.280

`<div>`tag 是块级元素，而`<span>`tag 是内联元素。

*   块级元素会将其宽度扩大到父项的 100% 并产生断线。

*   内联元素只包裹 HTML 元素（内容），所以它的宽度根据内容是灵活的

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-25T07:25:40.083

`<span>`是内联元素，而`<div>`是块元素。内联元素不会扩展以填充其父元素。

# python - 正则表达式 - 如何用 python 字典中的条目替换字符串中的单词？

> ID：14028581
> 
> 赞同：2
> 
> 时间：2012-12-25T07:24:02.313
> 
> 标签：python, regex

我正在尝试通过将其中使用的缩写替换为其实际的短语等价来规范化字符串。我在名为“dict”的python字典中有一个这样的缩写列表。例如：

```
print dict['gf'] 
```

会导致：

```
girlfriend 
```

现在，我的问题是，由于这本字典中有大约 300 个键，我需要一种快速的方法来检查这些键中是否有任何一个出现在给定的字符串中。我最初的想法是使用下面的正则表达式，然后以某种方式尝试检查并比较字典的所有键与给定字符串中的所有单词（我在下面的代码中将其命名为“文本”），但我注意到我不能将变量放在字符串的中间。

```
import re
text = "I have a gf"
print re.sub (r'(?<![a-zA-Z])(gf)(?![a-zA-Z])', 'girlfriend', text) 
```

这将打印：

```
I have a girlfriend 
```

但正如您所注意到的，我不能将这种方法应用于上述情况。谁能帮我这个？提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-25T07:36:20.083

您可以使用`.get()`字典上的方法来查找缩写。返回的默认值`.get()`是`None`，但您可以提供一个参数以在查找失败时使用。所以在字典中`.get(s, s)`查找，如果它不在字典中则`s`返回不变，如果它在则返回字典值。`s`

然后只需拆分字符串并查找每个单词并重新加入。

```
abbrevs = { "gf" : "girlfriend", "cul" : "see you later" }

def lookup(s):
    return abbrevs.get(s, s)

def expand(s_text):
    return ' '.join(lookup(s) for s in s_text.split())

print(expand("My gf just called.  cul")) 
```

以上仅在空白处拆分单词，并将所有空白替换为单个空格。您可以编写一个匹配空格和/或标点符号的正则表达式，并使用它来制作更智能的拆分功能，并且您可以保存匹配的空格以使其不会用单个空格替换所有空格。但我想让这个例子保持简单。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-25T12:00:14.023

这是一种构造正则表达式以一次匹配所有单词的方法：

```
words = {
    'gf': 'girlfriend',
    'bf': 'boyfriend',
    'btw': 'by the way',
    'hi': 'hello',
}

pat = re.compile(r"\b(%s)\b" % "|".join(words))

text = "The gf and the bf say hi btw."

new_text = pat.sub(lambda m: words.get(m.group()), text)

print new_text 
```

印刷：

```
The girlfriend and the boyfriend say hello by the way. 
```

# email - 使用 AWS EC2 和 SES 时如何创建电子邮件帐户和设置电子邮件接收者？

> ID：14028590
> 
> 赞同：16
> 
> 时间：2012-12-25T07:25:11.253
> 
> 标签：email, amazon-web-services, amazon-ec2, gmail, amazon-ses

所以我们计划使用 AWS SES 发送电子邮件。但是我们如何设置电子邮件接收器呢？我们如何创建电子邮件帐户？激活 AWS SES 时，它会要求验证电子邮件帐户（例如 help@example.org）...

我试图在这篇文章之后使用后缀在其中一个实例上创建一个邮件服务器：http: [//flurdy.com/docs/postfix/](http://flurdy.com/docs/postfix/)，但这并不容易......有人知道更好的选择吗？

谢谢。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-12-25T17:56:08.980

SES 仅用于发送电子邮件。正如您所注意到的，您必须设置其他方式以至少在您打算使用的“发件人”地址接收电子邮件，因为亚马逊会在让您发送之前对其进行验证。

虽然您当然可以在 EC2 实例上设置电子邮件服务器和域，但这非常复杂。我建议您为此目的获得电子邮件服务。如果您的所有消息只需要一个地址，只需从 Google、Microsoft、Yahoo 等获取免费地址。

如果您需要多个地址，请考虑为现有域名或新域名获取 Google Apps for Business（如果您让其为您注册一个新域名，则最容易设置）。它不再免费，但仍然相当便宜。单个用户帐户可以接收域中每个地址的电子邮件，它灵活且可靠。它是使用 SES 发送自动电子邮件的好伴侣。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2016-04-13T23:14:24.503

`Amazon WorkMail`如果您更喜欢 AWS，请使用。`Gmail for work`, `Office 365`, `Hostgator`, 是其他一些例子。仅供参考，这些提供商都没有简单地提供域电子邮件。它们与许多其他东西捆绑在一起，例如聊天客户端、日历等。这些服务的定价取决于它们捆绑的其他东西。

*   AWS 4 美元/用户/月
*   谷歌 5 美元/用户/月
*   微软 5 美元/用户/月

既然你在 AWS 云中，我会告诉你一些关于`Amazon WorkMail`.

1.  您可以获得自己的域和每位用户 50GB 的存储空间。
2.  您可以免费获得日历。
3.  您不能只使用任何桌面邮件客户端。您必须使用 Outlook、Mac 的邮件客户端或 Web 界面。这是他们的弱点。但是，**包括其他 IMAP 客户端在他们的路线图中**（我猜至少一年）。
4.  与 SES 很好地集成。
5.  重要链接：
    *   [常见问题页面](https://aws.amazon.com/workmail/faqs/)。
    *   [特色页面](https://aws.amazon.com/workmail/details/)。
6.  还有更多功能，例如从设备远程删除电子邮件、管理用户等。

我可以向您推荐的是使用 Amazon WorkMail，因为它们几乎提供了其他人支持的所有功能，而且无论如何您都与 AWS 捆绑在一起。AWS 最近还推出了`Workspace`（`Workdocs`均单独计费），这将允许您创建一个完整的工作解决方案。这些服务还与 IAM 很好地结合在一起。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-07-16T12:55:54.017

> 但是我们如何设置电子邮件接收器呢？我们如何创建电子邮件帐户？

使用 AWS Lambda 设置电子邮件地址并将来自该地址的电子邮件转发到其他地方不需要电子邮件服务器或 EC2 实例。以下是有关如何使用 SES 和 Lambda 接收和转发电子邮件的分步教程：

# [使用 SES 和 Lambda 进行无服务器电子邮件转发](https://habd.as/serverless-email-forwards-ses-lambda-crash-course/)

本教程还描述了设置您想要的任何电子邮件地址并配置您自己的自定义转发规则所需的步骤。

# iphone - AFNetworking 为什么要解析服务器的 json？

> ID：14028600
> 
> 赞同：-1
> 
> 时间：2012-12-25T07:26:22.517
> 
> 标签：iphone, ios, json, asihttprequest, afnetworking

我使用`AFNetworking`请求服务器，但我得到这样的输出：

```
2012-12-25 15:16:47.578 SmsForNewYear[3825:c07] <3c21444f 43545950 45206874 6d6c2050 55424c49 4320222d 2f2f5733 432f2f44 54442058 48544d4c 20312e30 20547261 6e736974 696f6e61 6c2f2f45 4e222022 68747470 3a2f2f77 77772e77 332e6f72 
```

如果我添加，它不是 json`[self setDefaultHeader:@"Accept" value:@"application/json"];`

它返回：

```
SmsForNewYear[3920:c07] getNewSms:Expected content type {(
"text/json",
"application/json",
"text/javascript"
)}, got text/html 
```

但是我用浏览器，看起来是这样的

```
{"rs_code":"200","data":{"sms_cate_list":[{"id":"26","name":"\u559c\u5e86","likes":"0","sms_num":"1","order_id":"1","is_index":"0","update_time":"1355932115"} 
```

它是 json。

另一方面，我使用`asihttprequest`可以返回 json。

为什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-25T07:44:06.923

您的第一个`NSLog`是典型的`NSData`日志结果，很难阅读。如果您想查看它以进行调试，您可以

```
NSLog(@"%@", [[NSString alloc] initWithData:jsonData encoding:NSUTF8StringEncoding]); 
```

显然替换`jsonData`为持有该`NSData`对象的任何变量。您可以在宣布失败之前对其进行检查。

当我对您记录的字符串进行解码时`NSData`，它似乎是 HTML 文件的开头，所以我敢打赌您的网络服务器正在报告错误。您必须查看`NSString`该 HTML 的版本以找出问题所在（您没有包含足够的内容供我们诊断，因为该版本`NSLog`过早`NSData`地切断了结果）。

在诊断问题方面，您必须向我们展示上述生成的消息`NSLog`。您可能还需要向我们展示`AFNetworking`您提出 Web 服务请求的代码。

* * *

通常，当您从 Web 服务器下载数据时，当您`NSLog`获得`NSData`结果时，您会看到类似这样的神秘信息。然后，您可以非常高兴地传递给`NSJSONSerialization`：

```
NSError *error = nil;
NSDictionary *jsonResult = [NSJSONSerialization JSONObjectWithData:jsonData
                                                           options:0
                                                             error:&error];
if (error != nil)
    NSLog(@"Error in JSON: %@", [[NSString alloc] initWithData:jsonData encoding:NSUTF8StringEncoding]); 
```

# dyld - PIE 已禁用。代码签名的 PIE 中不允许使用绝对寻址

> ID：14028601
> 
> 赞同：6
> 
> 时间：2012-12-25T07:26:24.193
> 
> 标签：dyld, addressing, pie-chart

我正在使用具有 iOS 5.1 部署目标的 Xcode 4.5

当我针对两个显着增加的特定方法编译我的应用程序时，我收到以下警告。

> ld：警告：PIE 已禁用。代码签名的 PIE 中不允许使用绝对寻址（可能是 -mdynamic-no-pic），但在 -[mfile 方法] 中使用。要修复此警告，请勿使用 -mdynamic-no-pic 编译或使用 -Wl,-no_pie 链接

随后，该应用程序在启动时引发异常，并出现以下错误：

> dyld: vm_protect(0x00001000, 0x0078C000, false, 0x07) 失败，结果 = 2 用于 /var/mobile/Applications/8E764612-87ED-4A99-9C59-E56C934DA997/appname.app/appname 中的段 __TEXT
> 
> dyld dyld_fatal_error：
> 
> 0x2feb20c4：陷阱
> 
> 0x2feb20c8: 无

当我注释掉有问题的方法时，应用程序运行良好。

有什么建议么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-07-16T11:32:00.917

以下是 Unity 论坛的回复：

> 在 xcode 4.6 构建设置中，将“不要创建与位置无关的可执行文件”从“否”更改为“是”，就是这样。

学分去**阿米特柴**

# windows - Visual Basic - 如何共享我的程序？

> ID：14028609
> 
> 赞同：0
> 
> 时间：2012-12-25T07:27:46.313
> 
> 标签：windows

我目前正在用 Visual Basic 开发一个程序。现在，我想把程序交给几个朋友来测试、修改然后发布。但我不知道怎么做。我在 Visual Basic 中使用了发布功能，但我不完全知道我应该用它做什么。它提到了诸如从磁盘安装之类的东西。我只是打算将它上传到文件共享网站并以这种方式发布。

编辑：使用 Visual Studio 2012

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-25T07:30:17.793

使用保管箱或任何文件共享网站：D

# ruby-on-rails - 为不同类型的内容构建 Rails 应用程序

> ID：14028616
> 
> 赞同：0
> 
> 时间：2012-12-25T07:29:44.533
> 
> 标签：ruby-on-rails, ruby

我正在为我的个人网站构建一个平台，以便我可以将不同类型的内容发布到我自己的提要中：

*   帖子
*   视频
*   期刊
*   项目
*   客户
*   人生大事
*   摄影
*   音乐

**我应该如何构建这个应用程序？**我应该使用 Rails generate 命令吗？如果是，我应该为每种类型的内容创建一个模型/控制器吗？我应该如何构建我的应用程序的 MVC 部分？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-25T07:48:36.627

我认为一个好的开始是为每种类型的内容[使用脚手架创建资源。](http://guides.rubyonrails.org/getting_started.html#creating-a-resource)这样，您的应用程序就可以快速运行，并且可以开始创建一些数据。

接下来，您可以删除您不想使用的脚手架生成的代码，并开始创建站点的核心部分（添加新控制器或向现有控制器添加操作）。

# android - 保持移动数据始终正常运行

> ID：14028622
> 
> 赞同：0
> 
> 时间：2012-12-25T07:30:52.377
> 
> 标签：android

如果您使用 HTC 手机，他们可以选择将移动数据网络设置为“始终启用移动数据”。据我了解，它有助于维持 TCP 连接。我想实现相同的功能，如何实现？我认为，需要使用唤醒锁吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-25T07:39:12.787

WakeLocks 是 Power Manager 系统服务功能，可用于您的应用程序来控制主机设备的电源状态。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-25T08:16:14.867

您无法更改连接（移动或 wifi）。但是您可以立即收听连接并让您的应用程序仅在移动数据上运行。

# c - 使用 C 计算程序中的标签

> ID：14028626
> 
> 赞同：0
> 
> 时间：2012-12-25T07:30:59.090
> 
> 标签：c, labels

我尝试使用 C 本身来计算 C 程序中存在的标签数量。它运作良好。我扩展了它，我有一个数组`ca[]`，其中包含行号作为元素。读取相应行时，不应在该行中搜索标签。这背后的概念是，我将从另一个程序接收一个数组，其中包含注释行的行号。因此，我将数组作为输入，并跳过单独处理这些行。

我试过的是，

```
int nl=0,flag=0,i=1,j=0;
int ca[100]={3,5};
char c;

fp=fopen("chumma.c","r");

while((c=getc(fp))!=EOF)
{
if(c=='\n')
    i=i+1;
if((ca[j])!=i)
{

    if(c==':')
        flag=1;

    else if((flag==1) && (c=='\n'))
    {      
      flag=0;nl++;
    }

}
else
   j++;
} 
```

`nl`是标签的数量。这不会检查线路本身。请指导我哪里出错了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-25T08:16:38.950

这听起来像是家庭作业/学习练习，所以我将解释计划/设计这样的程序的过程。然后我会给你一个实现它的方法的示例。

编写此类程序的一种方法是构建一对状态机：

1.  初始状态/空白状态
2.  从状态1：已经看到`/*`序列；保持这种状态直到`*/`；返回 1
3.  从状态1：见过`"`性格；保持这种状态直到`\`或`"`；返回 1
4.  从状态1：已经看到`//`序列；保持这种状态直到换行；返回 1
5.  从状态1：看到一封信；保持这种状态捕获直到非字母和非数字
6.  从状态 1：看到其他任何东西，保持这种状态直到换行。
7.  从状态 3：已经看到`\`提取下一个字符，然后返回状态 3

一旦离开状态 5：

*   如果这个词是`switch`我们将进入我们的另一个状态机（如下）。
*   如果我们没有看到`:`，则返回状态 1
*   否则我们的话就是一个标签；用它做任何你想做的事情并返回到状态 1。

但是，当我们看到`switch`时，由于紧随其后的表达式，我们需要另一个状态表：

1.  初始状态/空白
2.  从状态 1：`(`在开始之后`switch`
3.  从状态 1：所有其他字符生成***错误***。
4.  从状态 2：`/*`并被`"`视为状态机 1（上图）
5.  从状态 2：`)`看到
6.  从状态 5：`{`- 增加嵌套级别并立即进入状态 7。
7.  空白/状态
8.  从状态 7 开始：`}`- 在进入该状态时降低嵌套级别；如果嵌套级别为零，则在第一个状态机中返回状态 1，否则保持状态 7。
9.  从状态 7：看到一封信；保持这种状态捕获直到非字母或`:`
10.  从状态 7：看到其他任何东西，保持在这个状态直到`;`或`}`分别移动到状态 7 和 8。

一旦离开状态 9：

*   如果我们没有看到`:`然后转到状态 10
*   否则如果单词 as`default`则进入状态 10
*   否则这是一个标签；用它做任何你想做的事情，然后进入状态 10

下一步是为每个状态编写一个函数。给状态编号并给函数编号可能会有所帮助。他们对“字符”或“字符序列”的操作方式通常是我早期写的一些低级的东西：

```
int c;
int next() { c=getchar(); return c; }
typedef int (*state)(); 
```

例如，上面的状态 2 和 3 可以写成：

```
state state2() { if(c == '*' && next() == '/') return state1; return state2; }
state state3() { if(c == '"') return state1; if (c == '\\') return state7; } 
```

算出其余的州应该很容易。状态 5 将有一个缓冲区，您正在填充该缓冲区以“读取”单词：

```
char word[600];
int ptr;
state state5() { 
  ptr = 0;
  while(isdigit(c) || isalpha(c)) {
    word[ptr] = c;
    ptr++;
    if(ptr==600)abort();
    next();
  }
  /* now leaving state 5 */
} 
```

完成此操作后，您可以编写驱动程序：

```
void statemachine1() {
  state x = state1;
  while(c != -1) x = x();
} 
```

如果您犯了错误，拥有一些调试工具会很有帮助。一个好的方法是在数组中标记每个状态：

```
state statelist1[] = { state1, state2, state3, state4, state5, state6, state7 };
int statenumber(state x) {
  int i, n = sizeof(statelist1) / sizeof(state);
  while(n-->0) if(x == statelist1[n]) return n;
  abort();
} 
```

这在调试时会很有帮助；我可能会插入：

```
printf("state = %d, char = %02x (%c)\n", statenumber(x), c,c); 
```

进入驱动程序循环，如下所示：

```
printf("char = %02x (%c)\n", c,c); 
```

在我追踪机器的各个部分。这将在我的脑海中更牢固地建立状态机地图，并且当我沿着我的测试程序跟踪它时，它将更容易验证所有状态。

如果事情开始变得困难，我将修改`next()`以跟踪当前行：

```
int line = 1;
int next() { c=getchar(); if(c == '\n') line++; return c; } 
```

这样我也可以在我的`printf()`陈述中使用它。

一旦我对一切正常工作感到满意，我将删除调试代码。

祝你好运！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-25T08:22:57.513

试试这个，，

```
int nl=0,flag=0,i=1,j=0;
int ca[100]={3,5};
char c;

fp=fopen("Kiss.c","r");

while ((c=getc(fp))!=EOF) {

if (c == '\n') {
    if (ca[j] == i) j ++;

    if (flag == 1) {      
        flag = 0; nl ++;
    }

    i = i ++;
    continue;
}

if (ca[j] == i)
    continue;

if (c==':')
    flag=1; 
```

# ruby-on-rails - 嵌套时如何实现太阳黑子搜索

> ID：14028627
> 
> 赞同：4
> 
> 时间：2012-12-25T07:30:59.423
> 
> 标签：ruby-on-rails, ruby-on-rails-3, sunspot

如何扩展搜索？
当用户按下搜索按钮时，我想在 users_controllers#index 搜索用户。

现在我有3个模型。

> 用户 > User_profile > 县

User_profile 具有这些列，例如 user_id 和 prefecture_id。

在Prefecture模型中，它有它的id和名称（Exp: California, New York）

现在我已经像这样设置了models/user.rb。如果我想添加县搜索，我应该添加什么？用户应该能够输入**California**，并且它会点击搜索。

```
searchable do 
    text :user_profile_nickname do
        user_profile.nickname
    end

    text :user_profile_introduction do
        user_profile.introduction
    end

    text :tag_list do 
        tag_list
    end 

end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T00:10:43.430

每个用户都将作为文档存储在 Solr 中，您需要将预制信息提供给用户文档才能使其可搜索。

尝试：

```
searchable do 
  text :user_profile_nickname do
    user_profile.nickname
  end

  text :user_profile_introduction do
    user_profile.introduction
  end

  text :tag_list do 
    tag_list
  end

  string :prefacture do
     user_profile.prefacture.name
  end

end 
```

我会使用字符串而不是文本，因为您不需要在 prefacture 上应用诸如词干之类的文本处理。而对于 Sunspot，我认为不可能在文本字段上构建构面。

# javascript - 有没有办法在 iframe 中读取发布请求的表单数据？

> ID：14028628
> 
> 赞同：0
> 
> 时间：2012-12-25T07:31:00.700
> 
> 标签：javascript, ruby-on-rails, forms, iframe, web-scraping

我正在尝试创建一个简单的 Rails 应用程序，它将自动执行需要登录的网站上的一些操作。

理想情况下，我宁愿不必重做网站的登录和注册新帐户功能，只需将其放在我的网络应用程序的 iframe 中即可。是否可以从成功登录中读取表单数据（即：用户名和密码）？

或者我是否以错误的方式解决这个问题，并且有一种更实际的方式来做到这一点？

# html - Internet Explorer 兼容性问题

> ID：14028630
> 
> 赞同：0
> 
> 时间：2012-12-25T07:31:08.523
> 
> 标签：html, css, internet-explorer, cross-browser, compatibility

我最近开了一个[网站](http://xn--9dbbt.net/)。这是一个 Shoppica 主题，在`open cart CMS`. 它在所有浏览器上都可以正常工作，除了`Internet Explorer`（尽管它显然也可以在一个版本的 Internet Explorer 上工作。）我在 css 更改的东西上搞砸了几个小时。我什至尝试添加 Reset css 但无济于事。关于我应该做什么的任何想法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-25T07:39:00.200

在标题中使用它

```
<meta http-equiv="X-UA-Compatible" content="IE=edge" /> 
```

# asp.net - 单击 asp.net 中中继器中的“图像按钮”

> ID：14028635
> 
> 赞同：1
> 
> 时间：2012-12-25T07:31:55.103
> 
> 标签：asp.net, repeater, itemtemplate

我有一个中继器，每行都有一个图像按钮。

通过单击每个图像按钮，我应该获得相应行的 ID，但我不知道如何在中继器中管理此图像按钮的单击事件。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-25T07:37:50.423

尝试这个：

*ASPX*

```
<asp:LinkButton OnCommand="lbRemove_Command" CommandArgument='<%# Eval("Key")%>' CommandName="Remove" runat="server"> 
```

*代码背后*

```
protected void lbRemove_Command(object sender, CommandEventArgs e)
{
    switch (e.CommandName)
    {
        case "Remove":
            string ca = e.CommandArgument.ToString();
            break;
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-25T07:34:18.423

您需要使用中继器的[**ItemCommand**](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.repeater.itemcommand.aspx)事件。您还可以在绑定数据源时查看[**ItemDataBound**](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.repeater.itemdatabound.aspx)以获取自定义操作。

# java - 绘制多个移动图形

> ID：14028638
> 
> 赞同：2
> 
> 时间：2012-12-25T07:32:59.003
> 
> 标签：java, swing, graphics, java-2d

我已经让这个程序能够使用这两个类绘制一个在屏幕上弹跳的小球的实例

```
import java.awt.Graphics;
import java.awt.Graphics2D;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.awt.geom.Ellipse2D;

import javax.swing.JPanel;
import javax.swing.Timer;

public class move extends JPanel implements ActionListener
{
    Timer t = new Timer(7, this);
    int x = 10, y = 10, velX = 7, velY = 7;

    public void paintComponent(Graphics g, Graphics h)
    {
        super.paintComponent(h);
        super.paintComponent(g);
        System.out.println(g);
        Graphics2D g2 = (Graphics2D) g;
        Ellipse2D circle = new Ellipse2D.Double(x, y, 40, 40);
        g2.fill(circle);
        t.start();
    }

    public void actionPerformed(ActionEvent e) {
        if(x<0 || x > getWidth())
        {
            velX = -velX;
        }
        if(y < 0 || y > getHeight())
        {
            velY = -velY;
        }
        x += velX;
        y += velY;
        repaint();
    }   
} 
```

这个类只是简单地画球并为计时器等提供逻辑

```
import java.awt.Color;
import javax.swing.JFrame;

public class Gui {

    public static void main(String[] args)
    {
        move s = new move();
        JFrame f = new JFrame("move");
        f.add(s);
        f.setVisible(true);
        f.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        f.setSize(1000, 1000);
        f.setTitle("Moving Circle");
        f.setBackground(Color.GREEN);
    }
} 
```

下一个类只是将它全部放在一个 JFrame 中，这是我知道的非常简单的东西，但我只是想在同一个 JFrame 中绘制多个实例。我只是想尝试一下我的代码知识，一些要实现的代码示例会很棒。

如何绘制多个动态图形？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-25T08:31:24.150

这段代码可能有一个类`Ball`类，它知道它的位置和大小以及如何将自己绘制到`Graphics`.

随着每个球的创建，它们被添加到列表中。在绘制时，迭代列表并绘制每个`Ball`.

# c# - 在 C# 中更改选定的 ListviewItem 样式

> ID：14028639
> 
> 赞同：0
> 
> 时间：2012-12-25T07:33:06.830
> 
> 标签：c#, windows-phone-7, windows-store-apps

我正在在Windows Store应用程序中工作，我正在使用ListView控件在列表中显示项目，只要选择了项目，就会突出显示紫色颜色，并且在它之前出现勾号。我希望只突出显示项目，不应该出现刻度条。我怎样才能做到这一点。谁能帮我。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-25T09:43:47.287

在 Visual Studio 中，请右键单击列表视图

1.  转到编辑其他模板
2.  编辑生成的项目容器
3.  点击编辑和复制
4.  点击确定按钮
5.  然后转到 XAML 代码并找到适当的 VisualState（我认为是`Selected`）

**更新**`<common:LayoutAwarePage`在页面（或） 的第一个标签下添加以下代码`Page`并编辑`<VisualState x:Name="Selected">`

```
<Page.Resources>
    <Style x:Key="ListViewItemStyle1" TargetType="ListViewItem">
        <Setter Property="FontFamily" Value="{StaticResource ContentControlThemeFontFamily}"/>
        <Setter Property="FontSize" Value="{StaticResource ControlContentThemeFontSize}"/>
        <Setter Property="Background" Value="Transparent"/>
        <Setter Property="TabNavigation" Value="Local"/>
        <Setter Property="IsHoldingEnabled" Value="True"/>
        <Setter Property="Margin" Value="0,0,18,2"/>
        <Setter Property="HorizontalContentAlignment" Value="Left"/>
        <Setter Property="VerticalContentAlignment" Value="Top"/>
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="ListViewItem">
                    <Border x:Name="OuterContainer">
                        <VisualStateManager.VisualStateGroups>
                            <VisualStateGroup x:Name="CommonStates">
                                <VisualState x:Name="Normal"/>
                                <VisualState x:Name="PointerOver">
                                    <Storyboard>
                                        <DoubleAnimation Duration="0" To="1" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="PointerOverBorder"/>
                                        <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="Fill" Storyboard.TargetName="SelectionBackground">
                                            <DiscreteObjectKeyFrame KeyTime="0" Value="{StaticResource ListViewItemSelectedPointerOverBackgroundThemeBrush}"/>
                                        </ObjectAnimationUsingKeyFrames>
                                        <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="Stroke" Storyboard.TargetName="SelectedBorder">
                                            <DiscreteObjectKeyFrame KeyTime="0" Value="{StaticResource ListViewItemSelectedPointerOverBorderThemeBrush}"/>
                                        </ObjectAnimationUsingKeyFrames>
                                        <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="Fill" Storyboard.TargetName="SelectedEarmark">
                                            <DiscreteObjectKeyFrame KeyTime="0" Value="{StaticResource ListViewItemSelectedPointerOverBackgroundThemeBrush}"/>
                                        </ObjectAnimationUsingKeyFrames>
                                    </Storyboard>
                                </VisualState>
                                <VisualState x:Name="Pressed">
                                    <Storyboard>
                                        <PointerDownThemeAnimation TargetName="ContentContainer"/>
                                    </Storyboard>
                                </VisualState>
                                <VisualState x:Name="PointerOverPressed">
                                    <Storyboard>
                                        <PointerDownThemeAnimation TargetName="ContentContainer"/>
                                        <DoubleAnimation Duration="0" To="1" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="PointerOverBorder"/>
                                        <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="Fill" Storyboard.TargetName="SelectionBackground">
                                            <DiscreteObjectKeyFrame KeyTime="0" Value="{StaticResource ListViewItemSelectedPointerOverBackgroundThemeBrush}"/>
                                        </ObjectAnimationUsingKeyFrames>
                                        <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="Stroke" Storyboard.TargetName="SelectedBorder">
                                            <DiscreteObjectKeyFrame KeyTime="0" Value="{StaticResource ListViewItemSelectedPointerOverBorderThemeBrush}"/>
                                        </ObjectAnimationUsingKeyFrames>
                                        <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="Fill" Storyboard.TargetName="SelectedEarmark">
                                            <DiscreteObjectKeyFrame KeyTime="0" Value="{StaticResource ListViewItemSelectedPointerOverBackgroundThemeBrush}"/>
                                        </ObjectAnimationUsingKeyFrames>
                                    </Storyboard>
                                </VisualState>
                                <VisualState x:Name="Disabled">
                                    <Storyboard>
                                        <DoubleAnimation Duration="0" To="{StaticResource ListViewItemDisabledThemeOpacity}" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="contentPresenter"/>
                                    </Storyboard>
                                </VisualState>
                            </VisualStateGroup>
                            <VisualStateGroup x:Name="FocusStates">
                                <VisualState x:Name="Focused">
                                    <Storyboard>
                                        <DoubleAnimation Duration="0" To="1" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="FocusVisual"/>
                                    </Storyboard>
                                </VisualState>
                                <VisualState x:Name="Unfocused"/>
                                <VisualState x:Name="PointerFocused"/>
                            </VisualStateGroup>
                            <VisualStateGroup x:Name="SelectionHintStates">
                                <VisualStateGroup.Transitions>
                                    <VisualTransition GeneratedDuration="0:0:0.65" To="NoSelectionHint"/>
                                </VisualStateGroup.Transitions>
                                <VisualState x:Name="VerticalSelectionHint">
                                    <Storyboard>
                                        <SwipeHintThemeAnimation ToHorizontalOffset="0" TargetName="SelectionBackground" ToVerticalOffset="15"/>
                                        <SwipeHintThemeAnimation ToHorizontalOffset="0" TargetName="ContentBorder" ToVerticalOffset="15"/>
                                        <SwipeHintThemeAnimation ToHorizontalOffset="0" TargetName="SelectedBorder" ToVerticalOffset="15"/>
                                        <SwipeHintThemeAnimation ToHorizontalOffset="0" TargetName="SelectedCheckMark" ToVerticalOffset="15"/>
                                        <DoubleAnimationUsingKeyFrames Duration="0:0:0.500" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="HintGlyph">
                                            <DiscreteDoubleKeyFrame KeyTime="0:0:0" Value="0.5"/>
                                            <DiscreteDoubleKeyFrame KeyTime="0:0:0.500" Value="0"/>
                                        </DoubleAnimationUsingKeyFrames>
                                    </Storyboard>
                                </VisualState>
                                <VisualState x:Name="HorizontalSelectionHint">
                                    <Storyboard>
                                        <SwipeHintThemeAnimation ToHorizontalOffset="-23" TargetName="SelectionBackground" ToVerticalOffset="0"/>
                                        <SwipeHintThemeAnimation ToHorizontalOffset="-23" TargetName="ContentBorder" ToVerticalOffset="0"/>
                                        <SwipeHintThemeAnimation ToHorizontalOffset="-23" TargetName="SelectedBorder" ToVerticalOffset="0"/>
                                        <SwipeHintThemeAnimation ToHorizontalOffset="-23" TargetName="SelectedCheckMark" ToVerticalOffset="0"/>
                                        <DoubleAnimationUsingKeyFrames Duration="0:0:0.500" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="HintGlyph">
                                            <DiscreteDoubleKeyFrame KeyTime="0:0:0" Value="0.5"/>
                                            <DiscreteDoubleKeyFrame KeyTime="0:0:0.500" Value="0"/>
                                        </DoubleAnimationUsingKeyFrames>
                                    </Storyboard>
                                </VisualState>
                                <VisualState x:Name="NoSelectionHint"/>
                            </VisualStateGroup>
                            <VisualStateGroup x:Name="SelectionStates">
                                <VisualState x:Name="Unselecting">
                                    <Storyboard>
                                        <DoubleAnimation Duration="0" To="1" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="HintGlyphBorder"/>
                                    </Storyboard>
                                </VisualState>
                                <VisualState x:Name="Unselected">
                                    <Storyboard>
                                        <DoubleAnimation Duration="0" To="1" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="HintGlyphBorder"/>
                                    </Storyboard>
                                </VisualState>
                                <VisualState x:Name="UnselectedPointerOver">
                                    <Storyboard>
                                        <DoubleAnimation Duration="0" To="1" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="HintGlyphBorder"/>
                                        <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="Foreground" Storyboard.TargetName="contentPresenter">
                                            <DiscreteObjectKeyFrame KeyTime="0" Value="{StaticResource ListViewItemSelectedForegroundThemeBrush}"/>
                                        </ObjectAnimationUsingKeyFrames>
                                    </Storyboard>
                                </VisualState>
                                <VisualState x:Name="UnselectedSwiping">
                                    <Storyboard>
                                        <DoubleAnimation Duration="0" To="0.5" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="SelectingGlyph"/>
                                        <DoubleAnimation Duration="0" To="1" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="HintGlyphBorder"/>
                                    </Storyboard>
                                </VisualState>
                                <VisualState x:Name="Selecting">
                                    <Storyboard>
                                        <DoubleAnimation Duration="0" To="1" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="SelectionBackground"/>
                                        <DoubleAnimation Duration="0" To="1" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="SelectedBorder"/>
                                        <DoubleAnimation Duration="0" To="1" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="SelectingGlyph"/>
                                        <DoubleAnimation Duration="0" To="1" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="HintGlyphBorder"/>
                                        <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="Foreground" Storyboard.TargetName="contentPresenter">
                                            <DiscreteObjectKeyFrame KeyTime="0" Value="{StaticResource ListViewItemSelectedForegroundThemeBrush}"/>
                                        </ObjectAnimationUsingKeyFrames>
                                    </Storyboard>
                                </VisualState>
                                <VisualState x:Name="Selected">
                                    <Storyboard>
                                        <DoubleAnimation Duration="0" To="1" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="SelectionBackground"/>
                                        <DoubleAnimation Duration="0" To="1" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="SelectedBorder"/>
                                        <DoubleAnimation Duration="0" To="1" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="SelectedCheckMark"/>
                                        <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="Foreground" Storyboard.TargetName="contentPresenter">
                                            <DiscreteObjectKeyFrame KeyTime="0" Value="{StaticResource ListViewItemSelectedForegroundThemeBrush}"/>
                                        </ObjectAnimationUsingKeyFrames>
                                    </Storyboard>
                                </VisualState>
                                <VisualState x:Name="SelectedSwiping">
                                    <Storyboard>
                                        <DoubleAnimation Duration="0" To="1" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="SelectionBackground"/>
                                        <DoubleAnimation Duration="0" To="1" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="SelectedBorder"/>
                                        <DoubleAnimation Duration="0" To="1" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="SelectedCheckMark"/>
                                        <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="Foreground" Storyboard.TargetName="contentPresenter">
                                            <DiscreteObjectKeyFrame KeyTime="0" Value="{StaticResource ListViewItemSelectedForegroundThemeBrush}"/>
                                        </ObjectAnimationUsingKeyFrames>
                                    </Storyboard>
                                </VisualState>
                                <VisualState x:Name="SelectedUnfocused">
                                    <Storyboard>
                                        <DoubleAnimation Duration="0" To="1" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="SelectionBackground"/>
                                        <DoubleAnimation Duration="0" To="1" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="SelectedBorder"/>
                                        <DoubleAnimation Duration="0" To="1" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="SelectedCheckMark"/>
                                        <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="Foreground" Storyboard.TargetName="contentPresenter">
                                            <DiscreteObjectKeyFrame KeyTime="0" Value="{StaticResource ListViewItemSelectedForegroundThemeBrush}"/>
                                        </ObjectAnimationUsingKeyFrames>
                                    </Storyboard>
                                </VisualState>
                            </VisualStateGroup>
                            <VisualStateGroup x:Name="DragStates">
                                <VisualStateGroup.Transitions>
                                    <VisualTransition GeneratedDuration="0:0:0.2" To="NotDragging"/>
                                </VisualStateGroup.Transitions>
                                <VisualState x:Name="NotDragging"/>
                                <VisualState x:Name="Dragging">
                                    <Storyboard>
                                        <DoubleAnimation Duration="0" To="{StaticResource ListViewItemDragThemeOpacity}" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="InnerDragContent"/>
                                        <DragItemThemeAnimation TargetName="InnerDragContent"/>
                                        <FadeOutThemeAnimation TargetName="SelectedCheckMarkOuter"/>
                                        <FadeOutThemeAnimation TargetName="SelectedBorder"/>
                                    </Storyboard>
                                </VisualState>
                                <VisualState x:Name="DraggingTarget">
                                    <Storyboard>
                                        <DropTargetItemThemeAnimation TargetName="OuterContainer"/>
                                    </Storyboard>
                                </VisualState>
                                <VisualState x:Name="MultipleDraggingPrimary">
                                    <Storyboard>
                                        <DoubleAnimation Duration="0" To="1" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="MultiArrangeOverlayBackground"/>
                                        <DoubleAnimation Duration="0" To="1" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="MultiArrangeOverlayText"/>
                                        <DoubleAnimation Duration="0" To="{StaticResource ListViewItemDragThemeOpacity}" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="ContentBorder"/>
                                        <FadeInThemeAnimation TargetName="MultiArrangeOverlayBackground"/>
                                        <FadeInThemeAnimation TargetName="MultiArrangeOverlayText"/>
                                        <DragItemThemeAnimation TargetName="ContentBorder"/>
                                        <FadeOutThemeAnimation TargetName="SelectionBackground"/>
                                        <FadeOutThemeAnimation TargetName="SelectedCheckMarkOuter"/>
                                        <FadeOutThemeAnimation TargetName="SelectedBorder"/>
                                        <FadeOutThemeAnimation TargetName="PointerOverBorder"/>
                                    </Storyboard>
                                </VisualState>
                                <VisualState x:Name="MultipleDraggingSecondary">
                                    <Storyboard>
                                        <FadeOutThemeAnimation TargetName="ContentContainer"/>
                                    </Storyboard>
                                </VisualState>
                            </VisualStateGroup>
                            <VisualStateGroup x:Name="ReorderHintStates">
                                <VisualStateGroup.Transitions>
                                    <VisualTransition GeneratedDuration="0:0:0.2" To="NoReorderHint"/>
                                </VisualStateGroup.Transitions>
                                <VisualState x:Name="NoReorderHint"/>
                                <VisualState x:Name="BottomReorderHint">
                                    <Storyboard>
                                        <DragOverThemeAnimation Direction="Bottom" ToOffset="{StaticResource ListViewItemReorderHintThemeOffset}" TargetName="ReorderHintContent"/>
                                    </Storyboard>
                                </VisualState>
                                <VisualState x:Name="TopReorderHint">
                                    <Storyboard>
                                        <DragOverThemeAnimation Direction="Top" ToOffset="{StaticResource ListViewItemReorderHintThemeOffset}" TargetName="ReorderHintContent"/>
                                    </Storyboard>
                                </VisualState>
                                <VisualState x:Name="RightReorderHint">
                                    <Storyboard>
                                        <DragOverThemeAnimation Direction="Right" ToOffset="{StaticResource ListViewItemReorderHintThemeOffset}" TargetName="ReorderHintContent"/>
                                    </Storyboard>
                                </VisualState>
                                <VisualState x:Name="LeftReorderHint">
                                    <Storyboard>
                                        <DragOverThemeAnimation Direction="Left" ToOffset="{StaticResource ListViewItemReorderHintThemeOffset}" TargetName="ReorderHintContent"/>
                                    </Storyboard>
                                </VisualState>
                            </VisualStateGroup>
                            <VisualStateGroup x:Name="DataVirtualizationStates">
                                <VisualState x:Name="DataAvailable"/>
                                <VisualState x:Name="DataPlaceholder">
                                    <Storyboard>
                                        <ObjectAnimationUsingKeyFrames Duration="0" Storyboard.TargetProperty="Visibility" Storyboard.TargetName="PlaceholderTextBlock">
                                            <DiscreteObjectKeyFrame KeyTime="0">
                                                <DiscreteObjectKeyFrame.Value>
                                                    <Visibility>Visible</Visibility>
                                                </DiscreteObjectKeyFrame.Value>
                                            </DiscreteObjectKeyFrame>
                                        </ObjectAnimationUsingKeyFrames>
                                        <ObjectAnimationUsingKeyFrames Duration="0" Storyboard.TargetProperty="Visibility" Storyboard.TargetName="PlaceholderRect">
                                            <DiscreteObjectKeyFrame KeyTime="0">
                                                <DiscreteObjectKeyFrame.Value>
                                                    <Visibility>Visible</Visibility>
                                                </DiscreteObjectKeyFrame.Value>
                                            </DiscreteObjectKeyFrame>
                                        </ObjectAnimationUsingKeyFrames>
                                    </Storyboard>
                                </VisualState>
                            </VisualStateGroup>
                        </VisualStateManager.VisualStateGroups>
                        <Grid x:Name="ReorderHintContent" Background="Transparent">
                            <Path x:Name="SelectingGlyph" Data="F1 M133.1,17.9 L137.2,13.2 L144.6,19.6 L156.4,5.8 L161.2,9.9 L145.6,28.4 z" Fill="{StaticResource ListViewItemCheckSelectingThemeBrush}" FlowDirection="LeftToRight" HorizontalAlignment="Right" Height="13" Margin="0,9.5,9.5,0" Opacity="0" Stretch="Fill" VerticalAlignment="Top" Width="15"/>
                            <Border x:Name="HintGlyphBorder" HorizontalAlignment="Right" Height="40" Margin="4" Opacity="0" VerticalAlignment="Top" Width="40">
                                <Path x:Name="HintGlyph" Data="F1 M133.1,17.9 L137.2,13.2 L144.6,19.6 L156.4,5.8 L161.2,9.9 L145.6,28.4 z" Fill="{StaticResource ListViewItemCheckHintThemeBrush}" FlowDirection="LeftToRight" HorizontalAlignment="Right" Height="13" Margin="0,5.5,5.5,0" Opacity="0" Stretch="Fill" VerticalAlignment="Top" Width="15"/>
                            </Border>
                            <Border x:Name="ContentContainer">
                                <Grid x:Name="InnerDragContent">
                                    <Rectangle x:Name="PointerOverBorder" Fill="{StaticResource ListViewItemPointerOverBackgroundThemeBrush}" IsHitTestVisible="False" Margin="1" Opacity="0"/>
                                    <Rectangle x:Name="FocusVisual" IsHitTestVisible="False" Opacity="0" Stroke="{StaticResource ListViewItemFocusBorderThemeBrush}" StrokeThickness="2"/>
                                    <Rectangle x:Name="SelectionBackground" Fill="{StaticResource ListViewItemSelectedBackgroundThemeBrush}" Margin="4" Opacity="0"/>
                                    <Border x:Name="ContentBorder" BorderBrush="{TemplateBinding BorderBrush}" BorderThickness="{TemplateBinding BorderThickness}" Background="{TemplateBinding Background}" Margin="4">
                                        <Grid>
                                            <ContentPresenter x:Name="contentPresenter" ContentTemplate="{TemplateBinding ContentTemplate}" ContentTransitions="{TemplateBinding ContentTransitions}" Content="{TemplateBinding Content}" HorizontalAlignment="{TemplateBinding HorizontalContentAlignment}" Margin="{TemplateBinding Padding}" VerticalAlignment="{TemplateBinding VerticalContentAlignment}"/>
                                            <TextBlock x:Name="PlaceholderTextBlock" Foreground="{x:Null}" IsHitTestVisible="False" Margin="{TemplateBinding Padding}" Opacity="0" Text="Xg"/>
                                            <Rectangle x:Name="PlaceholderRect" Fill="{StaticResource ListViewItemPlaceholderBackgroundThemeBrush}" IsHitTestVisible="False" Visibility="Collapsed"/>
                                            <Rectangle x:Name="MultiArrangeOverlayBackground" Fill="{StaticResource ListViewItemDragBackgroundThemeBrush}" IsHitTestVisible="False" Opacity="0"/>
                                        </Grid>
                                    </Border>
                                    <Rectangle x:Name="SelectedBorder" IsHitTestVisible="False" Margin="4" Opacity="0" Stroke="{StaticResource ListViewItemSelectedBackgroundThemeBrush}" StrokeThickness="{StaticResource ListViewItemSelectedBorderThemeThickness}"/>
                                    <Border x:Name="SelectedCheckMarkOuter" HorizontalAlignment="Right" IsHitTestVisible="False" Margin="4" VerticalAlignment="Top">
                                        <Grid x:Name="SelectedCheckMark" Height="40" Opacity="0" Width="40">
                                            <Path x:Name="SelectedEarmark" Data="M0,0 L40,0 L40,40 z" Fill="{StaticResource ListViewItemSelectedBackgroundThemeBrush}" Stretch="Fill"/>
                                            <Path Data="F1 M133.1,17.9 L137.2,13.2 L144.6,19.6 L156.4,5.8 L161.2,9.9 L145.6,28.4 z" Fill="{StaticResource ListViewItemCheckThemeBrush}" FlowDirection="LeftToRight" HorizontalAlignment="Right" Height="13" Margin="0,5.5,5.5,0" Stretch="Fill" VerticalAlignment="Top" Width="15"/>
                                        </Grid>
                                    </Border>
                                    <TextBlock x:Name="MultiArrangeOverlayText" Foreground="{StaticResource ListViewItemDragForegroundThemeBrush}" FontSize="26.667" FontFamily="{StaticResource ContentControlThemeFontFamily}" IsHitTestVisible="False" Margin="18,9,0,0" Opacity="0" TextWrapping="Wrap" Text="{Binding TemplateSettings.DragItemsCount, RelativeSource={RelativeSource Mode=TemplatedParent}}" TextTrimming="WordEllipsis"/>
                                </Grid>
                            </Border>
                        </Grid>
                    </Border>
                </ControlTemplate> 
            </Setter.Value>
        </Setter>
    </Style>
</Page.Resources> 
```

然后在你的页面正文中编辑 ListView 标签（请注意`ItemContainerStyle`属性）

```
 <ListView HorizontalAlignment="Left" Height="100"  VerticalAlignment="Top" Width="625" x:Name="ListBox" ItemContainerStyle="{StaticResource ListViewItemStyle1}"/> 
```

# extjs - 如何在特定高度 EXTJS 面板后启用滚动

> ID：14028645
> 
> 赞同：0
> 
> 时间：2012-12-25T07:34:03.777
> 
> 标签：extjs

我们如何在延伸到一定高度后启用自动滚动。

基本上我的面板应该自动扩展到高度 200，但发布我想要滚动条。

我给了

自动高度：真高度：200 自动滚动：真

我不想固定高度 200，因为高度可能小于当时它应该自动调整到 100 的高度。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-25T10:29:50.800

我不确定你是否可以在一个元素上同时拥有 autoHeight 和 height （并且让它们都工作）我认为明确的 height 和 autoScroll tr​​ue 应该会产生你想要的效果，除非它不会明显低于高度值

# android - 调用 setContentView 后 findViewById 返回 null

> ID：14028648
> 
> 赞同：3
> 
> 时间：2012-12-25T07:34:41.207
> 
> 标签：android, textview, findviewbyid

我尝试通过 findViewById(int) 在我的 java 文件中引用 TextView，但即使在使用正确的布局文件调用 setContentView(int) 之后，这似乎也返回 null。

**帮助.xml**

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:orientation="vertical" >

<TextView
    android:id="@+id/tvBoxHelp"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="@string/help"
    android:layout_gravity="center"
    android:textSize="20sp" />

</LinearLayout> 
```

**帮助.java**

```
 public class Help extends Activity {

private TextView tv;

@Override
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    setContentView(R.layout.help);
    tv = (TextView) findViewById(R.id.tvBoxHelp);
    tv.setText("text");
    super.onCreate(savedInstanceState);
    }
  } 
```

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-25T07:39:28.010

你的`super.onCreate(savedInstanceState);`职位引起了问题。

用这个替换你的 Help.java

```
public class Help extends Activity {

    private TextView tv;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);   
        setContentView(R.layout.help);

        tv = (TextView) findViewById(R.id.tvBoxHelp);
        tv.setText("text");

    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-25T07:41:01.007

`super.onCreate(savedInstanceState);`在设置内容视图之前调用超级方法 ( )

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-25T07:48:42.037

```
 public class Help extends Activity {

private TextView tv;

@Override
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    //
    setContentView(R.layout.help);
    tv = (TextView) findViewById(R.id.tvBoxHelp);
    tv.setText("text");

 //This should be called first super.onCreate(savedInstanceState);
    super.onCreate(savedInstanceState);
    }
  } 
```

# java - 如何在 Eclipse 中使用 launch4j 运行应用程序并进行开发？

> ID：14028653
> 
> 赞同：0
> 
> 时间：2012-12-25T07:35:06.317
> 
> 标签：java, out-of-memory, launch4j

我们正在使用musicg库开发应用程序，当我们在eclipse中运行程序时出现内存不足异常。

下面是类

```
public class FingerprintDemo{

    public static void main (String[] args){

        String filename = "Fun - Some Nights (ORIGINAL.wav";

        // create a wave object
        Wave wave = new Wave("D:\\DropBox\\Dropbox\\Convencion 2012\\AUDIOS WAV/"+filename);

        // get the fingerprint
        byte[] fingerprint=wave.getFingerprint();

        // dump the fingerprint
        FingerprintManager fingerprintManager=new FingerprintManager();
        fingerprintManager.saveFingerprintAsFile(fingerprint, "out/"+filename+".fingerprint");

        // load fingerprint from file
        byte[] loadedFp=fingerprintManager.getFingerprintFromFile("out/"+filename+".fingerprint");

        /*
        // fingerprint bytes checking
        for (int i=0; i<fingerprint.length; i++){
            System.out.println(fingerprint[i]+" vs "+loadedFp[i]);
        }
        */
    }
} 
```

当我运行这个程序时，它给出了以下异常。

```
Exception in thread "main" java.lang.OutOfMemoryError: Java heap space
    at com.musicg.wave.extension.Spectrogram.buildSpectrogram(Spectrogram.java:117)
    at com.musicg.wave.extension.Spectrogram.<init>(Spectrogram.java:76)
    at com.musicg.wave.Wave.getSpectrogram(Wave.java:237)
    at com.musicg.fingerprint.FingerprintManager.extractFingerprint(FingerprintManager.java:83)
    at com.musicg.wave.Wave.getFingerprint(Wave.java:329)
    at com.musicg.main.demo.FingerprintDemo.main(FingerprintDemo.java:31) 
```

我做了类的 jar 并在 Launch4j 中配置它并执行，它工作正常，没有异常。

```
<launch4jConfig>
  <dontWrapJar>false</dontWrapJar>
  <headerType>gui</headerType>
  <jar>D:\musicg\musicg.jar</jar>
  <outfile>D\musicg\\\musicg\.exe</outfile>
  <errTitle>MusicG</errTitle>
  <cmdLine></cmdLine>
  <chdir></chdir>
  <priority>normal</priority>
  <downloadUrl>http://java.com/download</downloadUrl>
  <supportUrl></supportUrl>
  <customProcName>true</customProcName>
  <stayAlive>false</stayAlive>
  <manifest></manifest>
  <icon></icon>
  <jre>
    <path>C:\Program Files\Java\jre7\</path>
    <minVersion>1.4.0</minVersion>
    <maxVersion></maxVersion>
    <jdkPreference>preferJre</jdkPreference>
    <initialHeapSize>512</initialHeapSize>
    <maxHeapSize>512</maxHeapSize>
  </jre>
</launch4jConfig> 
```

如何摆脱这个异常或如何在Eclipse中配置launch4j并调用程序执行？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T18:40:08.803

您在 Eclipse 中收到 OutOfMemoryError 是因为您没有在运行配置中增加最大堆大小。但是，在您的 Launch4J 脚本中，您确实增加了它：`<maxHeapSize>512</maxHeapSize>`

要修复 Eclipse 中的问题，请打开[Run Configurations 对话框](http://www.tutorialspoint.com/eclipse/eclipse_run_configuration.htm)。切换到参数选项卡并输入您的 Xmx（最大堆大小）参数。

![在此处输入图像描述](../Images/735e2c613535a308951c0e68737c2944.png)

从 Eclipse 运行 Launch4J 脚本确实不合适，请为此使用运行配置。虽然您可以创建一个将运行 Launch4J 并构建您的 .exe 的 Ant 脚本。

# jquery - 带有 css scaleY 的 jQuery 可排序

> ID：14028659
> 
> 赞同：0
> 
> 时间：2012-12-25T07:35:58.237
> 
> 标签：jquery, jquery-ui, scale, jquery-ui-sortable

如何正确地改变scaleY (css) `LI`if general `UL`upend 的位置？

此处[http://jsfiddle.net/ZnQHe/2/](http://jsfiddle.net/ZnQHe/2/)的问题示例（尝试移动列表元素）

我需要`scale(-1)`

![在此处输入图像描述](../Images/26f51067bbec96a139079475c236471a.png)

# python - 从模板中的相关对象中获取有限的随机项目？

> ID：14028666
> 
> 赞同：1
> 
> 时间：2012-12-25T07:36:51.883
> 
> 标签：python, django

我有一个 Author 模型，每个模型都分配了很多书。在我的 Books 模型中，我有：`author = models.ForeignKey(Author)`

在我的页面中，我列出了我拥有的所有作者，并且在每个作者下我想随机显示 5 本书。

这是否仅通过模板可行，或者我必须在我看来这样做？**我的意思是限制结果并随机获取它们。**

我目前只将作者传递给模板，如下所示：`a = Author.objects.all()`

请指教。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-25T07:46:41.177

你有两个选择：

1.  在你看来：

    此查询是*“为作者返回 5 本随机书籍`a`”*

    ```
    random_books = Book.objects.filter(author=a).order_by('?')[:5] 
    ```

2.  创建一个接受作者并返回随机 5 本书的[自定义标签：](https://docs.djangoproject.com/en/dev/howto/custom-template-tags/#inclusion-tags)

    创建自定义标签：

    ```
    from myapp.models import Book

    def randbooks(author):
        return {'books': Book.objects.filter(author=author).order_by('?')[:5]}

    register.inclusion_tag('book_listing.html')(randbooks) 
    ```

    创建一个模板来显示标题 ( `book_listing.html`)：

    ```
    <ul>
    {% for book in books %}
       <li>{{ book }}</li>
    {% endfor %}
    </ul> 
    ```

    在您的模板中使用它，如下所示：

    ```
    {% for author in a %}
      {% randbooks author %}
    {% endfor %} 
    ```

# ruby-on-rails - 没有猴子补丁的 Web 框架？

> ID：14028672
> 
> 赞同：-4
> 
> 时间：2012-12-25T07:38:14.230
> 
> 标签：ruby-on-rails, django, web-frameworks, monkeypatching

诸如 Django 和 Rails 之类的 Web 框架依赖于猴子补丁来支持插件。

是否有使用 Python 或 Ruby 的 Web 框架支持插件而无需求助于猴子补丁？以及如何在没有猴子补丁的情况下构建代码来支持插件，特别是如果一个人转向静态类型语言？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-25T17:11:37.700

我质疑您对“猴子补丁”和“插件”的定义。

Django*非常*支持“插件”，尽管它称它们为“包”或“模块”。这是一个仅列出 Django 可用包的站点：

[http://www.djangopackages.com/](http://www.djangopackages.com/)

我对 Rails 一无所知，但我敢打赌我家也有类似的东西。

# coding-style - 如何编写代码文档架构

> ID：14028673
> 
> 赞同：0
> 
> 时间：2012-12-25T07:38:52.650
> 
> 标签：coding-style

我已经搬到新项目，我希望编写解释整个代码的文档，这样如果任何新开发人员加入项目，都可以通过查看文档来理解代码。代码是用 C 编写的，您能否建议文档的技术名称（我不是在制作设计文档，是吗？）以及如何开始使用它。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-28T19:54:19.487

通常你会称之为“技术设计”。但是，通常您会将内容拆分为多个文档，例如“功能规范”、“高级设计”和“低级设计”（它们共同构成了技术设计）。但这当然取决于您所在的组织。

# jaxb - 尝试将 .war 部署到 GlassFish 3.1.2 时出现 JAXB 异常

> ID：14028681
> 
> 赞同：1
> 
> 时间：2012-12-25T07:39:36.420
> 
> 标签：jaxb, glassfish

> 原因：javax.xml.bind.JAXBException：提供程序 com.sun.xml.bind.ContextFactory_1_0_1 无法实例化：javax.xml.bind.JAXBException - 带有链接异常：[java.lang.NoSuchFieldError: theInstance]

看起来有某种 JAXB 依赖冲突。我怎样才能保证？有没有人遇到过这样的问题？有什么建议么？谢谢。

# c-preprocessor - 如何确定预处理器中的操作系统和操作系统版本？

> ID：14028682
> 
> 赞同：1
> 
> 时间：2012-12-25T07:39:38.107
> 
> 标签：c-preprocessor

我可以如何确定预处理器中的操作系统和操作系统版本？

我想划分 Solaris 10 和其他操作系统。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-25T08:08:06.627

正如 Jan Dvorak 所说，这取决于您是指主机系统（您正在编译的系统）还是目标系统（您的应用程序将在其上运行的系统）。

如果是**后者**，则无法执行您想要的操作，原因很简单，该信息仅在目标系统的运行时可用，而预处理器仅在编译期间运行。

如果是**前者**，你的编译器应该提供预定义的 MACROS，它会给你一些关于你正在编译的系统的信息。例如，在 Windows 上使用 MingW 或 MSVC 进行编译时，`_WIN32`将定义宏以允许您有条件地包含代码。

但是，这不太可能为您提供您寻求的信息，因为操作系统版本通常在编译期间无关紧要 - 您想要的信息是您正在编译*的*操作系统（例如：Windows、Solaris）、哪个编译器版本等。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T11:17:44.123

为了扩展 skoy 的答案，对于任何希望确定正在编译程序的系统的信息的人，sourceforge 项目上有一个 wiki 页面，其中列出了用于几个不同事物（例如[操作系统](http://sourceforge.net/p/predef/wiki/OperatingSystems/ "操作系统")）的大多数预定义宏的列表，[架构](http://sourceforge.net/p/predef/wiki/Architectures/ "架构")和[编译器](http://sourceforge.net/p/predef/wiki/Compilers/ "编译器")。

# c - GSoap 客户端无法将参数值传递给服务器

> ID：14028685
> 
> 赞同：0
> 
> 时间：2012-12-25T07:40:32.097
> 
> 标签：c, web-services, gsoap

第 1 步，我使用 ASP.NET (C#) 创建了一个 WebService：

```
[WebService(Namespace = "http://tempuri.org/")]
    [WebServiceBinding(ConformsTo = WsiProfiles.BasicProfile1_1)]
    public class WebService1 : System.Web.Services.WebService
    {

        [WebMethod]
        public string HelloWorld(int a, int b)
        {
            return a.ToString() + "," + b.ToString();
        }
    } 
```

第2步，然后我使用gsoap_2.8.12生成代码，以下命令：

```
 wsdl2h -c -o a.h http://localhost:29556/WebService1.asmx?WSDL
  soapcpp2 -c -C -I import a.h 
```

step3、在VC中创建一个空的C项目，添加如下文件：soapH.h soapStub.h stdsoap2.h soapC.c soapClient.c stdsoap2.c

step4，配置文件夹，并创建一个新类：

```
#include <stdio.h>
#include "WebService1Soap.nsmap";

void main()
{
    struct soap soap;
    int ret;
    struct _ns1__HelloWorld hello;
    struct _ns1__HelloWorldResponse respHello;
    int arg1, arg2;

    soap_init(&soap);
    hello.a = 2;
    hello.b = 3;

    ret = soap_call___ns1__HelloWorld(&soap, NULL, NULL, &hello, &respHello);
    if (ret == SOAP_OK)
    {
        printf("return :%s", respHello.HelloWorldResult);
    }
    else
    {
        printf("error :%d", ret);
    }

    getchar();
} 
```

问题：返回值是“0,0”，我们期望它应该是“2,3”，请告诉我这些东西我错过了什么？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-25T16:32:48.847

当服务接收参数为 0 时，我遇到了类似的问题，因此它返回 0。希望这对您有所帮助。 [gsoap2.8客户端和wcf service()](https://stackoverflow.com/questions/13980633/gsoap2-8-client-and-wcf-service)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T01:46:28.567

下班后，我已经修复了这个问题，如果您使用的是 WCF ，则需要在操作中添加一个属性，例如：

```
[ServiceContract]
    public interface IMyService
    {
        [OperationContract]
        [XmlSerializerFormat(Style = OperationFormatStyle.Rpc, Use = OperationFormatUse.Literal)]
        long Method1(int a, int b, long c, string d);
     } 
```

如果使用 WebService，那应该是：

```
[WebMethod]
        [System.Web.Services.Protocols.SoapRpcMethodAttribute(Use = System.Web.Services.Description.SoapBindingUse.Literal)]
        public string HelloWorld(int a, int b)
        {
            return a.ToString() + "," + b.ToString();
        } 
```

因此 gsoap 可以正确地将参数值发送到服务器。

# c# - 将 BindingNavigator 与以编程方式创建的 Datagridview 连接

> ID：14028687
> 
> 赞同：1
> 
> 时间：2012-12-25T07:40:53.183
> 
> 标签：c#, binding, datagridview

我以编程方式创建了一个 datagridview。因此，没有我们可以将 Datagridview 和 Binidgnavigator 都连接到它们的绑定源或数据源。有没有其他方法可以将它们相互连接。这是我的datafridview代码

帮我把它连接到 bindingNavigator

```
private void Fill()
{
    try
    {
        if (dataGridView1 != null)
        {
            dataGridView1.ColumnCount = 11;
            dataGridView1.Columns[0].HeaderText = Resources.Form1_Fill_ID;
            dataGridView1.Columns[1].HeaderText = Resources.Form1_Fill_Family;
            dataGridView1.Columns[2].HeaderText = Resources.Form1_Fill_Cellphone;
            dataGridView1.Columns[3].HeaderText = Resources.Form1_Fill_Phone1;
            dataGridView1.Columns[4].HeaderText = Resources.Form1_Fill_Phone2;
            dataGridView1.Columns[5].HeaderText = Resources.Form1_Fill_Phone3;
            dataGridView1.Columns[6].HeaderText = Resources.Form1_Fill_Fax;
            dataGridView1.Columns[7].HeaderText = Resources.Form1_Fill_CompanyName;
            dataGridView1.Columns[8].HeaderText = Resources.Form1_Fill_Agency;
            dataGridView1.Columns[9].HeaderText = Resources.Form1_Fill_Brands;
            dataGridView1.Columns[10].HeaderText = Resources.Form1_Fill_Address;

            dataGridView1.Columns[0].Name = Resources.Form1_Fill_ID;
            dataGridView1.Columns[1].Name = Resources.Form1_Fill_Family;
            dataGridView1.Columns[2].Name = Resources.Form1_Fill_Cellphone;
            dataGridView1.Columns[3].Name = Resources.Form1_Fill_Phone1;
            dataGridView1.Columns[4].Name = Resources.Form1_Fill_Phone2;
            dataGridView1.Columns[5].Name = Resources.Form1_Fill_Phone3;
            dataGridView1.Columns[6].Name = Resources.Form1_Fill_Fax;
            dataGridView1.Columns[7].Name = Resources.Form1_Fill_CompanyName;
            dataGridView1.Columns[8].Name = Resources.Form1_Fill_Agency;
            dataGridView1.Columns[9].Name = Resources.Form1_Fill_Brands;
            dataGridView1.Columns[10].Name = Resources.Form1_Fill_Address;
        }

        _conn.ConnectionString = _connectionString;
        var cmd = new OleDbCommand("Select * from contacts ", _conn);
        _conn.Open();
        OleDbDataReader reader = cmd.ExecuteReader();

        int i = 0;
        while (reader != null && reader.Read())
        {
            if (dataGridView1 != null)
            {
                dataGridView1.Rows.Add(1);
            }
            if (dataGridView1 != null)
            {
                var row = dataGridView1.Rows[i];

                row.Cells[Resources.Form1_Fill_ID].Value = reader[0].ToString();
                row.Cells[Resources.Form1_Fill_Family].Value = reader[1].ToString();
                row.Cells[Resources.Form1_Fill_Cellphone].Value = reader[2].ToString();
                row.Cells[Resources.Form1_Fill_Phone1].Value = reader[3].ToString();
                row.Cells[Resources.Form1_Fill_Phone2].Value = reader[4].ToString();
                row.Cells[Resources.Form1_Fill_Phone3].Value = reader[5].ToString();
                row.Cells[Resources.Form1_Fill_Fax].Value = reader[6].ToString();
                row.Cells[Resources.Form1_Fill_CompanyName].Value = reader[7].ToString();
                row.Cells[Resources.Form1_Fill_Agency].Value = reader[8].ToString();
                row.Cells[Resources.Form1_Fill_Brands].Value = reader[9].ToString();
                row.Cells[Resources.Form1_Fill_Address].Value = reader[10].ToString();

            }
            i++;
        }

    }
    catch (Exception ex)
    {
        return;
    }
    finally
    {
        _conn.Close();
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-26T12:11:16.897

尝试修改您的代码。您不需要以编程方式创建列，您的*查询*`DataTable`本身可以通过to创建列`BindingSource`，尝试此代码并获得一些想法。

**BindingNavigator 和 BindingSource**

```
 string connectionString =
            @"Provider=Microsoft.ACE.OLEDB.12.0;" +
            @"Data Source=D:\myDatabase.accdb;";

        string queryString = "SELECT Name AS FullName, Gender AS Gender, Address AS [Current Address] FROM Person";

        using (OleDbConnection connection = new OleDbConnection(connectionString))
        using (OleDbCommand command = new OleDbCommand(queryString, connection))
        {
            try
            {
                BindingSource bs = new BindingSource();
                OleDbDataAdapter dataAdapter = new OleDbDataAdapter(queryString, connection);
                OleDbCommandBuilder commandBuilder = new OleDbCommandBuilder(dataAdapter);
                DataTable dataTable = new DataTable();
                dataAdapter.Fill(dataTable);
                bs.DataSource = dataTable;
                dataGridView1.DataSource = bs;
                bindingNavigator1.BindingSource = bs;
            }
            catch (Exception ex)
            {
                Console.WriteLine(ex.Message);
            }
        } 
```

# web-services - 不同用户的不同 url 的 WSDL 服务引用

> ID：14028691
> 
> 赞同：0
> 
> 时间：2012-12-25T07:41:11.343
> 
> 标签：web-services, reference, wsdl, visual-studio-2012

我有一个 WSDL 服务，我需要在我的项目中使用它。

Web 服务的 URL、用户名和密码对于每个用户都是不同的。

我知道如何添加服务参考。我用特定的网址来做。我将服务的 url 提供给 VS。

当我希望每个用户都有不同的服务 url 时，我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-25T07:46:29.130

您可以以编程方式更改端点地址。

在[MSDN](http://msdn.microsoft.com/en-us/library/ms733749.aspx)上查看有关WCF 的更多信息

或用于[遗留 Web服务](http://www.codeproject.com/Questions/74179/Dynamically-Configure-Web-Service-Endpoint-for-Cli)

# c# - 如何在 ASP 标签内编写 c# 代码

> ID：14028694
> 
> 赞同：3
> 
> 时间：2012-12-25T07:42:02.220
> 
> 标签：c#, asp.net

我有这个代码，我有这个错误 在这个上下文中不支持代码块

```
 <%
        for (int i = 0; i < 5; i++)
        {
    %>
    <asp:DropDownList runat="server" ID="<%=i %>">
        <asp:ListItem><%i.ToString(); %></asp:ListItem>
    </asp:DropDownList>
    <%
        }            
    %> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-25T07:46:20.613

您可以使用 Razor 来编写这样的代码。以[这里](http://msdn.microsoft.com/en-us/vs2010trainingcourse_aspnetmvc3razor.aspx)为例。

这里还有另一个[博客条目](http://weblogs.asp.net/scottgu/archive/2010/07/02/introducing-razor.aspx)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-25T07:56:57.487

这在 Web 表单中是不允许的。

# php - PHP：如何获取“不匹配”字符串？

> ID：14028702
> 
> 赞同：-2
> 
> 时间：2012-12-25T07:44:39.207
> 
> 标签：php

我有这个数组：

```
$GivenString = array("world", "earth", "extraordinary world"); 
```

如何获得这样的“不匹配”变量字符串：

```
$string = 'hello, world'; // output = 'hello, '
$string = 'down to earth'; // output = 'down to '
$string = 'earthquake'; // output = ''
$string = 'perfect world'; // output = 'perfect '
$string = 'I love this extraordinary world'; // output = 'I love this ' 
```

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-25T07:47:31.727

array_diff [http://php.net/manual/en/function.array-diff.php](http://php.net/manual/en/function.array-diff.php)

```
$tokens = explode(' ', $string);
$difference = array_diff($tokens, $GivenString); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-25T07:55:44.323

我认为简单`str_replace`会帮助你

```
$GivenString = array("world", "earth", "extraordinary");

echo str_replace($GivenString, "", $string); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-25T08:24:43.283

`str_replace`将无济于事，如`$string = 'earthquake'; // output = ''`示例所示。这是一段可以完成工作的代码。

```
$GivenString = array("world", "earth", "extraordinary world");

foreach ($GivenString as &$string) {
    $string = sprintf('%s%s%s', '[^\s]*', preg_quote($string, '/'), '[^\s]*(\s|)');
}

// case sensitive
$regexp = '/(' . implode('|', $GivenString) . ')/';

// case insensitive
// $regexp = '/(' . implode('|', $GivenString) . ')/i';

$string = 'earthquake';
echo preg_replace($regexp, '', $string); 
```

# c - 结构中元素之一的数组初始化

> ID：14028706
> 
> 赞同：0
> 
> 时间：2012-12-25T07:44:58.150
> 
> 标签：c, pointers, structure

我已经为结构中的一个元素初始化了数组，打印输出时出现了一些错误，请指出错误并指导解决。谢谢！

```
#include<stdio.h>

typedef struct person
{
int row[3];
int age;
}PERSON;

int main()
{
 int i;
 PERSON p;
 PERSON *pptr=&p;
 pptr->row[3] = {4,5,6};

 for (i = 0; i < 3; i++) { 
  printf (" %d\n", pptr->row[i]);

 }
return 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-25T07:59:20.620

C 语言中的数组对象是不可赋值的。您不能使用赋值来设置整个数组中的值。因此，使用赋值语法来做你想做的事情是不可能的。

您有机会在声明时初始化数组，即定义对象时`p`

```
PERSON p = { { 4, 5, 6 }  }; 
```

但你没有利用这个机会。在那之后，使用纯核心语言特性来做到这一点为时已晚。

要在声明点之后设置整个数组中的值，您可以使用库函数，例如`memcpy`，结合复合文字

```
memcpy(pptr->row, (int []) {4, 5, 6}, sizeof pptr->row); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-25T07:49:35.113

您不能像这样为数组赋值：`pptr->row[3] = {4,5,6};`. 这种语法仅在初始化时有效。您需要手动设置每个值或使用所需的值初始化数组，如下所示`PERSON p = {{4,5,6}, 0};`：

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-25T07:50:20.637

当你完成了`PERSON p;`。创建的对象`p`包含`indeterminate values`. 这意味着所有数据成员都已经用垃圾初始化，因为它在堆栈上。

因此，`pptr->row[3] = {4,5,6};`在这种情况下，不是不允许数组的初始化。在这种`for`情况下，循环方法是最好的。

```
for (i = 0; i < 3; i++)
   scanf("%d",&(pptr->row[i]));  // prenthrsis is for human readability 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-25T07:55:54.780

```
#include<stdio.h>

typedef struct person
{
int row[3];
int age;
}PERSON;

int main()
{
 int i;
 PERSON p;
 PERSON *pptr=&p;
 pptr->row[0] = 4;
 pptr->row[1] = 5;
 pptr->row[2] = 6;

 for (i = 0; i < 3; i++) { 
  printf (" %d\n", pptr->row[i]);

 }
return 0;
} 
```

你不能这样初始化数组`pptr->row[3] = {4,5,6};`，你可以使用上面的方法或者使用`for`循环来初始化数组..

# mustache - 使用 mustache.js 进行多重循环

> ID：14028708
> 
> 赞同：1
> 
> 时间：2012-12-25T07:45:11.737
> 
> 标签：mustache

这是我的 json .. 我如何检索“定义”的值作为迭代...

我怎样才能遍历它..我只想知道如何使用 mustache.js 迭代这个 json ......伙计们请帮帮我......

```
{
  "1": {
    "word": "gun",
    "pos": "verb-transitive",
    "attrtxt": "from The American Heritage\u00ae Dictionary of the English Language, 4th Edition",
    "1": {enter code here
      "definition": "A weapon consisting of a metal tube from which a projectile is fired at high velocity into a relatively flat trajectory."
    },
    "2": {
      "definition": "A cannon with a long barrel and a relatively low angle of fire."
    },
    "3": {
      "definition": "A portable firearm, such as a rifle or revolver."
    },
    "4": {
      "definition": "A device resembling a firearm or cannon, as in its ability to project something, such as grease, under pressure or at great speed."
    },
    "5": {
      "definition": "A discharge of a firearm or cannon as a signal or salute."
    },
    "6": {
      "definition": "One, such as a hunter, who carries or uses a gun."
    },
    "7": {
      "definition": "A person skilled in the use of a gun."
    },
    "8": {
      "definition": "A professional killer:  a hired gun. "
    },
    "9": {
      "definition": "The throttle of an engine, as of an automobile."
    }
  },
  "2": {
    "1": {
      "definition": "To shoot (a person):  a bank robber who was gunned down by the police. "
    },
    "word": "gun",
    "pos": "verb-intransitive",
    "attrtxt": "from The American Heritage\u00ae Dictionary of the English Language, 4th Edition",
    "2": {
      "definition": "To open the throttle of (an engine) so as to accelerate:  gunned the engine and sped off. "
    },
    "3": {
      "definition": "Maine   To hunt (game)."
    }
  }, 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-09-20T21:44:01.417

是否可以重新格式化 JSON？将所有内容都作为特定的命名元素意味着使用以下标签：

```
{{1.1.definition}} 
```

块标签允许您循环，但特定名称将其限制为：

```
{{#1}}{{word}}{{/1}} 
```

用数组格式化它会使循环更容易：

```
{
    "Words" : [{
            "word" : "gun",
            "pos" : "verb-transitive",
            "attrtxt" : "from The American Heritage\u00ae Dictionary of the English Language, 4th Edition",
            "definitions" : [
                "A weapon consisting of a metal tube from which a projectile is fired at high velocity into a relatively flat trajectory.",
                "A cannon with a long barrel and a relatively low angle of fire.",
                "A portable firearm, such as a rifle or revolver.",
                "A device resembling a firearm or cannon, as in its ability to project something, such as grease, under pressure or at great speed.",
                "A discharge of a firearm or cannon as a signal or salute.",
                "One, such as a hunter, who carries or uses a gun.",
                "A person skilled in the use of a gun.",
                "A professional killer:  a hired gun. ",
                "The throttle of an engine, as of an automobile."
            ]
        }, {
            "word" : "gun",
            "pos" : "verb-intransitive",
            "attrtxt" : "from The American Heritage\u00ae Dictionary of the English Language, 4th Edition",
            "definitions" : [
                "To shoot (a person):  a bank robber who was gunned down by the police. ",
                "To open the throttle of (an engine) so as to accelerate:  gunned the engine and sped off. ",
                "Maine   To hunt (game)."
            ]
        }
    ]
} 
```

# c# - 无法添加对 WinRT C++ DLL 项目的引用

> ID：14028713
> 
> 赞同：7
> 
> 时间：2012-12-25T07:46:20.693
> 
> 标签：c#, c++, xaml, clr, direct3d

**情景：**

我正在为基于“Direct3D App”Visual Studio 代码示例的 Windows 应用商店应用程序制作 [编辑：本机 WinRT] C++ Direct X DLL 项目。

这必须是与我的 Windows Store App 项目分开的 DLL 项目，因为我将在 Windows 8 Metro 应用程序和应用程序的 Windows Phone 版本中使用我的 XAML UserControl 和 Direct X 渲染器。

**问题：**

我无法在 C# Windows Store 应用项目中引用 C++ 项目。Visual Studio 用下面的话拒绝：

```
A reference to <project-name> could not be added. 
```

我已经看到使用 /clr 标志编译 C++ 项目的建议，但这与以下内容不兼容：

*   项目中某些 API 所需的 /ZW 标志
*   “wrl.h”标头
*   项目设置中的许多其他命令行标志

所以 /clr 标志在这种情况下似乎不是一个选项。

**问题：**

如何引用 C++ 项目，以便可以在 C# Windows Store App 项目中使用我的 XAML Direct X 渲染器？还是有更好的选择？

提前致谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-28T10:36:13.293

我通过将 C++ 项目重新创建为项目解决了这个问题`Windows Runtime Component`。我最初是从`Class Library (Windows Store apps)`模板创建项目的。必须是 Win RT 模板有一些配置设置才能使其工作。

进行此更改后，可以将项目添加为 C# 项目中的引用。

正是因为@user1610015 的回答，我才意识到我实际上是在开发本机 Win RT 代码，而不是托管代码，这让我尝试了这个解决方案 - 谢谢！

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-25T09:40:00.730

/ **ZW**标志用于 C++/CX 项目。C++/CX 在语法上几乎与托管 C++ (C++/CLI) 相同，只是 C++/CX 是完全非托管的。这可能是让您认为您正在开发托管 C++ 的原因，而实际上您并非如此。

我没有使用过 C++/CX，但据我所知，Windows 运行时类是 COM 类。因此，我认为您可以使用 Windows SDK 中的**TlbImp.exe**工具从非托管 DLL 创建托管 DLL，然后您可以从 C# 项目中引用它。试试看，让我知道它是否有效。

另一种选择是在没有 C++/CX 的情况下与 Windows 运行时通信。虽然 C++/CX 使 Windows 运行时编程变得更加容易，但这并不是绝对必要的。您还可以使用 WRL 库。由于 WRL 库是纯 C++，因此它也应该可以在 C++/CLI 中使用。

# java - 如何从java字符串中删除控制字符？

> ID：14028716
> 
> 赞同：34
> 
> 时间：2012-12-25T07:46:47.423
> 
> 标签：java, regex, string, guava

我有一个来自 UI 的字符串，它可能包含控制字符，我想删除除**回车**、**换行**和**制表**符之外的所有控制字符。

现在我可以找到两种方法来删除所有控制字符：

**1-使用番石榴：**

```
return CharMatcher.JAVA_ISO_CONTROL.removeFrom(string); 
```

**2-使用正则表达式：**

```
return string.replaceAll("\\p{Cntrl}", ""); 
```

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-12-25T07:50:11.927

如果您想删除其他或控制 uni-code 类别中的所有字符，您可以这样做

```
System.out.println(
    "a\u0000b\u0007c\u008fd".replaceAll("\\p{Cc}", "")
); // abcd 
```

**注意：**这实际上从字符串中删除（除其他外）'\u008f' Unicode 字符，而不是转义形式的“%8F”字符串。

礼貌：[polygenelubricants](https://stackoverflow.com/users/276101/polygenelubricants)（[替换 Unicode 控制字符](https://stackoverflow.com/a/3439206/1575570)）

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2012-12-25T07:54:33.360

一种选择是使用`CharMatcher`s 的组合：

```
CharMatcher charsToPreserve = CharMatcher.anyOf("\r\n\t");
CharMatcher allButPreserved = charsToPreserve.negate();
CharMatcher controlCharactersToRemove = CharMatcher.JAVA_ISO_CONTROL.and(allButPreserved); 
```

然后`removeFrom`像以前一样使用。我不知道它的效率如何，但它至少很简单。

* * *

如编辑中所述，`JAVA_ISO_CONTROL`现已在 Guava 中弃用；该[`javaIsoControl()`](https://guava.dev/releases/21.0/api/docs/com/google/common/base/CharMatcher.html#javaIsoControl--)方法是首选。

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2012-12-25T08:09:51.293

这似乎是一个选择

```
 String s = "\u0001\t\r\n".replaceAll("[\\p{Cntrl}&&[^\r\n\t]]", "");
    for (char c : s.toCharArray()) {
        System.out.print((int) c + " ");
    } 
```

就像你说的那样打印`9 13 10`“除了回车、换行和制表符”。

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2018-04-05T07:45:41.873

使用这些

```
public static String removeNonAscii(String str)
{
    return str.replaceAll("[^\\x00-\\x7F]", "");
}

public static String removeNonPrintable(String str) // All Control Char
{
    return str.replaceAll("[\\p{C}]", "");
}

public static String removeSomeControlChar(String str) // Some Control Char
{
    return str.replaceAll("[\\p{Cntrl}\\p{Cc}\\p{Cf}\\p{Co}\\p{Cn}]", "");
}

public static String removeControlCharFull(String str)
{
    return removeNonPrintable(str).replaceAll("[\\r\\n\\t]", "");
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-12-25T08:04:30.580

在 Java 正则表达式中，可以排除字符类中的某些字符。这是一个示例程序，演示了类似的内容：

```
class test {
    public static void main (String argv[]) {
            String testStr="abcdefABCDEF";
            System.out.println(testStr);
            System.out.println(testStr.replaceAll("[\\p{Lower}&&[^cd]]",""));
    }
} 
```

它将产生以下输出：

```
abcdefABCDEF
cdABCDEF 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-04-09T20:40:01.723

我正在使用 Selenium 来测试网页屏幕。我使用 Hamcrest 断言和匹配器根据各种条件在页面源中搜索不同的字符串。

```
String pageSource = browser.getPageSource();
assertThat("Text not found!", pageSource, containsString(text)); 
```

这在使用 IE 或 Firefox 驱动程序时工作得很好，但在使用 HtmlUnitDriver 时会出错。HtmlUnitDriver 使用制表符、回车符和其他控制字符格式化页面源。我在上面使用了 Nidhish Krishnan 巧妙回答的即兴演奏。如果我“开箱即用”地使用 Nidish 的解决方案，我会留下额外的空格，所以我添加了一个名为 filterTextForComparison 的私有方法：

```
String pageSource = filterTextForComparison(browser.getPageSource());
assertThat("Text not found!", pageSource, 
        containsString(filterTextForComparison(text))); 
```

和功能：

```
/**
 * Filter out any characters embedded in the text that will interfere with
 * comparing Strings.
 * 
 * @param text
 *            the text to filter.
 * @return the text with any extraneous character removed.
 */
private String filterTextForComparison(String text) {

    String filteredText = text;

    if (filteredText != null) {
        filteredText = filteredText.replaceAll("\\p{Cc}", " ").replaceAll("\\s{2,}", " ");
    }

    return filteredText;
} 
```

首先，该方法用空格替换控制字符，然后用一个空格替换多个空格。我尝试使用 "\p{Cc}+?" 一次完成所有操作。但它没有抓住 "\t " 变成 " "。

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2020-09-01T10:38:22.880

`StringUtils.deleteWhiteSpace(text)`从[Apache Commons Lang](https://commons.apache.org/proper/commons-lang/)使用。

# jsf-2 - Primefaces数据表中单选按钮的onRowSelect

> ID：14028720
> 
> 赞同：5
> 
> 时间：2012-12-25T07:48:08.123
> 
> 标签：jsf-2, primefaces, radio-button

我有一个使用 JSF2.0 的数据表，其中有单选按钮显示的行

```
<p:dataTable id="dataTable" var="emp" lazy="true" value="#{req.lazyModel}"
            paginator="true" rows="10" 
            paginatorTemplate="{CurrentPageReport}  
                    {FirstPageLink} {PreviousPageLink} 
           {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
       rowsPerPageTemplate="5,10" 
           selection="#{req.selectedEmp}"
            rowKey="#{req.empNo}" 
       rowSelectListener="#{req.onRowSelect}">

 <p:column selectionMode="single" style="width:18px" /> 
```

在 Bean 我有

```
public void onRowSelect(SelectEvent event) { 
       System.out.println("row "+((Request) event.getObject()).getEmpNo());  

    } 
```

但是`onRowSelect`方法没有被调用。这可能是什么原因？

我对单选按钮的想法是当用户单击单选按钮时，我想在主数据表下方显示一个数据表，其中包含所选行的详细信息。

非常感谢任何帮助。

更新 1

```
<p:dataTable id="dataTable" var="emp" lazy="true" value="#{req.lazyModel}"
            paginator="true" rows="10" 
            paginatorTemplate="{CurrentPageReport}  
                    {FirstPageLink} {PreviousPageLink} 
           {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
       rowsPerPageTemplate="5,10" 
           selection="#{req.selectedEmp}">

 <p:column selectionMode="single" style="width:18px" />
 <p:ajax event="rowSelect" listener="#{reqMB.onRowSelect}" /> 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-12-25T10:09:20.233

*Primefaces 3.4.2*`rowSelectListener`中没有这样的属性

 *改为使用`<p:ajax event="rowSelect"`，就像在陈列柜中一样

对于收音机/复选框等......这些是可用的`<p:ajax`事件

*   行选择电台
*   行选择复选框
*   行取消选择复选框
*   rowDblselect

查看展示（在页面上搜索 p:ajax） [DataTable - 选择](http://www.primefaces.org/showcase/ui/data/datatable/selection.xhtml)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-04-14T17:27:13.550

**对于旧版本的 Primefaces。**

```
 <p:dataTable id="updateBanData"
                                 var="banSummary"
                                 value="#{sponsorBanMBean.sponsorBanForm.banSummaries}"
                                 styleClass="appTbl"
                                 selection="#{sponsorBanMBean.sponsorBanForm.selectedBanSummary}"
                                 emptyMessage="#{msgs.noRecordsFound}" selectionMode="single"
                    >

        <p:ajax event="rowSelect" listener="#{sponsorBanMBean.onUpdateBanRowSelect}"
                                update="updateSponsorShipBanDetailPanel"/>
    </p:p:dataTable>

     <p:outputPanel id="updateSponsorShipBanDetailPanel">
show your selection details. 

    </p:outputPanel> 
```

**Manged Bean 中的 Java 代码。**

```
 public void onUpdateBanRowSelect(SelectEvent selectEvent) {
            logger.logMethodStartAsDebug();
            BanSummary selectedBanSummaryEvent = (BanSummary) selectEvent.getObject();

            if(selectedBanSummaryEvent != null){
                sponsorBanForm.setUpdateSponsorShipBanDetail(true);
            }
            logger.logMethodEndAsDebug();
        } 
```*

# hibernate - 使用存储过程获取大数据时出现内存问题。

> ID：14028725
> 
> 赞同：2
> 
> 时间：2012-12-25T07:48:43.367
> 
> 标签：hibernate, jakarta-ee, memory, out-of-memory, spring-jdbc

我只需要使用 Hibernate 调用 MySql 存储过程并基于它编写一个文件。但是从存储过程返回了 0.3 到 400 万行，它们非常大。

**这是我的代码片段**

```
try {
session = sessionFactory.getCurrentSession();
query = session.createSQLQuery("CALL MyStoredProcedure();");
List<Object[]> result = query.list();
} catch (HibernateException e) {
    e.printStackTrace();
} finally {
    if(session!= null) {
        session.flush();
        session.clear();
    }
} 
```

**和错误信息**

```
Exception in thread "ContainerBackgroundProcessor[StandardEngine[Catalina]]" java.lang.OutOfMemoryError: GC overhead limit exceeded
at java.io.UnixFileSystem.canonicalize0(Native Method)
at java.io.UnixFileSystem.canonicalize(UnixFileSystem.java:172)
at java.io.File.getCanonicalPath(File.java:576)
at org.apache.naming.resources.FileDirContext.file(FileDirContext.java:806)
at org.apache.naming.resources.FileDirContext.doGetAttributes(FileDirContext.java:430)
at org.apache.naming.resources.BaseDirContext.getAttributes(BaseDirContext.java:1089)
at org.apache.naming.resources.BaseDirContext.getAttributes(BaseDirContext.java:1042)
at org.apache.naming.resources.ProxyDirContext.getAttributes(ProxyDirContext.java:884)
at org.apache.catalina.loader.WebappClassLoader.modified(WebappClassLoader.java:984)
at org.apache.catalina.loader.WebappLoader.modified(WebappLoader.java:501)
at org.apache.catalina.loader.WebappLoader.backgroundProcess(WebappLoader.java:421)
at org.apache.catalina.core.ContainerBase.backgroundProcess(ContainerBase.java:1350)
at org.apache.catalina.core.ContainerBase$ContainerBackgroundProcessor.processChildren(ContainerBase.java:1537)
at org.apache.catalina.core.ContainerBase$ContainerBackgroundProcessor.processChildren(ContainerBase.java:1547)
at org.apache.catalina.core.ContainerBase$ContainerBackgroundProcessor.processChildren(ContainerBase.java:1547)
at org.apache.catalina.core.ContainerBase$ContainerBackgroundProcessor.run(ContainerBase.java:1526)
at java.lang.Thread.run(Thread.java:636) 
```

在工作中进行了一些调查后，我注意到我必须在我的代码中使用 setFetchSize() 和 setMaxResults()。就像

```
try {
session = sessionFactory.getCurrentSession();
query = session.createSQLQuery("CALL MyStoredProcedure();");
query.setFetchSize(1000);
query.setFirstResult(lowerLimit);
query.setMaxResults(upperLimit);
List<Object[]> result = query.list();
} catch (HibernateException e) {
    e.printStackTrace();
} finally {
    if(session!= null) {
        session.flush();
        session.clear();
    }
} 
```

但这一次我遇到了另一个错误。以下是错误信息

```
org.hibernate.exception.SQLGrammarException: could not execute query
    at org.hibernate.exception.SQLStateConverter.convert(SQLStateConverter.java:67)
    at org.hibernate.exception.JDBCExceptionHelper.convert(JDBCExceptionHelper.java:43)
    at org.hibernate.loader.Loader.doList(Loader.java:2216)
    at org.hibernate.loader.Loader.listIgnoreQueryCache(Loader.java:2104)
    at org.hibernate.loader.Loader.list(Loader.java:2099)
    at org.hibernate.loader.custom.CustomLoader.list(CustomLoader.java:289)
    at org.hibernate.impl.SessionImpl.listCustomQuery(SessionImpl.java:1695)
    at org.hibernate.impl.AbstractSessionImpl.list(AbstractSessionImpl.java:142)
    at org.hibernate.impl.SQLQueryImpl.list(SQLQueryImpl.java:152)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:616)
    at org.springframework.web.bind.annotation.support.HandlerMethodInvoker.doInvokeMethod(HandlerMethodInvoker.java:710)
    at org.springframework.web.bind.annotation.support.HandlerMethodInvoker.invokeHandlerMethod(HandlerMethodInvoker.java:167)
    at org.springframework.web.servlet.mvc.annotation.AnnotationMethodHandlerAdapter.invokeHandlerMethod(AnnotationMethodHandlerAdapter.java:414)
    at org.springframework.web.servlet.mvc.annotation.AnnotationMethodHandlerAdapter.handle(AnnotationMethodHandlerAdapter.java:402)
    at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:771)
    at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:716)
    at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:647)
    at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:552)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:621)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:224)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:169)
    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:168)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:98)
    at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:927)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)
    at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:987)
    at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:579)
    at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:309)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)
    at java.lang.Thread.run(Thread.java:636)
Caused by: com.mysql.jdbc.exceptions.jdbc4.MySQLSyntaxErrorException: You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'limit 100000, 120000' at line 1
    at sun.reflect.GeneratedConstructorAccessor50.newInstance(Unknown Source)
    at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)
    at java.lang.reflect.Constructor.newInstance(Constructor.java:532)
    at com.mysql.jdbc.Util.handleNewInstance(Util.java:406)
    at com.mysql.jdbc.Util.getInstance(Util.java:381)
    at com.mysql.jdbc.SQLError.createSQLException(SQLError.java:1030)
    at com.mysql.jdbc.SQLError.createSQLException(SQLError.java:956)
    at com.mysql.jdbc.MysqlIO.checkErrorPacket(MysqlIO.java:3515)
    at com.mysql.jdbc.MysqlIO.checkErrorPacket(MysqlIO.java:3447)
    at com.mysql.jdbc.MysqlIO.sendCommand(MysqlIO.java:1951)
    at com.mysql.jdbc.MysqlIO.sqlQueryDirect(MysqlIO.java:2101)
    at com.mysql.jdbc.ConnectionImpl.execSQL(ConnectionImpl.java:2554)
    at com.mysql.jdbc.PreparedStatement.executeInternal(PreparedStatement.java:1761)
    at com.mysql.jdbc.PreparedStatement.executeQuery(PreparedStatement.java:1912)
    at com.mchange.v2.c3p0.impl.NewProxyPreparedStatement.executeQuery(NewProxyPreparedStatement.java:76)
    at org.hibernate.jdbc.AbstractBatcher.getResultSet(AbstractBatcher.java:186)
    at org.hibernate.loader.Loader.getResultSet(Loader.java:1787)
    at org.hibernate.loader.Loader.doQuery(Loader.java:674)
    at org.hibernate.loader.Loader.doQueryAndInitializeNonLazyCollections(Loader.java:236)
    at org.hibernate.loader.Loader.doList(Loader.java:2213) 
```

那么我该如何解决这个问题呢？请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-25T08:18:02.850

与其将所有内容都加载到内存中，不如像在 JDBC 中那样：滚动查看结果：

```
query = session.createSQLQuery("CALL MyStoredProcedure();");
ScrollableResults results = query.scroll();
while (results.next()) {
    Object[] row = results.get();
    // TODO write the row into the file
} 
```

# android - Google Play 商店是否提供任何应用激活机制

> ID：14028727
> 
> 赞同：0
> 
> 时间：2012-12-25T07:48:59.350
> 
> 标签：android, google-play

在我允许之前，我需要能够阻止用户使用我的应用程序。这个想法是应用程序应该可供下载，但用户应该只在启动它时看到激活屏幕。然后他必须通过电子邮件请求激活密钥并使用该密钥来解锁应用程序。

有没有办法在 Play 商店中实现这样的目标，是否允许？

我也不喜欢这个主意，但这是我客户的愿望..

版主注意：我在 Apple Store 发布了一个类似的问题，但我想将两个线程分开，所以请不要将其视为垃圾邮件。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-25T08:03:12.577

Google Play 没有这种开箱即用的功能。

但是，我可以想出 3 种方法来让它发挥作用。不过，我严格来说是针对 Android 平台的。

您可以以这样的方式设计您的应用程序，即第一个屏幕应要求用户获取激活码/输入激活码。

1.  完成上述操作后，您可以将激活码存储在 a 中`Preference File`并检查其有效性，并仅在匹配 / 有效时启动应用程序。
2.  将激活码存储在*数据库*中，然后再次检查值及其有效性，如果匹配 / 有效则启动应用程序。
3.  提供一些功能并集成[Google Play In-app Billing](https://developer.android.com/google/play/billing/index.html)并让用户支付一次性费用来激活和启用应用程序中的所有功能。

这些是我能想到的最重要的事情。希望这可以帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-25T07:51:55.090

**不，没有办法做到这一点。**您必须在应用程序中创建一个功能。您可以做的是让用户输入激活密钥，如果激活密钥正确，则让用户转到下一个屏幕，否则不要让用户。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-25T08:00:51.110

那是你必须在你的应用程序中实现的东西。如果获取注册密钥需要支付一些费用，那么该解决方案显然违反了 Play Store 规则。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-25T08:08:10.960

我在我的应用程序中使用类似的系统。当用户第一次打开应用程序时。如果此促销代码为真（我从后端服务检查），我要求提供促销代码，用户可以免费使用应用程序 3 个月。在此期间结束后，应用程序要求用户购买订阅。您可以使用与数据库交互的后端服务来完成此操作。

# asp.net - div中的垂直对齐元素

> ID：14028729
> 
> 赞同：0
> 
> 时间：2012-12-25T07:49:15.953
> 
> 标签：asp.net, html

我有一个带有 css 的 div ：

```
.row
{
width: 100%;
margin-bottom: 3px;
padding: 5px;
border-radius: 7px;
background-color: #F3F3F3;
text-align: right;
min-height: 20px;
} 
```

并使用 span 样式：

```
 .rowtitle
{
display: inline-block;
border-radius: 5px;
background-color: white;
padding: 3px;
margin-left: 5px;
width: 55px;
} 
```

在 html 中，我使用它。

```
 <div class="row" style="vertical-align:top">
    <span class="rowtitle" style="width:85px">جنسیت  </span>
       <asp:RadioButtonList ID="jensiatRadioButtonList" runat="server" RepeatDirection="Horizontal" >
         <asp:ListItem Selected="True" Value="1">مرد</asp:ListItem>
         <asp:ListItem Value="0">زن</asp:ListItem>
       </asp:RadioButtonList>
   </div> 
```

但是当我的控件宽度大跨度设置为 div 的底部时。

当我使用单选按钮时，它设置了 div 的底部。

我想将元素设置为 div 的顶部。

![在此处输入图像描述](../Images/57157e902a4e8e9c081d646dfe8012f5.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-25T07:53:39.693

添加`float:right;clear:both`到 .rowtitle

# javascript - Ajax 导航/浏览器返回

> ID：14028736
> 
> 赞同：1
> 
> 时间：2012-12-25T07:49:56.317
> 
> 标签：javascript, jquery, ajax, browser

需要在不重新加载任何页面的情况下实现 ajax 导航我正在将 html 写入 ajax 容器 div。是否有任何解决方案来处理浏览器后退和前进事件。还添加到书签？我需要涵盖所有浏览器，包括 IE 8 及更高版本。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-25T08:31:36.550

浏览器历史记录通常仅在浏览器加载新页面时更新。AJAX 不会替换页面，所以历史不会改变。

HTML5 添加了一个 API 以允许 Javascript 直接更新历史记录，`history.pushState()`以及`history.replaceState()`方法。您的 AJAX 代码应该能够用于`pushState()`将旧 URL 添加到浏览器历史记录中，因此后退按钮将起作用。有关血腥细节，请参阅 [HTML5 规范](http://www.w3.org/TR/html5/browsers.html#dom-history-pushstate)。

由于这是相对较新的，较旧的浏览器将不支持它。您可以将[jQuery BBQ 插件](http://benalman.com/projects/jquery-bbq-plugin/)用于跨浏览器应用程序。

# java - 如何将标签移动到新行？

> ID：14028738
> 
> 赞同：0
> 
> 时间：2012-12-25T07:50:14.537
> 
> 标签：java, swt, label

Windows 上是否有用于 SWT 的新行命令？如果没有，我在这里做错了什么？

这是代码

```
 public static void main (String [] args) {
    Display display = new Display();
    Shell shell = new TabsTest().createShell(display);
    shell.setSize(350,500);
    shell.open();
    while (!shell.isDisposed()) {
        if (!display.readAndDispatch())
            display.sleep();
    }
}

private Shell createShell(final Display display) {
    final Shell shell = new Shell(display);
    shell.setText("Betting Tracker");

    //Creating grid layout, used to organize the shell
    GridLayout gridLayout = new GridLayout();
    gridLayout.numColumns = 20;
    shell.setLayout(gridLayout);

    //Grid1
    GridData gridData = new GridData(GridData.FILL, GridData.CENTER, true, false);
    gridData.horizontalSpan = 20;

    new Label(shell, SWT.NONE).setText("Bet Type:");
        betType = new Combo(shell, SWT.SINGLE | SWT.BORDER);
        betType.setItems(new String[] {"   ", "NFL", "NBA", "CFB"});
        betType.setLayoutData(gridData);

    //Grid2
    GridData gridData2 = new GridData(GridData.BEGINNING, GridData.CENTER, true, false);
    gridData2.widthHint = 20;   
    gridData2.horizontalSpan = 5;

    new Label(shell, SWT.NONE).setText("Bets Played:");
        numBets = new Text(shell, SWT.NONE);
        numBets.setLayoutData(new GridData(GridData.FILL, GridData.CENTER, true, false));
        numBets.setLayoutData(gridData2);

    new Label(shell, SWT.NONE).setText("    Won:  ");
        betsWon = new Text(shell, SWT.NONE);
        betsWon.setLayoutData(new GridData(GridData.FILL, GridData.CENTER, true, false));
        betsWon.setLayoutData(gridData2);

    new Label(shell, SWT.NONE).setText("    Lost:  ");
        betsWon = new Text(shell, SWT.FILL);
        betsWon.setLayoutData(new GridData(GridData.FILL, GridData.CENTER, true, true));
        betsWon.setLayoutData(gridData2);   

    //Grid3
    GridData gridData3 = new GridData(GridData.CENTER, GridData.CENTER, true, false);
    gridData3.horizontalSpan = 20;

    new Label(shell, SWT.NONE).setText("Todays Lines");
        lines = new List(shell, SWT.MULTI | SWT.BORDER | SWT.V_SCROLL);
        lines.setItems(new String[] { "OKC(+2.5) - MIA(-2.5)", "DAL(+8) - BOS(-8)" });
        int listHeight = lines.getItemHeight() * 12;
        trim = lines.computeTrim(0, 0, 0, listHeight);
        gridData3.heightHint = trim.height;
        lines.setLayoutData(gridData3);

    return shell;
} 
```

}

问题是我在 //Grid3 注释下创建了一个新标签。该标签贴在它上面的行上，而不是出现在新行上。我是 SWT 的新人，所以我知道这只是我缺乏知识。我会附上一张图片，以便您查看问题。

![图片](../Images/9828620a19b039935085c4a35e4a0683.png)

您可以看到标签“Todays Lines：”不在它自己的行上。

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-25T08:34:29.347

您不止一次分配文本的布局数据，首先分配给`new GridData()`then `gridData2`。一次就够了。新标签未出现在新行上的原因是网格有 20 列，如`gridLayout.numColumns = 20;`. `gridData2`有`horizontalSpan = 5`。如果添加 3 个标签（默认跨越 1 列）和跨越 5 列的三个文本（`gridData2`按照

我建议为`GridData`文本分配单独的实例，并将跨越它们的列数划分为总计 20（例如，最后一个跨越不是 5 列而是 7 列），这样“今天的行”将被放置在下一行.

# google-app-engine - 两个用户请求修改 Google App Engine 应用程序中的同一个数据存储实体？

> ID：14028741
> 
> 赞同：2
> 
> 时间：2012-12-25T07:50:23.633
> 
> 标签：google-app-engine

这是一个好习惯吗？一位用户提出请求并从数据存储中获取实体，对其进行更改并保存。另一个用户同时对同一实体执行此操作。如果第一个用户的请求尚未完成，第二个用户会看到第一个用户的更改吗？如果我希望两个用户达成“协议”，我应该使用什么模式？第一个说“是”，然后第二个说“是”，然后交易就完成了。我必须使用来自客户端的轮询来监控它吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-25T13:59:34.563

为此，您将需要交易。

阅读此处了解更多信息和做法：[https ://developers.google.com/appengine/docs/python/datastore/overview](https://developers.google.com/appengine/docs/python/datastore/overview)

交易发生的逻辑是先提交获胜！但是可以重试...

```
@db.transactional(retries=3)
def make_agreement_for_user_a(agreement):
    agreement = Agreement.get(agreement)
    if agreement.user_a:
        return "User A has already agreed"
    agreement.user_a = TRUE
    agreement.put()
    if agreement.user_b:
        return "Agreement complete"
    return "User A agreed"

@db.transactional(retries=3)
def make_agreement_for_user_b(agreement):
    agreement = Agreement.get(agreement)
    if agreement.user_b:
        return "User B has already agreed"
    agreement.user_b = TRUE
    agreement.put()
    if agreement.user_a:
        return "Agreement complete"
    return "User B agreed" 
```

这只是一个例子，它没有优化，也没有检查是否已经有协议。剩下的由你决定

# c# - ObservableCollection 不提供向数据网格添加新行？

> ID：14028742
> 
> 赞同：1
> 
> 时间：2012-12-25T07:51:07.513
> 
> 标签：c#, wpf, observablecollection

`CollectionViewSource` 这是我的第一个WPF 应用程序，我需要一些帮助

```
ObjectQuery<ITPORTAL.HRMS_IT_ASSET_MASTER> ass = gRACHRMSEntities.HRMS_IT_ASSET_MASTER; 
```

并且分配给 CollectionViewSource.Source 的对象查询如下

```
hRMS_IT_ASSET_MASTERQuery = Load_Asset_Master_Data(gRACHRMSEntities.HRMS_IT_ASSET_MASTER);
hRMS_IT_ASSET_MASTERViewSource.Source = hRMS_IT_ASSET_MASTERQuery.Execute(System.Data.Objects.MergeOption.AppendOnly); 
```

但是这段代码不支持过滤设施，这就是为什么我要添加这样的东西

```
 private ObservableCollection<ITPORTAL.HRMS_IT_ASSET_MASTER> Load_Asset_Master_Data(System.Data.Objects.ObjectQuery<ITPORTAL.HRMS_IT_ASSET_MASTER> objectSet)
        {
            ObservableCollection<ITPORTAL.HRMS_IT_ASSET_MASTER> oc = null;
            try
            {
                var value = from Asset_Master in objectSet
                            where Asset_Master.IT_ASSET_IS_ACTIVE == "1" && Asset_Master.IT_ASSET_IS_SCRAPED == "0" && Asset_Master.IT_ASSET_IS_SCRAP_FINAL == "0"
                            select Asset_Master;
                oc = new ObservableCollection<HRMS_IT_ASSET_MASTER>(value.ToList());
            }
            catch (Exception err)
            {
                MessageBox.Show(err.Message, "IT Portal Error", MessageBoxButton.OK, MessageBoxImage.Error, MessageBoxResult.OK);
            }
            return oc;
        } 
```

并分配给 CollectionViewSource 如下

```
hRMS_IT_ASSET_MASTERViewSource.Source = Load_Asset_Master_Data(gRACHRMSEntities.HRMS_IT_ASSET_MASTER); 
```

通过这种方式，我可以进行过滤，但我失去了一个功能，因为当我填充数据网格末尾的行并按保存时，保存命令不考虑添加的行，保存命令仅对编辑操作的响应是保存事件处理程序

```
private void btnSave_Click(object sender, RoutedEventArgs e)
        {
            try
            {                                               
                if (gRACHRMSEntities.SaveChanges() > 0)
                {
                    txtblkStatus.Text = "Changes has been saved.";                
                }
            }
            catch (Exception err)
            {
                MessageBox.Show(err.Message, "Error", MessageBoxButton.OK, MessageBoxImage.Error, MessageBoxResult.OK);

        }       } 
```

我在网上查了一下，发现在使用时`ObservableCollection<T>`我必须`IEditableObject`为 T提供我自己的实现。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-25T08:22:20.347

我认为你应该写

```
hRMS_IT_ASSET_MASTERViewSource.ItemsSource =Load_Asset_Mast ... 
```

代替：

```
hRMS_IT_ASSET_MASTERViewSource.Source =Load_Asset_Mast ... 
```

我的意思是你应该设置 ItemsSource 。

# javascript - 获取源中未指定宽度和高度的图像的图像尺寸

> ID：14028745
> 
> 赞同：2
> 
> 时间：2012-12-25T07:51:30.497
> 
> 标签：javascript, jquery, ajax

我想获取在 HTML 源代码中没有指定宽度和高度标记的图像的高度和宽度。

IE

```
<img src="http://www.mysite.com/imge.jpg" id="my_img" /> 
```

我想要做的是在加载之前获取图像的宽度和高度。我正在尝试完成以下任务，如果您知道更好的解决方案，请建议我。

我想这样做是因为我想将我网站中的所有图像保持在小于或等于 600 像素。因此，如果图像的宽度 > 600 像素，我会将其缩小到 600 像素。否则我保持它的宽度不变。

我的试用：下面的代码都不适用于此任务，因为一旦加载图像，它们就会获得图像的大小；最初，它们的宽度显示为零。

```
<script type="text/javascript">
  var img = document.getElementById('my_img');
  var width = img.clientWidth;
  var height = img.clientHeight;
  alert('Width: ' + width + ' Height:' + height); // FAIL

  var timg = document.getElementById('test').width;
  alert(timg);  // FAIL too
</script> 
```

我的 HTML 代码：

```
<img src="http://www.mysite.com/imge.jpg" id="my_img" /> 
```

希望这很清楚。

谢谢你。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-25T07:58:18.497

[**jsFiddle**](http://jsfiddle.net/z6v4E/)

为什么使用 JavaScript？使用此 CSS 规则，您可以将宽度限制为`600px`：

```
#my_img { max-width:600px; } 
```

# html - 如何将页面内容设置为浏览器的中心？

> ID：14028749
> 
> 赞同：4
> 
> 时间：2012-12-25T07:52:54.590
> 
> 标签：html, css

我需要的是在浏览器的中心显示网页的内容，无论屏幕大小，大或小，分辨率高或低，它总是自动调整到浏览器的中心。提前致谢

我的 Html 和 css 代码如下

HTML 代码

```
<!DOCTYPE html>
<html>
    <head>
        <link type="text/css" rel="stylesheet" href="basic1.css"/>
    </head>
<body>

    <div id="menu">
        <a href = "#"><img class="imgc" src="img.png" alt="icon"/></a>
        <a href = "#"><img class="imgd" src="do.png" alt="do"/></a>
    </div>
        <div id="smenu"></div>
    <div id="mainbox">
        <div class="ibox"></div>
    </div>
    <div id="menutext">
    <ul>
        <li><a href="#"><b>???????</b></a></li>
            <li><a href="#"><b>?????</b></a></li>
        <li><a href="#"><b>?????</b></a></li>
        </ul>
    </div>
    <div id="py">
        <pre class="p">??<span style="color:black;font-size:25px">??????</span></pre>
        <pre class="s">?? ???? ??? ??? <span style="color:#980000;
        letter-spacing :+1mm"><b>:3</b></span></pre>
    </div>

    </body>
    </html> 
```

CSS

```
#menu img.imgc {
position:absolute;
right:77%;
top:10px;
margin:0px auto;
}
#menu img.imgd {
position:absolute;
left:75%;
top:10px;
margin:0px auto;
}
#menu {
position:absolute;
left:0%;
top:0%;
right:0%;
right:0%;
width:100%;
height:125px;
border-bottom:1px solid #C8C8C8;
margin:0px auto;
background-color:#E8E8E8; 
}
#mainbox div.ibox{
position:absolute;
left:31%;
top:20px;
border-left:3px solid gray;
height:105px; 
margin:0px auto;
}
#menutext ul{
position:absolute;
right:72%;
top:15px;
list-style: none;
line-height:30px;
margin:0px auto;
}
#menutext a{
font-size:12px;
font-variant:small-caps;
font-family:Lucida,Helvetica,sans-serif;
font-weight:500; 
color:black;
text-decoration: none;
text-align: left;
}
#py pre.p{
position:absolute;
top:15px;
left:33%;
font-family:Tahoma, Geneva, sans-serif;
letter-spacing : +2mm;
font-size:50px;  
color:#009933;
text-decoration: none;
text-align: center;
margin:0px auto;
}
#py pre.s{
position:absolute;
top:67px;
left:33%;
font-family:Tahoma, Geneva, sans-serif;
letter-spacing : +3mm;
font-size:12px;  
color:gray;
text-decoration: none;
text-align: center;
margin:0px auto;
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-25T07:59:19.530

将所有内容放在一个 div 中，将其类设置为`container`：

```
<div class="container">
   ...
</div> 
```

然后使用 css 将其边距设置为自动：

```
.container{
    margin:0px auto;
    width: 600px; 
} 
```

看看[这个jsfiddle](http://jsfiddle.net/wm9sx/2/)

**编辑**

检查[这个新的小提琴](http://jsfiddle.net/wm9sx/7/)，`menu`css不需要你写的所有东西，应该是这样的：

```
#menu {
height:125px;
border-bottom:1px solid #C8C8C8;
margin:0px auto;
background-color:#E8E8E8; 
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-25T07:55:45.553

将所有页面内容放在一个包装器 div 中，然后给它一些相对宽度（例如 50%）和自动水平边距。

```
<div id="wrapper">
   <!-- CONTENT GOES HERE -->
</div> 
```

CSS（50% 页面宽度，零上/下边距）：

```
#wrapper {
    width: 50%;
    margin: 0 auto;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-25T07:55:33.127

在您的所有内容周围放置另一个 div（因此从您的正文开始标记之后和正文结束标记之前）。称它为`<div class="container">`

将以下样式设置为该 div：

```
width: 1000px;
margin: auto; 
```

这应该使您的内容居中。

您可以根据需要更改宽度。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-25T08:09:33.007

你可以使用fundation3的网格：http: [//foundation.zurb.com/docs/grid.php](http://foundation.zurb.com/docs/grid.php)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-10-22T12:11:10.740

**工作解决方案。**

```
<html>
          <head>
            <style type="text/css">
                html
                {
                    width: 100%;
                    height: 100%;
                }

                body
                {
                    display: flex;
                    justify-content: center;
                    align-items: center;
                }
            </style>
        </head>

        <body>
            This is text!
        </body>
</html> 
```

# .htaccess - Codeigniter 子文件夹

> ID：14028759
> 
> 赞同：2
> 
> 时间：2012-12-25T07:54:56.043
> 
> 标签：.htaccess, codeigniter, subdirectory

我的网站上有一个 CodeIgniter 说 abc.com 。我已将全部内容复制到同一站点的子文件夹中，例如 abc.com/test 。但我无法使用 abc.com/test 访问该站点。谁能在这方面帮助我

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-25T10:23:58.703

根 htaccess

```
RewriteEngine on 
RewriteBase / 
RewriteCond $1 !^(index\.php|lib|robots\.txt|test) 
RewriteRule ^(.*)$ index.php/$1 [L] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-25T16:42:08.000

在一切之前，您应该检查您是否在配置文件中更改了 codeginiter 基本 url。您的新基本网址类似于[http://abc.com/test/](http://abc.com/test/) 并记住在 test/ 后添加斜杠

# flash - 无法将 Photoshop 工作路径导入到 Flash

> ID：14028761
> 
> 赞同：2
> 
> 时间：2012-12-25T07:54:57.103
> 
> 标签：flash, import, path, photoshop

我尝试将 Photoshop 工作路径导出为 File->Export->Paths to Illustrator，然后导入到 Flash 场景，Stage 和 Library 都没有给出任何结果。在 Flash 的导入对话框中，路径被视为“复合路径”。但是当我在对话框中说好的时，我在图书馆或舞台上都没有看到矢量图。

为了检查文件，我在 Illustrator 中打开了导出的文件。当我打开文件时，我无法直接看到路径，它也像空白画板一样显示我，但是当将鼠标悬停在画板上时，我可以选择路径（我不使用太多，也许这就是 Ai 的方式。）

我应该在导入之前以某种方式在 PS/AI 中配置路径/文件吗？还是有什么其他方式？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-25T11:44:53.537

我自己不得不这样做几次，这有点奇怪。我所做的是在 illustrator 中打开从 photoshop 导出的文件，然后给路径一个描边颜色。然后重新保存（它可能会提示您以不同/更新的ai文件格式保存），然后您可以将其导入flash。

# android - Android play 商店评论通知

> ID：14028762
> 
> 赞同：21
> 
> 时间：2012-12-25T07:55:01.597
> 
> 标签：android, google-play

是否有服务会在用户对我的应用发表符合预定义标准（例如一星评级）的评论时通知我？

谷歌没有带来任何结果。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2016-08-04T08:04:44.863

对于所有仍在寻找答案的人。现在有这样的选择。在您的 google play 开发者控制台中，转到“设置”->“电子邮件通知”

直接链接在[这里](https://support.google.com/googleplay/android-developer/answer/138230?hl=en)。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-12-26T04:17:12.093

目前没有官方 API。但是，如果您使用 Andlytics 应用程序，您可以在设备上收到有关评分和下载次数变化的通知：https: [//play.google.com/store/apps/details?](https://play.google.com/store/apps/details?id=com.github.andlyticsproject) id=com.github.andlyticsproject （开源，可用在 GitHub 上）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-25T08:09:15.143

**不，Google 不提供任何此类服务。**

**编辑**

*我认为当有人对应用程序发表评论或评论时，Google 会向您发送邮件。不管怎样，那我错了。*

# javascript - 无法在 javascript 中选择表 ID

> ID：14028772
> 
> 赞同：2
> 
> 时间：2012-12-25T07:56:45.017
> 
> 标签：javascript, c#-4.0, asp.net-4.0

> **可能重复：**
> [为什么 jQuery 或诸如 `getElementByID` 之类的 DOM 方法找不到元素？](https://stackoverflow.com/questions/14028959/why-does-jquery-or-a-dom-method-such-as-getelementbyid-not-find-the-element)

为这个愚蠢的问题道歉，但我没有得到我想要的。我正在使用以下代码来更改表格的可见性。

```
<script type="text/javascript"> 
   document.getElementById('<%= tblEnablePreferredZerker.ClientID %>').style.display = "none";
</script>
<table class="style1" id="tblEnablePreferredZerker" >
   <tr></tr>
</table> 
```

有什么错误吗？或任何其他方法来做到这一点？或者使用 jQuery 可以轻松实现吗？谢谢，

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-25T07:58:02.833

您正在尝试使用服务器不可访问的 ClientID 访问此表的 ID，您需要在表标记中添加 runat="server"。

```
<table class="style1" id="tblEnablePreferredZerker" runat="server">
   <tr></tr>
</table> 
```

你是`trying to access the element that is not yet available`。将您的脚本放在您尝试访问的表格之后或之前，`closing body tag`以便您在使用之前准备好每个 html 元素。[`document.ready`](http://api.jquery.com/ready/)如果要放置在 html 元素之前，也可以使用jquery 事件。

将脚本放在要访问的元素下方。

```
<table class="style1" id="tblEnablePreferredZerker" >
   <tr></tr>
</table>

<script type="text/javascript"> 
   document.getElementById('<%= tblEnablePreferredZerker.ClientID %>').style.display = "none";
</script> 
```

在关闭body标签之前放置脚本

```
<!-- your thml -->

<script type="text/javascript"> 
   document.getElementById('<%= tblEnablePreferredZerker.ClientID %>').style.display = "none";
</script>
</body> 
```

使用 jQuery[文档.ready](http://api.jquery.com/ready/)

```
<script type="text/javascript"> 
  $(document).ready(function() {
      document.getElementById('<%= tblEnablePreferredZerker.ClientID %>').style.display =  "none";
   });       
</script> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-25T07:58:39.590

附上您的脚本，`$(document).ready()`因为脚本运行时该元素不存在。& 一定要包括 jQuery。

```
<script type="text/javascript"> 
   $(document).ready(function() {
    $('#<%= tblEnablePreferredZerker.ClientID %>').hide();
   });
</script>
<table class="style1" id="tblEnablePreferredZerker" >
   <tr></tr>
</table> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-25T08:01:19.520

你已经标记了 jQuery，所以你不妨使用它。

你可以`$(document).ready()`这样使用：

```
/* load jQuery first! */
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>

<script type="text/javascript"> 
    $(document).ready(function() {
        document.getElementById('<%= tblEnablePreferredZerker.ClientID %>').style.display = "none";
    });
</script> 
```

仅当加载此文档中的所有元素时才会触发。

# javascript - Javascript: execCommand("removeformat") 不会去除 h2 标签

> ID：14028773
> 
> 赞同：7
> 
> 时间：2012-12-25T07:56:55.017
> 
> 标签：javascript

我正在调整一个所见即所得的编辑器，并且我正在尝试创建一个图标，该图标将删除`h2`.

在以前的版本中，以下命令完美运行：

```
oRTE.document.execCommand("removeformat", false, ""); 
```

但是在当前版本中，尽管该命令成功地从选定文本中删除了诸如粗体、下划线、斜体等标签，但它仍然保持`h2`标签完好无损。

（有趣的是，`execCommand("formatblock"...)`成功创建了`h2`标签。）

我在想我将不得不放弃`execCommand`并寻找另一种方式，但我也认为这不仅仅是一行代码！将不胜感激的建议。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-11-09T01:35:08.710

您可以将格式更改为 div，这不是最好的解决方案，但它可以工作并且很短：

```
document.execCommand('formatBlock', false, 'div') 
```

还有其他解决方案可以从选定的文本中获取最近的父级，然后您可以将其展开，请注意，这可以是诸如 <b> 之类的标记：

```
var container = null;
if (document.selection) //for IE
    container = document.selection.createRange().parentElement();
else {
    var select = window.getSelection();
    if (select.rangeCount > 0)
        container = select.getRangeAt(0).startContainer.parentNode;
}
$(container).contents().unwrap(); //for jQuery1.4+ 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-25T08:19:45.687

这与提议的[W3C 编辑 API](http://dvcs.w3.org/hg/editing/raw-file/tip/editing.html#the-removeformat-command)一致。它有一个格式化元素列表，并且`H#`没有列出这些元素。这些被认为是结构性的，而不仅仅是格式化。`UL`删除这些标签比删除or没有任何意义`P`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-05-14T03:06:19.487

我认为您可以使用**Range**对象。您可以从 Professional JavaScript for Web Developers 3rd Edition 中找到它。第 12 章（12.4）和第 14 章（14.5）...

那本书的一个例子：

```
var selection = frames["richedit"].getSelection();

var selectedText = selection.toString();

var range = selection.getRangeAt(0);

var span = frames["richedit"].document.createElement("span");
span.style.backgroundColor = "yellow";
range.surroundContents(span); 
```

# python - Flask：根据 Content-Type 标头获取请求参数

> ID：14028775
> 
> 赞同：3
> 
> 时间：2012-12-25T07:57:00.070
> 
> 标签：python, rest, flask

根据请求的标头处理请求正文的正确方法是什么`Content-Type`？

我需要实现一个支持 XML、JSON 和表单编码请求参数的 RESTful 服务，但我似乎找不到提取请求参数的干净方法。

这是我应该使用中间件的东西吗？我需要扩展 Request 对象吗？

我还没有找到任何可以做到这一点的包，这似乎是在烧瓶中创建 RESTful 服务的一项非常常见的任务。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-25T10:15:20.623

您可能指的是 Accept 标头，因为 Content-Type 用于响应。这里有三个选择：

1.  [按照处理接受标头](http://flask.pocoo.org/snippets/45/)片段中的描述自行构建。
2.  使用 Flask-RESTful 扩展（请参阅文档中的[内容协商](http://flask-restful.readthedocs.org/en/latest/extending.html#content-negotiation)部分）。
3.  使用专门为处理这种情况而构建的[Flask-Pushrod扩展。](http://flask-pushrod.readthedocs.org/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-28T00:59:09.860

您可以按照[此处](http://flask.pocoo.org/docs/patterns/sqlite3/)`@app.before_request`的说明使用。一旦你完成了对请求参数的规范化，你可以[将它们保存到](http://flask.pocoo.org/docs/api/#flask.g)，如下所示：[`g`](http://flask.pocoo.org/docs/api/#flask.g)

```
from flask import g
from flask import request
...

@app.before_request
def before_request():
    # normalize params based on Content-Type
    g.params = normalized_params 
```

# actionscript-3 - 使用皮肤更改 Flex 按钮图标 Alpha

> ID：14028778
> 
> 赞同：0
> 
> 时间：2012-12-25T07:57:20.077
> 
> 标签：actionscript-3, apache-flex, button, icons, skin

我有火花按钮的自定义皮肤。

我需要使用皮肤控制我设置为按钮图标的图像的 alpha。即我需要图像随着按钮状态的变化而改变其不透明度。

是否有解决方法，使用皮肤类，而不是编写事件处理程序？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-25T08:36:13.907

当您创建新的按钮皮肤时，您可以在那里看到生成的 mxml 标记，它根据状态为矩形设置不同的渐变。

因此，您可以为图像中的不同状态设置 alpha 值，例如

`<s:Image alpha.disabled="0.1" alpha.over="0.4" />`等等。

**更新：**

现在我明白你的问题了。图标（由`icon`属性设置）由 中的代码定义和管理`spark.skins.SparkButtonSkin`，您生成的皮肤将扩展该类。

呈现图标的控件 ID 的`iconDisplay`类型为`BitmapImage`。

因此，您可以通过在生成的皮肤中添加以下代码来更改其行为：

```
 <s:BitmapImage id="iconDisplay"
                   alpha.down="0.5"
                   alpha.over="0.7"
                   alpha.up="0"
                   /> 
```

它不会添加另一个图标。

# google-drive-api - 存储 Google Drive 登录凭据的选项有哪些？本地以及服务器端

> ID：14028782
> 
> 赞同：1
> 
> 时间：2012-12-25T07:58:07.780
> 
> 标签：google-drive-api

我阅读了关于授权请求的 Google Drive API 文档，但老实说我很困惑。我想要做的就是定期下载文件，修改它并再次将其上传到 Google Drive。执行此操作的我的应用程序每周作为 cron 作业运行。所以这一切都必须无人看管。

如何自动登录我的 Google Drive 帐户并访问我的文件？

我尝试了 Quickstart python 脚本，但它提示我转到 URL 并复制代码并将其粘贴到 CLI 上。这需要人工干预，我想规避这一点。

谢谢。-乌特帕尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-25T08:13:42.837

您可以在首次启动身份验证后将凭据数据存储在本地，稍后从凭据数据中读取以进行身份​​验证。这是使用 python SDK 的示例代码。

```
 # get credential
    client_id     = YOUR_CLIENT_ID
    client_secret = YOUR_CLIENT_SECRET
    flow = oauth2client.client.OAuth2WebServerFlow(client_id, \
           client_secret, GOOGLE_DRIVE_SCOPE)

    # try get credential from credential file
    storage    = oauth2client.file.Storage(cred_file)
    credential = storage.get()

    # no credential file exists
    if credential is None or credential.invalid:
        credential = oauth2client.tools.run(flow, storage) 
```

我从来没有玩过原始的 HTTP 请求，所以如果这不是你想要的，你可以自己下载并破解 google API python SDK。

# c++ - 使用 BitBlt 进行 C++ 绘图

> ID：14028789
> 
> 赞同：2
> 
> 时间：2012-12-25T07:59:00.807
> 
> 标签：c++, winapi, bitmap, draw

我有一个我正在开发的游戏的功能：

```
void DrawMap()
{
BITMAP bm;
PAINTSTRUCT ps;
HBITMAP sprites = LoadBitmap(hInst, MAKEINTRESOURCE(IDB_COLOR_SPRITES));
HDC hdc = BeginPaint(hWnd, &ps);
HDC hdcMem = CreateCompatibleDC(hdc);
HBITMAP hbmOld = (HBITMAP)SelectObject(hdcMem, sprites);
GetObject(sprites, sizeof(bm), &bm);

// Find x and y coordinate for the top left of the visible screen
int x = 4, y = 4, ypos = 0;

// Draw lower layer
for (int i = 0; i < 9; i++)
    for (int j = 0; j < 9; j++)
        BitBlt(hdc, (i * 32) + 36, (j * 32) + 36, 32, 32, hdcMem, game.get_pos(game.Layer_One[x + i][y + j], ypos), ypos, SRCCOPY);

// Draw upper layer
for (int i = 0; i < 9; i++)
    for (int j = 0; j < 9; j++)
        if (game.Layer_One[x + i][y + j] != 0)
            BitBlt(hdc, (i * 32) + 36, (j * 32) + 36, 32, 32, hdcMem, game.get_pos(game.Layer_One[x + i][y + j], ypos, true), ypos, SRCCOPY);

SelectObject(hdcMem, hbmOld);
DeleteDC(hdcMem);
EndPaint(hWnd, &ps);
} 
```

变量“游戏”是我为保存所有游戏变量和函数而创建的一个类的实例。基本上，这两个分组的 for 循环应该做的是创建一个由 32 x 32 像素瓦片组成的双层 9 x 9 网格，这些瓦片是从将所有瓦片放在一个位置的图像中复制而来的。我已经测试了我的 get_pos() 函数，它为完整精灵位图中的部分位图返回正确的 x 和 y 位置。
get_pos() 的第二个参数是通过引用 - 因此它可以以这种方式给出 y 值并返回 x 值。出于某种原因，我的函数，虽然对我来说似乎正确设置（并且肯定被调用）并没有在 hWnd 上产生任何绘图。我做错了什么？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-12-25T10:42:00.783

它不会直接回答您的问题，但如果您不需要与非常旧的 Windows 版本兼容，为什么不使用 Direct2D？GDI 已被弃用（更不用说速度慢了）。

# c# - 什么程序或进程正在使用 C# 中的特定串行端口

> ID：14028790
> 
> 赞同：1
> 
> 时间：2012-12-25T07:59:02.833
> 
> 标签：c#, .net, serial-port

当我尝试在我的 C# 程序中使用 com 端口时，有时该端口已打开并被另一个程序使用。我想具体一点并生成这样的警告消息：

"`COM1`端口被其他名为 的程序使用`SomeApplication`。您是否要关闭该程序（请注意，您可能会丢失数据或其他后果）？"`-Yes` `-No`

如何在 C# 中实现这个场景？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-25T15:21:37.727

这在 Windows 上不受支持，它需要遍历只能在内核代码中访问的未记录内核结构。隐藏此信息是非常有目的的，它会阻止程序完全按照您的计划执行，终止进程以获取资源。通常是针对试图利用句柄回收攻击的恶意软件的对策。

您的用户可以使用 SysInternals 的 Handle 实用程序来查找该进程，假设他不知道哪个应该是罕见的。执行 Handle.exe 在 C# 代码中所做的事情是一个非常漫长的过程，您永远不应该承诺。它动态安装设备驱动程序，因此它可以获得 ring 0 访问内核数据的权限。并且内核结构在 Windows 版本之间发生了变化，并且在未来的版本中可能会再次发生变化。

# excel - 将字符串引用转换为变量名

> ID：14028791
> 
> 赞同：1
> 
> 时间：2012-12-25T07:59:05.860
> 
> 标签：excel, vba

我正在尝试对输出变量进行软编码，这样我就不必每次需要修改输出时都修改 VBA 代码。

**这是有效的代码**

```
Sub Working()
    Dim cat(1 To 10)
    Dim bat(1 To 10)

    For i = 1 To 10
        cat(i) = i * 10
        bat(i) = i * 5
    Next i

    Sheet2.Range("A2:A11") = Application.Transpose(cat())
    Sheet2.Range("B2:B11") = Application.Transpose(bat())
End Sub 
```

**这是我想写的理想方式，但不起作用**

```
Sub not_working()
    Dim cat(1 To 10)
    Dim bat(1 To 10)

    For i = 1 To 10
        cat(i) = i * 10
        bat(i) = i * 5
    Next i

    a = 3
    Do While Sheet1.Cells(a, 1) <> ""
        OutVar = Sheet1.cells(a, 1) & "()" 
        Sheet3.Range( _
            Cells(2, a - 2).Address, Cells(11, a - 2).Address _
        ) = Application.Transpose(Outvar)
        a = a + 1
    Loop
End Sub

' Sheet1.cells(3,1) = cat - these cells contain the variable names
' Sheet1.cells(4,1) = bat - these cells contain the variable names 
```

有人可以建议是否可以这样做？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-12-27T19:59:31.757

如果我正确理解您的要求，一个参差不齐的数组将满足它。

如果您有一个 Variant 类型的变量，您可以将该变量设置为例如整数、实数、字符串、布尔值或数组。

如果您有一个 Variant 类型的数组，则可以将该数组的每个元素设置为不同类型的值。

在下面的代码中，我有变体数组 Main。我设置：

*   Main(0) 到一维数组，
*   Main(1) 到更大的一维数组，
*   Main(2) 到二维数组，
*   Main(3) 转换为单个整数，
*   Main(4) 到工作表的使用范围。

这被称为不规则数组，因为每个元素的大小不同。

用值加载数组后，我使用通用例程根据其性质输出 Main 的每个元素。

您的 200-300 个变量中的每一个都将成为 Main 的一个元素。

看看我的代码。这只是对变体数组可以实现的功能的简要介绍。如果您认为我正朝着正确的方向前进但还不够远，请回来提出问题。

```
Option Explicit
Sub DemoRaggedArray()

  Dim InxDim As Long
  Dim InxMain As Long
  Dim InxWCol As Long
  Dim InxWRow As Long
  Dim Main() As Variant
  Dim NumOfDim As Long
  Dim Work() As Variant

  ReDim Main(0 To 5)

  Work = Array(1, "A", True)

  Main(0) = Work

  Main(1) = Array(2, "B", False, 1.2)

  ReDim Work(1 To 2, 1 To 3)

  Work(1, 1) = 1
  Work(1, 2) = 2.5
  Work(1, 3) = DateSerial(2012, 12, 27)
  Work(2, 1) = True
  Work(2, 2) = "String"

  Main(2) = Work

  Main(3) = 27

  ' Cells A1:C4 of the worksheet have been set to their addresses
  Main(4) = WorksheetFunction.Transpose(Worksheets("Sheet2").UsedRange.Value)

  For InxMain = LBound(Main) To UBound(Main)
    Debug.Print "Type of Main(" & InxMain & ") is " & VarTypeName(Main(InxMain))
    Select Case VarType(Main(InxMain))
      Case vbEmpty, vbNull
        ' No value
      Case Is >= vbArray
        ' Array
        NumOfDim = NumDim(Main(InxMain))
        Debug.Print "  Main(" & InxMain & ") is dimensioned as: (";
        For InxDim = 1 To NumOfDim
          Debug.Print LBound(Main(InxMain), InxDim) & " To " & _
                                                  UBound(Main(InxMain), InxDim);
          If InxDim < NumOfDim Then
            Debug.Print ", ";
          End If
        Next
        Debug.Print ")"
        Select Case NumOfDim
          Case 1
            For InxWCol = LBound(Main(InxMain)) To UBound(Main(InxMain))
              Debug.Print "  (" & InxWCol & ")[" & _
                                        VarTypeName(Main(InxMain)(InxWCol)) & "]";
              Select Case VarType(Main(InxMain)(InxWCol))
                Case vbEmpty, vbNull, vbArray
                  ' No code to handle these types
                Case Else
                  Debug.Print "=" & Main(InxMain)(InxWCol);
              End Select
            Next
            Debug.Print
          Case 2
            For InxWRow = LBound(Main(InxMain), 2) To UBound(Main(InxMain), 2)
              For InxWCol = LBound(Main(InxMain), 1) To UBound(Main(InxMain), 1)

                Debug.Print "  (" & InxWCol & "," & InxWRow & ")[" & _
                             VarTypeName(Main(InxMain)(InxWCol, InxWRow)) & "]";
                Select Case VarType(Main(InxMain)(InxWCol, InxWRow))
                  Case vbEmpty, vbNull, vbArray
                    ' No code to handle these types
                  Case Else
                    Debug.Print "=" & Main(InxMain)(InxWCol, InxWRow);
                End Select
              Next
              Debug.Print
            Next
          Case Else
            Debug.Print "  There is no display code for this number of dimensions"
        End Select
      Case Else
        ' Single variable
        Debug.Print "  Value = " & Main(InxMain)
    End Select
  Next

End Sub
Public Function NumDim(ParamArray TestArray() As Variant) As Integer

  ' Returns the number of dimensions of TestArray.

  ' If there is an official way of determining the number of dimensions, I cannot find it.

  ' This routine tests for dimension 1, 2, 3 and so on until it get a failure.
  ' By trapping that failure it can determine the last test that did not fail.

  ' Coded June 2010\. Documentation added July 2010.

  ' *  TestArray() is a ParamArray because it allows the passing of arrays of any type.
  ' *  The array to be tested in not TestArray but TestArray(LBound(TestArray)).
  ' *  The routine does not validate that TestArray(LBound(TestArray)) is an array.  If
  '    it is not an array, the routine return 0.
  ' *  The routine does not check for more than one parameter.  If the call was
  '    NumDim(MyArray1, MyArray2), it would ignore MyArray2.

  Dim TestDim                   As Integer
  Dim TestResult                As Integer

  On Error GoTo Finish

  TestDim = 1
  Do While True
    TestResult = LBound(TestArray(LBound(TestArray)), TestDim)
    TestDim = TestDim + 1
  Loop

Finish:

  NumDim = TestDim - 1

End Function
Function VarTypeName(Var As Variant)

  Dim Name As String
  Dim TypeOfVar As Long

  TypeOfVar = VarType(Var)

  If TypeOfVar >= vbArray Then
    Name = "Array of type "
    TypeOfVar = TypeOfVar - vbArray
  Else
    Name = ""
  End If

  Select Case TypeOfVar
    Case vbEmpty
      Name = Name & "Uninitialised"
    Case vbNull
      Name = Name & "Contains no valid data"
    Case vbInteger
      Name = Name & "Integer"
    Case vbLong
      Name = Name & "Long integer"
    Case vbSingle
      Name = Name & "Single-precision floating-point number"
    Case vbDouble
      Name = Name & "Double-precision floating-point number"
    Case vbCurrency
      Name = Name & "Currency"
    Case vbDate
      Name = Name & "Date"
    Case vbString
      Name = Name & "String"
    Case vbObject
      Name = Name & "Object"
    Case vbError
      Name = Name & "Error"
    Case vbBoolean
      Name = Name & "Boolean"
    Case vbVariant
      Name = Name & "Variant"
    Case vbDataObject
      Name = Name & "Data access object"
    Case vbDecimal
      Name = Name & "Decimal"
    Case vbByte
      Name = Name & "Byte"
    Case vbUserDefinedType
      Name = Name & "Variants that contain user-defined types"
    Case Else
      Name = Name & "Unknown type " & TypeOfVar
  End Select

  VarTypeName = Name

End Function 
```

*DemoRaggedArray*的输出

 *```
Type of Main(0) is Array of type Variant
  Main(0) is dimensioned as: (0 To 2)
  (0)[Integer]=1  (1)[String]=A  (2)[Boolean]=True
Type of Main(1) is Array of type Variant
  Main(1) is dimensioned as: (0 To 3)
  (0)[Integer]=2  (1)[String]=B  (2)[Boolean]=False  (3)[Double-precision floating-point number]=1.2
Type of Main(2) is Array of type Variant
  Main(2) is dimensioned as: (1 To 2, 1 To 3)
  (1,1)[Integer]=1  (2,1)[Boolean]=True
  (1,2)[Double-precision floating-point number]=2.5  (2,2)[String]=String
  (1,3)[Date]=27/12/2012  (2,3)[Uninitialised]
Type of Main(3) is Integer
  Value = 27
Type of Main(4) is Array of type Variant
  Main(4) is dimensioned as: (1 To 3, 1 To 4)
  (1,1)[String]=A1  (2,1)[String]=B1  (3,1)[String]=C1
  (1,2)[String]=A2  (2,2)[String]=B2  (3,2)[String]=C2
  (1,3)[String]=A3  (2,3)[String]=B3  (3,3)[String]=C3
  (1,4)[String]=A4  (2,4)[String]=B4  (3,4)[String]=C4
Type of Main(5) is Uninitialised 
```

请注意，日期显示为“27/12/2012”，因为这是我所在国家/地区的默认日期格式。如果您运行此代码，它将以您所在国家/地区的默认格式显示。*

# php - PHP5 - PHP.ini 导致无法访问 Fwrite？

> ID：14028792
> 
> 赞同：0
> 
> 时间：2012-12-25T07:59:14.863
> 
> 标签：php, apache, centos

我最近设置了我的第一个 VPS，并完全自行配置了 PHP、Apache 和所有这些好东西，但是当我尝试导入其中一个处理 fwrite 的项目时，当我尝试执行 fwrite 时，它​​不会抛出错误，但它不写。到目前为止，我唯一尝试过的是 chmod 777 项目的文件夹主文件夹。这并没有解决问题。php.ini 默认设置中是否有任何内容禁止 fwrite？我能够很好地打开和阅读。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T18:59:48.967

试着把它放在你的 PHP 页面的顶部。

```
error_reporting(E_ALL);
ini_set('display_errors', '1'); 
```

您很可能会发现您收到了一条权限被拒绝的消息。如果没有，请在此处发布消息（如果 OP 还在）。

一个快速修复，也许不是最安全的选择，可能是通过 SSH 以超级用户身份登录，运行`chmod -R 0777 [home directory]`

对于 [主目录]，只需放置提供文件的基本文件夹（www、home、public_html 等）。

如果您发现这可行，我强烈建议您缩小权限；至少跌至0755。

当您以前的 chmod 没有时，这可能会起作用的原因是您正在尝试从 SU 与普通用户。在我的安装中，以 root 身份登录并没有授予我正确执行 chmod 所需的权限，但在执行`sudo su`. 去搞清楚...

# c# - 将文本绑定到我的文本块不起作用

> ID：14028795
> 
> 赞同：1
> 
> 时间：2012-12-25T07:59:28.847
> 
> 标签：c#, wpf, data-binding, binding

这是xml：

```
<TextBlock Text="{Binding Errors}" Grid.Row="3" Foreground="Red"/> 
```

这是 ViewModel 代码：

```
 private string _errors = "";
 public string Errors
    {
        get { return this._errors; }
        set
        {
            if(_errors != value)
            {
                _errors = value;
                RaisePropertyChanged(() => Errors);
            }
        }
    } 
```

然后在一些函数中我改变了`_errors`变量

```
 _errors = "Compiler Errors :\r\n"; 
```

但是在 TextBlock 中什么也没有发生。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-25T08:03:04.077

您正在`_errors`直接设置变量 - 所以不会`RaisePropertyChanged`被解雇。尝试通过设置值

```
Errors = = "Compiler Errors :\r\n"; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-25T08:30:14.033

```
private string _errors = "";
public string Errors
{
    get { return this._errors; }
    set
    {
        if(_errors != value)
        {
            _errors = value;
            RaisePropertyChanged("Errors");
        }
    }
} 
```

像这样设置它：

```
Errors = "..." 
```

我不知道 RaisePropertyChanged 方法是如何工作的，但是如果执行 lambda 表达式 ()=>Errors，它将返回 _errors 中包含的字符串，而不是更改的属性的名称？因此，如果方法存在，请尝试直接给出属性的名称。

# mapreduce - 将 Hive 中的一组行“减少”为另一组行

> ID：14028796
> 
> 赞同：0
> 
> 时间：2012-12-25T07:59:34.457
> 
> 标签：mapreduce, hive, hiveql

我正在使用 Hive 对我的空间数据库进行批处理。我的跟踪表如下所示：

```
object | lat  | long  | timestamp

1      | X11  | X12   | T11

1      | X21  | X22   | T12

2      | X11  | X12   | T21

1      | X31  | X22   | T13

2      | X21  | X22   | T22 
```

我想将每个对象的每个纬度映射到一个数字（例如考虑映射匹配），但该算法需要考虑多个相邻数据点才能获得结果。例如，我需要对象 1 的所有 3 个数据点将这 3 个数据点中的每一个映射到一个数字。无法一一处理。

我正在考虑使用带有变换的 hive 使用 map-reduce，但我不知道该怎么做。有人可以帮我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-27T20:18:02.890

您可以在 Hive 中使用自定义地图缩减功能。

具有以下内容：

```
add file /some/path/identity.pl;
add file /some/path/collect.pl;

from (
  from trace_input
  MAP id, lat, lon, ts
  USING './identity.pl'
  as id, lat, lon, ts
 CLUSTER BY id) map_output
REDUCE id, lat, lon, ts
USING './collect.pl' as id, list 
```

**trace_input**包含您的跟踪数据，如上所述：

```
create table trace_input(id string, lat string, lon string, ts string)
row format delimited
fields terminated by '\t'
stored as textfile ; 
```

**identity.pl**是一个简单的脚本，用于转储每一行（也可以是一个仅选择 lat、long 字段的脚本）：

```
#!/usr/bin/perl
while (<STDIN>) {
    print;
} 
```

**collect.pl （**[此处](https://gist.github.com/libjack/5591845)为示例）是一个简单的脚本，它收集具有相同对象 id 的连续行，保存每行的其余部分，并转储出具有 id 和逗号分隔列表（制表符分隔符）的行。

**cluster by**子句将确保 reducer 获得收集脚本所需的正确排序的输入。

用户脚本的输出是制表符分隔的*STRING*列。

运行查询，将产生以下输出：

```
1       X11,X12,T11,X21,X22,T12,X31,X22,T13
2       X11,X12,T21,X21,X22,T22 
```

您可以修改 map 脚本以限制列，和/或修改 reduce 脚本以添加结果或将 lat、lon 与 ts 等分开。

如果这种形式足够了，您可以通过在 reduce 之前添加*插入来直接插入结果表：*

```
from (
  from trace_input
  MAP id, lat, lon, ts
  USING './identity.pl'
  as id, lat, lon, ts
 CLUSTER BY id) map_output
INSERT overwrite table trace_res
REDUCE id, lat, lon, ts
USING './collect.pl'; 
```

这些字段将根据需要从字符串字段转换以匹配 trace_res 的架构。

如果您像我一样使用集合类型，您还可以执行以下操作：

```
create table trace_res as
select sq.id, split(sq.list,",") from
(
from (
  from trace_input
  MAP id, lat, lon, ts
  USING './identity.pl'
  as id, lat, lon, ts
 CLUSTER BY id) map_output
REDUCE id, lat, lon, ts
USING './collect.pl' as (id int, list string)
) sq; 
```

创建表中的第二个字段将是所有 lat、lon、ts 的列表；但可能会有比这更复杂的表。

# python - 在 Django 登录中检索自定义 SQL 条目

> ID：14028797
> 
> 赞同：2
> 
> 时间：2012-12-25T08:00:06.017
> 
> 标签：python, sql, django, django-models, django-views

这是我的应用程序`models.py`文件`auth`：[在中创建`auth_article`表`sql`]

```
from django.db import models
class Article(models.Model):
    title=models.TextField()
    content=models.TextField() 
```

但是，我无法在登录时检索`auth_article`字段。`sql`我正在使用`User`模型进行登录。

```
from django.shortcuts import render_to_response
from django.contrib.auth import authenticate, login
from django.contrib.auth.models import User
from auth.models import Article

def login_user(request):
    state = "Please login below..."
    username = password = ''
    if request.POST:
        username = request.POST['username']
        password = request.POST['password']

        user = authenticate(username=username, password=password)
        if user is not None:
            if user.is_active:
                login(request, user)
                state = "You're successfully logged in!"
                user_info = dict(username=username, email=user.email, fullname=user.get_full_name(), id=user.id)
                aa=Article.objects.all()
                return render_to_response('home.html', aa)
...
... 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-25T08:08:14.347

查看 render_to_response 文档[https://docs.djangoproject.com/en/dev/topics/http/shortcuts/#render-to-response](https://docs.djangoproject.com/en/dev/topics/http/shortcuts/#render-to-response)

它应该是这样的：

```
return render_to_response('home.html', {'articles': aa}, RequestContext(request)) 
```

# php - 出现解析错误：语法错误，PHP 中出现意外的 $end

> ID：14028798
> 
> 赞同：2
> 
> 时间：2012-12-25T08:00:08.153
> 
> 标签：php, mysql, joomla

我收到以下错误：

```
 Parse error: syntax error,
 unexpected $end in /var/www/html/joomla/components/com_jtagmembersdirectory/views/memberdetails/tmpl/default.php 
on line 147 
```

可能的解决方案是什么，我搜索了很多帖子，我确实使用了`<?php ?>` 没有开括号和右括号问题，也没有引用问题。

还有什么可能导致这个问题的吗？

我的代码如下所示，

```
 <?php

defined('_JEXEC') or die('Restricted access');

    $user =& JFactory::getUser();
    $this->user_id = $user->id;
?>

<div class="Jtag_Members_Directory_details">
    <h2 class="page-title"><?php echo JText:: _('JTAG_MEMBER_DETAIL');?></h2>
    <div id="jtag-member-list">

          <img width="225" src="components/com_jtagmembersdirectory/assets/profile_pictures/small/<?php echo $this->profile->profile_picture ? $this->profile->profile_picture : 'profile2.jpg' ?>" alt="" />
          <div class="info details">

            <?php if ($this->profile->user_id == $this->user_id && $this->profile->allow_edit):?>
                <a href="<?php echo JRoute::_('index.php?option=com_jtagmembersdirectory&task=editmemberdetails&mid='.$user->id) ?>" title ="Click to edit your Profile"><h2><?php echo $this->profile->name ?></h2></a>
            <?php else:?>
                <h2><?php echo $this->profile->name ?></h2>    
            <?php endif; ?>

            <h4><?php echo JText:: _('JTAG_MEMBER_DETAIL_ABOUT_ME');?></h4>
            <div><?php echo nl2br($this->profile->member_profile) ?></div>
            <ul class="member-details">

            <?php if($this->user_id !=0):?>
                <?php if($this->profile->hasGallery==1 && $this->profile->display_gallery == 1):?>      
                    <li><a href="<?php echo JRoute::_('index.php?option=com_jtagmembersdirectory&task=showgallery&mid='.$this->profile->user_id) ?>" title ="Click to checkout the gallery"><strong><?php echo JText:: _('JTAG_MEMBER_DETAIL_GALLERY');?></strong></a></li>                    
                <?php endif;?>
            <?php endif;?>  

            <?php if($this->user_id==0):?>
              <?php if($this->profile->display_nr_country==1 && $this->profile->country):?>
                <li><strong><?php echo JText:: _('JTAG_MEMBER_DETAIL_COUNTRY');?></strong> <?php echo $this->countries[$this->profile->country]; ?></li>
              <?php endif;?>
            <?php else:?>
              <?php if( $this->profile->country):?>
                <li><strong><?php echo JText:: _('JTAG_MEMBER_DETAIL_COUNTRY');?></strong> <?php echo $this->countries[$this->profile->country]; ?></li>
              <?php endif;?>
            <?php endif;?>  

            <?php if($this->user_id==0):?>
              <?php if($this->profile->display_nr_city==1 && $this->profile->city):?>
                <li><strong><?php echo JText:: _('JTAG_MEMBER_DETAIL_CITY');?></strong> <?php echo $this->profile->city; ?></li>
              <?php endif;?>
            <?php else:?>
              <?php if( $this->profile->city && $this->profile->display_city):?>
                <li><strong><?php echo JText:: _('JTAG_MEMBER_DETAIL_CITY');?></strong> <?php echo $this->profile->city; ?></li>
              <?php endif;?>
            <?php endif;?>  

            <?php if($this->user_id==0):?>
              <?php if($this->profile->display_nr_state==1 && $this->profile->state):?>
                          <li><strong><?php echo JText:: _('JTAG_MEMBER_DETAIL_STATE');?></strong> <?php echo $this->profile->state; ?></li>
              <?php endif;?>
            <?php else:?>
              <?php if( $this->profile->state ):?>
                          <li><strong><?php echo JText:: _('JTAG_MEMBER_DETAIL_STATE');?></strong> <?php echo $this->profile->state; ?></li>
              <?php endif;?>
            <?php endif;?>  

            <?php if($this->user_id==0):?>
              <?php if($this->profile->display_nr_phone_no==1 && $this->profile->phone_no):?>
                          <li><strong><?php echo JText:: _('JTAG_MEMBER_DETAIL_PHONE_NO');?></strong> <?php echo $this->profile->phone_no ?></li>
              <?php endif;?>
            <?php else:?>
              <?php if( $this->profile->phone_no  && $this->profile->display_phone_no):?>
                          <li><strong><?php echo JText:: _('JTAG_MEMBER_DETAIL_PHONE_NO');?></strong> <?php echo $this->profile->phone_no ?></li>
              <?php endif;?>
            <?php endif;?>  

            <?php if($this->user_id==0):?>
              <?php if($this->profile->display_nr_email==1 && $this->profile->Email):?>
               <li><strong><?php echo JText:: _('JTAG_MEMBER_DETAIL_EMAIL');?></strong> <?php echo $this->profile->Email; ?></li>
              <?php endif;?>
            <?php else:?>
              <?php if( $this->profile->Email):?>
               <li><strong><?php echo JText:: _('JTAG_MEMBER_DETAIL_EMAIL');?></strong> <?php echo $this->profile->Email; ?></li>
              <?php endif;?>
            <?php endif;?>  

          <?php if($this->user_id==0):?>
            <?php if($this->profile->display_nr_facebook==1 && $this->profile->facebook_page):?>
             <li><strong><?php echo JText:: _('JTAG_MEMBER_DETAIL_FACEBOOK_PAGE');?></strong> <a href="http://<?php echo $this->profile->facebook_page ?>" target="_blank"><?php echo $this->profile->facebook_page ?></a></li>

            <?php endif;?>
          <?php else:?>
            <?php if( $this->profile->facebook_page && $this->profile->display_facebook_page):?>
             <li><strong><?php echo JText:: _('JTAG_MEMBER_DETAIL_FACEBOOK_PAGE');?></strong> <a href="http://<?php echo $this->profile->facebook_page ?>" target="_blank"><?php echo $this->profile->facebook_page ?></a></li>

            <?php endif;?>
          <?php endif;?>  

          <?php if($this->user_id==0):?>
            <?php if($this->profile->display_nr_twitter==1 && $this->profile->twitter_page):?>
             <li><strong><?php echo JText:: _('JTAG_MEMBER_DETAIL_TWITTER_PAGE');?></strong> <a href="http://<?php echo $this->profile->twitter_page ?>" target="_blank"><?php echo $this->profile->twitter_page ?></a></li>

            <?php endif;?>
          <?php else:?>
            <?php if( $this->profile->twitter_page && $this->profile->display_twitter_page):?>
             <li><strong><?php echo JText:: _('JTAG_MEMBER_DETAIL_TWITTER_PAGE');?></strong> <a href="http://<?php echo $this->profile->twitter_page ?>" target="_blank"><?php echo $this->profile->twitter_page ?></a></li>

            <?php endif;?>
          <?php endif;?>  

          <?php if($this->user_id):?>   
              <?php foreach ($this->profile->custom_fields as $field):  ?>
                <?php if ($field->field_label && $field->field_value): ?>
                <li><strong><?php echo $field->field_label; ?>:</strong> <?php echo $field->field_value ?></li>
                <?php endif; ?>
              <?php endforeach; ?>
          <?php else: ?>
              <?php foreach ($this->profile->custom_fields as $field):  ?>
                <?php if ($field->field_label && $field->field_value && $field->display_nr_cf): ?>
                <li><strong><?php echo $field->field_label; ?>:</strong> <?php echo $field->field_value ?></li>
                <?php endif; ?>
              <?php endforeach; ?>

          <? endif;?>
            </ul>
            <a href="#" class="back-list" onclick="self.history.back(1)"><?php echo JText:: _('BACK_TO_THE_LIST');?></a>
          </div>

    </div>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-25T08:17:36.993

除非您启用了[短标签](http://php.net/manual/en/ini.core.php#ini.short-open-tag)，否则这一行 (#131) -

```
<? endif;?> 
```

不会解析，结束你的`if`

但是您也只发布了 137 行代码，并且您的代码说它在第 147 行，所以可能还有另一个问题。

# qt - qt5 win7使用哪个c++编译器

> ID：14028799
> 
> 赞同：2
> 
> 时间：2012-12-25T08:00:14.947
> 
> 标签：qt

第一次尝试创建 GUI。

我决定尝试 QT 5.0，但它一直给我错误：

> 错误：Qt Creator 需要设置编译器来构建。在套件选项中配置编译器。

我进入套件选项，我可以选择许多不同的 Visual Studio 11 编译器或 MinGW 编译器。

我尝试将 MinGW 编译器指向 minGW bin 目录中的几个不同的 .exe 文件，如 c++.exe、gcc.exe、g++.exe 等。我仍然收到错误消息。

然后我在某处读到我需要使用 MSVC10 进行编译，但是我在任何地方都找不到这个编译器。

我只需要创建一个带有几个标签和文本框以及一个按钮的简单窗口，我什至无法创建一个窗口。

谢谢你的帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-25T23:16:50.240

我必须安装 MSVC2010，并使用那个编译器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-25T08:24:26.607

首先在 Creator 选项的“Build & Run”部分的“Compilers”选项卡中配置一个编译器。然后，您可以在套件中选择已配置的编译器。然后将您的项目设置为使用该套件。

# django - South 和 Django 面临问题“您的数据库没有 South 数据库模块 'south.db.postgresql_psycopg2'。”

> ID：14028800
> 
> 赞同：3
> 
> 时间：2012-12-25T08:00:33.863
> 
> 标签：django, django-south

我正在尝试使用 South 在 Python 和 Django 中开发一个项目来进行数据库迁移。

我对南方很陌生，目前在尝试运行任何命令 syncdb 或 runserver 时面临一个问题：

“您的数据库没有 South 数据库模块 'south.db.postgresql_psycopg2'。请选择支持的数据库，检查 SOUTH_DATABASE_ADAPTER[S] 设置，或从 INSTALLED_APPS 中删除 South。”

我正在使用以下版本 Django==1.4.2，

南==0.7.6,

psycopg2==2.4.5

Postgres 9.2.2

Python==2.7.1 用于配置。

我正在尝试在 mac 机器 10.7.5 上配置这个项目

数据库设置信息：

```
DATABASES = {
    'default': {
        'ENGINE': 'django.db.backends.postgresql_psycopg2',
        'NAME': 'xxx',
        'USER': 'xxx',
        'PASSWORD': 'xxxx',
        'HOST': '',
        'PORT': '',
    }

}

SOUTH_DATABASE_ADAPTERS = {
    'default': 'south.db.postgresql_psycopg2',
} 
```

提前致谢

问候， AnshJ

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T20:28:28.003

这是我非常愚蠢的错误，我的项目路径中有 2 个不同版本的 south，其中一个 south 在 db 文件夹下没有 postgresql_psycopg2.py 文件，实际上已加载。

谢谢，

问候， AnshJ

# c - c语言中的windows服务代码，服务逻辑代码在哪里写？

> ID：14028801
> 
> 赞同：1
> 
> 时间：2012-12-25T08:00:38.803
> 
> 标签：c, windows, service, winsock, winexe

标题很笼统，但我的疑问很具体。我怀疑在哪里编写服务逻辑代码（在服务控制处理程序中或在 ServiceMain 中），就像服务将执行的任何功能一样。它在 ServiceMain 中吗？我在 MSDN 上查看了这些与服务相关的主题。但是，并没有帮助我 [http://msdn.microsoft.com/en-us/library/ms687414%28VS.85%29.aspx](http://msdn.microsoft.com/en-us/library/ms687414%28VS.85%29.aspx) [http://msdn.microsoft.com/en-us/library/ms685984% 28v=vs.85%29.aspx](http://msdn.microsoft.com/en-us/library/ms685984%28v=vs.85%29.aspx)

基本上，我想使用服务在 Windows 上启动一个套接字侦听。这个监听套接字逻辑代码将在服务文件中，因为我将使用 winexe 实用程序将此服务从 linux 机器发送到 windows 机器。目前，winexe 在 windows 上发送 winexesvc 服务文件。因此，最终我将替换现有的 winexesvc 服务，以便它在 Windows 上发送时执行对特定端口功能的侦听。（服务框架将保持不变，但其任务执行逻辑会改变，对吧？）。请告诉我是否遗漏了什么。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-25T11:35:59.257

服务控制处理程序应该只处理发送到服务的控制消息（您链接的示例中显示的是`SERVICE_CONTROL_STOP`和`SERVICE_CONTROL_INTERROGATE`）。这些控制消息从环境发送到服务。

当所有必需的初始化完成后，您的服务的逻辑应该在`ServiceMain`函数中实现。在您帖子中 URL 的示例中，服务逻辑代码被放入`SvcInit`函数中（对于实现服务逻辑的函数，这可能不是最合适的名称）。

# php - PHP 的 gpx 解析器

ID：14028804

赞同：0

时间：2012-12-25T08:00:54.363

标签：php, gpx

# c# - 如何检测不同类型网址列表中的视频文件链接

> ID：14028805
> 
> 赞同：1
> 
> 时间：2012-12-25T08:01:02.343
> 
> 标签：c#, list

我想创建一个可以检测流视频链接的软件，此时我可以抓取视频链接，但我的软件检测到一些不是视频链接的链接，如图所示。

我已经使用后台工作人员和这段代码来检测飞行类型，但它不起作用所以我的问题是如何以正确的方式过滤它们。

```
HttpWebRequest req = (HttpWebRequest)WebRequest.Create(Url);
req.Proxy = null;
req.Method = "HEAD";
HttpWebResponse resp = (HttpWebResponse)(req.GetResponse());
if(resp.ContentType.IndexOf("video")>0)
{
   list.Add(url);
} 
```

![在此处输入图像描述](../Images/e22b2941b8c315ff8e13d761b3227354.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-25T08:16:12.583

通过扩展。今天没有那么多的网络。您可以使用正则表达式匹配它们：

```
Regex.IsMatch("inputlink", "\.avi|\.mp4|\.flv|\.wmv"); \\continue the list 
```

# c# - 使用数据适配器更新数据时出错

> ID：14028809
> 
> 赞同：0
> 
> 时间：2012-12-25T08:01:34.723
> 
> 标签：c#

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Windows.Forms;
using System.Data.SqlClient;

namespace ADO_DataSet_Prac
{
    public partial class Form1 : Form
    {
        public Form1()
        {
            InitializeComponent();
        }
        DataSet ds = new DataSet();
        SqlDataAdapter da;
        DataTable dt;

        private void Form1_Load(object sender, EventArgs e)
        { 
            SqlConnection con = new SqlConnection("Server = localhost; Database = MSNETDB; Integrated Security=True;MultipleActiveResultSets=True");
             da = new SqlDataAdapter("Select * from Emp",con);
             da.Fill(ds, "Emp");
             dt=ds.Tables["Emp"];
             gvEmp.DataSource = dt;

           //Insert command for data adapter
            SqlCommand cmdInsert = new SqlCommand("Insert into Emp(EmpName,EmpSalary) Values(@Name,@Salary)", con);
            SqlParameter Name = cmdInsert.Parameters.Add("@Name", SqlDbType.VarChar, 100);
            SqlParameter Salary = cmdInsert.Parameters.Add("@Salary", SqlDbType.Money);
            Name.SourceColumn = "EmpName";
            Salary.SourceColumn = "EmpSalary";
            da.InsertCommand = cmdInsert;

            //Update command for data adapter
            SqlCommand cmdUpdate = new SqlCommand("Update Emp set EmpName =@Name, EmpSalary =@Salary where EmpId=@Id", con);
            SqlParameter Id = cmdUpdate.Parameters.Add("@Id", SqlDbType.Int);
            Name.SourceColumn = "EmpName";
            Salary.SourceColumn = "EmpSalary";
            Id.SourceColumn = "EmpId";
            da.UpdateCommand = cmdUpdate;
}
 private void btnDa_Update_Click(object sender, EventArgs e)
        {
            da.Update(ds,"Emp"); //Exception throw here
        }
    }
} 
```

在尝试更新时，我得到一个`SqlException`说法：

> *必须声明标量变量“@Name”。*

抛出异常

```
da.update(ds,"Emp") 
```

数据适配器的方法。我不知道是什么原因。我检查了所有语法和错误，一切看起来都很好，但仍然抛出错误。我也尝试过断点，但没有运气。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-25T08:06:54.483

您尚未在插入和更新命令中添加 sql 参数。

```
cmdUpdate.Parameters.Add(Name);
cmdUpdate.Parameters.Add(Salery); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-25T08:08:10.520

您已为插入命令声明了参数 @Name 和 @Salary

```
cmdInsert.Parameters.Add("@Name"... 
```

但后来您尝试将它们用于 updtae 命令。只需为更新添加新参数，例如：

```
SqlParameter NameUpdate = cmdUpdate.Parameters.Add("@Name", SqlDbType.VarChar, 100);
SqlParameter SalaryUpdate = cmdUpdate.Parameters.Add("@Salary", SqlDbType.Money); 
```

# objective-c - 如何在旋转的 UIView 中使用 CGRectContainsPoint()

> ID：14028811
> 
> 赞同：5
> 
> 时间：2012-12-25T08:01:48.500
> 
> 标签：objective-c, ios, uiview, rotation, cgaffinetransform

我有一个`UIView`，用户可以点击它`UIView`来“选择”或突出显示它所代表的应用内“事物”。我用它`CGRectContainsPoint(thing.frame,tapPoint)`来实现这一点，`thing.frame`的框架在哪里`UIView`，并且`tapPoint`是从`UITapGestureRecognizer`. 这很完美。

..`UIView`通过设置`transform`属性（带有`CGAffineTransform`值）旋转时除外。当`UIView`像这样旋转时，`frame`变成一个扁平的正方形，封装了旋转的视图。

这是问题的说明（框架属性标记为 A，视觉`UIView` `bounds`标记为 B）：

**未旋转时**

```
+------------------+
|      A == B      |
+------------------+ 
```

**旋转时**

```
+-----------------+
|  A        .     |
|         .   .   |
|       .       . |
|     .       .   |
|   .    B  .     |
| .       .       |
|   .   .         |
|     .           |
+-----------------+ 
```

我想捕获在 rect 范围内的抽头`B`（ 的真实边界`UIView`，旋转），但不是当它们仅在 rect `A`（ 的`frame`属性的值`UIView`）而不是`B`。

我如何计算给定的点击点是否在旋转的真实边界/框架/边界内`UIView`？有没有方便的方法？或者我是否需要计算`B`使用我自己的几何图形的坐标和尺寸？

（如果是后者，请提出建议，以便我们尽可能完整地回答。谢谢！）

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-25T08:28:08.480

你会发现每个人第一次为框架和边界工作时都会遇到的一个基本绊脚石。

框架是视图适合的最小可能（非旋转）矩形，考虑到变换。这意味着，如果您要测试触摸，您可以登录视图周围的可用空间，只要它位于尽可能小的矩形内。

对于视觉，想象蓝色方块是一个变形的`UIView`. 视图周围的蓝色边框代表它的框架。请注意，即使视图已转换，它的框架仍保持未转换并处于标准位置。绿色区域表示如果`frame`通过而不是可以触摸的区域`bounds`：

![框架](../Images/bf53c708d5a2926fa03926f64e6edf26.png)

另一方面，边界表示接收者相对于自身的矩形，考虑到变换，因此通过传递边界（在`-convertPoint:toView:`调用之后）测试视图中的点将正确返回给定的触摸（点）是否相交风景。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-02-27T18:40:55.237

这里是代码，viewB 是目标视图，viewA 是包含该点的源视图。

```
if(CGRectContainsPoint(viewB.bounds, [viewA convertPoint:point toView:viewB])){
    //...
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-09-01T10:20:24.537

我想出了这个答案，因为我想要解释完整的代码响应。如果有人需要代码，为了完整起见，这就是我最终计算视图（containerView）是否完全包含在另一个视图（视图）中的方式：

```
-(BOOL)viewIsFullyContained:(UIView*)view{
    // get the inner rectangle corners in the view coordinate system
    CGPoint upperLeft   = [self.containerView convertPoint:self.containerView.bounds.origin toView:view];
    CGPoint upperRight  = [self.containerView convertPoint:CGPointMake(self.containerView.bounds.origin.x + self.containerView.bounds.size.width,
                                                                   self.containerView.bounds.origin.y)
                                                toView:view];
    CGPoint lowerLeft   = [self.containerView convertPoint:CGPointMake(self.containerView.bounds.origin.x,
                                                                   self.containerView.bounds.origin.y + self.containerView.bounds.size.height)
                                                toView:view];
    CGPoint lowerRight  = [self.containerView convertPoint:CGPointMake(self.containerView.bounds.origin.x + self.containerView.bounds.size.width,
                                                                   self.containerView.bounds.origin.y + self.containerView.bounds.size.height)
                                                toView:view];
    // Check whether all of the corners are fully contained in the view.
    BOOL upperLeftIsContained   = CGRectContainsPoint(view.bounds, upperLeft);
    BOOL upperRightIsContained  = CGRectContainsPoint(view.bounds, upperRight);
    BOOL lowerLeftIsContained   = CGRectContainsPoint(view.bounds, lowerLeft);
    BOOL lowerRightIsContained  = CGRectContainsPoint(view.bounds, lowerRight);
    NSLog(@"Checking for (%i/%i/%i/%i)",upperLeftIsContained,upperRightIsContained,lowerLeftIsContained,lowerRightIsContained);
    return (upperRightIsContained && upperRightIsContained && lowerRightIsContained && lowerLeftIsContained);
} 
```

# cookies - 在会话中设置 cookie

> ID：14028814
> 
> 赞同：1
> 
> 时间：2012-12-25T08:02:16.057
> 
> 标签：cookies, express

我正在设置一个 cookie 并访问它。当我执行 console.log 时，它不显示任何内容。但是当我在浏览器上看到 cookie 时，我可以看到这个值。我想检查 cookie 是否为 1。如果是 1，则继续，否则将其删除。但我在访问此值时遇到问题。

2）看起来我实际上是直接设置值，而不是： app.use(express.cookieParser('keyboard cat')); 在这里有用。问题是如果我没有这个 app.use，它将无法找到秘密。

如果你能让我知道我在快速 url 中缺少关于 cookie 的任何指针，那就太好了。

```
app.post('/login', function(req, res){

console.log(req.cookies.rememberme);
console.log(req.session.user);
if (req.session.user) {
    req.session.user=req.body.username;
    ss=req.session.user;
    res.cookie('rememberme', '1', { maxAge: 2000, httpOnly: true });
  } else {
    req.session.user="test";
    ss=req.session.user;
  }
res.send('viewed  times\n'+ss);
}); 
```

我正在寻找的是如果用户提供了正确的用户名和密码，那么我将为他分配一个 cookie。如果这样做了，并且在随后的请求中，用户将使用相同的 cookie。我也在研究如何将这个 cookie 存储在本地内存中，并且..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T12:39:42.253

这个片段展示了我们如何使用基于 cookie 的会话！

```
var express = require('express')
  , app = module.exports = express()
  , utils = require("util");

app.use(express.cookieParser('hello !!'));
app.use(express.cookieSession({key:"remember", secret: 'testing', cookie: { maxAge: 5000}}));
app.use(express.bodyParser());

app.get('/', function(req, res, next){   

  if(req.session.user) {
     res.send('welcome ' + req.session.user + ' Click to <a href="/forget">forget</a>!.');
  } else {
      res.send('<form method="post">'
      + '<p>Username : <label><input type="texst" name="user"/></label>'
      + '<p><label><input type="checkbox" name="remember"/> remember me</label></p> '
      + '<p><input type="submit" value="Submit"/>.</p></form>');
  }

});

app.get('/forget', function(req, res){
  res.clearCookie("remember");
  res.redirect('back');
});

app.post('/', function(req, res){

  if (req.body.remember) { 
    req.session.user = req.body.user;
    console.log ( "set-cookie :" , res.get("Set-Cookie"));    
  }    
  res.redirect('back');
});

if (!module.parent){
  app.listen(3000);
  console.log('Express started on port 3000');
} 
```

# python-2.7 - 如何在 sqlalchemy 中生成这个 sql，我正在努力但不知道该怎么做

> ID：14028817
> 
> 赞同：-1
> 
> 时间：2012-12-25T08:02:53.797
> 
> 标签：python-2.7, sqlalchemy

"select pck.id, pck.name, deb.last_time from (select id, name from dp_package where name like %s limit %s, %s) as pck left join (select package_id, last_time from dp_deb where id in (select max (id) from dp_deb group by package_id)) as deb on pck.id = deb.package_id" %(keyword, start, limit)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-25T17:33:37.477

假设模型已定义： Base = declarative_base()

```
class Package(Base):
    __tablename__ = 'db_package'
    id = Column(Integer, primary_key=True)
    name = Column(String)
    def __init__(self, name):
        self.name = name

class Deb(Base):
    __tablename__ = 'db_deb'
    id = Column(Integer, primary_key=True)
    package_id = Column(Integer, ForeignKey('db_package.id'))
    name = Column(String)
    last_time = Column(DateTime)
    def __init__(self, name, last_time):
        self.name = name
        self.last_time = last_time

    packages = relationship(Package, backref="debs") 
```

下面的代码应该产生相同的结果（尽管`SQL`查询不同，其中一个`subquery`被替换为 simple `LEFT OUTER JOIN`）：

```
# query parameters
keyword, start, limit = 'xxx', 1, 3

# subquery for the last_time
sq2h = session.query(Deb.package_id, func.max(Deb.id).label("max_id")).group_by(Deb.id).subquery("max_deb")
sq2 = (session.query(Deb.package_id, Deb.last_time).
        join(sq2h, Deb.id == sq2h.c.max_id))
sq2 = sq2.subquery("deb")

qry = (session.query(Package.id, Package.name, sq2.c.last_time).
        outerjoin(sq2, sq2.c.package_id == Package.id).
        filter(Package.name.contains(keyword))
        )[start:(start + limit)]
print qry 
```

`SQL`为`SQLite`：_

```
SELECT  db_package.id AS db_package_id, 
        db_package.name AS db_package_name, 
        deb.last_time AS deb_last_time
FROM    db_package 
LEFT OUTER JOIN(SELECT  db_deb.package_id AS package_id, db_deb.last_time AS last_time
                FROM    db_deb 
                JOIN   (SELECT  db_deb.package_id AS package_id, 
                                max(db_deb.id) AS max_id
                        FROM    db_deb 
                        GROUP BY db_deb.id
                       ) AS max_deb 
                  ON db_deb.id = max_deb.max_id
        ) AS deb 
    ON  deb.package_id = db_package.id
WHERE   db_package.name LIKE '%%' || ? || '%%'
LIMIT ? OFFSET ?

('xxx', 3, 1) 
```

# android - SharedPreferences 默认值

> ID：14028822
> 
> 赞同：0
> 
> 时间：2012-12-25T08:03:21.407
> 
> 标签：android, preferences

我有一个 settings.xml 文件，其中包含我的应用程序的首选项。默认情况下，所有值都设置为“true”，并且在我的应用程序中由 PreferenceActivity 使用。在我的主要活动中，我通过阅读价值观

```
 SharedPreferences sp=PreferenceManager.getDefaultSharedPreferences(appContext);
     Boolean key = sp.getBoolean("M", false); 
```

**除了第一次之外，**它在任何时候都能得到我需要的任何东西。只有当我第一次打开我的应用程序并且没有打开我的设置菜单时，我才会得到“假”。我的意思是我必须打开菜单，然后才能正确运行应用程序。

有什么建议么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-25T08:20:45.003

因为你是第一次获得默认值。那是错误的-->

```
Boolean key = sp.getBoolean("M", false); 
```

用这个

```
Boolean key = sp.getBoolean("M", true); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-25T08:15:39.643

改为使用`sp.getBoolean("M", true);`。首选项文件中的默认值是首选项活动首次启动时的值。SharedPreferences 对您的 settings.xml 一无所知。

或者，您可以有一个单独的 defaults.xml 文件（或任何其他名称），其中包含所有首选项的所有默认值。`@bool/default_M_value`然后在 settings.xml ( ) 和应用程序 ( )中使用这些值`sp.getBoolean("M", getResources().getBoolean(R.bool.default_M_value))`。

我个人会坚持第一种方法。

# apache - 通过 apache 服务器的 Socket.io 聊天（也运行 php 主站点）

> ID：14028824
> 
> 赞同：1
> 
> 时间：2012-12-25T08:03:29.220
> 
> 标签：apache, node.js, socket.io, cors

我一直在尝试为我的网站想出一个与 socket.io 很好地配合的解决方案。现在我有 apache 为我的网站提供服务（主要是在 php 中），我正在尝试使用 socket.io（节点）实现实时聊天支持功能。我能够让聊天功能单独工作（使用 express 并转到 wundertutor.com:8000）但是当我只是去 wundertutor.com（其中也包括聊天功能）时，我遇到了 CORS 问题（Cross -起源资源共享）。这是我的错误（在客户端）：

```
XMLHttpRequest cannot load http://chat.wundertutor.com/socket.io/1/?t=1356421805823\. Origin http://wundertutor.com is not allowed by Access-Control-Allow-Origin. 
```

或者

```
XMLHttpRequest cannot load http://chat.wundertutor.com/socket.io/1/?t=1356422229000\. Cannot use wildcard in Access-Control-Allow-Origin when credentials flag is true. 
```

取决于我是否在我的 app.js 中包含这行代码

```
io.set("origins","http://wundertutor.com"); 
```

基本上，我只想让我的节点应用程序成为我主站点的补充，但我真的不知道在哪里指定 CORS 参数。我已经尝试在我的 .htaccess 文件、app.js 以及客户端 javascript 中执行此操作，但都没有成功。

（另外，我觉得奇怪的另一件事是，当我访问 wundertutor.com:8000 时，我的节点应用程序正确打开了一个 websocket，但是当我尝试访问 wundertutor.com 时，它尝试使用 XHR 轮询，这最终导致这个CORS混乱）

任何建议将不胜感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-28T07:54:26.923

如果其他人遇到同样的问题，我想出了我的问题。虽然我仍然认为我想要做的是使用 CORS，但我不必在 Apache 或 node.js 端做任何特定的 Access-Allow-Origin-Control 设置。我解决问题的方法是从 node.js 服务器而不是 apache 服务器提供 socket.io javascript 文件。这使得来自 socket.io javascript 文件的请求与加载 javascript 文件的来源相同。这是一个例子：

```
<script src="http://wundertutor.com:8000/socket.io/socket.io.js"> </script> 
(node server - correct) 
```

对比

```
<script src="/javascripts/socket.io.js"></script>
(apache server - wrong) 
```

# c++ - c++中的家谱结构

> ID：14028828
> 
> 赞同：0
> 
> 时间：2012-12-25T08:03:53.593
> 
> 标签：c++

我想制作一个程序来获取家庭信息，包括他们的姓名、SSN 等。我面临两个问题，首先，为此目的最好的数据结构是什么，其次，我应该如何从用户，我的意思是当我得到父亲的信息时，我应该确定他的孩子，这就是问题所在。如何将他的孩子与自己联系起来？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-25T08:09:15.127

如果是我，我会创建几个不同的并行数组。
您将需要找出通过数组进行搜索的算法。一旦搜索找到匹配项，您将需要了解如何使用相同的索引将它们匹配在一起。可能需要通过引用返回索引以使事情变得更容易。如何将孩子与父亲联系起来可能更难......我对二叉树了解不多，我们从未在课堂上谈论过那些。但这也许是您正在寻找的答案。抱歉，我无法提供更多帮助。这是圣诞节，现在是凌晨 3 点哈哈。祝你好运。

# asp.net-mvc-3 - MVC3 应用程序不显示 miniprofiler（Windows Server 2008 R2 上的 IIS 7.5）

> ID：14028830
> 
> 赞同：0
> 
> 时间：2012-12-25T08:04:14.203
> 
> 标签：asp.net-mvc-3, iis-7.5, localhost, mvcminiprofiler, elmah.mvc

需要有关 Windows Server 2008 R2 上的 miniprofiler 和 IIS 7.5 的帮助。我的 MVC3 应用程序在 localhost 上运行良好，但在服务器上部署时无法呈现配置文件信息。想知道我是否缺少任何配置。这是我的 web.config。

```
<?xml version="1.0" encoding="utf-8"?>
<!--
  For more information on how to configure your ASP.NET application, please visit
  http://go.microsoft.com/fwlink/?LinkId=152368
  -->
<configuration>
  <configSections>
    <sectionGroup name="elmah">
      <section name="security" requirePermission="false" type="Elmah.SecuritySectionHandler, Elmah" />
      <section name="errorLog" requirePermission="false" type="Elmah.ErrorLogSectionHandler, Elmah" />
      <section name="errorMail" requirePermission="false" type="Elmah.ErrorMailSectionHandler, Elmah" />
      <section name="errorFilter" requirePermission="false" type="Elmah.ErrorFilterSectionHandler, Elmah" />
    </sectionGroup>
  </configSections>  
  <connectionStrings>
-- Removed intentionally  </connectionStrings>
  <appSettings>
    <add key="elmah.mvc.disableHandler" value="false" />
    <add key="elmah.mvc.disableHandleErrorFilter" value="false" />
    <add key="elmah.mvc.requiresAuthentication" value="false" />
    <add key="elmah.mvc.allowedRoles" value="*" />
    <add key="elmah.mvc.route" value="elmah" />
  </appSettings>
  <system.web>
    <globalization culture="en-IN" uiCulture="auto:en-IN" />
    <compilation debug="false" targetFramework="4.0">
      <assemblies>
        <add assembly="System.Web.Abstractions, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" />
        <add assembly="System.Web.Helpers, Version=1.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" />
        <add assembly="System.Web.Routing, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" />
        <add assembly="System.Web.Mvc, Version=3.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" />
        <add assembly="System.Web.WebPages, Version=1.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" />
      </assemblies>
    </compilation>
    <authentication mode="Forms">
      <forms loginUrl="~/Account/LogIn" timeout="2880" />
    </authentication>
    <membership defaultProvider="DefaultMembershipProvider">
      <providers>
        <clear />
        <!--<add name="AspNetSqlMembershipProvider" type="System.Web.Security.SqlMembershipProvider" connectionStringName="ApplicationServices" enablePasswordRetrieval="false" enablePasswordReset="true" requiresQuestionAndAnswer="false" requiresUniqueEmail="false" maxInvalidPasswordAttempts="5" minRequiredPasswordLength="6" minRequiredNonalphanumericCharacters="0" passwordAttemptWindow="10" applicationName="MyDeals" />-->
        <add name="DefaultMembershipProvider" type="System.Web.Providers.DefaultMembershipProvider, System.Web.Providers, Version=1.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35" connectionStringName="ApplicationServices" enablePasswordRetrieval="false" enablePasswordReset="true" requiresQuestionAndAnswer="false" requiresUniqueEmail="true" maxInvalidPasswordAttempts="5" minRequiredPasswordLength="6" minRequiredNonalphanumericCharacters="0" passwordAttemptWindow="10" applicationName="Subscriber" />
      </providers>
    </membership>
    <profile defaultProvider="DefaultProfileProvider" inherits="InstaDeal.Helpers.UserProfile">
      <providers>
        <clear />
        <!--<add name="AspNetSqlProfileProvider" type="System.Web.Profile.SqlProfileProvider" connectionStringName="ApplicationServices" applicationName="MyDeals" />-->
        <add name="DefaultProfileProvider" type="System.Web.Providers.DefaultProfileProvider, System.Web.Providers, Version=1.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35" connectionStringName="ApplicationServices" applicationName="Subscriber" />
      </providers>
    </profile>
    <roleManager enabled="false" defaultProvider="DefaultRoleProvider">
      <providers>
        <clear />
        <!--<add name="AspNetSqlRoleProvider" type="System.Web.Security.SqlRoleProvider" connectionStringName="ApplicationServices" applicationName="MyDeals" />-->
        <add name="AspNetWindowsTokenRoleProvider" type="System.Web.Security.WindowsTokenRoleProvider" applicationName="MyDeals" />
        <add name="DefaultRoleProvider" type="System.Web.Providers.DefaultRoleProvider, System.Web.Providers, Version=1.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35" connectionStringName="ApplicationServices" applicationName="Subscriber" />
      </providers>
    </roleManager>
    <pages>
      <namespaces>
        <add namespace="System.Web.Helpers" />
        <add namespace="System.Web.Mvc" />
        <add namespace="System.Web.Mvc.Ajax" />
        <add namespace="System.Web.Mvc.Html" />
        <add namespace="System.Web.Routing" />
        <add namespace="System.Web.WebPages" />
      </namespaces>
    </pages>
    <httpModules>
      <add name="ErrorLog" type="Elmah.ErrorLogModule, Elmah" />
      <add name="ErrorMail" type="Elmah.ErrorMailModule, Elmah" />
      <add name="ErrorFilter" type="Elmah.ErrorFilterModule, Elmah" />
    </httpModules>
    <sessionState mode="InProc" customProvider="DefaultSessionProvider">
      <providers>
        <add name="DefaultSessionProvider" type="System.Web.Providers.DefaultSessionStateProvider, System.Web.Providers, Version=1.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35" connectionStringName="DefaultConnection" />
      </providers>
    </sessionState>
  </system.web>
  <system.webServer>
    <modules runAllManagedModulesForAllRequests="true">
      <add name="ErrorLog" type="Elmah.ErrorLogModule, Elmah" preCondition="managedHandler" />
      <add name="ErrorMail" type="Elmah.ErrorMailModule, Elmah" preCondition="managedHandler" />
      <add name="ErrorFilter" type="Elmah.ErrorFilterModule, Elmah" preCondition="managedHandler" />
    </modules>
    <validation validateIntegratedModeConfiguration="false" />
    <handlers>
      <add name="AttributeRouting" path="routes.axd" verb="*" type="AttributeRouting.Web.Logging.LogRoutesHandler, AttributeRouting.Web" />
      <add name="MiniProfiler" path="mini-profiler-resources/*" verb="*" type="System.Web.Routing.UrlRoutingModule" resourceType="Unspecified" preCondition="integratedMode" />
    </handlers>
  </system.webServer>
  <runtime>
    <assemblyBinding xmlns="urn:schemas-microsoft-com:asm.v1">
      <dependentAssembly>
        <assemblyIdentity name="System.Web.Mvc" publicKeyToken="31bf3856ad364e35" />
        <bindingRedirect oldVersion="1.0.0.0-2.0.0.0" newVersion="3.0.0.0" />
      </dependentAssembly>
      <dependentAssembly>
        <assemblyIdentity name="System.Web.WebPages" publicKeyToken="31bf3856ad364e35" culture="neutral" />
        <bindingRedirect oldVersion="0.0.0.0-2.0.0.0" newVersion="1.0.0.0" />
      </dependentAssembly>
    </assemblyBinding>
  </runtime>
  <elmah>
    <security allowRemoteAccess="true" />
    <errorLog type="Elmah.SqlErrorLog, Elmah" connectionStringName="ApplicationLogServices" applicationName="Subscriber" />
  </elmah>
  <location path="elmah.axd">
    <system.web>
      <httpHandlers>
        <add verb="POST,GET,HEAD" path="elmah.axd" type="Elmah.ErrorLogPageFactory, Elmah" />
      </httpHandlers>
      <!-- 
        See http://code.google.com/p/elmah/wiki/SecuringErrorLogPages for 
        more information on using ASP.NET authorization securing ELMAH.
      -->
      <authorization>
        <allow roles="SuperAdministrator" />
        <deny users="*" />  
      </authorization>
    </system.web>
    <system.webServer>
      <handlers>
        <add name="ELMAH" verb="POST,GET,HEAD" path="elmah.axd" type="Elmah.ErrorLogPageFactory, Elmah" preCondition="integratedMode" />
      </handlers>
    </system.webServer>
  </location>  
</configuration 
```

>

我从 nuget 安装了最新的 miniprofiler。我在集成模式下运行我的应用程序。我错过了什么？

此外，当我提到配置文件时，我无法确保只有超级管理员才能访问 Elmah（一个奖励问题）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T19:24:45.883

应用程序池是在经典模式还是集成模式下运行？

Mini Profiler 在集成模式下运行时开箱即用。据说有一种方法可以让它工作经典模式，但我最后一次尝试（版本 1.9）我个人无法让它工作。

# web-applications - 如何支持 Web 应用的多个 UI

> ID：14028840
> 
> 赞同：0
> 
> 时间：2012-12-25T08:07:19.713
> 
> 标签：web-applications

我有这个 web 应用程序，它可以很好地部署在 JBoss 上，它的目标是笔记本电脑和台式机上的浏览器。我从来没有打算让这个应用程序在移动设备上可用。

现在也想迎合移动客户，因此我的问题是可以通过哪些可能的方式来完成。

我想到了：

1.  使用手机 UI 部署我的应用程序的另一个实例（我认为根本不是解决方案）
2.  一个条目过滤器来确定代理并相应地重定向（看起来不错）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T17:53:02.173

借助新的媒体查询和其他新的 CSS 功能，您可以为任何 HTML 客户端使用相同的页面。

自适应（流体布局）和响应式（基于大小的布局更改）设计是当前的热门话题。Google 可以为您提供足够的材料来选择（和改进）适合您需要的解决方案。

# android - 如何检查我是否触摸了模态活动的内部或外部？

> ID：14028842
> 
> 赞同：1
> 
> 时间：2012-12-25T08:07:52.900
> 
> 标签：android, android-activity, touch, modal-dialog

我使用以下样式并定义了一个模态活动：

```
<style name="Theme.TransparentD0" parent="android:Theme">
        <item name="android:windowIsTranslucent">true</item>
        <item name="android:windowBackground">@color/semi_transparentD0</item>
        <item name="android:windowContentOverlay">@null</item>
        <item name="android:windowNoTitle">true</item>
        <item name="android:windowIsFloating">true</item>
        <item name="android:backgroundDimEnabled">false</item>
    </style> 
```

如何检查用户是否触摸了我的活动内部或外部？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-25T08:07:52.900

```
@Override
public boolean onTouchEvent(MotionEvent event) {

    final int width = getWindow().getDecorView().getWidth();
    final int height = getWindow().getDecorView().getHeight();
    final int x = (int) event.getX();
    final int y = (int) event.getY();

    if (x > 0 && y > 0 && x < width && y < height)
    {
        Log.i("onTouchEvent", "Inside");
    }
    else
    {
        Log.i("onTouchEvent", "Outside");
    }
    return super.onTouchEvent(event);
} 
```

# c# - 在datagridview c#中更改搜索关键字的颜色

> ID：14028848
> 
> 赞同：2
> 
> 时间：2012-12-25T08:08:10.430
> 
> 标签：c#, datagridview

我必须编写一个`DataGridView`并以编程方式填充它。我希望当用户搜索一个单词例如键并且有一个包含它的单元格（例如它的关键字）时，只需突出显示关键字中搜索到的单词键，而不是所有关键字或单元格或行。这是填充代码`DataGridView`：

```
 private void Fill()
    {
        try
        {
            if (dataGridView1 != null)
            {
                dataGridView1.ColumnCount = 11;
                dataGridView1.Columns[0].HeaderText = Resources.Form1_Fill_ID;
                dataGridView1.Columns[1].HeaderText = Resources.Form1_Fill_Family;
                dataGridView1.Columns[2].HeaderText = Resources.Form1_Fill_Cellphone;
                dataGridView1.Columns[3].HeaderText = Resources.Form1_Fill_Phone1;
                dataGridView1.Columns[4].HeaderText = Resources.Form1_Fill_Phone2;
                dataGridView1.Columns[5].HeaderText = Resources.Form1_Fill_Phone3;
                dataGridView1.Columns[6].HeaderText = Resources.Form1_Fill_Fax;
                dataGridView1.Columns[7].HeaderText = Resources.Form1_Fill_CompanyName;
                dataGridView1.Columns[8].HeaderText = Resources.Form1_Fill_Agency;
                dataGridView1.Columns[9].HeaderText = Resources.Form1_Fill_Brands;
                dataGridView1.Columns[10].HeaderText = Resources.Form1_Fill_Address;

                dataGridView1.Columns[0].Name = Resources.Form1_Fill_ID;
                dataGridView1.Columns[1].Name = Resources.Form1_Fill_Family;
                dataGridView1.Columns[2].Name = Resources.Form1_Fill_Cellphone;
                dataGridView1.Columns[3].Name = Resources.Form1_Fill_Phone1;
                dataGridView1.Columns[4].Name = Resources.Form1_Fill_Phone2;
                dataGridView1.Columns[5].Name = Resources.Form1_Fill_Phone3;
                dataGridView1.Columns[6].Name = Resources.Form1_Fill_Fax;
                dataGridView1.Columns[7].Name = Resources.Form1_Fill_CompanyName;
                dataGridView1.Columns[8].Name = Resources.Form1_Fill_Agency;
                dataGridView1.Columns[9].Name = Resources.Form1_Fill_Brands;
                dataGridView1.Columns[10].Name = Resources.Form1_Fill_Address;
            }

            _conn.ConnectionString = _connectionString;
            var cmd = new OleDbCommand("Select * from contacts ", _conn);
            _conn.Open();
            OleDbDataReader reader = cmd.ExecuteReader();

            int i = 0;
            while (reader != null && reader.Read())
            {
                if (dataGridView1 != null)
                {
                    dataGridView1.Rows.Add(1);
                }
                if (dataGridView1 != null)
                {
                    var row = dataGridView1.Rows[i];

                    row.Cells[Resources.Form1_Fill_ID].Value = reader[0].ToString();
                    row.Cells[Resources.Form1_Fill_Family].Value = reader[1].ToString();
                    row.Cells[Resources.Form1_Fill_Cellphone].Value = reader[2].ToString();
                    row.Cells[Resources.Form1_Fill_Phone1].Value = reader[3].ToString();
                    row.Cells[Resources.Form1_Fill_Phone2].Value = reader[4].ToString();
                    row.Cells[Resources.Form1_Fill_Phone3].Value = reader[5].ToString();
                    row.Cells[Resources.Form1_Fill_Fax].Value = reader[6].ToString();
                    row.Cells[Resources.Form1_Fill_CompanyName].Value = reader[7].ToString();
                    row.Cells[Resources.Form1_Fill_Agency].Value = reader[8].ToString();
                    row.Cells[Resources.Form1_Fill_Brands].Value = reader[9].ToString();
                    row.Cells[Resources.Form1_Fill_Address].Value = reader[10].ToString();

                }
                i++;
            }

        }
        catch (Exception ex)
        {
            return;
        }
        finally
        {
            _conn.Close();
        }
    } 
```

这是搜索代码

```
 private void searchBtn_Click(object sender, EventArgs e)
    {
        // Code to search the  alphanumneric Part Number (in Column1 header called "PART NUMBER") and highlihgt the row
        foreach (DataGridViewRow row in dataGridView1.Rows)
        {

            try
            {

                if (row.Cells[0].Value.ToString().Contains(searchTxt.Text))
                    //row.Cells[0].Style.ForeColor = Color.Red;
                {
                    var t = row.Cells[0].Value.ToString();

                }
                if (row.Cells[1].Value.ToString().Contains(searchTxt.Text))
                        row.Cells[1].Style.ForeColor = Color.Red;
                if (row.Cells[2].Value.ToString().Contains(searchTxt.Text))
                    row.Cells[2].Style.ForeColor = Color.Red;
                if (row.Cells[3].Value.ToString().Contains(searchTxt.Text))
                    row.Cells[3].Style.ForeColor = Color.Red;
                if (row.Cells[4].Value.ToString().Contains(searchTxt.Text))
                    row.Cells[4].Style.ForeColor = Color.Red;
                if (row.Cells[5].Value.ToString().Contains(searchTxt.Text))
                    row.Cells[5].Style.ForeColor = Color.Red;
                if (row.Cells[6].Value.ToString().Contains(searchTxt.Text))
                    row.Cells[6].Style.ForeColor = Color.Red;
                if (row.Cells[7].Value.ToString().Contains(searchTxt.Text))
                    row.Cells[7].Style.ForeColor = Color.Red;
                if (row.Cells[8].Value.ToString().Contains(searchTxt.Text))
                    row.Cells[8].Style.ForeColor = Color.Red;
                if (row.Cells[9].Value.ToString().Contains(searchTxt.Text))
                    row.Cells[9].Style.ForeColor = Color.Red;
                if (row.Cells[10].Value.ToString().Contains(searchTxt.Text))
                    row.Cells[10].Style.ForeColor = Color.Red;
            }
            catch (Exception)
            {
                return;
            }
        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-25T08:46:14.923

如果此搜索仅取决于客户端加载的数据，那么您为什么不建议客户使用浏览器搜索功能。

如果您仍然必须向客户提供此功能，那么为什么您要使用服务器端代码来执行此任务....您可以在 javascript 中处理此问题。以下是示例链接，它解释了如何在 javascript 中访问 datagridview。

1.  [http://www.netomatix.com/development/gridviewclientsideaccess.aspx](http://www.netomatix.com/development/gridviewclientsideaccess.aspx)

2.  [http://www.thescarms.com/dotnet/webdatagrid.aspx](http://www.thescarms.com/dotnet/webdatagrid.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-25T09:14:11.143

使用标准 .NET 控件是不可能的。您可以尝试[Telerik winform 套件](http://www.telerik.com/products/winforms.aspx)或类似套件，它控制允许使用 HTML 格式仅突出显示部分文本。

你真的需要`DataGridView`吗？如果你只使用它来显示数据，你也可以尝试使用`WebBrowser`控件并在那里绘制一个 html 表格。

您还应该重构您的搜索代码：

```
for(int i=0; i<11; i++)
{
   if (row.Cells[i].Value.ToString().Contains(searchTxt.Text))
     row.Cells[i].Style.ForeColor = Color.Red;
} 
```

# c# - C#接口属性实现

> ID：14028850
> 
> 赞同：5
> 
> 时间：2012-12-25T08:08:30.713
> 
> 标签：c#, inheritance, interface

```
interface IAlpha
{
    IBeta BetaProperty { get; set; }
}

interface IBeta
{

}

class Alpha : IAlpha
{
    public Beta BetaProperty { get; set; } // error here
}

class Beta : IBeta
{

} 
```

> *“InterfaceTest.Alpha”没有实现接口成员“InterfaceTest.IAlpha.BetaProperty”。“InterfaceTest.Alpha.BetaProperty”无法实现“InterfaceTest.IAlpha.BetaProperty”，因为它没有匹配的返回类型“InterfaceTest.IBeta”。*

我的问题是为什么属性实现仅限于同一类型。为什么我不能使用派生类型呢？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-25T08:13:42.257

您必须实现*完全相同的*接口。例如，这*应该*是有效的：

```
 IAlpha alpha = new Alpha();
 alpha.BetaProperty = new SomeOtherIBetaImplementation(); 
```

...但这不适用于您的代码，它*总是*期望它是 a `Beta`，不是吗？

您可以为此使用泛型：

```
interface IAlpha<TBeta> where TBeta : IBeta
{
    TBeta BetaProperty { get; set; }
}

...

public class Alpha : IAlpha<Beta> 
```

当然，这可能有点矫枉过正——你最好只使用 in 类型的属性`IBeta`，`Alpha`完全按照接口。这取决于上下文。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-25T08:11:40.133

接口声明了该类将具有的一组方法，因此使用该接口的任何人都知道会发生什么。

因此，如果您正在实现该接口，则必须实现**确切的**接口，以便所有其他用户都能得到他们所期望的。

# c# - 无法访问动态创建的选定 CheckBoxList

> ID：14028851
> 
> 赞同：-1
> 
> 时间：2012-12-25T08:08:30.393
> 
> 标签：c#, asp.net, dynamically-generated

找了好久没找到，终于到了。。。

我正在成功地从数据库中动态创建一个 checkboxList。然后我想提交这些选择的检查项目，我无法访问。请找到代码....

```
protected void CreateCheckBoxListDynamically()
{
    DataTable dt = new DataTable();
    SqlConnection dBConnection = null;
    try
    {
        dBConnection = new SqlConnection();
        dBConnection.ConnectionString = ConfigurationManager.ConnectionStrings["***"].ConnectionString;
        SqlDataAdapter dataAdapter = new SqlDataAdapter();

        SqlCommand cmd = new SqlCommand("SP_GetDomesticCountryList", dBConnection);
        cmd.CommandType = CommandType.StoredProcedure;

        if (ddlTournamentType.SelectedValue != "Select" && ddlTournamentType.SelectedValue != "")
            cmd.Parameters.Add("@TournamentId", SqlDbType.Int).Value = Convert.ToInt32(ddlTournamentType.SelectedValue);
        else
            cmd.Parameters.Add("@TournamentId", SqlDbType.Int).Value = DBNull.Value;

        dBConnection.Open();
        dataAdapter.SelectCommand = cmd;
        dataAdapter.Fill(dt);

        if (dt.Rows.Count > 0)
        {

            CheckBoxList cblCountry = new CheckBoxList();
            cblCountry.ID = "cblCountryTeam";
            cblCountry.DataTextField = dt.Columns["CT_CountryTeamName"].ToString();
            cblCountry.DataValueField = dt.Columns["CT_CountryTeamId"].ToString();
            cblCountry.DataSource = dt;
            cblCountry.DataBind();

            //phCheckBoxList.Attributes.Add("class", "groupbox"); 
            phCheckBoxList.Controls.Add(cblCountry);
            phCheckBoxList.Controls.Add(new LiteralControl("<br />"));
        }

        dBConnection.Close();
    }
    catch (Exception Ex)
    {
        throw Ex;
    }
    finally
    {
        // Close data reader object and database connection
        if (dBConnection.State == ConnectionState.Open)
            dBConnection.Close();
    }
}

protected void btnInsert_Click(object sender, EventArgs e)
{
    SqlCommand cmd = null;
    SqlConnection dBConnection = new SqlConnection();
    SqlDataAdapter dataAdapter = new SqlDataAdapter();
    string countryTeamIds = "";
    try
    {
        dBConnection.ConnectionString = ConfigurationManager.ConnectionStrings["***"].ConnectionString;

        cmd = new SqlCommand("SP_AddNewSeries", dBConnection);
        cmd.CommandType = CommandType.StoredProcedure;

        cmd.Parameters.Add("@MemberId", SqlDbType.Int).Value = memberId;

        if (ddlTournamentType.SelectedValue != "Select")
            cmd.Parameters.Add("@TournamentId", SqlDbType.Int).Value = Convert.ToInt32(ddlTournamentType.SelectedValue);
        else
            cmd.Parameters.Add("@TournamentId", SqlDbType.Int).Value = DBNull.Value;

        if (!string.IsNullOrEmpty(txtSeriesStartDate.Text))
            cmd.Parameters.Add("@SeriesStartDate", SqlDbType.Date).Value = Convert.ToDateTime(txtSeriesStartDate.Text);
        else
            cmd.Parameters.Add("@SeriesStartDate", SqlDbType.Date).Value = DBNull.Value;

        if (!string.IsNullOrEmpty(txtSeriesEndDate.Text))
            cmd.Parameters.Add("@SeriesEndDate", SqlDbType.Date).Value = Convert.ToDateTime(txtSeriesEndDate.Text);
        else
            cmd.Parameters.Add("@SeriesEndDate", SqlDbType.Date).Value = DBNull.Value;

        // get values from dynamic controls
        CheckBoxList cb = (CheckBoxList)phCheckBoxList.FindControl("cblCountryTeam");
        if (cb != null)
        {
            foreach (ListItem li in cb.Items)
            {
                if (li.Selected)
                    countryTeamIds += li.Value + "~";
            }
        }

        if (!string.IsNullOrEmpty(countryTeamIds))
            cmd.Parameters.Add("@CountryTeamIds", SqlDbType.NVarChar).Value = countryTeamIds;
        else
            cmd.Parameters.Add("@CountryTeamIds", SqlDbType.NVarChar).Value = DBNull.Value;

        dBConnection.Open();

        dataAdapter.InsertCommand = cmd;
        int i = cmd.ExecuteNonQuery();

        //hdnseriesId.Value = cmd.Parameters["@SeriesId"].Value.ToString();

        if (i == 0)
        {
            msgNoRecords.Visible = true;
        }
        else
        {
            msgNoRecords.Visible = false;
            //Response.Redirect("~/country.aspx", false);
        }

        dBConnection.Close();
    }
    catch (Exception ex)
    {
        throw ex;
    }
    finally
    {
        // Close data reader object and database connection
        cmd.Dispose();
        cmd = null;
        if (dBConnection.State == ConnectionState.Open)
            dBConnection.Close();
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-25T08:59:39.653

根据您在 aspx 页面中创建的代码详细信息对象 phCheckBoxList。如果我是对的，那么这将在服务器端添加复选框产生问题。

为什么不只在服务器端创建复选框而不是 checkboxLIST。创建复选框后，您可以添加 is `<div>`（这必须在 aspx 页面中声明）。这`<div>`应该有一个 ID 并制作它，`runat="server"`这样你就可以得到它。

完成上述任务后，您可以在服务器端代码中轻松找到该 div 中的每个复选框。

# perl - Perl 测试::模拟时间 + 时间::本地时间

> ID：14028856
> 
> 赞同：1
> 
> 时间：2012-12-25T08:09:12.827
> 
> 标签：perl, time

我正在尝试用 Test::MockTime 模块替换当前时间。它工作正常：

```
use Test::MockTime qw(:all);
use Time::Local;
my $sec  = 0;
my $min  = 0;
my $hour = 14;
my $mday = 1; #1-31
my $mon  = 1; #1-12
my $year = 2013; #1970-...
set_fixed_time(timelocal($sec,$min,$hour,$mday,$mon-1,$year-1900));
print join "\n", localtime; 
```

但是，当我使用 Time::localtime 时，什么也没有发生：

```
use Time::localtime;
use Time::Local;
use Test::MockTime qw(:all);

my ($sec,$min,$hour,$mday,$mon,$year)=(0,0,14,1,1,2013);

set_fixed_time(timelocal($sec,$min,$hour,$mday,$mon-1,$year-1900));

my $t=localtime();
my $xmon=$t->mon;
my $xyear=$t->year;
my $xday=$t->mday;
my $xmon_now=$xmon+1;
my $xyear_now=$xyear+1900;

print "$xmon_now $xyear_now\n"; 
```

输出将是“12 2012”当使用 Time::localtime 时，如何更改测试中的时间？谢谢和对不起我的英语

升级版：

```
use Time::localtime;
use Test::MockTime qw(:all); 
```

没用

```
use Test::MockTime qw(:all);
use Time::localtime; 
```

工作正常）perl魔法

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-25T09:30:19.437

Test::MockTime 覆盖`localtime`，但`Time::localtime`使用`CORE::localtime`（未覆盖的版本`localtime`）。您必须重写 Time::localtime's `localtime`。

# eclipse - jsuml 正在使用我的 Eclipse IDE

> ID：14028867
> 
> 赞同：0
> 
> 时间：2012-12-25T08:10:40.137
> 
> 标签：eclipse, eclipse-plugin, uml

[我从http://jsuml.gaertner-network.de/](http://jsuml.gaertner-network.de/)下载了 jsuml-eclipse-0.8.4 。我将所有插件 jar 放在 eclipse 插件文件夹中，并以干净模式启动 eclipse。我仍然无法看到安装在 eclipse --> 首选项 --> 插件中的插件中的插件。我在带有snowlapord OS 的mac 上使用eclipse helios。

如果有人知道一些好的 javascript 中 UML 图的代码，请提出建议。

问候马哈维尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-29T12:10:00.700

至少您应该确保使用 Eclipse 3.7.1 (Indigo)。到目前为止，较新的版本无法使用，因为引入了一些不兼容的东西，但插件从未适应过。我设法让 jsuml 工作，尽管我仍然无法解析我的 .js 文件。

# c - write() 或 printf() 更好吗？

> ID：14028871
> 
> 赞同：-3
> 
> 时间：2012-12-25T08:11:10.787
> 
> 标签：c, optimization

printf 更好，因为...

*   它缓冲输出
*   它进行字符串格式化

写得更好，因为...

*   它不必计算字符串长度
*   调试起来容易得多，因为它不缓冲
*   printf 只是 write 的包装器
*   它不使用任何内存作为输出缓冲区
*   由于上述原因，通过传递字符串长度（通常已知且无需重新计算）并管理缓冲区，可以使用 write 创建比使用 printf 更优化（速度更快，内存占用更少）的程序内部（它只占用实际需要的内存，而不是一些不受程序员影响的内存）。
*   即使仅使用非格式化字符串调用 printf() 也可能存在一些开销

总而言之，我认为 printf() 更适合用于人类消费的各种调试输出（因为字符串格式），而 write() 更适合在正常操作中输出数据。

还有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-25T08:14:02.043

它实际上取决于操作系统。在 Linux 和许多 Unix 上，[write(2)](http://www.kernel.org/doc/man-pages/online/pages/man2/write.2.html)是一个低级别的[系统调用](http://www.kernel.org/doc/man-pages/online/pages/man2/syscalls.2.html)，因此是基本的、最低级别的操作来执行一些输出。（并且`printf`是上面构建的库函数`write`）。

但是，`write(2)`操作确实有开销，并且出于性能原因，您希望缓冲输出，`<stdio.h>`标准函数（如`printf`）做得很好。简单来说，避免调用`write(2)`少量数据（一个好的缓冲区大小通常是几千字节）。库`fflush`函数正在刷新缓冲区（因此可以调用`write`）。

# sql - SQL - 分组到列更新

> ID：14028872
> 
> 赞同：2
> 
> 时间：2012-12-25T08:11:32.850
> 
> 标签：sql, sql-server, tsql, sql-update

我在玩`AdvantureWorks`DB，但我没有实际销售额值`SalesOrderDetail`。此行应该包含`LineTotal`按订单 ID 的聚合。

我需要将这些值输入到每个订单 ID 行的实际销售额列中：

```
select SUM(LineTotal) as ActualSales
from Sales.SalesOrderDetail
group by SalesOrderID 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-25T08:14:11.933

您需要将要分组的字段添加到查询中：

```
select SalesOrderID, sum(LineTotal) as ActualSales 
from SalesOrderDetail 
group by SalesOrderID 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-25T08:21:08.863

你可以`UPDATE`这样`JOIN`：

```
UPDATE od
SET od.ActualSalesColumn = g.ActualSales
FROM Sales.SalesOrderDetail od
INNER JOIN
(
    SELECT 
      SalesOrderDetail, 
      SUM(LineTotal) as ActualSales 
    FROM Sales.SalesOrderDetail 
    GROUP BY SalesOrderID
) g ON od.SalesOrderID = g.SalesOrderID; 
```

**或者：**使用 CTE：

```
WITH ActualSales
AS
(
     SELECT 
       SalesOrderDetail, 
       SUM(LineTotal) as ActualSales 
     FROM Sales.SalesOrderDetail 
     GROUP BY SalesOrderID
)
UPDATE od
SET od.ActualSalesColumn = g.ActualSales
FROM Sales.SalesOrderDetail od
INNER JOIN ActualSales g ON od.SalesOrderID = g.SalesOrderID; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-25T10:19:09.447

```
UPDATE x
SET x.ActualSales = x.NewActualSales
FROM (
      SELECT ActualSales, SUM(LineTotal) OVER (PARTITION BY SalesOrderID) AS NewActualSales
      FROM Sales.SalesOrderDetail
      ) x 
```

# shell - 如何更改“>”输出文件的布局

> ID：14028874
> 
> 赞同：1
> 
> 时间：2012-12-25T08:11:40.117
> 
> 标签：shell, stdout

我用'>'输出一个文件，但我不喜欢它的形式；我想改变它的布局？例如： wrap 后面的特殊字符串

该文件如下所示：

```
#0 xxxxxxxxxxxxxx   #1xxxxxxxxxxxxxxxxx #2xxxxxxxxxx 
```

我希望它看起来像：

```
#0 xxxxxxxxxxxx
#1 xxxxxxxxxxxx
#2 xxxxxxxxxxx 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-25T09:33:30.873

您可以尝试在 # 字符之前添加换行符的这种逻辑。

```
echo "#0 xxxxxxxxxxxxxx   #1xxxxxxxxxxxxxxxxx #2xxxxxxxxxx" | sed 's/\#/\n#/g' 
```

# java - java.lang.NoSuchMethodError:com.google.gdata.client.media.MediaService.insert(MediaService.java:318)

> ID：14028875
> 
> 赞同：0
> 
> 时间：2012-12-25T08:11:47.283
> 
> 标签：java, google-docs-api

```
DocsService client= new DocsService ("idea");
 client.useSsl ();
  client.setOAuthCredentials (oauthParameters, new OAuthHmacSha1Signer ());
    DocumentListEntry newEntry= new com.google.gdata.data.docs.SpreadsheetEntry ();
        newEntry.setTitle (new PlainTextConstruct ("GIdeaDB"));
        DocumentListEntry insertedEntry= client.insert (new URL (
       "https://docs.google.com/feeds/default/private/full/?xoauth_requestor_id="+                        userEmail), newEntry); 
```

但我在 client.insert 中得到了 NoSuchMethodException（新 URL（“https://docs.google.com/feeds/default/private/full/?xoauth_requestor_id="+ userEmail), newEntry）；

我做什么请帮帮我....

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-25T08:15:50.903

A`NoSuchMethodError`通常意味着您使用与运行代码不同的库版本来编译代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-25T08:28:38.360

其中一种插入方法采用三个参数，一种采用两个参数。这两种方法都不匹配您传入的内容。您正在编译哪个版本的库以及正在运行哪个版本？正如我在评论中所说，如果它编译但不运行，很可能是版本不匹配。

请参阅[https://developers.google.com/gdata/javadoc/com/google/gdata/client/docs/DocsService](https://developers.google.com/gdata/javadoc/com/google/gdata/client/docs/DocsService)

# android - 远程查看android类似于vnc

> ID：14028877
> 
> 赞同：1
> 
> 时间：2012-12-25T08:12:01.227
> 
> 标签：android, tcp, client, viewer

我知道这看起来很奇怪。我想知道有没有一种方法可以将我的 android 主屏幕流式传输到我的桌面，当然我可以下载 vnc 并做到这一点。但我想自己做，并学习如何去做。我在 C# 中做了远程查看器，在 C# 中我使用了位图。现在，我需要在 java/android 中使用位图来远程查看我的手机主屏幕还是有更有效的方法来做到这一点？

# ios - 如何在 CAGradientLayer 中从上到下和从左到右设置着色器颜色？

> ID：14028882
> 
> 赞同：0
> 
> 时间：2012-12-25T08:12:34.343
> 
> 标签：ios, shader, cagradientlayer

我想绘制一个 UiView 的背景使用着色器颜色。所以我找到了 QuartzDemo。但我想将着色器设置为水平从白色到红色，在垂直方向从白色到黑色。我能做什么？？？需要你的帮助。提前谢谢你！

# css - 垂直对齐 div 元素内的中心

> ID：14028891
> 
> 赞同：0
> 
> 时间：2012-12-25T08:14:34.337
> 
> 标签：css, html

我的文字只有 1 行，我的图片将适合容器高度。
我希望文本和图片垂直对齐中心。
我尝试使用负值和相对位置的边距顶部文本类，但没有什么能满足我真正想要的。

[jsfriddle在这里](http://jsfiddle.net/wCAwm/1/)

**HTML**

```
<div id="friend_select">
        <div class="Friend">
            <img class="Picture" src="http://graph.facebook.com/harell/picture?type=square&width=80&height=80" />
            <span class="Name">First Name Last Name 1</span>
        </div>
        <div class="Friend">
            <img class="Picture" src="http://graph.facebook.com/harell/picture?type=square&width=80&height=80" />
            <span class="Name">First Name Last Name 2</span>
        </div>
</div> 
```

**CSS**

```
#friend_select{ padding: 5px; width: 400px; height: 500px; }
.Friend{ height: 80px; } 
.Friend .Name{ line-height: 80px; }
.Friend .Picture{ line-height: 80px; width: 80px; height: 80px; } 
```

​</p>

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-25T08:27:40.203

我建议这个修复：

```
.Friend .Name{ line-height: 80px; vertical-align:top; } 
```

现场演示：http: [//jsfiddle.net/keaukraine/WNT7U/](http://jsfiddle.net/keaukraine/WNT7U/)

适用于最新的 Firefox、Chrome 和 IE 到 IE8。对于 IE7，应用此 hack：

```
.Friend .Name { *zoom:1; } 
```

# php - Facebook 应用程序未检索用户信息

> ID：14028895
> 
> 赞同：0
> 
> 时间：2012-12-25T08:15:07.357
> 
> 标签：php, facebook-graph-api

我刚刚使用 Facebook PHP SDK 构建了一个应用程序并进行了设置。我正在测试它，虽然我从我的个人资料中显示了图像，但请求的用户信息没有显示出来。这是结果的屏幕截图 ![结果截图](../Images/ead7f9a521bd0ec82aacbb59f1cebcd8.png)

这是我上传到服务器的 php 代码。请注意，App ID 和 Secret 已从此处删除。

```
<?php

require ('src/facebook.php');

$app_id = " "; //has been removed
$secret = " "; //has been removed
$app_url = "http://apps.facebook.com/instahomework/";

// Create our Application instance (replace this with your appId and secret). 
$facebook = new Facebook(array(
  'appId'  => $app_id,
  'secret' =>  $secret,
));

// Get User ID
$user = $facebook->getUser();

if ($user) {
  try {
    // Proceed knowing you have a logged in user who's authenticated.
    $user_profile = $facebook->api('/me');
  } catch (FacebookApiException $e) {
    error_log($e);
    $user = null;
  }
}

// Login or logout url will be needed depending on current user state.
if ($user) {
  $logoutUrl = $facebook->getLogoutUrl();
} else {
  $loginUrl = $facebook->getLoginUrl(); 
}
// This call will always work since we are fetching public data.
$naitik = $facebook->api('/naitik');

?>
<!doctype html>
<html xmlns:fb="http://www.facebook.com/2008/fbml">
<head>
    <title>php-sdk example 1 - user login and authorisation</title>
    <style>
        body { font-family: Helvetica, Verdana, Arial, sans-serif; }
        a { text-decoration:none; }
        a:hover { text-decoration:underline; }
    </style>
</head>
<body>
<pre>
<?php print_r($_REQUEST); ?>
</pre>
    <?php if ($user) { ?>
        <h2>Welcome</h2>
        <img src="https://graph.facebook.com/<?php echo $user; ?>/picture"><br/>
        <a href="<?php echo $link; ?>"><?php echo $name; ?></a><br/>
        <br/>
        Gender : <?php echo $gender; ?><br/>
        Locale : <?php echo $locale; ?><br/>
        Username : <?php echo $username; ?><br/>
    <?php } else { ?>
        <strong><em>You have not granted this App permission to access your data. Redirecting to permissions request...</em></strong>
<?php } ?>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-25T08:28:47.310

您应该将您的 HTML 代码替换为：

```
 <h2>Welcome</h2>
    <img src="https://graph.facebook.com/<?php echo $user; ?>/picture"><br/>
    <a href="<?php echo $user_profile['link']; ?>"><?php echo $user_profile['name']; ?></a><br/>
    <br/>
    Gender : <?php echo $user_profile['gender']; ?><br/>
    Locale : <?php echo $user_profile['locale']; ?><br/>
    Username : <?php echo $user_profile['username']; ?><br/> 
```

由于这行代码请求了您想要的“用户信息”：

```
$user_profile = $facebook->api('/me'); 
```

并存储到`$user_profile`数组中。

另一种解决方法（但不推荐）是[`extract()`](http://www.php.net/manual/en/function.extract.php)通过添加以下代码行来将数据从 facebook 提取到全局变量范围中：

```
extract($user_profile); 
```

# asp.net - 页面加载前的 DevExpress 树列表数据绑定

> ID：14028897
> 
> 赞同：0
> 
> 时间：2012-12-25T08:15:18.320
> 
> 标签：asp.net, devexpress, treelist

我想在pageload（）事件之前进行数据绑定（）。我使用ondatabound（）将aspx树列表用于数据绑定。但是这个事件在pageload（）之后工作

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T08:39:42.357

为什么不在每次页面加载时将控件绑定到 Page_Init 事件处理程序中？

# iphone - 获取下一个日期和前一天的日期

> ID：14028908
> 
> 赞同：2
> 
> 时间：2012-12-25T08:17:02.850
> 
> 标签：iphone, ios, nsdate, nsdateformatter

我基本上想将特定日期（x）转换为前一天日期（x - 1 天）以及第二天日期（x + 1 天）。我为此使用以下代码：

```
NSDate *datePlusOneDay = [currentDate dateByAddingTimeInterval:(60 * 60 * 24)]; 
```

但是我的日期 (x) 是 NSString 格式，在应用上述代码之前，我需要将 NSString( `myDateString`) 转换为 NSDate( )。`myDate`我有一个 NSString 包含格式为 MM-dd-yyyy 的日期。为了进行转换，我使用了以下代码，但我得到了荒谬的值。

```
 NSLog(@"myDateString=%@",myDateString);//output:myDateString=10-25-2012//all correct
NSDateFormatter *formatter = [[NSDateFormatter alloc] init];
[formatter setDateFormat:@"MM-dd-yyyy"];
NSDate *myDate=[formatter dateFromString:myDateString];
NSLog(@"myDate=%@",myDate);//output:myDate=2012-10-24 18:30:00 +0000 // I only want the date to be shown // and why has the format changed
NSDate *datePlusOneDay = [currentDate dateByAddingTimeInterval:(60 * 60 * 24)];
NSLog(@"datePlusOneDay=%@",datePlusOneDay);//output:datePlusOneDay=2012-10-25 18:30:00 +0000// I only want the date to come , not time // and why has the format changed 
```

稍后我需要将 NSDate 转换为 NSString

```
NSString *curentString=[formatter stringFromDate:datePlusOneDay];
NSLog(@"curentString=%@",curentString); //output:curentString=10-26-2012 
```

同样，我也想获得上一个日期。请帮助伙计们！和嗬嗬圣诞快乐！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-25T09:00:16.010

做为：`componets.day = 1`获得下一个，`-1`为前一天。

```
NSDate *date = [NSDate date]; // your date from the server will go here.
NSCalendar *calendar = [[NSCalendar alloc] initWithCalendarIdentifier:NSGregorianCalendar];
NSDateComponents *components = [[NSDateComponents alloc] init];
components.day = 1;
NSDate *newDate = [calendar dateByAddingComponents:components toDate:date options:0];

NSLog(@"newDate -> %@",newDate); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-25T08:46:27.020

下面的代码应该让你知道上一个日期：

```
NSCalendar *gregorian = [[NSCalendar alloc] initWithCalendarIdentifier:NSGregorianCalendar];
NSDateComponents *offsetComponents = [[NSDateComponents alloc] init];
[offsetComponents setDay:-1]; // replace "-1" with "1" to get the datePlusOneDay
NSDate *dateMinusOneDay = [gregorian dateByAddingComponents:offsetComponents toDate:myDate options:0]; 
```

圣诞快乐 ：）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-25T08:52:01.743

```
NSCalendar *cal = [NSCalendar currentCalendar];
NSDateComponents *components = [cal components:( NSHourCalendarUnit | NSMinuteCalendarUnit | NSSecondCalendarUnit ) fromDate:[[NSDate alloc] init]];

[components setHour:-[components hour]];
[components setMinute:-[components minute]];
[components setSecond:-[components second]];
NSDate *today = [cal dateByAddingComponents:components toDate:[[NSDate alloc] init] options:0]; //This variable should now be pointing at a date object that is the start of today (midnight);

[components setHour:-24];
[components setMinute:0];
[components setSecond:0];
NSDate *yesterday = [cal dateByAddingComponents:components toDate: today options:0]; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-25T09:04:59.540

在上一个日期尝试这个简单的解决方案：-

```
NSDate *datePlusOneDay = [[NSDate date] dateByAddingTimeInterval:-(60 * 60 * 24)];
NSLog(@"datePlusOneDay=%@",datePlusOneDay); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2019-04-09T06:56:02.667

斯威夫特 5 解决方案

```
let calendar = Calendar.current
calendar.date(byAdding: .day, value: -2, to: Date()) 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-04-30T12:31:38.473

前一天的功能

```
-(void)previousDay
{
  NSDate *today = [NSDate date];
    NSDateFormatter *dateFormat = [[NSDateFormatter alloc] init];
    [dateFormat setDateFormat:@"dd/MM/yyyy"];
    dateString = [dateFormat stringFromDate:today];

    NSCalendar *calendar = [NSCalendar currentCalendar];
    NSDateComponents *comps = [NSDateComponents new];
    comps.day =-1;
    NSDate *sevenDays = [calendar dateByAddingComponents:comps toDate:[NSDate date] options:0];
    [dateFormat setDateFormat:@"dd/MM/yyyy"];
    EndingDate = [dateFormat stringFromDate:sevenDays];

} 
```

第二天的功能

```
-(void)nextDay
{
  NSDate *today = [NSDate date];
    NSDateFormatter *dateFormat = [[NSDateFormatter alloc] init];
    [dateFormat setDateFormat:@"dd/MM/yyyy"];
    dateString = [dateFormat stringFromDate:today];

    NSCalendar *calendar = [NSCalendar currentCalendar];
    NSDateComponents *comps = [NSDateComponents new];
    comps.day =1;
    NSDate *sevenDays = [calendar dateByAddingComponents:comps toDate:[NSDate date] options:0];
    [dateFormat setDateFormat:@"dd/MM/yyyy"];
    EndingDate = [dateFormat stringFromDate:sevenDays];

} 
```

# c# - 登录以使用 Live SDK、Windows 应用商店应用

> ID：14028912
> 
> 赞同：3
> 
> 时间：2012-12-25T08:17:49.190
> 
> 标签：c#, xaml, windows-8, windows-store-apps

我正在开发一个应用程序（Windows 应用商店）来访问 SkyDrive 内容。要登录 Live，我使用下面的代码片段。

```
 try
        {

            var uri = "https://login.live.com/oauth20_authorize.srf"; 
            var authorizeUri = new StringBuilder(uri);

            authorizeUri.AppendFormat("?client_id={0}&", "000000004C0DE9B7"); //This is my Client ID
            authorizeUri.AppendFormat("scope={0}&", "wl.signin");             
            authorizeUri.AppendFormat("response_type={0}&", "code");
            authorizeUri.AppendFormat("redirect_uri={0}", (""));  //I don't have redirect URL.

            LiveAuthClient auth = new LiveAuthClient(authorizeUri.ToString());

            LiveLoginResult loginResult = await auth.LoginAsync(new string[] { "wl.basic" });
            if (loginResult != null)
            {
                if (loginResult.Status == LiveConnectSessionStatus.Connected)
                {
                    this.txtStatus.Text = "Signed in";
                }
            }
        }
        catch (LiveAuthException exception)
        {
            this.txtStatus.Text = exception.Message+ " Error";   
        }
    } 
```

有了这个我总是得到以下异常：“该应用程序未正确配置为使用 Live Connect 服务。......”

我试图获取我的 Windows 应用商店应用程序的包标识。因为，它把我带到付费注册页面，我没有这样做。[ [https://appdev.microsoft.com/StorePortals/en-us/account/signup/start](https://appdev.microsoft.com/StorePortals/en-us/account/signup/start) ] 我不确定这是否是问题的原因。

我也试过这个链接来注册我的应用程序。这也行不通。

[https://manage.dev.live.com/build?wa=wsignin1.0](https://manage.dev.live.com/build?wa=wsignin1.0)

如果有人可以帮助我解决此问题，我将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T15:27:28.953

对于使用 Live Connect API 的 Windows 应用商店应用程序，它需要有一个包标识，您只能让我注册为 Windows 应用商店开发人员。

Windows Phone、iOS 和 Android 应用程序只需要客户端 ID。所有其他应用程序都需要客户端 ID、客户端密码和重定向域。

这就是为什么它不起作用。有关详细信息，请参阅：http: [//msdn.microsoft.com/en-us/library/live/hh826541.aspx](http://msdn.microsoft.com/en-us/library/live/hh826541.aspx)

希望有帮助。

# c++ - 类对象不能访问枚举器标记名称？

> ID：14028916
> 
> 赞同：1
> 
> 时间：2012-12-25T08:19:08.887
> 
> 标签：c++, enums

```
//In Analyzer.h

class Analyzer
{
public :
    enum color{red, green ,blue};
Analyzer()
{
     cout<<"ctor";
}
    ~Analyzer();
};

//In main.cpp
#include"Analyzer.h"
int main()
{
    Analyzer *Ana = new Analyzer();
    Ana->color c ;//Error
    Analyzer::color c ;//Ok
    return 0
} 
```

我很困惑为什么类对象不能访问颜色，而使用类名可以访问颜色。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-25T08:52:52.163

成员访问运算符`->`只能`.`用于访问数据成员、枚举成员和类的成员函数。顺便说一句，使用这些运算符访问静态数据成员和函数是完全合法的，即使这种访问不需要左侧（无论如何都要评估左侧）。

这些运算符不能用于访问类的嵌套类型。

在您的示例`color`中是嵌套类型，这意味着这`Ana->color`不是有效的构造。同时，`Ada->red`有效。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-25T08:49:59.780

您只能通过箭头运算符访问类的数据成员和成员函数。枚举是一种嵌套类型。

# javascript - jquery load（）不适用于数组循环

> ID：14028919
> 
> 赞同：2
> 
> 时间：2012-12-25T08:19:15.073
> 
> 标签：javascript, jquery, arrays, loops

我想要做的是将数百个文件的列表存储在一个数组中，并使用 jquery load() 函数一个接一个地加载它们的内容。

我对 jquery 和 javascript 知之甚少，这是我设法编写的，但它不起作用。

```
var files=['index1c.html','index23c.html'];

for(var index = 0; index < files.length; index++){
    var file = files[index];

$('#result').load('file .desc');
} 
```

我认为我在给出的变量文件中有一些问题`load()`，这是正确的方法吗？如果我直接写一个文件名代替`file`如下所示，它工作正常：

```
$('#result').load('index1c.html .desc'); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-25T08:20:47.577

改变：

```
$('#result').load('file .desc'); 
```

到：

```
$('#result').load(file + ' .desc'); 
```

请注意，加载方法会在添加新内容之前删除元素的内容。您可以创建唯一 ID，例如`result1`, `result2`... 和代码：

```
for(var index = 0; index < files.length; index++){
    var file = files[index];
    $('#result' + (index + 1) ).load(file + ' .desc');
} 
```

或者您可以使用类和`eq`方法：

```
var $results = $('.results')
for(var index = 0; index < files.length; index++){
    var file = files[index];
    $results.eq(index).load(file + ' .desc');
} 
```

或者，如果您想附加`data`您可以使用`$.get`实用程序函数而不是`load`方法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-25T08:20:55.273

您正在使用文字 string `'file .desc'`。

看起来像你想要`file + '.desc'`的。

`'a b'`是字符串`a b`，而`a + ' b'`是带有附加到字符串的变量 a 的内容的字符串`' b'`。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-02-04T12:25:42.920

尝试使用`jQuery.ajaxSetup({async:false});`

`{async:false}`将保持其余代码的执行。一旦你得到 ajax 代码的响应，剩下的代码就会被执行。执行ajax响应后重置`async`为true`jQuery.ajaxSetup({async:true});`

所以最终的代码将是

```
var files=['index1c.html','index23c.html'];

for(var index = 0; index < files.length; index++){
    var file = files[index];
    jQuery.ajaxSetup({async:false});
    $('#result').load('file .desc');
    jQuery.ajaxSetup({async:true})
} 
```

# jsf - 如何将war文件中的JSF页面连接到企业应用程序中jar文件中的托管bean

> ID：14028923
> 
> 赞同：2
> 
> 时间：2012-12-25T08:20:12.700
> 
> 标签：jsf, netbeans

我的 JSF Java Enterprise 应用程序无法访问支持 bean；错误消息是 -

`/master/currency/addCurrency.xhtml @19,94 value="#{addCurrencyController.code}": Target Unreachable, identifier 'addCurrencyController' resolved to null`

我在这里扫描了上一个问题，解决方案（问题 #7663818）是在 jar 文件的 META-INF 文件夹中有一个空白 faces-config.xml。在这种情况下，jar 文件是 war 文件的一部分。我无法使其工作，因为我的 xhtml 处于战争状态，AddCurrencyController 请求范围的托管 bean 在 jar 中，并且两者都打包在耳中。

我的 application.xml 是 Maven 生成的，如下所示。

```
<?xml version="1.0" encoding="UTF-8"?>
<application xmlns="http://java.sun.com/xml/ns/javaee" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/application_6.xsd" version="6">
  <display-name>ruwi-app</display-name>
  <module>
    <web>
      <web-uri>ruwi-web-1.0.war</web-uri>
      <context-root>/ruwi</context-root>
    </web>
  </module>
  <module>
    <ejb>ruwi-ejb-1.0.jar</ejb>
  </module>
  <library-directory>lib</library-directory>
</application> 
```

我使用的是 Netbeans 7.3 Beta 2 IDE，服务器是捆绑的 GlassFish。

谢谢

-- MH

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-25T12:54:31.640

仅当包含托管 bean 的 JAR 位于 WAR 的`/WEB-INF/lib`文件夹中时（因此当 JAR 位于 EAR 的文件夹中时不起作用`/lib`）并且 JAR 具有与 JSF 2.0 兼容的 JAR `/META-INF/faces-config.xml`（因此不是空白的！），它才有效

```
<?xml version="1.0" encoding="UTF-8"?>
<faces-config
    xmlns="http://java.sun.com/xml/ns/javaee"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-facesconfig_2_0.xsd"
    version="2.0">
</faces-config> 
```

您还应该确保您的 webapp`/WEB-INF/faces-config.xml`没有`metadata-complete="true"`设置属性。

# mediawiki - wikitravel - 如何获取图片链接

> ID：14028925
> 
> 赞同：2
> 
> 时间：2012-12-25T08:20:18.890
> 
> 标签：mediawiki, mediawiki-api

我有 wikitravel.org 的完整 xml 转储。现在我想从

```
[[Image:Iwamotoji PilgrimGirl.JPG|thumb|print=full|Pilgrim traveling on foot, [[Kubokawa]]]] 
```

曾经有一个用于此的[API](http://wikitravel.org/wiki/en/api.php)。但似乎它现在已被禁用。

在进行一些研发时，我发现 URL 不是特定的模式。

[芝加哥主图](http://wikitravel.org/upload/shared//b/b0/Skyline_from_Millenium_Park.jpg)

[芝加哥城市巴士](http://wikitravel.org/upload/shared//1/13/Ctabus.jpg)

能否请您告诉我如何才能获得文字中图像的实际 URL（拇指和常规）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-25T15:11:13.080

几乎所有 Wikitravel 的内容都被[分叉](http://en.wikipedia.org/wiki/Wikitravel#Community_fork.2C_2012)给了[Wikivoyage](http://en.wikivoyage.org/wiki/Main_Page)，它*确实*有一个功能性[API](http://en.wikivoyage.org/w/api.php)。所以你可以直接[查询 Wikivoyage API](http://en.wikivoyage.org/w/api.php?action=query&titles=Image%3aIwamotoji%20PilgrimGirl.JPG&prop=imageinfo&iiprop=url)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-25T08:48:50.577

在花了更多时间进行研发之后。我找到了以下算法

```
$base_url = "http://wikitravel.org/upload/shared/";
$image_name = "XYZ 123.JPG";
$image_name = str_replace(" ","_",$image_name);
$md5 = md5($image_name); // MD5 hash of the image
$dir = substr($md5, 0,1).'/'.substr($md5, 0,2);
$image_url = $base_url . $dir . $image_name; 
```

资料来源：[*文件路径中奇怪命名的组件是什么？*来自 Commons 常见问题解答](http://commons.wikimedia.org/wiki/FAQ#What_are_the_strangely_named_components_in_file_paths.3F)

我希望它会帮助别人。

# c# - 使用 c# 进行 Jquery Ajax 网页抓取

> ID：14028934
> 
> 赞同：0
> 
> 时间：2012-12-25T08:20:58.213
> 
> 标签：c#, ajax, web-scraping

我尝试使用 c#.net 3.5 应用程序废弃网页，但我无法废弃整页，因为某些内容通过 jquery Ajax 显示。

[看到这个](http://www.racingpost.com/greyhounds/result_home.sd#resultDay=2012-12-16&meetingId=18&isFullMeeting=true)

这是我的代码

```
 private void button1_Click(object sender, EventArgs e)
    {
        string url = "http://www.racingpost.com/greyhounds/result_home.sd#resultDay=2012-12-16&meetingId=18&isFullMeeting=true";

        WebClient w = new WebClient();
        string s = w.DownloadString(url);

    } 
```

我认为我需要 Ajax 显示的网站上的比赛结果。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-25T08:56:30.173

[http://www.racingpost.com/greyhounds/result_by_meeting_full.sd?r_date=2012-12-16&meeting_id=18](http://www.racingpost.com/greyhounds/result_by_meeting_full.sd?r_date=2012-12-16&meeting_id=18)

如果您的网络浏览器使用 Chrome，您可以打开开发人员工具 (F12) 并查看“网络”选项卡以查看页面加载后需要哪些资源。上面的 URL 是我注意到的 URL 之一，它似乎获得了一些结果。如果您知道或可以解析 date 和 meeting_id，您可能可以像使用主页一样直接拨打电话。

另一种可能的选择是使用实际的[Web 浏览器控件](http://msdn.microsoft.com/en-us/library/system.windows.forms.webbrowser.aspx)并在所有内容加载完成后扫描 DOM。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-25T09:02:52.550

我认为您需要使用`System.Net`命名空间。
您需要做的是`HttpRequest`在这样的帮助下创建

```
WebRequest webRequest = WebRequest.Create("http://www.racingpost.com/greyhounds/result_home.sd#resultDay=2012-12-16&meetingId=18&isFullMeeting=true");
WebResponse webResp = webRequest.GetResponse(); 
```

我想这也会对 Ajax 数据给出完整的响应。

# windows - 安装 boost.log (windows 7 使用代码块 12.11+gcc 4.7.1)

> ID：14028937
> 
> 赞同：2
> 
> 时间：2012-12-25T08:22:01.477
> 
> 标签：windows, boost, installation, codeblocks, boost-log

我正在尝试在 CodeBlocks 12.11 上构建和运行 Boost.Log 库。我没有使用 boost 和 boost.log 的经验，并且想学习它，所以首先我需要安装它。

## 安装升压

首先，我按照有关[如何使用代码块安装 boost 的步骤进行操作](http://wiki.codeblocks.org/index.php?title=BoostWindowsQuickRef)

结果在两台不同的计算机上（都有 Windows 7）我在 %mypath%\boost\lib 中得到了不同的文件列表（在一台计算机上只有 6 个文件，在另外 52 个）

更大的清单是：

*   libboost_chrono-mgw47-mt-1_52.a
*   libboost_chrono-mgw47-mt-d-1_52.a
*   libboost_date_time-mgw47-mt-1_52.a
*   libboost_date_time-mgw47-mt-d-1_52.a
*   libboost_exception-mgw47-mt-1_52.a
*   libboost_exception-mgw47-mt-d-1_52.a
*   libboost_filesystem-mgw47-mt-1_52.a
*   libboost_filesystem-mgw47-mt-d-1_52.a
*   libboost_graph-mgw47-mt-1_52.a
*   libboost_graph-mgw47-mt-d-1_52.a
*   libboost_iostreams-mgw47-mt-1_52.a
*   libboost_iostreams-mgw47-mt-d-1_52.a
*   libboost_locale-mgw47-mt-1_52.a
*   libboost_locale-mgw47-mt-d-1_52.a
*   libboost_math_c99-mgw47-mt-1_52.a
*   libboost_math_c99-mgw47-mt-d-1_52.a
*   libboost_math_c99f-mgw47-mt-1_52.a
*   libboost_math_c99f-mgw47-mt-d-1_52.a
*   libboost_math_c99l-mgw47-mt-1_52.a
*   libboost_math_c99l-mgw47-mt-d-1_52.a
*   libboost_math_tr1-mgw47-mt-1_52.a
*   libboost_math_tr1-mgw47-mt-d-1_52.a
*   libboost_math_tr1f-mgw47-mt-1_52.a
*   libboost_math_tr1f-mgw47-mt-d-1_52.a
*   libboost_math_tr1l-mgw47-mt-1_52.a
*   libboost_math_tr1l-mgw47-mt-d-1_52.a
*   libboost_prg_exec_monitor-mgw47-mt-1_52.a
*   libboost_prg_exec_monitor-mgw47-mt-d-1_52.a
*   libboost_program_options-mgw47-mt-1_52.a
*   libboost_program_options-mgw47-mt-d-1_52.a
*   libboost_random-mgw47-mt-1_52.a
*   libboost_random-mgw47-mt-d-1_52.a
*   libboost_regex-mgw47-mt-1_52.a
*   libboost_regex-mgw47-mt-d-1_52.a
*   libboost_serialization-mgw47-mt-1_52.a
*   libboost_serialization-mgw47-mt-d-1_52.a
*   libboost_signals-mgw47-mt-1_52.a
*   libboost_signals-mgw47-mt-d-1_52.a
*   libboost_system-mgw47-mt-1_52.a
*   libboost_system-mgw47-mt-d-1_52.a
*   libboost_test_exec_monitor-mgw47-mt-1_52.a
*   libboost_test_exec_monitor-mgw47-mt-d-1_52.a
*   libboost_thread-mgw47-mt-1_52.a
*   libboost_thread-mgw47-mt-d-1_52.a
*   libboost_timer-mgw47-mt-1_52.a
*   libboost_timer-mgw47-mt-d-1_52.a
*   libboost_unit_test_framework-mgw47-mt-1_52.a
*   libboost_unit_test_framework-mgw47-mt-d-1_52.a
*   libboost_wave-mgw47-mt-1_52.a
*   libboost_wave-mgw47-mt-d-1_52.a
*   libboost_wserialization-mgw47-mt-1_52.a
*   libboost_wserialization-mgw47-mt-d-1_52.a

它与 bjam 消息一起安装：

```
...failed updating 10 targets...
...skipped 16 targets...
...updated 764 targets... 
```

该列表是否已满，或者我安装的 boost 错过了一些库？为什么两台不同的计算机会对相同的操作给出不同的结果（我两次从链接执行相同的步骤）？（只有 6 个结果库的比较没有 VC2010，有 52 个库的比较有 VC2010，这可能是原因吗？）

## 安装 boost.log

[然后，在有 52 个库的机器上，我开始按照如何安装 boost.log 的](http://boost-log.sourceforge.net/libs/log/doc/html/log/installation.html)步骤安装 boost.log

并获得了两个额外的库：

*   libboost_log_setup-mgw47-mt-1_52.a（大小 22733 kb）
*   libboost_log_setup-mgw47-mt-d-1_52.a（大小 74933 kb）

来自 bjam 的下一条结果消息：

```
...failed updating 6 targets...
...skipped 10 targets...
...updated 225 targets... 
```

然后我从 boost.log 发行版中取样：

```
#include <iostream>

//#define BOOST_LOG_DYN_LINK

#include <boost/shared_ptr.hpp>
#include <boost/make_shared.hpp>

#include <boost/log/common.hpp>
#include <boost/log/formatters.hpp>
#include <boost/log/filters.hpp>

#include <boost/log/utility/init/to_file.hpp>
#include <boost/log/utility/init/to_console.hpp>
#include <boost/log/utility/init/common_attributes.hpp>

#include <boost/log/attributes/timer.hpp>

namespace logging = boost::log;
namespace fmt = boost::log::formatters;
namespace flt = boost::log::filters;
namespace sinks = boost::log::sinks;
namespace attrs = boost::log::attributes;
namespace src = boost::log::sources;
namespace keywords = boost::log::keywords;

using boost::shared_ptr;

int main(int argc, char* argv[])
{
    logging::init_log_to_console(std::clog, keywords::format = "%TimeStamp%: %_%");
    logging::add_common_attributes();
    src::logger lg;
    BOOST_LOG(lg) << "Hello, World!";
    return 0;
} 
```

将库添加到项目（以及包含文件的路径）：还有 libboost_log_setup-mgw47-mt-d-1_52.a

但是在编译时出现以下错误：

```
obj\Debug\main.o||In function 'ZN5boost10log_mt_nt57sources12basic_loggerIcNS1_6loggerENS1_19single_thread_modelEED2Ev':|
C:\Program Files (x86)\CodeBlocks\include\boost-1_52\boost\log\sources\basic_logger.hpp|88|undefined reference to `boost::log_mt_nt5::basic_attribute_set<char>::~basic_attribute_set()'| 
```

并且不知道如何解决它们。

请解释一下（如果可能的话）：

*   我怎么知道我的 boost 编译/安装是否已满以及该怎么做，如果不是（我确定给我 6 个库的安装没有满，但我不知道该怎么办）？
*   我怎么知道我的 boost.log 编译已满？
*   我读到我必须将 boost.lib 构建为共享对象，但 libs 位于子目录“link-static”中，尽管命令 runtime-link=shared 用于 bjam。我应该对此做些什么吗？
*   我应该怎么处理我得到的错误？

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-20T07:14:02.810

我没有看到您在上面应用的列表中有日志库。未定义的引用意味着您的链接器在您提供的所有库中都找不到任何合适的函数。

听起来您错过了构建 boost 日志库，并且您还收到了来自链接器的消息，无法找到该库。

# python - TypeError: __init__() 得到了一个意外的关键字参数

> ID：14028939
> 
> 赞同：2
> 
> 时间：2012-12-25T08:22:22.250
> 
> 标签：python, google-app-engine, typeerror, keyword-argument

下面是我用于将新案例输入 GAE 数据存储的表单的代码。当我尝试输入表单时，我收到下面的类型错误，说我使用了意外的关键字参数。我是 python 新手，GAE 有人知道我做错了什么吗？

```
class Case(db.Model):
    user = db.StringProperty(required = True)
    title = db.StringProperty(required = True)
    facts = db.TextProperty()
    holding = db.TextProperty()
    rule_of_law = db.TextProperty()
    general_notes = db.TextProperty()
    key_concepts = db.TextProperty()        

class NewCase(Handler):
    def get(self,title="",
            facts="",
            holding="",
            rule_of_law="",
            general_notes="",
            key_concepts="",
            error=""):

        if self.user:
            self.render('newcase.html', title=title,
                        facts=facts,
                        holding=holding,
                        rule_of_law=rule_of_law,
                        general_notes=general_notes,
                        key_concepts=key_concepts,
                        error=error)
        else:
            self.redirect('/login')

def post(self):
    if not self.user:
        self.redirect('/')

    user = self.read_secure_cookie('user_id')    
    self.title = self.request.get('title')
    self.facts = self.request.get('facts')
    self.holding = self.request.get('holding')
    self.rule_of_law = self.request.get('rule_of_law')
    self.general_notes = self.request.get('general_notes')
    self.key_concepts = self.request.get('key_concepts')

    if self.title:
        c = Case(user = user,
                 title = self.title,
                 facts = self.facts,
                 holding = self.holding,
                 rule_of_law = self.rule_of_law,
                 general_notes = self.general_notes,
                 key_concepts = self.key_concepts)

        c.put()

        self.redirect('/%s' % c.key().id())

    else:
        error = "You must enter a title."
        self.render('newcase.html',title = self.title, 
```

我得到的错误：

```
File "C:\Users\Chris\Documents\Web Apps\legalstudybuddy\main.py", line 233, in post
    key_concepts = self.key_concepts)
TypeError: __init__() got an unexpected keyword argument 'rule_of_law' 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-25T09:23:27.460

我假设您正在使用 Django 模板。来自：[https ://developers.google.com/appengine/docs/python/gettingstarted/templates](https://developers.google.com/appengine/docs/python/gettingstarted/templates)

> `template.render(path, template_values)`获取模板文件的文件路径和值字典，并返回呈现的文本。

请注意，`render`它只接受两个参数：您提供的模板路径，以及包含模板期望的所有其他值的单个字典。

您将所有这些值作为参数提供给它，而不是打包到字典中。

改变：

```
self.render('newcase.html', title=title, facts=facts, holding=holding, ... ) 
```

至：

```
self.render('newcase.html', {title=title, facts=facts, holding=holding, ...}) 
```

对于任何其他渲染调用也是如此。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-07-10T23:20:47.077

遇到同样的问题后，我发现我的问题出在 webapp2.WSGIApplication Route 定义中。

我已将我的路线定义如下，例如

```
webapp2.Route('/api/something/anEndpoint', handlers.SomethingEndpointHandler) 
```

但是，甚至没有到达该路由，因为正在触发另一个捕获正则表达式关键字的路由，之前在路由列表中定义：

```
webapp2.Route('/api/something/<something_id>', handlers.SomethingElseHandler) 
```

这导致 OP 中的 TypeError 出现意外的关键字参数“something_id”。

一个非常难以调试的错误，但希望这对某人有所帮助！

# android - 画布未更新

> ID：14028940
> 
> 赞同：4
> 
> 时间：2012-12-25T08:22:35.183
> 
> 标签：android, android-view

我在此视图中创建了一个视图，我想在获取用户触摸屏幕的像素后显示该框，但 onDraw 方法不会将画布更新为触摸屏幕。你们能帮帮我吗？

```
 public class PlayView extends View
{
float width,height;
float touchatX, touchatY;
boolean isanyBox;

public void init()
{
    isanyBox = false;

}

    @Override
protected void onSizeChanged(int w, int h, int oldw, int oldh) 
 {
   // TODO Auto-generated method stub

   width = w/6f;
   height = h/6f;

    super.onSizeChanged(w, h, oldw, oldh);
}

public PlayView(Context context)
   {
       super(context);
       setFocusable(true);
       setFocusableInTouchMode(true);
       init();
   }

     @Override
    public boolean onTouchEvent(MotionEvent event) 
  {
    // TODO Auto-generated method stub

   isanyBox = true;
   touchatX = (event.getX()/6)*6;
   touchatY = (event.getY()/6)*6;

    return super.onTouchEvent(event);
}

   public void onDraw(Canvas canvas)
 {
   Paint lineColor = new Paint();
   lineColor.setColor(Color.BLACK);

   //Box property
   Paint boxColor = new Paint();
   boxColor.setColor(Color.BLUE);

   //Draw horizontal lines
   for(int i=0; i<6; i++)
   {
      canvas.drawLine(0, i*height, getWidth(), i*height, lineColor);
   }

   //Draw vertical lines
   for(int j=0; j<6; j++)
   {
       canvas.drawLine(j*width, 0, j*width, getHeight(), lineColor);
   }

  // if(isanyBox)
  // {
   canvas.drawRect(touchatX+1, touchatY+2, touchatX+width-1, touchatY+height-2, boxColor);
  // }

  }
 } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-25T08:42:42.007

把无效（）；进入 onTouchEvent，

```
@Override
    public boolean onTouchEvent(MotionEvent event) {
        // TODO Auto-generated method stub

        isanyBox = true;
        touchatX = (event.getX() / 6) * 6;
        touchatY = (event.getY() / 6) * 6;
        invalidate();

        return super.onTouchEvent(event);
    } 
```

# javascript - 流星不会更新mongodb中的数据

> ID：14028941
> 
> 赞同：3
> 
> 时间：2012-12-25T08:22:44.590
> 
> 标签：javascript, node.js, meteor

我有这个代码：

```
Nodes = new Meteor.Collection("nodes");
[...]
Template.list.events({
  'click .toggle': function () {
      Session.set("selected_machine", this._id);
      Nodes.update(Session.get("selected_machine"), {$set: {"conf" :{"flag": true }}});
  }
}); 
```

我无法说服流星更新我的条目。DOM 中有微秒闪烁，但服务器拒绝更新。

这是我的数据： { "_id" : ObjectId("50d8ec4f5919ffef343c9151"), "conf" : { "flag" : false }, "name" : "sepp" }

console.log(Session.get("selected_machine")); 给我看身份证。安装了不安全的软件包。在 minimongo 控制台中手写按预期工作。

是否因为我不想更新子数组而出现问题？我究竟做错了什么？谢谢你的帮助

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-25T10:29:14.520

这是因为您的数据使用 MongoDB ObjectId，这是 Meteor 无法更新这些值的已知问题（[https://github.com/meteor/meteor/issues/61](https://github.com/meteor/meteor/issues/61)）。

你可以在 mongo shell (meteor mongo) 中运行这个 hack 来修复它（[感谢 antoviaque](https://github.com/antoviaque)，我刚刚为你的收藏编辑了它）

```
db.nodes.find({}).forEach(function(el){
    db.nodes.remove({_id:el._id}); 
    el._id = el._id.toString(); 
    db.nodes.insert(el); 
}); 
```

Meteor 将 ObjectId 视为字符串，因此 MongoDB 找不到要更新的内容。它在客户端工作，因为在您的本地集合中，这些 _id 被转换为字符串。

为了进行实验，您应该通过浏览器控制台而不是通过 mongo shell 插入数据，因为 Meteor 会为您生成 UUID，一切都很好（并且将会）。

PS：当我开始使用我的应用程序时，我遇到了同样的问题。

# c - 如何对涉及 IO 的 c 函数进行单元测试？

> ID：14028950
> 
> 赞同：11
> 
> 时间：2012-12-25T08:24:29.910
> 
> 标签：c, unit-testing, io, mocking, getchar

我在为涉及 IO 操作的 C 函数编写单元测试时遇到问题。例如，下面是我编写的从控制台获取用户输入字符串的代码。我不知道如何使用 getchar() 函数自动测试用户输入。

```
char * GetStringFromConsole()
{

    char *strToReturn = NULL;
    int len = 128;

    strToReturn = (char*)malloc(len);
    if (strToReturn) 
    {
        int ch;
        char *ptr  = strToReturn;
        int counter = 0;
        for (; ;) 
        {
            ch = getchar();
            counter++;

            if (counter == len)
            {
                strToReturn = realloc(strToReturn, len*=2 );
                ptr = strToReturn + counter-1;
            }

            if ((ch != EOF) && (ch != '\n') && (counter < len))
            {
                *ptr++ = ch;
            }
            else 
            {
                break;
            }

        }
        *ptr = '\0';
    }
    return strToReturn;
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-28T06:53:22.033

模拟`getchar`：

1.  **利用预处理器**，例如在您的测试文件中。

    ```
    #define getchar mock_getchar
    #include "GetStringFromConsole.h"
    ...
    const char* mock_getchar_data_ptr;
    char mock_getchar()
    {
        return *mock_getchar_data_ptr++;
    }
    ...
    // in test function
    mock_getchar_data_ptr = "hello!\n";
    YourAssertEquals("hello", GetStringFromConsole()); 
    ```

2.  **链接器的替换符号**（在我看来更难），例如`getchar`在源 .c 文件中的某个位置定义您自己的符号，而不是链接到 stdlib（例如 Windows 上的 msvcrt）

3.  **修改被测函数**以接受返回的函数，最佳选择（恕我直言） - 与**stdlib**`char`没有冲突。并通过在测试代码中从第**1**点传递类似的东西来设置测试。**`mock_getchar`**

     ****```
    typedef char (*getchartype)();
    char * GetStringFromConsole(getchartype mygetchar)
    {
        ...
        c  = mygetchar() 
    ```**** 

 ****对于**第 1**点和**第 2**点，我建议使用您自己的函数而不是`getchar`（例如`mygetchar`） - 这样您就可以模拟/替换它而不会遇到与 std 包含/库的冲突。****

# c# - C# 百分比为 0

> ID：14028952
> 
> 赞同：2
> 
> 时间：2012-12-25T08:24:57.073
> 
> 标签：c#

当我尝试求解简单方程时遇到问题。我的方程式是找到学生分数的百分比。这是我的代码：

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Windows.Forms;

namespace thered_Try
{
    public partial class Form1 : Form
    {
        decimal res;

        public Form1()
        {
            InitializeComponent();
        }

        private void button1_Click(object sender, EventArgs e)
        {
            int oneee = 300;
            int two = 1000;
            int thee = 10;
            res = (oneee / two) * 10;
            label1.Text = res.ToString();
        }

        private void button2_Click(object sender, EventArgs e)
        {
            Form2 form = new Form2();
            form.ShowDialog();
        }
    }
} 
```

结果为0。我的错误在哪里？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-25T08:27:30.957

您正在执行两个整数之间的除法 - 这意味着结果也被计算为整数。300 / 1000 是 0……然后你乘以 10，仍然是 0。

选项：

*   使用浮点运算。您可以通过制作所有变量`double`或强制转换来做到这一点：

    ret = (int) ((oneee / (double) two) * 10);

    （其他浮点类型也可以工作，例如`decimal`or `float`......在某些情况下它们可能会给出非常细微的不同结果。）

*   *先*乘以 10 ：

    ```
    res = (oneee * 10) / two; 
    ```

请注意，对于百分比，您希望乘以 100，而不是 10。*如果*您只想要整数结果并且知道乘法永远不会溢出，*则首先乘法可能比使用浮点更简单。*

另请注意，要快速尝试此类事情，使用控制台应用程序比使用 Windows 窗体要简单得多。这是一个*完整*的例子，展示了它的工作原理：

```
using System;
class Test
{
    static void Main()
    {
        int oneee = 300;
        int two = 1000;
        int res = (oneee * 10) / two;
        Console.WriteLine(res); // 3        
    }
} 
```

编辑：如果您打算使用[`p`格式说明符](http://msdn.microsoft.com/en-us/library/dwhawy9k.aspx#PFormatString)，则应该使用浮点数：

```
int marksScored = 300;
int marksAvailable = 1000;
double proportion = ((double) marksScored) / marksAvailable;
string text = proportion.ToString("p1"); // "30.0%" 
```

请注意，除法运算符只有一个操作数需要是 a `double`- 尽管如果您发现更清楚，您可以同时转换它们*。*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-25T08:27:40.383

在所有`C`基于编程语言（如`C#`）中，操作将根据表达式中使用的最高类型进行评估。因此，如果将 2 相乘`integers`，编译器将使用`integer`乘法，但如果将 a`float`和 an相乘`integer`，编译器将使用`float`乘法。在您的情况下，您将两个`integer`s 相除，因此编译器将使用`integer`除法。

要解决您的问题，您应该将其中一个数字转换为`float`. 您可以通过多种方式做到这一点。这里有几个：

```
res = ((float) oneee / two) * 10;
res = ((double) oneee / two) * 10; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-25T08:28:17.260

您正在使用整数，因此结果也是整数，0.3 变为 0。您应该在计算之前使用 double 或强制转换为 double。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-25T08:28:37.610

试试这个：

```
private void button1_Click(object sender, EventArgs e)
        {
            decimal oneee = 300;
            decimal two = 1000;
            decimal thee = 10;
            decimal aResult = (oneee / two) * 10;
            label1.Text = aResult.ToString("0.00");
        } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-25T08:28:53.780

结果的类型取决于使用的变量。

2 秒之间的任何数学运算`int`都将返回`int`.
在进行数学运算之前，您需要将其中一个转换为小数：

```
 res = (oneee / (decimal)two) * 10; 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-25T12:35:40.177

```
you are using int and when you are dividing it by 

(1000/300) it will result 0.3\. But the data type is int, so result is 0;

Please use below code

using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Windows.Forms;

namespace thered_Try
{
    public partial class Form1 : Form
    {
        decimal res =0;

        public Form1()
        {
            InitializeComponent();
        }

        private void button1_Click(object sender, EventArgs e)
        {
            decimal oneee = 300;
            decimal two = 1000;
            decimal thee = 10;
            res = (oneee / two) * 10;
            label1.Text = res.ToString();
        }

        private void button2_Click(object sender, EventArgs e)
        {
            Form2 form = new Form2();
            form.ShowDialog();
        }
    }
}

Thanks, Let me know your result. 
```

# apache - htaccess 使用 index.php 重定向到 https

> ID：14028954
> 
> 赞同：3
> 
> 时间：2012-12-25T08:25:28.163
> 
> 标签：apache, .htaccess, codeigniter, mod-rewrite

嘿，我正在使用 codeigniter 并添加了重写规则以`index.php`从 url 中删除它工作正常。

但是，我添加了一条规则，将所有 http 请求重定向到 https，但是当它这样做时，它会使用 index.php 进行重定向。

意思是如果我输入这个网址：`domain.com/somecoolcontroler`

它会将我重定向到：`https://domain.com/index.php/somecoolcontroler`

但是当之后导航时，它会在没有它的情况下返回正常的 url，所以我猜问题出在重定向规则中，这就是我在 htaccess 中输入的内容：

```
RewriteEngine On
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule .* index.php/$0 [PT,L] 
RewriteCond %{HTTPS} off
RewriteRule (.*) https://%{HTTP_HOST}%{REQUEST_URI} 
```

我该如何解决？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-25T08:43:49.373

您需要将重定向规则放在路由规则**之前。**重写引擎循环，所以即使你有`L`标志，它会第二次循环通过你的路由规则并命中重定向规则，除了这一次，URI 已经被重写。

如果重写规则是第一个，它将在应用路由规则之前重定向浏览器。然后，当发出重定向请求时，将应用路由规则。你还需要`L`一面旗帜。

```
RewriteEngine On

RewriteCond %{HTTPS} off
RewriteRule (.*) https://%{HTTP_HOST}%{REQUEST_URI} [L]

RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule .* index.php/$0 [PT,L] 
```

# c - 查找数组中的元素

> ID：14028955
> 
> 赞同：0
> 
> 时间：2012-12-25T08:25:33.690
> 
> 标签：c, arrays

在这段代码中，如果我必须找到一个元素'7'，它指向 array=2 的位置，但是如何获得多个位置，如果 array 有 [4,7,7,8,9] 那么答案应将位置指向数组 = 1 & 数组 = 2 ..

```
#include<stdio.h>

int main()
{
 int i;
 int a[5]={4,5,7,8,9};
 int ele,temp=0,pos=0;
 printf("Enter the element to be search\n");
 scanf("%d",&ele);

 // searching for the element

 for (i=0; i<5; i++)
 {
    a[i]=a[i];
     if (a[i]==ele)
     {
       temp=1;
       pos=i;
     }

  }

   if (temp==1)
   printf("Element found %d , position==%d,",ele,pos);
   else
   printf("Element not found\n");
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-25T08:35:33.437

试试这个..

```
#include<stdio.h>

int main()
{
 int i;
 int a[5]={4,5,7,8,9};
 int found_indices[5]; // array used to store indices of found entries..
 int count = 0; //n entries found;
 int ele;
 printf("Enter the element to be search\n");
 scanf("%d",&ele);

 // searching for the element

 for (i=0; i<5; i++)
 {
     //a[i]=a[i];
     if (a[i]==ele)
     {
       found_indices[count ++] = i; // storing the index of found entry
     }
  }

   if (count!=0) {
       for (i=0; i<count; i++)
           printf("Element found %d , position==%d,", ele, found_indices[i]);
   }
   else
       printf("Element not found\n");
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-25T08:29:11.567

你的 pos 变量只是一个整数，而不是一个数组，所以它只会存储一个值。相反，将其设为一个数组，然后将每个创建结果的值存储到 pos 数组中。

# sql - 如何获得百分比？我可以在同一个查询中获得组总和和总和吗？

> ID：14028957
> 
> 赞同：2
> 
> 时间：2012-12-25T08:25:54.063
> 
> 标签：sql

我有一个类似于下面的表格。我需要获得每个地区的百分比，但要获得它，我必须获得总和，因为它并不总是 100。

```
Customer  Region  Quantity
--------  ------  --------
1         East     10
2         West     10
3         South    10
4         South    10
5         South    10
6         South    10
7         South    10
8         North    10
9         North    10
10        North    10 
```

结果应该是：

```
Region  Percent
------  -------
West     10% 
East     10%
South    50%
North    30% 
```

如果我按区域分组，我只能获得该区域的总和，但我需要整个结果的总和。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-25T08:32:48.213

使用子查询值表达式：

```
SELECT
   Region,
   Percent =
      Sum(Quantity) * 100.0
      / (SELECT Sum(Quantity) FROM dbo.Table)
FROM dbo.Table
GROUP BY Region

-- alternate denominator for SQL Server 2005 and up:
/ Sum(Quantity) OVER () 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-25T08:30:38.683

像这样：

```
SELECT 
  region, 
  COUNT(Quantity) / 
  (SELECT COUNT(*)
   FROM Table1) * 100 AS "ThePercent"
FROM Table1
GROUP BY region; 
```

## [SQL 小提琴演示](http://www.sqlfiddle.com/#!2/dd6de/3)

这会给你：

```
| REGION | THEPERCENT |
-----------------------
|   East |         10 |
|  North |         30 |
|  South |         50 |
|   West |         10 | 
```

如果您需要`%`为每个百分比打印，您应该使用您的 RDBMS 连接方式来执行此操作。但是您没有指定您使用的是什么 RDBMS，所以您必须这样做。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-25T08:33:17.133

这将是：

```
SELECT Region, 
       COUNT(Quantity)*100.0/(SELECT COUNT(*) FROM Your_Table) AS percentage
       FROM Your_Table
WHERE Region IS not null
GROUP BY Region 
```

## **[SQL 小提琴演示](http://www.sqlfiddle.com/#!2/4ff81/2)**

## **输出**

```
REGION  PERCENTAGE
--------------------
East    10
North   30
South   50
West    10 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-25T09:32:26.053

在 SQLServer2005+ 中使用 OVER 子句和聚合函数

```
SELECT Region, SUM(Quantity) * 100 / SUM(SUM(Quantity)) OVER () AS Perc
FROM your_table
GROUP BY Region 
```

[**SQLFiddle**](http://sqlfiddle.com/#!3/b3fe1/2/0)上的演示[](http://sqlfiddle.com/#!3/b3fe1/2/0)

# sql-server - 交叉应用以从 SQL Server 中的 Xml 获取子父值

> ID：14028958
> 
> 赞同：3
> 
> 时间：2012-12-25T08:26:02.933
> 
> 标签：sql-server, sql-server-2008, tsql, cross-apply, sqlxml

我有以下 XML：

```
<root>
  <row value="US">
    <col value="00">Jon</col>
    <col value="01">David</col>
    <col value="02">Mike</col>
    <col value="03">Nil</col>
  </row>
  <row value="Canada">
    <col value="C1">Pollard</col>
  </row>
  <row value="Japan">
    <col value="J1">Yin</col>
    <col value="J2">Li</col>
  </row>
  <row value="India">
    <col value="MP">Ram</col>
    <col value="UP">Paresh</col>
    <col value="AP">Mohan</col>
  </row>
</root> 
```

我想要通过使用 SQL Server 查询得到以下输出：

```
US  00  Jon
US  01  David
US  02  Mike
US  03  Nil
Canada  C1  Pollard
Japan   J1  Yin
Japan   J2  Li
India   MP  Ram
India   UP  Paresh
India   AP  Mohan 
```

我正在使用以下 SQL 查询：

```
declare @x xml
set @x =
'<root>
  <row value="US">
    <col value="00">Jon</col>
    <col value="01">David</col>
    <col value="02">Mike</col>
    <col value="03">Nil</col>
  </row>
  <row value="Canada">
    <col value="C1">Pollard</col>
  </row>
  <row value="Japan">
    <col value="J1">Yin</col>
    <col value="J2">Li</col>
  </row>
  <row value="India">
    <col value="MP">Ram</col>
    <col value="UP">Paresh</col>
    <col value="AP">Mohan</col>
  </row>
</root>'

select r.value('@value','varchar(100)'),r.value('.','varchar(100)')
from @x.nodes('root') as m(c)
cross apply m.c.nodes('row/col') as x(r) 
```

我无法获得包含父行值的第一列。您能否建议我可以进行哪些更改以获得第一列值？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-25T10:06:46.890

尝试这个：

```
select 
    ParentValue = c.value('(../@value)[1]', 'varchar(100)'),
    ValueAttr = c.value('@value','varchar(100)'),
    ColValue = c.value('.','varchar(100)')
from 
    @x.nodes('/root/row/col') as m(c) 
```

基本上，根本不需要使用`CROSS APPLY`——只需从调用中选择`/root/row/col`节点，并使用来获取父节点（元素）上的属性`.nodes()``../@value``value``<row>`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-09-05T15:45:07.263

使用 CROSS APPLY 更有效。查看执行计划，使用 CROSS APPLY 时查询成本仅为 16%，不使用不使用 CROSS APPLY 时为 84%。这是我使用 CROSS APPLY 的解决方案：

```
select 
T.c.value('@value[1]','varchar(100)') as 'Country'
,T2.col.value('@value[1]','varchar(100)') as 'Col2'
,T2.col.value('data(.)','varchar(100)') as 'Col3'
from 
@x.nodes('/root/row') T(c)       
CROSS APPLY T.c.nodes('col')  as T2(col) 
```

# javascript - 为什么jQuery或诸如getElementById之类的DOM方法找不到元素？

> ID：14028959
> 
> 赞同：555
> 
> 时间：2012-12-25T08:26:26.553
> 
> 标签：javascript, jquery, dom

`document.getElementById`或任何其他 DOM 方法/jQuery 选择器`$("#id")`找不到元素的可能原因是什么？

示例问题包括：

*   jQuery 默默地绑定事件处理程序失败
*   jQuery "getter" 方法 ( `.val()`, `.html()`, `.text()`) 返回`undefined`
*   一个标准的 DOM 方法返回`null`导致几个错误中的任何一个：

> 未捕获的类型错误：无法设置 null 的属性“...”未捕获的
> 类型错误：无法设置 null 的属性（设置“...”）
> 未捕获的类型错误：无法读取 null 的属性“...”未捕获的
> 类型错误：无法读取 null 的属性（阅读 '...'）

最常见的形式是：

> 未捕获的类型错误：无法设置 null 的属性“onclick”未捕获的类型
> 错误：无法读取 null 的属性“addEventListener”
> 未捕获的类型错误：无法读取 null 的属性“样式”

* * *

## 回答 #1

> 赞同：558
> 
> 时间：2012-01-03T18:06:51.617

当您的脚本运行时，您尝试查找的元素不在[DOM中。](https://developer.mozilla.org/en-US/docs/Web/API/Document_Object_Model)

依赖 DOM 的脚本的位置可能对其行为产生深远的影响。浏览器从上到下解析 HTML 文档。元素被添加到 DOM 中，并且脚本（通常）在遇到时执行。**这意味着顺序很重要。**通常，脚本无法找到稍后出现在标记中的元素，因为这些元素尚未添加到 DOM。

考虑以下标记；脚本 #1 找不到`<div>`而脚本 #2 成功：

```
<script>
  console.log("script #1:", document.getElementById("test")); // null
</script>
<div id="test">test div</div>
<script>
  console.log("script #2:", document.getElementById("test")); // <div id="test" ...
</script>
```

那你该怎么办？你有几个选择：

* * *

## 选项 1：移动脚本

鉴于我们在上面的示例中看到的情况，一个直观的解决方案可能是简单地将您的脚本移到标记下方，越过您想要访问的元素。事实上，长期以来，出于各种原因，将脚本放在页面底部被认为是一种[最佳做法。](http://developer.yahoo.com/performance/rules.html#js_bottom)以这种方式组织，将在执行脚本之前解析文档的其余部分：

```
<body>
  <button id="test">click me</button>
  <script>
    document.getElementById("test").addEventListener("click", function() {
      console.log("clicked:", this);
    });
  </script>
</body><!-- closing body tag -->
```

虽然这是有道理的，并且是旧版浏览器的可靠选择，但它是有限的，并且有更灵活、更现代的方法可用。

* * *

## 选项 2：`defer`属性

虽然我们确实说过脚本*“（通常）在遇到时执行”，但*现代浏览器允许您指定不同的行为。如果您要链接外部脚本，则可以使用该[`defer`](https://developer.mozilla.org/en-US/docs/Web/HTML/Element/script#attr-defer)属性。

> [ `defer`, 一个布尔属性] 被设置为向浏览器指示脚本应该在文档被解析之后但在触发之前执行[`DOMContentLoaded`](https://developer.mozilla.org/en-US/docs/Web/Events/DOMContentLoaded)。

这意味着您可以将带有标记的脚本放置在`defer`任何地方，甚至是`<head>`，并且它应该可以访问完全实现的 DOM。

```
<script src="https://gh-canon.github.io/misc-demos/log-test-click.js" defer></script>
<button id="test">click me</button>
```

请记住...

1.  `defer`只能用于外部脚本，即：具有`src`属性的脚本。
2.  注意[浏览器支持](http://caniuse.com/script-defer)，即：IE < 10 中的错误实现

* * *

## 选项 3：模块

根据您的要求，您可以使用[JavaScript 模块](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Guide/Modules#applying_the_module_to_your_html)。[与标准脚本（在此处注明](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Guide/Modules#other_differences_between_modules_and_standard_scripts)）的其他重要区别之一是模块会自动延迟，并且不限于外部源。

将脚本设置`type`为`module`，例如：

```
<script type="module">
  document.getElementById("test").addEventListener("click", function(e) {
    console.log("clicked: ", this);
  });
</script>
<button id="test">click me</button>
```

* * *

## 选项 4：延迟事件处理

将侦听器添加到在您的文档被解析后触发的事件。

### DOMContentLoaded 事件

[`DOMContentLoaded`](https://developer.mozilla.org/en-US/docs/Web/Reference/Events/DOMContentLoaded)在从初始解析完全构建 DOM 后触发，无需等待样式表或图像等内容加载。

```
<script>
  document.addEventListener("DOMContentLoaded", function(e){
    document.getElementById("test").addEventListener("click", function(e) {
      console.log("clicked:", this);
    });
  });
</script>
<button id="test">click me</button>
```

### 窗口：加载事件

该[`load`](https://developer.mozilla.org/en-US/docs/Web/API/Window/load_event)事件在`DOMContentLoaded`加载样式表和图像等其他资源之后触发。出于这个原因，它的触发时间比我们预期的要晚。不过，如果您正在考虑使用 IE8 等较旧的浏览器，则支持几乎是普遍的。当然，您可能需要一个[polyfill 用于`addEventListener()`](https://developer.mozilla.org/en-US/docs/Web/API/EventTarget/addEventListener#polyfill).

```
<script>
  window.addEventListener("load", function(e){
    document.getElementById("test").addEventListener("click", function(e) {
      console.log("clicked:", this);
    });
  });
</script>
<button id="test">click me</button>
```

### jQuery的`ready()`

`DOMContentLoaded`每个人`window:load`都有自己的警告。jQuery[`ready()`](http://api.jquery.com/ready/)提供了一个混合解决方案，`DOMContentLoaded`尽可能使用，必要时故障转移，`window:load`如果 DOM 已经完成，则立即触发其回调。

您可以将准备好的处理程序直接传递给 jQuery ，例如：`$(*handler*)`

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
<script>
  $(function() {
    $("#test").click(function() {
      console.log("clicked:", this);
    });
  });
</script>
<button id="test">click me</button>
```

* * *

## 选项 5：事件委托

将事件处理委托给目标元素的祖先。

当一个元素引发一个事件（假设它是一个[冒泡](http://www.w3.org/TR/DOM-Level-2-Events/events.html#Events-flow-bubbling)事件并且没有任何东西阻止它的传播）时，该元素的祖先中的每个父级，一直到`window`，也会接收到该事件。这允许我们将处理程序附加到现有元素并采样事件，因为它们从其后代中冒出......甚至是在附加处理程序后添加的后代。我们所要做的就是检查事件以查看它是否由所需的元素引发，如果是，则运行我们的代码。

通常，此模式保留给在加载时不存在的元素或避免附加大量重复的处理程序。为了提高效率，请选择目标元素最近的可靠祖先，而不是附加到`document`.

### 原生 JavaScript

```
<div id="ancestor"><!-- nearest ancestor available to our script -->
  <script>
    document.getElementById("ancestor").addEventListener("click", function(e) {
      if (e.target.id === "descendant") {
        console.log("clicked:", e.target);
      }
    });
  </script>
  <button id="descendant">click me</button>
</div>
```

### jQuery的`on()`

jQuery 通过[`on()`](http://api.jquery.com/on/). 给定事件名称、所需后代的选择器和事件处理程序，它将解析您的委托事件处理并管理您的`this`上下文：

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
<div id="ancestor"><!-- nearest ancestor available to our script -->
  <script>
    $("#ancestor").on("click", "#descendant", function(e) {
      console.log("clicked:", this);
    });
  </script>
  <button id="descendant">click me</button>
</div>
```

* * *

## 回答 #2

> 赞同：163
> 
> 时间：2012-12-25T08:26:26.553

**简短而简单：**因为您要查找的元素在文档中不存在（尚）。

* * *

*对于这个答案的其余部分，我将使用[`getElementById`](https://developer.mozilla.org/en-US/docs/Web/API/Document/getElementById)示例，但同样适用于[`getElementsByTagName`](https://developer.mozilla.org/en-US/docs/DOM/element.getElementsByTagName),[`querySelector`](https://developer.mozilla.org/en-US/docs/DOM/Document.querySelector)和任何其他选择元素的 DOM 方法。*

**可能的原因**

元素可能不存在的三个原因：

1.  文档中确实不存在具有传递 ID 的元素。您应该仔细检查您传递给的 ID 是否`getElementById`与（生成的）HTML 中现有元素的 ID 匹配，并且您没有*拼错*ID（ID*区分大小写*！）。

    如果您使用`getElementById`，请确保您**只**提供元素的 ID（例如，`document.getElemntById("the-id")`）。如果您正在使用接受 CSS 选择器的方法（例如`querySelector`），请确保`#`在 ID 之前包含 以表明您正在寻找 ID（例如`document.querySelector("#the-id")`）。您**不能**使用`#`with `getElementById`，而**必须**使用 with`querySelector`和类似的。另请注意，如果 ID 中包含在[CSS 标识符](https://www.w3.org/TR/CSS21/syndata.html#value-def-identifier)中无效的字符（例如`.`;`id`包含字符的属性是不好的做法，但有效），则必须在使用( )`.`时转义这些字符，但在使用`querySelector`( `document.querySelector("#the\\.id")`) 时则不需要.`getElementById``document.getElementById("the.id")`

2.  在您调用*时，*该元素不存在`getElementById`。

3.  该元素不在您正在查询的文档中，即使您可以在页面上看到它，因为它在一个`iframe`（这是它自己的文档）中。搜索包含元素`iframes`的文档时，不会搜索其中的元素。

如果问题是原因 3（它在 an`iframe`或类似中），您需要查看 中的文档`iframe`，而不是父文档，可能通过获取`iframe`元素并使用其[`contentDocument`](https://developer.mozilla.org/en-US/docs/Web/API/HTMLIFrameElement/contentDocument)属性来访问其文档（仅限同源）。这个答案的其余部分解决了前两个原因。

第二个原因——它还*没有* ——很常见。浏览器从上到下解析和处理 HTML。这意味着在 DOM 元素出现在 HTML 中之前发生的对 DOM 元素的任何调用都将失败。

考虑以下示例：

```
<script>
    var element = document.getElementById('my_element');
</script>

<div id="my_element"></div> 
```

`div`出现在*之后*`script`。_ *在脚本执行的那一刻，*该元素还不存在并将`getElementById`返回`null`。

**jQuery**

这同样适用于所有带有 jQ​​uery 的选择器。*如果你拼错*了你的选择器或者你试图*在它们实际存在之前*选择它们， jQuery 将找不到元素。

一个额外的转折是当没有找到 jQuery 时，因为您已经加载了没有协议的脚本并且是从文件系统运行的：

```
<script src="//somecdn.somewhere.com/jquery.min.js"></script> 
```

此语法用于允许脚本通过 HTTPS 在协议为 https:// 的页面上加载，并在协议为 http:// 的页面上加载 HTTP 版本

它具有尝试加载和加载失败的不幸副作用`file://somecdn.somewhere.com...`

* * *

**解决方案**

在调用`getElementById`（或任何与此相关的 DOM 方法）之前，请确保您要访问的元素存在，即 DOM 已加载。

这可以通过简单地将您的 JavaScript 放在相应的 DOM 元素之*后来确保*

```
<div id="my_element"></div>

<script>
    var element = document.getElementById('my_element');
</script> 
```

在这种情况下，您还可以将代码放在结束正文标记 ( `</body>`) 之前（所有 DOM 元素将在脚本执行时可用）。

其他解决方案包括监听[`load` *^([MDN])*](https://developer.mozilla.org/en-US/docs/DOM/window.onload)或[`DOMContentLoaded` *^([MDN])*](https://developer.mozilla.org/en-US/docs/Mozilla_event_reference/DOMContentLoaded_%28event%29)事件。在这些情况下，将 JavaScript 代码放在文档中的哪个位置并不重要，您只需记住将所有 DOM 处理代码放在事件处理程序中。

例子：

```
window.onload = function() {
    // process DOM elements here
};

// or

// does not work IE 8 and below
document.addEventListener('DOMContentLoaded', function() {
    // process DOM elements here
}); 
```

有关事件处理和浏览器差异的更多信息，请参阅[quirksmode.org 上的文章。](http://www.quirksmode.org/js/introevents.html)

**jQuery**

首先确保 jQuery 已正确加载。[使用浏览器的开发者工具](http://www.netmagazine.com/tutorials/javascript-debugging-beginners)找出是否找到了 jQuery 文件，如果没有则更正 URL（例如，在开头添加`http:`or`https:`方案，调整路径等）

监听`load`/`DOMContentLoaded` 事件正是 jQuery 对[`.ready()` *^([docs])*](http://api.jquery.com/ready/)所做的。所有影响 DOM 元素的 jQuery 代码都应该在该事件处理程序中。

事实上，[jQuery 教程](http://docs.jquery.com/Tutorials:Getting_Started_with_jQuery)明确指出：

> 由于我们在使用 jQuery 时所做的几乎所有事情都会读取或操作文档对象模型 (DOM)，因此我们需要确保在 DOM 准备好后立即开始添加事件等。

> 为此，我们为文档注册了一个就绪事件。
> 
> ```
> $(document).ready(function() { 
> ```

```
 // do stuff when DOM is ready
}); 
```

或者，您也可以使用速记语法：

```
$(function() {
    // do stuff when DOM is ready
}); 
```

两者是等价的。

* * *

## 回答 #3

> 赞同：16
> 
> 时间：2014-01-07T12:12:25.600

**基于 id 的选择器不起作用的原因**

1.  指定 id 的元素/DOM 尚不存在。
2.  该元素存在，但未在 DOM 中注册 [如果 HTML 节点从 Ajax 响应动态附加]。
3.  存在多个具有相同 id 的元素，这会导致冲突。

**解决方案**

1.  尝试在声明后访问元素，或者使用类似的东西`$(document).ready();`

2.  对于来自 Ajax 响应的元素，使用`.bind()`jQuery 的方法。旧版本的 jQuery 也有`.live()`同样的功能。

3.  使用工具 [例如，浏览器的 webdeveloper 插件] 查找重复的 id 并将其删除。

* * *

## 回答 #4

> 赞同：16
> 
> 时间：2016-01-05T23:34:24.880

如果您尝试访问的元素位于 an 内部，`iframe`并且您尝试在 this 的上下文之外访问它，`iframe`也会导致它失败。

[如果您想在 iframe 中获取元素，您可以在此处](https://stackoverflow.com/a/1088569/1435985)了解如何操作。

* * *

## 回答 #5

> 赞同：14
> 
> 时间：2013-12-06T17:29:33.410

正如@FelixKling 指出的那样，最有可能的情况是您要查找的节点（尚不存在）。

但是，现代开发实践通常可以使用 DocumentFragments 或简单地直接分离/重新附加当前元素来操作文档树之外的文档元素。此类技术可用作 JavaScript 模板的一部分，或在相关元素被大量更改时避免过多的重绘/重排操作。

同样，在现代浏览器中推出的新“Shadow DOM”功能允许元素成为文档的一部分，但不能通过 document.getElementById 及其所有同级方法（querySelector 等）进行查询。这样做是为了封装功能并专门隐藏它。

不过，您要查找的元素很可能（还）不在文档中，您应该按照 Felix 的建议进行操作。但是，您还应该意识到，这越来越不是元素可能无法找到（暂时或永久）的唯一原因。

* * *

## 回答 #6

> 赞同：12
> 
> 时间：2019-05-10T09:29:26.920

# javascript - 如何防止突出显示输入字段？

> ID：14028963
> 
> 赞同：-1
> 
> 时间：2012-12-25T08:26:56.163
> 
> 标签：javascript, html, css

这是我的代码，

```
<input type="text" style="font-family: Tahoma; height:24px; width:300px; font-size: 12px;  padding: 0 0 0 10px;" placeholder="Full Name" > 
```

输入时如何防止突出显示输入字段？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-25T08:32:43.520

尝试这样的事情......

```
input {
    outline:none;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-25T08:33:51.097

***尝试（请不要内联编写样式）：***

CSS：

```
#inp {
font-family: Tahoma; height:24px; width:300px; font-size: 12px;  padding: 0 0 0 10px;
}
#inp:focus {
    outline: none;
} 
```

html:

```
<input id="inp" type="text" placeholder="Full Name" > 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-25T08:43:04.530

CSS：

轮廓是元素聚焦时显示的边框。如果即使文本输入处于活动状态，您也不希望样式发生任何变化，请使用此

```
outline:0; 
```

# java - 我需要手动关闭输入流吗？

> ID：14028969
> 
> 赞同：6
> 
> 时间：2012-12-25T08:27:41.533
> 
> 标签：java, xml, xml-parsing, xerces

我正在使用 Xerces 库来解析 XML。下面是解析的代码片段：

> 文档 doc = builder.parse(new InputSource(new StringReader(someXMLString)));

我是否需要手动关闭或该方法会`InputStream`处理它？`InputSource``parse`

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-25T08:33:51.233

鉴于您没有外部资源 - 只是一个`StringReader`- 您*不需要*关闭它。无论如何我都会这样做......那么如果您更改代码以使用不同的输入，您将不会意外地发生资源泄漏。

（对于一次性代码，我会保留它 - 但请注意，如果您不小心，一次性代码的寿命会比预期的要长。）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-25T08:44:47.533

DocumentBuilder API 中似乎没有关于它的内容。我们可以将其测试为

```
InputStream is = new FileInputStream("test.xml") {
    @Override
    public void close() throws IOException {
        System.out.println("close");
        super.close();
    }
};
DocumentBuilderFactory dbf = DocumentBuilderFactory.newInstance();
DocumentBuilder documentBuilder = dbf.newDocumentBuilder();
documentBuilder.parse(is); 
```

它打印`close`。但由于 API 中没有任何内容，因此无法保证这种行为。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-25T08:36:47.070

你应该自己关闭它。

builder.parse 方法不会在其实现中关闭流。它不知道什么时候适合关闭流，所以这需要手动关闭流。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-25T08:31:50.500

如果您使用 try-with 那么您可以让 java 为您关闭它。否则我会建议手动关闭它。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-25T08:32:02.933

`InputStream`应该关闭，因为`close()`方法：

> > 关闭此输入流并释放与该流关联的所有系统资源。

您的流是否使用资源并不重要 - 这是关闭它的**好方法。**只是要确定。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-25T08:35:55.283

`InputSource`只是流上的一个方便的类包装器，因此它不会关闭其中的流。

# sql-server - 下一行的列值

> ID：14028976
> 
> 赞同：1
> 
> 时间：2012-12-25T08:28:16.287
> 
> 标签：sql-server

```
FromDate        ToDate        TempDate
2011-05-03      2011-08-02    NULL
2011-06-03      2011-08-02    2011-05-03
2007-09-30      2009-09-30    2011-06-03 
```

我在 SQL Server 中有一个表，并且希望列`TempDate`具有前一行的值`FromDate`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-25T08:35:10.990

```
UPDATE tab SET
    Tempdate = (SELECT Max(FromDate) 
                FROM Tab t2 
                WHERE t2.Fromdate < tab.FromDate ) 
```

# wpf - 从 Microsoft 的 Extended WPF Toolkit™ Community Edition 将值从 PropertyGrid 控件复制到剪贴板

> ID：14028980
> 
> 赞同：2
> 
> 时间：2012-12-25T08:28:32.020
> 
> 标签：wpf, wpftoolkit, propertygrid

我正在使用 subj 和 MVVM 中的工具包中的 PropertyGrid。我想将属性值从 PropertyGrid 复制到剪贴板。最好的方法是只选择具有值的单元格内容进行复制并复制它。或使用右键菜单。我不知道该怎么做。能否请你帮忙？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-02T09:42:57.837

找到了解决方案，它非常简单，并在主页中进行了描述..

首先，您应该创建一个用户控件，它代表所需属性的所需编辑器。我创建了自己的编辑器，它是只读的，因为内置编辑器允许编辑文本：

**XAML**

```
 <UserControl x:Class="WhiteRepositoryExplorer.Views.ReadOnlyTextEditor"
            ...
    x:Name="_uc">
        <xctk:AutoSelectTextBox IsReadOnly="True" Text="{Binding Value, ElementName=_uc}" AutoSelectBehavior="OnFocus" BorderThickness="0" />
    </UserControl> 
```

一定要实现`Xceed.Wpf.Toolkit.PropertyGrid.Editors.ITypeEditor`接口：

**背后的代码**

```
public class ReadOnlyTextEditor : UserControl, ITypeEditor 
{
    public ReadOnlyTextEditor()
    {
        InitializeComponent();
    }

    public static readonly DependencyProperty ValueProperty = DependencyProperty.Register("Value", typeof(string),
        typeof(ReadOnlyTextEditor), new FrameworkPropertyMetadata(null, FrameworkPropertyMetadataOptions.BindsTwoWayByDefault));

    public string Value
    {
        get { return (string)GetValue(ValueProperty); }
        set { SetValue(ValueProperty, value); }
    }

    public FrameworkElement ResolveEditor(PropertyItem propertyItem)
    {
        Binding binding = new Binding("Value");
        binding.Source = propertyItem;
        binding.Mode = propertyItem.IsReadOnly ? BindingMode.OneWay : BindingMode.TwoWay;
        BindingOperations.SetBinding(this, ValueProperty, binding);
        return this;
    }
} 
```

2，在模型中，您应该使用属性指定刚刚为所需属性创建的编辑器：

```
[Editor(typeof(ReadOnlyTextEditor), typeof(ReadOnlyTextEditor))]
[Description("Unique (int the XML scope) control attribute of string format")]
public string Id
{
    get { return _id; }
} 
```

完毕。像砖一样简单。。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-05-21T07:53:02.507

这项工作不适用于只读属性...唯一已知的解决方法是一个空的 Setter。

```
[Editor(typeof(ReadOnlyTextEditor), typeof(ReadOnlyTextEditor))]
public string FullName
{
    get
    {
        if (FunctionGroupParent != null)
        {
            return FunctionGroupParent.FullName + "." + Name;
        }
        else
        {
            return Masterdata.Name + "." + Name;
        }
    }
    set
    {

    }
} 
```

UC 应该具有 Padding (2px left) 和 Foreground (Gray) 的属性以匹配属性网格的样式。

```
<xctk:AutoSelectTextBox Text="{Binding Value, ElementName=_uc}"
                        IsReadOnly="True" 
                        Padding="2,0,0,0"
                        Foreground="Gray"
                        AutoSelectBehavior="OnFocus"
                        BorderThickness="0" /> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-10-02T12:43:11.943

这可能只是多年来图书馆的变化，但作者的回答只是为我显示了一个空白条目，至少对于只读属性。这个更简单的版本通过使用作者提到`PropertyGrid`的相同属性来定位特定属性，对我有用：`AutoSelectTextBox`

```
<xctk:PropertyGrid.EditorDefinitions>
    <xctk:EditorTemplateDefinition TargetProperties="Altitude">
        <xctk:EditorTemplateDefinition.EditingTemplate>
            <DataTemplate>
                <xctk:AutoSelectTextBox IsReadOnly="True" Text="{Binding Value}" AutoSelectBehavior="OnFocus" BorderThickness="0" />
            </DataTemplate>
        </xctk:EditorTemplateDefinition.EditingTemplate>
    </xctk:EditorTemplateDefinition>
</xctk:PropertyGrid.EditorDefinitions> 
```

# jquery - 回复帖子

> ID：14028987
> 
> 赞同：-4
> 
> 时间：2012-12-25T08:29:31.210
> 
> 标签：jquery, html, css

我正在尝试动态编写 HTML 代码来切换它包含的 div（帖子）的回复文本框。这已成为一种负担，因为我使用 PHP 来动态输出每个 div（帖子）并且不能唯一地链接每个每个 div 的回复按钮。

jQuery

```
$("#reply").click(function(){
  $("#box").toggleClass("hidden");
}); 
```

CSS

```
.hidden{
  display: none;
} 
```

只有第一个帖子有效。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-25T08:51:15.503

首先，如果你有一个回复按钮，`div`那么你真的应该使用类。

`id`应该对每个页面都是唯一的，另一方面，类被设计为具有多个实例。

所以发生的是你的 jQuery 选择器，`$("#reply")`找到第一个`#reply`并停在那里。您的选择器也是如此`$("#box")`。切换你`#reply`的 s 和`#box`es 来上课，例如。`<div class="reply">`，然后使用选择器`$(".reply")`。`#box`你的es也会遇到同样的问题。

如果没有 HTML 示例，我无法真正建议您在这里做的最好的事情。但这是一个通用的解决方案：

**JS 小提琴**
[http://jsfiddle.net/Nveea/](http://jsfiddle.net/Nveea/)

**HTML**

```
<div id="reply-1" class="reply">Reply</div>`
<div id="box-1" class="box">box 1</div>
<hr />
<div id="reply-2" class="reply">Reply</div>
<div id="box-2" class="box">box 2</div> 
```

**CSS**

```
.box
{
    display:none;
}​​ 
```

**JavaScript**

```
$(".reply").click(function(){
    //get the associated box
    var index = $(this).attr("id").replace("reply-","");

    //toggles show and hide
    $("#box-" + index).toggle(); 
}); 
```

上述解决方案假设您在 PHP 中使用某种 for 循环，并且可以将迭代索引插入到每个`reply`and`box`元素中。如果您提供一些示例 HTML，则可以提供更好的解决方案。

* * *

*我还建议使用 jQuery 函数`toggle()`，它可以在 display:hidden/block 之间切换元素/元素。在您的情况下，这可能比 .toggleClass("hidden") 更好。*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-25T08:55:55.310

在创建按钮时，为每个按钮提供 id 和一个类，这样当您单击时，您应该能够获得该 ID。写一个函数：

```
$(".class").live("click",function(){
   var id=$(this).attr('id');
   $(id).insertAfter($("#box").show()); 
}); 
```

# android - 在没有用户交互的情况下发送电子邮件android

> ID：14028988
> 
> 赞同：2
> 
> 时间：2012-12-25T08:29:53.877
> 
> 标签：android, email, email-attachments

我试图在没有用户交互的情况下发送电子邮件。每件事都有效，直到发送部分。

这是我正在使用的 Gmailsender 类中的 sendemail 函数

```
public void sendEmail() throws MessagingException 
{
    Log.i("check","start");

String host = "smtp.gmail.com";
String from = "blabla@gmail.com"; //sender email, this is our website email
String pass = "blablabla"; //password of sender email

Properties props = System.getProperties();
props.put("mail.smtp.starttls.enable", "true"); // added this line
props.put("mail.smtp.host", host);
props.put("mail.smtp.user", from);
props.put("mail.smtp.password", pass);
props.put("mail.smtp.port", "587");
props.put("mail.smtp.auth", "true");
Log.i("check","done pops ");

//creating session
Session session = Session.getDefaultInstance(props, null);
MimeMessage message = new MimeMessage(session);
message.setFrom(new InternetAddress(from));
Log.i("check","done sessions ");

InternetAddress toAddress;     
    toAddress = new InternetAddress(to);    
    message.addRecipient(Message.RecipientType.TO, toAddress);
    Log.i("check","add recipante ");

message.setSubject(subject);
message.setText("This is my app");

Log.i("check","transport");

Transport transport = session.getTransport("smtp");

//connecting..
Log.i("check","connecting");
transport.connect(host, from, pass);
//sending...
Log.i("check","wana send");
transport.sendMessage(message, message.getAllRecipients());
transport.close();
Log.i("check","sent"); 
```

}

日志“想要发送”没有出现..

我从 gmailSender 创建对象的主要活动具有以下代码：

```
 send = (Button) this.findViewById(R.id.button1);
    send.setOnClickListener(new View.OnClickListener() {
        public void onClick(View v) {
            // TODO Auto-generated method stub
            try {   
                GMailSender sender = new GMailSender("blabla@gmail.com", "blablabla");
                Log.e("check", "test 1");
                sender.sendEmail() ;
                Log.e(DEBUG_TAG, "test 2");  
            } catch (Exception e) {   
                Log.e(DEBUG_TAG, "test 3");                  } 
```

我收到“测试 3”日志，这意味着发生了异常。

结果就是邮件发不出去，app卡住了……不知道怎么回事。。

注意：我添加了互联网权限+我添加了 jar 文件

日志猫是

```
12-25 12:55:00.774: E/check(1350): test 1
12-25 12:55:00.774: I/check(1350): start
12-25 12:55:00.774: I/check(1350): done pops 
12-25 12:55:00.774: I/check(1350): done sessions 
12-25 12:55:00.774: I/check(1350): add recipante 
12-25 12:55:00.779: I/check(1350): transport
12-25 12:55:00.789: I/check(1350): connecting
12-25 12:55:00.789: E/check(1350): test 3 
```

这是检查标签的整个 logcat：

```
12-25 13:20:18.698: E/check(5547): test 1
12-25 13:20:18.698: I/check(5547): start
12-25 13:20:18.698: I/check(5547): done pops 
12-25 13:20:18.723: I/check(5547): done sessions 
12-25 13:20:18.723: I/check(5547): add recipante 
12-25 13:20:18.723: I/check(5547): transport
12-25 13:20:18.733: I/check(5547): connecting
12-25 13:20:18.758: E/check(5547): [Ljava.lang.StackTraceElement;@4193bb00
12-25 13:20:18.758: E/check(5547): android.os.NetworkOnMainThreadException
12-25 13:20:18.758: E/check(5547):  at android.os.StrictMode$AndroidBlockGuardPolicy.onNetwork(StrictMode.java:1099)
12-25 13:20:18.758: E/check(5547):  at java.net.InetAddress.lookupHostByName(InetAddress.java:391)
12-25 13:20:18.758: E/check(5547):  at java.net.InetAddress.getAllByNameImpl(InetAddress.java:242)
12-25 13:20:18.758: E/check(5547):  at java.net.InetAddress.getByName(InetAddress.java:295)
12-25 13:20:18.758: E/check(5547):  at java.net.InetSocketAddress.<init>(InetSocketAddress.java:105)
12-25 13:20:18.758: E/check(5547):  at java.net.InetSocketAddress.<init>(InetSocketAddress.java:90)
12-25 13:20:18.758: E/check(5547):  at com.sun.mail.util.SocketFetcher.createSocket(SocketFetcher.java:233)
12-25 13:20:18.758: E/check(5547):  at com.sun.mail.util.SocketFetcher.getSocket(SocketFetcher.java:189)
12-25 13:20:18.758: E/check(5547):  at com.sun.mail.smtp.SMTPTransport.openServer(SMTPTransport.java:1359)
12-25 13:20:18.758: E/check(5547):  at com.sun.mail.smtp.SMTPTransport.protocolConnect(SMTPTransport.java:412)
12-25 13:20:18.758: E/check(5547):  at javax.mail.Service.connect(Service.java:288)
12-25 13:20:18.758: E/check(5547):  at javax.mail.Service.connect(Service.java:169)
12-25 13:20:18.758: E/check(5547):  at com.example.sendmail.GMailSender.sendEmail(GMailSender.java:100)
12-25 13:20:18.758: E/check(5547):  at com.example.sendmail.MailSenderActivity$1.onClick(MailSenderActivity.java:31)
12-25 13:20:18.758: E/check(5547):  at android.view.View.performClick(View.java:3627)
12-25 13:20:18.758: E/check(5547):  at android.view.View$PerformClick.run(View.java:14329)
12-25 13:20:18.758: E/check(5547):  at android.os.Handler.handleCallback(Handler.java:605)
12-25 13:20:18.758: E/check(5547):  at android.os.Handler.dispatchMessage(Handler.java:92)
12-25 13:20:18.758: E/check(5547):  at android.os.Looper.loop(Looper.java:137)
12-25 13:20:18.758: E/check(5547):  at android.app.ActivityThread.main(ActivityThread.java:4511)
12-25 13:20:18.758: E/check(5547):  at java.lang.reflect.Method.invokeNative(Native Method)
12-25 13:20:18.758: E/check(5547):  at java.lang.reflect.Method.invoke(Method.java:511)
12-25 13:20:18.758: E/check(5547):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:980)
12-25 13:20:18.758: E/check(5547):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:747)
12-25 13:20:18.758: E/check(5547):  at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-25T09:05:21.850

使用专为 Android 编写的[JavaMail API 。](http://code.google.com/p/javamail-android/downloads/list)

```
import java.util.Date; 
import java.util.Properties; 
import javax.activation.CommandMap; 
import javax.activation.DataHandler; 
import javax.activation.DataSource; 
import javax.activation.FileDataSource; 
import javax.activation.MailcapCommandMap; 
import javax.mail.BodyPart; 
import javax.mail.Multipart; 
import javax.mail.PasswordAuthentication; 
import javax.mail.Session; 
import javax.mail.Transport; 
import javax.mail.internet.InternetAddress; 
import javax.mail.internet.MimeBodyPart; 
import javax.mail.internet.MimeMessage; 
import javax.mail.internet.MimeMultipart; 

public class Mail extends javax.mail.Authenticator { 
  private String _user; 
  private String _pass; 

  private String[] _to; 
  private String _from; 

  private String _port; 
  private String _sport; 

  private String _host; 

  private String _subject; 
  private String _body; 

  private boolean _auth; 

  private boolean _debuggable; 

  private Multipart _multipart; 

  public Mail() { 
    _host = "smtp.gmail.com"; // default smtp server 
    _port = "465"; // default smtp port 
    _sport = "465"; // default socketfactory port 

    _user = ""; // username 
    _pass = ""; // password 
    _from = ""; // email sent from 
    _subject = ""; // email subject 
    _body = ""; // email body 

    _debuggable = false; // debug mode on or off - default off 
    _auth = true; // smtp authentication - default on 

    _multipart = new MimeMultipart(); 

    // There is something wrong with MailCap, javamail can not find a handler for the multipart/mixed part, so this bit needs to be added. 
    MailcapCommandMap mc = (MailcapCommandMap) CommandMap.getDefaultCommandMap(); 
    mc.addMailcap("text/html;; x-java-content-handler=com.sun.mail.handlers.text_html"); 
    mc.addMailcap("text/xml;; x-java-content-handler=com.sun.mail.handlers.text_xml"); 
    mc.addMailcap("text/plain;; x-java-content-handler=com.sun.mail.handlers.text_plain"); 
    mc.addMailcap("multipart/*;; x-java-content-handler=com.sun.mail.handlers.multipart_mixed"); 
    mc.addMailcap("message/rfc822;; x-java-content-handler=com.sun.mail.handlers.message_rfc822"); 
    CommandMap.setDefaultCommandMap(mc); 
  } 

  public Mail(String user, String pass) { 
    this(); 

    _user = user; 
    _pass = pass; 
  } 

  public boolean send() throws Exception { 
    Properties props = _setProperties(); 

    if(!_user.equals("") && !_pass.equals("") && _to.length > 0 && !_from.equals("") && !_subject.equals("") && !_body.equals("")) { 
      Session session = Session.getInstance(props, this); 

      MimeMessage msg = new MimeMessage(session); 

      msg.setFrom(new InternetAddress(_from)); 

      InternetAddress[] addressTo = new InternetAddress[_to.length]; 
      for (int i = 0; i < _to.length; i++) { 
        addressTo[i] = new InternetAddress(_to[i]); 
      } 
        msg.setRecipients(MimeMessage.RecipientType.TO, addressTo); 

      msg.setSubject(_subject); 
      msg.setSentDate(new Date()); 

      // setup message body 
      BodyPart messageBodyPart = new MimeBodyPart(); 
      messageBodyPart.setText(_body); 
      _multipart.addBodyPart(messageBodyPart); 

      // Put parts in message 
      msg.setContent(_multipart); 

      // send email 
      Transport.send(msg); 

      return true; 
    } else { 
      return false; 
    } 
  } 

  public void addAttachment(String filename) throws Exception { 
    BodyPart messageBodyPart = new MimeBodyPart(); 
    DataSource source = new FileDataSource(filename); 
    messageBodyPart.setDataHandler(new DataHandler(source)); 
    messageBodyPart.setFileName(filename); 

    _multipart.addBodyPart(messageBodyPart); 
  } 

  @Override 
  public PasswordAuthentication getPasswordAuthentication() { 
    return new PasswordAuthentication(_user, _pass); 
  } 

  private Properties _setProperties() { 
    Properties props = new Properties(); 

    props.put("mail.smtp.host", _host); 

    if(_debuggable) { 
      props.put("mail.debug", "true"); 
    } 

    if(_auth) { 
      props.put("mail.smtp.auth", "true"); 
    } 

    props.put("mail.smtp.port", _port); 
    props.put("mail.smtp.socketFactory.port", _sport); 
    props.put("mail.smtp.socketFactory.class", "javax.net.ssl.SSLSocketFactory"); 
    props.put("mail.smtp.socketFactory.fallback", "false"); 

    return props; 
  } 

  // the getters and setters 
  public String getBody() { 
    return _body; 
  } 

  public void setBody(String _body) { 
    this._body = _body; 
  } 

  // more of the getters and setters ….. 
} 
```

下面是一个如何在 Android 活动中使用 Mail 包装器的示例。

```
@Override 
public void onCreate(Bundle icicle) { 
  super.onCreate(icicle); 
  setContentView(R.layout.main); 

  Button addImage = (Button) findViewById(R.id.send_email); 
  addImage.setOnClickListener(new View.OnClickListener() { 
    public void onClick(View view) { 
      Mail m = new Mail("gmailusername@gmail.com", "password"); 

      String[] toArr = {"bla@bla.com", "lala@lala.com"}; 
      m.setTo(toArr); 
      m.setFrom("wooo@wooo.com"); 
      m.setSubject("This is an email sent using my Mail JavaMail wrapper from an Android device."); 
      m.setBody("Email body."); 

      try { 
        m.addAttachment("/sdcard/filelocation"); 

        if(m.send()) { 
          Toast.makeText(MailApp.this, "Email was sent successfully.", Toast.LENGTH_LONG).show(); 
        } else { 
          Toast.makeText(MailApp.this, "Email was not sent.", Toast.LENGTH_LONG).show(); 
        } 
      } catch(Exception e) { 
        //Toast.makeText(MailApp.this, "There was a problem sending the email.", Toast.LENGTH_LONG).show(); 
        Log.e("MailApp", "Could not send email", e); 
      } 
    } 
  }); 
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-25T08:42:09.960

```
I am getting the "test 3" log which means that the exception happened..
The result is that the email is not sent and the app is stuck... I dont know what is the wrong.. 
```

盲目假设，只需将您的邮件发送代码放入`AsyncTask`. 我认为您的异常的原因是**NetworkOnMainThread** ..

还要发布异常的完整**堆栈跟踪。**所以我们可以进一步帮助你..

**更新：**

我认为这条线`transport.connect(host, from, pass);`给`sendEmail()`了你例外。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-06-09T12:23:26.787

如果使用“smtp.gmail.com”作为默认 smtp 服务器，请注意警告。

由于他们过于热心的“可疑活动”政策，谷歌会强迫您经常更改您的链接电子邮件帐户密码。本质上，它将来自不同国家/地区在短时间内重复的 smtp 请求视为“可疑活动”。因为他们假设您（电子邮件帐户持有人）一次只能在一个国家/地区。

当谷歌系统检测到“可疑活动”时，它将阻止进一步的电子邮件，直到您更改密码。由于您将密码硬编码到应用程序中，因此每次发生这种情况时都必须重新发布应用程序，这并不理想。这对我来说一周内发生了 3 次，我什至将密码存储在另一台服务器上，并且每次谷歌强迫我更改密码时都会动态获取密码。

因此，我建议使用众多免费 smtp 提供商之一而不是“smtp.gmail.com”来避免这个安全问题。使用相同的代码，但将“smtp.gmail.com”更改为新的 smtp 转发主机。

# android - 如何在 Android 中将音频文件附加到彩信？

> ID：14028990
> 
> 赞同：1
> 
> 时间：2012-12-25T08:30:09.967
> 
> 标签：android, android-intent

我想将音频文件附加到 MMS。如何做到这一点？我在 SO 和 Goggle 上找到了很多，但仍然没有找到正确的解决方案。所以有人帮我解决这个问题。我的代码如下：

```
Intent sendIntent = new Intent(Intent.ACTION_SEND);
            sendIntent.setType("audio/mp3");
            sendIntent.putExtra("sms_body",
                    getResources().getText(R.string.Message));
            sendIntent.setClassName("com.android.mms",
                    "com.android.mms.ui.ComposeMessageActivity");

            AssetManager mngr = getAssets();
            InputStream path = null;
            try {
                path = mngr.open("*.mp3");
            } catch (IOException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }

            BufferedInputStream bis = new BufferedInputStream(path, 1024);

            // get the bytes one by one
            int current = 0;
            //
            try {
                while ((current = bis.read()) != -1) {

                    baf.append((byte) current);
                }
            } catch (IOException e) {
                // /TODO Auto-generated catch block
                e.printStackTrace();
            }
            byte[] bitmapdata = baf.toByteArray();

            File file = new File(Environment.getExternalStorageDirectory()
                    .getAbsolutePath(), "*.mp3");

            // if (file.exists() == true) {
            // } else {
            // Log.v("directory is created", "new  dir");
            // file.mkdir();
            // }

            FileOutputStream fos;

            try {
                fos = new FileOutputStream(file);
                fos.write(bitmapdata);
                fos.flush();
                fos.close();
            } catch (FileNotFoundException e) {
                // handle exception
            } catch (IOException e) {
                // handle exception
            }

            final File file1 = new File(Environment
                    .getExternalStorageDirectory().getAbsolutePath(),
                    "*.mp3");
            Uri uri = Uri.fromFile(file1); 
```

// Uri uri = Uri.parse("file:///mnt/sdcard/*.mp3"); Log.e("路径", "" + uri);

```
 sendIntent.putExtra(Intent.EXTRA_STREAM, uri);

            // sendIntent.putExtra(Intent.EXTRA_STREAM, mms_uri.toString());

            // startActivity(Intent.createChooser(sendIntent, ""));
            startActivity(sendIntent); 
```

请告诉我上面的代码哪里错了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-25T08:39:24.013

请在您的场景中使用此代码段：

```
Intent sendIntent = new Intent(Intent.ACTION_SEND); 
sendIntent.putExtra("text-body", "if you are sending text");    
sendIntent.putExtra("num", "number");

sendIntent.putExtra(Intent.EXTRA_STREAM, Uri.parse("ur file path"));
sendIntent.setType("audio/3gp"); 
```

# wcf - 如何根据架构自动选择传输？

> ID：14028991
> 
> 赞同：1
> 
> 时间：2012-12-25T08:30:11.333
> 
> 标签：wcf, wcf-binding, wcf-security, wcf-client

不明白如何正确制作，所以，决定问。

有一些外部服务。该服务有两种实现方式 - 具有传输安全性和不具有传输安全性。因此，有两个网址“http://example.com/service.asmx”和“https://example.com/service.asmx”。

我有用户设置（使用 GUI，而不是配置）连接 url 的应用程序。因此，我使用 basicHttpBinding 和端点创建了配置。但问题是，如果我设置 security="Transport" 那么我的客户端不适用于 http 版本的服务，反之亦然。

那么，解决这个问题的最佳方法是什么？我应该分析用户设置的 url 架构并根据它以编程方式更改绑定安全性吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-25T12:25:22.690

您正在查找的信息（要使用的绑定、传输和安全设置）包含在服务的元数据中。因此，如果您在服务上启用服务元数据，则可以下载 WSDL 并将其导入。

例如，在 C# 客户端应用程序中，您可以使用`WsdlImporter.ImportAllEndpoints()`从服务元数据中读取端点配置，然后查找具有正确地址的端点配置：

```
var wc = new WebClient();
var metadata = new MetadataSet();
using (var stream = wc.OpenRead("http://yourserver/YourService.svc?singleWsdl"))
{
    var sd = WS.ServiceDescription.Read(stream);
    metadata.MetadataSections.Add(new MetadataSection("http://schemas.xmlsoap.org/wsdl/", "Test", sd));
}
var importer = new WsdlImporter(metadata);
var endpoints = importer.ImportAllEndpoints();
foreach (var endpoint in endpoints)
{
    Console.WriteLine(endpoint.Address.Uri);
    var client = new MyServiceClient(endpoint.Binding, endpoint.Address);
    client.Hello();
} 
```

你需要`System.Web.Services`和`System.ServiceModel`：

```
using System.Net;
using System.ServiceModel;
using System.ServiceModel.Description;
using WS = System.Web.Services.Description; 
```

`endpoint.Address`in that `foreach`loop 是一个`Uri`你可以匹配你感兴趣的那个。

如果您只对 http 或 https 感兴趣，那么您也可以只查看架构。

# r - R中的货币表示

> ID：14028995
> 
> 赞同：7
> 
> 时间：2012-12-25T08:30:56.657
> 
> 标签：r, currency

我想知道如何使用 R 处理金钱。这意味着，做算术，打印格式良好的数字等等。

例如我有一些价值观

```
1.222.333,37 
1.223.444,88 
```

我可以将其转换为数字并将其舍入，去掉美分，但没有更好的模式可以使用吗？我确实尝试了格式方法，例如：

```
format(141103177058,digits=3,small.interval=3,decimal.mark='.',small.mark=',') 
```

但没有成功。任何提示或想法？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2016-03-29T21:36:20.193

scales 包有一个功能： [dollar_format()](https://www.rdocumentation.org/packages/scales/versions/0.4.1/topics/dollar_format)

```
install.packages("scales")
library(scales)

muchoBucks <- 15558.5985121
dollar_format()(muchoBucks)

[1] "$15,558.60" 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-05-23T16:11:06.967

这个如何：

```
printCurrency <- function(value, currency.sym="$", digits=2, sep=",", decimal=".") {
  paste(
        currency.sym,
        formatC(value, format = "f", big.mark = sep, digits=digits, decimal.mark=decimal),
        sep=""
  )
}

printCurrency(123123.334) 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-12-25T09:17:38.617

假设我们有两个特定的字符值（货币）：

```
s1 <- "1.222.333,37"
s2 <- "1.223.444,88" 
```

首先，我们希望 R 显示具有适当位数的数值：

```
# controls representation of numeric values
options(digits=10) 
```

将货币转换为数字可以这样实现：

```
# where s is character
moneyToDouble <- function(s){
  as.double(gsub("[,]", ".", gsub("[.]", "", s)))
}

x <- moneyToDouble(s1) + moneyToDouble(s2)
x 
```

将数字打印为货币：

```
# where x is numeric
printMoney <- function(x){
  format(x, digits=10, nsmall=2, decimal.mark=",", big.mark=".")
}

printMoney(x) 
```

# ios - 处理 managedObjectContext 的核心数据错误

> ID：14028996
> 
> 赞同：0
> 
> 时间：2012-12-25T08:31:07.940
> 
> 标签：ios, core-data, ios6

下面是我遇到错误的代码行。错误也在下面。我理解为什么会出现错误，因为 managedObjectContext 为零。我不知道如何解决这个问题。

```
NSEntityDescription *entity = [NSEntityDescription
                                       entityForName:@"Customer" inManagedObjectContext:managedObjectContext]; 
```

错误

```
Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: '+entityForName: nil is not a legal NSManagedObjectContext parameter searching for entity name 'Customer'' 
```

这是一些更相关的代码。

```
- (NSManagedObjectContext *)managedObjectContext
{
    if (_managedObjectContext != nil) {
        return _managedObjectContext;
    }

    NSPersistentStoreCoordinator *coordinator = [self persistentStoreCoordinator];
    if (coordinator != nil) {
        _managedObjectContext = [[NSManagedObjectContext alloc] init];
        [_managedObjectContext setPersistentStoreCoordinator:coordinator];
    }
    return _managedObjectContext;
}
- (NSManagedObjectModel *)managedObjectModel
{
    if (_managedObjectModel != nil) {
        return _managedObjectModel;
    }
    NSURL *modelURL = [[NSBundle mainBundle] URLForResource:@"Customer" withExtension:@"momd"];
    _managedObjectModel = [[NSManagedObjectModel alloc] initWithContentsOfURL:modelURL];
    return _managedObjectModel;
}

// Returns the persistent store coordinator for the application.
// If the coordinator doesn't already exist, it is created and the application's store added to it.
- (NSPersistentStoreCoordinator *)persistentStoreCoordinator
{
    if (_persistentStoreCoordinator != nil) {
        return _persistentStoreCoordinator;
    }

    NSURL *storeURL = [[self applicationDocumentsDirectory] URLByAppendingPathComponent:@"rolo.sqlite"];

    NSError *error = nil;
    _persistentStoreCoordinator = [[NSPersistentStoreCoordinator alloc] initWithManagedObjectModel:[self managedObjectModel]];
    if (![_persistentStoreCoordinator addPersistentStoreWithType:NSSQLiteStoreType configuration:nil URL:storeURL options:nil error:&error]) {
        /*
         Replace this implementation with code to handle the error appropriately.

         abort() causes the application to generate a crash log and terminate. You should not use this function in a shipping application, although it may be useful during development.

         Typical reasons for an error here include:
         * The persistent store is not accessible;
         * The schema for the persistent store is incompatible with current managed object model.
         Check the error message to determine what the actual problem was.

         If the persistent store is not accessible, there is typically something wrong with the file path. Often, a file URL is pointing into the application's resources directory instead of a writeable directory.

         If you encounter schema incompatibility errors during development, you can reduce their frequency by:
         * Simply deleting the existing store:
         [[NSFileManager defaultManager] removeItemAtURL:storeURL error:nil]

         * Performing automatic lightweight migration by passing the following dictionary as the options parameter:
         @{NSMigratePersistentStoresAutomaticallyOption:@YES, NSInferMappingModelAutomaticallyOption:@YES}

         Lightweight migration will only work for a limited set of schema changes; consult "Core Data Model Versioning and Data Migration Programming Guide" for details.

         */
        NSLog(@"Unresolved error %@, %@", error, [error userInfo]);
        abort();
    }

    return _persistentStoreCoordinator;
}
- (NSURL *)applicationDocumentsDirectory
{
    return [[[NSFileManager defaultManager] URLsForDirectory:NSDocumentDirectory inDomains:NSUserDomainMask] lastObject];
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-25T08:35:52.563

你没有告诉我们你是如何分配`variable managedObjectContext`你使用的

我想你无论如何都不想:)

=> 您可能想要该物业`self.managedObjectContext`

`NSEntityDescription *entity = [NSEntityDescription entityForName:@"Customer" inManagedObjectContext:self.managedObjectContext];`

# javascript - 如何使用three.js以10 x 10的方式以相等的距离显示立方体？

> ID：14028997
> 
> 赞同：0
> 
> 时间：2012-12-25T08:31:09.063
> 
> 标签：javascript, 3d, three.js

```
var container, camera, scene, renderer;
var scale = 100, N=1000;
var arr= [];
var width = 720, height = 405;
init();
animate();
function init() 
        {
            container = document.getElementById('theCanvas');
            camera = new THREE.PerspectiveCamera( 45, width / height, 0.1, 10000 );
            camera.position.x = 0;
            camera.position.y = 0;
            camera.position.z = 80;
            scene = new THREE.Scene();

            renderer = new THREE.WebGLRenderer({antialias:true});

            renderer.setClearColorHex(0x000000, 1);
            renderer.setSize( width, height );

            container.appendChild( renderer.domElement );

            document.getElementById('3dobjects').innerHTML = "Three.js Demo, The number of Cube Objects: " +N;

            var geometry = new THREE.CubeGeometry( 1, 1, 1 );

            var material = new THREE.MeshBasicMaterial( { color: 0x00ff00 } );
            for ( var i = 0; i < N; i++)
            {
                arr.push(new THREE.Mesh( geometry, material ));
                scene.add( arr[i] );
                arr[i].position.set( (Math.random()-0.5) * scale, (Math.random()-0.5) * scale, (Math.random()-0.5) * scale );
            }

            }

        function animate() 
        {
            requestAnimationFrame( animate );
            render();

       }

        function render() 
        {    
            renderer.render(scene, camera);          
        }
        ​ 
```

我能够以随机方式显示，这是 jsfiddle 链接工作链接：http: [//jsfiddle.net/sagh0900/BEWkQ/](http://jsfiddle.net/sagh0900/BEWkQ/)但我需要，立方体应该以 10 x 10 的方式显示，如下图所示，不要不介意立方体的颜色，我要求时尚

![在此处输入图像描述](../Images/fbd1cc9d17d20d3597a7a6b3c8b3b84d.png)

我无法玩立方体的位置。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-25T09:59:20.953

[修改了你的小提琴](http://jsfiddle.net/BEWkQ/1/)，让你开始你想要的。

```
// ...
var cube = new THREE.Mesh( geometry, material );
arr.push(cube);
scene.add(cube);
cube.position.set(2* j, 2* i,40 ); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-25T09:34:20.917

这应该可以解决问题。

```
var mesh = new THREE.Mesh( geometry, material );
mesh.position.x = ( i % 10 ) * 3;
mesh.position.y = Math.floor( i / 10 ) * 3; 
```