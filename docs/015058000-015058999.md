# StackOverflow 问答 15058000-15058999

# c# - 无法将“System.Data.Linq.Binary”类型的对象转换为“System.Byte []”类型

> ID：15058000
> 
> 赞同：1
> 
> 时间：2013-02-24T23:31:14.603
> 
> 标签：c#, wpf, visual-studio-2010

收到错误“无法将“System.Data.Linq.Binary”类型的对象转换为“System.Byte []”类型。在视觉工作室。我将图像存储在我以树视图格式显示的 sql server db 中。我可以打开 dbml 设计器并将所有 System.Data.Linq.Binary 更改为 System.Byte，但图像模糊不清。有什么想法吗？

这是代码：

```
public class ImageBytesConverter : IValueConverter
{
    public object Convert(object value, Type targetType, object parameter,
        System.Globalization.CultureInfo culture)
    {
        BitmapImage bitmap = new BitmapImage();

        if (value != null)
        {
            byte[] photo = (byte[])value;
            MemoryStream stream = new MemoryStream();

            int offset = 78;
            stream.Write(photo, offset, photo.Length - offset);

            bitmap.BeginInit();
            bitmap.StreamSource = stream;
            bitmap.EndInit();
        }

        return bitmap;
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-24T23:46:44.327

您将不得不使用`ToArray`from 方法`Binary`来获取`byte[]`值。

```
public class BinaryToByteArrayConverter : IValueConverter
{
    public object Convert(object value, Type targetType, object parameter, CultureInfo culture)
    {
        if (value != null && value is System.Data.Linq.Binary)
        {
            byte[] array = (value as System.Data.Linq.Binary).ToArray();
            BitmapImage bitmap = new BitmapImage();

            using (MemoryStream stream = new MemoryStream())
            {
                int offset = 78;
                stream.Write(array, offset, array.Length - offset);
                bitmap.BeginInit();
                bitmap.StreamSource = stream;
                bitmap.EndInit();
            }
            return bitmap;
        }
        return null;
    }

    public object ConvertBack(object value, Type targetType, object parameter, CultureInfo culture)
    {
        return null;
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-24T23:37:19.813

采用`System.Data.Linq.Binary.ToArray()`

由于字节的转换，不太可能导致模糊和模糊，而是由于您用来显示它的控件未与像素网格对齐，或者稍微调整大小，拉伸图像并导致图像放大和模糊. 确保图像未拉伸并且控件与像素网格对齐`SnapsToDevicePixels="True"`

此外，这里是您的代码的一些帮助：

```
public class ImageBytesConverter : IValueConverter
{
    public object Convert(object value, Type targetType, object parameter,
        System.Globalization.CultureInfo culture)
    {
        BitmapImage bitmap = new BitmapImage();
        bitmap.CacheOption = BitmapCacheOption.OnLoad;

        if (value != null)
        {
            byte[] photo = ((System.Data.Linq.Binary)value).ToArray();

            using(MemoryStream stream = new MemoryStream())
            {
                int offset = 78;
                stream.Write(photo, offset, photo.Length - offset);

                bitmap.BeginInit();
                bitmap.StreamSource = stream;
                bitmap.EndInit();
            }

            return bitmap;
        }

        return null;
    }
} 
```

# android - Android：应用程序已意外停止，请重试为什么？

> ID：15058001
> 
> 赞同：0
> 
> 时间：2013-02-24T23:31:14.463
> 
> 标签：android, android-layout, layoutparams

我想以编程方式而不是通过布局文件绘制屏幕。我写的：

```
// create LayoutParams  
LayoutParams linLayoutParam = new LayoutParams(LayoutParams.MATCH_PARENT, LayoutParams.MATCH_PARENT); 

// install linLayout  
setContentView(linLayout, linLayoutParam); 
```

但是我的程序没有启动 - 我有消息“应用程序已意外停止，请重试”，但我的代码是正确的（工作）。我认为我的 Android 虚拟设备管理器有问题，也许我必须尝试在 ROM 管理器中运行修复权限？否则是真的 - 那怎么办？

Android 骂道：`import android.view.ViewGroup.LayoutParams;`- 为什么？Android 想要删除 line 行：`import android.view.ViewGroup.LayoutParams;`- 为什么？也许我对 Android 虚拟设备管理器有问题？但是如何在 ROM 管理器中运行修复权限？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T18:10:50.433

所有的工作！)) 我必须使用 Android Virtual Device Manager 2.3.3，而不是 4.0。

但也许你给我写链接，帮助我脱离 Android。

# python - 在 Python 中执行此操作的最佳方法是什么？

> ID：15058003
> 
> 赞同：0
> 
> 时间：2013-02-24T23:31:20.477
> 
> 标签：python, list, sorting, collections

`start`我有一个对象列表，其中每个对象都具有`end`以下属性：

```
Item 0:
Start: 1
End: 12

Item 1:
Start: 6
End: 3

Item 2:
Start: 12
End: 6 
```

我想订购它们，以便新列表中的每个项目都`start`与`end`之前和之后的项目相匹配。

所以在这个例子中，它将是：

```
[Item 0] [Item 2] [Item 1]
[1   12] [12   6] [6    3] 
```

整个列表是否颠倒都没关系。

还有 2 个像上面那样不相关的列表混合在一起，所以我必须形成 2 个新列表，它们将具有正确的顺序，如上所示。

我只是要开始“蛮力”实现它，所以做了很多查询来创建这些列表，但我想问是否有人可能有更优雅的方法来解决这个问题。我不确定这种问题有多普遍，但我记得以前见过这个，所以也许有一些模式可以解决这个问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-24T23:34:34.043

假设每个开始和结束都有完美的开始/结束匹配：

```
items_by_start = dict((i.start, i) for i in your_items)

ordered_items = [your_items[0]]
for _ in xrange(len(your_items)-1):
    ordered_items.append(items_by_start[ordered_items[-1].end]) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T00:12:43.747

对元素进行排序表明没有重复的项目。但是，对于重复`start`的 s 或`end`s，您必须更加小心（并且可能有多个解决方案）。该问题相当于在无向图的[连通分量中找到](http://en.wikipedia.org/wiki/Connected_component_%28graph_theory%29)[欧拉路径](http://en.wikipedia.org/wiki/Eulerian_path)，可以通过将每个 ( , ) 对视为图边来获得。`start``end`

有足够多的例子来说明如何在网络上用 Python 实现它。请记住，它可以在 O(m) 时间内轻松完成，其中 m 是边数。

此外，当且仅当每个顶点都具有偶数度时，欧几里得路径才存在。如果图表中有许多组件，它仍然成立。

# photoshop - 无法在 Photoshop 中打开 .aco 文件

> ID：15058007
> 
> 赞同：3
> 
> 时间：2013-02-24T23:31:36.230
> 
> 标签：photoshop

我从 dribbble 下载了一个调色板。具体来说，来自

[http://dribbble.com/shots/665606-The-Design-Blog?list=users](http://dribbble.com/shots/665606-The-Design-Blog?list=users)

（点击调色板旁边的泪滴图标）

该文件是一个 .aco 文件，当我在 Photoshop（Adobe Photoshop CS6，版本 13.0.1 x64）中打开它时，Photoshop 抱怨文件意外结束：

![在此处输入图像描述](../Images/78585fd44a32dd0a7d33f11337ff3f6b.png)

是否有可能找出文件有什么问题，或者我需要在 Photoshop 中做些什么才能打开这些类型的文件？

谢谢。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-02-25T00:05:45.967

我通过双击打开文件，然后 Photoshop 将是默认尝试打开它的应用程序，然后给我这个错误。

看来我一直需要的是转到 Photoshop 中的 Swatches 窗口，单击它的菜单并选择 Load Swatches：

![在此处输入图像描述](../Images/f95d995550fa3a429f7d1c73592570b0.png)

然后浏览到 .aco 文件并选择它，然后加载正常:)

# flash - 以编程方式编辑 Flash cookie

> ID：15058011
> 
> 赞同：0
> 
> 时间：2013-02-24T23:32:08.320
> 
> 标签：flash, cookies

为了好玩，我想通过编辑保存文件（带有 .sol 文件扩展名的 Flash cookie）来搞乱 Flash 游戏。

我发现像 .minerva 这样的编辑器玩起来很有趣，但现在我想以编程方式编辑 .sol 文件。

我正在寻求有关如何以编程方式编辑 Flash cookie 的帮助。坦率地说，我真的没有预算购买 Flash 只是为了搞砸。

理想情况下，如果您可以向我推荐一个用于 Python 的 API，它可以让我编辑 Flash cookie，这对我来说是最好的。

下一个最好的将是几乎任何现代/流行语言（C、C++、Ruby、Java、Haskell 等）的 API。

如果这些都不可用，那么一个指向 Flash cookie 解剖结构描述的链接将非常酷。如果没有现成的可用，编写一个 Python 模块来编辑 Flash cookie 似乎是一个有趣的项目。

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T23:41:04.340

[s2x](http://osflash.org/s2x)是一个 python 脚本，可以将 .sol 文件从 XML 转换为 XML。

# objective-c - *** 由于未捕获的异常“NSInvalidArgumentException”无法识别的选择器发送到实例而终止应用程序

> ID：15058017
> 
> 赞同：0
> 
> 时间：2013-02-24T23:32:49.143
> 
> 标签：objective-c, runtime-error, nsexception

所以我使用 asyncsocket 库[https://github.com/caydenliew/AsyncSocket](https://github.com/caydenliew/AsyncSocket)。我有一个按钮，按下时会向服务器发送一个字符串。不存在错误，但出现以下异常：

```
*** Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: '-

[key sendData:]: unrecognized selector sent to instance 0x1002f810'
*** First throw call stack:
(0x18ce012 0x16f3e7e 0x19594bd 0x18bdbbc 0x18bd94e 0x3f26 0x1707705 0x63b2c0 0x63b258 0x6fc021 0x6fc57f 0x6fb222 0x66ab1d 0x66af02 0x648d4a 0x63a698 0x26b1df9 0x26b1ad0 0x1843bf5 0x1843962 0x1874bb6 0x1873f44 0x1873e1b 0x26b07e3 0x26b0668 0x637ffc 0x46fd 0x2865 0x1)
libc++abi.dylib: terminate called throwing an exception 
```

这是keyViewController.h

```
@interface keyViewController ()
{
CFURLRef sysSoundTestPath;
GCDAsyncSocket *asyncSocket;

}
 -(IBAction) touchB:(id)sender;
 -(IBAction)touchE:(id)sender;
 -(void)loadViewFromNIB:(NSString *)nibName owner:(id)owner;
 - (void)sendData:(NSString *) dataSend ;
@end 
```

和.m

```
@implementation keyViewController
- (void)sendData: (NSString *) dataSend {
    if (asyncSocket == nil) {
        asyncSocket = [(keyAppDelegate *)[[UIApplication sharedApplication] delegate] asyncSocket];
        asyncSocket.delegate = self;
    }

    NSData *data = [dataSend dataUsingEncoding:NSUTF8StringEncoding];

    //write data to server
    [asyncSocket writeData:data withTimeout:-1 tag:0];
    //listen to server for message
    [asyncSocket readDataToData:[GCDAsyncSocket CRLFData] withTimeout:30.0 tag:1];
}

- (void)socket:(GCDAsyncSocket *)sock didReadData:(NSData *)data withTag:(long)tag {
    //data from server
    NSString *str = [[NSString alloc] initWithData:data encoding:NSUTF8StringEncoding];
    NSLog(@"%@",str);
}

- (void)socket:(GCDAsyncSocket *)sock didWriteDataWithTag:(long)tag {
    //prepare to read the next message from server again
    [asyncSocket readDataToData:[GCDAsyncSocket CRLFData] withTimeout:30.0 tag:1];
}

- (IBAction)touchB:(id)sender
{

    NSLog(@"down");
    NSString *path = [[NSBundle bundleWithIdentifier:@"com.apple.UIKit"] pathForResource:@"Tock" ofType:@"aiff"];
    NSURL* url = [NSURL fileURLWithPath:path];
    SystemSoundID soundID;
    AudioServicesCreateSystemSoundID( (CFURLRef)objc_unretainedPointer(url), &soundID);
    AudioServicesPlaySystemSound(soundID);
    [sender transmitHandle];
     NSString *name =  [sender restorationIdentifier];
    [sender sendData:name];

}

- (IBAction)touchE:(id)sender
{
    NSLog(@"up");
    [sender transmitHandle];
}

-(void)loadViewFromNIB:(NSString *)nibName owner:(id)owner
{

    NSArray *objects = [[NSBundle mainBundle] loadNibNamed:nibName owner:owner options:nil];
    NSArray *subviews = [objects[0]subviews];
    for (UIView *subview in subviews) {
        if ([subview isKindOfClass:[UIButton class]]) {
            UIButton *key = (UIButton *)subview;
            [key addTarget:self action:@selector(touchB:) forControlEvents:UIControlEventTouchDown];
            [key addTarget:self action:@selector(touchE:) forControlEvents:UIControlEventTouchUpInside];

            //NSString *ident = key.restorationIdentifier;
            //NSLog(@"%@",ident);
        }
    }
}

- (void)viewDidLoad

{
    [super viewDidLoad];
    [self.view setMultipleTouchEnabled:YES];
    [self loadViewFromNIB:@"keyViewController" owner:self];

}

- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];
     //Dispose of any resources that can be recreated.
}

@end 
```

我究竟做错了什么？？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T23:45:31.613

IBAction 的发送者是被按下的按钮。sendData 是控制器的一个方法。您正在将 sendData 发送到按下的按钮。将发件人更改为自己。我不确定您要向发送数据方法发送什么字符串，但我不确定您的按钮是否有一个属性调用 restoreIdentifier。

```
- (IBAction)touchB:(id)sender
{

    NSLog(@"down");
    NSString *path = [[NSBundle bundleWithIdentifier:@"com.apple.UIKit"] pathForResource:@"Tock" ofType:@"aiff"];
    NSURL* url = [NSURL fileURLWithPath:path];
    SystemSoundID soundID;
    AudioServicesCreateSystemSoundID( (CFURLRef)objc_unretainedPointer(url), &soundID);
    AudioServicesPlaySystemSound(soundID);
    [sender transmitHandle];
     NSString *name =  [sender restorationIdentifier];
    //I'm not sure what string you're trying to send to the send data method.
    NSLog(@"Sending:%@ to sendData method", name);
    [self sendData:name];

} 
```

# image - 缩小图像以适合 ScrollViewer 尺寸

> ID：15058018
> 
> 赞同：4
> 
> 时间：2013-02-24T23:32:51.250
> 
> 标签：image, windows-runtime, zooming, scrollviewer

我对相应地缩放图像有一点问题。我的`Image`XAML 中有一个，`ScrollViewer`附加了一个，因此可以缩放。像这样 ：

```
<ScrollViewer x:Name="ImageScrollViewer">
    <Image x:Name="ImagePanel" 
           Stretch="Uniform" 
           VerticalAlignment="Center" 
           HorizontalAlignment="Center"/>
</ScrollViewer> 
```

我想做的是，如果图像太大而无法容纳图像控件并且需要缩小（仅在这种情况下），我想以编程方式设置 ScrollViewer 的 ZoomFactor 使其适合图像控件。我的问题是，考虑到图像的宽度和高度，我真的不知道如何确定该因素。

另外我不想缩放图片，以任何方式改变它，我已经看到了一些关于这个问题的类似主题，但到目前为止，没有一个适用于我的案例。我只需要缩小我的图片，直到没有可见的垂直/水平滚动条。

任何关于如何做到这一点的建议，非常感谢，谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-25T08:12:16.730

您可以设置 的尺寸 ( `Width`, `Height`)`Image`以匹配`ScrollViewer.ViewportWidth/Height`，以便默认情况下所有图像都是可见的。然后设置`MinZoomFactor`为 1，这样没有人会缩小超出有意义的范围和`MaxZoomFactor`有意义的范围。

如果您想要更多控制 - 将图像大小属性保留为默认值`Auto`（和`VerticalAlignment`/`HorizontalAlignment`不同于`Stretch`），将`ScrollViewer`( `ViewportWidth/ViewportHeight`) 的纵横比与`Image`(`ActualWidth/ActualHeight`假设`Image.Stretch="None"`并且`Image`实际加载) 进行比较。如果`ScrollViewer`纵横比更宽 -`MinZoomFactor`你会想要的`ScrollViewer.ViewportHeight / Image.ActualHeight`。如果`Image`纵横比更宽 -`MinZoomFactor`你会想要的`ScrollViewer.ViewportWidth / Image.ActualWidth`。`MaxZoomFactor`应该为 1，除非您想缩放到超过每个图像像素的屏幕像素（在应用程序的 100% 缩放时）。

你可能会觉得我的博文很有趣：

[http://blog.onedevjob.com/2012/07/21/creating-a-zoomable-scrollviewer-with-zoomsnapppoints-in-winrt-xaml/](http://blog.onedevjob.com/2012/07/21/creating-a-zoomable-scrollviewer-with-zoomsnappoints-in-winrt-xaml/)

# html - 使用 jquery mobile 为 iOS 设置 phonegap

> ID：15058019
> 
> 赞同：2
> 
> 时间：2013-02-24T23:32:53.543
> 
> 标签：html, ios, cordova, jquery-mobile

我正准备设置我制作的移动 Web 应用程序，并使用 Adob​​e 的 Phonegap Build 服务将其变成适用于 iOS 的本机应用程序。在阅读他们关于如何设置所有内容的文档后，它提到了一个 config.xml 文件，您可以使用它来定义图标、启动屏幕和标题。看到 Jquery Mobile 通过 html 文件头中的元标记完成所有这些操作，我在使用 phonegap 构建时是否还需要使用 xml 文件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T00:14:15.433

~~您使用 cordova.plist 的 xcode 版本的 phonegap 中没有 config.xml 文件。~~

~~[https://stackoverflow.com/a/11418415/773263](https://stackoverflow.com/a/11418415/773263)~~

* * *

更正：从 Cordova 2.3.0 开始，cordova.plist 现在是 config.xml

[http://shazronatadobe.wordpress.com/tag/cordova-plist/](http://shazronatadobe.wordpress.com/tag/cordova-plist/)

因此，如果您使用的是 2.3.0 下的 phonegap 版本，我在上面发布的内容很有用。如果使用 2.3.0 或更高版本，您需要通过 config.xml 文件配置您的应用程序。

* * *

至于在使用 jQuery Mobile 时是否需要使用 config.xml 或 cordova.plist，答案是肯定的，在使用 Cordova/Phonegap 时，您总是必须使用 config.xml 或 cordova.plist。

# php - 当我使用 PHP QueryPath 2.1.2 修改 docx xml 文件 [document.xml] 时，实际 test1.docx 文件中的更改不可见，为什么？

> ID：15058021
> 
> 赞同：1
> 
> 时间：2013-02-24T23:33:31.047
> 
> 标签：php, xml, querypath

我正在尝试学习如何使用 PHP [QueryPath] 修改 .docx 和 .odt 文件，当我从 WAMP 上的 cmd.exe [command line] 运行此脚本 [below] 时，在命令行上它显示了我想要的更改已经完成并且标签内的所有文本都已更改，但是当我打开一个实际的 docx 文件或其 xml 等效文件时 - 没有进行任何更改。为什么？我该如何纠正这个问题？提前致谢。

```
 <?php

require 'src/QueryPath/QueryPath.php';

$file = 'zip://test1.docx#word/document.xml';

$doc = qp($file);

foreach($doc->find('w|t') as $item) {
        $item->text('BLABLABLA')->writeXML();
}

?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-24T23:39:36.983

从[文档](http://api.querypath.org/docs/class_query_path.html#ac2ee9842d87e2a20fead454864b5d647)中`writeXML`：

> 将文档写入文件路径（如果给定）或标准输出（通常是客户端）。

由于您没有向其传递任何内容，`writeXML`因此只会显示修改后的 XML，而不是将其保存到文件中。

此外，您应该将代码修改为仅在脚本末尾调用`writeXML`一次，即

`$doc->writeXML($filename);`

# javascript - 为什么我的游戏在firefox里这么慢？

> ID：15058023
> 
> 赞同：1
> 
> 时间：2013-02-24T23:34:10.390
> 
> 标签：javascript, jquery, html, canvas, webgl

我一直在玩新的 HTML5 标准，看看它可以提供什么并学习一些东西......但我不明白为什么我的游戏在 Firefox 中如此缓慢。

有几种方法可以选择“绘制”播放器和背景。可以在右下角选择。

我在**Firefox 中测试了游戏，结果**如下：

总而言之，结果超级慢。使用 Html 它完全滞后于画布，它看起来好一点，但仍然完全滞后......

**谷歌浏览器结果：**

谷歌似乎运行代码相当好......它确实没有滞后。

**Internet Explorer 测试**

所以这就是这一切的有趣部分。Internet Explorer 9 运行得非常好……在我的电脑上它几乎太快了。

所以我的问题是。Firefox 不喜欢我的显卡吗？或者哪里出错了？也许我的代码太慢了？但是我是否已经正确完成了测试，它只需要大约 1 毫秒来运行重绘图片的时间间隔（正如计时器在右上角指示的那样，名为 intervalTimer。

我非常想听听你得到了什么结果，如果它只是 Firefox 讨厌我的显卡。:-(

另外，如果您可以看到我可以在哪里进行一些改进以使其在 Firefox 中更好地工作。

这是我的一些代码：

**interval.js**文件运行 setInterval 并重绘播放器。

```
function interval() {
var startdate = +new Date();  // log start timestamp

if (general_slowmo > 9)
    general_slowmo = 0;
else
    general_slowmo++;

collisions();

if (drawmethod == "canvas") {
    canvas.clearRect(0, 0, general_winwidth, general_winheight);
    drawplayercanvas(p0x, p0y, 0);
}
else if (drawmethod == "html") {
    drawplayerhtml(p0x, p0y, 0);
}
else {
    drawImageWebGl(p0, p0x, (general_winheight - p0y) - general_playerheight);
}

var enddate = +new Date();  // log end timestamp
var diff = enddate - startdate;
$("#intervalTimer").html("intervalTimer: " + diff + "ms");
} 
```

但我在 intervalTimer div 上得到的只是 0 或 1 毫秒时间。但我不知道它是否计算绘制玩家所需的时间？

在区间内，函数 Collisions 运行：

```
function collisions() {

var spritex = p0x;
var spritey = p0y;
var jump = jumpp0;
var keyX = keyXp0;
var keyY = keyYp0;
var onground = ongroundp0;

if (keyX == -1) { //left movement
    if (blockexists(spritex - 1, spritey) === false && blockexists(spritex - 1, spritey + general_blocksize) === false) {
        spritex--;
    }
}

if (keyX == 1) { //right movement
    if (blockexists(spritex + general_playerwidth, spritey) === false && blockexists(spritex + general_playerwidth, spritey + general_blocksize) === false) {
        spritex++;
    }
}

if (jump != 0) {
    var aboveone = blockexists(spritex, spritey + (general_playerheight - 1));
    var abovetwo = blockexists((spritex + general_playerwidth - 1), spritey + (general_playerheight - 1));

    if (aboveone === true || abovetwo === true) {
        jump = 0;

        if (toblock(spritex, spritey + (general_playerheight - 1)) == 2) {

            removeblockarray(spritex, spritey + (general_playerheight - 1));

            if (mapdrawmethod == "canvas")
                removeblockcanvas(spritex, spritey + (general_playerheight - 1));
            else
                removeblockhtml(spritex, spritey + (general_playerheight - 1));
        }
        if (toblock((spritex + general_playerwidth - 1), spritey + (general_playerheight - 1)) == 2) {

            removeblockarray((spritex + general_playerwidth - 1), spritey + (general_playerheight - 1));

            if (mapdrawmethod == "canvas")
                removeblockcanvas((spritex + general_playerwidth - 1), spritey + (general_playerheight - 1));
            else
                removeblockhtml((spritex + general_playerwidth - 1), spritey + (general_playerheight - 1));
        }
        spritey--;
    }
    else {
        jump++;
        spritey++;

        if (jump > maxjump) {
            jump = 0;
        }
    }
}

if (keyX != 0 || onground == false) {
    if (blockexists(spritex, spritey - 1) === true || (blockexists(spritex + general_playerwidth - 1, spritey - 1) === true)) {
        if (jump == 0)
            onground = true;
    }

    else if (jump == 0) {
        spritey--;
        onground = false;
    }
}

if (blockexists(spritex, spritey, "item") === true || blockexists(spritex + general_playerwidth - 1, spritey, "item") === true || blockexists(spritex, spritey + general_playerheight, "item") === true || blockexists(spritex + general_playerwidth - 1, spritey + general_playerheight, "item") === true) {

    if (toblock(spritex, spritey) == 11) {
        $("#diamcount").html(++general_numdiamonds);
    }
    else if (toblock(spritex + general_playerwidth - 1, spritey) == 11) {
        $("#diamcount").html(++general_numdiamonds);
    }
    if (toblock(spritex, spritey + general_playerheight) == 11) {
        $("#diamcount").html(++general_numdiamonds);
    }
    else if (toblock(spritex + general_playerwidth - 1, spritey + general_playerheight) == 11) {
        $("#diamcount").html(++general_numdiamonds);
    }

    if (toblock(spritex, spritey) == 10 || toblock(spritex + general_playerwidth - 1, spritey) == 10 || toblock(spritex, spritey + general_playerheight) == 10 || toblock(spritex + general_playerwidth - 1, spritey + general_playerheight) == 10) {
        if (keyY == 1) {
            if (general_slowmo > 5) {
                spritey++;
            }

            onground = true;
            jump = 0;
        }
        if (keyY == -1) {
            if (general_slowmo > 5) {
                spritey--;
            }

            onground = true;
            jump = 0;
        }
    }
}

p0x = spritex;
p0y = spritey;
jumpp0 = jump;
keyXp0 = keyX;
keyYp0 = keyY;
ongroundp0 = onground;
} 
```

无论如何，我想说的是我想听听它为什么这么慢。如果你得到和我一样的结果。

也许是因为我把 div 放在了画布上？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-25T16:56:33.290

如果您使用的是`Firebug`插件，这可能是原因。

我的画布遇到了同样的问题，它在 Chrome 上运行非常流畅，但在 Firefox 上运行非常缓慢且滞后。禁用后`firebug`，它在 Firefox 上运行得更快，在 Chrome 上运行得更快。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-24T23:49:23.307

我在运行 Firefox 18.0.2 的 Mac OS X 10.8.2 上 - 它实际上运行游戏比我的 Chrome 25.0.1364.99 更快、更流畅。碰巧的是，我的 Firefox 刚刚更新到 19.0，它看起来仍然很流畅。

确保您没有运行任何可能与游戏中的 JS/库冲突的扩展。禁用 Firefox 上的所有扩展并再试一次 -[完全重新安装](http://kb.mozillazine.org/Uninstalling_firefox)也将帮助您消除可能导致缓慢的原因。

# facebook - 如何为用户订阅“music.listens”的实时更新？

> ID：15058026
> 
> 赞同：0
> 
> 时间：2013-02-24T23:34:32.527
> 
> 标签：facebook, real-time-updates

我正在尝试使用 facebook 订阅 api 来实时更新用户的“music.listens”连接的更改。目前看来这不可能，但我想知道是否有人对此有任何运气。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T23:34:32.527

来自[http://developers.facebook.com/docs/reference/api/realtime/](http://developers.facebook.com/docs/reference/api/realtime/)：

> 请注意，您不能订阅用户对象的所有属性和连接的更改。您可以订阅的连接包括：订阅源、朋友、活动、兴趣、音乐、书籍、电影、电视、喜欢、签到、位置、事件。

所以，还没有“music.listens”。

# qt - 实现一个可移动的 QGraphicsObject 子类

> ID：15058030
> 
> 赞同：1
> 
> 时间：2013-02-24T23:34:37.450
> 
> 标签：qt, draggable, qgraphicsitem

我正在尝试制作一个 QGraphicObject ，它代表一个可以使用鼠标移动的圆角矩形。

该项目似乎绘制正确，在文档中搜索后，我发现我必须设置`QGraphicsItem::ItemIsMovable` 使项目朝正确方向移动的标志，但它总是比鼠标移动得快，所以我做错了什么？

这是.h文件：

```
class GraphicRoundedRectObject : public GraphicObject
{
    Q_OBJECT
public:
    explicit GraphicRoundedRectObject(
            qreal x ,
            qreal y ,
            qreal width ,
            qreal height ,
            qreal radius=0,
            QGraphicsItem *parent = nullptr);
    virtual ~GraphicRoundedRectObject();

    qreal radius() const;
    void setRadius(qreal radius);
    qreal height() const ;
    void setHeight(qreal height) ;
    qreal width() const ;
    void setWidth(qreal width) ;

    void paint(QPainter *painter, const QStyleOptionGraphicsItem *, QWidget *) override;
    QRectF boundingRect() const override;

private:
    qreal m_radius;
    qreal m_width;
    qreal m_height;
}; 
```

和 .cpp ：

```
#include "graphicroundedrectobject.h"
#include <QPainter>

GraphicRoundedRectObject::GraphicRoundedRectObject(
        qreal x ,
        qreal y ,
        qreal width ,
        qreal height ,
        qreal radius,
        QGraphicsItem *parent
        )
    : GraphicObject(parent)
    , m_radius(radius)
    , m_width(width)
    , m_height(height)
{
    setX(x);
    setY(y);
    setFlag(QGraphicsItem::ItemIsMovable);
}

GraphicRoundedRectObject::~GraphicRoundedRectObject() {
}

void GraphicRoundedRectObject::paint
(QPainter *painter, const QStyleOptionGraphicsItem *, QWidget*) {
    painter->drawRoundedRect(x(), y(),m_width, m_height, m_radius, m_radius );
}

QRectF GraphicRoundedRectObject::boundingRect() const {
    return QRectF(x(), y(), m_width, m_height);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T08:05:42.477

这是因为您在父坐标而不是对象的坐标中绘制矩形。

它应该是：

```
void GraphicRoundedRectObject::paint(QPainter *painter,
                                     const QStyleOptionGraphicsItem *, QWidget*) {
    painter->drawRoundedRect(0.0, 0.0,m_width, m_height, m_radius, m_radius );
}

QRectF GraphicRoundedRectObject::boundingRect() const {
    return QRectF(0.0, 0.0, m_width, m_height);
} 
```

# c++ - 任何更快的方法来计算字符串流中的字符串数

> ID：15058031
> 
> 赞同：0
> 
> 时间：2013-02-24T23:34:51.620
> 
> 标签：c++, string, counter

我正在尝试检查一行是否正好有 10 个单词。我这样做的方式是复制该行，并逐个提取并增加计数器，如果它是10，我操纵该行。但我觉得这非常低效，因为我必须对每一行都这样做，而且大多数行都是 10 个单词。所以我正在寻找一种更有效的方法来做到这一点。

```
 while(getline(ifs, line)){
        istringstream iss (line);
        int s_counter = 0;
        istringstream iss_copy = iss;   //create a copy to test if there are 10 strings in a iss
        string s;
        while (iss_copy >> s){
            ++s_counter;
        }
        if (s_counter == 10){
            while(iss>>word){   
                ...//manipuate each word                
            }
        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T00:24:05.710

我是这样做的：

```
int main()
{
  std::string s1("hi hi hi hi //blah");
  size_t pos = s1.find('/');  
  std::cout << std::count(s1.begin(), s1.begin()+pos, ' ') << std::endl;
  return 0;
} 
```

或者

```
int countSpace(const std::string& s)
{
  int count = 0;

   for(size_t i=0; i<s.size()-1; i++)
   {
     if (s[i] == ' ')
     {
       count++;
     }
     if (s[i+1] == '/')
     {
       return count;
     }
   }
   return count;
}

int main()
{
  std::string s1("hi hi hi hi //blah");
  countSpace(s1);
  return 0;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T01:45:02.993

您可以更有效地使用 STL 算法。

```
template<typename charT>
struct CntSpaceFunctor {
    bool isEnd ;
    std::size_t value ;
    CntSpaceFunctor( ) : isEnd(false),value(0) {} 

    inline void operator()( charT ch ) const {
         if( ch == charT(' ') && !isEnd)  ++value ;
         else if( ch == charT('/') )      isEnd = true ;
         else ;
    }
};
int countSpace( const string& str ) {
    CntSpaceFunctor<char> result ;
    return for_each( str.begin() , str.end() , result ).value ;
} 
```

# mysql - 通过 concat 函数在字段选择查询中使用匹配

> ID：15058032
> 
> 赞同：0
> 
> 时间：2013-02-24T23:34:53.293
> 
> 标签：mysql, sql, database

为什么运行此查询时会出现错误？

```
SELECT 
   `site_members`.`username`,
   `site_members`.`email`,
   `site_members`.`ID`,
   `site_members`.`firstName`,
   `site_members`.`lastName`,
   `site_members`.`avatar`,
   `site_members`.`avatar_status`,
   `site_members_privacy`.`searchable_profile`,
   CONCAT(firstName , ' ', lastName ) AS `concat_name`,
   `site_members_privacy`.*
FROM `site_members`
LEFT JOIN 
    `site_members_privacy` 
        ON site_members.ID = site_members_privacy.memberID 
        WHERE (email LIKE '%test%' OR CONCAT(firstName , ' ', lastName ) LIKE '%test%')
        OR (MATCH(concat_name) AGAINST('test' IN BOOLEAN MODE)) 
ORDER BY `firstName` ASC, `lastName` ASC, `username` ASC LIMIT 30 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T01:36:19.350

这不是`MATCH()`工作方式——您需要为它提供一个以逗号分隔的要搜索的字段列表。据推测，这些将是您用于`FULLTEXT`索引的字段。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-24T23:40:07.860

尝试改变

```
MATCH(concat_name) 
```

至

```
MATCH(CONCAT(firstName , ' ', lastName)) 
```

这是一种猜测，但我认为你必须这样做。

# apache - 自定义 dijit.form.Horizo ntalRuleLabels 在 Firefox 上显示为百分比

> ID：15058033
> 
> 赞同：0
> 
> 时间：2013-02-24T23:34:58.473
> 
> 标签：apache, dojo, dijit.form

添加自定义滑块范围（1 到 12）后，如下所示：

```
<div id="mySlider" > <!-- intialized on javascript -->
<div data-dojo-type="dijit.form.HorizontalRule" 
     data-dojo-props='container:"bottomDecoration", count:2, style:{height:"5px"}'></div>
<ol data-dojo-type="dijit.form.HorizontalRuleLabels" data-dojo-props='container:"bottomDecoration", style:{height:"1em", fontSize:"75%"}'>
    <li><span style="font-size: small">1</span></li>                                                   
    <li><span style="font-size: small">12</span></li>
</ol> 
```

我得到了百分比（0%、100%）而不是自定义范围。

这仅发生在 Firefox 上，适用于 Apache 提供的页面。我尝试使用 Glassfish 在 localhost 上运行相同的页面，它按预期工作。

有没有办法解决这个问题（代码或 Apache 配置？）

**注意：**如果对任何人有帮助，我也可以添加相关的 javascript。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T06:44:14.703

我无法以声明方式解决此问题，因此我进行了程序初始化： [http ://dojotoolkit.org/documentation/tutorials/1.6/sliders/](http://dojotoolkit.org/documentation/tutorials/1.6/sliders/)

# plone - 在 Plone 中使用 Zeo 服务器指向网站的位置

> ID：15058034
> 
> 赞同：2
> 
> 时间：2013-02-24T23:35:02.177
> 
> 标签：plone

我是第一次安装 ZEO。在我的配置中，实例在端口 8060 上服务 HTTP 请求。ZEO 服务器在端口 8061 上运行，另一个实例（客户端）在 8062 上运行。我可以在浏览器中通过 HTTP 访问这两个客户端。

我的网站在我添加 ZEO 之前指向 8060，在我添加 ZEO 服务器后继续指向 8060。如果我重新启动 8062 客户端，那么我的网站似乎仍在提供页面，但如果我在 8060 上重新启动实例，那么网站将停止提供页面。在我看来，只有 8060 实例是独立工作的，而不是使用 ZEO，因为我希望在重新启动任何实例时得到响应。请注意，在 ZEO 日志中，我可以看到握手条目。

我是否必须将网站指向 ZEO 服务器端口（不提供 HTTP 请求），还是我在实现中遗漏了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-25T10:30:44.603

添加 ZEO 服务器不会神奇地使您的网站在客户端之间取得平衡。您的 ZEO 设置和您的实例一样运行良好，但您需要配置另一个组件：负载均衡器。

无论您*在 Plone 站点前面*有什么，都需要被告知使用其他客户端，这不会自动发生，也不是 ZEO 服务器的责任。

您用作负载均衡器的方式取决于您。您有多种选择：

*   如果您当前使用 Apache 重写您的 Plone 站点的 URL，您可以配置[`mod_rewrite`为负载平衡](http://httpd.apache.org/docs/trunk/rewrite/advanced.html)以进行随机负载平衡。或者，您可以使用[`mod_proxy_balancer`](http://httpd.apache.org/docs/2.2/mod/mod_proxy_balancer.html)实现更复杂的平衡设置并添加运行状况检查（如果后端正在重新启动，则停止使用）。
*   Varnish 也可以做缓存*和* [负载平衡](https://www.varnish-cache.org/trac/wiki/LoadBalancing)。
*   您可以安装专用的负载均衡器。[HAProxy](http://haproxy.1wt.eu/)将是一个很好的选择，并且可以进行微调以匹配几乎任何场景。我们在大规模部署中使用它，在 30 个 Plone 后端平衡负载。

您需要选择一个并进行配置。如果您对具体细节有疑问，您可以查看[https://serverfault.com](https://serverfault.com)是否可以提供帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T03:32:29.963

您将需要在您的 zeo 实例前安装一个负载均衡器。试试 haproxy。

[http://developer.plone.org/reference_manuals/active/deployment/stack.html?highlight=haproxy#background-the-stack](http://developer.plone.org/reference_manuals/active/deployment/stack.html?highlight=haproxy#background-the-stack)

[https://pypi.python.org/pypi/plone.recipe.haproxy/1.1.2](https://pypi.python.org/pypi/plone.recipe.haproxy/1.1.2)

# ruby-on-rails - 仅当用户是管理员时才在模型中调用方法

> ID：15058035
> 
> 赞同：-1
> 
> 时间：2013-02-24T23:35:17.740
> 
> 标签：ruby-on-rails, ruby, rails-admin

我[在需要的模型中有一段代码，但这会破坏 RailsAdmin](https://stackoverflow.com/questions/14914543/serialize-activerecordcodershstore-crashes-railsadmin)：

```
class Item < ActiveRecord::Base
  serialize :properties, ActiveRecord::Coders::Hstore
end 
```

由于我还没有找到解决问题的解决方案，我打算只在用户不是管理员时运行这行代码：

在控制器中，我可以通过调用：

```
unless current_user.role?("Admin") # CanCan is installed 
```

我怎样才能在 Item 模型中实现这样的东西？还是有更好的方法（我有一种感觉）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T23:42:26.717

看看 cancan + rolify 你可以使用 current_user.has_role 吗？：行政

# 编辑

Devise 给你方法`current_user`
Rolify 给你方法 Cancan 给`has_role? :admin`
你方法比如`can? :destroy, @project`

关于 cancan 的注意事项：要使用 can 和 cannot 方法，您需要污染能力类

# sql-server - JDBC 无法连接 - SQL

> ID：15058040
> 
> 赞同：1
> 
> 时间：2013-02-24T23:36:18.297
> 
> 标签：sql-server, jdbc, nullpointerexception

我从这段代码中得到空指针异常。我已经在库中导入了 jtds-1.3.0.jar。我还在 SQL Server 配置管理器中将配置设置为使用端口 1433。

**代码**：

```
public class Conexao 
{

  private static String driver = "net.sourceforge.jtds.jdbc.Driver";//driver
  private static String banco = "gerenciaRH"; //the name
  private static String host = "localhost"; //wheres the database
  private static String str_conexao = "jdbc:jtds:sqlserver://" + host + ":1433/" + banco; //string for connection
  private static String usuario = "sa"; //User
  private static String senha = ""; //passw
  private static Connection conexao = null;
  private static Statement state;

  public Statement conectar()
  {
    try 
    {
      if (conexao == null || conexao.isClosed()) 
      {
        Class.forName(driver).newInstance();
        conexao = (Connection) DriverManager.getConnection(str_conexao, usuario, senha);
        state = (Statement) conexao.createStatement();

        return state;
      }
      else 
      {
        return state;
      }
    }
   catch (ClassNotFoundException e) 
   {
      System.out.println(e);
      return null;
   }
   catch (SQLException e) 
   {
      System.out.println(e);
      return null;
   }
   catch (Exception e)
   {
      System.out.println(state);
      System.out.println(e);
      return null;
   }
  }
   public static void fechaConexaoBD () 
  {
      try 
      {
        conexao.close();
      }
      catch (SQLException e) 
      {
        e.printStackTrace();
      }
  }
} //close conection 
```

**控制台**：

java.sql.SQLException：网络错误IOException：连接被拒绝：线程“AWT-EventQueue-0”中的连接异常java.lang.NullPointerException

# c - C 结构参考词汇

> ID：15058045
> 
> 赞同：1
> 
> 时间：2013-02-24T23:37:15.990
> 
> 标签：c, structure

考虑我的例子：评论中概述了问题。

```
struct jeff {        //jeff is the tag name correct?
   int age;
   int weight;
};

typedef struct {   // Is it correct to say that this structure has no "tag" name?
  int age;
  int weight;      
}jeff;         // This is an alias for an anonymous structure correct? Not its tag name.

typedef struct jeff {     // Is it correct to say that this struct has a tag name jeff
  int age;               // and an alias Jeffery?
  int weight;
 } Jeffery; 
```

这些问题实际上只与关于 C 语言的正确语义有关。

最后一个问题：

```
struct {
 int age;
 int weight;
}jeff;         // Why would one want a struct with no name/alias. I don't see the benefit. 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-24T23:44:21.213

> 杰夫标签名称正确吗？

正确的。

> 说这个结构没有“标签”名称是否正确？

确切地。

> 这是匿名结构的别名，对吗？不是它的标签名称。

AFAIK 它被称为 typedef，但是，这里没有结构标记，只有一个类型名。

> 说这个结构有一个标签名 jeff 和一个别名 Jeffery 是否正确？

如果你愿意的话。

> 为什么要一个没有名称/别名的结构？

好吧，也许只是为了好玩？也许它是某个地方的临时变量，根本不会在代码中的其他任何地方使用，因此为它定义结构类型是多余的。（反正我不喜欢这种风格……）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T01:12:46.097

### 用于匿名结构

匿名结构（数组）可能有用的一个地方是在一个函数之外不需要数据的代码中。

```
const char *info_lookup(int value)
{
    static const struct { int number; char *name; } list[] =
    {
        {  1, "twenty-seven"  },
        { 13, "unfortunately" },
        { 27, "won"           },
        ...
    };
    enum { NUM_LIST_ITEMS = sizeof(list) / sizeof(list[0]) };

    for (i = 0; i < NUM_LIST_ITEMS; i++)
    {
        if (value <= list[i].number)
            return(list[i].name);
    }
    return(0);
} 
```

我有时也用它来运行测试，其中结构捕获测试信息：

```
static const struct
{
    const char *ver1;
    const char *ver2;
    int         result;
} test[] =
{
    {   "7.0.4.27", "7.0.4.17", +1 },
    {   "7.0.4.23", "7.0.4.17", +1 },
    {   "7.0.4.23", "7.0.4.27", -1 },
    {   "7.0.4.23", "7.0.5.07", -1 },
    ...20+ tests omitted...
};

enum { NUM_TESTS = DIM(test) };

static const char *result(int i)
{
    if (i < 0)
        return("<");
    else if (i > 0)
        return(">");
    else
        return("=");
}

int main(void)
{
    size_t j;
    int fail = 0;

    for (j = 0; j < NUM_TESTS; j++)
    {
        int r1 = version_compare(test[j].ver1, test[j].ver2);
        int r2 = version_compare(test[j].ver2, test[j].ver1);
        const char *pass_fail = "PASS";
        char extra[32] = "";
        if (r1 != test[j].result)
        {
            pass_fail = "FAIL";
            fail++;
            snprintf(extra, sizeof(extra), " Expected %s", result(test[j].result));
        }
        assert(r1 == -r2);
        printf("%s: %-10s  %s  %s%s\n",
               pass_fail, test[j].ver1, result(r1), test[j].ver2, extra);
    }

    if (fail == 0)
    {
        printf("== PASS == %d tests passed\n", NUM_TESTS);
        return(0);
    }
    else
    {
        printf("!! FAIL !! %d out of %d tests failed\n", fail, NUM_TESTS);
        return(1);
    }
} 
```

它仅适用于文件外部不需要了解结构的情况，并且只有一个类型的变量（或者您可以在单个声明中声明该类型的所有变量，但我通常每个声明只有一个声明符，所以这相当于该类型的一个变量）。

如果您需要多次引用该类型，那么它需要一个名称——结构标记或 typedef 名称或两者兼而有之。

# c# - 尝试在 C# 中使用 SQLite 时找不到 DLL 错误

> ID：15058048
> 
> 赞同：0
> 
> 时间：2013-02-24T23:37:32.993
> 
> 标签：c#, .net, dll

我有一个用 C# 编码的小应用程序，它与 sqlite 数据库一起使用，所以在编译时我有编译的 exe + 2 个 dll：SQLite.Interop.dll 和 System.Data.SQLite.dll

在我编译它的机器上它工作完美（w7），但今天我将它移到另一台装有win XP的机器上，我在尝试执行它时得到了这个（应用程序有一个带有异常msgbox的try catch）：

> System.DllNotFoundException：无法加载 DLL 'SQLite.Interop.dll' 找不到指定的模块。

所需的所有dll都与exe位于同一文件夹中，可能导致错误的原因是什么？

有什么办法可以在 exe 中编译或打包 dll 吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T23:58:36.407

我建议为 x86 处理器构建您的项目并重试。

# sql - SQL 插入语句 - 如何在单个字段上指定条件

> ID：15058049
> 
> 赞同：0
> 
> 时间：2013-02-24T23:37:41.883
> 
> 标签：sql, sql-server-2008

我有一个简单的表单，允许用户为其业务创建服务。他们还可以使用相同的表格将交易附加到该服务。

例子：

*   服务名称
*   服务价格
*   服务说明
*   激活交易
*   成交价

有两个隐藏的日期字段：

1.  服务创建日期
2.  DealCreated_Date

我的问题是，因为这是“插入”表单，而不是更新在 DealCreated_Date 上合并条件的正确方法是什么？

例如：

```
INSERT INTO MyTable
(
    ServiceTitle
   ,ServicePrice
   ,ServiceDescription
   ,ServiceCreated_Date
   ,ActivateDeal
   ,DealPrice
   ,DealCreated_Date
) VALUES
(
    @ServiceTitle
   ,@ServicePrice
   ,@ServiceDescription
   ,GETDATE() // For ServiceCreated_Date
   ,@ActivateDeal
   ,@DealPrice
   ,??????? 
```

所以基本上，我想将 GETDATE() 用于 DealCreated_Date 字段，但仅当 ActivateDeal 为 TRUE (1)

是否有捷径可寻？

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-24T23:45:30.957

我认为您只想使用 CASE 语句：

```
INSERT INTO MyTable
(
    ServiceTitle
   ,ServicePrice
   ,ServiceDescription
   ,ServiceCreated_Date
   ,ActivateDeal
   ,DealPrice
   ,DealCreated_Date
) VALUES
(
    @ServiceTitle
   ,@ServicePrice
   ,@ServiceDescription
   ,GETDATE() // For ServiceCreated_Date
   ,@ActivateDeal
   ,@DealPrice
   ,CASE WHEN @ActivateDeal THEN getDate() END
) 
```

这应该根据@ActivateDeal 的值插入当前日期或NULL。根据其数据类型，您可能需要改用 CASE WHEN @ActivateDeal = 1。

[SQL 小提琴演示](http://sqlfiddle.com/#!3/9446e/1)

# c# - WCF Web 服务会话

> ID：15058051
> 
> 赞同：0
> 
> 时间：2013-02-24T23:37:52.040
> 
> 标签：c#, wcf

我正在阅读一周，由于家庭日（国定假日），我的网络服务课上周一取消了。不幸的是，在我们再次见到他之前，老师仍然分配了一个到期的项目。

我应该使用 Windows 窗体客户端制作 WCF 服务。

我希望我的客户能够更新我的 StockService.svc.cs 类中的一些字符串。唯一的问题是，它不保留数据。我知道这与会话有关，您需要在服务类中指定会话类型或其他内容。

我输入的关键字是什么，因此会话将持续到客户端关闭，以便为会话保留任何更改的值？

我发现：

```
[WebMethod(EnableSession=true)] 
```

但是由于我的老师还没有在实验室中介绍过这个，所以我不知道如何使用它。它给出了一个错误：

错误 1 ​​属性“WebMethod”在此声明类型上无效。它仅对“方法”声明有效。

任何帮助，将不胜感激。（注意：虽然我给老师发了邮件，但已经 3 天了，我不想在最后一分钟这样做！）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T00:31:41.430

您尝试使用的属性仅适用于 XML Web Services。我向您推荐[这篇](http://msdn.microsoft.com/en-us/library/ms733040.aspx)关于 WCF 会话的文章。WCF 服务中的会话与 asp.net 中的会话不同。您的问题的一种解决方案可能是使用静态变量来存储插入的值。我在这里做了一些测试，效果很好

# linux - 检查Tomcat 7版本linux

> ID：15058052
> 
> 赞同：5
> 
> 时间：2013-02-24T23:38:15.567
> 
> 标签：linux, version, tomcat7

如何检查 RHEL 上安装的 tomcat 7 的版本？我查看了 bin 目录，找不到 version.sh。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-24T23:52:38.190

您可以使用以下 scriptlet 发布 jsp：

```
<%= application.getServerInfo() %> 
```

或者 grep **catalina.out**如下一行：

```
INFO: Starting Servlet Engine: Apache Tomcat/7.0.37 
```

或者查看**lib/catalina.jar**`org/apache/catalina/util/ServerInfo.properties`中的文件。

 **只是给你3个选择;）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-30T02:55:43.977

试试这个来查看已安装的任何 Tomcat RPM 包的名称和版本：

```
$ sudo rpm -qa | grep tomcat 
```**

# api - iOS 通过 api 或其他方式预加载/缓存谷歌地图数据？

> ID：15058059
> 
> 赞同：2
> 
> 时间：2013-02-24T23:39:22.927
> 
> 标签：api, google-maps

是否可以使用 google api 创建一个 ios 地图应用程序，以便将地图预加载并缓存在应用程序中？这样在应用程序运行时不会产生数据成本？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-12T11:04:09.130

GMSServices 可能由应用程序持有，以维护缓存和与 Google 的连接；这可以提高性能。（来自版本 1.4.1 的功能）。[https://developers.google.com/maps/documentation/ios/releases?hl=en](https://developers.google.com/maps/documentation/ios/releases?hl=en)

但是，我不知道预缓存地图。非常有趣的问题！

# android - android：如何动画翻译 LayerDrawable 的单层

> ID：15058064
> 
> 赞同：1
> 
> 时间：2013-02-24T23:40:10.037
> 
> 标签：android, animation

我已经浏览了 android 动画类，但我不确定我是否看到了我正在寻找的东西。我想知道是否可以将平移动画（更改 X 坐标）添加到 LayerDrawable 的单层？我找到了 TranslateAnimation 类，但它似乎只适用于整个 ImageView，我只想为我的 LayerDrawable 的一个图层设置动画。有什么建议吗？提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-02-25T12:06:46.933

**简而言之：**可以使用[ValueAnimator](http://developer.android.com/reference/android/animation/ValueAnimator.html)来调整该可绘制对象的边界

**更详细：**假设您`id:innerRed`有一个[图层](http://developer.android.com/reference/android/animation/ValueAnimator.html)列表可绘制 对象，内部项目可绘制对象（像下面的例子一样的drawable（乒乓位置每边100）：`Button``id:btnWithDrawableBg``background``x`

**pos_animator.xml**

```
<?xml version="1.0" encoding="utf-8"?>
<animator xmlns:andoird="http://schemas.android.com/apk/res/android"
  andoird:repeatCount="infinite"
  andoird:repeatMode="reverse"
  andoird:valueFrom="-100"
  andoird:valueTo="100"
  andoird:valueType="intType"
/> 
```

**我的活动.java**

```
 @Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    // our button with the drawable background
    Button btnWithBg = (Button) findViewById(R.id.btnWithDrawableBg);
    // the layered drawable
    final LayerDrawable layerDrawable = (LayerDrawable) btnWithBg.getBackground();
    // internal layer (item) drawable with id:innerRed
    final GradientDrawable innerRedShape = (GradientDrawable)layerDrawable.findDrawableByLayerId(R.id.innerRed);
    // our animator based on the xml above
    ValueAnimator posAnim = (ValueAnimator) AnimatorInflater.loadAnimator(
            mainLayout.getContext(), R.animator.pos_animator);

    posAnim.addUpdateListener(new ValueAnimator.AnimatorUpdateListener() {
        @Override
        public void onAnimationUpdate(ValueAnimator animation) {
            // get current offset value and adjust drawable bounds
            int value = (Integer)animation.getAnimatedValue();
            Rect bounds = innerRedShape.copyBounds();//see Note below
            // here only manipulating x value
            bounds.offset(value, 0);
            innerRedShape.setBounds(bounds);
        }
    });
    posAnim.setTarget(innerRedShape);
    posAnim.start();
} 
```

**注意：** `copyBounds()`是必需的（而不仅仅是`getBounds().offset()`）基于this SO [post](https://stackoverflow.com/questions/5270639/android-how-to-move-a-bitmapdrawable)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T15:52:09.677

我已经找到了答案……似乎一旦组成了 LayerDrawable ，您就真的无法操纵图层了。由于缺乏回应，我认为我的问题可能是问错了问题，我重新设计为使用 LayerDrawable 但将动画作为单独的可绘制/图像视图对象，我在每个动画之前和之后生成和销毁这些对象。然后我在 imageView 上使用 ObjectAnimator 来实现所需的图像翻译。因此，以防万一有人读到这篇文章想要为他们的 LayerDrawable 的单个图层设置动画，请尝试重新设计，以便您可以使用 Animator 类。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-10-06T07:27:21.467

我已经这样做了：

**onCreate()**

```
ImageView imageView = (ImageView) findViewById(R.id.imageView);

Resources r = getResources();

Drawable[] layers = new Drawable[2];

layers[0] = r.getDrawable(R.drawable.your_background_res);

PulseDrawable pulseDrawable = new PulseDrawable(Color.WHITE);
layers[1] = pulseDrawable;

LayerDrawable layerDrawable = new LayerDrawable(layers);

// This will adjust X & Y of layer, we have to pass layer index (250 pixels from Left and 150 pixels from Right)
layerDrawable.setLayerInset(1, 250, 150, 0, 0);

imageView.setImageDrawable(layerDrawable); 
```

**PulseDrawable.java**

```
import android.animation.AnimatorSet;
import android.animation.ValueAnimator;
import android.graphics.Canvas;
import android.graphics.Color;
import android.graphics.ColorFilter;
import android.graphics.Paint;
import android.graphics.RadialGradient;
import android.graphics.Rect;
import android.graphics.Shader;
import android.graphics.drawable.Drawable;
import android.view.animation.DecelerateInterpolator;

public class PulseDrawable extends Drawable {
    private final static float CENTER_AREA_SIZE = 0.6f;
    private final static int PULSE_START_COLOR_OPACITY = 0;
    private final static float MINIMUM_RADIUS = 0;
    private final static int ANIMATION_DURATION_IN_MS = 1500;
    private final int color;
    private Paint centerPaint;
    private Paint pulsePaint;
    private float fullSizeRadius = 60;
    private float currentExpandAnimationValue = 0f;
    private int currentAlphaAnimationValue = 255;

    public PulseDrawable(int color) {
        this.color = color;
        initializeDrawable();
    }

    private void initializeDrawable() {
        preparePaints();
        prepareAnimation();
    }

    private void prepareAnimation() {
        final ValueAnimator expandAnimator = ValueAnimator.ofFloat(0f, 1f);
        expandAnimator.setRepeatCount(ValueAnimator.INFINITE);
        expandAnimator.setRepeatMode(ValueAnimator.RESTART);
        expandAnimator.addUpdateListener(new ValueAnimator.AnimatorUpdateListener() {
            @Override
            public void onAnimationUpdate(ValueAnimator animation) {
                currentExpandAnimationValue = (float) animation.getAnimatedValue();
                if (currentExpandAnimationValue == 0f) {
                    currentAlphaAnimationValue = 255;
                }
                invalidateSelf();
            }
        });
        final ValueAnimator alphaAnimator = ValueAnimator.ofInt(255, 0);
        alphaAnimator.setStartDelay(ANIMATION_DURATION_IN_MS / 4);
        alphaAnimator.setRepeatCount(ValueAnimator.INFINITE);
        alphaAnimator.setRepeatMode(ValueAnimator.RESTART);
        alphaAnimator.addUpdateListener(new ValueAnimator.AnimatorUpdateListener() {
            @Override
            public void onAnimationUpdate(ValueAnimator animation) {
                currentAlphaAnimationValue = (int) animation.getAnimatedValue();
            }
        });
        AnimatorSet animation = new AnimatorSet();
        animation.playTogether(expandAnimator, alphaAnimator);
        animation.setDuration(ANIMATION_DURATION_IN_MS);
        animation.setInterpolator(new DecelerateInterpolator());
        animation.start();
    }

    private void preparePaints() {
        pulsePaint = new Paint(Paint.ANTI_ALIAS_FLAG);
        pulsePaint.setStyle(Paint.Style.FILL);
        centerPaint = new Paint(Paint.ANTI_ALIAS_FLAG);
        centerPaint.setStyle(Paint.Style.FILL);
        centerPaint.setColor(color);
    }

    @Override
    public void setAlpha(int alpha) {
        pulsePaint.setAlpha(alpha);
    }

    @Override
    public void setColorFilter(ColorFilter colorFilter) { }

    @Override
    public int getOpacity() {
        return pulsePaint.getAlpha();
    }

    @Override
    public void draw(Canvas canvas) {
        Rect bounds = getBounds();

        //TODO - If we want to draw circle on center of canvas use below code

        /*float centerX = bounds.exactCenterX();
        float centerY = bounds.exactCenterY();*/

        float startX = bounds.left;
        float startY = bounds.top;

//        calculateFullSizeRadius();
        preparePaintShader();
        renderPulse(canvas, startX, startY);
        renderCenterArea(canvas, startX, startY);
    }

    private void renderPulse(Canvas canvas, float centerX, float centerY) {
        float currentRadius = fullSizeRadius * currentExpandAnimationValue;
        if (currentRadius > MINIMUM_RADIUS) {
            canvas.drawCircle(centerX, centerY, currentRadius, pulsePaint);
        }
    }

    private void renderCenterArea(Canvas canvas, float centerX, float centerY) {
        float currentCenterAreaRadius = fullSizeRadius * CENTER_AREA_SIZE;
        if (currentCenterAreaRadius > MINIMUM_RADIUS) {
            canvas.save();
            float left = centerX - currentCenterAreaRadius;
            float top = centerY - currentCenterAreaRadius;
            float right = centerX + currentCenterAreaRadius;
            float bottom = centerY + currentCenterAreaRadius;
            canvas.clipRect(left, top, right, bottom);
            canvas.drawCircle(centerX, centerY, currentCenterAreaRadius, centerPaint);
            canvas.restore();
        }
    }
    private void preparePaintShader() {
        Rect bounds = getBounds();
        float centerX = bounds.exactCenterX();
        float centerY = bounds.exactCenterY();
        float radius = (Math.min(bounds.width(), bounds.height()) / 2);
        if (radius > MINIMUM_RADIUS) {
            int edgeColor = getPulseColor();
            int centerColor = Color.argb(PULSE_START_COLOR_OPACITY, Color.red(color),
                    Color.green(color),
                    Color.blue(color));
            pulsePaint.setShader(new RadialGradient(centerX, centerY, radius,
                    centerColor, edgeColor, Shader.TileMode.CLAMP));
        } else {
            pulsePaint.setShader(null);
        }
    }

    private int getPulseColor() {
        return Color.argb(currentAlphaAnimationValue, Color.red(color),
                Color.green(color),
                Color.blue(color));
    }

    private void calculateFullSizeRadius() {
        Rect bounds = getBounds();
        float minimumDiameter = Math.min(bounds.width(), bounds.height());
        fullSizeRadius = (minimumDiameter / 2);
    }
} 
```

**输出**

[![在此处输入图像描述](../Images/1c480655a99c60a6013d0575d4795603.png)](https://i.stack.imgur.com/zuMVA.gif)

**注意：**您可以添加多个图层，对于演示，我添加了两个图层。

希望这会帮助你。

# algorithm - 排序数组的交集的修改

> ID：15058066
> 
> 赞同：1
> 
> 时间：2013-02-24T23:40:22.147
> 
> 标签：algorithm, sorting, tree, complexity-theory, binary-search

我遇到了这个问题 - 输入 - 我得到了两个排序数组 a1 和 a2。我需要找到第二个数组中不存在的元素。

我有两种方法

1) Hashtable - O(m+n)
[当第二个数组很小时使用]

2) 二分查找 - O(m*logn)
[当第二个数组很大时使用]

还有其他时间复杂度更好的方法吗？

谢谢你

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T00:09:22.800

只需并行迭代它们。

这是一个 JavaScript 示例：

```
var a1 = [1, 2, 3, 4, 5, 6, 7, 9];
var a2 = [0, 2, 4, 5, 8];

findNotPresent(a1, a2); // [1, 3, 6, 7, 9]

function findNotPresent(first, second) {
    var first_len = first.length;
    var first_index = 0;

    var second_len = second.length;
    var second_index = 0;

    var result = [];

    while (first_index < first_len && second_index < second_len) {
        if (first[first_index] < second[second_index]) {
            result.push(first[first_index]);
            ++first_index;
        }
        else if (first[first_index] > second[second_index]) {
            ++second_index;
        }
        else {
            ++first_index;
            ++second_index;
        }
    }

    while (first_index < first_len) {
        result.push(first[first_index++]);
    }

    return result;
} 
```

我相信它需要 O(max(N, M))。

# highcharts - highcharts 显示时间变化数据

> ID：15058067
> 
> 赞同：1
> 
> 时间：2013-02-24T23:40:54.330
> 
> 标签：highcharts, dst

我想使用 highcharts 绘制几天的数据（可能是 1 到 7 天）。

数据可以是每小时或每半小时。

我希望显示在当地时间（即遵守夏令时）。

我希望图表是连续的，即在春季时间变化时，线路中没有“间隙”，在冬季时间变化日，时间变化日没有加倍（即之字形）。

a）highcharts可以处理这个吗？

b）如果不是，我可以改为以标准时间（即没有时间变化）绘制，但用本地时间标签标记 x 轴。如果是这样：

b.1) 我是否可以指定仅在本地时间标签为 00:00（而不是标准时间值）时显示标签，当数据跨越数天时，我只想在当地时间的日期更改时的午夜显示标签?

非常感谢您的帮助。我希望已经有一个 jsfiddle 示例或者我在寻找解决方案时遗漏的东西。

**[用我的解决方案更新]**

我最终通过指定要使用的 xAxis 类别和 tickPositions 解决了这个问题。这将正确绘制夏令时更改天数（包括图表的 xAxis 刻度线/网格线） 我有一个对象（在 C# 中定义并通过 json 传递回 javascript），如下所示：

```
public class DataTableList
{
    public int numDays = 0;
    public List<string> heading = null;
    public List<List<string>> table = null;
}; 
```

还有一个函数可以查看要绘制的天数，如果是一两天，只需绘制时间，否则绘制日期。还使用 xAxisCategories 告诉图表在哪里绘制刻度（即网格线）。

```
function RefreshChartData() {    
    if (_data == null)
        return;

    var datePos, timePos, load_fcstPos;

    //we will 'line up' chartTickPositions and xAxisCategories so there's a tick for each label
    var chartTickPositions = Array();   //values on the x axis to display labels (x axis just goes 0,1,2,3,...,n)
    var xAxisCategories = new Array();  //labels to display on the xAxis

    //find column positions for data we're interested in plotting
    for (var col = 0; col < _data.heading.length; col++)
    {
        if (_data.heading[col].toLowerCase() == 'date')
            datePos = col;
        if (_data.heading[col].toLowerCase() == 'time')
            timePos = col;
        if (_data.heading[col].toLowerCase() == 'load_fcst')
            load_fcstPos = col;
    }

    var seriesStr = [];  //y values to plot

    //iterate through table rows, extracting data to plot, sorting out chart tick labels, etc
    for (var row = 0; row < _data.table.length; row++) {
        //get number of days we're plotting
        var numDays = parseInt(_data.numDays);

        //extract values to plot from row
        var date = _data.table[row][datePos];
        var time = _data.table[row][timePos];
        var iTime = parseInt(time);
        var value = _data.table[row][load_fcstPos];

        //create xAxis Label
        switch (numDays) {
            case (1):
            case (2):
                if (iTime % 200 == 0) {
                    chartTickPositions.push(row);  //want to plot this label every two hours
                    xAxisCategories.push(time);
                }
                else
                    xAxisCategories.push('');
                break;
            case (3):
            case (4):
            case (5):
            case (6):
            case (7):
            default:
                //just return date
                if (iTime == 0) {
                    chartTickPositions.push(row);  //want to plot this label midnight every day
                    xAxisCategories.push(date);
                }
                else
                    xAxisCategories.push('');
        }

        //add value to series to plot
        seriesStr.push(parseInt(value, 10));
    }

    var chart = new Highcharts.Chart({   //buid up our chart javascript to be triggered on client browser

        chart: {
            renderTo: 'chartContainer',
            animation: false,
            zoomType: 'x'
        },

        //http://api.highcharts.com/highcharts#xAxis
        xAxis: {
            categories: xAxisCategories,
            tickPositions: chartTickPositions,
            gridLineWidth: '1',
            lineWidth: 1,
            labels: {
                rotation: -90,
                align: 'right'
                //},
                //formatter: function () {
                //    return chartFormatter(this.value);
                //}                
            }
        },

        //http://api.highcharts.com/highcharts#plotOptions.series
        series: [{
            data: seriesStr,
            draggableY: false,
            color: 'green'
        }]
    });
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T00:52:57.437

您没有指定是要在服务器上以本地时间显示图形，还是在客户端以本地时间显示图形。

从概念上讲，您要做的是以 UTC 时间存储数据，然后在服务器上应用本地时区偏移量，然后再将其传递给 Highcharts 或在客户端。

在客户端，你会使用类似的东西：

```
var myStartDateTimeInUTC = <assumed to be initialized in milliseconds>;
var d = new Date();
var timeZoneOffset = d.getTimezoneOffset() * 3600; 
```

getTimezoneOffset() 以分钟为单位返回偏移量，因此您需要乘以 3600 才能转换为毫秒。

```
series: [{
   data: [ your data here ],
   pointStart: myStartDateTimeInUTC - timeZoneOffset
}] 
```

你如何做这个服务器端取决于你使用什么技术，但原理是一样的。

这将始终生成连续图。

# java - GWT 中 ScrollPanel 内的 DockLayoutPanel

> ID：15058070
> 
> 赞同：3
> 
> 时间：2013-02-24T23:41:15.167
> 
> 标签：java, gwt, scroll, docklayoutpanel

我正在使用 GWT 2.4，但在为我的应用程序正常工作设置滚动条时遇到问题。当我尝试缩放页面时 - 现在整个页面都没有显示滚动条。

目前我的应用由 DockLayoutPanel 组成，显示方式如下：

```
private DockLayoutPanel appContainer = new DockLayoutPanel(Style.Unit.PX);
(...)
appContainer.addNorth(bannerSimplePanel, 104);
appContainer.addWest(menuSimplePanel, 200);
appContainer.add(new ScrollPanel(contentSimplePanel));

RootLayoutPanel.get().add(appContainer); 
```

我想为整个页面配置滚动条，而不仅仅是页面的“主要内容”（contentSimplePanel）。我试图在最后一步添加滚动条：

```
RootLayoutPanel.get().add(new ScrollBar(appContainer)); 
```

但它没有用。为整个 appContainer 添加 ScrollBar 后，我的页面上仅显示横幅，其余为黑色。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-25T09:09:49.267

```
Adding   DocklayoutPanel to a ScrollPanel won't work. The inner layout
panel's height and width will be zero. 
```

采用

```
dockLPanel.getWidgetContainerElement(flowPanel).getStyle().setOverflowY(Overflow.AUTO); 
```

看看这个

[https://groups.google.com/forum/?fromgroups=#!topic/google-web-toolkit/BnboxugPuJQ](https://groups.google.com/forum/?fromgroups=#!topic/google-web-toolkit/BnboxugPuJQ)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T04:49:19.870

我猜这是一个简单的修复。

```
ScrollPanel sp = new ScrollPanel();
sp.setSize( "100%", "100%" );

private DockLayoutPanel appContainer = new DockLayoutPanel( Style.Unit.PX );
appContainer.addNorth( bannerSimplePanel, 104 );
appContainer.addWest( menuSimplePanel, 200 );
appContainer.add( contentSimplePanel );

sp.add( appContainer );
RootLayoutPanel.get().add( sp ); 
```

# python - 如果字符串由十六进制字符组成，则返回布尔值

> ID：15058071
> 
> 赞同：1
> 
> 时间：2013-02-24T23:41:25.720
> 
> 标签：python, escaping, hex

我想知道字符串是否使用转义字符来表示十六进制字符。与以下风格相同的东西`string.isalnum()`：

```
"\x01".ishex() 
```

返回`True`

和

```
"^".ishex() 
```

返回`False`。

有这样的功能吗？

`True`如果没有，如果它只包含转义字符，是否有任何返回？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-24T23:59:42.303

`"\x01"`实际上不包含转义字符。它只是一个字符串，其中第一个字符是值为 1 的字节。这是因为——至少在 python 3 之前——python 使用字符串来表示字节数组。

在 REPL 中试试这个：

```
>>> "\x30" == "0"
True
>>> 
```

这是因为字符`0`被表示为一个值为 30 的字节。

现在，如果你*真的*想这样做。您可以使用特雷弗的 hack，或者您可以检查字符串是否有任何最终被表示为十六进制序列的不可打印字符。

```
import string

def is_hex(a):
    printable = set(string.printable) - set("\x0b\x0c")
    return any(c not in printable for c in a) 
```

用法：

```
>>> is_hex("\x01")
True
>>> is_hex("^")
False
>>> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-24T23:59:28.753

ASCII 将“[可打印字符](http://en.wikipedia.org/wiki/ASCII#ASCII_printable_characters)”定义为 0x20 到 0x7E 之间的字符，因此您只需检查字符的代码点即可。

```
def is_printable(c):
  return ord(c) >= 0x20 and ord(c) <= 0x7E 
```

您还可以通过一种 hack 来检查表示的长度：

```
def is_hex(s):
  return len(repr(s)) > len(s) + 2

>>> is_hex("\x01")
True
>>> is_hex("^")
False 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-25T00:04:16.753

没有自动执行此操作的功能。十六进制编码（在任何语言中）是“编码”，使用一组有限的 ASCII 代码集字符来表示不同范围内的一些其他字符。十六进制可以用几种方式表示为字符串（“OA”可以解释为十六进制或基于十六进制数值的某种转义格式）。是的，可以根据其中一些标准形式编写函数，但它不会 100% 可靠，因为它可以返回的最好结果是所述字符串（实际上只是一个字符数组）绝对不是或“可能是” '十六进制。

# java - 将数据从活动传递到片段时应用程序崩溃

> ID：15058072
> 
> 赞同：1
> 
> 时间：2013-02-24T23:41:48.583
> 
> 标签：java, android, android-fragments

我正在尝试通过活动从fragmentA 传递一些数据以在fragmentB 中启动操作。它应该工作的方式是，用户按下一个项目ia listview（listFragment），项目数据被发送到另一个片段（它是可见的并且已经运行）以使用来自fragmentA的数据开始一个新的事件/动作。

片段A：

```
@Override
public void onListItemClick(ListView listView, View view, int position,
        long longId) {
    super.onListItemClick(listView, view, position, longId);

    String trackId = SD_PATH + songs.get(position);
    mCallbacks.onTrackSelected(trackId); 
```

通过活动：

```
@Override
public void onTrackSelected(String trackId) {

            // This starts onTrackSelected() method in fragmentB
    topBarFragment topBarFragment = (topBarFragment)getSupportFragmentManager().findFragmentById(R.id.topBar_fragment);
    topBarFragment.onTrackSelected();

    Bundle bundle = new Bundle();
    bundle.putString("trackId", trackId);
      //set Fragmentclass Arguments
    topBarFragment fragObject = new topBarFragment();
    fragObject.setArguments(bundle);

} 
```

在 fragmentB 中检索数据（这是崩溃的地方）：

```
public void onTrackSelected() {

    // crashes on this line
    String trackId = getArguments().getString("trackId");
    Toast.makeText(getActivity().getApplicationContext(), trackId,Toast.LENGTH_SHORT).show();

} 
```

我已经检查过了，数据从`fragmentA`to传递得很好`activity`，但是在尝试接收它时它崩溃了`fragmentB`。

该怎么办？

（fragmentB 的父活动与 fragmentA 的不一样。这可能与它有关吗？）

日志猫：

```
02-24 23:28:47.757: E/AndroidRuntime(14047): FATAL EXCEPTION: main
02-24 23:28:47.757: E/AndroidRuntime(14047): java.lang.NullPointerException
02-24 23:28:47.757: E/AndroidRuntime(14047):    at com.harteg.fragmentstest.topBarFragment.onTrackSelected(topBarFragment.java:47)
02-24 23:28:47.757: E/AndroidRuntime(14047):    at com.harteg.fragmentstest.ItemListActivity.onTrackSelected(ItemListActivity.java:83)
02-24 23:28:47.757: E/AndroidRuntime(14047):    at com.harteg.fragmentstest.TracksFragment.onListItemClick(TracksFragment.java:136)
02-24 23:28:47.757: E/AndroidRuntime(14047):    at android.support.v4.app.ListFragment$2.onItemClick(ListFragment.java:58)
02-24 23:28:47.757: E/AndroidRuntime(14047):    at android.widget.AdapterView.performItemClick(AdapterView.java:298)
02-24 23:28:47.757: E/AndroidRuntime(14047):    at android.widget.AbsListView.performItemClick(AbsListView.java:1100)
02-24 23:28:47.757: E/AndroidRuntime(14047):    at android.widget.AbsListView$PerformClick.run(AbsListView.java:2749)
02-24 23:28:47.757: E/AndroidRuntime(14047):    at android.widget.AbsListView$1.run(AbsListView.java:3423)
02-24 23:28:47.757: E/AndroidRuntime(14047):    at android.os.Handler.handleCallback(Handler.java:725)
02-24 23:28:47.757: E/AndroidRuntime(14047):    at android.os.Handler.dispatchMessage(Handler.java:92)
02-24 23:28:47.757: E/AndroidRuntime(14047):    at android.os.Looper.loop(Looper.java:137)
02-24 23:28:47.757: E/AndroidRuntime(14047):    at android.app.ActivityThread.main(ActivityThread.java:5039)
02-24 23:28:47.757: E/AndroidRuntime(14047):    at java.lang.reflect.Method.invokeNative(Native Method)
02-24 23:28:47.757: E/AndroidRuntime(14047):    at java.lang.reflect.Method.invoke(Method.java:511)
02-24 23:28:47.757: E/AndroidRuntime(14047):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
02-24 23:28:47.757: E/AndroidRuntime(14047):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
02-24 23:28:47.757: E/AndroidRuntime(14047):    at dalvik.system.NativeStart.main(Native Method) 
```

**更新：**

我像这样更新了我的代码，发现 getArguments() 返回 null .. 为什么会这样？

```
 Bundle arguments = getArguments();
    if (arguments != null)
    {
        String trackId = getArguments().getString("trackId");
        Toast.makeText(getActivity().getApplicationContext(), trackId,Toast.LENGTH_SHORT).show();

    } else {
        Toast.makeText(getActivity().getApplicationContext(), "arguments returns null", Toast.LENGTH_SHORT).show();
    } 
```

**更新**

我像这样更新了活动中的 onTrackSelected() ，但现在它崩溃并说片段已经处于活动状态。你如何解决这个问题？

```
@Override
public void onTrackSelected(String trackId) {
    // TODO Auto-generated method stub

        topBarFragment topBarFragment = (topBarFragment)getSupportFragmentManager().findFragmentById(R.id.topBar_fragment);

        Bundle bundle = new Bundle();
        bundle.putString("trackId", trackId);
          //set Fragmentclass Arguments
//      topBarFragment fragObject = new topBarFragment();
        topBarFragment.setArguments(bundle);

        topBarFragment.onTrackSelected();

    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T11:46:06.753

在您的活动`onTrackSelected()`方法中，您使用`topBarFragment`了两次。第一个可能来自您的布局文件（或来自以前的事务）。无论如何，这个第一个片段还没有参数，但你还是调用`onTrackSelected()`了。你应该把电话放在最后。

并检查为什么在方法结束时重新创建它（与此问题无关，但可能没有必要）。

# jquery - jquery 不知道选择了什么选项

> ID：15058074
> 
> 赞同：1
> 
> 时间：2013-02-24T23:42:02.067
> 
> 标签：jquery, html

HTML：

```
<p>
    <label for="rolle">Rolle:</label> 
    <select id="rolle" style="float:right;width:154px;" name="rolle">
        <option value="1">Administrator</option>
        <option value="2">Autor</option>
    </select> 
</p> 
```

jQuery：

```
$(document).ready(function()
{
    $('#rolle').change(function()
    {
        if($('#rolle option[value="1"]:selected')) 
        {
            alert("YES");
        }
    });
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-24T23:44:48.750

`jQuery`函数返回`jQuery`对象。如果您想知道是否有任何元素与查询匹配，则必须检查`length`属性。

将 JavaScript 更改为：

```
$(document).ready(function(){
    $('#rolle').change(function(){
        if($('#rolle option[value="1"]:selected').length > 0) {
            alert("YES");
        }
    });
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-24T23:45:20.303

为什么不简单地把你的条件检查稍微转一下来阅读这个：

```
$(document).ready(function(){
    $('#rolle').change(function(){
        if($('#rolle option:selected').val() == "1") {
            alert("YES");
        }
    });
}); 
```

# java - Java中正确的继承架构

> ID：15058079
> 
> 赞同：2
> 
> 时间：2013-02-24T23:42:48.577
> 
> 标签：java, inheritance, design-principles

我有点进退两难。我有 class `animal`，假设它存储基本的东西，如位置等。所以我有一个`smartAnimal`扩展的类`animal`。假设`smartAnimal`添加了一些无需用户输入即可做出决策的功能。

现在，我有一个`dog`扩展类`animal`。它不会扩展`smartAnimal`，因为它不需要该功能。到目前为止我很好： a`dog`是一个`animal`并且 a`smartAnimal`是一个`animal`。但现在我希望`smartDog`它*会*扩展`smartAnimal`但`smartDog`也应该是一个`dog`. 例如，常规中的很多功能，`dog`比如说`.sniff()`, `.poop()`，并且`.bark()`也应该在我的`smartDog`，但除非我从字面上复制+粘贴代码，否则它不会是，因为 Java 不允许多重继承。

组合似乎不优雅，因为如果我有：

`class smartDog{ smartAnimal thisSmartAnimal; dog thisDog; }`

...我会在 中复制“东西” `animal`，例如，位置。我将不得不处理两组位置变量！以及 中的任何属性的副本`animal`。

继承多个接口听起来也不是正确的解决方案，因为假设`dog`是一个接口，`.sniff()`,`.poop()`和`.bark()`的实现*不应该改变和重新实现`smartDog`以及任何其他类*。

这里的最佳做法是什么？也就是说，有两个类`dog`和`smartDog`？

编辑：

从一些评论/答案中，让我澄清一下。在我的具体项目中，a`smartAnimal`实际上有一个完整的神经网络来控制它。这是很多代码，将其抽象为接口是没有意义的。不管是什么动物，神经网络功能的核心都是一样的，但每个`smartAnimal`子类都会以不同的方式实现人工智能“大脑”的输出。相反，每只动物都有自己的功能，无论是人类控制它还是它自己的人工智能代理控制它，它们的功能都是一样的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-24T23:53:15.393

答案是这不是一个现实的继承层次结构，你可以从你使用“添加一些功能”这个词来描述在子类中添加方法的事实中看出这一点。这不是正确的继承。在适当的继承中（至少在 Java 中），每个方法都应该存在于继承层次结构的顶层。继承是为了代码重用，而不是在你深入树时添加功能。因此，给定的问题并没有真正的答案。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-24T23:49:23.343

我认为您可能正在寻找的是名为“默认实现”的新 JDK 8 功能

我认为没有这个的明智解决方案是让狗继承 smartAnimal。因此：smartDog 是一只狗，它是一种 smartAnimal，它是一种动物。

很难获得更精确的建议，因为它实际上取决于您的对象正在实现什么。（例如，它们是否都有内部状态？或者它们只是定义新行为？）

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-24T23:54:42.697

由于我们在这里讨论的是Java，因此模型是具有多个接口的单继承。

话虽如此，鉴于这些示例，正确的抽象级别是合适的。也就是说，答案在于以下组合：

1.  正确的继承（参见 GOF 书籍中关于“is a”、“has a”和行为）。如果你发现自己说“狗很聪明”——那可能是狗的行为与“狗是哺乳动物”的对比（注意名词与形容词）。“聪明”的狗表现出与哑巴不同的某些行为，但从数据建模的角度来看，两者都是“狗”。
2.  适当的聚合。很多时候，我发现将复杂的“事物”分解成它们的组成部分很有用。因此，“汽车”由发动机、变速箱、底盘等组成。狗有毛皮（有颜色、质地等）、腿、头、身体形状等，当区分狗是什么和它的行为方式（智能 = 界面）。
3.  抽象接口。在此示例中可能具有挑战性的是，“智能”可能在不同类型的对象/名词之间有所不同。“智能”狗可能能够理解命令，而“智能”手机具有某些功能，例如电子邮件。因此，“智能”可能不是最高级别的适当接口，但可能与“哺乳动物”相关联->“狗”是哺乳动物可能实现 Mammal.Smart 接口（特定于哺乳动物）。

这确实是信息建模和整个计算机科学中比较困难和重要的方面之一。整组书籍和研究都致力于这一主题，因此可能不适合作为 Stack Overflow 问题，旨在为直截了当的简洁问题提供直截了当、简单的答案。

# jquery - 为什么我的列过滤器没有过滤？

> ID：15058081
> 
> 赞同：0
> 
> 时间：2013-02-24T23:42:55.460
> 
> 标签：jquery, jquery-plugins, datatables

我正在尝试在页面上使用 columnfilter。在一个页面上，此过滤效果很好，但在此页面上却没有。我尝试从有效的页面复制相同的脚本 url，我尝试从脚本列表拖动到页面但仍然没有。

注意：该页面具有搜索页眉和页脚字段，当我将搜索文本放入时它会做出响应，但它什么也不返回。我得到：“显示 0 到 0 的 0 个条目（从 10 个总条目中过滤）”……每次。

我可能做错了什么或错过了什么？感谢您对此的任何帮助>

```
 <link href="../../Content/dataTable/the_table.css" rel="Stylesheet" type="text/css" />
    <script src="../../Scripts/DataTables-1.9.1/media/js/jquery.dataTables.js" type ="text/javascript"></script>
    <script src="../../Scripts/jquery.dataTables.columnFilter.js" type  ="text/javascript"></script>
    <script src="../../Scripts/jquery.ui.datepicker.js" type="text/javascript"></script>

    <script type="text/javascript">
    $(document).ready(function () {
       $(".datefield").datepicker();
       $("#history").dataTable().focus().columnFilter({
          aoColumns: [null, { type: "text" },null , null, null, null]
       });
    });
    </script>

    <br /><br />

    @Html.ActionLink("Select", "ClassAttendance", "Attendance", new { rows = Model.Enrollments.Count(),  id = @ViewBag.ID, teacher = HttpContext.Current.Session["sTeacher"], courseID = HttpContext.Current.Session["sCourseID"] }, null)

    <p></p>

    @using (Html.BeginForm("ClassAttendance", "Attendance", new { rows = Model.Enrollments.Count(),  id = @ViewBag.ID, sTeacher = @ViewBag.teacherName, courseID = HttpContext.Current.Session["sCourseID"] }, FormMethod.Post))

    {

    var attend = new Enrollment();
    @Html.ValidationSummary(true)

    <p></p>

    <h3>Students Enrolled in @ViewBag.teacherName's @ViewBag.courseTitle class</h3>  
    <div>
       <table id=history>  
          <thead>
             <tr>  
                <th>Reports</th> 
                <th>First Name</th>  
                <th>Last Name</th> 
                <th>Grade</th>  
                <th>Attendance Code</th>  
                <th>Class Day</th> 
             </tr>  
          </thead>
          <tfoot>
             <tr>  
                <td>Reports</td> 
                <td>First Name</td>  
                <td>Last Name</td> 
                <td>Grade</td>  
                <td>Attendance Code</td>  
                 <td>Class Day</td> 
             </tr>  
          </tfoot>
          <tbody>
             @foreach (var item in Model.Enrollments)
             {    
                @Html.HiddenFor(modelItem => item.EnrID)    
                @Html.HiddenFor(modelItem => item.Asgnt)<!--navigational--> 
                @Html.HiddenFor(modelItem => item. Title)
                @Html.HiddenFor(modelItem => item.CouID)
                @Html.HiddenFor(modelItem => item.Date)
                @Html.HiddenFor(modelItem => item.dayOfWeek)
                @Html.HiddenFor(modelItem => item.Actor)
                @Html.HiddenFor(modelItem => item.SudIDD)
                @Html.HiddenFor(modelItem => item. Address)                               
               <tr>  
                  <td>  
                  @Html.ActionLink("Report", "PrintCustomers", "PdfRender", new { sName = item.Student.FirstMidName, courseTitle = item.Course.Title, sNumber = item.Student.StudentNum, instructorName = HttpContext.Current.Session["teacherName"] }, null)   
                  </td> 
                  <td>  
                     @Html.EditorFor(modelItem => item.Student.FirstMidName)   
                  </td>  
                  <td>  
                     @Html.EditorFor(modelItem => item.Student.LastName)
                  </td> 
                  <td>
                     @Html.TextBoxFor(modelItem => item.HomeworkGrade) 
                     @Html.ValidationMessageFor(model => model.Enrollments.FirstOrDefault().HomeworkGrade)
                  </td>
                  <td>
                     @Html.TextBoxFor(modelItem => item.attendanceCode)
                     @Html.ValidationMessageFor(model => model.Enrollments.FirstOrDefault().attendanceCode)
                  </td>  
                  <td>  
                     @Html.EditorFor(modelItem => item.classDays)  
                  </td>    
              </tr>    
           }  
        </tbody> 
     </table> 
  </div>
  <br />
  <Input Type ="submit" Value="Submit Attendance"/>
  } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T00:32:48.583

我不确定这是否会导致您描述的问题，但您的表 ID 没有被引用。

`<table id=history>`

应该`<table id="history">`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T07:13:49.263

I finally recreated the view by having it scaffolded rather than copying the functionality of one view, pasting into another and tweaking. I suspect it may have had something to do with navigational properties not having values or simply having navigational properties in the view. Please let me know what you think. Thanks.

# java - 客户端-服务器应用程序 - 如何向数据库发送查询并接收结果？

> ID：15058083
> 
> 赞同：0
> 
> 时间：2013-02-24T23:43:23.450
> 
> 标签：java, android, database, client-server

我正在编写客户端-服务器应用程序，其中客户端是一个 android v2.1 应用程序，服务器是用 Java 编写的，并且连接到 MySQL 数据库。客户端和服务器之间的连接使用 SSL 进行 TCP 加密。目前，我想知道如何将查询从客户端发送到数据库并将结果接收回客户端。我希望能够进行更复杂的查询，例如从多个表中检索数据。我会选择效率和简单性的最佳解决方案，所以请证明你的答案并给我一个解决这个问题的最佳方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T00:09:34.927

您的客户端应该不知道服务器的内部工作原理，（您的客户端不应该关心服务器是用 Java、php 还是 rails 编写的，以及表的结构）。我将首先定义您对客户端服务的要求，然后让您的服务器为客户端的要求提供 REST 接口。

从那里客户端将只通过 HTTPRequests 进行通信，JSON 将是最简单的帖子格式，imo。然后，您的服务器将处理数据如何在各个表之间排列的复杂性，以及如何查询表以提供先前定义的接口的实现。

# c++ - 可以 C++ std::numeric_limits ::max() 被准确地存储在一个浮点数中，然后进行比较？

> ID：15058086
> 
> 赞同：4
> 
> 时间：2013-02-24T23:43:35.980
> 
> 标签：c++, floating-accuracy

我知道有些值无法在浮点数中轻松定义，并且只是“近似值”，因此直接“等于”比较经常不起作用。

std::numeric_limits::max 可以准确地存储在浮点数中，并且此代码会按预期运行吗？

```
float myFloat = std::numeric_limits<float>::max();

//...later...
if(myFloat == std::numeric_limits<float>::max())
{
    //...myFloat hasn't changed...
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-25T01:01:49.040

对于给定的（非 NaN）`float`变量，`f`保证`f == f`始终为真。由于`myFloat`设置为某个`float`值，因此它当然会比较等于相同的值。

您显然正在考虑以下情况：

```
float f1 = 0.1;
float f2 = 1.0/10;
assert( f1 == f2 ); 
```

这可能会失败，但这不会失败：

```
float f1 = 0.1;
float f2 = 0.1;
assert( f1 == f2 ); 
```

尽管存储在变量中的值可能不完全相等，`0.1`但可能具有不同的值，但您将获得两个变量的*相同*值，因此它们将比较相等。

无论`numeric_limits<float>::max()`返回什么值，它都是一个固定值，与自身比较相等。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-25T00:21:51.553

是的。

[numeric limits](http://www.cplusplus.com/reference/limits/numeric_limits/)是一个类模板，max 是一个静态方法：

```
 template <class T> class numeric_limits {
  public:
  ...
  static T max() throw(); //constexpr if using C++11
  ...
  }; 
```

因此，对于 float 类型，您实际上将使用`std::numeric_limits<float>::max()`并简单地比较两个相等值的浮点数（只要您在比较之前没有对 myFloat 进行操作）。max() 的值对于您的平台将是一个一致的浮点数，并且将具有与其自身等效的二进制表示。

您将遇到的主要麻烦是尝试使用不同的浮点二进制表示跨平台进行序列化和反序列化。因此，如果您尝试序列化 myFloat 变量并在其他机器上尝试将反序列化值的结果直接与 numeric_limits::max() 进行比较：

```
if( myFloat == std::numeric_limits<float>::max() ) 
```

结果可能不再成立。然后，您需要在二进制表示中对“MAX”的概念进行编码，并以您想要的方式明确解释它。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-24T23:46:54.100

对，但是

```
myFloat += someSmallFloat; 
```

可能不会改变 的值`myFloat`。

如果您想了解更多，有一个关于浮点表示的精彩教程，名为[What Every Computer Scientist Should Know About Floating-Point Arithmetic](http://docs.oracle.com/cd/E19957-01/806-3568/ncg_goldberg.html)。

# mysql - 使用表中已有数据编辑 MySQL 表的脚本？

> ID：15058088
> 
> 赞同：0
> 
> 时间：2013-02-24T23:44:14.533
> 
> 标签：mysql

我在 MySQL 中创建了一个包含用户详细信息的表。此数据库中的 2 个字段是名字和姓氏。我该如何实现一个脚本，该脚本在此表中的每一行中都使用“firstname.lastname”格式填充“login”列？这是一个小/简单的数据集，所以我们可以假设没有重复的名称。谢谢你的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T23:48:20.123

```
UPDATE `USERS` SET `login`= CONCAT(`firstname`, '.', `lastname`); 
```

# list - Scala 将元素附加到索引序列

> ID：15058092
> 
> 赞同：0
> 
> 时间：2013-02-24T23:44:32.050
> 
> 标签：list, scala, sequence, immutability

我有一个包含 10 个双精度数的索引序列，我想在原始索引序列上再附加几个双精度数。我尝试使用 :: 和 ++ 但它不起作用。我只能使用 val。

```
val features = functionCount.map(_.toDouble).toIndexedSeq //original indexed sequence
features +=  avgLength //tried :: also 
```

如何在这个序列中附加更多的双精度，最后我需要一个 IndexedSeq。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-25T00:01:30.147

你*不能*改变`features`，除非它是可变的。鉴于“您只能使用 val”的评论，这听起来像是作业，如果是，我怀疑您也可以使用可变序列。在这种情况下，您必须放弃这种方法并在更高级别上解决问题，使用递归或折叠。

# php - 直接访问 index.php?*=* 时 .htaccess 或 php 重定向到友好的 url

> ID：15058096
> 
> 赞同：0
> 
> 时间：2013-02-24T23:45:15.963
> 
> 标签：php, facebook, redirect

我正在为我的游戏网站进行新设计，我所做的是制定了重写规则：

```
RewriteRule ^play/([^/\.]+)/?$ index.php?play=$1 [L] 
```

这非常有效，当用户打开位于地址栏（规范 url）中的 /play/gamename 并使用我的 index.php 加载游戏页面时。

但是，我现在想做的是，当用户访问旧 url ( `index.php?play=gamename`) 时，他们应该被重定向到新的规范 url ( `/play/gamename`)。

有人可以为我输入代码吗？我愿意使用 .htaccess 文件或 index.php 文件执行此操作，以最有效的方式执行此操作。

另一个问题是我已经有很多 facebook 评论和喜欢，它们指的是`index.php?play=gamename`页面，是否也可以以某种方式将这些喜欢和评论移动到新的更漂亮的 url 上？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-26T15:11:31.320

在 php 中执行此操作的方法如下：

该函数检查页面是否被直接查看。

```
function directviewcheck(){
    $requestingurl = $_SERVER['REQUEST_URI'];
    $phpself = $_SERVER['PHP_SELF'];
    $phpselflength = strlen($phpself);
    $resulturlcrop = mb_substr($requestingurl, 0, $phpselflength);

    if( $resulturlcrop == $phpself ){
        return true;
    }else{
        return false;
    }
} 
```

这将告诉您浏览器中的 url 是否与文件名匹配。如果确实如此，它将返回 true。

接下来在 index.php 中调用它：

```
if( directviewcheck() == true ){
    // your redirect code
    // Something like this should work

    $gamename = $_GET['play'];
    header("HTTP/1.1 301 Moved Permanently")
    header("Location: http://www.yoursite.com/play/" . $gamename );
    exit;  // make sure you use exit or its alias die to prevent the page from showing.

} 
```

旧链接将转到新页面，并且仍然通过旧链接访问您的内容的搜索引擎会知道删除它们并索引新链接。

如果您需要它更加动态，您可以创建一个位置变量，然后根据使用情况将其放入 header() 中。

无论如何，您的问题已经过时，但可能对您或其他人仍然有用。

====

在 .htaccess 中，sjdaws 看起来可以工作。

====

就您的 Facebook 而言，我看到了这些： [Facebook 喜欢计数在 301 重定向后重置](https://stackoverflow.com/questions/7691311/facebook-like-count-resets-after-a-301-redirection) 或 [如何管理可能略有变化的 URL 的“喜欢”按钮？](https://stackoverflow.com/questions/7425192/how-to-manage-like-button-for-urls-that-can-change-slightly)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T02:04:14.720

我认为您会寻找这样的东西来从旧 URL 重定向到新 URL，同时将该 URL 保持为提供脚本的实际位置。

```
Options +FollowSymlinks
RewriteEngine On

RewriteBase /

# Stop rewrite from doing an infinite loop by rejecting redirects
RewriteCond %{ENV:REDIRECT_STATUS} !=200
RewriteCond %{REQUEST_URI}  ^/index\.php$
RewriteCond %{QUERY_STRING} ^play=(.*)$
RewriteRule .* /play/%1? [NC,R=301,L]

# Rewrite all requests from /play/ to index.php
RewriteRule ^play/(.*)$ /index.php?play=$1 [NC,L] 
```

至于 facebook，您对旧评论无能为力，但您的重写会为您网站的任何未来点击处理。

# ios - iOS：多行 uilabel 仅显示带有自动布局的一行

> ID：15058108
> 
> 赞同：17
> 
> 时间：2013-02-24T23:46:16.650
> 
> 标签：ios, autolayout

下面的代码，我认为应该产生一个多行标签，然后是一个按钮，但是，在布局之后，只有一行标签出现。虽然我可以在垂直布局中放置一个明确的高度，但这会破坏目的。关于我应该应用哪些其他限制的任何想法？

```
UILabel *lbExplain = [[UILabel alloc] init];
lbExplain.text = @"The Sync process allows you to synchronize your library between different devices. By clicking on the button below you can find other devices to sync with. The other device also has to be running this applicaton.";
lbExplain.lineBreakMode = NSLineBreakByWordWrapping;
lbExplain.numberOfLines = 0;
lbExplain.translatesAutoresizingMaskIntoConstraints = NO;

UIButton *btnPartner = [UIButton buttonWithType:UIButtonTypeRoundedRect];
[btnPartner setTitle:@"Look for Partners" forState:UIControlStateNormal];
[btnPartner addTarget:self action:@selector(findPartners:) forControlEvents:UIControlEventTouchUpInside];
btnPartner.translatesAutoresizingMaskIntoConstraints = NO;

[self.view addSubview:lbExplain];
[self.view addSubview:btnPartner];

[self.view addConstraints:[NSLayoutConstraint constraintsWithVisualFormat:@"H:|-[lbExplain]-|" options:0 metrics:nil views:NSDictionaryOfVariableBindings(lbExplain)]];
[self.view addConstraints:[NSLayoutConstraint constraintsWithVisualFormat:@"V:|-[lbExplain]-[btnPartner]" options:NSLayoutFormatAlignAllLeft metrics:nil views:NSDictionaryOfVariableBindings(lbExplain, btnPartner)]]; 
```

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2013-02-25T01:00:03.850

添加行：

```
lbExplain.preferredMaxLayoutWidth = 280; 
```

这必须是在 IB 中自动完成的事情，因为如果您在那里设置标签会正确扩展。您传递给它的数字似乎对它如何垂直扩展很重要，但它不会覆盖您为宽度设置的约束。

**编辑后：**

如果我在 updateViewConstraints 中添加该行，并将数字与视图的边界相关联，效果会更好。这样它可以在旋转时正确调整。

```
-(void)updateViewConstraints {
    [super updateViewConstraints];
    lbExplain.preferredMaxLayoutWidth = self.view.bounds.size.width - 40;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-28T01:25:37.653

这里的问题`preferredMaxLayoutWidth`是没有设置。因此，文本不受任何宽度的限制，因此，它不会换行到下一行。

我发现在`UILabel`Autolayout 中使用多行的最简单方法是创建一个子类：

```
@interface MyMultilineLabel : UILabel

@end

@implementation MyMultilineLabel

- (void)setBounds:(CGRect)bounds {
    [super setBounds:bounds];
    CGFloat width = CGRectGetWidth(bounds);
    if (self.preferredMaxLayoutWidth != width) {
        self.preferredMaxLayoutWidth = width;
    }
}

- (id)initWithFrame:(CGRect)frame {
    self = [super initWithFrame:frame];
    if (self) {
        self.lineBreakMode = NSLineBreakByWordWrapping;
        self.numberOfLines = 0;
    }
    return self;
}

@end 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-25T00:34:04.970

你确定你没有模棱两可的布局吗？

你可以在你的代码中做一个测试，比如

```
if ([self.view hasAmbiguousLayout]) {
    NSLog(@"ambiguous");
} 
```

或在模拟器或测试设备上暂停并输入控制台：

```
po [[UIWindow keyWindow] _autolayoutTrace] 
```

如果是这样，你可能想尝试让你的约束更明确一点（乍一看，高度是模棱两可的）：

```
@"V:|-[lbExplain]-[btnPartner]-|" 
```

或者

```
@"V:|-[lbExplain(==300)]-[btnPartner(==200)]" 
```

这是视觉格式语言的文档：

[http://developer.apple.com/library/mac/#documentation/UserExperience/Conceptual/AutolayoutPG/Articles/formatLanguage.html](http://developer.apple.com/library/mac/#documentation/UserExperience/Conceptual/AutolayoutPG/Articles/formatLanguage.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-12-28T16:01:58.803

我有一个类似的问题，UITableViewCell 中的多行标签，使用 AutoLayout 定位，不会自行扩展。

*它在 UITableView 内部，使用UITableViewAutomaticDimension*和*estimatedHeightForRowAtIndexPath*方法“自动”处理大小。（我认为这可能是问题的根源）

我通过调用解决了这个问题：

```
[cell layoutIfNeeded] 
```

在*cellForRowAtIndexPath*方法中，就在返回单元格之前。

它就像一个魅力！

# php - 发送图片 > 但不上传图片

> ID：15058111
> 
> 赞同：0
> 
> 时间：2013-02-24T23:46:49.613
> 
> 标签：php, facebook, attachment

我正在使用 facebook sdk，并希望我们的用户能够将图像发布到他们的相册，但不能上传图像。

本质上，我们为登录用户提供了一个动态页面，可以动态创建动态图像。

检查 facebook SDK ，如果我允许用​​户“上传”图像，我可以让一切正常工作，但我无法弄清楚如何附加网页上已经存在的图像..

例如。假设页面上的图像是[https://stackoverflow.com/images/my_image.jpg](https://stackoverflow.com/images/my_image.jpg)

在 facebook SDK 中：（截断代码） - 用于**上传**图片

```
if(empty($code)){ 
      $dialog_url= "http://www.facebook.com/dialog/oauth?"
       . "client_id=" .  $app_id 
       . "&redirect_uri=" . urlencode( $post_login_url)
       .  "&scope=publish_stream";
      echo("<script>top.location.href='" . $dialog_url 
      . "'</script>");
     }
    else {
      $token_url="https://graph.facebook.com/oauth/access_token?"
       . "client_id=" . $app_id 
       . "&redirect_uri=" . urlencode( $post_login_url)
       . "&client_secret=" . $app_secret
       . "&code=" . $code;
      $response = file_get_contents($token_url);
      $params = null;
      parse_str($response, $params);
      $access_token = $params['access_token'];

     // Show photo upload form to user and post to the Graph URL
     $graph_url= "https://graph.facebook.com/me/photos?"
     . "access_token=" .$access_token;

     echo '<html><body>';
     echo '<form enctype="multipart/form-data" action="'
     .$graph_url .' "method="POST">';
     echo 'Please choose a photo: ';
     echo '<input name="source" type="file"><br/><br/>';
     echo 'Say something about this photo: ';
     echo '<input name="message" 
         type="text" value=""><br/><br/>';
     echo '<input type="submit" value="Upload"/><br/>';
     echo '</form>';
     echo '</body></html>'; 
```

所以我的问题是，有没有办法我们可以发送特定图像，而不是在上述表格中上传图像？

这可能是人类已知的最明显的问题，我只是用谷歌的眼光试图弄清楚。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T23:49:33.310

您只能以这种方式发布指向图像的链接。如果您想将实际图像发布到 Facebook，您必须先将图像下载到您的服务器。

像这样简单的东西`file_get_contents(PATH_TO_IMAGE)`就可以了。将文件发布到 Facebook 后，您始终可以从服务器中删除该文件。

[这里](http://facebook.stackoverflow.com/questions/2718610/upload-photo-to-album-with-facebooks-graph-api)有一些方法详细介绍了如何在没有文档中提供的上传表格的情况下上传照片。

# java - 重复组 QuickFix 的 NumInGroup 计数不正确

> ID：15058116
> 
> 赞同：2
> 
> 时间：2013-02-24T23:48:02.797
> 
> 标签：java, quickfix, fix-protocol

我无法解析此市场数据增量刷新消息（修复 4.3）：

```
8=FIX.4.3|9=187|35=X|34=4|49=XDEMO|52=20130224-22:31:05.283|56=demo310262=A|268=2|279=2|269=0|278=0014vd32|55=EUR/USD|290=1|64=20130227|279=0|269=0|278=0014vdb2|270=1.31934|271=1000000|290=1|546=3|10=124 
```

Quickfix/j 给了我以下信息：

> quickfix.FieldException：重复组的 NumInGroup 计数不正确，字段 = 268

我知道这是一个重复的组问题，但我不太确定如何更改我的规范以解析此消息。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-25T04:47:34.950

```
Group: 268=2|
  Item 1: 279=2|269=0|278=0014vd32|55=EUR/USD|290=1|64=20130227|
  Item 2: 279=0|269=0|278=0014vdb2|270=1.31934|271=1000000|290=1|546=3| 
```

默认情况下，字段 64 不是 NoMDEntries (268) 重复组的一部分。当解析器达到 64 时，它认为它已经超过了重复组的末尾，并且组的第一个也是唯一的项目在第一个 290 处结束。

看了几分钟后，DataDictionary xml 文件很容易理解。假设您的发件人有意将 64 放在该组中，您只需找到消息 X (MarketDataIncrementalRefresh) 的定义并将字段 64 (FutSettDate) 添加到该组中的适当位置。（这个组或其中的一部分可能在一个组件中定义，但我想你会弄明白的。）

**注意：**字段的顺序很重要。确保将其添加到 290 (MDEntryPositionNo) 之后的一行以及可能出现在组项目中的任何其他可选字段之前或之后。

我猜 64 不是您的交易对手所做的唯一 DD 修改。您需要与您的交易对手核实，以便您可以进行所有必要的 DD 更改。

# jquery - 使用 jQuery 的字体大小在 iPhone 上不起作用

> ID：15058120
> 
> 赞同：2
> 
> 时间：2013-02-24T23:48:30.177
> 
> 标签：jquery, iphone, font-size

简而言之，我想做的是编写一些 jQuery 来`font-size`根据屏幕宽度设置三个 div 中的哪一个。

我已经在桌面上的 Chrome、Safari 和 Firefox 上测试了代码，一切正常，可以很好地放大和缩小。在 iPad 上测试时运行正常 - Chrome 和 Safari。但是当我在 iPhone 上测试它时，一切都崩溃了。

当页面在 Safari 上加载时，js 似乎没有做任何事情，并且字体大小没有改变。但奇怪的是，当您旋转 iphone 时，字体确实会更改为页面第一次加载时应有的正确大小，即使我还没有编写`.trigger`函数。

更让我不解的是，在 iPhone 上使用 Chrome 浏览网页时，它似乎可以正常工作。

我不明白为什么我的代码不想专门在 iPhone 上工作！

这是我的 jQuery

```
//Gather the screen width and height
var screenwidth = $(window).width();
var screenheight = $(window).height();

// set the width and height of the box based on the screen width and height
var boxwidth = screenwidth - 80;
var boxheight = screenheight - 200;

$("#box").width(boxwidth);
$("#box").height(boxheight);

//center the box along the X and Y axis
var boxX = (screenwidth / 2) - (boxwidth / 2);
var boxY = (screenheight / 2) - (boxheight / 2);

$("#box").css({"margin-top" : boxY});
$("#box").css({"margin-left" : boxX});

//set the font size of each div based on the screen width
var box1font = Math.floor( (screenwidth / 100) * 8.8 );
var box2font = Math.floor( (screenwidth / 100) * 6 );
var box3font = Math.floor( (screenwidth / 100) * 1.6 );

$("#box1").css("font-size" , box1font);
$("#box2").css("font-size" , box2font);
$("#box3").css("font-size" , box3font);

//center the divs within the parent element
var inner = $("#wrapper").height();

var innerX = (boxheight / 2) - (inner / 2);

$("#wrapper").css({"padding-top" : innerX}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-24T23:51:18.537

尝试将 CSS 属性添加`-webkit-text-size-adjust: none`到您的页面。

# sql - 使用 this.TableManager.UpdateAll 更新数据库，但出现重复键错误

> ID：15058121
> 
> 赞同：0
> 
> 时间：2013-02-24T23:48:32.013
> 
> 标签：sql, sql-server, database, data-binding, visual-studio-2012

我尝试使用 this.TableManager.UpdateAll 更新数据库。添加的第一个客户端很好，但是当我想添加一个新客户端时，我得到了重复键错误。这是代码：

```
 //using a try command so if there is an exception, it will display it
        try
        {
            //check if there are any changes prevents someone pressing save twice and you may get duplicate entries in database
            if (this.allensCroftDataSet.HasChanges())
            {
                //It will then check if a row has been added:
                if ((this.TableManager.UpdateAll(this.allensCroftDataSet) > 0))
                {
                    //And it will then display a message box saying “saved”.
                    MessageBox.Show("Saved.");
                }
            }
        }
        catch (Exception ex)
        {
            MessageBox.Show(ex.ToString());
        } 
```

# wpf - WPF 浏览器应用程序中的 WPF 用户控件库 XAML 错误

> ID：15058123
> 
> 赞同：0
> 
> 时间：2013-02-24T23:49:16.623
> 
> 标签：wpf, xaml, dll, user-controls, xbap

在 WPF 浏览器应用程序中使用我制作的 WPF 用户用户控件库时，我遇到了这个问题。

我将其添加到页面如下，并将对我的用户控件的引用添加到项目中

```
<Page x:Class="Page1"
  xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
  xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
  xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
  xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
  xmlns:tools="clr-namespace:Visualisation;assembly=Visualisation"
  mc:Ignorable="d" 
  d:DesignHeight="600"
  d:DesignWidth="1100"
  Title="Page1">
<Grid Name="main">
    <tools:uc3dview Name="_View"></tools:uc3dview>
</Grid>
</Page> 
```

我收到以下错误。

```
System.Reflection.TargetInvocationException was unhandled
Message: Exception has been thrown by the target of an invocation. 
```

如果我在 WPF 应用程序中使用这个精确的用户控件，我没有问题。

我是否缺少一些构造函数符号，所以我的用户控件库可以在 WPF 应用程序中工作，更重要的是在 WPF 浏览器应用程序中工作。如果这很重要，我正在使用 Visual Studio 2012。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T04:14:57.727

我终于弄明白了。用户控件在其控件之一上具有投影效果。

```
<ScrollViewer.Effect>
            <DropShadowEffect/>
</ScrollViewer.Effect> 
```

因为这个 xbap 浏览器应用程序在部分信任模式下运行。当控件去获得授权做阴影效果时，错误被提出。

在完全信任的情况下运行浏览器应用程序或只是注释掉阴影效果，可以解决问题。

如果有人可以更好地解释它。请继续。

# php - PHP PDO 插入数据

> ID：15058129
> 
> 赞同：0
> 
> 时间：2013-02-24T23:50:11.783
> 
> 标签：php, mysql, pdo, prepared-statement

我是 PDO 的新手，我正在尝试将数据插入表中。

这是我的表：

```
CREATE TABLE  `Message` (
`ID` INT( 8 ) NOT NULL  AUTO_INCREMENT ,
`DateTime` DATETIME NOT NULL ,
`SmsSid` VARCHAR( 34 ) NOT NULL ,
`AccountSid` VARCHAR( 34 ) NOT NULL ,
`From` VARCHAR( 12 ) NOT NULL ,
`To` VARCHAR( 12 ) NOT NULL ,
`Body` VARCHAR( 160 ) NOT NULL ,
`FromCity` VARCHAR( 50 ) NULL ,
`FromState` VARCHAR( 50 ) NULL ,
`FromZip` VARCHAR( 50 ) NULL ,
`FromCountry` VARCHAR( 50 ) NULL ,
`ToCity` VARCHAR( 50 ) NULL ,
`ToState` VARCHAR( 50 ) NULL ,
`ToZip` VARCHAR( 50 ) NULL ,
`ToCountry` VARCHAR( 50 ) NULL ,
`ConversationNumber` INT( 4 ) NOT NULL ,
PRIMARY KEY (  `ID` )
) ENGINE = MYISAM 
```

这是我试图插入表格的 PHP 代码。执行此插入语句的正确方法是什么？准备（）查询（）执行（）？

我可以通过使用这个类似的代码而不是上面的这个代码来插入一个不太复杂的表。我不确定究竟是什么导致了问题、语法、列类型、自动增量、日期时间？这个表有什么我没有在插入查询中处理的吗？我是否也正确处理异常/错误处理以查看我需要帮助调试的正确错误消息？

```
<?php
try
{
$connectionString = new PDO("mysql:host=xxxx;dbname=xxxx;","xxxx","xxxx");
}
catch(PDOException $e)
{
echo 'Connection failed'.$e->getMessage();
}

$DateTime = "NOW()";
$SmsSid = "abcdef";
$AccountSid = "abcdef";
$FromWho = "abcdef";
$To = "abcdef";
$Body = "abcdef";
$FromCity = "abcdef";
$FromState = "abcdef";
$FromZip = "abcdef";
$FromCountry = "abcdef";
$ToCity = "abcdef";
$ToState = "abcdef";
$ToZip = "abcdef";
$ToCountry = "abcdef";
$ConversationNumber = "abcdef";

try
{
$executeQuery = $connectionString->prepare("INSERT INTO Message (SmsSid,AccountSid,`From`,To,Body,FromCity,FromState,FromZip,FromCountry,ToCity,ToState,ToZip,ToCountry,ConversationNumber) VALUES (:SmsSid,:AccountSid,:FromWho,:To,:Body,:FromCity,:FromState,:FromZip,:FromCountry,:ToCity,:ToState,:ToZip,:ToCountry,:ConversationNumber)");

$executeQuery->execute(array(':SmsSid'=>$SmsSid,':AccountSid'=>$AccountSid,':FromWho'=>$FromWho,':To'=>$To,':Body'=>$Body,':FromCity'=>$FromCity,':FromState'=>$FromState,':FromZip'=>$FromZip,':FromCountry'=>$FromCountry,':ToCity'=>$ToCity,':ToState'=>$ToState,':ToZip'=>$ToZip,':ToCountry'=>$ToCountry,':ConversationNumber'=>$ConversationNumber));

}
catch(PDOException $e)
{
echo 'Query failed'.$e->getMessage();
}

$connectionString = null;
?> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-24T23:53:50.880

`From`是 MySQL 中的保留字。当您使用它作为列的名称时，您必须用反引号将其括起来，如

```
 `From` 
```

默认情况下，PDO 不会抛出异常。要使其在错误时引发异常，请调用

```
$pdoObject->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T00:04:50.913

转义（使用`backticks`: `）表名和列名也非常重要。例如，`FROM`是 MySQL 中的保留关键字。

```
$SmsSid             = "abcdef";
$AccountSid         = "abcdef";
$From               = "abcdef";
$To                 = "abcdef";
$Body               = "abcdef";
$FromCity           = "abcdef";
$FromState          = "abcdef";
$FromZip            = "abcdef";
$FromCountry        = "abcdef";
$ToCity             = "abcdef";
$ToState            = "abcdef";
$ToZip              = "abcdef";
$ToCountry          = "abcdef";
$ConversationNumber = "abcdef";

try {
   $executeQuery = $connectionString->prepare('INSERT INTO `Message` (`SmsSid`, `AccountSid`, `From`, `To`, `Body`, `FromCity`, `FromState`, `FromZip`, `FromCountry`, `ToCity`, `ToState`, `ToZip`, `ToCountry`, `ConversationNumber`) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)');

   $executeQuery->execute(array($SmsSid, $AccountSid, $From, $To, $Body, $FromCity, $FromState, $FromZip, $FromCountry, $ToCity, $ToState, $ToZip, $ToCountry, $ConversationNumber));
}
catch(PDOException $e) {
       echo 'Query failed' . $e->getMessage();
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-25T09:06:40.307

尝试通过使用抽象库（例如[safemysql](https://github.com/colshrapnel/safemysql)
）自动执行一些操作 看起来，您的代码可以大大缩短，而无需多次重复每个变量名称 - 最重要的是 - 无需关心字段名称是否为保留字- 所有格式都是自动完成的：

```
<?php
$db = new safemysql('host'=>'xxxx','db'=>'xxxx','user'=>"xxxx",'pass'=>"xxxx");
$insert = array( 
    'SmsSid'             => "abcdef",
    'AccountSid'         => "abcdef",
    'From'               => "abcdef",
    'To'                 => "abcdef",
    'Body'               => "abcdef",
    'FromCity'           => "abcdef",
    'FromState'          => "abcdef",
    'FromZip'            => "abcdef",
    'FromCountry'        => "abcdef",
    'ToCity'             => "abcdef",
    'ToState'            => "abcdef",
    'ToZip'              => "abcdef",
    'ToCountry'          => "abcdef",
    'ConversationNumber' => "abcdef",
);
$db->query("INSERT INTO Message SET DateTime = NOW(), ?u", $insert);
?> 
```

请注意，我将`NOW()`函数调用直接添加到查询中，因为它是 Mysql 函数并且不需要格式化。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-11-18T05:54:38.577

```
$sql = "INSERT INTO books2 (title,author,cover) values(?,?,?)";

$q = $conn->prepare($sql);

$q->bindParam(1, $title);

$q->bindParam(2, $author);

$q->bindParam(3, $cover, PDO::PARAM_LOB);

$q->execute(); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-09-30T13:05:32.533

```
 try {
     $db = new PDO('mysql:host=localhost;dbname=test_vendor_management_system', 'root', '');
     $db->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);
     $db->setAttribute(PDO::ATTR_EMULATE_PREPARES, false);
    }catch(PDOException $e) {
    echo 'ERROR: ' . $e->getMessage();
    }

try {

    $stmt = $db->prepare("INSERT INTO car_details(`car_name`,`model_no`,`maker_id`,`dealer_id`,`car_added`) VALUES(?,?,?,?,NOW())");
    $stmt->execute(array($carcar_name,$model_no,$maker_id,$dealer_id));              
    echo "2nd Insertion Done  -".$affected_rows = $stmt->rowCount();
}catch(PDOException $e) {

    echo 'ERROR: ' . $e->getMessage();
}
 try {

       $values = array($carcar_name, $model_no, $maker_id, $dealer_id);
    $stmt = $db->prepare("INSERT INTO car_details
                        (`car_name`,`model_no`,`maker_id`,`dealer_id`,`car_added`)
                         VALUES
                        (:car_name,:model_no,:maker_id,:dealer_id,NOW())
                        ");
    $stmt->bindParam(':car_name', $carcar_name, PDO::PARAM_STR);
    $stmt->bindParam(':model_no', $model_no, PDO::PARAM_STR);
    $stmt->bindParam(':maker_id', $maker_id, PDO::PARAM_INT);
    $stmt->bindParam(':dealer_id', $dealer_id, PDO::PARAM_INT);
        $stmt->execute();
        echo "3rd Insertion Done  -".$affected_rows = $stmt->rowCount();
        echo "3rd Insertion Id  -".$insertId = $db->lastInsertId();
        }catch(PDOException $e) {
        echo 'ERROR: ' . $e->getMessage();
        }

    $carcar_name="ESCORT/SQUIRE";
    $model_no="234";
    $maker_id="21";
    $dealer_id="12";

    try {

        $stmt = $db->prepare("INSERT INTO car_details(`car_name`,`model_no`,`maker_id`,`dealer_id`,`car_added`) VALUES(?,?,?,?,NOW())");
        $stmt->execute(array($carcar_name,$model_no,$maker_id,$dealer_id));              
        echo "2nd Insertion Done  -".$affected_rows = $stmt->rowCount();
    }catch(PDOException $e) {

        echo 'ERROR: ' . $e->getMessage();
    }   try {
        $stmt = $db->prepare("INSERT INTO car_details
                        (car_name,model_no,maker_id,dealer_id,car_added)
                         VALUES
                        (:car_name,:model_no,:maker_id,:dealer_id,:car_added)");

    $stmt->execute(array(':car_name'=>$carcar_name,
                         ':model_no'=>$model_no,
                         ':maker_id'=>$maker_id,
                         ':dealer_id'=>$dealer_id,
                         ':car_added'=>$car_added));

    echo "1st Insertion Done -".$affected_rows = $stmt->rowCount();
    }catch(PDOException $e) {

        echo 'ERROR: ' . $e->getMessage();
    } 
```

# vb.net - VB.net 将文件夹从 SharePoint 复制到本地计算机

> ID：15058130
> 
> 赞同：0
> 
> 时间：2013-02-24T23:50:14.557
> 
> 标签：vb.net, sharepoint, directoryinfo

我编写了一个 VB.net 应用程序，它可以备份我们的 SharePoint 2007 服务器上的文件夹并将文件的新副本放在它们的位置。这个应用程序在我的 Windows 7 计算机上运行良好，但是当同事在他们的 Windows XP 计算机上运行它时，会出现许多错误。尽我所能解决它们，我就是做不到。

第一个错误是当我调暗 DirectoryInfo 变量时。它连接到 SharePoint 服务器上的 WebDav 文件夹。似乎除非用户首先手动将驱动器映射到 UNC（使用他们的常规登录，没有特殊凭据），否则他们会收到拒绝访问错误。由于我有一个解决方法，这并不重要，但如果有解决方案会有所帮助。

第二个（也是最重要的）错误是，在复制文件期间，Windows XP 计算机出现“延迟写入失败”错误。收到此错误的文件未正确备份。此错误甚至不会阻止程序运行！有没有办法解决这个问题？

```
Private Sub btnGo_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles btnGo.Click

    ' Dim all variables
    Dim i, countfiles As Integer
    Dim CompletedReports As New DirectoryInfo(GlobalVariables.ServerURL)
    Dim dNow As Date = Date.Today
    Dim friday As Date
    Dim friD, friM, friY, archiveFolder, archiveURL As String
    Dim FreshReports As New DirectoryInfo(GlobalVariables.ServerURL + "\Report Archive\Templates\")

    ' Prevent form from being closed while running
    btnDone.Enabled = False
    btnGo.Enabled = False
    btnRunSetup.Enabled = False
    Application.DoEvents()

    ' Calculate the archive date
    friday = dNow.AddDays(-(CInt((dNow.DayOfWeek + 1) Mod 7) + 1))
    friD = friday.Day
    friM = friday.Month
    friY = friday.Year
    If Len(friD) < 2 Then
        friD = "0" + friD
    End If
    If Len(friM) < 2 Then
        friM = "0" + friM
    End If
    archiveFolder = friY + "-" + friM + "-" + friD

    archiveURL = GlobalVariables.ServerURL + "\Report Archive\" + archiveFolder

    ' Count number of files in the current folder
    RecursiveCount(CompletedReports, i)

    ' Do the SharePoint Archive to the "Report Archive" folder
    countfiles = i
    PB_SharePointArchive.Maximum = i
    PB_SharePointArchive.Step = 1
    CopyDirectory(GlobalVariables.ServerURL, archiveURL, PB_SharePointArchive, LB_SharePointArchive_Name, False)
    LB_SharePointArchive_Name.Text = "Done!"

    ' If specified, do the Server Backup
    If GlobalVariables.RemoteBackup = True Then
        i = countfiles
        PB_RemoteBackup.Maximum = i
        PB_RemoteBackup.Step = 1
        CopyDirectory(GlobalVariables.ServerURL, GlobalVariables.RemotePath + archiveFolder, PB_RemoteBackup, LB_RemoteBackup_Name, False)
        LB_RemoteBackup_Name.Text = "Done!"
    End If

    ' If specified, do the Local Backup
    If GlobalVariables.LocalBackup = True Then
        i = countfiles
        PB_LocalBackup.Maximum = i
        PB_LocalBackup.Step = 1
        CopyDirectory(GlobalVariables.ServerURL, GlobalVariables.LocalPath + archiveFolder, PB_LocalBackup, LB_LocalBackup_Name, False)
        LB_LocalBackup_Name.Text = "Done!"
    End If

    ' Refresh the Reports
    i = 0
    RecursiveCount(FreshReports, i)
    PB_SharePointRefresh.Maximum = i
    PB_SharePointRefresh.Step = 1
    CopyDirectory(GlobalVariables.ServerURL + "\Report Archive\Templates\", GlobalVariables.ServerURL, PB_SharePointRefresh, LB_SharePointRefresh_Name, True)
    LB_SharePointRefresh_Name.Text = "Done!"

    ' All tasks done - unlock the close function
    btnDone.Enabled = True

End Sub

Private Sub CopyDirectory(ByVal sourceDir As String, ByVal destDir As String, ByRef progBar As ProgressBar, ByRef statusBox As Label, ByVal overwrite As Boolean)

    Dim prompt, retry

    If Not Directory.Exists(destDir) Then
        Directory.CreateDirectory(destDir)
    ElseIf Directory.Exists(destDir) And overwrite = False Then
        'MsgBox("The directory already exists!" + vbCrLf + "It looks like the backup has already been done for this week." + vbCrLf + "To continue, please delete the previous backup and restart the process", MsgBoxStyle.Critical, "TSO Report Refresh")

        prompt = MsgBox("The directory already exists!" + vbCrLf + "It looks like the backup has already been done for this week." + vbCrLf + "Do you wish to delete the previous backup?", MsgBoxStyle.YesNo, "TSO Report Refresh")
        If prompt = vbYes Then
            DeleteDirectory(destDir)
            Directory.CreateDirectory(destDir)
        Else
            MsgBox("You have chosen not to delete the previous backup. Backup cannot continue." + vbCrLf + "To continue, please delete the previous backup and restart the process", MsgBoxStyle.Critical, "TSO Report Refresh")
        End If
    End If

    For Each strEntry As String In Directory.GetFiles(sourceDir)
        Dim fileNew As FileInfo
        fileNew = New FileInfo(strEntry)

        If fileNew.Exists Then
            retry = 3
            statusBox.Text = "Current File: " + fileNew.Name
            Application.DoEvents()
            While retry > 0
                Try
                    fileNew.CopyTo(destDir & "\" & fileNew.Name, True)
                    retry = 0
                    progBar.PerformStep()
                    Application.DoEvents()
                Catch ex As Exception
                    retry = retry - 1
                    If retry = 0 Then
                        MsgBox("A file has failed to copy after three attempts. The application will now close." + vbCrLf + fileNew.Name, MsgBoxStyle.Critical, "TSO Report Refresh")
                        End
                    End If
                    'Debug.Print("Retrying file " + fileNew.Name + " for the " + (3 - retry) + " time...")
                End Try
            End While
        End If
    Next

    For Each strEntry As String In Directory.GetDirectories(sourceDir)
        If Path.GetFileName(strEntry) = "Report Archive" Or Path.GetFileName(strEntry) = "Forms" Then
            'Do Nothing!
        Else
            Dim strDest As String = Path.Combine(destDir, Path.GetFileName(strEntry))
            CopyDirectory(strEntry, strDest, progBar, statusBox, overwrite)
        End If
    Next

End Sub 
```

# google-app-engine - App Engine Dashboard 上的运行时 MCycles 是平均值还是总数？

> ID：15058131
> 
> 赞同：3
> 
> 时间：2013-02-24T23:50:29.067
> 
> 标签：google-app-engine, dashboard

在 Current Load 表中有一个 URI 列表，其中包含 Request/Min、过去 X 小时内的请求数、过去一小时的运行时 MCycles 和平均延迟。

**我想知道运行时 MCycles 是否是过去一小时内对该 URI 的所有请求的总数，或者可能是对该 URI 的每个请求的平均值。**

*这很令人困惑，因为请求计数是在 xHours 中提供的，其中 x 根据一天中的什么时间而变化。*

*此外，我的应用程序中的数字也让它看起来有点混乱，因为我认为一个 URI 做了很多工作和数千次点击，但其他人似乎没有做很多工作，只有几百次但是拥有高 MCycles*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-14T21:55:11.683

Runtime MCycles 列表示*每个请求*使用的平均 CPU 周期。

如果您愿意，您可以通过实验自己确认这一点。此外，如果您查看仪表板页面的底层 HTML 源代码，则 Runtime MCycles 列的标题是“Average Runtime CPU Megacycles Per Request”。

# c++ - 计算 1 和 X 之间的阶乘数

> ID：15058136
> 
> 赞同：-3
> 
> 时间：2013-02-24T23:50:52.090
> 
> 标签：c++

我在开始计算 1 和 n 之间的阶乘数时有点卡住了。一个简单的解决方案是只使用阶乘表。

例如，在 1 到 362,880 之间有 1!、2!、3! ... 8！和 9!。然后程序会输出 1! 之间有 8 个阶乘。和 9!。

==

我还在研究一个单独的布尔函数，该函数确定数字 X 是否为阶乘。例如，如果 X 是 5,040，它将返回 True，但如果它是 5,033，它将返回 False。这必须使用计算，而不是列表。有人能指出我正确的方向吗？

...

这里肯定需要递归，对吧？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T23:57:42.240

您可以对两者使用相同的算法：考虑伪代码

```
i = 1
calc = 1
while calc < X
   i = i + 1
   calc = calc * i

 // is X a factorial number ?
if calc == X
   true
else
   false

 //How many between 1 and X ?
  i - 1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T01:38:37.347

如果范围较大，也许使用[斯特林近似](http://www.proofwiki.org/wiki/Stirling%27s_Formula)来获得最近的阶乘（数值求解 n！= 值）是一个更好的主意。

# php - XMLHttpRequest 完成时页面不会发出警报

> ID：15058137
> 
> 赞同：0
> 
> 时间：2013-02-24T23:50:53.390
> 
> 标签：php, javascript, jquery, ajax, xmlhttprequest

我有一个上传表单，在使用 AJAX 上传文件时显示状态栏。上传完成后，我希望用户知道，但完成后什么也没有发生，但我告诉它提醒“完成”。

我的代码：

```
UploadB.click(function(event)
            {
                event.preventDefault();
                event.stopPropagation();

                var FInput = $('#Files').val();

                if(FInput != '')
                {
                    var Data = new FormData();

                    var Files = document.getElementById('Files');

                    for(var I = 0; I < Files.files.length; ++I)
                    {
                        var FilesName = Files.files[I].name;

                        Data.append('File[]', Files.files[I]);
                    }
                    var Request = new XMLHttpRequest();
                    Request.upload.addEventListener('progress', function(event)
                    {
                        if(event.lengthComputable)
                        {
                            Percent = event.loaded / event.total;
                            Progress = document.getElementById('Progress');
                            Loaded = Math.round(Percent * 100);

                            $('#Progress').progressbar({
                                value: Loaded
                            });
                        }
                        else
                        {
                            $('#Progress').text('There Was An Error Getting The Percent');  
                        }
                    });

                    Request.upload.addEventListener('load', function(event)
                    {

                    });

                    Request.upload.addEventListener('error', function(event)
                    {
                        alert('Upload Failed.');
                    });

                    Request.upload.addEventListener('readystatechange', function(event)
                    {
                        if(this.readyState == 4)
                        {
                            if(this.status == 200)
                            {
                                alert('Done.');
                            }
                            else
                            {
                                alert('There Was An Error, Either Try Again Or Contact Us');
                            }
                        }
                    });

                    Request.open('POST', 'Upload.php');
                    Request.setRequestHeader('Cache-Control', 'no-cache');
                    Progress.style.display = 'block';
                    Request.send(Data); 
                }
                else
                {
                    alert('Please Select A File / Files');  
                }
            }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T02:04:03.057

据我所知，该`readystatechange`事件仅在 上触发`XMLHttpRequest`，而不在 上触发`XMLHttpRequest.upload`。

尝试：

```
Request.addEventListener('readystatechange', function(event) {
    if(this.readyState == 4)
    {
        if(this.status == 200)
        {
            alert('Done.');
        }
        else
        {
            alert('There Was An Error, Either Try Again Or Contact Us');
        }
    }
}); 
```

# ios - 为什么我的 MPMoviePlayerController 不能播放？

> ID：15058138
> 
> 赞同：5
> 
> 时间：2013-02-24T23:50:59.547
> 
> 标签：ios, mpmovieplayercontroller

我正在尝试使用下面的代码播放基本的 .mov 视频文件，但是当按下我分配了动作的按钮时，唯一显示的是黑框，但没有播放视频。任何帮助表示赞赏。谢谢。

```
@implementation SRViewController

-(IBAction)playMovie{
    NSString *url = [[NSBundle mainBundle]
                     pathForResource:@"OntheTitle" ofType:@"mov"];
    MPMoviePlayerController *player = [[MPMoviePlayerController alloc]
                                       initWithContentURL: [NSURL fileURLWithPath:url]];

    // Play Partial Screen
    player.view.frame = CGRectMake(10, 10, 720, 480);
    [self.view addSubview:player.view];

    // Play Movie
    [player play];
}

@end 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-02-25T11:25:29.750

Assumed precondition: **your project is using ARC**.

Your `MPMoviePlayerController` instance is local only and ARC has no way of telling that you need to retain that instance. As the controller is not retained by its view, the result is that your `MPMoviePlayerController` instance will be released directly after the execution of your `playMovie` method execution.

To fix that issue, simply add a property for the player instance to your `SRViewController` class and assign the instance towards that property.

Header:

```
@instance SRViewController

   [...]

   @property (nonatomic,strong) MPMoviePlayerController *player;

   [...]

@end 
```

Implementation:

```
@implementation SRViewController

   [...]

    -(IBAction)playMovie
    {
        NSString *url = [[NSBundle mainBundle]
                         pathForResource:@"OntheTitle" ofType:@"mov"];
        self.player = [[MPMoviePlayerController alloc]
                                           initWithContentURL: [NSURL fileURLWithPath:url]];

        // Play Partial Screen
        self.player.view.frame = CGRectMake(10, 10, 720, 480);
        [self.view addSubview:self.player.view];

        // Play Movie
        [self.player play];
    }

    [...]

@end 
```

# batch-file - 简单的 AHK 脚本或 .bat 文件来更改电源计划、禁用 Windows Aero 和禁用桌面图标

> ID：15058140
> 
> 赞同：0
> 
> 时间：2013-02-24T23:51:16.573
> 
> 标签：batch-file, autohotkey

我没有在 AHK 中编写太多脚本（主要是“sendinput”的东西），所以任何帮助将不胜感激：D

因此，脚本或 .bat 文件需要：

*   更改为特定的电源计划
*   禁用 Windows Aero
*   禁用桌面图标
*   退出本身

再次感谢你 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T21:14:15.277

这应该使您走上正确的轨道。

```
; Disable Aero
RunWait, %comspec% /c "net stop uxsms",, Hide

; Run powercfg.exe -list in command line to get the correct guid
RunWait, %comspec% /c "powercfg.exe /setactive 8c5e7fda-e8bf-4a96-9a85-a6e23a8c635c",, Hide

; Hide icons (might require log off/in)
RegWrite, REG_DWORD, HKEY_CURRENT_USER, Software\Microsoft\Windows\CurrentVersion\Explorer\Advanced, HideIcons, 1

ExitApp 
```

# c++ - DrawIndexedInstanced() 影响其他几何体

> ID：15058143
> 
> 赞同：1
> 
> 时间：2013-02-24T23:51:36.543
> 
> 标签：c++, directx, directx-11

我正在尝试在彼此之上绘制一些 2D 正方形。

第一个正方形是 800 x 600 像素，以 0、0 为中心 第二组正方形是每个 30 x 30 像素，在第一个 2D 正方形的顶部移动

对于第一个正方形，我尝试使用简单的索引几何来渲染它。

我试过单独渲染每个，它工作。但是，当我尝试同时渲染两者时，即使我首先渲染第一个方块，第二个方块的实例化似乎会通过移动 800 x 600 方块以匹配实例缓冲区中的第一个实例来干扰较小的方格，即使我在从棋盘切换到每个方格时传递了新的顶点缓冲区。下面是我的渲染代码：

```
void Render()
{
    FLOAT color[] = {0.3f, 0.4f, 0.5f, 1.0f};

    m_d3dImmediateContext->ClearRenderTargetView(m_d3dRenderTargetView, color);
    m_d3dImmediateContext->ClearDepthStencilView(m_d3dDepthStencilView, D3D11_CLEAR_DEPTH | D3D11_CLEAR_STENCIL, 1.0f, 0);

    m_d3dImmediateContext->IASetInputLayout(m_d3dInputLayout);
    m_d3dImmediateContext->IASetPrimitiveTopology(D3D11_PRIMITIVE_TOPOLOGY_TRIANGLELIST);

    UINT stride = sizeof(Vertex);
    UINT offset = 0;

    m_d3dImmediateContext->IASetVertexBuffers(0, 1, &m_d3dBoardVBuffer, &stride, &offset);
    m_d3dImmediateContext->IASetIndexBuffer(m_d3dIBuffer, DXGI_FORMAT_R32_UINT, 0);

    m_d3dImmediateContext->VSSetShader(m_d3dVShader, NULL, 0);
    m_d3dImmediateContext->PSSetShader(m_d3dPShader, NULL, 0);

    m_d3dImmediateContext->VSSetConstantBuffers(0, 1, &m_d3dCBPerObject);

    m_d3dImmediateContext->PSSetSamplers(0, 1, &m_samLinear);
    m_d3dImmediateContext->PSSetShaderResources(0, 1, &m_d3dBoardSRV);

    XMMATRIX worldViewProj = m_world * m_view * m_proj;
    XMStoreFloat4x4(&m_cbPerObject.WorldViewProj, worldViewProj);

    D3D11_MAPPED_SUBRESOURCE mappedResource;
    m_d3dImmediateContext->Map(m_d3dCBPerObject, 0, D3D11_MAP_WRITE_DISCARD, 0, &mappedResource);
    CopyMemory(mappedResource.pData, &m_cbPerObject, sizeof(struct CBPerObject));
    m_d3dImmediateContext->Unmap(m_d3dCBPerObject, 0);

    m_d3dImmediateContext->DrawIndexed(m_indexCount, 0, 0);

    UINT blockStride[2] = {sizeof(Vertex), sizeof(Instance)};
    UINT blockOffset[2] = {0, 0};

    ID3D11Buffer *vBuffers[2] = {m_d3dBlockVBuffer, m_d3dBlockInstVBuffer};

    m_d3dImmediateContext->IASetVertexBuffers(0, 2, vBuffers, blockStride, blockOffset);
    m_d3dImmediateContext->IASetIndexBuffer(m_d3dIBuffer, DXGI_FORMAT_R32_UINT, 0);

    m_d3dImmediateContext->VSSetShader(m_d3dVShader, NULL, 0);
    m_d3dImmediateContext->PSSetShader(m_d3dPShader, NULL, 0);

    m_d3dImmediateContext->VSSetConstantBuffers(0, 1, &m_d3dCBPerObject);

    m_d3dImmediateContext->PSSetSamplers(0, 1, &m_samLinear);
    m_d3dImmediateContext->PSSetShaderResources(0, 1, &m_d3dBlockSRV);

    worldViewProj = m_world * m_view * m_proj;
    XMStoreFloat4x4(&m_cbPerObject.WorldViewProj, worldViewProj);

    D3D11_MAPPED_SUBRESOURCE mappedResource2;
    m_d3dImmediateContext->Map(m_d3dCBPerObject, 0, D3D11_MAP_WRITE_DISCARD, 0, &mappedResource2);
    CopyMemory(mappedResource2.pData, &m_cbPerObject, sizeof(struct CBPerObject));
    m_d3dImmediateContext->Unmap(m_d3dCBPerObject, 0);

    m_d3dImmediateContext->DrawIndexedInstanced(m_indexCount, 4, 0, 0, 0);

    m_d3dSwapChain->Present(0, 0);
} 
```

我在做一些根本不正确的事情吗？棋盘是 800 x 600 的正方形，而方块是 30 x 30 的正方形。在黑板上，我基本上想渲染多个方块。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T02:34:47.980

您没有为第二个顶点缓冲区设置输入布局。您在渲染 m_d3dBoardVBuffer 之前设置它，但在渲染 vBuffers 之前您没有设置唯一的。

# java - 如何在java中的列中显示乘法表。不使用额外的 java 函数，只使用循环和条件

> ID：15058144
> 
> 赞同：0
> 
> 时间：2013-02-24T23:51:54.553
> 
> 标签：java, loops, conditional

我想在三列和三行中显示值。这是我的代码：

```
public class MultiplicationTable {

    public static void main(String[] args) {

        for(int i=2;i<=10;i++){
            System.out.println();
            System.out.println(" The table " + i);
          for(int j=2;j<=10;j++) {
              System.out.println(" " +i + " x " + j + " = " + i*j + "\t");
          }
       }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T00:25:09.610

（更正）我太傻了；只是普通的表，但在 3 列中。

你可以写成“\u00d7”或“×”而不是“x”，这是真正的数学运算符×。

```
public static void main(String[] args) {
    final String TAB = "    ";
    for(int y = 0; y < 3; y++) {
        for(int j = 2; j <= 10; j++) {
            for (int x = 0; x < 3; x++) {
                int i = 2 + y*3 + x;
                System.out.printf("The table %2d  " + TAB, i);
                System.out.printf("%2d x %2d = %3d" + TAB, i, j, i*j);
            }
            System.out.println();
        }
        System.out.println();
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-18T14:13:39.470

```
String temp     = "";
String lbl      = "TABLE #";

int num         = 10,
    rowLength   = 10,
    colLength   = 3;

int tableNumber = 1, 
    counter     = colLength,
    index       = 1;

for ( int colLabel = index; colLabel <=num; colLabel++, tableNumber++ ){                        
    System.out.printf("%11s %-10s",lbl + tableNumber, "");

    if ( colLabel == counter || colLabel == num ){
        System.out.println();
        for ( int row = 1; row <=rowLength; row++){
            for ( int column = index; column <=colLabel; column++){
                temp    = String.format("%4d x %-3d= ", column, row );
                temp   += String.format("%-10d",(column * row));
                System.out.printf("%20s",temp);
            }   
            System.out.println();
        //  temp = "";
        }

        System.out.println("\n");
        index    = (tableNumber + 1);                               
        counter += colLength;   
    }                               
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-15T00:33:31.963

```
for(int i=2;i<=10;i++){
    System.out.println();
    System.out.println(" The table " + i);
    for(int j=2;j<=10;j++) {
        System.out.println( i + " x " + j + " = " + i*j );
    }
} 
```

# c++ - 字符串到数据类型类

> ID：15058145
> 
> 赞同：0
> 
> 时间：2013-02-24T23:52:03.403
> 
> 标签：c++, map

我想将字符串转换为数据类型类，为此我使用[引用](http://forums.codeguru.com/showthread.php?479589-how-to-convert-a-string-to-a-class-name)。然后我尝试使用地图而不是以下代码。但是当我尝试编译这个时，我得到了

错误信息：

> 错误：从 'std::map, void* (*)()>::mapped_type {aka void* ( *)()}' 到 'void* ' [-fpermissive]的无效转换

代码：

```
class C1 {
public:
  C1() { std::cout << "Object of class C1 created\n"; }
  static void * create() { return (void*)new C1; }
};

class C2 {
public:
C2() { std::cout << "Object of class C2 created\n"; }
static void * create() { return (void*)new C2; }
};

typedef void * (*fptr)();

int main() {
  std::map<std::string, fptr> fpmap;
  fpmap.insert(std::make_pair(std::string("C1"), C1::create));
  fpmap.insert(std::make_pair(std::string("C2"), C2::create));

  std::string classname;
  std::cout << "Insert classname :" << std::flush;
  std::cin >> classname;

  void * obj = fpmap["C1"];
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-24T23:54:57.080

你的意思是：

```
void * obj = fpmap["C1"](); 
```

函数指针不能直接转换为`void*`. 我要`obj`指向函数本身，将其声明为`fptr`. 如果要调用该函数并`obj`指向它返回的内容，则需要调用该函数（额外`()`）。

# c - c中的哈希表和时间复杂度

> ID：15058146
> 
> 赞同：0
> 
> 时间：2013-02-24T23:52:05.340
> 
> 标签：c

我对 c 中的哈希表实现很新，我正在查看一些面试问题，我发现了一个关于查找数组中元素的奇数出现的问题。我已经完成了所有设置和工作：

```
int a[256]={0};
char *str="hhlloworldd";
int i;

for(i=0;i<strlen(str);++i)
    a[str[i]]++;

for(i=0;i<strlen(str);i++)
{
    if(a[str[i]]%2 == 1)
    {
        printf("Odd occurrence of %c\n",str[i]);
    }
} 
```

我见过的大多数哈希表解决方案（就数组或字符串等中的元素计数而言）都使用 2 个 for 循环。1 插入任何可能的内容，1 之后检查结果。我相信这仍然是 O(n) 复杂性，因为（如果我错了，请纠正我）但是它通过字符串的 n 次是 O(n) + O(n) 的两倍，这等于 O(n)。我的问题是有没有办法在插入哈希表时检查哈希表以消除第二个 for 循环？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T00:08:12.423

关于您的代码有两个观察结果：

*   [它与哈希表](http://en.wikipedia.org/wiki/Hash_table)无关，因为没有冲突解决方案。
*   代码的复杂度确实是`O(n)`，但是你的分析是不正确的：第二次循环的时间是`O(256)`，换句话说`O(1)`，对于 的整体复杂度`O(n)`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T01:01:21.090

很多评论：

*   哈希表不能有冲突。例如，具有完美散列的散列表仍然是散列表。哈希表定义专注于通过哈希函数从键到值的映射（这就是定义）。例如，参见（对于相同的查找数组）：

[http://c2.com/cgi/wiki?HashTable](http://c2.com/cgi/wiki?HashTable)

所以上面是一个具有完美哈希函数的哈希表（映射所有元素没有冲突），它将某个元素（一个字符）映射到一个值（出现次数）。

*   如前所述，strlen 是 Θ(n)，因此每次循环迭代都调用它会导致 Θ(n²)。将 strlen 拉出循环可以解决此问题。

*   第二个循环是 Θ(n)，但正如已经评论过的那样，如果这个循环通常是 Θ(e)（随着元素的数量而增长），在这种情况下是 Θ(1)，则更有意义。无论如何，请检查原始问题的真正要求。

*   不可能合并两个循环。这样做的原因是因为只有在处理完字符串中的最后一个元素后才能计算所有数组元素。要明白这一点。如果这不是真的，那么我们可以在更早的时刻得出结论，一些哈希值已经准备好。然后只考虑我们处理最后一个元素之前的那一刻。如果我们还没有处理最后一个元素，那么我们需要将其中的元素增加 1。那么 256 个桶中的任何一个都可能发生变化。但是无法猜测是哪一个，我们需要读取最后一个元素。循环结束后，唯一的出路是再次循环。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-25T00:00:35.797

您的代码似乎有错误 - 但也许我没有正确满足您的要求：

如果某个字符 x 在输入中出现奇数次，则第二个 for 循环将在每次看到它时将其报告为“奇数出现”。

您应该将两个 for 循环合并为一个。作为旁注，在循环条件中放置像 strlen() 这样的 O(n) 操作依赖于编译器理解 str 没有被修改，因此 strlen 不会被重复调用，否则最终会得到二次性能。

```
int a[256]={0};
int n = strlen(str);
int i;

for(i=0;i<n;++i)
{
    ++a[str[i]];
    if(0 != a[str[i]]%2)
    {
        printf("Odd occurrence of %c\n",str[i]);
    }
} 
```

如果密钥空间足够小（在本例中大小为 256）以使一个简单的查找表工作，不确定为什么要使用哈希表。

# symfony - 从集合中删除的 Symfony2 不会持续存在 OneToMany

> ID：15058150
> 
> 赞同：0
> 
> 时间：2013-02-24T23:53:05.753
> 
> 标签：symfony, doctrine-orm, one-to-many

我有 2 个学说元素，可以说具有一对多关系的父母和孩子。孩子是拥有方，并将父母的ID存储在数据库中。

当我通过从父级的集合中删除一个子级来将其从父级中删除并持久保存时，该子级及其关系都将被删除。

这是正常的行为吗？我是否必须`$parent->removeChild($child)`为我要移除的每个孩子说一下？还是我的注释有问题，在这种情况下我会发布我的代码。

编辑：有人可以解释为什么这对一对多有效，但对多对多有效？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T00:12:06.257

你的建议：

```
$parent->removeChild($child); 
```

是要走的路。

# c# - 操作谷歌地图的纬度/经度坐标

> ID：15058154
> 
> 赞同：3
> 
> 时间：2013-02-24T23:53:48.393
> 
> 标签：c#, sql-server, asp.net-mvc, entity-framework, google-maps-api-3

我需要根据地图边界在谷歌地图上显示标记，并计算标记之间的距离。
将 lat/lng 坐标从 SQL 服务器操作到 Google 地图、空间或 lat/lng 比较的最佳选择是什么？
似乎 MVC ef5 空间比我需要的要多，但是纬度/经度比较不正确，因为地球不平坦。

**编辑：** 示例1：

```
x1,y1--------------x2,y2
  |                  |
  |                  |
  |                  |
x3,y3--------------x4,y4 
```

我需要根据地图可见区域范围存储和查找 lat/lng 可见谷歌地图区域中的所有地址。

示例 2：

我需要列出标记 X 公里半径内的所有地址。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T00:05:33.047

要计算两对纬度/经度投影坐标之间的距离，您需要文森蒂[的公式](http://en.wikipedia.org/wiki/Vincenty%27s_formulae)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T00:17:36.110

如果您使用 sql server 2008 R2 要存储纬度和经度，则会退出几何的特殊数据类型，我建议您阅读这篇文章[空间数据类型](http://msdn.microsoft.com/en-us/library/bb933876%28v=sql.105%29.aspx)

要计算两点之间的距离，你有两个 opctios

专门为此设计的[Levenshtein距离](http://en.wikipedia.org/wiki/Levenshtein_distance)计算工具

或者，您可以使用包含该方法的谷歌地图 API 的几何库为应用程序的客户端进行计算。并接收两个 lat/lng

```
google.maps.geometry.spherical.computeDistanceBetween(); 
```

# jquery - 骨干网 + jQuery .append()

> ID：15058156
> 
> 赞同：0
> 
> 时间：2013-02-24T23:54:00.623
> 
> 标签：jquery, backbone.js, twitter-bootstrap, handlebars.js

我已经梳理了大多数相关的帖子，但找不到类似的案例。我有点难过，希望你们能解决问题。

我正在使用带有 REST+JSON API 的 Backbone + jQuery + Handlebars + Bootstrap。

我正在尝试构建可能包含文本的多个项目的可折叠视图。折叠分为三个级别：1）仅项目，2）项目+文本标题，3）项目+文本标题+全文。

应该发生的是 ItemListView 从 API 中提取所有项目并为每个项目呈现一个 ItemView。ItemView 进一步细分为两个 Handlebars 模板——第一个用于特定于项目的标记，另一个用于特定于文本的标记。

问题似乎是`$("#item" + itemNum)`里面的选择器`this.model.get("texts").forEach(function(txt, that)`不匹配任何东西（或者至少`.append()`不添加任何东西）。

我尝试将选择器更改为，`$("item1")`但随后代码变得非常笨拙，生成了一个 Handlebars 模板，其中包含第一个 Item 的第一个 Text 的标题和*另一个*Item only Text 的文本的内容：

```
<div id="item1" class="item in collapse" style="height: auto;">
<ul class="text-list"></ul>

<li class="text-container"><span class="pict text-title collapsed" data-toggle="collapse" data-target="#text2-1">Otsikko 1</span>
  <span id="text2-1" class="collapse item-text in" style="height: 0px;"><br>Teksti 3</span></li>
</div> 
```

还要注意奇怪的`style="height: 0px;"`并且`item in collapse`似乎不是来自任何地方（至少不是我的模板......）。

API当前返回如下测试数据（两个Item，第一个有两个Text，第二个有一个）：

```
[{"texts": [{"text": "Teksti 1", "id": 1, },
            {"text": "Teksti 2", "id": 2, }],
  "open": false,
  "id": 1,
  "name": "Asia 1"},
 {"texts": [{"text": "Teksti 3", "id": 1, }],
  "open": false,
  "id": 2,
  "name": "Asia 2"}] 
```

我对整个事情有一个看法：

```
var ItemView = Backbone.View.extend({
  tagName: 'div',

  initialize: function () {
    _.bindAll(this, 'render');
    this.model.bind('change', this.render);
  },

  render: function (itemNum) {

  // Render item titles

  try {
    var src = $("#item-template").html();
    var itemTemplate = Handlebars.compile(src);
  } catch (e) {
    console.log(e)
  }

  $(this.el).html(itemTemplate({
    itemNum: itemNum,
    itemName: this.model.get("name"),
  }));

  // Add texts under titles

  try {
    var src = $("#text-template").html();
    var textTemplate = Handlebars.compile(src);
  } catch (e) {
    console.log(e)
  }

  // MOST LIKELY THE PROBLEM:
  var counter = 0;
  this.model.get("texts").forEach(function(txt) {
    console.log(txt.text);
    counter++;        
    $("#item1").append(textTemplate({
      itemNum: itemNum,
      textNum: counter,
      text: txt.text
    }));
  }); 
```

以防万一，这是列表视图：

```
 var ItemListView = Backbone.View.extend({
    el: $('#items'),

    initialize: function () {
      _.bindAll(this, 'render', 'appendItem');
      this.items = new Items();      

      this.render();
    },

    render: function () {
      var self = this, p;
      p = this.items.fetch();

      p.done(function () {
        var itemCount = 0;
        _(self.items.models).each(function(item) {
          itemCount++;
          self.appendItem(item, itemCount);
        }, self);
      });
    },

    appendItem: function (item, itemCount) {
      var itemView = new ItemView({
        model: item
      });
      $('#item-list', this.el).append(itemView.render(itemCount).el);
    }
  }); 
```

...和车把模板：

```
<script id="item-template" type="text/x-handlebars-template">
  <span class="item-title pict" data-toggle="collapse" data-target="#item{{itemNum}}">{{itemName}}</span>
  <div id="item{{itemNum}}" class = "collapse item">
    <ul class="text-list"></ul>
  </div>
</script>

<script id="text-template" type="text/x-handlebars-template">
  <li class="text-container"><span class="pict text-title" data-toggle="collapse" data-target="#text{{itemNum}}-{{textNum}}">Otsikko {{textNum}}</span>
  <span id="text{{itemNum}}-{{textNum}}" class="collapse item-text"><br>{{text}}</span></li>
</script> 
```

...和正在呈现的 HTML：

```
<div class="span2" id="items">
  <div id="item-list"></div>
</div> 
```

谢谢！我一直在用头撞墙几个小时，不知道该怎么办。

另外，我这个周末才编写了我的第一个 Backbone.js 代码，所以我很感激你对风格/设计的任何评论。:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T17:19:06.533

好的，我有时间再看一遍，发现这是一个简单的错误

```
$(this.el).html(itemTemplate({
    itemNum: itemNum,
    itemName: this.model.get("name"),
})); 
```

毫不奇怪，更改`.html()`为成功了...`.append()`

# jquery - 点击时的Jquery下拉菜单

> ID：15058159
> 
> 赞同：1
> 
> 时间：2013-02-24T23:54:02.433
> 
> 标签：jquery

所以，我有一个简单的菜单：当你点击一个时显示一个项目，当你点击两个时显示两个项目。ONE 和 TWO 具有切换功能，因此它们在单击时会向下和向上滑动，但是当我在不关闭 ONE 的情况下切换 TWO 时，事情会变得一团糟。

```
$(function() {

$('li.sub', '#navigation').each(function() {

var $li = $(this);
var $div = $('div.submenu', $li);
var top = $li.height();

$li.toggle(function() {

  $div.css('top', top).
  slideDown('slow');

},

function() {

  $div.
  slideUp('slow');

  });

 });

}); 
```

一个小提琴：http: [//jsfiddle.net/vGSWm/2/](http://jsfiddle.net/vGSWm/2/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T00:57:31.723

你可以试试这个

```
$(function() {
    $('#navigation li.sub').click(function(e) {
        var el = $(this).find('.submenu');
        $('.submenu').not(el).slideUp(function(){
            el.slideToggle();
        });
    });
}); 
```

[**演示。**](http://jsfiddle.net/vGSWm/6/)

**更新 ：**

```
$(function() {
    $('#navigation li.sub').click(function(e) {
        var el = $(this).find('.submenu');
        if(el.hasClass('open'))
        {
            el.slideUp(function(){
                el.removeClass('open');
            });
        }
        else
        {
            var opened = $('.submenu.open');
            if(opened.length)
            {
                opened.slideUp(function(){
                    opened.removeClass('open');
                    el.slideToggle(function(){
                        el.addClass('open');
                    });
                })
            }
            else
            {
                el.slideToggle(function(){
                    el.addClass('open');
                });
            }
        }
    });
}); 
```

[**演示**](http://jsfiddle.net/vGSWm/10/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T00:06:33.007

要解决此问题，您需要以编程方式触发任何已打开的列表项的切换。

最简单的方法是在显示刚刚单击的菜单的 div 之前添加代码以隐藏所有 div。

例如编辑函数，使其显示为：

```
$li.toggle(function() {

  $('div.submenu:visible').parent('li.sub').click();

  $div.css('top', top).
  slideDown('slow');

}, 
```

此解决方案假定您可能希望拥有两个以上的列表项，并且可以针对任何数量进行缩放。如果您知道您将只有两个列表项，您可以直接调用列表项。

# jdo - 如何指定连接表的主键

> ID：15058161
> 
> 赞同：0
> 
> 时间：2013-02-24T23:54:54.953
> 
> 标签：jdo, datanucleus

我有一个类，它有一个`List`我希望通过连接表关联的类，以允许同时存在 1-M 和 M-1 关系。换句话说，我想重用列表中的元素。

如果这没有意义或在某种程度上不适用，请提出建议，因为我仍在尝试设计模型的那部分。

所以列表是这样映射的：

```
@Persistent(table = "ixl_csv_metric_rel", defaultFetchGroup = "true")
@Join(column = "ixl_csv_fk")
@Order(column = "order")
@Element(dependent = "true", column = "ixl_metric_fk")
private List<IxlMetric> metrics; 
```

问题是连接表是使用由`ixl_csv_fk`和`order`列组成的复合主键创建的，这不是我需要的。主键最好由`ixl_metric_fk`列而不是`order`列组成，这对我来说更有意义。

我可以禁用生成主键并稍后手动设置它，但我想知道是否有更好的方法来做到这一点？

```
@Join(column = "ixl_csv_fk", extensions = { @Extension(vendorName = "datanucleus", key = "primary-key", value = "false") }) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T08:48:59.197

别无退路。禁用它并自己手动覆盖它。JDO 提供了唯一合理的方法来匹配类定义和 List 字段。

# c# - Windows Phone 中的 ListBox 导航页 MVVM Light

> ID：15058162
> 
> 赞同：0
> 
> 时间：2013-02-24T23:54:55.993
> 
> 标签：c#, windows-phone, mvvm-light

我正在构建基于位置的服务 Windows Phone 应用程序，这是我的第一个应用程序。我在使用 MVVM Light 时页面导航有困难。我正在关注[Jesse Liberty 教程](http://jesseliberty.com/2011/01/09/passing-parameters-with-behaviors-in-mvvm-light-for-windows-phone/)，到目前为止，当我在 FirstPage 中单击 ListBox 上的项目时，它可以导航到 SecondPage。

我想要做的是，用户在与我`ListBox`的`FirstPage`绑定中选择`ListPicker`的`SecondPage`. 因此用户可以轻松更改他们想要搜索的内容`SecondPage`。

![在此处输入图像描述](../Images/7252d9ed4c734db00f3c9afcb1a8e868.png)

**主页.xaml**

```
<ListBox x:Name="MainMenu" ItemTemplate="{StaticResource MainMenu}" ItemsSource="{Binding Categories}" Margin="0,97,0,0">
    <Custom:Interaction.Triggers>
        <Custom:EventTrigger EventName="SelectionChanged">
            <GalaSoft_MvvmLight_Command:EventToCommand Command="{Binding MainMenuCommand, Mode=OneWay}"/>
        </Custom:EventTrigger>
    </Custom:Interaction.Triggers>
</ListBox> 
```

**MainPage.xaml.cs**

```
public MainPage()
{
    InitializeComponent();

    Messenger.Default.Register<CategoryModel>(this,c => NavigationService.Navigate(new Uri("/Views/VenueList.xaml", UriKind.Relative)));
} 
```

**主视图模型.cs**

```
public MainViewModel()
{
     MainMenuCommand = new RelayCommand<CategoryModel>((msg) => GoToVenueList(msg));
}

public RelayCommand<CategoryModel> MainMenuCommand
{
    get;
    private set;
}

private void GoToVenueList(CategoryModel msg)
{
    Messenger.Default.Send(msg);
}

private CategoryModel _selectedItem;
public CategoryModel SelectedItem
{
    get { return _selectedItem; }
    set
    {
        if (_selectedItem == value)
        {
            return;
        }

        var oldValue = _selectedItem;
        _selectedItem = value;

        RaisePropertyChanged("SelectedItem", oldValue, value, true);
    }
} 
```

**地点列表.xaml**

```
<toolkit:ListPicker Margin="0,153,0,0" Background="{StaticResource PhoneAccentBrush}" VerticalAlignment="Top"
                            SelectedItem="{Binding Item, Mode=TwoWay}"
                            ItemsSource="{Binding Categories}"
                            ItemTemplate="{StaticResource CategorySelector}" FullModeHeader="Category" FullModeItemTemplate="{StaticResource FullCategorySelector}" BorderBrush="{StaticResource PhoneAccentBrush}" /> 
```

希望任何人都可以帮助我的问题。

**场地列表视图模型**

```
public VenueListViewModel()
{
    Messenger.Default.Register<PropertyChangedMessage<CategoryModel>>(
        this,
        (action) => Item = action.NewValue
    );
}

private CategoryModel _item;
public CategoryModel Item
{
    get
    {
        return _item;
    }
    set
    {
        if (_item == value)
        {
            return;
        }

        _item = value;

        // Update bindings, no broadcast
        RaisePropertyChanged("Item");
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T20:44:05.493

这是您需要两个 ViewModel 相互通信的典型案例。

在这种情况下，最好的方法是使用框架`mvvm-light`的功能，特别是因为您正在使用。`Messaging`

如果您需要一些帮助，您会在网络上找到大量示例和文档（在 channel9 上查找 Laurent Bugnion 的网络广播，例如[这个](http://channel9.msdn.com/Events/MIX/MIX10/EX14)），实际上只需为某种类型的消息，然后从其他地方发送。

这样，您的第一个视图模型会向您的第二个视图模型发送一条消息，说明已选择了哪个列表项。您的目标视图模型会自行更新以反映这一点。然后您的初始视图模型命令导航到目标页面，并且由于它使用目标视图模型，它运行良好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T10:51:42.540

有几种可能，我主要使用列表框的 SelectedItem 解决方案......但纯消息传递也是可能的。

看看一个类似的问题，[这里有关于堆栈溢出的解决方案](https://stackoverflow.com/questions/9418378/get-selecteditem-from-listbox-using-mvvm)

# python - python中的小端位

> ID：15058164
> 
> 赞同：0
> 
> 时间：2013-02-24T23:55:29.553
> 
> 标签：python, struct, endianness

我正在尝试制作一个 GIF 分析器；我在将任意数量的位读取为小端整数时遇到问题。Struct 非常适合字节大小的参数，但一些 GIF 结构是 3 位小端无符号整数（特别是在 GIF 标头中，[http://www.onicos.com/staff/iz/formats/gif.html](http://www.onicos.com/staff/iz/formats/gif.html)）。反转这些数字的最佳方法是什么？

我尝试使用 Struct 反转整个字节/s 的字节顺序，但它不想反转：

```
struct.unpack('<'+str(len(string))+'s',string)[0] //does not actually invert 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T00:30:06.680

我不知道您是否可以使用`struct`它来处理小于一个字节的内容。但如果你不太担心速度，你可以试试这个功能。它需要一个反转的数字和一个以位为单位的大小并返回反转的结果。

```
def reverse(a,size):
    b = 0
    for i in range(size):
        b <<= 1
        b |= a >> i & 1
    return b 
```

像这样使用它：

```
>>> reverse(3,3) # 011 => 110
6
>>> invert(6,3) # 110 => 011
3
>>> invert(4,3) # 100 => 001
1
>>> invert(5,3) # 101 => 111
5
>>> 
```

显然，您仍然需要使用 struct 将相关位提取到一个数字中，但这应该解决字节顺序问题

# java - Java - 如何在每次迭代时拆分数组并有效地传递给函数？

> ID：15058165
> 
> 赞同：2
> 
> 时间：2013-02-24T23:55:34.283
> 
> 标签：java, arrays, loops

我有一个包含一些值的数组和一个接收两个数组的函数。我想要做的是拆分数组，以便最后一个元素不在数组中，所以我有两个数组，一个包含除最后一个之外的所有原始元素，一个只有一个元素 - 最后一个。将其传递给函数后，我想使用原始数组，但这次将倒数第二个元素放入单独的数组中，依此类推。我想这样做五次。下面将更好地解释它：

```
int[] val = {25,50,66,75,100,1000,5000,10000,25000};

for (int i=0; i<5; i++){

//Need to split the array and then pass it to the function here
}

public void evaluate(int[] train, int[] test){

....
} 
```

因此，例如在第一次迭代中，我想从数组中删除/拆分 25000 并将其放入另一个数组中，然后将这两个数组传递给函数：

第一个数组现在有`{25,50,66,75,100,1000,5000,10000}` ，第二个数组现在有`{25000}`

在下一次迭代中，我现在想拆分/删除 10000（25000 现在回到数组中）：

所以第一个数组现在有了`{25,50,66,75,100,1000,5000,25000}` ，第二个数组现在有了`{10000}`

所以基本上它是从底部往上走，但只有 5 次。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T00:02:32.457

最简单的做法是从使用数组切换到使用`List<Integer>`. 然后，您可以使用该`subList`方法构造作为原始数组子序列的数组。

如果你坚持使用数组，你有两种选择：

1.  添加参数以表示每个数组参数的适用范围的开始和结束索引。然后，您需要重写逻辑以从 start 到 end-1（而不是 0 到 array.length - 1）。
2.  分配新数组并将数据复制到其中。如果您打算修改数组元素，这将不起作用，并且在任何情况下都是很多额外的工作。

下面是一些代码来展示如何使用 a `List<Integer>`：

```
// autobox each value as an Integer:
List<Integer> vals = Arrays.asList(
    new Integer[] {25,50,66,75,100,1000,5000,10000,25000});
final int len = vals.length();

for (int i=0; i<5; i++){
    evaluate(vals.subList(0, i), vals.subList(i, len));
}

public void evaluate(List<Integer> train, List<Integer> test){

....
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T00:04:12.100

查看[Arrays](http://docs.oracle.com/javase/6/docs/api/java/util/Arrays.html) API，您可以使用 Arrays.copyOf(..) 方法来完成。

```
newArray = Arrays.copyOf(oldArray, oldArray.length-1) 
```

也许这段代码可以帮助你。

```
 int[] val = { 25, 50, 66, 75, 100, 1000, 5000, 10000, 25000 };
    int[] firstArray = new int[val.length-1];
    int[] SecondArray = new int[1];     
    //iterates the whole array set to 5 if needed
    for (int n = 0; n < val.length; n++) {
        SecondArray[0] = val[val.length-n-1];
        for(int x = 0, firstArrayCounter= 0; x < val.length; x++){
            if(val[x]!=SecondArray[0]){                 
                firstArray[firstArrayCounter] = val[x];
                firstArrayCounter++;
            }       
        }
        //prints what is in the arrays                      
        for (int i = 0; i < firstArray.length; i++)
            System.out.print(firstArray[i] + " ");
        System.out.println("\n"+SecondArray[0]);
    } 
```

祝你好运！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-25T04:37:37.920

预先创建两个数组，并在每次迭代后将一个元素交换到您的测试数组中。这将比一直分配新数组更快。

```
int[] val = {25,50,66,75,100,1000,5000,10000,25000};

// create the destination arrays:
int[] train = new int[val.length-1];
int[] test = new int[1];

// initialize the arrays:
test[0] = val[val.length-1];
for (int i = 0; i < val.length-1; ++i)
{
    train[i] = val[i];
}

int timesToIterate = 5;

for (int iteration = 0; iteration < timesToIterate; ++iteration)
{
    evaluate(train, test);

    int i = train.length-1-iteration;
    if (i >= 0) // don't swap if this is the last element in the array
    {
        int tmp = test[0];
        test[0] = train[i];
        train[i] = tmp;
    }
} 
```

使用您的示例数据，传递给评估函数的数组是：

```
{25 50 66 75 100 1000 5000 10000 } {25000}
{25 50 66 75 100 1000 5000 25000 } {10000}
{25 50 66 75 100 1000 10000 25000 } {5000}
{25 50 66 75 100 5000 10000 25000 } {1000}
{25 50 66 75 1000 5000 10000 25000 } {100} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-25T00:04:22.257

我不知道您最终要做什么，但这似乎非常适合函数式编程语言。无论如何，我们可以在 java 和数组中做到这一点：

在包含从 1 到 5 的 for 循环中，您可能会输入以下内容：

```
for (int i=1; i<=5; i++){
  int[] train = new int[val.length-i];
  System.arraycopy( val, 0, train, 0, train.length-1 );
  int test = new int[1];
  test[0] = val[val.length-i];
  evaluate(train,test);
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-25T00:04:51.123

我会使用的算法是：

1.  取原始数组 A，并创建一个新的 A'，其中少 1 个元素和一个单元素数组，称为 B。
2.  用 n-1 个元素填充 A'，用 1 个元素填充 B。
3.  然后，当您完成处理 A' 和 B 时，将 A' 中的适当元素与 B[0] 交换。

单个副本是`O(n)`，并且 5 次迭代中的每一次都有一个恒定时间操作来进行交换。内存也是`O(n)`。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-02-25T04:17:55.893

可以使用 Apache commons 的 ArrayUtils，代码示例如下：

```
 private static int[] val = { 25, 50, 66, 75, 100, 1000, 5000, 10000, 25000 };
    private static int[] test = {};

    public static void evaluate(int[] train, int[] test) {
        for (int i = 0; i < train.length; i++) {
            System.out.print(train[i] + ",");
        }
        System.out.println("");
        for (int i = 0; i < test.length; i++) {
            System.out.print(test[i] + ",");

        }
        System.out.println("");
        System.out.println("-----");
    }

    public static void main(String[] args) {

        for (int i = 0; i < 5; i++) {
            if (!ArrayUtils.isEmpty(test))
                ArrayUtils.remove(test, 0);
            evaluate(ArrayUtils.remove(val, val.length - 1 - i), ArrayUtils.add(test, val[val.length - 1 - i]));
        }
    } 
```

# objective-c - 屏幕截图到 NSImageView

> ID：15058167
> 
> 赞同：0
> 
> 时间：2013-02-24T23:55:51.083
> 
> 标签：objective-c, macos

我正在为 OS X 开发一个应用程序。现在我的做法是截屏，然后使用 NSOpenPanel 选择截屏。我的问题是：有什么方法可以单击一个按钮，然后它会启动屏幕截图抓取器（当您按 Command + Shift + 4 时），然后在我拖动并释放后它会将其放入 NSImageView 中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T00:01:07.283

请参阅这篇关于[CocoaDev](http://cocoadev.com/wiki/ScreenShotCode)的文章。它看起来与您要完成的任务相似。有很多代码示例应该会有所帮助。

# xcode - ld：架构 armv7 的 1 个重复符号

> ID：15058171
> 
> 赞同：0
> 
> 时间：2013-02-24T23:56:41.807
> 
> 标签：xcode, ios6, xcode4.2

这个问题快把我逼疯了。我似乎无法弄清楚。它突然发生了。我查看了各种相关消息，但找不到适合我的解决方案。

```
Ld "/Users/mmemmo/Library/Developer/Xcode/DerivedData/Simple_Science_Tab-gifjwcnwxnqxuhacsbdlutruxepk/Build/Products/Debug-iphoneos/Simple Science Tab.app/Simple Science Tab" normal armv7
cd "/Users/mmemmo/Dropbox/Apple/Simple Science Tab"
setenv IPHONEOS_DEPLOYMENT_TARGET 6.0
setenv PATH "/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/usr/bin:/Applications/Xcode.app/Contents/Developer/usr/bin:/usr/bin:/bin:/usr/sbin:/sbin"
/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/clang -arch armv7 -isysroot /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS6.1.sdk -L/Users/mmemmo/Library/Developer/Xcode/DerivedData/Simple_Science_Tab-gifjwcnwxnqxuhacsbdlutruxepk/Build/Products/Debug-iphoneos -F/Users/mmemmo/Library/Developer/Xcode/DerivedData/Simple_Science_Tab-gifjwcnwxnqxuhacsbdlutruxepk/Build/Products/Debug-iphoneos -filelist "/Users/mmemmo/Library/Developer/Xcode/DerivedData/Simple_Science_Tab-gifjwcnwxnqxuhacsbdlutruxepk/Build/Intermediates/Simple Science Tab.build/Debug-iphoneos/Simple Science Tab.build/Objects-normal/armv7/Simple Science Tab.LinkFileList" -dead_strip -fobjc-arc -fobjc-link-runtime -miphoneos-version-min=6.0 -lsqlite3 -framework QuartzCore -framework UIKit -framework Foundation -framework CoreGraphics -o "/Users/mmemmo/Library/Developer/Xcode/DerivedData/Simple_Science_Tab-gifjwcnwxnqxuhacsbdlutruxepk/Build/Products/Debug-iphoneos/Simple Science Tab.app/Simple Science Tab"

duplicate symbol _dbfn in:
/Users/mmemmo/Library/Developer/Xcode/DerivedData/Simple_Science_Tab-gifjwcnwxnqxuhacsbdlutruxepk/Build/Intermediates/Simple Science Tab.build/Debug-iphoneos/Simple Science Tab.build/Objects-normal/armv7/ssDataBrains.o
/Users/mmemmo/Library/Developer/Xcode/DerivedData/Simple_Science_Tab-gifjwcnwxnqxuhacsbdlutruxepk/Build/Intermediates/Simple Science Tab.build/Debug-iphoneos/Simple Science Tab.build/Objects-normal/armv7/ssCheckInViewController.o 
```

ld：架构 armv7 clang 的 1 个重复符号：错误：链接器命令失败，退出代码为 1（使用 -v 查看调用）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T00:38:48.690

【不知道你的水平……】

问题是两个.o 文件都定义了一个外部符号_dbfn。如果 .o 文件是从 .c（或 .m 或其他文件）派生的，那么在这些文件的某处，您将看到一个名为 dbfn 的变量/符号。您可以 grep 或在 Xcode 中搜索它或再次在 Xcode 中使用符号导航器来查找已定义的符号。

符号 dbfn 有可能定义在这两个 .o 文件都包含的文件中。用于`cc -E <source.c>`查看 dbfn 的扩展源和 grep。

您可以执行“nm .o”来了解有关 dbfn 符号及其类型的更多信息。

注意：使用 nm 和 cc 需要您安装了 Xcode 命令行工具。

# ios - animateWithDuration 在升级到 xcode 4.6 后导致 ios4 上的触摸事件出现问题

> ID：15058176
> 
> 赞同：1
> 
> 时间：2013-02-24T23:57:44.627
> 
> 标签：ios, ios4, xcode4.6

在升级到 xcode 4.6 之前，我有一个运行良好的应用程序。升级 xcode 4.6 后，在 ios4 上运行时没有收到触摸事件（在 ios5 和 ios6 上运行良好）。我尝试在 IB 中添加一个开关（没有连接，只是添加了）。我可以在 ios5 和 ios6 设备上的模拟器中切换开关，但在 ios4 上我什至无法移动开关。

我有一个在计时器上运行的小动画：

```
- (void)setFoamSize:(float)foamSize
{    
    // foamSize is a number between 0 - 100\.  0 is min foam size; 100 is max foam size

    // NSLog(@"setFoamSize %f", foamSize);

    float centerX, centerY;
    float minHeight, minWidth;
    float maxHeight, maxWidth;
    if ([[UIDevice currentDevice] userInterfaceIdiom] == UIUserInterfaceIdiomPhone)
    {
        centerX     = 70.0;
        centerY     = 102.0f;

        minWidth    = 51.0f;
        minHeight   = 37.0f;

        maxWidth    = 111.0f;
        maxHeight   = 86.0f;
    }
    else
    {
        centerX     = 158.0f;
        centerY     = 151.0f;

        minWidth    = 74.0f;
        minHeight   = 64.0f;

        maxWidth    = 320.0f;
        maxHeight   = 271.0f;
    }

    float height = ((maxHeight - minHeight) * foamSize + minHeight);
    float width  = ((maxWidth  - minWidth)  * foamSize + minWidth);

    float x = centerX - width / 2;
    float y = centerY - height / 2;

    float alpha  = MIN(1.0, ((1.0 - 0.7) * foamSize + 0.7));

    @autoreleasepool {

        [UIView animateWithDuration:1.0
                              delay:0.0
                            options: UIViewAnimationOptionCurveLinear
                         animations:^{
                             imageViewFoam.frame = CGRectMake(x, y, width, height);
                             imageViewFoam.alpha = alpha;
                         }
                         completion:^(BOOL finished){
                         }];
    }

} 
```

如果我注释掉这个动画，那么在 ios 4 中会收到触摸事件。动画适用于所有 iOS，并占据屏幕的一小部分（即不与任何按钮或开关重叠）。

为什么这个动画会干扰触摸事件？

**更新**：

如果我将图像更改移到 animateWithDuration 之外，一切正常（即，在 ios4 中接收到触摸事件）

```
imageViewFoam.frame = CGRectMake(x, y, width, height);
imageViewFoam.alpha = alpha;

@autoreleasepool {

    [UIView animateWithDuration:1.0
                          delay:0.0
                        options: UIViewAnimationOptionCurveLinear
                     animations:^{
                        //imageViewFoam.frame = CGRectMake(x, y, width, height);
                        //imageViewFoam.alpha = alpha;
                     }
                     completion:^(BOOL finished){
                     }];
} 
```

**更新 2**

动画每 1 秒启动一次（因此持续时间也为 1 秒，我得到了相对平滑的图像增长。它有点锯齿状，但这就是我想要的效果）。

在任何情况下，如果我将持续时间更改为 0.5 秒，那么如果在动画之间触摸了对象（但如果在动画期间触摸了它们，则触摸事件不起作用）。

因此，似乎虽然 animationWithDuration 实际上是在为某些东西设置动画，但在 iOS4 中触摸事件被忽略了。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-25T00:30:26.617

我添加了选项 UIViewAnimationOptionAllowUserInteraction

```
@autoreleasepool {

    [UIView animateWithDuration:1.0
                          delay:0.0
                        options:(UIViewAnimationOptionCurveLinear | UIViewAnimationOptionAllowUserInteraction)
                     animations:^{
                        imageViewFoam.frame = CGRectMake(x, y, width, height);
                        imageViewFoam.alpha = alpha;
                     }
                     completion:^(BOOL finished){
                     }];
} 
```

感谢mmc[在这里的回答](https://stackoverflow.com/questions/7337363/how-to-recognize-tap-gesture-while-a-view-is-animating?rq=1)

根据 Apple[文档](http://developer.apple.com/library/ios/#documentation/uikit/reference/uiview_class/uiview/uiview.html)，动画应该只禁用 imageViewFoam 的用户交互

> 在动画期间，无论此属性中的值如何，动画中涉及的所有视图都会暂时禁用用户交互。您可以通过在配置动画时指定 UIViewAnimationOptionAllowUserInteraction 选项来禁用此行为。

所以我不确定为什么事情不起作用。无论如何，添加该选项解决了我的问题。

# asp.net - 所有数据都不适合数据网格视图

> ID：15058177
> 
> 赞同：1
> 
> 时间：2013-02-24T23:58:10.533
> 
> 标签：asp.net, mysql, vb.net

我正在尝试开发一个 ASP.NET 页面，该页面将显示我的数据库中的条目。我的查询中有大约 16 列。但是，如果我在代码中使用所有 16 列进行查询，则 GridView 不会显示。

只有当我的查询中的列数不超过 8 列时，它才会出现在页面上。我不知道该怎么办 有人可以帮我吗？

这些是查询的代码示例和填充查询的 bask end

```
 <asp:GridView ID="GridView1" runat="server" CellPadding="4" ForeColor="#333333" 
        GridLines="None" Width="900px">
        <AlternatingRowStyle BackColor="White" />
        <EditRowStyle BackColor="#2461BF" />
        <FooterStyle BackColor="#507CD1" Font-Bold="True" ForeColor="White" />
        <HeaderStyle BackColor="#507CD1" Font-Bold="True" ForeColor="White" />
        <PagerStyle BackColor="#2461BF" ForeColor="White" HorizontalAlign="Center" />
        <RowStyle BackColor="#EFF3FB" />
        <SelectedRowStyle BackColor="#D1DDF1" Font-Bold="True" ForeColor="#333333" />
        <SortedAscendingCellStyle BackColor="#F5F7FB" />
        <SortedAscendingHeaderStyle BackColor="#6D95E1" />
        <SortedDescendingCellStyle BackColor="#E9EBEF" />
        <SortedDescendingHeaderStyle BackColor="#4870BE" />
    </asp:GridView> 
```

这就是我填充它的方式：

```
Try
        myconn.Open()
        Dim sqlstring As String = "SELECT a.account_id AS 'No', a.accountid_number AS 'ID', CONCAT(account_name,' ',account_midname,' ',account_surname ) AS 'Student Name', a.account_type As 'Type', l.live_mail AS 'Acount Name' AS 'Password' FROM account a, liveaccount l WHERE a.account_id = l.l_account_id"
        Dim smd As MySqlCommand
        smd = New MySqlCommand(sqlstring, myconn)
        smd.CommandType = CommandType.Text

        Dim da As New MySqlDataAdapter(smd)
        Dim cb As New MySqlCommandBuilder(da)
        Dim ds As New DataSet()
        da.Fill(ds)

        GridView1.DataSource = ds.Tables(0)
        GridView1.DataBind()

        myconn.Close()
    Catch ex As Exception
        myconn.Close()
    End Try 
```

这是有效的查询。如果我再添加一列，它就不会显示：

```
SELECT a.account_id AS 'No', a.accountid_number AS 'ID', CONCAT(account_name,' ',account_midname,' ',account_surname ) AS 'Student Name', a.account_type As 'Type', l.live_mail AS 'Acount Name' FROM account a, liveaccount l WHERE a.account_id = l.l_account_id" 
```

这个应该可以工作，但如果我插入它，gridView 不会显示：

```
SELECT a.account_id AS 'No', a.accountid_number AS 'ID', a.account_type AS 'Type', a.account_name || ' ' || a.account_midname || ' ' || a.account_surname  AS 'Student Name', a.account_birthdate AS 'BirthDate', l.gender AS 'Gender', l.position AS 'Position', l.office_department AS 'Office/Department', l.date_created AS 'Date Created', time_created AS 'Time Created', l.office_tel AS 'Tel No', office_localno AS 'Office Tel', l.contact_no 'Cell Phone', l.alternate_email AS 'Other Email', l.classification AS 'Classification', l.registered AS 'Status' FROM account a, liveaccount l WHERE a.account_id = l.l_account_id AND l.registered = 'NOTREGISTERED' AND a.account_deleted = 0 ORDER BY a.account_id Desc; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T00:19:33.393

运行查询后，您是否验证过您的 DataSet 有任何数据？您可以尝试将您的 SQL 粘贴到管理工作室或查询分析器中，看看您的 SQL 代码是否有问题。

此外，您正在使用 try/catch，但没有捕获任何特定的异常。我会把它改成这样。这是 C#，你应该能够很容易地翻译成 VB。

```
catch (Exception ex) { System.Diagnostics.Debug.WriteLine(ex.ToString());} 
```

这将显示加载数据时实际发生的情况，以及数据绑定的任何错误。

# facebook - 得到错误的请求行

> ID：15058184
> 
> 赞同：2
> 
> 时间：2013-02-24T23:59:42.270
> 
> 标签：facebook, authentication

我有一个 Canvas Facebook 应用程序，它有一个通过 localhost 访问的开发人员版本（用于测试和开发目的）和一个部署到 Heroku 的暂存版本。每当我尝试通过 localhost 访问开发人员版本时，都会收到以下错误：

```
[2013-02-24 17:43:40] 错误请求行 `\x16\x03\x01\x00│\x01\x00\x00»\x03
\x02Q*Ñ¼X\x0EÑ÷╫┤EΩa▀f⌠├÷RNu#N╕╨6$╙iRZ╛\x00\x00H└'。
[2013-02-24 17:43:40] 错误请求行 `\x16\x03\x01\x00│\x01\x00\x00»\x03
\x02Q*Ñ¼π'k1w3Ää¿\x10ëσÅú├\x18$Æë{«ÄNù▐\x03$D\x00\x00H└'。
[2013-02-24 17:43:40] 错误错误的 URI `!]è"!┼I\x00\x00H└'。
[2013-02-24 17:43:40] 错误请求行 `\x16\x03\x00\x00U\x01\x00\x00Q\x03
\x00Q*Ñ¼╦▐σ\x12╥N\x7Fi+∩£\x1Dcúë[1/°╡½ñVé₧·Y\x00\x00*\x00 \x00ê\x00ç\x009\x008\
x00ä\x005\x00E\x00D\x00f\x003\x002\x00û\x00A\x00\x05\x00\x04\x00/\x00\x16\x00\x1
3■ \x00'。

```

我在 heroku 中访问暂存版本没有问题。为了让事情更有趣，我的合作开发人员在尝试通过 localhost 访问应用程序时没有这个问题。我们使用相同的环境（Windows 操作系统和 webrick 服务器）。我怀疑问题出在我的帐户上，但我不知道如何验证/修复它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-03T06:17:52.067

尝试访问清除缓存。我在使用具有**config.force_ssl = true的****https**访问 api 时遇到了同样的错误，但它与**http**请求一起工作正常。

# sql - 按组计数查询

> ID：15058185
> 
> 赞同：0
> 
> 时间：2013-02-24T23:59:47.853
> 
> 标签：sql, sql-server

我有类别组和种族组，我需要赖特查询报告，看起来像这样![在此处输入图像描述](../Images/0f42e026cb7061917cafa590245b391f.png)

现在我有可以按客户 ID 和种族计算的查询。然而，他的诡计也是客户表有西班牙裔字段（位 0 假 1 真）。客户可以有任何种族，但同时他/她可以是西班牙裔。我现在的查询可以计算客户，但对于西班牙裔，它只是列出计数而不是按种族划分

```
select ethnicity, COUNT (c.EthnCode) as '(A) tottal Numbers of participamts by Rase', 
(select COUNT (Hispanic) from clients c JOIN ethnicity e
ON c.EthnCode = e.EthnCode
where c.EthnCode in ('N','A','B','P','W','NW','AW','BW','BN') and Hispanic =1 )as '(B)Number of Hispanic or Latino Participants Reported in Column A by Race'
from  Clients c
JOIN ethnicity e
ON c.EthnCode = e.EthnCode
where c.EthnCode in ('N','A','B','P','W','NW','AW','BW','BN')
group by ethnicity 
```

此外，如果某些种族没有参与者，它只是没有在结果中显示，但我需要为该种族显示 0。这是我的查询结果 ![在此处输入图像描述](../Images/c1729f794d32144af887f860def9e31b.png)

如您所见，西班牙裔没有按类别划分。需要帮助试图解决这个问题第二天仍然没有任何成功

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T00:10:09.457

试试这个：

```
select ethnicity, COUNT (c.EthnCode) as '(A) tottal Numbers of participamts by Rase', 
sum(case when Hispanic=1 then 1 else 0 end) as '(B)Number of Hispanic or Latino Participants Reported in Column A by Race'
from  Ethnicity E
LEFT JOIN Clients C
ON c.EthnCode = e.EthnCode
where e.EthnCode in ('N','A','B','P','W','NW','AW','BW','BN')
group by ethnicity 
```

SUM(CASE...) 用作实际计数中的一种“子计数”。

**更新**：

要将所有其他代码归为“其他倍数”类别，请执行以下操作：

```
select 
    case 
    when e.EthnCode in ('N','A','B','P','W','NW','AW','BW','BN') then ethnicity
    else 'Other Multiples' 
    end as ethnicity, 
    COUNT (c.EthnCode) as '(A) tottal Numbers of participamts by Rase', 
    sum(case when Hispanic=1 then 1 else 0 end) as '(B)Number of Hispanic or Latino Participants Reported in Column A by Race'
from  Ethnicity E
LEFT JOIN Clients C
ON c.EthnCode = e.EthnCode
group by case 
    when e.EthnCode in ('N','A','B','P','W','NW','AW','BW','BN') then ethnicity
    else 'Other Multiples' 
    end 
```

这假设 Ethnicity 中所有不在硬编码语句中的 ethncode 都是倍数。

# php - 从选择 MYSQL PHP 中隐藏特定行

> ID：15058189
> 
> 赞同：0
> 
> 时间：2013-02-25T00:00:55.867
> 
> 标签：php, mysql, sql

我有这个查询：

```
 $SQL = "SELECT id, ciudadh, corporacionh,r1,ultima,anotaciones FROM juan ".$where." AND ORDER BY $sidx $sord LIMIT $start ,$limit"; 
```

所以我有一行 id=500 并且我想从该查询中隐藏该行。

我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T00:02:54.313

只需添加另一个 where 子句：

```
$SQL = "SELECT id
              ,ciudadh
              ,corporacionh
              ,r1
              ,ultima
              ,anotaciones 
        FROM juan ".$where
     ." AND id!=500
        ORDER BY $sidx $sord 
        LIMIT $start ,$limit"; 
```

# php - 如何在 Laravel 3 中排除路由问题？（使用脚手架包）

> ID：15058194
> 
> 赞同：0
> 
> 时间：2013-02-25T00:01:39.910
> 
> 标签：php, laravel, scaffolding, laravel-3

刚从 Laravel 开始。

我已经将它安装在我的 wamp 服务器上并在 apache 中设置了一个虚拟主机。标准的家庭控制器工作正常。我已经安装了脚手架包，并根据包的[github 页面上](https://github.com/loic-sharma/scaffold)的描述生成了一个博客。没有错误。

我已添加`Route::controller(Controller::detect());`到我的 routes.php 中，但似乎没有任何工作。我试过[http://laravel.dev/blog/posts/create](http://laravel.dev/blog/posts/create)和[http://laravel.dev/blog/post/create](http://laravel.dev/blog/post/create)。脚手架创建了 3 个控制器，users.php、blog/posts.php 和 blog/comments.php。

laravel.dev 是一个以 D:\wamp\www\laravel\public 作为 DocumentRoot 的虚拟主机。

有哪些可能的问题？我从哪里开始寻找？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T21:50:41.040

我怀疑您可能必须在 URL 中包含“index.php”（ [http://laravel.dev/index.php/blog/posts/create ）才能正常工作。](http://laravel.dev/index.php/blog/posts/create)这是 Laravel 中设置的默认选项。

如果您想为更简洁的 URL 关闭此功能，请在 config/application.php 中将“index”设置为空字符串。

您可以在文档中阅读更多相关信息：http: [//laravel.com/docs/install#cleaner-urls](http://laravel.com/docs/install#cleaner-urls)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T01:02:14.553

不要使用`Route::controller(Controller::detect())`- 它已知是错误的并且会导致很多问题。

只需在路由中单独定义每个控制器。

# ruby-on-rails - 嵌套表单的功能测试

> ID：15058198
> 
> 赞同：0
> 
> 时间：2013-02-25T00:02:06.303
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ruby-on-rails-3.2, nested-forms

我有 2 个模型：公司和用户。一个公司有很多用户，一个用户属于公司。我创建了一个嵌套表单：注册时，您必须创建公司和第一个用户。

表单就像一个魅力，但我真的不知道如何为此编写测试。这里是由脚手架生成的功能测试：

```
test "should create company" do
  assert_difference('Company.count') do
    post :create, company: { city: @company.city, name: @company.name}
  end
  assert_redirected_to company_path(assigns(:company))
end 
```

在这里我为了测试用户创建做了什么：

```
test "should create company and first user" do
  assert_difference('Company.count') do
    assert_difference('User.count') do
      post :create, company: { city: @company.city, name: @company.name}, user: {name: @user.name, email: @user.email}
    end
  end
  assert_redirected_to company_path(assigns(:company))
end 
```

当我运行测试时，出现以下错误：

```
1) Failure:
test_should_create_company_and_first_user(CompaniesControllerTest) [test/functional/companies_controller_test.rb:21]:
"User.count" didn't change by 1.
<3> expected but was
<2>. 
```

我没有在网上找到帮助，所以我希望这里有人可以做到:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T00:21:32.950

如果表单实际上是嵌套的，那么您应该在测试请求的公司对象中包含用户对象，如下所示：

```
post :create, company: { city: @company.city, name: @company.name, user: {name: @user.name, email: @user.email} } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-09T03:58:44.550

**解决方案**

公司模式

```
attr_accessible :city, :name, :users_attributes
has_many :users
accepts_nested_attributes_for :users 
```

用户模型

```
attr_accessible :email, :name
belongs_to :company 
```

公司控制器测试

```
test "should create company and first user" do
  assert_difference('Company.count') do
    assert_difference('User.count') do
      post :create, company: { 
        city: @company.city, 
        name: @company.name, 
        users_attributes: {
          user: {name: @user.name, email: @user.email}, 
          user: {name: @user.name, email: @user.email}
        }
      }
    end
  end
  assert_redirected_to company_path(assigns(:company))
end 
```

您可以在 users_attributes 中使用一个或多个用户进行测试。

谢谢@drewinglis 的帮助：D

# eclipse - Spring context:component-scan 无法在 POM 中引用的另一个 Eclipse 项目依赖项中找到组件

> ID：15058200
> 
> 赞同：7
> 
> 时间：2013-02-25T00:02:34.010
> 
> 标签：eclipse, spring, gwt, maven, m2eclipse

我正在开发一个跨两个 Eclipse 项目（myclient 和 myservice）的 GWT Web 应用程序。

myclient 项目通过 POM 中的依赖项引用 myservice 项目。

```
<dependency>
<groupId>com.myproject</groupId>
<artifactId>myservices</artifactId>
<version>1.0.0</version>
</dependency> 
```

myclient 项目有一个 WAR 目录 src/main/webapp。myclient 项目的输出文件夹是 src/main/webapp/WEB-INF/classes。

myclient 项目有一个 Spring 描述符 application-context.xml，其中包含以下内容

```
<context:component-scan base-package="com.myproject.myclient, com.myproject.myservices"/> 
```

和 web.xml

```
<web-app>

    <context-param>
        <param-name>contextConfigLocation</param-name>
        <param-value>/WEB-INF/application-context.xml</param-value>
    </context-param>

    <listener>
        <listener-class>org.springframework.web.context.ContextLoaderListener</listener-class>
    </listener>

    <listener>
        <listener-class>org.springframework.web.context.request.RequestContextListener</listener-class>
    </listener> 
...
</web-app> 
```

我在 myservices 项目中有几个文件被注释为 spring @Component、@Service、@Configuration，但是当我在 Eclipse 中运行 GWT 应用程序时，组件扫描不会拾取这些文件。作为测试，我尝试在 myclient 项目中放置一个 @Component 并成功创建。

我相信应用程序启动期间的以下日志条目表明了问题的根源

```
org.springframework.core.io.support.PathMatchingResourcePatternResolver - Resolved location pattern [classpath*:com/myproject/myservices/**/*.class] to resources [] 
```

myclient 项目的位置模式解析为类路径上的所有资源，但对于 myservices 没有找到资源。

我尝试构建 myservices 项目 JAR 并将这个 JAR 放入 myclient 项目的 src/main/webapp/WEB-INF/lib 文件夹中。当我这样做时，组件扫描工作。但是对于开发，我不想每次对 myservices 项目进行更改时都必须构建和复制 JAR。我想组件扫描应该在通过 POM 引用的项目上工作，而不必构建该项目，但经过大量试验，我无法让它工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T06:02:30.687

确保在部署程序集中（右键单击您的 Web 项目并选择 myclient 项目的“部署程序集”，它被配置为部署由 myservices 项目输出的 jar。如果您使用的是 maven，m2e，m2e-wtp项目配置器应自动执行此部署程序集设置。

一旦您正确配置了部署程序集设置，现在当您使用 Eclispe 服务器适配器发布机制将项目部署到您的服务器时，应该部署所有内容，并且 myservices jar 将被放置在您的 myclient 项目的正确位置。

但请确保您安装了最新版本的[m2e-wtp](http://dev.eclipse.org/mhonarc/lists/m2e-users/msg03820.html)。这样，您在 pom.xml 和部署程序集中的配置将得到正确配置。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-28T16:30:14.213

尝试将您的 application-context.xml 拆分为 2 个单独的文件：

```
<context-param>
  <param-name>contextConfigLocation</param-name>
  <param-value>classpath:service-context.xml,classpath:client-context.xml</param-value>
</context-param> 
```

myservices/src/main/resources/service-context.xml：

```
<context:component-scan base-package="com.myproject.myservices"/> 
```

myclient/src/main/resources/client-context.xml：

```
<context:component-scan base-package="com.myproject.myclient"/> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-04T11:50:57.047

请检查以下事项：

1.  您的服务项目是“仅”作为 jar 存在还是整个项目都可以通过工作区解析获得。这可以通过 maven-context-menue （禁用/启用 Workspaceresolution）进行检查
2.  src/main/webapp下的webapp的布局还可以。但是我是否正确地认为所有课程都复制在那里？如果是这样，您应该确保所有内容都在目标目录下。所以请检查一个maven调用“clean package”是否在目标文件夹下生成了一个webappstructure，并且所有需要的库（例如myservice）都存在于*target\$your-webarchivename\WEB-INF\lib下*
    1.  检查 myservice pom.xml 中的包装是否设置为 jar（你可能有这个，对吧？）

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-05T12:23:13.760

很明显，您的服务 jar 不包含在您的客户端项目的构建路径中。这是唯一的根本原因。

确保3点：

1.  您已在具有正确 pom.xml 的服务项目下运行*mvn clean install 。*
2.  您已在客户端项目下运行*mvn eclipse:eclipse 。*这将拉出你所有的依赖项目。
3.  检查您的客户端 Eclipse 项目的构建路径对话框。列表中有您的服务 jar 吗？**确保这**

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-27T10:37:35.853

尝试这个 ：

```
<context:component-scan base-package="com.myproject"/> 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-04T03:14:48.940

你最好看看这个教程 **[http://fusesource.com/docs/framework/2.2/deploy_guide/CXFServletDeploySpring.html](http://fusesource.com/docs/framework/2.2/deploy_guide/CXFServletDeploySpring.html)**

# javascript - 更改 yeoman 的应用程序文件夹名称

> ID：15058205
> 
> 赞同：7
> 
> 时间：2013-02-25T00:02:57.810
> 
> 标签：javascript, yeoman

是否有任何配置文件或我们可以在 yeoman 中更改的内容将“app”目录设置为其他内容？我使用 Zend Framework 2，它使用“public”目录，因为根 yeoman 使用“app”。

我看到我可以在 Grunt.js 文件中使用目录名称，但是在 yeoman 中重置默认值会很好。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-25T09:00:54.463

您想更改`Gruntfile.js`设置，因为从 1.0 版开始，这里列出了所有内容，并且构建仅由 Grunt 完成。

[正如他们在网站](http://yeoman.io/)上所写：

> Yo 搭建一个新应用程序，编写您的 Grunt 配置并提取您构建时可能需要的相关 Grunt 任务。
> 
> Bower 用于依赖管理，因此您不再需要手动下载和管理脚本。
> 
> 得益于 Yeoman 团队和 grunt-contrib 策划的任务的帮助，Grunt 用于构建、预览和测试您的项目。

我不记得旧设置在 gruntfile 中的位置，但在 1.0 版中位于第 11 行，如下所示：

```
// configurable paths
var yeomanConfig = {
    app: 'app',
    dist: 'dist'
}; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-06-10T00:52:34.677

使用 1.4.7 版本：

1）对于应用程序目录：

Gruntfile.js：

```
var appConfig = {
    app: require('./bower.json').appPath || 'app',
    dist: 'www'
}; 
```

索引.html：

```
<!-- build:js({.tmp,app}) scripts/scripts.js --> 
```

bower.json：

```
"appPath": "app" 
```

测试/karma.conf.js

```
'app/scripts/**/*.js' 
```

2) 对于 dist 目录：

仅在 Gruntfile.js 中

```
var appConfig = {
    app: require('./bower.json').appPath || 'app',
    dist: 'www'
}; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-07-28T10:37:03.113

对于 Angular 生成器 0.9.5 版适用于我：

*   将文件夹名称从应用更改为您需要的任何内容，例如“clientapp”
*   编辑 gruntfile.js，更改 appConfig 应用程序：'clientapp'
*   编辑 bower.json 更改行“appPath”：“clientapp”
*   在重命名的文件夹中找到 index.html，然后在评论中找到并编辑部分

    build:js({.tmp,clientapp}) 脚本/scripts.js

*   在文件夹 test 中找到 karma.conf.js 并在文件部分将应用程序更改为“clientapp”

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-04T12:02:36.997

更新到 1.0 并编辑你的 Gruntfile.js

```
// configurable paths
var yeomanConfig = {
    **app: 'app',**
    dist: 'dist'
}; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-03-24T12:47:09.820

很抱歉恢复了这个，但是我发现了一些需要更改的位置，并且觉得我可以增加一些价值：

我使用 Laravel，它使用应用程序和公用文件夹，并且从未使用过 zend，但我假设应该应用类似的东西。

将 Yeoman 生成的应用程序安装到`yeoman`：

**/[zendapproot]/**

```
mkdir yeoman && cd yeoman
yo angular [appName] 
```

**/[zendapproot]/约曼/**

```
append contents of `/[zendapproot]/yeoman/.gitignore` into `/[zendapproot]/.gitignore`
move everything except the app directory into /[zendapproot]/ 
```

**编辑 .bowerrc**

```
{
"directory": "yeoman/app/bower_components"
} 
```

**编辑 Gruntfile.js**以更改 app 和 dist 文件夹

```
yeoman: {
  // configurable paths
  app: require('./bower.json').appPath || 'yeoman',
  dist: 'public/assets'
}, 
```

**编辑 karma.conf.js**

```
files: [
  'yeoman/app/bower_components/angular/angular.js',
  'yeoman/app/bower_components/angular-mocks/angular-mocks.js',
  'yeoman/app/bower_components/angular-resource/angular-resource.js',
  'yeoman/app/bower_components/angular-cookies/angular-cookies.js',
  'yeoman/app/bower_components/angular-sanitize/angular-sanitize.js',
  'yeoman/app/bower_components/angular-route/angular-route.js',
  'yeoman/app/scripts/*.js',
  'yeoman/app/scripts/**/*.js',
  'yeoman/app/test/mock/**/*.js',
  'yeoman/app/test/spec/**/*.js'
], 
```

运行`grunt test`以确保测试正常工作。

运行`grunt serve`以在测试环境中为 webapp 提供服务

运行`grunt`构建应该将应用程序存储在`public/assets`

现在这是我不确定的部分......

目前，我从in中删除`htmlmin`并停止 html 缩小并停止重命名资产。`rev``grunt.registerTask('build'...``Gruntfile.js`

然后，我从 Laravel（在您的情况下为 Zend）打开我的主视图模板，并将脚本和样式更改为 grunt 构建的 index.html 中提供的内容`/public/assets/index.html`

如果有人有更好的方法来解决上述问题，请分享。例如，关于将重命名的资产文件名传递给 zend/laravel 应用程序视图模板。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-01-22T11:07:21.417

创建新项目时（至少对于 Angular），有一个 cmd 行 arg 用于：--appPath=[newPath]:

```
yo angular --appPath=public 
```

**如何更改 dist 文件夹名称：**

此外，对于最终在这里寻找如何更改 dist 文件夹名称的任何人（就像我所做的那样）：我找不到 cmd 行 arg，因此您需要在创建项目后在第 21 行手动编辑**Gruntfile.js**，但在运行 grunt 之前：

```
// Configurable paths for the application
var appConfig = {
  app: require('./bower.json').appPath || 'app',
  //dist: 'dist'
  dist: 'public' 
}; 
```

# php - 我们不能制作单独的文件来检查登录状态，其中包括顶部的 session_start() 并在必要时调用？

> ID：15058206
> 
> 赞同：0
> 
> 时间：2013-02-25T00:02:59.913
> 
> 标签：php

我所做的是创建了一个 php 代码来检查登录状态（文件名：login_status）：

```
<?php
session_start()
// code body to check if session or cookies are set
// If not, then variable $loggedin = false, else true
// if true then redirect to profile page
// if false then redirect to login page
?> 
```

但是，当我在任何代码上方包含此文件时`include_once("login_status.php");`，php 脚本会停止执行`(if $loggedin == false)`，而不是重定向到登录页面，并且如果`$loggedin == true`将其重定向到个人资料页面。

我所做的是，我没有使用`include_once("login_status.php");`，而是简单地复制了`login_status`我需要的任何页面上方的代码。之后它工作正常。

我无法弄清楚 include_once 有什么不同？

然而，它确实`session_start()`应该在顶部，在任何事情之前。但是这`include_once`有什么不同吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T05:35:01.680

> 确实 session_start() 应该在最前面，在任何事情之前。

不是在任何事情之前，而是*在任何输出之前*。

另外，请让自己熟悉错误报告并进行适当的设置，以便能够在屏幕上（在开发服务器上）或记录（在生产上）看到错误 - 因此，无需*猜测*任何内容。

在开发服务器上更改 php.ini

```
error_reporting = E_ALL
display_errors = On 
```

生产

```
error_reporting = E_ALL
display_errors = Off
log_errors = On 
```

# pdf - pdftk 不会解压数据流

> ID：15058207
> 
> 赞同：10
> 
> 时间：2013-02-25T00:03:02.053
> 
> 标签：pdf, pdftk

我一直在尝试使用 pdftk 来检查 Nitro Reader 创建的压缩 pdf 流中的信息，但 pdftk 不会压缩流。它不会产生任何错误，但除了重新排序 pdf 对象之外，它似乎没有做任何事情。 [这](https://docs.google.com/file/d/0BzUoxmxbHYQwTFVzb3ptUDZLU1U/edit?usp=sharing)是其中一个 pdf 的最小示例。

```
 pdftk test.pdf output test-d.pdf uncompress 
```

当我在其他 pdf 上尝试 pdftk 时，它似乎工作正常。如果我手动提取数据流并在 Python 中使用 zlib 解压缩它们，它们会正确解压缩。此外，如果我在 Adob​​e Reader 中打开 pdf 并重新保存，pdftk 可以在生成的 pdf 上正常工作。

我已尽我所能手动检查了 Nitro pdf，它似乎是一个有效的 pdf。我对这里发生的事情感到非常困惑。

作为问题的背景，我有数百个这样的 pdf，我正在尝试搜索某些关键字，如果我可以自动解压缩，我应该能够做到这一点。

pdftk 版本 1.45
Windows 7 Home Premium SP1
Nitro Reader 2 版本 2.5.0.36

谢谢，詹姆斯

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-22T22:59:56.883

如果你不依附`pdftk`，你可以使用[qpdf](http://sourceforge.net/projects/qpdf/)。例如，您可以使用：

```
$ qpdf --stream-data=uncompress input.pdf output.pdf 
```

对于它的价值，如果有 blob，它们仍然可能显示为二进制。虽然，流的其余部分将被解压缩（使用`pdftk`或`qpdf`）。 `qpdf`允许您解压缩所有或仅解压缩流。

从`qpdf`手册：

> 当指定 --stream-data=uncompress 时，qpdf 将尝试删除它支持的任何无损过滤器。这包括 /FlateDecode、/LZWDecode、/ASCII85Decode 和 /ASCIIHexDecode。这对于检查各种流的内容非常有用。

同样的情况也可能发生在`pdftk`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-08-26T06:40:34.283

我从开发人员那里收到了这个问题的答案。事实证明这是`pdftk`处理`/DecodeParms [null]`线路的方式中的一个错误。

如果解码参数为空，作者可以省略该`/DecodeParms`行，但兼容的读者应该以任何方式理解它。我试用了新版本，`pdftk`问题似乎解决了。

# c# - 由于未加密的流量，PowerShell 远程命令失败

> ID：15058209
> 
> 赞同：2
> 
> 时间：2013-02-25T00:03:13.083
> 
> 标签：c#, powershell, exchange-server, powershell-2.0

以下代码运行：

```
 SecureString password = new SecureString();
        string runasUsername = "USERNAME";
        string runasPassword = "PASSWORD";

        string liveIdconnectionUri = "http://EXCHANGE_SERVER/PowerShell";

        foreach (char x in runasPassword)
        {
            password.AppendChar(x);
        }

        PSCredential credential = new PSCredential(runasUsername, password);

        // Set the connection Info
        WSManConnectionInfo connectionInfo = new WSManConnectionInfo((new Uri(liveIdconnectionUri)), "http://schemas.microsoft.com/powershell/Microsoft.Exchange",
        credential);

        connectionInfo.AuthenticationMechanism = AuthenticationMechanism.Basic; //AuthenticationMechanism.Default;

        // create a runspace on a remote path
        // the returned instance must be of type RemoteRunspace

        Runspace runspace = System.Management.Automation.Runspaces.RunspaceFactory.CreateRunspace(connectionInfo);

        PowerShell powershell = PowerShell.Create();
        PSCommand command = new PSCommand();

        command.AddCommand("Enable-Mailbox");
        command.AddParameter("Identity", "first.last");
        command.AddParameter("Alias", "Fist Last");

        powershell.Commands = command;
        try
        {
            // open the remote runspace
            runspace.Open();
            // associate the runspace with powershell
            powershell.Runspace = runspace;
            // invoke the powershell to obtain the results
            var result = powershell.Invoke();
        }
        catch (Exception ex)
        {

            Console.WriteLine(ex.Message);
        }
        finally
        {
            // dispose the runspace and enable garbage collection
            runspace.Dispose();
            runspace = null;
            // Finally dispose the powershell and set all variables to null to free
            // up any resources.
            powershell.Dispose();
            powershell = null;
        }

        Console.WriteLine("done");
        Console.Read(); 
```

异常抛出：

> 连接到远程服务器失败并显示以下错误消息：WinRM 客户端无法处理请求。当前在客户端配置中禁用了未加密的流量。更改客户端配置并再次尝试请求。有关详细信息，请参阅 about_Remote_Troubleshooting 帮助主题。

我已经设置了基本身份验证，允许未加密的流量。

我在这里尝试了解决方案[powershell v2 remoting - How do you enable unencrypted traffic](https://stackoverflow.com/questions/1469791/powershell-v2-remoting-how-do-you-enable-unecrypted-traffic)，没有运气。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T01:02:21.197

对不起，挣扎了很长时间，不断改变可能的组合，终于可以使用了：

`AuthenticationMechanism`应该是`AuthenticationMechanism.Default`，不是（这`AuthenticationMechanism.Basic`很奇怪）。

最终的工作版本是：

```
 SecureString password = new SecureString();
        string runasUsername = "USERNAME";
        string runasPassword = "PASSWORD";

        string liveIdconnectionUri = "http://EXCHANGE_SERVER/PowerShell";

        foreach (char x in runasPassword)
        {
            password.AppendChar(x);
        }

        PSCredential credential = new PSCredential(runasUsername, password);

        // Set the connection Info
        WSManConnectionInfo connectionInfo = new WSManConnectionInfo((new Uri(liveIdconnectionUri)), "http://schemas.microsoft.com/powershell/Microsoft.Exchange",
        credential);

        connectionInfo.AuthenticationMechanism = AuthenticationMechanism.Default; //AuthenticationMechanism.Default;

        // create a runspace on a remote path
        // the returned instance must be of type RemoteRunspace

        Runspace runspace = RunspaceFactory.CreateRunspace(connectionInfo);

        PowerShell powershell = PowerShell.Create();
        PSCommand command = new PSCommand();

        command.AddCommand("Enable-Mailbox");
        command.AddParameter("Identity", "MAIL_USER_ID_HERE");

        powershell.Commands = command;
        try
        {
            // open the remote runspace
            runspace.Open();
            // associate the runspace with powershell
            powershell.Runspace = runspace;
            // invoke the powershell to obtain the results
            var result = powershell.Invoke();
            if (result.Count > 0)
                Console.WriteLine("sucessful!");
            else
                Console.WriteLine("failed!");
        }
        catch (Exception ex)
        {
            Console.WriteLine(ex.Message);
        }
        finally
        {
            // dispose the runspace and enable garbage collection
            runspace.Dispose();
            runspace = null;
            // Finally dispose the powershell and set all variables to null to free
            // up any resources.
            powershell.Dispose();
            powershell = null;
        }

        Console.WriteLine("done");
        Console.Read(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-19T19:27:43.950

我遇到过同样的问题。还应该指出的是，对于托管 PowerShell 实例的 EXCHANGE_SERVER 上的虚拟目录，您应该在 IIS 管理器中将**SSL 设置**配置为“接受”而不是“需要 SSL”，假设您仍然拥有默认的自签名证书安装在服务器上。加上“ **AuthenticationMechanism.Default** ”设置消除了我在该行遇到的无数异常：

```
runspace.Open(); 
```

此外，如果您想在本地对此进行单元测试，您应该在桌面上[安装 Exchange 管理工具。](http://technet.microsoft.com/en-us/library/bb232090%28v=exchg.150%29.aspx)

...或者，如果您没有 Windows 8，请尝试以下方法： [Exchange 2010 中的 PowerShell 托管代码](http://blogs.msdn.com/b/akashb/archive/2010/03/25/how-to-migrating-exchange-2007-powershell-managed-code-to-work-with-exchange-2010.aspx)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-04-20T18:33:00.553

AuthenticationMechanism.Default 为我工作，但导致另一个错误消息......

> WinRM 客户端无法处理该请求。默认身份验证可在以下条件下与 IP 地址一起使用：传输为 HTTPS 或目标位于 TrustedHosts 列表中，并且提供了显式凭据。使用 winrm.cmd 配置 TrustedHosts。请注意，TrustedHosts 列表中的计算机可能未经过身份验证。有关如何设置 TrustedHosts 的更多信息，请运行以下命令：winrm help config。有关详细信息，请参阅 about_Remote_Troubleshooting 帮助主题。

请注意，EXCHANGE_SERVER 必须是 DNS 名称，而不是我使用的 IP 地址。我还必须在客户端和 Exchange 服务器上设置 AllowUnencrypted 配置设置。有关该设置的详细信息，请参阅下面的链接。

[powershell v2 远程处理 - 如何启用未加密的流量](https://stackoverflow.com/questions/1469791/powershell-v2-remoting-how-do-you-enable-unencrypted-traffic)

# c++ - recvfrom() 不返回接收到的字节数

> ID：15058210
> 
> 赞同：1
> 
> 时间：2013-02-25T00:03:22.480
> 
> 标签：c++, windows, sockets, udp

这是一个非常基本的问题（希望如此），关于在 windows、c++ 中使用 recvfrom() 。

我正在实现一个非常基本的 UDP 函数，它发送一条消息，然后接收一条字符消息作为回报。当我调用 recvfrom() 时，我得到了相应的消息，但该函数不返回接收到的字节数（字符）。相反，它返回 0。片段：

```
sendto(sock, "10000;1;Chris\0", 14, 0, 
   (struct sockaddr FAR *) &sin, sizeof(sin));

if(nchars = recvfrom(sock, buf, LINELEN, 0, NULL, NULL) < 0)
    errexit("recvfrom failed: error %d\n", GetLastError());
buf[nchars] = '\0'; 
```

我的返回消息需要附加一个空字符，但 nchars 一直返回为 0，这使得这很困难。任何想法为什么 recvfrom() 不会返回接收到的字节数？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-25T00:12:48.227

检查 if 语句中的运算符优先级。你想要的是

```
if ((nchars = recvfrom(sock, buf, LINELEN, 0, NULL, NULL)) < 0) 
```

开心的捂脸，我猜。:)

# javascript - 每秒 40 次遍历每个 DOM 元素会导致速度较慢的计算机出现性能问题吗？

> ID：15058212
> 
> 赞同：1
> 
> 时间：2013-02-25T00:03:25.347
> 
> 标签：javascript, jquery, html, performance

```
setInterval(function(){
    $("*").each(function(obj){
        if ($(this).data("x"))
            $(this).css({left:$(this).data("x")()});
        //... more code for y, w, h, x2, y2, etc...
    }
},25); 
```

它可以在我的计算机上完美运行——我担心的是：如果不进行优化，这段代码是否会导致计算机性能较差的用户的性能显着下降，因为它每秒迭代每个 DOM 元素 40 次？还是可以接受？

注意：重点是更容易创建一个协调对象位置的函数，例如：`$(myObj).data("x",function(){ return sin(Date.now()/1000)*50; })`应该使对象摆动。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T00:11:43.833

它肯定会影响性能，特别是如果你有很多很多元素。也是每秒40次？这似乎很多。我不确定使用选择器会快多少，因为这也可能很昂贵。

也许尝试`$("[data-x]")`作为您的选择器，或者使用更具体的父选择器： `$("#container").find('[data-x]')`

# java - Java GUIS 面板

> ID：15058214
> 
> 赞同：1
> 
> 时间：2013-02-25T00:03:29.727
> 
> 标签：java, swing, jframe

我有点好奇你将如何设法替换行 = 4 和列 = 4 的网格上的某个图片。假设我有 4 张图片，其中一张是空白的，如何继续选择 1 张随机图片并使其能够放置在任何 row[] 和 col[] 上。

*   我需要用双嵌套的for循环做一个布尔逻辑吗？
*   这只是出于好奇，因为在网上看到了一个问题，我尝试尝试但失败了，哈哈。谢谢你的时间。

# replace - 在记事本++中删除具有不同结尾的重复项

> ID：15058216
> 
> 赞同：0
> 
> 时间：2013-02-25T00:04:06.673
> 
> 标签：replace, notepad++

嗨，我如何删除具有不同结尾的重复项？

我有一个像这样的大清单：

```
1.2.3.4:12345
1.2.3.4:54321
1.2.3.4:41873
1.2.3.4:48138

```

我想删除所有这些，除了第一个`1.2.3.4:12345`。这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T00:47:33.973

这是一种删除文件中“：”之前的所有值的重复行的方法。

搜索：

```
([^:]*)(:[0-9]+)\r\n(.*)^\1:\w+(\r\n|\Z) 
```

用。。。来代替：

```
\1\2\r\n\3 
```

确保搜索模式为“正则表达式”并选中“.matches newline”。

您必须单击“全部替换”，直到找不到匹配项。或者将它的一次迭代记录为宏，并根据需要多次运行。

# python - 试图在我的打印结果周围加上引号

> ID：15058217
> 
> 赞同：-1
> 
> 时间：2013-02-25T00:04:10.243
> 
> 标签：python

```
file = open('english.txt','r') 
vowels = ('a', 'e', 'i', 'o', 'u')

for text in file:
    translated= []
    lines = text.split()
    print(' '.join(lines))
    print("Translated to pig latin becomes:")
    for words in lines:
        if words[0] in vowels:
            words = words + 'yay'
        else:
            while words[0] not in vowels:
                words = words[1:] + words[0]
            words = words + 'ay'
        translated.append(words)
    words = ' '.join(translated)
    print(words, '\n') 
```

我得到的结果是：

```
this is a statement
Translated to pig latin becomes:
isthay isyay ayay atementstay 

its going through python
Translated to pig latin becomes:
itsyay oinggay oughthray onpythay 

and this is the result
Translated to pig latin becomes:
andyay isthay isyay ethay esultray 

the end
Translated to pig latin becomes:
ethay endyay 
```

我想在每一节中都有第一行和第三行来引用它们。例如“结束”“ethay endyay”

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T00:09:12.567

只需添加引号：

```
print('"' + words + '"\n') 
```

或使用格式：

```
print('"{}"\n'.format(words)) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T00:10:58.157

`print()`只需用引号将相应语句中的对象括起来：

```
file = open('english.txt','r') 
vowels = ('a', 'e', 'i', 'o', 'u')

for text in file:
    translated= []
    lines = text.split()
    print('"'+' '.join(lines)+'"') # Here
    print("Translated to pig latin becomes:")
    for words in lines:
        if words[0] in vowels:
            words = words + 'yay'
        else:
            while words[0] not in vowels:
                words = words[1:] + words[0]
            words = words + 'ay'
        translated.append(words)
    words = ' '.join(translated)
    print('"'+words+'"', '\n') # And here 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-25T00:09:14.063

试试这样：

```
print('"{}"\n'.format(words)) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-25T00:10:55.800

```
def quoted(s):
    return '"%s"' % s

print(quoted(words), '\n') 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-25T00:07:34.853

您可以像这样添加引号：

```
 print('"', words, '"', '\n') 
```

# android - 为更新版本设置 APK 扩展文件

> ID：15058222
> 
> 赞同：2
> 
> 时间：2013-02-25T00:04:20.403
> 
> 标签：android, apk, apk-expansion-files

我需要一些关于使用 APK 扩展文件的说明。

我已经测试并将首次使用 APK 扩展文件发布我的 Android 应用程序。

我的app versionCode是61 我的主扩展文件是main.61.com.my.package.obb 没有补丁文件。

在计划我的第一次更新扩展文件时，我有点不清楚扩展文件的编号以及我将加载到 Google Play 的内容。

我的下一个版本 versionCode 将是 62 主扩展文件不会有任何变化，但我需要主文件。我使用 main.61.com.my.package.obb 吗？会有一个补丁文件：patch.62.com.my.package.obb。

任何澄清将不胜感激。

jb

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T20:24:36.057

请参阅谷歌文档中给出的明确解释。

```
<expansion-version> 
```

这是一个整数，与第一次与扩展关联的 APK 的版本代码相匹配（它与应用程序的 android:versionCode 值匹配）。

之所以强调“第一个”，是因为尽管开发者控制台允许您将上传的扩展文件与新的 APK 重复使用，但扩展文件的名称不会改变——它会保留您第一次上传文件时应用的版本。

你是对的，主扩展文件的文件名不应该有任何变化。

# django - 在 django 中捕获 No-Internet-Connection 错误

> ID：15058225
> 
> 赞同：0
> 
> 时间：2013-02-25T00:04:32.410
> 
> 标签：django, sockets, email

我目前正在使用 django 发送电子邮件，但问题是，当我在没有互联网连接的本地主机上工作时，我尝试发送电子邮件。我`[Errno 11004] getaddrinfo`失败了，这是可以理解的。问题是我想知道是否有办法捕捉错误，以便我可以正确管理它们？有办法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T00:17:42.880

在调用 sendmail 函数的地方试试这个。

```
import socket

try:
   ...
except socket.gaierror:
   pass 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T01:40:09.903

与其尝试发送电子邮件然后在没有互联网连接的情况下捕获本地主机的错误，不如在开发过程中不要尝试发送电子邮件。您可以使用该`django.settings.DEBUG`选项来确定是否应发送电子邮件。

这是一个示例，说明如何将电子邮件路由到文件以进行测试或在没有 Internet 连接的情况下运行。

```
from django.core import mail
from django import settings
import tempfile

# Change SAVE_EMAIL_TO_FILE to be appropriate for your setup.  It could
# be based on settings.DEBUG or some other indication that you're running
# without an internet connection.
SAVE_EMAIL_TO_FILE = settings.DEBUG

def my_send_mail(*args, **kwargs):
    if SAVE_EMAIL_TO_FILE:
        # No emails during development.  Save to a file instead.
        with tempfile.NamedTemporaryFile(delete=False) as email_file:
            email_file.write("{args}\n{kwargs}\n".format(
                args=str(args),
                kwargs=str(kwargs)))
    else:
        # Production environment.
        mail.send_mail(*args, **kwargs) 
```

这样做的好处是，如果无法发送电子邮件，您将始终在生产机器上或在连接互联网的机器上进行开发期间遇到异常。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-25T02:33:18.980

```
try:

except Exception, e:
    code = '000'
    if hasattr(e, 'code'):
        code = e.code
        msg = 'No message returned from the server'
    if hasattr(e, 'msg'):
        msg = e.msg
    messages.error(
        request,
            'Error connecting to server. ERROR: {0} {1}'.format(code, msg)
    return '' 
```

# java - XML解析：使用digester检索xml中的多行

> ID：15058229
> 
> 赞同：0
> 
> 时间：2013-02-25T00:05:14.693
> 
> 标签：java, xml, apache-commons-digester

在解析像下面这样的 xml 文件时，我想获取一个特定 ID 的电话号码列表。我正在使用 Digester 来执行此操作。但我不明白如何添加调用方法或创建对象。谁能帮我有了这个。我的 xml 文件包含 1000 种类型

```
<?xml version='1.0' encoding='utf-8'?>
<address-book>
<contact type="individual">
    <id>50</id>
    <city>New York</city>
    <province>NY</province>
    <postalcode>10013</postalcode>
    <country>USA</country>
<address>
    <telephone>1-212-345-6789</telephone>
<telephone>1-212-345-6789</telephone>
<telephone>1-212-345-6789</telephone>
<telephone>1-212-345-6789</telephone>
</address>
</contact>
<contact type="business">
    <id>52</id>
    <city>Zagreb</city>
    <province></province>
    <postalcode>10000</postalcode>
    <country>Croatia</country>
<address>
    <telephone>1-212-345-6789</telephone>
<telephone>1-212-345-6789</telephone>
<telephone>1-212-345-6789</telephone>
<telephone>1-212-345-6789</telephone>
</address>
</contact> 
```

另外，当我获得所需的 ID 时，我应该如何停止解析。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T01:41:05.130

尽管问题是特定于使用 apache-commons-digester 的，但这可以通过 XML 函数系列中已经可用的大量库来解决 - 即 SAX 解析器与 XPath 搜索相结合。如果要搜索的内容是已知的，那么 XPath 查询可以相对有效地查找数据，而不是对数据进行暴力破解。否则，如果为了索引或其他目的而遍历整个数据集，再次建议使用简单的 SAX 解析器并循环遍历元素（同样可能通过 //MyElement 类型 XPath 查询），然后对于每个实例，将值传递给用于索引或任何操作的功能。apache-commons-digester 对于需要的东西可能过于复杂和/或缓慢。

# cuda - 并发内核和 CUDA 流的行为

> ID：15058238
> 
> 赞同：0
> 
> 时间：2013-02-25T00:06:43.897
> 
> 标签：cuda, parallel-processing, nvidia

我想知道，如果我在一个流中运行一个包含 10 个 1000 个线程块的内核来分析数据数组，然后启动一个需要 10 个 1000 个线程块的内核来分析第二个流中的另一个数组，会发生什么发生？

我卡上的非活动线程是否将开始分析我的第二个阵列的过程？还是第二个流将被暂停，直到第一个流必须完成？

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T01:36:37.640

一般来说，如果内核是从同一应用程序的不同（非默认）流发出的，并且[满足执行并发内核的所有要求](http://docs.nvidia.com/cuda/cuda-c-programming-guide/index.html#asynchronous-concurrent-execution)，并且有足够的可用资源（尤其是 SM，我想这就是你意思是“非活动线程”）来调度两个内核，那么第二个内核的一些块将开始沿着已经在执行的第一个内核的块一侧开始执行。这可能发生在第一个内核的块已经调度的同一个 SM 上，也可能发生在其他未占用的 SM 上，或两者兼有（例如，如果您的 GPU 有 14 个 SM，则工作分配器将分配 10 个块10 个 SM 上的第一个内核，此时剩下 4 个未使用。）

另一方面，如果你的内核有线程块需要 32KB 的共享内存使用，而你的 GPU 有 8 个 SM，那么第一个内核的线程块将有效地“用完”这 8 个 SM，而第二个内核的线程块不会开始执行，直到第一个内核的一些线程块“耗尽”，即完成并退休。这只是可能抑制并发执行的资源利用示例之一。当然，如果你启动的内核每个都有很多线程块（比如 100 个或更多），那么第一个内核将主要占用机器，而第二个内核在第一个内核基本完成之前不会开始执行。

如果您在右上角搜索“cuda 并发内核”，您会发现许多问题突出了与观察并发内核执行相关的一些挑战。

# c# - 使用函数的 LINQ 查询中的 Where 子句

> ID：15058243
> 
> 赞同：1
> 
> 时间：2013-02-25T00:06:50.227
> 
> 标签：c#, linq

我有一段代码：

```
IList<Opportunity> filteredOpportunityProperties = new List<Opportunity>();
List<LookupWithIntId> selectedProperties = opportunityFilter.PropertyTypes;
List<string> propertyTypes = selectedProperties.Select(item => item.Name).ToList();

opportunities.Where((item) =>
    {
        string productType = item.Properties[0].ProductType;
        bool propertyMatch = propertyTypes.Any(propTypes => productType.Contains(propTypes));
        if (propertyMatch) select item;
    }); 
```

如果条件匹配，我希望选择该项目。但是，我收到错误：

> 嵌入语句不能是声明或标签语句

有什么建议么！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-25T00:09:40.557

在 where 子句中，更改此行：

```
if(propertyMatch) select item; 
```

对此：

```
return propertyMatch; 
```

如果谓词结果为真，where 子句将返回项目，因此您只需要返回布尔结果。

# windows - Coffeescript 的路径变量在 Windows 上的 sublime 中构建

> ID：15058244
> 
> 赞同：0
> 
> 时间：2013-02-25T00:06:55.643
> 
> 标签：windows, coffeescript, sublimetext2

所以我有这个构建文件

```
{
    "cmd": ["coffee", "-c", "$file"],
    "selector": "source.coffee",
    "path": "C:\\Users\\Miles\\node_modules\\coffee-script\\bin",
    "working_dir": "$project_path"
} 
```

它不断返回错误

[错误2] 系统找不到指定的文件

我已经找了几天，我能找到的只是基于 unix 的路径。

我知道这很可能是微不足道的，但它已经有一段时间了

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-25T18:32:28.527

### 经过大量的修补后，这工作正常。

```
{
    "cmd": ["coffee.cmd", "-c", "$file"],
    "selector": "source.coffee",
    "file_regex": "^(...*?):([0-9]*):?([0-9]*)",
    "path": "$HOME/bin:/usr/local/bin:$PATH",
    "working_dir": "$project_path"
} 
```

# scheme - 反向列表 - 方案

> ID：15058246
> 
> 赞同：6
> 
> 时间：2013-02-25T00:07:19.210
> 
> 标签：scheme, racket

我正在尝试反转列表，这是我的代码：

```
(define (reverse list)
  (if (null? list) 
     list
      (list (reverse (cdr list)) (car list)))) 
```

所以如果我输入 (reverse '(1 2 3 4))，我希望它显示为 (4 3 2 1)，但现在它没有给我那个。我做错了什么，我该如何解决？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-02-25T00:16:19.903

遍历列表的自然方式并不是解决此问题的最佳方式。正如@lancery`append`指出的已接受答案中所建议的那样，使用 也不是一个好主意-无论如何，如果您正在学习 Scheme 中的方式，最好自己尝试实现该解决方案，我会告诉您该怎么做，但首先提示 - 不要`list`用作参数名称，这是一个内置过程，您会覆盖它。使用其他名称，例如，`lst`。

通过辅助过程来反转列表更简单，该辅助过程在结果的*头部*累积每个元素的结果，这将具有反转列表的效果 - 顺便说一下，辅助过程是尾递归的。以下是总体思路，请填空：

```
(define (reverse lst)
  (<???> lst '()))                       ; call the helper procedure

(define (reverse-aux lst acc)
  (if <???>                              ; if the list is empty
      <???>                              ; return the accumulator
      (reverse-aux <???>                 ; advance the recursion over the list
                   (cons <???> <???>)))) ; cons current element with accumulator 
```

当然，在现实生活中你不会`reverse`从头开始实现，有一个内置的[过程](http://docs.racket-lang.org/reference/pairs.html#%28def._%28%28lib._racket%2Fprivate%2Flist..rkt%29._reverse%29%29)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-10-17T04:02:26.770

使用命名的尾递归方法`let`：

```
(define (reverse lst)
  (let loop ([lst lst] [lst-reversed '()])
    (if (empty? lst)
        lst-reversed
        (loop (rest lst) (cons (first lst) lst-reversed))))) 
```

这与在 Oscar 的答案中使用带有累加器参数的辅助函数基本相同，其中的`loop`绑定`let`使 let 成为您可以调用的内部函数。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-02-14T21:43:33.670

这是一个递归过程，描述了在 Scheme 中反转列表的迭代过程（尾递归）

```
(define (reverse lst)
  (define (go lst tail)
    (if (null? lst) tail
        (go (cdr lst) (cons (car lst) tail))))
  (go lst ()))) 
```

使用替换模型 (reverse (list 1 2 3 4))

```
;; (reverse (list 1 2 3 4))                                                                                                                           
;; (go (list 1 2 3 4) ())                                                                                                                             
;; (go (list 2 3 4) (list 1))                                                                                                                         
;; (go (list 3 4) (list 2 1))                                                                                                                         
;; (go (list 4) (list 3 2 1))                                                                                                                         
;; (go () (list 4 3 2 1))                                                                                                                             
;; (list 4 3 2 1) 
```

这是一个递归过程，描述了在 Scheme 中反转列表的递归过程（不是尾递归）

```
(define (reverse2 lst)
  (if (null? lst) ()
    (append (reverse2 (cdr lst)) (list (car lst)))))

(define (append l1 l2)
  (if (null? l1) l2
      (cons (car l1) (append (cdr l1) l2)))) 
```

对 (reverse2 (list 1 2 3 4)) 使用替换模型

```
;; (reverse2 (list 1 2 3 4))                                                                                                                          
;; (append (reverse2 (list 2 3 4)) (list 1))                                                                                                          
;; (append (append (reverse2 (list 3 4)) (list 2)) (list 1))                                                                                          
;; (append (append (append (reverse2 (list 4)) (list 3)) (list 2)) (list 1))                                                                          
;; (append (append (append (append (reverse2 ()) (list 4)) (list 3)) (list 2)) (list 1))                                                              
;; (append (append (append (append () (list 4)) (list 3)) (list 2)) (list 1))                                                                         
;; (append (append (append (list 4) (list 3)) (list 2)) (list 1))                                                                                     
;; (append (append (list 4 3) (list 2)) (list 1))                                                                                                     
;; (append (list 4 3 2) (list 1))                                                                                                                     
;; (list 4 3 2 1) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-01T10:10:19.097

这是使用`build-list`过程的解决方案：

```
(define reverse
  (lambda (l)
    (let ((len (length l)))
      (build-list len
                  (lambda (i)
                    (list-ref l (- len i 1))))))) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-04-06T07:33:18.447

这个可行，但它不是尾递归过程：

```
(define (rev lst)
 (if (null? lst)
     '()
      (append (rev (cdr lst)) (car lst)))) 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-02-18T20:29:49.597

尾递归解：

```
(define (reverse oldlist)
    (define (t-reverse oldlist newlist)
        (if (null? oldlist)
            newlist
            (t-reverse (cdr oldlist) (cons (car oldlist) newest))))
    (t-reverse oldlist '())) 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-09-10T23:06:47.630

只需使用 cons 将列表折叠起来：

```
(define (reverse list) (foldl cons null list)) 
```

这也很有效，因为 foldl 是尾递归的，不需要追加。这也可以无点完成（使用球拍中的咖喱）：

```
(define reverse (curry foldl cons null)) 
```

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2014-02-03T17:17:14.313

```
(define reverse?
  (lambda (l)
    (define reverse-aux?
      (lambda (l col)
        (cond 
          ((null? l) (col ))
          (else 
            (reverse-aux? (cdr l) 
                          (lambda () 
                            (cons (car l) (col))))))))
    (reverse-aux? l (lambda () (quote ())))))
(reverse? '(1 2 3 4) ) 
```

还有一个类似于奥斯卡的答案。我刚刚开始学习计划，如果您发现问题，请见谅:)。

* * *

## 回答 #9

> 赞同：-1
> 
> 时间：2015-01-04T19:33:22.453

我认为使用 append 而不是 cons 会更好

```
(define (myrev l)
  (if (null? l)
      '()
      (append (myrev (cdr l)) (list (car l)))
  )
) 
```

这是另一个带有尾递归的版本

```
(define (myrev2 l)
  (define (loop l acc) 
    (if (null? l)
        acc
        (loop (cdr l) (append (list (car l)) acc ))
    )
  )
  (loop l '())
) 
```

* * *

## 回答 #10

> 赞同：-1
> 
> 时间：2014-10-16T19:25:49.233

实际上不需要用一堆 lambda 附加或填充主体。

```
(define (reverse items)
  (if (null? items)
      '()
      (cons (reverse (cdr items)) (car items)))) 
```

# java - Java并发对象池？

> ID：15058247
> 
> 赞同：6
> 
> 时间：2013-02-25T00:07:26.610
> 
> 标签：java, concurrency, thread-safety, threadpool, java.util.concurrent

我试图将一个外部的非线程安全库集成到我的 Web 项目中；我发现为每个客户端线程创建这个对象的实例太昂贵了。

因此，我想创建一个具有以下属性的对象池。

1.  动态对象创建，池中的对象是动态创建的，而不是在构造函数中创建。池最初是空的，当客户端线程获取资源对象时，池可以按需创建新资源。一旦创建的对象数量达到池的大小；然后新的客户端线程将被阻塞，并等待其他线程回收资源。
2.  池应该是公平的，公平保证第一个请求的线程是第一个得到的线程；否则有可能一些线程将永远等待。

我该怎么做？如果有一个工作示例，我将不胜感激。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-02-25T00:07:26.610

这个问题和解决方案总结自[https://www.dbtsai.com/blog/2013/java-concurrent-dynamic-object-pool-for-non-thread-safe-objects-using-blocking-queue/](https://www.dbtsai.com/blog/2013/java-concurrent-dynamic-object-pool-for-non-thread-safe-objects-using-blocking-queue/)

并发对象池可以通过Java并发包中的阻塞队列来构建，ArrayBlockingQueue也支持我们需要的公平性。在这个实现中，我使用 ReentrantLock 来控制我们是否可以在池中创建一个新对象。因此，在非动态创建模式下，即在构造函数中创建所有对象时，这个锁会一直被锁定；在动态创建模式下，每次只能创建一个对象，所以如果有另一个线程获取该对象，它会从阻塞remove的pool.take()中获取该对象，并等待一个新的可用队列中的资源。

```
 public abstract class ResourcePool {
        private final BlockingQueue pool;
        private final ReentrantLock lock = new ReentrantLock();
        private int createdObjects = 0;
        private int size;

        protected ResourcePool(int size) {
            this(size, false);
        }

        protected ResourcePool(int size, Boolean dynamicCreation) {
            // Enable the fairness; otherwise, some threads
            // may wait forever.
            pool = new ArrayBlockingQueue<>(size, true);
            this.size = size;
            if (!dynamicCreation) {
                lock.lock();
            }
        }

        public Resource acquire() throws Exception {
            if (!lock.isLocked()) {
                if (lock.tryLock()) {
                    try {
                        ++createdObjects;
                        return createObject();
                    } finally {
                        if (createdObjects < size) lock.unlock();
                    }
                }
            }
            return pool.take();
        }

        public void recycle(Resource resource) throws Exception {
            // Will throws Exception when the queue is full,
            // but it should never happen.
            pool.add(resource);
        }

        public void createPool() {
            if (lock.isLocked()) {
                for (int i = 0; i < size; ++i) {
                    pool.add(createObject());
                    createdObjects++;
                }
            }
        }

        protected abstract Resource createObject();
    } 
```

在下面的例子中，有 5 个客户端线程同时获取资源池中的两个 DataTimeFormat 对象，这些客户端线程总共会进行 30 次计算。

```
 class DataTimeFormatResourcePool extends ResourcePool<SimpleDateFormat> {

    DataTimeFormatResourcePool(int size, Boolean dynamicCreation) {
        super(size, dynamicCreation);
        createPool();
    }

    @Override
    protected SimpleDateFormat createObject() {
        return new SimpleDateFormat("yyyyMMdd");
    }

    public Date convert(String input) throws Exception {
        SimpleDateFormat format = acquire();
        try {
            return format.parse(input);
        } finally {
            recycle(format);
        }
    }
}

public class ResourcePoolExample {
    public static void main(String args[]) {
        final DataTimeFormatResourcePool pool = new DataTimeFormatResourcePool(2, true);

        Callable<Date> task = new Callable<Date>() {
            @Override
            public Date call() throws Exception {
                return pool.convert("20130224");
            }
        };

        ExecutorService exec = Executors.newFixedThreadPool(5);
        List<Future<Date>> results = new ArrayList<>();

        for (int i = 0; i < 30; i++) {
            results.add(exec.submit(task));
        }
        exec.shutdown();
        try {
            for (Future<Date> result : results) {
                System.out.println(result.get());
            }
        } catch (Exception ex) {
            ex.printStackTrace();
        }
    }
} 
```

# c++ - Boost Phoenix 中的用户定义参数

ID：15058250

赞同：1

时间：2013-02-25T00:07:31.710

标签：c++, boost, boost-phoenix, boost-proto

# c++ - 请解释本程序中的>>

> ID：15058253
> 
> 赞同：0
> 
> 时间：2013-02-25T00:07:35.063
> 
> 标签：c++

提取操作员在做什么？我从未见过它以这种方式使用。

```
void DecimalToBinary(int decimal)
{
int remainder;

if(decimal <= 1)
    {
    cout << decimal;
    return;
}

remainder = decimal % 2;

/*----->>>*/ DecimalToBinary(decimal >> 1);/*what is the extraction operator doing?*/
cout << remainder;
 } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-25T00:08:30.427

早在它成为提取运算符之前，它就是一个[位移运算符。](http://www.cs.umd.edu/class/sum2003/cmsc311/Notes/BitOp/bitshift.html)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-25T00:09:06.363

它不是提取运算符 - 它是按位移位 - 或“除以二”（尽管它可能不适用于负数）。

“提取运算符”只是借用 C 语言中不太常见的运算符之一来做一些完全不同的事情。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-25T00:09:19.180

这是位移运算符，在这种情况下，它将整个值向右移动一位。

例如：

```
 13 >> 2

 01101 
 00110 //right by one
 00011 //repeat

 = 3 
```

# php - 在php中同时定义多个结果

> ID：15058256
> 
> 赞同：1
> 
> 时间：2013-02-25T00:08:50.753
> 
> 标签：php, smarty

我有`$config`里面有数组的变量。在 smarty 中，我像这样分配变量：

```
$smarty->assign('config', $config); 
```

当我调用它时，我使用了这个：`{$config.wateverarrayyouwant}` 现在我想用 php 做同样的事情。我想以`define`同样的方式对待他们。如何在`$config`一行中定义所有数组？我只知道如何使用这个一次定义一个变量：

```
define('wateverarrayyouwant', $config['wateverarrayyouwant']); 
```

我尝试将 waterverarrayyouwant 更改为变量，因为它可以是任何数组：

```
define('$wateverarrayyouwant', $config[$wateverarrayyouwant]); 
```

但上面的代码不起作用。什么是实现我想要的好方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T00:11:09.860

如果要为`define`数组中的每个键值对创建一个，可以使用：

```
<?php
foreach($config as $key => $value) {
    define($key, $value);
} 
```

但是我会注意，您不能`define`排列值，所有[`define`](http://www.php.net/manual/en/function.define.php)' 都必须是标量：

> 常数的值；只允许标量和空值。标量值是整数、浮点数、字符串或布尔值。

如果您查看 OP 的答案以进一步解释他想要实现的目标，可以通过以下方式完成：

```
<?php
foreach($config as $key => $value){
    $$key = $value;
}
?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T06:01:29.667

这个问题不能做。因为我试图将变量定义为常量。我只是在想如何减少变量的字母，但我最好不要管它们。从逻辑上讲，为什么有人需要更改`$config[$wateverarrayyouwant]`为`wateverarrayyouwant`. 我只是想维护一个整洁的代码。但现在我正在考虑它.. 最好保持原样：`$config[$wateverarrayyouwant]`

这可以通过以下方式完成：

```
foreach($config as $key => $value){
    $$key = $value;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-25T00:33:27.363

您甚至可能不想在这里使用定义。`define`用于创建[`constants`](http://www.php.net/manual/en/language.constants.php)非普通变量，并带有某些含义：

*   它们在脚本的生命周期内是不可变的
*   它们必须是标量

如果你只想要一个数组变量，那么像往常一样定义它：

```
$whatever = array(
  'key1' => 'value1'
); 
```

# java - Jenkins - 将源代码编译成 jarfile，用作工件

> ID：15058259
> 
> 赞同：1
> 
> 时间：2013-02-25T00:09:05.997
> 
> 标签：java, jar, jenkins, continuous-integration, artifacts

我需要允许 Jenkins 在构建后创建从 Subversion 下载的源的 .jar，并允许用户将其作为工件下载。以下是具有此功能的网站示例：

[https://jenkins.kellerkindt.com/job/ShowCaseStandalone/](https://jenkins.kellerkindt.com/job/ShowCaseStandalone/)

构建完成后，它会编译“ShowCaseStandalone.jar”，并将其添加到工件中，供人们下载。

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T15:57:32.590

我实际上已经解决了这个问题......我意识到我实际上并没有使用 Ant，所以我必须这样做，然后我使用了 Archive the Artifacts，正如@Nick 所说。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T21:00:49.047

在项目配置的后期构建步骤中，您可以添加“归档工件”作为操作。输入要显示的工件的名称。

# perl - 网络::SFTP 挂起

> ID：15058260
> 
> 赞同：0
> 
> 时间：2013-02-25T00:09:06.617
> 
> 标签：perl, sftp, freeze, net-sftp

我正在使用[Net::SFTP](https://metacpan.org/module/Net::SFTP)传输文件。但是，每当我尝试像这样创建一个新对象时：

```
my $sftp = Net::SFTP->new('ip', user=>'user', password=>'pass'); 
```

它只是挂起，什么也不做。有人知道为什么吗？难道我做错了什么？谢谢！

**更新**

这是调试输出：

```
dev1.com: Reading configuration data /home/user/.ssh/config
dev1.com: Reading configuration data /etc/ssh_config
dev1.com: Connecting to 50.56.91.91, port 22.
dev1.com: Remote protocol version 2.0, remote software version OpenSSH_4.3
dev1.com: Net::SSH::Perl Version 1.34, protocol version 2.0.
dev1.com: No compat match: OpenSSH_4.3.
dev1.com: Connection established.
dev1.com: Sent key-exchange init (KEXINIT), wait response.
dev1.com: Algorithms, c->s: 3des-cbc hmac-sha1 none
dev1.com: Algorithms, s->c: 3des-cbc hmac-sha1 none
dev1.com: Entering Diffie-Hellman Group 1 key exchange.
dev1.com: Sent DH public key, waiting for reply. 
dev1.com: Received host key, type 'ssh-dss'.
dev1.com: Host 'ip_here' is known and matches the host key.
dev1.com: Computing shared secret key.
dev1.com: Verifying server signature.
dev1.com: Waiting for NEWKEYS message.
dev1.com: Send NEWKEYS.
dev1.com: Enabling encryption/MAC/compression.
dev1.com: Sending request for user-authentication service.
dev1.com: Service accepted: ssh-userauth. 
dev1.com: Trying empty user-authentication request.
dev1.com: Authentication methods that can continue: publickey,gssapi-with mic,password.
dev1.com: Next method to try is publickey.
dev1.com: Trying pubkey authentication with key file '/home/user/.ssh/id_rsa2' 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T00:17:48.207

除了`user`和`password`选项，设置`debug => 1`. 您将获得一些诊断输出，可能会告诉您问题所在。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-25T00:18:29.493

搜索您的连接数据是否正确。[使用Net::SFTP::Foreign](http://search.cpan.org/~salva/Net-SFTP-Foreign-1.58_02/lib/Net/SFTP/Foreign.pm)中显示的简单代码。

# linux - BASH 中的基本 Shell 脚本

> ID：15058261
> 
> 赞同：1
> 
> 时间：2013-02-25T00:09:07.090
> 
> 标签：linux, bash

我在 BASH 脚本的第一学期，遇到了一些困难。我参加过其他编程课程，如 C++ 或 Java，但 Bash 的语法让我很受不了。我很想对这个问题提出一些建议。我需要执行以下操作：

*   从 /var/log/secure 文件中提取今天的数据
*   检查我是否有一个名为“mylogs”的目录
*   如果我不 - 然后创建一个
*   检查“mylogs”目录中是否已有与当前日期、月份和小时匹配的文件。
*   如果你这样做了，回显到屏幕“文件存在，没有写入我的日志”，然后退出。如果它不存在，则将今天的数据从 /var/log/secure 写入您的“mylog-month-day-hour”文件。示例（2 月 4 日下午 2 点）输出：mylog-02-04-14

我只需要脚本语法部分的帮助。

谢谢 - 我也喜欢任何在 BASH 中提供帮助的网站。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T00:26:30.713

*   从 /var/log/secure 文件中提取今天的数据

你可以这样做...

```
grep "^Feb 24" /var/log/secure 
```

*   检查我是否有一个名为“mylogs”的目录，如果没有，则创建一个

你可以这样做 ...

```
test -d mylogs || mkdir mylogs 
```

*   检查“mylogs”目录中是否已有与当前日期、月份和时间相匹配的文件。（假设文件名的格式为 DDMMHH）

    test -e mylogs/`date +%d%m%H` && echo "我已经有一个文件"

*   如果你这样做了，回显到屏幕“文件存在，没有写入我的日志”，然后退出。如果它不存在，则将今天的数据从 /var/log/secure 写入您的“mylog-month-day-hour”文件。示例（2 月 4 日下午 2 点）输出：mylog-02-04-14

嗯，你现在应该明白了。我想你现在可以解决这个问题了；）一个有用的命令是`man -k <keyword>`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T00:12:12.850

首先阅读一些 bash 基础知识。然后，有描述您的特定问题的链接。

*   [http://www.cyberciti.biz/faq/linux-howto-unzip-files-in-root-directory/](http://www.cyberciti.biz/faq/linux-howto-unzip-files-in-root-directory/)
*   [检查shell脚本中是否存在目录](https://stackoverflow.com/questions/59838/how-to-check-if-a-directory-exists-in-a-shell-script)
*   [如果文件夹尚不存在，如何使用 Bash 创建文件夹？](https://stackoverflow.com/questions/4906579/how-to-use-bash-to-create-a-folder-if-it-doesnt-already-exist)
*   [http://www.electrictoolbox.com/test-file-exists-bash-shell/](http://www.electrictoolbox.com/test-file-exists-bash-shell/)
*   [http://www.cyberciti.biz/tips/howto-linux-unix-write-to-syslog.html](http://www.cyberciti.biz/tips/howto-linux-unix-write-to-syslog.html)

# css - CSS 最佳实践：选择器还是类/ID？

> ID：15058262
> 
> 赞同：4
> 
> 时间：2013-02-25T00:09:09.850
> 
> 标签：css

CSS 中真正的最佳实践是什么：使用 ID 和类或选择器？

一旦提交表单以设置结果/成功提交页面的样式，我有一个 PHP 需要的样式表，我想知道 CSS 中使用 ID 和类或使用选择器的最佳实践是什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-25T00:35:35.580

基本上，类应该用于可能或可能重复的常见页面对象。仅当页面上存在您在页面上其他任何地方都没有的唯一元素时才应使用 ID。

解释这一点的一种方法是：

*   ID = 一个人的身份 (ID) 对一个人来说是唯一的。
*   班级 = 一个班级有很多人。

## **CLASSES 和 ID 没有浏览器默认值**

默认情况下，向元素添加类名或 ID 对该元素没有任何作用。

这是一个让我成为初学者的东西。您正在一个站点上工作，并发现应用特定的类名可以解决您遇到的问题。然后你跳到另一个有同样问题的站点并尝试用相同的类名修复它，认为类名本身有一些神奇的属性，结果发现它不起作用。

类和 ID 本身没有任何样式信息。它们需要 CSS 来定位它们并应用样式。

## **ID 具有特殊的浏览器功能**

类在浏览器中没有特殊功能，但 ID 确实有一个非常重要的技巧。这是 URL 中的“哈希值”。如果您有类似[http://yourdomain.com#comments](http://yourdomain.com#comments)的 URL ，浏览器将尝试定位 ID 为“comments”的元素，并自动滚动页面以显示该元素。这里需要注意的是，浏览器会滚动它需要的任何元素以显示该元素，因此如果您在常规正文中做了一些特殊的操作，例如可滚动的 DIV 区域，该 div 也会滚动。

这就是为什么让 ID 绝对唯一很重要的一个重要原因。所以你的浏览器知道在哪里滚动！

## **元素可以同时拥有**

没有什么能阻止您在单个元素上同时拥有 ID 和 Class。事实上，这通常是一个非常好的主意。以 WordPress 评论列表项的默认标记为例：

```
<li id="comment-27299" class="item"> 
```

它应用了一个类，您可能希望为页面上的所有评论设置样式，但它也有一个唯一的 ID 值（由 WordPress 动态生成，非常好）。此 ID 值对于直接链接很有用。现在，我可以轻松地链接直接在特定页面上进行特定评论。

## **注意：请注意，Javascript 确实在乎**

JavaScript 人可能已经更熟悉类和 ID 之间的差异。JavaScript 依赖于只有一个页面元素具有任何特定性，否则常用的`getElementById`功能将不可靠。对于熟悉 jQuery 的人来说，您知道向页面元素添加和删除类是多么容易。它是 jQuery 的原生和内置功能。请注意，ID 是如何不存在这样的功能的。操纵这些值不是 JavaScript 的责任，它会导致比其价值更多的问题。

## **如果您不需要它们，请不要使用它们**

如您所见，类和 ID 非常重要，我们每天都依赖它们来完成我们需要做的样式和页面操作。但是，您应该明智地和语义地使用它们。

**这意味着避免这样的事情：**

```
<a href="http://css-tricks.com" class="link">CSS-Tricks.com</a> 
```

我们已经知道这个元素是一个链接，它是一个锚元素！这里没有特别需要应用一个类，因为我们已经可以通过它的标签应用样式。

**还要避免这种情况：**

```
<div id="right-col"> 
```

此处适当使用 ID，因为该页面可能只有一个右列，但名称不合适。尝试描述元素的上下文，而不是它的位置或外观。这里的“侧边栏”ID 会更合适。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-25T00:16:55.507

选择将取决于您的 HTML 的结构。如果多次使用某种样式，请使用类。如果样式仅用于特定标签，请使用 ID。关于选择器，诀窍是使它们尽可能短。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-25T00:18:39.087

对唯一元素使用 ID，并使用类更普遍地应用样式。

表单应该使用 ID，因为它们通常都是唯一的。其中的任何内容都可以使用类，如果需要，您可以结合 ID 和类来专门针对它们。

HTML：

```
<form id="member-signup">
    <div class="align-left">
        <input type="text" class="large" />
    </div>
</form> 
```

CSS：

```
#member-signup {
    width:600px;
    float:left
}
.align-left {
    text-align:left;
    float:left;
}
input.large {
    width:300px;
}
#member-signup input.large {
    width:450px;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-25T00:14:48.210

当您在页面或整个网站上设置多个元素（例如所有`p`标签）的样式时，应使用类。每页只能使用一次 ID 来设置一般布局的样式，例如包装器、容器等。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-25T00:32:11.113

使用 HTML5 的语义，选择器是最初用于基于布局的样式的自然方式。类非常适合为元素添加风格和模板的最小“逻辑标志”。为您的特殊元素保存 id，例如稀松布覆盖、页面名称和包装。页面上应该只有一个 id 实例；当您编写代码生成的标记时，您应该始终牢记这一点。每页多个 id 可能会在以后导致一些讨厌的错误；简单的错误，但有时很难发现。

# objective-c - Objective-C 使用继承的变量和覆盖继承的属性

> ID：15058267
> 
> 赞同：6
> 
> 时间：2013-02-25T00:09:24.000
> 
> 标签：objective-c

（启用 ARC）

假设我有一个类名 BasicGameCard 声明了以下属性：

```
@property (nonatomic) NSUInteger cardValue; 
```

然后我创建了一个派生类 WarGameCard：BasicGameCard。

WarGameCard 扩展了一个花色属性，并希望使用继承的 cardValue 来表示它的等级问题：

1.  我如何在不使用属性的情况下在`WarGameCard`类中使用/调用变量？`_cardValue`

    a）写入：`_cardValue`导致`WarGameCard`编译器错误（我猜objective-c中没有受保护的访问修饰符并且变量是私有的）

    b) 不能使用`self.cardValue`它会编译，但会导致调用 setter 的无限循环

    c）尝试在以下内容中编写`WarGameCard`：`@synthesize cardValue = _cardValue;` 但是在调试时我看到2个不同的变量，一个是超类，一个是派生的，每个都有不同的值

2.  覆盖继承属性的正确方法是什么

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-02-25T00:21:23.253

在您的子类中，使用继承的访问器`cardValue`并`setCardValue:`获取和设置继承的值。您不需要覆盖该值；你只需要使用它。

一旦您的子类*始终*使用访问器，那么您可以根据需要覆盖访问器。例如

```
 - (void) setCardValue: (NSInteger) newValue
 {
      [super setValue: newValue];
      [self celebratePromotion];
 } 
```

你是对的：在 Objective C 中没有受保护的继承。但是现代的 Objective-C 使用访问器的范围远远超过 C++。事实上，在构造函数和析构函数以及（可以说）访问器之外，你永远不应该直接接触实例变量。

# sql - 还是 Oracle SQL 中的简写？

> ID：15058269
> 
> 赞同：5
> 
> 时间：2013-02-25T00:09:37.970
> 
> 标签：sql, oracle

我有一个查询，我需要检查大约 20 个不同的列以获取 0 值。

而不是这样做：

WHERE BOOK <> 0 或 ALLO <> 0 或 ...

有没有更快的方法呢？类似于：WHERE (BOOK,ALLO,...) <> 0

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-25T00:37:53.657

虽然它不能在其他任何地方运行（MySQL、SQL-Server、Postgres）并且它可能不是 SQL 标准，但它可以在 Oracle 中运行：

```
WHERE 0 <> ANY (BOOK, ALLO, ...) 
```

在**[SQL-Fiddle中测试](http://sqlfiddle.com/#!4/d42e3/1)**

* * *

还有另一种标准方法，适用于 MySQL 和 Postgres，但不适用于 Oracle：

```
WHERE (0, 0, ...) <> (BOOK, ALLO, ...) 
```

另一种适用于 Postgres 和 SQL-Server 2012 的标准方式（使用表值构造函数）：

```
WHERE 0 <> ANY (VALUES (BOOK), (ALLO), ...) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T00:30:21.083

你可以使用：

```
WHERE (book + allo + ...) > 0 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-25T00:37:53.597

如果不可能有负值，您可以这样做：

```
WHERE BOOK + ALLO + ... > 0 
```

如果可能有负值，这是我能想到的最简洁的表达方式：

```
WHERE ABS(BOOK) + ABS(ALLO) + ... > 0 
```

此外，这与数据库无关。

这些解决方案只有在不可能有​​空值的情况下才有效，如果是的话，它会变得非常混乱。

# php - SQL 从表中获取每月总计

> ID：15058271
> 
> 赞同：1
> 
> 时间：2013-02-25T00:09:42.507
> 
> 标签：php, sql

我有一张表格，上面有价格、日期作为时间戳、进入月份和进入年份。

```
+++++++++++++++++++++++++++++
Price | Date | Month | Year |
+++++++++++++++++++++++++++++
9.00  |343345|   2   | 2013 |
3.00  |343445|   2   | 2013 |
4.00  |343245|   1   | 2013 |
1.00  |342245|   1   | 2013 |
5.00  |333355|   12  | 2012 | 
```

到目前为止，我有这个列出每月的总价格，问题是 GROUP BY 重新排序结果，使其进入第 1 个月，第 12 个月，然后是第 2 个月，因为我需要结果从当前月份下降，逐月下降-月。

```
"SELECT month,SUM(price), FROM table  GROUP BY month ORDER BY date DESC " 
```

如果有帮助，我正在使用 PHP。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T00:13:14.507

它将您的月份视为文本而不是数字。将其转换为整数，它会正确排序。

```
SELECT CAST(Month as int) as Month, SUM(PRICE), FROM table Group by month ORDER BY CAST(MONTH as int) desc 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T00:14:49.797

将您的月份转换为 INT 数据类型：

```
SELECT month,SUM(price), SUM(price), FROM table GROUP BY month ORDER BY cast(month as UNSIGNED) DESC 
```

更多：[演员表](http://dev.mysql.com/doc/refman/5.5/en/cast-functions.html#function_cast)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-25T00:15:32.860

我有类似的问题。我通过添加另一个具有“日期”类型的列并转换日期中的所有不同字段来解决它。然后您可以在时间范围内进行选择。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-25T00:18:58.473

问题是您的日期字段未存储为日期时间。而不是按它排序，而是按您的年份和月份字段排序（我假设您想按这两个字段分组）。

```
SELECT year,month,SUM(price)
FROM table 
GROUP BY year,month 
ORDER BY year DESC, month DESC 
```

如果年和/或月存储为 varchar，则转换它们——我怀疑它们存储为整数：

# php - 将ajax变量写入txt文件

> ID：15058272
> 
> 赞同：1
> 
> 时间：2013-02-25T00:09:44.280
> 
> 标签：php, javascript, ajax, jquery

我有一个 facebook 应用程序编码客户端，我想将令牌存储在我的服务器上以供以后使用

有一个名为“token”的变量，然后我创建了一个名为“apple”的新函数，将此变量以 json 格式写入 txt 文件

```
$(document).ready(function(){

$("#submit").click(function(){

    //access token stuff
    var token = $("#link_input").val();
    //alert("Got Token: " + token + ". your application token");

    if (token.split('#access_token=')[1]) {
    var token = token.split('#access_token=')[1].split('&')[0];
    //alert(token);

function WriteToFile(apple)
    {
    $.post("save.php",{ 'token': apple },
        function(data){
            alert(data);
        }, "text"
    );
    return false;
    } 
```

我的.php文件

```
<?php
$thefile = "new.json"; /* Our filename as defined earlier */
$towrite = $_POST["token"]; /* What we'll write to the file */
echo $towrite;
$openedfile = fopen($thefile, "w");
$encoded = json_encode($towrite);
fwrite($openedfile, $encoded);
fclose($openedfile);
return "<br> <br>".$towrite;

?> 
```

但我不能让它写任何东西

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T00:19:58.050

您必须先在该位置创建文件，然后设置正确的权限，否则 PHP 将无法写入。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T00:58:10.773

就目前而言，您`WriteToFile`在 JS 中定义您的函数，但您*从不*调用它。将您的 JS 更改为：

```
$(document).ready(function(){

    $("#submit").click(function(){

        //access token stuff
        var token = $("#link_input").val();
        //alert("Got Token: " + token + ". your application token");

        if (token.split('#access_token=')[1]) {
            var token = token.split('#access_token=')[1].split('&')[0];
            WriteToFile(token);
        }
    }

    function WriteToFile(apple) {
        $.post("save.php",{ 'token': apple },
            function(data){
                alert(data);
            }, "text");
        return false;
    }

}; 
```

或者：

```
$(document).ready(function(){

    $("#submit").click(function(){

        //access token stuff
        var token = $("#link_input").val();
        //alert("Got Token: " + token + ". your application token");

        if (token.split('#access_token=')[1]) {
            var token = token.split('#access_token=')[1].split('&')[0];
            $.post("save.php",{ 'token': token }, function(data){
                    alert(data);
                }, "text");
        }
    }

}; 
```

# r - 创建具有连续名称的大量 R 对象的最短方法是什么？

> ID：15058284
> 
> 赞同：3
> 
> 时间：2013-02-25T00:12:08.223
> 
> 标签：r, performance

这就是我目前所拥有的：

```
weights0 <- array(dim=c(nrow(ind),nrow(all.msim))) 
weights1 <- array(dim=c(nrow(ind),nrow(all.msim)))
weights2 <- array(dim=c(nrow(ind),nrow(all.msim)))
weights3 <- array(dim=c(nrow(ind),nrow(all.msim)))
weights4 <- array(dim=c(nrow(ind),nrow(all.msim)))
weights5 <- array(dim=c(nrow(ind),nrow(all.msim)))
weights0 <- 1 # sets initial weights to 1 
```

很好很清晰，但不是很好很短！有经验的 R 程序员会以不同的方式编写它吗？

编辑：

此外，是否有一种既定的方法可以创建多个权重，这些权重取决于预先存在的变量以使其具有普遍性？例如，参数 num.cons 等于 5：我们需要的约束（以及权重）的数量。想象一下这是一个常见的编程问题，所以肯定有解决方案。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-25T00:36:22.337

## 选项1

如果您想在您的环境中创建不同的元素，您可以使用`for`循环和分配来完成。其他选项是`sapply`和`envir`论点`assign`

```
for (i in 0:5)
    assign(paste0("weights", i), array(dim=c(nrow(ind),nrow(all.msim)))) 
```

* * *

## 选项 2

但是，正如@Axolotl9250 指出的那样，根据您的应用程序，通常将这些都放在一个列表中是有意义的

```
weights <-  lapply(rep(NA, 6), array, dim=c(nrow(ind),nrow(all.msim))) 
```

然后分配给`weights0`你上面，你会使用

```
weights[[1]][ ] <- 1 
```

**`[ ]` 注意分配给所有元素的空`weights[[1]]`**

* * *

## 选项 3

根据@flodel 的建议，如果您的所有数组都具有相同的暗度，您可以创建一个大数组，其长度的额外暗度等于您拥有的对象数量。（即，6）

```
weights <- array(dim=c(nrow(ind),nrow(all.msim), 6)) 
```

### 请注意，对于任何选项：

如果要分配给数组的**所有元素，则必须使用空括号。**例如，在选项 3 中，要分配给第一个数组，您可以使用：

```
weights[,,1][] <- 1 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-02-25T00:24:49.657

我刚刚尝试实现这一目标，但没有喜悦，也许其他人比我更好（很可能！！）。但是我不禁觉得将所有数组放在一个对象（一个列表）中可能更容易；这样一来，一条 lapply 线就可以了，而不是引用`weights1` `weights2` `weights3` `weights4`它`weights[[1]]` `weights[[2]]` `weights[[3]]` `weights[[4]]`。然后，对这些数组的未来操作也将通过 apply 系列函数来实现。对不起，我不能完全按照你的描述。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-25T00:34:32.487

鉴于您正在做的事情，只需使用`for`循环即可快速直观

```
# create a character vector containing all the variable names you want..
variable.names <- paste0( 'weights' , 0:5 )

# look at it.
variable.names

# create the value to provide _each_ of those variable names
variable.value <- array( dim=c( nrow(ind) , nrow(all.msim) ) )

# assign them all
for ( i in variable.names ) assign( i , variable.value )

# look at what's now in memory
ls()

# look at any of them
weights4 
```

# mysql - tomcat 移植到 Google App Engine

> ID：15058286
> 
> 赞同：0
> 
> 时间：2013-02-25T00:12:12.650
> 
> 标签：mysql, web-services, google-app-engine, jdbc

我原来有期webservice的tomcat服务器。现在我想分段webservice移植到GAE。我移植成功了。执行，但显示此错误消息。这会导致出错的可能性吗？

我的代码：

```
 public class LOAD extends HttpServlet{
        static String JBx;
        static String JBy;
        static String JBSx;
        static String JBSy;
        static String gps;
        String a;
        int i;
          private Connection con = null; //Database objects 
          private Statement stat = null; 
          private ResultSet rs = null; 
          private PreparedStatement pst = null; 
        private String dropdbSQL = "DROP TABLE User "; 

      private String createdbSQL = "CREATE TABLE User (" + 
        "    id     INTEGER " + 
        "  , name    VARCHAR(20) " + 
        "  , passwd  VARCHAR(20))"; 

      private String insertdbSQL = "insert into User(id,gps,recopy) " + 
              "select ifNULL(max(id),0)+1,?,? FROM User"; 

      private String selectSQL = "select * from User "; 
      public static void main(String[] args) 
      { 

      } 
          public void SelectTable() 
          { 
            try 
            { 
              stat = con.createStatement(); 
              rs = stat.executeQuery(selectSQL); 
              while(rs.next()) 
              { 
                 JBSx =rs.getString("gps");
                 JBSx="<div id=dd>"+JBSx+"</div>";
                 if(JBx!=null){
                  JBx=JBx+JBSx;

                 }else
                 {
                     JBx=JBSx;

                 }
                     JBSy =rs.getString("recopy");
                     JBSy="<div id=ff>"+JBSy+"</div>";
                     if(JBy!=null){
                          JBy=JBy+JBSy;

                     }
                     else
                     {
                         JBy=JBSy;

                     }
              } 
            } 
            catch(SQLException e) 
            { 
              System.out.println("DropDB Exception :" + e.toString()); 
            } 
//          finally 
//          { 
//            Close(); 
//          } 
          } 

          private void Close() 
          { 
            try 
            { 
              if(rs!=null) 
              { 
                rs.close(); 
                rs = null; 
              } 
              if(stat!=null) 
              { 
                stat.close(); 
                stat = null; 
              } 
              if(pst!=null) 
              { 
                pst.close(); 
                pst = null; 
              } 
            } 
            catch(SQLException e) 
            { 
              System.out.println("Close Exception :" + e.toString()); 
            } 
          } 
      public LOAD() 
      { 
        try { 
          Class.forName("com.mysql.jdbc.Driver"); 
          con = DriverManager.getConnection( 
                  "jdbc:mysql://hl2dm.synology.me:3306/teama", 
                  "abc",""); 

        } 
        catch(ClassNotFoundException e) 
        { 
          System.out.println("DriverClassNotFound :"+e.toString()); 
        }
        catch(SQLException x) { 
          System.out.println("Exception :"+x.toString()); 
        } 

      }  
    public void doGet(HttpServletRequest rq, HttpServletResponse rp) 
                    throws ServletException, IOException{
    JBx=null;
     JBy=null;
    JBSx=null;
    JBSy=null;
        rq.setCharacterEncoding("UTF-8");
//       String gps = rq.getParameter("gps");

        LOAD test = new LOAD(); 
        test.SelectTable(); 
        HttpSession session = rq.getSession();
//session.invalidate();
//        session.removeAttribute("reportx");
        session.setMaxInactiveInterval(3600);      
        session.setAttribute("reportx",JBx);
        session.setAttribute("reporty",JBy);
        rp.sendRedirect(rp.encodeRedirectURL("LOADPOST"));
    }
    public void doPost(HttpServletRequest rq, HttpServletResponse rp) 
                    throws ServletException, IOException{
        doGet(rq, rp);
    }
} 
```

错误消息：HTTP 错误 500

```
Problem accessing /LOAD. Reason:

    INTERNAL_SERVER_ERROR
Caused by:

java.lang.NullPointerException
    at a.b.c.LOAD.SelectTable(LOAD.java:52)
    at a.b.c.LOAD.doGet(LOAD.java:149)
    at a.b.c.LOAD.doPost(LOAD.java:160)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:637)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
    at org.mortbay.jetty.servlet.ServletHolder.handle(ServletHolder.java:511)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1166)
    at com.google.appengine.api.socket.dev.DevSocketFilter.doFilter(DevSocketFilter.java:74)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
    at com.google.appengine.tools.development.ResponseRewriterFilter.doFilter(ResponseRewriterFilter.java:123)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
    at com.google.appengine.tools.development.HeaderVerificationFilter.doFilter(HeaderVerificationFilter.java:34)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
    at com.google.appengine.api.blobstore.dev.ServeBlobFilter.doFilter(ServeBlobFilter.java:61)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
    at com.google.apphosting.utils.servlet.TransactionCleanupFilter.doFilter(TransactionCleanupFilter.java:43)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
    at com.google.appengine.tools.development.StaticFileFilter.doFilter(StaticFileFilter.java:125)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
    at com.google.appengine.tools.development.BackendServersFilter.doFilter(BackendServersFilter.java:97)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
    at org.mortbay.jetty.servlet.ServletHandler.handle(ServletHandler.java:388)
    at org.mortbay.jetty.security.SecurityHandler.handle(SecurityHandler.java:216)
    at org.mortbay.jetty.servlet.SessionHandler.handle(SessionHandler.java:182)
    at org.mortbay.jetty.handler.ContextHandler.handle(ContextHandler.java:765)
    at org.mortbay.jetty.webapp.WebAppContext.handle(WebAppContext.java:418)
    at com.google.appengine.tools.development.DevAppEngineWebAppContext.handle(DevAppEngineWebAppContext.java:94)
    at org.mortbay.jetty.handler.HandlerWrapper.handle(HandlerWrapper.java:152)
    at com.google.appengine.tools.development.JettyContainerService$ApiProxyHandler.handle(JettyContainerService.java:409)
    at org.mortbay.jetty.handler.HandlerWrapper.handle(HandlerWrapper.java:152)
    at org.mortbay.jetty.Server.handle(Server.java:326)
    at org.mortbay.jetty.HttpConnection.handleRequest(HttpConnection.java:542)
    at org.mortbay.jetty.HttpConnection$RequestHandler.content(HttpConnection.java:938)
    at org.mortbay.jetty.HttpParser.parseNext(HttpParser.java:755)
    at org.mortbay.jetty.HttpParser.parseAvailable(HttpParser.java:218)
    at org.mortbay.jetty.HttpConnection.handle(HttpConnection.java:404)
    at org.mortbay.io.nio.SelectChannelEndPoint.run(SelectChannelEndPoint.java:409)
    at org.mortbay.thread.QueuedThreadPool$PoolThread.run(QueuedThreadPool.java:582)
Powered by Jetty:// 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T01:10:32.090

要回答你的问题，是的，它会导致明确的失败。

AppEngine 上没有要连接的 MySql 实例。您需要改用 Google Cloud SQL。

它是这样的：

```
 DriverManager.registerDriver(new AppEngineDriver());
      con = DriverManager.getConnection("jdbc:google:rdbms://instance_name/guestbook"); 
```

请参阅： [此 AppEngine 指南](https://developers.google.com/appengine/docs/java/cloud-sql/developers-guide)以获取完整的步骤集。

注意：要将开发服务器与本地 MySQL 实例一起使用，请参阅[https://developers.google.com/appengine/docs/java/cloud-sql/developers-guide#using_the_java_development_server](https://developers.google.com/appengine/docs/java/cloud-sql/developers-guide#using_the_java_development_server)

# jquery - jquery检测窗口调整大小

> ID：15058290
> 
> 赞同：3
> 
> 时间：2013-02-25T00:12:49.817
> 
> 标签：jquery, dynamic, width, detect, window-resize

我有一个关于我正在开发的关于检测窗口何时调整大小的网站的问题。我知道这之前已经讨论过了，我已经阅读了许多讨论，但无法让它发挥作用。我只是在学习jquery。

```
 $(function(){
    var viewPortWidth = $(window).width();
    if (viewPortWidth > 1900)
    {
       $('#mainbio, #footerlinks').addClass('extraWide')
    }
    else if (viewPortWidth > 1400)
    {
       $('#mainbio, #footerlinks').addClass('wide')
    }
    else if (viewPortWidth > 1000) 
    {
       $('#mainbio, #footerlinks').addClass('standard')
    }
    else if (viewPortWidth > 700)
    {
       $('#mainbio, #footerlinks, #twitter, #facebook, #flickr,   #lastfm').addClass('narrow')
    }
    else 
    {
       $('#mainbio, #footerlinks, #twitter, #facebook, #flickr, #lastfm').addClass('extraNarrow')
    }
 }); 
```

这是我到目前为止所拥有的，它工作正常，但仅限于初始负载。我想知道是否有人可以帮助我调整它以便它可以动态工作 - 如果我要手动调整浏览器大小而不刷新，我可以看到更改？

谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-25T00:19:47.187

您可以使用 回调此函数`.resize()`。

例如

```
var detectViewPort = function(){
    var viewPortWidth = $(window).width();
    if (viewPortWidth > 1900)
    //...The rest of your above code.
};

$(function(){
  detectViewPort();
});

$(window).resize(function () {
   detectViewPort();
}); 
```

可能还有另一种/更好的方法，但这是我所知道的选项。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T00:19:31.253

目前，这是一个自调用匿名函数，因此将在页面加载后立即运行（因此将运行一次）。

要让它在调整窗口大小时运行，您需要在窗口上注册调整大小事件（完整文档在此处[http://api.jquery.com/resize/](http://api.jquery.com/resize/)）。

如果您更新该行：

> $（函数（）{

所以它读

> $(窗口).resize(函数() {

每当调整窗口浏览器的大小时，都会调用它。

# javascript - 根据值，使用 JS 在另一个针对特定位置的 div 上添加 div

> ID：15058292
> 
> 赞同：1
> 
> 时间：2013-02-25T00:13:09.153
> 
> 标签：javascript, html, css

我想根据选择值为 img 的一个区域着色。

例子：

HTML 标记：

```
 <tr id="from"> <!-- Hide this table unless yes selected -->
        <td>
            from
        </td>
        <td>
           <select name="from" id="from" style="width:100%; text-align:center; font-weight:bold;">

                <option value="" name="" selected="selected">....</option>

                <?php

                $i = 0;
                while ($i <= 23) {
                    if ($i<10) {
                        echo '<option value="f' . $i . '" name="f' . $i . '">0' . $i . '.00</option>';
                    }
                    else {
                        echo '<option value="f' . $i . '" name="f' . $i . '">' . $i . '.00</option>';
                    }
                    $i++;
                }
                ?>

            </select>
        </td>
       </tr>

       <tr id="to"> <!-- Hide this table unless yes selected -->
        <td>
            to
        </td>
        <td>
           <select name="to" id="to" style="width:100%; text-align:center; font-weight:bold;">

                <option value="" name="" selected="selected">....</option>

                <?php

                $i = 0;
                while ($i <= 23) {
                    if ($i<10) {
                        echo '<option value="t' . $i . '" name="t' . $i . '">0' . $i . '.00</option>';
                    }
                    else {
                        echo '<option value="t' . $i . '" name="t' . $i . '">' . $i . '.00</option>';
                    }
                    $i++;
                }
                ?>

            </select>
        </td>
       </tr>

      <tr id="timer_table"> <!-- Hide this table unless yes selected -->
        <td colspan="2">
            <img src="img/time_line.png" width="100%" height="100%" style="border: 1px solid #d1d2d4;" />
        </td>
       </tr> 
```

基本上，用户应该选择开始时间和结束时间，并且该部分应该在 time_line img 上着色。

“time_line.png”是 339x10 像素，彩色图片是“cover_red.png”，它是 14x10 像素，偏移 0.125 像素，但没关系。

所以我想做的是把颜色img放到时间轴img上，使用javascript根据选择对其进行着色。

我不知道该怎么做，如果有人能指出我正确的方向，那将非常有帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T00:32:16.897

解决这个问题的另一种方法可能是图像映射。`<img>`tag属性（参见丰富的`usemap`HTML 文档）允许图像的可点击区域。使用`z-index`CSS 属性还可用于根据可变输入对具有不同背景颜色（或图像精灵）的不同元素进行分层。使用 CSS top/right 将这些图层适当地放置`position:absolute`在最低的背景基础图像上`z-index`。

# ruby-on-rails-3 - 将 Rails 应用程序从开发服务器传递到生产服务器

> ID：15058297
> 
> 赞同：0
> 
> 时间：2013-02-25T00:13:46.270
> 
> 标签：ruby-on-rails-3

我正在笔记本电脑上运行我的 rails 应用程序。

现在一切都已启动并正在运行，我想将其全部传递给在线服务器。如何将应用程序复制到服务器，将其设置为生产模式并使一切正常运行？

我已经看到很多回复将应用程序从开发模式传递到同一服务器上的生产模式，但没有传递到不同的机器......

你能指点我一些关于tis的在线教程吗？我还没有找到任何...谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T00:29:42.613

部署到生产服务器时需要牢记以下几点：

我更喜欢将我的 gem 捆绑到供应商目录中`bundle --deployment`

另外，一定要编译你的 assets `rake assets:precompile`。

您需要选择一个 Web 服务器（apache/nginx/etc）和应用程序服务器（phusion 乘客）。

您应该查看[http://railscasts.com/episodes/335-deploying-to-a-vps](http://railscasts.com/episodes/335-deploying-to-a-vps)，其中包含有关如何将网站部署到生产机器的一些详细信息。还可以查看其中一些视频[http://railscasts.com/?tag_id=21](http://railscasts.com/?tag_id=21)。

# ios - 在ios 6项目中，使用ARC，从函数内部创建的函数NSDictionary返回是否安全？

> ID：15058303
> 
> 赞同：0
> 
> 时间：2013-02-25T00:14:29.770
> 
> 标签：ios, ios6

在 ios 6 项目中，使用 ARC，从函数内部创建的函数 NSDictionary 返回是否安全？AFHTTPClient 需要 NSDictionary 来发送参数，并且我有嵌套块（我希望只有在第一次成功时才发送第二个请求的正确方法）用于发送（我首先上传调查图像，如果成功，我在嵌套块中上传答案）。这需要函数很长，所以我想创建一个函数来收集参数并返回 NSDictionary 以提高可读性。（我对 ios 完全陌生，所以如果问题没有意义，请道歉）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-25T01:10:26.437

是的，这是常见的，也是意料之中的。在继续之前，您应该阅读[Acquire Foundational Programming Skills](https://developer.apple.com/library/ios/#referencelibrary/GettingStarted/RoadMapiOS/chapters/AcquireBasicProgrammingSkills/AcquireBasicSkills/AcquireBasicSkills.html)以确保您对 Objective-C 对象模型有基本的了解。

# objective-c - 在 Objective-C 中声明

> ID：15058309
> 
> 赞同：0
> 
> 时间：2013-02-25T00:15:10.920
> 
> 标签：objective-c, iphone, xcode

我是Objective-C编程的新手，有一个一直困扰我的问题：为什么一定要在头文件中声明你的变量，像这样？

```
@interface MyViewController : UIViewController
{
    NSString *myString;
} 
```

为什么不在这里声明它们（在 .m 文件中）：

```
@implementation MyViewController

- (void)viewDidLoad
{
    NSString *myString;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-25T00:17:51.797

第一个声明是一个可用于所有实例方法的实例变量。第二个是本地的一种方法。

但是，可以在 .m 文件中声明实例变量：

```
@implementation MyViewController {
    NSString *myString;
} 
```

事实上，这是声明不需要公开的实例变量的首选方式。仅在 .h 文件中声明其他类需要使用的内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T00:22:06.933

这里有两个不同的问题。

简而言之，头文件 (.h) 是一个公共网关，其他所有内容都可以查看您的类是关于什么的，而无需了解有关您的实现的任何信息。您的头文件应该包含您希望其他类知道的所有内容（即公共方法、属性）。

您可以轻松地在实现文件中声明事物，但其他类将不知道它们。

其次，在您提供的示例中，您已放入`NSString *myString;`viewDidLoad 方法。这意味着这样的变量将仅在该方法的范围内可用。没有其他东西可以访问它。

# javascript - Highchart pie - 动态 pie 的数组动态

> ID：15058311
> 
> 赞同：1
> 
> 时间：2013-02-25T00:15:18.100
> 
> 标签：javascript, arrays, highcharts, pie-chart

在我的代码下面：

```
$(document).ready(function() {
    for(var j = 0; j < productsSize; j++) {
        //tmStringToDisplay.push(name[j], parseInt(percent[j]));
        var tmStringToDisplay = [name[j], parseInt(percent[j])];
        tmStringToDisplay.push(temp);
    }
    console.log(tmStringToDisplay);

    chart = new Highcharts.Chart({
        chart: {
            renderTo: 'container',
            plotBackgroundColor: null,
            plotBorderWidth: null,
            plotShadow: false
        },
        title: {
            text: 'The best selling products :'
        },
        tooltip: {
            pointFormat: '{series.name}: <b>{point.percentage}%</b>',
            percentageDecimals: 1
        },
        plotOptions: {
            pie: {
                allowPointSelect: true,
                cursor: 'pointer',
                dataLabels: {
                    enabled: true,
                    color: '#000000',
                    connectorColor: '#000000',
                    formatter: function() {
                        return '<b>'+ this.point.name +'</b>: '+ this.percentage +' %';
                    }
                }
            }
        },

        series: [{
            type: 'pie',
            name: 'Product share',
            data: tmStringToDisplay
        }]
    }); 
```

我必须制作“tmStringToDisplay”选项卡，将其放入系列数组的数据变量中。在静态中，它是这样的：

```
series: [{
            type: 'pie',
            name: 'Browser share',
            data: [
                ['Firefox',   45.0],
                ['IE',       26.8],
                {
                    name: 'Chrome',
                    y: 12.8,
                    sliced: true,
                    selected: true
                },
                ['Safari',    8.5],
                ['Opera',     6.2],
                ['Others',   0.7]
            ]
        }] 
```

这是在循环中，一切都在工作：

```
for(var j = 0; j < productsSize; j++) {
        //tmStringToDisplay.push(name[j], parseInt(percent[j]));
        var tmStringToDisplay = [name[j], parseInt(percent[j])];
        tmStringToDisplay.push(temp);
    } 
```

我必须创建和准备需要像静态示例一样的“tmStringToDisplay”......

谢谢 ！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T07:19:27.823

将 tmStringToDisplay 解析为 json

例如 jQuery.parseJSON(tmStringToDisplay);

# c# - 在 C# 中重载方法的更好方法

> ID：15058314
> 
> 赞同：0
> 
> 时间：2013-02-25T00:15:36.553
> 
> 标签：c#, overloading

所以我有一个重载的方法。但是，这个概念相当简单。“接受任何 X 数据类型作为第一个参数，然后接受这两种数据类型中的任何一种作为其余两个参数”。有没有更简单的方法来做到这一点？这很快就会失控。

```
 //Declared MyMethod(byte[], SpecializedArgumentType, SpecializedArgumentType) and a string-> SpecializedArgumentType  version of it.
    public static MyReturnType MyMethod(bool data, SpecializedArgumentType firstArg, SpecializedArgumentType secondArg)
    {
        return MyMethod(BitConverter.GetBytes(data), firstArg, secondArg);
    }
    public static MyReturnType MyMethod(bool data, String firstArg, String secondArg)
    {
        return MyMethod(BitConverter.GetBytes(data), firstArg, secondArg);
    }
    public static MyReturnType MyMethod(short data, SpecializedArgumentType firstArg, SpecializedArgumentType secondArg)
    {
        return MyMethod(BitConverter.GetBytes(data), firstArg, secondArg);
    }
    public static MyReturnType MyMethod(short data, String firstArg, String secondArg)
    {
        return MyMethod(BitConverter.GetBytes(data), firstArg, secondArg);
    }
    public static MyReturnType MyMethod(ushort data, SpecializedArgumentType firstArg, SpecializedArgumentType secondArg)
    {
        return MyMethod(BitConverter.GetBytes(data), firstArg, secondArg);
    }
    public static MyReturnType MyMethod(ushort data, String firstArg, String secondArg)
    {
        return MyMethod(BitConverter.GetBytes(data), firstArg, secondArg);
    }
    public static MyReturnType MyMethod(int data, SpecializedArgumentType firstArg, SpecializedArgumentType secondArg)
    {
        return MyMethod(BitConverter.GetBytes(data), firstArg, secondArg);
    }
    public static MyReturnType MyMethod(int data, String firstArg, String secondArg)
    {
        return MyMethod(BitConverter.GetBytes(data), firstArg, secondArg);
    }
    public static MyReturnType MyMethod(uint data, SpecializedArgumentType firstArg, SpecializedArgumentType secondArg)
    {
        return MyMethod(BitConverter.GetBytes(data), firstArg, secondArg);
    }
    public static MyReturnType MyMethod(uint data, String firstArg, String secondArg)
    {
        return MyMethod(BitConverter.GetBytes(data), firstArg, secondArg);
    }
    public static MyReturnType MyMethod(long data, SpecializedArgumentType firstArg, SpecializedArgumentType secondArg)
    {
        return MyMethod(BitConverter.GetBytes(data), firstArg, secondArg);
    }
    public static MyReturnType MyMethod(long data, String firstArg, String secondArg)
    {
        return MyMethod(BitConverter.GetBytes(data), firstArg, secondArg);
    }
    public static MyReturnType MyMethod(ulong data, SpecializedArgumentType firstArg, SpecializedArgumentType secondArg)
    {
        return MyMethod(BitConverter.GetBytes(data), firstArg, secondArg);
    }
    public static MyReturnType MyMethod(ulong data, String firstArg, String secondArg)
    {
        return MyMethod(BitConverter.GetBytes(data), firstArg, secondArg);
    }
    public static MyReturnType MyMethod(float data, SpecializedArgumentType firstArg, SpecializedArgumentType secondArg)
    {
        return MyMethod(BitConverter.GetBytes(data), firstArg, secondArg);
    }
    public static MyReturnType MyMethod(float data, String firstArg, String secondArg)
    {
        return MyMethod(BitConverter.GetBytes(data), firstArg, secondArg);
    }
    public static MyReturnType MyMethod(double data, SpecializedArgumentType firstArg, SpecializedArgumentType secondArg)
    {
        return MyMethod(BitConverter.GetBytes(data), firstArg, secondArg);
    }
    public static MyReturnType MyMethod(double data, String firstArg, String secondArg)
    {
        return MyMethod(BitConverter.GetBytes(data), firstArg, secondArg);
    }
    public static MyReturnType MyMethod(char data, SpecializedArgumentType firstArg, SpecializedArgumentType secondArg)
    {
        return MyMethod(BitConverter.GetBytes(data), firstArg, secondArg);
    }
    public static MyReturnType MyMethod(char data, String firstArg, String secondArg)
    {
        return MyMethod(BitConverter.GetBytes(data), firstArg, secondArg);
    } 
```

我尝试将任意对象作为数据类型，但是我不会在自动完成（Visual Studio ctrl-space）中获得好的显式数据类型。这真的必须如此冗长且难以维护吗？也许我对最初问题的处理方法需要修改？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-25T00:28:49.680

泛型呢？

```
public static MyReturnType MyMethod<T>(T data, SpecializedArgumentType firstArg, SpecializedArgumentType secondArg)
{
    ...
} 
```

这样你就可以这样做：

```
ushort data = 42;
var result = MyMethod<ushort>(data,firstArg,secondArg); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T01:01:03.303

您可以创建一个具有来自不同类型的隐式转换的数据类型，并将其用作第一个参数：

```
public class MyFirstParameter {

  public byte[] Bytes { get; private set; }

  private MyFirstParameter (byte[] bytes){
    Bytes = bytes;
  }

  public static implicit operator MyFirstParameter(int value) {
    return new MyFirstParameter(BitConverter.GetBytes(value));
  }

  public static implicit operator MyFirstParameter(long value) {
    return new MyFirstParameter(BitConverter.GetBytes(value));
  }

  // and a few more types

} 
```

那将是一堆隐式运算符，但是您只需要方法的两个重载：

```
public static MyReturnType MyMethod(MyFirstParameter data, SpecializedArgumentType firstArg, SpecializedArgumentType secondArg) {
  return MyMethod(data.Bytes, firstArg, secondArg);
}

public static MyReturnType MyMethod(MyFirstParameter data, String firstArg, String secondArg) {
  return MyMethod(data.Bytes, firstArg, secondArg);
} 
```

您可以使用具有隐式转换的任何类型调用方法，就像存在具有该类型的参数一样：

```
MyMethod(42, "", ""); 
```

# jquery - 多向滑块

> ID：15058316
> 
> 赞同：1
> 
> 时间：2013-02-25T00:16:03.437
> 
> 标签：jquery

我设置了一个滑块，这样每次单击下一个按钮时，图像都会从不同的方向滑入。例如; 第一次单击从顶部滑动第二次从左上到第三从左上等等等

到目前为止，我的前三个工作正常，但在第四次单击之后，图像只能从侧面滑入。

这是我到目前为止所拥有的

```
<script type="text/javascript">
        var totalslides = '6';
        var slidenum = 0;
        var slidenext = 0;
        var slideType = '';
        $(function(){
            $('#gallery-next').data('counter',1);
            $('#gallery-next').click(function() {
               slidenum = parseInt($('#gallery-next').data('counter'));
               slidenext = slidenum+1
               slideType = $('#'+slidenum+'-slide').attr('class')
               slideType = slideType.split('-')[0]

               if (slideType =='') slideType='up';
               else slideType = 'right';
                //alert('Next slideType is: ' + slideType)
                //hide(slide) is a jQueryUI function, so ensure you include that lib
               $('#'+slidenext+'-slide').delay(605).show('slide',{direction:slideType}, 1000);
               $('#'+slidenum+'-slide').fadeOut(600);

               $('#'+slidenext+'-text').delay(731).fadeIn(1000);
               $('#'+slidenum+'-text').fadeOut(600);

               slidenum = slidenum % totalslides + 1;
               $('#gallery-next').data('counter',slidenum);

               console.log(slideType);
            });
        });
    </script>

<div id="slider">

            <section class="horizontal-gallery">
                <img src="images/waikanae/crafar_h1.jpg" class="" id="1-slide"/>
                <p id="1-text" class="horizontal-gallery-text">This is the first image in the gallery </p>
            </section>

            <section class="vertical-gallery">
                <img src="images/waikanae/crafar_v1.jpg" class="picture2 init-hidden" id="2-slide"/>
                <p id="2-text" class="vertical-gallery-text init-hidden">This is the second image in the gallery, it should be sliding down</p>
            </section>

            <section class="horizontal-gallery">
                <img src="images/waikanae/crafar_h1.jpg" class="picture3 init-hidden" id="3-slide"/>
                <p id="3-text" class="horizontal-gallery-text text-3 init-hidden">This is the third image in the gallery it should be sliding in from the side </p>
            </section>

            <section class="vertical-gallery">
                <img src="images/waikanae/crafar_v1.jpg" class="picture4 init-hidden" id="4-slide"/>
                <p id="4-text" class="vertical-gallery-text text-4 init-hidden">This is the fourth image in the gallery, it should be sliding down </p>
            </section> 
```

[http://luvly.co.nz/space/test/waikanae-beach-house.html](http://luvly.co.nz/space/test/waikanae-beach-house.html)

如果有人能弄清楚为什么它不能正常工作，将不胜感激！干杯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T00:38:03.647

```
if (slideType =='') slideType='up';
else slideType = 'right'; 
```

逻辑不在这里。`slideType`只会在第一次为空，然后`slideType`将永远存在，因此总是向右转换。

使固定：

使用**rel**属性。

替换下一行：

```
slideType=$('#'+slidenum+'-slide').attr('class') 
slideType=slideType.split('-')[0]

if (slideType=='') slideType='up';
else slideType='right'; 
```

使用以下代码：

```
slideType = $('#'+slidenum+'-slide').attr('rel') 
```

然后使用 rel 属性指定您希望它是“正确”还是“向上”：

```
<img src="images/waikanae/crafar_h1.jpg" class="" id="1-slide" rel="up" />

...

<img src="images/waikanae/crafar_h1.jpg" class="" id="2-slide" rel="right" /> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T00:52:15.347

您的`slideType`退货一开始是空的，然后从那里开始是非空的。

所以，而不是：

```
if (slideType =='') slideType='up'; else slideType = 'right'; 
```

例如这样做：

```
var c = 0; //counter

$('#gallery-next').click(function() {
    // your code...
    slideType = c % 2 === 0 ? 'up' : 'right';
    c++;
    // your code...
}); 
```

我意识到，您有一个柜台，例如：

```
slidenum = parseInt($('#gallery-next').data('counter')); 
```

我看不出有任何理由将计数器保留在 jQuery`data`对象中。您应该使用如上所示的简单变量。

此外， 的值`totalslides`是一个字符串；它应该是一个**数字**：

```
var totalslides = '6'; //should be 6 
```

更好的是，不要让它成为一个常数值。添加另一张幻灯片时，您总是需要编辑代码。所以动态获取它：

```
var totalslides = $('#slider').children().length; 
```

# c# - c# 在没有 api 或 gdata 的频道上获取 youtube 订阅者数量？

> ID：15058318
> 
> 赞同：0
> 
> 时间：2013-02-25T00:16:08.043
> 
> 标签：c#, youtube, getelementbyid

我试图弄清楚如何使用 elementids 获取频道的订阅者数量，但它是一个 div，如果有人可以帮助我，我不知道如何获得 div 的价值，我将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T00:18:48.157

![在此处输入图像描述](../Images/45cee959dace3cb3b44005ae05cf6df0.png)

订阅者计数的类别似乎称为“统计值”。

只需使用 GetElementByClassName 或适当的等效项来获取“stat-value”跨度的值。

# nlp - 无法将制表符分隔文件输入到斯坦福分类器

> ID：15058319
> 
> 赞同：1
> 
> 时间：2013-02-25T00:16:13.823
> 
> 标签：nlp, stanford-nlp, csv

我在将制表符分隔的文件输入到[stanford 分类器](http://nlp.stanford.edu/software/classifier.shtml)时遇到问题。

尽管我能够成功浏览所有包含的斯坦福教程，包括新闻组教程，但当我尝试输入自己的训练和测试数据时，它无法正确加载。

起初我认为问题在于我使用 Excel 电子表格将数据保存到制表符分隔的文件中，这是某种编码问题。

但是当我执行以下操作时，我得到了完全相同的结果。首先，我将下面的演示数据逐字输入 gedit，确保在政治/体育类和随后的文本之间使用一个选项卡：

```
 politics    Obama today announced a new immigration policy.
sports  The NBA all-star game was last weekend. 
politics    Both parties are eyeing the next midterm elections.
politics    Congress votes tomorrow on electoral reforms.
sports  The Lakers lost again last night, 102-100.
politics    The Supreme Court will rule on gay marriage this spring.
sports  The Red Sox report to spring training in two weeks.
sports  Messi set a world record for goals in a calendar year in 2012.
politics    The Senate will vote on a new budget proposal next week.
politics    The President declared on Friday that he will veto any budget that doesn't include revenue increases. 
```

我将它保存为`myproject/demo-train.txt`和一个类似的文件为`myproject/demo-test.txt`.

然后我运行了以下命令：

```
java -mx1800m -cp stanford-classifier.jar edu.stanford.nlp.classify.ColumnDataClassifier 
-trainFile myproject/demo-train.txt -testFile myproject/demo-test.txt
```

好消息：这实际上运行时没有抛出任何错误。

坏消息：由于它不提取任何特征，它实际上无法估计一个真实的模型，并且`1/n`每个项目的概率默认为，其中`n`是类的数量。

然后我运行了相同的命令，但指定了两个基本选项：

```
java -mx1800m -cp stanford-classifier.jar edu.stanford.nlp.classify.ColumnDataClassifier 
-trainFile myproject/demo-train.txt -testFile myproject/demo-test.txt -2.useSplitWords =2.splitWordsRegexp "\s+"
```

结果是：

```
Exception in thread "main" java.lang.RuntimeException: Training dataset could not be processed
    at edu.stanford.nlp.classify.ColumnDataClassifier.readDataset(ColumnDataClassifier.java:402)
    at edu.stanford.nlp.classify.ColumnDataClassifier.readTrainingExamples  (ColumnDataClassifier.java:317)
    at edu.stanford.nlp.classify.ColumnDataClassifier.trainClassifier(ColumnDataClassifier.java:1652)
    at edu.stanford.nlp.classify.ColumnDataClassifier.main(ColumnDataClassifier.java:1628)
Caused by: java.lang.ArrayIndexOutOfBoundsException: 2
    at edu.stanford.nlp.classify.ColumnDataClassifier.makeDatum(ColumnDataClassifier.java:670)
    at edu.stanford.nlp.classify.ColumnDataClassifier.makeDatumFromLine(ColumnDataClassifier.java:267)
    at edu.stanford.nlp.classify.ColumnDataClassifier.makeDatum(ColumnDataClassifier.java:396)
    ... 3 more 
```

这些与我使用从 Excel 保存的真实数据时得到的结果完全相同。

更重要的是，我不知道如何理解`ArrayIndexOutOfBoundsException`. 当我`readline`在 python 中为我创建的演示文件和有效的教程文件打印出原始字符串时，格式似乎没有什么不同。所以我不知道为什么用一组文件而不是另一组文件会引发这个异常。

最后，另一个怪癖。在某一时刻，我认为换行符可能是问题所在。所以我从演示文件中删除了所有换行符，同时保留了制表符并运行了相同的命令：

```
java -mx1800m -cp stanford-classifier.jar edu.stanford.nlp.classify.ColumnDataClassifier 
-trainFile myproject/demo-train.txt -testFile myproject/demo-test.txt -2.useSplitWords =2.splitWordsRegexp "\s+"
```

令人惊讶的是，这次没有抛出 java 异常。但同样，它毫无价值：它将整个文件视为一个观察结果，因此无法正确拟合模型。

我现在已经花了 8 个小时在这上面，并且已经用尽了我能想到的一切。我是 Java 新手，但我认为这不应该是一个问题——根据斯坦福的[API 文档](http://nlp.stanford.edu/nlp/javadoc/javanlp/edu/stanford/nlp/classify/ColumnDataClassifier.html)，`ColumnDataClassifier`只需要一个制表符分隔的文件。

任何帮助将非常感激。

* * *

最后一点：我在 Windows 和 Ubuntu 上使用相同的文件运行了这些相同的命令，并且每个命令的结果都是相同的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-11-05T20:59:45.167

使用属性文件。在示例[斯坦福分类器示例中](http://www-nlp.stanford.edu/wiki/Software/Classifier/20_Newsgroups)

```
trainFile=20news-bydate-devtrain-stanford-classifier.txt
testFile=20news-bydate-devtest-stanford-classifier.txt
2.useSplitWords=true
2.splitWordsTokenizerRegexp=[\\p{L}][\\p{L}0-9]*|(?:\\$ ?)?[0-9]+(?:\\.[0-9]{2})?%?|\\s+|[\\x80-\\uFFFD]|.
2.splitWordsIgnoreRegexp=\\s+ 
```

第 3、4 和 5 行开头的数字 2 表示 tsv 文件中的列。所以在你的情况下你会使用

```
trainFile=20news-bydate-devtrain-stanford-classifier.txt
testFile=20news-bydate-devtest-stanford-classifier.txt
1.useSplitWords=true
1.splitWordsTokenizerRegexp=[\\p{L}][\\p{L}0-9]*|(?:\\$ ?)?[0-9]+(?:\\.[0-9]{2})?%?|\\s+|[\\x80-\\uFFFD]|.
1.splitWordsIgnoreRegexp=\\s+ 
```

或者如果您想使用命令行参数运行

```
java -mx1800m -cp stanford-classifier.jar edu.stanford.nlp.classify.ColumnDataClassifier -trainFile myproject/demo-train.txt -testFile myproject/demo-test.txt -1.useSplitWords =1.splitWordsRegexp "\s+" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T19:26:56.947

我遇到了和你一样的错误。

注意要分类的文本中的选项卡。

```
Caused by: java.lang.ArrayIndexOutOfBoundsException: 2 
```

这意味着，在使用制表符拆分字符串之后，分类器在某些时候需要 3 个元素的数组。

我已经运行了一个方法，它计算每行中的制表符数量，如果在某行没有两个制表符 - 这是一个错误。

# java - 数组中重复的最大频率

> ID：15058325
> 
> 赞同：-1
> 
> 时间：2013-02-25T00:16:56.847
> 
> 标签：java, algorithm

*在Java中以最小时间复杂度A = [1,2,3,4,1,1]*找到最大重复频率的最快方法是什么

 **答案 = 1*

如何才能做到这一点

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T00:45:23.620

（大部分）线性时间解决方案是使用 a`HashMap<Integer, Integer>`并构建出现在 A 中的所有值的直方图。

```
HashMap<Integer, Integer> m = new HashMap<Integer, Integer>();
for(int x : A)
{
    Integer v = m.get(x);
    if (null == v) {v = Integer.valueOf(0);}
    m.put(x, ++v);
} 
```

遍历整个地图并返回具有最大值的条目。使用该`entrySet()`方法，这也可以在线性时间内完成。*

# go - Go：函数指针，指向函数与接收器

> ID：15058329
> 
> 赞同：3
> 
> 时间：2013-02-25T00:17:14.113
> 
> 标签：go

我可以将函数指针设置为与接收器一起使用的函数比围绕它创建函数更简单吗？

```
package main

import "fmt"

type hello struct {
  name string
}

func (obj *hello) hello() {
  fmt.Printf("Hello %s\n", obj.name)
}

func ntimes(action func (), n int) {
  for i := 0; i < n; i++ {
    action()
  }
}

func main() {
  obj := hello{"world"}
  // Can I do following simpler?
  ntimes(func() {obj.hello();}, 3)
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-25T06:37:33.607

不是现在。但在 Go 1.1 中，这将成为可能。[Go 1.1 函数调用](https://docs.google.com/document/d/1bMwCey-gmqZVTpRax-ESeVuZGmjwbocYs1iHplK-cjo/pub)

[当蓝](http://swtch.com/~rsc/go11.html)线触及零时，Go 1.1 将准备就绪。

# c++ - 什么更快...循环或除法？

> ID：15058331
> 
> 赞同：-3
> 
> 时间：2013-02-25T00:17:41.037
> 
> 标签：c++, performance

在 C++ 中什么会更快？

循环或除法，考虑到循环的大小与被除数中的位数相当。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-25T00:21:30.937

这是一个循环，没有除法（使用 C++11 的 range-based `for`，但可以很容易地重写为没有）：

```
std::string s = "123";
int base = 10; // Must be <= 10, or the technique below won't work
int n = 0; for (char c : s) { n = n * base + (c - '0');  }
std::cout << n; // Should output 123 
```

**编辑：**

一个更安全、稍微复杂一点的解决方案，它将解析字符串直到遇到非数字字符：

```
#include <iostream>

int convert(std::string const& s, int base)
{
    int n = 0;
    for (char c : s)
    {
        if (!isdigit(c)) { break; }
        n = n * base + (c - '0');
    }

    return n;
}

int main()
{
    std::string s = "123d";
    cout << convert(s, 10) << endl; // Should output 123
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-25T00:21:13.683

你甚至不需要两个循环。您可以一次性完成，并且在创建整数时，只需在循环到达字符串末尾时停止循环。这比两个建议的解决方案都快。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-25T00:28:41.050

从零的初始数字开始。从左到右遍历字符串中的每个字符，将数字乘以 10，再加上当前数字的值。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-25T01:33:47.510

只需使用霍纳的规则。即，在 C 中，假设刺痛只是数字：

```
value = 0;
for(p = str; *p; p++)
   value = 10 * value + *p - '0'; 
```

一个循环，没有分裂。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-26T14:42:10.527

除法将花费恒定的时间（毕竟这是一条指令），将其与循环内存进行比较需要一些测量。回答这些问题的起点是Jon Bentley 在他的“Programming Pearls”中引用的程序[。](http://www.cs.bell-labs.com/cm/cs/pearls/appmodels.html)计时程序需要一些按摩才能在当前系统上编译，并调整输出使其不会一起运行。并且永远不要忘记编译器很聪明，通常令人惊讶的是，在考虑为了性能而修改代码之前。

# xml - OmniXML 可以反序列化包含对象列表的对象吗？

> ID：15058334
> 
> 赞同：3
> 
> 时间：2013-02-25T00:17:47.373
> 
> 标签：xml, delphi, delphi-xe2, pascal, omnixml

因此，例如如何序列化这样的对象：

```
unit u_Configuration;

interface

uses
  Classes,
  Generics.Collections,
  OmniXML,
  OmniXMLPersistent
  ;

type
  TMyObject = class (TPersistent)
    strict private
      fName : String;
    public
    published
      property Name: String read fName write fName;
  end;

  TConfiguration = class(TPersistent)
    strict private
      fTheList : TList<TMyObject>;
    private
    public
    published
      property TheList: TList<TMyObject> read fTheList write fTheList;

  end;

implementation

end. 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T19:05:48.243

OmniXML 序列化 TPersistent 的后代。它序列化它们的属性，但是对于具有对象类型的属性，只有 TPersistent 的后代被序列化。TList 源自 TEnumerable，后者源自 TObject，因此它不符合条件。OmniXML 为 TCollection 内置了特殊处理。

您可以手动序列化其他类。

# ios - iOS 使用 CameraUI 在 flashbuilder air 移动应用中保存图像

> ID：15058337
> 
> 赞同：0
> 
> 时间：2013-02-25T00:18:04.323
> 
> 标签：ios, actionscript-3, air, flash-builder

**我有一个我一直在开发的 iOS 空气应用程序。我正在尝试捕获图片，将文件保存到存储目录（不是相机胶卷），并将文件名保存在 sqlite db 中。

我已经尝试了很多不同的变体，但是在编写文件流以保存应用程序时会挂起。在 iPad 3 上进行测试。有人有什么建议吗？这几天让我发疯了。我已经在网上搜索过，但我很难过。**

```
 public var temp:File; // File Object to save name in database
        protected function selectPicture():void
        {

            myCam = new CameraUI();
            myCam.addEventListener(MediaEvent.COMPLETE, onComplete);

            myCam.launch(MediaType.IMAGE);
        }

        protected function onComplete(event:MediaEvent):void {

        //imageProblem.source = event.data.file.url;

            var cameraUI:CameraUI = event.target as CameraUI;

            var mediaPromise:MediaPromise = event.data;

            var mpLoader:Loader = new Loader();
            mpLoader.contentLoaderInfo.addEventListener(Event.COMPLETE, onMediaPromiseLoaded);

            mpLoader.loadFilePromise(mediaPromise);

        }

        private function onMediaPromiseLoaded(e:Event):void
        {
            var mpLoaderInfo:LoaderInfo = e.target as LoaderInfo;
            mpLoaderInfo.removeEventListener(Event.COMPLETE, onMediaPromiseLoaded);

            this.imageProblem.source = mpLoaderInfo.loader;

            var stream:FileStream = new FileStream();

            stream.addEventListener(Event.COMPLETE, showComplete);
            stream.addEventListener(IOErrorEvent.IO_ERROR, showError);

            try{

            this.messages.text = "Starting";

            stream.open( temp, FileMode.WRITE );
            stream.writeBytes(mpLoaderInfo.bytes);
            stream.close();

            }catch(e:Error){

                this.messages.text = e.message;

            }

        }

        protected function showError(e:IOErrorEvent):void{

            this.messages.text = e.toString();

        }

        protected function showComplete(e:Event):void{

            this.messages.text = "Completed Writing";
            this.imgName.text = temp.url;
            imagefile = temp;
            deleteFlag = 1;
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T05:00:30.837

由于您试图在`Sync mode`.

您需要使用`Async Mode`操作而不是同步模式文件操作。

```
stream.openAsync( temp, FileMode.WRITE ); 
```

试试这个

```
var stream:FileStream = new FileStream();
stream.addEventListener(Event.COMPLETE, showComplete);
stream.addEventListener(IOErrorEvent.IO_ERROR, showError);
stream.openAsync( temp, FileMode.WRITE );
stream.writeBytes(mpLoaderInfo.bytes);
stream.close(); 
```

请注意，当使用异步操作时，您不需要使用`try catch`.For 处理错误监听 IOErrorEvent 将在发生任何错误时捕获。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T14:22:13.100

我终于让它工作了，我在代码下面添加了注释来解释它为什么不起作用。

```
 public var temp:File;
        protected function selectPicture():void
        {

            myCam = new CameraUI();
            myCam.addEventListener(MediaEvent.COMPLETE, onComplete);

            myCam.launch(MediaType.IMAGE);
        }

        protected function onComplete(event:MediaEvent):void {

        //imageProblem.source = event.data.file.url;

            var cameraUI:CameraUI = event.target as CameraUI;

            var mediaPromise:MediaPromise = event.data;

            var mpLoader:Loader = new Loader();
            mpLoader.contentLoaderInfo.addEventListener(Event.COMPLETE, onMediaPromiseLoaded);

            mpLoader.loadFilePromise(mediaPromise);

        }

        private function onMediaPromiseLoaded(e:Event):void
        {
            var mpLoaderInfo:LoaderInfo = e.target as LoaderInfo;
            mpLoaderInfo.removeEventListener(Event.COMPLETE, onMediaPromiseLoaded);

            this.imageProblem.source = mpLoaderInfo.loader;

                /// Here was the solution

                var bitmapDataA:BitmapData = new BitmapData(mpLoaderInfo.width, mpLoaderInfo.height);
                bitmapDataA.draw(mpLoaderInfo.content,null,null,null,null,true);  

                /// I had to cast the loaderInfo as BitmapData 

                var bitmapDataB:BitmapData = resizeimage(bitmapDataA, int(mpLoaderInfo.width / 4), int(mpLoaderInfo.height/ 4));  // function to shrink the image

                var c:CameraRoll = new CameraRoll();
                c.addBitmapData(bitmapDataB);

                var now:Date = new Date();
                var f:File = File.applicationStorageDirectory.resolvePath("IMG" + now.seconds + now.minutes + ".jpg");                                    
                var stream:FileStream = new FileStream()
                stream.open(f, FileMode.WRITE);                                         

                // Then had to redraw and encode as a jpeg before writing the file

                var bytes:ByteArray = new ByteArray();
                bytes = bitmapDataB.encode(new Rectangle(0,0, int(mpLoaderInfo.width / 4) , int(mpLoaderInfo.height / 4)), new JPEGEncoderOptions(80), bytes);

                stream.writeBytes(bytes,0,bytes.bytesAvailable);
                stream.close(); 

                this.imgName.text = f.url;

            imagefile = f;
            deleteFlag = 1;

        } 
```

# html - 文本区域填充剩余宽度

> ID：15058340
> 
> 赞同：0
> 
> 时间：2013-02-25T00:18:28.530
> 
> 标签：html, css

我有一个`<div>`包含一个`<img>`和一个`<textarea>`这样的：

```
<div style="width: 50%">
 <img />
 <textarea>...</textarea>
</div> 
```

`<img>`具有可变宽度。如何使 textarea 填充剩余空间？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-25T00:36:16.483

您可以`display: table-cell`像这样使用并帮助实现这一目标：

**HTML**

```
<div class="container">
    <div class="containerRow">
        <div class="imageContainer">
            <img href="[your_image_address]" alt="[your_image_alt]" />
        </div>
        <div class="textareaContainer">
            <textarea>[your_textarea_content]</textarea>
        </div>
    </div>
</div> 
```

**CSS**

```
.container {
    display: table;
    width: 100%;
}
.containerRow {
    display: table-row;
}
.imageContainer {
    display: table-cell;
    vertical-align: top;
    width: 1px;
}
.textareaContainer {
    display: table-cell;
    vertical-align: top;
}
.textareaContainer textarea {
    width: 100%;
} 
```

**[演示](http://jsfiddle.net/BA82E/)**

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-25T00:26:12.960

确保应该填满空间的父母和孩子使用`width:100%`相对于他们的父母容器。因此`<textarea>`需要定义为具有 100% 的宽度，以及图像。同样，它们需要被定义为`display:inline`或`inline-block`对比`block`，以便它们彼此相邻出现。另一种选择是使用 CSS 表作为：`<div>`with `display:table`，`<div>`with`display:table-row`和 then `<span>`with`display: table-cell`用于具有 and 的`<image>`列`<textarea>`；分别。这会将这些元素放入一个 CSS 表中，如果定义为 width:100% 将填满其父级。

# c# - 从数据库加载 Windows Phone

> ID：15058343
> 
> 赞同：0
> 
> 时间：2013-02-25T00:18:41.537
> 
> 标签：c#, database, windows-phone-7, xaml

我已经通过 WCF 创建了应用程序并连接了数据库，在主页中加载了产品名称（数据库的第一列）。

我怎么能意识到：

> 当我点击“橙色”时，ItemInfoPage 被打开，第 2、3 列的信息被加载到页面

**例子**

*D B：*

```
Name     Color     Number
Orange   Orange    25
Apricot  Yellow    14
Apple    Red       18 
```

*MainPage.xaml：*

```
Things:
Orange click--> ItemInfo.xaml opens --> Color: Orange, Number: 25 is loaded on page
Apricot click--> ItemInfo.xaml opens --> Color: Yellow, Number: 14 is loaded on page
Apple click--> ItemInfo.xaml opens --> Color: Red, Number: 18 is loaded on page 
```

MainPage.xaml 中的代码：

```
<phone:PhoneApplicationPage.Resources>
    <DataTemplate x:Key="StudentDataTemplate">
        <StackPanel Orientation="Horizontal">
            <TextBlock Margin="10" Text="{Binding Name}" />
        </StackPanel>
    </DataTemplate>
</phone:PhoneApplicationPage.Resources>

<Grid x:Name="ContentPanel" Grid.Row="1" Margin="12,0,12,0">
        <ListBox ItemsSource="{Binding}" 
             ItemTemplate="{StaticResource StudentDataTemplate}"
             Height="Auto"
             Width="460"
             Margin="10,10,0,0" 
             HorizontalAlignment="Left" 
             VerticalAlignment="Top"
             Name="ListBox1"/>
        <Button Click="navigateitem" 
Content="Button" 
Height="72"
HorizontalAlignment="Left" 
Margin="142,351,0,0" 
Name="button1" 
VerticalAlignment="Top" 
Width="160" />
    </Grid> 
```

如何加载必要项目的颜色和数字列？

**如何从表的必要行加载数据？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T07:57:04.127

只需看看这里并从一个简单的复制/粘贴示例开始了解

[http://msdn.microsoft.com/en-us/library/windowsphone/develop/hh202876(v=vs.105).aspx](http://msdn.microsoft.com/en-us/library/windowsphone/develop/hh202876(v=vs.105).aspx)

# extjs - Sencha touch NestedList：关闭 detailsCard 时如何停止音频播放器

> ID：15058346
> 
> 赞同：0
> 
> 时间：2013-02-25T00:18:52.113
> 
> 标签：extjs, sencha-touch-2, html5-audio

我在 Sencha touch 2.1 应用程序的 NestedList 的 detailsCard 中有一个 Ext.Audio 组件。点击 detailsCard 中的后退按钮时，我无法理解如何停止音频流。我也不明白如何只为 detailsCard 的后退按钮收听“后退按钮点击事件”。这是我的代码：

```
Ext.define('App.view.Lead', {
extend: 'Ext.NestedList',
xtype: 'lead',
config: {
   title: 'Lead',
   iconCls:'lead',
       store: 'LeadStore',
   displayField: 'title',
   detailCard: { html: 'details' }
},
getDetailCard: function(node) {
          if (node) {
              return {
                  xtype: 'container',
                  layout: 'fit',
                  items: [
                      {
                          xtype: 'panel',
                          layout:'fit',
                          html: node.get('text')     
                      },
                      {               
                          xtype: 'audio',
                          docked: 'bottom',
                          url  : node.get('audio'),
                          autoPause: true,
                      },
                      ]
              }
          } 
     } 
```

});

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T06:18:46.300

您可以为您的音频提供一个`id`配置以供参考：

```
{               
    xtype: 'audio',
    docked: 'bottom',
    url  : node.get('audio'),
    autoPause: true,
    id: 'audio'
} 
```

要处理后退按钮，您可以使用嵌套列表的[后退](http://docs.sencha.com/touch/2-1/#!/api/Ext.dataview.NestedList-event-back)事件以及[停止](http://docs.sencha.com/touch/2-1/#!/api/Ext.Audio-method-stop)方法来停止音频：

```
back: function() {
    Ext.getCmp('audio').stop();
} 
```

如果您使用`itemId`.

```
itemId: audio 
```

然后你可以使用[Ext.ComponentQuery](http://docs.sencha.com/touch/2-1/#!/api/Ext.ComponentQuery-method-query)来检索它：

```
Ext.ComponentQuery.query('#audio')[0].stop(); 
```

# python - 在文件中查找方法字符串

> ID：15058351
> 
> 赞同：0
> 
> 时间：2013-02-25T00:19:22.360
> 
> 标签：python

现在我有这个找到方法

```
def getMethod(text, a, filetype):
    start = a
    fin = a
    if filetype == "cs":
        for x in range(a, 0, -1):
            if text[x] == "{":
                start = x
                break
        for x in range(a, len(text)):
            if text[x] == "}":
                fin = x
                break
    return text[start:fin + 1] 
```

如何获取索引`a`所在的方法？

我不能只是找到`{`，`}`因为你可以拥有一些`new { }`不起作用的东西

如果我有一个包含几个方法的文件，并且我想找到 x 的索引所在的方法，那么我想要该方法的主体，例如，如果我有文件

```
private string x(){
    return "x";
}

private string b(){
    return "b";
}

private string z(){
    return "z";
}

private string a(){
    var n = new {l = "l"};
    return "a";
} 
```

我得到了“a”的索引，可以说是 100

然后我想找到那个方法的主体。所以里面的一切`{`和`}`

所以这...

```
{
    var n = new {l = "l"};
    return "a";
} 
```

但是使用我现在拥有的它会返回：

```
 {l = "l"};
    return "a";
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T01:47:01.417

如果我的解释是正确的，那么您似乎正在尝试解析 C# 源代码以查找包含文件中给定位置的 C# 方法`a`，`.cs`其内容包含在`text`.

不幸的是，如果你想做一个完整而准确的工作，我认为你需要一个完整的[C# parser](https://stackoverflow.com/questions/81406/parser-for-c-sharp)。

如果这听起来工作量太大，我会考虑使用与 C# 兼容的[ctags](http://ctags.sourceforge.net/FORMAT)版本来生成标记文件，然后在标记文件中搜索适用于给定源文件行而不是原始文件的方法源文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T02:46:41.207

正如西蒙所说，如果您的问题是解析源代码，最好的办法是为该语言获取合适的解析器。

但是，如果您只是想匹配大括号，则有一个众所周知的算法：[Python parsing bracketed blocks](https://stackoverflow.com/questions/1651487/python-parsing-bracketed-blocks)

请注意，由于源代码是一个复杂的野兽，所以不要指望它能够 100% 工作。

# ios - 如何从列表中设置预设值？

> ID：15058352
> 
> 赞同：1
> 
> 时间：2013-02-25T00:19:28.760
> 
> 标签：ios, objective-c, xcode, local

我正在开发计算费用的应用程序。麻烦的是，美国的费用与德国不同，法国的费用与英国不同，ecc ......我想在人们可以设置他们的国家的偏好中发表意见，我的应用程序在计算费用时会获得国家的费用。 ..一种本地化

像这样的东西：

```
 -> USA -> archive of USA's local fees -> local fees applied during elaboration
         / 
settings --> UK -> archive of UK's local fees -> local fees applied during elaboration
         \
          -> France -> archive of french's local fees -> local fees applied during elaboration 
```

怎么能做到这一点？非常感谢，马特奥！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T00:35:58.013

使用[多态性](http://en.wikipedia.org/wiki/Polymorphism_in_object-oriented_programming)。. .

*   使用计算费用的方法创建一个协议或基类，然后为您希望支持的每个国家/地区创建一个实现。
*   将用户的偏好存储在 NSUserDefaults 之类的地方。. 建议使用枚举。
*   使用工厂检索符合协议的对象实例，其中参数是用户所在的国家/地区。

# symfony - Symfony2动态制作字段实体

> ID：15058357
> 
> 赞同：0
> 
> 时间：2013-02-25T00:19:55.643
> 
> 标签：symfony, symfony-2.1

我在页面上看到了一个实体的多个字段，我希望每个字段都可以通过 ajax 进行编辑，一次一个。为此，我想出了为所有领域构建一个独特的控制器的想法，但我无法让它工作，我不知道这是否是我尝试做的正确解决方案。我的页面显示字段：

```
<div>
 <form class="ajax" action="{{ path('ajax_setSocial', { 'id': entity.id }) }}" method="post" {{ form_enctype(form) }}>
  <div class="editor">
        {{ form_errors(form) }}
        <div class="editLabel pls lti">{{ form_label(form.ragSocial) }}</div>
        <div class="editField"> 
            <div class="ptm">
                {{ form_widget(form.ragSocial) }} {{ form_errors(form.ragSocial) }}
            </div>     
            {{ form_widget(form._token) }}
            <div class="mtm">
                <button class="btn btn-primary disabled save" type="submit" disabled>Save</button>
                <button class="btn ann">Cancel</button>
            </div>
        </div>
  </div>
  </form>
 </div>
 <div>
  <form class="ajax" action="{{ path('ajax_setSocial', { 'id': entity.id }) }}" method="post" {{ form_enctype(form) }}>
  <div class="editor">
        {{ form_errors(form) }}
        <div class="editLabel pls lti">{{ form_label(form.pIva) }}</div>
        <div class="editField"> 
            <div class="ptm">
                {{ form_widget(form.pIva) }} {{ form_errors(form.pIva) }}
            </div>     
            {{ form_widget(form._token) }}
            <div class="mtm">
                <button class="btn btn-primary disabled save" type="submit" disabled>Save</button>
                <button class="btn ann">Cancel</button>
            </div>
        </div>
  </div>
  </form>
 </div> 
```

在我的控制器中：

```
public function setSocialAction(Request $request, $id)
{
    $em = $this->getDoctrine()->getManager();
    $entity = $em->getRepository('MyBusinessBundle:Anagrafica')->find($id);

    if (!$entity) {
        throw $this->createNotFoundException('Unable to find Anagrafic entity.');
    }
    $field = $request->get('field');
    $class = $field.'Type()';
    $form = $this->createForm(new $class, $entity);
    $form->bind($request);

    if ($form->isValid()) {
        $em->persist($entity);
        $em->flush();

        $response = new Response();
        $output = array('success' => true);
        $response->headers->set('Content-Type', 'application/json');
        $response->setContent(json_encode($output));

        return $response;
    } 
```

**$class = $field.'Type()';
$form = $this->createForm(new $class, $entity);** 使用这些代码行，我尝试创建生成表单字段的动态类，但由于它被转换为字符串并且我得到的错误是：

```
Fatal error: Class 'ragSocialType()' not found 
```

但上课是！并且也被称为顶级文件..我希望我解释一下，我接受任何建议以遵循更好的方法！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T11:38:57.807

```
$class = $field.'Type'; //remove the ()
$form = this->createForm(new $class, $entity); 
```

# c++ - 使用现有 C 源时出现 C++ 错误 C2440

> ID：15058360
> 
> 赞同：3
> 
> 时间：2013-02-25T00:19:58.003
> 
> 标签：c++, c, visual-studio

我在 VS2005 中编译 C++ 项目时遇到 C2440 错误的问题。该错误是由于另一个项目中的一些现有 C 代码，我依赖于它将 void 指针转换为 char 或 int 指针。

代码类似于：

```
void * bbb;
... // some code which defines the void pointer
int * aaa = bbb; 
```

但是在 C++ 中，我需要专门将类型强制转换为有效，例如：

```
int * aaa = (int *)bbb; 
```

我的问题是 VS2005 中是否存在一个标志或编译选项，它允许我用 C++ 编译我的主项目，并从我想编译为 C 的依赖项目中忽略这个错误？

我宁愿不更改任何原始来源，因为它是一个共享项目。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T00:24:29.253

如果您将文件命名为“something.c”，编译器将 [除非明确告知] 将其编译为`C`（因此很乐意接受您的指针转换而不使用强制转换）。名为“something.cpp”的文件将被编译为 C++，您需要进行强制转换以将指针转换为不同的类型，即使它是`void`指针。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T05:43:39.460

唯一的方法是编辑导致问题的头文件。事实证明，可以将少量文件合并回共享项目。

在 VisualC++ 中无法解决这个问题。我过去常常`-fpermissive`忽略 gcc 中的错误。

所以我刚刚更新到：

```
int * aaa = (int *)bbb; 
```

# ruby-on-rails - 通过 new_item 表单传递 User_ID

> ID：15058361
> 
> 赞同：0
> 
> 时间：2013-02-25T00:20:03.110
> 
> 标签：ruby-on-rails, ruby, erb

我有一个简单的应用程序，允许用户创建“项目”。在 _form 上，它要求的唯一数据是 'content' 和 'user_id'，它们目前是一个数字选择器，用于将 user_id 分配给项目以获得所有权。但我想要做的是让表单假设 user_id 是当前用户的 ID（使用设计）。这样其他人就不能将“项目”分配给其他用户。说得通？这是表格。

_form.html.erb

```
<%= form_for(@item) do |f| %>
  <% if @item.errors.any? %>
    <div id="error_explanation">
      <h2><%= pluralize(@item.errors.count, "error") %> prohibited this item from being saved:</h2>

      <ul>
      <% @item.errors.full_messages.each do |msg| %>
        <li><%= msg %></li>
      <% end %>
      </ul>
    </div>
  <% end %>

  <div class="field">
    <%= f.label :content %><br />
    <%= f.text_field :content %>
  </div>
  <div class="field">
    <%= f.label :user_id %><br />
    <%= f.number_field :user_id %>
  </div>
  <div class="actions">
    <%= f.submit %>
  </div>
<% end %> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T01:23:37.073

您应该使用模型中的关联。

例如你的 Items 模型应该有`belongs_to :user`

那么您将只使用`:user`方法而不是`user_id`属性。

但你真的可以让这更简单。

安装 simple_forms gem，它会让你的生活更轻松。

```
gem "simple_form" 
```

然后

```
<%= simple_form_for(@item) do |f| %>

    <%= f.input :content %>

    <%= f.association :user %>

    <%= f.button :submit %>

<% end %> 
```

# c# - 如何从 Windows 控件的文本框中获取文本？我怎么知道它是一个文本框？

> ID：15058362
> 
> 赞同：0
> 
> 时间：2013-02-25T00:20:12.463
> 
> 标签：c#, winapi, ui-automation, sendmessage, windows-controls

我使用 spy++ 来找到所需 Windows 控件的正确句柄，该控件属于不受管理的独立应用程序。请注意，spy++“属性检查器”提到此窗口没有任何子（或父）窗口。

我还设法使用以下代码取回窗口的名称：

```
 //the invokes are included aswell
    const int WM_GETTEXT = 0x000D;
    static void Main(string[] args)
    {
        IntPtr handle = new IntPtr(Convert.ToInt32("00070818", 16)); 
        int nChars = GetWindowTextLength(handle); //win32 function
        int length = 200;
        StringBuilder sb = new StringBuilder(length);
        SendMessage(handle, WM_GETTEXT, length, sb);
        Console.WriteLine(sb.ToString());           

    } 
```

这个窗口比它的标题有更多的信息，这就是我似乎用 WM_GETTEXT 得到的所有信息（将长度的值更改为 200 没有帮助，无论如何都是一个长镜头）。

接下来，我尝试了一种使用 UI 自动化的不同方法：

```
static void Main(string[] args)
{
    AutomationElement target = AutomationElement.FromHandle(handle);
    TextPattern textPattern = target.GetCurrentPattern(TextPattern.Pattern) as TextPattern;
} 
```

但我得到了这个错误：

> UIAutomationClient.dll 中出现“System.InvalidOperationException”类型的未处理异常
> 
> 附加信息：不支持的模式。

最重要的是，我也尝试过使用 Microsoft Inspect.exe，但在 UI 自动化和 MSAA 模式下，它都无法专注于窗口中的文本。

* * *

是不是说数据不能用 UI 自动化实现？？还是我应该只是使用错误的方法/类型？

除了使用 GetWindowText、WM_GETTEXT 或 UI 自动化之外，还有其他方法可以从此窗口获取数据吗？

我对这些东西还很陌生，但我正在努力学习。此外，我没有当前的潜在客户，因此非常感谢任何有用的评论/答案！如果您确实回答**，请务必包含有用的关键字**，以便我能够了解有关您的解决方案的更多信息

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T00:42:55.680

标签（即静态控件）和文本框是具有自己句柄的子窗口，因此它们对 Spy++ 可见。如果您的目标 Window 没有子窗口，则它没有使用标签或文本框，它正在绘制文本本身，您将无法使用`GetWindowText`or检索它`WM_GETTEXT`。

文本可能会通过[UI Automation](http://msdn.microsoft.com/en-us/library/windows/desktop/ee684009.aspx)（屏幕阅读器使用的 API）公开。使用[UISpy.exe 或 Inspect.exe](https://stackoverflow.com/questions/1848721/where-do-i-get-ui-spy)查看文本是否可访问。

# c++ - C++ 的向量元素的顺序

> ID：15058363
> 
> 赞同：2
> 
> 时间：2013-02-25T00:20:19.893
> 
> 标签：c++, vector

下面的一段 c++ 代码给出了

```
int main()
{
    vector <int> myvect(3,0);
    vector <int> :: iterator it;
    it = myvect.begin();
    myvect.insert(it,200);
    myvect.insert(it+5,400);         //Not sure what 5 makes the difference here
    cout << myvect[0] << endl << myvect[1];
} 
```

输出 ：

```
200
400 
```

相同的代码稍作改动

```
int main()
{
    vector <int> myvect(3,0);
    vector <int> :: iterator it;
    it = myvect.begin();
    myvect.insert(it,200);
    myvect.insert(it+4,400);         //Not sure what 4 makes the difference here
    cout << myvect[0] << endl << myvect[1];
} 
```

输出：

```
400
200 
```

有人能告诉我为什么向迭代器添加 4 或 5 会改变元素的顺序吗？

谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-25T00:26:02.480

你的程序有**未定义的行为**。

您正在创建一个由 3 个元素组成的向量（全部初始化为 0），并且在 position 处插入元素`v.begin() + 5`，该位置超出了向量的末尾。

此外，您正在使用迭代器 (在位置指向*之前*`it)`插入元素之后。根据 C++11 标准的第 23.3.6.5/1 段：*`it`*

 *> [...] 如果没有发生重新分配，**则插入点之前的**所有迭代器和引用仍然有效。[...]

因此，迭代器`it`本身并不能保证在语句之后有效`myvect.insert(it, 200)`，在下一条指令（`myvect.insert(it + 4, 400)`）中使用它又是未定义的行为。

您不能期望具有未定义行为的程序有任何东西。它可能会崩溃，给你奇怪的结果，或者（在最坏的情况下）表现得和你预期的一样。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T00:31:18.267

成员函数需要一个有效的迭代器，该迭代器`vector::insert(const_iterator, const value_type&)`引用向量但不是有效的迭代器。`it+4``it+5`

在第一次插入之前，`it+3`是一个有效的（不可解引用的）迭代器，仅指向向量序列的末尾，但`it+4`无效。插入`it` *可能*会失效，在这种情况下，没有任何表达式 using`it`是有效的，当然不是`it+5`因为该序列此时只有四个元素。

如果像这样更改，代码将是有效的：

```
it = myvect.begin();
myvect.insert(it,200);
it = myvect.begin();     // make it valid again
myvect.insert(it+4,400); 
```*

# android - Android LocationManager.getLastKnownLocation()

> ID：15058364
> 
> 赞同：1
> 
> 时间：2013-02-25T00:21:01.683
> 
> 标签：android

来自 android 文档 LocationManager.getLastKnownLocation()：

> 返回一个 Location 指示从给定提供程序获得的最后一个已知位置修复的数据。
> 
> ```
> Note that this location could be out-of-date, for example if the device was turned off and moved to another location. 
> ```

提供商多久更新一次设备位置？它是如何工作的？

我问的原因是我不想使用locationListener，我只需要在按钮单击时获取当前地理位置，就是这样。我可以这样做吗？

```
 final LocationManager mlocManager = (LocationManager) getActivity()
            .getSystemService(Context.LOCATION_SERVICE);
    final Location currentGeoLocation = mlocManager
            .getLastKnownLocation(LocationManager.NETWORK_PROVIDER); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T00:52:31.867

如果您绝对等不及可以尝试的位置`getLastKnownLocation()`，但您需要准备好获得`NULL`结果。

`getLastKnownLocation()`只是您指定的提供者的最后一个位置的缓存。在某些情况下，根本不会有一个，例如手机刚刚重新启动时。即使有缓存位置，它也可能不准确。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T00:26:41.047

> 提供商多久更新一次设备位置？它是如何工作的？

这取决于，你可能永远不会知道。如果设备接收良好，则有关用户位置的更新将迅速触发。

> 我可以这样做吗？

并不真地。如果发射得太快，那么您将无法获得任何位置。如果用户没有很好的接收，那么您可能需要 10 秒才能对用户的位置有一个合理的了解。我认为你必须稍微不同地处理这个问题。恐怕我必须推荐 locationListeners ：P

# window - 在 require.js 中模拟全局窗口对象

> ID：15058365
> 
> 赞同：17
> 
> 时间：2013-02-25T00:21:08.030
> 
> 标签：window, mocking, requirejs

1.  我有一个使用 window.applicationCache 进行离线访问的 Web 应用程序。
2.  我所有管理 appCache 的代码（例如检查/更新/交换缓存）都被封装到一个“缓存控制器”对象中。
3.  我有单元测试来测试我的“缓存控制器”功能。为了测试，我暂时用我自己的模拟版本替换了本机 window.applicationCache 对象（因为我只想测试*我的*代码，而不是浏览器的 appCache 实现），例如。

    ```
    window.applicationCache = { /* my appCache mock */ };
    // unit tests run here. Code under test references window.applicationCache. 
    ```

不久前（大约是 Chrome 16）这种方法非常有效。然后，Mac 和 Windows 平台上的 Chrome 17 删除了修补浏览器默认 window.applicationCache 属性的功能（奇怪的是，它在 Chrome for Linux 中对于所有版本（包括 Chrome 26）仍然可以正常工作）。当时，我为此[记录了一个 Chromium 错误](https://code.google.com/p/chromium/issues/detail?id=106814)；但不幸的是，该错误报告仍被列为“未确认”。

无论如何，我刚刚将我的应用程序从传统的“浏览器全局变量”（即通过脚本标签加载 *.js 文件；所有 JS 对象都是全局的）移植到 AMD 样式的模块，使用[require.js](http://requirejs.org)作为模块加载器。

AMD（或 CommonJS）的好处之一是依赖注入，您的代码在其中获得对任何依赖对象的**本地引用**，而不是依赖于全局引用，例如。

```
require(['foo'], function(Foo) {
  var bar = new Foo();
}); 
```

...这使得对象模拟变得容易，因为您可以配置模块加载器以在测试模式下为“foo”传递一个模拟对象。

我曾希望通过转向依赖注入，我可以解决我的 applicationCache 问题（因为传递到我的模块中的“窗口”引用可以是全局窗口对象，也可以是模拟对象）。

但是我不确定如何让 require.js 将“窗口”作为依赖项注入到我的模块中？

是否可以（可能使用[shim 配置](http://requirejs.org/docs/api.html#config-shim)？）定义一个“窗口”模块；然后可以将其传递给对全局“窗口”对象进行操作的任何代码？这样我就可以做这样的事情：

```
require(['???'], function(window) {
  // 'window' here is the real window object, or for testing it's a mock window object
  window.applicationCache.update();
}); 
```

...在哪里 '？？？' 是一个引用窗口对象的模块名称。

或者我是否需要定义我自己的模块来导出“窗口”，它可以为单元测试进行不同的映射，例如。

```
// window.js
define(function() {
  return window;  // real global window object
});

// window-mock.js
define(function() {
  return {
    applicationCache: { /* mock version of appCache */ }
  }
});

// for unit testing, remap 'window' to the mock version
require.config({
  map: {
    "cache-controller": {
      "window": "window-mock"
    }
  }
});

// cache-controller.js
require(['window'], function(window) {
  window.applicationCache.update();
}); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-08T07:28:43.443

我回答了我自己的问题。我决定如上所述创建 window.js 和 window-mock.js 模块，这允许我在运行单元测试时传递模拟版本，并在正常运行时使用“真实”窗口对象。

# python-2.7 - 函数罗马到数字的索引超出范围错误。我知道它为什么会发生，但不知道如何解决它

> ID：15058374
> 
> 赞同：0
> 
> 时间：2013-02-25T00:22:10.543
> 
> 标签：python-2.7

```
''' Convert Arabic to Roman numeral and vice versa. '''

def arabic_to_roman(number):
    ''' Converts an integer to a Roman numeral.  Notice
        the patterns for computing M, C, and X are the
        same.  Computing D, L, and V follow the same pattern.
    '''
    output_string = ''

    # compute M
    roman = number / 1000
    if number >= 900 and number < 1000:
        output_string += 'CM'
        number -= 900
    else:
        output_string += roman * 'M' 
        number -= roman * 1000
        if number >= 900 and number < 1000:
            output_string += 'CM'
            number -= 900

    # compute D
    if number >= 400 and number < 900:
        if number < 500: 
            output_string += 'CD'
            number -= 400
        else:
            output_string += 'D'
            number -= 500

    # compute C
    roman = number / 100
    if number >= 90 and number < 100:
        output_string += 'XC'
        number -= 90
    else:
        output_string += roman * 'C'
        number -= roman * 100
        if number >= 90 and number < 100:
            output_string += 'XC'
            number -= 90

    # compute L
    if number >= 40 and number < 90:
        if number < 50:
            output_string += 'XL'
            number -= 40
        else:
            output_string += 'L'
            number -= 50

    # compute X
    roman = number / 10
    if number == 9:
        output_string += 'IX'
        number -= 9
    else:
        output_string += roman * 'X'
        number -= roman * 10
    if number == 9:
        output_string += 'IX'
        number -= 9

    # compute V
    if number >= 4 and number < 9:
        if number == 4:
            output_string += 'IV'
            number -= 4 
        else:
            output_string += 'V'
            number -= 5

    # compute I
    output_string += number * 'I'
    number -= number

    # output the result of the conversion 
    print '\nRoman numeral:', output_string 

def roman_to_arabic(num_string):
    ''' Convert a Roman numeral to an Arabic numeral. '''

    result = 0
    result1 = 0
    result2 = 0
    result3 = 0
    now = 0
    previous = 0
    index = -1

    ''' <Enter your code here ...> '''

    for i in (num_string):
        x = num_string[index]
        y = num_string[index-1]
        if x == 'I':
            now = 1
        if x == 'V':
            now = 5
        if x == 'X':
            now = 10
        if x == 'L':
            now = 50
        if x == 'C':
            now = 100
        if x == 'D':
            now = 500
        if x == 'M':
            now = 1000
        if y == 'I':
            previous = 1
        if y == 'V':
            previous = 5
        if y == 'X':
            previous = 10
        if y == 'L':
            previous = 50
        if y == 'C':
            previous = 100
        if y == 'D':
            previous = 500
        if y == 'M':
            previous = 1000
        if y == ' ':
            previous = 0
        if previous < now:
            result1 = now - previous
            print result1
            result += result1
            index += -1
        elif previous == now:
            result2 = previous + now
            print result2
            result += result2
            index += -1
        else:
            result3 = now
            print result3
            result += result3
        index += -1
        print '\nArabic numeral:', result
    print '\nArabic numeral:', result

def main():
    ''' The program driver. '''

    conversion_option = raw_input('Conversion Options: \n    (1) Arabic to Roman \n    (2) Roman to Arabic \nYour choice? ')

    print # prints an empty line 
    if conversion_option == '1':
        arabic_num = int(raw_input('Enter an Arabic numeral between 1 and 3999: '))
        arabic_to_roman(arabic_num)
    else:
        string_num = raw_input('Enter a Roman numeral between I and MMMCMXCIX: ')
        string_num = " " + string_num
        roman_to_arabic(string_num)

main() 
```

# python - 如何在 Python 中定义相互依赖的函数？

> ID：15058379
> 
> 赞同：2
> 
> 时间：2013-02-25T00:23:55.387
> 
> 标签：python, function, projectile

给定以下公式，我需要绘制粒子在时间 t 的位置：`s(t) = -0.5*g(s)*t^2+v0*t`，其中`g(s) = G*M/(R+s(t))^2`（`G`，`M`， 和`R`是常数，`s`是一个值，而不是函数`s(t)`）。粒子被垂直发射，我想每秒打印一次它的当前位置，直到它撞到地面。但是我无法弄清楚如何在定义一个函数之前不使用另一个函数来定义它。到目前为止，这是我的代码：

```
G =  6.6742*10^(-11)
M = 5.9736*10^24
R = 6371000
s0 = 0
v0 = 300
t = 0
dt = 0.005

def g(s):
    def s(t):
        s(t) = -0.5*g(s)*t^2+v0*t
    g(s) = G*M/(R+s(t))^2

def v(t):
    v(t) = v(t-dt)-g(s(t-dt))*dt

while s(t) >= 0:
    s(t) = s(t-dt)+v(t)*dt
    t = t+dt

if t == int(t):
    print s(t) 
```

当我运行该函数时，它说它无法分配函数调用。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-25T00:34:56.837

该错误意味着您不能编写`s(t) = x`，因为`s(t)`它是一个函数，并且对函数的赋值是使用`def ...`. 相反，你会想要返回值，所以你会像这样重写它：

```
def g(s):
    def s(t):
        return -0.5*g(s)*t^2+v0*t
    return G*M/(R+s(t))^2 
```

但是，这也存在其他问题。从计算的角度来看，这个计算永远不会终止。Python 不是代数系统，无法求解某些值。如果您尝试调用`s(t)`within`g(s)`和`g(s)`within `s(t)`，您将永远不会终止，除非您定义终止条件。否则他们会一直互相调用，直到递归堆栈被填满然后抛出错误。

此外，由于您`s(t)`在内部定义`g(s)`，因此您不能从外部调用它，就像您在代码中多次执行的那样。

您似乎对 Python 的几种语法和语义细节感到困惑。如果您问我们您到底想做什么，并为我们提供数学公式，那么制定一个可以更好地帮助您的答案可能会更容易。

编辑：

要确定粒子在 time 的位置`t`，您需要以下代码（将您的代码重新格式化为 Python 语法，使用`**`而不是`^`和`return`语句）：

```
G = 6.6742*10**(-11)
M = 5.9736*10**24
R = 6371000
s0 = 0
v0 = 300
t = 0
dt = 0.005

sc = s0 # Current position of the particle, initially at s0

def g(s):
    return -G*M/(R+s)**2

def s(t):
    return 0.5*g(sc)*t**2 + v0*t + s0

count = 0
while s(t) >= 0:
    if count % 200 == 0:
        print(sc)
    sc = s(t)
    count += 1
    t = dt*count 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-25T00:27:03.493

Python 函数可以相互调用，但这不是函数返回值的方式。要使函数返回特定值，请使用`return`，例如，

```
def v(t):
   return v(t - dt) - g(s(t - dt)) * dt 
```

此外，我真的不明白你想用这个做什么，但你可能需要以不同的方式表达自己：

```
while s(t) >= 0:
    s(t) = s(t-dt)+v(t)*dt
    t = t+dt 
```

# css - 嵌套媒体对象 clearfix 不起作用

> ID：15058393
> 
> 赞同：0
> 
> 时间：2013-02-25T00:25:55.587
> 
> 标签：css, oocss

使用 N. Sullivan 的 OOCSS 媒体对象。我修改了原始的 css 以删除隐藏的溢出并用 micro-clearfix 替换它。我遇到的问题是当我尝试嵌套媒体对象时，嵌套的媒体对象不会清除它的浮动。我试图避免溢出：隐藏；

看看：[http ://codepen.io/anon/pen/kDpLr](http://codepen.io/anon/pen/kDpLr)

```
<!doctype html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <title>Media Object</title>
    </head>
    <body>

        <div class="media">

          <a href="http://twitter.com/stubbornella" class="img">
            <img src="http://stubbornella.com/profile_image.jpg" height="200" width="200" alt="me" />
          </a>

          <div class="bd">
            Here is some text inside the media object. Here is some text inside the media object.
          </div>

        </div>

        <div class="media">

          <a href="http://twitter.com/stubbornella" class="img">
            <img src="http://stubbornella.com/profile_image.jpg" alt="me" height="200" width="200" />
          </a>

          <div class="bd">
            <h2>Headline</h2>
            <p>Here is some text inside the media object. Here is some text inside the media object. Here is some text inside the media object.</p>
            <div class="media">

                  <a href="http://twitter.com/stubbornella" class="img">
                    <img src="http://stubbornella.com/profile_image.jpg" alt="me" />
                  </a>

                  <div class="bd">
                    Here is some text inside the media object.
                  </div>

                </div>
          </div>

        </div>
    </body>
</html> 
```

```
/* ====== media ====== */
.media {
    margin:10px;
    border: 1px solid red;
    @extend %clearfix;
}

.bd {
  @extend %clearfix;
}

.media .img {
    float: left; 
    margin-right: 10px;
  border: 1px solid #ddd;
}

.media .img img {
    display:block;
}

.media .img-right {
    @extend %clearfix;
    float:right; 
    margin-left: 10px;
}

%clearfix {
    &:before,  
    &:after {  
        content: " ";  
        display: table;  
    }  
    &:after {  
        clear: both;  
    }  
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T00:48:10.740

您没有正确清除浮动 - 使用 clearfix 只能确保`.media`元素延伸到其浮动子元素的位置，因此与`overflow: hidden`.

您只需要添加`clear: both`到`.media`选择器本身（而不是伪 :before 或 :after 元素），然后您将解决问题。

# cmake - 如何阻止 CMake 链接到 libstdc++

> ID：15058403
> 
> 赞同：15
> 
> 时间：2013-02-25T00:26:48.030
> 
> 标签：cmake

我有一个用于 C++ 项目的非常简单的 CMakeLists.txt，它构建了一个共享库：

```
add_library(foo SHARED
    ${HDR_PUBLIC}
    ${SOURCES}) 
```

链接库时，CMake 自动使用 -lstdc++。我怎样才能阻止它这样做？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-08-11T20:48:11.167

您可以将**-stdlib=libc++**添加到编译器标志。

简单的例子：

```
cmake_minimum_required(VERSION 2.8.4)
project(test)
set(CMAKE_VERBOSE_MAKEFILE TRUE)
set(CMAKE_CXX_FLAGS "${CMAKE_CXX_FLAGS} -v -stdlib=libc++")
add_executable(test main.cpp) 
```

给出输出：

```
"/usr/bin/ld" ... -o test ... -lc++ ... 
```

默认情况下：

```
cmake_minimum_required(VERSION 2.8.4)
project(test)
set(CMAKE_VERBOSE_MAKEFILE TRUE)
set(CMAKE_CXX_FLAGS "${CMAKE_CXX_FLAGS} -v")
add_executable(test main.cpp) 
```

链接到 stdc++：

```
"/usr/bin/ld" ... -o test ... -lstdc++ ... 
```

**[更新]**

如果您根本不需要链接到 c++ lib - 使用**“-nodefaultlibs”**作为链接器标志，使用**“-nostdinc++”**作为编译器标志。您可能需要链接一些默认库，例如**'-lSystem'**。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2015-03-23T06:47:59.500

```
set(CMAKE_CXX_IMPLICIT_LINK_LIBRARIES "")
set(CMAKE_CXX_IMPLICIT_LINK_DIRECTORIES "")
set_target_properties(yourtarget PROPERTIES LINKER_LANGUAGE C) 
```

来源：[http ://cmake.3232098.n2.nabble.com/setting-LINKER-LANGUAGE-still-adds-lstdc-td7581940.html](http://cmake.3232098.n2.nabble.com/setting-LINKER-LANGUAGE-still-adds-lstdc-td7581940.html)

# mysql - 插入时十进制值错误 - MySQL

> ID：15058406
> 
> 赞同：1
> 
> 时间：2013-02-25T00:27:05.960
> 
> 标签：mysql, .net, sql

当我将 10 或 10.0 的值插入到小数（10.0）列时，我得到 9.9999999... - 插入时有没有办法得到 10？

使用实体框架、.NET 4.5、MySQL > 5

表定义：十进制(10,9)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T00:38:02.540

我已经发布了解释链接。

您可以使用`double`而不是`decimal`.

# c# - 对制作 C# 登录控件感到困惑

> ID：15058407
> 
> 赞同：0
> 
> 时间：2013-02-25T00:27:17.527
> 
> 标签：c#, asp.net, sql-server, visual-studio-2010, login-control

我需要帮助来使用 2 个自定义文本框创建一个简单的登录控件，以允许用户登录到他们自己的配置文件。我已经创建了个人资料页面。但是我对如何编写背后的代码一无所知

```
> btnLogin 
```

我有一个注册页面，可以让我完美地将详细信息保存到 SQL 数据库表中。我知道这一定是一组简单的代码，但我可能让它太复杂了。举个例子

我的文本框变量是

```
txtUserName

txtPassword 
```

我的 SQL 表名称是 UserDetails，其中包括用户名和密码以及与登录活动无关的一些其他字段。

.......... 我希望用户访问的响应重定向页面`ProfileOfUser.aspx`基于 UserIds。类似的东西，

```
Response.Redirect("ProfileOfUser.aspx?Id=" + Session["UserId"].ToString()); 
```

如果有人能帮我解决这个问题，我将非常感激:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T01:56:35.000

为什么不使用 ASP.NET 登录控件？ [ASP.NET 登录控件](http://msdn.microsoft.com/en-au/library/ms178329%28v=vs.100%29.aspx)

# php - PHP脚本中的损坏堆

> ID：15058408
> 
> 赞同：5
> 
> 时间：2013-02-25T00:27:25.460
> 
> 标签：php, zend-framework

`zend_mm_heap corrupted`在我为预渲染大型环境而编写的 PHP 程序中出现错误消息。

我怀疑这是由于脚本中的变量分配过多引起的，尽管我不确定这一点，因为我编写的脚本在任何给定时间只有大约 20 个变量，其中一个是最多可容纳 500 个的数组元素。也就是说，总的迭代次数约为数十亿。

我的怀疑是否正确，如果是，有什么可以做的吗？例如，运行脚本一段时间，然后将重要的变量转储到文件中并重新启动脚本，让它拾取这些变量并继续运行会更好吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-12-16T16:22:28.223

我已经看到了这个问题，并且可以使用 phalcon 重现它，但它似乎来自 APC 缓存。我通过从 APC 切换到 zend opcache 来修复。您可以尝试禁用 APC 以查看它是否会消失。

从我的调查中我能得出的最好的结论是 APC 正在对 zend 正在使用的内存做一些事情。PS，它与zend框架没有任何关系，这是与合并到php中的zend部分有关的错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-12-07T17:25:21.203

您的问题的解决方案是下载与您的 PHP 版本兼容的最新版本的 APC。

您必须强制安装它，使其覆盖旧版本的 APC。在许多情况下，这将解决您遇到的问题。

# django - 没有从具有多个外键的抽象类中添加相关集

> ID：15058412
> 
> 赞同：1
> 
> 时间：2013-02-25T00:28:13.677
> 
> 标签：django, foreign-keys, abstract-class

我在从一个继承自另一个的类中访问相关数据时遇到问题。我的代码（models.py）如下：

```
class AbstractTransaction(models.Model):
  compte            = models.ForeignKey(Utilisateur, 
    verbose_name='Compte', 
    related_name='%(class)s_set',
  )
  operateur         = models.ForeignKey(Utilisateur, 
    related_name='%(class)s_related',
    verbose_name='Opérateur', 
    editable=False,
  )

  class Meta:
    abstract = True

class Transaction(models.Model):
  quantite          = models.IntegerField('Quantité')

  def __unicode__(self):
    return '%i %s(s) pour %d' % (self.quantite, self.produit, self.cout)

class Operation(models.Model):
  commentaire       = models.TextField('Commentaires')

  def __unicode__(self):
    return self.quantite 
```

然后我尝试从这样的 Utilisateur 实例访问我的相关事务

```
user = Utilisateur.objects.get(pk=1)
user.transaction_set.all() 
```

但我得到错误：'Utilisateur' 对象没有属性'transaction_set'。

我究竟做错了什么 ？

先感谢您，

加布里埃尔。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T00:30:17.273

您可能打算子类化`AbstractTransaction`，但子类化`models.Model`：

```
class Transaction(AbstractTransaction):
... 
```

# c++ - 字符串插入和取消引用_问题_

> ID：15058414
> 
> 赞同：2
> 
> 时间：2013-02-25T00:28:30.350
> 
> 标签：c++, string, stl

这很容易做到，但似乎很难正确做到。让我们假设 l 是 size()/2。我想将 sz 的后半部分插入 szout。

我的第一次尝试是

```
szout.insert(szout.end(), &sz[l], sz.end()); 
```

但是我得到了一个很大的编译错误。接下来我尝试的是

```
szout.insert(szout.end(), &sz[l], &sz[sz.size()-1]); 
```

不，错过了最后一个字母。所以显然我不应该-1

```
szout.insert(szout.end(), &sz[l], &sz[sz.size()]); 
```

这行得通，但这是未定义的行为，因为我正在忽略最后一个字母。

```
szout.insert(szout.end(), &sz[l], &sz[sz.size()-1]+1); 
```

这有效，但感觉不对。A -1 和 +1 ......这很奇怪。

复制到最后一个字母的正确方法是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-25T00:30:53.493

> 这行得通，但这是未定义的行为，因为我正在忽略最后一个字母。

不，您没有取消对最后一个字母的引用。您正在使用“最后一个字母之后的一个字符”的地址，但标准明确允许这样做。

这种语言在 C++ 标准中非常常见：

> 24.2.1.5：正如指向数组的常规指针保证有一个指针值指向数组的最后一个元素，所以对于任何迭代器类型，都有一个迭代器值指向对应序列的最后一个元素。

本质上，任何指向`P`任何数组末尾的指针都被认为是有效的。迭代器也是如此。

但是，尝试读取或写入`sz[sz.size()]`确实是错误的，但是您的代码没有这样做：标准库始终将结束指针解释为“结束指针”，因此您绝对安全

```
szout.insert(szout.end(), &sz[l], &sz[sz.size()]); 
```

# java - Android 并行（同步）图像下载

> ID：15058432
> 
> 赞同：1
> 
> 时间：2013-02-25T00:30:34.403
> 
> 标签：java, android, multithreading, performance, threadpoolexecutor

请各位大侠帮忙，这很重要。

我需要在不到 5 分钟的时间内下载大约 2000 张图像。所以我决定进行并行图像下载。

如果有人可以建议我进行并行下载的更好方法或告诉我哪里出错了，我将不胜感激。

在错误日志中，已完成任务的数量总是不同的......

请帮忙。

我正在使用 Artem Zinnatullin 的异步任务执行器

```
public class AsyncTaskExecutor {

private static final int CORE_POOL_SIZE;
private static final int MAXIMUM_POOL_SIZE;
private static final int KEEP_ALIVE;
private static final TimeUnit TIME_UNIT;

private static final BlockingQueue<Runnable> concurrentPoolWorkQueue;
private static final ThreadFactory concurrentThreadFactory;
    private static final ThreadPoolExecutor concurrentExecutor;

private AsyncTaskExecutor() {}

static {
 CORE_POOL_SIZE = 5;
 MAXIMUM_POOL_SIZE = 128;
 KEEP_ALIVE = 1;
 TIME_UNIT = TimeUnit.SECONDS;

 concurrentPoolWorkQueue = new LinkedBlockingQueue<Runnable>(10);
 concurrentThreadFactory = new AsyncTaskThreadFactory();
 concurrentExecutor = new ThreadPoolExecutor(CORE_POOL_SIZE,MAXIMUM_POOL_SIZE, KEEP_ALIVE, TIME_UNIT, concurrentPoolWorkQueue, concurrentThreadFactory);
} 
/**
* Concurrently executes AsyncTask on any Android version
* @param task to execute
* @param params for task
* @return executing AsyncTask
*/
@SuppressLint("NewApi")
public static <Params, Progress, Result> AsyncTask<Params, Progress, Result>
 executeConcurrently(AsyncTask<Params, Progress, Result> task,
 Params... params) {
 if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.HONEYCOMB) {
 task.executeOnExecutor(concurrentExecutor, params);
 } else {
 task.execute(params);
 }
 return task;
}

    /**
* Thread factory for AsyncTaskExecutor
* @author Artem Zinnatullin
*
*/
private static class AsyncTaskThreadFactory implements ThreadFactory {
 private final AtomicInteger count;

 {
 count = new AtomicInteger(1);
 }

@Override
public Thread newThread(Runnable r) {
return new Thread(r, "AsyncTask #" + count.getAndIncrement());
}
} 
```

}

然后我使用循环来下载我所有的图像。

```
for (PhotoToDBHelper photoToDBHelper : notDownloaded) {
            try {
                photoToDBHelper.download(m_context);
            } catch (Exception e) {
                // TODO: handle exception
            }

        } 
```

下载方法如下所示：

```
public void download(Context context) throws Exception {
    HttpClient httpClient = new DefaultHttpClient();
    HttpGet httpGet = new HttpGet(new URL(getPhotosUrl() + m_fileName).toString());
    HttpResponse response = httpClient.execute(httpGet);
    HttpEntity entity = response.getEntity();

    InputStream inputStream = entity.getContent();
    filePath = Environment.getExternalStorageDirectory().toString() + getFoldeRelativePath() + m_fileName;

    Utils.createFileOnExternalStorage(getFoldeRelativePath(), filePath);
    FileOutputStream fos = new FileOutputStream(filePath, false);

    byte[] buffer = new byte[20000];
    int byteRead = 0;

    while ((byteRead = inputStream.read(buffer)) != -1) {
        fos.write(buffer, 0, byteRead);
    }
    fos.close();
} 
```

当启动我的android应用程序时，我收到了这个错误

```
02-25 01:08:30.133: E/AndroidRuntime(32357): FATAL EXCEPTION: main
02-25 01:08:30.133: E/AndroidRuntime(32357): java.lang.RuntimeException: Unable to start activity ComponentInfo{"package".TabHostActivity}: java.util.concurrent.RejectedExecutionException: Task android.os.AsyncTask$3@2c0809b0 rejected from java.util.concurrent.ThreadPoolExecutor@2be18f48[Running, pool size = 128, active threads = 1, queued tasks = 10, completed tasks = 27]
02-25 01:08:30.133: E/AndroidRuntime(32357):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1967)
02-25 01:08:30.133: E/AndroidRuntime(32357):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1992)
02-25 01:08:30.133: E/AndroidRuntime(32357):    at android.app.ActivityThread.access$600(ActivityThread.java:127)
02-25 01:08:30.133: E/AndroidRuntime(32357):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1158)
02-25 01:08:30.133: E/AndroidRuntime(32357):    at android.os.Handler.dispatchMessage(Handler.java:99)
02-25 01:08:30.133: E/AndroidRuntime(32357):    at android.os.Looper.loop(Looper.java:137)
02-25 01:08:30.133: E/AndroidRuntime(32357):    at android.app.ActivityThread.main(ActivityThread.java:4441)
02-25 01:08:30.133: E/AndroidRuntime(32357):    at java.lang.reflect.Method.invokeNative(Native Method)
02-25 01:08:30.133: E/AndroidRuntime(32357):    at java.lang.reflect.Method.invoke(Method.java:511)
02-25 01:08:30.133: E/AndroidRuntime(32357):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
02-25 01:08:30.133: E/AndroidRuntime(32357):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
02-25 01:08:30.133: E/AndroidRuntime(32357):    at dalvik.system.NativeStart.main(Native Method)
02-25 01:08:30.133: E/AndroidRuntime(32357): Caused by: java.util.concurrent.RejectedExecutionException: Task android.os.AsyncTask$3@2c0809b0 rejected from java.util.concurrent.ThreadPoolExecutor@2be18f48[Running, pool size = 128, active threads = 1, queued tasks = 10, completed tasks = 1032]
02-25 01:08:30.133: E/AndroidRuntime(32357):    at java.util.concurrent.ThreadPoolExecutor$AbortPolicy.rejectedExecution(ThreadPoolExecutor.java:1967)
02-25 01:08:30.133: E/AndroidRuntime(32357):    at java.util.concurrent.ThreadPoolExecutor.reject(ThreadPoolExecutor.java:782)
02-25 01:08:30.133: E/AndroidRuntime(32357):    at java.util.concurrent.ThreadPoolExecutor.execute(ThreadPoolExecutor.java:1303)
02-25 01:08:30.133: E/AndroidRuntime(32357):    at android.os.AsyncTask.executeOnExecutor(AsyncTask.java:564)
02-25 01:08:30.133: E/AndroidRuntime(32357):    at "package".data.AsyncTaskExecutor.executeConcurrently(AsyncTaskExecutor.java:58)
02-25 01:08:30.133: E/AndroidRuntime(32357):    at "package".TabHostActivity.checkUpdateState(TabHostActivity.java:130)
02-25 01:08:30.133: E/AndroidRuntime(32357):    at "package".TabHostActivity.onCreate(TabHostActivity.java:88)
02-25 01:08:30.133: E/AndroidRuntime(32357):    at android.app.Activity.performCreate(Activity.java:4465)
02-25 01:08:30.133: E/AndroidRuntime(32357):    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1049)
02-25 01:08:30.133: E/AndroidRuntime(32357):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1931)
02-25 01:08:30.133: E/AndroidRuntime(32357):    ... 11 more 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-25T01:12:34.210

有几个问题需要解决：

1.  5 分钟内 2000 张图像大约是每秒 7 张图像。根据图像大小、网络带宽、处理器和存储速度等……这对于任何代码或并发量都可能不可行。吞吐量的数学公式是：7 * N 字节每秒，其中 N 是平均图像大小。如果有大图像，它可能是一个死点。
2.  异常表示线程池已达到排队任务的最大数量 (10)。这可以基于线程池管理器实现进行配置。总体而言，例如，尝试同时启动 2000 个线程可能会加剧这种情况。建议分组排队任务（使用线程），监控它们的完成情况，然后开始更多，所有这些都是一次五（5）个小组。
3.  如果有任何服务器控件，请考虑使用 sprite 模型，其中多个图像存储在一个图像（文件/资源​​）中，由图像中的相对 x/y 坐标分解。这会将 HTTP 或任何网络请求的数量从 2000 减少到 1（可能），从而显着提高性能。

# c# - 数据集级联和内存消耗

> ID：15058436
> 
> 赞同：7
> 
> 时间：2013-02-25T00:31:16.163
> 
> 标签：c#, .net, memory, memory-management, dataset

我有一个使用 DataSet.WriteXML 导出数据和 DataSet.ReadXML 导入数据的应用程序。在导入过程中，我需要更改某些主键作为应用程序逻辑的一部分。

当记录超过 500K 时，它会成功写入 XML 并从 XML 中读取。一旦我更改了主键，它会等待一段时间并引发 OutOfMemory 异常。我相信的原因是，它必须进行大量级联更新。我在主键更改期间尝试了 BeginEdit 和 EndEdit，但在这种情况下仍然在 EndEdit 中失败。

据我了解，DataSets 也将一些以前的数据保存在内存中。有没有办法以消耗最少内存的方式优化 DataSet 更新操作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T12:24:02.687

如果您需要更多控制，则需要删除数据集为您提供的一些功能。减少由级联引起的内存的一种方法是简单的不要级联。使用表模式手动更新表 ID。

这个想法是您可以控制更新哪些行，随时接受更改，强制 GC 中期更新或您可能想要控制的任何其他内容。

我创建了一个简单的测试场景来说明我的意思：

![在此处输入图像描述](../Images/669ba7cdbdcbfc73a815ce58454157f5.png)

架构：

```
<?xml version="1.0"?>
<xs:schema id="NewDataSet" xmlns="" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:msdata="urn:schemas-microsoft-com:xml-msdata">
  <xs:element name="NewDataSet" msdata:IsDataSet="true" msdata:UseCurrentLocale="true">
    <xs:complexType>
      <xs:choice minOccurs="0" maxOccurs="unbounded">
        <xs:element name="Planet">
          <xs:complexType>
            <xs:sequence>
              <xs:element name="ID" type="xs:int" />
              <xs:element name="Name" type="xs:string" minOccurs="0" />
            </xs:sequence>
          </xs:complexType>
        </xs:element>
        <xs:element name="Continent">
          <xs:complexType>
            <xs:sequence>
              <xs:element name="ID" type="xs:int" />
              <xs:element name="PlanetID" type="xs:int" />
              <xs:element name="Name" type="xs:string" minOccurs="0" />
            </xs:sequence>
          </xs:complexType>
        </xs:element>
        <xs:element name="Country">
          <xs:complexType>
            <xs:sequence>
              <xs:element name="ID" type="xs:int" />
              <xs:element name="ContinentID" type="xs:int" />
              <xs:element name="Name" type="xs:string" minOccurs="0" />
            </xs:sequence>
          </xs:complexType>
        </xs:element>
        <xs:element name="County">
          <xs:complexType>
            <xs:sequence>
              <xs:element name="ID" type="xs:int" />
              <xs:element name="CountryID" type="xs:int" />
              <xs:element name="Name" type="xs:string" minOccurs="0" />
            </xs:sequence>
          </xs:complexType>
        </xs:element>
        <xs:element name="City">
          <xs:complexType>
            <xs:sequence>
              <xs:element name="ID" type="xs:int" />
              <xs:element name="CountyID" type="xs:int" />
              <xs:element name="Name" type="xs:string" minOccurs="0" />
            </xs:sequence>
          </xs:complexType>
        </xs:element>
        <xs:element name="Street">
          <xs:complexType>
            <xs:sequence>
              <xs:element name="ID" type="xs:int" />
              <xs:element name="CityID" type="xs:int" minOccurs="0" />
              <xs:element name="Name" type="xs:string" minOccurs="0" />
            </xs:sequence>
          </xs:complexType>
        </xs:element>
        <xs:element name="People">
          <xs:complexType>
            <xs:sequence>
              <xs:element name="ID" type="xs:int" />
              <xs:element name="StreetID" type="xs:int" />
              <xs:element name="Name" type="xs:string" minOccurs="0" />
            </xs:sequence>
          </xs:complexType>
        </xs:element>
        <xs:element name="Job">
          <xs:complexType>
            <xs:sequence>
              <xs:element name="ID" type="xs:int" />
              <xs:element name="PeopleID" type="xs:int" />
              <xs:element name="Name" type="xs:string" minOccurs="0" />
            </xs:sequence>
          </xs:complexType>
        </xs:element>
        <xs:element name="Pets">
          <xs:complexType>
            <xs:sequence>
              <xs:element name="ID" type="xs:int" />
              <xs:element name="PeopleID" type="xs:int" minOccurs="0" />
              <xs:element name="Name" type="xs:string" minOccurs="0" />
            </xs:sequence>
          </xs:complexType>
        </xs:element>
      </xs:choice>
    </xs:complexType>
    <xs:unique name="Constraint1">
      <xs:selector xpath=".//Planet" />
      <xs:field xpath="ID" />
    </xs:unique>
    <xs:unique name="Continent_Constraint1" msdata:ConstraintName="Constraint1">
      <xs:selector xpath=".//Continent" />
      <xs:field xpath="ID" />
    </xs:unique>
    <xs:unique name="Country_Constraint1" msdata:ConstraintName="Constraint1">
      <xs:selector xpath=".//Country" />
      <xs:field xpath="ID" />
    </xs:unique>
    <xs:unique name="County_Constraint1" msdata:ConstraintName="Constraint1">
      <xs:selector xpath=".//County" />
      <xs:field xpath="ID" />
    </xs:unique>
    <xs:unique name="City_Constraint1" msdata:ConstraintName="Constraint1">
      <xs:selector xpath=".//City" />
      <xs:field xpath="ID" />
    </xs:unique>
    <xs:unique name="Street_Constraint1" msdata:ConstraintName="Constraint1">
      <xs:selector xpath=".//Street" />
      <xs:field xpath="ID" />
    </xs:unique>
    <xs:unique name="People_Constraint1" msdata:ConstraintName="Constraint1">
      <xs:selector xpath=".//People" />
      <xs:field xpath="ID" />
    </xs:unique>
    <xs:unique name="Job_Constraint1" msdata:ConstraintName="Constraint1">
      <xs:selector xpath=".//Job" />
      <xs:field xpath="ID" />
    </xs:unique>
    <xs:unique name="Pets_Constraint1" msdata:ConstraintName="Constraint1">
      <xs:selector xpath=".//Pets" />
      <xs:field xpath="ID" />
    </xs:unique>
    <xs:keyref name="Relation8" refer="People_Constraint1">
      <xs:selector xpath=".//Pets" />
      <xs:field xpath="PeopleID" />
    </xs:keyref>
    <xs:keyref name="Relation7" refer="People_Constraint1">
      <xs:selector xpath=".//Job" />
      <xs:field xpath="PeopleID" />
    </xs:keyref>
    <xs:keyref name="Relation6" refer="Street_Constraint1">
      <xs:selector xpath=".//People" />
      <xs:field xpath="StreetID" />
    </xs:keyref>
    <xs:keyref name="Relation5" refer="City_Constraint1">
      <xs:selector xpath=".//Street" />
      <xs:field xpath="CityID" />
    </xs:keyref>
    <xs:keyref name="Relation4" refer="County_Constraint1">
      <xs:selector xpath=".//City" />
      <xs:field xpath="CountyID" />
    </xs:keyref>
    <xs:keyref name="Relation3" refer="Country_Constraint1">
      <xs:selector xpath=".//County" />
      <xs:field xpath="CountryID" />
    </xs:keyref>
    <xs:keyref name="Relation2" refer="Continent_Constraint1">
      <xs:selector xpath=".//Country" />
      <xs:field xpath="ContinentID" />
    </xs:keyref>
    <xs:keyref name="Relation1" refer="Constraint1">
      <xs:selector xpath=".//Continent" />
      <xs:field xpath="PlanetID" />
    </xs:keyref>
  </xs:element>
</xs:schema> 
```

以及一些生成测试用例的代码

```
 private void CreateRows(Int32 MaxBaseRows, Int32 MaxChildRows)
    {
        dataSet1.Clear();
        Int32 RowCount = 0;
        Random R = new Random();
        foreach (DataTable DT in dataSet1.Tables)
        {
            Int32 NewCount = R.Next(1, MaxBaseRows);
            foreach (var FK in DT.Constraints.OfType<ForeignKeyConstraint>())
            {
                NewCount = NewCount * R.Next(1, MaxChildRows);
            }
            for (int i = 0; i < NewCount; i++)
            {
                DataRow DR = DT.NewRow();
                foreach (DataColumn DC in DT.Columns)
                {
                    if (DC.ColumnName == "ID")
                    {
                        DR[DC] = DT.Rows.Count;
                    }
                    else if (DC.DataType == typeof(Int32))
                    {
                        Boolean ValueSet = false;
                        foreach (var FK in DT.Constraints.OfType<ForeignKeyConstraint>())
                        {
                            if (FK.Columns.Contains(DC))
                            {
                                DR[DC] = R.Next(0, FK.RelatedTable.Rows.Count);
                                ValueSet = true;
                            }
                        }
                        if (!ValueSet)
                        {
                            DR[DC] = R.Next(0, 10000);
                        }
                    }
                    else if (DC.DataType == typeof(String))
                    {
                        DR[DC] = String.Format("{0}{1}", DT.TableName, DT.Rows.Count);
                    }
                }
                DT.Rows.Add(DR);
                RowCount++;
            }
        }
        label19.Text = RowCount.ToString();
        dataSet1.AcceptChanges();
    }

    private void UpdateUsingCascade()
    {
        EnableRelations();
        GC.Collect();
        long Mem = System.GC.GetTotalMemory(false);
        if (dataSet1.Tables["Planet"].Rows.Count > 0)
        {
            dataSet1.Tables["Planet"].Rows[0]["ID"] = new Random().Next(BaseRowCount, BaseRowCount + 10);
        }
        Mem = System.GC.GetTotalMemory(false) - Mem;
        DataSet ds = dataSet1.GetChanges();
        Int32 Changes = ds.Tables.OfType<DataTable>().Sum(DT => DT.Rows.Count);
        label19.Text = Changes.ToString();
        label21.Text = Mem.ToString();
        dataSet1.AcceptChanges();
    }

    private void UpdateManually()
    {
        DisableRelations();
        GC.Collect();
        long Mem = System.GC.GetTotalMemory(false);

        DataTable DT = dataSet1.Tables["Planet"];
        Int32 ChangeCount = 0;
        if (DT.Rows.Count > 0)
        {
            DataColumn DC = DT.Columns["ID"];
            Int32 oldValue = Convert.ToInt32(DT.Rows[0][DC]);
            DT.Rows[0][DC] = new Random().Next(BaseRowCount + 20,BaseRowCount + 30);
            Int32 newValue = Convert.ToInt32(DT.Rows[0][DC]);
            foreach (DataRelation Relation in DT.ChildRelations)
            {
                if (Relation.ParentColumns.Contains(DC))
                {
                    foreach (DataColumn CC in Relation.ChildColumns)
                    {
                        foreach (DataRow DR in Relation.ChildTable.Rows)
                        {
                            if (Convert.ToInt32(DR[CC]) == oldValue)
                            {
                                DR[CC] = newValue;
                                ChangeCount++;
                                dataSet1.AcceptChanges();
                                GC.Collect();
                            }
                        }
                    }
                }
            }
        }
        Mem = System.GC.GetTotalMemory(false) - Mem;
        label20.Text = ChangeCount.ToString();
        label22.Text = Mem.ToString();
        dataSet1.AcceptChanges();
    }

    private void EnableRelations()
    {
        dataSet1.EnforceConstraints = true;
        foreach (DataRelation Relation in dataSet1.Relations)
        {
            Relation.ChildKeyConstraint.UpdateRule = Rule.Cascade;
        }
    }

    private void DisableRelations()
    {
        dataSet1.EnforceConstraints = false;
        foreach (DataRelation Relation in dataSet1.Relations)
        {
            Relation.ChildKeyConstraint.UpdateRule = Rule.None;
        }
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T07:27:26.597

SHCJ - 你应该使用`BufferedStream`：

```
DataSet dataSet = new DataSet();
FileStream fileStream = File.OpenRead(pathToYourFile);
BufferedStream bufferedStream = new BufferedStream(fileStream);
dataSet.ReadXml(bufferedStream); 
```

*更新*

请为您的写操作尝试这个：

```
using (XmlWriter xmlWriter = XmlWriter.Create(_pathToYourFile))
{
   /* write oprations */
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-28T13:03:24.280

试试这个：

```
try
{

    //Logic to load your file

    var xelmOriginal = new XElement("Root");

    for (int i = 0; i < 500000; i++)
    {
        var item = new XElement("Item");
        item.SetAttributeValue("id", i);
        xelmOriginal.Add(item);
    }

    // Logic to transform each element

    var xelmRootTransformed = new XElement("Root");

    foreach (var element in xelmOriginal.Elements())
    {
        var transformedItem =
            new XElement("Transformed",
                            element.
                                Attributes()
                                .Single(x => x.Name.LocalName.Equals("id")));

        xelmRootTransformed.Add(transformedItem);
    }

    //Logic to save your transformed file
}catch(Exception e)
{

    Console.WriteLine("Failed");
    return;
}

Console.WriteLine("Success"); 
```

这里的关键点是您将输入和输出分开。即您不转换文件并立即写入它；你会搞砸你的枚举。

相反，一次读取一个元素，一次写入一个临时输出；从理论上讲，您只会有一个活跃的元素处于活动状态。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-28T13:17:07.367

数据集是聪明的野兽。它们不仅可以读取/写入/保存/过滤数据，还可以进行更改跟踪，因此以后的更新/写入/删除更快（使用数据库时，不仅仅是 XML 文件）。

可能发生的情况是，您的 DataSet 已打开更改跟踪，这将迫使它不仅始终记住当前数据是什么，而且还要记住数据以前的样子，以及新数据与旧数据之间的关系。如果您只是将 DataSet 保留为当前工作负载的“容器”，则不需要缓存/更改跟踪 - 只需将其关闭即可。我的意思是，如果可能的话——我现在不记得是否可以做到，也不记得如何做到。但是，我很确定您可以通过调用 .AcceptChanges() 或通过处理旧 DS 并为要加载的每批新数据创建新 DS 来刷新更改。后者当然对当前批次的顺序更新期间抛出的 OOM 没有帮助。如果在第一次 PK 更新时引发 OOM，AcceptChanges 将无济于事。你可以“接受” 只有在一个完整的操作结束后才会更改，即使这样，您也不会有“时间”可以发出它。但是，如果在一些更改 PK 之后引发 OOM，那么在每个更改 PK 之后或每隔几个更改之后调用 AcceptChanges - 可能会有所帮助。

请注意，我在猜测。您的 DS 未连接到数据库，因此默认情况下更改跟踪*可能*处于关闭状态。但我对此表示怀疑，我记得即使对于 XML 文件，您也可以要求 DS 转储数据以及更改日志。我认为默认情况下它是打开的。

# playorm - PlayFramework 2.x 和 playorm ClassNotFoundException: play.Plugin

> ID：15058441
> 
> 赞同：1
> 
> 时间：2013-02-25T00:31:44.613
> 
> 标签：playorm

我尝试通过 PlayFramework 2.x 连接到 cassandra，但出现常见异常 ClassNotFoundException: play.Plugin。我已经完成了 wiki 页面[https://github.com/deanhiller/playorm/wiki/PlayFramework-2.x-support](https://github.com/deanhiller/playorm/wiki/PlayFramework-2.x-support)上的所有内容。这是我的 maven（我使用 mvn 存储库中的 playorm.jar）项目[http://code.google.com/p/cassandranosql-firebrandocm-playorm/source/browse/trunk/](http://code.google.com/p/cassandranosql-firebrandocm-playorm/source/browse/trunk/)，如您所见，有一个测试类UserPlayormDaoImplTest，其中调用NoSql.em()；抛出 ClassNotFoundException。我将 plugin2.1.jar 添加到类路径中，但是找不到该类。我不知道有什么问题。感谢帮助。

堆栈跟踪：

```
java.lang.NoClassDefFoundError: play/Plugin
at java.lang.ClassLoader.defineClass1(Native Method)
at java.lang.ClassLoader.defineClass(Unknown Source)
at java.security.SecureClassLoader.defineClass(Unknown Source)
at java.net.URLClassLoader.defineClass(Unknown Source)
at java.net.URLClassLoader.access$100(Unknown Source)
at java.net.URLClassLoader$1.run(Unknown Source)
at java.net.URLClassLoader$1.run(Unknown Source)
at java.security.AccessController.doPrivileged(Native Method)
at java.net.URLClassLoader.findClass(Unknown Source)
at java.lang.ClassLoader.loadClass(Unknown Source)
at sun.misc.Launcher$AppClassLoader.loadClass(Unknown Source)
at java.lang.ClassLoader.loadClass(Unknown Source)
at java.lang.Class.forName0(Native Method)
at java.lang.Class.forName(Unknown Source)
at com.alvazan.play.NoSql.<clinit>(NoSql.java:16)
at cz.muni.fi.cassandra.Playorm.UserPlayormDaoImplTest.setUp(UserPlayormDaoImplTest.java:34)
at junit.framework.TestCase.runBare(TestCase.java:132)
at junit.framework.TestResult$1.protect(TestResult.java:110)
at junit.framework.TestResult.runProtected(TestResult.java:128)
at junit.framework.TestResult.run(TestResult.java:113)
at junit.framework.TestCase.run(TestCase.java:124)
at junit.framework.TestSuite.runTest(TestSuite.java:243)
at junit.framework.TestSuite.run(TestSuite.java:238)
at org.junit.internal.runners.JUnit38ClassRunner.run(JUnit38ClassRunner.java:83)
at org.eclipse.jdt.internal.junit4.runner.JUnit4TestReference.run(JUnit4TestReference.java:50)
at org.eclipse.jdt.internal.junit.runner.TestExecution.run(TestExecution.java:38)
at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:467)
at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:683)
at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:390)
at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:197)
Caused by: java.lang.ClassNotFoundException: play.Plugin
at java.net.URLClassLoader$1.run(Unknown Source)
at java.net.URLClassLoader$1.run(Unknown Source)
at java.security.AccessController.doPrivileged(Native Method)
at java.net.URLClassLoader.findClass(Unknown Source)
at java.lang.ClassLoader.loadClass(Unknown Source)
at sun.misc.Launcher$AppClassLoader.loadClass(Unknown Source)
at java.lang.ClassLoader.loadClass(Unknown Source)
... 30 more 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T06:47:27.350

你用的是哪个版本的play？play.Plugin 是 play2.1.0 框架的一部分。您能否检查位于 play-2.1.0/repository/local/play/play_2.10/2.1.0/jars/play_2.10.jar 的 jar “play_2.10.jar”是否在您项目的类路径中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T11:36:51.817

我的错，我之前没有将 play-2.1.0/repository/local/play/play_2.10/2.1.0/jars/play_2.10.jar 中的 play_2.10.jar 添加到我的项目的类路径中。我正在使用 playframework 2.1.0（从 playframework 网站下载）。我添加了那个 jar，但现在我与其他类有类似的问题。似乎类路径中缺少更多的罐子。堆栈跟踪：

```
java.lang.NoClassDefFoundError: scala/Function0
at play.api.Play.current(Play.scala)
at play.Play.application(Play.java:12)
at com.alvazan.play2.NoSqlForPlay2.em(NoSqlForPlay2.java:25)
at com.alvazan.play.NoSql.em(NoSql.java:60)
at cz.muni.fi.cassandra.Playorm.UserPlayormDaoImplTest.setUp(UserPlayormDaoImplTest.java:35)
at junit.framework.TestCase.runBare(TestCase.java:132)
at junit.framework.TestResult$1.protect(TestResult.java:110)
at junit.framework.TestResult.runProtected(TestResult.java:128)
at junit.framework.TestResult.run(TestResult.java:113)
at junit.framework.TestCase.run(TestCase.java:124)
at junit.framework.TestSuite.runTest(TestSuite.java:243)
at junit.framework.TestSuite.run(TestSuite.java:238)
at org.junit.internal.runners.JUnit38ClassRunner.run(JUnit38ClassRunner.java:83)
at org.eclipse.jdt.internal.junit4.runner.JUnit4TestReference.run(JUnit4TestReference.java:50)
at org.eclipse.jdt.internal.junit.runner.TestExecution.run(TestExecution.java:38)
at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:467)
at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:683)
at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:390)
at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:197)
Caused by: java.lang.ClassNotFoundException: scala.Function0
at java.net.URLClassLoader$1.run(Unknown Source)
at java.net.URLClassLoader$1.run(Unknown Source)
at java.security.AccessController.doPrivileged(Native Method)
at java.net.URLClassLoader.findClass(Unknown Source)
at java.lang.ClassLoader.loadClass(Unknown Source)
at sun.misc.Launcher$AppClassLoader.loadClass(Unknown Source)
at java.lang.ClassLoader.loadClass(Unknown Source)
... 19 more 
```

# javascript - 如何通过拖放创建 JavaScript UI 以创建“嵌套集模式”？

> ID：15058443
> 
> 赞同：0
> 
> 时间：2013-02-25T00:31:57.350
> 
> 标签：javascript, tree

[模拟 Mike Hillyer 关于在 MySQL](http://mikehillyer.com/articles/managing-hierarchical-data-in-mysql/)中管理分层数据的博客文章中的图形，我想在 JavaScript 中创建一个用户界面，允许用户将分层数据拖放到嵌套集模型中。

![嵌套集模型](../Images/a814a645cdf5f95dd4343aafbc1e4da9.png)

是否有任何 JavaScript 和/或 jQuery 应用程序的示例或演示可以做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T19:51:40.463

尝试使用文件树，

我自己做了一个，简单而强大，检查这个[拖放演示](http://jtree.tk/drag-and-drop/demo)

我还需要更新 github repo，但是您可以将这个小功能添加到插件中以允许 json 导出（这里假设值没有得到任何报价）

```
 $.fn.jtreeGetJson = function()
    {   var t = $(this).children('li');
        var json = '[';
        t.each(function(n,e)
        {   if(n>0) json += ',';
            json += '{';
                var span = $(e).children('span');
                json += '"label":"'+span.html()+'"';
                var ref = span.data('ref');
                if(ref !== undefined) json += ',"ref":"'+ref+'"';
                /*var d = span.data('info'); if(d === undefined) d = {};
                if(!$.isEmptyObject(d))
                {   json += ',"data":{';
                    var nb=0;
                    $.each(d, function(n,v){ if(nb++) json += ','; json += '"'+n+'":'+'"'+v+'"'; });
                    json += '}';
                }*/
                var u = span.next('ul');
                if(u.length)
                {   json += ', "subs":';
                    json += $.fn.jtreeGetJson.call(u);
                }
            json += '}';
        });
        json += ']';
        return json;
    } 
```

# ios - 是否可以在 HTML5 iOS 应用程序中使用完整的 RevMob API？（使用 Cordova/Phonegap）

> ID：15058447
> 
> 赞同：0
> 
> 时间：2013-02-25T00:32:13.713
> 
> 标签：ios, html, cordova, revmob

我正在使用 Apache Cordova 构建一个 html5 游戏。我想使用 RevMob，我正在关注本教程[http://sdk.revmob.com/cordova#ios-setup](http://sdk.revmob.com/cordova#ios-setup)

一切正常，但似乎我只能访问两个 RevMob API 调用。我只能使用全屏广告和广告弹出窗口。

我愿意使用与最新稳定版本不同的 RevMob SDK 版本。

有没有办法在 HTML5 应用程序中启用其余的 RevMob 功能？例如“更多游戏”或“横幅广告”？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T22:04:34.893

是的！他们发布了 0.4.0 版本，其中包括：

```
revmob.openAdLink(); 
```

在您可以[看到](http://sdk.revmob.com/cordova)的其他功能中。

# c - C中的递归阶乘程序在执行时挂起

> ID：15058449
> 
> 赞同：1
> 
> 时间：2013-02-25T00:32:34.350
> 
> 标签：c, eclipse, recursion, factorial

我正在编写一个程序来显示计算给定数字的阶乘 200 万次所需的时间。我在 C/C++ Eclipse 环境中使用 Debian Linux 编写它。当程序到达时`int temp = n * rfact(n-1);`，它会挂起并且不会做任何其他事情。

这是我到目前为止所得到的：

```
#include <stdio.h>
#include <time.h>

//prototypes
int rfact(int n);

main()
{
    int n = 0;
    int i = 0;
    double result = 0.0;
    clock_t t;
    printf("Enter a value for n: ");
    scanf("%i", &n);

printf("n=%i\n", n);

    //get current time
    t = clock();

    //process factorial 2 million times
    for(i=0; i<2000000; i++)
    {
        rfact(n);
    }

    printf("n=%i\n", n);

    //get total time spent in the loop
    result = (clock() - t)/(double)CLOCKS_PER_SEC;

    //print result
    printf("runtime=%d\n", result);
}

//factorial calculation
int rfact(int n)
{
    int temp = n * rfact(n-1);
    printf(i++);
    return temp;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-25T00:34:39.147

您缺少基本情况，因此您遇到了无限递归。当您到达`n == 1`或时，您需要停下来`n == 0`：

```
int rfact(int n)
{
    if (n <= 0)
        return 1;
    return n * rfact(n-1);
} 
```

此外，阶乘函数并不是递归的最佳用例，因为迭代版本可以说更具可读性并且可能更快，但这是另一回事:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T00:34:46.720

您的 rfact 函数中没有基本案例。这意味着 rfact(n-1) 将永远被调用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-25T01:13:55.553

我同意我上面的人，你错过了递归的基本情况

但是请注意执行 2'000'000 次阶乘，除了需要花费大量时间来终止计算之外，您的变量将溢出

# sql - SQL 创建 UDF 计算列

> ID：15058457
> 
> 赞同：3
> 
> 时间：2013-02-25T00:33:13.633
> 
> 标签：sql, sql-server

我试图创建一个计算列，但由于其中一个列在另一个表中，我知道我需要创建一个 udf。这是 ERD 的链接，因此您可以查看关系

[http://imageshack.us/photo/my-images/23/databaseassignment2new.png/](http://imageshack.us/photo/my-images/23/databaseassignment2new.png/)

这就是我想要做的。

```
CheckOutDate + loanperiod = lastreturndate
So the result would look something like this

Checkoutdate    loanperiod      lastreturndate

2012-1-01          3         2012-4-01 
```

这就是我到目前为止所拥有的

```
 CREATE FUNCTION dbo.Getvaludates( @laastreturndate DATETIME)
  RETURNS DATETIME
  AS
 BEGIN
  DECLARE @lastReturndate DATETIME

  SELECT @lastReturndate= dateadd(month,loanperiod,CheckOutDate)
  FROM [Loan] I
    JOIN [Item] L ON I.barcode = L.barcode
    JOIN [Return] R ON I.barcode = R.barcode
   WHERE I.barcode = @lastreturndate
   RETURN @lastReturndate
   END 
   GO 
```

然后我需要将其添加到计算列

```
 ALTER TABLE dbo.Item
   ADD lastreturndate AS dbo.Getvaluedate(lastreturndate) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-25T01:05:47.137

我认为您的 UDF 应该如下所示：

```
CREATE FUNCTION dbo.Getvaluedate( @barcode int)
  RETURNS DATETIME
  AS
 BEGIN
  DECLARE @lastReturndate DATETIME

  SELECT @lastReturndate= dateadd(month,loanperiod,CheckOutDate)
  FROM [Loan] I
    JOIN [Item] L ON I.barcode = L.barcode
    JOIN [ItemDetails] ID ON L.isbn = ID.isbn
   WHERE I.barcode = @barcode

   RETURN @lastReturndate
   END ; 
```

进而：

```
ALTER TABLE Loan ADD lastreturndate  AS dbo.Getvaluedate(barcode); 
```

这是一个[SQL Fiddle 演示](http://sqlfiddle.com/#!3/7089b/1)

# android - 意外的回栈行为

> ID：15058458
> 
> 赞同：2
> 
> 时间：2013-02-25T00:33:15.433
> 
> 标签：android, android-activity

我有一个启动 Activity (C) 的通知，我为其构建了一个回栈以遵守 Android 准则，回栈：

```
C
B
A 
```

用户单击通知，它打开 C，然后如果他们按回它转到 B，然后到 A，然后到主屏幕。这按预期工作。

如果用户单击通知（打开 C），然后按主页按钮转到主屏幕，然后从主屏幕启动应用程序，它将打开 A，而不是我期望和想要的 C。如果他们然后（从 A）按回，它会转到 C，然后是 B，然后是 A。因此，当他们在这种情况下从主屏幕启动应用程序时，它会创建一个新的 Activity A 并将其放在现有堆栈的顶部而不是打开现有堆栈 (C) 的顶部，因此堆栈看起来像：

```
A
C
B
A 
```

我的代码为通知创建了后台堆栈和启动意图：

```
/* Build the back stack for navigation */
TaskStackBuilder stackBuilder = TaskStackBuilder.create( this );
/* Pairing List */
Intent intent = new Intent( this, A.class );
intent.setFlags( Intent.FLAG_ACTIVITY_CLEAR_TOP | Intent.FLAG_ACTIVITY_SINGLE_TOP );
stackBuilder.addNextIntent( intent );
/* Pairing */
intent = new Intent( this, B.class );
intent.putExtra( "id", briefing.getLeg().getDay().getPairing().getId() );
stackBuilder.addNextIntent( intent );

/* Create a launch intent and notification */
intent = new Intent( this, C.class );
intent.putExtra( "date", briefing.getLeg().getDay().getDate() );
intent.putExtra( "id", briefing.getLeg().getId() );
intent.putExtra( "briefing", true );

stackBuilder.addNextIntent( intent );
pIntent = stackBuilder.getPendingIntent( 0, PendingIntent.FLAG_ONE_SHOT ); 
```

我的清单中的活动声明：

```
<activity android:name=".C" />
<activity
    android:name=".A"
>
    <intent-filter>
        <action android:name="android.intent.action.MAIN" />
        <category android:name="android.intent.category.LAUNCHER" />
    </intent-filter>
</activity>
<activity android:name=".B" /> 
```

我认为这是我在意图上设置的标志的问题，但我不确定我需要更改什么。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-20T08:41:08.013

我认为这是正常的行为。只有顶部的活动才能处于活动状态。因此，如果您启动 A，它将被推到顶部。

如果您希望它启动一个新任务（带有自己的后台堆栈），我认为您应该在清单中将您的启动模式设置为“singleInstance”。每次启动 Activity A 时，这都会创建一个新的“任务”。使用 Intents，您应该能够构建一个 Back stack A->B->C。

看看：http: [//developer.android.com/guide/components/tasks-and-back-stack.html](http://developer.android.com/guide/components/tasks-and-back-stack.html)

# python - 如何制作只匹配整数的正则表达式？

> ID：15058461
> 
> 赞同：0
> 
> 时间：2013-02-25T00:33:37.107
> 
> 标签：python, regex

我在一个字符串中有这个多项式。

```
x^3+0.125x+2 
```

我想在这里匹配 3 和 2，而不是 0.125。只是整数。到目前为止我最好的是这个，但这仍然与 0.125 中的 25 匹配。

```
(?<!\.)\d+(?!\.) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T00:42:19.247

你可以试试这个：

```
>>> import re
>>> re.findall(r'(?<!\.)\b\d+\b(?!\.)', "x^3+0.125x+2")
['3', '2'] 
```

用于`\b\d+\b`确保匹配整个数字

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T02:02:06.237

整数是仅包含数字、可选的`e`或`E`（仅当后跟数字时）和可选以 开头的数字`-`。左边只能是非数字和非字母（因为`x2`将被视为变量名）或什么都没有。右边只能有一个非数字或什么都没有（`2x`右边是`2*x`）。

以下模式应根据给定规范匹配字符串中的所有整数：

```
r'(?:^|(?<=[^\d\w\.]))(?:(?:(?<![\d\w])|^)\-)?\d+(?:[eE]\d+)?(?!\.)(?=[^\d]|$)'' 
```

# python - 如何使用 Python + Selenium WebDriver 保存和加载 cookie

> ID：15058462
> 
> 赞同：164
> 
> 时间：2013-02-25T00:33:38.623
> 
> 标签：python, python-2.7, selenium, webdriver

如何将 Python 的 Selenium WebDriver 中的所有 cookie 保存到 .txt 文件中，然后再加载它们？

该文档并没有对 getCookies 函数进行任何说明。

* * *

## 回答 #1

> 赞同：250
> 
> 时间：2013-02-25T00:41:08.183

您可以使用 pickle 将当前 cookie 保存为 Python 对象。例如：

```
import pickle
import selenium.webdriver

driver = selenium.webdriver.Firefox()
driver.get("http://www.google.com")
pickle.dump( driver.get_cookies() , open("cookies.pkl","wb")) 
```

稍后将它们添加回来：

```
import pickle
import selenium.webdriver

driver = selenium.webdriver.Firefox()
driver.get("http://www.google.com")
cookies = pickle.load(open("cookies.pkl", "rb"))
for cookie in cookies:
    driver.add_cookie(cookie) 
```

* * *

## 回答 #2

> 赞同：104
> 
> 时间：2018-02-07T13:52:08.460

当您需要从会话到会话的 cookie 时，还有另一种方法可以做到这一点。使用 Chrome 选项 user-data-dir 以将文件夹用作配置文件。我跑：

```
# You need to: from selenium.webdriver.chrome.options import Options
chrome_options = Options()
chrome_options.add_argument("user-data-dir=selenium") 
driver = webdriver.Chrome(chrome_options=chrome_options)
driver.get("www.google.com") 
```

在这里，您可以进行检查人机交互的登录。我这样做，然后每次我用那个文件夹启动 Webdriver 时我现在需要的 cookie 都在那里。您还可以手动安装扩展并在每个会话中使用它们。

我第二次运行时，所有的 cookie 都在那里：

```
# You need to: from selenium.webdriver.chrome.options import Options    
chrome_options = Options()
chrome_options.add_argument("user-data-dir=selenium") 
driver = webdriver.Chrome(chrome_options=chrome_options)
driver.get("www.google.com") # Now you can see the cookies, the settings, extensions, etc., and the logins done in the previous session are present here. 
```

好处是你可以使用多个不同设置和cookies、Extensions的文件夹，而无需加载、卸载cookies、安装和卸载扩展程序、更改设置、通过代码更改登录名，因此没有程序中断的逻辑，等等

此外，这比必须通过代码完成所有操作要快。

* * *

## 回答 #3

> 赞同：39
> 
> 时间：2014-02-10T18:14:20.380

请记住，您只能为当前域添加 cookie。

如果您想为您的 Google 帐户添加 cookie，请执行

```
browser.get('http://google.com')
for cookie in cookies:
    browser.add_cookie(cookie) 
```

* * *

## 回答 #4

> 赞同：23
> 
> 时间：2019-08-10T18:05:08.907

[只需对Roel Van de Paar 编写](https://stackoverflow.com/questions/15058462/how-to-save-and-load-cookies-using-python-selenium-webdriver/56421586#56421586)的代码稍作修改，所有功劳都归功于他。我在 Windows 中使用它，它在设置和添加 cookie 时运行良好：

```
from selenium import webdriver
from selenium.webdriver.chrome.options import Options

chrome_options = Options()
chrome_options.add_argument("--user-data-dir=chrome-data")
driver = webdriver.Chrome('chromedriver.exe',options=chrome_options)
driver.get('https://web.whatsapp.com')  # Already authenticated
time.sleep(30) 
```

* * *

## 回答 #5

> 赞同：18
> 
> 时间：2019-06-03T05:27:08.403

基于[Eduard Florinescu 的回答](https://stackoverflow.com/questions/15058462/how-to-save-and-load-cookies-using-python-selenium-webdriver/48665557#48665557)，但添加了更新的代码和缺少的导入：

```
$ cat work-auth.py
#!/usr/bin/python3

# Setup:
# sudo apt-get install chromium-chromedriver
# sudo -H python3 -m pip install selenium

import time
from selenium import webdriver
from selenium.webdriver.chrome.options import Options

chrome_options = Options()
chrome_options.add_argument("--user-data-dir=chrome-data")
driver = webdriver.Chrome('/usr/bin/chromedriver',options=chrome_options)
chrome_options.add_argument("user-data-dir=chrome-data")
driver.get('https://www.somedomainthatrequireslogin.com')
time.sleep(30)  # Time to enter credentials
driver.quit()

$ cat work.py
#!/usr/bin/python3

import time
from selenium import webdriver
from selenium.webdriver.chrome.options import Options

chrome_options = Options()
chrome_options.add_argument("--user-data-dir=chrome-data")
driver = webdriver.Chrome('/usr/bin/chromedriver',options=chrome_options)
driver.get('https://www.somedomainthatrequireslogin.com')  # Already authenticated
time.sleep(10)
driver.quit() 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2019-08-15T09:43:12.670

这是我在 Windows 中使用的代码。有用。

```
for item in COOKIES.split(';'):
    name,value = item.split('=', 1)
    name=name.replace(' ', '').replace('\r', '').replace('\n', '')
    value = value.replace(' ', '').replace('\r', '').replace('\n', '')
    cookie_dict={
            'name':name,
            'value':value,
            "domain": "",  # Google Chrome
            "expires": "",
            'path': '/',
            'httpOnly': False,
            'HostOnly': False,
            'Secure': False
        }
    self.driver_.add_cookie(cookie_dict) 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2021-01-02T03:36:05.657

理想情况下，最好不要一开始就复制目录，但这非常困难，请参阅

*   [如何防止 Selenium 3.0 (Geckodriver) 创建临时 Firefox 配置文件？](https://stackoverflow.com/questions/67561490/)
*   [如何使用 Selenium Webdriver 就地使用现有配置文件？](https://stackoverflow.com/questions/67512994/how-do-i-use-an-existing-profile-in-place-with-selenium-webdriver?noredirect=1)

还

*   [无法使用 C# 在 Selenium WebDriver 中使用现有的 Firefox 配置文件](https://stackoverflow.com/questions/46669856/cant-use-existing-firefox-profile-in-selenium-webdriver-using-c-sharp/58738291#58738291)（与以下解决方案类似的解决方案）

* * *

这是一个为 Firefox 保存配置文件目录的解决方案（类似于`user-data-dir`Chrome 中的（用户数据目录））（它涉及手动复制目录。我找不到其他方法）：

它在 Linux 上进行了测试。

* * *

简洁版本：

*   保存配置文件

```
driver.execute_script("window.close()")
time.sleep(0.5)
currentProfilePath = driver.capabilities["moz:profile"]
profileStoragePath = "/tmp/abc"
shutil.copytree(currentProfilePath, profileStoragePath,
                ignore_dangling_symlinks=True
                ) 
```

*   加载配置文件

```
driver = Firefox(executable_path="geckodriver-v0.28.0-linux64",
                 firefox_profile=FirefoxProfile(profileStoragePath)
                ) 
```

* * *

长版（通过演示它的工作原理和大量解释——参见代码中的注释）

该代码`localStorage`用于演示，但也适用于 cookie。

```
#initial imports

from selenium.webdriver import Firefox, FirefoxProfile

import shutil
import os.path
import time

# Create a new profile

driver = Firefox(executable_path="geckodriver-v0.28.0-linux64",
                  # * I'm using this particular version. If yours is
                  # named "geckodriver" and placed in system PATH
                  # then this is not necessary
                )

# Navigate to an arbitrary page and set some local storage
driver.get("https://DuckDuckGo.com")
assert driver.execute_script(r"""{
        const tmp = localStorage.a; localStorage.a="1";
        return [tmp, localStorage.a]
    }""") == [None, "1"]

# Make sure that the browser writes the data to profile directory.
# Choose one of the below methods
if 0:
    # Wait for some time for Firefox to flush the local storage to disk.
    # It's a long time. I tried 3 seconds and it doesn't work.
    time.sleep(10)

elif 1:
    # Alternatively:
    driver.execute_script("window.close()")
    # NOTE: It might not work if there are multiple windows!

    # Wait for a bit for the browser to clean up
    # (shutil.copytree might throw some weird error if the source directory changes while copying)
    time.sleep(0.5)

else:
    pass
    # I haven't been able to find any other, more elegant way.
    #`close()` and `quit()` both delete the profile directory

# Copy the profile directory (must be done BEFORE driver.quit()!)
currentProfilePath = driver.capabilities["moz:profile"]
assert os.path.isdir(currentProfilePath)
profileStoragePath = "/tmp/abc"
try:
    shutil.rmtree(profileStoragePath)
except FileNotFoundError:
    pass

shutil.copytree(currentProfilePath, profileStoragePath,
                ignore_dangling_symlinks=True # There's a lock file in the
                                              # profile directory that symlinks
                                              # to some IP address + port
               )

driver.quit()
assert not os.path.isdir(currentProfilePath)
# Selenium cleans up properly if driver.quit() is called,
# but not necessarily if the object is destructed

# Now reopen it with the old profile

driver=Firefox(executable_path="geckodriver-v0.28.0-linux64",
               firefox_profile=FirefoxProfile(profileStoragePath)
              )

# Note that the profile directory is **copied** -- see FirefoxProfile documentation
assert driver.profile.path!=profileStoragePath
assert driver.capabilities["moz:profile"]!=profileStoragePath

# Confusingly...
assert driver.profile.path!=driver.capabilities["moz:profile"]
# And only the latter is updated.
# To save it again, use the same method as previously mentioned

# Check the data is still there

driver.get("https://DuckDuckGo.com")

data = driver.execute_script(r"""return localStorage.a""")
assert data=="1", data

driver.quit()

assert not os.path.isdir(driver.capabilities["moz:profile"])
assert not os.path.isdir(driver.profile.path) 
```

* * *

什么不起作用：

*   初始化`Firefox(capabilities={"moz:profile": "/path/to/directory"})`——驱动程序将无法连接。
*   `options=Options(); options.add_argument("profile"); options.add_argument("/path/to/directory"); Firefox(options=options)`——同上。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2021-06-14T15:10:18.353

试试这个方法：

```
import pickle
from selenium import webdriver
driver = webdriver.Chrome(executable_path="chromedriver.exe")
URL = "SITE URL"
driver.get(URL)
sleep(10)
if os.path.exists('cookies.pkl'):
    cookies = pickle.load(open("cookies.pkl", "rb"))
    for cookie in cookies:
        driver.add_cookie(cookie)
    driver.refresh()
    sleep(5)
# check if still need login
# if yes:
# write login code
# when login success save cookies using
pickle.dump(driver.get_cookies(), open("cookies.pkl", "wb")) 
```

# php - 在 CodeIgniter 中显示数据库表

> ID：15058463
> 
> 赞同：4
> 
> 时间：2013-02-25T00:33:48.037
> 
> 标签：php, mysql, codeigniter

我正在尝试使用**CodeIgniter**显示表格。我做了一个函数来从一个表中选择所有数据，并在单击按钮时使用 foreach 循环显示它。我收到此错误：

```
Fatal error: Call to undefined method CI_DB_mysql_driver::result() in C:\Xampp\htdocs\Auction\application\models\bidding_model.php on line 47 
```

这是我的控制器页面：

```
public function viewauction()
{
    $this->load->model('bidding_model');
    $data['query'] = $this->bidding_model->viewauction();   
    $this->load->view('auction_view', $data);
} 
```

这是模型：

```
function viewauction()
{
    $query =  $this->db->select('products'); 
    return $query->result();
} 
```

这是视图：

```
<tbody>
<?php foreach($query as $row): ?>
<tr>   
    <td><?php echo $row->product_id; ?></td>
    <td><?php echo $row->auction_id; ?></td>
    <td><?php echo $row->start_time; ?></td>
    <td><?php echo $row->end_time; ?></td>
</tr>
<?php endforeach; ?>
</tbody> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-25T03:20:08.803

只需将您的模型方法代码更改为

```
function viewauction()
{
    $query = $this->db->select('*')->from('products')->get();
    return $query->result();
} 
```

希望这可以帮助。谢谢！！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T00:53:18.530

你必须使用`get()`

`select()`查询生成器用于选择表的列而不是表

例子

```
$query = $this->db->select(array('product_id','auction_id'))
                  ->get('products');
return $query->result(); 
```

如果你想选择所有你可以使用 get only，

[在http://ellislab.com/codeigniter/user-guide/database/active_record.html#select](http://ellislab.com/codeigniter/user-guide/database/active_record.html#select)阅读更多

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-25T05:20:59.183

你的问题在这里：

```
$query =  $this->db->select('products'); 
return $query->result() ; 
```

`$query->result()`返回 false 可能是因为 products 表不存在。您必须使用 get 而不是 select。

尝试：

```
$query =  $this->db->get('products'); 
return $query->result() ; 
```

这可以让你开始

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-11-24T11:31:35.980

```
public function select($table, $field, $value)
{
    $this->db->select(*);
    $this->db->from('$table');
    $this->db->where($field, $value);
    $query = $this->db->get();

    return $query;
} 
```

我希望上面的代码对你有帮助。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-11-24T12:31:27.530

实际上有一种更简单的方法可用。

您应该从它提供的框架功能中获得最大收益，

使用，CodeIgniter 的表库，

```
$this->load->library('table'); // Loading the Table Library 

$query = $this->db->get('table_name'); // the MySQL table name to generate HTML table

echo $this->table->generate($query); // Render of your HTML table 
```

如果您想要一些自定义的东西，例如表头或正文中的类或任何您几乎需要的东西，您还可以修改 HTML 生成器的行为。

```
$this->table->set_template($template); // passing an array 
```

加载表库后使用此行。使用以下文档链接中的密钥。

参考：[CodeIgniter 3 表库 - 官方文档](https://www.codeigniter.com/user_guide/libraries/table.html)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-11-13T10:03:04.203

```
function viewauction()
{
    $this->db->select('*'); 
    $this->db->from('tablename');
    $query = $this->db->get();
    return $query->result();
} 
```

上面的代码会帮助你。

# php - Magento CE 1.7.0.2 - 只有在 footer.phtml 上启用缓存时才会出现问题

> ID：15058464
> 
> 赞同：1
> 
> 时间：2013-02-25T00:33:58.850
> 
> 标签：php, magento, magento-1.7

启用缓存时，我在使用 Magento 时遇到此问题...

**问题：**

在页脚中使用以下内容，我可以获得当前的 CMS 页面标题：

```
$this->getLayout()->getBlock('head')->getTitle(); 
```

^^ 我已经使用此方法和其他方法在页脚中获取当前 URL 并遇到相同的症状。关闭缓存后，当前页面没有问题，但缓存后将获得例如商店的页面标题，然后访问其他页面显示它仍然是商店。

**这是启用缓存的问题场景：**

1.  访问主页 ( [http://devtest.eboost.com/](http://devtest.eboost.com/) )。

2.  导航到博客并滚动到底部，以便您可以看到页脚。Powders、Shots 和一些来自 Company 的超链接在主页和所有其他页面上应该不同。它在缓存关闭的情况下表现得很好。链接在 header.phtml 中工作正常，并且具有相同的逻辑。

事情是启用了缓存，它在 header.phtml 文件中的行为不是这样，所以我很困惑。我是否需要做一些特别的事情，或者以某种方式将 footer.phtml 从缓存监控中取出？我不认为从缓存监控中删除它是明智的，因为我们的大部分 JavaScript 都在本文档中。

我不确定该怎么做，并且非常有压力要弄清楚这一点以使我们客户的网站上线。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T11:37:02.467

更新：@benmarks 的答案更好。用那个。

尝试从缓存中删除页脚。试试这个 - [http://ken.edmonds-commerce.co.uk/magento/disable-footer-block-caching-in-magento/](http://ken.edmonds-commerce.co.uk/magento/disable-footer-block-caching-in-magento/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-25T16:46:49.177

应用程序假定页脚块不是动态的，因此它被永久缓存。虽然这对核心团队来说是一个值得商榷的决定，但您有两个选择：禁用缓存或更改缓存键以合并动态参数。两者都可以通过类重写或布局 XML 来完成：

`block_html`缓存有三个“设置”：

*   `null`= 从不缓存
*   `false`= 永久缓存
*   `int`= 缓存这么多秒

在其构造函数中，`Mage_Page_Block_Html_Footer`将其`cache_lifetime`属性设置为`false`- 因此它的“永久缓存”行为。因为这个属性可以通过魔法`setCacheLifetime()`方法公开访问，所以可以从布局 XML 中设置它的值。不幸的是，没有办法将`null`布局 XML 中的值作为字符串传递，但是，*可以*通过帮助程序传递值。因此，返回的辅助方法`null`应该可以工作。有一些核心助手可以做到这一点；示例用法如下（可以放置在您可能需要创建的自定义主题的*local.xml中）：*

```
<?xml version="1.0" encoding="UTF-8"?>
<layout>
    <default>
        <action method="setCacheLifetime" block="footer">
            <value helper="usa/convertMeasureWeight">
                <x>0</x>
                <x>0</x>
                <x>0</x>
            </value>
            <!--
                i.e.
                Mage_Page_Block_Html_Footer->setCacheLifetime(
                    Mage_Usa_Helper_Data::convertMeasureWeight(0,0,0)
                );
            -->
        </action>
    </default>
</layout> 
```

那应该行得通。但是，这感觉有点老套，因此您可以创建自己的帮助类，只需简单地定义一个方法来返回`null`，以明确设置此值的目的。

# php - 带有未来日期的MySQL PHP

> ID：15058470
> 
> 赞同：0
> 
> 时间：2013-02-25T00:34:46.120
> 
> 标签：php, mysql, date, sorting

我试图从我的表中提取类型为 1、2 或 3 的结果，并且每个事件都有一个日期。我试图只显示未来的事件并对它们进行排序。下面的代码有点工作，除了按日期排序外，它仅根据事件输入数据库的顺序进行排序。

```
$sql = " SELECT * 
           FROM fitness 
          WHERE type = '3' 
            AND date >= CURRENT_DATE() 
         ORDER BY 'date' ASC"; 
```

在此先感谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T00:51:27.157

您在单引号中有“日期”，这意味着文字字符串日期。

去掉单引号。

此外，您不会说您的日期列是`DATE`、`DATETIME`还是`TIMESTAMP`项目。如果它是一个`DATE`项目，那么如果其中许多事件具有相同的日期，那么您的事件将不会有太多区别。

最后，`DATE`是一个保留字。您可能会因为将 MySQL 用作列名而感到困惑。如果我是你，我会改变它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T00:52:04.410

尝试：

```
$sql = "SELECT * 
        FROM fitness 
        WHERE type = '3' 
        AND date >= CURRENT_DATE() 
        ORDER BY date ASC"; 
```

注意日期周围没有单引号。如果这不起作用，请尝试以下操作。

```
$sql = "SELECT * 
        FROM fitness 
        WHERE type = '3' 
        AND `date` >= CURRENT_DATE() 
        ORDER BY `date` ASC"; 
```

在这种情况下，使用反引号字符 ` 而不是单引号。这是因为“日期”是保留字。

# ruby-on-rails-3 - 具有嵌套资源的 Angular JS ngResource

> ID：15058472
> 
> 赞同：15
> 
> 时间：2013-02-25T00:34:54.670
> 
> 标签：ruby-on-rails-3, json, angularjs, nested-forms, nested-attributes

我正在尝试 Angular JS，我想从我的 rails 应用程序中定义的嵌套资源中获取数据。

我写了以下几行：

```
UserMission = $resource("/users/:user_id/user_missions/:id", {user_id: "@user_id", id: "@id"}, {update: {method: "PUT"}})
$scope.user_missions = UserMission.query() 
```

我收到以下错误：

```
 Processing by UsersController#show as JSON
  Parameters: {"id"=>"user_missions"}
  User Load (0.6ms)  SELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 1]]
  User Load (0.5ms)  SELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", "user_missions"]]
Completed 404 Not Found in 10ms

ActiveRecord::RecordNotFound (Couldn't find User with id=user_missions):
  app/controllers/users_controller.rb:100:in `current_resource'
  app/controllers/application_controller.rb:34:in `authorize' 
```

我的铁路路线是这样组织的：

```
resources :users do
  resources :user_missions
end 
```

我认为这归结为我不理解“@id”。它说它来自[angularjs 站点](http://docs.angularjs.org/api/ngResource.%24resource)的“数据对象” ，我不确定这意味着什么。

任何帮助将不胜感激。

**更新**

另一个问题。我还没有找到任何使用 angularjs 使用嵌套资源（示例 User `has_many :missions, through: :user_missions`）和`$resource`. 有没有一个 angularjs`$resource`使用 ajax 操作嵌套资源（with ）的好例子？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-02-25T07:15:46.003

通读我对上一个问题的[回答](https://stackoverflow.com/questions/15059764/angularjs-ngresource-id/15061793#15061793)，您应该在调用中作为参数传递的对象中包含两个参数的值，即：

```
$scope.user_missions = UserMission.query({user_id: some_value, id: some_other_value}); 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-03-03T05:32:18.513

我也在寻找一种使用 ngResource 处理嵌套资源的方法。我不熟悉 rails 的工作原理或您的数据是什么样的，但这就是我所拥有的：

```
{"num_results": 5, "objects": [....], "page": 1, "total_pages": 1} 
```

我需要进入并获取嵌套对象数组以进行查询操作。使用 1.0 版本的 angular 这是不可能的。但是，使用 1.1 版本（我用 1.1.3 测试过）可以做到这一点。

在我的控制器中，我只是像这样设置资源：

```
$scope.MyModel = $resource("/api/mymodel/:id",
    {},
    {'query': {method: 'GET', isArray: true, "transformResponse": function (data) {
        return JSON.parse(data).objects;
    }}}); 
```

这里的关键是`transformResponse`作为操作配置的一部分传递的函数。在 1.1 中，操作配置中的任何额外配置项都会传递到`$http`请求的配置中。该`$http`服务允许一个`transformResponse`可以操作请求返回的数据的函数。使用此函数，我可以进入嵌套结构并返回操作所需的数组。

这里要注意的一个警告是 transformResponse 函数接收一个字符串值，因此您必须首先将数据解析为您所期望的。另一个需要注意的是，您返回的是您想要的实际最终数据值，而不是字符串。即使您收到一个字符串值，您也应该返回所需的结束数据值。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-03T15:23:43.397

“数据对象”指的是您的`instance`对象（$scope.user_missions 是这些对象的数组——或者更确切地说，如果您确实成功地检索到它），您可以将其`UserMission`视为`class`.

如果您在`class`对象 ( `UserMission`) 上调用查询方法，在您的情况下，它至少需要一个参数才能知道`UserMission`要检索哪个用户。

```
UserMission.query({user_id: <USER_ID>}); 
```

以上将执行“ **GET ALL** ”

要获得特定的`UserMission`（“ **GET ONE** ”），您必须提供两个 ID

```
UserMission.query({user_id: <USER_ID>, id: <MISSION_ID>}); 
```

说得通？

# java - 编写一个计算长度/平均值的方法

> ID：15058474
> 
> 赞同：0
> 
> 时间：2013-02-25T00:35:09.603
> 
> 标签：java, class, methods

我正在尝试使用我的主要方法所需的所有方法编写一个类，但是在弄清楚如何使用这些方法确定所需值时遇到了麻烦。我遇到的问题是 getAverageLength 和 getCount。

电流输出：

```
The length of Line 1 is 1.0
The length of Line 2 is 10.0
There are 0 lines and the average length is 0
The length of Line 1 is 1.0
The length of Line 2 is 10.0
The length of Line 3 is 7.0
There are 0 lines and the average length is 0 
```

预期输出：

```
The length of Line 1 is 1
The length of Line 2 is 10
There are 2 lines and the average length is 5.5
The length of Line 1 is 7
The length of Line 2 is 10
The length of Line 3 is 7
There are 3 lines and the average length is 8.0 
```

这是我正在使用的主要方法的一部分。

```
public class TestParts {

public static void main(String[] args) {

     MyLine ml1 = new MyLine();
     MyLine ml2 = new MyLine(10);
     System.out.println("The length of Line 1 is " + ml1.getLength());
     System.out.println("The length of Line 2 is " + ml2.getLength());
     System.out.println("There are " + MyLine.getCount() +
     " lines and the average length is " + MyLine.getAverageLength());
     MyLine ml3 = new MyLine(7);
     ml1.setLength(7);
     System.out.println("The length of Line 1 is " + ml1.getLength());
     System.out.println("The length of Line 2 is " + ml2.getLength());
     System.out.println("The length of Line 3 is " + ml3.getLength());
     System.out.println("There are " + MyLine.getCount() +
     " lines and the average length is " + MyLine.getAverageLength());
    }
} 
```

以下是我为计算值而编写的单独类。

```
class MyLine {
private double getLength;

MyLine() {
    getLength = 1;
}

double getLength() {
    return getLength;
}

MyLine(double setLength) {
    getLength = setLength;
}

public void setLength(int i) {
    getLength = getLength();
}

public static int getCount() {

    return 0;
}

public static int getAverageLength() {

    return 0;
}

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T00:50:50.393

对于`getCount`，使`static int`每个构造函数递增的 a 。

对于`getAverageLength`，将`static int`每个构造函数添加到的行的总和除以计数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T01:01:14.400

代码有几个问题。首先，建议在注释中记录方法应该做什么。这将对您和其他人有所帮助。二、这些方法：

```
public void setLength(int i) {
    getLength = getLength();
} 
```

`getLength`私有成员变量可能命名错误。我怀疑意图是一个名词，例如`length`while`getLength()`是一种旨在返回 current 的方法`length`。此方法采用原始`int`数据类型来设置`double`. 这是故意的吗？看起来是个误会。此外，它没有任何功能，因为它只是将`getLength`（同样，应该是`length`）变量设置为方法的返回值，而方法`getLength()`又返回 的值`getLength`。这是一个补救逻辑和基本数学问题：A = 1 = getLength() = A = 1

```
public static int getCount() {

    return 0;
} 
```

为什么这个方法会返回零以外的任何值？

公共静态 int getAverageLength() {

```
return 0; 
```

}

同样在这里......基本的逻辑问题。

我不会在论坛上发布此类问题，因为它在提出问题之前缺乏做基本功课。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-25T01:08:09.020

构建一个`HashMap<MyLine, Integer>` Integer 是 MyLine 的长度。

您只需将`MyLine`要计算的那些对象放入该地图中。

`{ml1:0, ml2:10, ml3:7}`

然后你可以计算你想要的一切。

# ios - 'class-name' 没有可见的@interface 声明选择器'method-name'

> ID：15058475
> 
> 赞同：4
> 
> 时间：2013-02-25T00:35:14.590
> 
> 标签：ios, objective-c, syntax

我正在我的视图控制器中编写如下方法：

```
- (IBAction)expressionEvaluation:(UIButton *)sender {
    NSDictionary *testValues = [NSDictionary dictionaryWithObjectsAndKeys:@"x", 2, @"y", 3, @"z", 4, nil];
    //the below line gives the error
    double result = [self.brain evaluateExpression:self.brain.expression usingVariableValues:testValues];
    NSString *resultString = [NSString stringWithFormat:@"%g", result];
    self.display.text = resultString;
} 
```

在我的“大脑”课程中，我声明了尚未完成的方法：

```
#import <Foundation/Foundation.h>

@interface CalculatorBrain : NSObject
- (void) pushOperand:(double)operand;
- (void) setVariableAsOperand:(NSString *)variableName;
- (void) performWaitingOperation;
- (double) performOperation:(NSString *)operation;

@property (readonly) id expression;
+ (double)evaluateExpression: (id)anExpression
         usingVariableValues: (NSDictionary *)variables; //declared here
@end 
```

...在 .h 和 .m 中：

```
+ (double) evaluateExpression:(id)anExpression usingVariableValues:(NSDictionary *)variables {
    double result = 0;
    int count = [anExpression count];
    for (int i = 0; i < count; i++) {

    }

    return result;
} 
```

为什么我会收到“'CalculatorBrain' 没有可见的@interface 声明选择器'evaluateExpression:usingVariableValues'”错误？我是 Objective-c 的新手，但我想这意味着它没有看到我的声明。不过，我不确定这是否是语法/格式问题，因为我是该语言的新手。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-25T00:40:35.897

请注意，您声明`evaluateExpression:usingVariableValues:`为类方法

```
+ (double)evaluateExpression: (id)anExpression  // + means class method
     usingVariableValues: (NSDictionary *)variables; //declared here 
```

并像实例方法一样使用它

```
// assuming self.brain is an instance of CalculatorBrain
[self.brain evaluateExpression:self.brain.expression usingVariableValues:testValues]; 
```

所以要么将方法更改为

```
- (double)evaluateExpression: (id)anExpression  // - means instance method
     usingVariableValues: (NSDictionary *)variables; //declared here 
```

或这样称呼它

```
[CalculatorBrain evaluateExpression:self.brain.expression usingVariableValues:testValues]; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-25T00:38:56.560

“+”号表示类方法。您可以通过您的类名而不是它的实例来访问它。

像

```
[MyClass methodName]; 
```

“-”符号表示实例方法。您可以通过您的类的实例访问它（在分配初始化它之后。

像

```
MyClass *myInstance = [[MyClass alloc] init];

[myInstance methodName]; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-25T00:42:51.457

MOXY 是对的。

```
 + (double)evaluateExpression: (id)anExpression; 
```

是一个类方法，并被发送到类。您通常将类方法用于构造新对象之类的事情：

```
 + (NSString*) stringWithString: (NSString*) s; 
```

你想要的是一个实例方法：

```
 - (double) evaluateExpression: (id) anExpression; 
```

您将发送到对象上的实例。

# c# - 连接字符串中的数据源 - 安装项目

> ID：15058477
> 
> 赞同：0
> 
> 时间：2013-02-25T00:35:32.467
> 
> 标签：c#

我正在为我的 C# 桌面应用程序创建一个安装项目。应该在访问数据库的连接字符串中写入什么数据源？我应该将我的数据库文件放在解决方案项目中的什么位置？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T01:16:50.420

例如，假设您使用的是 VS 安装项目，您需要将访问数据库文件添加为内容并将其放置在应用程序目录中。要在配置文件中指定位置，您需要编写一个自定义操作来相应地修改连接字符串。以下示例是在安装阶段（未测试）后设置连接字符串的安装程序类：

```
[RunInstaller(true)]
public partial class Installer1 : System.Configuration.Install.Installer
{
    public Installer1()
    {
        InitializeComponent();
        this.AfterInstall += new InstallEventHandler(Installer1_AfterInstall);
    }

    void Installer1_AfterInstall(object sender, InstallEventArgs e)
    {
        string sTargetDir = Context.Parameters["TargetDir"];
        string sAppConfig = Path.Combine(sTargetDir, "<your app>.exe.config");
        string sDBPath = Path.Combine(sTargetDir, "<your db>.mdb");
        XDocument doc = XDocument.Load(sAppConfig);
        var elem = doc.Root.Element("/configuration/connectionStrings/add[@name='<your connection name>']");
        string connectionString = String.Format("Provider=Microsoft.Jet.OLEDB.4.0;Data Source={0};", sDBPath);
        elem.SetAttributeValue("connectionString", connectionString);
        doc.Save(sAppConfig);
   }
} 
```

或者，您可以使用[`Wix`](http://wixtoolset.org/)which has the `XmlFile`utility in the `util`extension which does it for you without you write a custom action.

# php - 检查具有该电子邮件地址的帐户是否已注册（包括点等）

> ID：15058479
> 
> 赞同：0
> 
> 时间：2013-02-25T00:35:42.350
> 
> 标签：php, validation, duplicates

我阅读了很多关于检查数据库中是否存储有相同电子邮件的问题。然而，这些解决方案都没有考虑到电子邮件提供商（例如谷歌）允许用户在其帐户名中包含点的情况。例如`username@gmail.com`等于`user.name@gmail.com`。

我知道我可以像这样去除点并检查它们，这是个好主意吗？

但我相信这里还有其他需要考虑的事情。

帮助我检查数据库中是否已经有给定的电子邮件，并考虑点和其他额外因素。

**更新** 这是我检查是否已经有电子邮件地址的方式。

```
public function isemail($email)
{
    $qw = $this->registry->dbi->prepare("SELECT `email` FROM `".PRE."membership` WHERE `email`=?;")->execute($email)->results();
    if (empty($qw)) return false;
    return true;
} 
```

问题是，例如`onetwo@gmail.com`，与`one.two@gmail.com`有一个点不同。有些电子邮件允许点用于相同的帐户，而有些则不允许。我应该如何表现？

**类似的解决方案**

可以在此处找到类似问题的解决方案

[考虑到 Gmail (user.name+label@gmail.com)，如何在 PHP 中检查重复的电子邮件地址](https://stackoverflow.com/questions/1586389/how-to-check-for-a-duplicate-email-address-in-php-considering-gmail-user-name)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T00:40:31.730

您不需要对电子邮件地址中的点做任何特殊处理。只需执行 SELECT 查询搜索电子邮件地址，如果您返回 1 行或更多行，那么您就知道它是重复的。我怀疑您的问题可能与您构建查询的方式有关。尝试在将电子邮件[`mysqli_real_escape_string`](http://www.php.net/manual/en/mysqli.real-escape-string.php)包含在查询中之前将其传递给。如果这没有帮助，请发布您的代码的相关部分，以便我们更好地帮助解决问题。

# svn - 将每个颠覆版本检出到自己的目录中？

> ID：15058480
> 
> 赞同：0
> 
> 时间：2013-02-25T00:35:48.593
> 
> 标签：svn, version-control, git-svn

我想将 SVN 存档的每个版本检出到它自己的目录中。

我的最后一个问题措辞不当，提示答案告诉我创建一个重复的 SVN 存储库，但是，这显然不是我想要的。

我不是在寻找重复的 SVN 档案——每个修订版都必须放在自己的文件夹中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T00:52:46.550

我不确定您为什么要这样做，但是编写某种脚本来做到这一点应该很容易。您只需要弄清楚 HEAD 修订号是，然后编写结帐脚本。例如使用 php（因为它最容易从我的脑海中抹去）：

```
$head = 5042;
$base = 1;
$basepath = "/path/to/folder";
$svnbin = '/usr/bin/svn';
$svnurl = 'http://svn.whatever.com/path/to/repo';

$cmdtpl = "$svnbin co -r%d $svnrl %s";

for ($n = $base; $n <= $head; $n++) {
   $dir = $basepath . '/r' . $n; // folders names like r1, r2, etc.
   $cmd = sprintf($cmdtpl, $n, $dir);

   exec($cmd, $out, $ret);

   // blow up if it fails!
   if($ret) {
      throw new Exception("Command ($cmd) failed with return value \"$ret\".");
   }

} 
```

# java - Java 监视器实现

> ID：15058482
> 
> 赞同：1
> 
> 时间：2013-02-25T00:35:53.317
> 
> 标签：java, concurrency, monitoring, monitor

我正在尝试用 Java 解决男女皆宜的浴室问题。简而言之，就是一间浴室，厕所数量不限，男女均可使用。男人和女人不能同时在浴室，但几个男人或女人可以。男人和女人由线程代表，浴室由监视器（具有同步方法的共享对象，监视并指示并发的工作方式）。

现在我的问题。通常你会写这样的东西：

```
public synchronized void womanEnter()
{
   while(menInTheBathroom>0 || menWaiting>0)
   {
      wait();
   }
    //enter bathroom
} 
```

为了唤醒这个过程，你 notify() 但我（我想我）需要能够分别通知男性和女性。如果一个人进入浴室，我希望他通知所有排队的人。我可以在监视器中使用几个信号量，但这在 excersize 中是不允许的。我可以在监视器中使用我可以等待和通知的条件吗？如果可以，怎么做？我试过了，但遇到了一堆涉及非法监视器状态的错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T00:40:48.243

您需要使用`notifyAll`来捕获所有案例（通常`notify`更具体）。您的 while 循环（不要使用 a `if`）可以防止在不需要的情况下继续。

更有效，但也更冗长，您可以使用`Condition`from the locks in `java.util.concurrent.locks`。

# ruby - 你如何调试 opscode chef / ruby 错误？

> ID：15058483
> 
> 赞同：1
> 
> 时间：2013-02-25T00:35:57.903
> 
> 标签：ruby, debugging, chef-infra

我是一个 python 人，正在努力理解 ruby​​ 堆栈跟踪。如果有人能告诉我一种系统的方法来深入了解导致此类消息的原因，我将不胜感激。运行操作码 11.4。我认为这可能是由于过时的操作码说明书，所以将 ark 更新到 0.0.17 - 最新的。然而问题依然存在。我想也许这是对另一本食谱的依赖。它是弹性搜索，但是没有指定版本。在任何情况下，这种方法似乎都是猜测工作，但是没有明确的堆栈跟踪来表明底层问题在哪里。处理此类消息的正确方法是什么？

```
Synchronizing Cookbooks:
  - users
  - ark
  - elasticsearch
  - openssl
  - sudo
  - yum
  - ohai
  - munin
  - bluepill
  - runit
  - postgresql
  - build-essential
  - apt
  - git
  - nginx
Compiling Cookbooks...

================================================================================
Recipe Compile Error in /var/chef/cache/cookbooks/ark/libraries/resource_ark.rb
================================================================================

NoMethodError
-------------
undefined method `attribute' for Chef::Resource::Ark:Class

Cookbook Trace:
---------------
  /var/chef/cache/cookbooks/ark/libraries/resource_ark.rb:37

Relevant File Content:
----------------------
/var/chef/cache/cookbooks/ark/libraries/resource_ark.rb:

 30:          @allowed_actions.push(:install, :dump, :cherry_pick, :put, :install_with_make, :configure, :setup_py_build, :setup_py_install, :setup_py)
 31:          @action = :install
 32:          @provider = Chef::Provider::Ark
 33:        end
 34:  
 35:        attr_accessor :path, :release_file, :prefix_bin, :prefix_root, :home_dir, :extension, :version
 36:  
 37>>       attribute :owner, :kind_of => String, :default => 'root'
 38:        attribute :group, :kind_of => [String, Fixnum], :default => 0
 39:        attribute :url, :kind_of => String, :required => true
 40:        attribute :path, :kind_of => String, :default => nil
 41:        attribute :full_path, :kind_of => String, :default => nil
 42:        attribute :append_env_path, :kind_of => [TrueClass, FalseClass], :default => false
 43:        attribute :checksum, :regex => /^[a-zA-Z0-9]{64}$/, :default => nil
 44:        attribute :has_binaries, :kind_of => Array, :default => []
 45:        attribute :creates, :kind_of => String, :default => nil
 46:        attribute :release_file, :kind_of => String, :default => ''

[2013-02-25T00:19:30+00:00] ERROR: Running exception handlers
[2013-02-25T00:19:30+00:00] FATAL: Saving node information to /var/chef/cache/failed-run-data.json
[2013-02-25T00:19:30+00:00] ERROR: Exception handlers complete
Chef Client failed. 0 resources updated
[2013-02-25T00:19:30+00:00] FATAL: Stacktrace dumped to /var/chef/cache/chef-stacktrace.out
[2013-02-25T00:19:30+00:00] FATAL: NoMethodError: undefined method `attribute' for Chef::Resource::Ark:Class 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T00:45:00.920

似乎社区站点版本 0.0.17 与当前头部不同，即使它们具有相同的版本号。从 github [https://github.com/opscode-cookbooks/ark/commit/b8c4aaf17d6e88aa857af6b2038eb0dba9981c0b](https://github.com/opscode-cookbooks/ark/commit/b8c4aaf17d6e88aa857af6b2038eb0dba9981c0b)安装源代码解决了这个问题。

# r - 在 R 中使用 Twitter 流 API 的 Oauth（使用 RCurl）

> ID：15058485
> 
> 赞同：4
> 
> 时间：2013-02-25T00:36:09.497
> 
> 标签：r, api, streaming, keyword, rcurl

我想在 R 中使用 RCurl 连接到 Twitter 的 Streaming API，并且还能够过滤关键字。然而，Twitter API v1.1 中对授权的新限制使得使用 RCurl 变得困难。

以前，代码可以从[这个页面](https://stackoverflow.com/questions/8797608/rcurl-twitter-streaming-api-keyword-filtering)中获取如下内容：

```
 getURL("https://stream.twitter.com/1/statuses/filter.json", 
   userpwd="Username:Password",
   cainfo = "cacert.pem",
   write=my.function,
   postfields="track=bruins") 
```

但现在，Twitter 的新 API 正在让用户使用 OAuth 进行授权。我有一个令牌和秘密，我只需要把它放在这个代码中进行授权。

谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-25T07:54:39.703

你可以用 pacakge 做到这一点`ROAuth`。我假设您已经在 Twitter 上注册了您的应用程序并拥有一个 API 密钥。我从 Stack Overflow 上的[其他问题](https://stackoverflow.com/q/9916283/1478381)（该问题和相关答案还包含指向其他贡献问题的一些链接）以及 package[`ROAuth`](http://cran.r-project.org/web/packages/ROAuth/ROAuth.pdf)和[`twitteR`](http://cran.r-project.org/web/packages/twitteR/twitteR.pdf).

```
library(RCurl)
library(twitteR)
library(ROAuth)

requestURL <- "https://api.twitter.com/oauth/request_token"
accessURL = "http://api.twitter.com/oauth/access_token"
authURL = "http://api.twitter.com/oauth/authorize"
consumerKey = "myconsumerkeystring"
consumerSecret = "myconsumersecretstring"
Cred <- OAuthFactory$new(consumerKey=consumerKey,
                             consumerSecret=consumerSecret,
                             requestURL=requestURL,
                             accessURL=accessURL, 
                             authURL=authURL)
    #The next command provides a URL which you will need to copy and paste into your favourite browser
    #Assuming you are logged into Twitter you will then be provided a PIN number to type into the R command line
Cred$handshake(cainfo = system.file("CurlSSL", "cacert.pem", package = "RCurl") )
    # Checks that you are authorised
registerTwitterOAuth(Cred) 
```

我相信流 API 的使用是由包处理的[`streamR`](http://cran.r-project.org/web/packages/streamR/streamR.pdf)

高温高压

# c# - 如何从 Web.config 连接到 Application_Start？

> ID：15058488
> 
> 赞同：1
> 
> 时间：2013-02-25T00:36:22.677
> 
> 标签：c#, asp.net, .net, web-config, asp.net-4.0

我有一些我想在 Application_Start 中执行的逻辑，但是不必将其添加到 Global.asax.cs 中的 Application_Start 中，我是否可以在 web.config 中添加一个条目以准确执行它应用程序_开始？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T00:43:51.817

特别是从 web.config 中，您可以创建一个连接到应用程序启动的[HTTP 模块。](http://msdn.microsoft.com/en-us/library/aa719858%28v=vs.71%29.aspx)

此外，根据您的设置，您可以使用[WebActivator](https://github.com/davidebbo/WebActivator) ( [Nuget](http://nuget.org/packages/WebActivator) )，它允许您在运行时挂接到 Application_Start 事件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T00:44:23.610

您也许可以在 app_start 中创建一个初始化程序，它查看 Web 配置并加载您想要启动的各种任务

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-25T00:49:00.477

有不同的方法可以做到这一点，一种简单的方法是

1.  在 web.config 中为将执行该工作的类/接口创建一个条目。
2.  把那个类的实际实现
3.  在 Application_Start 中，从 web.config 加载值，使用反射或您能想到的任何方法创建类的实例，例如[http://msdn.microsoft.com/en-us/library/system.activator.createinstance.aspx](http://msdn.microsoft.com/en-us/library/system.activator.createinstance.aspx)
4.  调用该类中将实际执行逻辑的函数。

或者您可以使用其他一些技术，例如依赖注入并从 web.config 注入实际实现

# android - 在Android中，如何更改按钮的颜色，暂停几秒钟，然后再次更改？

> ID：15058490
> 
> 赞同：4
> 
> 时间：2013-02-25T00:36:26.650
> 
> 标签：android

这是我的代码：

```
public class TestActivity extends Activity {    

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        start();
    }

    private void start() {
        setContentView(R.layout.main);

        LinearLayout layout = (LinearLayout) findViewById(R.id.linearLayout);

        Button button = new Button(this);

        layout.addView(button);

        button.getBackground().setColorFilter(new LightingColorFilter(0x00000000, 0x0000FF00));  // green
        button.invalidate(); 

        try {
            Thread.sleep(3000);
        } catch (InterruptedException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }

        button.getBackground().setColorFilter(new LightingColorFilter(0x00000000, 0x000000FF));  // blue
        button.invalidate(); 
    }
} 
```

这只是在 3 秒后显示一个蓝色按钮；它永远不会显示为绿色。

我认为，如果我的大脑工作正常，我可以从以下帖子中找出答案：

[为什么 view.invalidate 不立即在我的 android 游戏中重绘屏幕](https://stackoverflow.com/questions/1458047/why-isnt-view-invalidate-immediately-redrawing-the-screen-in-my-android-game)

[如何在执行下一行代码之前强制视图重绘](https://stackoverflow.com/questions/8754709/how-to-force-a-view-to-redraw-immediately-before-the-next-line-of-code-is-execut)

[如何强制整个布局视图刷新？](https://stackoverflow.com/questions/5991968/how-to-force-an-entire-layout-view-refresh)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T00:57:03.890

您不应该在 UI 线程上休眠，因为这会挂起您的界面。相反，在最初将颜色设置为绿色后，您可以创建一个 Handler（在 UI 线程上，因此它将使用该线程来处理消息），然后使用[Handler.postDelayed](http://developer.android.com/reference/android/os/Handler.html#postDelayed%28java.lang.Runnable,%20long%29)发送将在 3 秒内处理的消息。在`Runnable`你传递给`postDelayed`你可以将颜色设置为蓝色。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T00:42:04.700

设置颜色后，您几乎立即进入主 UI 线程。这意味着线程在有机会进行重绘之前被锁定。

一种解决方案是使用线程。设置背景颜色，然后使用另一个线程休眠，完成后调用主（UI）线程再次更改颜色。

您可以尝试查找[AsyncTask](http://developer.android.com/reference/android/os/AsyncTask.html)或[Threading](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/Thread.html)。

# java - Servlet：在 Eclipse 中使用 servlet 创建文本文件

> ID：15058491
> 
> 赞同：0
> 
> 时间：2013-02-25T00:36:28.530
> 
> 标签：java, eclipse, exception

当我尝试在 Eclipse 中创建一个文本文件 usnig servlet 时，它会生成一个异常`FileNotFound`

```
File file = new File("WebContent/WEB-INF/user.txt");
file.createNewFile(); 
```

在此之后文件未找到异常抛出。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T00:39:27.943

你不需要给出路径。

```
File file = new File("user.txt");
file.createNewFile(); 
```

这将`user.txt`在`Web-Inf`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T00:42:23.000

异常是因为路径不存在。使用 PremGenError 的默认位置的答案，或者如果你想创建一个新的路径做`file.mkdirs()`

# php - 有什么方法可以将数据发送到推送器 channel_auth_endpoint？

> ID：15058493
> 
> 赞同：3
> 
> 时间：2013-02-25T00:36:40.287
> 
> 标签：php, javascript, authentication, pusher

我正在与 pusher 进行聊天，我需要将一些数据发送到 auth 端点，有没有办法发送数据并通过 POST 或 GET 访问它？

```
 Pusher.channel_auth_endpoint = '/server/client_auth';
  pusher = new Pusher('public_key'); 
```

谢谢！！！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-26T12:56:55.710

是的，您可以在创建`Pusher`实例时提供要发送到身份验证端点的其他数据，例如

```
var authOptions = {
  headers: {
    'header-1': 'header-value-1',
    'header-2': 'header-value-1'
  },
  params: {
    'param-1': 'param-value-1',
    'param-2': 'param-value-2'
  }
};
var pusher = new Pusher( APP_KEY, { auth: authOptions } ); 
```

更多信息和用例示例可以在 Pusher 文档中找到：http: [//pusher.com/docs/client_api_guide/client_connect#options_parameter](http://pusher.com/docs/client_api_guide/client_connect#options_parameter)

如果这不适合您的用例，我建议您与[Pusher Support](http://pusher.com/support)联系，并且可能会计划一些解决方案来更好地满足您的要求。

# ember.js - 余烬数据过滤器

> ID：15058495
> 
> 赞同：2
> 
> 时间：2013-02-25T00:36:56.063
> 
> 标签：ember.js, filtering, ember-data

如果我有一些这样的模型

```
App.Transaction = DS.Model.extend({
    amount: DS.attr('number'),
    type: DS.attr('string')
}); 
```

其中类型可以是“VISA”或“Mastercard”或“Cash”之类的东西。我有一个计算属性来计算所有交易的总金额。

```
totalAmount:function() {
    return this.getEach('amount').reduce(function(accum, item) {
        return (Math.round(accum*100) + Math.round(item*100))/100;
    }, 0);
}.property('@each') 
```

我想要做的是创建另一个计算属性，该属性返回按类型分组的所有交易的总金额（例如，类型 ==“VISA”的所有交易的总金额）。

如何在 Ember js 中执行此操作？是否有一个 getAll 方法或某种方法来获取我可以过滤的数组中的所有事务对象？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T02:41:59.160

Ember.Array类具有[filterProperty](http://emberjs.com/api/classes/Ember.Array.html#method_filterProperty)方法，可以为您执行此操作。你可以这样称呼它：

```
visaTotalAmount: function() {
    return this.filterProperty('type', 'VISA').getEach('amount').reduce(function(accum, item) {
        return (Math.round(accum*100) + Math.round(item*100))/100;
    }, 0);
}.property('@each') 
```

这将只过滤掉 VISA 类型并像以前一样进行总计算。

# java - Tomcat 安全约束不起作用

> ID：15058510
> 
> 赞同：1
> 
> 时间：2013-02-25T00:39:19.960
> 
> 标签：java, jsp, tomcat, web-applications

添加对tomcat的https支持后。我无法运行应用程序

我的 web.xml 配置

```
<display-name>EBaySignin</display-name>
<welcome-file-list>
    <welcome-file>credentials.jsp</welcome-file>
</welcome-file-list>
<security-constraint>
    <web-resource-collection>
        <web-resource-name>All Access</web-resource-name>
        <url-pattern>/*</url-pattern>
        <http-method>GET</http-method>
        <http-method>POST</http-method>
    </web-resource-collection>
    <user-data-constraint>
        <transport-guarantee>CONFIDENTIAL</transport-guarantee>
    </user-data-constraint>
</security-constraint> 
```

(Tomcat)server.xml 配置：

```
 <!-- Define a SSL HTTP/1.1 Connector on port 8443
         This connector uses the JSSE configuration, when using APR, the
         connector should be using the OpenSSL style configuration
         described in the APR documentation -->

    <Connector port="8443"  SSLEnabled="true"
               maxThreads="150" scheme="https" secure="true"
        keystoreFile="/Users/ArunAbraham/.keystore" keystorePass="password"
        protocol="org.apache.coyote.http11.Http11NioProtocol" 
               clientAuth="false" sslProtocol="TLS" /> 
```

现在我无法访问该应用程序，我收到一个错误：无法连接到服务器。我会错过什么？`("https://localhost:8443/EBaySignin/")`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T00:48:19.303

有几件事可能是错误的。还要更具体地了解错误并检查服务器日志。可能出现的问题：

1.  检查密钥库文件的路径、密码和内容。它需要一个通过匹配主机名来标识服务器的 SSL 条目。
2.  最初删除“web.xml”安全约束。首先让 SSL 在端口 8443 上工作，然后在 SSL 工作后重新添加。
3.  确保客户端可以通过网络的 8443 端口访问服务器。
4.  回顾 Tomcat SSL 设置上的每个点。我已经用过很多次了，而且效果很好。 [http://tomcat.apache.org/tomcat-6.0-doc/ssl-howto.html](http://tomcat.apache.org/tomcat-6.0-doc/ssl-howto.html)

# yii - Yii 框架错误 - “无法打开流：权限被拒绝”

> ID：15058511
> 
> 赞同：1
> 
> 时间：2013-02-25T00:39:26.163
> 
> 标签：yii

我刚刚开始在 Windows 7 机器上使用 Yii 框架。它给了我这个烦人的错误，当我重新启动计算机时它就消失了。

任何人都可以了解正在发生的事情以及如何解决它吗？.. 非常感谢

这是我得到的错误：

```
PHP 警告

复制（C:\www\corp\assets\96296f5a\js\ckeditor\plugins\imagepaste2.3.zip）：无法打开流：权限被拒绝

C:\www\yii-1.1.13\framework\utils\CFileHelper.php(131)

119
120 $文件夹=打开目录（$src）；
121同时（（$文件=读取目录（$文件夹））！==假）
122 {
第123章
124 继续；
125 $路径=$src.DIRECTORY_SEPARATOR.$文件；
126 $isFile=is_file($path);
第127章
128 {
第129章
130 {
131 复制（$路径，$dst.DIRECTORY_SEPARATOR.$file）；
第132章
133 chmod($dst.DIRECTORY_SEPARATOR.$file,$options['newFileMode']);
134 }
第135章
136 self::copyDirectoryRecursive($path,$dst.DIRECTORY_SEPARATOR.$file,$base.'/'.$file,$fileTypes,$exclude,$level-1,$options);
137 }
138 }
第139章
140 }
141
142 /**
143 * 返回在指定目录和子目录下找到的文件。

堆栈跟踪
#0  
+
 C:\www\yii-1.1.13\framework\utils\CFileHelper.php(131): 复制("C:\www\corp\protected\extensions\bootstrap\assets\js\ckeditor\pl...", "C:\www\corp\assets\96296f5a\js\ckeditor\plugins\imagepaste2.3.zi...")
#1  
+
 C:\www\yii-1.1.13\framework\utils\CFileHelper.php(136): CFileHelper::copyDirectoryRecursive("C:\www\corp\protected\extensions\bootstrap\assets\js\ckeditor\pl.. .", "C:\www\corp\assets\96296f5a\js\ckeditor\plugins", "/js/ckeditor/plugins", array(), ...)
#2  
+
 C:\www\yii-1.1.13\framework\utils\CFileHelper.php(136): CFileHelper::copyDirectoryRecursive("C:\www\corp\protected\extensions\bootstrap\assets\js\ckeditor", "C :\www\corp\assets\96296f5a\js\ckeditor", "/js/ckeditor", array(), ...)
#3  
+
 C:\www\yii-1.1.13\framework\utils\CFileHelper.php(136): CFileHelper::copyDirectoryRecursive("C:\www\corp\protected\extensions\bootstrap\assets\js", "C:\ www\corp\assets\96296f5a\js", "/js", array(), ...)
#4  
+
 C:\www\yii-1.1.13\framework\utils\CFileHelper.php(63): CFileHelper::copyDirectoryRecursive("C:\www\corp\protected\extensions\bootstrap\assets", "C:\www\公司\资产\96296f5a", "", array(), ...)
#5  
+
 C:\www\yii-1.1.13\framework\web\CAssetManager.php(251): CFileHelper::copyDirectory("C:\www\corp\protected\extensions\bootstrap\assets", "C:\www\ corp\assets\96296f5a", array("exclude" => array(".svn", ".gitignore"), "level" => -1, "newDirMode" => 511, "newFileMode" => 438))
#6  
–
 C:\www\corp\protected\extensions\bootstrap\components\Bootstrap.php(458): CAssetManager->publish("C:\www\corp\protected\extensions\bootstrap\assets", false, -1, true )

第453章
第454章
455 其他
第456章
第457章
458 $assetsUrl = Yii::app()->assetManager->publish($assetsPath, false, -1, YII_DEBUG);
第459章
第460章
第461章
462
第463章 /**

#7  
–
 C:\www\corp\protected\extensions\bootstrap\components\Bootstrap.php(163): Bootstrap->getAssetsUrl()

158 * @param string $cssFile 要注册的css文件名
159 * @param string $media 应该应用 CSS 文件的媒体。如果为空，则表示所有媒体类型。
160 */
161 公共函数 registerAssetCss($cssFile, $media = '')
162 {
163 Yii::app()->getClientScript()->registerCssFile($this->getAssetsUrl() . "/css/{$cssFile}", $media);
第164章
165
166 /**
167 * 注册核心 JavaScript。
168 * @since 0.9.8

#8  
–
 C:\www\corp\protected\extensions\bootstrap\components\Bootstrap.php(124): Bootstrap->registerAssetCss("bootstrap.css")

119 /**
120 * 注册 Bootstrap CSS。
121 */
122 公共函数 registerCoreCss()
123 {
124 $this->registerAssetCss（'bootstrap'。（！YII_DEBUG？'.min'：''）。'.css'）；
125 }
126
127 /**
128 * 注册 Bootstrap 响应式 CSS。
129 * @since 0.9.8

#9  
+
 C:\www\corp\protected\extensions\bootstrap\components\Bootstrap.php(102): Bootstrap->registerCoreCss()
#10     
+
 C:\www\yii-1.1.13\framework\base\CModule.php(387): Bootstrap->init()
#11     
+
 C:\www\yii-1.1.13\framework\base\CModule.php(523):CModule->getComponent("bootstrap")
#12     
+
 C:\www\yii-1.1.13\framework\base\CApplication.php(152): CModule->preloadComponents()
#13     
+
 C:\www\yii-1.1.13\framework\YiiBase.php(125): CApplication->__construct("C:\www\corp/protected/config/main.php")
#14     
+
 C:\www\yii-1.1.13\framework\YiiBase.php(98): YiiBase::createApplication("CWebApplication", "C:\www\corp/protected/config/main.php")
#15     
+
 C:\www\corp\index.php(13): YiiBase::createWebApplication("C:\www\corp/protected/config/main.php")
2013-02-25 11:29:18 Apache/2.2.22 (Win32) PHP/5.3.13 Yii Framework/1.1.13

```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-10T17:14:26.933

该错误基本上表明 YII 无法在运行时将所需资产从扩展复制到资产目录。

`C:\www\corp`你的 YII 项目所在的目录应该可以被 web 服务器进程写入。

我会看看是否有可能阻止 Web 服务器创建文件的防火墙/防病毒软件。尝试阅读 Web 服务器日志。

# jquery - 如何处理不确定数量的 jQuery 承诺？

> ID：15058514
> 
> 赞同：5
> 
> 时间：2013-02-25T00:39:50.630
> 
> 标签：jquery, jquery-deferred, promise

如果我生成了不确定数量的 Promise，我如何将它们作为一个组进行处理，以确保在我继续编写代码之前，该组中的所有 Promise 都已得到解决？

我虽然关于使用`jQuery.when`，但看起来它需要确定数量的承诺作为参数传递。我以为我能够传递一系列承诺进行处理，但基于文档，我认为它将将此数组评估为单个已解决的承诺。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-25T01:07:44.030

将所有承诺推入一个数组并使用：

```
$.when.apply(null, promiseArray).done(function() {.... 
```

# scheme - 深反向方案

> ID：15058515
> 
> 赞同：0
> 
> 时间：2013-02-25T00:40:20.087
> 
> 标签：scheme, racket

输入((1 2) (3 4))的列表时，我想反转它，但不是这样的((3 4) (1 2))，这就是reverse所做的，所以我试图写深度逆过程：

```
(define (deep-reverse l)
  (cond ((null? l) nil)
        (not (pair? (car l)) l)
        (else (append (deep-reverse (cdr l)) (list (car l)))))) 
```

但它只是抛出（（1 2）（3 4））。出了什么问题，我该如何让它工作？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-25T00:43:19.590

尝试：

```
(define (deep-reverse l) (map reverse l)) 
```

以上是最简单的答案；真正的答案取决于您期望 deep-reverse 做什么。请参阅我对您的问题的评论。

如果您想要一切，请一路向下：

```
(define (deep-reverse l)
  (if (list? l)
      (reverse (map deep-reverse l))
      l)) 
```

这是它的工作原理（正确）：

```
> (deep-reverse '(1 2 ((3.1 3.2) (4) "abc")))
(("abc" (4) (3.2 3.1)) 2 1) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-02-18T20:36:18.983

一个好的开始是适用于列表的反向过程。然后修改它以递归地应用于列表中的每辆车：

```
(define (reverse x)
  (define (go items tail)
    (if (null? items) tail
        (go (cdr items) (cons (car items) tail))))
  (go x ()))

(define (deep-reverse x)
  (define (go items tail)
    (cond ((null? items) tail)
          ((not (pair? items)) items)
          (else (go (cdr items) (cons (go (car items) ()) tail)))))
  (go x ())) 
```

深度逆向的应用是：

```
 (define x (list (list 1 (list 2 3) 4) 5 6 (list 7 8) 9 10)) (display x) (deep-reverse x)

   ((1 (2 3) 4) 5 6 (7 8) 9 10)
=> (10 9 (8 7) 6 5 (4 (3 2) 1)) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-25T00:43:34.677

您还必须深入反转`car`代码中的。否则，您不会深入反转列表的最前面部分。

```
(define (deep-reverse l)
  (cond ((null? l) nil)
        (not (pair? (car l)) l)
        (else (append (deep-reverse (cdr l)) (list (deep-reverse (car l))))))) 
```

# jquery - 查找值是否为 int 下拉框

> ID：15058522
> 
> 赞同：2
> 
> 时间：2013-02-25T00:41:24.203
> 
> 标签：jquery, each

快速提问。

我有一个选择下拉列表，其中包含来自数据库的项目。当用户在文本框中输入内容时，我的 jQuery 代码会循环选择选项以确保他们输入的是唯一的项目。如果他们输入相同的项目，则在选择下拉列表中选择该项目。

这样可行。

我的问题是当用户输入一个唯一值时，我通过 ajax 将其发布到我的服务器。但是，每次我循环浏览下拉列表时它都会发布。

我知道这是因为我的 ajax 代码包含在 $.each 循环中，该循环遍历他选择列表中的每个项目。我如何对其进行编码，以便发布操作只发生一次？

```
// grab current val
var cv = $(this).val();

// loop through gov bodies drp to make sure that value isn't already present
$("#drpCurrentGOVBody option").each(function () {

    if (cv == $(this).text()) {

        //value is already present
        //select it in drp down
        $(this).attr('selected', 'selected');

    } else {

        //value isn't present. Add it to db    

    }

});

// post to db
$.post('ajax/school_search_results.php', {
    add_new_gov_type: true,
    data: cv,
    action: 'newgov'
}, function (data) {
    $("#drpCurrentGOVBody").html(data);
}); 
```

我还附上了相关部分的图片。 ![在此处输入图像描述](../Images/42e22a47c72a83d95db80ea4b912b17d.png)

在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T01:00:10.073

您可能应该将使用 Ajax 发送的数据存储在一个变量中（循环外），一旦您运行循环检查数据是否等于正在发送的新数据，如果不是，您应该使用您的 Ajax 代码发送它，如果它等于跳过 Ajax 部分。此外，如果该变量尚未定义，您还应该使用 Ajax 将其发送到您的服务器，因为这可能是循环第一次运行。

希望这可以帮助，

# css - 样式加粗下划线 CSS

> ID：15058525
> 
> 赞同：0
> 
> 时间：2013-02-25T00:41:39.687
> 
> 标签：css, underline

我想为我的 h1 标签添加更粗的下划线，所以我使用了多个 Stack Overflow 问题中建议的“border-bottom”。然而，边框远远超出了文本，所以我决定添加显示属性“inline-block”以使边框符合文本的边界。但是，这使得元素在内容之后缺少换行符。我知道我总是可以添加“br”标签，但我更愿意将它保留在我的样式中。有什么我可以做的吗？这是我当前的 CSS：

```
h1
{
    font-weight:normal;
    margin-bottom:5px;
    border-bottom: 2px solid;
    display: inline-block;
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-25T01:19:27.523

试试`display: table`吧。它的作用类似于 inline-block ，因为它会向下折叠到其子元素的宽度，但会像普通块元素一样防止周围的内联元素沿着它的侧面流动。

[http://codepen.io/cimmanon/pen/FvGxl](http://codepen.io/cimmanon/pen/FvGxl)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-25T01:04:29.750

`<h1>`如果您的文本的宽度是固定的，您可以设置`width`并保留它`display: block;`。

**演示：** [[[[![jsFiddle](../Images/827f57786617d886d70c0bce0ccca6b6.png)](http://jsfiddle.net/ThinkingStiff/svspg/)]]]

### 输出：

> ![在此处输入图像描述](../Images/b95caf507436089564f787b742f8bce0.png)

### CSS：

```
h1 {
    border-bottom: 2px solid black;
    font-weight:normal;
    margin-bottom:5px;
    width: 140px;
} 
```

### HTML：

```
<h1>underlined</h1>
next line 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-06-20T11:16:20.740

由于您并不总是想要底部边框（例如，带有填充的导航项），因此此方法效果更好：

```
h1:after {
    content: '';
    height: 1px;
    background: black; 
    display:block;
} 
```

如果您希望文本和下划线之间有更多或更少的空间，请添加`margin-top`.

如果您想要更粗的下划线，请添加更多`height`：

```
h1:after {
    content: '';
    height: 2px;
    background: black; 
    display:block;
    margin-top: 2px;
} 
```

# android - 来自 android 上的 google maps api 的 mapfragment 是空白的

> ID：15058526
> 
> 赞同：0
> 
> 时间：2013-02-25T00:41:44.030
> 
> 标签：android, google-maps-api-2

我从 code.google.com 获得了一个 api 密钥并将其放入我的清单文件中。我在我的 res.layout 中实例化了一个 mapfragment，它只加载了一个空白屏幕，上面覆盖了 + 和 - 缩放按钮。这是我的清单

```
 <?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.myapp"
    android:versionCode="1"
    android:versionName="1.0" >
    <uses-permission android:name="android.permission.INTERNET"/>
    <uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE"/>
    <uses-permission android:name="com.google.android.providers.gsf.permission.READ_GSERVICES"/>
    <uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION"/>
    <uses-permission android:name="android.permission.ACCESS_FINE_LOCATION"/>
    <uses-feature
      android:glEsVersion="0x00020000"
      android:required="true"/>
    <permission
          android:name="com.myapp.permission.MAPS_RECEIVE"
          android:protectionLevel="signature"/>
    <uses-sdk
        android:minSdkVersion="15"
        android:targetSdkVersion="17" />

    <application
        android:allowBackup="true"
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@android:style/Theme.NoTitleBar">
        <activity
            android:name="com.myapp.MainActivity"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />
                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
        <meta-data
            android:name="com.google.android.maps.v2.API_KEY"
            android:value="my api key"/>
    </application>

</manifest>

and my layout.xml
    <fragment 
      android:id="@+id/map"
      android:layout_width="match_parent"
      android:layout_height="match_parent"
      class="com.google.android.gms.maps.MapFragment"/> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T01:31:17.123

确保您已设置，`Google Maps Android API v2`而不是`Google Maps API v2`在您的 API 控制台中。

这是了解更多信息的好指南： [http ://www.vogella.com/articles/AndroidGoogleMaps/article.html#maps_key](http://www.vogella.com/articles/AndroidGoogleMaps/article.html#maps_key)

# javascript - .animate 随机失败

> ID：15058527
> 
> 赞同：0
> 
> 时间：2013-02-25T00:41:57.990
> 
> 标签：javascript, jquery

我在制作动画时遇到了一些问题，它在我的 ipad 上随机停止

所以我有这个html

```
<body>

<div class="touchslider-prev  sliderButtons" style="display: block;">back</div>
<div class="touchslider-next  sliderButtons" style="display: block;">next</div>

<section id="mainContent" style="width: 950px; overflow:hidden">

    <div id="pageHolder" style="float: left; left: 0;  position: relative; width: 6000px;">

         <div class="pageSize activeSlide" id="page1" style="width: 950px; float: left;  position: relative; height:500px; background-color:#F00">

           blah

         </div>  

          <div class="pageSize " id="page" style="width: 950px;  float: left;  position: relative; height:500px; background-color:#FF0">

           blah 2

         </div>          

    </div>

</section>

</body> 
```

* * *

和这个 javascript

* * *

```
<script type="text/javascript">

function clickHandlerPrev(event) {

    // If event isn't already marked as handled, handle it
    if(event.handled !== true) {

        // Kill event handler, preventing any more clicks
        jQuery(window).off("swipeBackward", clickHandlerPrev);
    jQuery(window).off("swipeForward", clickHandlerNext);

        // Do your stuff here
        pageSize = jQuery(".mainHeader").width();
        slide("back", pageSize);

        // Mark event as handled
        event.handled = true;
    } 

    return false;
}

function clickHandlerNext(event) {

    // If event isn't already marked as handled, handle it

    if(event.handled !== true) {

        // Kill event handler, preventing any more clicks
        jQuery(window).off("swipeBackward", clickHandlerPrev);
    jQuery(window).off("swipeForward", clickHandlerNext);

        // Do your stuff here
        pageSize = jQuery(".mainHeader").width();
        slide("forward", pageSize);

        // Mark event as handled
        event.handled = true;
    }
    return false;
}

function slide(data, pageSize) {

    if (!pageSize) {
    pageSize = 950;
    }

    var left = calcLeft(data, pageSize);

        jQuery('#pageHolder').animate({
            left: left

          }, 400, function() {
            console.log("animation started");
            jQuery(window).on("swipeBackward", clickHandlerPrev);
    jQuery(window).on("swipeForward", clickHandlerNext);
            console.log("animation complete");

        });

}

function calcLeft(action, pageSize){

    var left;
    var currentPos = currentPosition();

    if (action == "back") {
console.log(pageSize);

        if (currentPos == "0") {
            left = -pageSize * 1;
        } else {

            left = currentPos + pageSize ;

        }

    } else if (action == "forward") {

        if (currentPos == -pageSize * 1) {
            left = 0;
        } else {        
            left = currentPos - pageSize ;

        }

    }

    return left;

}

function currentPosition() {

    var currentPosition = parseInt(jQuery("#pageHolder").css("left"), 10);
    return currentPosition;
}

jQuery(document).ready(function () {

jQuery(".touchslider-prev").click( function() { 

    jQuery(window).trigger('swipeForward');

});

jQuery(".touchslider-next").click( function() { 

    jQuery(window).trigger('swipeBackward');

});

jQuery(window).on('swipeForward', clickHandlerNext );
jQuery(window).on('swipeBackward', clickHandlerPrev );

console.log("here");
var maxTime = 1000,
    // allow movement if < 1000 ms (1 sec)
    maxDistance = 50,
    // swipe movement of 50 pixels triggers the swipe
    target = jQuery('.pageSize'),
    startX = 0,
    startTime = 0,
    touch = "ontouchend" in document,
    startEvent = (touch) ? 'touchstart' : 'mousedown',
    moveEvent = (touch) ? 'touchmove' : 'mousemove',
    endEvent = (touch) ? 'touchend' : 'mouseup';

target.bind(startEvent, function(e) {
    // prevent image drag (Firefox)
    // e.preventDefault();
    startTime = e.timeStamp;
    startX = e.originalEvent.touches ? e.originalEvent.touches[0].pageX : e.pageX;
}).bind(endEvent, function(e) {
    startTime = 0;
    startX = 0;
}).bind(moveEvent, function(e) {
    // e.preventDefault();
    var currentX = e.originalEvent.touches ? e.originalEvent.touches[0].pageX : e.pageX,
        currentDistance = (startX === 0) ? 0 : Math.abs(currentX - startX),
        // allow if movement < 1 sec
        currentTime = e.timeStamp;
    if (startTime !== 0 && currentTime - startTime < maxTime && currentDistance > maxDistance) {
        if (currentX < startX) {
            // swipe left code here

           console.log("page forward trigger");
           jQuery(window).trigger('swipeForward');

        }
        if (currentX > startX) {
            // swipe right code here
             console.log("page back trigger");
           //slide("back", pageSize);
            jQuery(window).trigger('swipeBackward');
        }
        startTime = 0;
        startX = 0;
    }
});

});

</script> 
```

* * *

如果您在 ipad 上打开它，那么您可以滑动主颜色面板。这有时会起作用，有时不会，我真的很难找出原因

谁能帮忙？

幻灯片会定期停止，但如果用户只是使用后退/下一个按钮，它总是可以工作的，幻灯片代码似乎没有问题，尽管它只是触发了一个事件？

我把代码放在这里

[http://demo.stg.brightonconsulting.net.au/templates/tests/ipadSlider/](http://demo.stg.brightonconsulting.net.au/templates/tests/ipadSlider/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T01:36:15.283

在我看来，您似乎为 swipeForward 和 swipeBackward 安装了事件处理程序，但随后您只卸载了触发的事件处理程序。下一次，您再次安装这两个事件处理程序，因此其中一些会堆积起来并安装不止一次，当一个安装不止一次的触发时，这肯定会弄乱您的动画。如果您要在其中一个触发时卸载，那么您需要同时卸载两个，而不仅仅是触发的那个。点击处理程序也有同样的问题。

此外，在 中`calcLeft()`，该变量`left`应声明为局部变量。另外，什么`jQuery.when(promise)`时候`promise`是整数？您应该将延迟对象传递给`jQuery.when()`.

# oracle - 将数字分配给绑定变量 pl/sql

> ID：15058529
> 
> 赞同：0
> 
> 时间：2013-02-25T00:42:07.213
> 
> 标签：oracle, plsql, plsqldeveloper

我正在尝试为 pl/sql 分配的绑定变量分配一个数字值，它给了我错误：

```
Error report:  
ORA-01403: no data found
ORA-06512: at line 15
01403\. 00000 -  "no data found"
Cause: 
Action:
b_emp_id
------
b_emp_id 
```

和代码

```
VARIABLE b_emp_id NUMBER

DECLARE

v_emp_id employees.employee_id%TYPE;
v_FIRST_NAME employees.first_name%TYPE;
v_LAST_NAME employees.last_name%TYPE;
v_JOB_ID employees.job_id%TYPE;
v_HIRE_DATE employees.hire_date%TYPE;
v_message VARCHAR2(30);
v_difference NUMBER(3);

BEGIN

:b_emp_id:=110;

 SELECT EMPLOYEE_ID, FIRST_NAME, LAST_NAME, job_id, HIRE_DATE 
 INTO v_emp_id, v_FIRST_NAME, v_LAST_NAME, v_JOB_ID, v_HIRE_DATE
 FROM employees
 WHERE EMPLOYEE_ID = :b_emp_id; 
```

谢谢大家！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T00:51:29.863

“ORA-01403: no data found”意味着您的 SELECT 没有返回任何行。表中很可能不存在 EMPLOYEE_ID 110。尝试这个：

```
SELECT COUNT(*) FROM Employees WHERE Employee_ID = 110; 
```

它可能会返回零。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T04:54:02.323

您的绑定变量可能未正确分配值。试试下面的代码： -

```
VARIABLE b_emp_id NUMBER;
EXEC :b_emp_id := 110;

DECLARE

v_emp_id employees.employee_id%TYPE;
v_FIRST_NAME employees.first_name%TYPE;
v_LAST_NAME employees.last_name%TYPE;
v_JOB_ID employees.job_id%TYPE;
v_HIRE_DATE employees.hire_date%TYPE;
v_message VARCHAR2(30);
v_difference NUMBER(3);

BEGIN

 SELECT EMPLOYEE_ID, FIRST_NAME, LAST_NAME, job_id, HIRE_DATE 
 INTO v_emp_id, v_FIRST_NAME, v_LAST_NAME, v_JOB_ID, v_HIRE_DATE
 FROM employees
 WHERE EMPLOYEE_ID = :b_emp_id;
END;
/

print b_emp_id 
```

在 sqlplus 中尝试上述方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-25T10:19:50.980

这似乎是 SQL Developer 的一个问题，我在[最近的回答](https://stackoverflow.com/a/14768948/266304)中注意到了这一点。您拥有的代码将在 SQL*Plus 中运行。这也说明了问题：

```
variable b_emp_id number
set serveroutput on
begin
    :b_emp_id := 110;
    if :b_emp_id is null then
        dbms_output.put_line('b_emp_id is null');
    else
        dbms_output.put_line('b_emp_id is not null: ' || :b_emp_id);
    end if;
end;
/
print b_emp_id;

anonymous block completed
b_emp_id is null

B_EMP_ID
---
110 
```

在 SQL*Plus 中给出：

```
b_emp_id is not null: 110

PL/SQL procedure successfully completed.

B_EMP_ID
---
110 
```

……正如你所料。这个`select 110 into :b_emp_id from dual`技巧在这里也不起作用。无论哪种方式，分配给绑定变量的值在块内均不可用，但在外部可见，这很奇怪。我认为这是一个 SQL Developer 错误，尽管我猜它可能只是未定义的行为。

似乎您唯一的选择是使用单独的`exec`块，因为当您击中实际块时，其中设置的绑定值在范围内（如 Max 建议的那样）；或改用替换变量；或使用局部变量（在`declare`块中）而不是外部声明的`variable`- 取决于您为什么要这样做并首先使用显式绑定变量。

# ios - 有没有办法阻止 GLKView 在调用 drawRect: 之前清除上下文？

> ID：15058532
> 
> 赞同：0
> 
> 时间：2013-02-25T00:42:38.953
> 
> 标签：ios, opengl-es-2.0, glkit

我想在我的画布上添加内容，而不清除和重绘我之前绘制的内容。那可能吗？现在我每次`drawRect:`被调用时都会重新绘制所有内容，这会让事情变得迟缓。

编辑： `clearsContextBeforeDrawing`似乎不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T06:04:39.707

OpenGL 非常灵活。我不知道 drawRect: 方法是什么，即使您不必每次都调用此方法。可能 NStimer 或 CADisplayLink 调用了 drawRect 方法，也调用了 drawRect 中的 GLClear()。所以你可以以任何形式改变它。

# jquery - 试图理解 wrapall()

> ID：15058537
> 
> 赞同：0
> 
> 时间：2013-02-25T00:43:42.940
> 
> 标签：jquery, wrapall

我已经阅读了 wrapall() ，我认为这可能是我需要的解决方案。给出这个结构：

```
<ul>
<li></li>
<li></li>
<li></li>
<li></li>
</ul> 
```

我想以这种结构结束：

```
<ul>
<div class="class1">
<li></li>
<li></li>
</div>
<div class="class2">
<li></li>
<li></li>
</div>
</ul> 
```

我一点也不知道如何做到这一点。我读过一些 wrapall 的例子，但没有一个我可以以这种方式适应

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T00:54:53.037

我建议：

```
$('ul li').slice(0,2).wrapAll('<ul></ul>').closest('ul').wrap('<li />'); 
```

结果是：

```
<ul>
    <li>
        <ul>
             <li>1</li>
             <li>2</li>
         </ul>
     </li>    
    <li>3</li>
    <li>4</li>
</ul> 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/7qrdp/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T01:04:20.703

```
var a = $('li');
do { $(a.slice(0,2)).wrapAll('<li class="two"><ul></ul></li>'); }
while( (a = a.slice(2) ).length>0 ); 
```

这导致：

```
<ul>
    <li class="two">
       <ul>
          <li>a1</li>
          <li>a2</li>
       </ul>
    </li>
    <li class="two">
       <ul>
         <li>b1</li>
         <li>b2</li>
       </ul>
    </li>
</ul> 
```

# c# - OnDataBind 仅在第一次回发时触发

> ID：15058541
> 
> 赞同：0
> 
> 时间：2013-02-25T00:44:13.827
> 
> 标签：c#, asp.net, data-binding, updatepanel, repeater

我没有 if(!isPostBack) 语句。

后面的 CS 代码：

```
 private void TestPlacesApi()
    {
        GeoRequest request = new GeoRequest("LU7 0JX");

        GeoResponse response = request.GetResponse();

        if (response.Status == GeoStatus.ZERO_RESULTS) return;
        GeoLocation location = response.Results[0].Geometry.Location;
        double latitude = location.Latitude;
        double longitude = location.Longitude;

        var placesWebReq = new GPlacesWebRequest
        {
            Latitude = latitude.ToString(),
            Longitide = longitude.ToString(),
            Radius = "7500",
            Types = "restaurant",
            Sensor = "false"
        };
        var url = placesWebReq.GetWebUrlString();
        HttpWebRequest webRequest = WebRequest.Create(@url) as HttpWebRequest;
        webRequest.Timeout = 20000;
        webRequest.Method = "GET";

        webRequest.BeginGetResponse(new AsyncCallback(RequestCompleted), webRequest);
    }

    private void RequestCompleted(IAsyncResult result)
    {
        var request = (HttpWebRequest)result.AsyncState;
        var response = (HttpWebResponse)request.EndGetResponse(result);
        var s = response.GetResponseStream();
        RootObjectPlaces place;
        using (var stream = response.GetResponseStream())
        {
            var r = new StreamReader(stream);
            var resp = r.ReadToEnd();
            place = new RootObjectPlaces();
            JsonConvert.PopulateObject(resp, place);
        }
        List<GLocatedRestaurant> restaurantList = new List<GLocatedRestaurant>();
        foreach (var theplace in place.Results)
        {
            restaurantList.Add(new GLocatedRestaurant
            {
                Icon = theplace.Icon,
                Name = theplace.Name,
                Opening_hours = theplace.Opening_hours,
                Photos = theplace.Photos,
                Price_level = theplace.Price_level,
                Types = theplace.Types,
                Vicinity = theplace.Vicinity,
                Rating = theplace.Rating,
               // Address = Util.GetAddressFromGeometry(theplace.Geometry.Location)
            }
            );

        }   
      this.RestaurantRepeater.DataSource = restaurantList;
           RestaurantRepeater.DataBind();
            //UpdatePanel1.UpdateMode = UpdatePanelUpdateMode.Conditional;
            //UpdatePanel1.Update();

    }

    protected void onDataBind(object sender, RepeaterItemEventArgs e)
    {
        Util.trace("HAHAHA");

    } 
```

和aspx：

```
 <asp:UpdatePanel ID="UpdatePanel1" runat="server">
                <ContentTemplate>
      <asp:Repeater ID="RestaurantRepeater" OnItemDataBound="onDataBind"  runat="server">
        <ItemTemplate>

    <div runat="server" id="restaurantsList">
                <div class="restaurantListing" id='restaurantListing'>

                    <img class='restaurantImage' src='<%# DataBinder.Eval(Container.DataItem, "Icon")%>' />

                    <div class="restaurantRightInfo" id='restaurantRightInfo'>
                        <%# DataBinder.Eval(Container.DataItem, "Address")%><br />

                    </div>
                    <div class="ratingInfo" id='ratingInfo'>
                        <%# DataBinder.Eval(Container.DataItem, "Name")%><br />
                         <%# DataBinder.Eval(Container.DataItem, "Opening_hours")%><br />
                         <%# DataBinder.Eval(Container.DataItem, "Rating")%><br />
                         <%# DataBinder.Eval(Container.DataItem, "Vicinity")%><br />

                    </div>
                </div>
            </div>
        </ItemTemplate>
    </asp:Repeater>
                      </ContentTemplate>
            </asp:UpdatePanel> 
```

我不确定它是关于第一次回发，还是因为第一次加载页面需要更长的时间。

requestCompleted 函数在回发发生后一段时间被调用，这就是我有一个更新面板的原因。我以为我有更新面板工作，但现在它只在第一次工作。以防您想知道我确实尝试取消注释 updatepanel.update() 代码，但同样会发生。我在 OnDataBind 中设置了一个断点，它只在第一次触发。它不会在任何其他时间触发。

我无法在页面加载时绑定 DAT，因为该列表尚未填充。

# c++ - 将函数绑定到类型的更好语法？

> ID：15058543
> 
> 赞同：2
> 
> 时间：2013-02-25T00:44:27.743
> 
> 标签：c++, templates, c++11

我正在尝试将函数绑定到类型中-考虑以下测试程序：

```
#include <utility>

template <class Ret, class Arg>
struct func {
    typedef Ret (&ref)(Arg);
    template <ref Fn>
    struct bind {
        template <class NewArg>
        Ret operator()(NewArg&& arg) {
            return Fn(std::forward<Arg>(arg));
        }
    };
};

int foo(int i) {
    return i;
}

typedef func<int, int>::bind<foo> Foo;

int main(int argc, char** argv) {
    Foo foo_obj;
    return foo_obj(argc);
} 
```

这行得通，但我个人觉得`func<int, int>::bind<foo>`丑陋，而且它也是多余的 - 但我似乎无法`func::bind<foo>`从模板参数中推断出 Ret 和 Arg 来绑定（或道德等价的 therof）。我会做这样的事情：

```
template <class Ret, class Arg>
constexpr auto bind_func(typename func<Ret, Arg>::ref f) -> typename func<Ret, Arg>::bind<f> {
    return {};
} 
```

但是，由于 f 不能保证是常量表达式，因此无法编译，因为编译器无法知道 f 是有效的模板参数。

有没有办法在没有持续冗余的情况下做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T01:00:11.040

如果您可以接受宏，这是一个可能的解决方案：

```
#include <utility>

template <class Ret, class Arg>
struct func {
    typedef Ret (&ref)(Arg);
    template <ref Fn>
    struct bind {
        template <class NewArg>
        Ret operator()(NewArg&& arg) {
            return Fn(std::forward<Arg>(arg));
        }
    };
};

template<typename T>
struct traits { };

template<typename R, typename A>
struct traits<R(A)>
{
    typedef R return_type;
    typedef A arg_type;
};

int foo(int i) {
    return i;
}

#define TYPE_WRAP(f) \
    func< \
        traits<decltype(f)>::return_type, \
        traits<decltype(f)>::arg_type \
        >::bind<f>

int main(int argc, char** argv) {
    TYPE_WRAP(foo) foo_obj;
    return foo_obj(argc);
} 
```

# google-api - GAPI - 同一requestReportData的不同结果取决于本地主机或服务器？

> ID：15058545
> 
> 赞同：0
> 
> 时间：2013-02-25T00:44:58.120
> 
> 标签：google-api, analytics

我在本地主机和服务器上有完全相同的文件，但我从 requestReportData 得到不同的结果，本地主机返回 49 条记录，在服务器上我只得到 17 条记录。那怎么可能？

```
$ga->requestReportData(55443322, array('customVarValue5', 'customVarValue1', 'pagePath', 'networkLocation', 'keyword'), array('timeOnPage'), array('customVarValue5', 'customVarValue1'), null, null, null, 1, 300); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T13:19:01.250

我知道这可能不是一个答案，但它必须是某种错误，现在，一天后在同一台计算机上使用相同的代码，我得到相同数量的记录（79）返回。

# spring - Spring Security 和多部分请求

> ID：15058548
> 
> 赞同：23
> 
> 时间：2013-02-25T00:45:09.197
> 
> 标签：spring, file-upload, spring-security, oauth-2.0

我有一个受 Spring Security 和 OAuth2 保护的 @Controller，我试图让我的用户上传文件：

```
@Controller
@RequestMapping(value = "/api/image")
public class ImageController {

    @PreAuthorize("hasAuthority('ROLE_USER')")
    @RequestMapping(value = "/upload", method = RequestMethod.PUT)
    public @ResponseBody Account putImage(@RequestParam("title") String title, MultipartHttpServletRequest request, Principal principal){
        // Some type of file processing...
        System.out.println("-------------------------------------------");
        System.out.println("Test upload: " + title);
        System.out.println("Test upload: " + request.getFile("file").getOriginalFilename());
        System.out.println("-------------------------------------------");

        return ((Account) ((OAuth2Authentication) principal).getPrincipal());
    }
} 
```

当我尝试上传文件和标题时，出现以下异常。我将 Content-Type 标头设置为 multipart/form-data。

```
java.lang.IllegalStateException: Current request is not of type [org.springframework.web.multipart.MultipartHttpServletRequest]: SecurityContextHolderAwareRequestWrapper[ FirewalledRequest[ org.apache.catalina.connector.RequestFacade@1aee75b7]]
    at org.springframework.web.servlet.mvc.method.annotation.ServletRequestMethodArgumentResolver.resolveArgument(ServletRequestMethodArgumentResolver.java:84)
    at org.springframework.web.method.support.HandlerMethodArgumentResolverComposite.resolveArgument(HandlerMethodArgumentResolverComposite.java:75)
    at org.springframework.web.method.support.InvocableHandlerMethod.getMethodArgumentValues(InvocableHandlerMethod.java:156)
    at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:117) 
```

如何在 Spring Security 后面进行文件上传？似乎请求永远不会变成 M​​ultiPartHttpServerRequest ，所以它不起作用？

如果我将我的方法签名更改为采用@RequestParam MultipartFile，那么我会收到如下异常：

```
DEBUG DefaultListableBeanFactory - Returning cached instance of singleton bean 'imageController'
DEBUG ExceptionHandlerExceptionResolver - Resolving exception from handler [public com.tinsel.server.model.Account com.tinsel.server.controller.ImageController.putImage(java.lang.String,org.springframework.web.multipart.MultipartFile,java.security.Principal)]: java.lang.IllegalArgumentException: Expected MultipartHttpServletRequest: is a MultipartResolver configured?
DEBUG ResponseStatusExceptionResolver - Resolving exception from handler [public com.tinsel.server.model.Account com.tinsel.server.controller.ImageController.putImage(java.lang.String,org.springframework.web.multipart.MultipartFile,java.security.Principal)]: java.lang.IllegalArgumentException: Expected MultipartHttpServletRequest: is a MultipartResolver configured?
DEBUG DefaultHandlerExceptionResolver - Resolving exception from handler [public com.tinsel.server.model.Account com.tinsel.server.controller.ImageController.putImage(java.lang.String,org.springframework.web.multipart.MultipartFile,java.security.Principal)]: java.lang.IllegalArgumentException: Expected MultipartHttpServletRequest: is a MultipartResolver configured?
DEBUG DispatcherServlet - Could not complete request
java.lang.IllegalArgumentException: Expected MultipartHttpServletRequest: is a MultipartResolver configured?
    at org.springframework.util.Assert.notNull(Assert.java:112) 
```

...但我确实在我的 XML 中配置了 MultipartResolver：

```
<bean id="multipartResolver" class="org.springframework.web.multipart.commons.CommonsMultipartResolver">
    <property name="maxUploadSize" value="268435456"/> <!-- 256 megs -->
</bean> 
```

我确实看到[了这篇关于在 Spring 3.0 下让它工作的博客文章](http://www.adamweigold.com/2012/01/using-multpartrequestresolvers-with.html)——但我正在努力保持最新状态，目前正在使用 3.1。是否有更新的修复？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-02-25T20:02:01.100

问题是我使用的是 PUT 而不是 POST。Commons FileUpload 被硬编码为只接受文件的 POST 请求。

检查那里的[isMultipartContent 方法](http://grepcode.com/file/repo1.maven.org/maven2/commons-fileupload/commons-fileupload/1.2.1/org/apache/commons/fileupload/servlet/ServletFileUpload.java)。要解决此问题，请使用 POST 或扩展该类并覆盖该方法以按照您的喜好工作。

我为此问题打开[了 FILEUPLOAD-214 。](https://issues.apache.org/jira/browse/FILEUPLOAD-214)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-07-06T19:50:36.917

为了解决这个问题，不要使用spring MultiPartHttpServerRequest，而是将请求作为HttpServletRequest，使用apache commons fileupload库解析来自PUT方法的请求，并处理文件。以下是一些示例代码：

```
ServletFileUpload fileUpload = new ServletFileUpload(new DiskFileItemFactory());
List<FileItem> fileItems = fileUpload.parseRequest(httpServletRequest);
InputStream in = fileItems.get(0).getInputStream();
... 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-07-21T18:53:09.460

在 Config.groovy

确保启用多部分，

```
// whether to disable processing of multi part requests
   grails.web.disable.multipart=false 
```

在控制器中添加 Post 方法

```
def upload(){
    MultipartHttpServletRequest mpr = (MultipartHttpServletRequest)request;
    if(request instanceof MultipartHttpServletRequest)
            {
                CommonsMultipartFile f = (CommonsMultipartFile) mpr.getFile("myFile");
                println f.contentType
                f.transferTo()
                if(!f.empty)
                    flash.message = 'success'
                else
                    flash.message = 'file cannot be empty'
            }
    else
    flash.message = 'request is not of type MultipartHttpServletRequest'} 
```

有了这些，我就可以上传文件了，没有什么与 Spring Security 相关的。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-02-26T19:46:53.927

您可以查看[https://github.com/joshlong/the-spring-tutorial](https://github.com/joshlong/the-spring-tutorial)，其中有一个示例演示如何在启用 Spring Security OAuth 的情况下发布到 Spring MVC。我什至使用 HTML5 拖放将图像拖到屏幕上，然后通过 ajax 将其提交到服务器。

# javascript - Javascript 类未按预期确定范围

> ID：15058552
> 
> 赞同：2
> 
> 时间：2013-02-25T00:45:25.607
> 
> 标签：javascript

希望有人能指出我正确的方向。

我对 OOP 并不陌生，但我不熟悉它在 Javascript 中的工作方式。我理解 js 中的类是对象的概念。

我正在编写一个脚本，它将编写一些 html 并允许用户添加或删除一些元素。一切正常，除了当您单击任何实例的“添加复选框”时，html 在最后一个实例中更新，而不是它本身（这让我相信存在某种范围界定或封装失败）。

我已经简化了问题并发布了一个小提琴，单击“颜色”实例的“添加复选框”，您会看到 html 被添加到“动物”组中。注意我在第 25 行的 js 评论。

[http://jsfiddle.net/XrJ3D/](http://jsfiddle.net/XrJ3D/)

```
var CheckboxGroup = function(label){
  return this.init(label);
}
CheckboxGroup.prototype = {
  type: "checkbox",
  label: null,      
  description: null,
  $label: null,              
  init: function(label){
    if(!label) label = "Checkboxes";
    self = this;         
    this.$wrap = $("<div class='checkBoxGroup'></div>");
    this.$label = $("<div>"+label+"</div>").appendTo(this.$wrap);
    this.$options = $("<div></div>").appendTo(this.$wrap); 
    this.$add = $("<div class='n'>Add Checkbox</div>").appendTo(this.$wrap);

    this.$add.click(function(){          
      self.addOption("New Option");
    });

    this.options = [];       
    return this;          
  },
  addOption: function(label){
    $option = $("<div class='c'><input type='checkbox' name='"+label+"'><span class='l'>"+label+"</span></div>").appendTo(this.$options);

    $remove = $("<span class='rm'>x</span>").appendTo($option);        
    $remove.click(function(){
      var r=confirm("Remove Option?");
      if (r==false) return;                    
      $(this).parents('.c').remove();
    });
    this.options.push($option);
    return $option;
  },
  get: function(){
    return this.$wrap;
  }
}

// === CREATE SOME INSTANCES ===

a = new CheckboxGroup("Colors");
a.addOption('red');
a.addOption('green');
a.addOption('blue');    

$('body').append(a.get());

b = new CheckboxGroup("Animals");
b.addOption('dog');
b.addOption('cat');

$('body').append(b.get()); 
```

感谢您的任何见解。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-25T00:48:34.080

您的`self`变量是全局变量，将被最后初始化的对象覆盖：

```
self = this; 
```

在它之前添加`var`以使其成为您的`init`函数的本地：

```
var self = this; 
```

**演示：http: [//jsfiddle.net/XrJ3D/5/](http://jsfiddle.net/XrJ3D/5/)**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T01:05:04.100

除了 Blender 明显正确的答案外，您可能还需要解决其他几件事：

*   `init 函数的第一行可能应该是

    `this.label = label || "Checkboxes";`

*   您的构造函数或函数无需`init`返回任何内容。实际上，在构造函数之外这样做有点浪费。

# debugging - 退出显示图像 OpenCV 时堆损坏

> ID：15058558
> 
> 赞同：1
> 
> 时间：2013-02-25T00:47:29.743
> 
> 标签：debugging, opencv

我正在根据本教程进行一些 iamge 数学运算

[http://docs.opencv.org/doc/tutorials/features2d/feature_homography/feature_homography.html](http://docs.opencv.org/doc/tutorials/features2d/feature_homography/feature_homography.html)

它单独运行良好，但是当我将它放入一个函数并从主函数调用它时，会出现堆损坏。该程序显示图像，然后当我按空格关闭程序时，它会中断。

```
int main(int argc, char ** argv)
{

    // Part 2 panorama
    Mat im1=imread("panorama_image1.jpg", CV_LOAD_IMAGE_GRAYSCALE);
    Mat im2=imread("panorama_image2.jpg", CV_LOAD_IMAGE_GRAYSCALE);

    immosaic(im1,im2);

    return 0;
} 
```

这是从教程中复制的马赛克功能

```
void immosaic(Mat im_object, Mat im_scene)
{
    //-- Step 1: Detect the keypoints using SURF Detector
    int minHessian = 400;
    SurfFeatureDetector detector( minHessian );
    std::vector<KeyPoint> keypoints_object, keypoints_scene;

    detector.detect( im_object, keypoints_object );
    detector.detect( im_scene, keypoints_scene );

    //-- Step 2: Calculate descriptors (feature vectors)
    SurfDescriptorExtractor extractor;
    Mat descriptors_object, descriptors_scene;
    extractor.compute( im_object, keypoints_object, descriptors_object );
    extractor.compute( im_scene, keypoints_scene, descriptors_scene );

    //-- Step 3: Matching descriptor vectors using FLANN matcher
    FlannBasedMatcher matcher;
    std::vector< DMatch > matches;
    matcher.match( descriptors_object, descriptors_scene, matches );

    double max_dist = 0; double min_dist = 100;

    //-- Quick calculation of max and min distances between keypoints
    for( int i = 0; i < descriptors_object.rows; i++ )
    {
        double dist = matches[i].distance;
        if( dist < min_dist ) min_dist = dist;
        if( dist > max_dist ) max_dist = dist;
    }

    //-- Draw only "good" matches (i.e. whose distance is less than 3*min_dist )
    std::vector< DMatch > good_matches;

    for( int i = 0; i < descriptors_object.rows; i++ )
    {
        if( matches[i].distance < 3*min_dist )
            good_matches.push_back( matches[i]);
    }

    Mat img_matches;
  drawMatches( im_object, keypoints_object, im_scene, keypoints_scene,
               good_matches, img_matches, Scalar::all(-1), Scalar::all(-1),
               vector<char>(), DrawMatchesFlags::NOT_DRAW_SINGLE_POINTS );

  //-- Localize the object
  std::vector<Point2f> obj;
  std::vector<Point2f> scene;

  for( int i = 0; i < good_matches.size(); i++ )
  {
    //-- Get the keypoints from the good matches
    obj.push_back( keypoints_object[ good_matches[i].queryIdx ].pt );
    scene.push_back( keypoints_scene[ good_matches[i].trainIdx ].pt );
  }

  Mat H = findHomography( obj, scene, CV_RANSAC );

  //-- Get the corners from the image_1 ( the object to be "detected" )
  std::vector<Point2f> obj_corners(4);
  obj_corners[0] = cvPoint(0,0); obj_corners[1] = cvPoint( im_object.cols, 0 );
  obj_corners[2] = cvPoint( im_object.cols, im_object.rows ); obj_corners[3] = cvPoint( 0, im_object.rows );
  std::vector<Point2f> scene_corners(4);

  perspectiveTransform( obj_corners, scene_corners, H);

  //-- Draw lines between the corners (the mapped object in the scene - image_2 )
  line( img_matches, scene_corners[0] + Point2f( im_object.cols, 0), scene_corners[1] + Point2f( im_object.cols, 0), Scalar(0, 255, 0), 4 );
  line( img_matches, scene_corners[1] + Point2f( im_object.cols, 0), scene_corners[2] + Point2f( im_object.cols, 0), Scalar( 0, 255, 0), 4 );
  line( img_matches, scene_corners[2] + Point2f( im_object.cols, 0), scene_corners[3] + Point2f( im_object.cols, 0), Scalar( 0, 255, 0), 4 );
  line( img_matches, scene_corners[3] + Point2f( im_object.cols, 0), scene_corners[0] + Point2f( im_object.cols, 0), Scalar( 0, 255, 0), 4 );

  //-- Show detected matches
  namedWindow("Matching");
  imshow( "Matching", img_matches );

  waitKey(0);
  //return 0;

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-25T14:09:56.410

我尝试了相同的教程并遇到了同样的问题，并尝试了网络上的所有方法，但没有运气。刚才我终于修好了。导致损坏的不是退出显示，而是从函数返回。换句话说，这些dll中的块结束后的清理过程存在一些问题。

> 就我而言，问题是加载调试 dll 和发布 dll 的混合。

您可以通过仔细查看那些加载信息来查看是否有相同的问题。要解决这个问题，请将 property->linker->Input->Additional Dependencies 更改为 ONLY Debug 或 Release。清理并再次构建。运气好的话，你不会再看到问题了。

希望能帮助到你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T19:17:29.330

我也遇到过这个问题。我的问题是我正在运行 Visual Studio 2012，但使用的是为 Visual Studio 2010 构建的 openCV(2.4.3) 附带的 lib 文件。

如果这是您的情况，您有 2 个选择

1.  在 VS 2012 中重建 OpenCV 库（这可能不是最简单的事情）。
2.  在 Visual Studio 中更改您的平台工具集。转到**项目属性->配置属性->常规->平台工具集**并将其更改为**“Visual Studio 2010 (v100)”**

# javascript - 延迟后提交隐藏表单，或在点击链接后立即提交

> ID：15058562
> 
> 赞同：1
> 
> 时间：2013-02-25T00:47:57.487
> 
> 标签：javascript, progressive-enhancement

我的应用程序的会话管理会将用户重定向到一个页面，用户被告知他们的会话已超时，请`<a href="path/to/page.html" id="manual_link">sign in</a>`.

我正在尝试对以下行为进行编程：

1.  如果 JavaScript*关闭*（或不可用），用户必须单击“登录”链接（POHTML；没问题）。
2.  如果 JavaScript 正在*运行*：

    一个）。逐步增强链接以提交带有“security_redirect” ( `document.getElementById('manual_link').onclick = "javascript:submit_security_redirect(); return false;";`) id 的隐藏表单

    b) 如果用户没有先点击链接，则延迟 4 秒后自动提交表单（假设`remaining_time`为 4000）：

    ```
     setTimeout(function () {
            submit_security_redirect();
        }, remaining_time); 
    ```

四秒延迟然后提交正在发生，但如果用户不想等待四秒，我似乎无法拦截链接。换句话说，如果用户在一秒钟后点击链接......直到四秒钟结束后才会发生任何事情。

我怀疑我需要在链接单击时终止 setTimeout，但不知道如何（我对[clearTimeout](https://developer.mozilla.org/en-US/docs/DOM/window.setTimeout#Example)的摸索尝试非常令人失望，我什至没有将它们包含在[示例 JSFiddle 中](http://jsfiddle.net/jhfrench/7R73f/)）。和/或我需要防止`a`的默认行为（尽管我认为`return false`将其排除在外）。

**需要哪些修改才能实现所需的功能？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T01:13:28.800

您不能以与在 HTML 中`onclick`设置属性相同的方式进行设置`onclick`——您需要将其设置为函数，例如：

```
document.getElementById('manual_link').onclick = function() {
    submit_security_redirect(); return false;
}; 
```

通过 Javascript 添加事件处理程序时，调用`addEventListener`实际上比设置更好`onclick`，但不幸的是在 IE 8 及以下版本中不起作用，这也是 jQuery 等跨平台库非常适合事件处理的原因之一。

顺便说一句，arguments.callee 已弃用（请参阅[Arguments.callee 已弃用 - 应该改用什么？](https://stackoverflow.com/questions/8361642/arguments-callee-is-deprecated-what-should-be-used-instead)）。

# eclipse - 在不使用内部类的情况下创建自定义 CDT 重构

> ID：15058563
> 
> 赞同：2
> 
> 时间：2013-02-25T00:48:00.770
> 
> 标签：eclipse, eclipse-plugin, eclipse-cdt, automated-refactoring

我正在尝试使用 Eclipse Indigo 和 CDT 8.0.2 编写自定义 C++ 重构。CDT 提供了一个类 ，`CRefactoring2`它获取 AST 并提供挂钩。但是这个类在一个内部包中，所以我认为它会在未来的 Eclipse 版本中发生变化，并且我不应该对它进行子类化。

是否有一个外部 API（在 CDT 内；我不想从头开始编写所有获取 AST 的代码）我可以用来获取 AST 并声明我自己的 Eclipse CDT 重构？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-19T14:09:45.153

感谢 Jeff 分享您获取 AST 的方法。我查看了我的代码，我有另一种获取 AST 的方法，但它也使用公共 API。我也想发布该方法：

```
// Assume there is a variable, 'file', of type IFile
ICProject cProject = CoreModel.getDefault().create(file.getProject() );
ITranslationUnit unit = CoreModelUtil.findTranslationUnit(file);
if (unit == null) {
    unit = CoreModel.getDefault().createTranslationUnitFrom(cProject, file.getLocation() );
}
IASTTranslationUnit ast = null;
IIndex index = null;
try {
    index = CCorePlugin.getIndexManager().getIndex(cProject);
} catch (CoreException e) {
    ...
}

try {
    index.acquireReadLock();
    ast = unit.getAST(index, ITranslationUnit.AST_PARSE_INACTIVE_CODE);
    if (ast == null) {
        throw new IllegalArgumentException(file.getLocation().toPortableString() + ": not a valid C/C++ code file");
    }
} catch (InterruptedException e) {
    ...
} catch (CoreException e) {
    ...
} finally {
    index.releaseReadLock();
} 
```

我的参与度更高一些；我基本上一直在改变事情，直到东西开始 100% 地持续工作。我没有更多的补充你所说的关于实际重构的内容。

编辑：澄清一下：这是迄今为止我获得翻译单元的最安全的方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-17T04:28:58.867

有关访问和操作 AST 的信息，请参见[此处](http://www.eclipse.org/articles/article.php?file=Article-JavaCodeManipulation_AST/index.html)（请注意，此代码是为 Java 编写的。ASTVisitor 基类的 CDT 版本位于`org.eclipse.cdt.core.dom.ast.ASTVisitor`）。

我们最终编写的用于从文件访问 C++ AST 的代码基本上是这样的：

```
import org.eclipse.cdt.core.model.CoreModel;
import org.eclipse.core.resources.IFile;
import org.eclipse.cdt.core.model.ITranslationUnit;
import org.eclipse.cdt.core.dom.ast.IASTTranslationUnit;

private IASTTranslationUnit getASTFromFile(IFile file) {
    ITranslationUnit tu = (ITranslationUnit) CoreModel.getDefault().create(file);
    return tu.getAST();
} 
```

至于定义和注册一个新的重构，你会想看看[这篇文章](http://www.eclipse.org/articles/article.php?file=Article-Unleashing-the-Power-of-Refactoring/index.html)。

# sql - sql server中列数据类型的正确设置

> ID：15058567
> 
> 赞同：0
> 
> 时间：2013-02-25T00:48:17.050
> 
> 标签：sql, sql-server, sqldatatypes

我知道这是一个菜鸟问题，我在谷歌上找不到任何答案，但我希望这里的专家在 sql 中在设置列的数据类型方面的意见和建议。

如果我将所有列都设置为 varchar 可以吗？甚至列的值是日期和数字？如果我使用 Date 和 Varchar 有什么区别吗？

我将非常感谢所有的答案，谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T01:18:52.990

最佳实践始终是一个很好的起点。另一个需要考虑的重要问题是“这个数据库是干什么用的”？如果是用于存储日期，为什么不使用日期作为数据类型。正如 C0dem0nkey 所描述的，转换数据需要时间，而且使用大表可能非常棘手。

1.  遵循最佳实践（他们在那里是有原因的）。
2.  这个数据库是什么意思？
3.  如果一个选择一个而不是另一个有什么后果？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T00:55:48.030

我认为这样做会导致系统容易出错。如果使用 varchar，如何在日期时间上使用运算符？一种或另一种方式，您必须将它们转换为 datetime 以进行比较，然后将它们转换回字符串以再次存储，这需要很多时间。

[最佳实践 MySQL 数据类型列表](https://stackoverflow.com/questions/1380290/list-of-best-practice-mysql-data-types)

这是一个有用的帖子。问候！

# sweave - RStudio Sweave - 编码值无效

> ID：15058570
> 
> 赞同：0
> 
> 时间：2013-02-25T00:48:43.920
> 
> 标签：sweave, rstudio

因此，尽管我尽最大努力让 sweave 在 RStudio 中工作，但我终生无法做到这一点。搜索网络，甚至尝试回答这个[问题](https://stackoverflow.com/questions/8337536/beginners-questions-figures-bibliography-with-sweave-r-latex-my-first-docu/8337705#8337705)都没有帮助。

好的。我正在尝试编译我的主管书的章节，但每次我点击编译 PDF 时，都会出现以下错误：

grDevices::pdf.options(useDingbats = FALSE); utils::Sweave('test.Rnw', encoding='ASCII') 写入文件 test.tex 处理代码块... RweaveLatexOptions(options) 中的错误：'encoding' 的值无效：ASCII 调用：-> -> RweaveLatexOptions 执行停止

删除所有代码，甚至粘贴上述链接问题的答案也无济于事。虽然我毫不怀疑这是一个简单的解决方案，但我找不到它。这是 RStudio 的全新安装 - R 和 TexNic Center 都可以正常工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T15:05:33.513

过去，当我的文件中有弯引号和直引号等愚蠢的东西时，我就遇到过这个错误。这通常发生在我从文档中复制一些内容并将其粘贴到 RStudio 窗口中时。话虽如此，我不确定这是否有问题，因为即使您只使用该答案中的相同代码，您似乎也遇到了同样的问题？

# javascript - 尝试动态创建一个 div 并将其附加到 body 元素但不起作用？

> ID：15058571
> 
> 赞同：0
> 
> 时间：2013-02-25T00:48:54.840
> 
> 标签：javascript, google-chrome, html, append

我在这里浏览了一些关于动态注入 a`div`到`body`元素的问题。看起来很简单，但由于某种原因，这不起作用：

```
var div = document.createElement("div");
div.id = "uniqueID";
document.body.appendChild( div ); 
```

在谷歌浏览器的开发者控制台中返回特定错误：未捕获的类型错误**：无法调用 null 的方法 'appendChild'。**

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-25T00:50:29.727

您是否在加载 DOM 后运行此脚本？例如，

```
window.onload = function() {
    // your code
}; 
```

# java - Java ISBN 检查器/计算器，如何解决？

> ID：15058577
> 
> 赞同：0
> 
> 时间：2013-02-25T00:50:05.073
> 
> 标签：java, isbn

我正在做我的功课，并为这个特定的问题坚持了 5 个小时。

最后一位 d10 是校验和，由其他九位使用以下公式计算得出： (d1*1 + d2*2 + d3*3+ d4*4 + d5*5 + d6*6 + d7*7 + d8*8 + d9*9) % 11; 如果校验和为 10，则根据 ISBN 约定，最后一位数字表示为 X。

编写一个程序，提示用户输入前 9 位数字并显示 10 位数字 ISBN（包括前导零）。您的程序应该将输入读取为整数。例如，如果您输入 013601267，程序应显示 0136012671。如果用户省略前导零，程序应继续添加前导零。例如，如果输入 12345，程序应显示“正确的 ISBN 号为 0000123455”。

我使用了循环、开关和所有东西，但据我所知，我无法解决它。我可以计算 d10，但问题是.. 1) 我不明白如何计算 013601267，因为它不是 0 1 3 6 ... 因为我使用的是扫描仪对象，所以我不知道如何进行。2）而且我不知道如何添加前导零。

如果有人有这个问题的答案，或者有人可以给我建议，请帮助我！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T00:57:07.737

首先，将输入解析为`String`.

然后，循环遍历`String`并将每个字符（以`int`形式，进行必要的计算）添加到类型为 sum 的变量中`int`。（乘以每个`char`+ 1 的索引。）

最后，做模数。然后，如果结果等于 10，则将 X 附加到 ISBN 字符串；否则，附加取模运算的结果。

**编辑：**添加零，以 ISBN 的`String`形式计算字符数，然后在 ISBN 的开头添加该数量的零 - 9。

希望这可以帮助！！

# scala - Scala/Play 框架参数名称，其中包含一个点

> ID：15058578
> 
> 赞同：2
> 
> 时间：2013-02-25T00:50:08.080
> 
> 标签：scala, playframework

可能是一个愚蠢的问题。我正在开发一个 facebook 实时更新通知服务。Facebook 首先调用我的 GET 服务来验证调用者。Facebook 要求参数名称中带有一个点。例如“hub.mode”，还有 2 个参数名称中带有一个点。我将在我的 Play 服务中提供此类参数。如何创建一个带有“点”的参数？

其次，我可以用一种方法同时服务“GET”和“POST”请求吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-25T17:24:19.530

你可以得到你需要的参数，而不必在你的路由中声明它。
例子：

```
def myAction() = Action { request => // Don't forget this detail
    request.getQueryString("hub.mode") match {
      case Some(hubMode) => Ok(hubMode)
      case None => BadRequest
    }
} 
```

是的，您可以使用一种方法来提供不同的 HTTP 方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T16:58:43.330

第一：对于虚线参数，您可能应该使用[文档](http://www.playframework.com/documentation/2.1.0/ScalaForms)`Nested values`中描述的方法

第二：是的，你可以

# c# - 如何更新从另一个类传递的实体对象？

> ID：15058581
> 
> 赞同：0
> 
> 时间：2013-02-25T00:50:44.073
> 
> 标签：c#, linq, entity-framework

这是我的查询，我将返回一个`IEnumerable<CreditCardTransaction>`进行迭代。

```
 public partial class CreditCardTransaction
  {

    public static IEnumerable<CreditCardTransaction> GetUnprocessedTransactions()
    {
      try
      {
        using (var context = new SuburbanEntities())
        {
          return from trans in context.CreditCardTransactions
                 where trans.IsPublished == false
                 select trans;
        }
      }
      catch (Exception ex)
      {
        Logging.Log("An error occurred.", "GetUnprocessedTransactions",Apps.ServicesConfig, ex);
        return null;
      }
    }

  } 
```

处理完这些交易后，我将在此处修改它们：

```
public void ProcessFile()
{
  try
  {
    _client = new TruckServiceClient();
    _globalSetting = new GlobalSetting();

    var unprocesstransactions = CreditCardTransaction.GetUnprocessedTransactions();
    foreach (var creditCardTransaction in unprocesstransactions)
    {
      creditCardTransaction.IsPublished = ProcessTransaction(creditCardTransaction);
    }     
  }
  catch (Exception ex)
  {
    Logging.Log("An error occurred.", "ProcessCreditCardTransactions.ProcessFile", Apps.RemoteServices, ex);
  }
} 
```

我在这里修改交易：

```
creditCardTransaction.IsPublished = ProcessTransaction(creditCardTransaction); 
```

但是一旦我保存了它们，我可以直接更新实体还是需要创建另一个方法来传递这些信息？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T01:31:30.443

您无权访问上下文的问题。这里有一些示例： [https ://github.com/geersch/EntityFrameworkObjectContext](https://github.com/geersch/EntityFrameworkObjectContext)

如果您正在开发 Asp.Net 应用程序，您将在本文中说明一些缺点： [http ://dotnetslackers.com/articles/ado_net/Managing-Entity-Framework-ObjectContext-lifespan-and-scope-in​​-n -layered-ASP-NET-applications.aspx#managing-objectcontext-instantiation](http://dotnetslackers.com/articles/ado_net/Managing-Entity-Framework-ObjectContext-lifespan-and-scope-in-n-layered-ASP-NET-applications.aspx#managing-objectcontext-instantiation)

# php - 从 1 个表中获取值，该表也在另一个表中，但不在另一个表中

> ID：15058582
> 
> 赞同：1
> 
> 时间：2013-02-25T00:50:49.847
> 
> 标签：php, mysql, sql

我试图只获取尚未从 MySQL 数据库发布的广告。

我有 3 个表格，ad_title、items 和 posted_ads

ad_title - title_id、title、item_id

项目 - item_id、ad_body、帐户

post_ads - post_id、title_id、item_id、帐户

我一直在尝试获取未在某个帐户中发布但未成功的 ad_titles / 项目列表。这是我的查询：

```
SELECT * 
FROM 
  ad_title t
  JOIN items l 
   ON ( l.item_id= t.item_id
   AND l.accounts LIKE  '%myaccount@email.com%' ) 
WHERE NOT EXISTS (
  SELECT q.item_id
  FROM posted_ads q
  WHERE q.acc_used =  'myaccount@email.com'
) 
```

任何帮助，将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T00:58:37.230

在查询的当前形式中，您应该`ad_title.items_id NOT IN (...)`与子查询一起使用，因为您的`NOT EXISTS`子查询中不包含任何`WHERE`将其与外部查询相关联的内容

```
SELECT
  /* Don't actually SELECT * in a JOIN query. Be explicit about the needed columns */
  /* especially since you have item_id in all tables */
  t.*,
  l.* 
FROM 
  ad_title t
  JOIN items l 
   ON ( l.item_id= t.item_id
   AND l.accounts LIKE  '%myaccount@email.com%' ) 
WHERE
  /* Find item_id via NOT IN */ 
  t.item_id NOT IN (
    SELECT q.item_id
    FROM posted_ads q
    WHERE q.acc_used =  'myaccount@email.com'
  ) 
```

要使其作为 工作`NOT EXISTS`，您需要将子查询关联回外部查询：

```
WHERE NOT EXISTS (
  SELECT q.item_id
  FROM posted_ads q
  WHERE 
    q.acc_used =  'myaccount@email.com'
    /* Need relation to the outer query */
    AND q.item_id = l.item_id
) 
```

但这也可以用 a 来完成，在`LEFT JOIN`中寻找`NULL`s `posted_ads`。这可能是最有效的方法：

```
SELECT
  /* Don't SELECT * in a JOIN query. Be explicit about the needed columns */
  t.*,
  l.* 
FROM 
  ad_title t
  JOIN items l 
   ON ( l.item_id= t.item_id
   AND l.accounts LIKE  '%myaccount@email.com%' ) 
  LEFT JOIN 
    posted_ads q 
      ON l.item_id = q.item_id
      AND q.acc_used = l.accounts
WHERE
  /* NULL in the posted_ads table means it doesn't exist there */ 
  posted_ads.item_id IS NULL 
```

# c# - 随机化下一页

> ID：15058584
> 
> 赞同：0
> 
> 时间：2013-02-25T00:50:54.727
> 
> 标签：c#, asp.net

我有一个应用程序，每个页面都有一个问题。目前我有一个按钮，其中 OnClick 指向下面的函数，但我希望它选择一个随机页面。我有 10 个 .aspx 页面。我怎样才能做到这一点？

```
protected void newWindow(object sender, EventArgs e)
    {
        Response.Redirect("Question2.aspx");
    } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-25T00:56:43.523

```
protected void newWindow(object sender, EventArgs e)
{
    int next = new Random().Next( 10 ) + 1; // 1..10
    Response.Redirect(string.Format( "Question{0}.aspx", next ));
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T00:54:32.117

```
public int GetRandomNumberBewteen1And10()
{
    var r = new Random();
    return r.Next(1, 11);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-25T00:59:10.507

您需要将可能的页面列表放入一个数组中，然后使用 Random() 方法从该数组中提取一个随机索引。

```
List<string> pages = new List<string>({
    "Question2.aspx",
    "Question3.aspx",
    // etc.
});
Random r = new Random();
int randomIdx =r.Next(0, pages.Count-1);

Response.Redirect(pages[randomIdx]; 
```

# php - 在 php 上同时使用 ahref 和 onclick 来隐藏参数？

> ID：15058585
> 
> 赞同：0
> 
> 时间：2013-02-25T00:51:25.783
> 
> 标签：php, javascript

我有一个 php 函数，它从数据库中获取数据并调用一个 javasript 函数，如下所示：

```
echo "<p><a href=\"javascript: customm('$variable')\">$header</a></p>"; 
```

问题是当有人将鼠标悬停在链接上时，浏览器会显示完整的参数，如下所示：（在浏览器的左下角，或新选项卡）

```
javascript: customm('some secret code here'); 
```

有没有办法隐藏这个？我尝试将 onclick 添加到 php 函数并将 ahref 指向 #.

```
echo "<p><a href='#' onclick='javascript: customm('$variable')'>$header</a></p>"; 
```

但它没有用。

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T00:53:59.097

它不起作用，因为您需要转义引号：

```
echo "<p><a href='#' onclick='customm(\"$variable\"); return false;'>$header</a></p>"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T01:07:01.880

此代码有效：

```
echo "<p><a href = '#' onclick=\"javascript: customm('$variable')\">$header</a></p>"; 
```

感谢 KaeruCT 和 Blender！

# nltk - nltk 将流派添加到语料库中的文件

> ID：15058591
> 
> 赞同：0
> 
> 时间：2013-02-25T00:52:11.170
> 
> 标签：nltk

我有一堆纯文本文件，我想分类为 A 类或 B 类。

对于训练，我正在考虑将类型作为 A 类或 B 类添加到每个文件中，并尝试识别一些可以预测文件类型的特征。我可以创建纯文本语料库，但有没有办法在创建语料库时添加文件的类型？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T13:32:34.297

我建议使用 NLTK 的[CategorizedPlaintextCorpusReader](http://nltk.googlecode.com/svn/trunk/doc/api/nltk.corpus.reader.api.CategorizedCorpusReader-class.html)。文本文件必须根据它们的类别/类型命名，并且您必须将正则表达式传递给构造函数，告诉 NLTK 哪个文件属于哪个类别。

该文档指出：

> 用于查找每个文件标识符的类别的正则表达式模式。该模式将应用于每个文件标识符，第一个匹配组将用作该文件的类别标签。

除了模式之外，您还可以传递包含文件标识到类别名称的映射的字典或文本文件。请注意，每个文本文件可以属于多个类别。

有关代码示例，请参阅[此博客条目](http://www.packtpub.com/article/python-text-processing-nltk-20-creating-custom-corpora)。

# android - Android ViewFlipper 在屏幕超时后保持相同的视图

> ID：15058593
> 
> 赞同：1
> 
> 时间：2013-02-25T00:52:25.957
> 
> 标签：android, viewflipper

我在我的应用程序中使用 ViewFlipper，我需要在屏幕超时时保持当前视图，所以当我在屏幕超时后返回应用程序时，我会看到相同的视图不会返回到 ViewFlipper 的第一个视图有帮助吗？谢谢

# android - Android：如何在活动之外设置图像视图

> ID：15058596
> 
> 赞同：0
> 
> 时间：2013-02-25T00:52:49.617
> 
> 标签：android, imageview

ImageRenderer.java

```
public class ImageRenderer implements Renderer {
...

private Context mActivityContext;
...

public SandAniRenderer(final Context activityContext) {
    // TODO Auto-generated constructor stub
    mActivityContext = activityContext;
    mField = new Field(mActivityContext);
    ...
}

private boolean InitializeObject(int width, int height)
{
    ...
    Field.SetField(width, height, R.drawable.image);
    ...

    return true;
} 
```

字段.java

```
public class Field extends xxx{

private final Context mActivityContext;

public Field(Context activityContext)
{
    mActivityContext = activityContext;
}

public boolean SetField(int width, int height, int fn)
{
    ImageView mImage = (ImageView) ((Activity) mActivityContext).findViewById(fn);
...
} 
```

但它不起作用！

mImage 包含空图像...

我找不到图像如何包含在活动之外。

您能帮我了解如何在活动之外实现绘制 ImageView 吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T01:17:10.607

假设 mField 是一个成员变量，

```
public class ImageRenderer implements Renderer {
Field mField = null; 
```

在`InitializeObject`. 你`Context`是空的，因为当你静态调用它时它没有设置。

```
private boolean InitializeObject(int width, int height)
{
...
mField.SetField(width, height, R.drawable.image);
...

return true;
} 
```

设置好之后

```
 mField = new Field(mActivityContext); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T03:02:15.913

试试这个（emptyimage是我在我的drawable中的图像）

```
mImage.setImageResource(R.drawable.emptyimage); 
```

# java - 如何创建一个哈希表来比较一个类中的部分实例变量是否曾经发生过？

> ID：15058602
> 
> 赞同：0
> 
> 时间：2013-02-25T00:53:21.463
> 
> 标签：java, algorithm, class, hash

现在我有一个迷宫要通过 BFS 解决，以从起点找到目标。我需要打印一些信息，所以我决定创建一个具有 A、B 和 C 实例变量的类节点（是的，我使用 JAVA）。但我的问题是，在BFS期间，我不应该扩展具有相同A和B的节点。这意味着，例如，我首先扩展了节点（1,2,3），而不是我不应该扩展节点第二（ 1,2,5)。所以我想我应该尝试建立一个哈希图或哈希表。每次对于一个节点 node(x,y,z)，我都应该检查它的 (x,y) 是否曾经发生过。我该如何实施？它仍然是哈希时间 O(1) 吗？我应该以其他方式设计课程吗？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T01:17:51.240

是的，您可以为此使用哈希表。您需要做的就是定义[equals(Object)](http://docs.oracle.com/javase/6/docs/api/java/lang/Object.html#equals%28java.lang.Object%29)和[hashCode()](http://docs.oracle.com/javase/6/docs/api/java/lang/Object.html#hashCode%28%29)方法。对于这些，只要您只测试 (x,y) 而不是 (z)，那么任何具有相同 (x,y) 的节点都会在哈希图中发生冲突。但这还重要吗？您是否有两个具有相同 (x,y) 但 z 值不同的节点？那将是一个非常奇怪的迷宫……

编辑：最后听起来[set](http://docs.oracle.com/javase/6/docs/api/java/util/Set.html)对象也可以工作，并且正是您想要使用的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T01:04:53.057

对于这类工作，递归算法通常是最好的方法。

您的问题提出了一种需要使用全局信息的迭代方法。递归方法不需要保留此类信息，并且 woukd 还使您的代码更易于理解和实现。

# php - 类属性的PHP变量类型

> ID：15058603
> 
> 赞同：0
> 
> 时间：2013-02-25T00:53:29.573
> 
> 标签：php, class, properties, variable-assignment

让我们以这段代码为例：

```
class foo
{
    private $segments = NULL;
} 
```

`$segments` 稍后将是一个数组。

**问题：**

我应该告诉 PHP 这`$segments` 是一个数组 ( `private $segments = array();`) 还是将其保留为 NULL？

什么是更好的？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T00:56:59.557

如果确定以后会是数组，就声明为数组，如果在程序中可能发生变化，就保持原样。

PHP 是非类型语言，所以这并不重要，只是标准和习惯的问题。

# networking - 无法解析主机名，ping 正常

> ID：15058605
> 
> 赞同：11
> 
> 时间：2013-02-25T00:53:40.360
> 
> 标签：networking

我已经安装了 RasPi Raspbian，现在我无法执行 ssh 或 git clone，似乎只能解析本地主机名。然而 ping 工作：

```
pi ~ $ ssh test.com
ssh: Could not resolve hostname test.com: Name or service not known

pi ~ $ git clone gitosis@test.com:test.git
Cloning into 'test'...
ssh: Could not resolve hostname test.com: Name or service not known
fatal: The remote end hung up unexpectedly

pi ~ $ ping test.com
PING test.com (174.36.85.72) 56(84) bytes of data. 
```

`http://github.com`我通过使用而不是为 github 解决了这个问题`git://github.com`，但这不正常，我想查明问题所在。

谷歌搜索类似的问题，但提供的解决方案要么是错字更正，要么是在主机文件中添加域。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-02-25T01:17:55.573

这听起来像是一个 DNS 问题。尝试切换到另一个 DNS 服务器，看看它是否有效。

开放式DNS

*   208.67.222.222
*   208.67.220.220

[谷歌DNS](https://developers.google.com/speed/public-dns/)

*   8.8.8.8
*   8.8.4.4

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-09-29T04:36:46.570

尝试重置 DNS 客户端解析器缓存的内容。（对于 Windows）启动命令提示符并键入：

```
ipconfig /flushdns 
```

如果您是 linux 或 mac 用户，他们有自己的方式刷新 dns。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-04-23T17:06:37.430

有同样的错误，我只需要指定一个文件夹：

```
localmachine $ git pull ssh://someusername@127.0.0.1:38765
ssh: Could not resolve hostname : No address associated with hostname
fatal: The remote end hung up unexpectedly

localmachine $ git pull ssh://someusername@127.0.0.1:38765/
someusername@127.0.0.1's password: 
```

该错误消息只是具有误导性。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-07-10T10:01:25.300

如果您安装了网络管理器

检查 /etc/nsswitch.conf

如果你有一条线

```
hosts:          files mdns4_minimal [NOTFOUND=return] dns mdns4

remove the **[NOTFOUND=return]**

restart /etc/init.d/networking

the [NOTFOUND=return] prevents futher lookups if the first nameservwe doesn't respond correctly 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2017-06-29T04:56:39.507

这可能是代理的问题。请取消设置并尝试。

```
git config --global --unset http.proxy
git config --global --unset https.proxy 
```

# php - 网址爆炸价值

> ID：15058607
> 
> 赞同：0
> 
> 时间：2013-02-25T00:54:17.070
> 
> 标签：php

目前我有一个这样的网址，

[http://website.com/type/value](http://website.com/type/value)

我在用

```
$url = $_SERVER['REQUEST_URI'];
$url = trim($url, '/');
$array = explode('/',$url); 
```

这是为了获取当前的值，但我的页面上有 Facebook 喜欢的，当它被点击时，它会添加所有这些额外的变量。`http://website.com/type/value?fb_action_ids=1234567&fb_action_types=`这打破了我想要获得的价值。有没有另一种方法来获得特定的价值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T00:56:49.230

假设您知道这将始终是一个有效的 URL，您可以使用[`parse_url`](http://www.php.net/manual/en/function.parse-url.php).

```
list(, $value) = explode('/', parse_url($url)['path']); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T01:00:15.863

您还可以使用：

```
$array = explode('/',$_SERVER['PATH_INFO']); 
```

或这个：

```
$array = explode('/',$_SERVER['PHP_SELF']); 
```

有了这个，你就不需要`trim()`call 或 temp var `$url`- 除非你从别的地方使用它。

有两个选项的原因是我不知道是否`/type/value`被传递给一个`index.php`或者`value`实际上是一个 php 文件。无论哪种方式，这两个选项之一都会为您提供所需的东西。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-25T01:05:36.110

我会用一个`preg_replace`

```
explode('/', preg_replace('/?.*$/', '', $url)); 
```

# c - 在 C 中查找一段代码的运行时

> ID：15058614
> 
> 赞同：0
> 
> 时间：2013-02-25T00:56:10.010
> 
> 标签：c, runtime, clock

下面的代码应该在 for 循环的几秒钟内找到运行时。查看其他资源，这应该可以解决问题，在 for 循环运行后`clock()`从 a 中减去初始值。`clock()`任何想法为什么代码不能按书面方式工作？

```
#include <stdio.h>
#include <time.h>

//prototypes
int rfact(int n);
int temp = 0;

main()
{
    int n = 0;
    int i = 0;
    double result = 0.0;
    clock_t t;
    printf("Enter a value for n: ");
    scanf("%i", &n);

    printf("n=%i\n", n);

    //get current time
    t = clock();

    //process factorial 2 million times
    for(i=0; i<2000000; i++)
    {
        rfact(n);
    }

    printf("n=%i\n", n);

    //get total time spent in the loop
    result = (double)((clock() - t)/CLOCKS_PER_SEC);

    //print result
    printf("runtime=%d\n", result);
}

//factorial calculation
int rfact(int n)
{

    if (n<=0)
    {
        return 1;
    }
    return n * rfact(n-1);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T00:58:02.300

```
result = (double)((clock() - t)/CLOCKS_PER_SEC); 
```

这应该是：

```
result = ((double)(clock() - t))/CLOCKS_PER_SEC; 
```

否则，您将进行整数除法并将结果转换为双精度数，这不是您想要的。

还：

```
printf("runtime=%d\n", result); 
```

应该：

```
printf("runtime=%f\n", result); 
```

# c - C：如何从 .t xt 文件中正确输出结构？

> ID：15058618
> 
> 赞同：0
> 
> 时间：2013-02-25T00:56:37.493
> 
> 标签：c

我第一次在这里问一个问题。首先是代码：

```
void displayCompanyInfo(STAFF  e[], int *s)
{
    FILE *payRoll;
    int i = 0;
    int rosterNumber [100];
    int count = 1;

    if ((payRoll = fopen("payRoll.txt", "r")) == NULL)
    {
        perror ("error");
        exit (0);
    }

    cls;

    while (fgets(e[i].name,  sizeof(e[i].name), payRoll) != NULL)
    {
        printf ("Record %i: ", count++);
        printf("%s\n", e[i].name);
    }

    fclose(payRoll);
    printf("\n\n");
    pause;
    cls;

} // end of display 
```

基本上这段代码有效。但是，当文本文件显示时，它的内容如下：

记录 1：姓名：blah
记录 2：年龄：23
​​ 记录 3：每小时费率：34

相反，我希望它按如下方式阅读：

记录 1：姓名：Blah
年龄：23
​​ 时薪：34

记录 2： 姓名：Blah2
年龄：24
小时费率：35

等等...

关于如何让它发挥作用的任何想法。我没有发布整个程序，因为我不想过度执行我的线程。但是，如果您需要它，请告诉我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T04:41:00.423

对于这种情况，您必须使用二进制文件处理。使用文本文件是不可能的。您必须以字节为单位读取、写入数据块并相应地处理它以检索您的结构。

说

struct e{ char name[20], int age, int hourly_rate };

此结构将需要 20(name) + 4(age) + 4(hourly_rate) 字节。然后您应该在二进制文件中一次写入 28 个字节并相应地检索 28 个字节，这在文本文件的情况下是不可能的。因为文本文件将所有事物视为字符，例如 age=23 它将年龄字段视为 2 个字节，如果 age=3，则将其视为 1 个字节。但二进制文件将这两个事物视为 4 个字节，这是整数的实际大小。

因此，您的问题的解决方案是二进制文件处理。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T01:08:42.083

问题是循环将每一行视为一条记录。相反，一条记录应该是 3 行。因此，请在循环中阅读 3 件事 - 在 printf 之前添加 2 个缺失的内容。

# python - Python 交互式选择工具，例如 MATLAB

> ID：15058621
> 
> 赞同：5
> 
> 时间：2013-02-25T00:56:49.010
> 
> 标签：python, qt, matlab, matplotlib, pyqt

我正在尝试从 MATLAB 切换到 python，但现在我遇到了一些我自己无法解决的问题。我在用 Qt 设计器设计的 pyqt 中做了一个 GUI（分析一些神经元），所有可视化都是在 Qt 的 matplotlib 小部件中完成的（它包含在 pythonxy 中）但现在我需要一些工具，比如 MATLAB 中的交互式选择（不仅在图像但也在绘图上）与集成在 Qt GUI 中的 matplotlib 一起使用：

*   内联
*   垄断
*   椭圆
*   非徒手
*   [imrect（在python](https://stackoverflow.com/questions/9048350/imrect-for-python)的 pyqt GUI imrect 中不起作用）；
*   ginput（在我从 matplotlib 库的 matplotlib\blocking_input.py 文件中注释命令 self.fig.show() 后，我可以直接在 myMatplotlibWidget.figure.ginput() 上调用 ginput）。

我找到了这个[http://matplotlib.org/users/event_handling.html](http://matplotlib.org/users/event_handling.html)，请不要告诉我必须用这个python模块xD自己实现上述工具

我发现了这个[http://www.pyqtgraph.org/](http://www.pyqtgraph.org/)但它没有与 matplotlib 集成，并且最终的渲染不像在 matplotlib 中那么好。

pyqt有没有好的交互式选择工具？在谷歌上，我找不到任何有用的东西，但我不敢相信没有好的 python 交互式工具......如果是这样，我将切换回 MATLAB。

谢谢你的帮助

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-28T11:17:34.833

好的，我已经为集成在Qt GUI中的matplotlib自己实现了imline ...现在，imrect等很容易实现。如果有人需要 imrect 等，我会更新代码。下面是我的 imline 代码：

```
from PyQt4.QtCore import *
from PyQt4.QtGui import *

import time
import matplotlib as mpl
import matplotlib.pyplot as plt

import numpy as np
import scipy.optimize as opt

class Imline(QObject):
    '''
    Plot interactive line
    '''

    def __init__(self, plt, image = None, scale = 1, *args, **kwargs):
        '''
        Initialize imline
        '''
        super(Imline, self).__init__(None)

        # set plot        
        self.__plt = plt
        self.scale = scale        

        # initialize start and end points        
        self.startX = None
        self.startY = None
        self.endX = None
        self.endY = None  

        # initialize line2d        
        self.__line2d = None
        self.mask = None

        # store information to generate mask
        if(image is not None):        
            height, width = image.shape

        else:
            height = None
            width = None            

        self.__width = width
        self.__height = height

        # set signals and slots        
        self.__c1 = self.__plt.figure.canvas.mpl_connect('button_press_event', self.__mousePressEvent)
        self.__c2 = self.__plt.figure.canvas.mpl_connect('motion_notify_event', self.__mouseMoveEvent)
        self.__c3 = self.__plt.figure.canvas.mpl_connect('button_release_event', self.__mouseReleaseEvent)       

        self.imlineEventFinished = SIGNAL('imlineEventFinished')        

    def __mousePressEvent(self, event):
        '''
        Starting point
        '''

        # get xy data        
        xdata = event.xdata
        ydata = event.ydata

        # check if mouse is outside the figure        
        if((xdata is None) | (ydata is None) | (self.startX is not None) | (self.startY is not None) | (self.endX is not None) | (self.endY is not None)):
            return       

        # start point        
        self.startX = xdata
        self.startY = ydata

    def __mouseMoveEvent(self, event):
        '''
        Draw interactive line
        '''

        # get xy data        
        xdata = event.xdata
        ydata = event.ydata

        # check if mouse is outside the figure        
        if((xdata is None) | (ydata is None) | (self.startX is None) | (self.startY is None) | (self.endX is not None) | (self.endY is not None)):
            return      

        # remove line        
        if(self.__line2d is not None):
            self.__line2d[0].remove()

        # set x, t
        x = [self.startX, xdata]
        y = [self.startY, ydata]        

        # plot line
        self.__plt.axes.hold(True)
        xlim = self.__plt.axes.get_xlim()
        ylim = self.__plt.axes.get_ylim()
        self.__line2d = self.__plt.axes.plot(x, y, color = [1, 0, 0])
        self.__plt.axes.set_xlim(xlim)
        self.__plt.axes.set_ylim(ylim)

        # update plot        
        self.__plt.draw()
        self.__plt.show()

    def __mouseReleaseEvent(self, event):
        '''
        End point
        '''     

        # get xy data        
        xdata = event.xdata
        ydata = event.ydata

        # check if mouse is outside the figure        
        if((xdata is None) | (ydata is None) | (self.endX is not None) | (self.endY is not None)):
            return             

        # remove line        
        if(self.__line2d is not None):
            self.__line2d[0].remove()

        self.endX = xdata
        self.endY = ydata   

        P = np.polyfit([self.startX, self.endX], [self.startY, self.endY],1 )
        self.__m = P[0]
        self.__q = P[1]

        # update plot        
        self.__plt.draw()
        self.__plt.show()

        # disconnect the vents        
        self.__plt.figure.canvas.mpl_disconnect(self.__c1)
        self.__plt.figure.canvas.mpl_disconnect(self.__c2)
        self.__plt.figure.canvas.mpl_disconnect(self.__c3)

        # emit SIGNAL        
        self.emit(SIGNAL('imlineEventFinished'))

    def createMask(self):
        '''
        Create mask from painted line
        '''

        # check height width        
        if((self.__height is None) | (self.__width is None)):
            return None

        # initialize mask        
        mask = np.zeros((self.__height, self.__width))        

        # get m q        
        m = self.__m
        q = self.__q        

        print m, q

        # get points        
        startX = np.int(self.startX)   
        startY = np.int(self.startY) 
        endX = np.int(self.endX) 
        endY = np.int(self.endY)

        # ensure startX < endX
        tempStartX = startX
        if(startX > endX):
            startX = endX
            endX = tempStartX

        # ensure startY < endY
        tempStartY = startY
        if(startY > endY):
            startY = endY
            endY = tempStartY

        # save points
        self.startX = startX
        self.endX = endX
        self.startY = startY
        self.endY = endY

        # intialize data        
        xData = np.arange(startX, endX)
        yData = np.arange(startY, endY)

        # scan on x        
        for x in xData:
            row = round(m*x + q)
            if(row < startY):
                row = startY
            if(row > endY):
                row = endY
            mask[row, x] = 1

        # scan on y
        for y in yData:
            col = round((y - q) / m)
            if(col < startX):
                col = startX
            if(col > endX):
                col = endX
            mask[y, col] = 1

        # get boolean mask        
        mask = mask == 1        

        # return boolean mask
        return mask 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T01:15:57.510

对于交互式工具，您可能需要查看 ipython notebook 或其他 ipython 应用程序。

**ipython qt 控制台**：

[http://ipython.org/ipython-doc/dev/interactive/qtconsole.html](http://ipython.org/ipython-doc/dev/interactive/qtconsole.html)

**ipython 笔记本**：

[http://ipython.org/notebook.html](http://ipython.org/notebook.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-07-08T13:52:57.647

[matplotlib 文档](https://matplotlib.org/users/event_handling.html#event-attributes)有一个在 PyQt5 中工作的简单实现（为方便起见，从那里复制整个示例）

```
from matplotlib import pyplot as plt

class LineBuilder:
    def __init__(self, line):
        self.line = line
        self.xs = list(line.get_xdata())
        self.ys = list(line.get_ydata())
        self.cid = line.figure.canvas.mpl_connect('button_press_event', self)

    def __call__(self, event):
        print('click', event)
        if event.inaxes!=self.line.axes: return
        self.xs.append(event.xdata)
        self.ys.append(event.ydata)
        self.line.set_data(self.xs, self.ys)
        self.line.figure.canvas.draw()

fig = plt.figure()
ax = fig.add_subplot(111)
ax.set_title('click to build line segments')
line, = ax.plot([0], [0])  # empty line
linebuilder = LineBuilder(line)

plt.show() 
```

# c - 使用 libev 的套接字

> ID：15058622
> 
> 赞同：2
> 
> 时间：2013-02-25T00:56:55.547
> 
> 标签：c, sockets, asyncsocket, libev

我正在寻找基于 libev 编写一个套接字程序。我注意到[https://github.com/coolaj86/libev-examples/blob/master/src/unix-echo-server.c](https://github.com/coolaj86/libev-examples/blob/master/src/unix-echo-server.c)中所述的几个示例使用基于 init 的回调。例如，

```
main() {

......
ev_io_init(&client.io, client_cb, client.fd, EV_READ|EV_WRITE);
ev_io_start(EV_A_ &server.io);

}

static void client_cb (EV_P_ ev_io *w, int revents)
{
  if (revents & EV_READ)
  {
      ....
  } else if (revents & EV_WRITE) {

     ......
  }
} 
```

我的问题来自预期的行为，例如，我在 EV_READ 中读取的所有内容都存储在链接列表中。假设我不断获得免费的数据包流来读取，我有机会进入 EV_WRITE 吗？我必须将我通过读取接收到的所有内容发送到另一个套接字。那么它会是一次 EV_READ 和第二次 EV_WRITE 吗？换句话说，EV_WRITE 什么时候会被解除阻塞？或者我是否需要阻止 EV_READ 才能调用 EV_WRITE。有人可以帮我理解这一点吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T09:34:50.123

简短地回答：如果你总是先检查一种类型的事件，然后再检查另一种类型的事件，那么`else if`你就有挨饿的风险。一般来说，我会检查两者，除非指定的协议无法同时激活两者。

这是一个更不确定的答案：您问题中的链接不包含代码结构，例如您的问题。客户端[https://github.com/coolaj86/libev-examples/blob/master/src/unix-echo-client.c](https://github.com/coolaj86/libev-examples/blob/master/src/unix-echo-client.c)确实有类似的回调。您会注意到它在写入一次时会禁用写入事件。

```
// once the data is sent, stop notifications that
// data can be sent until there is actually more
// data to send
ev_io_stop(EV_A_ &send_w);
ev_io_set(&send_w, remote_fd, EV_READ);
ev_io_start(EV_A_ &send_w); 
```

这看起来像是试图避免管道 READ 事件分支的饥饿。即使我对 libev 不是很熟悉，您链接到的 github 示例似乎也不是很健壮。例如`static void stdin_cb (EV_P_ ev_io *w, int revents)`不使用返回值`getline()`来检测EOF。此外，不会检查`send()`和`recv()`套接字操作返回值的读取或写入量（尽管在本地命名管道流上，数量很可能与请求的数量匹配）。如果稍后将其更改为基于 TCP 的连接，则检查数量至关重要。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-01-21T02:17:32.710

我认为您应该将写回调与读回调分开：

```
main() {
    ev_io_init(&read.io, read_cb, client.fd, EV_READ);
    ev_io_init(&write.io, writead_cb, client.fd, EV_WRITE);
    ev_io_start(EV_A_ &read.io);
    ev_io_start(EV_A_ &write.io);
} 
```

这是我的解决方案。

# ios - 如何不使用原型单元标识符重用单元但

> ID：15058631
> 
> 赞同：6
> 
> 时间：2013-02-25T00:57:55.893
> 
> 标签：ios, uitableview, prototype, cell, reusability

我知道我不能通过不调用此方法来重用单元格：

```
UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:@"SomeID"] 
```

根据[此处](https://stackoverflow.com/questions/6443533/disable-cell-reuse-for-small-fixed-size-uitableview)提供的描述。

但是如果我使用的是原型单元怎么办？

因为如果我不指定原型单元格的标识符，我的表格视图只会显示空白单元格。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-05-23T14:31:18.100

您只需在从缓存中拉出单元后立即重置您在方法中处理的所有内容。

然后继续设置特定指数的卖出。例如：

```
UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:@"SomeID"];
if(cell)
{
    cell.textLable.text = nil;
    cell.accessoryItem = nil;
    ...
}

if(haveSomeText){
    cell.textLable.text = [allMyTexts objectForIndex:index];
}
if(needSetButton){
    cell.accessoryItem = [[UIButton alloc] init ...]];
}
... 
```

# android - Listview 给出错误

> ID：15058634
> 
> 赞同：1
> 
> 时间：2013-02-25T00:58:20.097
> 
> 标签：android, android-listview

我有一个列表视图，它显示了从可绘制文件夹和标题中获取的图片。但它给出了错误。我无法确定问题所在，因此无法进行良好的搜索以找到解决方案。这是我的课程：

```
public class Categories extends Activity {
    ListView EventCategories;
    String CategoryList[] = { "Sinema", "Tiyatro", "Spor Faaliyetleri",
            "Müzik", "Sahne Sanatları" };
    int CategoryImageList[] = { R.drawable.sinema, R.drawable.tiyatro,
            R.drawable.spor, R.drawable.concert, R.drawable.sahnesanatlari };

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.category_list);

        EventCategories = (ListView) findViewById(R.id.categorylist);
        final MyAdapter<String> categories = new MyAdapter<String>(this,
                android.R.layout.simple_list_item_1, R.id.categorylist,
                CategoryList);
        EventCategories.setAdapter(categories);

    }

    public class MyAdapter<String> extends ArrayAdapter<String> {
        @Override
        public View getView(int position, View convertView, ViewGroup parent) {
            LayoutInflater inflater = (LayoutInflater) getSystemService(Context.LAYOUT_INFLATER_SERVICE);
            View row = inflater.inflate(R.layout.category_list_item, parent,
                    false); //category list item has an Imageview and a Button

            ImageView icon = (ImageView) findViewById(R.id.categoryimage);
            Button category = (Button) findViewById(R.id.categorybutton);

            category.setText(CategoryList[position]);
            icon.setImageResource(CategoryImageList[position]);

            return row;
        }

        public MyAdapter(Context context, int resource, int textViewResourceId,
                String[] mylist) {
            super(context, resource, textViewResourceId, mylist);
        }
    }
} 
```

这就是错误。第 44 行是“category.setText(CategoryList[position]);”

```
02-25 02:46:06.415: E/AndroidRuntime(458): FATAL EXCEPTION: main
02-25 02:46:06.415: E/AndroidRuntime(458): java.lang.NullPointerException
02-25 02:46:06.415: E/AndroidRuntime(458):  at com.example.example.Categories$MyAdapter.getView(Categories.java:44)
02-25 02:46:06.415: E/AndroidRuntime(458):  at android.widget.AbsListView.obtainView(AbsListView.java:1315)
02-25 02:46:06.415: E/AndroidRuntime(458):  at android.widget.ListView.makeAndAddView(ListView.java:1727)
02-25 02:46:06.415: E/AndroidRuntime(458):  at android.widget.ListView.fillDown(ListView.java:652)
02-25 02:46:06.415: E/AndroidRuntime(458):  at android.widget.ListView.fillFromTop(ListView.java:709)
02-25 02:46:06.415: E/AndroidRuntime(458):  at android.widget.ListView.layoutChildren(ListView.java:1580)
02-25 02:46:06.415: E/AndroidRuntime(458):  at android.widget.AbsListView.onLayout(AbsListView.java:1147)
02-25 02:46:06.415: E/AndroidRuntime(458):  at android.view.View.layout(View.java:7035)
02-25 02:46:06.415: E/AndroidRuntime(458):  at android.widget.FrameLayout.onLayout(FrameLayout.java:333)
02-25 02:46:06.415: E/AndroidRuntime(458):  at android.view.View.layout(View.java:7035)
02-25 02:46:06.415: E/AndroidRuntime(458):  at android.widget.LinearLayout.setChildFrame(LinearLayout.java:1249)
02-25 02:46:06.415: E/AndroidRuntime(458):  at android.widget.LinearLayout.layoutVertical(LinearLayout.java:1125)
02-25 02:46:06.415: E/AndroidRuntime(458):  at android.widget.LinearLayout.onLayout(LinearLayout.java:1042)
02-25 02:46:06.415: E/AndroidRuntime(458):  at android.view.View.layout(View.java:7035)
02-25 02:46:06.415: E/AndroidRuntime(458):  at android.widget.FrameLayout.onLayout(FrameLayout.java:333)
02-25 02:46:06.415: E/AndroidRuntime(458):  at android.view.View.layout(View.java:7035)
02-25 02:46:06.415: E/AndroidRuntime(458):  at android.view.ViewRoot.performTraversals(ViewRoot.java:1045)
02-25 02:46:06.415: E/AndroidRuntime(458):  at android.view.ViewRoot.handleMessage(ViewRoot.java:1727)
02-25 02:46:06.415: E/AndroidRuntime(458):  at android.os.Handler.dispatchMessage(Handler.java:99)
02-25 02:46:06.415: E/AndroidRuntime(458):  at android.os.Looper.loop(Looper.java:123)
02-25 02:46:06.415: E/AndroidRuntime(458):  at android.app.ActivityThread.main(ActivityThread.java:4627)
02-25 02:46:06.415: E/AndroidRuntime(458):  at java.lang.reflect.Method.invokeNative(Native Method)
02-25 02:46:06.415: E/AndroidRuntime(458):  at java.lang.reflect.Method.invoke(Method.java:521)
02-25 02:46:06.415: E/AndroidRuntime(458):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
02-25 02:46:06.415: E/AndroidRuntime(458):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
02-25 02:46:06.415: E/AndroidRuntime(458):  at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T01:02:35.207

对于您`icon`，`category`您应该从以下位置寻找视图`row`：

```
ImageView icon = (ImageView) row.findViewById(R.id.categoryimage);
Button category = (Button) row.findViewById(R.id.categorybutton); 
```

# android - 自定义复选框 starStyle 的外观

> ID：15058635
> 
> 赞同：5
> 
> 时间：2013-02-25T00:58:27.883
> 
> 标签：android, android-checkbox

我在我的`ListView`行的 xml 布局中进行了以下操作：

```
 <CheckBox
        android:id="@+id/favbutton"
        style="?android:attr/starStyle"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentRight="true"
        android:layout_centerVertical="true" /> 
```

它会显示一个蓝色星形，可以选中它以选择最喜欢的。这正是我需要的功能，但我只想自定义显示的星形图标。我想把颜色改成黄色而不是蓝色，如果可能的话，我也想把星星变小。是否可以通过更改应用于应用程序的主题来进行这些更改？我需要编辑什么来更改星形图标的外观？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-25T16:56:02.380

我解决了这个问题如下。`res/drawable`我在调用中创建了一个文件`btn_star_selector.xml`并将选择器定义如下：

```
<selector xmlns:android="http://schemas.android.com/apk/res/android">
     <item android:state_checked="true" android:state_pressed="true"  android:drawable="@drawable/btn_star_on_pressed" />
     <item android:state_checked="false" android:state_pressed="true"
      android:drawable="@drawable/btn_star_off_pressed" />
     <item android:state_checked="true" android:drawable="@drawable/btn_star_on" />
     <item android:state_checked="false" android:drawable="@drawable/btn_star_off" />
</selector> 
```

定义了这个选择器后，我在`checkbox`定义中替换了这一行

```
style="?android:attr/starStyle" 
```

有了这个

```
android:button="@drawable/btn_star_selector" 
```

然后，我创建了四个图像来表示复选框的不同状态，即`on`、和`off`，并将它们放在.`on pressed``off pressed``res/drawables`

希望这可以帮助其他试图弄清楚如何自定义复选框的人。

# visual-studio - Visual Studio 中的远程调试无法连接

> ID：15058638
> 
> 赞同：0
> 
> 时间：2013-02-25T00:59:08.600
> 
> 标签：visual-studio, azure, remote-debugging

您好，我在 Visual Studio (v12) 中的远程调试有问题我创建了 windows azure 帐户，我将应用程序发布到云。然后我通过远程桌面连接到这个帐户。远程计算机的地址是 fe Iron.app.net 然后我在那里下载并运行远程调试器。我启动了 msvsmon.exe 并创建了名为：RD0015555E2:555 的服务器，现在我想在我的主机上进行远程调试。我知道我必须附加到进程。我做到了。从 Visual Studio：调试->附加到进程->限定符：RD0015555E2，它无法解析主机名。我也试过 Iron.app.net 但它显示错误，似乎没有安装 msvsmon。我不知道我应该在限定符中输入什么（作为远程机器）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T07:45:13.607

远程调试很难配置 Windows Azure 云服务。您拥有的其他选择是：

*   [Intellitrace](http://blogs.msdn.com/b/jnak/archive/2010/06/07/using-intellitrace-to-debug-windows-azure-cloud-services.aspx)（如果你有 Visual Studio Ultimate）
*   从一开始就进行密集（详细）主动代码检测（日志记录）。
*   [分析云服务](http://msdn.microsoft.com/en-us/library/windowsazure/hh369930.aspx#BK_ProfilingCloudService)

选择其中一个，并查看您的日志/跟踪。

或深入了解[远程调试云服务](http://code.msdn.microsoft.com/windowsazure/Remote-Debugging-Windows-dedaaec9)。但是，当其他一切都不起作用并且对我没有帮助时，我会使用远程调试作为最终选项。通常，大多数会在云中弹出的问题也会在本地调试时弹出。如果角色只是回收，您将根本无法附加调试器。

# php - 一起运行的属性或不带引号的属性值中的 URL 查询字符串

> ID：15058642
> 
> 赞同：-1
> 
> 时间：2013-02-25T00:59:58.780
> 
> 标签：php

运行验证器时，我收到此错误。另外，Internet Explorer 8 无法将我的侧边栏加载到位。我在这里做错了什么？TNX

```
global $layout;
echo '<div id=\"main\" role=\"main\" class=\"layout_" . $layout . "\">';
echo '<section id="content" class="grid_8 background_1">';
echo '<a id="main_btn" href="#"></a>';
echo '<div class="clearfix">';
echo '</div></div></div></div>'; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T01:07:16.177

第 2 行的输出是：

`<div id=\"main\" role=\"main\" class=\"layout_" . $layout . "\">`

不知何故，我怀疑这就是你真正想要的。试试这个：

`echo "<div id=\"main\" role=\"main\" class=\"layout_" . $layout . "\">";`

# iphone - 如何将 UINavigationController 添加到呈现为 Modal 的 UIViewController

> ID：15058644
> 
> 赞同：1
> 
> 时间：2013-02-25T01:00:05.427
> 
> 标签：iphone, xcode, ios6, uinavigationcontroller, presentmodalviewcontroller

我的应用程序中有一个替代流程。这个流程从我的 firstViewController 开始，然后在这个视图中调用我的 secondViewController，如下所示：

```
- (IBAction)PressButton:(id)sender {

    SecondViewController *second = [[SecondViewController alloc] init];
    second.modalTransitionStyle = UIModalTransitionStyleFlipHorizontal;
    UINavigationController *nav = self.navigationController;
    [nav presentViewController:second animated:YES completion:nil];                              
} 
```

在我的 secondViewController 中，我想推送我的thirdViewController。但它不起作用我尝试了这种方式：

```
- (IBAction)pressButton:(id)sender {

   ThirdViewController *tvc = [[ThirdViewController alloc] init];
   UINavigationController *nav = self.navigationController;
   [nav pushViewController:tvc animated:YES]; 
```

}

当我按下 secondViewController 的按钮时，没有任何反应。

我做错了什么？

我在用着：

*   OSX 10.8.2
*   Xcode 4.6
*   iOS 6.1

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-25T02:16:45.590

您必须以模态方式呈现导航控制器，并将第二个视图作为该导航控制器的根。以及从拥有视图而不是其父导航控制器调用 presentViewController。

```
- (IBAction)PressButton:(id)sender {
        SecondViewController *second = [[SecondViewController alloc] init];
        second.modalTransitionStyle = UIModalTransitionStyleFlipHorizontal;
        UINavigationController *navigationController = [[UINavigationController alloc] initWithRootViewController:second];
        [self presentViewController:navigationController animated:YES completion:nil];    
    } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-25T01:15:06.567

不要只展示第二个视图控制器，确保展示一个额外的导航控制器。

```
SecondViewController *secondViewController = [[SecondViewController alloc] init];

UINavigationController *navigationController = [[UINavigationController alloc] initWithRootViewController:secondViewController];
[[self navigationController] presentViewController:navigationController animated:YES completion:nil]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-25T03:11:50.907

If you are using storyboard just click on the source view xib, Ctrl+drag to destination (Create Segue), select modal from popup menu.Click on the newly created connection. Add a name for it then in source view controller `[self performSegueWithIdentifier:@"Segue Name" sender:self];`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-25T04:38:41.140

如果您想获得一个按钮以模态方式将您引导到不同的页面，您可以进入情节提要或 xib 文件。控制从该按钮单击到您要转到的视图控制器。然后弹出菜单将为您提供要使用的插座类型的选项。希望这可以帮助

# ios - 核心情节Y轴majorgridline只能落在整数上？

> ID：15058650
> 
> 赞同：0
> 
> 时间：2013-02-25T01:00:31.260
> 
> 标签：ios, objective-c, core-plot

在我的图表中，majorGridLines 适用于整数，但当范围在 3.0 和 0.0 之间时，majorTickLocations 大约有 10 个。刻度位置在正确的位置，IE 大约每 0.3 次，但 majorGridLines 与 Tick 的位置不同，它们只是落在整数 1.0、2.0、3.0 等上。我怎样才能得到 majorGridLines使用非整数并与 tickLocations 保持一致？

代码如下：

```
NSMutableSet *yLabels = [NSMutableSet set];
NSMutableSet *yMajorLocations = [NSMutableSet set];

for (int i=-1; i<numYAxisLabels; i++) {

        id jAsID = [NSNumber numberWithInt:(int)j];
        int jAsInt = [jAsID integerValue];

        CPTAxisLabel *label;
        if(majorIncrement < 1)
            label = [[CPTAxisLabel alloc] initWithText:[NSString stringWithFormat:@"%.1f", j] textStyle:y.labelTextStyle];
        else
            label = [[CPTAxisLabel alloc] initWithText:[NSString stringWithFormat:@"%d", jAsInt] textStyle:y.labelTextStyle];

        NSDecimal location = CPTDecimalFromFloat(j);
        label.tickLocation = location;
        label.offset = -y.majorTickLength - y.labelOffset;

        [yLabels addObject:label];
        [yMajorLocations addObject:jAsID];

        currTopYLabelLocation = j;
        j += majorIncrement;
    }
    y.axisLabels = yLabels;
    y.majorTickLocations = yMajorLocations; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T01:41:46.063

刻度位置由一系列`jAsID`值构建。在问题中给出的代码中，在创建对象`j`之前将其转换为整数值。`NSNumber`

# mysql - 仅当字段为空时才将列复制到另一列

> ID：15058655
> 
> 赞同：0
> 
> 时间：2013-02-25T01:01:33.570
> 
> 标签：mysql, sql, database

我有一个 SQL 问题，对某些人来说可能很基础，但让我感到困惑。下面是一个表格示例：

```
buu_properties_products (price, years, area, covered_area) 
```

现在我想将`area`列字段复制到`covered_area`字段中，但前提是该`covered_area`字段为空。

我在这个表中有近 1000 种产品，我需要更新这些列，而不需要在它们存在时删除covered_area 值。

我正在运行 MySQL 5.1

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-25T08:18:06.193

取决于“空”是什么意思。如果这意味着`NULL`：

```
UPDATE buu_properties_products
SET covered_area = area
WHERE covered_area IS NULL 
```

如果它意味着一个空字符串：

```
UPDATE buu_properties_products
SET covered_area = area
WHERE covered_area = '' 
```

如果它意味着：

```
UPDATE buu_properties_products
SET covered_area = area
WHERE covered_area IS NULL OR covered_area = '' 
```

# java - 如何序列化包含 BufferedImages 的对象

> ID：15058663
> 
> 赞同：19
> 
> 时间：2013-02-25T01:02:37.827
> 
> 标签：java, image, serialization, deserialization, bufferedimage

我正在尝试在 java 中创建一个简单的图像编辑程序。我创建了一个`ImageCanvas`对象，其中包含有关正在编辑的图像的所有信息（一些基本属性、正在应用的效果列表、`BufferedImage`图层列表等），我想要一种简单的方法将其保存到磁盘上，以便它可以后来又开了。

我认为使用 Java 的默认`Serializable`接口可能正是我想要的，我可以将整个对象写入文件并稍后再次将其读回内存。但是，`ImageCanvas`包括`ArrayList<BufferedImage>`, 和`BufferedImage`'s 是不可序列化的（其他都是可序列化的）。

我知道可以覆盖`writeObject()`and`readObject()`方法，但我从来没有这样做过，我想知道是否有任何简单的方法可以让 Java 序列化其他所有内容并有一些自定义方式来读取/写入`BufferedImage`磁盘？还是有其他方法可以轻松地将整个`ImageCanvas`对象写入我忽略的磁盘？最终我可能会实现我自己的自定义图像文件类型，但现在我想要一种快速简便的方法来在我测试时临时保存文件（`ImageCanvas`类会发生很大变化，所以我不想继续更新我的在我完成之前自定义文件类型）。

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2013-02-28T05:09:58.080

使您的`ArrayList<BufferedImage>`瞬态，并实现自定义`writeObject()`方法。在此，为您的 ImageCanvas 编写常规数据，然后使用 PNG 格式手动写出图像的字节数据。

```
class ImageCanvas implements Serializable {
    transient List<BufferedImage> images;

    private void writeObject(ObjectOutputStream out) throws IOException {
        out.defaultWriteObject();
        out.writeInt(images.size()); // how many images are serialized?
        for (BufferedImage eachImage : images) {
            ImageIO.write(eachImage, "png", out); // png is lossless
        }
    }

    private void readObject(ObjectInputStream in) throws IOException, ClassNotFoundException {
        in.defaultReadObject();
        final int imageCount = in.readInt();
        images = new ArrayList<BufferedImage>(imageCount);
        for (int i=0; i<imageCount; i++) {
            images.add(ImageIO.read(in));
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T01:36:22.190

序列化非常简单，因为它保留了静态数据。否则，您在序列化方法系列中的读/写对象的正确位置。想想什么是“BufferedImage”。它是一个缓冲的流式实现。要序列化，必须将数据刷新到像 byte[] 数组这样的静态对象，然后可以将对象序列化/反序列化到 BufferedImage 中/从 BufferedImage 中取出，以便缓冲流现在进/出该 byte[] 数组.

# java - 如何删除光标（Android SDK）中的重复行？

> ID：15058664
> 
> 赞同：2
> 
> 时间：2013-02-25T01:03:42.060
> 
> 标签：java, android, cursor, duplicate-removal, android-cursor

目前，我已经进行了 3 个查询（产生 3 个游标），然后我使用`MergeCursor`该类合并了游标。但是，这导致光标重复，我似乎找不到删除它们的方法？解决此问题的理想方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T01:20:33.307

游标是绑定到 ResultSet 的对象，而不是其中的数据。如果三个结果集具有相同的键，则需要获取它们的主键以对行进行重复数据删除 - Cursor 实现不提供此功能。有几个选项，这里命名了两个：

1.  正如之前的评论中所避开的那样 - 在服务器端执行此操作并返回连接的结果。例如：从客户端发送基本查询，让服务器启动三个查询并合并结果 - 尽管数据库在集合操作中表现出色，并且以编程方式执行此操作几乎没有性能提升。
2.  启动一个任务，该任务依次运行三个查询并完成获取行的工作，只返回不同的键集。

# php - 棘手的foreach循环......如何？

> ID：15058667
> 
> 赞同：0
> 
> 时间：2013-02-25T01:04:22.633
> 
> 标签：php

我正在遍历一个电子表格，其中可能包含如下信息：

```
To                  From
LAX/SAF/ORL         ORL/SAF
LAX/DUB             DUB/SAF
SAF/LON             LON/BNE/SYD 
```

我需要遍历这些信息，所以我得到如下信息：

```
Result 1: Lax -> Orl
Result 2: Lax -> Saf
Result 3: Saf -> Orl
Result 4: Saf -> Saf
Result 5: Orl -> Orl
Result 6: Orl -> Saf 
```

这是我到目前为止所拥有的：

```
$row = "LAX/SAF/ORL";
$row2 = "ORL/SFO";
preg_match_all('([A-Za-z]+)', $row, $matches);
foreach ($matches[0] as $location_to){
    echo $location_to . " -> " . $row2 . "<br />"; //currently doesn't loop through row2
} 
```

除了两组数据，我怎么能做到这一点？我目前被困在如何......像上面一样 foreach 两次以获得我需要的输出。

任何帮助将不胜感激（这需要通过一个循环运行，因为它是电子表格上的一行并且具有其他分配的数据）。

它基本上是一个多行程条目之类的东西。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-25T01:12:39.323

根据您所拥有的，尝试：

```
$row = "LAX/SAF/ORL";
$row2 = "ORL/SFO";
$arow = explode("/", $row);
$arow2 = explode("/", $row2);
foreach($arow as $p1) {
    foreach($arow2 as $p2) {
        echo "$p1 -> $p2 <br>";
    }
} 
```

这将创建您正在寻找的输出类型，因为您已经知道什么`$row`和`$row2`是^^

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T01:06:44.890

1.  如果可以的话，它的电子表格将其读取为 CSV
2.  为什么是正则表达式？只是爆炸`/`

然后是这样的：

```
$file = fopen('/path/to/file.csv', 'r');
// skip headers
fseek($file, 1);

while($row = fgetcsv($file)) {
   $from = explode('/', $row[0]);
   $to = explode('/', $row[1]);

   foreach($from as $i => $sender) {
      $recipient = isset($to[$i]) ? $to[$i] : 'undefined';
      echo "$sender -> $recipient";
   }  
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-25T01:12:34.547

你实际上已经很接近了。我会这样做：

```
$row = "LAX/SAF/ORL";
$row2 = "ORL/SFO";
$from = explode('/', $row);
$to   = explode('/', $row2);

foreach ($from as $f){
    foreach($to as $t) {
        echo $f . " -> " . $t . "<br />";
    }
} 
```

编辑：您可能想要添加一个检查`if ($f == $t)`，因为 ORL -> ORL 并没有真正的意义。:)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-25T01:12:20.257

您可以使用嵌套的 foreach 并循环 $row2 匹配项，如下所示：

```
$row = "LAX/SAF/ORL";
$row2 = "ORL/SFO";
$to_locations = explode('/', $row);
$from_locations = explode('/', $row2);
foreach ($to_locations as $to){
  foreach ($from_locations as $from) {
    echo $to . " -> " . $from . "<br />";
  }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-25T01:13:26.443

试试这个：

```
$row = "LAX/SAF/ORL";
$row2 = "ORL/SFO";

$rows = array($row, $row2);

foreach ($rows as $row) {
    preg_match_all('([A-Za-z]+)', $row, $matches);
    foreach ($matches[0] as $location_to){
        echo $location_to . " -> " . $row2 . "<br />"; //currently doesn't loop through row2
    }
} 
```

基本上，您拥有的代码将为`$rows`数组中的每个元素执行。

将来，如果您有更多行（即文件的每一行），只需将它们添加到`$rows`数组中，代码就会遍历每一行。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-25T01:13:58.620

```
$row = "LAX/SAF/ORL";
$row2 = "ORL/SFO";
$first_array = explode('/', $row);
$second_array = explode('/', $row2);
$result_array = array();
$assoc_array = array();
foreach($first_array as $value1) {
  foreach($second_array as $value2) {
    $assoc_array[$value1] = $value2;
    $result_array[] = $value1.' -> '.$value2;
  }
} 
```

如果您愿意，这将导致您拥有一个关联的数组，或者一个具有 LAX -> ORL 形式的字符串的数组

# android - 如何为 ProgressBar 的 setMax() 方法使用 OnActivityResult() 方法

> ID：15058675
> 
> 赞同：2
> 
> 时间：2013-02-25T01:05:55.003
> 
> 标签：android, progress-bar

1.  我有一个简单设计并放置在 MainActivity 中的进度条。
2.  我有第二个活动来设置 ProgressBar 的最大值

我的问题是；如何使用`public void onActivityResult(int requestCode, int resultCode, Intent data)`ProgressBar 的 setMax() 方法的返回值？

```
package com.example.example;

import android.os.Bundle;
import android.app.Activity;
import android.content.Intent;
import android.view.Menu;
import android.view.View;
import android.widget.Button;
import android.widget.ProgressBar;
import android.widget.Toast;

public class MainActivity extends Activity {
final int request_Code = 1;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    /*I want to use value cames from onActivityResult() for setMax()
             instead of default entered value -> 100 */

         ProgressBar calorieBar = (ProgressBar) findViewById(R.id.progress1);
         calorieBar.setMax(100);
         calorieBar.setProgress(70);

    //Go to another Activity and start
    Button newPlan  = (Button) findViewById(R.id.newPlanBTN);
    newPlan.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View arg0) {
            Intent i = new Intent("com.hakkikonu.dailycalorie.NEWPLAN");//new_plan activity
            startActivityForResult(i, 1);
            onResume();
        }
    });

}//end of onCreate

//Sets Calorie value Comes from NewPlan.java and makes it Toast to show user
 public void onActivityResult(int requestCode, int resultCode, Intent data)
    {
        if (requestCode == request_Code) {
            if (resultCode == RESULT_OK) {                
                Toast.makeText(this,"Adjusted to "+data.getData().toString(), 
                    Toast.LENGTH_LONG).show();

               // Do somethings here: get data and convert it to integer

            }            
        }
    }

 } 
```

## 新计划.Java

```
package com.hakkikonu.dailycalorie;

import com.hakkikonu.dailycalorie.R.layout;

import android.app.Activity;
import android.content.Intent;
import android.graphics.Color;
import android.net.Uri;
import android.os.Bundle;
import android.view.View;
import android.widget.Button;
import android.widget.EditText;
import android.widget.SeekBar;
import android.widget.TextView;

public class NewPlan extends Activity{

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.new_plan);

    final TextView seekBarValue = (TextView)findViewById(R.id.seekBarValue);

    //Plan Button Click Listener
    final Button setPlanButton = (Button)findViewById(R.id.setPlanBTN);
    setPlanButton.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View arg0) {

             setPlanButton.setBackgroundColor(Color.YELLOW);

             Intent calorieVal = new Intent();

                    //---set the data to pass back---
                    calorieVal.setData(Uri.parse(
                    seekBarValue.getText().toString()));                           
                    setResult(RESULT_OK, calorieVal);

                    //---closes the activity---
                    finish(); 

        }
    });//end SetPlan Button Listener

    SeekBar seekBar = (SeekBar)findViewById(R.id.seekBar);
    seekBar.setProgress(0);             //initial value of seekBar
    seekBar.incrementProgressBy(50);    //increment step
    seekBar.setMax(5000);               //maximum possible calory for a day.

    //seekBar Listener
    seekBar.setOnSeekBarChangeListener(new SeekBar.OnSeekBarChangeListener(){

        @Override
        public void onProgressChanged(SeekBar seekBar, int progress, boolean fromUser) {

            //text view @ top of the seekBar

            progress = progress / 50;
            progress = progress * 50;
            if(progress == 0){
                seekBarValue.setText(String.valueOf(progress)+" Calorie");
            }

            else{
                seekBarValue.setText(String.valueOf(progress)+" Calories");

            }

        }

        @Override
        public void onStartTrackingTouch(SeekBar arg0) {
            //Don't delete

        }

        @Override
        public void onStopTrackingTouch(SeekBar arg0) {
            // Don't delete

        }

    });

}

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T01:10:27.287

假设您的*第二个*Activity 将 a`int`作为其额外内容，并`"YOUR_KEY"`在其 result 中添加一个键`Intent`，只需将进度条的最大值设置为该`int`额外内容：

```
//Sets Calorie value Comes from NewPlan.java and makes it Toast to show user
 public void onActivityResult(int requestCode, int resultCode, Intent data)
    {
        if (requestCode == request_Code) {
            if (resultCode == RESULT_OK) {                
                Toast.makeText(this,"Adjusted to "+data.getData().toString(), 
                    Toast.LENGTH_LONG).show();

               ((ProgressBar) findViewById(R.id.progress1)).setMax (data.getIntExtra ("YOUR_KEY", 0));

            }            
        }
    } 
```

为了简单起见（我想说）：

```
public class NewPlan extends Activity{
private int myProgress = 0;//add this line 
```

然后在更改的侦听器中：

```
 progress = progress / 50;
 progress = progress * 50;
 myProgress = progress;//add this line 
```

然后设置数据，更改为：

```
Intent calorieVal = new Intent();

calorieVal.putExtra ("YOUR_KEY", myProgress);
setResult(RESULT_OK, calorieVal);

//---closes the activity---
finish(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T01:14:43.940

这是您在 NEWPLAN Activity 中设置结果意图的方式：

```
Intent intent = new Intent();
intent.putExtra("myInt", 12);
setResult(Activity.RESULT_OK, intent);

finish(); 
```

然后在 MainActivity 中，您使用以下方法获取该数据：

```
public void onActivityResult(int requestCode, int resultCode, Intent data) {
     if (requestCode == yourRequestCode && RESULT_OK) {                
         int myInt = data.getIntExtra("myInt", 0);
         // do more if you wish
     }
 } 
```

# jquery - 是什么导致了这个位置的变化？

> ID：15058676
> 
> 赞同：0
> 
> 时间：2013-02-25T01:06:16.810
> 
> 标签：jquery

感谢堆栈溢出的一些帮助，我设法让这个脚本工作得很好：

```
var $count = 4;
var $row = 10;

function across() {
    var $active = $('#slideshow .active .current');
    var $next = $active.next();

    $next.addClass('current');
    $active.animate({ left: '+=100px' }, 800, 'swing').removeClass('current');
    $row += 10;
    $count--;

    if ($count == 0) { 
        $count = 4;
        $row = 10;
        down();
        $($active).stop();
        $('#slideshow .active .bed').animate({ left: '-=100px' }, 1);
        $('.div .bed:first-child').addClass('current');

    }
}
function down() {
    var $active = $('#slideshow .active');
    var $next = $active.next();

    $next.fadeIn("slow").addClass('active');
    $active.fadeOut("slow").removeClass('active');

    if (!$next.length) {
        $("#slideshow .div:first-child").fadeIn("slow").addClass('active');
    }
}
$(function() {
  setInterval(across, 1000);
}); 
```

[http://jsfiddle.net/QSfgG/30/](http://jsfiddle.net/QSfgG/30/)

但有一个问题。

在绿色的父方格上，橙色、紫色和灰色的 div 向右滑动，而在其他方格上，div 仅勉强向左滑动。

这与脚本第 16 行的 down() 函数有关。当它被取出时，所有的 div 都以相同的量滑动。但是，我不能省略 down()，因为我需要先调用它

```
$('#slideshow .active .bed').animate({ left: '-=100px' }, 1);
$('.div .bed:first-child').addClass('current'); 
```

在第 18 行和第 19 行。这样用户就不会看到 div 快速回到原来的位置。澄清一下，我需要橙色、紫色和灰色的 div 以相同的量滑动，并且我需要父 div 在用户看到 div 迅速回到其原始位置之前淡出。

谢谢你的时间！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T01:26:28.990

第一次（绿色）床在左边-20px，所以你的+=100px将它们向右移动100px，然后你将活动div更改为下一个，然后你将床移动到-=100px，这些床是-20px，您将它们向左移动 120px，然后 +100 将它们移动到左侧 -20px

如果你把 $('#slideshow .active .bed').animate({ left: '-=100px' }, 1); 在 down() 调用的正上方，你可以修复它（也许你也想移动上面的 $($active).stop() 调用）

[http://jsfiddle.net/QSfgG/35/](http://jsfiddle.net/QSfgG/35/)

```
if ($count == 0) { 
    $count = 4;
    $row = 10;
    $('#slideshow .active .bed').animate({ left: '-=100px' }, 1);
    down();
    $($active).stop();
    $('.div .bed:first-child').addClass('current');
} 
```

# c - DDD 运行时 (?) 错误

> ID：15058677
> 
> 赞同：0
> 
> 时间：2013-02-25T01:06:28.347
> 
> 标签：c, debugging, runtime-error, ddd-debugger

当我使用 DDD 调试我编写的一些 C 代码时，当我尝试执行其中是 malloc 的行时，它出现了这个奇怪的错误

> > $/BRIS/src/malloc.c : 没有这样的文件或目录
> > 
> > $/BRIS/src/ 是我编译的 C 文件所在的位置

它甚至与 printf 等其他基本 C 函数一起出现；奇怪的是，我之前用 DDD 运行了该代码，但没有收到任何错误。

你知道发生了什么吗？即使我重新打开 DDD，这些错误也会继续弹出

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T13:29:20.753

问题已解决：安装了 valgrind 并以某种方式与 DDD 交互不良

# php - elseif 块中的代码在不应该的情况下部分运行

> ID：15058678
> 
> 赞同：-1
> 
> 时间：2013-02-25T01:06:37.187
> 
> 标签：php, if-statement

好的，我有我网站的注册表单。

当出现错误时，会弹出一个带有错误的框。该框由一个 html div、一个 h2 标头和 php 组成，以回显我的错误。

如果我点击提交，它会显示应有的错误，但无论如何都会显示标题和 div。

我不明白为什么。

这是回显错误的代码块。

```
} else if (!empty($errors)){
    echo '<div class="msg_module">';
    echo '<h2>Registration Errors:</h2>';
    echo $General->outputErrors($errors);
    echo '</div>';
} 
```

谢谢大家！

编辑：我应该提到 $errors 是一个数组。

编辑：我的互联网又回来了，这里是 outputErrors 函数：

```
public function outputErrors($errors = ''){

        if(is_array($errors)){
            // handle for passed array
            foreach ($errors as $error){
                if(is_array($error)){
                    general::outputErrors($error);
                } else{
                general::$errStr.= ($error != '')?'<li>'.$error.'</li>':'';
                }
            }
        } else if($errors != ''){
        // handle for passed string
        general::$errStr = $errors;
        }
    return '<ul id="error_list">'.general::$errStr.'</ul>';
 }//outputErrors 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T01:16:07.463

使用`var_dump($errors);`，您可能会看到该变量不为空。

根据您的评论，我假设变量是数组**类型**

阅读[空函数的 PHP 手册，](http://www.php.net/empty)您将看到它对**空数组**（不包含任何元素的数组）返回 true

现在请记住，如果变量是字符串**类型**，那么大多数字符串都被认为是非空的。

# asp.net - 如何在 asp.net 应用程序中找到 i/o 瓶颈

> ID：15058687
> 
> 赞同：6
> 
> 时间：2013-02-25T01:08:03.457
> 
> 标签：asp.net, iis, windbg, performance

我们有一个高流量的网站，它产生了大量的 I/O。在 10 分钟内，它已经读取了超过 10 GB 的数据（在任务管理器中看到有问题的 w3wp）。对于内存和应用程序挂起，我一直在成功使用 WinDbg。但我不知道如何在负责最高 I/O 的进程中找到对象/方法。

这甚至可能吗？

**编辑** 问题是：有没有办法在 .NET 程序集中分析 I/O 操作，比如：按最高磁盘 I/O 排序的线程列表（或类似的东西可以帮助我在哪里查看）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-25T01:19:14.433

**[ANTS 性能分析器](http://www.red-gate.com/products/dotnet-development/ants-performance-profiler/)**

我已经使用这个工具取得了巨大的成功 - 处理查找导致大容量网络场上约 512GB 内存在 5-10 分钟内被占用的特定指令。听起来和你的情况非常相似。

现在，现实一点——它不会神奇地解决你的问题。它仍然需要大量的设置、彻底的分析和侦查工作。但是这个工具确实把问题从“几乎无法解决”变成了“几天之内就能解决”。

**更新：**

正如我在评论中提到的（Ben Emmett 回应），我们可以使用 ANTS 来监控内存、文件系统句柄——几乎任何资源消耗，并深入调用堆栈以查看特定例程的效果。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T16:07:04.253

我想出了这个工具[AppDynamics Lite](http://www.appdynamics.com/blog/tag/dot-net/)，它以可视化的方式显示您的应用程序调用成本和性能。它可能会帮助您找出哪些函数正在执行最昂贵的 IO 操作。

报价；

> 通过响应时间、吞吐量、异常率和垃圾收集时间等关键指标以及 CPU、内存和磁盘 I/O 等关键系统资源来了解 CLR 的运行状况。

值得一试，因为它可以试用/免费 30 天。希望能帮助到你。Ps：我不以任何方式隶属于 AppDynamics。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-07T06:48:19.017

您可以使用 Windows 8 中的（免费）[Windows Performance Toolkit](http://geekswithblogs.net/akraus1/archive/2012/12/19/151604.aspx)，它也可以在 Windows Vista 及更高版本上运行。在那里，您可以打开系统范围的分析，以立即查看所有进程中发生了什么。无需仪器。只需重新启动一次即可设置由 WPRUI.exe 自动完成的神秘注册表项。

使用 XPerf，您可以启用 IO Init 堆栈遍历，以便为每个启动的 IO 获取调用堆栈。唯一的问题是 64 位进程的堆栈将被破坏，这意味着您只会看到代码的 BCL 方法上方的第一个方法，因为操作系统的堆栈遍历功能中存在 Windows 7 错误。

一种解决方法是对您的程序集进行 Ngen 或移动到 Server 2012 或切换到 x86 进行分析以查看更深入的调用堆栈。

即使没有任何调用堆栈和文件名以及硬盘使用了多长时间，您也会看到所有文件 IO 和 CPU 活动。这应该会给你很好的信息，你的应用程序的哪一部分导致了磁盘 IO。即使没有完整的堆栈，您也应该能够从部分调用堆栈中查明您的问题。

该工具将为您提供比任何商用分析器更多的洞察力，但您需要学习如何使用它。由于调用堆栈不会在您的代码或用户模式中结束，而是在内核中，您还可以确定例如病毒扫描程序是否导致显着的 IO 延迟。但是你需要知道你的处理器是如何工作的。这个工具集最初是针对内核开发者的，它解释了为什么你会看到这么多无用的列。

在下图中，您可以看到堆叠的文件 IO 和 CPU 消耗。当您在磁盘 IO 图表中选择高 IO 文件时，它将在 CPU 消耗中突出显示在 IO 处于活动状态时同时进行的所有相关调用堆栈。通过这种方式，您可以直接从 IO 导航到可能被阻塞的线程。

![在此处输入图像描述](../Images/09c1ae9de8a9c45108b4c671d96395bc.png)

# node.js - 在jadejs中使用if else来创建主体颜色或背景图像

> ID：15058690
> 
> 赞同：0
> 
> 时间：2013-02-25T01:08:46.180
> 
> 标签：node.js, express, pug

你好我使用jade和nodejs和express来制作网页，在这种情况下我想使用if语句来创建一个具有不同风格的主体......

这是代码

```
-if(image && image.length)
    body(style="background-image:url(#{image})")
-if(color && color.length)
    body(style="background-color:#{color}")

    h2 hello world 
```

如果背景存在，则使用背景图像

如果存在颜色，则使用背景颜色

但问题是当图像存在时，hello world 或所有缩进正文的代码都不起作用，如果我在颜色存在时将图像上色，其余代码为空......

我该如何解决这个问题

编辑2：

我在两个语句中都使用 include 修补了这个问题

```
-if(image && image.length)
    body(style="background-image:url(#{image})")
    include restofcode
-if(color && color.length)
    body(style="background-color:#{color}")
    include restofcode 
```

restofcode.jade

```
h2 hello world 
```

一切正常

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-25T01:12:08.877

试试这个，而不是不能正确缩进：

```
- var myStyle = ''
- if(image && image.length) 
  - myStyle += "background-image:url(" + image + ");";
- if(color && color.length) 
  - myStyle += "background-color:" + color + ";";
body(style=myStyle)
    h2 Hello World 
```

# java - 拖动输入的信息

> ID：15058691
> 
> 赞同：0
> 
> 时间：2013-02-25T01:09:02.283
> 
> 标签：java, android, view, drag-and-drop

当我*拖动*我的`View`时，我希望能够看到拖动进入时我*拖动*到的*视图*。我知道我可以通过使用来获得我正在拖动的东西*`View`*

 *```
View draggedView = (View) event.getLocalState(); 
```

有没有办法获得`View`拖动*输入*的对象？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-11T16:45:44.757

没有简单的方法可以做到这一点。我能够通过在 for 循环中浏览我的布局中的视图并通过检查相等性找到视图来获得视图。*

# javascript - 修改jstree中创建节点的DOM

> ID：15058694
> 
> 赞同：1
> 
> 时间：2013-02-25T01:09:42.737
> 
> 标签：javascript, jstree

我想修改创建节点时创建的 DOM jstree。以编程方式创建节点时，jstree 创建 `<li><a ../></li>`. 我想将其包装成 a`<span><a ../> more content</span>`但我不知道如何自定义 jstree 创建的 DOM。

初始 jstree 的创建很简单（带有一些虚拟数据）：

```
$("#tree").jstree({
        "json_data": {
            "data": {
                "data": "TE-CON",
                "metadata": {
                    "id": 23
                },
                "children": [
                    {
                        "data": "Node 1",
                        "children": [ "Node1.1", "Node1.2" ]
                    },
                    "TE-CON"
                ]

            }},
        "plugins": [ "themes", "json_data", "grid" ]
    }); 
```

这将创建一个 DOM：

```
<li class="jstree-last jstree-open">
<ins class="jstree-icon">&nbsp;</ins>
    <a href="#"><ins class="jstree-icon"></ins>TE-CON</a>

    <ul style="">
        <li class="jstree-open">
            etc... 
```

而不是`<a href="#"><ins class="jstree-icon"></ins>TE-CON</a>`创建的，我想`<span><a href="#"><ins class="jstree-icon"></ins>TE-CON</a></span>`在 span 块中添加一些额外的 HTML。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-03T16:39:16.387

您可以采用与您提到的相同的方式如果您从服务器静态创建了一个元素。但是，如果您已动态创建元素，则必须在创建节点后执行操作，如下所示：

```
var node = $.jstree._reference('#demo1').create_node(
 node, 'last', data, false, false
);
var newnode = node.children().last();

node.append('<input type="text" ></input>'); 
```

还有另一种方法是按照此链接使用 html_titles [https://stackoverflow.com/a/5059969/2547372](https://stackoverflow.com/a/5059969/2547372)

# c - 带有赋值的c结构语法？

> ID：15058696
> 
> 赞同：0
> 
> 时间：2013-02-25T01:09:52.340
> 
> 标签：c, struct

我正试图了解结构。理论上似乎还可以（例如非常简洁明了的解释： http: [//www.stanford.edu/class/cs110/hws/structs.html](http://www.stanford.edu/class/cs110/hws/structs.html)）

但是后来我在我正在弄乱的代码中找到了这个：

```
static struct pci_driver ik220_driver = {
    name:           DRV_NAME,
    id_table:       ik220_tbl,
    probe:          ik220_init_one,
    remove:         ik220_remove_one,
}; 
```

运营商在这里做什么`=`？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-25T01:12:17.943

用指定的字段值初始化`=`一个`pci_driver`名为的 struct 类型。`ik220_driver`

您只是分配一个变量，但它是一种复合类型。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-25T01:14:25.733

分部分进行。 `struct pci_driver`是一种类型。`ik220_driver`是一个变量名。`static`设置变量范围，所以其余的：`= {...}`指定变量的值（在这种情况下恰好是一个结构）。

# java - 如何将用户锁定在主目录中

> ID：15058697
> 
> 赞同：0
> 
> 时间：2013-02-25T01:09:52.397
> 
> 标签：java, android, list, directory

我在 Environment.getExternalStorage() 中创建了一个名为“/My Webs”的目录。当应用程序启动时，它将目录文件和子目录的内容加载到一个列表中，我有一个按钮可以转到父目录，但我不希望用户高于根目录 /My Webs 目录。

这是我尝试过的：

```
 private void upOneLevel(){
                if(this.currentDirectory.getParent() != null || this.currentDirectory.getParent() != Environment.getExternalStorageDirectory().getPath() + "My Webs")
                        this.browseTo(this.currentDirectory.getParentFile());
        }

    private void browseTo(final File aDirectory){
            // On relative we display the full path in the title.
            if(this.displayMode == DISPLAYMODE.RELATIVE)
                    this.setTitle(aDirectory.getAbsolutePath() + " :: " +
                                    getString(R.string.app_name));
            if (aDirectory.isDirectory()){
                    this.currentDirectory = aDirectory;
                    fill(aDirectory.listFiles());
            }else{
                    openFile(aDirectory);
            }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T04:44:42.233

你的问题在这里：

```
this.currentDirectory.getParent() != Environment.getExternalStorageDirectory().getPath() + "My Webs" 
```

这不是您在 Java 中比较字符串的方式。相反，使用`equals()`例如：

```
!this.currentDirectory.getParent().equals( Environment.getExternalStorageDirectory().getPath() + "My Webs" ) 
```

# php - 用 PHP 调用 Ruby 脚本

> ID：15058698
> 
> 赞同：2
> 
> 时间：2013-02-25T01:09:54.877
> 
> 标签：php, ruby

公平警告；我什至不知道Ruby。我只是将我收到的一些脚本拼凑在一起，并希望它们能一起工作。

***背景***

作为 svn 管理员，我正在使用 Ruby 自动执行多项任务，而我尝试执行的任务之一是制作一个可以自动创建存储库的 Web 表单。

我正在运行的脚本总共大约 100-200 行，包括包含和类似的东西。我确信代码还会有其他问题，但目前，它遇到了一个问题。

Ruby 脚本本身可以工作。我的问题是当我尝试从不同目录中的 PHP 脚本调用它时它不起作用。

目录结构是这样的：

```
Home
    .www-docs
        makeRepo.php
    svn
        createNewRepo.php
        migrateOne.php // This has yet to cause a problem
        RepoUtils.rb // Not currently causing a problem 
```

***问题***

我遇到的确切问题是 Ruby 脚本停止执行（并且不会`echo`在代码中的特定点打印我可以在 PHP 中的错误消息。

我调用脚本如下：

```
chdir("../svn");
echo exec("ruby createNewRepo.rb $name1 $name2 $num") 
```

所以，它肯定是在调用脚本。我在整个脚本中放置了打印点，所以我知道它停在这里：

```
print "Point 1"
acl = File.new(@@aclfile, "a")
print "Point 2" 
```

`@@aclfile`是绝对路径，而不是相对路径，所以我认为这不是问题所在。

上面的代码将最终打印`Point 1`（之后也没有任何内容）。

我究竟做错了什么？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-25T01:35:23.080

如果它在您手动运行时有效，但不是通过 PHP 脚本，我认为您遇到了权限问题。如果运行 Web 进程的用户无权访问绝对路径（或路径不存在），您将遇到错误：

```
$ irb
1.8.7 :001 > File.new("/this/doesn't/exist", "a")
Errno::ENOENT: No such file or directory - /this/doesn't/exist
    from (irb):1:in `initialize'
    from (irb):1:in `new'
    from (irb):1
1.8.7 :002 > File.new("/etc/passwd", "a")
Errno::EACCES: Permission denied - /etc/passwd
    from (irb):2:in `initialize'
    from (irb):2:in `new'
    from (irb):2
1.8.7 :003 > 
```

检查您对目标目录的权限并确定 Web 用户是否有权访问它。出于安全原因，我不会告诉您更改 Web 用户的权限或更改目标目录的权限。你必须自己打电话。

# function - hiberante HQL 无法识别 oracle 替换功能

> ID：15058699
> 
> 赞同：0
> 
> 时间：2013-02-25T01:09:59.230
> 
> 标签：function, replace, hql

我有一堂课

```
 class  A  {
            String aField;
            String bField;
     }

       class  B {
             A   classAField
     } 
```

我使用限制来构建 HQL

```
 Restrictions.like(propertyName, obj); 
```

我用 oracle sql 函数括起来的 propertyName 以删除所有空格，所以 propertyName 是

```
 replace(classAField.aField,' ') 
```

我收到以下错误

```
 could not resolve property: replace(classAField of: B; nested exception is org.hibernate.QueryException: could not resolve property: replace(classAField of: B 
```

hiberante 无法识别 pl/sql 函数。我使用 oracle 10g 方言

```
<prop key="hibernate.dialect">org.hibernate.dialect.Oracle10gDialect</prop>

is there a work around here? 
```

非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T01:39:04.130

为此，您可能想要[`Restrictions.sqlRestriction`](http://docs.jboss.org/hibernate/orm/3.6/javadocs/org/hibernate/criterion/Restrictions.html#sqlRestriction%28java.lang.String%29).

让它在你的特定情况下工作可能需要一些工作，但使用它你通常可以解决这样的困难。

将它用于特定实体的特定字段不会强制您在任何地方使用它。它可以与其他限制混合使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T04:43:45.573

好的，Criterion 查询不识别函数，除了使用 sqlRestriction

# r - 在 R 中重新排列数据帧

> ID：15058706
> 
> 赞同：2
> 
> 时间：2013-02-25T01:11:59.340
> 
> 标签：r, matrix, dataframe, reshape

我正在尝试（有效地）重新排列 R 中的数据框。

我的数据是从两个参与者群体（1 或 0，即疾病组和对照组）的四个不同实验中收集的实验数据。

示例数据框：

```
Subject type    Experiment 1    Experiment 2    Experiment 3    Experiment 4
           0             4.6             2.5             1.4             5.3
           0             4.7             2.4             1.8             5.1
           1             3.5             1.2             5.6             7.5
           1             3.8             1.7             6.2             8.1 
```

我想重新排列我的数据框，使其结构如下（原因是，当它们在 R 中的结构如下时，它使我更容易在数据上运行函数）：

```
Subject type    Experiment    Measure
           0             1        4.6
           0             2        2.5
           0             3        1.4
           0             4        5.3
           0             1        4.7
           0             2        2.4
           0             3        1.8
           0             4        5.1
           1             1        3.5
           1             2        1.2
           1             3        5.6
           1             4        7.5
           1             1        3.8
           1             2        1.7
           1             3        6.2
           1             4        8.1 
```

如您所见，发生的情况是每个主题现在占据了四行；现在，每一行都与单个测量有关，而不是单个主题。这（至少现在）对我来说更方便插入 R 函数。也许及时我会想出一种完全跳过这一步的方法，但我是 R 新手，这似乎是最好的做事方式。

无论如何-问题是，进行此数据框转换的最有效方法是什么？目前我正在这样做：

```
# Input dframe1
dframe1 <- structure(list(subject_type = c(0L, 0L, 1L, 1L), experiment_1 = c(4.6, 
4.7, 3.5, 3.8), experiment_2 = c(2.5, 2.4, 1.2, 1.7), experiment_3 = c(1.4, 
1.8, 5.6, 6.2), experiment_4 = c(5.3, 5.1, 7.5, 8.1)), .Names = c("subject_type", 
"experiment_1", "experiment_2", "experiment_3", "experiment_4"
), class = "data.frame", row.names = c(NA, -4L))

# Create a matrix
temporary_matrix <- matrix(ncol=3, nrow=nrow(dframe1) * 4)
colnames(temporary_matrix) <- c("subject_type","experiment","measure")

# Rearrange dframe1 so that a different measure is in each column
for(i in 1:nrow(dframe1)) {
  temporary_matrix[i*4-3,"subject_type"] <- dframe1$subject_type[i]
  temporary_matrix[i*4-3,"experiment"] <- 1
  temporary_matrix[i*4-3,"measure"] <- dframe1$experiment_1[i]
  temporary_matrix[i*4-2,"subject_type"] <- dframe1$subject_type[i]
  temporary_matrix[i*4-2,"experiment"] <- 2
  temporary_matrix[i*4-2,"measure"] <- dframe1$experiment_2[i]
  temporary_matrix[i*4-1,"subject_type"] <- dframe1$subject_type[i]
  temporary_matrix[i*4-1,"experiment"] <- 3
  temporary_matrix[i*4-1,"measure"] <- dframe1$experiment_3[i]
  temporary_matrix[i*4-0,"subject_type"] <- dframe1$subject_type[i]
  temporary_matrix[i*4-0,"experiment"] <- 4
  temporary_matrix[i*4-0,"measure"] <- dframe1$experiment_4[i]
}

# Convert matrix to a data frame
dframe2 <- data.frame(temporary_matrix)

# NOTE: For some reason, this has to be converted back into a double (at some point above it becomes a factor)
dframe2$measure <- as.double(as.character(dframe2$measure)) 
```

*当然*有更好的方法来做到这一点？！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-25T01:23:44.730

使用该`reshape2`软件包，这非常简单。

```
library(reshape2)

# assuming your data.frame is called `dat`
melt(dat, id.vars=c("Subject type")) 
```

* * *

如果你愿意，你可以让它变得更漂亮：

```
newdat <- melt(dat, id.vars=c("Subject type"), variable.name="Experiment", value.name="Measure")

# remove "experiment " from the names, and convert to numeric
newdat$Experiment <- as.numeric(gsub("Experiment\\s*", "", as.character(newdat$Experiment))) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-25T01:54:23.717

基础`reshape`方法：

获取数据：

```
dframe1 <- structure(list(subject_type = c(0L, 0L, 1L, 1L), experiment_1 = c(4.6, 
4.7, 3.5, 3.8), experiment_2 = c(2.5, 2.4, 1.2, 1.7), experiment_3 = c(1.4, 
1.8, 5.6, 6.2), experiment_4 = c(5.3, 5.1, 7.5, 8.1)), .Names = c("subject_type", 
"experiment_1", "experiment_2", "experiment_3", "experiment_4"
), class = "data.frame", row.names = c(NA, -4L)) 
```

将变量设置为堆栈：

```
expandvars <- paste('experiment',1:4,sep='_') 
```

重塑远方！

```
dfrm1res <- reshape(
                   dframe1,
                   idvar="subject_type",
                   varying=list(expandvars),
                   v.names=c("value"),
                   direction="long",
                   new.row.names=1:16
                    ) 
```

结果：

```
> dfrm1res
   subject_type time value
1             0    1   4.6
2             0    1   4.7
3             1    1   3.5
4             1    1   3.8
5             0    2   2.5
6             0    2   2.4
7             1    2   1.2
8             1    2   1.7
9             0    3   1.4
10            0    3   1.8
11            1    3   5.6
12            1    3   6.2
13            0    4   5.3
14            0    4   5.1
15            1    4   7.5
16            1    4   8.1 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-02-25T02:03:29.263

```
data.frame(subject_type=dframe1$subject_type, stack(dframe1[2:5] )  )
   subject_type values          ind
1             0    4.6 experiment_1
2             0    4.7 experiment_1
3             1    3.5 experiment_1
4             1    3.8 experiment_1
5             0    2.5 experiment_2
6             0    2.4 experiment_2
7             1    1.2 experiment_2
8             1    1.7 experiment_2
9             0    1.4 experiment_3
10            0    1.8 experiment_3
11            1    5.6 experiment_3
12            1    6.2 experiment_3
13            0    5.3 experiment_4
14            0    5.1 experiment_4
15            1    7.5 experiment_4
16            1    8.1 experiment_4 
```

或使用 base `reshape`（尽管我的偏好似乎与 thelatemal 的使用不同。）：

```
dframe1$subject=1:4
reshape(dframe1, direction="long", idvar=c("subject_type", "subject"),
                 varying=2:5, sep="_", v.names="exp_value")
 #--------------------------
      subject_type subject time exp_value
0.1.1            0       1    1       4.6
0.2.1            0       2    1       4.7
1.3.1            1       3    1       3.5
1.4.1            1       4    1       3.8
0.1.2            0       1    2       2.5
0.2.2            0       2    2       2.4
1.3.2            1       3    2       1.2
1.4.2            1       4    2       1.7
0.1.3            0       1    3       1.4
0.2.3            0       2    3       1.8
1.3.3            1       3    3       5.6
1.4.3            1       4    3       6.2
0.1.4            0       1    4       5.3
0.2.4            0       2    4       5.1
1.3.4            1       3    4       7.5
1.4.4            1       4    4       8.1 
```

# assembly - MIPS 中的汇编语言使用 MARS 进行乘法和除法

> ID：15058707
> 
> 赞同：0
> 
> 时间：2013-02-25T01:11:59.393
> 
> 标签：assembly, mips

我试图弄清楚为什么它会在 div 之后立即中断。也许我设置 div 错误？或存储错误？另外，我是否称它为打印总距离？

```
li $t0, 284  #distance in miles from OR to WA
li $t1, 387  #6 hours and 27 minutes, 6 hours = 360 minutes +27 minutes, 387 minutes
li $t2, 5280 #5280 feet in a mile
li $t3, 60   #60 seconds in a minutes

main:
    mult $t0, $t2        #gets the total feet in the 284 miles and places it into $t4
    mfhi $t4

    mult $t1, $t3       #gets the total seconds in the 6 hours an 27 minutes
    mfhi $t5

    div $t4, $t5    #divides the total feet by the total seconds
    mflo    $t6
        li $v0, 1
    move $a0, $t6
    syscall

    addi $v0, $zero, 10 ##system call to leave the program
    syscall         ##exits the program 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T01:16:42.930

我没有看到您`$v0`在第一个`syscall`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T01:40:47.700

问题是你除以0。这怎么可能？好吧，您的产品 284*5280=1499520 和 387*60=23220 适合 32 位。`mult`生成 64 位产品，寄存器中的最高有效 32 位和`hi`寄存器中的最低有效 32 位`lo`。所以，`hi`两者之后都是 0 `mults`。然而由于某种原因，您决定使用`hi`而不是`lo`.

此外，奇怪的`main:`是在那些之后`lis`。因此，那些`lis`可能根本没有执行。

# php - 将 ShowInMenus 设置为 false 无效

> ID：15058708
> 
> 赞同：0
> 
> 时间：2013-02-25T01:12:07.703
> 
> 标签：php, menu, silverstripe

我确实设置了我创建的一些页面：

```
 static $defaults = array( 
      'ShowInMenus' => false 
   ); 
```

然而，这似乎有零影响。当我在 CMS 和 SiteTree 中创建新页面时，该页面仍显示在下拉菜单中。

这是 SilverStripe 2.4.x。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T01:54:02.570

此静态用于隐藏前端生成的菜单中的页面。您所描述的听起来像是您希望能够在后端隐藏页面，因此无法创建它们。那是对的吗？如果是这种情况，您应该查看 $allowed_children 静态以及 CanCreate() 方法

# java - Play Framework 2.1 中视图的相对时间

> ID：15058718
> 
> 赞同：1
> 
> 时间：2013-02-25T01:12:54.380
> 
> 标签：java, scala, playframework, playframework-2.0

似乎 Play 框架使用（？）具有`since()`在 Play 1.x 的视图中获取相对时间（如“4 分钟前”）的功能。[这在此处](http://www.playframework.com/documentation/1.2.1/javaextensions#date)被称为日期扩展

但是在 Play 2.1 中，这似乎不再起作用。我明白`value since is not a member of java.util.Date`了......此外，我在网上找不到任何其他参考`since()`（在 Play 2.1 的上下文中）。

是否有处理这种常见情况的正确/默认方式？我觉得我必须错过一些重要的东西，因为这*似乎*不再受支持？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T17:40:43.160

自 2.0 分支开始以来，该`since()`方法不可用。

不是直接的答案，但如果可能的话，我建议为此任务使用 JavaScript 插件，例如：[timeago jQuery 插件](http://timeago.yarp.com/)原因：

*   它不需要在控制器中计算它
*   您可以长时间缓存您的站点（例如在内存中），并且`since`在客户端更新时间时仍会正确显示时间。
*   即使没有页面刷新它也会自动更新（就像这里，在 Stack Overflow 上）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T05:22:09.720

据我所知，这是不可能的（默认情况下在 Play2.1 中）。如果我错了，请纠正我。这是我重新创建它的方法。[正如这里](https://stackoverflow.com/questions/9773212/how-to-implement-pluralize-other-extensions-using-playframework-2-0)提到的，我“拉皮条”了“日期”类：

// 文件 app/views/pimps.scala

```
package views

package object pimps {

  import java.util.Date
  import org.joda.time.DateTime;
  import org.joda.time.Period;

  class PimpedDate(col: Date) {

    def since() = {
      def addS(b: Int) = if (b == 1) "" else "s"

      val now: DateTime = new DateTime();
      val period: Period = new Period(new DateTime(col), now);
      var r: String = "";

      if (period.getYears() > 0) {
        r = period.getYears() + " year" + addS(period.getYears()) + " ago";
      } else if (period.getWeeks() > 0) {
        r = period.getWeeks() + " week" + addS(period.getWeeks()) + " ago";
      } else if (period.getMonths() > 0) {
        r = period.getMonths() + " month" + addS(period.getMonths()) + " ago";
      } else if (period.getDays() > 0) {
        r = period.getDays() + " day" + addS(period.getDays()) + " ago";
      } else if (period.getHours() > 0) {
        r = period.getHours() + " hour" + addS(period.getHours()) + " ago";
      } else if (period.getMinutes() > 0) {
        r = period.getMinutes() + " minute" + addS(period.getMinutes()) + " ago";
      } else {
        r = period.getSeconds() + " second" + addS(period.getSeconds()) + " ago";
      }

      r
    }
  }

  implicit def pimpDate(col: Date) = new PimpedDate(col)
} 
```

然后在我看来，我可以导入以上内容：

```
@import views.pimps._ 
```

然后`since()`像在 Play1 中一样使用

```
<td>@record.created_on.since()</td> 
```

如果有更好的方法可以做到这一点或编写scala代码，请评论/回答......

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-25T11:59:50.200

@Jack 提出了一个很好的答案。

这是他的代码的一个版本，可能很有用，因为它可以在需要时启用一些组合（该`check`函数不是组合，但可以很容易地更改为组合并显示更详细的自值）

```
package object pimps {

  import java.util.Date
  import org.joda.time.DateTime;
  import org.joda.time.Period;

  def step(f:Period => Int)(fi:String):Period => Option[String] = {
    def g(i:Int = 1) = i + " " + fi + (if (i==1) "" else "s") + " ago"

    (p:Period) => {
      f(p) match {
        case 0 => None
        case 1 => Some(g())
        case x => Some(g(x))
      }
    }
  }
  val yearsStep = step(_.getYears)("year")
  val monthsStep = step(_.getMonths)("month")
  val daysStep = step(_.getDays)("day")
  val hoursStep = step(_.getHours)("hour")
  val minutesStep = step(_.getMinutes)("minute")
  val secondsStep = step(_.getSeconds)("second")
  val steps = Seq(yearsStep, monthsStep, daysStep, hoursStep, minutesStep, secondsStep)

  val check = 
    (p:Period) =>
      steps.collectFirst {
        case f if f(p).isDefined => f(p).get
      }

  implicit class PimpedDate(col: Date) {

    def since() = {
      val period: Period = new Period(new DateTime(col), DateTime.now);
      check(period)
    }
  }
} 
```

如您所见，现在我们停在第一个匹配级别，并且我们重复 getter（如果匹配将被调用两次，则为 getYears）。

然而，另一件需要注意的事情是`implicit class`在 Scala 2.10 中引入了使用它来缓解拉皮条

# jquery - jQuery 动态选择和克隆 div

> ID：15058725
> 
> 赞同：0
> 
> 时间：2013-02-25T01:13:41.623
> 
> 标签：jquery, dynamic, clone

我有一个填充使用的`<select id='group1'>`下拉列表`<textarea id='group2'>`

```
$('#group1').on('change', function(event) {
        $.post('get_data.php', {sent_id: form1.group1.value },
        function(bounced) {
           var valNew = bounced.split(',');
            $('#group2').html(valNew[0]) ;
        });
    }); 
```

这部分工作正常。现在我正在尝试克隆它`<div id='tableline_00'>`并`id`使用

```
var current_id = 0;
$('#btn').click(function(){
    nextElement($('#tableline_00'));
})

function nextElement(element){
    var newElement = element.clone(true);
    var id = current_id+1;
    current_id = id;
    if(id <10)id = '0'+id;
    newElement.attr('id',element.attr('id').split('_')[0]+'_'+id);
    var field = $('input', newElement).attr('id');
    $('input', newElement).attr('id', field.split('_')[0]+'_'+id );
    newElement.appendTo($('#elements'));
    newElement.slideDown('fast');
} 
```

这也适用，但 `$('#group1').on('change', function(event)`仅适用于第一行，因为所有新的克隆行都有新的输入名称。你怎么能改变`$('#group1')`和 `$('#group2')`变数。我是 jQuery 新手，所以任何帮助/链接都是有用的......也许不同的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T09:16:09.767

好的，所以我关注了 Felix 链接，它可以工作。这是最终代码，以防其他人需要它。我也对 HTML 进行了一些更改：

-#elements 是包含#tableline_00 div的div；

-#tableline_00 是被克隆的div；

-'label1', 2, 3 等是根据用户选择动态创建的标签，其中包含来自'get_data.php'的信息

```
$('#elements').on('change', 'select', function() {
    handler = $(this).val();
    name = $(this).attr('id');
    $.post('get_data.php', {sent_id: handler },
        function(bounced) {
           var valNew1 = bounced.split(',');
            $('.label' + a).html(valNew1[0]) ;
        });
});

    var a = 0;
    $('#btn').click(function(){
        nextElem($('#tableline_00'));
    })

    function nextElem(element){
        var newElement = element.clone(true);
        a = a + 1;
        $('select', newElement).attr('id','select' + a);
        $('select', newElement).attr('class','select' + a);
        $('select', newElement).attr('value', 'select' + a);
         $('label', newElement).attr('class','label' + a);
        $('label', newElement).attr('value', 'label' + a);
        newElement.appendTo($('#elements'));
        newElement.slideDown('fast');
    } 
```

# android - 少量数据的Android双向通信：Wifi直接与蓝牙

> ID：15058726
> 
> 赞同：2
> 
> 时间：2013-02-25T01:13:47.857
> 
> 标签：android, bluetooth, wifi, nfc

我们想在两个 Android 设备之间创建双向通信。该过程将由 NFC 启动。但是因为 NFC 只是一种工作方式，我们需要通过蓝牙或 Wifi direct 创建一个通信通道。总共将传输大约 10 kb 的数据。

该过程应该像这样工作：

1.  Android 设备 AD_1 使用 NFC 将数据推送到 Android 设备 AD_2
2.  AD_2 使用接收到的数据创建与 AD_1 的安全通信通道
3.  通信通道用于来回传输大约 10 kb 的数据

您为第 2 步推荐什么通信渠道：Wifi 直连或蓝牙？

因为它只是很少的数据，所以它不应该与连接的速度/吞吐量/速度有关，而应该与连接建立时间有关。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T01:17:41.987

Wi-Fi 直连最适合连接设置时间，您必须使用蓝牙配对速度不快的设备，因为按照标准，默认情况下，蓝牙可见性在 Android 中设置为隐藏，大多数人都忘记了它。还要记住，蓝牙对于智能手机电池来说是昂贵的。

# python - Python - 从另一个类调用方法中的函数

> ID：15058734
> 
> 赞同：0
> 
> 时间：2013-02-25T01:14:38.713
> 
> 标签：python, maya

我在 Autodesk Maya 中使用 Python，但这应该适用于任何地方。

我有一个类`bRigUI`，它继承自`wingUtils`文件内部的另一个类`wingUtilities.py`

`self.gPrefix`我可以通过使用继承来获得/ 等名称。但我不知道如何访问类内部的函数内部的函数，例如`def cName(txt):`

这是`wingUtilities`脚本：

```
import maya.cmds as cmds

class wingUtils():
    def __init__(self):
        pass
    def wingUtil(self, *args):
        self.gPrefix = cmds.textField(self.prefixField, q = True, text = True)
        self.lPrefix = cmds.textField(self.leftPrefixField, q = True, text = True)
        self.rPrefix = cmds.textField(self.rightPrefixField, q = True, text = True)

        def cName(txt):
            n = self.gPrefix + (txt)
        def lName(txt):
            n = self.gPrefix + self.lPrefix + (txt)
        def rName(txt):
            n = self.gPrefix + self.rPrefix + (txt)

w = wingUtils() 
```

这是一个*非常*愚蠢的 UI 脚本，它试图调用它（并且也是具有继承的类） - 这个脚本不会工作，它只是一个外壳，向你展示我正在做的事情，没有所有的混乱。

```
import maya.cmds as cmds
import jtWingRigAutomation.wingUtilities as wingUtilities

reload(wingUtilities)

class bRigUI(wingUtilities.wingUtils):
    def __init__(self):

        bRigUI = 'bRigUI'

        if cmds.window(bRigUI, exists = True):
            cmds.deleteUI(bRigUI)

            bRigUI = cmds.window('bRigUI', title = 'JT Wing Rig Automation')
        form = cmds.formLayout()
        tabs = cmds.tabLayout(innerMarginWidth = 5, innerMarginHeight = 5)
        cmds.formLayout(form, e = True, attachForm=((tabs, 'top', 0), (tabs, 'left', 0), (tabs, 'bottom', 0), (tabs, 'right', 0)))

        tab2 = cmds.rowColumnLayout('Wing Setup', parent = tabs)
        cmds.text(self.naming(), parent = tab2)

        cmds.showWindow(bRigUI)
        cmds.window(bRigUI, e = True, w = 250, h = 500)

b = bRigUI() 
```

我在 UI 脚本中输入什么来调用类`cName`中方法内的函数`wingUtils`？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-25T01:16:43.190

你不能。`cName`是一个局部变量，仅存在于 的函数上下文中`wingUtils.wingUtil`，并且只能通过该函数中的代码访问。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-25T01:29:51.953

唯一的方法是将内部函数移动到外部范围。你有充分的理由让他们成为内部功能吗？如果是这样，就没有办法做你想做的事。否则你可以考虑重写那个类。目前这三个函数`cName()`，`lName()`并`rName()`没有做任何事情，因为没有代码可以从外部调用它们，并且它们不会被内部调用。在这种情况下，就像取消缩进一样简单，然后添加`self`：

```
class wingUtils():
    def __init__(self):
        pass
    def wingUtil(self, *args):
        self.gPrefix = cmds.textField(self.prefixField, q = True, text = True)
        self.lPrefix = cmds.textField(self.leftPrefixField, q = True, text = True)
        self.rPrefix = cmds.textField(self.rightPrefixField, q = True, text = True)

    def cName(self, txt):
        n = self.gPrefix + (txt)
    def lName(self, txt):
        n = self.gPrefix + self.lPrefix + (txt)
    def rName(self, txt):
        n = self.gPrefix + self.rPrefix + (txt) 
```

# java - 在android中使用输入输出流和Handler测试类

> ID：15058736
> 
> 赞同：1
> 
> 时间：2013-02-25T01:14:53.910
> 
> 标签：java, android, testing, junit, mocking

我有这段代码，我想测试我是否会设置 Handler 并使用 outputstream 和 inputstream 调用方法运行该类是否可以正常工作。我的意思是我会在输入流上收到一些东西，然后将其更改为其他东西并在输出流上发送，然后检查 Handler 发送的消息是否正确。我该怎么做或者我可以模拟输出输入流和处理程序？

我想测试的TestClass。

```
import android.os.Handler;
import android.util.Log;

public class TestClass {

protected String description;

protected String responce;
protected String valueResponce;
protected int done;
protected Handler listener;
protected int identifier;
protected int target;

public static final int STATE_GOOD = 0;
public static final int STATE_FAILED = 1;
public static final int STATE_ATDPN = 2;

public void addListener(Handler listener) {
    this.listener = listener;       
}

protected void preparation() {
    identifier = Integer.parseInt(this.getRequest(), 16);
    target = HandlerLabels.MESSAGE_DATA;
}

protected void send(OutputStream outStream) {
    String mes = this.getRequest() + '\r';
    byte[] send = mes.getBytes();
    try {
        outStream.write(send);
    } catch (IOException e) {
        done = STATE_FAILED;
    }
}

protected void read(InputStream inStream) {
    try {

        int data = inStream.read();
        String output = "";
        while (data != 62) {
            if (data != 10) {
                if (data != 13) {
                    output += (char) data;
                }
            }
            data = inStream.read();

        }
        responce = output;

    } catch (IOException e) {
        done = STATE_FAILED;
    }

}

protected void noticeListener() {
    if (listener == null) {
        Log.d(tag, "listener null");
    } else {
        listener.obtainMessage(target, identifier, -1, valueResponce)
                .sendToTarget();

    }
}

protected boolean control(String value){
    if(value.length() == 0){
        done = STATE_FAILED;
        return false;
    }
    return true;
}

public int run(InputStream inStream, OutputStream outStream) {
    preparation();

    if (done == STATE_GOOD)
        send(outStream);

    if (done == STATE_GOOD)
        read(inStream);

    if (control(responce))
        valueResponce = calculateValue(responce);

    if (done == STATE_GOOD)
        noticeListener();

    return done;
}

protected String calculateValue(String value) {
    String[] arr = value.split(" ");
    int A = Integer.parseInt(arr[2], 16);
    return String.valueOf(((A*100)/255));   
}

public String getRequest() {
    return "01041";
}

public String getDescription() {
    return description;
}

public int isDone() {
    return done;
}

public void setDone(int done) {
    this.done = done;
}

public String getResponce() {
    return responce;
}

public void setResponce(String responce) {
    this.responce = responce;
}
} 
```

# json - Scala Play 2：动作组合和 BodyParser

> ID：15058741
> 
> 赞同：1
> 
> 时间：2013-02-25T01:16:05.030
> 
> 标签：json, scala, playframework, action, composition

我正在使用动作组合进行身份验证，并避免在每个动作中传递通用参数。我的问题是如何将它与 BodyParser parse.json 结合起来，就像下面的方法一样？

```
def setUser() = Action(parse.json) {
  implicit request =>
    val id = (request.body \ "id").as[String]
    val username = (request.body \ "username").as[String]
    val previousURI = request.session.get("previousURI") match {
      case Some(x) => x
      case None => "/"
    }
    Ok(previousURI).withSession(
      "id" -> id,
      "username" -> username
    )
} 
```

使用上述方法的控制器使用 'Auth' 特征：

```
case class User(id: Option[String], username: Option[String])

case class Context(user: User, request: Request[AnyContent])
  extends WrappedRequest(request)

trait Auth {

  def CheckLogin(f: Context => Result) = {

    Action { request =>
      request.session.get("username").map { token =>
        // username? yes continue...
        val id = request.session.get("id")
        val username = request.session.get("username")
        f(Context(new User(id, username), request))
      }.getOrElse {
        // no redirect to login
        Results.Redirect(routes.Application.login).withSession(
          "previousURI" -> request.uri
        )
      }

    }

  }

} 
```

如果我尝试：

def myMethod() = CheckLogin(parse.json) { ...

我得到：

```
type mismatch; found : play.api.mvc.BodyParser[play.api.libs.json.JsValue] required: controllers.Context => play.api.mvc.Result 
```

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T07:05:44.993

回答我自己的问题，仍然不确定这是否是最优雅的，但它有效：

```
def CheckLogin(bp: BodyParser[AnyContent] = parse.anyContent)(f: Context => Result) = {
    Action(bp) { request =>
    // ... 
```

`CheckLogin`现在有一个默认为的 BodyParser，`parse.anyContent`因此它可以接受其他 BodyParsers 以及`parse.json`

# android - 如何在清单中注册 *inner* MEDIA_BUTTON 广播接收器？

> ID：15058743
> 
> 赞同：3
> 
> 时间：2013-02-25T01:16:24.077
> 
> 标签：android, broadcastreceiver, android-audiomanager

我[设法](https://stackoverflow.com/q/15057291/636571)让我的耳机按钮在按下时被我的应用程序识别，但是其中一个按钮需要调用 MyCustomActivity 中的方法。问题是 onReceive 的第一个参数是一个不能转换为 Activity 的上下文，所以我被迫将我的 BroadcastReceiver 实现为 MyCustomActivity 中的内部类。

到目前为止一切顺利，但我如何在清单中注册这个内部 MediaButtonEventReceiver？

对于独立类，这很简单：

```
<receiver android:name=".RemoteControlReceiver">
    <intent-filter>
        <action android:name="android.intent.action.MEDIA_BUTTON" />
    </intent-filter>
</receiver> 
```

对 MyCustomActivity 的 mReceiver 执行相同操作的技巧/语法是什么？

```
 private BroadcastReceiver mReceiver = new BroadcastReceiver() {
    @Override
    public void onReceive(Context ctx, Intent intent) {
         // ...
        }
  } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-25T01:22:36.970

你不需要，如果它是 Activity 的一部分，你动态注册它：

```
BroadcastReceiver receiver;

@Override
protected void onCreate (Bundle b)
{
  super.onCreate (b);
  IntentFilter filter = new IntentFilter(Intent.ACTION_MEDIA_BUTTON);    
  filter.setPriority(10000);  
  receiver = new BroadcastReceiver() {
    @Override
    public void onReceive(Context ctx, Intent intent) {
      // ...
    }
  };
  registerReceiver (receiver, filter);
} 
```

然后不要忘记注销`onPause()`（以避免泄漏）。

```
@Override
protected void onPause()
{ 
  try{
    unregisterReceiver (receiver);
  }
  catch (IllegalStateException e)
  {
    e.printStackTrace();
  }
  super.onPause();
} 
```

但是，这种动态注册确实意味着，如果您的 Activity 不在前台，则该按钮将不起作用。您可以尝试取消注册`onDestroy()`，但避免泄漏的最可靠方法是`onPause()`.

或者，要让按钮无论如何都响应，请考虑创建一个服务，并让该服务注册您的接收器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T01:21:15.260

> 到目前为止一切顺利，但我如何在清单中注册这个内部 MediaButtonEventReceiver？

你不能。不过，您可以通过调用`registerReceiver()`活动来动态注册它。

# git - Git over HTTP(s) 作为传输协议

> ID：15058744
> 
> 赞同：2
> 
> 时间：2013-02-25T01:16:31.303
> 
> 标签：git

[我在这里](http://git-scm.com/book/en/Git-Internals-Transfer-Protocols)查看 git 文档，它提到 git 支持 HTTP(s)。我很好奇 git 在通过 HTTPS 推送/克隆代码库时是否会进行任何类型的证书验证。如果是这样，有人可以指出发生这种情况的代码片段吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-25T01:22:43.557

是的，git 客户端确实执行证书验证。您可以使用以下命令禁用验证：

```
git config ––global http.sslVerify false 
```

尝试检查`http.sslVerify`文档。

[在此处](https://github.com/git/git/blob/master/http.c#L254)查看它的名称。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-25T01:19:19.417

您可以在此处找到以下定义：http: [//git-scm.com/docs/git-config](http://git-scm.com/docs/git-config)

http.sslVerify
在通过 HTTPS 获取或推送时是否验证 SSL 证书。可以被 GIT_SSL_NO_VERIFY 环境变量覆盖。

# c++ - C++ 有符号/无符号不匹配

> ID：15058757
> 
> 赞同：3
> 
> 时间：2013-02-25T01:17:54.423
> 
> 标签：c++

我无法正确编译一些代码。这是我的错误：

警告 C4018：“>=”：有符号/无符号不匹配

```
void Player::HasteCap()
{
    if (sWorld->getBoolConfig(CONFIG_PLAYER_HASTECAP_ENABLE))
        return;

    bool hasInstantHasteCap = (GetFloatValue(UNIT_FIELD_BASEATTACKTIME + 0) == 1 
                            || GetFloatValue(UNIT_FIELD_BASEATTACKTIME + 1) == 1 
                            || GetFloatValue(UNIT_FIELD_BASEATTACKTIME + 2) == 1 
                            || GetFloatValue(UNIT_MOD_CAST_SPEED) == 0);

    if (m_baseRatingValue[CR_HASTE_MELEE] > sWorld->getIntConfig(CONFIG_PLAYER_HASTECAP_LIMIT))
    {
        SetFloatValue(UNIT_MOD_CAST_SPEED, 0);
        SetFloatValue(UNIT_FIELD_BASEATTACKTIME + BASE_ATTACK, 1);
        SetFloatValue(UNIT_FIELD_BASEATTACKTIME + OFF_ATTACK, 1);
        SetFloatValue(UNIT_FIELD_BASEATTACKTIME + RANGED_ATTACK, 1);
    }

    else if (hasInstantHasteCap && m_baseRatingValue[CR_HASTE_MELEE] < sWorld->getIntConfig(CONFIG_PLAYER_HASTECAP_LIMIT))
    {
        SetFloatValue(UNIT_MOD_CAST_SPEED, 1.0f);
        SetRegularAttackTime();
        ApplyCastTimePercentMod(m_baseRatingValue[CR_HASTE_SPELL] * GetRatingMultiplier(CR_HASTE_SPELL), true);

        if (GetShapeshiftForm())
        {
            SpellShapeshiftEntry const* ssEntry = sSpellShapeshiftStore.LookupEntry(GetShapeshiftForm());
            if (ssEntry && ssEntry->attackSpeed)
            {
                SetAttackTime(BASE_ATTACK, ssEntry->attackSpeed);
                SetAttackTime(OFF_ATTACK, ssEntry->attackSpeed);
                SetAttackTime(RANGED_ATTACK, BASE_ATTACK_TIME);
            }
        }
    }

    if (CanModifyStats())
    {
        UpdateDamagePhysical(BASE_ATTACK);
        UpdateDamagePhysical(OFF_ATTACK);
        UpdateDamagePhysical(RANGED_ATTACK);
    }
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-25T01:29:01.263

您要比较的两个值的有符号/无符号性质应该相同，否则一个会被转换为另一个进行比较，这可能会导致意外结果。

最好确保您要比较的是同一类型，但是：

如果您知道可以安全地转换哪个值，请显式转换该值。在您的情况下，将有符号值作为无符号值。

例如

```
unsigned int val1 = someunsignedvalue;  
int val2 = somesignedvalue;    
if (val1 > (unsigned int) val2) {
    /* do stuff */  
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-25T01:26:53.827

这些是警告而不是错误。通常，尽管出现警告，代码仍应编译。但是，如果您指定“将警告视为错误”编译器选项，则如果编译器产生任何警告（或错误），则编译器将不会编译。

要解决该警告，您可以将逻辑运算符的无符号一侧转换为 int。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-25T01:25:45.003

您发布的代码不包含相关成员/函数的定义，但编译器可能是正确的。

你期待什么样的答案？

要么解决问题（更改成员/函数/执行 C 样式转换/执行 static_cast<...> 等，以便比较双方的“签名”匹配），或者使用合适的 #pragma 禁用此警告

# java - 一个奇怪的连接被拒绝：Java 客户端中的连接错误

> ID：15058765
> 
> 赞同：1
> 
> 时间：2013-02-25T01:19:00.113
> 
> 标签：java, connection, client

我遇到了以下错误：

```
java.net.ConnectException: Connection refused: connect 
```

我将在下面展示一些代码，但首先是一个描述，因为它让我感到困惑。我编写了一个非常基本的聊天程序，它可以充当服务器或客户端，具体取决于您按下的初始按钮（主机或连接）。与朋友一起在本地主机和互​​联网上进行了测试，按预期完美运行。我已经开始编写第二个软件并使用几乎相同的代码，但是有更多类，当我尝试连接到同一程序的主机时出现此错误。所以，prog A 可以很好地连接到 prog A，但 B 不能连接到 B。人们可能会认为防火墙存在问题，但这里的情节扭曲：B 可以连接到 A，A 可以再次完美地连接到 B。但是 B 无法连接到自身的另一个副本。我使用 TCP 的官方 oracle 教程并在称为 A 的聊天程序上完美运行。根据按钮的按下，A 将运行其主要类的方法之一（以启动服务器或客户端）。B 另一方面，将创建一个类的新对象，或者是 Host

```
public class Host
{
static ServerSocket serverSocket = null;
static Socket clientSocket = null;
static PrintWriter out = null;
static BufferedReader in = null;
static String inputLine;
public Host() throws IOException
    {
    serverSocket = new ServerSocket(4444);
    System.out.println("Server created, waiting for guest.");
    clientSocket = serverSocket.accept();
    System.out.println("Guest connected.");
    out = new PrintWriter(clientSocket.getOutputStream(), true);
    in = new BufferedReader(new InputStreamReader(clientSocket.getInputStream()));
    while ((inputLine = in.readLine()) != null)
        {
        //if (inputLine.equals("q")) {break;}
        System.out.println("Message recieved:" + inputLine);
        }
    }
} 
```

或客人

```
public class Guest
{
static Socket socket = null;
static PrintWriter out;
static BufferedReader in = null;
static String inputLine;
public Guest() throws IOException
    {
    System.out.println("Connecting to host");
    try
        {socket = new Socket("localhost", 4444);
         out = new PrintWriter(socket.getOutputStream(), true);
        in = new BufferedReader(new InputStreamReader(socket.getInputStream()));
        }
    catch (UnknownHostException err) {System.out.println("unknown host"); System.exit(3);}
    catch (IOException err) {System.out.println(err); /*System.exit(4);*/}
    System.out.println("Connected to host");

    while ((inputLine = in.readLine()) != null)
        {
        //if (inputLine.equals("q")) {break;}
        System.out.println("Message recieved:" + inputLine);
        }
    }
} 
```

我有正确的导入，我只是没有将它们粘贴到这里。两个程序都尝试连接到本地主机，只有 A 可以工作，而另一个不能。同样，创建一个访客，我可以连接到聊天程序的服务器。聊天程序客户端可以连接到此服务器。但是这个客户端无法连接到这个服务器。

有没有人经历过类似的事情？有没有明显的解决方案，我错过了什么？我在这里真的一无所知，我从字面上复制/粘贴了服务器/客户端代码。

编辑：堆栈跟踪。

```
java.net.ConnectException: Connection refused: connect
at java.net.DualStackPlainSocketImpl.connect0(Native Method)
java.net.ConnectException: Connection refused: connect
at java.net.DualStackPlainSocketImpl.socketConnect(DualStackPlainSocketImpl.java:69)
at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:339)
at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:200)
at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:182)
at java.net.PlainSocketImpl.connect(PlainSocketImpl.java:157)
at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:391)
at java.net.Socket.connect(Socket.java:579)
at java.net.Socket.connect(Socket.java:528)
at java.net.Socket.<init>(Socket.java:425)
at java.net.Socket.<init>(Socket.java:208)
at mainPack.Guest.<init>(Guest.java:21)
at mainPack.GameStarter.grandMain(GameStarter.java:101)
at mainPack.GameStarter.<init>(GameStarter.java:27)
at mainPack.GameStarter.main(GameStarter.java:34) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T01:45:27.477

在您的主机中，您只接受一个连接，然后服务器停止侦听。如果有什么东西阻碍了这个连接，那么其他任何东西都无法连接到主机。接受的连接应立即委托给另一个线程进行处理，以便主机可以循环并再次侦听服务器套接字。请参阅[Socket 教程](http://docs.oracle.com/javase/tutorial/networking/sockets/index.html)中的[“支持多个客户端”](http://docs.oracle.com/javase/tutorial/networking/sockets/clientServer.html#later)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T01:20:46.440

从. `static`_ `Guest`相同`Host`（尽管如果您只有一个主机，应该没问题）。

**更新**

例如伪代码

```
create server socket
while true (or quit received) {
    accept connection
    spawn thread to handle communication
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-25T01:29:10.843

需要更多关于它是如何运行的以及错误到底是什么的详细信息（我怀疑客户端在尝试访问主机时会返回一个网络级连接错误），但通常只使用一个端口：4444。我认为错误（未发布）是该端口正在被同一台机器上在该端口上通信的第一个程序使用。

此外，静态引用一次只允许各种套接字的一个实例存在于给定的 JVM 中。这些不能被多个线程同时使用，这些线程可能由使用这些相同（一个）静态资源的其他客户端类实现。

# xcode - 在 UIView 中显式调用 initWithCoder 或 ViewDidAppear 等效项？

> ID：15058770
> 
> 赞同：2
> 
> 时间：2013-02-25T01:19:51.930
> 
> 标签：xcode, uiview, ios6, viewdidload, initwithcoder

在 UIView 中，我在顶级视图控制器中有一个带有 IBAction 和方法的导航按钮。

在 IBAction 代码中，我翻转了一个布尔值，以便当执行返回 UIView 时，在 drawRect 之前有一些新设置：重新绘制视图。

如果所有这些都在 ViewController 中，我可以将新的设置代码放在 ViewDidAppear 之类的东西中，这样每次按下按钮时它都会执行。但是，在 UIView 级别没有这样的方法。有 initWithCoder，但这似乎只执行一次（当故事板/笔尖加载时）。

所以我的问题是 - 要么，有没有办法在 VC 级别从我的 IBAction 显式调用 initiWithCoder 方法（我已经尝试过 [self initWithCoder:nil] 但 UIView 级别的断点没有触发）或者有当执行返回到 UIView 级别时运行的方法，例如 ViewDidAppear？

谢谢

目标图片： ![在此处输入图像描述](../Images/ffda6c0ceff02940235d374b3276afea.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T01:34:27.277

除非你真的知道自己在做什么（我的意思是**真的**知道），否则不要自己调用 -initWithCoder:。您应该像*实现*它一样实现它`-drawRect:`并让*系统*调用它。如果你发现自己直接调用这样的东西并且你无法解释为什么没有其他方法的深层技术原因，那么这是错误的方法。阅读并遵循文档（不仅仅是方法的文档），以确保您了解您正在使用的任何方法。它会告诉你。

也就是说，您想知道的是视图的生命周期中是否有一个点，您可以在视图“出现”的任何时候“做某事”（检查 BOOL 并在“是/否”时执行一些工作）。答案是肯定的，并且`-willMoveToSuperview`“可以”工作。

**但**

这是“错误”的方法，IMO。BOOL 属性（'下次我被要求绘制时画一个旋转）可以并且可能应该存在于 UIView 中，*但它的状态应该在其控制器中设置，*因为这是*特定于您的应用程序的*。视图应该是（高度）可重用的；控制器应该实现您应用程序的特定逻辑并根据模型状态和用户（或系统）操作驱动视图。

所以：当你想启用“画一个旋转”操作时，你的*视图控制器*应该设置视图实例的`drawTwiddle`标志，然后可能标记视图进行绘图。然后，您的*视图*将具有 -drawRect:*在某些时候您不应该尝试控制的*调用，并且当它这样做时，它会看到`self.drawTwiddle == YES`并绘制旋转以及它所做的任何其他绘图。

此时，您可能很想让视图将其自己的`drawTwiddle`标志设置为，`NO`因为该行为旨在触发一次。不要这样做。注意：其他用户操作或系统事件可能`-drawRect:`随时调用，因此用户实际上可能看不到旋转（它可能出现和消失的速度比可见的快）。“所以”，正确的做法是让控制器（通过一些直接操作、系统事件或计时器）负责设置*和取消*设置`drawTwiddle`标志，然后标记视图以重新显示。

**添加**

在 UIView 中放置 IBOutlet 或 IBAction 也是不常见的。大多数情况下，除非您正在创建一些不打算单独访问和管理其部分的复合控件，否则通过让*控制器*管理/拥有，您的架构会更清晰（并且更符合 MVC 设计模式的精神）出路和行动。

# python - 如何通过python打开PowerPoint演示文稿？

> ID：15058771
> 
> 赞同：2
> 
> 时间：2013-02-25T01:20:00.143
> 
> 标签：python, pyqt, powerpoint

我正在努力通过 python 打开一个 powerpoint 演示文稿。我在 pyqt 中有一个教育程序，当我点击一个按钮时，我需要打开一个 powerpoint 演示文稿（在 powerpoint 查看器模式下）。

我尝试使用 pywin32 等，但我没有运气:(

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T01:36:52.273

导入`os`模块，然后使用`os.system("powerpoint.exe filename")`

# php - date_parse() 在 PHP 5.4 中导致非法字符串偏移

> ID：15058772
> 
> 赞同：0
> 
> 时间：2013-02-25T01:20:11.943
> 
> 标签：php

我一直在研究这个问题，但不明白为什么我会收到错误。警告引用该行：`if ($i==$break_date['month'])`并且仅在升级到 PHP 5.4 后仍然存在

下面是一个非常有用的动态生成日期选择器的函数。任何见解将不胜感激。

```
function date_picker($name, $date, $startyear='2005', $endyear='2020') {  

$break_date = date_parse($date);

if($startyear==NULL) $startyear = date("Y")-100;
if($endyear==NULL) $endyear=date("Y")+50; 

$months=array('','01 January','02 February','03 March','04 April','05 May',
'06 June','07 July','08 August', '09 September','10 October','11 November','12 December');

// Month dropdown
$html="<select name=\"".$name."_month\" style='width: 22%;'>";
$html.="<option value=''>Month</option>";
for($i=1;$i<=12;$i++)
{
   if ($i==$break_date['month']) 
   { 
     $month_selected = "selected";
    } else {
     $month_selected = "";
   }
   $html.="<option value='$i' $month_selected>$months[$i]</option>";
}
$html.="</select> ";

// Day dropdown
$html.="<select name=\"".$name."_day\" style='width: 22%;'>";
$html.="<option value=''>Day</option>";    
for($i=1;$i<=31;$i++)
{
   if ($i==$break_date['day']) 
   { 
     $day_selected = "selected";
    } else {
     $day_selected = "";
   }    
   $html.="<option value='$i' $day_selected>$i</option>";
}
$html.="</select> ";

// Year dropdown
$html.="<select name=\"".$name."_year\" style='width: 22%;'>";
$html.="<option value=''>Year</option>";
for($i=$startyear;$i<=$endyear;$i++)
{ 
   if ($i==$break_date['year']) 
   { 
     $year_selected = "selected";
    } else {
     $year_selected = "";
   }         
  $html.="<option value='$i' $year_selected>$i</option>";
}
$html.="</select> ";

return $html;
} 
```

# java - 如何在 appengine 上重新映射 gwt 中的 url

> ID：15058779
> 
> 赞同：1
> 
> 时间：2013-02-25T01:21:43.650
> 
> 标签：java, google-app-engine, gwt

我有一个网址：

[http://myserver.appspot.com/service/exec?key=0AkG](http://myserver.appspot.com/service/exec?key=0AkG)

我将如何将其重新映射到：

[http://myserver.appspot.com/webapp.html?key=0AkG](http://myserver.appspot.com/webapp.html?key=0AkG)

其中“key”每次都不同。

选项：1）“*.gwt.xml”或“web.xml”——也许可以做地图，但没有找到正确的选项——（过滤器看起来是最好的选择，但需要代码）。我还尝试创建一个名为“exec”的文件，但它不喜欢缺少“.html”并且浏览器会下载该文件。

2) URL 重写器。很难知道其中哪些可以在 GWT+GAE 上工作，还没有找到。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T06:56:49.977

将此添加到 web.xml，它的工作原理：

```
<servlet>
<servlet-name>oldProxy</servlet-name>
<jsp-file>/proxy.jsp</jsp-file>
</servlet>

<servlet-mapping>
<servlet-name>oldProxy</servlet-name>
<url-pattern>/service/exec</url-pattern>
</servlet-mapping> 
```

文档：

```
 <jsp-file> 
```

[http://docs.oracle.com/cd/E13222_01/wls/docs81/webapp/web_xml.html#1039287](http://docs.oracle.com/cd/E13222_01/wls/docs81/webapp/web_xml.html#1039287)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T09:44:26.053

您需要一些 URL 重写器。

GAE 运行 jetty，它有自己的[重写器处理程序](http://wiki.eclipse.org/Jetty/Feature/Rewrite_Handler)，但由于出于安全原因[似乎无法扩展](http://code.google.com/p/googleappengine/issues/detail?id=2943)其`jetty.xml`配置，您需要在您的`web.xml`

Internet 上有许多过滤器示例，但我发现易于设置和配置的是[UrlRewriteFilter](http://tuckey.org/urlrewrite/)。

您有一个在 GAE 中设置 UrlRewriterFilter的[教程](http://aaronjlynch.com/2009/11/25/url-rewriting-on-google-app-engine/)

# javascript - Javascript 中的 Eclipse IDE console.log 对象

> ID：15058780
> 
> 赞同：3
> 
> 时间：2013-02-25T01:22:08.453
> 
> 标签：javascript, eclipse, cordova

Eclipse IDE 的新用户，我想`console.log()`将字符串打印到 logcat 面板，这很棒。但是当我尝试`console.log()`一个对象（而不是字符串文字）时，我在控制台中看到的只是[object object]。

我现在正在`console.log(JSON.stringify(MyObject))`解决这个问题，它适用于一个简单的对象，但是，如果对象太复杂，字符串会在某些时候被截断，这使我的调试变得更加困难。

是否有一种巧妙的方法可以在控制台面板中使用漂亮的树视图检查对象，就像您在 Chrome 开发人员工具中获得的一样（可扩展的树视图总是更容易处理 json 字符串）？

值得一提的是，我正在为 Android 做 PhoneGap 开发。所以基本上我只处理 HTML 和 Javascript。System.out.println 对我不起作用。

*另外，我也知道[Weinre](http://debug.phonegap.com/) for PhoneGap。但我只是在本地 IDE 中寻找解决方案，因为 Web 调试对我来说太滞后了。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-08T21:21:01.050

您可以编写自己的控制台“树”记录器并将其包含在您的源代码中。一个简单的例子如下：

```
function logObject(obj)
{
    var ind = "";
    if (arguments.length > 1)
    {
        ind = arguments[1];
    }

    if (typeof obj == "undefined" || obj == null)
    {
        console.log("<null>");
        return;
    }

    if (typeof obj != "object")
    {
        console.log(obj);
        return;
    }

    for (var key in obj)
    {
        if (typeof obj[key] == "object")
        {
            console.log(ind + key + "={");
            logObject(obj[key], ind + "  ");
            console.log(ind + "}");
        }
        else
        {
            console.log(ind + key + "=" + obj[key]);
        }
    }
} 
```

使用示例：

```
var a = [1, 2, 3];
var o = {a:1, b:2, c:3, d: a};
var obj = {a:1, b:o, c:3, d: a};

logObject(obj); 
```

结果在控制台或 LogCat 中将如下所示：

```
a=1
b={
  a=1
  b=2
  c=3
  d={
    0=1
    1=2
    2=3
  }
}
c=3
d={
  0=1
  1=2
  2=3
} 
```

干杯

# kernel - 创建新任务时，linux内核如何唤醒空闲处理器？

> ID：15058781
> 
> 赞同：6
> 
> 时间：2013-02-25T01:22:10.783
> 
> 标签：kernel, arm, scheduler, irq

我是 Linux 内核的新手。目前，我查看了空闲代码并有一个问题。当处理器在自己的运行队列中没有任何任务时，它可能会进入空闲模式，特定的 WFI（等待中断）。（我提到的只是关于 ARM 架构而不是 X86。所以 X86 出了点问题。）在保持 WFI 状态之后，也许其他处理器（不是空闲的）想要将他们的任务分散到这个空闲的处理器上（通过负载平衡）。当时一个繁忙的处理器使任务迁移。在我看来，迁移任务时，空闲处理器应该立即唤醒以处理任务。正确的？但是，我找不到任何唤醒空闲处理器的代码，但只找到了有关将任务注册到空闲处理器的运行队列的代码。

我想知道在给出新任务时唤醒处理器背后的机制是什么。或者它只是将任务从一个队列移动到另一个队列，而不是让它直到被一些不可预测的 IRQ 唤醒？

请告诉我真相：）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-26T18:17:07.120

`WFI`是 ARM 的特殊协处理器指令。例如，

```
 ENTRY(cpu_arm946_do_idle)
         mcr     p15, 0, r0, c7, c0, 4           @ Wait for interrupt
         mov     pc, lr 
```

它与Linux（直接）无关。

如果没有工作要做，则有一个特殊`idle`任务可以在 ARM 上运行指令。`WFI`该`idle`任务是最低优先级的 Linux 任务，如果没有其他任务，则会被调度。如果`WFI`由 完成`idle`，则某些驱动程序将在没有工作可做时中断（可能是计时器）。`idle`在SMP情况下，如果有其他进程可以迁移就不会去；调度程序检查这一点。如果负载变高，则繁忙的处理器需要`wake`其他处理器；在带有中断的**ARM的情况下。**通常这种处理在**arch/ *arch* /kernel/ process.c**中。例如*x86*有[`default_idle()`](http://git.kernel.org/?p=linux/kernel/git/torvalds/linux.git;a=blob;f=arch/x86/kernel/process.c;hb=HEAD). 我不知道*x86的细节*有效，但您可以查看源代码。

对于您的问题**，当新任务创建时，linux内核如何唤醒空闲处理器？**，答案是没有。只有`fork()`（和一些类似的功能）可以创建新任务；最初来自`init`任务，然后是其中一个孩子。如果你有`cron`工作，它会在它去之前安排一个计时器`sleep/idle`。此计时器将唤醒系统，重新安排`cron`，然后`cron`调用`fork()`, 来创建新任务。

其他相关机制为[`cpufreq`](http://git.kernel.org/?p=linux/kernel/git/torvalds/linux.git;a=tree;f=drivers/cpufreq;hb=HEAD),[`cpuidle`](http://git.kernel.org/?p=linux/kernel/git/torvalds/linux.git;a=tree;f=drivers/cpuidle;hb=HEAD)等[`kernel/power`](http://git.kernel.org/?p=linux/kernel/git/torvalds/linux.git;a=tree;f=kernel/power;hb=HEAD)。

真相**总是**客观的*/主观*的，当然不是**全球性**的。告诉我**真相**`metric`，我可以告诉你**真相**。

 ***** * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-02T06:28:53.533

只需在创建线程后像下面的代码一样设置 CPU 的标志。

```
 = > thread's task_struct->flags |= PF_WAKE_UP_IDLE; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-10-16T13:27:18.627

look at select_task_rq_fair(), which is CFS::select_task_rq() method. This is most representative case where the scheduler wakes up the idle task for re-balancing run-queues.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-07-17T11:01:44.000

`smp_send_reschedule()`将发送`IPI_RESCHEDULE`到空闲的处理器。这将把它从`wfi`. 它是从几个地方调用的，一个例子是`wake_up_process -> try_to_wake_up -> try_to_wake_up -> ttwu_queue -> ttwu_queue_remote`（来自内核 3.4 的函数名称）。****

# javascript - 强大的字符串拆分

> ID：15058782
> 
> 赞同：0
> 
> 时间：2013-02-25T01:22:13.637
> 
> 标签：javascript

我有一个 JavaScript 函数：

```
function doSomething(arg) {
    var array = arg.split(',');
    // etc...
} 
```

`arg`使用 jQuery 的`.data('myId')`函数填充。

通常，`myId`包含一个逗号分隔的整数列表，并且代码效果很好。但是，如果`myId`只包含一个整数，则代码将失败并出现错误

> 对象不支持属性或方法“拆分”

是否有一种紧凑、稳健的方法来创建数组，而不包括`if`处理一个整数或空字符串的边界条件的语句？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T01:25:51.090

`attr`将返回一个字符串，而`data`将尝试解析该值并返回一个具有“正确”类型的对象。

```
foo.attr('data-myId');  //pass this instead 
```

`if`没有虽然，你无法绕过识别空字符串。您要么需要检查它，要么需要检查具有单个空字符串元素的数组。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T01:25:35.960

你有两个不相关的问题。

第一个是针对空字符串的情况：Split 将返回一个带有空字符串的单元素数组。只需检查并补偿。

```
var array;
if (arg == "") array = []; 
```

如果有一个整数，我相信你不是从 中得到一个字符串`.data()`，而是一个实际的整数；所以首先将其转换为字符串：

```
else array = String(arg).split(','); 
```

或者，您可以避免使用 jQuery 魔法，直接访问属性 - 所有`data()`属性都只是带有`data-`前缀的属性。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-25T01:27:17.617

`.data`将尝试根据其内容猜测值的类型，因此它变成了一个数字。您可以使用`.attr`，如果它作为属性可用，它总是返回一个字符串。或者，转换为字符串：

```
('' + arg).split(',')
//or
String(arg).split(',') 
```

我实际上不确定是否首选。

另请注意，`''.split(',')`返回`['']`或具有空字符串元素的数组。你可以解决这个问题`.filter(function (elem) { return elem !== ''; })`

另一种可能的替代方法是`dataset`在元素本身上使用。

# javascript - 在页面加载时执行 javascript

> ID：15058786
> 
> 赞同：0
> 
> 时间：2013-02-25T01:23:00.330
> 
> 标签：javascript, onload

我应该使用什么指令，以便在页面加载而不是点击时执行此功能？我试过了：

```
window.onload=function () {
("#geocomplete").trigger("geocode"); 
```

但上面的代码不起作用。

```
<script>
    $(function () {
        $("#variables").variables({
            map: ".map_canvas",
            details: "form",
            types: ["calculations", "grades"]
        });

        $("#submit_button").click(function () {

            $("#variables").trigger("calculations");
        });
    });
</script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T01:32:48.393

`window.onload`发生在 jQuery 的事件之前`$(document).ready()`（您可能知道，您已经使用简写版本进行了设置`$(function() {...})`）。

因此，您正在尝试触发尚未设置的事件。

正如@David 指出的那样，您可以将触发代码放在现有代码的末尾`$(function() {...})`。

# javascript - 根据用户选择使用 javascript 对图像进行部分着色

> ID：15058791
> 
> 赞同：0
> 
> 时间：2013-02-25T01:23:50.593
> 
> 标签：javascript, css

我有这个“时间线”，它的水平是这样的

00|01|02|03|等到 23

每个包含数字的跨度为 17 个像素，“|” 线为 1 像素，整个图像为 431x20 像素。

我有 2 个标签，用户应该选择“开始”时间和“结束”时间，我想知道如何使用 javascript 为图像部分着色，我想我可以在上面放一些 CSS，例如在图像上，但我不知道如何使用 javascript 来做到这一点，任何帮助都会非常有用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T01:38:34.093

让我觉得将 DIV 绝对定位在图像顶部非常简单，具有相同的高度、您选择的任何颜色以及一些适当的不透明度，将其左边缘设置为（这是一个快速计算，可能是错误的）图像.left + (18 * from)，其宽度为 18 * (to - from + 1) - 1。

但是，首先让您的时间线成为图像有很好的理由吗？对我来说，拥有一组具有或不具有“选定”类的节点听起来更好，每个节点上都有一个“00”-“23”文本标记。不需要图像。

# plugins - MEF 和版本控制

> ID：15058797
> 
> 赞同：9
> 
> 时间：2013-02-25T01:24:50.237
> 
> 标签：plugins, mef, composition

我正在考虑使用 MEF 来解决插件管理要求。在简介中它说“没有硬依赖”，但据我所知，对导入/导出接口存在硬依赖。

我关心的是这个。我的可扩展应用程序是由我编写的。插件由第三方编写。因此，假设我们都从 V1 开始。我的应用程序定义了`IPlugin`插件“部件”需要实现的接口。我们部署应用程序，用户安装一堆第三方插件。一切都很好。

现在我升级了我的应用程序，我想在插件界面中添加一个新方法。我看到它的方式有两个选择：

1.  编辑接口 - 可能不好，这会破坏现有插件，因为它们将不再正确实现接口。
2.  创建一个新的“V2”接口，继承自原始接口

    公共接口 IPluginV2 : IPlugin {}

现在我有一个问题。我的用户都有一堆 3rd 方插件实现`IPlugin`，但我现在要求他们实现 IPluginV2。我认为这些 3rd 方插件将不再工作，直到开发人员实现新接口。

MEF 有办法处理这种情况吗？我真的在寻找一种方法，让我在让旧插件继续工作而无需重建的同时改进我的应用程序。最好的处理方法是什么？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-02-25T19:54:02.367

对于版本控制，您可能希望每个版本都有一个接口，并在它们之间使用[适配器模式](http://en.wikipedia.org/wiki/Adapter_pattern)。它是`System.AddIn`处理版本控制的方式，它也适用于 MEF。

假设您的应用程序的**V1有以下类型：**

```
public interface IPlugin
{
    string Name { get; }
    string Publisher { get; }
    string Version { get; }

    void Init();
} 
```

这是我们**V1**插件感知应用程序的唯一合同。它包含在 assembly 中`Contracts.v1`。

然后我们有一个 **V1**插件：

```
[Export(typeof(IPlugin))]
public class SomePlugin : IPlugin
{
    public string Name { get { return "Some Plugin"; } }

    public string Publisher { get { return "Publisher A"; } }

    public string Version { get { return "1.0.0.0"; } }

    public void Init() { }

    public override string ToString()
    {
        return string.Format("{0} v.{1} from {2}", Name, Version, Publisher);
    }
} 
```

导出为`IPlugin`. 它包含在程序集中`Plugin.v1`并发布在主机应用程序基本路径下的“插件”文件夹中。

最后是**V1**主机：

```
class Host : IDisposable
{
    CompositionContainer _container;

    [ImportMany(typeof(IPlugin))]
    public IEnumerable<IPlugin> Plugins { get; private set; }

    public Host()
    {
        var catalog = new DirectoryCatalog("plugins");
        _container = new CompositionContainer(catalog);
        _container.ComposeParts(this);
    }

    public void Dispose() { _container.Dispose(); }
} 
```

它导入`IPlugin`文件夹“插件”中的所有部件。

然后我们决定发布**V2**，因为我们想提供版本控制，所以我们需要无版本合约：

```
public interface IPluginV2
{
    string Name { get; }
    string Publisher { get; }
    string Version { get; }
    string Description { get; }

    void Init(IHost host);
} 
```

具有新属性和修改的方法签名。另外，我们为主机添加了一个接口：

```
public interface IHost
{
    //Here we can add something useful for a plugin.
} 
```

这两个都包含在 assembly 中`Contracts.v2`。

为了允许版本控制，我们添加了一个从 V1 到 V2 的插件适配器：

```
class V1toV2PluginAdapter : IPluginV2
{
    IPlugin _plugin;

    public string Name { get { return _plugin.Name; } }

    public string Publisher { get { return _plugin.Publisher; } }

    public string Version { get { return _plugin.Version; } }

    public string Description { get { return "No description"; } }

    public V1toV2PluginAdapter(IPlugin plugin)
    {
        if (plugin == null) throw new ArgumentNullException("plugin");
        _plugin = plugin;
    }

    public void Init(IHost host) { plugin.Init(); }

    public override string ToString() { return _plugin.ToString(); }
} 
```

这只是适应从`IPlugin`到`IPluginV2`。它返回一个固定的描述，并且`Init`它对主机参数不做任何事情，但它`Init`从**V1**合约中调用无参数。

最后是**V2**主机：

```
class HostV2WithVersioning : IHost, IDisposable
{
    CompositionContainer _container;

    [ImportMany(typeof(IPluginV2))]
    IEnumerable<IPluginV2> _pluginsV2;

    [ImportMany(typeof(IPlugin))]
    IEnumerable<IPlugin> _pluginsV1;

    public IEnumerable<IPluginV2> Plugins
    {
        get
        {
            return _pluginsV1.Select(p1 => new V1toV2PluginAdapter(p1)).Concat(_pluginsV2);
        }
    }

    public HostV2WithVersioning()
    {
        var catalog = new DirectoryCatalog("plugins");
        _container = new CompositionContainer(catalog);
        _container.ComposeParts(this);
    }

    public void Dispose() { _container.Dispose(); }
} 
```

它同时导入`IPlugin`和`IPluginV2`部分，将每个部分适应`IPlugin`并`IPluginV2` 公开所有已发现插件的串联序列。适配完成后，所有插件都可以作为**V2**插件处理。

您还可以在主机接口上使用适配器模式，以允许**V2**插件与**V1**主机一起工作。

另一种方法是[autofac](http://code.google.com/p/autofac/) IoC，它可以与 MEF[集成](http://code.google.com/p/autofac/wiki/MefIntegration)并支持使用[适配器](http://nblumhardt.com/2010/04/lightweight-adaptation-%E2%80%93-coming-soon/)进行版本控制。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T10:04:40.633

只是一些建议（我没有测试过）可能有助于为您集思广益的解决方案：

1.  如果使用 MEF，`AggregateCatalog`请为每个版本使用不同的版本。这样您就可以同时维护 V1 和 V2 插件可用

2.  如果不使用 MEF，则来自第三方的动态加载 DLL 应返回它已实现的当前接口版本，您可以根据版本号选择可以进行的调用

那有帮助吗？

干杯，二村

# functional-programming - 函数式编程中的“如何做和做什么”或“关注结果，而不是步骤”到底是什么

> ID：15058801
> 
> 赞同：-3
> 
> 时间：2013-02-25T01:25:11.973
> 
> 标签：functional-programming, imperative-programming

我很难理解函数式编程中“不要考虑如何做，而是要做什么”（关注结果，而不是步骤）的概念。假设我们有一种语言将函数视为一等公民，并且没有用于迭代的内置函数（例如 Scala 中的 forAll）。在这种情况下，我们首先必须创建一个函数来告诉如何迭代给定的数据结构，不是吗？因此，如果它本身的语言没有提供足够的功能，那么除了具有作为一等公民的功能之外，它与命令式编码几乎相同，不是吗？

如果我错了，请纠正我。以下是我提到的资源。

[视频讲座](http://www.infoq.com/presentations/Functional-Thinking)

[一些文章](http://www.ibm.com/developerworks/views/java/libraryview.jsp?search_by=functional%20thinking%3a)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T02:47:45.053

“如何”和“什么”是同一枚硬币的两个方面，有时以一种或另一种方式思考可能很有用。思考“做什么”是思考递归的好方法，特别是对于没有太多编写递归函数经验的人。“如何”意味着一系列步骤，而“什么”意味着一系列定义。让我们考虑一下您的迭代示例（我将使用 Haskell，因为我不了解 Scala，但这些概念应该可以直接翻译）。

Haskell 的迭代函数称为`map`，但假设我们想自己编写它。如果我们没有太多的递归经验，可能很难想象如何编写一个函数（`map`），将另一个函数（ ）应用于列表的`f`每个元素（“映射” ）。这是我们想要的函数的类型签名：`f``list`

```
map :: (a -> b) -> [a] -> [b] 
```

因此，让我们尝试考虑应用于列表的每个元素的函数是“什么”。它是应用于第一个元素的函数，然后是映射到列表其余部分的函数。所以让我们编写代码：

```
map f (firstElement:restOfList) = (f firstElement):(map f restOfList) 
```

现在我们快完成了。剩下的唯一事情就是处理基本情况。如果列表为空怎么办？很明显，任何映射到空列表的函数都是空列表，所以我们将编写代码：

```
map _ [] = [] 
```

我们完成了！现在，如果您可以从“如何”的角度思考并编写上述代码，那就继续吧（随着我获得更多经验，我倾向于更频繁地这样做）。但是，如果您发现自己陷入困境，那么根据“什么”来思考是一种有用的技巧。

# php - SQL 条件分组行数

> ID：15058803
> 
> 赞同：0
> 
> 时间：2013-02-25T01:25:13.373
> 
> 标签：php, sql

我正在使用下面的语句按月对结果进行分组以给出总价，但是我还需要知道已经分组了多少行，但前提是价格高于一定数量。

```
"SELECT SUM(price) FROM table  GROUP BY month"; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T01:26:49.240

采用`SUM with CASE`

```
SELECT SUM(price) totalPrice, 
       SUM(CASE WHEN price > x THEN 1 ELSE 0 END) totalRows  
FROM   table  
GROUP  BY month 
```

`X`价格的价值在哪里

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T01:31:59.877

一种选择是使用`COUNT`and `CASE`：

```
SELECT SUM(price), COUNT(CASE WHEN Price > 100 THEN 1 END)
FROM table
GROUP BY month 
```

[SQL 小提琴演示](http://sqlfiddle.com/#!2/98dcb0/1)

# iphone - 为包含少量文本字段的示例表单添加滚动视图（iphone）

> ID：15058817
> 
> 赞同：0
> 
> 时间：2013-02-25T01:27:38.803
> 
> 标签：iphone, uiscrollview

我有一个定义如下的注册表单，我喜欢在滚动视图中使用这个表单，这样如果用户选择底部的文本字段，它就会滚动。

问题是，注册表单没有覆盖整个屏幕，在后台我仍然有主视图，我希望文本字段在表单内滚动，而不改变表单窗口的位置（我不想要表单视图出现并覆盖背景）。

```
 - (UIView *)Form
{
    if (!_Form) {

        CGRect frame = CGRectMake(0.0, Height, Width, 310.0);
        UIView *container = [[UIView alloc] initWithFrame:frame];

        CGFloat y = 15.0;
        frame = CGRectMake(15.0, y, width, height);
        UITextField *field = [[UITextField alloc] initWithFrame:frame];
        [
        field.placeholder = @"text1*";

        CGFloat spacing = 8.0;
        y = frame.origin.y + kDefaultTextFieldHeight + spacing;
        frame = CGRectMake(15.0, y, kDeviceWidth - 2*15.0, kDefaultTextFieldHeight);
        field = [[UITextField alloc] initWithFrame:frame];

        field.placeholder = @"Password*";

        frame.size.height = 200.0;

        y = frame.origin.y + kDefaultTextFieldHeight + spacing;
        frame = CGRectMake(15.0, y, kDeviceWidth - 2*15.0, kDefaultTextFieldHeight);
        field = [[UITextField alloc] initWithFrame:frame];

        field.placeholder = @"Confirm Password*";

        y = frame.origin.y + kDefaultTextFieldHeight + 16.0;
        CGFloat w = (kDeviceWidth - 2 * 15.0) / 2;
        frame = CGRectMake(15.0, y, w - 2.0, height);
        field = [[UITextField alloc] initWithFrame:frame];

        field.placeholder = @"First Name*";

        frame = CGRectMake(15.0 + w + 2.0, y, w - 2.0, height);
        field = [[UITextField alloc] initWithFrame:frame];

        field.placeholder = @"Last Name*";
        [container addSubview:field];

        y = frame.origin.y + kDefaultTextFieldHeight + spacing;
        frame = CGRectMake(15.0, y, w, kDefaultTextFieldHeight);
        field = [[UITextField alloc] initWithFrame:frame];

        field.placeholder = @"Birthday";

        y = frame.origin.y + kDefaultTextFieldHeight + 20.0;
        frame = CGRectMake((container.frame.size.width - 192.0) / 2, y, 192.0, 34.0);

        y = frame.origin.y + kDefaultTextFieldHeight + 8.0;
        frame = CGRectMake((container.frame.size.width - 192.0) / 2, y, 192.0, 34.0);

        _Form = container;
    }
    return _Form;
} 
```

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T04:17:22.593

根据您的要求尝试并更改以下代码：

```
static const CGFloat KEYBOARD_ANIMATION_DURATION = 0.3;
static const CGFloat MINIMUM_SCROLL_FRACTION = 0.2;
static const CGFloat MAXIMUM_SCROLL_FRACTION = 0.8;
static const CGFloat PORTRAIT_KEYBOARD_HEIGHT = 216;
static const CGFloat LANDSCAPE_KEYBOARD_HEIGHT = 162;

- (void)textFieldDidBeginEditing:(UITextField *)textField
{
    CGRect textFieldRect =
    [self.view.window convertRect:textField.bounds fromView:textField];
    CGRect viewRect =
    [self.view.window convertRect:self.view.bounds fromView:self.view];

    CGFloat midline = textFieldRect.origin.y + 0.5 * textFieldRect.size.height;
    CGFloat numerator =
    midline - viewRect.origin.y
    - MINIMUM_SCROLL_FRACTION * viewRect.size.height;
    CGFloat denominator =
    (MAXIMUM_SCROLL_FRACTION - MINIMUM_SCROLL_FRACTION)
    * viewRect.size.height;
    CGFloat heightFraction = numerator / denominator;

    if (heightFraction < 0.0)
    {
        heightFraction = 0.0;
    }
    else if (heightFraction > 1.0)
    {
        heightFraction = 1.0;
    }

    UIInterfaceOrientation orientation =
    [[UIApplication sharedApplication] statusBarOrientation];
    if (orientation == UIInterfaceOrientationPortrait ||
        orientation == UIInterfaceOrientationPortraitUpsideDown)
    {
        animatedDistance = floor(PORTRAIT_KEYBOARD_HEIGHT * heightFraction);
    }
    else
    {
        animatedDistance = floor(LANDSCAPE_KEYBOARD_HEIGHT * heightFraction);
    }

    CGRect viewFrame = self.view.frame;
    viewFrame.origin.y -= animatedDistance;

    [UIView beginAnimations:nil context:NULL];
    [UIView setAnimationBeginsFromCurrentState:YES];
    [UIView setAnimationDuration:KEYBOARD_ANIMATION_DURATION];

    [self.view setFrame:viewFrame];

    [UIView commitAnimations];

}

- (void)textFieldDidEndEditing:(UITextField *)textField
{
    CGRect viewFrame = self.view.frame;
    viewFrame.origin.y += animatedDistance;

    [UIView beginAnimations:nil context:NULL];
    [UIView setAnimationBeginsFromCurrentState:YES];
    [UIView setAnimationDuration:KEYBOARD_ANIMATION_DURATION];

    [self.view setFrame:viewFrame];

    [UIView commitAnimations];
}

- (BOOL)textFieldShouldReturn:(UITextField *)textField
{
    [textField resignFirstResponder];
    return YES;
} 
```

# php - codeigniter 如何访问 config/form_validation.php 数据？

> ID：15058820
> 
> 赞同：0
> 
> 时间：2013-02-25T01:28:28.437
> 
> 标签：php, codeigniter

我在我的`config/form_validation.php`和我的`controller`. 来自的**字段**和**标签**`form_validation`与我在我`controller`的**id**、**name**和**placeholder中指定的相同**

我是否必须将该数据提取到第三个位置并在这两个位置中引用它？

**应用程序/配置/form_validation.php**

```
$config = array(
                 'register' => array(
                                    array(
                                            'field' => 'register_username',
                                            'label' => 'Username',
                                            'rules' => 'trim|required|exact_length[5]'
                                         ),
..... 
```

**应用程序/控制器/mycontroller.php**

```
 $this->viewdata['register_username'] = array(
            'id'            => 'register_username',
            'name'          => 'register_username',
            'type'          => 'text',
            'placeholder'   => 'Username'
        );
... 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T02:04:28.033

我不确定您为什么在控制器本身中复制数据。您可能会发现使用[Jamie Rumbelow 的模型/模式库 mashup](https://github.com/williamknauss/schema_base_model_magic)更容​​易。

这将清理您的模型/应用程序结构作为一个整体。模型扩展库本身允许 CRUD 方法的自动化。

# pyrocms - PyroCMS 获取上传文件的真实文件系统路径

> ID：15058822
> 
> 赞同：0
> 
> 时间：2013-02-25T01:28:50.407
> 
> 标签：pyrocms

如何获取上传到 PyroCMS 文件模块的文件的“真实路径”（服务器路径）。我需要获得绝对路径，例如；

`"c:\www\pyro\uploads\MYSITE_REF\real_file_name.xlsx"`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-26T11:20:51.037

为此，您可以简单地在 constant.php 中定义一个像这样的常量

```
define('CUSTOM_FILE_PATH',FCPATH.'/uploads/'.SITE_REF.'/files/'); 
```

比你可以在任何地方调用它

```
$local_file = CUSTOM_FILE_PATH. $my_file_name; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T04:45:47.873

经过大量搜索，我找不到可靠的答案，我确实找到了一些似乎有效的全局变量。

```
$local_file = FCPATH.'/uploads/'.SITE_REF.'/files/' . $my_file_name; 
```

如果有人有更好的方法来检索这个，请发布:)

# clojure - 如何将 Clojure memfn 与 Java 构造函数一起使用？

> ID：15058823
> 
> 赞同：2
> 
> 时间：2013-02-25T01:28:55.993
> 
> 标签：clojure

我想使用 Java 构造函数作为一流的 Clojure 函数。我的用例是将一系列字符串转换为一系列 Java 对象，这些对象具有一个带有单个字符串的构造函数：

简单的 Java 对象：

```
public class Foo {
  public Foo(String aString){
    // initialize the Foo object from aString
  }
} 
```

在 Clojure 中，我想这样做：

```
(defn make-foo (memfn Foo. a-string))
(apply make-foo '("one" "two" "shoe")) 
```

应用应该返回从字符串创建的 Foo 对象列表，但我得到了这个：

```
IllegalArgumentException No matching method found: org.apache.hadoop.io.Text. for class java.lang.String  clojure.lang.Reflector.invokeMatchingMethod (Reflector.java:53) 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-25T02:04:46.503

不要打扰。`memfn`实际上不赞成使用匿名函数文字，您还可以使用它来调用构造函数，例如`#(Foo. %)`.

此外，您的`apply`调用将尝试`make-foo`使用三个字符串参数调用一次。您可能想要：

```
(map #(Foo. %) ["one" "two" "three"]) 
```

# c# - windows 8点击并按住事件c#

> ID：15058824
> 
> 赞同：1
> 
> 时间：2013-02-25T01:28:58.353
> 
> 标签：c#, windows, touch, tap

我正在尝试编写一个应用程序来感知何时有人点击并持有某物。我正在使用 Windows 窗体。我什至尝试向下使用鼠标，但它似乎并没有一直触发。这也将是一个多点触控应用程序。我将有两个按钮，用户可以点击并按住一个按钮，同时按下另一个按钮。或者只需按一个按钮。我什至不确定 Windows 窗体应用程序如何处理这个问题。

在 Windows 触摸应用程序中看到的所有示例都使用 xaml。这真的是捕获点击并按住的唯一方法吗？

我基本上是在这里制作一个屏幕键盘，我认为没有 Windows 窗体是不可能的。如果我在这里错了，请纠正我。

非常感谢任何帮助或指导。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T21:46:59.097

如果您的程序在 Windows 8 上运行，您可以使用 WM_POINTER API 来获取您需要的输入。重写 WndProc 以捕获消息。你必须做一些 P/Invoke 才能让它工作，但这并不是很难。这里有一些不完整的代码可以帮助您入门，您需要为要跟踪的每种类型的指针添加向上、向下和更新事件的案例。跟踪指针 ID 以处理多点触控。要处理按住，您需要自己跟踪从 WM_POINTERDOWN 到 WM_POINTERUP 的时间并采取相应措施。希望这可以帮助。

```
public const int WM_POINTERDOWN = 0x0246;
public const int WM_POINTERUP = 0x0247;
public const int WM_POINTERUPDATE = 0x0245;

public enum POINTER_INPUT_TYPE : int
{
    PT_POINTER = 0x00000001,
    PT_TOUCH   = 0x00000002,
    PT_PEN     = 0x00000003,
    PT_MOUSE   = 0x00000004
}

public static uint GET_POINTERID_WPARAM(uint wParam) { return wParam & 0xFFFF; }

[DllImport("User32.dll")]
public static extern bool GetPointerType(uint pPointerID, out POINTER_INPUT_TYPE pPointerType);

protected override void WndProc(ref Message m)
{
    bool handled = false;
    uint pointerID;
    POINTER_INPUT_TYPE pointerType;
    switch(m.Message)
    {
        case WM_POINTERDOWN:
             pointerID = User32.GET_POINTERID_WPARAM((uint)m.WParam);
             if (User32.GetPointerType(pointerID, out pointerType))
             {
                 switch (pointerType)
                 {
                     case POINTER_INPUT_TYPE.PT_PEN:
                         // Stylus Down
                         handled = true;
                         break;
                     case POINTER_INPUT_TYPE.PT_TOUCH:
                         // Touch down
                         handled = true;
                         break;
                 }
             }
             break;
    }

    if (handled)
        m.Result = (IntPtr)1;

    base.WndProc(ref m);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-04-27T14:22:51.833

这个问题已经存在了一段时间，可能会从一个简单的方法中受益。您可以通过测量 MouseDown 事件和 Click 事件（在 MouseUp 之前触发）之间的时间来模拟“点击并按住”（或单击并按住）。如果时间大于某个值，则取消 Click 并（可能）触发您自己的 TapAndHold 事件。我创建了一个测试控件，任何人都可以使用它来尝试这种方法。只需将 UserControl 添加到您的测试应用程序（我称为我的 TestTapAndHold），然后粘贴以下内容：

```
public partial class TestTapAndHold : UserControl
{
    private string showText = "Tap Me";
    private DateTime mouseDown;
    private const int holdTime = 500;
    public TestTapAndHold()
    {
        InitializeComponent();
        this.Paint += drawText;
    }
    public delegate void OnTapAndHold(EventArgs e);
    public event OnTapAndHold TapAndHold;
    private void drawText(object sender, PaintEventArgs e)
    {
        using (var drawBrush = new SolidBrush(Color.Black))
        {
            e.Graphics.DrawString(showText, Font, drawBrush, new Point(5,3));
        }
    }
    protected override void OnClick(EventArgs e)
    {
        if (DateTime.Now.Subtract(mouseDown).Milliseconds >= holdTime)
        {
            showText = "Tap Hold";
            TapAndHold?.Invoke(e);
        } else
        {
            base.OnClick(e);
            showText = "Tapped";
        }
        Invalidate();
    }
    private void TestTapAndHold_MouseDown(object sender, MouseEventArgs e)
    {
        mouseDown = DateTime.Now;
    }
} 
```

构建应用程序，然后将其中一个测试控件弹出到表单上。然后，您可以将事件处理程序添加到您的表单中，例如：

```
 private void testTapAndHold1_TapAndHold(EventArgs e)
    {
        MessageBox.Show("You tapped and Held");
    } 
```

这种通用方法使我能够将“点击并按住”功能添加到在 Microsoft Surface 4 上运行的 Windows 窗体应用程序中

# ruby - Ruby Koans - about_arrays.rb

> ID：15058827
> 
> 赞同：3
> 
> 时间：2013-02-25T01:29:15.863
> 
> 标签：ruby, arrays

我正在处理 Ruby Koans 中的 about_arrays.rb 文件，我注意到了这段代码，但我不确定为什么答案是这样的：

```
def test_slicing_arrays
  array = [:peanut, :butter, :and, :jelly]

  assert_equal [], array[4,0]
  assert_equal [], array[4,100]
  assert_equal nil, array[5,0]
end 
```

根据 Ruby Koans 的输出，有人可以向我解释为什么`array[4,0]`会评估为`[]`而`array[5,0]`评估为`nil?`. 为什么不`array[5,0]`评估到`[]`？

出于好奇，我尝试了`array[6,0]`,`array[7,0]`等等，但也得到了 nil。Ruby 是否为数组索引下一行添加了一些特殊的东西？

* * *

编辑：

我发现“ [Ruby 中的数组切片：寻找不合逻辑行为的解释（取自 Rubykoans.com）](https://stackoverflow.com/questions/3568222/array-slicing-in-ruby-looking-for-explanation-for-illogical-behaviour-taken-fr?rq=1) ”，它提出了同样的问题，但我仍然不了解索引在数组切片中的工作原理。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-25T01:32:07.717

> s[n, 0] 定义了一个字符之前或之后的位置，通常在一个字符之前和之后。

[来源](http://blade.nagaokaut.ac.jp/cgi-bin/scat.rb/ruby/ruby-talk/380637)。

切片的第一个*参数*是下限。当它是 时`4`，它仍然是数组的一部分，只是指向最后。当下限超出数组的长度时，它总是`nil`.

最好考虑元素值之间的空格偏移量。

[红宝石小提琴](http://rubyfiddle.com/riddles/1f69e)。

# python - Eclipse 与 mac os x lion 上的 pep8 集成

> ID：15058828
> 
> 赞同：0
> 
> 时间：2013-02-25T01:29:17.243
> 
> 标签：python, pydev, pep8

我正在尝试在 Eclipse 中为 PyDev 项目正确设置 pep8，一切似乎都已正确配置 - 它已经使用 PyDev 进行了配置，但我也按照网上找到的一些教程来检查一切是否正常，我认为是这样，但它还是不行。

我故意用驼峰表示法制作了一些未使用的导入和方法，但我仍然没有得到任何微小的警告。

这是我对 Eclipse->Prefrences->PyDev->Editor->Code analysis 的配置：

```
1st tab Do code analysis + On any succesful parse are checked 
6th tab Pep8 warning is checked, redirect pep8 output to console is checked too
path to pep8 ==> /Applications/eclipse/plugins/org.python.pydev_2.6.0.2012062818/pysrc/third_party/pep8/pep8.py 
```

我尝试使用这些设置，但没有帮助，所以我将它们保留为默认设置。

我确实重启了 Eclipse 几次，我使用的是 mac os x 10.7.5

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T02:02:06.983

该[`pep8`](https://pypi.python.org/pypi/pep8)工具不检查 CamelCase 方法或未使用的导入：

*   对于命名约定，请尝试实验性`pep8-naming`插件（在 PyPI 上）。
*   对于未使用的导入，这由`pyflakes`（在 PyPI 上）覆盖。

所有这些工具都包装在[`flake8`](https://pypi.python.org/pypi/flake8)检查器中。

# php - Silverstripe 仅创建索引但不创建外键

> ID：15058829
> 
> 赞同：1
> 
> 时间：2013-02-25T01:29:29.217
> 
> 标签：php, postgresql, foreign-keys, silverstripe

我正在使用 SilverStripe 的 PostgresSQL 模块。

我的问题是我可以定义关系，例如：

```
public static $has_one = array( 
'PageRedirect' => 'SiteTree', 
); 
```

这段代码将做的是，它将使用具有命名模式的索引创建数据库：ix_tablename_pageredirectId 但是没有创建外键。

此外，SilverStripe 似乎在空关系的列中写入“0”而不是“null”。所以实际上你甚至不能创建那些外键约束，因为 SilverStripe 会不断地违反它们。

如何在数据库中为适当的外键约束配置 SilverStripe？

这是 SilverStripe v2.4.x

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T07:54:13.343

不幸的是，SilverStripe 2.x 或 3.x 根本无法做到这一点，并且在获得支持方面没有积极的发展。值得一提的是，我们正在努力使数据库层更加模块化（[announcement](https://groups.google.com/forum/?fromgroups#!topic/silverstripe-dev/jLk3bgeCebI)，这应该允许更轻松地实现引用完整性。

[silverstripe.org](http://www.silverstripe.org/archive/show/63)上也有关于该主题的（相当古老的）讨论。

# c++ - 边连通图

> ID：15058834
> 
> 赞同：0
> 
> 时间：2013-02-25T01:29:56.900
> 
> 标签：c++, algorithm, graph, matrix

我需要解决 3 边连通性问题的算法的伪代码帮助：输入：邻接矩阵格式的图 G

输出：如果对于 G 的每一对顶点 v,w 元素，存在一条从 v 到 w 的路径长度最多为 3，则为真

有任何想法吗？这就是我到目前为止所拥有的。

```
const int WIDTH = 10;
const HIGHT =10;
Int arrayMatrix [WIDTH] [HIGHT];

for (int i =0; i< WIDTH; i++)
{
for (int j =0; j<HIGHT; j++)
{
int countEdges =0;
countEdges = countEdges +arrayMatrix [i];
}
if countEdges<=3
cout << "True for 3-edge connectivity problem" << endl;
else 
cout <<"Not found" << enld; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T01:40:18.877

您可以使用类似于 Warshall-Floyd 算法的技术来计算 G^3，但是对于矩阵乘法，您有以下操作

(X * Y)ij = OR [所有 k] (Xik AND Ykj)。

现在计算 (G*G)*G （使用您的输入邻接矩阵）。

如果结果矩阵仅包含“真”元素，则返回真。

# permissions - 在 FQL 中获取我朋友喜欢的音乐

> ID：15058840
> 
> 赞同：0
> 
> 时间：2013-02-25T01:31:29.123
> 
> 标签：permissions, facebook-fql

我正在尝试使用`user`and`friend`表使用以下查询来获取我朋友喜欢的音乐：

```
SELECT name, music 
FROM user 
WHERE uid IN 
   (SELECT uid2 FROM friend WHERE uid1 = me() LIMIT 250) 
```

它正确地抓住了所有的名字，但所有的音乐结果都只是“”。这与权限有关吗？如果是这样，你能解释一下如何解决这个问题以及我的选择是什么？（我是 FQL 的新手）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T01:48:58.690

我解决了这个问题。问题是我在登录时没有获得 user_likes 和friend_likes 权限。为了解决这个问题，我简单地将 perms="user_likes, friends_likes" 添加到我的登录按钮中：

```
 <div class="fb-login-button" data-show-faces="true" data-width="200" 
        data-max-rows="4" perms="user_likes, friends_likes" size="xlarge">Connect</div> 
```

# git - 打印分支描述

> ID：15058844
> 
> 赞同：18
> 
> 时间：2013-02-25T01:32:01.840
> 
> 标签：git

Git 支持一个名为 --edit-description 的分支命令选项，它声明它被“各种”其他命令使用。一个不使用的命令（至少默认情况下）是 git branch （当用于简单地列出本地分支时）。有没有办法让 git branch 显示分支描述（详细选项看起来只是添加了分支上的最后一次提交）？

为了清楚起见，我想要以下内容

```
> git branch
* master      I am the alpha and the omega
  bugfix1     This is the fix to that thing
  future      Transition to the new architecture 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-25T07:53:45.723

我确认现在无法显示分支的描述`git branch`（而不是`git config`，请参阅下面此答案的最后一部分）。

[该线程](http://git.661346.n2.nabble.com/More-support-on-branch-description-td7204093.html)包括

> > 即将到来的 v1.7.9 将引入分支描述，主要用于集成过程。我认为我们可以使它对不广泛使用 request-pull/format-patch 的用户有用。在“”中显示一个简短的摘要以及分支名称`git branch`会很好。
> 
> 我同意即使分支最终被您合并到主分支并且永远不会自行离开您的存储库，让用户访问信息也会很好。
> 
> 但是，您被误导说“沿...显示简短摘要”。
> 
> 分支描述支持是为用户提供一个记录有关分支的详细说明的地方，其大小类似于您通常放置在提交的日志消息或系列的求职信中的内容。
> 对于（1）在开发过程中本质上是一个移动目标并且（2）与标签和注释不匹配的分支，没有任何方便的地方可以这样做。
> 
> 已经有一个简短的总结的好地方，它被称为“分支名称”。像命名函数一样命名分支。

建议的补丁“ [`git branch --verbose-format`](http://thread.gmane.org/gmane.comp.version-control.git/186727)”尚未完成。

因此[poke](https://stackoverflow.com/users/216074/poke)[提到](https://stackoverflow.com/questions/15058844/print-branch-description#comment21172842_15058844)的[脚本](https://gist.github.com/pdfr/2658582) 仍然是（带有）一种可能的解决方案：`git alias`

```
#!/bin/perl

$output= `git branch`;

foreach my $line (split(/^/, $output)) {
  my ($is_current, $name) = split(/\s+/, $line);
  my $description = `git config branch.$name.description`;

  $description =~ s/\s+$//;
  printf("%1s %-22s %s\n", $is_current, $name, $description);
} 
```

* * *

[菲利普奥克利](http://%20https://stackoverflow.com/users/717355/philip-oakley)在评论中建议：

> 您可以使用`git config`命令显示分支描述。
> 
> 为了显示所有分支描述，我有别名
> 
> ```
> brshow = config --get-regexp 'branch.*.description' 
> ```
> 
> ，对于当前的 HEAD 我有
> 
> ```
> brshow1 = !git config --get "branch.$(git rev-parse --abbrev-ref HEAD).description". 
> ```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2017-03-07T04:48:12.680

在终端上点击这个。如果您的分支有一些描述，这将显示带有描述的分支。

**第1步：**

```
vi ~/.bashrc 
```

**第2步：** 把这个

```
alias git-describe-branches='for line in $(git branch); do 
     description=$(git config branch.$line.description)
     if [ -n "$description" ]; then
       echo "$line     $description"
     fi
done' 
```

**第 3 步：**

```
source ~/.bashrc 
```

**第4步：**

```
git-describe-branches 
```

**或者**

```
for line in $(git branch); do 
     description=$(git config branch.$line.description)
     if [ -n "$description" ]; then
       echo "$line     $description"
     fi
done 
```

笔记：

1.  在 git 工作目录中运行它。

2.  如果您的分支有描述，将显示描述。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-06-14T17:58:44.560

我知道自从被问到这个问题已经很久了，但我刚开始使用分支描述，并在寻找展示创意时遇到了这个问题。

**关于 bash 脚本答案**：它只打印具有描述的分支。我想模仿`git branch`输出，但也有描述。

**关于 perl 脚本答案**：格式化失败，分支名称较长。如果您处于分离的 HEAD 状态，它也会输出螺旋度。

我尝试了python，这就是我想出的。它用以前的答案解决了我的问题。

```
#!/usr/bin/python
import subprocess
import sys

def git(*args):
    return subprocess.check_output(['/usr/bin/git'] + list(args)).strip()

try:
    branches = git('branch').split('\n')
except subprocess.CalledProcessError:
    sys.exit(1)

longest = len(max(branches, key=len))
for branch in branches:
    active = '*' if branch[0] == '*' else ''
    branch = branch.lstrip(' *')
    try:
        desc = git('config', 'branch.'+branch+'.description')
    except subprocess.CalledProcessError:
        print '{:2}{}'.format(active, branch)
    else:
        print '{:2}{:{}}  {}'.format(active, branch, longest, desc) 
```

展品 A

```
[user|host ~/git/repo((HEAD detached at origin/master))]% git bd
* (HEAD detached at origin/master)
  branch_a
  delete_this_after_a_little_while_pls_thx_bye    long branch description
  other_branch
  yay_branches_amirite                            PR under review 
```

展品 B

```
[user|host ~/git/repo(other_branch_name)]% git bd
  branch_a
  delete_this_after_a_little_while_pls_thx_bye    long branch description
* other_branch
  yay_branches_amirite                            PR under review 
```

展品 C

```
[user|host ~/non_git_repo]% git bd
fatal: Not a git repository (or any of the parent directories): .git 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-01-24T10:45:22.167

我从 Sahil Gulati 那里得到灵感并做了这个：

```
alias git-describe-branches='git branch | while read line; do 
     description=$(git config branch.$(echo "$line" | sed "s/\* //g").description)
     echo "$line     $description"
done' 
```

例子：

```
$ git-describe-branches 
bugfixdatum     
feat32     
feat53     
feat56     
* feat57     Projektlista
feat65     
feat72     
feat75     Prevent replacing lager with empty inventering
master     
referens 
```

这也打印了没有描述的分支，而 sed 命令是因为当前分支由于星号字符需要特殊处理。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-08-29T16:13:49.967

我在 2017 年仍然找不到好的解决方案。

不过，我想出了另一个解决方案。更改当前分支后需要第一行以更新 BRANCH_DESCRIPTION 文件。它只是使用“无操作编辑器”运行编辑描述工具。然后您可以简单地从文件中获取描述`.git/BRANCH_DESCRIPTION`。

```
(export GIT_EDITOR=':';git branch --edit-description); 
cat $GITREPOSITORY/.git/BRANCH_DESCRIPTION 
```

笔记：

这可能不是记录/稳定的行为。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-10-10T07:07:47.547

bash 命令：

```
eval "git config branch.`git branch --show-current`.description" 
```

如果有别名：

```
alias gs='git status && eval "git config branch.`git branch --show-current`.description"' 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2022-01-07T09:53:11.577

我的回答也从 Sahil Gulati 那里获得了灵感。我希望脚本还包括没有描述的分支，让它看起来像往常一样漂亮`git branch`，所以我添加了一些颜色和填充。

所以你可以做这样的事情。

创建一个脚本，例如`~/git-branch-show-descriptions.sh`并添加执行权限。

```
branches=$(git branch --format="%(refname:short)")
current=$(git branch --show-current)
no_color='\033[0m'
green='\033[0;32m'
pad="                               "
pad_length=31

for line in $branches
    do
        description=$(git config branch.$line.description)
        padded_line="${line}${pad}"
        formatted_line="${padded_line:0:pad_length} ${description}"
        [ $line = $current ] \
            && echo -e "* ${green}${formatted_line}${no_color}" \
            || echo    "  $formatted_line"
    done 
```

将别名添加到`~/.bashrc`

```
alias git-branch-show-descriptions=~/git-branch-show-descriptions.sh 
```

并获取它或重新启动 bash。

```
source ~/.bashrc 
```

这应该显示对所有拥有它们的分支的描述，以及那些没有的分支的名称。选定的分支将显示为绿色。

# javascript - 如何使用 Mocha 测试 Promise

> ID：15058847
> 
> 赞同：12
> 
> 时间：2013-02-25T01:32:20.723
> 
> 标签：javascript, mocha.js, chai, es6-promise, chai-as-promised

我正在使用 Mocha 来测试一个返回承诺的异步函数。

测试承诺解析为正确值的最佳方法是什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2015-12-06T14:50:48.830

Mocha has built-in Promise support as of version 1.18.0 (March 2014). You can return a promise from a test case, and Mocha will wait for it:

```
it('does something asynchronous', function() { // note: no `done` argument
  return getSomePromise().then(function(value) {
    expect(value).to.equal('foo');
  });
}); 
```

Don't forget the `return` keyword on the second line. If you accidentally omit it, Mocha will assume your test is synchronous, and it won't wait for the `.then` function, so your test will always pass even when the assertion fails.

* * *

If this gets too repetitive, you may want to use the [chai-as-promised](https://github.com/domenic/chai-as-promised) library, which gives you an `eventually` property to test promises more easily:

```
it('does something asynchronous', function() {
  return expect(getSomePromise()).to.eventually.equal('foo');
});

it('fails asynchronously', function() {
  return expect(getAnotherPromise()).to.be.rejectedWith(Error, /some message/);
}); 
```

Again, don't forget the `return` keyword!

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-25T13:22:17.573

然后“返回”一个可用于处理错误的承诺。大多数库都支持一种方法`done`，该方法将确保抛出任何未处理的错误。

```
it('does something asynchronous', function (done) {
  getSomePromise()
    .then(function (value) {
      value.should.equal('foo')
    })
    .done(() => done(), done);
}); 
```

您还可以使用[mocha-as-promised 之](https://github.com/domenic/mocha-as-promised)类的东西（其他测试框架也有类似的库）。如果您正在运行服务器端：

```
npm install mocha-as-promised 
```

然后在脚本的开头：

```
require("mocha-as-promised")(); 
```

如果您正在运行客户端：

```
<script src="mocha-as-promised.js"></script> 
```

然后在您的测试中，您可以返回承诺：

```
it('does something asynchronous', function () {
  return getSomePromise()
    .then(function (value) {
      value.should.equal('foo')
    });
}); 
```

或在咖啡脚本中（根据您的原始示例）

```
it 'does something asynchronous', () ->
  getSomePromise().then (value) =>
    value.should.equal 'foo' 
```

# javascript - jquery - 在输入 2 位数字后触发 keyup 事件

> ID：15058848
> 
> 赞同：0
> 
> 时间：2013-02-25T01:32:44.577
> 
> 标签：javascript, jquery, html

我已经实现了以下代码：（此处为[http://jsfiddle.net/MvWV7/3/](http://jsfiddle.net/MvWV7/3/)示例）

```
 $(".activity_order").keyup(function() {
    var $t = $(this)
    $.map($(".activity_order").not("#"+$t.attr("id")), function(t) {
      if(t.value === $t.val() && $t.val() != ""){
        console.log("number already taken")
        $t.val("")
      }
    })
  }) 
```

一切都按预期工作，直到输入超过 10，然后 keyup 事件不允许我使用 2 位数字。

我正在考虑的一个解决方案是添加超时，但我不确定这是否是最好的方法。也许我缺少一些东西可以在没有超时的情况下实现这一点。

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T01:36:29.163

你可以使用`setTimeout`函数。

```
var t = '';
$(".activity_order").keyup(function () {
    var self = this;
    clearTimeout(t);
    t = setTimeout(function () {
        $(".activity_order").not(self).each(function (t) {
            if (this.value === self.value && self.value != "") {
                // alert("El número ya ha sido tomado")
                self.value = ""
            }
        })
    }, 280);
}); 
```

[http://jsfiddle.net/zhdez/](http://jsfiddle.net/zhdez/)

# joomla2.5 - 当用户分配到组时如何在joomla中通知用户

> ID：15058852
> 
> 赞同：0
> 
> 时间：2013-02-25T01:33:01.657
> 
> 标签：joomla2.5, usergroups

在我的项目中，我制作了一个组件，通过表单为 Joomla 和 Virtuemart 创建一个用户。管理员要求在管理员决定之前不要将任何组分配给新创建的用户。用户也必须自动激活。请不要问我为什么，这是我被要求做的:(

当管理员将用户组分配给用户时，应向用户发送一封电子邮件以通知用户此操作，以便用户可以登录。

我找不到任何解决方案，我也找不到当用户分配给用户组时通知我的触发器，所以我为它制作了一个插件。

Joomla 是 2.5.8

先感谢您。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T12:29:39.067

您可以使用[JUtility/sendMail](http://docs.joomla.org/JUtility/sendMail)发送电子邮件。

现在在哪里使用 sendMail 触发电子邮件？

去`/libraries/joomla/user/helper.php`档案。

里面，有一个方法`public static function addUserToGroup($userId, $groupId)`。

很可能这是被调用的方法。如果将 userid 分配给 groupid 成功，您可以扩展/覆盖此方法以添加自定义自定义代码以触发电子邮件。

您可以在这部分检查布尔返回值。

```
// Store the user object.           
$user->save(); 
```

所以如果成功了，邮件就会被触发！

希望能帮助到你！欢迎任何更好的想法。

# iexpress - iexpress 不执行安装程序

> ID：15058853
> 
> 赞同：2
> 
> 时间：2013-02-25T01:33:11.090
> 
> 标签：iexpress

我有一个 install.bat 文件和一个资源文件夹。只要这两个文件在同一个目录下，如果你运行 install.bat，它就会安装一个我的 lwjgl 游戏。所以我想做的是制作一个自解压文件，完成后运行launch.bat文件。我尝试过使用 iexpress，并且大部分时间都可以使用。我已经添加了我所有的文件等，所以它会提取到某个目录，然后我可以运行 install.bat 文件来让我的程序工作。不过，我希望我用 iexpress 创建的 exe 在完成后启动 install.bat。所以，我尝试使用 iexpress 中的选项，该选项表示它将在完成“安装”时执行命令（使用引号，因为它不是实际安装，只是将文件提取到用户指定的某个目录）。当我到达它说我想在“安装”期间和之后执行的步骤时。在安装过程中我留空。安装后我选择了 install.bat 文件。当我尝试单击下一步时，它告诉我必须在提取过程中为命令选择一些东西。在安装过程中我没有任何具体的事情要做，所以我只是说“回声”。（不带引号）。完成后，我尝试运行安装程序。在它甚至提示我要提取一个文件夹之前，它就告诉了我那个回声。无法执行。所以我回到我的安装中（通过 .sed 文件）并更改了“回声”。“暂停”。那也没有用。然后我在另一个网站上读到，为了以我想要的方式运行文件，我将文件名放在安装期间和安装后的框中。我试过这样做，但也没有用。谁能帮帮我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T06:04:53.363

如果我正确理解了您的问题，您将需要在提供的安装后命令选项中指定 iexpress 必须执行的操作，以便使用它`cmd.exe`来代替`command.com`，例如：

```
cmd.exe /c filethatyouwanttorun.bat 
```

请参阅问题：[为 iexpress 创建批处理文件](https://stackoverflow.com/questions/10448897/create-batch-file-for-iexpress)。

您可以使用 SED 文件，然后修改自提取指令。这将运行您想要运行的批处理文件，然后安装应用程序。（如果您选择了在 iexpress 中提取并运行安装的选项，我想将使用一个临时文件夹进行提取。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-03T04:38:02.683

我不确定我是否完全理解您的问题，但也许有几点会有所帮助：

1.  如果你想要一个“什么都不做”命令，你可以使用类似的东西：

    ```
    cmd /c echo. 
    ```

2.  没有“提取期间的命令”。只有一个*安装程序*和一个*安装后命令*。这两个都在提取后执行。如果您只需要执行一个批处理文件，请将其放在*安装程序*行中，并将*安装后命令*留空。

3.  您不能向用户询问提取路径并执行文件。你只能做一个或另一个。（不过，安装程序会提示用户并将文件复制到那里。）

# javascript - 从 HTML5 本地存储项创建 JSON 数组

> ID：15058854
> 
> 赞同：1
> 
> 时间：2013-02-25T01:33:29.680
> 
> 标签：javascript, json, html, jquery-ui-map

我在我的科尔多瓦 iOS 应用程序中使用 jquery ui 地图，并且需要在 JSON 中编码我的所有数据库结果（纬度和经度）。我已经设置了 localstorage 元素，并且知道我收到了正确的响应，但我不知道如何将所有结果编码为 JSON 数组。我试过使用`for`循环，但我一定是做错了，因为我的代码失败了。还有一件事，我知道地图有效，并且添加标记也有效，但我使用了演示 json 数组。我需要用自己的对象创建自己的数组，但不知道该怎么做。谢谢您的帮助。

地图.HTML

```
 <script type="text/javascript">
        $(document).ready(function() {
                $('#map_canvas').gmap().bind('init', function(evt, map) {
                    $('#map_canvas').gmap('getCurrentPosition', function(position, status) {
                        if ( status === 'OK' ) {
                            var clientPosition = new google.maps.LatLng(position.coords.latitude, position.coords.longitude);
                            $('#map_canvas').gmap('addMarker', {'position': clientPosition, 'bounds': true});
                            $('#map_canvas').gmap('addShape', 'Circle', {
                                'strokeWeight': 0,
                                'fillColor': "#008595",
                                'fillOpacity': 0.25,
                                'center': clientPosition,
                                'radius': 15,
                                'clickable': false
                            });
                        }
                    });
                });
                var name = localStorage.getItem("name");
                var lat = localStorage.getItem("lat");
                var lon = localStorage.getItem("lon");
                var it = localStorage.getItem("it");

                alert(lat);
            });
        </script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-22T14:38:54.640

您需要将 JSON 对象转换为字符串并存储该字符串。
用于`JSON.stringify(yourObject)`转换为字符串和`JSON.parse([your Object from localstorage])`.
查看类似[问题](https://stackoverflow.com/questions/2010892/storing-objects-in-html5-localstorage)

# c - 用字符串递归遍历树

> ID：15058857
> 
> 赞同：0
> 
> 时间：2013-02-25T01:35:01.023
> 
> 标签：c, string, pointers, recursion

我正在尝试递归遍历一棵树并通过递归携带一个字符串。

这个想法是（对于霍夫曼编码），从根开始，如果你向左，将一个 0 连接到你的字符串，如果你向右，连接一个 1。当你到达叶子时，你的最终字符串是一个 0 的字符串和 1s 那是你的“编码”。

这是我的功能：

```
void encode_tree(bin_node *root, char *string)
{
if(root->left==NULL && root->right==NULL)
{
    root->encoding = string;
    printf("%d got an encoding of %s\n", root->data, root->encoding);
    return;
}

root->encoding = string;
encode_tree(root->left, strcat(string, "0"));
encode_tree(root->right, strcat(string, "1"));
} 
```

但是这段代码是错误的，它给了我不正确的编码。

假设我有这棵树：

```
 3\65

        6\-1

            3\70

    9\-1

            2\66

        3\-1

            1\67
16\-1

    7\68 
```

我对 7/86 的编码应该是 0，1/67 应该是 100，2/66 应该是 101，3/70 应该是 110，3/65 应该是 111。

但这是我从函数中获得的编码：

```
 7/68 got an encoding of 0
 1/67 got an encoding of 0100
 2/66 got an encoding of 01001
 3/70 got an encoding of 0100110
 3/65 got an encoding of 01001101 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T01:41:03.617

这里的问题是您**只分配了一个唯一的字符串**，并且您试图为每个元素赋予其自己的唯一编码。这是行不通的，因为到最后，**它们都指的是 SAME string**。

您需要使用`strdup`或分配一个新字符串，并在`string`每次要将其分配给`bin_node::encoding`

改变

```
root->encoding = string; 
```

设置编码（根，字符串）；

在哪里

```
void SetEncoding(bin_node* n, char* e)
{
    char *d = malloc (strlen (e) + 1);   // Space for length plus nul
    if (d == NULL) return NULL;          // No memory
    strcpy (d,s);                        // Copy the characters
    n->encoding = d; 
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T03:03:40.567

strcat 具有将字符附加到字符串末尾的效果，但是从末尾删除字符的代码在哪里？请注意在下面的示例中，“1”值如何替换“0”值。您的代码并非如此；您的代码附加了“0”，然后在“0”之后附加了“1”。

```
// usage: encode_tree(root, string, string);
void encode_tree(bin_node *root, char *string, char *end)
{
    if(root->left==NULL && root->right==NULL)
    {
        *end = '\0';
        printf("%d got an encoding of %s\n", root->data, root->encoding);
        return;
    }

    root->encoding = string;
    *end = '0'; encode_tree(root->left, string, end + 1);
    *end = '1'; encode_tree(root->right, string, end + 1); 
```

}

# leiningen - Clojurescript 库 - goog.require 找不到

> ID：15058859
> 
> 赞同：6
> 
> 时间：2013-02-25T01:35:38.107
> 
> 标签：leiningen, clojurescript, cljsbuild

clojurescript 的新手，并在[此处](https://github.com/magomimmo/modern-cljs/)完成“现代 CLJS”教程。

它指示通过将其添加到以下内容来[拉入多米纳](https://github.com/levand/domina)`project.clj`：

```
:dependencies [[org.clojure/clojure "1.4.0"]
               [compojure "1.1.5"]
               [domina "1.0.0"]] 
```

`ns`然后通过在表单中​​引用它在你的脚本中使用它

```
(ns cljstut.login
  (:use [domina :only [by-id value]])) 
```

但是，当我实际在浏览器中运行它时，我会在控制台日志中看到以下内容。

```
goog.require could not find: domina 
```

好像我在某处遗漏了一些声明？但作为新手，整个构建过程相当不透明。非常感谢任何故障排除提示。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-03-28T12:49:02.793

此外，请确保您已保存`project.clj`文件并尝试运行`lein clean`和`lein cljsbuild clean`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-25T04:50:27.887

您的文件和命名空间声明中的依赖`project.clj`项看起来不错。

如果您正在使用 构建您的 clojurescript 代码`lein cljsbuild auto`，则需要重新启动该过程。我相信它应该在重新启动后自动引入新的依赖项。

如果这不起作用，或者您没有使用`lein cljsbuild auto`，请尝试`lein deps`在项目文件夹中手动运行该命令 - 它将从远程存储库中获取所有缺少的依赖项。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-03T16:15:03.687

我正在将modern-cljs 更新为使用的libs 和lein 插件的最新版本。目前，我将该系列更新到该系列的第 7 篇教程。您现在应该安全了，将 domina 1.0.2-SNAPSHOT 更新到 project.cljs :dependencies 并将 lein-cljsbuild 0.3.0 更新到 project.cljs :plugins。

咪咪

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-09-10T20:00:55.400

只想添加命名空间中的拼写错误会触发相同的错误消息：

> goog.require 找不到：domina

示例（注意modern-cljs 中缺少的“j”）：

```
(ns modern-cls.login
  (:use [domina :only [by-id value]])) 
```

为了勇敢，我使用了不同的项目名称，因此使用了不同的命名空间。当我从指南中复制粘贴时，它咬了我的屁股，这个错误让我困惑了一段时间:)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-07-12T19:50:15.670

我在学习“现代 CLJS”教程时遇到了同样的问题。我的问题是无意中将“domina”依赖项添加到 project.clj 的 :plugins 部分而不是 :dependencies 部分。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-10-14T21:47:30.223

我通过在 index.html 文件中以正确的顺序放置行来解决此错误消息。

正确的顺序：

```
<script src="js/expanding_gases.js" type="text/javascript"></script>
<script type="text/javascript">goog.require("expanding_gases.flow_gases");</script> 
```

错误的顺序：

```
<script type="text/javascript">goog.require("expanding_gases.flow_gases");</script>
<script src="js/expanding_gases.js" type="text/javascript"></script> 
```

顺便说一句，了解“goog”消息的好读物在这里： [https ://github.com/clojure/clojurescript/wiki/Quick-Start](https://github.com/clojure/clojurescript/wiki/Quick-Start)

# python-3.x - Python 3.2 TypeError - 无法弄清楚这意味着什么

> ID：15058861
> 
> 赞同：1
> 
> 时间：2013-02-25T01:35:56.463
> 
> 标签：python-3.x

我最初将这段代码放在 Python 2.7 中，但由于工作需要迁移到 Python 3.x。我一直在试图弄清楚如何让这段代码在 Python 3.2 中工作，但没有成功。

```
import subprocess
cmd = subprocess.Popen('net use', shell=True, stdout=subprocess.PIPE)
for line in cmd.stdout:
    if 'no' in line:
        print (line) 
```

我收到这个错误

```
if 'no' in (line):
TypeError: Type str doesn't support the buffer API 
```

谁能回答我为什么会这样和/或一些要阅读的文档？

非常感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T01:44:07.857

Python 3`bytes`在很多没有明确定义编码的地方都使用了该类型。您的`stdout`子进程是一个使用字节数据的文件对象。因此，您无法检查字节对象中是否存在某些字符串，例如：

```
>>> 'no' in b'some bytes string'
Traceback (most recent call last):
  File "<pyshell#13>", line 1, in <module>
    'no' in b'some bytes string'
TypeError: Type str doesn't support the buffer API 
```

您需要做的是测试字节字符串是否包含另一个*字节*字符串：

```
>>> b'no' in b'some bytes string'
False 
```

所以，回到你的问题，这应该有效：

```
if b'no' in line:
    print(line) 
```

# javascript - 如何重命名fancybox标题属性重命名为fancytitle

> ID：15058862
> 
> 赞同：0
> 
> 时间：2013-02-25T01:36:02.757
> 
> 标签：javascript, jquery, web, fancybox

如果您想将fancybox v2 中使用的title 属性更改为fancyboxtitle，这就是方法。我需要更改它的原因是因为我需要将常规标题属性用于略有不同的工具提示/替代文本。

```
 if (isQuery(element)) {
                    obj = {
                        href    : element.data('fancybox-href') || element.attr('href'),
                        title   : element.data('fancybox-title') || element.attr('fancytitle'), /* Changed to fancy-title*/
                        isDom   : true,
                        element : element
                    }; 
```

# bash - 如何欺骗 stdin 是终端（而不是重定向文件）的程序？

> ID：15058863
> 
> 赞同：3
> 
> 时间：2013-02-25T01:36:06.003
> 
> 标签：bash, terminal, stdin

我正在做标准重定向：

```
$ cat file.txt | /usr/bin/program 
```

但是如果我直接在终端中运行它并复制粘贴输入，程序的行为会有所不同。当输入是终端时，它会显示一个进度条。无论如何，我想要进度条。

简而言之，我怎样才能“欺骗”输入来自终端而不是从文件重定向的程序？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-25T03:30:47.787

使用该[`expect`](http://expect.nist.gov/)程序可能是最简单的；它为您完成了大部分必要的工作。

必要的工作很繁琐。它涉及使用伪 tty，这些设备看起来像终端一样的程序。如果您要自己动手，那么您需要了解的 POSIX 系统调用是：

*   [`posix_openpt()`](http://pubs.opengroup.org/onlinepubs/9699919799/functions/posix_openpt.html)
*   [`ptsname()`](http://pubs.opengroup.org/onlinepubs/9699919799/functions/ptsname.html)
*   [`granpt()`](http://pubs.opengroup.org/onlinepubs/9699919799/functions/grantpt.html)
*   [`unlockpt()`](http://pubs.opengroup.org/onlinepubs/9699919799/functions/unlockpt.html)

界面相对较新（第`posix_openpt()`6 版，与第 4 版相比，第 2 版列出的其他功能）。如果您的系统没有`posix_openpt()`，您需要为自己找一本 Unix 书籍（可能是 Stevens 或 Rochkind），以了解如何打开 pty 的 master 端，或者仔细阅读您的系统手册。但是，上面链接中的基本原理`posix_openpt()`也可能有所帮助——它也有使用其他功能的指南。Linux 有`posix_openpt()`；Mac OS X 也是如此，通常通过推断 BSD 系统。

图书：

*   W Richard Stevens，Stephen A Rago [Unix 环境中的高级编程，第三版](https://rads.stackoverflow.com/amzn/click/com/0321637739)

*   Marc J Rochkind [高级 Unix 编程，第二版](https://rads.stackoverflow.com/amzn/click/com/0131411543)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-25T01:54:47.983

您需要使用伪 tty 来获得您想要的效果。'man pty' 会告诉你更多关于它的信息。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-25T01:58:01.937

我假设程序将调用 glibc 函数`isatty()`来检查 stdin/stdout 是否是终端。这对于在终端上使用彩色输出或 ANSI 终端的其他功能（如光标定位或行擦除/重绘）的程序很常见。

您可以使用 LD_PRELOAD 环境变量来欺骗程序。LD_PRELOAD 由 ELF 链接器处理，并告诉动态库应该在所有其他库**之前加载。**使用此功能可以覆盖库函数，在您的情况下是 glibc 函数`isatty()`。

这里有一个例子：

*libisatty.c*

```
/**
 * Overrides the glibc function. Will always return true.
 *
 * Note: Although this should be ok for most applications it can
 * lead to unwanted side effects. It depends on the question
 * why the programm calls isatty()
 */
int isatty(int param) {
    return 1;
} 
```

*生成文件*

```
# Make the shared Library
lib: libisatty.c
    gcc -shared -Wl,-soname,libisatty.so.1 -o libisatty.so.1.0  libisatty.c 
    ln -s libisatty.so.1.0 libisatty.so.1
    ln -s libisatty.so.1 libisatty.so 
```

跑：

```
make lib 
```

它应该构建得很好，我已经在 Ubuntu12.04 AMD 64 上对其进行了测试。

现在是测试库的时候了。:) 我已经使用该命令`ls --color=auto`进行测试。`ls`调用`isatty()`来决定它是否应该着色它的输出。如果输出被重定向到文件或管道，它将不会被着色。您可以使用以下命令轻松测试：

```
ls --color=auto        # should give you colorized output
ls --color=auto | cat  # will give you monochrome output 
```

现在我们将使用 LD_PRELOAD 环境变量再次尝试第二个命令：

```
LD_PRELOAD=libisatty.so ls --color=auto | cat 
```

您应该看到彩色输出。

# html - 如何在 HTML 中使用正确的撇号而不是“哑引号”？

> ID：15058873
> 
> 赞同：5
> 
> 时间：2013-02-25T01:36:45.130
> 
> 标签：html, css, typography

在文章[中通过几个简单的步骤改善网页排版](http://www.netmagazine.com/features/better-web-typography-few-simple-steps)，它说

> 谈到撇号，它们的正确符号是正确的单引号。业余排版的一个致命的赠品是直引号的存在，也被精通类型的设计师称为“哑引号”。

我一直在使用这些“愚蠢的报价”！

现在，当一个人在编写常规 HTML（而不是 Markdown，它会自动生成撇号）时，应该如何理智地编写正确的撇号？我只是应该注射以前会去`&#8217;`的任何地方吗？`'`是否有自动执行此操作的程序？

专业的网页设计师如何处理这个问题？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-25T01:54:11.150

你有几个选择：

1.  如前所述，使用数字或命名的 HTML 实体。
2.  用单个撇号编写您的 HTML，然后在发布前进行搜索和替换。这是可行的，但如果您不小心，可能会导致意外替换。
3.  使用适用于您的操作系统的键盘序列插入实际的单引号：Mac 上的 option-shift-] 或 PC 上的 alt-0146，并确保以 UTF-8 编码保存和提供 HTML。这样您就不必乱用实体名称，而是采用 UTF-8 干净的工作流程。

# c++ - 如何捕获在 C++ 中运行的命令的 exit_code 和 stderr？

> ID：15058876
> 
> 赞同：21
> 
> 时间：2013-02-25T01:37:35.533
> 
> 标签：c++, popen, stderr, exit-code

我正在编写一个 c++ 程序，它执行和输出（实时）一个 shell 脚本、makefile 或只是另一个程序。但是，当有错误或没有错误时，我希望我的程序以不同的方式返回。

```
#include "execxi.h"

using namespace std;

int execXI::run(string command)
{

    FILE *in;
    char buff[512];
    // is this the check for command execution exited with not 0?
    if(!(in = popen(command.c_str(), "r"))){
            // I want to return the exit code and error message too if any
        return 1;
    }
    // this part echoes the output of the command that's executed
    while(fgets(buff, sizeof(buff), in)!=NULL){
        cout << buff;
    }
    pclose(in);
    return 0;

} 
```

是我到目前为止所拥有的。

假设这个脚本运行`make`来构建一个程序，它给出了一个像这样的错误

```
on_target_webkit_version out/Release/obj/gen/webkit_version.h
Traceback (most recent call last):
  File "../build/webkit_version.py", line 107, in <module>
    sys.exit(main())
  File "../build/webkit_version.py", line 103, in main
    return EmitVersionHeader(*sys.argv[1:])
  File "../build/webkit_version.py", line 86, in EmitVersionHeader
    webkit_revision = GetWebKitRevision(webkit_dir, version_file)
  File "../build/webkit_version.py", line 60, in GetWebKitRevision
    version_info = lastchange.FetchVersionInfo(
AttributeError: 'module' object has no attribute 'FetchVersionInfo'
make: *** [out/Release/obj/gen/webkit_version.h] Error 1 
```

*   我有可能知道这退出时出错了吗？

    *   `else than 0`因为它是一个错误，所以它会退出代码吗？

    *   最后一部分是输出的`stderr`吗？

考虑到`make`exited with code not `0`，比方说`1`，它输出`stderr`是我最终无法捕获这些退出代码和错误消息吗？

如何捕获退出代码并`stderr`在输出程序结果后，并在函数中返回`exit code`/ `stderr`？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2014-06-27T12:42:46.077

如果您对错误代码感兴趣，这是一种更便携的获取方式，而不是除以 256：

```
printf("Exit code: %i\n", WEXITSTATUS(pclose(fp))); 
```

但是，`popen`这是一种方法，因此您要么通过 shell 中通常的重定向样式创建进一步的解决方法，要么按照此未经测试的代码正确执行此操作：

```
#include <unistd.h>
#include <stdio.h>

/* since pipes are unidirectional, we need two pipes.
   one for data to flow from parent's stdout to child's
   stdin and the other for child's stdout to flow to
   parent's stdin */

#define NUM_PIPES          2

#define PARENT_WRITE_PIPE  0
#define PARENT_READ_PIPE   1

int pipes[NUM_PIPES][2];

/* always in a pipe[], pipe[0] is for read and 
   pipe[1] is for write */
#define READ_FD  0
#define WRITE_FD 1

#define PARENT_READ_FD  ( pipes[PARENT_READ_PIPE][READ_FD]   )
#define PARENT_WRITE_FD ( pipes[PARENT_WRITE_PIPE][WRITE_FD] )

#define CHILD_READ_FD   ( pipes[PARENT_WRITE_PIPE][READ_FD]  )
#define CHILD_WRITE_FD  ( pipes[PARENT_READ_PIPE][WRITE_FD]  )

void
main()
{
    int outfd[2];
    int infd[2];

    // pipes for parent to write and read
    pipe(pipes[PARENT_READ_PIPE]);
    pipe(pipes[PARENT_WRITE_PIPE]);

    if(!fork()) {
        char *argv[]={ "/usr/bin/bc", "-q", 0};

        dup2(CHILD_READ_FD, STDIN_FILENO);
        dup2(CHILD_WRITE_FD, STDOUT_FILENO);

        /* Close fds not required by child. Also, we don't
           want the exec'ed program to know these existed */
        close(CHILD_READ_FD);
        close(CHILD_WRITE_FD);
        close(PARENT_READ_FD);
        close(PARENT_WRITE_FD);

        execv(argv[0], argv);
    } else {
        char buffer[100];
        int count;

        /* close fds not required by parent */       
        close(CHILD_READ_FD);
        close(CHILD_WRITE_FD);

        // Write to child’s stdin
        write(PARENT_WRITE_FD, "2^32\n", 5);

        // Read from child’s stdout
        count = read(PARENT_READ_FD, buffer, sizeof(buffer)-1);
        if (count >= 0) {
            buffer[count] = 0;
            printf("%s", buffer);
        } else {
            printf("IO Error\n");
        }
    }
} 
```

代码来自这里：

[http://jineshkj.wordpress.com/2006/12/22/how-to-capture-stdin-stdout-and-stderr-of-child-program/](http://jineshkj.wordpress.com/2006/12/22/how-to-capture-stdin-stdout-and-stderr-of-child-program/)

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-02-28T03:30:55.517

> 子进程的返回值在前~~16~~位 8 位。你必须将pclose的返回值除以256，然后你得到子进程的搜索返回值。

来自[http://bytes.com/topic/c/answers/131694-pclose-returning-termination-status-command](http://bytes.com/topic/c/answers/131694-pclose-returning-termination-status-command)

我的回答`pclose(in)/256`是退出代码。

我仍然不知道如何以不同的方式捕获 stderr 或 sdtout，但在有答案之前，我会接受这个作为我的答案。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-01-24T18:05:43.673

感谢您对退出代码 Logan 的回复。

我相信获得 stderr 的往返会将其重定向到一个临时文件：

```
FILE* f = popen("cmd 2>/tmp/tmpfile.txt", "r"); 
```

# javascript - 谷歌地图 API 地图 - 在正文而不是头部初始化脚本，地图没有出现

> ID：15058885
> 
> 赞同：2
> 
> 时间：2013-02-25T01:40:18.910
> 
> 标签：javascript, google-maps, google-maps-api-3

我正在尝试将谷歌地图添加到预定义和受保护的页面，所以我只能将代码添加到正文部分。我已将脚本放在页面底部，并使用谷歌教程中的异步加载代码，但是，我的 div 仍然是空的。我怀疑 API 没有加载，但不知道如何检查。请问有什么想法吗？

谢谢！

```
<div id="map_canvas" style="width: 650px; height: 350px;">
</div>

<script type="text/javascript">
function initialize() {
  var mapOptions = {
    zoom: 8,
    center: new google.maps.LatLng(-34.397, 150.644),
    mapTypeId: google.maps.MapTypeId.ROADMAP
  }
  var map = new google.maps.Map(document.getElementById("map_canvas"), mapOptions);
}

function loadScript() {
  var script = document.createElement("script");
  script.type = "text/javascript";
  script.src = "http://maps.googleapis.com/maps/api/js?key=AIzaSyDOtp_8dtVzG4kEJEzLw7E5bC187DagTRg&sensor=FALSE&callback=initialize";
}

window.onload = function(){loadScript();};

</script> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-25T03:29:13.060

**1** . 您必须将 script-element 插入到文档中，否则脚本将不会执行：

```
函数加载脚本（）{
  var script = document.createElement("script");
  script.type = "文本/javascript";
  script.src = "http://maps.googleapis.com/maps/api/js?sensor= false &callback=initialize";
  document.body.appendChild(脚本); 
}
```

**2** . 传感器参数（`true`或`false`）必须为小写

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T12:14:28.213

想到 Dr.Molle 的更正，我突然想到我不需要通过函数加载脚本，因为`</body>`无论如何我都在附近编写它。我删除了函数 loadScript 并简单地输入了脚本，瞧，成功了！

# node.js - nodejs为内部应用程序请求复制cookie

> ID：15058887
> 
> 赞同：2
> 
> 时间：2013-02-25T01:40:43.900
> 
> 标签：node.js, session, express

我正在使用 Express 3.x 和 connect-mongo 以及请求模块

我的应用程序有一些中间件，可确保外部请求具有 access_token。检查 access_token 并在会话中存储一些数据。然后，我想对应用程序中的 url 进行内部调用，但内部调用会发出一个新会话（作为来自用户浏览器请求的单独请求）。我想要做的是以某种方式将 Express 签名的 cookie 复制到内部 request() 中，以便中间件根据原始外部会话 ID 执行操作。我尝试将 cookie jar 传递到请求对象中，但它似乎不太支持签名的 cookie。任何想法我怎么能做到这一点？

```
/* Middleware to check access tokens */
app.all("/*", requireAuth, function(req, res, next) {
  next(); 
});

function requireAuth(req,res,next) {

if ( req.query.access_token && !req.session ) {

   // Check the access token and popualte stuff in the session
   req.session.somedata = 'test';

   // Then call a url internall to do something

   // My issue is that this INTERNAL request below gets a new session Id
   // so it itself returns Not Authorised as its hits the same code

   request({
       url: 'someurlinside-this-node-app',
       method: "GET"
   }, function _callback(err, serviceres, body) {
       next();
   });

 }else{
     res.send('Not Authorised');
 }

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-25T04:41:17.073

Cookies 只是另一个标题，所以如果你想传递它，你应该能够做到这一点：

```
var cookies = req.header('Set-Cookie');

request({
       url: 'someurlinside-this-node-app',
       method: "GET",
       headers: { 'Set-Cookie' : cookies}
   } 
```

# android - 使用 jsoup 时如何组织提取的值？

> ID：15058893
> 
> 赞同：0
> 
> 时间：2013-02-25T01:41:09.127
> 
> 标签：android, json, parsing, hashmap, jsoup

你们如何以易于阅读的方式存储使用 jsoup 提取的值？因此，如果您有如下所示的 HTML 代码。

```
<td width="200">country1 </td>
<a href="http://example1.com"></a>
<td width="200">country2 </td>
<a href="http://example2.com"></a>
<td width="200">country3 </td>
<a href="http://example3.com"></a> 
```

我想为每个国家保存**国家**和**href链接**，以后可以轻松阅读它们。我这样做的方式是，我有**两个 ListView**，一个用于国家/地区，一个用于 href 链接。如果用户选择例如 country2 我找到它的索引，然后使用它从另一个 ListView 获取 href 链接。我觉得这个方法不好，请问你们是怎么做的？

顺便说一下，这是我的 jsoup 代码，以防它也需要更多改进。

```
try {
                doc = Jsoup.connect("http://somesite.com").get();

                // Here to get the names inside tag a
                Elements links = doc.select("a");
                for (Element el : links) {

                    links = el.ownText();

                    //Save all the links into String Array. 
                    array_link.add(links);
                    }

                //Here to get the names inside tag td
                Elements linktwo = doc.select("td");
                    for (Element eltwo : linktwo) {

                        linkText = eltwo.ownText();

                        //Save the countries to String Array 
                        array_countries.add(linkText);
                        }

            } catch (IOException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            } 
```

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T10:34:48.183

这是你想要的吗？

```
try {
                Document doc = Jsoup.connect("http://somesite.com").get();

                // Here to get the names inside tag a
                Elements links = doc.select("a");
                Elements linktwo = doc.select("td");
                String eltwo = null;

                int i = 0;
                for (Element el : links) {

                    eltwo = linktwo.get(i).text();

                    //Save all the links into String Array. 
                    array_link.add(el.text());
                    array_countries.add(eltwo);

                    i++;
                    }

            } catch (IOException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            } 
```

# c++ - 随机 1 个未解决的外部错误

> ID：15058894
> 
> 赞同：0
> 
> 时间：2013-02-25T01:41:13.053
> 
> 标签：c++, visual-studio

所以我在我的 c++ 程序中收到一条奇怪的错误消息。目前使用视觉工作室（2012）。我有一个程序将一个数字的每隔一个数字相加，所以 1234567 就像 7+5+3+1=16，然后我取所有未相加的数字并将 em 乘以 2 并将它们相加。然后我将第一个 (16) 的结果相加，并将其添加到第二个的结果中。这是我的代码：

```
#include <iostream>
#include <cmath> 
#include <string>
#include <sstream>

using namespace std;

int sumAltDigits(int);
int sumNonDigits(int);

int main() {
    long cardNumber; //cardNumber must stay as 'long'. Teacher says so.
    string in;
    stringstream ss;
    int total;

    cout << "Please enter a chain of integers: ";
    getline(cin, in);
    ss.clear(); ss.str(in);
    while (!(ss >> cardNumber) || (cardNumber < 1)); {
        cout << sumAltDigits(cardNumber) << endl;
        //get answer
        total = sumAltDigits(cardNumber) + sumNonDigits(cardNumber); //this line causes me an error, sumNonDigits(cardNumber)
    }
    system("pause");
}

// adds every other digit, starting from the right
int sumAltDigits(int cardNumber)
{
    if (cardNumber < 10) 
        return cardNumber;
    return (cardNumber % 10) + sumAltDigits(cardNumber / 100);
}

// adds digits that were not included in previous step, multiply them by 2, then add all digits in those numbers
int sumNonDigits(string cardNumber) // I think the error is also being caused by string cardNumber, but if i try to change that, it screws up this function.
{
    int checkSum = 0;
    int i;
    for (i = cardNumber.length() - 2; i >= 0; i -= 2) {
        int val = ((cardNumber[i] - '0') * 2);
        while (val > 0) {
            checkSum += (val % 10);
            val /= 10;
            cout << checkSum << endl;
        }
    }
    return checkSum;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T01:43:58.713

您已转发声明（并调用）：

```
int sumNonDigits(int); 
```

但是你已经定义了：

```
int sumNonDigits(string cardNumber) 
```

您需要更改一个以匹配另一个。

* * *

如果您将它们都更改为：

```
int sumNonDigits(string cardNumber) 
```

这可能意味着更少的工作，但您需要在此处更改调用：

```
total = sumAltDigits(cardNumber) + sumNonDigits(cardNumber); 
```

...传递 a `[std::]string`，而不是`cardNumber`，即`long`。也许输入字符串`in`会是一个很好的替代品，或者您可能需要[转换`cardNumber`回`string`](https://stackoverflow.com/q/947621/78845). 只有你可以选择！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T01:46:00.553

你有一个`int sumNonDigits(string cardNumber)`但是声明`int sumNonDigits(int);`。你正在排队打电话`sumNonDigits(int)`...

```
total = sumAltDigits(cardNumber) + sumNonDigits(cardNumber); 
```

...但这是一个未解决的外部问题，因为没有定义。

我建议现在完全避免函数声明，并将你的函数体放在它们的第一个使用点之上。

# c# - 临时文件 Asp.net

> ID：15058896
> 
> 赞同：8
> 
> 时间：2013-02-25T01:41:59.840
> 
> 标签：c#, asp.net, temporary-files

是否可以使用以下方式在 asp.net 应用程序中创建临时文件和图像：

如果没有，我该怎么做？（ImagePB是之前处理过的Bitmap）

```
if (System.IO.File.Exists(System.IO.Path.GetTempPath() + @"img" + imgID.ToString() + "PB" + extencao) == true)
{
    try
    {
        System.IO.File.Delete(System.IO.Path.GetTempPath() + @"img" + imgID.ToString() + "PB" + extencao);
        imagePB.Save(System.IO.Path.GetTempPath() + @"img" + imgID.ToString() + "PB" + extencao, imgFormat);
    }
    catch (Exception)
    { }
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-25T01:52:16.340

是的，`GetTempPath()`应该返回一个临时文件路径，并且您发布的代码*应该可以*工作。[http://msdn.microsoft.com/en-us/library/system.io.path.gettemppath.aspx](http://msdn.microsoft.com/en-us/library/system.io.path.gettemppath.aspx)有更多关于如何`GetTempPath()`获取路径的信息。

但是，它不会验证 Temp Path 目录是否存在，或者是否可由应用程序写入。我还没有遇到过`GetTempPath()`返回无法访问的路径的情况。您可能希望在您的应用程序中考虑到这一点来处理这种情况。

还要注意，这很有可能`C:\Windows\Temp`。它可能具有有限的磁盘空间，或者在需要磁盘空间时随时被其他人删除。您可能希望在应用程序中创建一个临时路径，并在不再需要时将其删除。

# jquery - 使用 Jquery 验证插件的 Ajax 远程验证 wordpress 用户名和电子邮件

> ID：15058899
> 
> 赞同：2
> 
> 时间：2013-02-25T01:43:24.023
> 
> 标签：jquery, ajax, wordpress, validation

有谁知道如何使用 jquery 验证插件验证 wordpress 用户名和电子邮件？

我正在尝试使用验证的远程方法检查用户名和电子邮件是否存在。

我注意到 wordpress 具有 username_exists 和 email_exists 等功能，有没有一种快速的方法来完成这项工作？

请帮忙~

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-07-21T21:11:18.457

您可以在客户端使用类似的东西（ajax URL 不必硬编码，请在此处查看注释：http: [//codex.wordpress.org/AJAX_in_Plugins#Ajax_on_the_Viewer-Facing_Side](http://codex.wordpress.org/AJAX_in_Plugins#Ajax_on_the_Viewer-Facing_Side)）：

```
"user_email":{
        remote: {
            url: 'YOURSITE.COM/wp-admin/admin-ajax.php',
            type: "post",
            data: {
               'user_email': function() {
                    return $( "#user_email" ).val();
                },
               'action': 'check_user_email'

            }
        }
} 
```

这在functions.php中：

```
add_action( 'wp_ajax_nopriv_check_user_email', 'check_user_email_callback' );
function check_user_email_callback() {
    global $wpdb; // this is how you get access to the database
    if(email_exists($_POST['user_email'])){
        echo json_encode('error.');
    }
    else{
        echo json_encode('true');
    }
    die();
} 
```

# python - 在 Python Tkinter 中，我可以按一个按钮来运行任何 exe 文件吗？

> ID：15058901
> 
> 赞同：-2
> 
> 时间：2013-02-25T01:43:26.557
> 
> 标签：python, button, tkinter, exe

我一直在研究使用 Tkinter 从一个 Tkinter 软件打开 exe 文件。我的最终产品是一个 Windows 7 exe 文件，它运行从一个 Tkinter 软件转换为 exe 文件的所有 exe 文件。

我将从上到下解释我的代码这是我的 Tkinter 模板

```
from Tkinter import *
from PIL import Image, ImageTk
import os
class App:
def __init__(self, master):
    self.frame = Frame(master) 
```

我添加了一张图片给用户信息 如何使用该软件

```
 img = Image.open("data.gif")
    intro = ImageTk.PhotoImage(img)
    right = Label(None, image=intro)
    right.grid(row=0, column=0, columnspan=4)
    right.image=intro 
```

然后我将按钮添加到网格中，调用每个按钮 self.b 在堆栈溢出时真的让人们感到困惑。您将很快阅读评论。

```
 self.b = Button(self.frame, bg="red", fg="white", font=("Helvetica", 14), text = ' \n confilextracter \n ', command = self.openFile1)
    self.b.grid(row = 1, column=0)
    self.b = Button(self.frame, bg="red", fg="white", font=("Helvetica", 14), text = ' \n confileditor \n ', command = self.openFile2)
    self.b.grid(row = 1, column=1)
    self.b = Button(self.frame, bg="red", fg="white", font=("Helvetica", 14), text = ' \n confilerehasher \n ', command = self.openFile3)
    self.b.grid(row = 1, column=2)
    self.b = Button(self.frame, bg="red", fg="white", font=("Helvetica", 14), text = ' \n Turn off the Shed \n ', command = self.openFile4)
    self.b.grid(row = 1, column=3)
    self.frame.grid() 
```

接下来我不得不给按钮工作来执行，重命名 exe 文件真的让人们在堆栈溢出时感到困惑。对于那个很抱歉。

```
def openFile1(self):
    os.startfile("confilextracter.exe")
def openFile2(self):
    os.startfile("confileditor.exe")
def openFile3(self):
    os.startfile("confilerehasher.exe") 
```

我真的很想纠正最后一个按钮代码，因为我自己找到了答案，因为其他人都在忙着整理这段代码的所有其他部分，你很快就会看到。此时下一个按钮有错误。

```
def openFile4(self):
    self.b.configure(command = self.b.destroy) 
```

然后我关闭了文件

```
root = Tk()
app = App(root)
mainloop() 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T02:05:09.380

使用`os`模块：

```
from Tkinter import *
import os

class App:
    def __init__(self, master):
        self.frame = Frame(master)
        self.b = Button(self.frame, text = 'Open', command = self.openFile)
        self.b.grid(row = 1)
        self.frame.grid()
    def openFile(self):
        os.startfile(_filepath_)

root = Tk()
app = App(root)
root.mainloop() 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T22:49:39.163

**这就是我为使事情顺利进行所做的工作，** 我采用了 f3ar3dlegend 示例代码（向上滚动）并开始研究它，因为它运行良好。让我们讨论一下最上面的代码行，然后逐步进行全面分解。

```
from Tkinter import *
from PIL import Image, ImageTk
import os 
```

从 Tkinter 导入，这告诉 pyhton 加载 GUI 驱动程序。从 PIL 导入 Image，ImageTK 告诉 Python 加载 Pyhton 图像库，以便我们可以使用彩色照片。根据我的理解， import os 会加载驱动程序，因此 Python 可以从 python 应用程序运行外部程序，调用它们执行操作。

我做的第一件事是在 f3ar3dlegend 的代码中添加一个图像，以便为我的用户提供一个包含此代码的信息页面，

```
 class App:
    def __init__(self, master):

    self.frame = Frame(master)
    img = Image.open("data.gif")
    intro = ImageTk.PhotoImage(img)
    right = Label(None, image=intro)
    right.grid(row=0, column=0, columnspan=4)
    right.image=intro 
```

一行代码阻止了我的图像在 24 小时内出现，只是缺少代码

```
 right.image=intro 
```

这行代码会阻止您的图像被垃圾收集（这意味着什么）我只知道我添加了它，并且我的照片应该放在 def 中。

接下来我投入了大量工作是按钮格式化，你知道宽度大小颜色字体。弄清楚使用 self.frame 纯粹是猜测，我只是不断尝试想法，直到我的一次尝试奏效。我在 Python Tkinter Grid 上也有这整件事，所以图像在第 0 行，列跨越 4 或 5 列，以便为更多按钮让路。这些按钮都在第 1 行而不是第 0 行。我发现我可以调用所有按钮 self.b，只要命令是不同的 def 代码没有错误。

```
 self.b = Button(self.frame, bg="darkred", width=18, fg="white", font=("Arial", 14), text = ' \n confilextracter \n ', command = self.openFile1)
    self.b.grid(row = 1, column=0)
    self.b = Button(self.frame, bg="red", width=17, fg="white", font=("Arial", 14), text = ' \n confileditor \n ', command = self.openFile2)
    self.b.grid(row = 1, column=1) 
```

我做的下一件事是def，因为没有这些按钮就不起作用。让库存溢出认为我在上传病毒的原因是我更改了程序名称以使我更好地理解我的程序。

```
 def openFile1(self):
    os.startfile("confilextracter.exe")
    def openFile2(self):
    os.startfile("confileditor.exe") 
```

它是这样工作的。openFile1 是一个按钮标注。你按下按钮，它会发出一个标注，匹配的 def 服从调用的分析器。os.startfile 对我来说是一个新术语，但它只是意味着操作系统启动文件。("confileditor.exe") 表示您需要的文件的字符串名称在 (" ") 之间，将两者放在一起，文件在自己的窗口中运行。这个软件的最后一点我和平相处，然后说我可以用这个做更多。我再次开始使用 f3ar3dlegend 示例代码。

```
 root = Tk()
   app = App(root)
   mainloop() 
```

这基本上会关闭所有内容，因此 Python 知道是时候显示内容了，而 mainloop 告诉 Tkinter 等待我做事。问题是软件有时会在页面上打开一半，而有时会在屏幕上的任何位置打开，所以我添加了此代码以将软件放在屏幕的左上角。

```
 app = App(root)
   root.geometry('+0+0')
   mainloop() 
```

我做的最后一件事是在尝试 5 次或 6 次尝试后单击一个按钮即可退出软件，我让 Tkinter 按下按钮即可破坏软件窗口。代码是。

```
 self.b = Button(self.frame, bg="red", width=18, fg="white", font=   ("Arial", 14), text = ' \n Turn off the Shed \n ', command = self.openFile4)
   self.b.grid(row = 1, column=3)
   def openFile4(self):
   root.destroy() 
```

我已经看到无数关于使用 root.destory 错误的人的堆栈溢出的例子，难怪我花了 1 小时修补它以使其恰到好处。我确实学到了关于将程序放到网上以便人们可以下载它们的一个非常重要的教训是您需要联系您的主机的客户支持并要求提供 TOS 服务条款的链接，因为如果您不了解 TOS，您可能会违反国际法做出版。谢谢你。

# javascript - 使用 Javascript 取消隐藏 div

> ID：15058902
> 
> 赞同：1
> 
> 时间：2013-02-25T01:43:26.713
> 
> 标签：javascript, jquery, css

已成功设置一个菜单，该菜单使用 Javascript 在多个选项卡之间循环。问题是我使用 SiteLevel 作为该站点的搜索。我希望搜索框成为隐藏/取消隐藏菜单的一部分，但脚本（我也尝试了搜索框的 html 代码，但仍然没有修复）

我已经将它与这个概念的最简单形式配对，以确保它不是冲突的其他 css 或脚本，但它仍然会打开一个空白框，这是代码。

我已将其注入[http://jsfiddle.net/Split98/A3DVa/](http://jsfiddle.net/Split98/A3DVa/)

```
<a href="#software">Software</a>
<a href="#hardware">Hardware</a>
<a href="#supplies">Supplies</a>
<a href="#contact">Contact</a>
<a href="#search">Search</a>
<div id="nav">
    <div id="software">Hello!</div>
    <div id="hardware">Yes!</div>
    <div id="supplies">Yeee Haw!</div>
    <div id="contact">Bingo!</div>
    <div id="search"><script type="text/javascript" src="http://www.sitelevel.com/javabox?crid=ze32uipb"></script></div>
</div> 
```

**CSS：**

```
#nav div {
    display: none;
    background-color: red;
    height: 200px;
} 
```

**jQuery：**

```
$(function(){
   var divs = $('#nav div'),
   links = $('a');

   links.click(function () {
       $(this.hash).toggle().siblings().hide();
       return false;
   });
}) 
```

提前谢谢各位！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T01:50:24.890

`**[LIVE DEMO](http://jsfiddle.net/A3DVa/6/)**`

只需`#nav > div`在您的 CSS 中使用
将只针对直接的孩子。
否则所有`DIV`元素都将被隐藏（您的搜索工具）

```
#nav > div {
    display: none;
    background-color: red;
    height: 200px;
} 
```

编辑过的 jQuery

```
$(function () {       

    var divs = $('#nav div'),
        links = $('a');

    divs.eq(0).show(); // if you need it.....

    links.click(function ( e ) {  // e = event
        e.preventDefault();       // instead of return false;
        $(this.hash).toggle().siblings().hide();
    });
}); 
```

# c++ - 大集合的第 n 个或任意组合

> ID：15058903
> 
> 赞同：12
> 
> 时间：2013-02-25T01:43:36.990
> 
> 标签：c++, algorithm, permutation, combinations

假设我有一组来自 的数字`[0, ....., 499]`。目前正在使用 C++ 顺序生成组合`std::next_permutation`。作为参考，我拉出的每个元组的大小是 3，所以我返回顺序结果，例如`[0,1,2], [0,1,3], [0,1,4], ... [497,498,499]`.

现在，我想并行化它所在的代码，因此这些组合的顺序生成将不再起作用。是否有任何现有的算法可以`ith`从 500 个数字中计算 3 的组合？

我想确保每个线程，无论它获得的循环迭代如何，都可以根据`i`它正在迭代的计算一个独立的组合。因此，如果我想要`i=38`线程 1 中的组合，我可以在线程 2 中`[1,2,5]`同时计算为.`i=0``[0,1,2]`

**编辑**下面的陈述是无关紧要的，我把自己搞混了

我查看了利用阶乘从左到右缩小每个单独元素的算法，但我不能将这些用作 500！肯定不适合记忆。有什么建议么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-25T02:38:55.640

这是我的镜头：

```
int k = 527; //The kth combination is calculated
int N=500; //Number of Elements you have
int a=0,b=1,c=2; //a,b,c are the numbers you get out

while(k >= (N-a-1)*(N-a-2)/2){
    k -= (N-a-1)*(N-a-2)/2;
    a++;
}
b= a+1;
while(k >= N-1-b){
    k -= N-1-b;
    b++;
}

c = b+1+k;

cout << "["<<a<<","<<b<<","<<c<<"]"<<endl; //The result 
```

考虑到在下一个数字增加之前有多少组合。但是，它仅适用于三个元素。我不能保证它是正确的。如果您将其与您的结果进行比较并提供一些反馈，那就太酷了。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-25T02:37:07.477

如果您正在寻找一种方法来获取字典索引或唯一组合的排名而不是排列，那么您的问题属于二项式系数。二项式系数处理在总共有 N 个项目的 K 组中选择唯一组合的问题。

我用 C# 编写了一个类来处理处理二项式系数的常用函数。它执行以下任务：

1.  将任何 N 选择 K 的所有 K 索引以良好的格式输出到文件。K-indexes 可以替换为更具描述性的字符串或字母。

2.  将 K 索引转换为正确的词典索引或排序二项式系数表中条目的等级。这种技术比依赖迭代的旧已发布技术快得多。它通过使用帕斯卡三角形中固有的数学属性来做到这一点，并且与迭代集合相比非常有效。

3.  将已排序二项式系数表中的索引转换为相应的 K 索引。我相信它也比旧的迭代解决方案更快。

4.  使用[Mark Dominus](http://blog.plover.com/math/choose.html)方法计算二项式系数，它不太可能溢出并且适用于更大的数字。

5.  该类是用 .NET C# 编写的，并提供了一种通过使用通用列表来管理与问题相关的对象（如果有）的方法。此类的构造函数采用一个名为 InitTable 的 bool 值，当它为 true 时，将创建一个通用列表来保存要管理的对象。如果此值为 false，则不会创建表。无需创建表即可使用上述 4 种方法。提供了访问器方法来访问表。

6.  有一个关联的测试类，它显示了如何使用该类及其方法。它已经用 2 个案例进行了广泛的测试，并且没有已知的错误。

要了解此类并下载代码，请参阅[制表二项式系数](http://tablizingthebinomialcoeff.wordpress.com/)。

以下测试代码将遍历每个唯一组合：

```
public void Test10Choose5()
{
   String S;
   int Loop;
   int N = 500;  // Total number of elements in the set.
   int K = 3;  // Total number of elements in each group.
   // Create the bin coeff object required to get all
   // the combos for this N choose K combination.
   BinCoeff<int> BC = new BinCoeff<int>(N, K, false);
   int NumCombos = BinCoeff<int>.GetBinCoeff(N, K);
   // The Kindexes array specifies the indexes for a lexigraphic element.
   int[] KIndexes = new int[K];
   StringBuilder SB = new StringBuilder();
   // Loop thru all the combinations for this N choose K case.
   for (int Combo = 0; Combo < NumCombos; Combo++)
   {
      // Get the k-indexes for this combination.  
      BC.GetKIndexes(Combo, KIndexes);
      // Verify that the Kindexes returned can be used to retrive the
      // rank or lexigraphic order of the KIndexes in the table.
      int Val = BC.GetIndex(true, KIndexes);
      if (Val != Combo)
      {
         S = "Val of " + Val.ToString() + " != Combo Value of " + Combo.ToString();
         Console.WriteLine(S);
      }
      SB.Remove(0, SB.Length);
      for (Loop = 0; Loop < K; Loop++)
      {
         SB.Append(KIndexes[Loop].ToString());
         if (Loop < K - 1)
            SB.Append(" ");
      }
      S = "KIndexes = " + SB.ToString();
      Console.WriteLine(S);
   }
} 
```

您应该能够相当轻松地将此类移植到 C++。您可能不必移植类的通用部分来实现您的目标。您的 500 选择 3 测试用例产生 20,708,500 个唯一组合，它们适合 4 字节的 int。如果 500 选择 3 只是一个示例，并且您需要选择大于 3 的组合，那么您将不得不使用 long 或定点 int。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-25T02:25:11.440

您可以将 500 个对象中的 3 个特定选择描述为三元组`(i, j, k)`，其中`i`是一个从 0 到 499（第一个数字的索引）的数字，`j`范围从 0 到 498（第二个的索引，跳过任何一个第一个），`k`范围从 0 到 497（最后一个的索引，跳过之前选择的两个数字）。鉴于此，枚举所有可能的选择实际上非常容易：从 开始`(0,0,0)`，递增`k`直到达到最大值，然后递增`j`并重置`k`为 0，依此类推，直到`j`达到最大值，依此类推，直到`j`达到自己的最大值；然后增加`i`并重置两者`j`并`k`继续。

如果这个描述听起来很熟悉，那是因为它与增加一个以 10 为基数的数字的工作方式完全相同，只是基数更有趣，实际上基数*因*数字而异。你可以利用这个洞察力来实现这个想法的一个非常紧凑的版本：对于`n`从 0 到 500*499*498 的任何整数，你可以获得：

```
struct {
  int i, j, k;
} triple;

triple AsTriple(int n) {
  triple result;
  result.k = n % 498;
  n = n / 498;
  result.j = n % 499;
  n = n / 499;
  result.i = n % 500;  // unnecessary, any legal n will already be between 0 and 499
  return result;
}

void PrintSelections(triple t) {
  int i, j, k;
  i = t.i;
  j = t.j + (i <= j ? 1 : 0);
  k = t.k + (i <= k ? 1 : 0) + (j <= k ? 1 : 0);
  std::cout << "[" << i << "," << j << "," << k << "]" << std::endl;
}

void PrintRange(int start, int end) {
  for (int i = start; i < end; ++i) {
    PrintSelections(AsTriple(i));
  }
} 
```

现在要分片，您可以取从 0 到 500*499*498 的数字，以您喜欢的任何方式将它们划分为子范围，并让每个分片计算其子范围中每个值的排列。

对于需要枚举子集的任何问题，此技巧都非常方便。

# android - 使用 Bitmap.Config.RGB_565 将内存中的位图转换为位图

> ID：15058905
> 
> 赞同：18
> 
> 时间：2013-02-25T01:43:47.043
> 
> 标签：android, bitmap, rgb, bitmapfactory

我有一个加载的位图，我想将其转换为将配置设置为`Bitmap.Config.RGB_565`. `Bitmap`在位图已经加载到内存后，有没有一种简单的方法可以将 a 转换为这个配置？例如，下面我有一个从应用程序资源中解码的位图，但是，我如何将已经加载的转换`Bitmap`为`RGB_565`？我确信这很简单，但是，我对使用位图还很陌生，在网上看了几个小时后，不幸的是我找不到我特别需要的东西。

```
BitmapFactory.Options options = new BitmapFactory.Options();
options.inPreferredConfig=Bitmap.Config.RGB_565
bitmap=BitmapFactory.decodeResource(getResources(), R.drawable.myphoto ,options); 
```

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2014-08-15T18:29:05.593

你也可以试试这个：

```
Bitmap converted = original.copy(Config.RGB_565, false); 
```

从Bitmap.copy()的[文档中：](http://developer.android.com/reference/android/graphics/Bitmap.html#copy(android.graphics.Bitmap.Config,%20boolean))

> 尝试根据此位图的尺寸制作新位图，将新位图的配置设置为指定的配置，然后将此位图的像素复制到新位图中。如果不支持转换，或者分配器失败，则返回 NULL。

查看本机源代码，您应该可以很好地在[Bitmap.Config](http://developer.android.com/reference/android/graphics/Bitmap.Config.html)的任何值之间进行转换。

* * *

## 回答 #2

> 赞同：29
> 
> 时间：2013-02-25T03:29:10.017

我没有对此进行测试，但它应该可以工作：

```
private Bitmap convert(Bitmap bitmap, Bitmap.Config config) {
    Bitmap convertedBitmap = Bitmap.createBitmap(bitmap.getWidth(), bitmap.getHeight(), config);
    Canvas canvas = new Canvas(convertedBitmap);
    Paint paint = new Paint();
    paint.setColor(Color.BLACK);
    canvas.drawBitmap(bitmap, 0, 0, paint);
    return convertedBitmap;
} 
```

像这样调用方法：

```
Bitmap convertedBitmap = convert(bitmap, Bitmap.Config.RGB_565); 
```

如果您将 drawBitmap 与 Matrix 一起使用，您可以进行各种附加转换，例如旋转、拉伸等。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-25T03:24:53.917

感谢 [siliconeagle](https://stackoverflow.com/users/668195/siliconeagle) ，在这里找到了答案[https://stackoverflow.com/a/12148450/1364673](https://stackoverflow.com/a/12148450/1364673)。

解决方案是按照上面的链接示例创建一个具有所需编码的新位图。

# ssis - 如何在 SSIS 中为多个环境定义连接字符串？

> ID：15058909
> 
> 赞同：1
> 
> 时间：2013-02-25T01:44:51.677
> 
> 标签：ssis

任何人都知道我们如何在 SSIS 中为不同的环境指定不同的连接字符串——比如系统集成测试环境、用户验收测试环境和生产环境？

是通过定义多个连接管理器来完成，还是我们可以定义多个配置文件并将我们的连接字符串指向？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T05:08:55.477

您不需要为同一个数据库建立多个连接。

在 SSIS 2008 中：

使用表达式定义连接字符串是个好主意。您可以这样做：

假设您在连接管理器中添加了一个新的 OLEDB 连接。复制 ConnectionString 属性的值。它看起来像这样：Data Source=(local);Initial Catalog=Learn;Provider=SQLNCLI10.1;Integrated Security=SSPI;Application Name=SSIS-RaggedFile-{03053F2E-8101-4985-9F2B-8C2DDE510065}(local) .Learn;自动翻译=假；

删除非必需项：Data Source=(local);Initial Catalog=Learn;Provider=SQLNCLI10.1;Integrated Security=SSPI;

现在在控制面级别创建三个新变量：sServer、sDb、sProvider。所有这三个变量的类型都是字符串。它们的值（使用此示例）将是（本地）、Learn 和 SQLNCLI10.1。

返回到连接的 ConnectionString 属性。并将其值设置为

```
"Data Source=(local);Initial Catalog=Learn;Provider=SQLNCLI10.1;Integrated Security=SSPI;" 
```

现在，将 server、db 和 provider 替换为您创建的变量，使您的表达式如下所示：

```
"Data Source=" + @[User::sServer] + ";Initial Catalog=" + @[User::sDb] + ";Provider=" + @[User::sProvider] + ";Integrated Security=SSPI;" 
```

当我们从一个环境转移到另一个环境时，我们可能会遇到不同版本的数据库 - 因此为提供者提供一个变量也是有帮助的。

现在，可以在部署时更改这些值。

在 SSIS 2012 中 - 这种方法仍然可以稍作改动。将这三个变量更改为参数并使其成为必需。这样，在部署部署时，您将被迫更改这些值。这只是一个起点。阅读服务器环境。

注意：我认为变量应该具有原子值。这有助于避免由于输入错误而导致的任何错误。这就是为什么我创建了三个单独的变量，而不是创建一个名为 sCnxn 的变量（例如），并让某人在部署时更改该变量的一部分。

# scala - 为什么 Play 框架控制器中不需要引号？

> ID：15058916
> 
> 赞同：2
> 
> 时间：2013-02-25T01:45:45.277
> 
> 标签：scala, playframework-2.0

这有效：

```
object Application extends Controller {
  def index = Action {
    Ok(<h1>hello world</h1>)
  }
} 
```

但我本以为需要`Ok("<h1>hello world</h1")`用引号来写。为什么这不是必要的（来自 Scala POV）？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-25T01:48:26.703

Scala 支持 XML 文字作为语言的一流部分：[http](http://www.scala-lang.org/node/131) ://www.scala-lang.org/node/131 。这是语言内置的，框架的选择无关紧要。

# colors - 有没有一种简单的方法来生成相似的颜色？

> ID：15058919
> 
> 赞同：1
> 
> 时间：2013-02-25T01:45:59.823
> 
> 标签：colors

给定一种颜色（以十六进制表示），我想生成一组看起来几乎与给定颜色完全相同但略有不同的颜色。除了任意/随机增加或减少 rg 或 b 之外，有没有一种好方法可以做到这一点？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T01:56:54.417

我不确定您是尝试以编程方式执行此操作（Sass/Compass 可以通过乘/除十六进制值的百分比来执行此操作）还是手动执行此操作。

如果手动，您可以使用此[在线调色板](http://www.colorschemer.com/online.html)。它具有变亮/变暗方案，一次显示几乎相同的 16 种颜色。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-09-03T19:53:44.960

您可以使用这个在线工具 Colorglower -[获得更浅和更深的十六进制颜色](http://colorglower.com)- 这是一个简单的工具，可以生成更浅和更深的十六进制颜色阴影。您甚至可以调整阴影百分比。

> Colorglower 是一个免费的在线工具，用于获取十六进制颜色代码的浅色或深色。使用百分比滑块调整多少阴影。网页设计师为他们的项目发现不同的调色板的绝佳参考。

# ios - 处理键盘和tableviewcell

> ID：15058921
> 
> 赞同：0
> 
> 时间：2013-02-25T01:46:02.957
> 
> 标签：ios, uitableview, uiscrollview, uikeyboard

我的一个视图控制器的布局是这样的：我的 VC 中嵌入了一个滚动视图。在我的滚动视图中，我有一个包含 5 个单元格的表格视图。前 3 个单元格由一个文本字段组成，该字段从字典中提取其文本，并且这会根据特定情况而变化。这些文本字段是可编辑的，因此点击它们会弹出键盘，但问题是我希望在点击文本字段时滚动视图，因为现在它们的键盘隐藏了第三个可编辑文本字段。另一个问题是，目前，在表格视图之外单击不会导致键盘被关闭，因此关闭键盘的唯一方法是点击返回键。我想要发生的是，当我点击 3 个可编辑字段中的任何一个时，滚动视图应该向上滚动我定义的某个数字（这样我就可以根据当前选择的行定义滚动多少）。我面临的问题之一是我无法在我的 VC 中直接引用这些文本字段，因为它们都是通过一个原型单元创建的。我的想法是我可以创建一个字典，其中 3 个文本字段作为键，然后滚动视图 y 坐标作为值，然后使用它。但是，我不确定如何在我的情况下执行此操作（使用原型单元）。如果有人可以向我展示一些有关如何执行此操作的示例代码，我将不胜感激。全部通过一个原型单元创建。我的想法是我可以创建一个字典，其中 3 个文本字段作为键，然后滚动视图 y 坐标作为值，然后使用它。但是，我不确定如何在我的情况下执行此操作（使用原型单元）。如果有人可以向我展示一些有关如何执行此操作的示例代码，我将不胜感激。全部通过一个原型单元创建。我的想法是我可以创建一个字典，其中 3 个文本字段作为键，然后滚动视图 y 坐标作为值，然后使用它。但是，我不确定如何在我的情况下执行此操作（使用原型单元）。如果有人可以向我展示一些有关如何执行此操作的示例代码，我将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T05:12:36.793

`cellForRowAtIndexPath:`您可以通过调用获取 UITableViewCell，然后调用`viewWithTag:`获取您的 UITextField来引用您的文本字段。只需为文本字段分配一个标签号。此外，将文本字段的委托设置为您的视图控制器，以便您可以响应用户点击以编辑文本。

# java - 倒数计时器在android应用程序中的不同时间启动

> ID：15058923
> 
> 赞同：1
> 
> 时间：2013-02-25T01:46:14.373
> 
> 标签：java, android, timer, countdowntimer

我有一个应用程序，它有 2 个计时器，从他们的按钮点击开始。

当他们开始时，计时器倒计时显示在文本视图中，因此用户可以看到倒计时的秒数（10、9、8、7 等）

一个计数器是 45 秒计时器，另一个是 30 秒计时器。我注意到，当计时器启动时，它们会采取以下两种方式之一，要么计时器倒计时显示从正确的秒开始（然后跳过一个）45、43、42、41 等），要么不显示其他时间起始值并直接跳转到（44、43、42、41 等）并且不跳过任何内容。

最终，我希望这些计时器能够合理地显示初始值和倒计时。即始终先显示 45，然后显示 44、43、42、41 等。

关于为什么这可能会或可能不会这样做的任何想法？我在课堂上使用 android CountDownTimer。

**更新：这是我的 CountDownTimer 代码**

```
 public CountDown (long millisInFuture, long countDownInterval, Button button ) {
    super(millisInFuture, countDownInterval);
    this.button = button;
}

//Timer Countdown
@Override
public void onTick(long millisUntilFinished) {
    long timeRemaining = (millisUntilFinished/1000);
    button.setText((millisUntilFinished/1000)+""); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T03:10:36.937

我试图复制这个问题，但不能。也许发布您的代码？

这是我的简单测试，它首先显示 45，然后依次倒数，最后为零。

```
 Button b = (Button) findViewById(R.id.button1);
    final TextView tv = (TextView) findViewById(R.id.tv_1);

    b.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View v) {
            new CountDownTimer(45 * 1000, 1000) {
                int x = 45;

                @Override
                public void onTick(long millisUntilFinished) {
                    tv.setText(Integer.toString(x));
                    x--;

                }

                @Override
                public void onFinish() {
                    tv.setText("0");

                }
            }.start();

        }
    }); 
```

# python - why using multiple threading to get the sum is correct?

> ID：15058925
> 
> 赞同：5
> 
> 时间：2013-02-25T01:46:23.710
> 
> 标签：python

my code is

```
import threading

counter = 0

def worker():
    global counter
    counter += 1

if __name__ == "__main__":
    threads = []
    for i in range(1000):
        t = threading.Thread(target = worker)
        threads.append(t)
        t.start()
    for t in threads:
        t.join()

    print counter 
```

because I don't use lock to protect the shared resource,i.e. counter variable, I expect that the result is a number less than 1000, but the counter is always 1000, I don't know why. Does `counter += 1` is a atomic operation in Python?

what operations in Python are atomic using GIL?

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-25T02:01:12.310

Don't count on `x += 1` being thread-safe. Here is [an example](http://effbot.org/pyfaq/what-kinds-of-global-value-mutation-are-thread-safe.htm) where it does not work (see Josiah Carlson's comment):

```
import threading
x = 0
def foo():
    global x
    for i in xrange(1000000):
        x += 1
threads = [threading.Thread(target=foo), threading.Thread(target=foo)]
for t in threads:
    t.daemon = True
    t.start()
for t in threads:
    t.join()
print(x) 
```

* * *

If you disassemble `foo`:

```
In [80]: import dis

In [81]: dis.dis(foo)
  4           0 SETUP_LOOP              30 (to 33)
              3 LOAD_GLOBAL              0 (xrange)
              6 LOAD_CONST               1 (1000000)
              9 CALL_FUNCTION            1
             12 GET_ITER            
        >>   13 FOR_ITER                16 (to 32)
             16 STORE_FAST               0 (i)

  5          19 LOAD_GLOBAL              1 (x)
             22 LOAD_CONST               2 (1)
             25 INPLACE_ADD         
             26 STORE_GLOBAL             1 (x)
             29 JUMP_ABSOLUTE           13
        >>   32 POP_BLOCK           
        >>   33 LOAD_CONST               0 (None)
             36 RETURN_VALUE 
```

You see that there is a `LOAD_GLOBAL` to retrieve the value of `x`, there is an `INPLACE_ADD`, and then a `STORE_GLOBAL`.

If both threads `LOAD_GLOBAL` in succession, then they might both load the *same* value of `x`. Then they both increment to the same number, and store the same number. So the work of one thread overwrites the work of the other. This is not thread-safe.

As you can see, the final value of `x` would be 2000000 if the program were thread-safe, but instead you almost always get a number less than 2000000.

* * *

If you add a lock, you get the "expected" answer:

```
import threading
lock = threading.Lock()
x = 0
def foo():
    global x
    for i in xrange(1000000):
        with lock:
            x += 1
threads = [threading.Thread(target=foo), threading.Thread(target=foo)]
for t in threads:
    t.daemon = True
    t.start()
for t in threads:
    t.join()
print(x) 
```

yields

```
2000000 
```

* * *

I think the reason why the code you posted does not exhibit a problem:

```
for i in range(1000):
    t = threading.Thread(target = worker)
    threads.append(t)
    t.start() 
```

is because your `worker`s complete so darn quickly compared to the time it takes to spawn a new thread that in practice there is no competition between threads. In Josiah Carlson's example above, each thread spends a significant amount of time in `foo` which increases the chance of thread collision.

# css - 在网站上定位元素时遇到问题

> ID：15058926
> 
> 赞同：0
> 
> 时间：2013-02-25T01:46:24.580
> 
> 标签：css, html, drop-down-menu, position

我正在编码的网站有一些问题，我找不到答案。首先，这是我遇到问题的页面的 HTML 代码，以及链接到它的 CSS 代码：

> HTML：
> 
> ```
> <!DOCTYPE html>
> <html>
> <head>
> <link rel="stylesheet" type="text/css" href="../CSS/test.css">
> <title>Capturing Life - Kim Chaffin Photography</title>
> </head>
> <body>
> <div id="bg2">
> <center>
> <div id="logo">
> <img src="../Pictures/logo.png" width="511" height="207" alt="Load Error">
> </div>
> </center>
> <center>
> <div id="flourish">
> <img src="../Pictures/flourish2.png" width="462px" height="329px" alt="Load Error">
> </div>
> </center>
> <center>
> <div id="header">
> <svg>
> <rect x="100" y="100" rx="20" ry="20" width="1096" height="230"     style="fill:#625D5D;stroke:#625D5D;stroke-width:5;opacity:1"/>
> </svg>
> </div>
> </center>
> <center>
> <div id="headerfix">
> <svg>
> <rect x="100" y="300" width="1096" height="100"     style="fill:#625D5D;stroke:#625D5D;stroke-width:5;opacity:1"/>
> </svg>
> </div>
> </center>
> <center>
> <div id="tabbox">
> <svg>
> <rect x="100" y="300" width="1096" height="50"     style="fill:#625D5D;stroke:#625D5D;stroke-width:5;opacity:1"/>
> </svg>
> </div>
> </center>
> <center>
> <div id="tabs">
> <ul type=none>
> <table width="80%">
> <tr>
> <td>
> <ul>
> <a href="Home.html"><img src="../Pictures/Kim Photography_1.png"     onmouseover="this.src='../Pictures/Kim Photography on mouseover_1.png'" 
> onmouseout="this.src='../Pictures/Kim Photography_1.png';" alt="Load Error" /></a> 
> <script type="text/javascript"> 
> img=new Image(); 
> img.src= "../Pictures/Kim Photography on mouseover_1.png";
> </script>
> </td>
> <td>
> <a href="About Kim.html"><img style="border:0px;" src="../Pictures/Kim     Photography_2.png" onmouseover="this.src='../Pictures/Kim Photography on mouseover_2.png'" 
> onmouseout="this.src='../Pictures/Kim Photography_2.png';" alt="Load Error" /></a> 
> <script type="text/javascript"> 
> img=new Image(); 
> img.src= "../Pictures/Kim Photography on mouseover_2.png";
> </script>
> </td>
> <td onmouseover="showmenu('portfolios')" onmouseout="hidemenu('portfolios')">
> <a href="Portfolios.html"><img style="border:0px;" src="../Pictures/Kim     Photography_3.png" onmouseover="this.src='../Pictures/Kim Photography on mouseover_3.png'" 
> onmouseout="this.src='../Pictures/Kim Photography_3.png';" alt="Load Error" /></a> 
> <script type="text/javascript"> 
> img=new Image(); 
> img.src= "../Pictures/Kim Photography on mouseover_3.png";
> </script>
> <br>
> <table class="menu" id="portfolios" width="124px" rules="cols">
> <tr><td class="menu"><a href="portfolios/maternity.html"><center><b>Maternity</b>    </center></a></td></tr>
> <tr><td class="menu"><a href="portfolios/little ones.html"><center><b>Little Ones</b>    </center></a></td></tr>
> <tr><td class="menu"><a href="portfolios/teens.html"><center><b>Teens</b></center></a>    </td></tr>
> <tr><td class="menu"><a href="portfolios/families.html"><center><b>Families</b>    </center></a></td></tr>
> <tr><td class="menu"><a href="portfolios/events.html"><center><b>Events</b></center>    </a></td></tr>
> <tr><td class="menu2"><a href="portfolios/pets.html"><center><b>Pets</b></center></a>    </td></tr>
> </table>
> </td>
> <td onmouseover="showmenu('sessions')" onmouseout="hidemenu('sessions')">
> <a href="Sessions.html"><img style="border:0px;" src="../Pictures/Kim     Photography_4.png" onmouseover="this.src='../Pictures/Kim Photography on mouseover_4.png'" 
> onmouseout="this.src='../Pictures/Kim Photography_4.png';" alt="Load Error" /></a> 
> <script type="text/javascript"> 
> img=new Image(); 
> img.src= "../Pictures/Kim Photography on mouseover_4.png";
> </script>
> <br>
> <table class="menu" id="sessions" width="121px" rules="cols">
> <tr><td class="menu"><a href="sessions/mini.html"><center><b>Mini-Sessions</b></center>    </a></td></tr>
> <tr><td class="menu"><a href="sessions/full.html"><center><b>Full Sessions</b></center>    </a></td></tr>
> <tr><td class="menu"><a href="sessions/newborns.html"><center><b>Newborns</b></center>    </a></td></tr>
> <tr><td class="menu2"><a href="sessions/slice.html"><center><b>Slice of Life</b>    </center></a></td></tr>
> </table>
> </td>
> <td onmouseover="showmenu('workshops')" onmouseout="hidemenu('workshops')">
> <a href="Workshops.html"><img style="border:0px;" src="../Pictures/Kim     Photography_5.png" onmouseover="this.src='../Pictures/Kim Photography on mouseover_5.png'" 
> onmouseout="this.src='../Pictures/Kim Photography_5.png';" alt="Load Error" /></a> 
> <script type="text/javascript"> 
> img=new Image(); 
> img.src= "../Pictures/Kim Photography on mouseover_5.png";
> </script>
> <br>
> <table class="menu" id="workshops" width="143px" rules="cols">
> <tr><td class="menu"><a href="workshops/slr.html"><center><b>SLR</b></center></a></td>    </tr>
> <tr><td class="menu"><a href="workshops/quick tips.html"><center><b>Quick Tips</b>    </center></a></td></tr>
> <tr><td class="menu2"><a href="workshops/documenting life.html"><center><b>Documenting     Life</b></center></a></td></tr>
> </table>
> </td>
> <td>
> <a href="Client Galleries.html"><img style="border:0px;" src="../Pictures/Kim     Photography_6.png" onmouseover="this.src='../Pictures/Kim Photography on mouseover_6.png'" 
> onmouseout="this.src='../Pictures/Kim Photography_6.png';" alt="Load Error" /></a> 
> <script type="text/javascript"> 
> img=new Image(); 
> img.src= "../Pictures/Kim Photography on mouseover_6.png";
> </script>
> </td>
> <td>
> <a href="Contact.html"><img style="border:0px;" src="../Pictures/Kim Photography_7.png"     onmouseover="this.src='../Pictures/Kim Photography on mouseover_7.png'" 
> onmouseout="this.src='../Pictures/Kim Photography_7.png';" alt="Load Error" /></a> 
> <script type="text/javascript"> 
> img=new Image(); 
> img.src= "../Pictures/Kim Photography on mouseover_7.png";
> </script>
> </td>
> </tr>
> <li>
> </ul>
> </table>
> </ul>
> </div>
> </center>
> </div>
> </body>
> </html> 
> ```
> 
> CSS：
> 
> ```
> body
> {
> background-image:url('../Pictures/Black dot 2.png');
> background-attachment:fixed;
> font-family:Arial,Helvetica,sans-serif;
> }    
> table
> a
> {
> color:black;
> text-decoration:none;
> }
> a:hover
> {
> color:#FFFFFF;
> }
> td.menu
> {
> background-color:#625D5D;
> }
> td.menu2
> {
> background-color:#625D5D;
> border-bottom-right-radius:10px;
> border-bottom-left-radius:10px;
>     -moz-border-radius-bottomright:10px;
>     -moz-border-radius-bottomleft:10px;
>     -webkit-border-bottom-right-radius:10px;
>     -webkit-border-bottom-left-radius:10px;
> }
> table.menu
> {
> font-size:100%;
> position:absolute;
> visibility:hidden;
> }
> #bg2
> {
> background:#FFFFFF;
> background:rgba(255,255,255,1);
> width:90%;
> height:90%;
> margin:4em auto;
> }
> #header
> {
> position:relative;
> top:-545px;
> }
> #headerfix
> {
> position:relative;
> top:-1265px;
> }
> #tabbox
> {
> position:relative;
> top:-1770px;
> }
> #tabs
> {
> position:absolute;
> }
> #flourish
> {
> position:relative;
> top:-150px;
> right:340px;
> z-index:+1;
> }
> #logo
> {
> position:relative;
> top:113px;
> right:-240px;
> z-index:+1;
> } 
> ```

这些是我遇到的问题：

> 1.  代码不允许我移动`div id="tabs"`卡在页面底部的导航选项卡 ( )。如果我应用任何移动属性 ( `i.e. "top:-1000px;"`)，选项卡将完全消失，而不是移动到我希望它们移动到的位置。
> 2.  白色背景 ( `div id="bg2"`) 导致元素`div id="header"`、`div id="headerfix"`、`div id="logo"`、`div id="flourish"`和`div id="tabbox"`被向下和向右推，而不是我希望它们处于的顶部和中心位置。
> 3.  导航选项卡`Portfolios`、`Sessions`和*应该*`Workshops`在它们下面有下拉菜单。但是，由于某种原因，菜单根本不会出现。

 *我*认为*这些是我目前唯一遇到的问题。但是，如果有人在我的代码中发现任何其他问题，如果您告诉我，我将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T03:26:41.337

首先，您的 HTML 中似乎存在代码错误，涉及您的 <ul>。您绝对应该确保您的标签正确嵌套，因为这可能是您的问题的原因之一。此外，您在此处显示的页面上有 8 个 JavaScript 错误。

1.  当我使用 top: 0px; 时，您的#tabs div 会为我移到顶部 应该的。我不太确定你遇到了什么麻烦。
2.  您的白色背景似乎包含其他 div，因此不会将您的项目移动到任何地方。
3.  如果没有我们可以查看的带有图像的实时工作演示，我们就无法为您解决此问题。此外，使用表格进行下拉导航本身就会引发一大堆问题——您应该考虑切换到 div 或结构化的 <ul>。*

# java - java.sql.SQLException：用户'root'@'192.168.1.3'的访问被拒绝（使用密码：否）

> ID：15058929
> 
> 赞同：-1
> 
> 时间：2013-02-25T01:47:02.390
> 
> 标签：java, mysql, jdbc, sqlexception

我正在尝试连接到我的服务器的 MySQL，但我一直遇到同样的问题并且找不到类似的问题。我的代码片段如下：

```
public class MySqlDatabaseHandler {
    Connection con = null;
    Statement st = null;
    ResultSet rs = null;

    public MySqlDatabaseHandler(String url, String user, String password){
        /*String url = "jdbc:mysql://192.168.1.80:3306/testdb";
        String user = "root";
        String password = "rootpass";*/
        try {
            Class.forName("com.mysql.jdbc.Driver");
            con = DriverManager.getConnection(url, user, password);
            st = con.createStatement();
        }
        catch (Exception e){
            e.printStackTrace();
        }  
    }
} 
```

我收到的结果：

```
java.sql.SQLException: Access denied for user 'root'@'192.168.1.3' (using password: NO)
at com.mysql.jdbc.SQLError.createSQLException(SQLError.java:1074)
at com.mysql.jdbc.MysqlIO.checkErrorPacket(MysqlIO.java:4120)
at com.mysql.jdbc.MysqlIO.checkErrorPacket(MysqlIO.java:4052)
at com.mysql.jdbc.MysqlIO.checkErrorPacket(MysqlIO.java:925)
at com.mysql.jdbc.MysqlIO.proceedHandshakeWithPluggableAuthentication(MysqlIO.java:1704)
at com.mysql.jdbc.MysqlIO.doHandshake(MysqlIO.java:1250)
at com.mysql.jdbc.ConnectionImpl.coreConnect(ConnectionImpl.java:2465)
at com.mysql.jdbc.ConnectionImpl.connectOneTryOnly(ConnectionImpl.java:2498)
at com.mysql.jdbc.ConnectionImpl.createNewIO(ConnectionImpl.java:2283)
at com.mysql.jdbc.ConnectionImpl.<init>(ConnectionImpl.java:822)
at com.mysql.jdbc.JDBC4Connection.<init>(JDBC4Connection.java:47)
at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
at sun.reflect.NativeConstructorAccessorImpl.newInstance(Unknown Source)
at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(Unknown Source)
at java.lang.reflect.Constructor.newInstance(Unknown Source)
at com.mysql.jdbc.Util.handleNewInstance(Util.java:411)
at com.mysql.jdbc.ConnectionImpl.getInstance(ConnectionImpl.java:404)
at com.mysql.jdbc.NonRegisteringDriver.connect(NonRegisteringDriver.java:317)
at java.sql.DriverManager.getConnection(Unknown Source)
at java.sql.DriverManager.getConnection(Unknown Source)
at handleServer.includes.classes.Server.MySqlDatabaseHandler.<init>(MySqlDatabaseHandler.java:24) 
```

从表面上看，我相信由于“（使用密码：否）”，密码永远不会被发送到服务器。

我什至尝试将 url 更改为“jdbc:mysql://192.168.1.80:3306/testdb?user=root&password=rootpass”并发现自己的结果相同。

MySql 允许远程连接到测试客户端（192.168.1.3），并且已经通过 telnet 进行了测试，但是在 JDBC 中遇到了这个问题。有谁看到我做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T02:00:43.690

MySQL权限设置似乎有问题。你可以试试这个，打开MySQL命令行提示符，运行以下脚本：

```
grant all privileges on *.* to 'root'@'localhost' identified by 'password' with grant option;
flush privileges; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T02:22:18.317

我认为这是一个有目的的限制，以防止网络上的 root 访问。尝试查看[此问答](https://stackoverflow.com/questions/6239131/how-to-grant-remote-access-permissions-to-mysql-server-for-user)以了解解决方法。它与@pigletfly 的解决方案基本相同，但有一个域名。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-05-09T07:22:57.143

我也有同样的问题，说用户'root'@'localhost'的访问被拒绝（使用密码：NO）但解决方案很直接。我使用它作为键-> spring.datasource.data-password 而不是 spring.datasource.password。

# android - Android - 将图像添加到项目

> ID：15058931
> 
> 赞同：18
> 
> 时间：2013-02-25T01:47:14.767
> 
> 标签：android, image, import, adt, image-size

我是全新的`Android`，我正在使用`Eclipse ADT`它来创建一个简单的应用程序。此应用程序有一个按钮，可根据用户点击更改其背景图像。

我注意到我的项目中有 4 个图像文件夹：`drawable-hdpi, drawable-ldpi, drawable-mdpi, and drawable-xhdpi`.

而且我还注意到当前那里的图像（启动器图标）都是不同的大小。

这是否意味着我必须使用一些图像编辑软件为我的每张图像的每种分辨率创建一张图像？或者（希望）有没有办法导入图像并自动为我完成？

谢谢！

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2013-02-25T01:52:07.263

图像和其他可视文件存储在一个或多个可绘制目录中。如果仅在一个目录中，Android 将根据需要缩放图像。如果使用多个目录，Android 将选择适当大小的图像。

*   drawable-ldpi - 低密度图像
*   drawable-mdpi - 中等密度图像
*   drawable-hdpi - 高密度图像
*   drawable-xhdpi - 超高密度图像（即类似视网膜的显示）
*   drawable-xxhdpi - 超高密度图像（Nexus 10、三星 Galaxy S4、HTC One 和索尼 Xperia Z 等设备）
*   drawable-xxxhdpi - 三倍超高密度图像（[Nexus 6 和 9](http://android-developers.blogspot.com/2014/10/getting-your-apps-ready-for-nexus-6-and.html)）

（旁注：XML 文件也可以作为可绘制对象写入和存储。这些类型的文件可以根据视图的状态或其他视觉设置（如渐变、边框等）控制何时使用多个图像。）

那么，你*应该*怎么做？

**为获得最佳结果**（来自[Android 开发者文档](http://developer.android.com/training/multiscreen/screendensities.html)）：

要生成这些图像，您应该从矢量格式的原始资源开始，并使用以下大小比例为每个密度生成图像：

*   xxxhdpi: 4.0
*   xxhdpi: 3.0
*   xhdpi: 2.0
*   高清：1.5
*   tvdpi：1.33（仅限电视）
*   mdpi：1.0（基线）
*   低密度脂蛋白：0.75

这意味着如果您为 xhdpi 设备生成 200x200 的图像，您应该为 hdpi 生成 150x150、tvdpi 的 133x133、mdpi 的 100x100、最后为 ldpi 设备的 75x75 的图像。

**如果您只想使用一张图片并让 Android 为您扩展：**

[根据Android 开发者网站上](http://developer.android.com/about/dashboards/index.html)的仪表板，现在超过 75% 的 Android 设备具有 hdpi 或更高的分辨率。因此，例如，如果您在 hdpi 上创建一个图像，它将在大约 1/3 的设备上看起来很完美，在某些设备上可以放大，在 25% 的设备上可以缩小。总的来说，我认为缩小规模比扩大规模要好。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-25T02:03:24.013

> 这是否意味着我必须使用一些图像编辑软件为我的每张图像的每种分辨率创建一张图像？或者（希望）有没有办法导入图像并自动为我完成？

如果您已经拥有图像的高分辨率源（或矢量图形格式），则可以使用[Android Asset Studio](http://android-ui-utils.googlecode.com/hg/asset-studio/dist/index.html)从您自己的源图像中为**每个**密度（减去 xxhdpi）生成图标/图像。您还可以从默认的 Android 剪贴画创建图标/图像，这些剪贴画可以为各种版本的 Android 设置主题。这将为您节省一些使用图像编辑工具调整大小和保存的麻烦。

# c++ - 错误，不允许不完整的类型

> ID：15058933
> 
> 赞同：0
> 
> 时间：2013-02-25T01:47:49.140
> 
> 标签：c++

```
#include "passenger.h"
class node
{
public:
    passenger dataItem;
    node nextNode;
}; 
```

为什么在尝试创建其类型是它所在的类的变量时，我会得到一个不完整的类型不允许错误？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-25T01:49:11.607

尝试遵循编译器的过程。

是什么`sizeof(node)`。

要解决此问题，请考虑使用指向节点的指针。

```
class node
{
public:
    passenger dataItem;
    node * nextNode;
}; 
```

看到您的代码后，您看起来像是来自 Java/C# 背景，这意味着事实上，**您确实需要指针**来**模拟**来自这些语言的引用。

请记住，对象在这些语言中是**引用类型**，而在 C/C++ 中它们是**值类型。**不同之处在于`node nextNode`指向 Java/C# 中的下一个节点，而在 C/C++ 中它是对象本身。

*编辑*：您的错误是由于当您定义成员变量时`nextNode`，您仍在定义中间`node`，因此它*不完整*。`node*`将起作用，因为指针只需要前向声明，并且适用于不完整的类型。

同样，它也适用于 Java/C#，因为这些语言中的每个变量（减去 C#`struct`和 Java 原语）都只是一些组合的指针。

编辑：请阅读 C++ 中的指针和`new`/`delete`我希望您很快就会遇到一两次崩溃.. :(。另请查看[理解指针的障碍是什么以及可以采取哪些措施来克服它们？](https://stackoverflow.com/questions/5727/what-are-the-barriers-to-understanding-pointers-and-what-can-be-done-to-overcome)开始.

总而言之，要分配指针，请执行以下操作。

```
node a;
node b;

a.nextNode = &b; //& operator returns the address of its operand, here b 
```

# ruby-on-rails-3 - 狮身人面像和朋友搜索

> ID：15058934
> 
> 赞同：1
> 
> 时间：2013-02-25T01:48:02.163
> 
> 标签：ruby-on-rails-3, sphinx, has-many-through, thinking-sphinx

我有一个关于 Ruby on Rails 上的 Sphinx 的高级问题：

说我要搜索的是我朋友写的文章。模型结构将是：

```
User has_many users :through relationships
Article belongs_to User 
```

我的问题是：我会在 Sphinx 上使用什么样的语法，以便用户搜索文章并只获取他朋友写的文章？我在网上找不到这个问题，我想在实施我的解决方案之前了解它是如何工作的。

注意：我怀疑一种解决方案是拥有一组朋友 ID，然后使用 :condition :with => {:id => array_of_friendIDs}。但也许有更有效的方法来做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T05:39:07.360

您基本上是正确的 - 您将需要组装一组朋友 ID 并将其传递给搜索，使用该`:with`选项。不过，您获取该列表的方式与 Sphinx 并不特别相关。

```
friend_ids = current_user.users.pluck(:id)

@articles = Article.search(params['search_term'], :with => {:user_id => friend_ids}) 
```

使用`.pluck`将为您节省大量时间，否则这些时间将用于实例化一堆 User 对象 - 您只需要它们的 id。确保您已设置`user_id`为 Sphinx 的属性（`has user_id`在`define_index`块中使用）。

# perl - 分布式测试框架

> ID：15058937
> 
> 赞同：2
> 
> 时间：2013-02-25T01:48:39.937
> 
> 标签：perl, testing, distributed-system

我正在寻找一些基于**Perl**或**Python**的分布式作业执行框架。事情是这样的：

在我的团队中，我们每周必须运行大约一千次回归测试，以确保新版本运行良好。起初所有这些测试都在一台机器上运行，但现在我们有更多的 PC，所以我们想建立一个集群并将所有测试分布到几台 PC 上。测试用 Perl 编写并由 XML 组织。我做了一些研究，但只发现了一些我完全不熟悉的Java框架。Perl 或 Python 中是否有其他一些分布式框架，或者只是一些描述我可以重新实现的系统的文章？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T09:19:29.730

您可以使用 gearman 在许多机器上运行命令（作业）。代码部分可能非常简单：

```
use Gearman::Worker;
my $worker = Gearman::Worker->new;
$worker->job_servers('127.0.0.1');
$worker->register_function($funcname => &do_job);
$worker->work while 1;
sub do_job {
  print "Do something!\n";
} 
```

[using_gearman_for_nightly_build_and_test](http://www.tokutek.com/2009/10/using_gearman_for_nightly_build_and_test/)

[http://www.slideshare.net/andy.sh/gearman-and-perl](http://www.slideshare.net/andy.sh/gearman-and-perl)

[http://search.cpan.org/~dormando/Gearman-Server-1.11/gearmand](http://search.cpan.org/~dormando/Gearman-Server-1.11/gearmand)

[http://gearman.org/](http://gearman.org/)

# boost-python - 防止可变类的自动哈希函数

> ID：15058941
> 
> 赞同：2
> 
> 时间：2013-02-25T01:49:17.927
> 
> 标签：boost-python

Python 只允许不可变对象的哈希值。例如，

```
hash((1,2,3)) 
```

有效，但是

```
hash([1,2,3]) 
```

提出一个`TypeError: unhashable type: 'list'`。请参阅[Python 文档](http://docs.python.org/3.3/glossary.html#term-hashable)。但是，当我通过常用函数在 Boost.Python 中包装 C++ 类时`boost::python::class_<>`，每个生成的 Python 类都有一个默认哈希函数，其中哈希值与对象在内存中的位置有关。（在我的 64 位操作系统上，哈希值是位置除以 8。）

当我向 Python 公开一个可以更改其成员的类时（任何可变数据结构，所以这是一种非常常见的情况！），我不想要一个默认的哈希函数，但想要一个调用来`hash()`引发与`TypeError`用户收到的 Python 自己的相同的调用可变数据类型。特别是，用户不应该意外地将可变对象用作字典键。如何在 C++ 代码中实现这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-02T23:11:43.820

我发现它是怎么回事：

```
boost::python::class_<MyClass>("MyClass")
  .setattr("__hash__", boost::python::object()); 
```

没有参数初始化的A`boost::python::object`对应于`None`。在纯 Python C API 中禁用哈希生成的过程稍微复杂一些，如[Python 文档](http://docs.python.org/3.3/c-api/typeobj.html#PyTypeObject.tp_hash)中所述。然而，上面的代码片段显然在 boost::python 中完成了这项工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-20T13:35:49.187

旁注：Boost.Python 的行为反映了 Python 中类的默认行为，其中对象基本上是可散列的，因为对象 id（派生自 id(x)）：

```
>>> hash(object())
8795488122377
>>> class MyClass(object): pass
... 
>>> hash(MyClass)
878579
>>> hash(MyClass())
8795488082665
>>> 
```

# android - Eclipse 中的 Android 最小 SDK 版本

> ID：15058942
> 
> 赞同：2
> 
> 时间：2013-02-25T01:49:28.073
> 
> 标签：android, eclipse

我对Android开发很陌生。我刚刚在我的 mac 系统上安装了 eclipse IDE 来开始 Android 开发。当我打开 Eclipse 时，右键单击包资源管理器 > 新项目 > Android > Android 应用程序项目 > 分配应用程序和项目名称 >**将所需的最低 SDK 更改为 11**但是当我单击下一步并选择活动时，我仍然`navigation type: Tab + Swipe`收到以下错误。

`This feature requires a minimum SDK version of at least 11, and the current min version is 8`

虽然我在创建项目时将所需的最低 SDK 更改为 11，但这个问题仍然存在。

我尝试更改`<uses-sdk android:minSdkVersion="11" />`所有 AndroidManifest.XML 文件，但由于此问题，我仍然无法使用许多功能。

谁能帮我解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-27T11:55:08.607

右键单击该项目，从 Android 工具中选择清除 LINT Markers。

为我工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-11-26T17:33:06.363

我有同样的问题，无法通过向导创建新活动。关闭应用程序项目并重新打开有帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-10-20T12:27:12.810

从工作区关闭您的 Eclipse 项目，然后通过双击再次打开该项目。这将强制 Eclipse 重新初始化您的项目，并且还将运行 Lint 和其他检查。

当您重构影响 AndroidManifest.xml 中条目的代码时，Eclipse 似乎会这样做。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-25T01:52:59.970

保存您的项目，然后清理它：项目 > 清理。

# php - php从开始到选定字符删除字符

> ID：15058943
> 
> 赞同：0
> 
> 时间：2013-02-25T01:49:31.620
> 
> 标签：php, string, strip

我想知道 PHP 中有什么东西可以从 437800__611 中删除 437800__。

原文：437800__611

我想要的结果：611

基本上需要从字符串的开头开始，并在__之后停止以保持611。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T01:54:38.727

尝试类似的东西`substr($str, strpos($str, '__') + 2)`。这将找到第一次出现的“__”（两个连续的下划线）并删除“__”之前的所有内容，包括下划线本身。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-25T02:56:51.030

尝试使用[`preg_split`](http://www.php.net/manual/en/function.preg-split.php)：

```
<?php

 $string = "437800__611";
 $result = preg_split("/^\d+__/", $string, null, PREG_SPLIT_NO_EMPTY);

 // The $result would be...
 array(1) { [0]=> string(3) "611" } 
```

# c - 在 C 中设置环境变量

> ID：15058946
> 
> 赞同：-2
> 
> 时间：2013-02-25T01:51:33.890
> 
> 标签：c

我正在尝试在 C 程序中更改我的 $PATH 。在这段代码之后，当我打印我的 PATH 变量时，它保持不变。这是我的方法，

```
 char path[100]="PATH=";
    char *input = "/newfolder/hello/";
    putenv(strcat(path, input)); 
```

我正在尝试使用 echo $PATH 将其打印回来，它仍然显示以前的路径，因为它没有改变。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-25T02:00:13.007

请告诉我设置后获取环境变量的方式。我有以下 C 代码按预期为我工作：

```
#include <stdio.h>
#include <stdlib.h>

int main()
{
    char path[100]="PATH=";
    char *input = "/newfolder/hello/";
    putenv(strcat(path, input));

    char* pPath;
    pPath = getenv("PATH");

    printf("%s", pPath);

    return 0;
} 
```

输出是：`/newfolder/hello/`

> 我正在尝试使用 echo $PATH 将其打印回来，它仍然显示以前的路径，因为它没有改变。

你在你的程序中使用类似的东西：

```
system("echo $PATH"); 
```

然后你不会得到你设置的那个值，因为这个命令将在你的 shell 进程中执行和评估，这个进程仍然具有初始环境变量设置值。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-25T01:54:05.903

当您启动一个进程时，它会获得其父环境的副本。您正在更改副本，该副本会在程序结束时消失。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-25T01:54:33.217

`putenv()`只会改变正在运行的进程的环境。它不能改变调用进程（shell）的环境

# ios - UITableView 在从纵向旋转到横向再回到纵向时会更改大小

> ID：15058951
> 
> 赞同：0
> 
> 时间：2013-02-25T01:52:17.317
> 
> 标签：ios, uitableview, rotation

我有一个自定义大小的 UITableView，我在纵向模式下将其设置为一定的宽度和高度。但是，当我旋转到横向，然后回到纵向时，表格的大小莫名其妙地增加了（即使在： willAnimateRotationToInterfaceOrientation(UIInterfaceOrientation)toInterfaceOrientation duration:(NSTimeInterval)duration

函数，我将其设置为与第一次加载表格时相同的宽度和高度（纵向模式）

谢谢，sdk

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-25T02:51:15.923

我的建议是更改自动调整大小的蒙版

```
[tableView setAutoresizingMask:UIViewAutoresizingNone] 
```

# ruby-on-rails - 在 Rails 中使用救援任务

> ID：15058953
> 
> 赞同：0
> 
> 时间：2013-02-25T01:52:51.083
> 
> 标签：ruby-on-rails, ruby-on-rails-3, error-handling

我正试图从作业中可能发生的错误中解救出来。我可以从 nil 中解救出来，但如果我想采取一些行动怎么办？

例如，这很好用：

```
new_object = Product.find_by_id(412) rescue nil 
```

但是，我想打印一些东西并采取另一个行动。那么我将如何让这样的事情起作用：

```
new_object = Product.find_by_id(412) rescue nil
                                        puts "what happened"
                                        next
                                     end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T01:59:17.653

使用以下

```
begin
  new_object = Product.find_by_id(412)
rescue
  new_object = nil
  puts 'what happened'
  next
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T02:02:29.687

```
begin
  foo = Product.find_by_id!(412)
rescue ActiveRecord::RecordNotFound
  logger.warn "Could not find foo" 
end 
```

# node.js - Node.js：是否有关于 process.env 变量的文档

> ID：15058954
> 
> 赞同：61
> 
> 时间：2013-02-25T01:52:56.797
> 
> 标签：node.js, process

我在我的程序中使用`process.env`了一点，这个变量似乎与我的程序无关，没有它我的应用程序也可以正常工作。

那么如何才能充分利用`process.env`呢？有没有关于它的文档或教程？

* * *

## 回答 #1

> 赞同：80
> 
> 时间：2013-02-25T01:59:13.297

试试这个链接[http://nodejs.org/api/process.html#process_process_env](http://nodejs.org/api/process.html#process_process_env)

然后可以在nodeJS中做一个小程序：

```
console.log(process.env) 
```

并运行它

```
$ node myProgram.js

{ TERM_PROGRAM: 'iTerm.app',
  TERM: 'xterm',
  SHELL: '/bin/bash',
  CLICOLOR: '1',
  TMPDIR: '/var/folders/ff/59np25p96x95hpgbtsv3r6zr0000gn/T/',
  Apple_PubSub_Socket_Render: '/tmp/launch-LIiu0r/Render',
  OLDPWD: '/Users/hermanjunge',
  USER: 'hermanjunge',
  COMMAND_MODE: 'unix2003',
  SSH_AUTH_SOCK: '/tmp/launch-XOMy7j/Listeners',
  __CF_USER_TEXT_ENCODING: '0x1F5:0:0',
  Apple_Ubiquity_Message: '/tmp/launch-jiZQH0/Apple_Ubiquity_Message',
  LSCOLORS: 'ExFxCxDxBxegedabagacad',
  PATH: '/Users/hermanjunge/.rbenv/shims:/usr/local/bin:/usr/bin:/bin:/usr/sbin:/sbin:/usr/local/bin:/opt/X11/bin:/usr/local/git/bin:/usr/local/mysql/bin',
  PWD: '/tmp',
  ITERM_PROFILE: 'hermanjunge',
  SHLVL: '1',
  COLORFGBG: '7;0',
  HOME: '/Users/hermanjunge',
  ITERM_SESSION_ID: 'w1t4p0',
  LOGNAME: 'hermanjunge',
  LC_CTYPE: 'UTF-8',
  DISPLAY: '/tmp/launch-HCtQeC/org.macosforge.xquartz:0',
  _: '/usr/local/bin/node' } 
```

然后，我们了解到我们可以从运行应用程序的环境中获取元素。比如，例如：

```
console.log(process.env.PWD); 
```

哪个返回

```
/tmp 
```

等等...

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2019-09-08T07:57:09.427

没有关于变量的文档，`process.env`因为它基于您的环境。（惊喜）。

当操作系统（OS、Linux、Win 或其他）启动一个进程时，它会向其传递进程可以读取的环境变量。

使用`process.env`您可以读取操作系统传递给您的程序的变量。

通常，NodeJS 项目`process.env`用于两件事：

1.  环境之间需要改变的东西。例如开发、测试和生产。您不想在开发期间连接到真实数据库，也不想`console.log`在生产中显示所有内容。
2.  要保守秘密。在 Git 上保留 API、令牌和私钥是不安全的。因此，您可以在启动应用程序之前使用环境变量保存设置。

*专业提示：*还有另一种方法。在`.env`文件中定义事物。在这个文件到你的`.gitignore`, 并使用 npm 模块`dotenv`

# sql - SQL 查询是否在一个表中出现多次显示另一表数据

> ID：15058956
> 
> 赞同：0
> 
> 时间：2013-02-25T01:53:01.720
> 
> 标签：sql

当 OwnerID 在 Property 中出现多次时，我试图从 Owner 获取 OwnerID、FName、LName。这是我尝试过的，但我对 sql 很陌生，所以我不知道这是否接近。

```
Select OwnerID, FName, LName 
From Owner 
Where OwnerID = (Select OwnerID 
                 From Property 
                 GROUP BY OwnerID 
                 HAVING Count(*) >=2) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T01:55:39.683

你的意思：

```
Select OwnerID, FName, LName 
From Owner 
Where OwnerID In (Select OwnerID 
                 From Property 
                 Group By OwnerID 
                 Having Count(OwnerId) >= 2) 
```

但是，如果您试图让所有拥有超过 1 个财产的所有者，则假定财产始终只有一个所有者，而现实世界中并非总是如此。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-25T01:59:28.757

您可以使用 IN 运算符，如 @Mitch Wheat 答案，或使用 EXISTS ：

```
Select OwnerID, FName, LName 
From Owner a
Where EXISTS (Select b.OwnerID 
                 From Property b
                 WHERE a.OwnerID = b.OwnerID
                 Group By b.OwnerID 
                 Having Count(b.OwnerId) >= 2) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-25T04:53:45.060

按表现我会做

```
Select OwnerID, FName, LName 
From Owner a
Where EXISTS (Select *
             From Property b
             WHERE a.OwnerID = b.OwnerID
             Group By b.OwnerID 
             Having Count(*) >= 2) 
```

# wcf - Azure 中的“私有”TCP WCF 服务？

> ID：15058957
> 
> 赞同：1
> 
> 时间：2013-02-25T01:53:09.007
> 
> 标签：wcf, security, azure

我们有三种“类型”的应用程序：

1.  **MainSite**（MVC Web 角色，6 个实例）
2.  **CoreServices**（基于 TCP 的 WCF 工作角色，20 个实例）
3.  **NewFeaturesPreviewSiteOne**（MVC Web 角色，3 个实例）
4.  **新功能预览网站二**
5.  ... 14\. **NewFeaturesPreviewSiteTwelve**

MainSite和**CoreServices在一个部署****中**捆绑为两个角色。这是更新〜每2个月一次。**MainSite**通过on **CoreServices**访问**CoreServices**。这很好用！`InternalEndpoint`

 **我们现在想要添加**NewFeaturesPreviewSite**（实际上，我们有 12 个完全不同/不相关的应用程序，您可以这样想）。**NewFeaturesPreviewSite**每两天更新一次，是它自己的部署。但是，我们**真的**希望它能够使用已经部署的**CoreServices**应用程序。

在考虑以下内容时，实现此目的的最佳（或好的）方法是什么？

1.  负载平衡是必不可少的（20 多个**CoreServices**实例处理来自三个**NewFeaturesPreviewSite**实例的请求）。
2.  我们**不**希望**CoreServices**公开暴露给 Internet 或我们部署到 Azure 的应用程序之外的任何东西。
3.  我真的很想有一个利用 Azure 的 PaaS 平台而不是其 IaaS 平台的解决方案。

最终，我怀疑 Azure 的某些功能`Local Network`或`Virtual Private Network`功能可能对我有所帮助，但我不确定 - 有些东西我还不太了解。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T06:15:21.377

从 Microsoft 的公共文档中，您可能无法通过另一个部署（云服务）的内部端点进行通信。这意味着您必须在核心服务上为新要素服务打开一个输入端点。但我的印象是，Steve Marx 曾在一篇博文中说，如果你以某种方式知道内部端点，那么如果它们都位于同一个数据中心，你就可以从另一个云服务角色连接到它。**

# delphi - 使用带有递归中序遍历的“下一步”按钮在线程二叉树中按值显示值

> ID：15058959
> 
> 赞同：0
> 
> 时间：2013-02-25T01:53:17.013
> 
> 标签：delphi, recursion, binary-tree, tree-traversal

正如标题所述，主要是在算法上遇到了一些麻烦。我有算法来解析并打印所有值，但我需要能够停止每个值并将其显示在标签中。我尝试使用全局变量“count”，以为我可以阻止它。有任何想法吗？这是我到目前为止所拥有的：

```
unit Unit4;

interface

uses
Winapi.Windows, Winapi.Messages, System.SysUtils, System.Variants, System.Classes,           Vcl.Graphics, Vcl.Controls, Vcl.Forms, Vcl.Dialogs, Vcl.StdCtrls;

type
  TForm4 = class(TForm)
  Createtree: TButton;
  Current: TLabel;
  RecursiveNext: TButton;
  Close: TButton;
  IterativeNext: TButton;
  Iterative: TLabel;
  procedure CloseClick(Sender: TObject);
  procedure CreatetreeClick(Sender: TObject);
  procedure RecursiveNextClick(Sender: TObject);
  procedure IterativeNextClick(Sender: TObject);
private
  { Private declarations }
public
  { Public declarations }
end;

type
 nodeptr = ^nodetype;
 nodetype = record
 id : integer ;
 left,right : nodeptr ;
 threaded : Boolean;
  end;

var
 Form4: TForm4;
 inf : textfile;
 root,c : nodeptr;
 count : integer;

implementation

{$R *.dfm}
function Emptytree(var root : nodeptr) : Boolean;
begin
  Result := False;
  if root^.id <> NULL then Result := True;
end;

procedure TForm4.CloseClick(Sender: TObject);
begin
 application.Terminate;
end;

function recursiveinorder(c : nodeptr) : integer;
 begin
 if c^.left <> nil then recursiveinorder(c^.left);
  Result := c^.id;
 if (c^.right <> nil) and (count > 0) then recursiveinorder(c^.right);
  count := count - 1;
 end;

function iterativeinorder(c : nodeptr) : integer;
var done : boolean;
begin
 c := root;
while c <> nil do c := c^.left;
begin
  done := false;
  while done = False do
   begin
   Result := c^.id;
    if (c^.threaded = false) and (count > 0) then
    begin
    c := c^.right;
    done := true;
    end
    else
    begin
    c := c^.right;
    if c = nil then done := true;
    end;
   end;
  end;
count := count - 1;
end;

procedure TForm4.CreatetreeClick(Sender: TObject);
var
parent, knew, c : nodeptr;

begin
 count := 0;
 new(parent);
 new(c);
 new(root);
 assignfile(inf, 'treedata.txt');
 reset(inf);
 readln(inf,root^.id);
while not eof(inf) do
  begin
  new(knew);
  readln(inf,knew^.id);
  if not Emptytree(root) then
   begin
    c:= root;
      while c <> nil do
        begin
        parent := c;
        if knew^.id < c^.id then
        c:=c^.left
      else c:= c^.right;
        end;
      if knew^.id < parent^.id then
       begin
       parent^.left := knew;
       knew^.threaded := True;
       knew^.right := parent;
       end
       else begin
         knew^.right := parent^.right;
         knew^.threaded := parent^.threaded;
         parent^.right := knew;
         parent^.threaded := false;
       end;
 end;
 if Emptytree(root) then root := knew;
end;
end;

procedure TForm4.IterativeNextClick(Sender: TObject);
 begin
  count := count + 1;
 Iterative.Caption := inttostr(iterativeinorder(root));
end;

procedure TForm4.RecursiveNextClick(Sender: TObject);
 begin
 count := count + 1;
 Current.Caption := inttostr(recursiveinorder(root));
end;

end. 
```

# django - Django Authentication：用户在注册前创建对象

> ID：15058964
> 
> 赞同：2
> 
> 时间：2013-02-25T01:54:03.147
> 
> 标签：django, django-models, django-authentication

我正在一个人们创建文章的 Django 网站上工作。我希望人们能够在注册过程中创建一篇文章。以下是步骤：

1.  用户在没有注册或登录的情况下点击“创建文章”。
2.  用户被引导到显示用于创建文章的表单的“创建文章”页面。
3.  点击“创建文章”表单上的“提交”按钮后，用户被重定向到注册/登录页面。
4.  在注册过程或登录后，文章将保存在用户 ID 下。

我对 Django 很陌生，所以就我而言，这里有一些并发症：

*   在登录过程之后，我是否以 AnonymousUser 作为作者保存对象？我如何再次找到该对象，以便在用户登录或注册后将其保存给用户？AnonymousUser 对象中是否有任何类型的唯一标识符？

*   我是否应该使用 URL 将对象通过注册过程，直到注册发生（然后保存）？如何做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T02:08:22.870

有几种方法可以做你想做的事。我会将用户从您的创建文章表单中排除，并将用户设置为空白 = True，null = True。

您是否只是在创建用户之前将文章保留在会话中，还是将其保存到数据库并在之后分配用户，这完全取决于您。

在会话中保留它的一个好处是，如果用户放弃注册过程，您在数据库中没有记录。我建议采用这种方式，因为它很容易做到，而且如果用户放弃会话，你不需要任何逻辑来清理你的数据库。

要专门回答您关于匿名用户的问题……不，匿名用户没有唯一标识符。您可以在 Django 中使用会话在视图之间持久化对象。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T02:18:08.197

**“我是否应该使用 URL 将对象通过注册过程，直到注册完成（然后保存它）？如何做到这一点？”**

您提出的上述建议是更好的解决方案，但不要将其传递给 url。有两种方法可以成功地做到这一点。

1.  您可以通过会话变量传递对象，这样就不会有人注意到它，而是将其传递给 url。
2.  您可以确定必须通过其 IP 地址获取哪些对象。

# python - 扩展模板未填充包含文件中的块

> ID：15058974
> 
> 赞同：2
> 
> 时间：2013-02-25T01:54:57.403
> 
> 标签：python, flask, jinja2

我有一个看起来像这样的模板：

```
{% include "base/top.html" with context %}
{% include "base/nav.html" with context %}
<div id="content">
    Stuff
    {% block content %}{% endblock %}
</div>
{% include "base/bottom.html" with context %} 
```

`base/nav.html`并`base/bottom.html`包含静态内容，但`base/top.html`包含一个`{% block title %}`. 因此，当我有第二个模板尝试从第一个文件继承时，如下所示：

```
{% extends firstfile.html %}
{% block title %}Imarealpage!{% endblock %}
{% block content %}Lorem ipsum dorem smitshm{% endblock %} 
```

该`{% block title %}`部分未呈现。如何确保它以及包含文件中和扩展模板中定义的任何其他块按应有的方式呈现？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2016-02-19T18:38:24.007

你误解了它的`{% include %}`工作原理。`{% include %}`标签*不是*预处理器；它不会在渲染之前将包含模板的代码直接放入包含模板中。相反，`{% include %}`触发包含模板的新独立模板渲染（就像您直接从自己的代码渲染包含模板一样），然后将渲染*结果*包含到包含模板的渲染中。

这意味着包含的模板具有与其包含模板完全分离的继承层次结构。例如，您可以拥有一个包含一些块的基本模板`component.html`，然后拥有`foo-component.html`以. 然后你可以有一个that does ，它将渲染，完成它的继承，并将结果放入. 但是其中的任何块和其中的任何块之间的关系为零——它们是具有单独块结构和继承层次结构的单独渲染。`{% extends "component.html" %}``component.html``layout.html``{% include "foo-component.html" %}``foo-component.html``component.html``layout.html``layout.html``component.html`

# ios - 错误无法使 UICollectionElementKindCell 类型的视图出列

> ID：15058975
> 
> 赞同：39
> 
> 时间：2013-02-25T01:55:12.143
> 
> 标签：ios, objective-c, uicollectionview

首先使用集合视图并遇到此错误：

> 由于未捕获的异常“NSInternalInconsistencyException”而终止应用程序，原因：“无法使类型视图出列：带有标识符 Cell 的 UICollectionElementKindCell - 必须为标识符注册一个 nib 或一个类或连接故事板中的原型单元格”

代码很简单，如下图。我一生都无法弄清楚我错过了什么。

```
- (UICollectionViewCell *)collectionView:(UICollectionView *)collectionView cellForItemAtIndexPath:(NSIndexPath *)indexPath
{
UICollectionViewCell *cell = [collectionView dequeueReusableCellWithReuseIdentifier:@"Cell" forIndexPath:indexPath];
cell.backgroundColor = [UIColor whiteColor]; 
return cell;
} 
```

集合视图控制器是使用 nib 创建的，并且委托和数据源都设置为文件的所有者。

View Controller 的头文件也很基础。

```
@interface NewMobialViewController_3 : UICollectionViewController <UICollectionViewDataSource, UICollectionViewDelegateFlowLayout>
@end 
```

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2013-02-25T07:41:36.300

来自dequeue 方法的[UICollectionView 文档：](http://developer.apple.com/library/ios/documentation/UIKit/Reference/UICollectionView_class/Reference/Reference.html#//apple_ref/occ/instm/UICollectionView/dequeueReusableCellWithReuseIdentifier%3aforIndexPath%3a)

> **重要提示：**在调用此方法之前，您必须使用 registerClass:forCellWithReuseIdentifier: 或 registerNib:forCellWithReuseIdentifier: 方法注册类或 nib 文件。

* * *

## 回答 #2

> 赞同：30
> 
> 时间：2014-10-21T01:29:59.947

您需要在 dequeueReusableCellWithReuseIdentifier 的参数和 UICollectionViewCell 的属性之间使用相同的标识符。

```
UICollectionViewCell *cell = [collectionView dequeueReusableCellWithReuseIdentifier:@"CollectionViewCell" forIndexPath:indexPath]; 
```

![标识符](../Images/b1dbb14b955ed9105ca57350f1aa0204.png)

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2014-08-24T03:29:03.380

补充@jrtuton 所写的内容......你需要的是：

1) 注册您的 nib 文件以将其与您的标识符“连接”：

```
//MyCollectionView.m
- (void) awakeFromNib{
 [self registerNib:[UINib nibWithNibName:@"NibFileName" bundle:nil]   forCellWithReuseIdentifier: @"MyCellIdentifier"];
} 
```

2）使用您的标识符从笔尖加载您的自定义单元格：

```
//MyCollectionView.m
- (UICollectionViewCell *)collectionView:(UICollectionView *)cv cellForItemAtIndexPath:(NSIndexPath  *)indexPath {
    MyCustomCollectionViewCell* cell = [cv dequeueReusableCellWithReuseIdentifier:@"MyCellIdentifier" forIndexPath:indexPath];
} 
```

3) 始终使用静态 NSString* 以避免在您的应用程序中再次使用相同的标识符。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2018-04-01T00:09:00.577

我已经 100% 正确完成了所有工作。但由于某种原因，我在一个小时内遇到了同样的错误，然后我所做的是：

1.  转到故事板
2.  选择原型单元（在我的例子中）
3.  从身份检查器中清除类名，然后重写它
4.  在属性检查器中重写标识符名称

简单地说，即使我之前做对了，也重新做了这一步，就像 xcode 在特定的纳秒错过了一些东西！

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2019-05-14T04:57:11.633

**斯威夫特 5**

1）确保你有一个正确的双端队列用于 HEADER，你可能正在使用常规单元格。

```
override func collectionView(_ collectionView: UICollectionView, viewForSupplementaryElementOfKind kind: String, at indexPath: IndexPath) -> UICollectionReusableView {
        let header = collectionView.dequeueReusableSupplementaryView(ofKind: kind, withReuseIdentifier: headerId, for: indexPath)
        return header
    } 
```

2）双重检查注册（ViewDidLoad）

```
collectionView.register(HeaderCell.self, forSupplementaryViewOfKind: UICollectionView.elementKindSectionHeader, withReuseIdentifier: headerId) 
```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2018-06-28T10:39:27.423

**斯威夫特4.0**

每当您当时`UITableViewCell`是**xib**时，您都必须在`UITableView`.

```
override func viewDidLoad(){
    super.viewDidLoad()

    self.yourtableview.register(UINib(nibName: "yourCellXIBname", bundle: Bundle.main), forCellReuseIdentifier: "YourCellReUseIdentifier")
   } 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2021-01-18T08:33:54.957

如果项目有多个 ViewController，请务必检查 ViewController 自定义类是否正确。然后确保 "collectionView.dequeueReusableCell(withReuseIdentifier: "ABC", for: indexPath) as?" 与 Collection View 内的 Collection Reusable View 中使用的标识符匹配。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2018-06-28T10:04:30.603

如果您使用的是**故事板**而不是 xib，这里有几个步骤。

1.  确保填写正确的单元格标识符。

[![原型细胞](../Images/223f7be4f8adc4b206d6971d7cf7be1e.png)](https://i.stack.imgur.com/dSvCX.png)[![属性面板](../Images/a8154fefeb7718a17ec73d5aed907106.png)](https://i.stack.imgur.com/WpOzf.png)

2.  在ColletionViewDelegate 中。

    ```
    func collectionView(_ collectionView: UICollectionView, cellForItemAt indexPath: IndexPath) -> UICollectionViewCell {
        let cell = collectionView.dequeueReusableCell(withReuseIdentifier: "YourCellName", for: indexPath)as! YourCellName
        return cell            
    } 
    ```

3.  就是这样。您也**不想**添加*registerClass:forCellWithReuseIdentifier:*这将导致元素 nil 错误。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2018-02-14T05:11:31.140

您需要在情节提要中提供正确的可重用标识符，您在注册 collectionViewCell 时已在代码中提供了该标识符。

这是代码。

```
func collectionView(_ collectionView: UICollectionView, cellForItemAt indexPath: IndexPath) -> UICollectionViewCell {
    let cell = collectionView.dequeueReusableCell(withReuseIdentifier: "ClctnVC", for: indexPath)as! ClctnVC
    return cell            
} 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2018-10-19T01:25:32.623

对我来说解决这个问题的方法与 Omar 的回答（大致）相同，除了我最终创建了一个新的 UICollectionViewCell 自定义类并为 Cell Reuse Indentifier 提供了一个新的/不同的名称，而不是我在应用程序中其他地方使用的名称。在那之后它立即起作用。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2019-12-17T15:44:08.447

以防万一，如果您在 Attributes Inspector -> Identifier 字段中的正确位置使用情节提要设置 collectionView 标识符。不在“恢复 ID”中的类名下。

如果您在 tableView 单元格中使用集合视图，请将委托添加到不在 tableViewController 中的 tableView 单元格。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2020-08-18T12:49:02.087

我有同样的问题。
当我创建一个 CollectionViewController 时，默认`reuseIdentifier`是`Cell`大写`C`的，但是我犯了一个错误，将我的单元格标识符`Storyboard`设置为`cell`
它们必须相同。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2021-06-09T04:31:46.123

如果您曾经尝试解决另一个问题的解决方案，但代码中的语法正确，插座 UI 正确。

你应该检查你的 tableview 或 collectionview 然后检查你是否忘记了 set delegate "tableview.delegate = self or collectionview.delegate = self"

```
collectionview.delegate = self
collectionview.dataSource = self 
```

在我的情况下，只有您在单元格中设计集合重叠集合。

[![在此处输入图像描述](../Images/582de7c6628edf3231b55ebf0eb7344e.png)](https://i.stack.imgur.com/IEvf0.png)

谢谢你。

* * *

## 回答 #14

> 赞同：-1
> 
> 时间：2016-08-09T08:25:22.157

我知道这是一个旧问题，但我遇到了同样的问题，并想分享为我解决的问题。

就我而言，我已经声明了一个全局标识符

```
let identifier = "CollectionViewCell" 
```

并且在使用它之前必须使用***self***：

```
collectionView.dequeueReusableCellWithReuseIdentifier(self.identifier, forIndexPath: indexPath) as! CollectionViewCell 
```

希望这可以帮助某人:)

* * *

## 回答 #15

> 赞同：-1
> 
> 时间：2017-05-03T15:09:53.770

如果您通过代码创建它，则必须创建一个自定义`UICollectionViewCell`，然后，初始化一个`UICollectionView`，并用于`loadView`设置视图是`UICollectionView`您创建的。如果您在 中创建`viewDidload()`，它不起作用。另外，你也可以拖动一个`UICollectionViewController`，这样可以节省很多时间。

# google-app-engine - 与仅祖先查询相比，数据存储批处理的性能如何？

> ID：15058976
> 
> 赞同：2
> 
> 时间：2013-02-25T01:55:24.450
> 
> 标签：google-app-engine, google-cloud-datastore

我希望批处理成为从数据存储中检索数据的最快方法之一。它与查询相比如何获取低于祖先的所有实体？当然，这个查询没有任何过滤器或排序顺序。

我希望这个查询与批量获取一样快，因为我认为它不需要索引扫描，并且只需要直接从实体 bigtable 中检索实体。此外，假设此表中的所有实体都按其键排序，则结果将位于订单的下一个，全部按顺序排列 - 这不是批量获取的保证。

考虑到这两个操作检索相同数量的实体，就成本而言，与批量获取相比，查询将只有 +1 读取操作。

我的假设有意义吗？您是否经历过任何可以证实或否认这些假设的事情？

如果我能确认我的期望，我计划大量使用这些查询。我会在层次结构中组织我的模型，并避免将参考存储到列表中的其他实体（用于批量获取） - 没有列表大小限制，我也可以避免检索大型实体（有很多多值属性）在不需要批量获取的情况下。

我非常感谢对此的任何评论。

先感谢您。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T03:38:16.827

我怀疑您在祖先查询和非祖先查询之间观察到的任何性能差异都不是巧合。但可以肯定的是，设置一些东西来做测量。这是一个很好的做法。

# java - 如何决定是使用 newCachedThreadPool 还是 newFixedThreadPool？

> ID：15058978
> 
> 赞同：18
> 
> 时间：2013-02-25T01:55:37.847
> 
> 标签：java, multithreading, executorservice

我正在做一个项目，我需要确保每个线程都在特定范围内工作。例如：

```
NO_OF_THREADS: 2
NO_OF_TASKS: 10 
```

如果`number of threads is 2`然后`number of tasks is 10`每个线程将执行`10 tasks`。所以这意味着 2 线程将做`20 tasks`。

**在实际情况下，这些数字（任务数和线程数）将非常高，因为它们都可以在我的代码中进行配置。**

在上面的例子中，`first thread`应该使用 id between`1 and 10`并且`second thread`应该使用 id between`11 and 20`等等，如果有更多的线程。之后，每个线程将建立数据库连接，然后插入数据库。

所以我有我的下面的代码，它工作正常。

```
public static void main(String[] args) {

    final int noOfThreads = 2;
    final int noOfTasks = 10;

    //create thread pool with given size 
    ExecutorService service = Executors.newFixedThreadPool(noOfThreads);

    // queue some tasks 
    for (int i = 0, int nextId = 1; i < noOfThreads; i++, nextId += noOfTasks) {
        service.submit(new ThreadTask(nextId, noOfTasks));
    }
}

class ThreadTask implements Runnable {
    private final int id;
    private int noOfTasks;

    public ThreadTask(int nextId, int noOfTasks) {
        this.id = nextId;
        this.noOfTasks = noOfTasks;
    }

    public void run() {

    //make a database connection

        for (int i = id; i < id + noOfTasks; i++) {

        //insert into database
        }
    }
} 
```

**我的问题：-**

我正在浏览互联网上的各种文章，并阅读了有关`newCachedThreadPool`. 所以现在我想知道的是 - 我应该使用`newFixedThreadPool`还是`newCachedThreadPool`在我的代码中？目前我正在使用`nexFixedThreadPool`. 我无法决定我应该选择哪些因素`newCachedThreadPool`或`newFixedThreadPool`。所以这就是我发布我的场景的原因，我将用我的代码做什么。

谁能帮我看看我应该在这里选择什么？请详细解释一下为什么我们会根据哪些因素选择它，以便我可以很好地理解这一点。我已经浏览了 java 文档，但无法决定我应该在这里选择什么。

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-02-25T01:58:19.930

> 所以现在我想知道的是 - 我应该在我的代码中使用 newFixedThreadPool 还是 newCachedThreadPool ？

引用 Javadocs 的话`newFixedThreadPool()`：

> 创建一个重复使用固定数量线程的线程池...

This means that if you ask for 2 threads, it will start 2 threads and never start 3\. On the other hand, the `newCachedThreadPool()`:

> Creates a thread pool that creates new threads as needed, but will reuse previously constructed threads when they are available.

In your case, if you only have 2 thread to run, either will work fine since you will only be submitting 2 jobs to your pool. However, if you wanted to submit all 20 jobs at once but only have 2 jobs running at one time, you should use a `newFixedThreadPool(2)`. If you used a cached pool then each of the 20 jobs will start a thread which will run at the same time which may not be optimal depending on how many CPUs you have.

Typically I use the `newCachedThreadPool()` when I *need* the thread to be spawned immediately, even if all of the threads currently running are busy. I recently used it when I was spawning timer tasks. The number of concurrent jobs are immaterial because I never spawn very many but I want them to run when they are requested and I want them to re-use dormant threads.

I used `newFixedThreadPool()` when I want to limit the number of concurrent tasks running at any one point to maximize performance and not swamp my server. For example if I am processing 100k lines from a file, one line at a time, I don't want each line to start a new thread but I want some level of concurrency so I allocate (for example) 10 fixed threads to run the tasks until the pool is exhausted.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-05-16T20:41:49.707

I feel like it is highly dependent on the type of job, If you have a function which is I/O bound, use newCachedThreadPool() if its a cpu intensive operation without I/O , use the other one.

# javascript - 当字段是自己的对象类型时如何使用 JSON Stringify？

> ID：15058982
> 
> 赞同：-1
> 
> 时间：2013-02-25T01:56:01.727
> 
> 标签：javascript, json, stringify

**编辑：像这样的东西，但这也不起作用，但我认为存在问题**

```
var stringifyObj = JSON.stringify({
      "addressAddressId":$('#address').val(){ 
          "cityId:"$('#city').val(){
                "postalCode":$('#postalCode').val() 
           } 
      }
}); 
```

* * *

**当我在 Netbeans 中生成测试客户端时，JSON 结构 (GET/JSON) 就是这样，但我如何使用 Javascipt 和 Strinfy-function 进行编码？**

```
 "addressAddressId": {
        "addressId": 1,
        "address": "Järnvägen 2",
        "address2": null,
        "district": null,
        "postalCode": "20360",
        "phone": null,
        "coordinates": null,
        "latitude": null,
        "longitude": null,
        "directions": null,
        "description": null,
        "addrZipCityCountry": null,
        "lastUpdated": 1361754860000,
        "cityId": {
            "cityId": 1,
            "city": "",
            "lastUpdate": 1361754850000,
            "countryCountryId": {
                "countryId": 1,
                "country": "Sweden",
                "lastUpdate": 1361754837000
            }
        }
    }, 
```

**问题**

1.  在地址对象内部使用自己的对象类型（如 City-object）时使用 JSON.stringify 时的正确语法是什么？
2.  如果不使用@JsonIgnoreProperties({""})，我应该将每个字段都添加到 json 中吗？我只需要地址、城市和邮政编码。地址是在服务器端带有字段字符串地址的地址类型，城市是城市类型，包括城市名称的字符串字段等。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T02:29:10.870

我不确定你想用上面的 Javascript 函数做什么，但如果你的目标是使用 Javascript 生成具有这种结构的 JSON，也许你可以试试这个：

```
var stringifyObj = JSON.stringify({
  "addressAddressId": {
    "addressId": 1,
    "address": "Järnvägen 2",
    "address2": null,
    "district": null,
    "postalCode": "20360",
    "phone": null,
    "coordinates": null,
    "latitude": null,
    "longitude": null,
    "directions": null,
    "description": null,
    "addrZipCityCountry": null,
    "lastUpdated": 1361754860000,
    "cityId": {
        "cityId": 1,
        "city": "",
        "lastUpdate": 1361754850000,
        "countryCountryId": {
            "countryId": 1,
            "country": "Sweden",
            "lastUpdate": 1361754837000
        }
    }
  }         
}); 
```

基本上，您需要做的就是将 JSON 字符串包装为`JSON.stringify`.

或者，如果您需要逐步构建对象，而不是像上面那样一次提供所有属性，也许您可​​以试试这个：

```
var obj = {};
//add properties as needed
//simple properties
obj.addressId = 1;
obj.address = "Järnvägen 2";
obj.address2 = null;
//nested properties
obj.cityId = {};
obj.cityId.cityId = 1;
obj.cityId.countryCountryId = {};
obj.cityId.countryCountryId.countryId = 1; 
```

正确填充所有对象属性后，将其传递给`JSON.stringify`这样的：

```
var stringifyObj = JSON.stringify(obj); 
```

或者，要生成示例中描述的 JSON，您可以进一步包装`obj`如下：

```
var stringifyObj = JSON.stringify({ addressAddressId = obj }); 
```

我希望你能明白：）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T03:56:58.183

而且您在这里缺少逗号，尽管我不能说这是您的问题。

```
"postalCode": {
    "postalCode": $('#postalCode').val()
} <--- need comma here

"addressAddressId": { 
```

# c++ - 状态机、子类和函数指针

> ID：15058990
> 
> 赞同：0
> 
> 时间：2013-02-25T01:57:08.227
> 
> 标签：c++, function-pointers, state-machine, subclass

我在为班级实施状态机时遇到了麻烦。我不断收到错误：

```
state.cpp:5: error: have0 was not declared in this scope 
state.cpp:10: error: redefinition of State* Have0State::process(std::string)
state.h:18: error: virtual State* Have0State::process(std::string) previously defined here 
```

在继续使用机器的其余部分之前，我试图让 Have0State 工作，因此代码稀疏。

状态.h：

```
#ifndef STATE_H
#define STATE_H

#include <string>
#include <stdio.h>
#include <stdlib.h>
#include <assert.h>
#include <iostream>

class State{
    public:
        State(){};
        virtual State* process(std::string input) = 0;

};
class Have0State: public State {
    public:
        Have0State():State(){};
        virtual State* process(std::string input);
}have0;
#endif 
```

状态.cpp：

```
#include "state.h"

using namespace std;
State *currentState = &have0;

State* Have0State::process(string input){
    if(input == "quarter"){
        cout << "cool" << endl;
    }
    return &have0;
}

int main(int argc, char** argv) {
    string input;
    //get input
    cin >> input;
    while (input != "exit") {
        currentState = currentState->process(input);
        //get input
        cin >> input;

    }
    return 0;
}; 
```

我尝试将流程功能定义为，`Have0State::State::process(string input)`但这也不起作用。关于函数指针应该如何工作的任何说明，特别是在子类成员函数的上下文中，我将不胜感激。

编辑：另外，state.h 文件中类声明`have0`末尾的声明到底是什么？`Have0State`它没有明确声明的类型；是否暗示它是 Have0State 类型？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T02:59:25.040

您的示例中没有任何函数指针。此外，像 Marciej 一样，我能够编译（并运行）这段代码。

但是，既然你问了，'have0' 声明只是声明了一个类的实例。一个类定义后面可以跟 0 个或多个这样的声明（以及初始化器）：

```
class Thing {...} one, another, many[3] = { Thing(1), Thing(2), Thing(3) }; 
```

与任何其他类型相同：

```
int counter = 0, flag = 0x80, limit = 500; 
```

这个可选的声明器列表的可能性是为什么类、结构、联合和枚举定义必须后跟分号（以终止列表）。

但是，正如 Karthik 所说，如果标头包含在多个 .cpp 文件中，则在标头中定义变量将导致链接时出现“重复定义”错误。IMO 可以使用这种技术在 .cpp 文件（而不是 .h 文件）中定义和声明私有对象。

# objective-c - 解析xml时如何选择两个同名元素

> ID：15058991
> 
> 赞同：0
> 
> 时间：2013-02-25T01:57:26.780
> 
> 标签：objective-c, xml-parsing

我正在学校里解析 xml，我正在使用 Twitter 的 API 来处理。我正在尝试获取发布推文的日期，但遇到了一个问题：有两个同名元素在 xml.xml 中保存不同的值。但是，一个比另一个嵌套得更远，因此从逻辑上讲，我想检查嵌套的那个。我该怎么做呢？

现在一切都在完美运行。我只想为我的项目添加更多内容。

这是我正在调用的 didEndElement 方法的示例。

```
 -(void)parser:(NSXMLParser *)parser didEndElement:(NSString *)elementName namespaceURI:          (NSString *)namespaceURI qualifiedName:(NSString *)qName
{
//Creates an instance of the singleton to grab the array stored there
DataArraySingleton *singleton = [DataArraySingleton sharedArray];

//easy access to array
NSMutableArray *array = singleton.theArray;

//If the element ends with text
if ([elementName isEqualToString:@"text"])
{
    //Sets the value/key pair for text
    [tweets setValue:currentXMLValue forKey:elementName];

}
//Same as above
if ([elementName isEqualToString:@"screen_name"])
{
    [tweets setValue:currentXMLValue forKey:elementName];
}
//Same as above
if ([elementName isEqualToString:@"profile_image_url"])
{
    [tweets setValue:currentXMLValue forKey:elementName];
}
//If the element ends with status
if ([elementName isEqualToString:@"status"])
{
    //Adds the objects collected above to the array
    [array addObject:tweets];

    //Resets the object TweetInformation to be called again above
    tweets = nil;

}
//Resets xml value
currentXMLValue = nil;
} 
```

多谢你们

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T02:59:53.417

添加代码以检查所需嵌套日期元素的父标记。当您遇到开始标记时，请在代码中设置一个标志。现在，当您遇到日期标签时，请检查该标志是否已设置。如果未设置标志，则忽略日期标签。当您检测到父项的结束标记时，重置标志。

# eclipse - 'Share Project' Subversive 是做什么的？

> ID：15058992
> 
> 赞同：0
> 
> 时间：2013-02-25T01:57:41.420
> 
> 标签：eclipse, svn, eclipse-plugin, ide, subversive

在 Eclipse Subversive 插件中，有什么作用`Share Project`？是否将代码提交到存储库？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T02:05:01.917

它可以对您的项目进行版本控制。您可以在此之后选择要使用的版本控制系统并进行配置。SVN 在你的情况下。

# ios - 转发 UIAlertView 点击到另一个控制器

> ID：15058993
> 
> 赞同：2
> 
> 时间：2013-02-25T01:57:51.800
> 
> 标签：ios, objective-c, uialertview

当用户单击 UIAlertView 上的“确定”按钮时，我试图将用户发送到另一个控制器，但出现以下错误：

```
Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: '***   setObjectForKey: object cannot be nil (key: classname)' 
```

我的 UIAertView 在这样的 if 语句中：

```
if([placemarks count] > 0)
  {
    CLPlacemark *foundPlacemark = [placemarks objectAtIndex:0];
    UIAlertView *message = [[UIAlertView alloc] initWithTitle:@"Location set"
                       message:[NSString stringWithFormat:@"Your location, was set to %@", foundPlacemark.country]
                                                 delegate:self
                                        cancelButtonTitle:@"OK"
                                        otherButtonTitles:nil];
             [message show];

  } 
```

我正在检查单击的按钮：

```
- (void)alertView:(UIAlertView *)alertView clickedButtonAtIndex:(NSInteger)buttonIndex
{
  if(buttonIndex == 0)
{
    MasterViewController *controller=[[MasterViewController alloc]initWithNibName:@"MasterViewController" bundle:nil];
   [self.navigationController pushViewController:controller animated:YES];
  }
} 
```

我确实有委托集：

```
@interface LocationViewController : UIViewController <CLLocationManagerDelegate, UIAlertViewDelegate> 
```

UIAlertView 可以自己正常工作。对我所缺少的有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T03:52:41.737

您是否使用 Interface Builder 来制作 MasterViewController 的 UI？MasterViewController 的 nib 文件似乎有问题。当 MasterViewController 从 xib 文件中获取 init 时，设置丢失并且出现异常。

最可能的情况是 xib 文件和文件所有者之间可能存在一些不良连接。请检查您在代码中是否删除了任何连接的 IBOutlet，但将连接保留在 xib 文件中。如果是这样，删除连接，它可以解决。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T04:03:47.043

```
- (void)alertView:(UIAlertView *)alertView clickedButtonAtIndex:(NSInteger)buttonIndex
{
  if(buttonIndex == 0)
{
    // MasterViewController *controller=[[MasterViewController alloc]initWithNibName:@"MasterViewController" bundle:nil];
       MasterViewController *controller=[[MasterViewController alloc]init]; // creat your MasterViewController like this. 
   [self.navigationController pushViewController:controller animated:YES];
  }
} 
```

如果这样的编码没有崩溃，我认为问题出在你的 IB

# java - 将一种方法调用到另一种方法中

> ID：15058997
> 
> 赞同：0
> 
> 时间：2013-02-25T01:58:20.437
> 
> 标签：java, variables, methods, call, area

这是我必须为学校做的作业：

*   创建一个名为 AreaCircle 的新项目
*   复制 5.2 节中的距离方法
*   复制练习 4.2 中圆的面积法。更改它以返回该区域，而不是打印它。
*   为圆创建另一个 area 方法，该方法采用两个点（四个整数参数：x1、x2、y1、y2）并返回一个双精度值。确保两种方法具有相同的名称。由于参数会有所不同，因此执行的参数将取决于传递的参数。在这个新的 area 方法中，调用 distance 方法来获取圆的半径。
    然后调用OTHER（原始）面积方法来获取圆的面积。
*   您将需要进行一些更改，以免丢失精度编译器错误。
*   在 main 中，提示用户输入四个整数，代表圆外的一个点和圆的中心点（这些将用于查找半径的长度）。调用适当的区域方法。显示结果。

我不确定我的代码是否正确，但显然有问题，因为它不起作用......

```
public static void main(String[] args) {
    Scanner reader;
    reader = new Scanner (System.in);
    System.out.println("Please enter the coordinates of a circle:");
    newLine();
    System.out.println("Outside point:");
    newLine();
    System.out.println("x1:");
    int x1 = reader.nextInt();
    newLine();
    System.out.println("y1:");
    int y1 = reader.nextInt();
    newLine();
    System.out.println("Center Point:");
    newLine();
    System.out.println("x2:");
    int x2 = reader.nextInt();
    newLine();
    System.out.println("y2:");
    int y2 = reader.nextInt();
}

public static void area(double radius, int x1, int x2, int y1, int y2)
{
    double areaCircle = (Math.PI * area(x1, x2, y1, y2) * area(x1, x2, y1, y2));
}

public static double area(int x1, int x2, int y1, int y2) {
   double radius = distance (x1, y1, x2, y2);
   return radius;
}

public static double distance(int x1, int y1, int x2, int y2) 
{
    double dx = x2 - x1;
    double dy = y2 - y1;
    double dsquared = dx*dx + dy*dy;
    double result = Math.sqrt (dsquared);
    return result;
}

//NewLine Method
public static void newLine () {
    System.out.println ("");
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T08:14:34.127

如前所述，您的代码永远不会调用任何计算方法，这意味着它们永远不会运行并且永远不会计算面积等。也没有任何代码用于显示结果。

此外，area 方法甚至不返回任何内容，这意味着它会计算值然后将其丢弃。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-25T08:09:54.813

您`main`没有调用任何其他方法！。先完成代码。

# scala - Scala 宏和代码生成

> ID：15058998
> 
> 赞同：0
> 
> 时间：2013-02-25T01:58:28.213
> 
> 标签：scala, scala-macros

给定简单的示例源，我需要能够创建复制构造函数和隐式转换方法。有人可以建议如何使用 Scala 2.10 和新的宏功能来实现这一点吗？

```
import java.util.UUID

object Sample {

  case class Entity(id: UUID, name: String)

  trait Storable {

    val storageId: UUID

  }

  trait Storage {

    type T <: Entity with Storable

    def save(src: T) : T

  }

  class StorageImpl extends Storage {

    type T = Entity with Storable

    def save(src: StorageImpl#T): StorageImpl#T = null
  }

  def getEntity() = Entity(UUID.randomUUID(), "Test")

  def main(args: Array[String]) {
    val storage = new StorageImpl
    val entity = getEntity() // get this from some third-party module
    storage.save(entity) // HOW?! Create copy constructor and implicit?
  }

} 
```