# StackOverflow 问答 12971000-12971999

# sql - 查询以按日期分组显示为日期 From-To

> ID：12971001
> 
> 赞同：4
> 
> 时间：2012-10-19T09:13:04.237
> 
> 标签：sql, group-by

我在表格中有如下数据

```
SERVICE_ID  DATE_SEQ    DAY_SEQ
101004           2012-10-18       1
101004           2012-10-19       2
101001           2012-10-20       3
101004           2012-10-21       4 
```

我希望查询生成日期显示为日期{From-to}的范围，它将按服务ID分组，日期是序列，如果最终显示为
**输出：**

```
**Service_id**      **From-To**                **Date**
101004      2012-10-18 - 2012-10-19         1-2
101001      2012-10-20 - 2012-10-20         3-3
101004      2012-10-21 - 2012-10-21         4-4 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T08:02:41.133

# 尝试这个

```
DECLARE @TB AS TABLE(
  SERVICE_ID INTEGER,
  DATE_SEQ SMALLDATETIME,
  DAY_SEQ NVARCHAR(10),
  FARE_SUP_ID INT
)

INSERT INTO @TB VALUES
  (101004,'2012-10-18 00:00:00',1,267),
  (101001,'2012-10-19 00:00:00',2,171),
  (101004,'2012-10-20 00:00:00',3,267),
  (101004,'2012-10-21 00:00:00',4,171),
  (101001,'2012-10-22 00:00:00',5,171),
  (101001,'2012-10-23 00:00:00',6,171),
  (101004,'2012-10-24 00:00:00',7,267)

SELECT * fROM @TB

;WITH TB1 AS (

SELECT 
  T1.SERVICE_ID,
  MIN(T1.DATE_SEQ) AS CHECK_IN, 
  MAX(T2.DATE_SEQ) AS CHECK_OUT,
  MIN (T1.DAY_SEQ) + ' - ' + MAX(T2.DAY_SEQ) AS DAY_SEQ,
  MAX(T1.FARE_SUP_ID) AS FARE_SUP_ID,
  1 AS DIFF
  FROM @TB T1 INNER JOIN @TB T2
    ON T1.SERVICE_ID = T2.SERVICE_ID
  WHERE DATEDIFF(DY, T1.DATE_SEQ ,T2.DATE_SEQ) = 1
  GROUP BY 
    T1.SERVICE_ID

UNION ALL

SELECT  T3.SERVICE_ID,T3.DATE_SEQ AS CHECK_IN ,T4.DATE_SEQ AS CHECK_OUT 
  ,T3.DAY_SEQ,T3.FARE_SUP_ID,DATEDIFF(DY, T3.DATE_SEQ ,T4.DATE_SEQ)  AS DIFF
  FROM @TB T3 INNER JOIN @TB T4
    ON T3.SERVICE_ID = T4.SERVICE_ID
  WHERE DATEDIFF(DY, T3.DATE_SEQ ,T4.DATE_SEQ) = 0
    AND 
    T3.DATE_SEQ NOT IN (
      SELECT T1.DATE_SEQ
        FROM @TB T1 INNER JOIN @TB T2
          ON T1.SERVICE_ID = T2.SERVICE_ID
        WHERE DATEDIFF(DY, T1.DATE_SEQ ,T2.DATE_SEQ) = 1
    )
    AND 
      T4.DATE_SEQ NOT IN (
        SELECT T2.DATE_SEQ
          FROM @TB T1 INNER JOIN @TB T2
            ON T1.SERVICE_ID = T2.SERVICE_ID
          WHERE DATEDIFF(DY, T1.DATE_SEQ ,T2.DATE_SEQ) = 1
      )
  )
SELECT 
  *
  FROM TB1
  ORDER BY DAY_SEQ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T09:36:23.350

try this, the idea is to run inner queries on the main query based on the ID of the main query:

```
select 
SERVICE_ID, 
(select cast(min(DATE_SEQ) AS VARCHAR(20)) from my_table where SERVICE_ID = mt.SERVICE_ID) + ' - ' +(select cast(min(DATE_SEQ) AS VARCHAR(20)) from my_table where SERVICE_ID = mt.SERVICE_ID) as FROM_TO,
(select cast(min(DAY_SEQ) AS VARCHAR(20)) from my_table where SERVICE_ID = mt.SERVICE_ID) + ' - ' +(select cast(min(DAY_SEQ) AS VARCHAR(20)) from my_table where SERVICE_ID = mt.SERVICE_ID) as DATE
from my_table mt 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-21T09:14:22.043

Following will work for sure (even if days are missing in between) -

```
--STEP 1\. CREATE DUMMY TABLE WITH DUPLICATE_SEQ COLUMN. YOU MAY ADD ONE MORE COLUMN IN
--SAME TABLE
DECLARE @TABLE TABLE (SERVICE_ID  INT, DATE_SEQ  DATETIME,  DAY_SEQ INT,  DUPLICATE_SEQ INT DEFAULT(0))

INSERT INTO @TABLE(SERVICE_ID, DATE_SEQ, DAY_SEQ)  VALUES
(101004,           '2012-10-18',       1),
(101004,           '2012-10-19',      2),
(101001,           '2012-10-20',       3),
(101004,           '2012-10-21',       4)

--STEP 2\. LOGIC TO UPDATE TABLE WITH DUPLICATE_SEQ VALUE FOR SEQUENTIAL DUPLICATES ONLY
DECLARE @PREVIOUS_SERVICE_ID INT
DECLARE @DUPLICTE_COUNTER INT = 1

SET @PREVIOUS_SERVICE_ID = (SELECT TOP 1 SERVICE_ID FROM @TABLE)

UPDATE @TABLE
SET 
DUPLICATE_SEQ = @DUPLICTE_COUNTER
,@DUPLICTE_COUNTER = CASE WHEN @PREVIOUS_SERVICE_ID = SERVICE_ID THEN @DUPLICTE_COUNTER ELSE @DUPLICTE_COUNTER + 1  END
,@PREVIOUS_SERVICE_ID = CASE WHEN @PREVIOUS_SERVICE_ID = SERVICE_ID THEN @PREVIOUS_SERVICE_ID ELSE SERVICE_ID  END

--STEP 3\. LOGIC TO UPDATE TABLE WITH DUPLICATE_SEQ VALUE FOR SEQUENTIAL DUPLICATES ONLY    
SELECT SERVICE_ID AS 'Service_id'
    , CONVERT(CHAR(10), MIN(DATE_SEQ), 126) + ' - ' + CONVERT(CHAR(10), MAX(DATE_SEQ), 126) AS 'From-To'
    , CAST(MIN(DAY_SEQ) AS VARCHAR(10)) + ' - ' + CAST(MAX(DAY_SEQ) AS VARCHAR(10)) AS 'Date'
FROM @TABLE
GROUP BY DUPLICATE_SEQ, SERVICE_ID
ORDER BY 3 ASC 
```

**OUTPUT** **-**

```
Service_id  From-To                      Date
101004      2012-10-18 - 2012-10-19      1 - 2
101001      2012-10-20 - 2012-10-20      3 - 3
101004      2012-10-21 - 2012-10-21      4 - 4 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-19T12:56:08.587

我人为地将第二个表中的一个序列缩减为一个，因为那会加入这些表。

```
SELECT CASE WHEN (t1.service_id = t2.service_id) THEN t1.service_id ELSE t2.service_id END AS service_id,
       CASE WHEN (t1.service_id = t2.service_id) THEN CAST(t1.date_seq AS nvarchar(10)) + ' - ' + CAST(t2.date_seq AS nvarchar(10)) 
                                                 ELSE CAST(t2.date_seq AS nvarchar(10)) + ' - ' + CAST(t2.date_seq AS nvarchar(10)) END AS date_seq,
       CASE WHEN (t1.service_id = t2.service_id) THEN CAST(t1.day_seq AS nvarchar(10)) + ' - ' + CAST(t2.day_seq AS nvarchar(10)) 
                                                 ELSE CAST(t2.day_seq AS nvarchar(10)) + ' - ' + CAST(t2.day_seq AS nvarchar(10)) END AS day_seq                                                              
FROM dbo.test28 t1 INNER JOIN dbo.test28 t2 ON t1.day_seq = t2.day_seq - 1 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-19T09:58:09.137

我可能没有理解这个问题。

（CONCAT() 函数依赖于 DBMS，您可能需要将日期转换为文本）

这似乎是一个直接的“分组”查询：

```
SELECT Service_id, 
CONCAT(MIN_DATE," - ", MAX_DATE) AS FromTo,
CONCAT(MIN_SEQ," - ", MAX_SEQ) AS Date
FROM
(
  SELECT Service_id, 
  MIN(DATE_SEQ) AS MIN_DATE, 
  MAX(DATE_SEQ) AS MAX_DATE, 
  MIN(DAY_SEQ) AS MIN_SEQ, 
  MAX(DAY_SEQ) AS MAX_SEQ
  FORM YOUR_TABLE
  GROUP BY Service_id ) AS A 
```

希望有帮助！

# uiinterfaceorientation - 将方向从横向更改为纵向时弹出按钮没有响应？

> ID：12971004
> 
> 赞同：2
> 
> 时间：2012-10-19T09:13:09.267
> 
> 标签：uiinterfaceorientation, xcode4.5, ipad, ipad-2

当我将方向从横向更改为纵向时，我的应用程序无法响应弹出按钮。任何人都可以解决问题

# java - 如何以编程方式配置 TransactionManager

> ID：12971007
> 
> 赞同：13
> 
> 时间：2012-10-19T09:13:12.447
> 
> 标签：java, hibernate, spring-mvc, spring-transactions

我在这里有一个基于 Spring MVC 的应用程序。我的同事（顺便说一句，他不在这里）以编程方式对其进行了配置，并且似乎一切正常，除了 TransactionManager。我从来没有像这样配置过 Spring Web 应用程序，我不知道该怎么做，也找不到任何关于如何配置这样的 Web 应用程序的文档。

我将向您展示“AppInitializer”和“EntityManagerConfig”。

应用初始化器：

```
public class AppInitializer implements WebApplicationInitializer {

@Override
public void onStartup(ServletContext servletContext) throws ServletException {
    AnnotationConfigWebApplicationContext context;
    ServletRegistration.Dynamic dispatcherServletRegistration;
    FilterRegistration.Dynamic encodingFilterRegistration, compressionFilterRegistration;
    Set<SessionTrackingMode> sessionTrackingModes = new HashSet<SessionTrackingMode>();

    sessionTrackingModes.add(SessionTrackingMode.SSL);

    context = new AnnotationConfigWebApplicationContext();
    context.setServletContext(servletContext);
    context.scan("de.devbliss.doc");

    servletContext.addListener(new ContextLoaderListener(context));
    servletContext.addListener(new Log4jConfigListener());

    dispatcherServletRegistration = servletContext.addServlet("main", new DispatcherServlet(context));
    dispatcherServletRegistration.setLoadOnStartup(1);
    dispatcherServletRegistration.addMapping("/*");

    encodingFilterRegistration = servletContext.addFilter("encodingFilter", CharacterEncodingFilter.class);
    encodingFilterRegistration.setInitParameter("encoding", "UTF-8");
    encodingFilterRegistration.setInitParameter("forceEncoding", "true");
    encodingFilterRegistration.addMappingForUrlPatterns(null, false, "/*");

    compressionFilterRegistration = servletContext.addFilter("compressionFilter", GzipFilter.class);
    compressionFilterRegistration.addMappingForUrlPatterns(null, false, "/*");

    compressionFilterRegistration = servletContext.addFilter("springSecurityFilterChain",
            DelegatingFilterProxy.class);
    compressionFilterRegistration.addMappingForUrlPatterns(null, false, "/*");

    servletContext.setSessionTrackingModes(sessionTrackingModes);
}
} 
```

实体管理器配置：

```
@Configuration
@PropertySource("classpath:/db.properties")
public class EntityManagerConfig {

@Bean
public DataSource dataSource(Environment env) {
    BasicDataSource ds = new BasicDataSource();

    ds.setUrl(env.getProperty("url", "localhost"));
    ds.setUsername(env.getProperty("user", "blissdoc"));
    ds.setPassword(env.getProperty("password", "s3cret"));

    return ds;
}

@Bean
@Inject
public LocalSessionFactoryBean sessionFactory(DataSource dataSource) {
    LocalSessionFactoryBean factory = new LocalSessionFactoryBean();

    factory.setDataSource(dataSource);

    return factory;
}

@Bean
public HibernateTransactionManager transactionManager(
        SessionFactory sessionFactory) {
    HibernateTransactionManager tm = new HibernateTransactionManager(
            sessionFactory);
    return tm;
}

@SuppressWarnings("unchecked")
@Bean
@Inject
public LocalContainerEntityManagerFactoryBean entityManager(
        DataSource dataSource, AbstractEnvironment env) {
    LocalContainerEntityManagerFactoryBean em = new LocalContainerEntityManagerFactoryBean();
    HibernateJpaVendorAdapter jpaVendorAdapter = new HibernateJpaVendorAdapter();
    HibernateJpaDialect jpaDialect = new HibernateJpaDialect();
    org.springframework.core.env.PropertySource<?> source;
    Iterator<org.springframework.core.env.PropertySource<?>> sources;

    // jpaVendorAdapter.setDatabase(Database.MYSQL);

    jpaVendorAdapter.setGenerateDdl(true);
    jpaVendorAdapter.setShowSql(true);

    Properties jpaProperties = new Properties();

    sources = env.getPropertySources().iterator();
    while (sources.hasNext()) {
        source = sources.next();
        if (source.getSource() instanceof Map) {
            for (Map.Entry<String, String> property : ((Map<String, String>) source
                    .getSource()).entrySet()) {
                jpaProperties.put(property.getKey(), property.getValue());
            }
        }
    }

    em.setJpaProperties(jpaProperties);

    em.setDataSource(dataSource);
    em.setPersistenceUnitName("blissdoc-unit");
    em.setPackagesToScan("de.devbliss.doc.model");
    em.setJpaDialect(jpaDialect);
    em.setJpaVendorAdapter(jpaVendorAdapter);

    return em;
}

// @Bean
// @Inject
// public JpaTransactionManager jpaTransactionManager(
// EntityManagerFactory entityManagerFactory) {
// JpaTransactionManager tm = new JpaTransactionManager(
// entityManagerFactory);
// return tm;
// }

@Bean
@Inject
public JpaRepositoryFactory jpaRepositoryFactory(
        EntityManagerFactory entityManagerFactory) {
    JpaRepositoryFactory factory = new JpaRepositoryFactory(
            entityManagerFactory.createEntityManager());
    return factory;
}

@Bean
@Inject
public UserRepository userRepository(
        JpaRepositoryFactory jpaRepositoryFactory) {
    return jpaRepositoryFactory.getRepository(UserRepository.class);
}

@Bean
@Inject
public ProjectRepository projectRepository(
        JpaRepositoryFactory jpaRepositoryFactory) {
    return jpaRepositoryFactory.getRepository(ProjectRepository.class);
}
} 
```

--- 更新 PersistenceJPAConfig（以前的 EntityManagerConfig）：

```
@Configuration
@EnableTransactionManagement
@PropertySource("classpath:/db.properties")
public class PersistenceJPAConfig {

@Inject
private Environment env;

@Bean
public LocalContainerEntityManagerFactoryBean entityManagerFactoryBean() {
    LocalContainerEntityManagerFactoryBean factoryBean = new LocalContainerEntityManagerFactoryBean();
    factoryBean.setDataSource(dataSource());
    factoryBean.setPackagesToScan(new String[] { "de.devbliss.doc" });
    JpaVendorAdapter vendorAdapter = new HibernateJpaVendorAdapter() {
        {
            // JPA properties
        }
    };
    factoryBean.setJpaVendorAdapter(vendorAdapter);

    return factoryBean;
}

@Bean
public DataSource dataSource() {
    DriverManagerDataSource dataSource = new DriverManagerDataSource();
    dataSource.setUrl(env.getProperty("url", "localhost"));
    dataSource.setUsername(env.getProperty("user", "blissdoc"));
    dataSource.setPassword(env.getProperty("password", "s3cret"));
    return dataSource;
}

@Bean
public PlatformTransactionManager transactionManager() {
    JpaTransactionManager transactionManager = new JpaTransactionManager();
    transactionManager.setEntityManagerFactory(entityManagerFactoryBean()
            .getObject());

    return transactionManager;
}

@Bean
public PersistenceExceptionTranslationPostProcessor exceptionTranslation() {
    return new PersistenceExceptionTranslationPostProcessor();
}
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-19T10:13:42.440

`@Configuration`- 自定义 XML 元素的特定对应物，例如`<tx:annotation-driven>`注释`@Enable...`。

为了启用对您的支持，`@Transactional`您需要使用以下内容注释您的`@Configuration`类`@EnableTransactionManagement`：

```
@Configuration 
@PropertySource("classpath:/db.properties") 
@EnableTransactionManagement
public class EntityManagerConfig { ... } 
```

**也可以看看：**

*   [`@EnableTransactionManagement`](http://static.springsource.org/spring/docs/3.1.x/javadoc-api/org/springframework/transaction/annotation/EnableTransactionManagement.html)
*   [Spring 3.1 M2：配置增强](http://blog.springsource.org/2011/06/10/spring-3-1-m2-configuration-enhancements/)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-05T11:30:37.030

您是否尝试过从 扩展`TransactionManagementConfigurer`？

```
@Configuration
@EnableTransactionManagement
@PropertySource("classpath:/db.properties")
public class EntityManagerConfig implements TransactionManagementConfigurer {

    ...

    @Override
    public PlatformTransactionManager annotationDrivenTransactionManager() {
        return transactionManager();
    }

    @Bean
    public PlatformTransactionManager transactionManager() {
        JpaTransactionManager transactionManager = new JpaTransactionManager(entityManagerFactory());
        transactionManager.setDataSource(dataSource);
        transactionManager.setJpaDialect(new HibernateJpaDialect());
        return transactionManager;
    }

    ...
} 
```

似乎您正在使用 Spring Data JPA，所以我建议您也使用它`@EnableJpaRepositories("com.your.repositories.package")`来自动配置您的 Spring Data Repositories。

希望这可以帮助 ：）

# ruby-on-rails - 如何访问 RoR 中嵌套资源中的控制器

> ID：12971016
> 
> 赞同：0
> 
> 时间：2012-10-19T09:13:45.517
> 
> 标签：ruby-on-rails, ruby-on-rails-3.2

在 routes.rb 中定义资源嵌套后，如何访问子资源的操作？例如以下不起作用：

```
form_for :comments , url=>{:controller=>"comments" , :action "create"} 
```

而“评论”嵌套在另一个“帖子”资源中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T09:34:46.937

您还可以将资源嵌套在表单中，如下所示：

创建：

```
form_for [@post, Comment.new] do... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-03T02:45:07.980

如果你有，

```
resources :posts do
  resources :comments
end 
```

# 然后，您可以在表单中进行以下操作

form_for(@comments, :url => post_comments_path(@document))

# php - php mysql错误，未上传数据

> ID：12971017
> 
> 赞同：0
> 
> 时间：2012-10-19T09:13:46.943
> 
> 标签：php, mysql

我有这个 php 代码，没有抛出错误，但是数据没有插入到表中，也没有创建表，你能告诉我哪里出错了吗？

提前干杯:)

DB_Functions.php

```
private $db;

     // constructor
     function __construct() {
         require_once 'DB_Connect.php';
         // connecting to database
         $this->db = new DB_Connect();
         $this->db->connect();
     }

// destructor
function __destruct() {

}

 public function storeUnit($email, $units, $maint, $attent, $done) {
    $con = mysql_connect(DB_HOST, DB_USER, DB_PASSWORD) or die (mysql_error());
    mysql_select_db(DB_DATABASE, $con);

        $format = 'Y-m-d G:i:s';
        $date = date($format);
        $result = mysql_query("CREATE TABLE IF NOT EXISTS $email( Units VARCHAR(10), Finish VARCHAR(20), Attent VARCHAR(200), Maint VARCHAR(200), created_at VARCHAR(30))",$con);
        $result = mysql_query("INSERT INTO '$email'(Units, Finish, Attent, Maint, created_at) VALUES('$units', '$done', '$attent', '$maint', '$date')");
        return true;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-19T09:33:27.907

这是我的第一篇文章，但我认为您的应用程序的代码架构或 OOP 设计不佳，但问题是您使用错误的引号来创建表和插入行。您需要使用这些符号来引用名称“`”，例如：

```
CREATE TABLE `table name` ....
INSERT INTO `table name` .... 
```

所以我认为你必须考虑代码的安全性，使用 mysql_real_escape_string

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-19T09:20:52.677

尝试使用 ` 而不是 ' 作为表名

```
$result = mysql_query("INSERT INTO `$email`(Units, Finish, Attent, Maint, created_at) VALUES('$units', '$done', '$attent', '$maint', '$date')"); 
```

编辑：尝试查看您的数据库是否使用 InnoDB，您可以使用事务模式...所以如果禁用自动提交，您必须提交更改

# c# - 如何在拆分字符串之前检查空值

> ID：12971024
> 
> 赞同：-2
> 
> 时间：2012-10-19T09:14:14.273
> 
> 标签：c#, string, split

我是 C# 编程的新手。有人可以帮我找出如何在拆分字符串之前检查字符串是否为空。我使用了下面的方法，但是如果字符串为空，它会引发空引用错误。

```
string[] splittedString=orgString.Split(','); 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-19T09:14:54.223

```
string cleanedString = orgString ?? "";
string[] splittedString = cleanedString.Split(','); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-19T09:17:53.367

我建议使用[String.IsNullOrWhiteSpace](http://msdn.microsoft.com/en-us/library/system.string.isnullorwhitespace.aspx)，因为这不仅会检查字符串是否为空，还会确保它不为空。

```
string orgString = null;

if (!String.IsNullOrWhiteSpace(orgString))
{
    string[] splittedString = orgString.Split(',');
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-19T09:17:23.760

```
String.IsNullOrEmpty(string) 
```

或只是为空

```
if (string == null) 
```

# ruby - Ruby 零条件赋值

> ID：12971028
> 
> 赞同：0
> 
> 时间：2012-10-19T09:14:26.460
> 
> 标签：ruby

对您来说很简单：PHP 中的 Ruby 等价物是什么？

```
return $x == 0 ? 1 : $x; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T09:21:10.380

如果你知道那`$x`是 a `Numeric`，那么：

```
$x.zero? ? 1 : $x 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T09:16:29.487

一样的

```
 x == 0 ? 1 : x 
```

快捷方式在`||=`这里不适用，因为 0 不是“假”值，它是`true`.

# android - 无法显示 url 图片（位图）

> ID：12971032
> 
> 赞同：1
> 
> 时间：2012-10-19T09:14:35.673
> 
> 标签：android, image, bitmap

我正在尝试显示我的图像，但它没有显示：

```
public Bitmap getUserPic(String picID) {
    String imageURL;
    Bitmap bitmap = null;
    Log.d("BITMAP", "Loading Picture");
    imageURL = picID;
    Log.d("image url", picID);
    try {
        bitmap = BitmapFactory.decodeStream((InputStream)new URL(imageURL).getContent());
    } catch (Exception e) {
        Log.d("BITMAP", "Loading Picture FAILED");
        e.printStackTrace();
    }
    return bitmap;
} 
```

Logcat 输出：（如何更整洁地显示我的 logcat 输出？）

```
10-19 17:01:50.835: D/image url(8636): http://sphotos-c.ak.fbcdn.net/hphotos-ak-prn1/c0.0.403.403/p403x403/554229_4774210003216_2100715293_n.jpg
10-19 17:01:50.840: D/BITMAP(8636): Loading Picture FAILED 10-19
17:01:50.840: W/System.err(8636): android.os.NetworkOnMainThreadException 10-19 17:01:50.840: W/System.err(8636): at android.os.StrictMode$AndroidBlockGuardPolicy.onNetwork(StrictMode.java:1099)
10-19 17:01:50.840: W/System.err(8636): at java.net.InetAddress.lookupHostByName(InetAddress.java:391) 10-19
17:01:50.840: W/System.err(8636): at java.net.InetAddress.getAllByNameImpl(InetAddress.java:242) 10-19
17:01:50.840: W/System.err(8636): at java.net.InetAddress.getAllByName(InetAddress.java:220) 10-19
17:01:50.840: W/System.err(8636): at libcore.net.http.HttpConnection.<init>(HttpConnection.java:71) 10-19
17:01:50.840: W/System.err(8636): at libcore.net.http.HttpConnection.<init>(HttpConnection.java:50) 10-19
17:01:50.840: W/System.err(8636): at libcore.net.http.HttpConnection$Address.connect(HttpConnection.java:351)
10-19 17:01:50.840: W/System.err(8636):     at
libcore.net.http.HttpConnectionPool.get(HttpConnectionPool.java:86)
10-19 17:01:50.840: W/System.err(8636):     at
libcore.net.http.HttpConnection.connect(HttpConnection.java:128) 10-19
17:01:50.840: W/System.err(8636):   at
libcore.net.http.HttpEngine.openSocketConnection(HttpEngine.java:308)
10-19 17:01:50.840: W/System.err(8636):     at
libcore.net.http.HttpEngine.connect(HttpEngine.java:303) 10-19
17:01:50.840: W/System.err(8636):   at
libcore.net.http.HttpEngine.sendSocketRequest(HttpEngine.java:282)
10-19 17:01:50.840: W/System.err(8636):     at
libcore.net.http.HttpEngine.sendRequest(HttpEngine.java:232) 10-19
17:01:50.840: W/System.err(8636):   at
libcore.net.http.HttpURLConnectionImpl.connect(HttpURLConnectionImpl.java:80)
10-19 17:01:50.840: W/System.err(8636):     at
java.net.URLConnection.getContent(URLConnection.java:194) 10-19
17:01:50.840: W/System.err(8636):   at
java.net.URL.getContent(URL.java:447) 10-19 
17:01:50.840: W/System.err(8636): at jp.gr.java_conf.akabeko.testimagegallery.MainActivity.getUserPic(MainActivity.java:275)
10-19 17:01:50.845: W/System.err(8636): at jp.gr.java_conf.akabeko.testimagegallery.MainActivity$fetchArticles.onPostExecute(MainActivity.java:251)
10-19 17:01:50.845: W/System.err(8636): at jp.gr.java_conf.akabeko.testimagegallery.MainActivity$fetchArticles.onPostExecute(MainActivity.java:1)
10-19 17:01:50.845: W/System.err(8636): at android.os.AsyncTask.finish(AsyncTask.java:602) 10-19 17:01:50.845:
W/System.err(8636): at android.os.AsyncTask.access$600(AsyncTask.java:156) 10-19
17:01:50.845: W/System.err(8636): at android.os.AsyncTask$InternalHandler.handleMessage(AsyncTask.java:615)
10-19 17:01:50.845: W/System.err(8636): at android.os.Handler.dispatchMessage(Handler.java:99) 10-19
17:01:50.845: W/System.err(8636): at android.os.Looper.loop(Looper.java:137) 10-19 
17:01:50.845: W/System.err(8636): at android.app.ActivityThread.main(ActivityThread.java:4517) 10-19
17:01:50.845: W/System.err(8636): at java.lang.reflect.Method.invokeNative(Native Method) 10-19
17:01:50.845: W/System.err(8636): at java.lang.reflect.Method.invoke(Method.java:511) 10-19 
17:01:50.845: W/System.err(8636): at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:995)
10-19 17:01:50.845: W/System.err(8636): at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:762) 10-19
17:01:50.845: W/System.err(8636): at dalvik.system.NativeStart.main(Native Method) 10-19 17:01:50.915: D/CLIPBOARD(8636): Hide Clipboard dialog at Starting input: finished by someone else... ! 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T09:20:12.213

当应用程序尝试在其主线程上执行网络操作时会引发异常。仅针对面向 Honeycomb SDK 或更高版本的应用程序会引发此异常。允许以早期 SDK 版本为目标的应用程序在其主事件循环线程上进行网络连接，但非常不鼓励这样做。

> 使用 AsyncTask 在单独的线程上获取图像，然后将其分配给在 onPostExecute 和 Voila 上显示！它应该工作。

请参阅此异步任务：[http ://android-developers.blogspot.in/2009/05/painless-threading.html](http://android-developers.blogspot.in/2009/05/painless-threading.html)

***有一个肮脏的修复，但我建议永远不要使用它***

```
 StrictMode.ThreadPolicy policy = new StrictMode.ThreadPolicy.Builder().permitAll().build();

StrictMode.setThreadPolicy(policy); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-28T05:57:45.340

试试这个：

```
AQuery aq = new AQuery(getActivity());
        aq.id(view.findViewById(R.id.image)).image(imageUrl, true, true, 0,  0,
                new BitmapAjaxCallback() {
                    @Override
                    public void callback(String url, ImageView iv, Bitmap bm, AjaxStatus status){
                        iv.setImageBitmap(bm);
                    }
                }.header("User-Agent", "android")); 
```

# c++ - 在类中使用返回值

> ID：12971039
> 
> 赞同：-3
> 
> 时间：2012-10-19T09:14:57.817
> 
> 标签：c++, class

头文件

```
#ifndef deneme_h
#define deneme_h

#include <vector>
#include <string>
#include <iostream>
#include <algorithm>

using namespace std ;
class A
{
public:
Course ( int code ) ;
int getACode () ;

 private:

    int code   ;

};

class B
{

  public:
    B ( A * a  = NULL) ;
        A     * getA     () ;

 private:

    A     * a   ;
  friend ostream & operator<< ( ostream & out , B & b ) ;
};

#endif 
```

A.cpp

```
#include "deneme.h"
using namespace std ;

A :: A ( int code )
{
    this -> code = code;
} 

int A :: getACode()
{
    return this -> code;
} 
```

B.cpp

```
#include "deneme.h"

using namespace std ;

B::B ( A     * a ) 
    {
        this -> a = new A(223);
        this -> a = a;

    }
A * A::getA     ()  {   return this -> a;}

ostream & operator<< ( ostream & out , B & b ) { out << b.course->getACode();} 
```

和 main.cpp

```
#include "deneme.h"
using namespace std;

int main(){

Course* c1 = new Course(223) ;

Offering* o1_1 = new  Offering(c1);

cout<< *o1_1;

return 0;
} 
```

大家好

我想问一下这段代码。上面的代码工作正常，它打印 223。但是当我更改 B.cpp 中的运算符重载部分时

```
 ostream & operator<< ( ostream & out , Offering & offering ) { out << offering.(getCourse() )->getCourseCode();} 
```

我得到一个错误。为什么会报错？我不能使用返回值。感谢您的回答。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T09:22:36.323

如前所述，您需要返回，我认为您想要的行是：

```
ostream & operator<< ( ostream & out , Offering & offering ) { out << ( offering.getCourse() )->getCourseCode(); return out; } 
```

（我移动了一个括号）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-19T09:26:01.447

删除 getCourse() 周围的括号

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-19T09:22:55.480

与 iostream 一起使用时：

`operator<<`应该通过 const 引用（或值，如果那是微不足道的）来获取它的第二个参数。

它应该返回它的第一个参数。

所以

```
ostream & operator<< ( ostream & out , const B & b ) 
{ 
     return out << b.course->getACode();
} 

ostream & operator<< ( ostream & out , const Offering & offering ) 
{ 
    return out << offering.getCourse()->getCourseCode();
} 
```

在这两种情况下，您也可以`return out`在另一个语句之后放置一个单独的语句。

另请注意，在 C++ 中，您不必使用 new 创建所有对象。

# iphone - 如何获取已为 UIButton 设置的图像

> ID：12971040
> 
> 赞同：1
> 
> 时间：2012-10-19T09:14:59.393
> 
> 标签：iphone, objective-c, ios, xcode, uibutton

在我的应用程序中，我有一个上下文，我正在使用 NSTimer 更改 UIButton 的图像，如下所示

```
 [NSTimer scheduledTimerWithTimeInterval:5.0 target:self selector:@selector(LoadImageToTheAdButton) userInfo:nil repeats:YES];

-(void)LoadImageToTheAdButton
{
     NSString *strPath = [arrPaths objectAtIndex:0];
        strPath = [strPath stringByAppendingPathComponent:@"Folder"];
        strPath = [strPath stringByAppendingPathComponent:[arrAdImgNames objectAtIndex:intAdImgIndex]];
        UIImage *imgForAdBtn = [[UIImage alloc]initWithContentsOfFile:strPath];
        [btnAd setBackgroundImage:imgForAdBtn forState:UIControlStateNormal];

        if(intAdImgIndex < [arrAdImgNames count]-1)
        {
            intAdImgIndex++;
        }
        else
        {
            intAdImgIndex = 0;
        }
} 
```

现在点击按钮**我需要知道按钮上设置了哪个图像我的意思是，我需要图像名称**

**我需要它，因为基于该图像我正在加载一些链接，**

怎么办啊，哪位大侠帮帮我，

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T09:19:26.240

您无法获取按钮上当前设置的图像名称，您只能获取引用该图像的内存地址。一个好的替代方法是使用按钮标签属性来指定包含图像名称的数组中的索引。例如：

```
myArray = [[NSArray alloc] initWithObjects:@"something.png",@"somethingElse.png",@"etc.png", nil];

- (void)myMethod:(UIButton *)sender
{
    NSString *imageNameSelected = [myArray objectAtIndex:sender.tag];
} 
```

因此，对于本示例，当您将按钮图像设置为“something.png”时，您会将按钮标签属性设置为“0”，或者将“somethingElse.png”设置为“1”等...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T10:37:02.267

在任何视图中尝试 setAccessibility* 属性。这些非常有帮助。我通过在我的应用程序中使用此属性来获取图像名称。

# java - ActiveMQ 安装错误

> ID：12971046
> 
> 赞同：0
> 
> 时间：2012-10-19T09:15:07.860
> 
> 标签：java, jms, activemq

我对 ActiveMQ 完全陌生，我正在尝试使用 Windows 7 在我的系统上安装它。

我下载了`activemq-4.0`二进制版本并尝试按照 Apache 门户上的说明进行操作。安装后，当我运行`activemq.bat`in`bin`文件夹或从 cmd 运行相同的命令时，出现以下异常：

```
java.net.SocketException:IP_ADD_MEMBERSHIP failed(out of Hardware Filters) 
```

我尝试搜索相同的错误，但我没有从解释中获得任何上下文。我不知道错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T09:20:17.657

它很可能是 JVM 首选的 IPv6 堆栈。（在 2.1 之前，我们通过设置系统属性“java.net.preferIPv4Stack”来禁用 IPv6。）尝试明确设置`-Djava.net.preferIPv4Stack=true`

[也](https://stackoverflow.com/questions/2534551/error-on-multicastsocket-joingroup)参考这个链接。

# php - Twitter 调用在 php 中失败，但在 jQuery 中成功

> ID：12971047
> 
> 赞同：0
> 
> 时间：2012-10-19T09:15:09.953
> 
> 标签：php, jquery

我创建了一个网站，在该网站上，我可以通过两种方式获得最后一条推文。一个使用 jQuery 插件，两个使用 php。

jQuery 插件是[http://tweet.seaofclouds.com/](http://tweet.seaofclouds.com/) 我面临的问题是 php 给我的错误。

如果我在没有上下文的情况下使用 file_get_contents($url) 它会给我

> 无法打开流：HTTP 请求失败！HTTP/1.0 400 错误请求

如果我使用带有“ignore_errors”=>true 上下文的 file_get_contents，它会给我

> array(2) { ["request"]=> string(61) "/1/statuses/user_timeline.json?screen_name=xxxxxx&count=1" ["error"]=> string(74) "超出速率限制。客户可能每小时发出的请求不超过 150 个。” }

奇怪的是，我问这个问题的原因是 jQuery 插件总是成功的。

如果我 console.log 来自插件的请求，与我试图通过 php 获取的 url 相同：

> [http://api.twitter.com/1/statuses/user_timeline.json?screen_name=xxxxxxxx&count=1&include_rts=1&page=1&include_entities=1](http://api.twitter.com/1/statuses/user_timeline.json?screen_name=xxxxxxxx&count=1&include_rts=1&page=1&include_entities=1)

有谁可以告诉我会发生什么？

# objective-c - MVC - 访问模型数据（目标 C）

> ID：12971048
> 
> 赞同：2
> 
> 时间：2012-10-19T09:15:13.167
> 
> 标签：objective-c, xcode

我目前正在学习Objective-C，一步一步！现在，我的主要关注点是 MVC 模式。我不确定我是否已经很好地围绕了这个概念。

所以，一些背景信息：我目前正在我的程序中试验“实体”。实体模型包含健康和速度等信息。我已经实现了一个可以利用这个实体的非常基本的控制器。输入是通过命令行界面进行的，这基本上是我的看法。

现在，我的问题是：我的实体控制器应该如何访问模型属性中的信息？我需要能够拥有实体控制器处理的“实体”数组。

在我的控制器的@interface：我已经声明：

```
NSMutableArray *entities; 
```

然后在控制器的@implementation 中，我覆盖了init 函数。在这个函数中：

```
entities = [[NSMutableArray alloc] init]; 
```

我还有另一个“生成”新实体的功能。

```
- (void)spawnEntity {

Entity *entity = [[Entity alloc] init];
[entity setName:@"Default"];
...
...
[entities addObject: entity];
} 
```

然后从 main （稍后将成为真正的视图控制器。一旦我在 iPhone 上实际设置了应用程序，因为现在我只是准备模型和一些控制器。）：

```
EntityController *entityController = [[EntityController alloc] init];

[entityController spawnEntity]; 
```

这种方法是利用 MVC 模式的正确方法吗？我主要关心的是我在控制器中声明的 NSMutableArray。我不确定我是否正确执行此操作。

任何反馈将不胜感激。

谢谢你。

-史蒂文

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T09:42:41.617

您将 MVC 设计模式的模型和控制器合并到`EntityController`. 有时，这样做可能是完美的契合，但出于某些原因，您希望它们彼此分开。拆分它们的一个原因是在添加类、方法和变量时更容易理解代码。另一个原因是代码的可重用性。

在您的示例中，这可以通过为具有`NSMutableArray`实例变量的模型对象创建一个新类来实现。然后，您的控制器可以创建该类的实例（或单例）以将新实体添加到，而不是添加到它自己的数组中。

但是，如果数组是此应用程序所需的唯一变量，那么您可以完美地坚持当前的模式。一个`NSArray`（或其子类）本身就是一个模型对象，因此没有必要将它包装在另一个类中。

有关详细信息，请参阅[Apple 文档](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/CocoaFundamentals/CocoaDesignPatterns/CocoaDesignPatterns.html#//apple_ref/doc/uid/TP40002974-CH6-SW1 "苹果文档")。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T09:35:11.947

MVC 是一种提供关注点分离的模式。“模型”和“视图”是相关对象的集合/分组。每个对象都有完整的功能，应该符合OO原则。

模型对象将与您的业务概念相关，例如用户、帐户、地址等类型。

View 对象通常是 Button、Textarea 等类型。

控制器提供了一个接口，用于调用模型对象之间的交互，这是您的业务逻辑。

传统上，视图对象可以直接与模型对象通信以收集显示信息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-04T08:56:50.683

我已经在 iOS 应用程序中实现了数据访问层的存储库模式，这可以与 CoreData 实体框架或 REST API 一起使用。请查看[https://github.com/ducngo-tpl/Repository-Pattern-in-Objective-C](https://github.com/ducngo-tpl/Repository-Pattern-in-Objective-C)。希望它有所帮助。

# extjs - 存储加载后如何获取子节点

> ID：12971051
> 
> 赞同：0
> 
> 时间：2012-10-19T09:15:21.930
> 
> 标签：extjs, tree, load, store, extjs4.1

版本：ExtJs 4.1

要更改子项，我使用此功能：

**树存储**(Ext.data.TreeStore)

```
storeId  : 'treeStore',
...
constructor: function( oConfig ) {
...
this.on( 'expand', function( oObj ) {           
        oObj.eachChild(function(oNode) {
           switch(oNode.data.type) {
              case "report":
                 oNode.set('icon', strIconReport);
              break;
              case "view":
                 oNode.set('icon', strIconView);
              break;
           }
        });
     }); 
```

**重新加载**

在树中删除或添加项目后，我在其他地方重新加载树：

```
var oStore = Ext.getStore('treeStore');
oStore.load({
        node     : oNode,
        params   : { 
           newpath     : oNode.data.path, 
           overwrite   : true
        }
     }); 
```

虽然是同一个 store ，但是加载并展开到正确的路径后，由于没有调用函数`treeStore`，所以图标没有变化。`.on( 'expand')`为什么？

**问题**

如何在这个新加载的商店扩展到节点路径之前更改它的图标？

**我试过的**

在打电话之前，`.load()`我尝试编辑孩子，`oNode.eachChild(function(oChild) {}`但没有成功。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T10:57:23.840

我想出了解决方案，这真的很容易。我不再改变 on `expand`，而是 on `load`。

因此，它会像这样在扩展和加载时更改图标：

```
this.on( 'load', function( oStore, oNode, oNodes ) { 
  // do something with the nodes 
} 
```

# c++ - 检查安装的网络打印机是否在线

> ID：12971053
> 
> 赞同：6
> 
> 时间：2012-10-19T09:15:50.510
> 
> 标签：c++, network-printers

我想检查打印机是否在线。为此，我使用 OpenPrinter 获取打印机句柄。然后我想在 PRINTER_INFO_6 中使用 PRINTER_STATUS_OFFLINE 和 GetPrinter()。结果总是0？

如何获取打印机的离线状态？

我使用的代码。

```
bool IsPrinterOnline(wstring strPrinterFriendlyName)
{
  HANDLE hPrinter ;
  if ( OpenPrinter(const_cast<LPWSTR>(strPrinterFriendlyName.c_str()), &hPrinter, NULL) == 0 )
  {    
    /*OpenPrinter call failed*/
    return false;
  }

  DWORD dwBufsize = 0;
  PRINTER_INFO_6* pinfo = 0;
  GetPrinter(hPrinter, 6,(LPBYTE)pinfo, dwBufsize, &dwBufsize); //Get dwBufsize

  PRINTER_INFO_6* pinfo6 = (PRINTER_INFO_6*)malloc(dwBufsize); //Allocate with dwBufsize
  GetPrinter(hPrinter, 6,(LPBYTE)pinfo6, dwBufsize, &dwBufsize);

  DWORD dwStatus = pinfo6->dwStatus; //always returns 0

  if (dwStatus == PRINTER_STATUS_OFFLINE)
  {
    free(pinfo6); 
    ClosePrinter( hPrinter );
    return false;
  }

  free(pinfo6); 
  ClosePrinter( hPrinter );
  return true;
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-22T06:13:19.287

我修好了它。我使用了“pinfo2->属性和 PRINTER_ATTRIBUTE_WORK_OFFLINE”。

这是代码。

```
bool IsPrinterOnline(wstring strPrinterFriendlyName)
{
  HANDLE hPrinter ;
  if ( OpenPrinter(const_cast<LPWSTR>(strPrinterFriendlyName.c_str()), &hPrinter, NULL) == 0 )
  {    
    /*OpenPrinter call failed*/
    return false;
  }

  DWORD dwBufsize = 0;
  PRINTER_INFO_2* pinfo = 0;
  int nRet = 0;
  nRet = GetPrinter(hPrinter, 2,(LPBYTE)pinfo, dwBufsize, &dwBufsize); //Get dwBufsize
  DWORD dwGetPrinter = 0;
  if (nRet == 0)
  {
    dwGetPrinter = GetLastError(); 
  }

  PRINTER_INFO_2* pinfo2 = (PRINTER_INFO_2*)malloc(dwBufsize); //Allocate with dwBufsize
  nRet = GetPrinter(hPrinter, 2,reinterpret_cast<LPBYTE>(pinfo2), dwBufsize, &dwBufsize);
  if (nRet == 0)
  {
    dwGetPrinter = GetLastError(); 
    return false;
  }

  if (pinfo2->Attributes & PRINTER_ATTRIBUTE_WORK_OFFLINE )
  {
    free(pinfo2); 
    ClosePrinter( hPrinter );
    return false;
  }

  free(pinfo2); 
  ClosePrinter( hPrinter );
  return true;
} 
```

# c# - 从 foreach 中的列表中获取项目

> ID：12971054
> 
> 赞同：0
> 
> 时间：2012-10-19T09:15:53.260
> 
> 标签：c#, xml, winforms, list, datagridview

我有一门课，我正在尝试将 datgaridview 填充为通用列表。我遇到了一个问题，`dapuConfigs.CoveredLanes`其中是一个列表，我试图访问该列表并将其填充到我无法成功的 datagridview 中。可能这两种方法都是错误的......！请帮我？？

当我运行时，我得到一个文本出现在网格单元格中：system colelction generic list。

添加代码：

```
 .ForEach(
              Configs =>
                  {  
                      { 
                          datagridview1.Rows.Add(
                              new object[]
                                  {
                                      Configs.Id,
                                      Configs.Description,
                                      Configs.Covered.ElementAtOrDefault(0).Id == null ? "" : Configs.Covered.ElementAtOrDefault(0).Id.ToString(),
                                      Configs.Covered.ElementAtOrDefault(1).Id == null ? "" : Configs.Covered.ElementAtOrDefault(1).Id.ToString(),
                                      Configs.Covered.ElementAtOrDefault(2).Id == null ? "" : Configs.Covered.ElementAtOrDefault(2).Id.ToString(),
                                      Configs.Covered.ElementAtOrDefault(3).Id == null ? "" : Configs.Covered.ElementAtOrDefault(3).Id.ToString(), 
```

}); } });

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T09:47:30.687

所以，你在哪里

```
dapuConfigs.CoveredLanes.ToList(), 
```

在您的第一个示例中，尝试更改为：

```
dapuConfigs.CoveredLanes.ElementAtOrDefault(0) == null ? "" : dapuConfigs.CoveredLanes.ElementAt(0).ToString(),
dapuConfigs.CoveredLanes.ElementAtOrDefault(1) == null ? "" : dapuConfigs.CoveredLanes.ElementAt(1).ToString(),
dapuConfigs.CoveredLanes.ElementAtOrDefault(2) == null ? "" : dapuConfigs.CoveredLanes.ElementAt(2).ToString(),
dapuConfigs.CoveredLanes.ElementAtOrDefault(3) == null ? "" : dapuConfigs.CoveredLanes.ElementAt(3).ToString(), 
```

或者，用于匹配 Id

```
dapuConfigs.CoveredLanes.First(cl=>cl.Id=="").ToString(),
dapuConfigs.CoveredLanes.First(cl=>cl.Id=="").ToString(),
dapuConfigs.CoveredLanes.First(cl=>cl.Id=="").ToString(),
dapuConfigs.CoveredLanes.First(cl=>cl.Id=="").ToString(), 
```

或更一般的 id 匹配...

```
dapuConfigs.CoveredLanes.First(cl=>cl.Id.Contains("")).ToString(),
dapuConfigs.CoveredLanes.First(cl=>cl.Id.Contains("")).ToString(),
dapuConfigs.CoveredLanes.First(cl=>cl.Id.Contains("")).ToString(),
dapuConfigs.CoveredLanes.First(cl=>cl.Id.Contains("")).ToString(), 
```

并添加检查不匹配...

```
dapuConfigs.CoveredLanes.Any(cl=>cl.Id.Contains("")) ? dapuConfigs.CoveredLanes.First (cl=>cl.Id.Contains("")).ToString() : "",
dapuConfigs.CoveredLanes.Any(cl=>cl.Id.Contains("")) ? dapuConfigs.CoveredLanes.First(cl=>cl.Id.Contains("")).ToString() : "",
dapuConfigs.CoveredLanes.Any(cl=>cl.Id.Contains("")) ? dapuConfigs.CoveredLanes.First(cl=>cl.Id.Contains("")).ToString() : "",
dapuConfigs.CoveredLanes.Any(cl=>cl.Id.Contains("")) ? dapuConfigs.CoveredLanes.First(cl=>cl.Id.Contains("")).ToString() : "", 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-19T09:27:08.590

您必须汇总其中的值`dapuConfigs.CoveredLanes`才能显示在该字段中。例如，如果其中有字符串值，您可以这样做：

```
string.Join(",", dapuConfigs.CoveredLanes.ToArray()) 
```

生成一个逗号分隔的列表。

或者要显示前 4 个项目，您可以像这样创建对象：

```
new object[]
{
dapuConfigs.Id,         //col0
dapuConfigs.Description, //col1
dapuConfigs.CoveredLanes.ElementAt(0), //col2
dapuConfigs.CoveredLanes.ElementAt(1),//col3
dapuConfigs.CoveredLanes.ElementAt(2), //col4
dapuConfigs.CoveredLanes.ElementAt(3),//col5
dapuConfigs.Position.Value, //col6
dapuConfigs.Position.Value,//col7
} 
```

将格式化代码抽象为某种格式化程序对象是明智的。

解决此问题的一种更独立的方法是连接到 CellFormatting 事件并更改单元格格式化其数据的方式。这样，您的表示逻辑就不会像我发布的代码片段那样渗入模型。 [http://msdn.microsoft.com/en-us/library/2249cf0a.aspx](http://msdn.microsoft.com/en-us/library/2249cf0a.aspx)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-19T10:40:35.073

你可以这样做

```
private void BindGrid()
{
    List<string> lst = new List<string>();
    lst.Add("A");
    lst.Add("D1");
    lst.Add("A2");
    lst.Add("A3");

    List<Test> tst = new List<Test>();
    Test t = new Test();
    t.ListValue = lst;
    t.ID = 1;
    tst.Add(t);

    lst = new MyList();
    lst.Add("B");
    lst.Add("B1");
    lst.Add("A2");
    lst.Add("B3");

    t = new Test();
    t.ListValue = lst;
    t.ID = 2;
    tst.Add(t);

    lst = new MyList();
    lst.Add("C");
    lst.Add("B1");
    lst.Add("C2");
    lst.Add("C3");

    t = new Test();
    t.ListValue = lst;
    t.ID = 3;
    tst.Add(t);
    ArrayList a = new ArrayList();
    try
    {
        var lst2 = (from b in tst
                    select new
                    {
                        b.ID,
                        col2 = string.Join(Environment.NewLine, b.ListValue.Where(x => x.StartsWith("A")).ToArray()),
                        col3 = string.Join(Environment.NewLine, b.ListValue.Where(x => x.StartsWith("B")).ToArray()),
                        col4 = string.Join(Environment.NewLine, b.ListValue.Where(x => x.StartsWith("C")).ToArray())
                    }).ToList();

        GridView1.DataSource = lst2;
        GridView1.DataBind();
    }
    catch (Exception ex)
    {
        string ss = ex.Message;
    }

}

public class Test
{
public int ID { get; set; }
public List<string> ListValue { get; set; }
} 
```

# vb.net - Windows Forms Datagridview（使用鼠标指针选择单元格中的部分文本但不允许编辑）VB.NET

> ID：12971057
> 
> 赞同：0
> 
> 时间：2012-10-19T09:16:01.540
> 
> 标签：vb.net, visual-studio-2010, windows-forms-designer

嘿伙计们，我的表单上有一个 gridview，readonly = false 和 enabled = true，所以我可以在 datagridview 的单元格中选择部分文本。这工作正常，但是当我有这样的设置时，它也可以编辑文本，这就是我不想要的部分。

所以我正在寻找一种解决方案，能够在 datagridview 的单元格中选择部分文本，但不允许用户编辑其中的值。

Tanx 的优势

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T09:18:42.120

```
dataGridView1.ReadOnly = false and dataGridView1.enabled = true

Private Sub dataGridView1_EditingControlShowing(sender As Object, e As DataGridViewEditingControlShowingEventArgs)
 If TypeOf e.Control Is TextBox Then
' Set the TextBoxCell to readonly
Dim textBoxCell As TextBox = DirectCast(e.Control, TextBox)
textBoxCell.[ReadOnly] = True
 End If
End Sub 
```

# boost - 串口上的 OpenSSL

> ID：12971060
> 
> 赞同：1
> 
> 时间：2012-10-19T09:16:07.893
> 
> 标签：boost, ssl, serial-port

是否可以通过串行端口使用 OpenSSL？

我有两个通过串行端口连接的嵌入式设备。如何使用 openSSL 保护通信？我听说过 boost 库，但我没有找到任何相同的示例代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T13:35:19.637

听起来您主要是在验证设备之后，而不是保护连接本身。SSL/TLS 主要用于保护连接，您可能不需要通过串行电缆。

您可以做的是使用证书（如果您可以手动建立信任，甚至可以使用普通的非对称密钥）。

当一个设备向另一个设备发送随机质询时，您可以设计一个系统，期望得到一个签名的响应作为回报（以及签名设备的公钥/证书）。验证签名和证书应该验证远程设备。

您可以使用 OpenSSL 执行此操作，但这与 SSL/TLS 无关。（OpenSSL 是一个比 SSL 做得更多的库。）

# c++ - boost_regex库的静态链接

> ID：12971061
> 
> 赞同：1
> 
> 时间：2012-10-19T09:16:10.807
> 
> 标签：c++, boost, static-linking, boost-regex

我在 CentOS 5.2 环境中使用 boost_regex 库（版本 1.33.1）编写了一个程序。我用 yum 命令安装了 Boost 库。

我的程序接受使用以下这组选项进行编译：

> g++ -O2 -g -lm -lboost_regex main.cpp

但是，这组选项出错了：

> g++ -static -O2 -g -lm -lboost_regex main.cpp

错误代码如下：

```
/tmp/ccZ2Yn5g.o: In function `boost::basic_regex<char, boost::regex_traits<char, boost::cpp_regex_traits<char> > >::assign(char const*, char const*, unsigned int)':
/usr/include/boost/regex/v4/basic_regex.hpp:254: undefined reference to `boost::basic_regex<char, boost::regex_traits<char, boost::cpp_regex_traits<char> > >::do_assign(char const*, char const*, unsigned int)'
/usr/include/boost/regex/v4/basic_regex.hpp:254: undefined reference to `boost::basic_regex<char, boost::regex_traits<char, boost::cpp_regex_traits<char> > >::do_assign(char const*, char const*, unsigned int)'
/usr/include/boost/regex/v4/basic_regex.hpp:254: undefined reference to `boost::basic_regex<char, boost::regex_traits<char, boost::cpp_regex_traits<char> > >::do_assign(char const*, char const*, unsigned int)'
/usr/include/boost/regex/v4/basic_regex.hpp:254: undefined reference to `boost::basic_regex<char, boost::regex_traits<char, boost::cpp_regex_traits<char> > >::do_assign(char const*, char const*, unsigned int)'
/usr/include/boost/regex/v4/basic_regex.hpp:254: undefined reference to `boost::basic_regex<char, boost::regex_traits<char, boost::cpp_regex_traits<char> > >::do_assign(char const*, char const*, unsigned int)'
/tmp/ccZ2Yn5g.o:/usr/include/boost/regex/v4/basic_regex.hpp:254: more undefined references to `boost::basic_regex<char, boost::regex_traits<char, boost::cpp_regex_traits<char> > >::do_assign(char const*, char const*, unsigned int)' follow
/tmp/ccZ2Yn5g.o: In function `perl_matcher':
/usr/include/boost/regex/v4/perl_matcher_common.hpp:44: undefined reference to `boost::re_detail::perl_matcher<__gnu_cxx::__normal_iterator<char const*, std::basic_string<char, std::char_traits<char>, std::allocator<char> > >, std::allocator<boost::sub_match<__gnu_cxx::__normal_iterator<char const*, std::basic_string<char, std::char_traits<char>, std::allocator<char> > > > >, boost::regex_traits<char, boost::cpp_regex_traits<char> > >::construct_init(boost::basic_regex<char, boost::regex_traits<char, boost::cpp_regex_traits<char> > > const&, boost::regex_constants::_match_flags)'
/tmp/ccZ2Yn5g.o: In function `bool boost::regex_match<__gnu_cxx::__normal_iterator<char const*, std::basic_string<char, std::char_traits<char>, std::allocator<char> > >, std::allocator<boost::sub_match<__gnu_cxx::__normal_iterator<char const*, std::basic_string<char, std::char_traits<char>, std::allocator<char> > > > >, char, boost::regex_traits<char, boost::cpp_regex_traits<char> > >(__gnu_cxx::__normal_iterator<char const*, std::basic_string<char, std::char_traits<char>, std::allocator<char> > >, __gnu_cxx::__normal_iterator<char const*, std::basic_string<char, std::char_traits<char>, std::allocator<char> > >, boost::match_results<__gnu_cxx::__normal_iterator<char const*, std::basic_string<char, std::char_traits<char>, std::allocator<char> > >, std::allocator<boost::sub_match<__gnu_cxx::__normal_iterator<char const*, std::basic_string<char, std::char_traits<char>, std::allocator<char> > > > > >&, boost::basic_regex<char, boost::regex_traits<char, boost::cpp_regex_traits<char> > > const&, boost::regex_constants::_match_flags)':
/usr/include/boost/regex/v4/regex_match.hpp:43: undefined reference to `boost::re_detail::perl_matcher<__gnu_cxx::__normal_iterator<char const*, std::basic_string<char, std::char_traits<char>, std::allocator<char> > >, std::allocator<boost::sub_match<__gnu_cxx::__normal_iterator<char const*, std::basic_string<char, std::char_traits<char>, std::allocator<char> > > > >, boost::regex_traits<char, boost::cpp_regex_traits<char> > >::match()'
collect2: ld returned 1 exit status 
```

编辑：删除 -g 选项没有帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T23:23:23.503

hmjd 的回答是正确的。

实际上，与此同时，我从一个日本网站获得了我的解决方案。

根据答案，正确的命令如下：

```
g++ -static -O2 main.cpp -lm -lboost_regex -lpthread 
```

这就是hmjd所说的。

# winapi - 自定义绘制 CProgressBarCtrl win32

> ID：12971062
> 
> 赞同：1
> 
> 时间：2012-10-19T09:16:14.160
> 
> 标签：winapi, mfc, atl, wtl

我想要一个自定义进度条控件，例如显示一些移动的斜线或像[这样](http://learnjavafx.typepad.com/photos/uncategorized/2008/07/30/burning_2.png)或在进度条控件内绘制图像。我已经在网上搜索了一些关于列表视图和动态子类的自定义绘图示例，但代码没有调用绘图方法：

```
public:
     BOOL SubclassWindow(HWND hWnd)
      {
          ATLASSERT(m_hWnd==NULL);
          ATLASSERT(::IsWindow(hWnd));
          BOOL bRet = CWindowImpl<CMyProgressControl, CProgressBarCtrl>::SubclassWindow(hWnd);
          return bRet;
       }

    BEGIN_MSG_MAP(CMyProgressControl)
      CHAIN_MSG_MAP(CCustomDraw<CMyProgressControl>)
   END_MSG_MAP()

   DWORD OnPrePaint(int /*idCtrl*/, LPNMCUSTOMDRAW /*lpNMCustomDraw*/)
    {        
        return  CDRF_NOTIFYITEMDRAW;
    }
     DWORD OnItemPrePaint(int /*idCtrl*/, LPNMCUSTOMDRAW lpNMCustomDraw)
    {
        NMLVCUSTOMDRAW* pLVCD = reinterpret_cast<NMLVCUSTOMDRAW*>( lpNMCustomDraw );

        // This is the prepaint stage for an item. Here's where we set the
        // item's text color. Our return value will tell Windows to draw the
        // item itself, but it will use the new color we set here for the background

        COLORREF crText;

            crText = RGB(200,200,255);

        // Store the color back in the NMLVCUSTOMDRAW struct.
        pLVCD->clrTextBk = crText;

        // Tell Windows to paint the control itself.
        return CDRF_DODEFAULT;
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T19:38:46.503

您引用的代码没有机会开始工作：`NMLVCUSTOMDRAW`属于列表视图控件，并且您正在对控件进行子类化以使其成为所有者绘制的？不，它不是这样工作的。

进度条是一个简单的类，它不提供所有者绘制自定义。相反，您最好完全自行决定通过视觉呈现来实现完全自定义的控制。

可以在此处查找自定义进度条窗口的骨架：http: [//tech.groups.yahoo.com/group/wtl/message/4814](http://tech.groups.yahoo.com/group/wtl/message/4814)添加后`MSG_WM_PAINT`，`OnPaint`您将按照自己的方式进行绘画。

# objective-c - NSURL 对象不是 Objective-C 对象

> ID：12971066
> 
> 赞同：0
> 
> 时间：2012-10-19T09:16:23.730
> 
> 标签：objective-c, ios, nsurl

我正在尝试使用以下代码创建一个带有字符串的 URL

```
NSString *urlStr = [NSString stringWithFormat:@"http://demo.com"];
NSURL *url = [NSURL urlWithString:urlStr]; 
```

但是 URL 总是为零。当我打印 URL 的描述时，我得到：

> url 的打印描述：(NSURL *) url = 0xbfffdb78（不是 Objective-C 对象）

谁能帮助我，我错过了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T09:58:15.420

尝试这个，

```
 NSString *urlstr=[NSString stringWithFormat:@"http://google.com"];

      urlstr = [urlstr stringByAddingPercentEscapesUsingEncoding:NSUTF8StringEncoding];

      NSURL * url=[NSURL URLWithString:urlstr]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T09:21:55.693

NSURL 或 NSMutableURL 的描述要这样打印

```
 NSLog(@"%@",url.absoluteString); 
```

# python - 拼接列表

> ID：12971069
> 
> 赞同：0
> 
> 时间：2012-10-19T09:16:34.987
> 
> 标签：python, string, list

我的个人刽子手项目有问题，所以我试图创建一个函数来显示当前未处理的辅音和未处理的元音（第一个和第二个参数），第三个参数是字母集玩家正在猜测。

例如：

```
>>> guessing_function('dfghjkls','ae','g')
'dfhjkls','ae' 
```

输出是从常量列表或元音列表中猜出的字母。抱歉英语不好，谢谢你们，下面是我写的试图解决但它不起作用的代码，它只是返回您输入的相同内容，它实际上并没有从列表中删除字母。

```
def make_guessed(unguessed_cons,unguessed_vow,letter):

    new_cons=""
    for i in range(0,len(unguessed_cons)):
        if unguessed_cons[i] == letter:
            new_cons = unguessed_cons.replace (unguessed_cons,new_cons,[i])
    return new_cons 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T09:24:48.927

我不太明白你的意思，我猜接下来是你描述的guessing_function的实现，make_guessed和guessing_function一样吗？

```
def guessing_function(unguessed_cons,unguessed_vow,letter):
    return unguessed_cons.replace(letter,''),unguessed_vow 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T09:25:15.690

提示：您可以通过以下方式`make_guessed`返回`(new_unguessed_cons,new_unguessed_vow)`然后更新未猜测的变量：

```
unguessed_cons, unguessed_vow = make_guessed(unguessed_cons, unguessed_vow, letter) 
```

目前你的函数只返回`new_unguessed_cons`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-19T09:28:54.363

```
def make_guessed(unguessed_cons, unguessed_vows, letter):

    for con in unguessed_cons:
        if con == letter:
            unguessed_cons = unguessed_cons.replace(letter, '')
            break

    for vow in unguessed_vows:
        if vow == letter:
            unguessed_vows = unguessed_vows.replace(letter, '')
            break

    return unguessed_cons, unguessed_vows 
```

# html - 响应式网页设计纯 css 居中帮助

> ID：12971084
> 
> 赞同：2
> 
> 时间：2012-10-19T02:24:04.013
> 
> 标签：html, css, responsive-design

我无法让以下网站的赞助商部分正确居中，我正在使用响应式网页设计，并且无法让赞助商正确居中。

谢谢...

[http://dev.marshallareastagecompany.org/](http://dev.marshallareastagecompany.org/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T03:57:23.090

您需要给您的赞助商 div 一个宽度，或者`margin:0 auto`不知道如何计算位置。给它一个 1315px 的宽度，看看它是如何移动的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-19T06:48:06.990

转到[http://dev.marshallareastagecompany.org/public/css/pages/index.css](http://dev.marshallareastagecompany.org/public/css/pages/index.css) 并找到规则`#sponsors ul`（很可能在第 128 行）

```
#sponsors ul{
  padding:0px;
} 
```

添加属性`text-align:center`，使最终样式看起来像：

```
#sponsors ul{
  padding:0px;
  text-align:center;
} 
```

用 Firebug 在 FF 和 Chrome 上测试，工作正常......！！！

另一种方法是向`#sponsors`or添加宽度`#sponsors ul`并分配属性`margin:0 auto`。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-19T09:28:15.277

尝试将此添加到您的样式表中：

```
#sponsors ul { text-align: center; }
#sponsors ul li { display: inline-block; } 
```

应该管用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-02-04T17:53:47.057

正如一些评论中所述，保持响应能力的最佳方式是使用@media 有条件地对主要分区应用边距。

假设我们想要使用 960px 的分割。在网格 css 文件的底部。

```
@media (min-width:980px) {
.pure-g {width:960px;margin:0 auto;}
} 
```

一旦最大宽度下降到 980 以下，布局就会有效地在左边距上变得流畅。额外的 20px 是缓冲区以允许垂直滚动条。

# android - Android：发送列表时出错 到 WCF 网络服务

> ID：12971087
> 
> 赞同：1
> 
> 时间：2012-10-19T09:17:27.047
> 
> 标签：android, wcf

我正在尝试`List<string>`从 Android 发送到 WCF Web 服务（使用 C# 构建）。我收到以下错误消息：

这是 WCF Web 服务错误消息：

> 合约“IService1”中的操作“insertRecord”有一个名为“list”的查询变量，类型为“System.Collections.Generic.List`1[System.String]”，但类型为“System.Collections.Generic.List`1[System .String]' 不能被 'QueryStringConverter' 转换。UriTemplate 查询值的变量必须具有可由“QueryStringConverter”转换的类型。

这是 Android 代码`List<string>`：

```
final List<String> list=new ArrayList<String>();

list.add("Item 1");
list.add("Item 2");
list.add("Item 3");
list.add("Item 4");
list.add("Item 5");

HttpGet httpGet=new HttpGet("http://10.0.2.2:3113/Service1.svc/insertRecord?list="+list); 
```

这是 WCF Web 服务代码：

```
public string insertRecord(List<string> list)
{
    DataAccess dataAccess = new DataAccess();
    return dataAccess.insertRecord(list);
}

[OperationContract]
[WebInvoke(Method = "GET", RequestFormat = WebMessageFormat.Json, ResponseFormat = WebMessageFormat.Json, UriTemplate = "insertRecord?list={list}")]
string insertRecord(List<string> list); 
```

有人可以指导我吗？

# c++ - 视频编程中更好的边缘滤波器算法

> ID：12971093
> 
> 赞同：2
> 
> 时间：2012-10-19T09:17:34.333
> 
> 标签：c++, c, image-processing, opencv, edge-detection

我仍在研究[最后一个程序](https://stackoverflow.com/questions/12857764/filter-out-only-one-contour-in-opencv-c-c)，虽然我终于找到了解决问题的方法（关于如何过滤最大轮廓），但我现在有一个新问题，或者说是一个问题。

如您所见，我正在使用 Canny 算法来搜索视频中的边缘。但是我将用于检测的对象没有特定的颜色，所以当对象的颜色与周围的颜色大致相同时（例如，如果对象是银色而背景是白色），对象的边缘会消失，我无法得到物体的轮廓。

现在我将测试 OpenCV 中可用的每个边缘过滤算法，但为了缩短我的工作，我需要你的帮助来推荐**比 canny 最好的（或至少更好的）算法**。现在我测试了Sobel，但结果并不比canny的好。如果可能，请将我链接到一些好的示例以供参考。

编码：

```
int main( int argc, char** argv )
{
CvCapture *cam;
CvMoments moments;
CvMemStorage* storage = cvCreateMemStorage(0);
CvSeq* contours = NULL;
CvSeq* contours2 = NULL;
CvPoint2D32f center;
int i;

cam=cvCaptureFromCAM(0);
if(cam==NULL){
    fprintf(stderr,"Cannot find any camera. \n");
    return -1;
}
while(1){
    IplImage *img=cvQueryFrame(cam);
    if(img==NULL){return -1;}
    IplImage *src_gray= cvCreateImage( cvSize(img->width,img->height), 8, 1);
    cvCvtColor( img, src_gray, CV_BGR2GRAY );
    cvSmooth( src_gray,  src_gray, CV_GAUSSIAN, 5, 11);
    cvCanny(src_gray, src_gray, 70, 200, 3);

    cvFindContours( src_gray, storage, &contours, sizeof(CvContour), CV_RETR_EXTERNAL, CV_CHAIN_APPROX_NONE, cvPoint(0,0));
    if(contours==NULL){ contours=contours2;}
    contours2=contours;
    CvSeq* current_contour = contours;
    double largestArea = 0;
    CvSeq* largest_contour = NULL;
    while (current_contour != NULL){
        double area = fabs(cvContourArea(current_contour,CV_WHOLE_SEQ, false));       
        if(area > largestArea){
            largestArea = area;
            largest_contour = current_contour;
        }
        current_contour = current_contour->h_next;
    }

    cvMoments(largest_contour, &moments, 1);

    double m_00 = cvGetSpatialMoment( &moments, 0, 0 );
    double m_10 = cvGetSpatialMoment( &moments, 1, 0 );
    double m_01 = cvGetSpatialMoment( &moments, 0, 1 );
    float gravityX = (m_10 / m_00)-150;
    float gravityY = (m_01 / m_00)-150;
    if(gravityY>=0&&gravityX>=0&&m_00>=3000){
        printf("center point=(%.f, %.f), Area = %.f \n",gravityX,gravityY,m_00); }

    if(m_00>=3000){
        CvScalar color = CV_RGB(250,0,0);
        cvDrawContours(img,largest_contour,color,color,-1,-1, 8, cvPoint(0,0));
    }

    cvShowImage( "Input", img );
    cvShowImage( "Contours", src_gray );
    cvClearMemStorage(storage);
    if(cvWaitKey(33)>=0) break;
}
cvDestroyWindow("Contours");
cvDestroyWindow("Source");
cvReleaseCapture(&cam);
} 
```

...最后，期待已久的示例图片：

一、好的（我的黑钱包） ![好的一个](../Images/751aed50c80b0c791a652a960076b054.png)

二、故障（橙色框） ![失败](../Images/616d4c0655b6b6ac66618b2b67295bed.png)

最后，另一个失败（一个白盒子） ![白色失败](../Images/7530b92071fdccfa5ca00984fae32986.png)

PS，一些注意事项：

*   对象没有特定的形状、颜色或大小，因此 IMO 最好的选择是找到对象的边缘，而不是通过颜色过滤它。
*   我会握住物体，所以我的手指可能会导致物体的边缘发生变化或消失。
*   我正在开发一个视频处理程序，所以处理时间越短，所需的处理能力越少越好。
*   我的程序将过滤掉最大的轮廓并用红色填充它（见第一张图片）。

提前致谢。干杯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T12:28:18.527

你的问题不是边缘检测算法。您的问题是您正在对算法参数进行硬编码，并期望它能够神奇地适用于您扔给它的所有图像。此外，`cvCanny`无需在使用前对图像进行平滑处理，因为 Canny 运算符已经为您执行了平滑处理。

由于您现在想要实现的目标更加清晰，因此我可以提出一个建议：使用视频而不是单独查看每一帧。如果相机是固定的，而手拿着物体在移动，那么通过[背景减法](http://vip.bu.edu/projects/vsns/background-subtraction/fa/)来检测形状是很简单的。如果相机没有固定，您仍然可以[检测到手](http://www.cs.rutgers.edu/~elgammal/pub/skin.pdf)（PDF 链接）并从那里开始工作。此外，使用您可能拥有的任何其他特定于应用程序的知识（例如项目将在屏幕中间，手将在项目下方）。

# c# - 事件和绑定异常的一击 lambda

> ID：12971094
> 
> 赞同：0
> 
> 时间：2012-10-19T09:17:34.383
> 
> 标签：c#, .net, events, reflection, lambda

我试图取消订阅其自身的 lambda。我使用 MethodInfo 类来获取有关 lambda 的信息，并使用 Delegate.CreateDelegate 方法来创建与 lambda 相同的方法。因此，如果在包含我使用的事件的类方法之一中创建的 lambda 但在另一个类方法中不起作用（绑定异常），则它可以正常工作。

这是代码：

```
public class TestClass
{
    public event Action SomeEvent;
    public void OnSomeEvent()
    {
        if (SomeEvent != null)
        {
            SomeEvent();
        }
    }
    public TestClass()
    {
        //IT WORKS FINE!!!
        //SomeEvent += () =>
        //{
        //    Console.WriteLine("OneShotLambda");
        //    MethodInfo methodInfo = MethodInfo.GetCurrentMethod() as MethodInfo;
        //    Action action = (Action)Delegate.CreateDelegate(typeof(Action), this, methodInfo);
        //    SomeEvent -= action;
        //};
    }
}

class Program
{
    static void Main(string[] args)
    {
        TestClass t = new TestClass();
        t.SomeEvent += () =>
            {
                Console.WriteLine("OneShotLambda");
                MethodInfo methodInfo = MethodInfo.GetCurrentMethod() as MethodInfo;
                //GOT AN ERROR
                Action action = (Action)Delegate.CreateDelegate(typeof(Action), t, methodInfo);
                t.SomeEvent -= action;
            };
        t.OnSomeEvent();
        t.OnSomeEvent(); //MUST BE NO MESSAGE
    }
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-19T09:21:07.937

它不起作用的原因是您将`t`作为第二个参数`CreateDelegate`传入 when you should pass `null`。这是因为为 lambda 创建的方法将是静态方法。否则不能从静态`Main`方法中使用。并且[文档](http://msdn.microsoft.com/en-us/library/74x8f551.aspx)明确指出您需要传递`null`静态方法。

话虽如此，你最好以不同的方式做：

```
TestClass t = new TestClass();
Action eventHandler = null;
eventHandler = () =>
               {
                   Console.WriteLine("OneShotLambda");
                   t.SomeEvent -= eventHandler;
               }
t.SomeEvent += eventHandler; 
```

此代码更具可读性和可理解性，并且性能更好。

# jtable - jtable中的jcheckbox点击它什么也没做，请帮助

> ID：12971096
> 
> 赞同：0
> 
> 时间：2012-10-19T09:17:42.420
> 
> 标签：jtable, jcheckbox, tablemodel

我的表模型如下。我的表格的第一列是复选框。我可以将复选框放在 jtable 中，但是当我单击该复选框时，它什么也不做。我使用`DefaultTableCellRenderer`将复选框放在我的表格中。

```
public class MyTableModel implements TableModel {

    ArrayList<PersonDTO> list=new ArrayList<PersonDTO>();

    String headerName[]={"checkbox","student_id","name"};

    public MyTableModel(ArrayList<PersonDTO> list) {
        this.list=list;  
    }

    @Override
    public int getRowCount() {
        //throw new UnsupportedOperationException("Not supported yet.");
        System.out.println(list.size());
         return list.size();

    }

    @Override
    public int getColumnCount() {
        //throw new UnsupportedOperationException("Not supported yet.");
       // System.out.println(headerName.length);
        return headerName.length;
    }

    @Override
    public String getColumnName(int columnIndex) {
        //throw new UnsupportedOperationException("Not supported yet.");
       // System.out.println(headerName);
        return headerName[columnIndex];

    }

    @Override
    public Class<?> getColumnClass(int columnIndex) {
        //throw new UnsupportedOperationException("Not supported yet.");
        switch(columnIndex)
        {
            case 0:
                return JCheckBox.class;
                //return JCheckBox.class;
            case 1:
                return Integer.class;
            case 2:
                return String.class;

        }
        return null;
    }

    @Override
    public boolean isCellEditable(int rowIndex, int columnIndex) {
       // throw new UnsupportedOperationException("Not supported yet.");
         return  true;

    }

    @Override
    public Object getValueAt(int rowIndex, int columnIndex) {
        //throw new UnsupportedOperationException("Not supported yet.");
        PersonDTO personDTO=list.get(rowIndex);
         switch(columnIndex)
        {
            case 0:
               //System.out.println(personDTO.isCheckbox());
              return personDTO.getCheckBox();
                //return new JCheckBox();

            case 1:
                //System.out.println(personDTO.getName());
                return personDTO.getUserId();
            case 2:
                return personDTO.getName();

        }
        return null;
    }

    @Override
    public void setValueAt(Object aValue, int rowIndex, int columnIndex) {
        //throw new UnsupportedOperationException("Not supported yet."); 

    }

    @Override
    public void addTableModelListener(TableModelListener l) {
       // throw new UnsupportedOperationException("Not supported yet.");
    }

    @Override
    public void removeTableModelListener(TableModelListener l) {
        //throw new UnsupportedOperationException("Not supported yet.");
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T13:47:53.420

对复选框列使用布尔类。

```
public Class<?> getColumnClass(int columnIndex) {
switch(columnIndex)
{
    case 0:
        // return JCheckBox.class;
           return Boolean.class;
    case 1:
        return Integer.class;
    case 2:
        return String.class;
}
   return null;
} 
```

# php - 用 .htaccess 重写 URL:s

> ID：12971098
> 
> 赞同：1
> 
> 时间：2012-10-19T09:17:49.750
> 
> 标签：php, .htaccess, url, seo

请帮我。我花了很多时间尝试通过 .htaccess 文件中的 URL 链接进行 SEO 优化，但我做不到。

`http://www.poplat.com/villa/?option=com_resmania&unit_id=1&isGroup=0&act=Unit&task=details&Itemid=282`

该图应针对 SEO 进行优化，例如：

`http://www.poplat.com/villa/apartment/dream/`

我试图在表单中做一些事情，但它不起作用：

```
## Mod_rewrite in use.
RewriteEngine On
Options +FollowSymlinks

RewriteRule ^villa/([^/]+)/([^/]+)ap1-dream /option=com_resmania&unit_id=$1&isGroup=0&act=Unit&task=details&Itemid=$2 [NC] 
```

* * *

我试过这个命令没有结果：

```
 Options +FollowSymLinks 
    RewriteEngine On 
    RewriteRule ^villa/apartment/dream.html$ villa/?option=com_resmania&unit_id=1&isGroup=0&act=Unit&task=details&Itemid=282 
```

我的网站是使用 Joomla 2.5 的 CMS。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T09:31:55.797

如下所示制作 .htacess 文件并将其放在您网站的根文件夹中

这会将所有带有 ?option=...... 的页面重定向到 villa/apartment/dream.html

```
    重写引擎开启

    RewriteRule ^villa/apartment/dream.html$ villa/?option=$1&%{QUERY_STRING}&unit_id=$1&%{QUERY_STRING}&isGroup=$1&%{QUERY_STRING}&act=$1&%{QUERY_STRING}&task=$1&% {QUERY_STRING}&Itemid=$1&%{QUERY_STRING}

```

这只会将您写入的页面重定向到 villa/apartment/dream.html

```
    重写引擎开启

    RewriteRule ^villa/apartment/dream.html$ villa/?option=com_resmania&unit_id=1&isGroup=0&act=Unit&task=details&Itemid=282

```

一般指南

```
    重写引擎开启

    RewriteRule ^villa/apartment/dream(.*).html$ villa/?option=$1&%{QUERY_STRING}

```

从[这里获取指南](http://www.addedbytes.com/articles/for-beginners/url-rewriting-for-beginners/)

**使用phpinfo()**函数确保在 php 中打开 **mod_rewrite**

# spring - HibernateTemplate vs HibernateDaoSupport vs SessionFactory 注入

> ID：12971101
> 
> 赞同：4
> 
> 时间：2012-10-19T09:17:52.840
> 
> 标签：spring, hibernate

我在很多论坛上看到过，但仍然很困惑。我们正在使用 Spring 3.1 和 Hibernate 4 开始一个新项目，并且需要决定使用 Spring 的 Hibernate 使用哪种策略：

1.  直接访问休眠

    会话会话 = HibernateUtil.getSessionFactory().getCurrentSession(); session.beginTransaction();

2.  使用休眠模板

    List bb = (List)hibernateTemplate.find("来自实体");

3.  使用 HibernateDAOSupport 类

    List bb =(List)getHibernateTemplate().find("来自实体");

你能帮我用什么吗？我已经阅读了[CodeRanch](http://www.coderanch.com/t/501712/Spring/HibernateTemplate-or-HibernateDaoSupport-or-Hibernate)和另一个[链接](http://www.coderanch.com/t/479938/ORM/databases/Diff-between-Hinernate-Template-HibernateDAOSupport)，它告诉我们从**Hibernate 3.x**开始我们应该注入`SessionFactory`我们的 DAO 类（使用`@Repository`）。

有人可以详细解释一下吗？

问候，

阿伦·库马尔

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-19T11:30:01.360

[Spring 本身建议在类的 javadoc](http://static.springsource.org/spring/docs/3.1.x/javadoc-api/org/springframework/orm/hibernate3/HibernateTemplate.html)中不再使用 HibernateTemplate 。您可以直接将会话[工厂声明为 Spring bean](http://static.springsource.org/spring/docs/3.1.x/spring-framework-reference/htmlsingle/spring-framework-reference.html#orm-hibernate)，将其作为任何其他 Spring bean 注入您自己的组件中，并直接使用本机 Hibernate API（使用[sessionFactory.getCurrentSession()](http://static.springsource.org/spring/docs/3.1.x/spring-framework-reference/htmlsingle/spring-framework-reference.html#orm-hibernate)）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-19T09:44:28.703

如果您必须使用 Hibernate，最好的办法是忽略 Code Ranch（和 SO）并遵循 Spring 的建议：

[http://blog.springsource.org/2012/04/06/migrating-to-spring-3-1-and-hibernate-4-1/](http://blog.springsource.org/2012/04/06/migrating-to-spring-3-1-and-hibernate-4-1/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-27T10:08:09.677

现在 SessionFactory 被推荐用于 Hibernate 4 以自动打开/关闭连接。所以不需要使用 HibernateTemplate 类。

# html - z-index 无法正常工作

> ID：12971104
> 
> 赞同：1
> 
> 时间：2012-10-19T09:18:11.683
> 
> 标签：html, css, z-index

我想知道是否有人可以告诉我为什么我的 z-index 属性不能正常工作。

[http://jsfiddle.net/3v7Qq/](http://jsfiddle.net/3v7Qq/)

两侧的横幅（黑色）的 z-index 为：

```
 z-index: -1; 
```

和黄色的横幅：

```
 z-index: 1000; 
```

这是一个类似于我正在使用的小提琴，两个黑色方块的 z-index 低于黄色横幅，那么为什么它们显示在顶部？

两个灰色三角形似乎工作正常，我正在尝试创建横幅效果。

我已经尝试更改值，但我似乎无法让它工作，而且我看过的其他地方都说它应该工作，所有元素都有一个“位置”属性，所以我看不到问题。

任何人？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T11:44:00.730

**z-index**始终在并行元素中工作，这与您在子**div中给出****z-index**的代码不同，这就是它无法正常工作的原因。

 **查看代码实际上是如何工作的：-

**HTML**

```
<div class="div1"></div>  
<div class="div2"></div> 
```

**CSS**

```
.div1 {
width:200px;
  height:100px;
  background:red;
  position:relative;
  z-index:100;
}

.div2 {
width:100px;
height:250px;
background:green;
position:absolute;
top:0px;
z-index:-10;
} 
```

[现场演示](http://tinkerbin.com/4alXrpJt)

**在你的回答之后：在伪类之前会很好看下面提到的演示我如何在你的问题之前和之后使用伪元素我希望这对你有用并且可以根据你的要求给出z-index**

[您的问题的演示答案](http://tinkerbin.com/e27ZyTlD)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-19T09:28:30.747

```
<div class="main">
    <span class="rightbanner"></span>
    <span class="leftbanner"></span>               
<nav>
    <div id="logo">
    </div>
    <span class="leftarrow"></span>
    <span class="rightarrow"></span>

    <ul id="nav_l">
        <li><a href="index.html" id="index">Home</a></li>
        <li><a href="search.html" id="search">Search</a></li>  
    </ul>
    <ul id="nav_r">
        <li><a href="blog.html" id="blog">Blog</a></li>
        <li><a href="#footer_box_c" id="contact">Contact</a></li>     
    </ul>
</nav> 
```

​​​​​​​​​​​​​​​​​​​</p>

CSS：

```
.leftbanner {
    height: 40px;
    width: 30px; 
    position: relative;
    bottom: 30%; 
    left: -20px;
    background-color: black;
    z-index: -1;
    -moz-box-shadow: 0px 2px 10px 2px #808080;
    -o-box-shadow: 0px 2px 10px 2px #808080;
    -webkit-box-shadow: 0px 2px 10px 2px #808080;
    box-shadow: 0px 2px 10px 2px #808080;
}

.rightbanner {
    height: 40px;
    width: 30px; 
    position: relative;  
    bottom: 30%; 
    right: -20px;
    background-color: black;
    z-index: -1;
    -moz-box-shadow: 0px 2px 10px 2px #808080;
    -o-box-shadow: 0px 2px 10px 2px #808080;
    -webkit-box-shadow: 0px 2px 10px 2px #808080;
    box-shadow: 0px 2px 10px 2px #808080;
}

.main{
  height:100px;
}​ 
```

[jsFiddle](http://jsfiddle.net/3v7Qq/5/)**

# c++ - 用于测量时间的 HPET 频率与 CPU 频率

> ID：12971110
> 
> 赞同：1
> 
> 时间：2012-10-19T09:18:40.997
> 
> 标签：c++, windows, time, processor, hpet

我需要以纳秒为单位测量函数执行时间。现在我想了解我的计算机是否可以做到这一点，以及测量的精度是多少。有人建议使用 QueryPerformanceFrequency() 来获取 HPET 的频率，而 1/hpetFrequency 是可以测量的原子时间。这是正确的吗？我的意思是如果我的 cpu 频率是 3.33 GH，即使是 1GHz，那么一个时钟持续时间也是 1 纳秒。不是说我可以用纳秒来衡量吗？

对于测量时间 CPU 或 HPET 的频率是必不可少的，为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T09:54:07.127

您无法测量到 1 纳秒，也无法测量到 10 纳秒。这是因为每个`action of measurement`需要某种呼叫。最快的 API 之一是 GetSystemTimeAsFileTime()。一次通话需要 10-15ns。但它的分辨率/粒度相当差（在 ms 制度下）。QueryPerformanceCounter() 提供 MHz 到 GHz 范围内的频率，具体取决于底层硬件。这个调用没有那么快，但在 1MHz 时，您可以获得 1 微秒的分辨率。在这样的频率下，由 QueryPerformanceFrequency() 给出，连续调用可能会返回相等的值，因为调用比增量速率更快。另一个来源是 CPU 时间戳计数器 (rdtsc)。但它也有一些缺点：现代硬件实现了自适应 CPU 频率。因此这个频率不能被认为是一个常数。这种方式只能在恒定阶段进行测量。

事实上，没有一个频率源提供恒定频率。所有这些频率都是由一些具有`offset and drift`. 因此，操作系统将返回 QueryPerformanceFrequency 或 CPU 频率的值，并让您相信它是一个常数。但是，您将获得的数字仅为`close estimates`.

只有根据系统 RTC 校准这些频率时，才能执行真正准确的计时。有关Windows 上准确计时的更多详细信息，请参阅[此出版物。](http://www.windowstimestamp.com/description)

**编辑：** Windows 选择`Time Stamp Counter`cpu。在这种情况下， QPF() 的结果等于处理器速度除以一个固定数字（在您的情况下为 1024）。当恒定/不变的 TSC 可用时，Windows 会优先选择围绕 TSC 构建计时。3.33 GHz/1024=3.25 MHz。

# internet-explorer-9 - AddThis分享插件与IE9中的flash冲突（不显示）

> ID：12971116
> 
> 赞同：0
> 
> 时间：2012-10-19T09:18:58.003
> 
> 标签：internet-explorer-9, flash, addthis

在我的页面上：http: [//metallica-gr.net/mp3/mp3.html](http://metallica-gr.net/mp3/mp3.html)

在屏幕中间有一个 Flash mp3 播放器。它出现在除 IE9 之外的所有浏览器上，由于某种原因与 AddThis 共享插件脚本冲突。如果我删除下面的脚本（这显然使插件无法工作），flash 内容看起来很好。知道为什么会在 IE9 中发生这种情况以及如何解决它吗？

```
<!-- AddThis Button BEGIN -->
<div align="center" class="addthis_toolbox addthis_default_style" id="addthis" style="float:none; padding-bottom:10px;">
<a class="addthis_button_facebook_like" fb:like:layout="button_count"></a>
<a class="addthis_button_tweet"></a>
<a class="addthis_button_google_plusone" g:plusone:layout="button_count" g:plusone:size="medium"></a>
<div id="share"><a class="addthis_counter addthis_pill_style"></a></div>
</div><br/><br/>
<script type="text/javascript" src="http://s7.addthis.com/js/300/addthis_widget.js#pubid=ra-5079327f7265b166"></script>
<!-- AddThis Button END --> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T10:06:07.900

将脚本移到 head 部分改为修复了 IE9 上的问题。

# iphone - 如何将 NSData 转换为 Char？

> ID：12971117
> 
> 赞同：3
> 
> 时间：2012-10-19T09:18:59.500
> 
> 标签：iphone, objective-c, char, nsdata

我有一个像这样的 NSdata ( **License_Data <0d2b3931 39323433 37363637 36360c79 70617963 6173682d 50445301 0010322d 22772a17 24599e96 88be9991 b2410106>)**

当我在这个 00 之后将它转换为 char 时，它没有任何价值

> 0010322d
> Char*c=[Lincense_Data bytes];

除此以外还有什么方法可以取零，有人请帮忙吗？？？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-19T09:23:34.410

尝试这个

```
unsigned char *bytePtr = (unsigned char *)[data bytes]; 
```

也看到这个答案..

[如何将 NSData 转换为包含十六进制值的 char 数组](https://stackoverflow.com/questions/10214990/how-to-convert-nsdata-to-char-array-containing-hexa-values)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2017-10-19T14:49:23.717

对于 Objective-C++，这就是我`NSData`将`char *`

```
NSData *data = [...]; // This is your data
if (data) {
    const void *_Nullable rawData = [data bytes];
    char *src = (char *)rawData;
} 
```

# excel - 从 Java 中的多个 excel 工作表和选项卡创建 pdf

> ID：12971125
> 
> 赞同：0
> 
> 时间：2012-10-19T09:19:45.533
> 
> 标签：excel, pdf-generation, jodconverter

我想阅读一些包含多张工作表的 excel 文件。

所有工作表都应以 pdf 格式 2 对 1 打印。

我找到了[jodconverter](http://code.google.com/p/jodconverter/)库。如果有更好或更简单的意见，请告诉我。

![文本的简化描述](../Images/64f0125000edd0ded2096fb8d2c3d0d9.png)

可能很重要：如果没有必要，我不想更改 xls 文件中的某些内容。

[编辑：按照方法，将所有 xls 与apache poi](http://poi.apache.org/spreadsheet/index.html)合并并将它们打印到一个 pdf 中，我想我需要一个选项来配置“打印机”。我怎样才能做到这一点？

## 编辑2：

我找到了一种使用[jxcell-library](http://www.jxcell.net/)直接将 xls 打印为 pdf 的方法。有一个从 xls 文件打印 pdf 的[示例](http://www.jxcell.net/features.htm)。但是没有听过多个电子表格。因此，我将用 poit 将它们分开，将它们打印为 pdf，然后将其合并。

如果您知道更快或更简单的解决方案，请随时回答。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T09:33:18.420

这是我的做法：

1.  [使用apache poi](http://poi.apache.org/spreadsheet/index.html)库读取 excel 数据。
2.  根据从 apache poi 获得的数据进行循环以生成 html 表。
3.  使用[wkhtmltopdf](http://code.google.com/p/wkhtmltopdf/downloads/list)从该 html 生成 pdf。

# scripting - 从远程系统读取的文本文件

> ID：12971129
> 
> 赞同：0
> 
> 时间：2012-10-19T09:19:55.473
> 
> 标签：scripting, vbscript

嗨脚本专家....

在下面的代码中寻找您的帮助....RemoteServersList.Txt，我想调用每个系统，如 \RemoteServerName\E$\V2\log.Txt 我缺少几行代码......

请帮助我....非常感谢....

```
Set Fso = CreateObject("Scripting.FileSystemObject")

Set InFile = fso.OpenTextFile("RemoteServersList.Txt")

Const ForReading = 1

Do While Not (InFile.atEndOfStream)

strComputer = InFile.ReadLine

today = Date()

Set fso = CreateObject("Scripting.FileSystemObject")

strFilePath = "\\" & strComputer & "\E$\V2\" ' This is wrong 'here I am missing a 'code.. looking for your help

Set InputFile = fso.OpenTextFile("strFilePath\log.txt", 1)  ' This is wrong here I am 'missing a code.. looking for your help

Set out = fso.OpenTextFile("error.log", 2)

    Do Until InputFile.AtEndOfStream
      line = InputFile.ReadLine
      If Left(line, Len(today)+1) = "[" & today Then

    WScript.Echo "Hello" ' I need to append this to output file
    out.WriteLine line & vbTab & InputFile.ReadLine & vbTab & strComputer

            If InStr(line, "error") > 0 Then
        ' line contains "error"
        out.WriteLine line & vbTab & InputFile.ReadLine & vbTab & strComputer

        End If
    End If

    Loop

InputFile.Close
out.Close

Loop 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T10:09:52.190

RemoteServerList.txt 是一个包含服务器列表的 txt 文件，写成这样：

```
server-1
server-2
server-3
etc. 
```

在每台服务器上，您必须阅读此文本文件：

```
\\server-1\e$\V2\log.txt
\\server-2\e$\V2\log.txt 
```

?

我在您的代码中看到的第一个问题是字符串分配，这应该是正确的：

```
strFilePath = "\\" & strComputer & "\E$\V2\"
Set InputFile = fso.OpenTextFile(strFilePath & "log.txt", 1) 
```

但是你想在哪里写 error.log 文件？本地或远程机器上？

如果您想在本地计算机上使用它，最好只打开一次文件，在脚本的开头，就在 Set Inifile 下方。

如果文件不存在，您必须使用*CreateTextFile*或使用*fso.OpenTextFile("error.log", 2, True)打开它：*

```
Set Fso = CreateObject("Scripting.FileSystemObject")
Set InFile = fso.OpenTextFile("RemoteServersList.Txt")
Set out = fso.CreateTextFile("error.log")

Const ForReading = 1

Do While Not (InFile.atEndOfStream)
  strComputer = InFile.ReadLine
  today = Date()
  Set fso = CreateObject("Scripting.FileSystemObject")
  strFilePath = "\\" & strComputer & "\E$\V2\"

  Set InputFile = fso.OpenTextFile(strFilePath & "log.txt", 1)
  Do Until InputFile.AtEndOfStream

    If (condition) Then
      out.WriteLine [write something to output file]
    End If

  Loop
  InputFile.close

Loop

out.Close
InFile.Close 
```

# jquery-mobile - 自定义 jquerymobile 可折叠项目的图标

> ID：12971130
> 
> 赞同：0
> 
> 时间：2012-10-19T09:19:58.237
> 
> 标签：jquery-mobile

我正在尝试创建一个带有 jquerymobile 可折叠用于内容显示的移动页面，我还需要为列表中的每个可折叠项目自定义图标，看起来像[http://m.box.net](http://m.box.net)，一个用于登录的图标，用于注册等等。

请给我任何建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T12:21:25.113

jQM 为自定义图标提供指南：

*   [http://jquerymobile.com/demos/1.2.0/docs/toolbars/docs-navbar.html](http://jquerymobile.com/demos/1.2.0/docs/toolbars/docs-navbar.html)

> **使用 3rd 方图标集**
> 您可以添加任何流行的图标库，如[Glyphish](http://glyphish.com/)，以实现 iOS 样式选项卡，其中大图标堆叠在文本标签的顶部。所需要的只是一些自定义样式来链接到图标并将它们定位在导航栏中。这是在我们的导航栏中使用 Glyphish 图标和自定义样式（查看样式的页面源代码）的示例：

有关演示，请参见上面的 jQM 页面，这里是下面的图片。您可能看不到它们，因为它们是白色图标

*   [http://jquerymobile.com/demos/1.2.0/docs/toolbars/glyphish-icons/](http://jquerymobile.com/demos/1.2.0/docs/toolbars/glyphish-icons/)

> Joseph Wain / [glyphish.com](http://glyphish.com/)的图标。根据[知识共享署名 3.0 美国许可证获得许可](http://creativecommons.org/licenses/by/3.0/us/)。

# c++ - 上证所累计求和

> ID：12971139
> 
> 赞同：3
> 
> 时间：2012-10-19T09:20:24.223
> 
> 标签：c++, performance, sse

我有一个简单的问题。具有起始 uint_32 值（例如 125）和要添加的操作数 __m128i，例如 (+5,+10,-1,-5)。我想尽快得到一个向量（125 + 5, 125 + 5 + 10, 125 + 5 + 10 - 1, 125 + 5 + 10 - 1 - 5），即从操作数中累加值到起始值。到目前为止，我能想到的唯一解决方案是添加 4 个 __m128i 变量。例如，他们将是

```
/* pseudoSSE code... */
__m128i src =     (125,125,125,125)
__m128i operands =(5,10,-1,-5)

/*  Here I omit the partitioning of operands into add1,..add4 for brevity  */

__m128i add1 =    (+05,+05,+05,+05)
__m128i add2 =    (+00,+10,+10,+10)
__m128i add3 =    (+00,+00,-01,-01)
__m128i add4 =    (+00,+00,+00,-05)
__m128i res1 = _mm_add_epu32( add1, add2 )
__m128i res2 = _mm_add_epu32( add3, add4 )
__m128i res3 = _mm_add_epu32( res1, add2 )
__m128i res  = _mm_add_epu32( res3, src  ) 
```

像这样，我得到了我想要的。对于这个解决方案，我需要设置所有 add_ 变量，然后执行 4 次加法。我真正要问的是这是否可以更快地完成。通过一些不同的算法或者使用一些我还不知道的专门的 SSE 函数（比如 _mm_cumulative_sum()）。非常感谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-19T13:28:54.887

您可以添加更多并行性并使用 3 个添加而不是 4 个：

```
const __m128i src = _mm_set1_epi32(125);
const __m128i operands = _mm_set_epi32(5,10,-1,-5);

const __m128i shift1 =
  _mm_add_epi32(operands,
    _mm_and_si128(_mm_shuffle_epi32(operands, 0xF9),
                  _mm_set_epi32(0,0xFFFFFFFF,0xFFFFFFFF,0xFFFFFFFF)));

const __m128i shift2 =
  _mm_add_epi32(shift1,
    _mm_and_si128(_mm_shuffle_epi32(shift1, 0xFE),
                  _mm_set_epi32(0,0,0xFFFFFFFF,0xFFFFFFFF)));

const __m128i res = _mm_add_epi32(src, shift2); 
```

这里使用了 SSE2 指令集。使用较新的指令集，您可以将 _mm_and_si128/_mm_shuffle_epi32 替换为像 _mm_shuffle_epi8 这样的单个指令。

累计和是用 2 次加法计算的，如下所示：

```
 a    b    c    d
 +      a    b    c
  ------------------
   a   a+b  b+c  c+d
 +           a   a+b
  ------------------
   a   a+b a+b+c a+b+c+d 
```

SSE 不适合这样的任务。它的性能只对“垂直”操作有好处，但是对于“水平”操作，这里需要做很多额外的工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-19T20:41:52.777

谢谢大家的帮助。为了找出最快的版本，我编写了一个测试应用程序。

1/ 非 SSE 版本按照您的预期完成所有工作。

```
int iRep;
int iCycle;
int iVal = 25;
int a1, a2, a3, a4;
int dst1 [4];
for ( iCycle = 0; iCycle < CYCLE_COUNT; iCycle++ )
    for ( iRep = 0; iRep < REP_COUNT; iRep++ )
        {   
          a1 = a2 = a3 = a4 = iRep;
          dst1[0] = iVal + a1;
          dst1[1] = dst1[0] + a2;
          dst1[2] = dst1[1] + a3;
          dst1[3] = dst1[2] + a4;
        } 
```

2/ SSE-4 的添加符合我的建议，即

```
__m128i _a1, _a2, _a3, _a4;
__m128i _res1, _res2, _res3;
__m128i _val;
__m128i _res;

for ( iCycle = 0; iCycle < CYCLE_COUNT; iCycle++ )
    for ( iRep = 0; iRep < REP_COUNT; iRep++ ){ 
        a1 = a2 = a3 = a4 = iRep;

        _val = _mm_set1_epi32( iVal );
        _a1  = _mm_set_epi32 (a1, a1, a1, a1 );
        _a2  = _mm_set_epi32 (a2, a2, a2, 0  );
        _a3  = _mm_set_epi32 (a3, a3, 0 , 0  );
        _a4  = _mm_set_epi32 (a4, 0 , 0 , 0  );

        _res1 = _mm_add_epi32( _a1, _a2     );
        _res2 = _mm_add_epi32( _a3, _a4     );
        _res3 = _mm_add_epi32( _val, _res1  );
        _res  = _mm_add_epi32( _res3, _res2 );
    } 
```

3/ SSE-3 的添加符合 Evgeny 的建议，即

```
__m128i shift1, shift2, operands ;
for ( iCycle = 0; iCycle < CYCLE_COUNT; iCycle++ )
    for ( iRep = 0; iRep < REP_COUNT; iRep++ ){ 
        a1 = a2 = a3 = a4 = iRep;

        _val = _mm_set1_epi32( iVal );
        operands = _mm_set_epi32(a1,a2,a3,a4);

        shift1 = _mm_add_epi32( operands,               
                 _mm_and_si128(_mm_shuffle_epi32(operands, 0xF9),   _mm_set_epi32(0,0xFFFFFFFF,0xFFFFFFFF,0xFFFFFFFF)   ));
        shift2 = _mm_add_epi32( shift1, 
                 _mm_and_si128(_mm_shuffle_epi32(shift1, 0xFE),     _mm_set_epi32(0,0,0xFFFFFFFF,0xFFFFFFFF)            ));
        _res = _mm_add_epi32(_val, shift2); 
        } 
```

结果为

```
 #define REP_COUNT    100000
 #define CYCLE_COUNT  100000 
```

是

```
 non-SSE        -> 6.118s
  SSE-4additions -> 20.775s
  SSE-3additions -> 14.873s 
```

比较意外...

# jquery - 如何使用自定义按钮在 tinyMCE 中打开 fancybox

> ID：12971148
> 
> 赞同：2
> 
> 时间：2012-10-19T09:21:01.760
> 
> 标签：jquery, fancybox, tinymce

我已经创建了这样的自定义按钮

```
setup: function (ed) { 
    ed.addButton('fancybox_button', { 
        title: 'Fancybox button',
        image: 'img/button.gif',
        onclick: function() { 
            fancybox_button();
        }
    });
} 
```

这有效，按钮出现在工具栏中。接下来我在 tinyMCE.init 之前有这样的 fancybox_button 函数

```
function fancybox_button() {
    $.fancybox({
        padding     : 0,
        minHeight   : 560,
        minWidth    : 950,
        ...
    });
} 
```

通过单击自定义按钮，我会收到此错误

```
Uncaught TypeError: Object function ( selector, context ) {
// The jQuery object is actually just the init constructor 'enhanced'
return new jQuery.fn.init( selector, context, rootjQuery );
} has no method 'fancybox' 
```

我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T16:34:44.177

我假设 jquery 在您的页面上，因为错误谈到了它，所以看起来 fancybox js 脚本丢失了，或者您的 fancybox js 脚本声明位于页面中 jquery 的上方。

# erlang - 氮气 - 文件上传

> ID：12971156
> 
> 赞同：1
> 
> 时间：2012-10-19T09:21:27.190
> 
> 标签：erlang, yaws, nitrogen

我可以使用 Nitrogen 的元素轻松上传文件`#upload{}`，效果很好。

但是，我正在使用客户端 Javascript 创建一个 html 文件上传表单（不使用`#upload{}`Nitrogen .erl 文件中的标签），但无法使其正常工作。

关于如何解决这个问题的任何想法？

编辑：我在 Yaws 上使用氮气。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T02:57:50.070

您可以使用[element_upload.erl](https://github.com/nitrogen/nitrogen_core/blob/master/src/elements/forms/element_upload.erl)文件作为参考，了解如何与使用标准 html 表单上传的文件进行交互。

基本上，您需要从上下文中获取请求桥，然后从请求桥中获取文件列表。

```
Req = wf_context:request_bridge(),
UploadedFiles = Req:post_files(), 
```

UploadFiles 是一个`#sb_uploaded_file`记录列表，具有属性`original_name`和`temp_file`。[您可以在simple_bridge 标头](https://github.com/nitrogen/simple_bridge/blob/master/include/simple_bridge.hrl)中查看详细信息

从那里，您可以将文件复制到其他地方，或者对它们做任何您需要做的事情。

编辑：simple_bridge 中改进了上传文件接口，不再需要包含头文件，而是建议使用[sb_uploaded_file](https://github.com/nitrogen/simple_bridge/blob/master/src/sb_uploaded_file.erl)模块与上传文件进行接口。

# iphone - UIPasteBoard 不粘贴音频文件？

> ID：12971160
> 
> 赞同：6
> 
> 时间：2012-10-19T09:21:58.420
> 
> 标签：iphone, sms, uipasteboard

我正在开发一个应用程序，其中一个模块是一个简单的列表 TableView，它显示了音频文件的列表。当用户选择任何音频文件时，操作表带有选项 SMS 之一。我需要通过 SMS 发送特定的音频文件。请让我知道该怎么做。

如果这是不可能的，请向我提供苹果文档，以便它作为我展示的证据。

这是我尝试粘贴音频文件的方法...

第一种方式：

```
UIPasteboard *pasteboard = [UIPasteboard generalPasteboard];
NSString *path = [[NSBundle mainBundle] pathForResource:@"audiofilename" ofType:@"caf"];
NSData *myData = [NSData dataWithContentsOfFile:path];
[pasteboard setData:myData forPasteboardType:@"audiofile"];
NSString  *copyPath = [NSHomeDirectory() stringByAppendingPathComponent:@"Documents/audiofile.caf"];
NSURL *sndURL = [NSURL fileURLWithPath:copyPath];
[pasteboard setString:[NSString stringWithFormat:@"%@",sndURL]];
[[UIApplication sharedApplication] openURL:[NSURL URLWithString:[NSString stringWithFormat:@"sms:12345678"]]]; 
```

第二种方式：

```
Class messageClass = (NSClassFromString(@"MFMessageComposeViewController"));

if([messageClass canSendText])
{
    messagepicker = [[MFMessageComposeViewController alloc] init];
    messagepicker.messageComposeDelegate = self;
    UIPasteboard *pasteboard = [UIPasteboard generalPasteboard];
    NSString *path = [[NSBundle mainBundle] pathForResource:@"290912044119" ofType:@"caf"];
    NSData *myData = [NSData dataWithContentsOfFile:path];
    [pasteboard setData:myData forPasteboardType:@"audiofile"];
    NSString  *copyPath = [NSHomeDirectory() stringByAppendingPathComponent:@"Documents/audiofile.caf"];
    NSURL *sndURL = [NSURL fileURLWithPath:copyPath];
    [messagepicker setBody:[NSString stringWithFormat:@"%@",sndURL]];
    [self presentModalViewController:messagepicker animated:YES];
    [[UIApplication sharedApplication] setStatusBarHidden:YES];
} 
```

**我知道这可以通过发布到服务器并从那里检索来实现。但是，这不是要求。**

任何帮助将不胜感激，如果不可能，请提供苹果文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-26T08:06:26.810

> 使用当前 sdk 无法从消息中发送音频文件....您可以通过将该声音文件上传到服务器然后从消息中发送该 url 来达到此要求。

# javascript - 如何在文本区域输入中解析 html 并将类添加到 td 元素

> ID：12971162
> 
> 赞同：3
> 
> 时间：2012-10-19T09:22:07.067
> 
> 标签：javascript, jquery, forms

我的问题是：我正在提交一个带有 textarea 输入的表单，该表单在内容中包含一个 HTML 表格，其中包含我试图解析的 TD 元素中的特定值，并根据该值向 TD 添加一个类；然后在发送到服务器之前将其保存回表单。

该表如下所示：

```
<table>
<tr>
  <td>b</td>
  <td>r</td>
</tr>
<tr>
  <td>y</td>
  <td>n</td>
</tr>
</table> 
```

这是我现在拥有的 JS：

```
$('#form').submit(function() {
  var table = $('#mytextarea').val();

  $('td', table).each(function() {
    var td = $(this);
    switch(td.text()) {
      case 'r':
        td.addClass('red');
        break
      case 'y':
        td.addClass('yellow');
        break
    }
    table = td.wrap('table').parent().html();
  });
}); 
```

所以本质上我只想解析字符串中的 HTML 并向元素添加类，然后保存回字符串，如果这有意义的话。

这是一个小提琴：

[http://jsfiddle.net/Z265d/](http://jsfiddle.net/Z265d/)

我想我已经很接近了，但还不是很接近。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-19T09:28:51.953

我在你的桌子周围包裹了一个 div，并将其更改`wrap`为`closest`，这将获取表格，然后是它的父级 (div)，并获取它的 html。

[http://jsfiddle.net/Z265d/3/](http://jsfiddle.net/Z265d/3/)

```
var table = '<div><table><tr><td>r</td><td>y</td></tr><tr><td>g</td><td>b</td></tr></table></div>';

$('td', table).each(function() {
  var td = $(this);
  switch(td.text()) {
    case 'r':
      td.addClass('red');
      break;
    case 'y':
      td.addClass('yellow');
      break;
    case 'b':
      td.addClass('blue');   
      break;
    case 'g':
      td.addClass('green');   
      break;          
  }
  table = td.closest('table').parent().html();
});

$('#output').text(table); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-19T09:29:25.243

将 textarea的值包装`mytextarea`到 jQuery 对象中：

```
$('#form').submit(function() {
    var table = $($('#mytextarea').val());
    var styles = {
        "r": "red",
        "g": "green",
        "y": "yellow",
        "b": "blue"
    };

    $('td', table).each(function() {
        var text = $(this).text();
        if (styles[text]) {
            $(this).addClass(styles[text]);
        }
    });

    $('#mytextarea').val(table.html());
});​ 
```

提琴手链接：http: [//jsfiddle.net/1stein/LmhJF/](http://jsfiddle.net/1stein/LmhJF/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-19T09:30:55.750

也许首先用 jquery 包装文本，然后将其转换回文本。

```
var table = $('<table><tr><td>r</td><td>y</td></tr><tr><td>g</td><td>b</td></tr></table>');

$('td', table).each(function() {
  var td = $(this);
  switch(td.text()) {
    case 'r':
      td.addClass('red');
      break;
    case 'y':
      td.addClass('yellow');
      break;
    case 'b':
      td.addClass('blue');   
      break;
    case 'g':
      td.addClass('green');   
      break;          
  }
  table = td.wrap('table').parent().html();
});

$('#output').text(table);
​ 
```

请在[DEMO下方找到](http://jsfiddle.net/dhirajbodicherla/Z265d/4/)

希望这可以帮助

# java - 安卓 SD 卡问题

> ID：12971170
> 
> 赞同：7
> 
> 时间：2012-10-19T09:22:42.103
> 
> 标签：java, android, xml, android-sdcard

我目前在开发 APP 和使用外置 SD 卡时遇到了一些问题。

*   第一个问题是我检查是否安装了 SD 卡。即使没有插入 SD 卡，此函数也会返回 true。我已经使用/尝试了以下代码：

    *   [https://stackoverflow.com/a/12721994](https://stackoverflow.com/a/12721994)
    *   [http://tsicilian.wordpress.com/2012/04/24/android-persistence-external-storage-sd-card/](http://tsicilian.wordpress.com/2012/04/24/android-persistence-external-storage-sd-card/)

来自 developer.android.com

> 每个与 Android 兼容的设备都支持一个共享的“外部存储”，您可以使用它来保存文件。这可以是可移动存储介质（例如 SD 卡）或内部（不可移动）存储。保存到外部存储的文件是世界可读的，并且可以由用户在启用 USB 大容量存储以传输计算机上的文件时进行修改。

也许这是个问题？

我正在使用 LG L5 (E610)

我已向清单文件添加了正确的权限。

我的其他问题可能与此[问题有关](https://stackoverflow.com/q/12973354/1758744)

很感谢任何形式的帮助。谢谢你。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-19T12:26:58.340

你说：

> 第一个问题是我检查是否安装了 SD 卡。即使没有插入 SD 卡，此函数也会返回 true。

我认为您偶然发现了一些需要一些时间才能掌握的东西，因为它根本不是很清楚。

在 Android 中，你会发现 2 种内存：

*   系统一，始终可用，高度安全：您的应用程序只能访问专用于您的一小部分，其他应用程序无法读取您的数据。
*   共享的，通常称为公共的、外部的或“sdcard”。每个应用程序都具有对所有内容的读/写访问权限。但它并不总是可用的，因为您可以将它“挂载”在您的计算机上，从而在 android 中卸载它并因此隐藏它。（但仅在 android 3.X 之前）。

您会在野外找到 3 种设备：

*   在某些设备上，此共享内存位于焊接在设备内部的芯片上。所以名称 sdcard 是不够的。但是，路径可能是“/sdcard”
*   在其他设备上，此共享内存位于您可以删除的真实 SD 卡上。
*   在其他一些设备上，此内存的一部分位于芯片上，另一部分位于您的 SD 卡上。

根据你所说的，我认为你是第三种设备。因此，您的物理 sdcard 将在这种路径中找到：`/mnt/sdcard/external_sd/`. 可悲的是，这是特定于设备的，我认为 Android API 中没有任何东西可以获取此路径。

另外，请记住，从 Android 3.X 开始，我们不再需要“挂载”这个共享内存。因此，您的共享内存将始终存在于 Android 中，因为我们现在使用的是 MTP 协议。

这就是 isExternalStorageAvailable() 返回 true 的原因，即使您的 sdcard 已被移除。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T12:44:41.260

修好了，是自己的问题。

谢谢大家的帮助。。

# javascript - 在 if 条件下调用 Javascript 函数

> ID：12971172
> 
> 赞同：0
> 
> 时间：2012-10-19T09:22:42.840
> 
> 标签：javascript, asp.net

我有两个 javascript 函数

1.

```
function ValidateGVEducation() {            

        var grid = document.getElementById('<%= gvEducation.ClientID %>');
        var ddlQuali, ddlUni, ddlInsti, ddlAreaS, ddlStat;

        //alert(grid.rows[1].cells[2].getElementsByTagName("*")[0].value);
        if (grid.rows.length > 0) {
            for (var i = 1; i < grid.rows.length; i++) {
                ddlQuali = grid.rows[i].cells[1].getElementsByTagName("*")[0];
                ddlUni = grid.rows[i].cells[2].getElementsByTagName("*")[0];
                ddlInsti = grid.rows[i].cells[3].getElementsByTagName("*")[0];
                ddlAreaS = grid.rows[i].cells[4].getElementsByTagName("*")[0];
                ddlStat = grid.rows[i].cells[6].getElementsByTagName("*")[0];
                if (ddlQuali.options[ddlQuali.selectedIndex].value != "0" ){
                    if (ddlUni.options[ddlUni.selectedIndex].value == "0" || ddlInsti.options[ddlInsti.selectedIndex].value == "0" || ddlAreaS.options[ddlAreaS.selectedIndex].value == "0" || ddlStat.options[ddlStat.selectedIndex].value == "0") {
                        alert('Fill Education Details');
                        return false;
                    }
                }

            }

            return true;
        }
        else return false;
    } 
```

此函数在另一个函数中调用

```
 function validateControlsForSubmit(){
    if (ValidateGVEducation()) {
       alert('Fill Education Details');
       return false;
     }     
    return true;
   } 
```

稍后在保存按钮中调用函数。在显示警报后，后面的 aspx 代码正在执行..在这种情况下，返回 false 不起作用..

函数调用是

```
<asp:Button ID="btnSave" runat="server" onclick="btnSave_Click" Text="Save" 
                     onclientclick="return validateControlsForSubmit();"  /> 
```

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T09:46:41.413

**使用 jQuery：**

```
<asp:Button ID="btnSave" runat="server" onclick="btnSave_Click" Text="Save" />

$("#<%=btnSave.ClientID%>").on("click", function(event){
    if (ValidateGVEducation()) {
       alert('Fill Education Details');
      event.preventDefault();
     } 
}); 
```

# c# - 错误的 OData EntityContainer 架构命名空间

> ID：12971174
> 
> 赞同：2
> 
> 时间：2012-10-19T09:22:56.533
> 
> 标签：c#, asp.net-web-api, odata, jaydata, asp.net-web-api-odata

我使用 ASP.NET MVC WebApi 作为 OData 服务，我想用 Jaydata 查询这个 OData 服务。

Jaydata 有一个命令行工具 (JaySvcUtil.exe)，它可以下载服务定义 ($metadata) 并通过生成必要的样板代码来创建功能齐全的 JayData / JavaScript 客户端环境。

Web API + Odata 正在生成此 $metadata 页面： [https ://gist.github.com/3917081#file_metadata.xml](https://gist.github.com/3917081#file_metadata.xml)

WebApiConfig： [https ://gist.github.com/3917081#file_web_api_config.cs](https://gist.github.com/3917081#file_web_api_config.cs)

当我跑步时

> JaySvcUtil.exe -m [http://odataserver.com:52132/api/](http://odataserver.com:52132/api/) $metadata -o Scripts/test.js -n Test.Testing

它将生成这个 javascript 文件 [https://gist.github.com/3917081#file_jaydatafile.js](https://gist.github.com/3917081#file_jaydatafile.js)

问题出在生成的 javascript 文件中：

```
Default.context = new Default.Container( { name:'oData', oDataServiceHost: 'http://servername:52132/api' }); 
```

namespace = "Default" 因为 $metadata 页面中有以下值。

```
Schema Namespace="Default" xmlns="http://schemas.microsoft.com/ado/2009/11/edm" 
```

如何在 $metadata 页面中更改此命名空间值或将其删除？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-20T08:26:35.633

它已在 odata nightly build 中得到支持。[http://aspnetwebstack.codeplex.com/discussions/353867](http://aspnetwebstack.codeplex.com/discussions/353867)

将包升级到最新的签名版本后。您可以更改模型构建器上的命名空间。

```
 private static IEdmModel GetEdmModel()
    {
        ODataModelBuilder modelBuilder = new ODataConventionModelBuilder();
        modelBuilder.Namespace = "xxx";
        modelBuilder.EntitySet<ProductionOrder>("ProductionOrders");
        return modelBuilder.GetEdmModel();
    } 
```

# microsoft-metro - 如何在 Visual Studio 2012 中设置内容文件的目标路径

> ID：12971179
> 
> 赞同：0
> 
> 时间：2012-10-19T09:23:20.997
> 
> 标签：microsoft-metro, windows-runtime, visual-studio-2012

我正在使用 Visual Studio 2012 构建一个 Win8 风格的应用程序（地铁应用程序？）。我有一些需要与应用程序一起部署的资产文件（mp3 文件）。我需要它们在音乐文件夹中，比如说`$(app_path)\music\theme.mp3`。当我从属性中将“内容”标志设置为“真”时，文件将被复制为`$(app_path)\theme.mp3`.

**所以我想知道如何保留包含的内容文件的文件结构。**

当我在 VS2012 中完成编译后手动将文件重新定位到各自的文件夹时，它可以工作。但我不想手动更新我的资产文件。我会在资产文件更新后忘记手动更新它，这会带来风险。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T10:44:36.807

部署应用程序后，您无需关心文件的位置。这些文件的路径由您的应用程序项目中的路径预先确定，因此如果您将文件放入 Assets 文件夹，您可以使用以下命令访问它们：

```
StorageFile file = await StorageFile.GetFileFromApplicationUriAsync(
    new Uri("ms-appx:///Assets/file.txt"));
Stream stream = await file.OpenStreamForReadAsync();
StreamReader sr = new StreamReader(stream); 
```

# javascript - 谷歌浏览器在检查 WebSQL 数据库时冻结

> ID：12971180
> 
> 赞同：3
> 
> 时间：2012-10-19T09:23:22.587
> 
> 标签：javascript, sqlite, google-chrome, web-sql

我在 WebSQL 数据库中插入了一个新行，它工作得非常好（数据稍后可以访问并且是正确的），但是当我尝试在 Google Chrome 的“资源”选项卡中检查 WebSQL 表时，整个工具冻结了。奇怪的是：我在另一个表上使用了相同的语法，这不会导致它冻结。

它冻结的表是最大的表，但它有 25 列，仍远低于任何技术限制。而且，毕竟，数据似乎存储得很好——只是 Chrome 崩溃了。

有没有其他人经历过和/或知道导致这种情况的已知 Chrome 错误？我现在花了几个小时查看我的代码，但是 a）我找不到任何错误 b）我在另一个表（列*更少*）上使用相同的结构，没有任何问题。

编辑：此外，右键单击开发人员工具中的任何内容只会打开一个空的上下文菜单。看起来也不应该是这样的。我正在运行 Ubuntu，如果这有点相关的话。

Edit2：继续寻找解释后，我偶然发现了这个：[http ://code.google.com/p/chromium/issues/detail?id=111468](http://code.google.com/p/chromium/issues/detail?id=111468)

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T20:05:42.543

事实证明这是一个已知的错误。关于意外创建无限循环的一些事情。

# .net - Microsoft BizTalk 消息格式

> ID：12971181
> 
> 赞同：0
> 
> 时间：2012-10-19T09:23:27.170
> 
> 标签：.net, jms, biztalk, messaging, esb

无论 BizTalk 是什么，我对 MoM 或 ESB 中用于消息传递的规范有点困惑。
通过 BizTalk 发送消息时是否可以使用任何 BizTalk 消息格式，或者 JMS 消息格式规范是 BizTalk 中使用的常见替代方案？

我从一侧和 ESB 的另一侧有 .NET 应用程序，中间有 BizTalk。我是否必须将这些消息包装为 JMS 格式并通过 BizTalk 发送，或者是否存在某种 BizTalk 的典型消息格式？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T11:21:01.233

我不能 100% 确定 BizTalk 将如何与 JMS ESB 集成 - 例如 BizTalk 有一个 ESB 工具包，其中有一个[JMS ESB 示例](http://msdn.microsoft.com/en-us/library/ee250244%28v=bts.10%29.aspx)。

但是，以下可能在一般意义上有所帮助？

在内部，[BizTalk 使用 XML](http://en.wikipedia.org/wiki/Microsoft_BizTalk_Server)，并且不需要传入消息具有任何特定的信封、页眉/页脚等 - 消息可以是任何有效的 XML 格式。

例如，如果您正在与 Websphere MQ 集成，BizTalk 只对 MQ 消息的正文部分感兴趣（应该是 XML）。

（如果您可以控制组织中的消息模式，那么将这些消息“标准化”为通用格式当然不会有什么坏处，例如包括标准页眉和页脚部分，以便您自己轻松识别消息）

BizTalk 主要根据它们的根节点名称及其命名空间（格式`xmlns#root`）来识别消息“类型”，因此理想情况下，这些对于每种消息类型应该是唯一的。

BizTalk 还可以从其他格式（例如平面文本文件、UN EDIFACT 等）读取数据，尽管它通常需要能够将其解析为 XML 以便能够进行任何基于内容的路由、映射到其他格式等

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T11:30:30.260

不想这么说，但这取决于您的 BizTalk 安装。BizTalk 为您提供了一个端点（Biztalk 术语中的端口），它将接受指定的任何内容。BizTalk 可能只是将您的消息路由到一个（或多个）目标系统，但这样做可能（但不是必须）在传递消息之前对消息应用转换。

总结一下，有了 BizTalk，您不必担心目标系统，而只需担心协商要传递给 BizTalk 的内容。

您正在与之交谈的端口是什么，队列或服务？

# unicode - 字符中间的大子弹的 Unicode 字符是什么？

> ID：12971187
> 
> 赞同：161
> 
> 时间：2012-10-19T09:24:10.680
> 
> 标签：unicode

我想要类似的东西

```
0x2022  8226    BULLET  • 
```

但更大。

我什至无法在[http://www.ssec.wisc.edu/~tomw/java/unicode.html找到它们](http://www.ssec.wisc.edu/~tomw/java/unicode.html)

我应该搜索什么？点？子弹？

* * *

## 回答 #1

> 赞同：245
> 
> 时间：2012-10-19T21:06:01.300

[http://www.unicode.org](http://www.unicode.org)是查找符号名称的地方。

```
● BLACK CIRCLE        25CF
⚫ MEDIUM BLACK CIRCLE 26AB
⬤ BLACK LARGE CIRCLE  2B24 
```

甚至：

```
 NEW MOON SYMBOL   1F311 
```

祝你好运找到支持它们的字体。在带有 Chrome 的 Windows 7 中仅显示一个。

* * *

## 回答 #2

> 赞同：165
> 
> 时间：2016-04-20T12:13:03.013

这是来自 Unicode 的黑色点状字符的完整列表：

| 数字 | 特点 | HTML 实体 | 描述 |
| --- | --- | --- | --- |
| U+00B7 | · | `&#183;` | 中点 |
| U+25CF | ●</td> | `&#9679;` | 黑圈 |
| U+23FA | ⏺</td> | `&#9210;` | 记录表情符号的黑圈 |
| U+26AB | ⚫</td> | `&#9899;` | 中等黑色圆圈表情符号 |
| U+2B24 | ⬤</td> | `&#11044;` | 黑色大圆圈 |
| U+29ED | ⧭</td> | `&#10733;` | 带向下箭头的黑色圆圈 |
| U+1F784 |  | `&#128900;` | 黑色略小圆圈 |
| U+2022 | •</td> | `&#8226;` | 黑色小圆圈 |
| U+2219 | ∙</td> | `&#8729;` | 子弹运算符 |
| U+22C5 | ⋅</td> | `&#8901;` | 点运算符 |
| U+1F311 |  | `&#127761;` | 新月符号表情符号 |
| U+30FB | ・</td> | `&#12539;` | 片假名中点 |

* * *

## 回答 #3

> 赞同：29
> 
> 时间：2017-05-13T12:02:36.013

您可以使用边界半径为 50% 的跨度。

```
 .mydot{
     background: rgb(66, 183, 42);
     border-radius: 50%;
     display: inline-block;
     height: 20px;
     margin-left: 4px;
     margin-right: 4px;
     width: 20px;
} 
```

```
<span class="mydot"></span>
```

* * *

## 回答 #4

> 赞同：20
> 
> 时间：2012-10-19T10:38:03.287

您可以在使用例如 BabelPad 时搜索“bullet”（它有一个字符映射，您可以在其中按字符名称搜索），但是您几乎找不到比 U+2022 BULLET 更大的任何东西（尽管大小取决于字体）。搜索“circle”会发现很多字符，太多了，因为字符串出现在很多名称中。最大的简单圆圈可能是 U+25CF BLACK CIRCLE “●”。如果太大，U+26AB MEDIUM BLACK CIRCLE “⚫”可能是合适的。

请注意，很少有字体包含这些字符。

像 MEDIUM BLACK CIRCLE 这样的字符出现了一个新问题，您可能在上面看到了这个问题。如评论中所述，此字符可能看起来（远）大于 BLACK CIRCLE。原因是它可能以与“文本样式”相反的“表情符号样式”呈现；这在 Unicode 标准中字符的注释中明确提到。原则上，您可以在字符后使用变体选择器（VS15 或 VS16）字符来指定样式，但实际上它可能不起作用。明确选择字体，例如 Segoe UI Symbol（而不是 Segoe UI Emoji）往往更成功。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2019-03-20T08:22:12.090

如果您使用的是 Windows（任何版本）

转到开始 -> 然后搜索字符映射

在那里，您会在高级视图中找到 1000 个带有 Unicode 的字符，您可以获得更多选项，可用于不同的编码符号。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-10-03T10:30:20.233

除了已经提到的[官方 Unicode 网站](http://www.unicode.org/)（我个人觉得很难使用），我经常使用以下网站搜索 Unicode 字符：

*   [https://www.fileformat.info/info/unicode/index.htm](https://www.fileformat.info/info/unicode/index.htm)

    （[查看](https://www.fileformat.info/info/unicode/char/2022/index.htm) 人物信息， [搜索](https://www.fileformat.info/search/google.htm?q=bullet)“子弹”）

*   [https://unicode-table.com/](https://unicode-table.com/)

    （[查看](https://unicode-table.com/en/2022/)人物信息，[搜索](https://unicode-table.com/en/search/?q=bullet)“子弹”）

*   [https://www.compart.com/en/unicode/](https://www.compart.com/en/unicode/)

    （[查看](https://www.compart.com/en/unicode/U+20AC)人物信息，[搜索](https://www.compart.com/en/unicode/search?q=bullet)“子弹”）

所有三个站点都包含有关每个字符的基本信息（例如 Unicode 代码点、几种编码和 HTML 实体、字符的不同名称、Unicode 版本等）。它们还具有搜索功能，可让您按字符名称或数字进行搜索。

第一个还展示了如何在 C/C++/Java 或 Python 源代码中使用该字符，并有一个用于浏览器支持每个字符的[测试页面。](https://www.fileformat.info/info/unicode/char/2022/browsertest.htm)

第二个有一个不错的“复制”按钮，可让您直接将 Unicode 字符复制到剪贴板，这可能很方便。

# nhibernate - 如何与 TxScopeTransactionManager 一起实现 Session 处理

> ID：12971190
> 
> 赞同：2
> 
> 时间：2012-10-19T09:24:37.283
> 
> 标签：nhibernate, spring.net

当我使用包含由“Bag”映射的“IList<>”的对象调用我的 DAO 的两次 Save() 时，出现异常“非法尝试将集合与两个打开的会话相关联”：

```
public abstract class AbstractGenericDao<TEntity> : HibernateDaoSupport, IAbstractGenericDao<TEntity>
{
  [Transaction]
  public TEntity Save( [NotNull] TEntity entity )
  {
    HibernateTemplate.Save( entity );
  }
} 
```

我正在使用两个 SessionFactories

```
<!-- NHibernate Configuration -->
<object id="NHibernateSessionFactory" abstract="true" type="Spring.Data.NHibernate.LocalSessionFactoryObject, Spring.Data.NHibernate32">
  <property name="HibernateProperties">
    <dictionary>
      <entry key="connection.provider" value="${connection.provider}" />
      <entry key="connection.driver_class" value="${hibernate.driver}" />
      <entry key="dialect" value="${hibernate.dialect}" />
      <entry key="hbm2ddl.auto" value="${hibernate.hbm2ddl}" />
      <entry key="show_sql" value="${hibernate.show_sql}" />
    </dictionary>
  </property>
</object>

<!-- NHibernate Session Configuration -->
<object id="NHibernateSessionFactory_1" parent="NHibernateSessionFactory" >
  <property name="DbProvider" ref="DbProvider_Main" />
  <property name="MappingAssemblies">
    <list>
      <value>DomainModel</value>
    </list>
  </property>
  <property name="ExposeTransactionAwareSessionFactory" value="true" />
</object>

<!-- NHibernate Session Configuration -->
<object id="NHibernateSessionFactory_2" parent="NHibernateSessionFactory" >
  <property name="DbProvider" ref="DbProvider_Exam" />
  <property name="MappingAssemblies">
    <list>
      <value>DomainModel</value>
    </list>
  </property>
  <property name="ExposeTransactionAwareSessionFactory" value="true" />
</object> 
```

和“TxScopeTransactionManager”：

```
<object id="transactionManager" type="Spring.Data.Core.TxScopeTransactionManager, Spring.Data">
    <property name="TransactionSynchronization" value="Always"/>
</object> 
```

有谁能够帮我？

# parsing - 需要无限前瞻的语法？

> ID：12971191
> 
> 赞同：1
> 
> 时间：2012-10-19T09:24:44.740
> 
> 标签：parsing

我一直在阅读不同类型的解析器，并且在几篇论文中，人们提到了需要无限前瞻的语法，但从未给出示例。是否有一些我应该注意的典型例子？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-20T02:32:48.040

很容易提出需要无限前瞻的明确语法。考虑以下简单的一个：

*   S → SX
*   S → SY
*   SX → XB x
*   SY → YB y
*   X → 一个
*   Y → 一个
*   乙→乙
*   B→BB

在这里，我们无法决定是否将首字母减少`a`到`X`或`Y`直到我们一直阅读到输入的末尾。但这并不太有趣，因为语言本身显然可以使用 LR(1) 语法进行解析。

还有一些语言不存在 LR(k) 语法。我认为规范的例子是所有偶数长度回文序列的语言（字母大小至少为两个），它具有明确的语法：

*   P2 → a P2 a
*   P2 → b P2 b
*   P2 → ε

至少应该直观地清楚，为什么这需要无限前瞻：在输入正好经过一半之前，我们无法知道何时进行任何归约，但在看到所有输入之前，我们无法知道输入的长度.

# ios - 在 iOS 5.0 上，我应该如何防止文件被备份到 iCloud 和 iTunes？

> ID：12971192
> 
> 赞同：0
> 
> 时间：2012-10-19T09:24:47.483
> 
> 标签：ios, ios5, backup, itunes, icloud

我的应用程序需要从服务器下载大量内容才能正常运行。

苹果关于数据存储的指导方针提到，这种“需要工作但很容易重新获取”的数据不应该包含在 iCloud/iTunes 备份中：这很公平。

棘手的部分是阻止目录备份的代码在 iOS 5.0、5.0.1 和 5.1 之间是不同的（参见[本技术说明](https://developer.apple.com/library/ios/#qa/qa1719/_index.html)）。

我的应用目前支持 iOS 5.0 作为部署目标。

我应该在以下不同选项之间做什么：

*   **将部署目标设置为 5.1**（直截了当，但我找不到有关仍在使用 iOS 5.0 和 5.0.1 的用户比例的数据，以便轻松地将主题介绍给我的老板）
*   **实现 Apple 提供的 5.0.1 和 5.1 代码**，但它引发了一些问题：
    *   我通常检测设备是否运行特定 iOS 版本的方法是使用 respondsToSelector: 在我的目标 iOS 版本中引入了选择器，但 iOS 5.1[似乎只引入了常量和非通用类](https://www.google.fr/search?q=site%3adeveloper.apple.com%20%22since%20ios%205.1%22&oq=site%3adeveloper.apple.com%20%22since%20ios%205.1%22&sugexp=chrome,mod=0&sourceid=chrome&ie=UTF-8#hl=fr&safe=off&sclient=psy-ab&q=site%3adeveloper.apple.com%20%22Available%20in%20iOS%205.1%20and%20later%22&oq=site%3adeveloper.apple.com%20%22Available%20in%20iOS%205.1%20and%20later%22)。如何确定我运行的是 iOS 5.1 或更高版本？
    *   **运行 iOS 5.0 的设备呢？**将数据存储到缓存中对于开发团队和用户体验来说都是非常烦人的

还有其他选择推荐吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-01-15T06:18:18.463

我正在将我的图像文件夹标记为不备份，因为我正在下载图像以供离线使用。[苹果在这里](https://developer.apple.com/library/ios/qa/qa1719/_index.html)讨论如何做到这一点。

```
#include<sys/xattr.h>

- (BOOL)addSkipBackupAttributeToItemAtURL:(NSURL *)URL {
    if (&NSURLIsExcludedFromBackupKey == nil) { // iOS <= 5.0.1
        const char* filePath = [[URL path] fileSystemRepresentation];

        const char* attrName = "com.apple.MobileBackup";
        u_int8_t attrValue = 1;

        int result = setxattr(filePath, attrName, &attrValue, sizeof(attrValue), 0, 0);
        return result == 0;
    } else { // iOS >= 5.1
        NSError *error = nil;
        [URL setResourceValue:[NSNumber numberWithBool:YES] forKey:NSURLIsExcludedFromBackupKey error:&error];
        return error == nil;
    }
}

- (void)createSkipBackupImagesFolder {
    NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
    NSString *documentsDirectory = [paths objectAtIndex:0];
    NSString *dataPath = [documentsDirectory stringByAppendingPathComponent:@"/images"];

    NSError *error;
    if (![[NSFileManager defaultManager] fileExistsAtPath:dataPath]) {
        [[NSFileManager defaultManager] createDirectoryAtPath:dataPath withIntermediateDirectories:NO attributes:nil error:&error];
        NSURL *toURL = [NSURL fileURLWithPath:dataPath];
        [self addSkipBackupAttributeToItemAtURL:toURL];
    }
}

[self createSkipBackupImagesFolder]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T09:29:05.470

对于存储到文件系统的每个文件，您必须添加“不备份”属性。请参阅此答案：[将“不备份”属性添加到 iOS 5.0.1 中的文件夹层次结构](https://stackoverflow.com/questions/8694112/adding-the-do-not-backup-attribute-to-a-folder-hierarchy-in-ios-5-0-1)。要检查系统版本，您可以调用`[[UIDevice currentDevice] systemVersion]`，或使用`__IPHONE_5_0`with`#if defined()`和之类的宏`#ifndef`。祝你好运！

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-10-19T09:37:15.750

if you store your data into Cache directory instead of document directory than icloud will not backup your data...

so i think this is the best way to stop icloud backup.

in "do not backup" attribute you need to set this flag for each and every file.

use NSCachesDirectory insted NSDocumentDirectory.

# plsql - PL SQL 添加列以使用基于另一列的值进行查询

> ID：12971194
> 
> 赞同：0
> 
> 时间：2012-10-19T09:24:48.100
> 
> 标签：plsql

我有一个查询返回的，除其他外，以下

![在此处输入图像描述](../Images/f217291f61b7be095d60c7b244ed6f8d.png)

我需要创建一个新列的东西，如果级别 1 为空，则返回 1，如果级别 2 为空，则返回 2，如果级别 3 为空，则返回 3（最多可能有 5 个级别）

我不知道从哪里开始，所以任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T14:54:11.603

您应该使用 Case when 来决定新的列值。

请参阅以下示例 pl/sql 代码，它将实现您想要的。

```
 create table test_level( level1 varchar2(20), 
level2 varchar2(20),
level3 varchar2(20),
level4 varchar2(20),
level5 varchar2(20));

    insert into test_level values(null, 'X', 'X', 'X', 'X');
    insert into test_level values('X', null, 'X', 'X', 'X');
    insert into test_level values('X', 'X', null, 'X', 'X');
    insert into test_level values( 'X', 'X', 'X', null,'X');
    insert into test_level values('X', 'X', 'X', 'X', null);

select * from test_level; 
```

现在使用下面的查询来实现新的列值。

```
select level1, level2, level3, level4, level5,      
     (case 
         when level1 is  null then 1
         when level2 is  null then 2
         when level3 is  null then 3
         when level4 is  null then 4
         when level5 is  null then 5
      end) new_lvel
from test_level; 
```

# java - 尝试/捕获块问题

> ID：12971195
> 
> 赞同：0
> 
> 时间：2012-10-19T09:24:49.163
> 
> 标签：java, android, exception-handling

我知道这个问题可能听起来很傻，但它确实发生了。我在 catch 中放置了一些语句来处理异常（它应该进入某个屏幕），并且它总是用于进入那个 catch 块。所以我删除了 try/catch 以便我的应用程序崩溃，以便我可以识别异常。但是，有趣的是，它并没有崩溃。可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T09:31:47.593

1.  查看您的方法是否有“抛出 XXXException”声明。如果为真，则意味着调用者（或调用者的调用者 .... ）已捕获异常并在那里处理它。

2.  如果该方法没有声明任何要抛出的异常，则意味着您捕获的“异常”是“RuntimeException”，可以在没有声明的情况下抛出。

这是您不会遇到应用程序崩溃的两种情况。

# asp.net - 用于 ASP.net Web 应用程序的 NCover

> ID：12971198
> 
> 赞同：0
> 
> 时间：2012-10-19T09:25:06.580
> 
> 标签：asp.net, ncover-explorer

我开发了一个 asp.net 网络应用程序（一个简单的电子商务网站），我想使用 NCover 工具来运行覆盖率测试。但是我找不到任何可以指导我将 NCOver 用于我的 asp.net Web 应用程序的文档。有人可以帮我处理文档或步骤。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T09:32:44.803

在 NCover 网站上快速搜索：

[http://ncover.com/support/docs/v3/how-to/code-coverage-of-asp-net-applications-on-iis](http://ncover.com/support/docs/v3/how-to/code-coverage-of-asp-net-applications-on-iis)

# ruby-on-rails - 如何循环遍历数组并保存数据

> ID：12971201
> 
> 赞同：0
> 
> 时间：2012-10-19T09:25:15.957
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, activerecord

在我的项目中，我有以下代码

```
scenario = Scenario.new
scenarioTranslation = ScenarioTranslation.new

params[:title].each do | index |
      scenario.position = last_position + 1
      scenario.analysis_id = scenarioTranslation.scenario_id
      scenario.save
    end 
```

这`params[:title]`是一个数组，我必须遍历数组元素的数量并保存场景

目前它只保存一次。谁能告诉我如何解决这个错误

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-19T09:29:28.703

我对你的代码应该做什么有点困惑，但我认为这是你需要的：

```
params[:title].each_with_index do | title, index |
      scenario_translation = ScenarioTranslation.create
      scenario = Scenario.new(:position => (last_position + 1), :analysis_id => scenario_translation.id)
      scenario.save
end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-19T09:39:10.370

循环的每次迭代，先创建一个scenarioTranslation对象，再创建一个scenario对象，设置数组索引为scenario对象的位置，保存scenario对象。

```
params[:title].each_with_index do | title, index |
  scenarioTranslation = ScenarioTranslation.create

  scenario = Scenario.new
  scenario.position = index
  scenario.analysis_id = scenarioTranslation.scenario_id
  scenario.save
end 
```

# json - 在 Sencha Architect 2 中使用模型和 CakePHP 2 + REST（JSON 视图）

> ID：12971203
> 
> 赞同：0
> 
> 时间：2012-10-19T09:25:40.937
> 
> 标签：json, extjs4, associations, extjs, store

我正在尝试使用带有 ExtJS 4.1（Sencha Architect 2）的 REST 代理，使用 CakePHP 读取 JSON 文件，该文件在 JSON 返回数据中具有视图。

此数据不仅包含对象，还包含相关对象、Book、BookCopy 等。

我应该如何创建商店和模型才能在 Grid 中使用 JSON？现在它在 Book 列的网格中显示对象，这是我在商店中创建的一个字段（我使用自动列将商店的字段映射到网格）。

这是 JSON（它是嵌套数据和相关数据）：

```
 [
    {
        "Book": {
            "ISBN": "1660151266",
            "title": "A Call to Arms ",
            "author": "Loren L. Coleman ",
            "pages": "44",
            "book_copy_count": "10",
            "book_available_count": "9",
            "id": "66"
        },
        "BookCopy": [
            {
                "condition_id": "1",
                "available": false,
                "book_id": "66",
                "id": "395",
                "title": "A Call to Arms "
            },
            {
                "condition_id": "1",
                "available": true,
                "book_id": "66",
                "id": "396",
                "title": "A Call to Arms "
            },
            {
                "condition_id": "1",
                "available": true,
                "book_id": "66",
                "id": "397",
                "title": "A Call to Arms "
            },
            {
                "condition_id": "1",
                "available": true,
                "book_id": "66",
                "id": "398",
                "title": "A Call to Arms "
            },
            {
                "condition_id": "1",
                "available": true,
                "book_id": "66",
                "id": "399",
                "title": "A Call to Arms "
            },
            {
                "condition_id": "1",
                "available": true,
                "book_id": "66",
                "id": "400",
                "title": "A Call to Arms "
            },
            {
                "condition_id": "1",
                "available": true,
                "book_id": "66",
                "id": "401",
                "title": "A Call to Arms "
            },
            {
                "condition_id": "1",
                "available": true,
                "book_id": "66",
                "id": "402",
                "title": "A Call to Arms "
            },
            {
                "condition_id": "1",
                "available": true,
                "book_id": "66",
                "id": "403",
                "title": "A Call to Arms "
            },
            {
                "condition_id": "1",
                "available": true,
                "book_id": "66",
                "id": "404",
                "title": "A Call to Arms "
            }
        ]
    },
{
        "Book": {
            "ISBN": "1003581858",
            "title": "Call of Duty ",
            "author": "Blain Lee Pardoe ",
            "pages": "52",
            "book_copy_count": "6",
            "book_available_count": "5",
            "id": "58"
        },
        "BookCopy": [
            {
                "condition_id": "1",
                "available": false,
                "book_id": "58",
                "id": "350",
                "title": "Call of Duty "
            },
            {
                "condition_id": "1",
                "available": true,
                "book_id": "58",
                "id": "351",
                "title": "Call of Duty "
            },
            {
                "condition_id": "1",
                "available": true,
                "book_id": "58",
                "id": "352",
                "title": "Call of Duty "
            },
            {
                "condition_id": "1",
                "available": true,
                "book_id": "58",
                "id": "353",
                "title": "Call of Duty "
            },
            {
                "condition_id": "1",
                "available": true,
                "book_id": "58",
                "id": "354",
                "title": "Call of Duty "
            },
            {
                "condition_id": "1",
                "available": true,
                "book_id": "58",
                "id": "355",
                "title": "Call of Duty "
            }
        ]
    },
    {
        "Book": {
            "ISBN": "1843871223",
            "title": "Close Quarters ",
            "author": "Victor Milan ",
            "pages": "32",
            "book_copy_count": "9",
            "book_available_count": "9",
            "id": "23"
        },
        "BookCopy": [
            {
                "condition_id": "1",
                "available": true,
                "book_id": "23",
                "id": "139",
                "title": "Close Quarters "
            },
            {
                "condition_id": "1",
                "available": true,
                "book_id": "23",
                "id": "140",
                "title": "Close Quarters "
            },
            {
                "condition_id": "1",
                "available": true,
                "book_id": "23",
                "id": "141",
                "title": "Close Quarters "
            },
            {
                "condition_id": "1",
                "available": true,
                "book_id": "23",
                "id": "142",
                "title": "Close Quarters "
            },
            {
                "condition_id": "1",
                "available": true,
                "book_id": "23",
                "id": "143",
                "title": "Close Quarters "
            },
            {
                "condition_id": "1",
                "available": true,
                "book_id": "23",
                "id": "144",
                "title": "Close Quarters "
            },
            {
                "condition_id": "1",
                "available": true,
                "book_id": "23",
                "id": "145",
                "title": "Close Quarters "
            },
            {
                "condition_id": "1",
                "available": true,
                "book_id": "23",
                "id": "146",
                "title": "Close Quarters "
            },
            {
                "condition_id": "1",
                "available": true,
                "book_id": "23",
                "id": "147",
                "title": "Close Quarters "
            }
        ]
    },
    {
        "Book": {
            "ISBN": "1795387125",
            "title": "D.R.T ",
            "author": "James D. Long ",
            "pages": "71",
            "book_copy_count": "5",
            "book_available_count": "5",
            "id": "25"
        },
        "BookCopy": [
            {
                "condition_id": "1",
                "available": true,
                "book_id": "25",
                "id": "156",
                "title": "D.R.T "
            },
            {
                "condition_id": "1",
                "available": true,
                "book_id": "25",
                "id": "157",
                "title": "D.R.T "
            },
            {
                "condition_id": "1",
                "available": true,
                "book_id": "25",
                "id": "158",
                "title": "D.R.T "
            },
            {
                "condition_id": "1",
                "available": true,
                "book_id": "25",
                "id": "159",
                "title": "D.R.T "
            },
            {
                "condition_id": "1",
                "available": true,
                "book_id": "25",
                "id": "160",
                "title": "D.R.T "
            }
        ]
    },
    {
        "Book": {
            "ISBN": "1401073348",
            "title": "Dagger Point ",
            "author": "Thomas Gressman ",
            "pages": "46",
            "book_copy_count": "10",
            "book_available_count": "10",
            "id": "48"
        },
        "BookCopy": [
            {
                "condition_id": "1",
                "available": true,
                "book_id": "48",
                "id": "295",
                "title": "Dagger Point "
            },
            {
                "condition_id": "1",
                "available": true,
                "book_id": "48",
                "id": "296",
                "title": "Dagger Point "
            },
            {
                "condition_id": "1",
                "available": true,
                "book_id": "48",
                "id": "297",
                "title": "Dagger Point "
            },
            {
                "condition_id": "1",
                "available": true,
                "book_id": "48",
                "id": "298",
                "title": "Dagger Point "
            },
            {
                "condition_id": "1",
                "available": true,
                "book_id": "48",
                "id": "299",
                "title": "Dagger Point "
            },
            {
                "condition_id": "1",
                "available": true,
                "book_id": "48",
                "id": "300",
                "title": "Dagger Point "
            },
            {
                "condition_id": "1",
                "available": true,
                "book_id": "48",
                "id": "301",
                "title": "Dagger Point "
            },
            {
                "condition_id": "1",
                "available": true,
                "book_id": "48",
                "id": "302",
                "title": "Dagger Point "
            },
            {
                "condition_id": "1",
                "available": true,
                "book_id": "48",
                "id": "303",
                "title": "Dagger Point "
            },
            {
                "condition_id": "1",
                "available": true,
                "book_id": "48",
                "id": "304",
                "title": "Dagger Point "
            }
        ]
    }
] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T02:39:17.657

您必须采用默认的 ExtJS 代理配置和 CakePHP 的渲染。根据您的经验，您可以编写自己的 ExtJS 到 CakePHP 的转换，反之亦然（请参阅[Hash 类](http://book.cakephp.org/2.0/en/core-utility-libraries/hash.html)），或者您可以使用 Bancha，它会为您完成所有这些工作。尤其见[http://banchaproject.org/using-sencha-architect-2.html](http://banchaproject.org/using-sencha-architect-2.html)

只要您的 Store 与 CakePHP 一起使用，您就可以简单地将它用于 Grid、List、...

我希望这会有所帮助，请随时询问更多详细信息:)

# php - 如何从没有特定 ID 的 HTML 表格数据中删除显示的内容？

> ID：12971205
> 
> 赞同：0
> 
> 时间：2012-10-19T09:25:52.097
> 
> 标签：php

我有以下代码；

```
<td class="smallText" width="33%" valign="top" align="center">
<a href="#"><img width="100" height="100" border="0" title=" Genuine Value Pack " alt="Brother TN" src="images.jpg"></a>
<br>
<a href="#">Brother TN 240 Genuine Value Pack</a><br>
$325.00 
```

Brother TN 240 正品超值装
$123.00
Brother TN 240 正品超值装
$54.00

如何使用 php 删除每个 td 中的价格？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T19:22:15.340

假设您可以将定位范围缩小到给定的 dom 元素（例如，假设您的所有价格都在您可以专门定位的 div 中），那么您可以使用正则表达式来删除价格字符串。

这将是有风险的，因为它会删除您抓取的元素内所有区域的所有价格。

```
$myHtmlFromContainingElement = getMyDiv(/* sort this out yourself */);
$myHtmlWIthoutPrices = preg_replace('/\$[0-9]{1,10}\.[0-9]{1,10} /','',$myHtmlFromContainingElement); 
```

这样做的缺点：

*   Preg 替换很慢，因此您希望在缓存/发布的页面上而不是在动态页面上执行此操作，尽管这可能是您愿意做出的牺牲
*   这将只处理与精确格式匹配的价格，即“$NNNNNNNNNN.NNNNNNNN”或“美元符号、1-10 个数字、一个点、1-10 个数字然后是一个空格。
*   这将从给定的选择中删除**所有**价格。

[在http://www.functions-online.com/preg_replace.html](http://www.functions-online.com/preg_replace.html)上进行了简要测试

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T10:37:46.793

如果您知道要查找的字符串，例如可以执行 $find = "$41.90"; $替换 = ""; // 空字符串 $myhtmlstring = str_replace($find,$replace,$myhtmlstring);

如果你知道它在**td**标签中，那么你可以使用 simple_html_dom (http://simplehtmldom.sourceforge.net/) 或 symfony 的 dom 爬虫 (http://symfony.com/doc/2.0/components/dom_crawler.html) 来解析html 并生成所有**td**标签的列表。这缩小了您需要检查的项目。

您也可以尝试用 reg exp 替换。搜索“$”，后跟数字字符。

# php - 如何将数据库中的多个用户分配给类属性？

> ID：12971208
> 
> 赞同：0
> 
> 时间：2012-10-19T09:26:05.693
> 
> 标签：php, class, orm

我不知道如何将数据库中的每个用户分配为类属性并显示它们。看一看。例如，我的数据库中有这张表：

```
+----+----------+------------+-----------+
| id | username | first_name | last_name |
+----+----------+------------+-----------+
|  1 | guu      |  Guu       | GuuShtein |
|  3 | user1    |  Allan     | Last      |
|  4 | Donny    |  Name      | Last Name |
+----+----------+------------+-----------+ 
```

这是课程：

```
class users {

public $db;
private $id;
private $username;
private $first_name;
private $last_name;

public function __construct($db) {
    $this->db=$db;
}

private function find_by_id($id) {
   $record = $this->db->query('SELECT * FROM users WHERE id=' . $id .' LIMIT 1')->fetch(PDO::FETCH_ASSOC);     
   foreach ($record as $atribute => $value) {
       $this->$atribute = $value;
   } 
}

public function user_nfo($id){
    $this->find_by_id($id);

    $user_nfo = "User id: " . $this->id . "<br />";
    $user_nfo .= "Username: " . $this->username . "<br />";
    $user_nfo .= "User full name: " . $this->first_name . " " . $this->last_name . "<br />";       
    return $user_nfo;
}
}

$users = new mysql_a($db);
echo $users->user_nfo(1); 
```

我的问题是如何编写一个方法，逐个显示所有用户？我的意思是类似于我的 user_nfo 函数，但仅适用于所有记录？我尝试使用 PDOfetchAll 进行“foreach”循环，但它只是覆盖属性并且只显示最后一条记录。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T09:33:02.523

您想要的是一个名为 user 的新对象，它具有您想要的所有属性，如下所示。

```
<?php

try {
    $db = new PDO('mysql:host=localhost;dbname=sub_db;charset=UTF-8', DB_USER, DB_PASS);
    $db->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);
    $db->setAttribute(PDO::ATTR_EMULATE_PREPARES, FALSE);
} catch (PDOException $ex) {
    echo "error";
}

class users {

    public $db;

    public function __construct($db) {
        $this->db=$db;
    }

    /**
     * Fetch all users and return an array of their mapped objects
     *
     * @author Daniel Noel-Davies
     *
     * @return array
     */
    public function getAllUsers () {
        $users   = array();

        // Grab an array of each user
        $users = $this->db->query('SELECT * FROM users')->fetch(PDO::FETCH_ASSOC);

        // Loop through the users
        foreach( $users as $index => $user ) {
            // Replace each row with an object of that user (keeps memory down)
            $users[$index] = new User($user);
        }

        // return our array containing an object of each user
        return $users;
    }

    public function count_row(){
        $count = $this->db->query('SELECT COUNT(*) FROM users')->fetch(PDO::FETCH_ASSOC);
        return $count['COUNT(*)'];
    }

    public function find_by_id($row) { 
       $record = $this->db->query('SELECT * FROM users LIMIT 1 OFFSET ' . $row)->fetch(PDO::FETCH_ASSOC);
       return $record;
    }   
 }

class user {

    public $id;
    public $username;
    public $first_name;
    public $last_name;

    public function __construct($record){    
           foreach ($record as $atribute => $value) {
               $this->$atribute = $value;
           }
    }
}

// Initiate our users class
$objUsers = new Users;

// Fetch all the users
$users = $objUsers->getAllUsers();

// Loop through them all
foreach ($users as $user) {
    // Using Printf keeps things neater, means you're template is tidier.
    printf(
        '%s<br />
        %s<br />
        %s<br />
        %s<br />',

        $user->id,
        $user->username,
        $user->first_name,
        $user->last_name
    );
}
?> 
```

这有帮助吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T21:18:05.837

感谢“NoelDavies”的回答，这是我设法为我工作的完整代码。如果有人遇到同样的问题：

```
<?php

try {
$db = new PDO('mysql:host=localhost;dbname=sub_db;charset=UTF-8', DB_USER, DB_PASS);
$db->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);
$db->setAttribute(PDO::ATTR_EMULATE_PREPARES, FALSE);
} catch (PDOException $ex) {
    echo "error";
}

class mysql_a {

    public $db;

    public function __construct($db) {
        $this->db=$db;
    }

    public function count_row(){
        $count = $this->db->query('SELECT COUNT(*) FROM users')->fetch(PDO::FETCH_ASSOC);
        return $count['COUNT(*)'];
    }

    public function find_by_id($row) { 
       $record = $this->db->query('SELECT * FROM users LIMIT 1 OFFSET ' . $row)->fetch(PDO::FETCH_ASSOC);
       return $record;
    }   
 }

class user {

    public $id;
    public $username;
    public $first_name;
    public $last_name;

    public function __construct($record){    
           foreach ($record as $atribute => $value) {
               $this->$atribute = $value;
           }
    }
}

$users = new mysql_a($db);

for ($i = 0; $i < $users->count_row(); $i++) {
    $user = new user($users->find_by_id($i));
    echo $user->id         . "<br />";
    echo $user->username   . "<br />";
    echo $user->first_name . "<br />";
    echo $user->last_name  . "<hr />";
}
?> 
```

它计算 db 中的行数，然后将它们一一拉出并输出。我确信有一些更短更优雅的方式，但它现在对我来说很好；] 再次感谢“NoelDavies”。

# jquery - jquery只选择父表行

> ID：12971209
> 
> 赞同：0
> 
> 时间：2012-10-19T09:26:09.577
> 
> 标签：jquery, jquery-selectors

嗨，我在那张桌子里面有一张桌子，我还有一张桌子。如何编写 jquery 选择器以仅获取父表行？

```
<table class="required_capacity">
<tr>
    <td>Row1</td>
    <td>Row1</td>
</tr>
<tr>
    <td colspan="2">
        <table>
            <tr>
                <td>Some Text ... </td>
            </tr>
            <tr>
                <td>Some Text ... </td>
            </tr>
        </table>
    </td>
</tr>
<tr>
    <td>Row 3</td>
    <td>Row 3</td>
</tr> 
```

在上面的 html 代码中，我只需要获取 $('.required_capacity') 表行。我试过这个选择器来获取行

```
$('.required_capacity_table').children('tr') 
```

但它也在边桌行中给出？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-19T09:27:40.950

试试这个

```
$('.required_capacity_table > tbody > tr') 
```

[**演示**](http://jsfiddle.net/jCEkx/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T09:29:06.880

用这个。

```
$('.required_capacity_table > tr') 
```

# regex - 用正则表达式替换字符串中的 [ 和 ]

> ID：12971211
> 
> 赞同：3
> 
> 时间：2012-10-19T09:26:17.020
> 
> 标签：regex, puppet

如何使用 Regex 删除字符串中的字符`[`？`]`

我正在使用 Puppet DSL 函数 regsubst ：

```
regsubst($::env, '\[\]', '', 'G') 
```

谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-19T09:28:16.040

括号是正则表达式中的元字符，需要转义（如果要匹配其中任何一个，请放入[字符类）：](http://www.regular-expressions.info/charclass.html)

```
regsubst($::env, '[\[\]]', '', 'G') 
```

您的版本只匹配确切的字符串`[]`。

在正则表达式中，`[abc]`表示“匹配以下之一：`a`,`b`或`c`”。

# ipad - iOS 4.x 中的自定义 UIPopoverController (UIPopoverBackgroundView)

> ID：12971219
> 
> 赞同：1
> 
> 时间：2012-10-19T09:26:32.077
> 
> 标签：ipad, ios4, uipopovercontroller

我`UIPopoverController`通过创建自定义`UIPopoverBackgroundView`类进行自定义它在 iOS 5+ 中运行良好但在 iOS 4.x`UIPopoverController`中没有属性`popoverBackgroundViewClass`

如何在 iOS 4.x中应用`popoverBackgroundViewClass`和自定义？`UIPopoverController`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T13:24:32.837

恐怕你不能。因为`UIPopoverBackgroundView`仅[在](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIPopoverBackgroundView_class/Reference/Reference.html#//apple_ref/occ/cl/UIPopoverBackgroundView)iOS 5.0 之后可用。

# html - Vertical Align Middle for Image

> ID：12971228
> 
> 赞同：1
> 
> 时间：2012-10-19T09:26:58.153
> 
> 标签：html, alignment, vertical-alignment

Hoping you can help me here, I'm new to coding and really struggling to get, what I'm sure is a very simple instruction, executed.

I want to align my gif image in the center middle of the page, I just can't seem to get it right; also I don't want to use CSS, as being a novice I found it wouldn't stay directly in the center on changing screen sizes, but I'm sure there is a way around that.

The CSS code is as follows;

```
 a:link {text-decoration: none;}
  a:visited {text-decoration: none;}
  a:active {text-decoration: none;}
  a:hover {text-decoration: underline; color: red;} 
```

HTML:

```
<p style="position: absolute; center: 0; width: 100%; vertical-align: middle">
 <img alt="logo" src="logov3.gif" title="logo">
</p>
<p style="position: absolute; bottom: 0; left: 0; width: 100%; text-align: center">
  <a href="mailto:info@valuableconsultants.com">
    <font color="#000000" face="Book Antiqua" size="2">info@valuableconsulatants.com</font>
  </a>
</p> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T09:52:10.447

[http://css-tricks.com/snippets/css/exactly-center-an-imagediv-horizontally-and-vertically/](http://css-tricks.com/snippets/css/exactly-center-an-imagediv-horizontally-and-vertically/)

```
.center {
   width: 300px;
   height: 300px;
   position: absolute;
   left: 50%;
   top: 50%; 
   margin-left: -150px;
   margin-top: -150px;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-19T09:43:58.953

first:

```
<p style="position: absolute; center: 0; width: 100%; vertical-align: middle">
 <img alt="logo" src="logov3.gif" title="logo">
</p> 
```

`center` is not a CSS property.

Because you are using `position: absolute;`, it will not be centered

solution:

Add a width, the width of your image, and add margin to center it:

```
<p style="width: widthOffImageInPixel;margin-top: 0;margin-right: auto;margin-bottom: 0; margin-left: auto;>
  <img alt="logo" src="logov3.gif" title="logo">
</p> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-19T09:59:08.667

If image position is absolute, you can centered by set:

1.  fixed width and height for image
2.  image left and top 50%
3.  and finally image top and left margins set: -(height/2) and -(width/2) respectively

Sample

HTML:

```
<body>
<img id="image" src="" alt="">
</body> 
```

CSS:

```
#image {
 position:absolute;
 width:200px;
 height:300px;
 left:50%;
 top:50%;
 margin-left:-100px;
 margin-top:-150px;
} 
```

# ruby-on-rails - Rails3：我应该切换到 NoSQL 吗？大量的计算，大量的用户匹配数据

> ID：12971230
> 
> 赞同：1
> 
> 时间：2012-10-19T09:27:06.927
> 
> 标签：ruby-on-rails, database, performance, nosql

我正处于项目的一个阶段，出于性能原因，我正在考虑迁移到 NoSQL。我肯定会有数百万行的表，所以 NoSQL 可能很有用。但我的问题是我也在用这些数据做很多计算，我不知道如果 rails 仍然需要做所有的计算，这是否会给我带来更多的性能。

[这是我的另一个问题](https://stackoverflow.com/questions/12944813/rails-3-user-matching-algorithm-to-sql-query-complicated/)，我在其中描述了我需要什么数据以及如何处理它。

在我意识到我的大部分代码都是用 SQL 编写并将一个用户与 1000 个其他用户匹配之后，它仍然需要

```
Completed 200 OK in 104871ms (Views: 2146.0ms | ActiveRecord: 93780.5ms)
(on my local machine with sqlite) 
```

这对我来说是不可接受的。我肯定能够将我的表非规范化为一个表以使其正常工作。但这会给我带来性能提升吗？

我还考虑过将计算出的匹配百分比存储在数据库中，但这将导致仅 50k 用户就有 25 亿行。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-19T10:08:20.447

非规范化肯定会提高性能。为查询中选择的列添加索引。查询 id 而不是字符串，并在内存中有映射（字符串到 id）。非规范化提高了性能，因为您不会加入其他表。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-19T10:15:56.293

正如 Saravanakumar 所提到的，对计算数据进行非规范化肯定可以提高性能，我会推荐它用于繁重的计算。在加入表时，添加索引绝对是必须的。另一种选择是使用 SQL 视图，它可以提高严重依赖连接的查询的性能。（看看：[https](https://github.com/ryanlitalien/rails_sql_views) ://github.com/ryanlitalien/rails_sql_views ）

我想说的另一点是，从 SQLite 迁移到 NoSQL 可能是一大步。一个较小的步骤可能是切换到已经可以提高性能的 MySQL。更好的是 PostgreSQL，在我看来，它是目前最好的 SQL DB。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-20T17:54:19.663

如果我是你，我会使用 mysql 和 postgresql 并尝试更好地非规范化表......

NoSql 并不总是比非规范化、一张表查询快...

在决定切换数据库之前，测试两种替代方案的确切情况......

# linux - 预处理器指令返回值

> ID：12971233
> 
> 赞同：-2
> 
> 时间：2012-10-19T09:27:15.537
> 
> 标签：linux, c-preprocessor, preprocessor-directive

我想接收我定义的变量的输出值`check`
是否`#define check something` 可以使用某些预处理器指令接收此值？
例如这样的：
`#error check`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T09:46:11.337

该`#error`指令不是宏扩展的。也不是`#warning`。

*   [http://gcc.gnu.org/onlinedocs/cpp/Diagnostics.html#Diagnostics](http://gcc.gnu.org/onlinedocs/cpp/Diagnostics.html#Diagnostics)

*   [http://msdn.microsoft.com/en-us/library/c8tk0xsk.aspx](http://msdn.microsoft.com/en-us/library/c8tk0xsk.aspx)

这意味着您不能使用`#error`or输出预处理器表达式`#warning`

根据预处理器表达式的值，您可以得到最接近的消息是这样的：

```
#if (MACRO < 12)
#error MACRO was less than 12
#elif (MACRO >15 && MACRO < 19)
#error Another message about MACRO
#endif 
```

有关更多信息，请参阅文档中的“条件”：

*   [http://gcc.gnu.org/onlinedocs/cpp/Conditionals.html#Conditionals](http://gcc.gnu.org/onlinedocs/cpp/Conditionals.html#Conditionals)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-19T09:29:05.740

不。

变量在编译时没有值，只有在运行时。预处理器不在运行时运行，仅在编译时运行。

此外，预处理器不解析语言，它只处理文本。它不知道您的变量声明。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-19T10:25:47.717

如果您必须获得它的价值，请尝试仅预处理有潜在错误的文件。

```
 for gcc: gcc -E 
```

然后您可以手动检查它的扩展内容。

# java - 返回新生成的id restful service post

> ID：12971236
> 
> 赞同：3
> 
> 时间：2012-10-19T09:27:23.117
> 
> 标签：java, web-services, rest, jersey, jax-rs

我正在尝试在我的 REST Web 服务中编辑我的 create 方法，以便它应该从对象返回新创建的 ID。过去两天我一直在尝试，但我一定是做错了什么……

这是服务器端编辑后的创建方法：

```
@POST
@Consumes({"application/xml", "application/json"})
@Path("withID")
@Produces("text/plain")
public String create2(Users entity) {
    getEntityManager().persist(entity);
    getEntityManager().flush();
    System.out.println("new id: " + entity.getId());
    return String.valueOf(entity.getId());
} 
```

它基于（由 netbeans）生成的 count() 方法，如下所示：

```
@GET
@Path("count")
@Produces("text/plain")
public String countREST() {
    return String.valueOf(super.count());
} 
```

如果我从我的客户那里请求添加一个新的用户对象，它会按预期工作。新用户正在添加到数据库中。在 GlassFish 服务器日志中，我看到 System.out.println 命令显示的新创建的 ID。但是，如果我通过 netbeans 中的 TestRestful Web 服务进行测试，将客户端生成的 XML 代码粘贴到正确的窗口并点击 TEST 按钮，我会收到**HTTP 状态 415 - 不支持的媒体类型**错误。

我做了一些研究，发现[了这个](https://stackoverflow.com/questions/797834/should-a-restful-put-operation-return-something)问题。所以我猜我应该返回一个 201 CREATED 状态的响应对象，而不是返回一个字符串，并调整标题或什么？我查看了 spring 示例，但由于我没有使用 spring，所以我不知道如何调整 create2 方法代码......但是我尝试了但我遗漏了一些部分：

```
@POST
@Consumes({"application/xml", "application/json"})
@Path("withID")
@Produces("text/plain") //should this change to application/xml?
public Response create2(Users entity) {
    getEntityManager().persist(entity);
    getEntityManager().flush();
    System.out.println("new id: " + entity.getId());

    //Response response = Response.created(... + "withID/" + entity.getId()); //response need an URI, can I get this through the entity object?

    return Response.status(200).entity(entity.getId().toString()).build();    
} 
```

我希望我走在正确的轨道上。对不起，很长的帖子，希望有人可以在这里帮助我。提前致谢！

**编辑：现在的工作示例：**

```
@POST
@Consumes({"application/xml"})
@Path("withID")
@Produces({"application/xml"})
public Response create2(Users entity) {
    getEntityManager().persist(entity);
    getEntityManager().flush();
    return Response.status(201).entity(entity.getId().toString()).build();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T09:45:54.100

我不知道 NetBeans 的东西，我们使用的是 Spring。但是返回一个 Response 对象是个好主意，我们总是这样做，我们还返回一个创建的 ID：

```
return Response.status(200).entity(createdObject.getId().toString()).build(); 
```

不支持的 MediaType 很烦人。当您提到客户端生成的 xml 数据时，不确定您在说什么。我们使用的是 JSON，即使响应只是一个简单的字符串，我们也会告诉 create 方法来生成 json：

```
@POST
@Consumes(MediaType.APPLICATION_JSON)
@Produces(MediaType.APPLICATION_JSON)
@Transactional
public Response create(T source) {
} 
```

我们在命令行上使用的简单测试：

```
$ curl -v -H "Accept: application/json" -H "Content-type: application/json" -X POST -d '{"id":95, "additional":"stuff..."}' "http://localhost:8080/rest/resource" 
```

好吧，祝你好运。看起来你在正确的轨道上。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T16:20:39.833

无需返回一些自定义 blob，只需使用协议即可。

因此，请考虑在您的响应中使用位置标头以及新资源的 uri。您正在做休息服务，所以您的 id 当然是 URI（对吗？）。

Jim Webber 写了一本很棒的关于设计 REST Web 服务的书，叫做 REST in Practice，它非常详细地解释了如何基于这样的简单原则设计 REST API。

# java - int枚举模式有什么用？

> ID：12971239
> 
> 赞同：1
> 
> 时间：2012-10-19T09:27:26.890
> 
> 标签：java, enums

java的int Enum模式有什么用？任何人都可以帮助我了解更多关于 int enum 模式的信息吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T09:31:59.780

int enum 模式（使用 of`static final int CONSTANT_NAME`而不是使用`enum`s）是一个历史产物。

最初，Java 不支持枚举，所以为了给方法等提供标志，这是唯一的方法。

它提供了现代枚举方法的一些好处：

*   它们提高了代码的可读性
*   它们可以在`switch`语句中使用

但它们也缺少一些重要功能

*   它们*不是*类型安全的
*   常数与它们的值相同；这意味着它们可以由编译器内联，并且您无法从序列化值中确定原始常量。

总结一下：如果您正在处理 Java 1.5+ 项目，请始终使用现代`enum`模式而不是经典的 int Enum 模式。

# java - 将 JPanel 传递给 CardLayout 时出现 NullPointerException

> ID：12971243
> 
> 赞同：2
> 
> 时间：2012-10-19T09:27:42.553
> 
> 标签：java, class, nullpointerexception, cardlayout

不久前，我问了一个类似的问题，关于在 JFrame 中为 JPanel 使用多个类，在对我的代码进行了很大改进之后，我现在遇到了 CardLayout 的障碍。

当我试图显示我的“2”屏幕时，我得到一个 NullPointerException，这只是一个 BaseScreen，我稍后将使用其他类来继承它的属性。更改此代码后，

```
final CardLayout cardL = new CardLayout(); 
```

从

```
CardLayout cardL; 
```

在我的构造函数之外，我现在没有出现任何 JPanel！

这是我的代码：

**登录类：**

```
/*Login Screen class for allowing
multiple levels of access and security*/

//Imports library files
import javax.swing.*;
import java.awt.event.*;
import java.awt.*;
import java.io.*;
import java.util.*;

//Creates a LoginScreen class that extends the JFrame library class
class LoginScreen extends JFrame {

    //Creates a swing components and CardLayout for organising JPanels
JFrame container = this;
JPanel cardScreen;
JPanel screen = new JPanel();
Image ProgramIcon = Toolkit.getDefaultToolkit().getImage("imageIco.png");
ImageIcon logo = new ImageIcon ("Logo.png");
JLabel icon = new JLabel(logo);
JLabel username = new JLabel("Username");
JLabel password = new JLabel("Password");
JTextField user = new JTextField(18);
JPasswordField pass = new JPasswordField(18);
JButton login = new JButton("Login");
JLabel errorInfo = new JLabel("");
int WIDTH = 800;
int HEIGHT = 500;
int currentPanel = 1;

public static void main(String[] args){
//Sets the GUI (Look and Feel) to the NimROD theme
    try {UIManager.setLookAndFeel("com.nilo.plaf.nimrod.NimRODLookAndFeel");}
    catch (UnsupportedLookAndFeelException e){ JOptionPane.showMessageDialog(null, "GUI Load Error: Unsupported");}
    catch (ClassNotFoundException e) { JOptionPane.showMessageDialog(null, "GUI Load Error: NimROD Missing");} 
    catch (InstantiationException e) { JOptionPane.showMessageDialog(null, "GUI Load Error: Instantiation Missing");} 
    catch (IllegalAccessException e) { JOptionPane.showMessageDialog(null, "GUI Load Error: Illegal Access"); } 

//Creates a new LoginScreen via the LoginScreen method
    LoginScreen LS = new LoginScreen();
}

public LoginScreen(){
//Adds the JPanel to the JFrame and set the JFrame's properties
//Sets the main JPanel to CardLayout platform and adds other JPanels it
    final CardLayout cardL = new CardLayout();
    cardScreen = new JPanel();
    cardScreen.setLayout(cardL);
    cardScreen.add(screen, "1");;
    BaseScreen base = new BaseScreen();
    cardScreen.add(base, "2");
    container.setIconImage(ProgramIcon);
    container.setTitle("Login");
    container.setSize(WIDTH,HEIGHT);
    container.setResizable(false);
    container.setVisible(true);
    container.add(screen);
    container.setDefaultCloseOperation(EXIT_ON_CLOSE);

//Place the components on the JPanel and set there absolute posistions
    screen.setLayout(null);
    screen.add(username);
    screen.add(password);
    screen.add(user);
    screen.add(pass);
    screen.add(login);
    screen.add(icon);
    Dimension iconSize = icon.getPreferredSize();
    Dimension usernameSize = username.getPreferredSize();
    Dimension passwordSize = password.getPreferredSize();
    Dimension loginSize = login.getPreferredSize();
    Dimension userSize = user.getPreferredSize();
    Dimension passSize = pass.getPreferredSize();
    username.setBounds(252,170,usernameSize.width,usernameSize.height);
    password.setBounds(495,170,passwordSize.width,passwordSize.height);
    user.setBounds(180,200,userSize.width,userSize.height);
    pass.setBounds(420,200,passSize.width,passSize.height);
    login.setBounds(375,250,loginSize.width,loginSize.height);
    icon.setBounds(250,50,iconSize.width,iconSize.height);

    login.addActionListener(new ActionListener() { 
        public void actionPerformed(ActionEvent ae) { 
            cardL.show(cardScreen,"2");
            }
        }); 
} 
```

**BaseScreen 类：**

```
import javax.swing.*;
import java.awt.event.*;
import java.awt.*;

class BaseScreen extends JPanel{

JPanel screen = this;
JButton logout = new JButton("Logout");
ImageIcon title = new ImageIcon("title.png");
JLabel header = new JLabel(title);

public BaseScreen(){

    screen.setVisible(true);
    screen.setLayout(null);
    screen.add(logout);
    screen.add(header);
    Dimension headerSize = header.getPreferredSize();
    Dimension logoutSize = logout.getPreferredSize();
    logout.setBounds(720,440,logoutSize.width,logoutSize.height);
    header.setBounds(0,0,headerSize.width,headerSize.height);

    ButtonHandler handle = new ButtonHandler();
    logout.addActionListener(handle);
}

    public class ButtonHandler implements ActionListener{

    public void actionPerformed(ActionEvent event){

        if (event.getSource() == logout){

        }
    }
  }

} 
```

提前感谢您的任何帮助/提示。

这是旧线程：[使用具有相同 JFrame 的多个类](https://stackoverflow.com/questions/12827202/using-multiple-classes-with-the-same-jframe)

编辑：

这是错误：

```
Exception in thread "AWT-EventQueue-0" java.lang.NullPointerException
at LoginScreen$1.actionPerformed(LoginScreen.java:84)
at javax.swing.AbstractButton.fireActionPerformed(AbstractButton.java:1995)
at javax.swing.AbstractButton$Handler.actionPerformed(AbstractButton.java:2318)
at javax.swing.DefaultButtonModel.fireActionPerformed(DefaultButtonModel.java:387)
at javax.swing.DefaultButtonModel.setPressed(DefaultButtonModel.java:242)
at javax.swing.plaf.basic.BasicButtonListener.mouseReleased(BasicButtonListener.java:236)
at java.awt.AWTEventMulticaster.mouseReleased(AWTEventMulticaster.java:272)
at java.awt.Component.processMouseEvent(Component.java:6288)
at javax.swing.JComponent.processMouseEvent(JComponent.java:3267)
at java.awt.Component.processEvent(Component.java:6053)
at java.awt.Container.processEvent(Container.java:2041)
at java.awt.Component.dispatchEventImpl(Component.java:4651)
at java.awt.Container.dispatchEventImpl(Container.java:2099)
at java.awt.Component.dispatchEvent(Component.java:4481)
at java.awt.LightweightDispatcher.retargetMouseEvent(Container.java:4577)
at java.awt.LightweightDispatcher.processMouseEvent(Container.java:4238)
at java.awt.LightweightDispatcher.dispatchEvent(Container.java:4168)
at java.awt.Container.dispatchEventImpl(Container.java:2085)
at java.awt.Window.dispatchEventImpl(Window.java:2478)
at java.awt.Component.dispatchEvent(Component.java:4481)
at java.awt.EventQueue.dispatchEventImpl(EventQueue.java:643)
at java.awt.EventQueue.access$000(EventQueue.java:84)
at java.awt.EventQueue$1.run(EventQueue.java:602)
at java.awt.EventQueue$1.run(EventQueue.java:600)
at java.security.AccessController.doPrivileged(Native Method)
at java.security.AccessControlContext$1.doIntersectionPrivilege(AccessControlContext.java:87)
at java.security.AccessControlContext$1.doIntersectionPrivilege(AccessControlContext.java:98)
at java.awt.EventQueue$2.run(EventQueue.java:616)
at java.awt.EventQueue$2.run(EventQueue.java:614)
at java.security.AccessController.doPrivileged(Native Method)
at java.security.AccessControlContext$1.doIntersectionPrivilege(AccessControlContext.java:87)
at java.awt.EventQueue.dispatchEvent(EventQueue.java:613)
at java.awt.EventDispatchThread.pumpOneEventForFilters(EventDispatchThread.java:269)
at java.awt.EventDispatchThread.pumpEventsForFilter(EventDispatchThread.java:184)
at java.awt.EventDispatchThread.pumpEventsForHierarchy(EventDispatchThread.java:174)
at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:169)
at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:161)
at java.awt.EventDispatchThread.run(EventDispatchThread.java:122) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T10:30:40.263

我不知道你的`NullPointerException`，但你的例子不起作用。

```
class LoginScreen extends JFrame 
```

很少需要从顶级容器扩展，例如`JFrame`，这是不必要的，只会使事情复杂化，请改用类似的东西`JPanel`并将其添加到您创建的框架中......

```
JFrame container = this; 
```

恕我直言，这是一个坏主意。它只是混淆了这个问题。如果你真的需要某种方式来引用父对象，`this`直接使用...

您在完成向框架添加组件之前调用`container.setVisible(true)`，这绝不是一个好主意。事实上，当我正确加载您的程序时（从 EDT 内开始），框架上什么也没有出现 - 但这可能是由于下一个问题......

你创造`cardScreen`，你创造`screen`，你添加`screen`，`cardScreen`然后你`screen`直接添加到框架中......这已经`screen`从`cardScreen`容器中有效地删除......这可能会解释你`NPE`。

`screen.setLayout(null)`这绝不是一个好主意。就个人而言，我无法忍受不可调整大小的框架，我知道有时会使用它们，但这并不意味着我需要喜欢它们。我想我可能会在没有充分理由的情况下停止回答使用空布局的问题：P

花时间学习和理解布局管理器，它们是 Swing 最强大的功能之一

*   [布局管理器的视觉指南](http://docs.oracle.com/javase/tutorial/uiswing/layout/visual.html)
*   [使用布局管理器](http://docs.oracle.com/javase/tutorial/uiswing/layout/using.html)

# javascript - JavaScript 结果未显示在同一页面中

> ID：12971244
> 
> 赞同：4
> 
> 时间：2012-10-19T09:27:43.057
> 
> 标签：javascript, innerhtml

```
function result()
{
    var a, b, c;
    a = 10;
    b = 20;
    c = a+b;
    document.write("The result of a+b is" + c);
}

<input type="button" value="Result" onclick=result();> 
```

我是 JavaScript 新手，我正在逐步学习。我试过上面的例子，它工作正常，但点击按钮后结果没有显示在同一个窗口上。

我应该使用innerHTML 吗？但是我不知道怎么用。并且使用innerHTML 对编程有好处吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-19T09:35:44.403

document.write 总是开始一个新页面，除非当前正在加载一个页面。当前页面完成加载后，任何 document.write 语句将写入要显示的下一个网页，而不是当前网页，因为该网页已经写入。

使用这样的 DOM 方法：

```
<script type="text/javascript">

    function result()
    {
        var a, b, c;
        a = 10;
        b = 20;
        c = a+b;
        document.getElementById('foo').innerHTML = "The result of a+b is" + c;
        return false
    }

</script>
<span id="foo"></span>
<input type="button" value="Result" onclick="return result();"> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-19T09:32:12.507

必须在页面完成加载之前调用任何 document.write() ，否则它将打开一个新页面（请参阅[此链接](http://javascript.about.com/library/blwrite.htm)以获取帮助）所以也许这就是你的问题

你可能想做类似的事情

```
function result()
{
    var a, b, c;
    a = 10;
    b = 20;
    c = a+b;
    var content = document.getElementById('result_div').innerHTML; 
    content += "The result is ..." ;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-19T09:34:16.550

改变方法结果：

```
function result()
{
var a, b, c;
a = 10;
b = 20;
c = a+b;
document.getElementById('result').innerHTML="The result of a+b is" + c;
} 
```

然后在正文中放入一个带有 id 结果的 div：

```
<div id="result"></div> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-19T10:01:55.827

尝试

```
function result()
{
    var a, b, c;
    a = 10;
    b = 20;
    c = a+b;
    var result = "The result of a+b is" + c;
    document.body.appendChild(document.createTextNode(result));
    document.body.appendChild(document.createElement("br"));
} 
```

这样，您无需创建额外的节点来保存结果数据。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-19T09:33:38.993

这会将结果写入一个单独的元素，而不会覆盖整个文档：

```
<script type="text/javascript">

    function result()
    {
        var a, b, c;
        a = 10;
        b = 20;
        c = a+b;
        var result = document.getElementById("result");
        result.innerHTML = "The result of a+b is" + c;    
    }

</script>

<input type="button" value="Result" onclick=result();>
​&lt;div id="result"></div>​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​ 
```

见[http://jsfiddle.net/AcTM2/](http://jsfiddle.net/AcTM2/)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-19T09:30:37.263

如果是出于调试目的，请使用`console.log(value)`，否则，是的，将值保存在`innerHTML`.

```
console.log("The result of a+b is" + c);
alert("The result of a+b is" + c); // For very old  browsers. 
```

使用`innerHTML`属性：

```
document.getElementById('{id}').innerHTML = "The result of a+b is" + c; 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-10-19T09:32:03.720

试试这个代码

```
function result()
{
    var a, b, c;
    a = 10;
    b = 20;
    c = a+b;
    console.log("The result of a+b is" + c);
} 
```

# mysql - 为什么 MySQL 的 MyISAM 引擎不支持外键？

> ID：12971246
> 
> 赞同：42
> 
> 时间：2012-10-19T09:27:58.670
> 
> 标签：mysql, database, innodb, myisam

我正在为我的学习编写一个网络应用程序，其中包括全文搜索和外键。

我在某处读过，MyISAM 引擎适合全文搜索，而 InnoDB 适合外键。

在这种情况下，我应该使用什么引擎以获得最佳性能？

*   为什么 MyISAM 不支持外键关系，而 InnoDB 支持？
*   为什么 MyISAM 支持全文搜索而 InnoDB 不支持？

* * *

## 回答 #1

> 赞同：49
> 
> 时间：2012-10-19T09:34:22.570

1.  > 请告诉我，在这种情况下，我必须使用什么引擎来提高性能？

    每个存储引擎的性能将取决于您执行的查询。但是，请注意，同一数据库中的不同表可以使用不同的存储引擎。

2.  > 为什么 MyISAM 引擎不支持外键关系而 InnoDB 支持？

    如[外键差异](http://dev.mysql.com/doc/en/ansi-diff-foreign-keys.html)下所述：

    > 在稍后阶段，还将为`MyISAM`表实现外键约束。

    因此，外键约束还没有在`MyISAM`.

**编辑**：由于该评论已从文档中删除，看来不再计划在`MyISAM`引擎中实现外键约束。

3.  > 为什么 MyISAM 引擎支持全文搜索而 InnoDB 不支持？

    如[MySQL 5.6 中的新增功能中所述](http://dev.mysql.com/doc/refman/5.6/en/mysql-nutshell.html)：

    > 您可以在表上创建`FULLTEXT`索引，并使用语法`InnoDB`查询它们。[`MATCH() ... AGAINST`](http://dev.mysql.com/doc/refman/5.6/en/fulltext-search.html#function_match)

    `InnoDB`因此，在MySQL 5.6中已经实现了全文搜索。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-11-10T14:35:55.500

I do remember the times when mysql had only myisam and innodedb was in development. MyIsam has no foreign keys because it is old system that does not support relations in database. It will never use foreign keys! To Use it you have innodb. If you don't need all stuff, like relations in DB, use MyISAM to get better performance.

# android - 检查记录是否存在，如果存在则更新，否则在PhoneGap中创建新记录？

> ID：12971248
> 
> 赞同：4
> 
> 时间：2012-10-19T09:28:02.413
> 
> 标签：android, sqlite, cordova, crud

我编写了一个代码，将记录的值插入 SQLite 数据库并显示它。

现在我要做的是检查我插入的记录是否存在？

如果记录存在，则更新它，否则创建一个新记录。

我怎样才能在PhoneGap中做到这一点？以下是我尝试过的代码：

```
<!DOCTYPE html>
<html>
    <head>
        <title>Contact Example</title>

        <script type="text/javascript" charset="utf-8" src="cordova-1.5.0.js"></script>
        <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.5.2/jquery.min.js"></script>
        <script type="text/javascript" charset="utf-8">

            //add listener when device ready
            document.addEventListener("deviceready", onDeviceReady, false);
            var db = window.openDatabase("Dummy_DB", "1.0", "Just a Dummy DB", 200000); //will create database Dummy_DB or open it

            //function will be called when device ready
            function insertdata(){
                //alert("hi");
                var name = $('#name').val();
                var passwd = $('#pwd').val();

                if(name == "")
                {
                    alert("Please enter name");
                }

                if(passwd == "")
                {
                    alert("Please enter Password");
                }
                if(name != "" && passwd != ""){
                db.transaction(populateDB, errorCB, successCB);
                }
            }

            function onDeviceReady(){
                document.getElementById("submit").addEventListener("click", insertdata, false);

            }

            //create table and insert some record
            function populateDB(tx) {
                tx.executeSql('CREATE TABLE IF NOT EXISTS Login (id INTEGER PRIMARY KEY AUTOINCREMENT, Name TEXT NOT NULL, Password TEXT NOT NULL)');
                //tx.executeSql('INSERT INTO SoccerPlayer(Name,Club) VALUES ("Alexandre Pato", "AC Milan")');
               // tx.executeSql('INSERT INTO SoccerPlayer(Name,Club) VALUES ("Van Persie", "Arsenal")');
                //tx.executeSql('DELETE FROM SoccerPlayer');
                var name = $('#name').val();
                var passwd = $('#pwd').val();

                tx.executeSql('INSERT INTO Login (Name,Password) VALUES ("'+name+'","'+ passwd +'")');
                $('#name').val('');
                $('#pwd').val('');

            }

            //function will be called when an error occurred
            function errorCB(err) {
               // alert("Error processing SQL: "+err.code);
            }

            //function will be called when process succeed
            function successCB() {
                alert("success!");
                db.transaction(queryDB,errorCB);
            }

            //select all from SoccerPlayer
            function queryDB(tx){
                tx.executeSql('SELECT * FROM Login',[],querySuccess,errorCB);
            }

            function querySuccess(tx,result){
                $('#SoccerPlayerList').empty();
                $.each(result.rows,function(index){
                       var row = result.rows.item(index);
                       $('#SoccerPlayerList').append('<li><a href="#"><h3 class="ui-li-heading">'+row['Name']+'</h3></a></li>');
                       });

                $('#SoccerPlayerList').listview();
            }

            </script>
    </head>
    <body>
        <div data-role="page">
                  <div data-role="header" data-position="fixed" data-theme="b">
                    <h1>Login</h1>
                  </div>
            <div>Name: <input type="text" id="name"></div>
            <div>Password: <input type="password" id="pwd"></div>
            <input type="submit" id="submit">
              <div data-role="content">
                     <ul id="SoccerPlayerList">
                            </ul>
                      </div>
                </div>
    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-19T12:23:02.470

一般来说，你必须搜索记录：

```
SELECT 1 FROM Login WHERE Name = '...' 
```

当你得到结果时，检查你是否得到了什么，并相应地做一个`INSERT`或`UPDATE`：

```
INSERT INTO Login(Name, Password) VALUES('...', '...')
-- or
UPDATE Login SET Password = '...' WHERE Name = '...' 
```

但是，SQLite 有一个扩展，允许您在插入记录时替换记录，否则会产生冲突。这要求您有一个`UNIQUE`约束，以便可以检测到冲突：

```
CREATE TABLE Login(..., Name TEXT NOT NULL UNIQUE, ...) 
```

然后，您可以使用以下命令：

```
INSERT OR REPLACE INTO Login(Name, Password) VALUES('...', '...') 
```

* * *

请注意，您永远不应该尝试将字符串直接放入 SQL 命令以避免格式问题（如果密码包含`"`？）和[SQL 注入](http://en.wikipedia.org/wiki/SQL_injection)攻击 - 当[Bobby Tables](http://xkcd.com/327/)尝试使用您的应用程序时会发生什么？相反，使用参数；像这样的东西：

```
db.transaction(function(tx) {
    var name = ...;
    var passwd = ...;
    tx.executeSql('INSERT OR REPLACE INTO Login(Name, Password) VALUES(?, ?)',
                  [name, passwd]);
}); 
```

# php - Doctrine2 ORM 选择更新

> ID：12971249
> 
> 赞同：21
> 
> 时间：2012-10-19T09:28:02.360
> 
> 标签：php, mysql, concurrency, doctrine

您能否建议一种如何`SELECT FOR UPDATE`使用 Doctrine 实施的方法？

我需要读取一个计数器值，然后在 PHP 代码中使用它，并在其他人（来自另一个进程）使用相同的值之前立即增加该值。

* * *

## 回答 #1

> 赞同：54
> 
> 时间：2013-07-18T11:07:16.823

显然，Doctrine 2 使用 LOCK IN SHARED MODE 和 MySQL 的悲观读锁，这与 SELECT FOR UPDATE 不同。

查看当前稳定版本的来源，在 Doctrine 中似乎没有这样做的本地方式（我不确定 Doctrine 团队为什么为 MySQL 选择这种类型的锁）。

我使用原生 SQL 作为解决方法，它可以映射到传统实体，就像使用 DQL 一样：

```
<?php
$rsm = new ResultSetMappingBuilder($this->_em);
$rsm->addRootEntityFromClassMetadata('Model_Record_Delivery', 'u');
$query = $this->_em->createNativeQuery("SELECT * FROM delivery WHERE id = :id FOR UPDATE", $rsm);
$query->setParameter("id", $id);
$result = $query->getOneOrNullResult(); 
```

# 更新

正如本杰明所指出的， PESSIMISTIC_WRITE 就是您要寻找的。

**使用 DQL**

```
<?php
$query = $this->em->createQuery('SELECT e
    FROM Application\Model\Entity\MyEntity e
    WHERE e = :id');

$query->setParameter("id", $id);
$query->setLockMode(\Doctrine\DBAL\LockMode::PESSIMISTIC_WRITE); 
```

**没有 DQL**

```
<?php
$entity = $em->find('Application\Model\Entity\MyEntity', $id, \Doctrine\DBAL\LockMode::PESSIMISTIC_WRITE); 
```

此外，您必须使用事务中的语句才能使其工作。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-21T04:42:02.687

## 锁定支持

Doctrine 2 实现了对实体的[锁定支持：](https://www.doctrine-project.org/projects/doctrine-orm/en/2.6/reference/transactions-and-concurrency.html#locking-support)

```
<?php
use Doctrine\DBAL\LockMode;
use Doctrine\ORM\OptimisticLockException;

$theEntityId = 1;
$expectedVersion = 184;

try {
    $entity = $em->find('User', $theEntityId, LockMode::OPTIMISTIC, $expectedVersion);

    // do the work

    $em->flush();
} catch(OptimisticLockException $e) {
    echo "Someone else has already changed this entity. Apply the changes again!";
} 
```

## 本机 sql

此外，您可以执行原始 SQL：

```
$em->getConnection()->exec('LOCK TABLES table_name WRITE;'); //lock for write access 
```

进而

```
$em->getConnection()->exec('UNLOCK TABLES;'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-02-01T15:01:53.640

警告任何从谷歌来到这里的人。

如果您在现有实体上使用 Doctrine 的 PESSIMISTIC_WRITE 锁，
则锁定后不会重新获取该实体。

所以这段代码：

```
$entity = $this->em->find(Product::class, $id);
// use the product for some read only code

// Later, Need to update product
$this->em->lock($entity, LockMode::PESSIMISTIC_WRITE);
$entity->setStock($entity->getStock() - 1);
$this->em->flush(); 
```

将在 SQL 中运行类似于以下代码的内容

```
SELECT t0.id AS id_1, t0.stock AS stock_2 FROM products t0 WHERE t0.id = ?; -- First fetch
SELECT 1 FROM products t0 WHERE t0.id = ? FOR UPDATE; -- Pessimistic lock, no data fetched
UPDATE products SET stock = ? WHERE id = ?; -- Update using old data 
```

这与根本不锁定任何东西的结果相同。

您需要在请求锁定的同时再次手动获取实体：

```
$entity = $this->em->find(Product::class, $id);
// use the product for some read only code

// Need to update product
$this->em->find(Product::class, $entity->getId(), LockMode::PESSIMISTIC_WRITE); // You dont need the return value, doctrine will update all loaded entities
$entity->setStock($entity->getStock() - 1);
$this->em->flush(); 
```

这是确保获得锁后，学说将更新其缓存以及实体对象本身的唯一方法。

既不`$em->lock()`，也`$em->refresh()`不会在这里工作。

# c# - 任务栏应用程序图标未更新

> ID：12971250
> 
> 赞同：1
> 
> 时间：2012-10-19T09:28:04.487
> 
> 标签：c#, icons, taskbar

我在任务栏有问题`icon`。
我必须根据性能更新我的应用程序图标。当我使用`.exe`文件运行程序时，在我的程序运行期间，任务栏上的图标会自动更新。

但是，当我发布程序时，图标永远不会改变，并且与我之前设置的图标保持一致`properties->application-> icon`。

另外，当应用程序运行时，如果我右键单击任务栏上的图标，然后单击在任务栏上固定该程序，然后再次在任务栏上取消固定该程序，我没有同样的问题。

但我不想每次都为我的应用程序执行此过程（从任务栏固定和取消固定）。
您对如何解决此问题有任何想法吗？

谢谢。

# android - Android让在listview中点击的东西到setText

> ID：12971252
> 
> 赞同：-2
> 
> 时间：2012-10-19T09:28:10.720
> 
> 标签：android

我有两个类，一个带有许多字符串的列表视图类和一个带有文本视图的类。我希望当我单击列表视图上的一个字符串时，第二个类开始并且其中的 textView 是 setText 到单击的项目..

我试过：

```
 @Override
      protected void onListItemClick(android.widget.ListView l, View v, int position, long id) 
      {
          super.onListItemClick(l, v, position, id);
          String item = (String) getListAdapter().getItem(position);
          Intent select = new Intent(LV.this, Main.class);
          startActivity(select);
      } 
```

在第二节课上

```
S.setText(LV.item); 
```

S 是文本视图

现在它显示为空..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T09:31:22.613

除非您在活动之间传递数据，否则您不会在另一个活动中以活动的一种方法获取数据。它们仅对一项活动在本地可用

用于`putExtra`将数据从一个活动发送到另一个活动。现在在第二个活动中接收该值并将其设置为 TextView 的文本

例如这里

在第一个活动中

```
Intent select = new Intent(LV.this, Main.class);
select.putExtra("item", item)
startActivity(select); 
```

在下一个活动中，收到这个

```
Bundle extras = getIntent().getExtras();
if (extras != null) {
    String value = extras.getString("item");
}

S.setText(value); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T09:35:59.773

`item`只是一个局部变量`onListItemClick()`，你不能像你尝试过的那样静态访问它。用于`Intent`将数据发送到另一个活动。

```
@Override
protected void onListItemClick(android.widget.ListView l, View v, int position, long id) 
{
    super.onListItemClick(l, v, position, id);
    String item = (String) getListAdapter().getItem(position);
    Intent select = new Intent(LV.this, Main.class);
    select.putExtra("itemClicked", item);
    startActivity(select);
} 
```

在您的第二个活动中，可能在`onCreate()`：

```
Bundle extras = getIntent().getExtras();
S.setText(extras.getString("itemClicked"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-19T09:36:55.887

要在活动之间发送数据，请使用：

```
@Override
  protected void onListItemClick(android.widget.ListView l, View v, int position, long id) 
  {
      super.onListItemClick(l, v, position, id);
      String item = (String) getListAdapter().getItem(position);
      Intent select = new Intent(LV.this, Main.class);
      select.putExtra("item", item);
      startActivity(select);
  } 
```

在另一个活动中使用这个

```
String item = getIntent().getStringExtra("item"); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-19T10:04:10.943

```
MainActivity

 String listview_array[]={"01634    ABOHAR","080 Bangalore","011 Delhi","Dell Inspiron"};
 lv.setAdapter(new ArrayAdapter<String>
    (MainActivity.this,
    android.R.layout.simple_list_item_1, listview_array));
    lv.setOnItemClickListener(new OnItemClickListener()
    {

        @Override
        public void onItemClick(AdapterView<?> arg0, View arg1, int arg2,
                long arg3) {
            for(int i=0;i<listview_array.length;i++)
            {
            if(arg2==i)
            {
                Intent t= new Intent("com.example.listviewsearch.detailview");
                t.putExtra("Extra", listview_array[arg2]);
                startActivity(t);
            }
            }

        }

    }); 
```

详细视图

```
TextView tv= (TextView) findViewById(R.id.tv1);
    Bundle extras = getIntent().getExtras(); 
    System.out.println("Get Intent done");
    if(extras !=null)
    {
        tv.setText(extras.getString("Extra").toString());

    } 
```

# compilation - 配置：错误：缺少 leptonica 库（在 MinGW 上构建 tesseract-ocr-3.01 时）

> ID：12971253
> 
> 赞同：9
> 
> 时间：2012-10-19T09:28:12.010
> 
> 标签：compilation, mingw, configure, tesseract

运行配置时失败

```
checking for leptonica... yes
checking for pixCreate in -llept... no
configure: error: leptonica library missing 
```

但我已经构建了 leptonica 1.69（下载源代码并运行`./configure && make install`）

* * *

**编辑**

我认为`configure: error: leptonica library missing`这有点误导，请注意它先说`checking for leptonica... yes`，然后失败`checking for pixCreate in -llept... no`。所以也许问题不在于缺少图书馆，而在于其他问题。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-10-19T11:37:16.627

[在阅读了这个](https://groups.google.com/forum/?fromgroups=#!topic/tesseract-ocr/4infrb1qBLA)和[这个](http://code.google.com/p/iulib/issues/detail?id=18)线程之后，我终于设法让它编译了。正确的步骤是：

```
./autogen.sh
export LIBLEPT_HEADERSDIR=/local/include
./configure --with-extra-libraries=/local/lib
make install 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2015-02-19T02:11:53.203

对于 leptonica 1.69，lib 重命名为 .libs，因此，参数为

```
export LIBLEPT_HEADERSDIR=<your_path>/leptonica-1.69/src
./autogen.sh
./configure --prefix= --with-extra-libraries=<your_path>/leptonica-1.69/src/.libs 
```

等等

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-19T10:06:08.853

也许这可以解决问题：

```
export LIBLEPT_HEADERSDIR=/usr-or-other/local/include 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-02-05T10:20:51.543

[FAQ](https://tesseract-ocr.github.io/tessdoc/FAQ)解决了这个问题，并为我在 Mac OSX 10.6.8 上使用 tesseract 3.02.02 工作。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2017-11-11T19:29:44.760

**我正在研究 redhat linux 7.2**。没有一个解决方案对我有用，我
在 config.log 中遇到以下错误。
*在 pkg-config 搜索路径中找不到软件包 lept。也许您应该将包含 `lept.pc' 的目录添加到 PKG_CONFIG_PATH 环境变量*

**PKG_CONFIG_PATH**
配置脚本使用 pkg-config 实用程序来检查包。
它无法找到 lept 包（虽然我已经单独安装了 leptonica）
通过设置 PKG_CONFIG_PATH 指向 lept.pc 所在的目录，我能够解决问题。
*导出 PKG_CONFIG_PATH=/usr/local/lib/pkgconfig*

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2014-05-02T22:53:17.720

除了 Leptonica 库之外，png、jpeg、tiff 库必须使用 CXX 和 CPP 标志传递给配置脚本。以非 root 身份运行配置 - 1\. LIBLEPT_HEADERSDIR=; 导出 LIBLEPT_HEADERSDIR；2\. CXXFLAGS="-ltiff -lpng -ljpeg" CPPFLAGS="-ltiff -lpng -ljpeg" ./configure --prefix= --with-extra-libraries=

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2015-11-04T19:46:10.267

就我而言，这个问题是由缺少编译器引起的。搜索`config.log`发现以下内容：

`./configure:17287: g++ -o conftest -I/Usr/local/include/leptonica -L/usr/local/lib conftest.cpp -llept >&5 ./configure: line 2040: g++ command not found`

跑步`apt-get install g++`解决了这个问题。[tesseract问题](https://github.com/tesseract-ocr/tesseract/issues/130)跟踪器中有一个关于此的问题。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2020-03-26T19:05:50.073

每个人的答案都会略有不同，具体取决于您的系统状态。

在较高级别上，`pkg-config`软件需要知道 leptonica 已安装。它在路径中搜索`.pc`具有 leptonica 包定义的文件。对于不同的人，该文件将位于不同的位置。

`locate`您可以在命令行中使用 Linux 实用程序找到它。`locate lept.pc`. （如果您最近完成了一些安装/卸载，您可能需要使用命令刷新定位实用程序数据库`updatedb`。）

无论在哪个目录中找到文件，都导出`PKG_CONFIG_PATH`为该目录（`export PKG_CONFIG_PATH=/usr/local/lib/pkgconfig`例如）。

然后你可以继续你的配置/构建。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2016-05-20T18:47:54.480

就我而言（对于 Ubuntu/Debian），我下载了最新的 leptonica 版本，但错误未修复。为了修复它，我使用 sudo **apt-get remove libleptonica-dev**删除了包“leptonica-dev” ，然后 tesseract 找到了从源代码安装的 leptonica 版本。

希望能帮助到你！

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2013-11-25T16:51:08.940

我在尝试从源代码编译时遇到了类似的问题，但没有使用 apt-get 安装 tesseract

```
sudo apt-get install tesseract-ocr 
```

* * *

## 回答 #11

> 赞同：-3
> 
> 时间：2013-06-05T05:42:56.543

`export LIBLEPT_HEADERSDIR=$dir/letonica168/include` `./autogen.sh` `./configure --prefix=$anotherdir --with-extra-libraries=/$dir/letonica168/lib` `make` `make install`

# c# - 如何检查/反汇编 Visual Studio 扩展

> ID：12971259
> 
> 赞同：15
> 
> 时间：2012-10-19T09:28:32.933
> 
> 标签：c#, .net, visual-studio-2010, visual-studio-extensions

我有一个 Visual Studio 扩展 (.vsix)，我想检查和/或最好反汇编它，因为它包含一些我想研究的源代码。

我正在使用 Visual C# 2010 Express Edition，但是如果存在这样的东西，我想要一个外部工具。

谁能建议我在哪里可以找到检查/拆卸扩展的工具？

谢谢。

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-10-19T09:43:29.010

`vsix`将文件的扩展名更改为`zip`，然后在它包含的 DLL 上使用您最喜欢的反汇编程序。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-10-19T10:18:47.010

如前所述，VS 插件只是美化的 zip-archives。将插件文件从 vsix 重命名为 zip，解压并反编译。我刚刚使用免费[的 Teleric Just Decompile](http://www.telerik.com/products/decompiler.aspx)完成了它，并从 nuget 包中获取了此代码：

```
protected virtual bool CollapseVersions
{
    get
    {
        SwitchParameter allVersions = this.AllVersions;
        if (allVersions.IsPresent)
        {
            return false;
        }
        else
        {
            return this.ListAvailable;
        }
    }
} 
```

很酷！

# java - Android中的SQLITE fetch语句不起作用

> ID：12971261
> 
> 赞同：1
> 
> 时间：2012-10-19T09:28:44.417
> 
> 标签：java, android, sql, sqlite, android-sqlite

除了我的 fetch 语句，我的 DBHelper 类中的所有东西都在工作。我得到一条红线查询。我在这里做错了什么？

```
public Cursor fetchAllItems() {
        return mDb.query(DATABASE_TABLE, new String[] { KEY_ITEM, KEY_PRIORITY,
                KEY_ROWID }, null, null);
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T09:37:10.033

Seems like you are missing to provide some extra `null`. See below:

```
public Cursor fetchAllItems() {
   return mDb.query(DATABASE_TABLE, new String[] {KEY_ITEM, KEY_PRIORITY,
          KEY_ROWID}, null, null, null, null, null);
} 
```

For more info, read the [docs](http://developer.android.com/reference/android/database/sqlite/SQLiteDatabase.html).

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T09:35:18.167

```
public Cursor fetchAllItems() {
return mDb.query("", new String[] { KEY_ITEM, KEY_PRIORITY,
        KEY_ROWID }, "", null, "", null, null); 
```

}

这将起作用

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-19T09:40:52.983

```
public Cursor fetchAllItems() {
    return mDb.query(DATABASE_TABLE, new String[] { KEY_ITEM, KEY_PRIORITY,
        KEY_ROWID }, null, null, null, null, null);
} 
```

您还可以在[此处](http://developer.android.com/reference/android/database/sqlite/SQLiteDatabase.html#query%28java.lang.String,%20java.lang.String%5B%5D,%20java.lang.String,%20java.lang.String%5B%5D,%20java.lang.String,%20java.lang.String,%20java.lang.String%29)阅读有关数据库的 API 参考。您可以在那里看到所有可用的功能。

# sql-server - 如何使用 SQL Server SMO 和 powershell 从哈希中设置数据库选项？

> ID：12971267
> 
> 赞同：1
> 
> 时间：2012-10-19T09:28:51.870
> 
> 标签：sql-server, sql-server-2008, powershell, smo

使用 SQL Server 2008 R2 和 Powershell 2.0

我创建了一个我想在 SQL Server 数据库中设置的选项哈希，如下所示：

```
$dbopts = @{
    "AutoCreateStatistics"=$true;
    "AutoUpdateStatistics"=$true;
    "AutoShrink"=$false;
    }; 
```

我想使用 SMO 在 SQL Server 数据库上设置这些选项。我创建了一个函数，它接受一个 SMO 数据库对象和 DatabaseOptions 哈希作为输入。

```
function setDatabaseOptions {
    param ($db, $opts);

    foreach ($opt in $db.DatabaseOptions) {
        # what to write here?

    }

} 
```

我想将哈希中的选项设置为数据库。不确定执行此操作的最佳方法。有什么建议么？一个例子，要明确设置一个选项，你会做

`$db.DatabaseOptions.AutoCreateStatistics = $true`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T13:01:32.800

在他最后的评论中没有不尊重 Shay 尝试枚举哈希表。

```
function setDatabaseOptions {      
param ($db, $opts)          
   foreach ($key in $opts.Keys) { $db.DatabaseOptions.$key = $opts[$key] }
   $db.DatabaseOptions.Alter()
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-19T11:52:47.157

您将正确的哈希项分配给数据库的属性。我不使用 SMO，但您可能还需要调用一种方法来应用更新。

```
function setDatabaseOptions {

    param ($db, $opts)

        $opt = $db.DatabaseOptions

        $opt.AutoCreateStatistics = $opts['AutoCreateStatistics']
        $opt.AutoUpdateStatistics = $opts['AutoUpdateStatistics']
        $opt.AutoShrink= $opts['AutoShrink']    
} 
```

# java - 将方法添加到多个文件的现有接口含义

> ID：12971269
> 
> 赞同：0
> 
> 时间：2012-10-19T09:28:53.650
> 
> 标签：java, eclipse, search, interface, refactoring

我正在做一个现有的项目。为了添加一些功能，我必须在一个接口中添加一个方法，现在因为方法是在接口中添加的，所以必须由所有实现它的类来实现。我在一个模块中进行了搜索，发现了 10 个实现该接口的类。但现在我将在其他模块和整个项目中搜索相同的内容。所以这有两个问题：

搜索实现该特定接口的类。

*   由于代码库很大，我无法在 Eclipse 中导入整个项目。
*   搜索实现接口的类，可以写成 :`Class A implements ChangedInterface`和`Class A implements B, ChangedInterface`，所以即使使用 grep 搜索也会很困难。

我想得到你的建议。

**编辑**：我无法避免在该界面中添加方法。代码库是 20 GB，在 eclipse 中导入对我来说看起来很困难。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T09:32:37.730

为什么要搜索？只需编译并查看错误。如果您还没有自动化构建过程，请修复它！此外，如果不是所有类都需要实现此方法，请尝试扩展接口而不是添加方法。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-19T09:37:07.450

```
public interface InterfaceA {
    ...
    ...
    public void newMethod();
}

public abstract class AbstractClassA implements InterfaceA {
   public void newMethod() {
      //do Stuff
   }
} 
```

And then change all `implements IntefaceA` to `extends AbstractClassA`, this way all inheriting classes will have the default implementation of newMethod.

Also in case the methods do not differ you will avoid duplicate code.

# android - 在 android 中集成 twitter 时出现异常

> ID：12971272
> 
> 赞同：1
> 
> 时间：2012-10-19T09:29:05.393
> 
> 标签：android, twitter, integration, twitter-oauth

我已经编写了将 Twitter 集成到 android 中的代码。我得到了第一个 scrren，当我向 twitt 写一些消息并单击 twitt 按钮时，我得到了以下异常，因为与服务提供商的 OauthCommunication 异常通信失败。我已经正确输入了消费者密钥消费者秘密。

```
Public class MainActivity extends Activity {
    private static final String TAG = "TwitterDemo";
    private static final String CONSUMER_KEY = "xxx";
    private static final String CONSUMER_SECRET = "xxx";
    private static final String CALLBACK_SCHEME = "twitter-OAUTH-test-app";
    private static final String CALLBACK_URL = CALLBACK_SCHEME + "://callback";
    private static final String TWITTER_USER = "androidtestacc1@gmail.com";

    private OAuthSignpostClient oauthClient;
    private OAuthConsumer mConsumer;
    private OAuthProvider mProvider;
    private Twitter twitter;
    SharedPreferences prefs;
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        mConsumer = new CommonsHttpOAuthConsumer(CONSUMER_KEY, CONSUMER_SECRET);

        mProvider = new DefaultOAuthProvider(
                "http://api.twitter.com/oauth/request_token",
                "http://api.twitter.com/oauth/access_token",
                "http://api.twitter.com/oauth/authorize");

        prefs = PreferenceManager.getDefaultSharedPreferences(this);
        String token = prefs.getString("token", null);
        String tokenSecret = prefs.getString("tokenSecret", null);
        if (token != null && tokenSecret != null) {
            mConsumer.setTokenWithSecret(token, tokenSecret);
            oauthClient = new OAuthSignpostClient(CONSUMER_KEY,
                    CONSUMER_SECRET, token, tokenSecret);
            twitter = new Twitter(TWITTER_USER, oauthClient);
        } else {
            Log.d(TAG, "onCreate. Not Authenticated Yet " );
            new OAuthAuthorizeTask().execute();
        }
    }

    class OAuthAuthorizeTask extends AsyncTask<Void, Void, String> {

        @Override
        protected String doInBackground(Void... params) {
            String authUrl;
            String message = null;
            Log.d(TAG, "OAuthAuthorizeTask mConsumer: " + mConsumer);
            Log.d(TAG, "OAuthAuthorizeTask mProvider: " + mProvider);
            try {
                authUrl = mProvider.retrieveRequestToken(mConsumer,
                        CALLBACK_URL);
                Intent intent = new Intent(Intent.ACTION_VIEW,
                        Uri.parse(authUrl));
                startActivity(intent);
            } catch (OAuthMessageSignerException e) {
                message = "OAuthMessageSignerException";
                e.printStackTrace();
            } catch (OAuthNotAuthorizedException e) {
                message = "OAuthNotAuthorizedException";
                e.printStackTrace();
            } catch (OAuthExpectationFailedException e) {
                message = "OAuthExpectationFailedException";
                e.printStackTrace();
            } catch (OAuthCommunicationException e) {
                message = "OAuthCommunicationException";
                e.printStackTrace();
            }

            return message;
        }
        protected void onPostExecute(String result) {
            super.onPostExecute(result);
            if (result != null) {
                Toast.makeText(MainActivity.this, result,
                        Toast.LENGTH_LONG).show();
            }
        }
    }

    public void tweet(View view) {
        if (twitter == null) {
            Toast.makeText(this, "Authenticate first", Toast.LENGTH_LONG)
            .show();
            return;
        }
        EditText status = (EditText) findViewById(R.id.editTextTweet);
        new PostStatusTask().execute(status.getText().toString());
    }
    class PostStatusTask extends AsyncTask<String, Void, String> {
        @Override
        protected String doInBackground(String... params) {
            try {
                twitter.setStatus(params[0]);
                return "Successfully posted: " + params[0];
            } catch (TwitterException e) {
                e.printStackTrace();
                return "Error connecting to server.";
            }
        }

        @Override
        protected void onPostExecute(String result) {
            super.onPostExecute(result);
            Toast.makeText(MainActivity.this, result,
                    Toast.LENGTH_LONG).show();
        }

    }

    /* Responsible for retrieving access tokens from twitter */
    class RetrieveAccessTokenTask extends AsyncTask<String, Void, String> {

        @Override
        protected String doInBackground(String... params) {
            String message = null;
            String oauthVerifier = params[0];
            try {
                // Get the token
                Log.d(TAG, " RetrieveAccessTokenTask mConsumer: " + mConsumer);
                Log.d(TAG, " RetrieveAccessTokenTask mProvider: " + mProvider);
                Log.d(TAG, " RetrieveAccessTokenTask verifier: " + oauthVerifier);
                mProvider.retrieveAccessToken(mConsumer, oauthVerifier);
                String token = mConsumer.getToken();
                String tokenSecret = mConsumer.getTokenSecret();
                mConsumer.setTokenWithSecret(token, tokenSecret);

                Log.d(TAG, String.format(
                        "verifier: %s, token: %s, tokenSecret: %s", oauthVerifier,
                        token, tokenSecret));

                // Store token in prefs
                prefs.edit().putString("token", token)
                .putString("tokenSecret", tokenSecret).commit();

                // Make a Twitter object
                oauthClient = new OAuthSignpostClient(CONSUMER_KEY,
                        CONSUMER_SECRET, token, tokenSecret);
                twitter = new Twitter(null, oauthClient);

                Log.d(TAG, "token: " + token);
            } catch (OAuthMessageSignerException e) {
                message = "OAuthMessageSignerException";
                e.printStackTrace();
            } catch (OAuthNotAuthorizedException e) {
                message = "OAuthNotAuthorizedException";
                e.printStackTrace();
            } catch (OAuthExpectationFailedException e) {
                message = "OAuthExpectationFailedException";
                e.printStackTrace();
            } catch (OAuthCommunicationException e) {
                message = "OAuthCommunicationException";
                e.printStackTrace();
            }
            return message;
        }

        @Override
        protected void onPostExecute(String result) {
            super.onPostExecute(result);
            if (result != null) {
                Toast.makeText(MainActivity.this, result,
                        Toast.LENGTH_LONG).show();
            }
        }
    }

    /*
     * Callback once we are done with the authorization of this app with
     * Twitter.
     */
    @Override
    public void onNewIntent(Intent intent) {
        super.onNewIntent(intent);
        Log.d(TAG, "intent: " + intent);

        // Check if this is a callback from OAuth
        Uri uri = intent.getData();
        if (uri != null && uri.getScheme().equals(CALLBACK_SCHEME)) {
            Log.d(TAG, "callback: " + uri.getPath());

            String verifier = uri.getQueryParameter(OAuth.OAUTH_VERIFIER);
            Log.d(TAG, "verifier: " + verifier);
            Log.d(TAG, " xxxxxxxxxxx mConsumer access token: " + mConsumer.getToken());
            Log.d(TAG, " xxxxxxxxxxxx mConsumer access token secret: " + mConsumer.getTokenSecret());
            Log.d(TAG, " xxxxxxxxxxxxx OAuth.OAUTH_TOKEN: " + OAuth.OAUTH_TOKEN);
            Log.d(TAG, " xxxxxxxxxxxxx OAuth.OAUTH_TOKEN_SECRET: " + OAuth.OAUTH_TOKEN_SECRET);

            new RetrieveAccessTokenTask().execute(verifier);
        }
    }

    public void logout(View view){

        SharedPreferences.Editor editor = prefs.edit();
        editor.putString("token", null);
        editor.putString("tokenSecret", null);
        editor.commit();
        finish();
    }

} 
```

错误

```
10-19 15:18:55.424: W/System.err(995): oauth.signpost.exception.OAuthCommunicationException: Communication with the service provider failed: http://api.twitter.com/oauth/request_token
10-19 15:18:55.424: W/System.err(995):  at oauth.signpost.AbstractOAuthProvider.retrieveToken(AbstractOAuthProvider.java:214)
10-19 15:18:55.438: W/System.err(995):  at oauth.signpost.AbstractOAuthProvider.retrieveRequestToken(AbstractOAuthProvider.java:69)
10-19 15:18:55.655: W/System.err(995):  ... 9 more 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T09:32:30.743

尝试在您的应用中整合 twitter 的另一种方法

1.  使用 auth & webview（Twitter4j 库）

[http://davidcrowley.me/?p=410](http://davidcrowley.me/?p=410)

[http://www.mokasocial.com/2011/07/writing-an-android-twitter-client-with-image-upload-using-twitter4j/](http://www.mokasocial.com/2011/07/writing-an-android-twitter-client-with-image-upload-using-twitter4j/)

代码（网址在网页视图中打开）

```
 twitter =  new TwitterFactory().getInstance();
   twitter.setOAuthConsumer(TwitterConstants.CONSUMER_KEY,
        TwitterConstants.CONSUMER_SECRET);
    RequestToken requestToken = null;
    try {
        requestToken = twitter.getOAuthRequestToken();
        System.out.println("requesttoken"+requestToken);
    } catch (TwitterException e) {
        e.printStackTrace();
    }

    twitterUrl = requestToken.getAuthorizationURL();

    ConfigurationBuilder builder = new ConfigurationBuilder();
  builder.setOAuthAccessToken(TwitterConstants.ACCESS_TOKEN);
  builder.setOAuthAccessTokenSecret(TwitterConstants.ACCESS_TOKEN_SECRET);
  builder.setOAuthConsumerKey(TwitterConstants.CONSUMER_KEY);
  builder.setOAuthConsumerSecret(TwitterConstants.CONSUMER_SECRET);
  OAuthAuthorization auth = new OAuthAuthorization(builder.build());
  twitter = new TwitterFactory().getInstance(auth);

   try {
    twitter.updateStatus("Hello World!");

    } catch (TwitterException e) {
     System.err.println("Error occurred while updating the status!");

    } 
```

2.在按钮点击（无身份验证）

```
 String message="";
            Intent i = new Intent(Intent.ACTION_VIEW);
            i.setData(Uri.parse("http://twitter.com/?status=" + Uri.encode(message)));
            startActivity(i); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T09:32:31.350

请在您的清单文件中添加以下权限

```
<uses-permission android:name="android.permission.INTERNET"/> 
```

也检查这个链接....

[http://www.android10.org/index.php/articleslibraries/291-twitter-integration-in-your-android-application](http://www.android10.org/index.php/articleslibraries/291-twitter-integration-in-your-android-application)

# iphone - 在 popview 上调用 Viewdid 加载方法

> ID：12971280
> 
> 赞同：0
> 
> 时间：2012-10-19T09:29:39.997
> 
> 标签：iphone, ios, uiview, popviewcontroller

在我的应用程序中，我在 View1 的视图 load() 中设置了一些动画，首先启动它的工作正常，如果我推入其他视图，并且当弹出到 view1 时它没有动画，当从其他视图弹出视图时我应该为动画做什么？这里我的观点确实加载了代码，

```
 - (void)viewDidLoad
{
artext=[[NSMutableArray alloc] init];
arimage=[[NSMutableArray alloc] init];
arsound=[[NSMutableArray alloc] init];

[super viewDidLoad];
[self copysqlitetodocuments];
[self Readthesqlitefile];   
self.view.backgroundColor = [UIColor colorWithPatternImage:[UIImage     imageNamed:@"classroom.png"]];

} 
```

我试过了

```
 - (void)viewDidAppear:(BOOL)animated
 {
 [self buttonmover];
 [super viewDidAppear:animated];
  } 
```

它不起作用，任何人都可以帮我解决这个问题

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T09:34:15.407

当您的 viewDidLoad 方法被调用时，控制器还没有在视图层次结构中，所以动画不起作用。

在实现方法**[super viewWillAppear]**之后，您必须在**viewWillApper**中执行动画。就像是：

 **```
- (void)viewDidAppear:(BOOL)animated {
    [super viewDidAppear:animated];

    artext = [[NSMutableArray alloc] init];
    arimage = [[NSMutableArray alloc] init];
    arsound = [[NSMutableArray alloc] init];

    [self copysqlitetodocuments];
    [self Readthesqlitefile];   
    self.view.backgroundColor = [UIColor colorWithPatternImage:[UIImage imageNamed:@"classroom.png"]];

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T09:33:37.183

尝试在 viewWillAppear 中

```
 -(void)viewWillAppear:(BOOL)animated
 {
  artext=[[NSMutableArray alloc] init];
  arimage=[[NSMutableArray alloc] init];
  arsound=[[NSMutableArray alloc] init];

  [self copysqlitetodocuments];
  [self Readthesqlitefile];   
  self.view.backgroundColor = [UIColor colorWithPatternImage:[UIImage imageNamed:@"classroom.png"]];

 } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-19T09:32:13.443

如果您想在视图出现时执行代码（例如动画），`-viewDidLoad`那么这样做是错误的。

您可能应该使用：

```
- (void)viewDidAppear:(BOOL)animated {
    [super viewDidAppear:animated];
    // ...
} 
```**

# linux - 客户端证书 clientcert.pem 尚未激活

> ID：12971281
> 
> 赞同：0
> 
> 时间：2012-10-19T09:29:56.507
> 
> 标签：linux, certificate, ssl

我正在尝试从客户端连接管理程序。我按照文档[安装文档](http://wiki.libvirt.org/page/TLSSetup)

但是当我运行命令来测试连接时

`virsh -c qemu+tls://host1/system hostname`

我得到了错误

```
error: The client certificate /etc/pki/libvirt/clientcert.pem is not yet active
error: failed to connect to the hypervisor 
```

如何激活证书？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-09-30T11:47:18.770

检查您的 kvm-server 中的时钟。此消息表示您的证书尚未激活（由于证书中的时间戳在未来考虑到您的服务器的时钟）->因此您在创建证书的 pc 上的时钟设置错误（并且因此在证书中）或 kvm 服务器上的时钟设置错误。如果您设置时钟，则连接将起作用。

# c++ - 函数 waveOutUnprepareHeader 返回错误 33 WAVERR_STILLPLAYING

> ID：12971286
> 
> 赞同：1
> 
> 时间：2012-10-19T09:30:13.477
> 
> 标签：c++, windows, audio

我运行以下代码：

```
void SoundOut()
{
    HWAVEOUT wo;
    WAVEHDR whdr;
    whdr.dwBufferLength = std::vector<SampleType>::size() * m_format.nBlockAlign;
    whdr.lpData = reinterpret_cast<LPSTR>(&(std::vector<SampleType>::front()));
    whdr.dwFlags = 0;
    cout << "waveOpen result " << waveOutOpen(&wo, WAVE_MAPPER, &m_format, 0, 0, CALLBACK_NULL) << endl;;
    cout << "waveOutPrepareHeader" << waveOutPrepareHeader(wo, &whdr, sizeof(WAVEHDR)) << endl;;
    cout << "waveOutWrite" << waveOutWrite(wo, &whdr, sizeof(WAVEHDR)) << endl;;
    cout << "waveOutUnprepareHeader" << waveOutUnprepareHeader(wo, &whdr, sizeof(WAVEHDR)) << endl;;
    cout << "waveOutClose" << waveOutClose(wo) << endl;;
}; 
```

标准输出如下所示：

```
waveOpen result 0
waveOutPrepareHeader 0
waveOutWrite 0
waveOutUnprepareHeader 33
waveOutClose 33 
```

根据 SOUNDWIN.H 文件，代码 33 表示 WAVERR_STILLPLAYING。但是没有听到任何声音，waveOutWrite 立即返回（将 88000 个样本写入声卡）。建议这个立即返回意味着代码 33，但是为什么 waveOutWrite 立即返回并且什么也没听到？
通常，为什么 waveOutWrite 成功完成并且没有任何声音？
去哪里看？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T10:23:01.497

您应该准备一次缓冲区，然后在播放完成时取消准备它们。缓冲区可以在两者之间重复使用，但在播放的同时准备/取消准备缓冲区通常不是一个好主意。

问题来自这样一个事实，即当您写入数据时会立即排队等待播放（请记住，waveOut API 仅是仿真/兼容层），但是缓冲区稍后会在延迟回调中返回。请参阅关于此的[WOM_DONE 消息](http://msdn.microsoft.com/en-us/library/windows/desktop/dd757752%28v=vs.85%29.aspx)。仅当 API 不再使用缓冲区时才允许取消准备。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-08-06T09:36:47.403

您开始播放缓冲区并尝试立即释放它......您应该在清理所有内容（waveOutUnprepareHeader，waveOutClose）之前停止声音（调用waveOutStop或waveOutReset）。无论如何，如果您想听到任何声音，您应该稍后在另一个函数中停止声音（或者至少在停止声音之前插入睡眠）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-03-18T10:59:26.550

我通过轮询声音播放和延迟解决了这个问题：

```
WAVEHDR header = { buffer, sizeof(buffer), 0, 0, 0, 0, 0, 0 };
waveOutPrepareHeader(hWaveOut, &header, sizeof(WAVEHDR));
waveOutWrite(hWaveOut, &header, sizeof(WAVEHDR));
/*
* wait a while for the block to play then start trying
* to unprepare the header. this will fail until the block has
* played.
*/
while (waveOutUnprepareHeader(hWaveOut,&header,sizeof(WAVEHDR)) == WAVERR_STILLPLAYING) 
Sleep(100);
waveOutClose(hWaveOut); 
```

[在 Windows 中使用 waveOut 接口播放音频](https://www.planet-source-code.com/vb/scripts/ShowCode.asp?txtCodeId=4422&lngWId=3)

# java - 获取 Mule ESB 以打印字段列表

> ID：12971288
> 
> 赞同：2
> 
> 时间：2012-10-19T09:30:32.697
> 
> 标签：java, esb, mule

我在将来自 POJO 的字段指定为集合拆分器的列表时遇到问题，然后尝试在记录器中引用它们。

我试过了

标题：入站：字段名 message.payload.fieldname 有效负载：字段名有效负载.字段名等

有没有办法让骡子在收到消息时打印出可用字段的列表，这样我就可以只看东西并复制正确的而不是猜测？

谢谢

汤姆

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T10:08:20.830

啊，多一点调查，我发现访问 POJO 中的字段我需要类似的东西： `#[ognl:fieldname]`

它的血腥神秘的东西。

汤姆

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-19T14:54:13.507

如果您使用的是 Mule 3.3.0 或更高版本，请使用`#[message.payload.fieldname]`.

# java - 如何将 javadocs 附加到 Eclipse Java EE Juno？

> ID：12971291
> 
> 赞同：1
> 
> 时间：2012-10-19T09:30:39.183
> 
> 标签：java, eclipse, javadoc, eclipse-juno

我从这里下载了 Eclipse Java EE juno [http://www.eclipse.org/downloads/packages/eclipse-ide-java-ee-developers/junosr1](http://www.eclipse.org/downloads/packages/eclipse-ide-java-ee-developers/junosr1)

我也有 javadocs：jdk-6u25-fcs-bin-b04-apidocs-04_Apr_2011

现在我想将这些 javadocs 附加到 Eclipse，但不幸的是，经过大量搜索和尝试，我无法做到这一点。如何将 javadocs 附加到 Eclipse？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T11:15:42.407

在 Eclipse 中：Window -> Preferences -> Java -> Installed JREs -> Edit。在那里，您应该能够为 jar 选择 javadoc 位置。

# php - 如何使用 Zend Service Amazon 进行 ItemLookup？

> ID：12971292
> 
> 赞同：1
> 
> 时间：2012-10-19T09:30:39.370
> 
> 标签：php, api, codeigniter, amazon, zend-framework2

如果有人能指导我使用 Zend Amazon 服务模块（使用 Zend 2.0）按 ISBN 进行 ItemLookup 的正确方法，我将不胜感激。

这是我的尝试：

```
 $query  = new ZendService\Amazon\Query($appId, 'UK', $secretKey);
    $query->Category('Books')->IdType('ISBN')->ItemID('978-0321784070')->AssociateTag($tag);
    $result = $query->ItemLookup(); 
```

但我收到以下错误：

*   ZendService\Amazon\Amazon::itemLookup() 缺少参数 1，在第 122 行的 D:\wamp\www\site\controllers\dev.php 中调用并定义
*   未定义变量：asin

我无法定义 ASIN，因为我将拥有的唯一信息是 ISBN。

我已经在 zend 框架网站上查阅了 Zend Service Amazon 用户指南，但它已经过时并且没有演示如何进行 ISBN 查找。我还查看了 zend amazon 软件包附带的演示，但仅详细说明了如何进行项目搜索，而不是查找。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-19T16:11:21.893

这是一种让 ISBN 搜索工作的方法，我也花了一点时间才弄明白。问题是为了搜索 ISBN，您必须使用`ItemLookup`方法而不是`ItemSearch`方法设置的`query()`方法。

可能有更好的方法可以使用 OO 接口使其工作，但我还没有尝试过。

```
$query  = new ZendService\Amazon\Query($appId, 'US', $secretKey);
$item   = $query->itemLookup('9780321784070',
                             array('SearchIndex'   => 'Books',
                                   'AssociateTag'  => $tag,
                                   'IdType'        => 'ISBN',
                                   'ResponseGroup' => 'Small',)); 
```

按 ISBN 搜索应返回单个`ZendService\Amazon\Item`对象而不是结果数组。另请注意，如果您按 ISBN-13 搜索，则需要`-`从数字中删除 ，否则将找不到匹配项。

归功于 Manas Tungare的这篇[博](http://manas.tungare.name/blog/howto-obtain-metadata-for-a-book-given-its-isbn-using-amazon-web-services-in-php/)文，它向我暗示我们需要使用 ItamLookup 而不是 ItemSearch。

# css - Firefox中输入的框大小隐藏文本

> ID：12971300
> 
> 赞同：20
> 
> 时间：2012-10-19T09:31:04.020
> 
> 标签：css, firefox

我在应用`-moz-box-sizing : border-box;`输入时遇到了 Firefox 问题，似乎我输入的文本在某个地方隐藏或溢出或其他东西。

您可以在这里看到问题：[测试](http://rolandgroza.com/labs/vertica/spf/login.html)（将窗口大小调整为小于 980 像素，因为它是移动版本）；

那么那里可能是什么问题？因为我尝试了所有我能找到的东西，唯一有效的是删除该`-moz-box-sizing : border-box;`属性（：

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2012-10-19T09:47:04.783

您应该将高度设置为 100%。我为您的输入字段尝试了以下 CSS，它有所帮助：

```
input[type="text"] {
    -moz-box-sizing: border-box;
    font-size: 16px;
    height: 100%;
    padding: 20px;
    width: 100%;
} 
```

==> 原因是，您的 20px 填充太多了。尝试首先删除填充。您会看到输入字段的文本突然变得可见；-)。看到这个后，我将高度设置为 100%。现在您可以将填充减少到例如 10 像素，一切看起来都很好。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-04-26T00:07:22.553

我遇到了这个问题，但最初是在 Safari 6+ 中。一些文本输入尊重顶部/底部填充，但其他文本输入没有并且最终更短。通过`height: 100%`按照这里的建议使用它们，它们确实变得一致并且似乎尊重填充顶部/底部。但是，它在高度上增加了几个额外的像素。

最后，我最终完成了`box-sizing: content-box`所有这些，这使它们尊重顶部/底部填充，但没有额外增加的高度像素。

不得不追赶这个`width: calc(100% - <padding L+R>)`，这是一个劣势。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-08-10T09:18:50.677

我通过为输入文本标签添加自定义填充以不同方式解决了这个问题

```
input[type="text"] {
  padding: 6px 12px 12px 6px;
}

input[type="email"] {
  padding: 6px 12px 12px 6px;
}

input[type="password"] {
  padding: 6px 12px 12px 6px;
} 
```

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2014-06-27T06:12:56.540

```
input[type="text"] {
padding-top:0;
padding-bottom:0;
vertical-align:middle;
} 
```

# python - 如何使用 Python 和 Scripting Bridge 将曲目添加到 iTunes 播放列表

> ID：12971306
> 
> 赞同：5
> 
> 时间：2012-10-19T09:31:22.963
> 
> 标签：python, cocoa, itunes, scripting-bridge

我在上一个问题中学习了如何创建播放列表，但现在我不知道如何向其中添加曲目。现在我有：

```
tracks.sort(key=lambda tup: tup[0])
i = 0
for trackList in generatePlaylists(tracks,10):
    i += 1
    playlistname = str(i)
    p = {'name': playlistname}
    playlist = iTunes.classForScriptingClass_("playlist").alloc().initWithProperties_(p)
    iTunes.sources()[0].playlists().insertObject_atIndex_(playlist, 0)

    # Find the playlist I just made
    for playlist in iTunes.sources()[0].playlists():
        if playlist.name() == playlistname:
            newPlaylist = playlist

    # Add the tracks to it
    for track in trackList:
        print track[1].name()
        iTunes.add_to_(track[1],newPlaylist) 
```

我的曲目在一个元组列表中`tracks`，其中元组的第一个元素是分数，第二个元素是实际的曲目对象。 `generatePlaylists`是一个迭代器，它将所有库轨道分成 10 个列表。

上面的代码运行没有错误，但在 iTunes 中播放列表是空的。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-19T18:47:43.420

首先，这是一个简短的答案：

```
track.duplicateTo_(newPlaylist) 
```

问题是`iTunes.add_to_`发送`add`命令，该命令接受一个文件（别名）并将其导入播放列表；您想发送`duplicate`命令，该命令接受任何对象并制作该对象的另一个副本。你没有文件，你有轨道。（您可以通过 获取文件`track.location()`，但您不想重新导入文件，只需复制曲目即可。）

此外，在这种情况下，您需要调用轨道上的方法，而不是在应用程序上调用它并将其传递给轨道。

如果不深入了解 iTunes 对象模型（以及它下面的 AE 模型），前半部分很难解释。但你并不需要真正理解它。在大多数情况下，通过查看 iTunes 脚本字典（在 AppleScript 编辑器中）和反复试验（在 AppleScript 编辑器中或使用 py-appscript），您可以弄清楚您想要什么。（只要确保您正在使用废品库，或者有备份……）在这种情况下，它可能的唯一命令是`add`、`copy`、`duplicate`或`move`，所以只需尝试所有这些命令，看看它们会做什么。或者，或者，去 dougscripts 下载一堆样本，然后找到一个你想要的。

后半部分，弄清楚如何翻译成 ScriptingBridge ……好吧，我无法解释它，除非你对 SB 长篇大论（如果你想读的话，它比我做得好得多）。但基本情况是这样的：就 iTunes 而言，`duplicate`它是一个命令。如果你给它一个直接对象 ( `tell application "iTunes" to duplicate theTrack to thePlaylist`) 它会使用它；如果不是，您是在要求主题复制自身 ( `tell theTrack to duplicate to thePlaylist`)。它的工作原理与英语完全一样。但是 SB 坚持面向对象的模型，其中`duplicate`是某个对象的方法。因此，这两种形式中只有一种会起作用。通常，您可以通过查看`dir(iTunes)`并`dir(track)`查看哪个具有看起来像您想要的命令的方法来确定哪个。

从上面可以看出，如果您尝试做任何复杂的事情，您将面临大量的试验和错误。祝你好运，继续问。

PS，我不知道为什么你的代码会默默地失败。该`add_to_`方法应该转换为命令的明显方式应该引发 -1708 错误（就像 appscript`iTunes.add(track, to=newPlaylist)`或 AppleScript`add theTrack to newPlaylist`一样......）。

# google-apps-script - 谷歌应用脚 本，删除文档共享权限

> ID：12971308
> 
> 赞同：1
> 
> 时间：2012-10-19T09:31:34.460
> 
> 标签：google-apps-script, google-docs-api

使用 URLFetchApp 从文档 ACL 中删除用户的共享权限...

下面是我的代码

```
 function removeSharing(docId,userToRemove)
    {
      var base = 'https://docs.google.com/feeds/default/';
      var fetchArgs = googleOAuthDeleteUser_('docs', base);
      var url = base+'private/full/'+docId+'/acl/'+encodeURIComponent(userToRemove);
      var content = UrlFetchApp.fetch(url, fetchArgs).getContentText(); 
      return 'ok';
    }
    function googleOAuthDeleteUser_(name,scope) {
        var oAuthConfig = UrlFetchApp.addOAuthService(name);
        oAuthConfig.setRequestTokenUrl("https://www.google.com/accounts/OAuthGetRequestToken?scope="+encodeURIComponent(scope));
        oAuthConfig.setAuthorizationUrl("https://www.google.com/accounts/OAuthAuthorizeToken");
        oAuthConfig.setAccessTokenUrl("https://www.google.com/accounts/OAuthGetAccessToken");
        oAuthConfig.setConsumerKey("anonymous");
        oAuthConfig.setConsumerSecret("anonymous");

        return {
                oAuthServiceName:name, 
                oAuthUseToken:"always",
                headers : {
                           "GData-Version": "3.0",
                           "If-Match":"*"
                }, 
                method : "DELETE",
                contentType : 'application/x-www-form-urlencoded'
        };
    } 
```

它给了我错误

> 请求返回代码 400 失败。服务器响应：GData`InvalidEntryException`发布的条目缺少一个或多个必填字段：范围

请帮忙解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-26T17:29:51.473

根据[API docs](https://developers.google.com/google-apps/documents-list/#removing_sharing_permissions)，您的参数应如下所示：

```
DELETE https://docs.google.com/feeds/default/private/full/resource_id/acl/user:new_writer@example.com 
```

如果 userToRemove 只有一个电子邮件地址，那么这可能是缺少的范围。

# bash - 字符串操作，可选字符

> ID：12971309
> 
> 赞同：7
> 
> 时间：2012-10-19T09:31:37.610
> 
> 标签：bash

使用`grep`，您可以使用问号`?`来表示可选字符，即要匹配 0 次或 1 次的字符。

```
$ foo=qwerasdf

$ grep -Eo fx? <<< $foo
f 
```

问题是 Bash 字符串操作是否有类似的功能？就像是

```
$ echo ${foo%fx?} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-19T09:42:29.967

您可能在谈论[参数扩展](http://www.gnu.org/software/bash/manual/bashref.html#Shell-Parameter-Expansion)。它使用 shell 模式，而不是正则表达式，所以~~答案是否定的~~。

进一步阅读后，我注意到如果你

```
shopt -s extglob 
```

您可以使用[扩展模式匹配](http://www.gnu.org/software/bash/manual/bashref.html#Pattern-Matching)，它可以实现类似于正则表达式的功能，尽管语法略有不同。

看一下这个：

```
word="mre"
# this returns true
if [[ $word == m?(o)re ]]; then echo true; else echo false; fi

word="more"
# this also returns true
if [[ $word == m?(o)re ]]; then echo true; else echo false; fi

word="mooooooooooore"
# again, true
if [[ $word == m+(o)re ]]; then echo true; else echo false; fi 
```

也适用于参数扩展，

```
word="noooooooooooo"
# outputs 'nay'
echo ${word/+(o)/ay}
# outputs 'nayooooooooooo'
echo ${word/o/ay} 
```

# c++ - C++ 函数参数列表中的 & 是什么意思？

> ID：12971310
> 
> 赞同：-4
> 
> 时间：2012-10-19T09:31:44.563
> 
> 标签：c++

> **可能重复：**
> [C++ 中的指针变量和引用变量有什么区别？](https://stackoverflow.com/questions/57483/what-are-the-differences-between-pointer-variable-and-reference-variable-in-c)
> [带有 & 符号的函数原型是什么意思？](https://stackoverflow.com/questions/9488894/what-does-a-function-prototype-mean-with-an-ampersand-in-it)

在我的理解中，

```
void bar(int &x) { ... } 
```

似乎意味着通过`x`引用传递。但是在 C++ 中，已经有指针等。那么有什么区别

```
void bar(int *x) { ... }
// then call by
bar(&x); 
```

除了它更长的事实......我还注意到如果我使用第二种方法，我需要使用`->`而不是`.`如果我传入一个`struct`......为什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-19T09:36:08.937

Stroustrup 给出对 C++ 的引用的原因是运算符重载。

[http://www.stroustrup.com/bs_faq2.html#pointers-and-references](http://www.stroustrup.com/bs_faq2.html#pointers-and-references)

在您的示例函数中，用户是否必须调用它（因为它需要一个指针）或可以调用它（因为它需要一个引用）`bar`都没有什么大不了的。至少，C 程序员认为不是。`bar(&x)``bar(x)`

然而，当 C++ 中添加运算符重载时，Stroustrup 认为使用带指针的重载运算符非常不雅（用他的话来说“丑陋”）。

引用在功能上比指针有一些优势，例如临时对象可以绑定到 const 引用，但您不能将`&`运算符应用于它。因此，与通过指针传递到常量的等效函数相比，传递常量引用函数有时会为调用者节省一行代码（以创建变量）。

出于这个原因，一个可能的约定是当您的函数计划将地址存储在某处以供将来使用时，它返回时接受一个指针，并在它没有时接受一个引用。它不会阻止创建悬空指针/引用的所有可能方法，但它会捕获一个大的。但是，在编写函数式代码时，它确实会产生不幸的后果，所以它并不适合所有人。

> 我还注意到，如果我使用第二种方法，我需要使用 -> 而不是 . 如果我传入一个结构......为什么？

它只是从 C. 继承的语法`.`来访问结构`->`的成员，通过指向结构的指针来访问成员。在 C 语言中，您*只能*`->`与 LHS 上的指针一起使用，而*永远不能*与 LHS 上的指针一起使用`.`。所以对不同的符号没有严格的要求，它只是有助于使代码更具可读性以具有提醒。例如，如果`.`两者使用相同的符号，则`(*ptr).member`表示相同的意思`ptr.member`，这可能会造成混淆。

在 C++ 中，这种差异对语言变得有用。您可以为类类型重载`operator->`，例如智能指针。但是类类型可以使用`.`. 所以`some_smart_ptr->get();`意味着“`get()`在智能指针的引用上调用函数”，而`some_smart_ptr.get()`意味着“`get()`在智能指针上调用函数”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-19T09:37:03.377

A reference is a basically pointer with a constant address, so it has the same effect as calling by address. It's mainly a difference of syntax: calling by reference is more convenient since from the call site it's as if you were calling by value (except you have to be careful with temporaries).

# arrays - KSH 错误：“$”意外

> ID：12971321
> 
> 赞同：1
> 
> 时间：2012-10-19T09:32:14.053
> 
> 标签：arrays, ksh

下面的 KSH 脚本导致错误“第 4 行的语法错误：'$' 意外”

```
!#/bin/ksh
for i in `cat pins.list`
do
        set -A array_${i} `grep -i "$i " pins.txt | awk '{print $2}'`
        echo "Elements of array_${i} are ${array_${i}[@]}"
done

#================================= 
```

在解析文件 pin.txt 之后，我正在为 i 的每次迭代创建多个数组 (array_$i)。
我可以看到创建的数组 array_block 、 array_group 、 array_range 以及正确存储在这些数组中的 pins.txt 的元素，但是由于这个错误，我无法打印每个数组的值。在循环外打印这 3 个数组的内容没有问题。但是我需要在循环中访问这些数组以便在我的脚本中进行进一步处理。有没有办法解决这个问题？

pin.list和pins.txt的内容如下：

```
pins.list (Arrays)
==================
block
group
range

pins.txt
===========

range     444
group     46
range     32
block     96
group     99
range     123
block     56
range     22 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T11:28:42.887

您不能以这种方式创建动态变量名，您需要`eval`. 例如：

```
while read i
do
    eval "set -A array_${i} \$(grep -i $i pins.txt | awk '{print $2}')"
    eval "echo \"Elements of array_${i} are \${array_${i}[@]}\" "
done < pins.list 
```

我已从`for`循环更改为 a `while`，这是读取文件而不是使用的另一种方法`cat`（另外，请检查您的 #! 行）。

# jquery - 切换 CSS 过渡

> ID：12971332
> 
> 赞同：0
> 
> 时间：2012-10-19T09:32:54.517
> 
> 标签：jquery, html, css, css-transitions

我可能会以错误的方式解决这个问题，所以如果这是不好的做法，请这样说。

我有包含复选框和标签的 DIV。DIV 的样式看起来像一个按钮，我编写了代码，这样如果用户单击（或点击）DIV，复选框的值或状态将在选中和未选中之间切换（这不包含在下面的代码中） .

这是 DIV HTML 的样子……</p>

```
<div class="funkyCheckBox">
<label for="inputName">Label Text</label>
<input type="checkbox"  name="inputName" id="inputID" />
</div> 
```

现在，当用户单击或点击 DIV 时，我还希望更改容器 DIV（具有`.funkyCheckBox`类的 DIV）的外观，以便用户在视觉上明显地看到复选框状态已更改。我使用 jQuery 切换向 DIV 添加活动状态（向 DIV 添加或删除类 funkyCheckBoxActive）。

这是 CSS……</p>

```
.funkyCheckBox{
    display:block;
    border-radius: 1em 1em 1em 1em;
    margin-bottom:.5em;
    background: #ffffff; /* Old browsers */
    background: -moz-linear-gradient(top,  #ffffff 0%, #eaeaea 100%); /* FF3.6+ */
    background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,#ffffff), color-stop(100%,#eaeaea)); /* Chrome,Safari4+ */
    background: -webkit-linear-gradient(top,  #ffffff 0%,#eaeaea 100%); /* Chrome10+,Safari5.1+ */
    background: -o-linear-gradient(top,  #ffffff 0%,#eaeaea 100%); /* Opera 11.10+ */
    background: -ms-linear-gradient(top,  #ffffff 0%,#eaeaea 100%); /* IE10+ */
    background: linear-gradient(to bottom,  #ffffff 0%,#eaeaea 100%); /* W3C */
    filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#ffffff', endColorstr='#eaeaea',GradientType=0 ); /* IE6-9 */
    padding:.5em;
    }

    .funkyCheckBoxActive{
    background: blue; 
    -webkit-transition: background-color 1000ms linear;
    -moz-transition: background-color 1000ms linear;
    -o-transition: background-color 1000ms linear;
    -ms-transition: background-color 1000ms linear;
    transition: background-color 1000ms linear;
    } 
```

这是我编辑的 jQuery 代码……</p>

```
$(".funkyCheckBox").live("click, tap", function(){
    $(this).toggleClass("funkyCheckBoxActive");

}); 
```

当用户单击其中`.funkyCheckBox`一个 Div 时，会添加一个带有漂亮 CSS 过渡的新类。当我再次单击该类时，`.funkyCheckBoxActive`该类被删除，但我希望在该类被删除时有类似的过渡，而不仅仅是立即删除。解决此问题的最佳方法是什么。我曾考虑在`.funkyCheckBox`课堂上添加类似的过渡，但我知道这不会起作用或产生预期的效果。任何想法，任何人？

如果我没有很好地解释我的问题，请说出来，我会改写。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T09:44:48.370

你已经为你的活动类使用了 CSS3 过渡，但原来的 funkyCheckBox 有简单的背景渐变。在 funkyCheckBox 类中使用 css 过渡而不是背景渐变以获得类似的效果。

# ios - MKMapView 谷歌问题

> ID：12971337
> 
> 赞同：-3
> 
> 时间：2012-10-19T09:33:19.620
> 
> 标签：ios, mkmapview, mapkit

我创建了 MKMapView，而不是标记“谷歌”它显示合法。请谁能解释一下为什么它显示法律标签。![在此处输入图像描述](../Images/2ecf32b2461d736bae850ffd80e110a5.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T09:35:11.040

因为他们不再使用谷歌地图。他们使用苹果自己的地图服务。

# java - 设置传递给函数的数组变量

> ID：12971341
> 
> 赞同：1
> 
> 时间：2012-10-19T09:33:33.627
> 
> 标签：java, arrays, function, setter

好的，这是一个非常简单的问题，我对此感到很困惑……但是这让我很头疼。这是来源：

```
import java.util.Arrays;
public class InputValues {  
    public int[] myarrayvar;
    public InputValues(int[] myarraypass) {     
    ---- help here
    }
    public void init() {        
    ---help here
    }
    public int[] getmyarrayvar() {
        return myarrayvar;
    }
    public void setmyarrayvar(int[] myarraypass) {
        this.myarrayvar= mayarraypass;
    }
} 
```

我称之为

```
InputValues inputValues = new InputValues(myarraypass);
inputValues.init(); 
```

myarraypass 是 int[] 类型。

就像我说的那样，这应该很容易......但由于某种原因我无法让它工作......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T09:38:58.530

您可以尝试以下操作：

1.  将实例变量访问权限从 更改`public`为`private`。

2.  在构造函数中，您可以使用以下行：

    this.myarrayvar = myarraypass;

但是请记住，如果`myarraypass`在课堂外修改`InputValues`，`myarrayvar`也会受到影响。

如果您不希望发生这种行为，则应逐个索引复制。

```
this.myarrayvar = new int[myarraypass.length];
for(int i=0; i<myarraypass.length;i++)
    this.myarrayvar[i] = myarraypass[i]; 
```

或者

```
this.myarrayvar = (int[]) myarraypass.clone(); 
```

或者

```
this.myarrayvar = new int[myarraypass.length];
System.arraycopy(myarraypass, 0, this.myarrayvar, 0, myarraypass.length); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-19T09:44:02.717

1.  In case your myarrayvar is public then why would you need a setter and getter. You need them only when your member is inaccessible to the outside world, i.e. it's marked private.
2.  Nest, you can use the following in your constructor for setting the array,

> ```
> public InputValues(int[] myarraypass) { 
> 
>     this.myarrayvar = new int[myarraypass.length];    
> 
>     System.arraycopy(myarraypass, 0, this.myarrayvar, 0, myarraypass.length );
> 
> } 
> ```

# visual-studio-2010 - 如何使解决方案中的项目具有相同的包含、库路径

> ID：12971343
> 
> 赞同：3
> 
> 时间：2012-10-19T09:33:35.607
> 
> 标签：visual-studio-2010

在 Visual Studio 2010 中，我想让一个解决方案中的所有项目都具有相同的配置，例如包含目录、lib 目录？我知道有一个叫做属性管理器的东西可以做到这一点，但它使其他解决方案具有相同的配置。

有没有办法处理：只让同一个解决方案中的项目配置相同，不影响其他解决方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T00:09:56.310

您可以做的是制作自己的 .props 文件。如果您使用文本编辑器打开 .vcxproj 文件，您可以在文件下方找到如下几行：

```
<Import Project="$(VCTargetsPath)\Microsoft.Cpp.Default.props" /> 
```

导入（或包含或调用）其他一些 .props 文件。查找该文件并使用文本编辑器打开它，它位于 C:\Program Files\MSBuild\Microsoft.Cpp\v4.0 中。这让您了解 .props 文件的结构。

现在，您可以制作自己的 .props 文件，并在其中设置您想要的包含和 lib 路径（也可以设置其他设置），最后您必须`<Import.../>`手动在 .vcxproj 文件中添加一行。不用担心，即使您对项目进行了更改，VS 也不会删除它。

.props 编程的有用网站：

*   Visual C++ 团队博客： http: [//blogs.msdn.com/b/vcblog/](http://blogs.msdn.com/b/vcblog/)（看看周围，这是一个宝库）
*   .vcxproj 和 .props 文件结构指南：http: [//blogs.msdn.com/b/visualstudio/archive/2010/05/14/a-guide-to-vcxproj-and-props-file-structure.aspx](http://blogs.msdn.com/b/visualstudio/archive/2010/05/14/a-guide-to-vcxproj-and-props-file-structure.aspx)

# mysql - 带有子选择和多行的 SQL 插入

> ID：12971346
> 
> 赞同：3
> 
> 时间：2012-10-19T09:33:46.890
> 
> 标签：mysql, insert, subquery

我有一个现有的文档表和一个新的权限表。我想创建一个脚本，它将授予所有现有文档的所有权限。documents_permissions 表需要 document_id 和 permission_id (1,2,3)。因此，对于每个文档，我需要插入 3 行。这是我在atm的地方：

```
INSERT INTO `documents_permissions` (`document_id`, `permission_id`)
SELECT `id`, '1' FROM `documents` 
```

但我需要为每个权限重复一遍。做这个的最好方式是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-19T09:39:04.933

尝试这个：

使用**交叉连接**

```
INSERT INTO `documents_permissions` (`document_id`, `permission_id`)
select  `id`,a.permissions
 from(
select 1 as permissions union all
select 2 union all
select 3 )a
cross join
`documents` d 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-19T09:39:33.677

```
INSERT INTO `documents_permissions` (`document_id`, `permission_id`)
select id, pid from `documents`
cross join (select 1 as pid union select 2 union select 3)X 
```

# sql - 从触发器启动的程序超时 db-access

> ID：12971347
> 
> 赞同：0
> 
> 时间：2012-10-19T09:34:01.183
> 
> 标签：sql, sql-server-2005, triggers, timeout

我从触发器调用程序

```
SET @exeCall = 'C:\...\XMLResultValueSplitter.exe '+CAST(@resultID as nvarchar(40))
EXEC master.dbo.xp_cmdshell @exeCall 
```

程序读取新插入的行（通过 resultId），拆分它的几个 xmlvalues 并将一些值插入另一个表。但是当由 tirgger 执行它时，我会超时（*正常*启动，它当然可以）

你知道如何处理这个问题吗？

谢谢你，卡尔

# r - 如何在 R 中找到相等的列？

> ID：12971348
> 
> 赞同：6
> 
> 时间：2012-10-19T08:38:24.590
> 
> 标签：r, equivalence

鉴于以下情况：

```
a <- c(1,2,3)
b <- c(1,2,3)
c <- c(4,5,6)
A <- cbind(a,b,c) 
```

我想找出 A 中的哪些列等于我的向量 a。

我的第一次尝试是：

```
> which(a==A)
[1] 1 2 3 4 5 6 
```

哪个没有这样做。（老实说，我什至不明白那做了什么）第二次尝试是：

```
a==A
        a    b     c
[1,] TRUE TRUE FALSE
[2,] TRUE TRUE FALSE
[3,] TRUE TRUE FALSE 
```

这绝对是朝着正确方向迈出的一步，但它似乎扩展到了一个矩阵中。我更喜欢的只是其中一排。如何将向量与列进行比较，以及如何在矩阵中找到等于向量的列？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-19T12:42:29.913

使用`identical`. 那就是 R 的“标量”比较运算符；它返回单个逻辑值，而不是向量。

```
apply(A, 2, identical, a)
#    a     b     c 
# TRUE  TRUE FALSE 
```

如果`A`在您的真实案例中是一个数据框，那么您最好使用`sapply`或者`vapply`因为`apply`强制它输入到矩阵中。

```
d <- c("a", "b", "c")
B <- data.frame(a, b, c, d)

apply(B, 2, identical, a) # incorrect!
#     a     b     c     d 
# FALSE FALSE FALSE FALSE 

sapply(B, identical, a) # correct
#    a     b     c     d 
# TRUE  TRUE FALSE FALSE 
```

但请注意，`data.frame`除非您另有要求，否则会将字符输入强制转换为因子：

```
sapply(B, identical, d) # incorrect
#     a     b     c     d 
# FALSE FALSE FALSE FALSE 

C <- data.frame(a, b, c, d, stringsAsFactors = FALSE)
sapply(C, identical, d) # correct
#     a     b     c     d 
# FALSE FALSE FALSE  TRUE 
```

Identical 也比使用`all`+快得多`==`：

```
library(microbenchmark)

a <- 1:1000
b <- c(1:999, 1001)

microbenchmark(
  all(a == b), 
  identical(a, b))
# Unit: microseconds
#              expr   min    lq median     uq    max
# 1     all(a == b) 8.053 8.149 8.2195 8.3295 17.355
# 2 identical(a, b) 1.082 1.182 1.2675 1.3435  3.635 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-10-19T11:24:22.520

如果添加额外的行：

```
> A
     a b c  
[1,] 1 1 4 4
[2,] 2 2 5 2
[3,] 3 3 6 1 
```

然后可以看到这个函数是正确的：

```
> hasCol=function(A,a){colSums(a==A)==nrow(A)}
> A[,hasCol(A,a)]
     a b
[1,] 1 1
[2,] 2 2
[3,] 3 3 
```

但接受的早期版本没有：

```
> oopsCol=function(A,a){colSums(a==A)>0}
> A[,oopsCol(A,a)]
     a b  
[1,] 1 1 4
[2,] 2 2 2
[3,] 3 3 1 
```

它返回 4,2,1 列，因为 2 与 1,2,3 中的 2 匹配。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-10-19T08:50:19.360

当然有更好的解决方案，但以下工作：

```
> a <- c(1,2,3)
> b <- c(1,2,3)
> c <- c(4,5,6)
> A <- cbind(a,b,c)
> sapply(1:ncol(A), function(i) all(a==A[,i]))
[1]  TRUE  TRUE FALSE 
```

并获得指数：

```
> which(sapply(1:ncol(A), function(i) all(a==A[,i])))
[1] 1 2 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-10-19T09:33:51.337

```
colSums(a==A)==nrow(A) 
```

的回收有效地`==`使`a`矩阵的所有列等于`a`且维度等于`A`. `colSums`对每一列求和；虽然`TRUE`行为类似于 1 和`FALSE`0，但等于 的列`a`的总和等于行数。我们使用此观察结果最终将答案简化为逻辑向量。

编辑：

```
library(microbenchmark)

A<-rep(1:14,1000);c(7,2000)->dim(A)
1:7->a

microbenchmark(
 apply(A,2,function(b) identical(a,b)),
 apply(A,2,function(b) all(a==b)),
 colSums(A==a)==nrow(A))

# Unit: microseconds
#                                     expr      min        lq    median
# 1     apply(A, 2, function(b) all(a == b)) 9446.210 9825.6465 10278.335
# 2 apply(A, 2, function(b) identical(a, b)) 9324.203 9915.7935 10314.833
# 3               colSums(A == a) == nrow(A)  120.252  121.5885   140.185
#         uq       max
# 1 10648.7820 30588.765
# 2 10868.5970 13905.095
# 3   141.7035   162.858 
```

# iphone - 应用拒绝问题 2.5：使用非公共 API 的应用将被拒绝

> ID：12971351
> 
> 赞同：0
> 
> 时间：2012-10-19T09:34:03.983
> 
> 标签：iphone, xcode, app-store-connect

我收到了来自应用审查团队的以下消息，现在我很困惑如何解决它以及问题是什么，任何帮助将不胜感激。

> 2.5
> 
> 我们发现您的应用使用了一个或多个非公共 API，这不符合 App Store 审核指南。不允许使用非公共 API，因为如果这些 API 发生更改，可能会导致糟糕的用户体验。
> 
> 我们在您的应用中发现了以下非公共 API：
> 
> 当前主机
> 
> 如果您在源代码中定义了与上述 API 同名的方法，我们建议您更改方法名称，以便它们不再与 Apple 的私有 API 冲突，以避免您的应用程序在以后的提交中被标记。
> 
> 此外，一个或多个上述 API 可能驻留在应用程序随附的静态库中。如果您无权访问该库的源代码，则可以使用“strings”或“otool”命令行工具搜索已编译的二进制文件。“strings”工具可以输出库调用的方法列表，“otool -ov”将输出Objective-C类结构及其定义的方法。这些技术可以帮助您缩小有问题的代码所在的位置。
> 
> 我们感谢您在代码中对使用非公共 API 采取了预防措施，但是，无法准确或完全预测 API 可能被修改的方式以及这些修改可能产生的影响。因此，我们不允许在 App Store 应用程序中使用非公共 API。
> 
> 如果没有其他方法可以提供您的应用所需的功能，我们鼓励您提交增强请求。或者，尝试与 Apple 开发者技术支持团队合作探索替代解决方案。
> 
> 有时，App Store 中的某些应用似乎不符合 App Store 审核指南。我们努力确保 App Store 上的应用程序合规，并尝试识别 App Store 上当前可能不合规的任何应用程序。识别这些事件需要时间，但另一个应用程序不合规并不是您的应用程序存在的原因。对于离散代码级别的问题，您可能希望咨询 Apple 开发人员技术支持。请务必：
> 
> *   包括您的拒绝问题的完整详细信息
> *   准备任何符号化的崩溃日志、屏幕截图和步骤，以便在 DTS 工程师跟进时重现问题。
> 
> 有关如何符号化和读取崩溃日志的信息，请参阅技术说明 TN2151 理解和分析 iPhone OS 应用程序崩溃报告。
> 
> 如果您在重现此问题时遇到困难，请尝试按照 [https://developer.apple.com/library/ios/qa/qa1764/Testing](https://developer.apple.com/library/ios/qa/qa1764/) Workflow with Xcode's Archive feature 中所述测试工作流程”。

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T09:44:38.377

看起来您正在使用此方法在应用程序中获取当前 ip。您可以使用其他替代方法，例如提到的链接：

[https://stackoverflow.com/a/6535436/1111384](https://stackoverflow.com/a/6535436/1111384)

您可以使用它来获取当前IP。

希望这能解决您的问题。

# java - ViewPager 中的 GridView

> ID：12971354
> 
> 赞同：2
> 
> 时间：2012-10-19T09:34:12.787
> 
> 标签：java, android

如果没有将手指放在网格视图中的空白处，我无法滑动/移动到下一页，有人遇到过这个吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T21:02:02.500

你可以继承 ViewPager 并覆盖 onInterceptTouchEvent() 方法。以下检查是否在 X 方向上滑动，以便在必要时允许垂直滚动。不确定它是否完全解决了您的问题，但您可以尝试一下。

```
private static final int minSwipeDistance = 30;
private float mTouchX;

@Override
public boolean onInterceptTouchEvent(MotionEvent event) {
    boolean response = super.onInterceptTouchEvent(event);
    float x = event.getX();
    switch (event.getActionMasked()) {
    case MotionEvent.ACTION_DOWN:
        mTouchX = x;
        break;
    case MotionEvent.ACTION_MOVE:
        float dX = Math.abs(x - mTouchX);
        if (dX > minSwipeDistance)
            return true;
        break;
    }
    return response;
} 
```

# android - 在哪里可以找到适用于 Android 的 nm 工具（已编译或源代码）

> ID：12971357
> 
> 赞同：2
> 
> 时间：2012-10-19T09:34:18.637
> 
> 标签：android, android-ndk, toolchain

我想创建一个能够列出 Android 中动态库 .so 文件的所有符号的应用程序。我想问一下是否有针对Android 的预编译nm 或者至少是nm 的源代码，以便我可以自己编译。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-04-17T04:19:23.483

nm 在所有 ndk 工具链中都可用，例如：
< ndk >/toolchains/arm-linux-androideabi-4.8/prebuilt/darwin-x86_64/bin/arm-linux-androideabi-nm

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-19T10:06:06.793

`nm`是[binutils](http://www.gnu.org/software/binutils/)的一部分。您可以从[http://ftp.gnu.org/gnu/binutils](http://ftp.gnu.org/gnu/binutils)获取源代码。

您还可以在[Android NDK](http://developer.android.com/tools/sdk/ndk/index.html)中找到 arm 支持二进制文件（为主机编译，linux-x86） 。

如果您需要 Android 目标的二进制文件，您可以尝试通过获取最新的 Android 存储库，导航到 external/elfutils 来构建它。但是我不认为有一个 Android.mk 构建它，所以它可能不是微不足道的。您可以在 Android 存储库的[github 镜像](https://github.com/android/platform_external_elfutils/blob/master/src/nm.c)上看到 nm.c。

# php - curl 和 file_get_content 不能正常工作

> ID：12971364
> 
> 赞同：2
> 
> 时间：2012-10-19T09:34:29.477
> 
> 标签：php, curl, file-get-contents, web-crawler

我想编写一个爬虫程序来从另一个站点中提取电话号码。我需要从几乎。`2000 links`有时它可以工作。我已经使用了`curl and file_get_contents`。但有时我无法从该站点获取内容。有时它显示`520 error occurs`.有没有其他方法可以做到这一点？任何人请帮助我...我的代码是

```
 $original_file = @file_get_contents($url);

   OR

   $ch = curl_init();

    // set url
    curl_setopt($ch, CURLOPT_URL, $url);

    //return the transfer as a string
    curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);

    // $output contains the output string
     $original_file = curl_exec($ch); 
```

# c++ - 如何直接在 C++ 中打印十六进制值？

> ID：12971367
> 
> 赞同：4
> 
> 时间：2012-10-19T09:34:41.850
> 
> 标签：c++, hex

我们必须`%x`在 C 中将任何十进制值打印为像这样的十六进制值

```
printf("%x",a); // here a is having some integral value 
```

类似地，我们可以直接在 C++ 中打印它而不需要任何额外的努力或不添加额外的头文件`<iomanip>`吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-19T09:36:33.950

```
#include <iostream>
std::cout << std::hex << a; 
```

无论如何你都需要`<iostream>`C++ 风格的输出，所以它不是一个“额外的”标题。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-19T09:36:47.627

`printf`在 C++ 中也可用，因此您可以使用相同的技术。

（我不推荐`std::cout`，或者`std::hex`因为你说你不希望包括在内）

* * *

## 回答 #3

> 赞同：-4
> 
> 时间：2012-10-19T09:40:17.063

`cout << (void *)a << endl;`

# ios - iOS 委托不起作用，无法修复（内部代码）：将数据从 UITableView 发送到另一个视图中的 UITextField

> ID：12971370
> 
> 赞同：2
> 
> 时间：2012-10-19T09:34:54.567
> 
> 标签：ios, objective-c, cocoa-touch, delegation

我广泛搜索了委托教程，但无法使其正常工作。这是故事和代码。DetailViewController 有一个 UITextField 和一个 UIButton。当您按下按钮时，您将进入另一个带有简单分段表的 PricelistViewController。点击该表中的一行应将行标题中的文本返回到第一个视图并将其插入到文本字段中。但事实并非如此。这是代码：

**PricelistViewController.h**（第二个视图）：

```
@class PricelistViewController;

@protocol PricelistViewControllerDelegate <NSObject>
@required
//- (void)theSaveButtonOnThePriceListWasTapped:(PricelistViewController *)controller didUpdateValue:(NSString *)value;
- (void)theSaveButtonOnThePriceListWasTapped:(NSString *)value;
@end

@interface PricelistViewController : UITableViewController

@property (nonatomic, weak) id <PricelistViewControllerDelegate> delegate;

@property (retain, nonatomic) NSMutableArray * listOfSections;

@end 
```

**PricelistViewController.m**

```
@synthesize delegate;

- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{

    NSDictionary *dictionary = [listOfSections objectAtIndex:indexPath.section];
    NSArray *array = [dictionary objectForKey:@"ProductSections"];
    NSString *selectedProduct = [array objectAtIndex:indexPath.row];

    [self.delegate theSaveButtonOnThePriceListWasTapped:[NSString stringWithFormat:@"%@", selectedProduct]];

    [self.navigationController popViewControllerAnimated:YES];

} 
```

这是**DetailViewController.h**中的代码（第一个带有文本字段和按钮的视图）：

```
#import "PricelistViewController.h"

@interface DetailViewController : UIViewController <UITextFieldDelegate, PricelistViewControllerDelegate> 
```

**DetailViewController.m**（这是我尝试更改字段中文本的方式）：

```
- (void)theSaveButtonOnThePriceListWasTapped:(NSString *)value
{
    NSLog(@"Text, sent here: %@", value);
    NSLog(@"Text was sent here.");
    self.detailDescriptionLabel.text = value;

} 
```

**detailDescriptionLabel**是要显示的文本的 UITextField。

有人可以检查代码并提供帮助吗？我在这件事上工作了两天，没有运气！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T09:40:34.613

首先，你为什么在 PriceListViewController 的头文件中前向引用（@class）你的类？这不是必需的。

其次，您是否使用 ARC，如果您是数组属性，则应该是非原子类型，强。如果你不是你的委托属性应该是非原子的，分配。你似乎在混淆你的术语

还有你在哪里以及如何初始化你的数组？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T20:28:36.483

我想到了。在 PricelistViewController.m 中，我更改了调用方法的方式（添加了 If 语句）：

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
    NSDictionary *dictionary = [listOfSections objectAtIndex:indexPath.section];
    NSArray *array = [dictionary objectForKey:@"ProductSections"];
    NSString *selectedProduct = [array objectAtIndex:indexPath.row];

    if (delegatePrice && [delegatePrice respondsToSelector:@selector(theSaveButtonOnThePriceListWasTapped:didUpdateValue:)])
    {
        [delegatePrice theSaveButtonOnThePriceListWasTapped:self didUpdateValue:selectedProduct];
    } 
```

最重要的是：我拒绝使用 Storyboard，而是为我的 PricelistViewController 视图制作了一个旧的好 .xib 文件，它立即工作！

# php - 使用本机会话时，在 php 下制作“记住我”的最佳方法是什么？

> ID：12971376
> 
> 赞同：9
> 
> 时间：2012-10-19T09:35:14.733
> 
> 标签：php, session

以前我正在创建具有唯一哈希的附加 cookie “rememberme”，该哈希存储在数据库中，映射到用户 ID。

如果用户有这样的 cookie - 网站试图在数据库中找到它的值，如果找到它，会话正在建立。

后来，开发新项目我认为自己生成这个唯一的哈希可能不是很安全，并且为一个操作（用户识别）保留两个cookie（本机“PHPSESSID”+我的“rememberme”）是矫枉过正的。

也许有一种方法可以设置不是全局会话生命周期，而是为不同的用户会话单独设置它......或者最好将用户会话保留在数据库中，映射到用户 ID？

**更新 1** 我认为如果制作“记住我”按钮如此困难，我们可以采用另一种方式 - 制作“不是我的电脑按钮”。想法是在 php.ini 中设置一周的默认 cookie_lifetime（例如），如果用户选中此复选框 - 我们将使用 session_set_cookie_params 函数将 cookie_lifetime 设置为零。

所以，第一个问题是 - session_set_cookie_params 会影响其他用户的 cookie（在文档中说， session_set_cookie_params 选项将在 php 进程执行之前生效）

2d 问题是，如果 session_set_cookie_params 不影响全局设置，会话再生会影响不想保留长寿命 cookie 的用户吗？

**更新2：[问题1答案]**

刚刚测试了 session_set_cookie_params 函数。我编写了一个脚本，使用 session_set_cookie_params 将会话 cookie 生命周期设置为零，然后执行 30 秒：

```
if ($_GET['test']) {
  session_set_cookie_params (0);
  while (true) {
    sleep(1);
  }
}
session_start(); 
```

因此，在第一个浏览器中，我刚刚使用 ?test=1 参数启动了这个脚本，之后（当这个脚本正在执行时）我在第二个浏览器中启动了这个没有参数的脚本。答案是否定的——第二个浏览器的 cookie 没有受到影响。它有生命周期，在 php.ini 中指定

**更新 3：[问题 2 答案]** 然后，我尝试检查重新生成是否会影响 session_set_cookie_params 设置的会话 cookie 生命周期。

是的，有影响。如果我用自定义的生命周期设置会话 cookie，由 session_set_cookie_params 设置，然后调用 session_regenerate_id()，cookie 将具有生命周期，在 php.ini 中设置

但是，如果我们在调用 session_regenerate_id() 之前设置 session_set_cookie_params (0)，我们的 cookie 将有正确的生命周期。

就是这样了！那很简单！8)

谢谢你们，女士们，先生们！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T11:11:46.493

如果您只想使用会话来执行此操作，如果用户想要被记住，您可以执行以下操作：

```
if((isset($_POST['remember_me']) && $_POST['remember_me']) || ($_COOKIE['remember_me']) && $_COOKIE['remember_me'])) {

  // store these cookies in an other directory to make sure they don't
  // get deleted by the garbage collector when starting a "non-remeber-me"-session
  $remember_me_dir = ini_get('session.save_path') . DS . "remember_me_sessions";

  // create the directory if it doesn't exist
  if (!is_dir($remember_me_dir)) {
    mkdir($remember_me_dir);
  }

  // set the php.ini-directive (temporarily)
  ini_set('session.save_path', $remember_me_dir);

  // define lifetime of the cookie on client side
  $expire_cookie = 60 * 60 * 24 * 30; // in seconds
  session_set_cookie_params($expire_cookie);

  // lifetime of the cookie on server side
  // session file gets deleted after this timespan
  // add a few seconds to make sure the browser deletes
  // the cookie first.
  $garbage_in = $expire_cookie + 600; // in seconds

  // set the php-ini directive for the garbage collector of the session files.
  ini_set('session.gc_maxlifetime', $garbage_in);    
  // send an additional cookie to keep track of the users 
  // which checked the 'remember_me' checkbox
  setcookie('remember_me', 1, time() + $expire_cookie);
}

// now we are ready to start the session
// For all the users which didn't choose to check the 'remember_me' box
// the default settings in php.ini are used.
session_start(); 
```

[在这里](http://fr2.php.net/manual/en/session.configuration.php)你可以阅读更多关于会话相关的`php.ini`指令

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-21T01:05:29.067

由于制作“记住我”复选框功能非常困难，因此我采用了另一种方式，只使用一个 cookie。

**准备**

1）我准备了一个包含三个输入的表格：

*   "login" 输入 [type=text]: 用户登录
*   "password" 输入 [type=password]: 用户密码
*   “不是我的电脑”输入 [type=checkbox]：这将告诉我们使用生命周期 = 0 的会话 cookie（关闭浏览器时必须删除 cookie）

2）我已经设置 session.cookie_lifetime = 100500 默认保留长寿命cookie。

**饼干设置**

因此，在用户提交表单后，我们检查 - 如果他选择使用短会话 - 我们在为他设置会话 cookie 之前调用 session_set_cookie_params(0)（在实际使用 session_start() 之前）。

**饼干再生**

然后，当我们需要重新生成会话 cookie 时，我们也可以使用 session_regenerate_id() 函数轻松完成。但是我们需要记住，这个函数默认会从 php.ini 重新设置会话 cookie 的生命周期。因此，我们还需要在重新生成 cookie 之前调用 session_set_cookie_params()。顺便说一句，您可以将自定义会话 cookie 生命周期存储在 $_SESSION 中。它看起来像这样：

```
// Form handling, session setup
if ($_POST['not-my-computer']) {
   session_set_cookie_params(0);
   session_start();
   $_SESSION['expires'] = 0;
}

// Session regeneration 
if (isset($_SESSION['expires'])) {
    session_set_cookie_params(0);
    session_regenerate_id();
} 
```

您可以在问题文本中找到此答案的详细信息（以及更深入的解释）（在我测试时，我在那里添加了答案/测试结果）

# java - 如何实现对象数组的删除方法

> ID：12971380
> 
> 赞同：3
> 
> 时间：2012-10-19T09:35:27.013
> 
> 标签：java, arrays, list

我知道我的 add 方法是正确的：

```
public void add(Object object) {
    if (!contains(object) && size !=maxObjects) {
        set[size] = object; size++;
    }
    else 
        System.out.println("Already exists.");
} 
```

因为我得到如下打印输出：

```
Set [maxObjects=8, set=[a, 7, null, null, null, null, null, null], count=2]  
true  (I ask if it contains a value)  
false  "                            "  
Set [maxObjects=8, set=[a, 7, b, Valencia, 24, s, Victoria, null], count=7]  
Set [maxObjects=8, set=[a, 7, b, Valencia, 24, s, Victoria, 4234], count=8] 
```

我尝试了两种相同的删除方法（一种是我创建的；另一种是我几天前在 Stack 上发现的最相似的问题。）

第一次删除：

```
public boolean remove(Object object) {
    if (contains(object)) {
        object = null; 
        return true;
    }
    System.out.println("The object doesn't exist to delete.");
    return false;
} 
```

另一个删除：

```
public boolean remove(object object) {
    for (int i=0; i<(size-1); i++) {
        while (!contains(object) && size <= maxObjects) {
            set[i] = set[i+1]; size--; return true;
        }
    }
    System.out.println("Doesn't exist.");
    return false;
} 
```

任何帮助都会很棒！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T09:40:49.797

您必须在数组中找到对象，然后例如将最后一个对象移动到该索引（如果它还不是最后一个）并减小大小。

```
if (obj == null) return;

for (int i = 0; i < size; i++) {
    if (obj.equals(set[i])) {
        set[i] = set[--size];
        break;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T09:42:36.563

您的 remove 方法除了检查列表中对象的存在之外什么都不做。

将 null 设置为对象不会将其从列表中删除。要从列表中删除对象，您必须执行以下操作：

1.  查找对象在数组中的位置
2.  从数组中删除找到的位置。

要删除该位置，您可以将索引后的所有值向左移动（就像第二种算法尝试做的那样）。或者您可以创建一个新数组并将内容从旧数组复制到新数组（跳过找到的索引）。

# c# - 如何获得值的二进制表示

> ID：12971381
> 
> 赞同：4
> 
> 时间：2012-10-19T09:35:27.907
> 
> 标签：c#

> **可能重复：**
> [c#中的十进制到二进制转换](https://stackoverflow.com/questions/2954962/decimal-to-binary-conversion-in-c)

我有 3、432、1 等数字。我需要将这些数字转换为零和一的集合，然后将这些位存储在整数数组中，但不确定如何获得任何整数的位表示。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-10-19T09:37:39.797

Use [Convert.ToString Method (Int32, Int32)](http://msdn.microsoft.com/en-us/library/14kwkz77.aspx)

> Converts the value of a 32-bit signed integer to its equivalent string representation in a specified base.

```
int val = 10;
string binaryNumberString = Convert.ToString(val, 2); 
```

To put them in an int array try:

```
int[] arr = new int[binaryNumberString.Length];
int i=0;
foreach (var ch in binaryNumberString)
{
    arr[i++] = Convert.ToInt32(ch.ToString());
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-19T09:38:03.210

You can use the `Convert.ToString()` method

```
int n = 50;
int b = 2;

string binaryForm = Convert.ToString(n, b); 
```

# jquery - 如何使用 jQuery 选择一系列兄弟元素？

> ID：12971389
> 
> 赞同：0
> 
> 时间：2012-10-19T09:36:04.673
> 
> 标签：jquery, jquery-selectors, siblings

我正在开发一个用户脚本以与第 3 方网站进行交互，因此我无法控制它的布局方式。

它有一个列表，但从视觉上看，列表中的每个元素都没有包装在单个元素中，而是在 DOM 中表示为几个同级内联元素的“运行”。每个兄弟姐妹的运行由一个`<br>`。

我正在寻找一个能够在单个 jQuery 对象中选择任何此类运行的选择器。这是格式的抽象：

```
<div class="list">
  <a href="#" class="foo">Jack</a>&nbsp;<span class="bar">77</span><br>
  <a href="#" class="foo">Fred</a>&nbsp;<span class="bar">23</span><span class="bar">11</span><br>
  <a href="#" class="foo">Bob</a>&nbsp;<span class="bar">101</span><br>
  <a href="#" class="foo">Joe</a>&nbsp;<span class="bar">12</span><br>
</div> 
```

所以一种伪正则表达式符号中的模式总是：

> `foo` `bar` `{0,2}` `br`

选择器是否包含 final 无关紧要，`br`但它必须包含后跟 0、1 或 2`bar`的锚点。如果制作选择 0 或更多的东西更容易`bar`那也没关系，尽管 DOM 中永远不会超过两个。

因为它在元素之间使用不间断的空格，所以选定的 jQuery 对象也包括它们可能很重要。

（我将重新排列列表中的项目，以便能够将它们视为单位。这也是一个很好的 jQuery 学习练习！）

# mysql - MySQL group by where day <= x

> ID：12971391
> 
> 赞同：0
> 
> 时间：2012-10-19T09:36:15.143
> 
> 标签：mysql, sql, join, group-by, sum

我需要一些帮助来找出正确的 SQL 语句。

如果有一个具有以下结构的表：id、product_id、units、timestamp

我不想要一个包含每天所有单位的列表。一个产品每天最多有一条记录。所以我的第一次尝试是：

```
SELECT 
    DATE(timestamp) as day, SUM(units) as overall_units 
FROM 
    tbl 
GROUP BY 
    DATE(timestamp); 
```

通常应该这样做。但有时也有没有产品记录的日子。尽管如此，这些单位仍在仓库中，因此它们应该在计算中。

例如：

我们有 3 种产品。汽车、钢笔和轮子。2012-10-20 的记录：

汽车 => 5 支笔 => 20 个轮子 => 4

2012 年 10 月 21 日的记录 汽车 => 5 个轮子 => 6

我的查询将给出以下结果：

2012-10-20 => 29

2012-10-21 => 11

但我想，如果当天没有产品记录，它应该使用该产品的记录，该记录是最接近时间的。

所以应该是：

2012-10-21 => 31

我希望你能理解我的需要。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T09:49:59.337

```
SELECT 
   MAX (DATE(timestamp) ) as day, SUM(units) as overall_units 
FROM tbl 
```

更新 ：：

```
 SELECT max(day),sum(ou) from  
     (  select DATE(timestamp) as day, SUM(units) as ou 
        FROM tbl 
        GROUP BY   DATE(timestamp);
      ) 
```

内部 qry 将返回

```
2012-10-20 , 29
2012-10-21 , 11 
```

最终查询将返回

```
 2012-10-21 , 40 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T09:46:36.423

我认为您应该研究该`DISTINCT()`功能。查询可能类似于：`SELECT DISTINCT(product_id), * FROM tbl ORDER BY timestamp DESC;`使用 PHP 循环遍历您的结果并累积单位。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-19T15:19:53.147

```
SELECT 
    dd.ddate AS day
  , SUM(t.units) as overall_units 
FROM
        ( SELECT DISTINCT
              product_id
          FROM 
              tbl
        ) AS dp
    CROSS JOIN
        ( SELECT DISTINCT
              DATE(timestamp) AS ddate
          FROM 
              tbl
        ) AS dd
    JOIN 
        tbl AS t
            ON t.id =
                ( SELECT
                      tt.id
                  FROM
                      tbl AS tt
                  WHERE 
                      tt.product_id = dp.product_id
                    AND
                      tt.timestamp < dd.ddate + INTERVAL 1 DAY
                  ORDER BY tt.timestamp DESC
                    LIMIT 1
                ) 
GROUP BY 
    dd.ddate ; 
```

# linux - grep url 模式匹配

> ID：12971394
> 
> 赞同：0
> 
> 时间：2012-10-19T09:36:22.460
> 
> 标签：linux, apache, grep

我希望在访问日志中计算 url 模式，例如

```
action.php?show_page=next&offset=1&xyzzzzz 
```

请注意，我需要偏移值在 1 到 9 之间的所有 url。示例：

```
action.php?show_page=next&offset=1&xyzzzzz
action.php?show_page=next&offset=2&xyzzzzz
action.php?show_page=next&offset=3&xyzzzzz
.............
action.php?show_page=next&offset=9&xyzzzzz 
```

这是我尝试过的：

```
grep "action.php?show_page=next" access.log.2 | grep "offset=[1-9]&"| wc -l 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T10:10:39.333

你应该避开“？” 的第一个 grep。尝试使用正则表达式：

```
action.php\?show_page=next&offset=[1-9] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T10:44:23.760

一种使用方式`grep`：

```
grep -oc "action.php?show_page=next&offset=[1-9]&xyzzzzz" file.txt 
```

# javascript - 提醒来自 CKEDITOR 中文本区域的选择

> ID：12971397
> 
> 赞同：0
> 
> 时间：2012-10-19T09:36:28.523
> 
> 标签：javascript, ckeditor, selection

我试图提醒我从 CKEDITOR 中的 textarea 中选择的选项。当我跑的时候，就`"No text is selected."`出来了。我想看到`"The current selection is: "+ selection.` 我认为我需要在这里更改的警报 var`textarea = document.getElementById('editor1');` 有人可以帮我解决这个问题吗？

设置：

```
function () 
{
    var selection = "";
    var textarea = document.getElementById('editor1');
    if ('selectionStart' in textarea)
    {
         // check whether some text is selected in the textarea
         if (textarea.selectionStart != textarea.selectionEnd)
         {
           selection = textarea.value.substring(textarea.selectionStart, textarea.selectionEnd);
         }
    }
    else
    {
        // Internet Explorer before version 9
       // create a range from the current selection
       var textRange = document.selection.createRange();
        // check whether the selection is within the textarea
      var rangeParent = textRange.parentElement();
      if (rangeParent === textarea)
      {
          selection = textRange.text;
      }
    }
    if (selection == "")
    {
       alert("No text is selected.");
    }
    else
    {      
       alert("The current selection is: " + selection);
    }
   } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T12:06:13.317

要获得选择，请使用以下代码：

```
CKEDITOR.instances.youEditorInstance.getSelection().getSelectedText(); 
```

但是，此方法仅返回文本（无 HTML 标记）。

* * *

要保存 HTML 标记，您可以尝试以下操作：

```
var range = CKEDITOR.instances.editor1.getSelection().getRanges()[ 0 ];
var rangeClone = range.clone();

range.collapse();
var el1 = range.getCommonAncestor( true, true );
range.splitElement( el1 );

rangeClone.collapse( true ); // to beginning
var el2 = rangeClone.getCommonAncestor( true, true );
rangeClone.splitElement( el2 );

var html = '';
var newRange = CKEDITOR.instances.editor1.getSelection().getRanges()[ 0 ];
var children = newRange.cloneContents().getChildren();

var element;
for( var i = 0 ; i < children.count() ; i++ ) {
    element = children.getItem( i );
    html += element.$.innerHTML ? element.getOuterHtml() : '';
} 
```

`html`将存储您的选择 HTML。

# javascript - JavaScript、数字和字符串

> ID：12971399
> 
> 赞同：1
> 
> 时间：2012-10-19T09:36:29.620
> 
> 标签：javascript

我需要根据单元格名称（即数字）自动填充表格的某些单元格，但是当您按其名称调用单元格时，它会被解释为它的索引号，而不是填充正确的单元格，它将填充与索引对应的序号单元格。

```
document.getElementById("myTR").cells['9'].innerHTML = "testValue"

//the following doesn't work either 
a ='9'  or  a = 9
b = a.toString()
document.getElementById("myTR").cells[b].innerHTML = "testValue" 
```

任何想法如何解决这个问题？我试图将一个字母聚合到数字（9n）并且它有效，我只是想知道是否有任何已知的程序。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T09:44:31.330

```
document.getElementsByName('9')[0].innerHTML = 'testVal'; 
```

按名称获取元素，选择第一个（唯一）元素，Bob 是你的叔叔。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-19T09:39:57.553

不知道我是否会被 JS 纯粹主义者讨厌，但我建议为此使用 jQuery，这就是它的目的：

```
$("#myTR TD[name='9']").html("testValue"); 
```

这*应该*`tr`在带有 id的标签中获得名为 9 的单元格`myTR`

这是给你的小提琴：http: [//jsfiddle.net/aZEXV/1/](http://jsfiddle.net/aZEXV/1/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-19T09:41:17.157

如果名称是唯一的，试试这个：

```
document.getElementByName('9').innerHTML = 'testValue'; 
```

顺便说一句，我建议你使用jquery来操作单元格，下面是使用jquery的代码：

```
$('td[name=9]','#myTR').html("testValue"); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-19T09:52:14.617

你可以试试这个

**HTML**

```
<table>
    <tr id="myTR">
        <td>Row1</td><td name="9">Row1</td>
    </tr>
    <tr><td>Row2</td><td>Row2</td></tr>
</table> 
```

**JS**

```
var x='9';
document.getElementsByName(x)[0].innerHTML = "testValue"; 
```

[**演示**](http://jsbin.com/arunuw/5/edit)。

## 还要尽量避免声明以数字开头的名称。

# ruby-on-rails - How do I group checkboxes by parent with Active Admin (formatastic)

> ID：12971403
> 
> 赞同：6
> 
> 时间：2012-10-19T09:36:33.600
> 
> 标签：ruby-on-rails, activeadmin, formtastic

This is the category model. A category can belong to another category.

```
class Category < ActiveRecord::Base
  attr_accessible :title, :parent_id

  has_and_belongs_to_many :products, :join_table => :products_categories

  belongs_to :parent, :foreign_key => "parent_id", :class_name => "Category"
  has_many :categories, :foreign_key => "parent_id", :class_name => "Category"
end 
```

This is the product model:

```
class Product < ActiveRecord::Base
  attr_accessible :comment, location_id, :category_ids
  has_and_belongs_to_many :categories, :join_table => :products_categories
  belongs_to :location
end 
```

**In the Active Admin form for a product I want to hierarchically order the checkboxes based on their parent_id e.g.**

*   Category 1 [ ]
    *   Category 2 [ ]
    *   Category 3 [ ]
*   Category 6 [ ]
    *   Category 4 [ ]
*   Category 5 [ ]
*   Category 7 [ ]

Below is as far as I've got with the form:

```
ActiveAdmin.register Product do
    form do |f|
      f.inputs "Product" do
      f.input :comment
      f.input :categories, :as => :check_boxes
      f.input :location
    end
    f.buttons
  end
end 
```

Currently the form pulls in the checkboxes and saves the data correctly but I'm not sure where to begin with grouping them. I looked through the documentation but couldn't see anything obvious.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T13:40:49.630

这可以通过用户 Hopstream 的[ActiveAdmin 部分解决——如何显示类别分类法？（在树类型层次结构中）](https://stackoverflow.com/questions/8104760/activeadmin-how-to-display-category-taxonomy-in-tree-type-heirarchy)问题。由于 Formtastic 的不同，它带来了一些有趣的挑战，然而，即直接的 formtastic 根本无法做到“开箱即用”。

但是，可以扩展和覆盖 Formtastic 的`Formtastic::Inputs::CheckBoxesInput`类，以便通过嵌套逻辑添加面条的能力。幸运的是，这个问题也已经发生在其他人身上。

Github 用户 michelson 的[带有 awesome_nested_set 要点的 Formtastic 复选框](https://gist.github.com/michelson/2314495 "带有 awesome_nested_set 的 Formtastic 复选框")将为您提供一个可以添加到您的 rails 应用程序的类，将`acts_as_nested_set`线放置在您的`Product`模型中，并将 Formtastic块`f.input`所需的线放在您的块中，这实际上应该在不修改结构的情况下工作您的模型为：`f.inputs "Product"``ActiveAdmin.register`

`f.input :categories, :as=>:check_boxes, :collection=>Category.where(["parent_id is NULL"]) , :nested_set=>true`

# asp.net-mvc-3 - Telerik asp.net for MVC datepicker format in grid related issue

> ID：12971406
> 
> 赞同：1
> 
> 时间：2012-10-19T09:36:54.343
> 
> 标签：asp.net-mvc-3, datepicker, telerik-grid, date-format

I have specified date format as dd/mm/yyyy for telerik datepicker. However, it is recognized as mm/dd/yyyy only. For example, if i enter date as 18/10/2012 error on saving record is thrown as date format is not valid as date entered here as 18 is treated as month. I have defined view for date as:

```
@model DateTime?           
@(Html.Telerik().DatePickerFor(m => m)
  .Name(ViewData.TemplateInfo.GetFullHtmlFieldName(string.Empty))      
  .Format("dd/MM/yyyy")
  .HtmlAttributes(new { id = ViewData.TemplateInfo.GetFullHtmlFieldName(string.Empty) + "_wrapper" })
  .InputHtmlAttributes(new {style="width:160px;"})) 
```

And in model validation for date field is defined as:

```
[Required(ErrorMessage = "Date Required")]
[DataType(DataType.Date)]
public DateTime? DATE_CALL { get; set; } 
```

Also, in grid has defined column as:

```
col.Bound(r => r.DATE_CALL).Format("{0:dd/MM/yyyy}").Title("DATE_CALL").Width(170); 
```

So, can't figure out what the error is? Any help will be appreciated.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T10:13:39.180

在保存到数据库之前，使用以下设置您的日期格式：

```
DateTime.ParseExact(<yourDate>, "MM/dd/yyyy", System.Globalization.CultureInfo.InvariantCulture); 
```

# android - 将对象从一个活动传递到另一个活动时遇到困难

> ID：12971411
> 
> 赞同：0
> 
> 时间：2012-10-19T09:37:08.993
> 
> 标签：android

我想将一个活动的对象传递给另一个活动，但我无法做到这一点。问题是日食将我要传递的对象放入红色子句中。这是我正在使用的代码：

```
 DatabaseHandler1 db1 = new DatabaseHandler1(SecureMessagesActivity.this);
    Intent intent = new Intent(SecureMessagesActivity.this,ShowTheFoldersInSdCard.class);
    intent.putExtra("id",(int)id);
    intent.putExtra("MyClassObject", db1); 
```

在最后一行，它在 db1 中显示问题。请帮助。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T09:43:34.700

像这样通过意图仅发送 id

```
Intent intent = new Intent(SecureMessagesActivity.this,ShowTheFoldersInSdCard.class);
intent.putExtra("id",(int)id); 
```

在另一个活动中创建这样的 Helper 对象

```
DatabaseHandler1 db1 = new DatabaseHandler1(SecondActivity.this); 
```

如果您只想在整个应用程序中拥有一个 Helper 实例，我认为您应该`Application`像这样创建类扩展并在那里创建 Helper 对象

```
DatabaseHandler1 db1 = new DatabaseHandler1(YourApplicationClass.this); 
```

你必须做到`public`并且`static`. 然后在每个活动中你可以这样称呼它

```
YourApplicationClass.db1.doSomething(); 
```

# javascript - 通过javascript向每个DIV添加类而不覆盖现有类？

> ID：12971416
> 
> 赞同：1
> 
> 时间：2012-10-19T09:37:17.353
> 
> 标签：javascript, jquery, html, class, dom

> **可能重复：**
> [通过javascript自动向页面上的每个DIV添加类（序列号）？](https://stackoverflow.com/questions/12960028/adding-classes-serially-numbered-to-each-div-on-page-automatically-via-javascr)

我想添加一个“编号”所有`<div>`s 的类，问题是它覆盖了现有的类。

```
$('div').attr('class', function(i) {
    return 'someClass' + i;
}); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-19T09:38:47.357

```
$('div').each(function(i){
    $(this).addClass('class' + i);
}); 
```

或者：

```
$('div').addClass(function(i){
    return "class" + i;
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T09:38:24.100

在这里检查，

[http://api.jquery.com/addClass/](http://api.jquery.com/addClass/)

```
$("p").addClass("myClass yourClass"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-19T09:40:05.200

```
$('div').each(function(i, item){
    $(this).addClass("someClass" + i);
}); 
```

这将添加到现有的类

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-19T09:44:46.970

这会将索引添加到现有的类值。

```
$(function(){
$('div').attr('class', function(i, val) {
      return val + i;
});
}); 
```

# php - Yii Rest API 的 URL 规则添加版本

> ID：12971417
> 
> 赞同：1
> 
> 时间：2012-10-19T09:37:22.870
> 
> 标签：php, yii

我有一个基于 Yii 框架的 REST API： [http ://www.yiiframework.com/wiki/175/how-to-create-a-rest-api/](http://www.yiiframework.com/wiki/175/how-to-create-a-rest-api/)

我想在 URL 规则中添加一个 API 版本，例如：

```
array('api/view', 'pattern'=>'api/<version:\d+>/<model:\w+>/<id:\d+>', 'verb'=>'GET'), 
```

我该怎么做？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-19T09:56:39.047

如果您想使用一个控制器，您可以像以前一样保留规则：

```
array('api/view', 'pattern'=>'api/<version:\d+>/<model:\w+>/<id:\d+>', 'verb'=>'GET'), 
```

并在控制器 Action 检查版本：

```
public function actionView()
{
    // Check the version
    if($_GET['version'] == 1)
    {
       //do what you've got to do
    }
    else if ($_GET['version'] == 2)
    {
       //do what you've got to do
    }
} 
```

另一种解决方案是使用[自定义 URL 规则功能](http://www.yiiframework.com/doc/guide/1.1/en/topics.url#using-custom-url-rule-classes)

*   在“parseUrl”方法中，您检查 url 是否与您的规则匹配（有 api/version/model/id）以及是否匹配取决于您重定向到正确控制器的 api 版本（例如：apiV2/view）

代码：

```
public function parseUrl($manager,$request,$pathInfo,$rawPathInfo)
{
   if (preg_match('%^(api/(\d+))(/(\w+))(/(\d+))$%', $pathInfo, $matches))
        {
            // $matches[2] is the version and $matches[4] the model
            // If it matches we can check the version api and the model
            // If it's ok, set $_GET['model'] and/or $_GET['id']
            // and return 'apiVx/view'
        }
        return false;  // this rule does not apply
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-29T22:00:51.900

将整个 API 放入一个模块中，将版本放入子模块中，并将它们包含在主模块配置中：

```
/api    -> modules.ApiModule
/api/v1 -> modules.ApiModule.modules.V1Module
/api/v2 -> modules.ApiModule.modules.V2Module 
```

... ETC...

我认为默认 Yii 路由器的路径版本自动支持这种模式，但我可能错了。在任何情况下，将版本组织成模块可以让它们轻松共享代码，同时仍然保持不同，并使错误呈现给用户自然。

# xcode - 如何从 Facebook 帐户获取用户签到信息？

> ID：12971419
> 
> 赞同：-2
> 
> 时间：2012-10-19T09:37:27.420
> 
> 标签：xcode, facebook

[http://tylerwhitedesign.com/how-to-check-in-using-the-facebook-ios-sdk-and-graph-api](http://tylerwhitedesign.com/how-to-check-in-using-the-facebook-ios-sdk-and-graph-api) 每个地方只有这个链接显示，但使用这个我们只能靠近位置。
我想要的是如何从 FB 帐户获取签入信息到我们的应用程序。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T09:47:55.970

也许你的意思是这个链接？

在这里您可以看到完整列表： [Facebook 字段值](https://developers.facebook.com/docs/reference/api/user/)

在这里您可以发送测试消息以测试响应数据： [Facebook Graph API Explorer](https://developers.facebook.com/tools/explorer?method=GET&path=100002032887359?fields=id,name)

# r - oauth flickr api using httr to retrieve token

> ID：12971420
> 
> 赞同：2
> 
> 时间：2012-10-19T09:37:30.570
> 
> 标签：r, oauth, flickr, httr

I would like to use `httr` to link up/upload my R image outputs to flickr, but am having difficulty with the initial stages where i need to authenticate myself using OAuth 1.0.

I previously created an app by going to the following link [http://www.flickr.com/services/apps/create/apply/](http://www.flickr.com/services/apps/create/apply/)

and then got a secret and key string for that app...

I then used it in the `httr` package function to get a token but to no avail. I have been trying to use the provided documentation on this link [http://www.flickr.com/services/api/auth.oauth.html](http://www.flickr.com/services/api/auth.oauth.html) to help out but, I am struggling...

The following is the code I used.

```
flickr.app <- oauth_app("flickr",key="xxxxxx", secret="xxxxxxxx")
flickr.urls <- oauth_endpoint(request="http://www.flickr.com/services/oauth/request_token",
                              authorize="http://www.flickr.com/services/oauth/authorize",
                              access="http://www.flickr.com/services/oauth/access_token")
flickr.token <- oauth1.0_token(flickr.urls,flickr.app) 
```

from which i get the error message

```
Error: http client error (400) 
```

Not too sure where to go from here...any help would be much appreciated.

N.B. Also I recognise that due to the nature of setting up api links, that there are secrets , api-keys, logins and passwords that need to be kept secret etc, but it does not take long to set up a dummy flickr account from www.flickr.com , to be able to reproduce the problem...in my opinion...perhaps others could try setting one up and letting me know if they got similar issues, and potential methods to work around the situation?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T11:34:11.710

我从未使用过 httr 库，但我最近（截至昨天）刚刚从头开始编写 Objective-C 代码以访问 Flickr。对我来说最大的痛点是弄清楚如何正确编码签名。我不太了解 httr 库，但如果我不得不猜测我的猜测是它没有正确编码签名。

如果您阅读此内容： http: [//www.flickr.com/services/api/auth.oauth.html](http://www.flickr.com/services/api/auth.oauth.html)

您将找到有关如何使用 Flickr 进行授权的非常详细的说明——这对我很有用，因为我从头开始用 Objective C 编写代码。除非您能够通过 httr 源进行调试并确定它是否完全按照 Flickr 的预期做事，否则可能对您没那么有用。

# php - How to call controller function in view in Zend Framework?

> ID：12971421
> 
> 赞同：1
> 
> 时间：2012-10-19T09:37:29.637
> 
> 标签：php, function, zend-framework, controller

In Zend Framework, I have one controller

```
class TestController extends Zend_Controller_Action
{

    public function indexAction()
    {

    }

    public function getResultByID( $id )
    {
        return $id;
    }

} 
```

How can I call the function getResultByID in index.phtml ?

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-19T16:06:49.850

第一的：

```
public function indexAction()
{
  $this->view->controller = $this
} 
```

在您的视图脚本中：

```
<html><title><?php echo $this->controller->getResultByID($this->id); ?></title></html> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-21T12:36:08.213

通过使用 Action View Helper ：

[http://framework.zend.com/manual/1.12/en/zend.view.helpers.html#zend.view.helpers.initial.action](http://framework.zend.com/manual/1.12/en/zend.view.helpers.html#zend.view.helpers.initial.action)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-19T09:46:51.697

如果`indexAction`执行了，您可以从那里调用它：

```
public function indexAction()
{
    $this->getResultByID( (int) $_REQUEST['id'] );
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-19T11:27:18.877

```
 public function getResultByID( $id )
  {
               return $id;
  } 
```

而不是上面的代码你可以使用

```
 public function getResultByID( $id )
    {
         this->view->id=$id;
         this->render('index.phtml');
     } 
```

那么您可以使用 index.phtl 中 id 的值作为`this->id`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-19T11:20:42.417

试试这个代码我认为这是最好的选择

```
public function indexAction()
    {
       $this->view->assign('id' => $this->getResultByID($this->_request->getParam('id', null)))
    }

    public function getResultByID( $id = null )
    {
        return $id;
    } 
```

并在视图中：回声`$this->id`

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-02-29T09:49:08.430

在您的 indexAction 方法中，以数组形式返回 getResultByID 方法。

控制器：

```
public function indexAction()
{
    return array(
       'getResult' => $this->getResultByID($id),
    );
}

public function getResultByID($id)
{
    return $id;
} 
```

问题是你从哪里得到 $id。无论如何，在这样的变量中调用 getResult 字符串。

看法：

```
echo $getResult; 
```

就是这样。

# php - 优化项目列表的 php 代码

> ID：12971426
> 
> 赞同：0
> 
> 时间：2012-10-19T09:37:52.733
> 
> 标签：php, joomla2.5

我正在使用joomla！将一些额外的字段输出到文章中。这些字段是使用 backslider jquery 插件显示的图像列表（最多 10 个）。

这是我使用的有效代码：

```
<div id="bs0" class="backslider">
    <ul class="bs-slides">
        <?php 
            $img1 = $this->item->extrafields['image_1'];
            $img2 = $this->item->extrafields['image_2'];
            $img3 = $this->item->extrafields['image_3'];
            $img4 = $this->item->extrafields['image_4'];
            $img5 = $this->item->extrafields['image_5'];
            $img6 = $this->item->extrafields['image_6'];
            $img7 = $this->item->extrafields['image_7'];
            $img8 = $this->item->extrafields['image_8'];
            $img9 = $this->item->extrafields['image_9'];
            $img10 = $this->item->extrafields['image_10'];
        ?>
        <?php if($img1) { ?>
        <li><img src="<?php echo $img1; ?>"></li>
        <?php } ?>
        <?php if($img2) { ?>
        <li><img src="<?php echo $img2; ?>"></li>
        <?php } ?>
        <?php if($img3) { ?>
        <li><img src="<?php echo $img3; ?>"></li>
        <?php } ?>
        <?php if($img4) { ?>
        <li><img src="<?php echo $img4; ?>"></li>
        <?php } ?>
        <?php if($img5) { ?>
        <li><img src="<?php echo $img5; ?>"></li>
        <?php } ?>
        <?php if($img6) { ?>
        <li><img src="<?php echo $img6; ?>"></li>
        <?php } ?>
        <?php if($img7) { ?>
        <li><img src="<?php echo $img7; ?>"></li>
        <?php } ?>
        <?php if($img8) { ?>
        <li><img src="<?php echo $img8; ?>"></li>
        <?php } ?>
        <?php if($img9) { ?>
        <li><img src="<?php echo $img9; ?>"></li>
        <?php } ?>
        <?php if($img10) { ?>
        <li><img src="<?php echo $img10; ?>"></li>
        <?php } ?>
    </ul>
</div> 
```

我不是 php 专家，但有没有更好的方法来优化此代码，我想也许将 $img 变量放入数组并使用 foreach 循环输出每个列表项？

一点帮助不会错过:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-19T09:42:05.690

只需遍历它们并使用索引来引用数组索引：

```
for ($i = 1; $i <= 10; ++$i) {
    if (!empty($this->item->extrafields["image_$i"])) {
         echo '<li><img src="', htmlspecialchars($this->item->extrafields["image_$i"]), '"></li>';
    }
} 
```

假设有多达 10 个项目要调查。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-19T09:44:54.523

下面的解决方案将避免评估字符串，尽可能缓存所有内容，以保持应用程序平稳运行，并保持代码整洁。

```
<div id="bs0" class="backslider">
    <ul class="bs-slides">
        <?php
        // Generate length of our image array / store known length of array
        $images = 10;

        // Loop through images
        for( $i = 1; $i <= $images; $i++ ) {
            // Store it for optimization sake.
            $field = $this->item->extrafields['image_' . $i];

            // Check it's not empty
            if( !empty( $field ) ) {

                // If not, print to browser
                printf(
                    '<li><img src="%s" alt=""></li>',
                    htmlspecialchars($field)
                );
            }
        }
        ?>
    </ul>
</div> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-19T09:47:29.690

我认为这段代码会做同样的事情。

```
<div id="bs0" class="backslider">
    <ul class="bs-slides">
        <?php 
            for($i = 1; $i <= 10; $i++)
            {
                $img = $this->item->extrafields['image_'.$i]
                  if($img) { ?>
                      <li><img src="<?php echo $img; ?>"></li>
              <?php } 
           }
         ?>
    </ul>
</div> 
```

# ios - Dealloc called but live memory not decreasing

> ID：12971431
> 
> 赞同：2
> 
> 时间：2012-10-19T09:38:03.973
> 
> 标签：ios, uiviewcontroller, profiler

I have three `UIViewControllers` and all of their dealloc methods are called whenever I dismiss them. This is exactly what I want to happen so that the memory won't balloon up.

However, when I ran the Profile to test the memory usage and for some leakages, I noticed that even if the dealloc was called, the live memory doesn't decrease somehow. What's more is that it keeps on increasing whenever I switch from one `UIViewController` to another (which is expected by the way). Sometimes it will decrease, but only a few memory will be decreased.

I am sure that the dealloc methods of each `UIViewControllers` were called since I put a log inside of the methods. Also, no there are no leakages recorded when I used Profile.

So can anyone explain why the memory does not decrease at all?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T09:43:31.553

正如其他人所说，没有看到您的代码很难弄清楚发生了什么。因此，我将为您留下[这篇](http://useyourloaf.com/blog/2011/03/08/using-heapshots-to-find-abandoned-memory.html)和[这篇](http://www.friday.com/bbum/2010/10/17/when-is-a-leak-not-a-leak-using-heapshot-analysis-to-find-undesirable-memory-growth/)关于使用仪器分析堆的文章。

# javascript - Is it possible to take a picture from the clipboard?

> ID：12971433
> 
> 赞同：1
> 
> 时间：2012-10-19T09:38:15.017
> 
> 标签：javascript, jquery, asp.net-mvc, flash

I need to save an image from the clipboard, how?

Zero Clipboard - does not know how to do it

# jquery - jQuery为什么更改文本隐藏复选框？

> ID：12971440
> 
> 赞同：-1
> 
> 时间：2012-10-19T09:38:29.970
> 
> 标签：jquery, jquery-selectors

我正在更改文本框的文本，并更新标签，但它隐藏了复选框？谁能告诉我我做错了什么？

这里

[http://jsfiddle.net/6mZbm/6/](http://jsfiddle.net/6mZbm/6/)

这里

```
<input type="text" id="txtInput" width="80px" />
</br>
<label id="lbl" />
</br>
</br>
<input type="checkbox" id="chkUpdate" /> 
```

jQuery

```
$(document).ready(function(event) {

    $('#txtInput').keydown(function(event) {

        $('#lbl').text($('#txtInput').val());
        $('#lbl').change();
    });

    $('#lbl').change(function(event) {
        // alert($('#chkUpdate').size());
        $('#chkUpdate').change();
    });

}); 
```

**好的，我关闭了它仍然无法工作的标签标签...检查更新的小提琴。**

**编辑 2**好的，它现在可以工作了，但是我没有得到我想要做的事情，正如从代码中应该清楚的那样`check` `uncheck`，当标签更新时，我想（基本上更改）复选框，但正如您在小提琴中看到的那样（ s）（我的和 Muthu Kumaran 提供的）复选框没有改变它的状态？

**编辑 3：**这似乎与`click()`而不是一起使用`change()`，但根据[jQuery 规范](http://api.jquery.com/change/)，它不应该与更改一起使用吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-19T09:41:39.713

因为你没有关闭`<label>`标签，

关闭标签标签，它可以正常工作

```
<label id="lbl"></label> 
```

**更新：** 工作演示：http: [//jsfiddle.net/6mZbm/8/](http://jsfiddle.net/6mZbm/8/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T09:42:02.193

您正在替换`<label>`包含您的复选框的文本，将您的复选框从标签标签中取出。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-19T09:42:41.120

就放

```
<label id="lbl"></label> 
```

# python - 使用 python 3.3 时是否需要 python 包 virtualenv？

> ID：12971443
> 
> 赞同：35
> 
> 时间：2012-10-19T09:38:39.320
> 
> 标签：python, virtualenv, python-3.3

我正在查看[Cristoph Gohlke 的 python 包](http://www.lfd.uci.edu/~gohlke/pythonlibs/)，我注意到有一个用于 Python 3.3 的包 Virtualenv。

由于标准python库v3.3中有一个包*venv*，我想知道单独安装这个包是否有好处。

编辑：从[virtualenv 1.8.2](http://pypi.python.org/pypi/virtualenv)和*venv*这两个包的文档中，我可以说*venv*标准库包缺少以下功能：

1.  `--no-site-packages`选项
2.  在 setuptools 或分发之间进行选择
3.  无法安装 pip，因为它在默认的 python 安装中不可用
4.  虚拟环境中没有自定义提示前缀`--prompt=PROMPT`

如果还有其他我无法发现的差异，请在此处写下。

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-12-31T03:00:41.537

通常，使用 python3.3 或更高版本时不需要 virtualenv 包，因为它是通过[PEP 405](http://www.python.org/dev/peps/pep-0405/)合并到标准库中的。正如您在问题中指出的那样，最新版本的 virtualenv 和标准库中的 venv 包之间存在一些相对较小的差异。部分（例如`--no-site-packages`）这源于不同的实现。由于`venv`在标准库中，它不必跳过一些扭曲的箍`virtualenv`来创建一个独立的 python 安装，例如复制 python 的大部分`site`模块。

最好的资源是彻底阅读 PEP。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-09-14T14:56:27.560

对于这个问题

# stdlib中的venv是否需要python包virtualenv？

## （或者有什么区别？）

1.  `--no-site-packages`是两者的默认值。该`--system-site-packages`选项存在，但[已损坏](https://bugs.python.org/issue24875)
2.  [不推荐使用分发](https://pythonhosted.org/distribute/)...这里没什么可看的
3.  从 Python3.4 开始，ensurepip 将在 virtualenv 中提供 pip。要让它在 Ubuntu/Debian 上运行，请务必安装该`python3-venv`软件包
4.  这里没有变化

当 venv 首次发布时，我希望它进入维护模式，为“旧 python 的 virtualenv”提供错误修复，所有开发都将重点转移到 stdlib venv。我不确定 virtualenv 的项目目标/路线图，但我担心我希望的事情不会发生。所以，至少目前，我会继续使用原来的 virtualenv。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-03-18T08:46:12.023

**pyvenv**是为 Python 3.3 和 3.4 创建虚拟环境的推荐工具

从 python 3.5 开始使用：

**python3 -m venv**

**venv**是一个内置模块，可以访问 python 的内部结构

**pyvenv**在 3.6 中已弃用

来源：[https ://docs.python.org/3/library/venv.html](https://docs.python.org/3/library/venv.html)

# macos - mac osx prism header pcap

> ID：12971444
> 
> 赞同：1
> 
> 时间：2012-10-19T09:38:43.687
> 
> 标签：macos, pcap, rssi

我正在尝试在我的 Mac 上以监控模式捕获数据包以解决研究问题。从这些数据包中，我需要一些特殊信息，例如 rssi。不幸的是，链接类型显示 DLT_IEEE802_11_RADIO，但我实际上期望 DLT_PRISM_HEADER，因为应该打开监控模式。这是一个问题，因为 radiotap 标头不提供任何 RSSI 值或我需要的其他内容。

这是我的代码（我省略了回调方法等）：

```
int main(int argc, char *argv[])
{
pcap_t *handle; /* Session handle */
char *dev;  /* The device to sniff on */
char errbuf[PCAP_ERRBUF_SIZE];  /* Error string */
struct pcap_pkthdr header;  /* The header that pcap gives us */
const u_char *packet;   /* The actual packet */
struct ether_header *ether;  /* net/ethernet.h */

/* Define the device */
dev = pcap_lookupdev(errbuf);
if(dev == NULL) {
    printf("Couldn't find default device: %s\n", errbuf);
    exit(EXIT_FAILURE);
}
printf("Device: %s\n", dev);

//handle = pcap_open_live(dev, 1562, 1, 500, errbuf);
handle = pcap_create(dev, errbuf);
if(handle == NULL) {
    printf("pcap_create failed: %s\n", errbuf);
    exit(EXIT_FAILURE);
}

/* set monitor mode on */
if(pcap_set_rfmon(handle, 1) != 0) {
    printf("monitor mode not available\n");
    exit(EXIT_FAILURE);
}
pcap_set_snaplen(handle, 2048);  // Set the snapshot length to 2048
pcap_set_promisc(handle, 1); // Turn promiscuous mode on
pcap_set_timeout(handle, 512); // Set the timeout to 512 milliseconds

int status = pcap_activate(handle);
if(status != 0) {
    printf("activation failed: %d\n", status);
}

printf("link-type: %s\n", pcap_datalink_val_to_name(pcap_datalink(handle)));

int loop = pcap_loop(handle, 1, process_packet, NULL);
if(loop != 0) {
    printf("loop terminated before exhaustion: %d\n", loop);
}

/* And close the session */
pcap_close(handle);

return(0);
} 
```

那么有人知道，为什么我收到的是radiotap而不是棱镜，我应该怎么做？我再次在 OSX 下编码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T19:31:02.527

> 从这些数据包中，我需要一些特殊信息，例如 rssi。

然后，除非驱动程序允许您请求 PPI 标头而不是 radiotap 标头 -在调用后`pcap_list_datalinks()` *在监控模式下*`pcap_activate()`使用，如果包括 DLT_PPI，请将链路层标头类型设置为 DLT_PPI `pcap_set_datalink()`- 你不走运。如果您可以请求 PPI 标头，那么您可能能够从该标头中获取 RSSI 值；请参阅[PPI 规范](http://www.cacetech.com/documents/PPI%20Header%20format%201.0.7.pdf)。

> 不幸的是，链接类型显示 DLT_IEEE802_11_RADIO，但我实际上期望 DLT_PRISM_HEADER，因为应该打开监控模式。

在具有任意 Wi-Fi 设备和驱动程序的任意操作系统上，没有任何理由期望您会在监控模式下获得 Prism 标头。如果您获得无线电信息，您将获得驱动程序编写器提供的任何标头。如今，驱动程序倾向于使用 radiotap - Linux mac80211 驱动程序、大多数 *BSD 驱动程序和 OS X 驱动程序。

# android - 翻译动画问题

> ID：12971446
> 
> 赞同：0
> 
> 时间：2012-10-19T09:38:44.627
> 
> 标签：android, android-layout, android-animation

我想通过屏幕特定 XY 位置的平移动画制作布局动画。这发生得非常正确。现在问题开始时动画完成布局再次转到屏幕的右上角。我希望布局保持在动画结束的相同位置。

```
 AnimationListener animationListener = new AnimationListener() {

        @Override
        public void onAnimationEnd(Animation arg0) {
            drawer_layout.setVisibility(View.VISIBLE);

        }

        @Override
        public void onAnimationRepeat(Animation animation) {
            // TODO Auto-generated method stub

        }

        @Override
        public void onAnimationStart(Animation animation) {
            drawer_layout.setVisibility(View.VISIBLE);

        }

    };

    final Animation animTranslate = AnimationUtils.loadAnimation(this,
            R.anim.top_to_bottom_in);

    animTranslate.setAnimationListener(animationListener);

    drawer_layout = (LinearLayout) findViewById(R.id.drawer_layout);
    button.setOnClickListener(new OnClickListener() {
        @Override
        public void onClick(View v) {
            // bitmapBackground = CaptureBackground();

            faded_layout.setBackgroundColor(Color.parseColor("#50ffffff"));

            // HandleDropAnimation(drawer_layout);
            drawer_layout.startAnimation(animTranslate);
        }
    }); 
```

这是我的xml。

```
<?xml version="1.0" encoding="utf-8"?>
<translate xmlns:android="http://schemas.android.com/apk/res/android"
android:duration="1000"
android:fromYDelta="25%p"
android:toYDelta="50%p" /> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T09:44:17.227

称呼

`animTranslate.setFillAfter(true);`

在开始动画之前。根据[java文档](http://developer.android.com/reference/android/view/animation/Animation.html#setFillAfter%28boolean%29)：

> 如果 fillAfter 为 true，则此动画执行的转换将在完成后持续存在。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-19T09:51:52.370

在动画开始之前使用

```
animTranslate.setFillAfter(true); 
```

# iphone - 通过 sharekit 将视频发布到 facebook/twitter

> ID：12971449
> 
> 赞同：2
> 
> 时间：2012-10-19T09:39:00.823
> 
> 标签：iphone, facebook, twitter, sharekit

目前，我正在开发一个应用程序，我必须通过共享工具包将视频发布到 Facebook/twitter。我是

通过共享工具包发送文本和图像，然后将其轻松发布在 Facebook/Twitter 上，但不会发布视频。

我到处搜索但无法成功。我该如何解决这个问题？提前致谢。

# spring - 提前释放 Grails 数据库连接

> ID：12971451
> 
> 赞同：1
> 
> 时间：2012-10-19T09:39:07.437
> 
> 标签：spring, hibernate, grails

我有一个执行以下操作的控制器操作：

1.  从数据库中获取域对象

2.  使用该对象的信息来查找数据文件（在磁盘上）并将该文件的内容写入响应输出流。

我的问题是数据库连接是在操作期间保留的，包括流式传输数据所需的（长时间）时间。当有多个用户同时流式传输数据时，这会导致大量不必要的数据库连接。

```
def stream() {
  StreamDetails sd = StreamDetails.get(params.id)

  // Extract info needed to read the stream
  String filename = sd.filename

  // The database connection is no longer needed, how to properly release it?

  // Start writing the data stream to response output
  // This may take a long time and does not use a db connection
  streamService.writeToOutput(filename,response.getOutputStream())
} 
```

我试过了：

1.  `sessionFactory`将bean注入控制器并`sessionFactory.currentSession.close()`在调用服务之前调用。但是，这会导致`SessionException`在线调用服务，即。在输入`writeToOutput()`方法之前（并且该方法中的任何内容都不需要数据库连接）。而且我认为会话不应该真正关闭，只是释放到池中。

2.  将代码复制粘贴`streamService.writeToOutput(...)`到控制器以避免服务调用。在这种情况下，所有代码都会被执行，但`SessionException`在操作完成后仍然会抛出 a 。

如何正确提前释放连接？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-10-19T12:27:11.447

您是否尝试过注入数据源？您可以使用 DataSourceUtils 创建一个新连接，然后您可以使用它来获取文件名。然后您可以手动关闭（）此连接。

我不知道您是否可以将此连接与 gorm 结合使用，因此您可能还必须创建自定义 sql 查询。

# ios - 在 didEndEditing 中更改 UITextField 边框样式

> ID：12971454
> 
> 赞同：6
> 
> 时间：2012-10-19T09:39:13.710
> 
> 标签：ios, uitextfield

我想在用户编辑它时突出显示一个 uitextfield，所以我将我的文本字段的边框样式默认设置为 UITextBorderStyleNone 并使用 uitextfields 代表如下：

```
- (void)textFieldDidBeginEditing:(UITextField *)textField
{
    [textField setBorderStyle:UITextBorderStyleBezel];
}

- (void)textFieldDidEndEditing:(UITextField *)textField
{
    [textField setBorderStyle:UITextBorderStyleNone];
} 
```

设置并渲染了 Bezel 样式，但是当调用 endediting 时，不应用 none 样式。我尝试将 none 更改为另一个（例如圆角矩形），但那个确实渲染正确。

有人知道我怎样才能让它工作吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-29T09:12:52.757

是的，这是一个错误。无论如何，我已经通过使用以下代码解决了：

```
textField.borderStyle = UITextBorderStyleLine;
textField.borderStyle = UITextBorderStyleNone; 
```

这不是一个非常漂亮的方法，但在 Apple 解决此问题之前它确实有效。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-09-09T10:47:09.287

我也有这个问题。从我的测试来看，我似乎可以将它设置为除`UITextBorderStyleNone`.

至少对我有用的解决方法是禁用和重新启用文本字段，如下所示：

```
- (void)textFieldDidEndEditing:(UITextField *)textField {
    textField.enabled = NO;
    textField.borderStyle = UITextBorderStyleNone;
    textField.enabled = YES;
} 
```

我真的不喜欢它，但它现在有效。

# mysql - 推进 MySQL 组

> ID：12971455
> 
> 赞同：0
> 
> 时间：2012-10-19T09:39:14.677
> 
> 标签：mysql, sql, group-by

我有 MySQL 表，其中包含从用户到用户的所有消息：

```
id | to_id /*user_id*/ | from_id /*user_id*/
 1 |  32               |  54
 2 |  54               |  32
 3 |  32               |  54 
```

目标是得到 MySQL 的答案，如对话列表 user_id - user_id 按日期排序。但是如果我做sql查询：

```
select * from messages group by to_id, from_id 
```

我会得到

```
 to_id /*user_id*/ | from_id /*user_id*/
  32               |  54
  54               |  32 
```

但是第一个和第二个字符串是同一个对话框。我如何对这些记录进行分组？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T09:59:38.483

```
SELECT DISTINCT LEAST(from_id, to_id), GREATEST(from_id, to_id) FROM messages 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-19T09:59:19.683

假设您的消息表包含一个名为类似的字段`message_date`，请尝试：

```
select to_id, from_id, max(message_date) latest_date
from (select to_id, from_id, message_date
      from messages where to_id >= from_id
      union all
      select from_id to_id, to_id from_id, message_date
      from messages where to_id < from_id) m
group by to_id, from_id
order by 3 desc, 1, 2 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-19T09:56:46.783

```
select small_id, big_id, count(*) from
(select id, 
    case when to_id < from_id then to_id else from_id end as small_id, 
    case when to_id < from_id then from_id else to_id end as big_id
from messages) as a 
group by small_id, big_id 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-19T09:43:27.567

我认为您必须存储`origin_id`用户回复的原始消息的

然后您将有一种方法将记录分组`origin_id`

我没有看到任何其他方式，只有起点和目的地 id

# css - 最新版本的 chrome CSS 问题

> ID：12971456
> 
> 赞同：0
> 
> 时间：2012-10-19T09:39:17.440
> 
> 标签：css, google-chrome

有没有人注意到 Windows 上最新的 Chrome (22.0.1229.94 m) 的渲染发生了变化？

在页面上

[http://worldwide.espacenet.com/](http://worldwide.espacenet.com/)

直到最近（在 IE8/9、FX16/17、Safari 5 中都有）

![在此处输入图像描述](../Images/505ebce587550026f82d2a4c9208e84b.png)

在 Chrome (22.0.1229.94 m) 中：

![在此处输入图像描述](../Images/b7d83bf2d2fd63e62a1031d84c667295.png)

CSS 以`YUI Reset CSS version: 2.5.1`

这是相关的html

```
<div class="epoBar epoBarAction">
  <div class="secondary">
    <div class="epoBarItem">
      <a href="javascript:clearFormContents(document.searchForm);">Clear</a>
    </div>
    <div class="epoBarItem epoBarItemForm">
      <div class="formElement">
        <span class="inputsubmit">
          <input type="submit" class="submit" name="Submit" value="Search">
        </span>
      </div>
    </div>
  </div>
</div> 
```

**奇怪的行为：**如果我检查元素并切换`float:left`下面两次，按钮会按原样对齐

```
div.epoBar div.epoBarItem {
  float: left;
  min-height: 1.67em;
  padding-bottom: 0.42em;
} 
```

此外，如果我`width:150px`使用 class="secondary" 添加到 div，它也会对齐。

有什么明显奇怪的地方，还是我在 Chrome 中遗漏了一个已知的新错误？

希望有人会如此友善并检查页面

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T10:14:56.137

## 字体渲染

Google chrome 在 Windows 上以与其他浏览器不同的方式呈现字体，以使其无需管理员权限即可安装。我知道，这很痛苦，但它们比安装抗锯齿需要管理员权限更重要。也就是说，字体可能会超出您要放入的容器的宽度，并且应该可以通过向容器添加更大的宽度或完全删除它来修复。同样使用 ems 而不是 px 将在浏览器中提供不同的字体大小。

# jenkins - Jenkins 在作为 winservice 运行时无法执行

> ID：12971458
> 
> 赞同：0
> 
> 时间：2012-10-19T09:39:21.867
> 
> 标签：jenkins

当使用war文件打开jenking时，我可以从jenkins成功运行我的脚本。如果将 jenkinks 设置为 winservice，我的脚本在中间失败。

我正在尝试从 jenkinks 运行一个 start.bat 文件，这个 bat 文件调用一个 java 类。这个 java 类再次使用 bat 文件来运行 plink 命令。

如果 jenkinks 作为 winservice 运行并且我无法查看输出，因为它在后台运行，则执行在此步骤停止。

有什么方法可以让 jenkinks 在作为 winservice 运行时表现正常

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T14:35:45.707

尝试这个：

**1.**转到服务（按 Windows 键，输入“服务”，从匹配列表中选择“服务”）。

**2.**找到Jenkins服务并打开它的属性

**3.**切换到登录选项卡

**4.**将服务更改为以您的身份运行，而不是本地系统用户。

**5.**重启服务。

另一种方法是修复本地系统用户帐户（可能是环境变量），使其作为本地系统用户工作。

# python - 如何查找一个秘密单词是否包含列表中的所有字符？

> ID：12971474
> 
> 赞同：2
> 
> 时间：2012-10-19T09:40:16.570
> 
> 标签：python, string, list, function

我一直在尝试解决这个问题，因为它是构建 Hangman 游戏的一部分。

我的问题是我需要编写一个代码来检查所有列表项是否都在密码中。如果都在列表中，则返回 True，否则返回 False。

这是我所做的工作：

```
def isWordGuessed(secretWord, lettersGuessed):
    a_list = []
    for i in range(0, len(lettersGuessed)):

        a_list.append(lettersGuessed[i])
    str1 = ''.join(a_list)
    if str1 in secretWord:
        return 1
    else:
        return 0

isWordGuessed('apple', ['e', 'i', 'k', 'p', 'r', 's']) 
```

但是，我试图这样做：

isWordGuessed('apple', ['a', 'p', 'l', 'p', 'e'])

它返回 False，即使列表中的所有字母都在“apple”中

我想我可以在不制作字符串的情况下解决这个问题，但我不知道。顺便说一句，这必须适用于给定的任何单词和列表。如果所有列表项都在一个单词中，则为真，否则为假...有帮助吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-19T09:45:08.740

我会将秘密词和已经猜到的字母都转换为集合，并检查秘密词的字符集是否是猜测字符集的子集：

```
def isWordGuessed(secretWord, lettersGuessed):
    return set(secretWord) <= set(lettersGuessed) 
```

# c# - 在 VS 中从 C# 调用 C++ DLL 失败。在VS之外运行exe，它可以工作

> ID：12971477
> 
> 赞同：1
> 
> 时间：2012-10-19T09:40:32.670
> 
> 标签：c#, c++, .net, pinvoke, calling-convention

我有一个从 C# 控制台应用程序调用的 C++ DLL，如下所示。

在 Visual Studio 中运行以对其进行调试时，它会引发异常，指出堆栈不稳定并检查方法参数是否正确。但是，如果我从 Windows 资源管理器在 VS 之外运行 *.exe，它会按预期将数据返回到屏幕。

我怎样才能让它在 Visual Studio 中运行？

谢谢

```
**From the C++ header file:**
#ifdef RFIDSVRCONNECT_EXPORTS
#define RFID_CONN_API __declspec(dllexport)
#else
#define RFID_CONN_API __declspec(dllimport)
#endif

RFID_CONN_API BSTR rscListDevices( long showall ) ;

[DllImport("MyDLL.dll")]
[return: MarshalAs(UnmanagedType.BStr)]
public static extern string rscListDevices(int showall);

static void Main(string[] args)
{
  string data= rscListDevices(0);
  Console.WriteLine(data);
  Console.ReadKey();
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-19T09:50:33.790

首先，确保在[C++](http://msdn.microsoft.com/en-us/library/k2b2ssfy%28v=vs.80%29.aspx)和[C#](http://msdn.microsoft.com/en-us/library/system.runtime.interopservices.callingconvention.aspx)中使用相同的调用约定。

我怀疑[`/Gd`](http://msdn.microsoft.com/en-us/library/46t77ak2.aspx)编译器选项已设置（因为它是默认设置的），因此[`__cdecl`](http://msdn.microsoft.com/en-us/library/zkwh89ks.aspx)用作未标记函数的默认调用约定。

您可以通过在 C# 代码中指定相同的调用约定来修复崩溃：

```
[DllImport("MyDLL.dll", CallingConvention=CallingConvention.Cdecl))]
[return: MarshalAs(UnmanagedType.BStr)]
public static extern string rscListDevices(int showall); 
```

或将`rscListDevices`'s 调用约定更改为[`__stdcall`](http://msdn.microsoft.com/en-us/library/zxk0tw93%28v=vs.80%29.aspx)（这是 C# 中的默认设置）：

```
RFID_CONN_API BSTR __stdcall rscListDevices( long showall ) ; 
```

您还可以`__stdcall`通过手动将编译器选项从 /Gd 更改为 /Gz 或使用“项目属性”对话框，将 C++ DLL 中未标记函数的默认调用约定设置为： ![更改 Visual Studio 中的默认调用约定](../Images/7b17349b70c3826528e1e981d13896f9.png)

但是如果你**真的**想禁用 MDA，你可以去 Debug->Exceptions 并取消选中 Managed Debugging Assistance。

[您可以在此处](http://msdn.microsoft.com/en-us/library/0htdy0k3.aspx)和[此处](http://msdn.microsoft.com/en-us/library/d21c150d.aspx)阅读有关 pInvokeStackImbalance 和 MDA的更多信息。

# php - 分页在计数和划分中起作用，但链接不会更改记录

> ID：12971481
> 
> 赞同：0
> 
> 时间：2012-10-19T09:40:44.760
> 
> 标签：php, mysql, pagination

尝试应用此代码。它似乎在计算记录的数量，但是当您单击链接切换页面时，url 似乎获取了 GET 变量，但没有任何反应。第一页中的相同 2 条记录保留在那里。

**这是页面**

```
<?php     

require("base.php");
include_once('pagination.class.php');

$items = 2;
$page = 1;

if(isset($_GET['page']) and is_numeric($_GET['page']) and $page = $_GET['page'])
         $limit = " LIMIT ".(($page-1)*$items).",$items";
      else
         $limit = " LIMIT $items";

         $aux = Mysql_Fetch_Assoc(mysql_query("SELECT count(*) as total FROM claiminfo WHERE ( privacyset='1') "));

         $query = mysql_query("SELECT *, claiminfo.claim_id AS id FROM claiminfo LEFT JOIN ( claim_pics ) ON ( claiminfo.claim_id = claim_pics.claim_id )  WHERE (    
         privacyset='1') && (picID IS NOT NULL) ORDER BY claiminfo.ts DESC".$limit);

        if($aux['total']>0){
            $p = new pagination;
            $p->Items($aux['total']);
            $p->limit($items);
            $p->target("/gallery/");
            $p->currentPage($page);
            $p->calculate();
            $p->changeClass("pagination");

            $p->show();

                      while( $row = mysql_fetch_assoc( $query ) ) { 

                                        $namelocation =      $row['namelocation'];
                                        $claimholder =   $row['claimholder'];
                                        $occasion =      $row['occasion'];
                                        $geotag =    $row['geotag'];
                                        $lat =   $row['lat'] ;
                                        $lng =   $row['lng'];
                                        $claim_id = $row['id']; 
                                        $img = $row['location'];

echo "

<div class='clearfix draft product' style='margin-top: 30px;
float: left;
padding: 17px 4px 0px 20px;
margin-right: 30px;
border-style: solid;
border-color: #F092A1;
'>
<div class='photo' style='float: left;'>
<a href='/view/?claim_id=$claim_id'><img alt='' width='130' height='55' src='$img' /></a>
</div>
<div class='basic' style='float: left; margin-left: 30px;width:280px;border:1px;'>
<h3><a href='/view/?claim_id=$claim_id'>$namelocation</a></h3>

<p style='color: black;
font-family: arial;
font-size: 20px;
float: left;
'>
$occasion
</p>
</div>
<div class='stats' style='margin-top: 80px;
margin-left: 160px;'>
<div class='stat'>
<span class='unit'>
<b>$claimholder</b>
<br />
</span>
</div>
<div class='stat'>
<b>Lat:</b>
<span class='unit'>
$lat
</span>
</div>
<div class='stat'>
<b>Lng:</b>
<span class='unit'>
$lng
</span>

</div>
<br />

</div>
</div>
";

                      }

        }else
            echo"There no are records to paginate.";

                       ?> 
```

**这是脚本**

```
<?php
class pagination{
/*
Script Name: *Digg Style Paginator Class
Script URI: http://www.mis-algoritmos.com/2007/05/27/digg-style-pagination-class/
Description: Class in PHP that allows to use a pagination like a digg or sabrosus style.
Script Version: 0.4
Author: Victor De la Rocha
Author URI: http://www.mis-algoritmos.com
*/
        /*Default values*/
        var $total_pages = -1;//items
        var $limit = null;
        var $target = ""; 
        var $page = 1;
        var $adjacents = 2;
        var $showCounter = false;
        var $className = "pagination";
        var $parameterName = "page";
        var $urlF = false;//urlFriendly

        /*Buttons next and previous*/
        var $nextT = "Next";
        var $nextI = "&#187;"; //&#9658;
        var $prevT = "Previous";
        var $prevI = "&#171;"; //&#9668;

        /*****/
        var $calculate = false;

        #Total items
        function items($value){$this->total_pages = (int) $value;}

        #how many items to show per page
        function limit($value){$this->limit = (int) $value;}

        #Page to sent the page value
        function target($value){$this->target = $value;}

        #Current page
        function currentPage($value){$this->page = (int) $value;}

        #How many adjacent pages should be shown on each side of the current page?
        function adjacents($value){$this->adjacents = (int) $value;}

        #show counter?
        function showCounter($value=""){$this->showCounter=($value===true)?true:false;}

        #to change the class name of the pagination div
        function changeClass($value=""){$this->className=$value;}

        function nextLabel($value){$this->nextT = $value;}
        function nextIcon($value){$this->nextI = $value;}
        function prevLabel($value){$this->prevT = $value;}
        function prevIcon($value){$this->prevI = $value;}

        #to change the class name of the pagination div
        function parameterName($value=""){$this->parameterName=$value;}

        #to change urlFriendly
        function urlFriendly($value="%"){
                if(eregi('^ *$',$value)){
                        $this->urlF=false;
                        return false;
                    }
                $this->urlF=$value;
            }

        var $pagination;

        function pagination(){}
        function show(){
                if(!$this->calculate)
                    if($this->calculate())
                        echo "<div class=\"$this->className\">$this->pagination</div>\n";
            }
        function getOutput(){
                if(!$this->calculate)
                    if($this->calculate())
                        return "<div class=\"$this->className\">$this->pagination</div>\n";
            }
        function get_pagenum_link($id){
                if(strpos($this->target,'?')===false)
                        if($this->urlF)
                                return str_replace($this->urlF,$id,$this->target);
                            else
                                return "$this->target?$this->parameterName=$id";
                    else
                        return "$this->target&$this->parameterName=$id";
            }

        function calculate(){
                $this->pagination = "";
                $this->calculate == true;
                $error = false;
                if($this->urlF and $this->urlF != '%' and strpos($this->target,$this->urlF)===false){
                        //Es necesario especificar el comodin para sustituir
                        echo "Especificaste un wildcard para sustituir, pero no existe en el target<br />";
                        $error = true;
                    }elseif($this->urlF and $this->urlF == '%' and strpos($this->target,$this->urlF)===false){
                        echo "Es necesario especificar en el target el comodin % para sustituir el número de página<br />";
                        $error = true;
                    }

                if($this->total_pages < 0){
                        echo "It is necessary to specify the <strong>number of pages</strong> (\$class->items(1000))<br />";
                        $error = true;
                    }
                if($this->limit == null){
                        echo "It is necessary to specify the <strong>limit of items</strong> to show per page (\$class->limit(10))<br />";
                        $error = true;
                    }
                if($error)return false;

                $n = trim($this->nextT.' '.$this->nextI);
                $p = trim($this->prevI.' '.$this->prevT);

                /* Setup vars for query. */
                if($this->page) 
                    $start = ($this->page - 1) * $this->limit;             //first item to display on this page
                else
                    $start = 0;                                //if no page var is given, set start to 0

                /* Setup page vars for display. */
                $prev = $this->page - 1;                            //previous page is page - 1
                $next = $this->page + 1;                            //next page is page + 1
                $lastpage = ceil($this->total_pages/$this->limit);        //lastpage is = total pages / items per page, rounded up.
                $lpm1 = $lastpage - 1;                        //last page minus 1

                /* 
                    Now we apply our rules and draw the pagination object. 
                    We're actually saving the code to a variable in case we want to draw it more than once.
                */

                if($lastpage > 1){
                        if($this->page){
                                //anterior button
                                if($this->page > 1)
                                        $this->pagination .= "<a href=\"".$this->get_pagenum_link($prev)."\" class=\"prev\">$p</a>";
                                    else
                                        $this->pagination .= "<span class=\"disabled\">$p</span>";
                            }
                        //pages 
                        if ($lastpage < 7 + ($this->adjacents * 2)){//not enough pages to bother breaking it up
                                for ($counter = 1; $counter <= $lastpage; $counter++){
                                        if ($counter == $this->page)
                                                $this->pagination .= "<span class=\"current\">$counter</span>";
                                            else
                                                $this->pagination .= "<a href=\"".$this->get_pagenum_link($counter)."\">$counter</a>";
                                    }
                            }
                        elseif($lastpage > 5 + ($this->adjacents * 2)){//enough pages to hide some
                                //close to beginning; only hide later pages
                                if($this->page < 1 + ($this->adjacents * 2)){
                                        for ($counter = 1; $counter < 4 + ($this->adjacents * 2); $counter++){
                                                if ($counter == $this->page)
                                                        $this->pagination .= "<span class=\"current\">$counter</span>";
                                                    else
                                                        $this->pagination .= "<a href=\"".$this->get_pagenum_link($counter)."\">$counter</a>";
                                            }
                                        $this->pagination .= "...";
                                        $this->pagination .= "<a href=\"".$this->get_pagenum_link($lpm1)."\">$lpm1</a>";
                                        $this->pagination .= "<a href=\"".$this->get_pagenum_link($lastpage)."\">$lastpage</a>";
                                    }
                                //in middle; hide some front and some back
                                elseif($lastpage - ($this->adjacents * 2) > $this->page && $this->page > ($this->adjacents * 2)){
                                        $this->pagination .= "<a href=\"".$this->get_pagenum_link(1)."\">1</a>";
                                        $this->pagination .= "<a href=\"".$this->get_pagenum_link(2)."\">2</a>";
                                        $this->pagination .= "...";
                                        for ($counter = $this->page - $this->adjacents; $counter <= $this->page + $this->adjacents; $counter++)
                                            if ($counter == $this->page)
                                                    $this->pagination .= "<span class=\"current\">$counter</span>";
                                                else
                                                    $this->pagination .= "<a href=\"".$this->get_pagenum_link($counter)."\">$counter</a>";
                                        $this->pagination .= "...";
                                        $this->pagination .= "<a href=\"".$this->get_pagenum_link($lpm1)."\">$lpm1</a>";
                                        $this->pagination .= "<a href=\"".$this->get_pagenum_link($lastpage)."\">$lastpage</a>";
                                    }
                                //close to end; only hide early pages
                                else{
                                        $this->pagination .= "<a href=\"".$this->get_pagenum_link(1)."\">1</a>";
                                        $this->pagination .= "<a href=\"".$this->get_pagenum_link(2)."\">2</a>";
                                        $this->pagination .= "...";
                                        for ($counter = $lastpage - (2 + ($this->adjacents * 2)); $counter <= $lastpage; $counter++)
                                            if ($counter == $this->page)
                                                    $this->pagination .= "<span class=\"current\">$counter</span>";
                                                else
                                                    $this->pagination .= "<a href=\"".$this->get_pagenum_link($counter)."\">$counter</a>";
                                    }
                            }
                        if($this->page){
                                //siguiente button
                                if ($this->page < $counter - 1)
                                        $this->pagination .= "<a href=\"".$this->get_pagenum_link($next)."\" class=\"next\">$n</a>";
                                    else
                                        $this->pagination .= "<span class=\"disabled\">$n</span>";
                                    if($this->showCounter)$this->pagination .= "<div class=\"pagination_data\">($this->total_pages Pages)</div>";
                            }
                    }

                return true;
            }
    }
?> 
```

有没有人有预感。

仅供参考：它在 Wordpress 上，但这完全是自定义 mysql 代码。我不是在打电话或任何事情。我想知道也许 Wordpress .htaccess 可能会阻止它工作。

# vb.net - 具有自定义标题栏和 formborderstyle = None 最大化时保持可拖动的表单

> ID：12971482
> 
> 赞同：1
> 
> 时间：2012-10-19T09:40:46.877
> 
> 标签：vb.net, custom-controls, draggable, maximize

我使用此代码来最大化和恢复我的自定义表单。但是当窗体最大化时，它仍然可以拖动，我使用计时器来拖动窗体。

```
Private Sub btnMaximize_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles btnMaximize.Click, lblTitle.MouseDoubleClick
    Dim maximizeHeight As Integer = Screen.PrimaryScreen.WorkingArea.Height
    Dim maximizeWidth As Integer = Screen.PrimaryScreen.WorkingArea.Width
    Dim maximizeLocation As Point = New Point(0, 0)
    Dim fullscreen As Boolean = False

    If Me.Height = maximizeHeight Or Me.Width = maximizeWidth Or Me.Location = maximizeLocation Then
        fullscreen = True
    Else
        fullscreen = False
    End If

    If fullscreen = True Then
        Me.Size = New Size(1000, 500)
        Me.Left = (Screen.PrimaryScreen.WorkingArea.Width - Me.Width) / 2
        Me.Top = (Screen.PrimaryScreen.WorkingArea.Height - Me.Height) / 2
    ElseIf fullscreen = False Then
        Me.Location = New Point(0, 0)
        Me.Size = New Size(Screen.PrimaryScreen.WorkingArea.Width, Screen.PrimaryScreen.WorkingArea.Height)
    End If
End Sub

Private Sub pnlBar_MouseDown(ByVal sender As Object, ByVal e As System.Windows.Forms.MouseEventArgs) Handles lblTitle.MouseDown
    MoveTmr.Start()
    refpositions()
End Sub

Private Sub MoveTmr_Tick(ByVal sender As Object, ByVal e As System.EventArgs) Handles MoveTmr.Tick
    Me.Location = oloc - ocur + System.Windows.Forms.Cursor.Position
    refpositions()
End Sub

Private Sub pnlBar_MouseUp(ByVal sender As Object, ByVal e As System.Windows.Forms.MouseEventArgs) Handles lblTitle.MouseUp
    MoveTmr.Stop()
    refpositions()
End Sub

Private Sub RszTmr_Tick(ByVal sender As Object, ByVal e As System.EventArgs) Handles RszTmr.Tick
    Me.Size = appSize - curPos + Cursor.Position
    refpositions()
End Sub 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T16:41:05.097

制作：

```
Dim fullscreen As Boolean = False 
```

一个类变量。

然后编辑此代码以适合您的变量：

```
Private Sub Mover_Tick(sender As System.Object, e As System.EventArgs) Handles Mover.Tick
    If fullscreen = false Then
         Dim pt As New Point((Me.Location.X + (MousePosition.X - mPosX)), (Me.Location.Y + (MousePosition.Y - mPosY)))
         Me.Location = pt
         mPosX = MousePosition.X
         mPosY = MousePosition.Y
    End If
End Sub 
```

编辑：

也实现这个：

```
Private Sub Title_StartDrag(sender As System.Object, e As MouseEventArgs) Handles Title.MouseDown
    mPosX = MousePosition.X
    mPosY = MousePosition.Y
    If e.Button = Windows.Forms.MouseButtons.Left Then
        Mover.Start()
    End If
End Sub

Private Sub Title_StopDrag(sender As System.Object, e As MouseEventArgs) Handles Title.MouseUp
    Mover.Stop()
End Sub 
```

你也可能想通过说 Me.WindowState = FormWindowState.Maximized 来使它更简单

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-11-07T14:25:45.367

我使用 Mousedown、Mouseup 和 Mousemove 事件来移动我的表单。

```
Public Class Form1

Private Is_Dragged As Boolean = False
Private M_DownX As Integer
Private M_DownY As Integer

Private Sub Form1_MouseDown(sender As Object, e As MouseEventArgs) Handles Me.MouseDown

    If e.Button = MouseButtons.Left Then
        Is_Dragged = True
        M_DownX = e.X
        M_DownY = e.Y
    End If

End Sub
Private Sub Form1_MouseUp(sender As Object, e As MouseEventArgs) Handles Me.MouseUp

    If e.Button = MouseButtons.Left Then
        Is_Dragged = False
    End If

End Sub
Private Sub Form1_MouseMove(sender As Object, e As MouseEventArgs) Handles Me.MouseMove

    If Is_Dragged Then
        Dim tmp_pnt As Point = New Point()

        tmp_pnt.X = Me.Location.X + (e.X - M_DownX)
        tmp_pnt.Y = Me.Location.Y + (e.Y - M_DownY)
        Me.Location = tmp_pnt
        tmp_pnt = Nothing

    End If

End Sub

End Class 
```

并最大化我的形式。

```
Private Sub Btn_Main_Max_Click(sender As Object, e As EventArgs) Handles Btn_Main_Max.Click

    Static IsAlreadyResized As Boolean

    If Not IsAlreadyResized Then
        Me.WindowState = FormWindowState.Maximized
        IsAlreadyResized = True
        Exit Sub
    End If

    If IsAlreadyResized Then
        Me.WindowState = FormWindowState.Normal
        IsAlreadyResized = False

    End If

 End Sub 
```

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2021-03-06T13:30:06.853

您可以在代码中或视觉上创建一个面板并放置 dock.top 然后您可以在侧面或中间放置一个标签，并在窗口左侧创建一个图片框创建关闭最小化和最大化或其他按钮并添加上面的朋友代码通过标题栏移动表单，就像在 Windows 中一样

# javascript - 插件 jquery 适用于一个 div

> ID：12971488
> 
> 赞同：1
> 
> 时间：2012-10-19T09:41:08.950
> 
> 标签：javascript, jquery, jquery-ui, jquery-plugins

这个问题是[我从脚本创建 textarea 扩展器的延续，但之后它没有扩展，](https://stackoverflow.com/questions/12966162/i-created-textarea-expander-from-script-but-after-it-doesnt-expands/12966219#12966219) 因为我用 textarea 创建了一个表，我想调用插件 textarea。在 appendTo 之后调用，`jQuery("textarea[class*=expand]").TextAreaExpander();` 我用 class="expand" 搜索所有 textarea 并工作。如何编辑这句话以仅对一个 div 感兴趣？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T09:44:09.233

假设你的结构是这样的：

```
<div id="parent">
    <textarea class="expand"></textarea>
</div> 
```

你可以简单地这样做：

```
$('#parent > textarea[class*=expand]'); 
```

`>`是子选择器并`#id`选择具有给定 id 的元素。

**编辑**

正如@VijayVerma 在评论中所说：如果您`<div>`还没有 ID，只需将 ID 添加到 textarea：

```
<textarea id="onlyme" class="expand"></textarea> 
```

并仅使用 ID 选择器选择它：

```
$('#onlyme'); 
```

如果您的 < `div>`s 已经有 ID，那么您可以使用我发布的第一个解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T09:45:30.570

给 div 一个 id..let 说

```
<div id="YourId"><textarea>..</textarea></div>

jQuery("#YourID > textarea[class*=expand]").TextAreaExpander(); 
```

# php - 语言链接始终到家

> ID：12971492
> 
> 赞同：1
> 
> 时间：2012-10-19T09:41:18.053
> 
> 标签：php, jquery, html, ajax

我正在这个网站上工作：www.canal.es/wordpress/

我正在使用 qtranslate，这是我在语言上使用的代码：

```
 <div id="language">
        <ul>
            <li><a href="?lang=es" <?php if (qtrans_getLanguage() == 'es') echo 'class="active"' ?>>ES -</a></li>
            <li><a href="?lang=ca" <?php if (qtrans_getLanguage() == 'ca') echo 'class="active"' ?>>CA</a></li>
        </ul>
    </div> 
```

问题是，如果我进入网站的任何页面/类别/帖子并且我想将语言更改为“CA”或反之亦然，它会获取语言但总是返回到主页。

我希望语言的变化发生在同一页面上，而不是回到家中。我做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T09:46:14.673

您必须将当前 URL 放入`lang`更改参数的链接中。您必须确定当前 URL 是否已包含该参数，然后更改它，否则只需添加它。

# lucene.net - 短语同义词分析器 Lucene.net？

> ID：12971495
> 
> 赞同：3
> 
> 时间：2012-10-19T09:41:38.950
> 
> 标签：lucene.net, synonym, phrase

我正在使用同义词分析器，但这只会添加单个单词的同义词。是否有类似的短语分析器，或者有人知道添加短语同义词的任何其他方式吗？例如，“The Big Apple”应该返回“New York”的热门歌曲。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T20:36:26.263

您显然可以构建自己的分析器...我构建了一个同义词分析器，它采用单个单词并匹配多个单词...自定义开发。

而不是这样做，我建议在查询构建或解析期间动态注入同义词。例如，您可以让一个人搜索“The Big Apple”...... 1）检查短语“The Big Apple”是否有同义词短语 2）如果存在同义词短语，则使用 2 个 PhraseQueries “The Big Apple”构建一个布尔查询和“纽约”。

另一种（更高效的方式）是使用 MultiPhraseQueries 而不是布尔 PhraseQueries。这将取决于您的布尔查询有多复杂......我发现在我的情况下两者都工作得非常快。

不利的一面是搜索速度会慢一些。好处是它是完全动态的，如果您配置/更改同义词，则不需要重建索引。如果您有一个多租户解决方案，其中每个客户端可以有不同的同义词，这也是完美的。

# c++ - 如何在标准 C/C++ 中获取文件分隔符：/ 或 \？

> ID：12971499
> 
> 赞同：35
> 
> 时间：2012-10-19T09:41:54.870
> 
> 标签：c++, c, file, c++11, filesystems

我想写一个函数：

```
inline char separator()
{
    /* SOMETHING */
} 
```

在标准 C/C++/C++11 中返回系统的文件分隔符？（我的意思是斜杠或反斜杠，具体取决于系统）。有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：49
> 
> 时间：2012-10-19T09:43:53.067

除了检查 ifdefs 之外，我不知道该怎么做

```
inline char separator()
{
#ifdef _WIN32
    return '\\';
#else
    return '/';
#endif
} 
```

或（由 PaperBirdMaster 建议）

```
const char kPathSeparator =
#ifdef _WIN32
                            '\\';
#else
                            '/';
#endif 
```

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2016-11-08T16:53:23.033

如果您的编译器提供 c++17 功能，那么您可以使用`std::filesystem::path::preferred_separator`根据您的平台生成首选分隔符字符的方法。例如，在 Windows 上这通常是`\`，而在 Linux 上你会得到`/`.

有关更多信息，请参阅[此](https://en.cppreference.com/w/cpp/filesystem/path)。

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2015-05-15T13:54:30.150

这个问题确实暗示了一个更棘手的问题。

如果您只关心 UNIX 与 Winodws 并且只关心目录和文件，那么您已经看到的（大部分）将起作用，但是将路径名拼接到其组件中的更一般的问题是一个更丑陋的问题。根据平台，路径可能包括以下一项或多项：

*   卷标识符
*   目录列表
*   文件名
*   文件内的子流
*   版本号

虽然为此有 3rd 方库（如各种 CPAN Perl 模块、Boost 等），并且每个操作系统都包含为此的系统功能，但 C 没有为此内置任何内容，C++ 标准仅获得了此功能（通过合并Boost 模块）在 2017 年。

此类函数可能需要处理的一些示例是：

*   UNIX 和类 UNIX 系统使用由“/”字符分隔的字符串列表，以“/”开头，表示绝对路径（相对于相对路径）。在某些情况下（如 NFS），也可能有主机名前缀（带有“:”分隔符）
*   DOS 和 DOS 派生的操作系统（Windows、OS/2 和其他）使用“\”作为目录分隔符（API 也接受“/”），但路径也可以以卷信息为前缀。它可以是驱动器盘符（“C:”）或 UNC 共享名（“\\MYSERVER\SHARE\”）。还有其他前缀表示不同类型的服务器，后缀表示文件中的非默认流。
*   Mac（经典 Mac OS、Carbon 和一些 Cocoa API）使用“:”作为目录分隔符，第一个术语是卷名，而不是目录名。Mac 文件还可能包含子流（“forks”），这些子流使用专用 API 通过相同的名称访问。这对于在经典 Mac 软件中广泛使用的*资源分叉*尤为重要。
*   Mac OS X 在使用 UNIX API 时通常会执行类 UNIX 系统所做的事情，但它们也可以通过后缀“.”来表示命名的子流（“forks”）。后跟 fork-name 到文件名。
*   最新版本的 Cocoa（Mac OS X、iOS 等）建议使用基于 URL 的 API 来表示文件，因为这个问题越来越复杂。想想诸如基于云的文档和其他复杂的网络文件系统之类的东西。
*   VMS 相当复杂（[https://web.archive.org/web/20160324205714/http://www.djesys.com/vms/freevms/mentor/vms_path.html](https://web.archive.org/web/20160324205714/http://www.djesys.com/vms/freevms/mentor/vms_path.html)），但它具有代表卷、目录的组件-路径、文件和文件修订。

还有很多其他的。

值得注意的是，C++17 文件系统库并未涵盖所有这些可能性。它`std::filesystem::path`由一个可选的*根名称*（卷标识符）、一个可选的*根目录*（用于标识绝对路径）和一系列由目录分隔符分隔的文件名组成。这涵盖了在 UNIX 平台上可能有效的所有内容以及其他平台的大多数用例，但并不全面。例如，它不支持子流（依靠操作系统以某种方式将它们映射到文件名上——这是由 Mac OS X 完成的，但不是经典的 MacOS）。它也不包括对文件版本号的支持。

另请参阅[Wikipedia 关于 Path](https://en.wikipedia.org/wiki/Path_%28computing%29)和 C++17 [std::filesystem::path](http://en.cppreference.com/w/cpp/filesystem/path)类的条目

[http://en.cppreference.com/w/cpp/filesystem](http://en.cppreference.com/w/cpp/filesystem)

我建议你看看你想用目录分隔符做什么（提取基本名称，将路径分解为目录列表等）并编写一个函数来做到这一点。如果您使用的是 C++17（并且您确定您的代码不会被 17 之前的 C++ 编译器编译），那么您可以（可能）使用标准 C++ 库代码来编写此函数的可移植实现。如果没有，该功能将需要为`#ifdef`您将支持的每个平台使用特定于平台的 s，使用`#error`if none of the conditions are meet，强制您为意外平台添加条件。

或者使用包含所有这些功能的第 3 方库（如 Boost），如果这是可以接受的。

* * *

## 回答 #4

> 赞同：12
> 
> 时间：2012-10-19T10:09:17.790

可能是这样的

```
#if defined(WIN32) || defined(_WIN32) 
#define PATH_SEPARATOR "\\" 
#else 
#define PATH_SEPARATOR "/" 
#endif 
```

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2015-09-07T12:59:32.640

接受的答案在 Cygwin 下不起作用。在 Windows 上运行的 Cygwin 编译程序可以使用 Windows 样式的 '\' 分隔符，但它没有定义 _WIN32 等。在 Cygwin 下工作的修改后的解决方案：

```
inline char separator()
{
#if defined _WIN32 || defined __CYGWIN__
    return '\\';
#else
    return '/';
#endif
} 
```

或者

```
const char kPathSeparator =
#if defined _WIN32 || defined __CYGWIN__
    '\\';
#else
    '/';
#endif 
```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2020-12-19T18:32:14.450

[`std::filesystem::path::preferred_separator`](https://en.cppreference.com/w/cpp/filesystem/path)现在应该被用作一个干净的`C++17`库函数，看起来如何。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2016-07-05T19:12:37.830

我很惊讶没有人提供以下内容。这建立在其他人在这里提供的基础之上。

尽管在此示例中，我试图动态获取正在运行的可执行文件的名称以供使用，但根据需要进行跳转并重新应用它并不难。

Windows 使用正斜杠来表示参数。因此，您可以在第一个参数中首先检查它`argv[0]`，其中包含正在运行的程序的名称。

请注意，以下结果会剥离最后一个斜杠之前的路径名，留下`sepd`程序的文件名。

```
#include <string.h>
#include <stdio.h>

int main(int argc, char *argv[]){
//int a = 1
//int this = (a == 1) ? 20 : 30;  //ternary operator
//is a==1 ? If yes then 'this' = 20, or else 'this' = 30
    char *sepd = (strrchr(argv[0], '\/') != NULL) ? 
        strrchr(argv[0], '\/') : 
        strrchr(argv[0], '\\');
    printf("%s\n\n", sepd);
    printf("usage: .%s <host> \n\n", sepd);
    while (getchar() != '\n');
} 
```

但实际上，这是相当肮脏的，而且随着 Windows 最近加入 Bash（此时尚未实现）的举措，这可能会产生意想不到或意想不到的结果。

它也不像其他人提供的那样理智和不受错误影响，尤其是`#ifdef _WIN32`.

# c++ - c++ 用户定义类型生命周期

> ID：12971500
> 
> 赞同：-1
> 
> 时间：2012-10-19T09:41:55.900
> 
> 标签：c++, constructor, lifetime

我想知道创建用户定义类型的对象的过程是什么。

**例子**

```
class A{
    int a; 
    void f();
    int b;
    A() /*initialization list*/ {}
};

int main(){
    A ob;
} 
```

**1）**我想知道什么时候分配对象，什么时候`A`调用构造函数。
**2）**它的成员什么时候被分配？是否同时分配了对象本身？
**3)**我什么时候可以说该对象已完全创建并且可以安全使用？是在构造函数开始之后，还是直到构造函数结束？
**4）**我知道成员在构造函数初始化列表中被初始化，所以它在构造函数的调用之前。这是否意味着成员在对象存在之前存在？

**5)**对象何时被释放？是在析构函数结束之前吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T09:59:51.790

1.  在“A ob;”行。首先分配对象的存储空间，然后调用构造函数。
2.  它是在对象构造函数调用之前。
3.  如果构造函数没有完成它的工作 - 对象还没有创建。如果您在构造函数中遇到异常，则不会调用析构函数。
4.  是的。您的对象不存在，但已分配。
5.  对象在析构函数调用后被释放（或者如果构造函数中有异常则不调用）。

一些附加[信息](http://www.cs.ust.hk/~dekai/library/ECKEL_Bruce/TICPP-2nd-ed-Vol-one/TICPP-2nd-ed-Vol-one-html/Chapter13.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T09:56:00.430

当您进入定义它的范围时，就会创建该对象。

它首先分配对象，然后调用它的构造函数。您的对象在构造函数执行结束时可以安全使用。分配对象保留`sizeof(A)`，因此同时分配每个成员（这就是为什么它们被称为成员）。

初始化列表在构造函数执行之前被调用，但此时它已经被分配，因此初始化它们是安全的，因为你的对象存在。

对象在析构函数执行结束时被释放，而不是之前。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-19T09:56:19.590

1）在你的`A ob;`线上，但它将分配在堆栈上，而不是堆上！

2）所以构造函数将被调用，所以是的。

3）如果您使用默认构造函数，是的，您可以这样做

4）看起来和3一样的问题，所以是的

5）不，您可以访问析构函数中的成员

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-19T09:56:55.970

1.  首先，`class A`分配实例的内存，包括其成员占用的内存。之后，构造函数`A::A()`被调用。
2.  是的，见上文。
3.  答案取决于您对“完全创建”的定义。在构造函数的主体中做几乎任何事情都是安全的，但有一些警告。最广为人知的是关于虚拟方法调用。
4.  构造函数初始化列表是构造函数的一部分，它只是在控制流到达构造函数的左大括号之前执行。
5.  销毁时，`A::~A()`首先调用析构函数，然后释放对象占用的内存。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-19T10:00:35.877

**1.**对象构造函数调用时会分配对象，创建类的对象时会调用对象构造函数。
**2\.**
**3.**在构造函数结束时因为所有成员都必须初始化
**4\.**
**5.**在调用析构函数之后。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-19T10:14:11.053

首先，您应该将构造函数声明到您的类的公共部分。

1.  内存分配发生在创建对象时（对您来说，它分配在堆栈上）
2.  在创建对象时分配成员
3.  创建对象后（在您的情况下，`A ob`）
4.  不，成员在构造函数创建时初始化
5.  首先调用析构函数，然后释放

注意：标准с++没有指定静态成员的初始化顺序。这取决于编译器。

# git - 如何检测git中的分支点？

> ID：12971503
> 
> 赞同：5
> 
> 时间：2012-10-19T09:42:04.273
> 
> 标签：git

我正在尝试确定分支中的第一次提交。我已经阅读了其他各种 SO 帖子（包括[Find a branch point with Git?](https://stackoverflow.com/questions/1527234/finding-a-branch-point-with-git)），但它们并没有给我我想要的东西。

通过查看分支图，我可以看到可以确定分支何时与 master 分歧（在包含的图像上，紫色线来自“master 上的第二次提交”），但是我无法使用文本在文本中复制它命令行工具（`git log --graph`有效但不是我所追求的）。

我之后的提交是`0124fc8`，即第一次提交到功能/新分支。

所有返回到 master 的合并都使用`--no-ff`.

我试过`git merge-base feature/new-branch master`了，但是这给了我`0f5e36f`（`--all`也一样）

我也试过`git rev-list --boundary feature/new-branch...master`，这给了我几个提交，但没有一个是我想要的。

![显示分支图的 SourceTree](../Images/c309877002d2efff511587c0a68ef4a4.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-19T11:49:56.863

在没有合并回 master 的情况下，最后一个条目`git rev-list master..feature/new-branch`将是您想要的。`a..b`in a rev-list 为您提供`b`'s 历史中所有不在`a`'s 历史中的提交。但是既然你已经合并了，feature/new-branch 历史中的所有提交也都在 master 的历史中，所以我们必须聪明一点。

您链接的问题（更确切地说，[这个答案](https://stackoverflow.com/questions/1527234/finding-a-branch-point-with-git/4991675#4991675)）给出了一个很好的开始。诀窍是`--first-parent`避免将所有合并到 master 的右侧视为 master 历史的一部分。`git rev-list --first-parent master`为您提供直接提交到 master 的所有提交，并且不显示任何已合并的提交。唉，`--first-parent`没有`..`以我们想要的方式组合，所以我们必须制作我们自己的`..`等价物，使用`diff`. 我们可以`diff`用来获取功能/新分支历史记录中所有提交的列表，并删除主“直接”历史记录中的所有提交。我使用反斜杠转义将一个命令拆分为多行：-

```
diff --new-line-format=%L --old-line-format= --unchanged-line-format= \
    <(git rev-list --first-parent master) \
    <(git rev-list --first-parent feature/new-branch) 
```

`diff`使它的选项只打印出第二个输入中的行，而不是第一个输入中的行，没有 + 或 - 的东西，也没有标题。我对 POSIX 不太了解，所以可能只有 GNU diff 有这些选项。同样，对于`<( )`其他两行的运算符，您需要 bash 或 zsh。如果您必须使用其他外壳，您可能需要使用临时文件。

第一个输入（要忽略的行）是要掌握的“直接”历史，正如我们在上面发现的那样；第二个输入是特征/新分支的“直接”历史。该命令的输出是“直接”提交到 feature/new-branch 的所有提交，而不是“直接”提交到 master，其中“直接”表示“不通过合并”。包括在第二个输入中是必要的，以避免在分支 feature/new-branch*之前*`--first-parent`包含合并到 master 中的任何提交，但它会产生从合并到 feature/new-branch 的任何其他分支中排除提交的副作用（如果您只想要第一次提交，这没有什么区别）。

 *与往常一样，输出顺序相反，因此输出的最后一行是您感兴趣的提交。

我真的很想知道你想用这些信息实现什么，因为它似乎根本不符合 Git 的世界模型。Git 用户知道并期望分支的历史记录包括来自分支祖先的历史记录，以及任何合并到其中的历史记录。*

# asp.net-mvc-3 - inheritInChildApplications Web.config 属性在 ASP.NET MVC 3 中是否有效？

> ID：12971505
> 
> 赞同：1
> 
> 时间：2012-10-19T09:42:09.010
> 
> 标签：asp.net-mvc-3, inheritance, web-config

我们在 IIS 7.5 上部署了一个 MVC3 应用程序，现在需要在主应用程序的子目录中部署另一个应用程序。遇到 Web.config 继承冲突后，我们尝试将父应用程序配置文件的 system.web 部分包装在 中`<location path="." inheritInChildApplications="false">`，如接受的[web.config 答案中的建议 - 如何防止所有继承](https://stackoverflow.com/questions/6296168/web-config-how-to-prevent-all-inheritance)，但我们收到错误：

> 如果位置路径引用 machine.config 或根 web.config，则 InheritInChildApplications 不能设置为“false”。

我们做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-30T16:38:21.910

在 51Degrees.mobi 组件中存在一个已知错误，当​​在配置文件中使用 inheritInChildApplications 属性时，该组件以一种导致应用程序崩溃的方式访问其配置。显然它已在较新的库版本中得到修复，如此处[所述](http://51degrees.codeplex.com/workitem/8728)。

# .net - VB.net 数据绑定 linq

> ID：12971506
> 
> 赞同：0
> 
> 时间：2012-10-19T09:42:09.810
> 
> 标签：.net, linq, data-binding

有人可以解释为什么对 textbox2 的数据绑定有效，但对 textbox1 无效？

使用 BindingSource 作为数据源，但直接使用查询也不行。

```
Private Class DTO1
        Public Property id As Integer        
        Public Property value As Nullable(Of Integer)
        Public Property value2 As String
    End Class

    Private Sub Button4_Click(sender As System.Object, e As System.EventArgs) Handles Button4.Click
        Dim lst As New List(Of DTO1)
        Dim a As New DTO1
        a.id = 1
        Dim o As Object = 1
        a.value = o
        lst.Add(a)

        a = New DTO1
        a.id = 2
        a.value = Nothing
        lst.Add(a)

        bs.DataSource = (From p In lst Select p).ToList
        grd.DataSource = bs
        TextBox1.DataBindings.Add("text", grd.DataSource, "value")
        TextBox2.DataBindings.Add("text", grd.DataSource, "value2")
    End Sub 
```

每次我从 textbox1 移出时，都会再次显示初始值。_tia rene

编辑：得到这个工作。使用可为空值时，您必须传入更多参数...

```
Me.DataBindings.Add(pr_PropertyName, pr_Datasource, pr_Datamember, True, DataSourceUpdateMode.OnValidation, Nothing) 
```

成功了

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-20T05:41:27.300

只是为了回答这个问题......

```
.DataBindings.Add(pr_PropertyName, pr_Datasource, pr_Datamember, True, DataSourceUpdateMode.OnValidation, Nothing) 
```

# beagleboard - 在 beagleboard xm hog 描述符算法中，对象检测需要大量时间

> ID：12971507
> 
> 赞同：1
> 
> 时间：2012-10-19T09:42:10.877
> 
> 标签：beagleboard

我正在尝试使用 hog 描述符算法执行对象检测。我是在我的 Ubuntu 12.04 系统中完成的，处理时间为 300 毫秒。然后我尝试使用 beagle board xm rev c3 执行相同的操作，然后我遇到了一些问题。主要问题是处理时间太长，抓取图像和检测物体几乎需要 45 秒。通过将双精度更改为单精度，我可以将处理时间减少到 8.5 秒。

```
But still it takes more than 8 seconds.As in my knowledge it is due to one single function 
  hog.detectMultiScale(img, found, THRESHOLD, cv::Size(2,2), cv::Size(0,0), 1.05, 2);

which takes 8 seconds to process.

I saw in some sites that this function require huge processing power to process so we need some better GPU.

But in our case beagle-board xm has 1GHz processor and 512 MB Ram.

(My Ubuntu system has 2 GHz processor and 1 GB Ram) 
```

我正在处理 320x240 像素的图像。但我通过裁剪拍摄了整个图像的一小部分。然后它在系统中以 300 毫秒执行，但在小猎犬板上执行 8.5 秒。

我正在使用 opencv 2.4.2。

我需要将处理时间从 8 秒减少到至少 2 秒以下。

```
Is any other solution?

Could anyone help me? 
```

# asp.net-mvc-3 - ".. 必须从 WebViewPage 或 WebViewPage 派生 " 在 MonoDevelop 和 MVC3 (OS X) 上

> ID：12971511
> 
> 赞同：19
> 
> 时间：2012-10-19T09:42:31.167
> 
> 标签：asp.net-mvc-3, macos, mono, monodevelop

我正在尝试让一个 MVC 3 Razor 项目与 MonoDevelop 一起使用。

我使用 Mono 2.10.9 / MonoDevelop 3.0.4.7 创建了一个新的 ASP.net MVC 2 项目，并将以下 DLL 从现有的基于 Windows 的 MVC3 项目复制到 Mono 项目的“bin”目录：

```
System.Web.Helpers.dll
System.Web.Razor.dll
System.Web.WebPages.Deployment.dll
System.Web.WebPages.dll
System.Web.WebPages.Razor.dll 
```

已将项目设置为使用 Mono / .NET 4。默认索引文件已被删除并替换为 Index.cshtml 文件。当我执行项目时，出现以下错误：

```
The view at '~/Views/Home/Index.cshtml' must derive from WebViewPage, or WebViewPage<TModel>. 
```

奇怪的是，我之前经历过这个过程并且 MVC 3 页面可以正常工作。只是在升级 Mono（它声称支持 Razor ......？）之后，它现在不再为我工作了。然而，我之前使用 MVC3 创建的项目似乎都可以在新的 Mono 版本中编译和运行。

非常感谢有人能指出我在这些树中哪里可以找到一些木头:)

* * *

## 回答 #1

> 赞同：52
> 
> 时间：2012-10-30T23:20:01.633

如果有人确实遇到过这种情况，那仅仅是因为位于“Views”文件夹下的 web.config 文件尚未更新，因此它引用了 MVC3 Razor 组件。呃。

最简单的做法是从现有的 MVC3 项目中复制一个。

* * *

## 回答 #2

> 赞同：29
> 
> 时间：2016-06-01T08:49:54.787

> 解决方案 1。
> 
> 在您的 cshtml 文件顶部添加以下行。
> 
> ```
> @inherits System.Web.Mvc.WebViewPage 
> ```
> 
> 您现在一定想知道 ASP.NET MVC 模板中的视图在 cshtml 文件顶部没有这一行吗？那么让我们看看第二种解决方案。
> 
> 解决方案 2。
> 
> 添加 web.config 文件并为所有视图指定相同的设置。这是此配置文件中消除此错误消息所需的最少代码。
> 
> ```
> <?xml version="1.0"?>
> <configuration>
>   <configSections>
>     <sectionGroup name="system.web.webPages.razor" type="System.Web.WebPages.Razor.Configuration.RazorWebSectionGroup, 
>                   System.Web.WebPages.Razor, Version=2.0.0.0, Culture=neutral,PublicKeyToken=31BF3856AD364E35">
>       <section name="host" type="System.Web.WebPages.Razor.Configuration.HostSection,
> System.Web.WebPages.Razor, Version=2.0.0.0, Culture=neutral,PublicKeyToken=31BF3856AD364E35"
> requirePermission="false" />
>       <section name="pages" type="System.Web.WebPages.Razor.Configuration.RazorPagesSection,
> System.Web.WebPages.Razor, Version=2.0.0.0, Culture=neutral,PublicKeyToken=31BF3856AD364E35"
> requirePermission="false" />
>     </sectionGroup>
>   </configSections>
> 
>   <system.web.webPages.razor>
>     <pages pageBaseType="System.Web.Mvc.WebViewPage" ></pages>
>   </system.web.webPages.razor>
> </configuration> 
> ```
> 
> 实际需要的设置是 pageBaseType="System.Web.Mvc.WebViewPage"。仅需要其他文本来定义标签。

参考链接：[点击这里](https://blogs.msdn.microsoft.com/gaurav/2014/01/14/the-view-must-derive-from-webviewpage-or-webviewpagetmodel-the-view-at-viewshomeindex-cshtml-must-derive-from-webviewpage-or-webviewpagetmodel/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2019-04-10T20:47:59.293

出于某种原因，需要在顶部添加 @model。我可以通过在页面顶部添加以下语句来修复，尽管我没有向该页面传递任何内容。

```
@model String 
```

# android - 语音信箱如何在安卓手机上工作

> ID：12971517
> 
> 赞同：2
> 
> 时间：2012-10-19T09:42:46.890
> 
> 标签：android, voicemail

我必须开发一个示例应用程序来在 android 手机上发送、接收和删除语音邮件，为此我需要知道其他应用程序通常遵循什么机制。

（我使用 android.provider.VoicemailContract 开发了一个示例，它可以插入一个音频文件（来自手机的 SD 卡）作为语音邮件。然后，我的应用程序在 android.provider.VoicemailContract.Voicemails contentprovider 的帮助下读取并删除插入的语音邮件.)

我想知道语音邮件在安卓手机上是如何工作的，即程序、协议之类的东西。我用谷歌搜索，但没有找到任何相关材料。我对语音邮件完全陌生……我需要知道所有内部细节。

谁能描述或提供一些有用的链接，以准确了解开发此类应用程序应遵循的程序...：/：/

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2021-03-08T14:40:49.857

我知道这是旧的，但我也很好奇。根据[这个](https://stackoverflow.com/questions/11744063/using-voicemailcontract-gives-permissions-error)堆栈溢出问题和答案，应用程序可以将语音邮件添加到本地电话的数据库中，但无法读取其他应用程序添加的任何语音邮件。此外，只有本地电话应用程序可以读取所有语音邮件。

# database - adabas系统日期

> ID：12971520
> 
> 赞同：0
> 
> 时间：2012-10-19T09:42:58.297
> 
> 标签：database, non-relational-database

我需要数据库的系统日期，数据库是`adabas`. Attunity 使用访问数据库，我在 google 或官方网站上没有找到任何信息。

类似于 Oracle 数据库中的内容：

```
SELECT SYSDATE FROM dual; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T10:18:54.030

通过使用从 adabas 获取日期 `current_date()`

```
 select  current_date() 
```

# matlab - ANNs 培训，每个时代发生了什么？

> ID：12971522
> 
> 赞同：2
> 
> 时间：2012-10-19T09:43:04.550
> 
> 标签：matlab, neural-network

我有一个关于人工神经网络训练的问题，

所以我想问一下对于一组输入样本的训练是怎么做的？用于训练的输入集的大小与用于训练的时期数之间是否存在某种关系，或者它是完全独立的？

例如，如果我的 ANN 有 4 个输入并且对于 2000 个训练样本，我会得到一个大小为 4x2000 的输入矩阵。那么对于*每个训练时期*，是加载整个矩阵，还是只为每个训练时期加载一个样本（训练矩阵列）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T09:53:07.390

在神经网络的每个时期，所有神经元的权重值都会更新，所有节点。通常，您拥有的神经元、层和数据越多，获得正确的权重值所需的时期就越多，但没有将时期与神经元联系起来的方程。

对于训练，通常使用反向传播算法（查看维基百科的一个很好的例子），每个权重更新一次。时代越多，您的神经网络就越准确。通常对于训练，您设置 2 个变量：最大 epoch 数和准确率，当最终实现两者之一时，您停止迭代。

# asp.net - 如何在单元格内保留带有 TextBoxes 的 ASP:Table？

> ID：12971526
> 
> 赞同：0
> 
> 时间：2012-10-19T09:43:27.750
> 
> 标签：asp.net

我有一个 ASP.Table，其单元格包含用户填写的文本框。

当他单击一个按钮时，我想将文本框内容存储到数据库中，但在 onclick 事件中，表是空的。我怎样才能持久化整个表格，尤其是文本框数据？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T09:51:59.187

创建与表的列和行对应的名称值集合。将每个单元格值作为名称值集合的一部分存储在数据库中，名称为 r1c1、r1c2 等。

# java - 带有条件/超时的弱引用

> ID：12971530
> 
> 赞同：7
> 
> 时间：2012-10-19T09:43:35.350
> 
> 标签：java, garbage-collection, weak-references

是否可以在 Java 中创建一个弱引用，其对象只有在指定条件返回时才能发送到垃圾收集器`true`？

假设我有一个类似于缓存的东西，它将 ID 号映射到一些数据：

```
Map<Integer, SomeData> cache = new HashMap<>(); 
```

`SomeData`有两个重要的方法 - `void updateTime()`，它只是将一个内部变量设置为当前时间，以及`boolean canBeDeleted()`，它检查对象是否在过去 10 分钟内被使用过（只需比较当前时间和保存的时间加上 10 分钟）。如果在这段时间内没有使用它，则该方法返回`true`并且可以从缓存中删除该对象...

但是，当我使用弱引用而不是强引用创建缓存时：

```
Map<Integer, WeakReference<SomeData>> cache = new HashMap<>(); 
```

然后唯一`WeakReference`检查的可能是对该对象的强引用，但我想它是否也检查了我的条件`canBeDeleted()`并且如果它返回则不删除引用`false`。有没有办法做到这一点？

（最重要的是，存在内存泄漏，我不知道如何解决它......当 WeakReference 中的对象被删除时，映射仍然包含不必要的键/值对）。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T10:02:54.860

您可以使用[LinkedHashMap#removeEldestEntry](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/LinkedHashMap.html#removeEldestEntry%28java.util.Map.Entry%29)虽然它没有提供根据条目在缓存内的时间量来删除的方法，但它确实为您提供了一种根据条目是否被访问来删除条目的方法。

> 它为实现者提供了在每次添加新条目时删除最旧条目的机会。如果映射表示缓存，这很有用：它允许映射通过删除过时的条目来减少内存消耗。

```
protected boolean removeEldestEntry(Map.Entry<K,V> eldest) {
  return size() > limit; 
```

另请记住，您需要使用 初始化 LinkedHashMap `accessOrder` `true`。

> accessOrder - 排序模式 - 访问顺序为 true，插入顺序为 false。

所以把它们放在一起源应该如下所示

```
public class Cache<K, V> extends LinkedHashMap<K, V> {
    private final int MAX_ENTRIES = 100;
    public Cache() {
        super(16, 0.75f, true);// accessOrder is true
    }
    @Override
    protected boolean removeEldestEntry(Map.Entry<K, V> eldest) {
        return size() > MAX_ENTRIES;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T09:48:09.130

您可以只删除条件为真的缓存中的键。

# c - 嵌入式 Web 服务器中的 CRUD

> ID：12971531
> 
> 赞同：2
> 
> 时间：2012-10-19T09:43:42.147
> 
> 标签：c, rest, embedded, crud, microcontroller

我在嵌入式堆栈中实现了一个 RESTful Web API，它提供了一个没有 REST 功能的网络服务器。准确地说，嵌入式堆栈是运行在 MQX RT 操作系统之上的 RTCS，微控制器是飞思卡尔的 Kinetis K60。我能够区分 GET/POST/DELETE/PUT 请求并获取带有参数的 url（比如说 /this/firstValue/that/secondValue/...）。

我使用 strtok 来分隔 url 的不同元素并做出决定。但是我的代码很丑，因为它充满了 strcmp 函数和 if 语句。我还需要检查 firstValue 和 secondValue 的界限（我可以在 set/get 函数中执行此操作，但每个参数的 2 个函数将是重复的）。此外，我希望能够添加参数而不会弄乱决策树。

我有两个问题：

*   你如何让代码变得又好又干？
*   您认为 REST Web 服务适合通过网络控制我的微控制器吗？你有这样的例子吗？我正在使用 REST Web 服务，因为它提供身份验证（但没有保密，因为我还不能设置 SSL 套接字），我认为这是一个优雅的解决方案。

*   SNMP (snmpset/snmpget)：它可以工作，但是设置 MIB 真的很痛苦，而且因为它是 SNMPv2，所以仍然没有保密性。
*   telnet 服务器（我还没有 SSH 解决方案）：除了 REST 可能更容易从外部控制之外，我没有看到任何优点/缺点，我正在使用 curl 对其进行测试:)
*   SOAP 远程过程调用（我就是不喜欢）
*   还有其他想法吗？我需要一些简单且可扩展的东西，因为可以控制多个目标。我的资源有限：s。在某些时候我需要保密，并且我希望在将 CyaSSL（嵌入式 ssl 实现）移植到 MQX 时拥有它。他们说这将在下个月发生，所以保密将不再是问题，但如果你有其他想法......

——
艾米连

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T10:23:49.850

REST 是一种架构模式，所以我猜你的意思是你的服务器提供 HTTP。

资源是“可以命名的任何数据”。例如，嵌入式设备上的 LED 可能是 '/leds/led3' 的 URI，您可以使用标准 PUT 请求更改其保存的数据（其状态、RGB LED？等），GET 应返回其当前状态。

至于对其进行编码，如果内存允许使路径查找尽可能简单，则通用树结构可能是明智的。在叶子上使用数据和函数指针（模拟对象）

# php - Slim 框架 .htaccess HTTPS

> ID：12971537
> 
> 赞同：1
> 
> 时间：2012-10-19T09:43:53.140
> 
> 标签：php, apache, .htaccess, slim

我正在将 Slim 用于在 http 下运行良好的 API，但是当我在 https 中请求 URL 时，我收到 404 错误。

我认为这与我的 .htaccess 文件有关，但我不确定。谁能指出我在这里做错了什么。

**.htaccess**：

```
RewriteEngine On
RewriteCond %{REQUEST_FILENAME} !-f
RewriteRule ^(.*)$ index.php [QSA,L] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T09:45:22.910

根据您的服务器配置，当通过 httpd 访问时，服务器可能会提供另一个目录（例如 httpsdocs 而不是 httpdocs）。

您必须更改配置、复制内容或尝试创建从 http 目录到 https 目录的符号链接。

# macos - Mac OS Sandbox：从助手启动主应用程序

> ID：12971549
> 
> 赞同：5
> 
> 时间：2012-10-19T09:44:26.233
> 
> 标签：macos, appstore-sandbox

我在沙盒中创建了一个使用帮助程序在登录时启动的应用程序，如此[处](http://blog.timschroeder.net/2012/07/03/the-launch-at-login-sandbox-project/)所示。

它工作正常，但下一条消息记录在控制台中：

`lsboxd[1560]: Not allowing process 15208 to launch "/Applications/SandboxApp.app/Contents/Library/LoginItems/SandboxHelper.app" because it has not been launched previously by the user`

`lsboxd[1560]: Not allowing process 15208 to register app "/Applications/SandboxApp.app/Contents/Library/LoginItems/SandboxHelper.app" for launch.`

我看到这些消息是关于助手的，但我不知道该怎么做才能阻止它们。

我唯一担心的是苹果可能会因为这条消息而拒绝该应用程序。

是有人阻止了这些沙盒消息的引发，还是有人向 Apple 发送了一个引发沙盒消息的应用程序并在 Appstore 上被接受？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-06T09:39:28.423

请参阅[http://blog.timschroeder.net/2012/07/03/the-launch-at-login-sandbox-project/](http://blog.timschroeder.net/2012/07/03/the-launch-at-login-sandbox-project/) - 据此，这是一个代码签名问题，可能不会成为问题AppStore 构建作为 AppStore 构建被辞职。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-12-10T23:37:04.437

这应该在最终构建中起作用。根据[Apple 文档](https://developer.apple.com/library/mac/documentation/security/conceptual/AppSandboxDesignGuide/AppSandboxInDepth/AppSandboxInDepth.html#//apple_ref/doc/uid/TP40011183-CH3-SW29)（“使用启动服务启动助手”部分）：

> ## 使用启动服务启动助手
> 
> 如果至少满足以下条件之一，则允许沙盒应用程序使用启动服务启动帮助程序：
> 
> *   应用程序和助手都通过了 Gatekeeper 评估。默认情况下，这意味着两者都由 Mac App Store 或开发者 ID 签名。注意：这不包括您的开发（“Mac 开发者”）或分发（“第三方 Mac 开发者应用程序”）签名身份。
> *   该应用程序安装在 /Applications 和应用程序包中，所有内容都归 root 所有。
> *   帮助程序已（手动）由用户至少运行一次。

当您的应用程序通过 Mac App Store 安装时，第一个和/或第二个应该涵盖您的情况。

# php - Symfony2：如何从存储库访问服务

> ID：12971552
> 
> 赞同：10
> 
> 时间：2012-10-19T09:44:29.730
> 
> 标签：php, symfony

我有类 ModelsRepository：

```
class ModelsRepository extends EntityRepository
{} 
```

和服务

```
container_data:
 class:        ProjectName\MyBundle\Common\Container
 arguments:    [@service_container] 
```

我想从 ModelsRepository 访问服务 container_data。我无法从控制器使用的构造函数传输服务。

你知道怎么做吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-07-02T16:56:20.733

恕我直言，这不应该是必需的，因为您可能很容易违反[SRP](http://en.wikipedia.org/wiki/Single_responsibility_principle)和[德米特法则等规则](http://en.wikipedia.org/wiki/Law_of_Demeter)

但是如果你真的需要它，这里有一种方法可以做到这一点：

首先，我们定义一个基类“ContainerAwareRepository”，它有一个调用“setContainer”

`**services.yml**`

```
services:
    # This is the base class for any repository which need to access container
    acme_bundle.repository.container_aware:
        class: AcmeBundle\Repository\ContainerAwareRepository
        abstract: true
        calls:
            - [ setContainer, [ @service_container ] ] 
```

ContainerAwareRepository 可能看起来像这样

`**AcmeBundle\Repository\ContainerAwareRepository.php**`

```
abstract class ContainerAwareRepository extends EntityRepository
{
    protected $container;

    public function setContainer(ContainerInterface $container)
    {
        $this->container = $container;
    }
} 
```

然后，我们可以定义我们的模型存储库。
我们在这里使用学说的`getRepository`方法来构建我们的存储库

`**services.yml**`

```
services:
    acme_bundle.models.repository:
        class: AcmeBundle\Repository\ModelsRepository
        factory_service: doctrine.orm.entity_manager
        factory_method:  getRepository
        arguments:
            - "AcmeBundle:Models"
        parent:
            acme_bundle.repository.container_aware 
```

然后，只需定义类

`**AcmeBundle\Repository\ModelsRepository.php**`

```
class ModelsRepository extends ContainerAwareRepository
{
    public function findFoo()
    {
        $this->container->get('fooservice');
    }
} 
```

为了使用存储库，您绝对需要首先从服务中调用它。

```
$container->get('acme_bundle.models.repository')->findFoo(); // No errors
$em->getRepository('AcmeBundle:Models')->findFoo(); // No errors 
```

但是如果你直接做

```
$em->getRepository('AcmeBundle:Models')->findFoo(); // Fatal error, container is undefined 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-10-19T12:11:12.620

我尝试了一些版本。问题解决如下

模型库：

```
class ModelRepository extends EntityRepository
{
    private $container;

    function __construct($container, $em) {
        $class = new ClassMetadata('ProjectName\MyBundle\Entity\ModelEntity');
        $this->container = $container;

        parent::__construct($em, $class);
    }
} 
```

安全性.yml：

```
providers:
    default:
        id: model_auth 
```

服务.yml

```
model_auth:
    class: ProjectName\MyBundle\Repository\ModelRepository
    argument 
```

结果，我根据需要获得了具有使用容器能力的存储库。但是这种实现只能在危急情况下使用，因为她对 Repository 有限制。谢谢4所有。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2013-07-02T16:30:26.413

你不应该**将**容器传递给存储库，就像你不应该让实体处理繁重的逻辑一样。存储库只有一个目的——从数据库中检索数据。仅此而已（阅读：[http](http://docs.doctrine-project.org/en/2.0.x/reference/working-with-objects.html) ://docs.doctrine-project.org/en/2.0.x/reference/working-with-objects.html ）。

如果您需要比这更复杂的东西，您可能应该为此创建一个单独的（如果您愿意，可以感知容器）服务。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-10-19T10:27:56.617

*您确定从 repo 访问服务是个好主意吗？*

存储库是为自定义 SQL 设计的，在学说的情况下，学说可以帮助您使用`find()`, `findOne()`, `findBy()`, [...] “魔术”方法。

考虑在使用 repo 的地方注入服务，如果需要一些参数，请将其直接传递给 repo 的方法。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2016-05-27T03:52:24.233

我建议使用工厂服务：

[http://symfony.com/doc/current/components/dependency_injection/factories.html](http://symfony.com/doc/current/components/dependency_injection/factories.html)

```
//Repository
class ModelsRepositoryFactory
{
    public static function getRepository($entityManager,$entityName,$fooservice)
    {
        $em     = $entityManager;
        $meta   = $em->getClassMetadata($entityName);

        $repository = new ModelsRepository($em, $meta, $fooservice);
        return $repository;
    }
}

//service
AcmeBundle.ModelsRepository:
        class: Doctrine\ORM\EntityRepository
        factory: [AcmeBundle\Repositories\ModelsRepositoryFactory,getRepository]
        arguments:
            - @doctrine.orm.entity_manager
            - AcmeBundle\Entity\Models
            - @fooservice 
```

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2017-12-08T10:28:43.087

我强烈同意只有在绝对必要时才应该这样做。虽然现在有一个相当简单的方法（用 Symfony 2.8 测试过）。

1.  在您的存储库中实施“ContainerAwareInterface”
2.  使用“ContainerAwareTrait”
3.  调整 services.yml

存储库类：

```
namespace AcmeBundle\Repository;

use Doctrine\ORM\EntityRepository;
use Symfony\Component\DependencyInjection\ContainerAwareInterface;
use Symfony\Component\DependencyInjection\ContainerAwareTrait;
use AcmeBundle\Entity\User;

class UserRepository extends EntityRepository implements ContainerAwareInterface
{

    use ContainerAwareTrait;

    public function findUserBySomething($param)
    {
        $service = $this->container->get('my.other.service');
    }

} 
```

服务.yml：

```
acme_bundle.repository.user:
    lazy: true
    class: AcmeBundle\Repository\UserRepository
    factory: ['@doctrine.orm.entity_manager', getRepository]
    arguments:
        - "AcmeBundle:Entity/User"
    calls:
        - method: setContainer
          arguments:
            - '@service_container' 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-10-19T10:05:29.920

最简单的方法是将服务注入存储库构造函数。

```
class ModelsRepository extends EntityRepository
{
  private $your_service;

  public function __construct(ProjectName\MyBundle\Common\Container $service) {
    $this->your_service = $service;
  } 
} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-10-19T10:08:15.483

扩展 Laurynas Mališauskas 答案，将服务传递给构造函数，使您的存储库也成为服务并使用参数传递它：

```
models.repository:
      class: ModelsRepository
      arguments: ['@service_you_want_to_pass'] 
```

# objective-c - 使用日期选择器比较两个日期

> ID：12971561
> 
> 赞同：0
> 
> 时间：2012-10-19T09:44:49.237
> 
> 标签：objective-c

嗨，我正在使用下面的代码，但我得到的是空值 startDate 和 endDate。请帮帮我

```
-(NSString *)datecomparison:(NSString *)STARTDATE forEndDate:(NSString *)ENDDATE{
    NSLog(@"startDate:%@ endDate:%@",STARTDATE,ENDDATE);
    NSDateFormatter *df = [[NSDateFormatter alloc] init];
    [df setDateFormat:@"dd-MM-yyyy"];
    [df  setTimeZone:[NSTimeZone timeZoneWithAbbreviation:@"GMT"]]; 
    NSDate *dt1 = [[NSDate alloc] init];
    NSDate *dt2 = [[NSDate alloc] init];
    dt1 = [df dateFromString:@"12/05/12"];
    dt2 = [df dateFromString:@"13/05/12"];
    NSLog(@"startDate:%@ endDate:%@",dt1,dt2);
    NSComparisonResult  result = [dt1 compare:dt2];
    NSString *dateReturn = [[NSString alloc] init];
    switch (result)
    {
        case NSOrderedAscending: NSLog(@"%@ is greater than %@", dt2, dt1); 
            dateReturn = @"ascending";
            break;
        case NSOrderedDescending: NSLog(@"%@ is less %@", dt2, dt1);
            break;
        case NSOrderedSame: NSLog(@"%@ is equal to %@", dt2, dt1);
            dateReturn=@"ascending";

            break;
        default: NSLog(@"erorr dates %@, %@", dt2, dt1); break;
    }
    return dateReturn;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T12:13:29.590

您可以从两个日期中获取年、月和日并进行比较。

```
NSString *str = [dt1 description];
const char* szDate = [str UTF8String];
int nYear, nMonth, nDay, nHour, nMinite, nSecond, nDeltaHour, nDeltaMinite;
sscanf(szDate, "%04d-%02d-%02d %d:%02d:%02d +%02d%02d", &nYear, &nMonth, &nDay, &nHour, &nMinite, &nSecond, &nDeltaHour, &nDeltaMinite); 
```

# c# - C#正则表达式验证字符串

> ID：12971562
> 
> 赞同：0
> 
> 时间：2012-10-19T09:44:51.430
> 
> 标签：c#, regex, c#-4.0

我有一个包含很多这样的记录的文本文件：

```
05/11/04+11:10PM+117+04+0218735793+0'0​​0+00:01'51+TR+
```

或者

```
05/11/04+11:10PM+117+04+0218735793+0'0​​0+00:01'51+TR+
```

（没有传入）

我想验证这些行并使所有其他行无效（空行或注释行和损坏的行。

*   可以为此目的使用正则表达式吗？
*   如果是，正则表达式是什么？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-19T09:52:23.377

我不会尝试对所有这些都使用正则表达式。例如，你有一个看起来像日期和时间的东西，还有几个其他字段可能是某种时间，这对于正则表达式来说是很棘手的。

我会处理这个

*   [`String.Split`](http://msdn.microsoft.com/en-us/library/system.string.split.aspx)在`+`
*   检查您的字段数量是否正确
*   根据其代表的内容单独检查每个字段，例如
    1.  [`DateTime.TryParseExact`](http://msdn.microsoft.com/en-us/library/system.datetime.tryparseexact.aspx)
    2.  [`DateTime.TryParseExact`](http://msdn.microsoft.com/en-us/library/system.datetime.tryparseexact.aspx)
    3.  3位数字的正则表达式
    4.  ...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T09:47:46.390

```
^\d\d\/\d\d\/\d\d\+\d\d:\d\d[AP]M\+[\d+':]+\+TR\+$
                                   ^^^^^^^^ 
```

我在标记部分“作弊”，因为我不确定什么保持不变，但从其余的表达中，我认为你应该明白这一点。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-19T09:50:45.837

```
var regexPattern = @"^\d{2}/\d{2}/\d{2}\+\d{2}:\d{2}(?:AM|PM)\+\d{3}\+\d{2}" +
                   @"\+\d{10}\+\d'\d{2}\+\d{2}:\d{2}'\d{2}\+TR\+$" 
```

# .htaccess - .htaccess 删除 url 重定向中的参数

> ID：12971566
> 
> 赞同：2
> 
> 时间：2012-10-19T09:45:03.943
> 
> 标签：.htaccess

在我的 .htaccess 文件中，我有：

```
RewriteCond %{query_string} /home/?acc=home&ln=0
RedirectMatch (.*) http://www.newdomain.com/es/? [R=301,L]

RewriteCond %{query_string} /home/?acc=home&ln=1
RedirectMatch (.*) http://www.newdomain.com/fr/? [R=301,L] 
```

我的想法是：

来源：`www.domain.com/home/?acc=home&ln=0` 目的地：`www.newdomain.com/es/`

来源：`www.domain.com/home/?acc=home&ln=1` 目的地：`www.newdomain.com/fr/`

但我的结果是： `www.newdomain.com/es/?` `www.newdomain.com/fr/?`

我怎样才能删除“？” ?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T14:35:33.200

```
RewriteCond %{query_string} /home/?acc=home&ln=1
RedirectMatch (.*) http://www.newdomain.com/fr/? <- surely it's the question mark on the end of your redirect? 
```

# c# - 我如何知道 Windows 更新当前是否正在运行？

> ID：12971569
> 
> 赞同：0
> 
> 时间：2012-10-19T09:45:08.733
> 
> 标签：c#, windows-update

我正在使用 .net 3.5 处理 C#

我的应用程序需要让计算机进入睡眠状态。问题是，如果 Windows Update 正在运行，它不会阻止计算机进入睡眠状态。所以我想等到 Windows 更新完成后再让计算机进入睡眠状态。

有没有办法以编程方式判断 Windows 更新当前是否正在运行？

我试图检查 Wuauclt 或 TrustedInstaller 是否正在运行，但显然即使 Windows 更新未运行它们也在运行。

# .net - 访问路径-----被拒绝-vb.net

> ID：12971570
> 
> 赞同：0
> 
> 时间：2012-10-19T09:45:09.700
> 
> 标签：.net, ssl, windows-server-2008

我有一个通常在服务器上创建和存储所有发票的网站，但昨天我将 SSL 添加到网站 www.accessorix.com，从那时起，当我们尝试创建发票时，我们收到一条错误消息

访问路径“--------------”被拒绝。

[我从这里](http://www.webfusion.co.uk/support/answers/securing-ssl-access-to-your-website-102/)找到了这个“你应该创建一个名为 SecurePage 的类，它继承自你的主页类（可能是 System.Web.UI.Page）”

我们在 windows server 2008 R2 的虚拟服务器上托管网站，应用程序使用 asp.net/vb.net

任何帮助将不胜感激....

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T11:05:08.110

我很久以前就修复了它，但只是想为这篇文章的未来访问者回答它。

基本上，应用程序使用路径为[http://www.site.com](http://www.site.com)，因为我添加了 SSL 层，我将路径更改为[https://www.site.com](https://www.site.com)，它工作正常。

# java - 是否可以从私有内部类覆盖公共方法？

> ID：12971572
> 
> 赞同：1
> 
> 时间：2012-10-19T09:45:17.843
> 
> 标签：java

存在以下问题：我有一个内部私有类，它有公共方法，我需要重写它。是否可以使用 Java 反射？

更新：

```
public class MyPublicClass {

    private class MyPrivateClass {
        public void doPublicMethod() {}
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T09:55:15.687

我能想到的唯一方法是使用这样的单独的私有类：

```
public class MyPublicClass {

    private class MyPrivateClass {
        public void doPublicMethod() {}
    }

    private class Test extends MyPrivateClass {
        @Override
        public void doPublicMethod() {
            // Do your stuff
        }
    }
} 
```

但这不是使用反射。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T10:39:19.957

单独使用反射是不可能的。但是您可以通过使用[AspectJ](http://www.eclipse.org/aspectj/)或其他面向 Aspect 的 Java 编程库来管理。它允许您使用某些规则修改字节码。

# c++ - 杀死入侵者在 C++ 中不起作用

> ID：12971574
> 
> 赞同：9
> 
> 时间：2012-10-19T09:45:27.583
> 
> 标签：c++, visual-c++, collision

我知道为了在 C++ 中杀死入侵者，我需要制作一个对撞机。然而，在那场比赛中，没有什么能杀死入侵者。这是标题中的代码：

```
bool DoCollision(float Xbpos, float Ybpos, int BulWidth, int BulHeight, float Xipos, float Yipos, int InvWidth, int InvHeight); 
```

这是我正在初始化的函数：

```
bool Game::DoCollision(float Xbpos, float Ybpos, int BulWidth, int BulHeight, float Xipos, float Yipos, int InvWidth, int InvHeight) {
if (Xbpos+BulWidth < Xipos || Xbpos > Xipos+InvWidth) return false;
if (Ybpos+BulHeight < Yipos || Ybpos > Yipos+InvHeight) return false;

return true;
} 
```

如果有人按下空格键，就会发生这种情况：

```
if (code == 57) { //Space
    myKeyInvader.MeBullet.Active = true;
    myKeyInvader.MeBullet.Xpos = myKeyInvader.Xpos + 10;
    myKeyInvader.MeBullet.Ypos = myKeyInvader.Ypos - 10;
    myKeyInvader.MeBullet.yvuel = 0.2;
    myKeyInvader.MeBullet.BulletP->CopyTo(m_Screen,myKeyInvader.Xpos,myKeyInvader.Ypos);

    if (DoCollision(Invaders[counter].MyBullet.Xbpos,Invaders[counter].MyBullet.Ybpos,Invaders[counter].MyBullet.BulWidth,
    Invaders[counter].MyBullet.BulHeight,Invaders[counter].Xipos,Invaders[counter].Yipos,Invaders[counter].InvWidth,Invaders[counter].InvHeight)) {
        //myKeyInvader.Ypos = 100;
        Invaders[counter].Active = false;
        printf("Collide!\n");
    }
} 
```

有人知道出了什么问题吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-19T11:06:12.077

问题不在于 C++。问题是你如何使用它。编写代码的唯一方法是入侵者就在您的上方。但这为时已晚。外星入侵者已经杀了你。

您需要做的是将这些子弹变成您随时间传播的对象，就像您的入侵者是您随时间传播的对象一样。对用户按下空格键的响应应该是将项目符号的新实例添加到活动项目符号集中。这些活动子弹中的每一个都有一个随时间变化的位置。在每个时间步，您应该根据指示入侵者如何移动的规则推进活动入侵者的状态，并根据规定子弹如何移动的规则推进活动子弹的状态。当子弹到达屏幕顶部时移除子弹，如果外星入侵者到达屏幕底部，游戏结束。

在传播、移除屏幕外的子弹并检查游戏结束后，您想要检查 N 个子弹中的每一个与 M 个入侵者中的每一个之间的碰撞。当检测到碰撞时，从激活的子弹集合中移除子弹，并从激活的入侵者集合中删除外星入侵者。当然，你会想要一些漂亮的图形来向用户展示另一个外星人咬了灰尘。

另外：作为一个 NxM 问题，此检查可能是 CPU 使用率的最大消耗。您可以通过一些简单的启发式方法来加快速度。

您可以自己管理外星入侵者和子弹的集合，小心使用`new`，`delete`以防止您的入侵者和子弹因内存泄漏而杀死您的程序。你不必这样做。C++ 为您提供了一些漂亮的工具来管理这些集合。使用 C++ 标准库集合之一，而不是滚动您自己的集合。例如，`std::vector<AlienInvader> invaders;`或`std::list<AlienInvader> invaders`，和项目符号相同。你会从中间删除很多，这表明`std::list`或者`std::deque`可能比`std::vector`这里更合适。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-19T09:58:40.200

您在创建触发项目时测试它们的碰撞

不应该在主循环中对每一帧的每个现有项目进行测试碰撞吗？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-19T10:27:12.097

不用担心，C++ 拥有杀死入侵者所需的一切 :)))

根据这么少的代码给出建议并不容易，但这里唯一的逻辑错误似乎是您仅在按下空格时测试碰撞；您可能应该在外部循环中对其进行测试：

```
if (code == 57) { //Space
    myKeyInvader.MeBullet.Active = true;
    myKeyInvader.MeBullet.Xpos = myKeyInvader.Xpos + 10;
    myKeyInvader.MeBullet.Ypos = myKeyInvader.Ypos - 10;
    myKeyInvader.MeBullet.yvuel = 0.2;
    myKeyInvader.MeBullet.BulletP->CopyTo(m_Screen,myKeyInvader.Xpos,myKeyInvader.Ypos);
} 
```

从逻辑的角度来看，按空格键应该发射子弹：子弹的起始位置已设置，它在 Y 轴上的速度也是如此（因此它会上升）。

检查碰撞的代码应该在这个`if`块之外。事实上，这段代码只有在你仍然按下空格的时候才会执行——也就是说：仍然在*触发*——。是否应该仅在“仍在射击”时检查碰撞？你发射了一颗子弹并开始等待它摧毁入侵者的事实是否会在某种程度上干扰这颗子弹可以到达入侵者并实际上摧毁它的事实？当然不是！

```
if (DoCollision(Invaders[counter].MyBullet.Xbpos,Invaders[counter].MyBullet.Ybpos,Invaders[counter].MyBullet.BulWidth,
    Invaders[counter].MyBullet.BulHeight,Invaders[counter].Xipos,Invaders[counter].Yipos,Invaders[counter].InvWidth,Invaders[counter].InvHeight)) {
    //myKeyInvader.Ypos = 100;
    Invaders[counter].Active = false;
    printf("Collide!\n");
} 
```

您希望在外部循环中检查碰撞，这可能还包含按键检查。这样，即使您只是看着屏幕等待，程序也会继续测试条件，当条件满足时，会执行与碰撞事件相关的代码（即：入侵者“未激活”）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-19T11:10:37.277

您的代码看起来不错，但是您需要围绕碰撞检查器进行两个循环：一个用于检查所有入侵者（不仅仅是其中一个），另一个用于检查沿其轨迹的每个子弹位置，而不仅仅是它离开枪的那一刻。

我假设我们有一个辅助函数来移动子弹并返回它是否仍在屏幕内：

bool BulletIsInScreen();

然后我们可以编写循环：

```
if (code == 57) { // Space
  while (BulletIsInScreen()) {
    for (size_t i = 0; i < counter; ++i) { // counter is the number of invaders,
                                           // according to your comment to your own answer
      myKeyInvader.MeBullet.Active = true;
      myKeyInvader.MeBullet.Xpos = myKeyInvader.Xpos + 10;
      myKeyInvader.MeBullet.Ypos = myKeyInvader.Ypos - 10;
      myKeyInvader.MeBullet.yvuel = 0.2;
      myKeyInvader.MeBullet.BulletP->CopyTo(m_Screen,myKeyInvader.Xpos,myKeyInvader.Ypos);

      if (DoCollision(Invaders[i].MyBullet.Xbpos, Invaders[i].MyBullet.Ybpos,
                      Invaders[i].MyBullet.BulWidth, Invaders[i].MyBullet.BulHeight,
                      Invaders[i].Xipos, Invaders[i].Yipos,
                      Invaders[i].InvWidth, Invaders[i].InvHeight)) {
        //myKeyInvader.Ypos = 100;
        Invaders[i].Active = false;
        printf("Collide!\n");
      }
    }
  }
} 
```

现在这应该可以按预期工作。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-19T09:50:13.220

你说`//Space`，它是什么，还是应该是 32（如果是 ASCII）而不是 57？程序是否流入 if==57 块？

# java - 从数据库中获取字符串后如何在 BIRT 中将字符串转换为整数？

> ID：12971579
> 
> 赞同：1
> 
> 时间：2012-10-19T09:45:56.860
> 
> 标签：java, eclipse, report, birt

我使用 BIRT 进行报告，并且我是 BIRT 初学者。在我的报告中，我必须计算一列的平均值。（数据库是一个预言机）

在我的开放脚本中，我有某事。像这样：

```
sqlText = "select A, B, C, D, ((date1-date2) day to second) as differencedate from problem"; 
```

差异日期列值是这样的： 0 0:22:15 在我的获取中我有

```
if (!maximoDataSet.fetch())
    return (false);

row["A"] = maximoDataSet.getString("A");
row["B"] = maximoDataSet.getDate("B");
....    

row["differencedate"]=maximoDataSet.getString("differencedate");

return (true); 
```

我尝试拆分字符串并从差异日期中获取秒数，然后使用纯 JavaScript 将其转换为整数，但出现“split null”等错误。所以我的问题是如何在 BIRT 中将此列转换为整数？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T16:05:36.087

尝试从数据库中检索日期差异作为数字 - 如下所示：

```
select A, B, C, D, 
       ((date1-date2) day to second) as differencedate,
       (date1-date2) * 86400 as differenceseconds
from problem 
```

# sql - SQL Server 中的 SYS_CONNECT_BY_PATH

> ID：12971580
> 
> 赞同：2
> 
> 时间：2012-10-19T09:46:00.213
> 
> 标签：sql, oracle, sql-server-2008, recursion, common-table-expression

我正在做一个迁移项目，需要将以下 Oracle 查询转换为它的 SQL Server 等效项。

```
select SYS_CONNECT_BY_PATH (b.actionnr,'/') as FATHER, SYS_CONNECT_BY_PATH (b.actionnr,'     | ') as REFPATH, LEVEL, 
(select count(p.refactionnr) from zisjob.zj_action p where p.refactionnr=b.actionnr)
Childs, b.* from 
( select NVL(x.ANZFiles,0) ANZFiles, act.actionnr, act.refactionnr, act.lfno, act.jobnr,     act."TYPE", act.actiontype
from zisjob.zj_action act, zisjob.zj_actiontype t, 
( select f.lno, count(f.filenr) as ANZFiles from zisjob.zj_file f where f.lno != f.lfno     Group by f.lno )x
where act.lfno=10 and act.actiontype = t.typeid(+) and act.actionnr = x.lno(+) )
b start with b.actionnr in 
(select b.actionnr from zisjob.zj_action b where b.lfno = 10 and b.refactionnr is    null)
connect by nocycle prior b.actionnr=b.refactionnr order by 1 desc, 2 asc 
```

我正在使用 CTE 来执行此操作。到目前为止，我想出了以下几点：

```
with h$cte as 
(
   select
      cast (convert(varchar,b.actionnr)+'/' as varchar(max)) as FATHER,
      cast(convert(varchar,b.actionnr)+' | ' as varchar(max)) as REFPATH,
      1 as LEVEL,
      --cast (row_number() over (order by @@spid) as varchar(max)) as LEVEL,
      (select count(p.refactionnr) from zisjob.zj_action p 
       where p.refactionnr = b.actionnr) Childs, 
      b.* 
   from
     (select 
         isnull(x.ANZFiles, 0) ANZFiles, act.actionnr, act.refactionnr, act.lfno,  
         act.jobnr, act."TYPE", act.actiontype
      from zisjob.zj_action act 
      left outer join zisjob.zj_actiontype t on act.actiontype = t.typeid 
      left outer join
          (select f.lno, count(f.filenr) as ANZFiles 
           from zisjob.zj_file f
           where f.lno != f.lfno Group by f.lno ) x on act.actionnr = x.lno
      where act.lfno = 10) b
where 
   b.actionnr in
       (select b.actionnr from zisjob.zj_action b 
        where b.lfno = 10 and b.refactionnr is null)

UNION ALL

select
    CAST(FATHER + '/'+ b.ACTIONNR as varchar(max)) as FATHER,
    CAST(REFPATH + '|'+b.ACTIONNR AS VARCHAR(MAX)) as REFPATH,
    h$cte.LEVEL + 1 as LEVEL,
    (select count(p.refactionnr) from zisjob.zj_action p  
     where p.refactionnr = b.actionnr) Childs, 
    b.*
from
   (select isnull(x.ANZFiles, 0) ANZFiles, act.actionnr, act.refactionnr, 
           act.lfno, act.jobnr, act."TYPE", act.actiontype
    from zisjob.zj_action act 
    left outer join zisjob.zj_actiontype t on act.actiontype = t.typeid 
    left outer join
        (select f.lno, count(f.filenr) as ANZFiles from zisjob.zj_file f
         where f.lno != f.lfno Group by f.lno) x on act.actionnr = x.lno
    where act.lfno = 10) b, 
    h$cte
where 
    b.actionnr in
        (select b.actionnr from zisjob.zj_action b 
         where b.lfno = 10 and b.refactionnr is null)
    and h$cte.ACTIONNR = h$cte.REFACTIONNR
)
select <columns> from h$cte 
```

翻译后的查询给出以下错误：

> *消息 467、级别 16、状态 1、第 1 行*
> *GROUP BY、HAVING 或聚合函数不允许在递归公用表表达式“h$cte”的递归部分中。*
> 
> *消息 462，级别 16，状态 1，第 1 行*
> *递归公用表表达式“h$cte”的递归部分不允许外连接*

我该如何解决这个问题？非常感谢任何形式的帮助。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T07:26:06.633

我终于解决了这个问题：

```
WITH dummy AS(

select isnull(x.ANZFiles,0) ANZFiles, act.actionnr, act.refactionnr, act.lfno, act.jobnr, act."TYPE", act.actiontype

from zisjob.zj_action act left outer join zisjob.zj_actiontype t on act.actiontype = t.typeid left outer join 

( select f.lno, count(f.filenr) as ANZFiles from zisjob.zj_file f 

where f.lno != f.lfno Group by f.lno )x on act.actionnr = x.lno

where act.lfno=10), 

 dummy2 as(

select count(p.refactionnr) as Childs 

from zisjob.zj_action p inner join dummy b on p.refactionnr=b.actionnr

),

h$cte as(

select 

cast ('/'+convert(varchar,b.actionnr) as varchar(max)) as FATHER, 

cast(' | '+convert(varchar,b.actionnr) as varchar(max)) as REFPATH, 

1 as LEVEL,

c.Childs,

--cast (row_number() over (order by @@spid) as varchar(max)) as LEVEL, 

b.* 

from dummy b, dummy2 c

where b.actionnr in 

(select b.actionnr from zisjob.zj_action b where b.lfno = 10 and b.refactionnr is null)

UNION ALL

select

CAST(FATHER + '/'+ b.ACTIONNR as varchar(max)) as FATHER,

CAST(REFPATH + '|'+b.ACTIONNR AS VARCHAR(MAX)) as REFPATH,

h$cte.LEVEL + 1 as LEVEL,c.Childs,

b.*

from dummy b, dummy2 c, h$cte

where b.actionnr in 

(select b.actionnr from zisjob.zj_action b where b.lfno = 10 and b.refactionnr is null)

and h$cte.ACTIONNR = h$cte.REFACTIONNR

)

select * from h$cte 
```

由于不允许我在 CTE 的递归成员中编写外连接和 GROUP BY、HAVING 或聚合函数，因此我将其移到了新的 CTE 下。这就像一个魅力。

干杯！！！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-05-03T04:28:12.583

***我已经通过创建一个数据库函数来解决它***

创建一个像**“ufn_GetParentPath”**这样的函数，使用它而不是**“SYS_CONNECT_BY_PATH”**`ID`作为参数 传递。

```
CREATE FUNCTION [dbo].[ufn_GetParentPath] ( @pCurrentNodeID    INT )
RETURNS VARCHAR(1000)
AS
BEGIN

DECLARE @vCurrentNodeName     VARCHAR(50)
DECLARE @vParentID            INT

IF @pCurrentNodeID IS NULL OR @pCurrentNodeID = 0
    RETURN NULL

SELECT @vCurrentNodeName = [Name], @vParentID = [ParentID]
FROM [dbo].[Hierarchy]
WHERE [ID] = @pCurrentNodeID

RETURN ISNULL([dbo].[ufn_GetParentPath] ( @vParentID ) + '/', '') + @vCurrentNodeName

END
GO 
```

# android - 两个图像上的 ontouch 事件

> ID：12971585
> 
> 赞同：0
> 
> 时间：2012-10-19T09:46:18.473
> 
> 标签：android

在我的应用程序中，我想同时移动、拖动和缩放两个图像，但我只能在屏幕上移动一个图像。如果我试图选择或触摸第二个图像...第一个图像正在选择并执行移动、拖动和缩放操作。下面是我的代码。

```
import android.app.Activity;
import android.graphics.Matrix;
import android.graphics.PointF;
import android.os.Bundle;
import android.util.FloatMath;
import android.util.Log;
import android.view.Menu;
import android.view.MotionEvent;
import android.view.View;
import android.view.View.OnClickListener;
import android.view.View.OnTouchListener;
import android.widget.Button;
import android.widget.ImageView;
import android.widget.Toast;

import com.example.multotouch.R.id;

public class MainActivity extends Activity implements OnTouchListener, OnClickListener{
     private static final String TAG = "Touch" ;
     Matrix matrix = new Matrix();
       Matrix savedMatrix = new Matrix();
       ImageView view1,view2;
       Button b1;

       // We can be in one of these 3 states
       static final int NONE = 0;
       static final int DRAG = 1;
       static final int ZOOM = 2;
       PointF start = new PointF();
        PointF mid = new PointF();
        float oldDist = 1f;
       int mode = NONE;
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        view2 = (ImageView) findViewById(R.id.imageView);
        view2.setOnTouchListener(this);
        b1=(Button)findViewById(id.button1);
        b1.setOnClickListener(this);

        view1 = (ImageView) findViewById(R.id.imageView2);
        view1.setOnTouchListener(this);
     }
     public boolean onTouch(View v, MotionEvent event) {

         switch(v.getId())
         {
         case R.id.imageView :
                view2.bringToFront();

              switch (event.getAction() & MotionEvent.ACTION_MASK) {
                    case MotionEvent.ACTION_DOWN:
                            savedMatrix.set(matrix);
                            start.set(event.getX(), event.getY());
                            Log.d(TAG, "mode=DRAG" );
                            mode = DRAG;
                            break;
               case MotionEvent.ACTION_UP:
               case MotionEvent.ACTION_POINTER_UP:
                            mode = NONE;
                            Log.d(TAG, "mode=NONE" );
                            break;
               case MotionEvent.ACTION_MOVE:
                            if (mode == DRAG) {
                                matrix.set(savedMatrix);
                                matrix.postTranslate(event.getX() - start.x,
                                        event.getY() - start.y);
                            }
                            else if (mode == ZOOM) {
                                float newDist = spacing(event);
                                Log.d(TAG, "newDist=" + newDist);
                                if (newDist > 10f) {
                                    matrix.set(savedMatrix);
                                    float scale = newDist / oldDist;
                                    matrix.postScale(scale, scale, mid.x, mid.y);
                                }
                            }
                            break;
               case MotionEvent.ACTION_POINTER_DOWN:
                            oldDist = spacing(event);
                            Log.d(TAG, "oldDist=" + oldDist);
                            if (oldDist > 10f) {
                                savedMatrix.set(matrix);
                                midPoint(mid, event);
                                mode = ZOOM;
                                Log.d(TAG, "mode=ZOOM" );
                            }
                            break;
              }
               view2.setImageMatrix(matrix);
               dumpEvent(event);
              return true; // indicate event was handled

         case R.id.imageView2 :
                view2.bringToFront();
                Toast.makeText(getApplicationContext()," Hii image22",Toast.LENGTH_LONG).show();
                switch (event.getAction() & MotionEvent.ACTION_MASK) {
                case MotionEvent.ACTION_DOWN:
                    savedMatrix.set(matrix);
                    start.set(event.getX(), event.getY());
                    Log.d(TAG, "mode=DRAG" );
                    mode = DRAG;
                    break;
                case MotionEvent.ACTION_UP:
                case MotionEvent.ACTION_POINTER_UP:
                    mode = NONE;
                    Log.d(TAG, "mode=NONE" );
                    break;
                case MotionEvent.ACTION_MOVE:
                    if (mode == DRAG) {
                        matrix.set(savedMatrix);
                        matrix.postTranslate(event.getX() - start.x,
                                event.getY() - start.y);
                    }
                    else if (mode == ZOOM) {
                        float newDist = spacing(event);
                        Log.d(TAG, "newDist=" + newDist);
                        if (newDist > 10f) {
                            matrix.set(savedMatrix);
                            float scale = newDist / oldDist;
                            matrix.postScale(scale, scale, mid.x, mid.y);
                        }
                    }
                    break;
                case MotionEvent.ACTION_POINTER_DOWN:
                    oldDist = spacing(event);
                    Log.d(TAG, "oldDist=" + oldDist);
                    if (oldDist > 10f) {
                        savedMatrix.set(matrix);
                        midPoint(mid, event);
                        mode = ZOOM;
                        Log.d(TAG, "mode=ZOOM" );
                    }
                    break;

          }

           view2.setImageMatrix(matrix);
           dumpEvent(event);
          return true; // indicate event was handled

         }
        return true;

     }

    private void dumpEvent(MotionEvent event) {
        String names[] = { "DOWN" , "UP" , "MOVE" , "CANCEL" , "OUTSIDE" ,
                  "POINTER_DOWN" , "POINTER_UP" , "7?" , "8?" , "9?" };
               StringBuilder sb = new StringBuilder();
               int action = event.getAction();
               int actionCode = action & MotionEvent.ACTION_MASK;
               sb.append("event ACTION_" ).append(names[actionCode]);
               if (actionCode == MotionEvent.ACTION_POINTER_DOWN
                     || actionCode == MotionEvent.ACTION_POINTER_UP) {
                  sb.append("(pid " ).append(
                  action >> MotionEvent.ACTION_POINTER_ID_SHIFT);
                  sb.append(")" );
               }
               sb.append("[" );
               for (int i = 0; i < event.getPointerCount(); i++) {
                  sb.append("#" ).append(i);
                  sb.append("(pid " ).append(event.getPointerId(i));
                  sb.append(")=" ).append((int) event.getX(i));
                  sb.append("," ).append((int) event.getY(i));
                  if (i + 1 < event.getPointerCount())
                     sb.append(";" );
               }
               sb.append("]" );
               Log.d(TAG, sb.toString());
            }
    private float spacing(MotionEvent event) {
           float x = event.getX(0) - event.getX(1);
           float y = event.getY(0) - event.getY(1);
           return FloatMath.sqrt(x * x + y * y);
        }
    private void midPoint(PointF point, MotionEvent event) {
           float x = event.getX(0) + event.getX(1);
           float y = event.getY(0) + event.getY(1);
           point.set(x / 2, y / 2);
        }
    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        getMenuInflater().inflate(R.menu.activity_main, menu);
        return true;
    }
    public void onClick(View v) {
        if (v == b1){
            Toast.makeText(getApplicationContext(), "haii",Toast.LENGTH_SHORT).show();
            view1.setEnabled(false);
            view1.setEnabled(true);
            view1.setEnabled(false);
            view1.setEnabled(true);

        }

    }

}
main.xml
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" >
<RelativeLayout 
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" >

   <ImageView android:id="@+id/imageView"
         android:layout_width="fill_parent"
         android:layout_height="fill_parent"
         android:src="@drawable/ic_launcher"
         android:scaleType="matrix" >
   </ImageView>
     <ImageView android:id="@+id/imageView2"
         android:layout_width="fill_parent"
         android:layout_height="fill_parent"
         android:src="@drawable/ic_launcher"

         android:scaleType="matrix" >
   </ImageView>
</RelativeLayout>
<RelativeLayout 
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" >

     <Button
         android:id="@+id/button1"
         android:layout_width="25dp"
         android:layout_height="25dp"
         android:layout_alignParentBottom="true"
         android:layout_centerHorizontal="true"
         android:layout_marginBottom="36dp"
         android:text="Button" 
         />
</RelativeLayout>
</RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T10:40:38.600

请使用我的 SO 答案的以下链接拖动两张图片，它将解决您的问题。

[拖动两个图像](https://stackoverflow.com/questions/11027792/android-drag-and-drop-images-on-the-screen/11028521#11028521)

# php - 会话在 CI 的其他控制器中不起作用

> ID：12971586
> 
> 赞同：3
> 
> 时间：2012-10-19T09:46:23.950
> 
> 标签：php, codeigniter

我在 login() 控制器中设置会话，其中登录用户详细信息在会话中设置。会话库是 autoload 。

```
$data = $this->login_model->login_admin();

$this->session->set_userdata('UserLoggedInDetails',$data); //set login user details 
```

当我们这样做时 `var_dump($this->session->userdata('UserLoggedInDetails'));`//它会在同一个控制器中打印所有登录用户详细信息

但是当我们在其他控制器或其他功能的同一控制器中执行此操作时-

```
var_dump($this->session->userdata('UserLoggedInDetails')); 
```

它打印`array(0) { }`

我的配置文件是-

```
$config['sess_cookie_name'] = 'ci_session';
$config['sess_expiration']  = 7200;
$config['sess_expire_on_close'] = FALSE;
$config['sess_encrypt_cookie']  = FALSE;
$config['sess_use_database']    = FALSE;
$config['sess_table_name']  = 'ci_sessions';
$config['sess_match_ip']    = FALSE;
$config['sess_match_useragent'] = TRUE;
$config['sess_time_to_update']  = 300; 
```

我搜索了所有以前这样的问题，但没有解决这个问题......请帮帮我..欢迎所有建议。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-09-29T14:35:39.410

在您的代码中更新以下对我有用的内容：

```
$config['sess_expiration']  = 8600;
$config['sess_match_useragent'] = FALSE; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T11:08:14.590

问题是因为您没有将会话数据保存在数据库中。所以这会保存在cookie中。我们都知道 cookie 有 4KB 的限制。因此，将您的会话数据数组保存在数据库中，如下面的 codeigniter 用户指南中所示的教程。

[http://codeigniter.com/user_guide/libraries/sessions.html](http://codeigniter.com/user_guide/libraries/sessions.html)

# c++ - C++ 线段交点

> ID：12971592
> 
> 赞同：1
> 
> 时间：2012-10-19T09:46:39.667
> 
> 标签：c++

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T13:59:31.017

你在你的代码中做了什么

```
*intersection->x_val = x; 
```

相当于

```
(*(intersection->x_val)) = x; 
```

因为通过指针选择操作符的[优先级](http://en.cppreference.com/w/cpp/language/operator_precedence)`->`高于解引用操作符，而后者又高于赋值操作符。`*``=`

所以首先你选择`double x_val`的班级成员`Point`。其次，您尝试将一元解引用运算符`*`应用于结果。并且因为 x_val 是双精度的，而不是指针，这是解引用运算符所期望的，编译器会报告错误。

因此，这里的解引用运算符过多，足以执行以下操作

```
intersection->x_val = x; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-19T09:49:28.060

```
intersection->member 
```

将取消引用一个指针`intersection`。这与

```
(*intersection).member 
```

你不需要取消引用它两次。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-19T09:50:04.720

假设您得到的错误是两行的编译错误：

```
*intersection->x_val = x;  // here i got error 
*intersection->y_val = y;  // here i got error 
```

问题是您要取消引用指针，然后`->`在其上使用取消引用运算符。

相反，您应该这样做：

```
intersection->x_val = x; 
intersection->y_val = y;  // leave it as a pointer 
```

或者

```
*intersection.x_val = x; 
*intersection.y_val = y;  // use it as an object 
```

# asp-classic - ASP VBScript Redim 保留类型不匹配 - 变量定义范围

> ID：12971594
> 
> 赞同：3
> 
> 时间：2012-10-19T09:46:47.740
> 
> 标签：asp-classic, vbscript

我有一个经典的 ASP 页面，它在该部分中包含一个服务器端

```
<!--#include file="../includes/DataTransferFunctions.asp"--> 
```

在这个函数中，我在库文件的顶部有以下内容，

```
 Dim wsDataToXferArray() 
```

然后，在库中的一个函数中，它确实

```
 redim preserve wsDataToXferArray(3,pSub). 
```

这不起作用，因为我在 redim 语句上得到类型不匹配。但是，如果我在主 ASP 的顶部而不是在包含库的顶部有 Dim 语句，它就可以工作。

我需要能够在全局范围内声明变量，以便库中的多个函数都可以使用它，但要让它在库代码中定义，以便它是自包含的。我觉得好像我错过了一些明显的东西。

谢谢。

这是显示问题的缩减版本。我已经包含了主要的 ASP 和显示“2 Dim”语句位置的相关库。

谢谢。

```
<%@ language = vbscript %>
<% Option Explicit %>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<%

Response.Buffer = true
Response.ContentType = "text/html"
Response.AddHeader "Content-Type", "text/html;charset=ISO-8859-1"
Response.CodePage = 1252
Response.CharSet = "ISO-8859-1"

Dim wsResult,wsDatabase
Dim wsSubX
'
'Dim wsDataToXferArray()

subRoutine()
'
'------------------------------------------------------------------------------------------------
sub subRoutine
'------------------------------------------------------------------------------------------------

    wsSubX  = 0
'
    if wsResult = "" then wsResult  = fncEnableSetAndCreateDataTransfer(wsDatabase,"LK-PART","abc","A",wsSubX)              :   wsSubX  = wsSubX + 1

End Sub

%>

<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html;charset=ISO-8859-1" />
<title></title>
<%
SubIncludeOtherStyleSheets
SubIncludeJs
%>

<!--Include file containing functions to convert dates and to get sales order status description -->
<!--#include file="../includes/date_convert.asp"-->
<!--#include file="../includes/KHDataTransferFunctions.asp"-->
<!--#include file="../includes/IncludeStyleSheets.asp"-->
<!--#include file="../includes/IncludeJs.asp"-->

</head>

<body>

<form action="KHPartMaintenance.asp" method="post" name="form1" id="form1" >

<table class="tableForm Center Font7pt" width="1000">
    <thead>
    <tr>
        <th colspan="5">Part Maintenance</th>
    </tr>
    </thead>
    <tbody>
    <tr>
        <td><input type="submit" class="submit1" name="submit1" id="btnList" value="Get Part" onclick="javascript:return fncFormOnSubmit('Get');" /></td>
    </tr>
    </tbody>
</table>

</body>
</html> 
```

这是 KHDataTransferFunctions.asp 库。

```
<%
Dim wsDataToXferArray()

'------------------------------------------------------------------------------------------------
function fncEnableSetAndCreateDataTransfer(pDatabase,pName,pValue,pDataType,pSub)
'------------------------------------------------------------------------------------------------
'
Dim wsPrefix    :   wsPrefix = left(pName,2)
'
    fncEnableSetAndCreateDataTransfer   = ""

    call subAddFieldToDataTransferArray(wsPrefix,pName,pValue,pDataType,pSub)

end function

'------------------------------------------------------------------------------------------------
sub subAddFieldToDataTransferArray(pPrefix,pName,pValue,pDataType,pSub)
'------------------------------------------------------------------------------------------------
'
' Build the array of the fields for each 'transaction'.
'
    redim preserve wsDataToXferArray(3,pSub)

    wsDataToXferArray(0,pSub)   = pPrefix
    wsDataToXferArray(1,pSub)   = pName
    wsDataToXferArray(2,pSub)   = pValue
    wsDataToXferArray(3,pSub)   = pDataType
'   
End Sub

%> 
```

我已经解决了这个问题。这是由包含文件在 ASP 页面中的位置引起的。

这是修改后的代码（嗯，它的一部分......）。

```
<%@ language = vbscript %>
<% Option Explicit %>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<%

Response.Buffer = true
Response.ContentType = "text/html"
Response.AddHeader "Content-Type", "text/html;charset=ISO-8859-1"
Response.CodePage = 1252
Response.CharSet = "ISO-8859-1"
%>
<!--Include file containing functions to convert dates and to get sales order status description -->
<!--#include file="../includes/date_convert.asp"-->
<!--#include file="../includes/KHDataTransferFunctions.asp"-->
<!--#include file="../includes/IncludeStyleSheets.asp"-->
<!--#include file="../includes/IncludeJs.asp"-->
    <%
Dim wsResult,wsDatabase
Dim wsSubX
'
'Dim wsDataToXferArray()

subRoutine()
'
'------------------------------------------------------------------------------------------------
sub subRoutine
'------------------------------------------------------------------------------------------------

    wsSubX  = 0
'
    if wsResult = "" then wsResult  = fncEnableSetAndCreateDataTransfer(wsDatabase,"LK-PART","abc","A",wsSubX)              :   wsSubX  = wsSubX + 1

End Sub

%>

<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html;charset=ISO-8859-1" />
<title></title>
<%
SubIncludeOtherStyleSheets
SubIncludeJs
%> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T08:50:18.077

问题是由服务器端包含文件的位置引起的。这些需要在主 ASP 代码执行之前进行，以便足够早地声明任何全局变量。

请参阅原始帖子中带有修改代码的块以获取解决方案。

# php - 将 Zend_Acl 与 Zend_Navigation 链接

> ID：12971599
> 
> 赞同：0
> 
> 时间：2012-10-19T09:47:07.303
> 
> 标签：php, zend-framework, zend-navigation, zend-acl

我希望 Navigation 仅显示 Acl 允许的项目，但我在将 Navigation 与 Acl 链接时遇到问题 - 当我这样做时，就像在[官方示例](http://framework.zend.com/manual/1.11/en/zend.view.helpers.html#zend.view.helpers.initial.navigation.acl)或Internet 上的[其他一些资源](http://www.brandonsavage.net/controlling-access-zend_navigation-and-zend_acl/)中显示的那样，我的导航仍然显示所有项目，例如没有Acl。

在引导程序中，我正在做：

```
$view->navigation()->setContainer($container);
$view->navigation()->setAcl($acl)->setRole("1"); 
```

在哪里 ：

*   $view 是 Zend_View 对象
*   $container 是 Zend_Navigation 对象
*   $acl 是 Zend_Acl 对象

我已经按应有的方式设置了初始导航数组，acl 和导航对象看起来也很好并且包含它们应该包含的内容，所以我不打算在这里发布它们。

* * *

目前，我们使用以下结构使其工作：

```
if(!$acl->isAllowed(/* auth data, controller, action */)) {
    unset(/* this page from pages array */);
} 
```

但这一点都不漂亮，也不像官方示例中的单线。

* * *

我的问题是最有可能我的问题是什么以及开发人员在结合 Zend_Navigation 和 Zend_Acl 时最常见的问题和错误是什么？

也许我可以在其中找到解决方案，这可以帮助其他遇到此问题的开发人员。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T11:23:57.890

我有一个建议。为什么你不能为此编写一个视图助手（使用模块、控制器、动作作为参数）？在那个视图助手中你可以检查访问。

因此，您可以使用 viewhelper 来检查访问并转发到操作，而不是简单地重定向。

这是你想要的？

# c++ - 在这个 boost::asio 应用程序示例中，如何使用 send_break 进行重置？

> ID：12971601
> 
> 赞同：0
> 
> 时间：2012-10-19T09:47:06.290
> 
> 标签：c++, boost, serial-port, boost-asio

在使用 boost::asio 创建应用程序时，我为我的目的调整了一个示例。

但是，在让它工作之后，我现在正努力让它更好地工作。为此，我需要以某种方式重置我的串行设备。在类似的应用程序中，这是通过发送`break`信号来完成的。

出于某种原因，我似乎无法在没有异常的情况下做到这一点。

我正在使用该`void send_break()`函数，也许这就是问题所在，因为它似乎总是会抛出错误。

这是升压代码：

```
 /// Send a break sequence to the serial port.
  /**
   * This function causes a break sequence of platform-specific duration to be
   * sent out the serial port.
   *
   * @throws boost::system::system_error Thrown on failure.
   */
  void send_break()
  {
    boost::system::error_code ec;
    this->get_service().send_break(this->get_implementation(), ec);
    boost::asio::detail::throw_error(ec, "send_break");
  }

  /// Send a break sequence to the serial port.
  /**
   * This function causes a break sequence of platform-specific duration to be
   * sent out the serial port.
   *
   * @param ec Set to indicate what error occurred, if any.
   */
  boost::system::error_code send_break(boost::system::error_code& ec)
  {
    return this->get_service().send_break(this->get_implementation(), ec);
  } 
```

这是我试图从以下位置调用函数的代码：

```
class minicom_client
{
public:
        minicom_client(boost::asio::io_service& io_service, unsigned int baud, const string& device)
                : active_(true),
                  io_service_(io_service),
                  serialPort(io_service, device)
        {
                if (!serialPort.is_open())
                {
                        cerr << "Failed to open serial port\n";
                        return;
                }
                boost::asio::serial_port_base::baud_rate baud_option(baud);             
                serialPort.set_option(baud_option); // set the baud rate after the port has been opened             
                serialPort.send_break();                
                read_start();
        } 
```

*编辑：*

在玩了一段时间之后，我发现我得到的错误代码是`boost::asio::error::operation_not_supported;`- 但是当这是一个内置函数时，这怎么可能？！

来自 *win_iocp_serial_port_service.hpp*：

```
 // Send a break sequence to the serial port.
  boost::system::error_code send_break(implementation_type&,
      boost::system::error_code& ec)
  {
    ec = boost::asio::error::operation_not_supported;
    return ec;
  } 
```

现在我真的迷路了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-12-12T00:57:08.000

基本上，您需要打开 COM 端口并通过 Windows API 发送中断。只要您正确包含 windows.h，以下代码就应该可以工作。

```
#include <windows.h>

TCHAR pcCommPort[512];
_tcscpy(pcCommPort, "COM1");   // Or COM2, COM3, ...

//  Open a handle to the specified com port.
handleToComPort = CreateFile(pcCommPort,
    GENERIC_READ | GENERIC_WRITE,
    0,      //  must be opened with exclusive-access
    NULL,   //  default security attributes
    OPEN_EXISTING, //  must use OPEN_EXISTING
    FILE_ATTRIBUTE_NORMAL,      //  not overlapped I/O
    NULL); //  hTemplate must be NULL for comm devices

::SetCommBreak(handleToComPort);
::Sleep(125);           // Sleep 125ms to ensure a good break
::ClearCommBreak(handleToComPort);
::CloseHandle(handleToComPort); // Close the COM port only if you need to. 
```

# php - Windows 退出上的 php 导致响应中止

> ID：12971604
> 
> 赞同：1
> 
> 时间：2012-10-19T09:47:25.397
> 
> 标签：php, windows, exit, abort

所以这就是故事

windows上的Apache + php + Yii框架

在某些情况下，例如重定向，框架正在调用`exit($status)`where`$status = 0`并且它在 linux 服务器上运行良好，但在我的 windows 机器上，它会导致响应被中止（在 firebug 中可见）。在日志等中找不到任何东西。任何想法为什么会这样？

这是 Firebug 显示的内容（只是非常基本的信息，根本没有回应）

```
URL:POST http://ecosauveur.localhost:8080/index.php/home/login
Status:Aborted
Domain:ecosauveur.localhost:8080
Size:0
IP:127.0.0.1:8080 
```

# ajax - Ajax 模式下的自动保存功能

> ID：12971605
> 
> 赞同：2
> 
> 时间：2012-10-19T09:47:27.720
> 
> 标签：ajax, xpages

我将使用具有自动保存功能的 Notes 文档数据源（如谷歌邮件）为每个 XPage 实现自定义控件

这样事件处理程序就“没有验证”......

我的问题是......如何在 Ajax 模式下执行这个处理程序......这样用户就不会刷新当前页面？

有人知道吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T10:25:32.050

是的，您可以为此使用良好的旧 CSJS *executeOnServer*方法。该方法可以在这里找到：http: //xpages.info/XPagesHome.nsf/Entry.xsp?documentId= [88065536729EA065852578CB0066ADEC](http://xpages.info/XPagesHome.nsf/Entry.xsp?documentId=88065536729EA065852578CB0066ADEC)

要禁用验证，您必须将参数*valmode=0*添加到部分刷新。这会禁用验证器和转换器。

这就是事件处理程序的样子：

```
<xp:eventHandler event="autoSaveEvent" id="autoSaveDoc" submit="false">
   <xp:this.action>
      <xp:saveDocument />
   </xp:this.action>
</xp:eventHandler> 
```

现在可以使用以下代码从 CSJS 调用事件处理程序：

```
executeOnServer('autoSaveDoc',null,{ 'valmode': 0 }) 
```

# objective-c - keyboard changed height

> ID：12971609
> 
> 赞同：0
> 
> 时间：2012-10-19T09:47:40.777
> 
> 标签：objective-c, keyboard, uiwindow

![enter image description here][1]![enter image description here](../Images/785a2d8579b9032ba3d93278ccfc8add.png)keyboard get out of screen at bottom little bit when i try to add window as subview having view inside it. How to fix it? Here is my code.

```
keyboardWindowFrame = nil;
keyboardWindowFrame = [[[UIApplication sharedApplication] windows] objectAtIndex:1];
for(UIView* potentialKeyboard in keyboardWindowFrame.subviews)
{   // if the real keyboard-view is found, remember it.
    if([[potentialKeyboard description] hasPrefix:@"<UIPeripheralHost"] == YES)
    {
        NSLog(@"Keyboard Frame: %@",NSStringFromCGRect(potentialKeyboard.frame));
        keyboard = potentialKeyboard;
        [keyboard addSubview:viewForGlobeEmoji];
        [self.view addSubview:keyboard];
    }
} 
```

Here is attached screen shot:

now there is space between toolbar and keyboard after adding

```
 if([[potentialKeyboard description] hasPrefix:@"<UIPeripheralHost"] == YES)
        {
            NSLog(@"potentialKeyboard: %@",NSStringFromCGRect(potentialKeyboard.frame));

            keyboard = potentialKeyboard;
            CGRect frame = keyboard.frame;
            frame.origin.y = 332;
            keyboard.frame = frame;
            [keyboard addSubview:viewForGlobeEmoji];
            [self.view addSubview:keyboard];

         } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T09:53:31.807

you should set the frame of keyboard below this line:

```
keyboard = potentialKeyboard;
CGRect frame = keyboard.frame;
frame.origin.y = xxx;
keyboard.frame = frame 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T10:02:46.717

Doing something like this is simply wrong and won't be well received by appstore reviewers. You are tampering with undocumented system APIs and this is only the result of an unexpected behavior.

There are standard ways how to do what you want:

1.  Keyboard notifications to check keyboard size and position.
2.  [UIResponder inputView]

# css - 文本 css 背景，就像是手工完成的一样

> ID：12971610
> 
> 赞同：0
> 
> 时间：2012-10-19T09:47:44.347
> 
> 标签：css, text, background

我想用 css 设置 html 文本的样式，如下图所示：

![在此处输入图像描述](../Images/5bbe2947b23398748c303320d0ce9e07.png)

我在谷歌上搜索了一个小时的 CSS，但没有。

是否完成：

1.  css3?
2.  带有重复-x 的背景图像？

感谢您的任何帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T09:49:18.267

它看起来像是用作背景的图像

你可以通过重复图像来做到这一点

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T09:53:32.200

应该没什么大不了的。只需给*内联*元素一个合适的背景图像。一个或一个与您的最大线长一样长的平铺。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-19T09:53:46.913

试试这个：

步骤：将文本放在您要应用背景的范围中

```
<span class="bgColor">Your text is here </span>

<style>
.bgColor {
    display: inline;
    font: bold 14px/18px arial;
    color: #fff;
    background: #000;
    padding: 1px 0 1px 0;
    white-space: pre-line; /* Not understood by IE, use manual br for IE */
  }
</style> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-19T09:55:47.293

`<mark>`与HTML5 中的标签非常相似。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-19T10:01:39.057

您可以将文本包含在 <span> 中，该文本在您的设计示例中突出显示。背景图案不同，因此您为四个 span 元素使用 4 张图像，以这种方式进行样式设置。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-19T10:12:44.290

你的问题对我来说不是很清楚。

但如果你使用这个，可能会解决你的问题

```
<style type="text/css">
.highlight { background-color:#c9e665 !important; }
</style>

Your <span class="highlight">text goes</span> here. 
```

# java - 从服务启动应用程序

> ID：12971611
> 
> 赞同：0
> 
> 时间：2012-10-19T09:47:44.807
> 
> 标签：java, android, service, android-intent

好的，这是我的问题。我有一个`Service`接收推送通知的。现在，根据推送通知的内容，如果单击它，它应该启动相应的应用程序。

我收到推送通知或使用服务没有问题，我唯一无法工作的是它打开正确应用程序的部分。

我需要做什么才能从`Service`? 这必须是动态的，因为将有多个应用程序使用此服务。

如果有人能指出我正确的方向，那就太好了。

PS。我正在使用 GCM 服务，该服务已放入库中，因此我可以在我的多个应用程序中使用它。这是`GCMIntentService.onMessage()`我需要检查 url 内容然后为通知设置正确意图的函数：

```
@Override
protected void onMessage(Context arg0, Intent arg1)
{
    Log.i(TAG, "new message = " + arg1.getExtras());

    //Get a reference to the NotificationManager
    String ns = Context.NOTIFICATION_SERVICE;
    NotificationManager mNotificationManager = (NotificationManager) getSystemService(ns);

    //Instantiate the Notification      
    int icon = getResourseIdByName(arg0.getApplicationContext().getPackageName(), "drawable", "notification_icon");
    CharSequence tickerText = arg1.getExtras().getString("tickertext");
    long when = System.currentTimeMillis();

    Notification notification = new Notification(icon, tickerText, when);

    //Define the notification's message and PendingIntent 
    Context context = getApplicationContext();
    CharSequence contentTitle = arg1.getExtras().getString("contentTitle");
    CharSequence contentText = arg1.getExtras().getString("contentText");

    Intent notificationIntent = null;

    if(arg1.getExtras().getString("url").isEmpty())
    {
        notificationIntent = new Intent(this, arg1.getExtras().getString("packageName").getClass());
    }
    else
    {
        notificationIntent = new Intent(this, MyWebView.class);
    }

    PendingIntent contentIntent = PendingIntent.getActivity(this, 0, notificationIntent, Intent.FLAG_ACTIVITY_NEW_TASK);

    notification.setLatestEventInfo(context, contentTitle, contentText, contentIntent);
    notification.flags = Notification.FLAG_AUTO_CANCEL;

    //Pass the Notification to the NotificationManager
    int notificationId = Integer.parseInt(arg1.getExtras().getString("notificationId"));

    mNotificationManager.notify(notificationId, notification);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T09:53:57.077

可以使用`Intent`s 启动应用程序。您需要构造正确的`PendingIntent`对象，如下所示：

```
Intent targetIntent = new Intent(Intent.ACTION_MAIN, null);
targetIntent.addCategory(Intent.CATEGORY_LAUNCHER);
ComponentName cn = new ComponentName("target_app_package_name", "target_activity_class_name");
targetIntent.setComponent(cn);
PendingIntent contentIntent = PendingIntent.getActivity(this, 0, targetIntent, Intent.FLAG_ACTIVITY_NEW_TASK); 
```

如果您不知道目标包或目标`Activity`，可以使用以下代码：

```
Intent startingIntent = context.getPackageManager().getLaunchIntentForPackage("target_app_package_name");
context.startActivity(startingIntent); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-19T09:56:31.350

好吧，看一眼，你似乎可以得到相应应用程序的完整包名。

然后你可以通过包名启动应用程序，像这样

```
Intent LaunchIntent = getPackageManager().getLaunchIntentForPackage("com.your.packageName.in.String");
startActivity(LaunchIntent); 
```

编辑：

为此，AFAIK，您只能从您自己的创建该通知的包中启动一个活动。您可以从另一个应用程序包启动一个活动，但是您必须知道该包的活动类名称，而这通常是您不可能知道的。

```
Intent clickIntent = new Intent(context,Activity.class);
PendingIntent pendingIntent = PendingIntent.getActivity(context,0,clickIntent,0); 
```

这是您在创建通知时需要的。

```
notification.setlatestEventInfo(context, "title","content",pendingIntent); 
```

啊！抱歉评论很糟糕...我似乎无法在评论中添加代码:(

# android - 将按钮放在 webview 顶部时出现 ClassCastError 异常

> ID：12971613
> 
> 赞同：0
> 
> 时间：2012-10-19T09:47:48.463
> 
> 标签：android, button, webview, classcastexception

我想在 webview 上放一个按钮。为此，我将 XML 定义为：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

    <WebView
        android:id="@+id/webview_news_fullscreen"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent" />

    <Button
        android:id="@+id/done_btn_news_fullscreen"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:background="@drawable/done_btn" />

</RelativeLayout> 
```

**活动课：**

```
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.article_full_screen);
    url = getIntent().getExtras().getString(Universal.TAG_PERMALINK);
    done_button = (Button)findViewById(R.id.done_btn_news_fullscreen);
    done_button.setOnClickListener(new OnClickListener() {
        @Override
        public void onClick(View v) {
            finish();
        }
    });

    webView = (WebView)findViewById(R.id.webview_news_fullscreen);
    webView.loadUrl(url);
} 
```

但是，每次我运行我的代码时，它都会崩溃并给出“ **java.lang.ClassCastException: android.webkit.WebView** ”错误。请帮帮我！

**日志猫：**

```
10-19 15:08:52.683: E/AndroidRuntime(845): FATAL EXCEPTION: main
10-19 15:08:52.683: E/AndroidRuntime(845): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.example.newsreaderui/com.example.newsreaderui.fullarticle.ArticleFullScreen}: java.lang.ClassCastException: android.webkit.WebView
10-19 15:08:52.683: E/AndroidRuntime(845):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2663)
10-19 15:08:52.683: E/AndroidRuntime(845):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2679)
10-19 15:08:52.683: E/AndroidRuntime(845):  at android.app.ActivityThread.access$2300(ActivityThread.java:125)
10-19 15:08:52.683: E/AndroidRuntime(845):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2033)
10-19 15:08:52.683: E/AndroidRuntime(845):  at android.os.Handler.dispatchMessage(Handler.java:99)
10-19 15:08:52.683: E/AndroidRuntime(845):  at android.os.Looper.loop(Looper.java:123)
10-19 15:08:52.683: E/AndroidRuntime(845):  at android.app.ActivityThread.main(ActivityThread.java:4627)
10-19 15:08:52.683: E/AndroidRuntime(845):  at java.lang.reflect.Method.invokeNative(Native Method)
10-19 15:08:52.683: E/AndroidRuntime(845):  at java.lang.reflect.Method.invoke(Method.java:521)
10-19 15:08:52.683: E/AndroidRuntime(845):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
10-19 15:08:52.683: E/AndroidRuntime(845):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
10-19 15:08:52.683: E/AndroidRuntime(845):  at dalvik.system.NativeStart.main(Native Method)
10-19 15:08:52.683: E/AndroidRuntime(845): Caused by: java.lang.ClassCastException: android.webkit.WebView
10-19 15:08:52.683: E/AndroidRuntime(845):  at com.example.newsreaderui.fullarticle.ArticleFullScreen.onCreate(ArticleFullScreen.java:26)
10-19 15:08:52.683: E/AndroidRuntime(845):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
10-19 15:08:52.683: E/AndroidRuntime(845):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2627)
10-19 15:08:52.683: E/AndroidRuntime(845):  ... 11 more 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-19T09:50:28.287

尝试清理并重建项目。可能是愚蠢的答案，但 R.java 文件的生成存在问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-19T09:54:22.333

Eclipse -> Project -> Clean 应该会有所帮助

# java - 在tomcat 5.5上部署应用程序时出现struts错误

> ID：12971614
> 
> 赞同：0
> 
> 时间：2012-10-19T09:47:53.223
> 
> 标签：java, tomcat, struts2

在 tomcat 5.5 上部署 Web 应用程序时出现以下错误，请告知我的类路径中缺少哪个 jar，以便我可以添加所需的 jar

```
SEVERE: Error configuring application listener of class org.apache.struts2.tiles.StrutsTilesListener
java.lang.NoClassDefFoundError: org/apache/tiles/web/startup/TilesListener
    at java.lang.ClassLoader.defineClass1(Native Method)
    at java.lang.ClassLoader.defineClassCond(Unknown Source)
    at java.lang.ClassLoader.defineClass(Unknown Source)
    at java.security.SecureClassLoader.defineClass(Unknown Source)
    at java.net.URLClassLoader.defineClass(Unknown Source)
    at java.net.URLClassLoader.access$000(Unknown Source)
    at java.net.URLClassLoader$1.run(Unknown Source)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.net.URLClassLoader.findClass(Unknown Source)
    at java.lang.ClassLoader.loadClass(Unknown Source)
    at java.lang.ClassLoader.loadClass(Unknown Source)
    at java.lang.ClassLoader.loadClass(Unknown Source) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T10:15:00.533

在您不知道将哪个 jar 添加到类路径的情况下，请使用[findjar.com 。](http://www.findjar.com)

在您的情况下，系统无法加载 TilesListener 的定义。所以，可能你想将该类添加到你的类路径中。为此，可以在[http://www.findjar.com/index.x?query=org%2Fapache%2Ftiles%2Fweb%2Fstartup%2FtilesListener](http://www.findjar.com/index.x?query=org%2Fapache%2Ftiles%2Fweb%2Fstartup%2FTilesListener)找到相关的 jar， 只需单击 [class] 链接。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T09:57:50.907

好吧，谷歌搜索一下说这个类在：

[http://repo1.maven.org/maven2/org/apache/tiles/tiles-servlet/2.2.2/tiles-servlet-2.2.2.jar](http://repo1.maven.org/maven2/org/apache/tiles/tiles-servlet/2.2.2/tiles-servlet-2.2.2.jar)

这个罐子。如果它仍然不起作用，请尝试谷歌搜索，例如：`org/apache/tiles/web/startup/TilesListener jar`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-19T12:33:13.380

如果您使用任何 ide 或设置类的类路径，请将此 jar 文件添加到库包中

[http://www.jarfinder.com/index.php/java/info/org.apache.struts2.tiles.StrutsTilesListener](http://www.jarfinder.com/index.php/java/info/org.apache.struts2.tiles.StrutsTilesListener)

# java - 在eclipse中编译java程序

> ID：12971616
> 
> 赞同：2
> 
> 时间：2012-10-19T09:48:04.533
> 
> 标签：java, eclipse, compilation

我在编译这个 java 文件时遇到问题。我无法理解那个问题是什么。日食 说

```
Exception in thread "main" java.lang.ArrayIndexOutOfBoundsException: 10
at ll.ln.main(ln.java:11)" 
```

这是目录： ![](../Images/f4199291113508d69ba21fd17f0d163e.png)

这是代码：

```
package ll;
public class ln {
    public static void main(String arguments[]) {
        String[] pharse={"here i am ","ther you are",
                                 "nobody movewho is in charge here",
                                 "haven dosent far away"};
        for (int count=0;count<=pharse.length;count ++){
            String courenttext=pharse[count];
            char[] chcs=courenttext.toCharArray();
            int[] ln=new int[26];
            for(int i=0;i<=chcs.length;i++){
                if((chcs[i]>'z')||(chcs[i]<'a'))
                 continue;
                ln[chcs[i]-'a'] ++;
            }
            for (int i=0;i<27;i++){
                char t='a';
                t+=i;
                System.out.println(t +": "+ln[i]+"   ");
                }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T09:49:29.393

在每一行中替换`<=` 为`<`：

```
for (int count=0;count<=pharse.length;count ++){ 
```

应该：

```
for (int count=0;count<pharse.length;count ++){ 
```

在这一行还有：

```
for(int i=0;i<=chcs.length;i++){ 
```

应该 ：

```
for(int i=0;i<chcs.length;i++){ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-19T09:50:08.060

使用`<`代替`<=`

```
for (int i = 0; i < chcs.length; i++) 
```

完整代码

```
 String[] pharse = { "here i am ", "ther you are", "nobody movewho is in charge here",
                "haven dosent far away" };
        for (int count = 0; count < pharse.length; count++) {
            String courenttext = pharse[count];
            char[] chcs = courenttext.toCharArray();
            int[] ln = new int[26];
            for (int i = 0; i < chcs.length; i++) {
                if ((chcs[i] > 'z') || (chcs[i] < 'a'))
                    continue;
                ln[chcs[i] - 'a']++;
            }

            for (int i = 0; i < 26; i++) {
                char t = 'a';
                t += i;
                System.out.println(t + ": " + ln[i] + "   ");

            }

        } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-19T09:51:42.220

改变

```
for(int i=0;i<=chcs.length;i++) 
```

到

```
for(int i=0;i<chcs.length;i++) 
```

您的索引超出长度

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-19T10:17:49.490

更改 3 行：

1.  `for (int count=0;count<=pharse.length;count ++){`

    到

    `for (int count=0;count<pharse.length;count ++){`

2.  `for(int i=0;i<=chcs.length;i++){`

    到

    `for(int i=0;i<chcs.length;i++){`

3.  `for (int i=0;i<27;i++){`

    到

    `for (int i=0;i<26;i++){`

# php - 如何从浏览器游戏设计数据库访问

> ID：12971627
> 
> 赞同：1
> 
> 时间：2012-10-19T09:48:25.897
> 
> 标签：php, mysql, ajax, postgresql, pdo

首先是一点背景：我正在编写一个小浏览器游戏来练习我的网络技能和乐趣:) 有些用户拥有一些工厂和一个主仓库。这些生产不同类型的产品，这些产品存储在内部工厂仓库中。用户可以“聚集”工厂，将成品转移到他们的主仓库。

为了实现，我使用带有 PDO 的 PHP 作为数据库连接器。我的网络服务器使用 MySQL 数据库，我使用本地 Postgres 数据库进行调试。

用户应该能够在不点击收集链接的情况下收集所有工厂并等待响应。因此，我使用 Ajax，以便用户可以单击所有工厂一次并等待所有请求完成。为了防止这种并行访问在我的数据库中引入不一致，我使用隔离级别 SERIALIZABLE 的事务。因为 pdo 不支持隔离级别，所以我在与我的 Postgres-db 的连接处发送一个查询

```
SET SESSION CHARACTERISTICS AS TRANSACTION ISOLATION LEVEL SERIALIZABLE;
SET statement_timeout=10000; 
```

第二个查询应该防止并行事务取消，而另一个事务正在进行中。两个查询都没有返回错误，但不起作用。当我发送 8 个几乎并行的请求时，其中只有 2-3 个成功返回，另一个从 postgres “25P02 IN FAILED SQL TRANSACTION”返回错误。在我看来，在调试时，事务不会等待另一个完成，但我不确定这一点。

现在我的问题：

1.  是否有可能使用 PDO 获得隔离级别和超时？
2.  有没有我可以使用的替代品？（除了 Zend 这样的重量级框架，我想深入探索所有机制）
3.  如果我只使用一种类型的数据库和像 mysqli 这样的专用连接器，我可以解决我的问题吗？我认为使用 PDO 更灵活是个好主意，但可能对浏览器游戏不利。
4.  我的数据库访问方法可以吗？还是有更好的设计？
5.  这样的错误是否正常，这样的交易是否应该循环直到成功？如果是，在客户端使用 Ajax 还是在服务器端使用 PHP？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T02:07:08.777

该错误告诉您，您在已经出错的事务中发出语句。虽然早期的陈述似乎没有失败，但他们可能已经失败了；PDO 和 PHP 没有以健壮和谨慎的错误处理而著称。

我强烈建议您在运行测试时检查 PostgreSQL 日志文件。看看失败的地方和地方。设置 a 可能会有所帮助，`log_line_prefix`这样您就可以通过显示后端进程 ID 更轻松地查看哪些语句来自哪些会话，例如：

```
log_line_prefix = 'ss=%e pid=%p cmd=%i' 
```

您可能还想设置`log_statement = all`.

您很可能会看到 PDO 发出的查询会产生错误，因此您的下一条语句会尝试在中止的事务中执行并产生[`25P02 in_failed_sql_transaction`](http://www.postgresql.org/docs/current/static/errcodes-appendix.html).

* * *

顺便说一句，这似乎不是一个特别需要`SERIALIZABLE`隔离才能获得一致结果的用例。您是否考虑过仅将 a`UNION ALL`与您的两个`SELECT`s 一起使用？

```
SELECT 'internal', count(inventory_items) FROM internal_inventory
UNION ALL
SELECT 'main', count(inventory_items) FROM main_inventory; 
```

或者如果架构更好：

```
SELECT isinternal, count(inventory_items)
FROM inventory
GROUP BY isinternal; 
```

# c# - OrderBy 命名索引

> ID：12971628
> 
> 赞同：0
> 
> 时间：2012-10-19T09:48:31.103
> 
> 标签：c#, linq, sorting, datagridview

我有一个 DataGridView，它保存从数据库上的存储过程返回的数据。每个返回值的列都不同，因此没有强类型名称。我目前正在努力订购这些，因为数字列被订购为字符串，例如。1 -> 10 -> 11 -> 15 -> 2 -> 25 -> 3，而不是按值。我已经确认列的 ValueType 设置正确。我试过这个：

```
var sortedRows = from row in _rowArray
                             orderby columnIndex
                             select row;
                _rowArray = sortedRows.ToArray(); 
```

其中 _rowArray 是一个 DataRows 数组，是 DataGridView 的 DataSource，columnIndex 是一个整数变量，用于指定用户想要排序的 _rowArray 中的哪一列。在调试时，我可以看到 sortedRows 与 _rowArray 的顺序相同，紧跟在 LINQ 语句之后。我也试过：

```
_rowArray = _rowArray.OrderBy(r => r[columnIndex]).ToArray(); 
```

并尝试创建一个 DataView （视图）并做到了这一点：

```
view.Sort = m_data.Tables[0].Columns[columnIndex].ColumnName + " ASC"; 
```

……但这并没有奏效。有人提供任何见解吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T09:51:58.923

您是否尝试过在订购之前将字符串解析为 int ？

```
_rowArray = _rowArray.OrderBy(r => int.Parse(r[columnIndex])).ToArray(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T11:22:13.293

感谢 lcfseth 的帮助，以及[这里](https://stackoverflow.com/questions/45030/how-to-parse-a-string-into-a-nullable-int-in-c-sharp-net-3-5)的线程，我已经解决了这个问题，虽然它很丑陋。

我使用了另一个线程的 Parse 方法：

```
public static T Parse<T>(object value)
{
    try { return (T)System.ComponentModel.TypeDescriptor.GetConverter(typeof(T)).ConvertFrom(value.ToString()); }
    catch { return default(T); }
} 
```

那么我自己的方法就变成了：

```
private void SortRows(int columnIndex, ListSortDirection direction)
        {
            if ((_rowArray == null) || (!_rowArray.Any()))
                return;

            dataGridView1.EndEdit();

            RemoveRowDefinitions();

            if (direction == ListSortDirection.Ascending)
            {
                var dataType = dataGridView1.Columns[columnIndex].ValueType;
                try
                {
                    switch (dataType.Name.ToLower())
                    {
                        case "double":
                            _rowArray = _rowArray.OrderBy(r => Parse<double?>(r[columnIndex].ToString())).ToArray();
                            break;
                        case "int32":
                            _rowArray = _rowArray.OrderBy(r => Parse<int?>(r[columnIndex].ToString())).ToArray();
                            break;
                        case "datetime":
                            _rowArray = _rowArray.OrderBy(r => Parse<DateTime?>(r[columnIndex].ToString())).ToArray();
                            break;
                        default:
                            _rowArray = _rowArray.OrderBy(r => r[columnIndex].ToString()).ToArray();
                            break;
                    }
                }
                catch(Exception ex)
                {
                    throw new Exception("Cannot sort on the data type '" + dataType.Name + "'", ex);
                }              
            }

            if (direction == ListSortDirection.Descending)
            {
                var dataType = dataGridView1.Columns[columnIndex].ValueType;
                try
                {
                    switch (dataType.Name.ToLower())
                    {
                        case "double":
                            _rowArray = _rowArray.OrderByDescending(r => Parse<double?>(r[columnIndex].ToString())).ToArray();
                            break;
                        case "int32":
                            _rowArray = _rowArray.OrderByDescending(r => Parse<int?>(r[columnIndex].ToString())).ToArray();
                            break;
                        case "datetime":
                            _rowArray = _rowArray.OrderByDescending(r => Parse<DateTime?>(r[columnIndex].ToString())).ToArray();
                            break;
                        default:
                            _rowArray = _rowArray.OrderByDescending(r => r[columnIndex].ToString()).ToArray();
                            break;
                    }
                }
                catch (Exception ex)
                {
                    throw new Exception("Cannot sort on the data type '" + dataType.Name + "'", ex);
                }                    
            }

            dataGridView1.Refresh();
            ApplyRowDefinitions();
            GC.Collect();
        } 
```

# objective-c - 选择一行时，如何从单元格中删除 UITextField？

> ID：12971629
> 
> 赞同：0
> 
> 时间：2012-10-19T09:48:30.010
> 
> 标签：objective-c, uitableview, ios5

`UITextField`每当第一次选择任何行时，我都会添加一个到单元格`UITableView`，现在我想在第二次选择行时删除该文本字段。

任何建议或示例代码将不胜感激。谢谢！！

在单元格中添加文本字段的代码：在**cellForAtIndexPath**方法中

```
 if (indexPath.row == selectedRow)
            {

                  numOfBottles =[[UITextField alloc] initWithFrame:CGRectMake(240,9.0f,50, 25)];
                    numOfBottles.tag = indexPath.row;

                    [numOfBottles setBorderStyle:UITextBorderStyleNone];
                    [numOfBottles setBackgroundColor:[UIColor clearColor]];
                    [numOfBottles setTextColor:[UIColor whiteColor]];
                    [numOfBottles setTextAlignment:UITextAlignmentLeft];
                    [numOfBottles setBackground:[UIImage imageNamed:@"blue_dropdown_normal.png"]];
                    [numOfBottles setFont:[UIFont systemFontOfSize:16.0f]];
                    [numOfBottles setDelegate:self];

                    NSString* quantity = [[NSString alloc] initWithString:[subtotalObj.qtyArray objectAtIndex:(indexPath.row - 1)]];

                    [numOfBottles setText:quantity];
                    [numOfBottles setTextAlignment:UITextAlignmentCenter];
                    [numOfBottles setBackgroundColor:[UIColor whiteColor]];
                    numOfBottles.keyboardType = UIKeyboardTypeDefault;
                    numOfBottles.tag = indexPath.row;
                    [cell.contentView addSubview:numOfBottles];
                    [numOfBottles release];

            } 
```

在**didSelectedRowAtIndexPath**

```
selectedRow = indexPath.row;
[mainTable reloadData]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T10:21:21.770

您可以通过为用于填充单元格的模型对象提供一个整数变量来轻松获得此信息。每次用户选择该单元格时，此变量都会增加 1。

然后在 –tableView:didDeselectRowAtIndexPath: 方法中（或者在你的应用程序中调用它）你可以做这样的事情：

```
if (selectedCellModel.selectCnt == 1) {
    //create the text field
} else if (selectedCellModel.selectCnt == 2) {
    //delete the text field
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T10:18:50.847

为什么不直接隐藏呢？

```
[yourTextField setHidden:YES]; 
```

或者如果 textField 是 tableview 单元格的子视图，只需将其删除。

```
[yourTextField removeFromSuperview]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-19T10:38:40.100

我强烈建议您创建自己的 UITableViewCell 子类。在这个类中添加这个 UITextView 对象，它的方法`- (void)setSelected:(BOOL)selected animated:(BOOL)animated`显示/隐藏你的文本字段。

```
- (void)setSelected:(BOOL)selected animated:(BOOL)animated {
    [super setSelected:selected animated:animated];
    [textField setHidden:!textField.hidden]; //this alternately show and hide textField
} 
```

# python - 按可以为 None 的属性对列表进行排序

> ID：12971631
> 
> 赞同：35
> 
> 时间：2012-10-19T09:48:31.713
> 
> 标签：python, python-3.x, python-2to3

我正在尝试使用对对象列表进行排序

`my_list.sort(key=operator.attrgetter(attr_name))`

但如果任何列表项有`attr = None`而不是`attr = 'whatever'`,

然后我得到一个`TypeError: unorderable types: NoneType() < str()`

在 Py2 中这不是问题。我如何在 Py3 中处理这个问题？

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-10-19T09:52:48.990

排序比较运算符对 Python 3 中的类型更严格，如下[所述](http://docs.python.org/release/3.0.1/whatsnew/3.0.html#ordering-comparisons)：

> 当操作数没有有意义的自然排序时，排序比较运算符（<、<=、>=、>）会引发 TypeError 异常。

Python 2`None`在任何字符串（甚至是空字符串）之前排序：

```
>>> None < None
False

>>> None < "abc"
True

>>> None < ""
True 
```

在 Python 3 中，任何对实例排序的尝试都会`NoneType`导致异常：

```
>>> None < "abc"
Traceback (most recent call last):
File "<stdin>", line 1, in <module>
TypeError: unorderable types: NoneType() < str() 
```

我能想到的最快解决方法是将`None`实例显式映射到可排序的内容中，例如`""`：

```
my_list_sortable = [(x or "") for x in my_list] 
```

如果您想在保持数据完整的同时对数据进行排序，只需提供`sort`自定义`key`方法：

```
def nonesorter(a):
    if not a:
        return ""
    return a

my_list.sort(key=nonesorter) 
```

* * *

## 回答 #2

> 赞同：32
> 
> 时间：2014-10-13T20:47:43.483

对于一般解决方案，您可以定义一个比较少于任何其他对象的对象：

```
from functools import total_ordering

@total_ordering
class MinType(object):
    def __le__(self, other):
        return True

    def __eq__(self, other):
        return (self is other)

Min = MinType() 
```

然后使用替换列表`Min`中任何`None`值的排序键

```
mylist.sort(key=lambda x: Min if x is None else x) 
```

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2018-05-20T06:48:59.590

此处提出的解决方案有效，但可以进一步缩短：

```
mylist.sort(key=lambda x: x or 0) 
```

本质上，我们可以将 None 视为其值为 0。

例如：

```
>>> mylist = [3, 1, None, None, 2, 0]
>>> mylist.sort(key=lambda x: x or 0)
>>> mylist
[None, None, 0, 1, 2, 3] 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2017-04-25T10:19:09.090

由于除此之外还有其他东西`None`无法与字符串（对于初学者来说是整数和列表）相提并论，因此这里有一个针对一般问题的更强大的解决方案：

```
my_list.sort(key=lambda x: x if isinstance(x, str) else "") 
```

这将让字符串和任何派生的类型`str`作为它们自己进行比较，并将其他所有内容与空字符串进行分类。或者，如果您愿意，也可以替换一个不同的默认默认键，例如，`"ZZZZ"`或者`chr(sys.maxunicode)`让这些元素在最后进行排序。

# c# - 在谷歌驱动器帐户中插入文件时获取“文件”是一个模棱两可的参考错误

> ID：12971632
> 
> 赞同：0
> 
> 时间：2012-10-19T09:48:42.980
> 
> 标签：c#, google-drive-api

使用以下代码在 Google Drive 帐户中插入文件时出现错误

> 'File' 是 'Google.Apis.Drive.v2.Data.File' 和 'System.IO.File' 之间的模糊引用

```
 private static File insertFile(DriveService service, String title, String description, String parentId, String mimeType, String filename)
        {
            // File's metadata.
            File body = new File();
            body.Title = title;
            body.Description = description;
            body.MimeType = mimeType;

            // Set the parent folder.
            if (!String.IsNullOrEmpty(parentId))
            {
                body.Parents = new List<ParentReference>() { new ParentReference() { Id = parentId } };
            }

            // File's content.
            byte[] byteArray = System.IO.File.ReadAllBytes(filename);
            MemoryStream stream = new MemoryStream(byteArray);

            try
            {
                FilesResource.InsertMediaUpload request = service.Files.Insert(body, stream, mimeType);
                request.Upload();

                File file = request.ResponseBody;

                // Uncomment the following line to print the File ID.
                // Console.WriteLine("File ID: " + file.Id);

                return file;
            }
            catch (Exception e)
            {
                Console.WriteLine("An error occurred: " + e.Message);
                return null;
            }
        } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-19T09:51:03.677

两个命名空间 (`Google.Apis.Drive.v2.Data`和`System.IO`) 都定义了`class` `File`，并且您可能已经将两个命名空间都“包含”在了`using`声明中。

您需要选择您需要的并使用完全限定名称（例如`System.IO.File`或`Google.Apis.Drive.v2.Data.File`取决于您的需要）。

如果您希望在编写代码时减少击键，您可以执行以下操作：

```
using GoogleDataAPI = Google.Apis.Drive.v2.Data; 
```

然后使用`GoogleDataAPI`代替`Google.Apis.Drive.v2.Data`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-19T09:56:26.017

**`Google.Apis.Drive.v2.Data`**并且**`System.IO`**都定义了**File**类，所以使用全名 **`Google.Apis.Drive.v2.Data.File`**和**`System.IO.File`**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-19T09:56:09.093

不要在定义中只给出文件，在定义时使用完整的命名空间

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-19T09:54:45.670

我有很多相同的类名，但位于不同的命名空间中。

其他答案是正确的；您可以通过使用其名称空间完全限定类来解决此问题。我更喜欢使用 using 别名。

```
using System.IO;
using google = Google.Apis.Drive.v2.Data; 
```

对 System.IO.File 的任何引用都可以不加限定。任何时候你需要引用谷歌的文件类，你可以简单地使用（例如）：-

```
var googleFile = new google.File(); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-19T09:51:13.573

最好的办法是限定文件类型，如果它总是在谷歌驱动器上，然后将其设置为“Google.Apis.Drive.v2.Data.File”

# django - Django 格式的网址

> ID：12971640
> 
> 赞同：0
> 
> 时间：2012-10-19T09:49:32.977
> 
> 标签：django, url, format

我是 Django 的新手，所以如果这个问题很无聊，我很抱歉。我想格式化从 GET 接收到的 Django url，如下所示：

```
example.com/search?title=Test&city=London&category=SomeCategory
example.com/search?title=&city=London&category=SomeCategory
example.com/search?title=&city=&category=SomeCategory 
```

进入这个：

```
example.com/search/Test/London/SomeCategory
example.com/search/post/London/SomeCategory
example.com/search/post/city/SomeCategory 
```

做这个的最好方式是什么？提交此表单的外观如何？

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-19T09:58:18.267

它看起来像这样：

```
url(r'^search/(?P<title>\w+)/(?P<city>[\w -_]+)/(?P<category>[\w -_]+/$',
     'name_of_view', name='name_of_view') 
```

......有这样的看法：

```
def name_of_view(request, title, city, category):
    ... 
```

然后，您的表格将如下所示：

```
<form method="post" action="{% url name_of_view title city category %}">
  ...
</form> 
```

关键是您需要在不需要某些部分时提供默认参数（例如`title`or `city`，根据您的示例）。不过，您必须在 url 中提供它们。这意味着在您的视图中处理它们时，您需要检查它们是否确实具有某些特殊值，并有条件地处理这些值。

*请注意，我对 url 模式中的正则表达式进行了一些有根据的猜测：根据需要进行调整。*

# python - 需要了解__init__、__new__和__call__的流程

> ID：12971641
> 
> 赞同：13
> 
> 时间：2012-10-19T09:49:38.007
> 
> 标签：python, design-patterns, singleton, metaclass

```
class Singleton(type):
    def __init__(self, *args, **kwargs):
        print 'calling __init__ of Singleton class', self
        print 'args: ', args
        print 'kwargs: ', kwargs
        super(Singleton, self).__init__(*args, **kwargs)
        self.__instance = None
    def __call__(self, *args, **kwargs):
        print 'running __call__ of Singleton', self
        print 'args: ', args
        print 'kwargs: ', kwargs, '\n\n'
        if self.__instance is None:
            self.__instance = super(Singleton, self).__call__(*args, **kwargs)
        return self.__instance

class A(object):
    __metaclass__ = Singleton
    def __init__(self,a):
        print 'in __init__ of A:  ', self
        self.a = a
        print 'self.a: ', self.a

a=A(10)
b=A(20) 
```

[我从 Ben 对Python 使用 __new__ 和 __init__](https://stackoverflow.com/questions/674304/pythons-use-of-new-and-init)的问题的回答中复制了这段代码？并稍作修改。但是，我不知道流量。尽管我从更高的层次上理解了这段代码的目的。但是，在内部它是如何工作的，我不太确定。

运行此代码时，我得到以下输出：-

```
calling __init__ of Singleton class <class '__main__.A'>
args:  ('A', (<type 'object'>,), {'__module__': '__main__', '__metaclass__': <class '__main__.Singleton'>, '__init__': <function __init__ at 0x01F9F7B0>})
kwargs:  {}
running __call__ of Singleton <class '__main__.A'>
args:  (10,)
kwargs:  {}

in __init__ of A:   <__main__.A object at 0x01FA7A10>
self.a:  10
running __call__ of Singleton <class '__main__.A'>
args:  (20,)
kwargs:  {} 
```

我无法理解`args`and`kwargs`是如何变得不同的`__init__`。`__call__`在使用元类时，这个链接（[What is a metaclass in Python?](https://stackoverflow.com/questions/100003/what-is-a-metaclass-in-python)）解释了如何使用`__new__`元类和函数。但是，我不明白`__call__`是如何使用的。

有人可以解释一下流程吗？我的意思是，调用 , 和谁调用它们的`__new__`优先`__call__`级`__init__`？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-19T10:09:14.990

您的代码不包含任何`__new__`，因此对此几乎无话可说。

但是您创建了一个在创建类时实例化的元类`A`。换句话说，类`A`是一个对象本身，也是它的元类的一个实例`Singleton`。

那么让我们看看会发生什么：

在`A`'s 环境完成后（它的方法存在，它的 dict 也存在，...），该类被创建为元类的实例。本质上，调用是

```
A = Singleton('A', (object,), <the dict>) 
```

`<the dict>`包含类名称空间的字典在哪里（这里`__module__`：`__metaclass__`和`__init__`）。

在对 的调用中`Singleton`，调用`super(Singleton, self).__call__(*args, **kwargs)`导致调用`__new__`返回一个新实例的方法，然后调用该实例`.__init__`。

这就是为什么会发生这种情况：

```
calling __init__ of Singleton class <class '__main__.A'>
args:  ('A', (<type 'object'>,), {'__module__': '__main__', '__metaclass__': <class '__main__.Singleton'>, '__init__': <function __init__ at 0x01F9F7B0>})
kwargs:  {} 
```

在`A`构造之后，您可以通过实例化它来使用它：

```
a = A(10) 
```

这调用`A`. `A`是 的一个实例`Singleton`，因此`Singleton.__call__`被调用——效果如下：

```
running __call__ of Singleton <class '__main__.A'>
args:  (10,)
kwargs:  {} 
```

`Singleton.__call__`调用`type.__call__`，这调用`A.__new__`和`A.__init__`：

```
in __init__ of A:   <__main__.A object at 0x01FA7A10>
self.a:  10 
```

然后你做

```
b = A(20) 
```

调用`Singleton.__call__`：

```
running __call__ of Singleton <class '__main__.A'>
args:  (20,)
kwargs:  {} 
```

这里`super`调用被抑制并返回旧对象。

# jquery - 想要使用 jqgrid 在窗口弹出的文本框中添加必填字段标记

> ID：12971642
> 
> 赞同：0
> 
> 时间：2012-10-19T09:49:44.237
> 
> 标签：jquery, jquery-plugins

我正在使用 jqGrid 3.5。我使用“navButtonAdd”而不是寻呼机段创建了添加和编辑按钮。我使用 json 和 AJAX。我还定义了 ColName 和 ColModel。

问题：我想通过添加或编辑模式上的必填字段标签显示一个星号 (*)。如果我将星号添加到 ColName 字段，它会显示在网格的标题中。我不希望它仅在有人单击添加或编辑时才显示在网格标题上，我想在各自的标签上显示星号。

```
$.subscribe('rowadd', function(event,data) {

            $("#gridtable").jqGrid('editGridRow',"new",{reloadAfterSubmit:true, closeAfterAdd:false,afterSubmit:function(response,postdata){
                return isError(response.responseText);
            }});
        });

<sjg:grid id="gridtable" caption="%{getText('menu.department')}" dataType="json" 
                href="%{listurl}"
                gridModel="listMS_Departments"
                width="200"
                autowidth="true"

                pager="true" 
                pagerInput="true"
                pagerPosition="center"  
                rowList="15,30,50"
                rowNum="15"
                rownumbers="true"
                viewrecords="true"

                navigatorDelete="true"
                navigatorRefresh="true"
                navigatorEditOptions="{closeAfterEdit:false}"
                navigatorAddOptions="{
                                          reloadAfterSubmit:true,
                                          afterSubmit:function(response,postdata){
                                          return isError(response.responseText);
                                          }
                                     }"
                editurl="%{editurl}"
                onSelectRowTopics="rowselect"
                >
                <sjg:gridColumn frozen="true" id="row" name="id" index="id" title="%{getText('department.code')}"
                    sortable="true" search="true" editable="true" editrules="{required:true,custom:true,custom_func:validateCapitalAlphanumeric}" key="true" editoptions="{maxlength :3}" />
                <sjg:gridColumn name="deptNm" index="deptNm" title="%{getText('department.name')}"
                    sortable="true" editable="true" edittype="text" editrules="{required:true}" formatter="String" editoptions="{maxlength :10}"/>   
            </sjg:grid> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-05T04:07:45.507

放入标签`formoptions="{ elmprefix:'(*)'}"`_`sjg:gridColumn`

# php - 用于从数据定义生成 mysql 表的 PHP 库

> ID：12971644
> 
> 赞同：1
> 
> 时间：2012-10-19T09:49:56.803
> 
> 标签：php, mysql

是否有任何现有的 PHP 库可以从数据定义中创建或更新 mysql 表？例如，Silverstripe 可以做到——每个模型都定义了它的数据：

```
$db = array(
    'FieldName' => 'Boolean',
    'FieldName2' => 'Text',
);

$has_one = array(
    'RelationName' => 'ObjectType'
); 
```

这会生成一个表格

```
CREATE TABLE classname (Id INT, FieldName BOOLEAN, FieldName2 TEXT, RelationNameId INT) 
```

或者其他的东西。当您将列添加到 db 数组时，它们会添加到数据库中；如果新表与旧表不兼容，则创建一个新表并将旧数据导入新表。很确定它也可以处理各种索引和事物。

是否有任何独立的 PHP 库可以做到这一点？我不想在这个项目中使用 Silverstripe。

我的最终目标是能够在 HTML 中创建一个表单，其中包含一个表标识符和几个输入字段，并将其提交给一个控制器，该控制器将为每个提交的数据创建一个包含数据类型的表。如果我在表单中添加一个字段，我希望控制器更新相应的表。

请不要建议一种从数据类型数组编写 CREATE TABLE 语句的方法——这只是我需要的开始。我还需要能够通过更改 PHP 中的数据类型数组来更新现有表——这比简单地创建一个 CREATE TABLE 要困难得多。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T10:24:31.880

好的，这只是我将如何做的一个非常简单的示例（当然这是非常基本的），但是您可以让函数将其保存到 .sql 文件或其他文件中。正如我所说，我现在不会使用它 - 所以我没有认识到性能等。

```
<?php

define ('INTEGER', 'INT'); // may use constants etc.

function createTable($name, $fields)
{
    $format = 'CREATE TABLE %s (%s)';

    foreach ($fields as $field)
    {
        $buffer[] = $field[0] . ' ' . $field[1];
    }

    $buffer = implode('; ', $buffer); // need to seperate list with a char different to comma
    $result = sprintf($format, $name, $buffer); // else it would be another argument for sprintf
    $result = str_replace(';', ',', $result); // replace the char with a comma

    print_r($result);
    return $result;
}

$name = 'mytable';
$data = array(
    array ('field 1', 'INT'),
    array ('field 2', 'VARCHAR (30)'),
    array ('foo', 'BAR'),
    array ('foo', INTEGER)
);

createTable($name, $data);

?> 
```

输出：`CREATE TABLE mytable (field 1 INT, field 2 VARCHAR (30), foo BAR, foo INT)`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T10:07:23.897

Doctrine2 看起来像要走的路……

[http://docs.doctrine-project.org/en/latest/reference/tools.html](http://docs.doctrine-project.org/en/latest/reference/tools.html)描述了如何在 PHP 中使用 SchemaTool，[http: //docs.doctrine-project.org/en/2.1/reference/php -mapping.html](http://docs.doctrine-project.org/en/2.1/reference/php-mapping.html)列出了如何创建 ClassMetadata 对象以供 SchemaTool 使用。

我很想知道如何通过动态创建实体、将它们添加到 EntityManager 并创建表来做到这一点，但我认为这不是 Doctrine 团队的想法，所以我想我会有自己做很多。因此，作为一种妥协，我采用了这种方法：[https ://groups.google.com/forum/#!msg/doctrine-user/FRnvpHN7nFg/_JVDv61esfYJ](https://groups.google.com/forum/#!msg/doctrine-user/FRnvpHN7nFg/_JVDv61esfYJ)

听起来要走的路是动态创建 YML 文件（我的数据类型都很简单，所以这并不难），从 YML 创建实体，然后运行模式工具。但是，我将不得不回到这一点——为了项目的利益，暂时以手动方式创建数据库。

# android - 如何以编程方式打开蓝牙

> ID：12971651
> 
> 赞同：-1
> 
> 时间：2012-10-19T09:50:13.260
> 
> 标签：android, bluetooth

> **可能重复：**
> [如何在android中以编程方式启用/禁用蓝牙](https://stackoverflow.com/questions/3806536/how-to-enable-disable-bluetooth-programmatically-in-android)

嗨，我正在开发一个必须以编程方式打开蓝牙的应用程序，你能告诉我如何一步一步地做到这一点，谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-19T09:52:18.313

这段代码对我有用。你可以试试这个

```
 BluetoothAdapter mBluetoothAdapter = BluetoothAdapter.getDefaultAdapter();    
        if (!mBluetoothAdapter.isEnabled()) {
           //Play with bluetooth
        }else{ 
            mBluetoothAdapter.disable(); 
        } 
```

# java - Java XMPP 服务器

> ID：12971654
> 
> 赞同：-1
> 
> 时间：2012-10-19T09:50:24.360
> 
> 标签：java, android, client, xmpp

我想编写一个 Android 应用程序，用户可以在其中通过本地 WiFi 网络通过 xmpp 与他们的手机通话。我选择 XMPP 的原因是他们可以使用任何客户端软件，例如 Pidgin、Miranda 等。

通信将仅在应用程序和客户端之间进行，因此理想情况下，我希望 Pidgin 等客户端程序能够连接到我的应用程序并发送和接收消息。为此，我认为我需要在我的应用程序中用 Java 编写一个非常轻量级的 XMPP 服务器，以供客户端连接。我在 SO 上找到了很多关于各种 XMPP 服务器（OpenFire 等）的信息，但是它们适用于更多的商业实施，而在服务器上我不能在这种情况下使用这些功能，我根本没有空间。此外，我似乎找不到 XMPP 服务器的任何库，有很多客户端库，如 SMACK，但我看不到服务器端的任何库。

有人对我如何解决这个问题有任何建议吗？有没有办法使用 Java 模拟 XMPP 服务器？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T13:02:37.837

听起来您正在寻找[Serverless XMPP](http://xmpp.org/extensions/xep-0174.html)。我不确定哪些库可能对此提供支持。

至于在 Android 中使用嵌入式服务器，有几个可用的 Java 服务器（如 Openfire 和 Tigasse），但我认为尝试在 Android 上安装它们不会有太多运气。寻找或实现上述无服务器 XMPP 扩展很可能会好得多。

我相信使用实际的中央服务器进行更典型的设置会简单得多。您可能想添加为什么这是不可取的。

# html - 将侧边栏移到页面右侧？这是浮子吗？我需要清楚吗？

> ID：12971661
> 
> 赞同：0
> 
> 时间：2012-10-19T09:50:52.427
> 
> 标签：html, css

这是我正在使用的代码：

```
http://jsfiddle.net/4XBtQ/1/ 
```

您可以看到右侧边栏位于左侧栏的底部。右侧侧边栏的定位似乎有很多不同的方法，但正确的方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T09:56:59.927

没有“正确的方法”，这完全取决于您希望它的行为方式。

如果您将 main 和 right 都向左浮动（float:left），结果将与您描述的一样。

如果内容变得太大，您也可以在右列上使用绝对定位，如果您希望它避免“在 main 下方浮动”。

# c# - MVC4 的样式捆绑不使用最小文件

> ID：12971663
> 
> 赞同：13
> 
> 时间：2012-10-19T09:50:52.693
> 
> 标签：c#, asp.net-mvc

我有 4 个文件：

*   a.css
*   a.min.css
*   b.css
*   b.min.css

它们以下列方式添加到捆绑包中：

```
bundles.Add(new StyleBundle("~/Content/acss").Include("~/Content/a.css", "~/Content/b.css")); 
```

在调试中运行应用程序时，所有内容都正确呈现：

```
 <link href="/Content/a.css" rel="stylesheet"/>
 <link href="/Content/b.css" rel="stylesheet"/> 
```

但是，当在发行版中运行时，我以以下方式呈现它：

```
 <link href="/Content/acss?v=mUdXE7_fXKjICzE_XteIB1Igy6TekX1QFh-BtY6fFUw1" rel="stylesheet"/> 
```

我在里面创立：

> /* 缩小失败。返回未缩小的内容。(24,708)：运行时错误 CSS1030：预期标识符，找到“。”

所以我有两个问题：

1.  为什么它不能根据在线文档工作？所有信息都说如果可用于发布版本，它会选择最小文件？
2.  如何使其根据文档工作？

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2013-02-13T16:31:28.083

我遇到了与您完全相同的问题，我的解决方案包含 css/js 文件以及我使用 Web Essentials 最小化的 .min 文件。

如果我在调试模式下使用捆绑包，一切都会正常工作，并且所有单独的非最小化文件都将加载到我的应用程序中。但是，如果我设置`BundleTable.EnableOptimizations = true;`然后我会得到错误，因为它无法最小化我的文件。

基于[http://www.asp.net/mvc/tutorials/mvc-4/bundling-and-minification](http://www.asp.net/mvc/tutorials/mvc-4/bundling-and-minification)其中指出：

> 对于 ASP.NET MVC 4，这意味着使用调试配置，文件 jquery-1.7.1.js 将被添加到包中。在发布配置中，将添加 jquery-1.7.1.min.js。捆绑框架遵循几个常见的约定，例如：
> 
> 当“FileX.min.js”和“FileX.js”存在时选择“.min”文件发布。选择非“.min”版本进行调试。

我希望它可以简单地加载我已经最小化的文件并将它们捆绑在一起。我认为隐含但在文档中缺少的是，它还将再次最小化我已经最小化的文件，这些文件不起作用并导致输出错误。

我发现[http://aspnetoptimization.codeplex.com/workitem/56](http://aspnetoptimization.codeplex.com/workitem/56)提到：

> 您可以简单地通过创建不带转换的捆绑包来跳过缩小，即不创建 ScriptBundles，只创建普通捆绑包。

这原来是我的问题的答案。通过将 my`ScriptBundle`和都设置`StyleBundle`为 type `Bundle`，我现在可以在没有最小化的情况下获得正确的捆绑。

在调试中，我所有的常规 css/jss 文件都是单独加载的。当我将其设置为非调试时，所有内容都被捆绑并自动选择所有 .min 文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-19T13:35:14.870

您的实际问题无法回答，因为它已经充当文档状态（这就是为什么我问您正在查看什么文档，但您选择忽略我的评论）。

如果您想在发布模式下保持相同的行为，`BundleTable.EnableOptimizations = false;`请在您的`Global.asax`. 这将关闭**仅在调试模式下活动**的捆绑和缩小。然后使用您自己的缩小 css / js 文件，只需将您的捆绑路径指向缩小版本。

根据文档，您还可以使用`"~/Content/a{version}.css"`which 在调试模式下使用非缩小版本，在发布时使用缩小版本。但是，我没有尝试过。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-19T10:22:24.437

你看过[Bundle Transformer](http://nuget.org/packages/BundleTransformer.Core)吗，它的[1.6.5 版本](http://nuget.org/packages/BundleTransformer.Core/1.6.5)引入了一个名为**usePreMinifiedFiles**的属性，它启用/禁用预压缩文件的使用。

你设置了吗`BundleTable.EnableOptimizations = true;`

从[文档](http://www.asp.net/mvc/tutorials/mvc-4/bundling-and-minification)

> 注意：除非 EnableOptimizations 为 true 或 Web.config 文件中的编译元素中的 debug 属性设置为 false，否则不会捆绑或缩小文件。此外，不会使用 .min 版本的文件，将选择完整的调试版本。EnableOptimizations 覆盖 Web.config 文件中编译元素中的调试属性

# css - IE7 将@font-face 字符“连字符”显示为正方形

> ID：12971664
> 
> 赞同：2
> 
> 时间：2012-10-19T09:50:54.050
> 
> 标签：css, font-face

我的IE7有`@font-face`问题。它将字符显示`-`为正方形，[请参见此屏幕截图](http://pfjz.com/misc/font-face-ie7.png)。正常文本和其他特殊字符如`&`,`/`等`+`可以正常显示。

它在我测试过的所有浏览器中都能正常工作，甚至是 IE8。

有没有人遇到过这种情况，并且可能知道解决方案？

我用来加载字体的 CSS 如下，我尝试使用两者`text-transform:uppercase/lowercase`来查看是否是问题所在。

```
@font-face {
font-family: 'rex-bold';
src: url('fonts/rex_bold-webfont.eot');
src: url('fonts/rex_bold-webfont.eot?#iefix') format('embedded-opentype'),
    url('fonts/rex_bold-webfont.woff') format('woff'),
    url('fonts/rex_bold-webfont.ttf') format('truetype'),
    url('fonts/rex_bold-webfont.svg#rex_bold_bold') format('svg');
font-weight: normal;
font-style: normal;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T10:27:57.073

这似乎是[Rex 字体](http://fontfabric.com/rex-free-font/)的问题。它们不包含“-”连字符-减号 U+002D（即常见的 Ascii 连字符）。这意味着浏览器将不得不从另一种字体中获取该字符。您可以从屏幕截图中看到，连字符的设计不同——笔划与字母一样细。结果可能因浏览器及其设置而异，而旧版本的 IE 在这里出了名的糟糕——它们甚至可能根本无法渲染字符，而是显示一个小矩形，即使系统中有字体覆盖它。

要解决此问题，请设置一些备用字体，例如

```
font-family: rex-bold, Tahoma, Verdana, sans-serif; 
```

您将选择字体，使其连字符与 Rex Bold 的设计相匹配。这不可能是完美的，但只要小心一点，您就能在大多数浏览器上获得更好的渲染效果。

由于 Rex Bold 将所有字母设计为大写，因此连字符也应该是大写样式。Tahoma 和 Verdana 可能会。对于某些现代字体，您可以使用（以浏览器前缀的形式）在可用时使用该属性[`font-feature-settings`](https://developer.mozilla.org/en-US/docs/CSS/font-feature-settings)来选择此类变体字形。`case`我编写了一个简单的[测试页面](http://www.cs.tut.fi/~jkorpela/font-features.html8)来测试这些设置的效果。但是大多数字体都缺乏这样好的特性，所以你可能应该只选择连字符字形“足够高”（并且足够粗体）的字体。

# android - 重命名android内部存储器中目录中的文件？

> ID：12971668
> 
> 赞同：0
> 
> 时间：2012-10-19T09:51:09.463
> 
> 标签：android, android-dialog, android-file

我有一些特定于应用程序的文件存储在内部存储器的目录中。我希望用户能够通过对话框重命名这些文件。我正在使用以下代码来重命名用户选择的文件：

```
final File dir = context.getDir(UtilityFuctions.USER_LISTS,
                Context.MODE_PRIVATE);
        final File myFile = new File(dir, filename);

        AlertDialog.Builder fileDialog = new AlertDialog.Builder(context);
        fileDialog.setTitle("Rename file");

        // Set an EditText view to get user input
        final EditText input = new EditText(context);
        input.setText(filename);
        fileDialog.setView(input);
        fileDialog.setPositiveButton("Ok",
                new DialogInterface.OnClickListener() {
                    public void onClick(DialogInterface dialog, int whichButton) {
                        String fileName = input.getText().toString();

                            myFile.renameTo(new File(dir,filename));
                            UtilityFuctions.createToast(context, "file rename successfully", 0);
                        }
                    }
                });
        fileDialog.setNegativeButton("Cancel",
                new DialogInterface.OnClickListener() {
                    public void onClick(DialogInterface dialog, int whichButton) {
                        // Canceled.
                        dialog.dismiss();
                    }
                });
        fileDialog.create();
        fileDialog.show(); 
```

但是上面的代码不起作用并且文件没有获得新名称。我猜**renameTo**对此不起作用，它只适用于外部存储器。我有一个解决方案，我可以用新名称复制现有文件并删除旧文件，但这会消耗资源，我不想这样做。如果我做错了什么，请帮助我..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T10:07:19.283

这应该有效 - 您创建的问题是您有两个变量，称为文件名和文件名。

我很确定基本问题是你想要这条线：

```
myFile.renameTo(new File(dir,filename)); 
```

实际阅读

```
myFile.renameTo(new File(dir,fileName)); 
```

具体来说，您想使用新返回的文件名（在本地文件名中）进行重命名，而不是存储在文件名中的原始（未更改）文件名。

# jquery - jQuery 内容滑块 - 无按钮/淡入淡出过渡

> ID：12971669
> 
> 赞同：0
> 
> 时间：2012-10-19T09:51:11.447
> 
> 标签：jquery, slider

相当基本的问题，但我正在寻找一个 jQuery 内容滑块，没有按钮，只是通过 4 个不同的内容段落进行连续淡入/淡出幻灯片。

我已经在 Google 上进行了搜索，但似乎找不到可以满足我需求的滑块——我希望这里有人可以推荐一个。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T09:55:29.370

你试过这个吗？[http://manos.malihu.gr/jquery-custom-content-scroller](http://manos.malihu.gr/jquery-custom-content-scroller)

这可能就是你要找的东西。您可以自定义自己的滚动条或使用他们给您的多个选项之一。

我已经尝试过了，它真的很完美

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T10:00:25.610

当您只想使用图像/视频时，我认为 NivoSlider 就是您要搜索的内容。

它可以在这里找到：http: [//nivo.dev7studios.com/support/jquery-plugin-usage/](http://nivo.dev7studios.com/support/jquery-plugin-usage/) 当你向下滚动页面时，你会看到显示控件的真/假选项。

如果您想使用 html 内容，我听说的最后一件事是 nivoslider 无法做到这一点。

因此，如果您想在幻灯片中使用 html 内容，请尝试此处提供的 rhinoslider： [http](http://rhinoslider.com/how-to-use/) ://rhinoslider.com/how-to-use/ 在链接页面上，您可以使用演示来满足您的需求。

不过，多一点信息会很好。它应该是响应式的吗？你想展示什么内容？

希望这篇文章有所帮助。

问候，多米尼克

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-19T10:08:00.670

你可以试试这些——

[http://delicious.com/anupdg/Content+slideshow](http://delicious.com/anupdg/Content+slideshow)

问候

阿努普达斯古普塔

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-19T10:08:12.760

您可以从我附加的链接中看到选项以选择不同的过渡效果............

```
<html xmlns="http://www.w3.org/1999/xhtml" lang="pt-br">
<head>
    <title>Skitter - Slideshow for anytime!</title>
    <link href="css/skitter.styles.css" type="text/css" media="all" rel="stylesheet" />
    <script src="js/jquery-1.6.3.min.js"></script>
    <script src="js/jquery.easing.1.3.js"></script>
    <script src="js/jquery.skitter.min.js"></script>
    <script>
    $(document).ready(function() {
        var options = {
            numbers: false,// the thing required no anchoring or navigation
            navigation:false,
            animation: "random",
            velocity:0.2, //velocity of animation
            interval:4000// time gap between the transitions
        };
        $('.box_skitter_large').skitter(options);
    });
    </script>
</head>
<body>
<div id="page">
    <div id="content">
        <div class="border_box" style="width:200px" >
            <div class="box_skitter box_skitter_large" style="margin-left:152px;margin-top:34px">
                <ul>
                    <li><a href="#cube"><img src="images/1.jpg" class="cube" /></a><div class="label_text"><p>cube</p></div></li>
                    <li><a href="#cubeRandom"><img src="images/2.jpg" class="cubeRandom" /></a><div class="label_text"><p>cubeRandom</p></div></li>
                    <li><a href="#block"><img src="images/3.jpg" class="block" /></a><div class="label_text"><p>block</p></div></li>
                    <li><a href="#cubeStop"><img src="images/4.jpg" class="cubeStop" /></a><div class="label_text"><p>cubeStop</p></div></li>
                    <li><a href="#cubeHide"><img src="images/5.jpg" class="cubeHide" /></a><div class="label_text"><p>cubeHide</p></div></li>
                </ul>
            </div>
        </div>
    </div>
</div>
</body>
</html> 
```

要下载 js 和 css 文件并查看不同的过渡效果，请访问： [http ://thiagosf.net/projects/jquery/skitter/](http://thiagosf.net/projects/jquery/skitter/)

# asp.net - 将 DateTime 参数传递给 ASP.NET Web 服务

> ID：12971672
> 
> 赞同：2
> 
> 时间：2012-10-19T09:51:17.297
> 
> 标签：asp.net, asmx, momentjs

是否可以将 DateTime 参数发布到 ASMX Web 服务内的 Web 方法（使用 JSON 序列化 RPC 样式调用）？

我正在向浏览器发送一个 DateTime，它以 /Date(1350639464100+0100)/ 的形式序列化。然后我可以使用出色的[moment.js](http://momentjs.com/)库来解析日期，将其显示在页面上等。

我的问题是使用 AJAX 发布到我的 Web 服务将此日期返回到服务器。我的网络方法看起来像这样：

```
[WebMethod(EnableSession = true)]
[ScriptMethod(ResponseFormat = ResponseFormat.Json)]
public void Save(DateTime date)
{
    // Do stuff
} 
```

如果我尝试以与它下来时相同的格式发送日期 (/Date(1350639464100+0100)/)，则会收到错误消息：

**/Date(1350639464100+0100)/ 不是 DateTime 的有效值。**

有没有更好的替代方法可以将其作为字符串发送，然后在服务器上解析值？理想情况下，我希望能够在往返服务器的往返行程中发送对象，而不必更改它们可能包含的任何日期属性。

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-19T11:20:40.720

我现在的工作如下。

使用 DateTime 参数的 Web 方法：

```
[WebMethod(EnableSession = true)]
[ScriptMethod(ResponseFormat = ResponseFormat.Json)]
public void Save(DateTime date)
{
    // Do stuff
} 
```

AJAX 发布到以字符串形式发送日期的 Web 方法（采用国际格式以避免本地化问题）：

```
{"date": "2012-10-19"} 
```

或者，使用[moment.js](http://momentjs.com/)：

```
{"date": moment().format("YYYY-MM-DD HH:mm:ss")} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T09:55:03.987

您可以将参数类型更改为字符串，然后您可以将该字符串转换为您想要的任何类型

```
 public void Save(String date){
     *Code*
    } 
```

# spring - Spring bean id冲突

> ID：12971673
> 
> 赞同：0
> 
> 时间：2012-10-19T09:51:24.570
> 
> 标签：spring, javabeans, autowired

我是一个新的 Spring 用户，可能做错了什么（由于对 Spring IOC 的概念/内部的误解），所以希望这个问题能得到一个简单的答案。

这就是我想要做的事情：我正在尝试使用来自两个不同的 3rd 方库的两个 bean：

```
<bean id="validator" class="org.owasp.esapi.ESAPI" factory-method="validator"/>
<bean id="validator" class="org.springframework.validation.beanvalidation.LocalValidatorFactoryBean"/> 
```

问题是它们都有相同的 ID，这是不允许的。我正在尝试自动连接 ESAPI 验证器，如果我遵循正确，Spring 会使用 LocalValidatorFactoryBean 。

所以我使用 ESAPI 验证器的简化类是：

```
public class ValidatedString {
    @Autowired(required=true)
    Validator stringValidator; 

    public void doSomethingWithTheValidator() {
        // do something
    }
} 
```

但我无法理解的是如何更改 ID。两者都从不同的包返回一个 Validator 类，我的印象是 id 字段需要与类名相同。

帮助？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T09:56:26.033

你试过改变`id`'s吗？`id`和属性都`name`取决于您自己，不需要它们与类名相同，这样更容易弄清楚bean“是”什么。

当 bean 为 时`@Autowired`，Spring 将使用基于名称、类型（我记得的默认值）或构造函数的最佳匹配，因此如果您`Validator`在`ValidatedString`类中是 an`org.owasp.esapi.ESAPI`那么这就是将被注入的内容。

干杯，

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T09:57:58.250

```
<bean id="esapiValidator" class="org.owasp.esapi.ESAPI" factory-method="validator"/>
<bean id="localValidator" class="org.springframework.validation.beanvalidation.LocalValidatorFactoryBean"/> 
```

问题解决了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-19T09:58:33.247

```
<bean id="validator" class="org.owasp.esapi.ESAPI" factory-method="validatorFactory"/>
<bean id="validatorFactory" class="org.springframework.validation.beanvalidation.LocalValidatorFactoryBean"/> 
```

id 和引用等`factory-method`通常由您决定。

# javascript - 如何解析来自推特的 json 响应

> ID：12971678
> 
> 赞同：1
> 
> 时间：2012-10-19T09:51:32.150
> 
> 标签：javascript, jquery, json, twitter

所以我正在做这样的请求：[https ://api.twitter.com/1/statuses/user_timeline.json?include_entities=true&include_rts=true&screen_name=twitterapi&count=3](https://api.twitter.com/1/statuses/user_timeline.json?include_entities=true&include_rts=true&screen_name=twitterapi&count=3)

现在，我正在使用 jQuery，并尝试像这样显示数据：

```
 success: function(data, textStatus, xhr) {

    if(data)
    {
    for (var i = 0; i < data.length; i++) {
      $("#at .tweet-message").html(data.text);
    }; 
```

我想显示 3 条推文，我做错了什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-19T09:53:17.627

引用数据数组元素时缺少索引（除了一些大括号）：

```
success: function(data, textStatus, xhr) {

    if(data) {
        for (var i = 0; i < data.length; i++) {
           $("#at .tweet-message").html(data[i].text); //here
        }
    }
} 
```

**编辑**

它只显示一条推文，因为您正在使用`html()`而不是，例如，`append()`。您在每次迭代中替换元素内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-19T09:57:27.170

另一种方式是chaching `data.length`。只是扩展[了灵魂检查的答案](https://stackoverflow.com/a/12971708/887539)

```
success: function(data, textStatus, xhr) {
    var i = 0,
        len = data ? data.length : 0;

    for ( ; i < len; i++ ) {
        $("#at .tweet-message").html(data[i].text);
    }
} 
```

* * *

`len = data ? data.length : 0`方法：

```
if ( data ) {
    len = data.length;
}
else {
    len = 0;
} 
```

# ruby-on-rails-3 - 骨干.js 新手 - 在应用程序命名空间初始化方法中创建集合时出错

> ID：12971679
> 
> 赞同：0
> 
> 时间：2012-10-19T09:51:35.657
> 
> 标签：ruby-on-rails-3, backbone.js

我正在关注这本书，Backbone.js on Rails，并在阅读它的同时创建了基本的 todo 应用程序，但我在尝试初始化应用程序命名空间内的集合时遇到以下 javascript 错误：

错误：TodoApp.Collections.Notes 不是构造函数源文件：localhost:3000/assets/todo_app.js?body=1 行：13

todo_app.js

```
var TodoApp = {
  Models: {},
  Collections: {},
  Views: {},
  Routers: {},
  initialize: function(data) {
    console.log("INITIALIZE");
    var notes = new TodoApp.Collections.Notes(data.notes); 
    new TodoApp.Routers.Notes({ notes: notes }); 
    Backbone.history.start();    
  }
}; 
```

到目前为止，我已经按照说明创建了一个 Note 模型、Notes 集合和路由器，这就是在 index.html.erb 上调用 initialize 方法的方式：

```
<%= javascript_tag do %>
  TodoApp.initialize({ notes: <%== @notes.to_json %> });
<% end %> 
```

这是我包含所有文件的顺序：

```
//= require jquery
//= require jquery_ujs
//= require underscore
//= require json2
//= require backbone
//= require backbone-support
//
//= require todo_app
//
//= require_tree ./models 
//= require_tree ./collections 
//= require_tree ./views 
//= require_tree ./routers 
//= require_tree ../templates
//= require_tree . 
```

有人能帮忙吗？我在这里错过了什么？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T02:07:01.490

您可以尝试实例化新集合，然后使用该`reset`方法填充它。

在您的示例中，它应该是这样的：

```
initialize: function(data){
  var notes = new TodoApp.Collections.Notes()
  notes.reset(data.notes) 
```

}

“reset”方法接受模型列表或哈希。有关更多信息，请参阅[主干文档](http://backbonejs.org/#Collection-reset)。

使用此方法的另一个好方法是在网页上预加载信息，然后让我们的集合填充存储的数据。您可以使用这样的数据标签在 div 上插入：

```
<%= content_tag "div", "Can be blank", id: "container-id", data: { notes: Notes.all } %> 
```

然后调用：

```
notes.reset($('#container-id').data 'notes') 
```

如果您想获得更多信息，可以查看[Backbone 上的 Ryan Bates Screencasts 。](http://railscasts.com/episodes/325-backbone-on-rails-part-2?view=asciicast)请注意，要观看这些视频，您必须订阅他的网站。

PS：如果你的 todo_app.js 的位置在你的 javascript 资产文件夹中，你不必使用资产管道添加它，因为它会被 rails 自动拾取`//= require_tree .`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T09:56:25.377

Javascript 按加载顺序进行评估，因此我猜您的应用程序正在尝试在加载包含集合的文件之前进行初始化（您在其他文件之前包含 todo_app）。

最后包含 todo_app 或监听文档 onload 事件并在页面完全加载后初始化应用程序。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-19T09:55:21.603

`TodoApp.initialize({ notes: <%== @notes.to_json %> });`似乎是一个错字。应该是`TodoApp.initialize({ notes: <%= @notes.to_json %> });`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-25T21:26:49.267

尝试使用：

```
TodoApp.initialize({ notes: <%= @notes.to_json.html_safe -%> }); 
```

# netbeans - 在 Netbeans 7.2 中有效处理许多打开的项目文件

> ID：12971681
> 
> 赞同：2
> 
> 时间：2012-10-19T09:51:44.753
> 
> 标签：netbeans, netbeans-7

我在 Kubuntu 12.04 上使用 Netbeans。我经常需要同时打开 30 多个文档进行编辑。在 Netbeans 7.2 中查找和切换它们并不容易，所以我决定花时间在这里正式询问一下。

1.  选项卡式界面不换行，因此只有一行选项卡需要点击选项卡滚动按钮才能找到该视图之外的选项卡。因此从选项卡式界面中找到要单击的文件（选项卡）有点繁琐。项目之间没有保留标签顺序的事实（当它们重新打开时）也没有多大帮助。
2.  文档列表弹出菜单（可通过选项卡控件旁边的带有箭头的按钮访问）是可以的，但在处理大型列表时不可滚动。无法更改文档排序顺序（仅按字母顺序）。因此不可能总是从该弹出窗口中找到要单击的文件。
3.  另一个选项是文件树或项目文件列表。由于文件分布在许多目录中，这当然是可能的，但很耗时。

当多个目录中的多个同名文件构成同一个项目的一部分时，上述所有内容变得更加困难。（总而言之，Netbeans 的方法在您仅打开 5 个文件且在同一目录中具有不同文件名的情况下非常有效。不幸的是，我没那么幸运。）

这与 Kate（Kubuntu 出色的高级文本编辑器）形成鲜明对比。*Kate 在左侧列出了一个项目中所有打开*文档的简单列表（默认情况下），您可以根据文档名称、文档路径或文档打开顺序对其进行排序。漂亮！如此简单有效，我总能在一秒钟内找到该文件。

只需单击一下，您就完成了。在这里，看看：![凯特的用户界面如何闪耀](../Images/57b174e85fede07d52a7fcaa91684b22.png)

因此我有两个问题：

1.  在 Netbeans 中的大量打开文件之间切换的最有效方法是什么？
2.  理想情况下，有没有办法在 Netbeans 7.2 中模拟 Kate 的打开文件列表功能？

**更新：**

我现在终于找到了一个出色的 nbExpose 插件（自 2008 年以来一直存在），它做得不错：http: [//plugins.netbeans.org/plugin/11826/nbexpose](http://plugins.netbeans.org/plugin/11826/nbexpose)

我接受@joachim-rohde 的回答，因为他指出了有用的方法并建议人们可以简单地求助于插件。

当然，我仍然相信这个功能在 IDE 中占有一席之地。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-19T10:42:55.277

我不知道 Netbeans 能够模仿 Kates 的行为。您没有提到的其他一些可能性：

*   CTRL + Tab - 按上次访问的顺序显示打开的文件列表（CTRL + Shift + Tab 选择上一个文件）
*   Shift + F4 显示打开的文档，但仅按字母顺序
*   有一个[Open File Fast](http://plugins.netbeans.org/plugin/16495/open-file-fast)插件可能值得一看（我自己没用过）

第一种方法我个人相处得很好。

# http - 谷歌说：URL中的排序参数有问题

> ID：12971683
> 
> 赞同：0
> 
> 时间：2012-10-19T09:51:52.767
> 
> 标签：http, url, seo, google-search-console

来自 Google[对 URL 结构的建议](http://support.google.com/webmasters/bin/answer.py?hl=en&answer=76329)：

> **排序参数。**一些大型购物网站提供多种方式对相同商品进行排序，从而导致 URL 数量更多。例如：
> 
> `http://www.example.com/results?search_type=search_videos&search_query=tpb&search_sort=relevance&search_category=25`"

当从外部链接时，只有排序参数不同的 URL 显然是个坏主意：Google 不会理解这些链接指向同一个项目，即该项目很受欢迎。因此排名会低于应有的排名。

但是有什么选择呢？使用片段标识符 (#)，然后在 JavaScript 中进行排序？还有什么？网站管理员工具中的一些设置？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-20T10:52:52.663

您可以在此处使用该`link`元素[`rel="canonical"`](http://support.google.com/webmasters/bin/answer.py?hl=en&answer=139394)。

> 一个网站通常有多个页面列出同一组产品。例如，一个页面可能显示按字母顺序排序的产品，而其他页面显示按价格或评级列出的相同产品。例如：
> 
> *   `http://www.example.com/product.php?item=swedish-fish&trackingid=1234567&sort=alpha&sessionid=5678asfasdfasfd`
> *   `http://www.example.com/product.php?item=swedish-fish&trackingid=1234567&sort=price&sessionid=5678asfasdfasfd`
> 
> 如果 Google 知道这些页面具有相同的内容，我们可能只会为我们的搜索结果索引一个版本。我们的算法会选择我们认为最能回答用户查询的页面。但是，现在，用户可以通过将`<link>`具有该属性的元素添加`rel="canonical"`到`<head>`页面的非规范版本部分来为搜索引擎指定规范页面。添加此链接和属性可让网站所有者识别相同内容的集合并向 Google 建议：“在所有具有相同内容的页面中，此页面是最有用的。请在搜索结果中优先考虑它。”

好处：

*   您不需要 Google 网站管理员工具的帐户
*   GWT 的设置可能会在未来消失（你永远不会知道）
*   它也适用于其他搜索引擎（[Yahoo](http://www.ysearchblog.com/2009/02/12/fighting-duplication-adding-more-arrows-to-your-quiver/)、[Bing](http://www.bing.com/community/site_blogs/b/webmaster/archive/2011/10/06/managing-redirects-301s-302s-and-canonicals.aspx)、Ask 等）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T13:03:12.543

刚刚发现确实使用[网站管理员工具](https://www.google.com/webmasters/tools/home)，可以配置应如何处理参数，特别是它们是否更改页面内容。更多信息，谷歌有一篇文章：

[网址参数](https://support.google.com/webmasters/bin/answer.py?hl=en&answer=1235687)

最后，我认为，简单地将排序参数放在片段标识符 (#) 中是语义上告诉 Google 和用户这些参数只会改变表示的最佳方式。

# android - 下载文件到自定义目录

> ID：12971684
> 
> 赞同：11
> 
> 时间：2012-10-19T09:51:56.553
> 
> 标签：android, download-manager

我正在使用 DownloadManager 将文件下载到我的 Android 设备。我可以选择使用以下方式下载到 DCIM、Downloads、Pictures 文件夹等：

```
downloadRequest.setDestinationInExternalPublicDir(Environment.DIRECTORY_DOWNLOADS, "file.jpg"); 
```

这行得通。但我只能选择一组有限的文件夹来下载。我想使用 /sdcard/ 下载到我的 sdcard 的根目录

我试过了：

```
downloadRequest.setDestinationUri(Uri.fromFile(new File("/sdcard/file.jpg"))); 
```

但这会导致以下异常：

> IllegalStateException: android 无效的目的地组合：4，路径：/sdcard/file.jpg

我怎样才能做到这一点？我设置了所有必需的权限。

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-10-19T10:22:58.943

像这样试试。

```
downloadRequest.setDestinationInExternalPublicDir("/folderName",file.jpg); 
```

这将在您的外部存储根目录中创建一个文件夹并将 file.jpg 放入其中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-07-13T06:32:26.740

通过使用修复它

```
request.setDestinationInExternalPublicDir( "/APP_NAME/", FileNameGetter.getFileName(DATA..url) ); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-07-04T16:07:07.970

根据[官方文档](https://developer.android.com/reference/android/app/DownloadManager.Request.html)，您应该只使用以下任一变体，使用可用[`Environment.DIRECTORY_*`](https://developer.android.com/reference/android/os/Environment.html)常量之一：

```
myRequest.setDestinationInExternalPublicDir(Environment.DIRECTORY_DOWNLOADS, "my_sub_folder/my_file.txt"); 
```

目录类型（即第一个参数）可能不是*，*`null`或者

```
myRequest.setDestinationInExternalFilesDir(myContext, null, "my_sub_folder/my_file.txt");
// or
// myRequest.setDestinationInExternalFilesDir(myContext, Environment.DIRECTORY_PICTURES, "my_sub_folder/my_picture.jpg"); 
```

其中目录类型（即第二个参数）*可能*是`null`.

*在任何情况下，在最后一个*参数中指定（子）文件夹是可选的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2022-02-03T14:18:12.237

`Not one of standard directories: /folderName`. 为了`setDestinationInExtrnalPublicDir()`工作，给定的路径必须是标准目录之一，如音乐、下载等......

# jquery - 执行函数数组

> ID：12971696
> 
> 赞同：4
> 
> 时间：2012-10-19T09:52:39.010
> 
> 标签：jquery, arrays, function

我混合使用 d3.js 和 jQuery 来创建可视化。我有 3 个函数，我试图将它们放入一个数组中，然后一个接一个地执行，但我认为我做的不正确，因为当我单击“播放”时没有任何反应。这是我的代码：

```
var functionsArray = [oct12,oct13,oct14];

$('#play').click(function(){ 
for (var i = 0; i < functionsArray.length; i++){
    functionsArray[i];  
} 
```

我很快就会放一个jsfiddle......

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-19T09:55:11.913

您还需要调用该函数。

```
functionsArray[i](); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-19T09:58:45.903

采用`$.each`

**[演示](http://jsfiddle.net/pintu31/4D9vj/)**

```
var functionsArray = [oct12,oct13,oct14];

$(functionsArray).each(function(key, val){
 val();
});

function oct12(){
 alert('oct12');
}

function oct13(){
 alert('oct13');
}

function oct14(){
  alert('oct14');
} 
```

​</p>

# c# - 无法设置窗口位置

> ID：12971699
> 
> 赞同：1
> 
> 时间：2012-10-19T09:52:57.437
> 
> 标签：c#, .net, wpf, xaml, mdi

我正在使用[http://wpfmdi.codeplex.com/](http://wpfmdi.codeplex.com/)库来处理我的 WPF 应用程序中的 MDI。

我有一个包含子容器的 Canvas，其中包含许多小窗口。我希望在 x=500, y=500 的位置打开窗户。我已经设法用我当前的代码实现了这一点，但奇怪的是，当第一个窗口打开时，它没有显示 - 即画布保持空白。然后，一旦我添加另一个窗口，两个窗口都会出现在正确的位置。

下面我粘贴了我的 XAML 和在画布中打开一个新窗口的代码。

```
<Window x:Name="VisualQueryBuilderWindow" x:Class="QueryBuilder.VisualQueryBuilder"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:mdi="clr-namespace:WPF.MDI;assembly=WPF.MDI"
    Title="Visual Query Builder" WindowState="Maximized" Closing="VisualQueryBuilderWindow_Closing">
<Window.Resources>
    <Style TargetType="TreeView">
        <Setter Property="Padding" Value="0,0,20,0"/>
        <Setter Property="BorderBrush" Value="Gray"/>
        <Setter Property="BorderThickness" Value="0,0,5,0"/>
    </Style>
</Window.Resources>
<Grid>
    <DockPanel LastChildFill="True">
        <TreeView DockPanel.Dock="Left" 
                  Name="tvSchema" 
                  AllowDrop="True" 
                  TreeViewItem.PreviewMouseLeftButtonDown="TreeViewItem_PreviewMouseLeftButtonDown">
        </TreeView>
        <TabControl>
            <TabItem Name="tabQueryBuilder" Header="Query Builder">
                <Canvas Name="cnvsMain" Background="LightGray" AllowDrop="True" Drop="cnvsMain_Drop">
                    <mdi:MdiContainer Name="mainContainer" Background="LightGray">
                    </mdi:MdiContainer>
                </Canvas>
            </TabItem>
            <TabItem Name="tabResults" Header="Results"></TabItem>
        </TabControl>
    </DockPanel>
</Grid> 
```

```
 TableWindow tableWindow = new TableWindow(tableName);

        MdiChild child = new MdiChild()
        {
            MaximizeBox = false,
            MinimizeBox = false,
            Resizable = true,
            ShowIcon = false,
            Title = tableName,
            Content = tableWindow.Content as UIElement //Opens new instance of my window class
        };

        mainContainer.Children.Add(child);
        child.Position = new Point(500, 500); 
```

请注意，我也尝试在 MdiChild 实例化块内设置位置，但它在那里也不起作用。

**更新：**我认为值得一提的是，我的 MdiContainer 放置在一个选项卡中，我注意到如果我更改选项卡并切换回带有容器的选项卡，窗口就会显示。因此，这可能是某种令人耳目一新的问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T11:42:58.940

在实例化您的 TableWindow 之前尝试此代码

```
mainContainer.SetBinding(WidthProperty, new Binding("ActualWidth") { Source = cnvsMain });
mainContainer.SetBinding(HeightProperty, new Binding("ActualHeight") { Source = cnvsMain }); 
```

您也可以在 xaml 中执行此操作：

```
<mdi:MdiContainer Name="mainContainer" Background="LightGray" Width="{Binding ActualWidth, ElementName=cnvsMain}" Height="{Binding ActualHeight, ElementName=cnvsMain}">
                    </mdi:MdiContainer> 
```

实际上，这不是一个非常令人满意的解决方案。该库似乎存在问题，它应该在设置孩子的位置时更新容器大小。

# iphone - 如何在 mac 10.7.4 中安装 XCode 4.5.1

> ID：12971700
> 
> 赞同：-2
> 
> 时间：2012-10-19T09:53:00.937
> 
> 标签：iphone

刚刚我下载了 XCode 4.5.1。当我尝试安装时，我得到了像“error-4960”这样的错误。我的 mac 版本是 10.7.4。所以请告诉我如何安装 XCode 4.5.1。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T09:54:41.523

你是通过mac App Store下载的吗？这就是现在应该如何下载 Xcode

# java - 如何从 Facebook json 响应中获取单个值

> ID：12971702
> 
> 赞同：-1
> 
> 时间：2012-10-19T09:53:04.377
> 
> 标签：java, facebook, json, facebook-graph-api, struts2

**我的应用程序做什么：** 我已经为我的网站实现了 facebook 登录。我想从 facebook graph api 中保存一些用户信息，我正在通过 Json 获得响应。

**我的问题：** 我能够从 json 响应中打印一些单独的值，*但无法打印嵌套在数组中的值*。如何从 json 响应中打印子值？

```
 *Please see my code below. There i am able to print users info like name and id.
         But unable to get the location of  user from json response.* 
```

**json输出：**

```
 --responseBody---{"id":"100003645579131","name":"Ashutosh Singh","first_name":"Ashutosh","location":{"id":"106377336067638","name":"Bangalore, India"}}
        ---json---{"work":[{"position":{"id":"140001066034322","name":"Senior Inspector"},"location":{"id":"106377336067638","name":"Bangalore, India"},"name":"Ashutosh Singh","last_name":"Singh","gender":"male"} 
```

**我**打印上述值的代码：

```
String newUrl = "https://graph.facebook.com/me?access_token=" + accessToken;
            httpclient = new DefaultHttpClient();
            HttpGet httpget = new HttpGet(newUrl);
            System.out.println("Get info from facebook --> executing request: "+ httpget.getURI()); 
            ResponseHandler<String> responseHandler = new BasicResponseHandler();
            String responseBody = httpclient.execute(httpget, responseHandler);
               System.out.println("--responseBody---"+responseBody);
            json = (JSONObject) JSONSerializer.toJSON(responseBody);
            System.out.println("---json---"+json);
            facebookId = json.getString("id");//this values are printing fine
            String firstName = json.getString("first_name");//this values are printing fine
            String lastName = json.getString("last_name");//this values are printing fine

            String location=json.getJSONArray("location").toString(); //Unable to print information. Plz give help me. I want to print the location name from the json results.

            System.out.println("locale:"+location); //Unable to print 
```

**错误信息：**

```
javax.servlet.ServletException: net.sf.json.JSONException: JSONObject["location"] is not a JSONArray.
            org.apache.struts.action.RequestProcessor.processException(RequestProcessor.java:520)
            org.apache.struts.action.RequestProcessor.processActionPerform(RequestProcessor.java:427)
            org.apache.struts.action.RequestProcessor.process(RequestProcessor.java:228)
            org.apache.struts.action.ActionServlet.process(ActionServlet.java:1913)
            org.apache.struts.action.ActionServlet.doGet(ActionServlet.java:449)
            javax.servlet.http.HttpServlet.service(HttpServlet.java:617)
            javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
        root cause

        net.sf.json.JSONException: JSONObject["location"] is not a JSONArray.
            net.sf.json.JSONObject.getJSONArray(JSONObject.java:1793)
            com.ebhasin.bstalentscareers.action.SecurityServlet.getUserMailAddressFromJsonResponse(SecurityServlet.java:88)
            com.ebhasin.bstalentscareers.action.FacebookLoginAction.execute(FacebookLoginAction.java:45)
            org.apache.struts.action.RequestProcessor.processActionPerform(RequestProcessor.java:425)
            org.apache.struts.action.RequestProcessor.process(RequestProcessor.java:228)
            org.apache.struts.action.ActionServlet.process(ActionServlet.java:1913)
            org.apache.struts.action.ActionServlet.doGet(ActionServlet.java:449)
            javax.servlet.http.HttpServlet.service(HttpServlet.java:617)
            javax.servlet.http.HttpServlet.service(HttpServlet.java:717) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T09:55:02.090

从 JSON 中可以看出， location 不是 JSON Array ，而是 JSON Object。您正在使用 getJSONArray() 来检索它。请改用 getJSONObject()。

# jquery - jQuery 中的分页器不适用于我的自动完成功能

> ID：12971712
> 
> 赞同：0
> 
> 时间：2012-10-19T09:53:31.343
> 
> 标签：jquery, autocomplete

我使用分页和使用 jquery 进行排序。我也启用了自动完成功能。

下面是自动完成

```
<link rel="stylesheet" type="text/css" href="<%=resourcePath %>/css/autocomplete.css"/>
        <script type="text/javascript" src="<%=resourcePath %>/scripts/prototype/prototype.js"></script>
        <script type="text/javascript" src="<%=resourcePath %>/scripts/script.aculo.us/effects.js"></script>
        <script type="text/javascript" src="<%=resourcePath %>/scripts/script.aculo.us/controls.js"></script>
        <script type="text/javascript" src="<%=resourcePath %>/scripts/autocomplete.js"></script> 
```

这用于分页和排序

```
<script src="<%=resourcePath%>/data-page/jquery-latest.js" type="text/javascript"></script>
    <!-- Table Sorter -->
    <script type="text/javascript" src="<%=resourcePath%>/data-page/jquery.tablesorter.js"></script>
    <script type="text/javascript">
                $.noConflict(true);
                $(function() {      
                        $("#product-table").tablesorter();

        }); 
    </script>
    <link href="<%=resourcePath%>/data-page/table-sorter.css" rel="stylesheet" type="text/css">

    <script src="<%=resourcePath%>/data-page/smartpaginator.js" type="text/javascript"></script>
    <script type="text/javascript">
        jQuery(document).ready(function () {
        var t = document.getElementById('total').value;
        //var r = document.getElementById('rec_per_page').value;
            $('#paginator').smartpaginator({ totalrecords: t, recordsperpage: 10, datacontainer: 'product-table', dataelement: 'tr', initval: 0, next: 'Next', prev: 'Prev', first: 'First', last: 'Last'});
        });
    </script> 
```

当我删除以下分页和排序工作并且自动完成功能不起作用时

```
<script type="text/javascript" src="<%=resourcePath %>/scripts/prototype/prototype.js"></script> 
```

当我添加以上内容时，反之亦然。

如何克服这个？

请帮我。

问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T10:03:38.090

根据加载脚本的顺序，您不应该总是使用jQuery`$.noConflict();`来释放控制权`$`。最好的方法是使用`jQuery`而不是在`$`任何地方实现 jquery 代码，如下所示：

```
jQuery.noConflict(); 
```

此外，您正在调用`$.noConflict()`并且仍在使用 jQuery DOMReady 函数和`$`. 这个：

```
$.noConflict(true);
$(function() {      
    $("#product-table").tablesorter();
}); 
```

应该：

```
jQuery.noConflict(true);
jQuery(function() {      
    jQuery("#product-table").tablesorter();
}); 
```

**编辑：**

此外，要使用`$`DOMReady 事件处理程序内部，您需要将其作为参数传递。这个：

```
jQuery(document).ready(function() { 
```

应该：

```
jQuery(document).ready(function($) { 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T10:18:56.397

从上面的答案中没有完全理解。但它帮助我找到了它是什么以及它发生的原因。

我从中得到了所有的解决[方案](http://api.jquery.com/jQuery.noConflict/)

# c# - 删除 .Doc 中的模板链接

> ID：12971714
> 
> 赞同：1
> 
> 时间：2012-10-19T09:53:34.340
> 
> 标签：c#, templates, ms-word

我正在使用从模板创建 .doc 文件的 C# 应用程序。
问题是我不保留模板，并且当模板文件不再存在时，.doc 文件需要很长时间才能打开。
我了解 Word 在打开 doc 文件之前会尝试查找模板文件。当 Word 打开文档时（很长一段时间后）它显示完美，这似乎没用。

这是我用来打开文件的代码：

```
 wordApplication = new Microsoft.Office.Interop.Word.Application();
 wordApplication.Documents.Add("PATH TO DOC"); 
```

如果模板文件存在，则没有问题，但如果不存在，则需要很长时间。

关于如何删除模板和从模板创建的文档之间的“链接”的任何想法？（在 C# 中）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T09:59:04.100

您可以使用`set_AttachedTemplate`对象`Word.Document`来更改模板。您可能必须调用`UpdateStyles`文档以从新模板中复制样式信息。

# java - 运行方法在 BroadcastReceiver 中有效，但循环方法失败

> ID：12971718
> 
> 赞同：1
> 
> 时间：2012-10-19T09:53:57.990
> 
> 标签：java, android, broadcastreceiver

如果我`onReceive()`只用一个简单的 toast 运行我的方法，我的应用程序就会运行。但是当我尝试执行一个循环然后显示一个 toast 时，我的程序崩溃了。有没有说我不能在`onReceive()`方法中执行循环？

```
 @Override
        public void onReceive(Context ctx, Intent intent) {
            DBAdapter havetododb = new DBAdapter(ctx);
            Cursor cursor = havetododb.fetchAllItems();
            if (cursor.moveToFirst()) {
                do {
                    String title = cursor.getString(cursor.getColumnIndex("item"));
                    Toast.makeText(ctx, title, Toast.LENGTH_LONG).show();
    } while (cursor.moveToNext());
    }
    cursor.close();
} 
```

我试图在我的 logcat 中搜索错误，但它似乎是空的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T10:04:37.567

您可以运行任何代码，但如果您在主线程上运行的时间过长（我认为是 10 秒，但这取决于哪个版本），您将收到应用程序无响应 (ANR) 中断，并且您会被杀死。不过，这应该会显示在日志中。用一个可以捕获所有内容的 try/catch 包围你的代码，看看你得到了什么。

如果您的时间用完了，[IntentService]/http://developer.android.com/reference/android/app/IntentService.html) 将为您提供帮助。[在AsyncTask](http://developer.android.com/reference/android/os/AsyncTask.html)中执行也可能足够，但这样可以减少让您的进程保持活力的努力。

# android - android 将 sd 卡中的图像加载到 imageview 中会在三星 SIII 中造成内存不足错误

> ID：12971719
> 
> 赞同：1
> 
> 时间：2012-10-19T09:53:58.500
> 
> 标签：android, imageview, android-camera, image-capture

在我的应用程序中，我可以选择在 sd 卡中显示图像，用户可以从中选择一个图像，它将加载到我下一个活动的图像视图中。

我已经在三星 Ace 和三星 Galaxy S3 等两台设备上测试了该应用程序。

在 2.3 版本的三星 Ace 中，我可以选择图像并从 onActivity 结果中调用下一个 Activity 并将图像加载到 Imageview 中，在这里我可以执行 n 次，（我使用的其他选项是通过相机捕获并加载下一个活动，这里的过程也很好）

当我在 4.2 版的三星 Galaxy S3 中尝试相同的过程时，我第一次能够通过相机选择或捕获并将其加载到 imageview 中。当我第二次尝试应用程序崩溃时，说

```
E/dalvikvm-heap( 7058): Out of memory on a 31961104-byte allocation.
E/AndroidRuntime( 7058): FATAL EXCEPTION: main
E/AndroidRuntime( 7058): java.lang.OutOfMemoryError
E/AndroidRuntime( 7058): at android.graphics.BitmapFactory.nativeDecodeStream(Native Method)
E/AndroidRuntime( 7058): at android.graphics.BitmapFactory.decodeStream(BitmapFactory.java:587)
E/AndroidRuntime( 7058): at android.graphics.BitmapFactory.decodeFile(BitmapFactory.java:389)
E/AndroidRuntime( 7058): at android.graphics.BitmapFactory.decodeFile(BitmapFactory.java:418)
E/AndroidRuntime( 7058): at com.tribal.pages.app.UploadPhoto$ShowCapturedImage.onPostExecute(UploadPhoto.java:442)
E/AndroidRuntime( 7058): at com.tribal.pages.app.UploadPhoto$ShowCapturedImage.onPostExecute(UploadPhoto.java:1)
E/AndroidRuntime( 7058): at android.os.AsyncTask.finish(AsyncTask.java:602)
E/AndroidRuntime( 7058): at android.os.AsyncTask.access$600(AsyncTask.java:156)
E/AndroidRuntime( 7058): at android.os.AsyncTask$InternalHandler.handleMessage(AsyncTask.java:615)
E/AndroidRuntime( 7058): at android.os.Handler.dispatchMessage(Handler.java:99)
E/AndroidRuntime( 7058): at android.os.Looper.loop(Looper.java:137)
E/AndroidRuntime( 7058): at android.app.ActivityThread.main(ActivityThread.java:4517)
E/AndroidRuntime( 7058): at java.lang.reflect.Method.invokeNative(Native Method)
E/AndroidRuntime( 7058): at java.lang.reflect.Method.invoke(Method.java:511)
E/AndroidRuntime( 7058): at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:993)
E/AndroidRuntime( 7058): at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:760)
E/AndroidRuntime( 7058): at dalvik.system.NativeStart.main(Native Method)
E/android.os.Debug( 2098): !@Dumpstate > dumpstate -k -t -n -z -d -o /data/log/dumpstate_app_error
E/widget  ( 2468): [MSC_HERO_Accu]>>> SM:399 [0:0] IR : false, IPR : false
E/Launcher( 2468): Error finding setting, default accessibility to not found: accessibility_enabled
E/widget  ( 2468): [MSC_HERO_Accu]>>> SM:399 [0:0] IR : false, IPR : false 
```

我尝试使用以下 2 种方法在 ImageView 方法 1 中加载捕获的图像或选定的图像

```
Bitmap  bitmap = BitmapFactory.decodeStream(getContentResolver().openInputStream(Appconstants._uri));
                       bitmap = Bitmap.createBitmap(bitmap, 0, 0, bitmap.getWidth(), bitmap.getHeight(), matrix, true);
ImageView uplaod_image.setImageBitmap(bitmap); 
```

方法二

```
Bitmap bitmap = BitmapFactory.decodeFile(Appconstants.f);
ImageView uplaod_image.setImageBitmap(bitmap); 
```

但是每次应用程序崩溃时说上述错误，如何解决这个问题......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T09:59:42.180

您看到的行为差异可能是由于两部手机上的图像大小不同。

你可能想打电话，

```
upload_image.setImageDrawable(null); 
```

在尝试加载另一个图像之前清除 imageView（或使用[**此处**](https://stackoverflow.com/questions/2859212/how-to-clear-an-imageview-in-android)详述的方法之一），以便在后续分配之前由垃圾收集器清理和收集内存并防止`Out of memory`错误。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-19T10:01:52.910

尝试根据设备的屏幕尺寸在将图像加载到内存之前对其进行缩放，

您可以使用 BitmapFactory 选项`inJustDecodeBounds = true`在将 Bitmap 解码到内存之前获取它的大小。

获取高度和宽度，

```
int imageHeight = options.outHeight;
int imageWidth = options.outWidth; 
```

然后您可以根据您的要求使用所需的图像高度和宽度对其进行缩放，

```
int inSampleSize = Math.min(imageWidth /reqWidth,imageHeight /reqHeight); 
```

然后最后应用`inSampleSize`来缩放位图。对于更多详细信息，请[在此处](https://stackoverflow.com/a/12819091/726863)查看我的答案。

# php - symfony 1.4 - 保存动态值（选择形式）

> ID：12971721
> 
> 赞同：0
> 
> 时间：2012-10-19T09:54:08.880
> 
> 标签：php, symfony1, symfony-1.4

如何获取动态选择字段的值并保存它们？

这是我的功能：

```
public function configure()  
  {

    $query = FillableTable::getInstance()->createQuery('fal')->addWhere('0 = 1 ');

    $piecesChoices= RepaoTable::getInstance()->createQuery('rpo')->select('rpo.code_text')->execute();
    $choices = array();
    foreach ($piecesChoices as $choice) 
        {
    $value = $choice->getCodeText();
    $choices[$value] = $value;
        }

    $this->widgetSchema['simple1'] = new sfWidgetFormDoctrineChoice(array('model'=> 'Simple1'));
    $this->widgetSchema['simple2'] = new sfWidgetFormDoctrineChoice(array('model'=> 'Simple2', 'query' => $query));
    $this->widgetSchema['code_text']= new sfWidgetFormChoice(array(
            'expanded' => true,
            'multiple' => true,
            'choices'=> $choices
       ));

//validation 

    $this->validatorSchema....

// 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T18:47:00.273

我想您指的是从小`code_text`部件中保存用户选择的值？

在您的操作中，在用户发布/获取您的表单后，您将拥有一个数组而不是单个值。

你可以`var_dump($request->getPostParameter('code_text'))`看看会发生什么。

然后，您可以对这些值做任何您想做的事情。

# ejb-3.0 - ejb3 entitymanager在创建后发现没有获取关联数据

> ID：12971722
> 
> 赞同：0
> 
> 时间：2012-10-19T09:54:19.043
> 
> 标签：ejb-3.0, entitymanager

我目前有一个`@WebService`管理请求列表的入口点（通过 a ），每个入口点都是一个 DAO 操作（即 createEmployee、createCompany 等）。一家公司有多名员工，当我的命令列表如下时：

客户调用 #1：
1\. createCompany
2\. createEmployee
3\. addEmployeeToCompany

客户电话#2：
1\. findAllCompanies

我得到了所有公司，但没有与他们相关的员工。
如果我重新部署应用程序，并且 findAllCompanies 命令带有所有信息（公司 + 员工），则似乎存在一些持久性错误。
我所有的 bean 都是无状态的（它们应该是有状态的吗？）并且我的实体管理器被注入到它们上（应该只注入到 webservice bean 上并传递给其他人吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T11:26:09.773

问题是由于 JPA 的缓存造成的。

查询第一次运行良好，所有后续查询都从缓存中获取。

[oracle docs有答案](http://docs.oracle.com/javaee/6/tutorial/doc/gkjjj.html)，这可以通过多种方式进行配置：

*   通过配置 persistence.xml 并设置实体的可缓存参数 ( `shared-cache-mode`)
*   通过设置 EntityManager 的属性`javax.persistence.cache.retrieveMode`和`javax.persistence.cache.storeMode`
*   通过设置`javax.persistence.cache.retrieveMode`和`javax.persistence.cache.storeMode`EntityManager 的查找或刷新

# php - mac上的apc和php版本

> ID：12971727
> 
> 赞同：0
> 
> 时间：2012-10-19T09:54:38.573
> 
> 标签：php, apc

我正在尝试在我的 mac 机器上设置 symfony2 项目。我正在使用 php 5.4.7。

当我启动我的网络服务器（apache 2.2.22）并第一次访问站点时，一切都很好。但是当我按 F5（刷新）或转到其他链接时，我收到错误消息“找不到服务器”。当我按 F5 几次时，我得到的消息是“警告：require()：无法为池分配内存”。

我想这与APC有关。我使用的 APC 版本是 3.1.12

有谁知道可能是什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T09:59:59.893

我建议你使用像 MAMP 这样的程序。因为它是一个完整的工具，具有您需要的所有功能，没有问题。

顺便说一句，这是一个可能的解决方案：[http ://www.cyberciti.biz/faq/linux-unix-php-warning-unable-to-allocate-memory-for-pool/](http://www.cyberciti.biz/faq/linux-unix-php-warning-unable-to-allocate-memory-for-pool/)

# jsp - Struts 持久化列表

> ID：12971730
> 
> 赞同：0
> 
> 时间：2012-10-19T09:54:47.190
> 
> 标签：jsp, jakarta-ee, struts, jstl, actionform

当有人访问网站并登录时，我从每个用户都不同的数据库中加载描述符列表。

我希望该列表在导航会话期间可用。我的问题出现在如何将列表从 struts 传递到该页面到 JSP 并使其在每次用户访问某个页面时都可用，等等。

我想使用请求会话并在那里设置列表，这是一个好习惯吗？我应该在 Struts 1.1 和 JSTL 中提供哪些其他可能性？

# node.js - 将 tls.CleartextStream 实例传递给工作进程

> ID：12971738
> 
> 赞同：3
> 
> 时间：2012-10-19T09:55:10.890
> 
> 标签：node.js, sockets, tcp, ssl

我想将一个[`tls.CleartextStream`](http://nodejs.org/api/tls.html#tls_class_tls_cleartextstream)实例传递给一个工作进程（由[cluster.fork()](http://nodejs.org/api/cluster.html#cluster_cluster_fork_env)方法创建）。虽然我可以使用[send(message, handle)](http://nodejs.org/api/child_process.html#child_process_child_send_message_sendhandle)`net.Socket`方法发送实例，但我不能使用 ClearStream 类来做同样的事情。

是否有办法通过序列化原始 CleartextStream 实例来“重新包装”连接的原始套接字？

这就是我想要实现的：Node.js 应用程序的主进程正在侦听 TLS 连接。有许多特定的工作进程在启动时产生。连接到主进程的客户端希望被重定向到*某个*工作进程。因此 master 应该将 socket 发送到相应的 worker 进程。这实际上是可行的，但是随着 TLS 上下文丢失，工作进程既不能解密也不能编码数据以与连接的客户端通信。

![在此处输入图像描述](../Images/b09cdcf49a7488344177c43206f35eab.png)

您知道如何实现这一点吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T02:10:14.113

以安全可信的方式传递连接的 TLS 连接是一个难题。

最简单的方法是在 Master 进程上进行 TLS 解码/编码，然后将数据本身发送给各个工作人员。为了保持该网络连接的安全，您可以在主服务器和工作服务器之间创建另一个 TLS 会话。主要的警告是性能瓶颈的可能性

您可以使用 stream.pipe [http://nodejs.org/api/stream.html#stream_stream_pipe_destination_options](http://nodejs.org/api/stream.html#stream_stream_pipe_destination_options)将两个 TLS 流双向连接到另一个。

编辑：只需更仔细地阅读问题。由于工作进程在同一台机器上，因此您不必在主进程和工作进程之间使用 TLS。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T17:23:56.420

在fork之后，每个worker都是一个独立的处理器，拥有自己的地址空间。跨进程边界传递 fd 或 socket 可能不起作用。

我同意 Eric，最好的办法是使用 stream.pipe()。

# html - Smarty {foreachelse} 有什么用？

> ID：12971742
> 
> 赞同：0
> 
> 时间：2012-10-19T09:55:19.993
> 
> 标签：html, foreach, smarty

我的场景：

```
<table>
    <thead>
        <tr>
            <th>Name</th>
            <th>Email</th>
        </tr>
    </thead>
    <tbody>
        {foreach from=$users item=user}
            <tr>
                <td>{$user.name}</td>
                <td>{$user.email}</td>
            </tr>
        {foreachelse}
            There are no users....
        {/foreach}
    </tbody>
</table> 
```

现在，当没有用户时，我的表很丑，所以我会添加：

```
{if $users|count > 0}
    <table>
        <thead>
            <tr>
                <th>Name</th>
                <th>Email</th>
            </tr>
        </thead>
        <tbody>
            {foreach from=$users item=user}
                <tr>
                    <td>{$user.name}</td>
                    <td>{$user.email}</td>
                </tr>
            {foreachelse}
                There are no users....
            {/foreach}
        </tbody>
    </table>
{else}
    There are no users....
{/if} 
```

但现在我`{foreachelse}`的没用了。

因此，我删除了该`{foreachelse} There are no users....`部分并得出结论认为这`{foreachelse}`是无用的。

我在`<table>`,`<ol>`等中遇到的这个问题`<ul>`。

有没有人有解决方案，所以我可以使用`{foreachelse}`？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T10:00:38.013

您可以有一行表示没有用户，例如：

```
<table>
    <thead>
        <tr>
            <th>Name</th>
            <th>Email</th>
        </tr>
    </thead>
    <tbody>
        {foreach from=$users item=user}
            <tr>
                <td>{$user.name}</td>
                <td>{$user.email}</td>
            </tr>
        {foreachelse}
            <tr>
                <td colspan="2">There are no users....</td>
            </tr>
        {/foreach}
    </tbody>
</table> 
```

但是当这不是预期的结果时，我可以理解。

有时您可能会在 foreach 中使用 div 而不是表格或列表内容。检查有关此的 smarty 文档： [http ://www.smarty.net/docs/en/language.function.foreach.tpl](http://www.smarty.net/docs/en/language.function.foreach.tpl)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-19T10:03:36.747

`{foreachelse}``from`当变量中没有值时执行。这对我来说非常有用，`if-else`不需要条件。如果我使用你的代码，那么我会`{foreachelse}`这样写，

```
{foreachelse}
     <tr><td colspan="2" style="color:red">There are no users....</td></tr>
{/foreach} 
```

# ruby - rvm：找不到命令（Fedora 12）

> ID：12971744
> 
> 赞同：0
> 
> 时间：2012-10-19T09:55:26.083
> 
> 标签：ruby, linux, rvm, fedora

在我的 Fedora 12 系统中使用以下命令安装 rvm 后：

```
\curl -L https://get.rvm.io | bash -s stable –ruby 
```

当我想使用 rvm 时，它说

rvm：找不到命令

我想将 rvm 用于：`rvm install 1.9.3`

解决办法是什么。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-19T12:23:25.713

您的命令使用短划线 ('–', U+2013)：

> \curl -L [https://get.rvm.io](https://get.rvm.io) | bash -s 稳定 –ruby

[但是https://rvm.io/rvm/install/](https://rvm.io/rvm/install/)上的安装说明使用双 ASCII 破折号“--”：

> \curl -L [https://get.rvm.io](https://get.rvm.io) | bash -s 稳定 --ruby

# mysql - 仅当值为空或特定数字时才加入两个表

> ID：12971747
> 
> 赞同：0
> 
> 时间：2012-10-19T09:55:34.333
> 
> 标签：mysql, sql

我在数据库中有三个表：

*   产品表 - +100000 个条目
*   属性表（产品可能属性的列表）
*   产品属性表（包含产品属性值）

我正在寻找 8 个随机产品及其属性之一（attribute_id = 2），但如果产品没有此属性，它应该出现在查询的返回中。我一直在尝试一些没有任何成功结果的 sql 查询，因为我的返回只显示具有该属性的产品并隐藏其他产品。

我的三个表是这样的：

```
CREATE TABLE `product` (
  `id` int(11) unsigned NOT NULL AUTO_INCREMENT,
  `sku` varchar(20) COLLATE utf8_unicode_ci NOT NULL DEFAULT '',
  `name` varchar(90) COLLATE utf8_unicode_ci NOT NULL DEFAULT '',
  `provider_id` int(11) unsigned DEFAULT NULL,
  `url` varchar(255) COLLATE utf8_unicode_ci DEFAULT NULL,
  `active` int(1) unsigned NOT NULL DEFAULT '0',
  PRIMARY KEY (`id`),
  UNIQUE KEY `sku_UNIQUE` (`sku`)
) ENGINE=InnoDB AUTO_INCREMENT=123965 DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;

CREATE TABLE `attribute` (
  `id` int(11) unsigned NOT NULL AUTO_INCREMENT,
  `name` varchar(50) NOT NULL DEFAULT '',
  `data_type` varchar(50) DEFAULT '',
  PRIMARY KEY (`id`), 
) ENGINE=InnoDB AUTO_INCREMENT=30 DEFAULT CHARSET=latin1;

CREATE TABLE `product_attribute` (
  `id` int(11) unsigned NOT NULL AUTO_INCREMENT,
  `product_id` int(11) unsigned NOT NULL,
  `attribute_id` int(11) unsigned NOT NULL DEFAULT '6',
 `value` longtext NOT NULL,
 PRIMARY KEY (`id`),
  UNIQUE KEY `product_id` (`product_id`,`attribute_id`)
) ENGINE=InnoDB AUTO_INCREMENT=869437 DEFAULT CHARSET=latin1; 
```

这是我尝试过的查询之一，我认为它是正确的，但它与其他查询有相同的问题......

```
SELECT product.id, product.sku, product.name,provider.name as provider_name,
product_attribute.value as author 
FROM (`product`)  
LEFT JOIN `provider` ON `product`.`provider_id` = `provider`.`id` 
LEFT JOIN `product_attribute` ON `product`.`id` = `product_attribute`.`product_id`
 WHERE `product`.`active` = '1' AND `product`.`url` IS NOT NULL 
AND (`product_attribute`.`attribute_id` = 8 OR `product_attribute`.`attribute_id` IS NULL) 
AND `product`.`provider_id` = '7' ORDER BY RAND() LIMIT 8 
```

我正在尝试左、内和右连接，但没有任何效果。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-19T10:02:03.020

您应该将左连接表的条件放在连接中，而不是 where 子句

```
...
from product
     left join provider ON product.provider_id = provider.id  
     left join product_attribute on product.id = product_attribute.product_id
               and product_attribute.attribute_id = 8
where `product`.`active` = '1' 
and `product`.`url` IS NOT NULL  
and `product`.`provider_id` = '7' 
... 
```

# android - 如何在现有 Activity 中加载另一个 Layout xml 文件？

> ID：12971748
> 
> 赞同：2
> 
> 时间：2012-10-19T09:55:35.593
> 
> 标签：android, android-layout

我创建了一个活动，其中有四个按钮 center 。我希望当我单击任何按钮时，应该打开另一个 Xml 文件。我不想继续其他活动。我想用新的 Xml 在同一个活动上显示。这个新的 Xml 隐藏了以前的 Xml。

第一个xml是：-

```
<include  
android:id="@+id/header"
layout="@layout/header"
android:layout_alignParentTop="true">
</include>

<Button
style="@style/homePageBtnStyle"
android:id="@+id/howToUse"
android:layout_centerHorizontal="true"
android:layout_marginTop="110dp"
android:text="@string/howToUse"
 />

<Button
style="@style/homePageBtnStyle"
android:id="@+id/purposeOfApp"
android:layout_alignLeft="@+id/howToUse"
android:layout_marginTop="10dp"
android:text="@string/purposeOfApp"
android:layout_below="@+id/howToUse"
/>

 <Button
style="@style/homePageBtnStyle"
android:id="@+id/rateThisApp"
android:layout_alignLeft="@+id/purposeOfApp"
android:layout_marginTop="10dp"
android:text="@string/rateThisApp"
android:layout_below="@+id/purposeOfApp"
/> 
```

第二个xml是：-

```
<TextView xmlns:android="http://schemas.android.com/apk/res/android"
android:text="@string/howtousetext"
android:id="@+id/textInstruction"
android:textColor="@color/btn_border"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:
android:background="@color/themeColor"

/> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-19T10:04:55.220

您可以做的最好的事情是使用 ViewFlipper。您可以在单个 ViewFlipper 中包含多个布局，并且可以使用 showNext() 和 showPrevious() 从一个布局导航到另一个布局。而且由于您只有两个视图，因此这变得非常简单。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-19T09:59:45.420

再次使用第二个 xml id 调用 setContentView 并调用 invalidate()。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-19T10:00:41.563

试试这个：

```
 Button button1 = (Button) this.findViewById(R.id.button1);
    button1.setOnClickListener(new OnClickListener(){

        @Override
        public void onClick(View v) {
            // TODO Auto-generated method stub
            Test1Activity.this.setContentView(R.layout.main2);
        }}); 
```

# qt - QML：向上打开的下拉菜单

> ID：12971751
> 
> 赞同：1
> 
> 时间：2012-10-19T09:55:54.083
> 
> 标签：qt, listview, qt-creator, qml

我需要在 QML 中单击菜单按钮时向上打开下拉菜单。

我曾尝试使用相同的列表视图，但在实现中，我们得到了向下打开的下拉菜单。

参考以下代码段的任何建议。

```
import QtQuick 1.1

Rectangle {
    width: 800
    height: 480

    Rectangle {
        id:comboBox
        property variant items: ["Red", "Blue", "Green"]

        signal comboClicked;
        x: 651
        y: 344
        width: 141
        height: 30;
        z: 0
        smooth:true;

        Rectangle {
            id:chosenItem
            radius:4;
            width:parent.width;
            height:comboBox.height;
            color: "#454b4d"
            smooth:true;
            Text {
                anchors.top: parent.top;
                anchors.margins: 8;
                id:chosenItemText
                x: 11
                y: 5
                color: "#ffffff"
                text:"Menu";
                anchors.topMargin: 5
                anchors.left: parent.left
                anchors.leftMargin: 12
                font.family: "Arial"
                font.pointSize: 14;
                smooth:true
            }

            MouseArea {
                width: 400
                height: 30
                anchors.bottomMargin: 0
                anchors.fill: parent;
                onClicked: {
                    comboBox.state = comboBox.state==="dropDown"?"":"dropDown"
                }
            }
        }

        Rectangle {
            id:dropDown
            width:comboBox.width;
            height:0;
            clip:true;
            radius:4;
            anchors.top: chosenItem.bottom;
            anchors.margins: 2;
            color: "lightblue"

            ListView {
                id:listView
                height:500;
                model: comboBox.items
                currentIndex: 0
                delegate: Item{
                    width:comboBox.width;
                    height: comboBox.height;

                    Text {
                        text: modelData
                        anchors.top: parent.top;
                        anchors.left: parent.left;
                        anchors.margins: 5;

                    }
                    MouseArea {
                        anchors.fill: parent;
                        onClicked: {
                            comboBox.state = ""
                            chosenItemText.text = modelData;
                            listView.currentIndex = index;
                        }
                    }
                }
            }
        }

        states: State {
            name: "dropDown";
            PropertyChanges { target: dropDown; height:30*comboBox.items.length }
        }

        transitions: Transition {
            NumberAnimation { target: dropDown; properties: "height"; easing.type: Easing.OutExpo; duration: 1000 }
        }
    }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T08:06:44.620

尝试更改`dropDown`项目的锚点：

那

```
anchors.top: chosenItem.bottom; 
```

应该成为

```
anchors.bottom: chosenItem.top; 
```

# java - JUNG Layout 的首选大小，基于图表的大小

> ID：12971753
> 
> 赞同：2
> 
> 时间：2012-10-19T09:56:04.630
> 
> 标签：java, jung, graph-visualization

我正在使用 JUNG 框架和 FRLayout。像这样：

```
layout = new FRLayout<String, Number>(graph);
preferredSize = new Dimension(600, 600);

final VisualizationModel<String, Number> visualizationModel = 
new DefaultVisualizationModel<String, Number>(layout, preferredSize);
vv = new VisualizationViewer<String, Number>(visualizationModel, preferredSize); 
```

我把它放在了 GraphZoomScrollPane 中。我可以放大、缩小、四处移动图形，直到它看起来像我想要的那样，但我希望在我启动我的 Swing 应用程序时它是这样的。

我真正想要的是图形的 PreferredSize 根据图形大小动态调整，这样当我加载大图形时，我不必在顶点不再重叠之前放大十亿倍。

不适合我的面板的内容通常应该在滚动条后面“消失”。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T22:37:00.900

您可以使用以下方式以编程方式对其进行缩放：

```
double amount = 1.0;    // Or negative to zoom out.
ScalingControl scaler = new CrossoverScalingControl();
scaler.scale(vv, amount > 0 ? 1.1f : 1 / 1.1f, vv.getCenter()); 
```

注意：我之前从 StackOverflow 得到了这个（所以这段代码的功劳不是我的），但我似乎找不到原始问题。

编辑：

我找到了：

[如何手动设置 Jung 可视化的缩放比例？](https://stackoverflow.com/questions/9761391/how-to-manually-set-the-zoom-on-a-jung-visualisation)

# c# - 为什么我的事件不会在服务中触发？

> ID：12971758
> 
> 赞同：0
> 
> 时间：2012-10-19T09:56:13.150
> 
> 标签：c#, service, event-handling, naudio

我制作了一个 Windows 窗体应用程序，它通过麦克风收听并检测声音顾客。

现在我想做同样的事情，但在服务中。

我使用 Nadio 和这个事件：

```
myWave = new WaveIn();
...
myWave.DataAvailable += new EventHandler<WaveInEventArgs>(myWave_DataAvailable); 
```

在 windows 窗体下工作正常，但服务不会触发事件。

有谁知道为什么？

另一个问题是

即使未登录，我的服务也会听到麦克风吗？

谢谢！

**使用新信息编辑并使用 WaveInEvent 类：**

我在类中声明变量

```
public partial class SoundDetector : ServiceBase {
    ... 
    private WaveInEvent myWave; 
```

在构造函数中设置事件

```
public SoundDetector()
{
    myWave.DataAvailable += myWave_DataAvailable; 
```

并在 OnStart 中开始记录

```
protected override void OnStart(string[] args)
{
    myWave.StartRecording(); 
```

但事件仍然停止发射......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T17:21:31.310

改用`WaveInEvent`类

# autohotkey - Autohotkey - 键循环使 shift 键组合不起作用

> ID：12971770
> 
> 赞同：1
> 
> 时间：2012-10-19T09:56:38.200
> 
> 标签：autohotkey

我制作了一个脚本，打算在按下按钮时发送垃圾邮件，它可以工作，但是当我想在按住键 [Xbutton2] 的同时使用另一个带有 [Shift] 的组合键时，它不起作用，例如，如果我想按 Shift+q，它只会发送 q 和其他任何键都一样。

我一直在使用这个脚本，但是自从软件更新后，它似乎不再按预期工作了。

```
#ifWinActive ***********

CoordMode,pixel,screen

XButton2::
  Loop  
  {    
SetKeyDelay, 20
if not GetKeyState("XButton2", "P")
  break
 Send  3456789

 sleep +q
 sleep +e
 sleep +f
 sleep +r
 sleep +c
 sleep +q
}
return 
```

我只是不明白为什么任何与 Shift 的组合键都不起作用。我尝试在我使用的换档键上添加睡眠，但没有区别。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T14:08:21.710

在热键前面添加星号使其忽略修饰键 ( `Ctrl`, `Alt`, `Shift`)。

```
*XButton2::
    ;do stuff
    return 
```

# java - JavaFX 2在请求焦点后在表格视图中设置插入符号位置编辑TextField

> ID：12971771
> 
> 赞同：4
> 
> 时间：2012-10-19T09:56:38.043
> 
> 标签：java, tableview, javafx-2, javafx

在 JavaFX 2 中，我创建了一个自定义 TableCell，它覆盖了 startEdit() 方法来请求焦点。因此，只要我在单元格上调用编辑命令，出现的编辑文本字段就会获得焦点。

下一步是将插入符号位置设置为文本字段的末尾。但由于未知原因，它似乎不起作用。它总是放在第一个字符之前。

这是我到目前为止所尝试的：

```
public void startEdit() {
    if (!isEmpty()) {
        super.startEdit();
        createTextField();
        setText(null);
        textField.end();
        setGraphic(textField);
        ((TextField)getGraphic()).end();
        textField.end();

        Platform.runLater(
                new Runnable() {
                    @Override
                    public void run() {
                        getGraphic().requestFocus();
                    }
                });
    }
}

public void startEdit() {
    if (!isEmpty()) {
        super.startEdit();
        createTextField();
        setText(null);
        setGraphic(textField);
        textField.end();

        Platform.runLater(
                new Runnable() {
                    @Override
                    public void run() {
                        getGraphic().requestFocus();
                        textField.end(); 
                        ((TextField)getGraphic()).end();
                    }
                });
    }
}

public void startEdit() {
    if (!isEmpty()) {
        super.startEdit();

        createTextField();
        setText(null);
        textField.end();
        setGraphic(textField);
        ((TextField)getGraphic()).end();
        getGraphic().requestFocus();
        ((TextField)getGraphic()).end();
        textField.end();
    }
} 
```

合乎逻辑的方法是请求关注文本字段，然后移动插入符号，但无论出于何种原因，它似乎都不起作用。

也许有人可以启发我？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-10-03T08:43:48.457

我遇到了同样的问题，在尝试了很多不同的事情之后，我终于找到了解决方案。

不要问我为什么，但问题似乎是由为每次编辑创建一个新的 TextField 引起的。如果您重用现有的文本字段，它可以工作！

所以试试这个：

```
public void startEdit() {
    if (!isEmpty()) {
        super.startEdit();

        if (textField == null)
            createTextField();
        else
            textField.setText(getString());

        setText(null);
        setGraphic(textField);

        Platform.runLater(
                new Runnable() {
                    @Override
                    public void run() {
                        textField.requestFocus();
                        textField.deselect(); 
                        textField.end(); 
                    }
                });
    }
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2020-04-13T20:52:04.890

以上答案均未正确解决自定义表格单元格的 TextField 中光标定位的问题。如果您发现上述方法对您有用，那么恕我直言，这更多是运气问题，取决于在定位光标之前已经布置了控件的竞争条件。

您需要本着 JavaFX 框架的精神在正确的时间修改 GUI 组件。即在控件 layoutChildren 方法中。例如，您需要覆盖自定义 TableCell 的 layoutChildren 方法：

```
TextField textField = new TextField() {
    private boolean first = true;

    @Override protected void layoutChildren() {
      super.layoutChildren();

      // Set cursor caret at end of text (and clear highlighting)
      if (first) {
        this.end();
        first = false;
      }
    }
  }; 
```

我还注意到 Java 1.8.0_241 在 TextFieldTableCell 实现中也包含此问题。更糟糕的 TextField 对 TextFieldTableCell 实现是完全私有的，所以为了解决这个问题，我选择复制 javax.scene.table.cell.TextFieldTableCell 和 javax.scene.table.cell.CellUtils 的源代码。TextField 在 CellUtils 中实例化，因此您可以在那里修复光标位置。例如

```
 static <T> TextField createTextField(final Cell<T> cell, final StringConverter<T> converter) {
    final TextField textField = new TextField(getItemText(cell, converter)) {
    private boolean first = true;

      @Override protected void layoutChildren() {
        super.layoutChildren();

        // Set cursor caret at end of text (and clear highlighting)
        if (first) {
          this.end();
          first = false;
        }
      };
  ...

  ...
  } 
```

# django - Django：扩展用户模型的问题

> ID：12971774
> 
> 赞同：3
> 
> 时间：2012-10-19T09:56:53.443
> 
> 标签：django, django-models, django-admin

我正在尝试将字段添加到用户模型并将它们添加到管理页面。这里的 django 文档中有一个推荐的方法：

[https://docs.djangoproject.com/en/dev/topics/auth/#storing-additional-information-about-users](https://docs.djangoproject.com/en/dev/topics/auth/#storing-additional-information-about-users)

因此，我为我的新模型创建了一个 OneToOne 字段：

```
from django.contrib.auth.models import User

class UserProfile(models.Model):
    user = models.OneToOneField(User)
    designs = models.ManyToManyField('Design', blank=True)
    prints = models.ManyToManyField('Print', blank=True)
    rating = models.IntegerField(null=True, blank=True)
    reliability = models.IntegerField(null=True, blank=True)
    av_lead_time = models.IntegerField(null=True, blank=True) 
```

在 settings.py 中添加了 AUTH_PROFILE_MODULE：

```
AUTH_PROFILE_MODULE = 'website.UserProfile' 
```

尝试将 UserProfile 字段添加到管理页面：

```
from django.contrib import admin
from django.contrib.auth.admin import UserAdmin
from website.models import UserProfile
from django.contrib.auth.models import User

# Define an inline admin descriptor for UserProfile model
# which acts a bit like a singleton
class UserProfileInline(admin.StackedInline):
    model = UserProfile
    can_delete = False
    verbose_name_plural = 'profile'

# Define a new User admin
class UserAdmin(UserAdmin):
    inlines = (UserProfileInline, )

# Re-register UserAdmin
admin.site.unregister(User)
admin.site.register(User, UserAdmin) 
```

现在，当我尝试通过管理菜单访问注册用户时，我得到：

```
Caught DoesNotExist while rendering: User matching query does not exist.
In template /usr/local/lib/python2.7/dist-packages/django/contrib/admin/templates/admin/includes/fieldset.html, error at line 19
19            {{ field.field }} 
```

当我尝试通过管理菜单添加新用户时，我得到：

```
Caught DoesNotExist while rendering: User matching query does not exist.
In template /usr/local/lib/python2.7/dist-packages/django/contrib/admin/templates/admin/includes/fieldset.html, error at line 19
19            {{ field.field }} 
```

为什么它不识别那个特定的领域？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T11:37:29.017

编辑：查看[完整的错误消息](http://dpaste.com/815515/)后，我可以看到错误不仅仅与扩展用户有关。呈现用于将打印分配给您正在编辑/添加的 UserProfile 的复选框和相应标签时会发生错误。Django 管理员调用 Print.__unicode__ 来为每个 Print 实例呈现标签，然后访问（在 /threedee/website/models.py 的第 33 行）Print 的“printer”属性，该属性是 User 的外键。并且由于某种原因，其中一个打印确实具有不指向任何用户的无效打印机值。

在没有看到 Print 模型的情况下无法真正说出这里到底发生了什么，我建议您检查 Print 数据库表（应命名为 website_print）并查找是否有任何异常（您使用的是 PostgreSQL 吗？）。如果那里没有任何重要数据，则截断整个 Print 表应该可以解决问题。

这是我仍然应该遵循的旧答案，但与您遇到的错误无关：

我只会评论其他答案，但似乎没有办法为我做到这一点。您需要结合 Alexey Sidorov 和 Like 它的答案：

首先使用 django shell 为现有用户创建 UserProfile 实例 - 只需运行[Like it's answer](https://stackoverflow.com/a/12972427/823726) in the shell (python manage.py shell) 提供的命令。

After that you should setup signal that will automatically create UserProfile for each new user according to [answer from alexey-sidorov](https://stackoverflow.com/a/12971842/823726).

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-19T10:01:00.510

在 UserProfile 类之后将此添加到 models.py。

```
 from django.db.models.signals import post_save  
      def create_user_profile(sender, instance, created, **kwargs):
          if created:
              UserProfile.objects.create(user=instance)

      post_save.connect(create_user_profile, sender=User) 
```

更多信息[https://docs.djangoproject.com/en/dev/topics/auth/#storing-additional-information-about-users](https://docs.djangoproject.com/en/dev/topics/auth/#storing-additional-information-about-users)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-19T10:33:02.393

为现有用户添加 UserProfile 条目：

```
from django.contrib.auth.models import User
from website.models import UserProfile
for user in User.objects.all():
    profile = UserProfile.objects.get_or_create(user = user) 
```

并为新用户创建个人资料。使用[信号](https://docs.djangoproject.com/en/dev/topics/signals/)做什么。

# java - 如何动态执行赋予变量的内容

> ID：12971777
> 
> 赞同：2
> 
> 时间：2012-10-19T09:56:58.797
> 
> 标签：java, c, perl

我有一个程序将一组语句放入一个变量中，我如何将该代码块（以字符串形式提供给变量）动态地放入当前正在执行的代码中以进行编译和执行。我急切地等待这个解决方案。任何具有此功能的编程语言..如果是，请粘贴此问题的代码

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-19T10:00:01.863

Perl 使这变得简单。

在 Perl 中：

```
eval q{ print "Hello world!\n" }; 
```

或者

```
$code = ' print "Hello world!\n"; ';
eval $code; 
```

见[评估](http://perldoc.perl.org/functions/eval.html)。

请注意，您应该小心从哪里获取代码。您将语言的全部力量展示给为您提供输入的任何人。确保它来自安全的来源。 **所谓的“字符串评估”在任何支持它的语言中都是高风险行为。** 例如，接受来自 Web 用户的输入并将其作为代码在您的服务器上运行，这只是自找麻烦。

关于 C：C 是一种编译语言，编译器在运行时不可用。另一方面，没有什么可以阻止您在 C 程序中嵌入 Perl 解释器，这将使您在编译的 C 应用程序中运行时编译和执行 Perl 代码。郑重声明，C++ 在同一条船上。它是一种编译语言，编译器不是运行时环境的组件。

至于 Java，有这篇文章：[Java 6.0 Compiler API](http://www.javabeat.net/2007/04/the-java-6-0-compiler-api/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-19T09:58:24.367

既然你说“任何语言”，我会忽略你的标签。

在 Python 中，这很简单：

```
code = "print \"hello world\""
exec code 
```

这将打印“hello world”。

C 没有这样的功能，因为编译器在运行时不存在。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-19T09:59:37.637

您正在寻找[javaScript`eval()`函数](http://www.w3schools.com/jsref/jsref_eval.ASP)

# ocr - 正方体：指定文本区域

> ID：12971778
> 
> 赞同：12
> 
> 时间：2012-10-19T09:57:08.933
> 
> 标签：ocr, tesseract

我正在使用 tesseract-ocr-3.01 扫描许多表格。表格都遵循模板，所以我已经知道文本的区域/矩形在哪里。

使用命令行工具时，有没有办法将这些区域传递给 tesseract？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-10-23T13:52:23.147

多亏了[这个帖子](https://groups.google.com/forum/?fromgroups=#!topic/tesseract-ocr/e3lqpY0pMpw)，我找到了答案。

tesseract 似乎支持 uzn 格式（用于 unvl 测试）。

从线程：

> 使用参数“-psm 4”调用 tesseract 并用图像的相同名称重命名 uzn 文件似乎有效。

**示例：**如果我们有`C:\input.tif`and `C:\input.uzn`，我们这样做：

```
tesseract -psm 4 C:\input.tif C:\output 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-19T10:14:08.897

这可能不是最佳答案，但这里有：

我不确定命令行工具是否具有指定文本区域的选项。

您可以做的是在另一个平台上使用 Tesseract 包装器（EmguCV 内置了 Tesseract）。所以你得到扫描的图像，裁剪出文本区域，然后一次一个地把它们交给 Tesseract。这样，您还可以避免 Tesseract 的页面布局分析中的任何不准确之处。

例如。

```
Image<Gray,Byte> scannedImage = new Image<Gray,Byte>(path_to_scanned_image);
//assuming you know a text region
Image<Gray,Byte> textRegion = new Image(100,20);
scannedImage.ROI = new Rectangle(0,0,100,20);
scannedImage.copyTo(textRegion);
ocr.recognize(textRegion); 
```

# mysql - 如何在mysql中按所需顺序检索行

> ID：12971780
> 
> 赞同：1
> 
> 时间：2012-10-19T09:57:34.223
> 
> 标签：mysql

我有一张如下表，

**表格1**

![在此处输入图像描述](../Images/b37950ae621a1f4ea80dc7a29725a8df.png)

当我使用查询时

`"SELECT cat_title FROM table1 WHERE cat_id IN(21,10,25,4)"`

结果按顺序排列

> **猫头衔**
> 
> 银行
> 
> 美容院
> 
> 车
> 
> 住宿

但我需要查询中给出的结果，例如，

> **猫头衔**
> 
> 车
> 
> 比蒂客厅
> 
> 住宿
> 
> 银行

我该怎么办？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T10:02:36.610

你可以试试这个：

```
SELECT cat_title
FROM table1
WHERE cat_id IN(21,10,25,4)
ORDER BY (cat_id = 21) DESC, (cat_id = 10) DESC, (cat_id = 25) DESC, (cat_id = 4) DESC; 
```

或者

```
SELECT cat_title
FROM table1
WHERE cat_id IN(21,10,25,4)
ORDER BY FIND_IN_SET(cat_id, ('21,10,25,4')); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-19T10:04:09.553

```
 SELECT cat_title FROM table1 
 Where cat_id IN(21,10,25,4)
 ORDER BY (
            CASE WHEN cat_id = 21 THEN 0
          WHEN cat_id = 4 THEN 1
              WHEN cat_id = 10 THEN 2
          WHEN cat_id = 25 THEN 3
        END
           ) 
```

# ruby-on-rails - 编写更简洁的 Ruby

> ID：12971781
> 
> 赞同：1
> 
> 时间：2012-10-19T09:57:37.767
> 
> 标签：ruby-on-rails, ruby

行`1.`及`5.`以下太长（我的理解是建议截断 80 个字符）。编写此代码的最佳方法是什么？**特别是条件的结构 - 有哪些替代代码格式选项**？

```
if @user.authenticate(params[:current_password]) && @user.update_attributes(params[:user])
  sign_in @user
  redirect_to @user, notice:["Profile update successful."]
else
  flash.now[:error] = @user.errors.full_messages unless @user.errors.full_messages.empty?
  render :edit
end 
```

谢谢！

## 更新

如果有帮助，请忽略我的代码。我最感兴趣的是条件结构及其格式的选项。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T10:23:04.553

第 5 行可以完全删除。渲染时无需使用闪光灯。仅在重定向时才需要。对于身份验证，您可能需要设置一个[`before_filter`](http://guides.rubyonrails.org/action_controller_overview.html#filters). 有了这个，您的代码可以如下所示：

```
class UsersController < ApplicationController
  before_filter :require_logged_in_user, :only => [:edit, :update]

  # Note: @user is set in require_logged_in_user
  def update
    if @user.update_attributes(params[:user])
      sign_in @user
      redirect_to @user, notice: "Profile update successful."
    else
      render :edit
    end
  end

  private

  def require_logged_in_user
    @user = User.find(params[:id])
    redirect_to '/login' unless @user.authenticate(params[:current_password])
  end
end 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-19T11:40:19.973

您正在合并 IMO 应分别处理的两个条件（保持干净的条件分支非常重要）。我会写：

```
if !@user.authenticate(params[:current_password]) 
  flash[:error] = "Authentication failed"
  render :edit
elsif !@user.update_attributes(params[:user])
  # are you sure about this one? Rails helpers should show these errors.
  flash[:error] = @user.errors.full_messages.to_sentence
  render :edit
else
  sign_in @user
  redirect_to @user, notice: "Profile update successful"
end 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-19T11:57:22.527

使用时`&&`，`||`您可以将条件拆分为多行：

```
if @user.authenticate(params[:current_password]) && 
   @user.update_attributes(params[:user])
     # I line up the conditionals
     # and indent the code after the conditionals further
     # just for clarity
else
  # ... 
```

但是，如果您发现有人使用的文本编辑器不换行超过 80 个字符，我的建议是告诉他们找一个可以执行或为他们的决定承担责任的编辑器。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-19T10:22:13.550

有关 ：

```
flash.now[:error] = @user.errors.full_messages unless @user.errors.full_messages.empty? 
```

您不必检查 full_messages 是否为空，当您传递一个空数组时不应渲染 flash。

但就个人而言，我会尝试只使用“撞”的方法，并拯救它们：

```
begin
  @user.authenticate!(params[:current_password])
  @user.update_attributes!(params[:user])
  sign_in @user
  redirect_to @user, notice: "Profile update successful"
rescue ActiveRecord::RecordInvalid => e # for example
  flash.now[:error] = @user.errors.full_messages
  render :edit
end 
```

但这可能只是个人口味。

# spring - 用于长时间运行的作业的 Spring Batch 或 JMS

> ID：12971782
> 
> 赞同：0
> 
> 时间：2012-10-19T09:57:41.303
> 
> 标签：spring, jakarta-ee, jms, spring-batch

我有一个问题，我必须在我的 Web 服务上运行很长时间的运行进程，现在我正在寻找一种处理结果的好方法。场景：用户通过 UI 执行如此长时间运行的进程。现在他收到消息，他的请求已被接受，他应该稍后再回来。所以没有必要向他显示他的请求状态或类似的东西。我只是在寻找一种方法来正确处理长时间运行的过程的结果。由于进程是外部程序，我的应用程序服务器不知道它们。因此我必须等待这些程序终止。当然，我不想为此使用 EJB，因为那样它们会在没有可用结果时阻塞。相反，我想到了使用 JMS 或 Spring Batch。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T10:17:20.747

这实际上取决于您的外部程序可用的通信形式。JMS 是一种非常好的方法，可以立即在您的应用服务器中使用，但如果您的外部程序是一个长时间运行的数据库查询，它将结果转储到文本文件中，则它可能不是最佳选择......

Spring Batch 与“仅”使用 JMS 作为异步通信通道相比的主要优势是事务属性，允许基础架构重试失败的作业、将作业组合在一起等。在不了解您的具体设置的情况下，很难给出详细的建议。

干杯，

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T12:07:01.133

我有类似的设计要求，用户正在发送 XML 文件，我必须从中生成文档。在这种情况下使用 JMS 是有利的，因为您始终可以添加这些进程的新实例，这些实例可以并行使用和执行作业。

您可以使用计时器任务来检查状态或监控这些进程。此外，您可以在流程完成后将消息发布到 JMS 队列。

# php - 函数返回引用完整的数组？- MySQLi 绑定参数

> ID：12971785
> 
> 赞同：0
> 
> 时间：2012-10-19T09:57:50.657
> 
> 标签：php, reference, mysqli

我一直在使用 MySQLi，并且在大多数情况下发现它非常有用，但 bind_param() 在涉及动态查询时会失败。无论如何我正在使用

```
call_user_func_array(array($stmt, 'bind_param'), $array_of_params); 
```

这让我可以解决这个问题，并且我的代码运行良好。但是有点混乱，因为我有各种 if 语句来确定 $array_of_params，像这样

```
if($switch=="coreSkill_only"){
            $array_of_params[0]='s';
            $array_of_params[1]=&$coreSkill;

        }else if($switch=="region_only"){
            $array_of_params[0]='s';
            $array_of_params[1]=&$region;

        }else if($switch=="coreSkill_region"){
            $array_of_params[0]='si';
            $array_of_params[1]=&$coreSkill;
            $array_of_params[2]=&$region;
        } 
```

因此，与其把处理实际查询执行的方法弄得乱七八糟，我决定像这样将所有有条件的东西都粘贴到它自己的方法中。

```
function &generateQueryDropDowns($coreSkill,$region){

$queryDetails=array();

$query="select id,title,location,salary,employer,image from jobs where";
$switch="";
$and=0;

$array_of_params=array();

if($coreSkill!="Any"){
    $query.=" coreSkill=?";
    $and=1;
    $override=1;
    $switch="coreSkill_only";
    $array_of_params[0]='s';
    $array_of_params[1]=&$coreSkill;
}
if($region!="Any"){
        if($and==1){
            $query.=" and";
            $switch="coreSkill_region";
            $array_of_params[0]='si';
            $array_of_params[1]=&$coreSkill;
            $array_of_params[2]=&$region;
        }else{
            $switch="region_only";
            $array_of_params[0]='s';
            $array_of_params[1]=&$region;
        }
    $query.=" region=?";
    $override=1;
}

$queryDetails['query']=$query;
$queryDetails['switch']=$switch;
$queryDetails['override']=$override;
$queryDetails['bind_params']=$array_of_params;

return $queryDetails;
} 
```

我像这样从原始方法中调用它

```
$foo = &$this->generateQueryDropDowns($coreSkill,$region);
$query=$foo['query'];
$switch=$foo['switch'];
$override=$foo['override'];
$array_of_params=$foo['bind_params'];

if($stmt = $connection->prepare($query)) {
call_user_func_array(array($stmt, 'bind_param'), $array_of_params);
etc.... 
```

但我收到以下关于参考的错误

```
 PHP Warning:  Parameter 2 to mysqli_stmt::bind_param() expected to be a reference 
```

根据[http://www.php.net/manual/en/language.references.return.php](http://www.php.net/manual/en/language.references.return.php)

据我所知，我做的一切都是正确的，以保持返回数组中的引用完好无损？

非常欢迎任何建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T10:32:26.403

事实证明，您也需要将参数作为引用传递。

所以

```
function &generateQueryDropDowns($coreSkill,$region){} 
```

变成

```
function &generateQueryDropDowns(&$coreSkill,&$region){} 
```

它现在按预期工作。

# neo4j - 为什么 neo4j 中的节点和关系有这个容量限制？

> ID：12971786
> 
> 赞同：12
> 
> 时间：2012-10-19T09:57:53.990
> 
> 标签：neo4j

我想知道为什么 neo4j 对节点和关系有容量限制。节点和关系的限制是 2^35 [1](http://docs.neo4j.org/chunked/stable/capabilities-capacity.html)，比“正常”的 2^32 整数“稍微”多一点。常见的 SQL 数据库，例如 mysql 将主键存储为 int(2^32) 或 bigint(2^64) [2](http://dev.mysql.com/doc/refman/5.1/en/numeric-types.html)。你能解释一下这个决定的好处吗？在我看来，这是选择数据库时的关键决策点。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-20T01:44:02.300

It is an artificial limit. They are going to remove it in the not-too-distant future, although I haven't heard any official ETA.

Often enough, you run into hardware limits on a single machine before you actually hit this limit.

The current option is to manually shard your graphs to different machines. Not ideal for some use cases, but it works in other cases. In the future they'll have a way to shard data automatically--no ETA on that either.

Update: I've learned a bit more about neo4j storage internals. The reason the limits are what they are exactly, are because the id numbers are stored on disk as pointers in several places (node records, relationship records, etc.). To increase it by another power of 2, they'd need to increase 1 byte per node and 1 byte per relationship--it is currently packed as far as it will go without needing to use more bytes on disk. Learn more at this great blog post: [http://digitalstain.blogspot.com/2010/10/neo4j-internals-file-storage.html](http://digitalstain.blogspot.com/2010/10/neo4j-internals-file-storage.html)

Update 2:
I've heard that in 2.1 they'll be increasing these limits to around another order of magnitude higher than they currently are.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-05-04T16:58:25.210

从 neo4j 3.0 开始，所有这些约束都被删除了。

> 动态指针压缩根据需要扩展了 Neo4j 的可用地址空间，从而可以存储任意大小的图形。没错：不再有 340 亿个节点限制！

欲了解更多信息，请访问[http://neo4j.com/blog/neo4j-3-0-massive-scale-developer-productivity](http://neo4j.com/blog/neo4j-3-0-massive-scale-developer-productivity)。

# android - 内容为 标记以在 Android 清单文件 (Titanium Studio) 中仅启用 Galaxy S3 和 Nexus

> ID：12971790
> 
> 赞同：0
> 
> 时间：2012-10-19T09:58:04.407
> 
> 标签：android, titanium

我必须在 android manifest 文件中指定什么内容才能使我的应用程序仅对**Galaxy S3 和 Nexus 7 用户**可用（并禁用所有其他用户）

我应该使用以下

`<screen android:screenSize="xlarge" android:screenDensity="xhdpi" />`

这个对吗？

**注意：**我在 Titanium Studio 中构建了我的应用程序。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T12:32:46.507

> 我必须在 android manifest 文件中指定什么内容才能使我的应用程序仅对 Galaxy S3 和 Nexus 7 用户可用（并禁用所有其他用户）

从清单来看这是不可能的。

> 这个对吗？

Galaxy S3 不是`-xlarge`设备。

Nexus 7 不是`-xlarge`设备，也不是`-xhdpi`设备。

此外，即使它们是，也有其他设备具有相同的规格。

如果您真的希望将您的应用程序限制为这两种特定设备的所有者，正如 Sabre 在评论中指出的那样，请使用 Google Play 开发者控制台。

# java - 用于数据处理的 Java 程序和用于结果绘图的 Matlab 代码

> ID：12971804
> 
> 赞同：-1
> 
> 时间：2012-10-19T09:59:01.690
> 
> 标签：java, matlab, batch-file, data-mining, matlab-figure

我是数据挖掘领域的初学者。在可视化任何有用的结果之前，我有一个数据需要处理。所以我做了以下事情：

1.  使用 Java 程序预处理数据（输出：txt 文件）（输入：文件名）
2.  将 .txt 文件转换为 .xls 文件（Excel 文件）
3.  在 MATLAB 中导入 excel 文件
4.  编写 Matlab 脚本在导入的数据上绘制一些图

我希望通过按下运行按钮来自动化这个过程，然后它会自动发生。

请指导我如何整合我的工作，而不是每次我只提供输入文件名时都执行这 4 个步骤，并且所有工作都一次性完成。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T10:12:17.440

您可以在 MATLAB 中使用任意 Java 类 - 它支持运行用户定义的类，甚至在它们和 MATLAB 之间传递数据。这将为您带来以下好处：

*   无需编写文本文件/XLS，然后将它们导入 matlab
*   在一个 MATLAB 脚本中编写所有内容 - 这就是 duffymo 的想法，只是您不需要任何 shell/批处理。一切都在 MATLAB 中完成
*   您可以添加一个 MATLAB 实现的 GUI 来处理该过程

看看[这个 SO 帖子](https://stackoverflow.com/questions/6983324/calling-java-from-matlab)以获得一些见解。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T10:01:09.480

您需要一种脚本语言：如果您在该平台上，则为 Windows 命令；Linux 上的 shell 脚本。

它可能不是一个按钮，因为这意味着一个 UI。您必须为此写出相当于申请的内容。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-19T10:11:50.793

java matlabcontrol 库可能会派上用场 [http://code.google.com/p/matlabcontrol/](http://code.google.com/p/matlabcontrol/)

前段时间我有一个类似的任务。Matlabcontrol 是一个将 MATLAB 连接到您的 Java 程序的库，并且非常易于使用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-19T10:18:24.970

所有步骤都可以在 Matlab 环境中完成。

Java 代码可以直接在 Matlab 中调用。只需将您的 java 类路径添加到 Matlab 中的 Classpath.txt 并在脚本代码中导入。

也许 CSV 数据文件更适合您的情况。

# assembly - 将另一个寄存器移动到 EBP 寄存器

> ID：12971805
> 
> 赞同：1
> 
> 时间：2012-10-19T09:59:02.210
> 
> 标签：assembly, x86

我了解 EBP 和 ESP 寄存器的基本语义，但我对以下内容感到有些困惑：

```
mov ebp, eax 
```

下一行是：

```
mov edi, dword ptr [ebp] 
```

我认为 ebp 寄存器是我们遍历堆栈的参考点，添加到它给我们参数，减去得到局部变量。那么通过将 eax 移动到 ebp，这不会引起问题吗？

我可以理解的说：

```
mov [ebp+12], eax 
```

我猜这是沿着将 eax 移动到 out 参数的路线？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-19T10:11:34.717

如果不查看更多代码，就不可能通过这些指令判断正在访问哪些实体。

`ebp`除了访问子程序参数和局部变量之外，x86 CPU 中没有任何东西可以阻止您使用其他东西。

在 32 位模式下，您也可以`esp`通过`[esp+something]`. 在 16 位模式下，您不能这样做，`sp`并且需要使用以下列表中的寄存器之一：`bp`, `bx`, `si`, `di`。

一些编译器可以选择使用`[esp+something]`而不是`[ebp+something]`访问堆栈上的数据。这为您购买了一个额外的通用寄存器，您可以将其用于其他用途。

只要您的代码不需要保留 的值，`ebp`或者只要它恢复`ebp`到预期值，执行 . 就不会发生任何不好的事情`mov ebp, eax`。

# java - Clickhandler 不会触发

> ID：12971808
> 
> 赞同：1
> 
> 时间：2012-10-19T09:59:14.387
> 
> 标签：java, gwt

我`ClickHandler`在使用 GWT 的项目中遇到问题。

在对话框的标题中，我想插入一个新按钮。

1.  我创建了一个新的插入方法：`addToTitle(...)`.
2.  我添加`ClickHandler`到按钮

问题：按钮的单击事件不会触发。为什么？

这是我的代码：

```
DialogBox dialog = new DialogBox();

Button button = new Button("A new Button");

       button.addClickHandler(new ClickHandler()
        {
            @Override
            public void onClick(ClickEvent event)
            {
                Window.alert("yuhuhuhu");

            }
        });

dialog.addToTitle(button); 
```

代码（摘自评论部分）：

```
public class PlentyDialogWindow extends DialogBox { 
    private FlowPanel captionPanel = new FlowPanel(); 
    public Widget closeWidget = null; 
    private boolean closeOnEscKey = false; 
    private FlowPanel titleContentWrapper = new FlowPanel(); 
    public PlentyDialogWindow(boolean isModal) { 
        super( false, isModal); 
        this.addStyleName("DialogBox"); 
        this.getElement().setId("DialogBoxId"); 
        this.setAnimationEnabled(true); 
        this.closeWidget = generateCloseButton(); 
    }

    public void setCaption( String txt,Widget w) { 
        captionPanel.setWidth("100%"); 
        this.addCaption(txt); 
        this.titleContentWrapper.getElement().getStyle().setDisplay(Display.INLINE_BLOCK); 
        captionPanel.add(this.titleContentWrapper); 
        FlowPanel widgetWrapper = new FlowPanel(); 
        widgetWrapper.add(w); 
        widgetWrapper.addStyleName("PlentyPopupCloseIconWrapper"); 
        captionPanel.add(widgetWrapper); 
        captionPanel.addStyleName("Caption"); 
        Element td = getCellElement(0,1); 
        td.setInnerHTML(""); 
        td.appendChild(captionPanel.getElement()); 
    }

    /** * * @param w */ public void addToTitle(Widget w) { 
        this.titleContentWrapper.add(w); 
    } 
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-28T11:36:24.230

如果您唯一的问题是没有调用 ClickHandler，请尝试使用 addDOMHandler 而不是 addClickHandler

```
yourWidget.addDomHandler(new ClickHandler() {

  @Override
  public void onClick(ClickEvent event) {

  }
},ClickEvent.getType()); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-20T14:30:24.083

解决方案有点棘手。

```
public class PlentyDialogWindow extends DialogBox {

    /* 
     * Create custom inner class extending `FlowPanel`. You need it only
     * to make `onAttach` and `onDetach` methods be visible to wrapping 
     * class (e.g. your `PlentyDialogWindow` class).
     */
    static class MyCaptionPanel extends FlowPanel {

        @Override
        protected void onAttach() {
            super.onAttach();
        }

        @Override
        protected void onDetach() {
            super.onDetach();
        }
    }

    /* 
     * `PlentyDialogWindow`'s field `captionPanel` will be an instance of 
     * this class.
     */
    private MyCaptionPanel captionPanel = new MyCaptionPanel();

    /*
     * ... leave the rest of your class untouched ...
     */

    /*
     * Finally, overwrite `PlentyDialogWindow`'s `onAttach` and `onDetach` 
     * methods to invoke `captionPanel`'s corresponding methods:
     */
    @Override
    protected void onAttach() {
        super.onAttach();
        captionPanel.onAttach();
    }

    @Override
    protected void onDetach() {
        super.onDetach();
        captionPanel.onDetach();
    }
} 
```

就这样。

# asp.net - 需要同时调试 asp 和 silverlight 解决方案

> ID：12971819
> 
> 赞同：0
> 
> 时间：2012-10-19T09:59:46.950
> 
> 标签：asp.net, visual-studio-2010, silverlight

我有两种解决方案，一种是 asp.net，另一种是 silverlight 解决方案。它们都托管在我的本地服务器上。我需要的是同时调试两个解决方案，在 asp 解决方案中，我有一个带有类似代码的页面

```
<iframe src="http://localhost/UI_RegInc/UI_RegInc.aspx?UserId=<%=UserId%>"
    frameborder="0" height="620" scrolling="no" width="1000" marginheight="0" marginwidth="0">
</iframe> 
```

在这里，我正在调用 UI_RegInc silverlight 应用程序，其中 UI_RegInc.aspx 页面正在调用我想要调试的 silverlight 应用程序。我尝试的是启动asp应用程序，然后在VS的另一个实例中我启动silverlight应用程序，它是UI_RegInc，在这个实例中试图将它附加到带有asp应用程序的iexplorer进程。但没有得到积极的结果。还尝试附加到 webdev 进程。繁琐的解释，但希望能理解。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T11:07:38.320

将您的 ASP.NET 和 Silverlight 项目添加到通用解决方案中，Visual Studio 调试器将在调试网站项目时自动附加到 Silverlight 应用程序。您不能将两个单独的 Visual Studio 实例附加到同一个 Internet Explorer 实例，因此您必须将两者都添加到同一个解决方案并从那里进行调试。

您可以将 Silverlight 项目添加到您现有的 ASP.NET 解决方案（右键单击解决方案，添加 -> 现有项目）或创建一个新的解决方案，以便同时调试两者（创建一个新的空白解决方案并添加现有项目，与以前相同）。

这是之后逐步配置所有内容的过程。您可以在此处将此源文件下载到测试解决方案：

[http://www.singulink.com/ClientFiles/StackOverflow/CrossProjectTest.zip](http://www.singulink.com/ClientFiles/StackOverflow/CrossProjectTest.zip)

项目如下：

*   CrossProjectTest - Silverlight 4 项目
*   CrossProjectTest.Web - 在 Index.html 中托管 Silverlight 应用程序的 ASP.NET 项目
*   IFrameWebApp -`<iframe>`指向另一个 ASP.NET 项目中的 Index.html 的 ASP.NET 项目

1) 在托管 Silverlight 应用程序的 ASP.NET 项目中，更改设置以使其在调试时不打开页面并指定端口，以便您始终可以通过已知地址访问它（在这种情况下为`http://localhost:18000`）。您不希望它打开页面，因为 IFrame ASP.NET 项目具有您要显示的实际页面。不过，我们仍然希望它能够将调试器挂接到 Web 服务器进程中，这就是第 3 步的用武之地。

![设置端口和启动动作](../Images/84f4a1d088593af296be2550487491ef.png)

`src`2)将您在 IFrame 项目中的属性指向`iframe`另一个 ASP.NET 项目中托管 silverlight 应用程序的页面的已知地址，如下所示：

```
<iframe width="100%" height="100%" src="http://localhost:18000/Index.html"></iframe> 
```

3) 右键单击**​​解决方案**文件，然后选择属性。在“启动项目”下，您需要选择“多个启动项目”并将两个 ASP.NET 项目的启动操作设置为“启动”。

![设置多个启动项目](../Images/6332d51bcf948f8d42fea70bdac1e3e2.png)

4) 确保在两个 ASP.NET 项目中都启用了 Silverlight 调试，尤其是针对此特定场景的 IFrame 项目：

![在此处输入图像描述](../Images/7df44f724faf919b77d07bf024e10ae0.png)

5) 在您的 Silverlight 应用程序中设置断点，按 F5，一切都应该启动。因为您将两个 ASP.NET 项目都设置为启动，所以它将启动两个开发 Web 服务器，但只有一个 Internet 浏览器指向 IFrame 项目。我在 Silverlight 项目的 App Startup 中添加了一个断点，只是为了证明它受到了影响：

![在此处输入图像描述](../Images/fbb940e18c178b2bc993e478ed14aec4.png)

6) 按 F5 继续执行，Silverlight 应显示在 IFrame 中，如下所示：

![在此处输入图像描述](../Images/5b6f8d4c4cefa1cd7592a68cd9b324db.png)

7) 愉快地在三个项目中的任何一个中放置断点，Visual Studio 将调试它们！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T11:13:50.413

您必须在托管 Silverlighth 应用程序的 Web 项目上检查 Silverlight。

![在此处输入图像描述](../Images/10b82b9e091a7eb9fca6de55a01f13dd.png)

# ios - Cocos2d：一旦取消选择，我怎样才能让 CCMenu 项目调用选择器？

> ID：12971820
> 
> 赞同：1
> 
> 时间：2012-10-19T09:59:47.430
> 
> 标签：ios, cocos2d-iphone, ccmenuitem

取消选择后，如何让 CCMenu 项目调用选择器？

这甚至可能吗？

添加 CCMenuItem 时，我可以将选择器指定为在按钮激活时调用的函数。我想要的是一旦不再“选择”按钮（我的意思是选择但未激活），就能够调用一个函数。

我想我必须重写一些方法，但不确定是哪一个:)。

有什么建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T16:14:06.463

子类 CCMenuItemWhatever 并覆盖一个方法（从 CCMenuItem 派生）：

```
-(void) unselected{
    [super unselected];
    [self myUnselectedExtension];
}

-(void) myUnselectedExtension{
    // whatever is your need , do it here.
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-19T10:22:46.840

不修改 CCMenu 是不可能的。

但是，您可以运行计划更新并检查`selected`菜单项的每个属性，并观察与先前选择的状态（例如存储在 ivar 中）相比的任何变化。

# android - ListFragment 显示错误的项目

> ID：12971822
> 
> 赞同：1
> 
> 时间：2012-10-19T09:59:53.537
> 
> 标签：android

我是 android api 的新手，我对.. 基础有一些问题。我正在尝试使列表正常工作，但列表显示错误的文本：

每行有两个TextView（标题，副标题），这是xml：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:orientation="horizontal"
    android:padding="5dip" >

    <TextView
        android:id="@+id/row_title"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="TITLE"
        android:textSize="15dip"
        android:layout_gravity="center_vertical" />

    <TextView
        android:id="@+id/row_subtitle"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_below="@+id/row_title"
        android:text="SUBTITLE"
        android:textSize="10dip"
        android:layout_gravity="center_vertical" />

</RelativeLayout> 
```

我扩展了 ListFragment（我需要这个片段，因为有一个slidingMenu 库），有一个自定义适配器和一个项目类。在 onActivityCreated() 方法中，我向适配器添加了一些随机项：

```
package com.slidingmenu.example;

import android.app.Fragment;
import android.app.ListFragment;
import android.content.Context;
import android.os.Bundle;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.widget.ArrayAdapter;
import android.widget.TextView;

public class SampleListFragment extends ListFragment {

    public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {
        return inflater.inflate(R.layout.list, null);
    }

    public void onActivityCreated(Bundle savedInstanceState) {
        super.onActivityCreated(savedInstanceState);

        SampleAdapter adapter = new SampleAdapter(getActivity());
        for (int i = 0; i < 20; i++) {
            adapter.add(new SampleItem(new Fragment(), "title no. " + i, "some subtitle"));
        }
        setListAdapter(adapter);
    }

    private class SampleItem {
        public Fragment frag;
        public String title;
        public String subTitle;
        public SampleItem(Fragment frag, String title, String subTitle) {
            this.frag = frag; 
            this.title = title; 
            this.subTitle = subTitle;
        }
    }

    public class SampleAdapter extends ArrayAdapter<SampleItem> {

        public SampleAdapter(Context context) {
            super(context, 0);
        }

        public View getView(int position, View convertView, ViewGroup parent) {
            if (convertView == null) {
                convertView = LayoutInflater.from(getContext()).inflate(R.layout.row, null);
            }
            TextView title = (TextView) convertView.findViewById(R.id.row_title);
            TextView subTitle = (TextView) convertView.findViewById(R.id.row_subtitle);

            return convertView;
        }

    }
} 
```

所以我认为该列表会显示如下内容：

```
title no. 0
some subtitle
-
title no. 1
some subtitle
-
title no. 2
some subtitle
-

etc. 
```

但它只是显示我在 row.xml 中定义的内容：

```
TITLE
SUBTITLE
-
TITLE
SUBTITLE
-

etc. 
```

我认为 getView() 需要更改（至少对我来说没有多大意义），但我不确定。我尝试的一切都会导致一些空指针异常或更糟。

拜托，有人能告诉我我需要改变什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T10:05:00.780

错误在适配器中：

```
 public View getView(int position, View convertView, ViewGroup parent) {
            if (convertView == null) {
                convertView = LayoutInflater.from(getContext()).inflate(R.layout.row, null);
            }
            TextView title = (TextView) convertView.findViewById(R.id.row_title);
            TextView subTitle = (TextView) convertView.findViewById(R.id.row_subtitle);

            return convertView;
        } 
```

`getView`永远不会填满`title`and `subtitle`。其次，您永远不会提交`superclass`要在`ListFragment`.

在这里你必须有办法。或者您使用[此](http://developer.android.com/reference/android/widget/ArrayAdapter.html#ArrayAdapter%28android.content.Context,%20int,%20java.util.List%3CT%3E%29)构造函数覆盖`getCount`and`getItem`和`getItemId`方法，或使用数据集为超类提供数据。仔细阅读文档。

# algorithm - 最大非重叠子集？

> ID：12971827
> 
> 赞同：1
> 
> 时间：2012-10-19T10:00:06.703
> 
> 标签：algorithm

给定 100 个不同项目的 100 个（可能相交）子集，可以选择的最大子集数是多少，使得它们不重叠。

一种方法是：

```
for i in 100 downto 0
   foreach choice C of (100 choose i) subsets:
      if (no two elements of C overlap)
          return i; 
```

但显然这太慢了。有多项式时间解吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T10:06:04.097

这是[Set packing](http://en.wikipedia.org/wiki/Set_packing)，一个经典的 NP 完全问题。没有多项式时间解。

# php - 如何在 magento 中添加 wordpress 投票？

> ID：12971839
> 
> 赞同：0
> 
> 时间：2012-10-19T10:00:48.887
> 
> 标签：php, wordpress, magento

我想将 wordpress poll 包含到 magento 站点，fishpig 模块与 magento 站点集成，我还安装了 wordpress poll，但是我们如何向 magento 前端显示 wordpress poll 功能，例如 wordpress poll 外观及其基于 ajax 的功能及其验证和所有的东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T05:28:39.527

I would suggest using a Magento poll module to do this, Fishpig is designed more to display Magento products in a Wordpress page, it's not so strong at displaying Wordpress content in Magento.

You could contact the Fishpig developer (Ben) - help at fishpig dot co dot uk for free advice and/or paid assistance.

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-11-06T09:53:08.267

请去

```
 admin/system/configuration/advanced/ 
```

并启用 Mage_poll

# javascript - 如何避免表格布局避免表格的某些元素？

> ID：12971843
> 
> 赞同：1
> 
> 时间：2012-10-19T10:00:59.683
> 
> 标签：javascript, jquery, html, css

所以我一直在尝试使用固定的表格布局，以便内容得到它的最大宽度，但我不希望所有数据都发生这种情况。其中一些需要内容本身的宽度，而不是它们在同一行中的兄弟。这是代码

```
 <table>
    <tbody>
     <tr>
        <td>&nbsp;</td>
        <td>&nbsp;</td>
        <th>2012</th>
        <th>2011</th>
        <th>Var</th>
     </tr>
     <tr>
        <td class="day">M</td>
        <td class="date">3</td>
        <td>300,500</td>
        <td>300,500</td>
        <td>0%</td>
     </tr>
     <tr>
        <td class="day">T</td>
        <td class="date">4</td>
        <td>300,500</td>    
        <td>300,500</td>
        <td>0%</td>
     </tr>
  </tbody> 
```

这是CSS

```
table {
    float: left;
    width: 100%;
    height: auto;
    margin-top: 20px;
    table-layout: fixed;
    display: table;
    }
table tr{
   border-bottom: 1px solid #ccc;
   width: 100%;
}
table tr th{
    text-align: center;
}
table tr td{
    display: table-cell;
    text-align: center;        
} 
```

所以问题是我希望具有类日期和日期的 td 具有自己的宽度，例如 width = auto 以避免表格单元格功能。你的建议我应该怎么做。我可以在 CSS 中执行此操作，还是为此编写一个脚本。

# iphone - 在ios的表格视图中选择第一项

> ID：12971844
> 
> 赞同：0
> 
> 时间：2012-10-19T10:01:04.303
> 
> 标签：iphone, ios, ipad

如果 tableview 正在使用的数组计数为 1，那么如何选择表中的第一行我使用了它正在选择但不导航到下一个屏幕的以下代码

```
 NSIndexPath * ip =[NSIndexPath indexPathForRow:0 inSection:0];
    [npTable selectRowAtIndexPath:ip animated:YES scrollPosition:UITableViewScrollPositionNone]; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T10:18:13.857

您必须为 uitabelview 使用一些委托方法

1.  你必须添加 UITableViewDataSource，UITableViewDelegate。
2.  您必须添加 uitabelview 的委托方法，即）

添加委托方法如下。

```
-(void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
    //here you have to write the code for to navigate next screen.
    sample *sampleobject=[[sample alloc]init];
    [self.navigationController pushViewController:sampleobject animated:YES];
} 
```

这就是它享受现在你可以导航到另一个页面..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T10:05:24.640

这只会突出显示表格单元格。您需要调用出现在 tableView:didSelectRowAtIndexPath 方法中的代码，或者您可以自己调用它，如下所示：

```
NSIndexPath * ip =[NSIndexPath indexPathForRow:0 inSection:0];
[self tableView: npTable didSelectRowAtIndexPath: ip]; 
```

# sql - 打开连接，连接字符串，我的数据库名称是什么？

> ID：12971845
> 
> 赞同：1
> 
> 时间：2012-10-19T10:01:04.723
> 
> 标签：sql, sql-server, vb.net, ado

我的公司给了我一个 VBcode 来工作。我有一个必须运行的 SQL 文件才能在我的数据库中创建表。我必须在我的 vb.net 上打开连接的连接字符串如下：

```
"Provider=SQLOLEDB.1;Integrated Security=SSPI;Persist Security Info=False;Initial Catalog=Test;Data Source=DATOR06" 
```

我需要知道他们的数据库名称是什么，这样我才能在我自己的本地 PC 上创建类似的东西。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-19T13:28:50.737

在连接字符串中 Initial Catalog 代表数据库名称。在您的情况下，“测试”是您的数据库名称。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-19T10:02:42.297

在`Initial Catalog=Test`您的实例中，数据库名称为测试，数据源为 DATOR06。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-19T10:05:46.343

```
Initial Catalog=Test 
```

`Test`是数据库名称，在连接字符串中`Initial Catalog`代表数据库名称。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-19T10:02:40.630

`Initial Catalog`告诉您数据库的名称，在本例中为 Test

# java - 使 Spring 3 MVC 控制器方法具有事务性

> ID：12971848
> 
> 赞同：5
> 
> 时间：2012-10-19T10:01:31.383
> 
> 标签：java, spring, hibernate, jakarta-ee, spring-mvc

我正在使用 Spring 3.1 并编写了我的 DAO 和服务层（事务）。

但是在特殊情况下，为了避免惰性初始化异常，我必须创建一个 spring mvc 请求处理程序方法@transactional。但它未能将事务附加到该方法。方法名称是 ModelAndView home(HttpServletRequest request, HttpServletResponse response)。 [http://forum.springsource.org/showthread.php?46814-Transaction-in-MVC-Controller](http://forum.springsource.org/showthread.php?46814-Transaction-in-MVC-Controller) 从这个链接似乎不可能将事务（默认）附加到 mvc 方法。该链接中建议的解决方案似乎适用于 Spring 2.5（覆盖 handleRequest ）。任何帮助将不胜感激。谢谢

```
@Controller
public class AuthenticationController { 
@Autowired
CategoryService categoryService;    
@Autowired
BrandService brandService;
@Autowired
ItemService itemService;

@RequestMapping(value="/login.html",method=RequestMethod.GET)
ModelAndView login(){       
    return new ModelAndView("login.jsp");       
}   
@RequestMapping(value="/home.html",method=RequestMethod.GET)
@Transactional
ModelAndView home(HttpServletRequest request, HttpServletResponse response){
    List<Category> categories = categoryService.readAll();
    request.setAttribute("categories", categories);     
    List<Brand> brands = brandService.readAll();
    request.setAttribute("brands", brands);     
    List<Item> items = itemService.readAll();
    request.setAttribute("items", items);
    Set<Image> images = items.get(0).getImages();
    for(Image i : images ) {
        System.out.println(i.getUrl());
    }
    return new ModelAndView("home.jsp");    
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-19T10:05:27.433

您需要实现一个接口，以便 Spring 有一些可以用作代理接口的东西：

```
@Controller
public interface AuthenticationController {
  ModelAndView home(HttpServletRequest request, HttpServletResponse response);
}

@Controller
public class AuthenticationControllerImpl implements AuthenticationController {

@RequestMapping(value="/home.html",method=RequestMethod.GET)
@Transactional
@Override
ModelAndView home(HttpServletRequest request, HttpServletResponse response){
.....
}
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-19T10:36:57.260

Spring 将使用 JDK 动态代理来实现事务逻辑，这些代理依赖于实现合适接口的代理类。也可以使用不需要接口的 CGLib 代理。

有一篇关于这个[链接的好文章](http://blog.springsource.org/2012/05/23/understanding-proxy-usage-in-spring/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-05-17T15:15:50.940

我不确定这是否适用于您的情况，但如果您使用单独的 DI 上下文，您还应该考虑 Spring 如何编织方面。

Spring 只会将语义应用于使用or`@Transactional`的相同 DI 上下文中的 bean 。`@EnableTransactionManagement``<tx:annotation-driven/>`

因此，如果您在根上下文中定义事务配置，则仅涵盖该上下文中的 bean，这通常意味着仅业务服务。您需要在您还使用`@Transactional`.

参考： [Spring AOP - 如何使父上下文中定义的方面在子上下文中工作？](https://stackoverflow.com/questions/17836041/spring-aop-how-to-make-aspects-defined-in-a-parent-context-work-in-child-conte)

# iphone - 在 iPhone 中保持选择 UIButton 一小部分时间？

> ID：12971851
> 
> 赞同：0
> 
> 时间：2012-10-19T10:01:38.853
> 
> 标签：iphone, xcode4, uibutton

如何`UIButton`在选择时保持自定义突出显示约 5 秒钟，然后重定向到其他视图？在我的代码中，它在选择时不显示任何颜色，而是重定向到其他视图。

这是我的代码：

```
-(UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
 CGRect rect=CGRectMake(0+70*j,yy,79,40);
            UIButton *button=[[UIButton alloc] initWithFrame:rect];
            [button setFrame:rect];
            [button setContentMode:UIViewContentModeLeft];
            button.titleLabel.font = [UIFont systemFontOfSize:14];
            NSString *settitle=[NSString stringWithFormat:@"%@",item.TimeStart];
            [button setTitle:settitle forState:UIControlStateNormal];
            NSString *tagValue=[NSString stringWithFormat:@"%d%d",indexPath.section+1,i];
            button.tag=[tagValue intValue];
            [button setTitleColor:[UIColor blackColor] forState:UIControlStateNormal];
            [button setShowsTouchWhenHighlighted:YES];     
            [button addTarget:self action:@selector(buttonPressed:) forControlEvents:UIControlEventTouchUpInside ];
            [hlcell.contentView addSubview:button];
            [button release];
}

-(IBAction)buttonPressed:(id)sender
{
    [sender setBackgroundColor:[UIColor cyanColor]];
    Login *lgn=[[Login alloc] init];
    [self presentModalViewController:lgn animated:NO];
    [lgn release];
} 
```

我该怎么做 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T10:27:08.220

您必须设置`setShowsTouchWhenHighlighted:yes`为 UIButton。

例如：

```
UIButton *click_btn=[UIButton buttonWithType:UIButtonTypeCustom];
    click_btn.frame=CGRectMake(238,10, 70, 70);
    [click_btn setTag:indexPath.row];
    [click_btn setShowsTouchWhenHighlighted:YES];
    [click_btn addTarget:self action:@selector(sample) forControlEvents:UIControlEventTouchUpInside];
    [cell.contentView addSubview:click_btn]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T11:32:51.690

我不建议使用 sleep() ，因为这会使所有线程休眠并使应用程序基本上死了 x 秒。

按照上面的说明突出显示按钮，然后使用

```
[self performSelector:@selector(sample) withObject:self afterDelay:5.0f];

-(void)sample
{
     UIViewController *myNewController = [[UIViewController alloc]init];
    enter code here
    [self presentModalViewController:myNewController animated:YES];
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-19T11:18:45.340

您只需在该方法中添加 sleep(5);

例如：

这是用户示例 uibutton 操作方法。

-（无效）样本{

睡眠（5）；

sampleclass *classobject=[[sampleclass alloc]init]; [self.navigationController pushViewController:classobject Animation:YES];

}

# sql - SQL UNPIVOT？这是我应该使用的吗？

> ID：12971854
> 
> 赞同：1
> 
> 时间：2012-10-19T10:01:52.800
> 
> 标签：sql, union, unpivot

所以我有这个数据结构

```
ID  DATE1     STATUS1 DATE2    STATUS2
1   1/1/2012  1       1/1/2012 3
1   3/1/2012  1       1/2/2012 3 
2   2/1/2012  1       3/4/2012 3
3   4/1/2012  1       NULL     3
4   2/1/2012  1       6/2/2012 3 
```

我怎么去...

```
ID  DATE      STATUS
1   1/1/2012  1
1   1/1/2012  3
1   3/1/2012  1       
1   1/2/2012  3
2   2/1/2012  1       
2   3/4/2012  3
3   4/1/2012  1       
3   NULL      3
4   2/1/2012  1       
4   6/2/2012  3 
```

我最初的猜测可能是使用很多联合的 unpivots？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T10:04:28.413

您可以为此使用联合：

```
select id, date1 mydate, status1 status
from mytable
union all
select id, date2 mydate, status2 status
from mytable 
```

如果你想删除欺骗，只需替换`union all`为`union`

注意：我已经命名了结果日期列`mydate`，因为日期可能是您使用的任何 dbms 中的保留关键字。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-19T10:05:03.557

此处不需要 UNPIVOT。普通的旧 UNION ALL 就足够了。

```
 SELECT ID, DATE1 DATE, STATUS1 STATUS
     FROM TBL
UNION ALL
   SELECT ID, DATE2 DATE, STATUS2 STATUS
     FROM TBL
 ORDER BY ID, DATE, STATUS 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-19T10:05:22.550

我认为在您的情况下，一个简单的 UNION 会有所帮助：

```
select ID,  DATE1, STATUS1 FROM your_table
union 
select ID, DATE2, STATUS2 FROM your_table 
```

# azure - VPN 访问 Azures 托管的虚拟服务器

> ID：12971856
> 
> 赞同：1
> 
> 时间：2012-10-19T10:02:00.003
> 
> 标签：azure, windows-server-2008, vpn

我正在使用一些托管的 2008R2 服务器来测试 Azures 云中的场景，它们似乎在大多数情况下都运行良好。

我需要客户端通过 VPN 直接访问服务器，以便他们对服务器具有完整的 IP 访问权限，例如 SMB NET USE 驱动器映射，否则将无法通过 Internet 访问。

通常，您只需安装 RRAS 并配置 VPN。

但在这些虚拟机上，来自远程 VPN 客户端的连接失败。我正在转发正确的端点（我相信），PPTP 为 47 和 1723，IPSEC 为 50/51/500。但他们没有通过。

服务器正在侦听这些端口。

我的所有搜索似乎都表明您需要使用“Azures connect”进行 VPN 访问，这是否意味着您不能直接访问客户端的服务器？我不想走 Azures Connect 路线，因为我只是在玩/测试，不想使用任何专有方法。

确认这是不可能的，这有助于让我免于发疯。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T12:56:50.233

Azure Connect 是一个非常好的开始方式；它是一项 Azure 服务，所以我不确定您为什么不愿意使用它。我会关注表现；VPN很可能会更快。这是我关于 Azure Connect 如何工作以及我为使其工作所采取的步骤的博客文章：http: [//geekswithblogs.net/hroggero/archive/2012/10/18/how-to-create-a-virtual-network-与-azure-connect.aspx](http://geekswithblogs.net/hroggero/archive/2012/10/18/how-to-create-a-virtual-network-with-azure-connect.aspx)

关于 VPN，预览版仅支持某些设备。有关支持的设备和协议要求的完整列表，请参阅 MSDN：http: [//msdn.microsoft.com/en-us/library/windowsazure/jj156075.aspx](http://msdn.microsoft.com/en-us/library/windowsazure/jj156075.aspx)

# iphone - 在不重启设备的情况下禁用主页按钮

> ID：12971857
> 
> 赞同：14
> 
> 时间：2012-10-19T10:02:01.477
> 
> 标签：iphone, objective-c, ios

我希望从 OTA 安装我的应用程序后，设备的主页按钮将根本不起作用，因此用户无法从应用程序中出来。我的挖掘使我得到以下结果

A）我有一种方法可以通过[“mobileconfig”](https://dl.dropboxusercontent.com/u/37581115/mobileconfig/pkk.mobileconfig)配置文件禁用主页按钮，但它需要重新启动设备，并且用户必须在启动后打开我的应用程序，我想这样做而不用非监狱上的私有框架之类的东西重新启动- 损坏的设备。我想知道非越狱设备有可能吗？

C）如果无法使用私有框架禁用主页按钮，那么有什么方法可以在启动设备后立即打开应用程序？因为某些越狱应用程序/进程在启动时会加载。

[注意：我不想将我的应用程序提交到 iTunes。]

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-11-01T06:56:57.113

在 iOS6 中，有一个名为“引导访问”的功能，它允许设备所有者将用户（如幼儿和学童）锁定到应用程序中。

这解释[了 iOS 6 应用程序的引导式访问](http://appadvice.com/appnn/2012/09/new-feature-in-ios-6-how-to-use-guided-access)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-08T03:00:27.430

如果您能够越狱您的设备，请创建一个 LaunchDaemon 或使用现有的。LaunchDaemon 是一个 plist 格式的文件，在重新启动和启动设备时会调用它。您还需要一个名为`open`由 K3A 创建的文件

`open`从[这里](http://ae.k3a.me/open.zip)下载

你需要移动`open`到 /usr/bin/ 或者你可以把它放在你的应用程序中没关系，但将权限设置为`0755 and root:wheel`

现在到 LaunchDaemons，它们存储在这里

```
/System/Library/LaunchDaemons 
```

这是一个例子。假设您将 LaunchDaemon 命名为

```
com.gauravstomar.test.plist 
```

在上面写着`com.bundle.identifier`放置您的应用程序标识符的地方，您也可以在您`Info.plist`的应用程序目录中找到它`CFBundleIdentifier`

现在在 plist 中插入以下信息

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE plist PUBLIC "-//Apple Computer//DTD PLIST 1.0//EN" 
"http://www.apple.com/DTDs/PropertyList-1.0.dtd">
<plist version="1.0">
<dict>
    <key>Label</key>
    <string>com.gauravstomar.test</string>
    <key>ProgramArguments</key>
        <array>
          <string>open</string>
          <string>com.bundle.identifier</string>
        </array>
    <key>RunAtLoad</key>
    <true/>
        <key>StartInterval</key>
        <integer>1</integer>
</dict>
</plist> 
```

> 标签必须与 LaunchDaemon.plist 同名，不包括 plist 扩展名
> 
> ProgramArguments 是什么调用文件打开并启动应用程序
> 
> RunAtLoad 使此 plist 在重新启动时启动
> 
> 如果用户退出应用程序，StartInterval 将使 LaunchDaemon.plist 在 1 秒后重新打开，如果用户仍在应用程序中，则不会发生任何事情

确保您的 LaunchDaemon 的权限设置为

```
0644 root:wheel 
```

您仍然可以使用您的 mobileconfig，以便禁用主页按钮。评估完成后，您可以禁用 LaunchDaemon，以便应用程序停止使用以下命令重新启动自身 `launchctl unload/System/Library/LaunchDaemon/com.gauravstomar.plist`

如果您需要更多帮助，请告诉我。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-01T06:59:33.790

这个问题的官方回答是“你不能在 ios 设备中禁用主页按钮，它是操作系统级别的架构，你没有被授权。”

您需要深入了解操作系统流程以进行任何可能非常困难的更改。

好吧，如果您改变视线，那么在 ios 6 中有一个开放且简单的解决方案，称为引导访问。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-22T19:31:43.843

如果没有越狱，该应用程序将被沙盒化。该应用程序根本无法使用主页按钮。而且你真的不应该弄乱主页按钮。

除了“引导访问”之外，您还可以使用“限制”，这将允许您禁用所有接受打开应用程序的内容。您可以禁用包括 Safari 在内的 Apple 特定应用程序，并阻止用户安装应用程序、删除应用程序、进行购买等...

我们有许多 iPod touch 带有我们出租给客户的票务扫描应用程序。我们利用“限制”来禁用除我们的应用程序之外的所有内容。迄今为止，最有用的限制是防止人们删除应用程序——令人难以置信的是，有多少人会意外删除应用程序，即使在警告提示之后也是如此。

# php - Google 日历 - XML 提要不正确

> ID：12971859
> 
> 赞同：0
> 
> 时间：2012-10-19T10:02:08.137
> 
> 标签：php, google-calendar-api

我正在使用以下代码获取 Google 日历 XML 提要。

我的问题是我在 URL 中设置了“singleevents=true”，但是当我实际查看提要时，它显示了 24 个条目，其中只有一个是唯一的，而其余的都是一个事件的重复。

在我的日历中，我有 1 个单一事件和 6 个事件，每个事件每周重复一次。

```
$api = new clApi('http://www.google.com/calendar/feeds/' . $calendarID .'/public/full?singleevents=true&amp;min-start=' . $now . '&amp;max-start=' .$next_week);

    if ($feed = $api->parse()) {            
        foreach($feed->get('entry') as $entry) {
..... 
```

我在这里做错了吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-10T10:35:45.230

我认为您具有向后参数的语法。根据[https://developers.google.com/google-apps/calendar/v2/reference#Parameters](https://developers.google.com/google-apps/calendar/v2/reference#Parameters)上的文档：*“有效值为 true（扩展重复事件）或 false（将重复事件表示为单个事件）。默认是假的。”*

# php - iPhone SDK 付款后，我的 php IPN 回调中缺少 POST 参数

> ID：12971862
> 
> 赞同：0
> 
> 时间：2012-10-19T10:02:16.717
> 
> 标签：php, ios, callback, paypal, paypal-ipn

我正在使用适用于 iOS 的 Paypal SDK 1.6。我有一个 IPN 回调 php 脚本，当我从 IPN Paypal 模拟器测试时，它工作正常（付款验证）当我从 iPhone 付款测试时，我缺少一些 POST 参数。

**编辑：代码**

```
<?php
// Revision Notes
// 11/04/11 - changed post back url from https://www.paypal.com/cgi-bin/webscr to https://ipnpb.paypal.com/cgi-bin/webscr
// For more info see below:
// https://www.x.com/content/bulletin-ip-address-expansion-paypal-services
//"ACTION REQUIRED: if you are using IPN (Instant Payment Notification) for Order Management and your IPN listener script is behind a firewall that uses ACL (Access Control List) rules which restrict outbound traffic to a limited number of IP addresses, then you may need to do one of the following: 
// To continue posting back to https://www.paypal.com  to perform IPN validation you will need to update your firewall ACL to allow outbound access to *any* IP address for the servers that host your IPN script
// OR Alternatively, you will need to modify  your IPN script to post back IPNs to the newly created URL https://ipnpb.paypal.com using HTTPS (port 443) and update firewall ACL rules to allow outbound access to the ipnpb.paypal.com IP ranges (see end of message)."

// read the post from PayPal system and add 'cmd'
$req = 'cmd=_notify-validate';

foreach ($_POST as $key => $value) {
$value = urlencode(stripslashes($value));
$req .= "&$key=$value";
}

// post back to PayPal system to validate

$header = "POST /cgi-bin/webscr HTTP/1.0\r\n";

    // If testing on Sandbox use: 
     $header .= "Host: www.sandbox.paypal.com:443\r\n";
//$header .= "Host: ipnpb.paypal.com:443\r\n";
$header .= "Content-Type: application/x-www-form-urlencoded\r\n";
$header .= "Content-Length: " . strlen($req) . "\r\n\r\n";

    // If testing on Sandbox use:
    $fp = fsockopen ('ssl://www.sandbox.paypal.com', 443, $errno, $errstr, 30);
//$fp = fsockopen ('ssl://ipnpb.paypal.com', 443, $errno, $errstr, 30);

// assign posted variables to local variables
$item_name = $_POST['item_name'];
$item_number = $_POST['item_number'];
$payment_status = $_POST['payment_status'];
$payment_amount = $_POST['mc_gross'];
$payment_currency = $_POST['mc_currency'];
$txn_id = $_POST['txn_id'];
$receiver_email = $_POST['receiver_email'];
$payer_email = $_POST['payer_email'];

if (!$fp) {
// HTTP ERROR
} else {
fputs ($fp, $header . $req);
while (!feof($fp)) {
$res = fgets ($fp, 1024);
if (strcmp ($res, "VERIFIED") == 0) {
// check the payment_status is Completed
// check that txn_id has not been previously processed
// check that receiver_email is your Primary PayPal email
// check that payment_amount/payment_currency are correct
// process payment

$mail_From = "From: me@mybiz.com";
$mail_To = "testenter code here@gmail.com";
$mail_Subject = "VERIFIED IPN";
$mail_Body = $req;

mail($mail_To, $mail_Subject, $mail_Body, $mail_From);

}
else if (strcmp ($res, "INVALID") == 0) {
// log for manual investigation

$mail_From = "From: me@mybiz.com";
$mail_To = "test@gmail.com";
$mail_Subject = "INVALID IPN";
$mail_Body = $req;

mail($mail_To, $mail_Subject, $mail_Body, $mail_From);

}
}
fclose ($fp);
}
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T03:26:30.680

沙盒中的 IPN 模拟 Express Checkout 交易，这是一种不同于您使用移动支付库获得的交易类型。

您可能得到的一件物品是 PayKey。使用 PayKey，您可以对 PaymentDetails API 进行第二次 API 调用，这应该会产生您正在寻找的其余信息。

参考：[付款详情 API](https://www.x.com/developers/paypal/documentation-tools/api/paymentdetails-api-operation)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T11:16:18.133

我用 curl 更改了请求方法，现在我的脚本工作正常：

```
$ch = curl_init('https://www.paypal.com/cgi-bin/webscr');
curl_setopt($ch, CURLOPT_HTTP_VERSION, CURL_HTTP_VERSION_1_1);
curl_setopt($ch, CURLOPT_POST, 1);
curl_setopt($ch, CURLOPT_RETURNTRANSFER,1);
curl_setopt($ch, CURLOPT_POSTFIELDS, $req);
curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, 1);
curl_setopt($ch, CURLOPT_SSL_VERIFYHOST, 2);
curl_setopt($ch, CURLOPT_FORBID_REUSE, 1);
curl_setopt($ch, CURLOPT_HTTPHEADER, array('Connection: Close'));

// In wamp like environments that do not come bundled with root authority certificates,
// please download 'cacert.pem' from "http://curl.haxx.se/docs/caextract.html" and set the directory path 
// of the certificate as shown below.
curl_setopt($ch, CURLOPT_CAINFO, dirname(__FILE__) . '/cacert.pem');
if( !($res = curl_exec($ch)) ) {
    // error_log("Got " . curl_error($ch) . " when processing IPN data");
    curl_close($ch);
    exit;
}
curl_close($ch); 
```

# css - 链接处于活动状态时悬停效果不起作用

> ID：12971863
> 
> 赞同：0
> 
> 时间：2012-10-19T10:02:35.437
> 
> 标签：css, hyperlink, hover

大家好 :) 所以我正在制作这个菜单，一切都很完美，直到我为你点击链接创建一个新网站。然后链接变得活跃，然后我将鼠标悬停在链接上。它应该获得悬停时获得的背景颜色和文本颜色。它似乎不起作用。

背景颜色仍然是相同的，但文本颜色只是保持黑色而不是改变。如果我在激活文本时更改了文本的颜色，那么即使我没有悬停，文本也将保持该颜色。它只应该在它悬停时改变。

我在 css 中的菜单代码：

```
.link{
float:left; 
text-decoration:none; 
color:#000000;
font-size:19px;
background:opacity:0.4;
width:130px;
padding-bottom:8px;
padding-top:8px;
padding-right:25px;
text-align:left;
padding-left:8px;
border-bottom:1px solid black;
border-top:1px solid black;
color:black;
line-height:1.5;
overflow:hidden;
text-align:left;

-webkit-transition: all 1s ease;  
}

a:link:hover
{
background-color:black;
color:#18ffec;} 
```

html中的相关代码：

```
<div id="linki">

<p>

<a class="link" href="Index.html"> Hjem</a>
<a class="link" href="Guider.html"> Guider</a>
<a class="link" href="Om_oss.html"> Om oss</a>
<a class="link" href="Kontakt.html"> Kontakt oss</a>
<a class="link" href="Hjelp til"> Hjelp til </a>

</p>
</div> 
```

感谢任何答案:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T10:04:34.720

您指定的类错误，请使用“。” 代替 ”：”

a.link：悬停

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-19T10:05:09.960

我想你的意思是

```
a.link:hover 
```

而不是

```
a:link:hover 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-19T10:06:11.913

您应该使用类名：

```
.link:hover
{
   background-color:black;
   color:#18ffec;
} 
```

`:link`是一个“正常的、未访问的链接”，所以当它被访问时，悬停将不起作用。`a.link`在这种情况下，您无需只使用类名。

# android - Android如何使用覆盖在MapView中徒手绘制油漆？

> ID：12971866
> 
> 赞同：5
> 
> 时间：2012-10-19T10:02:39.273
> 
> 标签：android, overlay, android-mapview, paint

在我的应用程序中，在地图视图上徒手绘制油漆，但最终从 mapview 上的矩形绘制中获得了很多信息，但我想代替矩形绘制徒手像之字形如何更改我的代码任何帮助请..

MapOverlay.java

```
 public class MapOverlay extends Overlay {

private float x1,y1,x2,y2;
private GeoPoint p1=null,p2=null;
private MapExampleActivity mv = null;
private Paint paint = new Paint();
private Path path = new Path();
private boolean isUp = false;

//constructor receiving the initial point
  public MapOverlay(MapExampleActivity mapV,float x,float y){
    paint.setStrokeWidth(2.0f);
    x1 = x;
    y1 = y;
    mv = mapV;
    p1 = mapV.getMapView().getProjection().fromPixels((int)x1,(int)y1);
}
//override draw method to add our custom drawings
@Override
public boolean draw(Canvas canvas, MapView mapView, boolean shadow, long when) {

    if(p1 != null && p2 != null){
        //get the 2 geopoints defining the area and transform them to pixels
        //this way if we move or zoom the map rectangle will follow accordingly
        Point screenPts1 = new Point();
        mapView.getProjection().toPixels(p1, screenPts1);
        Point screenPts2 = new Point();
        mapView.getProjection().toPixels(p2, screenPts2);                

        //draw inner rectangle
        paint.setColor(Color.BLUE);
     //   paint.setStyle(Style.FILL);
        canvas.drawPath(path, paint);       
        canvas.drawRect(screenPts1.x, screenPts1.y, screenPts2.x, screenPts2.y, paint);
        //draw outline rectangle

    //  paint.setColor(Color.YELLOW);
        paint.setStyle(Style.STROKE);
    //  canvas.drawRect(screenPts1.x, screenPts1.y, screenPts2.x, screenPts2.y, paint);
        canvas.drawPath(path, paint); 
    }
    return true;
}    

@Override
public boolean onTouchEvent(MotionEvent e, MapView mapView) {
    if(mv.isEditMode() && !isUp){

        if(e.getAction() == MotionEvent.ACTION_DOWN){
            x1 = y1 = 0;
            x1 = e.getX();
            y1 = e.getY();
            p1 = mapView.getProjection().fromPixels((int)x1,(int)y1);               
        }

        //here we constantly change geopoint p2 as we move out finger
        if(e.getAction() == MotionEvent.ACTION_MOVE){
            x2 = e.getX();
            y2 = e.getY();
            p2 = mapView.getProjection().fromPixels((int)x2,(int)y2);               
        }

        //---when user lifts his finger---
        if (e.getAction() == MotionEvent.ACTION_UP) {                
            isUp = true;
        }    
        return true;
    }
    return false;
} 
```

}

使用这个我可以像这样绘制矩形形状并再次绘制你点击切换按钮（可能绘制多次）

![长方形](../Images/3e04e8b307e3deaa3e5c131d26091440.png)

我想画线而不是像下图这样的矩形（多次绘制）。

![在此处输入图像描述](../Images/4e7e659d61c362999e8d62baea04ce0f.png)

最后我找到了这个链接这个链接提供了矩形形状绘制 [http://n3vrax.wordpress.com/2011/08/13/drawing-overlays-on-android-map-view/](http://n3vrax.wordpress.com/2011/08/13/drawing-overlays-on-android-map-view/)

只需更改矩形以自由绘制任何想法请......

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-20T10:36:32.403

您可以使用下面的代码徒手画一条线：

**代码**

```
public class HandDrawOverlay extends Overlay { 

private boolean editMode = false;
private boolean isTouched = false;
private Paint paint = new Paint(); 
private Point screenPt1 = new Point(); 
private Point screenPt2 = new Point(); 
private ArrayList<GeoPoint> points = null;

public HandDrawOverlay(){ 
    paint.setStrokeWidth(2.0f); 
    paint.setStyle(Style.STROKE); 
    paint.setColor(Color.BLUE); 
} 

@Override 
public void draw(Canvas canvas, MapView mapView, boolean shadow) {
    if(points != null && points.size() > 1){
        mapView.getProjection().toPixels(points.get(0), screenPt1); 
        for(int i=1; i<points.size();i++){
            mapView.getProjection().toPixels(points.get(i), screenPt2);
            canvas.drawLine(screenPt1.x, screenPt1.y, screenPt2.x, screenPt2.y, paint);
            screenPt1.set(screenPt2.x, screenPt2.y);
        }
    }
}     

@Override 
public boolean onTouchEvent(MotionEvent e, MapView mapView) { 
    if(editMode){ 
        int x = (int)e.getX();
        int y = (int)e.getY();
        GeoPoint geoP = mapView.getProjection().fromPixels(x,y);

        switch (e.getAction()) {
        case MotionEvent.ACTION_DOWN:
            isTouched = true;
            points = new ArrayList<GeoPoint>();
            points.add(geoP);
            break;
        case MotionEvent.ACTION_MOVE:
            if(isTouched)
                points.add(geoP);
            break;
        case MotionEvent.ACTION_UP:
            if(isTouched)
                points.add(geoP);
            isTouched = false;
            break;
        }
        mapView.invalidate();
        return true; 
    } 
    return false; 
}

/**
 * @return the editMode
 */
public boolean isEditMode() {
    return editMode;
}

/**
 * @param editMode the editMode to set
 */
public void setEditMode(boolean editMode) {
    this.editMode = editMode;
} 
} 
```

**使用**

```
HandDrawOverlay handDrawOverlay;
handDrawOverlay = new HandDrawOverlay();
mapView.getOverlays().add(handDrawOverlay);

//Set edit mode to true to start drwaing
handDrawOverlay.setEditMode(true);

//Set edit mode to true to stop drwaing
handDrawOverlay.setEditMode(false); 
```

**笔记**

这是一个功能齐全的示例，可帮助您入门。但是，您应该优化代码以使其更高效（即`Path`用于将绘图路径存储在 中`onDraw()`，减少记录在 中的点数`onTouch()`等）。

好好享受。

# shell - 使用粘贴命令时出现 Ctrl 字符

> ID：12971867
> 
> 赞同：0
> 
> 时间：2012-10-19T10:02:41.210
> 
> 标签：shell

当我使用粘贴命令加入两个文件时，^M 字符将在输出文件的加入时间出现。如何在不使用其他命令（sed，tr）的情况下删除它？

我只是想确认有什么方法可以粘贴带有 ^M 字符的文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T15:41:51.287

ctrl-M 是一个回车：你的文件有 DOS 行结尾。首先尝试`dos2unix`在您的文件上使用。我不认为它`paste`本身可以做任何事情。

# javascript - Chrome 扩展中的后台脚本与内容脚本

> ID：12971869
> 
> 赞同：49
> 
> 时间：2012-10-19T10:02:43.860
> 
> 标签：javascript, google-chrome

[我在developer.chrome.com](http://developer.chrome.com)上阅读了有关背景页面和内容脚本的信息， 但我对它们感到困惑，我无法理解何时使用后台脚本以及何时使用内容脚本。例如：

`manifest.json`：

```
{
    "name": "Hello World",
    "version": "2.0",
    "manifest_version": 2,
    "background": 
    {
        "scripts": ["background.js"]
    },
    "content_scripts":
    [
        {
            "matches": ["http://*/*", "https://*/*"],
            "js": ["js/myScript.js"]
        }
    ],
    "permissions": ["tabs", "http://*/*"],
    "browser_action":
    {
        "default_icon": "icon.png"
    }
} 
```

如果`background.js`是：

```
// Called when the user clicks on the browser action.
chrome.browserAction.onClicked.addListener(function(tab) {
  alert("test");
}); 
```

它运行良好，但如果我将上面相同的代码放入 中`myScript.js`，它就不起作用。

所以我不知道哪个脚本应该位于，哪个脚本应该`background.js`位于内容脚本中。

* * *

## 回答 #1

> 赞同：57
> 
> 时间：2012-10-19T10:11:44.373

实际上，[内容脚本](https://developer.chrome.com/docs/extensions/mv2/content_scripts)是在网页上下文中运行的 JavaScript 文件。通过使用标准的文档对象模型 (DOM)，他们可以读取浏览器访问的网页的详细信息，或对其进行更改。

扩展的一个常见需求是拥有一个长时间运行的脚本来管理某些任务或状态。[救援的背景页面](https://developer.chrome.com/docs/extensions/mv2/background_pages)。背景页面是在扩展进程中运行的 HTML 页面。它在您的扩展程序的整个生命周期内都存在，并且一次只有一个实例处于活动状态。

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2020-08-13T05:12:24.097

我知道这个问题是很久以前的事了，但我最近进入了 Chrome 扩展开发，并且和你一样有确切的问题。因此，我希望我的回答能够阐明这种困惑。

您已指定`myScript.js`为您的内容脚本。将您的代码放入内容脚本时不起作用的原因是它需要侦听浏览器按钮单击事件。但是，内容脚本只能有限地访问 Chrome api，主要是`chrome.runtime`事件。它无法检测`chrome.browserAction.onClick`事件。

另一方面，后台脚本可以访问完整的 Chrome api 数组。

何时使用后台脚本而不是内容脚本取决于您的扩展目标。您想简单地更改网页的呈现方式吗？那么你只需要内容脚本，不需要后台脚本。例如，如果你想在任何网页上制作一个扩展来切换暗模式，你可以不用后台脚本。

如果您想为您的扩展程序将自动切换暗模式的站点列表保存用户偏好怎么办？然后添加一个后台脚本： - 将他们的偏好存储到 Chrome 存储中。

*   检测用户何时登陆列表中的站点
*   向内容脚本发送一条消息，指示它切换暗模式。

这不是最好的例子，但我的观点是，当您需要处理常用功能并保持用户体验时，需要后台脚本。

# c# - 如何从在 Asp mvc EDMX 中返回动态表的存储过程中获取值

> ID：12971873
> 
> 赞同：0
> 
> 时间：2012-10-19T10:03:00.853
> 
> 标签：c#, asp.net-mvc-2, edmx, ado.net-entity-data-model

我在 edmx 中使用存储过程。我正在使用以下 SP。

```
Create getreportDAta(@Reportname varchar(50),@startDate datetime,@enddate datetime)
begin
    IF OBJECT_ID('tempdb..#ouputtable ') IS NOT NULL DROP TABLE #ouputtable ;
  create #ouputtable (usdate datetime)
  if(@reportname="abc")
   begin
   alter #ouputtable add(Some columns) 
     end
      else begin 
         alter #ouputtable add(Some columns) 
      End 
      so oonn...
     Select * from #ouputtable ; 
```

现在我想从 edmx 的 #ouputtable 中读取 Select * 选择的值。可输出不包含固定数量的列。

我如何在 ASP mvc EDMX 中做到这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T14:59:17.253

基本上我想做同样的事情，但最终无法弄清楚......所以我决定创建一个类，当我想像这样调用 sp 时我可以调用它。此链接提供了有关如何调用 sp 的结果并将其绑定到 Gridview 的基础知识： [http ://www.aspnettutorials.com/tutorials/database/db-storedprocs-aspnet2-csharp.aspx](http://www.aspnettutorials.com/tutorials/database/db-storedprocs-aspnet2-csharp.aspx)

（请参阅“页面背后的代码流程如下。”部分。此外，如果您不使用 C#，他们在该页面上有指向 VB.NET 版本的链接）

这是我的代码隐藏按钮单击事件的修改版本：

```
try {
System.Configuration.Configuration rootWebConfig =  
    System.Web.Configuration.WebConfigurationManager.OpenWebConfiguration("/MyWebsite");    //create connection string object
System.Configuration.ConnectionStringSettings connString;
if (rootWebConfig.ConnectionStrings.ConnectionStrings.Count > 0)    {
    connString = rootWebConfig.ConnectionStrings.ConnectionStrings["MyConnectionString"];
    if (connString != null) {
        System.Data.SqlClient.SqlCommand cmd = 
            new System.Data.SqlClient.SqlCommand("MyStoredProcedure", new System.Data.SqlClient.SqlConnection(connString.ConnectionString));
        cmd.CommandType = System.Data.CommandType.StoredProcedure;
        cmd.Connection.Open();
        GridViewResults.DataSource = cmd.ExecuteReader();
        GridViewResults.DataBind();
        cmd.Connection.Close();
        cmd.Connection.Dispose();
    }
    else {
        throw new Exception("No MyConnectionString Connection String found in web.config.");
    }
}
else {
    throw new Exception("No Connection Strings found in web.config.");
}
}
catch (Exception) {
    throw;
} 
```

只需将其合并到您的 edmx 文件所在的数据层项目中您自己的类中，并使用它来调用此类存储过程。:)。

# .net - 如何可靠地检测安装的实际 .NET 4.5 版本？

> ID：12971881
> 
> 赞同：54
> 
> 时间：2012-10-19T10:03:48.777
> 
> 标签：.net, .net-4.5

我的实际问题是我遇到了两个版本的 .NET 4.5 完整设置：

*   一个（可能）较旧的，在下载 SQL Server Data Tools 时也可用
    *   尺寸：`50,349,920`
    *   MD5：`a5e81d1b3905ada0a6e35fd6c6a2e1f4`
*   今天早上从这里下载了一个（可能）较新的：http: [//www.microsoft.com/visualstudio/eng/downloads](http://www.microsoft.com/visualstudio/eng/downloads)
    *   尺寸：`50,352,408`
    *   MD5：`d02dc8b69a702a47c083278938c4d2f1`

两种设置的版本都是`4.5.50709.17929`. 在里面，主要区别是`netfx_Full.mzz`文件，但是在用 7-zip 提取内容后，即使文件内容不同，我也会得到很多相同版本的文件（我从大约 426 个文件中检查了大约 20 个随机文件） ，所以我真的无法判断哪个是新的。

有没有办法可靠地检测安装的 .NET 4.5 运行时的实际版本，所以我只能在确实需要时运行设置？

**更新**

我检查了所有具有不同内容的 426 个文件，并且它们在两种设置中都具有相同的 ProductVersion 和 FileVersion。因此，注册表或文件校验和是下一步。

**更新 2**

注册表中列出的版本对于两种设置都是相同的：`4.5.50709`

**更新 3**

[.NET 4.5.2](http://www.microsoft.com/en-us/download/details.aspx?id=42642)现在可用：

> 此版本的 .NET Framework 与 .NET Framework 3.5 SP1 及更早版本并行运行，但对 .NET Framework 4、.NET Framework 4.5 和 .NET Framework 4.5.1 执行就地更新。

* * *

## 回答 #1

> 赞同：112
> 
> 时间：2012-10-19T10:38:27.587

MS 最近修补了 .NET 4.5 以在某些情况下恢复与 .NET 4.0 的向后兼容性（请参阅[http://blogs.msdn.com/b/dotnet/archive/2012/10/17/net-framework-4-5-off -to-a-great-start.aspx](http://blogs.msdn.com/b/dotnet/archive/2012/10/17/net-framework-4-5-off-to-a-great-start.aspx)）。

MS 可能使用这些更改更新了设置（以便升级到 .NET 4.5 的用户不会遇到兼容性问题），尽管我不知道他们为什么不更改设置上的版本号。

此外，请注意 .NET 版本号与 .NET 报告的运行时版本号之间存在差异`System.Environment.Version`。对于 .NET 4.5，后者仍然是 4.0.30319.*，只有修订号会发生变化（随着 .NET 4.5 更新以及每个安全更新）。

以下是一些在野外观察到的运行时版本示例：

**基础 4.0**

*   4.0.30319.1 = .NET 4.0 RTM
*   4.0.30319.269 = Windows XP SP3、7、7 SP1 上的 .NET 4.0（带有[MS12-035](https://support.microsoft.com/en-us/kb/2604121) GDR 安全更新）
*   4.0.30319.276 = Windows XP SP3 上的 .NET 4.0（4.0.3 运行时更新）
*   4.0.30319.296 = Windows XP SP3、7 上的 .NET 4.0（带有[MS12-074](https://support.microsoft.com/en-us/kb/2729449) GDR 安全更新）
*   4.0.30319.544 = Windows XP SP3、7、7 SP1 上的 .NET 4.0（带有[MS12-035](https://support.microsoft.com/en-us/kb/2604121) LDR 安全更新）
*   4.0.30319.1008 = Windows XP SP3、7、7 SP1 上的 .NET 4.0（带有[MS13-052](https://support.microsoft.com/en-us/kb/2835393) GDR 安全更新）
*   4.0.30319.1022 = Windows XP SP3、7、7 SP1 上的 .NET 4.0（带有[MS14-009](https://support.microsoft.com/en-us/kb/2898855) GDR 安全更新）
*   4.0.30319.1026 = Windows XP SP3、7、7 SP1 上的 .NET 4.0（带有[MS14-057](https://support.microsoft.com/en-us/kb/2972106) GDR 安全更新）
*   4.0.30319.2034 = Windows XP SP3、7、7 SP1 上的 .NET 4.0（带有[MS14-009](https://support.microsoft.com/en-us/kb/2898855) LDR 安全更新）

**4.5**

*   4.0.30319.17626 = .NET 4.5 RC
*   4.0.30319.17929 = .NET 4.5 RTM
*   4.0.30319.18010 = Windows 8 上的 .NET 4.5
*   4.0.30319.18052 = Windows 7 SP1 64 位上的 .NET 4.5
*   4.0.30319.18063 = Windows 7 SP1 64 位上的 .NET 4.5（带有[MS14-009](https://support.microsoft.com/en-us/kb/2898864)安全更新）

**4.5.1**

*   4.0.30319.18408 = Windows 7 SP1 64 位上的 .NET 4.5.1
*   4.0.30319.18444 = Windows 7 SP1 64 位上的 .NET 4.5.1（带有[MS14-009](https://support.microsoft.com/en-us/kb/2898869)安全更新）
*   4.0.30319.34014 = Windows 8.1 64 位上的 .NET 4.5.1

**4.5.2**

*   4.0.30319.34209 = Windows 7 SP1 64 位上的 .NET 4.5.2
*   4.0.30319.34209 = Windows 8.1 64 位上的 .NET 4.5.2

**4.6 及更高版本**

*   4.0.30319.42000

我在我的 Windows 更新历史记录中没有看到任何 .NET 更新，所以我猜 v18010 的更新是作为[KB 2756872](http://support.microsoft.com/kb/2756872)的一部分安装的。

更新：显然，由于原始下载中的数字签名错误，微软更新了 .NET 4.5 设置。[知识库 2770445](http://support.microsoft.com/kb/2770445)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-12-05T08:29:19.247

```
public class DA {
    public static class VersionNetFramework {
        public static string Get45or451FromRegistry()
        {//https://msdn.microsoft.com/en-us/library/hh925568(v=vs.110).aspx
            using (RegistryKey ndpKey = RegistryKey.OpenBaseKey(RegistryHive.LocalMachine, RegistryView.Registry32).OpenSubKey("SOFTWARE\\Microsoft\\NET Framework Setup\\NDP\\v4\\Full\\"))
            {
                int releaseKey = Convert.ToInt32(ndpKey.GetValue("Release"));
                if (true)
                {
                    return (@"Version: " + CheckFor45DotVersion(releaseKey));
                }
            }
        }
        // Checking the version using >= will enable forward compatibility, 
        // however you should always compile your code on newer versions of
        // the framework to ensure your app works the same.
        private static string CheckFor45DotVersion(int releaseKey)
        {//https://msdn.microsoft.com/en-us/library/hh925568(v=vs.110).aspx
            if (releaseKey >= 394271)
                return "4.6.1 installed on all other Windows OS versions or later";
            if (releaseKey >= 394254)
                return "4.6.1 installed on Windows 10 or later";
            if (releaseKey >= 393297)
                return "4.6 installed on all other Windows OS versions or later";
            if (releaseKey >= 393295)
                return "4.6 installed with Windows 10 or later";
            if (releaseKey >= 379893)
                return "4.5.2 or later";
            if (releaseKey >= 378758)
                return "4.5.1 installed on Windows 8, Windows 7 SP1, or Windows Vista SP2 or later";
            if (releaseKey >= 378675)
                return "4.5.1 installed with Windows 8.1 or later";
            if (releaseKey >= 378389)
                return "4.5 or later";

            return "No 4.5 or later version detected";
        }
        public static string GetVersionFromRegistry()
        {//https://msdn.microsoft.com/en-us/library/hh925568(v=vs.110).aspx
            string res = @"";
            // Opens the registry key for the .NET Framework entry.
            using (RegistryKey ndpKey =
                RegistryKey.OpenRemoteBaseKey(RegistryHive.LocalMachine, "").
                OpenSubKey(@"SOFTWARE\Microsoft\NET Framework Setup\NDP\"))
            {
                // As an alternative, if you know the computers you will query are running .NET Framework 4.5 
                // or later, you can use:
                // using (RegistryKey ndpKey = RegistryKey.OpenBaseKey(RegistryHive.LocalMachine, 
                // RegistryView.Registry32).OpenSubKey(@"SOFTWARE\Microsoft\NET Framework Setup\NDP\"))
                foreach (string versionKeyName in ndpKey.GetSubKeyNames())
                {
                    if (versionKeyName.StartsWith("v"))
                    {

                        RegistryKey versionKey = ndpKey.OpenSubKey(versionKeyName);
                        string name = (string)versionKey.GetValue("Version", "");
                        string sp = versionKey.GetValue("SP", "").ToString();
                        string install = versionKey.GetValue("Install", "").ToString();
                        if (install == "") //no install info, must be later.
                            res += (versionKeyName + "  " + name) + Environment.NewLine;
                        else
                        {
                            if (sp != "" && install == "1")
                            {
                                res += (versionKeyName + "  " + name + "  SP" + sp) + Environment.NewLine;
                            }

                        }
                        if (name != "")
                        {
                            continue;
                        }
                        foreach (string subKeyName in versionKey.GetSubKeyNames())
                        {
                            RegistryKey subKey = versionKey.OpenSubKey(subKeyName);
                            name = (string)subKey.GetValue("Version", "");
                            if (name != "")
                                sp = subKey.GetValue("SP", "").ToString();
                            install = subKey.GetValue("Install", "").ToString();
                            if (install == "") //no install info, must be later.
                                res += (versionKeyName + "  " + name) + Environment.NewLine;
                            else
                            {
                                if (sp != "" && install == "1")
                                {
                                    res += ("  " + subKeyName + "  " + name + "  SP" + sp) + Environment.NewLine;
                                }
                                else if (install == "1")
                                {
                                    res += ("  " + subKeyName + "  " + name) + Environment.NewLine;
                                }
                            }
                        }
                    }
                }
            }
            return res;
        }
        public static string GetUpdateHistory()
        {//https://msdn.microsoft.com/en-us/library/hh925567(v=vs.110).aspx
            string res=@"";
            using (RegistryKey baseKey = RegistryKey.OpenBaseKey(RegistryHive.LocalMachine, RegistryView.Registry32).OpenSubKey(@"SOFTWARE\Microsoft\Updates"))
            {
                foreach (string baseKeyName in baseKey.GetSubKeyNames())
                {
                    if (baseKeyName.Contains(".NET Framework") || baseKeyName.StartsWith("KB") || baseKeyName.Contains(".NETFramework"))
                    {

                        using (RegistryKey updateKey = baseKey.OpenSubKey(baseKeyName))
                        {
                            string name = (string)updateKey.GetValue("PackageName", "");
                            res += baseKeyName + "  " + name + Environment.NewLine;
                            foreach (string kbKeyName in updateKey.GetSubKeyNames())
                            {
                                using (RegistryKey kbKey = updateKey.OpenSubKey(kbKeyName))
                                {
                                    name = (string)kbKey.GetValue("PackageName", "");
                                    res += ("  " + kbKeyName + "  " + name) + Environment.NewLine;

                                    if (kbKey.SubKeyCount > 0)
                                    {
                                        foreach (string sbKeyName in kbKey.GetSubKeyNames())
                                        {
                                            using (RegistryKey sbSubKey = kbKey.OpenSubKey(sbKeyName))
                                            {
                                                name = (string)sbSubKey.GetValue("PackageName", "");
                                                if (name == "")
                                                    name = (string)sbSubKey.GetValue("Description", "");
                                                res += ("    " + sbKeyName + "  " + name) + Environment.NewLine;
                                            }
                                        }
                                    }
                                }
                            }
                        }

                    }
                }
            }
            return res;
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-12-17T08:55:26.893

如果有人需要`System.Environment.Version`针对 .net 版本的值，请在表格中排列（需要`=Vlookup`使用 excel 等执行） ，这是我为此创建的
一个[plunker 。](https://plnkr.co/edit/PHa7g18G8bN2Q9FQ4pDz?p=preview)
输入上面的链接，您将能够复制此表格图像：

[![在此处输入图像描述](../Images/b7c19121fd1d876eb72945e1f6b8e7de.png)](https://i.stack.imgur.com/A0LDC.png)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-02-09T17:34:39.420

您可以随时访问 Windows/Microsoft.net/Framework/4.0.30319 并查看 system.dll 文件...右键单击属性并查看转到详细信息...应该向您显示版本... [system.dll 为4.5.2](http://i.stack.imgur.com/FRAXY.jpg)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-06-28T16:43:27.943

您可以使用 powershell 来安装所有版本：

```
Get-ChildItem 'HKLM:\SOFTWARE\Microsoft\NET Framework Setup\NDP' -Recurse | Get-ItemProperty -Name Version,Release -EA 0 | where { $_.PSChildName -match '^(?!S)\p{L}'} | select PSChildName, Version, Release | Select -ExpandProperty Version | Sort-Object Version 
```

前面的 powershell 命令将查看注册表项并按版本后代排序打印它们

输出示例：

```
4.8.03761
3.5.30729.4926
4.0.0.0
4.8.03761
3.0.30729.4926
2.0.50727.4927
3.0.6920.4902
3.0.4506.4926 
```

# android - 取消所有 AsyncTask？

> ID：12971882
> 
> 赞同：5
> 
> 时间：2012-10-19T10:03:54.013
> 
> 标签：android, android-asynctask, queue

我有一个用于获取媒体文件拇指的类。这个 Loader like 类开始一个`AsyncTask`for each `ImageView`（在 中调用`SomeAdapter#getView()`）。任务本身做了很多事情，其中​​之一是调用`DiskLruCache`，但是当 SD 卡被卸载时，任务仍在运行时应用程序崩溃。

如果卡状态改变，我知道如何注册。

所以我需要一种方法来停止所有正在运行的任务。你能帮忙的话，我会很高兴。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-19T10:09:25.763

只需遍历所有列表并使用以下将取消所有正在运行的异步任务。

```
if(myAsyncTask.getStatus().equals(AsyncTask.Status.RUNNING))
 {
     myAsyncTask.cancel(true);
 } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-19T10:16:05.530

在每个异步任务上调用 cancel()，您的异步任务必须检查 isCancelled() 是否返回 true，如果是，则从 doInBackground 返回。这都在 AsyncTask 文档中。

您的解决方案存在一个问题，已知 AsyncTasks 在某些机器人上并行工作，而在其他机器人上串行工作。并行运行它们实际上不是一个好主意。您可以考虑按照 Veaceslav Gaidarji 的建议使用 ExecutorService。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-19T10:12:00.757

你可以试试看`ExecutorService` [这里](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/ExecutorService.html)

有很好的例子——如何启动异步任务，以及如何在你需要的任何时候停止它们。

# visual-studio-2012 - 如何更改 Team Web Access 2012 中的键盘快捷键？

> ID：12971883
> 
> 赞同：1
> 
> 时间：2012-10-19T10:03:53.723
> 
> 标签：visual-studio-2012

有什么方法可以更改 Web Access 中的键盘快捷键吗？

（我将 Team Foundation Server 2012 与 Visual Studio 2012 一起使用）。

问题是**Alt+S**快捷键保存了一个工作项，而不是写一个特殊字符（在我的例子中是“ś”）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T10:48:23.687

这已被确定为一个[错误](https://connect.microsoft.com/VisualStudio/feedback/details/775953/adding-new-task-in-tfs-2012-web-access-problem-with-right-alt-s)。如您所见，该修复程序将随 VS Update 2 一起提供。

[更新 2 公告](http://blogs.msdn.com/b/bharry/archive/2013/01/30/announcing-visual-studio-2012-update-2-vs2012-2.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T11:38:17.503

令人惊讶的是，没有这样的定制。

# entity-framework - asp.net mvc 双向自引用多对多

> ID：12971885
> 
> 赞同：2
> 
> 时间：2012-10-19T10:04:06.620
> 
> 标签：entity-framework, asp.net-mvc-4, many-to-many, bidirectional, self-reference

我很难在 ASP.NET MVC4 中使用 EF 设置双向自引用多对多映射

我有：

```
modelBuilder.Entity<Item>()
    .HasMany(i => i.ChildItems)
    .WithMany()
    .Map(m => m.MapLeftKey("ItemID")
        .MapRightKey("ChildItemId")
        .ToTable("ItemChildItems")); 
```

所以我可以查询 Item.ChildItems 没问题。

但是，我也想要 Item.Parents

我确信必须有一个明显的解决方案，但我错过了它。我尝试创建另一个实体 Parent : Item 和单独的映射。我也尝试过使用两个映射表进行操作。这两个都变得一团糟，无论如何我都没有设法让它们工作。

我在关系中不需要任何有效负载。

非常感谢任何帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-19T13:18:03.940

你试过这个吗？

```
modelBuilder.Entity<Item>()
    .HasMany(i => i.ChildItems)
    .WithMany(i => i.Parents) // associate the parent items here
    .Map(m => m.MapLeftKey("ItemID")
        .MapRightKey("ChildItemId")
        .ToTable("ItemChildItems")); 
```

# c# - NumericUpDown 如何设置值

> ID：12971888
> 
> 赞同：0
> 
> 时间：2012-10-19T10:04:11.257
> 
> 标签：c#, winforms

嗨，我有一个 numericupdown 框，我试图在每次加载表单时加载它的值。

我没有高兴地尝试了以下

```
 string striko1value = clsData.GetStriko1GasReading();
        decimal striko1 = decimal.Parse(striko1value);
        Striko1Numeric.Value = Convert.ToDecimal(striko1); 
```

我也试过这个

```
Striko1Numeric.Value = (striko1); 
```

任何人都对我将如何执行此操作或我可以在哪里阅读此内容有任何想法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T10:12:48.900

假设您`clsData.GetStriko1GasReading()`有效地返回了一个可以解释为十进制值的字符串，那么您可能有一个超出 NumericUpdown 控件允许的最小值或最大值的值

```
 string striko1value = clsData.GetStriko1GasReading(); 
 decimal striko1;
 if(decimal.TryParse(striko1value, out striko1))
 {
    if(striko1 > Striko1Numeric.Maximum ||  striko1 < Striko1Numeric.Minimum)
       MessageBox.Show("Value not allowed");
    else
        Striko1Numeric.Value = striko1; 
 }
 else
    MessageBox.Show("Not a valid decimal number"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T10:16:40.470

知道了，我允许的最大值小于 striko1 的值。

谢谢你的帮助

# jquery - 包括 jQuery，但不执行 jQuery 代码

> ID：12971898
> 
> 赞同：0
> 
> 时间：2012-10-19T10:04:52.187
> 
> 标签：jquery, wordpress

jQuery 包含在文件中，如下所示：

```
wp_enqueue_script("jquery"); 
```

我有一个看起来像这样的 jQuery 文件：

```
$(function() {
alert("j");

$('.event-wrapper a').click(function(){
    event.preventDefault();
    if($(this).next().is(':visible')) {
        $(this).next().hide();
    } else {
        $('.event-info').hide();
        $(this).next().show();
    }
});

$('.event-info').click(function() {
    $(this).hide();
}); 
```

});

这是行不通的。我试过只放 alert("j"); 在文件中，并且可以正常工作，因此正确包含了该文件。我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-19T10:25:37.107

Wordpress 自动使用 jQuery.noConflict 调用 jQuery，这意味着 $ 被删除以避免命名空间冲突。在 Wordpress 中使用 jQuery 时，您应该始终使用 jQuery 而不是 $。

例如：

```
jQuery(document).ready(function() {

}); 
```

为了获得 $ 回来，您可以使用此处描述的快捷方式（以及其他答案）：[http ://docs.jquery.com/Using_jQuery_with_Other_Libraries](http://docs.jquery.com/Using_jQuery_with_Other_Libraries)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T10:13:29.100

我不确定您要做什么，但是您的 jQuery 主函数应该像这样开始：

```
 $(document).ready(function () {
            //your jquery code should go here
        }); 
```

如果您尝试创建一个可以在 html 元素上调用的 jquery 函数，则应该像这样声明它：

```
 (function ($) {
            $.fn.myFunc = function (options) {

             //Your code goes here
            }
        })(jQuery); 
```

并且会直接在 javascript 中从对象调用：

```
 $('#SomeHtmlElementID').myFunc(myArgs); 
```

此外，无论是否使用 jQuery，您的警报都会起作用，因为它是一个 javascript 函数，而不是 jQuery 独有的函数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-19T10:31:43.517

由于@Calle 指定的原因，这应该对您有用，因此 jQuery 被传入 as`$`并且后续使用应该正常工作。

```
(function($){ $(function(){
   // Your code here...
}) })(jQuery); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-19T11:01:28.430

```
jQuery(document).ready(function($) {
    // Here you can use $ as normal
}); 
```

# jquery - jQuery UI Slider 最小值反转自身？

> ID：12971901
> 
> 赞同：0
> 
> 时间：2012-10-19T10:04:58.073
> 
> 标签：jquery, jquery-ui

所以我有一些 JS 在你想计算 0 - 100% 时按预期工作，但是当我想将其限制在 50% - 75% 并且我将第一个输入更改为 38% 时，任何想法都可以达到 75%关于这里发生了什么？

```
$(document).ready(function () 
{
    // Ok, now setup the slider for the application process
    $('.application-progress').slider(
    {
        range: "min",
        min: 50,
        max: 100,
        value: 50,
        animate: true,
        slide: function (event, ui) 
        {
            $("#progress").html(ui.value + "%");
        },
        disabled: true
    });

    $("#progress").html($(".application-progress").slider("value") + "%");

    $(".step-container input, .step-container select").change(function () 
    {
        $('.progress-container').removeClass('completed');
        var fields = $(".step-container input, .step-container select");
        var percentage = 75 * fields.filter(function () 
        {
            return $.trim(this.value) != "";
        }).length / fields.length;

        var roundedPercentage = Math.round(percentage);

        $(".application-progress").slider("value", roundedPercentage);
        $("#progress").html(roundedPercentage + "%");

        if (roundedPercentage == 100) 
        {
            $('.progress-container').addClass('completed');
        }
    });
}); 
```

完整的代码和工作示例可以在[这里](http://jsfiddle.net/VJr9A/)找到：

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T10:26:25.083

我认为您的价值观并不像您期望的那样

```
 var fields = $(".step-container input, .step-container select");
            var percentage = 75 * fields.filter(function () {
                return $.trim(this.value) != "";
    }).length / fields.length; 
```

是 6 ，`fields.length`因为您有 6 个输入。

第`fields.filter(function () { return $.trim(this.value) != ""; }).length`一个值为 3 的返回值，因为您的按钮女巫中已经有 2 个值也被计算出来。

这给你带来`3 / 6 = 0,5 * 75 = 37,5`了价值`38`

我不确定您想要完成什么，但是将您的输入按钮更改为`<button>`标签，或从选择器中删除它们可能会对您有所帮助。

[jsFiddle](http://jsfiddle.net/SLBYn/)没有按钮和调试警报。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T10:36:21.113

不确定您到底想要什么，但类似的东西似乎更好（代码中的更改注释）

```
$(document).ready(function() {
    var minval = 50; //you'll need them later, so global var.
    var maxval = 75; //idem
    // Ok, now setup the slider for the application process
    $('.application-progress').slider({
        range: "min",
        min: 0,
        max: 100,
        value: minval, //or a fixed value, as you want.
        animate: true,
        slide: function(event, ui) {
            $("#progress").html(ui.value + "%");
        },
        disabled: true
    });

    $("#progress").html($(".application-progress").slider("value") + "%");

    $(".step-container input, .step-container select").change(function() {
        $('.progress-container').removeClass('completed');
        var fields = $(".step-container input, .step-container select");
        var filled = fields.filter(function() {
            return $.trim(this.value) != "";
        }).length; //fileds "filled"

        var totalLength = fields.length; //all fields filled.
        var percentage = minval + ((maxval - minval) * filled / totalLength); //new calculation
        var roundedPercentage = Math.round(percentage);

        $(".application-progress").slider("value", roundedPercentage);
        $("#progress").html(roundedPercentage + "%");

        if (roundedPercentage == 100) { //roundedPercentage = max, not 100
            $('.progress-container').addClass('completed');
        }
    });
}); 
```

[SqlFiddle](http://jsfiddle.net/VJr9A/12/)

# php - __construct($foo = NULL) 不工作

> ID：12971905
> 
> 赞同：1
> 
> 时间：2012-10-19T10:05:11.007
> 
> 标签：php, construct

我有奇怪的问题。这只是类的构造方法，不值得展示其他代码，反正看这段代码：

```
Class xy {
    public $x = 10;
    public $y = 10; 

    public function __construct($x = NULL, $y = NULL) {
        if(isset($x) || isset($y)){
            $this->x = $x;      // assign center coords
            $this->y = $y;      // assign center coords
        }
        $this->area = $this->area();
        echo $this->x . " " . $this->y . " " . $this->area;
    }

} 
```

从现在开始，我认为这段代码应该回显 $this->x 和 $this->y WITHOUT `if(isset($x) || isset($y)){`，如果它没有通过这段代码进行对象制作：`$newObj = new xy;`但它没有。只有当这条线看起来像这样时它才有效`$newObj = new xy(10,10)`；

我需要帮助和澄清:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T10:08:24.267

我已经很多年没有使用 php，但我认为它应该看起来像 $newObj = new xy();

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T10:09:24.477

```
change $newObj = xy(10,10); to $newObj = new xy(10,10); 
```

# ruby - 使用模块构建 ruby 数据库访问代码

> ID：12971906
> 
> 赞同：0
> 
> 时间：2012-10-19T10:05:18.417
> 
> 标签：ruby, oop, couchbase

我是一个红宝石菜鸟，我有点难以找到构建我的代码的正确方法。

在代码库中，有一个 Couch 模块用于读取：

```
module Couch
  def self.client
    @client ||= Couchbase.new "http://#{DATABASE_HOST}:8091/pools/default"
  end
end 
```

每次我们必须访问数据库时，我们都会这样做：

```
Couch.client.get(...)
Couch.client.set(...) 
```

例如 ：

```
def Model

  def self.find(id)
    Couch.client.get("foo:#{id}")
    ...
  end

  def save
    Couch.client.set("foo:#{@id}", {...})
  end
end 
```

到处重复 Couch.client 和静态的东西让我很不舒服，我觉得这不是红宝石的方式。

所以我将 Couch 模块更改为

```
module Couch
  extend Forwardable

  def_instance_delegators :client, :get, :set, :delete, :append

  def client
    @@client ||= Couchbase.new "http://#{hostname}:8091/pools/default"
  end
end 
```

在想要使用它的模型类中

```
def Model
  extend Couch

  def self.find(id)
    get("foo:#{id}")
    ...
  end

  def save
    Model.set("foo:#{@id}", {...})
  end
end 
```

我认为它更好，但我必须承认我对它的外观并不完全满意......`:get`在我的 Model 中有一个类方法真的可以吗？这个名字有点混乱。是否应该包含该模块（例如带有 ClassMethods 子模块）？我可以避免类变量`@@client`（但我不想为每个实例创建一个新连接）吗？

Bref，有没有更好的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T12:32:38.527

> 我认为它更好，但我必须承认我对它的外观并不完全满意......在我的模型中有一个 :get 类方法真的可以吗？这个名字有点混乱。是否应该包含该模块（例如带有 ClassMethods 子模块）？我可以避免类变量@@client（但我不想为每个实例创建一个新连接）吗？

我认为您`get`的模型中不应该有类方法；你说得对，这毫无意义。

你原来的方法对我来说很好。

它是明确的，但不是太冗长。任何人都可以轻松理解代码的作用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-20T03:33:16.540

看看[http://github.com/couchbase/couchbase-ruby-model](http://github.com/couchbase/couchbase-ruby-model)和 couchbase-model ruby​​gem 本身。它完成了大部分肮脏的工作。此外，如果您有想法/补丁，我很乐意对其进行审查。我正在使用 gerrit 代码审查，因此最新的补丁在这里[http://review.couchbase.org/#/q/status:open+project:couchbase-ruby-model,n,z](http://review.couchbase.org/#/q/status:open+project:couchbase-ruby-model,n,z)

# c - MinGW 创建了具有奇怪权限的文件？

> ID：12971909
> 
> 赞同：0
> 
> 时间：2012-10-19T10:05:24.877
> 
> 标签：c, windows-7, mingw

当我用 MinGW 编译 C 程序并且我想删除 exe 文件时，它会消失。但是当我按F5时它仍然存在。Unlocker 找不到任何把手，也无法将其移除。我无法修改权限，也无法更改所有者。大约 2 分钟后，文件被删除。它也出现在文件执行之前。

我的系统：Windows 7 Professional x86。我来自makefile的链接行：

```
gcc -o main.exe main.o -lopengl32 -lglut32 -lglu32 
```

如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T10:15:07.027

文件可以在打开时删除，但在最后一个句柄关闭之前不会真正从文件系统中删除。

我怀疑您的情况是病毒扫描程序使文件保持打开状态。

编辑另见：

*   [Visual Studio 输出文件权限？](https://stackoverflow.com/questions/3312646/visual-studio-output-file-permissions)

显然，这是禁用“应用程序体验服务”时的一个已知问题。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-09T20:20:25.877

好的，我仍然不知道为什么要修改权限，但我发现其他（例如下载的）.exe 文件也会发生这种情况。解决方案：重新安装 Windows。

编辑：不知道为什么，但我只需要重新启用应用程序体验服务就可以了。不知道为什么....

# mongodb - NoSQL 数据库设计 - 带有标签的文档

> ID：12971912
> 
> 赞同：4
> 
> 时间：2012-10-19T10:05:36.197
> 
> 标签：mongodb, database-design, web-applications, nosql

您推荐哪种 NoSQL 数据库，以及该架构将如何查找以下 Web 应用程序要求。

1.  可以有**很多用户**（500k+）

2.  **每个用户都可以输入他/她的文件**

3.  每个用户每月可能会创建 10-200 个文档

4.  每份文件都很小（大约 100 字）

5.  用户可以用他/她自己的标签来标记文档

6.  **来自不同用户的数据不会与其他用户及其数据交互**

7.  **用户可以通过标签搜索他的条目**

8.  **从一个用户快速访问所有条目**

9.  **用户可以创建复杂的动态查询来查询他/她的数据**

**我的想法是使用 MongoDB。但我看到的问题是只有两个集合：*users*和*entries*。**

在一个巨大的集合中按标签搜索对我来说似乎是个坏主意。恐怕索引的大小会非常大，因为每个用户都可以拥有自己的标签。MongoDB 将为整个集合创建标签索引，但我将始终只通过来自一个用户的条目而不是来自所有用户的条目来搜索标签。

**因此，每个用户的集合想法似乎更合适，但似乎可以创建多少集合是有限的，而且这种方法似乎是不受欢迎的。**

CouchDB 不支持动态查询，...

我应该如何在 MongoDB 中实现这个？或者命名一个更合适的 NoSQL 数据库。

**类似应用的示例：rememberthemilk、Trello、...**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T10:38:04.467

> 您推荐哪种 NoSQL 数据库，以及该架构将如何查找以下 Web 应用程序要求。

我不会像你问的那样为你定义你的应用程序，因为我们不在这里，但是我会回答你在这里实际陈述的一些问题和问题。

> 恐怕索引的大小会很大，因为每个用户都可以拥有自己的标签

的确，索引大小可能相当大，除非您限制用户可以应用的标签数量。大多数网站最多将标签限制为 10，有时（例如此处的问题）5。

您可能想研究将该集合拆分为集群中的较小部分。通过这些标签在正确定义的分片索引上进行查询绝不是缓慢或糟糕的。

即使标签索引不是您的分片索引，它仍然会执行非常快速的全局分散和收集操作（跨大型集合的查询使用的一个很好的例子是：http: [//docs.mongodb.org/manual/core/sharding /](http://docs.mongodb.org/manual/core/sharding/)）。

分片还可以帮助将庞大的索引分配到许多商品计算机上，从而降低成本但保持数据流。

因此，您首先要研究的是分片以及它如何为您提供帮助，这方面的一个很好的起点是：http: [//docs.mongodb.org/manual/core/sharding/](http://docs.mongodb.org/manual/core/sharding/)

> 因此，每个用户的集合想法似乎更合适，但似乎可以创建多少集合是有限的，而且这种方法似乎是不受欢迎的。

您还遇到了锁的问题，因为锁不像 SQL 那样不是集合级别，它实际上是 DB 级别（并且不要忘记名称空间限制，这取决于您现在的“大量”索引的大小）。很多人都掉进了陷阱，我现在要声明，正常设置对于 99% 的情况都可以，除非您可能是 Facebook，但即便如此，我认为它可能没问题。

> 类似应用的示例：rememberthemilk、Trello、...

实际上，我刚刚有人问了一个类似的问题：[Trello 如何在 MongoDB 中存储数据？（每块板的集合？）](https://stackoverflow.com/questions/12969344/how-does-trello-store-data-in-mongodb-collection-per-board)如果您查看评论，那里也可能会有所帮助。

# ios - UIImagePickerController 与 Cocos2D 2.0

> ID：12971915
> 
> 赞同：2
> 
> 时间：2012-10-19T10:05:48.377
> 
> 标签：ios, cocoa-touch, cocos2d-iphone

我想使用 UIImagePickerController，我找到了这个例子

添加到 .h

```
@interface MenuScene : CCLayer <UIImagePickerControllerDelegate, UINavigationControllerDelegate>
{
    UIWindow *window;
    UIImage *newImage;
} 
```

添加到 .m

```
-(void)pickPhoto:(UIImagePickerControllerSourceType)sourceType{    
    UIImagePickerController *picker = [[UIImagePickerController alloc]init];
    picker.delegate = self;
    picker.sourceType = sourceType;
    picker.wantsFullScreenLayout = YES;
    [picker presentViewController:picker animated:NO completion:nil];
    [[[CCDirector sharedDirector] view] addSubview:picker.view];
}

-(void)imagePickerController:(UIImagePickerController *)picker
        didFinishPickingMediaWithInfo:(NSDictionary *)info{
    newImage = [info objectForKey:@"UIImagePickerControllerOriginalImage"];
    [picker dismissViewControllerAnimated:YES completion:nil];
    [picker.view removeFromSuperview];
    [picker release];
    CCSprite *imageFromPicker = [CCSprite spriteWithCGImage:newImage.CGImage key:@"ImageFromPicker"];
} 
```

我尝试打电话，但它在消息`[self pickcPhoto:UIImagePickerControllerSourceTypeCamera]`中崩溃`[picker presentViewController:picker animated:NO completion:nil];`

由于未捕获的异常“NSInvalidArgumentException”而终止应用程序，原因：“应用程序试图在自身上呈现模态视图控制器。呈现控制器是 . '

我在 iOS 6 上使用 Cocos2d v2 测试，如果有任何建议，我将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T10:22:47.963

更改代码如下，只需更改带有`Edit in this line`注释的行或可以复制该行

```
-(void)pickPhoto:(UIImagePickerControllerSourceType)sourceType{    
    UIImagePickerController *picker = [[UIImagePickerController alloc]init];
    picker.delegate = self;
    picker.sourceType = sourceType;
    picker.wantsFullScreenLayout = YES;
    [self presentViewController:picker animated:NO completion:nil]; //Edit in this line
    [[[CCDirector sharedDirector] view] addSubview:picker.view];
}

-(void)imagePickerController:(UIImagePickerController *)picker
        didFinishPickingMediaWithInfo:(NSDictionary *)info{
    newImage = [info objectForKey:@"UIImagePickerControllerOriginalImage"];
    [self dismissViewControllerAnimated:YES completion:nil]; //Edit in this line
    [picker.view removeFromSuperview];
    [picker release];
    CCSprite *imageFromPicker = [CCSprite spriteWithCGImage:newImage.CGImage key:@"ImageFromPicker"];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T10:22:27.247

创建一个具有 UIImagePickerViewController 属性的 UIViewController 并以模态方式加载它。

检查这个非常有用的 Apple 示例[http://developer.apple.com/library/ios/#samplecode/PhotoPicker/Introduction/Intro.html#//apple_ref/doc/uid/DTS40010196-Intro-DontLinkElementID_2](http://developer.apple.com/library/ios/#samplecode/PhotoPicker/Introduction/Intro.html#//apple_ref/doc/uid/DTS40010196-Intro-DontLinkElementID_2)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-26T13:08:41.177

我发现此时cocos在iOS6和portrain方向上有些问题。ImagePickerController 仅在 portrain 中有效，因此这是崩溃的起源。我将监视此案例并在某些情况发生变化时进行更新。

# ios - 如何在 ios 应用程序中检测微笑

> ID：12971924
> 
> 赞同：0
> 
> 时间：2012-10-19T10:06:08.920
> 
> 标签：ios, opencv, face-recognition

我正在使用 CIFaceFeature 检测面部并微笑它正确检测到面部但它没有检测到这个人是否在微笑的天气我正在使用以下代码来检测微笑

```
CIImage* image = [CIImage imageWithCGImage:facePicture.CGImage];

// create a face detector - since speed is not an issue we'll use a high accuracy
// detector
CIDetector* detector = [CIDetector detectorOfType:CIDetectorTypeFace 
                                          context:nil options:[NSDictionary dictionaryWithObject:CIDetectorAccuracyLow forKey:CIDetectorAccuracy]];

// create an array containing all the detected faces from the detector    
NSArray* features = [detector featuresInImage:image];

// we'll iterate through every detected face.  CIFaceFeature provides us
// with the width for the entire face, and the coordinates of each eye
// and the mouth if detected.  Also provided are BOOL's for the eye's and
// mouth so we can check if they already exist.

//    NSLog(@"Finding: %d",[features count]);

HUDView.hidden = YES;
for(CIFaceFeature* faceFeature in features)
{
    HUDView.hidden = NO;
    // get the width of the face
    CGFloat faceWidth = faceFeature.bounds.size.width;

    // create a UIView using the bounds of the face
    //faceView = [[UIView alloc] initWithFrame:faceFeature.bounds];
    faceView.frame = faceFeature.bounds;
    // add a border around the newly created UIView
    faceView.backgroundColor = [UIColor clearColor];
    faceView.layer.borderWidth = 1;
    faceView.layer.borderColor = [[UIColor redColor] CGColor];

     if(faceFeature.hasMouthPosition)
    {
        // create a UIView with a size based on the width of the face
        NSLog(@"%f",faceFeature.rightEyePosition.x);
        NSLog(@"%f",faceFeature.leftEyePosition.x);
         NSLog(@"%f",faceFeature.mouthPosition.x);
        NSLog(@"%f %f %f %f",faceFeature.mouthPosition.x-faceWidth*0.2,faceFeature.mouthPosition.y-faceWidth*0.2, faceWidth*0.4, faceWidth*0.4);

        CGRect mouthRect = CGRectMake(faceFeature.mouthPosition.x-faceWidth*0.2, faceFeature.mouthPosition.y-faceWidth*0.2, faceWidth*0.4, faceFeature.bounds.size.height*0.4);

        CGRect pointRect = CGRectMake(faceFeature.mouthPosition.x-faceWidth*0.2, faceFeature.mouthPosition.y-faceWidth*0.2, 3, 3);

        pointView.frame = pointRect;
        [pointView setBackgroundColor:[[UIColor blueColor] colorWithAlphaComponent:0.5]];
        // set the position of the mouthView based on the face
        [pointView setCenter:faceFeature.mouthPosition];
        // round the corners
        pointView.layer.cornerRadius = faceWidth*0.2;

        //float topSpace = faceFeature.bounds.origin.y;
        float bottomSpace = 460- (faceFeature.bounds.origin.y+faceFeature.bounds.size.height);

        CGRect cutRect = CGRectMake(faceFeature.mouthPosition.x-faceWidth*0.2, bottomSpace+(faceWidth*0.75)+faceWidth*0.02, 
                                    faceWidth*0.4, faceWidth*0.2);

        mouthRect.origin.y += ((faceFeature.bounds.origin.y)+faceWidth*0.4);
        //mouthRect.origin.y += facePicture.bounds.size.height - (faceFeature.mouthPosition.y + faceWidth*0.2);
        //            CGImageRef imageRef = CGImageCreateWithImageInRect([facePicture CGImage], mouthRect);
        CGImageRef imageRef = CGImageCreateWithImageInRect([facePicture CGImage], cutRect);

        // or use the UIImage wherever you like

        //////////////////////////////////////////////////////////////

        UIImage *smileData = [UIImage imageWithCGImage:imageRef];
       smileView.image = [[SDetector detector] convertImageToGrayColor:smileData];
        CGImageRelease(imageRef);

        NSMutableArray *histoData = [[SDetector detector] getHistogramArray:smileData];

        int value = [[SDetector detector] smileProcess:histoData];
        scoreLB.text = [NSString stringWithFormat:@"%d",value];

       //histogramImageView.image = [[SDetector detector] drawHistogram:histoData];

        //////////////////////////////////////////////////////////////

        oldHistoArr = newHistoArr;
        newHistoArr = histoData;

        int oldSum=0,oldAVG=0;
        int newSum=0,newAVG=0;

        oldDiffSUM = newDiffSUM;

        newDiffSUM = 0;
        NSLog(@"[oldHistoArr count]:>>>>>>>>>>>>>%d",[oldHistoArr count]);
         NSLog(@"[newHistoArr count]:>>>>>>>>>>>>>%d",[newHistoArr count]);
        if ([oldHistoArr count]>0) {
            for (int i=0; i<256; i++) 
            {
                oldSum += [[oldHistoArr objectAtIndex:i] intValue];
                newSum += [[newHistoArr objectAtIndex:i] intValue];

                newDiffSUM += 0.7*abs([[oldHistoArr objectAtIndex:i] intValue] - [[newHistoArr objectAtIndex:i] intValue]);
            }

            oldAVG = oldSum/256;
            newAVG = newSum/256;            

            float multi = ((float)(250-faceWidth)/250.0) /1.9 +1.0;

            float ratio = (float)newDiffSUM/(float)oldDiffSUM;

            if (ratio>2) {
                ratio = ratio*multi;
            }
            NSLog(@"FW: %f[%f]   [DIFF: %d]\t%f\t%f",faceWidth,multi,newDiffSUM,ratio,ratio/6.0);

            [progressView setProgress:ratio/6.0];

            scoreLB.text = [NSString stringWithFormat:@"%d",newDiffSUM];

            if (ratio >= currentLevel && autoON) {
                NSLog(@"Capture At %f > %f", ratio,currentLevel);
                [self captureStillImage:nil];
            }
        }
        ////////////////////////////////////////////

        mouth.frame = mouthRect;
        // change the background color for the mouth to green
        [mouth setBackgroundColor:[[UIColor greenColor] colorWithAlphaComponent:0.3]];
        // set the position of the mouthView based on the face
        [mouth setCenter:faceFeature.mouthPosition];
        // round the corners
        mouth.layer.cornerRadius = faceWidth*0.2;
        // add the new view to the window
        NSLog(@"%f",faceFeature.bounds.size.height);
    }

    //NSLog(@"Lx%.2f Ly%.2f Rx%.2f Ry%.2f Mx%.2f My%.2f", faceFeature.leftEyePosition.x, faceFeature.leftEyePosition.y, faceFeature.rightEyePosition.x, faceFeature.rightEyePosition.y, faceFeature.mouthPosition.x, faceFeature.mouthPosition.y);

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-25T05:08:57.377

从 iOS 7 开始，您可以使用 CoreImage 检测微笑。这是 Beta 2 的 API 差异：

> 核心图像
> 
> CIDetector.h
> 
> 添加 CIDetectorEyeBlink
> 
> 添加 CIDetectorSmile

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-08-20T19:53:47.277

CoreImage 足以检测图像中的微笑。

```
NSDictionary *options = @{ CIDetectorSmile: @(YES), CIDetectorEyeBlink: @(YES),};
NSArray *features = [detector featuresInImage:image options:options]; 
```

然后你可以检查天气 faceFeature 的 hasSmile 功能返回 YES 或 NO

在 swift 3- 首先，您将“图像”作为 CIImage，然后按照代码进行操作 -

```
let cid = CIDetector(ofType: CIDetectorTypeFace, context: nil, options: [CIDetectorAccuracy : CIDetectorAccuracyHigh , CIDetectorSmile : true , CIDetectorTypeFace  : true  ] )

let faces = cid!.features(in: image!, options: [CIDetectorSmile : true , CIDetectorEyeBlink : true , CIDetectorImageOrientation : 1])

for face in faces as! [CIFaceFeature] {
    print("Is right eye closed : \(face.rightEyeClosed)"
    print("Is left eye closed : \(face.leftEyeClosed)"
    print("Is having smile : \(face.hasSmile)"
} 
```

# c# - 从 DateTime 中删除时间部分

> ID：12971927
> 
> 赞同：0
> 
> 时间：2012-10-19T10:06:13.267
> 
> 标签：c#, asp.net

在将时间部分传递给 GridView 之前，如何从 DateTime 中删除时间部分。我正在使用 VS2008，否则我将使用 Date :(

```
 DataTable datatablePlanning = new DataTable("Planning");

  DateTime begindate = DatePicker1.SelectedDate;

  DataRow detailregel = datatablePlanning.NewRow();
  detailregel["Date"] = begindate;
  datatablePlanning.Rows.Add(detailregel);

  GridView2.DataSource = datatablePlanning;
  GridView2.DataBind(); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-19T10:08:04.340

您可以格式化您的日期。

```
detailregel["Date"] = begindate.ToString("dd/MM/yyyy"); 
```

或者你可以试试

```
detailregel["Date"] = begindate.ToShortDateString(); 
```

对于不同的格式，您可以查看

> [自定义日期和时间格式字符串](http://msdn.microsoft.com/en-us/library/8kb3ddd4.aspx)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-19T10:08:58.570

您可以格式化日期如下...

```
detailregel["Date"] = begindate.ToString("dd/MM/yyyy"); 
```

你可以找到前信息[DateTime 属性](http://msdn.microsoft.com/en-us/library/system.datetime.date.aspx)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-19T10:13:29.693

你可以像这样给出绑定文本框的文本属性 Text='<%# Bind("Date","{0:MM/dd/yyyy}") %>'

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-19T10:20:04.627

您还可以在网格视图项模板中使用 EVAL 在设计模式下进行格式化：

```
 <%# Convert.ToDate(Eval("Your_Date")).ToShortDateString()%> 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-19T10:21:54.203

如果您不关心网格视图中日期的时间部分，只需将其格式化以显示日期部分

```
<asp:Label ID="lblDate" runat="server" Text='<%# Eval("Date", "{0:MM/d/yyyy}")%>'></asp:Label> 
```

# javascript - Internet Explorer 中的 pcm 数据支持

> ID：12971942
> 
> 赞同：0
> 
> 时间：2012-10-19T10:07:41.937
> 
> 标签：javascript, html, internet-explorer, audio, web-audio-api

用于在 HTML5 中播放音频 PCM 数据，在 WebAudio API（Chrome..）中，（mozSetup，mozWriteAudio 在 firefox 中）。在这些 API 中，我们可以附加 PCM 数据（firefox）或者为播放数据提供计时器（chrome 中的 noteon 函数） . 我为 Internet Explorer 搜索这些类型的 API，但找不到任何方法。IE中有什么方法可以播放pcm数据吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T11:02:03.477

目前，没有什么比 Internet Explorer 中的 Web Audio API（或 Audio Data API，由于它已被 W3C 拒绝，因此不会进一步开发）更强大的了。您可以做的最好的事情是使用 <audio> 元素，但它只会让您到目前为止.. 据我所知，它不会让您写入动态 PCM 数据，而无需恢复到 Flash 等。

# php - PHP 的简单 LinkedIn API 教程

> ID：12971944
> 
> 赞同：0
> 
> 时间：2012-10-19T10:07:57.620
> 
> 标签：php, api, linkedin

我发现 PHP 的 LinkedIn API 文档很糟糕。谁能告诉我如何[获取公司信息](https://developer.linkedin.com/documents/company-lookup-api-and-fields)？从身份验证到结束响应？

我是一名新手程序员，但我已经成功地使用了 Facebook 和 Twitter API。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T15:15:18.933

我编写了一个[PHP 库](http://code.google.com/p/simple-linkedinphp/)，其中包含使用[公司 API的](https://developer.linkedin.com/documents/companies)[演示](http://code.google.com/p/simple-linkedinphp/source/browse/trunk/v3/3.2/3.2.0/demo/company.php)。关于 LinkedIn 使用的新范围权限方案，它有点过时了，但有一些[解决方法来支持权限](https://stackoverflow.com/questions/11976188/linkedin-oauth-scope-issue-with-php-library)。

# splunk - Splunk - 指定向下钻取搜索

> ID：12971946
> 
> 赞同：1
> 
> 时间：2012-10-19T10:08:00.207
> 
> 标签：splunk, sideviewutils

我对 Splunk 比较陌生，正在创建一个新视图来显示过去 5 分钟内某些事件的平均时间。我创建了一个宏搜索来执行搜索，该搜索需要两个参数（交易名称和搜索持续时间），所以在我的第一个面板中，这是 EVENT_*_LOGIN 和 -5m。该视图当前显示每个不同事件名称的简单结果表。

我想做的是，当用户单击特定行时，它将向下钻取到过去 4 小时内该事务的所有事件的时间线视图。有没有办法指定单击或向下钻取显示的信息？

抱歉，如果这含糊不清，如果有更多信息，请给我发消息。需要。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T17:54:45.883

最简单的方法是使用[**SideView Utils**](http://sideviewapps.com/apps/sideview-utils/)并利用它们的`Redirector`or`Search`模块根据用户点击的内容自定义填充搜索查询。

### 根据单击的图表在弹出窗口中打开自定义搜索

```
<module name="FlashChart">
    <param name="width">100%</param>
    <module name="Redirector">
        <param name="popup">True</param>
        <param name="url">flashtimeline</param>
        <param name="arg.q">search MyField="$click.value$" eventtype="#$click.name2$" hoursago=4</param>
    </module>
</module> 
```

### 根据单击的表格元素在弹出窗口中打开自定义搜索

```
<module name="SimpleResultsTable">
    <param name="drilldown">all</param> 
    <module name="Redirector">
        <param name="popup">True</param>
        <param name="url">flashtimeline</param>
        <param name="arg.q">search MyField="$click.value$" eventtype="#$click.name2$" hoursago=4</param>
    </module>
</module> 
```

您可以访问`Search`/`Redirector`使用 Splunk Web 安装的文档：

```
    http://[splunk_web]/en-US/modules#Splunk.Module.Redirector
    http://[splunk_web]/en-US/modules#Splunk.Module.Search

```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-15T17:37:50.177

从 Splunk 版本 5 开始，它们现在支持动态向下钻取。[检查此处](http://docs.splunk.com/Documentation/Splunk/latest/Viz/Dynamicdrilldownindashboardsandforms)的文档以查看是否满足您的需要。

# c++ - 在运行时使用模板参数实例化类（C++）？

> ID：12971948
> 
> 赞同：3
> 
> 时间：2012-10-19T10:08:00.743
> 
> 标签：c++, templates

是否可以通过以下方式在运行时使用模板参数实例化一个类？：

```
#include <iostream>
#include <vector>

using namespace std;

template<typename T>
struct Foo {
  vector<T> d;
};

template<typename T>
struct Solver {
  Foo<T> data;

  virtual void calc() = 0;
};

struct SolverA : Solver<int>
{
  void calc() 
  {
    cout << "PRINT A\n";
  }
};

struct SolverB : Solver<double>
{
  void calc() 
  {
    cout << "PRINT B\n";
  }
};

int main()
{
  ... solver;

  if (...) {
    solver = new SolverA;
  } else {
    solver = new SolverB;
  }

  solver->calc();
} 
```

所以类`SolverA`并`SolverB`没有模板参数，但不能在编译时决定使用哪一个。我尝试使用`boost::any`它，但我不确定如何转换变量`solver`来调用函数`calc()`。还有其他想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-19T10:15:05.900

为您的班级添加一个界面：

```
#include <iostream>
#include <vector>

using namespace std;

template<typename T>
struct Foo {
  vector<T> d;
};

struct SolverIface
{
  virtual void calc() = 0;
};

template<typename T>
struct Solver : SolverIface {
  Foo<T> data;
};

struct SolverA : Solver<int>
{
  void calc()
  {
    cout << "PRINT A\n";
  }
};

struct SolverB : Solver<double>
{
  void calc()
  {
    cout << "PRINT B\n";
  }
};

int main()
{
  SolverIface *solver;

  if (0) {
    solver = new SolverA;
  } else {
    solver = new SolverB;
  }

  solver->calc();
} 
```

模板和虚拟调度不适用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-19T10:14:53.060

不，没有，也不应该有，因为`SolverA`和`SolverB`是**完全不相关的类型**。它们有不同的基类。

你可以做的是：

```
struct SolverInterface
{
  virtual void calc() = 0;
};

template<typename T>
struct Solver : SolverInterface {
  Foo<T> data;
};

int main()
{
   SolverInterface* solver;
   if (...) {
      solver = new SolverA;
   } else {
      solver = new SolverB;
   }
   solver->calc();
} 
```

# android - HttpResponseCache 在 Galaxy S3 上不起作用

> ID：12971949
> 
> 赞同：2
> 
> 时间：2012-10-19T10:08:02.037
> 
> 标签：android, httpresponse, http-response-codes

我在`HTTPResponseCache`. 该实现`Android 4.0.3`在 Galaxy S2 设备中的版本中运行良好，而在具有 Android 4.0.4 版本的 Galaxy S3 设备中，相同的代码对我不起作用。

在阅读时，`InputStream`它会抛出在飞行模式下找不到的异常 URL。如果有人有想法，请分享。

谢谢。

请在 Galaxy S3 上发送请求时找到和平代码和异常。

```
 private void executeGETRequest(){
        InputStream inStream = null;
        String result = "";
        try{
        URL url = new URL("http://example.com/target");

        HttpURLConnection urlConnection = (HttpURLConnection) url.openConnection();       
        urlConnection.setUseCaches(true);
        urlConnection.addRequestProperty("Client-Identity", getHeader());
        urlConnection.addRequestProperty("Cache-Control", "max-stale=" + NetworkConstants.MAX_STALE_TIME);       
        urlConnection.setRequestProperty("Accept", "application/json");

        inStream = urlConnection.getInputStream();//Point where the error occur

        if(null != inStream){
            result = convertStreamInToString(inStream);
            //result output
        }
        result = null;
        inStream.close();
        inStream = null;       
        }catch(Exception e){
        e.printstack();
        }
    } 
```

例外是

```
:- 10-22 14:10:35.110: W/System.err(6194): java.net.UnknownHostException: Unable to resolve host "www.example.com": No address associated with hostname
10-22 14:10:35.110: W/System.err(6194):     at java.net.InetAddress.lookupHostByName(InetAddress.java:400)
10-22 14:10:35.110: W/System.err(6194):     at java.net.InetAddress.getAllByNameImpl(InetAddress.java:242)
10-22 14:10:35.110: W/System.err(6194):     at java.net.InetAddress.getAllByName(InetAddress.java:220)
10-22 14:10:35.110: W/System.err(6194):     at libcore.net.http.HttpConnection.<init>(HttpConnection.java:71)
10-22 14:10:35.110: W/System.err(6194):     at libcore.net.http.HttpConnection.<init>(HttpConnection.java:50)
10-22 14:10:35.115: W/System.err(6194):     at libcore.net.http.HttpConnection$Address.connect(HttpConnection.java:351)
10-22 14:10:35.115: W/System.err(6194):     at libcore.net.http.HttpConnectionPool.get(HttpConnectionPool.java:86)
10-22 14:10:35.115: W/System.err(6194):     at libcore.net.http.HttpConnection.connect(HttpConnection.java:128)
10-22 14:10:35.115: W/System.err(6194):     at libcore.net.http.HttpEngine.openSocketConnection(HttpEngine.java:308)
10-22 14:10:35.115: W/System.err(6194):     at libcore.net.http.HttpEngine.connect(HttpEngine.java:303)
10-22 14:10:35.115: W/System.err(6194):     at libcore.net.http.HttpEngine.sendSocketRequest(HttpEngine.java:282)
10-22 14:10:35.115: W/System.err(6194):     at libcore.net.http.HttpEngine.sendRequest(HttpEngine.java:232)
10-22 14:10:35.115: W/System.err(6194):     at libcore.net.http.HttpURLConnectionImpl.getResponse(HttpURLConnectionImpl.java:273)
10-22 14:10:35.115: W/System.err(6194):     at libcore.net.http.HttpURLConnectionImpl.getInputStream(HttpURLConnectionImpl.java:168)
10-22 14:10:35.115: W/System.err(6194):     at com.network.NetworkManager.executeGETRequest(NetworkManager.java:257)
10-22 14:10:35.115: W/System.err(6194):     at com.network.NetworkManager.processRequest(NetworkManager.java:325)
10-22 14:10:35.115: W/System.err(6194):     at com.network.NetworkManager.access$0(NetworkManager.java:307)
10-22 14:10:35.115: W/System.err(6194):     at com.network.NetworkManager$1.run(NetworkManager.java:408)
10-22 14:10:35.115: W/System.err(6194):     at java.lang.Thread.run(Thread.java:856) 
```

谢谢

# android - Android：SensorManager.getOrientation() 适用于移动设备，但不适用于平板电脑

> ID：12971953
> 
> 赞同：1
> 
> 时间：2012-10-19T10:08:13.910
> 
> 标签：android, orientation

我使用 SensorManager.getOrientation() 在移动设备上工作，但在平板电脑上不工作。

```
float[] mGravity;
float[] mGeomagnetic;
float RR[] = new float[9];
float I[] = new float[9];
float orientation[] = new float[3];

SensorManager mSensorManager = (SensorManager) getSystemService(SENSOR_SERVICE);
Sensor mAccelerometer = mSensorManager.getDefaultSensor(Sensor.TYPE_ACCELEROMETER);
Sensor mMageneticField = mSensorManager.getDefaultSensor(Sensor.TYPE_MAGNETIC_FIELD);

mSensorManager.registerListener(this,mAccelerometer,SensorManager.SENSOR_DELAY_NORMAL);
mSensorManager.registerListener(this,mMageneticField,SensorManager.SENSOR_DELAY_NORMAL); 
```

// onSensorChanged 内部

```
if (event.sensor.getType() == Sensor.TYPE_ACCELEROMETER)
{   
mGravity = event.values.clone();    
}
if (event.sensor.getType() == Sensor.TYPE_MAGNETIC_FIELD)
{
    mGeomagnetic = event.values.clone();
}

SensorManager.getRotationMatrix(RR, I, mGravity, mGeomagnetic);
SensorManager.getOrientation(RR, orientation);
azimuth = orientation[0];
pitch = orientation[1];
roll = orientation[2];
System.out.println("Pitch " + pitch); 
```

谁能帮帮我

# knockout.js - 为什么我不能指定 ko.observable 应该如何解析它的值？

> ID：12971957
> 
> 赞同：3
> 
> 时间：2012-10-19T10:08:21.893
> 
> 标签：knockout.js

当我深入研究 knockout.js 的概念时，我很难理解为什么我不能告诉 ko.observable 如何解析/写入它的值，如下所示：

```
 dateValue = ko.observable({
        read: function (dateString) {
            /*convert a date string to an object here for internal storage*/
            return Globalize.parseDate(dateString, 'd');
        },
        write: function (dateObj) {
             /*format a date object for output*/
            return Globalize.formatDate(dateObj, 'd');
        }
    }) 
```

我知道 ko.computed 是为此目的而存在的，但它们仍然要求我在需要写入 read() 的结果的地方保持可观察的“影子”。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-20T02:35:31.037

编写一个扩展器来添加一个`formatted`计算的 observable，这样您就可以读取或写入格式化的值，同时仍然可以访问“原始”未格式化的值。

```
ko.extenders['date'] = function (target, format) {
    var formatted = ko.computed({
        'read': function () {
            return Globalize.parseDate(target(), format);
        },
        'write': function (date) {
            target(Globalize.format(date, format));
        }
    });
    target.formatted = formatted;
    return target;
};

dateValue = ko.observable('10/19/2012').extend({ 'date': 'd' });

// e.g.,
dateValue();           // 10/19/2012
dateValue.formatted(); // Fri Oct 19 2012 00:00:00 GMT-0700 (Pacific Daylight Time)

dateValue.formatted(new Date(2012, 9, 31));

dateValue();           // 10/31/2012
dateValue.formatted(); // Wed Oct 31 2012 00:00:00 GMT-0700 (Pacific Daylight Time) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T10:53:51.013

您需要使用 ko.computed 而不是 ko.observable。见下文。Observables 通常只包含值或其他 observables。Computed 用于进行计算

```
 dateValue = ko.computed({
        read: function () {
            /*convert a date string to an object here for internal storage*/
            return Globalize.parseDate(this, 'd');
        },
        write: function (dateObj) {
             /*format a date object for output*/
            return Globalize.formatDate(dateObj, 'd');
        },
        owner: viewmodel.dateObservable
    }) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-19T11:01:54.037

经过一些研究，我发现[扩展器](http://knockoutjs.com/documentation/extenders.html)完全符合我的要求，例如，它们可以在设置后立即自动转换可观察对象上的值。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-19T21:21:08.277

你可以在没有扩展器的情况下这样写：

```
// dateValue() is the raw date object
// dateValue.formatted() will return the formatted date as well 
// as parse a date string and save it back to the observable
dateValue = ko.observable();
dateValue.formatted = ko.computed({
    read: function () {
        /*format a date object for output*/
        return Globalize.formatDate(dateValue(), 'd')
    },
    write: function (dateObj) {
        /*convert a date string to an object here for internal storage*/
        dateValue(Globalize.parseDate(dateObj, 'd'));
    }
}); 
```

# unit-testing - 未使用嵌入式 tomcat 7 实例化托管 bean

> ID：12971961
> 
> 赞同：0
> 
> 时间：2012-10-19T10:08:27.510
> 
> 标签：unit-testing, jsf, tomcat

我有一个使用 myfaces 和 primefaces 的相当小的 JSF 2 应用程序。它在 Eclipse 中设置为 tomcat 7 服务，并且工作正常，包括 ajax 和作品。

但是，我想对其进行单元测试，因此我添加了 Tomcat 7 作为测试依赖项并创建了适当的启动代码。

```
// create tomcat
Tomcat tomcat = new Tomcat();
tomcat.setPort(HTTP_PORT);

// add "web" as a webapp, all classes that are in the current classpath (all in eclipse) are available
Context ctx = tomcat.addWebapp("/" + CONTEXT_PREFIX, new File("src/main/webapp").getAbsolutePath());

// start the server (but do not wait)
tomcat.start(); 
```

这也正确启动，但未加载托管 bean。因此，即使页面看起来不错，也没有任何行为。问题似乎和这篇 Jetty 博客类似，讲的是 Jetty 如何只搜索某个位置的托管 bean。

[http://musingsofaprogrammingaddict.blogspot.com.au/2009/12/running-jsf-2-on-embedded-jetty.html](http://musingsofaprogrammingaddict.blogspot.com.au/2009/12/running-jsf-2-on-embedded-jetty.html)

Tomcat 服务器的 Eclipse 中的 Web 部署程序集将所有类文件放在 WEB-INF/classes 中，所以这可能是问题所在。

嵌入式 Tomcat 7 是否可以使用 addWebapp（以便对 web.xml 进行单元测试）但将 WEB-INF/classes 重定向到正确的目录？

# jsoup - 使用 JSoup 基于标签范围的 HTML 搜索

> ID：12971962
> 
> 赞同：1
> 
> 时间：2012-10-19T10:08:28.883
> 
> 标签：jsoup

有以下 HTML，请告诉我如何使用 JSoup 获取文本，`"<html"`尝试`"<a id="summary"></a>"`了以下正则表达式，但它返回空字符串。

`doc.select("*:matches(^[<html]*[a>]$)")`

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<title>TestNG:  Unit Test</title>
 </head>
<body>
<a id="summary"></a>

<table cellspacing=0 cellpadding=0 class="param" style="float: left; width:630px;">
<tr><th>Test</th><th class="numi">Methods<br/>Passed</th><th class="numi">Scenarios<br/>Passed</th><th class="numi"># skipped</th><th class="numi"># failed</th><th class="numi">Total<br/>Time</th><th class="numi">Included<br/>Groups</th><th class="numi">Excluded<br/>Groups</th></tr>   
</table>

</body></html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T10:52:51.207

这有点棘手，因为您必须先深入遍历 DOM。NodeTraversor允许您[这样](http://jsoup.org/apidocs/org/jsoup/select/NodeTraversor.html)做。

这是一个例子：

```
package stuff;

import org.jsoup.Jsoup;
import org.jsoup.nodes.Document;
import org.jsoup.nodes.Element;
import org.jsoup.nodes.Node;
import org.jsoup.select.Elements;
import org.jsoup.select.NodeTraversor;
import org.jsoup.select.NodeVisitor;

public class A {

    public static void main(String[] args) {
        String html = "<!DOCTYPE html PUBLIC \"-//W3C//DTD XHTML 1.1//EN http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd\">" +
                "<html xmlns=\"http://www.w3.org/1999/xhtml\">" +
                "<head>" +
                "<title>TestNG:  Unit Test</title>" +
                "</head>" +
                "<body>" +
                "<a id=\"summary\"></a>" +
                "<table cellspacing=0 cellpadding=0 class=\"param\" style=\"float: left; width:630px;\">" +
                "<tr><th>Test</th><th class=\"numi\">Methods<br/>Passed</th><th class=\"numi\">Scenarios<br/>Passed</th><th class=\"numi\"># skipped</th><th class=\"numi\"># failed</th><th class=\"numi\">Total<br/>Time</th><th class=\"numi\">Included<br/>Groups</th><th class=\"numi\">Excluded<br/>Groups</th></tr>" +
                "</table>" +
                "</body>" +
                "</html>";
        System.out.println(parse(html));
        String html2 = "<!DOCTYPE html PUBLIC \"-//W3C//DTD XHTML 1.1//EN http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd\">" +
                "<html xmlns=\"http://www.w3.org/1999/xhtml\">" +
                "<head>" +
                "<title>TestNG:  Unit Test</title>" +
                "</head>" +
                "<body>" +
                "<a id=\"something_else\"></a>" +
                "<a id=\"summary\"></a>" +
                "<table cellspacing=0 cellpadding=0 class=\"param\" style=\"float: left; width:630px;\">" +
                "<tr><th>Test</th><th class=\"numi\">Methods<br/>Passed</th><th class=\"numi\">Scenarios<br/>Passed</th><th class=\"numi\"># skipped</th><th class=\"numi\"># failed</th><th class=\"numi\">Total<br/>Time</th><th class=\"numi\">Included<br/>Groups</th><th class=\"numi\">Excluded<br/>Groups</th></tr>" +
                "</table>" +
                "</body>" +
                "</html>";
        System.out.println(parse(html2));
    }

    public static String parse(String html) {
        Document document = Jsoup.parse(html);
        final StringBuffer buffer = new StringBuffer();
        NodeTraversor nd = new NodeTraversor(new NodeVisitor() {

            private boolean finished = false;

            @Override
            public void tail(Node node, int depth) {
                if (!finished && node instanceof Element) {
                    Element element = (Element) node;
                    if ("a".equals(element.tagName()) && element.hasAttr("id")
                            && "summary".equals(element.attr("id")))
                        finished = true;
                    else
                        buffer.append(element.toString());
                }
            }

            @Override
            public void head(Node arg0, int arg1) {
            }
        });
        buffer.append(document.head().html());
        buffer.append("<body>");
        nd.traverse(document.body());
        return buffer.toString();
    }
} 
```

这不是特别好（尤其是在做的时候`buffer.append("<body>");`）......但这很快:)

另请参阅[此答案](https://stackoverflow.com/a/6594828/162684)以获取相关示例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-10-07T04:17:36.707

我不确定，但你可以试试这个。当元素由“a”标签触发时，它将停止在边界循环

```
Elements doc=select("what u want");
String dummy="";
for (Element e:doc){

    if (dummy.isEmpty()){
        System.out.println(e);
        if (e.tagName().matches("a")){
            dummy=e.tagName();
        }

    }
} 
```

# php - 如何在 joomla 1.5 上为 css 和 js 应用 gzip

> ID：12971963
> 
> 赞同：1
> 
> 时间：2012-10-19T10:08:29.947
> 
> 标签：php, gzip, joomla1.5

我正在尝试压缩一些文件以提高我网站的速度。我在 htaccess 文件中执行此操作，它适用于除少数文件之外的所有内容。

我已从管理部分启用 gzip。

如何在 joomla 1.5 中为 css 和 js 文件启用 gzip？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T10:24:54.967

我也遇到了同样的问题..因为我必须在其中应用代码的 .htacess 文件

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-19T10:57:10.547

你检查过 joomla 扩展页面吗？ [http://extensions.joomla.org/extensions/core-enhancements/performance/site-performance](http://extensions.joomla.org/extensions/core-enhancements/performance/site-performance)

有一些插件可以为您做到这一点。

# javascript - 一种更有效的处理 javascript / dom 渲染问题的方法？

> ID：12971964
> 
> 赞同：0
> 
> 时间：2012-10-19T10:08:33.540
> 
> 标签：javascript, html, css, dom, html-rendering

提前为冗长的解释道歉。我觉得这个画得最好！:P

假设我有 10 个绝对（css）放置在彼此之上的 div。每个 div 包含几个透明的 png，它们也相互叠加，共同形成一个视觉整体。我当时只显示 1 个 div，用户可以通过单击箭头或按钮切换到下一个 div。这个箭头/按钮包含一个标签，它告诉我下一个要显示的 div，因此我通过 javascript 隐藏所有 div，然后在此之后立即显示适当的 div。

为什么在大多数浏览器中这么慢？有没有更好的方法来做这样的事情？IE 和 Firefox 似乎可以快速流畅地切换 div，而 Chrome 显示延迟。以下是 html 和 javascript 的概述：

HTML：

```
 <div id="div1" class="active generic">
                <img src="sample00.png" width="1000" height="564" class="a1" />
                <img src="sample01.png" width="1000" height="564" class="a2" />
                <img src="sample02.png" width="1000" height="564" class="a3" />
                <img src="sample03.png" width="1000" height="564" class="a4" />
                <img src="sample04.png" width="1000" height="564" class="a5" />
            </div>
            <div id="div2" class="generic">
                <img src="sample05.png" width="1000" height="564" class="a1" />
                <img src="sample06.png" width="1000" height="564" class="a2" />
                <img src="sample07.png" width="1000" height="564" class="a3" />
                <img src="sample08.png" width="1000" height="564" class="a4" />
                <img src="sample09.png" width="1000" height="564" class="a5" />
            </div> 
```

等等...

Javascript：

```
a++;
var gen = $('.generic');
var div = $('#div' + a);
gen.hide().removeClass('activeFrame');
div.show().addClass('activeFrame'); 
```

对于任何人来说，给出更好的解决方案可能都太模糊了。但是如果有人可以向我解释为什么这在某些浏览器/低端系统上会很慢以及我如何能够解决这个问题，我可以利用这些知识自己思考一些事情（或者接受它就是这样） .

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T10:13:27.730

互联网上有很多关于 jquery 性能提示的文章。请阅读那些。下面是一些链接

### [http://www.smashingmagazine.com/learning-javascript-essentials-guidelines-tutorials/](http://www.smashingmagazine.com/learning-javascript-essentials-guidelines-tutorials/)

### [http://www.artzstudio.com/2009/04/jquery-performance-rules/#harness-chaining](http://www.artzstudio.com/2009/04/jquery-performance-rules/#harness-chaining)

### [http://www.slideshare.net/AddyOsmani/jquery-proven-performance-tips-tricks](http://www.slideshare.net/AddyOsmani/jquery-proven-performance-tips-tricks)

### [http://tomsbigbox.com/10-best-practices-for-jquery-beginners/](http://tomsbigbox.com/10-best-practises-for-jquery-beginners/)

# syntax - F# 中重载的内联运算符：( |+| )

> ID：12971965
> 
> 赞同：3
> 
> 时间：2012-10-19T10:08:42.847
> 
> 标签：syntax, f#, operator-overloading

我正在尝试定义一个重载的运算符，例如`|+|`，如下所示：

```
let inline ( |+| ) (m1 : #IMeasurable) (m2 : #IMeasurable) = m1.Measure + m2.Measure 
```

问题是，我不能这样做：

```
let three = m1 |+| m2 |+| m3 
```

因为`|+|`没有为 case 定义运算符`(m1 : int) (m2 : #IMeasurable)`。有没有办法重载这个运算符或使用静态类型约束来使上述表达式成为可能？有没有办法修改`IMeasurable`（我可以编辑），所以这是可能的？还有什么可以让上述表达式起作用的吗？

谢谢你。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-19T10:25:31.377

```
type Overloads = Overloads with
    static member ($) (Overloads, m1: #IMeasurable) = fun (m2: #IMeasurable) -> m1.Measure + m2.Measure 
    static member ($) (Overloads, m1: int) = fun (m2: #IMeasurable) -> m1 + m2.Measure

let inline ( |+| ) m1 m2 = (Overloads $ m1) m2 
```

未经测试，因为我没有 IMeasurable，但它可能会完成这项工作。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-19T10:30:15.597

如果您要定义一个行为类似的运算符，`+`那么我认为最好的设计是定义一个返回与其参数类型相同类型的值的运算符。这意味着我会将运算符更改为 return`IMeasurable`而不是`int`：

```
type IMeasurable =
  abstract Measure : int

let newMeasure m = 
  { new IMeasurable with 
      member x.Measure = m }

let inline ( |+| ) (m1 : #IMeasurable) (m2 : #IMeasurable) = 
  newMeasure (m1.Measure + m2.Measure) 
```

这将使操作符定义更加统一和易于使用。您要编写的代码现在可以工作（返回`IMeasurable`），但您也可以使用`Seq.reduce`：

```
// Now you can add multiple measure values without issues
let res = (newMeasure 2) |+| (newMeasure 3) |+| (newMeasure 4)

// Moreover, you can also use `Seq.reduce` which would not work
// with your original operator (because it has wrong type)
let res = [newMeasure 2; newMeasure 3; newMeasure 4] |> Seq.reduce (|+|) 
```

也就是说，如果你真的想重载使用定义的运算符`let`并且你不能将它作为静态成员添加到类型中（因为你不能修改类型），那么你需要使用 Gustavo 描述的技巧

# c# - 无法检测 Session 变量是否存在

> ID：12971966
> 
> 赞同：15
> 
> 时间：2012-10-19T10:08:50.743
> 
> 标签：c#, asp.net, session, session-variables, nullreferenceexception

我正在尝试确定`Session`变量是否存在，但出现错误：

> System.NullReferenceException：对象引用未设置为对象的实例。

代码：

```
 // Check if the "company_path" exists in the Session context
    if (System.Web.HttpContext.Current.Session["company_path"].ToString() != null)
    {
        // Session exists, set it
        company_path = System.Web.HttpContext.Current.Session["company_path"].ToString();
    }
    else
    {
        // Session doesn't exist, set it to the default
        company_path = "/reflex/SMD";
    } 
```

那是因为`Session`名称“company_path”不存在，但我检测不到！

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-10-19T10:09:37.137

如果要检查 Session["company_path"] 是否为空，请不要使用 ToString()。作为`if Session["company_path"] is null then Session["company_path"].ToString() will give you exception.`

**改变**

```
if (System.Web.HttpContext.Current.Session["company_path"].ToString() != null)
{
    company_path = System.Web.HttpContext.Current.Session["company_path"].ToString();
}
else
{
    company_path = "/reflex/SMD";
} 
```

**到**

```
if (System.Web.HttpContext.Current.Session["company_path"]!= null)
{
      company_path = System.Web.HttpContext.Current.Session["company_path"].ToString();
}
else
{
      company_path = "/reflex/SMD";
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2018-10-04T09:22:24.230

这可以在最新版本的 .NET 中使用 null-conditional`?.`和 null-coalesce来解决`??`：

```
// Check if the "company_path" exists in the Session context
company_path = System.Web.HttpContext.Current.Session["company_path"]?.ToString() ?? "/reflex/SMD"; 
```

链接：

[https://docs.microsoft.com/en-us/dotnet/csharp/language-reference/operators/null-coalescing-operator](https://docs.microsoft.com/en-us/dotnet/csharp/language-reference/operators/null-coalescing-operator) [https://docs.microsoft.com/en-us/dotnet/csharp/language-reference /operators/null 条件运算符](https://docs.microsoft.com/en-us/dotnet/csharp/language-reference/operators/null-conditional-operators)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-08-12T12:36:42.307

如果在 Azure 上部署（截至 2017 年 8 月），还可以检查是否填充了会话密钥数组，例如：

```
Session.Keys.Count > 0 && Session["company_path"]!= null 
```

# javascript - jquery加载和卸载

> ID：12971967
> 
> 赞同：0
> 
> 时间：2012-10-19T10:08:52.423
> 
> 标签：javascript, jquery, html

我有两个链接，比如说链接 1 和链接 2。当用户单击其中任何一个时，它会使用 jquery 加载功能动态加载单独的 html 页面。它工作正常，但我想要的是当用户点击链接 1 时，它首先卸载已经在容器 div 中的上一个页面。我目前正在使用`empty()`功能，但它不能按我想要的方式工作。我怎样才能做到这一点？

**更新**

“它不能按我想要的方式工作” = 我的意思是它在当前页面之上加载相同的页面。我知道这一点，因为当我按下可以说`profile`然后它加载`profile.html`到容器 div 中。在 profile.html 中，我有两个按钮，并在它们上附加了一个单击事件，因此当我单击这些按钮时，它会显示一次 alert() 消息。然后当我按下时`home`，它会加载`home.html`。然后当我按下再次加载 profile.html 的配置文件时。所以现在如果我按下 profile.html 中的按钮，当我单击每个按钮一次时，它会显示 alert() 消息两次

这是我的代码

```
<ul>
 <li><a href="#" rel="home" class="home tabs"></a></li>
 <li><a href="#" rel="camera" class="profile tabs"></a></li>
 <li><a href="#" rel="profile" class="cam tabs"></a></li>
</ul> 
```

这是我的js

```
init: function () {
Tabs.loadViews('home');
$(document).on('touchstart', 'footer a', Tabs.getViewName);
));
}

loadViews: function ( page ) {
    var view = './views/' + page + '.html';
$(container).unload().empty();
$(container).load(view, function () {
setTimeout(function () {
    scroller.refresh();
}, 0);
 });
} 
```

# mysql - 通过 liquibase 更改表时的 MYSQL 异常

> ID：12971968
> 
> 赞同：0
> 
> 时间：2012-10-19T10:08:55.423
> 
> 标签：mysql, liquibase

尝试升级/迁移数据库时，我似乎遇到了异常。我似乎一直在工作，直到它到达某一行，即 48586。我重新测试，好像数据已损坏，但同样的事情再次发生。mysql 试图做的是删除表 Logs 的当前主键，然后添加新的主键`IP`, `logId`, `logTime`。

```
SEVERE 10/15/12 2:27 PM:liquibase: Error executing SQL ALTER TABLE `Logs` ADD PRIMARY KEY (`IP`, `logId`, `logTime`)
java.sql.SQLException: Data truncated for column 'logTime' at row 48586
        at com.mysql.jdbc.SQLError.createSQLException(SQLError.java:1073)
        at com.mysql.jdbc.MysqlIO.checkErrorPacket(MysqlIO.java:3597)
        at com.mysql.jdbc.MysqlIO.checkErrorPacket(MysqlIO.java:3529)
        at com.mysql.jdbc.MysqlIO.sendCommand(MysqlIO.java:1990)
        at com.mysql.jdbc.MysqlIO.sqlQueryDirect(MysqlIO.java:2151)
        at com.mysql.jdbc.ConnectionImpl.execSQL(ConnectionImpl.java:2619)
        at com.mysql.jdbc.ConnectionImpl.execSQL(ConnectionImpl.java:2569)
        at com.mysql.jdbc.StatementImpl.execute(StatementImpl.java:824)
        at com.mysql.jdbc.StatementImpl.execute(StatementImpl.java:667)
        at liquibase.executor.jvm.JdbcExecutor$1ExecuteStatementCallback.doInStatement(JdbcExecutor.java:92)
        at liquibase.executor.jvm.JdbcExecutor.execute(JdbcExecutor.java:55)
        at liquibase.executor.jvm.JdbcExecutor.execute(JdbcExecutor.java:105)
        at liquibase.database.AbstractDatabase.execute(AbstractDatabase.java:1014)
        at liquibase.database.AbstractDatabase.executeStatements(AbstractDatabase.java:998)
        at liquibase.changelog.ChangeSet.execute(ChangeSet.java:317)
        at liquibase.changelog.visitor.UpdateVisitor.visit(UpdateVisitor.java:27)
        at liquibase.changelog.ChangeLogIterator.run(ChangeLogIterator.java:58)
        at liquibase.Liquibase.update(Liquibase.java:113)
        at liquibase.integration.commandline.Main.doMigration(Main.java:684)
        at liquibase.integration.commandline.Main.main(Main.java:116) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T10:38:45.907

如[MySQL 词汇表](http://dev.mysql.com/doc/en/glossary.html#glos_primary_key)中所述：

> ### 首要的关键
> 
> > 一组列——隐含地，基于这组列的索引——可以唯一地标识表中的每一行。因此，它必须是不包含任何`NULL`值的唯一索引。

在[`CREATE TABLE`Syntax](http://dev.mysql.com/doc/en/create-table.html)下，然后手册解释：

> A`PRIMARY KEY`是一个唯一索引，其中所有键列都必须定义为`NOT NULL`。如果它们没有显式声明为`NOT NULL`，MySQL 会隐含地（并且默默地）声明它们。

您的列似乎`logTime`允许（并包含）`NULL`值；试图`PRIMARY KEY`在它上面创建一个导致该列被静默声明为`NOT NULL`，从而将任何值“截断”`NULL`为该列的默认值：错误类似于[`ER_WARN_NULL_TO_NOTNULL`](http://dev.mysql.com/doc/en/error-messages-server.html#error_er_warn_null_to_notnull).

# bind - tmux - 从午夜指挥官窃取 Alt 键，emacs

> ID：12971970
> 
> 赞同：2
> 
> 时间：2012-10-19T10:09:00.227
> 
> 标签：bind, tmux, alt, mc

刚开始使用 tmux。到目前为止我真的很喜欢它——一个可靠的屏幕替代品。我遇到的一个问题是 tmux 从运行在其中的午夜指挥官窃取了 Alt（元）按键。

我已经制作了前缀键 C-[，效果很好。但是 tmux 在使用 Midnight Commander 时也将 Alt + anykey 解释为与 C-[ + anykey 相同。由于 MC 中有很多 Alt+ 键击，这变得非常烦人。

所以我要么需要 tmux 忽略在其中运行的所有应用程序的 Alt + 击键（例如，Midnight Commander、emacs 等）。

我的 .tmux.conf 文件如下所示。任何帮助将不胜感激。

谢谢，玛德琳。

* * *

```
# Turn on the status bar and change the coloring to my preference.
# It is handy to highlight in red the active window.
set -g status on
set -g status-bg black
set -g status-fg white
set -g status-left ‘#[fg=green]#H’
set-window-option -g window-status-current-bg red

# Use emacs keys
set -g status-keys emacs

# Makes the prefix key immediately available. There
#  is no pause necessary for an escape sequence
set -s escape-time 0

# Make our prefix key:  [
unbind C-b
set -g prefix C-[

# Split windows using emacs keys
unbind %
bind 2 split-window -v
bind 3 split-window -h

# Allow a mouse click to switch panes
set-option -g mouse-select-pane on

# Set up a key to switch to the last active window
bind-key C-l last-window 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-19T16:05:14.793

问题是两种不同`Ctrl``[`的`Alt`方式将完全相同的字符（ASCII 33、ESC）发送到终端。终端无法知道是哪个物理键生成了字符。由于`tmux`位于终端和午夜指挥官之间，它总是会首先看到 ESC 并使用它。我认为您唯一的选择是在`tmux`.

# jms - 超过 jms Mule 最大重新投递

> ID：12971971
> 
> 赞同：4
> 
> 时间：2012-10-19T10:09:01.177
> 
> 标签：jms, mule, hornetq

我有非常简单的 MULE 从 HornetQ 队列读取并将对象保存到数据库的设置：

设置如下：

```
<jms:connector name="connector.jms" maxRedelivery="1" connectionFactory-ref="hornetQConnectionFactory" doc:name="JMS"
        createMultipleTransactedReceivers="true"
        numberOfConcurrentTransactedReceivers="100"
        acknowledgementMode="AUTO_ACKNOWLEDGE">
    <reconnect count="50" frequency="5000"/>       
</jms:connector>
<flow name="jmsListenerFlow1" doc:name="jmsListenerFlow1">
    <jms:inbound-endpoint queue="adsLogQueue" connector-ref="connector.jms" doc:name="JMS">
        <jms:transaction action="ALWAYS_BEGIN"/>
    </jms:inbound-endpoint>
    <component >
        <spring-object bean="logSaver"/>
    </component>

</flow> 
```

为什么当 maxRedelivery 设置为 1 时，我会收到一条消息，指出消息已在端点上重新传递 9 次？它到底是什么意思？

hornetQConnectionFactory：

```
 <bean name="hornetQTransportConfiguration" class="org.hornetq.api.core.TransportConfiguration">
        <constructor-arg value="org.hornetq.core.remoting.impl.netty.NettyConnectorFactory"/>
        <constructor-arg>
            <map>
                <entry key="host" value="${jms.host}" /> 
                <entry key="port" value="${jms.port}" /> 
            </map>
        </constructor-arg>

    </bean>
    <bean name="hornetQConnectionFactory" class="org.hornetq.jms.client.HornetQJMSConnectionFactory">
        <constructor-arg index="0" value="false"/>
        <constructor-arg index="1" ref="hornetQTransportConfiguration"/>
        <property name="minLargeMessageSize" value="250000"/>
        <property name="cacheLargeMessagesClient" value="false"/>
    </bean> 
```

任何帮助将不胜感激！

下面的堆栈跟踪。

```
错误 2012-10-19 01:04:07,283 [Thread-3013 (HornetQ-client-global-threads-1442093417)]：

消息：“ID 为“ID:e6a0b303-1977-11e2-96d4-810571a3fe10”的消息已在端点“jms://adsLogQueue”上重新传递 9 次，超过了连接器“connector.jms”上的 maxRedelivery 设置 1。消息负载的类型：HornetQObjectMessage
代码：MULE_ERROR--2

异常堆栈是：
1.“ID为“ID:e6a0b303-1977-11e2-96d4-810571a3fe10”的消息已在端点“jms://adsLogQueue”上重新传递9次，超过了连接器“connector.jms”上的maxRedelivery设置1。消息负载的类型：HornetQObjectMessage (org.mule.transport.jms.redelivery.MessageRedeliveredException)
  org.mule.transport.jms.redelivery.JmsXRedeliveryHandler:91 (http://www.mulesoft.org/docs/site/current3/apidocs/org/mule/transport/jms/redelivery/MessageRedeliveredException.html)

根异常堆栈跟踪：
org.mule.transport.jms.redelivery.MessageRedeliveredException：“ID 为“ID：e6a0b303-1977-11e2-96d4-810571a3fe10”的消息已在端点“jms://adsLogQueue”上重新传递 9 次，超出了 maxRedelivery 设置1 在连接器“connector.jms”上。消息有效负载的类型为：HornetQObjectMessage
    在 org.mule.transport.jms.redelivery.JmsXRedeliveryHandler.handleRedelivery(JmsXRedeliveryHandler.java:91)
    在 org.mule.transport.jms.MultiConsumerJmsMessageReceiver$JmsWorker.preProcessMessage(MultiConsumerJmsMessageReceiver.java:418)
    在 org.mule.transport.AbstractReceiverWorker$1$1.process(AbstractReceiverWorker.java:120)
    + 3 个以上（设置调试级别日志记录或“-Dmule.verbose.exceptions=true”为所有内容）
****************************************************** ******************************

```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-19T22:48:14.350

首先要注意的是 Mule 正在使用`JmsXRedeliveryHandler`，这意味着它已经检测到 HornetQ 支持`JMS_X_DELIVERY_COUNT`header 并将负责计算重新交付。在这种情况下，Mule 完全依赖 HornetQ 提供准确的重新交付计数。

抛出此异常的事实意味着已向 Mule 提供了一条 JMS 消息，其重新传递计数超过了 JMS 连接器上配置的计数（在您的情况下为 1）。

由于您在事务中消费，可能会发生的情况是，HornetQ 将在每次重新启动时一次又一次地回滚并将此消息表示给 Mule，除非您在 HornetQ 本身上配置了最大重新传递计数。

我的建议是：在 Mule 和 HornetQ 上设置相同的重新投递计数，或者在 Mule 上使用 -1（无限制），并完全依赖 HornetQ 的重新投递限制。

# objective-c - + (NSTimeInterval)timeIntervalSinceReferenceDate 时区是否敏感？

> ID：12971972
> 
> 赞同：0
> 
> 时间：2012-10-19T10:09:02.167
> 
> 标签：objective-c, nsdate

如果他们同时执行此操作，在美国执行此操作的人会看到与在美国执行此操作的人相同的数字吗？

文档说，时间从格林威治标准时间 2001 年 1 月 1 日开始。这意味着它是从 GreenWitch 到 1 月 1 日的时间。

然而，每个人都会看到不同的时钟。所以这意味着它是本地化的。

所以是模棱两可的。哪一个是对的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T15:00:02.350

`NSDate`不存储时区信息。它始终与 GMT/UTC 时间相关，这意味着您描述的两个人都会得到相同的结果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T10:27:30.210

不，根据文档：

**timeIntervalSinceReferenceDate**

> 返回值 系统的绝对参考日期（格林威治标准时间 2001 年 1 月 1 日的第一时刻）与当前日期和时间之间的间隔。

当前日期取决于本地时间 (+ (id)date)。因此，如果中国的一个人与德国的一个人同时按下按钮，则间隔会有所不同~6 小时。但在他们看来，如果他们在当地时间下午 1 点按下按钮，两者的时间间隔将是相同的。

**编辑：**

**正如马丁指出的那样，**实际上我错了：****

 **> NSDate 代表一个时间点，对时区一无所知。如果您使用 NSLog(@"%@", [NSDate date]) 显示 NSDate 的值，则日期将使用 GMT 转换为字符串以进行显示。

所以回答你的问题：是的，它会是一样的。**

# eclipse-rcp - Eclipse RCP：文件菜单中的最近文件

> ID：12971975
> 
> 赞同：0
> 
> 时间：2012-10-19T10:09:09.583
> 
> 标签：eclipse-rcp

我开发了一个 RCP 应用程序。我想在我的 Eclipse RCP 应用程序的文件菜单中显示最近的文件。

通过谷歌我发现我应该使用 org.eclipse.ui.workbench.ContributionItemFactory.REOPEN_EDITORS.create(window) 。但是哪里？我有点失落。帮帮我。

问候， 普里扬克

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T12:31:54.750

添加一个菜单贡献：menu:file?after=additions 下添加动态。编写一个继承自 CompoundContributionItem 的类。覆盖 getContributionItem 方法。在里面使用：org.eclipse.ui.workbench.ContributionItemFactory.REOPEN_EDITORS.create(window)

这将返回贡献项目。把它放在一个数组中，并将这个类添加到菜单贡献下的动态中。

# javascript - 如何在 jStorage 中保存选择列表选项

> ID：12971983
> 
> 赞同：2
> 
> 时间：2012-10-19T10:09:29.757
> 
> 标签：javascript, html, jstorage

我有一个我正在开发的应用程序（仍然）并且最近问了一个关于如何在 JavaScript 中保存选择列表选项的问题。从那以后，我被介绍给 jStorage，这是我一直用于我的代码的 jQuery 的扩展。我想知道是否可以更轻松地将所选值保存在 jStorage 中？我的选择列表的 HTML 代码如下；

```
<select name = 'job' id = 'job' style = 'width: auto; background-color: #777; color: white; font-size: 20px; border-color: #AAA;'>
 <option value = 'jobselect'>Select Profession</option>
 <option value = 'job1'>Mechanical Engineer</option>
 <option value = 'job2'>Software Engineer</option>
 <option value = 'jobother'>Other</option>
</select> 
```

我在我的 JavaScript 文件中有这个来保存选定的值；

```
document.addEventListener('DOMContentLoaded', function ListChoice() {

    var input1 = document.getElementById('job');

    if (localStorage['job']) {  
        input1.value = localStorage['job'];
    }

    input1.onchange = function() {  
        localStorage['job'] = this.value;
    }

}); 
```

我的 JS 文件中有另外两个函数**loadSettings**和**saveSettings**，有没有办法更改上面的代码以将列表的选定值保存到我的函数中的 jStorage ？只是想知道保存到 jStorage 是否更容易。提前非常感谢xx

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-11T20:15:57.600

注意：http://garlicjs.org/ 之类[的](http://garlicjs.org/)东西可能是解决问题的捷径。

不确定这是否可以帮助您，但您可以使用以下内容设置 jStorage（我只是序列化整个表单）：

```
$.jStorage.set('jobValues', $('#job').serializeArray()); 
```

然后您需要以如下方式遍历数组：

```
 var currentStorage = $.jStorage.get('jobValues');
        if (currentStorage) {
            $.each(currentStorage, function(position,object){
                $("input[name='"+object['name']+"']").prop('value', object['value']);               
            });
        } 
```

# c# - 如何在线程中访问应用程序状态？

> ID：12971988
> 
> 赞同：1
> 
> 时间：2012-10-19T10:09:45.920
> 
> 标签：c#, asp.net, .net, multithreading

我在我的 ASP.NET Web 应用程序中使用线程架构。在这个应用程序中，我维护了一个我想在线程中访问的全局应用程序变量。

如何在线程中获取应用程序状态？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T11:31:29.530

`HttpContext.Current`在后续线程中将为空。有关详细信息，请参阅此问题： [“HttpContext.Current”属性的跨线程用法和相关内容](https://stackoverflow.com/questions/8109526/the-cross-thread-usage-of-httpcontext-current-property-and-related-things/12141601)

但是，您可以只传递`System.Web.HttpContext`给线程并`Current`从每个线程进行访问。

# java - Eclipse JDT 核心解析器不解析注释

> ID：12971991
> 
> 赞同：3
> 
> 时间：2012-10-19T10:09:53.380
> 
> 标签：java, eclipse, parsing, comments, eclipse-jdt

我们一直在尝试在我们的项目中使用 Eclipse JDT 核心解析器来解析 Java 源文件，但是我们遇到的问题之一是我们无法从文件中获取注释列表。我们尝试在 上调用该`getComments`方法，`CompilationUnit`但它向我们显示了一个空注释列表。

这是来自一个测试项目，其`Test1.java`来源在这里：

```
public class Test1 {

public static void main(String[] args) throws IOException {
    File file = new File("src/main/java/DummyFile.java");
    FileReader fileReader = new FileReader(file);
    BufferedReader bufferedReader = new BufferedReader(fileReader);
    StringBuilder source = new StringBuilder();
    String line = "";
    while ((line = bufferedReader.readLine()) != null) {
        source.append(line + System.getProperty("line.separator"));
    }

    bufferedReader.close(); 

    ASTParser parser = ASTParser.newParser(AST.JLS3);
    parser.setKind(ASTParser.K_COMPILATION_UNIT);
    parser.setSource(source.toString().toCharArray());
    parser.setResolveBindings(true);
    Hashtable<String, String> options = JavaCore.getOptions();
    options.put(JavaCore.COMPILER_DOC_COMMENT_SUPPORT, JavaCore.ENABLED);
    parser.setCompilerOptions(options);
    CompilationUnit cu = (CompilationUnit) parser.createAST(null);

    List comments = cu.getCommentList();

    System.out.println(cu); // breakpoint is here.

    for (Object comment : comments) {
        System.out.println(comment.toString());
    }
} 
```

DummyFile.java 如下：

```
public class DummyFile {
    // 1
    private String str;
    public static int number;

    public DummyFile() { // 2
        // 3
        str = "something";
        number = 2; // 4
        // 5
    }
    // 6
} 
```

这是输出：

```
public class DummyFile {
    private String str;
    public static int number;
    public DummyFile(){
        str="something";
        number=2;
    }
}

//

//

//

//

//

// 
```

这是我们在编译单元内部查看并查看注释列表时在调试器中看到的内容：

```
[//
, //
, //
, //
, //
, //
] 
```

所以我们想知道这是否是正常行为，如果是，如何获取评论内容或我们做错了什么？

如果这不是正常行为，那么也许有人对出了什么问题以及要寻找什么有任何建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T11:11:57.943

通过`getCommentList()`CompilationUnit 方法获得的评论不会有评论正文。此外，在 AST 访问期间不会访问评论。为了访问评论，我们必须为`accept`评论列表中的每条评论调用 ' '。

请参阅以下有关如何从 CompilationUnit 中提取注释的问题的答案：

[如何从生成的 java 编译器树 api 访问注释？](https://stackoverflow.com/questions/3019729/how-to-access-comments-from-the-java-compiler-tree-api-generated-ast/9884987#9884987)

# php - 在交友系统上工作，需要有一种方法将朋友的 id 添加到 WHERE 查询中吗？同一列？

> ID：12971993
> 
> 赞同：0
> 
> 时间：2012-10-19T10:09:58.430
> 
> 标签：php, mysql, sql

好的，这可能很明显，但我正在制作一个交友系统，但我需要为我的表中的 userid 列设置多个可能的用户 ID，`activity`但是当我使用下面的代码时：

```
$q = $pdo->prepare("SELECT * FROM friends WHERE userid=:uid");
        $q->execute(array(
            ":uid"=>$user['id'],
        ));
        if($q->rowCount()>0){
            $remainder ="";
            foreach($q as $p){
                $remainder .= "OR `userid` =`".$p['friendid']."`";
            }
        }
        $query = $pdo -> prepare("SELECT * FROM `activity` WHERE `userid`=:id .$remainder. ORDER BY id DESC LIMIT 50");
        $query->execute(array(
            ":id"=>$user['id']
        )); 
```

实际上，当我`var_dump`得到结果时，它什么也不返回。而它应该有用户和他/她所有朋友的流内容。

我在这里做错了什么？我似乎找不到问题？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T10:14:59.073

您可以使用连接，而不是使用两个单独的查询：

```
select * from `activity` as `t`
join `friends` as `r` on (`t`.user_id = `r`.user_id)
where  `t`.user_id = :id 
```

您的代码中的实际问题是：

```
$remainder .= "OR `userid` =`".$p['friendid']."`";
                            ^                  ^ 
```

删除它们。

此外，它会更容易使用`IN`，而不是在 sql 查询中重复相同的代码：

```
$remainder = 'AND user_id in (';
$user_ids= array();

foreach($q as $p){
     $user_ids[] =$p['friendid'];
}

$remainder .= implode(',', $user_ids).')'; 
```

# spring - 在Spring中访问maven项目版本而不过滤

> ID：12971994
> 
> 赞同：1
> 
> 时间：2012-10-19T10:10:06.393
> 
> 标签：spring, maven

使用 maven，我想在 spring 中获取我的项目版本，但不进行过滤。我试过这样

```
@PropertySource("classpath:META-INF/maven/groupId/artifactId/pom.properties") 
```

如此处建议：[在 Spring 配置文件中访问 maven 项目版本](https://stackoverflow.com/questions/3886753/access-maven-project-version-in-spring-config-files#3886921)

如那里所写，使用 test 或 jetty:run 是不可能的。maven 仅在打包的存档中生成 META-INF。有没有办法指示 maven 之前生成 META-INF 以便您可以启动 jetty:run，让 spring 从清单中读取项目版本而不会出错？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T10:14:26.463

如果只是出于测试目的，您可以在源代码树`pom.properties`的目录中创建一个示例文件吗？`src/webapp/META-INF/..../`

干杯，

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T10:18:05.747

您也可以在文件中维护版本号，`project.properties`然后从 java 代码中的 project.properties 文件中访问版本号。希望这对您有所帮助。

# c - 指向作为结构成员的指针在 C 中如何有用？

> ID：12971995
> 
> 赞同：7
> 
> 时间：2012-10-19T10:10:07.327
> 
> 标签：c, oop, struct, coding-style, structure

我对 C 编程并不陌生。但我不明白在 C 中保持指针作为结构成员的作用有什么用处。例如

```
 // Fist Way: To keep pointer to function in struct
    struct newtype{
        int a;
        char c;
        int (*f)(struct newtype*);
    } var;
    int fun(struct newtype* v){
        return v->a;
    }

    // Second way: Simple
    struct newtype2{
        int a;
        char c;
    } var2;
    int fun2(struct newtype2* v){
        return v->a;
    }

    int main(){

        // Fist: Require two steps
        var.f=fun;
        var.f(&var);

        //Second : simple to call
        fun2(&var2);    
    } 
```

程序员是否使用它为 C 代码赋予面向对象（OO）的形状并提供抽象对象？或者让代码看起来很技术。

我认为，在上面的代码中，第二种方式更温和，也很简单。在第一种方式中，我们仍然必须通过`&var`，即使`fun()`是 struct 的成员。

如果将函数指针保留在结构定义中很好，请帮助解释原因。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-19T10:14:14.283

提供指向结构上的函数的指针可以让您动态选择在结构上执行哪个函数。

```
struct newtype{
    int a;
    int b;
    char c;
    int (*f)(struct newtype*);
} var;

int fun1(struct newtype* v){
        return v->a;
    }

int fun2(struct newtype* v){
        return v->b;
    }

void usevar(struct newtype* v) {
   // at this step, you have no idea of which function will be called
   var.f(&var);
}

int main(){
        if (/* some test to define what function you want)*/) 
          var.f=fun1;
        else
          var.f=fun2;
        usevar(var);
    } 
```

这使您能够拥有一个调用接口，但根据您的测试是否有效调用两个不同的函数。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-10-19T10:20:26.757

如果您尝试进行某种“基于对象”的编程，它会很有用。

如果您曾经看过 Quake 3 引擎的源代码.. 您可以清楚地看到大多数“实体”都有定义它们的属性，以及它们所做的工作[它们是函数指针]。

分离属性和函数（通过 C 中的函数指针）定义了“结构”对象的属性和它们可以执行的操作。

例如：

```
struct _man{
   char name[];
   int age;
   void (*speak)(char *text);
   void (*eat)(Food *foodptr);
   void (*sleep)(int hours); 
   /*etc*/
};

void grijesh_speak(char *text)
{
   //speak;
}

void grijesh_eat(Food *food)
{
   //eat
}

void grijesh_sleep(int hours)
{
   //sleep
}

void init_struct(struct _man *man)
{
    if(man == NULL){ man = malloc(sizeof(struct _man));}
      strcpy(*man.name,"Grijesh");
      man->age = 25;
      man->speak = grijesh_speak;
      man->eat = grijesh_food;
      man->sleep = grijesh_sleep;
//etc
}

//so now in main.. i can tell you to either speak, or eat or sleep.

int main(int argc, char *argv[])
{
    struct _man grijesh;
    init_struct(&grijesh);
    grijesh.speak("Babble Dabble");
    grijesh.sleep(10);
    return 0;
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-19T12:40:59.837

我过去曾使用它在 C中实现通用容器^(1 。)

例如：

```
typedef struct generic_list_node {
  void *data;
  struct generic_list_node *next;
} generic_list_node_t;

typedef struct generic_list {
  generic_list_node_t *head;
  void *(*copy)(void *data);                 
  void (*delete)(void *data);                
  int (*compare)(void *lhs, void *rhs);      
  void (*display)(void *data, FILE *stream);
} generic_list_t; 
```

* * *

列表结构本身与数据无关，`void *`用于表示数据项，并将所有类型感知操作委托给上述指针指示的函数：

```
int insert(generic_list_t l, void *data)
{
  generic_list_node_t *cur = l.head;
  generic_list_node_t *new = malloc(sizeof *new);
  if (new)
  {
    new->data = l.copy(data);
    new->next = NULL;

    if (l.head == NULL)
    {
      l.head = new;
    }
    else
    {
      while (cur->next && l.compare(new->data, cur->data) > 0)
        cur = cur->next;
      new->next = cur->next;
      cur->next = new;
      printf("Successfully added ");
      l.display(data, stdout);
      printf(" to list\n");

    }
    return 1;
  }

  return 0;
} 
```

^(1.对于“通用”和“容器”的适当松散定义)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-19T12:47:43.220

这是一个帮助解释函数指针有用性的项目。尝试创建一个提供继承和多态性的基于 c 的库。或者，尝试重新创建“C with Classes”。结构内的函数指针将是至关重要的。[http://www.cs.rit.edu/~ats/books/ooc.pdf](http://www.cs.rit.edu/~ats/books/ooc.pdf)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-19T10:19:03.950

这在嵌入式系统或驱动程序编写中特别有用。使用函数指针调用函数。

例如

```
struct_my_filesystem.open=my_open;
struct_my_filesystem.read=my_read; 
```

ETC

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-10-19T10:22:04.503

有时在 C 中你需要调用一个函数，而不知道它的实现。例如，如果您正在开发用于不同项目的独立库。在这种情况下，将函数指针添加到上下文结构并将其传递给库函数是非常有意义的。然后库函数可以在运行时调用您的函数，而无需包含定义它的头文件。

它确实类似于您在进行面向对象编程时所做的事情。在 C 语言中，您通常传递上下文变量，例如结构，将一组变量和可能对该上下文有意义的函数组合在一起。这接近于 OO 编程中的等价物，您可以在其中实例化一个类并在实例上设置所需的变量。

# c# - Enable-Migrations -ContextTypeName 错误：找不到参数

> ID：12971997
> 
> 赞同：1
> 
> 时间：2012-10-19T10:10:31.507
> 
> 标签：c#, .net, asp.net-mvc, visual-studio-2010, asp.net-mvc-4

我正在按照本教程练习 MVC-4：[http ://www.asp.net/mvc/tutorials/mvc-4/getting-started-with-aspnet-mvc4/adding-a-new-field-to-the -电影模型和表格](http://www.asp.net/mvc/tutorials/mvc-4/getting-started-with-aspnet-mvc4/adding-a-new-field-to-the-movie-model-and-table)

我没有做同样的例子。我只是把它作为一个指导来尝试我自己的东西。

我遇到了这个问题：

打开包管理器控制台后

尝试为我的上下文启用迁移后，我收到以下错误：

```
PM> Enable-Migrations -ContextTypeName MvcAuction.Models.AuctionDBContext
Enable-Migrations : A parameter cannot be found that matches parameter name 'ContextTypeName'.
At line:1 char:35
+ Enable-Migrations -ContextTypeName <<<<  MvcAuction.Models.AuctionDBContext
    + CategoryInfo          : InvalidArgument: (:) [Enable-Migrations], ParameterBindingException
    + FullyQualifiedErrorId : NamedParameterNotFound,Enable-Migrations 
```

任何想法如何解决？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2019-06-08T20:12:36.323

更新数据库：找不到与参数名称“ConfigurationTypeName”匹配的参数。在行：1 字符：17

参数名称不匹配的此类错误表明该命令的版本不支持该参数。这可能是由于 VS 项目上安装的 EF 工具的版本。就我而言，我有 2 个项目，一个安装了 EF 6.x，另一个安装了 EF Core，显然 EF Core 优先，所以在使用 EF 6.XI 时必须使用 EntityFramework\Update-Database 和 EntityFrameworkCore\Update-Database。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-12T09:05:55.963

我也有同样的问题。我通过 NuGet 将 EntityFramework 升级到版本 5.0.0 来修复它。如果您遇到 EntityFramework.5.0.0 问题，请尝试重新安装。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-22T07:07:44.320

对于那些将来可能会遇到同样问题的人。我已经通过仅使用没有 -ContextTypeName 的 Enable-Migrations 解决了它。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2018-02-23T14:03:44.887

我遇到了同样的问题，但通过在 Nuget 包管理器控制台的下拉菜单中选择项目，然后删除完全限定的路径，让它工作，所以：

```
PM> Enable-Migrations -ContextTypeName ApplicationDbContext 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-07-03T06:49:23.413

“启用迁移-ContextTypeName MvcMovie.Models.MovieDBContext”

MvcMovie 更改为 MvcYourApplicationName。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-03-15T17:37:41.070

**在“快速而肮脏”的 ASP.net网站上**工作时，我遇到了同样的错误。

在 ASP.Net 网站中，非页面类放在 App_code 目录中。它们被编译成一个单独的程序集。

可能是包管理器没有管理（！）在这个“App_Code”程序集中找到上下文类型名称（错误消息看起来很奇怪）。

我通过将模型和上下文类移动到另一个类库项目中解决了这个问题。

*   有效
*   干净多了

我不知道 MVC 4 可能有什么问题，但我的经验可以帮助另一个 Web 表单开发人员......

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-11-18T22:49:57.723

> 找不到与参数名称“ContextTypeName”匹配的参数。

在我看来，您使用的是旧版本的实体框架（4.3？），它没有实现该参数。为我工作，我使用 EF 5。

PM> enable-migrations -contexttypename test3.Models.UsersContext 检查上下文是否针对现有数据库...为项目 test3 启用代码优先迁移。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2015-04-21T07:42:21.263

编辑：似乎上下文类型可能不存在或未放置在模型命名空间下。

语法是

Enable-Migrations -ContextTypeName NameOfYourDataContextType

NameOfYourDataContextType 是您在添加控制器时添加的上下文。

所以你输入如下所示的整体：

![在此处输入图像描述](../Images/e494ec0242d93337562e9c3d353e97df.png)

或使用显示的现有：

![在此处输入图像描述](../Images/27ec1e4830ee71ca9baa123e56e70114.png)

这将是

*Enable-Migrations -ContextTypeName MvcApplication4.Models.MvcApplication4Context*

*Enable-Migrations -ContextTypeName MvcApplication4.Models.ExternalLogin*

语法 : Enable-Migrations 仅在您的项目中只有一个上下文时才有效。

[在学习本教程](http://channel9.msdn.com/Series/Building-Web-Apps-with-ASP-NET-Jump-Start/Building-Web-Apps-with-ASPNET-Jump-Start-02-Building-and-Deploying-Websites-with-ASPNET-MVC-4)时遇到了这个问题

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2021-04-01T15:43:39.103

当我删除 Z.EntityFramework.Plus.EFCore 包问题得到解决

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2020-12-28T18:17:51.260

对于尝试其他解决方案后仍在苦苦挣扎的任何人。

在浪费了 2 个小时尝试重新启动 VS、更新 VS 并重新启动我的 PC 之后。我终于通过更改我的 git 分支然后添加迁移解决了这个问题。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2021-10-01T10:24:33.357

Enable Migrations 现在已过时，您可以像这样添加：
`EntityFrameworkCore\Add-Migration yourMessageHere -Context AppContext`