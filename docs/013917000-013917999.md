# StackOverflow 问答 13917000-13917999

# javascript - 匹配字符串开头的字符，忽略 html 标签中的字符串

> ID：13917001
> 
> 赞同：0
> 
> 时间：2012-12-17T15:27:05.313
> 
> 标签：javascript, regex

需要一点帮助，请...

我有一个正则表达式匹配字符串开头的字符，如下所示：

如果我有一组这样的字符串：

```
雷福克斯
福斯特乔
寻找福雷斯特

```

**正则表达式**

```
/\bfo[^\b]*?\b/gi 
```

正如预期的那样，这将匹配 Fox、Foster 和 Forrester 中的“FO”：

但是，我面临一个问题，如果字符串集像这样包含在 html 标记中；-

```
<span class="fontColor1">Ray Fox</span>
<span class="fontColor2">Foster Joe</span>
<span class="fontColor3">Finding Forrester</span> 
```

这也将匹配 fontColor* 中的“FO”。

我对正则表达式相当熟悉，我需要一些帮助来更新查询，以便它只搜索 HTML 标签存在的 HTML 标签之间的值，但如果 HTML 标签不存在，它仍然可以正常工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T15:36:11.993

关于什么

```
<.*?span.*?>(.*?)<\s?\/.*?span.*?> 
```

您在哪里有不存在 html 标签的文本？这是没有意义的。

编辑：

此解决方案将不匹配嵌套标签，但在编写问题时，这似乎不是问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T15:38:50.980

您可以使用 html 解析器并提取纯文本，然后进行匹配。

```
var root;

try {
    root = document.implementation.createHTMLDocument("").body;
}
catch(e) {
    root = document.createElement("body");
}

root.innerHTML = '<span class="fontColor1">Ray Fox</span>\
            <span class="fontColor2">Foster Joe</span>\
            <span class="fontColor3">Finding Forrester</span>';

//If you are using jQuery
var text = $(root).text();

//Proceed as normal with the text variable 
```

如果您不使用 jQuery，则可以用 替换`$(root).text()`，`findText(root)`其中`findText`：

```
function findText(root) {
    var ret = "",
        nodes = root.childNodes;
    for (var i = 0; i < nodes.length; ++i) {
        if (nodes[i].nodeType === 3) {
            ret += nodes[i].nodeValue;
        } else if (nodes[i].nodeType === 1) {
            ret += findText(nodes[i]);
        }
    }
    return ret;
} 
```

# html - 标签下的空格

> ID：13917008
> 
> 赞同：6
> 
> 时间：2012-12-17T15:27:24.150
> 
> 标签：html, css

我的照片下无缘无故有这个烦人的空间。我使用 www.getskeleton.com 作为框架。

**HTML 代码**

```
<div class="four columns bottom">
  <div class="box">
    <img src="images/picture.png" title="" alt="">
  </div>
</div> 
```

**CSS 代码**

```
.box{
  border: 1px solid #bfbfbf; /* ---- Border OUTSIDE*/
} 
```

![这里是图片下方的空间](../Images/de0751e2e8a278788dee1d6e35ed59f6.png)

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2014-10-28T12:17:58.863

虽然我确信这已经解决了，但我相信这些答案都不是正确的（或者至少，来自“已接受”答案的链接已经失效）。

处理这个间距问题的方法（以及为什么它没有在像 normalize 这样的 util 库中设置，我不确定）是图像的垂直对齐。当使用 HTML 5 文档类型时，这将解决 HTML 页面的问题。奇怪的是，当使用例如 HTML 4.01 doctype 时，图像不会在行为下方显示这个错误的空间。

修复：

```
img {
  vertical-align: top;
} 
```

我希望对可能遇到此问题的人有所帮助。

编辑：我在写完这篇文章后注意到了一些额外的信息，随后研究了为什么 normalize 没有在 img 标签上设置对齐；图像的默认对齐方式是`vertical-align: baseline;`- 这是引入下方空间的行为。Normalize 的作者认为这种行为是一致的跨浏览器，因此决定不“规范化”它。如果您希望图像旁边的文本与任何后续文本行正确对齐，我认为这是有道理的。有些人也更喜欢使用`vertical-align: middle`而不是 top 来解决这个问题 - 所以你可以根据需要改变它。

但是，关于基线对齐，如果我的图像太大以至于高于行高，我可能会浮动它或其他一些行为......但是你去吧。

我已经使用了垂直对齐的东西一段时间了，没有任何事故。但与往常一样，请确保您测试不再与基线对齐的图像的任何影响。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-17T15:28:19.570

试试这个：

```
.box img {
    display: block;
    padding: 0px;
    margin: 0px;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-17T15:30:04.997

试试这个： .box { font-size: 0; }

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-17T15:43:11.893

您的图像需要浮动。试试这个：

```
 #yourimage{
        float: left;} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-17T16:18:05.697

如前所述，更多信息会有很大帮助，但我毫不怀疑是填充导致边框超出图像，原因很简单

```
margin pushes outside the element
padding pushes inside the element 
```

原来如此。

然后修复：

```
.box {
    padding-bottom: 0px;
}
//to be sure that the image doesn't have any padding, even though OP said the .box img fix didn't help
.box img {
    margin-bottom: 0px;
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-17T16:28:57.330

这是一个古老的怪癖 - 行格式中的空白导致了差距。`<br />` 在图像之后添加 。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-10-12T09:11:56.217

试试这个

```
.box{
    display:flex
} 
```

# c# - Web 客户端 DownloadFileCompleted 获取文件名

> ID：13917009
> 
> 赞同：7
> 
> 时间：2012-12-17T15:27:27.563
> 
> 标签：c#, event-handling, webclient

我试图下载这样的文件：

```
WebClient _downloadClient = new WebClient();

_downloadClient.DownloadFileCompleted += DownloadFileCompleted;
_downloadClient.DownloadFileAsync(current.url, _filename);

// ... 
```

下载后我需要使用下载文件启动另一个进程，我尝试使用`DownloadFileCompleted` event.

```
void DownloadFileCompleted(object sender, System.ComponentModel.AsyncCompletedEventArgs e)
{
    if (e.Error != null)
    {
        throw e.Error;
    }
    if (!_downloadFileVersion.Any())
    {
        complited = true;
    }
    DownloadFile();
} 
```

但是，我不知道下载文件的名称`AsyncCompletedEventArgs`，我自己制作的

```
public class DownloadCompliteEventArgs: EventArgs
{
    private string _fileName;
    public string fileName
    {
        get
        {
            return _fileName;
        }
        set
        {
            _fileName = value;
        }
    }

    public DownloadCompliteEventArgs(string name) 
    {
        fileName = name;
    }
} 
```

但我不明白如何调用我的事件`DownloadFileCompleted`

对不起，如果它不是问题

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-12-17T19:36:09.550

一种方法是创建一个闭包。

```
WebClient _downloadClient = new WebClient();        
_downloadClient.DownloadFileCompleted += DownloadFileCompleted(_filename);
_downloadClient.DownloadFileAsync(current.url, _filename); 
```

这意味着您的 DownloadFileCompleted 需要返回事件处理程序。

```
public AsyncCompletedEventHandler DownloadFileCompleted(string filename)
{
    Action<object, AsyncCompletedEventArgs> action = (sender, e) =>
    {
        var _filename = filename;
        if (e.Error != null)
        {
            throw e.Error;
        }
        if (!_downloadFileVersion.Any())
        {
            complited = true;
        }
        DownloadFile();
    };
    return new AsyncCompletedEventHandler(action);
} 
```

我创建名为 _filename 的变量的原因是为了将传递给 DownloadFileComplete 方法的文件名变量捕获并存储在闭包中。如果您不这样做，您将无法访问闭包中的文件名变量。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2016-07-15T08:29:43.077

我正在玩`DownloadFileCompleted`从事件中获取文件路径/文件名。我也尝试过上述解决方案，但它不像我的预期那样我喜欢通过添加 Querystring 值的解决方案，在这里我想与你分享代码。

```
string fileIdentifier="value to remember";
WebClient webClient = new WebClient();
webClient.DownloadFileCompleted += new AsyncCompletedEventHandler (DownloadFileCompleted);
webClient.QueryString.Add("file", fileIdentifier); // here you can add values
webClient.DownloadFileAsync(new Uri((string)dyndwnldfile.path), localFilePath); 
```

事件可以这样定义：

```
 private void DownloadFileCompleted(object sender, AsyncCompletedEventArgs e)
 {
     string fileIdentifier= ((System.Net.WebClient)(sender)).QueryString["file"];
     // process with fileIdentifier
 } 
```

# php - Facebook登录和喜欢

> ID：13917011
> 
> 赞同：0
> 
> 时间：2012-12-17T15:27:33.770
> 
> 标签：php, facebook

我的应用程序有一个集成的 facebook 登录并包含用户喜欢的文章。用户只有直接登录网站才能点赞文章。如果未登录，我将在“赞”按钮上使用透明层，单击该按钮会打开弹出窗口，并允许用户登录他们的 FB 帐户。

## 现在我面临以下问题：

用户从弹出窗口登录并返回应用程序后，该文章尚未被“点赞”，因为他没有点击点赞，而是点击了点赞按钮上的叠加层。用户必须再次点击“喜欢”。通过这种方式，某些文章正在失去重要的喜欢，因为用户在从弹出窗口登录后认为他已经喜欢该文章。

谁能建议我克服这个“问题”。我正在使用 PHP。

如果我的解释不够充分，请告诉我，我会尽量具体一点。

谢谢。

## 代码

```
if(!isset($_SESSION['User']) && empty($_SESSION['User'])){
//show login button
}  else{
//show logged in user credentials
} 
```

通过以下方式创建叠加层

```
<div class="FB_Like">
<div class="cover"></div>
<div class="fb-like" data-href="URL" data-send="false" data-layout="button_count" data-width="450" data-show-faces="true"></div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T15:38:25.927

有两种合乎逻辑的方法可以解决您的问题，都包括设计：

*   只是不要使用您现在使用的覆盖系统，而是禁用点赞按钮并显示“登录到点赞”消息，因此用户首先必须登录，然后点赞，但他们会通过消息知道这一点。不过，不是很用户友好。
*   另一种解决方案是，如果单击赞按钮并且他们未登录，则在成功登录后将赞操作发送到 facebook，或者只是触发赞按钮的单击事件 - 两种解决方案都将是客户端事件。“但是，如果他们发现，没有任何办法不会让你受到 Facebook 的惩罚。” [在这里](https://stackoverflow.com/questions/6365205/how-can-i-trigger-facebooks-like-action-without-using-facebook-like-button)引用另一个答案。

# git - 使用现有的实时和测试站点设置 Git

> ID：13917019
> 
> 赞同：0
> 
> 时间：2012-12-17T15:27:56.803
> 
> 标签：git, version-control, github

我目前有两个站点：testing.example.com 和 www.example.com

（它们主要包含 Joomla 安装）

如何设置 Git，以便我可以轻松地从测试推送到实时（或者如果我想重新校准，从实时到测试？）

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T20:46:04.530

在您的服务器上设置两个存储库，并将它们都配置为您的开发机器上的远程。现在，您可以随心所欲地推送到您的测试和实时环境。

您可能希望为这些存储库设置自动部署。在这里查看如何做到这一点：[使用 Git 推送部署项目](https://stackoverflow.com/questions/279169/deploy-a-project-using-git-push)

# c++ - 为OpenGL编程我自己的三角形光栅化？

> ID：13917020
> 
> 赞同：0
> 
> 时间：2012-12-17T15:27:57.033
> 
> 标签：c++, opengl, rasterizing

我正在尝试渲染圆角三角形以提高性能。为了说明我的意思，请看下图：

![在此处输入图像描述](../Images/d35996edf681fd85ed026d1107907daf.png)

我在 CPU 中尝试过，现在有没有办法以某种方式将此算法移动到 GPU 上？我可以更改调用片段着色器的方法代码吗？

顺便说一句，如果我能做到，那么我需要重新制作成哪种编程语言？

我正在使用只有 20GB-30GB 内存带宽的 OpenGL 2.1 GPU。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T15:51:52.347

我不确定你到底在做什么，但这似乎有点可疑。尝试在着色器中进行一些自定义计算以渲染圆形或椭圆形，实际上最终可能会损害性能。

现代 GPU 硬件每秒可以推动数十亿个三角形。你可能在这里分裂头发。

无论如何，如果您想“伪造”几何图形，您可能会感兴趣：[https ://alfonse.bitbucket.io/oldtut/Illumination/Tutorial%2013.html](https://alfonse.bitbucket.io/oldtut/Illumination/Tutorial%2013.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T22:30:43.920

阅读 Charles Loop 和 Jim Blinn 的论文[Resolution Independent Curve Rendering using Programmable Graphics Hardware](http://research.microsoft.com/en-us/um/people/cloop/loopblinn05.pdf)。

简短版本：假设您对曲线进行了有效的内部/外部测试，将封闭的外壳形状渲染为三角形，使用片段着色器丢弃曲线外部的像素。

其次，Aeluned 担心将算法转移到 GPU 不会自动使其更快。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-14T10:32:05.740

1.  好吧，在 OpenGL 2.1 上，您没有几何着色器 (3.2+)，因此您可以忘记 GPU。
2.  您不能通过弯曲的三角形来提高凸形的光栅化性能
    *   任何凸多边形的光栅化复杂度与相同面积的任何三角形相同
    *   区别仅在于：
    *   通过的顶点数
        *   记忆转移
        *   使用几何着色器，这将更好地使用您的三角形
    *   边界线数
        *   用于填充的边界线光栅化
        *   使用三角形会更糟
        *   （需要加入更多的三角形而不是单一形状的多边形）

因此，在您的情况下实施此操作以获得更好的性能并不是一个好主意。

我能想到的唯一一件事就是简化手动生成形状。

在这种情况下，只需编写一个函数 glRoundedTriangle(....)

*   从给定的输入参数生成正确的顶点、颜色、法线、纹理坐标。

它的样子是未知的，因为您没有指定圆角三角形几何/形状和/或输入参数（例如 3 个点 + 3 个有符号曲线半径？）

**为了提高 OpenGL 的性能，请使用 VBO/VAO**

# sql-server - 如何在 unixODBC 中使用连字符指定数据库名称？

> ID：13917024
> 
> 赞同：0
> 
> 时间：2012-12-17T15:28:05.493
> 
> 标签：sql-server, unixodbc

我有一个名为 pm-eng 的 SQL Server 数据库，需要从 linux 机器连接到该数据库。我已经设置了 unixODBC 并配置了我的 odbc.ini，如下所示：

```
[pm_production]
Driver    = FreeTDS
Server    = mssql.server
Database  = pm-eng 
```

当我使用 iSQL 进行测试时，连接时出现错误，提示“pm”数据库不存在。我尝试将数据库名称包装在 [] 和引号中，但没有成功。理想情况下，我只会更改数据库的名称，但在这种环境下这是不可能的。我已经用一个没有连字符的数据库名称验证了我的连接，它工作正常。是否可以使用带连字符的 DB 名称连接到 ODBC DSN？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T16:05:07.443

由于您要连接到 MSSQL 数据库，因此您可以尝试以下操作：

```
[pm_production]
Driver = FreeTDS
Server = mssql.server 
```

然后与默认数据库为 pm-eng 的用户连接

根据[MSDN](http://msdn.microsoft.com/en-us/library/ms130822.aspx)上的文档：“如果未指定数据库，则使用为登录定义的默认数据库。”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T19:21:50.767

这原来是 FreeTDS 的问题，而不是 unixODBC 的问题。我需要在 odbc.ini 文件中指定一个 TDS_Version 并开始工作。最终配置如下所示：

```
[pm_production]
Driver    = FreeTDS
Server    = mssql.server
Database  = pm-eng
TDS_Version = 8.0 
```

# c# - “IntervalPicker”：自定义 datePicker 还是开发自己的控件？

> ID：13917026
> 
> 赞同：2
> 
> 时间：2012-12-17T15:28:16.613
> 
> 标签：c#, xaml, windows-phone, silverlight-toolkit

这更像是一个主要问题，而不是一个具有特定源代码问题的问题。我希望这没问题。

我正在为 Windows Phone 开发一个应用程序，并希望有一个看起来像[Silverlight-Toolkit](https://phone.codeplex.com/) [DatePicker](https://phone.codeplex.com/SourceControl/changeset/view/80797#1335967)的控件，但我不想选择日/月/年，而是选择具有以下布局的重复间隔：

```
 .        ..
   1       Days
 -----    ---------
|  2  |  | Weeks   |
 -----    ---------
   3       Months
   .        .. 
```

左侧的一个字段，您可以在其中选择一个数字，右侧的一个字段为该数字提供一个“单位”。

当然，我可以只使用文本输入字段和列表，但是拥有这个“intervalPicker”看起来会更好一些，并且更适合整体输入方案（我使用 datePicker 和 timePicker 控件来设置重复事件的起点）。

我对整个 XAML 世界还很陌生，因为我刚刚涉足其中。我的问题是，如果您能给我一些提示，哪种解决方案最可行。

*   开发我自己的控件（我认为需要做很多工作才能做到这一点）
*   “增强”日期选择器
*   从 Silverlight-Toolkit 中获取日期/时间选择器代码并对其进行自定义。
*   使用一个我还没有找到的已经可用的控件。
*   ?

我担心哪种解决方案是最好的，但由于我在这方面相当缺乏经验，我想以“最符合”的方式来做这件事，为此我很想听听你有经验的意见（也许（相当）有可能以我可以做到这一点的方式“子类化”基本选择器控件吗？）

我期待听到您的建议和见解。

PS：我想标记我的问题，`windows-phone-toolkit`因为适用于 Windows Phone 的[Silverlight Toolkit](https://silverlight.codeplex.com/)已重命名为“Windows Phone Toolkit”。不幸的是，该标签还不存在，而且我的声誉很低，无法创建它。如果排名更高的用户可以创建该标签，那就太好了。我认为未来的问题可以使用它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T16:59:36.620

我建议查看[Coding4Fun Tools for Windows Phone 中](http://coding4fun.codeplex.com/wikipage?title=TimeSpanPicker&referringTitle=Documentation)的时间跨度选择器。我没有看到 Days/Weeks/Months 滑块的选项，但我敢肯定，如果你从他们的控件开始，你可以很容易地添加它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T15:48:18.273

只需将其中两个粘在一起并相应地设置样式[https://github.com/buymeasoda/jquery-option-picker](https://github.com/buymeasoda/jquery-option-picker)

# actionscript-3 - 警报后列表中的 selectedIndex

> ID：13917032
> 
> 赞同：0
> 
> 时间：2012-12-17T15:28:39.757
> 
> 标签：actionscript-3, apache-flex

我有一个带有 ArrayCollection 数据提供者的列表。在我的程序中，用户可以单击一个按钮来为列表的 selectedIndex 执行功能，但首先会显示一个警报，询问他们是否确定要执行该操作。用户回答 Alert 后，将对列表的 selectedIndex 执行操作。

我的问题是在警报窗口 CloseEvent 之后 selectedIndex = -1，即使它被明确选中。我通过在 Alert CloseEvent 的代码中的列表上执行 validateNow() 来解决这个问题。

**我的问题：**为什么我必须这样做，我做错了什么？或者这是正常/最佳实践？此外，除了使用 try-catch 之外，是否有更好的/最佳实践来检查列表以查看是否选择了某些内容。如果未选择任何内容，我不希望最终用户看到生成的错误。

代码：

```
//Note: "fl" is a class with "friendsList" bindable ArrayCollection; for the sake of keeping this short I will not include it

private function _removeFriendClick(event:MouseEvent):void
{
    try {
        if (this.friendsList.selectedIndex != -1) {
            Alert.show("Are you sure you want to remove "+this.fl.friendsList[this.friendsList.selectedIndex].label+" as a friend?", "Remove Friend", Alert.YES | Alert.CANCEL, this, this._removeFriendConfirm, null, Alert.CANCEL);
        }
    } catch (e:Error) { }
}

private function _removeFriendConfirm(event:CloseEvent):void
{
    this.friendsList.validateNow();
    trace(this.friendsList.selectedIndex);
} 
```

所以，使用上面的代码，如果你取出 validateNow()，就会抛出一个异常，因为它认为 selectedIndex 是 -1。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T20:42:10.520

我会这样做：

```
<?xml version="1.0" encoding="utf-8"?>
<s:Application xmlns:fx="http://ns.adobe.com/mxml/2009" 
           xmlns:s="library://ns.adobe.com/flex/spark" 
           xmlns:mx="library://ns.adobe.com/flex/mx" minWidth="955" minHeight="600">

<fx:Script>
    <![CDATA[
        import mx.collections.ArrayCollection;
        import mx.controls.Alert;
        import mx.events.CloseEvent;

        [Bindable]private var friendsList:ArrayCollection = new ArrayCollection([{data:"111", label:"Don"}, {data:"222", label:"John"}]);

        private function onBtnRemove():void
        {
            laFriend.text = "";

            try 
            {
                if (cbFriends.selectedIndex != -1) 
                {
                    Alert.show("Are you sure you want to remove " + cbFriends.selectedItem.label + " as a friend?", "Remove Friend", Alert.YES | Alert.CANCEL, this, this._removeFriendConfirm, null, Alert.CANCEL);
                }
            } catch (e:Error) { }
        }

        private function _removeFriendConfirm(event:CloseEvent):void
        {
            laFriend.text = "Selected friend: " + cbFriends.selectedItem.label;
        }
    ]]>
</fx:Script>

<mx:VBox>
    <s:ComboBox id="cbFriends" dataProvider="{friendsList}"/>
    <s:Button id="btnRemove" label="Remove" click="onBtnRemove()"/>
    <s:Label id="laFriend" text=""/>
</mx:VBox>

</s:Application> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T13:42:31.513

您是否在调用处理程序之前执行选择？

如果您设置了 selectedIndex，则由于生命周期，您无法立即将其取回 - 应在读取之前提交值。

您的 validateNow 强制提交。但是，它将在以后发生，而无需手动执行。

# c# - 枚举上的数据触发器以更改图像

> ID：13917033
> 
> 赞同：112
> 
> 时间：2012-12-17T15:28:43.423
> 
> 标签：c#, wpf

我有一个带有固定背景图像的按钮，并希望在其顶部显示一个小的叠加图像。选择哪个覆盖图像取决于`LapCounterPingStatus`相应视图模型的依赖属性 ( )。

这是我到目前为止得到的：

```
<Button>
    <Grid>
        <Image Stretch="None"> <!-- Background Image -->
            <Image.Style>
                <Style TargetType="{x:Type Image}">
                    <Setter Property="Source" Value="/Images/Pingn.png"/>
                </Style>
            </Image.Style>
        </Image>
        <Image Stretch="None" Panel.ZIndex="1"> <!-- Small Overlay Image -->
            <Image.Style>
                <Style TargetType="{x:Type Image}">
                    <Style.Triggers>
                        <DataTrigger Binding="{Binding Path=LapCounterPingStatus}" Value="PingStatus.PING_UNKNOWN">
                            <Setter Property="Source" Value="/Images/RefreshOverlayn.png"/>
                        </DataTrigger>
                        <DataTrigger Binding="{Binding Path=LapCounterPingStatus}" Value="PingStatus.PING_FAILURE">
                            <Setter Property="Source" Value="/Images/ErrorOverlayn.png"/>
                        </DataTrigger>
                        <DataTrigger Binding="{Binding Path=LapCounterPingStatus}" Value="PingStatus.PING_SUCCESS">
                            <Setter Property="Source" Value="/Images/CheckmarkOverlayn.png"/>
                        </DataTrigger>
                    </Style.Triggers>
                </Style>
            </Image.Style>
        </Image>
    </Grid>
</Button> 
```

我的视图模型的相关部分

```
public class ConfigurationViewModel
{
    public enum PingStatus { PING_UNKNOWN, PING_SUCCESS, PING_FAILURE };

    public PingStatus LapCounterPingStatus
    {
        get { return _lapCounterPingStatus; }
        set
        {
            _lapCounterPingStatus = value;
            RaisePropertyChanged(LapCounterPingStatusPropertyName);
        }
    }
} 
```

**现在，根本没有显示叠加图像。有什么问题？**

* * *

**更新**

我的 IDE 的跟踪窗口显示`System.ArgumentException`和`System.FormatException`. 问题来源可能是`PingStatus`XAML 中未知类型的枚举吗？

* * *

## 回答 #1

> 赞同：271
> 
> 时间：2012-12-17T15:48:40.357

你需要做两件事才能让它工作：

1 -`xmlns`在 XAML 文件的根元素中添加对定义 Enum 的命名空间的引用：

```
<UserControl ...
xmlns:my="clr-namespace:YourEnumNamespace;assembly=YourAssembly"> 
```

2 - 在 的`Value`属性中`DataTrigger`，使用以下`{x:Static}`形式：

```
 <DataTrigger Binding="{Binding Path=LapCounterPingStatus}" Value="{x:Static my:PingStatus.PING_UNKNOWN}"> 
```

请注意，Enum 类型必须以您在上面定义的 xmlns 前缀作为前缀。

**编辑：**

如果您的 Enum 在类中声明，则需要使用以下语法：

`{x:Static namespace:ClassName+EnumName.EnumValue}`

例如：

`{x:Static my:ConfigurationViewModel+PingStatus.PING_UNKNOWN}`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2019-09-23T13:27:53.627

WPF + MVVM 的完整示例。

在 MSVC 2017 上测试。

在视图中：

```
<TextBlock Text="Some text to be colored by an enum">
    <TextBlock.Style>
        <Style TargetType="{x:Type TextBlock}">
            <Style.Triggers>
                <DataTrigger Binding="{Binding StatusIcon}" Value="{x:Static my:StatusIcon.Warning}">
                    <Setter Property="Foreground" Value="Yellow"/>
                </DataTrigger>
                <DataTrigger Binding="{Binding StatusIcon}" Value="{x:Static my:StatusIcon.Error}">
                    <Setter Property="Foreground" Value="Red}"/>
                </DataTrigger>
            </Style.Triggers>
        </Style>
    </TextBlock.Style>
</TextBlock> 
```

`.`如果使用 ReSharper，并且 DataContext 设置正确，当你点击after时会有智能感知`StatusIcon`，即它会显示枚举的属性，`Debug`即`Info`、`Warning`或`Error`。

如果使用 ReSharper，它将建议对 XAML 文件标头中的命名空间进行以下更新（这样很好）：

```
xmlns:my="clr-namespace:Class.Path.MyViewModel;assembly=MyAssembly" 
```

和 VieModel：

```
public enum StatusIcon
{
    Debug,
    Info,
    Warning,
    Error
}

public class MyViewModel
{
    public StatusIcon StatusIcon { get; }
} 
```

我们也`Fody`用于自动绑定。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-10-28T21:47:52.670

您可以简单地将枚举值设置为 DataTrigger Value... 在 MSVC 2017 上测试。

```
<TextBlock Text="Some text to be colored by an enum">
    <TextBlock.Style>
        <Style TargetType="{x:Type TextBlock}">
            <Style.Triggers>
                <DataTrigger Binding="{Binding StatusIcon}" Value="Warning">
                    <Setter Property="Foreground" Value="Yellow"/>
                </DataTrigger>
                <DataTrigger Binding="{Binding StatusIcon}" Value="Error">
                    <Setter Property="Foreground" Value="Red}"/>
                </DataTrigger>
            </Style.Triggers>
        </Style>
    </TextBlock.Style>
</TextBlock> 
```

# c# - 使用asp.net C#在sql server 2008中上传文档

> ID：13917038
> 
> 赞同：0
> 
> 时间：2012-12-17T15:29:03.970
> 
> 标签：c#, asp.net, sql-server-2008, file-upload, download

我目前正在研究使用 ASP.Net 和 C# 的 Web 应用程序将文档上传和下载到 sql server 2008 数据库的不同方法和技术。

我找到了这个[excel 教程](http://www.c-sharpcorner.com/UploadFile/0c1bb2/uploading-and-downloading-excel-files-from-database-using-as/)，我想知道它是否类似于以类似的方式上传 pdf 和 word 文档？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T15:36:16.533

Considering the example in the link you shared, use the following validation:

```
switch (ext.ToLower())  
{
    case ".pdf": 
        type = "application/pdf"; 
        break;                 
    case ".doc":
        type = "application/msword";
        break;
    case ".docx":
        type = "application/vnd.openxmlformats-officedocument.wordprocessingml.document";
} 
```

[Here](http://blogs.msdn.com/b/vsofficedeveloper/archive/2008/05/08/office-2007-open-xml-mime-types.aspx) are some more MS Office 2007 MIME types you may consider and on [All MIME Types](http://www.fileformat.info/info/mimetype/all.htm) you may find a broader list.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T15:35:05.470

本教程适用于任何文件，而不仅仅是 excel。关键在这部分：

```
Stream fs = FileUpload1.PostedFile.InputStream;
BinaryReader br = new BinaryReader(fs);  //reads the   binary files
Byte[] bytes = br.ReadBytes((Int32)fs.Length);  //counting the file length into bytes
query = "insert into Excelfiledemo(Name,type,data)" + " values (@Name, @type, @Data)"; //insert query
com = new SqlCommand(query, con);
com.Parameters.Add("@Name", SqlDbType.VarChar).Value = filename1;
com.Parameters.Add("@type", SqlDbType.VarChar).Value = type;
com.Parameters.Add("@Data", SqlDbType.Binary).Value = bytes;
com.ExecuteNonQuery();
Label2.ForeColor = System.Drawing.Color.Green;
Label2.Text = "File Uploaded Successfully"; 
```

这里基本上发生的是文件流被转换为字节数组，该数组作为数据块存储在数据库中。这可用于任何文件类型。只要确保保留文件名（或至少扩展名），就像上面的示例一样，这样当您将其转回磁盘上的文件时，您就知道它是什么类型的文件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-17T15:32:15.597

答案很简单：是的，很相似。

**编辑**

您找到的链接是一个示例，向您展示了如何将文件内容存储到数据库中，它可以更改为任何其他不同的文件类型：pdf、doc、jpg 等等，只要您记录 mim e 类型，以便在下载时最终用户正确获取它

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-07-29T14:15:51.743

当您首先使用带有代码的 ASP.NET MVC 4 或 5 时，此答案更合适。

```
//on your view model
public class MyViewModel
    {
        [Required]
        [DisplayName("Select File to Upload")]
        public IEnumerable<HttpPostedFileBase> File { get; set; }
    }
// on your object class, make sure you have a data type byte[] that will store a file in a form of bytes, a byte[] data type store both Images and documents of any content type. 
    public class FileUploadDBModel
    {
        [Key]
        public int Id { get; set; }
        public string FileName { get; set; }
        public byte[] File { get; set; }
    }
// on your view 
<div class="jumbotron">
    @using (Html.BeginForm(null, null, FormMethod.Post, new { enctype = "multipart/form-data" }))
    {
        <div>
            @Html.LabelFor(x => x.File)
            @Html.TextBoxFor(x => x.File, new { type = "file" })
            @Html.ValidationMessageFor(x => x.File)
        </div>
        <button type="submit">Upload File</button>
    }
</div>

//on your controller
 public ActionResult Index(MyViewModel model)
        {
                FileUploadDBModel fileUploadModel = new FileUploadDBModel();
                //uploading multiple files in the database
                foreach (var item in model.File)
                {
                    byte[] uploadFile = new byte[item.InputStream.Length];
                    item.InputStream.Read(uploadFile, 0, uploadFile.Length);

                    fileUploadModel.FileName = item.FileName;
                    fileUploadModel.File = uploadFile;

                    db.FileUploadDBModels.Add(fileUploadModel);
                    db.SaveChanges();
                }
            } 
```

# python - cx_Oracle 查询结果到嵌套字典

> ID：13917041
> 
> 赞同：1
> 
> 时间：2012-12-17T15:29:10.767
> 
> 标签：python, dictionary, cx-oracle

我需要根据 Oracle 查询结果创建一组字典。

我的数据按站点 ID、日期、时间、位置、物种和捕获重量排列。对于每个物种，都有一条新线，而所有位置等数据可能是多余的。

首先，我需要按字段名和值创建一个键控字典，例如 stationID、日期等，这样当我调用时，

```
value[1]  (this being the station ID field) 
```

我明白了

```
112 
```

最终结果是将所有“喜欢”的站点 ID、日期等合并到一个唯一键中——结果数据（渔获量）是值。

如`[date,time,location, etc]`：鳕鱼 47、鳕鱼 31、角鲨 5

到目前为止，要按字段名称然后按行将数据解析为单独的键控字典，我有这个：

```
desc=[d[0] for d in cursor.description]
field=[d[1] for d in cursor.description]
value=dict(zip(desc,field))   
result=[dict(zip(value,line)) for line in cursor]
print result[1] 
```

但是，如果我尝试调用值，则该字段只是数据类型。我怎样才能获得实际的数据值？然后将其嵌套到解析每个单独样本的“结果”字典中？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-17T15:37:09.410

您将错误的物品拉在一起。仅 Zip`desc`和`line`，您不需要使用`cursor.description`元组中的第二项：

```
desc=[d[0] for d in cursor.description]
result=[dict(zip(desc, line)) for line in cursor] 
```

# jquery - 关闭创建的 jQuery 元素

> ID：13917043
> 
> 赞同：1
> 
> 时间：2012-12-17T15:29:15.560
> 
> 标签：jquery, html, ajax

我有这个问题：

```
$(document).ready(function() {                                 
    $('#buttonTest').click(function() {                        
        $.get('/WebTestProject/ServletEsempio', function(responseJson) {         
            var $table = $('<table>').appendTo($('#result')); 
            $.each(responseJson, function(index, product) {    
                $('<tr>').appendTo($table)                     
                    .append($('<td>').text(index))       
                    .append($('<td>').text(product))    
            });
        });
    });
}); 
```

这段代码可以调用我的 servlet，但我找不到如何关闭 TAG 和 . 是否可以？

非常感谢所有人。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-17T15:33:02.163

当您以这种方式使用 jQuery 创建元素时，它们会*自动创建关闭*。但是，即使是 jQuery 文档也建议您显式关闭它：

> 为确保跨平台兼容性，代码段必须格式正确。*可以*包含其他元素的标签应与结束标签配对：
> 
> 即：`$('<table />');`或`$('<table></table>');`
> 
> **不能**包含元素的标签可能会被快速关闭：
> 
> 即：`$('<img />');`或`$('<input>');`

*来源*：[http ://api.jquery.com/jQuery/#creating-new-elements](http://api.jquery.com/jQuery/#creating-new-elements)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T15:30:49.120

假设您指的是`table`您正在创建的元素，它将自动为您关闭，因为 jQuery 依赖于 javascripts 的`createElement()`功能来创建元素。

从[文档](http://api.jquery.com/jQuery/#jQuery2)中：

> 当参数有单个标签（带有可选的结束标签或快速结束标签）时——`$('<img />')`或`$('<img>')`，`$('<a></a>')`或`$('<a>')`——jQuery 使用原生 JavaScript`createElement()`函数创建元素。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-17T15:33:34.920

从 jQUery doku (http://api.jquery.com/jQuery/ ):

> 创建新元素
> 
> 如果一个字符串作为参数传递给 $()，jQuery 会检查该字符串以查看它是否看起来像 HTML（即，它在字符串中的某个位置）。如果不是，则字符串被解释为选择器表达式，如上所述。但是如果字符串看起来是一个 HTML 片段，jQuery 会尝试按照 HTML 的描述创建新的 DOM 元素。然后创建并返回一个引用这些元素的 jQuery 对象。你可以在这个对象上执行任何常用的 jQuery 方法：$('My *new* text
> 
> ').appendTo('body');
> 
> 如果 HTML 比没有属性的单个标签更复杂，如上例所示，则元素的实际创建由浏览器的 innerHTML 机制处理。在大多数情况下，jQuery 会创建一个新元素并将该元素的 innerHTML 属性设置为传入的 HTML 片段。当参数具有单个标签（带有可选的结束标签或快速结束标签）时 - $('') 或$('')、$('') 或 $('') — jQuery 使用原生 JavaScript createElement() 函数创建元素。

# d3.js - 如何将此数据与 D3js 散点图一起使用？

> ID：13917046
> 
> 赞同：0
> 
> 时间：2012-12-17T15:29:38.433
> 
> 标签：d3.js, scatter-plot

我有以下格式的数据并想与 D3.js 散点图一起使用：

```
{
    "0": [
             {"X":"1", "Y":"1"},
             {"X":"2", "Y":"2"},
             {"X":"3", "Y":"3"},
             {"X":"4", "Y":"4"}
         ],
    "1": [
             {"X":"1", "Y":"1"},
             {"X":"2", "Y":"2"},
             {"X":"3", "Y":"3"},
             {"X":"4", "Y":"4"}
         ],
    "2": [
             {"X":"1", "Y":"1"},
             {"X":"2", "Y":"2"},
             {"X":"3", "Y":"3"},
             {"X":"4", "Y":"4"}
         ],
    ...
} 
```

前提是，我希望将每个 0、1、2 和 N 视为散点图的新系列，同时希望使用 N（0、1、2 或 N）中提供的 X、Y 绘制点。

我明显的困惑围绕以下几点：

1.  这些数据对散点图有用吗？如果不是，那么最好的图表应该是什么（现有的例子在任何一种情况下都会很好）。

2.  如何将此数据与 d3.min() 和 d3.max() 一起使用？

3.  如何使用这些数据来定义 X 和 Y 轴的缩放比例？

非常感谢任何帮助。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T21:40:47.617

这段代码有一个小提琴：http: [//jsfiddle.net/GyWpN/13/](http://jsfiddle.net/GyWpN/13/)

粗制滥造，但元素在那里。

1.  这些数据对散点图有用吗？如果不是，那么最好的图表应该是什么（现有的例子在任何一种情况下都会很好）。

    该数据将在散点图中起作用。“最佳”图表在很大程度上取决于数据代表什么，以及您的用户将如何解释它。

2.  如何将此数据与 d3.min() 和 d3.max() 一起使用？

    请参阅下面的代码

3.  如何使用这些数据来定义 X 和 Y 轴的缩放比例？

    请参阅下面的代码

    ```
    var myData = {
    "0": [   {"X":"1", "Y":"1"},
             {"X":"2", "Y":"2"},
             {"X":"3", "Y":"3"},
             {"X":"4", "Y":"4"}  ],
    "1": [   {"X":"1", "Y":"2"},
             {"X":"2", "Y":"3"},
             {"X":"3", "Y":"4"},
             {"X":"4", "Y":"5"}  ],
    "2": [   {"X":"1", "Y":"7"},
             {"X":"2", "Y":"6"},
             {"X":"3", "Y":"5"},
             {"X":"4", "Y":"4"}  ]};

    var width = 625,
        height = 350;

    // A way to look more easily across all 'inner' arrays
    var myDataDrill = d3.values( myData );

    var x = d3.scale.linear()
        .domain([0, 
          // max over all series'
          d3.max( myDataDrill, function(d) { 
              // within a series, look at the X-value
              return d3.max( d, function(v) { return v.X } )  
    } ) ])
        .range([0, width]);

    var y = d3.scale.linear()
        .domain([0, d3.max( myDataDrill, function(d) { 
          return d3.max( d, function(v) { return v.Y } ) } )])
        .range([height, 0]);

    var svg = d3.select("body").append("svg")
        .attr("width", width)
        .attr("height", height)
        .append("g");

    var series = svg.selectAll( "g" )
        // convert the object to an array of d3 entries
        .data( d3.map( myData ).entries() )
        .enter()
        // create a container for each series
        .append("g")
        .attr( "id", function(d) { return "series-" + d.key } );

    series.selectAll( "circle" )
       // do a data join for each series' values
       .data( function(d) { return d.value } )
       .enter()
       .append("circle")
        .attr( "cx", function(d) { return x(d.X) } )
        .attr( "r", "10" )
        .attr( "cy", function(d) { return y(d.Y) } ); 
    ```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T18:18:43.700

我是 D3 的新手，但我可以指导您[向左对齐](http://alignedleft.com/tutorials/d3/scales/)，他的教程非常有帮助，并且您的问题从键接受，值对象得到解释。

# javascript - 如何在页面的 Javascript 执行后加载内容脚本？

> ID：13917047
> 
> 赞同：41
> 
> 时间：2012-12-17T15:29:48.667
> 
> 标签：javascript, google-chrome-extension, content-script

我的扩展应该加载一个内容脚本 searchTopic.js，只有在它注入的页面已经完全加载之后（是的，我在扩展清单中将“run_at”设置为“document_end”），但实际上它是在之前加载的所有 DOM 对象都已创建（关键的对象是通过页面中的一些 Javascript 创建的）。所以，问题是，我怎样才能等到页面的 Javascript 执行完毕？这是我的清单：

```
"content_scripts": [
  {
  "run_at": "document_end",
  "matches": ["https://groups.google.com/forum/*"],
  "js": ["searchTopic.js"]
  }
], 
```

* * *

## 回答 #1

> 赞同：64
> 
> 时间：2012-12-17T16:07:23.550

[`"run_at": "document_end"`相当于`DOMContentLoaded`。](http://developer.chrome.com/extensions/content_scripts.html#run_at) 也就是说，它在*静态*HTML 加载之后、但在慢速图像和慢速完成 javascript 之前触发。

因此，您不能仅通过单独设置清单来设置内容脚本在页面的 JS 之后触发。您必须在内容脚本本身中为此编写代码。

对于内容脚本，`"run_at": "document_end"`将在`onload`事件之前触发（与默认值不同`document_idle`——它可以在不可预测的时间触发）。

因此，第一步是`load`在内容脚本 ( `searchTopic.js`) 中使用如下代码等待事件：

```
window.addEventListener ("load", myMain, false);

function myMain (evt) {
    // DO YOUR STUFF HERE.
} 
```

如果您关心的脚本需要一段时间才能完成，您将不得不根据具体情况轮询某些条件。例如：

```
window.addEventListener ("load", myMain, false);

function myMain (evt) {
    var jsInitChecktimer = setInterval (checkForJS_Finish, 111);

    function checkForJS_Finish () {
        if (    typeof SOME_GLOBAL_VAR != "undefined"
            ||  document.querySelector ("SOME_INDICATOR_NODE_css_SELECTOR")
        ) {
            clearInterval (jsInitChecktimer);
            // DO YOUR STUFF HERE.
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-17T16:08:28.667

`script`元素按顺序执行。如果. `script`_ `body`这保证工作，否则`document.write()`将停止工作。

所以你有两个解决方案：

1.  使用该`onload`事件来加载您的代码。
2.  添加一个脚本标签作为页面的最后一个元素（元素中的最后一个`body`元素）。此脚本将在所有其他脚本完成后**以及**正文已转换为 DOM 树后执行。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2017-07-20T05:25:22.467

您使用 window.load 方法。

```
function addLoadEvent(a) {
    var b = window.onload;
    "function" != typeof window.onload ? window.onload = a : window.onload = function () {
        b && b(),
            a()
    }
}
function init() {
    alert('init');
}
addLoadEvent(init); 
```

# android - 无法通过框架 API 获得电话参数

> ID：13917049
> 
> 赞同：3
> 
> 时间：2012-12-17T15:29:57.637
> 
> 标签：android, android-ndk, telephony, modem, at-command

我必须获取与以下电话参数相关的信息：BCCH、频段、DL ARFCN、UL ARFCN、BLER、MOS DL、MOS UL、Txpwr 和切换参数。

我进行了很多搜索，但没有找到任何通过 API 获取此信息的方法。可能还有其他一些方法（我不确定），例如：

1.  使用 AT 命令。
2.  使用 AIDL，与 RIL 交谈并获取信息。
3.  使用 NDK，编写将直接与调制解调器/低级实现对话的 c 代码。

但我不知道哪种方法是正确的，也不知道如何采用正确的方法。任何有关任何电话参数的帮助将不胜感激。

# ios - iTunes Connect 保留名称限制

> ID：13917050
> 
> 赞同：1
> 
> 时间：2012-12-17T15:30:00.270
> 
> 标签：ios, app-store-connect

我的 180 天限制到达，我收到一封电子邮件，我需要在此之前上传我的二进制文件，否则我将丢失名称。我真的很接近实际发布，但我不能 100% 确定我可以在 7 天的最后期限内完成。我刚刚提交了我的二进制文件，但它被拒绝了（一些缺少的屏幕截图）足以“重置时钟”吗？有什么地方我可以检查以确保我不会在 7 天内失去名字？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T15:32:50.457

快速上传一个可运行的版本并立即拒绝它自己。这会给你额外的几个月。对于描述和屏幕截图等应用信息，您可以临时上传一些占位符。

重要的是自己拒绝它。

# reference - 是否可以通过引用从堆栈中传递一些东西？

> ID：13917051
> 
> 赞同：0
> 
> 时间：2012-12-17T15:29:59.650
> 
> 标签：reference, stack, computer-science, pass-by-reference

前几天我在 php 中遇到了一些奇怪的东西，但这个问题比这更笼统。

我想知道的是，是否有可能有一个函数返回据我所知意味着返回值/函数在堆栈上并将结果传递给一个接受引用的函数？

以我有限的知识，我会说不，但这只是我的一种感觉，而且我学会了在编程时永远不要相信自己的感觉。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T15:36:01.597

I'm not too familiar with references in PHP, but you can do this in C/C++ and some cases in C#.

The thing is that you have to be careful. A value on the stack is only valid as long as the function whos stack frame it belongs to hasn't returned (ignoring stuff like the red zone). C and C++ expect you to be smart enough to not use a dangling reference like this.

Anyway, it doesn't matter in PHP because it's a high level language and hides details of allocation like that from you. Most likely, all your objects are allocated on the heap.

# jquery - 使用 And 和 Or 语句进行 jQuery 过滤

> ID：13917058
> 
> 赞同：3
> 
> 时间：2012-12-17T15:30:11.117
> 
> 标签：jquery, filtering

我必须为产品列表构建一个复杂的过滤系统。下面是产品列表的基本结构：

```
<ul id="prod-list">
    <li class="item type-brochure lang-english">Brochure: English</li>
    <li class="item type-folder lang-english lang-french">Folder: English, French</li>
    <li class="item type-bulletin lang-english">Bulletin: English</li>
    <li class="item type-folder lang-english lang-french">Folder: English, French</li>
    <li class="item type-folder lang-english">folder: English</li>
    <li class="item type-brochure lang-english lang-spanish">Brochure: English, Spanish</li>
    <li class="item type-brochure lang-english">Brochure: English</li>
    <li class="item type-folder lang-english">Folder: English</li>
    <li class="item type-bulletin lang-english">Bulletin: English</li>
</ul> 
```

然后，我为每种类型和语言过滤器设置了复选框：

```
<p><strong>Filter by Type:</strong></p>
<p><input type="checkbox" id="type-brochure" /> <label for="type-brochure">Brochure</label></p>
<p><input type="checkbox" id="type-folder" /> <label for="type-folder">Folder</label></p>
<p><input type="checkbox" id="type-bulletin" /> <label for="type-bulletin">Bulletin</label></p>
...
<p><strong>Filter by Language:</strong></p>
<p><input type="checkbox" id="lang-english" /> <label for="lang-english">English</label></p>
<p><input type="checkbox" id="lang-spanish" /> <label for="lang-spanish">Spanish</label></p>
<p><input type="checkbox" id="lang-french" /> <label for="lang-french">French</label></p>
... 
```

如您所见，每个项目都有一个类型，然后是一种语言。*一个项目可以有多种类型和语言。*

基本上，我需要类型的复选框作为**OR**语句（如果用户选中 Brochure 和 Folder 的复选框，它将列出所有 Brochures**和**文件夹，然后隐藏所有其他）。

然后，我需要语言的复选框充当**AND**语句（如果用户选中英语和法语的复选框，它只会显示同时是英语**和**法语的项目，然后隐藏所有其他项目）。

我查看了其他问题，例如[this](https://stackoverflow.com/questions/8796472/filtering-with-checkboxes-using-jquery)，但我不确定如何让类似的东西与两种不同的过滤方法一起使用。过滤器需要协同工作，这样如果用户检查小册子、英语、法语，它只会显示同时是英语和法语的小册子。

如果有人对如何实现这一点有一些建议，将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-17T16:04:33.447

您将需要在输入中添加一个类。对于此示例，我在适当的输入中添加了“特定于类型”和“特定于语言”。这是我未优化但可读的代码。

```
$(function(){
    $('input').click(function(){
        $('#prod-list li').hide();
        var languages = '';
        $('.language-specific:checked').each(function(){
            languages += '.' + $(this).attr('id');
        });
        if($('.type-specific:checked').length > 0){
            $('.type-specific:checked').each(function(){
                $(languages+'.'+$(this).attr('id')).show();
                console.log(languages+'.'+ $(this).attr('id'));
            });
        } else {
            $(languages).show();
        }
    });
}); 
```

这是一个小提琴的例子[。](http://jsfiddle.net/c2wuR/7/)所有逻辑都由 jquery 选择器处理。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-17T16:07:32.587

您可以通过以下方式实现：

*   从一个空的 jQuery 对象开始，
*   然后遍历选中的`type-`框并调用[add()](http://api.jquery.com/add/)来累积 OR 过滤的元素，
*   然后遍历`lang-`复选框并调用[filter()](http://api.jquery.com/filter/)以减少元素集。

就像是：

```
function updateItems()
{
    var $matched;
    var $checkedTypeBoxes = $("input[type='checkbox'][id^='type-']:checked");
    if (!$checkedTypeBoxes.length) {
        $matched = $("#prod-list .item");
    } else {
        $matched = $();
        $checkedTypeBoxes.each(function() {
            // Add items of checked type.
            $matched = $matched.add("#prod-list .item." + this.id);
        });
    }
    $("input[type='checkbox'][id^='lang-']:checked").each(function() {
        // Filter out items that don't expose checked language.
        $matched = $matched.filter("." + this.id);
    });

    $("#prod-list .item").hide();
    $matched.show();
}

$(document).ready(function() {
    updateItems();
    $("input[type='checkbox']").change(function() {
        updateItems();
    });
}); 
```

[你可以在这个 fiddle](http://jsfiddle.net/4dqxA/2/)中测试这个解决方案。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-17T16:00:39.370

这是进行过滤所需的javascript。

```
$(':checkbox').change(FindFilters);

function FindFilters() {
    var filterArray = [];
    //which checkboxes are checked?
    $(':checkbox').each(function () {
        var $this = $(this);
        if ($this.prop('checked')) {
            filterArray.push($this.prop('id'));
        }
    });

    console.log(filterArray);
    FilterList(filterArray);
}
function containsAll(needles, haystack){ 
    for(var i = 0 , len = needles.length; i < len; i++){
        if($.inArray(needles[i], haystack) == -1) return false;
    }
    return true;
}
function FilterList(filters) {
    if (filters.length > 0) {
        $('#prod-list li').each(function () {
            var $this = $(this),
                attributes = $this.prop('class').split(' ');

            if (containsAll(filters,attributes)) {
                $this.slideDown();
            } else {
                $this.slideUp();
            }
        });
    } else {
        $('#prod-list li').slideDown();
    }
} 
```

这是jsfiddle：http: [//jsfiddle.net/Morlock0821/nxTPN/](http://jsfiddle.net/Morlock0821/nxTPN/)

# excel - 打开 excel 文件时，如何在自定义“加载项”VBA 中运行子程序？无需在任何新文件中编写自定义代码？

> ID：13917061
> 
> 赞同：0
> 
> 时间：2012-12-17T15:30:24.757
> 
> 标签：excel, vba, procedure

我正在为 excel 进行自动备份，但我找不到在我的自定义“加载项”代码中运行子过程（启动计时器）的方法。

我找到了 Workbook_Activate 或 Workbook_Open 子，但它们必须在工作表中创建，而不是在“加载项”中，因此想要使用加载项中的备份功能的每个人都应该编写该代码，这是不可管理的.

到底有没有？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T15:34:54.977

哦，对不起..在我问过之后我发现了这个：

```
Private Sub Auto_Open()
    startBackupTimer
End Sub 
```

哪个有效！

# ruby - 为什么 datamapper 不更新记录/检测脏污？

> ID：13917062
> 
> 赞同：2
> 
> 时间：2012-12-17T15:30:29.947
> 
> 标签：ruby, database, migration, datamapper, ruby-datamapper

我最近想写一个简单的迁移脚本。我写：

```
@entries = Entries.all(:text => /test/)

@entries.each do |entry|
  entry.update(:text => entry.text.gsub!(/test/, "no-test"))
end 
```

即使更新语句返回 true，它也没有保存记录。我错过了什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-03T17:24:52.253

在 1.x 系列的 datamapper 中，脏跟踪是通过调用`#==`新旧属性值来检测脏的。如果一个对象在原地发生了变异（例如使用 String bang 方法），则无法检测到更改，因为“原始”状态也发生了变异。

基本上在内部发生以下情况：

```
a = "foo"
b = a.gsub!("foo", "bar")
a == b     # => true both a and b refer to the same mutated object
a.equal?(b) # => true 
```

在您的示例中，您将原始变异属性分配回对象，没有身份更改 => 没有检测到更新。

`String#gsub`如果您通过而不是通过改变原始属性值来创建新对象，`String#gsub!`最终会得到可检测的更改。

通过分配具有不同值的新对象，会发生以下情况：

```
a = "foo"
b = a.gsub("foo", "bar")
a == b      # => false, loaded state does not equal resource state so change is detected
a.equal?(b) # => false 
```

为了涵盖所有情况，分配一个具有相同值的新对象：

```
a = "foo"
b = "foo"
a == b      # => true, no dirtyness detected.
a.equal?(b) # => false 
```

希望这足以解释语义差异以解释所有类似情况。

顺便说一句，在 datamapper 2.0 中，我们有一个不同的机制，它也可以捕捉到位的突变。免责声明，我是这个名为[dm-session](https://github.com/datamapper/dm-session)的组件的作者。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-18T07:11:38.810

去掉感叹号。

`entry.update(:text => entry.text.gsub(/test/, "no-test"))`

替换字符串内容时，记录不会变脏。你应该重新分配它。

# ruby-on-rails - 如何在没有密码的情况下使用 Devise 编辑用户

> ID：13917064
> 
> 赞同：0
> 
> 时间：2012-12-17T15:30:32.207
> 
> 标签：ruby-on-rails, authentication, devise

我仍然是 Rails 的初学者，并且已经搜索了一段时间的答案。我在我的应用程序中使用 Devise 进行身份验证，并希望用户能够在不使用当前密码的情况下更新他们的帐户信息。我已经查看了有关[允许用户在不提供密码的情况下编辑其帐户](https://github.com/plataformatec/devise/wiki/How-To%3a-Allow-users-to-edit-their-account-without-providing-a-password)的设计文档。

这样做我会遇到几个错误。无论我在提交帐户更新时使用哪种控制器设置（由文档提供），我都会得到以下信息：

```
 Can't mass-assign protected attributes: current_password 
```

因此，我转到我的用户模型并将 :current_password 添加到 attr_accessible。然后在提交更新时，我会看到：

```
 unknown attribute: current_password 
```

所以，我被困住了。我无法弄清楚这笔交易是什么。我 90% 确定我的 routes.rb 设置正确（同样，按照文档）。我在想，如果我不这样做，这些错误消息甚至都不会出现。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T15:46:36.317

`<%= f.input :current_password %>`从_`app/views/device/registrations/edit.html.erb`

# facebook-graph-api - 限制和偏移不适用于 Facebook me/feed 连接

> ID：13917065
> 
> 赞同：4
> 
> 时间：2012-12-17T15:30:34.773
> 
> 标签：facebook-graph-api, pagination

我发现如果 Graph Connection me/feed 与 limit 和 offset 一起使用，那么它会为大多数 limit 和 offset 值返回空的 json 数组。例如：-

me/feed?limit=10&offset=0 给出正确的数据

但是 me/feed?limit=10&offset=10 正在返回空的 json 数据数组

请帮助我:(提前谢谢....

** 这种行为也可以使用 GRAPH API 资源管理器工具重现，并且我已经使用 GRAPH API 资源管理器工具获得了所有可能的权限。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T13:09:19.660

我一直在对图形 api 进行类似的实验，我认为偏移量在检索到的数据集中。这意味着当您仅检索十个项目并从第 10 个偏移量开始时，将返回零个项目。但是，如果 limit 大于 offset 则将返回一些数据。也可以看看这个[链接](https://developers.facebook.com/bugs/388166594574941/)

# c# - Linq 从旧列表子列表写入新列表，更改所述列表，写回旧列表

> ID：13917073
> 
> 赞同：-3
> 
> 时间：2012-12-17T15:30:58.940
> 
> 标签：c#, linq

我对 Linq 比较陌生。我在编码时遇到了麻烦。

我有一个包含许多不同子列表的列表。

```
oldList[0]    some type 
oldList[1]    another different type
oldList[2]    the type I want
oldList[3]    more types 
```

我想从特定类型中选择所有参数并将它们写入临时列表。如果该临时列表为空，我想分配一些值（值实际上并不重要）。更改值后，我想将临时列表写回 oldList。

请指教。这对我来说是一次巨大的学习经历。

```
public void myFunction(list)
    {
        //list contains at least 5 sublists of various type

        //check if the type I want is null
            IEnumerable<TypeIWant> possiblyEmptyList = list.OfType<TypeIWant>(); //find the type I want from the list and save it
            if (possiblyEmptyList == null) //this doesn't work and possiblyEmptyList.Count <= 1 doesn't work
            {
                //convert residence address to forwarding address
                IEnumerable<ReplacementType> replacementList = list.OfType<ReplacementType>();
                forwardingAddress = replacementList.Select(x => new TypeIWant /* this statement functions exactly the way I want it to */
                {
                    Address1 = x.Address1,
                    Address2 = x.Address2,
                    AddressType = x.AddressType,
                    City = x.City,
                    CountryId = x.CountryId,
                    CountyRegion = x.CountyRegion,
                    Email = x.Email,
                    ConfirmEmail = x.ConfirmEmail,
                    Fax = x.Fax,
                    Telephone = x.Telephone,
                    State = x.State,
                    PostalCode = x.PostalCode
                });
                //write forwarding address back to list
                //don't know how to do this
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T16:03:12.323

LINQ 的目的是查询。它不允许您用其他项目替换集合中的某些项目。改用简单循环：

```
IEnumerable<TypeIWant> possiblyEmptyList = list.OfType<TypeIWant>();
if (!possiblyEmptyList.Any()) 
{
   for (int i = 0; i < list.Count; i++)
   {
        ReplacementType item = list[i] as ReplacementType;
        if (item == null)
            continue;

        list[i] = ConvertToTypeIWant(item);
   }
} 
```

和转换（最好使用[automapper](http://automapper.org/)之类的东西）：

```
private TypeIWant ConvertToTypeIWant(ReplacementType x)
{
     return new TypeIWant 
            {
                Address1 = x.Address1,
                Address2 = x.Address2,
                AddressType = x.AddressType,
                City = x.City,
                CountryId = x.CountryId,
                CountyRegion = x.CountyRegion,
                Email = x.Email,
                ConfirmEmail = x.ConfirmEmail,
                Fax = x.Fax,
                Telephone = x.Telephone,
                State = x.State,
                PostalCode = x.PostalCode
            };
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T16:05:41.437

不是 LINQ，而是一个例子。

```
class Program
{
    static void Main(string[] args)
    {
        // Vars
        var list = new List<List<string>>();
        var a = new List<string>();
        var b = new List<string>();
        var c = new List<string> { "one", "two", "three" };
        var d = new List<string>();

        // Add Lists
        list.Add(a);
        list.Add(b);
        list.Add(c);
        list.Add(d);

        // Loop through list
        foreach (var x in list)
        {
            if (x.Count < 1)
            {
                var tempList = new List<string>();

                tempList.Add("some value");

                x.Clear();
                x.AddRange(tempList);
            }
        }

        // Print
        int count = 0;
        foreach (var l in list)
        {
            count++;
            Console.Write("(List " + count + ") ");
            foreach (var s in l)
            {
                Console.Write(s + " ");
            }
            Console.WriteLine("");
        }

    }
} 
```

（清单 1）一些价值

（清单 2）一些价值

（清单3）一二三

（清单 4）一些价值

# c# - 将表从 C# 代码传递到 javascript 函数

> ID：13917083
> 
> 赞同：0
> 
> 时间：2012-12-17T15:31:30.227
> 
> 标签：c#, asp.net

我有一个用户控件，它是更新面板的一部分。用户控件是一个标题（标签）和一个 asp 表。ascx 文件中仅使用标题定义了 asp:Table。该表的内容是通过读取 csv 文件从后面的代码动态更新的。此设置位于每分钟更新的更新面板中。每分钟 csv 文件都会更新，因此需要更新表。

这是棘手的部分。在更新表之前，我需要保存旧表的副本，然后更新新表。更新新表并且即将加载页面后，我需要从 page_load 处理程序中调用 javascript 函数并传递两个表。在 javascript 函数中，我需要逐个单元格地比较旧表和新表，并根据比较结果做一些工作。

这是我在更新之前将数据从表复制到另一个表的方法。

```
TableCell tableCell;
TableRow tableRow;
for (int i = 0; i < Table1.Rows.Count; i++)
{
    tableRow = new TableRow();
    for (int j = 0; j < Table1.Rows[i].Cells.Count; j++)
    {
        tableCell = new TableCell();
        tableCell.Text = Table1.Rows[i].Cells[j].Text;
        tableRow.Cells.Add(tableCell);
    }
    oldTable.Rows.Add(tableRow);
} 
```

但是由于某种原因，当我将表格传递给 javascript 函数并访问 javascript 中的单元格时，我只看到标题，而看不到旧表中的任何值。但是当我访问我自己背后的代码中的单元格时，我可以看到这些值。

我的 HTML 是

```
<table id="ContentPlaceHolderBody_ContentPlaceHolderBody_TradxPriceTable_5_oldTable" ClientID="oldTable">
    <tr>
        <td colspan="3">6M EURIBOR</td>
        <td colspan="3">6M EURIBOR</td>
    </tr><tr>
         <td>Instr</td>
         <td>Bid</td>
         <td>Ask</td>
         <td>Instr</td>
         <td>Bid</td>
         <td></td>
    </tr><tr>
         <td></td>
         <td></td>
         <td></td>
         <td colspan="3">BASIS 3s6s</td>
    </tr><tr>
          <td></td>
          <td></td>
          <td></td>
          <td>Instr</td>
          <td>Bid</td>
          <td>Ask</td>
    </tr><tr>
         <td></td>
         <td></td>
         <td></td>
         <td></td>
         <td></td>
         <td></td>
    </tr>
</table> 
```

我的 javascript 是

```
function foo(table1,table2)
{
   var oldTable = document.getElementById(table1);
   var newTable = document.getElementById(table2);
   alert(oldTable.rows[2].cells[1].innerHTML+" "+newTable.rows[2].cells[1].innerHTML);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T15:42:47.973

使用 html 表格并使用表格和值形成一个字符串，并将该字符串传递给 javascript。

```
string newTable = "<Table><Tr><Td>"+ somevalue +"</Td></Tr></Table>" 
```

在javascript中

```
var newT = '<%= newTable %>' 
```

# bash - 是否可以即时连接变量并对结果进行字符串替换？

> ID：13917087
> 
> 赞同：1
> 
> 时间：2012-12-17T15:31:39.560
> 
> 标签：bash, string-concatenation, substitution

用单个变量替换字符串：

```
FOO=fooo
echo ${FOO%o} 
```

输出为：`foo`。

如何通过串联做到这一点？像这样的东西：

```
FOO=fooo
echo ${FOO$FOO%o} 
```

输出是（我的愿望）`fooofoo`：。

*如果这是可能的。*

* * *

换句话说，我想连接几个字符串（使用变量），然后将字符串替换应用于整个字符串（所有变量的连接），而不仅仅是单个变量。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T17:06:08.930

据我所知，没有办法作为单一的 bash 操作来做到这一点。您需要先连接到变量，然后是所需的参数替换/扩展。

```
FOO=foooo
TMP=$FOO$FOO  # concatenation
echo "${TMP%o}"  # parameter substitution on concatenated string 
```

如果您觉得额外的 var 分配使其可读性降低，您可以选择效率较低（但更容易识别）的方法，将输出通过管道传输到执行类似操作的另一个命令，例如：

```
[me@home]$ FOO="fooo"

[me@home]$ TMP=$FOO$FOO; echo ${TMP%o}  # bash only, with temp var
fooofoo

[me@home]]$ echo $FOO$FOO | sed 's/o$//'  # pipe to an equivalent operation
fooofoo 
```

* * *

此外，根据您的最终目标，可能会有更清洁的方法来实现它。

例如，需要进行连接和修剪时的常见情况是路径操作，即：

```
[me@home]$ APP_ROOT=/opt/myapp
[me@home]$ APP_PATH=/config/hello.cfg
[me@home]$ FULL_PATH=$APP_ROOT$APP_PATH
[me@home]$ echo ${FULL_PATH%/hello.cfg}
/opt/myapp/config 
```

在这种情况下，“更清洁”的方法是：

```
[me@home]$ dirname $APP_ROOT$APP_PATH
/opt/myapp/config 
```

如果您可以分享您尝试实现的目标，也许会有更优雅的解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T15:34:06.870

请参阅下面的两个可能的答案，具体取决于您要查找的内容：

答案#1：

```
FOO=fooo
echo "${FOO}${FOO%o}" 
```

输出：

```
fooofoo 
```

* * *

答案#2：

```
FOO=fooo
echo "${FOO%o}${FOO%o}" 
```

输出：

```
foofoo 
```

* * *

答案#3：

```
FOO=fooo
CONCAT="$FOO$FOO"
echo "${CONCAT%ofooo}"

foo 
```

# animation - iOS 6：UIView 变换动画，在模拟器上工作的设备上没有动画发生

> ID：13917092
> 
> 赞同：0
> 
> 时间：2012-12-17T15:32:03.843
> 
> 标签：animation, uiview, ios6, transform

我已经创建了一个针对 iOS 5 的应用程序 iOS 6。动画在模拟器上运行良好，但在具有 iOS 5 的设备上出现问题。请给我一些建议。提前致谢。

代码：[UIView animateWithDuration:0.5 动画：^{answerImageView.transform = CGAffineTransformScale(imageView.transform, 0.0f, 0.0f);} 完成：^(BOOL 完成){ if(finished) NSLog(@"Finished !!!!!! !!");}];

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-05-17T14:20:38.297

自动布局确实与动画混为一谈。尝试禁用自动布局。

# sublimetext2 - subl --wait 在 tmux 中不起作用

> ID：13917095
> 
> 赞同：9
> 
> 时间：2012-12-17T15:32:26.523
> 
> 标签：sublimetext2, tmux

设置和使用 Sublime Text 2 作为 git 编辑器不会在 tmux 会话中正确等待。

```
$ tmux
$ export EDITOR="subl -w" 
$ git rebase HEAD^ -i (close file, terminal hangs) 
```

如果在`EDITOR`没有等待的情况下设置了，那么文件会像以前一样在 ST2 中打开，但是当然 rebase 会立即在 shell 中应用。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-06-27T04:52:48.200

我不使用*Sublime Text*，但我读过[一个关于 Super User 的问题](https://superuser.com/questions/522055/subl-w-doesnt-ever-un-block-when-running-under-tmux-on-os-x)，似乎是关于同样的问题。

解决方案涉及使用我制作的[“包装器”程序](https://github.com/ChrisJohnsen/tmux-MacOSX-pasteboard)，以允许在*tmux*中访问粘贴板。“修复”并非特定于粘贴板访问，因此该程序还可以缓解与剪切/复制/粘贴操作无关的其他几个领域的问题。*Sublime Text*用来实现调用的“等待”特性的方法似乎`subl -w`是这些“其他领域”之一。

您可以通过 MacPorts 从他们的[**tmux-pasteboard** port](https://trac.macports.org/browser/trunk/dports/sysutils/tmux-pasteboard/Portfile)或通过 Homebrew 从他们的[**reattach-to-user-namespace** formula](https://github.com/mxcl/homebrew/blob/master/Library/Formula/reattach-to-user-namespace.rb)获得包装器，或者从我在 GitHub[**的 tmux-MacOSX-pasteboard**存储库](https://github.com/ChrisJohnsen/tmux-MacOSX-pasteboard)中自己编译它。

一旦你安装了它，你可能想要在你的中配置（根据自述文件）a `default-command`，`.tmux.conf`以便在*tmux*中生成的 shell将自动“重新附加”。或者，您可以在 EDITOR 值中使用包装器：

```
EDITOR='reattach-to-user-namespace subl -w' 
```

# python - python中的猜谜游戏

> ID：13917097
> 
> 赞同：1
> 
> 时间：2012-12-17T15:32:45.803
> 
> 标签：python, while-loop

我才刚刚开始按照[http://learnpythonthehardway.org](http://learnpythonthehardway.org)学习编程。在了解了循环和 if 语句之后，我想尝试制作一个简单的猜谜游戏。

问题是：

如果您做出不正确的猜测，它会卡住并不断重复“太高”或“太低”，直到您点击 crtl C。

我已经阅读了有关 while 循环的内容并阅读了其他人的代码，但我只是不想复制代码。

```
print ''' This is the guessing game! 
A random number will be selected from 1 to 10.
It is your objective to guess the number!'''

import random

random_number = random.randrange(1, 10)
guess = input("What could it be? > ")
correct = False

while not correct:
    if guess == random_number:
        print "CONGRATS YOU GOT IT"
        correct = True
    elif guess > random_number:
        print "TOO HIGH"
    elif guess < random_number:
        print "TOO LOW"
    else:
        print "Try something else" 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-17T15:34:20.130

您必须再次询问用户。

在末尾添加这一行（缩进四个空格以将其保留在`while`块内）：

```
 guess = input("What could it be? > ") 
```

这只是一个快速破解。否则我会遵循@furins 提出的改进。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-17T15:41:06.740

在while循环中移动请求就可以了：）

```
print ''' This is the guessing game! 
A random number will be selected from 1 to 10.
It is your objective to guess the number!'''

import random

random_number = random.randrange(1, 10)
correct = False

while not correct:
    guess = input("What could it be? > ")  # ask as long as answer is not correct
    if guess == random_number:
        print "CONGRATS YOU GOT IT"
        correct = True
    elif guess > random_number:
        print "TO HIGH"
    elif guess < random_number:
        print "TO LOW"
    else:
        print "Try something else" 
```

# wcf - WCF SOAP 操作不正确

> ID：13917100
> 
> 赞同：0
> 
> 时间：2012-12-17T15:32:51.877
> 
> 标签：wcf, soap, soapheader

我有一个 WCF 客户端调用 Java SOAP 服务（附带 TLS 和 MA）。

SOAP 操作的结果如下：

```
<a:Action s:mustUnderstand="1">http://schemas.xmlsoap.org/ws/2005/02/trust/RST/Issue</a:Action> 
```

但我试图将其设置为

```
<a:Action s:mustUnderstand="1">urn:example:services:201005:SendMessage</a:Action> 
```

我想我可以使用以下 OperationContract 属性来做到这一点......

```
[ServiceContract(Namespace = "urn:example:ns:201005", ConfigurationName = "IExampleService")]
public interface IExampleService : IDisposable
{
    [OperationContract(Action = "urn:example:services:201005:SendMessage")]
    [FaultContract(typeof(ExampleErrorInfo), Action = "urn:example:services:201005:SendMessage", Name = "ExampleErrorInfo")]
    [XmlSerializerFormat(SupportFaults = true)]
    ExampleResponse SendMessage(ExampleRequest request);
} 
```

为什么我的 SOAP 操作仍然错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T16:17:31.520

这似乎是 WS-Trust 握手消息，而不是您的实际消息。请参阅[http://schemas.xmlsoap.org/ws/2005/02/trust/tls/WSTrustForTLS.pdf](http://schemas.xmlsoap.org/ws/2005/02/trust/tls/WSTrustForTLS.pdf)，第 1.8 节。

# java - 如何使用 Play Framework 2.0 下载文件

> ID：13917105
> 
> 赞同：19
> 
> 时间：2012-12-17T15:32:54.263
> 
> 标签：java, playframework-2.0

我正在使用 Play Framework 2.0.3 创建一个应用程序，该应用程序提供用户可以下载的 Excel 文件。

```
 response().setContentType("application/x-download");  
 response().setHeader("Content-disposition","attachment; filename=tradeLogTest.xlsx"); 
```

但是，如何从`response()`tks 获取输出流？

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2012-12-17T16:04:26.540

Play 的动作可以返回一个 File：

```
response().setContentType("application/x-download");  
response().setHeader("Content-disposition","attachment; filename=tradeLogTest.xlsx"); 
return ok(new File("/absolute/path/to/tradeLogTest.xlsx")); 
```

[这是一个用于结果的 API](http://www.playframework.org/documentation/api/2.0.4/java/play/mvc/Results.html)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2014-07-24T17:32:41.303

可以在 Play 中为静态文件提供下载选项，如下所示：

```
Ok.sendFile(new File("path to file/abc.csv"), inline=true).withHeaders(CACHE_CONTROL->"max-age=3600",CONTENT_DISPOSITION->"attachment; filename=abc.csv", CONTENT_TYPE->"application/x-download"); 
```

还有其他可用的参数

对于 Internet Explorer - 确保设置内容处置

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-12T18:20:58.007

服务文件 如果将整个内容加载到内存中以获取简单内容不是问题，那么大型数据集呢？假设我们想将一个大文件发送回 Web 客户端。

阅读更多：[http ://www.playframework.com/documentation/2.0.x/JavaStream](http://www.playframework.com/documentation/2.0.x/JavaStream)

# android - filterscript 文档在哪里（以及如何使用它）？

> ID：13917106
> 
> 赞同：14
> 
> 时间：2012-12-17T15:32:56.260
> 
> 标签：android, documentation, renderscript

一个月前 Jelly Bean 4.2 发布时，Filterscript 也发布了。它似乎是一种语言，它是具有不同文件扩展名的 Renderscript 的下标。这就是我对语言的所有了解。

我已经阅读了整个 Internet 上存在的关于 Filterscript 的两个总段落，并`.fs`使用.`pragma rs_fp_relaxed``.rs`

我的ADT是最新的公版（21.0.0），对Filterscript来说似乎太低了。 [tools.android.com](http://tools.android.com/)似乎有 21.0.1 Preview，但在发行说明中没有提到 Filterscript（实际上它只是一个错误修复版本）。任何地方都没有文档！

如何使用过滤器脚本？它的文档在哪里？

我试过的：

[https://www.google.com/search?q=filterscript+site:android.com&tbs=li:1](https://www.google.com/search?q=filterscript+site:android.com&tbs=li:1)

[http://developer.android.com/about/versions/android-4.2.html#Renderscript](http://developer.android.com/about/versions/android-4.2.html#Renderscript)

[http://developer.android.com/tools/sdk/eclipse-adt.html#notes](http://developer.android.com/tools/sdk/eclipse-adt.html#notes)

[http://tools.android.com/recent/2101preview1](http://tools.android.com/recent/2101preview1)

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-02-18T18:13:14.883

我还没有找到任何文档，但也许我可以给你一些关于我迄今为止调查的有用信息：

*   指针不可用
*   内核函数需要该属性，`__attribute__((kernel))`否则编译器会发疯并期望指针类型，这是非法的
*   [可以使用Renderscript API](http://developer.android.com/guide/topics/renderscript/reference.html)（至少到目前为止我尝试的一切都有效）
*   AndroidManifest.xml 中的属性“Min SDK version”必须设置为“17”->“Uses Sdk”

我在阅读[llvm-rs-cc 编译器的源代码](https://android.googlesource.com/platform/frameworks/compile/slang/)时发现了以下大部分信息。任何进一步的信息或 Filterscript 真实文档的链接将不胜感激！

## 产出分配

在 Filterscript 中，您没有用于输出分配的参数。相反，您返回要在当前位置写入的值（这是全局线程 id`x`和`y`）：

```
uchar4 __attribute__((kernel)) root(uint32_t x, uint32_t y) 
```

生成为：

```
public void forEach_root(Allocation aout) 
```

## 输入分配

您可以选择将输入分配作为参数移交：

```
uchar4 __attribute__((kernel)) root(const uchar4 in, uint32_t x, uint32_t y) 
```

生成为：

```
public void forEach_root(Allocation ain, Allocation aout) 
```

这仅在极少数情况下有用（例如点运算符），因为您只能在当前位置访问输入分配。

## 全局分配

如果您想在输入分配中进行随机访问，那么您将需要全局分配。这是一个使用全局分配的窗口运算符的小例子，对我有用。

**模糊.fs：**

```
#pragma version(1)
#pragma rs java_package_name(com.example.myproject)

rs_allocation in;

uint32_t width;
uint32_t height;

uchar4 __attribute__((kernel)) root(uint32_t x, uint32_t y) {
    uint4 sum = 0;
    uint count = 0;
    for (int yi = y-1; yi <= y+1; ++yi) {
        for (int xi = x-1; xi <= x+1; ++xi) {
            if (xi >= 0 && xi < width && yi >= 0 && yi < height) {
                sum += convert_uint4(rsGetElementAt_uchar4(in, xi, yi));
                ++count;
            }
        }
    }
    return convert_uchar4(sum/count);
} 
```

**MainActivity.java：**

```
...
mRS = RenderScript.create(this);

mInAllocation = Allocation.createFromBitmap(mRS, mBitmapIn,
                    Allocation.MipmapControl.MIPMAP_NONE,
                    Allocation.USAGE_SCRIPT);
mOutAllocation = Allocation.createTyped(mRS, mInAllocation.getType());

mScript = new ScriptC_blur(mRS, getResources(), R.raw.blur);
mScript.set_in(mInAllocation);
mScript.set_width(mBitmapIn.getWidth());
mScript.set_height(mBitmapIn.getHeight());

mScript.forEach_root(mOutAllocation);

mOutAllocation.copyTo(mBitmapOut);
... 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-02-19T22:04:52.690

这里有几件事：

*   是的，我们在文档方面落后了。我们知道，我们一直很忙。这是我在不久的将来的议程。

*   FS 旨在作为 RS 的限制性更强的变体，为编译器后端提供额外的优化机会。今天，我们的 CPU 后端中没有任何无法从等效的 RS 文件中获得的文件，但 OEM 可能会使用 FS 文件而不是通用 RS 文件来提高其 SoC 的性能。一般来说，它需要`__attribute__((kernel))`，没有指针，也没有联合，并且 fp_relaxed 由文件类型隐含。

*   主机端 API 完全相同；唯一的区别在于我们实际上作为内核二进制文件传递的内容。

对 ofp 的回答进行了一些小的更正：

1.  您应该使用 rsGetElementAt_(type)。它比 rsGetElementAt 干净得多，因为您不需要强制转换或额外的取消引用或类似的东西。
2.  #pragma fp_relaxed 隐含在 .fs 扩展名中，在 FS 文件中不是必需的。
3.  您不必包含 rs_allocation.rsh（所有 RS/FS 文件也隐含）。

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2013-06-13T08:47:54.670

这里是过滤器脚本的完整介绍和很多演示。[http://developer.android.com/guide/topics/renderscript/compute.html](http://developer.android.com/guide/topics/renderscript/compute.html)

# c# - 使用绑定更新多个用户控件

> ID：13917109
> 
> 赞同：0
> 
> 时间：2012-12-17T15:33:09.823
> 
> 标签：c#, wpf, mvvm, binding, user-controls

我试图搜索，但找不到答案。我有一个包含两个用户控件 A 和 B 的主窗口。它们都有单独的 ViewModel，但从同一个模型实例中获取数据。当我更改用户控件 A 中的属性时，我希望它更新用户控件 B 中的相应值。

似乎`OnPropertyChanged("MyProperty")`只有在同一个 ViewModel 中更新属性。我知道 ViewModel B 背后的数据与 ViewModel A 相同，因为我可以使用刷新按钮手动刷新数据。

是否有任何简单的方法来刷新其他用户控件中的值？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T08:29:48.580

如果您需要这种行为，模型也必须实现`INotifyPropertyChanged`接口。

```
class Model : INotifyPropertyChanged
{
    public event PropertyChangedEventHandler PropertyChanged;

    private string someText = string.Empty;
    public string SomeText
    {
        get { return this.someText; }
        set { this.someText = value; this.PropertyChanged(this, new PropertyChangedEventArgs("SomeText")); }
    }
}

class ViewModelA : INotifyPropertyChanged
{
    public event PropertyChangedEventHandler PropertyChanged;

    private Model data;
    public Model Data
    {
        get { return this.data; }
        set { this.data = value; this.PropertyChanged(this, new PropertyChangedEventArgs("Data")); }
    }
}

class ViewModelB : INotifyPropertyChanged
{
    public event PropertyChangedEventHandler PropertyChanged;

    private Model data;
    public Model Data
    {
        get { return this.data; }
        set { this.data = value; this.PropertyChanged(this, new PropertyChangedEventArgs("Data")); }
    }
} 
```

您必须将相同的模型实例传递给两个视图模型，然后像这样在控件中绑定数据。

对于使用 ViewModelA 作为 DataContext 的 TextBoxA

```
<TextBox x:Name="TextBoxA" Text="{Binding Path=Data.SomeText}" /> 
```

对于使用 ViewModelB 作为 DataContext 的 TextBoxB

```
<TextBox x:Name="TexTBoxB" Text="{Binding Path=Data.SomeText}" /> 
```

现在，当您更改其中一个文本框中的文本时，它会自动更改另一个文本框中的文本。

# java - 修改Android中包含的布局？

> ID：13917110
> 
> 赞同：1
> 
> 时间：2012-12-17T15:33:10.660
> 
> 标签：java, android, xml

我在 Android 布局文件中使用包含标记来包含我想重复几次的相对布局行。问题是，在我包含该行之后，我无法在布局中修改 textview 的文本。无论如何我可以修改作为包含一部分的文本视图的文本吗？如果可能的话，主要是我想用 xml 中指定的自定义文本插入其中的 4 行。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T17:11:16.860

您只能在运行时执行此操作。即使您在运行时执行此操作，请确保您从父视图调用 findViewById，因为 Android 不允许您在 xml 文件中的多个位置使用相同的 ID。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T15:39:18.813

您可以使用不同的 id 添加这 4 个包含并从代码中获取它们，或者按照@Anis 所说的操作并在运行时对它们进行膨胀并将您的文本放在那里。

# css - 在 css 覆盖上失败甚至完整路径 css (Primefaces)

> ID：13917112
> 
> 赞同：0
> 
> 时间：2012-12-17T15:33:15.747
> 
> 标签：css, jsf, primefaces

我正在尝试使用以下代码覆盖 PF 滑块的背景

```
 <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
   xmlns:h="http://java.sun.com/jsf/html"
   xmlns:f="http://java.sun.com/jsf/core"
   xmlns:p="http://primefaces.org/ui"
   xmlns:ui="http://java.sun.com/jsf/facelets">

<h:head>
   <link rel="shortcut icon" type="image/x-icon"
      href="#{request.contextPath}/images/favicon.ico" />
   <title></title>

</h:head>
<body>
    <f:facet name="last">
      <h:outputStylesheet library="css" name="css.css" />
   </f:facet> 
```

css.css 的相关部分

```
.usagePanels.myslider.ui-widget-content,
html body div form#formData div#sliderDIV.ui-panel div#sliderDIV_content.ui-panel-content table tbody tr td table tbody tr td div#wwwpanel.ui-panel div#wwwpanel_content.ui-panel-content table#j_idt29.ui-panelgrid tbody tr.ui-widget-content td div#j_idt31.myslider
{
background-color: black!important;
} 
```

它产生以下 html，但滑块背景不是黑色。

```
 <html xmlns="http://www.w3.org/1999/xhtml"><head><link type="text/css" rel="stylesheet" href="/DataUsageCalculator/faces/javax.faces.resource/theme.css?ln=primefaces-blitzer" />
<link type="text/css" rel="stylesheet" href="/DataUsageCalculator/faces/javax.faces.resource/css.css?ln=css" />
<link type="text/css" rel="stylesheet" href="/DataUsageCalculator/faces/javax.faces.resource/primefaces.css?ln=primefaces" />
<script type="text/javascript" src="/DataUsageCalculator/faces/javax.faces.resource/jquery/jquery.js?ln=primefaces"></script>
<script type="text/javascript" src="/DataUsageCalculator/faces/javax.faces.resource/primefaces.js?ln=primefaces"></script> 
```

当我检查滑块上应用的样式并禁用线时

.ui-widget-content { ***background: url("/DataUsageCalculator/faces/javax.faces.resource/images/ui-bg_flat_75_ffffff_40x100.png?ln=primefaces-blitzer") 重复-x 滚动 50% 50% #FFFFFF; ***

}

与萤火虫它的作品。即使我使用完整路径 css，它也无法正常工作。我究竟做错了什么？

应用样式（Firebug 输出）

```
element.style {
    width: 300px;
}
.usagePanels.myslider.ui-widget-content, html body div form#formData div#sliderDIV.ui-panel div#sliderDIV_content.ui-panel-content table tbody tr td table tbody tr td div#wwwpanel.ui-panel div#wwwpanel_content.ui-panel-content table#j_idt29.ui-panelgrid tbody tr.ui-widget-content td div#j_idt31.myslider {
    background-color: black !important;
}
.usagePanels .ui-widget-content {
    background-color: #F5FAFF !important;
}
.sliderDIV .ui-widget-content {
}
.ui-widget, .ui-widget .ui-widget {
    font-family: Arial;
    font-size: 12px !important;
}
.ui-widget .ui-widget {
    font-size: 1em;
}
.ui-slider-horizontal {
    height: 0.8em;
}
.ui-slider {
    position: relative;
    text-align: left;
}
.ui-widget, .ui-widget .ui-widget {
    font-family: Arial;
    font-size: 12px !important;
}
.ui-corner-all {
    border-radius: 6px 6px 6px 6px;
}
.ui-widget-content {
    background: url("/DataUsageCalculator/faces/javax.faces.resource/images/ui-bg_flat_75_ffffff_40x100.png?ln=primefaces-blitzer") repeat-x scroll 50% 50% #FFFFFF;
    border: 1px solid #EEEEEE;
    color: #333333;
}
.ui-widget {
    font-family: Arial,sans-serif;
    font-size: 1.1em;
}
.ui-widget-content {
    color: #333333;
}
.ui-widget, .ui-widget .ui-widget {
    font-family: Arial;
    font-size: 12px !important;
}
.ui-widget .ui-widget {
    font-size: 1em;
}
.ui-panelgrid {
    border-collapse: collapse;
}
.ui-widget, .ui-widget .ui-widget {
    font-family: Arial;
    font-size: 12px !important;
}
.ui-widget {
    font-family: Arial,sans-serif;
    font-size: 1.1em;
}
.ui-widget-content {
    color: #333333;
}
.ui-widget, .ui-widget .ui-widget {
    font-family: Arial;
    font-size: 12px !important;
}
.ui-widget .ui-widget {
    font-size: 1em;
}
.ui-widget, .ui-widget .ui-widget {
    font-family: Arial;
    font-size: 12px !important;
}
.ui-widget-content {
    color: #333333;
}
.ui-widget {
    font-family: Arial,sans-serif;
    font-size: 1.1em;
}
.ui-widget-content {
    color: #333333;
}
.ui-widget, .ui-widget .ui-widget {
    font-family: Arial;
    font-size: 12px !important;
}
.ui-widget-content {
    color: #333333;
}
.ui-widget {
    font-family: Arial,sans-serif;
    font-size: 1.1em;
}
element.style {
    text-align: center;
}
body {
    font-family: "Lucida Grande","Lucida Sans Unicode","Lucida Sans","Verdana,Arial,sans serif";
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-17T16:17:53.013

这是错误的。

```
<h:head>
    ...
<h:head>
<body>
    <f:facet name="last">
        <h:outputStylesheet library="css" name="css.css" />
    </f:facet>
    ...
</body> 
```

`<body>`不是 JSF 组件，PrimeFaces 特定应该`<f:facet name="last">`放在`<h:head>`.

你应该使用

```
<h:head>
    ...
    <f:facet name="last">
        <h:outputStylesheet library="css" name="css.css" />
    </f:facet>
<h:head>
<h:body>
    ...
</h:body> 
```

或者

```
<h:head>
    ...
<h:head>
<h:body>
    <h:outputStylesheet library="css" name="css.css" />
    ...
</h:body> 
```

in order to get it to load after PrimeFaces' one.

* * *

**Unrelated** to the concrete problem, you're not using the `library` attribute the right way. Please carefully read [What is the JSF resource library for and how should it be used?](https://stackoverflow.com/questions/11988415/what-is-the-jsf-resource-library-for-and-how-should-it-be-used) and cleanup your wrong resource library approach.

# ios - 如何从代码中设置动画样式？

> ID：13917115
> 
> 赞同：0
> 
> 时间：2012-12-17T15:33:15.923
> 
> 标签：ios, cocoa-touch, uiviewcontroller, core-animation

我正在用 setViewControllers 方法替换导航控制器内的视图。但我不喜欢过渡的样子。使用以下代码时如何设置动画样式？

```
UIViewController *newVC = [self.storyboard instantiateViewControllerWithIdentifier:@"SuccessScreen"];
    NSMutableArray *viewControllers = [NSMutableArray arrayWithArray:[[self navigationController] viewControllers]];
    [viewControllers removeLastObject];
    [viewControllers addObject:newVC];
    [[self navigationController] setViewControllers:viewControllers animated:YES]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T15:43:11.650

就像是

```
CATransition *yourAnimation=...;
[self.navigationController.view.layer addAnimation:yourAnimation forKey:nil]
[[self navigationController] setViewControllers:viewControllers animated:NO]; 
```

# cakephp - 如何在通过 GET cakephp 发送时格式化复选框的名称

> ID：13917116
> 
> 赞同：2
> 
> 时间：2012-12-17T15:33:21.060
> 
> 标签：cakephp, checkbox, get

我想知道当我尝试通过 GET 方法将其发送到我的其他页面时是否可以格式化复选框的名称。

实际上，我有多个复选框，它们会生成如下内容：

```
<div class="checkbox"><input type="checkbox" name="test[]" value="1" id="ResearchTest1" /><label for="ResearchTest1">First Test</label></div>
<div class="checkbox"><input type="checkbox" name="test[]" value="2" id="ResearchTest2" /><label for="ResearchTest2">Second Test</label></div>
<div class="checkbox"><input type="checkbox" name="test[]" value="3" id="ResearchTest3" /><label for="ResearchTest3">Third Test</label></div> 
```

当我发送表单时，我的 URL 如下所示：

```
research%3D%26test%3D%26test%5B%5D%3D1%26test%5B%5D%3D2%26test%5B%5D%3D3 
```

这是：

```
research=&test=&test[]=1&test[]=2&test[]=3 
```

我想要的是：

```
research=&test1=1&test2=2&test3=3 
```

或者

```
research=&test=1&test=2&test=3 
```

或者，更好：

```
 research=&test=1,2,3 
```

有任何想法吗 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T15:37:49.253

You can define the name of the input using the FormHelper:

```
echo $this->Form->checkbox('yourInputId', array('name' => 'yourInputName')); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T16:41:29.077

问题是我使用了多个复选框：

```
$this->Form->input('tests', array('type' => 'select', 'multiple' => 'checkbox', 'options' => $options)); 
```

所以我不能单独重命名每个复选框。

也许我不应该为此使用 cakephp，而是尝试直接在 html 中编写自己的复选框？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-17T15:40:20.397

这就是复选框的工作方式，如果需要 `test1=1&test2=2&test3=3`，您应该单独命名每个复选框。

```
echo $this->Form->checkbox('foo', array('name' => 'test1'));
echo $this->Form->checkbox('foo', array('name' => 'test2'));
echo $this->Form->checkbox('foo', array('name' => 'test3')); 
```

这将使您的处理更加困难。

你可以`research=&test=1,2,3`用 JS做`join()`。我不知道你为什么要让自己变得困难。您可以轻松地在控制器中使用 GET 获得相同的格式`implode(',', $theData)`

我建议您使用它`standards`来提交您的表单并稍后处理数据。

# android - 有没有办法在 minSdkVersion <17 的情况下使用 paddingEnd 和 paddingStart？

> ID：13917118
> 
> 赞同：5
> 
> 时间：2012-12-17T15:33:29.647
> 
> 标签：android, android-layout

我刚刚发现 API 17 中有`android:marginStart`、`android:marginEnd`和。这些边距和填充使用文本方向`android:paddingStart`。`android:paddingEnd`有没有办法使用这个定义并为 Android 2.2+ 构建应用程序？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-05-14T23:01:38.503

有办法在 Android 4.2+ 的设备上使用对从右到左语言的新支持，同时支持较低的 Android 版本。[Android Developers 上](http://android-developers.blogspot.cz/2013/03/native-rtl-support-in-android-42.html)有一篇关于它的博客文章。

# zend-framework - ZendServer CE - 更改数据库类型？

> ID：13917124
> 
> 赞同：0
> 
> 时间：2012-12-17T15:33:40.593
> 
> 标签：zend-framework, zend-server

我正在使用 Zend Server 版的试用版。从所有视频/文档中，您可以将数据库版本从 SQLITE 更改为 MySQL，但是在 Zend Server 上部署应用程序时，我得到的只是设置主机、数据库名称、用户名和密码？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T15:37:22.010

只需在您的系统上安装 mysql 并使用它。ZendServer 不关心您使用什么数据库引擎。在安装 Zend Server 时，它应该询问您是否要安装 mysql（可能您必须选择手动安装或自定义或额外的东西），您可能会错过该选项，因此重新安装可能是更简单的解决方案。

但实际上，您应该能够安装 mysql 并开始使用它。

# asp.net - 使用代码隐藏编码使 ASP.Net 命令按钮不可见或隐藏

> ID：13917125
> 
> 赞同：1
> 
> 时间：2012-12-17T15:33:46.637
> 
> 标签：asp.net, vb.net, button, gridview, code-behind

我们在带有 GridView 的 ASP.Net Web 表单上有一个命令按钮，用户将 GridView 中显示的数据作为电子邮件发送。

在这个 GridView 上有一个“选择”命令按钮，我们希望在用户单击图像按钮时从 GridView 中临时删除它，并在发送电子邮件后再次显示该按钮。

我们想要删除该按钮，因为它显示在我们不希望包含在电子邮件中的电子邮件中。

你能告诉我如何在没有按钮的情况下刷新 GridView 的代码隐藏文件中使用编码吗？

这是一些显示按钮的标记：

```
 <asp:TemplateField ShowHeader="False">
                    <ItemTemplate>
                        <asp:Button 
                            ID="ButtonSelect" 
                            runat="server" 
                            CausesValidation="False" 
                            CommandName="Select" 
                            Text="Select Schedule Item Details" />
                    </ItemTemplate> 
```

这是我们使用的用于发送 GridView 电子邮件的编码：

```
Protected Sub ImageButtonEmailThisList_Click(sender As Object, e As ImageClickEventArgs)

    ' Get the rendered HTML.
    '-----------------------
    Dim SB As New StringBuilder()
    Dim SW As New StringWriter(SB)
    Dim htmlTW As New HtmlTextWriter(SW)

    ' Remove the select button for a short while.
    '--------------------------------------------

    GridViewSummary.RenderControl(htmlTW)

    ' Get the HTML into a string.
    ' This will be used in the body of the email report.
    '---------------------------------------------------
    Dim dataGridHTML As String = SB.ToString()
    Dim SmtpServer As New SmtpClient()

    ObjMailMessage = New MailMessage()

    Try
        With ObjMailMessage
            .To.Add(New MailAddress(TextBoxEmailRecipient.Text))
            .Subject = "Knowledge Academy Teacher's Schdule"
            .Body = dataGridHTML
            .IsBodyHtml = True
            .DeliveryNotificationOptions = DeliveryNotificationOptions.OnFailure
        End With

        SmtpServer.Send(ObjMailMessage)

        LabelEmailMessage.Text = "<i>Email sent to " & TextBoxEmailRecipient.Text & "!</i>"

        ImageButtonEmailThisList.Visible = True

    Catch ex As Exception
        MsgBox(ex.ToString())

    Finally

        ' Refresh the GridView with select button back in place.
        '-------------------------------------------------------

    End Try

End Sub 
```

注释部分显示了我们想要添加代码以再次隐藏和显示按钮的位置。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-17T15:36:14.550

也许您可以隐藏该列：

```
GridViewSummary.Columns(11).Visible = False 
```

进而 ：

```
GridViewSummary.Columns(11).Visible = True 
```

# xcode - 在没有 Xcode 的情况下创建存档

> ID：13917127
> 
> 赞同：3
> 
> 时间：2012-12-17T15:33:54.110
> 
> 标签：xcode, xcodebuild

我正在通过 ssh 从控制台构建一个 Xcode 项目（我只能使用 xcodebuild 命令），但项目中没有方案（用户忘记共享方案）。xcodebuild 仅在构建方案（-scheme）时才允许传递“归档”参数，但这不是我的选择。

所以问题是：是否可以仅使用目标创建存档？

我调查了 .xcarchive 目录，它包含 Info.plist 文件（包含有关应用程序的信息）、dSYMs 目录（包含 myapp.dSYM）和 Products/Applications（包含 myapp.app）目录。我还注意到 .xcarchive 的 .app 中的二进制文件大小比 Release 目录中的 .app 小 2 倍。我想这是因为代码标牌。

我可以简单地将文件从 Release 目录（.app 和 .dSYM）复制到 .xcarchive 并在那里创建 Info.plist 以创建存档吗？还是我必须采取任何其他步骤？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T15:37:02.510

是的，档案只是您可以自己制作的文件夹。查看任何存档并尝试复制文件夹结构。（根据需要更改应用名称）

# java - Spring 3如何从属性文件中运行具有间隔的计划任务

> ID：13917137
> 
> 赞同：3
> 
> 时间：2012-12-17T15:34:23.663
> 
> 标签：java, spring

我正在使用 Spring 3 创建计划任务。

我必须使用基于 XML 的接线来配置它，并且希望计划任务以属性文件中设置的间隔运行。

弹簧上下文文件：

```
<beans xmlns="http://www.springframework.org/schema/beans" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
   xsi:schemaLocation="http://www.springframework.org/schema/beans
                       http://www.springframework.org/schema/beans/spring-beans-3.1.xsd
                       http://www.springframework.org/schema/context
                       http://www.springframework.org/schema/context/spring-context-3.1.xsd
                       http://www.springframework.org/schema/task
                       http://www.springframework.org/schema/task/spring-task-3.1.xsd"
   xmlns:context="http://www.springframework.org/schema/context"
   xmlns:task="http://www.springframework.org/schema/task">

  <context:property-placeholder location="classpath:connector.properties"/>

  <task:scheduler id="connectorScheduler" pool-size="10"/>

  <task:scheduled-tasks scheduler="connectorScheduler">
    <task:scheduled ref="connector" method="checkConnection" fixed-rate="${connector.connectionAttemptDelayMillis}"/>
  </task:scheduled-tasks>

  <bean id="connector" class="com.test.Connector" scope="singleton">
    <constructor-arg index="0" value="${connector.user}"/>
    <constructor-arg index="1" value="${connector.password}"/>
    <constructor-arg index="2" value="${connector.connectionAttemptDelayMillis}"/>
  </bean>

</beans> 
```

问题是固定速率值中不允许使用 ${connector.connectionAttemptDelayMillis}。如果我要在其位置放置一个数字，这将正常工作，但我需要这个值来自加载的属性文件。

任何帮助深表感谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-17T15:59:37.693

您可以这样做（缺点，您只能每 1 秒或更长时间执行一次任务）：

## 连接器类

```
package com.test.Connector;

@Component
public class Connector {
    @Value("${connector.user}")
    private String user;

    @Value("${connector.password}")
    private String password;

    @Value("${connector.connectionAttemptDelayMillis:0}")
    private long attemptDelayMillis;

    @Scheduled(cron = "${connector.connectionAttemptCron}")
    public checkConnection() {
        // do the check
    }
} 
```

## XML 上下文

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:context="http://www.springframework.org/schema/context" xmlns:task="http://www.springframework.org/schema/task"
    xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd
        http://www.springframework.org/schema/aop http://www.springframework.org/schema/aop/spring-aop.xsd
        http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context.xsd
        http://www.springframework.org/schema/task http://www.springframework.org/schema/task/spring-task.xsd">

    <context:annotation-config />
    <context:component-scan base-package="com.test" />

    <context:property-placeholder location="classpath:connector.properties" />

    <task:scheduler id="connectorScheduler" pool-size="10"/>
    <task:annotation-driven scheduler="connectorScheduler" />
</beans> 
```

## 特性

```
connector.user = someuser
connector.password = somepassword
connector.connectionAttemptDelayMillis = 5000
connector.connectionAttemptCron = */5 * * * * * 
```

这是有效的，因为`cron`需要一个字符串。

## 参考

*   [http://static.springsource.org/spring/docs/3.0.x/reference/scheduling.html](http://static.springsource.org/spring/docs/3.0.x/reference/scheduling.html)
*   [http://static.springsource.org/spring/docs/3.0.x/javadoc-api/org/springframework/scheduling/annotation/Scheduled.html#cron()](http://static.springsource.org/spring/docs/3.0.x/javadoc-api/org/springframework/scheduling/annotation/Scheduled.html#cron())

# javascript - 在画布中迭代像素并将其中一些复制到另一个画布中的最快方法

> ID：13917139
> 
> 赞同：6
> 
> 时间：2012-12-17T15:34:40.080
> 
> 标签：javascript, html, canvas, putimagedata

我正在从事 2D/3D 图形项目，但遇到了性能问题。

我的算法需要两张图像：一张图片和相对灰度深度图。我还有一组 10 个画布（“图层”）最初是空白的。注意：所有图像具有相同的尺寸。

我需要检查深度图的每个像素 X;Y，并根据其颜色值访问 10 个画布之一并在其上绘制原始图像的 X;Y 像素。

结果算法类似于：

```
for (var y = 0; y < totalHeight; ++y) {
   for (var x = 0; x < totalWidth; ++x) {
     var index = (y * totalWidth + x) * 4; // index of the current pixel
     // parse depth level using luminosity method
     var depthLevel = Math.round(
         0.21 * depthData[index] + 
         0.71 * depthData[index + 1] + 
         0.07 * depthData[index + 2]
     );

     // get the proper layer to modify
     var layerIndex = Math.floor((layersCount / 256) * depthLevel);
     var layerContext = layers[layerIndex].getContext("2d");
     var layerData = layerContext.getImageData(0, 0, totalWidth, totalHeight);

     layerData.data[index] = originalData[index];
     layerData.data[index + 1] = originalData[index + 1];
     layerData.data[index + 2] = originalData[index + 2];
     layerData.data[index + 3] = originalData[index + 3];

     layerContext.putImageData(layerData, 0, 0);
} 
```

在 200x200 的图像上完成这样的循环大约需要 3 分钟！我很确定缓慢是由最后一个函数 putImageData 引起的。有没有更快的方法以我需要的方式绘制像素？谢谢

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-12-17T15:44:21.233

不要在循环的每次迭代中设置图像数据。这是一项繁重的操作，而且您正在执行它`40.000` ^(`(200*200)`)多次。
这应该可以为您节省一些处理能力：

```
var contexts = [];
var data = [];
// Save your contexts and data to 2 arrays.
for (var i = 0; i < layers.length; i++) {
    contexts[i] = layers[i].getContext("2d");
    data[i] = contexts[i].getImageData(0, 0, totalWidth, totalHeight);
}

for (var y = 0; y < totalHeight; ++y) {
    for (var x = 0; x < totalWidth; ++x) {
        var index = (y * totalWidth + x) * 4; // index of the current pixel
        // parse depth level using luminosity method
        var depthLevel = Math.round(
            0.21 * depthData[index]
          + 0.71 * depthData[index + 1]
          + 0.07 * depthData[index + 2]);

        // get the proper layer to modify
        var layerIndex = Math.floor((layersCount / 256) * depthLevel);

        data[layerIndex].data[index] = originalData[index];
        data[layerIndex].data[index + 1] = originalData[index + 1];
        data[layerIndex].data[index + 2] = originalData[index + 2];
        data[layerIndex].data[index + 3] = originalData[index + 3];
    }
}

// Apply your new data to the contexts.
for (var i = 0; i < layers.length; i++) { 
    contexts[i].putImageData(data[i]);
} 
```

我还没有测试过，但这应该让你对如何做有一些了解。

# svn - svn 将主干合并到一个我丢失了日志的分支中

> ID：13917140
> 
> 赞同：0
> 
> 时间：2012-12-17T15:34:40.940
> 
> 标签：svn

是否可以将主干合并到一个没有任何日志的分支中，实际上主干没有任何日志记录，因为一些傻瓜在删除后丢失了所有日志，然后重新创建了主干和分支？这样做的正确和安全方法是什么？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T15:40:19.220

好吧，您可以`--ignore-ancestry`在这里与一些好信息合并：[高级合并](http://svnbook.red-bean.com/en/1.6/svn.branchmerge.advanced.html#svn.branchmerge.advanced.ancestry)。

# javascript - Javascript：将 en-US 和类似的语言环境代码转换为人类可读的字符串

> ID：13917150
> 
> 赞同：5
> 
> 时间：2012-12-17T15:35:03.703
> 
> 标签：javascript, google-chrome, google-chrome-extension, locale

我的 chrome 扩展程序会定期检查[data.crossref.org/locales](http://data.crossref.org/locales)以获取其服务支持的语言环境。该链接返回格式为 ["sk-SK","uk-UA","de-AT","el-GR",...] 的文本文件。我想使用 javascript 将语言环境代码转换为人类可读的语言环境。我会同意他们用英语或他们的母语呈现。是否有可以帮助我完成此任务的函数或库？

注意：如果有帮助，可以使用 jQuery。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-17T16:25:10.767

我已将[*ISO 639*](http://www.loc.gov/standards/iso639-2/php/English_list.php)和[*ISO 3166*](http://www.iso.org/iso/country_codes/iso_3166_code_lists/country_names_and_code_elements.htm)代码转换为*JSON*样式的对象，并使用它们生成以下函数，该函数将表单的语言环境代码转换`lang-COUNTRY`为人类可读的英语。

```
function localeCodeToEnglish(loc) {
    if (typeof loc !== 'string') throw new TypeError('Input must be string');
    var parts = loc.split('-'),
        ISO639_1 = {"ab":"Abkhazian","aa":"Afar","af":"Afrikaans","ak":"Akan","sq":"Albanian","am":"Amharic","ar":"Arabic","an":"Aragonese","hy":"Armenian","as":"Assamese","av":"Avaric","ae":"Avestan","ay":"Aymara","az":"Azerbaijani","bm":"Bambara","ba":"Bashkir","eu":"Basque","be":"Belarusian","bn":"Bengali","bh":"Bihari languages","bi":"Bislama","nb":"Norwegian Bokmål","bs":"Bosnian","br":"Breton","bg":"Bulgarian","my":"Burmese","es":"Spanish","ca":"Valencian","km":"Central Khmer","ch":"Chamorro","ce":"Chechen","ny":"Nyanja","zh":"Chinese","za":"Zhuang","cu":"Old Slavonic","cv":"Chuvash","kw":"Cornish","co":"Corsican","cr":"Cree","hr":"Croatian","cs":"Czech","da":"Danish","dv":"Maldivian","nl":"Flemish","dz":"Dzongkha","en":"English","eo":"Esperanto","et":"Estonian","ee":"Ewe","fo":"Faroese","fj":"Fijian","fi":"Finnish","fr":"French","ff":"Fulah","gd":"Scottish Gaelic","gl":"Galician","lg":"Ganda","ka":"Georgian","de":"German","ki":"Kikuyu","el":"Greek, Modern (1453-)","kl":"Kalaallisut","gn":"Guarani","gu":"Gujarati","ht":"Haitian Creole","ha":"Hausa","he":"Hebrew","hz":"Herero","hi":"Hindi","ho":"Hiri Motu","hu":"Hungarian","is":"Icelandic","io":"Ido","ig":"Igbo","id":"Indonesian","ia":"Interlingua (International Auxiliary Language Association)","ie":"Occidental","iu":"Inuktitut","ik":"Inupiaq","ga":"Irish","it":"Italian","ja":"Japanese","jv":"Javanese","kn":"Kannada","kr":"Kanuri","ks":"Kashmiri","kk":"Kazakh","rw":"Kinyarwanda","ky":"Kyrgyz","kv":"Komi","kg":"Kongo","ko":"Korean","kj":"Kwanyama","ku":"Kurdish","lo":"Lao","la":"Latin","lv":"Latvian","lb":"Luxembourgish","li":"Limburgish","ln":"Lingala","lt":"Lithuanian","lu":"Luba-Katanga","mk":"Macedonian","mg":"Malagasy","ms":"Malay","ml":"Malayalam","mt":"Maltese","gv":"Manx","mi":"Maori","mr":"Marathi","mh":"Marshallese","ro":"Romanian","mn":"Mongolian","na":"Nauru","nv":"Navajo","nd":"North Ndebele","nr":"South Ndebele","ng":"Ndonga","ne":"Nepali","se":"Northern Sami","no":"Norwegian","nn":"Nynorsk, Norwegian","ii":"Sichuan Yi","oc":"Occitan (post 1500)","oj":"Ojibwa","or":"Oriya","om":"Oromo","os":"Ossetic","pi":"Pali","pa":"Punjabi","ps":"Pushto","fa":"Persian","pl":"Polish","pt":"Portuguese","qu":"Quechua","rm":"Romansh","rn":"Rundi","ru":"Russian","sm":"Samoan","sg":"Sango","sa":"Sanskrit","sc":"Sardinian","sr":"Serbian","sn":"Shona","sd":"Sindhi","si":"Sinhalese","sk":"Slovak","sl":"Slovenian","so":"Somali","st":"Sotho, Southern","su":"Sundanese","sw":"Swahili","ss":"Swati","sv":"Swedish","tl":"Tagalog","ty":"Tahitian","tg":"Tajik","ta":"Tamil","tt":"Tatar","te":"Telugu","th":"Thai","bo":"Tibetan","ti":"Tigrinya","to":"Tonga (Tonga Islands)","ts":"Tsonga","tn":"Tswana","tr":"Turkish","tk":"Turkmen","tw":"Twi","ug":"Uyghur","uk":"Ukrainian","ur":"Urdu","uz":"Uzbek","ve":"Venda","vi":"Vietnamese","vo":"Volapük","wa":"Walloon","cy":"Welsh","fy":"Western Frisian","wo":"Wolof","xh":"Xhosa","yi":"Yiddish","yo":"Yoruba","zu":"Zulu"},
        ISO639_2 = {"abk":"Abkhazian","ace":"Achinese","ach":"Acoli","ada":"Adangme","ady":"Adyghe","aar":"Afar","afh":"Afrihili","afr":"Afrikaans","afa":"Afro-Asiatic languages","ain":"Ainu","aka":"Akan","akk":"Akkadian","alb":"Albanian","sqi":"Albanian","gsw":"Swiss German","ale":"Aleut","alg":"Algonquian languages","tut":"Altaic languages","amh":"Amharic","anp":"Angika","apa":"Apache languages","ara":"Arabic","arg":"Aragonese","arp":"Arapaho","arw":"Arawak","arm":"Armenian","hye":"Armenian","rup":"Macedo-Romanian","art":"Artificial languages","asm":"Assamese","ast":"Leonese","ath":"Athapascan languages","aus":"Australian languages","map":"Austronesian languages","ava":"Avaric","ave":"Avestan","awa":"Awadhi","aym":"Aymara","aze":"Azerbaijani","ban":"Balinese","bat":"Baltic languages","bal":"Baluchi","bam":"Bambara","bai":"Bamileke languages","bad":"Banda languages","bnt":"Bantu languages","bas":"Basa","bak":"Bashkir","baq":"Basque","eus":"Basque","btk":"Batak languages","bej":"Beja","bel":"Belarusian","bem":"Bemba","ben":"Bengali","ber":"Berber languages","bho":"Bhojpuri","bih":"Bihari languages","bik":"Bikol","byn":"Blin","bin":"Edo","bis":"Bislama","zbl":"Blissymbols","nob":"Norwegian Bokmål","bos":"Bosnian","bra":"Braj","bre":"Breton","bug":"Buginese","bul":"Bulgarian","bua":"Buriat","bur":"Burmese","mya":"Burmese","cad":"Caddo","spa":"Spanish","cat":"Valencian","cau":"Caucasian languages","ceb":"Cebuano","cel":"Celtic languages","cai":"Central American Indian languages","khm":"Central Khmer","chg":"Chagatai","cmc":"Chamic languages","cha":"Chamorro","che":"Chechen","chr":"Cherokee","nya":"Nyanja","chy":"Cheyenne","chb":"Chibcha","chi":"Chinese","zho":"Chinese","chn":"Chinook jargon","chp":"Dene Suline","cho":"Choctaw","zha":"Zhuang","chu":"Old Slavonic","chk":"Chuukese","chv":"Chuvash","nwc":"Old Newari","syc":"Classical Syriac","rar":"Rarotongan","cop":"Coptic","cor":"Cornish","cos":"Corsican","cre":"Cree","mus":"Creek","crp":"Creoles and pidgins","cpe":"Creoles and pidgins, English based","cpf":"Creoles and pidgins, French-based","cpp":"Creoles and pidgins, Portuguese-based","crh":"Crimean Turkish","hrv":"Croatian","cus":"Cushitic languages","cze":"Czech","ces":"Czech","dak":"Dakota","dan":"Danish","dar":"Dargwa","del":"Delaware","div":"Maldivian","zza":"Zazaki","din":"Dinka","doi":"Dogri","dgr":"Dogrib","dra":"Dravidian languages","dua":"Duala","dut":"Flemish","nld":"Flemish","dum":"Dutch, Middle (ca.1050-1350)","dyu":"Dyula","dzo":"Dzongkha","frs":"Eastern Frisian","efi":"Efik","egy":"Egyptian (Ancient)","eka":"Ekajuk","elx":"Elamite","eng":"English","enm":"English, Middle (1100-1500)","ang":"English, Old (ca.450-1100)","myv":"Erzya","epo":"Esperanto","est":"Estonian","ewe":"Ewe","ewo":"Ewondo","fan":"Fang","fat":"Fanti","fao":"Faroese","fij":"Fijian","fil":"Pilipino","fin":"Finnish","fiu":"Finno-Ugrian languages","fon":"Fon","fre":"French","fra":"French","frm":"French, Middle (ca.1400-1600)","fro":"French, Old (842-ca.1400)","fur":"Friulian","ful":"Fulah","gaa":"Ga","gla":"Scottish Gaelic","car":"Galibi Carib","glg":"Galician","lug":"Ganda","gay":"Gayo","gba":"Gbaya","gez":"Geez","geo":"Georgian","kat":"Georgian","ger":"German","deu":"German","nds":"Saxon, Low","gmh":"German, Middle High (ca.1050-1500)","goh":"German, Old High (ca.750-1050)","gem":"Germanic languages","kik":"Kikuyu","gil":"Gilbertese","gon":"Gondi","gor":"Gorontalo","got":"Gothic","grb":"Grebo","grc":"Greek, Ancient (to 1453)","gre":"Greek, Modern (1453-)","ell":"Greek, Modern (1453-)","kal":"Kalaallisut","grn":"Guarani","guj":"Gujarati","gwi":"Gwich'in","hai":"Haida","hat":"Haitian Creole","hau":"Hausa","haw":"Hawaiian","heb":"Hebrew","her":"Herero","hil":"Hiligaynon","him":"Western Pahari languages","hin":"Hindi","hmo":"Hiri Motu","hit":"Hittite","hmn":"Mong","hun":"Hungarian","hup":"Hupa","iba":"Iban","ice":"Icelandic","isl":"Icelandic","ido":"Ido","ibo":"Igbo","ijo":"Ijo languages","ilo":"Iloko","arc":"Official Aramaic (700-300 BCE)","smn":"Inari Sami","inc":"Indic languages","ine":"Indo-European languages","ind":"Indonesian","inh":"Ingush","ina":"Interlingua (International Auxiliary Language Association)","ile":"Occidental","iku":"Inuktitut","ipk":"Inupiaq","ira":"Iranian languages","gle":"Irish","mga":"Irish, Middle (900-1200)","sga":"Irish, Old (to 900)","iro":"Iroquoian languages","ita":"Italian","jpn":"Japanese","jav":"Javanese","kac":"Kachin","jrb":"Judeo-Arabic","jpr":"Judeo-Persian","kbd":"Kabardian","kab":"Kabyle","xal":"Oirat","kam":"Kamba","kan":"Kannada","kau":"Kanuri","pam":"Pampanga","kaa":"Kara-Kalpak","krc":"Karachay-Balkar","krl":"Karelian","kar":"Karen languages","kas":"Kashmiri","csb":"Kashubian","kaw":"Kawi","kaz":"Kazakh","kha":"Khasi","khi":"Khoisan languages","kho":"Sakan","kmb":"Kimbundu","kin":"Kinyarwanda","kir":"Kyrgyz","tlh":"tlhIngan-Hol","kom":"Komi","kon":"Kongo","kok":"Konkani","kor":"Korean","kos":"Kosraean","kpe":"Kpelle","kro":"Kru languages","kua":"Kwanyama","kum":"Kumyk","kur":"Kurdish","kru":"Kurukh","kut":"Kutenai","lad":"Ladino","lah":"Lahnda","lam":"Lamba","day":"Land Dayak languages","lao":"Lao","lat":"Latin","lav":"Latvian","ltz":"Luxembourgish","lez":"Lezghian","lim":"Limburgish","lin":"Lingala","lit":"Lithuanian","jbo":"Lojban","dsb":"Lower Sorbian","loz":"Lozi","lub":"Luba-Katanga","lua":"Luba-Lulua","lui":"Luiseno","smj":"Lule Sami","lun":"Lunda","luo":"Luo (Kenya and Tanzania)","lus":"Lushai","mac":"Macedonian","mkd":"Macedonian","mad":"Madurese","mag":"Magahi","mai":"Maithili","mak":"Makasar","mlg":"Malagasy","may":"Malay","msa":"Malay","mal":"Malayalam","mlt":"Maltese","mnc":"Manchu","mdr":"Mandar","man":"Mandingo","mni":"Manipuri","mno":"Manobo languages","glv":"Manx","mao":"Maori","mri":"Maori","arn":"Mapudungun","mar":"Marathi","chm":"Mari","mah":"Marshallese","mwr":"Marwari","mas":"Masai","myn":"Mayan languages","men":"Mende","mic":"Micmac","min":"Minangkabau","mwl":"Mirandese","moh":"Mohawk","mdf":"Moksha","rum":"Romanian","ron":"Romanian","mkh":"Mon-Khmer languages","lol":"Mongo","mon":"Mongolian","mos":"Mossi","mul":"Multiple languages","mun":"Munda languages","nqo":"N'Ko","nah":"Nahuatl languages","nau":"Nauru","nav":"Navajo","nde":"North Ndebele","nbl":"South Ndebele","ndo":"Ndonga","nap":"Neapolitan","new":"Newari","nep":"Nepali","nia":"Nias","nic":"Niger-Kordofanian languages","ssa":"Nilo-Saharan languages","niu":"Niuean","zxx":"Not applicable","nog":"Nogai","non":"Norse, Old","nai":"North American Indian languages","frr":"Northern Frisian","sme":"Northern Sami","nso":"Sotho, Northern","nor":"Norwegian","nno":"Nynorsk, Norwegian","nub":"Nubian languages","iii":"Sichuan Yi","nym":"Nyamwezi","nyn":"Nyankole","nyo":"Nyoro","nzi":"Nzima","oci":"Occitan (post 1500)","pro":"Provençal, Old (to 1500)","oji":"Ojibwa","ori":"Oriya","orm":"Oromo","osa":"Osage","oss":"Ossetic","oto":"Otomian languages","pal":"Pahlavi","pau":"Palauan","pli":"Pali","pag":"Pangasinan","pan":"Punjabi","pap":"Papiamento","paa":"Papuan languages","pus":"Pushto","per":"Persian","fas":"Persian","peo":"Persian, Old (ca.600-400 B.C.)","phi":"Philippine languages","phn":"Phoenician","pon":"Pohnpeian","pol":"Polish","por":"Portuguese","pra":"Prakrit languages","que":"Quechua","raj":"Rajasthani","rap":"Rapanui","qaa-qtz":"Reserved for local use","roa":"Romance languages","roh":"Romansh","rom":"Romany","run":"Rundi","rus":"Russian","sal":"Salishan languages","sam":"Samaritan Aramaic","smi":"Sami languages","smo":"Samoan","sad":"Sandawe","sag":"Sango","san":"Sanskrit","sat":"Santali","srd":"Sardinian","sas":"Sasak","sco":"Scots","sel":"Selkup","sem":"Semitic languages","srp":"Serbian","srr":"Serer","shn":"Shan","sna":"Shona","scn":"Sicilian","sid":"Sidamo","sgn":"Sign Languages","bla":"Siksika","snd":"Sindhi","sin":"Sinhalese","sit":"Sino-Tibetan languages","sio":"Siouan languages","sms":"Skolt Sami","den":"Slave (Athapascan)","sla":"Slavic languages","slo":"Slovak","slk":"Slovak","slv":"Slovenian","sog":"Sogdian","som":"Somali","son":"Songhai languages","snk":"Soninke","wen":"Sorbian languages","sot":"Sotho, Southern","sai":"South American Indian languages","alt":"Southern Altai","sma":"Southern Sami","srn":"Sranan Tongo","suk":"Sukuma","sux":"Sumerian","sun":"Sundanese","sus":"Susu","swa":"Swahili","ssw":"Swati","swe":"Swedish","syr":"Syriac","tgl":"Tagalog","tah":"Tahitian","tai":"Tai languages","tgk":"Tajik","tmh":"Tamashek","tam":"Tamil","tat":"Tatar","tel":"Telugu","ter":"Tereno","tet":"Tetum","tha":"Thai","tib":"Tibetan","bod":"Tibetan","tig":"Tigre","tir":"Tigrinya","tem":"Timne","tiv":"Tiv","tli":"Tlingit","tpi":"Tok Pisin","tkl":"Tokelau","tog":"Tonga (Nyasa)","ton":"Tonga (Tonga Islands)","tsi":"Tsimshian","tso":"Tsonga","tsn":"Tswana","tum":"Tumbuka","tup":"Tupi languages","tur":"Turkish","ota":"Turkish, Ottoman (1500-1928)","tuk":"Turkmen","tvl":"Tuvalu","tyv":"Tuvinian","twi":"Twi","udm":"Udmurt","uga":"Ugaritic","uig":"Uyghur","ukr":"Ukrainian","umb":"Umbundu","mis":"Uncoded languages","und":"Undetermined","hsb":"Upper Sorbian","urd":"Urdu","uzb":"Uzbek","vai":"Vai","ven":"Venda","vie":"Vietnamese","vol":"Volapük","vot":"Votic","wak":"Wakashan languages","wln":"Walloon","war":"Waray","was":"Washo","wel":"Welsh","cym":"Welsh","fry":"Western Frisian","wal":"Wolaytta","wol":"Wolof","xho":"Xhosa","sah":"Yakut","yao":"Yao","yap":"Yapese","yid":"Yiddish","yor":"Yoruba","ypk":"Yupik languages","znd":"Zande languages","zap":"Zapotec","zen":"Zenaga","zul":"Zulu","zun":"Zuni"},
        ISO3166_1 = {"AF":"AFGHANISTAN","AX":"ÅLAND ISLANDS","AL":"ALBANIA","DZ":"ALGERIA","AS":"AMERICAN SAMOA","AD":"ANDORRA","AO":"ANGOLA","AI":"ANGUILLA","AQ":"ANTARCTICA","AG":"ANTIGUA AND BARBUDA","AR":"ARGENTINA","AM":"ARMENIA","AW":"ARUBA","AU":"AUSTRALIA","AT":"AUSTRIA","AZ":"AZERBAIJAN","BS":"BAHAMAS","BH":"BAHRAIN","BD":"BANGLADESH","BB":"BARBADOS","BY":"BELARUS","BE":"BELGIUM","BZ":"BELIZE","BJ":"BENIN","BM":"BERMUDA","BT":"BHUTAN","BO":"BOLIVIA, PLURINATIONAL STATE OF","BQ":"BONAIRE, SINT EUSTATIUS AND SABA","BA":"BOSNIA AND HERZEGOVINA","BW":"BOTSWANA","BV":"BOUVET ISLAND","BR":"BRAZIL","IO":"BRITISH INDIAN OCEAN TERRITORY","BN":"BRUNEI DARUSSALAM","BG":"BULGARIA","BF":"BURKINA FASO","BI":"BURUNDI","KH":"CAMBODIA","CM":"CAMEROON","CA":"CANADA","CV":"CAPE VERDE","KY":"CAYMAN ISLANDS","CF":"CENTRAL AFRICAN REPUBLIC","TD":"CHAD","CL":"CHILE","CN":"CHINA","CX":"CHRISTMAS ISLAND","CC":"COCOS (KEELING) ISLANDS","CO":"COLOMBIA","KM":"COMOROS","CG":"CONGO","CD":"CONGO, THE DEMOCRATIC REPUBLIC OF THE","CK":"COOK ISLANDS","CR":"COSTA RICA","CI":"CÔTE D'IVOIRE","HR":"CROATIA","CU":"CUBA","CW":"CURAÇAO","CY":"CYPRUS","CZ":"CZECH REPUBLIC","DK":"DENMARK","DJ":"DJIBOUTI","DM":"DOMINICA","DO":"DOMINICAN REPUBLIC","EC":"ECUADOR","EG":"EGYPT","SV":"EL SALVADOR","GQ":"EQUATORIAL GUINEA","ER":"ERITREA","EE":"ESTONIA","ET":"ETHIOPIA","FK":"FALKLAND ISLANDS (MALVINAS)","FO":"FAROE ISLANDS","FJ":"FIJI","FI":"FINLAND","FR":"FRANCE","GF":"FRENCH GUIANA","PF":"FRENCH POLYNESIA","TF":"FRENCH SOUTHERN TERRITORIES","GA":"GABON","GM":"GAMBIA","GE":"GEORGIA","DE":"GERMANY","GH":"GHANA","GI":"GIBRALTAR","GR":"GREECE","GL":"GREENLAND","GD":"GRENADA","GP":"GUADELOUPE","GU":"GUAM","GT":"GUATEMALA","GG":"GUERNSEY","GN":"GUINEA","GW":"GUINEA-BISSAU","GY":"GUYANA","HT":"HAITI","HM":"HEARD ISLAND AND MCDONALD ISLANDS","VA":"HOLY SEE (VATICAN CITY STATE)","HN":"HONDURAS","HK":"HONG KONG","HU":"HUNGARY","IS":"ICELAND","IN":"INDIA","ID":"INDONESIA","IR":"IRAN, ISLAMIC REPUBLIC OF","IQ":"IRAQ","IE":"IRELAND","IM":"ISLE OF MAN","IL":"ISRAEL","IT":"ITALY","JM":"JAMAICA","JP":"JAPAN","JE":"JERSEY","JO":"JORDAN","KZ":"KAZAKHSTAN","KE":"KENYA","KI":"KIRIBATI","KP":"KOREA, DEMOCRATIC PEOPLE'S REPUBLIC OF","KR":"KOREA, REPUBLIC OF","KW":"KUWAIT","KG":"KYRGYZSTAN","LA":"LAO PEOPLE'S DEMOCRATIC REPUBLIC","LV":"LATVIA","LB":"LEBANON","LS":"LESOTHO","LR":"LIBERIA","LY":"LIBYA","LI":"LIECHTENSTEIN","LT":"LITHUANIA","LU":"LUXEMBOURG","MO":"MACAO","MK":"MACEDONIA, THE FORMER YUGOSLAV REPUBLIC OF","MG":"MADAGASCAR","MW":"MALAWI","MY":"MALAYSIA","MV":"MALDIVES","ML":"MALI","MT":"MALTA","MH":"MARSHALL ISLANDS","MQ":"MARTINIQUE","MR":"MAURITANIA","MU":"MAURITIUS","YT":"MAYOTTE","MX":"MEXICO","FM":"MICRONESIA, FEDERATED STATES OF","MD":"MOLDOVA, REPUBLIC OF","MC":"MONACO","MN":"MONGOLIA","ME":"MONTENEGRO","MS":"MONTSERRAT","MA":"MOROCCO","MZ":"MOZAMBIQUE","MM":"MYANMAR","NA":"NAMIBIA","NR":"NAURU","NP":"NEPAL","NL":"NETHERLANDS","NC":"NEW CALEDONIA","NZ":"NEW ZEALAND","NI":"NICARAGUA","NE":"NIGER","NG":"NIGERIA","NU":"NIUE","NF":"NORFOLK ISLAND","MP":"NORTHERN MARIANA ISLANDS","NO":"NORWAY","OM":"OMAN","PK":"PAKISTAN","PW":"PALAU","PS":"PALESTINIAN TERRITORY, OCCUPIED","PA":"PANAMA","PG":"PAPUA NEW GUINEA","PY":"PARAGUAY","PE":"PERU","PH":"PHILIPPINES","PN":"PITCAIRN","PL":"POLAND","PT":"PORTUGAL","PR":"PUERTO RICO","QA":"QATAR","RE":"RÉUNION","RO":"ROMANIA","RU":"RUSSIAN FEDERATION","RW":"RWANDA","BL":"SAINT BARTHÉLEMY","SH":"SAINT HELENA, ASCENSION AND TRISTAN DA CUNHA","KN":"SAINT KITTS AND NEVIS","LC":"SAINT LUCIA","MF":"SAINT MARTIN (FRENCH PART)","PM":"SAINT PIERRE AND MIQUELON","VC":"SAINT VINCENT AND THE GRENADINES","WS":"SAMOA","SM":"SAN MARINO","ST":"SAO TOME AND PRINCIPE","SA":"SAUDI ARABIA","SN":"SENEGAL","RS":"SERBIA","SC":"SEYCHELLES","SL":"SIERRA LEONE","SG":"SINGAPORE","SX":"SINT MAARTEN (DUTCH PART)","SK":"SLOVAKIA","SI":"SLOVENIA","SB":"SOLOMON ISLANDS","SO":"SOMALIA","ZA":"SOUTH AFRICA","GS":"SOUTH GEORGIA AND THE SOUTH SANDWICH ISLANDS","SS":"SOUTH SUDAN","ES":"SPAIN","LK":"SRI LANKA","SD":"SUDAN","SR":"SURINAME","SJ":"SVALBARD AND JAN MAYEN","SZ":"SWAZILAND","SE":"SWEDEN","CH":"SWITZERLAND","SY":"SYRIAN ARAB REPUBLIC","TW":"TAIWAN, PROVINCE OF CHINA","TJ":"TAJIKISTAN","TZ":"TANZANIA, UNITED REPUBLIC OF","TH":"THAILAND","TL":"TIMOR-LESTE","TG":"TOGO","TK":"TOKELAU","TO":"TONGA","TT":"TRINIDAD AND TOBAGO","TN":"TUNISIA","TR":"TURKEY","TM":"TURKMENISTAN","TC":"TURKS AND CAICOS ISLANDS","TV":"TUVALU","UG":"UGANDA","UA":"UKRAINE","AE":"UNITED ARAB EMIRATES","GB":"UNITED KINGDOM","US":"UNITED STATES","UM":"UNITED STATES MINOR OUTLYING ISLANDS","UY":"URUGUAY","UZ":"UZBEKISTAN","VU":"VANUATU","VE":"VENEZUELA, BOLIVARIAN REPUBLIC OF","VN":"VIET NAM","VG":"VIRGIN ISLANDS, BRITISH","VI":"VIRGIN ISLANDS, U.S.","WF":"WALLIS AND FUTUNA","EH":"WESTERN SAHARA","YE":"YEMEN","ZM":"ZAMBIA","ZW":"ZIMBABWE"};
    if (parts.length > 2) throw new SyntaxError('Unexpected number of segments ' + parts.length);
    if (parts.length > 1)
        return (ISO639_1[parts[0]] || ISO639_2[parts[0]] || parts[0]) + ', ' + (ISO3166_1[parts[1]] || parts[1]);
    if (parts.length > 0)
        return ISO639_1[parts[0]] || ISO639_2[parts[0]] || ISO3166_1[parts[0]] || parts[0];
    return '';
} 
```

示例用法

```
localeCodeToEnglish('sk-SK');
// "Slovak, SLOVAKIA" 
```

# javascript - 无法通过执行带有上下文的 Handlebars 模板来获取 HTML 结果

> ID：13917158
> 
> 赞同：0
> 
> 时间：2012-12-17T15:35:20.353
> 
> 标签：javascript, templates, handlebars.js

我的 javascript 中有以下代码：

```
 var context = {
        "title": section_title
    };

    var section_template = $("section-template").html(),
        template = Handlebars.compile(section_template);

    alert("yeah!");
    alert(context.title);
    var final_section_content = template(context);

    alert("WHat?"); 
```

`alerts()`它们纯粹是为了调试目的 。

`section_template`正确填充了我准备的模板

`template`有一个函数作为它的值，所以我认为编译也很顺利。

“是啊！” 并且上下文的标题正确显示。但是，执行过程中似乎出了点问题`template(context);`。“什么？” 永远不会引发警报，因此永远不会设置 HTML 内容（稍后在程序中）。稍后在程序中，我使用`final_section_content`jQuery`before()`函数的值。但是“什么？” 本身并没有被执行。知道为什么吗？

模板代码：

```
<script id="section-template" type="text/x-handlebars-template">
    <div class="row-fluid">
        <div class="span8 offset1">
            {{! This will contain the section requirements}}
            <div class="section-title">
                <span class="add-on">
                    <i class="icon-plus-sign"></i>
                </span>

                <h2>
                    {{title}}
                </h2>
                <i class="icon-list" data-placement="bottom" data-title="Create sub-section"></i>
                <i class="icon-pencil" data-placement="bottom" data-title="Edit section title"></i>
                <i class="icon-trash" data-placement="bottom" data-title="Delete section"></i>
                <div class="subsection">
                    {{! Dummy container for subsection}}
                </div>
            </div>
        </div>
        <div class="span2 offset1">
            {{! This will contain the total score for the section}}
        </div>
    </div>
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T16:59:17.143

Make sure that the element containing the template code is loaded prior to querying it's contents using `$('#section-template').html()`. See [Why is browser returning error "TypeError: this._input is null" in Firefox (and similar in Chrome) when using handlebars.js?](https://stackoverflow.com/questions/12613967/why-is-browser-returning-error-typeerror-this-input-is-null-in-firefox-and) for more details.

# android - Android View Canvas onTouchEvent

> ID：13917159
> 
> 赞同：0
> 
> 时间：2012-12-17T15:35:21.570
> 
> 标签：android

我正在尝试做一个愚蠢的应用程序，其中使用移动`HelloWorld!!`绘制的“”字符串。`Canvas`字符串的位置`(x_new, y_new)`只是它的旧位置`(x_old, y_old)`加上事件`(x, y)`返回的位置`ACTION_UP`。问题是`ACTION_UP`它无法识别的事件。该`Log.d()`函数总是打印类似`motionEvent(28254): MotionEvent{4050df70 action=4 x=354.0 y=415.0 pressure=0.20000002 size=0.26666668}`where `action=4`never change 的内容。你有什么建议吗？谢谢！！

```
class myView extends View {

private Canvas canvas;
    private int x;
private int y;

public HUDView(Context context) {
   super(context);
   this.x=5;
   this.y=5;    

}

protected void onDraw(Canvas canvas) {
    this.canvas=canvas;
    this.canvas.drawText("HelloWorld!!", x, y, mLoadPaint);
}

@Override
public boolean onTouchEvent( MotionEvent event) {
    super.onTouchEvent(event);
    Log.d("motionEvent", event.toString());
    if (event.getAction()==MotionEvent.ACTION_UP){
        Log.d("motionEvent", "action_up");
            this.x+=(int)event.getX();
            this.y+=(int)event.getY();
        return true;
    }
    this.postInvalidate();
    return true;
}

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T15:52:44.900

1.  不需要全局变量 Canvas（您在未随视图更新的画布上绘图）

2.  在 onTouchEven 中，即使 Action 已启动，您也不会在没有 postInvalidating 的情况下返回 true

3.  您的构造函数名称错误

就问题而言，您的代码将无法运行。这应该可以工作

```
class myView extends View {

  private int x;
  private int y;

  public myView (Context context) {
    super(context);
       this.x=5;
       this.y=5;    
  }

 @Override
 protected void onDraw(Canvas canvas){
         canvas.drawText("HelloWorld!!", x, y, mLoadPaint);
 }

 @Override
public boolean onTouchEvent( MotionEvent event) {
     super.onTouchEvent(event);
      Log.d ("motionEvent", event.toString());
        if (event.getAction()==MotionEvent.ACTION_UP){
        Log.d("motionEvent", "action_up");
        this.x+=(int)event.getX();
        this.y+=(int)event.getY();
       }
      this.postInvalidate();
     return true;
  }

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T15:59:05.370

use invalidate post invalidate 在线程中使用

# javascript - 使用 ExtJs 分割文本框

> ID：13917161
> 
> 赞同：0
> 
> 时间：2012-12-17T15:35:27.227
> 
> 标签：javascript, extjs, textbox, extjs4

我想使用 ExtJS 以拆分方式为单个标签创建一个文本框。实际上我的要求是一个电话号码的标签，它需要一个文本框分成三个由“-”（连字符）分隔的框。应该如下。

电话号码：770-268-3320

将每个括号视为一个文本框。希望你明白我的要求是什么......提前致谢

```
Ext.onReady(function(){
    Ext.create('Ext.form.Panel', {
        //title: 'Simple Form',
        bodyPadding: 5,
        width: 400,
        // The form will submit an AJAX request to this URL when submitted
        url: 'save-form.php',
        // Fields will be arranged vertically, stretched to full width
        layout: 'anchor',
        defaults: {
            anchor: '100%'
        },    
        // The fields
        defaultType: 'textfield',
        items: [{
            fieldLabel: 'PhoneNumber',
            name: 'phoneNumber',
            allowBlank: false
        },{
            fieldLabel: 'CustomerName',
            name: 'custCLLI',
            allowBlank: false
        }],

        // Reset and Submit buttons

        renderTo: Ext.getBody()
    });
}); 
```

或者你可以在这里查看：http: [//jsfiddle.net/jA8Qy/5/](http://jsfiddle.net/jA8Qy/5/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T02:30:27.690

看到[这个](http://www.sencha.com/forum/showthread.php?104128-Textfield-Auto-Mask-%28Telephone%29.)。

希望这能满足您的要求。

# php - 来自mysql数据库的javascript变量

> ID：13917163
> 
> 赞同：0
> 
> 时间：2012-12-17T15:35:29.590
> 
> 标签：php, javascript, mysql, google-maps

您好我正在尝试绘制多个值并使用此变量成功完成。

```
 var locations = [
  ['Bacolod City', 10.64073 ,122.9689, 4],
  ['Bago City', 10.5333 ,122.8333, 5],
  ['Cadiz City', 10.950, 123.29, 3],
  ['Sipalay City', 9.7519, 122.40, 2],
  ['Kabankalan City', 9.896, 122.831, 1]
]; 
```

现在我的下一步是代替上面的静态数据，我想从我的 mysql 数据库中检索数据并将其用于*var locations*。将不胜感激有关如何执行此操作的任何帮助。我见过的大多数都很复杂并且使用我没有经验的json。在此先感谢。

注意：顺便说一句，我正在尝试使用 google maps api 进行绘图。抱歉没有提及。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T15:40:48.693

您应该阅读有关 Ajax 或可以使用许多教程之一： [http ://www.php4every1.com/tutorials/jquery-ajax-tutorial/](http://www.php4every1.com/tutorials/jquery-ajax-tutorial/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T15:59:52.467

如果您查看文档的“[文章](https://developers.google.com/maps/articles/)”部分，有几个示例说明如何将 PHP/MySQL 与 Google Maps API v3 一起使用：

*   [将 PHP/MySQL 与 Google 地图一起使用](https://developers.google.com/maps/articles/phpsqlajax_v3)
*   [使用 PHP 和 MySQL 创建商店定位器](https://developers.google.com/maps/articles/phpsqlsearch_v3)

# php - 分页问题（PHP 超全局变量问题，未定义索引）

> ID：13917164
> 
> 赞同：0
> 
> 时间：2012-12-17T15:35:36.983
> 
> 标签：php

我正在尝试在某处实现分页，但我遇到了这个问题：

我有这部分来更改链接：

```
echo " <a href='$_SERVER[SCRIPT_NAME]?Page=$Prev_Page'><< Back</a> "; 
```

这给出了这部分的错误：

```
$Page = $_GET["Page"];  
if(!$_GET["Page"])  
{ 
```

它说未定义的索引..为什么会出现此错误？谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-17T15:37:35.557

You should quote the array index. also use html entities. Like this

```
echo " <a href='{$_SERVER['SCRIPT_NAME']}?Page=$Prev_Page'>&lt;&lt; Back</a> "; 
```

And its safe to check if `$_GET["Page"]` exists.

```
$Page = isset($_GET["Page"]) ? $_GET["Page"]: false; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T15:37:50.777

This happens because you are missing an index in the array. $_GET is just an array, so you should check if the key exists first.

```
$Page = (array_key_exists('page', $_GET)) ? $_GET["page"] : false;  
if($Page===false)  
{  
   //no page
   return;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-17T15:41:26.053

```
// empty() works even if the variable doesn't exist, kind of like isset()
if(!empty($_GET['Page']) !== false) {
    // Do stuff
    $page = $_GET['Page'];
} 
```

# tfs - TFS 2010 团队项目迁移

> ID：13917165
> 
> 赞同：0
> 
> 时间：2012-12-17T15:35:43.313
> 
> 标签：tfs, tfs-migration, tfs-to-tfs-migration-tool

有没有办法将团队项目集合的团队项目从一个 TFS 服务器移动/迁移到另一个服务器（都在 TFS 2010 版本中）。目标团队项目集合已经包含一个团队项目，我想将源团队项目移动到这个特定的团队项目中。所以最后我将有一个团队项目，其中包含几个项目。那可能吗？我也希望历史得以保存。

如果上述情况不可行，我可以将 Team 项目从一台服务器迁移到另一台服务器，而无需经过数据库备份-还原-TFS 分离-附加过程吗？

我想过尝试 TFSIntegration 工具，但可以看到很多人建议避免使用它，因为它存在问题。

因此，如果您有任何信息可以完成此操作，那就太好了..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T16:14:09.050

如果您想要所有历史记录，那么您实际上只有 2 个选项：

*   TFS 集成平台 - [http://tfsintegration.codeplex.com/](http://tfsintegration.codeplex.com/)
*   备份/恢复集合数据库 - [http://msdn.microsoft.com/en-us/library/dd936138.aspx#Backup](http://msdn.microsoft.com/en-us/library/dd936138.aspx#Backup)

我建议移动数据库。这听起来很繁重，但实际上很容易。

祝你好运！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-31T05:12:37.180

用于集成的 TFS 集成平台。

一个很有帮助的工具，名为“witAdminUi”。

# jasper-reports - JfreeChart 自定义工单标签

> ID：13917167
> 
> 赞同：2
> 
> 时间：2012-12-17T15:35:55.010
> 
> 标签：jasper-reports, jfreechart

我正在使用 JFreechart 在生成的报告中绘制图表`JasperReports`（实际上我使用的是使用 JasperReports的[DynamicReports ）。](http://www.dynamicreports.org/index.html)

我正在绘制一个`barchart`并且我想在轴上的标签上有自定义字符串。一张图片会更好地解释一切。

现在我得到了这个： ![在此处输入图像描述](../Images/4376fe06000fd3085eb8d04c9b2b8260.png)

我想得到这个： ![在此处输入图像描述](../Images/1b7cfe44fa4dc4f6918ed36ac2e4c606.png)

一些建议？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-17T17:11:44.023

[这](https://stackoverflow.com/questions/12835369/java-jfreechart-category-step-chart-horizontal-image-to-explane/12839170#12839170)是您的问题的解决方案。您需要为每个值提供一个带有文本的新轴

```
String[] grade =  new String[6];
grade[0] = "String0";
grade[1] = "String1";
grade[2] = "String2";
grade[3] = "String3";
grade[4] = "String4";
grade[5] = "";

SymbolAxis rangeAxis = new SymbolAxis("", grade);
rangeAxis.setTickUnit(new NumberTickUnit(1));
rangeAxis.setRange(0,5);
plot.setRangeAxis(rangeAxis); 
```

![在此处输入图像描述](../Images/6657e94761544267666f462a2f5ff0cf.png)

这是完整的代码

```
import java.awt.Color;
import java.awt.Dimension;
import java.awt.Paint;

import org.jfree.chart.ChartFactory;
import org.jfree.chart.ChartPanel;
import org.jfree.chart.JFreeChart;
import org.jfree.chart.axis.NumberTickUnit;
import org.jfree.chart.axis.SymbolAxis;
import org.jfree.chart.plot.CategoryPlot;
import org.jfree.chart.plot.PlotOrientation;
import org.jfree.chart.renderer.category.BarRenderer;
import org.jfree.data.category.CategoryDataset;
import org.jfree.data.category.DefaultCategoryDataset;
import org.jfree.ui.ApplicationFrame;
import org.jfree.ui.RefineryUtilities;

public class BarChartDemo7 extends ApplicationFrame {

    static class CustomRenderer extends BarRenderer {

        private final Paint[] colors1;
        private final Paint[] colors2;

        public CustomRenderer(Paint[] colors1,Paint[] colors2) {
            this.colors1 = colors1;
            this.colors2 = colors2;
        }

        @Override
        public Paint getItemPaint(int series, int category) {
            if (category == 4)
                return this.colors2[series % this.colors1.length];
            else
                return this.colors1[series % this.colors1.length];
        }
    }

    public BarChartDemo7(String title) {
        super(title);
        CategoryDataset dataSet=createDataset();
        JFreeChart chart=createChart(dataSet);
        ChartPanel panel=new ChartPanel(chart);
        panel.setPreferredSize(new Dimension(800,800));
        setContentPane(panel);
    }

    private static CategoryDataset createDataset() {
        // row keys...
        final String series1 = "ABC";
        final String series2 = "XYZ";

        // column keys...
        final String category1 = "A";
        final String category2 = "B";
        final String category3 = "C";
        final String category4 = "D";
        final String category5 = "E";
        final String category6 = "F";

        // create the dataset...
        final DefaultCategoryDataset dataset = new DefaultCategoryDataset();

        dataset.addValue(0, series1, category1);
        dataset.addValue(1, series1, category2);
        dataset.addValue(4, series1, category3);
        dataset.addValue(3, series1, category4);
        dataset.addValue(2, series1, category5);
        dataset.addValue(4, series1, category6);

        dataset.addValue(4, series2, category1);
        dataset.addValue(0, series2, category2);
        dataset.addValue(0, series2, category3);
        dataset.addValue(4, series2, category4);
        dataset.addValue(3, series2, category1);
        dataset.addValue(2, series2, category2);
        dataset.addValue(1, series2, category5);
        dataset.addValue(4, series2, category4);

        return dataset;
    }

    private static JFreeChart createChart(CategoryDataset dataset) {

        // create the chart...
        JFreeChart chart = ChartFactory.createBarChart(
            "ABC",             
            "",                      
            "",                         
            dataset,                         
            PlotOrientation.HORIZONTAL,        
            true,                            
            true,                            
            false                            
        );

        chart.setBackgroundPaint(Color.white);

        CategoryPlot plot = (CategoryPlot) chart.getPlot();
        plot.setBackgroundPaint(Color.WHITE);
        plot.setDomainGridlinePaint(Color.BLACK);
        plot.setRangeGridlinePaint(Color.BLACK);

        String[] grade =  new String[6];
        grade[0] = "String0";
        grade[1] = "String1";
        grade[2] = "String2";
        grade[3] = "String3";
        grade[4] = "String4";
        grade[5] = "";

        SymbolAxis rangeAxis = new SymbolAxis("", grade);
        rangeAxis.setTickUnit(new NumberTickUnit(1));
        rangeAxis.setRange(0,5);
        plot.setRangeAxis(rangeAxis);

        Color[] color1 = new Color[]{Color.red, Color.green,Color.blue};
        Color[] color2 = new Color[]{Color.gray,Color.gray.darker()};
        plot.setRenderer(new CustomRenderer(color1,color2));
        return chart;
    }

    public static void main(String[] args) {
        BarChartDemo7 demo = new BarChartDemo7("ABC");
        demo.pack();
        RefineryUtilities.centerFrameOnScreen(demo);
        demo.setVisible(true);
    }
} 
```

# c# - Calling methods by number

> ID：13917169
> 
> 赞同：2
> 
> 时间：2012-12-17T15:36:02.553
> 
> 标签：c#

Let's say I've got 6 methods: `Method1()`, `Method2()`, `Method3()`, `Method4()`, `Method5()` and `Method6()`. I also have another method, `SuperMethod(int nr)`, that will call one of the other methods. If the input to `SuperMethod` is 1, `Method1()` will be called and so on.

Can this be done in an elegant way without having a switch statement or stacking if-else statements?

*I should add that this is not important production code I'm writing, so performance is not an issue.*

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-17T15:40:26.430

你可以使用委托，用短程序解决现实世界的问题也很有趣：

```
 public void CollatzTest(int n)
    {
        var f = new Func<int, int>[] { i => i / 2, i => i * 3 + 1 };

        while (n != 1)
            n = f[n % 2](n);
    } 
```

这也适用于动作和直接方法引用

```
 private void DelegateActionStartTest()
    {
        Action[] Actions = new Action[] { UselesstTest, IntervalTest, Euler13 };

        int nFunction = 2;

        Actions[nFunction]();
    } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-17T15:44:49.173

> 假设我有 6 个方法：Method1()、Method2()...

然后你有可怕的方法名称。我会适当地命名这些方法（基于它们*所做*的和/或*return*），然后使用`Dictionary<int,Func<???>>`.

`SuperMethod`（另一个可怕的方法名称）然后会在字典中查找该方法并执行它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-17T15:40:50.197

```
void Method1() { Console.WriteLine("M1"); }

void Method2() { Console.WriteLine("M2"); }

void SuperMethod(int nr)
{
    var mi = this.GetType().GetMethod("Method" + nr, BindingFlags.Instance | BindingFlags.NonPublic | BindingFlags.Public);
    mi.Invoke(this, null);
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-17T15:46:38.610

我只会使用带有静态列表或数组的静态类。恒定的查找时间和访问，因为整数是你的关键，它的连续字典几乎没有优势。

```
static class Super
{
    static void M1()
    {
    }
    static void M2()
    {
    }
    static List<Action> Actions = new List<Action>(); 
    static Super()
    {
        Actions.Add(M1);
        Actions.Add(M2); 
    }
    static void CallSupper(int nr)
    {
        try
        {
            Actions[nr - 1](); 
        }
        catch (Exception ex)
        {

        }
    }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-17T15:38:56.960

首先，我可能会重新考虑设计（正如其他人所评论的那样）。

如果你真的想使用反射并假设我们在一个类实例中，你可以这样做

```
void SuperMethod(int nr)
{   
    MethodInfo methodInfo = type.GetMethod("Method" + nr);
    methodInfo.Invoke(this, null);
} 
```

# php - login user joomla in external php

> ID：13917178
> 
> 赞同：0
> 
> 时间：2012-12-17T15:36:19.640
> 
> 标签：php, joomla

I'm making an Android app, and I need the users to log into the database belonging to joomla. I'm making a php but it does not work

What do you think of the code? would you change?

```
 <?php
    /**
     * Database config variables
     */
    define("DB_HOST", "localhost");
    define("DB_USER", "root");//cambiar por el nombre de usuario definido en la configuracion de la BD.
    define("DB_PASSWORD", "");//Modificar por el password elegido
    define("DB_DATABASE", "gestorrecursos");//Nombre de la base de datos reemplazar si se utilizo otro diferente al mencionado en el tutorial.

        <?php

    class funciones_BD {

        private $db;

        // constructor

        function __construct() {
            require_once 'connectbd.php';
            // connecting to database

            $this->db = new DB_Connect();
            $this->db->connect();

        }

        // destructor
        function __destruct() {

        }

        /**
         * agregar nuevo usuario
         */
        public function adduser($username, $password,$id) {

        $result = mysql_query("INSERT INTO ocbup_users(username,password,id) VALUES('$username', '$password',$id)");
            // check for successful store

            if ($result) {

                return true;

            } else {

                return false;
            }

        }

         /**
         * Verificar si el usuario ya existe por el username
         */

        public function isuserexist($username) {

            $result = mysql_query("SELECT username from ocbup_users WHERE username = '$username'");

            $num_rows = mysql_num_rows($result); //numero de filas retornadas

            if ($num_rows > 0) {

                // el usuario existe 

                return true;
            } else {
                // no existe
                return false;
            }
        }

        public function login($user,$passw){

        $result=mysql_query("SELECT COUNT(*) FROM ocbup_users WHERE username='$user' AND password='$passw' "); 
        $count = mysql_fetch_row($result);

        /*como el usuario debe ser unico cuenta el numero de ocurrencias con esos datos*/

            if ($count[0]==0){

            return true;

            }else{

            return false;

            }
        }

    }

    ?> 
```

I appreciate your help and patience.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T18:00:19.627

Joomla！1.5 使用 md5 对密码进行哈希处理。创建密码时，将使用附加到密码字符串末尾的 32 个字符的盐对它们进行哈希处理。密码存储为 {TOTAL HASH}:{ORIGINAL SALT}。

要了解这是如何测试身份验证的，请查看 plugins/authentication/joomla.php 第 80-116 行。为您的应用登录使用相同的功能

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T19:43:50.100

Joomla 使用 md5 哈希作为密码，但是通过使用外部文件，您无法访问 joomla 资源，因为该架构阻止了外部访问。另一种方式是使用用户/密码以编程方式访问 joomla 基本登录系统以授予访问权限。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-18T02:16:19.987

您可以使用以下代码来实现您的要求。

在 joomla 标准中，您可以使用以下方式创建密码

```
 jimport('joomla.user.helper');
             $salt = JUserHelper::genRandomPassword(32);
             $crypt = JUserHelper::getCryptedPassword($password_choose, $salt);
             $password = $crypt.':'.$salt; 
```

您提到您正在从外部文件（或程序）访问，那么如果您在另一侧安装了 joomla，您可以从 joomla 结构外部访问它。

像这样使用joomla默认框架

```
define( '_JEXEC', 1 );
define('JPATH_BASE', dirname(__FILE__) );//this is when we are in the root
define( 'DS', DIRECTORY_SEPARATOR );

require_once ( JPATH_BASE .DS.'includes'.DS.'defines.php' );
require_once ( JPATH_BASE .DS.'includes'.DS.'framework.php' );

$mainframe =& JFactory::getApplication('site');
$mainframe->initialise(); 
```

在 root joomla 安装中使用此文件并包含 joomla 框架，然后创建密码。你可以使用joomla的

`$app->login($credentional,$option);`用于登录系统。

您可以在堆栈溢出中找到许多类似的问题尝试搜索更多..

[看看这个](https://stackoverflow.com/questions/10428126/joomla-password-encryption/10428705#10428705) 希望这对你有帮助..

# django - Is There a Good Way to Forbid Templates Accessing Related Managers Through Model Instances

> ID：13917179
> 
> 赞同：1
> 
> 时间：2012-12-17T15:36:21.477
> 
> 标签：django, django-models, django-templates

I need an elegant way of disabling or authorizing related field traversal in Django templates.

Imagine following setup for models.py:

```
class Person(models.Model):
    pass

class Secret(models.Model):
    owner = models.ForeignKey(Person, related_name="secrets") 
```

Now imagine this simple view that gives the template QuerySet of all Person instances in the system just so the template could put them in a list.

```
def show_people(request):
    render_to_response("people.html", {people=Person.objects.all()}) 
```

Now my problem is that I would not provide the templates myself in this imaginary system and I don't fully trust those who make the templates. The show_people view gives the people.html template the secrets of the Person instances through the `related_name="secrets"`. This example is quite silly but in reality I have model structures where template providers could access all kind of vulnerable data through related managers.

The obvious solution would be not to give models to templates but to convert them in to some more secure data objects. But that would be pain in my case because the system is already quite big and it's up and running.

I think a cool solution to this would be somehow preventing related field traversal in templates. Another solution would be to have such custom related managers that could have access to the request object and filter the initial query set according to the `request.user`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T09:49:43.920

一个可能的解决方案可能是将自定义 model.Manager 与您的相关模型一起使用。设置**use_for_related_fields = True**强制 Django 使用它而不是普通的管理器。修改管理器以根据需要过滤数据。

也看看这个：

Django：[使用管理器进行相关对象访问（use_for_related_fields 文档）](https://docs.djangoproject.com/en/dev/topics/db/managers/#using-managers-for-related-object-access)

stackoverflow: [use_for_related_fields howto](https://stackoverflow.com/questions/6067195/how-does-use-for-related-fields-work-in-django)，这里有很好的解释。

# arrays - Initiating a SOAP Array on Delphi

> ID：13917182
> 
> 赞同：0
> 
> 时间：2012-12-17T15:36:31.533
> 
> 标签：arrays, delphi, soap

I am trying to initialize or create an array of a soap call:

```
Array_Of_ProductIdentifierClinicalType = array of ProductIdentifierClinicalType; 
```

This is the way that I am trying to initialize it:

```
Product[0].IdentifierType := Array_Of_ProductIdentifierClinicalType.Create(); 
```

When I run the application I get this error: Access Violation at address...

![enter image description here](../Images/41752b9eb3d1b3ac91569aac29012f96.png)

The question would be: How to initialize this soap call??

Thank you for your time!!!! You can do a WSDL import on: [http://axelcarreras.dyndns.biz:3434/WSAlchemy.wsdl](http://axelcarreras.dyndns.biz:3434/WSAlchemy.wsdl)

```
procedure TFrmMain.Button16Click(Sender: TObject);
Var
  ExcludeExpiradas: String;
  Serv: AlchemyServiceSoap;
  req: AlchemyClinical;
  element: AlchemyClinicalRequest;
  Prescribed: PrescribedType;
  //Prescribing: Prescribing
  Prescribing: PrescribedType;
  alc: AlchemyIdentifierType;
  D: TXSDate;
  Counter: Integer;
  ProductStr: AlchemyIdentifierClinicalType;

begin

  With DM do
  begin
    ExcludeExpiradas := ' and (' + chr(39) +  DateToStr(Date) + chr(39) + ' < (FECHARECETA + 180)) ';
    CDSRx_Procesadas.Close;
    CDSRx_Procesadas.CommandText := 'SELECT * ' +
    ' FROM RX_PROCESADAS WHERE ' +
    ' (NUMERORECETA IS NOT NULL AND CANTIDAD_DISPONIBLE > 0)' +
     ExcludeExpiradas +
    ' and NumeroCliente = ' + CDSPacientesNumeroCliente.asString +
    ' Order by NumeroReceta';
    //ShowMessage(CDSRx_Procesadas.CommandText);
    CDSRx_Procesadas.Open;

    ProductStr := AlchemyIdentifierClinicalType.Create;
    With ProductStr do
    begin
      Identifier := 1;
    end;

    element := AlchemyClinicalRequest.Create;
    //Prescribed := PrescribedType.Create;
    With element do
    begin
      With Prescribed do
      begin
        Counter := 0;
        while not CDSRx_Procesadas.eof do
        begin
          Product := Array_Of_ProductIdentifierClinicalType.Create();
          With Product[0] do
          begin
            IdentifierType := ProductIdentifierTypeEnum.NDC9;
            Identifier := Copy(DM.CDSInventarioNDC.Value, 1, 9);
          end;
          Counter := Counter + 1;
          CDSRx_Procesadas.Next;
        end;
      end;
      With Prescribing do
      begin
        Counter := 0;
        Product[0].IdentifierType := ProductIdentifierTypeEnum.AlchemyProductID;
        Product[0].Identifier := Copy(DM.CDSInventarioNDC.Value, 1, 9);
        Counter := Counter + 1;
      end;
      With PatientDemographics do
      begin
        while not CDSAlergies.Eof do
        begin
          Allergy.AllergySubstanceClass[0].Identifier := CDSAlergiesNOALERGIA.Value;
          CDSAlergies.Next;
        end;
        if CDSPacientesSEXO.Value = 1 then
          Gender := GenderTypeEnum.Male
        else
          Gender := GenderTypeEnum.Female;

        D := TXSDate.Create;
        D.AsDate := CDSPacientesFECHANACIMIENTO.AsDateTime;
        DateOfBirth := D;
      end;
      With RequestedOperations do
      begin
        DrugToDrug := True;
        //DuplicateTherapy
        Allergy := True;

        With WarningLabels do
        begin
          Request := True;
          LanguageCode := 'en-US';
          MaxLines := 5;
          CharsPerLine := 24;
        end;
        With DoseScreening do
        begin
          Request := True;
        end;
        AdverseReactions.Request := True;
      end;
      IgnorePrescribed := False;
      IncludeConsumerNotes := True;
      IncludeProfessionalNotes := True;
    end;
  end;
end;* 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T21:39:16.303

假设问题中的这行代码是准确的：

```
Array_Of_ProductIdentifierClinicalType = array of ProductIdentifierClinicalType; 
```

那么问题就在这里：

```
Product := Array_Of_ProductIdentifierClinicalType.Create(); 
```

这是一个动态数组构造函数。它创建一个长度等于构造函数参数数量的动态数组。然后将数组的每个元素依次分配给传递的参数。

考虑一个使用`TBytes = array of Byte`.

```
Bytes := TBytes.Create(1, 2, 3); 
```

这初始化`Bytes`为一个长度为 3 且具有值 1、2 和 3 的数组。

现在，让我们再次查看您的代码。这初始化`Product`为长度为 0 的数组。因此，当您访问`Product[0]`该数组时，会导致运行时错误，因为数组索引超出范围。

要解决此问题，您需要确保数组已初始化为具有足够的元素。一种选择当然是使用动态数组构造函数。另一个是使用`SetLength`. 我怀疑你对 Delphi 的动态数组的理解很差。我建议您查阅[文档](http://docwiki.embarcadero.com/RADStudio/en/Structured_Types#Dynamic_Arrays)。

# ios - 应用程序名称更改后的 iOS 代码签名错误

> ID：13917184
> 
> 赞同：1
> 
> 时间：2012-12-17T15:36:38.347
> 
> 标签：ios, xcode4.2

各位开发者，

我使用 xCode 4 开发了一个名为“myApp1”的应用程序。现在，我在 xCode 项目设置中将名称更改为 myApp2，在 Apple prov 门户中创建了一个新的配置文件并下载了它。

但是，当我尝试编译时出现以下错误：代码签名错误：配置文件“myApp1”指定了与当前设置“com.company.mobile”不匹配的应用程序标识符“com.company.mobile.myApp1”。我的应用程序2'

显然 xCode 认为它仍然需要在新应用程序中使用 myApp1 配置文件。如何让项目使用新的配置文件？

非常感谢任何帮助！

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T15:42:36.320

*   在导航面板中选择您的项目
*   在主窗口中选择您的目标
*   选择构建设置选项卡
*   滚动到代码签名部分
*   为适当的构建配置选择适当的配置文件

![在此处输入图像描述](../Images/79a1c14c861527d8e54b9ca85f52b4c6.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T15:51:36.970

您可以更改应用程序名称而无需获取新的配置文件。如果您只想更改名称并保持相同的捆绑程序 ID，请使用现有的配置文件。当用户以这种方式更新应用程序时，它们`MyApp1`将被替换为`MyApp2`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-17T15:52:20.027

这个问题包含我的问题的解决方案。不过，这个问题略有不同。

[堆栈溢出问题](https://stackoverflow.com/questions/1760518/codesign-error-provisioning-profile-cannot-be-found-after-deleting-expired-prof)

# c# - 多个平台上的密码散列（Andorid、iPhone、W8M）

> ID：13917188
> 
> 赞同：2
> 
> 时间：2012-12-17T15:37:01.750
> 
> 标签：c#, android, objective-c, hash, passwords

我们目前正在.Net 中开发一个Web 应用程序，它还将拥有Android、iPhone 和Windows Mobile 8 应用程序来占用它。所有这些应用程序都需要有一个统一的登录系统。我们的网站和网络服务将使用 SSL，但显然我们希望尽我们所能确保用户密码的安全。因此，我们正在寻找一种可以在上述平台中使用的通用密码散列函数。

目前我们发现的唯一常见的是 SAH256，但我想使用一些更强大的东西。C# 有我想使用的 Rfc2898DeriveBytes 类（并且可以在网站和 Win8 Mobile 中使用）但是对于 Android/Java 和 iOS/Objective C 是否有任何实现？如果这不能使用，我们的下一个最佳选择是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-17T15:50:22.917

在存储用户密码并在登录尝试期间进行比较时，应在后端使用密码哈希函数。

登录场景：

用户通过您的应用程序版本之一通过 SSL 发送密码。

后端服务器对用户发送的密码进行哈希处理，从数据存储中检索存储的哈希，将发送的密码的哈希与存储的哈希进行比较。

哈希匹配，用户被允许访问，否则访问被拒绝。

SSL 加密可防止在从客户端传输期间泄露密码，将密码存储为哈希可防止在您的数据库遭到破坏时泄露用户密码。

使用这个场景，由于哈希都是在后端服务器完成的，因此只需要一个哈希算法的实现。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-17T16:01:51.073

PBKDF2 不适合您的情况。它主要是为了防止攻击者已经拥有您的数据（即加密文件）时的攻击。它通过在暴力破解期间消耗 CPU 来强制延迟来做到这一点。因为您是在服务器端执行身份验证，所以您可以轻松节省一些 CPU，如果客户端密码错误，您只需等待一两秒钟即可向客户端发送响应。只需使用加盐哈希（如 HMAC），就可以了。

如果您使用 SSL，那么您的密码是安全的。您可以做得更好的唯一方法是实施完整的公钥加密，这可以防止 MITM 攻击。SSL 甚至内置了这个。

通过网络发送密码哈希并不比发送密码更安全。是的，密码文本对攻击者是隐藏的，但他们仍然有哈希值，如果他们有，他们就不需要密码。在 SSL 的情况下，您的纯文本也受到保护。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-17T15:45:54.480

虽然我从未亲自使用过它，但 bcrypt 似乎拥有您正在寻找的所有实现。

[http://en.wikipedia.org/wiki/Bcrypt#See_also](http://en.wikipedia.org/wiki/Bcrypt#See_also)

希望有帮助。

# php - 为什么我的 bc-math 不起作用？

> ID：13917191
> 
> 赞同：-2
> 
> 时间：2012-12-17T15:37:05.923
> 
> 标签：php, mandelbrot, bcmath

在我的函数中，我想使用 php bc-math 来提高精度。我试图替换所有操作无济于事。这是浮点到字符串的转换问题吗？

```
 function complex_iterate($re,$im)
   {
    $re=strval($re);
    $im=strval($im);
    $zisqr = $zrsqr = $iter = $zIm = $zRe = "0";
    bcscale(50);

   while (floatval(bcadd($zrsqr,$zisqr)) < 4
     && $iter < $this->iterations
    )
    {
        $zIm = bcadd($zIm,$zRe);
        $zIm = bcadd($zIm,$zIm);
        $zIm = bcadd($zIm,$im);
        $zRe = bcadd(bcsub($zrsqr,$zisqr),$re);
        $zrsqr = bcmul($zRe,$zRe);
        $zisqr = bcmul($zIm,$zIm);
        ++$iter;
    }
    return $iter; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T22:02:19.983

使用任意精度的库都将比浮点数慢得多，尤其是对于计算 Mandelbrot 集这样的东西，它会进行很多次重复迭代。如果您想要速度，我建议您使用[gmplib 之](http://gmplib.org/)类的库在 C 中重写它。

您的代码中的问题是您在循环中的第一行使用 a`bcadd`而不是 a `bcmul`。

# c# - 以编程方式将样式应用于 asp.net 网站

> ID：13917194
> 
> 赞同：4
> 
> 时间：2012-12-17T15:37:27.813
> 
> 标签：c#, asp.net, css, webforms

使用新的 *空网站应用程序*

我想通过包含一些 css 属性的自定义值的 fie 将样式应用于 aspx 页面，我不确定哪种方法更好。

我仍在测试这个概念，我有一个包含这些值的文件：

```
width;100px    width;130px    background-color;#aac93f 
```

这些值不是硬编码的，而是由另一个应用程序生成的

我想将它读入应用程序。

我能想到我知道的唯一两种方法：

```
`File.ReadAllLines` or `File.ReadAllText`. 
```

然后通过后面的代码通过已处理的数据设置 html 元素样式属性

```
htmltag.Style.Add("width", setting1)....etc 
```

**或者**

我还可以从动态/编程数据中加载样式表

```
<%@ Page Language="C#" AutoEventWireup="true" CodeFile="Default.aspx.cs" Inherits="_Default" %>
<%@ Register Assembly="AjaxControlToolkit" Namespace="AjaxControlToolkit" TagPrefix="cc1" %>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">

<!--   and put a C# server code like below -->

<%=someVariableOrCsMethodReturnedValue%>
</head> 
```

这样它将保存带有加载值的格式化样式。

**这是为css样式加载自定义值的方式吗？**

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-17T15:57:55.307

您可以通过使用将 CSS 加载到 .NET 中的对象

```
objectName.Attributes.Add("style", "width:100px; width:130px; background-color:#aac93f"); 
```

但是，不建议使用此方法，因为您将其设置为 css 的内联编码，并且如果您具有相同的属性，则不会应用上层 css 设置。

最好的方法是设置一个外部 CSS 类并将它们全部设置在那里：

```
objectName.Attributes.Add("class", "exampleClass"); 
```

在你的 CSS 类中有：

```
.exampleClass{width:100px; width:130px; background-color:#aac93f} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-17T16:19:25.677

<style> 标签也可以[用作服务器控件](http://devio.wordpress.com/2012/06/27/embedding-dynamic-css-in-asp-net/)：

```
<style type="text/css" runat="server" id="htmlCss"></style> 
```

这将在页面中生成一个 HtmlGenericControl 类型的字段。

在页面生命周期事件之一（Page_Load、Page_Init 等）中，分配文字 CSS 定义，如下所示：

```
var css = @"
body
{
  background-color:#b0c4de;
}";
htmlCss.InnerHtml = css; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-17T16:00:49.730

您还可以将您的自定义 CSS 写入一个 asp.net Literal 对象，您将其放置在您的网络表单中的某个位置，这将使您的所有 css 像这样呈现......

在您后面的代码中：

```
Literal1.Text = "<style>" + File.ReadAllText(filepathhere) + "</style>"; 
```

在您的页面中将呈现：

```
<style>
    .class1
    {
        width: 100px;
    }

    .class2
    {
        width: 100px;
    }
</style> 
```

然后让您的每个元素引用您的 css 中包含的类。

# magento - 带有事务性电子邮件的 Magento Cronjob

> ID：13917200
> 
> 赞同：1
> 
> 时间：2012-12-17T15:37:44.537
> 
> 标签：magento, cron, transactional-email

我对 Magento 1.7 中的事务性电子邮件有疑问。

如果 cronjob 使用错误的主题/模板（基本/默认）发送事务性电子邮件。但我想在我自己的主题文件夹中使用我自己的寺庙。

如何将其设置为正确的主题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T08:27:33.243

蒂姆斯回答解决了它。

```
Mage::app()->setCurrentStore($store_id); 
```

# asp.net - IIS 7.5 web application first request after app-pool recycle very slow

> ID：13917205
> 
> 赞同：19
> 
> 时间：2012-12-17T15:37:52.780
> 
> 标签：asp.net, iis-7.5, windows-server-2008

We have our website running on two machines with iis 7.5 One works fine.

The other one how ever takes a really long time to process the first request after an app-pool recycle. It can take upwards of 60secs which is unacceptible since its going to be used as our production server.

I've checked the app-pool settings on the both servers and they are the same, and the webapp version on both servers is the same. I've run the task manager and resource monitor, add see a connection to the machine when I make the request but nothing else happens, iis doesn't even show the request in the logs untill its completed. I don't really know what its doing in the mean time.

Are there any traces of settings we can try to play with to fix this or find the problem. It's very puzzling.

EDIT: So I've got some more information now, finall got the failed request logs to work (had to give the user IIS_IUSRS permissions) but I've got some logs to see whats going on

The time lost is inbetween two seconds in the log file.

```
1\. MODULE_PRECONDITION_NOT_MATCH    Name="ScriptModule-4.0", Precondition="managedHandler,runtimeVersionv4.0"            12:09:46.422 
2\. VIRTUAL_MODULE_UNRESOLVED        Name="FormsAuthentication", Type="System.Web.Security.FormsAuthenticationModule"     12:12:04.390 
```

As you can see it takes over 2 minutes inbetween those two events, anyone encounted this before?

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-12-17T17:46:18.650

这有点难以判断您的其他服务器上发生了什么，但是这里有一个您可能需要重新考虑的简单清单：

*   始终预编译您的网站，而不是复制它！在部署之前编译您的网站可能会获得显着的性能提升： [ASP.NET 预编译概述](http://msdn.microsoft.com/en-us/library/bb398860.aspx)

*   不要在`debug="true"`启用的情况下运行生产应用程序，当 web.config 中的调试标志为真时，运行时应用程序中会使用更多内存，并且由于启用了一些额外的调试路径，代码执行速度会慢得多

*   检查您的 Web.config 文件以确保在该`<trace>`部分中禁用跟踪

*   IIS 7.5 带有[自动启动功能](http://msdn.microsoft.com/en-us/library/ee677260%28v=azure.10%29.aspx)。WAS（Windows Process Activation Service）启动所有配置为自动启动的应用程序池，确保您的应用程序池配置为`AlwaysRunning`在 IIS 7.5`applicationHost.config`中，[查看此处](http://weblogs.asp.net/scottgu/archive/2009/09/15/auto-start-asp-net-applications-vs-2010-and-net-4-0-series.aspx)了解更多详细信息

*   检查`ASPNET.CONFIG`文件以查看两台服务器上的配置是否仍然相同。每个 asp.net 服务器都可以通过`aspnet.config`位于框架文件夹根目录中的文件很好地配置

*   确保在您的 aspnet.config 文件中将代码访问安全性 (CAS) 的发布者证据设置为 false，这可能会在您重新启动 ASP.NET 应用程序池时增加初始页面加载。你可以在这里阅读[更多关于它的信息](http://blogs.msdn.com/b/pfedev/archive/2008/11/26/best-practice-generatepublisherevidence-in-aspnet-config.aspx)。

以下是禁用检查应用程序的 CAS 发布者策略的方法：

```
<configuration>
    <runtime>
        <generatePublisherEvidence enabled="false"/>
    </runtime>
</configuration> 
```

*   您也可能想尝试[IIS 7.5 的应用程序初始化模块](http://www.iis.net/downloads/microsoft/application-initialization)，该模块在 IIS 8.0 上也可用，可以通过预加载工作进程来减少第一次请求的响应时间

# php - phpseclib 使用自己的 CA 签署 CSR

> ID：13917206
> 
> 赞同：0
> 
> 时间：2012-12-17T15:37:56.020
> 
> 标签：php, ssl, certificate, phpseclib

我想与我的 CA 签署一份 CSR。我从[phpseclib 中获取了这段代码的一些部分：X.509 示例](http://phpseclib.sourceforge.net/x509/examples.html#casigned)

```
<?php
include('File/X509.php');
include('Crypt/RSA.php');
$c = $_POST['csr'];

$CAPrivKey = new Crypt_RSA();
$CAPrivKey->setPassword('PrivatePassword');
$CAPrivKey->loadKey("-----BEGIN RSA PRIVATE KEY-----
Proc-Type: 4,ENCRYPTED
DEK-Info: DES-EDE3-CBC,47EF178926906B55

lVtuTcJ1etpRaUT9086Vm5dsop8o5D92VVubcyhI268ZG4frRCBR4yuyORp+zdS2
[...]
gyx636VRV7aekLc6IFHJ56MzZRA/23izSooWqAJLTGEBrc4CWuodj9cc/+p3+9zC
-----END RSA PRIVATE KEY-----
");

$issuer = new File_X509();
$issuer->setPrivateKey($CAPrivKey);
$issuer->loadX509("-----BEGIN CERTIFICATE-----
MIIK0zCCBrugAwIBAgIJAPzTFDuzmcUcMA0GCSqGSIb3DQEBBQUAMIGhMQswCQYD
[...]
6F5Ji6w2IfD6xFhgvyTmqYgsae3+DEX6TAJosaI0EJQz6vYeubQb
-----END CERTIFICATE-----
");

$subject = new File_X509();

$subject->loadCSR($c); 

$x509 = new File_X509();
$x509->setStartDate('-1 month');
$x509->setEndDate('+1 year');

$result = $x509->sign($issuer, $subject);

echo $x509->saveX509($result);
?> 
```

在 $csr 中，我以这种方式格式化了 CSR：

-----开始证书申请----- MIGYMIGFAgAwbzELMAkGA1UEBgwCUEwxCjAIBgNVBAgMAS4xETAPBgNVBAcMCExlb2Frd2RhMQow [...] dGVzdC5wbDAQMAsGCSqGSIb3DQEBAQMBADALBgkqhkiG9w0BAQUDAQA=-----结束证书申请--

这段代码给了我错误：`Fatal error: Maximum execution time of 30 seconds exceeded in D:\wamp\www\Math\BigInteger.php on line 1659`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-17T19:25:19.053

密钥是多少位？你有安装 gmp 或 bcmath 或 openssl 吗？如果可用，Phpseclib 会使用其中的每一个来加快速度，如果不可用，它将使用它自己的内部实现，这是最慢的。根据 phpseclib.sourceforge.net 上的[math_biginteger 基准测试，](http://phpseclib.sourceforge.net/math/intro.html)即使使用 2048 位密钥，旧版本 php 上的纯 php 实现也需要很长时间。

# linux - Aptana Studio 3.3.0 crashes on start - Arch Linux

> ID：13917207
> 
> 赞同：0
> 
> 时间：2012-12-17T15:37:55.147
> 
> 标签：linux, aptana3

here's my system specs;

```
Arch Linux x86_64, 
Kernel: 3.6.10-1-ARCH, 
Gnome 3.6.2, 
xf86-video-nouveau 1.0.4-1, 
jdk7-openjdk 7.u9_2.3.3-1,  
jre7-openjdk 7.u9_2.3.3-1, 
jre7-openjdk-headless 7.u9_2.3.3-1,
lib32-libjpeg-turbo 1.2.1-1, libjpeg-turbo 1.2.1-1, libjpeg6-turbo 1.2.1-1
libpng12 1.2.50-2,
net-tools 1.60.20120804git-2,
unzip 6.0-6. 
```

Ok, so there's the list of requirements that are installed, version numbers as well. Upon launch, the loading/splash screen won't even show, and then nothing... it just dies out. I attempted to launch it "`aptana -v`" and no output in the shell. I have looked for any error logs in `~/` , but nothing is there.

Other steps I've done is to delete any configuration folders/files for eclipse and aptana-secure in `~/`. Also did a clean uninstall of just Aptana (not the dependencies), reinstall. Same result.

Any suggestions?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T10:51:34.303

下载中似乎存在混淆。32 位和 64 位交换了。如果您使用 32 位，请下载 64 位，反之亦然。希望它会很快得到修复。

请参阅以下问题：

*   [Aptana 64 位版本在使用 64 位 Oracle 7 java 的 64 位 Linux 操作系统上启动时崩溃](https://jira.appcelerator.org/browse/APSTUD-7619)
*   [Linux 安装程序 Aptana_Studio_3_Setup_Linux_x86_3.3.0.zip 包含项目的 x64 位版本](https://jira.appcelerator.org/browse/APSTUD-7620)

# c# - Windows 剪贴板不可用

> ID：13917209
> 
> 赞同：0
> 
> 时间：2012-12-17T15:38:13.717
> 
> 标签：c#, .net, textbox

请帮忙。问题出在剪贴板中。当程序从 VS（调试）启动时，它按预期工作，但如果我直接从操作系统启动程序 - TextDataFormat.Text 和 TextDataFormat.UnicodeText 格式是空字符串。同样的行为发生在 VS 2008 和 VS2012 下。我使用 Win 7 Home Premium（瑞典语），Service Pack 1。/Kriss

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T19:42:42.470

是我的防病毒程序（悄悄地）保护“不受信任”程序的剪贴板。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T15:57:15.350

如果是`System.Windows.Forms`，则可能基于预处理器指令设置以下内容：

```
textBox1.ShortcutsEnabled = false; 
```

狂野，但它可能会发生。检查 MSDN[链接](http://msdn.microsoft.com/en-us/library/system.windows.forms.textboxbase.shortcutsenabled%28v=vs.80%29.aspx)。

# java - iReport / jFreeChart - 结合 getItemPaint() 覆盖和系列颜色

> ID：13917210
> 
> 赞同：2
> 
> 时间：2012-12-17T15:38:19.093
> 
> 标签：java, jasper-reports, ireport, jfreechart, series

我正在尝试创建一个条形图，该条形图需要为 N 个类别使用特定的系列颜色，并为其他 1 个类别使用单独的颜色。这是一个例子：

![在此处输入图像描述](../Images/8c38da9ba554a92cdbdeda5790c714a2.png)

在样机中，类别 1-3 使用 5 种颜色的集合来呈现其系列，而类别 4 使用单一灰色。我的第一种方法是使用定制器类覆盖 getItemPaint() 方法，但我只能弄清楚如何在类别级别而不是系列级别上定义颜色。是否可以在类别和/或系列级别上定义颜色？就像是，

```
If category != "Category4"
    Use colors A, B, C, D, and E in category's series
Else
    Use color F in category's series 
```

我的另一个想法是结合 iReport 的系列颜色条形图属性和 getItemPaint() 覆盖；这样我就可以定义要在 iReport 中使用的 5 种颜色，并仅在类别等于“类别 4”的情况下使用 getItemPaint() 覆盖。到目前为止，我没有运气将两者结合起来。如果定义了覆盖，它将覆盖 iReport 的系列颜色属性。

用代码更新：

```
import java.awt.Color;
import java.awt.Paint;

import net.sf.jasperreports.engine.JRAbstractChartCustomizer;
import net.sf.jasperreports.engine.JRChart;

import org.jfree.chart.JFreeChart;
import org.jfree.chart.axis.NumberAxis;
import org.jfree.chart.labels.StandardCategoryItemLabelGenerator;
import org.jfree.chart.plot.CategoryPlot;
import org.jfree.chart.renderer.category.BarRenderer;
import org.jfree.data.category.CategoryDataset;

public class CustomSeriesColors extends JRAbstractChartCustomizer {

    static class CustomRenderer extends BarRenderer {

        private final Paint[] colors1;
        private final Paint[] colors2;

        public CustomRenderer(Paint[] colors1, Paint[] colors2) {
            this.colors1 = colors1;
            this.colors2 = colors2;
        }

        //Set custom colors for series according to category    
        @Override
        public Paint getItemPaint(int row, int column) {
            CategoryDataset l_jfcDataset = getPlot().getDataset();
            String l_rowKey = (String)l_jfcDataset.getRowKey(row);
            String l_colKey = (String)l_jfcDataset.getColumnKey(column);

            if ("Insufficient Data".equalsIgnoreCase(l_colKey)) {
                return this.colors2[row % this.colors1.length];
            } else {
                return this.colors1[row % this.colors1.length];
            }
        }
    }

    public void customize(JFreeChart chart, JRChart jasperChart) {

        // Get plot data.
        CategoryPlot categoryPlot = chart.getCategoryPlot();

        // Define colors to be used by series.
        Color[] color1 = new Color[]{new Color(238,0,0), new Color(255,153,0), new Color(211,190,91), new Color(153,204,102), new Color(0,170,0)};
        Color[] color2 = new Color[]{new Color(200,200,200)};

        // Call CustomRenderer using defined color sets.
        categoryPlot.setRenderer(new CustomRenderer(color1,color2));
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-17T17:01:02.593

您将需要编写一个自定义渲染器以通过覆盖来根据系列和类别选择“绘画”`getItemPaint`

```
@Override
public Paint getItemPaint(int series, int category) {
  if (category == 4)
    return this.colors2[series % this.colors1.length];
  else
    return this.colors1[series % this.colors1.length];
} 
```

将您的渲染器更新用于绘图：

```
Color[] color1 = new Color[]{Color.red, Color.green,Color.blue};
Color[] color2 = new Color[]{Color.gray,Color.gray.darker()};
plot.setRenderer(new CustomRenderer(color1,color2)); 
```

![在此处输入图像描述](../Images/767a9065ed211249b05e1217c30c6620.png)

这是完整的代码

```
import java.awt.Color;
import java.awt.Dimension;
import java.awt.Paint;

import org.jfree.chart.ChartFactory;
import org.jfree.chart.ChartPanel;
import org.jfree.chart.JFreeChart;
import org.jfree.chart.axis.NumberTickUnit;
import org.jfree.chart.axis.SymbolAxis;
import org.jfree.chart.plot.CategoryPlot;
import org.jfree.chart.plot.PlotOrientation;
import org.jfree.chart.renderer.category.BarRenderer;
import org.jfree.data.category.CategoryDataset;
import org.jfree.data.category.DefaultCategoryDataset;
import org.jfree.ui.ApplicationFrame;
import org.jfree.ui.RefineryUtilities;

public class BarChartDemo7 extends ApplicationFrame {

    static class CustomRenderer extends BarRenderer {

        private final Paint[] colors1;
        private final Paint[] colors2;

        public CustomRenderer(Paint[] colors1,Paint[] colors2) {
            this.colors1 = colors1;
            this.colors2 = colors2;
        }

        @Override
        public Paint getItemPaint(int series, int category) {
            if (category == 4)
                return this.colors2[series % this.colors1.length];
            else
                return this.colors1[series % this.colors1.length];
        }
    }

    public BarChartDemo7(String title) {
        super(title);
        CategoryDataset dataSet=createDataset();
        JFreeChart chart=createChart(dataSet);
        ChartPanel panel=new ChartPanel(chart);
        panel.setPreferredSize(new Dimension(800,800));
        setContentPane(panel);
    }

    private static CategoryDataset createDataset() {
        // row keys...
        final String series1 = "ABC";
        final String series2 = "XYZ";

        // column keys...
        final String category1 = "A";
        final String category2 = "B";
        final String category3 = "C";
        final String category4 = "D";
        final String category5 = "E";
        final String category6 = "F";

        // create the dataset...
        final DefaultCategoryDataset dataset = new DefaultCategoryDataset();

        dataset.addValue(35, series1, category1);
        dataset.addValue(37, series1, category2);
        dataset.addValue(40, series1, category3);
        dataset.addValue(52, series1, category4);
        dataset.addValue(52, series1, category5);
        dataset.addValue(52, series1, category6);

        dataset.addValue(30, series2, category1);
        dataset.addValue(32, series2, category2);
        dataset.addValue(35, series2, category3);
        dataset.addValue(45, series2, category4);
        dataset.addValue(30, series2, category1);
        dataset.addValue(32, series2, category2);
        dataset.addValue(35, series2, category5);
        dataset.addValue(45, series2, category4);

        return dataset;
    }

    private static JFreeChart createChart(CategoryDataset dataset) {

        // create the chart...
        JFreeChart chart = ChartFactory.createBarChart(
            "ABC",             
            "",                      
            "",                         
            dataset,                         
            PlotOrientation.VERTICAL,        
            true,                            
            true,                            
            false                            
        );

        chart.setBackgroundPaint(Color.white);

        CategoryPlot plot = (CategoryPlot) chart.getPlot();
        plot.setBackgroundPaint(Color.WHITE);
        plot.setDomainGridlinePaint(Color.BLACK);
        plot.setRangeGridlinePaint(Color.BLACK);

        //Provide a new Symbol Axis
        String[] grade =  new String[101];
        for (int i = 0 ; i < grade.length ; i ++){
            grade[i] = Integer.toString(i);
        }
        grade[0] = "Poor    0";
        grade[50] = "Avg.   50";
        grade[100] = "Best   100";
        SymbolAxis rangeAxis = new SymbolAxis("", grade);
        rangeAxis.setTickUnit(new NumberTickUnit(10));
        rangeAxis.setAutoRange(false);
        rangeAxis.setRange(0, 100);
        plot.setRangeAxis(rangeAxis);

        Color[] color1 = new Color[]{Color.red, Color.green,Color.blue};
        Color[] color2 = new Color[]{Color.gray,Color.gray.darker()};
        plot.setRenderer(new CustomRenderer(color1,color2));
        return chart;
    }

    public static void main(String[] args) {
        BarChartDemo7 demo = new BarChartDemo7("ABC");
        demo.pack();
        RefineryUtilities.centerFrameOnScreen(demo);
        demo.setVisible(true);
    }
} 
```

# sql - 为 ER 图建模

> ID：13917225
> 
> 赞同：0
> 
> 时间：2012-12-17T15:39:05.323
> 
> 标签：sql, database, entity-relationship

这个想法是为一个小型应用程序设计一个简单的 ER 图。

该应用程序是一个问答系统。每个用户都应该能够以文本格式提出问题，然后其他用户可以使用图像发布答案。

最后，提出问题的用户应该能够选择一张图片作为正确答案。

所以到目前为止我的设计是三个表：

*   具有属性 id、用户名、电话、位置、实名、密码的 USER。
*   带有属性 id、描述、时间、状态的问题。
*   带有属性 id、地址的 IMAGE

IMAGE 和 USER 以及 QUESTION 和 USER 之间存在多对一的关系。

但是，我不知道 IMAGE 和 QUESTION 之间的关系应该如何。

它们之间应该存在一对一的关系吗？这是一个好的设计吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T15:45:08.503

如果用户应该能够选择一个图像作为问题的正确答案，这意味着应该有多个图像可供选择 - 所以不，两者之间的一对一关系不是一个好主意。

如果任何给定的图像仅用于一个问题，那么这将表明问题与图像之间存在一对多的关系。如果相同的图像可以用于许多问题，那么这意味着多对多的关系。

当然，您需要在问题表上有一个“选定图像”属性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-10-10T23:46:47.267

```
USER with attributes id, username, phone, location, realname, password.
QUESTION with attributes id, desription, time, status.
IMAGE with attributes id, address

Image_question 1:n ( One question can have multiples images)

User_questions 1:n 
```

# magento - 导航到不同类别时，如何清除要比较的产品？

> ID：13917228
> 
> 赞同：0
> 
> 时间：2012-12-17T15:39:14.397
> 
> 标签：magento, magento-1.7

当我从一个类别导航到另一个类别时，我希望能够清楚地比较“篮子”。

这可能吗？我通过谷歌搜索，找不到任何人询问这种功能。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T17:14:50.007

这绝对是可能的，以下是我将采取的步骤：

1）当用户访问任何类别时，将类别 ID 存储在会话中（您可以通过查看这个问题[How do I save value in my own session variable in Magento?](https://stackoverflow.com/questions/3340982/how-do-i-save-value-in-my-own-session-variable-in-magento)来做到这一点）

2）在类别存储在Magento的会话变量之前检查它是否已经设置，如果是，将其与当前id进行比较

3）如果不同，则获取比较块中的所有当前项目（您需要获取块 Mage_Catalog_Block_Product_Compare_List 并调用 getItems() 函数以获取项目数组）

4）从区块中移除产品（需要获取Mage_Catalog_Model_Product_Compare_List模型并调用removeProduct函数）

如果您需要进一步的帮助，请告诉我们

# javascript - 使用淡出循环显示和隐藏 div 的工具提示定时教程

> ID：13917233
> 
> 赞同：1
> 
> 时间：2012-12-17T15:39:22.290
> 
> 标签：javascript, jquery, loops, html

所以我创建了一个在线工具提示教程，并将每个工具提示设置为以 7 秒的间隔淡入和淡出。一切都很好，除了当第一次打开交互式教程的按钮时，所有的工具提示都会在屏幕上闪烁一秒钟——我不希望发生这种情况。关于如何消除这种情况发生的任何想法？

另外，我想从一个工具提示淡出到下一个淡入的时间添加 300 毫秒的重叠。如何调整我的代码以允许这样做？

这是我控制淡入淡出循环的 Javascript：

```
<script src="jquery.js"></script>
<script type="text/javascript">
    $(document).ready(function(){
    fadeLoop()
    function fadeLoop() {

        var counter = 0,
            divs = $('.fader').hide(),
            dur = 300;

        function showDiv() {
            $("div.fader").fadeOut(dur) // hide all divs
                .filter(function(index) {
                    return index == counter % divs.length;
                }) // figure out correct div to show
                .delay(dur) // delay until fadeout is finished
                .fadeIn(dur); // and show it
            counter++;
        }; // function to loop through divs and show correct div
        showDiv(); // show first div    
        return setInterval(function() {
            showDiv(); // show next div
        }, 7 * 1000); // do this every 7 seconds    
    };

    $(function() {
        var interval;

        $("#start").click(function() {
            if (interval == undefined){
                interval = fadeLoop();
                $(this).val("Stop");
            }
            else{
                clearInterval(interval);
                $(this).val("Start");
                interval = undefined;
            }
        });
    });
    });
    </script> 
```

这是我的 HTML：

```
<!--#include file="header.asp"-->
<% if Request("interactive") = "on" then %>
<form name="tutorial">

<div class="fader"><div class="arrow-w arrowlocation1" style="font-size:1em;" ></div><div id="tutorial1" class="tutorial createquestion1">Start by creating a title and selecting a folder for your question to be stored in.</div></div>

<div class="fader"><div class="arrow-w arrowlocation2" style="font-size:1em;" ></div>
<div id="tutorial2" class="tutorial createquestion2">Categories are key to your reporting effectiveness, be sure to include categories that relate to this question.</div></div>

<div class="fader"><div class="arrow-w arrowlocation3" style="font-size:1em;" ></div>
<div id="tutorial3" class="tutorial createquestion3">Select your options and/or upload an attachment (file, video or audio).</div></div>

<div class="fader"><div class="quicktiptitle quicktiplocation4">QUICK TIP</div><div class="arrow-n arrowlocation4" style="font-size:1em;" ></div>
<div id="tutorial4" class="quicktip createquestion4">To create questions easier update your question preferences in your account area options.</div></div>

<div class="fader"><div class="arrow-w arrowlocation5" style="font-size:1em;" ></div>
<div id="tutorial5" class="tutorial createquestion5">Your rationale can be used to provide feedback to students on this question and you also can use internal comment to track notes on changes, updates, textbook information and more.</div></div>

<div class="fader"><div class="arrow-e arrowlocation6" style="font-size:1em;" ></div>
<div id="tutorial6" class="tutorial createquestion6">Write your questions, answers and you are ready to go.</div></div>

<div class="fader"><div class="arrow-w arrowlocation7" style="font-size:1em;" ></div>
<div class="quicktiptitle quicktiplocation7">QUICK TIP</div>
<div id="tutorial7" class="quicktip createquestion7"> Click on this icon to open and close sections that you don't use. These will remain closed whenever you visit this page until you open them again.</div></div></form> 
```

有什么想法吗？

克里斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T15:48:14.790

当我在[jsFiddle](http://jsfiddle.net/Mv3da/)中运行它时，它似乎运行良好。`$(document).ready()`也许在火灾发生之前 div 是可见的？您最初可以尝试使用 css 隐藏*.fade* div，以便在运行 jQuery 脚本之前不会显示它们。

## 编辑

好的，在您发表评论后，我在[jsFiddle](http://jsfiddle.net/Mv3da/)中对此进行了测试，它似乎可以解决您的问题。基本上，我用 CSS 隐藏 div，然后在函数调用之前将可见性设置为*可见。*`hide()`

所以在 CSS 中：

```
.fader
{
    visibility:hidden;
}​ 
```

然后在脚本中，替换：

```
divs = $('.fader').hide() 
```

和：

```
divs = $('.fader').css('visibility','visible').hide() 
```

然后它应该工作

# java - Android SeekBar 扩展

> ID：13917239
> 
> 赞同：0
> 
> 时间：2012-12-17T15:39:52.583
> 
> 标签：java, android, seekbar

我的活动中有多个 Seek Bars (4)，每个都有一个 textView 假设显示每个 SeekBar 的进度。我想扩展 SeekBar 类并向它的构造函数添加一个 TextView 参数，这样我就可以绑定这两个 -> SeekBar 和 TextView 。这是我扩展的 SeekBar 类：

```
import android.content.Context;
import android.widget.SeekBar;
import android.widget.TextView;

public class SeekBarPlus extends SeekBar {
    private TextView numberOfDrills;

    public SeekBarPlus(Context context, TextView text) {
        super(context);
        // TODO Auto-generated constructor stub
        numberOfDrills = (TextView) text;   
    }

    public void onStartTrackingTouch(SeekBar seekBar) {
        // TODO Auto-generated method stub

    }

    public void onStopTrackingTouch(SeekBar seekBar) {
        // TODO Auto-generated method stub

    }

    public void onProgressChanged(SeekBar seekBar, int progress,
            boolean fromUser) {
        // TODO Auto-generated method stub
        numberOfDrills.setText(progress); 
    }

} 
```

什么是上下文选项？

现在这是我的 MainActivity：

```
package com.simplemathgame;

import android.os.Bundle;
import android.app.Activity;
import android.view.Menu;
import android.widget.SeekBar;
import android.widget.SeekBar.OnSeekBarChangeListener;
import android.widget.TextView;
import com.simplemathgame.SeekBarPlus;

public class MainActivity extends Activity{

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        TextView numberOfAddDrills = (TextView) findViewById(R.id.add_drills_number);
        TextView numberOfSubDrills = (TextView) findViewById(R.id.sub_drills_number);
        TextView numberOfMulDrills = (TextView) findViewById(R.id.mul_drills_number);
        TextView numberOfDivDrills = (TextView) findViewById(R.id.div_drills_number);

                SeekBarPlus addSeekBar = SeekBarPlus((SeekBar) findViewById(R.id.add_seek_bar), numberOfAddDrills);
    SeekBarPlus subSeekBar = SeekBarPlus((SeekBar) findViewById(R.id.sub_seek_bar), numberOfAddDrills);
    SeekBarPlus mulSeekBar1 = SeekBarPlus((SeekBar) findViewById(R.id.mul_seek_bar), numberOfAddDrills);
    SeekBarPlus divSeekBar1 = SeekBarPlus((SeekBar) findViewById(R.id.div_seek_bar), numberOfAddDrills);

    }   
} 
```

我不知道怎么弄！任何建议，将不胜感激！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T15:44:47.193

尝试在您的自定义 SeekBar 中使用 setter 而不是构造函数：

```
public void setTextView(TextView text) {
    numberOfDrills = text;   
} 
```

然后在您的活动中，使用

```
SeekBarPlus subSeekBar = (SeekBarPlus) findViewById(R.id.sub_seek_bar);
subSeekBar.setTextView(numberOfAddDrills); 
```

您还可以将普通的 Seekbar 与 OnSeekBarChangeListener 一起使用：

```
SeekBar subSeekBar = (SeekBar) findViewById(R.id.sub_seek_bar);
subSeekBar.setOnSeekBarChangeListener(new OnSeekBarChangeListener() {
            @Override
            public void onStopTrackingTouch(SeekBar seekBar) { }

            @Override
            public void onStartTrackingTouch(SeekBar seekBar) { }

            @Override
            public void onProgressChanged(SeekBar seekBar, int progress,
                    boolean fromUser) {
                numberOfDrills.setText(String.valueOf(progress)); 
            }
        }); 
```

# c++ - Boost::serialize - 反序列化对象向量？

> ID：13917243
> 
> 赞同：1
> 
> 时间：2012-12-17T15:40:27.893
> 
> 标签：c++, serialization, boost

我最近想序列化一个包含对象向量的类。我在文档中读到，如果我包含#include <boost/serialization/vector.hpp>，我将能够使用简单的 & 运算符来完成。不幸的是，尽管编译器同意构建序列化代码，但它不允许我编译反序列化测试用例。那里可能有什么问题？

```
#include <boost/archive/text_oarchive.hpp>
#include <boost/archive/text_iarchive.hpp>
#include <boost/serialization/vector.hpp>

#include <fstream>

class A
{
        friend class boost::serialization::access;
        template<class Archive>
                void serialize(Archive & ar, const unsigned int version) const
                {
                }
};

class B
{

        friend class boost::serialization::access;

        template<class Archive>
                void serialize(Archive & ar, const unsigned int version) const
                {
                        ar & a;
                }

        std::vector<A> a;
};

int main()
{
        std::ifstream ifs("filename");
        boost::archive::text_iarchive ia(ifs);
        B b;
        ia >> b;

} 
```

以下是编译器的错误：

```
> make testcase
g++ -ggdb -fpermissive    testcase.cpp   -o testcase
In file included from /usr/include/boost/archive/detail/oserializer.hpp:67:0,
                 from /usr/include/boost/archive/detail/interface_oarchive.hpp:23,
                 from /usr/include/boost/archive/detail/common_oarchive.hpp:22,
                 from /usr/include/boost/archive/basic_text_oarchive.hpp:32,
                 from /usr/include/boost/archive/text_oarchive.hpp:31,
                 from testcase.cpp:1:
/usr/include/boost/archive/detail/check.hpp: In instantiation of ‘void boost::archive::detail::check_const_loading() [with T = const std::vector<A>]’:
/usr/include/boost/archive/detail/iserializer.hpp:577:5:   required from ‘void boost::archive::load(Archive&, T&) [with Archive = boost::archive::text_iarchive; T = const std::vector<A>]’
/usr/include/boost/archive/detail/common_iarchive.hpp:66:9:   required from ‘void boost::archive::detail::common_iarchive<Archive>::load_override(T&, int) [with T = const std::vector<A>; Archive = boost::archive::text_iarchive]’
/usr/include/boost/archive/basic_text_iarchive.hpp:65:9:   required from ‘void boost::archive::basic_text_iarchive<Archive>::load_override(T&, int) [with T = const std::vector<A>; Archive = boost::archive::text_iarchive]’
/usr/include/boost/archive/text_iarchive.hpp:82:9:   required from ‘void boost::archive::text_iarchive_impl<Archive>::load_override(T&, int) [with T = const std::vector<A>; Archive = boost::archive::text_iarchive]’
/usr/include/boost/archive/detail/interface_iarchive.hpp:60:9:   required from ‘Archive& boost::archive::detail::interface_iarchive<Archive>::operator>>(T&) [with T = const std::vector<A>; Archive = boost::archive::text_iarchive]’
/usr/include/boost/archive/detail/interface_iarchive.hpp:67:35:   [ skipping 9 instantiation contexts ]
/usr/include/boost/archive/detail/iserializer.hpp:592:5:   required from ‘void boost::archive::load(Archive&, T&) [with Archive = boost::archive::text_iarchive; T = B]’
/usr/include/boost/archive/detail/common_iarchive.hpp:66:9:   required from ‘void boost::archive::detail::common_iarchive<Archive>::load_override(T&, int) [with T = B; Archive = boost::archive::text_iarchive]’
/usr/include/boost/archive/basic_text_iarchive.hpp:65:9:   required from ‘void boost::archive::basic_text_iarchive<Archive>::load_override(T&, int) [with T = B; Archive = boost::archive::text_iarchive]’
/usr/include/boost/archive/text_iarchive.hpp:82:9:   required from ‘void boost::archive::text_iarchive_impl<Archive>::load_override(T&, int) [with T = B; Archive = boost::archive::text_iarchive]’
/usr/include/boost/archive/detail/interface_iarchive.hpp:60:9:   required from ‘Archive& boost::archive::detail::interface_iarchive<Archive>::operator>>(T&) [with T = B; Archive = boost::archive::text_iarchive]’
testcase.cpp:35:8:   required from here
/usr/include/boost/archive/detail/check.hpp:162:1: error: invalid application of ‘sizeof’ to incomplete type ‘boost::STATIC_ASSERTION_FAILURE<false>’ 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-17T15:58:46.967

`serialize`成员函数不应该是`const`. 它用于序列化，但也用于反序列化。

# c# - 使用 NewtonSoft 在一行中生成 JSON 对象

> ID：13917247
> 
> 赞同：65
> 
> 时间：2012-12-17T15:40:47.600
> 
> 标签：c#, json, json.net

我正在使用 JSON 库[NewtonSoft](http://nuget.org/packages/newtonsoft.json)生成 JSON 字符串：

```
JObject out = JObject.FromObject(new
            {
                typ = "photos"
            });

            return out.ToString(); 
```

输出：

```
{
  "typ": "photos"
} 
```

我的问题：是否可以在一行中获得输出，例如：

```
{"typ": "photos"} 
```

* * *

## 回答 #1

> 赞同：85
> 
> 时间：2012-12-17T15:52:11.980

[`JObject.ToString()`](http://james.newtonking.com/projects/json/help/html/M_Newtonsoft_Json_Linq_JToken_ToString_1.htm)您可以使用[`Formatting`](http://james.newtonking.com/projects/json/help/html/T_Newtonsoft_Json_Formatting.htm)作为参数的重载：

```
JObject obj = JObject.FromObject(new
{
    typ = "photos"
});

return obj.ToString(Formatting.None); 
```

* * *

## 回答 #2

> 赞同：76
> 
> 时间：2012-12-17T15:43:55.137

```
var json = JsonConvert.SerializeObject(new { typ = "photos" }, Formatting.None); 
```

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2018-03-29T05:29:30.993

这是一个缩小 JSON 的单行程序，您只有一个字符串：

```
var myJson = "{\"type\"    :\"photos\"               }";
JObject.Parse(myJson).ToString(Newtonsoft.Json.Formatting.None) 
```

输出：

```
{"type":"photos"} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-17T15:44:49.253

我不确定这是否是您的意思，但我所做的是：

```
string postData = "{\"typ\":\"photos\"}"; 
```

编辑：搜索后我在 Json.Net 上找到了[这个：](http://james.newtonking.com/projects/json/help/index.html?topic=html/T_Newtonsoft_Json_Linq_JObject.htm)

```
string json = @"{
  CPU: 'Intel',
  Drives: [
    'DVD read/writer',
    '500 gigabyte hard drive'
  ]
}";

JObject o = JObject.Parse(json); 
```

也许你可以使用[这个](http://james.newtonking.com/pages/json-net.aspx)网站上的信息。

但我不确定，如果输出会在一行上......祝你好运！

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-05-11T11:58:06.543

如果这里有人不想在 MVC 中使用任何外部库，他们可以使用内置的`System.Web.Script.Serialization.JavaScriptSerializer`

一个衬里将是：

```
var JsonString = new JavaScriptSerializer().Serialize(new { typ = "photos" }); 
```

# imagemagick - 图像魔术叠加图像

> ID：13917250
> 
> 赞同：8
> 
> 时间：2012-12-17T15:40:57.637
> 
> 标签：imagemagick

我有两个图像，一个是覆盖，假设图像 A 具有透明度，另一个图像 B，我必须将覆盖图像 A 放在图像 B 上，以便图像 B 的某些部分通过图像 A 的透明部分可见，我还必须根据一些参数移动图像 B，如何使用图像魔法实现这一点

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-18T10:14:34.107

我能够通过以下命令实现它

```
composite -compose Dst_Over -geometry 520x320+20+80 image.jpeg overlay.png final.png 
```

这里的关键`-compose Dst_Over`，将图像置于背景下 ( `overlay.png`)，几何选项可让您移动图像。

# php - PHP 为什么 EOM 不能包含 PHP 函数？

> ID：13917256
> 
> 赞同：0
> 
> 时间：2012-12-17T15:41:07.130
> 
> 标签：php, swiftmailer, heredoc

> **可能重复：**
> [在 HEREDOC 字符串中调用 PHP 函数](https://stackoverflow.com/questions/104516/calling-php-functions-within-heredoc-strings)

我正在使用 Swiftmailer PHP 创建一个完整的订单页面。当客户登陆此页面时，我使用 PHP 文件的包含。

此页面文件包含发送给客户的 SwiftMailer EOM HTML。但是我有块的 HTML 部分，所以标题是通过一个称为标题的函数，订单总数也是相同的。我希望能够在 EOM 中包含 EOM 函数。这可能吗？

```
Id  =       46088;

// MAIL FUNCTION
function mailToSend($Id){

// EOM CAN'T BE TABBED
$html = <<<EOM
<!DOCTYPE html>
<html lang="en">
<head>
</head>
<body>
getHeader($Id);
getOrderTotalBoxTable($Id);
</body>
</html>
EOM;

}

mailToSend(46088); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T15:46:17.160

你说的是[**Heredocs**](http://php.net/manual/en/language.types.string.php#language.types.string.syntax.heredoc)，它们不支持函数插值，只支持[变量插值](http://php.net/manual/en/language.types.string.php#language.types.string.parsing)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T16:00:40.727

就像@deceze 说的那样，你不能，但这会起作用（将@xenon 评论扩展到一个例子）：

```
function getHeader($Id = '')
{
    $text = '';
    $text.=' Your first line of text, store it in an variable <br>';
    $text.= 'Hello '.$Id.'<br>';
    $text.='Your last text to be returned<br>';
    return $text;
}

// MAIL FUNCTION
function mailToSend($Id){

    $getHeader = getHeader($Id);
    $getOrderTotalBoxTable = getOrderTotalBoxTable($Id);

    // EOM CAN'T BE TABBED
$html = <<<EOM
    <!DOCTYPE html>
    <html lang="en">
    <head>
    </head>
    <body>
    $getHeader;
    $getOrderTotalBoxTable;
    </body>
    </html>
EOM;

}

mailToSend(46088); 
```

# c# - Crystal 报表异常：“报表应用程序服务器失败”

> ID：13917257
> 
> 赞同：1
> 
> 时间：2012-12-17T15:41:09.690
> 
> 标签：c#, visual-studio-2010, crystal-reports, xcelsius

我正在运行以下代码：

```
ReportDocument crystalReport = new ReportDocument();
crystalReport.Load(reportPath);
DataTable dtReportData;
DbUtils.GetSqlResult(dataQuery, out dtReportData);
crystalReport.SetDataSource(dtReportData);

var crDiskFileDestinationOptions = new DiskFileDestinationOptions();
var crFormatTypeOptions = new PdfRtfWordFormatOptions();
crDiskFileDestinationOptions.DiskFileName = pdfFilePath;
crystalReport.PrintOptions.PaperOrientation = PaperOrientation.Landscape;

var crExportOptions = crystalReport.ExportOptions;
{
    crExportOptions.ExportDestinationType = ExportDestinationType.DiskFile;
    crExportOptions.ExportFormatType = ExportFormatType.PortableDocFormat;
    crExportOptions.DestinationOptions = crDiskFileDestinationOptions;
    crExportOptions.FormatOptions = crFormatTypeOptions;
}

crystalReport.Export(); //PROGRAM FAILS HERE WHEN THE DATATABLE CONTAINS 900 OR MORE ROWS
crystalReport.Close(); 
```

当尝试将具有超过 900 行的表作为数据源的报告导出为 pdf 时，它会失败。例外是：

> 报表应用程序服务器失败

堆栈跟踪是：

> 在 CrystalDecisions.ReportAppServer.ConvertDotNetToErom.ThrowDotNetException(Exception e) 在 CrystalDecisions.ReportSource.EromReportSourceBase.ExportToStream(ExportRequestContext reqContext) 在 CrystalDecisions.CrystalReports.Engine.FormatEngine.ExportToStream(ExportRequestContext reqContext) 在 CrystalDecisions.CrystalReports.Engine.FormatEngine.Export(ExportRequestContext) reqContext) 在 CrystalDecisions.CrystalReports.Engine.FormatEngine.Export() 在 CrystalDecisions.CrystalReports.Engine.ReportDocument.Export()

知道如何解决这个问题吗？

***更新***

使用 Crystal Reports Viewer 时，我可以将报表导出为 PDF，而从 Crystal Reports 设计器执行相同操作会导致错误。导出水晶报表对象时，是否可以通过编程方式使用查看器的库？

# networking - LocationManager.NETWORK_PROVIDER 未在 ICS 中触发 onLocationChanged

> ID：13917261
> 
> 赞同：4
> 
> 时间：2012-12-17T15:41:20.023
> 
> 标签：networking, location, android-4.0-ice-cream-sandwich, provider

有谁知道 WI-FI 提供商的位置更改的事件侦听器发生了什么。我看到很多关于这个的问题，但没有正确的答案。

我做的一切都很好，它适用于旧版本的 android，但现在我将我的 SAMSUNG GALAXY TAB 10.1 更新为 ICS，它不再工作了。当他们将 UI 实现到 ICS 中时，也许这是 SAMSUNG（或我的移动提供商）的错误......

我正在像这样注册事件监听器（请记住，它在以前的 android 版本中运行良好，并且我还在设置中启用了所有位置服务）：

`locationManager.requestLocationUpdates(LocationManager.NETWORK_PROVIDER, 0, 0, loclistener); //refresh time and distance are to 0 so it should trigger location change event`

在此请求之后，我检查了是否启用了网络提供商，并且它显示的是它。

代码：

```
if (locationManager.isProviderEnabled(LocationManager.NETWORK_PROVIDER)) {
   Toast.makeText(this, "NETWORK PROVIDER enabled!", Toast.LENGTH_LONG).show();
   } 
```

如果有人有想法请帮助我...

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-10-03T09:11:11.793

这是已知问题：

设备重新启动后，网络位置提供程序工作正常，但一段时间后它停止更新。

[https://code.google.com/p/android/issues/detail?id=57707](https://code.google.com/p/android/issues/detail?id=57707)

不幸的是还没有解决方案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-19T16:05:29.043

为了跟踪网络提供商更新的频率，我将 onLocationChanged() 方法修改为以下内容：

```
public void onLocationChanged(Location location) {      
    dummyText.setText(location.toString() + "\n" + "Elapsed Time (ms): " + (lastTime - location.getTime()));
    lastTime = location.getTime();
} 
```

并补充说：

```
long lastTime = 0; 
```

...作为一个全局变量。

这将以毫秒为单位打印出更新之间的时间（在第一次修复之后 - 第一次修复将只打印来自第一个位置的负时间值）。

我在我的三星 Galaxy S3 上运行了上面的代码，网络提供商大约每 20 秒更新一次，所以代码看起来不错。

我还在 WiFi 上的 Samsung Dart（来自 T-mobile，但未激活）上运行此程序，网络提供商大约每 45 秒更新一次。

我还在 WiFi 上的三星 Nexus S 4G（来自 Sprint，但未激活）上运行此程序，网络提供商起初根本没有更新。重新启动设备似乎可以解决问题，现在它大约每 20 秒更新一次。

根据您的评论和我的经验，这个问题似乎在 OEM 之间甚至在同一 OEM 的设备型号之间有所不同。这可能是在 Android Jelly Bean 4.1 之前缺乏对 LocationListener 行为的严格执行的另一个怪癖。LocationListener 行为的严格执行最近才在 Android Jelly Bean 4.1 中开始，这在 Android 开发者文档中的第一个 requestLocationUpdates 方法签名中提到：

[http://developer.android.com/reference/android/location/LocationManager.html](http://developer.android.com/reference/android/location/LocationManager.html)

> 在 Jellybean 之前，minTime 参数只是一个提示，一些位置提供程序实现忽略了它。从 Jellybean 及以后，Android 兼容设备必须遵守 minTime 和 minDistance 参数。

此外，根据我的经验，在许多不同设备上，进行更新的设备上 NETWORK_PROVIDER 位置更新的刷新间隔相当固定在 20-30 秒左右。因此，您传递给 locationManager.requestLocationUpdates() 方法的 minTime 参数很可能会被忽略。

必须重新启动设备以获取网络提供商位置可能是由于未从提供此位置信息的 Google 服务器获得响应。不知道为什么重新启动修复它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-10-29T14:15:33.127

我遇到了同样的问题`NETWORK_PROVIDER`。原因是当您请求更新时，NETWORK_PROVIDER 不会为方法创建回调`onLocationChanged()`。您还需要调用`getLastKnownLocation(NETWORK_PROVIDER)`它才能开始更新位置。

奇怪的是，`GPS_PROVIDER`这不是必需的。

我希望这有帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-20T06:02:19.337

行。所以现在我让它工作了。这真的很奇怪。我重新启动了所有设备，现在它更新了。我不知道发生了什么，我真的很想知道这种奇怪行为的原因是什么。感谢@barbeau 的所有时间和帮助。

# java - 避免 Iterator ConcurrentModificationException 的方法

> ID：13917264
> 
> 赞同：2
> 
> 时间：2012-12-17T15:41:33.910
> 
> 标签：java, multithreading, concurrency, iterator

据我所知，当一个线程迭代集合而另一个线程修改集合时，有两种方法可以避免 ConcurrentModificationException。

1.  客户端锁定，基本上在迭代期间锁定集合。需要访问集合的其他线程将阻塞，直到迭代完成。
2.  克隆集合并迭代副本的“线程受限”。

我想知道还有其他选择吗？因为第一种方式显然是不可取的并且性能不佳，如果集合很大，其他线程可能会等待很长时间。第二种方式我不确定，因为我们克隆了集合，并迭代了副本，所以如果其他线程进来并修改原始的，那么复制的就会变得陈旧，对吧？这是否意味着我们需要通过克隆重新启动并在修改后再次迭代它？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-17T15:44:30.237

> 我想知道还有其他选择吗？

使用不会引发此异常的并发集合之一。相反，它们提供了弱一致性。即，添加或删除元素可能会在迭代时出现，也可能不会出现。

[http://docs.oracle.com/javase/tutorial/essential/concurrency/collections.html](http://docs.oracle.com/javase/tutorial/essential/concurrency/collections.html)

> java.util.concurrent 包包括许多对 Java 集合框架的补充。这些最容易通过提供的集合接口进行分类：
> 
> *   BlockingQueue 定义了一个先进先出数据结构，当您尝试添加到满队列或从空队列中检索时，该数据结构会阻塞或超时。
> *   ConcurrentMap 是 java.util.Map 的子接口，它定义了有用的原子操作。这些操作仅在键存在时删除或替换键值对，或仅在键不存在时添加键值对。使这些操作原子化有助于避免同步。ConcurrentMap 的标准通用实现是 ConcurrentHashMap，它是 HashMap 的并发模拟。
> *   ConcurrentNavigableMap 是 ConcurrentMap 的子接口，支持近似匹配。ConcurrentNavigableMap 的标准通用实现是 ConcurrentSkipListMap，它是 TreeMap 的并发模拟。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T15:43:36.090

您可以使用[java.util.Concurrent 中](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/package-summary.html)的类，例如[**CopyOnWriteArrayList**](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/CopyOnWriteArrayList.html)

# jsf-2 - Richfaces 文件上传 - this._q._curReq 为空

> ID：13917267
> 
> 赞同：0
> 
> 时间：2012-12-17T15:42:07.763
> 
> 标签：jsf-2, richfaces, websphere, websphere-8

我在 Websphere AS 8 上使用 JSF 2 和 Richfaces 4.2.3.Final（我认为它与 MyFaces 2.0.2 一起提供）

尝试使用 rich:fileUpload 上传文档时出现 javascript 错误

this._q._curReq 为空

我找到了这个解决方案

[https://issues.jboss.org/browse/RF-10128](https://issues.jboss.org/browse/RF-10128)

所以我下载了最新的 MyFaces 版本，将 myfaces-api.jar 和 myfaces-impl.jar 放在我的 lib 文件夹中，并将应用程序 classloader-order 配置为“首先加载本地类加载器的类（最后一个父类加载的类）”并重新启动我的服务器。它似乎根本没有效果，我仍然得到同样的错误。

WAS 上是否需要更多配置？

有人有同样的问题吗？

提前致谢

问候

编辑：有没有办法找出这个应用程序实际使用了哪个 Myfaces 实现？在服务器日志中，我只发现一条警告说 MyFaces 2 正在开发模式下运行，但它没有记录实际版本

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T13:56:06.217

好的，我找到了解决方案。实际上，我需要在 Websphere 中进行另一项配置。

管理控制台 - 应用程序 - Websphere Enterprise 应用程序 - appName - 管理模块 - moduleName - 类加载器顺序：首先使用本地类加载器加载的类（最后一个父类）

之后最新的 myfaces 版本正确应用并且 fileUpload 工作。

希望对有同样问题的人有所帮助。

# asp.net-mvc - 无法取回视图

> ID：13917268
> 
> 赞同：-1
> 
> 时间：2012-12-17T15:42:13.200
> 
> 标签：asp.net-mvc

我正在尝试重定向到操作并获得一个新视图（一个新页面），但没有成功。调试时，我到达控制器但没有获得视图（页面 URL 未更改）。

使用 Fiddler，我看到页面返回正确的视图结果，但在浏览器中 URL 没有更改！

当购物车为空时，我想重定向到一个新页面并显示错误消息。

```
 [HttpPost]
    public ActionResult PlaceOrder(DeliveryDetails deliveryDetails)
    {           
        if (UserCart.IsEmpty)
        {

            TempData["errorMsg"] = "Error: Cart is empty";
            return RedirectToAction("Index", "Error");
        }
        else
        {
             // do something..
        }

     } 
```

**错误控制器：**

```
 public ActionResult Index()
    {
        return View();
    } 
```

**错误控制器视图：**

```
 @TempData["errorMsg"] 
```

关于发生了什么的任何建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T08:18:28.383

这是一个 js 问题： event.isDefaultPrevented()

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T17:25:18.213

您的“ErrorController View:”是否应该命名为 Index.cshtml？如果不是，它应该是。

# java - 斯坦福解析器示例代码中的异常？

> ID：13917269
> 
> 赞同：2
> 
> 时间：2012-12-17T15:42:21.617
> 
> 标签：java, parsing, stanford-nlp

以下是使用 Stanford Parser API 从标记化字符串数组创建树输出的示例代码。此代码可[在此处](http://nlp.stanford.edu/nlp/javadoc/javanlp/edu/stanford/nlp/parser/lexparser/package-summary.html)获得。

```
import java.util.*;
import edu.stanford.nlp.trees.*;
import edu.stanford.nlp.parser.lexparser.LexicalizedParser;

class ParserDemo {
    public static void main(String[] args) {
        LexicalizedParser lp = LexicalizedParser.loadModel("englishPCFG.ser.gz"); //<--TODO   
        lp.setOptionFlags(new String[]{"-maxLength", "80", "-retainTmpSubcategories"});

        String[] sent = { "This", "is", "an", "easy", "sentence", "." };
        Tree parse = (Tree) lp.apply(Arrays.asList(sent));
        parse.pennPrint();
        System.out.println();

        TreebankLanguagePack tlp = new PennTreebankLanguagePack();
        GrammaticalStructureFactory gsf = tlp.grammaticalStructureFactory();
        GrammaticalStructure gs = gsf.newGrammaticalStructure(parse);
        List<TypedDependency> tdl = gs.typedDependenciesCCprocessed();
        System.out.println(tdl);
        System.out.println();

        TreePrint tp = new TreePrint("penn,typedDependenciesCollapsed");
        tp.printTree(parse);
    }
} 
```

上面的代码不起作用。它给了我这些错误：

```
Loading parser from serialized file englishPCFG.ser.gz ... done [1.6 sec].
Following exception caught during parsing:
    java.lang.ClassCastException: java.lang.String cannot be cast to     edu.stanford.nlp.ling.HasWord
    at edu.stanford.nlp.parser.lexparser.ExhaustivePCFGParser.parse(ExhaustivePCFGParser.java:357)
    at edu.stanford.nlp.parser.lexparser.LexicalizedParserQuery.parse(LexicalizedParserQuery.java:247)
    at edu.stanford.nlp.parser.lexparser.LexicalizedParser.apply(LexicalizedParser.java:283)
    at Test.main(Test.java:15)
Recovering using fall through strategy: will construct an (X ...) tree.
Exception in thread "main" java.lang.ClassCastException: java.lang.String cannot be   cast to edu.stanford.nlp.ling.HasWord
    at edu.stanford.nlp.parser.lexparser.LexicalizedParser.apply(LexicalizedParser.java:298)
    at Test.main(Test.java:15)

Process completed. 
```

谁能解释一下这个异常报告？

# .net - 从 Lotus Notes XML 富文本元素中提取文本

> ID：13917270
> 
> 赞同：1
> 
> 时间：2012-12-17T15:42:23.760
> 
> 标签：.net, xml, rtf, lotus, richtext

我要将 Lotus Notes 数据库的内容迁移到 SharePoint。整个数据库导出为 XML 文件（此要求无法更改），我必须解析这些 XML 文件并将数据插入 SharePoint。

让我失望的是包含富文本的元素。XML 元素包含在 Lotus Notes 中使用 DXL 的字段中使用的确切富文本格式的 XML 表示，如[http://publib.boulder.ibm.com/infocenter/domhelp/v8r0/index.jsp?topic=%中所述2Fcom.ibm.designer.domino.main.doc%2FH_PARAGRAPH_DEFINITIONS_ELEMENT_XML.html](http://publib.boulder.ibm.com/infocenter/domhelp/v8r0/index.jsp?topic=%2Fcom.ibm.designer.domino.main.doc%2FH_PARAGRAPH_DEFINITIONS_ELEMENT_XML.html)

我不需要保留文本的实际格式（除非这与检索纯文本同样容易），但如果我只是提取包含富文本的 XML 元素的值（使用 LinqToXML），我会得到纯文本没有不可接受的换行符。此外，嵌入的图像在检索到的文本中显示为 base64 编码的字符串（它们嵌入在 XML 中）。

谁能指导我如何从 XML 元素中提取文本，或者作为可以插入到 RTF 文件中的正确 RTF 格式，或者作为包含正确换行符且不包含嵌入图像的纯文本？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-20T01:24:35.187

显然，您处理的 XML 是 DXL。更优雅的方法是使用 XSL 转换将其转换为 HTML。您可能会发现随[PD4ML 工具](http://pd4ml.com/command-line-dxl-to-pdf-converter.htm)提供的所需 XSLT 样式表。从 HTML 格式可以将文档转换为 PDF、RTF 或使用 PD4ML 的图像（或者可能使用其他工具转换为另一种格式）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T18:16:15.093

您可以将富文本项目内容转换为 HTML/MIME，这是另一种支持的富文本项目格式。

或者，您可以创建在 HTTP URL 中显示富文本内容的 XPage 或表单，并在导出 XML 中引用该内容。

*   帕努

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-21T08:29:46.313

我（现在）刚刚使用带有以下表达式的正则表达式剥离了所有 XML 标记和不需要的嵌入元素的富文本 xml 元素：

```
 //Removes all attachmentref elements
        newString = new Regex(@"(<attachmentref(.|\n)*</attachmentref>)").Replace(newString, "");
        //Removes all formula elements
        newString = new Regex(@"(<formula(.|\n)*</formula>)").Replace(newString, "");
        //Removes all xml tags (<par>, <pardef>, <table> etc). Be aware that this also removes any content in the table
        newString = new Regex("<(.)*/>").Replace(newString, "");
        newString = new Regex("<(.)*>").Replace(newString, "");
        newString = new Regex("</(.)*>").Replace(newString, ""); 

        //Trims the text to tidy up the many \n, \r and white-spaces introduced by removing the xml tags. 
        newString = new Regex(@"\r").Replace(newString, "\n");
        newString = new Regex(@"[ \f\r\t\v]+\n").Replace(newString, "\n");
        newString = new Regex(@"\n{2,}").Replace(newString, "\n");

        //makes < and > appear correctly in the text.
        newString = newString.Replace("&lt;", "<").Replace("&gt;", ">"); 
```

它不漂亮，但至少文本是可读的并且保留了一些换行符。

# tridion - 将大量内容上传到内容组件

> ID：13917271
> 
> 赞同：4
> 
> 时间：2012-12-17T15:42:30.657
> 
> 标签：tridion, tridion-2011

我需要将 Tridion (2011 SP1 HR1) 中的大型 XML 文件（~8MB = ~28,000 行）发布到网络服务器上。

过去，我通过将 XML 文件上传到 Tridion 中的多媒体组件，然后使用简单的组件模板在发布时呈现文件的内容，来使用类似大小的 XML 文档完成此操作。但是，在我正在工作的 Tridion 实现中，已经有一种机制可以使用非常简单的“代码”内容（不是多媒体）组件将内容发布到站点，该组件具有一个用于“代码”的纯文本字段。

我遇到的问题是，当我尝试将如此大量的内容粘贴到“代码”组件中时，浏览器变得无响应/崩溃。有谁知道一种方法（在浏览器中或在 Tridion 中）使这成为可能？我确实可以选择添加一个组件模板来将其作为多媒体组件进行处理，但如果我能让现有机制正常工作，我将不愿意这样做。

我已经在 IE、Chrome 和 Firefox 中尝试过。我也尝试过使用 WebDav 上传它，但也没有成功。我们已经将服务器上的 HTTP 上传大小增加到 0.5GB 以容纳大型二进制文件。

谢谢，乔纳森

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-17T15:57:27.053

首先想到的是 CoreService 配置中的 WCF 大小限制。

这些是在 CME 的 Web.Config 中设置的（默认情况下）：C:\Program Files (x86)\Tridion\web\WebUI\WebRoot

# events - 在 jQuery 中，如何使用默认值创建自定义事件？

> ID：13917274
> 
> 赞同：0
> 
> 时间：2012-12-17T15:42:33.197
> 
> 标签：events, jquery

显然，jQuery 中的 Event 对象有这个有用`preventDefault()`的方法可以防止默认行为。

这通常用于防止点击事件执行浏览器默认行为。

似乎它对自定义事件也很有用。

我想通过这种行为实现的任务是一个单独的问题，但我将把它作为我正在寻找的行为的一个例子来解释：

我有一个简单的插件，可以从 div 中创建一个弹出窗口。我在互联网上找到它。

```
$(selector).pop(); 
```

当您单击弹出窗口的子项以外的任何内容时，我已经将其关闭，并防止单击元素上的默认单击行为。

```
function closeInactivePop() {
    var foundAny = false;
    jQ.each(function (i) {
        var $this = $(this);

        if ($this.hasClass('active') && ! $this.data('activePop')) {
            $this.removeClass('active');
            foundAny = true;
        }
    });
    return foundAny;
}

$('body').click(function(){ 
    // If we closed any, cancel the propagation. Otherwise let it be.
    if (closeInactivePop()) {
        $(document).trigger('jQuery.pop.menuClosed');
        return false;
    }
}); 
```

（现在我粘贴了它，我意识到我可以做得更好一点，但尽管如此）。

现在我添加了一个新插件，它在弹出窗口中绘制一个颜色选择器。除了这个颜色选择器创建的 DOM 不在弹出窗口内；它只是在视觉上在里面。DOM 结构是独立的。

在上述黑客攻击中，我实际上更愿意触发*另一个*事件，其默认行为是关闭弹出窗口。

```
function closeInactivePop() {
    var foundAny = false;
    jQ.each(function (i) {
        var $this = $(this);

        if ($this.hasClass('active') && ! $this.data('activePop')) {
            $(document).trigger('jQuery.pop.menuClosed');
            $this.removeClass('active');
            foundAny = true;
        }
    });
    return foundAny;
}

$('*').click(function(e) {
    var $this = $(this);

    // This bit is pseudocode, where the Function is the default behaviour 
    // for this event.
    // It is helpful that $this is actually the clicked element and not the body.
    $this.trigger('jQuery.pop.menuBeforeClose', function() {
        // if we run default behaviour, try to close the popup, or re-trigger the click.
        if (!closeInactivePop()) {
            $this.trigger(e);
        }
    });
}); 
```

然后我可以稍后做

```
$('#colour-picker').bind('jQuery.pop.menuBeforeClose', function(e) {
    e.preventDefault();
}); 
```

当原始点击事件的目标是颜色选择器或其中的某些东西时，这将阻止 closeInactivePopup 默认行为运行。

我可以以某种方式做到这一点，甚至是骇人听闻的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T16:23:59.663

我怀疑是否有一种本地方法可以做到这一点。但是，您可以使用“triggerHandler()”而不是“trigger()”，它提供了从事件处理程序返回值的能力。另一个相对简单的解决方案是传递一个自定义的“事件”对象，该对象可用于取消计划的操作：

```
function Action() {
    var status = true;
    this.cancel = function() { status = false; };
    this.status = function() { return status; };
}

$('button').click(function() {
    var action = new Action();
    $(this).trigger('foo', [action]);
    if (action.status()) {
        // ... perform default action
    }
});​ 
```

在事件处理程序中：

```
$('*').bind('foo', function(event, action) {
    action.cancel();
}); 
```

# erlang - 在 Mac OSX 10.8 Mountain Lion 上编译 Ejabberd TLS 支持的问题

> ID：13917277
> 
> 赞同：1
> 
> 时间：2012-12-17T15:42:40.603
> 
> 标签：erlang, osx-mountain-lion, ejabberd

问题是编译 ejabberd 的 TLS 部分。在进行“制作”时，我`gcc -I/usr/local/ssl/include`开始收到如下错误：

```
tls_drv.c: In function ‘hash_table_insert’:
tls_drv.c:134: warning: ‘SSL_CTX_free’ is deprecated \
  (declared at /usr/include/openssl/ssl.h:1347) 
```

然后当它到达：`gcc -I/usr/local/ssl/include`

```
ld: warning: directory not found for option '-L/usr/local/ssl/lib' 
```

所以 TLS 或 SSL 最终都不会被编译。显然不适用于生产环境。

我安装了 openssl，并且我看到其他 Erlang 产品的帖子出现此错误，说我需要修改 SSL 库的各个部分。

有没有其他人看到并修复了这个错误。由于有这么多 Erlang 开发人员在 Mac 上工作，在我看来，我不能成为唯一一个。

# sql - 使用 sql 数据库视图而不是我的模型的表时出现“不存在名为 `name` 的属性”错误

> ID：13917279
> 
> 赞同：0
> 
> 时间：2012-12-17T15:42:47.010
> 
> 标签：sql, ruby-on-rails, activerecord

这是输出：

```
(rdb:5) Morphology::MatrixView
Morphology::MatrixView(Table doesn\'t exist)

(rdb:5) Morphology::MatrixView.table_name
"morphology_matrix_view"

(rdb:4) Morphology::MatrixView.all.first
#<Morphology::MatrixView name: "anex", description: nil, copied_from: nil, created_by: "", created_at: "2012-12-14 18:40:51", updated_by: "", updated_at: "2012-12-14 18:40:51", id: 7, matrix_id: 7, copied_from_id: nil, project_id: 81>

(rdb:4) Morphology::MatrixView.all.first.name
"anex"

(rdb:4) Morphology::MatrixView.where(:name => 'anex')
INTERNAL ERROR!!! No attribute named `name` exists for table `morphology_matrix_view`

(rdb:12) Morphology::MatrixView.where("name = ?", "anex")
[#<Morphology::MatrixView name: "anex", description: nil, copied_from: nil, created_by: "", created_at: "2012-12-14 18:40:51", updated_by: "", updated_at: "2012-12-14 18:40:51", id: 7, matrix_id: 7, copied_from_id: nil, project_id: 81>] 
```

我有一个代表数据库视图（postgres）的模型。

基本上`model.where(:attribute => "string")`会抛出错误，

但`model.where("attribute = ?", "string")`没有。

不知道如何在这里进行，有什么建议*（使用 activerecord 3.0）*？

# html - 表格行...显示警报 onClick

> ID：13917281
> 
> 赞同：0
> 
> 时间：2012-12-17T15:42:50.877
> 
> 标签：html, onclick

您好，我有一个包含几行的简单 HTML 表格。我想在用户单击特定行时用消息提醒他们。这是我试图让它发挥作用的方法......

```
 <tr onClick="alert(some Message)">
            <td>${o.hospitalId}</td>

            <td>${o.name}</td>

            <td>${o.address}</td>
        </tr> 
```

但是，这是行不通的。我在这里缺少一些 HTML 基础知识吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T16:19:49.833

代码似乎很好，当然如果你想显示文学的“一些消息”文本，它必须在“和”之间，就像在兰特的例子中一样。如果它仍然无法工作，您可以在浏览器设置中禁用 javascript。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T15:47:09.473

似乎没问题，但尝试：

`<tr onclick="javascript:alert('something');">`

或尝试[jquery](http://jquery.com)：

`$("tr").click(function () { alert("something"); });`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-07-15T12:33:08.823

**有些消息**应该是单引号'文本'你的警报背后的原因不起作用

```
<table>
    <tr>
       <td onclick="alert('You are clicking on the cell EXAMPLE')"> Data </td>
    </tr>
  </table> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-07-15T12:09:37.163

添加这些“一些消息”，然后它会正常工作

```
 <tr onClick="alert('some Message')">

        <td>${o.hospitalId}</td>
        <td>${o.name}</td>
        <td>${o.address}</td>
    </tr> 
```

# solr - 使用 Solr 将用户指定的信息存储在文档中

> ID：13917282
> 
> 赞同：0
> 
> 时间：2012-12-17T15:42:52.273
> 
> 标签：solr, lucene, indexing, commit

我有一个应用程序，其中包含一组用户可以搜索的文本文档。每个用户都必须能够根据文档的文本进行搜索。更重要的是，用户必须能够定义自定义标签并将它们与文档相关联。这些标签以两种方式使用：

1) 用户必须能够根据特定的标签 id 搜索文档。2）标签必须有可用的方面。

我的解决方案是在每个文档中添加一个 Mutivalued 字段，以构成一个数组，其中包含该文档已标记的 tagid。到目前为止，一切都很好。我能够执行基于文本和 tagid 的查询（例如 text:hi AND tagIds:56 ）。

我的问题是，该解决方案是否可以在用户添加但也从文档中删除标签的环境中以生产模式工作？请记住，我必须让数据实时可用，因此每当用户删除/添加标签时，我必须重新索引该文档并立即提交。如果这不是一个好的解决方案，还有什么替代方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T21:11:12.917

[Stackoverflow 使用 Solr](https://blog.stackoverflow.com/2011/01/stack-overflow-search-now-81-less-crappy/) - 如果您怀疑 Solr 在生产模式下的能力，这是以防万一。

虽然我找不到太多关于他们如何实现标签的信息，但我认为你的方法听起来没有错。是的，标记的文档必须重新索引（这意味着稍微延迟），但除此之外我看不出有什么问题。

# jquery - 如何在具有相同类的列表按钮中选择一个按钮

> ID：13917287
> 
> 赞同：0
> 
> 时间：2012-12-17T15:43:06.880
> 
> 标签：jquery, jsp

我在 for 循环中有一个按钮。

```
<button name="btnD" id="btnDetail" class="ddd" value="${comp.contentId}">Detail</button> 
```

这些按钮`name`在 HTML 输出中将具有相同的属性。当我单击其中一个时，我想`value`在 jQuery 中获取它的属性。

这是我的脚本：

```
var btnDetail = $('button[name*="bd"]'); 
```

我知道`btnDetail`是一个具有`name`包含属性的列表按钮`"bd"`，但我无法获得刚刚被点击的确切按钮。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T15:47:35.747

使用“this”——它将引用当前元素

```
$('.ddd').click(function() {
     alert(this.value)
}) 
```

或者：

```
$('button[name*="bd"]').click(function() {
     alert(this.value)
}) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T15:47:57.017

```
$(this).attr("value"); can be used. $(this) is used to specify that element on which the event was triggered! 
```

# php - 从文件读取时有多少行太多？

> ID：13917291
> 
> 赞同：1
> 
> 时间：2012-12-17T15:43:20.640
> 
> 标签：php, mysql, web

我打算在 php 中创建一个动态列表，为此我有一个纯文本文件，每行都有一个列表元素。每行都有一个字符串，在呈现最终的 html 文档之前需要将其解析为几个较小的块。

上次我做了类似的事情，我使用了一个 file() 函数将我的文件加载到一个数组中，但在这种情况下，我有一个 12KB 的文件，超过 50 行，随着时间的推移肯定会变得更大。我应该将文件中的条目加载到 SQL 数据库以避免性能问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T15:50:53.580

是的，将信息放入数据库。不是出于性能原因（就顺序读取而言），因为一个 12KB 的文件将被非常快速地读取，而是关于解析成单独块的部分。将这些块放入数据库表的列中。它将使整个编程过程更快，具有更大的灵活性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T15:46:33.670

将内容分解为格式正确的数据库 - 几乎 - 总是一个好主意，并且会节省性能。

然而，50 行是非常少的（即使是几百行也是非常小的）。快速计算一下，12KB / 50 行告诉我每行平均只有大约 240 个字符。

我怀疑处理量（甚至几倍）是否会对性能造成足够大的影响而引起恐惧，除非这是一个超高性能的站点。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-17T15:49:19.900

虽然 50 行看起来并不算多，但最好现在使用数据库而不是稍后再进行更改。您必须记住的一个想法是，使用数据库不会立即消除性能问题，但可以帮助您更好地利用资源。事实上，您也可以使用文件编写类似优化的进程，除了 I/O 差异外，它们的工作方式几乎相同。

我重新阅读了这个问题，您意识到您可能意味着您每次都会将文件加载到数据库中。我看不出这有什么帮助，除非您将数据库用作一种缓存形式以避免重复命中文件。最终，从文件或数据库读取只会在脚本如何使用 I/O、磁盘缓存等方面有所不同……您在列表中所做的处理可能会在这里产生更大的不同。

# c# - 如何在 Windows 应用商店应用程序的页面之间传递复杂对象？

> ID：13917303
> 
> 赞同：1
> 
> 时间：2012-12-17T15:44:16.210
> 
> 标签：c#, .net, xml-serialization, windows-store-apps

在 Windows 应用商店应用程序的页面之间传递复杂对象的最佳方法是什么？在 MSDN 中，它声明只能传递基本类型的对象以序列化会话状态，但我不打算序列化会话状态，因为我的应用程序将在应用程序启动时注销并要求登录凭据下一次。我计划在用户点击注销或保存按钮时序列化我的数据。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T17:04:20.037

假设您将一个 Person 对象传递给 PersonDetailPage。然后这是您在 MainPage（或任何其他页面）上的内容。

假设您正在使用 GridView：

```
this.Frame.Navigate(typeof(PersonDetailPage), (Person)e.ClickedItem); 
```

然后在 PersonDetailPage 上的 LoadState() 上，您将验证是否传递了参数，然后将该参数归因于变量。

```
protected override void LoadState(Object navigationParameter, Dictionary<String, Object> pageState)
{
      if (navigationParameter != null)
      {
           person = (Person)navigationParameter;
      }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T05:50:27.597

不序列化会话状态可能会导致用户体验不佳。如果只保存用户注销时的状态，当应用程序挂起并因资源不足而被操作系统终止时，它会丢失状态。

看看[应用程序生命周期](http://msdn.microsoft.com/en-us/library/windows/apps/hh464925.aspx)：一旦用户切换到另一个应用程序并且您的应用程序不再位于前面，它将被暂停 - 这是您保存状态并保留它的最后机会。尽管您的应用程序可以保留在内存中，直到用户切换回来，但如果需要资源，操作系统也会将其关闭。在这种情况下，用户将不得不重新启动它。如果您在应用程序挂起时不保存您的状态，您将失去它并且用户体验将受到影响。

虽然您可能会想出一种保留状态的自定义方式，但我建议您坚持只在 Windows 运行时支持的页面之间传递基本类型。通过这种方式，您可以利用应用程序模板中包含的[SuspensionManager](http://www.damirscorner.com/UsingSuspensionManagerForSavingApplicationState.aspx)来处理大部分工作。在页面之间仅传递基本类型并不难。最好只传递对象 ID（某种唯一标识符）并将对象保存在所有页面都可以访问的其他地方。或者，您可以使您的对象可序列化并将它们作为序列化字符串（XML 或 JSON）传递。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-02T13:46:52.773

您可以序列化复杂对象，将其作为字符串传递，然后在第二页反序列化字符串

# bash - 为什么管道顺序很重要？

> ID：13917310
> 
> 赞同：1
> 
> 时间：2012-12-17T15:44:44.453
> 
> 标签：bash, pipeline

我在 bash 中有两个程序：

```
{ { sleep 1s; kill 0; } | { while true; do echo "foo"; done; kill 0;} } 
```

和

```
{ { while true; do echo "foo"; done; kill 0; } | { sleep 1s; kill 0; } } 
```

（只是改变了顺序）。

第一个在输出中写了很多“foo”而第二个什么都不写怎么可能？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T15:59:55.880

第二个确实 output `foo`，您只是看不到它，因为它通过管道传输到您的第二个命令。

您可以通过重定向到文件来证明这一点：

```
$ { { while true; do echo "foo" >> /tmp/f; done; kill 0; } | { sleep 1s; kill 0; } }
$ wc -l /tmp/f
56209 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-17T15:56:50.900

通过管道连接两个进程会将输出从第一个重定向到第二个。因此，将一个写入输出的进程连接到一个不做任何输出的进程意味着没有输出发生。

相比之下，将一个不做任何事情的进程连接到一个生成输出的进程，后者将继续像往常一样生成输出。

顺便问一下，这些`kill 0`线条的目的是什么？我非常怀疑它们在这里是否有用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-17T15:57:27.193

这是因为在第二个命令中，您将 a 的输出`echo`作为输入`{ sleep 1s; kill 0; }`

[对 BASH 中管道如何工作的简单解释是什么？](https://stackoverflow.com/a/9834131/1006989)

# python - Python 多线程

> ID：13917311
> 
> 赞同：3
> 
> 时间：2012-12-17T15:44:45.507
> 
> 标签：python, multithreading

我需要从 ip 列表中提取所有 url，我编写了这个 python 脚本，但是我多次提取相同的 ip 时遇到问题（使用相同的 ip 创建了更多线程）。任何人都可以使用多线程改进我的解决方案吗？

对不起我的英语谢谢大家

```
import urllib2, os, re, sys, os, time, httplib, thread, argparse, random

try:
    ListaIP = open(sys.argv[1], "r").readlines()
except(IOError): 
    print "Error: Check your IP list path\n"
    sys.exit(1)

def getIP():
    if len(ListaIP) != 0:
        value = random.sample(ListaIP,  1)
        ListaIP.remove(value[0])
        return value
    else:
        print "\nListaIPs sa terminat\n"
        sys.exit(1)

def extractURL(ip):
    print ip + '\n'
    page = urllib2.urlopen('http://sameip.org/ip/' + ip)
    html = page.read()
    links = re.findall(r'href=[\'"]?([^\'" >]+)', html)
    outfile = open('2.log', 'a')
    outfile.write("\n".join(links))
    outfile.close()

def start():
    while True:
        if len(ListaIP) != 0:
            test = getIP()
            IP = ''.join(test).replace('\n', '')
            extractURL(IP)
        else:
            break

for x in range(0, 10):
    thread.start_new_thread( start, () )

while 1:
    pass 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-17T16:01:22.973

使用`threading.Lock`. 锁应该是全局的，并在创建 IP 列表时创建。

`lock.acquire`在开始时`getIP()`

`release`在你离开方法之前。

您所看到的是，线程 1 执行`value=random.sample`，然后线程 2`value=random.sample` **在**线程 1 到达`remove`. 因此，当线程 2 到达那里时，该项目仍在列表中。因此*，两个*线程都有机会获得相同的 IP。

# java - 带有 void 方法的 EasyMock 期望

> ID：13917312
> 
> 赞同：23
> 
> 时间：2012-12-17T15:44:46.037
> 
> 标签：java, unit-testing, easymock

我正在使用 EasyMock 进行一些单元测试，但我不了解`EasyMock.expectLastCall()`. 正如您在下面的代码中看到的那样，我有一个对象，该对象的方法返回 void 在其他对象的方法中被调用。我认为我必须让 EasyMock 期望该方法调用，但我尝试注释掉`expectLastCall()`调用并且它仍然有效。是因为我通过`EasyMock.anyObject())`了它将它注册为预期的呼叫还是发生了其他事情？

```
MyObject obj = EasyMock.createMock(MyObject.class);
MySomething something = EasyMock.createMock(MySomething.class);
EasyMock.expect(obj.methodThatReturnsSomething()).andReturn(something);

obj.methodThatReturnsVoid(EasyMock.<String>anyObject());

// whether I comment this out or not, it works
EasyMock.expectLastCall();

EasyMock.replay(obj);

// This method calls the obj.methodThatReturnsVoid()
someOtherObject.method(obj); 
```

EasyMock 的 API 文档这样说`expectLastCall()`：

```
Returns the expectation setter for the last expected invocation in the current thread. This method is used for expected invocations on void methods. 
```

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-12-17T15:51:41.747

`IExpectationSetters`此方法通过;返回您期望的句柄 这使您能够验证（断言）您的 void 方法是否被调用以及相关行为，例如

```
EasyMock.expectLastCall().once();
EasyMock.expectLastCall().atLeastOnce();
EasyMock.expectLastCall().anyTimes(); 
```

IExpectationSetters 的详细 API 在[**这里**](http://easymock.org/api/org/easymock/IExpectationSetters.html)。

在您的示例中，您只是获得了句柄而没有对其进行任何操作，**因此您看不到拥有或删除该语句的任何影响。**这与您调用一些 getter 方法或声明一些变量但不使用它非常相似。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-04-29T06:13:03.947

仅`EasyMock.expectLastCall();`当您需要进一步验证“该方法已被调用。（与设置期望相同）”以外的任何内容时才需要

假设您想验证该方法被调用了多少次，因此您将添加以下任何一项：

```
EasyMock.expectLastCall().once();
EasyMock.expectLastCall().atLeastOnce();
EasyMock.expectLastCall().anyTimes(); 
```

或者说你想抛出一个异常

```
EasyMock.expectLastCall().andThrow() 
```

如果您不在乎，则`EasyMock.expectLastCall();`不需要并且没有任何区别，您的陈述`"obj.methodThatReturnsVoid(EasyMock.<String>anyObject());"`足以建立期望。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-08-16T20:45:41.303

您缺少 EasyMock.verify(..)

```
MyObject obj = EasyMock.createMock(MyObject.class);
MySomething something = EasyMock.createMock(MySomething.class);
EasyMock.expect(obj.methodThatReturnsSomething()).andReturn(something);

obj.methodThatReturnsVoid(EasyMock.<String>anyObject());

// whether I comment this out or not, it works
EasyMock.expectLastCall();

EasyMock.replay(obj);

// This method calls the obj.methodThatReturnsVoid()
someOtherObject.method(obj);

// verify that your method was called
EasyMock.verify(obj); 
```

# prolog - 在 Prolog 中查找置换循环

> ID：13917316
> 
> 赞同：2
> 
> 时间：2012-12-17T15:44:53.310
> 
> 标签：prolog, permutation, cycle

我是 Prolog 世界的新手。我想知道一个排列是否是“一个周期”。

我正在尝试编写一个谓词来从排列中生成循环。这是我的代码（不工作）：

```
find_next([E|_], [N|_], E, N).

find_next([_|L1], [_|L2], E, N) :-
  find_next(L1, L2, E, N).

find_cycle(L1, L2, E, C) :-
    append(C, [E], C1),
    find_next(L1, L2, E, N),
    find_cycle(L1, L2, N, C1). 
```

排列由两个列表表示（例如：[1, 2, 3, 4], [3, 4, 2, 1]）。 `find_next`为元素 (E) 生成下一个循环元素 (N)（例如：E=1，N=3）。 `find_cycle`从元素 E 开始寻找循环 (C)。

不幸的是，当 find_next 返回与循环 C 的第一个元素相同的 N 时，我不知道如何停止重复。

**编辑：**一些例子。

```
find_cycle([1, 2, 3, 4], [3, 4, 2, 1], 1, X). 
```

应该返回：

```
X = [1, 3, 2, 4];
false. 
```

和：

```
find_cycle([1, 2, 3, 4], [4, 2, 1, 3], 1, X). 
```

应该返回：

```
X = [1, 4, 3];
false. 
```

为什么？它是将排列简单地分解为不相交的循环。让我们分析第二个排列：`[1, 2, 3, 4], [4, 2, 1, 3]`。

```
Take first element: 1.
1 goes into 4
4 goes into 3
3 goes into 1
end of cycle. 
```

这种排列不能分解成一个循环（生成循环的长度小于排列的长度）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T18:51:05.857

要找到置换的所有循环：

```
perm_to_cycles(Perm, NPerm, Cycles):-
  perm_struct(Perm, NPerm, PermS),
  perm_to_cycles(PermS, [], [], Cycles),
  !.

perm_to_cycles([], _, Cycles, Cycles).
%perm_to_cycles([p(Id, Id)|PermS], _, InCycles, Cycles):-
%  perm_to_cycles(PermS, [], InCycles, Cycles).  % This clause would remove fixed elements
perm_to_cycles([p(Id, Item)|PermS], Cycle, InCycles, Cycles):-
  (select(p(Item, NId), PermS, NPermS) ->
    perm_to_cycles([p(Item, NId)|NPermS], [Id|Cycle], InCycles, Cycles) ;
    (
      reverse([Id|Cycle], RCycle),
      perm_to_cycles(PermS, [], [RCycle|InCycles], Cycles)
    )
  ).

perm_struct([], [], []).
perm_struct([Item|Perm], [NItem|NPerm], [p(Item, NItem)|PermS]):-
  perm_struct(Perm, NPerm, PermS). 
```

注释条款将删除循环列表的固定元素。

要仅获得一个循环排列，您可以将第三个参数限制为一个元素列表。例如：

```
?- perm_to_cycles([1, 2, 3, 4], [3, 4, 2, 1], [X]).
  X = [1, 3, 2, 4]
?- perm_to_cycles([1, 2, 3, 4], [4, 2, 1, 3], [X]).
  false.
?- perm_to_cycles([1, 2, 3, 4], [4, 2, 1, 3], X).
  X = X = [[2], [1, 4, 3]]. 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T18:30:49.507

-嗨戴夫，这是我解决问题的方法。我按照你的指示，比如 1 到 4 ， 4 到 3 等等，这就是我想出的。首先，我在两个列表（排列）的元素之间创建弧线，然后我只需使用 find_cycle 在创建的图形中移动（直到我们的节点开始重复）。我尝试使用自我解释的变量名称，但如果很难理解代码，请告诉我。

```
create_arcs([],[],[]).
create_arcs([H|T],[H1|T1],[arc(H,H1)|RezArc]) :- create_arcs(T,T1,RezArc).

find_cycle(Perm,Perm2,E,X) :- create_arcs(Perm,Perm2,Arcs),
                              find_cycle(E,Arcs,[],X).

find_cycle(StartNode,Arcs,LocRez,LocRez) :-   member(arc(StartNode,NextNode),Arcs),
                                              member(StartNode,LocRez).

find_cycle(StartNode,Arcs,LocRez,FinalRez) :- member(arc(StartNode,NextNode),Arcs),
                                              not(member(StartNode,LocRez)),
                                              append(LocRez,[StartNode],LocRezNew),
                                              find_cycle(NextNode,Arcs,LocRezNew,FinalRez). 
```

# android - Android ActionBar 选项卡和片段

> ID：13917317
> 
> 赞同：0
> 
> 时间：2012-12-17T15:44:55.407
> 
> 标签：android, android-fragments, android-actionbar, actionbarsherlock

我开始使用 android 并希望拥有一个具有多个选项卡的应用程序。我想使用带有 SherlockActionBar 库的操作栏来支持运行预蜂窝版本的 android 的设备。我已经看到了很多创建和使用选项卡的示例，以至于我现在不知道这样做的最佳或首选方法是什么。

我已经读过，最好的方法是为每个选项卡设置一个片段，并有一个活动来控制片段的进出切换以及协调片段之间的通信。如果这是处理选项卡的正确方法，最好在自己的 layout.xml 中定义每个片段布局。

似乎当单击片段布局中定义的按钮时，会在父活动中触发 onclick。如果最好的处理方法是在父活动中进行处理或将事件传递给正确的片段进行处理。

总之，我想知道创建带有操作栏选项卡的应用程序的最佳实践是什么，代码应该在哪里以及布局应该如何分开。

谢谢你，内森

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T15:57:56.017

从我能读到的内容来看，你的方向是正确的。[谷歌](http://developer.android.com/guide/topics/ui/actionbar.html#Tabs)有很多关于这个主题的最佳材料。另请参阅 Google 的应用程序以供参考，Play 应用程序具有简单的标签导航，并定义了我们应该和不应该如何尝试制作标签。一个非常重要的教训是，我们应该在每个选项卡中只包含 1 个片段，并且我们不应该尝试在选项卡内进行后退导航（尽管可以通过一些技巧来实现）。

# objective-c - 使用 AFJSONRequestOperation 时，为什么还要将DefaultHeader 设置为 application/json？

> ID：13917320
> 
> 赞同：0
> 
> 时间：2012-12-17T15:45:19.890
> 
> 标签：objective-c, json, afnetworking

来自 AFNetworking 常见问题解答：

> **为什么我的 HTTP 客户端回调中没有得到 JSON / XML / 属性列表？**
> 
> ...
> 
> 例如，要使用 JSON 数据，请`[client registerHTTPOperationClass:[AFJSONRequestOperation class]]`在`[client setDefaultHeader:@"Accept" value:@"application/json"]`初始化 HTTP 客户端时执行。

如果我正在使用`AFJSONRequestOperation`，那不是意味着我只想接受 application/json 吗？您会认为 AFNetworking 会自动将 Accept 标头设置为 application/json。

我认为它没有这样做是有充分理由的……但那可能是什么原因呢？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T15:55:27.453

这`setDefaultHeader:`是您的请求的标头。您可以使用一些自定义或派生类作为默认类，它可以执行 JSON，但如何`AFHTTPClient`知道这一点。

# c++ - 当您只有参考时，如何正确编写 -> 运算符？

> ID：13917323
> 
> 赞同：1
> 
> 时间：2012-12-17T15:45:37.320
> 
> 标签：c++, c++11

这是一个复制案例：

```
#include <iostream>

template< class MessageType >
class Augmented
{
public:
    Augmented( const MessageType& message ) 
        : m_message( message )
    {}

    const MessageType* operator->() const { return &m_message; }

private:
    const MessageType& m_message;
};

template< class MessageType >
Augmented<MessageType> augmented( MessageType&& message )
{
    return Augmented<MessageType>( std::forward<MessageType>(message) );
}

class Test
{
public:
    void print() const {  std::cout << "Hello World" << std::endl; }
};

int main()
{
    Test test;

    auto augmented_test = augmented( test );
    augmented_test->print();

    return 0;
} 
```

我正在使用 VS2011（更新 1）。当我尝试使用使用 -> 运算符的代码时，我收到此错误：

> 错误 C2528：“->”：指向引用的指针非法

我理解这个错误，但我没有找到在这种特定情况下如何避免它。我只需要一个指向由成员引用推断的对象的指针。我尝试了几种不同的语法，它们都导致了相同的错误。

知道如何正确编写此运算符吗？

* * *

请注意将重点放在问题上：我自愿使用引用来避免在使用此帮助程序代码的非常具体和孤立的上下文中永远不应该出现的副本；问题不在于课程的设计。

* * *

最后编辑：用完整的复制案例替换了问题代码。DeadMG 是正确的，所以我接受他的回答。更准确地说：辅助函数 (augmented()) 将 MessageType 转发为`Test&`而不是`Test`，这是错误的。有几种方法可以解决这个问题，最简单的方法是让辅助函数不转发类型，而只是采用`const MesssageType&`.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-17T15:49:22.843

这段代码对于任何特定的值类型都是合法的。但是，我怀疑您已经使用引用对其进行了实例化。这将导致`const MessageType*`扩展到`const (T&)*`，这是不合法的。您需要检查模板参数是否不是引用。

# ajax - Codeigniter 更新数据库字段错误

> ID：13917326
> 
> 赞同：1
> 
> 时间：2012-12-17T15:45:47.270
> 
> 标签：ajax, jquery, codeigniter-2

这是我的代码，我想更新数据库字段但面临错误。我打印查询数据发布是正确的，但为什么 ID=0 我在 db 表中有大写 ID，但为什么请回答我想通过 ajax 更新的问题。1UPDATE `form`SET `st_name`= 'hello', `st_class`= 'update', `st_address`= 'SystemConfig' WHERE `ID`= 0 因为 id 为 0 这就是它不更新数据的原因，但为什么。？

这是我的 ajx 函数

```
 <script>
  $(document).ready(function() {

  $(".Update").fancybox({
    'transitionIn'  :   'fade',
    'transitionOut' :   'fade',
    'speedIn'       :   600, 
    'speedOut'      :   200, 
    'overlayShow'   :   false
});
var Id = $(this).attr("id");
var parent = $(this).parent();  
  $("#updateform").bind("submit", function() {
     $.ajax({
        type        : "POST",
        cache       : false,
        url     : "http://localhost/testproj/index.php/form/update",
        data        : $(this).serializeArray(),
            success:function(data){
                $.fancybox(data);
            }
    });

    return false;
  });

  }); 
```

```
 **VIEW**

 </head>
<body>          

     <form id="Form" action="" method="post"
     name="Form" onsubmit="return submitForm();"  ;>
    <br></br>
    <table id = "fixedme" border ='0' cellpadding='0' cellspacing='0'>
    <tr>
    <td>Message:  </td>
<td><input id='Name' name='Name' type='text' size='20' maxlength='50'/></td>

                        <td>Action</td>
        <td><select name="action" id="action">
            <option value="">--Select--</option>
        <option value="insert">Insert</option>
       <option value="update">Update</option>
        <option value="delete">Delete</option></select></td>

                        <td>Action By</td>
            <td><select name="actionBy" id="actionBy">
            <option value="">--Select--</option>
        <option value="Transaction">Transaction</option>
        <option value="ManageOperation">Manage Operation</option>
        <option value="FeeRate">Fee Rate</option>
        <option value="SystemConfig">System Config</option>
        <option value="Compliance">Compliance</option>
        <option value="Usermanagement">User Management</option>
        <option value="OnlineSenderAdmin">Online Sender Admin</option>
        </select></td>
            </tr>
   <tr><td collspan='2'><input type="submit" name="submit" id="submit" value="submit" class="submit"/></td></tr></table>
        </form>
</div>

  <div style="display:none;" id = "updateDialog"  >
    <form id="updateform" action="" method="post">
    <p><h1 align="center">Update</h1></p>
        <p>
           <label>Message:</label>
           <input type="text" id="name" name="name" />
        </p>

        <p>
           <label>Action On:</label>
          <select name="action" id="action">
            <option value="">--Select--</option>
            <option value="insert">Insert</option>
            <option value="update">Update</option>
            <option value="delete">Delete</option></select>
        </p>
        <p>
           <label>ActionBy:</label>
           <select name="actionBy" id="actionBy">
    <option value="">--Select--</option>
    <option value="Transaction">Transaction</option>
    <option value="ManageOperation">Manage Operation</option>
    <option value="FeeRate">Fee Rate</option>
    <option value="SystemConfig">System Config</option>
    <option value="Compliance">Compliance</option>
    <option value="Usermanagement">User Management</option>
    <option value="OnlineSenderAdmin">Online Sender Admin</option>
    </select>
        </p>
        <p><input type="submit" name="save" 
             id="save" value="save" class="save"/>

        <input type="submit" name="Close" 
        id="Close" value="Close" class="submit"/>       
        </form>
  </div>

<div id="message">
<form id="myForm" action="" method="" name="myForm" class="myForm"><br></br>
<table id = "fixedme" border ='1' cellpadding='0' cellspacing='0'>
    <tr>
                        <th>ID:  </th>
                        <th>Message: </th>
                        <th>Action On:</th>
                        <th>ActionBy </th>
                        <th>Actions </th>

    </tr>
            <tbody>
            <?php
    if($result!="")
    {
    foreach($result as $rows){ ?>
    <tr id="ide"><td><span><?php echo $ID=$rows->ID;?></span></td> 
    <td><span><?php echo $name=$rows->st_name;?></span></td>
    <td><span><?php  echo $action=$rows->st_address; ?></span></td>
    <td><span><?php echo  $actionby=$rows->st_class; ?> </span></td>
    <td><a href="#"  class="delete" id="<?php echo $ID=$rows->ID;?>" 
        name="delete" >Delete</a>
    <a href="#updateDialog"  class="Update" id="<?php echo $ID=$rows->ID ;?>" 
    name="Update">Update</a>
    </td></tr>
            <?php }}?>

            </tbody>
            </table>
            </form>
            </div>
            </div>
        </div>
</body>
 </html>

 **MODEL**

     public function submit_updated_data($id,$data) 
        {
            $this->load->database();
            $this->db->where('ID', $id);
            $query2 =$this->db->update( 'form', $data);

        }

**CONTROLLER**

  public function update()
 {
        $id=$this->input->post('ID');
        $name=$this->input->post('name');
        $action= $this->input->post('action');  
        $actionBy = $this->input->post('actionBy'); 
        $data = array(

                    'st_name' => $name,
                    'st_class' =>$action,
'st_address'=>$actionBy                             
                    );
    $this->form_model->submit_updated_data($id,$data);
                            $this->index();

}

1UPDATE `form` SET `st_name` = 'hello', `st_class` = 'update', `st_address` = 'SystemConfig' WHERE `ID` = 0 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T21:08:47.257

我认为这是因为您没有提交要在 $_POST 数组中更新的记录的 ID。

提交的所有数据都是从您的表单输入构建的数组，但您没有一个用于“id”的数组......所以：

```
$id=$this->input->post('ID'); 
```

...没有从表格中得到任何东西。

# layout - Kendo UI 网格：IE 中的布局混乱，但在 Opera 和 Chrome 中仍然有效，但我什么也没改变

> ID：13917331
> 
> 赞同：1
> 
> 时间：2012-12-17T15:45:58.357
> 
> 标签：layout, grid, kendo-ui

编辑：这是一个 Visual Studio 问题：

**虽然我的剑道网格在Opera**和**Chrome**中渲染得很好，但在 IE9中运行了两天之后，它突然在**IE9**中变得糟糕**了**。而且我什么都没改变！我的 CSS 文件和 jquery 文件都是本地安装在我的 PC 上的，没有被动过。

我一直在使用 Visual Studio，并连续两天运行该页面，并在 VS 调试器中单步执行代码。有时 VS 环境会变得混乱，所以我关闭了 VS 并重新打开了项目，认为这可能会有所帮助。我还清除了 IE 浏览器缓存。但没有喜悦。

奇怪的是，前一刻 Kendo 网格呈现完美，下一刻它的布局被冲洗掉：网格列与标题单元格不对齐，并且网格列都被压缩成大约 60% 的页面宽度，而网格的标题占据了整个 100% 的窗口。此外，如果单元格中没有值，则不会绘制将该单元格与其左侧的单元格分开的垂直网格线。但正如我所说，它在其他两个浏览器中运行良好，而且 Opera 肯定没有使用页面的缓存版本，因为我还没有在 Opera 中对其进行测试。

如果您知道什么会导致这种行为，请告知。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-19T00:38:25.943

在 _layout.cshtml 下使用以下代码。这是强制页面在 IE8 中呈现

```
<meta http-equiv="x-ua-compatible" content="IE=8">

for IE9
<meta http-equiv="X-UA-Compatible" content="IE=edge" /> 
```

欲了解更多信息：[检查这个](https://stackoverflow.com/questions/6771258/whats-the-difference-if-meta-http-equiv-x-ua-compatible-content-ie-edge)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T16:55:52.183

不知何故，浏览器进入了 IE7 标准模式。不是我做的，至少我不知道。我 99.34% 确信我没有告诉 Visual Studio 从 IE9 更改为 IE7。

# c# - 简单注入器：使用基于其父级的构造函数参数注册类型

> ID：13917332
> 
> 赞同：15
> 
> 时间：2012-12-17T15:46:11.920
> 
> 标签：c#, dependency-injection, ioc-container, simple-injector

我目前正在从我的项目中删除 Ninject，并转而使用 Simple Injector，但有一件事我无法正常工作。

对于我的日志记录，在注册服务时，我以前能够将参数传递到我的日志记录类中

```
_kernel.Bind<ILogger>().To<Logger>()
    .WithConstructorArgument("name",
        x => x.Request.ParentContext.Request.Service.FullName); 
```

我正在寻找一种在 Simple Injector 中重新创建它的方法。到目前为止，除了这个，我还有其他一切工作。通过执行以下操作，我可以使日志记录正常工作，尽管没有显示正确的记录器名称：

```
_container.Register<ILogger>(() => new Logger("test")); 
```

有人有做过类似事情的经验吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-17T16:17:32.700

That registration is a form of *context based injection*. You can use one of the `RegisterConditional` overloads for this.

`RegisterConditional` however does not allow the use of factory methods to construct a type. So you should create a generic version of your `Logger` class, as follows:

```
public class Logger<T> : Logger
{
    public Logger() : base(typeof(T).FullName) { }
} 
```

You can register it as follows:

```
container.RegisterConditional(
    typeof(ILogger),
    c => typeof(Logger<>).MakeGenericType(c.Consumer.ImplementationType),
    Lifestyle.Transient,
    c => true); 
```

But please do read [this Stackoverflow question](https://stackoverflow.com/questions/9892137/windsor-pulling-transient-objects-from-the-container) (and my answer) and question yourself if you aren't logging too much.

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2015-10-22T13:23:24.327

Simple Injector 3 现在通过使用该`RegisterConditional`方法支持[基于上下文的注入。](https://simpleinjector.readthedocs.org/en/latest/advanced.html#context-based-injection)例如，要将 Logger 注入 Consumer1 并将 Logger 注入 Consumer2，请使用接受实现类型工厂委托的 RegisterConditional 重载，如下所示：

```
container.RegisterConditional(
    typeof(ILogger),
    c => typeof(Logger<>).MakeGenericType(c.Consumer.ImplementationType),
    Lifestyle.Transient,
    c => true); 
```

# mysql - 在 Rails 迁移中删除表中的所有列

> ID：13917333
> 
> 赞同：1
> 
> 时间：2012-12-17T15:46:14.567
> 
> 标签：mysql, database, ruby-on-rails-3, database-migration, rails-migrations

在 Rails 3 中说，你有一个模型`User`，因此它的表被称为`:users`

发生了可怕的错误，您需要删除表格，但您不能，因为您还有其他对`user_id`. 所以你需要清除你的`users`表模式。

基本上你需要的是一种删除所有列的方法。

如果您的表格有超过 40 列，您可以忘记样式

```
remove_column :users, :col1 
```

您需要一次完成所有操作。在一次迁移中

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-17T15:46:14.567

假设您已经使用

`rails g migration PurgeOldUsersSchema`

所以这就是你的迁移应该是什么样子

```
class PurgeOldUsersSchema < ActiveRecord::Migration
  def change
    cols = []
    User.columns.collect(&:name).each do |col|
     cols.push(col.to_sym)
    end
    cols = cols - [:id]
    remove_column :users, cols
  end
end 
```

请记住这`- [:id]`是必要的，因为 rails 不允许您删除主键。在此数组中，您可以添加要在清除操作后保留的任何列名。

这样可以使您在架构中对该表的引用保持不变，但无论如何您都会清除数据，因此相关性不大。:-)

**更新**

已尝试过此解决方案，但`remove_column :users, cols`对我不起作用，因此我不得不将其替换为：

```
cols.each { |col| remove_column :users, col } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T16:12:39.020

在终端中运行`rake db:migrate:down VERSION=XXX`，它应该删除用户表上的所有数据。

然后运行：`rake db:migrate`

# c - 将 malloc() 调用转换为 C 中的外部库调用

> ID：13917339
> 
> 赞同：0
> 
> 时间：2012-12-17T15:46:25.240
> 
> 标签：c, memory-leaks

我正在编写一个用于运行时内存问题调试的开源工具：

[https://github.com/sandeepsinghmails/S_malloc](https://github.com/sandeepsinghmails/S_malloc)

当前版本要求用户更改他/她的包装函数，`malloc()`并`free()`从我的库中调用两个附加函数。

我想修改此代码，以便用户`malloc()`和`free()`调用自动映射到我自己的实现。用户不需要修改他的源代码（Valgrind 提供的东西）。

有人可以指导我吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-17T15:55:41.680

看一下malloc_hooks：

[http://man7.org/linux/man-pages/man3/malloc_hook.3.html](http://man7.org/linux/man-pages/man3/malloc_hook.3.html)

GNU C 库允许您通过指定适当的挂钩函数来修改 malloc(3)、realloc(3) 和 free(3) 的行为。例如，您可以使用这些挂钩来帮助您调试使用动态内存分配的程序。

# python - 如何删除或替换 zip 存档中的文件？

> ID：13917340
> 
> 赞同：28
> 
> 时间：2012-12-17T15:46:30.947
> 
> 标签：python, zipfile

我正在用 Python 创建一个程序，它下载一组文件并将它们放入带有 zipfile 模块的存档中。

我已经找到了如何追加到存档的方法，但是在某些情况下存档中的文件已经存在并且应该被覆盖。

目前，如果我将一个已经存在的文件附加到存档中，我会得到一个副本。

有谁知道如何删除存档中的文件？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-12-17T15:55:45.533

来自[http://docs.python.org/2/library/zipfile](http://docs.python.org/2/library/zipfile)

```
ZipFile.namelist()
Return a list of archive members by name. 
```

因此，在附加到文件并对存档中的现有成员列表执行检查操作之前获取成员列表是微不足道的。

另外：不支持从 ZIP 文件中删除。如果需要，您需要编写一个新存档并复制现有文件并省略要删除的文件。

也可以看看

[使用 ZipFile 模块从 zipfile 中删除文件](https://stackoverflow.com/questions/513788/delete-file-from-zipfile-with-the-zipfile-module)

# java - 复制当前 UIMA CAS 对象

> ID：13917344
> 
> 赞同：0
> 
> 时间：2012-12-17T15:46:37.023
> 
> 标签：java, uima

我正在开发一个使用[Apache UIMA](https://uima.apache.org/)框架来注释文档的项目。由于我必须将所有文档传递一次并在一个 for-lopp 中处理它们，因此我必须临时存储（复制）当前文档的当前 CAS 对象，以免被跟踪 FS 和堆值弄乱。

因此，我使用 CasCopier 首先复制当前的 CAS 并显示，然后再处理下一个文档。

```
 1\.  public class DocumentAnalysis {
 2\.    public DocumentAnalysis(CAS cas) {
 3\.        this.cas = cas;
 4\.    }
 5\.     
 6\.    public processDocuments(Document documents) {
 7\.        for(Document document: documents) {
 8\.            // process each document, after this method, the cas has all values
 9\.            processSingleDoc(document);
10.
11\.            // create a new CAS as the destination of copy
12\.            CAS localCas = CASFactory.createCas().getCas();
13\. 
14\.            // copy the current CAS to the new CAS
15\.            CASCopier.copyCas(this.cas, localCas, true);  
16\.        }
17\.    }
18.
19\.    public processSingleDoc(Document document) {
20\.        // the logic for processing
21\.        // implement UIMA process() method
22\.        ......
23\.    }
24.
25\.    CAS cas;
26\.  } 
```

但是，问题在于它在第 12 行抛出了 NullPointerException，我认为 getCAS() 方法需要 indexRepository 变量，而我创建的 localCas 没有该值，这意味着新 CAS 的创建可能不正确。

我在网上搜索过，还没有找到任何解决方案。那么有谁知道我如何将当前的 CAS 复制到新创建的 CAS 中？

提前致谢！！！

# eclipse - 如何从 Juno 卸载 Egit 功能？

> ID：13917352
> 
> 赞同：6
> 
> 时间：2012-12-17T15:47:18.273
> 
> 标签：eclipse, uninstallation, egit

我正在尝试为我创建的 Eclipse 插件运行 JUnit 测试。但是，来自 EGit 插件的确认对话框阻止了我的视角加载，因此在我的 JUnit 控制台上引发了不必要的异常。我尝试寻找卸载插件的可能性，但没有看到任何此类选项。如何禁用 Egit 插件？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-10-18T00:56:10.973

插件不容易在 Eclipse 中删除/禁用。但是您可以删除该插件的 jar 文件以删除插件。

在 Linux 或 Mac 中，打开终端，然后`cd`到 eclipse 文件夹。

```
mkdir disabled disabled/features disabled/plugins

mv features/*egit* disabled/features/
mv plugins/*jgit* disabled/plugins/
mv plugins/*egit* disabled/plugins 
```

[在http://blog.sarathonline.com/2012/05/eclipse-indigo-without-mylyn.html](http://blog.sarathonline.com/2012/05/eclipse-indigo-without-mylyn.html)阅读更多内容

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-17T16:33:56.487

请注意，确认对话框的问题已在 EGit 2.2 中得到修复，该版本将于 2012 年 12 月 19 日发布，请参阅[错误 391377](https://bugs.eclipse.org/bugs/show_bug.cgi?id=391377)。

通常，在启动配置中仅包含最低要求的功能集是一种很好的做法。这可以在启动配置*的插件*选项卡中进行配置。

要仅包含某些功能，请从*Launch with下拉列表中**选择下面*选择的功能，检查应包含的功能，然后按*Add Required Plug-ins*。

 **此外，使用特定的目标平台也很有用，请参阅[wiki 页面](http://wiki.eclipse.org/PDE/Target_Definitions)或[本教程](http://www.vogella.com/articles/EclipseTargetPlatform/article.html)。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-22T11:15:22.490

在朱诺：

Windows>首选项>安装/更新>卸载或更新。

单击要删除的插件，然后单击卸载

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-04-28T14:02:04.187

嘿，我找到了一个非常简单的方法，发布它也许可以帮助某人：

要卸载 EGit 插件，请执行以下操作：

**帮助 > Eclipse Marketplace... > 已安装选项卡 > EGit > 卸载**

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2015-06-13T19:36:57.217

在 Mac 上

```
mkdir disabled disabled/features disabled/plugins

mv features/*egit* disabled/features/
mv plugins/*jgit* disabled/plugins/
mv plugins/*egit* disabled/plugins 
```

没有解决任何问题。

这样做之后，在市场卸载之后，egit 已经卸载了......

恭喜eGit。**

# xslt - 如何在 xslt 2.0 中按顺序调用我的模板和函数？

> ID：13917354
> 
> 赞同：0
> 
> 时间：2012-12-17T15:47:21.547
> 
> 标签：xslt, xpath, xslt-2.0, xpath-2.0

我正在使用 xslt2.0 将一种 xml 格式转换为另一种 xml 格式。这是我的示例 xml 文档。

```
<w:document>
    <w:body>
             <w:p>Para1</w:p> 
             <w:p>Para2</w:p> 
             <w:p>Para3</w:p> 
             <w:p>Para4</w:p> 
    </w:body>
</w:document> 
```

`<w:p>`最初这是我的 xml 格式。所以，我通过下面给出的 xslt 中的函数处理了每一个元素......

```
 <xsl:template match="document">
      <Document>
    <xsl:sequence select="mf:group(body/p, 1,count(//w:body//w:p)-1)"/>
      </Document>    
</xsl:template> 
```

所以，在那个 xslt 函数中，我编写了如何重新格式化这些元素的代码。它工作正常......

但是现在，Xml 格式被重组如下所示......

```
<w:document>
        <w:body>
                 <w:tbl><!--some text with children elements--></w:tbl>
                 <w:tbl><!--some text with children elements--></w:tbl>
                 <w:p>Para1</w:p> 
                 <w:p>Para2</w:p> 
                 <w:p>Para3</w:p> 
                 <w:p>Para4</w:p> 
        </w:body>
 </w:document> 
```

所以，到目前为止，我必须以相同的顺序处理 和 元素.....

我想做的是，

如果我遇到元素，那么我必须调用下面给出的模板......

```
<xsl:template match="document">
     <Document>
        <xsl:for-each select="w:tbl">
          <xsl:apply-templates select="w:tbl">
              </xsl:apply-templates>
      </xsl:for-each>
        <xsl:sequence select="mf:group(body/p, 1,count(//w:body//w:p)-1)"/>
     </Document>    
</xsl:template>

<xsl:template match="w:tbl">
<!--xslt code here -->
</xsl:template> 
```

但是当我尝试转换时不会执行 for-each 语句......

所以，请指导我摆脱这个问题......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T16:57:45.713

我认为而不是

```
<xsl:template match="document">
     <Document>
        <xsl:for-each select="w:tbl">
          <xsl:apply-templates select="w:tbl">
              </xsl:apply-templates>
      </xsl:for-each>
        <xsl:sequence select="mf:group(body/p, 1,count(//w:body//w:p)-1)"/>
     </Document>    
</xsl:template> 
```

你只是想要

```
<xsl:template match="document">
     <Document>
        <xsl:apply-templates select="w:body/w:tbl"/>
        <xsl:sequence select="mf:group(body/p, 1,count(//w:body//w:p)-1)"/>
     </Document>    
</xsl:template> 
```

如果那不符合您的要求，请显示您想要的结果。

# javascript - 向 jquery 树对象添加值

> ID：13917361
> 
> 赞同：0
> 
> 时间：2012-12-17T15:47:36.417
> 
> 标签：javascript, jquery

假设我有一个这样的对象。

```
var t = {
    "obj1": {
        "obj1.1": "test",
        "obj1.2": {
            "obj1.1.1": null, // <-- "obj1.1.1" has to have a value.
            "obj1.1.2": "test"
        }
    }
}; 
```

以及我要添加值的节点的路径，即：

```
var path = ['obj1', 'obj1.1', 'test']; 
```

如何以编程方式添加值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T15:53:16.357

尝试这个：

```
function setDeepValue(obj, value, path) {
    if(path.length > 1){
        var p=path.shift();
        if(obj[p]==null || typeof obj[p]!== 'object'){
            obj[p] = {};
        }
        setDeepValue(obj[p], value, path);
    }else{
        obj[path[0]] = value;
    }
}

var obj = {};
var path = ['obj1', 'obj1.1'];
setDeepValue(obj, 'test', path);
console.log(obj); // {"obj1":{"obj1.1":"test"}} 
```

但是，您将需要修复您的对象：

```
var t = {
    "obj1": {
        "obj1.1": "test",
        "obj1.2": {
            "obj1.1.1": null, // <-- "obj1.1.1" has to have a value.
            "obj1.1.2": "test"
        }
    }
}; 
```

一个对象不能有一个没有值的键，所以`"obj1.1.1"`必须有一个值，即使它是`null`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T16:06:46.730

假设这个对象

```
var obj = {
      "obj1" : {
          "obj1.1" : "",
          "obj1.2" : {
             "obj1.1.1" : "",
             "obj1.1.2" : ""
             }
          }
      }

var path = ['obj1', 'obj1.1', 'test']; 
```

算法是：

```
var el = obj;
for(var i = 0; i < path.length-2; i++) {
     el = el[path[i]]; 
}
el[path[i]] = path[i+1]; 
```

或作为函数

```
function setpath(obj,path) {
    var el = obj;
    for(var i = 0; i < path.length-2; i++) {
        console.log(i+"="+path[i]);
         el = el[path[i]]; 
    }
    el[path[i]] = path[i+1];
    console.log(el);
}

setpath(obj,['obj1', 'obj1.1', 'test']); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-17T16:11:30.013

```
var tree = {
    "obj1": {
        "obj1.1": "test",
        "obj1.2": {
            "obj1.1.1": null,
            "obj1.1.2": "test"
        }
    }
};

var path = ['obj1', 'obj1.1', 'test']; 
```

设置“测试”的静态方式：

```
tree[path[0]][path[1]] = path[2]; 
```

用 newObj 替换 'test' 的静态方法：

```
var newObj = { ... };
tree[path[0]][path[1]][path[2]] = newObj; 
```

# css - 使用扩展程序中的规则覆盖主机页面 CSS 规则，而无需大量 !important

> ID：13917362
> 
> 赞同：2
> 
> 时间：2012-12-17T15:47:36.837
> 
> 标签：css, google-chrome-extension

我有一个扩展，它向页面添加了一些元素。我希望这些元素在每个站点上看起来都完全相同。考虑到有一些，呃，开发人员用“！important”编写他们的CSS规则，有没有办法覆盖这些规则而不在扩展的CSS中添加“！important”？也许有一些 CSS3 或 Chrome/Webkit 的专有方法可以做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T16:18:02.920

No, actually if someone use !important in the css rules there is no other way to overwrite without putting !important. For example,

`body{background:transparent !important}`

can be overwritten by using

`html body{background:blue !importamt}`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T17:37:08.593

使用父元素类定义您的类。您也可以使用 !important 关键字。

IE

```
<div class='my_parent'>
  <div class='class-1'>...</div>
  <div class='class-2'>...</div>
</div> 
```

在您的 .css 文件中

```
div.my_parent class-1{..}
div.my_parent class-2{..} 
```

# dns - 名称服务器响应未返回所有数据

> ID：13917363
> 
> 赞同：3
> 
> 时间：2012-12-17T15:47:37.993
> 
> 标签：dns, udp, response, nameservers

当我向具有 dnssec 的名称服务器发出请求时，响应有时不完整
，我在网上四处查看，发现了一些有关问题
*2.3.4 大小限制*
[https://www.rfc-editor.org/rfc/rfc1035的信息](https://www.rfc-editor.org/rfc/rfc1035)

它说`UDP messages 512 octets or less`

为了获得更大的响应，我需要`EDNS0`这样我才能收到最大的`4096 bytes.`我无法弄清楚如何使用/启用 EDNS0
*EDNS0 信息：*
[https ://www.rfc-editor.org/rfc/rfc2671](https://www.rfc-editor.org/rfc/rfc2671)
**编辑**
我必须发送我要求取回更多数据的 OPT RR。我有一个来自微软的例子，但他们使用的是 RRSIG 类型。我想使用 ANY 类型。
[http://img266.imageshack.us/img266/6707/optf.png](http://img266.imageshack.us/img266/6707/optf.png)

**问题：**
有人可以解释 EDNS0 的工作原理以及为什么我的 opt rr 不起作用。（我使用与 microsoft 示例相同的内容）

提前谢谢:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T15:19:47.860

出于某种奇怪的原因，我的请求现在有效。

请求我发送：
`01 01 01 00 00 01 00 00 00 00 00 01". domain2dns($domainname) ."00 00 ff 00 01 00 00 29 10 00 00 00 00 00 00 00`

**EDNS**部分的解释
`Name: 00
Type: 00 29
UDP Payload size: 10 00
Higher bits in extended RCODE:00
EDNS0 version: 00
Z: 00 00
Data Lenght: 00 00`

NAME - - 域名 - 空（根域）
TYPE - - u_int16_t ---- OPT
CLASS - u_int16_t ---- 发送者的 UDP 有效负载大小
TTL - - - u_int32_t ---- 扩展 RCODE 和标志
RDLEN - u_int16_t -- -- 描述 RDATA
RDATA - 字节流 - {attribute,value} 对

问题解决
了thx伙计们:)

# hibernate - 用于单向 1:n 关系的 Grails GORM 数据库映射

> ID：13917366
> 
> 赞同：1
> 
> 时间：2012-12-17T15:47:53.087
> 
> 标签：hibernate, grails, mapping, grails-orm, cardinality

我目前正在尝试基于旧的 MySQL 数据库创建一个新的 Grails 应用程序。应用程序应该只读取信息。具体的 DB 模式为特定的域类使用一个表，每个类层次结构，以及一个属性类，以向这些类添加新的所需信息。

目前我无法检索`transation`. 也不例外，但我也无法访问该字段`properties`。我可能面临的一个问题是，这个词`properties`是 Grails 的域字段的关键字。但由于特定的遗留表命名，我需要使用它。

遗留表被命名为`transaction`和`transaction_properties`。一个`transcation`可以有多个`transaction_properties`。关联是通过表`transaction_id`中的键完成的`transaction_properties`。

表**事务**

```
id  bigint(20)
transaction_id  varchar(255) (bad naming here, transaction_id is used to store additional meta information) 
```

表**transaction_properties**

```
transaction_id  bigint(20) -> referencing to transation.id
property_value  varchar(255)
property_key    varchar(32)
etc. 
```

领域类**事务**

```
class Transaction {

static hasMany = [properties : TransactionProperty]

static constraints = {
    //   transactionProperty unique: true
}

static mapping = {
    table "transaction"
    version false
    columns {
        id column : "id"
        beginDate column : "start"
        endDate column : "end"
        type column : "DTYPE"
        amount column : "total_amount"
        metaId column : "transaction_id"
        purchase column : "purchase_id"
        service column : "service_id"
        origin column : "origin_id"
        properties column : "id"
    }

}

Long id
Date beginDate
Date endDate
String type
String amount
String metaId

Purchase purchase
Origin origin
Service service
  etc.
  } 
```

域类**TransactionProperty**

```
 class TransactionProperty {

static mapping = {
    table "transaction_properties"
    version false
    columns {
        id name : "transaction_id"
        key column : "property_key"
        value column : "property_value"
    }
}

String value
String key
Long id

def asString(){
    return "${key} = ${value}"
}
   } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T20:13:13.937

你的代码是一团糟。

您需要`static belongsTo = [transaction: Transaction]`在 TransactionProperty 域类中添加一个。这将告诉 grails 使用该表中的外键而不是连接表。

您也不需要`Long id`在任一表中指定。这是在 Grails 中默认完成的。

在 Transaction 域类中删除这些列映射：

```
id column : "id"
properties column : "id" 
```

在 TransactionProperty 中，它在技术上没有主键（除非您对我们隐藏它），因此您必须使用 property_key 和 property_value 的复合键。

```
id name : "transaction_id" 
```

应该：

```
id composite: ['key', 'value'] 
```

在此处阅读此附加要求：http: [//grails.org/doc/latest/guide/GORM.html#5.5.2.5%20Composite%20Primary%20Keys](http://grails.org/doc/latest/guide/GORM.html#5.5.2.5%20Composite%20Primary%20Keys)

我修复课程的最佳尝试：

交易：

```
class Transaction {

static hasMany = [properties : TransactionProperty]

static constraints = {
}

static mapping = {
    table "transaction"
    version false
    columns {
        beginDate column : "start"
        endDate column : "end"
        type column : "DTYPE"
        amount column : "total_amount"
        metaId column : "transaction_id"
        purchase column : "purchase_id"
        service column : "service_id"
        origin column : "origin_id"
    }

}

Date beginDate
Date endDate
String type
String amount
String metaId

Purchase purchase
Origin origin
Service service

} 
```

交易属性：

```
import org.apache.commons.lang.builder.HashCodeBuilder

class TransactionProperty implements Serializable {

static belongsTo = [transaction: Transaction]

static mapping = {
    table "transaction_properties"
    version false
    columns {
        key column : "property_key"
        value column : "property_value"
    }
}

String value
String key

def toString(){
    return "${key} = ${value}"
}

boolean equals(other) {
    if (!(other instanceof TransactionProperty)) {
        return false
    }

    other.key == key && other.value == value
}

int hashCode() {
    def builder = new HashCodeBuilder()
    builder.append key
    builder.append value
    builder.toHashCode()
}
} 
```

# java - 调整 gwt 画布可见字段的大小，但不调整其内容？

> ID：13917368
> 
> 赞同：0
> 
> 时间：2012-12-17T15:47:56.083
> 
> 标签：java, gwt, java-canvas

我有一个网站，我想在主层中集成一个 GWT 画布。当我调整浏览器窗口的大小时，我希望画布“可见区域”相应地调整大小，但不是它的内容。不知何故，就像在谷歌地图中我只能看到已绘制的部分内容。

```
canvas.setSize(..)
canvas.setCoordinateSpaceHeight(..);
canvas.setCoordinateSpaceWidth(..); 
```

我必须设置什么才能

*   始终根据浏览器窗口调整画布大小
*   没有调整其内容的大小？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T16:23:55.883

所有三个属性。

您想`setSize`调整画布的大小，并且想让*坐标空间*（画布的“内部大小”）与其大小（其“外部大小”）相同，或者与调整大小之前的比例相同。

如果你从一个 300×200 的画布开始，坐标空间为 300×200（这样一个像素`Context2D`映射到一个 CSS 像素），你需要将画布的大小调整为 600×400，然后设置你想将坐标空间设置为600×400 也可以保持*1 个画布像素 == 1 个 CSS 像素*比率。

# mysql - 存储过程的Mysql语法错误

> ID：13917369
> 
> 赞同：0
> 
> 时间：2012-12-17T15:48:06.317
> 
> 标签：mysql, sql, stored-procedures

我从命令行将此代码作为 sql 脚本运行，我几乎在所有行中都收到“您的 SQL 语法有错误”！任何想法这里有什么问题？

```
CREATE PROCEDURE updatemandate()
 BEGIN
   DECLARE _mandate_id BIGINT(20);
   DECLARE _has_succesful_payment tinyint(1);
   DECLARE done INT DEFAULT 0;
   DECLARE cnt INT;
   DECLARE mandateCursor CURSOR FOR Select mandate_id, has_succesful_payment From mandates;
   DECLARE CONTINUE HANDLER FOR NOT FOUND SET done = 1; 
   OPEN mandateCursor;
   allmandates: LOOP
   Fetch mandateCursor INTO _mandate_id, _has_succesful_payment;
   IF done THEN LEAVE allmandates;
   END IF;
    Select COUNT(*) FROM payments WHERE mandate_id=_mandate_id AND status='OK' into cnt; 
            IF cnt>0 THEN
            SET _has_succesful_payment=1;
            END IF;

   END LOOP allmandates;
   CLOSE mandateCursor;
 END 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-17T15:52:35.903

该`;`字符是默认分隔符，所以当 MySQL 看到第一个时`;`，它认为你已经完成了。创建存储过程时，需要声明不同的分隔符，如下所示：

```
DELIMITER $$

CREATE PROCEDURE updatemandate()
READS SQL DATA
 BEGIN
   DECLARE _mandate_id BIGINT(20);
   DECLARE _has_succesful_payment tinyint(1);
   DECLARE done INT DEFAULT 0;
   DECLARE cnt INT;
   DECLARE mandateCursor CURSOR FOR Select mandate_id, has_succesful_payment From mandates;
   DECLARE CONTINUE HANDLER FOR NOT FOUND SET done = 1; 
   OPEN mandateCursor;
   allmandates: LOOP
   Fetch mandateCursor INTO _mandate_id, _has_succesful_payment;
   IF done THEN LEAVE allmandates;
   END IF;
    Select COUNT(*) FROM payment WHERE mandate_id=_mandate_id AND status='OK' into cnt; 
            IF cnt>0 THEN
            SET _has_succesful_payment=1;
            END IF;

   END LOOP allmandates;
   CLOSE mandateCursor;
 END$$

DELIMITER ; 
```

[如果您需要支持二进制日志记录](http://dev.mysql.com/doc/refman/5.0/en/stored-programs-logging.html)`READS SQL DATA`，将 sproc 添加到 sproc 定义也是一个好主意。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T15:54:17.393

您是否尝试过将语句放在语句`delimiter //`之前`CREATE`并用 更改最后一行`END //`？

# javascript - 骨干和苗条框架重定向路由 htacces

> ID：13917372
> 
> 赞同：0
> 
> 时间：2012-12-17T15:48:11.210
> 
> 标签：javascript, apache, .htaccess, backbone.js, slim

我正在尝试为我的骨干网和苗条的 Webapp 配置 htaccess。

这是我的根网址： `mysite.com/myproject/`

这是我组织目录的方式：

![目录](../Images/93c3979af0aa485c642cc8d6358b9019.png)

*   `server.php`，我使用 Slim 框架，并定义我的“路线”
*   一个包含 Slim 框架的目录，称为`data`
*   一个包含我的 Backbone 应用程序的目录，名为`js`

我想做类似`mysite.com/myproject/post`s 的事情来获取我的帖子的完整列表或`mysite.com/myproject/post/:id`获取一篇帖子

我知道我可以使用重定向来“模拟”不存在的 URL。理论上，如果我尝试`mysite.com/posts`，Apache/`.htaccess`重定向到`server.php`我的“路线”做我想做的事情并将我的结果返回到主干。

但无论我尝试过什么，似乎都有效。

**编辑**

我找到了部分解决方案。

我将 htaccess 和 server.php 文件移动到数据目录中。

这是我的 server.php 文件

```
<?php
    require_once("Slim/Slim.php");
    $app = new Slim();

    $app->get('/posts','getPosts');
    $app->get('/post/:id','getPost');

    $app->run();

    function getPosts() { echo "Hello world, get post list"; }
    function getPost($id) { echo "Hello world, get one post = ".$id; }
?> 
```

这是我的骨干收藏声明

```
window.PostList = Backbone.Collection.extend({
        model : Post,
        url:"data/posts",

        initialize : function() {
            console.log ("collection created.")
        }
    }); 
```

和 .htaccess 文件

```
RewriteEngine On
RewriteBase /myproject/data
RewriteCond %{REQUEST_FILENAME} !-f
RewriteRule ^(.*)$ server.php [QSA,L] 
```

在`fetch method`主干上，请求已发送到`http://mysite.com/myproject/data/posts` ，我可以看到控制台的响应`Hello world, get post list`

但我不能要求像`mysite/myproject/posts` 哪个值`RewriteBase`？哪个值`backbone collection`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T16:02:35.717

听起来您需要做的是创建一个[重写规则](http://httpd.apache.org/docs/2.0/misc/rewriteguide.html)，`mysite.com/posts`而不是 301 或 302 重定向。

因此，您需要将服务器重写`mysite.com/posts`为 server.php。这种方式`/posts`仍然是URL。

然后你会初始化你的主干路由器来启动并知道如何处理`/posts`

```
var my_router = new (Backbone.Router.extend())();
my_router.route('/path/:id', show_post);
Backbone.history.start({pushState: true, root: '/}); 
```

或类似的东西。

诀窍是浏览器中的 URL 需要与 Backbone 被告知路由的内容相匹配。之后，将不再从您的服务器调用路由，但如果它们必须重新加载或从头开始，您应该支持它们。

处理此问题的最佳方法是实际使您的重写规则类似于：

```
RewriteRule ^/posts/(.*?)    server.php?post=$1 [L,R] 
```

（或者取决于您的`server.php`脚本如何工作以及您希望您的 URL 结构如何工作）。

# c++ - C++ char 数组的 VB6 等价物是什么？

> ID：13917375
> 
> 赞同：0
> 
> 时间：2012-12-17T15:48:17.320
> 
> 标签：c++, dll, vb6, char

我正在尝试从 VB6 应用程序调用用 C++ 编写的 DLL。

这是调用 DLL 的 C++ 示例代码。

```
char firmware[32];
int maxUnits = InitPowerDevice(firmware); 
```

但是，当我尝试从 VB6 调用它时，我得到了错误`bad DLL calling convention`。

```
Public Declare Function InitPowerDevice Lib "PwrDeviceDll.dll" (ByRef firmware() As Byte) As Long

Dim firmware(32) As Byte
InitPowerDevice(firmware) 
```

**编辑：C++ 原型：**

```
Name: InitPowerDevice
Parameters: firmware: returns firmware version in ?.? format in a character string (major revision and minor revision)
Return: >0 if successful. Returns number of Power devices connected

CLASS_DECLSPEC int InitPowerDevice(char firmware[]); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-17T16:16:16.477

已经很长时间了，但我认为您还需要将 C 函数更改为 stdcall。

```
// In the C code when compiling to build the dll
CLASS_DECLSPEC int __stdcall InitPowerDevice(char firmware[]);

' VB Declaration
Public Declare Function InitPowerDevice Lib "PwrDeviceDll.dll" _
        (ByVal firmware As String) As Long

' VB Call
Dim fmware as String
Dim r  as Long
fmware = Space(32)
r = InitPowerDevice(fmware) 
```

我认为 VB6 不支持`cdecl`以任何正常方式调用函数 - 这样做可能会有一些技巧。可能你可以编写一个包装器，用一个函数`dll`包装函数并转发调用。`cdecl``stdcall`

这些是一些技巧-但我还没有尝试过。

[http://planet-source-code.com/vb/scripts/ShowCode.asp?txtCodeId=49776&lngWId=1](http://planet-source-code.com/vb/scripts/ShowCode.asp?txtCodeId=49776&lngWId=1)

[http://planet-source-code.com/vb/scripts/ShowCode.asp?txtCodeId=62014&lngWId=1](http://planet-source-code.com/vb/scripts/ShowCode.asp?txtCodeId=62014&lngWId=1)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T18:58:29.813

You need to pass a pointer to the beginning of the array contents, not a pointer to the SAFEARRAY.

Perhaps what you need is either:

```
Public Declare Function InitPowerDevice Lib "PwrDeviceDll.dll" ( _
    ByRef firmware As Byte) As Long

Dim firmware(31) As Byte
InitPowerDevice firmware(0) 
```

or

```
Public Declare Function InitPowerDevice CDecl Lib "PwrDeviceDll.dll" ( _
    ByRef firmware As Byte) As Long

Dim firmware(31) As Byte
InitPowerDevice firmware(0) 
```

The CDecl keyword only works in a VB6 program compiled to native code. It never works in the IDE or in p-code EXEs.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-17T16:22:43.293

由于您的错误是“错误的调用约定”，您应该尝试更改调用约定。默认使用 C 代码`__cdecl`，IIRC VB6 有一个`Cdecl`关键字可以与`Declare Function`.

否则，您可以更改要使用的 C 代码`__stdcall`，或使用类型信息和调用约定创建类型库 (.tlb)。这可能比`Declare Function`在定义类型库时使用 C 数据类型要好，但 VB6 可以很好地识别它们。

就参数类型而言，`firmware() As Byte`with `ByVal`(not `ByRef`) 应该没问题。

# c# - 来自 16 颜色位图的 GetHicon 返回颜色较少的图像

> ID：13917378
> 
> 赞同：0
> 
> 时间：2012-12-17T15:48:26.837
> 
> 标签：c#, .net, winforms

我有：

```
Icon icon = Icon.FromHandle(bitmap.GetHicon()); 
```

使用只有 16 种颜色（不是 16 位深度）的位图，但创建的图标的颜色少于位图。

我该如何解决这个问题？

# android - android库项目中的功能配置类

> ID：13917381
> 
> 赞同：0
> 
> 时间：2012-12-17T15:48:36.073
> 
> 标签：android

我在一个 android 库项目中使用带有一堆布尔常量的 Config 类，它在代码中切换某些功能，我有很多项目使用该库，但需要定义自己的配置，所以配置文件是也出现在这些项目中。问题是构建失败，因为库和项目都有一个 Config.java 类。这曾经可以工作，但从 ADT 17 开始，库 Config 类没有被覆盖。

我现在该如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T15:51:20.407

在 Config 类的定义中使用完整的包名，例如 android.app.Activity 而不是 Activity。

# asp.net-mvc - MVC 3 - 针对带小数点的数字的十进制类型验证

> ID：13917387
> 
> 赞同：2
> 
> 时间：2012-12-17T15:48:58.537
> 
> 标签：asp.net-mvc, asp.net-mvc-3, validation, decimal

在我的模型中，我使用十进制类型的字段：

```
public decimal Profit { get; set; } 
```

然后我在 Razor 编辑视图中使用模型（由 VS 向导生成）。从数据库加载的数字在输入字段中正确显示，例如 4 为 4,00（因为我的文化中的小数点是逗号）。

问题是当字段失去焦点时，我看到验证错误消息：*字段利润必须是数字。*

接下来，当我将逗号更改为失去焦点时，不会显示提到的消息，但是当我提交编辑表单时，它会生成验证错误消息：*值“3.4”对利润无效。*

它仅适用于没有点和逗号的数字。

如何通过 DataAnnotations （这将是最好的）或最多以其他方式解决它？

# c++ - 使用类型转换在 C++ 中返回二维数组

> ID：13917388
> 
> 赞同：0
> 
> 时间：2012-12-17T15:49:00.327
> 
> 标签：c++, arrays, pointers, multidimensional-array

```
int** function()
{
    int M[2][2] = {{1,2},{3,4}};
    return (int **)M;   //is this valid?
}

void anotherFn()
{
    int **p = new int*[2];
    for(int i = 0; i<2; i++) {
        p[i] = new int[2];
    }

    p = function();  
    cout << p[0][0]; 
} 
```

上面的代码编译但给出了运行时错误。那么，只有当它被声明为双指针时，我才能返回一个二维数组，还是有什么方法可以将一个数组作为二维指针返回？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-17T15:52:28.573

您将二维数组表示为指向 int 的指针。这是个坏主意。一个更好的主意是使用`std::vector<std::vector<int>>`. 更好的是使用专门的课程。但关键是，一旦你摆脱了指针，你就可以毫无问题地返回值：

```
matrix_2d function() {
    matrix_2d M = {{1, 2}, {3, 4}};
    return M;
} 
```

`matrix_2d`这对于（见上文）的适当定义非常有效。

[您的代码通过使用指针使整个过程变得更加复杂](http://tinyurl.com/fuckpointers)，并访问了无效内存。特别是，您在 main 函数中分配内存，但随后您通过使用以下结果*重新分配*指向该内存的指针来*丢弃*它：在内部您没有使用先前分配的内存，您正在使用堆栈分配的内存和返回一个指向它的指针。一旦函数退出，堆栈分配的内存就消失了。*`function()``function`*

 ** * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-17T15:49:58.057

要返回二维数组，请确保动态分配它，然后返回指针。您的代码的问题是您正在返回一个指向局部变量的指针，这将导致问题。

基本上，你会想做这样的事情（骨架）：

```
int** function()
{
    int** M;
    // Allocate M here
    return M;
} 
```*

# git - 向 git-flow 添加功能和发布分支

> ID：13917395
> 
> 赞同：0
> 
> 时间：2012-12-17T15:49:24.123
> 
> 标签：git, git-flow

我们已经有几个功能和发布分支，目前还没有被 git flow 跟踪（我们只是遇到了 git-flow）。

有什么方法可以将它们原样添加到 git flow 中？所以他们可以在以后被跟踪和合并？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T01:17:36.983

只要您在现有分支上加上您在使用期间选择的前缀`git flow init`就可以了。

git flow 不跟踪任何东西，至少 nvie 版本没有

# php - 在 jquery 中解析 json 数组

> ID：13917396
> 
> 赞同：0
> 
> 时间：2012-12-17T15:49:27.250
> 
> 标签：php, jquery, ajax, json

我有一个 php 函数，它返回如下所示的 json 数据：

```
 if ($result !== false) 
    {
        $resultdata = array(
        'status' => true,
        'error_msg'=>'',
        'data' => $result
        );
    }
    else 
    {
        $resultdata = array(
        'status' => false,
        'error_msg'=>"Unable to reassign port vlan.  Check Port mode.",
        'data' => $result
        );

    }       
    header ('Content-Type: application/json; charset=UTF-8');
    echo json_encode($resultdata); 
```

模型中的数据 ($result) 是这样构建的：

```
 $pattern = "/([0-9]+)(\s+)([0-9]+)(\s+)([a-z]+)(\s+)([a-z]+)(\s+)/i";
    if (preg_match($pattern, $this->_data, $matches)) 
    {
      $vlandetailsArray['VlanId']= $matches[1];
      $vlandetailsArray['Name']= $matches[3];
      $vlandetailsArray['Egress']= $matches[5];
      $vlandetailsArray['Type']= $matches[7];
    } 
```

我认为的代码如下所示：

```
 $.ajax({
                  url:fullpath,
                  type:'POST',
                  dataType:'json',
                  success: function(returnDataFromController) {
                    console.log(returnDataFromController);
                    if (returnDataFromController.status == true)
                    {
                      //build table contents 
                      var htmlstring = '<thead>';  
                      htmlstring = htmlstring + '<tr>';
                      htmlstring = htmlstring + '<th>VlanId</th>';
                      htmlstring = htmlstring + '<th>Name</th>';
                      htmlstring = htmlstring + '<th>Egress Rule</th>';
                      htmlstring = htmlstring + '<th>Port Membership Type</th>';
                      htmlstring = htmlstring + '<tbody>';
                      //should only be one entry so no need to loop

                     // htmlstring = htmlstring + "<tr>"
                      //htmlstring = htmlstring + "<td class ='vlanid'>" + returnDataFromController.VlanId + "</td>";
                      //htmlstring = htmlstring + "<td>" + returnDataFromController.Name + "</td>";
                      //htmlstring = htmlstring + "<td>" + returnDataFromController.Egress + "</td>";
                     // htmlstring = htmlstring + "<td>" + returnDataFromController.Type +"</td>";
                      //htmlstring = htmlstring + "</tr>";      

                      $('#assignedvlans').html(htmlstring);
                      $('#progress-indicator').hide();

                      }

                      else

                      {
                                  alert('my error message: ' + returnDataFromController.error_msg);
                      }
                                },//end success
                error:  function(jqXHR, textStatus, errorThrown)
                {
                          alert(errorThrown);
                } 
```

我想知道的是如何访问我的返回数组的“数据”部分和“error_msg”。现在，在执行 ajax 后，当状态为 false 时，出现的警报显示“我的错误消息：未定义”。但我没有收到有关“returnDataFromController.status”的任何错误消息

就数据而言，我尝试过：

```
 returnDataFromController.data.VlanId 
```

和

```
 returnDataFromController["#data"].VlanId 
```

但似乎都没有工作。当我没有返回数据周围的包装器数组时，被注释掉的代码曾经可以工作。我以前只是从控制器返回“$result”...

任何建议，将不胜感激。谢谢。

**更新 1** 顺便说一句，console.log 并没有真正帮助我。出于某种原因，在 Web 控制台中，我没有看到任何数据被转储在那里。我用的是火狐...

**更新 2**

当控制器为状态返回 true 时，这是我从 ajax 错误处理程序获得的错误消息：

> SyntaxError: JSON.parse: 意外字符

我已更改我的代码以使用：

```
 returnDataFromController.data.VlanId 
```

**更新 3**

为了简化问题，我尝试使用更基本的代码来重现我的问题。为此，这是我的控制器：

```
public function test()
{
    $mydata = array(
      'VlanID'=>80,
      'Name'=>'test vlan'
    );
   $data = array(
      'status'=> true,
      'error_msg'=>'all is well',
      'data'=>$mydata
   );
    header ('Content-Type: application/json; charset=UTF-8');
    echo json_encode($data);

} 
```

这是我的观点：

```
 $('#testbutton').click(function() {             
            $.ajax({                  
                url:'http://myserver/myapp/index.php/controller/test/',
                type:'POST',
                dataType:'json',
                success: function(returnDataFromController) {   
                 alert('success');
                 console.log(returnDataFromController);
                                    alert(returnDataFromController.data.VlanID);
                  },//end success
                error:  function(jqXHR, textStatus, errorThrown)
                {
                     alert('ajax error handler: ' + errorThrown);
                }                     
              }); //end ajax call 
```

当我单击测试按钮时，会发生以下情况： 1\. 我收到第一个显示“成功”的警报。2\. 没有任何内容写入控制台 3\. 我在控制台中收到以下错误消息 - 当尝试执行第二个警报“TypeError：returnDataFromController.data 未定义”时。

希望这个例子能简化事情并帮助找出我哪里出错了。谢谢。

**更新 4**

当我添加：

```
 alert(returnDataFromController.toSource()); 
```

我得到以下输出：

```
 ({VlanID:80, Name:"test vlan"}) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T18:10:28.853

尝试这个：

```
 $('#testbutton').click(function() {             
        $.ajax({                  
            url:'http://myserver/myapp/index.php/controller/test/',
            type:'POST',
            dataType:'json',
            success: function(returnDataFromController) {   
             alert('success');
             console.log(returnDataFromController);
            alert(returnDataFromController.VlanID);
              },//end success
            error:  function(jqXHR, textStatus, errorThrown)
            {
                 alert('ajax error handler: ' + errorThrown);
            }                     
          }); //end ajax call 
```

# php - 关系数据库中的搜索功能

> ID：13917397
> 
> 赞同：0
> 
> 时间：2012-12-17T15:49:29.510
> 
> 标签：php, jquery, mysql

我正在尝试创建一个搜索功能，用户可以通过选择他们感兴趣的多种音乐风格（通过复选框）找到事件列表。每个事件都可以附加多种音乐风格，如果其中一个搜索与事件匹配的音乐风格 - 然后它应该出现。

这就是我卡住的地方，因为每个事件都有多种音乐风格，它们必须存储在不同的表中。

一张表`events_music_styles`包含**event_ID**和**music_style_ID** ，第二张表包含`music_styles`不同语言中这些音乐风格的名称。

这就是我在 MySql 中加入它们的方式，当我想显示所有事件及其相应的音乐风格时，它可以很好地工作。

```
SELECT
    events.ID,
    events.EVENT_NAME,
    GROUP_CONCAT(music_styles.MUSIC_STYLE_NAME) AS MUSIC_STYLE_NAME
FROM events
INNER JOIN events_music_styles
    ON events.ID = events_music_styles.event_id
INNER JOIN music_styles
    ON events_music_styles.music_style_id = music_styles.id
GROUP BY events.ID 
```

但是，当我提交搜索查询时，数据变量如下所示：`var MusicStyles = 1,2,3,5,20`.... 这些数字中的每一个都应该是`events_music_styles`.

我将如何拆分这些数字并将它们发送到我的 php 文件，看起来像这样？

```
var MusicStyles = $("#music").val();
$.ajax({
                type: "POST",
                url: "do_search.php",
                data: {
                    dataFromDate: FromDate,
                    dataToDate: ToDate,
                    dataMusicStyles: MusicStyles,
                    dataLocations: Locations,
                    dataFromPrice: FromPrice,
                    dataToPrice: ToPrice
                } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T16:02:03.250

我看到您已经将 MusicStyles 变量传递给 PHP。我只是重读了代码，发现它是一个字符串。

我没有测试或检查查询。我假设您的代码正在将字符串传递给 PHP，您需要做的就是在查询中使用它。您的查询将更改为：

```
<?php
// Split the input and filter it (for security)
$styles = array();
foreach (explode(",", $_POST['dataMusicStyles']) as $style_id)
{
    $style_id = (int)trim($style_id);
    if ($style_id)
    {
        $styles[] = $style_id;
    }
}
$styles = implode(",", $styles);

$sql = "SELECT
    events.ID,
    events.EVENT_NAME,
    GROUP_CONCAT(music_styles.MUSIC_STYLE_NAME) AS MUSIC_STYLE_NAME
FROM events
INNER JOIN events_music_styles
    ON events.ID = events_music_styles.event_id
INNER JOIN music_styles
    ON events_music_styles.music_style_id = music_styles.id
WHERE events_music_styles IN ($styles)
GROUP BY events.ID";

// Execute the SQL and process the results.
?> 
```

您无需在此处更改 Javascript 部分。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T15:54:07.010

我认为您应该在 php 文件部分中为音乐样式创建一个数组，然后使用 mysql 中的 in_array() 函数来选择 event_events 或音乐...

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-17T15:56:54.253

您可以保留 javascript 部分原样。在 PHP 端，您可以在 SQL`IN()`语句中使用逗号分隔的列表。

```
<?php

// JQuery as used in the question will send the 'MusicStyles' post var in 
// array form. This means that the raw post contains multiple occurences 
// of 'MusicStyles[]'. Note the [] at the end.
// PHP will convert such post vars automatically to an array.  
// In this case we'll have to flatten the array to a comma separated list first
if(is_array($_POST['MusicStyles'])) {
    $musicStyles = implode(',', $_POST['MusicStyles']);
} else {
    $musicStyles = $_POST['MusicStyles'];
}

$query = 
"SELECT
    events.ID,
    events.EVENT_NAME,
    GROUP_CONCAT(music_styles.MUSIC_STYLE_NAME) AS MUSIC_STYLE_NAME
FROM events
INNER JOIN events_music_styles
    ON events.ID = events_music_styles.event_id
INNER JOIN music_styles
    ON events_music_styles.music_style_id = music_styles.id";

if(!empty($musicStyles)) {
    // you can use the comma separated list as param for the IN statement
    $query .= " WHERE music_styles.id IN($musicStyles)";
}

$query .= " GROUP BY events.ID";

// ... 
```

注意：这只是一个例子。当然，您应该在 MySQL 语句中使用传入的 $_POST 值之前对其进行验证。

# jquery - jQuery自动调整大小不起作用

> ID：13917398
> 
> 赞同：-2
> 
> 时间：2012-12-17T15:49:37.827
> 
> 标签：jquery, html, css

我想使用 jquery 在 div(#bg) 中添加图像来创建自动调整大小的网页。到目前为止，我已经这样编码，但是自动调整大小有一些问题。如果我手动将图像添加到 div 则一切正常。如果你能详细说明你的答案，我是 jquery 的新手。提前致谢。

HTML

```
<div id="bg">​
</div>` 
```

CSS

```
#bg { position: fixed; top: 0; left: 0; }
.bgwidth { width: 100%; }
.bgheight { height: 100%; }` 
```

jQuery

```
$(window).load(function() { 

    $('#bg').prepend('<img src="Background.jpg" id="bg" alt="" />')

var theWindow        = $(window),
    $bg              = $("#bg"),
    aspectRatio      = $bg.width() / $bg.height();

function resizeBg() {

    if ( (theWindow.width() / theWindow.height()) < aspectRatio ) {
        $bg
            .removeClass()
            .addClass('bgheight');
    } else {
        $bg
            .removeClass()
            .addClass('bgwidth');
    }

}

theWindow.resize(resizeBg).trigger("resize");

}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T16:00:53.487

几天前我写了一个类似的功能：

**HTML**

```
<img src="http://ge.tt/api/1/files/1jN8IzR/0/blob?download" class='bg'> 
```

**CSS** *并不真正需要*

```
.bg {
    position: fixed;
    top: 0;
    left: 0;
    z-index: -1
} 
```

**JS**

```
var fitPic = (function() {
    var winW = $(window).width(),
        winH = window.innerHeight || $(window).height(); // `innerHeight` for mobile safari

    $(".bg").each(function() {

        var elem = $(this),
            elemW = elem.width(),
            elemH = elem.height(),

            imgW = (elemW * winH) / elemH,
            imgH = (elemH * winW) / elemW,

            newW = imgH < winH ? imgW : winW,
            newH = imgH < winH ? winH : imgH;

        this.style.width = newW + "px";
        this.style.height = newH + "px";

    });
});

$(window).on('load resize', fitPic); 
```

# jquery - 如何更改每个图像的叠加颜色？

> ID：13917400
> 
> 赞同：2
> 
> 时间：2012-12-17T15:49:40.790
> 
> 标签：jquery, fancybox, fancybox-2

我正在使用 FancyBox 2，我想自定义覆盖颜色；我希望这种颜色与`div`单击的父级匹配。

例如：

```
<div style="background-color:#000"><a class="fancybox"...><img ...></div>
<div style="background-color:#111"><a class="fancybox"...><img ...></div> 
```

## 花式盒代码

```
$(".fancybox").fancybox( {
    padding:0,
    helpers : {
        overlay : { 
            css : { 'background-color' :  **PARENT'S COLOR** }
        }
    }
}); 
```

如何在上面的代码中自动设置正确的颜色？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T18:40:19.500

最简单的方法是使用`beforeShow`回调动态获取父级的颜色并将其直接应用于`.fancybox-overlay`选择器，例如：

```
$(".fancybox").fancybox({
    beforeShow: function() {
        var parentColor = $(this.element).parent().css('backgroundColor');
        $(".fancybox-overlay").css({
            "backgroundColor": parentColor,
            "backgroundImage": 'none' // optional if you prefer a solid color
        });
    }
});​ 
```

见**[演示](http://jsfiddle.net/6KgFY/)**

# zend-framework - 所有控制器中都有可用的变量？

> ID：13917403
> 
> 赞同：1
> 
> 时间：2012-12-17T15:49:57.047
> 
> 标签：zend-framework

在哪里以及如何设置所有控制器中可用的变量值。我不会使用 zend 注册表，也不想扩展 Zend_Controller_Action。还有其他方法吗？我只想设置：

```
$a = "测试";
```

并在索引控制器中转储它：

```
类 IndexController 扩展 Zend_Controller_Action {

    公共函数 indexAction(){

            var_dump($a);
        }
}

```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T16:35:54.413

全局变量破坏了面向对象编程的目的......使用命名空间或自定义配置。

### 解决方案 1

使用会话 Zend_Session_Namespace，这里是[关于如何使用 Zend_Session_Namespace 的文档](http://framework.zend.com/manual/1.12/en/zend.session.basic_usage.html)。

1.  在引导程序或其他东西（无论您认为合适的地方）中设置名称空间中的值
2.  从控制器/模型/其他中的命​​名空间中检索值

### 解决方案 2

或者，您可以创建一些具有静态属性的新类，并使用它的 setter/getter 来设置和检索值。

例如

```
class SomeClass
{    
    static $hello = 'world';
}

class IndexController extends Zend_Controller_Action
{
    public function indexAction()
    {
        var_dump(SomeClass::$hello);
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T14:16:10.107

您可以将变量添加到请求对象：

```
$this->getRequest()->setParam('a', 'hello'); 
```

然后使用以下方法检索它：

```
$this->getRequest()->getParam('a); 
```

但这不是最好的方法，因为您可能会不小心将参数覆盖为所需的参数。

# javascript - 为什么页面跳转链接在 IE 中有效，而在 Mozilla 中无效？

> ID：13917405
> 
> 赞同：1
> 
> 时间：2012-12-17T15:50:02.050
> 
> 标签：javascript, html

> **可能重复：**
> [如何插入页面跳转并在同一页面内打开选项卡](https://stackoverflow.com/questions/13848059/how-to-insert-a-page-jump-and-open-a-tab-within-the-same-page)

我正在尝试插入一个页面跳转，它在同一页面中打开一个新选项卡。此链接将进入 ebay 模板。列表应该有一个链接，该链接将打开退货政策（标签 3）

我最初使用了下面的代码，它**在 IE 和 Mozilla 中工作，但只会打开选项卡**而不跳到页面。

```
<a href='#nogo' onclick="show('tab3')">Click Here To View Warranty Details</a> 
```

下面的代码**工作并打开选项卡 3**并将页面向下滚动到退货政策，**但不适用于 mozilla only IE**。在 Mozilla 中，我什至无法单击此链接，但我确实看到了。

```
<a href='#infoTabs' onclick="show('tab3')">Click Here To View Warranty Details</a> 
```

这是显示返回选项卡 3 和 4（只是看看选项卡 3 和 4 是如何流动的）

```
 <!-- tab 3 --><a name="returns"></a>
        <div id="tab3">
        <ul class="tablinks">
            <li><a href="#nogo" onclick="return show('tab1')">Shipping</a> </li>
            <li><a href="#nogo" onclick="return show('tab2')">Payment</a> </li>
            <li><span>Return Policy</span> </li>
            <li><a href="#nogo" onclick="return show('tab4')">General Info</a> </li>
            <li><a href="#nogo" onclick="return show('tab5')">Intl. Shipping</a> </li>
        </ul>
        <h4 class="tabtitle">Return Policy</h4>
        <ul class="tabinfo"><strong><span style="font-family: verdana, arial, helvetica, sans-serif; color: #293d86;">AudioSavings Return Policy:</span></strong><span style="font-family: verdana, arial, helvetica, sans-serif;"><br />
            <br />
            <strong><span style="color: #293d86;">At Audiosavings, we strongly believe in customer satisfaction and therefore offer a friendly return policy.</span></strong><strong><span style="color: #293d86;"> </span></strong><br />
            <br />
            You may return items to Audiosavings within <strong><span style="color: #293d86;">30 DAYS</span></strong> of purchase. <br />
            <br />
            Warranty Repair Period: <strong><span style="color: #293d86;">1 YEAR</span></strong><br />
            <br />
            <strong><span style="color: #293d86;">Prior to returning merchandise to us you must request a Return Merchandise Authorization Number (RMA#). The RMA# will be valid for 15 days from the date it was issued. </span></strong><strong><span style="color: #293d86;"></span></strong><br />
            <br />
            <strong><span style="color: #293d86;">Defective items</span></strong><br />
            We will replace a defective unit with the same unit within the 30 day period. If for any reason you prefer to exchange your item for a different product, we will issue a store credit for the full price of the item, minus the outgoing shipping costs that were paid to ship the original item to you. Refunds are also available during the initial 30 day period. Refunds are subject to a 10% processing fee and a deduction of the outgoing shipping costs from the total refund amount. If you prefer that we simply replace the item, then there will be no fee charged.<strong><span style="color: #293d86;"></span></strong><br />
            <br />
            <strong><span style="color: #293d86;">Exchanges for different items</span></strong><strong><span style="color: #293d86;"> </span></strong><br />
            If you purchase an item and for any reason want to exchange it for a different product, we are happy to help you do so as long as you contact us within 30 days from the original date of purchase. If the returned item is brand new and still factory sealed, we will issue a store credit for the full price of the item, minus the outgoing shipping costs that were paid to get the original item to you. If the item comes back to us in used or open box condition, there will be in addition to the shipping charges, a 10% processing fee deducted from the issued store credit. (When items are returned that can no longer be sold as brand new, we must then sell them at a significantly cheaper price, therefore we must charge a 10% processing fee for open box return items).<br />
            <br />
            <strong><span style="color: #293d86;">Refunds</span></strong><br />
            Refunds are available within 30 days of the original date of purchase. All refunds will have a 10% processing fee assessed, and the outgoing shipping costs that were paid will also be deducted from the refund total. Please remember, if you choose to exchange the item, and the returned item is still factory sealed, there will be NO processing fee assessed.<strong><span style="color: #293d86;"></span></strong><br />
            <br />
            <strong><span style="color: #293d86;">Replacement/Processing Time</span></strong><br />
            We work hard to process returns as quickly as possible. Your replacement or refund will process within 4 business days of when we receive the item and inspect it at our store. We can only exchange items after we&rsquo;ve received the returned items. <br />
            <strong><span style="color: #293d86;">NOTE:</span></strong> If you need the item sooner, you may choose to do an advanced exchange; wherein you would place a new order for the item, and send back the item you wish to exchange for a full refund with no processing fee, as long as all included pieces and accessories are received with the returned item. <br />
            <br />
            <strong><span style="color: #293d86;">Return shipping</span></strong> <br />
            We will cover all outgoing shipping costs incurred to ship the newly exchanged item to you. The return shipping costs required to ship the item back to our store, are always paid by the customer. <br />
            <br />
            <strong><span style="color: #293d86;">Past 30 days</span></strong><br />
            If the product develops a defect past the first 30 days, we will send you the necessary warranty information to get the item repaired or exchanged (depending on the manufacturer). If any customer has any issue processing a warranty with a manufacturer, we will get involved and do our best to make sure your item gets serviced.<br />
            <br />
            <strong><span style="color: #293d86;">Return Exceptions</span></strong> <br />
            While we always do our best to take back any and all returns, there are a few exceptions of items that cannot be returned to our store due to the fact that the manufacturers will not accept these items back from us. The following are examples of items that cannot be returned:<br />
            <br />
            <ul class="tabinfo">
                <li>Items with physical damage un-related to shipping, i.e., cracked or broken items are not covered under warranty. In the case that you receive an item that has physical damage that occurred during shipping, please notify us within <strong><span style="color: #293d86;">48 hours</span></strong> of when you received the item, and you will be taken care of immediately. </li>
                <li>You <strong><span style="color: #293d86;">MUST notify us within 48 hours</span></strong> if you receive an item that was damaged during shipping. </li>
                <li>Software that has already been registered or installed cannot be returned </li>
                <li>Blown speakers or subwoofers that have burned voice coils or punctured holes are not supposed to be covered under warranty, but we will still <strong><span style="color: #293d86;">do our best</span></strong> to help you get coverage. </li>
            </ul>
            <strong><span style="color: #293d86;">We will always do our best to warranty your product!</span></strong><br />
            <br />
            <strong><span style="color: #293d86;">Process for returning items</span></strong> <br />
            In order to best serve you please follow the instructions below: <br />
            Please <a href="http://contact.ebay.com/ws/eBayISAPI.dll?FindAnswers&amp;redirect=0&amp;requested=audiosavings" target="_blank">email us</a> with <br />
            <ul class="tabinfo">
                <li>Your eBay user ID </li>
                <li>Item code / model # </li>
                <li>Condition of the item (ex: Brand New Sealed, Open Box NEW, Used, Defective) </li>
                <li>The reason for your return </li>
                <li>Please indicate whether you would like an exchange, store credit or a refund. </li>
            </ul>
            We will supply you with a reference number (RMA #) to put on the package which will ensure quick processing of your return. &nbsp;<strong><span style="color: #293d86;">All returns require a RMA# to be returned back to our facility.</span></strong> We will promptly reply back with helpful instructions on how to return the product.</span> <br />
            &nbsp;</ul>
            </div>
            <!-- tab 4 --><a name="info"></a>
            <div id="tab4">
            <ul class="tablinks">
                <li><a href="#nogo" onclick="return show('tab1')">Shipping</a> </li>
                <li><a href="#nogo" onclick="return show('tab2')">Payment</a> </li>
                <li><a href="#nogo" onclick="return show('tab3')">Return Policy</a> </li>
                <li><span>General Info</span> </li>
                <li><a href="#nogo" onclick="return show('tab5')">Intl. Shipping</a> </li>
            </ul>
            <h4 class="tabtitle">General Info</h4>
            <ul class="tabinfo">
                <li><b>Sales Tax:</b> 8.625% in New York only </li>
                <li>Please only click on the buy it now button once if you want one item. </li>
                <li>Our goal is to satisfy all our customers by offering the best possible customer service, and a great selection of great products. </li>
            </ul>
            </div>

<!-- tab 5 --><a name="about"></a>
            <div id="tab5">
            <ul class="tablinks">
                <li><a href="#nogo" onclick="return show('tab1')">Shipping</a> </li>
                <li><a href="#nogo" onclick="return show('tab2')">Payment</a> </li>
                <li><a href="#nogo" onclick="return show('tab3')">Return Policy</a> </li>
                <li><a href="#nogo" onclick="return show('tab4')">General Info</a> </li>
                <li><span>Intl. Shipping</span> </li>
            </ul>
            <h4 class="tabtitle">International Shipping</h4>
            <ul class="tabinfo">
                <li><b>International Buyers - Please Note:</b><br />
                Import duties, taxes and charges are not included in the item price or shipping charges. These charges are the buyer's responsibility. Please check with your country's customs office to determine what these additional costs will be prior to bidding/buying. </li>
                <li><b>For International Customers only:</b> <br />
                Please be advised that for 120 Volt product, you will need a 
                step-down transformer if you live in a country that uses 220 
                Volt outlets. Car products will work without a transformer. </li>
            </ul>
            <p><br />
            </div>
            <script> var shown = document.getElementById('tab1'); function show(id) { if (shown) shown.style.display = 'none'; shown = document.getElementById(id); shown.style.display = 'block'; return false; } </script>
            </div>
            <center><b>Item Code: ##item_cd##</b><br />
            <br />
            <a href="#top">Top</a> </center></div>
            </div>
            <div></div>
            </td>
        </tr>
        <tr>
            <td id="tru_footer">&nbsp;</td>
        </tr>
    </tbody>
</table> 
```

有谁知道如何解决这个问题以及为什么会这样？

这是链接 [http://www.ebay.com/itm/MA-AUDIO-HK-802SX-4400w-RMS-2-CH-CAR-AMPLIFIER-HK802SX-/390483744599?pt=Car_Amplifiers&vxp=mtr&hash=item5aeaa51757](http://www.ebay.com/itm/MA-AUDIO-HK-802SX-4400w-RMS-2-CH-CAR-AMPLIFIER-HK802SX-/390483744599?pt=Car_Amplifiers&vxp=mtr&hash=item5aeaa51757)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T18:09:43.643

看起来您没有得到您正在寻找的“跳跃”的原因是因为您没有具有正确名称的锚点。

如果你有这个：

```
<a href='#infoTabs' onclick="show('tab3')"> 
```

那么你必须有一个对应的：

```
<a id="infoTabs"></a> 
```

我注意到您有一个名为 的锚点 `info`，因此您应该重命名锚点或 href 以使它们相同。

但要确定这是问题所在，我们需要查看 `show`函数的内容。

# asp.net - 部分回发时的 Header.Stylesheet.CreateStyleRule

> ID：13917409
> 
> 赞同：2
> 
> 时间：2012-12-17T15:50:24.437
> 
> 标签：asp.net, ajax, vb.net, asynchronous-postback

我最近向单个网页添加了一个 UpdatePanel，它在按钮单击时呈现不同的用户控件。我正在努力解决一个问题，我正在使用 Header.Stylesheet.CreateStyleRule 动态地将内联样式添加到标题中 - 问题是它没有插入到部分回发中并且它确实有意义。这显然是因为它是部分回发，并且仅在页面第一次加载时才呈现标头。

样式是通过以下方法添加的，这些方法从数据库中获取样式：

```
Private Sub InitializeStylesheet(ByVal ButtonId As Integer)
    Dim CSSStylesheet As Stylesheet = StyleBackend.GetStylesheets(ButtonId)
    Dim IdClassList As List(Of StyleIDClass) = StyleBackend.GetStylesheetsStyleIDClass(CSSStylesheet.StylesheetID)
    'Iterates through the cssidclass
    For Each cssidClass In IdClassList
        Dim styleItems As List(Of StyleItem) = StyleBackend.GetStyleItemsByIDorClass(cssidClass.StyleIDClassID)
        Dim cssString As String = Nothing
        For Each StyleItem As StyleItem In styleItems
            cssString += StyleItem.Property & ":" & StyleItem.Value & ";"
        Next
        'Iterates all cssitems which belongs to a cssidclass
        Me.Header.StyleSheet.CreateStyleRule(New CustomStyle(cssString), Nothing, cssidClass.ClassOrID)
        Me.Header.ViewStateMode = UI.ViewStateMode.Disabled
    Next
End Sub 
```

我一直在搜索我的屁股试图让它工作，但这似乎是不可能的。

这篇 msdn 文章字面意思是说，做我想做的事是不可能的。 [http://msdn.microsoft.com/en-us/library/system.web.ui.htmlcontrols.htmlhead.stylesheet.aspx](http://msdn.microsoft.com/en-us/library/system.web.ui.htmlcontrols.htmlhead.stylesheet.aspx)

> 不支持在异步回发期间以编程方式添加样式或样式规则。当您将 AJAX 功能添加到 ASP.NET 网页时，异步回发会更新页面的区域而不更新整个页面。有关详细信息，请参阅 Microsoft Ajax 概述。

有没有人有这样做的建议或替代方法？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T15:58:58.340

一种解决方案是将样式包含在主样式表中，而不是动态修改它们。即使它们是数据驱动的，如果总列表不是太大，您也可以通过 HTTP 处理程序将它们与主页一起输出。

或者（并且可能更有效），您可以将样式数据作为字符串返回给客户端并在那里进行处理。

您可以在客户端脚本管理器上侦听 EndRequest 事件：

```
function endRequest(){
    // look at the updated DOM     
}

Sys.WebForms.PageRequestManager.getInstance().add_endRequest(endRequest); 
```

也许是以下顺序：

*   启动异步回发
*   将样式渲染到内部的隐藏字段`UpdatePanel`
*   在 上`endRequest`，检查 DOM 以查看它是否包含带有样式的隐藏字段（基于命名约定、数据属性或仅 ID）
*   从隐藏字段中获取值并使用 JavaScript[将它们添加到页面的样式规则中](https://stackoverflow.com/q/707565/453277)

# css - 使垂直的 Wordpress 导航栏子菜单水平

> ID：13917412
> 
> 赞同：0
> 
> 时间：2012-12-17T15:50:41.757
> 
> 标签：css, wordpress, uinavigationbar, navbar, horizontallist

我想更改我的 Wordpress 导航栏，以便当您将鼠标悬停在带有子页面的页面上时出现的下拉菜单水平定位，而不是垂直定位。我的“主”导航栏已经是水平的，我希望“子导航栏”也是如此。

一张图说一千个字：

当前（不悬停）...
| 第 1 页 | 第 2 页 | 第 3 页 | 第 4 页 |

当前（鼠标悬停在第 2 页上）...

```
| 第 1 页 | 第 2 页| 第 3 页 | 第 4 页 |
         | 子页面 1 |
         | 子页面 2 |
         | 子页面 3 |
         | 子页面 4 |
         | 子页 5 |

```

我想要什么（鼠标悬停在第 2 页上）...

```
| 第 1 页 | 第 2 页| 第 3 页 | 第 4 页 |
         | 子页面 1 | 子页面 2 | 子页面 3 |
| 子页面 4 | 子页 5 |

```

我希望这很清楚——为了记录，我使用的是**拳头**主题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T15:54:40.380

找到子导航的 id 或类 - 并使用`float:left`它们使它们彼此相邻而不是彼此下方排列。

# javascript - Javascript 排序标题数组的方式与根据数据数组相同

> ID：13917416
> 
> 赞同：2
> 
> 时间：2012-12-17T15:50:55.880
> 
> 标签：javascript, arrays, string, sorting

我在 javascript 中有一个排序问题，我需要对数组进行排序并以相同的顺序（降序）对标题（保存在另一个数组中）进行排序，我怎样才能以相同的方式对它们进行排序？

为了我的帖子清晰起见，我将其简化为一个基本示例：

```
var arr = Array(9, 5, 11, 2, 3);
var arrCaptions = Array("some text","another bit of text","three", "four?", "maybe five?"); 
```

现在我想运行一种排序机制，以与*arr*数组相同的方式对*arrCaptions*数组进行排序，因此您将得到以下结果：

 *```
var arrResult = Array(11, 9, 5, 3, 2);
var arrCaptionsResult = Array("three", "some text" ,"another bit of text", "maybe five?", "four?"); 
```

到目前为止我所尝试的根本不起作用：

```
var numlist = Array(9, 5, 11, 2, 3);
var list = Array("four?","maybe five?","another bit of text","some text","three");

var resultnumlist = Array();
var resultlist = Array();

resultnumlist[0] = numlist[0];
resultlist[0] = list[0];

for (i = 0; i < list.length; i++) {
     var i2 = list.length - 1;
     while (numlist[i] < resultnumlist[i2]) {
        i2--;
     }
     resultnumlist.splice(i2 - 1,0,numlist[i]);
     resultlist.splice(i2 - 1,0,list[i]);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T15:55:04.893

将它们捆绑在一个对象中。

```
var stuff = [{
    id: 9,
    text: "text hello"
}, {
    id: 5,
    text: "text world"
}, {
    id: 11,
    text: "text test"
}, {
    id: 2,
    text: "text 23"
}];

stuff.sort( function( a, b ) {
     return a.id - b.id; //Objects are sorted ascending, by id.
}); 
```

结果是：

```
[{
    "id": 2,
    "text": "text 23"
}, {
    "id": 5,
    "text": "text world"
}, {
    "id": 9,
    "text": "text hello"
}, {
    "id": 11,
    "text": "text test"
}] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-17T15:56:31.460

将它们组合成一个数组怎么样？然后，您可以根据数字的值对这个数组进行排序，并且标题会串联排序：

```
//Your arrays
var arr = [9, 5, 11, 2, 3];
var arrCaptions = ["some text", "another bit of text", "three", "four?", "maybe five?"];

//The composite array
var composite = arr.map(function(v, i) {
    return {
        rank: v,
        caption: arrCaptions[i]
    };
});

//Sort this array
composite.sort(function(a, b) {
    return a.rank - b.rank;
});

console.log(composite); 
```

这是一个演示：http: [//jsfiddle.net/cFDww/](http://jsfiddle.net/cFDww/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-17T17:19:39.633

这是您修改后的代码：

```
 var numlist = Array(9, 5, 11, 2, 3);
  var list = Array("nine?","maybe five?","another bit of 11","some 2","three");

  var resultnumlist = new Array();
  var resultlist = new Array();

  for (i = 0; i < list.length; i++) {
       var i2 = resultnumlist.length - 1;
       while ((numlist[i] < resultnumlist[i2]) && (i2 >= 0)) {
          i2--;
       }
       i2++;
       resultnumlist.splice(i2, 0, numlist[i]);
       resultlist.splice(i2, 0, list[i]);
  }
  console.log(resultlist);
  console.log(resultnumlist); 
```

[看到它工作](http://jsbin.com/awaveb/4/watch)*

# mobile - Mobinuke 不加载 CSS 文件

> ID：13917417
> 
> 赞同：1
> 
> 时间：2012-12-17T15:50:56.270
> 
> 标签：mobile, dotnetnuke

我正在为最初基于 DNN 4.8.2 的网站开发一个移动项目。由于 mobinuke 2 不再可供购买，我不得不将站点升级到 5.4.5 才能与 mobinuke 3 一起使用。我们完成了移动皮肤只是意识到 DNN 5 存在一些主要的性能问题。结果，我们将整个站点升级到了 6.1.2（它应该仍然与 mobinuke 3 兼容）。

我们现在遇到的问题是 mobinuke 不再加载任何 CSS 文件。不是 mobinuke 皮肤文件夹中的 CSS 文件，也不是任何 module.css 文件。显然我可以解决这个问题并手动加载我需要的所有 CSS 文件。但是由于模块应该工作并加载这些文件，我很想知道是否有其他人遇到过这个问题，以及他们是否找到了除了手动加载 CSS 文件之外的任何解决方案。

谢谢！

# web-applications - 部署现有网站的移动 Web 应用程序

> ID：13917419
> 
> 赞同：0
> 
> 时间：2012-12-17T15:50:57.610
> 
> 标签：web-applications, mobile, deployment

有一个网站，我需要基于该网站开发一个移动网络应用程序。我的想法是：

当用户通过浏览器访问网站，并且设备是移动设备（智能手机、平板电脑）时，显示的是网络应用程序而不是现有网站。（就像 Youtube 网站发生的事情一样）

所以我有几个问题：

1.  我可以开发移动 Web 应用程序（使用 Appcelerator、Sencha Touch、jQuery 等框架）并在将其部署到站点的同一 Web 服务器之后吗？
2.  我需要对网站代码进行更改，或者我可以独立进行吗？

任何形式的帮助将不胜感激。一些链接或示例会很棒！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T03:35:55.323

是的，是的。

基本上，您将移动网站放在自己的子域（如 m.yourname.com）或子文件夹（如 yourname.com/m）中。这根本不需要触摸您的网站。

然后，您（通常）在当前网站上使用服务器端检测来猜测哪些用户会被转发到移动域或 URL。

通常，您在移动网站上有一个链接可以返回到非移动网站。您可以使用 cookie 来记住他们是否不想访问移动网站，这样他们就不会在几秒钟内自动转回该网站。

# node.js - Node.JS 异步加载模块

> ID：13917420
> 
> 赞同：12
> 
> 时间：2012-12-17T15:51:03.400
> 
> 标签：node.js, asynchronous, module, require

我希望能够加载已更改的模块。我当然必须先[卸载模块](https://stackoverflow.com/a/6677355/463304)。由于这是一个网络服务器设置，我想问是否有办法以异步方式加载模块，以避免在读取更新文件期间冻结网络服务器。

不久前 Node.JS 删除了该`require.async`功能。那么，在最新版本的 Node.JS 上，推荐的替代方案是什么？

*   我是否应该先阅读整个文件，然后使用`Module`库来解析文件内容。（与采用文件名在内部读取和解析的默认功能相反）如何？
*   我应该将这项工作外包给一些开源库吗？哪一个？
*   我应该编写自己的模块处理程序 - 我自己的实现`requireAsync`吗？（我知道该怎样。）

[注意：除了异步加载模块，我不想做任何事情，所以请不要建议我用新的网络服务器路由框架替换我的设置。]

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-19T23:07:36.413

我发布了这个答案，但欢迎您发布改进。

请参阅[Node.JS 源代码](https://github.com/joyent/node/blob/master/lib/module.js)。

`Module.prototype.require = function(path) { return Module._load(path, this); };`

**的精简版`_load`**

```
Module._load = function(request, parent, isMain) {
  var filename = Module._resolveFilename(request, parent);
  if (Module._cache[filename]) return Module._cache[filename].exports;
  if (NativeModule.exists(filename)) {
    if (filename == 'repl') { // special case, needs the real require.
      var replModule = new Module('repl');
      replModule._compile(NativeModule.getSource('repl'), 'repl.js');
      NativeModule._cache.repl = replModule;
      return replModule.exports;
    }
    return NativeModule.require(filename);
  }
  var module = new Module(filename, parent);
  if (isMain) process.mainModule = module, module.id = '.';
  Module._cache[filename] = module;
  var hadException = true;
  try {
    module.load(filename);
    hadException = false;
  } finally {
    if (hadException) delete Module._cache[filename];
  }
  return module.exports;
}; 
```

**我的版本`require.async.js`将类似于**

```
var NativeModule = require('native_module');
var fs = require('fs');
if(!require.async) require.async = function (path, callback) { module.exports(path, this, callback); } // Comment out if you dislike using globals
module.exports = function(request, parent, callback) {
  var filename = Module.resolve(request, parent); // This is a Sync function. TODO, change it to an async function with a callback.
  if (Module.cache[filename]) callback(Module.cache[filename].exports);
  else if (NativeModule.exists(filename)) callback(new Error('What are you thinking?'))
  else fs.readFile(filename, 'utf8', function(err, file) {
    if (Module.cache[filename]) callback(null, Module.cache[filename].exports); // For the case when there are two calls to require.async at a time.
    else if(err) callback(err)
    else {
      var module = new Module(filename, parent);
      try {
        module._compile(file);
        Module.cache[filename] = module;
      } catch(ex) {
        callback(err)
      }
      if(Module.cache[filename]) callback(null, module.exports)
    }
} 
```

**注意事项**

*   代码中有一个 TODO 用于将多个调用设为`stat`异步。文件的实际读取是常规异步，所以这很好。
*   如果您正在异步加载一个模块，并且您正在加载的那个模块正在同步加载另一个模块，那么您还没有完全与您的代码异步 - 有吗。
*   它使用一种私有方法 - `_compile`.

# ibm-mq - 消息重新排队并放入回退问题

> ID：13917427
> 
> 赞同：0
> 
> 时间：2012-12-17T15:51:22.697
> 
> 标签：ibm-mq, messagebroker, backout

我遇到了消息代理 7.0.0.5 的以下问题这是我的流程：

![流动](../Images/45b939fe8e6a2fcf10423cd4b0f365f9.png)

我想要它做什么： 1\. 接受 XML，解析，使用 XMLNSC 2\. 然后我想要执行一些业务逻辑，但是让我们跳过它并关注以下内容 - 我想抛出两个用户异常 - 一个在模块中GoodReport，另一个 - 在模块 BadReport 中，因此，在 Out 和 Catch 流中处理后，我假设我的消息到达**Backout Queue** （我为我的队列创建了一个，并将阈值设置为 10）并被发送回MQInput 以便再次处理。所以我希望 Backout 队列中有 10 条消息，但相反 - 我什么也没得到

我可以看到在我的流程中抛出了两个错误，但最让我感到奇怪的是跟踪中的最后几行—— **“XMLNS”域是从哪里出现的？** 我只使用 XMLNSC 域。

**为什么消息没有出现在 Backout 队列中？**

先感谢您！

塔蒂亚娜。

## 这是跟踪：

2012-12-17 19:25:54.692283 5756 RecoverableException BIP2488E: ('.Esql6_1Flow_Report.Main', '19.4') 执行 SQL 语句**“THROW EXCEPTION MESSAGE 3 VALUES** ('NO_SUCH_SOURCE');''时检测到错误。消息代理在执行给定语句时检测到错误。已引发异常以缩短 SQL 程序。有关错误的详细信息，请参阅以下消息。

2012-12-17 19:25:54.692302 5756 用户异常 ?????????? 3 ？？？？？？？？？BIPmsgs.properties 2012-12-17 19:26:52.830982 5756 错误 BIP2628E：在输入节点“Esql6_1Flow.MQInput”上检测到异常情况。输入节点“Esql6_1Flow.MQInput”在处理消息时检测到错误。消息流已回滚，如果消息正在工作单元中处理，它将保留在输入队列中以再次处理。以下消息将指示此异常的原因。检查随后的错误消息以确定生成异常的原因，并按照这些消息的描述采取措施。

2012-12-17 19:26:52.831005 5756 RecoverableException BIP2230E：处理节点“Esql6_1Flow.BadReport”中的消息时检测到错误。消息代理在处理节点“Esql6_1Flow.BadReport”中的消息时检测到错误。已引发异常以缩短消息的处理时间。有关错误的详细信息，请参阅以下消息。

2012-12-17 19:26:52.831012 5756 RecoverableException BIP2488E: ('.Esql6_1Flow_Compute.Main', '13.4') 执行 SQL 语句**''THROW EXCEPTION MESSAGE 3 VALUES** ('NO_SUCH_SOURCE');''时检测到错误。消息代理在执行给定语句时检测到错误。已引发异常以缩短 SQL 程序。有关错误的详细信息，请参阅以下消息。

2012-12-17 19:26:52.831020 5756 用户异常 ?????????? 3 ？？？？？？？？？BIPmsgs.properties

2012-12-17 19:26:53.831737 5756 错误 BIP2648E：消息退回到队列；节点“Esql6_1Flow.MQInput”。节点“Esql6_1Flow.MQInput”收到一条消息，由于消息流的主路径中的处理错误，该消息先前已被撤销一次或多次。未连接故障终端，因此消息代理将消息直接放入与此节点关联的重新排队或死信回退队列。消息的 MQMD 'backoutCount' 现在等于为 WebSphere MQ 输入队列定义的 'backoutThreshold'。检查以前的消息和消息流以确定消息被回退的原因。如果可能，请纠正这种情况。

2012-12-17 19:26:53.832435 5756 UserTrace BIP2638I：MQ 输出节点“Esql6_1Flow.MQInput”试图将消息写入连接到队列管理器“testQueueManagerName”的队列“SYSTEM.DEAD.LETTER.QUEUE” . MQCC 为“0”，MQRC 为“0”。

2012-12-17 19:26:53.832466 5756 UserTrace BIP2615I：WebSphere MQ 输入节点“Esql6_1Flow.MQInput”已将消息回退到回退重新队列或死信队列。消息回退处理已被调用，并且消息已通过写入回退重新队列或死信队列来回退，这由 WebSphere MQ 队列管理器和队列配置确定。无需用户操作。

2012-12-17 19:27:31.087949 4380 UserTrace BIP2632I：消息接收并传播到 MQ 输入节点“.InputNode”的“输出”终端。

2012-12-17 19:27:31.088045 4380 UserTrace BIP6060I：代表节点“.InputNode”创建解析器类型“属性”，以处理从偏移量“0”开始的长度为 0 字节的传入消息的一部分。

2012-12-17 19:27:31.088066 4380 UserTrace BIP6061I：代表节点“.InputNode”创建解析器类型“MQMD”，以处理从偏移量“0”开始的长度为“364”字节的传入消息部分。根据来自先前解析器的值“MQHMD”选择的解析器类型。

2012-12-17 19:27:31.088092 4380 UserTrace BIP6069W：代理无法处理数据类型为“””的消息。消息代理收到一条需要处理“'”' 类型数据的消息，但该代理没有能力处理这种类型的数据。检查发送到消息代理的消息和节点的配置数据。如果消息要由代理处理，则必须删除对不受支持的数据类型的引用。

2012-12-17 19:27:31.088113 4380 UserTrace BIP6061I：代表节点“.InputNode ***”创建解析器类型“XMLS ”，以处理从偏移量“364”开始的长度为“236”字节的传入消息部分。***根据先前解析器中的值***“XMLS”***选择的解析器类型。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T05:45:04.473

BACKOUT 计数确定流应重试处理消息的次数。这里阈值设置为 10，这意味着流尝试处理 10 次，如果仍然失败，MQInput 节点会将消息放入回退队列或 DLQ，如果没有配置回退队列。Flow 只会将一条消息放入回退队列，而不是您预期的 10 条消息

如果消息以非事务模式处理，则流程不会将消息放入回退队列。检查您是否在 MQInput 节点中将 Transactional 属性配置为“NO”。如果配置的值为“自动”，则该消息应该是持久的，以便在事务下对其进行处理。但跟踪片段显示消息已放入 SYSTEM.DEAD.LETTER.QUEUE。您可能需要检查消息是否在 DLQ 中，并确认在输入节点中正确配置了回退队列属性。

阅读 [http://publib.boulder.ibm.com/infocenter/wmbhelp/v7r0m0/topic/com.ibm.etools.mft.doc/ac00414_.htm](http://publib.boulder.ibm.com/infocenter/wmbhelp/v7r0m0/topic/com.ibm.etools.mft.doc/ac00414_.htm) 这将解决您的所有疑问。

# python - 我在 Python 的文本中找不到“#DD#”

> ID：13917433
> 
> 赞同：-7
> 
> 时间：2012-12-17T15:51:40.147
> 
> 标签：python, regex

我试图在文本文件中找到所有字符串“#DD#”，但我的搜索脚本什么也没返回，即使我确定“#DD#”在那里。我有一种感觉#DD# 是一个不好的符号组合，但我不知道如何使它工作。我将不胜感激任何建议。

UPD：我想我问的很清楚（没有地方要求为我写代码——我可以自己做）；我只是遇到了这个奇怪的问题，我无法理解。我的脚本会查找此模式的所有其他标签#CC#、#KK#、#WW# 和许多其他标签，但 #DD# 或以 #D.* 开头的任何其他标签除外。如果您，强大的专家，认为这没有问题，那么说就足够了。没必要粗鲁。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T15:55:23.300

*这与符号的错误组合*无关：

```
import re

str = '#DD# and #DD# more #DD#'

re.findall('#DD#',str)
['#DD#', '#DD#', '#DD#'] 
```

我怀疑你没有正确读取文件或者它是空的，或者可能是其他东西..但你需要发布你的代码。

# sql - 错误：子查询返回超过 1 个值

> ID：13917439
> 
> 赞同：0
> 
> 时间：2012-12-17T15:51:52.497
> 
> 标签：sql, sql-server, subquery

我得到的完整错误是：

> *消息 512，级别 16，状态 1，第 1 行
> 子查询返回超过 1 个值。当子查询跟随 =、!=、<、<=、>、>= 或子查询用作表达式时，这是不允许的。*

我通过了这个过去可以工作的 SQL 代码，我需要修复它，但我得到了上面的错误，但即使我注释掉某些部分，错误仍然保持不变

这是sql代码：

```
SELECT  
    OrderId = OrdNameAdd.ORDERS_ID,
    LTRIM(ISNULL(OrdNameAdd.OBY_FirstName, '') + ' ' + ISNULL(OrdNameAdd.OBY_LASTNAME, '')) AS OrderedByName,
    ObyVar1 = (SELECT varfld_value FROM MAILERVBL WHERE OBYMAILER = MAILERVBL.MAILER_SEQID AND VARDEF_SEQUENCE = 1),
    ObyVar2 = (SELECT varfld_value FROM MAILERVBL WHERE OBYMAILER = MAILERVBL.MAILER_SEQID AND VARDEF_SEQUENCE = 2),
    ObyVar3 = (SELECT varfld_value FROM MAILERVBL WHERE OBYMAILER = MAILERVBL.MAILER_SEQID AND VARDEF_SEQUENCE = 3),
    ExtendedDefaultValue = (SELECT sum(isnull(p.prduct_value,0) *  (isnull(pickdt.prdord_toshipqty,1))) 
                            FROM PICKDT 
                            LEFT OUTER JOIN 
                               locVerBals ON PICKDT.PRVERS_SEQID = locVerBals.PRVERS_Seqid 
                            LEFT OUTER JOIN 
                               LOCPRDSUM p ON locVerBals.PRDUCT_Seqid = p.PRDUCT_SEQID 
                                           AND p.system_id = PICPAK.SYSTEM_ID 
                            WHERE
                               PICKDT.PICPAK_Seqid = PICPAK.PICPAK_Seqid 
                               AND p.PRDUCT_INACTIVEDATE IS NULL), 
    FulfCharges = (rpt_BD.Linesshipped * ACCDEF_ChargePerLine) + ACCDEF_ChargePerShipment, 
    PubFreight = (rpt_BD.PubFreight), 
    TotalValue = 
        (SELECT 
            sum(isnull(p.prduct_value, 0) * (isnull(pickdt.prdord_toshipqty, 1))) 
         from PICKDT 
         LEFT OUTER JOIN locVerBals ON PICKDT.PRVERS_SEQID = locVerBals.PRVERS_Seqid 
         LEFT OUTER JOIN LOCPRDSUM p ON locVerBals.PRDUCT_Seqid = p.PRDUCT_SEQID 
                                     AND p.system_id = PICPAK.SYSTEM_ID 
         WHERE 
             PICKDT.PICPAK_Seqid = PICPAK.PICPAK_Seqid AND p.PRDUCT_INACTIVEDATE IS NULL) 
         + isnull((rpt_BD.Linesshipped * ACCDEF_ChargePerLine), 0) 
         + isnull(ACCDEF_ChargePerShipment,0) + isnull((rpt_BD.PubFreight), 0)
FROM 
    PICPAK 
LEFT OUTER JOIN 
    ORDSTO ON PICPAK.ORDSTO_Seqid = ORDSTO.ORDSTO_Seqid 
LEFT OUTER JOIN 
    OrdNameAdd ON ORDSTO.ORDERS_Seqid = OrdNameAdd.ORDERS_SEQID 
LEFT OUTER JOIN 
    Rpt_BillingDetail rpt_BD ON PICPAK.PICPAK_Seqid = rpt_BD.PICPAK_Seqid 

---------------hERE
WHERE 
    (convert(datetime, DateShipped, 1) >= '4/17/2012' 
     AND convert(datetime, DateShipped, 1) <= '12/17/2012')
---------------HERE

    AND (PICPAK.PICPAK_Status = 'Complete' OR PICPAK.PICPAK_Status = 'Shipped' 
         OR picpak_Status = 'Voided') 
    /*AND (p.PRDUCT_INACTIVEDATE IS NULL)*/
    AND ISNULL(PICPAK.SUPPLR_SEQID,0) = 0
GROUP BY
    OrdNameAdd.ORDERS_ID,
    OrdNameAdd.OBY_FirstName,
    OrdNameAdd.OBY_LASTNAME,
    OrdNameAdd.obymailer,
    PICPAK.PICPAK_Seqid,
    PICPAK.System_Id,
    rpt_BD.PubFreight,
    ACCDEF_ChargePerLine,
    ACCDEF_ChargePerShipment,
    rpt_BD.Linesshipped,
    rpt_BD.Numpackages,
    ordsto.orders_seqid
ORDER BY
    ordsto.orders_seqid ASC 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T15:54:55.403

我建议您分别执行每个子查询，以找出哪个返回多条记录

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-17T16:51:06.497

在您的查询中，ObyVar1、ObyVar2、ObyVar3、ExtendedDefaultValue 和 TotalValue 有五个子查询。

两个值子查询使用不带 no 的聚合`group by`，因此它们应该返回一个值。

您的问题出在三个 ObyVar 中。

有两种简单的方法可以摆脱这种情况：

1.  聚合值。就这样吧`max(varfld_value)`。
2.  选择一个值。在 SQL Server 中，这将是 a `top 1`（在其他数据库中，它可能是`rownum = 1`or `limit 1`）。

然而，总的来说，我发现`select`语句中的`select`语句是不可取的。`from`我会在子句中用子查询替换这三个变量：

```
(select mailer_seqid,
        max(case when vardef_sequence = 1 then varfld_value end) as vv_1, 
        max(case when vardef_sequence = 2 then varfld_value end) as vv_2,
        max(case when vardef_sequence = 3 then varfld_value end) as vv_3
 from mailervbl
 group by mailer_seqid
) 
```

在大多数情况下，这应该与三个子查询一样或更有效。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-17T15:58:20.497

如果您有子查询`SELECT columns Ex: (1)`或有子查询，`WHERE col = cluses Ex:(2)`您应该确保只返回一个值。

```
--Ex:(1) make sure only one row returned by the sub query, 
--this case can be voided using TOP 1 from the sub query
SELECT col1, (SELECT colX from Table2 ) 
FROM Table1

--Ex:(2) this case can be avoided using IN instead =
SELECT col1, col2
FROM Table1
WHERE col3 = (SELECT colX from Table2 ) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-17T15:57:55.727

如果不访问您的数据库，我们似乎无法识别它们，不建议编写任何这样的 where 语句，不仅要谈论性能，还要谈论您现在面临的问题。

要解决此问题，您需要通过完整的逻辑并在没有子查询的情况下重写它，或者查看是否可以通过子查询中的 DISTINCT/TOP 1 过滤掉一些数据而不会破坏逻辑本身。我建议你重写它，有时听起来很复杂，但会让事情变得更简单。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-18T00:56:13.633

您无法从正在执行单个 SUM 语句的子查询中获取重复项，因此问题出在 MAILERVBL 表上。

如果您一直在寻找重复项，请运行以下类型的代码来识别您的重复项：

```
select MAILER_SEQID, VARDEF_SEQUENCE, count(*) as numentries
from MAILERVBL 
group by MAILER_SEQID, VARDEF_SEQUENCE
having count(*) > 1
order by numentries desc -- not really needed but useful to see where most of your duplicates are 
```

*在您的select*和*group by*子句中放置您希望唯一的列。

# visual-studio - LIB 库 /EXTRACT:member /OUT:objectfile

> ID：13917442
> 
> 赞同：0
> 
> 时间：2012-12-17T15:52:01.160
> 
> 标签：visual-studio

我在哪里运行这个语法？Visual Studio 上没有命令行。我知道这是一个简单的问题，但到目前为止我找不到答案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T15:56:10.670

通常，在安装 Visual Studio 后，您在 Microsoft Visual Studio 程序组中有一个名为`Visual Studio Tools`. 在此子菜单中，您可以找到几个`Command Prompt for ...`启动命令窗口的菜单，其中特定路径设置为随 Visual Studio 安装的工具，包括 LIB 工具

例如，这是我的一个菜单项执行的命令

```
%comspec% /k ""c:\Program Files (x86)\Microsoft Visual Studio 10.0\VC\vcvarsall.bat""  x86_amd64 
```

# spring - SQL Minus 和 lower/upper 在 Jdbc 中不能一起工作

> ID：13917443
> 
> 赞同：0
> 
> 时间：2012-12-17T15:52:07.033
> 
> 标签：spring, jdbc, hsqldb, tolower

我得到了 HSQLDB 2.2.9 和以下语句：

```
(SELECT lower(MyCol) FROM MyTable WHERE ID = ?)  
MINUS 
(SELECT lower(MyCol) FROM MyTable WHERE ID = ?) 
```

它适用于我的松鼠。但是当我在使用 Jdbc 的程序中执行此操作时，出现以下异常：

```
Exception in thread "main" org.springframework.dao.TransientDataAccessResourceException: PreparedStatementCallback; SQL [(SELECT lower(MyCol) FROM MyTable WHERE ID = ? )  MINUS (SELECT lower(MyCol) FROM MyTable WHERE ID_CENTER = ?)]; Column not found: MyCol; nested exception is java.sql.SQLException: Column not found: MyCol 
```

如果我删除了 lower() 该语句有效，但它区分大小写，我想在这里消除。

有人可以告诉我为什么会出现此错误以及如何解决吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T18:53:44.840

HSQLDB 2.2.9 不会抛出此异常。如果找不到该列，则异常消息将采用以下形式：

```
user lacks privilege or object not found: MYCOL 
```

请检查您的 Spring 数据源设置。

# soa - SOA 中通知的松散耦合

> ID：13917463
> 
> 赞同：0
> 
> 时间：2012-12-17T15:53:28.397
> 
> 标签：soa

该解决方案由一个编排流程服务和多个负责对域实体进行 CRUD 操作的遗留应用程序组成。每次这些遗留应用程序执行更新、添加或删除语句时，实体所有者应用程序都会发送通知。在建模阶段，我们决定细粒度地映射实体。通过这种方式，每个 CRUD 操作都会产生数千个通知（最多 20k），从而导致暂时阻塞用户活动，因为实体持久性和通知发送结合在同一个事务中。当花费超过 120 秒时，这可能是不可接受的。

我想做的是将遗留应用程序中的用户活动与实体持久性和通知发送分开，将这些活动推迟到特定的应用程序服务（例如）。我知道最好的办法是将这些活动推迟到用户应用程序中的后台线程，但正如我所提到的，我使用的是非常旧的遗留应用程序。是否有任何 SOA 设计模式可以应用于此场景？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T09:42:08.673

你想要的是“[解耦调用](http://arnon.me/soa-patterns/decoupled-invocation/)”。您接受请求并将其放入（持久）队列中，并向用户发送已收到请求的确认。视情况而定，您可以在消息完全处理后发送附加回复（例如通过电子邮件）。

![在此处输入图像描述](../Images/58d7d1fcd6d993462d7c56bbb769b10c.png).

# cloudbees - CloudBees 的 SSL DNS 条目

> ID：13917466
> 
> 赞同：0
> 
> 时间：2012-12-17T15:53:58.833
> 
> 标签：cloudbees

我看到我们需要设置我们的 DNS 以指向我们配置了 SSL 的新路由器。我的问题是，如果我们没有自己的域名，我们可以只使用 CloudBees DNS 条目吗？即有没有办法通过我的 SSL 证书设置将 myapp.mycompany.cloudbees.net 指向路由器？还是我必须从第三方提供商那里购买域名？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T03:36:25.093

不，您必须为您的路由器/IP 服务购买证书。

我们正在为此研究一个共享的 SSL 服务（它可能会做你想要的） - 这需要一个扁平化的名称，但是，因为 SSL 证书此时没有使用 2 级“通配符”颁发。

# ios - UITableView 正确的动画

> ID：13917468
> 
> 赞同：0
> 
> 时间：2012-12-17T15:54:00.907
> 
> 标签：ios, uitableview, animation

问题是，我想要一个分组的表格视图，当我点击一个单元格时，我想要另一个单元格出现在它下面，依此类推。工作流程一切都很好，但我对动画也有同样的问题。它工作得很慢，我可以看到所有的变化

```
-(void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath{
    NSLog(@"selected section:%d selected row:%d",indexPath.section,indexPath.row);

    NSIndexPath* pathToDelete;

    [_tableView beginUpdates];
    if (_selectedPath != nil && [_selectedPath isEqual:indexPath]){
        //If the same row was selected
        pathToDelete = [NSIndexPath indexPathForRow:_selectedPath.row+1 inSection:_selectedPath.section];
        _selectedPath = nil;
        [_tableView beginUpdates];
        [_tableView deleteRowsAtIndexPaths:[NSArray arrayWithObject:pathToDelete] withRowAnimation:UITableViewRowAnimationTop];
        [_tableView endUpdates];

    } else {
        //If not
        if (_selectedPath != indexPath){
            //delete the row that we selected last time
            if (_selectedPath != nil){
                pathToDelete = [NSIndexPath indexPathForRow:_selectedPath.row inSection:_selectedPath.section];
                [_tableView beginUpdates];
                [_tableView deleteRowsAtIndexPaths:[NSArray arrayWithObject:pathToDelete] withRowAnimation:UITableViewRowAnimationTop];
                [_tableView endUpdates];
            }

            //add new row in the section we selected
            _selectedPath = indexPath;
            [_tableView beginUpdates];
            [_tableView insertRowsAtIndexPaths:[NSArray arrayWithObject:indexPath] withRowAnimation:UITableViewRowAnimationTop];
            [_tableView endUpdates];
        }
    }
    [_tableView beginUpdates];
    [_tableView deselectRowAtIndexPath:indexPath animated:NO];
    [_tableView endUpdates];

    [_tableView reloadSections:[[NSIndexSet alloc] initWithIndex:pathToDelete.section] withRowAnimation:UITableViewRowAnimationMiddle];
    [_tableView reloadSections:[[NSIndexSet alloc] initWithIndex:_selectedPath.section] withRowAnimation:UITableViewRowAnimationMiddle];
    [_tableView endUpdates];
} 
```

我认为问题出在 begin & endUpdates 方法上，但我不知道具体在哪里。有什么线索吗？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T16:05:48.423

通过使用单个`beginUpdates`- ，您可以更简单地做到这一点`endUpdates`。您只需在其中进行删除和插入。不要忘记更新表的数据源，否则应用程序会崩溃。

希望这可以帮助！

# jquery-ui - 在这个例子中，我是否正确地修补了 jQueryUI ProgressBar？

> ID：13917469
> 
> 赞同：9
> 
> 时间：2012-12-17T15:54:02.400
> 
> 标签：jquery-ui, jquery-ui-progressbar

我在应用程序中有完整的 jQuery UI 副本，所以无论我是从 CDN 加载还是本地加载，我都知道它已经加载。（因为如果我们从 CDN 加载，我们唯一的选择就是对实时版本进行猴子补丁，是吗？）

我从：[https](https://github.com/jquery/jquery-ui/blob/master/ui/jquery.ui.progressbar.js) ://github.com/jquery/jquery-ui/blob/master/ui/jquery.ui.progressbar.js 看到，`this.min`不幸的是这不是一个可设置的选项（`this.options.max`相比之下）。我需要`this.min`在`-1`我的情况下（是的，应用程序范围内，我们已经在团队内部讨论过这个问题，我们理解 jQuery 决定的原因，我们只需要它不是），所以我唯一的选择似乎是猴子补丁原型或维护我自己的插件。我还看到他们现在正在使用“小部件”架构来加载 jQuery UI 对象。

在这个特定的应用程序中，我的脚本大致加载如下：

```
/javascripts/lib/jquery.min.js
/javascripts/lib/jquery-ui.min.js
...
/javascripts/company.utils.js
/javascripts/company.helpers.js
...
page level includes of javascript libraries
...
page level javascript 
```

所以我正在考虑进入 company.utils.js 并像这样定义一个monkeypatch：

```
$.ui.progressbar.prototype.min = -1; 
```

但是，我很好奇这是否是猴子补丁这个对象的正确方法。可以肯定的是，但我想我会询问更广泛的 StackOverflow 社区，并为未来的搜索者提供一些可谷歌搜索的内容。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-18T20:16:19.847

对，那是正确的。或者，如果您使用的是 jQuery UI 1.9，您可以使用小部件工厂来定义您的扩展：

```
$.widget( "ui.progressbar", $.ui.progressbar, {
    min: -1
}); 
```

虽然它稍微冗长一些。

# visual-studio-2010 - 如何打包wsdls？

> ID：13917474
> 
> 赞同：0
> 
> 时间：2012-12-17T15:54:14.463
> 
> 标签：visual-studio-2010, wcf, .net-4.0, wsdl

我有一个 wcf webservice，客户端需要 wsdl 的副本。但是，当我打开 wsdl 时，由于自定义类型，有一堆 xsd 导入指向我的本地主机。

```
<xsd:import schemaLocation="http://localhost:50790/ ... " /> 
```

他们需要自定义他们的代码，并且想要使用 wsdl，但我不确定如何以他们可以正确使用 wsdl 的方式将其打包？

是否有一个工具可以创建一个文件，他们可以使用这些文件来使用和生成他们的调用？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T16:08:41.477

在元数据下载模式下尝试 Web 服务发现工具（disco.exe， http: [//msdn.microsoft.com/en-us/library/cy2a3ybs](http://msdn.microsoft.com/en-us/library/cy2a3ybs(v=vs.80).aspx) (v=vs.80).aspx ）或 svcutil.exe（[http: //msdn.microsoft.com/en-us/library/aa751847.aspx](http://msdn.microsoft.com/en-us/library/aa751847.aspx)）。这些可以下载所有需要的 WSDL/XSD 文件，然后您可以将其压缩并交付给客户端。

# jquery - jquery定位动态div scrolltop

> ID：13917478
> 
> 赞同：0
> 
> 时间：2012-12-17T15:54:55.753
> 
> 标签：jquery, html, positioning

我有一个两栏网页。first(id="#list") 是一个 div 列表，它可以随着内容变得更长。第二个(id="#expand") 是展开视图，当单击左列上的 div 时。想象一下类似 twitter 的布局，右侧有一个新列。

用户不断向下滚动以查看左侧 div。当他们点击任何一个 div 时，

1.  如何在查看区域中定位正确的（“#expand”）div。?
2.  如果他们向下滚动，“#expand”应该表现正常，因为它应该是它所在的位置。
3.  如果他们向上滚动，“#expand”应该向上移动，直到到达顶部。

有人可以帮忙吗？注意：#expand 是动态的，通过 AJAX 引入

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T16:27:41.473

当用户滚动到 #expand 元素的“顶部”时，您希望在`position: fixed, top: 0`和之间切换。`position: absolute, top: <the current scroll position>`下面的代码使用一个（不完全是）全局变量来跟踪此切换应该发生的位置。如果你愿意，你可以使用`$("#expand").data(...)`或其他东西，但你明白了。

```
(function () {
var expandY = 0;
$("a[name=somelink]").click(function (e) {
    e.preventDefault(); // Keep from following link.
    expandY = $(window).scrollTop();
    $("#expand").css({position: "fixed", top: 0});
});

$(window).scroll(function () {
    var $expand = $("#expand");
    if($expand.css("position") === "fixed") {
        if($(window).scrollTop() > expandY) {
            $expand.css({position: "absolute", top: expandY});
        }
    }
    else {
        if($(window).scrollTop() < expandY) {
            $expand.css({position: "fixed", top: 0});
        }
    }
});

})(); 
```

这是小提琴：

[http://jsfiddle.net/rkp5x/3](http://jsfiddle.net/rkp5x/3)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T15:56:55.383

尝试使用固定定位，这将使其保持在页面中的同一位置：

```
#expand{
    position:fixed;
    top:0;
    left:0;
} 
```

# c# - 用于检测图片框上的鼠标拖动的事件处理程序（winforms，c#）

> ID：13917481
> 
> 赞同：5
> 
> 时间：2012-12-17T15:55:12.223
> 
> 标签：c#, .net, winforms, event-handling

我正在制作简单的绘画应用程序，只要有人按住鼠标按钮并拖动（就像在 Windows 绘画中一样），就会在其中绘制一条线。

但是，我很难为此找到合适的事件处理程序。MouseDown 根本不起作用，并且 MouseClick 只会在我按下鼠标时记下点。

在这件事上需要帮助。

谢谢。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-12-17T15:57:50.807

处理`MouseDown`布尔变量并将其设置为 true。Handle`MouseMove`并且，如果变量设置为 true 并且鼠标的移动高于您想要的阈值，则操作。处理`MouseUp`并将该变量设置为 false。

例子：

```
bool _mousePressed;
private void OnMouseDown(object sender, MouseEventArgs e)
{
    _mousePressed = true;
}

private void OnMouseMove(object sender, MouseEventArgs e)
{
    if (_mousePressed)
    {
        //Operate
    }
}

private void OnMouseUp(object sender, MouseEventArgs e)
{
    _mousePressed = false;
} 
```

# javascript - 使用更新填充时选择下拉菜单无法正确呈现

> ID：13917487
> 
> 赞同：-1
> 
> 时间：2012-12-17T15:55:41.497
> 
> 标签：javascript, jsp, prototype

我在 JSP 页面中声明了一个下拉菜单，如下所示：

```
<div id = "tagRevisions" name = "tagRevisions" width="100" style="position:absolute; bottom:2px; right:2px;">
<select id="tagRevisionsSelect" name="tagRevisionsSelect" onChange="header.loadTag('<%= strTagID %>', '<%= lastApprovedRequestId %>', this.value);">

       <% 
        // Some code here
       %>
</select>
</div> 
```

最初它是空的。我通过 JavaScript 和 Prototype 填充它，如下所示：

```
rebuildRequestsDropDown : function()
{
    jsonrpc.tagGridUtils.buildRequestsDropDownHTML(function(result, exception)
        {
            if (exception)
            {
                alert("There was an error " + exception.toString());
            }
            else
            {                   
                // Set the innerHTML of the Requests drop-down to the result
                // returned by the function above.
                if (result != null && result.trim() != "")
                {
                    $("tagRevisionsSelect").update(result);
                }
            }
        }.bind(this),

        $("cacheId").value
    );
} 
```

所以发生的事情是下拉列表被填充，但它在页面上被错误地呈现。它看起来像这样：

![在此处输入图像描述](../Images/5f386fc12aa2abc269c10dfabaf71818.png)

如果我最小化然后最大化窗口或点击页面上的选项卡，那么它看起来很好：

![在此处输入图像描述](../Images/6dd6a02f00b099d936feb84d08b9c6ec.png)

这是为什么？

ps：这是HTML输出：

![在此处输入图像描述](../Images/7335f3daab00eecdef714f76fc3794e1.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T16:07:19.973

尝试为您的选择框定义样式。我的意思是至少它的宽度。

# php - 用链接更改 PHP GET？

> ID：13917490
> 
> 赞同：1
> 
> 时间：2012-12-17T15:55:54.290
> 
> 标签：php

我想创建一个更改 PHP`$_GET`变量的链接。例如：

```
URL: http://site.com/index&variable=hello&anothervariable=dontchangeme

<a href="variable=world">Click me</a>

(after click)

URL: http://site.com/index&variable=world&anothervariable=dontchangeme 
```

我知道您可以这样做来更改页面 ( `href="1.html"`)，但我想做同样的事情，同时保持已经存在的 GET 变量。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-17T15:59:57.950

```
$query = array('variable' => 'world') + $_GET;

printf('<a href="index?%s">Click me</a>', http_build_query($query)); 
```

请参阅[http://php.net/http_build_query](http://php.net/http_build_query)。这是易于理解的最小版本。正确地，您还需要对生成的查询字符串进行 HTML 转义（因为您将其放入 HTML 中）：

```
printf('<a href="index?%s">Click me</a>', htmlspecialchars(http_build_query($query))); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T15:58:37.970

您可以简单地重定向用户更改变量值并使用`header()`..

```
if(isset($_GET['variable'] && $_GET['variable'] == 'hello') {
   header('Location: http://site.com/index&variable=world');
   exit;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-17T16:01:54.747

这应该这样做。

```
<a href="variable=world <?php foreach ($_GET as $key => $value) {echo '&&'.$key.'='.$value}">Click me</a> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-17T15:58:44.940

url 中的变量或参数以 a 开头`?`，然后用 . 分隔`&`。

要获得您想要的内容，请使用此链接：

```
<a href="http://site.com/index?variable=world&anothervariable=dontchangeme">Click me</a> 
```

但这是硬编码而不是动态的，因为您可以动态更改参数的值，所以我的答案可能不是最好的。

# java - 使用 onClickListener 将我带到另一个 XML 文件

> ID：13917491
> 
> 赞同：1
> 
> 时间：2012-12-17T15:55:56.517
> 
> 标签：java, android, onclicklistener

我对 Java 很陌生/不熟悉，所以如果我的术语有点偏离，请原谅我。

总而言之，我的 XML 文件中有按钮，我想将它们带到另一个页面（就像 HTML 中的超链接等）但是当输入这个时，`setActivity()`代码的两部分会出现错误：

> 该类型的方法`setActivity()`未定义`new View.OnClickListener(){}`

这是该类的代码：

```
public class HomePage extends Activity {

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_home_page);
        Button button1 = (Button)setActivity().findViewById(R.id.bLogin);
        button1.setOnClickListener(new View.OnClickListener() {

            public void onClick(View v) {
                Intent i = new Intent(setActivity(), LinkHome.class);
                startActivity(i);               
            }
        });       
    }
    ... 
```

谁能给我任何建议来解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T16:18:19.020

Try this. It might help to you.

```
Intent i = new Intent(HomePage.this, LinkHome.class);
startActivity(i); 
```

# c++ - 未定义的引用 ::

> ID：13917493
> 
> 赞同：5
> 
> 时间：2012-12-17T15:56:13.010
> 
> 标签：c++

我正在编写一些代码来标记网站何时发生更改。我在类中使用静态变量时遇到了问题，所以我想在命名空间中声明一个变量，并在进行更改时设置 this ==1。

这是我为表示问题而编写的一些简化代码：

PH值：

```
#include<iostream>
using namespace std;

#ifndef p_H
#define p_H
namespace testing{

 extern int changes_made;

 class p 
 {
   public: 
     void changed();
     void print_change();
     void print_change_ns();
   private:
     static int changes;
     int info;
};

}
#endif 
```

p.cpp：

```
 #include "p.h"
#include<iostream>

using namespace testing;

int p::changes=0;

void p::changed(){
    p::changes=1;
    }

void p::print_change(){
    cout << p::changes << endl;
    }

void p::print_change_ns(){
    if (testing::changes_made == 1){
    cout << 1 << endl;
    }
    else{
    cout << 0 << endl;
    }
    } 
```

主.cpp：

```
#include<iostream>
#include"p.h"

using namespace std;
using namespace testing;

int main(){

p test1, test2, test3;
test3.changed();
changes_made=1;

cout << "test1 ";
test1.print_change();
test1.print_change_ns();

cout << "test2 ";
test2.print_change();
test2.print_change_ns();

cout << "test3 ";
test3.print_change();
test3.print_change_ns();

p test4;
cout << "test4 ";
test4.print_change();
test4.print_change_ns();
return 0;
} 
```

我收到以下错误消息：

```
p.o: In function `testing::p::print_change_ns()':
p.cpp:(.text+0x45): undefined reference to `testing::changes_made'
main.o: In function `main':
main.cpp:(.text+0x9b): undefined reference to `testing::changes_made'
collect2: ld returned 1 exit status 
```

对此的任何帮助将不胜感激。我之前有多个声明错误，所以我介绍了#ifndef 的东西，以及变量之前的 extern。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-17T16:03:51.920

`extern`变量之类`extern int changes_made;`的需要在某个地方创建它们的存储。您所说的是“在链接阶段，您会发现有人会向您导出此名称的 int 类型的符号”。

然后你没有兑现承诺，因为没有单位出口`int testing::changes_made`。

在您与上述 p.cpp 和 main.cpp（甚至可能是 p.cpp）链接的某些 .cpp 文件中，创建如下变量的实例：

```
namespace testing {
  int changes_made = 0;
} 
```

并且您的链接器错误应该消失。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-17T16:04:38.680

您已在头文件中*声明；* `testing::changes_made`但你还没有*定义*它。您还需要在一个源文件中进行定义（可能`p.cpp`）：

```
int testing::changes_made; // no "extern" 
```

# android - 通过安卓应用在 Twitter 和 Facebook 上分享

> ID：13917495
> 
> 赞同：4
> 
> 时间：2012-12-17T15:56:16.800
> 
> 标签：android, facebook, twitter, sharing

我正在开发一个安卓应用程序，我可以通过 facebook 和 twitter 分享文本（以及后来的图片）。我发现了一些打开 facebook/twitter 共享窗口的代码，但是需要共享的文本在应用程序的 EditText 中，所以我的问题是如何将我的文本从 EditText 插入将要共享的文本（对不起对于糟糕的英语，如果您需要进一步的解释或者您什么都不懂，那么我也会尝试更好地解释它）。这是我的两种共享方法的代码：

Facebook：

```
Intent shareIntent = new Intent(
                    android.content.Intent.ACTION_SEND);
            shareIntent.setType("text/plain");
            shareIntent.putExtra(android.content.Intent.EXTRA_SUBJECT,
                    (String) v.getTag(R.string.app_name));
            shareIntent.putExtra(android.content.Intent.EXTRA_TEXT,
                    (String) v.getTag(R.drawable.ic_launcher));
            PackageManager pm = v.getContext().getPackageManager();
            List<ResolveInfo> activityList = pm.queryIntentActivities(
                    shareIntent, 0);
            for (final ResolveInfo app : activityList) {
                if ((app.activityInfo.name).contains("facebook")) {
                    final ActivityInfo activity = app.activityInfo;
                    final ComponentName name = new ComponentName(
                            activity.applicationInfo.packageName,
                            activity.name);
                    shareIntent.addCategory(Intent.CATEGORY_LAUNCHER);
                    shareIntent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK
                            | Intent.FLAG_ACTIVITY_RESET_TASK_IF_NEEDED);
                    shareIntent.setComponent(name);
                    v.getContext().startActivity(shareIntent);
                    break;
                }
            } 
```

推特：

```
Intent shareIntent = new Intent(
                    android.content.Intent.ACTION_SEND);
            shareIntent.setType("text/plain");
            shareIntent.putExtra(android.content.Intent.EXTRA_SUBJECT,
                    (String) v.getTag(R.string.app_name));
            shareIntent.putExtra(android.content.Intent.EXTRA_TEXT,
                    (String) v.getTag(R.drawable.ic_launcher));
            PackageManager pm = v.getContext().getPackageManager();
            List<ResolveInfo> activityList = pm.queryIntentActivities(shareIntent, 0);
            for (final ResolveInfo app : activityList) {
                if ("com.twitter.android.PostActivity"
                        .equals(app.activityInfo.name)) {
                    final ActivityInfo activity = app.activityInfo;
                    final ComponentName name = new ComponentName(
                            activity.applicationInfo.packageName,
                            activity.name);
                    shareIntent.addCategory(Intent.CATEGORY_LAUNCHER);
                    shareIntent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK
                            | Intent.FLAG_ACTIVITY_RESET_TASK_IF_NEEDED);
                    shareIntent.setComponent(name);
                    v.getContext().startActivity(shareIntent);
                    break;
                }
            } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-17T16:09:31.870

使用此方法与文字分享照片。调用此方法并传递参数 nameofapp 和 imagepath。应用程序名称表示您想要分享的内容，如 gmail、facebook、twitter。

```
private void share(String nameApp, String imagePath,String text) {
try
{
    List<Intent> targetedShareIntents = new ArrayList<Intent>();
    Intent share = new Intent(android.content.Intent.ACTION_SEND);
    share.setType("image/jpeg");
    List<ResolveInfo> resInfo = getPackageManager().queryIntentActivities(share, 0);
    if (!resInfo.isEmpty()){
        for (ResolveInfo info : resInfo) {
                Intent targetedShare = new Intent(android.content.Intent.ACTION_SEND);
                targetedShare.setType("image/jpeg"); // put here your mime type
                if (info.activityInfo.packageName.toLowerCase().contains(nameApp) || info.activityInfo.name.toLowerCase().contains(nameApp)) {
                    targetedShare.putExtra(Intent.EXTRA_SUBJECT, text);
                    targetedShare.putExtra(Intent.EXTRA_TEXT,text);
                    targetedShare.putExtra(Intent.EXTRA_STREAM, Uri.fromFile(new File(imagePath)) );
                    targetedShare.setPackage(info.activityInfo.packageName);
                    targetedShareIntents.add(targetedShare);
                }
            }
            Intent chooserIntent = Intent.createChooser(targetedShareIntents.remove(0), "Select app to share");
            chooserIntent.putExtra(Intent.EXTRA_INITIAL_INTENTS, targetedShareIntents.toArray(new Parcelable[]{}));
            startActivity(chooserIntent);
    }
}
catch(Exception e){
}
} 
```

将其用于 facebook：-

```
try {
File filePath = "/mnt/sdcard/vmphoto.jpg"; //This is imagefile path in your change it acc. to your requirement.
share("facebook",filePath.toString(),"Hello"); <<<<<Hello is text. send acc. to you req.

}
catch(Exception e) {
       //exception occur might your app like gmail , facebook etc not installed or not working correctly.
} 
```

对于推特

```
try {
File filePath = "/mnt/sdcard/vmphoto.jpg"; //This is imagefile path in your change it acc. to your requirement.
share("twitter",filePath.toString(),"Hello"); <<<<<Hello is a text send acc. to you req.

}
catch(Exception e) {
       //exception occur might your app like gmail , facebook etc not installed or not working correctly.
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-05-28T09:43:56.310

For attaching image on gmail,facebook,twitter with text use below code.

```
File filePath = context.getFileStreamPath("vmphoto.jpg");
share("gmail",filePath.toString());
share("facebook",filePath.toString());
share("twitter",filePath.toString()); 
```

// code of share(String nameApp,String imagePath) function

```
 void share(String nameApp, String imagePath) {
 try
{
  List<Intent> targetedShareIntents = new ArrayList<Intent>();
  Intent share = new Intent(android.content.Intent.ACTION_SEND);
    share.setType("image/jpeg");
  List<ResolveInfo> resInfo = getPackageManager().queryIntentActivities(share, 0);
  if (!resInfo.isEmpty()){
    for (ResolveInfo info : resInfo) {
        Intent targetedShare = new Intent(android.content.Intent.ACTION_SEND);
        targetedShare.setType("image/jpeg"); // put here your mime type
        if (info.activityInfo.packageName.toLowerCase().contains(nameApp) || info.activityInfo.name.toLowerCase().contains(nameApp)) {
            targetedShare.putExtra(Intent.EXTRA_SUBJECT, "Sample Photo");
         targetedShare.putExtra(Intent.EXTRA_TEXT,"This photo is created by App Name");
            targetedShare.putExtra(Intent.EXTRA_STREAM, Uri.fromFile(new File(imagePath)) );
            targetedShare.setPackage(info.activityInfo.packageName);
            targetedShareIntents.add(targetedShare);
        }
    }
    Intent chooserIntent = Intent.createChooser(targetedShareIntents.remove(0), "Select app to share");
    chooserIntent.putExtra(Intent.EXTRA_INITIAL_INTENTS, targetedShareIntents.toArray(new Parcelable[]{}));
    startActivity(chooserIntent);
  }
  }

       catch(Exception e){
      Log.v("VM","Exception while sending image on" + nameApp + " "+  e.getMessage());
    }
  } 
```

# actionscript-3 - 多个提示点同时进行。从 After Effects 到 Flash

> ID：13917508
> 
> 赞同：1
> 
> 时间：2012-12-17T15:56:52.460
> 
> 标签：actionscript-3, flv, after-effects

我用一个视频层和 4 个不同的形状层在后期效果中创建了一个合成。这些形状都在视频上跟踪对象周围移动。我希望能够在播放过程中随意打开和关闭这些形状的可见属性。

我已将他们的关键帧转换为提示点，然后导出 flv。这些形状在整个视频中同时具有关键帧，从而在完全相同的时间产生多个提示点。

在 Flash 中，我只能听到从我的后效合成的最低层发出的提示点。因此，例如在第 10 帧上，第 1 层和第 3 层都有一个关键帧来改变形状的位置。在 After Effects 中使用脚本我已将这些转换为提示点。所以我现在在第 10 帧上有 2 个提示点。我在 flash 中的程序只会听到第 1 层调度的提示点，并且似乎忽略了第 3 层的提示点。

无论如何，我是否可以同时收听多个提示点？还是我将不得不完全以另一种方式去做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T22:25:42.143

我找不到任何不支持多个同时提示点的信息，但尝试在 Adob​​e Media Encoder 中同时添加两个提示点代码会出错 - 表明您可能应该避免它。

![Adobe Media Encoder 错误对话框 - 提示点不能与现有提示点相同](../Images/bbed0a6a9f0d1f222582470c9e370e23.png)

另一种解决方案是收集给定关键帧的所有转换，并将它们收集到单个提示点的参数列表中。一个例子可能是：

**层变化提示**

*   `layer1`：`"x:123;y:456;s:0.78"`
*   ⋮</li>
*   `layer4`：`"x:123;y:456;s:0.78"`

# c++ - CodeBlocks 不能插入括号

> ID：13917511
> 
> 赞同：2
> 
> 时间：2012-12-17T15:56:57.343
> 
> 标签：c++, codeblocks, shortcuts, brackets

当我使用 CodeBlocks，对于 C++ 并尝试插入括号时，我使用`ALT-GR`+`B`和`ALT-GR`+ `N`。B代表左，N代表右。现在在 CodeBlocks 中，当我插入左边的 B 时，它看起来像这样并且不插入括号：

```
/** \brief 
 *
 * \return void
 *
 */ 
```

我在任何地方都找不到正确的答案，所以我在这里发帖。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-04T07:40:49.407

您可以从“插件 -> 管理插件”中禁用 DoxyBlocks 插件（如果您不需要它），或者从“设置 -> 编辑器 -> 键盘快捷键”中为“DoxyBlocks -> 块评论”选择另一个快捷方式。

# prolog - 如何计算一个字符在 Prolog 的字符串列表中出现的次数？

> ID：13917513
> 
> 赞同：3
> 
> 时间：2012-12-17T15:57:08.407
> 
> 标签：prolog

我想检查字符串中是否存在字符。`Atom`字符串和字符也是如此`Ch`。`name`是根据 ASCII 码转换数字列表中的字符串的谓词。

`find_element``X`是一个谓词，仅当元素是列表的一部分时才应该为真。`C`是一个计数器，它告诉我们元素`X`的确切位置。

这是我得到的结果：

```
?- exists(prolog,g). [103][112,114,111,108,111,103] false. 
```

-------> 103 是字母“g”的 ASCII 码，列表`[112,114,111,108,111,103]`是表示字符串“prolog”的列表。这个问题`exists(prolog,g)`应该提供了一个真实的回答。

但是`find_element`谓词工作正常。我不明白为什么会这样，因为当我输入例如

```
?- find_element(5,[3,4,5,6,5,2],X). 
```

我得到`X= 3 ; X = 5 ; false.` ---->

这绝对没问题，因为它告诉我 5 是列表的第三和第五个元素。

所以问题是`find_element`当我输入类似的东西时它正在工作，`?- find_element(5,[3,4,5,6,5,2],X)`但当我尝试调用谓词时它不是存在的（它调用`find_element`）。

这是代码：

```
find_element(X,[X|T],1).

find_element(X,[H|T],C):- find_element(X,T,TEMPC), C is TEMPC +1.

exists(Atom,Ch):- name(Atom,[X|T]), name(Ch,Z), write(Z), write([X|T]), find_element(Z,[X|T],Count). 
```

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T20:18:29.870

我已经清理了一些您的代码，并修复了一个错误：

```
find_element(X,[X|_], 1).
find_element(X,[_|T], C) :-
    find_element(X,T,TEMPC),
    C is TEMPC +1.

exists(Atom, Ch):-
    name(Atom, L),
    name(Ch, [Z]),
    find_element(Z, L, _Count). 
```

注意`name(Ch, [Z])`提取单个字符。现在

```
?- exists(pippo,o).
true 
```

值得注意的是

```
?- find_element(3, [1,2,3,4,1,2,3,4],P).
P = 3 ;
P = 7 ;
false.

?- nth1(P, [1,2,3,4,1,2,3,4], 3).
P = 3 ;
P = 7 ;
false. 
```

您的 find_element/3 表现为 nth1/3，参数 1 和 3 交换。

当然有更简单和更通用的方法来执行这样的测试。使用像[sub_atom](http://www.swi-prolog.org/pldoc/doc_for?object=sub_atom/5) /5 这样的 ISO 内置函数（一个非常强大的原子检查原语）

```
?- sub_atom(pippo, _,_,_, o).
true ; 
```

或 memberchk/2，在转换为您已经知道的字符列表之后（但使用 ISO 内置[atom_codes](http://www.swi-prolog.org/pldoc/doc_for?object=atom_codes/2) /2）

```
exists(Atom, Ch):-
    atom_codes(Atom, L),
    atom_codes(Ch, [Z]),
    memberchk(Z, L). 
```

要计算 sub_atom 的出现次数，可以使用 library(aggregate)

```
occurences(Atom, Ch, N) :-
  aggregate_all(count, sub_atom(Atom, _,_,_, Ch), N).

?- occurences(pippo, p, X).
X = 3. 
```

# facebook - 特定粉丝页面 ID 未返回 FB 图表数据

> ID：13917518
> 
> 赞同：-1
> 
> 时间：2012-12-17T15:57:17.217
> 
> 标签：facebook, fan-page

我们正在与 High Times Magazine (http://www.facebook.com/HIGHTIMESMag, profile id: 23237898444) 合作。我尝试通过 FB 的图表检查是否返回了正确的数据，但由于某种原因它没有。您也可以在这里查看： [https](https://graph.facebook.com/23237898444) ://graph.facebook.com/23237898444和[http://graph.facebook.com/HIGHTIMESMag](http://graph.facebook.com/HIGHTIMESMag)

还有其他人有这个问题吗？我怎样才能让 id 工作，或者这是 Facebook 的错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T16:29:03.180

使用有效的访问令牌（即`https://graph.facebook.com/23237898444?access_token=...`）访问它对我有用。这通常意味着页面是年龄或区域设置的。

# database - 多个目录或一个 - 数据存储和访问

> ID：13917523
> 
> 赞同：1
> 
> 时间：2012-12-17T15:57:29.310
> 
> 标签：database, algorithm, get

这更像是一个算法问题，但我试图找出对于大型图片数据库最有效的方法。将大量文件都存储在一个目录下（例如：pictures/userid_pic_profile.png）或多个目录下存储几个文件（例如：userid/profile.png userid/avatar.png）是否更有意义？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T16:00:25.157

仅出于组织原因，您应该使用多个目录。

此外，对于某些在一个目录中具有大量文件的操作系统，在列出和搜索文件时可能会导致速度变慢（我说的是单个目录中有成千上万个文件）。

# vba - 从网页中的每个链接获取数据到excel

> ID：13917536
> 
> 赞同：1
> 
> 时间：2012-12-17T15:58:15.050
> 
> 标签：vba

我正在尝试从网页获取数据。（一些链接）

在那个网页上，有很多客户提出的票（链接）。我需要浏览每个链接并从每个票证（链接）中获取一些特定数据。

我的程序需要单击每个评论链接并从每个链接中获取一些数据。

我的程序成功地选择了第一个票数据但不是全部（单击第一个链接并成功获取第一个链接数据然后它会抛出错误）。

它抛出错误（访问错误）

对不起，我的代码很大

```
Option Explicit

Sub AVS()
Dim ie As InternetExplorer
Dim iedoc As HTMLDocument
Dim innerString As String
Dim ttext As Integer
Dim avsHtmlTable As Object
Dim links As HTMLAnchorElement
Dim link As Object
Dim lRow As Integer

Set ie = New InternetExplorer
ie.Visible = True
ie.Navigate "https://apj-i.svcs.hp.com/itam-av1/"

Do While ie.Busy
    DoEvents
Loop

Do Until ie.ReadyState = READYSTATE_COMPLETE
    DoEvents
Loop

Set iedoc = ie.Document
With iedoc.forms("Login")
    .all.Item("USER").Value = "Mail id goes here"
    .all.Item("PASSWORD").Value = "pw goes here"
    .submit
End With

Do While ie.Busy
    DoEvents
Loop

Do Until ie.ReadyState = READYSTATE_COMPLETE
    DoEvents
Loop

With iedoc.forms("aspnetForm")
    .all.Item("ctl00$conNavBar$acpAssets_content$btnAssets-ExceptionSearch").Click
End With

Do While ie.Busy
    DoEvents
Loop

Do Until ie.ReadyState = READYSTATE_COMPLETE
    DoEvents
Loop

With iedoc.forms("aspnetForm")
    .all.Item("ctl00$conMainPageContent$txtMaxRows").Value = 100
    .all.Item("ctl00$conMainPageContent$rblStatus").Item(4).Checked = True
    .all.Item("ctl00$conMainPageContent$btnAssetExceptionSearch").Click
End With

Do While ie.Busy
    DoEvents
Loop

Do Until ie.ReadyState = READYSTATE_COMPLETE
    DoEvents
Loop

With iedoc.forms("aspnetForm")
    innerString = .innerText
    ttext = InStr(innerString, "There are no results found for this query")
    If Not ttext = 0 Then
        MsgBox "There are no Tickets are there in AVS - Exception ", vbInformation, "AVS-Exception"
    Else
        ''ctl00_conMainPageContent_grdAssetExceptionSearchResults
        Set avsHtmlTable = iedoc.getElementsByTagName("a")

        For Each link In avsHtmlTable
            If link.innerHTML = "Review" Then
                link.Click
                Do While ie.Busy
                    DoEvents
                Loop
                Do Until ie.ReadyState = READYSTATE_COMPLETE
                    DoEvents
                Loop
                With Sheets("AVS")
                set iedoc=ie.document
                    lRow = .Range("A10000").End(xlUp).Row
                    > ##        ' error throws here
                    Range("A" & lRow).Value = iedoc.getElementById("ctl00_conMainPageContent_ddlAssignment").Value
                End With
            End If
        Next link
    End If
End With

End Sub 
```

抱歉.. 由于我的第一篇文章，无法附上图片。

# c# - 如何检查两个控件是否在 Windows 窗体中重叠

> ID：13917537
> 
> 赞同：9
> 
> 时间：2012-12-17T15:58:17.127
> 
> 标签：c#, winforms, mouseevent, panel

我创建了一个类，允许用户在表单上拖动面板。如何确保用户不会将两个面板放在一起？如果他们这样做，我想在它们都重叠时移动/或突出显示其中一个控件。

我尝试在 OnMouseDown 事件中设置它，但效果不太好。

此外，表单上的面板数量取决于表单需要显示的图片数量。每个面板在面板内都有一个图片框。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2014-02-01T02:07:30.280

更好的方法是使用 Rectangle.Bounds.IntersectsWith 方法，该方法会为您进行检查并生成更清晰的代码。我个人不知道任何性能问题或好处，一种或另一种方式，尽管我敢猜测，简单地循环你的控件并用它来检查它们会比同时构建列表和循环更快。

```
Picturebox pic = new Picturebox();
foreach(Control picturebox in Form1){
   if (pic.Bounds.IntersectsWith(picturebox.Bounds))
   {
       //We have a problem, Houston, because we just collided!
   }
} 
```

我希望这会有所帮助，即使您前段时间问过这个问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T20:26:37.437

所以我能够在 sgud 的建议的帮助下解决这个问题。

诀窍是在引发的 OnMouseUp 事件中使用 Rectangle.Intersect 方法。

这是我在它背后使用的直觉。（这可能不是最整洁的解决方案）

1）在我的主面板中创建一个所有控件的列表。

2) 遍历控件并为每个控件创建一个包含所有 Rectangle Bounds 的列表。你可以通过 control.Bounds 得到这个

3) 遍历 Bounds 列表并将其与当前活动元素的边界相交。
如果返回的矩形具有与活动控件相同的高度和宽度，则分配更改背景颜色属性。

我希望这对其他有类似问题的人有所帮助

# java - JPA 中的人与孩子关系，其中孩子也是人

> ID：13917539
> 
> 赞同：0
> 
> 时间：2012-12-17T15:58:20.843
> 
> 标签：java, hibernate, jpa

在 JPA 中，有没有办法对以下类型的关系进行建模？

```
人
   INT id PKEY
   VARCHAR 名称

孩子
   INT parentId FKEY(PERSON->id)
   INT nameId FKEY(PERSON->id)

```

where`parentId`是多对一关系，又`nameId`是一对一关系。那么，本质上，`parentId`会`nameId`在 CHILD 中创建一个复合主键吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T16:29:16.567

我会重命名`nameId`为`childId`. 从逻辑上讲，您在一个人和他的孩子之间建立了一种关系。每个孩子都是一个人。对于您当前拥有的模型，没有理由拥有单独的`child`表，但我们假设您稍后将添加不同的属性。我将使用继承和聚合对关系进行建模：

```
@Entity
@Table(name="PERSON")
@Inheritance(strategy=InheritanceType.JOINED)
public class Person implements Serializable {
    @Id
    private Integer id;

    private String name;

    @OneToMany(mappedBy = "parent")
    private List<Child> children;
}

@Entity
@Table(name="CHILD")
@PrimaryKeyJoinColumn(name="nameId", referencedColumnName = "id")
private class Child extends Person implements Serializable {
    @ManyToOne
    @JoinColumn(name = "parentId", referencedColumnName = "id")
    private Person parent;
} 
```

这是示例代码，逐字输入，您必须自己进行错误检查。但这是一个起点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T08:26:00.167

您可以为您的方案创建一个实体。但是表设计应该是 nameId 应该是子表的主键，如果您在创建实体类时遇到问题，那么在 NetBeans IDE 或 Eclipse IDE 中有一个用于创建实体类的“表中的实体类”选项。

# c - 删除链表功能

> ID：13917542
> 
> 赞同：5
> 
> 时间：2012-12-17T15:58:33.490
> 
> 标签：c

这是我删除链表的功能：

```
void deleteList( NODE* head )
{
    NODE* temp1; 
    NODE* tempNext;
    temp1 = head;
    tempNext = NULL;

    while( temp1 != NULL )
    {
        tempNext = temp1->next;
        free(temp1);
        temp1 = tempNext;
    }
} 
```

所以 temp1 首先指向头指针指向的位置。如果不是`NULL`,`tempNext`将被设置为指向列表的下一个元素。然后第一个元素 ( `temp1`) 被释放，并被`temp1`重新分配以指向`tempNext`指向的位置并重复过程。

**这是删除整个列表的正确方法吗？**

我问这个是因为当我使用此功能后打印列表时，它仍然会打印列表。而 IIRC 释放某些东西并不会删除它，只会将其标记为可用，所以我不确定如何判断这是否正确。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-17T16:00:36.103

您的代码看起来正确。

您也正确，释放列表的元素不会立即更改它们指向的内存。它只是将内存返回给将来可能重新分配的堆管理器。

如果您想确保客户端代码不会继续使用已释放列表，您可以将`deleteList`其`NODE`指针也更改为 NULL：

```
void deleteList( NODE** head )
{
    NODE* temp1 = *head;
    /* your code as before */
    *head = NULL;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T16:01:37.260

它仍然打印列表，因为您可能在调用此函数后没有设置`head`指针。`NULL`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-17T16:12:09.273

`I ask this because when I print the list after using this function, it still prints the list.`

`free`使用指针和使指针无效是有区别的。如果`free`您拥有整个链表和头部，则意味着您不再“拥有”`head`所有`next`指针指向的位置的内存。因此，您无法保证那里会有什么值，或者内存是否有效。

但是，如果您在释放链接列表后不碰任何东西，您仍然可以遍历它并打印值的可能性非常大。

```
struct node{
    int i;
    struct node * next;
};

...
struct node * head = NULL;
head = malloc(sizeof(struct node));
head->i = 5;
head->next = NULL;
free(head);
printf("%d\n", head->i); // The odds are pretty good you'll see "5" here 
```

您应该始终释放指针，然后直接将其设置为 NULL，因为在上面的代码中，注释为真。对调用后如何反应/包含做出*任何*假设也是危险的。`head``free()`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-06-14T17:40:16.287

这是一个相当古老的问题，但也许它会帮助某人对该主题进行搜索。

这是我最近写的完全删除单链表的内容。我看到很多人对涉及大型列表的递归算法感到心痛，因为担心堆栈空间不足。所以这里是一个迭代版本。

只需传入“head”指针，该函数会处理其余的...

```
struct Node {
    int i;
    struct Node *next; 
```

};

```
void DeleteList(struct Node *Head) {

    struct Node *p_ptr;

    p_ptr = Head;

    while (p_ptr->next != NULL) {
            p_ptr = p_ptr->next;
            Head->next = p_ptr->next;
            free(p_ptr);
            p_ptr = Head;
    }

    free(p_ptr); 
```

}

# java - 从包含 Arraylists 的 ArrayList 中创建一个数组

> ID：13917543
> 
> 赞同：1
> 
> 时间：2012-12-17T15:58:36.220
> 
> 标签：java, arrays, arraylist, toarray

我有一个问题。

在Java中，我有一个`ArrayList`包含`ArrayList`双值的。从这里我想制作一个`double[][]`数组。

我知道如何通过 'toArray' 方法使用一维数组来制作它，但在这种情况下，我不确定如何去做并且总是在我的代码中收到错误消息。

我的 Aktuell 代码是：

```
double[][] test = new double[Data.getArrayList().size()][Data.getArrayList().size()];

double[][] array = Data.getArrayList().toArray(test); 
```

其中 Data 是我的 ArrayList 的 ArrayList。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T16:02:43.967

你必须

1.  迭代外部 ArrayList
2.  使用 toArray 将每个条目转换为数组
3.  将这些一个一个地添加到数组数组中

它并不漂亮，但实际上没有更好的方法来做到这一点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T16:04:29.053

我会使用这样的方法（把它放在一个实用程序类中）

```
public static double[][] to2DArray(List<List<Double>> input) {
    double[][] output = new double[input.size()][];
    for (int i = 0; i < input.size(); i++) {
        output[i] = new double[input.get(i).size()];
        for (int j = 0; j < input.get(i).size(); j++) {
            output[i][j] = input.get(i).get(j);
        }
    }
    return output;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-17T16:43:09.857

这可能比遍历矩阵中的每个元素要快：

```
private Double[][] to2DArray(ArrayList<ArrayList<Double>> data)
{
    Double[][] result = new Double[data.size()][];
    Double[] temp;
    int mainIdx = 0;
    for (List<Double> arrayOfDouble : data)
    {
        temp = new Double[arrayOfDouble.size()];
        result[mainIdx++] = arrayOfDouble.toArray(temp);
    }
    return result;
} 
```

# grails - Grails 交互模式中的静态字符串

> ID：13917545
> 
> 赞同：5
> 
> 时间：2012-12-17T15:58:43.090
> 
> 标签：grails, groovy, static

我有一个通过 grails 交互模式运行的 grails 应用程序。此应用程序包含服务、tagLibs、gsps 等，但最重要的是它包含 src/groovy 文件夹中的 groovy 文件。

其中一个 groovy 文件称为**AppConstants.groovy**并包含大量静态变量，即

```
public static final String VARIABLE1 = "VARIABLE VALUE" 
```

在非交互模式下运行它时，我没有遇到任何问题，对此变量所做的任何更新都会在下次部署时反映在正在运行的应用程序中。然而，在交互模式下，对变量所做的任何更改`VARIABLE1`都不会反映在应用程序中，即使您调用`exit`和 也是如此`run-app`。要反映更改 必须退出并重新启动交互模式。

起初我认为这可能是一个缓存问题，并且我的静态最终变量正在被缓存，并且由于 JVM 没有重新启动，所以这个缓存永远不会被更新。然而，我注意到添加一个新变量，一个以前从未存在于应用程序中的变量，在重新启动交互模式之前对我的应用程序的其余部分不可用。

任何想法这背后的原因是什么？该类正在编译，因为我可以在交互式控制台中看到这一点，因此人们希望任何更改都会反映在应用程序中，不一定是在它运行时，但至少`exit`后跟一个`run-app`.

**额外信息：Grails 2.1.0 版**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T20:21:52.767

做了一些测试，这是我发现的：

1.  启动过程，但`-reloading`绝不允许更新变量 - 所以开始为`grails -reloading`或`grails -reloading run-app`

2.  `final`如上所述启动过程时，非变量将正确重新加载。当我`public static String VARIABLE1 = "VARIABLE VALUE"`更新值时重新加载并显示

3.  `final`变量不会重新加载。所以`public static final String VARIABLE1 = "VARIABLE VALUE"`不会重新加载并显示新的价值。

我什至创建了几个变量，`final`有些没有。只要我使用`-reloading`非`final`变量就会重新加载但`final`不会。

```
public static final String VARIABLE1 = "VARIABLE VALUE"
public static String VARIABLE2 = "NON FINAL VARIABLE VALUE" 
```

在这种情况下`VARIABLE1`，直到重新启动才会更改 -`VARIABLE2`更新和保存时更改。

# java - 泛型和静态方法

> ID：13917546
> 
> 赞同：2
> 
> 时间：2012-12-17T15:58:43.753
> 
> 标签：java, generics, static-methods

我有这个静态方法

```
public static List<? extends A> myMethod(List<? extends A> a) {
  // …
} 
```

我正在使用

```
List<A> oldAList;
List<A> newAList = (List<A>) MyClass.myMethod(oldAList); 
```

由于未经检查的强制转换为`List<A>`. 有什么办法可以避免演员吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-17T16:03:19.303

您需要定义返回的类型与参数匹配（并扩展 A）

```
public static <T extends A> List<T> myMethod(List<T> a) {
    // …
} 
```

然后你可以写

```
List<E> list1 = .... some list ....
List<E> list2 = myMethod(list1); // assuming you have an import static or it's in the same class. 
```

或者

```
List<E> list2 = SomeClass.myMethod(list1); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T16:01:35.487

您正在将其转换为父级`A`，如果您想避免这种情况，请更改您的返回类型`myMethod`：

```
public static List<T> myMethod(List<T> a) {
  // …
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-17T16:44:06.803

如果你定义：

```
public static <T extends A> List<T> myMethod(List<T> a) {
// …
} 
```

然后你可以打电话：

List = MyClass.myMethod(List a){}

它是通用方法，不是吗？

吉尔卡

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-18T09:08:53.130

这是您可以避免使用静态方法进行强制转换的方法：

```
public class MyClass {
    public static List<? extends A> myMethod(List<? extends A> a) {
        return a;
    }

    public static void main(String[] args) {
        List newList = new ArrayList<A>();
        List<?> newList2 = new ArrayList<A>();
        List<B> oldList = new ArrayList<B>();

        newList = MyClass.myMethod(oldList);
        newList2 = MyClass.myMethod(oldList);
    }
} 
```

在上面的代码中，B 扩展了 A。当 newList 变量被定义为不带泛型的 List 或带有通配符类型 (List< ? >) 的 List 时，不需要强制转换。另一方面，如果您只想摆脱警告，则可以使用“ ***@SuppressWarning*** ”注释。检查此链接以获取更多信息[Java 中的 SuppressWarnings（“未选中”）是什么？](https://stackoverflow.com/questions/1129795/what-is-suppresswarnings-unchecked-in-java)

这是***@SuppressWarnings ("unchecked")***的简单示例：

```
public static List<? extends A> myMethod(List<? extends A> a) {
  // …
}

@SuppressWarnings ("unchecked")
newAList = (List<A>) MyClass.myMethod(oldAList); 
```

# git - p4-git bridge for intellij 社区版

> ID：13917549
> 
> 赞同：3
> 
> 时间：2012-12-17T15:58:55.787
> 
> 标签：git, version-control, intellij-idea, perforce, git-p4

我有 Intellij 的社区版。但它支持的版本控制系统很少，但我的公司使用 perforce。

有什么方法可以在不手动签出的情况下实现版本控制。并触发一些命令以提交给 p4。

基本上我正在考虑使用本地 git repo。还有某种`p4-git`插件来提交我的更改。有什么建议么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-17T16:34:23.663

有几种方法可以做到这一点。最好的是[Perforce Git Fusion](http://www.perforce.com/git-fusion)，但它确实有一些基础设施要求。没什么，但我发现这足以与僵化的公司官僚机构发生冲突。如果发生这种情况，您可以使用[git-p4](http://git-scm.com/docs/git-p4)，它功能较弱，但包含在 Git 发行版中，并且没有任何基础架构要求。

最后，我怀疑 IntelliJ 可能确实支持 Perforce。我没有使用它，但我确实使用了支持 Perforce 的 PyCharm，而且 Jetbrains 的 IDE 基本上都是一样的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T05:08:37.370

我得到了解决方案[git-p4](https://git.wiki.kernel.org/index.php/Git-p4_Usage)。它看起来非常容易和简单。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-09-12T23:10:01.200

社区版有一个新的开源 Perforce 插件[p4ic4idea](https://plugins.jetbrains.com/plugin/7685 "Perforce IDEA 社区整合")，其中包括与 IDE 的完整 VCS 集成。它不如 IntelliJ Ultimate Edition 提供的 Perforce 插件强大，但它支持简单的添加、删除、编辑和提交操作。

# internet-explorer - 如何设置 IE Mobile 7 仿真

> ID：13917550
> 
> 赞同：1
> 
> 时间：2012-12-17T15:58:56.733
> 
> 标签：internet-explorer, jquery-mobile, windows-phone-7-emulator

我有一个使用 jQuery Mobile 构建的移动网络应用程序，可以在各种浏览器/设备上正常工作。我客户的个人电话运行 Windows Phone 7 并安装了 IE Mobile 7。此浏览器有问题（IE Mobile 9 有问题，但我已修复）。

我需要使用该浏览器找到 IE Mobile 7 的仿真器或早期的 Windows Phone 7 仿真器来处理这个问题。当前可用的 WP7 模拟器运行的是 IE Mobile 9。

寻找想法和指导。

# wpf - 如何在没有扩展器的情况下对数据网格进行分组

> ID：13917552
> 
> 赞同：2
> 
> 时间：2012-12-17T15:59:03.460
> 
> 标签：wpf, xaml, wpfdatagrid, grouping, expander

我正在使用[MSDN](http://msdn.microsoft.com/en-us/library/ff407126.aspx)的 Datagrid 分组示例。示例中的代码使用 Expander 来显示组的子行。我不想在我的代码中使用 Expander。我想始终显示每一行。如何在不使用 Expander 控件的情况下在分组数据网格中显示子行？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-17T20:17:44.657

您可以使用 Border，而不是使用 Expander。

```
 <DataGrid.GroupStyle>
                <!-- Style for groups at top level. -->
                <GroupStyle>
                    <GroupStyle.ContainerStyle>
                        <Style TargetType="{x:Type GroupItem}">
                            <Setter Property="Margin" Value="0,0,0,0"/>                            
                            <Setter Property="Template">
                                <Setter.Value>
                                    <ControlTemplate TargetType="{x:Type GroupItem}">   
                                        <Border BorderThickness="1" BorderBrush="Black" CornerRadius="5,5,5,5" Margin="0,0,0,5">
                                            <StackPanel>
                                                <StackPanel Height="30" Orientation="Horizontal">
                                                    <TextBlock FontWeight="Bold" Text="{Binding Path=Name}" Margin="5,0,0,0" Width="100" VerticalAlignment="Center"/>
                                                    <TextBlock FontWeight="Bold" Text="{Binding Path=ItemCount}" VerticalAlignment="Center" />
                                                </StackPanel>

                                                <ItemsPresenter />
                                            </StackPanel>
                                        </Border>
                                    </ControlTemplate>
                                </Setter.Value>
                            </Setter>
                        </Style>
                    </GroupStyle.ContainerStyle>
                </GroupStyle>
                <!-- Style for groups under the top level. -->
                <GroupStyle>
                    <GroupStyle.HeaderTemplate>
                        <DataTemplate>
                            <DockPanel Background="LightBlue">
                                <TextBlock Text="{Binding Path=Name, Converter={StaticResource completeConverter}}" Foreground="Blue" Margin="30,0,0,0" Width="100"/>
                                <TextBlock Text="{Binding Path=ItemCount}" Foreground="Blue"/>
                            </DockPanel>
                        </DataTemplate>
                    </GroupStyle.HeaderTemplate>
                </GroupStyle>
 </DataGrid.GroupStyle> 
```

# wpf - 为什么反应式扩展需要 wpf 助手

> ID：13917555
> 
> 赞同：0
> 
> 时间：2012-12-17T15:59:12.197
> 
> 标签：wpf, winforms

为什么开发人员`Reactive extensions`需要为 WPF 实现不同的库？WinForms 以何种方式不足以实现这样的库？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-19T20:24:05.253

由于平台之间的底层线程模型不同（WinForm vs WPF vs WinRT...），团队转移到通过核心平台服务启用的提供程序模型。该团队在他们的博客上写了大量关于他们决定做出这一改变的决定。参见例如 -

[http://blogs.msdn.com/b/rxteam/archive/2012/08/15/reactive-extensions-v2-0-has-arrived.aspx](http://blogs.msdn.com/b/rxteam/archive/2012/08/15/reactive-extensions-v2-0-has-arrived.aspx)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-19T19:43:26.887

Rx 的 WPF Helpers 包专门是一组将 WPF 移植`Dispatcher`到`IScheduler`整个 Rx 中使用的主题的包装器。非 WPF 应用程序不需要**它们**。

# php - Laravel - Eloquent 或 Fluent 随机行

> ID：13917558
> 
> 赞同：331
> 
> 时间：2012-12-17T15:59:25.470
> 
> 标签：php, laravel, random, eloquent, fluent

如何在 Laravel 框架中使用 Eloquent 或 Fluent 选择随机行？

我知道通过使用 SQL，您可以通过 RAND() 进行排序。但是，我想在**不**计算初始查询之前的记录数的情况下获得随机行。

有任何想法吗？

* * *

## 回答 #1

> 赞同：771
> 
> 时间：2012-12-18T11:11:50.977

**Laravel >= 5.2：**

```
User::inRandomOrder()->get(); 
```

或获取特定数量的记录

```
// 5 indicates the number of records
User::inRandomOrder()->limit(5)->get();
// get one random record
User::inRandomOrder()->first(); 
```

或对集合使用[随机](https://laravel.com/docs/7.x/collections#method-random)方法：

```
User::all()->random();
User::all()->random(10); // The amount of items you wish to receive 
```

Laravel 4.2.7 - 5.1：

```
User::orderByRaw("RAND()")->get(); 
```

Laravel 4.0 - 4.2.6：

```
User::orderBy(DB::raw('RAND()'))->get(); 
```

拉拉维尔 3：

```
User::order_by(DB::raw('RAND()'))->get(); 
```

查看**[这篇](http://www.warpconduit.net/2011/03/23/selecting-a-random-record-using-mysql-benchmark-results/)**关于 MySQL 随机行的文章。Laravel 5.2 支持这一点，对于旧版本，没有比使用[RAW Queries](http://laravel.com/docs/queries#raw-expressions)更好的解决方案。

**编辑 1：正如 Double Gras 所提到的， orderBy()**[自此](https://github.com/laravel/framework/commit/2aaa601aeb6c5efbef536057c855d8c4dcaf10e0)更改以来不允许除 ASC 或 DESC 之外的任何其他内容。我相应地更新了我的答案。

**编辑 2：** Laravel 5.2 最终为此实现[了一个包装函数](https://laravel.com/docs/5.2/queries#ordering-grouping-limit-and-offset)。它被称为**inRandomOrder()**。

* * *

## 回答 #2

> 赞同：57
> 
> 时间：2014-03-05T21:11:38.317

这工作得很好，

```
$model=Model::all()->random(1)->first(); 
```

您还可以更改随机函数中的参数以获取多条记录。

注意：如果您有大量数据，则不建议这样做，因为这将首先获取所有行然后返回随机值。

* * *

## 回答 #3

> 赞同：42
> 
> 时间：2014-07-21T23:35:10.667

**tl;dr：**它现在已在 Laravel 中实现，请参见下面的“编辑 3”。

* * *

可悲的是，截至今天，建议的解决方案有一些警告`->orderBy(DB::raw('RAND()'))`：

*   它与数据库无关。例如 SQLite 和 PostgreSQL 使用`RANDOM()`
*   [更糟糕的是，由于此更改](https://github.com/laravel/framework/commit/2aaa601aeb6c5efbef536057c855d8c4dcaf10e0)，此解决方案不再适用：

    `$direction = strtolower($direction) == 'asc' ? 'asc' : 'desc';`

**编辑：**现在您可以使用[orderByRaw()](http://laravel.com/api/4.2/Illuminate/Database/Query/Builder.html#method_orderByRaw)方法：`->orderByRaw('RAND()')`。然而，这仍然不是 DB 无关的。

FWIW，CodeIgniter 实现了一个特殊的`RANDOM`排序方向，在构建查询时替换为正确的语法。它似乎也很容易实现。看起来我们有一个改进 Laravel 的候选人 :)

更新：这是GitHub 上关于此的[问题，以及我未决的](https://github.com/laravel/framework/issues/5223)[拉取请求](https://github.com/laravel/framework/pull/5435)。

**编辑2：**让我们停止追逐。从 Laravel 5.1.18 开始，您可以向查询构建器添加宏：

```
use Illuminate\Database\Query\Builder;

Builder::macro('orderByRandom', function () {

    $randomFunctions = [
        'mysql'  => 'RAND()',
        'pgsql'  => 'RANDOM()',
        'sqlite' => 'RANDOM()',
        'sqlsrv' => 'NEWID()',
    ];

    $driver = $this->getConnection()->getDriverName();

    return $this->orderByRaw($randomFunctions[$driver]);
}); 
```

用法：

```
User::where('active', 1)->orderByRandom()->limit(10)->get();

DB::table('users')->where('active', 1)->orderByRandom()->limit(10)->get(); 
```

**编辑3：**终于！从 Laravel 5.2.33 ( [changelog](https://github.com/laravel/framework/blob/5.2/CHANGELOG.md) , [PR #13642](https://github.com/laravel/framework/pull/13642) ) 开始，你可以使用原生方法`inRandomOrder()`：

```
User::where('active', 1)->inRandomOrder()->limit(10)->get();

DB::table('users')->where('active', 1)->inRandomOrder()->limit(10)->get(); 
```

* * *

## 回答 #4

> 赞同：24
> 
> 时间：2017-08-11T09:52:23.667

**您可以使用**：

```
ModelName::inRandomOrder()->first(); 
```

* * *

## 回答 #5

> 赞同：19
> 
> 时间：2013-11-29T17:43:27.060

在**Laravel 4 和 5**中，`order_by`替换为`orderBy`

所以，它应该是：

```
User::orderBy(DB::raw('RAND()'))->get(); 
```

* * *

## 回答 #6

> 赞同：12
> 
> 时间：2021-08-31T19:19:55.330

这很简单，只需检查您的 laravel 版本

Laravel >= 5.2：

```
User::inRandomOrder()->get();
//or to get the specific number of records
// 5 indicates the number of records
User::inRandomOrder()->limit(5)->get();
// get one random record
User::inRandomOrder()->first(); 
```

或对集合使用随机方法：

```
User::all()->random();
User::all()->random(10); // The amount of items you wish to receive 
```

Laravel 4.2.7 - 5.1：

```
 User::orderByRaw("RAND()")->get(); 
```

Laravel 4.0 - 4.2.6：

```
 User::orderBy(DB::raw('RAND()'))->get(); 
```

拉拉维尔 3：

```
 User::order_by(DB::raw('RAND()'))->get(); 
```

* * *

## 回答 #7

> 赞同：9
> 
> 时间：2016-07-14T16:56:18.753

对于 Laravel 5.2 >=

使用雄辩的方法：

```
inRandomOrder() 
```

inRandomOrder 方法可用于对查询结果进行随机排序。例如，您可以使用此方法获取随机用户：

```
$randomUser = DB::table('users')
            ->inRandomOrder()
            ->first(); 
```

来自文档：[https ://laravel.com/docs/5.2/queries#ordering-grouping-limit-and-offset](https://laravel.com/docs/5.2/queries#ordering-grouping-limit-and-offset)

* * *

## 回答 #8

> 赞同：8
> 
> 时间：2012-12-22T23:04:54.310

您还可以使用 order_by 方法流利而雄辩，例如：

```
Posts::where_status(1)->order_by(DB::raw(''),DB::raw('RAND()')); 
```

这是一个有点奇怪的用法，但有效。

编辑：正如@Alex所说，这种用法更干净，也有效：

```
Posts::where_status(1)->order_by(DB::raw('RAND()')); 
```

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2017-07-19T06:29:44.827

您可以轻松地使用此命令：

// 问题 : 模型的名称
// 从 DB 中取 10 行 随机记录...

```
$questions = Question::orderByRaw('RAND()')->take(10)->get(); 
```

* * *

## 回答 #10

> 赞同：3
> 
> 时间：2018-12-27T09:16:33.477

使用 Laravel 函数

```
ModelName::inRandomOrder()->first(); 
```

* * *

## 回答 #11

> 赞同：3
> 
> 时间：2019-11-15T14:57:08.467

我更喜欢先指定或失败：

```
$collection = YourModelName::inRandomOrder()
  ->firstOrFail(); 
```

* * *

## 回答 #12

> 赞同：3
> 
> 时间：2019-11-23T14:16:55.213

Laravel 有一个内置的方法来打乱结果的顺序。

这是文档中的引用：

```
shuffle() 
```

shuffle 方法随机打乱集合中的项目：

```
$collection = collect([1, 2, 3, 4, 5]);

$shuffled = $collection->shuffle();

$shuffled->all();

// [3, 2, 5, 1, 4] - (generated randomly) 
```

您可以在[此处查看文档](https://laravel.com/docs/master/collections#method-shuffle)。

* * *

## 回答 #13

> 赞同：2
> 
> 时间：2014-12-16T09:04:01.900

还有`whereRaw('RAND()')`一个做同样的事情，然后你可以链接`->get()`甚至`->first()`疯狂添加`->paginate(int)`。

* * *

## 回答 #14

> 赞同：2
> 
> 时间：2015-07-14T01:21:24.340

在您的模型中添加以下内容：

```
public function scopeRandomize($query, $limit = 3, $exclude = [])
{
    $query = $query->whereRaw('RAND()<(SELECT ((?/COUNT(*))*10) FROM `products`)', [$limit])->orderByRaw('RAND()')->limit($limit);
    if (!empty($exclude)) {
        $query = $query->whereNotIn('id', $exclude);
    }
    return $query;
} 
```

然后在路线/控制器

```
$data = YourModel::randomize(8)->get(); 
```

* * *

## 回答 #15

> 赞同：1
> 
> 时间：2016-03-13T12:35:23.133

我有成千上万条记录的表，所以我需要一些快速的东西。这是我的伪随机行代码：

```
// count all rows with flag active = 1
$count = MyModel::where('active', '=', '1')->count(); 

// get random id
$random_id = rand(1, $count - 1);  

// get first record after random id
$data = MyModel::where('active', '=', '1')->where('id', '>', $random_id)->take(1)->first(); 
```

* * *

## 回答 #16

> 赞同：1
> 
> 时间：2021-10-24T07:29:34.720

试试这个代码！有用：

```
 User::orderBy(DB::raw('RAND()'))->get(); 
```

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2021-04-07T11:46:42.870

以下是我在我的一个项目中获得随机结果的方法：

```
$products           =  Product::inRandomOrder()->limit(10); 
```

10 - 要提取的随机记录数。

* * *

## 回答 #18

> 赞同：-3
> 
> 时间：2020-07-02T10:24:41.787

在 Laravel 7.x 及更高版本中，您可以这样做：

```
$data = Images::all()->random(4); 
```

# android - 在 Android Project App 中有很多包的后果是什么？

> ID：13917560
> 
> 赞同：2
> 
> 时间：2012-12-17T15:59:30.027
> 
> 标签：android

我正在开发一个 Android 项目，其中有六个包（它们之间的通信），每个包中至少有 5 个类。

我正在尝试优化我的项目以更改我的应用程序结构并使其尽可能通用和可靠。因此，我试图减少包裹的数量。

是否建议有一个包很少的项目？换句话说，拥有大量包的后果是什么（尤其是在项目执行方面）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T16:18:12.887

包主要是组织具有功能或技术分离的项目的便捷方式。

很久以前在android开发者博客上有一篇关于优化的有趣文章，其中提到要避免getter和setter。所以依靠公共领域的成员是要走的路（http://developer.android.com/training/articles/perf-tips.html）。为了防止事情变得混乱，程序员的反应是“保护”字段（即受保护的）免受来自另一个包的访问。使用当前的 jit 编译器优化，这不再是真的了。所以使用尽可能少的包是没有意义的。为了清楚起见，我建议根据需要创建尽可能多的包。

# javascript - JQuery-UI Draggable：被拖动的元素大小

> ID：13917561
> 
> 赞同：0
> 
> 时间：2012-12-17T15:59:30.253
> 
> 标签：javascript, jquery, jquery-ui, jquery-ui-draggable

我正在尝试执行以下操作：我在页面上有一个图标，当我拖动它时，图标会发生变化。它不能超出收容区域。

我尝试过的是这样的：

```
$("#myElement").draggalble({
    containment: "#myContainer",
    start: function(event, ui) {
        $(this).attr("width", "20");
        $(this).attr("height", "20");
        $(this).attr("src", "newSource.png");
    }
}); 
```

图标成功更改，我可以拖动它。唯一的问题是新的图标大小。它比原来的要小一些。当我将它拖到容器边界附近时，它过早停止，我无法到达容器边界。具体来说，我无法到达上下边界，但我仍然可以到达底部和左侧。我认为这是因为可拖动插件使用旧图标的大小来计算图标限制。

有人对如何拖动新图标并到达容器边界有一些建议吗？

提前致谢 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T14:58:43.987

为了让它工作，我必须根据较小图片的尺寸创建一个容器对象。

使用以下选项 - 参数分别是容器 div、小图片宽度和小图片高度：

```
 containment: shrinkSize("#container",20,20), 
```

该函数执行以下操作：

```
function shrinkSize(frameId, smallerWidth, smallerHeight) {
    var frameOffset = $(frameId).offset(),
        frameHeight = $(frameId).height()-smallerWidth,
        frameWidth = $(frameId).width()-smallerHeight;

    return ([frameOffset.left, frameOffset.top, frameOffset.left+frameWidth, frameOffset.top+frameHeight]);
} 
```

[在这里拉小提琴](http://jsfiddle.net/mccannf/rLmD3/6/)。

PS 在小提琴中，被拖动的图像在拖放时会恢复为原始大小。如果这不是预期的行为，只需从定义中删除`stop`选项（带函数） 。`draggable`

# xml - 如何在线更改世界天气中的图标

> ID：13917563
> 
> 赞同：0
> 
> 时间：2012-12-17T15:59:41.013
> 
> 标签：xml, asp-classic, weather-api

我使用带有经典 asp 和 XML 的世界天气在线实现了一个天气小部件，一切似乎都运行良好，但我想知道是否有人知道如何更改图标？

谢谢

```
 <%
Function getweather(city)
    Dim tempC, wDesc, wIcon, currentWeather
    Dim wDate, wHigh, wLow, extWeather

    url = "http://free.worldweatheronline.com/feed/weather.ashx?q=" & city & ",Canada&format=xml&num_of_days=4&key=********" 
  set xmlhttp = CreateObject("MSXML2.ServerXMLHTTP") 
  xmlhttp.open "GET", url, false 
  xmlhttp.send "" 

    set objXML = Server.CreateObject("MSXML2.DOMDocument")
    objXML.async = false    
    objXML.loadxml xmlhttp.responseText

    set x = objXML.getElementsByTagName("current_condition")
    if x.length = 0 then
        retStr = "Error"
    else        
        for i = 0 to x.item(0).childNodes.length - 1
            if x.item(0).childNodes(i).nodeName = "temp_C" then
                tempC = x.item(0).childNodes(i).text & "&deg;C"
            end if
            if x.item(0).childNodes(i).nodeName = "weatherDesc" then
                wDesc = x.item(0).childNodes(i).text
            end if
            if x.item(0).childNodes(i).nodeName = "weatherIconUrl" then
                wIcon = "<img class='wIcon' src=" & x.item(0).childNodes(i).text & " height=45 width=45>"
            end if
        next            
        currentWeather = "<div id='curWeather'><span class='city'>" & city & "</span>" & wIcon & "<div class='tempC'>" & tempC & "<br />" & wDesc & "</div>"  & "<a href='#' class='clrWeather' title='Clear weather information'><img src='images/clrweather.gif' alt='Clear weather information' /></a><div style='clear: both;'> </div></div>"
        'Extended weather
        extWeather = "<div class='extWeather'>"
        set y = objXML.getElementsByTagName("weather")
        for i = 0 to y.length - 1
            for j = 0 to y.item(i).childNodes.length - 1
                select case y.item(i).childNodes(j).nodeName
                    Case "date"
                        wDate = y.item(i).childNodes(j).text 
                        wDate = "<div class='ewDate'>" & WeekdayName(Weekday(wDate), true) & "</div>"
                    Case "weatherDesc"
                        wDesc = "<div class='ewDesc'>" & y.item(i).childNodes(j).text & "</div>"
                    Case "weatherIconUrl"
                        wIcon = "<img class='ewIcon' src=" & y.item(i).childNodes(j).text & " height=20 width=20>"
                    Case "tempMaxC"
                        wHigh = y.item(i).childNodes(j).text & "&deg;"
                    Case "tempMinC"
                        wLow = y.item(i).childNodes(j).text & "&deg;"                   
                end select
            next    
            extWeather = extWeather & "<div class='extCol'>" & wDate & wIcon & "<div class='wHigh'>" & wHigh & " / " & wLow & "</div>" & wDesc & "</div>"
        next
        extWeather = extWeather & "<div style='clear: both;'></div></div>"
        retStr = currentWeather & extWeather
    end if  

    set objXML = nothing    
  set xmlhttp = nothing 

    getweather = retStr

End function

Function getCities 
    getCities = "<option value=-1>Select city for weather info</option>" & _
                            "<optgroup label='ONTARIO'><option value='BARRIE'>BARRIE</option>" & _
                            "<option value='BRAMPTON'>BRAMPTON</option>" & _
                            "<option value='CAMBRIDGE'>CAMBRIDGE</option><option value='HAMILTON'>HAMILTON</option><option value='KINGSTON'>KINGSTON</option><option value='LONDON'>LONDON</option><option value='ORILLIA'>ORILLIA</option><option value='OTTAWA'>OTTAWA</option><option value='OWEN SOUND'>OWEN SOUND</option><option value='PETERBOROUGH'>PETERBOROUGH</option><option value='SOUTH PORCUPINE'>SOUTH PORCUPINE</option><option value='SAINT CATHARINES'>ST. CATHARINES</option><option value='SUDBURY'>SUDBURY</option><option value='THUNDER BAY'>THUNDER BAY</option><option value='TIMMINS'>TIMMINS</option><option value='WINDSOR'>WINDSOR</option><optgroup label='NEWFOUNDLAND & LABRADOR'><option value='CORNER BROOK'>CORNER BROOK</option>"

End Function

%> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T08:03:38.243

你有两个选择：要么获取 XML 格式的天气数据，自己解析并构建你自己的设计，要么自己操作原始 HTML 字符串，根据图像名称用你自己的图像替换所需的图像。

我将为第二个选项提供代码示例。首先，检查所有可能图标的名称（例如，获取具有不同天气的不同城市的天气，直到您全部了解）并保留它。然后对于每个图标，获取自己的图标并将其以相同的名称保存在您的服务器中。

有了这个，下面的代码应该可以解决问题：

```
Sub ReplaceIcons(ByRef rawHTML)
    Const imagesFolder = "images/"
    Dim arrImageNames, arrTemp, x
    Dim curSrc, y, curImageName
    arrImageNames = Array("black_low_cloud.png", "cloudy_with_light_snow.png")
    arrTemp = GetBetween(rawHTML, "src=", " ")
    For x=0 To UBound(arrTemp)
        curSrc = LCase(arrTemp(x))
        If Right(curSrc, 3)="png" Then
            For y=0 To UBound(arrImageNames)
                curImageName = arrImageNames(y)
                If InStr(curSrc, curImageName)>0 Then
                    rawHTML = Replace(rawHTML, "src=" & curSrc & " ", "src=""" & imagesFolder & curImageName & """ ")
                End If
            Next
        End If
    Next
    Erase arrTemp
End Sub

Function GetBetween(str, leftDelimeter, rightDelimeter)
      Dim tmpArr, result(), x
      tmpArr=Split(str, leftDelimeter)
      If UBound(tmpArr) < 1 Then
          GetBetween=Array() : Exit Function
      End If
      ReDim result(UBound(tmpArr)-1)
      For x=1 To UBound(tmpArr)
          result(x-1)=(Split(tmpArr(x), rightDelimeter))(0)
      Next
      Erase tmpArr
      GetBetween=result
End Function 
```

这只是替换两个图标的示例。如果服务器上的图像位于子文件夹中，`imagesFolder`请将其保持不变，否则将其留空。`arrImageNames`放入所有可能的图标。

要使用上述内容，只需在返回 HTML 之前调用它：

```
'...
set objXML = nothing    
set xmlhttp = nothing 

Call ReplaceIcons(retStr)

getweather = retStr 
```

# scala - 对于 scala 中的对象是不可变的，需要什么？

> ID：13917571
> 
> 赞同：1
> 
> 时间：2012-12-17T16:00:14.267
> 
> 标签：scala

是这个的答案：

对象的实例化使用“val”而不是“var”。

正在创建的对象的每个成员变量也是“val”而不是“var”。这是为了防止用户在设置后更新对象值。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-17T16:27:21.697

如果该对象的用户无法更改该对象，则该对象是不可变的。这意味着它必须没有公共方法来重新分配其任何成员变量或改变这些变量引用的任何对象。如果所有对象的成员都是`val`s 这确保前者（即它们不能被重新分配），但不是后者（即如果这些变量引用的对象本身是可变的，它们仍然可以通过调用它们的变异方法来变异即使它们仅由`val`s 引用）。

另请注意，即使成员被声明为`var`s，如果对象的方法都没有真正重新分配变量（或在它们上调用变异方法），则对象仍然可以是不可变的 - 当然，假设它们是私有的。

因此，对于一个不可变的对象来说，只有`val`成员既不是必要的，也不是充分的。无论对象是由 a`val`还是 a `var`（或两者）引用，在这件事上都没有区别。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T16:38:22.557

@sepp2k 很好且正确地解释了对象在*技术上*不可变的标准。他的回答中缺少的一个微妙点是，并非所有成员变量都对应于外部可见*状态*。成员也可以是例如缓存的内部值，用于存储一些本地的、难以计算的数据，这些数据从外部不直接可见（因此`private[this]`在 Scala 中是合格的）。对象可以具有这样的`var`成员，例如存储计算的散列值。它甚至可以通过公共 getter 访问——只要访问器的行为是纯函数式的，即它总是为同一个对象的每次调用产生相同的值（除了在重用内部缓存值时它返回更快）。

Scala 编译器意识到了这一区别，因此它可以帮助人们正确实现不可变类，即使在内部使用可变状态时也是如此。当泛型类型变化发挥作用时，这一点很重要。即，编译器允许泛型类型参数是协变的，即使该类包含此类型的可重新分配字段 - 只要这些字段是`private[this]`，确保不能引用具有静态比该类型更弱的类型的包含对象对象是用定义的（这将是导致类型错误的方差的先决条件）。

[*这在Programming in Scala*](http://www.artima.com/shop/programming_in_scala_2ed)的第 19.7 节中通过代码示例进行了更详细的解释。

# c# - 如何判断热键组合是否已经存在

> ID：13917577
> 
> 赞同：3
> 
> 时间：2012-12-17T16:00:41.720
> 
> 标签：c#

我正在使用 Registerhotkey 允许我的用户定义自定义组合键来执行不同的操作。我似乎遇到的问题是目前无法检查密钥是否已经存在。

例如：我的一位测试人员试图定义“Windows Key + D”，但不知道这是最小化所有窗口的组合键。所以我很好奇是否有任何方法可以判断给定的组合键是否可以检查 Windows 或任何其他应用程序是否已经存在该组合键。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T16:56:28.473

感谢 @jim-mischel[帮助我找到这个解决方案](https://stackoverflow.com/questions/13917577/how-to-tell-if-hotkey-combination-already-exists#comment19184326_13917577)！

要检查是否存在热键，只需执行以下操作：

```
int ShortcutID = 100; // ID used for this Shortcut Key Combination
uint keyModifier = 2; // This is the Control Key
Char alphanumericKey = "C";
bool didItError
   = RegisterHotKey(this.Handle, ShortcutID, keyModifier, (int)alphanumericKey ); 
```

由于`Control+C`是 Windows 注册的组合键，`RegisterHotKey`将返回 false，如果它不是注册组合键，则返回 true！

# ajax - 输入验证不适用于作为 JSON 发送的 asp.net mvc 4 模型

> ID：13917578
> 
> 赞同：13
> 
> 时间：2012-12-17T16:00:43.237
> 
> 标签：ajax, asp.net-mvc, jquery

我在视图中有一个模型和一个表单。我有一个简单的字符串字段，称为描述。我可以在`<script>alert('xss')</script>`该字段中插入如下脚本：我可以看到，在我的网站上使用其他模型的其他操作中，我看不到我没有`AllowHtml`类似的东西。

唯一的区别是，对于这个模型，我使用带有 json 对象和内容类型的应用程序/json 的帖子`ModelState.IsValid`返回 true。即使有一个带有 xss 脚本的描述属性...

对于其他操作，我做了一个简单的 ajax 帖子。

为什么验证输入不适用于这种 JSON ajax 帖子？对于这种 ajax 请求，如何防止整个站点的 xss？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-14T18:06:03.097

这是因为 ValidateInput 仅适用于 FormValueProvider。至于 JsonValueProvider，你需要推出自己的机制。

步骤 1) 创建标记属性`CustomAntiXssAttribute` 2) 通过子类化创建自定义模型绑定器`DefaultModelBinder` 3) 覆盖`BindProperty`方法 -> 获取底层属性的尝试值，对其进行清理并将其分配给视图模型属性。看看[这个](https://stackoverflow.com/questions/13441482/antixss-protection-html-model-properties)。

已编辑：将行替换`var valueResult = bindingContext.ValueProvider.GetValue(propertyDescriptor.Name);`为`var valueResult = bindingContext.ValueProvider.GetValue((string.IsNullOrWhiteSpace(bindingContext.ModelName) ? string.Empty : bindingContext.ModelName + ".") + propertyDescriptor.Name);`以支持嵌套的 ViewModel。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-12-05T08:43:59.863

另一种方法是使用像[这样](https://github.com/mganss/HtmlSanitizer)的 Sanitizer 库，您可以选择要过滤掉的 HTML 标签。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-11-05T08:29:43.340

尝试使用 Nuget 中的 AntiXssLibrary，并使用 getSafeHtmlContent。在将记录保存到 db 时，您可以获得安全的内容。

# c# - 面板滚动asp.net android

> ID：13917580
> 
> 赞同：0
> 
> 时间：2012-12-17T16:00:51.927
> 
> 标签：c#, asp.net, visual-studio-2010

我正在尝试在 android 本机浏览器中水平滚动 gridview。我已将我的 gridview 放在面板标签中。但水平滚动不适用于安卓手机。它在 iphone 中运行良好。有什么建议么。代码如下所示。

```
 <asp:GridView ID="GridView1" runat="server" AllowPaging="True" 
                AllowSorting="True" AutoGenerateColumns="False" BackColor="White" 
                BorderColor="#999999" BorderStyle="None" BorderWidth="1px" CellPadding="3" 
                DataSourceID="test" GridLines="Vertical" 
                ShowFooter="True" onrowdatabound="GridView1_RowDataBound" PageSize="20" Width = "100%" style =" display:table; width:100%; 
        word-wrap: break-word; " scrollbars="horizontal">
                <AlternatingRowStyle BackColor="#DCDCDC" />
                <Columns>
                    <asp:BoundField DataField="location_name" HeaderText="Location Name" ><ItemStyle /></asp:BoundField>
                    <asp:BoundField DataField="room_type_description" HeaderText="Room Type" ><ItemStyle /></asp:BoundField>
                    <asp:BoundField DataField="arrival_date" HeaderText="Arrival Date" 
                        DataFormatString="{0:d}" ><ItemStyle /></asp:BoundField>
                    <asp:BoundField DataField="departure_date" HeaderText="Departure Date" 
                       DataFormatString="{0:d}" ><ItemStyle /></asp:BoundField>
                    <asp:BoundField DataField="nights" HeaderText="# of Nights Stayed"  ><ItemStyle HorizontalAlign="Right" /></asp:BoundField>
                    <asp:BoundField DataField="reservation_number" HeaderText="Reservation Number" ><ItemStyle  /></asp:BoundField>
                    <asp:TemplateField HeaderText="Points">
                        <EditItemTemplate>
                            <asp:TextBox ID="TextBox1" runat="server" Text='<%# Bind("points") %>'></asp:TextBox>
                        </EditItemTemplate>
                        <ItemTemplate>
                            <asp:Label ID="Label1" runat="server" Text='<%# Bind("points") %>'></asp:Label>
                        </ItemTemplate>
                        <ItemStyle HorizontalAlign="Right"  />
                        <FooterTemplate>
                            <asp:Label ID="subTotalValueLabel" runat="server" Text=""></asp:Label><br />
                            <asp:Label ID="grandTotalValueLabel" runat="server" Text=""></asp:Label>
                        </FooterTemplate>
                    </asp:TemplateField>
                </Columns>
                <FooterStyle BackColor="#CCCCCC" ForeColor="Black" Font-Bold="True" 
                    HorizontalAlign="Right"/>
                <HeaderStyle BackColor="#000084" Font-Bold="True" ForeColor="White" />
                <PagerStyle BackColor="#999999" ForeColor="Black" HorizontalAlign="Center" />
                <RowStyle BackColor="#EEEEEE" ForeColor="Black" />
                <SelectedRowStyle BackColor="#008A8C" Font-Bold="True" ForeColor="White" />
                <SortedAscendingCellStyle BackColor="#F1F1F1" />
                <SortedAscendingHeaderStyle BackColor="#0000A9" />
                <SortedDescendingCellStyle BackColor="#CAC9C9" />
                <SortedDescendingHeaderStyle BackColor="#000065" />

                <EmptyDataTemplate>
                    <table cellspacing="0" cellpadding="3" rules="cols" border="1" style="background-color:White;border-color:#999999;border-width:1px;border-style:None;border-collapse:collapse;">
                        <tr style="color:White;background-color:#000084;font-weight:bold;">
                            <th scope="col">Location Name</th><th scope="col">Room Type</th><th scope="col">Arrival Date</th><th scope="col">Departure Date</th><th scope="col"># of Nights Stayed</th><th scope="col">Reservation Number</th><th scope="col">Points</th>
                        </tr><tr style="color:Black;background-color:#EEEEEE;">
                            <td colspan="7" align="center">No stay history data found.</td>

                    </table>                        
                </EmptyDataTemplate>

                <SortedAscendingCellStyle BackColor="#F1F1F1" />
                <SortedAscendingHeaderStyle BackColor="#0000A9" />
                <SortedDescendingCellStyle BackColor="#CAC9C9" />
                <SortedDescendingHeaderStyle BackColor="#000065" />

            </asp:GridView>
            <asp:Label ID="TotalPointsAvailableLabel" runat="server" Text=""></asp:Label>
        </asp:Panel> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-14T18:01:32.427

尝试使用 CSS Div，例如： .grdScroll { moverflow:scroll ; 然后在您的 .aspx 中：您的 gridview 控件...

# asp.net - 在 asp.net 的数据库中保存 PDF 中的图像和文本

> ID：13917588
> 
> 赞同：0
> 
> 时间：2012-12-17T16:01:14.200
> 
> 标签：asp.net

是否可以将图像 PDF 及其文本保存在 asp.net 的数据库中？（作为二进制文件）在我的应用程序中，用户需要上传一个包含多个问题的 PDF 文件，并且应用程序必须在数据库中的图像中提取问题。（当然这些问题有一个特殊的符号用于彼此分开）这可能吗？如果是，请指导我？谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T16:02:50.747

我希望这会帮助你做你正在寻找的东西： http: [//www.dotnetcurry.com/ShowArticle.aspx ?ID=129](http://www.dotnetcurry.com/ShowArticle.aspx?ID=129)

# ruby-on-rails - ActiveRecord 克隆记录与内存关联？

> ID：13917589
> 
> 赞同：0
> 
> 时间：2012-12-17T16:01:15.893
> 
> 标签：ruby-on-rails, activerecord, rspec

我有一个属于用户的活动记录模型：

```
class Profile < ActiveRecord::Base
  belongs_to :user
  ...
end 
```

在我的模型测试中，我有一个 before_all 块：

```
before :all do
  @profile = build(:user)
end 
```

每个测试用例都通过访问器方法获得概要文件类的干净副本，该访问器方法获取对象的深层克隆：

```
def profile
  @profile.dup
end 
```

好又快，而不是每次都打电话给工厂:)

但是我的问题是，因为配置文件及其关联在内存中，所以配置文件中不存在 user_id，因此内存中的用户对象也不会被复制。

所以 while`@profile.user`是一个对象：

```
<User id: nil, email 'test@test.com '.../> 
```

`@profile.dup.user`是

```
nil 
```

如果我在哪里打电话`@profile.save`那么神奇

`@profile.dup.user`变成：

```
<User id: 1, email 'test@test.com '...> 
```

除了覆盖我的私有方法以将用户显式复制到克隆上之外，还有一种方法可以让导轨进行提升。即使该方法的行为与被持久化的`dup`方法相同？`@profile`

感谢您的任何建议。

# animation - Cocos2D 动画 - 将场景切割成碎片

> ID：13917607
> 
> 赞同：0
> 
> 时间：2012-12-17T16:02:30.977
> 
> 标签：animation, cocos2d-iphone, split, scene

我发现了这个动画[http://youtube.com/watch?v=wt6gsIcNBOA](http://youtube.com/watch?v=wt6gsIcNBOA)（看看 1:46）。我找不到这个动画是如何完成的。基本上它应该看起来像场景被分成 3 个不同的部分。

知道如何制作类似的动画吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T16:30:18.843

它是一个“简单”的 CCTransitionSplitRows 动画

```
CCTransitionSplitRows *transition = [CCTransitionSplitRows transitionWithDuration:1 scene:scene];
[[CCDirector sharedDirector] replaceScene:transition]; 
```

cocos2d 中有更多这样的花哨过渡， 例如参见[http://www.pawapps.com/2011/07/30/tutorial-transitions-in-cocos2d/](http://www.pawapps.com/2011/07/30/tutorial-transitions-in-cocos2d/)

# javascript - Javascript on demand 在生产服务器上不起作用

> ID：13917614
> 
> 赞同：1
> 
> 时间：2012-12-17T16:02:49.313
> 
> 标签：javascript, jquery

我在生产服务器上的脚本有一个奇怪的问题。

我正在使用此解决方案按需运行脚本：

```
function loadjscssfile(filename, filetype){
 if (filetype=="js"){ //if filename is a external JavaScript file
  var fileref=document.createElement('script')
  fileref.setAttribute("type","text/javascript")
  fileref.setAttribute("src", filename)
 }
 else if (filetype=="css"){ //if filename is an external CSS file
  var fileref=document.createElement("link")
  fileref.setAttribute("rel", "stylesheet")
  fileref.setAttribute("type", "text/css")
  fileref.setAttribute("href", filename)
 }
 if (typeof fileref!="undefined")
  document.getElementsByTagName("head")[0].appendChild(fileref)
} 
```

它取自这个页面：[http ://www.javascriptkit.com/javatutors/loadjavascriptcss.shtml](http://www.javascriptkit.com/javatutors/loadjavascriptcss.shtml)

当我在本地运行它时，它在所有可能的浏览器中都能顺利运行。但在生产服务器上，它只能在 IE 8 和更早版本中运行......

这是我用这个函数调用的实际代码：

```
$(document).ready(function () {
    $("#vertical_cssmenu a").hover(function() {
        $(this).stop().animate({ backgroundColor: "#f22d00"}, 350);
    },function() {
        $(this).stop().animate({ backgroundColor: "#e5e5e5" }, 350);
    }); 
    $("#vertical_cssmenu a").click(function() {
        var toLoad = $(this).attr('href')+' #text_content > *';
        $('#text_content').fadeOut(500,loadContent);
        $(this).attr('href').substr(0,$(this).attr('href').length-4);
        function loadContent() {
            $('#text_content').load(toLoad,'',showNewContent());
        }
        function showNewContent() {
            $('#text_content').fadeIn(1000);
        }
        return false;
    });
}); 
```

请帮帮我:)

编辑：这是页面上主要 javascript 的代码：

```
// dynamiczne ladowanie CSS i JS
 function ensureUploadScriptIsLoaded() {
   if (self.uploadScript) { // Already exists
     return;
   }
   var head = document.getElementsByTagName("head")[0];
   script = document.createElement('script');
   script.id = 'uploadScript';
   script.type = 'text/javascript';
   script.src = "js/vertical.js";
   head.appendChild(script);
 }

// fullscreen BG

$(window).load(function ()
{
    var theWindow = $(window),
        $bg = $("#bg"),
        aspectRatio = $bg.width() / $bg.height();

    function resizeBg()
    {
        if ((theWindow.width() / theWindow.height()) < aspectRatio)
        {
            $bg.removeClass()
                .addClass('bgheight');
        }
        else
        {
            $bg.removeClass()
                .addClass('bgwidth');
        }
    }
    theWindow.resize(function ()
    {
        resizeBg();
    }).trigger("resize");
});
// RSS
$(document).ready(function ()
{
    $('#divRss').FeedEk(
    {
        FeedUrl: 'http://someurl.here',
        MaxCount: 5,
        ShowDesc: true,
        ShowPubDate: true
    })
    // baner    
    $('#acc-holder').easyAccordion(
    {
        autoStart: true,
        slideInterval: 5000,
        slideNum: false
    });
    // menu animacja
    $("#horizontal_cssmenu a").hover(function ()
    {
        $(this).stop().animate(
        {
            backgroundColor: "#f22d00"
        }, 750);
    }, function ()
    {
        $(this).stop().animate(
        {
            backgroundColor: "#790079"
        }, 350);
    });
    // ladowanie 
    $("#horizontal_cssmenu a").click(function ()
    {
        var toLoad = $(this).attr('href');
        $('#contentsth').fadeOut('150', loadContent);
        window.location.hash = $(this).attr('href').substr(0, $(this).attr('href').length - 4);

        function loadContent()
        {
            $('#contentsth').load(toLoad, showNewContent);
        }

        function showNewContent()
        {
            $('#contentsth').fadeIn(1000, ensureUploadScriptIsLoaded);
        }
        return false;
    });
    var hash = window.location.hash.substr(1);
    var href = $('#horizontal_cssmenu a').each(function ()
    {
        var href = $(this).attr('href');
        if (hash == href.substr(0, href.length - 4))
        {
            var toLoad = hash + '.htm';
            $('#contentsth').load(toLoad)
        }
    });
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T16:12:39.273

```
$('#text_content').load(toLoad,'',showNewContent()); 
```

需要是

```
$('#text_content').load(toLoad, '', showNewContent); 
```

而且由于您没有发送数据，因此您可以这样做

```
$('#text_content').load(toLoad, showNewContent); 
```

# objective-c - iOS 在钥匙串中保存一个对象

> ID：13917617
> 
> 赞同：0
> 
> 时间：2012-12-17T16:03:00.797
> 
> 标签：objective-c, ios, keychain

> **可能重复：**
> [如何为项目中的单个文件禁用 ARC？](https://stackoverflow.com/questions/6646052/how-can-i-disable-arc-for-a-single-file-in-a-project)

我对钥匙串访问有一点问题。

当我尝试它时，Xcode 对我说，我必须禁用 ARC。

但是那个项目真的很大，而且重写起来很可怕。

你能帮助我吗？

我一直在寻找解决这个问题的方法。

# c++ - 绑定中的深层参数

> ID：13917623
> 
> 赞同：3
> 
> 时间：2012-12-17T16:03:27.473
> 
> 标签：c++, c++11, bind

我编写了以下代码，并没有考虑太多我在做什么，我真的很惊讶它实际上可以按我的预期工作。

有人可以解释为什么以及如何 bind 设法使用深层参数吗？

```
#include <string>
#include <cstdio>
#include <vector>
#include <algorithm>
#include <functional>
using namespace std;
using namespace placeholders;

int main()
{
    vector<string> s = { "abc", "aaaaaaa", "c" };

    for_each(s.begin(),s.end(),
             bind(printf,"string length is %d\n",bind(&string::length,_1)));
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-17T18:39:19.063

该标准定义了一元类型特征`is_bind_expression<T>`，如果`T`是从 中返回的调用包装器类型`std::bind()`，或者该特征已专门用于用户定义的类型，则该特征为真。

当调用包装器被调用时，如果它的任何绑定参数是绑定表达式（由 确定`is_bind_expression`），则使用与调用外部表达式相同的所有参数调用该嵌套绑定表达式。嵌套的绑定表达式可以选择它具有占位符的任何参数（`_1`在您的示例中）。这是递归完成的，因此调用内部绑定表达式还将检查它的任何绑定参数是否是绑定表达式，并使用相同的参数集调用它们等等。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-17T16:12:06.737

我不知道`bind`这到底是怎么回事，但我不认为这是一个谜，如果你能区分的话。

的类型`bind`可能会根据其输入类型而有所不同。因此`bind`，具有 a`_1`作为输入类型的 a 可以注意到它`_1`在其返回类型中消耗的事实（实际上，这很有意义）。 也可以从其参数中`bind`提取这一事实（参数中存在未绑定）。`_1`

引用一些`std::bind`文档：

> 如果 std::is_bind_expression::value == true （即另一个 sbind 子表达式在对 bind 的初始调用中用作参数），则立即调用该 bind-subexpressin 并将其结果传递给可调用对象。如果绑定子表达式有任何占位符参数，它们是从 u1, u2, ...中挑选出来的。

# asp.net - 使用 HttpContext.Current.Request.Cookies.Set()

> ID：13917625
> 
> 赞同：1
> 
> 时间：2012-12-17T16:03:43.657
> 
> 标签：asp.net, cookies, httpcontext

我在一些代码中看到了这一点，我对您何时使用该方法感到有些困惑。当然，该`Get()`方法对请求有意义，但您通常不会`Set()`在对象中为 cookie 使用方法`Response.Cookies`，而不是`Request.Cookies`?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T20:24:12.807

假设您有一些代码需要请求中的 cookie，但在某些情况下该 cookie 不存在。在这种情况下，您可以将请求中的 cookie 设置为默认值。

此外，如果您正在测试依赖于请求中存在的 cookie 的代码（例如，在进行[单元测试](http://en.wikipedia.org/wiki/Unit_testing)时），那么您当然需要一种无需浏览器即可设置 cookie 的方法（单元测试要求单独测试代码）。

# sql-server - 如何更改 connection_instance.Open() 命令的超时时间？

> ID：13917626
> 
> 赞同：2
> 
> 时间：2012-12-17T16:03:45.403
> 
> 标签：sql-server, entity-framework

伙计们！

我正在使用实体框架（但实际上并不重要）和多个数据库（ObjectContexts）。其中一个 sql server 有额外的数据，这是可选的，它有时可以离线。

当我在服务器离线时尝试处理任何命令的异常时，我应该在 connection_instance.Open() 命令操作上等待 60 秒，这会给我带来异常：

> 建立与服务器的连接时发生错误。连接到 SQL Server 2005 时，此故障可能是由于在默认设置下 SQL Server 不允许远程连接造成的。（提供者：命名管道提供者，错误：40 - 无法打开与 SQL Server 的连接）

我可以以某种方式将此超时时间从 60 秒更改为 5 秒的另一个值吗？顺便说一句，我的实体框架超时连接是 2 秒，但它被忽略了。

看起来这个超时设置为整个系统（可能在 Windows 寄存器中）。我尝试通过 SQL Management Studio 连接到这个 sql 服务器，它也尝试连接 60 秒，之后得到了同样的异常。

那么，有没有办法改变这个超时值呢？或者也许还有另一种检查 sqlserver 状态的快速方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T16:15:29.457

ObjectContext.CommandTimeout 工作吗？

```
 /// <summary>
/// Gets or sets the timeout value, in seconds, for all object context operations. A null value indicates that the default value of the underlying provider will be used.
/// </summary>
/// 
/// <returns>
/// An <see cref="T:System.Int32"/> value that is the timeout value, in seconds.
/// </returns>
/// <exception cref="T:System.ArgumentException">The timeout value is less than 0\. </exception>
public int? CommandTimeout 
```

# javascript - 使用 javascript 隐藏移动浏览器 chrome（适用于 iPhone，但不适用于 Android）

> ID：13917628
> 
> 赞同：0
> 
> 时间：2012-12-17T16:03:58.650
> 
> 标签：javascript, android, mobile

Ive 使用以下 javascript 来隐藏手机浏览器 chrome，方法是向下滚动页面，使其不可见。它适用于 iPhone，但在我测试的第一个 android 上没有任何作用。

```
 $(document).ready(function () {
            window.scrollTo(0, 0);
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T16:27:18.420

也许您需要放置超过 0 个滚动条。我认为这会奏效。

```
window.scrollTo(0,1); 
```

# java - startActivityForResult 是否会在启动的 Activity 完成时通知调用的 Activity？

> ID：13917634
> 
> 赞同：0
> 
> 时间：2012-12-17T16:04:22.793
> 
> 标签：java, android, android-activity

我在那里查看一个Android问题，询问以下陈述是否属实..

什么时候`startActivityForResult`用于`Activity`从您的`Activity`班级启动新课程，然后您的`Activity`班级会在新课程完成时收到通知`Activity`。

我的观点是，整个要点`startActivityForResult`是通知调用 Activity 它启动的 Activity 已经完成，并允许在需要时返回数据。

我对 Android 比较陌生，我想弄清楚我的事实。

任何输入将不胜感激。

干杯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T16:09:33.240

> 当 startActivityForResult 用于从您的活动类启动新活动时，您的活动类会在新活动完成时收到通知。

这是真的，`onActivityResult (int requestCode, int resultCode, Intent data)`在活动中调用，它为结果启动了其他活动 - 覆盖它以处理结果

> 我的观点是， startActivityForResult 的全部意义在于通知调用 Activity 它启动的 Activity 已经完成，并允许在需要时返回数据。

这也是正确的，您可以通过调用设置结果为结果的活动`setResult (int resultCode, Intent data)`- 传递包含额外数据的 Intent 数据 - 然后您可以从 onActivityResult 中的 Intent 数据中检索它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T16:09:56.203

为了理智，让我们拥有`Activity A`and `Activity B`！

`ActivityA`开头。`ActivityB`_`startActivityForResult`

`ActivityB`做到这一点并完成。`onActivityResult`被调用`ActivityA`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-17T16:14:35.630

当您希望被调用的活动向调用活动返回结果时，您可以使用 startActivityForResult。调用活动必须实现 onActivityResult 才能获得有关结果的通知。当被调用的活动完成其工作时，它会调用 setResult。它只是在活动之间共享价值的一种方式，与通知系统无关。我希望我很清楚。

# git - git：如何创建我当前工作的分支，但留在我原来的分支上

> ID：13917636
> 
> 赞同：4
> 
> 时间：2012-12-17T16:04:25.817
> 
> 标签：git, save, branch

我在一个分支上（比如说主人），我的工作目录有一些变化。我得到了工作，但需要大量清理 - 所以我想将我当前的工作目录保存到一个分支，以防万一我需要回到它。我以后肯定会删除分支。

此外，我想在我原来的位置继续研究大师。

现在我做：

```
# Save to topic branch
git checkout -b working-stuff
git commit -a -m "work in progress"

# go back to master and continue with the state is was in before
git checkout master
git checkout -- .
git reset 
```

稍后，我将删除主题分支。

所以，上面的内容正是我想要的，但它有点冗长。有没有更简单的方法来做到这一点（除了编写脚本之外）？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-17T16:08:07.563

您可以使用

```
 git stash 
```

从手册

> 当您想记录工作目录和索引的当前状态，但又想回到干净的工作目录时，请使用 git stash。该命令保存您的本地修改并恢复工作目录以匹配 HEAD 提交。

`git stash`存储修改后，您可以再次应用它们：

```
 git stash apply 
```

或者您可以列出您隐藏的修改：

```
 git stash list 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-18T09:35:49.353

为了完整起见：如果你想要一个正确的分支（它比存储有一些优势），你不需要使用管道命令，你也可以这样做：

```
git add -A .
git commit -m "dirty"
git branch dirtybranch
git reset --hard HEAD^ 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-17T16:18:50.557

```
$ git 添加栏

$ 混帐状态
# 在分支master上
# 要提交的更改：
# （使用“git reset HEAD ...”取消暂存）
#
# 新文件：bar
#

$ git branch newbar $(echo wip | git commit-tree \
  $(git write-tree) -p $(git rev-parse HEAD))

$ git lola --name-status
* e3f88c8 (newbar) wip
| 一间酒吧
* a7b1a76 (HEAD, master) foo
  一个富
```

仅仅因为你*可以*并不意味着你*应该*。

# vb.net - VB.NET DirectorySearcher 分页

> ID：13917638
> 
> 赞同：1
> 
> 时间：2012-12-17T16:04:31.847
> 
> 标签：vb.net, active-directory

我一直在寻找找出已经搜索了多少页面，以便我可以多线程搜索

示例 假设 Active Directory 有 5000 台计算机。Active Directory 一次查询只会返回 1000 台计算机。以下代码将返回 5 页的 1000 个结果。我将如何计算 DirectorySearcher 必须执行多少页才能获得所有结果？

谢谢

```
Dim Searcher As DirectorySearcher = New DirectorySearcher("(objectClass=computer)")
Searcher.PageSize = Integer.MaxValue
Searcher.SizeLimit = Integer.MaxValue
Dim Result As SearchResultCollection = Searcher.FindAll()
For Each i As SearchResult In Result
//some code
Next 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T03:22:45.347

我不建议尝试多线程 LDAP 查询。各个搜索是独立的。假设您有两个线程，其中第一个请求第一个 2500，第二个获得其余线程。请注意，如果第一个线程进行查询，并且其中一台计算机在第二个线程进行查询之前被删除，会发生什么情况。第 2501 台计算机刚好在第一个线程的范围之外，然后就在第二个线程的范围之外。您不会在查询中找到这台计算机。

我将假设您想要多线程，因为 FindAll 方法花费的时间太长。通过将 PageSize 设置为 Integer.MaxValue，您将强制 DC 在向您发送结果之前处理整个查询。如果您希望 FindAll 更快地返回，请设置较小的页面大小。只要您设置页面大小，DirectorySearcher 就会抽象出它必须向服务器请求更多结果的事实（否则它只返回前 1000 个结果）。另一件需要注意的是，[在 Server 2008 之前，objectClass 属性没有被索引](http://msdn.microsoft.com/en-us/library/windows/desktop/ms677612%28v=vs.85%29.aspx)。

最后，如果您确实想在多个线程之间分配页面，请使用[System.DirectoryServices.Protocols 命名空间](http://msdn.microsoft.com/en-us/library/system.directoryservices.protocols.aspx)。它的级别比 System.DirectoryServices 低，因此您可以执行诸如[异步搜索之类的操作并自己请求页面](http://msdn.microsoft.com/en-us/library/bb332056.aspx)。

# outlook - 无法使用 OpenSSL 解密 AES 加密的 SMIME 消息

> ID：13917640
> 
> 赞同：0
> 
> 时间：2012-12-17T16:04:35.587
> 
> 标签：outlook, openssl, aes, thunderbird, 3des

我有一个收件人的两封邮件（SMIME 加密）。一封邮件使用 3DES 加密，另一封使用 AES 256 加密。

使用 C# [EnvelopedCms](http://msdn.microsoft.com/en-us/library/system.security.cryptography.pkcs.envelopedcms%28v=vs.100%29.aspx)类创建的邮件。

我可以使用成功解密 3DES 消息

```
openssl smime -decrypt -in trippledes.eml -inkey keyfile.pem 
```

但是，如果我尝试使用 AES 加密文件，OpenSSL 会输出一些乱码，并且会出现以下注释：

```
Error decrypting PKCS#7 structure 4128:error:06065064:digital envelope routines:EVP_DecryptFinal_ex:bad decrypt:.\crypto\evp\evp_enc.c:539: 
```

Thunderbird 也无法打开邮件。但是 Outlook 2010 打开邮件没有问题。

解决问题的最佳方法是什么？我可以打开任何日志记录吗？

我已经使用[http://lapo.it/asn1js/](http://lapo.it/asn1js/)上的 ASN.1 解码器检查了两封邮件的 ASN.1 结构。两条消息对我来说都不错，所以我猜罪魁祸首在于加密的内容本身。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-12-10T15:02:14.703

我知道这已经晚了几年，但它可能对其他人有帮助......

几年来，我非常成功且愉快地使用 EnvelopedCms，与许多其他实现交换消息。今年有人决定要求使用 AES 时，我发现至少有一个基于 Java 的系统无法处理我的消息。（他们的错误是“无法创建 PKCS #7 MIME 内容”）

我使用 ASN 信息实用程序来分解我发送的内容，并发现当内容加密设置为 AES 时，EnvelopedCms 将 KeyEncryptionAlgorithm 强制为 RSA-OAEP。（如果内容是用其他任何东西加密的，那么 KeyEncryptionAlgorithm 就是普通的 RSA。）

我找不到解释这种行为的文档或 RFC，而且似乎没有任何方法可以改变它。

我对这个问题的解决方案是使用 BouncyCastle CmsEnvelopedDataGenerator 类。到目前为止，它似乎至少与 EnvelopedCms 一样好用，并且避免了 RSA-OAEP 密钥加密问题。几乎是直接替代品（使用的证书类除外。）

虽然我找不到任何文档明确说明我的收件人的 Java 库不能使用 RSA-OAEP 算法，但一旦我消除了它，他们的错误就消失了，并且成功发送了消息。

使用 BouncyCastle 的示例代码：

```
private byte[] CmsEncrypt(byte[] message, string contentEncryptionOid, Org.BouncyCastle.X509.X509Certificate recipCertificate)
{
    var cmsGenerator = new CmsEnvelopedDataGenerator();
    var cmsData = new CmsProcessableByteArray(message);

    cmsGenerator.AddKeyTransRecipient(recipCertificate);

    var cmsEnvelope = cmsGenerator.Generate(cmsData, contentEncryptionOid);

    return cmsEnvelope.GetEncoded();
} 
```

# reporting-services - 从 Reporting Services 表格的文本框/项目中获取参考

> ID：13917645
> 
> 赞同：1
> 
> 时间：2012-12-17T16:04:48.133
> 
> 标签：reporting-services

我正在尝试做一些我不知道是否可以在 Reporting Services 上创建收据的事情。

我已经有一个表格，它打破了组的每个实例之间的页面并总结了总数。就像是：

```
ID     -     Product  -     Invoice Number         -  Card Holder     -  Card Number  
01     -     Coffee   -     00121asdas-asd5458     -  James W L       -  xxxxx  xxxx xxx1235
02     -     Milk     -     154554bnvb-5sdfs57     -  James W L       -  xxxxx  xxxx xxx1235 
```

我会从该表中使用的同一查询中获取一些值/项目，并将它们显示在表头将垂直放置的表上方。例如：

```
 Card Holder: James W L 
   Card Number: xxxxx xxxx xxx1235
     Sale date: 2012-12-12
 Ticket number: 0000
----------------------------------------------
ID     -     Product  -     Invoice Number
01     -     Coffee   -     00121asdas-asd5458
02     -     Milk     -     154554bnvb-5sdfs57 
```

我如何从该表中获取这些引用来创建一个新表或表达式，并且能够与下一页中的主表重复？

请给我一个方向......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T16:27:46.050

您可以在组内创建静态行，并在组内显示`First`特定列的值。在这些行上，您必须进行一些创造性的单元格合并以获得您建议的布局。

假设您从表格布局开始：

```
+--------+------------+----------------------+----------------------+---------------+
| ID     |  Product   |     Invoice Number   | Card Holder          |  Card Number  |
+--------+------------+----------------------+----------------------+---------------+
| [id]   |  [Product] |     [InvoiceNr]      | [CardHolderName]     |  [CardNr]     |
+--------+------------+----------------------+----------------------+---------------+ 
```

您可以在组标题中创建一些静态行，并合并单元格：

```
+---------------------+-------------------------------------------------------------+
|  Card Holder:       | =First(Fields!CardHolder.Value, "CardHolderGroup")          |
+---------------------+-------------------------------------------------------------+
|  Card Number:       | =First(Fields!CardNr.Value, "CardHolderGroup")              |
+---------------------+-------------------------------------------------------------+
|  Sale date:         | =First(Fields!SaleDate.Value, "CardHolderGroup")            |
+---------------------+-------------------------------------------------------------+
|  Ticket number:     | =First(Fields!TicketNr.Value, "CardHolderGroup")            |
+---------------------+-------------------------------------------------------------+
| ID     |  Product   |     Invoice Number   | Card Holder          |  Card Number  |
+--------+------------+----------------------+----------------------+---------------+
| [id]   |  [Product] |     [InvoiceNr]      | [CardHolderName]     |  [CardNr]     |
+--------+------------+----------------------+----------------------+---------------+ 
```

我不确定我是否 100% 回答了你的问题，因为我不完全确定你对页面最后一点的意思。一旦你得到了你的表结构，我建议你查看 MSDN 页面上[重复行组标题的页面](http://msdn.microsoft.com/en-us/library/dd207045.aspx)。

# php - 显示数据库时创建 onclick 行

> ID：13917647
> 
> 赞同：0
> 
> 时间：2012-12-17T16:04:59.703
> 
> 标签：php, codeigniter

我有一个数据库，它显示存储在其中的所有员工的结果。

它可以工作并显示所有员工，但我想知道是否有可能让每一行都可以点击一个特定的 ID。

我以为我必须为每个函数创建一个循环遍历每一行并使其 onClick 的函数，但我仍然非常困惑。

```
 Controller

$this->load->model('Employee_model');
$results = $this->Employee_model->search($offset,$sort_by,$sort_order);
$data['employees'] = $results['rows'];
$data['num_results'] = $results['num_rows'];

$this->load->view('employees', $data);

    Model
function search($sort_by, $sort_order)
{

//result query
$q = $this->db->select('*')
    ->from('employees')
    ->order_by($sort_by,$sort_order)

      // if onclick row then display additional information

}

 view
<?php foreach($employees as $row): ?>
<tr> 
    <td><?php echo $row->first_name; ?></td>
    <td><?php echo $row->last_name; ?></td>
    <td><?php echo $row->gender; ?> </td>

    </tr>
    <?php endforeach; ?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T16:16:11.813

怎么样？
考虑到；

```
<?php foreach($employees as $row): ?>
<tr data-id="<?php echo $employee->id; ?>"> 
    <td><?php echo $employee->first_name; ?></td>
    <td><?php echo $employee->last_name; ?></td>
    <td><?php echo $employee->gender; ?> </td>
    </tr>
<?php endforeach; ?>

<script type="text/javascript">
$("tr").click(function() {
    window.location = 'your-controller/the-id-view-function/'+$(this).data('id');
}
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T16:11:43.133

onclick 事件由 HTML 页面中的 Javascript 处理。所以基本上你需要做的是：

在 php 脚本中检索数据库信息，如您所说，执行循环。将 HTML 代码存储到变量中或回显它，但请记住，您必须输出完整正确的 HTML 页面（带有`html`,`head`和`body`标签）。

您可以在从 PHP 返回的 HTML 上插入 onclick 事件，也可以从 Jquery 声明一个单击事件。第一个更简单，所以我将举一个使用这种方法的例子

```
while(something){ //loop through all DB results
    $table_tr.="<tr onclick='do_something_when_tr_click(".$id_from_db.")'><td>$data_from_db</td></tr>";

}

echo "<html><head><script>(javascript functions go here)</script></head><body><table>$table_tr</table></body></html>"; 
```

# iphone - 试图覆盖 AppDelegate 实现文件中的 UINavigationBar

> ID：13917650
> 
> 赞同：0
> 
> 时间：2012-12-17T16:05:07.027
> 
> 标签：iphone, objective-c, ios, uinavigationbar

我正在尝试覆盖 UINavigationBar 并添加自定义图像。我将此添加到我的 AppDelegate 文件中，然后也添加到了实现文件中。两者都不起作用，我不确定为什么。

任何帮助都会很棒:)

```
@implementation UINavigationBar (CustomImage)
- (void)drawRect:(CGRect)rect {
    UIImage *image = [UIImage imageNamed: @"redbar.png"];
    [image drawInRect:CGRectMake(0, 0, self.frame.size.width, self.frame.size.height)];
}
@end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T16:11:57.167

对于 iOS 5 及更高版本，请执行以下操作。

```
if ([[UINavigationBar class]respondsToSelector:@selector(appearance)]) {
    [[UINavigationBar appearance] setBackgroundImage:[UIImage imageNamed:@"redbar.png"] 
                                       forBarMetrics:UIBarMetricsDefault];
} 
```

# jquery - 选择多张随机生成的图片并发布图片ID

> ID：13917651
> 
> 赞同：1
> 
> 时间：2012-12-17T16:05:12.643
> 
> 标签：jquery, post

我有一个使用 jQuery 从外部站点生成多个图像的脚本。我正在尝试添加功能以选择多个图像并将它们提交到 php 脚本以存档 URL。

我当前的网站迭代能够毫无问题地突出显示所有图像。但是，我对如何在我的 php 脚本的帖子中使用所有突出显示的图像感到困惑。我将`id=`and添加`data-value=`到了 imgsrc 行，并且使用具有唯一`id`值的代码正确生成了 img src 行。

图像生成代码如下：

```
$('#images').append("<img id='" + id + "' src='http://example.com/" + id +
  "s.png' height='110' width='110' data-value='" + id + 
  "' onclick='clickpick(this)' />"); 
```

onclick 函数允许我使用以下代码突出显示单击的图像：

```
function clickpick(item) {
    if (item.style.borderWidth == '5px') {
        item.style.border = '';
    } else {
        item.style.border = '5px solid blue';
    }
} 
```

最终结果是我希望页面上有一个下拉框，它将选择一个组，并且任何突出显示的图像都将发布到该组选择所引用的 php 脚本。

任何帮助或提示将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T16:26:06.563

我建议你使用 jQuery 和 web 服务。

我为你做了一个例子，你可以在[http://jsfiddle.net/c685V/上找到它](http://jsfiddle.net/c685V/)

我所做的是将突出显示的图像推送到数组中。然后使用ajax，我调用我的webservice（webservices.php/mywebservice），它接受一个字符串作为参数。参数是 JSON 字符串，我使用 JSON.stringify 命令将数组解析为 JSON 字符串。

```
$.ajax({
    type: "POST",
    url: "webservices.php/mywebservice",
    data: "{'images':'" + JSON.stringify(arr) + "'}",
    contentType: "application/json; charset=utf-8",
    dataType: "json",
    success: function (msg) {
        if (msg.d === "OK") {
            //do something
        }
    },
    fail: function (msg) {
        document.location = "/errorPage.php";
    }
}); 
```

我不是 PHP 编码员，但您可以在 Google 上找到如何制作 webservie 并将 JSON 字符串反序列化回数组的示例。

# facebook - 为什么 Facebook 发送按钮弹出窗口会关闭？

> ID：13917652
> 
> 赞同：0
> 
> 时间：2012-12-17T16:05:15.623
> 
> 标签：facebook, web-scraping, send

我们正在考虑允许用户通过几个不同的社交媒体网络共享链接。Tweet、Pin it 和 LinkedIn 分享按钮都可以正常工作，但我们遇到的问题围绕着 Facebook 发送按钮。

该按钮似乎可以正常加载，但单击它时会显示一条消息“无法访问 www.website.com/page1.jsp?order_nbr=123456 上的页面”。

在使用对象调试器@Facebook 开发者站点时，会发生一些有趣的事情：尝试调试 `www.website.com/page1.jsp?order_nbr=123456`抓取的响应代码时出现 502 错误（URL 返回了错误的 HTTP 响应代码）。尝试调试`www.website.com/page1.jsp`我们得到 200（正常响应）。尝试调试`m.website.com/page1.jsp`或`m.website.com/page1.jsp?order_nbr=123456`，两者都返回相同的 502 错误。

当 . 之后的 URL 中有参数时，似乎存在问题`?`，但是我们想知道是否需要设置其他内容，或者这可能是服务器配置问题。

如果有关于 facebook 如何抓取页面的技术解释，或者为什么他们的发送按钮可能会收到 502 错误，而上面提到的其他按钮运行正常？任何见解将不胜感激。

这是我们为了在移动网站上进行测试而精简的基本代码：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:fb="http://ogp.me/ns/fb#">

<head>
  <title>Testing - Order #123456</title>
  <link rel="shortcut icon" href="/favicon.ico" />
  <link rel="icon" href="/favicon.ico" />
  <link rel="apple-touch-icon" href="/icon.png" />
  <meta http-equiv="Content-Style-Type" content="text/css" />
  <meta name="viewport" content="width=device-width, user-scalable=yes" />
  <meta name="format-detection" content="telephone=no" />
  <link href="/css/test.css" rel="stylesheet" type="text/css" />
  <meta property="og:title" content="Test - Order #123456" />
  <meta property="og:type" content="website" />
  <meta property="og:url" content="http://m.website.com/page1.jsp?order_nbr=123456"/>
  <meta property="og:image" content="../../images/mobile_files/logo.png" />

 <!--asynchronous loader-->
 <script src="../../js/init.js" type="text/javascript"> </script>

</head>

<body>
      <DIV id="fb-root"></DIV>

  <DIV id="menu">
       <DIV style="float: left; padding:2px; "><fb:send ref="top_left_m" ></fb:send></DIV>  
       <DIV style="float: left; padding:2px;"><a href="https://twitter.com/share" class="twitter-share-button" data-count="none">Tweet</a> </DIV>
       <DIV style="float: left; padding:2px;"> <a data-pin-config="none" data-pin-do="buttonPin" href="//pinterest.com/pin/create/button/?url=http%3A%2F%2Fm.website.com%2Fjsp%2Forder.jsp%3Fjob_order_id%3D%3C%25%3DjobOrderId%25%3E&media=http%3A%2F%2Fm.website.com%2Fimages%2Fmobile_files%2Flogo.png&description=Testing..."><img src="//assets.pinterest.com/images/pidgets/pin_it_button.png" /></a> </DIV>
       <DIV style="float: left; padding:2px;"><script type="IN/Share"></script> </DIV>

       <DIV style="clear:both;"></DIV>
</DIV>  

</body>
</html> 
```

更新：调试器的输出与前几天不同，我相信由于重新部署和/或缓存（服务器和/或本地）先前的测试，但是仍然存在两个主要问题。
.#1 - 主站点正在抓取（返回代码 200）。移动站点返回 502 并且不返回任何内容。
.#2 - 如果我没有登录 Facebook，会出现一个弹出窗口，要求我登录。一旦我登录，窗口就会完全消失。如果我登录 Facebook，会短暂出现一个弹出窗口，然后完全消失。
.#3 - URL 中的参数已被排除为问题。

基于最大问题（#2）的性质......我将把我的问题改为......“为什么 Facebook 发送按钮弹出窗口关闭？”
（如果更合适的话，我会将#1 拆分为一个单独的问题，但我认为最好将所有问题都放在一个问题中来解决我的所有问题）

以防万一，这里是 JS 异步加载器：

```
(function(doc, script) {
     var js, 
     fjs = doc.getElementsByTagName(script)[0],
     add = function(url, id) {
     if (doc.getElementById(id)) {return;}
          js = doc.createElement(script);
          js.src = url;
          id && (js.id = id);
          fjs.parentNode.insertBefore(js, fjs);
     };
   // Facebook SDK
   add('//connect.facebook.net/en_US/all.js#xfbml=1', 'facebook-jssdk');
   // Pinterest
   add('http://assets.pinterest.com/js/pinit.js');
   // Twitter SDK 
   add('//platform.twitter.com/widgets.js', 'twitter-wjs');
   // LinkedIN
   add('//platform.linkedin.com/in.js');
}(document, 'script')); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T06:34:57.750

问题是 Facebook 在请求中发送了一个范围请求。如果在范围 (0-52K) 内则失败，但是大于此范围的页面会刮得很好。似乎旧版本的 Oracle 在处理范围方面存在问题，因此您需要将 Facebook 的范围请求从请求标头中剥离出来。

# django - 在 Django 中自动生成每日、每周和每月报告

> ID：13917653
> 
> 赞同：0
> 
> 时间：2012-12-17T16:05:15.513
> 
> 标签：django, scheduled-tasks

我想生成定期报告并将它们发送给用户。

用户应该能够选择发送频率和日期/时间（例如每天 9 点、每周一等），以及与报告内容本身相关的其他信息。

您认为将其集成到 Django 中的一个好的解决方案是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T16:43:42.483

如果您使用的是 unix 系统，我建议您使用 cron（unix 作业调度程序）来执行此操作。

您可以使用[django-cron](http://code.google.com/p/django-cron/)，这是一个包装 cron 作业调度的 Django 模块，但我通常将要调度的任务编写为[django 自定义管理命令](https://docs.djangoproject.com/en/dev/howto/custom-management-commands/)，并安排一个常规的 cron 作业调用它。

如果您在虚拟 python 环境中安装了 django，则应该运行一个脚本来激活 vitualenv，然后调用该命令（参见下面的示例）。

* * *

在 Unix 系统上，使用 virtualenv：

脚本示例（script.sh）：

```
#!/bin/bash
source /path/to/virtualenv/bin/activate
python /path/to/django/project/manage.py custom_command 
```

在 cron 中添加行（命令：）`crontab -e`：

```
* * * * * /path/to/script.sh >> /path/to/log/file.log 2>&1 
```

将 *s 替换为所需的时间和频率（默认 crontab 文件中的详细信息）

要安装新的计划任务，只需保存 crontab 文件

# android - 带有 ActionBar 布局的 MapView (API lvl 11)

> ID：13917656
> 
> 赞同：1
> 
> 时间：2012-12-17T16:05:39.143
> 
> 标签：android, google-maps, android-layout

经过一些工作，我能够在片段中实例化 MapView，我正在使用“标题条纹 + 滑动”布局，我的目标是让一个片段带有列表视图，第二个片段带有地图。

我已经阅读了所有教程以使新的 google map api 工作，得到了密钥并且一切都应该解决，但是在执行时我得到了那个错误： **没有找到类“com.google.android.gms.maps .MapFragment”在路径：/system/framework/come.google.android.jar:/data/app/my_package**

代码是 SDK 生成的代码（eclipse 生成的代码，选择标题条 + 滑动布局）加上 onCreateView() 方法中的代码：

```
View mFragmentView = inflater.inflate(R.layout.map, null);
MapView map = (MapView)mFragmentView.findViewById(R.id.map);
return map; 
```

从 xml 方面，我有一个 map.xml 布局，里面只有那个：

```
 <fragment xmlns:android="http://schemas.android.com/apk/res/android"
  android:id="@+id/map"
  android:layout_width="match_parent"
  android:layout_height="match_parent"
  class="com.google.android.gms.maps.MapFragment"/> 
```

在此先感谢您的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T16:16:21.643

有几件事可能是错误的。

您可能忘记在构建路径中包含正确的 jar，或者没有正确引用库项目，或者缺少 google play 服务。

我会查看这个线程以获得可能的解决方案。

[无法实例化 android.gms.maps.MapFragment](https://stackoverflow.com/questions/13719263/unable-instantiate-android-gms-maps-mapfragment)

# shopify - Shopify 在重定向到我的应用程序时首先获取资源类型

> ID：13917663
> 
> 赞同：0
> 
> 时间：2012-12-17T16:05:53.283
> 
> 标签：shopify

我的应用程序已完成，并且适用于**Products**。

就像我在“产品”选项卡中有一个“应用程序链接”一样。点击后，我得到了该产品的**商店**名称和**ID**。然后我可以成功调用 API，因为

获取 /admin/products/#{id}/XXXX.json

默认情况下，我在路径解析中使用了“产品”。

现在的问题是，**一开始**我只得到了带有查询参数的**ID**，但不知道它属于哪个resource_type？即页面，主题等。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T17:24:33.857

这个问题的答案是应用程序链接中的“您可以将参数附加到查询字符串”。

# php - Laravel 授权 404

> ID：13917665
> 
> 赞同：0
> 
> 时间：2012-12-17T16:05:58.177
> 
> 标签：php, apache, debugging, http-status-code-404, laravel

已经使用 laravel （当前稳定版本） 2 天了，在阅读了文档之后......玩了一下模板系统和其他一些东西。

现在，在安装了[授权](http://vespakoen.github.com/authority-laravel/)包和[Laravel-Administrator](https://github.com/FrozenNode/Laravel-Administrator)之后，我遇到的问题是，当我尝试打开`http://local.laravel/admin`它时，它会将我重定向到`http://local.laravel/user/login`404 魔法发生的时候。

我的日志很好，我真的不知道还能去哪里或做什么，尝试调试这个......有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T16:11:20.053

我是权威包的创建者，我只能告诉你它不做任何重定向，所以你必须查看管理包。

祝你好运！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T22:03:58.980

嘿，我写了管理员包。查看文档的这一部分：

[https://github.com/FrozenNode/Laravel-Administrator#installation--documentation](https://github.com/FrozenNode/Laravel-Administrator#installation--documentation)

请注意，配置中有几个选项：auth_check、login_path 和 login_redirect_key。这里似乎发生的是您的 auth_check 正在运行，它失败了，然后将您重定向到默认的 login_path，您的系统上可能没有该路径。我猜你还没有设置这些配置选项，但它们几乎是必需的！我这样设置是因为我想让开发人员使用他们自己的身份验证系统作为管理面板。

更新：查看有关权限、login_path 和 login_redirect_key[的配置文档部分。](http://administrator.frozennode.com/docs/configuration#permission)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-18T10:58:21.220

对于任何从 Laravel 开始并步入这个问题的人，我必须以订单形式设置登录表单，在提到的 Bundle 的安装教程中没有提到它。

1.  我改成`user/login`_`login``config/administrator.php -> login_path`
2.  添加了路由器来处理登录和注销

本文中的更多详细信息[http://codehappy.daylerees.com/authentication](http://codehappy.daylerees.com/authentication)

# php - 难以传递 GET 变量？

> ID：13917667
> 
> 赞同：1
> 
> 时间：2012-12-17T16:06:05.887
> 
> 标签：php, html, sql, get

您好我正在尝试通过将变量名称附加到如下 URL 来显示数据库中的特定条目：

```
echo '<td><a class="index_table" href="includes/view.php?id=$row[id]>$row[Orderno]"> 
```

然后在我的 view.php 中我有：

```
<?php
include 'connect.php';
//Display the Data//
$id=$_GET['id']; 
$result=mysql_query("select * from Products where ID=$id");
$row=mysql_fetch_object($result);
echo "<table>";
echo "
<tr bgcolor='#f1f1f1'><td><b>ID</b></td><td>$row->ID</td></tr> 
```

但是，特定的 ID 没有传递给脚本，并且 view.php 中的表是空白的。将 where 子句更改为 'where id = '1' 时，会显示正确的产品。所以我知道这是有效的。

非常感谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-17T16:09:13.853

基本 PHP 语法：带引号的字符串`'`不插入变量值：

```
echo '<td><a class="index_table" href="includes/view.php?id=' . $row['id'] . '>' . $row['Orderno'] . '">';
                                                            ^^^^^^^^^^^^^^^^^^ 
```

请注意，您对[SQL 注入攻击](http://bobby-tables.com)持开放态度，只是乞求获得您的服务器 pwn3d。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-17T16:11:59.130

**第一个问题：**

您必须将数组字符串索引放入括号中：

```
echo '<td><a class="index_table" href="includes/view.php?id='.$row['id'].'">'.$row['Orderno'].'</a></td>';
                                                            ^^^^^^^^^^^^^^  ^^^^^^^^^^^^^^^^^^^ 
```

**第二个问题：**

您在 URL 中的 ID 很容易被替换，`'; DELETE FROM table #`从而允许攻击者执行 SQL 注入！始终清理参与 SQL 查询的任何用户输入 (POST) 或 GET 参数：

```
$id = mysql_real_escape_string($_GET['id']); 
```

或者对于那种情况（当需要一个整数时）

```
$id = (int) $_GET['id']; 
```

**建议：**不要使用`mysql_*`函数，而是使用`PDO`with（真实！）prepared statements 或至少`mysqli_*`使用适当输入清理的函数。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-17T16:14:11.140

这里有两个大问题。首先，您的链接无法正常工作，因为您在回声中使用了单引号，这意味着变量没有被插值，因此您必须更改为以下任一内容：

```
echo "<td><a class=\"index_table\" href=\"includes/view.php?id={$row['id']}>{$row['Orderno']}\">"; 
```

或者

```
echo '<td><a class="index_table" href="includes/view.php?id=' . $row['id'] . '>' . $row['Orderno'] . '">'; 
```

## 警告 - 安全漏洞

在您以后的代码中，您让自己容易受到 SQL 注入攻击；可以在[OWASP](https://www.owasp.org/index.php/SQL_Injection)和[Wikipedia](http://en.wikipedia.org/wiki/Sql_injection)上找到有关此内容的一些参考资料，了解这些资料非常重要。为了保护自己，您必须在将数据发送到查询之前对其进行转义。以下是一些方法：

```
$id = mysql_real_escape_string($_GET['id']); 
$result=mysql_query("select * from Products where ID = '$id'"); 
```

或者

```
$id = $_GET['id']; 
if (!ctype_digit((string)$id)) {
    die('Invalid ID: ' . htmlentities($id));
}
$result=mysql_query("select * from Products where ID = '$id'"); 
```

在第一个示例中，我使用[`mysql_real_escape_string`](http://us2.php.net/manual/en/function.mysql-real-escape-string.php)使数据可以安全地嵌入到查询中（请注意，我还在变量周围添加了引号）；第二，我做了一个数据检查以确保它只包含数字（注意长度也应该检查，但这是一个简单的例子），如果它包含数字以外的东西，我们会吐出一条错误消息并不要运行查询。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-17T16:09:13.973

更改您的查询，例如，我`'`在 $id 之间添加了两个

```
$result=mysql_query("select * from Products where ID='$id'"); 
```

看看。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-17T16:11:30.210

它看起来像标签中的格式错误的 URL，而且 PHP 不解析单引号字符串中的变量。我想你只需要这个：

```
echo "<td><a class='index_table' href='includes/view.php?id=$row[id]'>$row[Orderno]</a></td>"; 
```

您不需要更改 view.php 中的代码，但我建议以这种方式过滤 _GET 变量：

```
$id = (int)$_GET['id']; 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-17T16:09:50.597

您实际上并未在查询中包含 $id 变量的值。查看此答案以获取有关如何执行此操作的选项：

[如何防止 PHP 中的 SQL 注入？](https://stackoverflow.com/questions/60174/how-to-prevent-sql-injection)

PDO

```
$stmt = $pdo->prepare('SELECT * FROM employees WHERE name = :name');

$stmt->execute(array(':name' => $name));

foreach ($stmt as $row) {
    // do something with $row
} 
```

mysqli

```
$stmt = $dbConnection->prepare('SELECT * FROM employees WHERE name = ?');
$stmt->bind_param('s', $name);

$stmt->execute();

$result = $stmt->get_result();
while ($row = $result->fetch_assoc()) {
    // do something with $row
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-12-17T16:10:34.783

您不应该`GET`像这样将变量直接放入查询中，您应该进行一些健全性检查，例如检查它的数字等，以避免 sql 注入。

毫无疑问，您会得到回答说这些`mysql_`功能也已被弃用，但我认为这与问题无关。

在您的链接中，您有

```
<td><a class="index_table" href="includes/view.php?id=$row[id]>$row[Orderno]"> 
```

您没有正确的数组元素语法，请尝试

```
<td><a class="index_table" href="includes/view.php?id=' . $row['id'] . '>' . $row['Orderno'] . '"> 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-12-17T16:27:52.197

尝试

```
echo "<td><a class='index_table' href='includes/view.php?id=".$row['id'].">".$row['Orderno']."'>"; 
```

和

```
<?php
include 'connect.php';
//Display the Data//
$id=$_GET['id']; 
if(is_int($id))
{
    $result=mysql_query("select * from Products where ID=$id");
    $row=mysql_fetch_object($result);
    echo "<table>";
    echo "<tr bgcolor='#f1f1f1'><td><b>ID</b></td><td>$row->ID</td></tr>";
}
else
{
    echo "<h1>Nice try silly... You aint hackin me!</h1>";
} 
```

我还注意到在您的原始代码中您缺少一些结尾引号和分号。那可能就是所有的错误。但这应该可以解决您的安全问题，并且应该适用于您的应用程序

祝你好运。

# file - 复制 10 GB 文件时的 WebSphere HTTP 500

> ID：13917669
> 
> 赞同：0
> 
> 时间：2012-12-17T16:06:33.510
> 
> 标签：file, copy, websphere

配置：我们有 iPlanet Web 服务器，它位于 Linux 机器中部署的 WebSphere Portal 6.1 集群 (2) 之前。

当用户尝试跨文件系统（NFS 挂载）复制 10 GB 文件时，我们使用 java 运行时将文件复制到不同的 NFS 挂载，希望它比使用任何其他 java 库更快。

```
proc = rt.exec("cp " + fileName + " " + outFileName); 
```

部署的应用程序是一个 JSF portlet 应用程序。
a) 应用服务器和应用程序上的会话超时为 60 分钟
b) 我们从客户端页面进行 Ajax 调用以保持会话处于活动状态

用户在 3 分钟内收到 HTTP 500，而我们的日志显示该文件仍在复制。不确定 WebSphere 为什么发送 HTTP 500？

10分钟后，文件被复制，当他点击刷新时，他可以继续。

不确定是什么导致了这个 HTTP 500。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T16:45:44.433

WebContainer 线程不应该用于长任务。他在 3 分钟后得到 500，因为那是 WebSphere 决定线程挂起的时间。

您应该做的是使用 a`WorkManager`来执行那个长任务，并且客户端可以轮询以检查任务的状态。

如果您考虑在不久的将来升级到 WAS v8/v8.5，一个好主意就是使用`Asynchronous Servlets`它

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T17:16:26.800

您的客户端在几分钟后收到 HTTP 500 错误的原因可能有几个原因。如果没有堆栈跟踪和一些相关的日志记录，就不可能知道 WebSphere 中的哪个组件在 3 分钟后“唤醒”并停止了一切。它可能是WebSphere 对Web Container 线程池的超时设置，也可能是其他一些超时——应该很容易从日志中得出结论。

要解决此问题，您可以执行以下操作之一：

*   调整相关的超时值（再次取决于确切的超时值）*。*
*   更改您的设计，以便在后台执行长时间运行的任务。您可以为此使用 WebSphere 的[Work Manager](http://pic.dhe.ibm.com/infocenter/wasinfo/v7r0/topic/com.ibm.websphere.nd.multiplatform.doc/info/ae/asyncbns/concepts/casb_workmgr.html) API，或异步 bean/servlet。

# excel - 通过单独的列查找对一系列行求和

> ID：13917671
> 
> 赞同：0
> 
> 时间：2012-12-17T16:06:40.850
> 
> 标签：excel, excel-formula, google-sheets

我有一个电子表格。它在 A 列中有一个时间戳，在 C 列中有一个美元值。

我有另一个提供整个工作表的计算值的工作表，但我也试图为用户提供一种输入日期作为开始日期截止日期的方法。“给我自 2012 年 10 月 1 日以来的条目数”和“给我自 2012 年 10 月 1 日以来所有美元价值的总和”。

计数很容易，使用 COUNTIF，但是，我正在努力想出基于截止日期的公式来给出美元总和。由于日期在 A 列中，而美元在 C 列中。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T16:20:22.650

试试 SUMIF

`=SUMIF(A:A,">="&D2,C:C)`

截止日期在 D2

# ios - UITableViewController 滚动在容器视图控制器中不起作用

> ID：13917674
> 
> 赞同：6
> 
> 时间：2012-12-17T16:06:46.323
> 
> 标签：ios, scroll, uitableview, containers

我实现了简单的 UITableViewController 并检查了它的滚动效果，如果我让它成为 UINavigationController 的根视图。

当我将表视图控制器添加到容器视图控制器时，会出现问题，如下所示：

```
[self addChildViewController:myTableViewController];
[self.view addSubview:myTableViewController.tableView];
[myTableViewController didMoveToParentViewController:self]; 
```

除滚动问题外，此代码运行良好。

当我尝试滚动它时，它会被轻微拖动并返回到第一个位置。当我拖动表格视图时，我什至可以看到屏幕下方的表格单元格，但在我离开手指后它会恢复到原始状态。

有没有人将 UITableViewController 添加到容器中？

**更新**经过一番挖掘，我发现它不起作用，因为表格视图有足够长的高度。现在我可以像这样设置表格视图的框架大小后进行滚动；

```
[self addChildViewController:myTableViewController];
[myTableViewController.tableView setFrame:CGRectMake(0.0f, 44.0f, 320.0f, 100.0f)];
[self.view addSubview:myTableViewController.tableView];
[myTableViewController didMoveToParentViewController:self]; 
```

虽然还有一个问题是表格视图的自动调整高度不合适，但最好让它成为另一个问题。

# jquery - 使用嵌套对象填充主干模型

> ID：13917680
> 
> 赞同：0
> 
> 时间：2012-12-17T16:07:19.023
> 
> 标签：jquery, backbone.js

我有一个名为 User 的模型，当我进行 Fetch 时，理想情况下希望收到一个如下所示的 JSON 对象：

```
{"UserId":"20","FirstName":"Test","SurName":"User"} 
```

但是返回的对象，我需要使用，看起来像这样：

```
{
    "Type": "Single",
    "Error: "",
    "Objects": {
        "UserId":"20",
        "FirstName":"Test",
        "SurName":"User"
    }
} 
```

这可能适用于我的应用程序中的所有模型。

告诉模型从`Objects`对象而不是根对象填充自己的最佳方法是什么？

如果我的问题不够清楚，请道歉：我是 Backbone 处女，这对我来说是全新的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T16:10:02.730

您需要覆盖`parse`模型的方法。

```
var FooModel = Backbone.Model.extend({
    parse: function(response) {
        //response is the raw JSON object. Whatever this method returns is used to populate the model.
        return response.Objects;
    }
}); 
```

请参阅[Model.parse 的 Backbone 文档](http://backbonejs.org/#Model-parse)。

# wpf - 文本框中的wpf字体背景

> ID：13917681
> 
> 赞同：1
> 
> 时间：2012-12-17T16:07:20.083
> 
> 标签：wpf, fonts, background, textbox

是否可以在 wpf 文本框中有字体背景？我不想更改文本框背景。当用户输入文本时，字体背景应该对用户有帮助，例如查看空格字符。问题：如果文本框仅包含空格字符，您将看不到它。只有当光标聚焦时，它才会被光标注意到。如何在 wpf 文本框中设置 FONT 背景（而不是 TextBox 背景）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T13:14:07.367

我通过创建一个 2 色文本框背景画笔解决了这个问题。第一种颜色（字体背景）的像素宽度取决于文本像素宽度。第二种颜色（白色）填充文本框背景的其余部分。画笔是在 textchanged 事件处理程序中创建的。工作正常！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T16:38:05.087

字体不是 WPF 中的可视对象，因此在任何与字体相关的属性上都没有属性可以执行您想要执行的操作。相反，您应该将文本包装在 Border 对象中，并将其放置在容器中，该容器会自动将其调整为最小尺寸：

```
<Grid>
    <Grid.ColumnDefinitions>
        <ColumnDefinition Width="Auto"/>
        <ColumnDefinition Width="*"/>
    </Grid.ColumnDefinitions>
    <Grid.RowDefinitions>
        <RowDefinition Height="Auto"/>
        <RowDefinition Height="*"/>
    </Grid.RowDefinitions>
    <Border Background="Orange" Width="Auto" Grid.Column="0" Grid.Row="0">
        <TextBox>Text Goes Here</TextBox>
    </Border>
</Grid> 
```

# jqtree - Jqtree从没有url的服务器调用数据

> ID：13917694
> 
> 赞同：1
> 
> 时间：2012-12-17T16:08:20.513
> 
> 标签：jqtree

我从 jqtree 开始，我需要从服务器加载数据，没有 url（我已经看到从 url 加载 ajax 数据的示例，这不是我需要的），但我在任何地方都没有找到任何相关信息。有人知道如何设置 jqtree 树视图，从服务器调用数据吗？另外，我应该如何返回 json 节点列表？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T19:11:41.270

服务器请求需要一个 URL。这就是 HTTP 的工作原理。

您可以尝试的另一种方法是将数据直接放入初始化 jqtree 的页面中。可以直接给data属性一个JS对象。

# php - Zend MVC：从控制器到模型的一次调用还是对不同结果的多次调用？

> ID：13917695
> 
> 赞同：0
> 
> 时间：2012-12-17T16:08:21.100
> 
> 标签：php, zend-framework, zend-framework-mvc

我需要来自模型的不同结果，但我不明白它是否正确进行一次调用并留下对所有工作进行建模或进行更多调用并收集结果以在表未加入时传递给视图或当我需要从表中获取一行，并从其他行中获取不同的行。

第一个示例（更多呼叫，收集并发送以查看）：

控制器

```
// call functions of model
$modelName = new Application_Model_DbTable_ModelName();
$rs1 = $modelName->getTest($var);
$rs2 = $modelName->getTest2($var2);

// collect data
$pippo = $rs1->pippo;
if ($rs2->pluto == 'test') {
    $pluto = 'ok';
} else {
    $pluto = 'ko';
}

// send to view
$this->view->pippo = $pippo;
$this->view->pluto = $pluto; 
```

模型

```
public function getTest($var) {
...
select from db...
return $result;
...
}

public function getTest2($var) {
...
select from db...
return $result;
...
} 
```

第二个例子（一次调用，模型收集所有数据，返回控制器并发送到视图）：

控制器

```
// call one function of model
$modelName = new Application_Model_DbTable_ModelName();
$rs = $modelName->getTest($var); 
```

模型

```
public function getTest($var) {
...
select from db...

if ($result > 0) {
    call other function
    call other function
    collect data
    return $result;
    ...
} 
```

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T16:16:32.717

There's no one correct answer to this question, but in general, you should endeavor to keep your business logic in one place. Think of it as, "thin controller, thick model." I.e., keep the controllers as small and simple as possible and put all the business logic in the models.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-22T14:20:33.597

这里似乎有几个问题：

> 但是，如果我不需要与 db 交互并且我只需要一个简单的函数，最好将该函数放入模型中？例如：控制器：

```
public function printAction() {
    $data = $this->getRequest()->getPost(); 
    $label = "blablabla"; 
    $this->view->label = $label;       
} 
```

首先，在 Zend Framework 的上下文中，这个特定示例没有多大意义。控制器的重点是填充视图模板。不过，我确实明白这一点。我会向您指出[Action Helpers](http://framework.zend.com/manual/1.12/en/zend.controller.actionhelpers.html)和[View helpers](http://framework.zend.com/manual/1.12/en/zend.view.helpers.html)作为解决您问题的一种方式。对于那些似乎不适合其他任何地方的代码，您始终可以将实用程序类添加到您的库中。

[*Action Helpers*](http://framework.zend.com/manual/1.12/en/zend.controller.actionhelpers.html)通常用于封装可能重复或可重用的控制器代码。它们可以根据需要简单或复杂，这是一个简单的示例：

```
class Controller_Action_Helper_Login extends Zend_Controller_Action_Helper_Abstract
{
    /**
     * @return \Application_Form_Login
     */
    public function direct()
    {
        $form = new Application_Form_Login();
        $form->setAction('/index/login');

        return $form;
    }
}

//add the helper path to the stack in the application.ini
resources.frontController.actionhelperpaths.Controller_Action_Helper = APPLICATION_PATH "/../library/Controller/Action/Helper"

//the helper is called in the controller
$this->_helper->login(); 
```

[视图助手](http://framework.zend.com/manual/1.12/en/zend.view.helpers.html)对视图模板做同样的事情：

```
class Zend_View_Helper_PadId extends Zend_View_Helper_Abstract
{
    /**
     * add leading zeros to value
     * @param type $id
     * @return string
     */
    public function padId($id)
    {
        return str_pad($id, 5, 0, STR_PAD_LEFT);
    }
}

//in this example the helper path is added to the stack from the boostrap.php
 protected function _initView()
    {
        //Initialize view
        $view = new Zend_View();
        //add custom view helper path
        $view->addHelperPath('/../library/View/Helper');
        //truncated for brevity
        $viewRenderer = Zend_Controller_Action_HelperBroker::getStaticHelper(
                'ViewRenderer');
        $viewRenderer->setView($view);
        //Return it, so that it can be stored by the bootstrap
        return $view;
    }
//and to use the helper in the view template
//any.phtml
<?php echo $this->padId($this->id) ?> 
```

> 我需要来自模型的不同结果，但我不明白它是否正确进行一次调用并留下对所有工作进行建模或进行更多调用并收集结果以在表未加入时传递给视图或当我需要从表中获取一行，并从其他行中获取不同的行。

这个问题更多的是关于结构而不是关于正确性。

如果需要，您可以在 Action 和 View 助手中与您的数据库表模型进行交互以进行简单/重复查询，但是大多数开发人员可能不赞成这种方法，因为这种方法难以维护或丑陋。

许多人似乎更喜欢[Doctrine](http://www.doctrine-project.org/)或[Propel](http://propelorm.org/)来帮助他们管理他们的数据库需求。

在这一点上，我喜欢推出我自己的，目前更喜欢领域模型和数据映射器，并不是所有的模式，但似乎适合你的问题。

这不是第一次实施的简单建议，但是我发现两篇文章有助于入门：

[http://phpmaster.com/building-a-domain-model/](http://phpmaster.com/building-a-domain-model/)

[http://phpmaster.com/integrating-the-data-mappers/](http://phpmaster.com/integrating-the-data-mappers/)

如果您真的想进入它，请尝试：

[http://survivethedeepend.com/](http://survivethedeepend.com/)

我希望这至少能回答你的部分问题。

# facebook - Facebook 发送对话框在发送 Facebook 网址时出现 100 错误

> ID：13917696
> 
> 赞同：0
> 
> 时间：2012-12-17T16:08:26.260
> 
> 标签：facebook, facebook-graph-api

我正在使用 Facebook 发送对话框发送 Facebook 帖子的链接。但我从 Facebook API 得到以下错误：

> ```
> API Error Code: 100
> API Error Description: Invalid parameter
> Error Message: 'link' is invalid. 
> ```

这是 JavaScript：

```
 <script src="http://connect.facebook.net/en_US/all.js"></script>
  <script>
    // assume we are already logged in
    FB.init({appId: '569858063028330'});

    FB.ui({
      method: 'send',
      link: 'https://www.facebook.com/benjerryuk/posts/10151500944440101'
    });
  </script> 
```

你可以在这里运行它：http: [//jsbin.com/welcome/62834/edit](http://jsbin.com/welcome/62834/edit)

Facebook 发送对话文档：[https ://developers.facebook.com/docs/reference/dialogs/send/](https://developers.facebook.com/docs/reference/dialogs/send/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-30T10:47:55.620

我找不到它是专门写的，但从我的尝试来看，facebook 似乎出于某种原因不接受指向自身的链接 - 我无法确认这一点，但即使我放了公共帖子或个人资料的链接，我也得到了相同的结果.

您可能有指向您的应用的链接，该链接将重定向到正确的 Facebook 帖子。

另一个注意事项：在显示此对话框时，facebook 会使用 AJAX 加载给定的链接，这意味着 A）它必须是活动 URL，并且 B）您不能使用 localhost。

希望有帮助。

# asp.net - 爬取期间与交易相关的各种 NHibernate 错误

> ID：13917698
> 
> 赞同：5
> 
> 时间：2012-12-17T16:08:29.780
> 
> 标签：asp.net, asp.net-mvc, sql-server-2008, nhibernate, ninject

我们有一个使用 NInject 3 和（Fluent）NHibernate 3.2 的 ASP.Net 4 / MVC 3 混合 Web 应用程序。数据库是 SQL Server 2008 R2。服务器是 6 核 28 GB Windows 2008 64 位服务器。

我们的客户最近开始使用爬虫工具测试该网站。一旦站点遇到蜘蛛产生的负载，我们的日志就会开始充满异常。

我们看到来自 NHibernate 的各种错误，包括以下一些：

*   NHibernate.TransactionException：提交失败并出现 SQL 异常 ---> System.Data.SqlClient.SqlException：无法执行事务操作，因为有待处理的请求正在处理此事务。

*   System.Data.SqlClient.SqlException (0x80131904)：服务器无法恢复事务。描述：410000050f。此会话中活动的事务已被另一个会话提交或中止。

*   System.NullReferenceException：对象引用未设置为对象的实例。在 System.Data.SqlClient.SqlInternalTransaction.GetServerTransactionLevel()....

*   NHibernate.Exceptions.GenericADOException：无法执行本机批量操作查询：exec [Stats.InsertListingStatsList] @ListingStats =:ListingStats[SQL: exec [Stats.InsertListingStatsList] @ListingStats =@p0] ---> System.Data.SqlClient。 SqlException：不允许启动新请求，因为它应该带有有效的事务描述符。

仅举四个例子。它们都具有相似的风格——它们似乎都与作为 NHibernate 基础的 ADO.Net 对事务的管理有关。

现在，我们的 NH 实现的一些细节：

*   SessionFactory 是静态的；
*   SessionFactory 使用 AdoNetTransactionFactory；
*   ISession 在请求范围内，存储在 HttpContext.Items 集合中；
*   存储库也在请求范围内；
*   我们现在使用 config.CurrentSessionContext();
*   对我们的通用存储库的每次调用都使用一个事务

这是我们存储库中的两种方法。

```
public T GetById<T>(int id)
{
    using (var t = Session.BeginTransaction())
    {
        var entity = Session.Get<T>(id);
        t.Commit();
        return entity;
    }
}

public void Add<T>(T entity)
{
    using (var t = Session.BeginTransaction())
    {
        Session.Save(entity);
        t.Commit();
    }
} 
```

我的问题很简单：出了什么问题？是什么导致了事务之间或我们的域在对我们的域进行脱水/水化时发起的各种与数据相关的操作之间的这些明显的冲突？

更新：这是我们的完整配置：

```
public FluentConfiguration BuildConfiguration(string connectionString)
{
    var sqlConfig = MsSqlConfiguration.MsSql2008.ConnectionString(connectionString).AdoNetBatchSize(30);

     var config = Fluently.Configure().Database(sqlConfig);

     var entityMapping = AutoMap.AssemblyOf<User>(new AutomappingConfiguration())
            .UseOverridesFromAssemblyOf<UserMappingOverride>()
            .AddMappingsFromAssemblyOf<TableNamingConvention>()
            .Conventions.AddFromAssemblyOf<TableNamingConvention>();

        var cqrsMapping = AutoMap.AssemblyOf<AdvertView>(new QueryAutomappingConfiguration())
            .UseOverridesFromAssemblyOf<AdvertViewMappingOverride>();

        config.Mappings(c => c.AutoMappings.Add(entityMapping));
        config.Mappings(c => c.AutoMappings.Add(cqrsMapping));

        config.Mappings(c => c.HbmMappings.AddFromAssemblyOf<AdvertView>());

        config.ExposeConfiguration(c => c.SetProperty(Environment.TransactionStrategy, typeof(AdoNetTransactionFactory).FullName));

        config.CurrentSessionContext<WebSessionContext>();

        return config;
    } 
```

更多代码给你们。这是我们的 IoC 容器配置的相关部分。

```
var domainEntityBootstrapper = new DomainEntitySessionBootStrapper("Domain", "NHibernate.ISession.Domain", _enableLucine, HttpContextItemsProvider);
Bind<ISessionFactory>().ToMethod(domainEntityBootstrapper.CreateSessionFactory).InSingletonScope().Named(domainEntityBootstrapper.Name);
Bind<ISession>().ToMethod(domainEntityBootstrapper.GetSession).InRequestScope();

var queryBootstrapper = new QueryEntitySessionBootStrapper("Query", "NHibernate.ISession.Query", HttpContextItemsProvider);
Bind<ISessionFactory>().ToMethod(queryBootstrapper.CreateSessionFactory).InSingletonScope().Named(queryBootstrapper.Name);
Bind<ISession>().ToMethod(queryBootstrapper.GetSession).WhenInjectedInto(typeof (QueryExecutor)).InRequestScope(); 
```

下面是这些 SessionBootstrappers 基类的 GetSession() 方法的代码（请注意，CreateSessionFactory 方法调用上面的 BuildConfiguration 方法，然后调用 BuildSessionFactory()）。

```
public virtual ISession GetSession(IContext context)
{
    var items = GetHttpContextItems();
    var session = default(ISession);
    var sessionExists = items.Contains(SessionKey);

    if (!sessionExists)
    {
        session = context.Kernel.Get<ISessionFactory>(Name).OpenSession();
        items.Add(SessionKey, session);
    }
    else
    {
        session = (ISession)items[SessionKey];
    }

    return session;
}

// a Func which serves access to the HttpContext.Current.Items collection
private Func<IDictionary> GetHttpContextItems { get; set; } 
```

请注意，我们使用两个会话，一个用于普通域脱水/水化，一个用于 CQRS，因此容器中的绑定对。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T20:57:54.060

错误消息表明您没有正确管理事务。我认为根本原因是您正在处理存储库方法中的事务，我认为这是一个非常糟糕的设计。你的存储库应该有一个 ISession 注入到它们的构造函数中，你的控制器应该有任何它们依赖的存储库注入到它们的构造函数中。使用 Ninject 很容易将这一切连接起来。使用这种方法，您可以使用每个请求的事务或（更好的 imo）在操作方法中管理事务。

这是我在 NinjectWebCommon 中使用 Ninject 设置 NHibernate 的方法。您的问题的根本原因可能是您将 ISession 绑定在请求范围内并将其存储在 HttpContext 中，这是不必要的。我也很困惑为什么你有两组域和查询绑定。

```
 private static void RegisterServices(IKernel kernel)
    {
        kernel.Bind<ISessionFactory>().ToProvider(new SessionFactoryProvider()).InSingletonScope();
        kernel.Bind<ISession>().ToProvider(new SessionProvider()).InRequestScope();
    }

    private class SessionFactoryProvider : Provider<ISessionFactory>
    {
        protected override ISessionFactory CreateInstance(IContext context)
        {
           // create and configure the session factory
           // I have a utility class to do this so the code isn't shown
           return nhibernateHelper.BuildSessionFactory();
        }
    }

    private class SessionProvider : Provider<ISession>
    {
        protected override ISession CreateInstance(IContext context)
        {
            var sessionFactory = context.Kernel.Get<ISessionFactory>();
            var session = sessionFactory.OpenSession();
            session.FlushMode = FlushMode.Commit;
            return session;
        }
    } 
```

使用事务的示例控制器操作。管理存储库之外的事务很重要，原因如下：

*   允许多个存储库参与事务
*   允许控制器设置事务边界（工作单元）
*   允许在事务中发生延迟加载
*   如果使用二级缓存，则读取操作需要事务。即使不使用缓存，我认为这是最佳实践

    ```
    public ActionResult EditDocuments(int id, string name)
    {
        using (var txn = _session.BeginTransaction())
        {
            var summary = _characterizationRepository
                .GetCharacterization(id)
                .AsCharacterizationSummaryView()
                .ToFutureValue();

            var documents = _characterizationRepository
                .GetCharacterization(id)
                .SelectMany(c => c.Documents)
                .OrderBy(d => d.FileName)
                .AsDocumentSelectView(true)
                .ToFuture();

            if (summary.Value == null)
            {
                throw new NotFoundException(_characterizationRepository.ManualId, "Characterization", id);
            }

            CheckSlug(name, summary.Value.Title);

            var model = new DocumentSectionEditView()
                {
                    CharacterizationSummary = summary.Value,
                    Documents = documents.ToArray()
                };

            txn.Commit();
            return View(model);
        }
    } 
    ```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T16:42:21.790

看来您使用了错误的上下文管理器，请检查您是否使用了 WebSessionContext。此上下文管理器会将您的会话绑定到当前调用的 httpcontext 而不是线程。现在在负载（蜘蛛）下会发生什么，当您使用 ThreadStaticSessionContext 时，会话将“跳转”到另一个“调用”。

# try-catch - 我的加载图像功能不起作用与我的尝试有关吗？

> ID：13917699
> 
> 赞同：-2
> 
> 时间：2012-12-17T16:08:33.220
> 
> 标签：try-catch, pygame

我正在尝试创建一个函数来加载我的图像但每次我运行它都会返回“无法加载图像”

```
def load_image(file_name, colorkey = None):

  full_name = os.path.join('data', file_name)

  try:
    image = pygame.image.load(full_name)
 except pygame.error, message:
    print 'Cannot load image:', full_name
    raise SystemExit, message

    image = image.convert()

  if colorkey is not None:
   if colorkey is -1:
    colorkey = image.get_at((0,0))
    image.set_colorkey(colorkey, RLEACCEL)

  return image,image.get() 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T16:21:06.333

如果您在 Windows 上，则需要执行以下操作：

```
os.path.join('c:%s' % os.sep, 'data') 
```

# jquery - 仅当此输入元素的焦点不在时如何验证字段？（不显眼的验证）

> ID：13917705
> 
> 赞同：0
> 
> 时间：2012-12-17T16:09:11.103
> 
> 标签：jquery, validation, asp.net-mvc-4, unobtrusive-validation

仅当此输入元素的焦点不在时如何验证字段？现在，当我输入输入时，验证器会立即验证我的数据。当我开始填充另一个输入时，我希望该验证器验证我的数据。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T16:20:01.430

是的，这是可能的。这个想法是返回 false 表单 OnKeyUp 事件：http: [//jquery.10927.n7.nabble.com/validate-onkeyup-for-single-field-td121993.html](http://jquery.10927.n7.nabble.com/validate-onkeyup-for-single-field-td121993.html)

[ASP.net MVC 3 jQuery 验证；禁用不显眼的 OnKeyUp？](https://stackoverflow.com/questions/8022695/asp-net-mvc-3-jquery-validation-disable-unobtrusive-onkeyup)

# c# - 在图片框上创建平滑线（winforms，c#）

> ID：13917708
> 
> 赞同：2
> 
> 时间：2012-12-17T16:09:20.817
> 
> 标签：c#, .net, winforms, event-handling

首先是代码

```
private void pictureBox1_MouseMove(object sender, MouseEventArgs e)
    {

            System.Drawing.Graphics g;
            System.Drawing.SolidBrush brush = new System.Drawing.SolidBrush(Color.Blue);
            g = pictureBox1.CreateGraphics();
            g.FillRectangle(brush, e.X, e.Y, 5, 5);

    } 
```

每当鼠标移到图片框上并创建像素时，此事件处理程序就会启动。现在的问题是，只要我慢慢移动鼠标，所有这些像素都会形成一条线。但是，每当我稍微快一点移动鼠标时，就会出现换行符，我看到的只是它们之间有宽阔空间的点。

在这件事上需要帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-17T16:12:36.197

移动鼠标时，您不会`MouseMove`为鼠标指针经过的每个像素获得一个事件。您将以相当一致的时间间隔获得它们，因此鼠标移动得越快，您获得的点就越远。

您需要做的是存储收到的最后一个点的位置，并`DrawLine`在旧位置和新位置之间绘制一条实际线。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-17T16:14:47.133

从已经做出的评论来看，您需要做的是在鼠标计算的最后一点和鼠标现在所在的点之间插入一条线。这将创建一条自由流畅的线条，正如您的评论所暗示的那样。

如果你用插值代替`draw line`then 就可以让你的线弯曲..显然在这些点之间画一条线需要更少的处理时间并且可能就足够了

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-17T16:12:15.993

我绝不会建议在覆盖的 Paint 方法之外执行实际绘图。而是调用`Invalidate()`.

我会以这种方式编辑您的代码：

```
void pictureBox1_MouseMove(object sender, MouseEventArgs e)
{
    //Store necessary painting data from e
    pictureBox1.Invalidate();
}

private void OnPaint(object sender, PaintEventArgs e)
{
    var g = e.Graphics;
    //Handle painting logic
    base.OnPaint(e);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-17T16:21:37.570

问题是您实际上是在单独绘制一条线，并且应用程序无法跟上输入（对于鼠标经过/通过的每个像素，您不会获得 MouseEvent 调用）。

您需要跟踪前一帧的鼠标位置，然后您可以在该点和当前点之间绘制一条平滑**线。**您可以在 mouseEnter/mouseDown 上设置“旧”位置（无论您想要什么），然后在鼠标移动时进行绘图。确保`oldMousePos`在进行任何绘图之前设置变量很重要，否则您将在整个地方都有线条（甚至可能值得拥有一个检查变量以确保它是最新的）。

绘图代码：

```
private System.Drawing.Point oldMousePos; // old mouse position

private void pictureBox1_MouseMove(object sender, MouseEventArgs e)
{
        System.Drawing.Point curMousePos = e.Location;
        System.Drawing.Graphics g;
        System.Drawing.Pen brush = new System.Drawing.Pen(Color.Blue, 5); // width of 5
        g = pictureBox1.CreateGraphics();
        g.DrawLine(brush, oldMousePos.X, oldMousePos.Y, curMousePos.X, curMousePos.Y); // use a pen for lines rather than a brush (between 2 points)
        g.Dispose(); // mark the graphics object for collection
        oldMousePos = curMousePos; // set old to be this (so you get a continuous line)
} 
```

您可能会考虑另一种进行渲染的方法 - 在鼠标事件中创建一个 Graphics 对象有点狡猾。

# linux - rm 不能删除以“--”开头的文件

> ID：13917714
> 
> 赞同：5
> 
> 时间：2012-12-17T16:09:37.477
> 
> 标签：linux, bash, shell, rm

我有一个创建文件的脚本，有时它们最终会在开头有两个破折号。有什么办法可以删除它们吗？`mv`也不行。

这是我得到的错误：

```
$ ls
 --1355509766.jpg

$ rm --1355509766.jpg 
rm: illegal option -- -
usage: rm [-f | -i] [-dPRrvW] file ...
   unlink file

$ rm "--1355509766.jpg"
rm: illegal option -- -
usage: rm [-f | -i] [-dPRrvW] file ...
   unlink file 
```

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-12-17T16:11:12.907

通常的技巧是

```
rm ./--1355509766.jpg 
```

更新：这就是`man rm`必须要说的：

```
To  remove a file whose name starts with a '-', for example '-foo', use
one of these commands:

       rm -- -foo

       rm ./-foo 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-12-17T16:11:47.953

用于`--`将选项与参数分开。

```
$ rm -- --1355509766.jpg 
```

这也适用于其他命令。例如：

```
$ touch -- -v         # create a file called -v
$ grep foo -- -v      # grep for "foo" in file called -v 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-12-17T16:14:35.463

尝试使用路径的文件名：

```
$ rm ./--file.name 
```

例子：

```
$ echo dgag > --test.txt
$ ls
--test.txt
$ rm ./--test.txt
$ ls 
```

# vb.net - 在 Visual Basic .NET 中分配特定数量的物理内存？

> ID：13917715
> 
> 赞同：2
> 
> 时间：2012-12-17T16:09:40.233
> 
> 标签：vb.net, memory, memory-management, ram

我知道这是一个奇怪的问题，但是你如何......分配物理内存？我知道使用 New 会创建一个新对象，但它不会分配我要查找的内容。这是我正在寻找的东西：http: [//www.soft.tahionic.com/download-memalloc/index.html](http://www.soft.tahionic.com/download-memalloc/index.html)

该程序以我想要的方式分配内存。我将如何分配……比如说 500 MB？或者 VB.NET 会因为它的内存管理而不允许这样做吗？我尝试在谷歌上搜索 memorystreams 和 unmanagedmemorystreams，但我不知道如何开始。我也尝试过制作大型阵列，但这似乎有点……不专业。我只使用 VB.NET 一年左右。有人可以帮我开始吗？顺便说一句，我刚加入。荣幸和你们见面！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T16:19:17.223

您可以像这样分配和释放指定的非托管内存块：

```
Dim handle As IntPtr = Marshal.AllocHGlobal(size)
Marshal.FreeHGlobal(handle) 
```

有关详细信息，请参阅[MSDN](http://msdn.microsoft.com/en-us/library/s69bkh17.aspx)。您也可以使用该`Marshal.AllocCoTaskMem`方法并使用`Marshal.FreeCoTaskMem`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T16:16:00.000

使用[pinvoke](http://www.pinvoke.net/)使用 Windows api 函数，例如[HeapAlloc](http://msdn.microsoft.com/en-us/library/windows/desktop/aa366597%28v=vs.85%29.aspx)

# xpath - Google 电子表格 importxml 时间戳

> ID：13917717
> 
> 赞同：0
> 
> 时间：2012-12-17T16:09:44.060
> 
> 标签：xpath, xml-parsing, google-docs, google-sheets

我已经尝试了 2 个多小时来将时间戳从 zap2it.com 链接导入到我的谷歌电子表格。

**这是**我试图从中导入xml的链接。
[http://affiliate.zap2it.com/tvlistings/ZCGrid.do?zipcode=78238&lineupId=DISH641:-](http://affiliate.zap2it.com/tvlistings/ZCGrid.do?zipcode=78238&lineupId=DISH641:-)

**这是**我要导入的内容
![在此处输入图像描述](../Images/3a0bfb6717719d820ed1de15063dc7f4.png)

**这是我到目前为止尝试过的**

```
=importxml("http://affiliate.zap2it.com/tvlistings/ZCGrid.do?aid=dish&pkg=8388608&fromProvider=true&zipcode=78238&x=52&y=18"&B1,"//body//div[3]/div/div/div[3]/div/div") 
```

**编辑** 我能够改进并获得更好的结果

```
//body//div[3]/div/div/div[1]//* 
```

但它显示了整个页面的时间戳。不完全是我需要的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T01:42:27.053

*[第一个复杂情况是从取消引用该 URI 返回的数据流实际上不是 XML；它有数千个格式正确的错误（URI 中未转义的 & 符号、脚本中未转义的 & 符号和小于号、一些嵌入的 HTML、一些杂项错误）。但是，由于您没有报告问题，因此我假设在服务器和您的 XPath 表达式之间的某个地方有人正在做一些整理。]*

如果您使用文档中广泛使用的`id`和属性，我认为您将获得更好的结果。`class`您想要的材料在源代码中看起来像这样（您可以使用任何基于浏览器的调试工具来查找它；我在 Safari 中使用了“Web Inspector”）；我已经缩进以使结构更加可见，并修复了其中一个`a`元素中的一些格式错误（属性-值对之间缺少空格）。

```
<div class="zc-tn" id="zc-tn-top">
  <div class="zc-tn-i">
    <a href="ZCGrid.do?fromTimeInMillis=1355781600000" 
       class="zc-tn-l" 
       title="Move the grid three hours earlier"></a>
    <div class="zc-tn-c">
      <span class="zc-tn-z" 
            title="Central Standard Time">CST</span>
      <div class="zc-tn-t">7:00 PM</div>
      <div class="zc-tn-t">7:30 PM</div>
      <div class="zc-tn-t">8:00 PM</div>
      <div class="zc-tn-t">8:30 PM</div>
      <div class="zc-tn-t">9:00 PM</div>
      <div class="zc-tn-t">9:30 PM</div>
    </div>
    <a href="ZCGrid.do?fromTimeInMillis=1355803200000" 
       class="zc-tn-r" 
       title="Advance the grid three hours"></a>
  </div>
</div> 
```

一个简单的搜索验证该值`zc-tn-top`作为文档中的 ID 值确实是唯一的。鉴于此，一个简单的 XPath 表达式来检索图像中显示的所有元素（假设`xhtml`绑定到 XHTML 命名空间）：

```
//xhtml:div[@id='zc-tn-top']//xhtml:div[@class='zc-tn-t'] 
```

从您的问题来看，您的 XPath 评估器似乎是命名空间挑战或命名空间遗忘，因此您可能需要将其写为

```
//div[@id='zc-tn-top']//div[@class='zc-tn-t'] 
```

# c++ - 拟合反抛物线。无法达到最小二乘解析表达式

> ID：13917718
> 
> 赞同：0
> 
> 时间：2012-12-17T16:09:46.760
> 
> 标签：c++, math, curve-fitting, least-squares

我试图以 F(x)=1/(ax^2+bx+c) 的形式将一些点拟合到反抛物线。

我的目标是在 c++ 中编写一个函数，该函数需要一组 10-30 个点并将它们拟合到反抛物线。

我开始尝试使用最小二乘法获得解析表达式，但无法获得结果。我手动尝试（有点疯狂），然后我尝试解析 a、b 和 c 的表达式，但 mupad 没有给我结果（我对 Matlab 的 mupad 很陌生，所以也许我做的不正确） . 我不知道如何解决这个问题了。

我可以得到这个特定问题的解析表达式吗？我也看过一般最小二乘拟合的算法，但我不需要这么复杂的算法，我只需要它来处理这个方程。如果没有，StackOverflow 的人将如何解决这个问题？

如果需要，我可以发布方程式，以及我尝试过的小型 Mupad 代码，但我认为没有必要。

**编辑**：一些例子

对不起，图像有点乱，但这是我需要的东西。数据为蓝色（此数据特别嘈杂）。我只需要使用垂直线之间的数据（左侧的一堆数据和右侧的另一个数据）。

拟合的结果用红线表示。

所有这些都是用matlab制作的，但我需要用c++制作。

我会尝试发布一些数据...

![在此处输入图像描述](../Images/ab50ab16e40ec6e4633a5b6d0016656f.png)

**编辑2：**我实际上在Matlab中进行了如下拟合（不是实际代码）：

```
 create linear system Ax = b, with 
 A = [x²  x  1]
 x = [a; b; c]
 b = 1/y; 
```

它应该工作，不是吗？然后我可以使用用 SVD 计算的 Moore-Penrose pseudoinv 来解决。不是吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T16:16:11.110

没有*最小二乘*的解析解；这是一个最小化问题，需要巧妙的迭代方法来解决。（非线性 LS - 感谢@insilico）

你可以尝试牛顿风格的迭代方法（通过重新排列你的方程），但我认为你的函数不会很容易收敛——这将在两点处高度非线性！

我建议为此使用库。例如 nelder-mead 搜索

[http://www.codecogs.com/code/maths/optimization/nelder.php](http://www.codecogs.com/code/maths/optimization/nelder.php)

您只需提供您的错误功能 - 这是

```
sum( pow(F(x) - dataY(x), 2) ) 
```

并提供一组初始值（在解决方案的黑暗中刺伤）；我在 nelder-mead 上取得了很好的成功。

我认为您不会找到一个好的纯编码解决方案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T16:16:24.103

If I understand you correctly, you just need to know the formula for a fit for a particular data set, right?

If so, then you just need to get a curve fitting program and fit the curve using your desired method. Then, implement the formula shown by the curve fit.

There are a few curve fit programs out there:

**Curve Expert**

[http://www.curveexpert.net/](http://www.curveexpert.net/)

*** Eurequa ***

[http://creativemachines.cornell.edu/eureqa](http://creativemachines.cornell.edu/eureqa)

Additionally, some spreadsheet packages may have the curve fitting facilities you need.

I would be happy to try to do a fit for you if you provide the data. No guarantees on getting the fit you want.

# jquery - 点击事件触发后点击事件

> ID：13917730
> 
> 赞同：0
> 
> 时间：2012-12-17T16:10:17.217
> 
> 标签：jquery, ios, jquery-mobile

我在处理 taphold 事件时遇到了严重的问题。请注意，我目前仅在 IOS 中遇到此问题。

我有一个 jQuery Mobile 应用程序。在该应用程序中，我有一个列表，当在其中一个列表项上调用一个轻按时，会打开一个模式弹出窗口。弹出窗口在窗口中心打开。当用户从屏幕上松开手指时，在手指下方的元素上触发 mouseup 和 mousedown（单击）事件。当弹出窗口位于手指下方时，没有问题。当“模态”灰色区域位于手指下方时，弹出窗口立即关闭。这种行为是正常的。不正常的是这些事件被调用。我可以轻松地绕过它，但这样做不是我的本性。我想知道原因。

我做了一个小小提琴来说明我的问题，但你需要一台 iPad 来测试它。我无法在 iPad 模拟器中重现该问题。

[http://jsfiddle.net/yuFpa/38/](http://jsfiddle.net/yuFpa/38/)

```
<code>
    <!DOCTYPE html> 

    <html>    
        <head>
            <meta charset="utf-8">
            <meta name="viewport" content="width=device-width, initial-scale=1">
            <link rel="stylesheet" href="http://code.jquery.com/mobile/1.2.0-alpha.1/jquery.mobile-1.2.0-alpha.1.min.css" />
        <script src="http://code.jquery.com/jquery-1.7.2.min.js"></script>
            <script src="http://code.jquery.com/mobile/1.2.0-alpha.1/jquery.mobile-1.2.0-alpha.1.min.js"></script>
        </head> 

        <body> 
            <div data-role="page" id="one">        
                <div data-role="header">
                    <h1>Taphold dialog test</h1>
                </div>

                <div data-role="content">                
                    <ul data-role="listview">
                        <li>
                            <a href="#">Dummy</a>
                        </li>

                        <li>
                            <a id="taphold-popup-btn" href="#">Taphold me to open popup</a>
                        </li>

                        <li>
                            <a href="#">Dummy</a>
                        </li>
                    </ul>

                    <div data-role="popup" id="taphold-popup" data-overlay-theme="a">
                        <p>This is a completely basic popup, no options set.<p>
                    </div>
                </div>
            </div>
        </body>
    </html>​
</code>
<code>
    $(document).ready(function() {
        $('#taphold-popup-btn').bind('taphold', function(e) {
            e.stopImmediatePropagation();
            e.preventDefault();        

            var $popup = $('#taphold-popup');
            $popup.popup();
            $popup.popup('open');
        });        
    });
</code> 
```

# android - 使用 Android 支持库来支持旧版本

> ID：13917732
> 
> 赞同：0
> 
> 时间：2012-12-17T16:10:32.303
> 
> 标签：android

我正在开发一个 Android 应用程序，并且一直在研究如何支持旧版本（我一直在为 4.0 开发，而 10% 的手机在 2.2 上，50% 在 2.3 上）。我[找到了支持库](http://developer.android.com/tools/extras/support-library.html)，想看看我是否理解正确。

1.  我得到了 2.2 版的支持库。
2.  我从使用普通 .jar 的东西切换到支持库中的东西。似乎是一些代码更改和新的导入。
3.  我的应用现在在 Android 2.2 上运行

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T16:41:43.710

> 我找到了支持库，想看看我是否理解正确

第 1 步和第 2 步没问题。根据您的起点，您可能在第 3 步之前有干预步骤，例如调整`android:minSdkVersion`以支持 API 级别 8 (Android 2.2)。而且，根据您可能想要使用的其他内容（例如，ActionBarSherlock 用于一致的操作栏模式），您可能需要添加更多步骤。

# html - 选择动态 ID JQuery

> ID：13917734
> 
> 赞同：3
> 
> 时间：2012-12-17T16:09:39.733
> 
> 标签：html, jquery

我需要使用 JQuery 选择动态 id，一旦选择它，我需要对其执行一些操作。这是我拥有的 HTML：

```
<input id="content_photos_attributes_1355755712119_image"   name="content[photos_attributes][1355755712119][image]" size="30" type="file"> 
```

请注意 id 值，文本始终相同，但是数字会发生变化（我无法控制该变化）。

我需要做的是在点击时为该元素创建。这是我到目前为止得到的，它不起作用。

```
<script type="text/javascript">
jQuery.noConflict();

  jQuery("input[id *= 'content_photos_attributes_']").click(function() {

  alert("Image deletion is clicked");
});
</script> 
```

我是按 ID 还是按名称选择该元素确实没有区别。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-17T16:22:46.320

正如我所看到的，它应该在`$(document).ready();`处理程序中并且它是一个动态 id，因此您必须使用`.on()`处理程序来选择选择器：

```
$(document).ready(function(){
    jQuery(document).on('click', 'input[id^="content_photos_attributes_"]', function() {
       alert("Image deletion is clicked");
    });
}); 
```

试试这个，看看是否有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T16:11:53.873

尝试*从* `^=`选择器开始：

```
$("input[id^='content_photos_attributes_']").click(function() {
    alert("Image deletion is clicked");
}); 
```

此外，除非您有点“。”，否则您不需要属性比较中的引号。特点。这也可以：

```
$("input[id^=content_photos_attributes_]").click(function() {
    alert("Image deletion is clicked");
}); 
```

# spring - 使用 Spring Framework 的 @Autowired 在测试夹具中实例化和注入 SUT（被测系统）

> ID：13917740
> 
> 赞同：0
> 
> 时间：2012-12-17T16:11:12.487
> 
> 标签：spring, unit-testing, testing, dependency-injection, integration-testing

我见过开发人员使用 Spring 的 @Autowired 特性使 Spring 框架负责在测试类或夹具中实例化和注入 SUT（被测系统）或 CUT（被测类）。以下是显示在测试夹具中使用的 @Autowired 的片段：

```
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.test.annotation.ExpectedException;
import org.springframework.test.context.testng.AbstractTestNGSpringContextTests;
import org.springframework.test.context.ContextConfiguration;

interface BackingStore
{
    //Some methods
}

class Logger
{
    public Logger(BackingStore backingStore)
    {
        //Capture input parameter into member variables
    }

    public void Log(String message) 
    {
        //Some logic
    }
}

@ContextConfiguration(locations = { "classpath:someconfig.xml" })
public class LoggerTests extends AbstractTestNGSpringContextTests
{
    @Autowired
    private Logger _logger;

    @Test
    @ExpectedException(NullPointerException)
    public void Log_WhenPassedNull_ShouldThrowException()
    {
        _logger.Log(null);
    }
} 
```

SUT 所需的所有依赖项（递归）都指定为 Spring 配置 XML 文件的一部分。我不喜欢这种方法。我喜欢所有的测试（单元或集成）都像故事一样阅读（我听到 Kent Beck 说同样的话 :)）。我喜欢在测试用例本身中实例化 SUT/CUT，即使它很复杂。这给出了关于测试用例的清晰画面。

我对@Autowired 或用于在测试夹具中注入 SUT 的任何自动注入机制几乎没有顾虑：

1.  它降低了测试代码的可读性。@Autowire 看起来像魔术。AAA 的排列（Arrange-Act-Assert）从测试代码移动到 XML 文件。

2.  它降低了测试代码的可维护性。这是因为#2。

3.  在异常情况下无法有效验证 SUT/CUT 抛出异常的构造函数。我对此不是 100% 确定的。我不知道 Spring 框架是否对此有答案。

4.  对于单元测试或集成测试来说，这似乎有点矫枉过正。

我在这个问题上向专家索要 2 美分。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T16:16:44.027

It only reduces test code readability if you dont know where to look for the @Autowired objects. I would advise using SpringJunitTestRunner that defines the test application context at the top of the unit test class.

Using dependency injection in your test cases allows you to easily test with different objects.

E.g. If your code required a 3rd party service, you could use dependency injection (e.g. Autowiring a Spring bean) to inject a mocked service for your unit tests and the real service for the application.

So for this reason it definitley doesnt decrease the test code maintainability, as it is really encouraging loose coupling between the code youre testing and any external objects.

It *may* be overkill to inject all objects in such a way, but it is definitely not overkill for unit tests/integration tests in general.

# .net - 读取托管 PE DLL

> ID：13917741
> 
> 赞同：1
> 
> 时间：2012-12-17T16:11:18.343
> 
> 标签：.net, dll, managed, specifications, portable-executable

我希望我的应用程序（用 ocaml 编写）读取托管 DLL 并检索其中包含的类定义。我在哪里可以找到有关如何执行此操作的公共文档/示例代码？

[编辑：由于我在 ocaml 中编写此应用程序，因此我正在寻找实际的文件格式定义，因为我不能使用 .NET 自己的程序集检查功能]

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T17:49:28.563

没有可用的正式文件规范，主要是因为它可能会更改并且*已经*更改了多次（.NET 1.1、2.0 和 4.0）。[Ecma 335](http://www.ecma-international.org/publications/standards/Ecma-335.htm)中提供了程序集清单中元数据表的结构描述。Windows SDK 的 CorHdr.h 文件包含必要的声明，但只能在 C 或 C++ 中直接使用。

没有人试图直接读取文件。相反，您使用元数据 API [IMetaDataImport2](http://msdn.microsoft.com/en-us/library/ms232953.aspx)。很好的例子随处可见，谷歌的名字很好。SSCLI20 项目有 ildasm 的源代码和显示该接口正在使用的 C# 编译器。[CCI 元数据项目](http://ccimetadata.codeplex.com/)也可能非常有用，旨在帮助您实现编译器，简而言之，它可能无法直接在 OCaml 中使用。

请注意，IMetaDataImport 是一个 COM 接口，因此尝试将其移植到 OCaml 所承受的痛苦程度在很大程度上取决于您的实现对 COM 的支持程度。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T16:16:48.407

此代码应该可以帮助您开始

```
 Assembly dLL = Assembly.LoadFile(assemblyPath);
 foreach (Type type in dLL.GetTypes())
 {
  //...play with type here
 } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-18T03:22:07.367

好的，我找到了一些有关读取 PE 文件和 CLI 元数据的相关信息。具体来说，这篇文章[http://wyday.com/blog/2010/how-to-detect-net-assemblies-x86-x64-anycpu/](http://wyday.com/blog/2010/how-to-detect-net-assemblies-x86-x64-anycpu/)有一个 C# 示例源代码和[PE/COFF 规范](http://www.microsoft.com/whdc/system/platform/firmware/pecoff.mspx)的链接，以及[CLI 元数据](http://download.microsoft.com/download/7/3/3/733AD403-90B2-4064-A81E-01035A7FE13C/MS%20Partition%20II.pdf)规范。似乎它们足以开始。

不过，如果有人想分享更具体的信息/示例源代码，我仍然会保留这个问题。再次感谢所有回答的人！

# mysql - SQL查询排除一对多具有特定值的？

> ID：13917743
> 
> 赞同：0
> 
> 时间：2012-12-17T16:11:28.073
> 
> 标签：mysql, sql

使用 MySQL，我想列出所有没有文档“联络员”的用户。这可能意味着根本没有任何文档的用户，或者有文档但在这些文档中没有“联络人”的用户。

如何使用 MySQL 查询？我不能让它工作！

这是（简单）模型

```
Users (id, name)
Documents (id, user_id, name, path) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T16:31:42.273

您正在寻找的正确查询是：

```
SELECT 
    * 
FROM 
    Users 
WHERE 
    id NOT IN (
        SELECT 
            user_id 
        FROM 
            Documents 
        WHERE 
            name = "liaison"
    ) 
```

这将达到您正在寻找的确切结果。如果特定用户没有文档，它将被列出。如果它有很多文件，其中之一是“联络”，则不会列出。

如果您想在文档名称中搜索“联络员”，请替换`name = "liaison"`为`name LIKE "%liaison%"`.

它基本上说：选择所有用户，例如没有名称为“liaison”的文档指向它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-17T16:41:11.337

这`NOT EXISTS`是一个可行的解决方案。作为替代方案，有时，对于大型集合，“反 JOIN”操作可以提供更好的性能：

```
SELECT u.*
  FROM Users u
  LEFT
  JOIN (SELECT d.user_id
          FROM Documents d
         WHERE d.name = 'liaison'
       ) l
    ON l.user_id = u.id
 WHERE l.user_id IS NULL 
```

别名为的内联视图`l`返回给我们一个包含名为“liaison”的文档的 user_id 列表；该结果集外部连接到 Users 表，然后我们排除找到匹配项的任何行（l.user_id 的测试为 NULL）。

这将返回一个与您的带有`NOT EXISTS`谓词的查询等效的结果集。

另一种选择是使用带有`NOT IN`谓词的查询。请注意，我们需要保证子查询不返回 NULL，因此一般方法是在子查询返回的列上包含一个 IS NOT NULL 谓词。

```
SELECT u.*
  FROM Users u
 WHERE u.id NOT IN 
       ( SELECT d.user_id 
           FROM Documents d
          WHERE d.user_id IS NOT NULL
            AND d.name = 'liaison'
       ) 
```

我会这样写`NOT EXISTS`查询：

```
SELECT u.*
  FROM Users u
 WHERE NOT EXISTS 
       ( SELECT 1
           FROM Documents d
          WHERE d.name = 'liaison'
            AND d.user_id = u.id
       ) 
```

我个人的偏好是在相关子查询的 SELECT 列表中使用文字 1；它提醒我查询只是在寻找 1 行的存在。）

同样，我通常发现“反连接”模式在大集合中表现最好。（您需要查看每个语句的 EXPLAIN 输出，并测量每个语句的性能以确定哪个最适合您的情况。）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-17T16:17:10.000

```
select * from Users where not exists (select id from Documents where Users.id = Documents.id and Documents.name = 'liaison') 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-17T16:26:38.097

所以，我终于想出了这个似乎很好用的解决方案：

```
SELECT * FROM users u WHERE id NOT IN (SELECT DISTINCT user_id FROM user_documents WHERE name = 'LIAISON') ORDER BY c.lastname, c.firstname 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-12-17T16:30:05.173

```
SELECT users.*
FROM users left join Documents
     on users.id = Documents.user_id
        and documents.name='LIAISON'
WHERE documents.user_id is null 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-17T16:13:21.963

尝试 ：

```
SELECT DISTINCT u.*
FROM users u LEFT JOIN documents d ON d.user_id = u.id
WHERE d.id IS NULL OR d.name NOT LIKE '%liaison%' 
```

如果“联络”是文档的确切名称，则删除百分号。

# php - PHP 防止直接访问

> ID：13917763
> 
> 赞同：1
> 
> 时间：2012-12-17T16:12:21.487
> 
> 标签：php, javascript, jquery, .htaccess, webserver

有没有办法让浏览器直接访问

```
http://www.example.com/test.php 
```

直接查看网址时不可用，但仍允许

```
JQuery $.get('http://www.example.com/test.php') function 
```

读取文件？我知道这可能是不可能的，因为我相信在我的浏览器中输入[http://www.example.com/test.php](http://www.example.com/test.php)在客户端基本上与使用 $.get() 函数相同。但我不知道是否有任何解决方法。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-17T16:14:55.900

有点，让php检查`x-requested-with`标题。如果它不存在，请重定向到其他地方。

不过，它不会阻止某人使用所述标头发送自己的请求。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T16:17:52.573

你是对的，使用浏览器或 $.get 基本上是一样的。唯一的区别是 AJAX 调用将 X-Requested-With 标头设置为 XMLHttpRequest。不过，这可以通过浏览器扩展添加，所以它不是万无一失的。

# ajax - jQuery get() 没有在点击时触发，控制台中没有错误

> ID：13917773
> 
> 赞同：0
> 
> 时间：2012-12-17T16:13:04.887
> 
> 标签：ajax, jquery

我在这里用头撞墙，希望我对明显的事情视而不见。

我有这个 DOM 结构：

```
<ul>
    <li>
        <h3>Lorem ipusm</h3>
        <p class="remove-story"><a href="http://example.com/remove/XX">Delete</a></p>
    </li>
</ul> 
```

这是我的 jQuery：

```
$(".remove-story a").click(function()
    {
        var parent = $(this).closest('li');
        $.get($(this).attr('href'), function()
        {
            $(parent).fadeOut();
        });
        return false;
    }); 
```

就目前而言，单击其中的链接`.remove-story`没有任何作用，链接中的 URL 触发的操作也不会发生。

在页面加载或单击链接时，控制台中不会弹出 JS 错误。

如果我删除该`$.get`功能并简单地淡出列表项，则可以按预期工作。

如果我手动访问 URL（或删除`return false`并单击链接），则链接有效并且后端操作完成（故事已删除）。

我的代码中是否有任何人都可以发现的错误？如果没有，关于在哪里寻找故障排除的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T16:14:32.700

将您的 onclick 包装为`$(document).ready(function() {})`：

```
$(".remove-story > a").click(function(e)
    {
        var parent = $(this).closest('li');
        alert($(this).attr('href'));
        $.ajax({
            url: $(this).attr('href'),
            success: function() {
                alert(12);
                $(parent).fadeOut();
            },
            error: function(e) {
                alert('baaaahhhh:' + e);
            }
        })
         //e.stopPropagation();
        return false;
    }); 

​ 
```

更新：更改`$.get`为`$.ajax`查看执行 Ajax 请求时是否出现错误。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T16:18:08.223

I would firstly check if that get request really been send our, I mean using some tool like Fiddler or Chrome developer tool network tab, and then maybe add break point inside the call see if the **parent** you in that certain context is nothing or a wrong object

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-17T17:04:28.570

您需要对链接进行编码`encodeURIComponent($(this).attr('href'));`

这是一个 jsfiddle 工作：http: [//jsfiddle.net/9Wnt8/](http://jsfiddle.net/9Wnt8/)

# c# - 合并两个文件的最节省内存的方法

> ID：13917775
> 
> 赞同：0
> 
> 时间：2012-12-17T16:13:24.717
> 
> 标签：c#

我需要在应用排序的同时合并两个文件。重要的是，我要让任务保持在内存使用上。为此，我需要在 c# 中创建一个控制台应用程序。

输入文件 1：

> *一些标头*
> A12345334
> A00123445
> A44566555
> B55677
> B55683
> B66489
> *记录数：6*

输入文件 2：

> *一些 Header*
> A00123465
> B99423445
> *记录数：2*

所以，我需要确保第三个文件应该首先包含所有“A”记录，然后是“B”记录，然后是总记录数。

输出文件：

> *一些标头*
> A12345334
> A00123445
> A44566555
> A00123465
> B99423445
> B55677
> B55683
> B66489
> *记录数：8*

“A”和“B”内的记录排序不相关。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-17T16:17:18.173

Since your source files appear sorted, you can do with with very low memory usage.

Just open both input files as well as a new file for writing. Then compare the next available line from each input file and write the line that comes first to your output file. Each time you write a line to the output file, get the next line from the input file it came from.

Continue until both input files are finished.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T16:16:31.547

If memory is an issue the easiest way to do this is probably going to be to read the records from both files, store them in a SQLite or SQL Server Compact database, and execute a SELECT query that returns a sorted record set. Make sure you have an index on the field you want to sort on.

That way, you don't have to store the records in memory, and you don't need any sorting algorithms; the database will store the records on disk and do your sorting for you.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-17T17:31:20.633

这是合并排序 2 个文件的更通用/样板解决方案的源代码。

```
public static void Merge(string inFile1, string inFile2, string outFile) 
{
    string line1 = null;
    string line2 = null;
    using (StreamReader sr1 = new StreamReader(inFile1))
    {
        using (StreamReader sr2 = new StreamReader(inFile2))
        {
            using (StreamWriter sw = new StreamWriter(outFile))
            {
                line1 = sr1.ReadLine();
                line2 = sr2.ReadLine();
                while(line1 != null && line2 != null)
                {
                    // your comparison function here
                    // ex: (line1[0] < line2[0])
                    if(line1 < line2)
                    {
                        sw.WriteLine(line1);
                        line1 = sr1.ReadLine();
                    }
                    else 
                    {
                        sw.WriteLine(line2);
                        line2 = sr2.ReadLine();
                    }
                }
                while(line1 != null)
                {
                    sw.WriteLine(line1);
                    line1 = sr1.ReadLine();
                }
                while(line2 != null)
                {
                    sw.WriteLine(line2);
                    line2 = sr2.ReadLine();
                }
            }
        }
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-17T16:18:41.967

我会推荐使用[`StreamReader`](http://msdn.microsoft.com/en-us/library/system.io.streamreader.aspx)and[`StreamWriter`](http://msdn.microsoft.com/en-us/library/system.io.streamwriter.aspx)用于这个应用程序。因此，您可以使用打开文件[`StreamWriter`](http://msdn.microsoft.com/en-us/library/system.io.streamwriter.aspx)，使用文件#1 复制所有行[`StreamReader`](http://msdn.microsoft.com/en-us/library/system.io.streamreader.aspx)，然后使用文件#2 复制所有行。此操作非常快，具有集成缓冲区并且非常轻量级。

如果输入文件已经按 A 和 B 排序，您可以在源阅读器之间切换以使输出排序。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-17T16:20:43.093

快速的想法，假设记录已经在原始文件中排序：

1.  开始循环文件 2，收集所有 A 记录
2.  一旦你到达第一个 B 记录，开始将它们收集到一个单独的集合中。
3.  阅读所有文件 1。
4.  从文件 2 中写出 A 记录集合的内容，然后附加从文件 1 读取的内容，然后是文件 2 中的 B 记录。

可视化：

```
<A-data from file 2>
<A-data, followed by B-data from file 1>
<B-data from file 2> 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-17T16:21:28.080

如果您担心内存，这是[插入排序](http://en.wikipedia.org/wiki/Insertion_sort)的完美案例，并且每次从每个文件中读取一行。如果这不是问题，则将整个内容读入列表中，然后调用 sort 将其写出来。

如果您甚至不能将整个排序列表保存在内存中，那么最好使用数据库或内存映射文件。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-12-17T16:26:07.623

假设您的输入文件已经订购：

1.  打开输入文件 1 和 2 并创建输出文件。
2.  从文件 1 中读取第一条记录。如果它以 A 开头，则将其写入输出文件。继续从输入文件 1 读取，直到到达以 B 开头的记录。
3.  从文件 2 中读取第一条记录。如果它以 A 开头，则将其写入输出文件。继续从输入文件 2 中读取，直到找到以 B 开头的记录。
4.  返回文件 1，将“B”记录写入输出文件。继续从输入文件 1 读取，直到到达流的末尾。
5.  返回文件 2，将“B”记录写入输出文件。继续从输入文件 2 读取，直到到达流的末尾。

这种方法将避免您一次在内存中保存超过 2 行的数据。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-12-17T16:46:24.327

由于您有两个排序的序列，您只需要将两个序列合并为一个序列，这与 MergeSort 算法的后半部分的工作方式大致相同。

不幸的是，鉴于提供的接口`IEnumerable`，它最终会有点混乱和复制粘贴，但它应该表现得相当好并且使用非常小的内存占用：

```
public class Wrapper<T>
{
    public T Value { get; set; }
}
public static IEnumerable<T> Merge<T>(IEnumerable<T> first, IEnumerable<T> second, IComparer<T> comparer = null)
{
    comparer = comparer ?? Comparer<T>.Default;

    using (var secondIterator = second.GetEnumerator())
    {
        Wrapper<T> secondItem = null; //when the wrapper is null there are no more items in the second sequence

        if (secondIterator.MoveNext())
            secondItem = new Wrapper<T>() { Value = secondIterator.Current };
        foreach (var firstItem in first)
        {
            if (secondItem != null)
            {
                while (comparer.Compare(firstItem, secondItem.Value) > 0)
                {
                    yield return secondItem.Value;
                    if (secondIterator.MoveNext())
                        secondItem.Value = secondIterator.Current;
                    else
                        secondItem = null;
                }
            }
            yield return firstItem;

            yield return secondItem.Value;
            while (secondIterator.MoveNext())
                yield return secondIterator.Current;
        }
    }
} 
```

一旦你有了一个`Merge`函数，它就很简单了：

```
File.WriteAllLines("output.txt",
    Merge(File.ReadLines("File1.txt"), File.ReadLines("File2.txt"))) 
```

File`ReadLines`和`WriteAllLines`here 每个都使用`IEnumerable`并将相应地流式传输这些行。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2016-12-22T07:46:22.343

```
public void merge_click(Object sender, EventArgs e)
{
        DataTable dt = new DataTable();
        dt.Clear();
        dt.Columns.Add("Name");
        dt.Columns.Add("designation");
        dt.Columns.Add("age");
        dt.Columns.Add("year");
        string[] lines = File.ReadAllLines(@"C:\Users\user1\Desktop\text1.txt", Encoding.UTF8);
        string[] lines1 = File.ReadAllLines(@"C:\Users\user2\Desktop\text1.txt", Encoding.UTF8);
        foreach (string line in lines)
        {
            string[] values = line.Split(',');
            DataRow dr = dt.NewRow();
            dr["Name"] = values[0].ToString();
            dr["designation"] = values[1].ToString();
            dr["age"] = values[2].ToString();
            dr["year"] = values[3].ToString();
            dt.Rows.Add(dr);
        }

        foreach (string line in lines1)
        {

            string[] values = line.Split(',');

            DataRow dr = dt.NewRow();
            dr["Name"] = values[0].ToString();
            dr["designation"] = values[1].ToString();
            dr["age"] = values[2].ToString();
            dr["year"] = values[3].ToString();
            dt.Rows.Add(dr);
        }
        grdstudents.DataSource = dt;
        grdstudents.DataBind();
} 
```

# android - greendao greenDao 何时从会话缓存中更新数据库

> ID：13917776
> 
> 赞同：3
> 
> 时间：2012-12-17T16:13:28.927
> 
> 标签：android, greendao

问题是：GreenDao 什么时候从会话缓存中更新 sql 数据库？

假设我正在从数据库中查询现有实体，然后更改其中一个属性（字段）。无论如何，这些更改都是在不指导 sql 数据库的情况下执行的。

那么 - 我应该对实体进行更新吗？GreenDao 何时将其会话缓存刷新到数据库本身？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-18T22:21:09.820

你所描述的听起来像 JPA/Hibernate 会话缓存。greenDAO 没有。它更简单。有些对象保存在内存中，您总是手动将它们更新到数据库中。

更多信息（远未完成）： http: [//greendao-orm.com/documentation/sessions/](http://greendao-orm.com/documentation/sessions/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-21T08:31:42.050

当生成 GreenDAO 代码（实体、DAO、DaoSession ......等）时，DAO 默认扩展`AbstractDao`类，该类具有多种在需要时更新数据库的方法，而不是将更新保留在内存中一段时间​​，例如( `update(T entity)`, `refresh(T entity)`, `updateInTrx(java.lang.Iterable entities)`)。

有关更多信息，请查看[AbstractDao javaDoc](http://greendao-orm.com/javadoc/greendao/de/greenrobot/dao/AbstractDao.html)

# java - 使用基于 Java 的配置进行 Spring 3.2 单元测试

> ID：13917785
> 
> 赞同：8
> 
> 时间：2012-12-17T16:14:32.107
> 
> 标签：java, spring, gradle, cglib

我正在使用带有基于 Java 的配置的 Spring 3.2，并且我的单元测试（JUnit 4.8.1）存在一些问题。所以这是一个测试运行器：

```
 @RunWith(SpringJUnit4ClassRunner.class)
 @ContextConfiguration(classes={TestConfig.class})
 public class ManualTest
 {
     @Autowired
     ... 
```

但是，我收到此错误：

```
Caused by: java.lang.IllegalStateException: CGLIB is required to process @Configuration classes. Either add CGLIB to the classpath or remove the following @Configuration bean definitions: [testConfig]
at org.springframework.context.annotation.ConfigurationClassPostProcessor.enhanceConfigurationClasses(ConfigurationClassPostProcessor.java:327)
at org.springframework.context.annotation.ConfigurationClassPostProcessor.postProcessBeanFactory(ConfigurationClassPostProcessor.java:222) 
```

正如[Spring 博客](http://blog.springsource.org/2012/12/13/spring-framework-3-2-goes-ga/)所述，Spring 3.2 正在内联 CGLIB 3。那么为什么我会收到此错误？

我使用 Gradle 1.3 作为构建管理工具，使用 STS 作为 IDE。调用`gradle eclipse`gradle 时会两次引入依赖项：一次作为普通 jar，一次作为库：

首先是普通的罐子： ![普通罐子](../Images/827ea372a4369c74f7225c03bfcf395a.png)

而不是作为图书馆：

![图书馆](../Images/8530b021d61ba60dcd3bff8a8ef60b9d.png)

在普通的 jar 部分我仍然配置了 Spring 3.1，而在库部分有 Spring 3.2。所以我移除了普通的罐子，一切正常。

这是我的项目 build.gradle

```
configurations
{
    driver
}

dependencies
{
    driver 'com.oracle:ojdbc6:11.2.0'

    compile "org.springframework:spring-jdbc:$springVersion"

    testCompile 'com.oracle:ojdbc6:11.2.0'
    testCompile "org.springframework:spring-test:$springVersion"
    testCompile "commons-dbcp:commons-dbcp:$dbcpVersion"
    testCompile "junit:junit:$junitVersion"
    testCompile "org.slf4j:slf4j-log4j12:$slf4jVersion"
}

sourceSets 
{
    main
    {
        java
        {
            srcDirs 'src/main/java', "$buildDir/generated-sources/"
        }
    }
} 
```

以及来自主项目的 build.gradle

```
configure(allprojects)
{
    ext.dbcpVersion = '1.4'
    ext.springVersion  = '3.2.0.RELEASE'
    ext.junitVersion  = '4.8.1'
    ext.slf4jVersion = '1.7.2' 
}

subprojects
{
    // Artifact settings
    group = 'xxx'
    version = '1.0-SNAPSHOT'

    // Standard plugins
    apply plugin: 'java'
    apply plugin: 'eclipse'

    // Repositories
    repositories
    {
        mavenLocal()
        maven
        {
            url "http://repo.springsource.org/release"
        }
        mavenCentral()
    }

    // Standard dependencies
    dependencies
    {
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-24T12:21:17.163

我删除了所有 Eclipse 项目和设置以及所有 Gradle 临时文件。然后我尝试在 Eclipse 中导入项目（导入 Gradle 项目..）。这失败了一个例外。然后我删除了 Eclipse 项目中的 Gradle 设置，然后导入工作。

所以我不会使用`gradle eclipse`1.3 版。

此外，附加的源集路径也没有作为源路径进入 Eclipse 项目。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-15T23:17:54.727

我遇到过同样的问题。只需将此依赖项添加到您的 pom.xml 文件中：

```
 <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-context</artifactId>
        <version>${spring.version}</version>
    </dependency> 
```

并且您的单元测试和运行时代码应该可以正常工作而不会出现 cglib 错误。

# actionscript-3 - 使用自定义事件从子组件更改变量的状态

> ID：13917789
> 
> 赞同：0
> 
> 时间：2012-12-17T16:14:38.130
> 
> 标签：actionscript-3, apache-flex, actionscript, flex3

这是主要应用程序

```
<?xml version="1.0" encoding="utf-8"?>
    <mx:Application xmlns:mx="http://www.adobe.com/2006/mxml"
            verticalAlign="middle"
            backgroundColor="white" layout="absolute" initialize="init();"  xmlns:MyComp="screens.*" >
            <mx:Script>
                <![CDATA[
                import screens.MyEvent;

                    private function init():void
                    {
                         systemManager.addEventListener("data_transfer",handleDataTransfer);

                    }
                    private function handleDataTransfer(evt:MyEvent):void{

               this.myViewStack.selectedIndex=1;

                 }

                ]]>
            </mx:Script>

    <mx:ViewStack id="myViewStack" selectedIndex="0" width="1110" height="636">
    <MyComp:Welcome />
        <MyComp:Screen id="fillPage" />
        </mx:ViewStack>
    </mx:Application> 
```

这是我的欢迎组件

```
<?xml version="1.0" encoding="utf-8"?>
<mx:Canvas xmlns:mx="http://www.adobe.com/2006/mxml" width="930" height="300" >
<mx:Script>
    <![CDATA[
       private function changeHandler():void{
        var myEVT:MyEvent = new MyEvent("data_transfer",false, true);
        this.dispatchEvent(myEVT);
       }

    ]]>
</mx:Script>
 <mx:Button label="Fill The Form" id="fillForm" click="changeHandler()"/>           
</mx:Canvas> 
```

这是我的 screen.mxml

```
<?xml version="1.0" encoding="utf-8"?>
<mx:Canvas xmlns:mx="http://www.adobe.com/2006/mxml" width="400" height="300">
<mx:Label text="hai">
</mx:Label> 
</mx:Canvas> 
```

这是 MYEvent.as

```
package screens
{
    import flash.events.Event;

    public class MyEvent extends Event
    {

    public static const DATA_TRANSFER:String = "data_transfer";

        public function MyEvent(type:String, bubbles:Boolean=false, cancelable:Boolean=false)
        {
            super(type, bubbles, cancelable);
        }

    }
} 
```

我想通过单击欢迎 mxml 处的按钮来获取屏幕 mxml...我是最初的学习者..但它不起作用..请帮助我..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T16:59:57.033

由于您的自定义事件有冒泡=假，它不会冒泡到 systemManager。尝试：

```
var myEVT:MyEvent = new MyEvent("data_transfer", true, true); 
```

或者，将侦听器添加到正在调度事件的对象：

```
welcomePage.addEventListener("data_transfer",handleDataTransfer);
....
<MyComp:Welcome id="welcomePage" /> 
```

第二种解决方案通常更好/首选 - 更少的事件冒泡是一件好事

# android - 在 google play 中调试 android 应用程序

> ID：13917790
> 
> 赞同：-1
> 
> 时间：2012-12-17T16:14:42.120
> 
> 标签：android, debugging

我需要在 Google Play 上使用 APK 扩展文件。是否可以在不发布应用程序的情况下在我的程序中测试此机制的功能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T16:49:31.867

您可以在不将其上传到 Google Play 的情况下测试某些功能，而下载部分要求您将草稿应用程序上传到 Google Play，如文档的[这一部分](http://developer.android.com/google/play/expansion-files.html#Testing)中详细说明和解释的那样（Google 在几秒钟内将我引导至）。

# ios - ios - 删除按钮引用后出现异常

> ID：13917795
> 
> 赞同：0
> 
> 时间：2012-12-17T16:14:58.943
> 
> 标签：ios, ios5

我之前制作了一个按钮，并从情节提要中将其拖到 .h 文件中，然后将其设置为：

```
@property (weak, nonatomic) IBOutlet UIButton *deleteComment; 
```

然后我意识到我需要一个操作按钮并删除了这个按钮的代码。现在，当我尝试转到此屏幕时，出现此异常：

```
*** Terminating app due to uncaught exception 'NSUnknownKeyException', reason: '[<TopicEditController 0xa027ac0> setValue:forUndefinedKey:]: this class is not key value coding-compliant for the key edit.'
*** First throw call stack: 
```

系统指向这个点：

```
int main(int argc, char *argv[])
{
    @autoreleasepool 
    {
        return UIApplicationMain(argc, argv, nil, NSStringFromClass([AppDelegate class]));
    }
} 
```

有人可以告诉我如何阻止这种情况发生吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T16:17:40.080

您的按钮仍然链接到您删除的插座。进入 Interface Builder 并选择您的按钮。打开右侧的检查器并删除插座连接。

![在此处输入图像描述](../Images/e9fcbb553790f4e0bed288c3db174409.png)

# php - 在 Routes.php 中运行基本 Laravel 任务 - “抱歉，找不到该任务。”

> ID：13917796
> 
> 赞同：3
> 
> 时间：2012-12-17T16:15:00.253
> 
> 标签：php, laravel

我正在尝试设置一个 Laravel 任务，最终使用工匠界面将其称为 cron 作业。

在尝试让一个简单的任务工作时，我不断收到 Laravel 找不到该任务的错误：“抱歉，找不到该任务。”

这是我的版本有问题吗？我正在使用不到一个月前下载的版本，我知道它至少是 v3.0，但我不知道如何检查具体的版本号。

我需要在 start.php 中配置什么来注册我的所有“任务”吗？我认为这是默认情况下保存在 /application/tasks 中的所有类

我的任务.php

```
class Mytask_Task {

    public function run($arguments) {
        // Do awesome notifying...
        echo "Hello from Mytask Task";
    }
} 
```

路由.php

```
try{
    \Laravel\CLI\Command::run(array('mytask'));
    echo "Success";
} catch (Exception $e) {
    echo $e->getMessage();
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T22:41:56.193

原因是对于非 cli 请求，laravel 的应用程序工作流不会自动加载 CLI 组件。

这就是为什么你必须这样做：

```
require_once path('sys') . 'cli' . DS . 'dependencies' . EXT;
Laravel\CLI\Command::run(array('migrate', 'application')); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-18T14:44:47.237

所以我深究了这一点，结果证明这是一个非常令人沮丧的错误。

在我使用的特定 v3.x 版本的 Laravel 中，任务不能被它们的小写/不区分大小写的名称识别。Github上的[这篇文章](https://github.com/chalien/lara_admin/issues/6)为我指明了正确的方向。

所以我重命名`Mytask.php`为`mytask.php`，任务执行得很好。

如果有人知道如何检查我正在运行的 Laravel 版本，以便其他人知道他们是否受到影响，请告诉我，我会更新这篇文章。

# css - Joomla。如何将任何模块/图像设置到特定位置？

> ID：13917797
> 
> 赞同：0
> 
> 时间：2012-12-17T16:15:03.560
> 
> 标签：css, facebook, joomla, module, position

我正在使用 Joomla 1.5 和免费模板。如何将任何组件/图像设置到特定位置？

现在我只能使用预定义的位置（左、右、上……等）

我下载了一个模块“Facebook like box”，我想将它显示在右侧页面的顶部。我不知道如何为模块创建 css 或者如果我想创建自定义位置我需要做什么。

谢谢你的回答。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T16:20:05.693

我认为你应该在开始之前阅读一下。检查这个链接。按照 joomla 1.5 的说明进行操作。

[http://docs.joomla.org/How_do_you_add_a_new_module_position%3F](http://docs.joomla.org/How_do_you_add_a_new_module_position%3F)

[http://forum.joomla.org/viewtopic.php?f=480&t=206206&start=60](http://forum.joomla.org/viewtopic.php?f=480&t=206206&start=60)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T19:24:58.153

首先，您必须首先在模板文件 index.php 中使用 this 定义一个位置。然后从后端创建此图像 facebook 模块并选择创建位置。

# boost - 从 Makefile 迁移到 CMake 时出错

> ID：13917798
> 
> 赞同：0
> 
> 时间：2012-12-17T16:15:05.837
> 
> 标签：boost, cmake

我有一个使用 Makefile 编译没有错误的库。现在我想切换到 CMake，但它不起作用。

源代码和 Makefiles 在[这里](https://bitbucket.org/skratochwil/canfestival-3-fm3/src/7758d60e9260/drivers?at=default)。从所有文件夹中，我保留了以下内容：`can_socket, can_virtual, timers_xeno, timers_rtpreempt, timers_unix, unix`.

这是我的 CMakeLists：

```
cmake_minimum_required(VERSION 2.4.6)
project(ikarus_arm_common C CXX)

#set the default path for built executables to the "bin" directory
set(EXECUTABLE_OUTPUT_PATH ${PROJECT_SOURCE_DIR}/bin)
#set the default path for built libraries to the "lib" directory
set(LIBRARY_OUTPUT_PATH ${PROJECT_SOURCE_DIR}/lib)

find_package(Boost COMPONENTS filesystem system serialization REQUIRED)

set(CAN_MASTER_INCLUDE_DIR include)

include_directories( ${Boost_INCLUDE_DIRS}  
    ${CAN_MASTER_INCLUDE_DIR} 
    ${CAN_MASTER_INCLUDE_DIR}/boost
    ${CAN_MASTER_INCLUDE_DIR}/timers_rtpreempt
    ${CAN_MASTER_INCLUDE_DIR}/timers_unix
    ${CAN_MASTER_INCLUDE_DIR}/timers_xeno
    ${CAN_MASTER_INCLUDE_DIR}/unix
    /usr/xenomai/include

)

set(CAN_FESTIVAL_CPP drivers/unix/unix.c
    drivers/timers_xeno/timers_xeno.c
    drivers/can_socket/can_socket.c
)

add_library(canfestival ${CAN_FESTIVAL_CPP}) 
```

编辑：

当我尝试编译时，它返回以下错误：

```
> $ make 
> [  9%] Building C object
> CMakeFiles/canfestival.dir/drivers/unix/unix.o 
> In file included from
> /home/luca/ArmIkarus/ikarus_arm_stack/ikarus_arm_common/include/can.h:28:0,
>     from /home/luca/ArmIkarus/ikarus_arm_stack/ikarus_arm_common/include/canDispatch.h:23,
>     from /home/luca/ArmIkarus/ikarus_arm_stack/ikarus_arm_common/drivers/unix/unix.c:36:
> /usr/include/boost/function.hpp:13:57: fatal error: functional: No
> such file or directory compilation terminated. make[2]: ***
> [CMakeFiles/canfestival.dir/drivers/unix/unix.o] Error 1 make[1]: ***
> [CMakeFiles/canfestival.dir/all] Error 2 make: *** [all] Error 2 
```

我想问题之一是由于某些文件具有扩展名`.c`但需要提升。如果我修改文件`unix.cpp and can_socket.cpp`编译的扩展名，则`timers_xeno`返回错误：

```
luca@luca-vmware:~/ArmIkarus/ikarus_arm_stack/ikarus_arm_common/build$ make
[  9%] Building CXX object CMakeFiles/canfestival.dir/drivers/unix/unix.o
[ 18%] Building CXX object CMakeFiles/canfestival.dir/drivers/timers_xeno/timers_xeno.o
/home/luca/ArmIkarus/ikarus_arm_stack/ikarus_arm_common/drivers/timers_xeno/timers_xeno.cpp: In function ‘void CreateReceiveTask(CAN_PORT, pthread_t*, void (*)(void*))’:
/home/luca/ArmIkarus/ikarus_arm_stack/ikarus_arm_common/drivers/timers_xeno/timers_xeno.cpp:250:75: error: cannot convert ‘pthread_t* {aka long unsigned int*}’ to ‘RT_TASK* {aka rt_task_placeholder*}’ for argument ‘1’ to ‘int rt_task_create(RT_TASK*, const char*, int, int, int)’
/home/luca/ArmIkarus/ikarus_arm_stack/ikarus_arm_common/drivers/timers_xeno/timers_xeno.cpp:256:70: error: cannot convert ‘pthread_t* {aka long unsigned int*}’ to ‘RT_TASK* {aka rt_task_placeholder*}’ for argument ‘1’ to ‘int rt_task_start(RT_TASK*, void (*)(void*), void*)’
/home/luca/ArmIkarus/ikarus_arm_stack/ikarus_arm_common/drivers/timers_xeno/timers_xeno.cpp: In function ‘void WaitReceiveTaskEnd(pthread_t*)’:
/home/luca/ArmIkarus/ikarus_arm_stack/ikarus_arm_common/drivers/timers_xeno/timers_xeno.cpp:270:38: error: cannot convert ‘pthread_t* {aka long unsigned int*}’ to ‘RT_TASK* {aka rt_task_placeholder*}’ for argument ‘1’ to ‘int rt_task_join(RT_TASK*)’
/home/luca/ArmIkarus/ikarus_arm_stack/ikarus_arm_common/drivers/timers_xeno/timers_xeno.cpp:273:36: error: cannot convert ‘pthread_t* {aka long unsigned int*}’ to ‘RT_TASK* {aka rt_task_placeholder*}’ for argument ‘1’ to ‘int rt_task_delete(RT_TASK*)’
make[2]: *** [CMakeFiles/canfestival.dir/drivers/timers_xeno/timers_xeno.o] Error 1
make[1]: *** [CMakeFiles/canfestival.dir/all] Error 2
make: *** [all] Error 2 
```

我该如何解决这个问题？

# memory-leaks - ManagementObjectCollection 计数属性泄漏？

> ID：13917803
> 
> 赞同：3
> 
> 时间：2012-12-17T16:15:35.120
> 
> 标签：memory-leaks, wmi, idisposable, enumerator

就在最近，我的几个同事帮助缩小了内存泄漏的范围。在微软的代码中发现了其中一个问题。这是来自反射器，表明枚举器会泄漏。

这里 count 属性调用 getenumerator 但从不检查 Idisposable：

```
public int Count
{
    get
    {
        if (this.isDisposed)
        {
            throw new ObjectDisposedException(name);
        }
        int num = 0;
        IEnumerator enumerator = this.GetEnumerator();
        while (enumerator.MoveNext())
        {
            num++;
        }
        return num;
    }
} 
```

这是 ManagementObjectCollection 的 GetEnumerator，只是为了显示返回的类型是 ManagementObjectEnumerator。

```
public ManagementObjectEnumerator GetEnumerator()
{
    if (this.isDisposed)
    {
        throw new ObjectDisposedException(name);
    }
    if (!this.options.Rewindable)
    {
        return new ManagementObjectEnumerator(this, this.enumWbem);
    }
    IEnumWbemClassObject ppEnum = null;
    int errorCode = 0;
    try
    {
        errorCode = this.scope.GetSecuredIEnumWbemClassObjectHandler(this.enumWbem).Clone_(ref ppEnum);
        if ((errorCode & 0x80000000L) == 0L)
        {
            errorCode = this.scope.GetSecuredIEnumWbemClassObjectHandler(ppEnum).Reset_();
        }
    }
    catch (COMException exception)
    {
        ManagementException.ThrowWithExtendedInfo(exception);
    }
    if ((errorCode & 0xfffff000L) == 0x80041000L)
    {
        ManagementException.ThrowWithExtendedInfo((ManagementStatus) errorCode);
    }
    else if ((errorCode & 0x80000000L) != 0L)
    {
        Marshal.ThrowExceptionForHR(errorCode);
    }
    return new ManagementObjectEnumerator(this, ppEnum);
} 
```

这表明它是一次性的：

```
public class ManagementObjectEnumerator : IEnumerator, IDisposable
{
    // Fields
    private bool atEndOfCollection;
    private uint cachedCount;
    private IWbemClassObjectFreeThreaded[] cachedObjects;
    private int cacheIndex;
    private ManagementObjectCollection collectionObject;
    private IEnumWbemClassObject enumWbem;
    private bool isDisposed;
    private static readonly string name;

    // Methods
    static ManagementObjectEnumerator();
    internal ManagementObjectEnumerator(ManagementObjectCollection collectionObject, IEnumWbemClassObject enumWbem);
    public void Dispose();
    protected override void Finalize();
    public bool MoveNext();
    public void Reset();

    // Properties
    public ManagementBaseObject Current { get; }
    object IEnumerator.Current { [TargetedPatchingOptOut("Performance critical to inline this type of method across NGen image boundaries")] get; }
} 
```

尽管 foreach 语句 (http://msdn.microsoft.com/en-us/library/aa664754(v=vs.71).aspx) 正确处理了一次性枚举数，但这并不意味着唯一的情况是枚举器将在 foreach 循环中使用。

我知道您可以跳过 count 属性并通过自己使用枚举器来滚动自己的机制来获取集合中的对象数量，但我的问题是这个泄漏了多少非托管内存？

# javascript - 在 Google App Engine 500 错误上，它应该是 200 而不是 500

> ID：13917804
> 
> 赞同：0
> 
> 时间：2012-12-17T16:15:38.583
> 
> 标签：javascript, google-app-engine, jsp, servlets

```
requestToken = function() {
    var getTokenURI = '/gettoken?userid=' + userid;
    var httpRequest = makeRequest(getTokenURI, true);

    httpRequest.onreadystatechange = function() {
        if (httpRequest.readyState == 4) {
            if (httpRequest.status == 200) {
                openChannel(httpRequest.responseText);
            } else {
                alert('ERROR: AJAX request status = ' + httpRequest.status);
            }
        }
    }
};

function makeRequest(url, async) {
    var httpRequest;
    if (window.XMLHttpRequest) {

        httpRequest = new XMLHttpRequest();

    } else if (window.ActiveXObject) {
        // IE
        try {

            httpRequest = new ActiveXObject("Msxml2.XMLHTTP");

        } catch (e) {
            try {

                httpRequest = new ActiveXObject("Microsoft.XMLHTTP");

            } catch (e) {
            }
        }
    }

    if (!httpRequest) {

        return false;
    }

    httpRequest.open('POST', url, async);
    httpRequest.send();

    return httpRequest;
} 
```

它在本地主机上运行良好......但在谷歌应用引擎上它 httpRequest.status 等于 500 并进入 else 语句。为什么？

登录谷歌应用引擎：

```
/getFriendList?userid=d 500 253ms 0kb Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/537.11 (KHTML, like Gecko) Chrome/23.0.1271.97 Safari/537.11
175.110.179.86 - - [17/Dec/2012:08:35:33 -0800] "POST /getFriendList?userid=d HTTP/1.1" 500 0 "http://faisalimmsngr.appspot.com/" "Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/537.11 (KHTML, like Gecko) Chrome/23.0.1271.97 Safari/537.11" "faisalimmsngr.appspot.com" ms=254 cpu_ms=110 instance=00c61b117caf2d11ca57d2a2296ccd0b902b038a
W 2012-12-17 08:35:33.272
Failed startup of context com.google.apphosting.utils.jetty.RuntimeAppEngineWebAppContext@10ff62a{/,/base/data/home/apps/s~faisalimmsngr/1.363934467542140431}
org.mortbay.util.MultiException[java.lang.UnsupportedClassVersionError: adv/web/mid/exam/FriendServlet : Unsupported major.minor version 51.0, java.lang.UnsupportedClassVersionError: adv/web/mid/exam/MessageServlet : Unsupported major.minor version 51.0, java.lang.UnsupportedClassVersionError: adv/web/mid/exam/TokenServlet : Unsupported major.minor version 51.0]
    at org.mortbay.jetty.servlet.ServletHandler.initialize(ServletHandler.java:656)
    at org.mortbay.jetty.servlet.Context.startContext(Context.java:140)
    at org.mortbay.jetty.webapp.WebAppContext.startContext(WebAppContext.java:1250)
    at org.mortbay.jetty.handler.ContextHandler.doStart(ContextHandler.java:517)
    at org.mortbay.jetty.webapp.WebAppContext.doStart(WebAppContext.java:467)
    at org.mortbay.component.AbstractLifeCycle.start(AbstractLifeCycle.java:50)
    at com.google.apphosting.runtime.jetty.AppVersionHandlerMap.createHandler(AppVersionHandlerMap.java:219)
    at com.google.apphosting.runtime.jetty.AppVersionHandlerMap.getHandler(AppVersionHandlerMap.java:194)
    at com.google.apphosting.runtime.jetty.JettyServletEngineAdapter.serviceRequest(JettyServletEngineAdapter.java:134)
    at com.google.apphosting.runtime.JavaRuntime$RequestRunnable.run(JavaRuntime.java:447)
    at com.google.tracing.TraceContext$TraceContextRunnable.runInContext(TraceContext.java:454)
    at com.google.tracing.TraceContext$TraceContextRunnable$1.run(TraceContext.java:461)
    at com.google.tracing.TraceContext.runInContext(TraceContext.java:703)
    at com.google.tracing.TraceContext$AbstractTraceContextCallback.runInInheritedContextNoUnref(TraceContext.java:338)
    at com.google.tracing.TraceContext$AbstractTraceContextCallback.runInInheritedContext(TraceContext.java:330)
    at com.google.tracing.TraceContext$TraceContextRunnable.run(TraceContext.java:458)
    at com.google.apphosting.runtime.ThreadGroupPool$PoolEntry.run(ThreadGroupPool.java:251)
    at java.lang.Thread.run(Thread.java:679)
java.lang.UnsupportedClassVersionError: adv/web/mid/exam/FriendServlet : Unsupported major.minor version 51.0
    at com.google.appengine.runtime.Request.process-c04431eac3a1f275(Request.java)
    at java.lang.ClassLoader.defineClass1(Native Method)
    at java.lang.ClassLoader.defineClass(ClassLoader.java:634)
    at java.security.SecureClassLoader.defineClass(SecureClassLoader.java:142)
    at java.net.URLClassLoader.defineClass(URLClassLoader.java:277)
    at sun.reflect.GeneratedMethodAccessor5.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:616)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:266)
    at org.mortbay.util.Loader.loadClass(Loader.java:91)
    at org.mortbay.util.Loader.loadClass(Loader.java:71)
    at org.mortbay.jetty.servlet.Holder.doStart(Holder.java:73)
    at org.mortbay.jetty.servlet.ServletHolder.doStart(ServletHolder.java:242)
    at org.mortbay.component.AbstractLifeCycle.start(AbstractLifeCycle.java:50)
    at org.mortbay.jetty.servlet.ServletHandler.initialize(ServletHandler.java:685)
    at org.mortbay.jetty.servlet.Context.startContext(Context.java:140)
    at org.mortbay.jetty.webapp.WebAppContext.startContext(WebAppContext.java:1250)
    at org.mortbay.jetty.handler.ContextHandler.doStart(ContextHandler.java:517)
    at org.mortbay.jetty.webapp.WebAppContext.doStart(WebAppContext.java:467)
    at org.mortbay.component.AbstractLifeCycle.start(AbstractLifeCycle.java:50)
    at com.google.tracing.TraceContext$TraceContextRunnable.runInContext(TraceContext.java:454)
    at com.google.tracing.TraceContext$TraceContextRunnable$1.run(TraceContext.java:461)
    at com.google.tracing.TraceContext.runInContext(TraceContext.java:703)
    at com.google.tracing.TraceContext$AbstractTraceContextCallback.runInInheritedContextNoUnref(TraceContext.java:338)
    at com.google.tracing.TraceContext$AbstractTraceContextCallback.runInInheritedContext(TraceContext.java:330)
    at com.google.tracing.TraceContext$TraceContextRunnable.run(TraceContext.java:458)
    at java.lang.Thread.run(Thread.java:679) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T18:00:50.933

发生这种情况是因为您使用的是 JDK 7。您应该使用 JDK 6。

# objective-c - 检查文件夹是否存在

> ID：13917810
> 
> 赞同：-6
> 
> 时间：2012-12-17T16:16:00.390
> 
> 标签：objective-c, ios

有人使用这种 NSFileManager 方法吗？

```
- (BOOL)fileExistsAtPath:(NSString *)path isDirectory:(BOOL *)isDirectory; 
```

如何使用此方法检查文件夹是否存在？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T16:18:17.573

使用`NSFileManager`'s`fileExistsAtPath:isDirectory:`方法。[在此处](http://developer.apple.com/library/mac/documentation/Cocoa/Reference/Foundation/Classes/NSFileManager_Class/Reference/Reference.html#//apple_ref/occ/instm/NSFileManager/fileExistsAtPath%3aisDirectory%3a)查看 Apple 的文档。

或者根据您的示例，您也可以使用以下内容

查看此方法签名的[文档：](http://developer.apple.com/library/mac/documentation/Cocoa/Reference/Foundation/Classes/NSFileManager_Class/Reference/Reference.html#//apple_ref/occ/instm/NSFileManager/fileExistsAtPath%3aisDirectory%3a)

```
- (BOOL)fileExistsAtPath:(NSString *)path isDirectory:(BOOL *)isDirectory 
```

您需要一个指向 BOOL 变量的指针作为参数，而不是 BOOL 本身。NSFileManager 将记录文件是否在该变量中的目录。例如：

```
BOOL isDir;
BOOL exists = [fm fileExistsAtPath:path isDirectory:&isDir];
if (exists) {
    /* file exists */
    if (isDir) {
        /* file is a directory */
    }
 } 
```

还要从了解低级文件管理编程主题开始

1) NSFileManager 当前目录[路径](http://developer.apple.com/iphone/library/documentation/Cocoa/Reference/Foundation/Classes/NSFileManager_Class/Reference/Reference.html#//apple_ref/occ/instm/NSFileManager/currentDirectoryPath)

3) NSFileManager[文件ExistsAtPath:isDirectory:](http://developer.apple.com/iphone/library/documentation/Cocoa/Reference/Foundation/Classes/NSFileManager_Class/Reference/Reference.html)

# android - Android模拟器发送但不接收TCP

> ID：13917814
> 
> 赞同：0
> 
> 时间：2012-12-17T16:16:14.837
> 
> 标签：android, tcp, android-networking

为什么 android 模拟器连接到我的 PC 上运行的套接字服务器，但没有收到任何从同一行发回的消息？

**android 应用程序成功连接到我的192.168.1.33**端口**2012**上的 C# 套接字服务器，消息可以从 android 发送到服务器没有问题。使用相同的套接字连接，我通过套接字向 android 发送一条消息 - 但在 android 端没有收到任何消息。

我已经按照其他地方的建议尝试了各种侦听/连接 IP 地址（10.0.2.2、10.0.2.15）的组合，由于某种原因，*连接到 127.0.0.1 甚至似乎根本不允许连接到我的 C# 套接字服务器*。

我尝试使用以下方式在 android 上进行端口转发：

```
 Telnet o localhost 5554
    redir add tcp:2012:2012 
```

这样我的 PC 上的端口 2012 映射到模拟器本身的端口 2012，但这并不能解决问题。

关于哪个是正确的 IP 地址和要使用的端口（以及端口转发的东西）的信息令人困惑......有人知道如何让它工作吗？

**注意：**消息在我的 C# 客户端和服务器应用程序之间来回发送没有问题。它只是在 android 作为客户端时无法正常工作

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T11:50:48.657

解决方案与连接或端口无关。问题在于我发送回安卓设备的数据。

套接字需要换行符才能将信息刷新到设备：

```
 socket.Send(message + "\n"); 
```

# knockout-2.0 - How can i update one bound value when another value changes?

> ID：13917823
> 
> 赞同：0
> 
> 时间：2012-12-17T16:16:37.147
> 
> 标签：knockout-2.0

I have a smiple select control bound to model that contains 2 values: id -the value i want to bind to selected index, and cities= array i want ooptions populated from. here is the JS:

```
 var VM=function ViewModel() {
      self=this;

        this.id = ko.observable(102);
        this.cities=ko.observableArray([]); 

        this.getCities=function(){ 
              self.cities( [{"Key":"-1","Value":"choose city"},{"Key":"100","Value":"leningrad"},   {"Key":"102","Value":"moscow"}]); 
        } ;
    }

    var vm=new VM();
    ko.applyBindings(vm); 
```

I want cities to be populted after user clicked button, but the selected city must stay Moscow (because initialy the "id" was 102)

here is my HTML:

```
 <!DOCTYPE html>
    <html>
    <head>
    <script src="http://cloud.github.com/downloads/SteveSanderson/knockout/knockout-2.1.0.js"></script>
    <meta charset=utf-8 />
    <title>JS Bin</title>
    </head>
    <body>
      <select data-bind="options:cities,optionsText:'Value',optionsValue:'Key',value:id"></select>

      <button data-bind="click:getCities">get cities</button>
    </body>
    </html> 
```

My problem is that selected index got lost after cities is loaded Please help Thanks

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T17:04:39.720

我发现我的问题出在哪里：“值”绑定是两个方向的，所以当第一次绑定到不带选项的选择时，“id”变成了-1。当我更改为：

```
 <select data-bind="options:cities,optionsText:'Value',optionsValue:'Key'"></select> 
```

并补充说：

```
 this.getCities=function(){ 
          self.cities( [{"Key":"-1","Value":"choose city"},{"Key":"100","Value":"leningrad"},   {"Key":"102","Value":"moscow"}]
                     ); 

      $('select').val(self.id());
    } ; 
```

事情开始起作用了，但现在的问题是如果用户在选择填充后选择某个城市，如何收集价值：我的解决方案是将选择更改附加到不显眼的 jquery 处理程序：

```
 var VM=function ViewModel() {
          self=this;

            this.id = ko.observable(102);
            this.cities=ko.observableArray([]); 

            this.getCities=function(){ 
                  self.cities( [{"Key":"-1","Value":"choose city"},{"Key":"100","Value":"leningrad"},   {"Key":"102","Value":"moscow"}]
                             ); 

              $('select').val(self.id());
            } ;

        };
    var f=function(){
      vm.id($('select').val())

    }
        var vm=new VM();
        ko.applyBindings(vm);
    $('select').change(f) 
```

我希望它会帮助遇到我的问题的人......

# javascript - 检查重复 id 的 Html javascript 代码

> ID：13917825
> 
> 赞同：5
> 
> 时间：2012-12-17T16:16:39.003
> 
> 标签：javascript, html, dom

如何在javascript中检查包含重复ID的标签？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-12-17T16:23:02.000

试试这个：

```
var nodes = document.querySelectorAll('[id]');
var ids = {};
var totalNodes = nodes.length;

for(var i=0; i<totalNodes; i++) {
    var currentId = nodes[i].id ? nodes[i].id : "undefined";
    if(isNaN(ids[currentId])) {
        ids[currentId] = 0;
    }                 
    ids[currentId]++;
}

console.log(ids); 
```

[http://jsfiddle.net/sekVp/1](http://jsfiddle.net/sekVp/1)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-12-16T04:25:53.807

这是实现与批准答案相同的更短的方法（计算 ID 的出现次数）：

```
const ids = Array.from(document.querySelectorAll('[id]'))
  .map(v => v.id)
  .reduce((acc, v) => { acc[v] = (acc[v] || 0) + 1; return acc }, {});
console.log(ids); 
```

如果只需要重复 ID 列表，则可以过滤条目：

```
Object.entries(ids)
  .filter(([key, value]) => value > 1)
  .map(([ key, value]) => key) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-12-16T05:01:59.787

我认为您真正需要的是在使用它之前检查该 id 或命名空间是否已经被使用，而不是在使用它之后检查您是否犯了错误......

我早在 2006 年左右就已经编写了这个函数。可能更早它会检查该 id 是否已经被占用。

（它做的更多，但这是它最基本的用途）

```
function isNS( arg, f ) { 
    if(typeof arg!="string")throw( 'TYPE_ERROR:"string required"');

    var i, a = arg.split("."), c = this, s = [], b, r;
    f = f || 0;

    for( i in a ) {
        c ? a[i] in c ? ( c = c[ a[i] ], s.push( a[i] ), b = !0 ) : 
    b = !1 : 0;
    }
        r = [ b, c, s, a, arg ];
        return f < 0 ? r : r[+f||f]; 
 }
 ;
 console.log( isNS("par") )
```

```
<p id=par>Paragraf with id "par"
```

# twitter - How to integrate Twitter on Android 4.0\. application

> ID：13917828
> 
> 赞同：0
> 
> 时间：2012-12-17T16:16:45.463
> 
> 标签：twitter, android-4.0-ice-cream-sandwich

I just developed on twitter integration app for android 2.3 using twitter4j, but now I want to use this app for android 4.0 and I have to change my app because it dosen't work,

I want to import mu currentUset variables like: screen_name, user_id, and profile_image_url too! And then i just want to import my followers and followings.

Can someone help me please? I was desesperated! I was goggling but I don't have any answer about this.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-02-20T12:23:23.047

您可以使用[Twitter Helper](https://github.com/krazykira/Twitter-Helper)将 Twitter 集成到您的 Android 应用程序中。它非常简单。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T10:39:46.253

将此代码添加到您的 main_activity

```
private TwitterApp mTwitter;
private static final String CONSUMER_KEY = "your consumer key"; 
private static final String CONSUMER_SECRET = "your consumer secret key"; 

private enum FROM {
    TWITTER_POST, TWITTER_LOGIN
};

private enum MESSAGE {
    SUCCESS, DUPLICATE, FAILED, CANCELLED
};

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    mTwitter = new TwitterApp(this, CONSUMER_KEY, CONSUMER_SECRET);
}

public void onClick(View v) {
    mTwitter.setListener(mTwLoginDialogListener);
    mTwitter.resetAccessToken();
    if (mTwitter.hasAccessToken() == true) {
        try {
            mTwitter.updateStatus(TwitterApp.MESSAGE);
            postAsToast(FROM.TWITTER_POST, MESSAGE.SUCCESS);
        } catch (Exception e) {
            if (e.getMessage().toString().contains("duplicate")) {
                postAsToast(FROM.TWITTER_POST, MESSAGE.DUPLICATE);
            }
            e.printStackTrace();
        }
        mTwitter.resetAccessToken();
    } else {
        mTwitter.authorize();
    }
}

private void postAsToast(FROM twitterPost, MESSAGE success) {
    switch (twitterPost) {
    case TWITTER_LOGIN:
        switch (success) {
        case SUCCESS:
            Toast.makeText(this, "Login Successful", Toast.LENGTH_LONG)
                    .show();
            break;
        case FAILED:
            Toast.makeText(this, "Login Failed", Toast.LENGTH_LONG).show();
        default:
            break;
        }
        break;
    case TWITTER_POST:
        switch (success) {
        case SUCCESS:
            Toast.makeText(this, "Posted Successfully", Toast.LENGTH_LONG)
                    .show();
            break;
        case FAILED:
            Toast.makeText(this, "Posting Failed", Toast.LENGTH_LONG)
                    .show();
            break;
        case DUPLICATE:
            Toast.makeText(this,
                    "Posting Failed because of duplicate message...",
                    Toast.LENGTH_LONG).show();
        default:
            break;
        }
        break;
    }
}

private TwDialogListener mTwLoginDialogListener = new TwDialogListener() {

    @Override
    public void onError(String value) {
        postAsToast(FROM.TWITTER_LOGIN, MESSAGE.FAILED);
        Log.e("TWITTER", value);
        mTwitter.resetAccessToken();
    }

    @Override
    public void onComplete(String value) {
        try {
            mTwitter.updateStatus(TwitterApp.MESSAGE);
            postAsToast(FROM.TWITTER_POST, MESSAGE.SUCCESS);
        } catch (Exception e) {
            if (e.getMessage().toString().contains("duplicate")) {
                postAsToast(FROM.TWITTER_POST, MESSAGE.DUPLICATE);
            }
            e.printStackTrace();
        }
        mTwitter.resetAccessToken();
    }
}; 
```

你可以从[这里](https://stackoverflow.com/questions/13917828/how-to-integrate-twitter-on-android-4-0-application)开始 希望它对你有用

# jsp - simple jsp file using wcm library

> ID：13917829
> 
> 赞同：0
> 
> 时间：2012-12-17T16:16:46.273
> 
> 标签：jsp, wcm

im new to using wcm library in jsp files and am a little stuck. I created a new element ("Publication Date") in the authoring templates im using and a custom jsp component which i am referencing from the atom call to generate the "updated date" field. What im trying to do is simply check to see if the element i added is present is not null, if it is then use the updated date field, if its not then use the "Publication Date" element.

I have tried:

```
DocumentIdIterator docIdsIter = workspace.findContentByPath(request.getRequestURI());
if (docIdsIter.hasNext()) {
    Document doc = (Document)workspace.getById(docIdsIter.nextId());
                    // Cast to Content to retrieve the Publication date from the date component
    Content myContent = (Content)doc;
                    // Get the Publication date
    if (myContent.hasComponent("Publication Date")){
        out.write("I am getting here");
        DateComponent dateComponent =     (DateComponent)myContent.getComponent("Publication Date");
        if (dateComponent != null){
             out.write(dateComponent.toString());
        } else {
            //out.write(last modified date);
        } 
   } else {
        //out.write(last modified date);
   } 
```

But im not even getting inside the first if condition. I feel that the has goto be an easier way to simply check if a element exists, any help would be appreceated.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-28T20:30:14.073

您可以使用 [Property] 标签从内容项中提取日期。

`[Property context="autofill" type="content" format="DATE_TIME_SHORT" field="lastmodifieddate"]`

可能与您正在寻找的东西相似。

有很多不同的选项可用于格式和字段来获取您想要的日期。

format="DATE_SHORT"
format="DATE_MEDIUM"
format="DATE_LONG"
format="DATE_FULL"
format="DATE_TIME_SHORT"
format="DATE_TIME_MEDIUM"
format="DATE_TIME_LONG"
format="DATE_TIME_FULL"
format="TIME_SHORT"
format="TIME_MEDIUM"
格式="TIME_LONG"
格式="TIME_FULL"

lastmodified - 显示最后修改日期和最后更改消息。
lastmodifieddate - 显示最后修改日期。
创建 - 显示创建日期。
creationdate - 显示创建日期。
lastmodifier - 显示上次修改项目的用户的名称。
creator - 显示创建项目的用户的名称。

# c# - C# 使用 Java SOAP 服务 WSSecurity

> ID：13917831
> 
> 赞同：2
> 
> 时间：2012-12-17T16:16:46.587
> 
> 标签：c#, java, soap, aes, ws-security

我正在尝试使用基于 Java 的 Web 服务，每次尝试连接时都会出现这样的错误：

> org.apache.ws.security.WSSecurityException：无法对安全令牌进行身份验证或授权；

服务管理员说我应该发送用他发送给我的 AES 密钥加密的密码。

到目前为止，这就是我在 web.config 上的内容

```
<client>
      <endpoint address="http://webservicer2:8088/billing/"
        binding="basicHttpBinding" bindingConfiguration="ServiceBill3"
        contract="ServiceBilling.ServiceBillingContract" name="ServiceBill3">
        <headers>
          <wsse:Security soapenv:actor="http://schemas.xmlsoap.org/soap/actor/next"
            soapenv:mustUnderstand="1" xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd"
            xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/">
            <wsse:UsernameToken wsu:Id="UsernameToken-1" xmlns:wsu="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd">
              <wsse:Username>ohmygod</wsse:Username>
              <wsse:Password Type="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-username-token-profile-1.0#PasswordText">bbqsauce</wsse:Password>
            </wsse:UsernameToken>
          </wsse:Security>
        </headers>
      </endpoint>
    </client> 
```

当我尝试在该服务上执行任何方法时会发生错误。我应该修改什么来添加我的密钥？任何人？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T16:35:35.540

不要将 BasicHTTPBinding 与硬编码的标头一起使用。请改用 WCF 中的内置 WS-Security 支持。请参阅[http://msdn.microsoft.com/en-us/library/vstudio/ms731058(v=vs.90).aspx](http://msdn.microsoft.com/en-us/library/vstudio/ms731058(v=vs.90).aspx)。此外，请查看使用服务 WSDL 时生成的配置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T16:45:54.120

尝试在 wsse:Password 中输入密码

```
http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-username-token-profile-1.0#PasswordDigest 
```

# sql - Portable idiom to determine which many-to-many relation was traversed?

> ID：13917836
> 
> 赞同：0
> 
> 时间：2012-12-17T16:17:09.393
> 
> 标签：sql, postgresql, portability

A common model: `lords` have `peons`, and both `lords` and `peons` have `things`. `things` can be owned by one or more `peons` *and* `lords`. To display all `things` owned directly or indirectly by a lord:

```
SELECT lords.id AS lord_id,
       peons.id AS peon_id,
       things.id AS thing_id
  FROM lords
  LEFT JOIN lords_things ON
       lords.id = lords_things.lord_id
  LEFT JOIN peons ON
       lords.id = peons.lord_id
  LEFT JOIN peons_things ON
       peons.id = peons_things.peon_id
  JOIN things ON
       lords_things.thing_id = things.id OR
       peons_things.thing_id = things.id
 WHERE lords.id = 123 
```

Now there are two problems:

1.  The code will have to look at which of `lord_id` and `peon_id` is non-`NULL` to determine which level the thing is connected to. There are lots of ways to solve this - For example, in Oracle you could say

    ```
    SELECT NVL2(things_lords.id, 'lord', 'peon') as level 
    ```

    and in SQL Server you should be able to say

    ```
    SELECT CASE WHEN things_lords.id IS NULL THEN 'peon' ELSE 'lord' END AS level 
    ```

    but I don't think either of these are portable (at least to PostgreSQL). A different approach would use a `UNION`:

    ```
    SELECT lords.id AS owner_id,
           'lord' AS level,
           things.id AS thing_id
      FROM lords
      JOIN lords_things ON
           lords.id = lords_things.lord_id
      JOIN things ON
           lords_things.thing_id = things.id
     WHERE lords.id = 123
    UNION
    SELECT peons.id AS owner_id,
           'peon' AS type,
           things.id AS thing_id
      FROM lords
      JOIN peons ON
           lords.id = peons.lord_id
      JOIN peons_things ON
           peons.id = peons_things.peon_id
      JOIN things ON
           peons_things.thing_id = things.id
     WHERE lords.id = 123 
    ```

    this is quite ugly since it duplicates almost all the code. Is there a more elegant *portable* solution for this?

2.  Some `things` may show up more than once. This is not a problem in my application, but mentioned for completeness.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T16:37:28.883

该`case`语句*可*移植到所有数据库引擎（至少所有相对较新的引擎，MS Access 除外）。从网上看，Postgres 至少从版本 7 开始就支持 case 语句。

因此，请使用案例版本。

至于完整性。你想要这样的东西：

```
select things.id,
       (case when max(lords.id) is not null and max(peons.id) is not null then 'BOTH'
             when max(lords.id) is not null then 'LORDS'
             when max(peons.id) is not null then 'PEONS'
             else 'Ooops!'
        end) as wherefrom
. . . 
group by things.id 
```

也就是说，做一个聚合并使用聚合函数来总结你想要的。

# javascript - calling javascript function after pop up window close

> ID：13917839
> 
> 赞同：1
> 
> 时间：2012-12-17T16:17:17.833
> 
> 标签：javascript

> **Possible Duplicate:**
> [How to run function of parent window when child window closes?](https://stackoverflow.com/questions/1777864/how-to-run-function-of-parent-window-when-child-window-closes)

Hi i have a link in a main page. when users click the link, it will open a popup window.
**i need to call a javascript function in a main page after close the popup window how to do this?**
can any one help me? thanks in advance.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T16:19:22.553

```
window.onbeforeunload = function() {
    window.opener.functionName();
} 
```

# html - 如何用css旋转文本？当前架构不支持转换？

> ID：13917840
> 
> 赞同：0
> 
> 时间：2012-12-17T16:17:24.517
> 
> 标签：html, css, sharepoint, sharepoint-2010, transform

所以我正在尝试旋转一些文本以在 SharePoint 网页上的面板（滑块）上使用。

```
.rot-text{
  -webkit-transform: rotate(-90deg);
  -moz-transform: rotate(-90deg);
  -ms-transform: rotate(-90deg);
  -o-transform: rotate(-90deg);
  transform: rotate(-90deg);
} 
```

SPS2010 架构不支持？有没有办法用旧方法得到同样的东西？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T23:22:01.727

您可以创建一个自定义 CSS 文件并将其添加为对用于格式化您的站点的母版页的引用。

Erik Swenson 在这里对 CSS 结构的各个部分进行了很好的概述：

[母版页中的 SharePoint 2010 CSS 引用](http://erikswenson.blogspot.com/2010/01/sharepoint-2010-css-references-in.html)

最后，这里有一个来自 Microsoft 的页面，介绍如何使用母版页来自定义您的网站：

[自定义母版页以品牌化您的网站](http://office.microsoft.com/en-us/sharepoint-designer-help/customize-a-master-page-to-brand-your-site-HA102449505.aspx)

# c++ - 如何最好地重载运算符 < > <= >= 但只写一两个比较函数？

> ID：13917848
> 
> 赞同：22
> 
> 时间：2012-12-17T16:17:51.310
> 
> 标签：c++, comparison, operator-overloading

我有一个属性类型为 std::string 的类。我想通过比较属性为类提供一些比较运算符函数，如 <、>、==、<= 和 >=。

我的问题是：任何简单的方法或工具

（1）只写一两个函数，比如一个for operator <（和==），其他的可以自动生成。

(2) 甚至更简单，因为类比较取决于其类型的属性，`std::string`其比较功能已经提供。

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-12-17T16:20:51.123

# 奇怪地重复出现的模板模式

在这种情况下，您提供了一个简单的基类，它实现了所有需要的运算符并简单地从它继承：

```
template <class T>
struct implement_relational_operators{
    friend bool operator<=(const T & a,const T & b){ return a < b || a == b; }
    friend bool operator>(const T &  a, const T & b){ return !(a <= b); }
    friend bool operator!=(const T &  a, const T & b){ return !(a == b);}
    friend bool operator>=(const T &  a, const T & b){ return !(a < b); }
};

template <class T>
struct scalar : public implement_relational_operators<scalar<T> >{
    T value;
    bool operator<(const scalar& o) const { return value < o.value;}
    bool operator==(const scalar& o) const { return value == o.value;}
}; 
```

这不具有`std::rel_ops`（见下文）的缺点。但是，您仍然需要实现`operator<`and `operator==`。使用了类似的技巧[`boost`](http://www.boost.org/doc/libs/1_57_0/boost/operators.hpp)。

C++20`<=>`可能会进一步改善这种情况（见下文）。

# `std::rel_ops`（在 C++20 中已弃用）

`std::rel_ops`提供基于`<`an的附加操作`==`，因此您只需要编写两个运算符。

但是，它将在 C++20 中被弃用，在那里[`a <=> b`](http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2017/p0768r1.pdf)将被混入其中。

## 要求

您只需要相等 ( `operator=`) 和小于 ( `operator<`) 比较运算符。其余的可以用 自动生成[`std::rel_ops`](http://en.cppreference.com/w/cpp/utility/rel_ops/operator_cmp)，因为以下成立：

```
a != b equal to !(a == b)
a <= b equal to (a < b) || (a == b)
a >= b equal to !(a < b)
a >  b equal to !(a <= b) 
```

请注意，这些比手写效率低。

## 警告

但是，由于自己提供这些运算符很容易，因此您应该付出额外的努力并编写它们。[正如R. Martinho Fernandes](https://stackoverflow.com/questions/13917848/how-to-best-overload-operator-but-only-write-one-or-two-comparison-fun#comment19184363_13917897)所提到的，它们也有一些缺点：

> 请注意，[它们] 将无法正常工作，除非您：
> 
> 1.  添加`using namespace std::rel_ops`您使用运算符的每个上下文；或者
> 2.  添加你的类的命名空间`using::operator!=; using::operator<=; using::operator>=; using::operator>;`（`using namespace std::rel_ops`在你的类的命名空间中是不可接受的，因为它不会被 ADL 拾取）。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-12-17T16:33:19.653

您可以使用`std::rel_ops`，但这是错误的。这是一个不属于任何人的工具包的大锤。

通常的方法是定义`operator==`和`operator<`了解类的细节。剩下的四个运算符可以写成：

`a != b`是`!(a == b)`

`a <= b`是`!(b < a)`

`a > b`是`b < a`

`a >= b`是`!(a < b)`

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-12-17T16:29:18.463

一种选择是使用 CRTP，例如 Barton Nackman 技巧：

[https://en.wikipedia.org/wiki/Curiously_recurring_template_pattern](https://en.wikipedia.org/wiki/Curiously_recurring_template_pattern)

[https://en.wikipedia.org/wiki/Barton%E2%80%93Nackman_trick](https://en.wikipedia.org/wiki/Barton%E2%80%93Nackman_trick)

```
// A class template to express an equality comparison interface.
template<typename T> class equal_comparable {
    friend bool operator==(T const &a, T const &b) { return  a.equal_to(b); }
    friend bool operator!=(T const &a, T const &b) { return !a.equal_to(b); }
};

class value_type
 // Class value_type wants to have == and !=, so it derives from
 // equal_comparable with itself as argument (which is the CRTP).
 : private equal_comparable<value_type> {
  public:
    bool equal_to(value_type const& rhs) const; // to be defined
}; 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2018-01-18T06:28:03.290

（如果您可以控制类）正确的方法是使用 Boost.Operators [http://www.boost.org/doc/libs/1_66_0/libs/utility/operators.htm](http://www.boost.org/doc/libs/1_66_0/libs/utility/operators.htm)

```
#include<cassert>
#include<boost/operators.hpp>

struct A : boost::totally_ordered<A> // implies equality-comparable and less-than-comparable
{
    int val_;
    A(int const& v) : val_{v}{}
    bool operator==(A const& other) const{return other.val_ == val_;}
    bool operator<(A const& other) const{return other.val_ < val_;}
};

int main(){
    A a1{5};
    A a2{7};

    assert(!(a1 == a2)); // user defined operator==
    assert(a1 != a2);    // automatically defined !=
    assert(a1 < a2);     // user defined operator<
    assert(a2 > a1);     // automatically defined >
    assert(a2 >= a1);    // automatically defined >=
    assert(a1 <= a2);    // automatically defined <=
} 
```

Boost.Operators 使用 CRTP（请参阅其他答案），但会为您完成所有工作。

我刚刚从其他答案中了解到`std::rel_ops`，但是我过早的结论是它不是很有用。Boost.Operators 似乎更强大且可定制，尽管它有点侵入性。

请注意，您必须*知道*要实现哪些操作（在这种情况下是`operator==`and `operator<`。但*原则上*您可以只定义`operator!=`and `operator>`。自动“推导”其他运算符会很酷，请参阅[C++ 中的非常自动的运算符生成器](https://stackoverflow.com/questions/31156577/very-automatic-operator-generator-in-c)

* * *

这是另一个示例，其中只有一个操作员就足够了。（但可能效率低下？）

```
#include<boost/operators.hpp>

struct A : boost::totally_ordered<A>, boost::equivalent<A>{
    int val_;
    A(int const& v) : val_{v}{}
    bool operator<(A const& other) const{return other.val_ < val_;}
}; 
```

# php - php - 在代码执行之前发送 HTTP 状态

> ID：13917855
> 
> 赞同：0
> 
> 时间：2012-12-17T16:18:02.543
> 
> 标签：php, http, http-headers

我想在其余代码在 php 脚本中执行之前将 http 状态（200 OK）发送到调用脚本。对于发送状态码，我使用的是 HTTP/1.1 200 OK，但它在整个脚本执行完成后发送状态，这使得调用脚本等待。我不确定这是否可能。有什么帮助吗？

详细：假设我有两个脚本，a.php 和 b.php。a.php 正在调用 b.php 并等待 http 状态，如果是 200 则继续执行其他操作。我希望 b.php 脚本在被调用后立即发送回 200 响应，然后继续使用自己的代码。

谢谢！

编辑：阅读评论后，我明白我想做的是一个坏主意。但是，让我说一下我为什么这么想，并且可以做类似的事情。

a.php 将有一个 web 界面，人们可以在其中上传他们的图像，上传完成后 a.php 调用 b.php 使用这些图像进行一些处理。我希望 a.php 继续而不是挂起/等待 b.php 完成，以防 b.php 失败，我想我可能能够“推送”一个错误，以便 a.php 可以提示用户失败. 应该使用不同的线程吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T16:50:45.277

我正在考虑 AJAX 或 XMLRPC，但正如@Andrew 所说，php 不能那样工作.. NodeJS 确实是一个不错的选择......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T16:25:06.527

嗯，听起来你最好使用允许基于套接字的连接的东西。查看 NodeJS。我认为 PHP 也可能支持某种形式的基于套接字的连接。您尝试使用“flush”执行的操作实际上是非常糟糕的做法。PHP 不是为多个有效负载而设计的，如果您使用 AJAX，您将遇到一堆问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-08-06T16:36:26.257

PHP当然可以做到，但它有点棘手。

```
ignore_user_abort(true);
header("Content-Length: 0");
header("Connection: Close");
flush();
session_write_close();

// do something that takes very long 
```

这是您需要的最少代码。如果您没有会话，您可以取消最后一次通话。

一旦你关闭了连接，你就不能发送更新，所以如果你想做一些错误报告，你必须找到另一种方法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-17T16:21:16.140

你有这样的功能`flush()`做你需要的，但有一些警告。阅读更多： http: [//php.net/manual/en/function.flush.php](http://php.net/manual/en/function.flush.php)。

由于您是在代码中调用 PHP 脚本，因此您不必担心列出的浏览器问题。但是如果启用了 mod_gzip 之类的东西，这是不可能的。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-17T16:22:34.933

如果您的 a.php 希望 b.php 异步运行，您可以考虑使用 cURL POST 方法来启动脚本。a.php 可以设置超时时间为 1 秒，cURL 会话将停止。b.php 将继续运行，而 a.php 也将继续运行。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-17T16:36:29.487

> a.php 正在调用 b.php 并等待 http 状态，如果是 200 则继续执行其他操作

简短的回答是您无法控制网络服务器何时刷新它的缓冲区。因此，您需要绕过网络服务器来调用 b.php。问题是，如果您通过 exec / system / etc 调用它，那么 b.hpp 将成为 a.php 的子进程 -如果 b.php 需要花费任何时间才能完成，[这是一个非常糟糕的主意。](http://symcbean.blogspot.co.uk/2010/02/php-and-long-running-processes.html)

鉴于您需要采取完全不同的策略来实现问题的解决方案，因此了解您*为什么希望它在执行任何有用的工作**之前*发出无条件的 200 状态非常重要（当它最有可能在它有用的时候失败*时*）工作）。

根据您提供的信息（这不是很多），实现这一点的唯一可靠方法是通过消息队列（以及在守护程序中运行的自定义订阅者） - 假设您可以将成功的入队操作替换为返回状态码。但这有它自己的复杂性。

# postgresql - 如果在包含架构上授予 USAGE 权限，Postgresql 将忽略缺少 EXECUTE 权限

> ID：13917859
> 
> 赞同：1
> 
> 时间：2012-12-17T16:18:16.197
> 
> 标签：postgresql, grant

来自[http://www.postgresql.org/docs/9.1/static/sql-grant.html](http://www.postgresql.org/docs/9.1/static/sql-grant.html)：

> 用法
> 
> ...
> 
> **对于模式，允许访问包含在指定模式中的对象（假设也满足对象自身的特权要求）**。本质上，这允许被授权者在模式中“查找”对象。如果没有此权限，仍然可以查看对象名称，例如通过查询系统表。...
> 
> ...

但是，通过运行以下脚本`psql`似乎表明，虽然缺少 SELECT 权限会导致错误，但缺少 EXECUTE 权限不会，这与文档相矛盾，因为不满足“自己的权限要求”。

```
CREATE DATABASE testdb WITH OWNER postgres ENCODING 'UTF8';
\connect testdb
CREATE ROLE testrole;
CREATE SCHEMA testschema;
GRANT USAGE ON SCHEMA testschema TO testrole;
SET search_path TO testschema;

CREATE FUNCTION testfunc ()
RETURNS VOID
AS $$
BEGIN
  RAISE NOTICE 'IN TESTFUNC';
  RAISE NOTICE 'Current user: %', current_user;
END;
$$
LANGUAGE plpgsql;

CREATE TABLE testtable
(
  testrow INT
);

INSERT INTO testtable (testrow) VALUES (1), (2), (3);

SET ROLE testrole;

SELECT testfunc();
SELECT * FROM testtable;

RESET ROLE; 
```

**输出：**

```
$ psql -f usage.sql
CREATE DATABASE
You are now connected to database "testdb" as user "postgres".
CREATE ROLE
CREATE SCHEMA
GRANT
SET
CREATE FUNCTION
CREATE TABLE
INSERT 0 3
SET
psql:usage.sql:27: NOTICE:  IN TESTFUNC
psql:usage.sql:27: NOTICE:  Current user: testrole
 testfunc 
----------

(1 row)

psql:usage.sql:28: ERROR:  permission denied for relation testtable
RESET 
```

我是否遗漏了某些内容或错误地使用了权限？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T19:00:28.140

架构在这里并不重要，您看到的是函数的默认执行权限。[考虑以下CREATE FUNCTION 文档](http://www.postgresql.org/docs/current/static/sql-createfunction.html)的摘录：

> 要记住的另一点是，默认情况下，为新创建的函数授予 PUBLIC 执行权限（有关更多信息，请参阅 GRANT）。您经常希望将安全定义器功能的使用限制为仅限于某些用户。为此，您必须撤销默认的 PUBLIC 权限，然后有选择地授予执行权限。

# nginx - Nginx Ip Whitelist

> ID：13917866
> 
> 赞同：29
> 
> 时间：2012-12-17T16:18:36.897
> 
> 标签：nginx

I want to configure my nginx proxy server to only allow certain IPs to access it.

To my knowledge, this is normally done in the config file, with allow and deny lists, but I need a different option if possible, since my whitelist is very big. I also need to link this to a website, so that when a user is logged in, the user will be able to update the user's IP if it has changed.

In short, a whitelisted user will be able to use my proxy server, but if for any reason the user's IP changes, the user can still login to my site and update that whitelisted IP.

## Where I Need Help

Is there a way for nginx to read an IP whitelist from an external source, from something like htaccess or mysql? If so, what would be the best format for that list, so that it can be easily linked to and automatically updated? I'm planning to get the site professionally built so that when users log in to their accounts, the whitelist is automatically updated. I would therefore like my whitelist to be in the optimal format for the designer to work with, to make it easier to integrate the whitelist with the user accounts.

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2012-12-17T19:38:06.150

我知道有两种方法可以解决这个问题。

1.  **单独配置中的允许列表：*适用于所有常见的 NginX 安装***

    您可以将所有允许语句放在一个简单的文本文件中，每个站点只包含允许语句。将其包含在客户端的服务器块下。根据需要使用脚本来更改列表。最后每次更新允许列表时重新加载（而不是重新启动）nginx 配置。这可能如下所示：

    ```
    cat /var/www-allow/client1-allow.conf
    allow 192.168.1.1;
    allow 10.0.0.1;

    cat /etc/nginx/sites/client1.conf
    ...
    server {
        include /var/www-allow/client1-allow.conf;
        deny all;
    }

    echo Test NginX configuration
    nginx -t

    echo Reload NginX configuration (**adjust for your setup**)
    service nginx reload 
    ```

2.  **使用嵌入式 Lua：*需要自定义 NginX 编译***

    使用第 3 方嵌入式 Lua 附加模块从源代码重新编译 NginX。使用 lua 脚本主动拒绝不受支持的 IP 地址。请参阅下的第二个示例[`access_by_lua`](http://wiki.nginx.org/HttpLuaModule#access_by_lua)。您可以通过多种方式使用插件。我建议使用`access_by_lua_file`将 lua 脚本放在外部位置。

这两种方法仍然需要您付出一些努力。我认为目前还没有针对您的特定目标的即插即用解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-26T01:13:24.903

也许 nginx.shared.dict ( [http://wiki.nginx.org/HttpLuaModule#lua_shared_dict](http://wiki.nginx.org/HttpLuaModule#lua_shared_dict) ) 会帮助你？

# asp.net - 加密 web.config 并禁止在目标机器上解密它

> ID：13917870
> 
> 赞同：0
> 
> 时间：2012-12-17T16:19:00.237
> 
> 标签：asp.net, encryption, web-config

是否可以在部署之前加密 web.config 并将其分发到目标计算机而无法解密？

我们想隐藏连接字符串，以便管理员看不到 con 字符串。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T16:20:43.567

您可以加密配置，请参阅此处以获取完整的演练：

[http://msdn.microsoft.com/en-us/library/dtkwfdky(v=vs.100).aspx](http://msdn.microsoft.com/en-us/library/dtkwfdky(v=vs.100).aspx)

当然，目标机器仍然必须以一种或另一种方式对其进行解密，但我假设您只是指他们在记事本中打开 Web.config 并玩得开心。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-11-30T21:24:07.427

是的，您可以加密 Web.Config 文件中的连接字符串部分。

您需要执行以下步骤：

1.打开 Visual Studio 命令提示 您需要从开始菜单 => 程序 => Microsoft Visual Studio 2010 => Visual Studio 工具 => Visual Studio 命令提示打开 Visual Studio 命令提示。

2.使用 aspnet_regiis.exe 工具加密 Web.Config 中的 Connection Strings 部分 为了加密 Web.Config 文件中的 ConnectionString 部分，我们需要使用 aspnet_regiis.exe 工具。

句法：

aspnet_regiis.exe -pef "connectionStrings" ""

例子：

aspnet_regiis.exe -pef "connectionStrings" "D:\Sai\Projects\MyTestWebsite"。

您可以参考此文档以获取完整信息：[https ://microsoftdotnetsolutions.blogspot.com/2018/11/encrypt-and-decrypt-of-connection.html](https://microsoftdotnetsolutions.blogspot.com/2018/11/encrypt-and-decrypt-of-connection.html)

# forms - 同一页面上的 2 个联系表格发送到不同的电子邮件

> ID：13917871
> 
> 赞同：1
> 
> 时间：2012-12-17T16:19:00.760
> 
> 标签：forms, contact, newsletter

嗨，感谢您的关注。

你可以在同一个网页上有2个表格吗？我有一个方便的 php 脚本，这些字段将被重新使用。

表格 1 将是一个包含姓名、电子邮件、主题和消息的联系表格。

表格 2 将是一个包含姓名和电子邮件的时事通讯选择加入（我会手动将用户的电子邮件添加到我的时事通讯管理器）

如果在同一页面上，他们会处理吗？每个表格将发送至不同的电子邮件地址，即表格 1 将发送至 info@mydomain.com，表格 2 将发送至 signup@mydomain.com

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T16:47:18.427

使用 PHP 在一个页面上处理多个表单：http: [//bavotasan.com/2009/processing-multiple-forms-on-one-page-with-php/](http://bavotasan.com/2009/processing-multiple-forms-on-one-page-with-php/)

例子：

```
<form name="contactform" method="post" action="sendmail.php">
blah blah blah
</form>

<form name="mailinglist" method="post" action="join.php">
blah blah blah
</form> 
```

# javascript - javascript添加X个月的日期保持日期

> ID：13917872
> 
> 赞同：1
> 
> 时间：2012-12-17T16:19:09.190
> 
> 标签：javascript, date

> **可能重复：**
> [如何在 JavaScript 中为日期添加月份？](https://stackoverflow.com/questions/5645058/how-to-add-months-to-a-date-in-javascript)

将 X 个月数添加到日期对象但保留日期数的最简单方法是什么？我的约会将永远是每月的第一天。

示例：如果我的开始日期是“04/01/2012”并且我需要添加 4 个月，结果将是“08/01/2012”。

如果我的开始日期是“10/01/2012”并且我需要添加 4 个月，结果将是“02/01/2013”​​。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-17T16:25:40.037

尝试类似的东西`date.setMonth(date.getMonth()+4)`。这将自动捕获溢出条件并为 Year 添加一个。

# python - 为什么这个 scipy.odr 适合使用自定义 jacobians 段错误？

> ID：13917877
> 
> 赞同：1
> 
> 时间：2012-12-17T16:19:38.443
> 
> 标签：python, segmentation-fault, scipy, numerical

我正在尝试使用[scipy.odr](http://docs.scipy.org/doc/scipy/reference/odr.html)将测量数据点拟合到我的模型中。*虽然在不指定 jacobian 的情况下进行拟合，但对于某些模型会产生不好的结果，但在仅使用某些*模型指定我自己的 jacobian 时会出现分段错误。

```
#!/usr/bin/python2
from __future__ import print_function

import numpy as np
import scipy.odr as odr

tspace = np.linspace(0, 10, 100)

def fun(p, x):
    a, x0 = p
    r = a * (x - x0)**2
    return r

def param_jacobian(p, x, *args):
    a, x0 = p
    r = np.array([
        (x.T - x0)**2,
        -2*a*x0*(x.T - x0),
    ])
    return r

def value_jacobian(p, x, *args):
    a, x0 = p
    r = np.array([
        2*a*(x.T - x0),
    ])
    return r

correct = fun((0.5, 3), tspace)

p0 = (0.1, 1)

model = odr.Model(fun, fjacb=param_jacobian, fjacd=value_jacobian)
data = odr.Data(tspace, correct)

fitter = odr.ODR(data, model, beta0=p0)
fitter.set_job(0, 2)
fitter.run()
fitter.output.pprint() 
```

此示例在 python 2.7、64 位、scipy 0.9.0 上因段错误而崩溃。`fitter.set_job(0, 0)`如果您通过调用or来切换自定义 jacobian 的使用，它可以工作（在*此*`fitter.set_job(0, 1)`示例中拟合结果很好，但在其他示例中则不然）。

 *我的错误在哪里？完全是我的错吗？

**更新：**我又遇到了这个问题。我在 fit 脚本上运行了 gdb 和 valgrind。gdb 显示了一个 stacktrace into `malloc_consolidate`，它被模块的一些导入尝试深深调用`syslog`......对我来说似乎很奇怪，但我认为这无关紧要，因为 valgrind 显示以下两次之前，就在`param_jacobian`第一次被调用之后（这是在`value_jacobian`）。尝试获取结果时会发生段错误。我怀疑段错误是由于堆损坏，这可能是`odrpack.so`.

```
==32764== Source and destination overlap in memcpy(0x14239ee0, 0x14239ee0, 32)
==32764==    at 0x4A09306: memcpy@@GLIBC_2.14 (mc_replace_strmem.c:653)
==32764==    by 0x1B3663EB: fcn_callback (in /usr/lib64/python2.7/site-packages/scipy/odr/__odrpack.so)
==32764==    by 0x1B3A1821: doddrv_ (in /usr/lib64/python2.7/site-packages/scipy/odr/__odrpack.so)
==32764==    by 0x1B3A282A: dodcnt_ (in /usr/lib64/python2.7/site-packages/scipy/odr/__odrpack.so)
==32764==    by 0x1B3A355A: dodrc_ (in /usr/lib64/python2.7/site-packages/scipy/odr/__odrpack.so)
==32764==    by 0x1B36A452: odr (in /usr/lib64/python2.7/site-packages/scipy/odr/__odrpack.so)
==32764==    by 0x3A41249382: PyObject_Call (abstract.c:2529)
==32764==    by 0x3A412DA8F6: PyEval_CallObjectWithKeywords (ceval.c:3967)
==32764==    by 0x3A412D89E9: builtin_apply (bltinmodule.c:195)
==32764==    by 0x3A412E03DA: PyEval_EvalFrameEx (ceval.c:4098)
==32764==    by 0x3A412E075D: PyEval_EvalFrameEx (ceval.c:4184)
==32764==    by 0x3A412E19A4: PyEval_EvalCodeEx (ceval.c:3330) 
```

`*_jacobian`甚至在第二次调用函数之后：

```
==32100== Invalid read of size 8
==32100==    at 0x18189BFB: gen_output (in /usr/lib64/python2.7/site-packages/scipy/odr/__odrpack.so)
==32100==    by 0x1818C4BA: odr (in /usr/lib64/python2.7/site-packages/scipy/odr/__odrpack.so)
==32100==    by 0x3A41249382: PyObject_Call (abstract.c:2529)
==32100==    by 0x3A412DA8F6: PyEval_CallObjectWithKeywords (ceval.c:3967)
==32100==    by 0x3A412D89E9: builtin_apply (bltinmodule.c:195)
==32100==    by 0x3A412E03DA: PyEval_EvalFrameEx (ceval.c:4098)
==32100==    by 0x3A412E075D: PyEval_EvalFrameEx (ceval.c:4184)
==32100==    by 0x3A412E19A4: PyEval_EvalCodeEx (ceval.c:3330)
==32100==    by 0x3A412DFF02: PyEval_EvalFrameEx (ceval.c:4194)
==32100==    by 0x3A412E19A4: PyEval_EvalCodeEx (ceval.c:3330)
==32100==    by 0x3A412E1AD1: PyEval_EvalCode (ceval.c:689)
==32100==    by 0x3A412FBD5B: run_mod (pythonrun.c:1361)
==32100==  Address 0x10207b40 is 0 bytes inside a block of size 80 free'd
==32100==    at 0x4A0662E: free (vg_replace_malloc.c:366)
==32100==    by 0xC1050FF: ??? (in /usr/lib64/python2.7/site-packages/numpy/core/multiarray.so)
==32100==    by 0xC110199: ??? (in /usr/lib64/python2.7/site-packages/numpy/core/multiarray.so)
==32100==    by 0x18189A7E: gen_output (in /usr/lib64/python2.7/site-packages/scipy/odr/__odrpack.so)
==32100==    by 0x1818C4BA: odr (in /usr/lib64/python2.7/site-packages/scipy/odr/__odrpack.so)
==32100==    by 0x3A41249382: PyObject_Call (abstract.c:2529)
==32100==    by 0x3A412DA8F6: PyEval_CallObjectWithKeywords (ceval.c:3967)
==32100==    by 0x3A412D89E9: builtin_apply (bltinmodule.c:195)
==32100==    by 0x3A412E03DA: PyEval_EvalFrameEx (ceval.c:4098)
==32100==    by 0x3A412E075D: PyEval_EvalFrameEx (ceval.c:4184)
==32100==    by 0x3A412E19A4: PyEval_EvalCodeEx (ceval.c:3330)
==32100==    by 0x3A412DFF02: PyEval_EvalFrameEx (ceval.c:4194) 
```

`Invalid read of size 8`并且多次出现类似错误（来自同一函数内）。

我尝试在[这个（大部分不相关](https://bugzilla.redhat.com/show_bug.cgi?id=638477#c38)`LD_PRELOAD`的）错误报告上发布小的 memcpy 替换，但这没有帮助。*

# javascript - 确定一个点是否在球面的一部分内

> ID：13917878
> 
> 赞同：0
> 
> 时间：2012-12-17T16:19:40.877
> 
> 标签：javascript, math, 3d, three.js

嗨，我开始使用 Three.js 使用 webGL，我需要检测对球体的点击是否在其表面的某个部分内。

目前我可以检测球体是否被点击并获得点击点的坐标。现在我需要根据来自该球体的一组 3D 点来检测该点击是否在该球体的某个区域（另一个建议是可以的）。

球体在中心点，并且该点被保证在球体的表面上。现在我需要计算它是否只是在一个部分内。有什么建议么？我的问题似乎更数学化。我也更喜欢一种通用的方法来做到这一点，因为这些部分可能只是一个三角形或者可能是更复杂的图形。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T16:29:32.787

我的第一个想法是将您的 3D 点投影到屏幕坐标上（即从世界坐标到视图坐标，就像在屏幕上绘制形状一样）。这为您提供了与感兴趣的表面相对应的视觉区域。这将是使用您的视图进行的简单 3D 到 2D 投影，然后您可以查看单击位置是否位于 2D 多边形中。

然后我意识到这种方法存在一个问题，即如果您的感兴趣区域绕过球体的**背面，它将无法工作。**

如果这是一个问题，您将需要沿相机方向构建鼠标单击的投影。如果您使用的是等距相机，这应该是可能的......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T17:48:11.960

从该点画一条（大圆）射线。找到与曲线段最近的交点。当且仅当线段从右到左穿过射线时，该点才在曲线内。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-17T21:22:05.423

一种解决方案是渲染伪彩色图像，其中每个区域都有自己的纹理颜色。然后对图像进行采样，使用 pesudocolor 作为数组索引。* 出于特殊原因，编码应该将值分散一点。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-18T13:07:00.573

我已经结束了使用与建议不同的方法。

我正在使用矩阵行列式，其中：（T1，T2，T3）是形成三角形的点，X是我想知道它是否在这个三角形内的点，然后我简单地计算3个行列式，其中：

```
d1 = det([T1 T2 X])
d2 = det([T1 X T3])
d3 = det([T1 T2 X]) 
```

如果所有行列式的符号相同，则该点位于三角形内部。现在我根据选择区域形成一个三角形列表，并检查该点是否在这些三角形之一内。

```
this.Detector.triangleDetector = function(position, triangleArray){
    for(var idxString in triangleArray){
        var index = parseInt(idxString);
        if(this.pointInTriangle(position, triangleArray[index].coords1, triangleArray[index].coords2, triangleArray[index].coords3))
            return true;
    }
    return false;
} 
```

该函数`pointInTriangle(x,t1,t2,t3)`进行行列式验证。

```
this.Detector.pointInTriangle = function(x,T1,T2,T3){
    var array1 = [coord1.x ,coord1.y ,coord1.z];
    var array2 = [coord2.x ,coord2.y ,coord2.z];
    var array3 = [coord3.x ,coord3.y ,coord3.z];
    var zero = 0;
    var A = [[zero,zero,zero],[zero,zero,zero],[zero,zero,zero]];
    var d1,d2,d3;
    A[0][0] = position.x;
    A[0][1] = position.y;
    A[0][2] = position.z;
    A[1][0] = array2[0];
    A[1][1] = array2[1];
    A[1][2] = array2[2];
    A[2][0] = array3[0];
    A[2][1] = array3[1];
    A[2][2] = array3[2];
    d1 = MyMath.determinant(A,3);

    A[0][0] = array1[0];
    A[0][1] = array1[1];
    A[0][2] = array1[2];
    A[1][0] = position.x;
    A[1][1] = position.y;
    A[1][2] = position.z;
    d2 = MyMath.determinant(A,3);

    A[1][0] = array2[0];
    A[1][1] = array2[1];
    A[1][2] = array2[2];
    A[2][0] = position.x;
    A[2][1] = position.y;
    A[2][2] = position.z;
    d3 = MyMath.determinant(A,3);

    if((d1>=0 && d2 >=0 && d3>=0) || (d1<=0 && d2 <=0 && d3<=0)){
        return true;
    }
    return false;
}; 
```

# html - 下拉菜单菜单未打开

> ID：13917879
> 
> 赞同：0
> 
> 时间：2012-12-17T16:19:49.330
> 
> 标签：html, css

我在下拉菜单中遇到了一个小问题。请检查以下代码。当鼠标悬停在 div 区域上时，下拉菜单未打开。

```
 <div class="comp-select-area">
            <div class="comp-select-area-arrow"></div>            
        </div>
            <div class="comp-select-drop">
                <ul>
                    <li>All clicks</li>
                    <li>Favorite
                        <ul>
                            <li>Links</li>
                            <li>Campaigns</li>
                        </ul>
                    </li>
                    <li>Search
                        <ul>
                            <li>Links</li>
                            <li>Campaigns</li>
                        </ul>
                    </li>
                    <li>None</li>
                </ul>
            </div> 
```

/ *------------------ 比较下拉 --------------* /

```
.comp-select-area{
    border-radius:3px;
    height:25px;
    width:200px;
    border:1px solid #cdcdcd;
    box-shadow:0px 0px 1px 0px rgba(146, 146, 146, 0.61);
}
.comp-select-area-arrow{
    float:right;
    cursor:pointer;
    width: 26px;
    height: 25px;
    border: 1px solid #DBDBDB;
    border-top-right-radius: 2px;
    border-bottom-right-radius: 2px;
    text-align: center;
    -webkit-user-select: none;
    -khtml-user-select: none;
    -moz-user-select: none;
    -o-user-select: none;
    user-select: none;
    background: whiteSmoke;
    background: -moz-linear-gradient(top, #FCFCFC 0%, whiteSmoke 100%);
    background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,#FCFCFC), color-stop(100%,whiteSmoke));
    background: -webkit-linear-gradient(top, #FCFCFC 0%,whiteSmoke 100%);
    background: -o-linear-gradient(top, #FCFCFC 0%,whiteSmoke 100%);
    background: -ms-linear-gradient(top, #FCFCFC 0%,whiteSmoke 100%);
    background: linear-gradient(to bottom, #FCFCFC 0%,whiteSmoke 100%);
    box-shadow: 0 1px 3px #E6E6E6;
}
.comp-select-drop{
    z-index:9999;
}
.comp-select-drop ul{
    display:none;
    position:absolute;
    background:#fff;
    width:200px;
    padding:0;
    margin:0;
    border:1px solid #cdcdcd;
}
.comp-select-drop ul li:hover{
    background:#E9F1FF;
}
.comp-select-drop ul li{
    padding:5px;
    font-size:14px;
    list-style:none;
    background:#fcfcfc;
    border-bottom:1px solid #cdcdcd;
}
.comp-select-area-arrow:hover > .comp-select-drop ul{
    display:block;
}

.comp-select-drop ul li:hover > ul{
    display:block;
}

.comp-select-drop ul ul{
    display:none;
    position:absolute;
    background:#fff;
    left:200px;
    width:200px;
    padding:0;
    margin:-24px 0 0 0;
    border:1px solid #cdcdcd;
}
.comp-select-drop ul ul li:hover{
    background:#E9F1FF;
}
.comp-select-drop ul ul li{
    padding:5px;
    font-size:14px;
    list-style:none;
    background:#fcfcfc;
    border-bottom:1px solid #cdcdcd;
} 
```

jsfiddle：http: [//jsfiddle.net/R8dtH/](http://jsfiddle.net/R8dtH/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-17T16:25:01.790

`.comp-select-area-arrow:hover > .comp-select-drop ul{ display:block; }`

这意味着选择是 的直接子元素的元素`.comp-select-area-arrow`。该元素没有子元素，因为您关闭了 div。如果您将 html 更改为：

```
<div class="comp-select-area">
  <div class="comp-select-area-arrow">
    <div class="comp-select-drop"> 
```

[它会工作](http://jsfiddle.net/R8dtH/2/)

# java - 在 java 集合中，返回类型是 List

> ID：13917881
> 
> 赞同：-8
> 
> 时间：2012-12-17T16:19:49.340
> 
> 标签：java

在 java 集合中，返回类型是 List 类型，只是为什么 list 被认为是更合适的返回类型

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-17T16:21:13.013

与其说只说`List`类型，不如把它只作为接口类型（`List`是接口并且`ArrayList`是 List 实现之一）。

> 为什么？

因为它使您可以在将来自由更改实现细节，而对客户端层的影响最小。

例如：

如果您最初有：

```
List<String> myTempList = new ArrayList<String>();
return myTempList; 
```

在某些时候考虑将实现从 更改`ArrayList`为`LinkedList`.

```
List<String> myTempList = new LinkedList<String>();
return myTempList; 
```

正在使用的客户端`myTempList` 不需要进行任何更改，除非它正在执行显式转换。

# android - android 2.3.3 和 android 4.2 执行权限的区别？

> ID：13917883
> 
> 赞同：2
> 
> 时间：2012-12-17T16:19:52.790
> 
> 标签：android, user-permissions

我只是在玩某种应用程序间通信的场景，并试图规避在 Android 中应用程序的主要活动无法通过自定义权限来保护的问题（因为在这种情况下它无法启动完全）。

我尝试改用两个活动：1）不受保护的主要活动。2）当一个按钮被点击时，主活动发送一个明确的意图来启动第二个活动。那个执行一些敏感的工作并受到自定义权限（“toy.test.permission.ACTIVATE_SECOND_ACTIVITY”）的保护。
这个想法是，如果主要活动是由用户从启动器启动的，或者是由使用显式意图的外部恶意应用程序启动的，我们可以在用户按下按钮继续之前警告用户。

```
public class MainActivity extends Activity {
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main_activity);
    final Button start = (Button) findViewById(R.id.start);
    start.setOnClickListener(new View.OnClickListener() {
        public void onClick(View v) {
            Intent activateIntent = new Intent(MainActivity.this,
                    SecondActivity.class);
            startActivity(activateIntent);
            finish();
        }
    });  .... 
```

Manifest.xml 文件如下所示：

```
<application
    android:icon="@drawable/icon"
    android:label="@string/app_name"
    android:theme="@style/AppTheme" >
    <activity
        android:name=".MainActivity"
        android:label="@string/app_name"
        android:theme="@style/AppTheme" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>            
    </activity>
    <activity
        android:name=".SecondActivity"
        android:label="@string/second_activity_name"
        android:theme="@style/AppTheme"
        android:permission="toy.test.permission.ACTIVATE_SECOND_ACTIVITY" >
        <intent-filter>
            <action android:name="toy.test.action.ACTIVATE_SECOND_ACTIVITY" />

            <category android:name="android.intent.category.DEFAULT" />
        </intent-filter>
    </activity>            
</application> 
```

（此外，SecondActivity 可以通过一个隐含的 Intent 使用 actionString="toy.test.action.ACTIVATE_SECOND_ACTIVITY" 使用权限“toy.test.permission.ACTIVATE_SECOND_ACTIVITY”从朋友应用程序启动。）

# 现在android 2.3.3和android 4.2的区别：

在 android 4.2 设备或模拟器上，SecondActivity 可以通过单击 Start 按钮从 MainActivity 启动而没有任何问题，尽管应用程序没有明确要求“toy.test.permission.ACTIVATE_SECOND_ACTIVITY”权限。

但是，在 android 2.3.3 模拟器上，SecondActivity 无法启动，因为 SecurityException：

```
FATAL EXCEPTION: main
java.lang.SecurityException: Permission Denial: starting Intent { cmp=toy.test/.SecondActivity } 
from ProcessRecord{406827d0 405:toy.test/10034} (pid=405, uid=10034) requires
toy.test.permission.ACTIVATE_SECOND_ACTIVITY 
```

我很困惑：两个 Android 版本之间的权限执行是否发生了变化？android 4.2是否故意允许这种情况，即未经许可激活SecondActivity？（当然，这很有用。）

非常感谢任何答案，puffin137

# c - 二叉搜索树插入错误

> ID：13917886
> 
> 赞同：0
> 
> 时间：2012-12-17T16:20:08.220
> 
> 标签：c, binary-search-tree

我正在尝试创建一个二叉搜索树，但是当我尝试插入任何值时，或者更准确地说，当一个 NULL 指针被传递给函数时，它只是冻结了一会儿然后它崩溃了。这是代码：

```
void create(int co, struct node **leaf){
 if(*leaf==0){
   (*leaf)=malloc(sizeof(**leaf));
   (*leaf)->val=co;
   (*leaf)->left=0;
   (*leaf)->right=0;
   }
 else if(co<(*leaf)->val){
   create(co, &(*leaf)->left);
   }
 else if(co>=(*leaf)->val){
   create(co, &(*leaf)->right);
   }
} 
```

我不明白为什么会这样。你可以解释吗？

编辑：函数的第一次调用如下所示：

```
struct node *root;
 root=0;
 for(i=0;i<c;i++){
   create(f[i], &root);
   } 
```

其中 c 是数组中元素的数量。这是结构的定义：

```
struct node{
        int val;
        struct node *left;
        struct node *right;
        }; 
```

所以问题不在我在这里发布的代码中，整个代码可以在[这里](http://ideone.com/qcJZyL)找到如果我应该重写整个问题并在这里发布整个代码，请在 commnets 中说，我会尽快纠正。

找到我的答案 在我真正`create`安全地通过它之后，我能够找到最后一个搞砸我的程序的错误。它是`*i++;`。显然 ++ 不适用于指向的值。在我重写它之后它终于起作用了，所以我要感谢所有帮助我的人，并提出最后一个问题：和`*i=*i+1;`之间有什么区别？`*i++;``*i=i+1;`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T17:13:35.290

代码没有问题。[在这里](http://ideone.com/vzOFAC)，您可以看到它运行良好并达到了预期的效果。继续工作`gcc 4.3.4 (C90/C99)`。`gcc 4.7.2`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T17:38:14.447

我完全按照原样采用了您的结构定义和插入函数，并采用了您的其他代码并将其转储到这样的`main()`函数中：

```
int main()
{
    struct node *root;
    int i, c = 10;
    root=0;
    for(i=0;i<c;i++){
        create(i, &root);
    }
    return 0;
} 
```

似乎它工作得很好。我还尝试了许多不同的有序元素：

```
int f[] = {6, 1, 9, 2, 0, 18, 2, -8, 10000, 5}; 
```

再一次，没有崩溃，我得到了正确的顺序......

您是否验证了`c`在条件中使用的 :`i<c`具有`f[]`元素数量？您可以通过使用来删除`c`：`sizeof(f)/sizeof(int)`。

什么输入使此功能失败？它失败的确切错误消息是什么？

当你“走”你的树时，你在打印值之前检查了 NULL 吗？

* * *

发布整个代码后，我可以看到它在这里崩溃：

```
int *pole, i, count=3;
pole[0]=25;   <---- 
```

你没有给pole 任何内存，所以你在推迟一个未初始化的指针。

```
pole = malloc(3 * sizeof(int)); 
```

解决了这个问题，但还有更多。

接下来你会死在这里：

```
void getorder(struct node *leaf, int *f, int *i){
    if(leaf->left!=NULL){
        getorder(leaf->left, f, i);
     }
     f[*i]=leaf->val;  <-- this will kill you 
```

因为再一次，你没有给`j`任何记忆：

```
int *j;
...
*j=0;
getorder(root, f, j); 
```

# asp.net - 实体列表未按预期序列化

> ID：13917892
> 
> 赞同：1
> 
> 时间：2012-12-17T16:20:35.027
> 
> 标签：asp.net, entity-framework-4, asp.net-web-api

我有一个返回 Species 实体列表的 Web Api 控制器：

```
public class SpeciesController : ApiController
{
    private MyEntities db = new MyEntities();

    // GET api/Default1
    public IEnumerable<Species> GetSpecies()
    {
        return db.Species.AsEnumerable();
    } 
```

如果我在 GetSpecies 中放置一个断点并在 db.Species.AsEnumerable() 上启动快速观察，我会看到三个物种，每个物种都有 ID 和名称。

但是，如果我检查浏览器的结果，我会得到以下 XML：

```
<ArrayOfSpecies>
<Species z:Id="i1">
<EntityKey z:Id="i2">
*snip*
</EntityKey>
<ConversionFactors>
*snip*
</ConversionFactors>
<Id>1</Id>
<Name>Spruce/J Pine/Fir</Name>
</Species>
<Species z:Ref="i47"/>
<Species z:Ref="i35"/>
</ArrayOfSpecies> 
```

所以我有三个 Species 元素，每个项目一个，但为什么只有第一个项目填充了它的 Id 和 Name 属性？为什么其他元素是空的？

# php - preg_replace，价值出来为 $1.. 但使用修饰符“e”

> ID：13917893
> 
> 赞同：2
> 
> 时间：2012-12-17T16:20:35.990
> 
> 标签：php, preg-replace

我试图用 preg_replace 制作一个 bbCode 系统，它运行一个函数，但由于某种原因，输出仅为 1 美元，即使我添加了“e”修饰符。

任何想法如何解决这个问题？

源代码：

```
 function bbcode($value){
                $pattern[0] = "/\{register\}(.*?)\{\/register\}/sie";
                $replace[0] = register('$1'); //"<pre>$1</pre>";
                $bbcoded = preg_replace($pattern, $replace, $value);
                return $bbcoded;
            }

            function register($var) {
                echo $var;
            }

            $content = '
                {b}text{/b}
                {register}
                    "register" = "setting",
                    "name" = "title",
                    "order" = "1"
                {/register}
                some text
                {register}
                    "register" = "setting",
                    "name" = "url",
                    "order" = "3"
                {/register}
                some more {b}t{/b}e{b}xt{/b}
                {register}
                    "register" = "setting",
                    "name" = "description",
                    "order" = "2"
                {/register}
                text text
            ';

            $content = bbcode($content); 
```

看看它在行动：[http ://sandbox.onlinephpfunctions.com/code/08459c4fec1919e6089d3849e154ba7a83900fd7](http://sandbox.onlinephpfunctions.com/code/08459c4fec1919e6089d3849e154ba7a83900fd7)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T16:23:15.527

您应该[`preg_replace_callback()`](http://www.php.net/preg_replace_callback)改用：

```
 $pattern = "/\{register\}(.*?)\{\/register\}/si"; // NO /e modifier!
 $bbcoded = preg_replace_callback($pattern, 'register', $value);

 function register($var) 
 {
     // $var[0] is the whole match
     // $var[1] is the part between {register} and {/register}

     // whatever you return here will be the replacement string
     return $var[0];
 } 
```

第二个参数`preg_replace_callback()`是一个[可调用](http://php.net/manual/en/language.types.callable.php)的，在找到的每个匹配项处运行，它的返回值用作替换。

**更新**

替换的语法`/e`是这个顺便说一句（整个事情应该是一个字符串）：

```
$bbcoded = preg_replace_callback($pattern, "register('$1')", $value); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T16:21:41.753

基本的php语法...

```
 $replace[0] = register("$1"); //"<pre>$1</pre>";
                                   ^--^-- 
```

使用`'`for 引号的字符串不会插入变量。同样，您的`register()`函数正在**ECHOING**您传入的值。因此，您`$register[0]`将成为 register 函数的返回值，该值将为 null - register 不返回任何内容。

# android - 如何在使用 AQuery 将位图存储在缓存中之前对其进行编辑？

> ID：13917905
> 
> 赞同：0
> 
> 时间：2012-12-17T16:21:11.570
> 
> 标签：android, android-query

AQuery wiki 上有一个[自定义回调示例：](https://code.google.com/p/android-query/wiki/ImageLoading#Custom_Callback)

```
String imageUrl = "http://www.vikispot.com/z/images/vikispot/android-w.png";

final int tint = 0x77AA0000;

aq.id(R.id.image1).image(imageUrl, true, true, 0, 0, new BitmapAjaxCallback(){

        @Override
        public void callback(String url, ImageView iv, Bitmap bm, AjaxStatus status){

                iv.setImageBitmap(bm);

                //do something to the bitmap
                iv.setColorFilter(tint, PorterDuff.Mode.SRC_ATOP);

        }

}); 
```

如果我在回调中更改位图，更改是否会保存到缓存中？只有当位图不在缓存中时才可以使用 BitmapAjaxCallback 吗？

简而言之，我想编辑下载的图像并将其存储在缓存中以供 listview 使用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T16:36:24.013

查看您的代码，我看不到您可以“在将图像存储到缓存之前对其进行编辑”的位置。您传入的参数是 URL，回调方法参数指向已获取（并处理）的位图。如果您此时正在操作它，您应该查看代码（如果可用）以查看它是否是直接引用并且您的更改适用于保存的实例。否则你运气不好

# c# - InvokeMember，其中成员是具有反射的数组属性

> ID：13917915
> 
> 赞同：-1
> 
> 时间：2012-12-17T16:21:54.310
> 
> 标签：c#, reflection

所以我上周问了类似的问题，但我认为这很混乱，所以我会尽量简化它。

比如说我有一个只包含这样的属性的类：

```
public class MyPropertyClass
{
    public int IntegerProperty { get; set; }
} 
```

现在假设我用这样的数组创建了另一个类`MyPropertyClass`：

```
public class AnotherPropertyClass
{
    public MyPropertyClass[] ArrayProperty { get; set; }
} 
```

现在这里是复杂的部分。我需要以`MyPropertyClass[]`某种方式动态创建一个。`List<object>`到目前为止，我一直在尝试它。`InvokeMember`然后，用这个数组调用。像这样的东西：

```
//The list that I am adding elements to elsewhere in the code
List<object> objList = new List<object>();

//Adding a couple elements
objList.Add(new MyPropertyClass());
objList.Add(new MyPropertyClass());

//Create the parameter object array, has to be length one and contain an
//object array casted to MyPropertyClass or it will throw an exception.
object[] ob = new object[1] { objList.ToArray() };

//Instantiate the actual object I want to assign the array to.
object obj = new AnotherPropertyClass();

//The call to InvokeMember
obj.GetType().InvokeMember(
    "ArrayProperty",
    BindingFlags.Instance | BindingFlags.Public | BindingFlags.SetProperty,
    Type.DefaultBinder,
    obj,
    ob); 
```

此代码将引发异常。问题是， objList.ToArray() 创建一个`object[]`，当 InvokeMember 尝试将其分配给 时`MyPropertyClass[]`，它抱怨类型不匹配，即使所有元素都是`MyPropertyClass`类型。基本上我需要的是一种说法，“嘿，objList.ToArray() 中的所有元素都将是`MyPropertyClass`”，即 object{MyPropertyClass[]} 同时让实际类型是任意的，它可能不是`MyPropertyClass`，它可以是其他类型，我在编译时不知道。

到目前为止，我在这里所拥有的只是我的尝试，如果您知道另一种方法，我会全力以赴。如果您想了解更多信息，请在此处查看我的旧问题：

[将 object[] 运行时转换为自定义类型数组](https://stackoverflow.com/questions/13883209/runtime-casting-of-an-object-to-a-custom-type-array)

我只是认为那里没有太多与我遇到的实际问题无关的额外内容。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-17T16:23:24.950

您可以创建一个未指定类型的数组，如下所示：

```
Array array = Array.CreateInstance(someType, someSize); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T16:30:29.387

你这样做：

```
List<MyPropertyClass> objList = new List<MyPropertyClass>();
objList.Add(new MyPropertyClass());
objList.Add(new MyPropertyClass());

AnotherPropertyClass obj = new AnotherPropertyClass();

obj.GetType().GetProperty("ArrayProperty").SetValue(obj, objList.ToArray()); 
```

# menu - 通过 Typoscript 的基于文本的语言菜单

> ID：13917916
> 
> 赞同：2
> 
> 时间：2012-12-17T16:21:59.940
> 
> 标签：menu, internationalization, typo3, typoscript

我想点击文本“English”来获取网站的英文版本。在我有一个图形菜单之前：

```
lib.tslangmenu = HMENU
lib.tslangmenu {
  special = language
  special.value = 0,1,2
  addQueryString = 1
  1 = GMENU
  1.NO {
    XY = 24,16
    5 = IMAGE
    5.file = fileadmin/templates/images/deutsch.jpg || fileadmin/templates/images/englisch.jpg || fileadmin/templates/images/kroatisch.jpg
  }

  1.ACT < 1.NO
  1.ACT = 1
  1.ACT.wrap = <span class="langhide"> | </span>

  1.CUR < 1.ACT
  1.CUR = 1
} 
```

到目前为止，这很有效。现在我应该将菜单更改为基于文本的菜单。

```
lib.tslangmenu {
  special = language
  special.value = 0,1,2
  special.normalWhenNoLanguage = 0
  addQueryString = 1
  1 = TMENU
  1.NO = 1
  1.NO.stdWrap.override = Deutsch || English || Hrvatski

  1.ACT < 1.NO
  1.ACT = 1
  1.ACT.stdWrap = <span class="langhide"> | </span>

  1.CUR < 1.ACT
  1.CUR = 1
} 
```

`span`现在完全忽略了包装。现在菜单也显示如下：

MyCurrentPageName 英语 Hrvatski

如果我使用德语，则该单词`deutsch`将被当前页面标题覆盖。这同样适用于所有其他语言。[我还尝试了这篇博客文章](http://typo3blogger.de/sprach-menu/)中给出的 TS 。但目前它也是如此。我如何让这个工作？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-17T16:45:37.790

第一个错误在您的 wrap: `NO`is not Wrapped 中，因此没有生成跨度（对于 NO-items）。显示页面标题的问题来自错误的复制。线

```
1.ACT < 1.NO 
```

真的应该

```
1.ACT < .1.NO 
```

以防万一，这是我正在积极使用的 TS-config：

```
lib.languageMenu = HMENU
lib.languageMenu {
  special = language
  special.value = 0,1

  1 = TMENU
  1 {
    wrap = <ul class="langMenu">|</ul>
    noBlur = 1
    NO = 1
    NO {
      linkWrap = <li class="menu-item normal">|</li>

      stdWrap.override = English || Deutsch
      stdWrap.htmlSpecialChars = 1
    }

    ACT < .NO
    ACT {
      doNotLinkIt = 1
      linkWrap = <li class="menu-item active">|</li>
    }

    # NO + Translation doesn't exist
    USERDEF1 < .NO
    USERDEF1.doNotLinkIt = 1

    # ACT + Translation doesn't exist
    USERDEF2 < .ACT
    USERDEF2.doNotLinkIt = 1
  }
} 
```

问候，
约斯特

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-04-12T10:39:45.083

用标志图标检查这里

```
lib.languageMenu = HMENU
lib.languageMenu{

     special = language
     special.value = 0,1
     protectLvar = 1
     special.normalWhenNoLanguage = 0
    # wrap = <div class="language"><ul>|</ul></div>
     1 = TMENU
     1 {
       NO = 1
       NO {

        # linkWrap = <li class="in-active">|</li> || <li class="in-active">|</li>
         stdWrap.override = {$germanLabel}<img alt="" src="typo3conf/ext/website_lctech/Resources/Public/images/german.png">|| {$englishLabel}<img alt="" src="typo3conf/ext/website_lctech/Resources/Public/images/english.png">
         doNotLinkIt = 1
         stdWrap.typolink.parameter.data = page:uid
         stdWrap.typolink.additionalParams = &L=0 || &L=1
         stdWrap.typolink.addQueryString = 1
         stdWrap.typolink.ATagParams =class="InActive"
         stdWrap.typolink.addQueryString.exclude = id,cHash,no_cache
         stdWrap.typolink.addQueryString.method = GET
         stdWrap.typolink.useCacheHash = 0
         stdWrap.typolink.no_cache = 0
         stdWrap.htmlSpecialChars = 0

#         normalWhenNoLanguage = 0
       }
       ACT = 1
       ACT < .NO
       ACT.stdWrap.typolink.ATagParams =class="Active"
       ACT.stdWrap.htmlSpecialChars = 0

     #  USERDEF1 < .NO
     #  USERDEF1.doNotLinkIt = 0
    }
} 
```

# emacs - emacs 中的 Cua 复制/粘贴和系统剪贴板

> ID：13917917
> 
> 赞同：0
> 
> 时间：2012-12-17T16:22:14.717
> 
> 标签：emacs

我在emacs中设置了这个：

```
 (setq x-select-enable-clipboard t) 
```

它工作得很好。

也就是说，直到我使用 cua-copy（绑定到 Cc）从 emacs 中复制某些内容。然后，每当我尝试从其他程序复制某些内容并将其粘贴到 emacs 中时，它都会继续粘贴上次使用 cua-copy 复制的相同条目。

剪贴板本身仍然有效 - 相同的条目会定期粘贴到任何其他程序中。

到目前为止，我尝试定义几件事但无济于事：

```
(setq x-select-enable-primary nil)                               
(setq x-select-enable-clipboard t)                               
(setq select-active-regions t)                                   
(global-set-key [mouse-2] 'mouse-yank-primary)                   
(setq yank-pop-change-selection t)                               
(setq interprogram-paste-function 'x-cut-buffer-or-selection-value) 
```

只有当我使用命令 x-clipboard-yank 从剪贴板强制粘贴时，它才会解析到正确的状态，直到我再次使用 cua-copy。

有没有人遇到过这样的问题，或者知道如何解决它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T20:06:54.610

我对 Emacs 了解不多，无法提供任何见解，但我可以分享对我有用的东西（在 Ubuntu 上），因为我的 ~/.emacs 中也有复制/粘贴绑定到 Cc/Cv 的内容：

```
(cua-mode t) 
```

根据这篇文章：[将 Emacs 复制/粘贴与系统复制/粘贴集成](https://stackoverflow.com/questions/3216081/integrate-emacs-copy-paste-with-system-copy-paste)我可以复制和粘贴到 Emacs/从 Emacs 复制和粘贴，而不会出现您在 ~/.emacs 中用这些行描述的问题：

```
(setq x-select-enable-clipboard t)
(setq interprogram-paste-function 'x-cut-buffer-or-selection-value) 
```

我看到您已经尝试了上面的两行，但是您是否单独尝试了它们而没有其他可能与它们冲突的行？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-13T22:37:06.877

[此答案](https://stackoverflow.com/a/14819945)不适用于 Emacs **24**。将这些行添加到我`.emacs`的对我有用：

```
(setq select-active-regions nil)
(setq mouse-drag-copy-region t) 
```

# perl - 文本处理 - node.js 与 perl 性能

> ID：13917919
> 
> 赞同：-3
> 
> 时间：2012-12-17T16:22:20.570
> 
> 标签：perl, node.js

我如何衡量或是否有具体的证据，**node.js**和**perl**中哪个更适合**文本解析**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T16:24:38.880

您在每个脚本中编写一个脚本，解析一些文本并获取之前的时间戳 - 完成执行后的时间戳。

# c# - 使用 LinqToSql 插入

> ID：13917920
> 
> 赞同：-4
> 
> 时间：2012-12-17T16:22:20.600
> 
> 标签：c#, asp.net, sql-server, linq-to-sql

```
insert into table1 (Wicket, Run, Catch) 
values (Wicket + 2, Run + 22, Catch + 5) 
```

此语句用于使用存储过程插入数据。

如何在不使用存储过程但使用 LinqToSql 的情况下以相同的方式插入数据？

它的代码是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T16:24:04.390

```
var db = new NorthwindDataContext();
// Create a new Order object.
Order ord = new Order
{
    OrderID = 12000,
    ShipCity = "Seattle",
    OrderDate = DateTime.Now
    // …
};

// Add the new object to the Orders collection.
db.Orders.InsertOnSubmit(ord);

// Submit the change to the database.
try
{
    db.SubmitChanges();
}
catch (Exception e)
{
    Console.WriteLine(e);
    // Make some adjustments.
    // ...
    // Try again.
    db.SubmitChanges();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T16:25:01.693

像这样的东西：

```
using(var context = new YourContext())
{
 var table1 = new table1(){ //fill out properties };
 context.table1.InsertOnSubmit(table1);
 context.SubmitChanges();
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-17T16:24:24.467

请参阅 MSDN：http: [//msdn.microsoft.com/en-us/library/bb386941.aspx](http://msdn.microsoft.com/en-us/library/bb386941.aspx)

```
// Create a new Order object.
Order ord = new Order
{
    OrderID = 12000,
    ShipCity = "Seattle",
    OrderDate = DateTime.Now
    // …
};

// Add the new object to the Orders collection.
db.Orders.InsertOnSubmit(ord);

// Submit the change to the database.
try
{
    db.SubmitChanges();
}
catch (Exception e)
{
    Console.WriteLine(e);
    // Make some adjustments.
    // ...
    // Try again.
    db.SubmitChanges();
} 
```

# python - 引用变量

> ID：13917921
> 
> 赞同：1
> 
> 时间：2012-12-17T16:22:22.610
> 
> 标签：python, reference, python-2.7

在 C++ 中，您可以执行以下操作：

```
int x = 10;
int &y = x;
y = 11;
cout << x << endl; // will print 11 
```

我怎样才能在python中做类似的事情？试图`self.session`参考`self.request.session`：

```
self.session = self.request.session 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-17T16:24:54.517

以下将同时生成`self.session`并`self.request.session`引用同一个对象：

```
self.session = self.request.session 
```

如果您`session`通过两个参考中的任何一个进行更改，您将能够通过两个参考来观察更改：

```
 self.session.set_foo(42)
 self.request.session.get_foo() # returns 42 
```

另一方面，如果您通过将其指向其他地方来*重新绑定任一引用，则会破坏链接：*

```
 self.session = another_session 
```

最后，重要的是要注意某些 Python 类型是不可变的。这包括整数、字符串和元组。虽然您可以对不可变对象有多个引用，但不可变性会阻止您对该对象进行任何更改。

这与您的 C++ 示例有关。如果您想共享对 的引用`int`并能够修改它`int`，则必须将其包装`int`在一个可变对象内部，并改为共享对该可变对象的引用。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-17T16:24:36.260

在python中，一切都是对对象的引用。赋值运算符*创建*对右侧引用的对象的新引用。

考虑：

```
a = [1,2]
b = a
b.append(3)
print a  #prints [1, 2, 3] 
```

您的示例代码执行您想要的操作——创建对该`self.request.session`对象的新引用。不过要小心。请记住，对名称执行另一个分配`self.request`现在将导致`self.request`引用*不同*的对象。

# django - Django模板：如果声明模板中没有输出

> ID：13917922
> 
> 赞同：0
> 
> 时间：2012-12-17T16:22:26.107
> 
> 标签：django, django-templates

我有一个包含标题的基本模板。标头包含以下代码。

但是由于某种原因，我在 if 块之间没有输出，为什么？ps没有错误。模板的其余部分输出就好了。

**base.html**

```
<body>
    {% include 'includes/header.html' %}
    {% block sliderWrapper %}{% endblock %}
    {% block titleWrapper %}{% endblock %}
    <div id="wrapper">
        <div class="container">
            {% block mainWrapper %}{% endblock %}
        </div>
    </div>
    {% include 'includes/footer.html' %}
    {% include 'includes/copyright.html' %}
    {% include 'includes/js.html' %}
</body> 
```

{% include 'includes/header.html' %} 下面的内容....一切都只显示了两个登录/注销链接。把他们带出街区，他们就会展示出来。两个语句都没有显示在 if

```
 <div class="span9">
                    <div class="navbar navbar-inverse">
                        <div class="navbar-inner">
                            <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
                                <span class="icon-bar"></span>
                                <span class="icon-bar"></span>
                                <span class="icon-bar"></span>
                            </a>
                            <div class="nav-collapse collapse">
                                <ul class="nav">
                                    <li><a href="/">Home</a></li>
                                    <li><a href='{% url django.contrib.flatpages.views.flatpage url="how-it-works/" %}'>How does it work?</a></li>
                                    <li><a href='{% url django.contrib.flatpages.views.flatpage url="how-it-works/" %}'>Download</a></li>
                                    <li><a href="/member/registration/">Register</a></li>
                                    {% if user.is_authenticated %}
                                        <li><a href="/member/logout/">Logout</a></li>
                                    {% else % }
                                        <li><a href="/member/login/">Login</a></li>
                                    {% endif %}
                                </ul>
                            </div>
                        </div>
                    </div> 
```

“django.contrib.auth.context_processors.auth”已安装并启用会话。

如果我输出`{{ user }}`我会得到 AnonymousUser，这是我所不知道的，所以，人们会假设“else”条件会触发，但似乎没有满足任何条件。

请求上下文也被传递...

```
return render_to_response('pageRegistration.html', context,context_instance=RequestContext(request)) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T19:26:44.753

我相信您的代码中存在语法错误，未被注意到：

```
{% else % } 
```

应该：

```
{% else %} 
```

Django 模板系统可能会寻找一个 regex `{%...%}`，并且由于它不匹配，所以它被简单地视为`{% if %}{% endif %}`节点内的文本。

# java - 如何克隆 Joda DateTime？

> ID：13917924
> 
> 赞同：16
> 
> 时间：2012-12-17T16:22:28.163
> 
> 标签：java, android, jodatime

克隆某个`DateTime`对象（或将其值分配给另一个对象）的最佳方法是什么？

```
import org.joda.time.DateTime;

...

DateTime date = new DateTime();
DateTime cloneOfDate = ??? 
```

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2012-12-17T16:24:42.613

只需使用：

```
cloneOfDate = date; 
```

DateTime 对象是不可变的，您不需要克隆它们。

# c# - 如何在 EndRequest 中使用 Autofac？

> ID：13917927
> 
> 赞同：12
> 
> 时间：2012-12-17T16:22:37.620
> 
> 标签：c#, asp.net, autofac

我将 Autofac 与 .Net MVC 3 一起使用。Autofac 似乎在 Application_EndRequest 中处理了生命周期范围，这是有道理的。但是，当我尝试在 EndRequest 期间执行的自己的代码中查找服务时，这会导致此错误：

```
 MESSAGE: Instances cannot be resolved and nested lifetimes cannot be created from this LifetimeScope as it has already been disposed.
STACKTRACE: System.ObjectDisposedException
  at Autofac.Core.Lifetime.LifetimeScope.ResolveComponent(IComponentRegistration registration, IEnumerable`1 parameters)
  at Autofac.ResolutionExtensions.ResolveOptionalService(IComponentContext context, Service service, IEnumerable`1 parameters)
  at System.Web.Mvc.DependencyResolverExtensions.GetService[TService](IDependencyResolver resolver) 
```

作为参考，这是我用来尝试解析服务的代码：

```
 public T GetInstance<T>()
    {
        return DependencyResolver.Current.GetService<T>();
    } 
```

有什么方法可以让从 EndRequest 执行的代码利用 Autofac 进行服务解析？

编辑：我想在 EndRequest 期间使用单独的范围来完成它，正如 Jim 在下面建议的那样。但是，这意味着任何注册为的服务都`InstancePerHttpRequest`将在 EndRequest 期间获得一个新实例，这似乎并不理想。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T19:25:23.513

您可能必须创建自己的生命周期范围。假设你有这样的东西`global.asax.cs`：

```
public class MvcApplication : HttpApplication
{
    internal static readonly IContainer ApplicationContainer = InitAutofac();
} 
```

然后你可以在你的`EndRequest`：

```
using (var scope = MvcApplication.ApplicationContainer.BeginLifetimeScope())
{
    var service = scope.Resolve<Stuff>();
    service.DoStuff();
} 
```

# android - 在 android 上的 SQlite 中插入值时出错

> ID：13917930
> 
> 赞同：0
> 
> 时间：2012-12-17T16:22:47.360
> 
> 标签：android, sqlite, runtime-error

这是错误...

```
12-17 17:17:30.729: E/SQLiteDatabase(21112): Error inserting nome=categoriaTest
12-17 17:17:30.729: E/SQLiteDatabase(21112): android.database.sqlite.SQLiteConstraintException: error code 19: constraint failed
12-17 17:17:30.729: E/SQLiteDatabase(21112):    at android.database.sqlite.SQLiteStatement.native_executeInsert(Native Method)
12-17 17:17:30.729: E/SQLiteDatabase(21112):    at android.database.sqlite.SQLiteStatement.executeInsert(SQLiteStatement.java:113)
12-17 17:17:30.729: E/SQLiteDatabase(21112):    at android.database.sqlite.SQLiteDatabase.insertWithOnConflict(SQLiteDatabase.java:1844)
12-17 17:17:30.729: E/SQLiteDatabase(21112):    at android.database.sqlite.SQLiteDatabase.insert(SQLiteDatabase.java:1717)
12-17 17:17:30.729: E/SQLiteDatabase(21112):    at com.ggservice.democracy.pollDataSource.createCategoria(pollDataSource.java:40)
12-17 17:17:30.729: E/SQLiteDatabase(21112):    at com.ggservice.democracy.MainActivity.onClick(MainActivity.java:44)
12-17 17:17:30.729: E/SQLiteDatabase(21112):    at java.lang.reflect.Method.invokeNative(Native Method)
12-17 17:17:30.729: E/SQLiteDatabase(21112):    at java.lang.reflect.Method.invoke(Method.java:511)
12-17 17:17:30.729: E/SQLiteDatabase(21112):    at android.view.View$1.onClick(View.java:3064)
12-17 17:17:30.729: E/SQLiteDatabase(21112):    at android.view.View.performClick(View.java:3591)
12-17 17:17:30.729: E/SQLiteDatabase(21112):    at android.view.View$PerformClick.run(View.java:14263)
12-17 17:17:30.729: E/SQLiteDatabase(21112):    at android.os.Handler.handleCallback(Handler.java:605)
12-17 17:17:30.729: E/SQLiteDatabase(21112):    at android.os.Handler.dispatchMessage(Handler.java:92)
12-17 17:17:30.729: E/SQLiteDatabase(21112):    at android.os.Looper.loop(Looper.java:137)
12-17 17:17:30.729: E/SQLiteDatabase(21112):    at android.app.ActivityThread.main(ActivityThread.java:4507)
12-17 17:17:30.729: E/SQLiteDatabase(21112):    at java.lang.reflect.Method.invokeNative(Native Method)
12-17 17:17:30.729: E/SQLiteDatabase(21112):    at java.lang.reflect.Method.invoke(Method.java:511)
12-17 17:17:30.729: E/SQLiteDatabase(21112):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:790)
12-17 17:17:30.729: E/SQLiteDatabase(21112):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:557)
12-17 17:17:30.729: E/SQLiteDatabase(21112):    at dalvik.system.NativeStart.main(Native Method) 
```

同时，应该执行此操作的按钮如下：

```
public void onClick(View view) {
        @SuppressWarnings("unchecked")
        ArrayAdapter<categorie> adapter = (ArrayAdapter<categorie>) getListAdapter();
        categorie categoria = null;
        switch (view.getId()) {
        case R.id.add:

          // Save the new comment to the database
          categoria = datasource.createCategoria("categoriaTest");
          adapter.add(categoria);
          break;

        }
        adapter.notifyDataSetChanged();
      } 
```

createCategoria 就像：

```
public categorie createCategoria(String categoria) {
            ContentValues values = new ContentValues();
            values.put(MySQLiteHelper.COLUMN_NOME, categoria);
            long insertId = database.insert(MySQLiteHelper.TABLE_CATEGORIE, null,
                values);
            Cursor cursor = database.query(MySQLiteHelper.TABLE_CATEGORIE,
                allCategorieColumns, MySQLiteHelper.COLUMN_ID + " = " + insertId, null,
                null, null, null);
            cursor.moveToFirst();
            categorie newCategoria = cursorToCategorie(cursor);
            cursor.close();
            return newCategoria;
          } 
```

SQLiteHelper：

```
public class MySQLiteHelper extends SQLiteOpenHelper {

      public static final String TABLE_CATEGORIE = "categorie";
      public static final String TABLE_SONDAGGI = "sondaggi";
      public static final String TABLE_TESTORISPOSTE = "testo_risposte";
      public static final String TABLE_RISPOSTE = "risposte";    
      public static final String COLUMN_ID = "_id";
      public static final String COLUMN_NOME = "nome";
      public static final String COLUMN_PREF = "preferita"; 
      public static final String COLUMN_CATID = "catid";
      public static final String COLUMN_DOMANDA = "domanda";
      public static final String COLUMN_SONDID = "sondid";
      public static final String COLUMN_RISPOSTA = "risposta";
      public static final String COLUMN_RISID = "risid";
      public static final String COLUMN_SELEZIONATA = "selezionata";

      private static final String DATABASE_NAME = "democracy.db";
      private static final int DATABASE_VERSION = 2;

      // Database creation sql statement

      private static final String DATABASE_CREATE_CATEGORIE = "create table "
          + TABLE_CATEGORIE + "(" + COLUMN_ID
          + " integer primary key autoincrement, " + COLUMN_PREF
          + " integer not null, " + COLUMN_NOME
          + " text not null);";

      private static final String DATABASE_CREATE_SONDAGGI = "create table "
              + TABLE_SONDAGGI + "(" + COLUMN_ID
              + " integer primary key autoincrement, " + COLUMN_CATID
              + " integer not null, "+ COLUMN_DOMANDA +" text not null);";

      private static final String DATABASE_CREATE_TESTORISPOSTE = "create table "
              + TABLE_TESTORISPOSTE + "(" + COLUMN_ID
              + " integer primary key autoincrement, " + COLUMN_SONDID
              + " integer not null, "+ COLUMN_SELEZIONATA
              + " integer not null, "+ COLUMN_RISPOSTA +" text not null);";

      public MySQLiteHelper(Context context) {
        super(context, DATABASE_NAME, null, DATABASE_VERSION);
      }

      @Override
      public void onCreate(SQLiteDatabase database) {
        database.execSQL(DATABASE_CREATE_CATEGORIE);
        database.execSQL(DATABASE_CREATE_SONDAGGI);
        database.execSQL(DATABASE_CREATE_TESTORISPOSTE);

      }

      @Override
      public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
        Log.w(MySQLiteHelper.class.getName(),
            "Upgrading database from version " + oldVersion + " to "
                + newVersion + ", which will destroy all old data");
        db.execSQL("DROP TABLE IF EXISTS " + TABLE_CATEGORIE);
        db.execSQL("DROP TABLE IF EXISTS " + TABLE_SONDAGGI);
        db.execSQL("DROP TABLE IF EXISTS " + TABLE_TESTORISPOSTE);

        onCreate(db);
      }

    } 
```

我不知道你是否需要更多，我在 android 上是个菜鸟，但我试图理解，我实际上是在尝试通过添加更多表来“转换”真实应用程序中的教程，做一个好的 DAO 等等……你有什么建议吗？PS有没有办法“查看”我“可能”在设备中创建的数据库？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T16:31:47.123

问题是您的 Column COLUMN_PREF 不能为空，并且您通过不插入任何内容在方法中插入空值：

```
COLUMN_PREF + " integer not null," 
```

-

```
ContentValues values = new ContentValues();
values.put(MySQLiteHelper.COLUMN_NOME, categoria);
long insertId = database.insert(MySQLiteHelper.TABLE_CATEGORIE, null, values); 
```

只需将该值添加到插入或删除“非空”子句。

# android - 找不到 OpenCV 库 - 2.4.3.apk！OpenCV 安卓

> ID：13917931
> 
> 赞同：1
> 
> 时间：2012-12-17T16:22:53.580
> 
> 标签：android, opencv

> **可能重复：**
> [我在将 OpenCV 添加到新的 Android 项目时遇到了一些问题](https://stackoverflow.com/questions/9872089/im-having-some-trouble-adding-opencv-to-a-new-android-project)

我正在编写一个 Android 程序，但遇到了错误。启动后，应用程序找不到 .apk 文件。

控制台显示：

```
[2012-12-17 17:03:10 - ProbandoAlgoritmos] ------------------------------
[2012-12-17 17:03:10 - ProbandoAlgoritmos] Android Launch!
[2012-12-17 17:03:10 - ProbandoAlgoritmos] adb is running normally.
[2012-12-17 17:03:10 - ProbandoAlgoritmos] Performing org.opencv.prueba.algoritmos.InitialActivity activity launch
[2012-12-17 17:03:10 - ProbandoAlgoritmos] Automatic Target Mode: using device '0019054d294eae'
[2012-12-17 17:03:10 - ProbandoAlgoritmos] Uploading ProbandoAlgoritmos.apk onto device '0019054d294eae'
[2012-12-17 17:03:10 - ProbandoAlgoritmos] Installing ProbandoAlgoritmos.apk...
[2012-12-17 17:03:12 - ProbandoAlgoritmos] Success!
[2012-12-17 17:03:12 - OpenCV Library - 2.4.3] Could not find OpenCV Library - 2.4.3.apk!
[2012-12-17 17:03:12 - ProbandoAlgoritmos] Starting activity org.opencv.prueba.algoritmos.InitialActivity on device 0019054d294eae
[2012-12-17 17:03:12 - ProbandoAlgoritmos] ActivityManager: Starting: Intent { act=android.intent.action.MAIN cat=[ xxx ] cmp=xxxx } 
```

显然，应用程序崩溃了。

没有编译器错误，所以导入了opencv库，并在设备上安装了Open CV Manager。

为什么找不到APK？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T16:39:06.427

如果使用 Opencv4android2.4.3 你应该安装“OpenCV_2.4.3_Manager_2.0_armeabi-v7a.apk”和“OpenCV_2.4.3_binary_pack_armv7a.apk”或者你可以访问

[http://docs.opencv.org/doc/tutorials/introduction/android_binary_package/android_dev_intro.html](http://docs.opencv.org/doc/tutorials/introduction/android_binary_package/android_dev_intro.html)

希望能帮到你！

# quartz-scheduler - 如何持久化远程客户端的 JobDataMap 更改

> ID：13917937
> 
> 赞同：4
> 
> 时间：2012-12-17T16:23:25.807
> 
> 标签：quartz-scheduler, quartz.net

我正在为 Quartz.NET 开发一个基本的 Web 客户端，除其他外，它支持在运行时修改作业的 JobDataMap。

我的工作装饰有以下属性，我相信这些属性是使工作有状态所必需的：

```
[PersistJobDataAfterExecution]
[DisallowConcurrentExecution]
public class SampleTenantJob : IJob { ... } 
```

在运行时，我执行以下代码，但 JobDataMap 没有持久化：

```
 public void UpdateJobProperties(string jobName, string groupName, IDictionary<string, object> properties)
    {
        IJobDetail job;
        if (!TryGetJob(jobName, groupName, out job))
            return;

        foreach (var property in properties)
        {
            if (job.JobDataMap.ContainsKey(property.Key) && property.Value != null)
            {
                job.JobDataMap.Put(property.Key, property.Value);
            }
        }
    } 
```

我最初认为这是因为我正在使用`XMLSchedulingDataProcessorPlugin`for 作业，但我已经尝试了内存（RAMStore）`AdoJobStore`并且仍然无法保留`JobDataMap`远程客户端所做的更改。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-17T20:02:02.643

PersistJobDataAfterExecution（顾名思义）只适用于作业执行完毕的情况，所以下面的作业会跟踪执行的次数

```
[PersistJobDataAfterExecution]
public class HelloJob : IJob
{
    public void Execute(IJobExecutionContext context)
    {           
        int count = (int?) context.MergedJobDataMap["Count"]    ?? 1;

        Console.WriteLine("hello " + count.ToString() );

        context.JobDetail.JobDataMap.Put("Count" , ++count);    
    }
} 
```

如果没有 PersistJobDataAfterExecution 属性，计数始终相同。

由于您没有运行作业，这对您没有帮助，我认为您必须使用新的 JobDataMap 删除并重新创建作业。

当然，您不必强制使用 JobDataMap，并且始终可以从其他地方读取和存储您的工作信息。

# ios - 将 NSDate 从一个时区更改为另一个时区

> ID：13917938
> 
> 赞同：16
> 
> 时间：2012-12-17T16:23:29.117
> 
> 标签：ios, objective-c, swift, nsdate, nsdateformatter

给定一个`NSString`类似“2012-12-17 04:36:25”（格林威治标准时间）的日期，如何简单地将其更改为其他时区，如 EST、CST

到目前为止我看到的所有步骤都采取了很多不必要的步骤

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-12-17T16:36:50.467

```
NSString *str = @"2012-12-17 04:36:25";
NSDateFormatter* gmtDf = [[[NSDateFormatter alloc] init] autorelease];
[gmtDf setTimeZone:[NSTimeZone timeZoneWithName:@"GMT"]];
[gmtDf setDateFormat:@"yyyy-MM-dd HH:mm:ss"];
NSDate* gmtDate = [gmtDf dateFromString:str];
NSLog(@"%@",gmtDate);

NSDateFormatter* estDf = [[[NSDateFormatter alloc] init] autorelease];
[estDf setTimeZone:[NSTimeZone timeZoneWithName:@"EST"]];
[estDf setDateFormat:@"yyyy-MM-dd HH:mm:ss"];
NSDate *estDate = [estDf dateFromString:[gmtDf stringFromDate:gmtDate]]; // you can also use str
NSLog(@"%@",estDate); 
```

* * *

### 编辑：添加快速代码

```
let str: String = "2012-12-17 04:36:25"
let gmtDf: NSDateFormatter = NSDateFormatter()
gmtDf.timeZone = NSTimeZone(name: "GMT")
gmtDf.dateFormat = "yyyy-MM-dd HH:mm:ss"
let gmtDate: NSDate = gmtDf.dateFromString(str)!
print(gmtDate)
let estDf: NSDateFormatter = NSDateFormatter()
estDf.timeZone = NSTimeZone(name: "EST")
estDf.dateFormat = "yyyy-MM-dd HH:mm:ss"
let estDate: NSDate = estDf.dateFromString(gmtDf.stringFromDate(gmtDate))!
print(estDate) 
```

### 编辑：添加 Swift 3 代码

```
 let str: String = "2012-12-17 04:36:25"
    let gmtDf = DateFormatter()
    gmtDf.timeZone = TimeZone(identifier: "GMT")
    gmtDf.dateFormat = "yyyy-MM-dd HH:mm:ss"
    let gmtDate = gmtDf.date(from: str)!
    print(gmtDate)

    let estDf = DateFormatter()
    estDf.timeZone = TimeZone(identifier: "EST")
    estDf.dateFormat = "yyyy-MM-dd HH:mm:ss"
    let estDate = estDf.date(from: gmtDf.string(from: gmtDate))!
    print(estDate) 
```

# sql - 使用特定的可用值填充下拉列表参数

> ID：13917942
> 
> 赞同：0
> 
> 时间：2012-12-17T16:23:45.457
> 
> 标签：sql, sql-server-2008, tsql, reporting-services

我有一个从 SQL 表创建报告的 SSRS 报告：

```
 id  type    name
 1   fruit   wilk
 2   fruit   scot
 3   paper   jon
 4   pen     brad
 5   tape    lin
 6   water   james 
```

该报表有两个数据集：一个为报表提供查询，另一个为参数提供数据。因此，在报告中，多值参数从 dataset2 获取其值。

```
-- dataset1::  
select ID, TYPE, name from table1 where type in (@types)

-- dataset2::
select TYPE from table1 
```

报告是根据从下拉列表（多选列表）中选择的类型生成的。

例如，如果我们选择“fruit”，报告将显示：

> 威尔克，苏格兰人

如果我们选择“水”：

> 詹姆士

现在问题是我需要为所有值“TAPE”、“pen”和“paper”创建一个名称，比如名称“STATIONARY”，这样下拉列表应该只显示：

> 水果, 文具, 水

当我从下拉列表中选择“STATIONARY”时，报告应显示：

> jon, brad, lin（所有 3 人都有某种形式的固定，即纸、笔、胶带）

当我选择类型为“STATIONARY”和“water”时，它应该显示：

> 乔恩、布拉德、林、詹姆斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T16:44:08.160

就从这里的臀部。

考虑将类别字段添加到您的表中。因此，对于您的水果和水，您可以有一个名为“食物”的类别，而对于您的笔、纸和胶带，该类别将被称为“固定”。

将另一个数据集添加到您的报告中，称为“类别”。

```
SELECT Category FROM table1 
```

添加另一个参数，它是您的新数据集的多项选择，称为@Category。

在您的主要查询中添加：

```
...AND Category IN (@Category) 
```

**编辑**

请记住，此建议完全忽略了数据库中的规范化。我知道这不是您的问题的意图，但这是您应该始终考虑的事情。如果是我，我什至会添加一个类别表。然后使用您所称的“table1”，我将添加一个指向类别表中 ID 的外键。您甚至可以在类型列中看到此问题。注意水果是如何被多次使用的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T21:52:09.133

我会为此创建另外几个表，称为`Item`and `ItemType`。

`ItemType`有两个字段：（`ItemTypeId`自动递增的主键）和`Name`. `ItemType`将具有如下值：

```
ItemTypeId    Name
1             Food
2             Stationery 
```

`Item`具有三个字段：（`ItemId`自动递增的主键）`Name`和`ItemTypeId`（来自上`ItemType`表）。它看起来像这样：

```
ItemId  Name   ItemTypeId
1       Fruit  1
2       Paper  2
3       Pen    2
4       Tape   2
5       Water  1 
```

将字段添加到该`ItemId`字段`table1`并删除该`type`字段，因此它现在看起来像：

```
 id  ItemId  name
 1   1       wilk
 2   1       scot
 3   2       jon
 4   3       brad
 5   4       lin
 6   5       james 
```

我们现在知道从链接到的项目的类型`ItemType`。

创建两个参数：`@ItemTypes`和`@Items`作为多值。

`@ItemTypes`从`ItemType`表中填充：

```
SELECT ItemTypeId, Name FROM ItemType 
```

`ItemTypeId`是`Value`和`Name`是`Label`。

`@Items`从表中填充，但按参数`Item`过滤，如下所示：`@ItemTypes`

```
SELECT ItemId, Name FROM Item WHERE (ItemTypeId IN @ItemTypes) 
```

`ItemId`是`Value`和`Name`是`Label`。

现在，当您`@ItemTypes`在第一个参数中选择时，第二个参数将仅显示该类型的项目。

好的，回到您的查询。您的主要查询现在看起来像：

```
SELECT Item.Name AS ItemName, ItemType.Name AS ItemTypeName, table1.Name
FROM table1
INNER JOIN Item ON Item.ItemId = table1.ItemId
INNER JOIN ItemType ON ItemType.ItemTypeId = Item.ItemTypeI
WHERE (ItemType.ItemTypeId IN @ItemTypes)
AND (Item.ItemId IN @Items) 
```

我认为我们在这里的工作已经完成。

# python - 需要帮助无法在我的 ubutun 12.0.4 PC 上安装 SublimeClang

> ID：13917943
> 
> 赞同：0
> 
> 时间：2012-12-17T16:23:46.650
> 
> 标签：python, clang

在我的 ubutun 12.0.4 系统上安装 Sublime Clang 时遇到问题。我按照以下说明操作： [https](https://github.com/quarnster/SublimeClang) ://github.com/quarnster/SublimeClang 但是当我进入步骤时：

```
pythonbrew install --configure="--enable-unicode=ucs4" 2.6 
```

它报告了一个错误：

```
ERROR: Failed to install Python-2.6\. See /home/chen/.pythonbrew/log/build.log to see why.
The error detail is:
    Traceback (most recent call last):
      File "./setup.py", line 1904, in <module>
        main()
      File "./setup.py", line 1899, in main
        'Lib/smtpd.py']
      File "/home/chen/.pythonbrew/build/Python-2.6/Lib/distutils/core.py", line 152, in setup
        dist.run_commands()
      File "/home/chen/.pythonbrew/build/Python-2.6/Lib/distutils/dist.py", line 975, in run_commands
        self.run_command(cmd)
      File "/home/chen/.pythonbrew/build/Python-2.6/Lib/distutils/dist.py", line 995, in run_command
        cmd_obj.run()
      File "/home/chen/.pythonbrew/build/Python-2.6/Lib/distutils/command/build.py", line 134, in run
        self.run_command(cmd_name)
      File "/home/chen/.pythonbrew/build/Python-2.6/Lib/distutils/cmd.py", line 333, in run_command
        self.distribution.run_command(command)
      File "/home/chen/.pythonbrew/build/Python-2.6/Lib/distutils/dist.py", line 995, in run_command
        cmd_obj.run()
      File "/home/chen/.pythonbrew/build/Python-2.6/Lib/distutils/command/build_ext.py", line 343, in run
        self.build_extensions()
      File "./setup.py", line 104, in build_extensions
        missing = self.detect_modules()
      File "./setup.py", line 962, in detect_modules
        sqlite_libdir = [os.path.abspath(os.path.dirname(sqlite_libfile))]
      File "/home/chen/.pythonbrew/build/Python-2.6/Lib/posixpath.py", line 119, in dirname
        i = p.rfind('/') + 1
    AttributeError: 'NoneType' object has no attribute 'rfind' 
```

我的 python 版本是 Python 2.7.3（默认，2012 年 8 月 1 日，05:14:39）[GCC 4.6.3] on linux2

不是要求的2.6。我不知道发生了什么以及如何解决这个问题。有人可以给我一些帮助吗？多谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T14:04:53.483

我已经解决了这个问题，这是一个python安装问题，你可以通过重命名/user/include/文件夹下的sqlite3.h来跳过这个错误

# c - pthread：加入一个分离的线程没有正确设置 errno

> ID：13917944
> 
> 赞同：3
> 
> 时间：2012-12-17T16:23:54.840
> 
> 标签：c, pthreads, pthread-join

我正在检查“pthread_join”的行为并具有以下代码：

```
#include <stdio.h>
#include <stdlib.h>
#include <assert.h>
#include <errno.h>

#include <pthread.h>

void *thread(void *vargp)
{
    pthread_detach(pthread_self());
    pthread_exit((void *)42);
}

int main()
{
    int i = 1;
    pthread_t tid;

    pthread_create(&tid, NULL, thread, NULL);

    sleep(1);
    pthread_join(tid, (void **)&i);
    printf("%d\n", i);
    printf("%d\n", errno);
} 
```

在我的平台上观察到的输出（Linux 3.2.0-32-generic #51-Ubuntu SMP x86_64 GNU/Linux）：

1.  注释掉“睡眠（1）”：42 0

2.  使用 sleep 语句，它会产生：1 0

根据 pthread_join 的手册页，当我们尝试加入不可加入的线程时，我们应该得到错误“ **EINVAL ”，但是，上述两种情况都没有设置 errno。**而且在第一种情况下，似乎我们甚至可以获得分离线程的退出状态，我对结果感到困惑。谁能解释一下？谢谢

**[编辑]：**我意识到第一个 printf 可能会重置 'errno'，但是，即使我交换了两个 'printf' 语句的顺序，我仍然得到相同的结果。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-17T17:10:51.943

你的期望是错误的。调用`pthread_join`分离的线程会调用未定义的行为。不需要设置`errno`、返回错误代码，甚至根本不需要返回。

如果您需要引用，

> 如果 pthread_join() 的线程参数指定的值不引用可连接线程，则行为未定义。

来源： http: [//pubs.opengroup.org/onlinepubs/9699919799/functions/pthread_join.html](http://pubs.opengroup.org/onlinepubs/9699919799/functions/pthread_join.html)

另外，请注意大多数 pthread 函数，包括`pthread_join`，不使用`errno`. 相反，它们将错误代码作为返回值返回。因此，`errno`在调用 pthread 函数后进行检查是错误的，即使您在调用它时没有调用未定义的行为。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T16:39:48.440

你通过读取 function 的返回值得到这个错误`pthread_join`，试试这个：

```
if (errno = pthread_join(tid,NULL)) {
    printf("An error ocurred: %i", errno);
} 
```

# ios - iOS UITextField 在文本更改时更改位置

> ID：13917949
> 
> 赞同：3
> 
> 时间：2012-12-17T16:24:04.780
> 
> 标签：ios, uitextfield

我使用它来将文本字段集中在相关内容上：

```
[textField setCenter:[someObject center]];
[textField becomeFirstResponder]; 
```

这看起来很棒，很好，并且以对象为中心，准备好接受文本。我希望以某种方式格式化文本，因此在编辑更改处理程序中，我修改了文本并设置为新文本：

```
[textField setText:newText]; 
```

当我这样做时，文本字段将从居中之前跳转到其旧位置。我希望文本字段保持在对象的中心。

我的经验是，可能有更好的方法来做到这一点，即移动文本字段并动态更改其内容，而不必解决各种怪癖。有什么建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T16:54:17.250

要在编辑时格式化 UITextField，您可以尝试以下代码。

```
-(BOOL) textField:(UITextField *)textField shouldChangeCharactersInRange:(NSRange)range replacementString:(NSString *)string{
    if([string isEqualToString:@"4"]){
        UITextRange *range=textField.selectedTextRange;
        [textField replaceRange:range withText:@"Hi"];
        return NO;
    }
    return YES;
} 
```

我一直保持 UITextfield 居中对齐。当它在开始、中心或任何地方检测到“4”时，它将用“Hi”替换它，同时保持它的中心对齐行为。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T03:03:08.450

除了上面的代码，使用以下代码替换现有文本：

```
UITextPosition *p0 = [textField beginningOfDocument];
UITextPosition *p1 = [textField positionFromPosition:p0 offset:[[textField text] length]];
UITextRange *complete = [textField textRangeFromPosition:p0 toPosition:p1];
[textField replaceRange:complete withText:newText]; 
```

可怕的解决方案应该是一件容易的事！

# c# - 用于 sql 和实体的自定义 Linq 函数

> ID：13917956
> 
> 赞同：1
> 
> 时间：2012-12-17T16:24:56.450
> 
> 标签：c#, linq-to-sql, linq-to-entities

有没有办法为 linq to sql 创建函数，这些函数在 linq to 实体中使用时表现不同？我不想使用 AsQueriable。我因为我想在 sql server 上做尽可能多的计算。

例子：

```
var UserIDs = Users.Select(x=> ConvertToString(x.UserID)); 
```

对于 linq to sql，代码必须是：

```
public string ConvertToString(int id)
{
    return SqlFunctions.StringConvert((double?)id);
} 
```

对于 linq to 实体，代码必须是：

```
public string ConvertToString(int id)
{
    return id.ToString();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T21:46:38.957

在 Linq-to-Entites 中，无论如何都不允许`ConvertToString`在查询中使用调用，所以这是一个勇敢但徒劳的努力。原因是 L2E 查询中的每条语句都必须是一个表达式，查询提供者必须将其转换为 SQL。而且（当然）没有任何任意方法的内置翻译。L2E 在这里非常有限。甚至不可能使用大多数本机 .Net 方法，例如

```
Users.Select(x=> Convert.ToString(x.UserID)); // NotSupportedException 
```

Linq-to-Sql 在这方面要宽松一些。它将体面地运行该语句。但这对您没有帮助，因为您正在寻找一个共同点。瓶颈是 L2E，它是一个狭窄的瓶颈。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T16:26:48.317

您可以在 Entity Framework 4 及更高版本中使用 SqlFunctions。在您的示例中，您不必在应用程序层进行转换。

[http://blogs.microsoft.co.il/blogs/gilf/archive/2009/05/23/calling-database-functions-in-linq-to-entities-in-entity-framework-4.aspx](http://blogs.microsoft.co.il/blogs/gilf/archive/2009/05/23/calling-database-functions-in-linq-to-entities-in-entity-framework-4.aspx)

# ruby-on-rails - RoR：渲染 JSON 时模板丢失错误

> ID：13917957
> 
> 赞同：6
> 
> 时间：2012-12-17T16:24:57.697
> 
> 标签：ruby-on-rails, ruby, json

我的控制器中有以下代码：

```
def tljson (result = [])
  @stat_id = params[:stat_id]
  @rpm = FedoraRpm.find_by_name(@stat_id)
  @rpm.ruby_gem.historical_gems.each { |h|
    result << { :content => h.version, :start => h.build_date }
    }
  @rpm.bugs.each { |b|
    result << { :content => b.name + "<br><a href='"+b.url+"'>View on BugZilla</a>", :start => b.bz_id }
  }
  @res = result.to_json
    respond_to do |format|
    format.json { render @res.to_json }
    end
end 
```

转到 /tljson.json 会呈现 JSON，但标题显示“缺少模板；缺少模板'。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-17T16:36:14.023

我相信您需要指定要`:json`在`respond_to`块中呈现

```
respond_to do |format|
  format.json { render json: @res }
end 
```

否则它将查找`tljson.json.erb`文件。

# django - 算术运算后Django聚合多列

> ID：13917961
> 
> 赞同：4
> 
> 时间：2012-12-17T16:25:05.683
> 
> 标签：django, django-models

我对 Django 1.4.4 有一个非常奇怪的问题。

我有这个模型：

```
class LogQuarter(models.Model):
  timestamp = models.DateTimeField()
  domain = models.CharField(max_length=253)
  attempts = models.IntegerField()
  success = models.IntegerField()
  queue = models.IntegerField()
  ... 
```

我需要收集前 20 个已发送属性较高的域。发送的属性是尝试 - 队列。

这是我的要求：

```
obj = LogQuarter.objects\
      .aggregate(Sum(F('attempts')-F('queue')))\
      .values('domain')\
      .filter(**kwargs)\
      .order_by('-sent')[:20] 
```

我也尝试过额外的，但它不起作用。

这真的是基本的 SQL，我很惊讶 Django 不能这样做。

有人有解决方案吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-10-22T23:00:39.700

您实际上可以通过子类化一些聚合功能来做到这一点。`MAX`这需要深入研究代码才能真正理解，但这是我编写的代码来为and做类似的事情`MIN`。（注意：此代码基于 Django 1.4 / MySQL）。

首先继承底层聚合类并覆盖 as_sql 方法。此方法将实际 SQL 写入数据库查询。我们必须确保引用正确传入的字段并将其与正确的表名相关联。

```
from django.db.models.sql import aggregates
class SqlCalculatedSum(aggregates.Aggregate):
  sql_function = 'SUM'
  sql_template = '%(function)s(%(field)s - %(other_field)s)'

  def as_sql(self, qn, connection):
    # self.col is currently a tuple, where the first item is the table name and
    # the second item is the primary column name. Assuming our calculation is
    # on two fields in the same table, we can use that to our advantage. qn is
    # underlying DB quoting object and quotes things appropriately. The column
    # entry in the self.extra var is the actual database column name for the
    # secondary column.
    self.extra['other_field'] = '.'.join(
        [qn(c) for c in (self.col[0], self.extra['column'])])
    return super(SqlCalculatedSum, self).as_sql(qn, connection) 
```

接下来，子类化通用模型聚合类并覆盖 add_to_query 方法。此方法决定了如何将聚合添加到底层查询对象。我们希望能够传入字段名称（例如`queue`）但获得相应的数据库列名称（以防它有所不同）。

```
from django.db import models
class CalculatedSum(models.Aggregate):
  name = SqlCalculatedSum

  def add_to_query(self, query, alias, col, source, is_summary):
    # Utilize the fact that self.extra is set to all of the extra kwargs passed
    # in on initialization. We want to get the corresponding database column
    # name for whatever field we pass in to the "variable" kwarg.
    self.extra['column'] = query.model._meta.get_field(
        self.extra['variable']).db_column
    query.aggregates[alias] = self.name(
        col, source=source, is_summary=is_summary, **self.extra) 
```

然后，您可以在这样的注释中使用您的新类：

```
queryset.annotate(calc_attempts=CalculatedSum('attempts', variable='queue')) 
```

假设您的`attempts`和`queue`字段具有相同的 db 列名，这应该会生成类似于以下内容的 SQL：

```
SELECT SUM(`LogQuarter`.`attempts` - `LogQuarter`.`queue`) AS calc_attempts 
```

你去吧。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T17:06:18.263

我不确定你是否能做到这一点`Sum(F('attempts')-F('queue'))`。它应该首先抛出一个错误。我想，更简单的方法是使用额外的。

```
result = LogQuarter.objects.extra(select={'sent':'(attempts-queue)'}, order_by=['-sent'])[:20] 
```

# c# - C# 和 jQuery 中的日期时间格式不一致

> ID：13917965
> 
> 赞同：0
> 
> 时间：2012-12-17T16:25:20.997
> 
> 标签：c#, asp.net-mvc, datetime

我有一个问题，我有一个基于用户的日期时间格式设置。现在，我在 Global.asax 中设置输入格式，如下所示

```
 void MvcApplication_PreRequestHandlerExecute(object sender, EventArgs e)
    {

                if (userSettings.Settings.ContainsKey(Constants.DateFormat))
                {
                    CultureInfo cultureInfo = System.Threading.Thread.CurrentThread.CurrentCulture;
                    cultureInfo.DateTimeFormat.DateSeparator = "/";
                    cultureInfo.DateTimeFormat.FullDateTimePattern = userSettings.Setting.Attributes[Constants.DateFormat];
                    cultureInfo.DateTimeFormat.LongDatePattern = userSettings.Setting.Attributes[Constants.DateFormat];
                    cultureInfo.DateTimeFormat.ShortDatePattern = userSettings.Setting.Attributes[Constants.DateFormat];
                }
     } 
```

但是，当我将 UI 文本框中的日期值绑定到属性时，我只得到空值。我在这个过程中缺少什么。

用户给出的日期格式是“dd/mm/yy”。完成 MVC 模型绑定后，'01/11/12' 的输入绑定为 2012 年 1 月 11 日。

请提出问题以及解决方案将在哪里解决。

**编辑**

在像 mm/dd/yy 这样的日期格式字符串中是否只能将月份作为第一个。是否不可能将 dd/mm/yy 作为格式字符串。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T16:37:41.407

像这样的东西？

```
cultureInfo.DateTimeFormat.LongDatePattern = CultureInfo.CreateSpecificCulture("id-ID"); 
```

示例取自印度尼西亚的文化，我们使用 dd/MM/yyyy 格式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T17:17:32.610

也许您应该研究一种可以本地化的正式日期格式。我们选择使用 ISO 8601（现在是 WebAPI 的默认值）。然后，您可以确信您将从序列化格式中读取正确的日期。但是，您需要本地化时间（如果需要）。

Scott Hanselman 对这些问题有很好[的](http://www.hanselman.com/blog/OnTheNightmareThatIsJSONDatesPlusJSONNETAndASPNETWebAPI.aspx)描述。

[这个 datetime javascript](http://code.google.com/p/jquery-localtime/wiki/Usage)库看起来很有趣。

# html - CSS进度条错误

> ID：13917966
> 
> 赞同：1
> 
> 时间：2012-12-17T16:25:22.263
> 
> 标签：html, css, progress-bar

我一直在尝试在 jsFiddle 中正确显示此 CSS 代码，但似乎无法正常工作。我试图修改代码但没有成功。

[原始代码](http://www.cssdeck.com/labs/msy68kth)

[jsFiddle](http://www.jsfiddle.net/BQ9mF)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T16:36:12.813

你必须编译它：

```
<h1>Sexy CSS Loader</h1><div class="bubbles"><span></span><span id="bubble2"></span><span id="bubble3"></span></div> 
```

看看这个： [jsFiddle](http://jsfiddle.net/BQ9mF/2/)

# pdf - 使用插件增强现有 InDesign 功能？

> ID：13917967
> 
> 赞同：1
> 
> 时间：2012-12-17T16:25:27.757
> 
> 标签：pdf, plugins, export, adobe-indesign

如果我想为现有的 InDesign 功能添加新功能（例如，pdf 导出），我可以使用自定义插件来做到这一点，还是我必须完全制作一个全新的 pdf 导出插件，首先复制现有的所有功能pdf 导出功能，然后才添加我的新功能？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T17:01:50.790

如果它很简单，您可以有一个事件侦听器，它会`beforeExport`使用 InDesign 的 javascript 侦听事件。而且，在处理程序中，您可以在导出为 pdf 之前运行脚本。

```
var doc = app.activeDocument;

doc.addEventListener('beforeExport', beforeExport, false);

function beforeExport(e) {
   alert('hey');
   // Do stuff ...
} 
```

否则你可能需要走插件路线。您可以检查[InDesign SDK](http://www.adobe.com/devnet/indesign/sdk.html)以查看是否有用于 pdf 导出的 API。

# python - HTML Firefox 书签

> ID：13917970
> 
> 赞同：1
> 
> 时间：2012-12-17T16:25:37.547
> 
> 标签：python, html, internet-explorer, firefox, bookmarks

所以我有一个输出 Firefox 书签的 pythons 脚本。（不要问）：书签文件夹显示正确，但里面没有书签。我一直将它与有效的 Firefox html 导出进行比较，似乎找不到区别。很可能只需要一双新的眼睛。

哦，出于保密原因，真实的 ip 和名称被隐藏了。

这是输出的 html： [http ://pastebin.com/VKZukgk​​J](http://pastebin.com/VKZukgkJ)

这是一个有效的 Untouched firefox 导出（我与之比较的那个）： http: [//pastebin.com/24gQ9ii7](http://pastebin.com/24gQ9ii7)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T16:50:56.357

示例中的链接是完整的 URL（意味着它们包含协议）。您的示例似乎不包含协议，因此这可能是问题所在。

# java - 包 javadoc 中的动态内容

> ID：13917973
> 
> 赞同：1
> 
> 时间：2012-12-17T16:25:42.327
> 
> 标签：java, javadoc, packages

是否可以在包 javadoc 中（在 `package-info.java' 中）包含一些动态数据？具体来说，这应该是包中的许多源代码行、最后修改日期等 - 取决于可用的数据类型。

也许应该使用 javadoc 标签/注释以外的东西，比如在提交时更新的 VCS 标签？

# c# - 删除 Global.asax 仍在执行代码

> ID：13917974
> 
> 赞同：0
> 
> 时间：2012-12-17T16:25:52.110
> 
> 标签：c#, web, seo

我正在运行一个 asp.net Web 应用程序，为了优化搜索引擎，我希望将我购买的任何域名 301 重定向到我的首选域名。

出于测试目的，我在我的 localhost 项目中添加了一个 Global.asax 页面并添加了以下代码：

```
protected void Application_PreRequestHandlerExecute(Object sender, EventArgs e) 
{ 
  string currentUrl = HttpContext.Current.Request.Url.ToString();
  if(!currentUrl.StartsWith("http://www.mydomain.org")) 
  { 
    string strStart = currentUrl.Substring(0, currentUrl.indexOf(@"/Pages"));
    Response.Status = "301 Moved Permanently"; 
    Response.AddHeader("Location", currentUrl.Replace(strStart, "http://www.mydomain.org")); 
    Response.End(); 
  } 
} 
```

我用我当前的域名之一替换了“http://www.mydomain.org”。一切都如我所愿。但是，现在当我从 .asax 文件中删除该代码，甚至完全删除 asax 文件时，该代码片段仍然运行。如此有效地运行我的 localhost 项目会打开我的在线网站，我无法阻止这种行为。

我做了以下事情：

*   删除“临时 ASP.NET 文件”文件夹中的所有内容
*   删除了我的 /bin 文件夹和整个 /obj 文件夹中的 .dll
*   清理并重建了我的解决方案。
*   创建了一个全新的解决方案，然后向其中添加了文件。这最初是有效的，但随着 Global.asax 文件的添加，会发生相同的行为。

虽然这是我最终想要的行为，但我想在我第一次实现它之后运行、调试和编辑它。我以前见过同样的问题，但似乎是通过上述方法之一解决的。请帮忙！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-17T16:55:04.677

您的问题与您的代码无关。它是您正在努力解决的 301 的缓存。

301 的缓存可能会在您的请求通过过程中的许多地方发生，从您的浏览器开始，并且行为可能因此变得不可预测

# linux - AWK，如何计算 uniq http 代码

> ID：13917975
> 
> 赞同：0
> 
> 时间：2012-12-17T16:25:53.550
> 
> 标签：linux, awk

我有一个带有 http 代码的文件，例如。200、400、505……有很多。我可以列出唯一数据并使用 awk 计算单个代码的数量吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-17T16:42:46.283

使用`awk`：

```
$ cat file
200
400
200
200
404
500
404
404
500
500
500

$ awk '{a[$0]++}END{for(i in a){print i, a[i]}}' file
200 3
400 1
500 4
404 3 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-17T16:33:31.090

你甚至不需要使用 AWK 来完成这个任务：

```
$ cat tmp 
200
400
200
200
404
500
404
404
500
500
500
chuchao@chuchao:~/tmp/
$ sort tmp | uniq -c
      3 200
      1 400
      3 404
      4 500 
```

# android - 接受自签名 SSL 证书-> 在哪里设置默认 TrustManager

> ID：13917984
> 
> 赞同：6
> 
> 时间：2012-12-17T16:26:26.703
> 
> 标签：android, http, ssl, ssl-certificate, x509certificate

首先我不得不承认我知道接受所有证书可以被认为没有安全性。我们有“真正的”证书，但仅限于我们的实时系统。我们测试系统上的证书是自签名的。所以只要我们在开发，我们就必须使用测试服务器，这迫使我禁用证书。

我在 Stackoverflow 和整个网络上看到了很多主题，它们都在尝试做同样的事情：接受 SSL 证书。然而，这些答案似乎都不适用于我的问题，因为我没有搞乱`HTTPSUrlConnections`.

如果我正在发出请求，代码通常如下所示（为澄清而发表评论）：

```
//creates an HTTP-Post with an URL
HttpPost post = createBaseHttpPost();
//loads the request Data inside the httpPost
post.setEntity(getHttpPostEntity());
//appends some Headers like user-agend or Request UUIDs
appendHeaders(post);

HttpClient client = new DefaultHttpClient();
//mResponse is a custom Object which is returned 
//from the custom ResponseHandler(mResponseHandler) 
mResponse = client.execute(post, mResponseHandler);
return mResponse; 
```

我读到我应该注入自己的`TrustManager`和`X509HostnameVerivier`. 我这样创建它们：

```
private static final TrustManager[] TRUST_ALL_CERTS = new TrustManager[]{
        new X509TrustManager() {

            public X509Certificate[] getAcceptedIssuers() {
                return new X509Certificate[]{};
            }

            public void checkServerTrusted(X509Certificate[] chain, String authType)
                    throws CertificateException {
            }

            public void checkClientTrusted(X509Certificate[] chain, String authType)
                    throws CertificateException {
            }
        }

    };

    private static X509HostnameVerifier ACCEPT_ALL_HOSTNAMES = 
            new X509HostnameVerifier() {

                public void verify(String host, String[] cns, String[] subjectAlts)
                        throws SSLException {
                }

                public void verify(String host, X509Certificate cert) throws SSLException {
                }

                public void verify(String host, SSLSocket ssl) throws IOException {
                }

                public boolean verify(String host, SSLSession session) {
                    return true;
                }
            }; 
```

如果我像这样注入`HostnameVerifier`我的请求（客户端是上面的 DefaultHttpClient）

```
SSLSocketFactory ssl = (SSLSocketFactory)client.getConnectionManager().getSchemeRegistry().getScheme("https").getSocketFactory();
ssl.setHostnameVerifier(ACCEPT_ALL_HOSTNAMES); 
```

响应从“主机名**不匹配”变为“错误请求”。我想我必须设置 TrustManager，但我不知道在我的请求中设置它的位置，因为我没有使用在我查找它的所有地方提到的 HttpsUrlConnections。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-18T02:59:34.973

不，它不会强制您禁用验证，它会强制您正确实施验证。*不要*盲目接受所有证书。不，您的情况没有任何不同，您只需要信任 Android 默认不信任的证书。

您使用的是 HttpClient，因此用于设置信任管理器的 API 与 有所不同`HttpsURLConnection`，但过程相同：

1.  使用受信任的证书（您的服务器的自签名证书）加载密钥库文件
2.  用它初始化 a `KeyStore`。
3.  `SocketFactory`使用`KeyStore`from 2创建一个。
4.  设置您的 HTTP 客户端库以在创建 SSL 套接字时使用它。

这在 Android 的文档中有所描述：http: [//developer.android.com/reference/org/apache/http/conn/ssl/SSLSocketFactory.html](http://developer.android.com/reference/org/apache/http/conn/ssl/SSLSocketFactory.html)

关于这个主题的更详细的文章，展示了如何创建信任存储文件： http: [//blog.crazybob.org/2010/02/android-trusting-ssl-certificates.html](http://blog.crazybob.org/2010/02/android-trusting-ssl-certificates.html)

一些背景信息和示例代码： http: [//nelenkov.blogspot.com/2011/12/using-custom-certificate-trust-store-on.html](http://nelenkov.blogspot.com/2011/12/using-custom-certificate-trust-store-on.html)

这是初始化 HttpClient 所需的代码：

```
KeyStore localTrustStore = KeyStore.getInstance("BKS");
InputStream in = getResources().openRawResource(R.raw.mytruststore);
localTrustStore.load(in, TRUSTSTORE_PASSWORD.toCharArray());

SchemeRegistry schemeRegistry = new SchemeRegistry();
schemeRegistry.register(new Scheme("http", PlainSocketFactory
                .getSocketFactory(), 80));
SSLSocketFactory sslSocketFactory = new SSLSocketFactory(localTrustStore);
schemeRegistry.register(new Scheme("https", sslSocketFactory, 443));
HttpParams params = new BasicHttpParams();
ClientConnectionManager cm = 
    new ThreadSafeClientConnManager(params, schemeRegistry);

HttpClient client = new DefaultHttpClient(cm, params); 
```

此时，您没有任何理由信任所有证书。如果你这样做了，一切都在你身上:)

# c# - SQL Server 导出到 Excel

> ID：13917991
> 
> 赞同：0
> 
> 时间：2012-12-17T16:26:49.440
> 
> 标签：c#, sql, sql-server, asp.net-mvc-3, excel

如何提高将具有一对多关系（在这种情况下为多对多关系）的表的数据库导出到单个 Excel 文件中的性能。

现在，我从数据库中获取所有数据并使用几个 for 循环将其处理成一个表，然后我更改 html 文件的标题以将其下载为 excel 文件。但是我拥有的记录数量需要一段时间（大约 300 条记录。）

我只是想知道，是否有更快的方法来提高性能。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T17:45:51.757

听起来您正在使用 c# 代码将每个表加载到内存中，然后通过循环数据来构建一个平面表。一种更简单、更快捷的方法是使用带有一些 JOIN 的 SQL 查询：http: ~~//www.w3schools.com/sql/sql_join.asp~~ [http://en.wikipedia.org/wiki/加入_(SQL](http://en.wikipedia.org/wiki/Join_(SQL) )

另外，我的印象是您将生成的平面表呈现为 html，然后将其保存为 excel 文件。有几种方法可以直接创建该 excel（或 csv）文件，而无需先将其转换为 html 表格。

# node.js - 提示时 STDOUT 在 STDIN 前面？

> ID：13917992
> 
> 赞同：2
> 
> 时间：2012-12-17T16:26:52.673
> 
> 标签：node.js, stdout, stdin, prompt

我有一个 setInterval 每秒记录一次时间。我想使用 STDIN 在我的脚本中执行命令，但 STDOUT 在我键入时移动光标并将其自身置于提示符中。

我对提示没有太多经验，只是开始深入研究。

脚本：

```
setInterval(function(){
    console.log(new Date().toUTCString());
},1000)

var readline = require('readline');

var rl = readline.createInterface({
  input: process.stdin,
  output: process.stdout
});

rl.question("Hi there, how are you?", function(answer) {

}); 
```

输出：

```
Hi there, how are you?Mon, 17 Dec 2012 16:20:34 GMT
fine
Mon, 17 Dec 2012 16:20:35 GMT
Mon, 17 Dec 2012 16:20:36 GMT
Mon, 17 Dec 2012 16:20:37 GMT
Mon, 17 Dec 2012 16:20:38 GMT 
```

你会如何解决这样的问题？缓存所有的STDOUT，清屏，写入所有的STDOUT，每次console.log() 记录时再次提示？

是的，我确实想创建某种基于聊天的系统/命令行界面，其中输出保持在输入之上。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-17T16:48:22.997

基本上你要问的是如何制作一个复杂的终端应用程序。最流行的库被称为`ncurses`，它[在这里有节点绑定](https://github.com/mscdex/node-ncurses)。不幸的是，我没有使用它的个人经验。

您的另一个选择是按照您所说的去做，并使用您自己的内部缓冲区手动重新渲染终端。您可以使用 Node 的`tty`模块[docs here](http://nodejs.org/api/tty.html)获取输出终端的大小，然后使用[ANSI 转义码](http://en.wikipedia.org/wiki/ANSI_escape_code)清除终端，将光标定位到您想要的位置，然后使用`process.stdout.write`打印您想要的内容。

[你可以在这里](https://stackoverflow.com/questions/8813142/clear-terminal-window-in-node-js-readline-shell/8813316#8813316)看到我的另一个问题中使用转义码的例子

# facebook - Facebook Graph API - 成功时出错？

> ID：13917993
> 
> 赞同：0
> 
> 时间：2012-12-17T16:27:06.250
> 
> 标签：facebook, google-chrome, facebook-javascript-sdk, photo-upload

我正在使用 Facebook Javascript SDK 将照片上传到用户的时间轴。这是我的电话：

```
function post_photo_to_facebook() {
    var file_name = 'https://my-image.url.com/image.jpg';
    var access_token = FB.getAuthResponse()['accessToken'];
    $.ajax({
        type: "POST",
        url: "https://graph.facebook.com/me/photos",
        data: {
            message: "Here is my message",
            url: file_name,
            access_token: access_token,
            format: "json"
        },
        success: function(data){
            alert("POST SUCCESSFUL");
        },
        error: function(data){
            alert('Error');
            console.log(data);
        }
    });
} 
```

在 Chrome 中，我收到来自此 AJAX 调用的错误，但 statusText 为“OK”，并且图像已成功上传到我的时间轴。我只是想知道我在这里缺少什么-为什么会调用错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T16:53:51.727

由于 CORS 的原因，您应该使用[FB.api上传图像，而不是 ajax POST。](http://developers.facebook.com/docs/reference/javascript/FB.api/)

所以你上面的代码看起来像这样：

```
var file_name = 'https://my-image.url.com/image.jpg';

FB.api('/me/photos', 'post', {
    message:'Here is my message',
    url:file_name        
}, function(response){

    if (!response || response.error) {
        alert('Error occured');
    } else {
        alert('Post ID: ' + response.id);
    }

}); 
```

你`FB.init`用来设置你的令牌等。

# php - Internet Explorer 中的 cookie 问题

> ID：13917995
> 
> 赞同：0
> 
> 时间：2012-12-17T16:27:14.583
> 
> 标签：php, internet-explorer, session, cookies

我遇到了未知问题，即我无法取消与浏览器的会话。

这是我检查每个请求的代码：

```
if (isset($_SESSION["logid"])) {
    $log = TRUE;
    $logid = $_SESSION["logid"];
    $session_id = $_SESSION["sid"];
} else {
    $log = FALSE;
}
if (!isset($_COOKIE["cook"])) {
    if ($log) {
        unset($_SESSION["logid"]);
        unset($_SESSION["sid"]);
        $log = false;
    }
    $expire = time() + 60 * 60 * 24 * 30 * 2;
    $data = array(
        "ip" => $_SERVER['REMOTE_ADDR'],
        "browser" => $_SERVER['HTTP_USER_AGENT'],
        "create_time" => $now
    );
    $result = $db->insert("cookies", $data);
    $cookie_id = $db->lastid;
    $cookie_id = my_encrypt($cookie_id);
    setcookie("cook", $cookie_id, $expire, "/");
} else {
    $cookie_id = $_COOKIE["cook"];
} 
```

注销代码在这里

```
unset($_SESSION["logid"]);
unset($_SESSION["sid"]); 
```

我不想取消设置/过期名为**Cook**的 cookie ，但如果手动删除 cookie 或其他原因，我想创建它，所以第一个块中的代码会这样做。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T16:32:36.907

不太确定我是否理解这个问题，但也许这会有所帮助。所有浏览器实例（窗口或选项卡）共享同一个 cookie jar。虽然这在“现实生活”中很少成为问题，但它会对开发人员造成严重破坏，因为作为开发人员，您可能会打开许多​​选项卡。如果您想测试更改 cookie 的应用程序（例如登录或注销），您应该关闭浏览器的所有实例并仅打开一个实例，然后进行测试。

# java - CountDownTimer 琐事游戏得分 - Android (java)

> ID：13917997
> 
> 赞同：1
> 
> 时间：2012-12-17T16:27:20.963
> 
> 标签：java, android, countdowntimer

我有一个显示 10 个问题的问答游戏，每个问题都有一个 10 秒的计时器。我有 2 个无法正常工作的问题。

首先，如果计时器在一个问题上用完，它会显示下一个问题，但计时器不会重置。文本视图停留在“时间到了！” 和“经过的时间：10000”，而不是在显示的新问题上重新启动计时器。

最后，在结果页面上，正确的分数不会显示在文本视图中。百分比 textview 显示正确，但得分 textview 显示“android.widget.TextView@416473c”或其他一些随机内存位置。

该程序永远不会崩溃，只是功能不正确。非常感谢任何代码结构或其他建议！这是我第一次尝试安卓移动应用程序，我正在缓慢而艰难地完成它。还是很享受！:)

QuestionView.java

```
public class QuestionView extends Activity  {

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.questionviewmain);

        answer1 = (Button)findViewById(R.id.answer1);
        answer2 = (Button)findViewById(R.id.answer2);
        answer3 = (Button)findViewById(R.id.answer3);
        answer4 = (Button)findViewById(R.id.answer4);

        question = (TextView)findViewById(R.id.question);
        queries = getIntent().getParcelableArrayListExtra("queries");
        timer = (TextView)findViewById(R.id.timer);
        timeElapsedView = (TextView)findViewById(R.id.timeElapsedView);
        cdTimer = new Timer(startTime, interval);
        loadQuestion();
    }

    public void loadQuestion() {

        if(i == 9) {    
            endQuiz();  
        } else {    
            if(!timerHasStarted) {
                cdTimer.start();
                timerHasStarted = true;
            } else {
                cdTimer.cancel();
                timerHasStarted = false;
            }
            answer = queries.get(i).getCorrectAnswer();
            question.setText(queries.get(i).getQuery());

            answer1.setText(queries.get(i).getA1());
            answer2.setText(queries.get(i).getA2());
            answer3.setText(queries.get(i).getA3());
            answer4.setText(queries.get(i).getA4());

            answer1.setOnClickListener(new OnClickListener() {
                public void onClick(View arg0) {
                    queries.get(i).setSelectedAnswer(0);
                    if(answer == 0) {
                        correctAnswers++;
                        nextQuestion();
                    } else {
                        wrongAnswers++;
                        nextQuestion();
                    }
                }
            });

           //same type of code for buttons for answers 2 through 4.
                } 
    }

    public void nextQuestion() {
        score = score + timeElapsed;
        i++;
        loadQuestion();
    }

    public class Timer extends CountDownTimer {     
        public Timer(long startTime, long interval) {
            super(startTime, interval);
        }

        public void onFinish() {
            if(i == 9) {
                cdTimer.cancel();
            } else {
                timer.setText("Time's up!");
                timeElapsedView.setText("Time Elapsed: " + String.valueOf(startTime));
                wrongAnswers++;
                nextQuestion();
            }
        }

        public void onTick(long millisUntilFinished) {
            timer.setText("Time remain: " + Long.toString(millisUntilFinished));
            timeElapsed = startTime - millisUntilFinished;
            timeElapsedView.setText("Time Elapsed: " + Long.toString(timeElapsed));
        }
    }

    public void endQuiz() {
        Intent intent = new Intent(QuestionView.this, Results.class);
        intent.putExtra("correctAnswers", correctAnswers);
        intent.putExtra("wrongAnswers", wrongAnswers);
        intent.putExtra("score", score);
        intent.putParcelableArrayListExtra("queries", queries);
        startActivity(intent);
    }
} 
```

结果.java

```
 public class Results extends Activity {

    QuestionView qv = new QuestionView();
    ArrayList<Question> queryList = qv.getQueries();

    int cAnswers;
    int wAnswers;

    long score;

    ArrayList<Question> qs;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.resultsmain);

        cAnswers = getIntent().getIntExtra("correctAnswers", -1);
        wAnswers = getIntent().getIntExtra("wrongAnswers", -1);
        score = getIntent().getLongExtra("score", -1);

        qs = getIntent().getParcelableArrayListExtra("queries");

        Button mainmenuBtn = (Button)findViewById(R.id.mainmenuBtn);
        mainmenuBtn.setText("Main Menu");

        mainmenuBtn.setOnClickListener(new OnClickListener() {
            public void onClick(View arg0) {
                restart();
            }
        });

        showResults();
    }

    public void showResults() {

        ArrayList<TextView> tList = new ArrayList<TextView>(9);

        TextView header = (TextView)findViewById(R.id.header);
        header.setText("SUMMARY");

        TextView percentage = (TextView)findViewById(R.id.percentage);
        percentage.setText(Integer.toString(10 * cAnswers) + "%");

        TextView score = (TextView)findViewById(R.id.score);
        String s = "" + score;
        score.setText(s);

        TextView q1 = (TextView)findViewById(R.id.q1);
        TextView q2 = (TextView)findViewById(R.id.q2);
        TextView q3 = (TextView)findViewById(R.id.q3);
        TextView q4 = (TextView)findViewById(R.id.q4);
        TextView q5 = (TextView)findViewById(R.id.q5);
        TextView q6 = (TextView)findViewById(R.id.q6);
        TextView q7 = (TextView)findViewById(R.id.q7);
        TextView q8 = (TextView)findViewById(R.id.q8);
        TextView q9 = (TextView)findViewById(R.id.q9);
        TextView q10 = (TextView)findViewById(R.id.q10);

        tList.add(q1);
        tList.add(q2);
        tList.add(q3);
        tList.add(q4);
        tList.add(q5);
        tList.add(q6);
        tList.add(q7);
        tList.add(q8);
        tList.add(q9);
        tList.add(q10);

        for(int i = 0; i < tList.size(); i++) {
            tList.get(i).setText(qs.get(i).getQuery());
            if(qs.get(i).getSelectedAnswer() == qs.get(i).getCorrectAnswer()) {
                tList.get(i).setTextColor(Color.GREEN);
            } else {
                tList.get(i).setTextColor(Color.RED);
            }
        }
    }

    public void restart() {
        Intent intent = new Intent(Results.this, MainMenu.class);
        startActivity(intent);
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-17T16:35:38.350

从所有这些代码中，这就是我认为正在发生的事情

> 首先，如果计时器在一个问题上用完，它会显示下一个问题，但计时器不会重置。文本视图停留在“时间到了！” 和“经过的时间：10000”，而不是在显示的新问题上重新启动计时器。

这似乎是由于您没有`timerHasStarted`在时间用完后将变量设置为 false，所以我可能会在您加载下一个问题或显示结果后将其设置为 false。

> 最后，在结果页面上，正确的分数不会显示在文本视图中。百分比 textview 显示正确，但得分 textview 显示“android.widget.TextView@416473c”或其他一些随机内存位置。

这是因为您将 q 变量设置为 textview 并获取 id。你需要类似的东西`q1.getText().toString()`

您有多个具有相同名称分数的变量。所以改成

```
 TextView score2 = (TextView)findViewById(R.id.score);
  String s = "" + score;
  score2.setText(s); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-23T15:50:03.053

分数显示的不是您所期望的，因为您分配的`String s = "" + score`where`score`是您命名的`Textview`，显然不是整数，也不等于用户的分数。:)