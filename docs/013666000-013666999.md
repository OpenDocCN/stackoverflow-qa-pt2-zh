# StackOverflow 问答 13666000-13666999

# c - MPI_Reduce 没有按预期工作

> ID：13666002
> 
> 赞同：2
> 
> 时间：2012-12-02T03:01:53.490
> 
> 标签：c, mpi, openmpi, reduction

我对 MPI 很陌生，我正在尝试使用 MPI_Reduce 来查找整数数组的最大值。`arr`我有一个size的整数数组`arraysize`，这是我的代码：

```
MPI_Init(&argc, &argv);
MPI_Comm_size(MPI_COMM_WORLD, &number_of_processes);
MPI_Comm_rank(MPI_COMM_WORLD, &my_process_id);
MPI_Bcast(arr, arraysize, MPI_INT, 0, MPI_COMM_WORLD);
MPI_Reduce(arr, &result, arraysize, MPI_INT, MPI_MAX, 0, MPI_COMM_WORLD);

if(!my_process_id){
    printf("%d", result);
}

MPI_Finalize(); 
```

我的程序在 8 个进程上编译并运行没有问题，但是屏幕上没有打印任何内容。出于调试目的，我将条件更改为`if(my_process_id)`（不带`!`）并运行。然后我得到一个奇怪的输出，例如`00030000`3 可能不确定地出现在这个列表中的任何位置。3 是我的数组的第一个值（但不是最大值）。我一般都知道并行编程（不是专家，但我通常知道我在做什么）但我对 MPI 很陌生，因为我可能会犯一个明显的错误。我在网上看到的所有教程都有与我相似的代码示例，我不知道我做错了什么。

谢谢，

能。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-02T13:09:00.097

`MPI_Reduce`完全按照它应该工作的方式工作。你是那个没有按照它应该被使用的方式使用它的人。

`MPI_Reduce`执行按*元素*减少数据，分布在 MPI 作业的等级中。源缓冲区和目标缓冲区都应该是 size 数组`arraysize`，例如：

```
int arr[arraysize];
int result[arraysize];

// Fill local arr with meaningful data
...
// Perform reduction
MPI_Reduce(arr, result, arraysize, MPI_INT, MPI_MAX, 0, MPI_COMM_WORLD); 
```

以下是什么`MPI_Reduce`：

```
result[0] = max(arr_0[0], arr_1[0], ..., arr_(N-1)[0]);
result[1] = max(arr_0[1], arr_1[1], ..., arr_(N-1)[1]);
...
result[arraysize-1] = max(arr_0[arraysize-1], ..., arr_(N-1)[arraysize-1]); 
```

其中`arr_0`是`arr`rank 0`arr_1`的副本，`arr`是 rank 1 的副本，依此类推。

的组合`MPI_Bcast`，然后是减少，绝对`MPI_MAX`没有*任何*作用，因为广播后的所有副本都`arr`将具有相同的值，并且逐元素`max`减少的应用只会产生相同的值。更糟糕的是，我会假设`result`在您的代码中是一个标量整数变量，因此`MPI_Reduce`会覆盖`arraysize-1`过去的元素`result`并且很可能会破坏堆栈框架，覆盖`my_process_id`in rank的值，`0`因此它`0`不再是（因此没有打印任何内容）和崩溃排名`0`然后。当然，这完全取决于局部变量在堆栈中的排列方式——其含义可能没有我描述的那么严重。

如果您想找到一个数组的最大值，您应该首先使用 分配它`MPI_Scatter`，然后使用`MPI_Reduce`执行元素级归约，然后对结果执行另一次归约：

```
int elements_per_proc = arraysize/number_of_processes;
int arr[arraysize];
int subarr[elements_per_proc];
int partres[elements_per_proc];

// Distribute the array
MPI_Scatter(arr, elements_per_proc, MPI_INT,
            subarr, elements_per_proc, MPI_INT, 0, MPI_COMM_WORLD);

// Perform element-wise max reduction
MPI_Reduce(subarr, partres, elements_per_proc, MPI_INT,
           MPI_MAX, 0, MPI_COMM_WORLD);

// Take the highest of the partial max values
result = partres[0];
for (int i = 1; i < elements_per_proc; i++)
   if (partres[i] > result) result = partres[i]; 
```

现在你有了 中最大元素的值`result`。

甚至更好：

```
int localmax;

// Distribute the array
MPI_Scatter(arr, elements_per_proc, MPI_INT,
            subarr, elements_per_proc, MPI_INT, 0, MPI_COMM_WORLD);

// Find the maximum element of the local subarray
localmax = subarr[0];
for (int i = 1; i < elements_per_proc; i++)
   if (subarr[i] > localmax) localmax = subarr[i];

// Perform global max reduction
MPI_Reduce(&localmax, &result, 1, MPI_INT, MPI_MAX, 0, MPI_COMM_WORLD); 
```

# c# - 如何获取 C# 错误列表以即时反映错误 ？

> ID：13666003
> 
> 赞同：1
> 
> 时间：2012-12-02T03:01:54.637
> 
> 标签：c#, visual-studio-2010, visual-studio

我已经用 C# 编码了一段时间了，我想知道......

我以前做过很多vb.net。我的经验是，当整个解决方案的某个地方出现错误时，VS 中的错误列表会立即反映出来。这对我很有帮助，例如，当我编写一些代码来调用不存在的新类中的一些新函数时，错误列表会标记它们。所以我可以去编写这个新类并填写那些新功能，通过检查错误列表知道我没有遗漏任何东西......类似的事情。

但是，在 C# 中，错误列表不会立即反映我犯的大多数错误。（只有文本编辑器突出显示它，而不是错误列表）直到我点击构建。即使这样，错误列表也只会显示第一层错误，在我修复某些内容并再次构建后，错误列表会显示更多错误。

我不得不说 vb.net 错误列表在这个意义上更有帮助。是否有可能让 C# 错误列表立即反映 vb.net 错误列表之类的错误？

顺便说一句，我也有 Resharper，我不确定它是否会帮助我将任何内容路由到错误列表窗口。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T03:13:30.383

据我所知：[没有](http://en.wikipedia.org/wiki/Comparison_of_C_Sharp_and_Visual_Basic_.NET#Development_environment)。这只是 C# 和 VB 编译器与 Visual Studio 集成之间的区别。你只需要养成按F6的习惯。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-02T03:24:14.540

在 VS2010 选项中，查看是否在 Text Editor | 下选中了“显示实时语义错误”复选框。C# | 先进的。在我的配置中，当该设置打开时，我会在错误列表中获得即时反馈。如果我关闭复选框，错误列表将不再反映错误。

# php - 使用 preg_match PHP 从字符串中查找失败的行

> ID：13666004
> 
> 赞同：2
> 
> 时间：2012-12-02T03:01:55.310
> 
> 标签：php, regex

我需要在 PHP 中使用 preg_match 编写正则表达式来执行下一步：

我确实有这样的字符串：

test1:OK
test2:OK
test3:FAILD
test4:PROGRESS
test5:OK

所以我需要找到不正常的行..
test3:FAILD
test4:PROGRESS

所以我想我必须检查**:**和**\r\n (\n)**之间的字符串，如果 != OK，我该如何使用 preg_match？

非常感谢帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T03:08:12.073

为什么使用正则表达式？字符串函数应该就可以了；正则表达式更像是最后的手段。

```
$lines = explode("\n", str_replace("\r\n", "\n", $lines));
$failed = array();

foreach ($lines as $line) {
    if (strpos($line, 'OK') === false) {
        $failed[] = $line;
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-02T03:14:00.017

`preg_match_all('/test\d+:(?!OK)/', $allrows, $rowsNotOk)`

# javascript - 在回调函数中访问变量...什么？

> ID：13666009
> 
> 赞同：1
> 
> 时间：2012-12-02T03:03:18.290
> 
> 标签：javascript, jquery

我经历了很多帖子，我终于得到了我需要的东西，这要归功于：

```
$("a.foo").click(function(){
    var that = this;
    jPrompt("Type something:","","", function(r) {
        $(that).text(r);
    }
} 
```

来自以下内容： [在回调函数中访问 $(this)](https://stackoverflow.com/questions/825117/accessing-this-within-a-callback-function)

我想知道是否有人可以扩展这里到底发生了什么（为什么`this`不重新分配就不能使用？）以及我应该阅读哪些核心信息？据我所知，这可能与闭包有关……这是我在四处搜索时遇到的大部分内容。那准确吗？

就我而言，我希望执行一些代码，然后在 ajax 请求完成后重定向。在我正在运行的回调函数`$(this).attr("href")`中返回未定义。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-02T03:11:40.583

`this`由javascript根据函数的调用方式分配。因此，当调用 回调时，该`jPrompt()`函数决定了回调中的值。`this``jPrompt()`

因此，除非 jPrompt 不遗余力地`this`通过您传入的某些参数保持相同的值，否则它可能具有不同的值。因此，您可以将其保存起来以便在回调中访问，就像您所做的那样。这是 javascript 回调中非常常见的设计模式。

仅供参考，`this`分配的一些方式：

*   `obj.method()`- `this`in`method()`将设置为`obj`
*   `func.call(obj)`- `this`in`func()`将设置为`obj`
*   `func()`-`this`将设置为`window`严格模式`func()`或`undefined`严格模式

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-02T03:14:38.123

问题中的代码带有一些添加的注释：

```
$("a.foo").click(function(){
    var that = this; //`this` holds the a object clicked.  now so does `that`! 
    jPrompt("Type something:","","", function(r) { 
        //even if `this` has a different value here, `that` still holds the a object clicked
        $(that).text(r);
    }
} 
```

这是您经常会发现自己在类似情况下所做的事情。 `this`是上下文相关的，您经常需要将值保留`this`在一个上下文中并在另一个上下文中使用它。

来自 ECMAScript 规范的引用：

> ### 10.1.7 这个
> 
> 每个活动的执行上下文都有一个*this值。**this*值取决于调用者和正在执行的代码类型，并在控制进入执行上下文时确定。

希望这能回答你的问题。您还要求提供进一步阅读的资源。请拜访：

[https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Operators/this](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Operators/this)

这些人提供了详细且通常非常准确的优秀文档（不像其他流行的参考来源，通常首先出现在 Google 搜索中——w3cshools.com 我在想你！）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-02T03:17:18.223

含义的`this`变化取决于你在哪里。`this`单击事件的内部处理程序意味着`this`传递给您的`jPrompt`函数的回调内部以外的其他内容。

对于它的价值，您不需要重新分配`this`，因为`event`传递给您的处理程序的对象将引用`currentTarget`：

```
$("a.foo").on("click", function (event) {
    // 'this' here refers to the anchor we clicked
    jPrompt("Type something:", "", "", function (r) {
        // 'this' here refers to whatever jPrompt instructs
        $(event.currentTarget).text(r);
    }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-02T06:00:56.140

## 简要概述`this`

`this`在 JavaScript 中是**动态作用域**的。它的行为不同于所有其他**词法范围**的变量。其他变量没有不同的绑定，具体取决于*函数*的调用方式；它们的范围来自它们在脚本中出现的*位置。*`this`但是行为不同，并且可以具有不同的绑定，这取决于它在脚本中出现的*位置，而**取决于*它的调用方式。因此，对于学习这门语言的人来说，它可能是一个困惑的根源，但要成为一名熟练的 JavaScript 开发人员，掌握它是必要的。

由于`this`是动态绑定的，因此有多种方法可以根据您调用函数的方式更改其值。

* * *

## 例子

在 JavaScript 中执行函数时，默认`this`值为`window`.

```
function foo() {
    console.log(this);
}

foo(); // => window 
```

`this`可以通过多种方式更改该值。一种方法是将函数作为对象的方法调用：

```
var x = {
    foo: function() {
        console.log(this);
    }
};
x.foo(); // => This time it's the x object. 
```

另一种方法是使用`call`或`apply`告诉函数在某个对象的上下文中执行。

```
function foo() {
    console.log(this);
}
foo.call(x); // => x object again
foo.apply(x); // => x object as well 
```

如果你`call`或`apply`在`null`或`undefined`，默认行为将再次发生：该函数将在上下文中执行`window`：

```
function foo() {
    console.log(this);
}
foo.call(null); // => window
foo.apply(undefined); // => window 
```

但是，请注意，在 ECMAScript 5**严格模式下**，`this`不默认为窗口：

```
(function() {

    'use strict';

    function foo() {
        console.log(this);
    }

    foo(); // => undefined
    foo.call(null); // => null
    foo.apply(undefined); // => undefined

})(); 
```

您还可以在调用函数之前将其设置为`this`将`bind`函数绑定到对象：

```
function foo() {
    console.log(this);
}

var bar = {
    baz: 'some property'
};

var foobar = foo.bind(bar);

foobar(); // => calls foo with bar as this 
```

* * *

## 成为父亲：懒惰的绑定/ Uncurrying`this`

更进一步，您有时可能希望采用作用于 a`this`并允许将`this`值作为函数的第一个参数传入的函数。这对于 Array 方法非常有用，例如`forEach`. 例如，假设您正在处理一个类似数组但实际上不是数组的对象。

```
var arrayLike = {
    '0': 'a',
    '1': 'b',
    '2': 'c',
    'length': 3
}; 
```

如果你想用 迭代这个对象`forEach`，你可以使用`call`：

```
Array.prototype.forEach.call(arrayLike, function(item) {
    console.log(item);
});
// Logs: a, b, c 
```

但是，另一种选择是创建一个`forEach`可以直接在您的对象上调用的函数：

```
var forEach = Function.prototype.call.bind(Array.prototype.forEach); 
```

现在，您可以在任何时候想要迭代类似数组的对象时使用此函数：

```
forEach(arrayLike, function(item) {
    console.log(item);
});
// Logs: a, b, c 
```

有时这种方法被称为“uncurrying `this`”。但是，我更喜欢创建一个可以生成这些“非curried”函数并将其称为“惰性绑定”的函数。

```
var lazyBind = Function.prototype.bind.bind(Function.prototype.call);

var forEach = lazyBind(Array.prototype.forEach);
var slice = lazyBind(Array.prototype.slice);
var map = lazyBind(Array.prototype.map);

forEach(arrayLike, function(u) {
    console.log(u);
});
// Logs: a, b, c

var realArray = slice(arrayLike);
// Converts arrayLike into a real array

forEach(
    map(arrayLike, function(u) {
        return u + 'Q';
    }),
    function(u) {
        console.log(u);
    }
);
// Logs: aQ, bQ, cQ 
```

关于这种技术的一个非常棒的事情是它可以用于创建安全的 JavaScript，如果您不希望页面上的其他脚本窥探您的内部变量，这将很有帮助。不过，这是一种非常先进的元编程技术，您在日常 JavaScript 中看不到它。

# php - 重定向除我的 ip index.php 之外的所有人

> ID：13666010
> 
> 赞同：0
> 
> 时间：2012-12-02T03:03:29.433
> 
> 标签：php

我正在运行一个网站，我的网站根目录有 .htaccess 和 index.php，现在我想将所有用户/流量重定向到“Under-Construction.php”页面，但我的 IP 地址除外。IE

www.example.com 重定向到“www.example.com/under-construction/under-construction.php”，但我的 IP 地址除外。

1.  如何使用 .htaccess 做到这一点。
2.  如何使用 index.php 做到这一点。例如：如果 $_SERVER['REMOTE_ADDR'] 是 123.123.123 重定向 index.php 否则重定向 "www.example.com/under-construction/under-construction.php"

问候。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-02T03:09:28.730

像这样使用 php。将代码放在`index.php`.

```
if (!in_array(@$_SERVER['REMOTE_ADDR'], array('127.0.0.1', '123.123.123.123')))
{
  header('Location: http://www.example.com/under-construction/under-construction.php');
  exit;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-02T03:28:17.320

我在我的服务器上测试了这个：

```
    <?php
       // echo $_SERVER['REMOTE_ADDR'];
       // 用于概念证明
        if($_SERVER['REMOTE_ADDR'] == "123.123.123.123") {
            header('位置：http ://www.google.com/ ');
        }
    ?>

```

（显然那不是我的 ip；）

顺便说一句，这可能不是过滤传入客户端的最佳方法，特别是如果您没有将要请求的静态 IP 地址。也许在你的机器上设置一个 cookie 来告诉网站你是谁？或者添加一个 $_GET 参数，即如果 $_GET['dev'] == true 然后重定向。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-02T03:59:13.887

使用此`.htaccess`代码

```
<IfModule mod_rewrite.c>
RewriteEngine on
RewriteCond %{REQUEST_URI} ^\/index.php$
RewriteCond %{REMOTE_ADDR} !^127.0.0.1$    # replace 127.0.0.1 with your IP address
RewriteRule ^ http://www.example.com/under-construction/under-construction.php
</IfModule> 
```

**注意：**替换`127.0.0.1`为您的 IP 地址

# android - 按下时网格视图项目不突出显示

> ID：13666012
> 
> 赞同：6
> 
> 时间：2012-12-02T03:03:36.887
> 
> 标签：android, android-layout, android-widget

我的应用程序有一个网格视图，默认情况下，当我单击它时，它的项目不会突出显示（我不知道为什么？）。我尝试如下添加一个列表选择器，但它也不起作用，

```
<GridView
                android:id="@android:id/list"
                android:layout_width="fill_parent"
                android:layout_height="match_parent"
                android:layout_above="@+id/load_more_process_id"
                android:layout_alignParentTop="true"
                android:drawSelectorOnTop="false"
                android:listSelector="@drawable/grid_selector"
                 >
            </GridView> 
```

这是我的选择器：

```
<selector xmlns:android="http://schemas.android.com/apk/res/android" >
<item android:state_pressed="true" android:drawable="@android:color/black"></item>
<item android:state_pressed="false" android:drawable="@android:color/white"></item> 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-02T09:19:34.617

如果列表项内容（或每个网格项的视图）中有可聚焦元素，则不会绘制选择器

例如，如果您的列表项的模板是：

```
<LinearLayout android:orientation="horizontal" ... >
    <CheckBox android:id="@+id/checkBox" ... />
    <TextView android:id+"@+id/textView" ... />
</LinearLayout> 
```

那么 ListView 将不会为每个 ListView 项目绘制选择器，因为 CheckBox 默认情况下是可聚焦的。

您可以为每个随选择状态更改的项目提供背景，或者禁用对所有可聚焦元素的焦点（这反过来需要您编写一个梦幻般的适配器来在选择状态更改时检查复选框。

例如：

```
<CheckBox android:id="@+id/checkBox" android:focusable="false" ... /> 
```

将导致封闭的 ListView 再次开始绘制选择器。

有状态可绘制的示例：

可绘制/my_list_selector_bg.xml：

```
<selector xmlns:android="http://schemas.android.com/apk/res/android">
    <item android:drawable="@drawable/list_background_pressed"
        android:state_pressed="true" />
    <item android:drawable="@drawable/list_background_focused"
        android:state_focused="true" />
    <item android:drawable="@android:color/transparent" />
 </selector> 
```

然后将其应用于适配器返回的每个视图的背景：

```
<LinearLayout android:orientation="horizontal" 
      android:background="@drawable/my_list_selector_bg"
  ... > 
```

任何一种方法都行得通。

列表适配器类（GridView、ListView 和 c）对适配器返回的每个视图调用 hasFocusable()，如果 hasFocusable() 返回 true，则禁用选择绘制。幸运的是，它们还将选择/焦点/按下/活动状态复制到当前焦点或选定的适配器项，因此您可以根据需要自己绘制它。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2014-10-18T03:26:11.340

对于那些和我有同样问题的人，试试

**gridView.setDrawSelectorOnTop(true);**

我的每个 GridView 项目中都有一个 ImageView 和一个 TextView。我的选择器正在工作，但它在我的图像后面绘制。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-12-02T05:43:42.177

1.  网格视图的布局：

    ```
     <GridView xmlns:android="http://schemas.android.com/apk/res/android" 
     android:listSelector="@drawable/gridselector"/> 
    ```

2.  创建自定义选择器 gridselector.xml，如：

    ```
    <selector xmlns:android="http://schemas.android.com/apk/res/android"
     android:id="@+id/selector_item">
       <item 
         android:state_pressed="true" 
         android:drawable="@drawable/focus_offfocus">
      </item>

       <item 
          android:state_enabled="true" 
          android:state_focused="true" 
          android:drawable="@drawable/focus_onfocus">
      </item>

      <item android:state_enabled="true" 
        android:drawable="@drawable/focus_offfocus">
      </item> 
    </selector> 
    ```

# apache - 远程操作与实验室仪器接口的程序

> ID：13666013
> 
> 赞同：1
> 
> 时间：2012-12-02T03:03:41.900
> 
> 标签：apache, unix, web, windows-xp

我在 VB 中编写了一个应用程序，它从仪器读取和显示数据并更改它们的设置。这些仪器在我的实验室中，但我想通过网络服务器从我的房间或校园 LAN 以外的任何地方远程访问它们。在网上搜索后，我意识到最好的办法是使用 Apache 服务器。

1.  我的 VB 应用程序应该在 apache 服务器中运行吗？显然有一种叫做应用服务器的东西。
2.  作为一种替代方法，我是否应该在服务器中编写一个应用程序，从我编写的代码中获取数据，然后使用或修改它？

或者还有其他方法可以解决我看不到的问题吗？

# cordova - 什么时候应该使用PhoneGap build？

> ID：13666018
> 
> 赞同：2
> 
> 时间：2012-12-02T03:04:37.430
> 
> 标签：cordova, mobile

我很困惑什么时候应该真正使用PhoneGap Build。构建似乎需要很长时间，因此使用它进行开发似乎不切实际，但我不确定。

因此，您是否应该在想要运行/调试应用程序时使用 PhoneGap Build，或者仅在您想要将应用程序部署到应用商店时使用（例如，您可以使用 Android 工具开发它，然后将其转换为与所有支持的设备一起工作）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-02T03:22:45.143

每当您想一次性为多个平台构建应用程序时，都应该使用 PhoneGap Build。是的，PhoneGap 构建速度很慢，但优点是您不必为每个平台管理 SDK 来构建。

在本地运行时调试应用程序要容易得多。每次进行更改并想查看它是否正常工作时，您都不能等待 PhoneGap Build 构建您的应用程序。

所以你是对的。将其用于本地开发是不切实际的。但是，如果您找不到 Apple Mac 来开发您的应用程序的 iOS 版本，PhoneGap 构建可能会有所帮助。了解[如何进行调试构建](https://build.phonegap.com/docs/phonegap-debug)。这似乎正在使用[Apache Weinre](http://people.apache.org/~pmuellr/weinre/docs/latest/)。

# objective-c - UTI 似乎没有正确保存

> ID：13666027
> 
> 赞同：1
> 
> 时间：2012-12-02T03:07:26.367
> 
> 标签：objective-c, uti

我有一个应该尝试保存 Markdown 文件的应用程序。这是我的 Info.plist 中的相关部分：

```
<dict>
    <key>CFBundleTypeExtensions</key>
    <array>
        <string>md</string>
    </array>
    <key>CFBundleTypeIconFile</key>
    <string>icon.icns</string>
    <key>CFBundleTypeName</key>
    <string>Markdown document</string>
    <key>CFBundleTypeRole</key>
    <string>Editor</string>
    <key>LSItemContentTypes</key>
    <array>
        <string>net.daringfireball.markdown</string>
    </array>
    <key>LSHandlerRank</key>
    <string>Owner</string>
    <key>NSDocumentClass</key>
    <string>MyDocument</string>
    <key>NSExportableAs</key>
    <array>
        <string>Microsoft Word Document</string>
        <string>RTF</string>
        <string>HTML</string>
    </array>
    <key>NSExportableTypes</key>
    <array>
        <string>net.daringfireball.markdown</string>
        <string>com.microsoft.word.doc</string>
        <string>public.rtf</string>
        <string>public.html</string>
    </array>
</dict> 
```

如您所见，我还需要该应用程序能够导出为 doc、html 和 rtf。

这是 UTExportedTypeDeclarations：

```
<dict>
    <key>UTTypeConformsTo</key>
    <array>
        <string>public.source</string>
    </array>
    <key>UTTypeDescription</key>
    <string>Markdown document</string>
    <key>UTTypeIdentifier</key>
    <string>net.daringfireball.markdown</string>
    <key>UTTypeTagSpecification</key>
    <dict>
        <key>public.filename-extension</key>
        <array>
            <string>md</string>
        </array>
    </dict>
</dict> 
```

现在，当我在我的应用程序中保存一个文档，然后`mdls`在我得到的文件上运行时：

```
kMDItemContentType             = "dyn.ah62d4rv4ge8043a"
kMDItemContentTypeTree         = (
    "dyn.ah62d4rv4ge8043a",
    "public.data",
    "public.item"
) 
```

此外，我的应用似乎无法打开之前保存的文件并出现错误：

> 错误域=NSCocoaErrorDomain Code=256 “无法重新打开自动保存的文档“test10.md”。” UserInfo=0x102210bf0 {NSLocalizedDescription=无法重新打开自动保存的文档“test10.md”。}

我究竟做错了什么？我怎样才能让它正确识别我的尿路感染？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-09T09:20:09.620

我相信你的符合是不正确的。您需要从物理树和功能树中获得超类型。

文档中有很多过时的东西，请参阅我关于您现在真正需要的部分的文章。例如，您不再需要可导出类型：http: [//www.cocoanetics.com/2012/09/fun-with-uti/](http://www.cocoanetics.com/2012/09/fun-with-uti/)

关于进出口。这取决于此应用程序是否拥有该文件类型。如果是这样，它应该导出它。如果不是，它应该导入它。在所有导出 IIRC 类型的应用程序中，最新的应用程序获胜。任何能够读取您的类型的应用程序都应该导入它。此外，声明他们能够从您的 UTI 向上使用的应用程序也可以打开该文件。例如，如果您的格式符合纯文本，那么 TextEdit 也可以打开它。

此外，通过您的试验，您可能无意中弄乱了您的启动服务 UTI 注册表。我的文章提到了一种清洁方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-08T22:13:13.113

在这里猜测，但如果类型已经在您的系统上（这两个似乎可能是），也许您应该导入它们类型而不是导出它们？

因此，而不是`UTExportedTypeDeclarations`这些应该在`UTImportedTypeDeclarations`数组中。

来自[UTI 概述](https://developer.apple.com/library/mac/#documentation/FileManagement/Conceptual/understanding_utis/understand_utis_declare/understand_utis_declare.html#//apple_ref/doc/uid/TP40001319-CH204-SW1)

> 如果您的代码依赖于系统上可能不存在的第三方 UTI 类型，则应将这些 UTI 声明为捆绑包中的导入类型。

# php - PHP使用JSON获取数据

> ID：13666029
> 
> 赞同：0
> 
> 时间：2012-12-02T03:07:36.383
> 
> 标签：php, json

我目前正在尝试本地化我的网站，所有数据都将存储在 JSON 文件中。所以我想知道如何使用php获取数据

**这是我的示例 JSON 文件/数据**

```
{
  "en-us": {
    "registration": {
      "INVALID_USERNAME": "your username is taken",
      "INVALID_PASSWORD": "your password is not strong",
      "INVALID_EMAIL": "your email is invalid"
    },
    "login": {
      "INVALID_USERNAME": "please enter your username",
      "INVALID_PASSWORD": "please enter your password",
      "INVALID_LOGIN": "username or password is wrong"
    }
  }
} 
```

现在我如何从**注册**部分获取值 INVALID_USERNAME？我已经尝试过了，但它不起作用。

```
$obj = json_decode(file_get_contents("en-us.json")); //file containing the json data above
echo $obj->{'INVALID_USERNAME'}; 
```

抱歉，我是 php 和 JSON 的新手，提前感谢您的帮助，Vidhu

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-02T03:16:36.597

你可以试试这个

```
$obj = json_decode(file_get_contents("en-us.json")); //file containing the json data above

echo $obj->{'en-us'}->{'registration'}->{'INVALID_USERNAME'}; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-02T03:40:40.603

作为您的问题的解决方案，请尝试执行以下代码片段

```
<?php
 $json_content=file_get_contents("en-us.json");
 $json_array=json_decode($json_content,true);
 if(!empty($json_array))
 {
    echo $json_array['en-us']['registration']['INVALID_USERNAME'];
 }
?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-02T03:10:02.117

你这样做是正确的：

```
$obj = json_decode(file_get_contents("en-us.json")); 
```

为了得到`INVALID_USERNAME`你需要做的事情：

```
$obj->en_us->registration->INVALID_USERNAME 
```

这是因为`INVALID_USERNAME`是对象内的一个属性`registration`，它是对象下的一个属性`en_us`。

# debugging - 当一切都失败时该怎么办

> ID：13666032
> 
> 赞同：0
> 
> 时间：2012-12-02T03:08:34.060
> 
> 标签：debugging, language-agnostic

我有一个讨厌的[Heisenbug](http://en.wikipedia.org/wiki/Heisenbug)和一个应用程序。一般而言，它是一个并行的 Fortran 程序，它生成一个具有 MPI-2`MPI_Comm_Spawn`功能的并行 C++ 程序，并且在某些时候它看起来像某个缓冲区溢出，因为奇怪的变量最终会得到更奇怪的（即移位的）值或变得未初始化第 2 次或第 3 次使用它（例如，`DO`循环中的计数器在与耦合数据完全无关的部分代码的迭代之间丢失了它的值）。

Valgrind 什么也没报告。电子围栏没有任何报告。`mtrace()`什么都不显示。GNU 和 Intel 编译器套件都显示出相同的问题，但都无法找出原因或位置。优化和调试显示不同的问题。mpich 和 OpenMPI 都显示出相同的问题。gdb、idb 和 Intel Inspector 什么也抓不到。添加打印语句会使崩溃更改位置，但它仍然会发生。

每个单元测试和验证测试都独立通过每个程序。他们之间的互动似乎是问题所在。但是我用过的任何工具都不能告诉我为什么或在哪里。

我完全不知所措。当您知道的每个工具和技巧都失败时，您会怎么做？还有其他我可能错过的工具吗？我即将彻底摧毁一切并重新开始，希望我不会再犯任何错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T03:14:39.187

您唯一能做的就是从最小工作集开始并添加直到它中断 - 或者有时，如果您真的很幸运，可以通过稍微不同的路径获得最终所需的结果

或者你可以转向喝酒

# c++ - C++ 截断常量值

> ID：13666033
> 
> 赞同：12
> 
> 时间：2012-12-02T03:08:36.083
> 
> 标签：c++, hex

我收到此警告

```
warning C4309: 'initializing' : truncation of constant value 
```

当我尝试执行我的 dll 时，它只发送 4 个字节而不是 10 个字节。
有什么问题？

这是我的代码：

```
int WINAPI MySend(SOCKET s, const char* buf, int len, int flags)
{

    cout << "[SEND:" << len << "] ";

    for ( int i = 0; i < len; i++ ) {
        printf( "%02x ", static_cast<unsigned char>( buf[i] ) );
    }

    printf("\n");

    //causing the warning:
    char storagepkt[] = {0x0A, 0x00, 0x01, 0x40, 0x79, 0xEA, 0x60, 0x1D, 0x6B, 0x3E};

    buf = storagepkt;
    len = sizeof(storagepkt);

    return pSend(s, buf, len, flags);
} 
```

* * *

**更新**

```
int (WINAPI *pSend)(SOCKET s, const char* buf, int len, int flags) = send;
int WINAPI MySend(SOCKET s, const char* buf, int len, int flags); 
```

* * *

**更新**

正如建议的那样，我尝试了 memcpy：

```
memcpy((char*) buf, storagepkt, sizeof(storagepkt)); 
```

* * *

**更新**

```
unsigned char storagepkt[] = {0x0A, 0x00, 0x01, 0x40, 0x79, 0xEA, 0x60, 0x1D, 0x6B, 0x3E}; 
```

修复。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-12-02T03:40:50.897

您正在初始化一个`char`已签名的缓冲区。超过它的任何东西`0x7f`都超出了它可以处理的范围，并且将被转换为负数。实际数据可能没问题，您可以忽略警告，但最好是制作它`unsigned char`。

至于为什么它只发送 4 个字节，这听起来有点像指针的大小。您确定代码与您使用数组而不是传递给函数的指针完全一样吗？即使您将参数声明为数组，函数也不知道数组的大小 - 您需要将数组的大小传递给函数。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2014-11-12T16:36:21.823

我可以使用以下代码重现此警告：

```
char aa = 0xff; 
```

警告解决了

```
unsigned char aa = 0xff; 
```

（正如 Mark Ransom 已经指出的那样，我只是添加了一个最小的示例代码来重现警告）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-07-22T21:08:22.083

我还可以使用以下代码重现此警告：

```
const unsigned short cid = 0xdeadfeeb; 
```

这意味着该值被编译器截断，因为它超出了`unsigned short`范围。减小值以解决警告。

# angularjs - AngularJS + html5Mode + 自定义后备

> ID：13666038
> 
> 赞同：3
> 
> 时间：2012-12-02T03:09:33.030
> 
> 标签：angularjs

我有一个**html5Mode = true**的应用程序，但在 IE 上我不需要回退到**#/url**。我需要的是保留 URL 并重新加载完整的页面。

如果我找不到任何方法，我将需要编辑 AngularJS 文件，这就是我不想要的。

建议？

谢谢！

- 编辑 -

作为临时解决方案，我在 AngularJS 文件中注释了一些代码。

```
/*if ($sniffer.history) {*/
    $location = new LocationUrl(
      convertToHtml5Url(initUrl, basePath, hashPrefix),
      pathPrefix, appBaseUrl);
  /*} else {
    $location = new LocationHashbangInHtml5Url(
      convertToHashbangUrl(initUrl, basePath, hashPrefix),
      hashPrefix, appBaseUrl, basePath.substr(pathPrefix.length + 1));
  }*/ 
```

现在它不会回退到 Hashtag url，如果浏览器不支持历史 API ，Browser.url 会创建一个**location.href 。**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-27T03:14:54.927

我认为这可以满足您的要求。如果不是，也许解决方案涉及相同的事件`$locationChangeStart`。

```
 var gate = 1;
  $scope.$on("$locationChangeStart", function(event, nextLocation, currentLocation) {
    if ($('html').is('.ie6, .ie7, .ie8')) {
      if (gate === 0) { //prevent endless location change
        gate = 1;
        window.location.href = nextLocation; //reload the page
      }
      else {
        gate = 0;
      }
    }
  }); 
```

如果您不知道此 OldIE 检查，[请参阅此帖子。](https://stackoverflow.com/questions/10964966/detect-ie-version-in-javascript)

# emacs - 生成文件错误

> ID：13666040
> 
> 赞同：0
> 
> 时间：2012-12-02T03:09:54.860
> 
> 标签：emacs, makefile

我能做些什么来解决这个问题？我正在尝试制作一个将编译guess.cpp 和yesno.cpp 以生成文件guess.o 和yesno.o 的make 文件，并将链接这两个.o 文件以生成一个名为guess 的可执行程序。这是我的makefile：

```
guess: yesno.o guess.o
    g++ -o guess yesno.o guess.o
guess.o: yesno.h
yesno.o: yesno.h 
```

我得到它的错误：`*** No rule to make target `yesno.h', needed by `yesno.o'. Stop.`

谁能向我解释什么是错的以及我能做些什么来解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T04:02:26.010

基本的makefile规则是

```
target: dependencies
[tab] system command 
```

你错过了这个`[tab] system command`部分。在下面试试这个。这是关于 Makefile[的](http://mrbook.org/tutorials/make/)简单教程。

```
guess: yesno.o guess.o
    g++ -o guess yesno.o guess.o
guess.o: yesno.h guess.c
    g++ -c guess.c
yesno.o: yesno.h yesno.c
    g++ -c yesno.c 
```

# powershell - Windows：脚本将pdf文件从一个文件夹复制到另外两个文件夹

> ID：13666042
> 
> 赞同：1
> 
> 时间：2012-12-02T03:10:17.147
> 
> 标签：powershell

我在服务器 2008 上有一个文件夹。它由 pdf 文件填充。需要将文件夹的内容（仅 pdf）复制到其他两个文件夹，并删除原始源文件夹中正在处理的文件。主要关注的是确保我只删除复制的 pdf 文件，而不是原始位置的任何其他文件。如果在处理新的 pdf 文件时由于某种原因进入原始源文件夹，请确保它不会被删除。它可以在不使用任务计划程序的情况下每 30 分钟运行一次吗？提前致谢

# php - PHP：如何建立与我的 SQL Server 的连接？

> ID：13666043
> 
> 赞同：1
> 
> 时间：2012-12-02T03:10:19.023
> 
> 标签：php, sql-server, windows-authentication

我通常将我的 SQL Server 与 SQL Server Management Studio 一起使用。在那里登录时，我使用 Windows 身份验证并且不指定用户名/密码。因此，我目前使用的用户名/密码与登录计算机时使用的用户名/密码相同。我正在尝试通过 PHP 建立与服务器的连接；但是，我得到一个错误。有人知道我在做什么错吗？

**代码**

```
 $serverName = "MYPCNAME"; 

    $connectionInfo = array( "Database"=>"College", "UID"=>"MYUSERNAME", "PWD"=>"MYPASSWORD");

    $conn = sqlsrv_connect( $serverName, $connectionInfo);

    if( $conn ) {
         echo "Connection established.<br />";
    }else{
         echo "Connection could not be established.<br />";
         die( print_r( sqlsrv_errors(), true));
    } 
```

**错误**

```
Connection could not be established.
Array ( [0] => Array ( [0] => 28000 [SQLSTATE] => 28000 [1] => 18456 [code] => 18456 [2] => [Microsoft][SQL Server Native Client 11.0][SQL Server]Login failed for user 'MYUSERNAME'. [message] => [Microsoft][SQL Server Native Client 11.0][SQL Server]Login failed for user 'MYUSERNAME'. ) [1] => Array ( [0] => 28000 [SQLSTATE] => 28000 [1] => 18456 [code] => 18456 [2] => [Microsoft][SQL Server Native Client 11.0][SQL Server]Login failed for user 'MYUSERNAME'. [message] => [Microsoft][SQL Server Native Client 11.0][SQL Server]Login failed for user 'MYUSERNAME'. ) ) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-02T03:24:46.507

我认为问题出在您的 SQL Server 配置中。您应该有一个具有 SQL Server 身份验证而不是 Windows 身份验证的用户。这是[https://support.gearhost.com/KB/a453/adding-users-to-mssql-using-sql-server-management-studio.aspx的方法](https://support.gearhost.com/KB/a453/adding-users-to-mssql-using-sql-server-management-studio.aspx)

您可能还想检查您的 SQL Server TCP/IP 配置是否可以远程访问：http: [//blogs.msdn.com/b/walzenbach/archive/2010/04/14/how-to-enable-remote-connections -in-sql-server-2008.aspx](http://blogs.msdn.com/b/walzenbach/archive/2010/04/14/how-to-enable-remote-connections-in-sql-server-2008.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-02T03:21:11.820

您应该考虑切换到 SQL Server 身份验证，它使您能够使用一系列帐户。

您使用的登录名似乎不正确；我过去使用过 SQL Server，在注册期间，您应该（如果我错了，请纠正我）被要求输入“sa”的密码

SQLSTATE = 28000 -[查看这个](http://social.msdn.microsoft.com/forums/en-US/sqldataaccess/thread/36df4673-c3ec-4e30-bbdf-69a8690fd28b/ "回顾这个")

看看这是否为您提供了解决方案？

此外，如果您使用 Windows 身份验证，请查看以下链接：使用 Windows 身份验证[连接到 MSSQL Server](http://msdn.microsoft.com/en-us/library/cc296205%28v=sql.105%29.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-02T03:22:51.740

我认为您将无法使用 Windows 身份验证从 PHP 连接到 SQL，您可能还需要启用 SQL 身份验证并连接 SA 或其他 SQL 级别的帐户。

# ios - 应用重新打开时在 IOS 中按住按钮

> ID：13666052
> 
> 赞同：0
> 
> 时间：2012-12-02T03:12:10.667
> 
> 标签：ios

我正在制作一个 Iphone 应用程序，我让用户单击一个按钮，它会更改我获取的结果控制器中的排序。但是，在我关闭我的应用程序后，它会变回原来的排序方式。我只是想知道当应用程序重新打开时是否有任何方法可以按住该按钮。

```
- (IBAction)btnValue:(id)sender {
self.model.frc_Work.delegate = self;

 NSSortDescriptor *sortDescriptor = [NSSortDescriptor sortDescriptorWithKey:@"Value" ascending:YES];
self.model.frc_Work.fetchRequest.sortDescriptors = [NSArray arrayWithObject:sortDescriptor]; 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T03:18:50.477

是的。仅用于`NSUserDefaults`存储信息：

```
// Set this to the correct value when the button is pressed
[[NSUserDefaults standardUserDefaults] setBool:YES forKey:@"ButtonPressedKey"]; 
```

然后，当您布置按钮时：

```
if ([[NSUserDefaults standardUserDefaults] boolForKey:@"ButtonPressedKey"]){
    // Do whatever you're currently doing to keep the button pressed during runtime.
} 
```

`NSUserDefaults`基本上是`NSDictionary`跨应用程序启动持续存在的。它只存储属性列表值 ( `NSNumber, NSString, NSData, NSArray, NSDictionary, and NSDate`) 和像`BOOL`s 这样的原语。

这是一个示例项目，使用`UISwitch`：[https ://github.com/MaxGabriel/ButtonPersistence](https://github.com/MaxGabriel/ButtonPersistence)

# bash - Unix 验证

> ID：13666053
> 
> 赞同：-1
> 
> 时间：2012-12-02T03:12:31.593
> 
> 标签：bash

> **可能重复：**
> [Unix 基本验证](https://stackoverflow.com/questions/13665947/unix-basic-validation)

嗨，我对 Unix 很陌生，我试图让我的程序将输入的数字总和相加，它有一个验证器，可以在输入字符时告诉用户。

例如，这就是我想要它做的。

add2 4 -3 十二九 抱歉，“十二”不是数字

这是我当前的代码有人可以告诉我我做错了什么吗？

```
 #!/bin/bash

 sum=0

 for numbers in $@

 if ![["$numbers" =~ ^[0-9]+$ ]]  

 then
    exec >&2; echo "error: numbers" exit 1
 fi

 do

 sum=$((sum + numbers))

 done

 echo "$sum" 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-02T03:35:40.360

脚本：

```
#!/bin/bash
sum=0
for number in $@
do
    if [[ $number =~ [0-9]+$ ]]
    then
        sum=`expr $sum + $number`
    else
        echo "error: $number is not a number"
        exit 1
    fi
done
echo "$sum" 
```

样品运行：

```
$ ./sum.sh 1 2 3 4 5 6
21
$ ./sum.sh 1 2 3 4 5 6 seven
error: seven is not a number 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-02T10:27:45.260

使用良好的 bash 实践来做到这一点，即使用引号，并避免可怕的反引号并使用 shell 算法`((...))`：

```
#!/bin/bash
sum=0
for number in "$@"; do
if [[ "$number" =~ ^[+-]?[[:digit:]]+$ ]]; then
    ((sum+=number))
else
    echo >&2 "error: $number is not a number"
    exit 1
fi
done

echo "$sum" 
```

# javascript - 是否有用于网络浏览器的 Roslyn API？

> ID：13666054
> 
> 赞同：0
> 
> 时间：2012-12-02T03:13:06.887
> 
> 标签：javascript, html, roslyn

我正在寻找的是一个加载 DOM 和 javascript 并以 Roslyn 的方式处理它的 api。然后我可以使用 jquery 来分析并将不同的 html 转换为兼容的 html 5 ？？？

Roslyn for javascript 本身就很棒。它存在吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T08:47:45.347

Roslyn 仅支持 C# 和 VB。我们不分析 JavaScript 或 HTML。

# ruby-on-rails - jQuery UI DatePicker 允许过去的日期，显示今天

> ID：13666055
> 
> 赞同：4
> 
> 时间：2012-12-02T03:13:08.870
> 
> 标签：ruby-on-rails, calendar, jquery-ui-datepicker

我正在将 jQuery UI DatePicker 用于事件应用程序。很多时候，我会说一个全年每周二举行的活动。

现在，日期选择器允许人们出于出勤原因进行注册，所以我想允许人们注册过去的日期，但是，当页面加载时，我希望它显示当前月份。现在，它显示了活动的开始日期：

```
<%
event == event

    date_to_use_for_max_dates = event.end_date.nil? ? event.start_date : 
      event.end_date

    date_to_use_for_max_dates = date_to_use_for_max_dates > Date.today ? 
      date_to_use_for_max_dates : Date.today

    event_dates = event.get_occuring_dates(event.start_date, 
      date_to_use_for_max_dates.advance(:years => EventRsvp::REGISTRATION_MAX_CHECK_YEARS))

    min_date = [event_dates.first.strftime("%m"), event_dates.first.strftime("%d"), 
     event_dates.first.strftime("%Y")]

    max_date = [event_dates.last.strftime("%m"), event_dates.last.strftime("%d"), 
     event_dates.last.strftime("%Y")]

    event_dates_for_the_month = event_dates.collect{|d| d if d.month == 

    event_dates.first.month }.compact.collect{|d| [d.strftime("%m"), d.strftime("%d"), 
      d.strftime("%Y")] }

    registered_dates = event.get_registered_dates(current_user).collect{|d| 
      [d.strftime("%m"), d.strftime("%d"), d.strftime("%Y")] }
      url_for_registration_details ||= registration_details_for_day_event_path(event)
%> 
```

然后是实际的日历：

```
<div id="event-calendar" data-event-name="<%= event.name %>" data-dates-url="
  <%= occuring_dates_event_path(event) %>" data-registrations-url="<%= 
  url_for_registration_details %>" data-min-date="<%= min_date %>" 
  data-max-date="<%= max_date %>" data-event-dates="<%= event_dates_for_the_month
  %>" data-registered-dates="<%= registered_dates %>"></div> 
```

我尝试将活动日期更改为今天开始，但有人无法注册过去的活动。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T21:13:40.973

您应该可以使用[`defaultDate`选项](http://api.jqueryui.com/datepicker/#option-defaultDate)设置默认日期，但很难判断这是否真的适用于您的设置。您是否调用了任何 JavaScript 代码来触发日期选择器？

# javascript - jquery 小部件全局但不是超全局变量

> ID：13666062
> 
> 赞同：0
> 
> 时间：2012-12-02T03:13:42.200
> 
> 标签：javascript, jquery, widget

我想在拖动后访问 vars，但是当我多次初始化小部件时，$this 和 $opts 将被覆盖并且始终为“y”。如何存储和访问正确的变量？

```
$.widget("custom.test", {

    options: {
        map: ''
    },

    _create: function(){
        $this = this;
        $opts = $this.options;

        if($opts.map){
            $this._createmap();
            $this._loadmap();
        }

        $this._test();
     },

    _test: function(){  
        $map = $this.map;

        $map.drag(function(e, dd) {
            // how to get the correct option here
            // $opts.map is to global?  
        });
    },

    _createmap: function(){
        $this.map = $('<div></div>').addClass('map');
    },
});

$(x).test({map: 'x'});
$(y).test({map: 'y'}); 
```

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T05:56:21.000

有时它很容易

```
_test: function(){  
    $map = $this.map;

    $map.on('drag',{map: $opts.map}, function(e, dd) {
        // access with event.data
        alert(e.data.map);

    });
}, 
```

# actionscript-3 - 无论如何在使用 URLLoader 加载图片时显示加载的图片而不使用 Loader

> ID：13666071
> 
> 赞同：0
> 
> 时间：2012-12-02T03:15:14.840
> 
> 标签：actionscript-3

```
public class NewClass  extends Sprite 
{

    public function NewClass() 
    {
        var req:URLRequest = new URLRequest();
        req.url = "http://www.nasa.gov/images/content/708545main_pia16453-43_full.jpg";
        req.method = URLRequestMethod.GET;
         var loader:URLLoader = new URLLoader();
        loader.load(req);
        loader.dataFormat = URLLoaderDataFormat.BINARY;
        loader.addEventListener(Event.COMPLETE, onImageLoaded);
    }

        //  Is there anyway to show the loaded picture without using Loader???
        private function onImageLoaded(e:Event):void {
                    var _ba:ByteArray = e.target.data as ByteArray;

                  /*                        var _l:Loader = new Loader;
                    _l.contentLoaderInfo.addEventListener (Event.COMPLETE, onBytesLoaded);
                    _l.loadBytes(_ba);
        e.target.removeEventListener (Event.COMPLETE , onImageLoaded);*/

        }

        private function onBytesLoaded(e:Event):void 
         {
                    var _bitmap:Bitmap = e.target.content as Bitmap;
                    trace(_bitmap.width, _bitmap.height );
                    addChild (_bitmap );
                    //
                    e.target.loader.contentLoaderInfo.removeEventListener (Event.COMPLETE, onBytesLoaded);
         }  

} 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-12-02T15:28:58.117

我知道的唯一方法是在 Flash 中将图片拖到舞台上，然后将其转换为 MovieClip 并选中“Export for ActionScript”框并命名类（例如“image”）。之后，您可以通过以下代码进行操作。

```
public class NewClass extends Sprite
{
    private var picture:image=new image();

    public function NewClass
{ 
    picture.width=100; //example
    picture.height=100; //example
    addChild(picture)
    }
 } 
```

# css - 网站 HTML5 上的 Header1

> ID：13666073
> 
> 赞同：1
> 
> 时间：2012-12-02T03:15:22.310
> 
> 标签：css, html, header

我在 word 上制作了一个客户横幅，并试图在我的项目中显示为我的 h1。

网站链接：

[http://younani.com/finalsite/contactus.html](http://younani.com/finalsite/contactus.html)

我只在联系我们页面中实现了它，所以其他页面没有它。如您所见，它模糊且不合适。即使我尝试调整大小并且图像仍然模糊。

这是 h1 的代码，我没有在 CSS 中包含任何内容，是这个问题吗？

```
<h1><img alt="flower" src="banner.jpg" width="1000" height="100" /></h1> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-02T03:18:16.220

你的图片是674x194，让你的width和height属性分别匹配，不会拉伸图片。

```
<h1><img alt="flower" src="banner.jpg" width="674" height="194" /></h1> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-02T03:20:23.543

```
dont use  1000 width use 

<img width="960" height="100" src="banner.jpg" alt="flower"> 
```

# php - 获取 404 页面的原始 url

> ID：13666079
> 
> 赞同：4
> 
> 时间：2012-12-02T03:17:24.180
> 
> 标签：php

所以我发现了这两个问题：

[访问 IIS7 404 重定向页面中的原始 URL](https://stackoverflow.com/questions/5070695/accessing-original-url-in-iis7-404-redirect-page) [获取导致 404 的请求页面的 URL](https://stackoverflow.com/questions/4948275/get-url-of-page-requested-that-caused-a-404)

但它们都使用不同的语言。有什么方法可以获取导致在自定义消息中使用类似 404 消息的地址？

例如，如果我请求`example.com/example1`并且该页面不存在并且它重定向到我的错误页面，我如何才能`example1`显示在`The page`example1之类的消息中`isn't there`，或者使用它来创建页面`example1`？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-02T03:59:58.740

由于您使用的是 PHP，因此您可以访问各种 PHP 超全局变量。$_SERVER['SCRIPT_NAME']、$_SERVER['REQUEST_URI'] 等可用于此目的。错误页面中的类似内容应该这样做：

```
<?php
    printf("The page %s was not found.", $_SERVER['REQUEST_URI']);
?> 
```

有关更多信息，请查看[$_SERVER 超全局文档](http://php.net/manual/en/reserved.variables.server.php)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-02T03:28:03.653

不能在 $_SERVER['HTTP_REFERER'] 变量中吗？

见[http://php.net/manual/en/reserved.variables.server.php](http://php.net/manual/en/reserved.variables.server.php)

# php - 有哪些好的代码搜索 Web 界面？

> ID：13666081
> 
> 赞同：0
> 
> 时间：2012-12-02T03:17:44.057
> 
> 标签：php, ruby-on-rails, django

我正在寻找一个好的网络框架/插件/你有什么可以对特定代码库进行 greps。

我已经在 GitHub 和 Google 代码上搜索了很多类似的东西，但没有找到我要找的东西......

具体来说，我想要一些可以索引我的代码并呈现 Web UI 以在所述代码库中搜索类名、函数名或只是自由文本和正则表达式的东西。

理想情况下，我可以使用 cron 以设定的时间间隔运行索引器，也许相同的脚本甚至可以在重新索引之前自动刷新 Git 中的代码，在同一个 Web UI 中呈现我的代码的全新视图。

据我所知，Phabricator 提供代码浏览，但没有代码搜索。

这也应该允许从搜索结果中浏览代码。

是否有这样做的开源选项？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T03:21:07.237

如果您可以访问 Java，那么我在使用[lucene](http://lucene.apache.org)索引源代码方面取得了[一些运气。](http://onjava.com/pub/a/onjava/2006/01/18/using-lucene-to-search-java-source.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-02T23:13:48.147

[Krugle for Git 和 github](http://www.krugle.com/krugle-git.php)可能值得一看。

# android - android按钮单击并单击

> ID：13666086
> 
> 赞同：0
> 
> 时间：2012-12-02T03:18:19.890
> 
> 标签：android, buttonclick

我对 android 编程相当陌生（但不是 Java 编程）。我有一个用户单击“Go >>”按钮的用例。单击按钮后，按钮上的文本将变为“完成！” 用户可以在“完成”后单击相同的按钮。

我想知道实现此按钮行为的最佳方法是什么...我能想到的一种方法是检查按钮文本并触发适当的操作 - 有没有更好的方法可以推荐？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T03:28:56.747

“最佳”方法可能是检查 OnClickListener 中的布尔标志，如果 Button 已被单击。

```
OnClickListener listener = new OnClickListener() {
    boolean isFirstClick = true;
    @Override
    public void onClick(View v) {
        if(isFirstClick) {
            isFirstClick = false;
            // Do something
        }
    }
} 
```

另一种方法是检查按钮文本的值，但这会慢几*毫秒。*

# mysql - 使用 MAMP 连接到外部 mysql 数据库（非本地主机）

> ID：13666089
> 
> 赞同：0
> 
> 时间：2012-12-02T03:18:43.570
> 
> 标签：mysql, database, mamp

请记住，我是新手。我正在使用 MAMP 编辑 php 代码。我确实有一个带有 FatCow 的外部主机，并在那里建立了一个数据库。我被告知在发布到实际 Web 主机之前在 localhost 上进行测试，因此我将文件存储在 MAMP 的 htdocs 文件夹中，并希望创建到我的外部数据库的连接。MAMP 是否只支持 localhost 连接或者我需要做的事情？任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T04:20:25.340

```
$con = mysql_connect($host, $user, $pass) or die("cannot connect to host");

Mysql_select_db($dbname, $con); 
```

$host 是您的数据库主机提供的主机名（IP 地址或域名）

$user 和 $pass 是您的数据库用户和密码

$dbname 是您的数据库名称..

如果它没有输出任何东西，那么你已经成功连接到数据库......

希望有帮助^^

# java - Java中的线程和缓冲区

> ID：13666091
> 
> 赞同：-2
> 
> 时间：2012-12-02T03:18:56.473
> 
> 标签：java, multithreading, buffer

我在这里可能真的很愚蠢，但本质上我有一个缓冲区和一个线程。

我已经制作了缓冲区以从用户那里获取一堆消息，并且我想创建一个线程来不断循环以从缓冲区中获取消息。

这听起来超级简单，但由于某种原因它不起作用。

缓冲区和线程都是普通的 Java 类（不是 main）；缓冲区和显示线程。

我似乎无法理解他们应该如何一起工作。

这是正确的吗？还是我错过了什么？

```
public class DisplayThread extends Thread{

    DisplayThread Thread = new DisplayThread(Buffer);
    Thread.start();
    public void run(){
             while(true){
            //will do something          

     }
  }

} 
```

我尝试在主类中创建一个缓冲区对象，然后将其传入，但它仍然不起作用。

我错过了什么？！这一定很明显，但我根本看不到。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T03:28:57.350

你已经有了基本的想法，但我不确定你为什么将新的 DisplayThread(Buffer) 和 Thread.start() 东西放在类的主体中。基本上，应该从方法调用这些行。例如，假设它们应该从 Main 调用，你会做这样的事情：

```
public static void main(String[] args){
    Buffer buffer = new Buffer();
    DisplayThread displayThread = new DisplayThread(buffer);
    displayThread.start();
} 
```

在这种情况下，您将创建缓冲区对象，并将其传递给 DisplayThread。在您的显示线程中，您将创建一个 Buffer 的实例变量，以及一个用于设置它的构造函数，如下所示：

```
public class DisplayThread{
    Buffer buffer;
    public DisplayThread(Buffer buffer){
        this.buffer = buffer;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-02T03:40:54.280

这是我关于代码应该如何基于给定信息的想法。你怎么看？：

```
public class DisplayThread extends Thread{

private String[] buffer;
public DisplayThread(String[] buffer) {
    this.buffer = buffer;
}

public void run(){
    for(String str:buffer)
        System.out.println(str);
}

public static void main(String args[]) {
    String[] buffer = {"hello", "world"};
    DisplayThread thread = new DisplayThread(buffer);
    thread.start();
} 
```

}

# c++ - C ++ Vim clang完成如何让qt自动完成？

> ID：13666093
> 
> 赞同：4
> 
> 时间：2012-12-02T03:19:58.943
> 
> 标签：c++, qt, vim, autocomplete, clang

我一直在寻找一段时间，但我找不到可以制作 vim c++ 自动完成 qt 类、函数等的来源。

使用 SFML 和标准 c++ 库的 Clang 完整作品，我不明白为什么它不适用于 qt？

谢谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-02T03:31:29.667

你必须告诉 clang 在哪里寻找 Qt 头文件。这是通过`-I/path/to/headers`标志完成的。您可以通过将特定项目的特定编译器标志添加到`.clang_complete`项目目录中命名的文件中。基本上，任何用于编译代码的编译器标志都必须在您的`.clang_complete`文件中。例如对于 Qt 我的`.clang_complete`文件包含

```
-I/usr/local/include/QtCore
-I/usr/local/include/QtOpenGL
-I/usr/local/include/QtGui 
```

clang_complete 还包括一个自动生成`.clang_complete`文件的脚本。clang_complete 的[帮助文件](https://github.com/Rip-Rip/clang_complete/blob/master/doc/clang_complete.txt#L272)描述了如何使用它。您也可以`:help clang_complete`在 vim 中键入命令来访问帮助。

# javascript - 如何找到与X相关的起点，宽度和角度的点坐标

> ID：13666094
> 
> 赞同：1
> 
> 时间：2012-12-02T03:20:05.270
> 
> 标签：javascript, math, graphics, geometry, 2d

如何找到红点的位置？

我想找到那个红点的x，y...

我想在javascript中执行此操作，对于画布，我想从某个点开始沿一个方向画一条线（并且我有角度）...

![在此处输入图像描述](../Images/7be10afd9f5af5233456e3f03ae741e7.png)

你有什么想法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-02T03:40:58.653

在数学方面，如果 r 是您所说的“宽度”，而 ø 是角度，那么：

x = r * cos(ø)

y = r * sin(ø)

我不知道 JavaScript，所以你将如何用那种语言编写代码留给读者作为练习。:)

# mysql - SQL Group By 组 n?

> ID：13666095
> 
> 赞同：1
> 
> 时间：2012-12-02T03:20:21.557
> 
> 标签：mysql, sql

我需要将数据库中的一些行以 n 为一组进行分组。

**例子：**

```
select max(data) from tableA group by (groups of 2) order by id; 
```

**结果：** 20、30、5

*所以...*

第 1 组持有 id 1 和 2，第 2 组持有 id 3 和 4，第 3 组持有 id 5 和 6。

```
tableA
| id  |  data |     
---------------
| 1   | 10    |
| 2   | 20    |
| 3   | 15    |
| 4   | 30    |
| 5   | 5     |
| 6   | 0     |
--------------- 
```

有没有办法使用 SQL 来实现这一点？

**注意：**系统运行在 MySql 上。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-02T03:26:26.970

```
select
    (mod(id, 2) + id)/2 as id_group,
    max(data) as max_data
from tableA
group by 1 
```

查看在[sqlfiddle中运行的此查询](http://sqlfiddle.com/#!2/cff45d/30)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-02T03:36:43.230

由于`GROUP BY`可以容纳任意表达式，您可以使用它`CASE`来返回`id`如果其值`MOD 2`等于 1，`id - 1`否则。这会将它们成对分组，从 1 开始递增。

```
SELECT MAX(data) AS maxdata
FROM tableA
/* GROUP BY the id or (id - 1) depending on the result of its modulo 2 */
GROUP BY CASE WHEN id MOD 2 = 1 THEN id ELSE (id - 1) END 
```

### [这是 SQLfiddle.com 上的演示](http://sqlfiddle.com/#!2/cff45d/6)

## 允许不连续的 id

### 更新

一夜之间，我对这个解决方案仅*适用*于`id`. 如果您删除了行，您将不再获得正确的结果。所以这是一个解释非连续的、有间隙`id`的 s 的版本：

```
SET @rowid = 0;
SELECT 
  MAX(data) AS maxdata
FROM (
  SELECT  
    @rowid := @rowid + 1 AS rd,
    data
  FROM tableA
) subq
GROUP BY CASE WHEN rd MOD 2 = 1 THEN rd ELSE (rd - 1) END 
```

[和更新的 SQLfiddle...](http://sqlfiddle.com/#!2/5bec4/2)

# caching - 引用不存在的文件路径和文件的 PHP 致命错误

> ID：13666099
> 
> 赞同：4
> 
> 时间：2012-12-02T03:20:43.820
> 
> 标签：caching, joomla2.5, php, dreamhost

我正在开发一个收到以下错误代码的网站：

```
Fatal error: Allowed memory size of 94371840 bytes exhausted (tried to allocate 1439957 bytes) in /home/user/domain.com/libraries/joomla/cache/controller.php on line 224 
```

现在，我可能读错了，但它告诉我它试图分配的内存小于允许的内存大小，所以我不确定它是如何开始用尽的。

这是问题的症结所在。我在 Joomla 中编码这个网站。我试图在 Joomla 安装上启用缓存，特别是**Progressive Caching**。它开始产生这个错误，所以我禁用了它。现在我无法摆脱这个错误！

我假设错误本身是由于我从 Dreamhost 上的标准共享服务器托管此站点，但我不明白为什么在禁用缓存后，我仍然收到此文件错误现在不再存在于 FTP 上。

任何见解将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-02T03:43:05.890

听起来您的脚本正在尝试使用超过 90MB，这可能是 php.ini 中设置的进程限制。Dreamhost 允许您使用自定义 php.ini 文件，您可以在其中增加进程限制。根据经验，Dreamhost 允许每个共享帐户在开始杀死进程之前每个帐户使用不到 512MB 的系统内存，因此您应该能够提高该限制。

memory_limit = 128M 到您的 php.ini 文件

说明 [http://wiki.dreamhost.com/PHP.ini](http://wiki.dreamhost.com/PHP.ini)

或者您可以在单独的 php 脚本中设置它。

ini_set('memory_limit', '128M');

# java - 在 JPanel 上绘制 JLabels

> ID：13666104
> 
> 赞同：0
> 
> 时间：2012-12-02T03:21:06.440
> 
> 标签：java, swing, jframe, jpanel, java-2d

我有一个`JPanel`设置，我将`JLabel`s 作为放置在`JPanel`(with `jPanel.add(jLabel)`) 顶部的伪按钮。我想在`JPanel`不影响`JLabel`s 的情况下为 s 设置动画，但是每次我重新绘制 s 时`JPanel`，标签都会消失。（我相信他们正在被涂上）。

我也尝试过使用 a`JLayeredPane`和分隔`JLabel`s 和`JPanel`，但这也不起作用。

有没有办法实现我想要的？

我的代码

这设置了 JLabel 和 jPanel。

```
mainPanel = new JPanel();
JLayeredPane c = new JLayeredPane();

c.setPreferredSize(new Dimension(WIDTH, HEIGHT));
c.setVisible(true);
c.setOpaque(true);
c.add(mainPanel,new Integer(0));
c.add(test, new Integer(2));
add(c);
mainPanel.setBounds(0, 0, WIDTH, HEIGHT); 
```

这显示了我在 JPanel 中的 paintComponent 方法（它是一个扩展 JPanel 的自定义类）

```
public void paintComponent(Graphics g){
    super.paintComponent(g);
    scene = new BufferedImage(w, h, BufferedImage.TYPE_INT_ARGB);
    g2d = scene.createGraphics();
    Rectangle2D.Double rec = new Rectangle2D.Double(questionBox.getXFloat(), questionBox.getYFloat(), questionBox.getWidthFloat(), questionBox.getHeightFloat());
    g2d.fill(rec);
    g.drawImage(scene, 0, 0, this);
} 
```

为了澄清起见，这些`questionBox`方法只是获取矩形的更新值。`w`并`h`代表宽度和高度。

这是我的 JLabel 类的构造函数

```
scene = new BufferedImage(w, h, BufferedImage.TYPE_INT_ARGB); 
```

# java - 自定义适配器以使用自定义字体

> ID：13666108
> 
> 赞同：2
> 
> 时间：2012-12-02T03:21:43.757
> 
> 标签：java, android

我有自定义字体示例和一个小型列表视图示例应用程序。但我无法加入他们！

```
 /** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    TextView tv = (TextView)findViewById(R.id.tv);
    Typeface cFont = Typeface.createFromAsset(getAssets(), "fonts/jcc.ttf");
    tv.setTypeface(cFont);

<TextView  
android:layout_width="fill_parent" 
android:layout_height="wrap_content" 
android:text="@string/hello"
android:textSize="18sp"
android:id="@+id/tv"
/> 
```

和

```
 /** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_product_list);

    String asim02 = System.getProperty("line.separator");

    String products[] = {
            "Apple" + asim02 +"Definition1", 
            "Orange" + asim02 +"Definition2",
            "Banana"+ asim02 +"Definition3", 
            "Onion"+ asim02 +"Definition4",  };

    lv = (ListView) findViewById(R.id.list_view);

    // Adding items to listview
    adapter = new ArrayAdapter<String>(this, R.layout.list_item, R.id.p_list,   products);
    lv.setAdapter(adapter);

<TextView

        android:textColor="?android:textColorPrimary"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:textSize="15sp"
        android:id="@+id/p_list"
        /> 
```

请帮我自定义适配器以使用自定义字体

ProductList 应用程序的图像[https://dl.dropbox.com/u/15065300/ProductList.png](https://dl.dropbox.com/u/15065300/ProductList.png)

这是两个示例应用程序[http://www.mediafire.com/?scb3hjplb15yly5](http://www.mediafire.com/?scb3hjplb15yly5)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-02T03:46:15.130

我通过创建一个 CustomTextView.class 来做到这一点

这将是我的`list_item_layout.xml`：

```
<LinearLayout
    [...]

    android:orientation="vertical">
        <com.example.CustomTextView
             android:layout_width="fill_parent"
             [...]
             android:id="@+id/myCustomTextView"/>

</LinearLayout> 
```

注意：你必须指向你的 CustomTextView.class 否则你会得到一个异常

这是 CustomTextView.class

```
public class CustomTextView extends TextView {

    public CustomTextView(Context context, AttributeSet attrs, int defStyle) {
        super(context, attrs, defStyle);
        init();
    }

    public CustomTextView(Context context, AttributeSet attrs) {
        super(context, attrs);
        init();
    }

    public CustomTextView(Context context) {
        super(context);
        init();
    }

    public void init() {
        Typeface tf = Typeface.createFromAsset(getContext().getAssets(), "fonts/yourfont.ttf");
        setTypeface(tf);
    }

} 
```

您可以将此应用于`EditText`,`TextView`等`Buttons`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-02T06:00:24.840

根据@FoamyGuy 的回复，我查看了您的 mediafire 文件回复，但您并没有完全修改`arrayAdapter`课程。我没有这些文件共享站点帐户之一，所以应该这样做：

在您的`ProductList`活动中，将您*添加到列表视图代码的项目*替换为：

```
 // Adding items to listview
    Typeface cFont = Typeface.createFromAsset(getAssets(), "fonts/jcc.ttf");
    adapter = new CustomArrayAdapter(this, R.layout.list_item, R.id.p_list, products, cFont); 
```

然后是自定义类，您还必须插入：

```
public class CustomArrayAdapter extends ArrayAdapter <String> {

    private Typeface tf;
    private LayoutInflater inflater;
    private int resource;
    private int textViewResourceId;
    private String[] objects;

    public CustomArrayAdapter(Context context, int resource, int textViewResourceId,
            String[] objects, Typeface tf) {
        super(context, resource, textViewResourceId, objects);
        this.tf = tf;
        this.resource = resource;
        this.textViewResourceId = textViewResourceId;
        this.objects = objects;
        inflater = (LayoutInflater) context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent) {

        if (convertView == null) {
            convertView = inflater.inflate(resource, parent, false);    
        }

        TextView text = (TextView) convertView.findViewById(textViewResourceId);
        text.setTypeface(tf);
        text.setText(objects[position]);
        return convertView;
    }
} 
```

如果您需要查看完整的源文件夹，以免您犯同样的错误，请将您的电子邮件地址发送给我，我会发送给您。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-02T03:46:51.393

一种方法是扩展 ArrayAdapter 让它为您设置字体。

下面是一个例子：

```
public class FontArrayAdapter extends ArrayAdapter<String>{
    private Typeface mFont;
    FontArrayAdapter(Context context, int textViewResourceId, Typeface font){
        mFont = font;
        super(context, textViewResourceId);
    }

    @Override
    public View getView(int pos, View convertView, ViewGoup parent){
        TextView tv;
        tv = (TextView) convertView;
        if(null == tv) {
            tv = new TextView(parent.getContext());
            tv.setTypeface(mFont);
        }

        tv.setText(getItem(pos));
    }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-24T04:49:21.677

在你的 ArrayAdapter 中试试这个。将上下文添加到您的 getAssets() --> context.getAssets() 将字体文件存储在 assets 文件夹中。

```
public class ArrayAdapter extends ArrayAdapter<String> {
    private final Context context;
    private final ArrayList<String> values2;
    Typeface font;

public ArrayAdapter(Context context, ArrayList<String> values,ArrayList<String> values2) {
        super(context, R.layout.listview, values);
        this.context = context;
        this.values2 = values2;
}

@Override
public View getView(int position, View convertView, ViewGroup parent) {

    LayoutInflater inflater = (LayoutInflater) context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
    View rowView = inflater.inflate(R.layout.main, parent, false);
    font = Typeface.createFromAsset(context.getAssets(), "arial.ttf");  

    TextView textView = (TextView) rowView.findViewById(R.id.label2);
    textView.setTypeface(font);
}
return rowView;
}
} 
```

# c# - 有效地扫描进程的内存

> ID：13666110
> 
> 赞同：11
> 
> 时间：2012-12-02T03:21:49.640
> 
> 标签：c#, memory, editing

最近我整理了一个 C# 类，它可以使用 API 调用等在另一个进程内存中读取和写入字节，我相信你们以前都见过。

然而，我的问题与我如何有效地扫描另一个进程的内存有关？我知道在达到 Int32.MaxValue 之前测试每组 4 个字节的基本方法，但我发现它（如你所想）非常耗费时间和资源。

根据我的阅读，有一种方法可以通过执行“HeapWalk”来确定进程的分配地址。谁能向我提供一些代码示例和/或有关此的信息，最好的方法是什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-14T15:49:49.527

您正在寻找的是*内存区域*列表，它基本上是一对内存地址/区域大小的列表。

你必须做的是：

*   使用目标进程的进程 ID ( `PID`)获取目标进程的句柄[`OpenProcess`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms684320%28v=vs.85%29.aspx)
*   调用[`VirtualQueryEx`](http://msdn.microsoft.com/en-us/library/windows/desktop/aa366907%28v=vs.85%29.aspx)函数直到你到达内存空间的末尾（即当方法的结果大于0时）
*   关闭您打开的进程句柄

`VirtualQueryEx`从`lpAddress`as开始`0x0`。这将返回一个`MEMORY_BASIC_INFORMATION`包含`BaseAddress`和`RegionSize`属性的结构（这表示您可以读取的内存空间）。然后`lpAdress`用值增加参数`RegionSize`，所以下一次调用`VirtualQueryEx`将返回下一个区域......等等。

谷歌`OpenProcess`，，，`CloseHandle`所以你可以找到不同`VirtualQueryEx`的`MEMORY_BASIC_INFORMATION`P/Invoke 声明来使用，所以你可以从 C# 调用这些 Win32 函数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-17T13:07:12.860

我可以给你一些建议来提高你的扫描性能。最昂贵的操作是 I\O。因此，例如，如果您在内存中搜索子字符串，请在查看内部之前读取整个内存块，而不是读取小块内存。

# javascript - JQuery Accordion 脚本中的 If/Else - 请检查语法

> ID：13666113
> 
> 赞同：-1
> 
> 时间：2012-12-02T03:22:30.703
> 
> 标签：javascript, jquery, css, accordion

我正在通过 Javascript 搞混我的方式，并且可以使用有经验的眼睛来处理一些代码。我正在尝试根据我的一个手风琴 div 的打开/关闭状态来显示/隐藏一个 div。我确定我的代码是一团糟，所以我在这里发布，因为我似乎无法理顺它（我已经使用它几天了，所以这并不是因为缺乏尝试）。这是我的脚本：

```
 <script>
        $(function() {
            $( "#accordion" ).accordion({
                collapsible: true,
                autoHeight: false,
                alwaysOpen: false,
                active: false
            });
        $("h3#bubble").on("click", function(event, ui) {                
            if ("section#bubble").css(display","none") {
              $("#bg4-5").css("opacity", "0"); }
            else ("section#bubble").css(display","block") {
              $("#bg4-5").css("opacity", "1"); }
            });
        </script> 
```

如果您想知道，#bd4-5 的内容是一个 Spotify iframe，似乎需要在手风琴之外才能在页面加载时完全加载。所以我在这里使用这种不透明的技巧来处理显示和隐藏。

非常感谢任何花时间回复的人。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-02T03:30:14.977

您的代码中有几个语法错误：

```
if ("section#bubble").css(display","none") { 
```

语句的`if`条件需要用括号括起来。再加上你错过了`$`和 之前的开场白`display`。解决这些问题可以：

```
 if ( $("section#bubble").css("display","none") ) { 
```

...但这将*设置*`display`属性并评估为真实；我认为您正在尝试*测试*该`display`属性，因此您需要这个：

```
if ($("section#bubble").css("display") === "none") { 
```

然后你就遇到了类似的问题`else`：

```
else ("section#bubble").css(display","block") { 
```

我想你的意思是`else if`，因为`else`（没有`if`）不能有条件。同样，您缺少`$`调用 jQuery 函数的方法，之前的开头引号`display`，您可能正在尝试测试`display`而不是设置它的当前值。你需要在条件周围加上括号：

```
else if ($("section#bubble").css("display") === "block") { 
```

您的代码也缺少`});`关闭文档就绪处理程序的最终结果。

这是我对您要执行的操作的最佳猜测：

```
 $(function() {
        $( "#accordion" ).accordion({
            collapsible: true,
            autoHeight: false,
            alwaysOpen: false,
            active: false
        });
        $("h3#bubble").on("click", function(event, ui) {                
            if ($("section#bubble").css("display") === "none") {
               $("#bg4-5").css("opacity", "0");
            } else if ($("section#bubble").css("display") === "block") {
               $("#bg4-5").css("opacity", "1");
            }
        });
    }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-02T03:31:29.917

您缺少`"`, for `display"`, 用于关闭, for语句并且也不接受条件，您应该改用 。在这种情况下这是不必要的。但是，即使使用正确的语法，您的代码也不会像您期望的那样，您可以使用或 css 方法作为 getter ，.`$/jQuery``("section#bubble")``})``$(function(){``()``if``else``else if``is(':hidden')``$('section.bubble').css('display') ==== 'block'`

```
$(function() {
    $("#accordion").accordion({
        collapsible: true,
        autoHeight: false,
        alwaysOpen: false,
        active: false
    });
    $("h3.bubble").on("click", function(event, ui) {
        if ( $('section.bubble').is(':hidden') ) {
              $("#bg4-5").css("opacity", "0");
        } else {
            $('section.bubble').css("opacity", "1");
        }
    });
}) 
```

请注意，ID 必须是唯一的，您应该改用类。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-02T09:21:05.107

多亏了您的出色指导，我才明白了发生了什么以及需要什么！这就是我想出的。它很笨重，但它可以完成工作！

```
 $("h3#bubbleh3").on("click", function(event, ui) {   
                setTimeout(function() {            
                    if ($("section#bubble").css("display") === "none") {
                       $("#bg4-5").css("opacity", "0");
                    } else if ($("section#bubble").css("display") === "block") {
                       $("#bg4-5").css("opacity", "1");
                    }
                }, 500);
            }); 
```

再次感谢大家。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-02T03:46:04.097

```
<!-- Put this code before the </body> tag -->
<script>
        $( "#accordion" ).accordion({
            collapsible: true,
            autoHeight: false,
            alwaysOpen: false,
            active: false
        });
        $("h3#bubble").on("click", function(event, ui) {
            $("#bg4-5").toggle();
        });
</script> 
```

只要您想做的只是在单击 h3#bubble 时打开和关闭 #bg4-5 内容，这应该做同样的事情。您只能拥有 1 个 id 为 bubble 的元素，因此如果您需要多个元素，则可以使用 class。

# ruby-on-rails - 迁移“列”：时间戳不起作用

> ID：13666116
> 
> 赞同：0
> 
> 时间：2012-12-02T03:23:01.647
> 
> 标签：ruby-on-rails

当我创建一个模型时，我做了一个列edited:timestamp。

```
t.timestamp :edited # in migration file 
```

期望每当用户编辑此模型中的任何内容时，都会更新时间/日期。

但我刚刚看到在数据库模式中它被写成

```
t.datetime "edited" 
```

它希望用户在表单中输入数据。

这里发生了什么事？

我应该如何更改我的迁移文件以在 SQL DB 中创建时间戳列？或者我应该在模型本身中分配它？

我不希望它依赖于用户输入，必须是系统单元

谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-02T03:53:05.217

创建模型时，您应该生成一个 ActiveRecord 迁移以创建将存储与此模型关联的数据的表。例如，如果您的模型名为“Product”，请运行：

```
rails g migration create_products_table 
```

这将在 db/migrate 中生成一个迁移文件（以您生成迁移文件的时间戳为前缀，例如：“20121201200720_create_products_table.rb”）

迁移文件应如下所示：

```
class CreateProducts < ActiveRecord::Migration
  def change
    create_table :products do |t|

      t.timestamps
    end
  end
end 
```

当您运行此迁移 ( `rake db:migrate`) 时，ActiveRecord 将自动在您的表中创建两列：`created_at`和`updated_at`。然后去看看你的schema.rb（在db中）。会有这样的事情：

```
create_table "products", :force => true do |t|
    t.datetime "created_at", :null => false
    t.datetime "updated_at", :null => false
end 
```

`created_at`将存储创建产品的时间戳。 `updated_at`将存储产品上次更新的时间戳（您在此处查找的内容）

所以你不必创建自定义列，你应该只依赖 ActiveRecord 的内置时间戳。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-02T04:18:58.333

Rails，更具体地说，ActiveRecord 与数据库无关。这在寻求迁移应用程序或使用不同的数据库、堆栈等部署应用程序时非常有用。但是它施加的限制之一是 AR 不支持任何特定于数据库的功能。

可以在[此处](http://api.rubyonrails.org/classes/ActiveRecord/ConnectionAdapters/TableDefinition.html#method-i-column)找到 AR 列类型的列表。如您所见，“timestamp”是一种 AR 列类型，但它更像是“datetime”类型的别名。

因此，如果您想在应用程序中使用真正的 SQL 时间戳列，您可以执行以下两项操作之一：

1.  您可以编辑迁移文件并尝试 `t.edited "TIMESTAMP"'（未经测试但应该可以工作，因为 AR 允许将自定义类型作为字符串）

2.  您可以在数据库中创建列并允许 AR 提取它。

如果您是 Rails 新手，那么我强烈建议您使用 Gullaume Galuz 的答案，让 AR 处理`created_at`和`updated_at`列。

如果没有，您还可以看一下[这个问题](https://stackoverflow.com/questions/9227784/making-activerecord-rails-use-actual-mysql-timestamp-columns)，将清楚地阐明需要使用 DB 特定`TIMESTAMP`列。（大小、速度、区域等）

# c - gnu 内联汇编错误

> ID：13666117
> 
> 赞同：0
> 
> 时间：2012-12-02T03:23:08.127
> 
> 标签：c, gcc, assembly, gnu, inline-assembly

我正在尝试在 C 文件中编写内联汇编，但出现 2 个错误：

`open.c:10: Error: junk`ptr nombre'在表达式后`

`open.c:10: Error: suffix or operands invalid for`莱斯'`

这是我的文件：

```
int open(char * nombre, unsigned char modo)
{
  int retval;
  int nrllamada = 6;
  asm("mov $8,%%ah \n\t"
      "les %%bx, dword ptr nombre \n\t"
      "int $0x22 \n\t"
      "mov %%eax,%0 \n\t"
      : "=r"(retval)
      : "a"(modo)
  );
  return retval;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T17:59:43.390

将名为 nombre 的 32 位指针写入寄存器 ES 和 BX 的正确方法是将 C 变量 nombre 连接到寄存器 ECX，将 ECX 的低 16 位移动到寄存器 BX，将 ECX 寄存器旋转 16 位，使低 16 位变为到同一寄存器的高 16 位，反之亦然，最后将 ECX 的低 16 位移动到 ES。

```
int open(char * nombre, unsigned char modo)
{
  int retval;
  // numero servicio 6
  // nombre del fichero a abrir (ES:BX) y modo (AL) de apertura
  asm("mov $6,%%ah \n\t"
      "mov %%cx,%%bx \n\t"
      "rol $16,%%ecx \n\t"
      "mov %%cx,%%es \n\t"
      "int $0x22 \n\t"
      "mov %%eax,%0 \n\t"
      : "=r"(retval)
      : "a"(modo), "c"(nombre)
  );
  return retval;       
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-02T04:03:31.440

```
"les %%bx, dword ptr nombre \n\t" 
```

您在字符串中有 ptr nombre 。那可能是不正确的。您确定要在函数的参数中引用 char* 名词吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-02T19:04:46.737

GCC 是 32 位编译器。这也意味着，您最有可能尝试摆脱`es:bx`类型指针算法并转向平面 32 位寻址（其中 cs=ds=es=0 的基数，每个段限制为 0xffffffff）。

在受保护模式的用户空间中访问状态寄存器很可能会出现访问冲突异常。

另外，什么是操作系统，允许 int 22h 以及它期望 es:bx 输入的位置？在 MS-DOS 中不应该调用它，因为它只是用作静态变量来恢复其他中断向量。

# c# - 如何使用 tpl 分别监控和停止正在运行的任务

> ID：13666118
> 
> 赞同：0
> 
> 时间：2012-12-02T03:23:39.143
> 
> 标签：c#, .net

我是 c# 中并行编程和 tpl 的新手，我正在做以下测试以了解任务的工作方式。每次单击 button1 并触发有界方法时，都会启动一个新任务。当我单击 button_2 时，所有任务都将退出循环，我将获得所有任务经过的时间和任务 ID。

那么有没有办法在这些任务在任务池中工作时对其进行监控，以便在我希望单独使用任务 ID 时停止它们？

```
 Boolean stopprogramm = false;
        private void button1_Click(object sender, EventArgs e)
        {

            Task timerTask1 = Task.Factory.StartNew(() =>
                {
                    Stopwatch watch = new Stopwatch();
                    watch.Start();
                    while (stopprogramm == false)
                    {
                        //Do some work
                    }
                    Console.WriteLine("time ellapsed for No partitioning at all version {0}ms , thread id was {1}", watch.ElapsedMilliseconds, Task.CurrentId);
                    watch.Stop();

                });

        }
        private void button2_Click(object sender, EventArgs e)
        {
            stopprogramm = true;
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T06:00:44.877

您在我的另一个答案的评论之一中提到了一个链接，看起来该链接描述了如何使其可取消。我已经调整了我的示例来支持这一点：

```
 private Dictionary<Guid, TaskTracker> _taskMap = new Dictionary<Guid, TaskTracker>();

    private void OnButton1Click(object sender, EventArgs eventArgs)
    {
        TaskTracker taskTracker = new TaskTracker(Guid.NewGuid(), OnDoWork);
        _taskMap.Add(taskTracker.Identity, taskTracker);
        taskTracker.Start();
    }

    private void OnDoWork(CancellationToken token)
    {
        for (int i = 0; i < 100; i++)
        {
            Thread.Sleep(100); // Do some work, checking if cancel requested every once in a while
            if (token.IsCancellationRequested)
            {
                token.ThrowIfCancellationRequested();
            }
        }
    }

    private void OnButton2Click(object sender, EventArgs eventArgs)
    {
        Guid identity = _taskMap.Count > 0 ? _taskMap.First().Value.Identity : default(Guid);  // find some way to get the desired task

        TaskTracker taskTracker;
        if (_taskMap.TryGetValue(identity, out taskTracker))
        {
            taskTracker.TaskExiting += OnTaskExiting;
            taskTracker.Stop();
        }
    }

    private void OnTaskExiting(object sender, EventArgs eventArgs)
    {
        TaskTracker taskTracker = (TaskTracker)sender;
        taskTracker.TaskExiting -= OnTaskExiting;
        _taskMap.Remove(taskTracker.Identity);

        Console.WriteLine("Time ellapsed for No partitioning at all version {0}ms , thread id was {1}", taskTracker.Stopwatch.ElapsedMilliseconds, Task.CurrentId);
    }

    private void OnButton3Click(object sender, EventArgs eventArgs)
    {
        Guid identity = _taskMap.Count > 0 ? _taskMap.First().Value.Identity : default(Guid);  // find some way to get the desired task

        TaskTracker taskTracker;
        if (_taskMap.TryGetValue(identity, out taskTracker))
        {
            taskTracker.TaskExiting += OnTaskExiting;
            taskTracker.Cancel();
        }
    } 
```

这是 TaskTracker 类：

```
public class TaskTracker
{
    private readonly Action<CancellationToken> OnDoWork;
    private readonly CancellationTokenSource TokenSource;
    private readonly CancellationToken Token;

    private bool _isRunning;
    private Task _task;

    public TaskTracker(Guid identity, Action<CancellationToken> onDoWork)
    {
        TokenSource = new CancellationTokenSource();
        Token = TokenSource.Token;

        Identity = identity;
        OnDoWork = onDoWork;
    }

    public readonly Guid Identity;
    public readonly Stopwatch Stopwatch = new Stopwatch();

    public event EventHandler TaskExiting;

    public void Start()
    {
        _isRunning = true;
        _task = Task.Factory.StartNew(
            () =>
                {
                    Stopwatch.Start();
                    try
                    {
                        while (_isRunning)
                        {
                            OnDoWork(Token);
                        }
                    }
                    finally
                    {
                        Stopwatch.Stop();

                        if (TaskExiting != null)
                        {
                            TaskExiting(this, EventArgs.Empty);
                        }
                    }
                }, Token
            );
    }

    public void Stop(bool waitForTaskToExit = false)
    {
        if (_task == null)
        {
            throw new InvalidOperationException("Task hasn't been started yet");
        }

        _isRunning = false;
        if (waitForTaskToExit)
        {
            _task.Wait();
        }
        _task = null;
    }

    public void Cancel()
    {
        if (_task == null)
        {
            throw new InvalidOperationException("Task hasn't been started yet");
        }

        _isRunning = false;
        TokenSource.Cancel();
        _task = null;
    }
} 
```

基本上，在您的“工人”中，您将检查令牌是否表明它正在被取消，如果是，请进行一些清理，然后在令牌上调用 ThrowIfCancellationRequested 方法以中断。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-02T03:59:40.003

像这样的东西可以工作。

```
 private Dictionary<Guid, TaskTracker> _taskMap = new Dictionary<Guid, TaskTracker>();

    private void OnButton1Click(object sender, EventArgs eventArgs)
    {
        TaskTracker taskTracker = new TaskTracker(Guid.NewGuid(), OnDoWork);
        _taskMap.Add(taskTracker.Identity, taskTracker);
        taskTracker.Run();
    }

    private void OnDoWork()
    {
        // Do some work
    }

    private void OnButton2Click(object sender, EventArgs eventArgs)
    {
        Guid identity = _taskMap.Count > 0 ? _taskMap.First().Value.Identity : default(Guid);  // find some way to get the desired task

        TaskTracker taskTracker;
        if (_taskMap.TryGetValue(identity, out taskTracker))
        {
            taskTracker.TaskExiting += OnTaskExiting;
            taskTracker.Stop();
        }
    }

    private void OnTaskExiting(object sender, EventArgs eventArgs)
    {
        TaskTracker taskTracker = (TaskTracker)sender;
        taskTracker.TaskExiting -= OnTaskExiting;
        _taskMap.Remove(taskTracker.Identity);
        // do what you want with the timings
    } 
```

任务类是这样的：

```
public class TaskTracker
{
    private readonly Action OnDoWork;
    private Task _task;
    private bool _isRunning = true;

    public TaskTracker(Guid identity, Action onDoWork)
    {
        Identity = identity;
        OnDoWork = onDoWork;
    }

    public readonly Guid Identity;
    public readonly Stopwatch Stopwatch = new Stopwatch();

    public event EventHandler TaskExiting;

    public void Run()
    {
        Task _task = Task.Factory.StartNew(
            () =>
                {
                    Stopwatch.Start();
                    try
                    {
                        while (_isRunning)
                        {
                            OnDoWork();
                        }
                        if (TaskExiting != null)
                        {
                            TaskExiting(this, EventArgs.Empty);
                        }
                    }
                    finally
                    {
                        Stopwatch.Stop();
                    }
                }
            );
    }

    public void Stop()
    {
        _isRunning = false;
        // wait for task to exit?
        _task = null;
    }
} 
```

您需要填写空白，即在点击按钮 2 时跟踪任务并获取目标任务。

# php - PHP检查注册表单上的用户输入？

> ID：13666119
> 
> 赞同：-2
> 
> 时间：2012-12-02T03:23:47.877
> 
> 标签：php, html, mysql

好的，所以我没有可以发布的代码，因为这不是与编码直接相关的问题。但是，我想检查例如某人在注册表单中输入的电话号码是否是 int(8) 以及电子邮件是否有效（IE 包含 @ 并以 .{至少 2 个字符}结尾）甚至更好的邮件带有一些确认电子邮件。

我对 PHP 真的很陌生，我正在做一个学校项目，所以这里有任何帮助。

基本上它归结为：有什么方法可以验证我从表单收到的输入。既然我假设有，我想知道哪种方法。

所有信息都进入数据库，但即使电话号码不是 int(8)，它也会注册它。

数据库与 MySQL。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T03:32:10.773

这是一个非常广泛的问题，有许多不同的可能答案。这取决于您是否使用严格的 PHP，或者您是否可以使用库。

## 数据库：

首先，我们从数据库开始。如果 mysql 允许一组非整数字符进入数据库（如电话号码，即使我永远不会使用整数作为电话号码），那么您的列设置错误。您可以使用`DESCRIBE [TABLE_NAME]`命令查看表是如何设置的。

## PHP：

然后，我们进入验证。这里有很多关于验证电子邮件地址或电话号码的参考资料。您将使用`preg_filter`（或类似的）功能。

在发布的表单中，捕获输入并验证它。如果有效，请继续下一页。但是，如果您有错误，请包含并呈现原始表单块，并且（希望）您将编写它以便它会拉入 $_POST 变量（过滤 XSS）。

以下是验证的一些 SO 结果：

1.  [用于电话号码验证的综合正则表达式](https://stackoverflow.com/questions/123559/a-comprehensive-regex-for-phone-number-validation)
2.  [使用正则表达式验证电子邮件地址](https://stackoverflow.com/questions/201323/using-a-regular-expression-to-validate-an-email-address)

## 客户端：

我最喜欢的是另外执行某种类型的客户端验证。这使客户能够在现场修复他们的错误，而不必回发页面以查看问题所在。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-02T05:57:09.217

查看 jquery 验证 .. 但这仍然会让您打开错误数据进入 PHP，然后进入数据库。

你在使用框架吗？他们中的许多人都有数据验证器，您可以在发送到数据库之前*或*在发送到数据库时运行这些验证器- 然后进行相应处理

# c++ - 视觉工作室项目文件

> ID：13666122
> 
> 赞同：40
> 
> 时间：2012-12-02T03:24:29.883
> 
> 标签：c++, visual-studio-2010, visual-studio, vcproj, vcxproj

**.vcproj**和**.vcxproj** Visual Studio 项目文件有什么区别？**.vcproj**格式是否仅在 2010 之前的 Visual Studio 版本中可用？

我问是因为我正在阅读日期为 10/12 的 MSDN 教程，该教程说将文本插入 .vcproj 文件的某个区域，该区域在 .vcxproj 文件中不存在。试图将文本放在类似的区域会破坏项目。

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2012-12-02T03:29:14.190

[构建系统更改](https://docs.microsoft.com/en-us/cpp/porting/build-system-changes)

> 项目文件不再使用`.vcproj`文件扩展名。Visual Studio 自动将由早期版本的 Visual C++ 创建的项目文件转换为当前系统使用的格式。有关如何手动升级项目的详细信息，请参阅[/Upgrade (devenv.exe)](http://msdn.microsoft.com/en-us/library/w15a82ay.aspx)。
> 
> MSBuild 系统用于构建 Visual C++ 项目。但是，在 Visual Studio 2008 和更早的版本中，使用了 VCBuild 系统。依赖于 VCBuild 的某些文件类型和概念要么不存在，要么在当前系统中以不同方式表示。
> 
> 在当前版本中，项目文件的文件扩展名为`.vcxproj`.

这是您的答案：它已从更改`.vcproj`为`.vcxproj`

# python - 有没有办法在 Tkinter 中为画布设置“默认颜色”？

> ID：13666124
> 
> 赞同：3
> 
> 时间：2012-12-02T03:24:57.743
> 
> 标签：python, tkinter, tk, tkinter-canvas

有没有一种方法可以设置画布对象（线条、矩形等）的默认颜色，而无需单独设置每个对象？我知道默认颜色是黑色，我基本上只是想改变它，以便我随后创建的所有东西都是绿色的。有没有办法在 Python 中使用 Tkinter 来做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-02T13:28:36.207

不，没有办法设置默认颜色。但是，如果将颜色存储在变量中，则可以在创建新项目时使用它。

```
self.my_color = "red"
...
self.canvas.create_rectangle(..., fill=my_color) 
```

[您还可以通过将 id "all" 赋予itemconfigure](http://effbot.org/tkinterbook/canvas.htm#Tkinter.Canvas.itemcget-method)方法来一次更改所有对象。例如：

```
self.my_color = "green"
self.canvas.itemconfigure("all", fill=self.my_color) 
```

有关项目标识符（包括特殊的“所有”标识符）的更多信息，请参阅[effbot.org上的项目说明符](http://www.tkdocs.com)[：句柄和标签](http://effbot.org/tkinterbook/canvas.htm#item-specifiers)以及[tkdocs.com](http://www.effbot.org)上[的画布教程中](http://www.tkdocs.com/tutorial/canvas.html#tags)的标签部分

# ios - AudioQueueEnqueueBufferWithParameters 忽略 inStartTime

> ID：13666125
> 
> 赞同：0
> 
> 时间：2012-12-02T03:25:04.607
> 
> 标签：ios, core-audio

我正在尝试将 AudioQueueEnqueueBufferWithParameters 与 inStartTime 参数一起使用来延迟播放每个缓冲区的开始。如下所示，它正在播放而没有预期的延迟。我的 inStartTime 正确递增，但调用返回的实际开始时间基本上与前一个缓冲区背靠背。我正在播放的声音适合单个缓冲区，因此我每次都将相同的缓冲区排入队列，但 inStartTime 会增加。什么会导致 AudioQueueEnqueueBufferWithParameters 忽略我的 inStartTime？

```
Frames in buffer: 11025
intended playtime = 0.000000
actual playtime = 0.000000
intended playtime = 99225.000000
actual playtime = 11025.000000
intended playtime = 198450.000000
actual playtime = 22050.000000
intended playtime = 297675.000000
actual playtime = 33075.000000
.
.
. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T21:19:34.793

开始时间参数不能用于在正在运行的音频队列中的连续缓冲区之间创建延迟。单个正在运行的音频队列中的缓冲区始终被回放。

在音频队列中创建延迟的方法是计数样本并用静音填充部分或全部缓冲区，直到开始用所需的声音样本填充缓冲区。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-06-09T15:43:34.043

根据在*AudioQueueEnqueueBufferWithParameters*的参数*inStartTime上的**AudioQueue.h*中找到的文档（您可以使用 XCode 访问它）：

 ***@param inStartTime
...
注意：当指定缓冲区的开始时间时，如果缓冲区不是自 AudioQueueStop 或 AudioQueueReset 以来第一个入队的，通常需要在 AudioQueueEnqueueBufferWithParameters 之前调用 AudioQueueFlush*

（由于某种原因，[官方文档](https://developer.apple.com/library/ios/documentation/MusicAudio/Reference/AudioQueueReference/#//apple_ref/c/func/AudioQueueEnqueueBufferWithParameters)不包含此说明）

你必须先调用*AudioQueueFlush 入*队。我知道它写成*“......因为 AudioQueueStop 或 AudioQueueReset......”*但它也适用于*AudioQueueStart*。**

# css - 重叠 div 垂直跨越

> ID：13666128
> 
> 赞同：-5
> 
> 时间：2012-12-02T03:25:35.327
> 
> 标签：css, twitter-bootstrap

我正在尝试将蓝色 div-span 垂直重叠在 div-span-well 上。请参阅附件图像，这在引导程序中是否可行？![在此处输入图像描述](../Images/d36882c20d86c9953b01929b9cd6d8dc.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-02T03:41:40.150

重叠 div 最简单的方法是结合使用、和`position: relative`属性。[这是一个快速的 JSFiddle 示例](http://jsfiddle.net/9FLUA/)。`top``right``bottom``left`

Bootstrap 只是编译成 CSS，所以你可以在 Twitter Bootstrap 中做的任何事情都可以在 CSS 中做，反之亦然。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-02T03:33:01.070

### 不仅在 TBS 中，而且您可以在任何 CSS 中执行此操作。

比如说，你有一个这样的**HTML**：

```
<div class="head-with-overlay">
    <h3>Lorem</h3>
    <p>Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged. It was popularised in the 1960s with the release of Letraset sheets containing Lorem Ipsum passages, and more recently with desktop publishing software like Aldus PageMaker including versions of Lorem Ipsum.</p>
</div> 
```

您可以通过这种方式使用**CSS**：

```
.head-with-overlay {position: relative; padding: 50px 15px 15px; border: 1px solid #ccc; margin: 10px;}
.head-with-overlay h3 {position: absolute; padding: 5px 10px; background: #00f; top: -10px; left: 50%; width: 50px; text-align: center; color: #fff; margin-left: -25px;}​ 
```

### 小提琴：http: [//jsfiddle.net/thhPg/](http://jsfiddle.net/thhPg/)

# java - 使用 Windows Builder Pro 创建 GUI

> ID：13666129
> 
> 赞同：-1
> 
> 时间：2012-12-02T03:25:43.330
> 
> 标签：java, swing, user-interface

Windows Builder Pro GUI 设计器不是为国际象棋或四连线等游戏设计 GUI，而是为基本 GUI 设计？

我之所以这么问，是因为我在网上观看的所有教程都在构建非常基本的窗口，而没有人真正为跳棋之类的游戏构建 GUI。

编辑：我将如何使用 Windows Builder Pro 实现棋盘？

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-02T03:26:44.620

GUI builder 适用于您想要制作的任何 GUI，包括国际象棋和连接四。您想要添加的附加功能越多，您就越需要进行一些自定义编码，但这与任何 GUI 代码生成器相同。这些教程旨在向人们介绍该工具的使用，而不是作为涵盖该工具所有用途的一种手段。我要补充一点，如果您对 Swing 库不是很熟悉，那么您应该避免使用代码生成工具，因为当您需要挑战极限时，您会发现它非常令人沮丧，因为我们总是必须使用这些工具。

只是你被困在哪里？

# c - 为什么我的函数不等待输入？

> ID：13666131
> 
> 赞同：2
> 
> 时间：2012-12-02T03:26:18.897
> 
> 标签：c, input

我写了一个函数，它读取一个未知长度的字符串，直到按下 Enter 并返回一个字符指针。当我从开关盒内部调用该函数时，它不会等待我的输入。

```
char *get_paths()
{
    unsigned int length_max = 256; /*Initial length of string*/
    unsigned int current_size; 
    current_size = length_max;

    /* Allocating memory for string input */
    char *tmpStr = malloc(length_max);

    /* Simple check to make sure our pointer is not NULL */
    if(tmpStr != NULL)
    {
        int c = EOF; 
        unsigned int i = 0;

        printf("Enter The EXACT or RELATIVE File Paths Separated by a Space: ");

        /* Accept input until Enter key is pressed or user inserts EOF */
        while((c = getchar()) != '\n' && c != EOF)
        {
            tmpStr[i] = (char)c;
            ++i;

            /* If memory is filled up, reallocate memory with bigger size */
            if(i == current_size)
            {
                current_size = i + length_max;
                /* realloc does magic */
                tmpStr = realloc(tmpStr, current_size); 
            }
        }

        /* A valid string always end with a '\0' */
        tmpStr[i] = '\0';
        printf("Got it: %s \n", tmpStr); /*TODO: REMOVE;; USED FOR TESTING*/
        return tmpStr; 
    }
} 
```

开关盒（我在开关块中有一个 char ***ptr = NULL**）：

```
/*File input*/
case 1:
    ptr = get_filepaths();
break; 
```

**输出：**

> 输入以空格分隔的确切或相对文件路径：明白了：

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-02T03:30:04.003

您很可能会遇到缓冲问题`stdout`，这是`printf`默认设置。您需要显式刷新`stdout`或在第一条语句的末尾放置一个换行符，`printf`以强制刷新缓冲区。由于“知道了”语句的末尾有一个换行符，因此会发生两个语句（第一个被缓冲的语句）同时打印到输出，因为第二个语句强制刷新缓冲区。

另一种可能性是 中可能已经有未读数据`stdin`，当您`getchar()`在`while`-loop 中调用时，它会读取先前缓冲的数据，点击换行符，然后退出循环，而不是允许您输入新信息。为避免该问题，请执行类似操作`scanf("%*[^\n]%*c");`，以便将输入消耗到已经在输入中的下一个换行符（包括换行符本身），而不必担心缓冲区溢出。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-02T04:44:30.323

我能够找到“以某种方式”解决此问题的解决方案是`getchar()`在第一次`printf()`通话后立即添加。**不知道为什么会这样！**

# c++ - C++ 中的 argc argv 参数 - （游戏编程）

> ID：13666134
> 
> 赞同：0
> 
> 时间：2012-12-02T03:26:51.643
> 
> 标签：c++, main, argv, argc

今晚我不得不考虑的另一件“新”事情：

```
int main(argc, char *argv[]) 
```

我不明白为什么我想从 cmd 行读取，但你永远不知道！为什么我不直接使用`getline`并将其读入字符串？或者`getch`如果是别的什么？

我怀疑答案与要处理的代码量有关——使用这样的东西`#include <string>`肯定会使用更少的计算能力，对吗？

**编辑：回顾这一年，我觉得很傻，在大学里从来没有真正教过关于命令行输入的课程（我知道对，我在上什么样的课程..）:)**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-02T03:42:28.630

`argc`和`argv`标准输入输出无关。如果我说

```
myapp Drink More Ovaltine 
```

`argc`将是 4，并且`argv`将包含程序的名称，然后是“Drink”，然后是“More”，然后是“Ovaltine”。

`getline`只是从输入流中读取数据。它永远不会看到命令行参数。（除非你把它们从`argv`' `stringstream`' '''''''''''''''''''''''s智能''''''''''艰难艰难艰难艰难艰难地''''''''''''''''''''''''''''''''''''艰难是将好，'''''''''''''''）

至于`#include`，这也与运行时 I/O 无关。*它用于告诉编译器（或者通常是预处理器）在编译期间*包含 C 源文件。你不能只是`#include`一个任意的二进制文件或其他东西。（包含完成后，生成的一堆字符必须形成有效的 C++ 代码）。到运行时，文件已经被包含——到运行时，应用程序甚至不知道该文件存在，因此甚至不会考虑读取它。

精简版：

*   `argv`并`argc`用于访问用于启动应用程序的命令行中的内容。它根本与 I/O 无关。
*   `getline`用于*在运行时*从流中输入，并且可以读取几乎任何文件。
*   `#include`用于*在编译时*插入 C++ 代码，只能真正用于源代码。

正如您现在所看到的，这三种机制是完全独立且不相关的，几乎永远不能用一种机制代替另一种机制。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-02T04:08:26.247

> 作为一名游戏程序员，我不明白我为什么要从 cmd 行读取，但你永远不知道！

通常，对于 GUI 程序，通过命令行传入的东西往往是隐藏或调试选项。

例如，IE 有一个`-k`无法在普通首选项中设置的命令行开关。该开关使 IE 在 kiosk 模式下运行，并禁用了很多东西。这是普通用户不应该做的事情，因为如果您在 kiosk 模式下运行 IE，您将无法访问其他任何内容（就像将 Windows 变成 MsIeOS）。

谷歌浏览器有一个命令行参数`--first-run`，强制它重新初始化用户首选项并弹出第一个运行设置对话框。如果您碰巧损坏了 Chrome 首选项，这将非常有用。

游戏类似。Halo2 有一个`-windowed`命令行参数，可以在窗口而不是全屏中启动游戏。这是 Halo2 命令行参数列表：http: [//support.microsoft.com/kb/830487](http://support.microsoft.com/kb/830487)

如果您想不出任何使用命令行参数的方法，请不要使用它。这并不意味着其他人找不到它的用途。

对于各种程序，只需谷歌“[程序名称]命令行参数”即可找出有什么（如果有）。你会发现那些和你一样想不出命令行参数有什么用的人编写的程序，所以这些程序没有任何用处。

# xml - 识别 XML 中节点下的标签超集

> ID：13666136
> 
> 赞同：3
> 
> 时间：2012-12-02T03:27:35.487
> 
> 标签：xml, xslt

我想转换一个 XML，以便特定名称的所有节点都包含这些节点下可用的所有元素的超集。

例如，这里是输入 xml。在这个 xml 中，组可以包含一个或多个项目节点。调用者只会传递该组下可用的项目。

```
<group>
   <item>
       <name> item1 </name>
       <value> 10 </value>
   </item>
</group>
<group>
    <item>
       <name> item2 </name>
       <value> 20 </value>
     </item>
</group> 
```

要求是将其转换为如下所示的，其中来自所有组的项目节点应该是每个组的一部分。但是，如果该项目在该组下的输入中不可用，则应将其填充为 0。

```
<group>
   <item>
       <name> item1 </name>
       <value> 10 </value>
   </item>
   <item>
       <name> item2 </name>
       <value> 0 </value>
   </item>
</group>
<group>
     <item>
       <name> item1 </name>
       <value> 0 </value>
     </item>    
    <item>
       <name> item2 </name>
       <value> 20 </value>
     </item>
</group> 
```

您能否让我知道如何使用 XSLT 实现这一点？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T04:06:49.017

这是我的做法（在 XSLT 2.0 中，因为您没有指定）...

**XML 输入**（包装`<groups>`成格式良好）

```
<groups>
    <group>
        <item>
            <name> item1 </name>
            <value> 10 </value>
        </item>
    </group>
    <group>
        <item>
            <name> item2 </name>
            <value> 20 </value>
        </item>
    </group>
</groups> 
```

**XSLT 2.0**

```
<xsl:stylesheet version="2.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
    <xsl:output indent="yes"/>
    <xsl:strip-space elements="*"/>

    <xsl:variable name="names" select="distinct-values(/*/group/item/name)"/>

    <xsl:template match="@*|node()">
        <xsl:copy>
            <xsl:apply-templates select="@*|node()"/>
        </xsl:copy>
    </xsl:template>

    <xsl:template match="group">
        <xsl:variable name="currentItems" select="item/name"/>
        <xsl:variable name="items" as="node()*">
            <xsl:apply-templates select="item"/>
            <xsl:for-each select="$names[not(. = current()/item/name)]">
                <item>
                    <name><xsl:value-of select="."/></name>
                    <value> 0 </value>
                </item>
            </xsl:for-each>         
        </xsl:variable>
        <xsl:copy>
            <xsl:apply-templates select="@*"/>
            <xsl:perform-sort select="$items">
                <xsl:sort select="name"/>
            </xsl:perform-sort>
        </xsl:copy>
    </xsl:template>

</xsl:stylesheet> 
```

**XML 输出**

```
<groups>
   <group>
      <item>
         <name> item1 </name>
         <value> 10 </value>
      </item>
      <item>
         <name> item2 </name>
         <value> 0 </value>
      </item>
   </group>
   <group>
      <item>
         <name> item1 </name>
         <value> 0 </value>
      </item>
      <item>
         <name> item2 </name>
         <value> 20 </value>
      </item>
   </group>
</groups> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-02T03:53:42.230

**这既是 XSLT 1.0 又是 XSLT 2.0 解决方案**：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>
 <xsl:strip-space elements="*"/>

 <xsl:variable name="vGroupContent" select="/*/group/node()"/>

 <xsl:template match="node()|@*">
  <xsl:copy>
   <xsl:apply-templates select="node()|@*"/>
  </xsl:copy>
 </xsl:template>

 <xsl:template match="group">
  <group>
   <xsl:apply-templates select=
    "node()|@*|$vGroupContent[not(name = current()/item/name)]">
    <xsl:with-param name="pGroup" select="."/>
     <xsl:sort select="name"/>
   </xsl:apply-templates>
  </group>
 </xsl:template>

 <xsl:template match="item">
  <xsl:param name="pGroup"/>
  <item>
    <xsl:apply-templates select="name"/>
    <value> <xsl:value-of select=
    "value/text()[generate-id($pGroup) = generate-id(../../..)]"/>

    <xsl:if test=
     "value/text()[not(generate-id($pGroup) = generate-id(../../..))]"> 0 </xsl:if>
    </value>
  </item>
 </xsl:template>
</xsl:stylesheet> 
```

**当此转换应用于以下 XML 文档时：**

```
<t>
    <group>
        <item>
            <name> item1 </name>
            <value> 10 </value>
        </item>
    </group>
    <group>
        <item>
            <name> item2 </name>
            <value> 20 </value>
        </item>
    </group>
</t> 
```

**产生了想要的正确结果：**

```
<t>
   <group>
      <item>
         <name> item1 </name>
         <value> 10 </value>
      </item>
      <item>
         <name> item2 </name>
         <value> 0 </value>
      </item>
   </group>
   <group>
      <item>
         <name> item1 </name>
         <value> 0 </value>
      </item>
      <item>
         <name> item2 </name>
         <value> 20 </value>
      </item>
   </group>
</t> 
```

# nlp - 实体提取库

> ID：13666142
> 
> 赞同：5
> 
> 时间：2012-12-02T03:28:59.247
> 
> 标签：nlp, semantics, named-entity-recognition, named-entity-extraction

我正在寻找一个进行文本分析和提取实体的库。

实体的类型/分类并不重要，重要的是确定有价值的东西。在这种情况下，实体宇宙是无限的，它不受固定字典的限制。

似乎有几个网络服务可以做到这一点（NERD 让您比较这些网络服务的结果：http: [//nerd.eurecom.fr/documentation](http://nerd.eurecom.fr/documentation)非常有用），但我正在寻找本地图书馆而不是远程托管服务。我更喜欢 Java 或 .NET，但如果它是一个好的库，我会学习它所用的任何语言。

关于类似主题的旧线程很少，我希望在这个领域找到新的发展，和/或建立在较低级别的 NLP 库之上的库：

*   [在提供 Lucene 索引时使用免费工具进行实体提取/识别](https://stackoverflow.com/questions/7455188/entity-extraction-recognition-with-free-tools-while-feeding-lucene-index)
*   [Lucene 实体提取](https://stackoverflow.com/questions/4199382/lucene-entity-extraction)
*   [如何在 Lucene 中进行实体提取](https://stackoverflow.com/questions/4308132/how-do-i-do-entity-extraction-in-lucene)
*   [https://stackoverflow.com/questions/tagged/named-entity-extraction](https://stackoverflow.com/questions/tagged/named-entity-extraction)
*   [https://stackoverflow.com/questions/tagged/named-entity-recognition](https://stackoverflow.com/questions/tagged/named-entity-recognition)

有谁知道一个做得不错的图书馆？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-02T05:04:49.127

我研究过但从未使用过以下托管实体识别服务：

**OpenCalais**

*   文档：[http ://www.opencalais.com/documentation/calais-web-service-api](http://www.opencalais.com/documentation/calais-web-service-api)
*   Java API：[http ://code.google.com/p/j-calais/](http://code.google.com/p/j-calais/)

**炼金术API**

*   网址：[http ://www.alchemyapi.com/](http://www.alchemyapi.com/)
*   Java API [http://www.alchemyapi.com/tools/](http://www.alchemyapi.com/tools/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-02T23:11:06.987

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-19T18:59:36.210

你可以使用[NLTK](http://nltk.org/)和 Python。有关使用 NLTK 进行 NER 的示例，请参阅[此问题。](https://stackoverflow.com/questions/5708352/named-entity-recognition-for-nltk-in-python-identifying-the-ne)

# git - diff 在现有功能中添加新功能，而不是之后

> ID：13666148
> 
> 赞同：4
> 
> 时间：2012-12-02T03:30:32.810
> 
> 标签：git, diff

我已经开始更加关注我正在创建的差异文件（使用 git），我对这种情况产生的差异的清晰度感到不满。

我开始：

```
sub main {
    my $self = shift;

    return $self;
} 
```

然后我添加第二个函数并在第一个函数中调用它以获得：

```
sub main {
    my $self = shift;

    $self -> process ( 'hello world!' );

    return $self;
}

sub process {
    my $self = shift;

    print @_, "\n";

    return $self;
} 
```

我得到的差异输出是：

```
@@ -1,5 +1,15 @@
 sub main {
    my $self = shift;

+   $self -> process ( 'hello world!' );
+   
+   return $self;
+}
+
+sub process {
+   my $self = shift;
+   
+   print @_, "\n";
+   
    return $self;
 } 
```

这对我的读者来说似乎很不整洁和不清楚。大量添加使我看起来像是在“主”函数中添加了很多行，而实际上我实际上在它之后添加了很多行。例如，我希望/喜欢差异是这样的：

```
@@ -1,5 +1,15 @@
 sub main {
    my $self = shift;

+   $self -> process ( 'hello world!' );
+   
    return $self;
 }
+
+sub process {
+   my $self = shift;
+   
+   print @_, "\n";
+   
+   return $self;
+} 
```

我理解为什么 diff 会创建此输出（从“a -> b”开始的最简单方法），但希望它可以更清晰。这可能吗？或者我是否正在考虑手动编辑差异，甚至将新功能的添加和对它的调用分成 2 个单独的补丁/提交？[1]

我试过使用--no-minimal、--patience 和--histogram 算法，但差异结果是相同的。使用 'git add -p' 手动编辑差异没有任何区别，它仍然作为第一个“不清楚”差异进行阶段。

[1] 作为一个附带问题，这种分离是我无论如何都*应该做的事情吗？*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T04:39:58.193

通常人们不会将这样的更改分成多个提交。通常，规则是尝试让每个提交独立。即使您确实将其拆分为多个提交，人们通常会查看其中任何一个提交之前的状态和它们之后的状态的差异，因此会看到您所看到的相同类型的输出。

使用`git add -p`绝对不会影响输出的差异。这只是一种更好地控制哪些更改进入下一次提交的方法。在任何情况下，提交仅包含您正在使用的树的新内容，它不会记录与先前版本的差异。每次请求时都会计算稍后显示的差异。

有助于避免这种情况的一件事是`# End of <function name>`在每个函数的右括号之后添加注释。但这有它自己的丑陋之处。在实际代码中，不同函数之间的共性可能较少，因此差异产生误导的可能性较小。但无论如何，这是大多数人习惯的事情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-02T05:42:27.293

根据[git diff man page](http://linux.die.net/man/1/git-diff)，diff 的默认上下文是 3 行。当两个（可能的）独立变化更接近并因此重叠时，它们会合并为**一个共同的大块**

您可以忍受它或使用 always`-U<n>`选项

> `<n>`使用上下文行而不是通常的三个生成差异

与您的差异

# haskell - 如何在 Haskell 中实现词法分析器和解析器

> ID：13666150
> 
> 赞同：4
> 
> 时间：2012-12-02T03:31:16.777
> 
> 标签：haskell

我在这里得到了这段代码，它是一个用 Haskell 结构的命令式编程语言编写的程序，所以问题是“我怎样才能为这种语言实现词法分析器和解析器”，程序被定义为一个序列语句有 6 种类型：“:=”、“goto”、“write”、“stop”、“if goto”和“int”

1.  整数 n=5
2.  写 n
3.  int fac=1
4.  if0 n 转到 8
5.  fac := fac * n
6.  n := n-1
7.  转到 4
8.  写 fac
9.  停止

我有点迷路了，我读过关于词法分析器和解析器的文章，但没有找到任何如何实现它们的例子，如果你能给我一段代码，我将不胜感激，这样我就可以自己尝试做，或者至少有有用信息的链接

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-12-05T03:55:27.423

## 开始使用 Parsec 进行解析

我不会为你写完整的东西，但我会让你从每一点开始。我们将经历的三个阶段是：

1.  定义语法
2.  制作抽象语法树。（这看起来像语法，所以很容易。）
3.  编写解析器。（这也看起来像语法，所以很容易。）

我们可以在 2 和 3 之间建立一个单独的词法分析阶段，但是 Parsec 很乐意同时做这两个级别。Lexing 是您将输入拆分为标记的地方 - 有意义的输入位 - 相当于人类语言中的单词，也称为词位。跳过单独的词法分析阶段意味着我们需要更明确地了解空格等。

## 1\. 语法

首先，您需要定义语法。最好用纸和铅笔完成，但我会让你开始：

```
 program ::= line {[newline line]}
  line ::= num dot whitespace statement
  statement ::= declaration | write | ifstatement | goto | assignment | stop
  declaration = "Int" whitespace varname equals int
  varname = letter {[alphanum]}
  -- more things here, including the more interesting ifstatement:
  ifstatement = "if" whitespace expression whitespace equals expression whitespace statement

  -- lower level stuff:
  dot = "."
  int = digit {[digit]}
  digit = "0" | "1" | ...  | "9"
  whitespace = " " okspace | "\t" okspace
  okspace = "" | whitespace 
```

想一想它如何匹配您的示例程序，并考虑如何完成它：

```
1\. Int n=5
2\. write n
3\. Int fac=1
4\. if 0 n goto 8          -- unusual
5\. fac := fac * n
6\. n := n+1               -- complex
7\. goto 4
8\. write fac
9\. stop 
```

第 4 行中的 if 语句很不寻常，因为其中没有`=`or `==`。也许这是为了简化语法，它只能接受单个变量或整数，之间有空格。也许这是一个错字，你的意思是有一个等号和任意表达式。找出哪个并重写`ifstatement`语法的一部分。

第 6 行的赋值很复杂，因为在这里你必须解析任意算术表达式。据我记得有很多这样的例子，所以我现在很乐意跳过它。如果你被那一点卡住了，那就另当别论了，但希望你能先用剩下的部分建立你的解析技能。

## 2.抽象语法树（AST）

抽象语法树表示构成输入的标记的组合。在 Haskell 中，我们可以定义自己的内容以适应上下文，这将使生活变得更加简单

我实际上正在[编译这个答案](https://stackoverflow.com/questions/12666723/i-taught-ghci-to-compile-my-stackoverflow-posts-can-i-make-it-slicker)（一种检查拼写错误等的好方法），这就是为什么我需要在代码顶部进行一些声明：

```
module ParseLang where

import Text.Parsec hiding (Line)
import Text.Parsec.String
import Control.Applicative hiding ((<|>), many) 
```

我们将只创建一个s`Program`列表`Line`，但使用解析器强制要求至少有一个。

```
type Program = [Line] 
```

对于 a `Line`，它需要一个数字和一个语句，但点只是我们不需要存储的语法。我们可以将行号存储为`Int`，因此尽管在类型声明中允许使用负数，但解析器再次不会接受负数。

```
data Line = Line {aNum::Int, aStatement :: Statement} 
   deriving Show 
```

多个选项很容易定义：

```
data Statement = Declaration VarName Int
               | Write VarName
               | IfStatement Expression Expression Statement
               | Goto LineNumber
               | Assignment VarName Expression
               | Stop
   deriving Show 
```

请注意所有语法 cruft/connectives/等号的缺失，只留下了变化的位。

我停在那里 - 你可以完成：

```
data Expression = Expression -- I've left this one for you
   deriving Show

type VarName = String   -- could use newtype for type safety for these to
type LineNumber = Int 
```

较低级别的语法不需要在 AST 中表示，因为我们将使用字符串来表示它。

## 3\. 解析器

这一点现在很好很容易。让我们从语法树的底部开始，然后逐步进行。

```
num :: Parser Int
num = read <$> many digit 
```

我们使用了 ，这是我们通过导入获得`<$>`的同义词。在这里，它使用左侧的纯函数更改解析器返回的值，在本例中为. 如果您不习惯，请查看[此其他答案](https://stackoverflow.com/questions/13134825/how-do-functors-work-in-haskell/13137359#13137359)以进行介绍。`fmap``Control.Applicative``read``fmap`

让我们做一个解析器来解析字符串文字然后是一些空格：

```
whitespace = space >> spaces  -- a space then optional spaces

lit :: String -> Parser String
lit xs = string xs <* whitespace 
```

现在这`<*`很有趣。它看起来像`<*>`，它实际上结合了两个解析器，并与它一起使用`<$>`，实际上将纯函数映射到结果上。`*>`并`<*`结合两个解析器，但忽略其中一个的输出，因此`string "goto" <* whitespace`解析 a`"goto"`和一些空格，但丢弃空格。

现在我们准备解析 goto 语句：

```
goto :: Parser Statement
goto = Goto <$> (lit "goto" *> num) 
```

现在让我们来看看 varName

```
varName :: Parser VarName
varName = (:) <$> letter <*> many (alphaNum <|> oneOf "'_") 
```

那里正在发生一些事情。

**1.** `<|>`是另一种选择 - 一个或另一个，因此`(alphaNum <|> oneOf "'_")`接受一个字母数字字符或一对无辜字符中的一个`'`，`_`您可能希望包含在变量名中。

**2.** `f <$> parser1 <*> parser2`是一种非常好的组合解析器的方式。它运行 parser1，然后是 parser2，然后将函数映射`f`到它们产生的结果 f 上。它适用于许多解析器：

```
--ifstatement = "if" whitespace expression whitespace equals whitespace expression whitespace statement
ifStatement :: Parser Statement
ifstatement = IfStatement 
          <$> (lit "if" >> expression) 
          <*> (lit "=" >> expression)    -- I put = in, but see below
          <*> (whitespace >> statement)  -- I'd be happier with a then in here 
```

如果您只允许 a `VarName`or`Int`而不是 general `Expression`，那么您不需要等号。

下面是你如何把它放在一起：

```
statement :: Parser Statement
statement = goto
        <|> stop
        <|> declaration 
        <|> write
        <|> ifStatement
        <|> assignment

--program ::= line {[newline line]}
program :: Parser Program
program = many1 line

--line ::= num dot whitespace statement
line :: Parser Line
line = Line <$> (num <* char '.') <*> (statement <* char '\n') 
```

但是，每次您尝试使用尚未完成的解析器时，我都会给您留下错误消息，因此整个事情将编译好并且您定义的位应该可以工作。

```
stop =        error "You've not yet defined stop"
declaration = error "You've not yet defined declaration"
write =       error "You've not yet defined write"
ifStatement = error "You've not yet defined ifStatement"
assignment =  error "You've not yet defined assignment"
expression =  error "You've not yet defined expression" 
```

# assembly - MASM 将字符串转换为整数：处理无效输入

> ID：13666153
> 
> 赞同：2
> 
> 时间：2012-12-02T03:31:29.930
> 
> 标签：assembly, masm

我有一个将字符串转换为整数的程序。只要用户输入有效数字，该程序就会运行良好。但是，一旦我添加了一些错误检查以确保输入的值实际上是数字，我就遇到了一些问题。最初，我将 tryAgain 标记作为 getData 过程中的第一行代码。但是，错误检查意味着在下一次迭代期间输入有效数字时，在输入无效输入后，程序会不断返回消息“无效输入”。将 tryAgain 标记放在代码的第一行会导致程序继续返回无效输入消息，即使有效输入跟随无效输入也是如此。首先，我尝试将 tryAgain 标记放在其当前位置，但我认为它正在无限循环中运行。第二，

这是 x86 处理器的 MASM。提前感谢您的建议。

这是代码：

```
.data
result  DWORD   ?
temp        BYTE        21 DUP(0)
answer  DWORD   ?

.code
main    PROC 
```

（一些初步程序调用）

```
push OFFSET temp        ;ebp+16
push OFFSET answer      ;ebp+12
push answerSize     ;ebp+8
call    getData 
```

（更多过程调用）

```
exit        ; exit to operating system
main ENDP

;*************************************************
; prompts / gets the user’s answer.
; receives: the OFFSET of answer and temp and value of answerSize
; returns: none
; preconditions: none
; registers changed:  eax, ebx, ecx, edx, ebp, esi, esp
;*************************************************
getData PROC
push        ebp
mov     ebp,esp

tryAgain:
mWriteStr   prompt_1
mov     edx, [ebp+16]       ;move OFFSET of temp to receive string of integers
mov     ecx, 12
call        ReadString
cmp     eax, 10
jg      invalidInput

mov     ecx, eax        ;loop for each char in string
mov     esi,[ebp+16]    ;point at char in string

pushad
loopString:             ;loop looks at each char in string
    mov     ebx,[ebp+12]
    mov     eax,[ebx]   ;move address of answer into eax
    mov     ebx,10d     
    mul     ebx         ;multiply answer by 10
    mov     ebx,[ebp+12]    ;move address of answer into ebx
    mov     [ebx],eax       ;add product to answer
    mov     al,[esi]        ;move value of char into al register
    inc     esi         ;point to next char
    sub     al,48d      ;subtract 48 from ASCII value of char to get integer  

    cmp     al,0            ;error checking to ensure values are digits 0-9
    jl      invalidInput
    cmp     al,9
    jg      invalidInput

    mov     ebx,[ebp+12]    ;move address of answer into ebx
    add     [ebx],al        ;add int to value in answer

    loop        loopString  
popad
jmp     moveOn
invalidInput:               ;reset registers and variables to 0
    mov     al,0
    mov     eax,0
    mov     ebx,[ebp+12]
    mov     [ebx],eax
    mov     ebx,[ebp+16]
    mov     [ebx],eax       
    mWriteStr   error
    jmp     tryAgain
moveOn:
    pop     ebp
    ret     12
getData ENDP 
```

只是为了让您了解我的目标，这是我的伪代码：

1.  从字符串的开头开始

2.  将答案的值乘以 10。

3.  从字符串中拆分每个字符并减去 48d 以获得整数。前任。学生输入 156。49 存储为变量 temp 中的第一个字符。从 49 中减去 48。整数为 1。

4.  将整数添加到答案的值。

5.  Inc esi（向右移动一个字符）。

6.  环形。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T04:03:54.887

摆脱`pushad`and `popad`。每次输入无效字符时，它都会跳回 tryAgain，然后`pushad`执行另一个 - 每次您跳回 tryAgain。

如果您需要保存任何寄存器，请在序言中进行并在结尾处恢复它们。

# c - C中字节大小的位模式及其相关性？

> ID：13666157
> 
> 赞同：7
> 
> 时间：2012-12-02T03:32:41.610
> 
> 标签：c

我正在阅读 Kerninghan 和 Ritchie 的 C 编程语言书，在第 37 页上提到了字节大小的位模式，例如：

`'\013'`对于垂直标签。

`'\007'`为钟字符。

我的疑问：

1.  它的字节大小是多少，位模式是什么？
2.  这有什么相关性，我可以在哪里应用它？
3.  它在任何意义上与转义序列有关吗？

我似乎无法在网络上找到任何关于这些字节大小的位模式的信息。请帮忙 。谢谢 。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-02T03:41:02.210

1.  一个字节是 8 位。看[这里](http://en.wikipedia.org/wiki/Byte)
2.  位模式是构成数据的位。例如，八进制值（即`'\007`）被转换为位模式（最高有效位在前）将是 0000 0111。`'\013'`将是位模式 0000 1011
3.  您通常将这些转义序列用于不可打印的字符。
4.  `'\007'`是一个转义序列。也是如此`'\\'`。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-02T04:59:29.823

最初开发和使用 C 语言时，最初的目标是[PDP-11 小型计算机](http://en.wikipedia.org/wiki/PDP-11)。PDP-11 有一个 16 位处理器。当时大多数输入是通过某种版本的[电传打字终端或电传打字终端](http://en.wikipedia.org/wiki/Teleprinter)（带有印刷纸的键盘而不是阴极射线管）完成的。后来[阴极射线管](http://en.wikipedia.org/wiki/Cathode_ray_tube)类型的终端被放置到位，例如[DEC-VT100 终端](http://en.wikipedia.org/wiki/VT100)取代了纸质终端。

这些终端使用电缆连接到主机，以在终端和主机之间进行通信。对于短电缆运行，使用[RS-232 标准](https://en.wikipedia.org/wiki/RS-232)，通常仅使用 25 个引脚中的三个（发送、接收和接地），并在终端和主机之间进行软件握手。[RS-422 标准](https://en.wikipedia.org/wiki/RS-422)用于更长的电缆运行。直接连接的数据传输速率通常为 9600[波特](https://en.wikipedia.org/wiki/Baud)或 14,400 波特。

在远程终端使用[公共交换电话网络](https://en.wikipedia.org/wiki/Public_switched_telephone_network)到达主机的情况下，在连接的每一端都使用[调制解调器](https://en.wikipedia.org/wiki/Modem)将数字信号转换和不转换为声音信号，以便通过电话线传输。在终端键盘上键入的字符通过电缆传输到主机。大多数调制解调器使用事实上的[Hayes 命令集标准](https://en.wikipedia.org/wiki/Hayes_command_set)的一些变体。

PDP-11 使用[ASCII 字符集](http://en.wikipedia.org/wiki/ASCII)，该字符集使用七位代码表示每个字符，第八位用于实现简单的[奇偶校验错误检查协议](http://en.wikipedia.org/wiki/Parity_bit)。后来通过使用奇偶校验位作为字符的一部分来扩展 ASCII 字符集，以便添加来自欧洲语言的字符以开发扩展 ASCII 和 ANSI 字符集以及用于在 CRT 类型上设置文本颜色的[ANSI 转义码序列](http://en.wikipedia.org/wiki/ANSI_escape_code)显示。

原始的 ASCII 代码有一段代码用于终端控制，例如响铃、垂直和水平制表符、换行或行尾等。还有一些代码用于创建简单的协议，如 Start和停止代码。一种这样的默认标准是使用转义字符来指示控制序列的开始，例如文本颜色的开始，或者将光标移动到显示器上的特定行和列。

使用现代图形用户界面，尽管仍有[终端仿真器](http://en.wikipedia.org/wiki/Terminal_emulator)可以将 ANSI 转义码转换为图形窗口中的各种显示行为，但其中大部分都相当陈旧且未使用。

因此，当 Kerninghan 和 Ritchie 在 PDP-11 上开发 C 和 Unix 操作系统时，他们在 DEC PDP-11 指令集、ASCII 字符集和 PDP-11 外围设备（如电传打印机）的环境中工作。

因此，他们自然而然地选择了由 8 位字符组成的文本字符串，并通过在字符串中嵌入特殊控制字符的方式来敲响电传打字机的铃声并在打印文本行时控制打字头。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-02T03:37:40.783

它只是一种以 8 进制（八进制）输入字符（字节）值的机制。通常用于在字符串或字符常量中添加控制和类似字符。

# c# - 未输出结构值 (C#)

> ID：13666159
> 
> 赞同：0
> 
> 时间：2012-12-02T03:33:25.457
> 
> 标签：c#, list, output

我正在尝试创建在搜索中找到最多显示 18 行电影信息（标题、年份、流派、质量、导演）的代码，但在控制台上显示代码时遇到问题。

相关结构：

```
struct Movie
        {
        public string title;
        public int year;
        public Name director;
        public float quality;
        public string mpaaRating;
        public string genre;
        public List<Name> cast;
        public List<string> quotes;
        public List<string> keywords;
        }
    struct MovieList
        {
        public int length;
        public Movie[] movie;
        } 
```

有问题的代码如下：

```
static void searchMovies(ref MovieList ML, int menuChoice)
{
Movie searchTerm;
float searchRating;
int searchIndex;
int foundIndex;
Movie[] foundMovie = new Movie[NUM_MOVIES];
do
{
int.TryParse(searchMenu(), out menuChoice);
foundIndex = 0;
Console.WriteLine("Enter the movie title to search for");
searchTerm.title = Console.ReadLine();
for (searchIndex = 0; searchIndex < ML.length; searchIndex++)
{
if (ML.movie[searchIndex].title == searchTerm.title)
{
foundMovie[foundIndex].title = ML.movie[searchIndex].title.ToUpper();
foundMovie[foundIndex].year = ML.movie[searchIndex].year;
foundMovie[foundIndex].genre = ML.movie[searchIndex].genre;
foundMovie[foundIndex].mpaaRating = ML.movie[searchIndex].mpaaRating;
foundMovie[foundIndex].director.firstName = ML.movie[searchIndex].director.firstName;
foundMovie[foundIndex].director.lastName = ML.movie[searchIndex].director.lastName;
foundIndex++;
}
}
Console.Clear();
displaySearchResults(foundMovie, foundIndex);
}

static void displaySearchResults(Movie[] foundMovie, int foundIndex)
        {
int displayedLines = 0;
int displayResults;
do
{
for (displayResults = 0; displayResults < foundMovie.Length; displayResults++)
{
Console.WriteLine("{0} {1} {2} {3}  {4} {5}",     foundMovie[displayResults].title,                                                               foundMovie[displayResults].year, foundMovie[displayResults].genre, 
 foundMovie[displayResults].mpaaRating, foundMovie[displayResults].director.firstName, foundMovie[displayResults].director.lastName);
displayedLines++;
}
Console.ReadLine();
} while (displayedLines < 18);
} 
```

此代码应该检查 ML.movi​​e[searchIndex].title 到 searchTerm，如果找到，则将 ML.movi​​e[searchIndex] 的标题、年份、流派、评级和导演姓名（名字和姓氏）的值加载到在foundIndex 的当前值处的foundMovie 结构。然后，在搜索完整个电影列表后，进入 display 方法并打印出一行代码，其中包含前面提到的值（标题、年份、流派、评级和导演姓名）。

当我运行代码并完成搜索过程时（ML 结构预加载了二进制文件中的电影），当显示搜索结果时，我得到的只是一堵 0 的墙，如图所示.

![运行时的示例输出](../Images/a90d3c2df03e58678e51e0327257735e.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T03:43:46.397

`displaySearchResults`即使没有与 0 匹配，您当前也调用`foundIndex`- 然后您继续显示数组中的第一项，该数组从未设置过，因此显示所有默认值 - 空字符串和零（假设您`struct`将其他结构用作出色地）。

两个建议：

*   `class`不使用`struct`- 这里似乎更合适。
*   不要使用固定大小的`Movie`数组，将 a`List<Movie>`用于找到的电影，因为您不知道将匹配多少部电影。

# aggregation - Stata foreach 循环使用 egen total(var),by(level) 聚合变量

> ID：13666160
> 
> 赞同：1
> 
> 时间：2012-12-02T03:33:24.780
> 
> 标签：aggregation, stata

假设我有一堆农场数据，在作物层面报告（即为每种作物提供数据）。

每个作物观察属于一个特定的田地，每个田地属于一个特定的农场。（田地和农场识别变量包含在数据集中。）

在Stata中，我想将作物级别的数据聚合到田间级别，然后将田间级别的数据聚合到农场级别。

所以对于变量 x，从作物到田间聚合的基本命令是：

egen x_field=total(x_crop), by(farm,field)

然后聚合到农场级别：

egen x_farm=total(x_field), by(farm)

我有很多变量需要聚合，所以我想使用 foreach 循环来执行此操作，而不是为每个后缀“_field”、“_farm”重复相同的代码。如果有人可以在这里帮助我，我将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-02T10:19:55.100

假设你的`egen`命令是做你想做的最好的方法：

```
foreach x of varlist var1-var99 {
  di "Processing variable `x'"
  egen `x'_field = total(`x'_crop), by(farm field)
  egen `x'_farm = total(`x'_field), by(farm)
} 
```

循环将遍历 to 范围内的每个`var1`变量`var99`。如果您想以`varlist`更复杂的方式定义变量列表，请查看 Stata 帮助。

编辑：字段中不应有逗号`by()`（感谢尼克）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-02T21:25:20.923

我认为 Fr. 的解决方案效果很好，但这里有一个替代解决方案。两者都可能非常快，但这种方法不需要显式循环，但在内部 Stata 可能使用一个。

`renvars`来自 SJ（即`findit renvars`），此功能是`rename`Stata 12+ 的一部分。

```
sysuse auto, clear
order rep78 foreign make price

* by one category
tempfile auto_r
preserve
collapse (sum) price-gear_ratio, by(rep78)
renvars price-gear_ratio, postfix(_r)
save `auto_r'
restore

* by two categories
tempfile auto_rf
preserve
collapse (sum) price-gear_ratio, by(rep78 foreign)
renvars price-gear_ratio, postfix(_rf)
save `auto_rf'
restore

* merge back
merge m:1 rep78 using `auto_r', generate(merge_r)
merge m:1 rep78 foreign using `auto_rf', generate(merge_rf) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-03T00:26:50.383

如果我正确理解这一点，则无需将聚合分为两个阶段。您只需要根据农场标识符汇总每种作物。

类似的情况是对美国各州县内人们的观察。如果你想要状态总数，你只需要 work `by(state)`。要看到这一点，假设您丢弃了县标识符。您没有丢弃任何您需要的信息。

在任何情况下，请注意旨在标记组中的一个且仅一个观察的功能`egen`。`tag()`

# python - 从函数列表中返回一个函数的python函数

> ID：13666161
> 
> 赞同：0
> 
> 时间：2012-12-02T03:33:28.030
> 
> 标签：python, function

我想做以下功能：

```
 1)input is a number. 
 2)functions are indexed, return a function whose index matches given number 
```

这是我想出的：

```
def foo_selector(whatfoo):
    def foo1():
        return
    def foo2():
        return
    def foo3():
        return
    ...

    def foo999():
        return

    #something like return foo[whatfoo] 
```

问题是，我怎样才能索引函数（foo#）？我可以通过 dir() 看到函数 foo1 到 foo999。但是， dir() 返回此类函数的名称，而不是函数本身。在示例中，那些 foo 函数没有做任何事情。但是在我的程序中，它们执行不同的任务，我无法自动生成它们。我自己写的，必须以他们的名字归还。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-02T05:01:10.123

使用装饰器来累积函数列表。

```
func_list = []

def listed_func(func):
    func_list.append(func)
    return func

@listed_func
def foo1():
   pass

@listed_func
def foo2():
   pass 
```

现在您可以通过列表中的索引轻松访问函数。

如果要按名称访问函数，还可以创建字典：

```
func_dict = {}

def collected_func(func):
    func_dict[func.__name__] = func
    return func 
```

或者从名称中提取索引，并将其用作 dict 键（由于 dicts 没有排序，如果您想以某种顺序迭代它们，则需要对键进行排序）：

```
func_dict = {}

def collected_func(func):
    key = int("".join(c for c in func.__name__ if c.isdigit()))
    func_dict[key] = func
    return func 
```

或者显式地将索引号传递给装饰器：

```
func_dict = {}

def collected_func(key):
    def decorator(func):
        func_dict[key] = func
        return func
    return decorator

@collected_func(12)
def foo():
    pass 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-02T03:40:58.210

您可以简单地将所有函数放入一个数组中，例如：

```
def foo_selector(whatfoo):
    def foo1():
        return
    def foo2():
        return
    def foo3():
        return
    ...

    def foo999():
        return

    foo_list = [
        foo1,
        foo2,
        ...
        foo999
    ]

    return foo_list[whatfoo] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-02T04:33:28.917

以下是您可以使用的其他几种方法：

`eval("foo{}()".format(whatfoo))`

或者

`locals()['foo{}'.format(whatfoo)]`

# php - 如何在zencart中通过（颜色+尺寸）定义不同的价格和折扣价？

> ID：13666162
> 
> 赞同：1
> 
> 时间：2012-12-02T03:33:57.283
> 
> 标签：php, mysql, zen-cart

如何在zencart中通过（颜色+尺寸）定义不同的价格和折扣价？
默认情况下，zencart 可以根据属性定义产品价格，例如 color 。
但我找不到如何用随机折扣价设置不同的属性。谁能告诉我该怎么做？

![在此处输入图像描述](../Images/37465046077e271116794058d96cde8c.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T15:54:07.950

由于您的问题相当模糊，我建议您从管理区域中的属性控制器开始。

[Zen Cart 属性控制器](http://www.zen-cart.com/wiki/index.php/Admin_-_Catalog_-_Attributes_Controller "ZenCart 属性控制器")

此区域允许您自由地为您的产品应用各种折扣定价和属性定价。

# mysql - MYSQL选择查询最常见的产品？

> ID：13666163
> 
> 赞同：5
> 
> 时间：2012-12-02T03:34:12.480
> 
> 标签：mysql, count, max

我需要帮助来了解如何仅显示每个分支最常见的产品。

这适用于数据库中的每个分支。

PS：这是在一张表中完成的（本次表演不需要其他表），只需要提到的两个属性。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T10:13:32.260

根据 Sean 的 DB 示例，我创建了查询，它可以完成这项工作，但是请注意，您在应用程序中的运行方式看起来很耗费资源。尝试考虑另一种方法来发现最常见的产品，而不是数据库查询。

```
SELECT 
    a.branch_id, `branch_product` , COUNT(branch_product) AS cnt , b.mx
FROM 
    branch_products a 
LEFT JOIN 
    (SELECT 
        branch_id, MAX(cnt) AS mx 
     FROM 
        (SELECT branch_id, COUNT(branch_product) AS cnt FROM branch_products GROUP BY branch_id, branch_product ) AS maxes 
     GROUP BY branch_id) b 
ON a.branch_id = b.branch_id
GROUP BY branch_id, branch_product
HAVING cnt=mx 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-02T05:51:45.813

将计数放在子查询中，按计数 DESC 排序，然后在该子查询之外按分支 ID 分组：

```
SELECT * FROM (
    SELECT *, count(branch_product) AS cou FROM branch_products
    GROUP BY branch_id, branch_product
    ORDER BY cou DESC
) AS ordbycou
GROUP BY branch_id 
```

产量：

```
+-----------+----------------+-----+
| branch_id | branch_product | cou |
+-----------+----------------+-----+
|         1 | trainers       |   3 |
|         2 | suit           |   2 |
|         3 | suit           |   1 |
+-----------+----------------+-----+
3 rows in set (0.00 sec) 
```

这是一个示例表，用于尝试上述查询：

```
SET SQL_MODE="NO_AUTO_VALUE_ON_ZERO";
CREATE TABLE IF NOT EXISTS `branch_products` (
  `branch_id` mediumint(8) unsigned NOT NULL,
  `branch_product` varchar(128) NOT NULL,
  KEY `branch_id` (`branch_id`),
  KEY `branch_product` (`branch_product`)
) ENGINE=MyISAM  DEFAULT CHARSET=latin1;
INSERT INTO `branch_products` (`branch_id`, `branch_product`) VALUES
(1, 'trainers'),
(1, 'trainers'),
(1, 'trainers'),
(1, 'tie'),
(1, 'tie'),
(1, 'suit'),
(2, 'suit'),
(2, 'suit'),
(2, 'tie'),
(3, 'suit'); 
```

# ruby-on-rails - 地图未显示（使用 gmaps4rails gem）

> ID：13666165
> 
> 赞同：0
> 
> 时间：2012-12-02T03:35:11.493
> 
> 标签：ruby-on-rails, google-maps, gmaps4rails

我正在使用 gmaps4rails gem 生成一张地图，其中包含我大学校园内的几个建筑位置。

但是，我似乎无法显示地图。出现了一个空框，仅此而已。

型号：（仅包括与 gmaps4rails 功能相关的行）

```
 acts_as_gmappable

  def gmaps4rails_address
    "#{self.name}, CA, Berkeley" 
  end 
```

看法：

```
<%= stylesheet_link_tag 'gmaps4rails' %>

<%= gmaps4rails(@json) %> 
```

控制器：

```
 def map
     @json = Hall.all.to_gmaps4rails
  end 
```

应用程序.js：

```
// This is a manifest file that'll be compiled into including all the files listed below.
// Add new JavaScript/Coffee code in separate files in this directory and they'll automatically
// be included in the compiled file accessible from http://example.com/assets/application.js
// It's not advisable to add code directly here, but if you do, it'll appear at the bottom of the
// the compiled file.
//
//= require ./gmaps4rails/googlemaps.js
//= require jquery
//= require jquery_ujs
//= require_tree . 
```

我也尝试包括`<%= stylesheet_link_tag 'gmaps4rails' %>`在视图中。没运气。

我当前的屏幕如下所示：http: [//i50.tinypic.com/2q1z7dw.jpg](http://i50.tinypic.com/2q1z7dw.jpg)

`@json`当我查看它时，它的内容似乎是正确的。地图只是因为某种原因没有显示出来。

在这里待了几个小时。我似乎无法弄清楚问题所在。查看了似乎与此问题相关的多个过去问题。

编辑：它可能是宝石的版本吗？我的是 1.5.6 我注意到有一个 2.0.0.pre ...不知道那是什么。

Edit2：呃......不知道如何检查。一种小疙瘩。我创建了一个 heroku 应用程序并尝试将我的代码推送到那里。`undefined local variable or method acts_as_gmappable for #<Class:0x00000002fd2c10>`当我尝试为数据库播种时，我现在得到了。想知道这是否与我的其他问题有关。

编辑3：我相信是的。我也浏览了很多帖子，似乎一切都正确。再说一次，也许我错过了一些东西......仍在调查它。开始让我发疯。

（哦，我也在使用 JQuery Mobile。我发现这个过去的问题[gmaps4rails on jQueryMobile don't work](https://stackoverflow.com/questions/7735054/gmaps4rails-on-jquerymobile-dont-work?rq=1)。我是把脚本放在 application.html.erb 还是 mobile.html.erb 中？另外，`<%= gmaps4rails(@json, false, false) %>`似乎没有工作。不会接受 3 个参数。

至于 的一部分`<div class="page" data-role="page" id="gmaps">`，我应该`<%= gmaps4rails(@json, false, false) %>`在这个 div 中插入吗？

# asp.net-mvc - if (Model.Objectives != null || Model.Objectives.ToString() ==" ") asp.net mvc

> ID：13666167
> 
> 赞同：1
> 
> 时间：2012-12-02T03:35:29.323
> 
> 标签：asp.net-mvc, asp.net-mvc-3, html, model

我的应用程序是 MVC 3，我通过检查我的数据库表中的值是否为空来隐藏 div。我正在使用 InnovaHtmlEditor 输入数据，当我删除文本时，InnovaHtmlEditor 会留`<br/>`在表格中。我如何检查是否只有`<br/>`？

我试过了：

```
(Model.Objectives != null || Model.Objectives.ToString() =="<br/>") 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T07:46:46.490

你原来的陈述似乎是错误的：

```
// if objectives is not null OR it is not null and is equal to <br/>
(Model.Objectives != null || Model.Objectives.ToString() =="<br/>") 
```

你不需要`Model.Objectives = "<br/>"`，它永远不会被调用，因为`"<br/>" != null`

```
// if objectives is not null
(Model.Objectives != null) 
```

我会假设你想要这样的东西：

```
// if objectives isn't null AND it is not <br/>
(Model.Objectives != null && Model.Objectives.ToString() =="<br/>") 
```

或者

```
// if objectives is null OR objectives is <br/>
(Model.Objectives == null || Model.Objectives.ToString() =="<br/>") 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-02T08:07:29.887

我为您的场景提供了**不同的解决**方案。

也就是说，**当您清除**文本框中的内容时，您**会将 null 发送到数据库**表列。

然后你只需要像下面这样检查。它非常简单优雅。

```
if (Model.Objectives == null)
{
   //Hide your div
} 
```

# c# - 在 .net 中通过 https / http 获取 FileAttributes

> ID：13666172
> 
> 赞同：2
> 
> 时间：2012-12-02T03:36:15.240
> 
> 标签：c#, asp.net, .net

System.IO.File.GetAttributes 方法仅对本地系统上的文件有效。在我的应用程序中，我试图通过 https:// 访问文件属性。请让我知道是否有任何此类/方法（在.net 中），以通过 http(s) 获取文件属性。

此外，如果有任何这样的 Windows CommandPrompt 命令来实现同样的效果，那就太好了。请让我知道。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T03:45:36.483

你不能。这将是巨大的安全违规。

但是，您可以编写一个返回您感兴趣的属性的 WCF 服务。

或者您可能对设置[WebDAV](http://www.iis.net/configreference/system.webserver/webdav/authoring/filesystem)共享感兴趣。

# hibernate - 使用休眠的外键插入对象

> ID：13666174
> 
> 赞同：0
> 
> 时间：2012-12-02T03:36:42.887
> 
> 标签：hibernate, insert, hibernate-mapping

我有 2 个对象：用户和汽车。

我正在尝试使用具有用户 ID 外键依赖性的休眠插入汽车对象。一辆车只有一个用户，所以我分配了一对一的关系。

我的汽车映射看起来像这样（我删除了 < 因为 xml 没有出现）：

```
id name="id" type="int">
    <column name="carId" />
    <generator class="assigned" />
</id>
<property name="carName" type="string"></property>
<one-to-one name="user" class="User"></one-to-one> 
```

我的用户映射只有一个 id 加上字段名等。

我的汽车对象如下所示：

```
 private int id;
 private String carName;
 private User user; 
```

我的汽车表有一个外键，即 userId。

当我尝试插入时出现 sql 错误：字段 'userId' 没有默认值

hibernate 正在做的 sql 是： Hibernate: insert into car (carId, carName) values (?, ?)

如您所见，userId 缺失并且是必填字段。

我需要插入一个基于 userId 的汽车对象以将其绑定到用户。我怎么能做到这一点，因为我的映射没有做到这一点。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T08:15:29.453

首先，汽车与一个用户相关联的事实并不一定是一对一的。如果一个人只能拥有一辆车，那将是真的。它一个人可以有几辆车，关联是多对一的。

其次，假设该关联确实是一对一的，以下[是文档](http://docs.jboss.org/hibernate/core/3.6/reference/en-US/html_single/#assoc-unidirectional-121)映射这种关联的方式：

> 外键上的单向一对一关联几乎是相同的。唯一的区别是列唯一约束。

```
<class name="Person">
    <id name="id" column="personId">
        <generator class="native"/>
    </id>
    <many-to-one name="address" 
        column="addressId" 
        unique="true"
        not-null="true"/>
</class> 
```

# iphone - 编辑模式下的自定义 UITableViewCell 不会移动我的 UILabel

> ID：13666185
> 
> 赞同：10
> 
> 时间：2012-12-02T03:40:12.877
> 
> 标签：iphone, ios, uitableview, edit, custom-cell

这让我很头疼:-)

`UITableView`我在a 中填充了一个功能齐全的 CoreData `UIViewController`，并且我已经成功实现了“滑动删除选项”（这很容易），我还可以使用出现红色圆圈的东西的编辑按钮删除单个实例。

我的问题是，我认为这是因为我有一个 CustomCell，当我按下编辑按钮时`UILabels`不要向右移动。

我已经尝试过使用`-(void)layoutSubViews`和其他一些，但没有任何效果。

我已经发布了我的代码`cellForRowAtIndexPath`。这是我的应用程序中注释部分的一部分。此代码有效，我只需要知道**当我进入编辑模式时如何移动标签？**

感谢您的提示和建议:-)

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
static NSString *cellIdentifier = @"Cell";

MNCustomCell *cell = [_mainTableView dequeueReusableCellWithIdentifier:cellIdentifier forIndexPath:indexPath];
if (cell == nil) {
    cell = [[MNCustomCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:cellIdentifier];
}

//cell.textLabel.text = [_tableArray objectAtIndex:indexPath.row];

MNotes *mnotes = [[self fetchedResultsController] objectAtIndexPath:indexPath];

cell.noteTitle.text = mnotes.noteTitleString;
cell.noteSummary.text = mnotes.mainNoteString;

mnotes.createDate = [[NSDate alloc] init];
SORelativeDateTransformer *relativeDateTransformer = [[SORelativeDateTransformer alloc] init];
NSString *relativeDate = [relativeDateTransformer transformedValue:mnotes.createDate];

cell.noteDate.text = relativeDate;

cell.accessoryType = UITableViewCellAccessoryDisclosureIndicator;

return cell;
} 
```

-

```
//This is the Custom Cell
@interface MNCustomCell : UITableViewCell
{

}

@property (strong, nonatomic) IBOutlet UILabel *noteTitle;
@property (strong, nonatomic) IBOutlet UILabel *noteDate;

@property (strong, nonatomic) IBOutlet UITextView *noteSummary;

@end 
```

-

```
- (id)initWithStyle:(UITableViewCellStyle)style reuseIdentifier:(NSString *)reuseIdentifier
  {
    self = [super initWithStyle:style reuseIdentifier:reuseIdentifier];
    if (self) {
    // Initialization code

    [self.contentView addSubview:_noteTitle];
    [self.contentView addSubview:_noteSummary];
    [self.contentView addSubview:_noteDate];

  }
   return self;
  } 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-02T07:11:08.193

其他解决方案可能会起作用，但这种方式会自动为您制作动画。 `MNCustomCell`不会根据单元格的当前状态重新布局视图，但是如果将标签添加到单元格的 contentView 中，它将。

以下示例将移动标签，使其不会干扰删除按钮。

`MNCustomCell.m`

```
- (id)initWithStyle:(UITableViewCellStyle)style reuseIdentifier:(NSString *)reuseIdentifier {
    self = [super initWithStyle:style reuseIdentifier:reuseIdentifier];
    if (self) {
        mainLabel = [[[UILabel alloc] initWithFrame:CGRectMake(0.0, 0.0, 220.0, 15.0)]];
        mainLabel.autoresizingMask = UIViewAutoresizingFlexibleLeftMargin | UIViewAutoresizingFlexibleHeight;
        [cell.contentView addSubview:mainLabel]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-02T04:04:06.440

在您的自定义单元类中实现以下方法。

```
- (void)willTransitionToState:(UITableViewCellStateMask)state 
```

和

```
- (void)didTransitionToState:(UITableViewCellStateMask)state 
```

并相应地移动您的标签。

它应该像

```
- (void)willTransitionToState:(UITableViewCellStateMask)state {

    [super willTransitionToState:state];

    if ((state & UITableViewCellStateShowingDeleteConfirmationMask) == UITableViewCellStateShowingDeleteConfirmationMask) {
       label.frame = ...
    }
} 
```

**编辑：**

```
- (void)willTransitionToState:(UITableViewCellStateMask)state {

    [super willTransitionToState:state];

//    label.hidden = YES;
//    label.alpha = 0.0;
}

- (void)didTransitionToState:(UITableViewCellStateMask)state {

    [super didTransitionToState:state];

    if (state == UITableViewCellStateShowingDeleteConfirmationMask) {

        [UIView beginAnimations:@"anim" context:nil];
        label.frame = leftFrame;
        [UIView commitAnimations];
    } else if (state == UITableViewCellStateDefaultMask) {

        [UIView beginAnimations:@"anim" context:nil];
        label.frame = rightFrame;
        [UIView commitAnimations];
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-07-03T00:48:53.230

它是一个 hack，但唯一对我有用的是放入一个隐藏的图像并将我的标签限制在它上面。

例如：

我在 UITableViewCell 中有一个 UILabel，当我在屏幕上和屏幕上为我的表格设置动画时，它没有随单元格移动。但其他单元格工作得很好。我什么都试过了。

我最终将图像放在标签的左侧（就像其他单元格一样），并将标签的约束添加到固定宽度的图像，并将图像左侧的约束添加到容器。

这解决了我的问题，现在标签与单元格一起动画。

我不确定标签的 jenky 布局是怎样的，但我尝试了所有的内容模式，并在设置中玩了两个多小时，但没有其他任何效果。

# c++ - 为什么在 SDL 和 OpenGL 中使用 IMG_Load 加载到纹理的图像看起来偏蓝？

> ID：13666196
> 
> 赞同：4
> 
> 时间：2012-12-02T03:41:35.767
> 
> 标签：c++, opengl, sdl, photoshop, sdl-image

我正在加载一个PNG纹理：

```
void Sprite::setTexture(string f) {
    SDL_Surface *image = IMG_Load(f.c_str());
    if (image == NULL) {
        this->texture = -1;
        return;
    }
    SDL_DisplayFormatAlpha(image);
    unsigned object(0);
    glGenTextures(1, &object);
    glBindTexture(GL_TEXTURE_2D, object);
    glTexParameterf(GL_TEXTURE_2D,GL_TEXTURE_MIN_FILTER, GL_LINEAR);
    glTexParameterf(GL_TEXTURE_2D,GL_TEXTURE_MAG_FILTER, GL_LINEAR);
    glTexParameterf(GL_TEXTURE_2D,GL_TEXTURE_WRAP_S,GL_CLAMP_TO_EDGE);
    glTexParameterf(GL_TEXTURE_2D,GL_TEXTURE_WRAP_T,GL_CLAMP_TO_EDGE);
    glTexImage2D(GL_TEXTURE_2D, 0, GL_RGBA, image->w, image->h, 0, GL_RGBA, GL_UNSIGNED_BYTE, image->pixels);
    SDL_FreeSurface(image);
    this->texture = object;
} 
```

唯一的问题是，而不是像这样（在 Photoshop 中看到）：

![原盒](../Images/f8c648b7e9fadd6004455f2c2c6a0d29.png)

它是这样显示的（在应用程序中看到）：

怎么了？我尝试过使用 GL_RGBA 并尝试将其反转为 GL_BGRA 或将其更改为 GL_RGBA8、GL_RGBA16 ......但没有任何改变（实际上 GL_BGRA 没有显示任何内容）。我需要 alpha 通道，即使在这个小 PNG 中，边框的半径为 4px，因此图像角度是透明的。

我究竟做错了什么？ ![应用程序框](../Images/034ba05ed2ad3cc457abf369aad68e12.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-02T03:46:14.083

看起来您的频道肯定是倒置的。从这里很难看出你的 alpha 是否正常工作，但有些纹理是`ARGB`，也许你应该尝试一下！

实际上，只是为了验证您的数据，您应该检查您的

```
SDL_Surface *image 
```

看看什么是`image->format->Rmask` `Gmask` `Bmask`和`Amask`，这样你就可以确定你的表面有什么格式。

# java - 如何在netbeans中将一个java文件导入另一个java文件

> ID：13666198
> 
> 赞同：1
> 
> 时间：2012-12-02T03:41:55.527
> 
> 标签：java, class, import

我正在使用 2 个 .java 文件，一个是可执行文件，另一个是自定义类。

我知道在编译过程中，自定义类将自动导入，因为它位于我机器上的同一文件夹中。但是，我使用的是 NetBeans，如果我不“假装”将它导入 NetBeans，那么当我键入类对象时，它总是会出现红线指示错误。有没有办法将类 .java 文件“导入”到 NetBeans 中？

我是java中的菜鸟，所以我不知道如何提出这样的问题，如果我使用的词汇不合适，我很抱歉。非常感谢你！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T03:43:45.773

如果您在同一位置有两个 .class 文件，Java 总是会找到第二个。例如，同一位置可能是您计算机上的文件夹、Web 服务器上的目录或 .jar 文件内。只要 Java 能找到其中一个，它就会找到另一个。

网上有很多关于 Java 包和 Java 类路径的教程。当您开始编写更大的程序时，理解这些概念很重要。一个很好的起点是[Java Tutorial on Packages](http://docs.oracle.com/javase/tutorial/java/package/index.html)。

# c# - 使用 PLINQ 计算阶乘的递归函数

> ID：13666199
> 
> 赞同：2
> 
> 时间：2012-12-02T03:41:59.727
> 
> 标签：c#, recursion, parallel-processing, task-parallel-library

**注意**我很清楚我在问什么，我不可能在正常情况下需要使用这样的函数，但它被用作因子实验研究生项目的研究因素进行。

我有以下要使用 PLINQ（不是 TPL）运行的函数。我知道 PLINQ 运行在 TPL 之上，但是这部分的实验。此外，除非我不知道使用 PLINQ 的另一种方法，否则我相信我将不得不在某种程度上“破解”阶乘方法以使用带有递归的 for 循环。

由于 Parallel 类只提供 For、ForEach 和 Invoke，它没有提供我需要的东西，比如 TPL 做什么，我需要它返回，而 Invoke 不这样做，所以我将不得不使用 For 并做一个 for 循环每个递归调用从 0,1 开始（是的，我知道这看起来很荒谬）。

我想做如下的事情：

```
public ulong RecursivePLINQ(ulong factor)
    {
        if (factor > 1)
        {
            Parallel.For<ulong>(0, 1, () => factor, (j, loop, factorial) =>
            {
                Thread.Sleep(1);    /*Simulate Moderate Operation*/
                return factorial * RecursivePLINQ(--factorial);
            }, (i) => { });
        }

        return 1;

    } 
```

目前，发生的事情是它似乎正在工作，但在最终调用它返回 1，递归调用的结果是 1，而不是递归更改的值。我似乎无法发现有什么问题。我有此处显示的备用 TPL 实现（再次用于研究），它正在工作。

```
public ulong RecursiveTPL(ulong factor)
    {
        if (factor > 1)
        {
            Task<ulong> task = new Task<ulong>((f) =>
            {
                Thread.Sleep(1);    /*Simulate Moderate Operation*/
                ulong val = (ulong)f;
                return factor * RecursiveTPL(--val);
            }, factor);
            task.Start();
            task.Wait();
            return task.Result;
        }
            return 1;

    } 
```

**********再次请不要因为我的要求而抨击我，这是为了一个非常具体的研究目的****** ********

 ****编辑**我在 MSDN 文档上看到了一个示例，该示例显示了线程局部变量的使用，所以我尝试了类似的方法，但我的头开始有点旋转......不要注意铸造，它只是看看我是否可以让它工作...

```
public ulong RecursivePLINQ(ulong factor)
    {
        long total = 0;
        if (factor > 1)
        {
            Parallel.For<ulong>(0, 1, () => factor, (j, loop, factorial) =>
            {
                Thread.Sleep(1);    /*Simulate Moderate Operation*/
                return factorial * RecursivePLINQ(--factorial);
            }, (i) =>  Interlocked.Add(ref total,(long)i)
            );
        }

        return (ulong)total;

    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-02T04:36:55.327

它不漂亮，我真的不确定这是否对我的目的有效，但它确实给了我正确的阶乘。我得到了这个解决方案，但我必须对总参数进行校正才能使其工作，不知道我会怎么称呼它，或者是否有更好的方法来做到这一点，但现在必须这样做。 ..

```
public long RecursivePLINQ(long factor,long total)
    {

        if(total == 0)
        {
            total = 1;
        }
        if (factor > 1)
        {
            Parallel.For<long>(0, 1, () => factor, (j, loop, factorial) =>
            {
                Thread.Sleep(1);    /*Simulate Moderate Operation*/
                total = factorial * RecursivePLINQ(--factorial, total);
                return total;
            }, (i) =>  {return;});
        }
        return total;
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T14:25:33.460

无耻地抄袭[Dobbs 博士的这篇文章](http://m.drdobbs.com/144542/show/256b68f11c537d7fd2165a5070875f6c&t=fa3fhgs8bptp9ccd40qdlgsl03)，您可以使用聚合扩展方法来计算阶乘：

```
int value=5; 
var factorial=Enumerable.Range(1, value).AsParallel()
             .Aggregate(1, (result, number)=>      
                           result*number, result=>result); 
```

您可以争辩说 Aggregate 执行您将手动执行的递归，或者您可以编写递归调用自身来计算阶乘的代码。

不过，和其他人一样，我看不到你会完成什么。您的代码将由 PLINQ 的设置和拆卸主导，您获得的任何数字都将毫无意义。

如果有的话，PLINQ 用于用一系列可以并行执行的运算符替换循环代码，而程序员不必指定如何发生。**

# python - 使用 matplotlib 在半对数图上绘制直线

> ID：13666206
> 
> 赞同：1
> 
> 时间：2012-12-02T03:43:51.280
> 
> 标签：python, matplotlib

![在此处输入图像描述](../Images/030b1f4e385a0760025e20a7812053f0.png)

严格来说，这不是一个符号学情节。我用这段代码得到一个对数`y-axis`：

```
pyplot.gca().set_yscale('log') 
```

编辑：好吧，也许我把它弄得太傻了。我需要从 x 轴以 45 度角绘制直线。类似于图像中的线，但实际上是直的并且呈 45 度角。我还需要仅根据其 y 值来移动任何 x 值。

以 45 度角为已知 y 值和未知 x 值绘制直线的公式是什么？（也许数学论坛更合适？）

我的教育水平很低，所以前几天我不得不自学对数是什么，因为我从来没有在学校学过。所以我无法自己找到一种绘制直线的方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T02:13:48.977

好吧，就用我目前所知道的来回答这个问题。

为了在半对数上绘制直线，有两种主要方法。如果您有一个 x 值列表并且想要获得将绘制一条直线的相应 y 值，那么您只需调用`numpy.exp()`每个 x 值。

```
import matplotlib.pyplot as plt
import numpy as np

plt.gca().set_yscale('log')

x = np.arange(0, 51, 10)
y = np.exp(x)

plt.plot(x, y, 'k-')
plt.show() 
```

这里有一些证据。

![在此处输入图像描述](../Images/eb568fa82b4158254835c5f8f055f29a.png)

如果要绘制一条具有已知 y 值和未知 x 值的直线，则相反。

```
import matplotlib.pyplot as plt
import numpy as np

plt.gca().set_yscale('log')

y = np.arange(0, 1001, 100)
x = np.log(y)

plt.plot(x, y, 'k-')
plt.show() 
```

这里有更多证据。

![在此处输入图像描述](../Images/cc6302abaeb862264ad1f22fe2a1f7d9.png)

现在，在 skew-t 的背景下，还有更多工作要做。生成 skew-t 时，您需要同时使用已知的 y 值和已知的 x 值。这是一个示例函数，它采用温度（x 值）和水平（y 值）并返回适当倾斜的 x 值。

```
def get_skewed_x(level, temp):
    base_log = (-30 * np.log(1000))
    top_log = (-30 * np.log(level))
    diff = base_log - temp
    x = top_log - diff
    return x 
```

该函数接受应绘制数据的水平和温度值。

这个函数看起来相当复杂，但那是因为当你通过在 y 值上调用 np.log() 在半对数上创建一条直线时，x 值将远离它需要的位置。因此，您需要找到值实际在哪里与应该在哪里之间的差异。无论您在哪个级别绘制数据，您都知道应该在最低级别绘制数据的位置，因此您必须先找到最低级别的差异，然后再将其应用到较高级别。

一旦您知道“偏移量”，您只需补偿所有倾斜 x 值的差异。这些值乘以 -30 的原因是特定于应用程序的。此数字需要根据绘图的 y 限制和 x 限制进行更改。

中的“1000”`np.log(1000)`也可能需要根据情节进行更改。这应该是 skew-t 图上的最低水平（最高 y 值）。

关键是，如果你知道数据应该绘制在什么温度上，以及你想绘制数据的水平，这个函数将正确地扭曲值（当然，当 -30 为你的特定绘图调整时）。

为了查看函数的实际作用，下面是在 500 级绘制温度为 10 的数据点的样子。

```
get_skewed_x(500, 10) 
```

蓝点显示将绘制数据点的位置。

可能有一个更优雅的解决方案，但这是我现在最好的。

![在此处输入图像描述](../Images/8bef1fc7c94b58a8cf7e046759b5889d.png)

# xml - 我的 XML 输出不是我想要的

> ID：13666210
> 
> 赞同：0
> 
> 时间：2012-12-02T03:44:21.023
> 
> 标签：xml

附上两个屏幕截图和我的代码。我正在尝试将 animation_sequence 作为结束和结束括号，我已尽力而为，但现在我寻求您的帮助。这是我的尝试，我决定这样做，但现在我的状态，如“Yahoo”中显示为“Yahoo”，我知道它可能与动画序列的 setTextContent （虽然我不明白怎么能在我的状态内容中添加空格.我的问题是我想要的只是我的动画序列有右括号和结尾括号.我通过在 if 语句中寻找两个额外的空格来解决,但我觉得这是一种可悲的方法,而且它有点像接受失败。我附加的第二个图像是我希望实现的，而不是在我的状态中添加额外的“”。如果没有我下面的代码（具体的设置文本内容部分），它会生成图像。就在我以为我解决了它时，这两个空间正在杀死我。如果您需要任何额外的代码，请告诉我。我需要你的帮助。

```
Element animationState = testDoc.createElement("animation_state");
        Element sequence = testDoc.createElement("animation_sequence");
        sequence.setTextContent(" ");
        sequence.appendChild(testDoc.createTextNode(" "));
testDoc.getElementsByTagName("animations_list").item(0).appendChild(animationState).appendChild(state);
        testDoc.getElementsByTagName("animation_state").item(testDoc.getElementsByTagName("state").getLength() - 1).appendChild(sequence);

   for(int i = 0; i<testDoc.getElementsByTagName("animation_state").getLength(); i++)
   {
       if(  testDoc.getElementsByTagName("animation_state").item(i).getTextContent().
            equals(Poseur.getPoseur().getAnimatedSpriteViewer().getSpriteStateComboBox().
            getSelectedItem().toString())||(testDoc.getElementsByTagName("animation_state").item(i).getTextContent()).equals(Poseur.getPoseur().getAnimatedSpriteViewer().getSpriteStateComboBox().getSelectedItem().toString()+"  "))
       {
           testDoc.getElementsByTagName("animation_sequence").item(i).appendChild(poseImage);
       }
   } 
```

![不好](../Images/46e5f5f121cc465da3e0475e55da4e8c.png) ![好的](../Images/7c0f83c26bbd8a8f5289444a5399cae8.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T03:57:48.650

在您创建`animation_sequence`节点时，在 Java 中它出现，您正在使用抽象树结构。此时，没有打开或关闭标签之类的东西，只有节点。

“标签”（打开和关闭）的存在完全是 XML 文档*序列化*的一个方面，即如何将其转换为文本形式以供输出。就标准而言，序列化`<animation_sequence/>`与 没有区别`<animation_sequence></animation_sequence>`，因此允许序列化程序编写任何一个。

**一些**`/`序列化程序将允许您以简写形式（尾随）或作为开始/结束标记对指定您希望如何写出空节点。您将需要研究您的特定 XML 库并确定序列化程序是否提供这样的选项。

# java - Java - MouseWheelEvent 触发两次

> ID：13666211
> 
> 赞同：3
> 
> 时间：2012-12-02T03:44:32.903
> 
> 标签：java, swing, jframe

我正在开发一个swing JFrame，该程序的一项功能涉及使用鼠标的滚轮在窗口中缩放图像。我已经实现了一个 MouseAdapter，它被添加为 JFrame 本身的 MouseWheelListener。

```
/**
 * Handles scroll wheel activity.
 */
private MouseAdapter wheelListener = new MouseAdapter() {
    @Override
    public void mouseWheelMoved(MouseWheelEvent e) {
        int notches = e.getWheelRotation();
        System.out.println(notches);
        while (notches > 0) {
            controller.zoomIn();
            notches--;
        }
        while (notches < 0) {
            controller.zoomOut();
            notches++;
        }
    }
}; 
```

在 JFrame 构造函数中：

```
public MainFrame() {
    ...
    addMouseWheelListener(wheelListener);
    ...
} 
```

我遇到的问题是，滚动滚轮时，每次“点击”事件都会触发两次。我找不到有类似问题的人。

我尝试`if(e.getScrollType() == MouseWheelEvent.WHEEL_UNIT_SCROLL) { ... }`使用该`mouseWheelMoved`方法来查看是否发生了两种不同类型的事件，但它们都是`WHEEL_UNIT_SCROLL's`.

我还尝试打印出事件的源以查看它是否来自不同的窗口/窗格，但它们都来自我的主 JFrame 窗口。

有谁知道，或者可以发现，为什么我应该得到两个事件，而我应该得到一个？

编辑：在添加轮侦听器部分放错行，对不起。编辑：经过一些测试，我能够用来`.hashCode()`验证有两个独特的`MouseWheelEvents`. 我怀疑 MouseAdapter 以某种方式被添加了两次。我将它添加到 MainFrame 的构造函数中，并验证它只在那里发生一次。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-12-03T22:49:48.273

添加一个 e.consume() 可以解决这个问题。

```
private MouseAdapter wheelListener = new MouseAdapter() {
    @Override
    public void mouseWheelMoved(MouseWheelEvent e) {
        e.consume() // avoid the event to be triggred twice
        int notches = e.getWheelRotation();
        System.out.println(notches);
        while (notches > 0) {
            controller.zoomIn();
            notches--;
        }
        while (notches < 0) {
            controller.zoomOut();
            notches++;
        }
    }
}; 
```

# u2netdk - 如何使用 U2 Toolkit for .NET 的加载项和 Visual Studio 2010 数据集设计器创建数据集？

> ID：13666214
> 
> 赞同：0
> 
> 时间：2012-12-02T03:44:57.373
> 
> 标签：u2netdk

我想使用 U2NETDK 的功能“U2 Database Add-ins for Visual Studio”来创建一个 DataSet 并在不同的 .NET 应用程序中使用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T04:22:17.527

我想自己回答这个问题。

下载并安装 U2NETDK v1.2.0 BETA

![图。1](../Images/d1fa338b542b520447a93a65a8c10a60.png)

使用VS2010确认安装->帮助->关于

![在此处输入图像描述](../Images/9ca250e58b62dd0e0a118494912d96b2.png)

使用控制面板->程序功能确认安装

![在此处输入图像描述](../Images/d42caa7060e6a2be9286cbecb3fa4dad.png)

启动 Visual Studio 2010。转到查看->服务器资源管理器->添加连接。转到“更改数据源”对话框。选择“U2 数据库”</p>

![在此处输入图像描述](../Images/fcb3faf083a15e296c575b06c2246e45.png)

填写连接字符串。测试连接。选择“确定”</p>

![在此处输入图像描述](../Images/e9561b06be3055dbaa98df99b786c17c.png)

U2 连接将添加到服务器探索中

![在此处输入图像描述](../Images/c73ba92542457fc5cca3b8198fcc8166.png)

打开 VS2010 WinForm 应用程序。右键单击解决方案资源管理器并添加新项目。

![在此处输入图像描述](../Images/66783f73becf75d64f32b591be8f6b5d.png)

选择数据->数据集。给出一个名称，例如“Members_DataSet”。将创建一个空的数据集设计器 ![在此处输入图像描述](../Images/be74f982fe1db4e69c6dac434a6e106d.png)

现在将“成员表”从服务器资源管理器拖放到数据集设计器中。它创建一个 DataTable 和 TableAdapter。它生成代码。表适配器包含 CRUD 语句（选择、插入、更新和删除） ![在此处输入图像描述](../Images/f83d9e60b04b8cb5612fb37aec46f160.png)

您可以预览数据

![在此处输入图像描述](../Images/58c08cefb2ca0595219c7030754a5416.png)

选择“预览数据”</p>

![在此处输入图像描述](../Images/d1a80a5b1f344b059a8a25c1c88b6d58.png)

转到数据->显示数据源 ![在此处输入图像描述](../Images/714ada281182c62e838cabac2acc67db.png)

您将在数据源窗口中看到生成的“成员数据集”。您可以将“成员数据集”拖放到 WinForm 中

![在此处输入图像描述](../Images/bf9e2bf051b59cad3fa88a5967e7445f.png)

运行 WinFrom 应用程序 ![在此处输入图像描述](../Images/286ecee21fc436b14ab04027a92694a9.png)

# android - Android：如何使 ListView 中的项目可点击

> ID：13666217
> 
> 赞同：0
> 
> 时间：2012-12-02T03:45:37.873
> 
> 标签：android, eclipse, listview, button, clickable

我目前正在尝试制作一个 ListView 列表，以便将联系人加载到上述列表中。但是，联系人条目不可单击。我尝试在身份不明的网站中使用解决方案；我可能做错了什么。

### 联系人管理器.java

```
package com.example.android.contactmanager;

import android.app.Activity;
import android.content.Intent;
import android.database.Cursor;
import android.net.Uri;
import android.os.Bundle;
import android.provider.ContactsContract;
import android.util.Log;
import android.view.View;
import android.widget.AdapterView;
import android.widget.AdapterView.OnItemClickListener;
import android.widget.ArrayAdapter;
import android.widget.Button;
import android.widget.CheckBox;
import android.widget.CompoundButton;
import android.widget.CompoundButton.OnCheckedChangeListener;
import android.widget.ListView;
import android.widget.SimpleCursorAdapter;

public final class ContactManager extends Activity implements OnItemClickListener
{

    public static final String TAG = "ContactManager";

    private Button mAddAccountButton;
    private ListView mContactList;
    private boolean mShowInvisible;
    //public BooleanObservable ShowInvisible = new BooleanObservable(false);
    private CheckBox mShowInvisibleControl;

    /**
     * Called when the activity is first created. Responsible for initializing the UI.
     */

    @Override
    public void onCreate(Bundle savedInstanceState)
    {

         mContactList = (ListView) findViewById(R.id.contactList);
         mContactList.setOnItemClickListener(this);

        Log.v(TAG, "Activity State: onCreate()");
        super.onCreate(savedInstanceState);
        setContentView(R.layout.contact_manager);

        // Obtain handles to UI objects
        mAddAccountButton = (Button) findViewById(R.id.addContactButton);
        mContactList = (ListView) findViewById(R.id.contactList);
        mShowInvisibleControl = (CheckBox) findViewById(R.id.showInvisible);

        // Initialise class properties
        mShowInvisible = false;
        mShowInvisibleControl.setChecked(mShowInvisible);

        // Register handler for UI elements
        mAddAccountButton.setOnClickListener(new View.OnClickListener() {
            public void onClick(View v) {
                Log.d(TAG, "mAddAccountButton clicked");
                launchContactAdder();
            }
        });
        mShowInvisibleControl.setOnCheckedChangeListener(new OnCheckedChangeListener()
        {
            public void onCheckedChanged(CompoundButton buttonView, boolean isChecked) 
            {
                Log.d(TAG, "mShowInvisibleControl changed: " + isChecked);
                mShowInvisible = isChecked;
                populateContactList();
            }
        })

        ;

        // Populate the contact list
        populateContactList();
    }

    /**
     * Populate the contact list based on account currently selected in the account spinner.
     */
    private void populateContactList() {
        // Build adapter with contact entries
        Cursor cursor = getContacts();
        String[] fields = new String[] {
                ContactsContract.Data.DISPLAY_NAME
        };
        SimpleCursorAdapter adapter = new SimpleCursorAdapter(this, R.layout.contact_entry, cursor,
                fields, new int[] {R.id.contactEntryText});
        mContactList.setAdapter(adapter);
    }

    /**
     * Obtains the contact list for the currently selected account.
     *
     * @return A cursor for for accessing the contact list.
     */
    private Cursor getContacts()
    {
        // Run query
        Uri uri = ContactsContract.Contacts.CONTENT_URI;
        String[] projection = new String[] {
                ContactsContract.Contacts._ID,
                ContactsContract.Contacts.DISPLAY_NAME
        };
        String selection = ContactsContract.Contacts.IN_VISIBLE_GROUP + " = '" + (mShowInvisible ? "0" : "1") + "'";
        //String selection = ContactsContract.Contacts.IN_VISIBLE_GROUP + " = '" + (mShowInvisible.get() ? "0" : "1") + "'";
        String[] selectionArgs = null;
        String sortOrder = ContactsContract.Contacts.DISPLAY_NAME + " COLLATE LOCALIZED ASC";

        return this.managedQuery(uri, projection, selection, selectionArgs, sortOrder);
    }

    /**
     * Launches the ContactAdder activity to add a new contact to the selected account.
     */
    protected void launchContactAdder()
    {
        Intent i = new Intent(this, ContactAdder.class);
        startActivity(i);
    }

    public void onItemClick(AdapterView<?> l, View v, int position, long id) {
        Log.i("TAG", "You clicked item " + id + " at position " + position);
        // Here you start the intent to show the contact details
    }

} 
```

### 联系人入口.xml

```
<?xml version="1.0" encoding="utf-8"?>
<!-- Copyright (C) 2009 The Android Open Source Project

     Licensed under the Apache License, Version 2.0 (the "License");
     you may not use this file except in compliance with the License.
     You may obtain a copy of the License at

          http://www.apache.org/licenses/LICENSE-2.0

     Unless required by applicable law or agreed to in writing, software
     distributed under the License is distributed on an "AS IS" BASIS,
     WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     See the License for the specific language governing permissions and
     limitations under the License.
-->

<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
              android:layout_width="wrap_content"
              android:layout_height="wrap_content">
    <TextView android:text="@+id/contactEntryText"
              android:id="@+id/contactEntryText"
              android:layout_width="fill_parent"
              android:textSize="30sp"
              android:layout_height="wrap_content"/>
</LinearLayout> 
```

上述代码没有按我希望的那样运行。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-02T03:53:29.657

您可以通过实现`OnItemClickListener`并处理方法中的点击来做到这一点`onItemClick`。您还需要告诉您的 mContactList 使用侦听器（谢谢 Sam）：

```
public final class ContactManager extends Activity implements OnItemClickListener {

   @Override
   public void onCreate(Bundle savedInstanceState) {
       [...]
       mContactList = (ListView) findViewById(R.id.contactList);
       mContactList.setOnItemClickListener(this);
       [...]

    public void onItemClick(AdapterView<?> l, View v, int position, long id) {
        Log.i("TAG", "You clicked item " + id + " at position " + position);
        // Here you start the intent to show the contact details
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-02T03:57:55.323

您必须为列表视图“mContactList”设置 OnItemClickListener，您可以使用意图将他导航到下一个活动。希望这对您有所帮助。

您可以查看本教程[http://www.androidhive.info/2011/10/android-listview-tutorial/](http://www.androidhive.info/2011/10/android-listview-tutorial/)

# java - 在 Google Refine 中解析部分字符串 - 错误消息

> ID：13666219
> 
> 赞同：2
> 
> 时间：2012-12-02T03:45:51.087
> 
> 标签：java, regex, google-refine

我正在使用 Google Refine 清理数据集。我有一列日期为 mm/dd/yyyy 格式。我想创建一个新列，其中 mm/dd/yyyy 仅替换为 yyyy。

我努力了

```
value.replace(/.+(\d\d\d\d)\*/, /$1/) 
```

出现的是

> 错误：替换需要 3 个字符串，或 1 个字符串、1 个正则表达式和 1 个字符串

为什么会出现这个错误？感谢您帮助初学者！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T13:41:43.323

如果这些值只是该常规格式的日期，那么简单的解决方案是：

```
value.split('/')[2] 
```

如果您需要从长字符串的中间取出日期，或者只是想弄乱正则表达式:-)，那么您可以使用

```
value.replace(/([1-9]|0[1-9]|[12][0-9]|3[01])\D([1-9]|0[1-9]|1[012])\D(19[0-9][0-9]|20[0-9][0-9])/, "$3") 
```

顺便说一句，网络上有很多罐装的正则表达式，您可以搜索而不是自己重新创建它们，这就是我在这里所做的。我不会在那么复杂/具体的地方做到这一点。您应该根据自己的需要进行调整，具体取决于您希望匹配的严格/自由程度。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-02T04:05:16.280

我无法重现该问题，但您的正则表达式不正确，试试这个

```
System.out.println("01/01/2012".replaceAll("(\\d+/){2}(.+)", "$2")); 
```

请注意，String.replace() 不适用于正则表达式。请改用 String.replaceAll() 或 String.replaceFirst()。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-02T04:33:44.987

See the comma in your replace, the method over-loadings for that class expect either 3 strings or 1 string meaning no comma or two commas separating arguments to .replace() method.

# sms - 如何在 GAMMU 中更改短信发件人号码？

> ID：13666221
> 
> 赞同：1
> 
> 时间：2012-12-02T03:46:09.170
> 
> 标签：sms, gammu

我想问一下。我需要在 Gammu 中更改 SMS 发件人号码

[http://wammu.eu/gammu/](http://wammu.eu/gammu/)

可能吗？如果是，如何？

感谢您的任何建议。

我通过 wavecom fastrack GSM 调制解调器发送。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-25T08:20:53.980

不，不可能，“它是由 SMSC 填写的” [http://permalink.gmane.org/gmane.linux.drivers.gammu/3617](http://permalink.gmane.org/gmane.linux.drivers.gammu/3617)

# iphone - 在编辑模式下更新单元格的附件

> ID：13666224
> 
> 赞同：4
> 
> 时间：2012-12-02T03:46:24.800
> 
> 标签：iphone, ios, cocoa-touch, uitableview

我有一个相当普通的分组`UITableView`，允许用户选择一个部门。当他们选择一行时，我更新附件视图以在新行上显示复选标记并将其从前一行中删除。

我还允许编辑表格视图。在编辑模式下，复选标记是隐藏的，这很好。但是，如果用户删除了当前选择（选中）部门的行，我需要以编程方式移动复选标记。

我尝试使用与使用新部门时添加和删除复选标记相同的方法：

```
- (void)deleteDepartmentAtIndex:(NSInteger)index
{
    //if the current item is using the deleted department, move the checkmark
    Department *dept = [self.departments objectAtIndex:index];
    if (self.item.department == dept)
    {
        UITableViewCell *noneCell = [self.tableView cellForRowAtIndexPath:[NSIndexPath indexPathForItem:self.departments.count inSection:0]];
        noneCell.accessoryType = UITableViewCellAccessoryCheckmark;
        [self.tableView reloadRowsAtIndexPaths:@[[NSIndexPath indexPathForItem:self.departments.count inSection:0]] withRowAnimation:UITableViewRowAnimationAutomatic];
    }

    //delete the department and save
    [dept.managedObjectContext deleteObject:dept];

    //delete the row
    [self.tableView deleteRowsAtIndexPaths:@[[NSIndexPath indexPathForItem:index inSection:0]] withRowAnimation:UITableViewRowAnimationFade];
} 
```

但是当表格视图存在编辑模式时，没有行有复选标记附件。我什至尝试在仍处于编辑模式时手动重新加载行（如上面的代码所示）。

当表格视图退出编辑模式时，如何确保刷新行的附件？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-02T03:58:00.277

您应该`accessoryType`用于非编辑模式并`editingAccessoryType`用于编辑模式。这样，您不必清除复选标记或恢复复选标记进入和退出编辑模式。设置`editingAccessoryType`为`UITableViewCellAccessoryNone`。

当然，您需要确保`cellForRowAtIndexPath:`始终`accessoryType`为每一行设置正确的值。

编辑：

覆盖`setEditing:animated:`将允许您在离开编辑模式时重新加载选中的行（如果可见）。

# http - 我如何正确地告诉客户它没有被授权并显示一个登录页面？

> ID：13666229
> 
> 赞同：0
> 
> 时间：2012-12-02T03:47:09.930
> 
> 标签：http, authentication, http-status-code-403

所以，我有一个自定义身份验证系统（我知道我在做什么）。但是，当用户尝试访问安全页面时，我得到了我认为不正确的响应模式。

基本上，我的设想是这样的：

1.  用户访问`/securepage`
2.  403 响应与以某种方式显示登录屏幕一起发回

目前正在发生的事情是这样的：

1.  302重定向从`/securepage`到`/login`
2.  发送 200 OK 响应`/login`

处理这个问题的正确方法是什么？到目前为止我的想法：

*   302重定向到登录，然后登录回复403
*   服务器端传输到登录的 403 错误代码（虽然这增加了很多复杂性）
*   它是正确的，因为它是

处理这个问题的正确方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-02T03:58:43.763

它是正确的。

403的意思是“禁止”。

如果有的话，您将使用 401“未经授权”，但这要求您还以质询作为回应，而您并没有这样做。

由于您实际上显示的是登录页面，因此重定向后跟带有 200 的登录页面是正确的行为。

# c# - 一系列 xy 坐标中的最短距离

> ID：13666230
> 
> 赞同：4
> 
> 时间：2012-12-02T03:47:35.717
> 
> 标签：c#, algorithm, brute-force, divide-and-conquer

我有一个任务，它比较了一个问题的 2 种不同算法。这是问题所在：

假设我有一系列这样的 xy 坐标：

A(2,3)、B(5,6)、C(7,8)、D(6,2)、E(5,5)等。

我想找到它们之间距离最短的2个坐标。一种解决方案是使用蛮力（一一匹配），但还有另一种使用“分而治之”方法的解决方案。

你能帮我用“分而治之”的方法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-02T04:09:55.807

递归分治法的工作原理如下：

> 1) 根据 x 坐标对点进行排序。
> 2) 通过垂直线 x=xmid 将点集分成两个大小相等的子集。
> 
> 3) 在左右子集中递归求解问题。这
> 分别产生左侧和右侧最小距离 dLmin 和 dRmin。
> 
> 4) 求一对点之间的最小距离dLRmin，其中一个点位于分界线的左侧，第二个点位于右侧。
> 
> 5) 最终答案是 dLmin、dRmin 和 dLRmin 中的最小值。（[来源](https://en.wikipedia.org/wiki/Closest_pair_of_points_problem#Planar_case)）

它的复杂度为`O(n log n)`. [这里](http://www.dcs.gla.ac.uk/~pat/52233/slides/ClosestPoints1x1.pdf)还有一个伪代码实现和[这里](https://rosettacode.org/wiki/Closest-pair_problem)方法的可视化描述。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-02T03:52:45.530

想想“划分”和“合并”部分的含义。显然，“划分”意味着将问题分成两个较小的独立问题。如何？然后，鉴于您解决了两个较小的问题，您如何将它们合并在一起？这两种方法的时间复杂度是多少？如果您需要更多说明，请发表评论。

# c# - System.NullReferenceException：对象引用未设置为对象的实例

> ID：13666231
> 
> 赞同：0
> 
> 时间：2012-12-02T03:47:36.470
> 
> 标签：c#

我的`aConnection.Open()`线路出现错误，无法弄清楚原因。这个确切的代码正在工作，然后我尝试将基本相同的代码添加到另一个类以将值插入到 Vehicle 表中，然后我开始收到此错误。因此，我将所有内容都删除了，如果我在工作时拥有它，并且单击“保存”时仍然出错。有任何想法吗？我已经用尽了所有资源来寻找和解决问题。谢谢！

数据层

```
public class Data
{
    public static Business anApplicant;

    static SqlConnection aConnection = null;

    public static void initializeConnection(SqlConnection aDbConnection)
    {
        aConnection = aDbConnection;
        aConnection.Open();
    }

    // Method for Inserting Applicant information into the database
    public static void InsertApplicant()
    {
        try
        {
            SqlCommand myCommand = new SqlCommand("INSERT INTO Applicant (FirstName, LastName, Address, City, State, Zip, Phone, Gender, BirthDate)" +
                "VALUES ('" + anApplicant.FName + "', '" + anApplicant.LName + "', '" + anApplicant.Address + "', '" + anApplicant.City + "', '" + anApplicant.State +
                "', '" + anApplicant.Zip + "', '" + anApplicant.Phone + "', '" + anApplicant.Gender + "', '" + anApplicant.BirthDate + "')", aConnection);

            if (aConnection.State == ConnectionState.Closed)
                aConnection.Open();

            myCommand.ExecuteNonQuery();

            aConnection.Close();
        }
        catch (Exception ex)
        {
            MessageBox.Show(ex.ToString(), "Error");
        }
    }
} 
```

业务层

```
public class Business
{
    SqlConnection aConnection = new SqlConnection("Data Source=zac2424-HP; Initial Catalog=Final; Trusted_Connection=True;");

    public void initializeConnection() 
    { 
        Data.initializeConnection(aConnection); 
    }

    private string policyNumber;
    private string fName;
    private string lName;
    private string address;
    private string city;
    private string state;
    private string zip;
    private string phone;
    private string gender;
    private string birthDate;

    public Business(string fName, string lName, string address,
        string city, string state, string zip, string phone, string gender, string birthDate)
    {
        FName = fName;
        LName = lName;
        Address = address;
        City = city;
        State = state;
        Zip = zip;
        Phone = phone;
        Gender = gender;
        BirthDate = birthDate;
    }

    public Business()
    {
    }

    // Applicant Get and Set Method
    public string PolicyNumber
    {
        get { return policyNumber; }
        set { policyNumber = value; }
    }

    public string FName
    {
        get { return fName; }
        set { fName = value; }
    }

    public string LName
    {
        get { return lName; }
        set { lName = value; }
    }

    public string Address
    {
        get { return address; }
        set { address = value; }
    }

    public string City
    {
        get { return city; }
        set { city = value; }
    }

    public string State
    {
        get { return state; }
        set { state = value; }
    }

    public string Zip
    {
        get { return zip; }
        set { zip = value; }
    }

    public string Phone
    {
        get { return phone; }
        set { phone = value; }
    }

    public string Gender
    {
        get { return gender; }
        set { gender = value; }
    }

    public string BirthDate
    {
        get { return birthDate; }
        set { birthDate = value; }
    }

    string premium = "";
    public string Premium
    {
        get { return premium; }
        set { premium = value; }
    }
} 
```

表示层

```
public partial class PolicyHomeForm : Form
{
    public PolicyHomeForm()
    {
        InitializeComponent();
    }

    private void PolicyHomeForm_Load(object sender, EventArgs e)
    {

    }

    public void saveButton_Click(object sender, EventArgs e)
    {
        Data.anApplicant = new Business(txtFirstName.Text, txtLastName.Text, txtAddress.Text, txtCity.Text, comboState.Text, txtZip.Text, txtPhone.Text,
            comboGender.Text, txtBirthDate.Text);

        //Data.aVehicle = new Vehicle(comboMake.Text, txtModel.Text, txtYear.Text, txtDesc.Text);

        Data.InsertApplicant();

        //Data.InsertVehicle();
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-02T04:02:25.930

您的代码从不调用`Data.initializeConnection`，因此`Data.aConnection`始终为空。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-02T04:02:11.607

空引用异常是您尝试访问空对象或未初始化对象的错误。（在这种情况下，您传递的参数 SQLConnection 为空）。

一种解决方案是在构造函数中初始化 SQLconnection 对象并将连接字符串作为参数传递，而不是 SQLConnection

或者另一种解决方案是将连接放在数据访问层中，在这种情况下，在您的数据类中创建一个构造函数并在那里打开连接。

抱歉帮不上忙，因为我是用手机发这个的^^...希望对你有帮助

# batch-file - 这个特定的批处理脚本是如何工作的

> ID：13666232
> 
> 赞同：1
> 
> 时间：2012-12-02T03:48:03.050
> 
> 标签：batch-file

下面的代码从文件中删除文件名扩展。但我无法理解它是如何做到的。它只是以裸格式列出当前目录中的所有文件。但在那之后我有点迷路了。有人可以帮我吗？

```
@echo off
cd %1
if exist filelisting.txt del filelisting.txt
for /F "delims=" %%j in ('dir /A-D /B /O:GEN') do echo %%~nj >> filelisting.txt 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T09:33:31.293

首先文件按扩展名排序，然后按文件名和文件夹分组在一起（这是多余的）与`/O:GEN`. `/B`排除完整路径并排除文件`/A-D`夹。`FOR /F %%J IN ('command') DO (..)`每行命令输出都设置为`%%J` 变量。with`%%~nJ`只取文件名，不带扩展名。这里有一些链接：

1.  [目录](http://ss64.com/nt/dir.html)
2.  [为 /F](http://www.robvanderwoude.com/ntfor.php#FOR_F)
3.  [文件属性](http://www.robvanderwoude.com/ntforfileattributes.php)

编辑：示例：

```
@echo off
echo %~0    -   expands %i removing any surrounding quotes (")
echo %~f0   -   expands %i to a fully qualified path name
echo %~d0   -   expands %i to a drive letter only
echo %~p0   -   expands %i to a path only
echo %~n0   -   expands %i to a file name only
echo %~x0   -   expands %i to a file extension only
echo %~s0   -   expanded path contains short names only
echo %~a0   -   expands %i to file attributes of file
echo %~t0   -   expands %i to date/time of file
echo %~z0   -   expands %i to size of file
echo %~$PATH:0  -   searches the directories listed in the PATH environment variable and expands %i to the fully qualified name of the first one found.
echo %~dp0  -   expands %i to a drive letter and path only
echo %~nx0  -   expands %i to a file name and extension only
echo %~fs0  -   expands %i to a full path name with short names only
echo %~dp$PATH:0    -   searches the directories listed in the PATH environment variable for %i and expands to the drive letter and path of the first one found.
echo %~ftza0    -   expands %i to a DIR like output line
pause 
```

保存这个 sa .bat 文件。%0 是调用的 .bat 文件的路径。这将列出所有 %~0 操作。`%~`仅适用于一侧封闭的变量 - 批处理文件参数 %0、%1 .. 或`FOR`变量。

# python - 如何更改输出？（Python、列表、字典帮助）

> ID：13666233
> 
> 赞同：-2
> 
> 时间：2012-12-02T03:48:22.743
> 
> 标签：python, python-3.2

> **可能重复：**
> [更改输出](https://stackoverflow.com/questions/13639268/changing-the-output)

这是代码：

```
def voting_borda(args):
    results = {}
    for sublist in args:
        for i in range(0, 3):
            if sublist[i] in results:
                results[sublist[i]] += 3-i
            else:
                results[sublist[i]] = 3-i

    winner = max(results, key=results.get)
    return winner, results

print(voting_borda(
    ['GREEN','NDP', 'LIBERAL', 'CPC'],
    ['GREEN','CPC','LIBERAL','NDP'],
    ['LIBERAL','NDP', 'CPC', 'GREEN']
)) 
```

产生的输出是

```
"('GREEN', {'LIBERAL': 5, 'NDP': 4, 'GREEN': 6, 'CPC': 3})" 
```

我不希望输出中的政党名称（自由党、ndp、green 和 cpc）我只需要这些值，如何编辑代码来实现这一点？

编辑：

测试上述代码后我收到的错误消息（带有： >>>voting_borda([['NDP', 'CPC', 'GREEN', 'LIBERAL'],['NDP', 'CPC', 'LIBERAL', '绿色']，['NDP'，'CPC'，'绿色'，'自由']]）

回溯（最近一次通话）：文件“”，第 1 行，在 vote_borda([['NDP', 'CPC', 'GREEN', 'LIBERAL'],['NDP', 'CPC', 'LIBERAL', 'GREEN'],['NDP', 'CPC', 'GREEN', 'LIBERAL']]) 文件“C:\Users\mycomp\Desktop\work\voting_systems.py”，第 144 行，在 vote_borda 中获胜者 = max (results, key=results.get) NameError: global name 'results' is not defined

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T03:58:27.993

对于 Python 2.7：

```
return winner, [value for value in results.values()]) 
```

对于 Python 3.x：

```
return winner, list(results.values()) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-02T04:05:17.073

非常老式的 Python：

```
#!/usr/bin/env python
# -*- coding: utf-8 -*-

myResults=(['GREEN','NDP', 'LIBERAL', 'CPC'],
    ['GREEN','CPC','LIBERAL','NDP'],
    ['LIBERAL','NDP', 'CPC', 'GREEN'])

def count(results):
  counter = dict()
  for resultList in results:
    for result in resultList:
      if not(result in counter):
        counter[result] = 1
      else:
        counter[result] += 1
  print "counter (before): %s" % counter
  return counter.values()

if __name__ == "__main__":
  print "%s" % count(myResults) 
```

如果您使用 Python >= 2.7，请检查“ [collections.Counter](http://docs.python.org/2/library/collections.html#counter-objects) ”（如[本问题](https://stackoverflow.com/a/5829377/289011)所述）

# asp.net-mvc - 支持 RavenDB 的 MVC4 成员系统

> ID：13666235
> 
> 赞同：12
> 
> 时间：2012-12-02T03:49:06.843
> 
> 标签：asp.net-mvc, asp.net-mvc-4, ravendb, membership-provider

我创建了很多快速的“概念证明”MVC 应用程序，实际上我发现 MVC4 模板附带的 SimpleMembership 提供程序非常方便，因为它让我在几分钟内启动并运行用户注册和 OAuth。

但是...我已经开始使用 RavenDb（在 RavenHQ 上用于我的项目很多）。因此，我开始尝试基于 ExtendedMembershipProvider 实现我自己的“自定义会员提供程序”，同时我意识到这并没有多大意义。后来我偶然发现了 2 个试图解决这个确切问题的有趣项目：

*   WorldDomination.Web.Auth：[https ://github.com/PureKrome/WorldDomination.Web.Authentication](https://github.com/PureKrome/WorldDomination.Web.Authentication)
*   MemFlex：[https ://github.com/OdeToCode/Memflex](https://github.com/OdeToCode/Memflex)

两者都是最近非常有趣的努力，并且想知道这些是否是目前唯一正在建造的。我本质上是在寻找可以放入 MVC4 应用程序、连接到我的 RavenDb 并完成的 nuget pkg。我愿意建造这个东西，但不想重复任何已经在进行的努力。谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-02T17:01:12.343

RavenDB 有几个 ASP.Net 成员提供程序。它们都不是官方的，它们的实现都略有不同。谷歌搜索“ravendb 会员提供商”，你会发现很多。

[这里](http://mytechworld.officeacuity.com/index.php/2012/07/authentication-and-authorization-in-mvc-projects-using-ravendb/)有一篇很好的文章，将其中一些与 Raven 自己的授权和身份验证包进行了比较。

我同意你的观点，在各种 MVC4 模板上将 SQL 替换为 Raven 应该更容易。但是，除了依赖于成员资格提供者之外，他们往往拥有旨在与实体框架一起使用的模型。如果您要使用 RavenDB 从头开始​​编写示例模板，您可能会得到一个非常不同的最终产品。

**更新**

没想到你说的是新的`SimpleMembershipProvider`。我不知道这存在。我发现[Jon Galloway 的文章](http://weblogs.asp.net/jgalloway/archive/2012/08/29/simplemembership-membership-providers-universal-providers-and-the-new-asp-net-4-5-web-forms-and-asp-net-mvc-4-templates.aspx)详细描述了它 - 很好读。他指出了与此相关的两个关键点。我引用：

> *请注意，SimpleMembership 仍然需要一些 SQL Server 风格 - 它不适用于 MySQL、NoSQL 数据库等。如果您想查看 WebMatrix.WebData.dll 中的代码，可以使用 ILSpy 等工具查看为什么 - 在某些地方执行 SQL Server 特定的 SQL 语句，尤其是在创建和初始化表时。如果您单独创建表，您似乎可以使用另一个数据库，但我还没有尝试过，目前不支持它。*

...

> *重要的是，SimpleMembershipProvider 是 MembershipProvider，但 MembershipProvider 不是 SimpleMembershipProvider。这种区别在实践中很重要：您不能将现有的 MembershipProvider（包括 System.Web.Providers 中的通用提供程序）与需要 SimpleMembershipProvider 的 API 一起使用，包括 WebMatrix.WebData.WebSecurity 或 Microsoft.Web 中的任何调用。 WebPages.OAuth.OAuthWebSecurity。*

那时我会认为为 RavenDB 编写一个`SimpleMembershipProvider`是不可能的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-01-13T20:59:40.523

有一个新项目似乎使用 RavenDb 巧妙地实现了 AspNet.Identity [http://www.tugberkugurlu.com/archive/aspnet-identity-ravendb--fully-asynchronous-new-and-sweet-asp-net-identity- ravendb 的实现](http://www.tugberkugurlu.com/archive/aspnet-identity-ravendb--fully-asynchronous-new-and-sweet-asp-net-identity-implementation-for-ravendb)

# objective-c - 将图像从网站加载到 Tableview

> ID：13666237
> 
> 赞同：0
> 
> 时间：2012-12-02T03:49:47.137
> 
> 标签：objective-c, ios, xcode, uitableview

我正在尝试将图像从网站加载到表格视图中。我可以加载存储在项目中的图像，但无法从网络获取图像。我知道我在这里遗漏了一些东西。有任何想法吗？

```
UIImage *cellImage = [UIImage imageNamed:
@"http://www.website.com/thumbs/img_10.jpg"];
cell.imageView.image = cellImage; 
```

任何帮助都会很棒！谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T04:00:34.463

你可以像这样使用它：

```
NSURL *imageURL = [NSURL URLWithString:@"http://www.gravatar.com/avatar/53789a67f8fffd8ede2ea118165ff962?s=32&d=identicon&r=PG"];
NSData *imageData = [NSData dataWithContentsOfURL:imageURL];
UIImage *cellImage = [UIImage imageWithData:imageData]; 
```

但是使用这种方式同步获取图像会阻塞你的 UI。你最好异步获取图像。发出请求，并在获取图像后在您的请求委托方法中更新您的 UI。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T09:18:35.947

试试这个：

```
NSData *imageData = [[NSData alloc] initWithContentsOfURL:[NSURL URLWithString:@"give your url hrere."]];

 UIImage *image = [UIImage imageWithData:imageData];

cell.imageView.image =image; 
```

# image - 带有预览和进度条的 Twitter Bootstrap 图像上传

> ID：13666243
> 
> 赞同：19
> 
> 时间：2012-12-02T03:51:50.487
> 
> 标签：image, file-upload, twitter-bootstrap, preview

我如何使用 Twitter Bootstrap 上传带有预览和进度条的单个图像。目前，在我保存图像之前，我看不到上传图像的任何预览或进度条。

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-12-02T03:57:12.033

Jasny 的 Bootstrap 分支可以让你接近。请参阅[文档](http://jasny.github.io/bootstrap/javascript/#fileinput)。

编码：

```
<div class="fileupload fileupload-new" data-provides="fileupload">
  <div class="fileupload-preview thumbnail" style="width: 200px; height: 150px;"></div>
  <div>
    <span class="btn btn-file"><span class="fileupload-new">Select image</span><span class="fileupload-exists">Change</span><input type="file" /></span>
    <a href="#" class="btn fileupload-exists" data-dismiss="fileupload">Remove</a>
  </div>
</div>
```

不幸的是，它似乎没有进度条。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2016-08-05T21:56:23.033

我制作了一个 jQuery 插件，它可以从文件和 URL 中预览图像。但是，没有进度条（还）。

代码：[https ://github.com/egonolieux/bootstrap-imageupload](https://github.com/egonolieux/bootstrap-imageupload)

演示：[https ://egonolieux.github.io/bootstrap-imageupload](https://egonolieux.github.io/bootstrap-imageupload)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-05-16T05:58:38.880

我尝试了接受的答案，但无法使其正常工作。

[在http://plugins.krajee.com/file-input](http://plugins.krajee.com/file-input)有一个插件。它需要 Bootstrap 3 和 JQuery 2.1

[您可以在此处](http://plugins.krajee.com/file-basic-usage-demo)查看一些演示并在[此处](http://plugins.krajee.com/file-input#manual-install)或[此处](https://github.com/kartik-v/bootstrap-fileinput)获取源代码。`/examples/`该源的文件夹中还有其他 AJAX 上传方案、拖放等示例。它比 Jensy 插件更通用。

以下代码是我在我的网站上使用的。请注意，这`file_path/kartik-v-bootstrap-fileinput-51ddb7c/`是您机器上提取的源代码文件夹：

```
<html>
<head>
  <!-- Start of Karthik upload plugin -->
  <link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/css/bootstrap.min.css" rel="stylesheet">
  <link href="file_path/kartik-v-bootstrap-fileinput-51ddb7c/css/fileinput.min.css" media="all" rel="stylesheet" type="text/css" />
  <script src="http://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
  <script src="file_path/kartik-v-bootstrap-fileinput-51ddb7c/js/fileinput.js" type="text/javascript"></script>
  <script src="file_path/kartik-v-bootstrap-fileinput-51ddb7c/js/fileinput_locale_fr.js" type="text/javascript"></script>
  <script src="file_path/kartik-v-bootstrap-fileinput-51ddb7c/js/fileinput_locale_es.js" type="text/javascript"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/js/bootstrap.min.js" type="text/javascript"></script>
</head>

<body>
  <div class="form-group col-md-6 col-xs-12">
  <form>
    <h2>Upload a picture:</h2>
      <!-- Source: http://plugins.krajee.com/file-input -->
      <div class="container kv-main">
        <div enctype="multipart/form-data">
          <div class="row">
            <div class="form-group col-md-6 col-xs-12">
              <input id="file-0a" class="file" type="file" multiple data-min-file-count="1">
            </div>
          </div>
        </div>
      </div>
  </form>
  </div>
</body>
<script>
$('#file-fr').fileinput({
  language: 'fr',
  uploadUrl: '#',
  allowedFileExtensions: ['jpg', 'png', 'gif'],
});
$('#file-es').fileinput({
  language: 'es',
  uploadUrl: '#',
  allowedFileExtensions: ['jpg', 'png', 'gif'],
});
$("#file-0").fileinput({
  'allowedFileExtensions': ['jpg', 'png', 'gif'],
});
$("#file-1").fileinput({
  uploadUrl: '#', // you must set a valid URL here else you will get an error
  allowedFileExtensions: ['jpg', 'png', 'gif'],
  overwriteInitial: false,
  maxFileSize: 1000,
  maxFilesNum: 10,
  //allowedFileTypes: ['image', 'video', 'flash'],
  slugCallback: function(filename) {
    return filename.replace('(', '_').replace(']', '_');
  }
});
/*
$(".file").on('fileselect', function(event, n, l) {
    alert('File Selected. Name: ' + l + ', Num: ' + n);
});
*/
$("#file-3").fileinput({
  showUpload: false,
  showCaption: false,
  browseClass: "btn btn-primary btn-lg",
  fileType: "any",
  previewFileIcon: "<i class='glyphicon glyphicon-king'></i>"
});
$("#file-4").fileinput({
  uploadExtraData: {
    kvId: '10'
  }
});
$(".btn-warning").on('click', function() {
  if ($('#file-4').attr('disabled')) {
    $('#file-4').fileinput('enable');
  } else {
    $('#file-4').fileinput('disable');
  }
});
$(".btn-info").on('click', function() {
  $('#file-4').fileinput('refresh', {
    previewClass: 'bg-info'
  });
});
/*
$('#file-4').on('fileselectnone', function() {
    alert('Huh! You selected no files.');
});
$('#file-4').on('filebrowse', function() {
    alert('File browse clicked for #file-4');
});
*/
$(document).ready(function() {
  $("#test-upload").fileinput({
    'showPreview': false,
    'allowedFileExtensions': ['jpg', 'png', 'gif'],
    'elErrorContainer': '#errorBlock'
  });
  /*
  $("#test-upload").on('fileloaded', function(event, file, previewId, index) {
      alert('i = ' + index + ', id = ' + previewId + ', file = ' + file.name);
  });
  */
});
</script>

</html> 
```

您可以设置`data-min-file-count="x"`是否要确保用户上传至少 x 张照片。我个人也喜欢在第 454 行编辑`source/js/fileinput.js`和设置以下内容：`previewCache`

```
defaultPreviewSettings = {
        image: {width: "100%", height: "auto"},
        html: {width: "213px", height: "160px"},
        text: {width: "160px", height: "136px"},
        video: {width: "213px", height: "160px"},
        audio: {width: "213px", height: "80px"},
        flash: {width: "213px", height: "160px"},
        object: {width: "160px", height: "160px"},
        other: {width: "160px", height: "160px"}
    }; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-10-24T04:18:08.273

特此，使用 HTML Blob & FormData 直接上传：

```
// Now, let's do the upload thingy for our beloved image(s)...
//Bulk Uploading, mannn....

$('.btn-upload').on('click', function (evt) {
    var xhr = new XMLHttpRequest();
    var fd = new FormData();
    fd.append("file", document.getElementById('(your beloved id/class html element)').files[0]);
    xhr.open("POST", "/(your beloved id/class html element)/", true);
    xhr.send(fd);
    xhr.addEventListener("load", function (event) {
        var parseData = $.parseJSON(event.target.response);

        location.reload();
    }, false);
});
// end of bulk uploading... 
```

# java - 自定义 JComponent 大小默认为零？

> ID：13666245
> 
> 赞同：1
> 
> 时间：2012-12-02T03:52:33.080
> 
> 标签：java, swing, user-interface, layout, jcomponent

我正在尝试将自定义可滚动 JComponent 添加到 JFrame。

```
JScrollPane sp = new JScrollPane(hg);
frame.getContentPane().add(sp, BorderLayout.CENTER); 
```

hg 是我的自定义组件。

问题是我的自定义组件没有显示。但是，如果我这样做：

```
hg.setBounds(0, 0, 800, 600); 
```

然后就会显示出来。但我当然不想明确设置大小。我希望它适合框架的中心。

在我的自定义 JComponent 类中，我重写了 getPreferredSize()：

```
private Dimension computePreferredSize() {
    return new Dimension((int) (this.getParent().getSize().width * scale),
            (int) (this.getParent().getSize().height * scale));
}

public Dimension getPreferredSize() {
    Dimension d = computePreferredSize();
    System.out.println("Dimension: " + d); // prints reasonable output: Dimension: java.awt.Dimension[width=1201,height=805]
    return d;
} 
```

但这似乎没有任何效果。即使我直接返回固定尺寸：

```
public Dimension getPreferredSize() {
    return new Dimension(800, 600);
} 
```

这也不起作用。

我还在 ComponentUI 的 paint() 方法中添加了 println，但没有打印任何内容，所以我认为由于某种原因而没有调用 paint()。我认为原因是我的自定义组件的大小默认为零，我不确定如何让它调整自己的大小。

所以我的问题是：为什么我的 JComponent 默认不显示，我应该怎么做才能让它自动适应 JFrame 的中心？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-02T03:59:46.847

在定义 的类中`hg`，覆盖`getPreferredSize()`以返回组件的首选大小。可以在[此处](https://stackoverflow.com/a/13610367/230513)和[此处](https://stackoverflow.com/a/13437388/230513)找到示例。[这里](https://stackoverflow.com/q/7229226/230513)讨论了基本原理和一些重要的注意事项。

# go - 当所有通道都关闭时，跳出一个 select 语句

> ID：13666253
> 
> 赞同：73
> 
> 时间：2012-12-02T03:54:59.577
> 
> 标签：go

我有两个独立生成数据的 goroutine，每个都将数据发送到一个通道。在我的主 goroutine 中，我想在这些输出进入时使用它们中的每一个，但不关心它们进入的顺序。每个通道在耗尽其输出时会自行关闭。虽然 select 语句是像这样独立使用输入的最佳语法，但我还没有看到一种简洁的方法来循环每个通道，直到两个通道都关闭。

```
for {
    select {
    case p, ok := <-mins:
        if ok {
            fmt.Println("Min:", p) //consume output
        }
    case p, ok := <-maxs:
        if ok {
            fmt.Println("Max:", p) //consume output
        }
    //default: //can't guarantee this won't happen while channels are open
    //    break //ideally I would leave the infinite loop
                //only when both channels are done
    }
} 
```

我能想到的最好的方法是以下（只是草图，可能有编译错误）：

```
for {
    minDone, maxDone := false, false
    select {
    case p, ok := <-mins:
        if ok {
            fmt.Println("Min:", p) //consume output
        } else {
            minDone = true
        }
    case p, ok := <-maxs:
        if ok {
            fmt.Println("Max:", p) //consume output
        } else {
            maxDone = true
        }
    }
    if (minDone && maxDone) {break}
} 
```

但是，如果您使用两个或三个以上的频道，这看起来会变得站不住脚。我知道的唯一另一种方法是在 switch 语句中使用 timout case，它要么小到足以冒提前退出的风险，要么在最终循环中注入过多的停机时间。有没有更好的方法来测试 select 语句中的通道？

* * *

## 回答 #1

> 赞同：135
> 
> 时间：2012-12-02T05:36:28.063

您的示例解决方案效果不佳。一旦其中一个关闭，它总是可以立即进行通信。这意味着你的 goroutine 永远不会屈服，其他通道可能永远不会准备好。您将有效地进入一个无限循环。我在这里贴了一个例子来说明效果：[http ://play.golang.org/p/rOjdvnji49](http://play.golang.org/p/rOjdvnji49)

那么，我将如何解决这个问题呢？nil 通道永远不会为通信做好准备。因此，每次遇到关闭的频道时，您都可以取消该频道，以确保它不再被选中。此处可运行示例：[http ://play.golang.org/p/8lkV_Hffyj](http://play.golang.org/p/8lkV_Hffyj)

```
for {
    select {
    case x, ok := <-ch:
        fmt.Println("ch1", x, ok)
        if !ok {
            ch = nil
        }
    case x, ok := <-ch2:
        fmt.Println("ch2", x, ok)
        if !ok {
            ch2 = nil
        }
    }

    if ch == nil && ch2 == nil {
        break
    }
} 
```

至于怕它变得笨拙，我认为不会。很少有频道同时进入太多地方。这种情况很少出现，以至于我的第一个建议就是处理它。将 10 个通道与 nil 进行比较的长 if 语句并不是尝试在选择中处理 10 个通道的最糟糕的部分。

* * *

## 回答 #2

> 赞同：30
> 
> 时间：2012-12-02T08:07:26.470

关闭在某些情况下很好，但不是全部。我不会在这里使用它。相反，我只会使用完成的频道：

```
for n := 2; n > 0; {
    select {
    case p := <-mins:
        fmt.Println("Min:", p)  //consume output
    case p := <-maxs:
        fmt.Println("Max:", p)  //consume output
    case <-done:
        n--
    }
} 
```

操场上的完整工作示例：[http ://play.golang.org/p/Cqd3lg435y](http://play.golang.org/p/Cqd3lg435y)

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2012-12-02T10:19:25.190

为什么不使用 goroutine？随着您的频道关闭，整个事情变成了一个简单的范围循环。

```
func foo(c chan whatever, prefix s) {
        for v := range c {
                fmt.Println(prefix, v)
        }
}

// ...

go foo(mins, "Min:")
go foo(maxs, "Max:") 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2019-04-28T06:26:35.453

当我遇到这样的需求时，我采取了以下方法：

```
var wg sync.WaitGroup
wg.Add(2)

go func() {
  defer wg.Done()
  for p := range mins {
    fmt.Println("Min:", p) 
  }
}()

go func() {
  defer wg.Done()
  for p := range maxs {
    fmt.Println("Max:", p) 
  }
}()

wg.Wait() 
```

我知道这不是单一的 for select 循环，但在这种情况下，我觉得如果没有“if”条件，这更具可读性。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2014-01-15T15:33:43.460

我写了一个包，它提供了解决这个问题的功能（以及其他几个）：

[https://github.com/eapache/channels](https://github.com/eapache/channels)

[https://godoc.org/github.com/eapache/channels](https://godoc.org/github.com/eapache/channels)

查看`Multiplex`功能。它使用反射来缩放到任意数量的输入通道。

# string - 如何防止vim向字符串添加缩进？

> ID：13666259
> 
> 赞同：4
> 
> 时间：2012-12-02T03:56:37.870
> 
> 标签：string, bash, vim, indentation, auto-indent

我希望能够`gg=G`使用我的 bash 脚本，或者一些不会阻碍简单回声的自动格式变体。

我觉得这样的事情不是问题，我只是还没有找到正确的方法：

1.  在这种情况下正确回显字符串
2.  为作业发出正确的命令

如果有人可以帮助我，将不胜感激。

我输入的内容：

```
someFun()
{
    echo "Some really long string that is going to be automatically
    indented.";
} 
```

我在提示中看到的

```
>./someFun  
Some really long string that is going to be automatically
    indented. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T17:50:50.767

您可以像这样连接字符串：

```
echo "Some really long string that is going to be automatically" \
"indented." 
```

要么关闭缩进：

```
:setlocal noautoindent
:setlocal nosmartindent 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-28T19:28:17.043

拜特，这是实现您所追求的更合适的方法，以及对任何其他初学者的一些提示。

首先，您不应该将自己的 shell 存放在任何旧的地方，尤其是 /usr/bin。如果您有自定义应用程序，我建议您将其存储在**/opt**或 /usr/local/bin 中。

其次，这个特殊的外壳不应该是任何应用程序的先决条件，它的用途与现有的不同。

相反，请参阅以下示例：

**问题>**

```
foo()
{
    echo "A string that gets affected by auto-format, is a pretty long
    string";
}

$foo
>A string that gets affected by auto-format, is a pretty long
    string 
```

**解决方案>**

```
foo()
{
    longString='A really long
    \nstring';
    echo -e $longString

}

$foo
>A really long
string 
```

**或** 使用**cat EOF | EOL**
，如果您 不使用连字符“-”指定缩进，它将为您工作，请参阅：

```
foo()
{
    cat <<-EOL
    really long
    string 
    EOL
}    

$foo
>really long
string 
```

**结论>**这通过提供一种在 bash 中使用字符串的非侵入性方式来解决您的问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-05T00:22:05.790

这是我目前的解决方案，有任何争论或提示吗？
这将更适合
需要灵活性的项目的需求，包括：

1.  不受 textwidth=? 多用户环境
2.  不受 auto-[indent|format]* (vim, gedit, notepad++, w/e) 的影响
3.  通过完全控制避免不可预测的输出

这些不可靠的地方：
**cat << EOF ... EOF**    或     **使用“\”转义回声**

我做了一个文件 /usr/bin/yell

```
printTrueString()
{    
    local args=$@;
    echo $args;
    unset args;
}

printTrueString "$@";
exit 0 
```

现在...

```
sumFun()
{      
    #auto-indent all you want VIM or w/e!...
    yell "hello mad
    world"

    #just like echo -e 
    yell -e "hello\nmad\nworld"        
}  
sumFun;
exit 0

#stays on one line, where the echo would split     
>hello mad world
>hello
mad
world 
```

你可以做更多类似...扩展回声作为内置...

# c - 递归 C 合并排序在使用管道/叉子读取时挂起

> ID：13666261
> 
> 赞同：4
> 
> 时间：2012-12-02T03:57:01.553
> 
> 标签：c, recursion, fork, pipe, mergesort

我正在尝试使用递归叉子系统创建一个包含 800 个整数的数组的合并排序，以便每个最底部的子项（总共 8 个）qsort 100 个，然后将数组传递回它们各自的父进程以进行合并排序并再次通过。

由于某种原因，该函数在第一组最底层的子进程完成对其父进程的写入后挂起。

我的递归 fork 函数接受 800 的初始数组...

```
static void forkSort(int* parentNums, int size)
{
    printf("PPid:%ld Pid:%ld Size:%d\n", (long)getppid(), (long)getpid(), size);
    int childNums[size/2], fd[2], left, right;

    if(size <= 100) //Send sorted array to parent thru pipe
    {
        qsort(parentNums, size, sizeof(int), compare);
        write(fd[1], &parentNums, sizeof(parentNums));
        exit(0);
    }
    if (pipe(fd)==-1){perror("Failed");}

    size /= 2;
    if(!(left = tryFork()) || !(right = tryFork())) //Children
    {
        if(left)    copy(childNums, parentNums, size);
        else        copy(childNums, parentNums + size, size);

        forkSort(childNums, size);
    }
    //Parents
    int first[size], second[size], combined[size*2];
    read(fd[0], first, sizeof(first));
    read(fd[0], second, sizeof(second));

    mergeSort(first, second, combined, size);
    if(size*2 == SIZE) //Finished, write to out.dat
        printArray(combined, SIZE);
    else
        write(fd[0], combined, sizeof(combined));
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-02T05:12:59.867

您的代码有一些问题（我必须补充一点，这看起来很有趣）。

A）您应该 exit() 而不仅仅是在客户端代码中返回。否则，您将继续执行，尤其是在进行递归时。

B）您需要将管道的写入端传递给您的客户，以便他们也知道在哪里写入。我将此作为参数添加到 forkSort()。

C) 当 size <= 100 时，你做 a `sizeof(parentNums)`this 变成 a `sizeof(int*)`，正确的做法是：`sizeof(int)*size`.

D）当您写回一组合并的整数时，您只写第一部分并将其写入管道的读取端。正确的调用是：`write(write_fd, combined, sizeof(combined));`.

E）我删除了 wait(NULL) 调用，因为我没有看到这一点。同步将由`read()`and`write()`调用完成。

这是我的建议：

```
static void forkSort(int* parentNums, int size, int write_fd)
{
  int fd[2];
  printf("PPid:%ld Pid:%ld Size:%d\n", (long)getppid(), (long)getpid(), size);
  int childNums[size/2], left, right;
  if(size <= 100) //Send sorted array to parent thru pipe
    {
      qsort(parentNums, size, sizeof(int), compare);
      write(write_fd, parentNums, size*sizeof(int));
      exit(0);
    }
  if (pipe(fd)==-1){perror("Failed");}

  printf("Creating child processes...\n");
  size /= 2;

  if(!(left = tryFork()) || !(right = tryFork())) //Children
  {
      if(left)    copy(childNums, parentNums, size);
      else        copy(childNums, parentNums + size, size);
      forkSort(childNums, size, fd[1]);
  }

  /* parent */
  int first[size], second[size], combined[size*2];
  read(fd[0], first, sizeof(first));
  read(fd[0], second, sizeof(second));
  printf("\n\nMerge sorting...  Size:%d\n", size*2);
  mergeSort(first, second, combined, size);
  if(size*2 == SIZE) { //Finished, write to out.dat
    printf("\nFinished!!! (%d)\n\n", size * 2);
    printArray(combined, SIZE);
  }
  else {
    write(write_fd, combined, sizeof(combined));
    exit(0);
  }
} 
```

# c++ - 我可以像这样使用 mem_fun 吗？

> ID：13666262
> 
> 赞同：0
> 
> 时间：2012-12-02T03:57:05.293
> 
> 标签：c++, windows, algorithm, stl, c++11

我想在运行时设置函数指针。但我被困在这里。当我使用全局函数或静态类成员函数时，一切正常。但是，当函数是普通的类成员函数时。我总是遇到编译器错误。这是代码：

```
class A   
{
    int val;
public:
    A() { val = 0; }
    A(int j) { val = j; }

    int aFun(int k) {val -= k; return val; }
};

typedef int (* func)(int );
class B
{
    func m_addr;
public:
    B(func param)
        : m_addr(param)
    {

    }
    void execute()
    {
        cout << m_addr(9) << endl;
    }
}; 
```

我正在尝试像这样使用它们：

> /* 错误 C2355: 'this' : 只能在非静态成员函数内部引用带有适当数量参数的函数指针或引用函数 */

```
A a;
B b(A::aFun); 
b.execute(); 
```

在google了很多之后，我发现这`std::mem_fun`可能会有所帮助。但我不知道如何使用它。任何人都可以帮助我吗？

**PS：我正在使用 Visual C++ 2010**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-02T04:04:03.983

类成员函数有一个由编译器传递给它的额外参数称为`this`，因此编译器将`aFun`begin 视为声明并编写为

```
int A::aFun(A* this, int k)
{
    this->val -= k;
    return this->val;
} 
```

静态/全局函数没有这个参数，所以编译成功。

为了使用`A::aFun`，你需要一个类的实例`A`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-02T11:11:12.343

修改如下：

```
static int val;

class A   
{

public:
    A() { val = 0; }
    A(int j) { val = j; }

  static  int aFun(int k) {val -= k; return val; }
}; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-02T23:15:06.507

我没有得到你想要做什么，但我看到了一个错误，也许对你有帮助。

那是一个指向函数的指针，不是吗？

```
 typedef int (* func)(int ); 
```

但是你没有一个函数，你有一个类的方法。（成员函数）所以 typedef 应该是概率：

```
typedef int (A::*func)(int ); 
```

我希望对你有所帮助，你可以谷歌搜索成员函数的指针，你会找到一些例子。

祝你好运！

# r - 在 Rcpp 中使用属性并使用 RcppArmadillo 代码时出现错误

> ID：13666265
> 
> 赞同：3
> 
> 时间：2012-12-02T03:57:22.967
> 
> 标签：r, rcpp, armadillo

我正在尝试使用 RcppArmadillo 创建一个包。该代码使用 Rcpp 的新属性方法。sourceCpp 工作正常并编译代码，但是当我构建一个包时，当我使用 RcppArmadillo 代码时出现错误。如果没有 RcppArmadillo 代码并使用正则 C++，我不会收到这些错误。C++ 代码（本质上是 fastLm 示例代码）是：

```
// [[Rcpp::depends(RcppArmadillo)]]

#include <Rcpp.h>
#include <RcppArmadillo.h>

using namespace Rcpp;

// [[Rcpp::depends(RcppArmadillo)]]
#include <RcppArmadillo.h>
// [[Rcpp::export]]
List fastLm(NumericVector yr, NumericMatrix Xr) {
      int n = Xr.nrow(), k = Xr.ncol();
  arma::mat X(Xr.begin(), n, k, false);
  arma::colvec y(yr.begin(), yr.size(), false);
  arma::colvec coef = arma::solve(X, y);
  arma::colvec resid = y - X*coef;
  double sig2 = arma::as_scalar(arma::trans(resid)*resid/(n-k));
  arma::colvec stderrest = arma::sqrt(
  sig2 * arma::diagvec( arma::inv(arma::trans(X)*X)) );
  return List::create(Named("coefficients") = coef,
  Named("stderr") = stderrest);
} 
```

这是编译错误，在我执行“R

```
 > Rcpp::compileAttributes()

* Updated src/RcppExports.cpp

==> Rcmd.exe INSTALL --no-multiarch NewPackage

* installing to library 'C:/Users/Howard/Documents/R/win-library/2.15'
* installing *source* package 'NewPackage' ...
** libs
g++ -m64 -I"C:/R/R-2-15-2/include" -DNDEBUG    -I"C:/Users/Howard/Documents/R/win-library/2.15/Rcpp/include" -I"C:/Users/Howard/Documents/R/win-library/2.15/RcppArmadillo/include" -I"d:/RCompile/CRANpkg/extralibs64/local/include"     -O2 -Wall  -mtune=core2 -c RcppExports.cpp -o RcppExports.o
g++ -m64 -I"C:/R/R-2-15-2/include" -DNDEBUG    -I"C:/Users/Howard/Documents/R/win-library/2.15/Rcpp/include" -I"C:/Users/Howard/Documents/R/win-library/2.15/RcppArmadillo/include" -I"d:/RCompile/CRANpkg/extralibs64/local/include"     -O2 -Wall  -mtune=core2 -c test_arma3.cpp -o test_arma3.o
g++ -m64 -shared -s -static-libgcc -o NewPackage.dll tmp.def RcppExports.o test_arma3.o C:/Users/Howard/Documents/R/win-library/2.15/Rcpp/lib/x64/libRcpp.a -Ld:/RCompile/CRANpkg/extralibs64/local/lib/x64 -Ld:/RCompile/CRANpkg/extralibs64/local/lib -LC:/R/R-2-15-2/bin/x64 -lR
test_arma3.o:test_arma3.cpp:(.text+0xae4): undefined reference to `dgemm_'
test_arma3.o:test_arma3.cpp:(.text+0x19db): undefined reference to `dgemm_'
test_arma3.o:test_arma3.cpp:(.text+0x1b0c): undefined reference to `dgemv_'
test_arma3.o:test_arma3.cpp:(.text$_ZN4arma6auxlib8solve_odIdNS_3MatIdEEEEbRNS2_IT_EES6_RKNS_4BaseIS4_T0_EE[_ZN4arma6auxlib8solve_odIdNS_3MatIdEEEEbRNS2_IT_EES6_RKNS_4BaseIS4_T0_EE]+0x702): undefined reference to `dgels_'
test_arma3.o:test_arma3.cpp:(.text$_ZN4arma6auxlib8solve_udIdNS_3MatIdEEEEbRNS2_IT_EES6_RKNS_4BaseIS4_T0_EE[_ZN4arma6auxlib8solve_udIdNS_3MatIdEEEEbRNS2_IT_EES6_RKNS_4BaseIS4_T0_EE]+0x51c): undefined reference to `dgels_'
test_arma3.o:test_arma3.cpp:(.text$_ZN4arma6auxlib10det_lapackIdEET_RKNS_3MatIS2_EEb[_ZN4arma6auxlib10det_lapackIdEET_RKNS_3MatIS2_EEb]+0x14b): undefined reference to `dgetrf_'
test_arma3.o:test_arma3.cpp:(.text$_ZN4arma6auxlib5solveIdNS_3MatIdEEEEbRNS2_IT_EES6_RKNS_4BaseIS4_T0_EEb[_ZN4arma6auxlib5solveIdNS_3MatIdEEEEbRNS2_IT_EES6_RKNS_4BaseIS4_T0_EEb]+0x375): undefined reference to `dgesv_'
test_arma3.o:test_arma3.cpp:(.text$_ZN4arma4gemvILb1ELb0ELb0EE15apply_blas_typeIdEEvPT_RKNS_3MatIS3_EEPKS3_S3_S3_[_ZN4arma4gemvILb1ELb0ELb0EE15apply_blas_typeIdEEvPT_RKNS_3MatIS3_EEPKS3_S3_S3_]+0x17d): undefined reference to `dgemv_'
test_arma3.o:test_arma3.cpp:(.text$_ZN4arma27glue_times_redirect2_helperILb1EE5applyINS_2OpINS_3MatIdEENS_9op_htransEEES5_EEvRNS4_INT_9elem_typeEEERKNS_4GlueIS8_T0_NS_10glue_timesEEE[_ZN4arma27glue_times_redirect2_helperILb1EE5applyINS_2OpINS_3MatIdEENS_9op_htransEEES5_EEvRNS4_INT_9elem_typeEEERKNS_4GlueIS8_T0_NS_10glue_timesEEE]+0x37a): undefined reference to `dgemm_'
test_arma3.o:test_arma3.cpp:(.text$_ZN4arma10op_diagvec5applyINS_2OpINS_4GlueINS2_INS_3MatIdEENS_9op_htransEEES5_NS_10glue_timesEEENS_6op_invEEEEEvRNS4_INT_9elem_typeEEERKNS2_ISC_S0_EE[_ZN4arma10op_diagvec5applyINS_2OpINS_4GlueINS2_INS_3MatIdEENS_9op_htransEEES5_NS_10glue_timesEEENS_6op_invEEEEEvRNS4_INT_9elem_typeEEERKNS2_ISC_S0_EE]+0x2c1): undefined reference to `dgetrf_'
test_arma3.o:test_arma3.cpp:(.text$_ZN4arma10op_diagvec5applyINS_2OpINS_4GlueINS2_INS_3MatIdEENS_9op_htransEEES5_NS_10glue_timesEEENS_6op_invEEEEEvRNS4_INT_9elem_typeEEERKNS2_ISC_S0_EE[_ZN4arma10op_diagvec5applyINS_2OpINS_4GlueINS2_INS_3MatIdEENS_9op_htransEEES5_NS_10glue_timesEEENS_6op_invEEEEEvRNS4_INT_9elem_typeEEERKNS2_ISC_S0_EE]+0x322): undefined reference to `dgetri_'
test_arma3.o:test_arma3.cpp:(.text$_ZN4arma10op_diagvec5applyINS_2OpINS_4GlueINS2_INS_3MatIdEENS_9op_htransEEES5_NS_10glue_timesEEENS_6op_invEEEEEvRNS4_INT_9elem_typeEEERKNS2_ISC_S0_EE[_ZN4arma10op_diagvec5applyINS_2OpINS_4GlueINS2_INS_3MatIdEENS_9op_htransEEES5_NS_10glue_timesEEENS_6op_invEEEEEvRNS4_INT_9elem_typeEEERKNS2_ISC_S0_EE]+0x398): undefined reference to `dgetri_'
test_arma3.o:test_arma3.cpp:(.text$_ZN4arma10op_diagvec5applyINS_2OpINS_4GlueINS2_INS_3MatIdEENS_9op_htransEEES5_NS_10glue_timesEEENS_6op_invEEEEEvRNS4_INT_9elem_typeEEERKNS2_ISC_S0_EE[_ZN4arma10op_diagvec5applyINS_2OpINS_4GlueINS2_INS_3MatIdEENS_9op_htransEEES5_NS_10glue_timesEEENS_6op_invEEEEEvRNS4_INT_9elem_typeEEERKNS2_ISC_S0_EE]+0x775): undefined reference to `dgetrf_'
test_arma3.o:test_arma3.cpp:(.text$_ZN4arma10op_diagvec5applyINS_2OpINS_4GlueINS2_INS_3MatIdEENS_9op_htransEEES5_NS_10glue_timesEEENS_6op_invEEEEEvRNS4_INT_9elem_typeEEERKNS2_ISC_S0_EE[_ZN4arma10op_diagvec5applyINS_2OpINS_4GlueINS2_INS_3MatIdEENS_9op_htransEEES5_NS_10glue_timesEEENS_6op_invEEEEEvRNS4_INT_9elem_typeEEERKNS2_ISC_S0_EE]+0x7d6): undefined reference to `dgetri_'
test_arma3.o:test_arma3.cpp:(.text$_ZN4arma10op_diagvec5applyINS_2OpINS_4GlueINS2_INS_3MatIdEENS_9op_htransEEES5_NS_10glue_timesEEENS_6op_invEEEEEvRNS4_INT_9elem_typeEEERKNS2_ISC_S0_EE[_ZN4arma10op_diagvec5applyINS_2OpINS_4GlueINS2_INS_3MatIdEENS_9op_htransEEES5_NS_10glue_timesEEENS_6op_invEEEEEvRNS4_INT_9elem_typeEEERKNS2_ISC_S0_EE]+0x892): undefined reference to `dgetri_'
collect2: ld returned 1 exit status
ERROR: compilation failed for package 'NewPackage'
* removing 'C:/Users/Howard/Documents/R/win-library/2.15/NewPackage'
* restoring previous 'C:/Users/Howard/Documents/R/win-library/2.15/NewPackage'

Exited with status 1. 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-02T17:01:28.457

我认为您已将其交叉发布到`rcpp-devel`列表中，并且现在应该 按照[此线程对其进行处理。](http://thread.gmane.org/gmane.comp.lang.r.rcpp/4457)

# python - 如何实现withdraw()？

> ID：13666274
> 
> 赞同：1
> 
> 时间：2012-12-02T03:58:43.710
> 
> 标签：python, tkinter

我正在尝试使用该`withdraw`方法，但它不起作用。这是我的代码：

```
from tkinter import *

class GameBoard(Frame):
  def __init__(self):
    top = Toplevel()
    Frame.__init__(self)
    self.master.title("test")
    self.grid()
    #button frame
    self.__buttonPane = Frame(self)
    self.__buttonPane.grid()
    #buttons
    self.__buttonA1 = Button(self.__buttonPane,text = "A1",command = self._hide)
    self.__buttonA1.grid()

  def _hide(self):
    top.withdraw()

def main():
  GameBoard().mainloop()

main() 
```

我将如何制作我的命令以隐藏顶层创建的窗口？我希望能够在主程序需要之前隐藏它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T13:18:42.567

当您运行代码时，您会收到一条错误消息。该错误消息告诉您什么？它应该有线索来了解问题所在。

错误是“NameError：未定义全局名称'top'”。所以你应该问自己的问题是“为什么程序认为‘top’是全局的，为什么没有定义？”。

查看您的代码，我可以看到您正在使用一个名为“top”的*局部*变量来存储对窗口的引用。您需要将其声明为全局或将其声明为类的属性。后者是正确的方法。

为此，只需更改`top`代码中`self.top`的任何位置。

```
self.top = Toplevel()
...
self.top.withdraw() 
```

# parsing - MATLAB：从文件中解析文本，并转换为数学集

> ID：13666276
> 
> 赞同：0
> 
> 时间：2012-12-02T03:58:51.767
> 
> 标签：parsing, matlab

.txt 以我不关心的可变长度字符串开始每一行，然后是空格分隔的 ID：

```
somegarbage 34532 2034 203 4 30403

garbage 2 45 2342 23 33503434
garbagethird 2 
```

第 2 行和第 3 行是空的。

数据文件的一行上的所有 ID 应该是

1.  推入一个数学集合（即{.}，其中元素的顺序无关紧要）
2.  分配给 V[行号]。

读入后的示例查询：

```
V[5]
  -> {2}
V[2]
  -> {} 
```

我需要什么函数和数据结构？

如果 MATLAB 没有***设置***的数据结构，是否有任何接近的东西，或者我必须求助于二​​维数组？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T13:17:34.517

有两个函数非常适合此目的：[`textread`](http://www.mathworks.com/help/matlab/ref/textread.html)和[`textscan`](http://www.mathworks.com/help/matlab/ref/textscan.htm). 它们都接收一个格式字符串，该字符串指定输入文本文件的每一行中的参数模式。

### 解决方案`textread`：

`textread`需要输出变量的数量与每行中读取的参数数量相匹配，因此您可以按照以下方式执行操作：

```
[col1, col2, col3, col4, col5, col6] = textread('myfile.txt', '%s %d %d %d %d');
V = [col2, col3, col4, col5, col6] 
```

这产生：

```
V =
    34532        2034         203           4         30403
        2          45        2342          23      33503434 
```

本质上，您拥有的是一个*矩阵*（*即*数组的数组），其中每一行对应于输入文本文件中的一行。要访问这样的行之一，您只需执行以下操作`V(row_index, :)`，例如：

```
V(1, :) =
    34532        2034         203           4         30403 
```

### 解决方案`textscan`：

`textscan`需要手动打开文件。它返回一个元胞数组（它实际上是一种特殊类型的数组，可以在同一个集合中保存多种类型的变量，例如带有数字的字符串）。为了获得与 相同的矩阵`textread`，我们使用逗号分隔的列表和简单的连接，如下所示：

```
fid = fopen('myfile.txt');
C = textscan(fid, '%s %d %d %d %d %d')
V = [C{2:6}]
fclose(fid); 
```

现在`V`应该包含与第一个示例相同的元素。

如果解析参数的数量未知，最好将整行读取为一个完整的字符串，然后使用以下代码进行解析[`regexp`](http://www.mathworks.com/help/matlab/ref/regexp.html)：

```
fid = fopen('myfile.txt');
C = textscan(fid, '%s', 'Delimiter', '');
V = C{1};
for i = 1:numel(V)
    V{i} = cellfun(@str2num, regexp(V{i}, '\d*', 'match'));
end
fclose(fid); 
```

在这种情况下，输出`V`将是一个[元胞数组](http://www.mathworks.com/help/matlab/cell-arrays.html)（因为矩阵需要每个元素的数量是固定的）。元胞数组中的每个元胞将是一个数字数组（*即*向量），可能具有不同的长度。对于您的示例，结果将是一个 3×1 元胞数组（忽略空行）：

```
V = 
    [34532        2034         203           4       30403]
    [    2          45        2342          23    33503434]
    [    2] 
```

在这里，您可以使用花括号 ( `{}`) 访问每行的元素，例如`V{2}`：

```
ans =
    [    2          45        2342          23    33503434] 
```

忠告：格式模式和正则表达式极大地简化了字符串解析，并且通常在 MATLAB 中优于使用循环遍历标记的直接方法`for`。它还使解决方案更加优雅，并且不那么繁琐。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-02T05:35:51.283

根据您打算如何处理数据，这可能是方法：

```
V=importdata('A.txt')
V = 

      data: [2x6 double]
  textdata: {2x1 cell}
rowheaders: {2x1 cell} 
```

V 将是一个结构，其字段数据将包含您所有的“ID”。然后你可以使用`V.data(linenumber,:)`来获取你想要弄乱的行。

```
V.data(1,:)
ans =

   34532        2034         203           4       30403        3333 
```

并且行的长度可以不等：

```
V.data(2,:)

ans =

       2          45        2342          23    33503434         NaN 
```

改进的解决方案：

```
fid = fopen('A.txt');
tline = fgets(fid);
counter=1;
while ischar(tline)
v{counter} = strread(char(tline),'%s','delimiter',' ');
if ~isempty(v{counter})
    v{counter}=v{counter}(2:end);
else
    v{counter}={};
end
tline = fgets(fid);
V{counter}=cellfun(@str2double, v{counter}');
counter=counter+1;
end
fclose(fid); 
```

此解决方案保留空行：

```
V{1}

ans =

   34532        2034         203           4       30403

V{2}

ans =

 [] 
```

# perl - 如何用 Perl 的正则表达式用 , 后面的数字字符替换 , 后面的数字字符？

> ID：13666285
> 
> 赞同：0
> 
> 时间：2012-12-02T04:00:27.843
> 
> 标签：perl

任何人都知道如何使用正则表达式将“,/d”替换为数字“/d”？我尝试使用 /d 但它不起作用...它将替换 , 后跟带有字母字符“d”的任何数字。

提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-02T04:22:57.013

您捕获要保留的内容并在替换中使用它：

```
s/,(\d)/$1/; 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-02T05:04:56.170

[只需使用前瞻](http://perldoc.perl.org/perlre.html#Look-Around-Assertions)删除数字前面的任何逗号：

```
s/,(?=\d)// 
```

如果您尝试过`s/,\d/\d/`，Perl 会将替换视为双引号字符串。由于没有转义码`\d`，反斜杠被简单地忽略并`d`使用。

如果您想用匹配的一部分替换匹配，则必须使用捕获（请参阅 ysth 的答案）。

我上面的替换不包括匹配字符串中的数字，因此只是用空字符串替换逗号（即删除它），但仍然断言逗号后跟一个数字。

# wordpress - 从子主题中删除管理菜单项

> ID：13666286
> 
> 赞同：0
> 
> 时间：2012-12-02T04:00:33.383
> 
> 标签：wordpress, custom-post-type

父主题注册了一个名为risen_event 的自定义帖子类型。我决定使用另一个日历插件，因此想从用户那里删除这个管理菜单项。

在子主题中，我尝试了此功能，但没有用

```
if ( ! function_exists( 'unregister_post_type' ) ) :
function unregister_post_type( $post_type ) {
    global $wp_post_types;
    if ( isset( $wp_post_types[ $post_type ] ) ) {
        unset( $wp_post_types[ $post_type ] );
        return true;
    }
    return false;
}
endif; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-02T23:25:19.510

如果您只想隐藏管理菜单项，请将其放入您的子主题的 functions.php 文件中：

```
function hide_menu_items() {
    remove_menu_page( 'edit.php?post_type=your_post_type_url' );
}
add_action( 'admin_menu', 'hide_menu_items' ); 
```

将鼠标悬停在管理菜单项上并查看 URL 以获取正确的用于该功能的菜单项。这不会取消注册帖子类型，只是隐藏管理菜单项。这样可以保留帖子类型，以防您决定将来要使用它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T00:51:59.920

从您发布的代码来看，您似乎没有调用该函数。

但是调用不能是直接的，你必须将它包装在一个动作中，比如：

```
add_action( 'init', 'so_13666286_init', 11 );

function so_13666286_init()
{
    unregister_post_type( 'risen_event' );
} 
```

或使用其他技术：

```
add_action( 'after_setup_theme','so_13666286_remove_action', 100 );

function so_13666286_remove_action() 
{   
    remove_action( 'init', 'the_init_function_that_creates_the_cpt' );    
} 
```

^(*参考：[取消注册自定义帖子类型](https://wordpress.stackexchange.com/q/3820/12615)。*)

# javascript - javascript中有没有办法让我检查元素id是否与字符串匹配？

> ID：13666288
> 
> 赞同：0
> 
> 时间：2012-12-02T04:00:37.410
> 
> 标签：javascript, jquery

我编写了以下代码：

```
var btnID = $link.attr('id');
var cityNumber = btnID.substring(4);
$('#cityLegend-1').html('City ' + cityNumber); 
```

但是，仅当 btnID 以“btn-”开头时，我才需要这样做来执行最后两行。有没有办法检查这种情况是否发生，然后如果 id 类似于“btn-1”或“btn-999”，那么执行最后两行？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-02T04:02:26.647

您可以使用[**`.eq(-index)`**](http://api.jquery.com/eq/), 从集合中的最后一个元素向后传递索引。

**[现场演示](http://jsfiddle.net/hbn8t/1/)**

```
$('[id^=cityLegend-]').eq(-1) for last
$('[id^=cityLegend-]').eq(-2) for second last 
```

编辑，您可以使用 split 而不是 substring 来获取连字符后的数字。

```
var btnID = $link.attr('id');
var cityNumber = btnID.spilt('-')[1]; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-02T04:02:43.680

```
/** .substring() does a length check internally **/
if (btnId.substring(0,3) == "btn") { 
    // do stuff
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-02T04:26:54.933

这么多选择。这也将起作用：

```
var btnID = $(link).attr('id');
if(btnID.substr(0,4) == 'btn-'){
    var cityNumber = btnID.substring(4);
    $('#cityLegend-1').text('City ' + cityNumber);
}else{
    $('#cityLegend-1').text('City ' + btnID);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-02T04:36:13.243

您可以只使用[.match()](http://www.w3schools.com/jsref/jsref_match.asp)方法并使用正则表达式检查起始“id”是否以`btn`.

```
if (btnID.match(/^btn/g)) {
     //do stuff
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-02T04:56:08.623

我不确定您的代码有多灵活，但我通常会以不同的方式处理类似的设置。我会做以下事情（这对你来说可能也可能不可能）：

*   与其在 中搜索以某个字符串开头的元素，不如对您可能感兴趣的所有按钮`id`使用特定的。这样，您可以使用 jQuery 选择器，例如`class``$('.mySpecialBtn')`
*   与其在 an 的末尾附加一个整数`id`然后解析它，为什么不直接使用一个`data`属性来包含 id，即`data-my-button-id="1"`？

所以把这两个部分放在一起，你可以有这样的东西：

HTML：

```
<button class="mySpecialBtn" data-my-button-id="1">Button 1</button>
<button class="mySpecialBtn" data-my-button-id="2">Button 2</button>
<button class="mySpecialBtn" data-my-button-id="3">Button 3</button> 
```

JS：

```
$('mySpecialBtn').each(function() {
    var btnId = $(this).data("my-button-id"));
    // do something with btnId
}); 
```

# c++ - 在向量中访问类中的向量

> ID：13666289
> 
> 赞同：1
> 
> 时间：2012-12-02T04:00:51.670
> 
> 标签：c++, class, vector

我觉得好像我正在以正确的方式进行此操作，但我不断收到错误“EXC BAD ACCESS”

我有一堂课`person`，相当简单，一切都是公开的。

```
class person
{
    public:
    int id;
    vector<float> scores;
    float avgscore;
}; 
```

`person`然后我使用 new 运算符制作 s 的向量

```
vector<person> *people = new vector<person>[num_persons]; 
```

然后我尝试访问类内的向量`person`

```
(*people)[current_person].scores.push_back(temp); 
```

其中`current_person`=0，并且`temp`是一个整数。

我是否以正确的方式处理向量？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-02T04:17:45.953

尝试这个：

```
vector<person> people(num_persons); 
```

接着...

```
people[current_person].scores.push_back(temp); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-02T04:47:25.700

这条线

```
vector<person> *people = new vector<person>[num_persons]; 
```

新向量仅创建一个向量，但它包含 0 个元素，访问`(*people)[0]`是未定义的行为，您的错误消息`EXC BAD ACCESS`讲述了这个故事。您仍然需要向访问它的人添加 person 元素，例如

```
person p1;
people->push_back(p1);  // add element to vector
(*people)[0].scores.push_back(temp); // now you are ok to visit first element.
// don't forget to delete vector at right place
delete people; 
```

由于您已经在使用向量，您可以继续使用向量来代替原始指针。

```
std::vector<person> people;
person p1;

people.push_back(person);
people[position].scores.pus_back(score);
// don't need to worry releasing people memory anymore. 
```

# xmpp - 状态，显示存在探针中的元素

> ID：13666291
> 
> 赞同：0
> 
> 时间：2012-12-02T04:00:58.147
> 
> 标签：xmpp

如果我在存在探测中发送“状态”、“显示”或“优先级”元素集会发生什么？XMPP 服务器如何处理这个问题？我在 RFC（3921[1]、6121[2]）中没有看到任何关于这个特殊情况的内容。

这个实现是特定的吗？或者服务器是否应该将此视为真正的状态/显示更新以及对联系人的存在探测并更改用户的状态/显示？

我是否错过了阅读 RFC 中的某些部分？

谢谢！

[1] [http://xmpp.org/rfcs/rfc3921.html](http://xmpp.org/rfcs/rfc3921.html)

[2] [http://xmpp.org/rfcs/rfc6121.html](http://xmpp.org/rfcs/rfc6121.html)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T02:06:52.807

在没有任何其他指导的情况下，[RFC 6120 的第 8.4](http://xmpp.org/rfcs/rfc6120.html#stanzas-extended)节说：

> 如果预期的接收者接收到一个消息或存在节，其中包含由它不理解的名称空间限定的 XML 数据，那么它必须忽略由未知名称空间限定的节部分。

在我所知道的所有实现中，接收服务器都会忽略探针内的所有内容，其中“忽略”在[RFC 6120 第 1.4 节](http://xmpp.org/rfcs/rfc6120.html#intro-terms)中定义为：

> 丢弃数据而不对其进行操作或向发送者返回错误

# xslt-2.0 - 测试是否有超过 1 个具有相同属性的节点 XSLT

> ID：13666293
> 
> 赞同：1
> 
> 时间：2012-12-02T04:02:06.303
> 
> 标签：xslt-2.0

**XML 示例：**

```
 <course>
        <department code="VES">
            <dept_short_name>Visual and Environmental Studies</dept_short_name>
        </department>
        <course_group code="course_group1">Course Group 1</course_group>
        <title>Critical Media Practice: Non Fiction Filmmaking Workshop</title> 
    </course>

    <course>
        <department code="MAT">
            <dept_short_name>Mathematics</dept_short_name>
        </department>
        <course_group code="course_group1">Course Group 1</course_group>
        <title>Critical Media Practice: Non Fiction Filmmaking Workshop</title> 
    </course>

    <course>
        <department code="VES">
            <dept_short_name>Visual and Environmental Studies</dept_short_name>
        </department>
        <course_group code="course_group2">Course Group 2</course_group>
        <title>Critical Media Practice: Non Fiction Filmmaking Workshop</title> 
    </course>
    <course>
        <department code="VES">
            <dept_short_name>Visual and Environmental Studies</dept_short_name>
        </department>
        <course_group code="course_group1">Course Group 1</course_group>
        <title>Critical Media Practice: Non Fiction Filmmaking Workshop</title> 
    </course> 
```

**我想做什么**

如您所见，部门@code 和 course_group @code 可能因每门课程而异。我只想选择部门代码=“VES”的课程，如果他们有多个不同的 course_group 调用模板

**尝试了此代码但它不起作用** 请注意，我有一个参数调用 $department 它已经传递了“VES”值。这个参数正在工作，我在其他地方使用它没有问题。我尝试了以下代码，但它多次调用模板，如果条件为真，我只需要调用一次模板。

```
<xsl:for-each-group select="course[$department = department/@code]" group-by="course_group[@code]">
            <xsl:if test="count(current-group()) > 1">
                <xsl:call-template name="anchors"/>
            </xsl:if>

</xsl:for-each-group> 
```

感谢您的任何建议

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T23:18:52.993

> 我只想选择部门的那些课程，`code = "VES"` 如果他们有多个不同的课程，`course_group`请调用模板

**这种转变**：

```
<xsl:stylesheet version="2.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>

 <xsl:template match="/">
   <xsl:if test="
   distinct-values(/*/course[department
                       [@code eq 'VES']]
                           /course_group/@code
                   )[2]">
     <xsl:call-template name="myTemplate"/>
   </xsl:if>
 </xsl:template>

 <xsl:template name="myTemplate">
   myTemplate is called !
 </xsl:template>
</xsl:stylesheet> 
```

**应用于提供的 XML 文档时：**

```
<t>
    <course>
        <department code="VES">
            <dept_short_name>Visual and Environmental Studies</dept_short_name>
        </department>
        <course_group code="course_group1">Course Group 1</course_group>
        <title>Critical Media Practice: Non Fiction Filmmaking Workshop</title>
    </course>
    <course>
        <department code="MAT">
            <dept_short_name>Mathematics</dept_short_name>
        </department>
        <course_group code="course_group1">Course Group 1</course_group>
        <title>Critical Media Practice: Non Fiction Filmmaking Workshop</title>
    </course>
    <course>
        <department code="VES">
            <dept_short_name>Visual and Environmental Studies</dept_short_name>
        </department>
        <course_group code="course_group2">Course Group 2</course_group>
        <title>Critical Media Practice: Non Fiction Filmmaking Workshop</title>
    </course>
    <course>
        <department code="VES">
            <dept_short_name>Visual and Environmental Studies</dept_short_name>
        </department>
        <course_group code="course_group1">Course Group 1</course_group>
        <title>Critical Media Practice: Non Fiction Filmmaking Workshop</title>
    </course>
</t> 
```

**产生了想要的正确结果**：

```
 myTemplate is called ! 
```

**如果现在我们只是改变**：

```
 <course_group code="course_group2">Course Group 2</course_group> 
```

**至**：

```
 <course_group code="course_group1">Course Group 1</course_group> 
```

**然后转换的结果是空的——完全符合要求**。

# r - 为什么使用数字键的子集不适用于 data.table

> ID：13666298
> 
> 赞同：13
> 
> 时间：2012-12-02T04:02:32.903
> 
> 标签：r, data.table

我有一个包含两个数字行的表，其中一个设置为键。我想`data.table`按数字键值对我的子集进行分组，但它似乎不起作用。当我将其转换为字符时，它可以工作。

你能帮我理解为什么会这样吗？我正在使用 data.table 1.8.6。

谢谢一堆。这是测试代码：

```
> ID <-c(rep(210, 9), rep(3917,6))
> Count <- c(1,1,0,1,1,1,1,1,1,1,1,1,1,0,1)
> x <- data.table(ID, Count)
> 
> # numeric key doesn't work with i argument
> setkey(ID)
 [1]  210  210  210  210  210  210  210  210  210 3917 3917 3917 3917 3917 3917
> x[210,list(ID, Count)]
   ID Count
1: NA    NA
> 
> # create character key
> x$charID <- as.character(x$ID)
> setkey(x, charID)
> x["210",list(ID, Count)]
   charID  ID Count
1:    210 210     1
2:    210 210     1
3:    210 210     0
4:    210 210     1
5:    210 210     1
6:    210 210     1
7:    210 210     1
8:    210 210     1
9:    210 210     1 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-12-02T05:06:30.273

您需要在 data.table 中发送数字键。这很容易使用`J`. 或在列表中

请注意，您需要在设置密钥时指定 data.table，例如

```
setkey(x, ID)
x[J(210)]
    ID Count
1: 210     1
2: 210     1
3: 210     0
4: 210     1
5: 210     1
6: 210     1
7: 210     1
8: 210     1
9: 210     1 
```

或者

```
x[list(210)]
    ID Count
1: 210     1
2: 210     1
3: 210     0
4: 210     1
5: 210     1
6: 210     1
7: 210     1
8: 210     1
9: 210     1 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-02T04:26:03.683

当您询问 R 时，`x[210, ]`它正在寻找`x`.
如果`x`有 210 多行，它将返回该值（尽管不是您想要的行）。由于没有第 210 行，它给你 NA。

当您改为要求时`x['210', ]`，它正在寻找`x`标签中的行`'210'`

* * *

试试这个看看差异：

```
 vec <- LETTERS[1:9]
 names(vec) <- c(11:18, 1) 
```

现在比较：

```
 vec[[11]]
 vec[['11']]

 vec[[1]]
 vec[['1']] 
```

# xcode - 设置 xcode4.5 以引用其他 dylib

> ID：13666301
> 
> 赞同：2
> 
> 时间：2012-12-02T04:03:11.313
> 
> 标签：xcode, dylib

我是 xcode IDE 的新手，很难引用 dylib。

我试图通过链接到 libmwmclmrt.7.16.dylib 来调用 Matlab 运行时初始化函数，我在 Build Phases->Link Binary with Libraries 中添加了它还添加了包含 dylibs */Applications/MATLAB/MATLAB_Compiler_Runtime/v716/bin/ 的目录maci64* 到

运行路径搜索路径框架搜索路径库搜索路径

在项目和目标构建设置中。

编译成功，但是当我运行调用函数 mclInitializeApplication() 的程序时，出现以下错误

“尝试初始化 MCR 时发生错误。
错误是：加载库 /usr/local/lib/libmx.dylib 的致命错误错误：dlopen(/usr/local/lib/libmx.dylib, 9): Library not加载：**libtbb.dylib** 引用自：**/Applications/MATLAB/MATLAB_Compiler_Runtime/v716/bin/maci64/libut.dylib** 原因：找不到图像

我了解到 otool 可以提供有关 dylib 的信息，并且我验证 libmx.dylib 正在引用 /Applications/MATLAB/MATLAB_Compiler_Runtime/v716/bin/maci64/ 中的各种其他 dylib

```
> otool -L libmx.dylib 
libmx.dylib:
    @rpath/libmx.dylib (compatibility version 0.0.0, current version 0.0.0)
    @rpath/libmwresource_core.dylib (compatibility version 0.0.0, current version 0.0.0)
    @rpath/libmwi18n.dylib (compatibility version 0.0.0, current version 0.0.0)
    @rpath/libut.dylib (compatibility version 0.0.0, current version 0.0.0)
    @rpath/libmwfl.dylib (compatibility version 0.0.0, current version 0.0.0)
    @rpath/libmwMATLAB_res.dylib (compatibility version 0.0.0, current version 0.0.0)
    @rpath/libboost_date_time.dylib (compatibility version 0.0.0, current version 0.0.0)
    @rpath/libboost_system.dylib (compatibility version 0.0.0, current version 0.0.0)
    @rpath/libboost_thread.dylib (compatibility version 0.0.0, current version 0.0.0)
    @rpath/libicudata.44.dylib (compatibility version 44.0.0, current version 44.2.0)
    @rpath/libicuuc.44.dylib (compatibility version 44.0.0, current version 44.2.0)
    @rpath/libicui18n.44.dylib (compatibility version 44.0.0, current version 44.2.0)
    @rpath/libicuio.44.dylib (compatibility version 44.0.0, current version 44.2.0)
    /usr/lib/libz.1.dylib (compatibility version 1.0.0, current version 1.2.3)
    /usr/lib/libstdc++.6.dylib (compatibility version 7.0.0, current version 7.9.0)
    /usr/lib/libSystem.B.dylib (compatibility version 1.0.0, current version 123.0.0) 
```

我在预期的位置有所有必需的 dylib，为什么我仍然无法参考，找不到图像错误

```
$ pwd
/Applications/MATLAB/MATLAB_Compiler_Runtime/v716/bin/maci64
$ ls -lrt libtbb.dylib 
-r-xr-xr-x  1 bakkiraju  admin  487912 Jul  8  2011 libtbb.dylib

$ ls -lrt libu
libuij.dylib  libut.dylib   

$ ls -lrt libut.dylib 
-r-xr-xr-x  1 bakkiraju  admin  1217088 Jul 26  2011 libut.dylib 
```

将这些文件复制到 /usr/local/lib 会使错误消失。如何配置 xcode 以便对这些所需的 dylib 的引用开始正常工作。我不想将它们复制到 /usr/local/lib

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-04-21T20:41:49.873

部分答案：在构建设置下，除了将库路径添加到**Build Settings>Linking>Runpath Search Path 之外**，您还必须将相同的路径添加到**Build Settings>Search Paths>Library Search Paths**。

我刚开始使用 XCode 并与库（尤其是 MATLAB 库）链接并不简单（尽管在我看来，一旦掌握了它，它比编写 Makefile 容易得多）。我在 MATLAB 留言板上写了一个快速教程：http: [//www.mathworks.com/matlabcentral/answers/31073-tutorial-for-libmat-under-xcode-4-2](http://www.mathworks.com/matlabcentral/answers/31073-tutorial-for-libmat-under-xcode-4-2)

# javascript - javascript“结束”事件侦听器的Flash后备？

> ID：13666310
> 
> 赞同：2
> 
> 时间：2012-12-02T04:05:10.543
> 
> 标签：javascript, flash, html5-video, fallback

我正在使用此脚本加载用户在前一页的表单上选择的一系列视频......它使用`<video>`标签加载视频数组，我想知道提供基于 Flash 的最佳方法是什么后备方案是——仅仅是浏览器检测和加载一个完全基于 Flash 的脚本替代方案，还是有更简单的方法来修改现有脚本？

```
function getUrlVars() {
    var vars = {};
    var parts = window.location.href.replace(/[?&]+([^=&]+)=([^&]*)/gi, function(m,key,value) {
        vars[key] = value;
    });
    return vars;
}

   function myEndedListener(){
      var myVideo = document.getElementsByTagName('video')[0];
      myVideo.addEventListener('ended',myNewSrc,false);
   }

   var position = 0;
   var videoList=new Array('one.mp4', 'two.mp4', 'three.mp4');

   function myNewSrc() {
      var myVideo = document.getElementsByTagName('video')[0];
      if(++position >= videoList.length) {
         position = 0;
      }
      myVideo.src=videoList[position];
      myVideo.load();
      myVideo.play();
   } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T10:20:14.903

尝试使用 Event.COMPLETE 事件............`myVideo.addEventListener(Event.COMPLETE,myNewSrc,false);`

# php - 防止在没有父元素的情况下加载 ajax 元素

> ID：13666311
> 
> 赞同：0
> 
> 时间：2012-12-02T04:05:10.687
> 
> 标签：php, ajax

如何防止通常通过 ajax 加载的页面自行加载？例如，如果在 main.php 中，您通过 ajax "cart.php" 加载并将其解析为本地 div。当用户尝试直接加载cart.php时，是否有可能将用户重定向到main.php？

--comment: javascript 不是一个选项

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T04:20:55.470

您可以检测页面是否通过 ajax 加载，如下所示：

```
 if(strtolower($_SERVER['HTTP_X_REQUESTED_WITH']) != 'xmlhttprequest') {
      /* special ajax here */
      header("Location: http://www.example.com/main.php");
    } 
```

# c++ - 关于的几个问题 C++ 11 中的标头

> ID：13666320
> 
> 赞同：10
> 
> 时间：2012-12-02T04:07:26.357
> 
> 标签：c++, stl, c++11, chrono

`<chrono>`我对C++ 11 中的新标头有几个问题。使用 Windows 7、Visual Studio 2012。

查看示例[http://en.cppreference.com/w/cpp/chrono](http://en.cppreference.com/w/cpp/chrono)

```
#include <iostream>
#include <chrono>
#include <ctime>

int fibonacci(int n)
{
    if (n < 3) return 1;
    return fibonacci(n-1) + fibonacci(n-2);
}

int main()
{
    std::chrono::time_point<std::chrono::system_clock> start, end;
    start = std::chrono::system_clock::now();
    int result = fibonacci(42);
    end = std::chrono::system_clock::now();

    int elapsed_seconds = std::chrono::duration_cast<std::chrono::seconds>
                             (end-start).count();
    std::time_t end_time = std::chrono::system_clock::to_time_t(end);

    std::cout << "finished computation at " << std::ctime(&end_time)
              << "elapsed time: " << elapsed_seconds << "s\n";
} 
```

可能的输出

```
finished computation at Sat Jun 16 20:42:57 2012
elapsed time: 3s 
```

1.  我注意到示例使用`std::chrono::system_clock::now();`是否意味着它只能用于测量经过的时间而不是 CPU 时间？？？如果我想测量 CPU 时间，我应该使用什么时钟？
2.  请注意，`elapsed time: 3s`输出四舍五入为整数。有没有办法让它更颗粒化？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-12-02T05:37:37.547

1.  正确的

    根据标准：

    > system_clock 表示来自系统范围实时时钟的 [s] 挂钟时间。

    该`<chrono>`库不提供测量 CPU 时间的机制，因此，如果您希望这样做，您将不得不依赖旧`<ctime>`库并使用`std::clock()`.

    （如果你的目标是 Windows，你将不得不依赖 Windows 提供的任何特定于平台的 API 来获取 CPU 时间，因为正如你所指出的，它们`std::clock()`不能正常工作。）

    `system_clock`更像是 to`std::time()`而不是 to的对应物`std::clock()`。（例如，请注意`system_clock`提供`system_clock::time_point`s 和. 之间的转换`time_t`。）我认为缺少`<chrono>`用于测量 CPU 时间的时钟是由于标准委员会的时间限制以及该功能比系统的挂钟和真实时钟使用更少的事实-时钟。

    如果您想要 CPU 时间但也想要`<chrono>`提供的好处，您应该实现符合标准中概述的时钟概念并提供 CPU 时间的时钟类型，可能在内部使用`std::clock()`.

2.  说的那一行

    > ```
    > int elapsed_seconds = std::chrono::duration_cast<std::chrono::seconds>
    >                     (end-start).count(); 
    > ```

    是导致时间四舍五入到整数秒的原因。您可以选择任何您想要的时间段，或者您可以使用浮点表示来允许非整数值：

    ```
    std::int64_t elapsed_attoseconds =
        std::chrono::duration_cast<std::chrono::duration<std::int64_t, std::atto>>
            (end-start).count();

    double elapsed_seconds =
        std::chrono::duration_cast<std::chrono::duration<double,std::ratio<1>>>
            (end-start).count(); 
    ```

    请注意，在实际代码中，您应该避免使用`.count()`来逃避由提供的强类型，`chrono::duration`直到您绝对必须。

    ```
    auto total_duration = end - start;
    auto seconds = std::chrono::duration_cast<std::chrono::seconds>(total_duration);
    auto milli = std::chrono::duration_cast<std::chrono::milliseconds>(total_duration - seconds);

    std::cout << seconds.count() << "s " << milli.count() << "ms\n"; 
    ```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-02T04:21:05.050

1）我相当确定您可以获得的最高分辨率是使用`std::chrono::high_resolution_clock`然后不进行任何持续时间投射：

```
int elapsed_ticks = (end-start).count(); 
```

2) 将 duration_cast 的参数更改为`nanoseconds`：

```
int elapsed_seconds = std::chrono::duration_cast<std::chrono::nanoseconds>
                             (end-start).count(); 
```

# java - Hibernate.initialize() 被完全忽略

> ID：13666325
> 
> 赞同：1
> 
> 时间：2012-12-02T04:09:19.400
> 
> 标签：java, hibernate, lazy-loading

我有一个带有一些延迟加载属性的实体，我正在尝试为一种特定方法初始化这些属性（大多数情况下，加载这些属性太昂贵，因此无法将它们设置为 EAGER）。

其中一个属性是一个集合，它在调用 Hibernate.initialize() 时可以很好地加载。另一个是单个对象，无论我尝试什么都不会加载。我什至无法查询它，因为对象的 id 本身不可用，即使在同一个会话期间也不可用。

调用 initialize() 时我没有遇到任何异常，只是被忽略了。当在集合上而不是在单个对象上调用 this 时，日志会显示相应的查询。非常感谢有关加载此属性（设备）的任何帮助。这是代码：

**编辑** 原来我在数据库中有一个丢失的外键。一旦我纠正了这个问题，获取查询就会出现在控制台上，但是，在 initialize() 完成后，Device 对象仍然是一个代理。我通过这样做想出了一个解决方法：

```
Device device = new Device();
        device.setIdDevice(surveyLog.getDevice().getIdDevice());
        device.setName(surveyLog.getDevice().getName());
        surveyLog.setDevice(device); 
```

如果我将属性复制到另一个对象，则可以在方法之外访问它们，否则该对象仍然是代理。知道是什么原因造成的吗？谢谢

```
@Transactional    
public SurveyLog getById(Long id)
{
    SurveyLog surveyLog = this.surveyLogDAO.findById(id);

    Hibernate.initialize(surveyLog.getDevice()); //doesn't work 
    Hibernate.initialize(surveyLog.getSurveyAnswers()); //works like a charm
    return surveyLog;
} 
```

这些是我的映射：

```
import static javax.persistence.GenerationType.IDENTITY;

import java.math.BigDecimal;
import java.sql.Timestamp;
import java.util.ArrayList;
import java.util.List;

import javax.persistence.Column;
import javax.persistence.Entity;
import javax.persistence.FetchType;
import javax.persistence.GeneratedValue;
import javax.persistence.Id;
import javax.persistence.JoinColumn;
import javax.persistence.ManyToOne;
import javax.persistence.OneToMany;
import javax.persistence.Table;

import org.hibernate.annotations.Cascade;
import org.hibernate.annotations.CascadeType;
import org.hibernate.annotations.Fetch;
import org.hibernate.annotations.FetchMode;

import com.google.gson.annotations.Expose;

@Entity
@Table(name="SurveyLog")
public class SurveyLog
{
    // Fields    
    @Expose private Long idSurveyLog;
    @Expose private Survey survey;
    @Expose private Device device;
    @Expose private BigDecimal latitude;
    @Expose private BigDecimal longitude;
    @Expose private Timestamp timestamp;
    @Expose private List<SurveyAnswerLog> surveyAnswers = new ArrayList<SurveyAnswerLog>();

    /**
     * Constructor.
     * 
     */
    public SurveyLog() {}

    // Property accessors
    @Id
    @GeneratedValue(strategy=IDENTITY)
    @Column(name="idSurveyLog", unique=true, nullable=false)
    public Long getIdSurveyLog()
    {
        return idSurveyLog;
    }

    public void setIdSurveyLog(Long idSurveyLog)
    {
        this.idSurveyLog = idSurveyLog;
    }

    @ManyToOne(fetch=FetchType.LAZY)
    @JoinColumn(name="idSurvey", nullable=false)
    public Survey getSurvey()
    {
        return survey;
    }

    public void setSurvey(Survey survey)
    {
        this.survey = survey;
    }

    @ManyToOne(fetch=FetchType.LAZY)
    @Fetch(value = FetchMode.SELECT)
    @JoinColumn(name="idDevice", nullable=false)    
    public Device getDevice()
    {
        return device;
    }

    public void setDevice(Device device)
    {
        this.device = device;
    }

    @Column(name="latitude", precision=8, scale=6)
    public BigDecimal getLatitude()
    {
        return latitude;
    }

    public void setLatitude(BigDecimal latitude)
    {
        this.latitude = latitude;
    }

    @Column(name="longitude", precision=9, scale=6)
    public BigDecimal getLongitude()
    {
        return longitude;
    }

    public void setLongitude(BigDecimal longitude)
    {
        this.longitude = longitude;
    }

    @Column(name="timestamp", length=19)
    public Timestamp getTimestamp()
    {
        return timestamp;
    }

    public void setTimestamp(Timestamp timestamp)
    {
        this.timestamp = timestamp;
    }

    @OneToMany(fetch=FetchType.LAZY, mappedBy="surveyLog")
    @Cascade({CascadeType.ALL, CascadeType.DELETE_ORPHAN})
    public List<SurveyAnswerLog> getSurveyAnswers()
    {
        return surveyAnswers;
    }

    public void setSurveyAnswers(List<SurveyAnswerLog> surveyAnswers)
    {
        this.surveyAnswers = surveyAnswers;
    }
}

import static javax.persistence.GenerationType.IDENTITY;

import java.util.EnumSet;
import java.util.HashMap;
import java.util.Map;

import javax.persistence.Column;
import javax.persistence.Entity;
import javax.persistence.FetchType;
import javax.persistence.GeneratedValue;
import javax.persistence.Id;
import javax.persistence.JoinColumn;
import javax.persistence.ManyToOne;
import javax.persistence.Table;
import javax.persistence.UniqueConstraint;
import javax.persistence.Version;

import com.google.gson.annotations.Expose;
import com.sitei.base.model.City;
import com.sitei.base.model.Company;

@Entity
@Table(name="Device", uniqueConstraints = @UniqueConstraint(columnNames = "macAddress"))
public class Device
{
    // Fields
    @Expose private Integer idDevice;
    @Expose private String macAddress;
    @Expose private String name;
    @Expose private String description;
    @Expose private Short type;
    @Expose private City city;
    @Expose private Company company;
    @Expose private Survey survey;
    @Expose private Integer surveyPoints;
    @Expose private boolean active;
    @Expose private Long version;

    /**
     * Constructor.
     * 
     */
    public Device() {}

    // Property accessors
    @Id
    @GeneratedValue(strategy=IDENTITY)
    @Column(name="idDevice", unique=true, nullable=false)
    public Integer getIdDevice()
    {
        return idDevice;
    }

    public void setIdDevice(Integer idDevice)
    {
        this.idDevice = idDevice;
    }

    @Column(name="macAddress", nullable=false, length=17)
    public String getMacAddress()
    {
        return macAddress;
    }

    public void setMacAddress(String macAddress)
    {
        this.macAddress = macAddress;
    }

    @Column(name="name", nullable=false, length=64)
    public String getName()
    {
        return name;
    }

    public void setName(String name)
    {
        this.name = name;
    }

    @Column(name="description", length=256)
    public String getDescription() 
    {
        return description;
    }

    public void setDescription(String description)
    {
        this.description = description;
    }

    @Column(name="type", nullable=false)
    public Short getType()
    {
        return type;
    }

    public void setType(Short type)
    {
        this.type = type;
    }

    @ManyToOne(fetch=FetchType.EAGER)
    @JoinColumn(name="idCity", nullable=false)
    public City getCity()
    {
        return city;
    }

    public void setCity(City city)
    {
        this.city = city;
    }

    @ManyToOne(fetch=FetchType.EAGER)
    @JoinColumn(name="idCompany")
    public Company getCompany()
    {
        return company;
    }

    public void setCompany(Company company)
    {
        this.company = company;
    }

    @ManyToOne(fetch=FetchType.EAGER)
    @JoinColumn(name="idSurvey")
    public Survey getSurvey()
    {
        return survey;
    }

    public void setSurvey(Survey survey)
    {
        this.survey = survey;
    }

    @Column(name="surveyPoints", nullable=false)
    public Integer getSurveyPoints()
    {
        return surveyPoints;
    }

    public void setSurveyPoints(Integer surveyPoints)
    {
        this.surveyPoints = surveyPoints;
    }

    @Column(name="active", nullable=false)
    public boolean isActive()
    {
        return active;
    }

    public void setActive(boolean active)
    {
        this.active = active;
    }

    @Version
    public Long getVersion()
    {
        return version;
    }

    public void setVersion(Long version)
    {
        this.version = version;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T07:17:08.917

显然您的代码已经可以工作，因为您可以访问代理上的字段“名称”。为什么需要将代理替换为底层对象？我在休眠文档中没有发现任何提示，初始化意味着将真实对象放在代理后面。

Hibernate 可能不会丢弃代理以保持对它的引用有效。您可以按照评论部分的链接中的说明从代理获取实现。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-11-08T14:27:44.717

示例 DAO 层

```
List<String> methodNames= new ArrayList();

methodNames.add("getScTeamUserses");

public T getByID(PK id, List<String> methodNames) {
    T object = null;
    Session sess = getSession();
    try {
        sess.beginTransaction();
        object = (T) sess.get(clazz, id);
        Class[] clazz = null;

        for (String methodName : methodNames) {
            Method method = object.getClass().getMethod(methodName, clazz);                
            Hibernate.initialize(method.invoke(object, clazz));
        }   

        sess.getTransaction().commit();
    } catch (Exception e) {
         logger.error("getByID id=" + id, e);
        try {               
            sess.getTransaction().rollback();
            throw e;
        } catch (Exception ex) {
            logger.error("getByID methodNames id=" + id, e);
        }
    } finally {
        closeSession(sess);
    }
    return object;
} 
```

# c++ - 在 Windows 上的 cygwin 中运行 c++ 程序的安装后程序是什么？

> ID：13666327
> 
> 赞同：0
> 
> 时间：2012-12-02T04:09:40.167
> 
> 标签：c++, gcc, cygwin

我已经在 windows xp 上安装了 cygwin。

在命令提示符下，我输入`cygcheck -c cygwin`它给出 cygwin 的版本并说状态正常。

但是当我输入`gcc --version`它时给出'gcc command not found'。

我犯了什么错误。或者在安装cygwin ..之后有什么安装程序吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T04:20:01.517

更新`PATH`环境变量以包含所在的路径`gcc`。您可能还需要其他环境变量 - 请参见[此处](http://gcc.gnu.org/onlinedocs/gcc/Environment-Variables.html)- 例如包含路径等的环境变量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-05T09:45:16.543

为了安全起见，请确保您确实在设置中勾选了“ **GCC for Cygwin 32bit toolchain (C++)** ”。

如果你已经这样做了，那么你的 bin 目录中应该有 gcc，但你需要创建一个链接并将其添加到你的路径中。

要创建一个链接（这样您就可以只使用“gcc”），请转到 bin 目录并创建如下链接：

```
ln -s i686-pc-cygwin-gcc.exe gcc 
```

这将创建一个符号链接 gcc，它指向真正的可执行文件 ln -s i686-pc-cygwin-gcc.exe gcc。设置好后，您仍然需要将 bin 目录添加到您的路径中，以便能够在任何地方调用 gcc。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-02T04:14:35.460

确保您已更新 PATH 环境。包含“c:\cygwin\bin”的变量（或者你安装了 cygwin 二进制文件的地方）

# javascript - 代码仅适用于 jsfiddle？

> ID：13666332
> 
> 赞同：-1
> 
> 时间：2012-12-02T04:11:22.473
> 
> 标签：javascript

我正在从一本书中学习 JavaScript，并且在我从书中编写的代码示例中，它只会在 jsfiddle 上对我有用。我试过 Chrome 和 IE，但没有出现提示。这是我的代码：

```
<script type="text/JavaScript">
            var userNumbers = new Array();
            var userInput = 0;
            var arrayIndex = 0;
            var message = '';
            var total = 0;

            while (userInput != 99) {
            userInput = prompt("Enter a number, or 99 to exit", "99");
            userNumbers[arrayIndex] = userInput;
            arrayIndex++; 
            }
            message += 'You entered the following:\n';
            for (var i = 0; i< arrayIndex-1;i++) {
                message += userNumbers[i] + '\n';
                total += Number(userNumbers[i]);
            }
            message += 'Total:' total + '\n';
            alert(message);
        </script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-02T04:15:45.750

您的线路：

```
message += 'Total:' total + '\n'; 
```

应该

```
message += 'Total:' + total + '\n'; 
```

# java - 如何使用这个 Java GUI API 绘制东西？

> ID：13666335
> 
> 赞同：0
> 
> 时间：2012-12-02T04:12:11.527
> 
> 标签：java, swing, user-interface, paintcomponent, drawstring

我的导师已经为图形定义[了这个](http://www-inst.eecs.berkeley.edu/~cs61b/fa08/docs/ucb-docs/ucb/gui/package-summary.html)API。

这很简单，但我现在花了一两个小时试图弄清楚如何显示简单的图形操作。

所以我有一个扩展 TopLevel 的 T 类，它是我的主框架。我还有一个扩展 Pad 的 Pad P，这是它的 paintComponent 方法的主体：

```
@Override
protected void paintComponent(Graphics2D g) {
    super.paintComponent(g);
    g.drawString("Hello", 0, 0);
    g.fill(new Rectangle(5, 5));
    repaint(); //(Probably don't need)
} 
```

然后我调用`T.add(P)`, (我也这样做了`T.addButton(..)`and `T.display(true)`。当我运行应用程序时，我看到一个带有我创建的按钮的空画布。

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-02T04:42:31.603

绘制文字并不像你想象的那么简单。

y 位置代表字体的基线（大多数文本所在的点。还有一条像样的线，位于基线下方的字符将延伸到（诸如“g”和“p”之类的字符）。

字体也有上升。这是基线以上典型字符的“高度”（显然不包括下降）

![在此处输入图像描述](../Images/d9877cdf791501657d7ae91d00987067.png)

*来自[测量文本的图像](http://docs.oracle.com/javase/tutorial/2d/text/measuringtext.html)*

为了正确绘制文本，您必须始终将上升添加到 y 位置...

```
FontMetrics fm = g.getFontMetrics();
g.drawString("Hello", 0, fm.getAscent()); 
```

您也可能会丢失`repaint`呼叫，这将导致重绘管理器（最终）一遍又一遍地调用`paint`您组件的方法......再次......

在 Swing 中，`Graphics`通常将颜色设置为组件的前景色。您可能想尝试更改颜色以确定。

`g.setColor(Color.RED);`在尝试绘制任何东西之前尝试使用类似的东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-02T05:18:55.503

T.setVisible(true); // 构建后

# objective-c - Iphone 应用程序编程 - 导航到其他视图控制器和转义导航控制器

> ID：13666342
> 
> 赞同：0
> 
> 时间：2012-12-02T04:14:02.650
> 
> 标签：objective-c, ios, cocoa-touch, ios5, ios4

我有带有 3 个选项卡的选项卡控制器，其中包含导航控制器：

```
// account view
UINavigationController * firstNavController = [[UINavigationController alloc]initWithRootViewController: viewController1];
viewController2.tabBarItem = [[UITabBarItem alloc]initWithTabBarSystemItem:UITabBarSystemItemFavorites tag:2];

// book view
UINavigationController * secondNavController = [[UINavigationController alloc]initWithRootViewController: viewController2];
viewController3.tabBarItem = [[UITabBarItem alloc]initWithTabBarSystemItem:UITabBarSystemItemFavorites tag:3];

// invite view
UINavigationController * thirdNavController = [[UINavigationController alloc]initWithRootViewController: viewController3];

CATransition *transition = [CATransition animation];
transition.duration = 0.7f;
transition.timingFunction = [CAMediaTimingFunction functionWithName:kCAMediaTimingFunctionEaseInEaseOut];
transition.type = kCATransitionFade;

[firstNavController.view.layer addAnimation: transition forKey:nil];
[secondNavController.view.layer addAnimation: transition forKey:nil];
[thirdNavController.view.layer addAnimation: transition forKey:nil];

_tabBarController.viewControllers = [[NSArray alloc] initWithObjects: firstNavController, secondNavController, thirdNavController,  nil]; 
```

我有一个带有右键的导航栏，可让人们转到“我的帐户”页面。不使用导航控制器怎么办？例如，如果人们单击标签栏按钮 1，他们会得到一个导航控制器（带有他们可以选择的服务列表）。如果他们点击右上角的“我的帐户”按钮，它应该打开一个新的导航控制器，底部有标签栏，这样他们就无法点击“我的帐户”页面上的后退按钮（因为这是这个新导航中的根控制器控制器。

我怎样才能做到这一点？

基本上，我想从另一个视图控制器（控制器 2）打开一个新的视图控制器（控制器 1 - 我的帐户），而不将该新视图控制器推入控制器 2 的导航控制器。控制器 1 应该在底部有标签栏，但是没有后退按钮。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T05:08:17.543

从控制器 2，您可以使用它切换到第一个控制器（我假设您的意思是第一个选项卡上的控制器）：

```
self.tabBarController.selectedIndex = 0; 
```

我认为您可以使用 self.navigationBarHidden = YES 在第一个控制器的 viewDidAppear 方法中隐藏导航栏

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T11:17:52.633

而不是推动你的`LoginViewController`，尝试使用`presentModalViewController`。

在您的导航`rightBarButton`操作中给出

```
[self presentModalViewController:loginViewController animated:YES]; 
```

# iteration - 错误迭代表以获取所有行并在 adf 中处理其中一些

> ID：13666343
> 
> 赞同：2
> 
> 时间：2012-12-02T04:14:24.647
> 
> 标签：iteration, oracle-adf, region

我的项目出现错误。我正在使用 Oracle ADF 进行开发。这是简短的：

我有一个任务流，其中包含 2 个视图，browseBusiness（devault 视图）和 chooseBusiness。然后我有一个 jspx 页面，其中包含来自任务流的区域。

在browseBusiness 中，我有2 个按钮，添加和删除。如果我按添加，那么它将显示选择业务，其中一列中有一个复选框。我会检查其中的一些，当我单击保存时，它应该迭代以知道我选择了哪一行，然后将其保存到数据库中。

我的问题是它在保存业务时无法迭代。这是我要保存的代码：

```
 final RichTable table = this.getBisnisTabel();
       final AppModuleImpl appModul =
           (AppModuleImpl)ADFUtil.getApplicationModule("AppModuleDataControl");

       FacesContext facesContext = FacesContext.getCurrentInstance();
       VisitContext visitContext =
           RequestContext.getCurrentInstance().createVisitContext(facesContext, null, EnumSet.of(VisitHint.SKIP_TRANSIENT,
                                                                                                 VisitHint.SKIP_UNRENDERED),
                                                                  null);
       //ERROR IN HERE
       UIXComponent.visitTree(visitContext, facesContext.getViewRoot(), new VisitCallback() {
               public VisitResult visit(VisitContext context, UIComponent target) {
                   if (table != target) {
                       return VisitResult.ACCEPT;
                   } else if (table == target) {
                       //Here goes the Actual Logic
                       //for adding new Business
                       selectAllRowsInTable(table);
                       Iterator selection = table.getSelectedRowKeys().iterator();
                       while (selection.hasNext()) {
                           Object key = selection.next();
                           //store the original key
                           Object origKey = table.getRowKey();
                           try {
                               table.setRowKey(key);
                               Object o = table.getRowData();
                               JUCtrlHierNodeBinding rowData = (JUCtrlHierNodeBinding)o;
                               Row row = rowData.getRow();
                               if (row.getAttribute
                                   ("Selected") != null) {
                                   if ((Boolean)row.getAttribute("Selected"))
                                   {
                                       appModul.saveMTypeOfPolicyGrpBizCode(row.getAttribute("BizCode").toString());
                                       row.setAttribute("Selected", false);
                                   }
                               }
                           } catch (Exception ex) {
                               ex.printStackTrace();
                           } finally {
                               //restore original key
                               table.setRowKey(origKey);
                           }
                       }
                   }
                   return VisitResult.COMPLETE;
               }
           }); 
```

这是在表中选择所有行的代码：

```
public void selectAllRowsInTable(RichTable rt) {
    RowKeySet rks = new RowKeySetImpl();
    CollectionModel model = (CollectionModel)rt.getValue();
    int rowcount = model.getRowCount();
    for (int i = 0; i < rowcount; i++) {
        model.setRowIndex(i);
        Object key = model.getRowKey();
        rks.add(key);
    }
    rt.setSelectedRowKeys(rks);
} 
```

我很困惑，因为当我在browseBusiness 视图中使用类似的代码删除Business 时，它运行得非常流畅。这是代码：

```
 final RichTable table = this.getBizPolicyTable();
        final AppModuleImpl appModul =
            (AppModuleImpl)ADFUtil.getApplicationModule("AppModuleDataControl");

        FacesContext facesContext = FacesContext.getCurrentInstance();
        VisitContext visitContext =
            RequestContext.getCurrentInstance().createVisitContext(facesContext,
                                                                   null,
                                                                   EnumSet.of(VisitHint.SKIP_TRANSIENT,
                                                                              VisitHint.SKIP_UNRENDERED),
                                                                   null);
        //Annonymous call
        UIXComponent.visitTree(visitContext, facesContext.getViewRoot(),
                               new VisitCallback() {
                public VisitResult visit(VisitContext context,
                                         UIComponent target) {
                    if (table != target) {
                        return VisitResult.ACCEPT;
                    } else if (table == target) {
                        //Here goes the Actual Logic
                        //for deleting multiple Business of Policy

                        CollectionModel cm =
                            (CollectionModel)getBizPolicyTable().getValue();
                        RowKeySet rowKeySet =
                            (RowKeySet)getBizPolicyTable().getSelectedRowKeys();
                        Object[] rowKeySetArray = rowKeySet.toArray();
                        for (Object key : rowKeySetArray) {
                            cm.setRowKey(key);
                            //store the original key
                            JUCtrlHierNodeBinding rowData =
                                (JUCtrlHierNodeBinding)cm.getRowData();
                            try {
                                Row row = rowData.getRow();
                                appModul.deleteMTypeOfPolicyGrpBizCode(row);
                            } catch (Exception ex) {
                                ex.printStackTrace();
                            } finally {
                                //restore original key
                            }
                        }
                        appModul.getTypeOfPolicyBizCodeView3().executeQuery();
                        appModul.getTypeOfPolicyBizCodeView1().executeQuery();
                    }
                    return VisitResult.COMPLETE;
                }
            }); 
```

我的代码有什么问题吗？感谢您的任何反馈:)

更新：尝试调试我的项目。在这一行：

```
Object key = selection.next(); 
```

该值为空。我不知道为什么。。

我收到此错误：在使用 SQL 语句“DELETE FROM M_BUSSINESS MBussiness WHERE BIZ_CODE=:1”后操作“删除”期间违反了约束“TYPE_OF_POLICY_BIZ_CODE_FK1”。

在这里我再次感到困惑，因为我尝试添加而不是删除值。我做错了吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T19:03:55.360

看来您正在直接获得对 AM 的引用：

```
final AppModuleImpl appModul =
           (AppModuleImpl)ADFUtil.getApplicationModule("AppModuleDataControl"); 
```

不推荐这种做法。您违反了模型和视图层，并在设计中引入了脆弱性。一个更好且推荐的做法是： 1\. 将 AM 方法作为服务方法公开到 AM 2\. 将此方法绑定到您的页面 3\. 从您的支持 bean 调用该方法。

[https://blogs.oracle.com/jdevotnharvest/entry/best_practice_invoking_business_services](https://blogs.oracle.com/jdevotnharvest/entry/best_practice_invoking_business_services)

至于您遇到的问题，这将有助于了解：产品的版本。

此外，您似乎在此处删除：

```
 appModul.deleteMTypeOfPolicyGrpBizCode(row); 
```

是的？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-02T12:24:19.010

尝试使用 getSelectedRowKeys() 获取现有的，而不是创建新的 RowKeySetImpl。或者更改您的逻辑以遍历所有行并完全删除选定的行逻辑。这似乎是不必要的额外工作。

# python - from sys import argv - “脚本”的功能是什么

> ID：13666346
> 
> 赞同：15
> 
> 时间：2012-12-02T04:15:33.850
> 
> 标签：python, argv

我正在阅读“Learn Python the Hard Way”，对第二行的“脚本”部分感到困惑。

```
from sys import argv
script, filename = argv 
```

据我了解，第二行说：`script`并且`filename`包含`argv`。我尝试在没有“脚本”部分的情况下运行我的代码，它工作得很好。我不确定它的目的是什么。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-12-02T04:21:34.547

通常，命令行可执行文件的第一个参数是脚本名称，其余的是预期参数。

这里，`argv`是一个预计包含两个值的列表：脚本名称和参数。使用 Python 的解包表示法，您可以编写

```
script = argv[0]
filename = argv[1] 
```

作为

```
script, filename = argv 
```

同时如果有意外数量的参数（如一个或三个）也会抛出错误。这可能是一个好主意，具体取决于一个人的代码，因为它还确保没有意外的参数。

但是，以下代码不会导致`filename`实际包含文件名：

```
filename = argv 
```

这是因为`filename`现在是参数列表。为了显示：

```
script, filename = argv
print("Script:", script)  # Prints script name
print("Filename:", filename)  # Prints the first argument

filename = argv
print("Filname:", filename)  # Prints something like ["my-script.py", "my-file.txt"] 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-02T04:22:20.557

其他人已经解释了什么是`script`，但python语句称为[解包](http://docs.python.org/2.7/tutorial/datastructures.html#tuples-and-sequences)，通常应用于元组或序列。

这是为`=`符号右侧元组（或序列）中的每个值分配变量的快捷方式。

它不是特定于`argv`：

```
>>> a,b = ('Hello','World')
>>> a
'Hello'
>>> b
'World' 
```

要记住的一件事是左侧的变量数必须与右侧序列中的项目数匹配，否则您会得到：

```
>>> a,b,c = ('Hello','World')
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
ValueError: need more than 2 values to unpack
>>> a,b = ('Hello','World','!')
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
ValueError: too many values to unpack 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-02T04:26:27.577

`argv`是程序的参数列表。标准 shell 行为包括程序本身的名称作为`argv`.

如果左侧变量的数量等于右侧列表的大小，Python 可以一次分配多个值（它也可以处理更多情况，但这是最基本的）。例如

```
script, filename = argv 
```

是相同的

```
script = argv[0]
filename = argv[1] 
```

另请注意，该脚本将引发一个`ValueError`if`argv`不完全有两个元素。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-12-02T04:18:50.313

第一项`argv`是您正在运行的 Python 脚本的名称。任何其他参数（在本例中为文件名）都是传递给此脚本的参数。

这两个参数被分配了名称`script`和`filename`。完全有可能`script`永远不再使用；它基本上是一个占位符。但是，如果您将其删除，则可以这样做`filename = argv[1]`。

# iphone - 新闻应用程序如何更新？

> ID：13666360
> 
> 赞同：0
> 
> 时间：2012-12-02T04:18:43.770
> 
> 标签：iphone, ios

新闻应用程序如何更新新新闻？程序员/开发人员是否每次都必须对源代码进行物理编辑，或者是否有其他人可以对应用程序进行“主控制”来更新它而不更改源代码？我问的原因是因为我想为我的幻想联盟制作一个 iOS 应用程序，以随时了解变化和交易等......

谢谢

# mysql - 从多个行值中加入选择？

> ID：13666365
> 
> 赞同：3
> 
> 时间：2012-12-02T04:19:46.170
> 
> 标签：mysql, sql

两张桌子

1)**`product`**

```
--------------------
id  |  Name   |  price
1   |   p1    |    10
2   |   p2    |    20
3   |   p3    |    30 
```

2）**`product_attributes`**：

```
---------------------------------------------------
id | product_id | attribute_name | attribute_value
---------------------------------------------------
1  |   1        |  size          |     10
2  |   1        |  colour        |     red
3  |   2        |  size          |     20 
```

我需要加入这两个表。在 where 子句中，我需要匹配两行属性值。是否可以根据两行值获得结果。根据用户选择，我需要显示所有符合条件的产品。这里如果 size=10 和 colour=red。

输出应该是

```
1   |   p1    |    10 
```

对此进行查询可能会很有帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-02T05:03:01.343

```
select p.* from product p
join (select a1.product_id id from product_attributes a1 join product_attributes a2 using (product_id)
      where a1.attribute_name = 'size' and a1.attribute_value = '10'
        and a2.attribute_name = 'colour' and a2.attribute_value = 'red') pa
using (id) 
```

如果您需要匹配更多属性，只需向子查询添加更多连接。

# mysql - 为什么 MySQL 在创建触发器时会出现此错误？

> ID：13666368
> 
> 赞同：0
> 
> 时间：2012-12-02T04:20:20.270
> 
> 标签：mysql, triggers

我已经创建了这个触发器来自动生成像 SDA0001、SDA0002 这样的用户代码......我刚刚在 BEGIN 和 END 之间包含了主要语句。它是在表**agent_mst上****插入之前创建的**

 **```
DECLARE max_id INT;

SET max_id=(SELECT MAX(agent_id_pk)+1 FROM `agent_mst`);
IF (max_id IS NULL) THEN
    SET max_id=1;
END IF;

SET 
NEW.date_added=NOW(), 
NEW.date_updated=NOW(),
NEW.agent_code = CONCAT('SDA', LPAD(max_id, 4,'0')); 
```

它给出的错误如下

> MySQL 说：#1064 - 你的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以获取在 'DECLARE max_id INT; 附近使用的正确语法；SET max_id=(SELECT MAX(agent_id_pk)+1 FROM `agent_mst`); ' 在第 1 行

我正在使用 phpMyAdmin 创建这个触发器。

有什么建议吗？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T04:26:47.203

这应该有效：

```
DELIMITER $$

CREATE TRIGGER trigger_name BEFORE INSERT ON `agent_mst`
FOR EACH ROW 
BEGIN
    DECLARE max_id INT;

    SET max_id=(SELECT MAX(agent_id_pk)+1 FROM `agent_mst`);
    IF (max_id IS NULL) THEN
        SET max_id=1;
    END IF;

    SET NEW.date_added=NOW(),
        NEW.date_updated=NOW(),
        NEW.agent_code = CONCAT('SDA', LPAD(max_id, 4,'0'));

END $$

DELIMITER ; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-02T05:17:38.540

在所有 pl/sql 函数的 MySQL 中，我们应该首先设置分隔符。因为它会将所有分号作为行尾。**

# java - 如何从电脑通过蓝牙获取手机的MAC地址？

> ID：13666370
> 
> 赞同：-1
> 
> 时间：2012-12-02T04:20:47.430
> 
> 标签：java, macos, bluetooth

假设我的电脑是服务器。那么当任何手机通过蓝牙连接到我的服务器时，如何获取手机的MAC地址？任何想法..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T04:43:49.730

IP 地址应该是来自设备的请求信息的一部分，它的子网地址取决于您是从 servlet（servlet 请求接口）还是从 java.net.Socket（SocketImpl）获取地址，您需要获取请求信息并对其进行排序。

# c++ - 如何解析没有预标记的异构列表列表？

> ID：13666371
> 
> 赞同：2
> 
> 时间：2012-12-02T04:20:53.720
> 
> 标签：c++, boost-spirit, boost-spirit-qi

*我应该如何修改这个 boost::spirit 代码来解析范围或列表的任何组合？*

[请注意，这个问题与我之前的问题](https://stackoverflow.com/questions/13591660/how-to-generalize-a-spirit-parser-to-take-lists-in-arbitrary-order)有些不同。在这种情况下，我没有一个特殊的前置标签`RANGE:`，`LIST:`它可以帮助我解析，所以我不确定我们是否需要某种前瞻。

*不过，我确实需要将解析分开，因为这样做有助于我将结果捕获到不同的数据结构中。*

**目标** 让所有四个测试用例都通过

**编辑答案似乎适用于更复杂的表达式**

```
// #define BOOST_SPIRIT_DEBUG

#include <boost/foreach.hpp>
#include <boost/spirit/include/qi.hpp>
#include <boost/fusion/include/tuple.hpp>
#include <boost/tuple/tuple.hpp>
#include <boost/fusion/include/boost_tuple.hpp>

#include <iostream>

namespace qi = boost::spirit::qi;

typedef std::vector<boost::tuple<std::string,std::vector<int>>>   MY_TYPE;

template <typename Iterator, typename Skipper>
struct my_grammar :
qi::grammar<Iterator, MY_TYPE(), Skipper>
{
    my_grammar() :
        my_grammar::base_type( entries )
    {
        entries %=
            *(
                +(qi::char_ - '-')
                >> qi::lit( "->" )
                >> ( comma | range )
            )
            ;

        range %= '{' >> qi::int_ >> ':' >> qi::int_ >> ':' >> qi::int_ >> '}';
        comma %= '{' >> (qi::int_ % ',') >> '}';

        BOOST_SPIRIT_DEBUG_NODE( range   );
        BOOST_SPIRIT_DEBUG_NODE( comma   );
        BOOST_SPIRIT_DEBUG_NODE( entries );
    }

    qi::rule<Iterator, std::vector<int>(), Skipper> 
        range, comma;

    qi::rule<Iterator, MY_TYPE(), Skipper> 
        entries;
};

// -----------------------------------------------------------------------------

static void TryParse( const std::string& input, const std::string& label )
{
    MY_TYPE entries;
    auto it(input.cbegin()), end( input.cend() );
    my_grammar<decltype(it), qi::space_type> entry_grammar;

    if (qi::phrase_parse(it, end, entry_grammar, qi::space, entries)
            && it == end)
    {
        std::cerr << label << " SUCCESS" << std::endl;
    }
    else
    {
        std::cerr << label << " FAIL" << std::endl;
    }
}

int
main( int argc, char* argv[] )
{
    std::string range_first = "foo -> {1:9:1}\nbar -> {1,2,3,4,5}\n";
    std::string comma_first = "foo -> {1,2,3,4,5}\nbar -> {1:9:1}\n";
    std::string comma_only  = "foo -> {1,2,3,4,5}\n";
    std::string range_only  = "foo -> {1:9:1}\n";

    TryParse( range_first, "RANGE FIRST" );
    TryParse( comma_first, "COMMA FIRST" );
    TryParse( range_only,  "RANGE ONLY"  );
    TryParse( comma_only,  "COMMA ONLY"  );
} 
```

**编辑新输出（仍然无法处理异构列表）**

```
/tmp$ g++ -g -std=c++11 sandbox.cpp -o sandbox && ./sandbox 
COMMA FIRST FAIL
RANGE FIRST FAIL
COMMA ONLY SUCCESS
RANGE ONLY SUCCESS
/tmp$ 
```

**编辑改进的代码（仍然无法处理异构列表）**

```
// #define BOOST_SPIRIT_DEBUG

#include <boost/foreach.hpp>
#include <boost/spirit/include/qi.hpp>
#include <iostream>

namespace qi = boost::spirit::qi;

template <typename Iterator, typename Skipper>
struct my_grammar :
qi::grammar<Iterator, std::vector<int>(), Skipper>
{
    my_grammar() :
        my_grammar::base_type(entries)
    {
        entries %= 
            *('{' >> qi::int_
            >> ( range_tail | comma_tail ))
        ;

        range_tail %= ':' >> qi::int_ >> ':' >> qi::int_ >> '}';
        comma_tail %= *( ',' >> qi::int_ ) >> '}';

        BOOST_SPIRIT_DEBUG_NODE(entries   );
        BOOST_SPIRIT_DEBUG_NODE(comma_tail);
        BOOST_SPIRIT_DEBUG_NODE(range_tail);
    }

    qi::rule<Iterator, std::vector<int>(), Skipper> entries, comma_tail, range_tail;
};

// -----------------------------------------------------------------------------

static void TryParse( const std::string& input, const std::string& label )
{
    std::vector<int> entries;
    auto it(input.cbegin()), end( input.cend() );
    my_grammar<decltype(it), qi::blank_type> entry_grammar;

    if (qi::phrase_parse(it, end, entry_grammar, qi::blank, entries)
            && it == end)
    {
        std::cerr << label << " SUCCESS" << std::endl;
    }
    else
    {
        std::cerr << label << " FAIL" << std::endl;
    }
}

int
main( int argc, char* argv[] )
{
    std::string range_first = "{3:5:7}\n{1,2,3,4,5}";
    std::string comma_first = "{1,2,3,4,5}\n{3:5:7}";
    std::string comma_only  = "{1,2,3,4,5}";
    std::string range_only  = "{3:5:7}";

    TryParse( comma_first, "COMMA FIRST" );
    TryParse( range_first, "RANGE FIRST" );
    TryParse( comma_only,  "COMMA ONLY"  );
    TryParse( range_only,  "RANGE ONLY"  );
} 
```

**原始代码**

**编译运行**

```
/tmp$ g++ -g -std=c++11 sandbox.cpp -o sandbox && ./sandbox 
COMMA FIRST FAIL
RANGE FIRST FAIL
COMMA ONLY SUCCESS
RANGE ONLY FAIL
/tmp$ 
```

**沙盒.cpp**

```
// #define BOOST_SPIRIT_DEBUG

#include <boost/foreach.hpp>
#include <boost/spirit/include/qi.hpp>
#include <iostream>

namespace qi = boost::spirit::qi;
typedef int Entry;

template <typename Iterator, typename Skipper>
struct my_grammar :
qi::grammar<Iterator, std::vector<Entry>(), Skipper>
{
    my_grammar() :
        my_grammar::base_type(entries)
    {
        entries %= 
            *( 
                '{' >>
                    ( comma_list | range_list )
                >> '}'
            )
        ;

        comma_list %= qi::int_ % ',';
        range_list %= qi::int_ >> ':' >> qi::int_ >> ':' >> qi::int_;

        BOOST_SPIRIT_DEBUG_NODE(entries);
        BOOST_SPIRIT_DEBUG_NODE(comma_list);
        BOOST_SPIRIT_DEBUG_NODE(range_list);
    }

    qi::rule<Iterator, std::vector<Entry>(), Skipper> entries, comma_list, range_list;
};

// -----------------------------------------------------------------------------
static void TryParse( const std::string& input, const std::string& label )
{
    std::vector<Entry> entries;
    auto it(input.cbegin()), end( input.cend() );
    my_grammar<decltype(it), qi::blank_type> entry_grammar;

    if (qi::phrase_parse(it, end, entry_grammar, qi::blank, entries)
            && it == end)
    {
        std::cerr << label << " SUCCESS" << std::endl;
    }
    else
    {
        std::cerr << label << " FAIL" << std::endl;
    }
}

int
main( int argc, char* argv[] )
{
    std::string range_first = "{3:5:7}\n{1,2,3,4,5}";
    std::string comma_first = "{1,2,3,4,5}\n{3:5:7}";
    std::string comma_only  = "{1,2,3,4,5}";
    std::string range_only  = "{3:5:7}";

    TryParse( range_first, "COMMA FIRST" );
    TryParse( comma_first, "RANGE FIRST" );
    TryParse( comma_only,  "COMMA ONLY"  );
    TryParse( range_only,  "RANGE ONLY"  );
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-02T04:53:24.710

使用公共代码中的前导数字。在该数字之后有一个范围尾或列表尾。列表尾部以 a 开头，范围尾部以 : 开头。

可能将 } 折叠到尾部，因此列表尾部为 (,number)*}，范围尾部为 :number:number}，这使得空列表更易于解析。

# xslt - xpath xsl 连接

> ID：13666374
> 
> 赞同：0
> 
> 时间：2012-12-02T04:21:12.147
> 
> 标签：xslt, xpath

给出以下

```
<ZIP0>10015</ZIP0>
<ZIP1>10016</ZIP1>
...
<ZIP99>10016</ZIP99> 
```

我使用 xpath concat() 来组合元素名称和整数：

```
<ZIP><xsl:value-of select="concat('ZIP','0')"/></ZIP> 
```

concat 返回文字字符串...

```
<ZIP>ZIP0</ZIP> 
```

当然，目的是，

```
<ZIP>10015</ZIP> 
```

如何评估从 concat 返回的字符串表达式。

这也提供了相同的结果：

```
<xsl:variable name="tmp" select="concat('ZIP','0')"/>
<ZIP><xsl:value-of select="$tmp"/></ZIP> 
```

事实上，它的评价就像，

```
<xsl:value-of select="'ZIP0'"/> 
```

反对

```
<xsl:value-of select="ZIP0"/> 
```

干杯

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-02T05:31:06.923

简短的回答：

```
<ZIP><xsl:value-of select="*[name() = concat('ZIP','1')]"/></ZIP> 
```

长答案 - 在如下表达式中：

```
<xsl:value-of select="ZIP1"/> 
```

`ZIP1`实际上是简写，`child::ZIP1`这意味着（大致）查找名称与 ZIP1 匹配的子元素。该文本`ZIP1`称为名称测试。不幸的是，没有办法从字符串动态构建名称测试。您必须准确指定名称或使用通配符`*`。

由于我们不知道确切的名称，我们别无选择，只能使用通配符`*`后跟谓词表达式，过滤掉我们不感兴趣的节点。谓词将在列表中的每个节点上调用。该`name()`方法将返回正在测试的节点的标签名称，因此我们要做的就是确保名称等于我们想要的字符串。

有关参考，请参阅[http://www.w3.org/TR/xpath](http://www.w3.org/TR/xpath)

# node.js - Node.js 的 RSS（驻留集大小）随着每个请求而增长，直到达到某个上限是否正常？

> ID：13666375
> 
> 赞同：11
> 
> 时间：2012-12-02T04:21:18.070
> 
> 标签：node.js, v8

我注意到我的 node.js 应用程序的 RSS（驻留集大小）随着时间的推移而增长，并且考虑到我的服务器上出现“JS 对象分配失败 - 内存不足”错误，这似乎是一个可能的原因。

我设置了以下非常简单的 Node 应用程序：

```
var express = require('express');

var app = express();
app.get('/',function(req,res,next){
    res.end(JSON.stringify(process.memoryUsage()));
});
app.listen(8888); 
```

只需按住“刷新”热键@http://localhost:8888/，我就可以观看 RSS/heap/etc。增长，直到 RSS 超过 50mb（在我感到无聊之前）。等待几分钟然后回来，RSS 下降 - 大概 GC 已经运行。

我试图弄清楚这是否解释了我的实际节点应用程序崩溃的原因......我的生产应用程序很快达到了大约 100Mb 的 RSS 大小，当它崩溃时它通常在 200Mb-300Mb 之间。据我所知，这不应该太大（我相信节点应该能够处理 1.7Gb 左右），但我仍然担心我的生产服务器上的 RSS 大小呈上升趋势（衰减表示崩溃）：

![在此处输入图像描述](../Images/c2712e73bb1e18a4b24266e63a28795b.png)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2015-03-31T13:59:19.427

这个问题已经很老了，但没有答案，所以我会提出我的问题，它引用了Jay Conrod 2013-2014 年的[一篇博客文章，他](http://jayconrod.com/posts/55/a-tour-of-v8-garbage-collection)*“致力于优化手机的 V8 JavaScript 引擎”*。

V8 在收集垃圾时尝试提高效率，为此它使用**增量标记和延迟清除**。

基本上增量标记负责跟踪您的对象是否可以被收集。

> 当堆达到某个阈值大小时，增量标记开始。

懒惰清扫负责在增量标记期间收集标记为垃圾的对象并执行其他耗时的任务。

> 一旦增量标记完成，就会开始懒惰的扫描。所有对象都被标记为存活或死亡，并且堆确切地知道可以通过清除释放多少内存。不过，所有这些记忆不一定要立即释放，延迟清扫不会真正伤害任何东西。因此，垃圾收集器不是同时清扫所有页面，而是根据需要清扫页面，直到所有页面都被清扫。至此，垃圾回收周期完成，增量标记可以重新开始。

我认为这解释了为什么您的服务器会分配如此多的内存，直到达到某个上限。为了更好地理解，我建议阅读 Jay Conrod 的博客文章[“V8 之旅：垃圾收集”](http://jayconrod.com/posts/55/a-tour-of-v8-garbage-collection)。

# version-control - 恢复因关闭分支而丢失的有用更改

> ID：13666378
> 
> 赞同：0
> 
> 时间：2012-12-02T04:21:51.470
> 
> 标签：version-control, mercurial, branch

我对主（也是唯一的）分支进行了一些更改（A）。然后我的同事做了一些其他的改变（B）。然后我发现更改（A）被彻底破坏了，我决定完全放弃它们。另一方面，变化 (B) 非常好，幸运的是完全独立于变化 (A)。变化（B）的数量远小于变化（A）。

通常，我会`hg commit --close-branch`按照[这里的描述](https://stackoverflow.com/a/3692607/336527)进行。但是后来我丢失了更改（B），并且需要在新的活动分支中重新创建它们。我可以做到这一点，只需（手动）识别受影响的文件，并（手动）更新它们，然后提交。这显然不是完美的，因为它需要两个手动步骤，并且还在存储库中创建了一个误导性的提交（误导性是因为这些更改是我的同事不久前做出的，但看起来好像是我今天做出的）。我想这不是世界末日，但有更优雅的解决方案吗？

注意：如果 Mercurial 支持*仅将一个提交的差异*应用到修订树中的另一个位置，它就会起作用。但我怀疑此功能不存在，这是有充分理由的：当逐字应用于另一个父变更集时，差异与现有父变更集非常有用。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-02T06:02:09.713

1.  `--close-branch`有另一个理由，而不是丢弃坏的变更集
2.  您可以通过提供“undoing-changeset”来撤消早期历史中出现的任何更改集，读取`hg help backout`，在常见的`hg backout CSET-HASH`反向更改中，在 CSET-HASH 中完成，以支付在 repo 中额外提交的成本

使用回退来**杀死**旧变更集的示例（rev. 7 undo rev.3）

```
>hg log -r 3:7 --template "{rev}:{node|short}\n{desc}\n\n"
3:2f09429039a6
Немного более русские даты

4:97419f57d7db
Заготовки под перевод

5:674a76db96fd
UTF8 и перевод assigncategories

6:9cd6b52df09f
Подчистки локализации

7:c2a2812d11ad
Backed out changeset: 2f09429039a6 
```

1.  您**可以**在分支之间挑选变更集，读取`hg help graft`（基于合并的注入逻辑而不是 old `hg transplant`）。有用性或无用性是人类选择的问题，移植变更集在新父级之上的可操作性（无合并冲突）是移植本身的责任

> 如果嫁接合并导致冲突，则中断嫁接过程，以便可以手动解决当前合并。

# java - 在没有扩展 Activity 类的类中调用另一个活动

> ID：13666379
> 
> 赞同：1
> 
> 时间：2012-12-02T04:22:00.333
> 
> 标签：java, android

大家好，我有一个班级名称

```
public class WikipediaDataSource extends NetworkDataSource{.....} 
```

扩展到 NetworkDataSource。我想做的是从这门课上我想称之为新活动......

```
Intent i = new Intent(context, Obj3DView.class);
startActivity(i); 
```

我有错误说

```
the method of startActivity(intent) is undefined for the type WikipediaDataSource 
```

我在这个问题上读了很多..它发生是因为这个类没有扩展活动类。

我尝试遵循其他解决方案。但它不适用于我的情况。

请帮忙！:)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-02T04:23:41.537

如果这条线有效：

```
Intent i = new Intent(context, Obj3DView.class); 
```

然后您已经可以访问上下文，只需使用：

```
context.startActivity(i); 
```

因为[`startActivity()`](http://developer.android.com/reference/android/content/Context.html#startActivity%28android.content.Intent%29)是 Context 类的一个方法。

* * *

> 实际上是行意图 i = new Intent(context, Obj3DView.class); 有错误。

开发人员经常在构造函数中传递 Context：

```
public class WikipediaDataSource extends NetworkDataSource {
    Context context;

    public WikipediaDataSource (Context ctx) {
        ...
        context = ctx;
    }
    ...
} 
```

现在你的代码应该可以工作了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-28T10:54:05.767

在非活动类中：

```
private Activity activity;

public non_activity_class(Activity act) {

        activity=act;

}
.....`enter code here` 
```

然后当你想开始一个新的活动时

```
Intent in = new Intent("Pakege.NewActivity");
// NewActivity = what you write in your Manifest            

activity.startActivity(in); 
```

在活动类中，调用构造函数

```
non_activity_class(this); 
```

我希望它有所帮助。

# java - 从文件构造二叉树

> ID：13666388
> 
> 赞同：0
> 
> 时间：2012-12-02T04:23:31.410
> 
> 标签：java, binary-tree, huffman-code

我有一个格式如下的二叉树文件：

```
121
00
99
010
120
011
97
10
98
11 
```

它的格式类似于（ascii val）而不是（遍历代码）。0 = 左一，1 = 右一

所以 ascii 值 121 将存储在树中，如：

```
 -1
   /   
 -1       ...
 /
121 
```

我该如何正确构建它？

这就是我目前的做法：

```
TreeNode root;

public Tree(Scanner input){
    while(input.hasNextLine()){
        int ascii = Integer(input.nextLine());
        String code = input.nextLine();
        root = insert(root, ascii, code);
    }
}

public TreeNode insert(TreeNode node, int ascii, String code){
    if(code == ""){
        return new TreeNode(ascii); //treenode is just data, left right
    }

    if(node == null)
        node = new TreeNode(-1);

    char c = code.charAt(0);

    if(c == '0')
        node.left = insert(node.left, ascii, code.substring(1));
    else if(c == '1')
        node.right = insert(node.right, ascii, code.substring(1));

    return node;
} 
```

我做了一个预购打印，它看起来是正确的，但是当我尝试解码一个霍夫曼编码的文件时它做错了。你有什么不对劲的地方吗？我可以发布我的解码内容，但这有点棘手，因为我使用的是一个太大的自定义 BitInputStream 类，无法在此处发布。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T04:46:11.387

检查 c 是否真的是您期望的代码，如果不是，您将只返回节点。

```
if(c == '0')
    node.left = insert(node.left, ascii, code.substring(1));
else if(c == '1')
    node.right = insert(node.right, ascii, code.substring(1));
else
    throw new IllegalArgumentException(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-12-10T05:39:44.583

也许是因为您尝试使用`==`.

`==`比较对象的引用是否相等，而`[stringname].equals(otherstring)`方法比较两个字符串的内容是否相等。
例如，您有

```
String code = "hi";
String other = "hi";
code.equals(other);` 
returns true. 
```

# javascript - 仅在关闭浏览器时提示，而不是在单击保存按钮或使用 javascript 离开页面时提示？

> ID：13666391
> 
> 赞同：2
> 
> 时间：2012-12-02T04:23:58.590
> 
> 标签：javascript

当用户在文本框中输入内容并在不知不觉中关闭浏览器时如何提示？

此外，如果用户没有在输入字段中键入任何内容并且如果关闭浏览器，则浏览器应该在没有提示的情况下关闭。只有当用户更改了字段中的某些内容时，浏览器才会提示。如果我使用`onbeforeunload`事件，即使在保存页面时它也会提示所有内容。有什么办法可以解决我在javascript中的问题。请通过给我合适的代码来帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-02T05:11:54.917

检查此链接：[http ://www.4guysfromrolla.com/webtech/100604-1.shtml](http://www.4guysfromrolla.com/webtech/100604-1.shtml)

它为您提供有关如何处理 onbeforeunload 事件的信息。

这个想法是在页面上有一个全局标志。当对字段进行任何更改时，此标志设置为 true。单击保存按钮时，需要将此标志设置为 false。

在 onbeforeunload 事件中，检查标志是否为真，然后相应地显示消息。

```
var needToConfirm = true;

window.onbeforeunload = confirmExit;
function confirmExit()
{
    if (needToConfirm)
    {
        // check on the elements whether any change has been done on the fields.
        // If any change has been done, then set message here.
    }
}

function saveClicked()
{
    needToConfirm = false;
} 
```

另一种方法是在通过 onchange 事件对字段进行任何更改时设置 needToConfirm 标志。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-02T06:00:17.700

您可以使用`window.onbeforeunload`.
您可以检查用户是否输入了任何文本，如果是，您只需返回要提示的消息。

```
var hook = false; //

window.onbeforeunload = function() {
    var x = $('#box').val();
    if (x.length > 1) { //check is user has entered text
        hook = true;
    }

    if (hook) { //return message if there is text
        hook = false; //reset hook
        return "Did you save your work?"
    }
}​ 
```

[在此处阅读有关 window.onbeforeunload的更多信息](https://developer.mozilla.org/en-US/docs/DOM/window.onbeforeunload)
[这是演示的链接](http://jsfiddle.net/9VkMh/14/)

# c - C 代码挂在 scanf() 语句处

> ID：13666396
> 
> 赞同：1
> 
> 时间：2012-12-02T04:25:12.883
> 
> 标签：c, arrays, loops, scanf, freeze

我正在尝试将输入输入数组，直到用户输入 -1 退出输入模式。

当输入 -1 但仅在输入至少两个值之后，此代码块中发生了一些奇怪的事情。

```
#define ARRAYSIZE 100
int input[ARRAYSIZE];
int i=0;
do {
  printf("Enter data #%d or -1 to exit: ", i);
  scanf("%d", &input[i]);
} while(input[i++] != -1 && i<ARRAYSIZE) 
```

代码将无限期地挂起。我已经在两个独立的架构上编译和运行，但是在 gdb 中运行时问题没有出现。

插入打印语句显示代码确实挂在 scanf 语句处。

有谁知道可能是什么原因造成的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-02T05:06:42.880

你从来没有检查过你保存的数据的值（它是检查下一个未初始化的元素），do while 更合适

```
#define ARRAYSIZE 100
int input[ARRAYSIZE],i=0;
do {printf("Enter data #%d or -1 to exit: ", i);
    scanf("%d", &input[i]);
}while(input[i] != -1 && ++i<ARRAYSIZE);
//if this is main() you need a return 0; here also or it will hang 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-02T04:39:39.067

我的问题：

3) 在你进入循环之前，“i”是否被初始化为 0？

2) "input[]" 是否声明为具有一个或多个 "int" 元素的整数数组？

... 和 ...

1）点击“进入”后它仍然挂起吗？

如果您还没有意识到这一点，您*必须在 scanf() 处理**任何*输入之前点击“输入” 。

建议：

```
#include <stdio.h>
#define ARRAYSIZE 100

int 
main ()
{
  int input[ARRAYSIZE];
  int i=0;
  int entry=0;
  while(entry != -1 && i<ARRAYSIZE) {
    printf("Enter data #%d or -1 to exit: ", i);
    scanf("%d", &input[i]);
    entry = input[i];
    fprintf (stderr, "entry= %d, input[i]= %d...\n", entry, input[i]);
    i++;
  }
  printf ("Done.\n");
  return 0;
} 
```

注意“fprintf(stderr)”。

样品输出：

```
Enter data #0 or -1 to exit: 300
entry= 300, input[i]= 300...
Enter data #1 or -1 to exit: -1
entry= -1, input[i]= -1...
Done. 
```

再次 - 请澄清您是否使用“Enter”键。如果是这样，请告诉我们您的平台（例如 Windows、Linux、MacOS 等）。

'希望有帮助...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-02T04:44:45.207

您的代码取决于未初始化的数组元素的值。难怪它的行为不合理。

在您的`while`周期条件下，您`input[i]`与进行比较`-1`。每次迭代`input[i]`都没有初始化 - 它包含一个垃圾值。由于垃圾值不太可能等于`-1`，因此您的循环会继续运行并运行，每次都停止`scanf`以等待输入。这造成了一种“悬而未决”的错觉`scanf`，而实际上它`scanf`本身与真正的问题无关。

当然，这里真正的问题不是数组未初始化，而是您的循环条件检查了*错误*的数组元素。您可能打算检查最近输入的元素。相反，您检查下一个元素。为什么？

我想说你的意图需要一个带有*后置*条件的循环。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-02T05:06:05.520

使用不同的变量来检查 -1。像这样的东西：

```
#include <stdio.h>
#define ARRAYSIZE 10

int main(int argc, char **argv) {
    int data[ARRAYSIZE];
    int input = 0;
    int i = 0;     

    while(input != -1 && i < ARRAYSIZE) {
        scanf("%d", &input);
        data[i] = input;
        i++;
    }

    return 0;
} 
```

# php - 添加一个类到 php 变量

> ID：13666397
> 
> 赞同：0
> 
> 时间：2012-12-02T04:25:12.960
> 
> 标签：php, wordpress, class, variables

我需要有关如何将类添加到需要在此处回显的 $output 变量的语法方面的帮助。对 PHP 不好，我正在尝试添加一个面包屑分隔线，所以我想我可以使用 css 'content:' 来做到这一点，只要我可以添加类。我尝试添加 &class=something 但它没有用。还在 $output 变量中添加一个 '' ，这也不好。提前致谢。

```
$output = wp_list_pages('echo=0&title_li=&child_of=' );

  if (is_page( )) {
    $page = $post->ID;
    if ($post->post_parent) {
      $page = $post->post_parent;
    }
    $children=wp_list_pages( 'echo=0&title_li=&child_of=' . $page );
    if ($children) {
      $output = wp_list_pages ('echo=0&title_li=&child_of=' . $page );
    }
  }
echo $output; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T05:09:46.553

如果理解正确，您可以像这样切换到 html：

```
...
}
?>
<div class="OutputClass" >
  <?php echo $output; ?>
</div> 
```

或者您可以在 PHP 中回显 HTML，如下所示：

```
...
}
echo '<div class="OutputClass" >';
echo $output;
echo '</div>'; 
```

**更新：**

这是一个例子：

```
echo '<ul class="ClassUL">';
wp_list_pages(); // echo is TRUE by default
echo '</ul>'; 
```

将输出`<ul>`标签内的所有参数。

如果您还没有，请查看[此](http://codex.wordpress.org/Function_Reference/wp_list_pages#Include_Pages_in_List) 链接以获取文档。

# c# - 多个框 C#

> ID：13666399
> 
> 赞同：1
> 
> 时间：2012-12-02T04:25:44.983
> 
> 标签：c#, winforms

我知道pictureBox 一次只能显示一张图片。我正在尝试为我的收藏中的每个图像创建一个图片框。例如，如果我的列表中有十个图像，那么该方法应该为这些相应的图像创建十个图片框，以便每个图片都显示在一个图片框中。我不确定哪个会更好 for 循环或 foreach 循环。每次循环增加变量 XCoordinate 和 YCoordinate 时，PictireBox 的位置都应该增加，这样 PictureBox 就不会在表单中相互重叠。该方法的原因是每次应用程序运行时，集合中的图像数量都会发生变化。这就是我不手动创建它们的原因。所以在它完成后，列表中的所有图片都应该出现在一个picture.Box中。盒子的大小应该一样，唯一的区别是表单上的位置和它们里面的图像组成了多个图片框。请任何帮助，我将不胜感激

什么应该看起来像[http://imageshack.us/photo/my-images/41/59536200.png/](http://imageshack.us/photo/my-images/41/59536200.png/)继承人感谢我正在处理的代码 onsoltion 大帮助。

```
public List<Image> returnImagesInList()
{
   return this.images;
}

private void createPictureBoxesForImages()
{

        foreach (Image file in  retrurnImagesInList())
        {
            try
            {
                int XCoordinate = 10;
                XCoordinate++;
                int YCoordinate = 5;
                YCoordinate++;
                PictureBox imageControl = new PictureBox();
                imageControl.Height = 100;
                imageControl.Width = 100;

                imageControl.Visible = true;
                imageControl.Location = new Point(XCoordinate, YCoordinate);
                Controls.Add(imageControl);
                imageControl.Image = file;
            }
            catch (Exception ex)
            {
                MessageBox.Show("Error: " + ex.Message);
            }
        }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T04:32:40.877

对于每个图片框，您只在 x 和 y 坐标中增加一个，并且它应该大于或等于 pictureobx 的宽度和高度。您在迭代中使用相同的值初始化坐标并带您回到开始的位置。

您需要将初始化从侧循环中取出，并给予比宽度更大的增量。当图片框到达表单的右端时，您必须增加 y 坐标。

```
int XCoordinate = 10;
int YCoordinate = 5;
foreach (Image ile in  retrurnImagesInList())
{
    try
    {   
        PictureBox imageControl = new PictureBox();
        imageControl.Height = 100;
        imageControl.Width = 100;
        XCoordinate += imageControl.Width+2;
        if(XCoordinate  > this.Width - imageControl.Width)
        {
            YCoordinate += imageControl.Height + 2;
            XCoordinate = 10;
        }
        imageControl.Visible = true;
        imageControl.Location = new Point(XCoordinate, YCoordinate);
        Controls.Add(imageControl);
        imageControl.Image = file;
    }
    catch (Exception ex)
    {
        MessageBox.Show("Error: " + ex.Message);
    }
} 
```

# hadoop - MapReduce 用于从 100TB 数据中提取的互相关数据集

> ID：13666406
> 
> 赞同：-1
> 
> 时间：2012-12-02T04:26:57.747
> 
> 标签：hadoop, mapreduce, hdfs

我有大约 100TB 的数据，其中每个数据（元素）的大小约为 1MB。我也有 N 个区域，由从数据中提取的 M 个元素组成。每个元素最多出现在 3 个区域中。一个区域内的 M 个元素必须互相关成一个 MxM 相关矩阵。我不确定 M 的平均大小，但它可以从小到 5 到大到几百不等。

在我们当前的实现中，我们产生线程来处理每个区域，并通过 NFS 读取文件来获取单个元素。事实证明，该解决方案受 I/O 限制，我们现在正在研究将数据和计算一起分布的方法。乍一看，MapReduce 似乎很适合这个问题，但我对范式还不够熟悉，无法确定。

假设我选择了 Hadoop。我的第一个想法是将数据作为块放入 HDFS，尝试使每个块尽可能地由来自同一区域的元素组成。然后每个 Map 任务将被赋予一组元素并发出（区域，元素）对。然后每个 Reduce 任务将获取一个区域的所有元素并执行互相关。但是，当然，我不确定这种直观的，也许是幼稚的方法是否是 MapReduce 的合理使用。

一方面，我不确定这里的数据/计算位置。我认为，一般来说，某些 Map 任务正在处理的数据很可能位于同一个节点上。但对于 Reduce 任务也是如此吗？

例如，如果我从我的 Map 任务中发出一个指向文件中某个位置的值，那么 Reduce 任务在同一节点上运行的机会是否很大？在 Map 阶段将数据读入内存，然后以某种序列化形式发出 1MB 元素会更好吗？这不会导致 RAM 中的所有 100TB 数据或复制到中间文件吗？

那么，这是 MapReduce 的一个很好的候选者，还是我应该在别处寻找解决方案？这对 MapReduce 来说是一个好问题，但却是一个糟糕的解决方案吗？提前感谢您的任何见解。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T06:15:57.653

对我来说，这听起来像是你试图不必要地添加减速器。假设 N 足够大，我会尝试以下操作：将每个区域（整个数据集的 1/N）插入映射器并在那里计算互相关矩阵。由于这里的 reducer 实际上并不是必需的，因此您可以完全忽略它并直接写出 map-phase 的结果。在 MapReduce 中，繁重的工作通常是在 map 阶段完成的，在这种情况下，如果您只寻找 M 个互相关矩阵，听起来就不需要 reducer。

> 我认为，一般来说，某些 Map 任务正在处理的数据很可能位于同一个节点上。但对于 Reduce 任务也是如此吗？

一般reduce任务需要将数据（即map任务的结果）传递给它们，然后才能对其进行操作。在将数据传递给减速器之前尽可能地压缩数据以最小化网络流量是一个好主意。

# javascript - 引导下拉按钮：单击页面的其他部分时如何隐藏下拉菜单？

> ID：13666408
> 
> 赞同：1
> 
> 时间：2012-12-02T04:27:34.853
> 
> 标签：javascript, twitter-bootstrap

[http://twitter.github.com/bootstrap/components.html#buttonDropdowns](http://twitter.github.com/bootstrap/components.html#buttonDropdowns)

参见上面的链接，当`dropdown-menu`显示时，外部 div`btn-group`会自动添加一个类“open”，当我单击页面的其他部分时，“open”类被删除，因此下拉菜单消失。

我的问题是`how to impl "click other part of page so the "open" class is removed?`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-02T04:33:25.210

### 您可以使用简单的 JavaScript 来重置：

```
$("body").click(function(){
    $(".open").removeClass("open");
}); 
```

我不明白您为什么要问这个问题，因为这是由 BootStrap 本身处理的。

# php - SQL PHP没有插入数据库

> ID：13666413
> 
> 赞同：1
> 
> 时间：2012-12-02T04:29:37.507
> 
> 标签：php, mysql

出于某种原因，我的东西没有插入到我的数据库中，而且我已经忽略了很多次..

AJAX 处理程序：

```
<?php
require_once('../../blog/inc/config.php');

$form_name = htmlspecialchars($_GET['form_name']);
$form_commentid = $_GET['form_commentid'];
$date = date('M jS Y | g:i a T');
$ip = $_SERVER['REMOTE_ADDR'];

 if($form_name == '') {
    echo("Name");

} else if($form_commentid == '') {
    echo("Comment ID");

} else {
mysql_query("INSERT INTO reportcomment (id, name, commentid, date, ip) VALUES     (NULL,'{$_GET['id']}','{$form_name}','{$form_commentid}','{$date}','{$ip}')");

    // output comment
    echo "success brah";
}
?> 
```

报告.php 文件：

```
<script type="text/javascript">
$(function() {

 $('#reset_form').click(function() {
 $('#name,#commentid').val('');
 });
 $('#submit').click(function() {

var name = $('#name').val();
var commentid = $('#commentid').val();

$.ajax({
url: '../../_lib/forms/report_ajax.php?id=<?php echo $_GET['id']; ?>',
data: { form_name: name, form_commentid: commentid },
success: function(data) {
    $('#report_comment').append(data);
    $(document).trigger('close.facebox');
}
});
});
});
</script>

      Name: <br />
      <input type="text" id="name" class="userpass"/>

      <input  type="text" id="commentid" class="userpass""/>

      <input type="submit" id="submit" value="Report" class="button" />
  <input type="reset" id="reset_form" name="submit" value="Reset" class="button" /> 
```

我也在使用 facebox 打开reporting.php 文件。

这是我的 SQL 表[http://screensnapr.com/v/2pZMN7.png](http://screensnapr.com/v/2pZMN7.png)

我真的不知道我做错了什么。有人可以帮我吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-02T04:37:42.903

您正在尝试将 6 个值插入到 5 列表中

```
插入报告评论（id、名称、commentid、日期、ip）值
                            1 2 3 4 5
  (NULL,'{$_GET['id']}','{$form_name}','{$form_commentid}','{$date}','{$ip}')")
      1 2 3 4 5 6

```

删除`NULL`值

# mongodb - MongoDB选择所有具有空值的键

> ID：13666415
> 
> 赞同：1
> 
> 时间：2012-12-02T04:29:49.517
> 
> 标签：mongodb

例如，我的文档如下：

```
{key1: value, key2: value}
{key1: value, key3: value}
{key1: value, key3: value, key4: value} 
```

我想返回一组结果，例如：

```
{key1: value, key2: value, key3: null, key4: null}
{key1: value, key2: null, key3: null, key4: null}
{key1: value, key2: null, key3: value, key4: value} 
```

我不知道MongoDB是否可以使用某种查询返回这种json结果？我想以表格形式呈现文档，表格单元格中的 null 将是空白的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T05:07:50.440

你需要它来过滤它的数据库，似乎更容易在渲染表格之前填充它。恕我直言，没有必要在无模式数据库上强加模式

取而代之的是抓住东西，例如（mongoid）

```
<table>

    <%=row.each do |r| %>
    <tr>
    <% r.fields.each do |f,v| %>
    <%val = r.send(f) || "n/a"%>
    <td><%=val %></td>
    <%end%>
    </tr>
    <%end%>
    </table> 
```

编辑：根据下面的宝贵评论，我取出了 JS 实现的链接 最好在更高层处理数据。我原来的观点仍然存在，只要检查你是否得到有意义的数据（无论如何你都应该这样做）并相应地渲染

# gcc - Netbeans 7.1.2 无法检测到 c++ 编译器

> ID：13666416
> 
> 赞同：0
> 
> 时间：2012-12-02T04:29:53.493
> 
> 标签：gcc, netbeans, g++

我已经完全安装了cygwin。但是 netbeans 无法检测到 gcc/g++ 编译器..

我如何将 gcc/g++ 用于 netbeans..

我还发现 c:\cygwin\bin 中缺少 gcc/g++。

帮我摆脱这些..谢谢..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T18:18:36.980

安装 cygwin 时是否选择了 gcc / g++ 包（Devel）？如果不使用选定的 gcc 或更好的方式安装 cygwin：安装整个 cygwin 包。

如果 Netbeans 无法找到您的编译器，请确保您已设置正确的环境变量 (PATH)。

# ios - UIScreen.MainScreen.Bounds 是 480x320 但应该更高

> ID：13666417
> 
> 赞同：0
> 
> 时间：2012-12-02T04:29:58.820
> 
> 标签：ios, xamarin.ios

我想知道为什么 UIScreen.MainScreen.Bounds 是 480 x 320，而屏幕模式是 940 x 680。如何设置正确的分辨率，因为我想针对 iPhone5。我已将模拟器设置为 iPhone 5。

我的屏幕看起来不像我想要的，我需要测试 iPhone 5 的分辨率。

我在哪里可以获得正确的界限，或者为什么界限不是应该的？

这是我的 appdelegate 代码

```
public override bool FinishedLaunching (UIApplication app, NSDictionary options)
        {
            // create a new window instance based on the screen size
            window = new UIWindow (UIScreen.MainScreen.Bounds);

            StartScreen homeScreen = new StartScreen();

            //add home screen to navgation controller
            // becomes the top most screen
            this.rootNavigationController = new UINavigationController();
            this.rootNavigationController.NavigationBarHidden = true;
            this.rootNavigationController.PushViewController(homeScreen, false);

            // set the root view controller on the window.  the nav controller witll handle the rest
            this.window.RootViewController = this.rootNavigationController;

            // If you have defined a view, add it here:
            // window.AddSubview (navigationController.View);

            // make the window visible
            window.MakeKeyAndVisible();

            return true;
        } 
```

# java - ArrayList 中的 ArrayList - 无法访问值

> ID：13666419
> 
> 赞同：2
> 
> 时间：2012-12-02T04:30:39.017
> 
> 标签：java, multidimensional-array, arraylist

所以这是我的方法：

```
public static ArrayList collectSchedule(ArrayList schedule, ArrayList list, int counter)
{
    ((ArrayList) list.get(counter)).add(schedule);
    System.out.println(list);
    return list;
}
public static ArrayList getClassInfo(int count)
{
    Scanner stdIn = new Scanner (System.in);
    String userInput;
    System.out.print("Enter the name of class #" + count + " : ");
    userInput = stdIn.nextLine();
    ArrayList x = getClassTime();
    x.add(0, userInput);
    x.add(1, getClassLength());
    x.add(2, getDayOfTheWeek());
    return x;
} 
```

因此，我从 getClassInfo（它是一个 ArrayList）中获取值“x”，并将其与一个数字（我想要它的位置的索引）和另一个 ArrayList（我们称之为“schedule”）一起输入到方法 collectSchedule 中。我将“x”（ArrayList）添加到 ArrayList“schedule”。如果我打印出“x”，它将显示“schedule”的所有值。（注意：我将多个不同的“x”实例添加到计划中！）。因此，如果我在“计划”中添加 3 个不同的“x”，它将分别打印出来（ [x, x, x][x, x, x][x, x, x] ）。我在从“schedule”中只获得一个“x”值时遇到了麻烦。

我认为这段代码可以工作，但它在编译时给了我一个错误。

```
public static void creation(ArrayList list)
{
    System.out.println((schedule.get(0)).x().get(1));
} 
```

谁能帮助我哪里出错了？我读过一些关于使用对象的东西？但不确定如何！

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-02T04:44:06.877

如果您开始使用泛型，您会发现使用集合要容易得多，即`List<List<String>> myList`. 此外，为什么不创建一些存储类型值而不是依赖索引列表的实际类呢？

那一边……

```
System.out.println((schedule.get(0)).x().get(1)); 
```

如果调度的类型是 ArrayList，那么 schedule.get(0) 将返回 Object 类型的东西，除非您执行显式转换。由于 Object 没有会产生错误的方法 x() 。您通常可以通过在一行中不包含如此多的链式函数调用来缩小这些内容的范围。这样做会导致很难判断给定错误指的是什么。

如果 schedule 被声明为`List<List<String>>`，甚至`List<List<Object>>`那么你就可以这样做：

```
List<String> classInfo = schedule.get(0);
String classLength = classInfo.get(1);
System.out.println(classLength); 
```

我*认为*这是你真正的目标

# ios - 未选中使用自动布局时导航栏丢失

> ID：13666420
> 
> 赞同：0
> 
> 时间：2012-12-02T04:31:10.070
> 
> 标签：ios, autolayout

我使用 xcode 4.5 构建了一个应用程序，目标为 ios6.0。在模拟器中效果很好。然后我尝试在我的 5.1（第一代 iPad）上运行。它因 NSLayoutConstraint 错误而崩溃。

然后我将目标设置为 5.1，并取消选中 Use Autolayout。现在它运行了，但缺少导航栏。

如果未选中 Use Autolayout，则对于 5.1 或 6.0 目标，设备和模拟器现在都是如此。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T06:57:09.660

我刚刚遇到了完全相同的问题并自己解决了。希望这对你有用。

1.  在项目导航器中选择 MainStoryboard.storyboard 以打开画布。
2.  稍微拖动导航栏。

重建，然后丢失的导航栏将再次出现。:-)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T02:33:37.927

因此，当您切换到“旧样式”布局时，您需要确保您的视图已正确设置是否有导航栏、标签栏等。

在这种模式下，您需要确保支柱和弹簧也正确。

# r - 一个带有 data.table 的简单循环

> ID：13666430
> 
> 赞同：5
> 
> 时间：2012-12-02T04:33:46.210
> 
> 标签：r, data.table

我想使用 data.table 做一个简单的循环。我有 20 个二分 (0,1) 变量（从 var_1 到 var_20），我想为此做一个循环：

```
dat[var_1==1, newvar:=1]
dat[var_2==1, newvar:=2]
dat[var_3==1, newvar:=3]
...
dat[var_20==1, newvar:=21] 
```

我的主要问题是我不知道如何使用循环指定 i（即 var_1==1，var_2==2...）。下面是一个简短的例子：

```
var_1  <- c(1, rep(0,9))
var_2  <- c(0,1, rep(0,8))
var_3  <- c(0,0,1, rep(0,7))
dat  <- data.table(var_1, var_2, var_3)

dat[var_1==1, newvar:=1]
dat[var_2==1, newvar:=2]
dat[var_3==1, newvar:=3] 
```

关于如何使用循环执行此操作的任何想法？谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-02T05:12:34.210

像这样的东西会起作用。

```
nams <- names(dat)
for(n in seq_along(nams)){
  nam <- nams[n] 
  char <- sprintf('%s==1',nam)
  dat[eval(parse(text=char)), newvar := n]
}
dat
var_1 var_2 var_3 newvar
1:     1     0     0      1
2:     0     1     0      2
3:     0     0     1      3
4:     0     0     0     NA
5:     0     0     0     NA
6:     0     0     0     NA
7:     0     0     0     NA
8:     0     0     0     NA
9:     0     0     0     NA
10:    0     0     0     NA 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-02T13:37:43.470

要利用 data.table 类，最好设置键。

```
dat[ ,newvar:= NA_integer_]
for(i in ncol(dat)) {
 setkeyv(dat, names(dat)[i])
 dat[J(1), newvar:=i]
} 
```

# ios - 如何让文本适合 UIButton？

> ID：13666431
> 
> 赞同：23
> 
> 时间：2012-12-02T04:34:21.867
> 
> 标签：ios, uibutton, uilabel

## 问题：

按钮大小足够了，但是当我更改标题时，标题文本无法适应按钮宽度。任何SDK功能都可以解决这个问题，还是我需要手动编码才能解决？

请参考以下图片。

在 nib 文件中设计。 ![在此处输入图像描述](../Images/7eccc8c2c0c6f0f2dd9831fa4a954e7f.png)

模拟器中的初始显示 ![在此处输入图像描述](../Images/eea050772415badb839c03fb207473c1.png)

当我更改标题文本时 ![在此处输入图像描述](../Images/5b36920b0ee6ba26751dbc99e68a2856.png)

## 之前尝试过一些方法

1.  _button.titleLabel.adjustsFontSizeToFitWidth = YES;
    这种方式会改变我的字体大小。我无法接受这种方式。

2.  [_button setTitleEdgeInsets:UIEdgeInsetsMake(10.0, 10.0, 0.0,0.0)];
    仅更改标签位置的方式，而不是标签大小。

3.  [_button.titleLabel sizeToFit];
    结果与图片（3）相同。

4.  [_button sizeToFit];
    标题移到左上角，标题还是一样的结果。

只是困惑，我的按钮尺寸足够大，为什么标题尺寸这么小？

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2014-05-11T12:19:25.197

用这个。

目标-c

```
button.titleLabel.numberOfLines = 1;
button.titleLabel.adjustsFontSizeToFitWidth = YES;
button.titleLabel.lineBreakMode = NSLineBreakByClipping; 
```

斯威夫特 2.0

```
button.titleLabel?.numberOfLines = 0
button.titleLabel?.adjustsFontSizeToFitWidth = true
button.titleLabel?.lineBreakMode = NSLineBreakMode.ByWordWrapping 
```

注意：Swift 代码礼貌：@Rachel Harvey

斯威夫特 5.0

```
button.titleLabel?.numberOfLines = 0
button.titleLabel?.adjustsFontSizeToFitWidth = true
button.titleLabel?.lineBreakMode = .byWordWrapping 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2013-04-17T17:59:08.653

对于遇到这个问题的人：

尝试使用设置器：

```
 [self.myButton setTitle:@"Title" forState:UIControlStateNormal];
 [self.myButton sizeToFit]; 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-08-06T13:03:26.600

还要确保标签不会调整以后的间距，因为这似乎优先于调整字体大小。还要确保 minimumScaleFactor < 1。

```
button.titleLabel.adjustsFontSizeToFitWidth = YES;
button.titleLabel.adjustsLetterSpacingToFitWidth = NO;
button.titleLabel.minimumScaleFactor = 0.5; 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2016-04-07T09:28:17.163

这是斯威夫特版本：

```
 let button = UIButton()
    button.titleLabel?.numberOfLines = 1
    button.titleLabel?.adjustsFontSizeToFitWidth = true
    button.titleLabel?.lineBreakMode = NSLineBreakMode.ByClipping 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-02T04:37:43.410

在 IB 中，只需选择按钮，进入编辑器菜单，然后选择“Size To Fit Content”

# ios - iOS UIText 字段停止响应按键事件。为什么？

> ID：13666434
> 
> 赞同：0
> 
> 时间：2012-12-02T04:34:45.257
> 
> 标签：ios, uitextfield, keypress

我可以让我的应用程序进入 UITextField 控件停止响应按键的状态。

我仍然有一个闪烁的插入符号。键盘出现了。UITextField 委托方法被正确调用。

唯一的问题是按键事件不起作用。它似乎发生在我调用了以下 UIViewController 方法之后：

```
- (void)transitionFromViewController:(UIViewController *)fromViewController
                    toViewController:(UIViewController *)toViewController 
                            duration:(NSTimeInterval)duration 
                             options:(UIViewAnimationOptions)options 
                          animations:(void (^)(void))animations 
                          completion:(void (^)(BOOL finished))completion; 
```

有什么想法可能导致这种情况吗？如何预防或修复？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T02:06:11.493

代码已经在需要的地方调用了 becomeFirstResponder，这就是键盘出现并且插入插入符号闪烁的原因。

但是，您的应用程序还需要一件事来接受按键。您的应用程序窗口必须是关键窗口。

事实证明，这是由于在网络操作期间使用了一个出现在前台的窗口而导致的，该窗口上有一个等待指示器。

那个窗口正在成为关键窗口。

当等待指示器窗口被关闭时，主应用程序窗口没有被分配为关键窗口。

因此，在我的应用程序委托中，我添加了以下行：

```
[waitIndicatorWindow resignKeyWindow];
[waitIndicatorWindow removeFromSuperview];
waitIndicatorWindow = nil;

[self.window makeKeyWindow]; <- added this line to fix the problem. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-02T10:37:46.127

过渡完成后，尝试

```
[yourTextField becomeFirstResponder] 
```

# node.js - 使用独立于 app.server() 的 node.js express 模块的匹配引擎

> ID：13666435
> 
> 赞同：2
> 
> 时间：2012-12-02T04:35:07.683
> 
> 标签：node.js, routing, express

在 express 3.0 中，我尝试将 express 仅用于路由目的，而不是将其与 app.server() 结合使用。这个想法是使用路由引擎，但作为另一个框架的一部分，我想在其中将 URL 空间分配给不同的子模块。理想情况下，我应该支持现有的路由引擎，这样人们就可以轻松地重新利用他们现有的代码库。

由于 express 似乎与关于 req 和 res 的假设相当多，我试图找出 express 依赖的两个子集，所以我没有错误。然后重新定义 res.render() 等以适应我的口味。

对于此代码： var app=require('express')(); // 注册路由... app.get('/test', function(req, res){ console.log("In test1."); });

```
// From: http://nodejs.org/api/http.html#http_class_http_serverrequest
var req1={ headers: {}, method: 'GET', url: "/test" };
var req2={ headers: {}, method: 'GET', url: "/no_match" };
var res={
  setHeader: function(a, b) {console.log(a, b);}
};
console.log("About to test routing now.");
app(req1, res); // ok, should call associated method.
app(req2, res); // Errors! 
```

第一个 app() 返回正常。但是第二个给出了一系列错误。Express 必须依赖于 req，这是必需的。但我无法理解为什么它应该依赖于响应对象，因为响应仅由应用程序方法使用。我应该创建 res 对象的哪个子集，这样我可以确信它适用于用户可能用于其应用程序的任何随机代码？

# java - 为什么我的计时器以毫秒而不是秒为单位运行？

> ID：13666436
> 
> 赞同：-2
> 
> 时间：2012-12-02T04:35:34.610
> 
> 标签：java, swing, timer

我使用 javax.swing 包中的 Timer 对象创建了一个秒表。当我实例化它时，我将延迟设置为 100 毫秒，但计时器似乎以毫秒而不是秒为单位运行。

```
import javax.swing.*;
import java.awt.*;
import java.awt.event.*;

public class StopWatch extends JApplet
{
   private JPanel timePanel;        
   private JPanel buttonPanel;    
   private JTextField time; 
   private int seconds = 0;
   boolean running = false;
   private Timer timer;

   public void init()
   {
       buildTimePanel();
       buildButtonPanel();

      setLayout(new GridLayout(3, 1));

      add(timePanel);
      add(buttonPanel);
   }

   private void buildTimePanel()
   {
      timePanel = new JPanel();

      JLabel message1 =
                new JLabel("Seconds: ");

      time = new JTextField(10);
      time.setEditable(false);

      timePanel.setLayout(new FlowLayout(FlowLayout.RIGHT));

      timePanel.add(message1);
      timePanel.add(time);
   }

   private void buildButtonPanel()
   {
      buttonPanel = new JPanel();

      JButton startButton = new JButton("Start");
      JButton stopButton = new JButton("Stop");

      startButton.addActionListener(new StartButtonListner());
      stopButton.addActionListener(new StopButtonListner());

      buttonPanel.add(startButton);
      buttonPanel.add(stopButton);

   }

   private class StartButtonListner implements ActionListener{
    @Override
    public void actionPerformed(ActionEvent e) {
        if(running == false){
            running = true;
            if(timer == null){
                timer = new Timer(100, new TimeActionListner());
                timer.start();
            } else {
                timer.start();
            }
        }

    }
   }
   private class StopButtonListner implements ActionListener{
    @Override
    public void actionPerformed(ActionEvent e) {
        if(running == true){
            running = false;
            timer.stop();
        }

    }
   }
   private class TimeActionListner implements ActionListener{

    @Override
    public void actionPerformed(ActionEvent e) {
        time.setText(Integer.toString(seconds));
        seconds++;
    }  
   }

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-02T04:38:28.863

很确定您需要将延迟设置为 1000 而不是 100

# uml - 我做我的UML图正确吗？

> ID：13666438
> 
> 赞同：0
> 
> 时间：2012-12-02T04:35:49.690
> 
> 标签：uml, class-diagram, staruml

所以正如提到的，这是一个家庭作业问题，所以请放轻松。基本上我必须为两个子系统创建一个用例图。我已经掌握了它的要点，但是我无法区分这两者，并且对它们如何相互关联感到困惑。

文档：

```
 Manufacturing

Factory Operation
Each internal factory organises itself into manufacturing modules. Each module has a module leader and a number of technicians. Many internal factories can make the same part.  A part may be made up of other parts in which it is called an assembly. Each part has unique part number and a CAD/CAM drawing which is stored electronically. The drawing holds details such as issue number, sizes, materials and sub parts if it is an assembly.  The manufacturing system holds a manufacturing route for each part.  This details how the part should be made on the CNC machine in terms of manufacturing process (for instance lathe -2 hours, mill -3 hours, grind -1 hour , broach -1 hour, drill -1 hour, hardening - 1 hour, annealing -1 hour , plating - 0.5 hour).   A schedule has to be set up by the module leader which states on a weekly basis what CNC machines will be used and who will use them, broken down by the hour.  The module leader does this by looking at all the orders received at the beginning of the week and also considering any orders anticipated and the deadlines that have to be met.  Changes sometimes need to be made to the schedule to cope with unexpected staff absence, delays or machine break down. The module leader has to forecast the raw materials (e.g.  a bar of steel) needed to be bought in the make the parts  on a daily basis. Orders for raw materials are to  a single specialist supplier.  The module leader uses forecasts,  bill of materials and part manufacturing specifications to work  out what raw materials are needed. Daily, weekly, monthly, quarterly and annual plans are made for raw materials.

Traceability
Traceability of components is very important in the aircraft industry.  If a part fails     when in use, it is returned to the factory for a diagnosis.  If the factory finds a fault in a component it must trace that component back to its original batch and perhaps recall all parts in the same batch.  Every bar of metal has a batch number set by the supplier. If a technician makes a part from that bar of metal the bar’s batch number must be maintained for traceability. Parts also have a batch number.  This is different to the batch number of the metal bars.  The batch number of the metal bars are set by the supplier of the metal. The batch number of the parts are set by the factory. If a number of parts are made in one manufacturing run (which might involve a number of processes) they belong to the same batch.  Typically the factory will receive an order for a number of parts and will keep all those parts in the same batch.  This is to ensure good traceability from when the part fails in the air right back to the bar of metal that was used to make it. The part batch number is assigned when parts come off the manufacturing process and into store.

Stores
Each factory has a store for finished goods. When parts leave manufacturing they must be booked into store.  When parts leave store they must be booked out.  The store has a number of containers to hold the parts. The store needs to record where the parts are held ( i.e. container number).  Stores are responsible for despatching parts. 
```

抱歉，它的格式不正确，我不知道该怎么做。

任务：

```
**Manufacturing ( Bill of Materials and Manufacturing Method)**
Bill of Materials (how assemblies are composed),  
Manufacturing for each part (how each part must be manufactured)

**Manufacturing (Scheduling and Traceability)**
Machine Shop Scheduling (who is using which machine and when)
Traceability (Batch numbers, linking to orders, booking into store when complete)
Factory stores 
```

到目前为止的用例图：

[在此处输入链接描述](http://i46.tinypic.com/zv1lza.jpg)

[在此处输入链接描述](http://i46.tinypic.com/990y0l.jpg)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T05:56:25.780

uml 没有正确性的概念。[根据这本书](https://rads.stackoverflow.com/amzn/click/com/0596009828)，uml 是一个词，“正确”，如果它传达了你想要理解的想法。

这里有一些建议我会更好地传达这个想法，其他人可能不同意： 接收错误部分应该[是](https://rads.stackoverflow.com/amzn/click/com/0596009828)接收部分的扩展。
商店用户是谁？谁是模块负责人？你可以再详细一点吗？书籍部分和记录部分是否足够相似，可以组合？保留零件是否取决于诸如“订购零件”之类的内容，“设置批号”是制造零件的可选吗？如果是这样，extends 很好，但是如果设置批号是制作零件的必要步骤，那么制作零件应该“使用”或“包含”设置批次。

# php - 将 Div 中所有拖放的图像保存到桌面？

> ID：13666439
> 
> 赞同：0
> 
> 时间：2012-12-02T04:35:58.143
> 
> 标签：php, javascript, jquery, ajax

我创建了一个包含 Canvas 元素的网页，我可以在其中拖放多个图像。我还能够在画布上生成所有拖放图像的单个图像。在这个站点的帮助下，我能够在 Javascript 中执行此操作，但在跨浏览器时遇到问题 - 只能在 Chrome 中完全运行。caniuse.com/#search=canvas。

这是我用来生成 Canvas 图像的：

```
 function convertCanvasToImage() {
        var canvas = document.getElementById('canvas');

        var image_src = canvas.toDataURL("image/png");
        window.open(image_src);

    } 
```

这将打开一个带有图像的新窗口（带有拖放的图像）。

由于跨浏览器问题，我能够重建页面以支持我正在寻找使用跨 Chrome、IE、Safari 和 FF 的 Javascript、HTML 和 JQuery 工作的各种功能。没有使用 Canvas 元素。

重新创建的页面使用放置图像的 Div 而不是 Canvas。

如何从这些多个丢弃的图像中生成单个图像并通过按钮将它们保存到 HDD？也就是说，一旦将所有图像拖放到 Div，就可以单击“保存”按钮，以便我可以将 Div 中所有图像的当前位置下载为单个 PNG。

令人惊讶的是，到目前为止，我在搜索中找到的最接近的是几年前的专有 dollmakerscript，它使用了我所看到的 Javascript 和 PHP。我在这里和其他地方找到的大多数东西似乎都指的是 Canvas 或在线快照服务。

我在这里创建了一个新页面的 JSFiddle [http://jsfiddle.net/babakt/hvXUK/](http://jsfiddle.net/babakt/hvXUK/)。底部的“bktone”被破坏了，因为它指的是不在 JSFiddle 中的图像文件夹——它改变了使用的背景图像。

谢谢。

# http - 如何跨多个服务器完成缓存失效？

> ID：13666443
> 
> 赞同：1
> 
> 时间：2012-12-02T04:36:22.167
> 
> 标签：http, caching, webserver, server-farm, cache-invalidation

这是一个与平台无关的问题。我知道某些平台允许共享缓存等，但其中大部分只是“魔术”。我想知道它们是如何实际实施的，技术细节是什么。

因此，如果我有一个跨 10 台服务器运行的 Web 应用程序和一个简单的负载均衡器（不能进行粘性会话等等），我如何才能可靠地使整个服务器场的缓存失效？

我不是专门谈论共享缓存或类似的东西。例如，您有一个人登录您的网站。处理请求的服务器缓存他的信息用户/密码哈希等，以防止返回数据库。然而，随后他决定更改他的用户名或密码。您需要从可能拥有它的每个服务器中使此缓存值无效。

通常如何处理这样的场景？（假装不缓存它太贵了:)）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T07:30:35.827

如果您在谈论 HTTP 缓存，最常见的方式是 HTCP - [https://www.rfc-editor.org/rfc/rfc2756](https://www.rfc-editor.org/rfc/rfc2756)

# java - 如何确保类型参数是不可变的

> ID：13666444
> 
> 赞同：2
> 
> 时间：2012-12-02T04:36:24.930
> 
> 标签：java, generics

```
class Pair<A,B> {
    final A first;
    final B sec;

    Pair(A f, B s){
        this.first = f;
        this.sec = s;
    }
} 
```

有没有办法确保 A 和 B 是不可变类型？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-02T04:43:23.957

不，没有办法将类型识别为不可变，更不用说绑定了。

您可以创建一个标记接口（一个没有方法的接口，例如`Serializable`），用于在您的项目中识别不可变类，并让您的团队遵守它。

例如：

```
interface Immutable {}

class Pair<A extends Immutable, B extends Immutable> {
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-02T08:22:00.303

不。事实上，语言中根本没有概念或“可变”或“不可变”类型。“不可变”只是我们用来描述一种恰好不提供任何允许您更改任何内部状态的方法或公共字段的类型的术语。除此之外，“可变”和“不可变”类型的工作方式之间没有区别。

# java - 指针引用指向哪个对象？

> ID：13666445
> 
> 赞同：2
> 
> 时间：2012-12-02T04:36:49.203
> 
> 标签：java, pointers, reference

```
String s=new String ("happy"); 
```

上面的例子创建了2个对象。指针引用指向哪个对象？

**已解决**：已创建 2 个对象：（“happy”）和happy。指针 s 指向（“happy”）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-02T04:40:09.620

根据[javadoc](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/String.html#String%28java.lang.String%29)

> 换句话说，新创建的字符串是基于此文本的参数字符串的副本。除非需要原始的显式副本，否则不需要使用此构造函数，因为字符串是不可变的。

因此，引用指向新创建的字符串。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-02T04:42:16.610

字符串是不可变的。这意味着 String 的实例不能更改。您正在创建新变量以引用不同但仍然不可变的 String 实例。

它允许对字符串的更改以更改列表之类的方法分支出原始字符串

```
String s = new String("happy"); 
```

一个字符串对象（“快乐”）被创建。变量`s`指的是新创建的对象。

# objective-c - 如何在 iOS 6 中将步行轨迹或路线显示为地图叠加层

> ID：13666447
> 
> 赞同：0
> 
> 时间：2012-12-02T04:37:05.510
> 
> 标签：objective-c, ios, mapkit, mkoverlay

我一直在尝试在 Internet 上搜索带有一些示例代码的教程，该示例代码显示了如何在地图上将轨道或路线显示为叠加层。我找到了一些教程，但它们用于显示圆圈和其他形状。我想逐点显示轨迹。

谁能给我一个好的教程的链接，或者有人能指出我正确的方向吗？

任何帮助将不胜感激。

干杯

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-25T10:34:18.910

推荐的方式显示在 Apples Breadcrumbs Demo App 中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-02T05:16:18.167

尝试使用 MKPolyline。您使用路线上每个转折点的坐标创建一个 CLLocation 数组。您使用该数组初始化 MKPolyline 对象。这将在您指定的每个点之间绘制一条实线。然后，您可以调整 Line 的 dashPattern 和 dashPhase 如果您的点相距足够远以至于您需要拆分线。

我从称为点的经纬度点的 NSMutableArray 开始：

```
NSMutableArray *currentPoint;
int count = [points count];
double lat, long;

CLLocationCoordinate2D unitPath[count];
for (NSInteger index = 0; index < count; index++)
{
    currentPoint = [points objectAtIndex:index];

    Lat = [[currentPoint objectAtIndex:ORDER_TARGLAT] doubleValue];
    Long = [[currentPoint objectAtIndex:ORDER_TARGLONG] doubleValue];
    CLLocation *pathPoint = [[CLLocation alloc] initWithLatitude:Lat longitude:Long];
    unitPath[index] = pathPoint.coordinate;
}

MKPolyline *routeLine = [MKPolyline polylineWithCoordinates:unitPath count:count];

routeLine.title = _title;
routeLine.subtitle = [[NSString alloc] initWithFormat:@"%d",ID];
routeLine.strokeColor = [UIColor whiteColor];
routeLine.fillColor = [UIColor whiteColor];
NSNumber *lineGapSize = [NSNumber numberWithInteger:10];
routeLine.dashPattern = [NSArray arrayWithObjects:lineGapSize,lineGapSize,nil];
routeLine.dashPhase = lineDashPhase;
routeLine.lineWidth = 4; 

[mapView addOverlay:routeLine] 
```

PS ORDER_TARGLAT 和 ORDER_TARGLONG 只是枚举的一部分，用于指定我的数组中项目的位置。根据您的代码替换。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-01-29T10:27:14.397

```
MapView* mapView = [[[MapView alloc] initWithFrame:
                         CGRectMake(0, 0, self.view.frame.size.width, self.view.frame.size.height)] autorelease];

[self.view addSubview:mapView];

Place* home = [[[Place alloc] init] autorelease];
home.name = @"Home";
home.description = @"Sweet home";
home.latitude = 29.860323999999990000;
home.longitude =77.893305000000050000;

Place* office = [[[Place alloc] init] autorelease];
office.name = @"Office";
office.description = @"Bad office";
office.latitude = 28.644251400000000000;
office.longitude = 77.121190500000010000;

[mapView showRouteFrom:home to:office]; 
```

在 ios 7.0 中使用这个

# ssh - 来自命令行的 IOS 越狱 ssh/移动终端警报

> ID：13666448
> 
> 赞同：1
> 
> 时间：2012-12-02T04:37:33.197
> 
> 标签：ssh, terminal, jailbreak, openssh, cydia

我想知道是否有命令让 IOS ssh 或移动终端弹出警报，或者 cydia 中是否有终端插件来添加此功能。

谢谢你的帮助！:)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-07T02:37:41.480

您正在寻找来自 cydia 的 sbutils。它带有一个名为 sbalert 的工具，可以让你做到这一点。如果您需要帮助，请键入`sbalert --h or sbalert --help`

# php - 获取字符串变量 PHP 中 URL 的参数值

> ID：13666451
> 
> 赞同：0
> 
> 时间：2012-12-02T04:37:48.883
> 
> 标签：php, parsing, query-string

我在一个字符串中有这个 url。这不是当前页面 URL，但它在字符串存储中供我访问。

```
$query_string = 'Itemid=364&option=com_easyblog&id=2&view=entry'; 
```

我知道如果它在 URL 中，我们可以使用它`$_GET["fname"]`来获取等值。但是如果 url 在字符串中，我不知道如何查找该值。`option``id``option`

我试图`strpos($query_string, 'com_easyblog') != FALSE`查看`com_easyblog`URL 中是否存在，它工作正常。但是当谈到检查`id`我被卡住了。你们能帮忙吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-02T04:43:36.643

这可能是您正在寻找的 [http://php.net/manual/en/function.parse-str.php](http://php.net/manual/en/function.parse-str.php)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-02T04:44:38.763

您要解析查询字符串（[parse_str 函数](http://php.net/manual/en/function.parse-str.php)）

# c - 如何在 Vigenere Cipher 中循环我的密钥

> ID：13666452
> 
> 赞同：1
> 
> 时间：2012-12-02T04:37:59.923
> 
> 标签：c, vigenere

我正在为 Vigenere Cipher 编写一个程序。但我不知道如何让我的密钥重复直到我的纯文本结束。现在我的代码所做的只是加密与我的密钥的字母数量相等的字母。例如，我输入“dog”的密钥，我的纯文本是“catdog”，它给了我一个“fozdyw”的加密文本。这意味着它只加密前 3 个字母。

这是我的一些加密代码：

```
for (int j=0, k=0; j < strlen(text); j++, k++)
      {         
        if((text[j] >= 'A') && (text[j] <= 'Z'))
            text[j] = ((text[j] -'A') + key[k]) % 26 +'A';

        if((text[j] >= 'a') && (text[j] <= 'z'))
            text[j] = ((text[j] -'a') + key[k]) % 26 +'a';

        printf("%c", text[j]); 
      } 
```

我究竟做错了什么？正确的做法应该是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-02T04:42:22.703

当您到达键的末尾时，返回索引 0，这是通过使用除以键的大小（AKA 模数）的余数来完成的：

```
 for (int j=0, k=0; j < strlen(text); j++, k++)
  {         
    if((text[j] >= 'A') && (text[j] <= 'Z'))
        text[j] = ((text[j] -'A') + key[k % size_of_the_key]) % 26 +'A';

    if((text[j] >= 'a') && (text[j] <= 'z'))
        text[j] = ((text[j] -'a') + key[k % size_of_the_key]) % 26 +'a';

    printf("%c", text[j]); 
  } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-09T08:57:46.843

ascii 表是一个很好的参考。也就是说，防止符号被加密。准确地说，努力使用特定范围的字母。例如在 65 到 90 之间表示大写，否则终止该程序。

# java - 试图解析被javascript隐藏的html

> ID：13666453
> 
> 赞同：2
> 
> 时间：2012-12-02T04:38:02.640
> 
> 标签：java, javascript, html, jsoup

我创建了一个简单的 java 脚本，它使用 Jsoup 来解析一页数据。然而，网站创建者已经更改了页面，以至于如果页面上有一定数量的数据，它会给您提供优化搜索的意见，或者，您可以单击一个链接，数据就会出现。我一直在努力寻找解决方案，网址没有改变，链接的 href 只是`javacript:void(0);`. 有什么方法可以让我只使用我的脚本来获取包含数据的 html 吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-09-03T14:53:18.180

尝试使用像[Selenium](http://www.seleniumhq.org/)这样驱动 Web 浏览器的东西。这是我唯一用过的，从来不需要别的。我确信有不同的可能更适合您，您应该测试一些，或者不测试。一旦您使用 selenium（或您选择的任何 Web 驱动程序）获得 javascript 元素，将它们解析为 JSoup 元素。这样您就不必完全更改库，而只需添加一个。

此外，您还可以通过查看浏览器地址栏的变化来解决 javascript 问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-03T11:41:25.817

使用 firefox 或 chrome 的开发者工具。当您单击链接时，可能会触发 ajax 调用。在网络选项卡上，您可以看到 javascript 实际请求的 url 以及结果的结构（可能是 json）。然后您可以直接访问该 url 以加载其余结果。

或者类似的东西^^

# string - Unity3d 中的简单 C# 或 unityscript 编码。需要从 nx2 数组中删除所有不同的单词

> ID：13666454
> 
> 赞同：0
> 
> 时间：2012-12-02T04:38:05.173
> 
> 标签：string, split, unity3d, unityscript

抱歉，但我对 Unity 中的编码非常陌生。我有一个 nx2 数组，如图所示：

```
var questans = new String[10, 10];
questans[0,0]="Hey How's it going?";
questans[0,1]="You know me Just chillin'";
questans[1,0]="Hello there friend";
questans[1,1]="Well met to you too!";
questans[2,0]="I like chocolate pudding";
questans[2,1]="Good for you"; 
```

我基本上需要编写一个可以遍历这个数组的 for 循环，并给我一个包含所有不同单词的数组。因此，输出应该是：[Hey, How's, it, going.....]

我编写了一个函数来执行此操作，但我无法拆分字符串，因为 Unity 使用 string.split 给我的代码一些奇怪的错误：

我曾写过：

```
var ff:String [] // Temporary variable. I'm just testing for the first string questans[0,0]
ff=quesans[0,0].Split(" "[0]); 
```

但是，它给了我 System.String[] 作为输出......即使在迭代 ff 时也是如此。

有人可以给我一种方法，我可以如何遍历整个数组（我可以遍历它）并获得每个不同的单词，而无需手动为其编写 for 循环？

谢谢！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T07:12:00.597

对数组集合使用**Distinct**方法，如此处所示。
[独特价值 1](http://msdn.microsoft.com/en-us/library/bb348436.aspx)
[独特价值 2](http://msdn.microsoft.com/en-us/library/bb338049.aspx)

这将对您有所帮助，并且您不需要任何粘性循环。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-02T06:21:35.193

我要告诉你的第一件事是你的变量“ **questans** ”*不是*“ **quesans** ”。所以“ *ff=quesans....* ”不应该工作。也许那是你的问题？如果不：

这其实很简单。从概念上讲，您所写的是一段工作代码。尝试这个：

```
var ff: String[questans.Length]; //Returned string array
var linenumber = 0; //Current line, 0-index
var spacecount = 0; //Current space in current line, 0-index
foreach (var line in questans)
{
    foreach (var spaceSplit in line.Split(" "))
    {
        ff[linenumber, spacecount] =  spaceSplit[spacecount];
        spacecount++;
    }
    spacecount = 0;
    linenumber++;
} 
```

在这段代码中，我嵌套了两个 foreach 循环以捕获每行中的每个空格并返回一个由空格分隔的行数组数组。

另外，附带说明一下，在创建数组**questans**时，我建议您对其进行初始化并将其全部分配在同一代码行中。对于数组**问题，**我会这样做：

```
var questans: String[10, 10] = [["Hey How's It Going?",
        "You know me Just chillin'"],
        ["Hello there friend",
        "Well met to you too!"],
        ["I like choclate pudding",
        "Good for you"]]; 
```

**编辑**：

*如果你想在没有循环的情况下通过整个数组，那么我很茫然。对不起，但我怀疑有这样的方法。*

# python - Python 收集系统统计信息

> ID：13666458
> 
> 赞同：1
> 
> 时间：2012-12-02T04:39:38.293
> 
> 标签：python, statistics

我正在尝试使用 python 收集系统统计信息。主要是在寻找已经这样做的 libery 或 github 项目。我希望能够收集/记录以下内容。

*   CPU 使用率和/或平均负载
*   磁盘可用空间
*   磁盘 IO 吞吐量
*   Ram 使用情况（免费、活动、缓存）
*   网络 IO
*   使用带宽d
*   正常运行时间
*   在服务器监控中任何其他有用的东西。

编辑：我主要是在 Linux 系统中寻找支持，稍后我将转向 Windows 系统。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-02T04:42:55.177

[尝试在此处](http://code.google.com/p/psutil/)使用 psutil 模块，看看显示的示例。但是，`DISK IO`您可能必须使用`wmi`和`pywin32`模块。

例如，对于`DISK QUEUE LENGTH`windows 使用这个：

```
from win32pdh import *
import time

while True:
    path = MakeCounterPath((None,"PhysicalDisk","_Total",None,0,"Avg. Disk Queue Length"),0)
    query_handle = OpenQuery()
    counter_handle = AddCounter(query_handle, path)
    query_handle = OpenQuery()
    counter_handle = AddCounter(query_handle, path)
    CollectQueryData(query_handle)
    time.sleep(2)
    CollectQueryData(query_handle)
    (counter_type, value) = GetFormattedCounterValue(counter_handle, PDH_FMT_DOUBLE)
    print value
    CloseQuery(query_handle) 
```

它使用 Windows 上 perfmon 应用程序的计数器。对于 linux，有多种 DISK IO 工具。

对于 linux`DISK IO`在`iotop` [这里查看](http://www.cyberciti.biz/hardware/linux-iotop-simple-top-like-io-monitor/attachment/iotop-output-screenshot/)

此外，Linux diskstats 的示例使用它，它会定期解析`/proc/diskstats`

```
def diskstats_parse(dev=None):
    file_path = '/proc/diskstats'
    result = {}

    # ref: http://lxr.osuosl.org/source/Documentation/iostats.txt
    columns_disk = ['m', 'mm', 'dev', 'reads', 'rd_mrg', 'rd_sectors',
                    'ms_reading', 'writes', 'wr_mrg', 'wr_sectors',
                    'ms_writing', 'cur_ios', 'ms_doing_io', 'ms_weighted']

    columns_partition = ['m', 'mm', 'dev', 'reads', 'rd_sectors', 'writes', 'wr_sectors']

    lines = open(file_path, 'r').readlines()
    for line in lines:
        if line == '': continue
        split = line.split()
        if len(split) == len(columns_disk):
            columns = columns_disk
        elif len(split) == len(columns_partition):
            columns = columns_partition
        else:
            # No match
            continue

        data = dict(zip(columns_disk, split))
        if dev != None and dev != data['dev']:
            continue
        for key in data:
            if key != 'dev':
                data[key] = int(data[key])
        result[data['dev']] = data

    return result 
```

我希望这有帮助。:)

# java - mysql连接器错误，将代码从java转换为c++

> ID：13666464
> 
> 赞同：1
> 
> 时间：2012-12-02T04:40:15.213
> 
> 标签：java, c++, boost, mysql-connector

我有一个有效的java代码

```
//**Correct Java query**
    QueryString = "INSERT IGNORE INTO stock_prices (symbol,timestamp,open,high,low,close,vol) VALUES ('"
      + data[0] + "', '" + data[1] + "', " + data[2] + ", " + data[3] + ", " + data[4] + ", "
      + data[5] + ", " + data[6] + ")"; 
```

但是，在 java 中，您可以轻松地添加 double 或 int 字符串，而在 c++ 中则不能，我已经为 C++ 中的查询尝试了多种方法，但它并没有像我认为的那样工作。我究竟做错了什么？C++ 中有没有更好的方法来做到这一点。这是我的查询。

```
//***Incorrect C++ query**
 sql::Statement *stmt;
 stmt = con->createStatement();

for (int i = 0; i < (int)timestamp.size(); i++) {
  string s = symbols[ii];
  string t = timestamp[i];
  double v = vwap[i]; 

string query = "INSERT INTO stock_prices(symbol,time_stamp,vwap) VALUES('" + s + "', '" + t + "', " + boost::lexical_cast<std::string>(v) + ")";
 stmt->executeQuery(query);
} 
```

上面的代码运行 1 次 for 循环迭代，然后抛出以下错误

```
 terminate called after throwing an instance of 'sql::SQLException'
  what():  
Aborted 
```

我打印出 C++ 查询（如果我将它复制粘贴到 mysql 中就可以了）

```
INSERT INTO stock_prices(symbol,time_stamp,vwap) VALUES('A', '2010-01-04 08:01:00', 0) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T04:43:04.863

您不应该在其余元素上使用**' （单引号）吗？**

```
QueryString = "INSERT IGNORE INTO stock_prices
(symbol,timestamp,open,high,low,close,vol) VALUES 
       ('"
       + data[0] + "', '" + data[1] + "', '" 
       + data[2] + "', '" + data[3] + "', '" 
       + data[4] + "', '" + data[5] + "', '" 
       + data[6] + "'
       )"; 
```

而不是这个：

```
string s = "blah";
string t = "bla";
double v = 43;    

string query = "INSERT INTO stock_prices(symbol,time_stamp,vwap) VALUES('" + s + "', '" + t + "', " + boost::lexical_cast<std::string>(v) + ")"; 
```

试试这个：

```
double v = 43.0;
char vs[20];
sprintf(vs,"%f",v);

string query = "INSERT INTO stock_prices(symbol,time_stamp,vwap) VALUES('" + s + "', '" + t + "', " + vs + ")"; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-02T05:12:11.743

不，尝试使用标头 string.h

```
char query[1024]; /* you get 1024 chars to try it */
char qstart="INSERT INTO stock_price_(symbol,timestamp,vol) VALUES(";
char qstr2="whatever s is ";
char separator=",";
char leftelips="(";
char rightelips=")";

strcpy(query,qstart);
strcat(query,qstr2); 
strcat(query,separator);
/* ...........  e.t.c.  */ 
```

# scala - scala动态确定类型

> ID：13666465
> 
> 赞同：7
> 
> 时间：2012-12-02T04:40:45.280
> 
> 标签：scala

我想创建其类型由运行时数据确定的对象实例：

```
trait Business
case class Business1() extends Business 
case class Business2() extends Business

object Business {
  def fromData(data:Array[Byte]): Business = data(0) match {
    case 1 => new Business1
    case 2 => new Business2
    case _ => throw new RuntimeException("data error")
  }
} 
```

上面的代码可以完成它的工作，但有一个问题是它被关闭了。每当我实现一个新的`Business`子类时，我都必须修改`Business.fromData`代码，例如

```
case 3 => new Business3 
```

我如何定义`Business.fromData`一次，以后可以添加`Business3`，`Business4`而不注册它？

**编辑**

我终于意识到这是一个完美的用例`Multimethod`，即基于某个参数的函数进行调度。所以更普遍的问题应该是“**如何在scala中做多方法**”？我相信设计模式的存在只是因为语言无能，这就是为什么我不愿意接受基于工厂的答案。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-02T10:33:16.410

你也可以这样做。虽然我不确定这是否比匹配案例更好。取决于你想要做什么。

```
class Business {
  override def toString = "Business"
}

val factories: Map[Int, () => Business] = Map(
  1 -> (() => new Business {
    override def toString = "Business1"
  }),
  2 -> (() => new Business {
    override def toString = "Business2"
  }),
  3 -> (() => new Business {
    override def toString = "Business3"
  })
)

object Business {
  def fromData(data: Array[Byte]): Business = factories(data(0))()
}

val b = Business.fromData(Array(1,1,2))
println(b) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-02T06:22:33.377

这并不能解决您的问题，但是如果您制作`Business`了“密封”特征，那么编译器将捕获任何非详尽匹配，直到您更新`fromData`：

```
sealed trait Business
case class Business1() extends Business
case class Business2() extends Business

biz match {
    case Business1 => println("Business1")
} 
```

……会导致……

```
warning: match is not exhaustive!
missing combination            Business2 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-02T11:44:39.607

经典的答案是使用带有注册的工厂，也就是抽象工厂。

因此，鉴于您上面的层次结构，您将创建一个“工厂”地图，就像在另一个答案中提供的那样，但您还将创建对象创建者的并行层次结构，并在启动时注册它们，如下所示：

```
trait BusinessCreator {
  def createBusiness() : Business 
}
object BusinessCreator1() extends BusinessCreator {
  override def createBusiness() : Business = new Business1()

  factories += "1" -> this
}
//etc. 
```

另一种更“Scalaish”的方法是跳过并行层次结构，只需在工厂对象中从伴随对象注册到每个类的创建者函数，但想法是相同的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-02T23:50:18.203

这个如何？

```
val factories = collection.mutable.Map(
  1 -> new Function0[Business] { 
    private[this] lazy val single = new Business {
      override def toString = "Business1"
    }
    override def apply() = single 
  }
  ,2 -> new Function0[Business] { 
    private[this] lazy val single = new Business {
      override def toString = "Business2"
    }
    override def apply() = single 
  }
  ,3 -> new Function0[Business] { 
    private[this] lazy val single = new Business {
      override def toString = "Business3"
    }
    override def apply() = single 
  }
) 
```

# c++ - 如何安全地将包含的对象（菜单项）与需要容器（菜单）的 API 同步？

> ID：13666467
> 
> 赞同：1
> 
> 时间：2012-12-02T04:41:26.943
> 
> 标签：c++, oop, design-patterns, synchronization, wrapper

为了我自己的喜悦，我正在尝试想出一种更好的方法来简化使用 Windows API 菜单的方法。虽然我确实找到[了这个](http://www.codeproject.com/Articles/471662/Windows-Development-in-Cplusplus-working-with-menu)，并且实际上可能会按类别区分菜单项的类型，但我有点像这样：

* * *

**描述**

```
class MenuItem {...};

class MenuBar { //for the main menu of a window (file, help, etc)
    std::list<MenuItem> items; //and whatever else
};

class PopupMenu { //for dropdown (and possibly context) menus
    std::list<MenuItem> items; //and whatever else
}; 
```

该类`MenuItem`具有`check()`, `disable()`,等功能`setText()`，以及更通用的功能，例如`setType()`（字符串、位图、分隔符）和`setState`（启用、检查、默认）。

在我看来，这些`Menu`类本身会提供类似`appendStringItem()`、`appendItem`、的功能`insertBitmapItem()`，并提供对项目本身的访问。我也在争论是否要有一个`Menu`基类，虽然很欣赏输入，但这不是问题的主题。

* * *

**通缉用途**

如果这只是 C++，我不会有问题。但是，我的问题出现在将我的菜单项与 Windows 使用的菜单项同步时，因为我的类中的更改不会自动更改真正的菜单项。为了改变菜单项，必须给它一个菜单，以及该菜单中的位置，或者该项目的 ID。这是有道理的，但从使用的角度来看，为什么我不能这样做：

```
MenuBar menuBar; //pretend this is filled
menuBar.itemAt(2).setText("New text"); 
```

* * *

**问题**

好吧，问题是我希望这会更改实际菜单上的菜单项，但不会。我需要某种方式来了解拥有该项目的菜单，因为每个项目都有内部存储的 ID。

我可以在以下适当的插入函数中执行此操作`MenuBar`：

```
bool MenuBar::someInsertionFunction(unsigned index, MenuItem newItem) {
    newItem.setOwner(*this); //owner as a raw HMENU type, with *this converting
    items.emplace_back(index, newItem); //index checked, of course
} 
```

完成后，我必须`MenuItem`检查每个 setter 以确保所有者有效，如果有效，则使用 API 函数更新项目。同样，在 getter 中，我会调用 API 函数来获取当前状态，但前提是所有者有效。这允许用户创建自己的`MenuItem`s 列表并通过它初始化 a `Menu`。此方法还允许用户完全访问以修改内部项目列表而不会产生任何后果，因为`MenuItem`该类在保护自己方面做得很好。

但这与我发现的一个好概念背道而驰：**为什么包含的对象应该知道包含它们的内容？**是否有处理这个问题的设计模式，或者我最好的选择是打破这个“规则”，以便能够让菜单项控制自己（以及其他菜单项），而不是由菜单？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T22:08:40.643

实际上，我想出了一个我非常喜欢的答案。它结合了能够让菜单项自行更改，同时仍然对其他项目保持一些保护。

首先，`MenuItem`存储一个函数来改变自己：

```
std::function<BOOL(UINT, LPMENUITEMINFO)> changeRealItem; 
```

此函数基于 Windows API `SetMenuItemInfo`，但缺少几个参数。那是因为我们要在`Menu`类中绑定它：

```
Menu() {
    //one menu item as an example
    item.changeRealItem = std::bind(
        NonWinapiFunction(SetMenuItemInfo), //explained below
        *this,                              //with *this converting to a HMENU
        std::placeholders::_1,              //first argument is the ID
        FALSE,                              //previous is an ID, not a position
        std::placeholders::_2               //second argument is pointer to info
    );
} 
```

现在，在 中`MenuItemClass`，我基本上可以这样做：

```
MENUITEMINFO info = *this; //passing *this as an HMENU causes address problems
changeRealItem(id(), &info); 
```

作为概念证明，我举了一个`MessageBox`例子：

```
#include <functional>
#include <windows.h>

template<typename Ret, typename... Args>
std::function<Ret(Args...)> NonWinapiFunction(Ret(*WINAPI func)(Args...)) {
    return std::function<Ret(Args...)>(func);
}

struct MenuItem {
    MenuItem(std::function<int(const char *)> func) : message(func){}

    void changeSomething(const char *text) const {
        message(text);
    }

private:
    std::function<int(const char *)> message;
};

struct Menu {
    Menu() : item(std::bind(NonWinapiFunction(MessageBox), nullptr, std::placeholders::_1, "Title", MB_OK)){}
    MenuItem &getItem() {
        return item;
    }

private:
    MenuItem item;
};

int main() {
    Menu menu;
    menu.getItem().changeSomething("I can't change other menu items!");
} 
```

最后一点是关于`NonWinapiFunction`。问题是您不能使用( ) 调用约定来调用`std::bind`函数。为了避免这种情况，我们制作了一个可变参数模板来从函数中提取返回类型和参数类型，并返回具有相同签名但具有正确调用约定的 a，然后可以与.`WINAPI``__stdcall``std::function``std::bind`

另一部分是可以将任意 ID 传递到函数中，并且需要额外的行来传递所需的 winapi 结构的地址。我相信两者都可以以通用方式解决（只要存在从包装器到包装类型的转换运算符），但我还没有完全弄清楚。

# jquery - MVC 4 Flexigrid 在调试模式下工作正常，但在部署站点时不显示数据

> ID：13666468
> 
> 赞同：1
> 
> 时间：2012-12-02T04:41:43.020
> 
> 标签：jquery, asp.net-mvc, flexigrid

我已经开始尝试学习 MVC 4 并进行了粗略的尝试。当 VS2010 处于调试模式时，我设法让 Flexigrid 在显示数据库表中的数据时工作，但是当我部署站点时，我的 flexigrid 根本不显示任何记录。据我所知，它根本没有击中控制器。我已经没有关于如何解决这个问题的想法了......

```
 $('#MySkillList').flexigrid({
        url: '/Home/ListMySkills',
        dataType: 'json',
        colModel: [
            {
            display: 'SkillName',
            name: 'SkillName',
            width: 180,
            sortable: true,
            align: 'left'
        },{
            display: 'SkillID',
            name: 'SkillID',
            width: 100,
            sortable: true,
            align: 'left',
        },{
            display: 'PersonID',
            name: 'PersonID',
            width: 100,
            sortable: true,
            align: 'left',
        },{
            display: 'Validated',
            name: 'Validated',
            width: 100,
            sortable: true,
            align: 'left'
        }],
        sortname: "SkillName",
        sortorder: "asc",
        usepager: true,
        title: 'My Skills',
        useRp: true,
        rp: 15,
        showTableToggleBtn: true,
        width: 600,
        height: 200
    }); 
```

控制器

```
 public ActionResult ListMySkills(FreeLancererSkills fModel)
    {
        string GUID = LoginGuid;
        string SQL = "EXEC FreelancerSkills_Get '"+GUID+"'";

        DBLayer DBL = new DBLayer();
        DataSet DS = DBL.GetData(connString, SQL);

        List<FreeLancererSkills> iList = new List<FreeLancererSkills>();

        var model = new FreelancerSkillsCollection();
        int i = 1;

        foreach(DataRow DR in DS.Tables[0].Rows)
        {
            FreeLancererSkills iSkills = new FreeLancererSkills();

            iSkills.LoginGuid = GUID;
            iSkills.PersonID = DR["PersonID"].ToString();
            iSkills.SkillID = DR["SkillID"].ToString();
            iSkills.SkillName = DR["SkillName"].ToString();
            iSkills.Validated = DR["Validated"].ToString();

            iList.Add(iSkills);

            i++;
        }

        TempData["LoginToken"] = GUID;
        return JsonResult(iList.ToList(), 1, i);
    }

    private JsonResult JsonReturn(List<FreeLancererSkills> items, int page, int total)
    {
        return Json(
                new
                {page, total, rows = items.Select(x => new
                           {
                                id = x.SkillID,
                                // either use GetPropertyList(x) method to get all columns 
                                cell = new object[] { x.SkillName, x.SkillID, x.PersonID, x.Validated }
                            })
                }, JsonRequestBehavior.AllowGet);
    } 
```

希望有人能够帮助我弄清楚发生了什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-29T08:16:04.660

如果你使用 Chrome，你可以`/Home/ListMySkills`检查`F12->Network tab`. 请检查一下 。

另一个检查点`firebug`用于检查加载数据的页面内是否有任何错误。

或者你可以调试`populate`flexigrid.js 中的方法函数，看看你的代码会发生什么。

# java - BFS 最短路径：边权重为 1 或 2

> ID：13666472
> 
> 赞同：1
> 
> 时间：2012-12-02T04:42:45.787
> 
> 标签：java, graph-algorithm, shortest-path, breadth-first-search

我正在尝试使用 BFS 实现最短路径算法。那就是我试图找到从指定顶点到每个其他顶点的最短路径。但是，它是所有边权重为 1 或 2 的特殊情况。我知道可以使用 Dijkstra 算法完成，但我必须使用广度优先搜索。

到目前为止，我有一个 BFS 的工作版本，它首先搜索与权重为 1 的边相连的顶点。如果找不到，则返回与权重为 2 的边相连的顶点。经过考虑，这不是找到最短路径的正确方法。问题是我想不出任何理由为什么 BFS 会使用权重 1 或 2，而不是任何权重。

这是代码：

```
public void addEdge(int start, int end, int weight)
  {
  adjMat[start][end] = 1;
  adjMat[end][start] = 1;
  edge_weight[start][end] = weight; 
  edge_weight[end][start] = weight; 
  }

// -------------------------------------------------------------
public void bfs()                   // breadth-first search
  {                                // begin at vertex 0
  vertexList[0].wasVisited = true; // mark it
  displayVertex(0);                // display it
  theQueue.insert(0);              // insert at tail
  int v2;

  while( !theQueue.isEmpty() )     // until queue empty,
     {
     int v1 = theQueue.remove();   // remove vertex at head
     // until it has no unvisited neighbors
     while( (v2=getAdjUnvisitedVertex(v1)) != -1 ){// get one,
        vertexList[v2].wasVisited = true;  // mark it
        displayVertex(v2);                 // display it
        theQueue.insert(v2);               // insert it
        }
     }  // end while(queue not empty)

  // queue is empty, so we're done
  for(int j=0; j<nVerts; j++)             // reset flags
     vertexList[j].wasVisited = false;
  }  // end bfs()
// -------------------------------------------------------------
// returns an unvisited vertex adj to v -- ****WITH WEIGHT 1****
public int getAdjUnvisitedVertex(int v) {
    for (int j = 0; j < nVerts; j++)
        if (adjMat[v][j] == 1 && vertexList[j].wasVisited == false && edge_weight[v][j] == 1){
            //System.out.println("Vertex found with 1:"+ vertexList[j].label);
            return j;
        }
    for (int k = 0; k < nVerts; k++)
        if (adjMat[v][k] == 1 && vertexList[k].wasVisited == false && edge_weight[v][k] == 2){
            //System.out.println("Vertex found with 2:"+vertexList[k].label);
            return k;
        }
    return -1;
}  // end getAdjUnvisitedVertex()
   // -------------------------------------------------------------
}  
////////////////////////////////////////////////////////////////
public class BFS{
public static void main(String[] args)
  {
  Graph theGraph = new Graph();
  theGraph.addVertex('A');    // 0  (start for bfs)
  theGraph.addVertex('B');    // 1
  theGraph.addVertex('C');    // 2

  theGraph.addEdge(0, 1,2);     // AB
  theGraph.addEdge(1, 2,1);     // BC
  theGraph.addEdge(2, 0,1);     // AD

  System.out.print("Visits: ");
  theGraph.bfs();             // breadth-first search
  System.out.println();
  }  // end main()
   } 
```

那么问题是，我不知道为什么 BFS 可以解决权重为 1 或 2 的最短路径问题，而不是任何权重的任何边缘。

任何帮助表示赞赏。谢谢！

编辑：**这是问题所在：您希望找到从 s 到其余顶点的最短路径。这可以使用 Dijkstra 算法完成，但您需要使用广度优先搜索策略。您应该能够做到这一点，因为任何边缘权重都是 1 或 2。描述将解决您的问题的 BFS 更改**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T05:35:37.070

边权重限制对 BFS 的意义在于，它保证如果从 A 到 B 有一条边，那么从 A 到 B 没有更短的路径。AB 边的最大权重为 2。a 的最小总权重从 A 到 C 到 B 的路径也是 2。

# image - Twitter Bootstrap：将进度条与单个文件上传一起使用

> ID：13666479
> 
> 赞同：1
> 
> 时间：2012-12-02T04:43:46.393
> 
> 标签：image, file-upload, twitter-bootstrap, progress-bar

使用 Twitter Bootstrap，我如何在选择要上传的文件后立即使用带有文件上传的进度条。

# c - 使用文件符号和命令行语句从文件中获取输入并将其保存在另一个文件中，用 C 语言。无法获得输出

> ID：13666484
> 
> 赞同：0
> 
> 时间：2012-12-02T04:44:43.447
> 
> 标签：c, file, command-line

我正在编写一个程序，使用文件符号和命令行语句从文件中获取输入，将输入填充到结构中，并将输入保存到另一个文件中。我也有一个排序功能，但我忽略了它，因为我认为它与我的问题无关。这是我第一次使用文件表示法，我无法将任何输出输入到我的输出文件中。关于为什么的任何想法？我已经尝试了一切，但无法让它工作。谢谢您的帮助。

```
/* structure declaration */
struct personCatalog {
    char name[50];
    char address[50];
    char cityState[50];
    char zipCode[7];
} ;

/* function prototypes */
void getPerson (struct personCatalog *arrayOfPointers[], int maxNumberOfPeople, FILE      *inputFile);

void sortPerson (struct personCatalog *arrayOfPointers[]);

void putPerson(struct personCatalog *arrayOfPointers[], FILE *outputFile);

int main(int argc, const char * argv[]) {

    int maxNumberOfPeople = 51;

    struct personCatalog *pointerArray[maxNumberOfPeople];

    /* add file streaming*/

    FILE *inFile, *outFile;

    inFile = fopen("/Users/myName/Desktop/inputText.txt", "r");

    /* add command line statements */
    if (( inFile = fopen(argv[1], "r")) == NULL) {
        printf("Can't open the input file");
        exit(1);
    }

    getPerson(pointerArray, maxNumberOfPeople, inFile);

    sortPerson(pointerArray);

    outFile = fopen("/Users/myName/Desktop/outputText.txt", "w");

    if ((outFile = fopen(argv[2], "w")) == NULL) {
        printf("Can't open the output file");
        exit(1);
    }

    putPerson(pointerArray, outFile);

    fclose(inFile);
    fclose(outFile);

    return 0;

}

/* function to fill the structures */
void getPerson (struct personCatalog *arrayOfPointers[], int maxNumberOfPeople, FILE *inputFile){
    struct personCatalog *tempPointer;
    int buffer = 512;
    char stringCollector[buffer];
    int num = 0;

    while ((num < maxNumberOfPeople) && (fgets(stringCollector, buffer, inputFile) != NULL) ) {

        /* dynamic memory allocation */
        tempPointer = (struct personCatalog *) malloc(sizeof(struct personCatalog));

        /* filling the structures */
        strcpy(tempPointer->name, stringCollector);
        fgets(tempPointer->address, buffer, inputFile);
        fgets(tempPointer->cityState, buffer, inputFile);
        fgets(tempPointer->zipCode, buffer, inputFile);

        arrayOfPointers[num] = tempPointer;

        num++;
    }

    /* adding a null character to the end of the pointer array */
    arrayOfPointers[num] = '\0';
}

    /* print function */
void putPerson(struct personCatalog *arrayOfPointers[], FILE *outputFile){

    int num = 0;

    while (arrayOfPointers[num] != NULL) {
        printf("------Person #%d------\n", num);
        fputs(arrayOfPointers[num]->name, outputFile);
        fputs(arrayOfPointers[num]->address, outputFile);
        fputs(arrayOfPointers[num]->cityState, outputFile);
        fputs(arrayOfPointers[num]->zipCode, outputFile);

        /* memory free */
        free(arrayOfPointers[num]);

        num++;
    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T00:04:21.847

正确的代码在 main

```
int main(int argc, const char * argv[]) {

int maxNumberOfPeople = 51;

struct personCatalog *pointerArray[maxNumberOfPeople];

/* add file streaming*/

FILE *inFile, *outFile;

if (argc != 3) {
    printf("Usage: /Users/myName/Library/Developer/Xcode/DerivedData/progarmName-cglrwvyyabrneocwtllxqdhygaaj/Build/Products/Debug/progarmName /Users/myName/Desktop/inputText.txt /Users/myName/Desktop/outputText.txt\n");
    exit(1);
}

/* add command line statements */
if (( inFile = fopen(argv[1], "r")) == NULL) {
    printf("Can't open the input file");
    exit(1);
}

getPerson(pointerArray, maxNumberOfPeople, inFile);

sortPerson(pointerArray);

if ((outFile = fopen(argv[2], "w")) == NULL) {
    printf("Can't open the output file");
    exit(1);
}

putPerson(pointerArray, outFile);

fclose(inFile);
fclose(outFile);

return 0;

} 
```

# javascript - 根据 Dropdown 切换 DIV 的可见性

> ID：13666486
> 
> 赞同：2
> 
> 时间：2012-12-02T04:45:21.017
> 
> 标签：javascript, html

我以前从未使用过 Javascript，只有 HTML 和 CSS。我试图让我的信息仅在从我的下拉列表中选择时显示。我不知道任何Javascript，所以任何帮助都将不胜感激。到目前为止，这是我的 html：

```
<!DOCTYPE HTML>
<html>
<head>
<meta charset="utf-8" />
<title>Gone Fishin'</title>
<link href="finale.css" rel="stylesheet" type="text/css">
</head>

<div id="wrapper">
<div id="nav">

<ul>
<li><a href="Index.html">About Us</a></li>
<li><a href="Species.html">List by Species</a></li>
<li><a href="County.html">List by County</a></li>
<li><a href="apply.html">Reservations</a></li>
</ul>
</div>
<body>

<div id="content">

<p>ontent</p>

<fieldset>
<legend>Choose your Target</legend>
<select name="option" id="options">
<option value=""></option>
<option value="1">American Shad</option>
<option value="2">Black Crappie</option>
<option value="3">Bluegill</option>
<option value="4">Brook Trout</option>
<option value="5">Brown Trout</option>
<option value="6">Carp</option>
<option value="7">Chain Pickerel</option>
<option value="8">Channel Catfish</option>
<option value="9">Flathead Catfish</option>
<option value="10">Largemouth Bass</option>
<option value="11">Muskellunge</option>
<option value="12">Norhtern Pike</option>
<option value="13">Pumkpinseed</option>
<option value="14">Rainbow Trout</option>
<option value="15">Readbreast Sunfish</option>
<option value="16">Rock Bass</option>
<option value="17">Sauger</option>
<option value="18">Saugeye</option>
<option value="19">Smallmouth Bass</option>
<option value="20">Steelhead</option>
<option value="21">Striped Bass</option>
<option value="22">Walleye</option>
<option value="23">White Bass</option>
<option value="24">White Crappie</option>
<option value="25">White Perch</option>
<option value="26">Yellow Perch</option>
</select>
<div id="option">
<div id="1" style="display: block">Test 1</div>
<div id="2">Test 2</div>
<div id="3">Test 3</div>
<div id="4">Test 4</div>
<div id="5">Test 5</div>
</div>

</fieldset>
</div>
</body>
</div>

</html> 
```

这是我的 CSS：

```
@charset "utf-8";
/* CSS Document */

/*General Styles*/

* {font-family:Verdana, Geneva, sans-serif;}

#wrapper {width:85%;
        margin:auto;
        background-color:#00CC00;}

/*End of General Styles*/

/* nav div styles */

#nav {background-color:#FF0000;
    text-align:center;}

#nav ul li {display:inline-block;
        background-color: #67e667;
        border:5px dashed;
        width: 90px
        text-align:center;}

#nav ul li a:link {background-color:#a60000;
                width: 90px;}

#nav ul li a:visited {background-color: #009999;}

#nav ul li a:hover {background-color: #a64b00;}

/* end nav styles */

/* content div styles*/

#content    {padding: 5px;}

#option     {display:none;} 

/*end content styles*/

/*start form styles*/
fieldset    {background-color:#ff7400;
            color:white}

label   {display:inline-block;
    width: 150px;
    float:left;
    margin-right: 3px;}

#form li{margin-bottom:10px;}

#dtg    li{margin-bottom:5px;} 
```

感谢您收到的任何帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T04:58:45.517

首先设置这样的类：

```
<div id="option">
<div class="tab tab-open" id="option1">Test 1</div>
<div class="tab" id="option2">Test 2</div>
<div class="tab" id="option3">Test 3</div>
<div class="tab" id="option4">Test 4</div>
<div class="tab" id="option5">Test 5</div>
</div> 
```

然后添加这个脚本

```
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>
<script>
$('#options').change(function(e) {
    $('#option .tab-open').removeClass('tab-open');
    $('#option'+$(this).val()).addClass('tab-open');
});
</script> 
```

和风格

```
<style>
.tab {display: none;}
.tab-open {display: block;}
</style> 
```

id 也不应该以 html 中的数字开头，所以我更改了它。

PS java≠javascript

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-02T05:01:33.030

包含任何 jQuery 库并在 html HEAD 中添加这个简短而神奇的脚本：

```
<script src="http://path/to/jquery-1.7.2.min.js" type="text/javascript"></script>
<script>
$(document).ready(function(){
    $('#options').change(function(){
        var sel = $(this).val();
        $('#'+sel).parent().children().hide();
        $('#'+sel).parent().show();
        $('#'+sel).show();
    });
});
</script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-02T04:53:51.980

1.  使用 jQuery。它会让你的生活更简单
2.  一旦你包含了 jquery

```
 $("#options").change(function(){
 $("#option div").hide();//hide all
 $("#option " + $("#options").val()).show();//hide all
 }); 
```

# python - 无法从重定向的标准输出中读取

> ID：13666488
> 
> 赞同：1
> 
> 时间：2012-12-02T04:47:01.650
> 
> 标签：python

我没有经验`os.pipes()`，因此将不胜感激。

问题：我想将我的进程的标准输出重定向到一个管道，并从另一端读取它。我的初稿是这段代码。我似乎在写入管道的写入端，但随后我无法从读取端读取它，并且读取调用阻塞..我想有一些愚蠢的错误 - 这是由于我对如何做到这一点缺乏了解作品。

```
import os
import time

r, w = os.pipe()
w = os.fdopen(w, 'w')
r = os.fdopen(r, 'r')

os.dup2(w.fileno(), sys.stdout.fileno())
a = "Now printing ...\n"
print a
b = os.read(r.fileno(), 10)
if b.find(a) == -1:
    raise 'Could not work!'

w.close()
r.close() 
```

**编辑：**弄错了。我没有设置`sys.stdout`到新的`fd`. 以下行修复了它：

```
sys.stdout = w.fileno() 
```

# python - 令牌还记得我保存在数据库中的烧瓶登录吗？

> ID：13666492
> 
> 赞同：2
> 
> 时间：2012-12-02T04:47:34.007
> 
> 标签：python, cryptography, flask, flask-login

所以通常在我使用的大型网站中，您希望将一些会话信息保存到数据库中，这样 cookie 就不会被轻易复制。

使用flask-login 有一种使用token_loader 的方法，可以实现查询会话表的功能，例如将令牌映射到id。

但这意味着会话表将与用户表大小相同。

```
id = db.Column(db.Integer, primary_key=True)
token = db.Column(db.String(250), unique=True)
uid = db.Column(db.Integer, unique=True)

@login_manager.token_loader
def token_load(token):
    return User.sessions.first().token 
```

我见过有 8 MB 的充满用户表信息的网站。例如，站点会被 Drupal 中的会话表行阻塞。以这种方式存储令牌是否明智？每个用户只需要一行告诉我们他们的代币价值吗？

基本上，它就像一个密码表，用于识别拥有 cookie 而不是实际登录的用户。

有人在烧瓶登录的任何地方看到过这个实现吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T07:40:15.090

我只会使用用户表中的附加字段。这将避免数据在另一个表中重复。如果您只在其中保存 ID 和令牌，我认为没有任何意义。但是，如果您打算向其添加更多信息（例如创建令牌的时间，其他一些更安全的内容并稍后验证令牌，生成令牌的 IP 地址或其他），那么您当然可以将需要单独的表。我的 2c :)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T17:14:22.513

我想你可能把事情复杂化了。如果您想使用存储在服务器端而不是 cookie 中的会话，您还可以使用 redis 之类的东西来存储会话。您所要做的就是使用以下示例编写自己的会话接口：

[http://flask.pocoo.org/snippets/75/](http://flask.pocoo.org/snippets/75/)

现在，如果您想在 365 天内使用“记住我”，那么只需在您的烧瓶应用程序中执行此操作

```
from datetime import timedelta
app.secret_key = 'some secret random string'
session.permanent = True
app.permanent_session_lifetime = timedelta(days=365) 
```

# java - (Java) 不使用参数或 ModelAndView 访问 Spring Model

> ID：13666494
> 
> 赞同：0
> 
> 时间：2012-12-02T04:48:23.143
> 
> 标签：java, spring, model-view-controller, parameters, model

对不起标题。我想不出更好的措辞。

有什么方法可以设置 Spring 将提供页面的默认模型，而无需先将其作为 @RequestMapping 方法中的参数进行检索？

我正在使用方面来获取控制器方法的返回值（返回视图）并将其插入模型中，然后渲染一个不同的全局视图，该视图然后包含我添加到模型中的内容。这适用于请求模型作为参数的方法。

但是，我还希望能够捕获所有未显式请求模型并仍将返回值插入其中的方法（通过 @AfterReturning 建议）。有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-02T22:14:13.543

我不会使用`@Autowired`on `HttpServletRequest`，因为它会让未来从事线程安全代码的开发人员感到困惑。

相反，您应该使用 a`@ModelAttribute`或`Interceptor`.

### @ModelAttribute

请参阅： [http ://static.springsource.org/spring/docs/3.1.x/spring-framework-reference/html/mvc.html#mvc-ann-modelattrib-method-args](http://static.springsource.org/spring/docs/3.1.x/spring-framework-reference/html/mvc.html#mvc-ann-modelattrib-method-args)

但是你可以做这样的事情并将这个方法添加到你的控制器中：

```
@ModelAttribute
public preloadModel(HttpServletRequest request, ModelMap model) {
    //Add stuff to model.
} 
```

### 拦截器

请参阅：[http ://static.springsource.org/spring/docs/3.1.x/spring-framework-reference/html/mvc.html#mvc-handlermapping-interceptor](http://static.springsource.org/spring/docs/3.1.x/spring-framework-reference/html/mvc.html#mvc-handlermapping-interceptor)

```
public class PreloadModelInterceptor extends HandlerInterceptorAdapter {

    @Override
    public void postHandle(HttpServletRequest request, 
                       HttpServletResponse response, 
                       Object handler,
        ModelAndView modelAndView) throws Exception {
    // add model attibutes for your view to see but not your controller
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-02T16:16:44.383

好吧，我找到了解决方法。或者也许这就是底层 Spring 框架所做的一切。我只是在 HttpServletRequest 中自动装配并调用了 setAttribute。似乎工作正常。

# javascript - javascript字符串相等

> ID：13666495
> 
> 赞同：-6
> 
> 时间：2012-12-02T04:49:06.800
> 
> 标签：javascript, jquery

我有一个非常奇怪的 jquery 问题：

```
if(response==="success") {
    alert("I am here");
    $('#uploadfile').html('<img src="./uploads/'+file+'" alt="" /><br />'+file);
}
else {
    $('#uploadfile').html(response);
    //$('#attached1').val("error");
} 
```

在此代码中，如果 response equal `success`，`uploadfile`元素将显示“成功”。`alert("I am here")`不会显示。

我不知道为什么？上面代码中的错误是什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-02T04:56:21.570

尝试：

```
if($.trim(response) === "success"){
  ...... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-02T04:57:02.413

可能是您的浏览器阻止了警报？检查是否有诸如“此页面阻止警报”之类的指示。

当我们测试包含大量警报的页面时，就会发生这种情况。如果某些浏览器认为页面创建了太多警报，则它们会停止显示警报。

尝试改用 console.log("Message...") 。

# c - 结构体和指针

> ID：13666497
> 
> 赞同：1
> 
> 时间：2012-12-02T04:49:24.400
> 
> 标签：c, pointers, struct

我有几个关于结构和指针的问题

对于这个结构：

```
typedef struct tNode_t {
    char *w;
} tNode; 
```

如果我想更改/知道我需要使用`t.w = "asdfsd"`而不是*w 的值`t->w = "asdfasd"`怎么办？

而且我`t.w = (char *) malloc(28*sizeof(char));` 在没有测试代码的情况下成功编译了它，是否有不需要 tt 的原因？

样品主要：

```
int main()
{
    tNode t;
    char w[] = "abcd";
    //t.word = (char *) malloc(28*sizeof(char));
    t.word = w;
    printf("%s", t.word);
} 
```

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-02T05:00:59.043

`t->w`是 ie 的简写，如果是指向结构的指针，`(*t).w`则使用箭头才有意义。`t`

此外，由于您分配的字符串是硬编码的（因此，在编译时确定），因此无需在运行时动态分配其内存。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-02T05:00:46.373

看看这个教程： http: [//pw1.netcom.com/~tjensen/ptr/ch5x.htm](http://pw1.netcom.com/~tjensen/ptr/ch5x.htm)

```
struct tag {
char lname[20];      /* last name */
char fname[20];      /* first name */
int age;             /* age */
float rate;          /* e.g. 12.75 per hour */
}; 
```

好吧，所以我们知道我们的指针将指向一个使用 struct 标签声明的结构。我们用声明声明这样一个指针：

```
struct tag *st_ptr; 
```

我们将它指向我们的示例结构：

```
st_ptr = &my_struct; 
```

现在，我们可以通过取消引用指针来访问给定的成员。但是，我们如何取消引用指向结构的指针呢？好吧，考虑一下我们可能想要使用指针来设置员工年龄的事实。我们会写：

```
(*st_ptr).age = 63; 
```

仔细看看这个。它说，将括号内的内容替换为 st_ptr 指向的内容，即结构 my_struct。因此，这分解为与 my_struct.age 相同。

然而，这是一个相当常用的表达式，C 的设计者创建了一个具有相同含义的替代语法，即：

```
st_ptr->age = 63; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-02T05:00:49.950

> 如果我想更改/知道 *w 的值，我需要使用 tw = "asdfsd" 而不是 t->w = "asdfasd" 怎么办？

如果您`t`是指针，则需要使用`t->w`. 否则你应该使用`t.w`.

> 在我的测试代码中，是否有不需要 tt 的原因？

在您的代码中，您已经将您设置`t.word`为指向存储您的`char w[] = "abcd";`. 所以你不需要`malloc`为你的`t.word`.

另一个`malloc`需要的例子是：

```
tNode t;
t.word = (char *) malloc(28*sizeof(char));
strcpy(t.word, "Hello World");
printf("%s", t.word); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-02T05:00:54.220

> 如果我想更改/知道 *w 的值，我需要使用 tw = "asdfsd" 而不是 t->w = "asdfasd" 怎么办？

`t`是 a `tNode`，而不是指向 的指针`tNode`，因此`.`是适当的访问器。

> 我在没有 tw = (char *) malloc(28*sizeof(char)); 的情况下成功编译了它 在我的测试代码中，是否有不需要 tt 的原因？

这不是必需的，因为`"abcd"`仍在范围内，因此`w`可以指向它。如果你想`w`指向持久内存管理的内容，它必须像使用这一行一样分配自己的内存。

# java - 如何获取不在 html 源中但在浏览器中可见的数据？

> ID：13666498
> 
> 赞同：0
> 
> 时间：2012-12-02T04:49:28.267
> 
> 标签：java, javascript, html, jsoup, data-extraction

我想要的数据在浏览器中是可见的，但我在 html 源代码中找不到。我怀疑数据是由脚本生成的。我想对这类数据进行分级。可以使用 Jsoup 吗？我知道 Jsoup 只是不执行 Javascript。

以[这个页面](http://nd.edu/)为例，我想抓取 Academics -> COLLEGES & SCHOOLS 下的所有学院和学校。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T04:53:50.203

如果 dom 内容是通过脚本或插件生成的，那么您真的应该考虑使用像[phantomjs](http://phantomjs.org/)这样的可编写脚本的浏览器。然后你可以写一些 javascript 来提取数据。

我没有检查您的链接，我假设您正在寻找不特定于任何页面的一般答案。

# asp.net - System.Net.Mail.MailAddress 允许在电子邮件地址中使用逗号吗？

> ID：13666499
> 
> 赞同：1
> 
> 时间：2012-12-02T04:50:06.170
> 
> 标签：asp.net, email

最近，我更新了一些代码以使用 System.Net.Mail.MailAddress() 来检查电子邮件地址是否有效。不久之后，我注意到域名中带有逗号的一些电子邮件地址被认为是有效的，例如，下面的代码将表明该电子邮件地址是有效的？？？

好心疼！——你们其他人是怎么处理这个的？？

```
dim ok as Boolean

dim test_str as String = "someone@comma,com"

dim email as System.Net.Mail.MailAddress

ok = true

Try 
   email = new System.Net.Mail.MailAddress( test_str )
Catch ex As Exception
   ok = false
End Try   

if ( ok ) then
   response.write( "Valid" )
else
   response.write( "INVALID" )
end if 
```

# android - 安卓：TabHost NullPointerException

> ID：13666501
> 
> 赞同：0
> 
> 时间：2012-12-02T04:50:31.103
> 
> 标签：android, nullpointerexception, android-tabhost

父视图代码，其中有一个刷新按钮：

```
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    requestWindowFeature(Window.FEATURE_CUSTOM_TITLE);  
    final TabHost tabHost = getTabHost();   
    tabHost.addTab(tabHost.newTabSpec("Tab1")      
            .setIndicator("All", getResources().getDrawable(R.drawable.all))      
            .setContent(new Intent(this, All.class)
            .addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP)));      
    tabHost.addTab(tabHost.newTabSpec("Tab2")      
            .setIndicator("One", getResources().getDrawable(android.R.drawable.one))      
            .setContent(new Intent(this, One.class)
            .addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP)));  
    tabHost.addTab(tabHost.newTabSpec("Tab3")   
            .setIndicator("Two",getResources().getDrawable(android.R.drawable.two))   
            .setContent(new Intent(this, Two.class)
            .addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP))); 
    tabHost.addTab(tabHost.newTabSpec("Tab4")   
            .setIndicator("Three",getResources().getDrawable(android.R.drawable.three))   
            .setContent(new Intent(this, Three.class)
            .addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP))); 
    tabHost.getTabWidget().bringToFront();
    setContentView(tabHost);
    getWindow().setFeatureInt(Window.FEATURE_CUSTOM_TITLE,R.layout.title_bar);      
    tabHost.setCurrentTab(0);
} 
```

我在每个子视图中定义了一个按钮，我使用了这个

```
refreshButton = (ImageButton) getParent().findViewById(R.id.refresh); 
```

获取父视图中的按钮但 refreshButton 始终为 null 并且出现异常： **java.lang.RuntimeException:Unable to start activity ComponentInfo{ParentView}:java.lang.NullPointerException。**

所以请帮我解决这个问题，我该如何解决这个问题。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T06:05:33.520

因为 getWindow().setFeatureInt(Window.FEATURE_CUSTOM_TITLE,R.layout.title_bar); 在显示的 OneClass 之后运行，因此该按钮始终为空。我使用广播来解决这个问题

# version-control - 哪个头被标记为尖端？

> ID：13666502
> 
> 赞同：1
> 
> 时间：2012-12-02T04:51:37.640
> 
> 标签：version-control, mercurial

[文档](http://hgbook.red-bean.com/read/managing-releases-and-branchy-development.html)说：

> 提示标签是一个特殊的“浮动”标签，它始终标识存储库中的最新版本。

“最新”是什么意思？它是 UTC 时间最长的那个吗？还是最近添加到本地存储库的版本（即本地版本号最高的版本）？

从我的实验来看，似乎是后者。如果是真的，这个选择的理由是什么？

版本 1.9.3 如果重要的话。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-02T05:47:47.793

最高本地修订号，是

因为它（逻辑上）*是最新的*变更集

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T22:39:53.807

请注意，当您使用 MQ 时，a`qrefresh`会导致刷新的变更集被删除并重新添加，因此它会自动变为提示。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-04T23:07:40.613

tip 是可能在分支上的最高本地版本。hg update 将更新到当前命名分支的尖端。因此，如果默认或命名分支具有存储库的绝对提示，但您未设置使用该分支，您将获得您设置使用的最新信息。hg summary 告诉你你当前的分支是什么。

# iolanguage - Io 中的颜色代码

> ID：13666503
> 
> 赞同：4
> 
> 时间：2012-12-02T04:52:06.597
> 
> 标签：iolanguage, color-codes

让 Io 切换终端文本的颜色有什么特别的技巧吗？在 Python 中我可以运行

`print "\033[0;34;40mHi!"`

并得到一个蓝色的“嗨！”。

在艾欧，

`"\033[0;34;40mHi!" println`

似乎没有效果。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-02T20:22:15.200

不幸的是，看起来 Io 序列（字符串）只转换单个（字母）字符转义码，如 \n 或 \t。

所以（目前）这可能是唯一的解决方法：

```
27 asCharacter .. "[0;34;40mHi!" println 
```

# java - 调试 Hashtable 中的键迭代器排序

> ID：13666506
> 
> 赞同：1
> 
> 时间：2012-12-02T04:52:48.327
> 
> 标签：java, sorting, data-structures, hashtable

我正在处理这个任务，它想要一个使用实现 Dictionary ADT 接口的 Hashtable 的电话簿。我的文件完全没有任何错误，但只有一个缺点！我来自哈希表的键值没有得到排序。当我查找具有特定数字组合的电话号码时，它们应该按排序顺序显示。

除了这个快速排序，我还尝试使用 shell 排序，但它似乎没有帮助。这是我正在尝试的：

```
public class KeyIterator implements Iterator<K> {
    private DictionaryNode[] nodes, n;
    private int index;
    long modCheck;
    private DictionaryNode[] quickSort(DictionaryNode array[]){         
        n=array;
        quickSort(0, n.length-1);
        return n;

    }
    private void quickSort(int left, int right){
        if(right-left<=0)
            return;
        DictionaryNode pivot=n[right];
        int partition=getPartition(left,right, pivot);
        quickSort(left,partition-1);
        quickSort(partition+1,right);
    }

    private int getPartition(int left, int right, DictionaryNode pivot){
        int lPtr=left-1;
        int rPtr=right;
        for(;;){
            while(n[++lPtr].compareTo(pivot)<0);
            while(rPtr>0 && n[--rPtr].compareTo(pivot)>0);
            if(lPtr>=rPtr)
                break;
            else swap(lPtr, rPtr);
        }
        swap(lPtr, right);
        return lPtr;
    }

    private void swap(int lPtr1, int rPtr2) {
        DictionaryNode temp=n[lPtr1];
        n[lPtr1]=n[rPtr2];
        n[rPtr2]=temp;

    }
    public KeyIterator() {
        nodes = new DictionaryNode[currentSize];
        index = 0;
        modCheck=modCount;
        int j = 0;
        for (int i = 0; i < tableSize; i++){

            for (DictionaryNode n : list[i]) 
                nodes[j++] = n;
        }

         nodes = (DictionaryNode[]) quickSort(nodes);

    } 
```

我不应该对代码使用任何 JAVA API。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T05:57:02.407

为了更容易调试，您应该修改循环中的前缀增量。它倾向于首先增加计数器，然后调用数组元素，而算法并不打算这样做。

例如：

从 `while(n[++lPtr].compareTo(pivot)<0);`

至

`while(n[lPtr].compareTo(pivot)<0) lPtr++;`

也改掉`if (;;)`_`while (rPtr <= lPrt)`

`if(lPtr>=rPtr) break;`

他们只是让调试看起来很混乱。我希望你能找到一些改变。

# css - HTML 三页布局列间隙问题

> ID：13666508
> 
> 赞同：0
> 
> 时间：2012-12-02T04:53:32.913
> 
> 标签：css, html, web

在我的项目网站上，我正在做一个三栏布局，在我在这里得到的帮助下，我能够走得很远。

这是我的网站：

[http://younani.com/finalsite/aboutus.html](http://younani.com/finalsite/aboutus.html)

我正在尝试使我的三列布局类似于提供的图片，但我的问题是左列、右列和中列。如您所见，当我在左列上放置背景颜色时，它会在中心和右侧之间产生间隙，左侧也是如此。

它看起来真的很不专业而且不干净，我不明白为什么它们在所有列之间都有差距，为什么我不能均匀地匹配它们。标题也是如此。任何想法为什么？

![在此处输入图像描述](../Images/13c9752e6dfa09a046499e002bb26743.png)

下面是我的CSS：

```
#header {text-align: center;}

#container {
    width: 960px;
    margin: 0 auto;
     background-color: #FAFAFA;
     color: #003300;
     font-family: Arial, Helvetica, sans-serif; background-image:url('backgroundflower5.jpg'); background-repeat: no-repeat; background-position: center; background-size: cover;

}

#h2 {text-align: center;}

#container {
            width: 960px;
            margin: 0 auto;
        }

        #container div {
            border: 1px solid black;
        }

        #header {}

#center2 {
            float: left;
            margin: 10px 0 10px 20px;
            min-width: 200px; width: 494px; border-radius:8px;
        }

        #left,
        #center,
        #right {
            float: left;
            margin: 10px 0 10px 20px;
            min-width: 200px;
        }

        #center {font-family: Josefin Slab; background-color: #FFFFFF;
            width: 494px; border-radius:8px; text-align: center;
        } 

        .clear {
            clear: both;
        }

#right { font-family: Josefin Slab; font-weight:bold; border-radius:8px; background-color: #FBEFFB;}

#left a {text-decoration: none;
         display: block;
         text-align: center;
         color: #000000;
         font-weight:bold;
         border: 3px outset #FFFFFF;
         padding: 5px;}

figure{}

#left a:link { background-color: #E6E6E6; }
#left a:visited { background-color: #E6E6E6; }
#left a:hover {border: 3px inset #333333; }

#left ul { list-style-type: none;
          margin: 0;
          padding-left: 0; }

#footer { text-align: center; font-family: Audimat;
    clear: both; width:38%;
        border-radius: 8px;
        background-color:white;
        text-align:center; margin-right:auto;
        margin-left:auto; } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-02T05:18:20.317

您为每列设置了 20 像素的边距。如果您不想要它们之间的空间，请更改以下代码：

```
#left, #center, #right {
            float: left;
            margin: 10px 0 10px 20px;
            min-width: 200px;
        } 
```

像这样：

```
#left, #center, #right {
                float: left;
                margin: 0;
                min-width: 200px;
            } 
```

# javascript - 当我有定时轮询功能时，如何手动调用它？

> ID：13666512
> 
> 赞同：1
> 
> 时间：2012-12-02T04:53:57.393
> 
> 标签：javascript, jquery, ajax

我有以下`poll()`功能：

```
var pollTimeout = 5000;
(function poll(){
   setTimeout(function(){
      $.ajax({ url: "/ajax/livedata.php", success: function(data){
         if (data[0] == 'success'){
            // i'm doing some irrelevant updating here
         }
         poll();
      }, dataType: "json"});
   }, pollTimeout);
})(); 
```

它每 5 秒执行一次，一切正常。

但是，如何手动执行此功能？例如，我需要在这里执行它：

```
$("#status-update-form textarea").keyup(function(e){
   if (e.keyCode == '13'){
      var status = $(this).val();
      $.get("/ajax/update-status.php", { 'status' : status },
         function(data){
            $("#status-update-form textarea").val('').blur();
            // <-- I need to execute the poll here, so that
            // the status is updated immediatelly after it's
            // submitted, not when the poll fires seconds later
         },'json'
      );
   }
}); 
```

知道我该怎么做吗？如果我尝试触发 poll()，它会说该函数不存在。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T05:08:33.643

将您的投票转换为常规函数

```
var pollTimeout = 5000;

function poll(timeout){
   return setTimeout(function(){
      $.ajax({ url: "/ajax/livedata.php", success: function(data){
         if (data[0] == 'success'){
            // i'm doing some irrelevant updating here
         }
         poll();
      }, dataType: "json"});
   }, timeout);
}

$("#status-update-form textarea").keyup(function(e){
   if (e.keyCode == '13'){
      var status = $(this).val();
      $.get("/ajax/update-status.php", { 'status' : status },
         function(data){
            $("#status-update-form textarea").val('').blur();
            poll(0);
         },'json'
      );
   }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-02T07:03:05.827

您可以将超时代码与其实际调用的函数分开，然后手动或自动调用它。

```
var pollTimeoutDelay = 5000;
var pollTimeout = null;
function pollNow(){
  if (pollTimeout !== null);
    clearTimeout(pollTimeout);
    pollTimeout = null;
  }
  // do what you do, then in the callback:
  timeout = setTimeout(pollNow, pollTimeoutDelay); 
} 
```

然后，您可以随时调用 pollNow()，它会执行此操作，然后再次重新设置超时。

*   此方法在全局范围内使用三个变量，如果这是一个大型应用程序，可能值得对其进行更多重构。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-07T01:21:45.770

在这种情况下，我不会`setTimeout()`在函数中使用。下面的代码确保每次调用时都会终止 ajax 请求`poll()`（开始时一次，每 5 秒一次以及每次 keyup 事件调用）

```
var timeout;
var pollTimeout = 5000;
var ajaxCall;
function poll(){
      if (null != ajaxCall) {
         ajaxCall.abort();
      }
      ajaxCall = $.ajax({ url: "/ajax/livedata.php", success: function(data){
         if (data[0] == 'success'){
            // i'm doing some irrelevant updating here
         }
         poll();
      }, dataType: "json"});
}
poll();
timeout = setTimeout(function(){
    poll();
}, pollTimeout);
$("#status-update-form textarea").keyup(function(e){
   if (e.keyCode == '13'){
      var status = $(this).val();
      $.get("/ajax/update-status.php", { 'status' : status },
         function(data){
            $("#status-update-form textarea").val('').blur();
            poll();
         },'json'
      );
   }
}); 
```

# javascript - 无法在javascript中获取相对于文档的鼠标坐标

> ID：13666513
> 
> 赞同：0
> 
> 时间：2012-12-02T04:54:16.013
> 
> 标签：javascript

我有一个小问题，当用户点击页面时，我需要获取鼠标坐标。这里我需要获取相对于文档（页面）的位置，也不是相对于找到的位置。

```
After browsing a day , i found one solution i.e., window.event.pageY. 
but its working only for Chrome.. not in IE, not Firefox. 
```

任何人都可以帮助我...如果解决方案是在javascript中，那么对我有用..

给出的例子将不胜感激..

谢谢。拉杰什

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T05:03:14.157

您可以将 jQuery 的规范化事件对象与 pageX/pageY 一起使用。[请参阅他们的SDK](http://api.jquery.com/event.pageX/)中的示例代码。

编辑：对于纯 js 解决方案，请尝试这篇文章 - [鼠标位置 - 跨浏览器兼容性 - Javascript](https://stackoverflow.com/questions/3343384/mouse-position-cross-browser-compatibility-javascript)

[QuirksMode](http://www.quirksmode.org/dom/w3c_cssom.html)也总是很有帮助。

# java - 使用 setIcon 重叠图像

> ID：13666514
> 
> 赞同：1
> 
> 时间：2012-12-02T04:54:27.213
> 
> 标签：java, image, swing, jlabel, imageicon

我做了一个`JLabel`像这样显示我的图像的地方：

```
BufferedImage myimage;
imageLabel.setIcon(new ImageIcon(myimage)); 
```

是否可以使用命令绘制图像并在其上绘制较小的图像（图标）`setIcon`？我该怎么做？

例如：

```
BufferedImage myimage1;
BufferedImage myLittleIcon;
imageLabel.setIcon(new ImageIcon(myimage1));
imageLabel.setIcon(new ImageIcon(myLittleIcon)); 
```

上面只画了小图标。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-02T05:05:28.573

调用`setIcon`会覆盖图标。但是，您可以尝试这样的事情：

```
// Assumed that these are non-null
BufferedImage bigIcon, smallIcon;

// Create a new image.
BufferedImage finalIcon = new BufferedImage(
    bigIcon.getWidth(), bigIcon.getHeight(),
    BufferedImage.TYPE_INT_ARGB)); // start transparent

// Get the graphics object. This is like the canvas you draw on.
Graphics g = finalIcon.getGraphics();

// Now we draw the images.
g.drawImage(bigIcon, 0, 0, null); // start at (0, 0)
g.drawImage(smallIcon, 10, 10, null); // start at (10, 10)

// Once we're done drawing on the Graphics object, we should
// call dispose() on it to free up memory.
g.dispose();

// Finally, convert to ImageIcon and apply.
imageLabel.setIcon(new ImageIcon(finalIcon)); 
```

这将创建一个新图像，绘制大图标，然后绘制小图标。

您还可以绘制其他内容，例如画出[矩形轮廓](http://docs.oracle.com/javase/7/docs/api/java/awt/Graphics.html#drawRect%28int,%20int,%20int,%20int%29 "绘制矩形（int，int，int，int）")或[填充椭圆形](http://docs.oracle.com/javase/7/docs/api/java/awt/Graphics.html#fillOval%28int,%20int,%20int,%20int%29 "填充椭圆（整数，整数，整数，整数")。

对于更高级的图形功能，请尝试转换为[Graphics2D](http://docs.oracle.com/javase/7/docs/api/java/awt/Graphics2D.html)对象。

# c# - c# - 如何为 SpeechRecognizer 创建自定义字典？

> ID：13666515
> 
> 赞同：0
> 
> 时间：2012-12-02T04:54:40.487
> 
> 标签：c#, speech-recognition

我正在使用以下代码创建语音识别器，但我只希望它识别 3 件事，即驾驶执照、邮政编码和日期格式

```
M1234-56789-01234
L9B 2X5
yyyy/mm/dd 
```

我不关心这些字符'/'，''，'-'。（因为它们不应该包含在识别器识别的文本中）。

我只关心字母和数字。

我创建了一个只有数字和字母的语法，但是在说话时，识别器会创建像“TO”或“THERE”这样的词。有没有办法限制只识别单个字母和数字？

```
 SpeechRecognizer sr = new SpeechRecognizer();

        Choices chars = new Choices();
        chars.Add(new string[] { "0", "1", "2", "3", "4", "5", "6", "7", "8", "9", "A", "B", "C", "D", "E", "F", "G", "H", "I", "J", "K", "L", "M", "N", "O", "P", "Q", "R", "S", "T", "U", "V", "W", "X", "Y", "Z" });

        GrammarBuilder gb = new GrammarBuilder();
        gb.Append(chars);

        // Create the Grammar instance.
        Grammar g = new Grammar(gb);

        sr.LoadGrammar(g);

        sr.SpeechRecognized += new EventHandler<SpeechRecognizedEventArgs>(sr_SpeechRecognized); 
```

# javascript - 如果验证不正确，则在提交期间停止表单

> ID：13666519
> 
> 赞同：0
> 
> 时间：2012-12-02T04:55:24.247
> 
> 标签：javascript, html, forms

我正在尝试使用 JavaScript 验证表单，但如果表单未验证，我不希望将表单发送到“操作”页面。

验证者：

```
<script>
    function formSubmit()
    {
    document.getElementById("signup_form").submit();
    var x=document.forms["signup_form"]["tname"].value;
    if (x==null || x=="")
      {
      alert("First name must be filled out");
      return false;
      }
    }
</script> 
```

表格本身：

```
<form action="some_file.php" method="post" id="signup_form" name="signup_form" onsubmit="return formSubmit()"> 
```

但这所做的只是如果 tname 字段为空，它将返回警报，但一旦用户点击确定，表单就会重定向到 some_file.php。我在这里错过了什么？

提交按钮：

```
<a href="" onclick="return formSubmit(); return false" class="purplebutton">Signup</a> 
```

那么我错过了什么？我将来如何避免这种情况？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-02T04:57:52.663

你有错误的执行语句。您在验证之前提交表单。将此语句移到 if 语句下方

```
document.getElementById("signup_form").submit(); 
```

更进一步。你`formSubmit()`在两个地方打电话，`form`标记和`a`标记一次就可以了。

更新代码：

```
<html>
<head>
    <title></title>
    <script>
    function formSubmit()
    {

    var x=document.forms["signup_form"]["tname"].value;
    if (x==null || x=="")
      {
      alert("First name must be filled out");
      return false;
      }
      document.getElementById("signup_form").submit();
    }
</script>
</head>
<body>
    <form action="some_file.php" method="post" id="signup_form" name="signup_form" onsubmit="return formSubmit()">
        <input type="text" name="tname" />
        <a href="" onclick="return formSubmit(); return false" class="purplebutton">Signup</a>
</body>
</html> 
```

[**演示**](http://jsfiddle.net/refhat/6tyMx/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-02T04:57:58.700

在你的函数中删除这一行

```
 document.getElementById("signup_form").submit(); 
```

并在`if`条件后添加

或者像下面这样重写函数

```
function formSubmit()
    {
    var x=document.forms["signup_form"]["tname"].value;
    if (x==null || x=="")
      {
      alert("First name must be filled out");
      return false;
      }else
         return true;
    } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-02T05:00:01.680

你的程序流程有问题。
在提交表单之前进行验证。
提交后验证没有用，我认为你错误地做到了。验证后提交即可。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-02T05:00:50.837

尝试：

```
function formSubmit() {

    var x=document.forms["signup_form"]["tname"].value;
    if (x==null || x=="")
      {
      alert("First name must be filled out");
      return false;
    }
   else {
      return true;
   }
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-12-02T05:03:07.120

你已经有了所有的代码。这是因为执行错误。

```
<script>
    function formSubmit()
    {
        var x=document.forms["signup_form"]["tname"].value;
        if (!x){
              alert("First name must be filled out");
              return false;
        }
        return true;
    }
</script>

<form action="some_file.php" method="post" id="signup_form" name="signup_form">
<a href="" onclick="return formSubmit();" class="purplebutton">Signup</a> 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-12-02T05:04:17.777

试试这个：

* * *

```
function formSubmit()
{
    var x=document.forms["signup_form"]["tname"].value;
    if (x=="")
    {
         alert("First name must be filled out");
         return false;
    }
    return true;
} 
```

* * *

**对您的代码所做的更改： ** - 无需 formSubmit 即可尝试提交表单！`true`如果您希望提交继续进行，只需执行验证检查并返回`false`。

*   此外，您不需要检查`x == null`案例。如果文本框为空，则其值为“”。

*   不过，可能需要检查 x 不仅包含空格。如果您不关心支持旧浏览器，您可以使用新的 Javascript 修剪功能。如果您关心向后兼容性，请尝试提供的众多 javascript 库之一`trim`或以下内容：

* * *

```
function formSubmit()
{
    var x=document.forms["signup_form"]["tname"].value.replace(/^\s+|\s+$/g, '');
    if (x=="")
    {
         alert("First name must be filled out");
         return false;
    }
    return true;
} 
```

* * *

如果我只是想避免提交空格，我会保留`var x=`原样并在检查中添加替换`if(x.replace(/\s/g, '') == "")`。但是，我还想修剪输入，以便如果用户输入“user1”或“user1”，表单将发送“user1”。

您可以在这里看到三个不同的版本：http: [//jsfiddle.net/9LPfb/2/](http://jsfiddle.net/9LPfb/2/) http://jsfiddle.net/9LPfb/3/ [http://jsfiddle.net/9LPfb/6/](http://jsfiddle.net/9LPfb/6/)

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2015-06-09T11:53:52.927

联系表

```
 function empty()  {   
     var x,y;

         x = document.forms["ff"]"name"].value; 
         y = document.forms["ff"]["surname"].value;

      if(x=="" ||x==null){
        alert("Enter your name");
        return false;
      }else if(y==""){
        alert("Enter your surname");
        return false;
      }else{
       alert('Data is sending');
       return true;
      } 
   }; 
```

在 html 中：

```
 <form method="POST" action="formdata.php" name="ff"onsubmit="return empty()">
    <table>
       <tr>
          <td>Enter Your Name : <input type="text" name="name" maxlength="30" size="40" id="na" ></td>
       </tr>
       <tr>
         <td>Enter Your Surname : <input type="text" name="surname" maxlength="30" size="40" id="sna"></td>
     </tr>
     <tr>
       <td>
         <input type="submit" name="formsubmit" value="submit" >
       </td>
    </tr>
  </table>
</form> 
```

# ios - 如何在 MonoTouch 中支持多种分辨率

> ID：13666520
> 
> 赞同：1
> 
> 时间：2012-12-02T04:55:24.113
> 
> 标签：ios, xamarin.ios

在 MonoTouch 上支持不同分辨率的方法是什么。我刚刚在最新版本的 MonoTouch 中创建了一个新的 XIB。当我运行它时，它是 iPhone 4 分辨率。

我的模拟器是 iPhone5，所以我在顶部和底部看到黑条。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-02T10:01:33.263

首先，您必须[为 iPhone 5 提供默认（启动）图像](http://www.idev101.com/code/User_Interface/launchImages.html)。

可能的解决方案

*   使用 iOS 的自动调整大小功能 (View.AutoresizingMask)
*   [检测 iPhone 5](https://stackoverflow.com/questions/12604944/how-to-detect-if-the-device-is-an-iphone-5)并像在通用应用程序中一样加载不同的 xib。在Xamarin 开发人员中心[构建可在 iPad 和 iPhone 上运行的 MonoTouch 应用程序入门](http://docs.xamarin.com/ios/Guides/Getting_Started/Hello%2C_iPad___Universal_Apps)教程中阅读有关此出色内容的更多信息！

# jquery - jquery fancybox在显示后隐藏内联

> ID：13666522
> 
> 赞同：2
> 
> 时间：2012-12-02T04:55:52.850
> 
> 标签：jquery, fancybox-2

我正在使用 fancybox 2.1.3 将书中的脚注显示为内联内容。效果很好，除了在显示脚注后，fancybox 会隐藏其内容。

所有脚注都在页面末尾分组，在加载时都可见，我想让它们保持可见。

fancybox 是否有禁用隐藏内联内容的选项？

有关示例，请参见[http://ebooks.adelaide.edu.au/m/mill/john_stuart/m645o/chapter2.html](http://ebooks.adelaide.edu.au/m/mill/john_stuart/m645o/chapter2.html) - 脚注链接是上标 1、2、3 等。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T06:08:44.287

据我所知，没有禁用隐藏内联内容的选项。但是，您可以使用的另一种方法是在单击链接时显示锚点的内容，如下所示：

```
$(".fn").click(function () {
    $.fancybox($($(this).attr("href")).html());
    return false;
}); 
```

这将使脚注始终可见。

# iphone - 如何在 Xcode 中以编程方式按下 iOS 键盘键？

> ID：13666525
> 
> 赞同：0
> 
> 时间：2012-12-02T04:56:24.193
> 
> 标签：iphone, objective-c, ios, xcode, ipad

我正在编写一个 iPad 应用程序，需要我以编程方式触发空格键，但我不知道如何，任何想法都会受到赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T05:06:00.977

```
textView.text = [textView.text stringByAppendingString: @" "]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-02T05:19:15.820

而不是直接访问键盘，只需编辑键盘本来可以编辑的文本......使用

```
myTextView.text = [myTextView.text stringByAppendingString:@"New text to be added"]; 
```

# css - 使用 CSS 将手风琴从小高度过渡到全高度

> ID：13666526
> 
> 赞同：0
> 
> 时间：2012-12-02T04:56:41.463
> 
> 标签：css, css-transitions

我正在构建一个手风琴列表，我希望它使用 CSS -webkit-transition: 为打开和关闭设置动画。动画由事件处理程序触发，该事件处理程序只需打开和关闭 .open 类。问题是当我单击它时，动画从闭合高度变为 0px 高度，然后猛拉回到全高，而不是平滑地动画到全高。

## HTML

```
<ul class="accordion">
    <li>Foo
        <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nunc quis leo sit amet justo vulputate volutpat. Suspendisse potenti. Aliquam aliquet justo ut turpis suscipit adipiscing.</p>
    </li>
    <li class="open">Baz
        <p>Ut velit magna, sagittis at blandit accumsan, vestibulum et dolor. Aliquam elit ante, congue vel pharetra ut, ultricies non est. In hac habitasse platea dictumst. Donec velit ligula, sodales a imperdiet non, sagittis id mauris.</p>
    </li>
    <li>Bar
        <p>Cras sit amet gravida lacus. Nulla consequat molestie nunc nec fermentum. Donec lobortis pretium quam sit amet scelerisque.</p>
    </li>
</ul>​ 
```

## Javascript

```
$('.accordion').delegate('li', 'click', function(li){
    $(this).toggleClass('open');
}); 
```

## CSS

```
.accordion li.open{
    -webkit-transition: height 1s;
}

.accordion li:not(.open){
    height: 1em;
    -webkit-transition: height 1s;
}
​ 
```

[在 JSFiddle 上尝试一下，看看我的意思。](http://jsfiddle.net/arkanciscan/wgXSm/)

我已经想出了如何让它工作，但它需要在 .open 类上设置一个明确的高度。然而，手风琴具有可变高度，并且为每个手风琴创建一个显式选择器是突兀且不可维护的。谁能给我一个比这更好的解决方案？

[在这里，它使用不适合内容的显式高度](http://jsfiddle.net/arkanciscan/MFB9r/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T20:40:38.610

您可以通过替换`height`为`max-height`，将其保留`height`为自动，并将您的开放设置`min-height`为比您需要的更大的东西来处理这个问题（以一种稍微有点骇人听闻的方式）。（200 像素、500 像素等）

`max-height:0`显然会关闭它。

`max-height:500px`会用动画打开它，但是，它不会是完美的，因为它动画到最大高度，所以如果你的元素实际上只有 200px 高，你会错过看到大部分动画。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-02T05:43:16.810

W3C 规范似乎没有提供这种行为（基于[此评论](https://bugzilla.mozilla.org/show_bug.cgi?id=571344#c11)和[此电子邮件线程](http://lists.w3.org/Archives/Public/www-style/2010Feb/0077.html)）。为什么这不在我不知道的规范中，但解决这个问题的唯一方法似乎需要使用javascript（或其他一些确定高度的方法）动态测量对象的高度。您可能会发现[这个](https://stackoverflow.com/a/3149710/843633)对类似问题的回答很有帮助。

# ios - 是什么导致 UIViewController 视图的视图大小不正确？

> ID：13666530
> 
> 赞同：0
> 
> 时间：2012-12-02T04:57:27.623
> 
> 标签：ios, uiviewcontroller, frame

我的视图控制器的视图报告自己是`460`（在 3.5" 屏幕上）。[480 - 20 = 460]

该视图应该真正`367`考虑到底部的 tabBar (49) 和顶部的导航栏 (44) 和状态栏 (20)。[480 - 20 - 44 - 49 = 367]

为什么视图的框架计算错误？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-02T05:34:18.813

您的视图可能没有被调整为“适合”并考虑您的 tabBar 和 navigationBar 视图。您是否设置了视图的自动调整大小属性？如果没有，请查看相关的[Apple 文档](http://developer.apple.com/library/ios/documentation/windowsviews/conceptual/viewpg_iphoneos/CreatingViews/CreatingViews.html#//apple_ref/doc/uid/TP40009503-CH5-SW5)以获取更多信息。

# emacs - 在多项模式下禁用“\Cx\Cs”

> ID：13666533
> 
> 赞同：1
> 
> 时间：2012-12-02T04:58:19.293
> 
> 标签：emacs, elisp

无需使用`C-x C-s`to `save buffer`in term 模式。所以我想禁用它。我试图在术语模式下定义一个新的绑定来替换它，但失败了。

```
(add-hook 'term-mode-hook 
          #'(lambda () 
              (define-key term-mode-map "\C-x\C-s"
                #'(lambda () 
                    (interactive)
                    (message "NO!"))))) 
```

任何帮助表示赞赏。谢谢

更新：我使用基于术语模式的多术语。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-02T11:35:25.650

正如 wvxvw 所说，我尝试了这个并且它有效。在下面添加到`term-bind-key-alist`. 谢谢大家。

```
("\C-x\C-s" . (lambda () 
            (interactive)
            (message "NO!"))) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-02T05:18:23.943

~~从你的代码中去掉#'。~~它应该工作。但是您仍然可以使用“Mx save-buffer”保存缓冲区

更新：

这段代码对我有用

```
(add-hook 'term-mode-hook                                 
          (lambda ()                                           
              (define-key term-mode-map (kbd "C-x C-s")
                (lambda ()                                     
                    (interactive)                         
                    (message "hello world"))))) 
```

设置挂钩后，您需要重新加载术语缓冲区。它不适用于现有的缓冲区

# asp.net - 在 asp.net 中设置背景图像（母版页）

> ID：13666540
> 
> 赞同：2
> 
> 时间：2012-12-02T05:00:33.010
> 
> 标签：asp.net, .net, css, background-image

我是asp.net 的新手。而且我无法设置我的背景图像。这是母版页源：

```
<%@ Master Language="C#" AutoEventWireup="true" CodeFile="Master.master.cs" Inherits="Master"%>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">
    <link rel="stylesheet" type="text/css" href="scripts/style.css"/>
    <title>Tracker</title>
    <asp:ContentPlaceHolder id="head" runat="server">
    </asp:ContentPlaceHolder>
</head>
<body>
    <form id="form1" runat="server">
    <div>
        <div class="container">
                <a href="#"><img src="images/cross-header.gif" alt="Insert Logo Here" width="100%" id="Insert_logo" style="background: #C6D580; display:block;" /></a>

            <div class="sidebar1">
                <nav>
                    <ul>
                        <li><a href="#">Home</a></li>
                        <li><a href="#">LINK</a></li>
                        <li><a href="#">LINK</a></li>
                        <li><a href="#"><span style="font-weight:italic">LINK</span></a></li>
                        <li><a href="#"><span style="font-weight:italic">LINK</span></a></li>
                    </ul>
                </nav>
                    <p>SOME LABEL</p>
                    <p>SOME QUOTE HERE</p>
                    <p></p>
            </div>
        </div>
        <footer>
           <a href="#">LINK HERE</a> | <a href="#">LINK HERE</a> | 
           <a href="contact.php">CONTACT</a> | <a href="register.php">REGISTER</a> | <a href="login.php">LOGIN</a>
            <address>
                Copyright 2012 @JRC
            </address>
        </footer>
    </div>
    </form>
</body>
</html> 
```

我尝试使用的图像位于文件夹图像中。我不知道怎么了。

这是 style.css 的来源：

```
body 
{
    font: 100%/1.4 Verdana, Arial, Helvetica, sans-serif;
    margin: 0;
    padding: 0;

    background-image:url('images/background.jpg');
    background-repeat:no-repeat;
    background-attachment:scroll;
    background-position:repeat-x;
} 
```

我也试过这个 url('image/background.jpeg') 等，但仍然失败。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-02T05:07:57.573

这在很大程度上取决于您的 css 文件所在的位置。如果它位于“图像”文件夹所在的同一文件夹中，那么这看起来是正确的。但是，如果您的 css 文件位于不同的目录中（例如 /css），那么您的 css 文件中的链接将不起作用。相反，要么将 css 链接更改为指向完整的链接：

```
background-image: url('http://mysite.com/images/background.jpg) 
```

我不确定“~”链接是否可以在样式表中使用。由于您的 css 位于脚本文件夹中，因此您应该能够执行此操作：

```
background-image: url('../images/background.jpg') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-23T15:02:53.547

这对我有用：

```
background-image: url(<%=ResolveClientUrl("~/images/background.jpg")%>); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-12-02T05:05:42.330

它变得混乱，因为你的`src`，它找到它`current_folder+src`，但你的图像文件夹在根文件夹中，为了达到`root_folder+src`你必须在你的源代码前加上`~/`

```
background-image:url('~/images/background.jpg'); 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2017-05-16T08:34:41.630

添加母版页，然后链接css脚本并使用拖放方法粘贴CSS的链接

# vb.net - 将字符串写入文本文件 - Visual Basic

> ID：13666543
> 
> 赞同：0
> 
> 时间：2012-12-02T05:00:46.230
> 
> 标签：vb.net

我一直在尝试将字符串写入文本文件，但每当该过程完成时，它只写了一个空行。写整数工作正常。我已经研究了这个问题，但还没有找到解决方案。代码：

```
 Dim strSave As String
    strSave = strCharName

    My.Computer.FileSystem.WriteAllText _
    ("C:\UnnamedGame\NameOne.txt", strSave, False) 
```

# python - 递归地在每个深度绘制带有颜色的谢尔宾斯基三角形？

> ID：13666549
> 
> 赞同：3
> 
> 时间：2012-12-02T05:01:13.380
> 
> 标签：python, recursion, turtle-graphics

```
import turtle
w=turtle.Screen()

def Tri(t, order, size):

    if order==0:
        t.forward(size)
        t.left(120)
        t.forward(size)
        t.left(120)
        t.forward(size)
        t.left(120)

    else:
        t.pencolor('red')
        Tri(t, order-1, size/2, color-1)
        t.fd(size/2)
        t.pencolor('blue')
        Tri(t, order-1, size/2, color-1)
        t.fd(size/2)
        t.lt(120)
        t.fd(size)
        t.lt(120)
        t.fd(size/2)
        t.lt(120)
        t.pencolor('green')
        Tri(t, order-1, size/2,color-1)
        t.rt(120)
        t.fd(size/2)
        t.lt(120) 
```

任何人都可以帮助解决这个问题吗？
我想要一个在特定深度有颜色的谢尔宾斯基三角形，如下所示：

![](../Images/9a1f951f4ade6b1247bc1c8b0cf161d2.png)

我不知道如何使三角形颜色在特定深度发生变化。
提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-02T05:40:08.260

我想你已经几乎解决了这个问题。我看到您的递归调用已经在尝试将`color`值传递给递归的每个较低级别。要让它工作，您需要做的就是将它作为一个额外的参数添加到您的函数中，并使您的颜色更改命令以它为零为条件（表明您已经下降到指定的级别）。

在类似 python 的伪代码中：

```
def Tri(t, order, size, color):
    if order == 0:
         # draw a triangle (maybe doing coloring of the sides if color == 0 too?)

    else:
         if color == 0:
             # set first color

         Tri(t, order-1, size/2, color-1)

         if color == 0:
             # set second color

         # move to next position

         Tri(t, order-1, size/2, color-1)

         if color == 0:
             # set third color

         # move to next position

         Tri(t, order-1, size/2, color-1)

         # move to end position 
```

可能还有其他一些小问题需要解决，例如确保您的移动命令在正确绘制三角形后不会最终重新着色三角形的某些边缘。很久没有做海龟图形了，所以我不得不把细节留给你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-02-20T18:14:30.000

这是我能想到的最简洁的方法

```
angles = [0, 120, 240]
colors = ["red", "blue", "magenta"]

def draw_equi_triang(t, size):
    for i in range(3):
        t.forward(size)
        t.left(120)

def shift_turtle(t, size, angle):

    # moves turtle to correct location to begin next triangle

    t.left(angle)
    t.penup()
    t.forward(size)
    t.pendown()
    t.right(angle)

def sierpinski(t, order, size, colorChangeDepth = -1):

    # draw an equilateral triangle at order 0

    if order == 0:
        draw_equi_triang(t, size)

    # otherwise, test if colorChangeDepth == 0 and when it does change the color

    else:
        if colorChangeDepth == 0:
            # get index of angles
            for (ind, angle) in enumerate (angles):
                t.color(colors[ind])
                sierpinski(t, order-1, size/2, colorChangeDepth-1)
                shift_turtle(t, size/2, angle)
        # if colorChangeDepth does not == 0 yet
        else:
            for angle in angles:
                sierpinksi(t, order-1, size/2, colorChangeDepth-1)
                shift_turtle(t, size/2, angle) 
```

# ruby-on-rails - 安装 rbenv，权限被拒绝

> ID：13666551
> 
> 赞同：0
> 
> 时间：2012-12-02T05:01:22.647
> 
> 标签：ruby-on-rails, permissions, vps

我正在设置我的 VPS 以部署我的 rails 应用程序，但我的服务器端不断发生权限被拒绝错误。我不得不重新安装 perl 和 curl，现在我得到以下内容：

```
deployer@max:~$ rbenv bootstrap-ubuntu-12-04
bash: /usr/bin/python: permission denied 
```

我尝试重新安装python但没有成功。我该如何解决？

**更新：**

```
root@max:/home/deployer# cd /usr
root@max:/usr# cd bin
root@max:/usr/bin# cd python
bash: cd: python: not a directory 
```

这是否意味着没有正确安装python？

**更新：**

```
deployer@max:~$ ls -l 'which python'
total 0
deployer@max:~$ python
bash: /usr/bin/python: permission denied 
```

我认为这意味着 python 没有正确安装，所以我计算了以下

```
deployer@d:~$ su root
root@d:/home/deployer# apt-get install python
python package is already the latest version 
```

所以我还没有找到解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T08:35:54.310

事实证明这是一个权限问题，这里有一些关于如何`permission denied`在尝试执行二进制文件时调试错误的一般提示，`python`在这种情况下：

`ls -l `which python``- 尝试检索完整路径和权限，例如`-rwxr-xr-x 1 nobody nobody 9644 2012-12-02 13:15 /tmp/env/bin/python`

`0000`例如，如果权限为 ，则必须以特权用户身份运行。

`sudo chmod 0755 /usr/bin/python`通常有帮助。

# regex - 确保分隔符被转义的正则表达式是什么？

> ID：13666553
> 
> 赞同：1
> 
> 时间：2012-12-02T05:02:01.303
> 
> 标签：regex

我正在寻找一个正则表达式，它将检查字符串中的分隔符是否用反斜杠转义。

我关心的分隔符是逗号 (\,)、冒号 (\:)、分号 (\;)，当然反斜杠本身必须转义 (\)。

例如，字符串“test”应该返回匹配项，因为其中没有分隔符，也不需要转义。字符串 "te\;st" 将返回匹配项，因为分号分隔符被转义。"te;st" 和 "t\;s:t" 都会失败，因为两者都包含至少一个未转义的分隔符。

我知道我需要一个有条件的和积极的看法，这就是我到目前为止所拥有的，但这并没有给我预期的答案。

```
^(?<delimiter>[:;,\\])?(?(delimiter)\(?<=(?:\\\\)*\\)k<delimiter>|.)$ 
```

关于如何完成这项工作的任何建议？

谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-02T05:06:05.203

```
^(?:[^,:;\\]|\\.)*$ 
```

 *```
^           # beginning of string
(?:  )*     # 0 or more of:
  [^,:;\\]  #  a normal (non-delimiter) character
|           # or:
  \\.       #  an escaped character (backslash + any)
$           # end of string 
```

也就是说，字符串的每一部分都必须是转义字符或非定界字符。*

# c++ - 如果传递的对象现在不会被修改，我应该使用 const，但以后可以修改

> ID：13666558
> 
> 赞同：1
> 
> 时间：2012-12-02T05:03:17.153
> 
> 标签：c++

我正在编写一个游戏，其中每个数据对象都由 ControlView 显示。当 ControlView 设置为显示数据对象时，不应更改它。我想使用 const 来执行这个约定。但是，为了响应用户稍后与 ControlView 的交互，可能会修改数据。所以需要存储一个非常量指针。我想知道这是否被接受并正确使用 const_cast？下面的骨架代码

```
class Data
{
  int m_int;
  public:
    void add(int i)  { m_int += i ; };
 };

class ControlView
{
 Data* m_data;
 public:
 void set_data(const Data* d)  //this call should not change d 
        { 
            m_data=const_cast<Data*>(d); //cast needed to compile
        }; 

        void manipulate_data(int x)
        { 
            m_data->add(x);
        }
}; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-02T05:09:09.667

如果你想修改对象，不要做它`const`。修改`const`对象，例如通过`const_cast`，是未定义的行为。

所以不要使用`const`for `m_data`，但是`const`您可以在代码中使用其他几个 s ：

*   您可以使用 保护函数参数`const`。这通常不是很有意义，因为您通常不关心指针，而是关心它指向的对象。但它可以帮助您避免错误，例如在代码中意外重新指向`d`：

```
void set_data(Data * const d); // const pointer to (non-const) Data
// this means the function can not change d (the pointer), but it can
// change the object that d points to. 
```

*   您可以制作非修改功能`const`。这声明该函数不会以任何方式更改对象（除非有`mutable`成员）。如果您尝试修改此类函数中的任何成员，编译器将出错。`const`这些函数也是您可以在对象上调用的唯一函数。

```
Data * get_data() const; // this function doesn't change anything 
```

请注意，如果您有`mutable`成员，则**可以**从 const 函数更改它们，但这不应被滥用。这适用于互斥锁或缓存等内部事物。

另请注意，引用总是`const`- 它们不能重新分配以指向另一个对象。它们引用的对象可以是 const 或非常量。

最后提示：从右到左阅读声明：

```
Data       *       d;   // pointer to Data (both can be changed)
Data       * const d;   // const pointer to Data (data can be changed)
Data const *       d;   // pointer to const Data (pointer can be changed)
Data const * const d;   // const pointer to const Data (neither can be changed)

Data         &       d;   // reference to non-const Data
//Data       & const d;   // invalid - all references are const
Data const   &       d;   // reference to const Data
//Data const & const d;   // invalid - all references are const 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-02T05:13:32.883

在这种情况下，不，不要使用`const`. 如果你这样做了，你会让任何人将 a`const`作为参数传递，并且之后可能会遇到未定义的行为：

```
 const Data d;
 ControlView c;
 c.setData(&d);    //legal, because setData takes a const as parameter
 c.manipulateData(0);  //undefined behavior, modifying an originally const object 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-02T05:09:16.507

你需要明白什么`const data *d`意思。这意味着指针`d`可以更改，但指针`d`指向的对象类型`Data`是`const`不可变的。

你应该拥有的是

```
void set_data(Data * const d)  //this call should not change d 
{ 
    m_data=d;
}; 
```

这段代码`Data * const d`意味着指针 d 不能被方法更改，但 d 指向可以更改的对象。

我的理念是，当你使用演员表时，你可能做错了什么。尽量避免它们。

# c# - 从 MySQL Blob 字段在 BandedGridColumn 中渲染图像

> ID：13666559
> 
> 赞同：0
> 
> 时间：2012-12-02T05:04:01.723
> 
> 标签：c#, mysql, devexpress

我有许多图像存储在`Blob`MySQL InnoDB 数据库内的类型字段中，以及与存储在另一个字段中的这些图像有关的其他信息。

如您所知，在 DevExpress 版本 11.2 中分发的[带状网格视图，在](http://documentation.devexpress.com/#windowsforms/CustomDocument3467)[带状网格列](http://documentation.devexpress.com/#windowsforms/clsDevExpressXtraGridViewsBandedGridBandedGridColumntopic)的帮助下，能够呈现多种类型的数据，尤其是图像。

到目前为止，`MySqlDataReader`我能够`DataSet`通过[拥有](http://documentation.devexpress.com/#WindowsForms/clsDevExpressXtraGridGridControltopic) .`DataSource``BandedGridView`

但是，如您所知，当您从 MySQL 加载 Blob 字段时，您会返回一个包含文件内容的字节数组，在本例中是相关图像。

我希望 DevExpress 能够识别二进制数据并意识到它是一个图像文件，并在分配给处理数据库字段的列下的所有行中自动渲染图像`Image`，但是它没有，现在我想到了，它是可能是牵强附会的希望。

不是渲染图像，列的每一行显示一个简单的字符串输出，引用字段包含的对象类型。在这种情况下，由于它是文件的二进制表示，因此它输出`System.Byte[]`.

我搜索了 DevExpress 文档，通常在网络上，没有找到可以解决我的问题的明确内容。有一个我想要的结果与 DevExpress 一起打包的示例，该解决方案在 WinForms -> XtraGrid 部分下名为“GridMainDemo”。运行演示后，更改为 Alternate Views 和 Banded Grid View，然后只需单击图片列下的任何行，您将看到我想要的结果的清晰示例。

当然，我已经查看了该演示的来源，但是我不能说澄清和解释是构建此类演示的 DevExpress 团队的明确目标，不幸的是我没有太多时间深入研究它。但是，从我所看到的情况来看，这个演示与图像作为文件存储在本地的点不同，并且已经在某种存储库中正确引用，这对我的问题没有多大帮助。

为了完成我的问题，抱歉读了很久，只是想清楚地了解我的目标是什么，阻碍的是什么，以及所有事情是如何设置的，以便找到实现目标的方法。

现在长话短说。如何将图像从 MySQL Blob 字段加载到带状网格视图中的列中并在加载后或用户单击字段单元格时呈现它的简单示例，这将是理想的，有了它我将能够理解和执行必要的代码，以便我的视图也呈现我的图像。

我最大的感谢，真的。

> 注意：不幸的是，不能选择使用本地甚至远程存储的文件。图像必须保存在数据库的范围内。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T03:12:04.910

毕竟这并没有那么难，而且似乎希望很好，DevExpress 完成了大部分工作。

因此，为了帮助那些有类似问题的人，您必须这样做，这样您就可以在某个列中显示存储在 Blob 类型字段中的图像。

> *假设您已经将数据加载到您的网格中，并且它正在正确显示，当然图像除外。*

**首先：**您必须声明一个`RepositoryItemImageEdit`类型对象，它将简单地`ImageEdit`在单元格中实现一个类型控件，当尝试编辑单元格值时，它将显示您的图像，这是本问题的目标。如果您的目标在这一点上有所不同，只需在此答案之后阅读说明。

**第二：**您必须将先前最后声明的对象添加到您的`GridControl.RepositoryItems`集合属性中。`Add`您可以使用该方法轻松完成它。

**第三：**现在您必须定义将使用哪种类型的控件来为您的 Image 列呈现数据，因为您可以简单地引用该`BandedGridColumn.ColumnEdit`属性以等于您之前添加的对象。

**例子**

```
/* Create your columns, bands etc manually or
have it done automatically after loading the data.*/
...
// Load the data from the database to your gridControl
...
// Step one
RepositoryItemImageEdit imageControl = new RepositoryItemImageEdit();
// Step two
gridControl.RepositoryItems.Add(imageControl);
// Step three
/* view is the View assigned to your grid control
where your data and columns are being shown.*/
// Assuming your database blob field is named `Image`
view.Columns["Image"].ColumnEdit = imageControl; 
```

如果您的数据已正确加载并且您的列正确分配给它们各自的字段，那么这应该在您的图像列的每个单元格上呈现一个小图标，一旦您单击或关注它，`ImageEdit`就会呈现一个控件并显示您的图像。

> **笔记：**
> 
> 除了能够渲染图像之外，还有其他控件`ImageEdit`，对于其他控件，您必须找到它们的`RepositoryItem`基础实现。
> 
> 此外，您的图像列必须是可编辑的，否则这种方法将不起作用。`OptionsBehavior.Editable`请记住，如果通过属性在视图级别被拒绝，则允许在列级别进行编辑将不起作用。

我会将我的答案标记为正确的答案，因为没有其他人提供有关如何解决我的问题的任何见解，但是欢迎您发布任何其他解决此问题的工作方法。谢谢你。

# mysql - Rails3 - Mysql2 - 耙错误

> ID：13666560
> 
> 赞同：-1
> 
> 时间：2012-12-02T05:04:14.857
> 
> 标签：mysql, ruby-on-rails, ruby-on-rails-3.2

我正在使用 Rails 3.2 构建使用 mysql 作为我的开发数据库的 rails 应用程序。但是当我执行 rake db:migrate 时，出现以下错误。对于错误Fixnum to string，很多人说这是因为密码是数字，但我的密码已经是字符串。我不知道产生错误的步骤。

请帮忙。

这是我的 database.yml

```
development:
adapter: mysql2
encoding: utf8
reconnect: false
database: nwapp_development
pool: 5
username: root
password: mysqlroot
host: 3306 
```

这是我的 rake db:create --trace 错误

```
$ rake db:create --trace
** Invoke db:create (first_time)
** Invoke db:load_config (first_time)
** Execute db:load_config
** Invoke rails_env (first_time)
** Execute rails_env
** Execute db:create
rake aborted!
can't convert Fixnum into String
c:/Ruby193/lib/ruby/gems/1.9.1/gems/mysql2-0.3.11-x86-mingw32/lib/mysql2/client.rb:44:in `connect'
c:/Ruby193/lib/ruby/gems/1.9.1/gems/mysql2-0.3.11-x86-mingw32/lib/mysql2/client.rb:44:in `initialize'
c:/Ruby193/lib/ruby/gems/1.9.1/gems/activerecord-3.2.9/lib/active_record/connection_adapters/mysql2_adapter.rb:16:in `new'
c:/Ruby193/lib/ruby/gems/1.9.1/gems/activerecord-3.2.9/lib/active_record/connection_adapters/mysql2_adapter.rb:16:in `mysql2_connection'
c:/Ruby193/lib/ruby/gems/1.9.1/gems/activerecord-3.2.9/lib/active_record/connection_adapters/abstract/connection_pool.rb:315:in `new_connection'
c:/Ruby193/lib/ruby/gems/1.9.1/gems/activerecord-3.2.9/lib/active_record/connection_adapters/abstract/connection_pool.rb:325:in `checkout_new_connection'
c:/Ruby193/lib/ruby/gems/1.9.1/gems/activerecord-3.2.9/lib/active_record/connection_adapters/abstract/connection_pool.rb:247:in `block (2 levels) in checkout'
c:/Ruby193/lib/ruby/gems/1.9.1/gems/activerecord-3.2.9/lib/active_record/connection_adapters/abstract/connection_pool.rb:242:in `loop'
c:/Ruby193/lib/ruby/gems/1.9.1/gems/activerecord-3.2.9/lib/active_record/connection_adapters/abstract/connection_pool.rb:242:in `block in checkout'
c:/Ruby193/lib/ruby/1.9.1/monitor.rb:211:in `mon_synchronize'
c:/Ruby193/lib/ruby/gems/1.9.1/gems/activerecord-3.2.9/lib/active_record/connection_adapters/abstract/connection_pool.rb:239:in `checkout'
c:/Ruby193/lib/ruby/gems/1.9.1/gems/activerecord-3.2.9/lib/active_record/connection_adapters/abstract/connection_pool.rb:102:in `block in connection'
c:/Ruby193/lib/ruby/1.9.1/monitor.rb:211:in `mon_synchronize'
c:/Ruby193/lib/ruby/gems/1.9.1/gems/activerecord-3.2.9/lib/active_record/connection_adapters/abstract/connection_pool.rb:101:in `connection'
c:/Ruby193/lib/ruby/gems/1.9.1/gems/activerecord-3.2.9/lib/active_record/connection_adapters/abstract/connection_pool.rb:410:in `retrieve_connection'
c:/Ruby193/lib/ruby/gems/1.9.1/gems/activerecord-3.2.9/lib/active_record/connection_adapters/abstract/connection_specification.rb:171:in `retrieve_connection'
c:/Ruby193/lib/ruby/gems/1.9.1/gems/activerecord-3.2.9/lib/active_record/connection_adapters/abstract/connection_specification.rb:145:in `connection'
c:/Ruby193/lib/ruby/gems/1.9.1/gems/activerecord-3.2.9/lib/active_record/railties/databases.rake:106:in `rescue in create_database'
c:/Ruby193/lib/ruby/gems/1.9.1/gems/activerecord-3.2.9/lib/active_record/railties/databases.rake:74:in `create_database'
c:/Ruby193/lib/ruby/gems/1.9.1/gems/activerecord-3.2.9/lib/active_record/railties/databases.rake:62:in `block (3 levels) in <top (required)>'
c:/Ruby193/lib/ruby/gems/1.9.1/gems/activerecord-3.2.9/lib/active_record/railties/databases.rake:62:in `each'
c:/Ruby193/lib/ruby/gems/1.9.1/gems/activerecord-3.2.9/lib/active_record/railties/databases.rake:62:in `block (2 levels) in <top (required)>'
c:/Ruby193/lib/ruby/gems/1.9.1/gems/rake-10.0.2/lib/rake/task.rb:227:in `call'
c:/Ruby193/lib/ruby/gems/1.9.1/gems/rake-10.0.2/lib/rake/task.rb:227:in `block in execute'
c:/Ruby193/lib/ruby/gems/1.9.1/gems/rake-10.0.2/lib/rake/task.rb:222:in `each'
c:/Ruby193/lib/ruby/gems/1.9.1/gems/rake-10.0.2/lib/rake/task.rb:222:in `execute'
c:/Ruby193/lib/ruby/gems/1.9.1/gems/rake-10.0.2/lib/rake/task.rb:166:in `block in invoke_with_call_chain'
c:/Ruby193/lib/ruby/1.9.1/monitor.rb:211:in `mon_synchronize'
c:/Ruby193/lib/ruby/gems/1.9.1/gems/rake-10.0.2/lib/rake/task.rb:159:in `invoke_with_call_chain'
c:/Ruby193/lib/ruby/gems/1.9.1/gems/rake-10.0.2/lib/rake/task.rb:152:in `invoke'

c:/Ruby193/lib/ruby/gems/1.9.1/gems/rake-10.0.2/lib/rake/application.rb:141:in `invoke_task'
c:/Ruby193/lib/ruby/gems/1.9.1/gems/rake-10.0.2/lib/rake/application.rb:99:in `block (2 levels) in top_level'
c:/Ruby193/lib/ruby/gems/1.9.1/gems/rake-10.0.2/lib/rake/application.rb:99:in `each'
c:/Ruby193/lib/ruby/gems/1.9.1/gems/rake-10.0.2/lib/rake/application.rb:99:in `block in top_level'
c:/Ruby193/lib/ruby/gems/1.9.1/gems/rake-10.0.2/lib/rake/application.rb:108:in `run_with_threads'
c:/Ruby193/lib/ruby/gems/1.9.1/gems/rake-10.0.2/lib/rake/application.rb:93:in `top_level'
c:/Ruby193/lib/ruby/gems/1.9.1/gems/rake-10.0.2/lib/rake/application.rb:71:in `block in run'
c:/Ruby193/lib/ruby/gems/1.9.1/gems/rake-10.0.2/lib/rake/application.rb:158:in `standard_exception_handling'
c:/Ruby193/lib/ruby/gems/1.9.1/gems/rake-10.0.2/lib/rake/application.rb:68:in `run'
c:/Ruby193/lib/ruby/gems/1.9.1/gems/rake-10.0.2/bin/rake:37:in `<top (required)>'
c:/Ruby193/bin/rake:23:in `load'
c:/Ruby193/bin/rake:23:in `<main>'
Tasks: TOP => db:create 
```

更新1：

这是更新的 database.yml

```
development:
adapter: mysql2
encoding: utf8
reconnect: false
database: nwapp_development
pool: 5
username: root
password: mysqlroot
host: localhost
port: 3306 
```

这是添加端口和更改主机的结果

```
$ rake db:create
Can't connect to MySQL server on 'localhost' (10061)
Couldn't create database for {"adapter"=>"mysql2", "encoding"=>"utf8", "reconnect"=>false, "database"=>"nwapp_development", "pool"=>5, "username"=>"root", "password"=>"mysqlroot", "host"=>"localhost", "port"=>3306}, charset: utf8, collation:
(if you set the charset manually, make sure you have a matching collation) 
Can't connect to MySQL server on 'localhost' (10061)
Couldn't create database for {"adapter"=>"mysql2", "encoding"=>"utf8", "reconnect"=>false, "database"=>"nwapp_test", "pool"=>5, "username"=>"root", "password"=>nil, "host"=>"localhost"}, charset: utf8, collation:
(if you set the charset manually, make sure you have a matching collation) 
```

更新 2：

我需要在 mysql 服务器中手动创建数据库。

这是我的 database.yml

```
development:
adapter: mysql2
encoding: utf8
reconnect: false
database: nwapp_development
pool: 5
username: root
password: mysqlroot
host: 127.0.0.1
port: 3306 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T07:09:35.287

扩展 mu 的评论，您需要更改`host: 3306`为类似`host: localhost`or的内容`host: 127.0.0.1`。

3306 是 mySQL 通信的默认端口，因此不需要显式设置。不过，如果你愿意，你可以`port: 3306`在 database.yml中拥有

# jquery - jQuery最接近（）不起作用

> ID：13666567
> 
> 赞同：0
> 
> 时间：2012-12-02T05:05:31.613
> 
> 标签：jquery

我有一个 AJAX 方法，可以从数据库的结果列表中删除数据库中的一行。成功删除该行后，我希望 jQuery 从页面中淡出该行。

单击删除按钮后，该行已成功从数据库中删除，但作为被单击按钮的父项的列表项在使用最接近（）搜索时不会淡出。

这是我的 DOM：

```
<ul>
    <li>
        <div class="two columns alpha">
        </div>
        <div class="ten columns">
            <ul>
                <li><p></p></li>
                <li><p></p></li>
            </ul>
        </div>
        <div class="admin_buttons">
            <div class="two columns">
                <button type="submit" class="admin_button edit_event">Edit</button>
            </div>
            <div class="two columns omega">
                <button type="submit" value="5" class="admin_button delete_event">Delete</button>
            </div>
        </div>
    </li>
</ul> 
```

这是jQuery：

```
$(document).on('click', '.delete_event', function() {
    $.ajax({
        type: 'POST',
        url: 'php/deleteEvent.php',
        cache: false,
        data: {
            id: $(this).val()
        },
        success: function(data) {
            if(data === 'Error') {
                alert('Error: event not deleted.');
            }
            else
            {
                $(this).closest("li").fadeOut('slow');
            }
        }
    });

}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-02T05:17:50.553

它没有按预期工作的原因是因为`this`您进入`success`回调**不是**`this`您在点击处理程序中拥有的。

`.ajax()`可以`context`选择将传递给`success`回调的内容设置为`this`. 你可以使用它：

```
$.ajax({
    type: 'POST',
    ...
    context: $(this), // set what 'this' will be inside the callback.
    ...
    success: function(data) {
        ...
        // this refers to what we set for context
        this.closest("li").fadeOut('slow'); 
        ...
    }
}); 
```

# asynchronous - 如何最好地实现阻塞/等待actor？

> ID：13666570
> 
> 赞同：1
> 
> 时间：2012-12-02T05:05:45.000
> 
> 标签：asynchronous, redis, akka, actor, nonblocking

我对 Akka 和编写并发应用程序还很陌生，我想知道什么是实现一个等待 redis 列表的参与者的好方法，一旦一个项目可用，它就会处理它，或者将它发送给不同的参与者过程？

使用阻塞函数 BRPOPLPUSH 会更好，还是要求参与者每秒轮询 redis 的调度程序是更好的方法？

另外，在一个正常的系统上，我可以同时生成多少个这些actor而不消耗系统必须提供的所有资源？如何决定一个 Actor 系统应该能够在其运行的系统上处理多少个 Actor 类型？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-09T14:09:23.347

`BRPOPLPUSH`长时间阻塞（直到您指定的超时），所以我更喜欢`Scheduler`仍然阻塞，但每秒左右的时间较短。

无论你走哪条路，因为你是阻塞的，你应该阅读Akka 文档的[这一部分](http://doc.akka.io/docs/akka/snapshot/general/actor-systems.html#Blocking_Needs_Careful_Management)，它描述了使用阻塞库的方法。

您是否可以控制将项目插入 redis 的代码？如果是这样，您可以让该代码向您的 akka 代码发送一条消息（可能通过使用 akka camel 支持的 ActiveMQ），以便在将项目插入 redis 时通知它。这将是一种更受事件驱动的工作方式，并防止您不得不轮询或长时间阻塞。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-02T10:02:48.463

作为一个经验法则，你不应该在里面阻塞`receive`。每个参与者都应该只依赖 CPU 并且从不等待、休眠或阻塞 I/O。当满足这些条件时，您甚至可以创建数百万个同时工作的演员。假设每个 actor 有 600-650 字节的内存占用（参见：[*Concurrency, Scalability & Fault-tolerance 2.0 with Akka Actors & STM*](http://www.slideshare.net/jugmilano/akka-110124155752phpapp02)）。

回到你的主要问题。不幸的是，没有与 Akka 哲学“兼容”的[官方 Redis 客户端](http://redis.io/clients)，即完全异步。您需要的是一个客户端，而不是阻塞将返回某种`Future`对象并允许您在结果可用时注册回调。有这样的客户端，例如 Perl 和 node.js。

但是我发现你可能会觉得有用[的 fyrie-redis](https://github.com/derekjw/fyrie-redis)独立项目。如果您绑定到同步客户端，您可以做的最好的事情是：

*   定期轮询 Redis 而不会阻塞，并通过向 Redis 回复发送消息来通知某些参与者或

*   阻止演员并[了解后果](https://stackoverflow.com/questions/7458782)

# 也可以看看

*   [Scala 使用的 Redis 客户端库建议](https://stackoverflow.com/questions/4878367)

# macros - 启动和停止 JetBrains 宏的热键/快捷方式

> ID：13666575
> 
> 赞同：4
> 
> 时间：2012-12-02T05:06:10.180
> 
> 标签：macros, keyboard-shortcuts, phpstorm

我正在使用 JetBrains PHPStorm，但我相信这个问题与其他 JetBrains IDE 有关。

我想知道如何创建/分配用于开始/停止宏录制的热键/快捷方式。我也希望能够用热键播放我的临时宏。

例如：`ctrl`++ （开始录制宏），输入一些东西.... + `shift`+ （停止录制宏），然后按+ + （播放宏）。`r``ctrl``shift``s``ctrl``shift``p`

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-02T15:24:25.427

`File`| `Settings`| `Keymap`,**添加键盘快捷键**：

![键盘快捷键](../Images/5d56b53d447d9573296d2865897c3961.png)

# python - Scipy标准差

> ID：13666576
> 
> 赞同：4
> 
> 时间：2012-12-02T05:06:10.850
> 
> 标签：python, scipy

我正在尝试计算某些分布的标准偏差，并不断从两条路径获得两个不同的结果。这对我来说没有多大意义 - 有人可以解释为什么会这样吗？

```
scipy.stats.binom(189, 100/189).std()
6.8622115305451707

scipy.stats.tstd([1]*100 + [0]*89)
0.50047821327986164 
```

为什么这两个数字不相等？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-02T05:16:17.417

基本原因是你在那里取了两个完全不同的东西的标准偏差。我认为你误解了什么`scipy.stats.binom`。从[文档中](http://docs.scipy.org/doc/scipy/reference/generated/scipy.stats.binom.html#scipy.stats.binom)：

> binom 的概率质量函数为：
> 
> `binom.pmf(k) = choose(n,k) * p**k * (1-p)**(n-k)`
> 
> 对于 {0,1,...,n} 中的 k。
> 
> binom 将 n 和 p 作为形状参数。

当您这样做时`binom(189, 100/189)`，您正在创建一个可以取 0 到 189 之间的任何值的分布。不出所料，此分布的方差比您正在使用的其他样本数据大得多，后者仅限于 0 或 1 的值。

它看起来像你想要的`scipy.stats.binom(1, 100/189).std()`。但是，您仍然不能期望与您从样本数据中获得的值完全相同，因为它`binom.std`正在计算整体分布的标准偏差，而另一个版本 ( `scipy.stats.tstd([1]*100 + [0]*89)`) 仅计算样本的标准偏差. 如果您增加样本的大小（例如， do `scipy.stats.tstd([1]*1000 + [0]*890)`），样本标准偏差将接近您从中获得的值`binom.std`。

您还可以使用`scipy.std`or`numpy.std`代替`scipy.stats.tstd`. `scipy.stats.tstd`没有`ddof`让您选择自由度的选项，并且始终计算一个 sample `std`。

# android - SQLite 和 EditText 相关事件中的条件

> ID：13666584
> 
> 赞同：-1
> 
> 时间：2012-12-02T05:07:41.110
> 
> 标签：android, sqlite

尊敬的用户，我是 android 和 SQLite 技术的新手。我在以下声明中遇到错误。请纠正我。

```
Cursor mCur=
    db.query(DATABASE_TABLE,
             new String[]{ROWID,MEDICINE,KEY_DESC,PRICE},
             MEDICINE+" = "+medName,null,null,null,null); 
```

我的另一个问题是是否有任何与 EditText 相关的事件，以便我可以像`text_change`在 C# .NET 中使用它一样使用它的功能。[当我键入文本事件时应该被触发]。

为此，我尝试了以下事件：

*   setOnEditActionListener 和
*   setOnTouchListener

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T05:11:19.207

1）在您的 SQL 查询中，我认为您`medName`是问题所在，因为它是一个字符串，请使用：

```
Cursor mCur=
    db.query(DATABASE_TABLE,
             new String[]{ROWID,MEDICINE,KEY_DESC,PRICE},
             MEDICINE+" = ?",new String[] {medName},null,null,null); 
```

这种方法还可以保护您免受 SQL 注入攻击。

2) 要侦听 EditText 中的更改，请使用[`TextWatcher`](http://developer.android.com/reference/android/text/TextWatcher.html).

```
EditText edit = (EditText) findViewById(R.id.edit);
edit.addTextChangedListener(new TextWatcher() {
    public void beforeTextChanged(CharSequence s, int start, int count, int after) {
    }

    public void onTextChanged(CharSequence s, int start, int before, int count) {
    }

    public void afterTextChanged(Editable s) {
    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-02T05:13:51.787

对于您的 Sqlite 问题，请发布 Logcat 日志。

将 TextWatcher 添加到您的 EditText 以实现 3 个回调方法。

# vb.net - 如何使用 3 个表格生成水晶报表？

> ID：13666585
> 
> 赞同：0
> 
> 时间：2012-12-02T05:07:48.583
> 
> 标签：vb.net, crystal-reports, report

我有 3 张桌子：

`Store (Store_Id, Store_Name, Store_Location)`

`Bike(Store_Id, Bike_Id,Bike_Model, Bike_Price)`

`Parts(Store_Id, Bike_Id, Part_Id, Part_Description, Part_Price)`

`Store`与使用有关，自行车零件与`Bike`使用有关。每辆自行车都由不同的零件组装而成。 `Store_Id``Bike``bike_id`

我想创建一个报告，显示所有商店、自行车和自行车上使用的所有自行车零件，在描述中有“粉红色飘带”。

老实说，我不知道从哪里开始。

请注意，该数据库可能包含数千辆自行车。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T21:04:23.273

正如其他人所说，这是一个非常基本的问题，阅读一些基础知识可以为您提供所需的帮助。

回答这个问题：在 Database Expert 中，您将看到 3 个表。通过将相关字段彼此拖放来将它们链接在一起。IE。链接 Store.Store_ID --> Bike.Store_ID --> 和 Bike.Bike_ID --> Parts.Bike_ID。

在记录选择公式中设置描述值：{parts.part_description} = "Pink Streamers"。

这将为您提供所有商店和那些商店中拥有“粉红彩带”的自行车

# c# - 退出循环编码风格

> ID：13666587
> 
> 赞同：-2
> 
> 时间：2012-12-02T05:07:49.537
> 
> 标签：c#, java, coding-style

我有一个编码风格问题。下面是两个循环函数，它们做同样的事情，但循环退出技术略有不同。我只是想了解你们喜欢什么。

我个人更喜欢第一种。我不明白为什么当我知道没有其他事情可做时，我应该声明一个新变量并打破循环。

```
private SomeObj getSomeObj(ArrayList<SomeObj> items, String type)
{
    for (SomeObj someObj : items) {
        if ( someObj.getField().equals(type) ) {
            return someObj;
        }
    }

    return null;
}

private SomeObj getSomeObj(ArrayList<SomeObj> items, String type)
{
    SomeObj found = null
    for (SomeObj someObj : items) {
        if ( someObj.getField().equals(type) ) {
            found = someObj;
                    break;
        }
    }

    return found;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T05:09:13.787

两者都有不同的目的。它们不是彼此的替代品。

第一个来自方法

第二个来自循环 NOT 方法。

让我们说，如果在 for 循环之后有一些代码操作 SomeObj，那么结果会因第一种方法和第二种方法而异。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-02T05:10:03.363

两种方法不能在每种情况下都相互替代。假设您想在循环完成后执行代码，然后 return 无法为您执行此操作，反之亦然。在您的情况下，两者都可以使用，但并非在所有情况下都可以使用。

*for 循环之后的语句，您不想执行的语句使用 break 执行*

```
private SomeObj getSomeObj(ArrayList<SomeObj> items, String type)
{
    SomeObj found = null
    for (SomeObj someObj : items) {
        if ( someObj.getField().equals(type) ) {
            found = someObj;
                    break;
        }
    }
    //Statements you do not want to execute get executed with break  

    return found;
} 
```

*for 循环之后的语句，您要执行的语句不会通过 return 执行*

```
private SomeObj getSomeObj(ArrayList<SomeObj> items, String type)
{
    SomeObj found = null
    for (SomeObj someObj : items) {
        if ( someObj.getField().equals(type) ) {
            found = someObj;
                    return;
        }
    }
    //Statements you want to execute do not get executed with return

    return found;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-02T05:10:26.340

我更喜欢第一个。一般来说，我更喜欢提前退出方法，因为它倾向于减少嵌套。

# ruby-on-rails - 意外退出初始化服务器

> ID：13666590
> 
> 赞同：1
> 
> 时间：2012-12-02T05:08:17.233
> 
> 标签：ruby-on-rails, rubygems, ruby-on-rails-3.2

我刚刚添加了我正在做的应用程序的 CRUD，但是当我使用“rails s”时，它出现了：

```
=> Booting WEBrick

=> Rails 3.2.8 application starting in development on http:/localhost:3000

=> Call with -d to detach

=> Ctrl-C to shutdown server

Exiting

/usr/local/rvm/gems/ruby-1.9.3-p194/gems/actionpack-

3.2.8/lib/action_dispatch/routing/mapper.rb:185:in `default_controller_and_action': missing 
:action (ArgumentError)
    from /usr/local/rvm/gems/ruby-1.9.3-p194/gems/actionpack-
3.2.8/lib/action_dispatch/routing/mapper.rb:78:in `normalize_options!'
    from /usr/local/rvm/gems/ruby-1.9.3-p194/gems/actionpack-
3.2.8/lib/action_dispatch/routing/mapper.rb:61:in `initialize'
    from /usr/local/rvm/gems/ruby-1.9.3-p194/gems/actionpack-
3.2.8/lib/action_dispatch/routing/mapper.rb:1304:in `new'
    from /usr/local/rvm/gems/ruby-1.9.3-p194/gems/actionpack-
3.2.8/lib/action_dispatch/routing/mapper.rb:1304:in `add_route'
    from /usr/local/rvm/gems/ruby-1.9.3-p194/gems/actionpack-
3.2.8/lib/action_dispatch/routing/mapper.rb:1284:in `decomposed_match'
    from /usr/local/rvm/gems/ruby-1.9.3-p194/gems/actionpack-
3.2.8/lib/action_dispatch/routing/mapper.rb:1270:in `block in match'
    from /usr/local/rvm/gems/ruby-1.9.3-p194/gems/actionpack-3.2.8/lib/action_dispatch/routing/mapper.rb:1270:in `each'
    from /usr/local/rvm/gems/ruby-1.9.3-p194/gems/actionpack-3.2.8/lib/action_dispatch/routing/mapper.rb:1270:in `match'
    from /usr/local/rvm/gems/ruby-1.9.3-p194/gems/actionpack-3.2.8/lib/action_dispatch/routing/mapper.rb:507:in `map_method'
    from /usr/local/rvm/gems/ruby-1.9.3-p194/gems/actionpack-3.2.8/lib/action_dispatch/routing/mapper.rb:489:in `put'
    from /Users/GooComedy/Host/Ruby-On-Rails/blog/config/routes.rb:8:in `block in <top (required)>'
    from /usr/local/rvm/gems/ruby-1.9.3-p194/gems/actionpack-

3.2.8/lib/action_dispatch/routing/route_set.rb:282:in `instance_exec'
    from /usr/local/rvm/gems/ruby-1.9.3-p194/gems/actionpack-

3.2.8/lib/action_dispatch/routing/route_set.rb:282:in `eval_block'
    from /usr/local/rvm/gems/ruby-1.9.3-p194/gems/actionpack-

3.2.8/lib/action_dispatch/routing/route_set.rb:260:in `draw'
    from /Users/GooComedy/Host/Ruby-On-Rails/blog/config/routes.rb:1:in `<top (required)>'
    from /usr/local/rvm/gems/ruby-1.9.3-p194/gems/activesupport-

3.2.8/lib/active_support/dependencies.rb:245:in `load'
    from /usr/local/rvm/gems/ruby-1.9.3-p194/gems/activesupport-

3.2.8/lib/active_support/dependencies.rb:245:in `block in load'
    from /usr/local/rvm/gems/ruby-1.9.3-p194/gems/activesupport-

3.2.8/lib/active_support/dependencies.rb:236:in `load_dependency'
    from /usr/local/rvm/gems/ruby-1.9.3-p194/gems/activesupport-

3.2.8/lib/active_support/dependencies.rb:245:in `load'
    from /usr/local/rvm/gems/ruby-1.9.3-p194/gems/railties-

3.2.8/lib/rails/application/routes_reloader.rb:40:in `block in load_paths'
    from /usr/local/rvm/gems/ruby-1.9.3-p194/gems/railties-

3.2.8/lib/rails/application/routes_reloader.rb:40:in `each'
    from /usr/local/rvm/gems/ruby-1.9.3-p194/gems/railties-

3.2.8/lib/rails/application/routes_reloader.rb:40:in `load_paths'
    from /usr/local/rvm/gems/ruby-1.9.3-p194/gems/railties-

3.2.8/lib/rails/application/routes_reloader.rb:16:in `reload!'
    from /usr/local/rvm/gems/ruby-1.9.3-p194/gems/railties-

3.2.8/lib/rails/application/routes_reloader.rb:26:in `block in updater'
    from /usr/local/rvm/gems/ruby-1.9.3-p194/gems/activesupport-

3.2.8/lib/active_support/file_update_checker.rb:78:in `call'
    from /usr/local/rvm/gems/ruby-1.9.3-p194/gems/activesupport-

3.2.8/lib/active_support/file_update_checker.rb:78:in `execute'
    from /usr/local/rvm/gems/ruby-1.9.3-p194/gems/railties-

3.2.8/lib/rails/application/routes_reloader.rb:27:in `updater'
    from /usr/local/rvm/gems/ruby-1.9.3-p194/gems/railties-

 3.2.8/lib/rails/application/routes_reloader.rb:7:in `execute_if_updated'
    from /usr/local/rvm/gems/ruby-1.9.3-p194/gems/railties-

3.2.8/lib/rails/application/finisher.rb:66:in `block in <module:Finisher>'
    from /usr/local/rvm/gems/ruby-1.9.3-p194/gems/railties-

3.2.8/lib/rails/initializable.rb:30:in `instance_exec'
    from /usr/local/rvm/gems/ruby-1.9.3-p194/gems/railties-

3.2.8/lib/rails/initializable.rb:30:in `run'
    from /usr/local/rvm/gems/ruby-1.9.3-p194/gems/railties-  

3.2.8/lib/rails/initializable.rb:55:in `block in run_initializers'
    from /usr/local/rvm/gems/ruby-1.9.3-p194/gems/railties-  

3.2.8/lib/rails/initializable.rb:54:in `each'
    from /usr/local/rvm/gems/ruby-1.9.3-p194/gems/railties-  

3.2.8/lib/rails/initializable.rb:54:in `run_initializers'
    from /usr/local/rvm/gems/ruby-1.9.3-p194/gems/railties-

3.2.8/lib/rails/application.rb:136:in `initialize!'
    from /usr/local/rvm/gems/ruby-1.9.3-p194/gems/railties-

3.2.8/lib/rails/railtie/configurable.rb:30:in `method_missing'
    from /Users/GooComedy/Host/Ruby-On-Rails/blog/config/environment.rb:5:in `<top 

(required)>'
    from /Users/GooComedy/Host/Ruby-On-Rails/blog/config.ru:4:in `require'
    from /Users/GooComedy/Host/Ruby-On-Rails/blog/config.ru:4:in `block in <main>'
    from /usr/local/rvm/gems/ruby-1.9.3-p194/gems/rack-1.4.1/lib/rack/builder.rb:51:in 

`instance_eval'
    from /usr/local/rvm/gems/ruby-1.9.3-p194/gems/rack-1.4.1/lib/rack/builder.rb:51:in 

`initialize'
    from /Users/GooComedy/Host/Ruby-On-Rails/blog/config.ru:1:in `new'
    from /Users/GooComedy/Host/Ruby-On-Rails/blog/config.ru:1:in `<main>'
    from /usr/local/rvm/gems/ruby-1.9.3-p194/gems/rack-1.4.1/lib/rack/builder.rb:40:in 

`eval'
    from /usr/local/rvm/gems/ruby-1.9.3-p194/gems/rack-1.4.1/lib/rack/builder.rb:40:in 

parse_file'
    from /usr/local/rvm/gems/ruby-1.9.3-p194/gems/rack-1.4.1/lib/rack/server.rb:200:in 

`app'
    from /usr/local/rvm/gems/ruby-1.9.3-p194/gems/railties-3.2.8/lib/rails/commands/server.rb:46:in `app'
    from /usr/local/rvm/gems/ruby-1.9.3-p194/gems/rack-1.4.1/lib/rack/server.rb:301:in 
`wrapped_app'

    from /usr/local/rvm/gems/ruby-1.9.3-p194/gems/rack-1.4.1/lib/rack/server.rb:252:in `start'
    from /usr/local/rvm/gems/ruby-1.9.3-p194/gems/railties-
3.2.8/lib/rails/commands/server.rb:70:in `start'
    from /usr/local/rvm/gems/ruby-1.9.3-p194/gems/railties-
3.2.8/lib/rails/commands.rb:55:in `block in <top (required)>'
    from /usr/local/rvm/gems/ruby-1.9.3-p194/gems/railties-
3.2.8/lib/rails/commands.rb:50:in `tap'
    from /usr/local/rvm/gems/ruby-1.9.3-p194/gems/railties-
3.2.8/lib/rails/commands.rb:50:in `<top (required)>'
    from script/rails:6:in `require'
    from script/rails:6:in `<main>' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T05:22:19.727

在您的 routes.rb 文件中，您需要在表单中添加根控制器和操作

```
root :to => "controller_name#action_name" 
```

# c++ - C++ 中的长手乘法

> ID：13666591
> 
> 赞同：0
> 
> 时间：2012-12-02T05:08:30.743
> 
> 标签：c++, arrays, binary, multiplication

我正在尝试为存储在两个数组中的 8 位二进制数实现长手乘法方法`BeforeDecimal1 and BeforeDecimal2`。问题是我总是得到错误的结果。我试图找出问题，但无法做到。这是代码：

*这是一个比前一个更精致的代码。它给了我结果，但结果不正确。*

int i=0，进位=0；

```
while(true)
{
    if(BeforeDecimal2[i]!=0)
        for(int j=7;j>=0;j--)
        {
            if(s[j]==1 && BeforeDecimal1[j]==1 && carry==0)
            {
                cout<<"Inside first, j= "<<j<<endl;
                carry=1;
                s[j]=0;
            }
            else
                if(s[j]==1 && BeforeDecimal1[j]==0 && carry==1)
                {
                    cout<<"Inside second, j= "<<j<<endl;
                    carry=1;
                    s[j]=0;
                }
                else
                    if(s[j]==0 && BeforeDecimal1[j]==0 && carry==1)
                    {
                        cout<<"Inside third, j= "<<j<<endl;
                        carry=0;
                        s[j]=1;
                    }
                    else
                        if(s[j]==0 && BeforeDecimal1[j]==0 && carry==0)
                        {
                            cout<<"Inside fourth, j= "<<j<<endl;
                            carry=0;
                            s[j]=0;
                        }
                        else
                            if(s[j]==0 && BeforeDecimal1[j]==1 && carry==0)
                            {
                                cout<<"Inside fifth, j= "<<j<<endl;
                                carry=0;
                                s[j]=1;
                            }

                            else
                                if(s[j]==1 && BeforeDecimal1[j]==1 && carry==1)
                                {
                                    //cout<<"Inside fifth, j= "<<j<<endl;
                                    carry=1;
                                    s[j]=1;
                                }
                                else
                                    if(s[j]==1 && BeforeDecimal1[j]==0 && carry==0)
                                    {
                                        //cout<<"Inside fifth, j= "<<j<<endl;
                                        carry=0;
                                        s[j]=1;
                                    }
                                    else
                                        if(s[j]==0 && BeforeDecimal1[j]==1 && carry==1)
                                        {
                                            //cout<<"Inside fifth, j= "<<j<<endl;
                                            carry=1;
                                            s[j]=0;
                                        }

        }

        for(int h=7;h>=0;h--)
        {
            if(h==0)
            {
                BeforeDecimal1[0]=0; // that is inserting zeros from the right
            }
            else
            {
                BeforeDecimal1[h]=BeforeDecimal1[h-1];
                BeforeDecimal1[h-1]=0;
            }

        }
    if(i==3)
        break;

    i++;
} 
```

问候

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-02T07:40:40.447

也许最容易备份并从存储为 8 位二进制数的 8 位二进制数开始。就像我们做十进制乘法一样，我们从多个数字开始。我们将乘以这些单个数字的值，并将它们加在一起以获得最终结果。区别（或一个明显的区别）是因为我们使用二进制工作，我们所有的数字都代表 2 的幂，所以我们可以通过简单地对输入进行位移来获得每个中间结果。

由于它是二进制的，我们对每个数字只有两种可能性：如果它是 0，那么我们需要将另一个数字加 0 乘以左移适当的位数。显然，0 次还是 0，所以在这种情况下我们什么也不做。另一种可能性是我们有一个 1，在这种情况下，我们将 1 乘以另一个数字，左移适当的位数。

例如，让我们考虑 17 x 5 或（二进制）10001 x 101。

```
 10001
       101
    ------
     10001
 + 1000100
  --------
 = 1010101 
```

将其转换为更容易识别的东西，我们得到 0x55 或 85 [d]。

在代码中，这个过程相当简短。从结果 0 开始。检查是否设置了一个操作数中的最低有效位。如果是这样，则将另一个操作数添加到结果中。将一个操作数右移一点，另一个操作数左移一点，然后重复直到右移的操作数等于 0：

```
unsigned short mul(unsigned char input1, unsigned char input2) { 
    unsigned short result = 0;

    while (input2 != 0) {
        if (input2 & 1)
            result += input1;
        input1 <<= 1;
        input2 >>= 1;
    }
    return result;
} 
```

如果要处理有符号数，通常最容易单独计算结果的符号，并对绝对值进行乘法运算。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-02T05:29:48.710

您在以下代码行中遇到问题

```
if(reverse==0)
{
    totalReverse=totalReverse-1;
    reverse=totalReverse;
} 
```

在内部 for 循环（基于索引 j）的一些迭代之后， reverse 的值应该变为负数，当 reverse 小于 3 时，应该抛出异常。

您是否在没有异常处理的情况下运行此代码？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-02T12:11:43.290

对我来说，这闻起来像[shift 和 add](http://en.wikipedia.org/wiki/Multiplication_algorithm#Shift_and_add)。是否要求您只能使用模拟逻辑门的操作？

对于您的[全加器](http://en.wikipedia.org/wiki/Adder_%28electronics%29#Full_adder)，您有 3 个输入 s(s[j])、b(BeforeDecimal1[j])、c(carry) 和两个输出 ns(new s[j])、nc (new carry) 表格看起来像这

```
s  b  c ns nc
0  0  0  0  0 handled in v5 clause 4
0  0  1  1  0 handled in v5 clause 3
0  1  0  1  0 handled in v6 clause 5
0  1  1  0  1
1  0  0  1  0
1  0  1  0  1 handled in v5 clause 2
1  1  0  0  1 handled in v5 clause 1
1  1  1  1  1 
```

您的代码仅涵盖这 8 个子句中的 4 个（现在是 5 个）

为了避免丑陋的 if-else-if rake，我建议使用临时结果变量（进位和 s 在下一个 if 子句中仍然有效）

当您分析表格时，您也可以这样做（伪布尔符号）

```
nc = s && b || s && c || b && c;
ns = s XOR b XOR c;              // there is no XOR in C++: axb = a&&!b || !a&&b 
```

算术符号

```
nc = (s + b + c) / 2;
ns = (s + b + c) % 2;

// [...]
for(int j=7;j>=0;j--)
{
    // start changed code
    const int sum = s[j] + BeforeDecimal1[j] + carry;
    s[j]=sum % 2;
    carry=sum / 2;
    // end changed code
}
// [...] 
```

这是您的问题[序列乘法的一个很好的模拟](http://www.ecs.umass.edu/ece/koren/arith/simulator/SeqMul/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-03T05:04:04.127

除非您的要求另有明确说明，否则您的问题或到目前为止的任何评论都不清楚，否则没有必要处理位数组。字节数组在空间和时间上都更有效。

您也不需要这种详尽的案例爆炸。唯一的特殊情况是任一操作数为零，`a[i]|b[i] == 0`即

```
result[i] = carry;
carry = 0; 
```

所有其他情况可以通过以下方式处理：

```
result[i] = a[i]*b[i]+carry;
carry = (result[i] >>> 8) & 1;
result[i] &= 0xff; 
```

我看不出名字`BeforeDecimal1`有什么意义`BeforeDecimal2`。

# c - printf 中的 %s 格式说明符

> ID：13666593
> 
> 赞同：0
> 
> 时间：2012-12-02T05:09:03.927
> 
> 标签：c, segmentation-fault, printf

```
#include <stdio.h>
int main()
{
    char str[11] = "HelloWorld";
    printf("%s\n",str);
    printf("%s\n",str+3);

    /* This Line here is the devil */
    printf("%s\n",str[2]); // %s needs an addr not a value.

    return 0;
} 
```

为什么那条线会出现分段错误。是因为`%s`in`printf`需要一个地址而不是一个值。真正的原因是什么？？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-02T05:17:47.137

`str[2]`返回一个 char，而不是指向 char 的指针。因此，`printf`将尝试从 address 开始阅读`0x6c`。就在那里，很有可能`0x6c`是无效地址，会导致段错误。但是，如果它不是无效的，那么`printf`将继续读取，直到它到达一个`0x00`字符，这很可能进入一个无效的地址范围。

如果您想确切地知道它为什么会出现段错误，则需要在调试器中进行操作，这可能很有趣且具有教育意义。

如果要修复崩溃线，可以将其更改为：

```
 printf("%s\n", &str[2]); 
```

我认为这比`str+2`.

# cloud-foundry - vmc 登录错误

> ID：13666603
> 
> 赞同：0
> 
> 时间：2012-12-02T05:10:30.460
> 
> 标签：cloud-foundry

尝试在 mac osx 命令行中使用 vmc 使用我的 cloudfoundry 凭据登录时出现问题。

我试过：
vmc login
vmc -t login
vmc add-user MYEMAIL --email MYEMAIL --passwd MYPASSWORD
vmc login MYEMAIL --password MYPASSWORD

所有这些都会导致用户身份验证错误。我使用了欢迎电子邮件中的原始密码并重置了我的密码，并尝试使用上述命令。

我当前的电子邮件/密码组合在登录 login.cloudfoundry.com 网站时完美验证。

有任何想法吗？

编辑：对于使用 MicroCloud 登录，根据安迪通过运行修复的答案`vmc register`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T07:57:43.520

你的目标是什么？键入时会得到什么：vmc target

您的目标应该是[https://api.cloudfoundry.com](https://api.cloudfoundry.com)

```
vmc target https://api.cloudfoundry.com 
```

# objective-c - iOS 最佳实践确保用户拥有核心数据的最新更新

> ID：13666607
> 
> 赞同：3
> 
> 时间：2012-12-02T05:10:42.037
> 
> 标签：objective-c, ios, core-data, nsfetchedresultscontroller, nsoperationqueue

对于一个简单的笔记应用程序，有一个带有 fetchedResultsController 的表格视图控制器，其中包含核心数据中保存的笔记列表。用户可以单击 + 按钮添加新注释，也可以单击表格视图中的一条记录来编辑现有注释。在任何一种情况下，都会显示带有文本视图的模态视图控制器。

我想在用户键入每个字母时保存，所以在 textViewDidChange 中我正在更新核心数据。如果用户输入速度太快，核心数据会保存挂起。我最近添加了将更新添加到 NSOperationQueue 的代码，这是从这里获取的一个想法：
[如何在 iOS 中实现仅处理最新请求的工作队列？](https://stackoverflow.com/questions/13232655/how-to-implement-work-queue-in-ios-where-only-newest-request-is-handled)这在一定程度上有所帮助。

这是我需要帮助的问题。假设用户在 textView 中键入一个更新，然后按下 Done 以返回到 table view 控制器，然后在原始更新在 table view 中刷新之前再次单击同一注释以再次编辑该注释。用户会看到一个包含旧数据的 textView。更新不存在。如果用户返回表格视图并再次编辑注释，则会显示最新更新。

有哪些方法需要考虑，或者我该如何尝试解决这个问题？我希望 textView 始终显示最新更新，即使用户从 textView 和 tableViewController 来回切换的速度比用户应该的要快；）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-02T05:20:48.623

您不需要在每次用户添加字符时保存上下文，仅在他完成添加注释时保存上下文，或者至少在文本字段失去焦点（第一响应者辞职）时保存。每次他敲击时都这样做是没有意义的。保存上下文是一项非常昂贵的操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-02T05:16:08.327

也许尝试一次保存所有更改：

```
- (void)viewWillDisappear:(BOOL)animated 
```

而不是不断保存为用户类型，这有点多余。

如果用户转到他们的主屏幕，则将更改保存在

```
- (void)applicationDidEnterBackground 
```

# sql - 访问 SQL 查询以显示数据的更改历史记录

> ID：13666608
> 
> 赞同：1
> 
> 时间：2012-12-02T05:11:03.483
> 
> 标签：sql, ms-access

（问题与[此](https://stackoverflow.com/questions/11854673/sql-query-to-show-change-history-of-data)类似，只是我的是 1-in Access，而不是 SQL Server，并且 2-仅检查一列是否有更改。）

以下是产品 (SKU) 的样本数据、购买日期和购买时的价格：

```
+----------------+------------+------------+
|      SKU       | Unit_Price |  Date_Due  |
+----------------+------------+------------+
| BHM1200NBACSTA | $13.00     | 11/2/2012  |
| BHM1200NBACSTA | $13.00     | 10/19/2012 |
| BHM1200NBACSTA | $13.00     | 9/28/2012  |
| BHM1200NBACSTA | $10.50     | 9/21/2012  |
| BHM1200NBACSTA | $13.00     | 8/27/2012  |
| BHM1200NBACSTA | $13.00     | 7/4/2012   |
| BHM1200NBACSTA | $12.50     | 6/19/2012  |
| BHM1700NDACSTA | $14.50     | 10/27/2012 |
| BHM1700NDACSTA | $14.73     | 9/29/2012  |
| BHM1700NDACSTA | $14.73     | 8/23/2012  |
| BHM1700NDACSTA | $14.50     | 6/20/2012  |
+----------------+------------+------------+ 
```

我只想查看任何给定日期范围的一个价格，因此以相同的价格多次购买了给定的产品，我只想查看该价格的该产品的第一个日期：

示例输出如下：

```
+----------------+------------+------------+
|      SKU       | Unit_Price |  Date_Due  |
+----------------+------------+------------+
| BHM1200NBACSTA | $13.00     | 9/28/2012  |
| BHM1200NBACSTA | $10.50     | 9/21/2012  |
| BHM1200NBACSTA | $13.00     | 7/4/2012   |
| BHM1200NBACSTA | $12.50     | 6/19/2012  |
| BHM1700NDACSTA | $14.50     | 10/27/2012 |
| BHM1700NDACSTA | $14.73     | 8/23/2012  |
| BHM1700NDACSTA | $14.50     | 6/20/2012  |
+----------------+------------+------------+ 
```

（请注意，价格可能会先涨后跌，然后再涨。我不仅想要为每种产品设置唯一的价格，还希望为每个连续的日期范围设置唯一的价格。）

到目前为止，我使用过：

```
SELECT hbp1.SKU, hbp1.Date_Due, hbp1.Unit_Price
FROM Historical_Buy_Prices AS hbp1 
Left JOIN Historical_Buy_Prices AS hpb2 
    ON (hbp1.SKU = hpb2.SKU) 
    AND (hbp1.Date_Due + 1 = hpb2.Date_Due)
WHERE (hpb2.Date_Due IS NULL
    OR hbp1.Unit_Price <> hbp2.Unit_Price)
ORDER BY hbp1.SKU, hbp1.Date_Due; 
```

当我运行它时，在显示结果之前，Access 会提示我输入 hbp2.Unit_Price 的值，然后仍然返回重复项。

我敢肯定这是我错过的简单事情。你能帮忙吗？谢谢，

更新：要使用 ddl 创建表，请使用：

```
 CREATE TABLE Historical_Buy_Prices (SKU Text, UNIT_PRICE Currency, DATE_DUE Date
); 
```

要插入示例数据，请使用：

```
INSERT INTO Historical_Buy_Prices VALUES ("BHM1200NBACSTA", 13.00, #11/2/2012#);
INSERT INTO Historical_Buy_Prices VALUES ("BHM1200NBACSTA", 13.00, #10/19/2012#);
INSERT INTO Historical_Buy_Prices VALUES ("BHM1200NBACSTA", 13.00, #9/28/2012#);
INSERT INTO Historical_Buy_Prices VALUES ("BHM1200NBACSTA", 10.50, #9/21/2012#);
INSERT INTO Historical_Buy_Prices VALUES ("BHM1200NBACSTA", 13.00, #8/27/2012#);
INSERT INTO Historical_Buy_Prices VALUES ("BHM1200NBACSTA", 13.00, #7/4/2012#);
INSERT INTO Historical_Buy_Prices VALUES ("BHM1200NBACSTA", 12.50, #6/19/2012#);
INSERT INTO Historical_Buy_Prices VALUES ("BHM1700NDACSTA", 14.50, #10/27/2012#);
INSERT INTO Historical_Buy_Prices VALUES ("BHM1700NDACSTA", 14.73, #9/29/2012#);
INSERT INTO Historical_Buy_Prices VALUES ("BHM1700NDACSTA", 14.73, #8/23/2012#);
INSERT INTO Historical_Buy_Prices VALUES ("BHM1700NDACSTA", 14.50, #6/20/2012#); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T07:54:17.690

下面的查询使用一个子查询（别名为“sub”），该子查询又使用一个相关的子查询来确定每个`SKU`和`DATE_DUE`对的先前价格。最外层的查询过滤掉您不感兴趣的行。

您可以将“子”子查询分解为单独的查询，以帮助了解它的工作原理。

```
SELECT
    sub.SKU,
    sub.UNIT_PRICE,
    sub.DATE_DUE
FROM
    (
        SELECT
            h.SKU,
            h.DATE_DUE,
            h.UNIT_PRICE,
            (
                SELECT TOP 1 UNIT_PRICE
                FROM Historical_Buy_Prices
                WHERE
                        SKU = h.SKU
                    AND DATE_DUE < h.DATE_DUE
                ORDER BY DATE_DUE DESC
            ) AS previous_price
        FROM Historical_Buy_Prices AS h
    ) AS sub
WHERE
       sub.UNIT_PRICE <> [previous_price]
    OR sub.previous_price Is Null
ORDER BY
    sub.SKU,
    sub.DATE_DUE DESC; 
```

# eclipse - Java IDE 的解决方案/项目文件

> ID：13666615
> 
> 赞同：0
> 
> 时间：2012-12-02T05:11:50.883
> 
> 标签：eclipse, visual-studio-2010, netbeans

有没有办法使用 Java IDE（如 Eclipse 或 Netbeans）制作可双击的解决方案/项目文件，就像`.sln`Visual Studio 的文件一样？

这样当我在计算机之间移动我的源代码时，我所要做的就是双击解决方案/项目文件，项目就会自动加载？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T05:17:12.760

打开eclipse，在Menu file->Import，你可以找到一些有用的menu-item来打开一个java项目。事实上，有时没有你想要的项目文件。

# java - Tomcat中的HttpServletRequestWrapper和Filter生命周期

> ID：13666618
> 
> 赞同：0
> 
> 时间：2012-12-02T05:12:14.980
> 
> 标签：java, jakarta-ee, tomcat, servlets, servlet-filters

我正在编写 Tomcat 应用程序并针对 Google 的 oauth2 服务进行身份验证。我本来打算写一个简单`Filter`的来做身份验证，但是没有办法在`Filter`. 据我了解，您必须`Filter`实现调用`HttpServletRequestWrapper`并将其设置在该类中，[如本文所示](http://www.coderanch.com/t/466744/Servlets/java/Set-user-principal-filter)

我很确定 Tomcat 只实例化`Filter`您可能定义的每种类型中的一种，并且所有请求都通过这个单个对象沿着`Filter`链向下传递（如果我错了，请纠正我）。

在链接到代码中，代码调用是否正确

`next.doFilter(new UserRoleRequestWrapper(user, roles, request), response);`

每个请求都在实例化一个新的`UserRoleRequestWrapper`？这个过滤器是否应该设置一个请求包装器来在所有请求中共享？我很难找到有关此类规范的文档。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T05:20:55.060

我认为过滤器不是您要寻找的。似乎不适合这个目的......没有为这些用例创建过滤器；它们是为前/后处理请求和响应而创建的，重点是操纵实际的请求/响应*数据*，而不是客户端-服务器通信的其他方面（例如安全性）。请记住，对用户进行身份验证可能会产生比仅处理 HTTP 请求周期更进一步的影响。与 HTTP 周期相比，安全性与 JavaEE 框架的关联级别更低。

如果要针对 oauth2 进行身份验证，最好为它实现某种 JAAS 实现，并将其插入 Tomcat。

# ruby - 三元运算符语法错误

> ID：13666621
> 
> 赞同：1
> 
> 时间：2012-12-02T05:12:40.200
> 
> 标签：ruby

Ruby 新手，探索三元运算符。

这正如预期的那样工作：

```
5==5? "x" : "y" 
```

返回“x”，因为 ruby​​ 中的所有内容都是一个表达式。

但是，这不...

```
user.birthday? "x" : "y" 
```

假设检查生日是否为零，并返回适当的字符串。但它给了我一个语法错误：

```
syntax error, unexpected ':', expecting $end
user.birthday? "x" : "y"
                    ^ 
```

这个陈述与另一个陈述有何不同？

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-02T05:14:55.657

在 ruby​​ 中，方法可以而且经常以[问号](https://stackoverflow.com/questions/7179016/what-is-the-purpose-of-and-at-the-end-of-method-names)结尾。

```
user.birthday ? "x" : "y" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-02T18:28:07.663

在你的情况下user.birthday？? 'x' : 如果你想检查生日是否为 nil/false，'y' 会起作用。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-12-02T05:33:57.330

ruby 是一种面向对象的编程语言，所以所有方法定义都是从一个类继承的，这就像一个“真的”，试试这个：

`class User`

 ````
def birthday(confirm)
    return true
end 
```

end

us = User.new()

us.birthday("My birthday")

rep= us.birthday("My birthday") ? "x": "y"` 

`puts rep`

# javascript - 将类绑定到 ember 中的 div

> ID：13666624
> 
> 赞同：4
> 
> 时间：2012-12-02T05:13:32.697
> 
> 标签：javascript, ember.js

我想根据 ember 中的动态值将类绑定到 div；它应该在它为 false 时隐藏 DOM 元素，并在值为 true 时为其添加两个类。

这是我的代码：

```
<div {{bindAttr class="App.User.isLoggedIn:alert alert-error:hide" }} >
    ...
</div> 
```

但是绑定不起作用，即使 app.User.isLoggedIn 为假，它也会继续显示 div。

如何根据真实条件绑定多个类？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-24T06:00:31.563

因此，要获得绑定属性（在您的情况下为类名）的组合，您可以使用空格列出单独的绑定条件。

基本上，在您的 {{bindAttr ...}} 助手中，您可以编写 boundAttr="criterion1criterion2criteria3"，其中单个绑定标准扩展为以下格式：

**属性替换**

```
propertyName 
```

这在 classNames 中具有两种不同的行为：

1.  如果属性值为布尔值：破折号属性名称
2.  如果属性值是字符串：字符串值

**静态类/始终为真：**

```
:className 
```

总是将类名添加到 div。

**以属性为条件：**

```
propertyName:trueClass 
propertyName:trueClass:falseClass 
propertyName::falseClass 
```

评估属性，并根据真/假值分配适当的类。

在你的情况下，因为你想让两个类挂在同一个属性上，你可以这样做：

```
<div {{bindAttr class="App.User.isLoggedIn:alert App.User.isLoggedIn:alert-error:hide"}} >
    ...
</div> 
```

注意这里的空格。第一个标准只关注警报类，而第二个标准相应地关注“警报错误”或“隐藏”类。

如果您想要更简单的东西，您可以有一个计算属性来确定您需要在视图或模型中应用的字符串。

然后你可以做

```
// in your view
classesNeeded: function() {

   return App.User.get('isLoggedIn') ? 'alert alert-error' : 'hide';

}.property('App.User.isLoggedIn') 
```

进而：

```
<div {{bindAttr class="view.classesNeeded"}} >
        ...
    </div> 
```

在所有情况下都需要第三个默认类的假设情况下，您可以执行以下操作：

```
<div {{bindAttr class=":defaultClass view.classesNeeded"}} >
        ...
    </div> 
```

你可以在新的 ember.js 文档中阅读更多关于属性和类绑定的信息，这里： [http ://emberjs.com/guides/templates/binding-element-class-names/](http://emberjs.com/guides/templates/binding-element-class-names/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-23T21:23:22.283

尝试改用[classNameBindings](http://emberjs.com/api/classes/Ember.View.html)。您可以根据您选择的属性状态添加或删除样式类

例如，这是 Emberjs 文档中的一个示例：

```
// Applies no class when isEnabled is true and class 'disabled' when isEnabled is false
Ember.View.create({
  classNameBindings: ['isEnabled::disabled']
  isEnabled: true
}); 
```

将产生具有以下 HTML 表示的视图实例：

```
<div id="ember1" class="ember-view"></div> 
```

当视图上的 isEnabled 属性设置为 false 时，它​​将导致视图实例具有以下 HTML 表示形式：

```
<div id="ember1" class="ember-view disabled"></div> 
```

# html - Bootstrap 可切换标签

> ID：13666628
> 
> 赞同：1
> 
> 时间：2012-12-02T05:14:52.893
> 
> 标签：html, twitter-bootstrap

我是新手引导。我试图使用代码来制作带有可切换标签的页面。但是，我已经检查了很多次我的代码，但我仍然无法在我的代码中找到问题。有人会帮我吗？

```
<div class="row">

  <div class="tabbable">

    <ul class="nav nav-tabs" id="tabs" data-tabs="tabs">
      <li class="active"><a href="#having_a" data-toggle="tab">Having a</a></li>
      <li><a href="#having_b" data-toggle="tab">Having b</a></li>
      <li><a href="#having_c" data-toggle="tab">Having c</a></li>
    </ul>

  <!-- content of the tab -->
    <div class="tab-content" id="tab-content">

      <div class="tab-pane active" id="having_a">
        <p>a</p>
      </div>

      <div class="tab-pane" id="having_b">
        <p>b</p>
      </div>

      <div class="tab-pane" id="having_c">
        <p>c</p>
      </div>

    </div>

  </div>

  <script type="text/javascript">
     jQuery(document).ready(function ($) {$('#tabs').tab(); });
  </script>    

  </div>     

  <hr>

  <footer>
    <p>&copy;2012</p>
  </footer>

</div> <!-- /container -->

<!-- Le javascript
================================================== -->
<!-- Placed at the end of the document so the pages load faster -->
<script src="js/jquery.js"></script>
<script src="js/bootstrap-transition.js"></script>
<script src="js/bootstrap-alert.js"></script>
<script src="js/bootstrap-modal.js"></script>
<script src="js/bootstrap-dropdown.js"></script>
<script src="js/bootstrap-scrollspy.js"></script>
<script src="js/bootstrap-tab.js"></script>
<script src="js/bootstrap-tooltip.js"></script>
<script src="js/bootstrap-popover.js"></script>
<script src="js/bootstrap-button.js"></script>
<script src="js/bootstrap-collapse.js"></script>
<script src="js/bootstrap-carousel.js"></script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T05:20:30.083

您没有包含函数

1.  id="我的标签"
2.  插入 $.tab('show')

例如

```
 <ul class="nav nav-tabs id="myTab">
      <li class="active"><a href="#having_a" data-toggle="tab">Having a</a></li>
      <li><a href="#having_b" data-toggle="tab">Having b</a></li>
      <li><a href="#having_c" data-toggle="tab">Having c</a></li>
    </ul>

<script>
  $(function () {
    $('#myTab').tab('show');
  })
</script> 
```

[http://twitter.github.com/bootstrap/javascript.html#tabs](http://twitter.github.com/bootstrap/javascript.html#tabs)

# prolog - 如何从（swi）序言输出中取出...

> ID：13666630
> 
> 赞同：0
> 
> 时间：2012-12-02T05:15:16.183
> 
> 标签：prolog, prolog-toplevel

> **可能重复：**
> [以交互方式使用 SWI-Prolog - 输出已取消](https://stackoverflow.com/questions/10252431/using-swi-prolog-interactively-output-taken-off)

我编写了一个程序，在 Prolog 中用 8 替换 X 次出现的 1。

该程序工作正常，因为它提供了正确的输出。但是当我给它长输入时，它会缩写我的输出。如何防止这种情况？

例子：

```
X = [2, 8, 3, 8, 4, 8, 5, 1, 6|...] . 
```

是输出

```
replace_first_k(3,[2,1,3,1,4,1,5,1,6,1],X). 
```

如何在输出终端显示X的所有字符？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T19:50:12.723

你试过用

```
Write(X) 
```

您可以在函数的每个步骤中使用它，以便它继续打印它通过的数组部分。

# javascript - 运行 Edge 动画时在 Google chrome 上面临双重声音问题

> ID：13666637
> 
> 赞同：1
> 
> 时间：2012-12-02T05:16:23.827
> 
> 标签：javascript, html, animation

我在 Adob​​e Edge animate 中创建了一个动画，它在浏览器上运行良好。接下来我为动画添加了配音，该动画完全同步并使用 j-query 完美运行。

这是我面临的问题 - 在 Google Chrome 和 Safari 上运行动画时，我得到了令人讨厌的双重声音。我在互联网上发现 Google chrome 支持 MP3、OGG、WAV 格式的音频。Mozilla 支持 OGG 格式。我已经使用 j-query 将这两种格式与动画连接起来，即 MP3 和 OGG 格式。谷歌浏览器正在阅读这两种格式，这会造成问题。

请帮我解决 Chrome 中的双重声音问题。

问候维卡斯·夏尔马

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T19:52:57.083

`<audio>`您可以尝试使用 html5 音频对象并使用 javascript 操作它，而不是使用标签。

这是一个例子：

```
var audiophile = new Audio();
audiophile.src = 'audiofile.mp3';
audiophile.play(); 
```

这样你只引用一个源文件，并且没有机会同时播放两个。

希望这可以帮助。

# java - JScrollPane 的 Java 视图只显示一半时间

> ID：13666638
> 
> 赞同：1
> 
> 时间：2012-12-02T05:16:28.930
> 
> 标签：java, swing, jscrollpane, repaint

刚开始使用 Swing，我选择了 null 布局，因为我来自 Flash 世界，并且习惯于指定每个像素和大小。稍后我会了解布局。

现在的问题是作为 JScrollPane 视图的 JTextArea 仅在我运行程序的一半时间出现。我无法选择它或输入它，因为它不存在。不过，窗格出现 100% 的时间。如果我点击几次选项卡，焦点将落在文本区域上，然后它就会出现。

我已经删除了大量与问题无关的代码。这就是为什么有些代码看起来像 MenuItemSelected 很奇怪的原因。

在 PathsPanel 的构造函数的末尾有很多重绘，因为这是我解决这个问题的“最后一搏”，因为我在许多线程中读到了重绘通常会修复未显示的问题。

此外，如果我注释掉重绘上方的 setText，则文本区域的显示频率会更低。

日程表

```
public DayPlanner () {
    //win is a JFrame
    win.setDefaultCloseOperation (JFrame.DISPOSE_ON_CLOSE);
    win.setLayout (null);
    win.setResizable (false);
    win.setVisible (true);

    MenuItemSelected ("Paths");
    win.repaint ();
}

public void MenuItemSelected (String command) {
    ChangePanel (PathsPanel.class, pathsPanel);
}

private void ChangePanel (Class panelClass, Component ref) {
        activePanel = new PathsPanel (this);
        pathsPanel = (PathsPanel) activePanel;

        win.add (activePanel);
        win.repaint ();
    }
} 
```

路径面板

```
public PathsPanel (DayPlanner parent) {
    //extends JPanel
    this.parent = parent;

    setLayout (null);
    setBounds (0, 0, 500, 500);

    txtMessages = new JTextArea ();
    txtMessages.setOpaque (true);
    txtMessages.setBackground (Color.RED);

    JScrollPane scpMessage = new JScrollPane (txtMessages, JScrollPane.VERTICAL_SCROLLBAR_AS_NEEDED, JScrollPane.HORIZONTAL_SCROLLBAR_AS_NEEDED);
    scpMessage.setBounds (0, 0, 500, 500);

    txtMessages.setText ("AWD");
    txtMessages.repaint ();
    scpMessage.repaint ();
    repaint ();
} 
```

我敢打赌这与不使用 LayoutManager 有关！

# c# - 无法将信息连接到列表框，而在 WP7 的另一个列表框中

> ID：13666642
> 
> 赞同：0
> 
> 时间：2012-12-02T05:17:37.150
> 
> 标签：c#, wpf, windows-phone-7

我有课新闻

```
public class News : ObservableCollection<New>
{
    public News()
        : base()
    {

    }
} 
```

一类新

```
public class New : INotifyPropertyChanged
{
         public PhotoAttachments Photo
    {
        get
        { 
            return photoAttachments;
        }
        set
        {
            photoAttachments = value;
            OnPropertyChanged("Photo");
        }
    }
   // some fields such as date, text, id, sourceName etc
 public event PropertyChangedEventHandler PropertyChanged;
  protected void OnPropertyChanged(string info)
{//realisation of method}
 public PhotoAttachments photoAttachments = new PhotoAttachments(); // it is a collection, such as News, but it contains objects of class PhotoAttachment, which have property with string url to photo
} 
```

在 `InitializeComponent();`我写`this.listBox.ItemsSource = NewsList;` 了一个包含 New 类对象的列表框之后。在这些列表框中，我创建了另一个列表框，并尝试通过 PhotoAttachments 集合填充它。在这里我有一个问题，带有照片的列表框不显示照片（但它们存在）。这是 XAML：

```
// I can select different      <local:NewsTemplateSelector.Photos>
//style of listbox               <DataTemplate>
//using  NewsTemplateSelector     <Border BorderBrush="Red" BorderThickness="2"  Width="400" Height="300" Margin="10">
                                        <StackPanel Orientation="Horizontal" Width="400" Height="300">
                                            <Image Source="{Binding SourceImage}" Height="75" Width="75" Margin="0,-225,0,0" />
                                            <Canvas Width="400">
                                                <TextBlock Text="{Binding SourceName}" Foreground="Black" FontSize="25" TextWrapping="Wrap" Height="65" Width="326" d:LayoutOverrides="VerticalAlignment, Height" />
                                                <ListBox Name="photoListbox" ItemsSource="{Binding Photo}"  Height="229" VerticalAlignment="Bottom" HorizontalAlignment="Right" Width="326" Canvas.Top="69">
                                                    <Image  Source="{Binding Big}" Height="200" VerticalAlignment="Bottom" HorizontalAlignment="Right" Width="400" />
                                                </ListBox>
                                            </Canvas>
                                        </StackPanel>
                                    </Border>
                                </DataTemplate>
                            </local:NewsTemplateSelector.Photos> 
```

照片附件类：

```
 public class PhotoAttachment : INotifyPropertyChanged
{
    private string ownerId;
    public string OwnerId { get { return ownerId; } set { ownerId = value; OnPropertyChanged("OwnerId"); } }
    private string small;
    public string Small { get { return small; } set { small = value; OnPropertyChanged("Small"); } }
    private string big;
    public string Big { get { return big; } set { big = value; OnPropertyChanged("Big"); } }
    public PhotoAttachment(string ownId, string small, string big)
    {
        ownerId = ownId;
        this.small = small;
        this.big = big;
    }
    public PhotoAttachment() { }
    public event PropertyChangedEventHandler PropertyChanged;
    protected void OnPropertyChanged(string info)
    {
        PropertyChangedEventHandler handler = PropertyChanged;
        if (handler != null)
        {
            handler(this, new PropertyChangedEventArgs(info));
        }
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T06:04:18.120

刚刚意识到您的 photoListView 的 XAML 缺少 ItemTemplate

这些方面的东西应该可以解决问题：

```
 <ListBox.ItemTemplate>
            <DataTemplate>
                <Image  Source="{Binding Big}" Height="200" VerticalAlignment="Bottom" HorizontalAlignment="Right" Width="400" />
            </DataTemplate>
        </ListBox.ItemTemplate> 
```

# heroku - 无法推送到heroku

> ID：13666646
> 
> 赞同：0
> 
> 时间：2012-12-02T05:17:47.983
> 
> 标签：heroku

我是heroku的新手我刚刚安装了heroku工具栏并执行了以下操作

```
$ heroku create
Creating pure-oasis-4419... done, stack is cedar
http://pure-oasis-4419.herokuapp.com/ | git@heroku.com:pure-oasis-4419.git
$ heroku create --stack cedar
Creating mighty-stream-7975... done, stack is cedar
http://mighty-stream-7975.herokuapp.com/ | git@heroku.com:mighty-stream-7975.git
$ git push heroku master
fatal: I don't handle protocol 'git@heroku.com:https' 
```

谁能告诉我为什么我会收到这个错误。

我也试过

```
git remote -v 
```

我仍然得到

```
fatal: I don't handle protocol 'git@heroku.com:https' 
```

我确定我在某个地方有错误。任何人都可以帮我解决这个问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-02T05:24:34.213

*   git 将源代码拉到您的设备上。
*   开始处理代码。或者只是用你的重写它们。
*   混帐添加。
*   git commit -m "提交信息"
*   git 推送

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-02T05:24:28.737

这可能是因为您的 Git 版本。尝试按照旧问题[git error: cannot handle https中的建议使用最新的](https://stackoverflow.com/questions/5500247/git-error-cannot-handle-https)

# data-mining - 开源概念挖掘工具？

> ID：13666654
> 
> 赞同：1
> 
> 时间：2012-12-02T05:19:15.147
> 
> 标签：data-mining, text-mining, concept

目前是否有任何可用的[概念挖掘](http://en.wikipedia.org/wiki/Concept_mining)开源工具？我只遇到过[Leximancer](https://www.leximancer.com/)，虽然看起来很适合这个角色，但它不是开源的，而且对于本科生来说相当昂贵。到目前为止，我一直没有成功，因为谷歌和谷歌学者上的“概念”这个词似乎与我想要的不匹配。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T11:28:34.520

在我看来，您需要一个用于聚类的文本挖掘工具。[RapidMiner](http://rapid-i.com/)有一个开源的、基于 Java 的社区版，它有几个扩展（文本挖掘、R 等）。此外，您也可以开发和集成您自己的算法。

此外， [Rexer Analytics](http://www.rexeranalytics.com/)每年都会提供全面的数据挖掘调查，您可以免费索取报告。

# c# - C# 懒惰 & 竞相初始化？

> ID：13666656
> 
> 赞同：3
> 
> 时间：2012-12-02T05:20:00.537
> 
> 标签：c#, .net, multithreading, .net-4.0, lazy-evaluation

（*在问[了这个相关问题](https://stackoverflow.com/questions/11555755/c-sharp-lazy-initialization-race-to-initialize) 之后，我还有一个问题。*）

整个想法（AFAIK）是*仅*在需要时`Lazy<T>`创建对象。为什么 ？因为创建起来很昂贵。

 *我想要的*最后一*`Expensive`件事是该对象将被创建`>1`时间。

我不在乎是否许多线程最终会产生相同的引用。我只是不希望他们创建多个实例。

所以`Lazyinitializer`通过以下方式处理`syncLock`：

```
LazyInitializer.EnsureInitialized (ref _expensive, ref useless, ref _sync, () => new Expensive()); 
```

可是怎么`Lazy<T>`办呢？我在msdn中搜索过，找不到任何`syncLock`超载...

我错过了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-02T05:35:10.073

您是在问 Lazy 在内部是如何工作的吗？[根据MSDN 文档](http://msdn.microsoft.com/en-us/library/dd997286.aspx)，Lazy 确实保证只会创建一个：

> 默认情况下，惰性对象是线程安全的。也就是说，如果构造函数没有指定线程安全的类型，那么它创建的 Lazy 对象是线程安全的。在多线程场景中，第一个访问线程安全 Lazy 对象的 Value 属性的线程会为所有线程上的所有后续访问初始化它，并且所有线程共享相同的数据。因此，哪个线程初始化对象并不重要，竞争条件是良性的。

如果您实际上是在询问它是如何在内部工作的，那么它似乎正在使用`lock`某种：

```
 object obj = Volatile.Read<object>(ref this.m_threadSafeObj);
        bool flag = false;
        try
        {
            if (obj != Lazy<T>.ALREADY_INVOKED_SENTINEL)
            {
                Monitor.Enter(obj, ref flag);
            }
            if (this.m_boxed == null)
            {
                boxed = this.CreateValue();
                this.m_boxed = boxed;
                Volatile.Write<object>(ref this.m_threadSafeObj, Lazy<T>.ALREADY_INVOKED_SENTINEL);
            }
            else
            {
                boxed = (this.m_boxed as Lazy<T>.Boxed);
                if (boxed == null)
                {
                    Lazy<T>.LazyInternalExceptionHolder lazyInternalExceptionHolder = this.m_boxed as Lazy<T>.LazyInternalExceptionHolder;
                    lazyInternalExceptionHolder.m_edi.Throw();
                }
            }
        }
        finally
        {
            if (flag)
            {
                Monitor.Exit(obj);
            }
        } 
```

注意 Monitor.Enter 和 Monitor.Exit 调用。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-02T05:33:30.787

听起来您想查看采用`LazyThreadSafetyMode`.

```
Lazy<T> lazy = new Lazy<T>(() => new T, LazyThreadSafetyMode.ExecutionAndPublication); 
```

`Lazy<T>`基本上是一个用户友好的版本`LazyInitializer`，单线程或多线程 init 的确切实现隐藏在该枚举后面。*

# html - 在 HAML 中的链接中嵌套链接时遇到问题

> ID：13666666
> 
> 赞同：2
> 
> 时间：2012-12-02T05:21:04.357
> 
> 标签：html, ruby, haml, nested

我在将 HAML 嵌套在另一个链接中时遇到问题。HAML 中的缩进完全正确，但输出的 HTML 非常错误。

原始 HAML 代码：

```
.item
  =link_to page_path do
    .item-info
      %h3 Item name
      =link_to 'Link', different_page_path 
```

当我在 Chrome 的检查元素中查看 HTML 时，我得到的是：

```
<a href="/page"></a>
<div class="item-info">
  <a href="/page">
    <h3>Item name</h3>
  </a>
  <a href="/different_page">Link</a>
</div> 
```

但是当我查看源代码时，它显示正确，但在查看页面时仍然一团糟：

```
<a href="/page">
  <div class='item-info'>
    <h3>Item name</h3>
    <a href="/different_page">Link</a>
  </div>
</a> 
```

我很茫然，任何帮助都会很棒。谢谢。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-12-05T18:58:54.370

如果您真的想要链接中的链接，您可以直接使用 haml 而不是 rails（或您正在使用的框架）方法 link_to：

```
.item
  %a{ :href => '/page' }
    .item-info
      %h3 Item name
      %a{ :href => '/different_page' } Link 
```

如上所述，link_to 正在帮助您在浏览器中做正确的事情。意识到这不是一个haml问题而是link_to实现可能会很好。

更新：澄清 - 浏览器仍然无法很好地呈现它，但生成的标记将按要求进行。

# php - Symfony2/Doctrine2 : 我想从用户信息中获取数据

> ID：13666667
> 
> 赞同：0
> 
> 时间：2012-12-02T05:21:24.223
> 
> 标签：php, symfony, doctrine-orm

```
My\SampleBundle\Entity\Subject:

    // ...

    manyToOne:
        author:
            targetEntity: My\UserBundle\Entity\User
            joinColumn:
                name: owner
                referencedColumnName: id 
```

与主题相关的用户可以获取。

```
$query = $this->getEntityManager()
              ->createQuery('
                  SELECT s, a
                  FROM MySampleBundle:Subject s
                  LEFT JOIN s.author a
                  WHERE s.author = :author
                  GROUP BY s.title'
              )
              ->setParameter("author", $author); 
```

相反，我应该如何从用户信息中获取主题？

例如，用户列表页面中的查询。

```
$query = $this->getEntityManager()
              ->createQuery('
                  SELECT u
                  FROM MyUserBundle:User u
                  GROUP BY u.username'
              ); 
```

这时候，我也想获取一个相关科目的数据。

我使用 FOSUserBundle。
这是一个应该纠正 My\UserBundle\Entity 的问题吗？
还是从 orm 设置的阶段就错了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T02:40:57.107

我修改的程序。

步骤：1 添加到 My\UserBundle\Entity\User

```
/**
 * @ORM\OneToMany(targetEntity="My\SampleBundle\Entity\Subject", mappedBy="author")
 */
private $subjects;

/**
 * Get subjects
 *
 * @return Doctrine\Common\Collections\Collection 
 */
public function getSubjects()
{
    return $this->subjects;
} 
```

步骤：2 添加 'inversedBy'

```
My\SampleBundle\Entity\Subject:
    type: entity

    // ...

    manyToOne:
        author:
            targetEntity: My\UserBundle\Entity\User
            inversedBy: subjects
            joinColumn:
                name: owner
                referencedColumnName: id 
```

STEP:3 查询

```
$query = $this->getEntityManager()
              ->createQuery('
                  SELECT u, s
                  FROM MyUserBundle:User u
                  LEFT JOIN u.subjects s
                  ORDER BY u.username'
              ); 
```

获取了简单的数据。但这不是完美的解决方案。

连接表增加时停止应答，一直处于加载状态。
我认为数据不一定太重。
问题还没有搞清楚。

另一个问题的例子

```
$query = $this->getEntityManager()
              ->createQuery('
                  SELECT u, s, a, c, i
                  FROM MyUserBundle:User u
                  LEFT JOIN u.subjects s
                  LEFT JOIN u.articles a
                  LEFT JOIN u.comments c
                  LEFT JOIN u.images i
                  // etc...
                  // It will be in the state of loading all the time
                  // when join table increases.
                  ORDER BY u.username'
              ); 
```

# ruby - 如何从 Redis 获取所有数据或加快调用速度？

> ID：13666675
> 
> 赞同：0
> 
> 时间：2012-12-02T05:23:15.330
> 
> 标签：ruby, redis

也许这是一个代码审查的问题，但我认为它最适合这里。让我知道它是否需要移动。

我使用 Redis 作为 Sinatra 应用程序中某些数据的长期缓存。我正在遍历 Redis 中的所有键，提取它们的数据，并用 JSON 解析它。这需要相当多的时间。这是基准：

```
[13] pry(main)> Benchmark.measure do
[13] pry(main)*   dkeys = redis.keys.delete_if {|e| e == "last_run"}  
[13] pry(main)*   @delayed = dkeys.map {|k| {k => JSON.parse(redis.get(k))}}                                                                                                         
[13] pry(main)* end  
=>   0.520000   0.160000   0.680000 (132.410716)

[14] pry(main)> @delayed.count
=> 1358
[15] pry(main)> 
```

延迟很明显，我认为延迟是调用redis 1300+次的成本。

有没有一种方法可以将所有数据从 redis 提取到一个对象中，这样我就不必在迭代的每一步都调用它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T10:01:12.093

您应该看看@peterpan 所指的答案。特别是，`mget`应该做的伎俩：

```
dkeys = redis.keys.delete_if {|e| e == "last_run"}
@delayed = redis.mget(dkeys).map {|s| JSON.parse(s)} 
```

# algorithm - 在给定的用户定义范围内的加权无向图中找到一个简单的循环

> ID：13666676
> 
> 赞同：3
> 
> 时间：2012-12-02T05:23:37.003
> 
> 标签：algorithm, graph, routes, depth-first-search

**已编辑 - 12/03/12 @ 1:05 AM PST**

我已按如下方式编辑了我的代码。但是，我仍然没有让它返回任何路径。

同样，此代码用于计算路径，由用户指定起始顶点和距离。该程序将返回与指定数据匹配的所有适当路径。

到目前为止，这是我的代码：

```
vector<vector<Vertex>> Graph::FindPaths(Graph &g, int startingIntersection, float distanceInMiles)
{   
/* A vector which contains vectors which will contain all of the suitable found paths. */
vector<vector<Vertex>> paths;

/* Create an empty set to store the visited nodes. */
unordered_set<int> visited;

/* Vector which will be used to the hold the current path. */
vector<Vertex> CurrentPathList;

/* Will be used to store the currerntVertex being examined. */
Vertex currentVertex;

/* Will be used to store the next vertex ID to be evaluated. */
int nextVertex;

/* Will be used to determine the location of the start ID of a vertex within the VertexList. */
int start;

/* Stack containing the current paths. */
stack<Vertex> currentPaths;

/* CurrentPathDistance will be used to determine the currernt distance of the path. */
float currentPathDistance = 0;

/* The startingIntersection location must be found within the VertexList.  This is because there is
 * no guarantee that the VertexList will hold sequential data.
 *
 * For example, the user inputs a startingIntersection of 73\.  The Vertex for intersection #73 may 
 * be located at the 20th position of the VertexList (i.e. VertexList[20]). */
start = g.FindStartingIntersection(g, startingIntersection);

/* Push the startingIntersection onto the stack. */
currentPaths.push(g.VertexList[start]);

/* Continue to iterate through the stack until it is empty.  Once it is empty we have exhaused all
 * possible paths. */
while(!currentPaths.empty())
{
    /* Assign the top value of the stack to the currentVertex. */
    currentVertex = currentPaths.top();

    /* Pop the top element off of the stack. */
    currentPaths.pop();

    /* Check to see if we are back to the startingIntersection.  As a note, if we are just starting, it will 
     * put the startingIntersection into the paths. */
    if(currentVertex.id == startingIntersection)
    {
        /* Add currentVertex to a list. */
        CurrentPathList.push_back(currentVertex);

        /* Find the current path distance. */
        currentPathDistance = FindPathDistance(g, CurrentPathList);

        /* Check the currentPathDistance.  If it is within +/- 1 mile of the specified distance, then place
         * it into the vector of possible paths. */
        if((currentPathDistance + 1 >= distanceInMiles) && (currentPathDistance - 1 <= distanceInMiles))
        {
            paths.push_back(CurrentPathList);
        }
    }
    else /* The ending vertex was not the user specified starting vertex. */
    {
        /* Remove all elements from the stack. */
        while(!currentPaths.empty())
        {
            currentPaths.pop();
        }
    }

    nextVertex = FindUnvisitedNeighbor(g, currentVertex, visited);

    // repeat while current has unvisited neighbors
    while(nextVertex != -1)
    {
        /* Find the new starting vertex. */
        start = g.FindStartingIntersection(g, nextVertex);

        /* Push the startingIntersection onto the stack. */
        currentPaths.push(g.VertexList[start]);

        /* Push the next vertex into the visted list. */
        visited.insert(nextVertex);

        nextVertex = FindUnvisitedNeighbor(g, currentVertex, visited);
    }     
}

/* Return the vector of paths that meet the criteria specified by the user. */
return paths; 
```

我的代码`FindingUnvistedNeighbor()`如下：

```
int FindUnvisitedNeighbor(Graph &g, Vertex v, unordered_set<int> visited)
{
    /* Traverse through vertex "v"'s EdgeList. */
    for(int i = 0; i + 1 <= v.EdgeList.size(); i++)
    {
        /* Create interator to traverse through the visited list to find a specified vertex. */
        unordered_set<int>::const_iterator got = visited.find(v.EdgeList[i].intersection_ID_second);

        /* The vertex was not found in the visited list. */
        if(got == visited.end())
        {

            return v.EdgeList[i].intersection_ID_second;
        }
    }

    return -1;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T10:54:22.357

深度优先就好。你必须中止

```
* path too long (bad)
* vertex already visited (bad)
* starting vertex visited (found a solution) 
```

为了检测这些条件，您必须跟踪到目前为止访问的边/顶点

深度冷杉步行看起来像这样（完全未经检查）的伪代码
无论如何你应该明白

```
edge
    pair of node
    length

node
    list of edge

arrow               // incoming edge, node
    pair of edge, node

path
    list of arrow

check_node(arrow)   // incoming edge, node
    current_path.push(arrow)
    if length(current_path) > limit
        // abort too long
        current_path.pop(arrow)
        return
    if length(current_path) > 0 && current_path.first.node == current_path.last,node
        // found solution
        solutions.push(current_path)  // store the found solution and continue search
        current_path.pop(arrow)
        return
    if node in current_path
        // abort cycle
        current_path.pop(arrow)
        return
    for each edge in node
        // go deeper
        check(arrow(edge, edge.other_node))
    current_path.pop(arrow)
    return

main
    path current_path
    list of path solutions    // will hold all possible solutions after the check

    make_graph

    check_node(NULL, graph.start)

    for each solution in solutions   // print 0 .. n solutions
        print solution 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-02T13:02:26.187

这似乎是一个基本的算法问题，而不是一个特定于实现的问题，所以我为算法提供了详细的高级伪代码，而不是实际代码。另外，我不懂C++。如果有任何语法/逻辑不清楚，请告诉我，我可以澄清更多。它本质上是进行 DFS，但在找到值时不会停止：它会继续搜索，并报告该值的所有路径（符合给定距离标准）。

```
// Input: Graph G, Vertex start, Integer targetDistance
// Output: Set< List<Vertex> > paths
FindPaths ( G, start, targetDistance ):
    create an empty set, paths
    create an empty set, visited
    create an empty stack, currentPath

    // Iterative Exhaustive DFS
    push start on currentPath
    while ( currentPath is not empty ):
        current = pop ( currentPath )

        if ( current equals start ):
            copy currentPath to a list, L (reversed order doesn't matter)
            // find its weight
            w = FindPathWeight ( L, G )

            if ( w+1 >= targetDistance AND w-1 <= targetDistance ):
                add L to paths

        else if ( current is a dead-end ): drop it completely, it's useless

        x = FindUnvisitedNeighbor ( current, G, visited )
        // repeat while current has unvisited neighbors
        while ( x ):
            push x on currentPath
            add x to visited
            x = FindUnvisitedNeighbor ( current, G, visited )

    return paths
//EndFindPaths 
```

```
// Input: List path, Graph G
// Output: Integer weight
FindPathWeight ( path, G ):
    Integer weight = 0;

    for each ( Vertex v in path ):

        if ( v is the end of the path ): break

        Consider the next vertex in the list, u
        Find the edge v——u in the graph, call it e
        Get the weight of e, w
        weight = weight + w

    return weight
//EndFindPathWeight 
```

```
// Input: Vertex v, Graph G, Set visited
// Output: Vertex u (or null, if there are none)
FindUnvisitedNeighbor ( v, G, visited ):

    for each ( Edge v——u in G.EdgeList ):

        if ( u in visited ): continue

        // u is the first unvisited neighbor
        return u

    return null
//EndFindUnvisitedNeighbor 
```

# javascript - 节点js上的简单服务器

> ID：13666678
> 
> 赞同：2
> 
> 时间：2012-12-02T05:23:53.763
> 
> 标签：javascript, node.js, mongodb

大家好 :) 我的问题是 response.vrite() 不起作用，为什么？还有一个问题。每次启动/升级页面都会调用db.open吗？

```
var http = require("http");
var Db = require ("mongodb").Db;
var Server = require("mongodb").Server;
function start () {
'use strict';
function onRequest (request, response) {
    'use strict';
    var db = new Db ("TestApp", new Server ("127.0.0.1", 27017, {}));
    response.writeHead(200, {"Content-Type": "application/json", "Access-Control-Allow-Origin": "*"});
    db.open (function (err, db, response) {
        db.collection ('ObjectCollection', function (err, collection) {
            collection.find().toArray (function (err, docs) {
                console.log (docs);
                response.write(JSON.stringify(docs));
            });
        });
    });
    response.end();
}

http.createServer(onRequest).listen(8080);
console.log ('Server has started...')
}exports.start = start; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-02T05:31:49.033

你`response.end`在你的`response.write`. `response.end`在回调中移动调用，如下所示：

```
var http = require("http");
var Db = require ("mongodb").Db;
var Server = require("mongodb").Server;
function start () {
'use strict';
function onRequest (request, response) {
    'use strict';
    var db = new Db ("TestApp", new Server ("127.0.0.1", 27017, {}));
    response.writeHead(200, {"Content-Type": "application/json", "Access-Control-Allow-Origin": "*"});
    db.open (function (err, db, response) {
        db.collection ('ObjectCollection', function (err, collection) {
            collection.find().toArray (function (err, docs) {
                console.log (docs);
                response.write(JSON.stringify(docs));
                response.end();
            });
        });
    });
}

http.createServer(onRequest).listen(8080);
console.log ('Server has started...')
}
exports.start = start; 
```

是的，每个请求都会打开一个新`Db`对象，因此最好在启动期间打开一次。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-02T05:46:21.757

就像约翰尼说的那样，您在异步功能之外调用 response.end() 。通常，除非您知道它们的父函数在后台是如何工作的，否则您永远不应该指望以阻塞方式实际执行的回调。DB.open 可能会在连接完成时运行该回调，我们不知道这需要多长时间。由于 DB.Open 是非阻塞的，因此节点会在 DB.open 对数据库的异步调用甚至可能完成之前执行 response.end。您可能需要阅读一些关于异步 javascript 的内容

# split - 水晶报表分裂

> ID：13666682
> 
> 赞同：1
> 
> 时间：2012-12-02T05:24:45.773
> 
> 标签：split, crystal-reports-xi

我已经使用 Crystal Reports 几个星期了，我遇到了一个问题。我有一个具有以下值的字段：`2220006989`. 我想拆分这些数字，以便可以将每个数字排列在不同的列中，例如：

```
| 2 | 2 | 2 | 0 | 0 | 6 | 9 | 8 | 9 | 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T17:02:30.577

您介意创建 9 个公式，每个公式对应一个数字吗？每个公式都是

```
Mid({ConsideredField},1,1)
Mid({ConsideredField},2,1)
Mid({ConsideredField},3,1) 
```

等等

然后，您可以将它们称为单独的列（每个公式都是一列）

# azure - 缓存与 Azure Blob 存储的连接

> ID：13666684
> 
> 赞同：5
> 
> 时间：2012-12-02T05:25:07.927
> 
> 标签：azure, connection, azure-storage

在[如何在 .NET 中使用 Windows Azure Blob 存储服务一](http://www.windowsazure.com/en-us/develop/net/how-to-guides/blob-storage/)文中，以下代码用于演示如何上传文件

```
// Retrieve storage account from connection string.
CloudStorageAccount storageAccount = CloudStorageAccount.Parse(
    CloudConfigurationManager.GetSetting("StorageConnectionString"));

// Create the blob client.
CloudBlobClient blobClient = storageAccount.CreateCloudBlobClient();

// Retrieve reference to a previously created container.
CloudBlobContainer container = blobClient.GetContainerReference("mycontainer");

// Retrieve reference to a blob named "myblob".
CloudBlockBlob blockBlob = container.GetBlockBlobReference("myblob");

// Create or overwrite the "myblob" blob with contents from a local file.
using (var fileStream = System.IO.File.OpenRead(@"path\myfile"))
{
    blockBlob.UploadFromStream(fileStream);
} 
```

如果你有一个长时间运行的服务，它接受文件并将它们存储在 blob 存储中，你会每次都执行所有这些步骤吗？或者你可能有一个引用`blockBlob`了多个请求使用的类？从多个请求中缓存和使用多少（如果有的话）是可以的？（我猜这意味着线程）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-02T16:54:33.237

我同意@knightpfhor，没有什么可以缓存的。在您调用 UploadFromStream 之前，没有调用过长时间运行的事务。一切都在内存中，构建对象。

这不像 Sql 连接，程序员会找到巧妙的方法来缓存连接，因为它们打开起来很昂贵 - 这是 REST 调用，所以每个数据更改操作都是一个 https 调用，并且在它之前的所有准备工作都很简单- 重量对象操作

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-02T08:46:30.260

这些对象中的大多数都有非常轻量级的构造函数，并且不能保证是线程安全的（查看 MSDN 文档），所以我不会太担心缓存它们。我倾向于将其保留为静态对象的唯一一个是云存储帐户。

# javascript - 仅从 userAgent 中提取浏览器名称？

> ID：13666685
> 
> 赞同：0
> 
> 时间：2012-12-02T05:26:32.870
> 
> 标签：javascript, html, user-agent

我正在为用户呈现一条消息（使用 javascript 实现）

> 您的浏览器太旧，无法查看我的页面。您当前正在运行：

后跟用户浏览器的名称。

不幸的是，`navigator.userAgent`通常看起来像这样：

```
Mozilla/4.0 (compatible; MSIE 8.0; Windows NT 6.1; WOW64; Trident/4.0; SLCC2; .NET CLR 2.0.50727; .NET CLR 3.5.30729; .NET CLR 3.0.30729; Media Center PC 6.0; .NET4.0C; .NET4.0E) 
```

我唯一需要吐槽的是`MSIE 8.0`。

那里是否有一个正则表达式或多或少会给我一个理智的、愚蠢的人友好的 userAgent 字符串清理？这适用于大部分的浏览器。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T05:43:21.600

要从 userAgent 获取浏览器名称和版本，您可以执行以下操作：

```
function identifyBrowser() {
    var regexps = {
            'Chrome': [ /Chrome\/(\S+)/ ],
            'Firefox': [ /Firefox\/(\S+)/ ],
            'MSIE': [ /MSIE (\S+);/ ],
            'Opera': [
                /Opera\/.*?Version\/(\S+)/,
                /Opera\/(\S+)/
            ],
            'Safari': [ /Version\/(\S+).*?Safari\// ]
        },
        re, m, browser, version;

    userAgent = navigator.userAgent;
    elements = 2;
    for (browser in regexps)
        while (re = regexps[browser].shift())
            if (m = userAgent.match(re)) {
                version = (m[1].match(new RegExp('[^.]+(?:\.[^.]+){0,' + --elements + '}')))[0];
                return browser + ' ' + version);
            }
} 
```

# c++ - C++ 将信息输出到新窗口

> ID：13666686
> 
> 赞同：0
> 
> 时间：2012-12-02T05:26:32.033
> 
> 标签：c++, window, output

所以我想运行一个代码并将信息输出到一个新窗口，以获得一个只有我想要的信息的干净窗口。我正在使用 Angstrom linux 系统，我有一个代码，如果我运行，终端上显示的信息太多。有没有办法让我用我想要的信息创建一个新窗口或终端？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T09:23:52.913

您可以采取一种解决方法。只需将您需要的信息打印到文件中（例如 log.txt），然后打开一个新的终端窗口并使用：

```
tail -f log.txt 
```

这将在终端窗口出现时显示您需要的信息

# javascript - 在 Chrome 扩展中修改 Accept 标头的 XMLHttpRequest

> ID：13666687
> 
> 赞同：1
> 
> 时间：2012-12-02T05:26:52.247
> 
> 标签：javascript, google-chrome, google-chrome-extension, http-headers, xmlhttprequest

我在我的 Chrome 扩展程序中加入了 DOI 到格式化的引文功能。dx.doi.org大约在一年前[引入了内容协商](http://www.crossref.org/CrossTech/2011/11/turning_dois_into_formatted_ci.html)来支持这种活动。

当我使用修改后的 Accept 标头执行跨域 XMLHttpRequest 时，我注意到 Chrome 中出现了一些奇怪的行为。下面是重现问题的函数的最小示例（下面使用 jQuery，但使用 XMLHttpRequest 注意到完全相同的行为）：

```
function getCitation() {
var resolveUrl = "http://dx.doi.org/10.2331/suisan.32.804";
var content = 'text/bibliography; style=bibtex; locale=en-US';

document.getElementById("notify").innerHTML = "Loading...";

var jqxhr = jQuery.ajax({
    url: resolveUrl,
    headers: { Accept: content },
    dataType: "text",
    type: "GET"
});
jqxhr.done(function() {
    document.getElementById("notify").innerHTML = jqxhr.responseText;
});
jqxhr.error(function() {
    document.getElementById("notify").innerHTML = "No citation found";
});
} 
```

一些额外信息： *.doi.org 和 *.crossref.org 权限在清单中定义。

该函数工作正常，并以 BibTeX 格式返回 10.2331/suisan.32.804 的引文，用于 en-US 语言环境。[运行此功能后，当我在任何 Chrome 选项卡中访问http://dx.doi.org/10.2331/suisan.32.804](http://dx.doi.org/10.2331/suisan.32.804)时出现问题（不是通过扩展程序，我的意思是在多功能框中粘贴 url）。该站点返回 406 错误（不接受接受标头请求）。如果我再试一次，页面就会加载。然后，真正的问题是页面加载成功后，XMLHttpRequest 不再成功。很明显，我的标题更改正在全局影响 Chrome，并且不仅限于我的扩展程序的沙箱。我最终通过将 GET 请求更改为 POST 来解决问题，并且一切都按需要运行。

如果你真的有兴趣亲眼看到这种行为，我打包了一个最小的示例扩展：[citeTest.crx](http://web.missouri.edu/~mdmnq5/comp/citeTest.crx) (35KB)

现在我的问题：

1.  GET：当我做这个 XMLHttpRequest 时，是*文本/参考书目；风格=中文提供；locale=en-US*应该附加到我的扩展之外的 Accept 标头吗？（我是否犯了某种形式的错误编程？）
2.  GET：每次我做这个 XMLHttpRequest，都是*文本/参考书目；风格=中文提供；locale=en-US*被附加，所以最终 Accept 标头变得真的很长？我遇到的一个问题是每次发出请求时样式和语言环境设置可能会改变，所以我不能只设置一次。
3.  POST：我描述的问题只发生在 GET 请求中。如果用户尝试在 dx.doi.org 上提交基于 POST 的表单，这个问题是否同样会出现？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T21:54:09.603

好的，所以我想我已经深入了解了。由于缓存，问题浮出水面。当 Accept 标头设置为 text/bibliography 时，请求被重定向到 data.crossref.og（或 data.datacite.org），因为这是处理非文本/html 内容协商的地方。当我后来使用 Accept: text/html 发出请求时，由于缓存，该请求仍然指向 data.crossref.org（或 data.datacite.org）。问题是 data.crossref.org 和 data.datacite.org 不处理 text/html，只有 dx.doi.org 处理这些请求，所以它们返回错误 406。

总之，只需将 cache:false 添加到 jQuery.ajax 就可以让我很好地使用 GET 请求。我关于标题的问题大多无关紧要。

# ipad - webkit 变换比例使项目消失

> ID：13666688
> 
> 赞同：5
> 
> 时间：2012-12-02T05:27:12.503
> 
> 标签：ipad, webkit, ios6, scaletransform, webkit-transform

我正在尝试在我的 HTML 页面中缩放一个 div。这个 div 包含很多画布元素和其他 div 元素。基本上，这个 div 充当页面中所有其他项目的容器。使用 Chrome "23.0.1271.95 m" 和 IOS6.0 safari，缩放后不会出现此 div 右侧和底部的项目。如果我调整窗口大小（或更改 iPad 上的方向），则 div 会正确缩放并且项目开始出现，但在一定大小后再次消失。

这曾经在 IOS 5.0 和以前的 chrome/safari 版本中正常工作。这是最新的 webkit 版本中的错误吗？另外，是否有任何解决方法可以避免这种行为？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2014-12-17T04:51:51.717

我有这么久的解决方案，但忘了更新这篇文章。发生这种情况是因为 chrome 完成了图层组合。请添加 translate3d(0px, 0px, 0px); 在转换字符串中。添加这将为项目创建一个新层，并且问题将得到修复。:) 在此处阅读有关图层组合的更多信息：http: [//www.chromium.org/developers/design-documents/gpu-accelerated-compositing-in-chrome](http://www.chromium.org/developers/design-documents/gpu-accelerated-compositing-in-chrome)

# c# - 调试时程序崩溃

> ID：13666690
> 
> 赞同：2
> 
> 时间：2012-12-02T05:27:21.623
> 
> 标签：c#, soap, visual-studio-2012

我是 C# 新手，这是我的第一个程序。我正在尝试从 OVH.IE 集成 SOAPI（更多信息：[www.ovh.ie/products/soapi.xml](http://www.ovh.ie/products/soapi.xml)），但是每当我启动程序并单击登录按钮时，程序崩溃（VS2012 的内存使用量增加并且然后崩溃）。

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Threading.Tasks;
using System.Windows.Forms;
using System.Web.Services;

namespace Server_Manager
{
public partial class Form1 : Form
{
    public Form1()
    {
        InitializeComponent();

    }

    private void Form1_Load(object sender, EventArgs e)
    {

    }

    private void button2_Click(object sender, EventArgs e)
    {
        textBox1.Clear();
        textBox2.Clear(); 
    }

    void login(string uid, string pwd, string dc)
    {
        if (dc == "OVH")
        {
            managerService soapi = new managerService();
            string session = soapi.login(uid, pwd, "ie", false);
            if (String.IsNullOrWhiteSpace(session))
            {
                MessageBox.Show("Not Logged");
            }
            else
            {
                MessageBox.Show("Logged In");
            }
        }

    }

    private void button1_Click(object sender, EventArgs e)
    {
        if (String.IsNullOrWhiteSpace(textBox1.Text) || String.IsNullOrWhiteSpace(textBox1.Text))
        {
            MessageBox.Show("Please Fill all the Details");
        }
        else
        {
            string uid, pwd, dc;
            uid = textBox1.Text;
            pwd = textBox2.Text;
            dc = comboBox1.Text;
            login(uid,pwd,dc);
        }
        MessageBox.Show(comboBox1.Text);
    }
}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T06:15:40.913

这些说明用于在 WinDBG（Microsoft 的基于命令行的调试器）中进行诊断，但我被告知它们*可以*在 Visual Studio 中工作。

1.  启动应用程序
2.  启动 WinDBG 并附加到应用程序
3.  输入“.loadby sos clr”（假设 >=4.0 框架）
4.  输入“dumpheap -stat”
5.  查看结果，对于可疑对象，键入“dumpheap -mt {0}”，其中 {0} 替换为对象 MT 地址
6.  如果您不知道为什么对象是活动的，请输入“gcroot {0}”并从上方传递对象地址

# android - 无法获取有效的 api 密钥

> ID：13666692
> 
> 赞同：1
> 
> 时间：2012-12-02T05:28:13.143
> 
> 标签：android

当我尝试获取 API 密钥时出现此错误：

> 您输入的指纹无效
> 请按浏览器上的返回按钮并输入有效的证书指纹。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T06:03:51.517

如果您使用的是调试密钥，请在 Windows 上使用以下命令

```
 C:\Program Files\Java\jdk1.7.0\bin\keytool -list -alias androiddebugkey -keystore C:\Users\username\.android\debug.keystore -storepass android -keypass android 
```

确保您获得 MD5 指纹，而不是 SHA1。如果您使用的是 Java 7，keytool 会提供 SHA1 指纹。要获取 MD5，请在 keytool 命令中使用 -v 标志

# ruby-on-rails - 在多部分文件上传数组中添加 user_id

> ID：13666697
> 
> 赞同：0
> 
> 时间：2012-12-02T05:28:58.393
> 
> 标签：ruby-on-rails

使用 Rails 3.2 和 Paperclip 使用 HTML5 一次上传多个文件（照片）`multipart`。这是我的表格：

```
# shops/_form.html.erb
<%= form_for @shop, :url => { :action => action, :type => type }, :html => { :multipart => true } do |f| %>
  <%= f.text_field :name %>
  <%= f.file_field :shop_photos_data, :multiple => true, :name => "shop[photos_attributes][][data]" %>
<% end %> 
```

它工作并在更新/创建时产生以下结果：

```
{"utf8"=>"✓", 
"authenticity_token"=>"9jXvIwcllct7UyUfo6cvhEucQf2u3SY50SuaCLtFO4c=", 
"shop"=>{
  "name"=>"First shop", 
  "photos_attributes"=>{"0"=>{
    "image"=>[
      #<ActionDispatch::Http::UploadedFile:0x00000104b78978 
        @original_filename="first_test_image.jpg", 
        @content_type="image/jpeg", 
        @headers="Content-Disposition: form-data; name=\"gallery[photos_attributes][0][image][]\"; filename=\"first_test_image.jpg\"\r\nContent-Type: image/jpeg\r\n", 
        @tempfile=#<File:/var/folders/bQ/bQYZC2ukFZCvbKzEDGRtJE+++TI/-Tmp-/RackMultipart20110622-4459-vz78ee>>, 
      #<ActionDispatch::Http::UploadedFile:0x00000104b78950 
        @original_filename="second_test_image.jpg", 
        @content_type="image/jpeg", 
        @headers="Content-Disposition: form-data; name=\"gallery[photos_attributes][0][image][]\"; filename=\"second_test_image.jpg\"\r\nContent-Type: image/jpeg\r\n", 
        @tempfile=#<File:/var/folders/bQ/bQYZC2ukFZCvbKzEDGRtJE+++TI/-Tmp-/RackMultipart20110622-4459-1jzhhyg>>
      ]
    }
  }
}, "commit"=>"Save", "action"=>"create", "controller"=>"shops"} 
```

它有效，它进入`shops_controller.rb`，但不进入`photos_controller.rb`。

这是我的代码的其他部分：

```
# photo.rb
class Photo < ActiveRecord::Base
  belongs_to :attachable, :polymorphic => true, :counter_cache => true
  belongs_to :user, :counter_cache => true
  attr_accessible :data, :attachable_id, :attachable_type, :user_id
end

# shop.rb
class Shop < ActiveRecord::Base  
  attr_protected :photos_count
  has_many :photos, :as => :attachable, :dependent => :destroy
  accepts_nested_attributes_for :photos, :allow_destroy => true
end

# photos_controller.rb
class PhotosController < ApplicationController
end

# shops_controller.rb
class ShopsController < ApplicationController
  before_filter :require_user, :only => [:new, :edit, :update, :create]

  ...

  def update
    @shop = Shop.find(params[:id])
    if @shop.update_attributes(params[:shop])
      flash[:notice] = 'Successfully updated.'
      redirect_to shop_path(@shop)
    else
      render :action => :edit
    end
  end
end 
```

我的模型中有一个`user_id`字段`Photo`。目前，`user_id`没有保存在每个新`Photo`记录中。我可以在文件上传数组中包含什么`shops_controller.rb`？`user_id`我不想在表单中这样做，因为它暴露了安全性。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T15:08:26.417

把这个放进去`shops_controller.rb`

```
def update
  @shop = Shop.find(params[:id])

  photos = params[:shop][:photos_attributes]

  if !photos.blank?
    photos.each do |photo|
      photo.merge!(:user_id => current_user.id)
    end
  end

  if @shop.update_attributes(params[:shop])
    flash[:notice] = 'Successfully updated.'
    redirect_to shop_path(@shop)
  else
    render :action => :edit
  end
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-02T16:03:21.980

要将字段添加到表单中，请使用如下隐藏字段：

```
<%= hidden_field_tag "user", @user.id %> 
```

然后在控制器中你可以像这样访问它：

```
params[:user] 
```

# ios - iOS4 中的 Sharekit2.0 共享崩溃：NSAssert(vc.presentingViewController == nil, @"vc 现在不能在视图层次结构中

> ID：13666701
> 
> 赞同：0
> 
> 时间：2012-12-02T05:29:49.780
> 
> 标签：ios, sharekit

我的项目中包含最新的 Sharekit2.0。在 iOS5 和 iOS6 上没问题。但是在 iOS4 中，由于一个问题，我无法完成分享到 twitter：“ NSAssert(vc.presentingViewController == nil, @"vc 现在不能在视图层次结构中"); //ios4及以上”，包含在 SHK.m 中

我知道这是缺少用于输入共享文本/图片的 TWTweetComposeViewController 的原因。但是，我仍然不知道如何实现它并支持 ios4 ？

如果有人可以帮助我并更好地提供演示代码行，我将不胜感激:)。最好不要更改 Sharekit 子模块。

梁

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T11:04:08.193

我已修复 ShareKit，请更新。我没有 iOS4 设备来测试，所以请告诉我，如果它有效。不过，请回答我的意见。

# html - Three.js如何将Object3d的孩子指向相机？

> ID：13666702
> 
> 赞同：0
> 
> 时间：2012-12-02T05:29:52.227
> 
> 标签：html, canvas, three.js, 3d

事情就是这样。我有一个 Object3d，它由 6 个平面组成，形成一个立方体。现在，在基于鼠标输入应用四元数旋转之后并且在立方体停止之后 - 我需要立方体在其最近的一侧（平面子）直接转向相机。我现在正在做的是获取我的 Object3d 矩阵的当前欧拉角，对这个矩阵应用旋转并使用 setFromRotationMatrix() 函数将其设置回我的对象​​的四元数。有时这种方法有效（通常在低角度），有时 Z 轴的行为是错误的（或者可能是 Y，甚至所有这些都无法分辨）。

现在，我当然可以计算最近的一侧并将这一侧的直接四元数应用于我的对象，这可行，但这没有给我动画。

我正在使用此代码来获取我当前的角度：[http](http://www.cs.princeton.edu/~gewang/projects/darth/stuff/quat_faq.html#Q37) ://www.cs.princeton.edu/~gewang/projects/darth/stuff/quat_faq.html#Q37 。基于此，我计算每个轴最接近的 90 度旋转：

```
 function lookAtCamDeg(val){
            var d = 1;
            var s = 1;
            var newAngle;

            if(val < 0)d*=-1;

            val = Math.abs(val);

            if(val <= 45)s*=-1;
            if(val > 45)val=90-val;

            newAngle = val*d*s;

            return newAngle;
        } 
```

并应用它来转动我的立方体：

```
 var angles = getAngles();http://www.cs.princeton.edu/~gewang/projects/darth/stuff/quat_faq.html#Q37
            var newX = lookAtCamDeg(angles.x);
            var newY = lookAtCamDeg(angles.y);
            var newZ = lookAtCamDeg(angles.z);

            var ma = cube.matrix;
            ma = ma.rotateX(-newX*DEGREES)
            ma = ma.rotateY(-newY*DEGREES)
            ma = ma.rotateZ(-newZ*DEGREES)
            cube.quaternion.setFromRotationMatrix(ma); 
```

我现在想的是尝试使用我的立方体（子）的单独平面并根据它们的法线应用lookAt（）方法，但不知道该怎么做，因为我需要旋转整个对象，而不仅仅是一个孩子。有人可以引导我走向正确的方向吗？满足我的需求的最佳方式是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T20:36:00.193

THREE.Quaterion 对象包含插值方法。所以计算原始人脸法线的四元数，你从setFromRotationMatrix(ma)这里得到的四元数，然后反复应用THREE.Quaterion.slerp()得到in-betweens，可以应用到cube.quaternion

# c++ - 指向矩阵的指针在 C++ 中引发异常

> ID：13666704
> 
> 赞同：0
> 
> 时间：2012-12-02T05:30:30.903
> 
> 标签：c++, pointers, exception, matrix

> **可能重复：**
> [如何在 C 中使用动态多维数组？](https://stackoverflow.com/questions/917783/how-do-i-work-with-dynamic-multi-dimensional-arrays-in-c)
> [静态矩阵转换为指针](https://stackoverflow.com/questions/8827509/static-matrix-casting-to-a-pointer)

我的这段代码在行抛出异常

```
 resMat[i][j] = matp[i][j]; 
```

// 代码从这里开始

```
 #include <iostream>
    #define MOD 1000000007
    #define LL long long
    using namespace std;

    int mat[6][64][64],mat2[2][2], mat4[4][4], mat8[8][8], mat16[16][16], mat32[32][32], mat64[64][64];
    int **point[6];
    int resMat[64][64];

    void fooMatrix(int **matp, int size)
    {
        int i,j;
        // find canFollow of all matrixes   
        for(i=0;i<size;++i)
        {
            for(j=0;j<size;++j)
            {
      // throwing exception here
                resMat[i][j] = matp[i][j];
            }
        }
    }

    int main()
    {
        point[0] = (int **)mat2;
        point[1] = (int **)mat4;
        point[2] = (int **)mat8;
        point[3] = (int **)mat16;
        point[4] = (int **)mat32;
        point[5] = (int **)mat64;

        LL a,b,res;
        scanf("%lld %lld",&a,&b);
        fooMatrix(point[a-1],1<<a);
                    return 0;
    } 
```

我想在我的函数 fooMatrix 中处理不同大小的 int 矩阵，比如将它存储在 resMat 中。帮我解决这个问题。

我在 Windows 中使用 DevC++（g++ 编译器）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T06:02:18.497

从上面的评论和链接中我了解到：

矩阵表示[][]和指针表示**是不同的。编译器给了我警告。

**二维矩阵不是指针数组**。所以看看下面的代码

```
 #include <stdio.h>
#define MOD 1000000007
#define LL long long

int mat[6][64][64],mat2[2][2], mat4[4][4], mat8[8][8], mat16[16][16], mat32[32][32], mat64[64][64];

// see this is array of single pointer
int *point[6];

int resMat[64][64];

void fooMatrix(int *matp, int size)
{
    int i,j;
    // find canFollow of all matrixes   
    for(i=0;i<size;++i)
    {
        for(j=0;j<size;++j)
        {
               // this is how we would access the matrix.
            resMat[i][j] = matp[i*size+j];
        }
    }
}

int main()
{
    point[0] = &mat2[0][0];
    point[1] = &mat4[0][0];
    point[2] = &mat8[0][0];
    point[3] = &mat16[0][0];
    point[4] = &mat32[0][0];
    point[5] = &mat64[0][0];

    LL a,b,res;
    scanf("%lld %lld",&a,&b);
    fooMatrix(point[a-1],1<<a);
    return 0;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-02T06:12:08.827

您将不得不使用动态分配的指向数组的指针数组，而不是使用矩阵。

您可以将文件顶部的声明替换为以下内容：

```
int** newMat(int a, int b){
  int** result = new int*[a];
  for(int i=0; i<a; ++i)
    result[i] = new int[b];
  return result;
}

int** mat2 = newMat(2,2);
int** mat4 = newMat(4,4);
int** mat8 = newMat(8,8);
int** mat16 = newMat(16,16);
int** mat32 = newMat(32,32);
int** mat64 = newMat(64,64);
int*** point = new int**[6];
int** resMat= newMat(64,64); 
```

然后更改顶部的分配`main`：

```
 point[0] = mat2;
  point[1] = mat4;
  point[2] = mat8;
  point[3] = mat16;
  point[4] = mat32;
  point[5] = mat64; 
```

# java - 使 JFrame 的 JPanel 大小？

> ID：13666705
> 
> 赞同：2
> 
> 时间：2012-12-02T05:30:36.753
> 
> 标签：java, swing, jframe, jpanel, layout-manager

我盯着我的代码看了好几个小时，我几乎把所有的东西都剪成了最简单的部分，我不知道如何让 JPanel 扩展到框架的大小。理想情况下（最后）我想要一个带有南北内容面板的容器面板。放置南面板后，北面板需要占用剩余的空间。

不过，就目前而言，我有一个很小的红色斑点，只有它的内容物那么大。有人可以让我深入了解我做错了什么吗？

```
import java.awt.*;
import java.awt.event.*;
import javax.swing.*;
import javax.swing.border.*;

public class TestCode extends JFrame {

    private DescriptionPanel window = new DescriptionPanel();

    public static void main(String[] args){
     TestCode frame = new TestCode();
     frame.pack();
     frame.setTitle("Grape Project");
     frame.setLocationRelativeTo(null);
     frame.setSize(400, 300);
     frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
     frame.setVisible(true);
    }

    public TestCode(){
        add(window);
    }
} 
```

和 DescriptionPanel 类：

```
import java.awt.*;
import java.awt.event.*;
import javax.swing.*;

public class DescriptionPanel extends JPanel{

    private JPanel container = new JPanel();

    public DescriptionPanel(ImageIcon pic, JLabel text){

        container.setBackground(Color.red);
        add(container);
    }
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-02T05:37:22.300

这是一个典型的[`BorderLayout`](http://docs.oracle.com/javase/7/docs/api/java/awt/BorderLayout.html)场景。

默认情况下，`JPanel`s`FlowLayout` [已经设置](http://docs.oracle.com/javase/tutorial/uiswing/layout/using.html)了一个，所以你需要调用`setLayout`，或者你可以`DescriptionPanel`使用适当的布局管理器来初始化你：

```
super(new BorderLayout()); 
// setLayout(new BorderLayout());

add(top,    BorderLayout.CENTER);  // take all available upper space left
add(bottom, BorderLayout.SOUTH);   // take the vertical space specified 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-02T05:38:10.443

设置`LayoutManager`为`BorderLayout`：

```
setLayout(new BorderLayout()); 
```

# php - Wordpress 插件激活期间出错

> ID：13666707
> 
> 赞同：3
> 
> 时间：2012-12-02T05:30:56.073
> 
> 标签：php, wordpress

插件激活过程中出现以下错误

插件在激活期间生成了 1 个字符的意外输出。如果您发现“标头已发送”消息、联合提要问题或其他问题，请尝试停用或删除此插件。

这是该插件的代码 [http://pastebin.com/ZKrKQbPv](http://pastebin.com/ZKrKQbPv)

我也无法通过 wordpress 插件编辑器编辑插件内容。当我单击保存时，它显示“标头已发送”错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T06:09:06.097

如果保留空白，请确保**one.php**和 two.php**仅**包含以下代码：

```
<?php 
```

将其放在文件的最顶部并保存并上传到服务器。通过将它们包括在内，它们是空白的，它们中有一个正在输出的换行符 \n 。这将解决它。**不要**放置结束 ?> 标签。建议您不要以它们结尾文件，因为这也会增加意外换行的可能性。

# equals - var=1 和 var=1 的区别

> ID：13666713
> 
> 赞同：0
> 
> 时间：2012-12-02T05:31:50.587
> 
> 标签：equals, equals-operator

var=1 实际上与 var = 1 有何不同？这些差异在哪些语言中真正重要或不重要？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-02T05:35:18.813

在brainfuck中，两者都被忽略为评论。

在 sh 中，`var=1`设置`var`为`1`while`var = 1`尝试`var`使用参数`=`和运行程序`1`。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-02T05:36:12.413

好吧，`bash`一个：

```
var = 1 
```

尝试使用和参数运行`var`程序，同时：`=``1`

```
var=1 
```

设置`var`为`1`。甚至还有另一种变体：

```
var= 1 
```

它暂时设置`var`为空字符串并尝试运行`1`程序（运行`var`后恢复为原始值）。

而且，为了完整性：

```
var =1 
```

它尝试`var`使用单个参数运行程序`=1`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-02T05:36:50.683

读自：

[链接1 链接](http://en.wikipedia.org/wiki/Whitespace_character#Computer_languages) [2](http://en.wikipedia.org/wiki/Free-form_language)

在以计算机编程语言编写的源代码中出现的空格（超出第一个空格字符）通常被忽略；这种语言是自由形式的

在计算机编程中，自由格式语言是一种编程语言，其中字符在程序文本中页面上的位置无关紧要。程序文本不需要像旧的打孔卡系统那样放在特定的列中，而且行尾通常是无关紧要的。空白字符仅用于分隔标记，没有其他意义。

大多数自由格式语言都源自 ALGOL，包括 C、Pascal 和 Perl。Lisp 语言是自由格式的，尽管它们并非源自 ALGOL。REXX 大多是自由格式的，尽管在某些情况下空白字符是连接运算符。SQL 虽然不是一种完整的编程语言，但也是自由格式的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-02T05:37:15.863

据我所知，“=”在大多数编程语言中表示“分配”。（编译器只是忽略空白）

'==' 和 '===' 在某些地方可能会有所不同，例如 javascript。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-02T06:24:53.943

注意：在某些语言中`var` 本身就会有问题。例如，在 C# 中，它是一个保留关键字。所以也许`x = 1`会是一个更好的例子。此外，“=”在某些语言中是赋值运算符，在其他语言中是相等检查运算符。我没有担心这些问题，而是专注于不同的词汇处理流派。

我的一分钱值：

*   在大多数 Algol 传统的编程语言（包括 C 及其后代）中，这样的空格不会产生影响。此类语言允许在没有句法（或语义效果）效果的情况下消除空格，只要这样做不允许形成多符号预定义运算符之一：so``3+4`与 相同`3 + 4`且`x++-5`与 相同`x ++ - 5`但不同`x + + - 5`。

*   在诸如 SML 之类的语言中，任何未被空格中断的（非字母数字）符号序列都是有效标识符：在此类语言中，`3+4`与 ( x++ - 4') 相同。 `3 + 4``x++-4``x ++- 4') is not the same as`

*   在某些语言中，甚至类似的东西`3+4`也会被视为单个标记，即在语法上与 . 不同的东西`3 + 4`。

*   FORTRAN 的早期版本有一个有趣的方法，它受到了批评，并作为粉碎航天器错误故事的基础。（更多内容见下文）。

*   最后，一些语言，如 Miranda、Haskell 和 CoffeeScript，遵循 ISWIM 的传统并使缩进在语法上很重要。

* * *

以处理空白而臭名昭著的语言的一个例子是 Fortran（尽管大多数批评适用于该语言的早期版本；在这方面，后来的版本更像 Algol）。

一个有趣的故事是导致火箭（我听到的版本中的航天飞机）发生故障的错误，因为 FORTRAN 忽略了空格等 `DO 10 I = 1.100`（应该是`DO 10 I = 1,100` - DO 是 FORTRAN 相当于其他语言中的内容）一个`for`循环）被解析为`100`对变量的赋值`DO 10 I`。

> FORTRAN代码行 `DO 10 I = 1.100`
> 
> 显然确实发生了。编译器显然做了它应该做的事情，忽略空格并隐式声明然后分配 DO10I。值得注意的是，该程序在使用前实际上已经过测试。检测到错误，从而挽救了火箭，但破坏了未来的事实。火箭的消亡已被广泛报道，并已成为程序员民间传说的一部分。

报价来源：

[http://www-users.cs.york.ac.uk/susan/cyc/p/fbug.htm](http://www-users.cs.york.ac.uk/susan/cyc/p/fbug.htm)

* * *

不同编程语言中的空白主题可能非常有趣：

[http://c2.com/cgi/wiki?SyntacticallySignificantWhitespaceConsideredHarmful](http://c2.com/cgi/wiki?SyntacticallySignificantWhitespaceConsideredHarmful)

引自这个非常有趣和有趣（以一种令人讨厌的方式）的来源：

> 人们一定想知道为什么总是使用空格作为分隔符。通过使用空格作为分隔符，它可以防止用户仅在其名称中包含空格，从而导致 CamelCase 和 EmbeddedUnderscore 圣战。考虑到，在 C 中，空格仅用于类型/范围信息。如果该语言选择了一种更像帕斯卡的方法来使用冒号，那么整个 HolyWar 就可以避免了。尽管
> 
> global, const, string: 空指针异常消息 = "发生空指针异常"
> 
> 在我们看来可能看起来很陌生，它会避免一些令人讨厌的风格问题。特别是因为空格分隔似乎已经在整个 Unix 中传播，这使得与 win32 的兼容性（对文件名、SQL 表等中的空格没有疑虑）成为一件麻烦事。
> 
> 在许多编程语言（C、C++、Lisp、Java、Forth 等，以及 HTML 等）中，空格的存在与否在语法上很重要（否则“foo bar”的含义相同像“foobar”）（标记分隔符）。（LISP 使用空格来分隔列表中的项目……而其他语言通常使用逗号。）但是，各种风格的空格（制表符、空格键、回车、换行符、CR/LF）和不同数量的空格都被视为相同“一些空白”。一个空格、三个空格、两个换行符、一个制表符——它们之间没有显着差异。

# firefox - icoMoon 字体未在 Firefox 上显示

> ID：13666722
> 
> 赞同：7
> 
> 时间：2012-12-02T05:34:17.877
> 
> 标签：firefox, sass, font-face

在 Firefox 上使用图标替换字体的跨浏览器没有一些问题，目前只显示内容文本而不显示 icomoon 文本替换。代码 Sass + Magento + .htaccess 显示的源代码，任何想法或帮助将不胜感激。

**网站：** [http ://www.phoebessecret.co.nz](http://www.phoebessecret.co.nz)

**已经完成 .htaccess 重写：**

```
AddType image/svg+xml svg svgz
AddEncoding gzip svgz
AddType application/vnd.ms-fontobject eot
AddType font/truetype ttf
AddType font/opentype otf
AddType application/x-font-woff woff

<FilesMatch ".(ttf|otf|eot|woff)$">
<IfModule mod_headers.c>
Header set Access-Control-Allow-Origin "*"
Header set Access-Control-Allow-Origin "http://www.phoebessecret.co.nz"
Header set Access-Control-Allow-Origin "http://skin.phoebessecret.co.nz"
Header set Access-Control-Allow-Origin "http://js.phoebessecret.co.nz"
Header set Access-Control-Allow-Origin "http://media.phoebessecret.co.nz"
</IfModule>
</FilesMatch> 
```

**CSS：**

```
@font-face {
font-family: 'topshops';
src:url('../fonts/topshops.eot');
src:url('../fonts/topshops.eot?#iefix') format('embedded-opentype'),
    url('../fonts/topshops.svg#topshops') format('svg'),
    url('../fonts/topshops.woff') format('woff'),
    url('../fonts/topshops.ttf') format('truetype');
font-weight: normal;
font-style: normal;}

.icon-fonts {
    font-family: 'topshops';
    font-style: normal;
    speak: none;
    -webkit-font-smoothing: antialiased;
    font-smoothing: antialiased;
    text-rendering: optimizeLegibility;
    font-weight: 400;
}

.iconsearch {
    content: "\61";
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-08-29T09:02:05.520

尝试将此添加到您的 .htaccess 文件中。它应该可以解决您的问题。它修复了我的。

```
<FilesMatch ".(ttf|otf|eot|woff)$">
  <IfModule mod_headers.c>
    Header set Access-Control-Allow-Origin "*"
  </IfModule>
</FilesMatch> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T00:43:37.850

我也遇到了 icomoon 和 Firefox 的问题。您是否尝试过[Paul Irish 的“防弹”`@font-face`语法](http://paulirish.com/2009/bulletproof-font-face-implementation-syntax/)？它与 icomoon 的输出有点不同，而且我的运气更好——从那以后就没有 FF 问题了。

```
@font-face {
    font-family: 'Graublau Web';
    src: url('GraublauWeb.eot?') format('eot'), url('GraublauWeb.woff') format('woff'), url('GraublauWeb.ttf') format('truetype');
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-06T10:30:55.893

我遇到了同样的问题（安装了 Wordpress），icomoon 图标没有在 Firefox 中显示。Chrome、Safari、IE 运行良好。

站点启动并运行后，客户要求我在 url 中包含 www，而不仅仅是 http://。所以我更改了博客地址，但没有更改 Wordpress 地址（在 Wordpress 仪表板中）。突然间所有的Icomoon图标都不见了。将 www 添加到 Wordpress 地址后，图标又回来了。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-07-29T08:35:56.327

您可以尝试两件事。我两个都用过，对我有用。使用 CSS 文件中的完整链接来引用 icomoon。您的 .htaccess 可能正在重写 URL。其次，正如`webkub`指出的那样，在 .htaccess 文件中添加以下内容。

```
 <FilesMatch ".(ttf|otf|eot|woff)$">
  <IfModule mod_headers.c>
    Header set Access-Control-Allow-Origin "*"
  </IfModule>
</FilesMatch> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-12-03T15:48:02.293

如果您正在运行 IIS，则需要修改 web.config 并可能添加 httpProtocol 部分，如下所示：

```
<?xml version="1.0" encoding="utf-8"?>
  <configuration>
    <system.webServer>
      <httpProtocol>
        <customHeaders>
          <add name="Access-Control-Allow-Origin" value="*" />
       </customHeaders>
     </httpProtocol>
   </system.webServer>
  </configuration> 
```

# html - 在 HTML 联系表单中看不到发送按钮

> ID：13666727
> 
> 赞同：0
> 
> 时间：2012-12-02T05:35:23.287
> 
> 标签：html, css

我正在尝试制作一个简单的 HTML 联系表单，但是当我将 HTML 页面上传到 Internet 时，发送和清除按钮没有显示 - 它们是不可见的。有趣的是，如果我将鼠标悬停在它们应该在的位置上，我可以看到那里有一个按钮。为什么会这样？

```
<form action="contact.php" method="post"> 
  <div>
    <label for="contactname">Name</label>
    <input type="text" name="contactname" class="textfield" id="contactname" value=""  />
    <span class="require"> *</span>
    <label for="contactsubject">Subject</label>
    <input type="text" name="contactsubject" class="textfield" id="contactsubject" value=""/>
    <span class="require"> *</span>
    <label for="contactemail">Your E-mail</label> 
    <input type="text" name="contactemail" class="textfield" id="contactemail" value="" />
    <span class="require"> *</span>
    <label for="contactmessage">Your Message</label> 
    <textarea name="contactmessage" id="contactmessage" class="textarea" cols="8" rows="12"></textarea>
    <span class="require"> *</span>
    <input type="submit" value="Send">
    <input type="reset" value="Clear"> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T05:38:20.993

`/`在发送和清除中添加结束斜线

```
<input type="submit" value="Send"/> 
```

和

```
<input type="reset" value="Clear"/> 
```

或者你也可以这样做：

```
<input type="submit" value="Send"></input>
<input type="reset" value="Clear"></input> 
```

`<input>`是开始标签
`</input>`是结束标签

更新1：回答如何使用图像提交按钮

> 将输入类型更改为“图像”

```
<input type="image" value="submit" src="submit1.jpg" alt="submit Button" onMouseOver="this.src='submit1.jpg'"> 
```

# css - Google App Engine：如何在模板中使用内部 CSS？

> ID：13666728
> 
> 赞同：1
> 
> 时间：2012-12-02T05:35:24.160
> 
> 标签：css, google-app-engine, templates

GAE 提供了一个模板系统，我们可以创建一个“base.html”，其中可以链接一个外部 CSS 文件（例如，“base.css”）。但是，如何在扩展的 html 中定义一些内部 CSS？我不想在“base.css”中定义 CSS，因为有太多扩展的 html 文件，它们可能会相互冲突。现在，我必须在标签内进行：-(

再具体一点：

扩展的.html：

```
{% extends "base.html" %}
  <style>   <!-- how to do this? -->
    h1 {
      font-family: Arial;
      color: olive;
    }
    h2 {
      color: red;
    }
  </style>
  <h1> ... </h1>
    ...
  <h2> ... </h2>
    ...
  <h1> ... </h1> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-02T05:48:44.123

在 base.html 中定义一个块。块是可以从扩展模板中填充的占位符

**方法1：**

base.html

```
<style>
{% block css %}{% endblock %}
</style> 
```

扩展的.html

```
{% block css %}
  h2 {
  color: red;
}
{% block %} 
```

**方法2：**

base.html

```
<head>
<link href="base.css" rel="stylesheet">
{% block css %}{% endblock %}
</head> 
```

扩展的.html

```
{% block css %}
 <link href="extended.css" rel="stylesheet">
{% block %} 
```

# javascript - JavaScript - 画布绘图 - 脚本不起作用

> ID：13666735
> 
> 赞同：0
> 
> 时间：2012-12-02T05:36:45.597
> 
> 标签：javascript

我编写了一个使用 HTML5 画布的非常简单的 JavaScript。当用户在画布上单击鼠标时，脚本会获取他们的鼠标坐标，然后当他们按住鼠标移动鼠标时，它会绘制一条线，重复此过程直到他们松开鼠标。但它不起作用，我不知道为什么？在此先感谢您的帮助。

```
<body>
<canvas id="myCanvas" width="500" height="500" style="border:1px solid #000000;">
</canvas>

<script>
// Canvas link
var canvas = document.getElementById('myCanvas');
var context = canvas.getContext('2d');

// Variables
var x1;
var y2;
var isPressed = false;

// Event listeners
context.addEventListener('mousedown', functionMouseDown, false);
context.addEventListener('mousemove', functionMouseMove, false);
context.addEventListener('mouseup', functionMouseUp, false);

function functionMouseDown() {
    // Get coordinates
    x1 = mousePos.x;
    y1 = mousePos.y;

    isPressed = true;
}

function functionMouseMove() {
     // If mouse is down and moved start drawing line
     if (isPressed == true) {
        drawLine();
     }
}

function functionMouseUp() {
    // Stop drawing line
    isPressed = false;
}

function drawLine() {
// Draw line
context.moveTo(x1,y1);
context.lineTo(x,y);
context.stroke();

// Set start coordinates to current coordinates
x1 = x;
y1 = y;
}
</script>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-02T06:01:41.147

这里有几个问题。你需要获取鼠标位置，而不是简单地存储在 mousePos.x/y 中。您通过鼠标移动事件，作为第一个参数传递给函数，该函数被添加为 mousemove、mousedown、mouseup 的侦听器。这是我修复它的方法

```
 function functionMouseDown(e) {
      // Get coordinates
      x1 = e.clientX
      y1 = e.clientY;

      isPressed = true;
  }

  function functionMouseMove(e) {
       // If mouse is down and moved start drawing line
       if (isPressed == true) {
          drawLine(e);
       }
  }

  function functionMouseUp() {
      // Stop drawing line
      isPressed = false;
  }

  function drawLine(e) {
  // Draw line
  var x = e.clientX;
  var y = e.clientY;
  context.moveTo(x1,y1);
  context.lineTo(x,y);
  context.stroke();

  // Set start coordinates to current coordinates
  x1 = x;
  y1 = y;
  } 
```

# php - 有没有办法在 PHP 中查询 JSON？

> ID：13666740
> 
> 赞同：5
> 
> 时间：2012-12-02T05:37:33.647
> 
> 标签：php, json, class, filesystems

我使用过 Google、Yahoo 和 Bing，但找不到任何好的答案。我见过 jLinq，但我希望能够在 PHP 中查询 JSON，希望不是 SQL 数据库，而是我服务器上文件系统中的所有数据存储。不，我不在乎它听起来有多糟糕。

想法还是？我认为这会有一个 PHP 类。

- - -编辑 - - -

伙计们，到目前为止，感谢您的回答，但我认为 json_encode 和 json_decode 没有多大用处。我想要做的是对 JSON 进行编码/解码，并能够在其中搜索具有特定值的特定键。尽管我已经向自己证明了我可以做到这一点，但对于本应如此简单的事情来说，它有很多代码。你还有什么想法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2018-05-30T10:17:27.083

您可以使用 JsonQ 包。这个包可以像 Query Builder 一样查询 JSON 数据。

[https://github.com/nahid/jsonq](https://github.com/nahid/jsonq)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-02T05:43:24.477

您可以调用`json_encode`将数据转换为字符串，并将此字符串写入文件。然后当您想使用它时，您读取整个文件并调用`json_decode`将其转换回数据。完成处理后，重复编码/写入步骤。

但是，如果您有多个进程在执行此操作，它们将完全覆盖彼此正在执行的操作。所以这不是管理共享数据的好方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-02T05:44:50.733

您可以尝试[使用 JSONPath](http://goessner.net/articles/JsonPath/)，它允许您像使用 xml 一样使用 xpath 查询 json。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-12-02T05:42:04.283

查看[json_decode](http://php.net/manual/en/function.json-decode.php)。这使您可以将 JSON 作为字符串并将其解析为 PHP 中的对象。您理论上可以将字符串存储为文件，并使用[file_get_contents](http://us1.php.net/file_get_contents)从文件中检索字符串。

您必须编写自己的搜索/索引/更新/等算法，但是如果您不想使用真正的数据库解决方案（因为您说，*不，我不在乎它听起来有多糟糕。*），那么我猜猜这会奏效。

要搜索您从中获取的对象中的值`json_decode`，请查看[in_array](http://php.net/manual/en/function.in-array.php)和[array_search](http://php.net/manual/en/function.array-search.php)

# python - Python 安装中的 Tcl/tk 版本

> ID：13666747
> 
> 赞同：3
> 
> 时间：2012-12-02T05:39:31.543
> 
> 标签：python, tkinter, ide, tcl

我需要那些熟悉 Python-Tcl/tk bundle 的人的帮助。

我无法为 Python 3.2.3 或 3.3.0 安装启动 IDLE IDE。命令

```
python -m idlelib.idle 
```

给出下一个输出：

```
 C:\Python33>python -m idlelib.idle
   Traceback (most recent call last):
   File "C:\Python33\lib\runpy.py", line 160, in _run_module_as_main
    "__main__", fname, loader, pkg_name)
  File "C:\Python33\lib\runpy.py", line 73, in _run_code
    exec(code, run_globals)
  File "C:\Python33\lib\idlelib\idle.py", line 11, in <module>
    idlelib.PyShell.main()
  File "C:\Python33\lib\idlelib\PyShell.py", line 1421, in main
    root = Tk(className="Idle")
  File "C:\Python33\lib\tkinter\__init__.py", line 1756, in __init__
    self.tk = _tkinter.create(screenName, baseName, className, interactive, want
objects, useTk, sync, use)
_tkinter.TclError: Can't find a usable init.tcl in the following directories:
    {C:\Program Files\CSR\BlueSuite 2.4} C:/Python33/lib/tcl8.5 C:/lib/tcl8.5 C:
/lib/tcl8.5 C:/library C:/library C:/tcl8.5.11/library C:/tcl8.5.11/library 
```

`Init.tcl`位于*C:\Python33\tcl\tcl8.5*和*C:\Python33\tcl\tix8.4.3 中*，但有一些东西阻止了 tkinter 启动。

在以前尝试从命令行启动 idlelib.idle 模块时，我收到了消息

```
 "Tcl": have 8.5.11, need exactly 8.4 
```

所以这是我无法通过的阶段。什么系统可能会迫使我使用 Tcl 8.4 并阻止使用随 Python 3.3.0 安装的 8.5.11？

先感谢您。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-02T06:34:32.200

解决了。

我不得不删除环境变量 TCL_LIBRARY，它指向一些不存在的安装。

# javascript - 是否有任何非轮询方式来检测 DOM 元素的大小或位置何时发生变化？

> ID：13666758
> 
> 赞同：28
> 
> 时间：2012-12-02T05:42:20.997
> 
> 标签：javascript, dom

很长一段时间以来，我一直在寻找一种方法来检测 DOM 元素的大小或位置何时发生变化。这可能是因为窗口调整了大小，或者因为新的子元素被添加到元素中，或者因为在这个元素周围添加了新元素，或者因为 CSS 规则发生了变化，或者因为用户改变了浏览器的字体大小。元素的大小或位置会发生变化的原因有很多。

我可以为其中许多事件挂钩事件处理程序，但我认为有些情况没有被涵盖。我曾希望使用 MutationObservers 来观察元素的 offsetWidth 或 clientWidth，但看起来那些只适用于 DOM 属性，而不适用于 Node 属性（或者这可能正是 Webkit 实现的）。所以，要真正做到万无一失，看来我无论如何都需要运行一个轮询循环。

它是否正确？我错过了什么重要的事情吗？轮询是检测元素大小或位置何时发生变化的唯一防弹方法吗？

**编辑**

为了提供更多上下文，这与任何一个特定用例无关。对我来说，它一次又一次地出现。在我目前的情况下，我希望通过 CSS 将画布设置为其父级的 100% 宽度和高度。我想要一个脚本在其 offsetWidth 或 clientWidth 更改时调整画布的宽度和高度属性（这是针对 WebGL，其中宽度和高度属性会影响帧缓冲区分辨率）。在另一个项目中，我想让一个元素在高度上扩展以填充用户浏览器窗口中的任何剩余空间。我一次又一次地遇到这种情况，不可避免地，解决方案似乎是：

1.  听 window.resize
2.  挂钩您编写的任何可能更改 DOM 的代码（或者可能使用 Mutation Events 或 Mutation Observers）
3.  进行定期轮询操作以清理任何遗漏的案例

（大多数人停在1，也许做一点2）

我只是想确保我没有遗漏一些重要的东西。

顺便说一句，在我的 WebGL 情况下，听 window.resize 就足够了（并且在某种程度上更可取，因为这样画布尺寸和渲染分辨率会同时发生变化）。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-02T16:55:06.850

你可以用 CSS 动画来做到这一点。查看[http://developer.streak.com/2012/11/how-to-detect-dom-changes-in-css.html](http://developer.streak.com/2012/11/how-to-detect-dom-changes-in-css.html)和类似内容。我想它不会满足您的所有要求，现在我又通读了一些。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-06-14T21:00:20.887

一位同事向我指出了一种[使用](http://www.backalleycoder.com/2013/03/18/cross-browser-event-based-element-resize-detection/)下[溢](https://developer.mozilla.org/en-US/docs/Web/Reference/Events/underflow)和[溢出](https://developer.mozilla.org/en-US/docs/Web/Reference/Events/overflow)事件的技术。我没有尝试过，我不知道有什么样的浏览器支持（看起来像 Chrome 和 FireFox，它应该通过合成浏览器会寻找的相同事件在 IE 中工作，但我不知道哪些版本支持技术）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-05-20T13:17:27.253

自 2019 年起，您可以访问：

*   [ResizeObserver](https://developer.mozilla.org/en-US/docs/Web/API/ResizeObserver)在大小更改时触发回调。在这里要小心，它[还不支持所有地方。](https://caniuse.com/#search=ResizeObserver)
*   可以用于位置的[MutationObserver ，但我想这有点矫枉过正。](https://developer.mozilla.org/en-US/docs/Web/API/MutationObserver)[虽然很好支持](https://caniuse.com/#search=MutationObserver)。
*   [IntersectionObserver](https://developer.mozilla.org/en-US/docs/Web/API/IntersectionObserver)作为奖励，允许您检查与祖先的交集。对优化东西非常有用，尤其是在 WebGL 中。这得到[了很好的支持](https://developer.mozilla.org/en-US/docs/Web/API/IntersectionObserver)。

# java - 如何更改 JComboBox 的选中项的颜色？

> ID：13666759
> 
> 赞同：0
> 
> 时间：2012-12-02T05:42:20.680
> 
> 标签：java, swing, user-interface, jcombobox, itemlistener

请看下面的代码

```
import java.awt.event.*;
import javax.swing.*;
import java.awt.*;

public class JCombo extends JFrame
{
    JComboBox com1,com2;

    public JCombo()
    {

        com1 = new JComboBox();
        com2 = new JComboBox();

        com1.addItem("One");
        com1.addItem("two");
        com1.addItem("Three");

        com2.addItem("Clothe");
        com2.addItem("Food");
        com2.addItem("Drinks");
        com2.addItemListener(new Com2Action());

        this.setLayout(new FlowLayout());
        this.add(com1);
        this.add(com2);

        this.pack();
        this.validate();
        this.setVisible(true);
        this.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    }

    private class Com2Action implements ItemListener
    {
        public void itemStateChanged(ItemEvent ae)
        {
            if(ae.getStateChange() == ItemEvent.SELECTED)
            {
                com1.getSelectedItem();
            }
        }
    }

    public static void main(String[]args)
    {
        try
        {
            UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
            new JCombo();
        }
        catch(Exception e)
        {
            e.printStackTrace();
        }

    }
} 
```

现在在这里，我需要做的就是这个。

1.  从 com2 中选择一个项目
2.  突出显示 com1 中的项目，此时您从 com2 中选择项目。该突出显示应该永久存在（这意味着，当用户再次单击 com1 时，突出显示不应该消失）

例如：您从 com2 中选择“食物”。此时，com1 中显示“One”。所以，突出它

我怎样才能做到这一点？请帮忙！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-02T06:08:58.203

有两种方法

*   更改键值`UIManager`

*   覆盖`isSelected`_`DefaultListCellRenderer`

例如

```
import java.awt.BorderLayout;
import java.awt.Color;
import java.awt.Component;
import javax.swing.*;

public class ComboRendererTest {

    public ComboRendererTest() {
        JComboBox comboBox = new JComboBox();
        comboBox.setPrototypeDisplayValue("XXXXXXXXXXXXXXXX");
        comboBox.addItem(new Double(1));
        comboBox.addItem(new Double(2.25));
        comboBox.addItem(new Double(3.5));
        comboBox.setRenderer(new TwoDecimalRenderer(comboBox.getRenderer()));
        comboBox.setEditable(true);

        JComboBox comboBox1 = new JComboBox();
        comboBox1.setPrototypeDisplayValue("XXXXXXXXXXXXXXXX");
        comboBox1.addItem(new Double(1));
        comboBox1.addItem(new Double(2.25));
        comboBox1.addItem(new Double(3.5));
        comboBox1.setRenderer(new TwoDecimalRenderer(comboBox.getRenderer()));
        comboBox1.setEditable(true);

        JFrame frame = new JFrame();
        frame.add(comboBox, BorderLayout.NORTH);
        frame.add(comboBox1, BorderLayout.SOUTH);

        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        frame.pack();
        frame.setLocationRelativeTo(null);
        frame.setVisible(true);
    }

    public static void main(String[] args) throws Exception {
        UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
        SwingUtilities.invokeLater(new Runnable() {

            @Override
            public void run() {
                ComboRendererTest comboRendererTest = new ComboRendererTest();
            }
        });
    }
}

class TwoDecimalRenderer extends DefaultListCellRenderer {

    private ListCellRenderer defaultRenderer;

    public TwoDecimalRenderer(ListCellRenderer defaultRenderer) {
        this.defaultRenderer = defaultRenderer;
    }

    @Override
    public Component getListCellRendererComponent(JList list, Object value,
            int index, boolean isSelected, boolean cellHasFocus) {
        Component c = defaultRenderer.getListCellRendererComponent(
                list, value, index, isSelected, cellHasFocus);
        if (c instanceof JLabel) {
            if (isSelected) {
                c.setBackground(Color.blue);
            } else {
                c.setBackground(Color.red);
            }
        } else {
            c.setBackground(Color.red);
            c = super.getListCellRendererComponent(
                    list, value, index, isSelected, cellHasFocus);
        }
        return c;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-02T06:01:39.947

使用 JComboBox.setRenderer(ListCellRenderer aRenderer) 设置自定义渲染器

# ruby-on-rails-3 - rails_admin 收集操作执行了两次

> ID：13666765
> 
> 赞同：1
> 
> 时间：2012-12-02T05:43:22.387
> 
> 标签：ruby-on-rails-3, rails-admin

单击按钮时，我正在使用 rails_admin 向所有用户发送电子邮件。该动作被调用两次而不是一次。

**lib/rails_admin_email_everyone.rb：**

```
require 'rails_admin/config/actions'
require 'rails_admin/config/actions/base'

module RailsAdmin
  module Config
    module Actions
      class EmailEveryone < RailsAdmin::Config::Actions::Base
        register_instance_option :visible? do
          authorized?
        end

        register_instance_option :link_icon do
          'icon-envelope'
        end

        register_instance_option :collection? do
          true
        end

        register_instance_option :member? do
          false
        end

        register_instance_option :controller do
          Proc.new do
            @topics_with_owners = Topic.where('user_id IS NOT NULL')

            @topics_with_owners.each do |topic|              
              @reminder = Reminder.new(:topic_id=> topic.id, 
                :to_user_id => student.id, :from_user_id => current_user.id)
              if @reminder.save
                TopicMailer.reminder(@reminder.topic).deliver
                @reminder.update_attribute(:sent, true)
              else
                logger.error "Error sending email reminder: "
                  + @reminder.errors.full_messages.map {|msg| msg}.join(',')
              end
            end

            flash[:success] = "Reminders successfully sent."

            redirect_to back_or_index
          end
        end
      end
    end
  end
end 
```

**配置/初始化程序/rails_admin.rb：**

```
require Rails.root.join('lib', 'rails_admin_email_everyone.rb')
RailsAdmin.config do |config|
  config.authenticate_with do
    redirect_to(main_app.root_path, flash: 
     {warning: "You must be signed-in as an administrator to access that page"}) 
     unless signed_in? && current_user.admin?
  end

  module RailsAdmin
    module Config
      module Actions
        class EmailEveryone < RailsAdmin::Config::Actions::Base
          RailsAdmin::Config::Actions.register(self)
        end
      end
    end
  end

  config.actions do
    # root actions
    dashboard                     # mandator y
    # collection actions
    index                         # mandatory
    new
    export
    history_index
    bulk_delete
    # member actions
    show
    edit
    delete
    history_show
    show_in_app

    email_everyone do
      visible do
        bindings[:abstract_model].model.to_s == "Reminder"
      end
    end
  end
end 
```

当我检查我的日志时，我看到它执行了两次，但参数略有不同。一个包括 pjax。我发现[这个](https://stackoverflow.com/questions/8153263/jquery-pjax-request-sending-twice)stackoverflow 问题与 pjax 超时类似的问题有关：

```
Started GET "/admin/reminder/email_everyone?_pjax=%5Bdata-pjax-container%5D" for 127.0.0.1 at 2012-12-01 20:28:12 -0900
Processing by RailsAdmin::MainController#email_everyone as HTML
  Parameters: {"_pjax"=>"[data-pjax-container]", "model_name"=>"reminder"}
  User Load (0.5ms)  SELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1
  Topic Load (1.3ms)  SELECT "topics".* FROM "topics" WHERE (user_id IS NOT NULL)
  CACHE (0.0ms)  SELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1
   (0.2ms)  BEGIN
  CACHE (0.0ms)  SELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1
  CACHE (0.0ms)  SELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1
  Topic Load (0.5ms)  SELECT "topics".* FROM "topics" WHERE "topics"."id" = 4398 LIMIT 1
  SQL (6.5ms)  INSERT INTO "reminders" ("created_at", "from_user_id", "sent", "topic_id", "to_user_id", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"  [["created_at", Sun, 02 Dec 2012 05:28:12 UTC +00:00], ["from_user_id", 1], ["sent", false], ["topic_id", 4398], ["to_user_id", 1], ["updated_at", Sun, 02 Dec 2012 05:28:12 UTC +00:00]]
   (1.1ms)  COMMIT
  User Load (0.6ms)  SELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1
  Rendered topic_mailer/reminder.text.erb (375.8ms)

Started GET "/admin/reminder/email_everyone" for 127.0.0.1 at 2012-12-01 20:28:14 -0900
Processing by RailsAdmin::MainController#email_everyone as HTML
  Parameters: {"model_name"=>"reminder"}
  User Load (0.8ms)  SELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1
  Topic Load (1.1ms)  SELECT "topics".* FROM "topics" WHERE (user_id IS NOT NULL)
  CACHE (0.0ms)  SELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1
   (0.2ms)  BEGIN
  CACHE (0.0ms)  SELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1
  CACHE (0.0ms)  SELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1
  Topic Load (0.5ms)  SELECT "topics".* FROM "topics" WHERE "topics"."id" = 4398 LIMIT 1
  SQL (7.1ms)  INSERT INTO "reminders" ("created_at", "from_user_id", "sent", "topic_id", "to_user_id", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"  [["created_at", Sun, 02 Dec 2012 05:28:14 UTC +00:00], ["from_user_id", 1], ["sent", false], ["topic_id", 4398], ["to_user_id", 1], ["updated_at", Sun, 02 Dec 2012 05:28:14 UTC +00:00]]
   (1.0ms)  COMMIT
  User Load (0.7ms)  SELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1
  Rendered topic_mailer/reminder.text.erb (368.9ms) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-11-17T13:21:52.187

我发现了同样的问题，

我刚刚将以下代码添加到 lib/rails_admin_custom_action.rb

即添加了pjax？选项为假

```
module RailsAdmin
  module Config
    module Actions
      class EmailEveryone < RailsAdmin::Config::Actions::Base

         register_instance_option :pjax? do
           false
         end 

       end
     end
   end
 end 
```

这可能会帮助你..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-02T07:13:04.857

有一个标记为**可合并**的拉取请求，它为 rails_admin 创建了一个 pjax 选项。不幸的是，它需要测试并且 3 个月没有任何行动：
[https ://github.com/sferik/rails_admin/pull/1295](https://github.com/sferik/rails_admin/pull/1295)

# android - Android Eclipse - 从 URL 下载图像到手机存储

> ID：13666770
> 
> 赞同：0
> 
> 时间：2012-12-02T05:44:39.087
> 
> 标签：android, eclipse, image, download, android-asynctask

因此，我一直在寻找有关如何将 URL 图像（.png）下载到手机本身的解释-

一旦他们选择了照片，我就会在菜单选择上关闭一个方法-它会通过 URL 路径以及我希望调用它的文件名发送（暂时为 test.png）

我也在尝试做这个 AsynC 以保持 UI 自由-

下面的代码实际上运行良好，但它似乎没有保存任何图像——（我的手机上没有 SD 卡，但我也尝试保存到数据文件夹进行测试，结果相同）

```
protected void saveImage(String imageUrl, String fileName){  
    class SendPostReqAsyncTask extends AsyncTask<String, Void, String>{
        private String imageUrl;
        private String fileName;
        public SendPostReqAsyncTask (String imageUrl, String fileName)
        {   
            super();
            this.imageUrl=imageUrl;
            this.fileName=fileName;
        }
        @Override
        protected String doInBackground(String... params) {
            String newfilename="";
            try {
                File externalStorageDirectory = Environment.getExternalStorageDirectory();
                URL urlTmp = new URL(imageUrl);
                newfilename = urlTmp.getFile();
                newfilename = externalStorageDirectory + "/" + fileName;
                Bitmap bitmap = BitmapFactory.decodeStream(urlTmp.openStream());
                FileOutputStream fileOutputStream = new FileOutputStream(newfilename);
                if (bitmap != null) {
                    bitmap.compress(CompressFormat.PNG, 50, fileOutputStream);
                    return newfilename;
                }
            } catch (MalformedURLException e) {
                Log.w("errorSaving", "Could not save image with url: " + imageUrl, e);
            } catch (IOException e) {
                Log.w("errorSaving", "Could not save image with url: " + imageUrl, e);
            }
            Log.d("errorSaving", "Failed to save image " + fileName);

            return newfilename;
        }

        //handle result when done
        protected void onPostExecute(String result) {
            super.onPostExecute(result);
            Toast.makeText(getApplicationContext(), "Photo saved to phone: " + result, Toast.LENGTH_LONG).show();
        }
    }
    SendPostReqAsyncTask sendPostReqAsyncTask = new SendPostReqAsyncTask(imageUrl,fileName);
    sendPostReqAsyncTask.execute();     
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T07:05:16.853

```
//To download image from a url
Drawable image;
try {
    InputStream is          = (InputStream) this.fetch(your_image_url);
    image                   = Drawable.createFromStream(is,"src");
} catch (MalformedURLException e) {
    e.printStackTrace();
} catch (IOException e) {
    e.printStackTrace();
}

//Convert drawable to Bitmap
Bitmap bitmap = ((BitmapDrawable)image).getBitmap();

//Save Bitmap to a file
try {image
       FileOutputStream out = new FileOutputStream(filename);
       bitmap.compress(Bitmap.CompressFormat.PNG, 90, out);
} catch (Exception e) {
       e.printStackTrace();
} 
```

还要确保在清单文件中设置互联网权限，

```
<uses-permission android:name="android.permission.INTERNET" /> 
```

# mysql - 如何在两个索引之间选择行

> ID：13666771
> 
> 赞同：1
> 
> 时间：2012-12-02T05:44:40.517
> 
> 标签：mysql

我们可以在 Sql server 中使用以下代码从索引 i 到 j 选择行。如何在 mysql 中执行此操作？

```
select * from 
  (SELECT  ROW_NUMBER() OVER (ORDER BY FieldName asc) as row,
  * from TableName) 
WHERE row between STARTINDEX AND ENDINDEX 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T06:06:09.247

我不确定我理解的问题是否完全正确，因为我对 SQL 不是很熟悉：您想按 FieldName 对结果进行排序，并根据您创建的行号选择部分结果。我会在 MySQL 中这样写：

```
SELECT *
FROM TableName
ORDER BY FieldName ASC
LIMIT STARTINDEX-1, ENDINDEX-STARTINDEX 
```

在 MySQL 中，LIMIT 索引从零开始（在您的 SQL 代码中从 1 开始），LIMIT 子句中的其他数字是您愿意获得的记录数

编辑：我的结果是缺少行号。如果您想要结果中的行号，它将如下所示：

```
SET @num = STARTINDEX-1;
SELECT @NUM := (@NUM + 1) AS row, TableName.*
FROM TableName
ORDER BY FieldName ASC
LIMIT STARTINDEX-1, ENDINDEX-STARTINDEX 
```

STARTINDEX 与第一行的编号相同，因为 SELECT 即使在第一次也会将一个添加到 @NUM

# c# - 我对 .NET 串行端口类有奇怪的行为

> ID：13666773
> 
> 赞同：2
> 
> 时间：2012-12-02T05:44:56.827
> 
> 标签：c#, .net, serial-port

我在 VB 6.0 中有几个应用程序，我想迁移到 C#.NET，所以我一直在寻找串行通信示例。到现在为止还挺好。

互联网上有几个示例，但没有一个在我的 PC 上运行（Win7 64 位、VS2012、.NET 4.5），所以我决定在另一台 PC 上尝试它们。一切都从这里开始，看起来就像 X 档案……

我正在尝试的示例应用程序是[这个](https://msmvps.com/blogs/coad/archive/2005/03/23/SerialPort-_2800_RS_2D00_232-Serial-COM-Port_2900_-in-C_2300_-.NET.aspx)

首先，我在一台现在可以使用 Win8 64 位的笔记本上进行了尝试。然后我在一台装有 Win7 64bit 3.5 .NET 的台式电脑上尝试了只接收传输。我安装了 .NET 4.0，但它根本停止工作。

我在同一型号的另一台台式电脑 Win7 32bit 3.5 NET 上进行了尝试。接收和发送都正常。安装了 .NET 4.0 并且没有接收没有传输。卸载 .NET 4.0 仍然无法正常工作。在 .NET 4.0 再次运行之前从恢复点恢复。经过几次测试后，无论恢复点与否，都停止工作。

我尝试在另一台 Win8 64 位的台式电脑上运行正常，然后安装的 .NET 4.5 完全停止工作。在 XP 上也试过 3.5 .NET 工作正常，.NET 4.0 正常。在所有计算机上，无论 .net 示例是否正常工作，我的旧 VB6.0 程序都可以正常工作。

有人可以告诉我发生了什么吗？另外，当程序如此不稳定时，如何创建程序并将其提供给客户？

我在网上找了超过 3 天三夜，仍然没有找到像我这样的问题的人。我是在做错什么，还是只是我错过了整个 .NET 的一些东西？如果有必要，我会发布更多关于我的尝试的信息！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T12:23:34.720

好的，我找到了问题......当然是我 :) 奇怪的行为是不检查示例应用程序的 DTR 检查的结果。当检查 DTR 时，它也在我的开发人员机器和其他机器上工作。然而，这并不能回答为什么它在某些机器上工作，而不是在没有检查 DTR 的情况下在其他机器上工作。还有为什么它可以在没有 DTR 的 Windows XP 上正常工作，但重要的是我已经找到了它应该如何正常工作。感谢 Alan 和 Ted 抽出时间向我发布答案。

# python - 如何使 Django 分页搜索引擎友好？

> ID：13666774
> 
> 赞同：0
> 
> 时间：2012-12-02T05:44:56.417
> 
> 标签：python, django, django-pagination

我想知道如何使 Django 分页搜索引擎友好，例如： object/224 而不是 object?page=224

此外，任何人都知道为什么默认情况下它对搜索引擎不友好！？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-02T05:51:27.450

调整您的网址：

```
(r'object/(?P<page>\d+)/$','listing') 
```

然后调整您的视图（这里我使用的[是文档中的示例](https://docs.djangoproject.com/en/dev/topics/pagination/?from=olddocs)）：

```
def listing(request,page):
    contact_list = Contacts.objects.all()
    paginator = Paginator(contact_list, 25) # Show 25 contacts per page

    # page = request.GET.get('page') not needed
    try:
        contacts = paginator.page(page)
    except PageNotAnInteger:
        # If page is not an integer, deliver first page.
        contacts = paginator.page(1)
    except EmptyPage:
        # If page is out of range (e.g. 9999), deliver last page of results.
        contacts = paginator.page(paginator.num_pages)

    return render_to_response('list.html', {"contacts": contacts}) 
```

# vim - 在 vim 中编辑乳胶：如何将文本更改为数学模式

> ID：13666779
> 
> 赞同：9
> 
> 时间：2012-12-02T05:48:09.400
> 
> 标签：vim, latex, math-mode

我正在使用 vim-latexsuite 来编辑乳胶文件。该文本最初来自 google doc，并且有许多数学符号不是以数学模式编写的。

我必须`$`在每个符号之前和之后添加。但这很痛苦。（搜索/替换不起作用，因为某些方程模式很复杂。）

有没有办法让我`Ctrl-V`在视觉模式下直观地选择符号或问题，然后在按下键后，`$`可以在视觉选择之前和之后自动添加？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-02T05:59:30.860

我不认为有任何标准命令，但你可以使用[环绕](http://www.catonmat.net/blog/vim-plugins-surround-vim/).vim 插件来做到这一点：

[http://www.catonmat.net/blog/vim-plugins-surround-vim/](http://www.catonmat.net/blog/vim-plugins-surround-vim/)

该命令是`csW$`用 $ 包围当前文本

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-10-06T18:53:40.120

实际上，vim-latexsuite*中*内置了一个标准命令。在这里查看宏的 vim-latex 文档[。](http://vim-latex.sourceforge.net/download/latex-suite.html#latex-macros)

```
In addition the visual mode macros are provided:

    `(  encloses selection in \left( and \right)
    `[  encloses selection in \left[ and \right]
    `{  encloses selection in \left\{ and \right\}
    `$  encloses selection in $$ or \[ \] depending on characterwise or
                                          linewise selection 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-02T20:13:49.567

您可以录制一个宏来执行此操作。

通过视觉选择，执行以下操作：

`q``q`– 在寄存器 q 中记录宏

`c`- 改变视觉选择的内容

`$``$``Esc`– 插入 $$

`P`– 在 $s 之间粘贴原始文本（注意它是大写的 P）

`q`- 停止录制宏

从那时起，您可以进行视觉选择并运行`@``q`.

# r - 按组计算变量列表的总和

> ID：13666780
> 
> 赞同：23
> 
> 时间：2012-12-02T05:48:12.813
> 
> 标签：r, data.table

我有一个带有一个键和大约 100 个数字行的 data.table，其中一个设置为键。我想创建一个新变量，其中包含每个数字行的总和，按键分组。

例如，我现在的数据是

```
ID Count1 Count2 Count3
1   1      3      0
1   3      3      3
2   1      2      1
3   1      1      2 
```

我想要的是：

```
ID Count1 Count2 Count3
1   4      6      3
2   1      2      1
3   1      1      2 
```

我已经尝试了很多方法来获得这个。我知道我可以做到：

```
Y <- X[, list(Count=sum(Count1), Count2=sum(Count2), Count3=sum(Count3), by = ID] 
```

然而，我有数百个变量，我只在一个列表中得到它们的名字。我应该如何处理这个？

非常感谢你的帮助。

这是生成测试数据的代码：

```
ID <-c(rep(210, 9), rep(3917,6))
Count1 <- c(1,1,0,1,3,1,4,1,1,1,1,1,1,0,1)
Count2 <- c(1,0,0,1,0,1,0,1,1,1,1,1,1,0,1)
Count3 <- c(1,0,0,1,0,1,0,1,1,1,1,1,1,0,1)
x <- data.table(ID, Count1, Count2, Count3)
setkey(x, ID) 
```

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-12-02T06:07:46.443

您的测试数据与您提供的示例不匹配，但无论如何 - 您可以利用具有以“数据子集”`data.table()`命名的运算符的事实`.SD`。所以这应该有效：

```
x[, lapply(.SD, sum), by = ID]
#----
     ID Count Count2 Count3
1:  210    13      5      5
2: 3917     5      5      5 
```

这实际上包含在常见问题解答中：键入`vignette("datatable-faq", package="data.table")`或[在线](https://rawgit.com/wiki/Rdatatable/data.table/vignettes/datatable-faq.html)查找。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-12-02T06:58:23.460

由于 data.table 是一个 data.frame，您可以为此使用聚合：

```
> aggregate(. ~ ID, data=x, FUN=sum)
    ID Count1 Count2 Count3
1  210     13      5      5
2 3917      5      5      5 
```

# c# - 为什么远程主机断开连接时 Socket.Receive 会抛出 SocketException (10054)？

> ID：13666782
> 
> 赞同：1
> 
> 时间：2012-12-02T05:48:42.317
> 
> 标签：c#, .net

我曾经用 C 编写套接字程序，但不明白为什么会发生上述情况。

我的服务器在 Receive 调用中阻塞，当它返回 0 时，我跳出 while 循环并关闭线程。

```
 public class MyServer {

    public MyServer() {
    }

    public void Init() {
        ThreadPool.QueueUserWorkItem(StartListening);
        while (true) {
            Console.Read();
        }
    }

    public void StartListening(Object state) {
        // Establish the local endpoint for the socket.
        IPAddress ipAddress = IPAddress.Parse("127.0.0.1");
        IPEndPoint localEndPoint = new IPEndPoint(ipAddress, 11000);
        Socket listener = new Socket(AddressFamily.InterNetwork, SocketType.Stream, ProtocolType.Tcp);

        try {
            // Bind the socket to the local endpoint and listen for incoming connections.
            listener.Bind(localEndPoint);
            listener.Listen(100);

            while (true) {
                Console.WriteLine("Waiting for a connection...");
                // get connection
                Socket client = listener.Accept();
                // push client to another thread
                ThreadPool.QueueUserWorkItem(HandleClient, client);
            }

        } catch (Exception e) {
            Console.WriteLine(e.ToString());
        }
    }

    private void HandleClient(Object obj) {
        // Get the socket that handles the client request.
        Socket client = (Socket)obj;

        // Create the state object.
        StateObject state = new StateObject();
        state.workSocket = client;

        try {
            while (true) {
                int bytesRead = client.Receive(state.buffer);
                Console.WriteLine("bytesRead=" + bytesRead);

                // remote dc.
                if (bytesRead == 0)
                    break;

                String content = Encoding.ASCII.GetString(state.buffer, 0, bytesRead);
                Console.WriteLine("Read {0} bytes from socket. \n Data : {1}", content.Length, content);
                client.Send(state.buffer, 0, state.buffer.Length, 0);
            }
        } catch (SocketException e) {
            Console.WriteLine("SocketException : {0}", e.ToString());
        }
        client.Shutdown(SocketShutdown.Both);
        client.Close();
    }

    private void Send(Socket handler, String data) {
        byte[] byteData = Encoding.ASCII.GetBytes(data);

        // Begin sending the data to the remote device.
        //handler.BeginSend(byteData, 0, byteData.Length, 0, new AsyncCallback(SendCallback), handler);

    }
} 
```

但是，当我单击客户端的关闭按钮（“x”）时，服务器的 Receive 调用会引发 SocketException。根据[MSDN 的备注部分](http://msdn.microsoft.com/en-us/library/8s4y8aff.aspx)，这不应该发生，因为我已经满足了面向连接的部分（见上文）和客户端关闭部分（见下文）的条件。

```
Client.cs (pseudo):

public class MyClient {
public void Init() {
    byte[] bytes = new byte[1024];
    Socket sender = null;
    try {
        IPAddress ipAddress = IPAddress.Parse("127.0.0.1");
        IPEndPoint remoteEP = new IPEndPoint(ipAddress, 11000);
        sender = new Socket(AddressFamily.InterNetwork,
           SocketType.Stream, ProtocolType.Tcp);
        sender.Connect(remoteEP);

        Console.WriteLine("Socket connected to {0}",
            sender.RemoteEndPoint.ToString());

        while (true) {
            // Encode the data string into a byte array.
            String input = Console.ReadLine();
            byte[] msg = Encoding.ASCII.GetBytes(input);

            // Send the data through the socket.
            int bytesSent = sender.Send(msg);

            // Receive the response from the remote device.
            int bytesRec = sender.Receive(bytes);
            Console.WriteLine("Echoed test = {0}",
                Encoding.ASCII.GetString(bytes, 0, bytesRec));
        }

    } catch (ArgumentNullException ane) {
        Console.WriteLine("ArgumentNullException : {0}", ane.ToString());
    } catch (SocketException se) {
        Console.WriteLine("SocketException : {0}", se.ToString());
    } catch (Exception e) {
        Console.WriteLine("Unexpected exception : {0}", e.ToString());
    } finally {
        sender.Shutdown(SocketShutdown.Both);
        sender.Close();
    }
} 
```

}

我对 finally 块的浅薄理解是它总是会执行。但这里似乎并非如此。

所以，我在这里做错了什么？我是否应该捕获异常，关闭服务器端的客户端套接字并继续前进，忽略它？但我宁愿根本不抛出异常。

# coldfusion - FW/1 站点上的流量跟踪位置

> ID：13666787
> 
> 赞同：0
> 
> 时间：2012-12-02T05:50:49.770
> 
> 标签：coldfusion, application.cfc, fw1

我正在使用 FW/1 并通过以下函数调用跟踪流量

```
this.wsTraffic.add(action =
        {
        SubSystem   = getSubSystem(),
        Section     = getSection(),
        Item        = rc.slug != "" ? rc.slug : getItem()
        },  
        isPost      = (cgi.request_method == "POST" ? 1 : 0),

        http_user_agent         = cgi.http_user_agent,
        Remote_addr             = cgi.remote_addr,
        http_referer            = cgi.http_referer,
        http_accept_language    = cgi.http_accept_language,
        url_vars                = Duplicate(url)
        ); 
```

目前它`setupRequest()`在 application.cfc 中运行。我有两个子系统：home 和 admin。home 将始终对其流量进行跟踪。管理员永远不会跟踪其流量。

我正在考虑将函数调用移至 home/layouts/default.cfm，因为只跟踪 home 子系统。我不想将流量跟踪器移到那里，因为这与布局无关。

应该在 FW/1 站点的哪里进行流量记录？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-02T17:49:47.330

它将在 setupRequest 中完成（您当前正在执行此操作）。

为避免 Admin 子系统发生这种情况，请`getSubSystem() NEQ 'admin'`在运行之前将其包装在条件检查中。

或者，如果您希望添加多个具有不同状态的子系统，您可以通过在 中创建一个`TrackedSubsystems`（或`UntrackedSubsystems`）项目来实现它`Variables.Framework`，其中包含子系统名称列表，然后检查：

```
ListFind( Variables.Framework.TrackedSubSystems , getSubSystem() ) 
```

# java - Java 使用 gson 解析复杂的 json 响应

> ID：13666788
> 
> 赞同：2
> 
> 时间：2012-12-02T05:51:02.150
> 
> 标签：java, json, gson

我需要使用 gson 从这个复杂的 json 响应中提取值：

```
{
  "result": {
    "status": 1,
    "num_backpack_slots": 500,
    "items": [
      {
        "id": 455391,
        "original_id": 455391,
        "defindex": 125,
        "level": 1,
        "quality": 6,
        "inventory": 2147483742,
        "quantity": 1,
        "origin": 0,
        "flag_cannot_trade": true
      },
      {
        "id": 513820071,
        "original_id": 513820071,
        "defindex": 471,
        "level": 50,
        "quality": 6,
        "inventory": 2147483741,
        "quantity": 1,
        "origin": 13,
        "flag_cannot_trade": true
      },
      {
        "id": 576746588,
        "original_id": 570246654,
        "defindex": 39,
        "level": 10,
        "quality": 11,
        "inventory": 2147483720,
        "quantity": 1,
        "origin": 8,
        "equipped": [
          {
            "class": 7,
            "slot": 1
          }
        ]
        ,
        "attributes": [
          {
            "defindex": 189,
            "value": 1093664768,
            "float_value": 11.000000
          },
          {
            "defindex": 214,
            "value": 1000,
            "float_value": 0.000000
          }
        ]

      },
      {
        "id": 576775968,
        "original_id": 418597987,
        "defindex": 40,
        "level": 10,
        "quality": 11,
        "inventory": 2147483719,
        "quantity": 1,
        "origin": 3,
        "equipped": [
          {
            "class": 7,
            "slot": 0
          }
        ]
        ,
        "attributes": [
          {
            "defindex": 189,
            "value": 1093664768,
            "float_value": 11.000000
          },
          {
            "defindex": 214,
            "value": 4394,
            "float_value": 0.000000
          }
        ]

      },
      {
        "id": 607610629,
        "original_id": 470196433,
        "defindex": 141,
        "level": 5,
        "quality": 11,
        "inventory": 2147483710,
        "quantity": 1,
        "origin": 8,
        "equipped": [
          {
            "class": 9,
            "slot": 0
          }
        ]
        ,
        "attributes": [
          {
            "defindex": 189,
            "value": 1093664768,
            "float_value": 11.000000
          },
          {
            "defindex": 214,
            "value": 352,
            "float_value": 0.000000
          }
        ]

      },
      {
        "id": 658784889,
        "original_id": 367005538,
        "defindex": 61,
        "level": 5,
        "quality": 11,
        "inventory": 2147483712,
        "quantity": 1,
        "origin": 3,
        "equipped": [
          {
            "class": 8,
            "slot": 1
          }
        ]
        ,
        "attributes": [
          {
            "defindex": 189,
            "value": 1093664768,
            "float_value": 11.000000
          },
          {
            "defindex": 214,
            "value": 214,
            "float_value": 0.000000
          }
        ]

      },
      {
        "id": 697046877,
        "original_id": 697046877,
        "defindex": 242,
        "level": 1,
        "quality": 6,
        "inventory": 2147483739,
        "quantity": 1,
        "origin": 9,
        "flag_cannot_trade": true,
        "attributes": [
          {
            "defindex": 185,
            "value": 1328492055,
            "float_value": 2939033344.000000
          }
        ]

      },
      {
        "id": 697206938,
        "original_id": 697206938,
        "defindex": 581,
        "level": 31,
        "quality": 6,
        "inventory": 2147483740,
        "quantity": 1,
        "origin": 1,
        "flag_cannot_trade": true
      },
      {
        "id": 708417260,
        "original_id": 688333621,
        "defindex": 37,
        "level": 10,
        "quality": 11,
        "inventory": 2147483711,
        "quantity": 1,
        "origin": 8,
        "equipped": [
          {
            "class": 5,
            "slot": 2
          }
        ]
        ,
        "attributes": [
          {
            "defindex": 189,
            "value": 1093664768,
            "float_value": 11.000000
          },
          {
            "defindex": 214,
            "value": 131,
            "float_value": 0.000000
          }
        ]

      },
      {
        "id": 708425760,
        "original_id": 597434022,
        "defindex": 58,
        "level": 5,
        "quality": 11,
        "inventory": 2147483731,
        "quantity": 1,
        "origin": 8,
        "equipped": [
          {
            "class": 2,
            "slot": 1
          }
        ]
        ,
        "attributes": [
          {
            "defindex": 189,
            "value": 1093664768,
            "float_value": 11.000000
          },
          {
            "defindex": 214,
            "value": 540,
            "float_value": 0.000000
          }
        ]

      },
      {
        "id": 735058153,
        "original_id": 702208573,
        "defindex": 701,
        "level": 84,
        "quality": 6,
        "inventory": 2147483746,
        "quantity": 1,
        "origin": 4,
        "attributes": [
          {
            "defindex": 228,
            "value": 44044472,
            "float_value": 0.000000,
            "account_info": {
              "steamid": 76561198004310200,
              "personaname": "Bukz | TF2calc.tk"
            }
          }
        ]

      },
      {
        "id": 783535692,
        "original_id": 746181220,
        "defindex": 239,
        "level": 10,
        "quality": 11,
        "inventory": 2147483732,
        "quantity": 1,
        "origin": 8,
        "equipped": [
          {
            "class": 6,
            "slot": 2
          }
        ]
        ,
        "attributes": [
          {
            "defindex": 189,
            "value": 1093664768,
            "float_value": 11.000000
          },
          {
            "defindex": 214,
            "value": 2,
            "float_value": 0.000000
          }
        ]

      },
      {
        "id": 790390696,
        "original_id": 705188110,
        "defindex": 56,
        "level": 10,
        "quality": 6,
        "inventory": 2147483840,
        "quantity": 1,
        "origin": 0
      },
      {
        "id": 823322632,
        "original_id": 663311596,
        "defindex": 167,
        "level": 5,
        "quality": 6,
        "inventory": 2147483748,
        "quantity": 1,
        "origin": 0,
        "equipped": [
          {
            "class": 3,
            "slot": 9
          },
          {
            "class": 4,
            "slot": 9
          },
          {
            "class": 1,
            "slot": 9
          },
          {
            "class": 2,
            "slot": 9
          },
          {
            "class": 7,
            "slot": 9
          },
          {
            "class": 5,
            "slot": 9
          },
          {
            "class": 6,
            "slot": 9
          },
          {
            "class": 8,
            "slot": 9
          },
          {
            "class": 9,
            "slot": 9
          }
        ]

      },
      {
        "id": 831931223,
        "original_id": 794619497,
        "defindex": 140,
        "level": 5,
        "quality": 6,
        "inventory": 2147483831,
        "quantity": 1,
        "origin": 0,
        "equipped": [
          {
            "class": 9,
            "slot": 1
          }
        ]

      },
      {
        "id": 838987757,
        "original_id": 151360199,
        "defindex": 264,
        "level": 5,
        "quality": 6,
        "inventory": 2147483800,
        "quantity": 1,
        "origin": 3,
        "equipped": [
          {
            "class": 7,
            "slot": 2
          },
          {
            "class": 3,
            "slot": 2
          },
          {
            "class": 2,
            "slot": 2
          },
          {
            "class": 1,
            "slot": 2
          }
        ]

      },
      {
        "id": 839449369,
        "original_id": 763635464,
        "defindex": 477,
        "level": 5,
        "quality": 6,
        "inventory": 2147483747,
        "quantity": 1,
        "origin": 0
      },
      {
        "id": 839531073,
        "original_id": 482419131,
        "defindex": 211,
        "level": 1,
        "quality": 11,
        "inventory": 2147483709,
        "quantity": 1,
        "origin": 3,
        "equipped": [
          {
            "class": 5,
            "slot": 1
          }
        ]
        ,
        "attributes": [
          {
            "defindex": 189,
            "value": 1093664768,
            "float_value": 11.000000
          },
          {
            "defindex": 214,
            "value": 116,
            "float_value": 0.000000
          },
          {
            "defindex": 294,
            "value": 325,
            "float_value": 0.000000
          }
        ]

      },
      {
        "id": 843856946,
        "original_id": 93370304,
        "defindex": 143,
        "level": 42,
        "quality": 6,
        "inventory": 2147483700,
        "quantity": 1,
        "origin": 3
      },
      {
        "id": 973205893,
        "original_id": 864931488,
        "defindex": 522,
        "level": 10,
        "quality": 6,
        "inventory": 2147483726,
        "quantity": 1,
        "origin": 0,
        "equipped": [
          {
            "class": 3,
            "slot": 10
          },
          {
            "class": 2,
            "slot": 10
          },
          {
            "class": 1,
            "slot": 10
          },
          {
            "class": 6,
            "slot": 10
          },
          {
            "class": 5,
            "slot": 10
          },
          {
            "class": 7,
            "slot": 10
          }
        ]

      },
      {
        "id": 975592060,
        "original_id": 975592060,
        "defindex": 744,
        "level": 69,
        "quality": 6,
        "inventory": 2147483743,
        "quantity": 1,
        "origin": 1,
        "flag_cannot_trade": true
      },
      {
        "id": 986693653,
        "original_id": 643535744,
        "defindex": 474,
        "level": 25,
        "quality": 6,
        "inventory": 2147483799,
        "quantity": 1,
        "origin": 0,
        "attributes": [
          {
            "defindex": 152,
            "value": 4142075573,
            "float_value": -2302636095545453300000000000000000.000000
          },
          {
            "defindex": 227,
            "value": 146855095,
            "float_value": 0.000000
          }
        ]

      },
      {
        "id": 986693656,
        "original_id": 699128493,
        "defindex": 197,
        "level": 1,
        "quality": 11,
        "inventory": 2147483722,
        "quantity": 1,
        "origin": 8,
        "custom_name": "MAXIMUM NOOB HEAT",
        "equipped": [
          {
            "class": 9,
            "slot": 2
          }
        ]
        ,
        "attributes": [
          {
            "defindex": 189,
            "value": 1093664768,
            "float_value": 11.000000
          },
          {
            "defindex": 214,
            "value": 218,
            "float_value": 0.000000
          },
          {
            "defindex": 294,
            "value": 18,
            "float_value": 0.000000
          }
        ]

      },
      {
        "id": 988633074,
        "original_id": 253598540,
        "defindex": 118,
        "level": 21,
        "quality": 3,
        "inventory": 2147483738,
        "quantity": 1,
        "origin": 3
      },
      {
        "id": 1025190520,
        "original_id": 346911280,
        "defindex": 483,
        "level": 15,
        "quality": 6,
        "inventory": 2147483717,
        "quantity": 1,
        "origin": 3,
        "equipped": [
          {
            "class": 8,
            "slot": 10
          }
        ]
        ,
        "attributes": [
          {
            "defindex": 142,
            "value": 1266641332,
            "float_value": 16738740.000000
          },
          {
            "defindex": 261,
            "value": 1266641332,
            "float_value": 16738740.000000
          }
        ]

      },
      {
        "id": 1025190651,
        "original_id": 677752195,
        "defindex": 142,
        "level": 15,
        "quality": 6,
        "inventory": 2147483830,
        "quantity": 1,
        "origin": 0
      },
      {
        "id": 1025191043,
        "original_id": 244038290,
        "defindex": 237,
        "level": 1,
        "quality": 6,
        "inventory": 2147483801,
        "quantity": 1,
        "origin": 3
      },
      {
        "id": 1025191147,
        "original_id": 522190433,
        "defindex": 265,
        "level": 1,
        "quality": 6,
        "inventory": 2147483802,
        "quantity": 1,
        "origin": 4
      },
      {
        "id": 1228670494,
        "original_id": 1228670494,
        "defindex": 311,
        "level": 1,
        "quality": 6,
        "inventory": 2147483835,
        "quantity": 1,
        "origin": 0
      },
      {
        "id": 1228702072,
        "original_id": 1228702072,
        "defindex": 5022,
        "level": 10,
        "quality": 6,
        "inventory": 2147483690,
        "quantity": 1,
        "origin": 0,
        "attributes": [
          {
            "defindex": 187,
            "value": 1111228416,
            "float_value": 47.000000
          }
        ]

      },
      {
        "id": 1228702073,
        "original_id": 1228702073,
        "defindex": 5627,
        "level": 10,
        "quality": 6,
        "inventory": 2147483689,
        "quantity": 1,
        "origin": 0,
        "attributes": [
          {
            "defindex": 187,
            "value": 1112276992,
            "float_value": 51.000000
          }
        ]

      },
      {
        "id": 1228758422,
        "original_id": 1228758422,
        "defindex": 648,
        "level": 15,
        "quality": 6,
        "inventory": 2147483825,
        "quantity": 1,
        "origin": 0
      },
      {
        "id": 1228758423,
        "original_id": 1228758423,
        "defindex": 5611,
        "level": 1,
        "quality": 6,
        "inventory": 2147483688,
        "quantity": 1,
        "origin": 0
      },
      {
        "id": 1228897312,
        "original_id": 1228897312,
        "defindex": 173,
        "level": 5,
        "quality": 6,
        "inventory": 2147483815,
        "quantity": 1,
        "origin": 0
      },
      {
        "id": 1228897313,
        "original_id": 1228897313,
        "defindex": 5615,
        "level": 1,
        "quality": 6,
        "inventory": 2147483687,
        "quantity": 1,
        "origin": 0
      }
    ]

  }
} 
```

我已经在 stackoverflow 和 google 上进行了一些搜索，但我找不到任何易于理解的示例来展示如何在 java 中遍历复杂的 json 对象，例如 this。正如您所看到的，响应中可能出现的嵌套数量有点让人不知所措。我知道我必须创建一个类（甚至类？）来保存数据，并使用 fromJson() 来填充它，但我不确定它应该如何设置，以及如何处理大“项目”数组。任何提示/提示/示例将不胜感激，谢谢。:)

PS我是stackoverflow的新手，对Java也很陌生，请放轻松。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T05:55:13.047

首先创建`class`代表您的 JSON 字符串。

之后，使用 GSON 库将您的字符串转换为`class`对象。这是示例：

你的主要课程让我们打电话`MyRoot`。在`MyRoot`您有 1 个已命名的文件中`result`，因此我们构建了`Result`类。

```
public class MyRoot{ // <- you can give your class name,
   private Result result = 0; // Its importent to provide the same field name
} 
```

`items`应该是一个对象（让我们`ArrayList`称之为`Item`）

![在此处输入图像描述](../Images/8f84e1ce190d6fcecae9198f2f80eb43.png)

```
public class Result{
   private int status = 0;
   private int num_backpack_slots = 0;
   private List<Item> items = null; 
}

public class Item{
   private int id = 0;
   private in toriginal_id = 0;
   private int defindex = 0;
   private int level = 0;
   private int quality = 0;
   private int inventory = 0;
   private int quantity = 0;
   private int origin = 0;
   private boolean flag_cannot_trade = true;
   private List<Equipped> equipped = null;
   private List<Attributes> attributes = null;
   private boolean flag_cannot_trade = false;
}

public class Equipped{
   //private int class = 0; // here json has 'class' field , you cant use this name, use SerializedName
    @SerializedName("class") private  int myclass = 0;
   private int slot = 0
}

public class Attributes{
   private int defindex = 0; 
   private int value = 0;
   private doublefloat_value= 0;
} 
```

完成后运行：

```
Gson mGson = new Gson(); 
MyRoot response = mGson.fromJson(jsonString, MyRoot.class); 
```

现在你有了包含所有内容的 MyRoot 类。顺便说一句，为每个字段添加 get/set。

您可以使用此[来源获取信息](https://sites.google.com/site/gson/gson-user-guide)

# linux - 在 Linux 上接收 UDP 广播数据包

> ID：13666789
> 
> 赞同：11
> 
> 时间：2012-12-02T05:51:11.180
> 
> 标签：linux, udp, broadcast

我们现有的软件会定期将 UDP 数据包广播到本地子网 (xxx255) 上的特定端口 (7125)。我们在 HP-UX (11.11) 上运行的监控软件能够毫无问题地接收这些数据包。但是，将监控软件移植到Linux（RHEL 6.1）后，我们发现它并没有收到广播包。tcpdump 显示到达 Linux 主机的数据包，但内核不会将它们发送到我们的软件。

我一直在使用几个 python 2.x 脚本来模拟监控软件用来测试不同场景的套接字 API 调用。如果发送方使用单播 (10.1.0.5) 而不是广播 (10.1.0.255)，Linux 内核会将数据包传递给接收方软件。我已经在网上搜索了几天，没有发现任何人有同样的问题。有任何想法吗？

接收器.py

```
from __future__ import print_function
import socket

localHost = ''
localPort = 7125
remoteHost = '10.1.0.5'
remotePort = 19100

s = socket.socket(socket.AF_INET, socket.SOCK_DGRAM)
s.setsockopt(socket.SOL_SOCKET, socket.SO_BROADCAST, 1)
s.bind((localHost, localPort))
s.connect((remoteHost, remotePort))
print('Listening on {0}:{1} for traffic from {2}:{3}'.format(localHost, localPort, remoteHost, remotePort))
data = s.recv(1024)
print('Received: {0}'.format(data))
s.close() 
```

发件人.py

```
from __future__ import print_function
import socket
import time

localHost = ''
localPort = 19100
remoteHost = '10.1.0.255'
remotePort = 7125

s = socket.socket(socket.AF_INET, socket.SOCK_DGRAM)
s.setsockopt(socket.SOL_SOCKET, socket.SO_BROADCAST, 1)
s.bind((localHost, localPort))
s.connect((remoteHost, remotePort))
data = 'sending this from {0}:{1} to {2}:{3}'.format(localHost, localPort, remoteHost, remotePort)
print(data)
print('2')
time.sleep(1)
print('1')
time.sleep(1)
s.send(data)
print('sent at {0}'.format(time.ctime()))
s.close() 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-12-03T01:26:03.600

好吧，我在评论中提出了这个答案，并在实践中证明是正确的。我想用我自己的代码进一步调查周围的细微差别，但这是规范的案例更接近。

除了`SO_BROADCAST`在两边设置套接字选项（正如您已经正确地做的那样），您还必须将您的接收器绑定到广播地址（例如，`INADDR_BROADCAST`它是 255.255.255.255 并且基本上起到与单播相同的作用`INADDR_ANY`）。

显然，在原始海报的 HP-UX 配置中，绑定到单播地址（或者`INADDR_ANY`，具体而言）但`SO_BROADCAST`设置了套接字选项的 UDP 套接字仍将接收寻址到本地广播地址的所有 UDP 数据报以及定向的单播流量在主机。

在 Linux 下，情况并非如此。绑定 UDP 套接字，即使`SO_BROADCAST`启用了，`INADDR_ANY`也不足以在绑定端口上接收单播和广播数据报。可以为广播流量使用单独的`INADDR_BROADCAST`绑定`SO_BROADCAST`套接字。

# ruby-on-rails - ajax响应后方法变为nil？

> ID：13666790
> 
> 赞同：1
> 
> 时间：2012-12-02T05:51:25.493
> 
> 标签：ruby-on-rails

以下代码执行以下操作：如果用户，**投票**给他一个*删除投票*表格和一个*投票反对表格*。如果用户**投了反对票**，则向他展示*投赞成票*和*删除投票表*。否则，只需显示*赞成票和反对票表格*（我省略了一些代码，因此问题不会太长）。

![在此处输入图像描述](../Images/cf151272260d3f9a221b0d5c91ffe61d.png)

（场景：用户投反对票）：

**post_controller.rb：**

```
 def show
    @post = Post.find(params[:id])
    @replies = @post.replies.paginate(page: params[:page])
    @reply = @post.replies.build
    @vote = Vote.new
    store_location
  end 
```

**votes_controller.rb：**

```
class VotesController < ApplicationController
 before_filter :signed_in_user

 def create
    @votable = find_votable

    # Destroy the vote first in case the user already voted
    if already_voted?
      @vote = @votable.votes.find_by_user_id(current_user.id)
      @vote.destroy
    end

    @vote = @votable.votes.build(params[:vote])
    @vote.user_id = current_user.id
    @votable.save

    respond_to do |format|
      format.html { redirect_back }
      format.js
    end
  end

  def destroy
    @votable = find_votable

    @vote = @votable.votes.find_by_user_id(current_user.id)
    @vote.destroy
    @votable.reload

    respond_to do |format|
      format.html { redirect_back }
      format.js
    end
  end

  private

    def find_votable
      params.each do |name, value|
        if name =~ /(.+)_id$/
          return $1.classify.constantize.find(value)
        end
      end
      nil
    end

    def already_voted?
      @votable.votes.exists?(:user_id => current_user.id)
    end
end 
```

**帖子/投票表格**

```
<div class="vote-form">
  <% if @post.votes.exists?(:user_id => current_user.id) %>
    <% if @post.votes.find_by_user_id(current_user.id).polarity == -1 %>
      <%= form_for ([@post, @vote]), remote: true do |f| %>
        <%= f.hidden_field :polarity, value: 1 %>
        <div class="form-actions">
          <%= button_tag type: :submit, class: "btn btn-small vote" do %>
            <i class="icon-thumbs-down"></i> Vote up
          <% end %>
        </div>
      <% end %>

      <%= form_for ([@post, @post.votes.find_by_user_id(current_user.id)]),
                                                           method: :delete,
                                                           remote: true do |f| %>
        <div class="form-actions">
          <%= button_tag type: :submit, class: "btn btn-small btn-primary unvote" do %>
            <i class="icon-thumbs-up"></i> Vote down
          <% end %>
        </div>
      <% end %>
    <% end %> 
```

**投票/create.js：**

```
$('#<%= @votable.class.name.downcase %>-<%= @votable.id %> .vote-form').html(
  "<%= escape_javascript(render('shared/delete_vote')) %>"
); 
```

**共享/_delete_vote.html.erb：**

```
<% if @votable.votes.find_by_user_id(current_user.id).polarity == -1 %>
  <%= form_for ([@votable, @votable.votes.new]), remote: true do |f| %>
    <div class="form-actions">
      <%= button_tag type: :submit, class: "vote-down btn btn-small" do %>
        <i class="icon-thumbs-up"></i> Vote up
      <% end %>
    </div>
  <% end %>

  <%= form_for ([@votable, @vote]), method: :delete, remote: true do |f| %>
    <div class="form-actions">
      <%= button_tag type: :submit, class: "vote-up btn btn-small btn-primary" do %>
        <i class="icon-thumbs-up"></i> Vote down
      <% end %>
    </div>
  <% end %>
<% end %> 
```

所以，现在一切正常，除了当我单击*vote down*时出现此错误，然后立即*投票*（不刷新页面）：

> ```
> ActionView::Template::Error (undefined method `polarity' for nil:NilClass):
>     1: <% if @votable.votes.find_by_user_id(current_user.id).polarity == 1 %>
>     2:   <%= form_for ([@votable, @vote]), method: :delete, remote: true do |f| %> 
> ```

可能是什么问题呢？

**编辑：**

我意识到错误消息中的行是问题（不是`@votable`）：

```
<% if @votable.votes.find_by_user_id(current_user.id).polarity == 1 %> 
```

奇怪，我还以为是一样的

```
<% if @post.votes.find_by_user_id(current_user.id).polarity == 1 %> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T06:18:22.667

我认为问题出在这里：

```
def destroy
  @votable = find_votable

  @vote = @votable.votes.find_by_user_id(current_user.id)
  @vote.destroy
  @votable.reload

  respond_to do |format|
    format.html { redirect_back }
    format.js
  end
end 
```

您破坏了当前用户的投票，因此在视图中找不到它：

```
@votable.votes.find_by_user_id(current_user.id).polarity 
```

这就是为什么极性被称为 nil 的原因。你应该改写你的投票操作的逻辑。

### 编辑：

作为最简单的解决方案，您可以更换

```
if @votable.votes.find_by_user_id(current_user.id).polarity == -1 
```

和

```
if @votable.votes.find_by_user_id(current_user.id).blank? 
```

# android - 显示拆分操作栏时隐藏操作栏

> ID：13666794
> 
> 赞同：5
> 
> 时间：2012-12-02T05:51:48.593
> 
> 标签：android, android-actionbar, actionbarsherlock

如何隐藏顶部操作栏但使用 ActionBarSherlock 显示拆分操作栏。我想在顶部有标签，而不是像这样：

![图 3](../Images/543bc4446bb370b0de24f922186186a9.png)

Android 开发者网站声明以下内容以隐藏操作栏但保留拆分操作栏：

> 如果您想隐藏顶部的主操作栏，因为您正在使用内置导航选项卡以及拆分操作栏，请调用 setDisplayShowHomeEnabled(false) 以禁用操作栏中的应用程序图标。在这种情况下，主操作栏中现在什么都没有了，所以它消失了，只剩下顶部的导航选项卡和底部的操作项，如图 3 中的第二个设备所示。
> 
> [https://developer.android.com/guide/practices/tablets-and-handsets.html#SplitActionBar](https://developer.android.com/guide/practices/tablets-and-handsets.html#SplitActionBar)

在我的 SherlockFragmentActivity 中，我调用了以下命令，但是只有应用程序图标和标题消失，操作栏保持如下：

```
 //Hide action bar
    getSupportActionBar().setDisplayShowTitleEnabled(false);
    getSupportActionBar().setDisplayShowHomeEnabled(false); 
```

![在此处输入图像描述](../Images/06d13b87731328b33dca53ca0b730f9f.png)

调用`getSupportActionBar().hide()`会隐藏操作栏，但也会隐藏拆分操作栏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T02:25:22.530

仅当您使用 ABS 提供的选项卡时，选项卡才会滚动到顶部操作栏。您没有使用 ViewPager/ViewPagerIndicator 作为选项卡，是吗？（我目前有这个问题）

# sql-server - 列系统表（sys.columns、sys.all_columns 等）如何描述自己？

> ID：13666797
> 
> 赞同：4
> 
> 时间：2012-12-02T05:52:31.777
> 
> 标签：sql-server, database, database-design, metadata

我在 SQL Server 2008 中注意到 sys.all_columns 表包含自己的列。这怎么可能？这似乎是一个先有鸡还是先有蛋的问题——SQL Server 如何在不首先读取 sys.all_columns 的情况下确定 sys.all_columns 的列，这需要知道该表的列是什么？

另外，这很常见吗？其他数据库系统会这样做吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-03-11T13:17:13.257

sys.all_columns 和 sys.columns 不是表，它们是视图。实际上，sys.all_columns 是 sys.system_columns 和 sys.columns 的组合。

它们都与一个基表相关联，我很确定微软更喜欢人们不要乱来。

您可以在此处了解有关系统基表的更多信息：[https ://msdn.microsoft.com/en-us/library/ms179503.aspx](https://msdn.microsoft.com/en-us/library/ms179503.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-11T13:01:35.853

它可以运行初始查询，然后向自身查询新列并采用联合。但实际上，初始查询本身描述了查询运行之前的列。这就是为什么您不能定义具有未命名列的视图的原因。

# wordpress - 将对象类作为参数传递给 Wordpress 函数

> ID：13666798
> 
> 赞同：1
> 
> 时间：2012-12-02T05:52:54.913
> 
> 标签：wordpress

我必须将函数`$MyClass->MyStyle`作为参数传递给`add_action()`但不知道该怎么做。我试过了：

```
<?php
add_action( 'admin_menu', $MyClass->MyStyle );
add_action( 'admin_menu', " . $MyClass->MyStyle . " );
add_action( 'admin_menu', "$MyClass->MyStyle" );
?> 
```

但没有一个有效。

正确的语法是什么？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T05:59:27.353

这是一个例子：

```
add_action( 'admin_menu', array( $MyClass,
                                 'MyStyle' ) ); // Register Admin Style 
```

更新：

我正在检查语法的文档，[这里](http://codex.wordpress.org/Function_Reference/add_submenu_page)是：

“必须以以下两种方式之一引用该函数：如果该函数是插件中某个类的成员，则应将其引用为`array( $this, 'function_name' )`

如果类被实例化为对象或数组（**CLASS**， 'function_name' ），如果它是静态调用的。

在所有其他情况下，使用函数名本身就足够了

# filepicker.io - filepicker.io storeUrl 在 IE 中响应错误代码 153，执行两次 onError 回调

> ID：13666802
> 
> 赞同：1
> 
> 时间：2012-12-02T05:54:15.570
> 
> 标签：filepicker.io

我在 IE9 中使用 filepicker.storeUrl 时遇到问题。它正在使用代码为 153 的 FPError 运行 onError 回调，该代码似乎没有在任何地方记录 - 以及文件选择器调试脚本

```
<script src="https://api.filepicker.io/v1/filepicker_debug.js"></script> 
```

没有帮助，它只是给了我以下信息：

```
{"code":153,"message":"Unknown error when storing",
 "moreInfo":"https://developers.filepicker.io/answers/jsErrors/153"} 
```

（这是无用的链接：[https](https://developers.filepicker.io/answers/jsErrors/153) ://developers.filepicker.io/answers/jsErrors/153 ）

这是我的 storeUrl 参数示例：

```
filepicker.storeUrl("http://featherfiles.aviary.com/2012-12-02/4614a5a79/03e18973a79745449ae6ff8b9a44af6a.png",{"location":"S3","filename":"03e18973a79745449ae6ff8b9a44af6a.png"}, onSuccess, onError); 
```

此外，仅一次调用 storeUrl 就会触发两次 onError 回调。:(

不幸的是，它似乎在 Firefox 中运行良好。filepicker.pick() 在 IE 中也很好，只是 storeUrl 似乎给我带来了问题。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T02:28:54.233

短篇小说：我们的不良行为，明天解决。应该在https上工作。

长话短说：原来是因为 XDomainRequest 强制协议匹配，如果您的网站是 http，我们会在[http://www.filepicker.io/api/store/S3 访问](http://www.filepicker.io/api/store/S3)我们的端点。

在服务器端，我们强制执行 https，提供到 HTTPS 版本的重定向。这导致触发双重错误，一次是重定向 301 是错误响应，一次是 405 是对 url 的无效 GET 调用。

虽然我们希望确保所有 api 调用都通过 https 完成，但在这种情况下，XDomainRequest 会强制我们使用 http，因此我们现在将允许对 store 端点的 http 调用。

# ios - 提交我的应用程序时出错：“应用程序名称已被使用”

> ID：13666803
> 
> 赞同：0
> 
> 时间：2012-12-02T05:54:16.193
> 
> 标签：ios, xcode, itunes

我正在 iTunes Connect 中配置我的应用程序的上传，但我不小心删除了该应用程序；（现在我正在尝试再次配置，但我收到此错误“应用程序名称已被使用”。你们都知道解决这个问题的方法？ o 我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T08:07:24.457

App 名称、SKU 和 App Id 永远不能再使用，但如果有什么安慰的话，出现在应用程序图标下方的名称始终可以是您想要的任何名称。

# java - 如何使用 Jackson 反序列化动态 JSON 字段？

> ID：13666806
> 
> 赞同：4
> 
> 时间：2012-12-02T05:54:40.127
> 
> 标签：java, json, jackson

如何将具有动态字段的对象（如下面代码中的故事）反序列化为对象数组？

```
{
   stories: {
      -IhO1742Lki-Pit0snot: {
         sentences: {
            -IhO2fyAEn15XUge6HeY: {
               userName: "Giulia",
               text: "a dude created a new religion called PornDora"
            },
            -IhO2fyAEn15XUge6HeZ: {
               userName: "Will",
               text: "but it was kidnapped by a flying burrito copter"
            },
            -IhO2fyAEn15XUge6HeX: {
               userName: "Jasmine",
               text: "I went this morning at AngelHack hackaton"
            }
         }
      },
      -IhO-gNvUPHpB9fOn-Gm: {
         sentences: {
            -IhO0PBBnJavU2gfMcVO: {
               userName: "Giorgio",
               text: "I woke up alone in a dark alley and a yellow cat was starring at me"
            },
            -IhO11CWL9r6G4Pu8YXx: {
               userName: "Will",
               text: "the cat runned away when a blurred figure approached me and called my name"
            }
         }
      }
   }
}
```

以下是我用于反序列化的 Java 类：

```
public class Story {

    private String id;
    private List sentences;

    public String getId() {
        return id;
    }
    public void setId(String id) {
        this.id = id;
    }
    public List getSentences() {
        return sentences;
    }
    public void setSentences(List sentences) {
        this.sentences = sentences;
    }

}
```

```
public class Sentence {

    private String id;
    private String text;
    private String userName;

    public String getId() {
        return id;
    }
    public void setId(String id) {
        this.id = id;
    }
    public String getText() {
        return text;
    }
    public void setText(String text) {
        this.text = text;
    }
    public String getUserName() {
        return userName;
    }
    public void setUserName(String userName) {
        this.userName = userName;
    }

}
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-12T17:38:46.780

你控制 JSON 序列化的格式吗？例如，您能否改用以下格式：

```
{
    "stories": [
        {
            "id": "-IhO1742Lki-Pit0snot", 
            "sentences": [
                {
                    "id": "-IhO2fyAEn15XUge6HeY", 
                    "text": "a dude created a new religion called PornDora", 
                    "userName": "Giulia"
                }
            ]
        )
    ]
} 
```

如果您确实控制了序列化方面，则可以尝试使用[多态类型处理](http://wiki.fasterxml.com/JacksonPolymorphicDeserialization)(PTH)。

这将为 Jackson 提供足够的类型信息来反序列化您的对象。

有关背景信息，另请参阅 Tatu[随附的博客文章](http://www.cowtowncoder.com/blog/archives/2010/03/entry_372.html)。

* * *

这是 Jackson 1.x 中 PTH 的代码片段。如果您想使用 Jackson 2.x，您将利用这些[`com.fasterxml`包](http://fasterxml.github.io/jackson-databind/javadoc/2.0.0/com/fasterxml/jackson/databind/ObjectMapper.html)并需要稍微更改代码。

```
// import com.fasterxml.jackson.annotation.JsonTypeInfo;
// import com.fasterxml.jackson.databind.ObjectMapper;
import org.codehaus.jackson.annotate.JsonTypeInfo;
import org.codehaus.jackson.map.ObjectMapper;

public class MyObjectMapperProvider {
    final ObjectMapper defaultObjectMapper;

    public MyObjectMapperProvider() {
        System.out.println("MyObjectMapperProvider()");

        this.defaultObjectMapper = new ObjectMapper();
        this.defaultObjectMapper.enableDefaultTyping(
            ObjectMapper.DefaultTyping.NON_FINAL, JsonTypeInfo.As.WRAPPER_OBJECT
        );
        // .enableDefaultTyping();
        // .enableDefaultTyping(ObjectMapper.DefaultTyping.OBJECT_AND_NON_CONCRETE);
        // .enableDefaultTyping(ObjectMapper.DefaultTyping.NON_FINAL, JsonTypeInfo.As.WRAPPER_OBJECT); 
        // this.defaultObjectMapper.addMixInAnnotations(Bindable.class, MyObjectMapperProvider.MixIn.class);
        // this.defaultObjectMapper.addMixInAnnotations(DataModel.WriteOp.class, MyObjectMapperProvider.MixIn.class);
    }
} 
```

* * *

顺便说一句，您提供的 json 实际上不是有效的 JSON。尝试使用

```
 {
        "stories": {
            "-IhO-gNvUPHpB9fOn-Gm": {
                "sentences": {
                    "-IhO0PBBnJavU2gfMcVO": {
                        "text": "I woke up alone in a dark alley and a yellow cat was starring at me", 
                        "userName": "Giorgio"
                    }, 
                    "-IhO11CWL9r6G4Pu8YXx": {
                        "text": "the cat runned away when a blurred figure approached me and called my name", 
                        "userName": "Will"
                    }
                }
            }, 
            "-IhO1742Lki-Pit0snot": {
                "sentences": {
                    "-IhO2fyAEn15XUge6HeX": {
                        "text": "I went this morning at AngelHack hackaton", 
                        "userName": "Jasmine"
                    }, 
                    "-IhO2fyAEn15XUge6HeY": {
                        "text": "a dude created a new religion called PornDora", 
                        "userName": "Giulia"
                    }, 
                    "-IhO2fyAEn15XUge6HeZ": {
                        "text": "but it was kidnapped by a flying burrito copter", 
                        "userName": "Will"
                    }
                }
            }
        }
    } 
```

您可以通过将 json 传递到`python -m json.tool`. 在 OS X 上，您可以将 json 复制到剪贴板并将其传递给`json.tool`如下：

```
 > pbpaste | python -m json.tool 
```

* * *

如果你想玩，这里有一个利用泽西岛的小例子。用来`curl http://localhost:7654/sandbox/test`锻炼它：

主类.java

```
import java.net.URI;

import org.glassfish.grizzly.http.server.HttpServer;
// import org.glassfish.hk2.utilities.binding.AbstractBinder;
import org.glassfish.jersey.grizzly2.httpserver.GrizzlyHttpServerFactory;
import org.glassfish.jersey.jackson.JacksonFeature;
import org.glassfish.jersey.server.ResourceConfig;

import org.slf4j.Logger;
import org.slf4j.LoggerFactory;

public class MainClass {
     private static final Logger LOG = LoggerFactory.getLogger(MainClass.class);
     public static final String PATH = "http://localhost:7654/sandbox/";
     public static void main(String[] args) {
          // create a resource config that scans for JAX-RS resources and providers
          // in com.mlbam.monitoring.lsg.data_aggregator package
          final ResourceConfig rc = new ResourceConfig()
                .packages("com.mlbam.internal")
                // .packages("com.mlbam.monitoring.collector.provis")
                .register(MyObjectMapperProvider.class)
                .register(JacksonFeature.class)
          ;

          // create and start a new instance of grizzly http server
          // exposing the Jersey application at BASE_URI
          final HttpServer grizzlyServerV1 = GrizzlyHttpServerFactory.createHttpServer(URI.create(PATH), rc);
          LOG.info("Jersey app started with WADL available at {}application.wadl", PATH);
          try {
                Thread.sleep(10_000);
          } catch (InterruptedException e) { }
          LOG.info("Stopping");
     }
} 
```

MyObjectMapperProvider.java：

```
// import com.fasterxml.jackson.annotation.JsonTypeInfo;
// import com.fasterxml.jackson.databind.ObjectMapper;
import org.codehaus.jackson.annotate.JsonTypeInfo;
import org.codehaus.jackson.map.ObjectMapper;

import javax.ws.rs.ext.ContextResolver;
import javax.ws.rs.ext.Provider;

@Provider
public class MyObjectMapperProvider implements ContextResolver<ObjectMapper> {
    final ObjectMapper defaultObjectMapper;

    public MyObjectMapperProvider() {
         System.out.println("MyObjectMapperProvider()");

         this.defaultObjectMapper = new ObjectMapper();
         this.defaultObjectMapper.enableDefaultTyping(
               ObjectMapper.DefaultTyping.NON_FINAL, JsonTypeInfo.As.WRAPPER_OBJECT
         );
         // .enableDefaultTyping();
         // .enableDefaultTyping(ObjectMapper.DefaultTyping.OBJECT_AND_NON_CONCRETE);
         // .enableDefaultTyping(ObjectMapper.DefaultTyping.NON_FINAL, JsonTypeInfo.As.WRAPPER_OBJECT); 
         // this.defaultObjectMapper.addMixInAnnotations(Bindable.class, MyObjectMapperProvider.MixIn.class);
         // this.defaultObjectMapper.addMixInAnnotations(DataModel.WriteOp.class, MyObjectMapperProvider.MixIn.class);
    }

    @Override
    public ObjectMapper getContext(Class<?> type) {
         System.out.println("MyObjectMapperProvider.getContext(" + type + ")");
         return this.defaultObjectMapper;
    }

    // @JsonTypeInfo(use=JsonTypeInfo.Id.CLASS, include=JsonTypeInfo.As.PROPERTY, property="@class")
    // public static class MixIn {
    // }
} 
```

我的资源.java

```
import javax.inject.Singleton;

import javax.ws.rs.core.Response;
import javax.ws.rs.core.MediaType;
import javax.ws.rs.GET;
import javax.ws.rs.Path;
import javax.ws.rs.Produces;

@Singleton
@Path("test/")
public class MyResource {
    // public Thing[] state = {new Thing("asdf"), new Thing("foo"), new Thing("bar")};
    public String[] state = {"asdf", "foo", "bar"};

    @GET
    @Produces(MediaType.APPLICATION_JSON)
    public Response test() {
         return Response.ok(state).build();
    }
} 
```

依赖项（如果使用 Maven）：

```
<dependencies>
    <!-- Logging -->
    <dependency>
        <groupId>org.slf4j</groupId>
        <artifactId>slf4j-api</artifactId>
        <version>1.7.5</version>
    </dependency>
    <dependency>
        <groupId>ch.qos.logback</groupId>
        <artifactId>logback-classic</artifactId>
        <version>1.0.13</version>
    </dependency>
    <dependency>
        <groupId>ch.qos.logback</groupId>
        <artifactId>logback-core</artifactId>
        <version>1.0.13</version>
    </dependency>
    <!-- Jersey Specific Dependencies -->
    <dependency>
        <groupId>org.glassfish.jersey.containers</groupId>
        <artifactId>jersey-container-grizzly2-http</artifactId>
        <version>2.3.1</version>
    </dependency>
    <dependency>
        <groupId>org.glassfish.jersey.media</groupId>
        <artifactId>jersey-media-json-jackson</artifactId>
        <version>2.3.1</version>
    </dependency>
</dependencies> 
```

# asp.net - “强制算子”应用错误

> ID：13666807
> 
> 赞同：3
> 
> 时间：2012-12-02T05:54:46.510
> 
> 标签：asp.net, list, c#-4.0, linq-to-sql, join

在我在 asp.net 中开发 Web 应用程序期间，我遇到了以下*错误*，
**类型 <>f__AnonymousType0 `1[System.Collections.Generic.IEnumerable`1[clsDAL.AnsType]]' 和 'clsDAL.AnsType' 之间没有定义强制运算符。**

当我使用**LInqToSQL**从数据库中获取数据时会产生此错误。产生此错误的函数如下。

```
public static IList<AnsType> GetAnswer(int id)
{            
    var TempAns = GlobalClass.DBContext.tbQueAns.Where(s => s.QueId == id).Select(s => s.AnsVal).ToList();
    var TAns = GlobalClass.DBContext.tbQueOptions.Where(s=>s.QueId == id).Join(GlobalClass.DBContext.tbQueAns, x => x.OptionId, s => s.AnsVal, (a, b) => new { ans = a.OptionVal });
    List<AnsType> Ans = TAns.Cast<AnsType>().ToList();
    return Ans;
} 
```

**AnsType**的*类型*如下...

 **```
public class AnsType
{
    public string AnsVal { get; set; }
} 
```

我不明白到底发生了什么，我也尝试在谷歌上搜索这个问题，但我没有得到答案。
我也想知道产生这个错误的原因。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-02T08:29:02.850

这应该有效：

```
 var TAns = GlobalClass.DBContext
             .tbQueOptions.Where(s=>s.QueId == id)
             .Join(GlobalClass.DBContext.tbQueAns, 
                   x => x.OptionId, 
                   s => s.AnsVal, 
                  (a, b) => new AnsType() { AnsVal = a.OptionVal }).ToList();

return TAns; 
```

它发生的原因是因为你试图强制转换`implicitly`匿名类型而你不能这样做。

头韵，您可以像这样指定转换运算符：

```
 public class AnsType
        {
            public string AnsVal { get; set; }
            public static implicit operator AnsType(string val)
            {
                AnsType t = new AnsType();
                t.AnsVal = val;
                return t;
            }
        } 
```

然后像这样使用它：`List<AnsType> Ans = TAns.Select(x=>x.ans).Cast<AnsType>().ToList();`**

# css - HTML5 网站按钮重叠

> ID：13666808
> 
> 赞同：0
> 
> 时间：2012-12-02T05:54:51.890
> 
> 标签：css, html, button, web

我复制了按钮的css部分，如果需要更多询问。

网站：http: [//younani.com/finalsite/contactus.html](http://younani.com/finalsite/contactus.html)

按钮相互重叠，这是为什么呢？

```
#left a {font-family: Arial, Helvetica, sans-serif;
    font-size: 14px;
    color: #ffffff;
    padding: 10px 20px;
    background: -moz-linear-gradient(
        top,
        #ffffff 0%,
        #2a07ed);
    background: -webkit-gradient(
        linear, left top, left bottom, 
        from(#ffffff),
        to(#2a07ed));
    -moz-border-radius: 30px;
    -webkit-border-radius: 30px;
    border-radius: 30px;
    border: 3px solid #ffffff;
    -moz-box-shadow:
        0px 3px 11px rgba(000,000,000,0.5),
        inset 0px 0px 1px rgba(026,020,219,1);
    -webkit-box-shadow:
        0px 3px 11px rgba(000,000,000,0.5),
        inset 0px 0px 1px rgba(026,020,219,1);
    box-shadow:
        0px 3px 11px rgba(000,000,000,0.5),
        inset 0px 0px 1px rgba(026,020,219,1);
    text-shadow:
        0px -1px 0px rgba(000,000,000,0.2),
        0px 1px 0px rgba(255,255,255,0.3);
}

figure{}

#left a:link { background-color: #E6E6E6; }
#left a:visited { background-color: #E6E6E6; }
#left a:hover {border: 3px inset #333333; }

#left ul { list-style-type: none;
          margin: 0;
          padding-left: 0; } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-02T06:04:56.433

按钮重叠是因为锚标记是一个内联元素，因此元素仅根据文本内容位于彼此下方。所以填充会导致它们“重叠”，如果你设置

```
display: block; 
```

在您的`#left a`选择器上，它应该正确显示。

# java - 交换来自不同数组的重复项

> ID：13666809
> 
> 赞同：0
> 
> 时间：2012-12-02T05:55:00.457
> 
> 标签：java, multidimensional-array, arraylist, sudoku

我有三个 [3][3] 的多维数组。

我需要确保每一行或每一列上没有任何重复项，但每个单独的 [3][3] 数组都维护它的数字，即 1 到 9。

例子

```
[9,5,7] [1,8,7] [9,2,3] 
[4,1,2] [2,6,5] [1,8,6]
[8,6,3] [3,4,9] [7,4,5] 
```

我应该能够将其更改为：

```
[9,5,7] [1,8,2] [4,6,3] 
[4,1,2] [7,6,5] [9,8,2]
[8,6,3] [3,4,9] [7,1,5] 
```

请注意数字是如何交换的，以便所有三行都有唯一的数字，并且 [3][3] 的所有三个数组仍然保持它的数字 1-9

## 我尝试了两种不同的方法

1）交换/随机数字，直到每行的总和为 45（数字 1-9 相加得到 45）

2) 当我逐个询问数组时，将欺骗添加到 ArrayLists

我必须补充一点，[3][3] 的每个多维数组都是使用 Collections 方法添加的，编号为 1-9。

# assembly - 如何将值返回到 MIPS64 中的标签？

> ID：13666815
> 
> 赞同：0
> 
> 时间：2012-12-02T05:55:56.290
> 
> 标签：assembly, store, mips64

如果我有一个直接的价值，比如：

```
.data
sum:  .word  0 
```

在代码中进行了一些计算，并想将结果放回主内存中的“sum”中，我该怎么做？我一直在阅读该命令的手册，但我一定没有像我应该的那样理解概念。

对新手有帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T15:16:54.617

使用`Store Word`指令，`sw`。像往常一样，您必须使用寄存器来获取地址，或者如果汇编器提供此类支持，则让汇编器来处理。

假设您要`$t0`写入`sum`：

```
la $t1, sum
sw $t0, ($t1) 
```

或者只是`sw $t0, sum`您的汇编程序将转换为等效代码。

# c# - TcpClient 主机名挂起

> ID：13666816
> 
> 赞同：0
> 
> 时间：2012-12-02T05:56:15.370
> 
> 标签：c#, tcpclient, freeze, hostname

我在使用 TcpClient 通过 StreamWriter 写入的流发送数据时遇到问题。

```
 private void sendMessage(string[] hostlist, string message)
    {
        foreach (string host in hostlist)
        {
            try
            {
                messageClient = new TcpClient(host, 24300);
                StreamWriter writer = new StreamWriter(messageClient.GetStream());
                writer.Write(message);
                writer.Flush();
            }
            catch (Exception)
            {
                MessageBox.Show("Error 1\n" +
                                "This may be due to two things:\n" +
                                "1\. The hostname is invalid.\n" +
                                "2\. The destination computer is not online.",
                                "Error Sending Message", MessageBoxButtons.OK, MessageBoxIcon.Error);
            }

        }

    } 
```

问题行是 messageClient 被初始化的地方。如果我使用 IP 地址，则完全没有挂起，消息立即发送和接收。但是，如果我使用诸如“lappy”（我的笔记本电脑的名称）之类的主机名，程序会完全挂起 6 秒，然后发送消息。每次您尝试使用主机名发送消息时都会发生这种情况。我在这里做错了吗？如果您需要使用主机名而不是 IP 地址，是否有不同的实现？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T05:44:54.080

我找到的最佳解决方案是自己解析主机名并使用其中的地址。

例如，

```
IPHostEntry hostlist = Dns.Resolve(hostname[0]);
IPAddress address = hostlist.AddressList[0]; 
```

IPAddress 地址是我最终将消息发送到的地址。

由于我的程序的规划最终没有任何时候都具有带有 IP 地址的用户界面，所以现在程序发送到哪个 IP 并不重要，只要将消息发送到正确的计算机即可。

# ruby-on-rails - Mongoid + MongoHQ + Heroku 错误

> ID：13666817
> 
> 赞同：1
> 
> 时间：2012-12-02T05:56:17.197
> 
> 标签：ruby-on-rails, heroku, mongoid, mongohq

嗨，这是我第一次使用 mongoid + mongoHQ 在 Heroku 上部署应用程序

我设法推送到heroku，但我的应用程序出现错误，我检查了heroku日志，这就是它显示的内容

```
 2012-12-02T05:36:43+00:00 app[web.1]: Processing by HomeController#index as HTML
2012-12-02T05:36:43+00:00 app[web.1]:   Rendered home/_store_search.html.erb (1.4ms)
2012-12-02T05:36:43+00:00 app[web.1]:     7: 
2012-12-02T05:36:43+00:00 app[web.1]:     9:        <div class="store">
2012-12-02T05:36:43+00:00 app[web.1]: 
2012-12-02T05:36:43+00:00 app[web.1]: 
2012-12-02T05:36:43+00:00 app[web.1]: ActionView::Template::Error (undefined method `[]' for nil:NilClass):
2012-12-02T05:36:43+00:00 app[web.1]:     6:    <h4 align="center">Best of Yelp Stores </h4>
2012-12-02T05:36:43+00:00 heroku[router]: at=info method=GET path=/ host=evening-bayou-5137.herokuapp.com fwd=128.54.34.17 dyno=web.1 queue=0 wait=0ms connect=1ms service=332ms status=500 bytes=643
2012-12-02T05:36:43+00:00 app[web.1]:     11:           
2012-12-02T05:36:43+00:00 app[web.1]:   Rendered home/index.html.erb within layouts/application (102.9ms)
2012-12-02T05:36:43+00:00 app[web.1]:   app/views/home/index.html.erb:8:in `sort_by'
2012-12-02T05:36:43+00:00 app[web.1]: 
2012-12-02T05:36:43+00:00 app[web.1]:     5: 
2012-12-02T05:36:43+00:00 app[web.1]: Completed 500 Internal Server Error in 180ms
2012-12-02T05:36:43+00:00 app[web.1]:     8:    <% @stores.sort_by{ |store| store.avg_rating || 0}.reverse.each.with_index do |store, index| %>
2012-12-02T05:36:43+00:00 app[web.1]:     10:           
2012-12-02T05:36:43+00:00 app[web.1]:   app/views/home/index.html.erb:8:in `_app_views_home_index_html_erb__1734857390086193972_44325160'
2012-12-02T05:36:44+00:00 heroku[router]: at=info method=GET path=/favicon.ico host=evening-bayou-5137.herokuapp.com fwd=128.54.34.17 dyno=web.1 queue=0 wait=0ms connect=0ms service=7ms status=200 bytes=0
2012-12-02T05:41:38+00:00 heroku[api]: Starting process with command `bundle exec rails console` by jsabilla@ucsd.edu
2012-12-02T05:41:45+00:00 heroku[run.9005]: Starting process with command `bundle exec rails console`
2012-12-02T05:41:45+00:00 heroku[run.9005]: Awaiting client
2012-12-02T05:41:45+00:00 heroku[run.9005]: State changed from starting to up
2012-12-02T05:46:25+00:00 heroku[run.9005]: Client connection closed. Sending SIGHUP to all processes
2012-12-02T05:46:26+00:00 heroku[run.9005]: Process exited with status 0
2012-12-02T05:46:26+00:00 heroku[run.9005]: State changed from up to complete
2012-12-02T05:46:35+00:00 heroku[api]: Starting process with command `bundle exec rake db:setup` by jsabilla@ucsd.edu
2012-12-02T05:46:40+00:00 heroku[run.8128]: State changed from starting to up
2012-12-02T05:46:55+00:00 heroku[run.8128]: State changed from up to complete
2012-12-02T05:47:01+00:00 heroku[api]: Starting process with command `bundle exec rake db:setup --trace` by jsabilla@ucsd.edu
2012-12-02T05:47:09+00:00 heroku[run.7343]: Awaiting client
2012-12-02T05:47:09+00:00 heroku[run.7343]: Starting process with command `bundle exec rake db:setup --trace`
2012-12-02T05:47:10+00:00 heroku[run.7343]: State changed from starting to up
2012-12-02T05:47:25+00:00 heroku[run.7343]: Process exited with status 1
2012-12-02T05:47:25+00:00 heroku[run.7343]: State changed from up to complete 
```

最初我认为这是因为我的数据库是空的，我尝试运行：heroku run db:seed 它给了我和未定义的错误 nil 类

在这一点上，任何输入都会有所帮助。感谢您

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T06:04:01.917

Mongoid 在 Ruby 1.9.2 上运行时会抛出该异常。您需要告诉 Heroku 使用 1.9.3，只需将其放入您的`Gemfile`:

```
ruby "1.9.3" 
```

# java - 在java中制作一个可更新的程序？

> ID：13666823
> 
> 赞同：0
> 
> 时间：2012-12-02T05:57:03.683
> 
> 标签：java, sockets, client, auto-update, overwrite

> **可能重复：**
> [如何用 Java 编写自更新程序？](https://stackoverflow.com/questions/4706153/how-to-write-a-self-updating-program-in-java)

所以，我有一个问题要问你们。我正在制作一个游戏，我希望它是可更新的，例如我的世界或激战 2 或任何其他好的游戏。我的问题是如何。我一直在寻找，我真的找不到任何好主意。我已经与服务器和客户端建立了连接，所以我需要的是传输新文件，然后替换旧文件。我正在使用`socket`方法，因为我认为这是唯一的方法......但我不确定。我所拥有的：两个程序中的一个名为 updateClass 的类。两者完全相同。然后，我让服务器将对象发送给客户端，并让客户端读取嵌入在对象中的 msg，就像一个简单的测试一样。它说它无法发送对象。我在接收端投了它，所以我不确定。我的问题是，我在正确的轨道上吗？有什么想法或建议吗？我不是在寻找特定的代码，但如果你有一些我欢迎它，我喜欢这个挑战。另外，我将如何让我的程序更新其类文件？似乎它在运行时不应该能够，这是一个小问题......所以让我知道你们的想法！提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T07:38:41.193

> ..我在正确的轨道上吗？

为 J2SE 应用程序提供更新的更容易的“跟踪”。是使用[Java Web Start](https://stackoverflow.com/tags/java-web-start/info)部署它。

自动更新是 JWS“开箱即用”带来的众多优势之一。最近的 JRE 甚至允许该应用程序。本身与执行更新的 API 进行交互。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-02T06:13:56.287

也许这个教程可以给你一些想法：

[http://www.mkyong.com/java/java-web-start-jnlp-tutorial-unofficial-guide/](http://www.mkyong.com/java/java-web-start-jnlp-tutorial-unofficial-guide/)

或者这个：

[http://www.hascode.com/2012/05/creating-updatable-java-applications-using-getdown-and-the-getdown-maven-plugin/](http://www.hascode.com/2012/05/creating-updatable-java-applications-using-getdown-and-the-getdown-maven-plugin/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-02T06:22:07.860

您应该通过网络发送类的二进制定义（.class 文件的内容）并使用 ClassLoader.defineClass(String name, byte[] b, int off, int len) 将其加载到 VM 中。类的序列化版本不是类的 java 字节码。请注意，一旦加载，您就不能卸载类，因此您不能在同一个类加载器中更新它们。

# internet-explorer - “全选”不适用于 twitter bootrap modal 和 IE

> ID：13666826
> 
> 赞同：3
> 
> 时间：2012-12-02T05:58:32.573
> 
> 标签：internet-explorer, twitter-bootstrap, modal-dialog

我正在使用[引导程序的模态](http://twitter.github.com/bootstrap/javascript.html#modals)

一个非常好的实用程序，但不幸的是“全选”不适用于 IE7/8/9，无论是从菜单还是`ctrl`+`a`按键序列。

为什么？我该如何启用它？还是值得麻烦？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T15:35:43.283

这与**Modal**插件如何强制关注 modal 元素有关。您可以使用以下代码段禁用焦点锁定。

## JS

```
$('body').on('shown', '.modal', function () {
  $(document).off('focusin.modal')
}) 
```

[**注意：**您可以将侦听器附加到元素以外的其他东西上`<body>`，特别是如果您不需要对所有模态进行此行为。]

我至少已经确认运行它会在旧版 IE 中重新启用`Ctrl`+ 。`a`

# ruby - Sinatra 轻松获取当前路径

> ID：13666828
> 
> 赞同：1
> 
> 时间：2012-12-02T05:58:49.960
> 
> 标签：ruby, sinatra, erb

我正在使用 Sinatra 和 erb，每次我必须生成链接时，我都必须像这样对其进行硬编码：

```
<li><a href=<%="/admin/users?page=#{i}"%>><%=i%></a></li> 
```

是否有一种更简单、更“可扩展”的方式来获取字符串“/admin/users?page=”并执行此操作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T07:00:02.883

看看[这个](http://www.sinatrarb.com/intro#Generating%20URLs)，做一个[帮手](http://rubysource.com/using-sinatra-helpers-to-clean-up-your-code/)。

```
# Assuming you're building a modular sinatra app but its not required.
require 'sinatra/base'

module Sinatra
  module UserLinkHelper
    def user_url(id)
      url("/admin/users?page=" + id.to_s)
    end
  end

  helpers UserLinkHelper
end

# Assuming you're using haml in your view, once again not required
%a{:href => user_url(i)} 
```

我没有对此进行测试，但这应该包含您正在寻找的想法。

# c# - 图像编辑器 - 我的图像表示闪烁

> ID：13666837
> 
> 赞同：0
> 
> 时间：2012-12-02T06:00:44.680
> 
> 标签：c#, .net, image

我正在研究一个`image editor`（这真的很像一种爱好），我对图像的视觉表示和变化有一点问题。

该项目遵循`MVC design pattern`, （该项目实际上比简单的图像编辑器稍微复杂一点，但这并不重要）并且对于编辑我使用`board`（“像素”矩阵）作为模型部分和修改后的`view panel`（它的责任是做板子状态的直观表示）

当我修改`board`（例如，用笔画一个像素）`invalidate`面板时，它必须完全重新绘制自己。（我想考虑到 PC 每秒自动刷新（重绘）几次，CPU 不会介意每次我只修改一个像素时重绘整个面板）

问题是图像闪烁，如果我**快速移动我的笔**，你看不到一条线，你看到一个`dashed line`。

我的“重绘”算法的复杂度是`O(n^2)`.

我尝试了不同的风格，喜欢双缓冲和不透明......

任何人都可以建议我更好的算法或更好的设计模式，我可以使用它们来解决这个问题......

# latex - 你如何在 LaTeX 中制作这个符号

> ID：13666844
> 
> 赞同：1
> 
> 时间：2012-12-02T06:01:48.177
> 
> 标签：latex

我不知道如何定义它，所以这是我要写的图像：

![在此处输入图像描述](../Images/d65b10700048856d181147ea5aa1cfd3.png)

下标和上标怎么写？上标线叫什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-02T06:11:39.110

```
\mu'_n = \operatorname{E}(X^n) = \int^{\infty}_{-\infty} x^n dF(x) 
```

我没有在 LaTeX 中测试过它，但它至少在 MathJax 中有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-02T06:08:33.693

您可以使用

```
a_{subscript}
a^{superscript}
a_{subscript}^{andsuperscript} 
```

# php - 将PHP数组格式转换为js数组格式，只使用js

> ID：13666849
> 
> 赞同：1
> 
> 时间：2012-12-02T06:02:30.413
> 
> 标签：php, javascript, arrays

我知道 php 上有一个 json_encode。目前我们正在使用它。但这是唯一会减慢应用程序速度的原因，因为它需要访问服务器。

情况就是这样，我们有 2 个应用程序。我们称它们为 app1 和 app2。

App1 是一个大应用程序。其中一个输入是 php 数组。

另一方面，现在 app2 是为帮助 app1 而创建的一个小应用程序。App2 有一个表单。表单有很多很多字段。然后所有这些字段将被转换为正确的 php 数组格式，准备用作 app1 中的输入。

现在我们的问题，每次我们使用app2时，我们应该更加小心或始终保留字段。因为如果有一个字段的信息错误，我们需要再做一次，使用 app2 来获取正确的数组。

所以，我们认为我们需要在 app2 上添加一个功能。我们希望它能够编辑它产生的 php 数组。我们已经做到了。当给定 php 数组时，我们将其发送到服务器，使用 json_encode，然后将所有内容放置到位。现在我们已经填充了所有字段，然后我们可以使用不正确的数据编辑字段。

目前，我们对此没有意见，但我认为不去服务器并使用 js 转换 php 数组会更有效......我搜索了 google 和 stackoverflow，我什么也没找到。我确实尝试过使用.replace()，但我还没有想出一个好的结果..

我希望有人可以在这里帮助我..

**编辑：**

顺便说一句，这是一种 PHP 数组格式...

作为一个简单的例子，我们必须输入字段。填写完字段后，它将在 textarea 中输出 PHP 数组格式。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T06:57:32.690

从您的评论中，您似乎在说您在 textarea 中有一个字符串，如下所示：

```
<textarea>array('a'=>'goat', 'b' => 'dog')</textarea>​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​ 
```

我真的不明白为什么您的应用程序首先会将任何“代码”类型的结果放在 textarea 中，更不用说作为 PHP 格式数组文字的字符串了，而是试图回答您有关如何使用 JavaScript 的问题要将这样的字符串转换为 JS 对象，可以这样做：

```
// assuming your textarea has the id "myTextArea":
var str = document.getElementById("myTextArea").value,
    json = "{" + str.slice(6, -1).replace(/=>/g,":").replace(/'/g,"\"") + "}";
console.log(json);
var obj = JSON.parse(json);
console.log(obj); 
```

演示：http: [//jsfiddle.net/WknYX/](http://jsfiddle.net/WknYX/)

我将这两个`console.log()`语句放入其中，以便您可以看到字符串被处理为 JSON 格式后的样子，然后在解析 JSON 后查看生成的对象。

请注意，如果字符串采用任何其他格式，并且如果数组中的项目包含正在被替换的字符，则显然此代码将因错误而中断，这不会产生错误但会产生不正确的结果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-02T07:00:11.650

你可以在下面转换一个json格式

```
$array = array("hola","hello");
exit(json_encode($array));

output json // {"hola","hello"} 
```

在js中

```
sucess(x){

} 
```

# .htaccess - .htaccess http 到 https 重定向

> ID：13666850
> 
> 赞同：0
> 
> 时间：2012-12-02T06:02:36.693
> 
> 标签：.htaccess, http, redirect, https, web

我目前正在使用以下 htaccess 将我的网站重定向到 https 和 www 如果尚未使用它。

```
RewriteEngine On
RewriteCond %{HTTP_HOST} !^www\.
RewriteRule ^(.*)$ https://www.%{HTTP_HOST}/$1 [R=301,L] 
```

但是，我有一个无法重定向到 https 的子域 forum.example.com，因为它是一个论坛并且包含不安全的内容。

当我在我的 htaccess 中使用上述代码时，它会将论坛重定向到[https://www.example.com/forum](https://www.example.com/forum)而不仅仅是 forum.example.com。

（基本上我需要一份来自 melt-wow.com 的 htaccess 的精确副本）

请注意他们如何拥有 https，但论坛不会重定向。

有什么建议吗？如果我不清楚或您需要澄清任何事情，请告诉我，我会澄清。

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-02T12:43:46.617

尝试

```
#if not forum.example.com, not www.example.com and not ssl then redirect
RewriteCond %{HTTP_HOST} !^forum\. 
RewriteCond %{HTTP_HOST} !^www\. 
RewriteCond %{SERVER_PORT} !443
RewriteRule ^(.*)$ https://www.%{HTTP_HOST}/$1 [R,L]

#if not forum.example.com, www.example.com, and not ssl then redirect
RewriteCond %{HTTP_HOST} !^forum\. 
RewriteCond %{HTTP_HOST} ^www\. 
RewriteCond %{SERVER_PORT} !443
RewriteRule ^(.*)$ https://%{HTTP_HOST}/$1 [R,L]

#redirect if https://forum.example.com
RewriteCond %{HTTP_HOST} ^forum\.
RewriteCond %{SERVER_PORT} 443
RewriteRule ^(.*)$ http://forum.%{HTTP_HOST}/$1 [R,L] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-02T07:06:25.593

这是一个想法：

```
RewriteEngine on
RewriteCond %{REQUEST_URI} !/forum/
RewriteCond %{HTTP_HOST} !^www\.
RewriteRule ^(.*)$ https://www.%{HTTP_HOST}/$1 [R=301,L] 
```

# java - Android：将 NumberPicker 中的整数传递给另一个活动

> ID：13666851
> 
> 赞同：0
> 
> 时间：2012-12-02T06:02:41.067
> 
> 标签：java, android

我正在使用内置的 NumberPicker 让用户选择一个数字。然后用户将点击“确定”按钮进行确认，由此产生的操作将打开另一个活动。当用户点击“确定”按钮时，我希望将用户选择的数字传递给其他活动。我已经完成了导致打开一个新活动的按钮，并且我知道 NumberPicker 有一个 getValue()，你可以使用 putExtra() 传递东西，但我不确定如何将它们与 onClick 方法结合起来。我该怎么做呢？

```
public class Source1 extends Activity implements View.OnClickListener {

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_1);
...(NumberPicker code)
}

@Override
public void onClick(View v) {
    int x = ((NumberPicker) v).getValue();
    Intent intent = new Intent(this, Destination.class);
    intent.putExtra("VarName", x);
    startActivity(intent);
}
} 
```

这是我的按钮的 xml：

```
<Button
    android:id="@+id/Id_name"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_below="@+id/numberPicker1"
    android:layout_centerHorizontal="true"
    android:onClick="methodName"
    android:text="@string/Ok" /> 
```

那是我的尝试。这是正确的/需要改变什么？因为我在类中使用 onClick 方法，所以我什至需要按钮代码中的 onClick 吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-02T06:13:31.850

`NumberPicker`更改您的代码以从按钮单击中获取选定的值：

```
@Override
public void onClick(View v) {

    NumberPicker numPicker = (NumberPicker)findViewById(R.id.NumberPicker_id);
    int x = numPicker.getValue();
    Intent intent = new Intent(this, Destination.class);
    intent.putExtra("VarName", x);
    startActivity(intent);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-02T06:10:14.107

> 这是正确的/需要改变什么？

测试它是否正确的最好方法是：尝试读`VarName`入`Destination`. 但请参阅伊姆兰汗的回答。

> 因为我在类中使用 onClick 方法，所以我什至在按钮代码中使用 onClick 吗？

不，您应该选择其中之一。要么使用：

1.  `onClick="methodName"`在 XML 中，`public void methodName(View v) {}`在`Source1`

2.  `implement OnClickListener`并使用`numberPicker.setOnClickListener(this);`.

# django - 如何在 Formset POST 上调试 Django MultiValueDictKeyError

> ID：13666852
> 
> 赞同：17
> 
> 时间：2012-12-02T06:02:48.543
> 
> 标签：django, django-forms

当我发布我的表单集时，我得到一个 MultiValueDictKeyError。具体来说：

```
MultiValueDictKeyError at /core/customers/1/update/documents/
"Key u'documents-0-attachment_ptr' not found in <QueryDict: {u'documents-1-last_modified_date': [u''], u'documents-1-name': [u''], u'documents-MAX_NUM_FORMS': [u''], u'documents-0-attachment_file': [u''], u'documents-INITIAL_FORMS': [u'1'], u'documents-1-document_type': [u''], u'documents-0-notes': [u''], u'documents-1-notes': [u''], u'submit': [u'Submit changes'], u'documents-0-DELETE': [u'on'], u'documents-1-attachment_file': [u''], u'documents-0-document_type': [u''], u'documents-TOTAL_FORMS': [u'2'], u'documents-0-name': [u'test'], u'documents-1-creation_date': [u''], u'documents-0-creation_date': [u'2012-12-01 23:41:48'], u'csrfmiddlewaretoken': [u'NCQ15jA7erX5dAbx20Scr3gWxgaTn3Iq', u'NCQ15jA7erX5dAbx20Scr3gWxgaTn3Iq', u'NCQ15jA7erX5dAbx20Scr3gWxgaTn3Iq'], u'documents-0-last_modified_date': [u'2012-12-01 23:41:48']}>" 
```

`documents-0-attachment_ptr`关键部分是 Django在 post 数据中寻找密钥。这很令人困惑——文档是附件的子类。所有其他帖子数据都符合预期。为什么 Django 在我的表单集中需要指针数据？

这是表单集中使用的表单：

```
class DocumentInlineForm(forms.ModelForm):  # pylint: disable=R0924
    attachment_file = forms.FileField(widget=NoDirectoryClearableFileInput)
    notes = forms.CharField(
        required=False,
        widget=forms.Textarea(attrs={'rows': 2,}), 
    )
    helper = DocumentInlineFormHelper()

    class Meta: # pylint: disable=W0232,R0903
        fields = (
            'attachment_file', 
            'creation_date',
            'document_type',
            'last_modified_date',
            'name',
            'notes',
        )
        model = Document 
```

这是文档模型：

```
"""
Handles document model definitions.
"""
from django.db import models
from eee_core.models.attachments import Attachment
from django.db.models.signals import pre_save
from datetime import datetime
from django.utils.timezone import utc

class Document(Attachment):
    """
    A document is an attachment with additional meta data.
    """
    creation_date = models.DateTimeField(
        blank=True, 
        null=True,
    )
    document_type = models.CharField(
        blank=True, 
        choices=(
            ('CONTRACT', 'Contract'),
            ('INVOICE', 'Invoice'),
            ('FACILITY', 'Facility change form'),
            ('LOA', 'Letter of authorization'),
            ('USAGE', 'Usage history document'),
            ('OTHER', 'Other'),
        ),
        default=None, 
        null=True, 
        max_length=8, 
    )
    last_modified_date = models.DateTimeField(
        blank=True, 
        null=True,
    )
    notes = models.TextField(
        blank=True,
        null=True,
    )

    class Meta(Attachment.Meta): # pylint: disable=W0232,R0903
        """
        Sets meta fields for model.
        """
        app_label = 'core'

    def __str__(self):
        return unicode(self).encode('utf-8')

    def __unicode__(self):
        return unicode(self.name)

def pre_save_callback(sender, instance, *args, **kwargs): # pylint: disable=W0613
    if not isinstance(instance, Document):
        return

    if not instance.creation_date:
        instance.creation_date = datetime.utcnow().replace(tzinfo=utc)

    instance.last_modified_date = datetime.utcnow().replace(tzinfo=utc)

pre_save.connect(pre_save_callback, dispatch_uid='document_pre_save') 
```

**附加信息：**

奇怪的是，表单集的初始帖子工作正常。只有在更新帖子上——当表单集中有初始表单时——当我收到这个错误时。当我尝试从表单集中删除表单时也会发生这种情况。

此外，该表单集是使用 django 脆表单的通用内联表单集。

**更新**

有一个使用模板代码的请求。这是简化版：

```
{% load crispy_forms_tags %}
{% load url from future %}
<form action="" method="post" enctype="multipart/form-data">
    {{ formset.management_form }}
    {% for subform in formset.forms %}
      {{ subform.id }}
      {% crispy subform %}
    {% endfor %}
    <div class="btn-toolbar">
        <input class='btn btn-primary' type="submit" name="submit" value="Submit changes" />
    </div>
</form> 
```

* * *

## 回答 #1

> 赞同：50
> 
> 时间：2014-03-18T17:13:11.037

OP 不是这种情况，但是`MultiValueDictKeyError`如果模板中缺少某些隐藏字段，您会遇到 ,。当模板中的字段不是 quick 和 dirty 而是`{{form}}`一一列出时，可能会发生这种情况：`{{form.field1}}`, `{{form.field2}}`，而忽略了必需的隐藏字段。

要将它们包含回来，请按照以下方式进行操作（对于表单集中的每个表单/表单）：

```
{% for hidden in form.hidden_fields %}
    {{ hidden }}
{% endfor %} 
```

或者

```
{% for form in formset %}    
    {% for hidden in form.hidden_fields %}
        {{ hidden }}
    {% endfor %}    
{% endfor %} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-08-07T21:33:21.380

我也用

```
{% for hidden in form.hidden_fields %}
    {{ hidden }}
{% endfor %} 
```

像这个

```
<div role="tabpanel" class="tab-pane active" id="email">
                {% csrf_token %}
                {{ eformset.management_form}}
                    <div class="panel panel-default">
                        <div class="panel-body">
                            <div id="addemail" class="btn btn-success">
                                <span class="glyphicon glyphicon-plus" > 
                                </span>
                            </div>
                            <p><br></p>
                            {% for f in eformset %}
                                {% for hidden in f.hidden_fields %}
                                    {{ hidden }}
                                {% endfor %}
                                <div class="item_email_set">
                                    <table class="table table-condensed table-bordered">
                                    <tr>
                                        {% for field in f.visible_fields %} <!---->
                                            <td>
                                                {{ field.label }}
                                            </td>
                                        {% endfor %}

                                        <td>
                                        </td>
                                    </tr>
                                    <tr>
                                        {% for field in f.visible_fields %}
                                            <td>
                                                {{field.errors.as_ul}}
                                                {{field}}
                                            </td>
                                        {% endfor %}    
                                        <td class="btncolumn">      
                                            <p style="">
                                                <a class="delete_email_set" href="#">
                                                    <div  class="btn btn-danger">
                                                        <span class="glyphicon glyphicon-remove" > 
                                                        </span>
                                                    </div>
                                                </a>
                                            </p>
                                        </td>
                                    </tr>   

                                </table>
                            </div>  
                        {% endfor %}
                    </div>
                </div>  
            </div> 
```

我解决了 MultiValueDictKeyError

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-03T01:36:23.263

`attachment_ptr`我通过添加到表单的字段列表来停止此错误。现在`DocumentInlineForm`也是：

```
class DocumentInlineForm(forms.ModelForm):  # pylint: disable=R0924
    attachment_file = forms.FileField(widget=NoDirectoryClearableFileInput)
    notes = forms.CharField(
        required=False,
        widget=forms.Textarea(attrs={'rows': 2,}), 
    )
    helper = DocumentInlineFormHelper()

    class Meta: # pylint: disable=W0232,R0903
        fields = (
            'attachment_ptr',
            'attachment_file', 
            'creation_date',
            'document_type',
            'last_modified_date',
            'name',
            'notes',
        )
        model = Document 
```

也许这是我以前不知道的事情，但是 Django 是否要求您在所有使用子类模型的形式中提供指向超类的指针？这让我很惊讶。

我想知道为什么需要这个指针字段，所以我在这里提出了一个问题来解决这个问题：[为什么我的 django formset 需要一个指针字段引用？](https://stackoverflow.com/questions/13690468/why-does-my-django-formset-need-a-pointer-field-reference).

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-03-03T10:00:16.070

这不是 OP 的答案，但我得到了同样的错误。我错误地`{{ subform.id }}`从模板中删除了，因为我无法直观地看到它并且我正在整理旧代码。在您的 HTML 中，您将获得如下内容：

```
<input name="note_set-0-id" value="34632" id="id_note_set-0-id" type="hidden"> 
```

# magento - Magento路由器如何初始化gespecific Action Controller和Action方法

> ID：13666853
> 
> 赞同：-2
> 
> 时间：2012-12-02T06:03:05.833
> 
> 标签：magento

我能够理解如何使用 collectRoutes() 函数收集路由器。然后，magento 如何尝试使用 dispatch() 方法中的 match() 函数为请求的 URL 匹配路由器。但是磁路由如何初始化具体的Action Controller和Action方法呢？controller_front_send_response_before 和 controller_front_send_response_after 事件的用途是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T13:39:49.263

哦，这很容易（如果我正确理解你的问题）。

URL 总是有一个`route/controller/action`结构。

因此，一旦 Magento 解决了`route`（你说你知道它是如何工作的）它只是使用`controller`令牌作为控制器类名的第一部分。因此，例如，如果您的控制器令牌是`mymodule`并且您的扩展前缀是`Mygroup_Myextension`，它将尝试实例化`Mygroup_Myextension_MymoduleController`. 这意味着您的文件必须位于`app/code/[community-or-local]/Mygroup/Myextension/controllers/MymoduleController.php`.

然后 Magento 将使用一个`action`令牌来调用你的类中的一个方法。因此，如果将`action`令牌设置为`myaction`Magento 将尝试调用`myactionAction()`方法。

事实上，`controller`和`action`标记都可以省略。在这种情况下，Magento 将尝试实例化`Mygroup_Myextension_IndexController`并调用`indexAction()`您的扩展的方法。

# php - 将 MySQL DATETIME 转换为 PHP UNIXTIME

> ID：13666857
> 
> 赞同：1
> 
> 时间：2012-12-02T06:03:55.857
> 
> 标签：php, datetime, unix-timestamp

将 MYSQL Datetime 转换为 PHP UNIXTIME 的最简单方法是什么？

例子：

然后将来自 mysql 的数据`2012-12-31 23:59:59`转换为 UNIXTIME。

```
$dateTime = '2012-12-31 23:59:59'; // convert this to unixtime stamp
$unixTime = strtotime($dateTime); // this not work as expected 
```

我试过`strtotime`了，但它不能正常工作。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-02T06:13:42.707

你可以这样做：

```
list($date, $time) = explode(' ', $yourMySQLDateTime);
list($year, $month, $day) = explode('-', $date);
list($hour, $minute, $second) = explode(':', $time);

$timestamp = mktime($hour, $minute, $second, $month, $day, $year); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-02T06:08:20.823

```
SELECT UNIX_TIMESTAMP(mydatefield); 
```

.

```
$dateTime = '2012-12-31 23:59:59';
$unixTime = new DateTime($dateTime);
echo $unixTime->getTimestamp(); 
```

没有测试它，所以我准备好接受投票了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-27T22:26:42.027

`strtotime`无法按预期工作的原因是您必须指定时区。如果您的时区是格林威治标准时间，那将是

```
$dateTime = '2012-12-31 23:59:59';
echo strtotime($dateTime . " GMT") 
```

# javascript - 从 Ember 车把操作向控制器传递参数

> ID：13666862
> 
> 赞同：0
> 
> 时间：2012-12-02T06:05:35.503
> 
> 标签：javascript, ember.js

我想从我的车把脚本发送额外的信息到我的控制器；这是我的代码：

```
<a {{action "resetState" data="state1" }}>reset1 </a> 
```

我无法在控制器中检索 state1；如何向后端发送额外的字符串？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-08-27T19:27:29.877

[API 说](http://emberjs.com/api/classes/Ember.Handlebars.helpers.html#method_action)你可以传入多个参数。

html和车把：

```
{{officename}} 
<button {{action "actionTest" "hello" "goodbye" officename}}>See parameters through action in the console</button> 
```

控制器：

```
actionTest: function(a, b, c){
   console.log(a);
   console.log(b);
   console.log(c);
}, 
```

[在这个 jsbin 中查看它的实际效果](http://jsbin.com/iwiruw/426/edit)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-03T13:42:29.447

您可以将一个或多个上下文对象传递给动作处理程序，方法是将它们包含在动作名称之后，如下所示：

```
{{action resetState state1}} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-07T07:54:27.643

您可能还需要指定一个目标（target="MyApp.someObject" 或 target="this"），除非您希望该操作转到您的路由器。如果您确实希望路由器获取消息，则需要向其发送定义的对象并将动态段设置为 :objectname_id 以从中获取对象，或者使用反序列化方法。

```
route: '/service/:some_dynamic_segment',

    deserialize: function(router, params) {
       //params should equal {some_dynamic_segment: 'whatever you passed in'}
    } 
```

如果您确实将操作发送到路由器以外的地方，请记住，其他事件都被视图拦截，而不是控制器，以防您想将所有这些东西放在一起。

# java-me - pubnub 推送注册表

> ID：13666863
> 
> 赞同：1
> 
> 时间：2012-12-02T06:05:45.770
> 
> 标签：java-me, midp-2.0, pubnub

我正在开发 pubnub j2me sdk 并希望在 j2me 中实现推送通知，因为没有像在 iOS 中那样自动运行应用程序的常规平台，所以套接字/数据报 pushregistry（不想要 sms pushregistry）是唯一的选择这样做任务。

但我不知道如何为 pubnub j2me 实现这个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T08:10:55.377

我建议您重新考虑 SMS 推送注册表，因为 J2ME 不存在套接字/数据报推送。

# javascript - javaScript有没有更好的方法来制作这个动画？

> ID：13666865
> 
> 赞同：0
> 
> 时间：2012-12-02T06:05:53.930
> 
> 标签：javascript, html, css, animation, settimeout

我正在尝试做的事情：
- 一个 JavaScript 动画（总共 114 帧），可以快速连续地将一张图像换成下一张。
-onmouseover 一个门的图像打开。（播放 72 帧并停留在第 72 帧）
-onmouseout 门关闭。（播放 42 帧并停留在最后一帧）
- 如果在动画完成之前鼠标从元素上移开，它将播放完 72 帧，然后播放 42 帧。
- 如果鼠标在 42 帧完成之前移回元素上，它将播放完 42 帧然后播放 72 帧。

问题：
-我是 javaScript 的菜鸟，还没有完全理解它。
- 尽管它有点工作，但它非常有问题，你不能将鼠标从元素上移开而不弄乱动画。
-另外，我不知道如何让它完成上面列出的所有事情。

这是我现在拥有的代码：

```
HTML:  
<div onmouseover="openDoor()" onmouseout="closeDoor()" id="door2"></div>
<div id="door">
<img src="images/Animation_Door/0001.png">
<img src="images/Animation_Door/0002.png">
<img src="images/Animation_Door/0003.png">
...etc... (114 frames)
</div>

CSS:
#door {
background-color:transparent;
...etc...
}

.door img{
    display: none;
}

.door img:first-child {
display: block;
}

javaScript:
function openDoor() { 
var ti, frame = 0;
var frames = document.getElementById("door").children;
var frameCount = frames.length;

for (i=0; i<72; i++) {
ti = setTimeout(function(){
frames[i % frameCount].style.display = "none";
frames[++i % frameCount].style.display = "block";
}, 50*i);
}
}

function closeDoor() { 
var ti, frame = 0;
var frames = document.getElementById("door_close").children;
var frameCount = frames.length;

for (i=0; i<42; i++) {
setTimeout(function(){
frames[i % frameCount].style.display = "none";
frames[++i % frameCount].style.display = "block";
}, 50*i);
}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T07:10:41.920

这应该会给你一些提示。

**笔记：**

*   仅使用 1 张图片 - 一扇平门（仅使用谷歌图片搜索中的一些图片作为门 - 替换为您自己的）
*   动画完全由 CSS 转换处理

**演示：http:** [//jsfiddle.net/LA6VW/3/](http://jsfiddle.net/LA6VW/3/)

**HTML**

```
<div class="doorframe">
    <div class="door"></div>
</div> 
```

**CSS**

```
.doorframe {
    border: 1px solid black;
    display: inline-block;
}
.door {
    width: 60px;
    height: 140px;
    background-color: #ccc;
    border: 1px solid #444;
    -webkit-transform-origin: left;
    background-image: url("http://www.doorasia.in/images/gallery/moulded_door01.jpg");
    background-position: -49px -7px;
    background-size: 158px 155px;
}​ 
```

**JS：**

```
var animating = false;

$('.doorframe').mouseenter(function() {
    if(animating) return;
    var door = $('.door');
    animating = true;
    openDoor(door, 5);
});
$('.doorframe').mouseleave(function() {
    if(animating) return;
    var door = $('.door');
    animating = true;
    closeDoor(door, 90);
});

function openDoor(door, angle) {
    if(angle >= 90) {
        animating = false;
        return;        
    }
    door.css('-webkit-transform', 'perspective(200px) rotateY( '+angle+'deg )');
    setTimeout(function() {
        openDoor(door, angle+=5);
    }, 50);
}

function closeDoor(door, angle) {
    if(angle < 0) {
        animating = false;
        return;        
    }
    door.css('-webkit-transform', 'perspective(200px) rotateY( '+angle+'deg )');
    setTimeout(function() {
        closeDoor(door, angle-=5);
    }, 50);
}

​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-02T07:52:09.640

2个选项：

# 2 动画 GIF

*   1 个打开的动画 gif + 1 个关闭的动画 gif
*   比精灵更快更小

缺点 - 可能会降低图像质量

# CSS精灵

*   更复杂但保持图像质量
*   比目前的情况更快

为了更好地了解两者的优缺点，请参阅： [Animated .GIF vs Spritesheet + JS/CSS](https://stackoverflow.com/questions/9139386/animated-gif-vs-spritesheet-js-css)

但我写了一个图像差异器，它将获取 2 个图像之间的差异并使其余图像保持透明

[http://www.murga-linux.com/puppy/viewtopic.php?t=81387](http://www.murga-linux.com/puppy/viewtopic.php?t=81387)

您可以在 css sprite 中使用并覆盖每个 sprite 以获得 gif 的好处和 png 的图像质量

这是一个非常通用的精灵生成器，我用 C 语言放在一起

[http://www.murga-linux.com/puppy/viewtopic.php?t=82009](http://www.murga-linux.com/puppy/viewtopic.php?t=82009)

# facebook - 找不到“Facebook 上的应用”部分

> ID：13666867
> 
> 赞同：1
> 
> 时间：2012-12-02T06:06:44.897
> 
> 标签：facebook, iframe

我正在关注本教程： [https ://developers.facebook.com/docs/appsonfacebook/tutorial/](https://developers.facebook.com/docs/appsonfacebook/tutorial/)

在“配置您的应用程序”部分下，我得到以下句子：“创建 Facebook 应用程序后，选择“Facebook 上的应用程序”部分并指定 Canvas 和 Secure Canvas URL：”

在这个阶段，我完全被卡住了。我看不到“Facebook 上的应用”部分。

这是我创建应用程序后看到的屏幕： ![在此处输入图像描述](../Images/9c146011b884a982714c4988dc08c977.png)

如果我只是个笨蛋，我很抱歉，但我不知道还能做什么！

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-04-08T02:24:56.267

答案不存在，因为缺少该部分。我已经找了一个小时了。这张图片不在这里：[https ://developers.facebook.com/docs/games/canvas/fluid-canvas#configure](https://developers.facebook.com/docs/games/canvas/fluid-canvas#configure)

# php - php聊天应用问题

> ID：13666872
> 
> 赞同：-1
> 
> 时间：2012-12-02T06:08:11.993
> 
> 标签：php, mysql, chat

我是**php/mysql 的新手**，决定实现一个简单的聊天应用程序。这里有一些具体的问题..

* * *

1) 在 facebook 中，如果我发送聊天消息，它会使用 javascript 更新聊天日志，但如果连接丢失，它也会在一段时间后出现“发送失败”标记。我的问题是如何在使用 AJAX/jquery 发送消息之前检查是否建立了与服务器的连接，以便我也可以通知用户他的消息没有传递。

* * *

2）考虑这个简化的场景..聊天室有2个插槽，即只有2个人可以共享聊天室并随时互相聊天..如果第三个用户尝试登录，他会被告知聊天室爆满。我可以将用户的登录数据存储为会话变量或类似的东西。我的问题是……如果 2 个人已经在聊天，而一个人只是关闭浏览器而没有注销或类似的事情……在这种情况下，会话变量仍然存在，应用程序仍然认为 2 人正在聊天房间.. 如果用户在浏览器窗口中未处于活动状态，如何删除会话变量并为第三个人腾出空间？

* * *

3) 聊天应用程序（如 fb chat 和 google chat）如何更新他们的聊天记录？他们是请求整个聊天记录（比如由 10 条消息组成）还是只使用 AJAX 请求当前消息？每个请求的理想持续时间是多少？我正在使用 1 秒...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T06:14:59.470

我认为大多数聊天应用程序都没有使用 ajax。ajax 的问题是服务器没有直接向客户端发送消息的机制。如果您使用 ajax，则每个客户端都必须定期检查服务器。

解决此问题的方法是[websockets](http://en.wikipedia.org/wiki/WebSocket)或长轮询。查看[棘轮](http://socketo.me/)它是 php 的 websockets。

* * *

如果你坚持使用 ajax，你可以：

1.  在提交时附加一个类到存储消息的 div 上`class='ephemeral'`。如果ajax失败只是`$('.ephemeral').append('failed')`
2.  这可以通过使用 ajax 调用不断 ping 服务器来解决，如果客户端在客户端断开连接的最后 5 秒内没有 ping 服务器。
3.  您可以只向服务器发送您收到的最新聊天消息的时间，并让它从数据库中提取，仅在该时间之后进行聊天。这需要将每个聊天保存为数据库中的单独行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-02T06:22:41.853

1）在 jquery ajax 回调函数中告诉你是否发生错误：

```
$("#form").submit(function(){
    $.post("post.php", {
        message: $('#field').val(),
    }, function(data, status){
        alert("success");
    }).error(function(){
        alert(error);
    });
}); 
```

见[http://api.jquery.com/jQuery.post/](http://api.jquery.com/jQuery.post/)

2）您可以定期轮询（如每分钟）服务器，如果用户不联系服务器，则在触发 onunload 时销毁他的会话或向服务器发送断开连接命令（不太可靠）。

3）我会向服务器发送最后一张图片的时间戳或ID，然后它会向我发回所有消息。

这取决于您希望聊天的“实时”程度。1 秒到 10 秒是理想的。

# matrix - 大型密集矩阵的乘法何时有用？

> ID：13666874
> 
> 赞同：1
> 
> 时间：2012-12-02T06:08:15.867
> 
> 标签：matrix, multiplication

是否有使用大型密集矩阵乘法的场景或应用程序？像计算机视觉这样的东西？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T06:33:30.893

除了计算机视觉之外，矩阵乘法在计算机图形学中也被大量使用。例如，当您输入问题时，如果有任何东西移动到您的屏幕上，那就是矩阵乘法。

我能想到的另一个应用是计算机和互联网安全。例如，如果您曾经进行过任何在线购物或银行业务，那么可能会在后台进行一些矩阵乘法来保护您的密码或 PIN 码。

此外，如果您曾经参加过任何运筹学课程，您可能会对矩阵乘法与线性规划技术一起使用的频率印象深刻。

这一切都在我的脑海中。希望这可以帮助。

# sql - 如何在 SQL Server 中比较日期

> ID：13666883
> 
> 赞同：2
> 
> 时间：2012-12-02T06:09:13.993
> 
> 标签：sql, sql-server, sql-server-2005, coldfusion

我有一个 HTML 表单，我要求用户选择日期，然后点击提交。提交后，我正在尝试使用 ColdFusion 获取所选日期之间的记录。我的查询如下所示：

```
SELECT  * 
FROM    user_activation_events
where   STATUS_CODE =1
AND     event_date >= #Dateformat(form.from_date, 'dd-mm-yyyy')#
AND     event_date <= #Dateformat(form.to_date, 'dd-mm-yyyy')# 
```

但这不起作用，因为日期以这种格式存储在数据库中：

```
 yyyy-mm-dd hh:mm:ss 
```

有人可以告诉我该怎么做吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-02T06:32:37.753

这里有几个问题。任何以 _date 结尾的表单字段都是表单验证条件。所以表单域需要重命名为todate和fromdate。接下来，您最好尝试清理输入。`cfqueryparam`习惯于这样做。最后但并非最不重要的一点是，介于两者之间的是更简洁的 SQL 您的查询应该看起来有点像：

```
<cfif isDate(form.fromDate) AND isDate(form.toDate)>

    <cfquery name="qryUser_Activation_Events">
    SELECT * 
    FROM   user_activation_events
    WHERE  STATUS_CODE =1
    AND    event_date BETWEEN <cfqueryparam cfsqltype="CF_SQL_date" value="#form.fromDate#">
        AND DATEADD(d, 1, <cfqueryparam cfsqltype="CF_SQL_date" value="#form.toDate#">)
    ORDER BY ...
    </cfquery>

<cfelse>  
    <!--- Error handling goes here --->
</cfif> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-03T15:59:26.557

正如评论中所建议的，一种更灵活的过滤日期的方法是使用这种方法。无论列是仅包含日期还是包含日期和时间，它都可以工作，并且不会干扰数据库对索引的使用（因为使用日期函数可能）。

```
 WHERE  TheDateColumn >= TheStartDateAtMidnight         
    AND    TheDateColumn < TheDayAfterEndDateAtMidnight 
```

例如，如果您想返回日期为 2012 年 12 月 3 日到 12 月 4 日之间任何时间的所有**记录**：

```
<!--- omitted date validation for brevity ---> 
<cfset form.from_date = "12/03/2012">
<cfset form.to_date   = "12/04/2012">

<cfquery name="getEvents" datasource="#dsn#">
    SELECT  event_date
    FROM    user_activation_events 
    WHERE   event_date >= <cfqueryparam value="#form.from_date#" cfsqltype="cf_sql_date">
    AND     event_date < <cfqueryparam value="#dateAdd('d', 1, form.to_date)#" cfsqltype="cf_sql_date">
    AND     status_code = 1 
</cfquery> 
```

**样本数据**

```
 2012-12-02 23:59:59.000
    2012-12-03 00:00:00.000
    2012-12-03 07:34:18.000
    2012-12-04 13:34:18.000
    2012-12-04 23:59:59.000
    2012-12-05 00:00:00.000 
```

**结果：**

```
 1 | 2012-12-03 00:00:00.0  
    2 | 2012-12-03 07:34:18.0  
    3 | 2012-12-04 13:34:18.0  
    4 | 2012-12-04 23:59:59.0 
```

## 日期注意事项：

> 但这不起作用，因为日期以这种格式存储在数据库中：yyyy-mm-dd hh:mm:ss

它真的与格式无关。日期时间值的存储方式与您在屏幕上看到的方式不同。这`yyyy-mm-dd hh:mm:ss`是一个用户友好的字符串，由您使用的任何 IDE 提供，并且可以变化。通常，`datetime`值实际上存储为数字。该数字通常表示与某个[基准日期](http://msdn.microsoft.com/en-US/library/ms187819%28v=SQL.90%29.aspx)或纪元的偏移量。在 CF/java 中，它是自[unix epoch](http://en.wikipedia.org/wiki/Unix_time)以来的毫秒数。因此，虽然您的 IDE 可能会向您显示一个人类友好的日期字符串，例如`yyyy-mm-dd hh:mm:ss`，但在内部它只是一个数字。

将日期查询视为任何数字比较。如果查询没有返回您期望的所有记录，通常是因为您传入的数字之一太大或太小。

```
 WHERE Col >= 1354510800000   // java.util.Date => {ts '2012-12-03 00:00:00'}
 AND   Col <= 1354683600000   // java.util.Date => {ts '2012-12-05 00:00:00'} 
```

# python - 一组浮点数，将数字附加到 sets 中的空列表。Python

> ID：13666887
> 
> 赞同：1
> 
> 时间：2012-12-02T06:10:43.960
> 
> 标签：python, list, function, append, max

一组数字

```
n_set = [1.0,3.2,4.5,8.2,1.3,2.2,5.6,9.8,2.4,5.5,6.7] 
```

所以我试图构建一个函数，它接受一组数字并从数字集中创建一个列表列表。我试图让每个列表都有一个来自原始集合的数字子集，这些数字会增加直到达到最大值

```
organized_set = [[1.0,3.2,4.5,8.2],[1.3,2.2,5.6,9.8],[2.4,5.5,6.7]] 
```

我在想一些事情

```
for i,k in zip(range(0,len(n_set)),n_set):
    set = []
    d = dict(zip(i,k))
    d2 = dict(zip(k,i))
    if d[i] < d[d2[i]+1]:
        set.append(k) 
```

这没有意义。我正在研究一个更复杂的功能，但这是让我失望的一部分。任何帮助将不胜感激

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-02T06:17:04.830

尝试类似这种迭代方法：

```
n_set = [1.0,3.2,4.5,8.2,1.3,2.2,5.6,9.8,2.4,5.5,6.7]

prev = None
result = []
current = []
for x in n_set:
    if prev is not None and x < prev:
        # Next element is smaller than previous element.
        # The current group is finished.
        result.append(current)

        # Start a new group.
        current = [x]
    else:
        # Add the element to the current group.
        current.append(x)

    # Remember the value of the current element.
    prev = x

# Append the last group to the result.
result.append(current)

print result 
```

结果：

```
[[1.0, 3.2, 4.5, 8.2], [1.3, 2.2, 5.6, 9.8], [2.4, 5.5, 6.7]] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T18:09:56.697

```
 python 3.2

     temp=[]
     res=[]

     for i in n:
          temp.append(i)
          if len(temp)>1 and i<temp[-2]:
                  res.append(temp[:-1])
                  temp=[i]
     res.append(temp)
     print(res) 
```

# c++ - 段错误代码的可能原因是什么

> ID：13666889
> 
> 赞同：1
> 
> 时间：2012-12-02T06:11:25.267
> 
> 标签：c++, linux, memory, segmentation-fault

我最近遇到一个段错误问题，在调用 delete 方法时被命中。我已经深入检查了代码，并消除了删除空指针、多次删除或越界（分配的内存足够大，可以容纳之后写入的内容）的可能性。这个问题可以重现，每次它在同一个地方出现段错误。

我不知道可能导致此问题的原因。我想知道是否有可能从我得到的错误代码中得到一些线索，例如：- segfault at xxxxxxxxxxxxxx rip xxxxxxxxxxxxxx rsp xxxxxxxxxxxxxx error 4

我在网上搜索了很长时间，只从 stackoverflow 获得有用的以下信息：-

“错误代码只是页面错误的架构错误代码，似乎是特定于架构的。它们通常记录在内核源代码的 arch/*/mm/fault.c 中。我的 Linux/arch/i386/mm/ 副本fault.c 对 error_code 的定义如下：

```
bit 0 == 0 means no page found, 1 means protection fault
bit 1 == 0 means read, 1 means write
bit 2 == 0 means kernel, 1 means user-mode 
```

"

这是我的问题：- 错误代码 4 的可能原因是什么（我的平台是 RHEL5 64 位，x86_64）？有没有办法从错误代码中判断可能的原因？

任何其他有关如何诊断此类问题的建议也值得赞赏！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T06:23:31.850

鉴于`arch/i386/mm/fault.c`您提供的文档，错误代码 4 对应于“未找到页面的用户模式读取”。代码 4 = 100 的二进制表示，其中第 2 位是最高有效位（最左边）。

这与在 a 上接收 a 的最常见原因相吻合`SIGSEGV`：`delete`a double-free（尝试释放已被释放的指针）。但是，任何堆损坏（例如，通过双重释放其他东西或其他地方的缓冲区溢出/越界错误）都可能是原因。

`valgrind`尝试在内存分配例程的调试版本下运行代码（使用调试符号编译）或使用调试版本运行（`MALLOC_CHECK_`在运行二进制文件之前在环境中设置为 1 或 2），两种不同的方法都试图捕获这些错误并报告制作完成后立即发送给您。

`valgrind`它的内存模型是详尽无遗的，并且在打开适当数量的检查后，*几乎可以肯定*地找到问题的根源。

`MALLOC_CHECK_`是 glibc 内部的，并且与大多数其他不是的内存调试工具一样`valgrind`，它只能捕获某些类型的相对常见的错误并在某些情况下检测堆损坏。还有许多其他工具`MALLOC_CHECK_`（例如 Electric Fence），但前者已经内置到您的 C 库中，而其他工具充其量要求它们的库（主要包含`malloc`和`free`覆盖）是动态的在 C 库之前使用`LD_PRELOAD`.

请注意，`delete`在空指针上使用 C++ 在技术上不是问题，因此您可以从清单中划掉那个（我猜您可能已经拥有，通过修改代码以在删除之前显式检查）。

更多细节：

与“未找到页面的用户模式读取”相对应的错误代码意味着指向内存的指针（一些 32/64 位数字指代虚拟地址空间中的某处）被取消引用（即，一些代码试图读取指针持有的虚拟内存地址处的值），但内核页表表明虚拟地址指的是[内存]页面，该页面要么未映射到您的进程中，要么已从您的进程中取消映射，因为该指针有效. 除了想象这种情况发生的明显方式之外，它还可能由于堆损坏（其中包含幕后的各种簿记信息）而间接发生：例如，可以对传递给的值进行指针运算`delete`使用堆内部的另一个较早损坏的指针，然后导致指针中的无效值，只是等待代码尝试使用它。

换句话说，内核错误代码在常见的调试场景中对你帮助不大。

我假设你已经运行了你的程序，`gdb`并且只是在崩溃前几行设置了一个断点，以观察被删除的指针的值和周围状态的其余部分。

编辑：

`-g2`当我明显的意思时删除了错误的参考`MALLOC_CHECK_`。为您添加了进一步的诊断问题和解释。

# php - php表单不起作用

> ID：13666897
> 
> 赞同：-1
> 
> 时间：2012-12-02T06:12:32.283
> 
> 标签：php

我正在尝试使用具有特定行 ID 的表单发送两个参数（复选框中的文本框和值）

```
 while($row = mysql_fetch_array($result))
   {
       echo "<tr>";
      echo "<td>" . $row['id'] . "</td>";
      echo "<td>" . $row['datef'] . "</td>";
      echo "<td>" . $row['name'] . "</td>";
    $idw=$row['id'];
      }
      echo "</table>";

        echo " </br>";

      echo "<form action=\"checked.php\" method=\"POST\"  enctype=\"multipart/form- data\" >";

       echo "<input type=\"text\" name=\"ids\" value=\"$idw\" ><br>";

        echo "<input type=\"checkbox\" name=\"check\" value=\"0\" ><br>";

       echo "<p><input name=\"submit\" type=\"submit\" value=\"submit\"  /></p>";
          echo "</form>"; 
```

检查.php：

```
 $idw=$_GET['ids'];
  $check=$_GET['check'];

  echo $idw;

   echo $check;

    if ($check==1){
   $sql="UPDATE image_try SET  checked=1 WHERE id=$idw";

   $q=mysql_query($sql);} 
```

check.php 没有收到表单参数的问题

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T06:14:58.393

你的表单方法是`POST`你必须使用`$_POST`而不是`$_GET`在 php

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-02T06:16:17.410

您的表单操作设置为发布，并且您的 checked.php 正在寻找 GET 值。将您的表单操作更改为 GET 或将 check.php 中的变量更改为 $_POST

# php - 从 Json 解码时的 PHP 未定义索引

> ID：13666899
> 
> 赞同：7
> 
> 时间：2012-12-02T06:12:48.453
> 
> 标签：php, json, indexing, undefined, decode

我正在尝试 Json 解码某些东西并获得我想要的值。但我得到 PHP 未定义的索引错误。这是我的代码。

```
<?php
$json = '[{"totalGamesPlayed":25,"championId":0}]';
$data = json_decode($json,true); 

$games = $data['totalGamesPlayed'];
echo $games;
?> 
```

问题是“[”“]”弄乱了我的代码......我正在使用 API 来获取一些值。我得到的是：[http](http://pastebin.com/XrqkAbJf) : //pastebin.com/XrqkAbJf 我需要总GamesPlayed，除了零（82,106 和 24）之外的冠军 ID 以及这些 ID 的 TOTAL_SESSIONS_WON 和 TOTAL_SESSIONS_LOST ......首先，让我们看看如何我绕过了“[”和“]”符号，然后事情可能会更容易..提前谢谢你！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-02T06:15:55.217

像这样访问您的代码

```
$games = $data[0]['totalGamesPlayed']; 
```

获取其他信息的代码

```
<?php

$json = 'PUT YOUR EXAMPLE JSON HERE';
$data = json_decode($json,true); 

$seasonWon = 0;
$seasonPlayed = 0;
foreach($data as $stats) {
    if($stats['championId'] != 0) {
        echo '<br><br>Total Games Played:'. $stats['totalGamesPlayed'];    
        echo '<br>champion Ids :'.$stats['championId'];
        foreach($stats['stats'] as $stat) {
            if($stat['statType'] == 'TOTAL_SESSIONS_WON') {
                $seasonWon = $stat['value'];
                echo '<br>TOTAL_SESSIONS_WON :'.$seasonWon;
            }

            if($stat['statType'] == 'TOTAL_SESSIONS_LOST')
            echo '<br>TOTAL_SESSIONS_LOST :'.$stat['value'];

            if($stat['statType'] == 'TOTAL_SESSIONS_PLAYED') {                
                $seasonPlayed = $stat['value'];
                echo '<br>TOTAL_SESSIONS_PLAYED :'.$seasonPlayed;                
            }
        }
        echo '<br>Games Ratio(TOTAL_SESSIONS_WON / TOTAL_SESSIONS_PLAYED): ('. $seasonWon.'/'.$seasonPlayed.'):'. ($seasonWon/$seasonPlayed);
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-02T08:16:09.697

如果遇到像您这样的问题，可以方便地查看您的解码数据的真实情况。所以与其盲目阅读，不如用`print_r()`或`var_dump()`看。`print_r($data);`会输出：

```
Array
(
    [0] => Array
        (
            [totalGamesPlayed] => 25
            [championId] => 0
        )
) 
```

因此正确的“路径”是：

```
$games = $data[0]['totalGamesPlayed']; 
```

之所以如此，是因为您的 JSON 对象是**数组**（JSON 的第一个和最后一个字符是`[`and `]`），对象作为数组节点（`{`/ `}`），而您的实际值是该对象的成员。您可以通过检查为什么首先以这种方式构造 JSON 来**解决**这个问题（也许代码允许更多的数组元素），或者“提取”对象以摆脱被迫`[0]`在引用中使用：

```
$data = $data[0];
$games = $data['totalGamesPlayed']; 
```

并`print_r($data)`会给出：

```
Array
(
    [totalGamesPlayed] => 25
    [championId] => 0
) 
```

并且您以前的代码将开始工作：

```
$games = $data['totalGamesPlayed'];
echo $games; 
```

给

```
25 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-02T06:17:14.193

你试试这个：

```
$games = $data[0]['totalGamesPlayed']; 
```

问题是你的 json 是一个数组，它的第一个元素是一个对象

# c# - rdlc 报告中每页单独记录的总和和所有页面的总和

> ID：13666900
> 
> 赞同：0
> 
> 时间：2012-12-02T06:13:04.270
> 
> 标签：c#, reporting-services, reporting, rdlc

我有一个使用 RDLC (Microsoft Report) 构建的报告。

我在这么多页面中有这么多记录，我想分别显示每页的列总和以及来自前一页的记录总和。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T11:23:32.487

我能看到的唯一方法是通过查询中的公式按一组行数对结果进行分组，然后在该组上强制分页。

将此字段添加到您的 SQL 中：`CEIL(rownum/25) as page_group`

然后在您的查询中，您需要对每个组中的行求和，并对所有前面的行求和。

`=SUM(column1)`将是您的标准 sum 函数，但请尝试`=SUM(IIf(page_group<=page_group, column1, 0), my_dataset)`所有前面的组。

祝你好运。

# c - 为什么文件指针为空？

> ID：13666903
> 
> 赞同：2
> 
> 时间：2012-12-02T06:13:46.537
> 
> 标签：c

在以下程序中，file_ptr 为 NULL，但它正在正确初始化。为什么？

```
#include <stdio.h>
#include <stdlib.h>

void Fopen(const char * restrict filePath, const char * restrict mode, FILE * restrict filePtr);

int main(int argc, char ** argv)
{
    FILE * file_ptr = NULL;
    Fopen("dummy.dat", "r", file_ptr);
    printf("File pointer is %p\n", file_ptr);

    exit(0);
}

void Fopen(const char * restrict filePath, const char * restrict mode, FILE * restrict filePtr)
{
    if ( (filePtr = fopen(filePath, mode)) != NULL)
            printf("file pointer is %p\n", filePtr);
} 
```

在命令行上：

```
[jim@cola c++]$ ./readFile
file pointer is 0x740010
File pointer is (nil) 
```

唯一的解释是 FILE * 的副本正在传递给 Fopen。我如何通过 ref 传递指针？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-02T06:15:56.290

您的`Fopen`函数会更改其本地的值，`filePtr`然后将该值丢弃。代码中的任何内容都不能更改`file_ptr`调用者中的值。您只需将 NULL 传递给函数。

你要这个：

```
FILE* Fopen(const char * restrict filePath, const char * restrict mode)
{
    FILE* filePtr;
    if ( (filePtr = fopen(filePath, mode)) != NULL)
            printf("file pointer is %p\n", filePtr);
    return filePtr;
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-02T06:17:29.363

```
void Fopen(const char * restrict filePath, const char * restrict mode, FILE * restrict filePtr) 
```

您在第三个参数中传递指向 FILE 的指针，并更改函数中的 THE POINTER。你不能这样做，伙计。您必须改为传递此指针的地址。所以它看起来像（不要忘记改变身体）：

```
void Fopen(const char * restrict filePath, const char * restrict mode, FILE ** restrict filePtr) 
```

并致电：

```
Fopen("dummy.dat", "r", &file_ptr); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-02T06:16:37.840

在 C 函数中，参数是按值传递的。

```
FILE * file_ptr = NULL;
Fopen("dummy.dat", "r", file_ptr); 
```

您只传递`file_ptr`to的值`Fopen`。要修改`file_ptr`对象，您必须将指针传递给它。这意味着`Fopen`函数将有一个`FILE **`参数。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-02T07:07:50.017

如果你使用c++，你可以写

`const char * restrict filePath`作为

`const char * & filePath`

PS：关键字**restrict**在C++中不起作用

# css - 你如何将一个标题从另一个标题移动 50 像素？

> ID：13666904
> 
> 赞同：1
> 
> 时间：2012-12-02T06:13:53.620
> 
> 标签：css, html, position

我知道你可以让我们说一个距左侧 50 像素的标题。但是你能从另一个标题做 50 像素的东西吗？不只是从边缘？就像标题 2 需要距离标题 1 50 像素一样。我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T06:16:06.500

使它们都内联块并在第一个块上添加 50px 边距。

```
<style>h1, h2 { display: inline-block; margin-right: 50px; }</style>
<h1>my thing</h1>
<h2>my other thing<h2> 
```

请参阅此示例：http: [//jsfiddle.net/bpR7H/](http://jsfiddle.net/bpR7H/)

**注意：**您需要避免`position: absolute`这样做才能正常工作，因为绝对定位的元素不会影响其他元素的位置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-02T06:17:46.523

[http://jsfiddle.net/w9FHw/](http://jsfiddle.net/w9FHw/)

类似的东西？

```
#rightheading {
    position: relative;
    left: 50px
} 
```

# c# - 当我通过 ajax 更改 asp.net textvalue 时读取代码隐藏中的 Asp.net TextBox 值时，值为空

> ID：13666908
> 
> 赞同：0
> 
> 时间：2012-12-02T06:14:52.367
> 
> 标签：c#, jquery, asp.net, ajax, visual-studio-2010

当我通过 ajax 更改 asp.net textvalue 时读取代码隐藏中的 Asp.net TextBox 值时，值为空

```
<script type="text/javascript">
        $(function() {
            $('#=<%txtDatePicker.ClientID%>').datepicker();
                         });
</script> 
```

...

```
 <Telerik:RadTextBox ID="txtDatePicker" RunAt="Server" > </Telerik:RadTextBox> 
```

datepicker 一个 ajax 组件，允许用户从日历中选择日期。当用户选择您的日期时，它会将其粘贴到 txtdatepicker 文本上。txtdatepicker 一个 asp.net 文本框组件。

所以当我想在代码隐藏中读取 txtdatepicker.text 时，结果是空的。为什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T06:33:33.750

您的代码有错误，请尝试以下操作，这可以帮助您。

```
<script type="text/javascript">
    $(function() {
        $("#<%=txtDatePicker.ClientID%>").datepicker();
        });
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-02T06:53:48.450

试试这个，即删除 '=' 和 '#='

```
<script type="text/javascript">
    $(function() {
        $("#<%txtDatePicker.ClientID%>").datepicker();
        });
</script> 
```

这是默认方法

```
<script>
$(function() {
    $( "#datepicker" ).datepicker();
});
</script> 
```

见这个网站[http://jqueryui.com/datepicker/](http://jqueryui.com/datepicker/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-02T12:33:12.743

如果您设置服务器端 TextBox 的属性 ClientIDMode="Static" 然后使用 datepicker 作为默认值

```
$(function() {
$( "#YourTextBoxID" ).datepicker(); 
```

});

# python - 调试 GUI 应用程序（尤其是在 Python 中）的最佳方式？

> ID：13666911
> 
> 赞同：1
> 
> 时间：2012-12-02T06:15:00.397
> 
> 标签：python, debugging, user-interface

所以我正在尝试调试这个我没有编写的具有GUI（[特别是Kivy](http://kivy.org/ "基维") ）的源代码（在Python中） ，并且我试图弄清楚当我点击某些东西时触发了什么代码/事件. 我尝试在我认为将要触发的地方设置断点，有时我发现我错了，而且断点似乎从来没有遇到过我想要的。

任何人都对 GUI 调试有任何建议，并弄清楚某些事件触发了什么，尤其是在 Python 中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T06:35:35.753

如何将打印语句放在打印函数名称的不同函数（或事件处理程序）中，然后是函数接收到的参数？当您使用 GUI 时，这应该很清楚发生了什么。我通常包装`print`一个用于此详细输出的函数，例如：

```
def verbose_print(message, *args):
    if VERBOSE:
        print message.format(*args) 
```

所以现在，在我的各种功能中，我可以使用这样的功能：

```
def do_something(param1, param2):
    verbose_print('do_something({}, {})', param1, param2)

    # Do some stuff... 
```

`VERBOSE`此外，您现在可以通过将模块全局常量设置为`True`或`False`删除所有打印语句来打开和关闭详细输出。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-01-18T21:16:39.213

有一个著名的基于 CLI 的笑话程序叫做[xcowsay](https://github.com/nickg/xcowsay)。它显示一个弹出窗口（一个 GUI 窗口） - 带有消息的奶牛图片。您需要先在您的 PC 上安装 xcowsay，它非常小。

而不是`print`然后在终端中搜索消息，使用这个 oneliner

```
# Example
import subprocess; subprocess.Popen(['xcowsay', 'your message here', '-t 1'])

# General syntax
import subprocess; subprocess.Popen(['xcowsay', string1, string2, string3 ..., '-t 1'])

# For printing objects, cast them to str first
# '-t 1' is for displaying the popup for one second, you can change it. 
```

为什么我使用它：

1.  简单而简短——一行
2.  适用于大多数系统 - Linux、Mac 和 Windows
3.  异步运行 - 不会干扰您的应用程序的执行
4.  支持多行字符串
5.  Unicode 支持 - 表情符号可以使用

我在开始使用 Python 时发现了这一点，但并不知道`pdb`等等。事实上，这个程序可以**GUI**化你的整个 CLI。

[截屏](https://i.stack.imgur.com/un8j7.png)

# ssl - 用于私有域注册的 SSL 证书的 whois 验证

> ID：13666919
> 
> 赞同：0
> 
> 时间：2012-12-02T06:16:01.303
> 
> 标签：ssl, dns, ssl-certificate, domain-name

我在 godaddy 注册了一个域，我还选择了获得域隐私，这样人们就不会通过 whois 查询知道我住在哪里。

当我读到如何为该域获取 SSL EV 证书时，它说他们需要通过对其进行 whois 并匹配详细信息来验证该网站是我自己的。

是否可以获得具有私有域详细信息的 SSL 证书？没有成立公司就可以拿到证书吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T10:46:25.193

EV 会验证公司信息，所以没有公司的 EV 是没有意义的。您可能拥有的是经过域验证的证书。后者可以在没有 whois 的情况下进行验证（通过电子邮件等）。

# sql - 如何在 SQL 中进行数据重组 - 从紧凑到扩展

> ID：13666922
> 
> 赞同：0
> 
> 时间：2012-12-02T06:16:21.163
> 
> 标签：sql, sql-server, sql-server-2008, tsql, plsql

我有一个如下所示的订单表，其中与每个组关联的所有订单都列在同一个单元格中，但用逗号“，”分隔。现在我想扩展订单，以便每个组的每个订单都放在不同的行中。（结果表低于原始表）。

你能告诉我如何在 SQL 中实现这一点吗？

非常感谢！

这是原始的紧凑表：

```
Group   Order
  1      ,a,b
  2      c,d,e
  3      f,g
  4      h 
```

这是最终的扩展表：

```
Group  Order
  1     NULL
  1      a
  1      b
  2      c
  2      d
  2      e
  3      f
  3      g
  4      h 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T03:08:37.287

你必须使用正则表达式，试试这个：

```
with temp  as (
     select 1 id, ',a,b' str from dual
     union all
     select 2, 'c,d,e' from dual
     union all
     select 3, 'f,g' from dual
     union all
     select 4, 'h' from dual    
)

SELECT distinct id, regexp_substr(str, '[^,]+', 1, level) str
FROM temp CONNECT BY instr(str, ',', 1, level - 1) > 0
order by 1, 2 nulls first 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-02T07:46:54.630

你可以做这样的事情，它非常适合我：

```
DECLARE @name_2 VARCHAR(MAX), @start INT, @flag bit, @id int ,@name nvarchar(max)

DECLARE c CURSOR LOCAL STATIC READ_ONLY FORWARD_ONLY
FOR SELECT name,id FROM table_1;

open c;
FETCH NEXT FROM c INTO @name,@id;

WHILE @@FETCH_STATUS = 0
 BEGIN
   SET @flag = 1 
   SET @start = 0
   WHILE @start < LEN(@name) 
    BEGIN
      SET @start = @start + 1
      SET @name_2 =  SUBSTRING(@name, @start, 1) 
      if (@flag = 1 and @name_2 = ',')
          SET @name_2 = null 
      if(@name_2 <> ',' OR @name_2 is null)
        BEGIN   
           INSERT into dbo.Table_2 (id,name)
           values (@id,@name_2) 
        END
      SET @flag = 0   
    END
  FETCH NEXT FROM c INTO @name,@id;
END

CLOSE c;
DEALLOCATE c; 
```

# php - Googlebot 无法解释的 32 个字符的十六进制附加字符串，每天导致超过 20,000 404 个错误

> ID：13666930
> 
> 赞同：6
> 
> 时间：2012-12-02T06:17:14.297
> 
> 标签：php, apache, codeigniter, googlebot

我有一个非常有趣的问题，我无法解释。

每隔 2 到 6 秒 googlebot（我已经查找了 googlebots IP，它是真实的 [使用主机*IP* ]）正在请求我们网站上不存在的页面（运行：php、apache、mongodb）（404s）。**没有其他机器人或人类曾经请求过这样的页面！只是谷歌机器人。**

每个请求看起来像这样：

> /2de4f853c2853807b2e72387aa8928a4
> 
> /ea5700c343d1a9798bc554af7c1a330e
> 
> /e5aafa102d54ba7517703336846cc019

我们的代码不使用任何 32 个字符的字符串，并且没有类似我们网站内部或外部的链接。我们使用 codeigniter，所以起初我认为它是默认的 session_id，我检查过，它不是。

有没有人见过这样的事情？我们的网站在某些页面上使用了history.push，这会导致它吗？只是一个想法。

示例请求的原始数据：

```
array (
  'date' => '2012-12-01',
  'time' => '10:01:33 PM',
  'additional_data' => 
    array (
      'server_vars' => 
        array (
          'REDIRECT_STATUS' => '200',
          'HTTP_HOST' => 'www.xxxxxxx.com',
          'HTTP_ACCEPT' => '*/*',
          'HTTP_ACCEPT_ENCODING' => 'gzip,deflate',
          'HTTP_FROM' => 'googlebot(at)googlebot.com',
          'HTTP_USER_AGENT' => 'Mozilla/5.0 (compatible; Googlebot/2.1; +http://www.google.com/bot.html)',
          'HTTP_X_FORWARDED_FOR' => 'xxxxxxx',
          'HTTP_X_FORWARDED_PORT' => '80',
          'HTTP_X_FORWARDED_PROTO' => 'http',
          'HTTP_CONNECTION' => 'keep-alive',
          'PATH' => '/sbin:/usr/sbin:/bin:/usr/bin:/home/ec2-user/ec2/bin',
          'SERVER_SIGNATURE' => '<address>Apache/2.2.22 (Amazon) Server at www.xxxxxxx.com Port 80</address>
',
          'SERVER_SOFTWARE' => 'Apache/2.2.22 (Amazon)',
          'SERVER_NAME' => 'www.xxxxxxx.com',
          'SERVER_ADDR' => 'xxxxxxxxxx',
          'SERVER_PORT' => '80',
          'REMOTE_ADDR' => '10.171.147.114',
          'REMOTE_PORT' => '40759',
          'REDIRECT_URL' => '/e5aafa102d54ba7517703336846cc019',
          'GATEWAY_INTERFACE' => 'CGI/1.1',
          'SERVER_PROTOCOL' => 'HTTP/1.1',
          'REQUEST_METHOD' => 'GET',
          'QUERY_STRING' => '',
          'REQUEST_URI' => '/e5aafa102d54ba7517703336846cc019',
          'SCRIPT_NAME' => '/index.php',
          'PATH_INFO' => '/e5aafa102d54ba7517703336846cc019',
          'PATH_TRANSLATED' => 'redirect:/index.php/e5aafa102d54ba7517703336846cc019',
          'PHP_SELF' => '/index.php/e5aafa102d54ba7517703336846cc019',
          'REQUEST_TIME' => 1354428093,
       ),
    'codeigiter_session' => 
      array (
        'session_id' => 'c795e40a279f58d9fbbf7f5501a26787',
        'ip_address' => '10.171.147.114',
        'user_agent' => 'Mozilla/5.0 (compatible; Googlebot/2.1; +http://www.google.com/bot.html)',
        'last_activity' => 1354428093,
        'user_data' => '',
    ),
  ),
) 
```

我还能收集什么来解决这个问题。它很奇怪。

* * *

**更新：** 流量来自 2 个主要 IP 地址。**10.171.147.114** & **10.161.46.102**

我查过这些，它们不是 GoogleBot。

我从一个 IP 查找站点获得了此信息。

> 请记住，IP 地址范围 10.0.0.0 – 10.255.255.255、172.16.0.0 – 172.31.255.255、192.168.0.0 – 192.168.255.255 和 224.0.0.0 – 239.255.255.255 是保留 IP 地址供私人互联网使用和查找不返回任何结果。

我应该/可以对这些请求做些什么？这些请求的意义何在？如果这是一种 DOS 攻击，他们在这方面做得非常糟糕。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T04:11:42.580

为了回答这个问题，这个问题是由 aws load blancer 的运行状况检查造成的。出于某种原因，aws 正在使用 googlebot user_agent 在我们的服务器上执行它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-02T15:06:17.650

在这里要做的第一件事是收集尽可能多的 IP 并找到 2 个问题的答案： 1\. 你可以按网络对它们进行分组，比如 66.249.66.XXX 或 66.249.XXX.XXX 吗？如果不能 - 这不是 Gbot 2。这些 IP 的国家/地区是什么？如果你有几十个 - 这不是 Gbot。

我认为，这似乎不是谷歌机器人，因为他们不倾向于监控没有这种频率的站点地图的站点（除了一些特殊情况，如新闻站点）。

参考

[http://support.google.com/webmasters/bin/answer.py?hl=en&answer=80553](http://support.google.com/webmasters/bin/answer.py?hl=en&answer=80553)

学习如何识别 Gbot。尝试一些在线 google bot ip 列表。它们可能已经过时，但仍为您提供有关地址集群的信息。更重要的是，google bot ips 很容易按网络分组。

你不能信任 HTTP_USER_AGENT，因为第三方很容易伪造它。

我会说您的网站受到来自某些网络的单独攻击。

我怀疑他们是否试图通过发送此哈希来猜测 PHP_SESSID。PHP_SESSID 出现在 URL 中的唯一原因是您已将 PHP 配置为不将其存储在 cookie 中（我认为您没有）。在 cookie 中发送 session_id 更容易、更自然，即使在攻击时也是如此。

检查他们发送的 POST 参数和 COOKIES。这可能会为您提供更多信息。

# android - android相机点击固定频率

> ID：13666934
> 
> 赞同：1
> 
> 时间：2012-12-02T06:17:53.870
> 
> 标签：android, multithreading, buttonclick

我正在编写一个应用程序，它应该具有以下用例：用户单击“开始！” 按钮，应用程序开始每 1 分钟单击一次图片（在内部使用 CameraPreview 类），并将按钮文本更改为“完成！”。

当用户按下相同的按钮（但带有新的按钮文本“完成！”）时，应用程序应该停止。

当用户单击“开始！”时，我已经能够编写每分钟单击一次图片的代码！按钮。但是，一旦图像捕获开始，按钮就会冻结。

如何以按钮不会冻结的方式运行我的每 1 分钟图像捕获逻辑？围绕它的最佳实践是什么？谢谢！

这是 OnClick() 的代码：

```
 @Override
public void onClick(View v) {
    Button button = (Button)v;
    String buttonText = button.getText().toString();

    if(buttonText.equals(Constant.trainButtonText)) {
        Log.i(TAG, "Robot Training started...");

        while(true) {
            surfaceView.capture(new Camera.PictureCallback() {
                public void onPictureTaken(byte[] data, Camera camera) {
                    Log.v("Still", "Image data received from camera");

                    String[] params = new String[] {
                            Constant.Server, // Server URL
                            Long.toString(new Date().getTime()), // Image Timestamp
                            Constant.userId // Unique user ID for each customer
                    };
                    new UploadImageToWebServiceTask(data).execute(params);
                    camera.startPreview();
                }
            });
            try {
                // Capture every 1 minute until 'training done!' is not clicked
                Thread.sleep(1000);
            } catch (InterruptedException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
        }

    }
    else if(buttonText.equals(Constant.doneTrainingButtonText)) {
        Log.i(TAG, "Robot Training completed...");
        button.setText(Constant.trainButtonText);
        button.clearFocus();
    }
} 
```

在代码中使用了相同的按钮 - 只是我们根据按钮文本决定要做什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-02T06:35:04.347

不要阻塞 UI 线程，切换到 Runnable。此外，您每秒都在拍照：`1000`是一秒，`60000`是一分钟。

首先创建一个新的字段变量：

```
public class MainActivity extends Activity {
    Runnable takePictures = new Runnable() {
        @Override
        public void run() {
            // I'll trust that this code works
            surfaceView.capture(new Camera.PictureCallback() {
                public void onPictureTaken(byte[] data, Camera camera) {
                    Log.v("Still", "Image data received from camera");

                    String[] params = new String[] {
                            Constant.skynetNNServer, // Server URL
                            Long.toString(new Date().getTime()), // Image Timestamp
                            Constant.userId // Unique user ID for each customer
                    };
                    new UploadImageToCloudTask(data).execute(params);
                    camera.startPreview();
                }
            });

            // Call this runnable again in 60 seconds (60000 milliseconds) 
            surfaceView.postDelayed(this, 60000);
        }
    };
    // Rest of your code 
```

然后改变你的`onClick`方法：

```
@Override
public void onClick(View v) {
    Button button = (Button)v;
    String buttonText = button.getText().toString();

    if(buttonText.equals(Constant.trainButtonText)) {
        Log.i(TAG, "Robot Training started...");
        surfaceView.post(takePictures);
    }
    else if(buttonText.equals(Constant.doneTrainingButtonText)) {
        Log.i(TAG, "Robot Training completed...");
        surfaceView.removeCallbacks(takePictures);
        button.setText(Constant.trainButtonText);
        button.clearFocus();
    }
} 
```

# python - 在哪里学习 Python 的 tkinter？

> ID：13666938
> 
> 赞同：9
> 
> 时间：2012-12-02T06:19:15.647
> 
> 标签：python, tkinter

我正在尝试为 Python 附带的 tkinter 模块找到一本好的、免费且最新的*在线*教程/书籍，以便我可以学习它。有谁知道有什么好的吗？提前谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-02T06:32:48.097

与往常一样，选择`python`模块教程的最佳方式是查看[python wiki](http://wiki.python.org/moin/)。

那里有很多信息`tkinter`，所以请查看[wiki 上的 Tkinter 页面](http://wiki.python.org/moin/TkInter)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-02T07:50:58.547

我是从[pythonware.com 上的教程](http://www.pythonware.com/library/tkinter/introduction/)中学到的。由于 Tkinter 是 tcl/tk 的包装器，因此您可能还想查看[www.tcl.tk。](http://www.tcl.tk)

# php - codeigniter 中的日期验证

> ID：13666939
> 
> 赞同：1
> 
> 时间：2012-12-02T06:19:34.200
> 
> 标签：php, codeigniter

我有月、日和年的三个选择选项列表

```
<?php echo form_dropdown('dob[month]',$dates['months'],set_value('dob[month]','0'));?>
<?php echo form_dropdown('dob[day]',$dates['days'],set_value('dob[day]','0'));?>
<?php echo form_dropdown('dob[year]',$dates['years'],set_value('dob[year]','0'));?> 
```

要验证用户输入的日期是否有效，我使用以下规则：

```
$this->form_validation->set_rules('dob','date of birth','valid_dob'); 
```

其中 valid_dob 是在 My_form_validation 类中定义的函数，如下所示：

```
public function valid_dob($dob)
{   
    if(checkdate($dob['month'],$day['day'],$day['year']))
    {
        return true;
    }
    return false;
} 
```

但是上面定义的函数不是由 codeigniter 执行的，请
让我知道如何使用三个下拉列表来验证日期。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-02T06:25:45.557

您需要回调您自己的验证函数。`callback_`在您的函数名称之前添加

```
$this->form_validation->set_rules('dob','date of birth','callback_valid_dob['.$this->input->post('dob').']');  // You can pass array to function for getting all three values month,day,year 
```

# c# - WP7：Webbrowser 控制如何更改图像加载坐标

> ID：13666942
> 
> 赞同：1
> 
> 时间：2012-12-02T06:20:29.083
> 
> 标签：c#, windows-phone-7, xaml, webbrowser-control

在我的 Windows 手机应用程序中，我使用 webbrowser 控件来加载本地图像，以从浏览器控件中获取默认的捏合/缩放功能。我正在使用 webcontrol 导航方法从应用程序隔离存储中加载图像。我的浏览器控件是 480x320 大小，我的本地图像是 1600x1200。始终加载，图像显示图像的第一个 480x320 大小部分，我可以使用捏/缩放导航到图像的其余部分。

我的问题是，有没有办法通过编程方式加载我的图像并导航到我的图像中的其他坐标而不是图像的左上角（例如：显示图像底部底部的部分等）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T07:55:07.887

使用以下代码将您的图像放入 html 页面：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Untitled Document</title>
</head>

<body>
<h1 align="center"><img src="YOUR IMAGE" width="100%" longdesc="YOUR IMAGE" align="absmiddle"/>
</body>
</html> 
```

# php - 如何在 Wordpress 中自定义日期戳的外观？

> ID：13666944
> 
> 赞同：3
> 
> 时间：2012-12-02T06:20:46.287
> 
> 标签：php, html, css, wordpress

请查看此网站：http: [//vabbie.com/](http://vabbie.com/)

该网站在 Wordpress 中。帖子左侧的日期戳看起来非常普通。我想将其转换为以下样式：

![在此处输入图像描述](../Images/38bb96f044f2f3e737e9e010c9471748.png)

数字部分很大并且在左侧缩进。“10 月”部分是 OCT 和下面的 2012 年。

我正在为日期戳使用以下 php 代码：

```
<div id="time"><?php the_time('F j, Y') ?></div> 
```

但我不确定如何设计它。

请有Wordpress知识的人帮忙吗？

谢谢！！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-02T06:22:44.703

它使用与 PHP 日期函数相同的格式：

*   [http://us2.php.net/manual/en/function.date.php](http://us2.php.net/manual/en/function.date.php)

查看格式表并选择适当的字符以获得所需的输出，如文档所示。

```
echo '<div id="time"><span>' . the_time('j') . '</span><span>' . the_time('M') . '<br />' . the_time('Y') . '</span></div>'; 
```

让你开始 =o) 只需设置 SPAN 的样式，让一个浮动到一边，然后使用 CSS 设置字体等样式。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-02T16:04:04.640

这是代码以及CSS

```
<style>
.post-date {
    float:left;
    font-size: 30px;
    margin:5px;
    color: #999;
    font-weight:bold;
}
.post-monthyear {
    float:left;
    font-size: 14px;
    line-height:12px;
    color: #999;
    border-right: 1px solid #999;
    margin-right: 5px;
    padding-right: 10px;
}
</style>    
<div class="post-date"> <?php echo the_time('j') ?> </div>
<div class="post-monthyear"><?php echo the_time('M') ?> <br/><?php echo the_time('Y') ?> </div> 
```

标签周围是 CSS，您可以包含在 index.php 中，也可以粘贴到 css 文件中。只需使用 CSS 进行样式设置..

希望有帮助..

# postgresql - 如何从postGIS中的给定gps坐标获取范围内的所有建筑物名称？

> ID：13666945
> 
> 赞同：1
> 
> 时间：2012-12-02T06:20:50.067
> 
> 标签：postgresql, range, coordinates, distance, postgis

我正在制作一个全景查看器，连接到 postgres 数据库，我需要下载给定范围内的建筑物名称、街道名称、兴趣点。如果你能对这件事有所了解，我真的很感激。

问候，

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-02T07:36:07.723

由于您没有给我们一些表格规格，因此必须做一个人为的例子。

```
WITH yourpoint AS (
    SELECT
        st_transform(st_setsrid(st_makepoint(yourlon, yourlat), 4326), yourgeomsrid) AS point
)
SELECT 
    building.name
FROM 
    building, yourpoint
WHERE
    ST_Dwithin(building.the_geom, yourpoint.point, 400) 
```

现在，让我们来看看有趣的部分。首先，我们需要一个几何图形来适应您在正确坐标系中的给定点。我创建了一个生成这样一个点的子语句 (CTE)。不过，也许重点在您的数据库中。

重要提示：为了计算距离，您指定的点和几何图形必须位于同一坐标系中。因此，我封装了`st_makepoint`with `st_setsrid`，它将坐标系信息添加到该点。GPS 通常位于具有 SRID 4326 的 WGS84 中。现在，我们必须将该点转换为您的点数据的坐标系 - 因此您必须知道 SRID。

找到附近建筑物的所有魔法都发生在该`WHERE`子句中。`ST_Dwithin`查找彼此之间距离小于 400（以您的坐标系单位测量）的所有几何图形。

有关详细信息，请参阅[postgis 手册](http://postgis.refractions.net/documentation/manual-2.0/ST_DWithin.html)。

* * *

## 编辑

如果您的坐标在 WGS84 中，则应使用 geography 数据类型：

```
WITH yourpoint AS (
    SELECT
        geography(st_setsrid(st_makepoint(yourlon, yourlat), 4326)) AS point
)
SELECT 
    building.name
FROM 
    building, yourpoint
WHERE
    ST_Dwithin(Geography(building.the_geom), yourpoint.point, 400) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-02T07:57:18.340

尝试

```
select * FROM 
    LayerName
WHERE
    ST_Dwithin(LayerName.the_geom, 
    GeomFromText('POINT(x,y)',-1)
    , radius) 
```

layerName 是您的图层，x,y 来自 GPS，-1 是您的 srid，半径是您的缓冲区的半径（双精度）

# django - 返回类型为流时使用 ajxax：django

> ID：13666946
> 
> 赞同：1
> 
> 时间：2012-12-02T06:21:12.407
> 
> 标签：django, jquery, filestream

我需要在我的表单中使用 ajax。但似乎 $.ajax 的成功功能，不支持文件。现在我想知道如何使用ajax，当我想要一些时间返回表单（何时无效）和一些时间返回流到客户端进行下载（当表单有效时）。我已经完成了谷歌搜索，似乎使用 $.get 它可能会起作用。但我有表格，我必须使用帖子。任何人都可以帮我解决办法吗？多谢。

在下面的函数中，流不起作用。

```
$('#sendButton').click(function(e) {
        e.preventDefault();
        var temp = $("#mainForm").serialize();
        $.ajax({
            type: "POST",
            data: temp,
            url: 'main/',
            success: function(data) {                
               ...
            }
        });
    }); 
```

我的意见.py：

```
def mainFunc(request):
    if request.is_ajax():
         form = mainForm(request.POST)
         if request.method == 'POST':
             if form.is_valid():
                 result = ""               
                 string_to_return = webservice._result
                 file_to_send = ContentFile(string_to_return)
                 response = HttpResponse(file_to_send,'application/x-gzip')
                 response['Content-Length'] = file_to_send.size
                 response['Content-Disposition'] = 'attachment;                  filename="somefile.tar.gz"'
                 return response
          else:
               form = mainForm()
          return render_to_response('main.html', RequestContext(request, {'form':form}))
     else:
          return render_to_response("ajax.html", {}, context_instance=RequestContext(request)) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T09:13:24.233

您仍然无法将文件返回到 ajax 请求。答案自[昨天以来没有改变](https://stackoverflow.com/q/13656831/44816)

您*可以*做的是返回下载的 url 并重定向用户或弹出打开一个新窗口/选项卡。像这样

```
$('#sendButton').click(function(e) {
    e.preventDefault();
    var temp = $("#mainForm").serialize();
    $.ajax({
        type: "POST",
        data: temp,
        url: 'main/',
        success: function(data) {
           # Option 1 - redirect
           window.location = data;
           # Option 2 - new window
           window.open(data, '_blank');
           window.focus();
        }
    });
}); 
```

# php - 从 PDO PHP 获取 JSON 字符串

> ID：13666947
> 
> 赞同：0
> 
> 时间：2012-12-02T06:21:21.453
> 
> 标签：php, web-services

我有一个带有名称的表，`location`它的行是`latitude`,`longitude`和`radius`。由于是 php 新手，我对如何将这些输入作为 json 并将其发送回服务器感到困惑。

这是我正在使用的当前代码

```
function Location()
{
    try 
    {
        $conn = $this->GetDBConnection();

        $statement = $conn->prepare('SELECT * FROM location LIMIT 1');
        $statement->execute();

        if(!($row = $statement->fetch(PDO::FETCH_OBJ)))
        {
            throw new Exception('Connection failed.');
        }

        $conn = null;

        while($row = $statement->fetch(PDO::FETCH_OBJ)) 
        {
            if($row->type == 'longitude') 
            {
              // WHAT TO DO HERE
            }
            if($row->type == 'latitude') 
            {

            }               
            if($row->type == 'radius') 
            {

            }
        }

        return //JSON STRING;
    } catch(PDOException $e) 
    {
        throw $e;
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-02T06:33:51.783

您只从数据库中获取一行，因此不需要“while”循环。也不需要准备/执行查询，因为它是一个静态查询。

```
<?php

function Location(){

    $conn = $this->GetDBConnection();
    $statement = $conn->query('SELECT * FROM location LIMIT 1');
    $data = $statement->fetch(PDO::FETCH_ASSOC);

    return json_encode($data);
}

?> 
```

# assembly - 将处理后的位图图像写入文件

> ID：13666952
> 
> 赞同：3
> 
> 时间：2012-12-02T06:22:27.017
> 
> 标签：assembly, bitmap, x86, masm, masm32

我正在开发一个读取 BMP 文件内容并在图像上执行平滑数字过滤器的项目。我下面的代码几乎可以完成这项工作。我只是不知道应该在哪里存储处理后的像素以及如何将处理后的图像写入文件。我下面的代码已被注释掉，因此我们将不胜感激任何帮助。

```
 .586
        .model      flat, stdcall
        option      casemap :none
        include     ..\masm32\include\windows.inc
        include     ..\masm32\include\user32.inc
        include     ..\masm32\include\kernel32.inc
        include     ..\masm32\macros\macros.asm
        include     ..\masm32\include\masm32.inc

        includelib  ..\masm32\lib\user32.lib
        includelib  ..\masm32\lib\kernel32.lib
        includelib  ..\masm32\lib\masm32.lib

        .data
FileName    db  "bitmap2.bmp", 0
filename    db  "bitmap_fil.bmp",0
errMsg      BYTE    "Cannot create file",0dh,0ah,0

hFile       HANDLE  ?
hwFile      HANDLE  ?

hMemory     HANDLE  ?       ;incoming data
pMemory     DWORD   ?

hMemory_o   HANDLE  ?       ;outgoing data
pMemory_o   DWORD   ?

ReadSize    DWORD   ?

bytesWritten    DWORD   ?
firstLine   DWORD   ?
FileSize    DWORD   ?
BDoff       DWORD   ?
BHSize      DWORD   ?
szTemp      byte    16 dup (0)  ;buffer for messages
szPrime     byte    "%08i", 0   ;message format string
szPrimeH    byte    "%08lx",0   ;message hexa format string
signature   DD  0
MEMORYSIZE      equ 65535   ;This is how much memory allocated
                        ; to store the file.
im_offset   dd  ?
im_width    dd  ?
im_height   dd  ?
bits_pix    dd  ?

    .code
;................................
show    MACRO   caption, value      
    print   SADD(caption)
    mov eax, value
    invoke  wsprintf, offset szTemp, offset szPrime, eax    ;converts eax into string
    print   offset szTemp                   ;print string
    print   SADD(13,10) 
    ENDM
;..................................

start:  

    invoke      CreateFile, addr FileName,GENERIC_READ,FILE_SHARE_READ,NULL, OPEN_EXISTING,     FILE_ATTRIBUTE_NORMAL, NULL
    mov      hFile, eax

;Allocate and lock the memory for incoming file.
    invoke      GlobalAlloc, GMEM_MOVEABLE or GMEM_ZEROINIT, MEMORYSIZE
    mov         hMemory, eax
    invoke      GlobalLock, hMemory
    mov         pMemory, eax

;Allocate and lock the memory for outgoing file.
    invoke      GlobalAlloc, GMEM_MOVEABLE or GMEM_ZEROINIT, MEMORYSIZE
    mov         hMemory_o, eax
    invoke      GlobalLock, hMemory_o
    mov         pMemory_o, eax

;Read file and save image parameters
    invoke      ReadFile, hFile, pMemory, MEMORYSIZE-1, addr ReadSize, NULL
    mov     esi, pMemory

    add     esi, 02     ;get filesize
    mov     edi, [esi]
    mov     FileSize,edi
    invoke      wsprintf, offset szTemp, offset szPrime, edi
    print       offset szTemp
    print       SADD(10,13)

    add         esi, 8      ; jump 8 bytes to get image offset
    mov     edi, [esi]  ; get image offset
    mov         im_offset,edi
    invoke      wsprintf, offset szTemp, offset szPrimeH, edi
    print       offset szTemp
    print       SADD(10,13)

    add     esi,8       ;jump 8 bytes to get image width
    mov     edi, [esi]  ; get image width       
    mov     im_width, edi   
    invoke      wsprintf, offset szTemp, offset szPrime, edi
    print       offset szTemp
    print       SADD(10,13)

    add     esi,4       ;jump 4 bytes to get image height
    mov     edi, [esi]  ; get image height
    mov     im_height, edi  
    invoke      wsprintf, offset szTemp, offset szPrime, edi
    print       offset szTemp
    print       SADD(10,13)

    add     esi,4       ;jump 4 bytes to get color plane
    mov     ebx, [esi]  
    shr     ebx,16      ; get color plane and bit-pix
    mov     bits_pix,ebx ;
    print       SADD("bit-per-pix ")
    invoke      wsprintf, offset szTemp, offset szPrime, ebx
    print       offset szTemp
    print       SADD(10,13)

    mov     ebp, pMemory    ; get ready to start processing the image
    add     ebp, im_offset  ; esi now points to the first pix

;filtering process
;leave first row and first column and last row and last column untouched.

    mov     esi,1       ; esi is the row counter
    mov     edi,1       ; edi is the column counter

proc_pix:
    ;show       "current column is: ",edi
    ;show       "current row is: ",esi
    xor     ebx,ebx     ; ebx = 0 ebx will accumulate intermediate values for averaging
    mov     eax, im_width   ; eax is the pointer to the pixel
    mul     esi
    add     eax,edi     
    add     ebx, [ebp+eax]  ;get the pixel(I,J) 

    mov     eax, im_width
    add     esi,1       ;next row (I+1)
    mul     esi
    add     eax,edi     
    add     ebx, [ebp+eax]  ;get the pixel(I+1,J) 

    mov     eax, im_width
    sub     esi,2       ; prev row (I-1)
    mul     esi
    add     eax,edi     
    add     ebx, [ebp+eax]  ;get the pixel(I-1,J) 

    add     esi,1       ;back to the current row

    add     edi,1       ;get next column (J+1)
    mov     eax, im_width
    mul     esi
    add     eax,edi     
    add     ebx, [ebp+eax]  ;get the pixel(I,J+1) 

    sub     edi,2       ; get prev column (J-1)
    mov     eax, im_width
    mul     esi
    add     eax,edi     
    add     ebx, [ebp+eax]  ;get the pixel(I,J-1) 

    add     edi,1       ;back current column
    xor     edx, edx    ;clear upper part dividend
    mov     eax, ebx    ; move data to eax to divide
    mov     ecx, 5  
    div     ecx     ;do the average (div 5)>>> result in eax

; where should I store the processed pixels?

    inc     edi     ; do the next column
    cmp     edi, im_width   
    jl      proc_pix

    inc             esi     ; do the next row
    mov     edi,1       ; skip the first column 
    cmp     esi, im_height  
    jl      proc_pix

;....................................................................................

new_file: 
    invoke      CreateFile,ADDR filename, GENERIC_WRITE, NULL, NULL,CREATE_ALWAYS, FILE_ATTRIBUTE_NORMAL, 0
    mov         hwFile,eax      ; save file handle

; handling of error if invalid file handle
    cmp         eax,INVALID_HANDLE_VALUE
    jne     writef
    invoke      StdOut, addr errMsg ; Display error message
    jmp         QuitNow

writef: invoke      WriteFile, hwFile, pMemory_o, FileSize, ADDR bytesWritten, 0        

QuitNow:
    invoke      GlobalUnlock, pMemory
    invoke      GlobalUnlock, pMemory_o
    invoke      GlobalFree, hMemory
    invoke      CloseHandle, hFile
    invoke      CloseHandle, hwFile
    invoke      ExitProcess, NULL
    end         start

;finish 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T22:31:50.533

您已经有一个输出缓冲区；看来，您只需要找出该缓冲区的偏移量即可将其存储。如果您过滤的像素是 (I, J)，您从 中读取`pMemory + im_offset + J * im_width + I`，那么您希望将其写入`pMemory_o + im_offset + J * im_width + I`。（顺便说一句，您的代码似乎假设每像素 8 位；您可能需要明确地检查它并在错误时退出，以避免在非 8bpp 图像文件上出现意外行为。）

要正确写入目标像素，您可以执行与读取相同的行/列乘法，以在`eax`、 add`im_offset`和 add中获得偏移量`pMemory_o`（最后两个而不是`ebp`在 read 情况下使用 as）。

但是，除了将像素写入新图像之外，您还希望从源文件中复制标题（以便查看者等将其视为位图）；做一个`memcpy`（或适当的`rep movsb`） from `pMemory`to `pMemory_o`, length`im_offset`来做到这一点。您还需要将第一行和第一列（我希望最后一行和最后一列也复制到它，这与第一行和第一列存在相同的问题：您无法获取某些边的周围像素）。一种“愚蠢”但有效的方法就是将旧图像的全部内容复制到新图像、标题、像素等，然后使用过滤器更改内部像素。

您创建和写入输出缓冲区的代码似乎是正确的；大概它现在写出一个正确长度的零/随机填充文件。

顺便说一句，一旦你做对了，你可以节省很多工作（大概效率是首先用汇编编写的原因之一？）使用加法和减法而不是乘法这么多：添加`im_width`跳转到下一个行，将其减去上一行，依此类推（您可能必须计算步幅而不是`im_width`直接使用，四舍五入到最接近的 32 位；如果您的示例图像不是 4 像素宽的倍数，您可能会看到由于未使用正确的步幅而导致的奇怪结果）。

其他人的有用参考：[BITMAPFILEHEADER](http://msdn.microsoft.com/en-us/library/windows/desktop/dd183374%28v=vs.85%29.aspx)（从文件偏移量 0 开始）包含签名、文件大小（您的`FileSize`）和图像偏移量（`im_offset`），后面是[BITMAPINFOHEADER](http://msdn.microsoft.com/en-us/library/windows/desktop/dd183376%28v=vs.85%29.aspx)，它包含宽度、高度和位深度。

# c# - 添加和检索嵌入式资源代码域

> ID：13666956
> 
> 赞同：5
> 
> 时间：2012-12-02T06:22:48.727
> 
> 标签：c#, resources, codedom

好的，我觉得我的问题的答案是在线的，但我找不到它。我要做的就是将一个文本资源文件添加到我正在使用 CodeDom 编译的程序中，然后在编译的程序中访问该文本文件。要添加嵌入式资源，我使用了以下代码：

```
 System.Resources.ResourceWriter writer = new System.Resources.ResourceWriter("Resources.resx");
        writer.AddResource("EoS.txt", Form1.MasterEncoder.GetBytes(Properties.Resources.Eos));
        writer.Generate();
        writer.Close();
        Parameters.EmbeddedResources.Add("Resources.resx"); 
```

这里“Parameters”是我的编译器参数对象，“Eos.txt”是我正在尝试编写的文件，它是应用程序中的一个资源。这在我构建程序时不会引发任何错误，但是当我尝试使用此代码在新编译的程序中获取此文本文件时，我将其添加到表单加载事件中：

```
 _assembly = Assembly.GetExecutingAssembly();
         _textStreamReader = new StreamReader(_assembly.GetManifestResourceStream("Resources.EoS.txt"));
         TextFile = _textStreamReader.ReadToEnd(); 
```

我大致收到此错误：“值不能为空参数名称：流。” 我已经尝试将“资源”更改为程序的名称空间和许多其他的小调整，但没有任何效果。我不确定我是否走错了路，但我认为我的问题出在 CodeDom 上。有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-02-20T14:52:57.273

这几乎可以肯定是由于资源名称的形成方式出乎意料。当我想不起来时，我使用的一个技巧是临时添加这行代码：

```
string[] resourceNames = _assembly.GetManifestResourceNames(); 
```

在其上设置断点，从而提醒自己正确的名称，然后将其复制到代码中。

# android - 如何在完成应用程序之前完成处理程序？

> ID：13666957
> 
> 赞同：1
> 
> 时间：2012-12-02T06:23:17.993
> 
> 标签：android

这是我有一个处理程序，当我触摸背景颜色为白色的区域时，它会在屏幕上显示一条消息。

```
 else if (ct.closeMatch (Color.WHITE, touchColor, tolerance))             

                               {  Random r = new Random();
                           int txt= r.nextInt(6-0) + 0;
                           if(txt==0){ variables.pointtxt = "Nothing interesting"; }
                           else if (txt==1){ variables.pointtxt = "There´s nothing there"; }     
                           else if (txt==2){ variables.pointtxt = "I can´t do nothing with that"; } 
                           else if (txt==3){ variables.pointtxt = "Wait... nop nothing"; }  
                           else if (txt==4){ variables.pointtxt = "Nothing"; }  
                           else if (txt==5){ variables.pointtxt = "More nothing"; }
                                LayoutInflater layoutInflater = (LayoutInflater)getBaseContext().getSystemService(Context.LAYOUT_INFLATER_SERVICE);

                                  View popupView = layoutInflater.inflate(R.layout.popup, null);  
                                       final PopupWindow popupWindow = new PopupWindow(
                                          popupView, 
                                          LayoutParams.FILL_PARENT,  
                                                 LayoutParams.WRAP_CONTENT);
                                          TextView text = (TextView) popupView.findViewById(R.id.popuptxt);
                                        text.setText(variables.pointtxt);

                                        popupWindow.showAtLocation(popupView, Gravity.CENTER, 0, 250) ;

                                new Handler().postDelayed(new Runnable()
                                {
                                    public void run()
                                      {      if (popupWindow.isShowing()== true)

                                         popupWindow.dismiss();

                                      }
                                }, 1000);

                                   } 
```

但是，如果我在不到 1000 毫秒的时间内运行一个新意图，它就会崩溃，我很确定，因为它可以完成处理程序提示。

有没有办法告诉处理程序如果应用程序正在关闭然后运行 ​​popupWindow.dismiss(); ?

或 inted 有没有办法告诉我什么时候打电话（触摸红色的东西时）

```
 if (ct.closeMatch (Color.RED, touchColor, tolerance)) {

                       Intent game = new Intent(lvl2_1_0.this, lvl2_1_1.class); 
                       game.setFlags(Intent.FLAG_ACTIVITY_SINGLE_TOP);
                          game.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);

                        startActivity(game);

                  } 
```

完成所有处理程序提示？

我一直在寻找，但我找不到一种方法来强制完成应用程序中的所有处理程序，然后再完成它。

我知道我可能会稍微推动它，但在某些情况下，当我测试游戏时它会崩溃，当然在正常游戏中它可能不会发生，因为按下按钮在不到 1000 秒内通过屏幕是不可能的弹出弹出窗口后的毫秒数但让我感到困扰的是我手上有这个错误。

**感谢您在其他线程中的回答，我学到了有关 android 编程的最多知识，非常感谢！**

这是已修复的代码，感谢 sam！:P

```
public class lvl2_1_0 extends Activity implements View.OnTouchListener {
private PopupWindow popupWindow;
private Handler mHandler = new Handler();
private Runnable dismissPopup = new Runnable() {
        public void run() {
            if (popupWindow.isShowing())
                popupWindow.dismiss();
        }
    };
   @Override
    public void onCreate(Bundle savedInstanceState) { 
```

然后

调用弹出窗口。就我而言：

```
 LayoutInflater layoutInflater = (LayoutInflater)getBaseContext().getSystemService(Context.LAYOUT_INFLATER_SERVICE);

                                  View popupView = layoutInflater.inflate(R.layout.popup, null);  
                                  popupWindow = new PopupWindow(
                                          popupView, 
                                          LayoutParams.FILL_PARENT,  
                                                 LayoutParams.WRAP_CONTENT);
                                          TextView text = (TextView) popupView.findViewById(R.id.popuptxt);
                                        text.setText(variables.pointtxt);

                                        popupWindow.showAtLocation(popupView, Gravity.CENTER, 0, 250) ;

                                        mHandler.postDelayed(dismissPopup, 3000); 
```

最后在没有强制关闭的情况下关闭应用程序

```
 Intent game = new Intent(lvl2_1_0.this, lvl2_1_1.class); 
                       game.setFlags(Intent.FLAG_ACTIVITY_SINGLE_TOP);
                          game.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
                          mHandler.removeCallbacks(dismissPopup);
                        startActivity(game); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T07:06:42.800

> 但是，如果我在不到 1000 毫秒的时间内运行一个新意图，它就会崩溃，我很确定，因为它可以完成处理程序提示。

[`Handler#removeCallbacks(Runnable)`](http://developer.android.com/reference/android/os/Handler.html#removeCallbacks%28java.lang.Runnable%29)将取消它在队列中等待的传递的 Runnable。

创建两个字段变量以保存对 Handler 和 Runnable 的引用：

```
public class Example extends Activity {
    private Handler mHandler = new Handler();
    private Runnable dismissPopup = new Runnable() {
        public void run() {
            if (popupWindow.isShowing())
                popupWindow.dismiss();
        }
    } 
```

现在您之前调用`new Handler().postDelayed(new R...`使用：

```
mHandler.postDelayed(dismissPopup, 1000); 
```

最后在你启动新的 Intent 调用之前：

```
...
mHandler.removeCallbacks(mRunnable);`
startActivity(game); 
```

（你可能也想打电话`removeCallbacks()`。`onPause()`）

# c - 为什么 C 中未初始化的变量仍会产生输出

> ID：13666964
> 
> 赞同：3
> 
> 时间：2012-12-02T06:24:50.877
> 
> 标签：c, variables, stack, initialization

我试图弄清楚为什么即使局部变量 i 从未在这个 C 程序中初始化，许多系统会打印出来`0 1 2 3 4 5 6 7 8 9`有人可以解释这是为什么吗？任何帮助表示赞赏！

```
void foo() {
   int i;
   printf("%d ", i++);
}
int main() {
    int j;
    for (j = 1; j <= 10; j++) foo();
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-02T06:27:13.370

行为未定义。统计数据无关紧要。这可能是因为布局和堆栈的初始化，但也可能是由于任何其他原因。

例如，假设：

1.  没有检查变量是否已初始化。
2.  这是一个简单的堆栈机器。
3.  堆栈初始化为 0。
4.  该变量`i`是在堆栈上分配的，而不是作为寄存器分配的。
5.  调用函数时，它不会初始化堆栈。

在这种情况下`i`，每次都会引用堆栈上的同一个位置，将从 0 开始，并且堆栈上的同一个位置将每次加一。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-02T06:27:36.950

变量`i`是在堆栈上创建的，您没有对其进行初始化。所以它包含一些你无法预测的垃圾值。幸运的是，在您的情况下，该垃圾值最初为 0。如果在另一个系统上运行，您将获得一组不同的值。行为肯定是未定义的。

由于您除了在 for 循环中调用该函数之外什么都不做，幸运的是，该变量`i`每次都会被销毁并重新分配相同的内存空间。所以它在迭代中也保持了它的价值。

在我的系统上，它给出了这些值。

```
2009288233
2009288234
2009288235
2009288236
2009288237
2009288238
2009288239
2009288240
2009288241
2009288242 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-02T06:28:24.603

这可能是因为函数中的局部变量被重复地从同一个内存块中分配和释放。这就是输出重复递增的原因。

初始值为零是运气。它可能是任何其他垃圾值。

该行为是未定义的，不会在另一个系统上工作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-02T06:29:07.227

因为这是一个简单的程序，所以很幸运 i 使用了相同的内存位置。由于这未初始化，它将获取先前的值。

然而，这是未定义的。应该用警告编译它以找出这个错误。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-02T06:32:53.683

正如其他人所指出的，这是未定义的行为，因此没有可靠的答案。

也就是说，你可能是对的，你得到的最常见的值是 0 到 9。这会发生，因为操作系统在你的程序接收它之前将堆栈占用的内存归零。`foo()`表示已进行的最深调用，因此它使用的是操作系统将其归零后尚未触及的内存，因此在第一次调用时，它很可能仍包含零。

在每个后续调用中，它可能会占据堆栈上的相同位置，因此在每个后续调用开始时，它可能以它在上一次调用结束时的值开始。

正因为它是未定义的行为，这根本不能保证，但是是的，它可能至少比没有的可能性更大。

# c# - InvalidOperationException，PageRequestManager 不能被多次初始化

> ID：13666966
> 
> 赞同：1
> 
> 时间：2012-12-02T06:24:54.123
> 
> 标签：c#, asp.net, telerik, dotnetnuke, pagerequestmanager

我在 Dotnetnuke 自定义模块中使用 Telerik 控件，所有 ajax 控件都发生了问题，结果是每次回发请求而不是 Ajax 请求。

在 Firebug 我可以看到，

```
Sys.InvalidOperationException: Sys.InvalidOperationException: The PageRequestManager cannot be initialized more than once. 
```

异常来源是`Telerik.Web.UI.WebResource.axd`，

我知道这不是 Telerik 本身，而是 Telerik 和 DOTNETNUKE AJAX 之间的冲突，但是我不知道在哪里。

有什么想法可以捕捉到这个异常并处理它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-02T07:13:36.813

问题是使用`telerik:RadScriptManager`

我已使用以下代码为 RadGrid 导入 Excel 工作，

```
 <telerik:RadScriptManager ID="RadScriptManager1" runat="server">
    </telerik:RadScriptManager>
    <script type="text/javascript">
        Sys.WebForms.PageRequestManager.getInstance().add_initializeRequest(initRequest);
        function initRequest(sender, args) {
            if (args.get_postBackElement().id.indexOf("ExportTo") != -1) {
                args.set_cancel(true);  //stop async request
                sender._form["__EVENTTARGET"].value = args.get_postBackElement().id.replace(/\_/g, "$");
                sender._form["__EVENTARGUMENT"].value = "";
                sender._form.submit();
                return;
            }
        } 
```

解决方案是删除多余的 RadScriptManager，因为 Dotnetnuke 已经有一个。

# xml - dtd 限制

> ID：13666972
> 
> 赞同：1
> 
> 时间：2012-12-02T06:26:24.920
> 
> 标签：xml, dtd

我正在为班级学生进行的一项调查制作 xml。我的回复 dtd 如下所示：

```
<!DOCTYPE responses [
<!ELEMENT responses (student)+>
<!ELEMENT student (response?)>
]> 
```

该模型需要至少一名学生有或没有回应。

有没有办法要求至少一名学生做出回应？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T23:29:33.533

不在 DTD 中，不。您当然可以将响应作为学生的必填项。

# c# - 验证 SMTP 服务器上 SQL 数据库数据的传入电子邮件地址

> ID：13666974
> 
> 赞同：1
> 
> 时间：2012-12-02T06:26:42.650
> 
> 标签：c#, sql-server, iis, smtp

我目前需要设置一个带有额外扭曲的传出 SMTP 服务器。如果用户发送电子邮件并且此服务器接收到邮件，那么它应该验证将邮件发送到 SQL 数据库的电子邮件地址。

即：我有一个包含电子邮件地址的表格和一个活动/非活动状态列。用户发送电子邮件并将其发送到 SMTP 服务器。当 SMTP 服务器收到电子邮件时，服务器应获取发送邮件的电子邮件地址，并根据数据库对其进行验证，以检查电子邮件地址的相应状态。如果该状态处于活动状态，则消息应中继到收件人地址。如果不是，则应向该电子邮件地址发送回复消息，说明该电子邮件处于非活动状态。

我的问题是这样的。最好用 C# 编写我自己的 SMTP 服务器应用程序来执行此操作，还是有一种开箱即用的解决方案，例如 IIS，我可以设置一些如何获得此功能？

用 C# 重写我自己的电子邮件服务器应用程序似乎是一个肮脏的解决方案和轮子的娱乐？

我在可以接受脚本的 IIS SMTP 服务器上阅读了有关 OnArrival 功能的内容。对此有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T06:41:16.643

我认为这将帮助您：将
[传入的电子邮件通过管道传输到 Windows IIS SMTP 上的脚本？](https://stackoverflow.com/questions/926345/pipe-incoming-email-to-a-script-on-windows-iis-smtp)

部分答案：

> IIS SMTP 服务可以发送电子邮件，也可以*接受*电子邮件。
> 
> 这就是你想要做的。
> 
> 将 IIS SMTP 服务配置为接受域的电子邮件（您可以在 IIS SMTP 服务的属性中的域下进行配置）。说域名“myserver.example.com”
> 
> 然后，在您的 DNS 服务器中，配置指向“myserver.example.com”的 MX 记录。
> 
> 现在，当电子邮件被发送到您的 IIS SMTP 服务器时，它实际上会被放置在您的 mailroot/drop 文件夹中（您也可以在 IIS SMTP 服务属性中更改此文件夹）。
> 
> 现在您正在接受电子邮件，下一步是编写一个脚本，它将：
> 
> 1）解析电子邮件。
> 
> 2）相应地修改它们（你只是想改变“到”地址吗？）。

这是诀窍，因此您需要解析传入的电子邮件并仅转发那些验证电子邮件的邮件.. 以及未通过验证的邮件，从电子邮件中读取“FROM”地址并回复他！

> 3）如果您想重新发送电子邮件，那么您需要相应地修改它们。您将需要添加一个 X-Sender 标头，用于标识发送电子邮件的电子邮件地址，以及一个 X-Receiver 标头，用于每个将接受电子邮件的收件人。以下是修改后的示例电子邮件：
> 
> X-Sender: me@mywebsite.com X-Receiver: recip1@theirdomain.com X-Receiver: recip2@theirdomain.com From: "jim bob" To: Subject: test MIME-Version: 1.0 Content-Type: text/plain ; 消息 ID：<024f01c9e130$b3eca500$0401a8c0@local>
> 
> 测试 一旦你有了这个修改过的内容，你就会想把它写到 mailroot/pickup 目录中的一个文件中。请务必使用唯一的名称。
> 
> IIS SMTP 服务会过来，提取电子邮件并转发它，使用 X-Sender 作为 MAIL FROM 地址发送电子邮件，并将其发送到每个 X-Receiver 标头中列出的每个电子邮件地址。
> 
> 4）将此脚本作为计划任务运行。另一种选择是将其构建为 Windows 服务，或者实现类似文件系统观察器的功能，每次将电子邮件创建为文件时都会在其中执行。
> 
> 5）所有这一切的另一种选择是实际实现一个 SMTP 事件接收器，但我认为这对于你想要做的事情来说太过分了，并且会产生更多的头痛，而不是它解决的问题。如果我喜欢痛苦，我只会走事件汇路线。

# php - 我正在寻找“通过链接上传并保存到服务器”的 php 文件

> ID：13666976
> 
> 赞同：0
> 
> 时间：2012-12-02T06:27:33.653
> 
> 标签：php, html, file-upload

我知道一种将文件上传到服务器的方法，但它涉及客户端从他们的设备上传文件。我需要一个从另一个网站获取文件的文件，并将其保存到我服务器上的指定文件夹中。请不要将此视为要求代码。我只是要求我现有代码的调整版本。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T06:29:23.117

您正在寻找 php [curl](http://php.net/manual/en/book.curl.php)它允许您从任何 url 下载。

```
$link = curl_init();

curl_setopt($link, CURLOPT_URL, "http://www.example.com/example.jpg");
curl_setopt($link, CURLOPT_HEADER, false);

curl_exec($link); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-02T06:30:50.353

您可以使用 php [file_get_contents](http://php.net/manual/en/function.file-get-contents.php)来实现这一点。

将网页中的 url 传递给服务器，并将该 url 传递给此函数。这将完成这项工作。如下所示：

```
$content = @file_get_contents($url);
    if($content === FALSE) {
        echo "Error:Invalid Url";
    }
    else {
        file_put_contents($data, $content);
        if(filesize($data) > 10485760) {
            echo "Error: File exceeds 10MB limit";
        }
        else {

        $imageinfo= getimagesize($data);

        ## Check if file is actually a image
        if($imageinfo !== false) {
           ## Do processing here
        } 
```

# asp.net-mvc - 用户可以将输入从只读更改为可编辑吗？

> ID：13666982
> 
> 赞同：1
> 
> 时间：2012-12-02T06:28:58.623
> 
> 标签：asp.net-mvc, html.textboxfor

我将 MVC 用于我的数据输入表单，并且我有以下 div：

```
<div>
      <label>Bar Code:</label>
      @if (Model.GiftCardId == default(int))
      {
        @Html.TextBoxFor(model => model.BarCode)
      }
      else
      { 
        @Html.TextBoxFor(model => model.BarCode, new { @readonly="readonly"})
      }
</div> 
```

在这里，我确保如果用户正在输入新的礼品卡，则会显示一个可编辑的输入以允许用户输入新的条形码。但如果用户正在编辑现有的礼品卡，则输入必须显示为只读输入。我的问题是：用户可以更改 barCode 输入的只读属性并允许自己输入不同的吗？BarCode 字段不是表中的主键，但它必须是唯一的。我使用 GiftCardId 字段来识别记录。但是，在提交表单时，如何阻止用户更改 GiftCardId 呢？这怎么能控制？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-02T10:33:02.950

我理解这是一个与安全相关的问题：即。用户可以破解表单来做一些你不想要的事情。

答案是肯定的，用户可以使用像 Firebug 这样的工具来干扰标记，从而改变只读属性。

您没有显示如何从用户那里收集 GiftCardId。假设它是在以前的视图/操作方法中收集和验证的，更安全的方法是根据 GiftCardId 是否有效/新来重定向到不同的视图。

**评论后编辑**

几个建议。

*   将 GiftCardId 存储在会话状态中，而不是将其发送到浏览器。
*   使用单向散列函数从 GiftCardId 生成令牌并将其发送到隐藏字段中的浏览器。重新散列回传的 GiftCardId 并检查它是否与原始散列匹配。请参阅这篇关于创建 MD5 哈希的[简短文章。](http://en.csharp-online.net/Create_a_MD5_Hash_from_a_string)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T07:57:35.177

简单的答案是“是”，所有请求都可以伪造，这就是为什么您永远不应该信任用户输入并在服务器端验证用户输入的原因。

您可以做什么实际上取决于您需要什么以及修改 GiftCardId 的含义。除了服务器端验证之外，您还可以做的事情，

```
1\. hide the field instead of making it visible
2\. encrypt the GiftCardId 
```

# c# - IronPython 和通过 C# 执行的 Javascript 不一致？

> ID：13666985
> 
> 赞同：-1
> 
> 时间：2012-12-02T06:29:26.290
> 
> 标签：c#, javascript, .net-4.0, ironpython, dynamic-language-runtime

> **可能的重复：**
> [JavaScript 的数学被破坏了吗？](https://stackoverflow.com/questions/588004/is-javascripts-math-broken)

我写了一些动态运行 Python 代码的简单 C# 代码（已经实现）：

```
string code = @"100 * 2 + 4 / 3";
ScriptEngine engine = Python.CreateEngine();
ScriptSource source = engine.CreateScriptSourceFromString(code, SourceCodeKind.Expression);
int res = source.Execute<int>();
Console.WriteLine(res); 
```

然后我想到了 Javascript，C# 和 JS 之间存在核心差异。例如：

在 JS 中：

```
var t=1.02+1.01 = 2.0300000000000002; 
```

然后我通过[Jint](http://jint.codeplex.com/)尝试了这个：

```
var script = @"
  function add( ) {
    return 1.02 + 1.01;
  };
  return add();";
  var result = new JintEngine().Run(script);
  Console.WriteLine(result); 
```

结果是：

![在此处输入图像描述](../Images/3f96424779763656324774994ee1e093.png)

也许我没有看到全貌，但是如果世界另一端的程序员向我发送他的脚本文件，我（和他）希望结果是一致的！（让我们**暂时忽略**有问题的 base 2 表示，我说的是一致性）。

如果我弄错了，在什么情况下我会使用在 .Net 上运行其他代码？（我必须对*每一行*代码都非常非常怀疑......）

我对吗 ？

# 另一个例子 ：

```
 var script = @"
                               function show( )
                               {
                                      return  parseInt('123asd'); //in js it's 123
                               };
                               return show();";

                var result = new JintEngine().Run(script);
                Console.WriteLine(result); 
```

结果 ：

![在此处输入图像描述](../Images/306bd25308d9838e7b0d5c33cb033868.png)

我如何相信脚本会产生相同的预期结果？（或者我把整个情况弄错了......？）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-02T06:38:42.263

这没有错误，您所看到的是计算机如何存储十进制数。这个主题相当复杂......计算机无法存储十进制数的确切数字，当您将 1.01 和 1.02 相加时，您得到的正是计算机认为的结果。

你得到这个并不罕见。我建议你在这种情况下做的是将数字四舍五入到你想要的小数位置（例如百分之一位置，为你）。但这仅在处理更大的数字时才有效。当您想处理更小、更精确的小数时，您将不得不处理它，或者获得一台超级计算机。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-02T06:45:36.903

我没有看到任何“不一致”。这就是浮点数的工作原理！

1) 价值——根据定义——很少是“精确的”

2）如果您尝试打印出比您的值精度更多的数字，则表示（例如从打印到字符串）可能会完全误导:)

示例 C 代码

```
#include <stdio.h>

int 
main ()
{
  double d = 1.02 + 1.01;
  float f = 1.02 + 1.01;
  printf ("d=%lf, f=%f\n", d, f);
  printf ("d=%25.20lf, f=%25.20f\n", d, f);
  return 0;
} 
```

样本输出：

```
d=2.030000, f=2.030000
d=   2.03000000000000020000, f=   2.02999997138977050000 
```

优秀文章：

*   [每个计算机科学家都应该知道的关于浮点运算的知识](http://docs.oracle.com/cd/E19957-01/806-3568/ncg_goldberg.html)

最后，请阅读此讨论：

*   [浮点数学被破坏了吗？](https://stackoverflow.com/questions/588004/is-javascripts-math-broken)

问题不是 Python，不是 C#，不是 Javascript。

我向你们保证 ：）

# objective-c - 将 __string 发送到 __unsafe_unretained 会更改指针的保留/释放属性

> ID：13666986
> 
> 赞同：0
> 
> 时间：2012-12-02T06:30:24.777
> 
> 标签：objective-c, xcode, automatic-ref-counting, clang

以下是我在基于 iOS 4（无 ARC）的 lynda iOS 培训课程中学到的代码段。

我打算在我的 Xcode 4.2 中实现相同的代码，它通过 iOS 5 SDK 打开了 ARC。它给了我这个错误：

> 错误：语义问题：将“__strong id *”发送到“__unsafe_unretained id **”类型的参数会更改指针的保留/释放属性”

```
- (NSNumber *) insertRow:(NSDictionary *) record {
    // NSLog(@"%s", __FUNCTION__);
    int dictSize = [record count];

    // the values array is used as the argument list for bindSQL
    id keys[dictSize];  // not used, just a side-effect of getObjects:andKeys
    id values[dictSize];
    [record getObjects:values andKeys:keys];    // convenient for the C array

    // construct the query
    NSMutableArray * placeHoldersArray = [NSMutableArray arrayWithCapacity:dictSize];
    for (int i = 0; i < dictSize; i++)  // array of ? markers for placeholders in query
        [placeHoldersArray addObject: [NSString stringWithString:@"?"]];

    NSString * query = [NSString stringWithFormat:@"insert into %@ (%@) values (%@)",
                        tableName,
                        [[record allKeys] componentsJoinedByString:@","],
                        [placeHoldersArray componentsJoinedByString:@","]];

    [self bindSQL:[query UTF8String] arguments:(va_list)values];
    sqlite3_step(statement);
    if(sqlite3_finalize(statement) == SQLITE_OK) {
        return [self lastInsertId];
    } else {
        NSLog(@"doQuery: sqlite3_finalize failed (%s)", sqlite3_errmsg(database));
        return [NSNumber numberWithInt:0];
    }
} 
```

** 真实案例伴随着整个函数的以下部分。**

```
int dictSize = [record count];

// the values array is used as the argument list for bindSQL
id keys[dictSize];  // not used, just a side-effect of getObjects:andKeys
id values[dictSize];
[record getObjects:values andKeys:keys];    // convenient for the C array 
```

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T07:13:46.747

这个功能有很多问题。编译器错误的修复只是声明`keys`并`values`使用`__unsafe_unretained`所有权限定符：

```
__unsafe_unretained id keys[dictSize];  // not used, just a side-effect of getObjects:andKeys
__unsafe_unretained id values[dictSize]; 
```

但是，强制转换`(va_list)values`是未定义的行为。不要这样做。

由于您根本不使用`keys`数组，因此最好执行以下操作：

```
- (NSNumber *) insertRow:(NSDictionary *) record {
    int count = [record count];

    NSMutableArray * placeHoldersArray = [NSMutableArray arrayWithCapacity:count];
    for (int i = 0; i < count; i++) {
        [placeHoldersArray addObject: @"?"];
    }

    NSString * query = [NSString stringWithFormat:@"insert into %@ (%@) values (%@)",
                        tableName,
                        [[record allKeys] componentsJoinedByString:@","],
                        [placeHoldersArray componentsJoinedByString:@","]];

    [self bindSQL:[query UTF8String] arguments:[record allValues]];
    sqlite3_step(statement);
    if(sqlite3_finalize(statement) == SQLITE_OK) {
        return [self lastInsertId];
    } else {
        NSLog(@"doQuery: sqlite3_finalize failed (%s)", sqlite3_errmsg(database));
        return [NSNumber numberWithInt:0];
    }
} 
```

然后修改`bindSQL:arguments:`为采用 a`NSArray *`而不是 a `va_list`。如果您需要帮助，请向我们展示`bindSQL:arguments:`.

（但是，我认为没有记录`allKeys`并`allValues`返回并行数组......）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-02T07:15:27.607

为 const char 指针编辑：

```
- (NSNumber *) insertRow:(NSDictionary *) record {
    NSArray * placeHoldersArray = [NSArray array];
    const char * cStrings[record.count];
    NSArray * keys = [record allKeys];
    NSUInteger i=0;
    for (id key in keys) {
        id object = [record objectForKey:key];
        if ([object isKindOfClass:[NSString class]])
            cStrings[i++] = [(NSString*)object UTF8String];
        else
            @throw [NSException exceptionWithName:NSInvalidArgumentException reason:@"Expected NSString" userInfo:nil];
        placeHoldersArray = [placeHoldersArray arrayByAddingObject: @"?"]; 
    }    
    NSString * query = [NSString stringWithFormat:@"insert into %@ (%@) values (%@)",
                            tableName,
                            [keys componentsJoinedByString:@","],
                            [placeHoldersArray componentsJoinedByString:@","]];

    [self bindSQL:[query UTF8String] arguments:(va_list)cStrings];
    sqlite3_step(statement);
    if(sqlite3_finalize(statement) == SQLITE_OK) {
        return [self lastInsertId];
    } else {
        NSLog(@"doQuery: sqlite3_finalize failed (%s)", sqlite3_errmsg(database));
        return [NSNumber numberWithInt:0];
    }
} 
```

在更新方法中，您应该了解 va_list 只是一组任意数量的参数。假定被调用的方法知道如何确定类型。这方面的一个例子是 NSLog。它使用格式字符串来确定未知数量的变量的类型，这些变量作为 va_list 传入，即逗号分隔值。因为您只有一个值，所以只需传入该值即可。我对 sqlite 是否需要 ac 字符串或在这种情况下是否需要一个整数持粗略态度。

# html - 带有固定标题的水平和垂直可滚动表格

> ID：13666989
> 
> 赞同：1
> 
> 时间：2012-12-02T06:30:41.407
> 
> 标签：html, css, scroll, html-table

我正在寻找可滚动的表格。当宽度固定时它工作正常，但在动态创建列时它不起作用。

```
<table cellspacing="0" cellpadding="0" border="0" width="325">
  <tr>
    <td>
       <table cellspacing="0" cellpadding="1" border="1" width="300" >
         <tr>
            <th>col 1 heading</th>
            <th>col 2 heading</th>
         </tr>
       </table>
    </td>
  </tr>
  <tr>
    <td>
       <div style="width:325px; height:48px; overflow:auto;">
         <table cellspacing="0" cellpadding="1" border="1" width="300" >
           <tr>
             <td>col 1 data 1</td>
             <td>col 2 data 1</td>
           </tr>
           <tr>
             <td>col 1 data 2</td>
             <td>col 2 data 2</td>
           </tr>
           <tr>
             <td>col 1 data 3</td>
             <td>col 2 data 3</td>
           </tr>
         </table>  
       </div>
    </td>
  </tr>
</table> 
```

我从这里找到它[http://www.scientificpsychic.com/blogentries/html-and-css-scrolling-table-with-fixed-heading.html](http://www.scientificpsychic.com/blogentries/html-and-css-scrolling-table-with-fixed-heading.html)

看演示

[http://jsfiddle.net/u8yyD/](http://jsfiddle.net/u8yyD/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-30T21:24:24.220

以下是保持 th 和 td 对齐的一种方法：

CSS：

```
.column1class { width:100px; } 
.column2class { width:200px; } 
```

定义标题和行的表格之后的 HTML；

```
<colgroup>
<col class='column1class'>
<col class='column2class'>
</colgroup> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-02T06:38:16.050

实际上，这是我回答的非常相似的问题。

```
$(function(){
    $("table").stickyTableHeaders();
});

/*! Copyright (c) 2011 by Jonas Mosbech - https://github.com/jmosbech/StickyTableHeaders
    MIT license info: https://github.com/jmosbech/StickyTableHeaders/blob/master/license.txt */

;(function ($, window, undefined) {
    'use strict';

    var pluginName = 'stickyTableHeaders';
    var defaults = {
            fixedOffset: 0
        };

    function Plugin (el, options) {
        // To avoid scope issues, use 'base' instead of 'this'
        // to reference this class from internal events and functions.
        var base = this;

        // Access to jQuery and DOM versions of element
        base.$el = $(el);
        base.el = el;

        // Cache DOM refs for performance reasons
        base.$window = $(window);
        base.$clonedHeader = null;
        base.$originalHeader = null;

        // Keep track of state
        base.isCloneVisible = false;
        base.leftOffset = null;
        base.topOffset = null;

        base.init = function () {
            base.options = $.extend({}, defaults, options);

            base.$el.each(function () {
                var $this = $(this);

                // remove padding on <table> to fix issue #7
                $this.css('padding', 0);

                $this.wrap('<div class="divTableWithFloatingHeader"></div>');

                base.$originalHeader = $('thead:first', this);
                base.$clonedHeader = base.$originalHeader.clone();

                base.$clonedHeader.addClass('tableFloatingHeader');
                base.$clonedHeader.css({
                    'position': 'fixed',
                    'top': 0,
                    'z-index': 1, // #18: opacity bug
                    'display': 'none'
                });

                base.$originalHeader.addClass('tableFloatingHeaderOriginal');

                base.$originalHeader.after(base.$clonedHeader);

                // enabling support for jquery.tablesorter plugin
                // forward clicks on clone to original
                $('th', base.$clonedHeader).click(function (e) {
                    var index = $('th', base.$clonedHeader).index(this);
                    $('th', base.$originalHeader).eq(index).click();
                });
                $this.bind('sortEnd', base.updateWidth);
            });

            base.updateWidth();
            base.toggleHeaders();

            base.$window.scroll(base.toggleHeaders);
            base.$window.resize(base.toggleHeaders);
            base.$window.resize(base.updateWidth);
        };

        base.toggleHeaders = function () {
            base.$el.each(function () {
                var $this = $(this);

                var newTopOffset = isNaN(base.options.fixedOffset) ?
                    base.options.fixedOffset.height() : base.options.fixedOffset;

                var offset = $this.offset();
                var scrollTop = base.$window.scrollTop() + newTopOffset;
                var scrollLeft = base.$window.scrollLeft();

                if ((scrollTop > offset.top) && (scrollTop < offset.top + $this.height())) {
                    var newLeft = offset.left - scrollLeft;
                    if (base.isCloneVisible && (newLeft === base.leftOffset) && (newTopOffset === base.topOffset)) {
                        return;
                    }

                    base.$clonedHeader.css({
                        'top': newTopOffset,
                        'margin-top': 0,
                        'left': newLeft,
                        'display': 'block'
                    });
                    base.$originalHeader.css('visibility', 'hidden');
                    base.isCloneVisible = true;
                    base.leftOffset = newLeft;
                    base.topOffset = newTopOffset;
                }
                else if (base.isCloneVisible) {
                    base.$clonedHeader.css('display', 'none');
                    base.$originalHeader.css('visibility', 'visible');
                    base.isCloneVisible = false;
                }
            });
        };

        base.updateWidth = function () {
            // Copy cell widths and classes from original header
            $('th', base.$clonedHeader).each(function (index) {
                var $this = $(this);
                var $origCell = $('th', base.$originalHeader).eq(index);
                this.className = $origCell.attr('class') || '';
                $this.css('width', $origCell.width());
            });

            // Copy row width from whole table
            base.$clonedHeader.css('width', base.$originalHeader.width());
        };

        // Run initializer
        base.init();
    }

    // A really lightweight plugin wrapper around the constructor,
    // preventing against multiple instantiations
    $.fn[pluginName] = function ( options ) {
        return this.each(function () {
            if (!$.data(this, 'plugin_' + pluginName)) {
                $.data(this, 'plugin_' + pluginName, new Plugin( this, options ));
            }
        });
    };

})(jQuery, window); 
```

见参考[链接](https://stackoverflow.com/questions/13653315/scrolling-a-div-from-an-outer-div/13657760#13657760)

# asp.net-mvc - Kendo：DropDownList 填充容器

> ID：13666993
> 
> 赞同：0
> 
> 时间：2012-12-02T06:31:03.980
> 
> 标签：asp.net-mvc, kendo-ui

在 MVC 4 中使用 Kendo UI。

我在 table.td 中有一个这样定义的下拉列表：

```
 @(Html.Kendo().DropDownListFor(model => model.AppUserStatus)
                                      .DataTextField("Text")
                                      .DataValueField("Value")
                                      .BindTo(@ViewBag.StatusList)

                                      ) 
```

如何让它填充它包含的 table.td 的宽度？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-02T11:05:30.350

**您可以通过HtmlAttributes**方法直接使用包装器添加属性。在你的情况下，以下应该做的工作：

```
.HtmlAttributes(new { style = "width:100%;" }) 
```

# f# - 从 Observable 到 Enumerable/Value 没有阻塞

> ID：13666995
> 
> 赞同：2
> 
> 时间：2012-12-02T06:31:16.727
> 
> 标签：f#, system.reactive

我遇到了一些阻塞问题。我试图从推到拉。即我想在这里访问我的数据，在这种情况下，它是通过我的 Observable 处理后的数组。

```
type HistoryBar = 
    {Open: decimal; High: decimal; Low: decimal; Close: decimal; Time: DateTime; Volume: int; RequestId: int; Index: int; Total: int}

let transformBar =
    client.HistoricalData
    |> Observable.map(fun args ->
        {
            Open = args.Open
            High = args.High
            Low =  args.Low
            Close = args.Close
            Time = args.Date
            Volume = args.Volume
            RequestId = args.RequestId
            Index = args.RecordNumber
            Total = args.RecordTotal
       }
    )

let groupByRequest (obs:IObservable<HistoryBar>) = 
    let bars = obs.GroupByUntil((fun x -> x.RequestId), (fun x -> x.Where(fun y -> y.Index = y.Total - 1)))
    bars.SelectMany(fun (x:IGroupedObservable<int, HistoryBar>) -> x.ToArray())

let obs = transformBar |> groupByRequest

client.RequestHistoricalData(1, sym, DateTime.Now, TimeSpan.FromDays(10.0), BarSize.OneDay, HistoricalDataType.Midpoint, 0) 
```

如果我订阅了 obs，那么只要我打电话给`client.RequestHistoricalData`一切都很好。我想做的是将 obs 转换为基础类型，在这种情况下是`HistoryBar []`. 我试过使用`wait`，`ToEnumberable`没有运气。在这里提取我最后创建的数据的正确方法是什么？

编辑，添加人为的 C# 示例代码以显示库的正常工作方式。我在这里真正想了解的是如何从可观察到标准列表或数组。我不确定是否需要一个可变结构才能做到这一点。如果我不得不猜测，我会说不。

```
static void Main(string[] args)
{
...
client.HistoricalData += client_HistoricalData;
client.RequestHistoricalData(1, sym, DateTime.Today, TimeSpan.FromDays(10), BarSize.OneDay, HistoricalDataType.Midpoint, 0);
....
}

static void client_HistoricalData(object sender, HistoricalDataEventArgs e)
{

Console.WriteLine("Open: {0}, High: {1}, Low: {2}, Close: {3}, Date: {4}, RecordId: {5}, RecordIndex: {6}", e.Open, e.High, e.Low, e.Close, e.Date, e.RequestId, e.RecordNumber);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-02T19:33:21.790

这个问题并没有很清楚地首先如何加载数据（无论是惰性/时变等），所以我假设它是一个有时间限制的值流。

从您的代码看来，您似乎想在流完成时找到流中的最后一个值。该`Last`方法为您提供完成时推送的流中的最后一个值 - 然而，这是同步的并且阻塞直到流完成。非阻塞版本，`LastAsync`返回一个 Observable，它在源完成时产生一个值。

```
let from0To4 = 
    Observable.Interval(TimeSpan.FromSeconds(0.1)).Take(5)

let lastValue =
    from0To4.LastAsync()

let disposable =
    lastValue |> Observable.subscribe(log) 
```

要将 Observable 转换为列表而不部分阻塞，您可以使用这些`Buffer`方法。要在 Observable 完成之前缓冲所有值，请使用`ToList`.

```
let fullBuffer =
    from0To4.ToList()

let disposable =
    fullBuffer |> Observable.subscribe(fun ls -> printfn "Buffer(%d): %A" ls.Count ls) 
```

输出：

> 缓冲区（5）：seq [0L; 1升；2升；3升；...]

# grails - 在过滤器中渲染 GSP 不起作用

> ID：13666997
> 
> 赞同：2
> 
> 时间：2012-12-02T06:31:29.987
> 
> 标签：grails, filter

我正在尝试在我的过滤器的视图文件夹中呈现一个 .GSP 视图。以下代码表明：

```
def filters = {
   all(controller:'*', action:'*') {

      afterView = { Exception e ->

         if (controllerName) {
            //some code here

            if (annotation!=null) {
               switch(response.format){

                  case 'all':
                     if(!response.containsHeader("AC_MSG")|| !response.containsHeader("AC_STATUS")){

                        render(view: "/internalerror", model: [controller: controllerName,action:currentAction,
                               message:"Response doesn't contain required headers AC_MSG or AC_STATUS. Either add the required headers or use json format.",
                               example:"Add the following response headers: AC_MSG:response message , AC_STATUS: false or true"
                        ])
                        return false
                     }

                     break
                  default:
                     render status: 406
                     break
               }
            }
         }
      }
   }
} 
```

问题是即使执行了代码，这个页面也没有被渲染。该页面直接在视图目录上。我做错了什么？

谢谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T00:02:31.257

我不认为过滤器可以呈现 gsp，但控制器可以。

文档中提供了您想要做的一个完美示例：[过滤器](http://grails.org/doc/latest/ref/Plug-ins/filters.html)

基本上，您在呈现页面的控制器内创建一个动作，过滤器只是重定向到该动作。

案例“全部”：

```
 if(!response.containsHeader("AC_MSG")|| !response.containsHeader("AC_STATUS")) {

                    redirect(controller: "someController", action:"someAction")
                    return false
                 } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-02T18:58:13.670

制作 ErrorController.groovy 并使用此渲染视图和参数实现操作。在过滤器中仅使用重定向。也删除“return false”语句。

# apache - 使用 Linux 脚本或安装在 linux 上的一些软件在云中编码视频

> ID：13666999
> 
> 赞同：1
> 
> 时间：2012-12-02T06:32:07.257
> 
> 标签：apache, ubuntu, webserver, video-encoding

我想对用户上传的视频进行编码，类似于 youtube，它将您上传的任何视频类型转换为 flv、mp4、webm。因为我只能在我的 Webapp 中播放 webm、html5 视频所以我需要做这件事。我试过 www.zencoder.net 但这对我来说代价高昂，因为我大部分时间都必须编码太多的视频。

有什么解决方案吗，如何做到这一点，我有 ubuntu 12.04 服务器，我认为这可以通过编写脚本或只是将视频解析为已安装的编码软件来完成，但不知道如何将视频传递给编码器，以及应该使用什么编码器我安装在我的 linux 上。

我在我的云存储网站中使用 php 作为服务器端语言

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-02T06:36:13.910

[您可以通过使用FFmpeg](http://ffmpeg.org/ffmpeg.html)对视频进行编码来做到这一点。

在命令行上，您可以使用： `ffmpeg -i file.mp4 file.mp4.avi`

您可以使用[ffmpeg-php](http://ffmpeg-php.sourceforge.net/doc/api/ffmpeg_movie.php)和 PHP 来获得一些 ffmpeg 功能。但看起来您将不得不使用带有 php`exec`函数的命令行。

```
$fileToFlv="/var/www/test/input.wmv";
$fileFlv="/var/www/test/test.flv";

exec("/usr/bin/ffmpeg -i ".$fileToFlv." -ar 22050 -ab 32 -f flv -s 320x256 ".$fileFlv); 
```