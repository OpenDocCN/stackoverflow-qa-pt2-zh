# StackOverflow 问答 12509000-12509999

# java - 在jsf中使用不同bean的策略

> ID：12509001
> 
> 赞同：1
> 
> 时间：2012-09-20T08:41:24.733
> 
> 标签：java, spring, jsf, jsf-2, javabeans

我想为一个 JSF 页面使用 2 个不同的 bean（Spring）。我不喜欢将每个方法都写到一个 bean 中，所以我尝试将它们分成两个 bean，比如`JobEditDataBean`and `JobEditActionBean`。我想将 JobEdiDataBean 用作我的数据对象的“容器”，并将操作（如保存、更新等）移动到操作 bean。我现在所做的（以及似乎有效，但感觉不对）如下：

```
public class JobEditDataBean{
    @Autowired
    JobEditActionBean actionBean;
    // some objects...
    @PostConstruct
    public void init() {
       actionBean.setJobEditDataBean(this);
       // do something ... 
    }
}

public class JobEditActionBean{
    JobEditDataBean dataBean;
    // some objects...
} 
```

你有什么提示或技巧可以做得更好，更好吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T09:10:44.570

实际上，您不需要每个页面都有一个 bean。您可以为任何页面使用尽可能多的 bean，这很好，因为只要`#{someMB}`在 XHTML 中找到类似的表达式，JSF 就会找到具有该名称的 bean 并在必要时创建一个新实例。

如果您需要将一个 bean 注入另一个，只需使用`@Autowired`：

```
@Component
@Scope("request")
public class JobEditActionBean {
    @Autowired
    private JobEditDataBean dataBean;
    @PostConstruct
    public void init() {
        // dataBean.youCanUseDataBeanMethodsHereAlready()
    }
} 
```

您只需要确保两个 bean 都在 Spring 容器中（使用注释即可`@Component`），并为每个 bean 选择正确的范围。请注意您要注入的 bean 的范围，因为通常只有将更广泛范围的 bean 注入到相同或更多限制范围的 bean 中才有意义。

话虽如此，我建议阅读以下有关选择正确范围的主题：

[如何选择合适的bean范围？](https://stackoverflow.com/questions/7031885/how-to-choose-the-right-bean-scope)

还有一件事：这仅在您的 JSF bean 真正由 Spring 容器管理时才有效（这是我在使用后的假设`@Autowired`）。如果您让 JSF 容器管理 bean（例如使用`@ManagedBean`with`@RequestScoped`或`@ViewScoped`），则注入它们的方式是使用`@ManagedProperty`注释：

```
 ...
    @ManagedProperty("#{jobEditDataBean}")
    private JobEditDataBean dataBean; 
```

# openssl - SSL_accept 成功后 SSL_read 失败（服务器应用程序）

> ID：12509006
> 
> 赞同：0
> 
> 时间：2012-09-20T08:41:54.840
> 
> 标签：openssl

在用 C 编码的 SSL 服务器中，我试图捕获浏览器标头，服务器在 linux 机器上的端口 443 上运行，还通过在 Windows\System32\drivers\etc\ 的主机文件中添加服务器名称来解析主机名主机 SSL 握手似乎成功，但 SSL_read 失败，请帮助，还请在下面找到服务器信息输出：

```
ssl = SSL_new(ctx);

    RETURN_NULL(ssl);

    if(SSL_set_fd(ssl, client_s)<0)
        printf("\n error in assigning socket to SSL:");
    else
        printf("\n The socket has been assigned to SSL Structure");

    /* Perform SSL Handshake on the SSL server */
    err = SSL_accept(ssl);
    printf("\n Value of err is %d",err);
    RETURN_ERR(err,"SSL_accept");
    if(err==1)
        printf("\n The ssl connection/Handshake has been successful");
    else
        printf("\n The ssl connection was not successful");

    /* Informational output (optional) */
        printf("\n SSL connection using %s\n", SSL_get_cipher (ssl));

    /*receive the data from the client*/
    //err = SSL_accept(ssl);
    while(i<5)
    {
        err = SSL_read(ssl, in_buf, strlen(in_buf));
        printf("\n value of err is %d",err);
        RETURN_ERR(err,"SSL_read");

        printf("\n The details from the server is\n: %s,\n Bytes Read : %d",in_buf,err);
        if(err<0)
        printf("\n Not Successfully received clients information");
        i++;
     }
     err = SSL_shutdown(ssl);
    /* Terminate communication on a socket */
    err = close(server_s);
    /* Free the SSL structure */
    SSL_free(ssl);
    /* Free the SSL_CTX structure */
    SSL_CTX_free(ctx);

    return(0);
    } 
```

我使用 IE (url: [https://myserver.com/test2.jpg](https://myserver.com/test2.jpg) ) 得到的上述代码的输出如下：

```
root@unnidevelubuntu:/programs# gcc -lssl trial11.c -o trial11
root@unnidevelubuntu:/programs# ./trial11

 Available ciphers and digests has been registered :
 New SSL_CTX object created successfully :
Enter PEM pass phrase:

 The key & Certificate has been loaded successfully :
 Server is waiting for a TCP/IP Connection :
 private key matches the certificate public key :server is ready ...

 Connection from 192.168.0.15, port 56969
a new client arrives ...

 The socket has been assigned to SSL Structure
 Value of err is 1
 The ssl connection/Handshake has been successful
 SSL connection using RC4-SHA

 value of err is 0
 The details from the server is
: ,
 Bytes Read : 0
 value of err is 0
 The details from the server is
: ,
 Bytes Read : 0
 value of err is 0
 The details from the server is
: ,
 Bytes Read : 0
 value of err is 0
 The details from the server is 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T12:45:36.560

上面的问题已经解决了，问题是在SSL_read中使用strlen如下： err = SSL_read(ssl, in_buf, strlen(in_buf)); printf("\n err 的值为 %d",err); RETURN_ERR(err,"SSL_read");

您需要使用 sizeof 而不是 SSL_read，并且程序运行良好，它为您提供来自浏览器的标题。

# database - 将具有两个属性的唯一数据存储到数据库表中？

> ID：12509008
> 
> 赞同：0
> 
> 时间：2012-09-20T08:42:04.473
> 
> 标签：database

就像我的学校有经度和纬度一样，我需要为它创建一个新表吗？

或者我只是将这两个值组合成一个字符串，然后将此字符串插入到现有的键值对设置表中？

欢迎任何建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T08:52:37.340

我会把它们存储起来......我也会考虑让它们成为主键。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T08:53:45.153

这取决于您以后需要如何使用它。如果您在某些逻辑处理中需要纬度和经度，则建议将它们分别存储在两列中。但是，如果您只需要在某个位置（例如学校信息页面）显示它，那么您可以将它们作为字符串存储在一起。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-20T11:50:04.780

更好的方法是将它们放在单独的列中，因为这些值将用于计算。

# excel - 使用两张 Excel 表格生成图表

> ID：12509009
> 
> 赞同：0
> 
> 时间：2012-09-20T08:42:19.707
> 
> 标签：excel, vba

我已经编写了使用两张表数据生成图表的代码。
代码是

```
 ActiveChart.SeriesCollection.NewSeries
ActiveChart.SeriesCollection(2).XValues = "=SPEC!$B$2:$J$2"
ActiveChart.SeriesCollection(2).Values = "=SPEC!$B$6:$J$6"
ActiveChart.SeriesCollection.NewSeries
ActiveChart.SeriesCollection(3).Values = "=reference_curve!$D$4:$D$303"
ActiveChart.SeriesCollection(3).XValues = "=reference_curve!$C$4:$C$303"` 
```

它工作正常，但问题是我想使用范围变量来选择数据。

```
dim test as range
test = "=SPEC!$B$6:$J$6"
ActiveChart.SeriesCollection.NewSeries
ActiveChart.SeriesCollection(2).XValues = "=SPEC!$B$2:$J$2"
ActiveChart.SeriesCollection(2).Values = test
ActiveChart.SeriesCollection.NewSeries
ActiveChart.SeriesCollection(3).Values = "=reference_curve!$D$4:$D$303"
ActiveChart.SeriesCollection(3).XValues = "=reference_curve!$C$4:$C$303" 
```

这个不工作请帮帮我

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T10:11:29.330

这是您设置变量以存储范围的方式：

```
dim test as range
Set test = Range("SPEC!$B$6:$J$6") 
```

# javascript - Firefox 扩展，来自面板小部件的 URL 重定向

> ID：12509010
> 
> 赞同：0
> 
> 时间：2012-09-20T08:42:22.970
> 
> 标签：javascript, html, firefox

我有一个 Firefox 插件。我用 HTML 和 CSS 创建了一个漂亮的面板小部件。现在，我只需要让我的脚本从面板小部件中运行。我尝试将当前选项卡重定向到按钮值中指定的新 url，如下所示：

```
<button class="myBtnClass AllBtnStyles" value="www.example.com/info">Info</button> 
```

我的文件中也有这个脚本；

```
$(".myBtnClass").click(function () {
        window.content.location.href = $(this).attr('value');      
    }); 
```

但是在按钮上单击当前选项卡会被重定向到

```
resource://jid0-ulah35kcypxsda4kbau4uierkjw-at-jetpack/add-on-name/data/www.example.com/info 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T09:23:35.430

您无法更改面板内容脚本中的选项卡，您需要将地址传递给附加脚本。

因此，在您的面板脚本中：

```
$(".myBtnClass").click(function () {
    self.port.emit("changeTab", $(this).attr("value"));
}); 
```

在您的附加脚本中，您需要监听端口事件：（假设您的面板名为`panel`）

```
panel.port.on("changeTab", function(url) {
    var tabs = require("tabs");
    tabs.open(url); // open the url in a new tab
}); 
```

[请参阅https://addons.mozilla.org/en-US/developers/docs/sdk/latest/dev-guide/guides/content-scripts/using-port.html](https://addons.mozilla.org/en-US/developers/docs/sdk/latest/dev-guide/guides/content-scripts/using-port.html)`port`上的文档

# java - 如何在执行测试之前/之后清理 HornetQ 消息日志？

> ID：12509012
> 
> 赞同：3
> 
> 时间：2012-09-20T08:42:29.503
> 
> 标签：java, jms, java-ee-6, jboss7.x, hornetq

有一个使用带有持久消息的**JMS HornetQ的****Arquillian**集成测试。一些测试使消息日志充满了未处理的消息，这些消息破坏了其他不期望数据的测试。

 **有没有办法告诉**JMS**在执行测试之前或之后清理其消息传递日志？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-20T11:39:25.873

这在 JMS API 本身中不存在，但在 HornetQ QueueControl 管理对象中有一个方法“removeMessages(filter)”。这个方法可以在队列的 JMX Bean 中找到，但我不知道如何在 Arquillian 中获得它。

幸运的是，您可以通过“hornetq.management”队列调用管理操作。请参阅[http://docs.jboss.org/hornetq/2.2.5.Final/user-manual/en/html/management.html](http://docs.jboss.org/hornetq/2.2.5.Final/user-manual/en/html/management.html)。在实践中，以下应该起作用：

```
 Queue managementQueue = HornetQJMSClient.createQueue("hornetq.management");
     QueueRequestor requestor = new QueueRequestor(session, managementQueue);
     Message m = session.createMessage();
     JMSManagementHelper.putOperationInvocation(m,
                                                "jms.queue.exampleQueue",
                                                "removeMessages","*");
     Message reply = requestor.request(m);
     boolean success = JMSManagementHelper.hasOperationSucceeded(reply); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-21T15:11:18.973

如果要重新启动服务器，则可以删除分页和数据文件夹（同时保留绑定）。**

# mongodb - 使用地理空间索引查询源和目的地 mongodb mongomapper

> ID：12509013
> 
> 赞同：2
> 
> 时间：2012-09-20T08:42:31.040
> 
> 标签：mongodb, ruby-on-rails-3.2, geospatial, mongomapper

我的**mongodb**集合中有源和目标字段，名为`Flight`. 这两个字段都进行了地理空间索引，并以 lat-long 格式编写。我正在使用 mongomapper 从 rails 控制器查询它。

我想编写如下查询。

```
Result= Flight.where(:source => {'$near' =>  location_src} , :destination => {'$near' => location_dest} ) 
```

其中 location_src 和 location_dest 是经纬度格式的 gui 输入。

但是，当我尝试通过写入`Result.first`或访问结果时`Result.all`，它会说 `Mongo::OperationFailure: can't have 2 special fields`.

谁能建议我有什么解决方法？

亲切的问候，阿姆里什。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T12:54:15.050

我找到了一个简单的解决方法，可以满足我的目的，并且可能对面临类似情况的人有所帮助。

虽然 mongodb 不支持同时对多个字段进行地理空间查询，但它仍然支持同时对多个字段进行地理空间索引。因此，我们将依次对两个字段进行查询，如下所示。

*   start_place : 起始地点的名称
*   start_place_loc ：起始位置的坐标（索引地理空间字段）
*   end_place : 目的地名称
*   end_place_loc ：目标位置的坐标（索引地理空间字段）

以下是示例代码。

```
tmp=Flight.distinct(:start_place,:start_place_loc => {'$near' =>  location_src} )

Result=Flight.where(:start_place_loc => {'$near' =>  location_src} , :start_place => {'$in' => tmp}) 
```

此外，需要根据自己的要求设置 '$maxDistance' => "value"。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T10:54:50.387

目前 Mongodb 仅支持每个集合 1 个地理索引。这是记录在案的，从[这个页面](http://www.mongodb.org/display/DOCS/Geospatial+Indexing)

> 目前，每个集合可能只有 1 个地理空间索引。虽然 MongoDB 可能允许创建多个索引，但不支持此行为。因为 MongoDB 只能使用一个索引来支持单个查询，所以在大多数情况下，拥有多个地理索引会产生不良行为。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-04T14:58:44.120

@Amrish

目前 mongodb 每个集合只能有一个 2d 索引，但是您可以拥有多位置文档。

地址 : [ {loc:[Lon,Lat], // or {lon: "somevalue" , lat:"somevalue"} name:"start" },

{loc:[Lon,Lat], // 或 {lon: "somevalue" , lat:"somevalue"} name:"end" }, ]

您可以在 Address.loc 上拥有 2d 索引

这对搜索 $near 和 geoNear 很有帮助，并可用于解决方法来搜索查找靠近给定 lat-lng 对的所有“起点”点

另请注意：它应该是 (long,lat) 对而不是反向。

]

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-04T15:02:31.927

看起来SO有之字形的例子

很快，将 (lng,lat) 对放在 name:start 或 name:end 中。使上述对的数组将二维索引放在上面的数组上。

这可以帮助您查询找到给定 (lng,lat) 对附近的所有起点。这可以帮助您查询找到给定 (lng,lat) 对附近的所有端点。

并且您应该能够对上述两个操作使用 AND/OR 等操作

# jquery - ASP.NET MVC3 清除表单

> ID：12509028
> 
> 赞同：2
> 
> 时间：2012-09-20T08:43:08.647
> 
> 标签：jquery, asp.net, ajax, asp.net-mvc

我是 asp.net mvc 的新手，我找不到最好的方法：

我有一个带有下拉列表的表单。在控制器中，在填充表单时，我设置：（
`ViewBag.DDLCONTENT = ....`并从数据库中获取）；

如果我用 ajax 重新填充控制器中的表单，`ViewBag.DDLCONTENT`将变为空。那么我应该这样做而不必再次调用数据库吗？

如果我的问题不够清楚，我可以发布完整的代码
谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T09:45:20.303

> 那么我应该这样做而不必再次调用数据库吗？

再次调用数据库。DropDownList 仅将选定的值发送到服务器。或者，如果您想避免调用它，您可以将这些值存储在缓存中。但是，如果数据库中的数据在两者之间发生变化，您可能无论如何都想调用它来检索新数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T09:45:09.600

将下拉列表放在 div 中，然后在重新填充表单之前克隆 div。无论哪种方式，由于这是通过 AJAX 客户端完成的，因此您的解决方案将需要来自客户端代码，例如 javascript 或 jquery。

```
<div id="ddlClone">@Html.DropDownFor()</div>
<script type="text/javascript">
 var cloneForLater = $("#ddlClone").clone(true);
</script> 
```

Darin 确实对新数据提出了很好的看法。如果数据可能已过时，则应再次调用数据库。

# wcf - WCF 服务日志 - 超过文件大小限制时创建一个新文件或每天创建一个

> ID：12509029
> 
> 赞同：0
> 
> 时间：2012-09-20T08:43:10.103
> 
> 标签：wcf

我的应用程序正在使用 WCF，并且我正在服务器上创建一个服务日志文件。它工作正常，它正在编写相同的 svclog 文件，并且它的大小正在增加。

当新的 svclog 文件达到我希望它为 50MB 的固定文件大小时，我需要做什么来创建一个新的 svclog 文件，或者它每天都会创建一个新的 svclog 文件。

目前，源和监听器已经在 web.config 文件中定义如下：

```
<system.diagnostics>
<sources>
  <source name="System.ServiceModel.MessageLogging" switchValue="Warning, ActivityTracing">
    <listeners>
      <add name="ServiceModelTraceListener" />
    </listeners>
  </source>
  <source name="System.ServiceModel" switchValue="Verbose,ActivityTracing">
    <listeners>
      <add name="ServiceModelTraceListener" />
    </listeners>
  </source>
  <source name="System.Runtime.Serialization" switchValue="Verbose,ActivityTracing">
    <listeners>
      <add name="ServiceModelTraceListener" />
    </listeners>
  </source>
</sources>
<sharedListeners>
  <add initializeData="C:\ServiceLogs\app_tracelog.svclog" type="System.Diagnostics.XmlWriterTraceListener, System, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" name="ServiceModelTraceListener" traceOutputOptions="Timestamp" />
</sharedListeners>
</system.diagnostics> 
```

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-20T09:28:57.470

您应该创建一个自定义跟踪侦听器。MS为此提供了一个完美的样本！这个例子不能完全符合你的需要，但它很容易理解，所以可以改变。

更多信息[在这里](http://msdn.microsoft.com/en-us/library/aa395205.aspx)

# php - 在文档就绪时通过 AJAX 安全地执行查询

> ID：12509037
> 
> 赞同：0
> 
> 时间：2012-09-20T08:43:48.210
> 
> 标签：php, javascript, mysql, ajax, security

问候大家，

我的问题是这样的：我在我的网站上有一些定制的统计数据，我在其中记录用户所做的信息（谷歌分析 - 像）。显然，我在几个月内汇总了信息，但我存储信息的表格变得太大，对页面加载产生了负面影响。流程是这样的（在索引中，所以影响所有页面）：

```
1\. Get the included files
2\. Execute part of statistics queries
3\. Effective page code
4\. Execute the last part of statistics queries 
```

为了摆脱这个问题，我想`<body onload="execQueries();">`使用 javascript / AJAX 在文档上或文档上进行这些查询。

我怎样才能安全可靠地使用 AJAX 进行这些查询，这样就不会被精通 javascript/ajax 的客户滥用。因为如果我只是简单地制作那个 JS 函数，它就可以被带有 firebug 的用户每次访问。

我考虑的解决方案包括使用`$_SESSION`我在 index.php 顶部标记的关于这些查询（ id, info ）的信息以及在 AJAX 调用的脚本中我检查是否`$_SESSION['query_info']`已设置并执行它以读取所有信息从那里开始，然后我使用`unset($_SESSION['query_info']);`. 因此，如果再次调用 AJAX，因为`$_SESSION['query_info']`不存在特定的 tat，我不会在我的数据库中做任何事情。

您认为这是一个安全的解决方案还是您有其他想法？任何可行的东西都是受欢迎的。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T08:54:40.683

尝试将相关的 javascript 代码放入[Closures](http://robertnyman.com/2008/10/09/explaining-javascript-scope-and-closures/)中。

# c - 给定 C 中的值，我可以打印 #defines 吗？

> ID：12509038
> 
> 赞同：1
> 
> 时间：2012-09-20T08:43:51.670
> 
> 标签：c

我有

```
#define ADD 5
#define SUB 6 
```

给定它们的值 5 和 6，我可以打印 ADD 和 SUB 吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-20T08:46:17.040

不。

`define`d 符号的名称被预处理器删除，因此编译器永远不会看到它们。

如果这些名称在运行时很重要，那么它们需要以比预处理器符号名称更持久的方式编码。也许是一个带有字符串和整数的表：

```
#define DEFINE_OP(n) { #n, n }

static const struct {
  const char *name;
  int        value;
} operators[] = {
  DEFINE_OP(ADD),
  DEFINE_OP(SUB),
}; 
```

这使用字符串化预处理器运算符`#`来避免重复。

有了上面的内容，您可以轻松编写查找代码：

```
const char * op_to_name(int op)
{
  size_t i;

  for(i = 0; i < sizeof operators / sizeof *operators; ++i)
    if(operators[i].value == op)
      return operators[i].name;
  return NULL;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-20T08:46:56.417

你可以做类似的事情

```
printf("%d", ADD); 
```

它会打印 5

关于定义，您必须记住的是：
定义在编译之前由预处理器替换到源代码中，因此代码中的所有 ADD 实例都替换为 5。在预处理器之后，printf 如下所示：

```
printf("%d", 5); 
```

所以回答你的问题：
不，你不能那样做。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-20T11:42:32.313

使用现代 C，自 C99 以来，这甚至比使用指定初始化程序和复合文字的 unwind 答案简单得多

```
#define DEFINE_OP(n) [n] = #n

#define OPNAMES ((char const*const opNames[]){  \
  DEFINE_OPT(ADD),                              \
  DEFINE_OPT(SUB),                              \
  })

inline
char const* getOp(unsigned op) {
  size_t const maxOp = sizeof OPNAMES/ sizeof *OPNAMES;
  if (op >= maxOp || !OPNAMES[op]) return "<unknown operator>";
  else return OPNAMES[op];
} 
```

任何现代编译器都应该能够`getOp(ADD)`在编译时扩展调用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-20T08:49:56.417

是的，但不是通过某种反向查找机制，其中值`5`对于 string 具有某种象征意义`"ADD"`。通过 a 定义的符号`#define`在结构上被预处理器替换。但是，您可以保持简单：

```
const char *get_name(int value) {
    switch(value) {
    case ADD:
        return "ADD";
    case SUB:
        return "SUB";
    default:
        return "WHATEVER";
    }
}

#include <stdio.h>

int main() {
    printf("%s = %d\n", get_name(ADD), ADD);
    printf("%s = %d", get_name(SUB), SUB);
} 
```

# .net - TPL 数据流链接到多个消费者不起作用

> ID：12509039
> 
> 赞同：6
> 
> 时间：2012-09-20T08:43:51.783
> 
> 标签：.net, task-parallel-library, tpl-dataflow

我有一个 BufferBlock 来发布消息：

```
public class DelimitedFileBlock : ISourceBlock<string>
{
    private ISourceBlock<string> _source;
    _source = new BufferBlock<string>(new DataflowBlockOptions() { BoundedCapacity = 10000 });

    //Read a file
    While(!eof)
        row = read one row 
    //if consumers are slow, then sleep for a while
    while(!(_source as BufferBlock<string>).Post<string>(row))
    {
        Thread.Sleep(5000);
    }
} 
```

这是一个 5GB 的文件，有 2400 万行。

我现在有一个使用 ActionBlock 的 Target 块：

```
public class SolaceTargetBlock : ITargetBlock<string>
       private ActionBlock<IBasicDataContract> _publishToSolaceBlock;

       public DataflowMessageStatus OfferMessage(DataflowMessageHeader messageHeader, string messageValue, ISourceBlock<string> source, bool consumeToAccept)
    {
        //post to another block to publish
        bool success = _publishToSolaceBlock.Post(messageValue); 
```

现在在控制台应用程序中，我指定：

```
 SolaceTargetBlock solaceTargetBlock1 = new SolaceTargetBlock("someparam", 
            new ExecutionDataflowBlockOptions() { MaxDegreeOfParallelism = 10, BoundedCapacity = 1 });
 SolaceTargetBlock solaceTargetBlock2 = new SolaceTargetBlock("someparam", 
            new ExecutionDataflowBlockOptions() { MaxDegreeOfParallelism = 10, BoundedCapacity = 1 });
 SolaceTargetBlock solaceTargetBlock3 = new SolaceTargetBlock("someparam", 
            new ExecutionDataflowBlockOptions() { MaxDegreeOfParallelism = 10, BoundedCapacity = 1 });

 DelimitedFileBlock delimitedFileBlock = new DelimitedFileBlock(csvFileInfo); 
```

我将有限容量保持为 1 仅用于测试。

现在我使用 LinkTo 将这三个消费者链接到我的源：

```
 delimitedFileBlock.LinkTo(solaceTargetBlock1);      
 delimitedFileBlock.LinkTo(solaceTargetBlock2);      
 delimitedFileBlock.LinkTo(solaceTargetBlock3); 
```

这在 10003 行之后转到 Thread.Sleep(5000) 语句，并且 while 循环中的 Post 始终返回 false。

我期待，因为我有 LinkTo，所以完成后 solaceTargetBlocks 将能够选择下一条消息，但 LinkTo 不会清除 BufferBlock。那么，如何在多个消费者之间进行负载平衡。我是否必须接收并编写一个简单的负载平衡逻辑才能在消费者之间分配？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-11-16T21:09:13.653

从[类](http://msdn.microsoft.com/en-us/library/hh160425.aspx)[`Post`方法](http://msdn.microsoft.com/en-us/library/hh194836.aspx)的文档中（强调我的）：[`DataflowBlock<T>`](http://msdn.microsoft.com/en-us/library/hh160425.aspx)

> 一旦目标块决定**接受或拒绝**该项目，此方法将返回，

这意味着目标可以选择拒绝阻止（这是您看到的行为）。

此外，它指出：

> 对于支持延迟提供的消息的目标块，或者对于可能在其 Post 实现中进行更多处理的块，请考虑使用 SendAsync，它将立即返回，并使目标能够延迟发布的消息并稍后在 SendAsync 返回后使用它。

这意味着您*可能会*获得更好的结果（取决于目标块），因为您的消息可能会被推迟，但仍会被处理，而不是完全拒绝。

我想这三个实例的[`BoundedCapacity`属性](http://msdn.microsoft.com/en-us/library/system.threading.tasks.dataflow.dataflowblockoptions.boundedcapacity.aspx)设置都与您所看到的有关：[`BufferBlock<T>`](http://msdn.microsoft.com/en-us/library/hh160414.aspx)[`ActionBlock<TInput>`](http://msdn.microsoft.com/en-us/library/hh194684.aspx)

*   您的最大缓冲区`BufferBlock<T>`为 10000；一旦您将 10,000 个项目放入队列中，它将拒绝其余的（参见上面的第二个引用），因为它无法处理它们（[`SendAsync`](http://msdn.microsoft.com/en-us/library/hh194681.aspx)在这里也不起作用，因为它无法缓冲要推迟的消息）。

*   您在实例上的最大缓冲区`ActionBlock<TInput>`为 1，并且您拥有其中的三个。

10,000 + (1 * 3) = 10,000 + 3 = 10,003

要解决这个问题，您需要做一些事情。

首先，您需要在创建实例时为属性设置一个更合理的值[`MaxDegreeOfParallelism`。](http://msdn.microsoft.com/en-us/library/system.threading.tasks.dataflow.executiondataflowblockoptions.maxdegreeofparallelism.aspx)[`ExecutionDataFlowBlockOptions`](http://msdn.microsoft.com/en-us/library/hh194708.aspx)`ActionBlock<TInput>`

默认情况下，`MaxDegreeOfParallelism`for an`ActionBlock<TInput>`设置为 1；这保证了调用将被序列化，您不必担心线程安全。如果您希望`ActionBlock<T>`关注线程安全，请保留此设置。

如果`ActionBlock<TInput>` *是*线程安全的，那么你没有理由限制它，你应该设置`MaxDegreeOfParallelism`为[`DataflowBlockOptions.Unbounded`](http://msdn.microsoft.com/en-us/library/system.threading.tasks.dataflow.dataflowblockoptions.unbounded.aspx).

如果您正在访问某种`ActionBlock<TInput>`可以在有限的基础上同时访问的共享资源，那么您*可能*做错了事。

如果您有某种共享资源，那么您很可能应该通过另一个块运行它并将其*设置*`MaxDegreeOfParallelism`为.

 *其次，如果您关心吞吐量并且可以接受丢弃的项目，那么您应该设置该`BoundedCapacity`属性。

另请注意，您表示“如果消费者很慢，请睡一会儿”；如果你正确地连接你的块，就没有理由这样做，你应该让数据流过并且*只在你需要*的地方放置限制。你的生产者不应该负责限制消费者，让消费者负责限制。

最后，您的代码看起来不需要自己实现数据流块接口。你可以像这样构造它：

```
// The source, your read lines will be posted here.
var delimitedFileBlock = new BufferBlock<string>();

// The Action for the action blocks.
Action<string> action = 
    s => { /* Do something with the string here. */ };

// Create the action blocks, assuming that
// action is thread-safe, no need to have it process one at a time
// or to bound the capacity.
var solaceActionBlock1 = new ActionBlock<string>(action,
    new ExecutionDataflowBlockOptions { 
        MaxDegreeOfParallelism = DataflowBlockOptions.Unbounded,
    });
var solaceActionBlock2 = new ActionBlock<string>(action,
    new ExecutionDataflowBlockOptions { 
        MaxDegreeOfParallelism = DataflowBlockOptions.Unbounded,
    });
var solaceActionBlock3 = new ActionBlock<string>(action,
    new ExecutionDataflowBlockOptions { 
        MaxDegreeOfParallelism = DataflowBlockOptions.Unbounded,
    });

// Link everything.
delimitedFileBlock.LinkTo(solaceTargetBlock1);
delimitedFileBlock.LinkTo(solaceTargetBlock2);
delimitedFileBlock.LinkTo(solaceTargetBlock3);

// Now read the file, and post to the BufferBlock<T>:
// Note: This is pseudo-code.
while (!eof)
{
    // Read the row.
    string row = ...;

    delimitedFileBlock.Post(read);
} 
```

另请注意，拥有三个`ActionBlock<TInput>`实例是不必要的，除非您需要将输出过滤为不同的操作（您在这里没有这样做），所以上面确实减少了这一点（假设您的操作是线程安全的，所以您要去增加到反正）`MaxDegreeOfParallelism`：`Unbounded`

```
// The source, your read lines will be posted here.
var delimitedFileBlock = new BufferBlock<string>();

// The Action for the action blocks.
Action<string> action = 
    s => { /* Do something with the string here. */ };

// Create the action blocks, assuming that
// action is thread-safe, no need to have it process one at a time
// or to bound the capacity.
var solaceActionBlock1 = new ActionBlock<string>(action,
    new ExecutionDataflowBlockOptions { 
        MaxDegreeOfParallelism = DataflowBlockOptions.Unbounded,
    });

// Link everything.
delimitedFileBlock.LinkTo(solaceTargetBlock);

// Now read the file, and post to the BufferBlock<T>:
// Note: This is pseudo-code.
while (!eof)
{
    // Read the row.
    string row = ...;

    delimitedFileBlock.Post(read);
} 
```*

# php - PHP“fopen”在通过“mkdir”创建的文件夹中的安全模式限制中失败

> ID：12509040
> 
> 赞同：0
> 
> 时间：2012-09-20T08:43:52.113
> 
> 标签：php, fopen, fwrite, mkdir

我使用一个脚本使用 PHP 在服务器上创建一个文件夹，如下所示：

```
mkdir("folder/test/", 0777); 
```

然后我使用另一个脚本创建一个文件并将一些内容放入其中，如下所示：

```
fwrite( fopen('folder/test/filename', 'w'), 'Test text' ); 
```

然而，这会导致：

```
Warning: fopen() [function.fopen]: SAFE MODE Restriction in effect. The script whose uid is XXXXX is not allowed to access ... 
```

但是，如果我尝试在父目录中创建文件，如下所示：

```
fwrite( fopen('folder/filename', 'w'), 'Test text' ); 
```

它工作正常。父文件夹（上例中的“文件夹”）设置为“手动”777，因此“安全模式限制”仅在我第一次使用创建文件夹`mkdir`然后尝试写入同一文件夹时出现。怎么会这样？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T09:22:33.310

从 php 5.3.0 开始，根据手册安全模式已被弃用。尝试升级您的 php 版本或在 php ini 中关闭安全模式

# python - 远程运行 ssh 命令而不重定向输出

> ID：12509042
> 
> 赞同：0
> 
> 时间：2012-09-20T08:43:57.413
> 
> 标签：python, ssh, openssh

我想在我的服务器上运行一个 python 脚本（那个 python 脚本有 GUI）。但我想从 ssh 开始。像这样的东西：

*   `ssh me@server -i my_key "nohup python script.py"` ... > 让脚本永远运行，但它抱怨“无法访问视频驱动程序”，因为它试图使用我的 ssh 终端作为输出。

我能否以某种方式使我的命令输出在服务器机器上运行，而不是在我的终端上运行...基本上类似于“局域网唤醒功能”之类的东西->告诉服务器您想要一些东西，他将使用自己的系统做所有事情（不发送任何输出返回）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T08:51:44.033

关于什么

```
ssh me@server -i my_key "nohup python script.py >/dev/null 2>&1" 
```

当然，您可以使用重定向到某个远程日志文件而不是 /dev/null。? :)

编辑：X 上的 GUI 应用程序通常使用 $DISPLAY 变量来知道它们应该显示在哪里。此外，X11 显示服务器使用授权来允许或禁止应用程序连接到其显示器。命令

```
export DISPLAY=:0 && xhost + 
```

可能对你有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T08:58:22.900

您是否可以宁愿使用[python ssh 扩展](http://zeth.net/post/332/)而不是调用外部应用程序？

它会：

*   作为一个进程运行
*   保证调用在所有可能的系统中都是相同的
*   失去“执行”的开销
*   通过 ssh 发送所有内容（您不必担心像这样的输入`"; possibly local executed command`）

如果没有，请遵循 Piotr Wades 的建议。

# delphi - 寻求标准桌面应用程序的框架或骨架

> ID：12509048
> 
> 赞同：1
> 
> 时间：2012-09-20T08:44:17.527
> 
> 标签：delphi

每个应用程序似乎都是从我拿一个类似的应用程序开始的，把它的“肉”扔掉，然后为我的新项目使用骨架。

我并不总是从以前的项目中得到我想要的一切，我也不需要它的一切，但某些事情会一次又一次地出现：

*   关于框（直接从项目选项中从应用名称和版本号生成联系电子邮件）
*   启动画面（来源和持续时间）
*   只允许单个副本运行
*   防止任务切换
*   接受丢弃的文件？
*   最小化到托盘
*   隐藏在任务管理器中
*   最近的文件列表

之类的东西。

几年前，我也曾经有过这样的 C++ Builder 骨架。它只是读取一个 .INI 文件并相应地自定义应用程序的行为。

在我不厌其烦地将它移植到 Delphi 之前，有没有人知道任何类似的免费可用的东西？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T09:07:54.450

您可以简单地创建您的骨架项目并将其添加到存储库（IDE 菜单 Project\Add to Repository）。

如果您希望能够根据某些参数（用户输入）动态创建不同的项目，您还可以使用 OpenTools API[编写向导。](http://docwiki.embarcadero.com/RADStudio/en/Writing_a_Wizard_Class)

# java - 在'mvn install'之后仍然找不到包

> ID：12509050
> 
> 赞同：2
> 
> 时间：2012-09-20T08:44:30.347
> 
> 标签：java, maven, protocol-buffers

我正在尝试将 Google 协议缓冲区用于 Java（我是 Java 新手，只是在尝试）。

首先，我使用的是 OSX，并且我已经使用`brew install protobuf`命令安装了协议缓冲区。

protoc 命令工作正常。

我是`MyProtocol.java`由 protoc 生成的。

我已经安装了 Java 的协议缓冲区作为它的指令（README.txt）。

`mvn install`命令创建了`.m2`目录，我可以`protobuf-java-2.4.1.jar`在目录中的某处找到文件。

我写了简单的测试 Java 代码只是导入`MyProtocol.java`它抱怨找不到包`com.google.protobuf`。

所以，我刚刚制作了 jar 文件`mvn package`并将其目录添加为 CLASSPATH 并且编译良好。

```
javac -classpath <protobuf-dir>/jara/target/classes Test.java ./com/example/tutorial/AddressBookProtos.java 
```

如果我使用 maven 的存储库目录 ( `~/.m2/repository`)，它会再次抱怨。

**如果我安装软件包，maven 不会为我制作 CLASSPATH 吗？如果没有，我如何使用 maven 安装的包来编译我的代码？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T12:02:01.173

[Maven Dependency Plugin](http://maven.apache.org/plugins/maven-dependency-plugin/)有一个目标，称为它[`build-classpath`](http://maven.apache.org/plugins/maven-dependency-plugin/build-classpath-mojo.html)可以满足您的需求。[您可以在使用页面](http://maven.apache.org/plugins/maven-dependency-plugin/usage.html#The_dependency%3abuild-classpath_mojo "依赖的用法：build-classpath")获取使用提示

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T11:57:00.590

Maven 不会更改您的设置，因此您可以根据需要设置 CLASSPATH。

但是，Maven 至少可以通过两种方式阻止您：

*   您可以使用[Maven Assembly 插件](http://maven.apache.org/plugins/maven-assembly-plugin/)将所有依赖项收集到一个目录或存档中，这样您只需将一个目录添加到您的 CLASSPATH 即可运行您的程序；
*   您可以使用[Exec Maven 插件](http://mojo.codehaus.org/exec-maven-plugin/)将程序的运行添加为 POM 中的目标，然后使用 Maven 运行它。

# eclipse - Eclipse中的Subversion（Subclipse）-历史，为什么最新版本不是当前版本？

> ID：12509051
> 
> 赞同：2
> 
> 时间：2012-09-20T08:44:40.790
> 
> 标签：eclipse, svn, subclipse

我注意到很多，当我在 Eclipse 中查看 Subversion 中的文件历史记录时，最新版本并不总是我正在使用的版本，即使我已经完成了 SVN 更新，并对文件进行了还原. 我以截图为例。任何想法为什么会这样？

![在此处输入图像描述](../Images/ef740eb4e50414bae7df905c07173a7e.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T17:20:27.593

它可能是 SVN 信息的陈旧缓存。尝试执行团队 > 刷新/清理。

# android - 在 Android Eclipse 中向 JSON 添加元素

> ID：12509053
> 
> 赞同：0
> 
> 时间：2012-09-20T08:44:41.983
> 
> 标签：android, eclipse, json

我正在使用 Eclipse 和 Android 项目。我已经解析了 JSON 并将内容作为字符串。我有一个像这样的 JSON：

```
{        
"state":{
"updated":"2012-07-16T19:20:30",
"value":604,
"variables":{
    "var1":12,
    "var2":47,
    "var3":77,
    "var4":77
    }
} 
} 
```

我想在 Android 中将 "var5":value 添加到 JSON 中。该值可以是字符串、十进制、数组、整数等。我希望将更新后的 JSON 作为字符串。谁能帮我？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T08:52:02.423

通过以下方式从字符串创建一个新的 JSONObject：

```
String str="{        
"state":{
"updated":"2012-07-16T19:20:30",
"value":604,
"variables":{
    "var1":12,
    "var2":47,
    "var3":77,
    "var4":77
    }
} 
}";
JSONObject jsonObject=new JSONObject(str); 
```

现在通过以下方式从该对象中获取带有关键“变量”的 JSONObject：

```
JSONObject variables=jsonObject.getJSONObject("variables"); 
```

要向此 JSONObject 添加新值，请使用：

```
variables.put("var5", newValue); 
```

现在把这个 json 对象变量放到 jsonObject 中。

```
jsonObject.put("variables", variables); 
```

并将此 jsonObject 作为字符串获取：

```
String strResult=jsonObject.toString(); 
```

# xpages - ExtLib Mobile Controls - 如何构建一个按钮来切换到一个appPage

> ID：12509054
> 
> 赞同：0
> 
> 时间：2012-09-20T08:44:46.250
> 
> 标签：xpages

我正在为现有应用程序的移动用户开发 XPage。我想为此使用 ExtLib 中的移动控件。

我已经构建了一个带有 SinglePageApp 和一些 AppPages 的 XPage。现在我想用一个搜索菜单、一个简单的 inputText 和一个开始搜索的按钮构建一个 AppPage。

inputText 绑定到 sessionScope 变量。我想在第二个 appPage 中使用该变量来获取搜索值并显示过滤/搜索的视图。

问题是按钮。我不确定如何构建此按钮以移动到其他 appPage。这是我最后一次尝试，失败并出现运行时错误。

知道如何让它运行或有什么问题吗？

亲切的问候英戈

```
<xe:appPage id="appPage34" pageName="searchPage" preload="true" resetContent="true">
        <xe:djxmHeading id="djxmHeading34" label="Search..." back="Home" moveTo="home">
        </xe:djxmHeading>
        <xp:inputText id="searchInput" value="#{sessionScope.searchValue}">
        </xp:inputText>
        <xp:button value="Search" id="button1" refreshMode="complete" type="submit">
            <xp:eventHandler event="onclick" submit="true">
                <xp:this.action>
                    <xe:moveTo targetPage="#searchResult"></xe:moveTo>
                </xp:this.action>
            </xp:eventHandler>
        </xp:button>
    </xe:appPage> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T08:57:49.130

运行时错误说明了什么？

如果您不能直接访问服务器上的 XPages 日志文件，那么使用[OpenNTF](http://www.openntf.org/internal/home.nsf/project.xsp?name=XPages%20Log%20File%20Reader)中的 XPages Log File Reader 可以轻松地从浏览器访问日志文件。

如果您使用“searchResult”作为值`targetPage`（假设 appPage 称为“searchResult”），它是否有效？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T13:06:55.267

我现在找到了一个使用静态订单项而不是按钮的解决方案，因为我无法让按钮工作。我认为这与单页应用程序处理对移动页面的访问的方式有关。

搜索页面如下所示：

```
<xe:appPage id="appPage34" pageName="searchPage" preload="true" resetContent="true">
        <xe:djxmHeading id="djxmHeading34" label="Search..." back="Home" moveTo="home">
        </xe:djxmHeading>
        <xp:inputText id="searchInput" value="#{sessionScope.searchValue}">
            <xp:eventHandler event="onblur" submit="true" refreshMode="complete">
                <xp:this.action>
                    <xp:executeScript>
                        <xp:this.script><![CDATA[#{javascript:var svalue = getComponent("searchInput").getValue(); sessionScope.put("searchValue",svalue);}]]></xp:this.script>
                    </xp:executeScript>
                </xp:this.action>
            </xp:eventHandler>
        </xp:inputText>
        <xp:br></xp:br>
        <xp:br></xp:br>
        <xe:djxmLineItem id="djxmLineItem41" label="Start Search..." moveTo="#searchResult">
        </xe:djxmLineItem>
    </xe:appPage> 
```

在显示搜索结果的移动页面中，我只需获取 sessionScope 变量的值，使用该值发出全文搜索，然后在重复控件中使用生成的文档集合。

我仍然宁愿使用按钮，因为静态行项目并不是用户真正期望的作为开始搜索的 gui 元素。但至少这是有效的。

# ios - 创建 UIManagedDocument 时出现 EXC_BAD_ACCESS

> ID：12509061
> 
> 赞同：2
> 
> 时间：2012-09-20T08:45:06.197
> 
> 标签：ios, exc-bad-access, alloc, uimanageddocument

我正在创建 UIManagedDocument，但我不知道为什么会收到错误消息：

```
Thread 1: EXC_BAD_ACCES code=1 address=0xdeadbeef 
```

我的代码中唯一的事情就是创建 this `UIManagedDocument`。这个函数在`viewDidLoad:`

```
- (void)setupDatabaseDocument
{
    if(!self.databaseDocument){
        NSURL *url = [[[NSFileManager defaultManager] URLsForDirectory:NSDocumentDirectory inDomains:NSUserDomainMask] lastObject];
        url = [url URLByAppendingPathComponent:@"Default Database"]; 
        NSLog(@"self.databaseDocument will be initWithFileURL:%@",url);
        NSLog(@"%@",[[[UIManagedDocument alloc] initWithFileURL:url] class]);
        self.databaseDocument = [[UIManagedDocument alloc] initWithFileURL:url];
    }
} 
```

我试图通过 NSLog 打印类`[[UIManagedDocument alloc] initWithFileURL:url]`以查看它是否属于对象类型`UIManagedDocument`，但是 EXC_BAD_ACCESS 再次出现在 NSLog 代码行中。

我不知道以下细节是否与问题有关：我使用 Xcode 4.3.3 和 iOS 5.1 模拟器。我尝试使用 iOS 5.0 Simulator 运行它，但出现了同样的错误。我的 Mac OS X 版本是 10.7.4。

为什么你认为我会收到这个错误？

# json - 开源应用程序提供的 JSON API 是否意味着这些 API 被公开为 Web 服务

> ID：12509063
> 
> 赞同：-1
> 
> 时间：2012-09-20T08:45:14.063
> 
> 标签：json, api, business-process-management

我们的一位潜在客户要求提供“Web 服务 API”，以便外部系统可以与我们将提供的 BPM 引擎集成。我已经阅读了一个开源 BPM，其中提到它们提供了“JSON API”，**那么开源工具提供的 JSON API 是否意味着它将这些 API 公开为 Web 服务？** 例如，我可以使用以下 URL 调用 API：-`http://localhost:8080/web/json/workflow/process/start/[code goes here]`

提前感谢您的帮助。

BR

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T09:10:31.767

取决于哪种类型的 Web API。一些 API 是 XML-RPC、SOAP 或 REST：

XML-RPC：[http ://es.wikipedia.org/wiki/XML-RPC](http://es.wikipedia.org/wiki/XML-RPC)

肥皂：[http ://es.wikipedia.org/wiki/SOAP](http://es.wikipedia.org/wiki/SOAP)

休息：[http ://es.wikipedia.org/wiki/REST](http://es.wikipedia.org/wiki/REST)

实际上最常用的是 API REST，所以，是的，如果您的 api 是 REST，当您对[http://example.com:8080/web/json/workflow/process/start/id](http://example.com:8080/web/json/workflow/process/start/id)执行 GET 操作时，您可能会启动过程。

注意身份验证机制。

# asp.net - 如何在 ASP.NET 中按 Enter 提交 DetailsView 数据？

> ID：12509066
> 
> 赞同：1
> 
> 时间：2012-09-20T08:45:22.940
> 
> 标签：asp.net, detailsview

我发现，在 ASP.NET 页面中的简单表单上，我可以通过将表单字段包含到 Panel 控件中并设置其默认按钮来通过按 Enter 键来提交其值。

但是我怎样才能为 DetailsView 做到这一点？我想在插入时通过插入按钮提交，在更新时通过更新按钮提交。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T08:50:20.693

您可以尝试使用`DefaultButton property`（默认提交按钮）

```
<asp:Panel ID="panel1" runat="server" defaultbutton="Button1">

<asp:TextBox ID="TextBox1" runat="server"></asp:TextBox>

<asp:TextBox ID="TextBox2" runat="server"></asp:TextBox>

<asp:Button ID="Button1" runat="server" Text="Button1" OnClick="Button1_Click" />

</asp:Panel> 
```

链接：http: [//msdn.microsoft.com/fr-fr/library/system.web.ui.webcontrols.panel.defaultbutton.aspx](http://msdn.microsoft.com/fr-fr/library/system.web.ui.webcontrols.panel.defaultbutton.aspx)

你也可以定义`AccessKey property`

链接：http: [//msdn.microsoft.com/fr-fr/library/system.web.ui.webcontrols.webcontrol.accesskey.aspx](http://msdn.microsoft.com/fr-fr/library/system.web.ui.webcontrols.webcontrol.accesskey.aspx)

# php - 将 GCM 与 PHP 一起使用

> ID：12509072
> 
> 赞同：0
> 
> 时间：2012-09-20T08:45:59.897
> 
> 标签：php, android, google-cloud-messaging

我看过几篇关于如何从我的 PHP 服务器发送 GCM 消息的帖子，但我无法让它工作。这是我的代码：

```
public function test_gcm($id_user){

    // Search user's RegIds and stores them in $regids

    if(count($regids) == 0){
        echo "This user has no registered device.";
        return;
    }

    $ch = curl_init();

    $data = array(
        'data' => array('message'=>'my message', 'title'=>'message title'),
        'registration_ids' => $regids
    );      

    curl_setopt($ch, CURLOPT_URL, 'https://android.googleapis.com/gcm/send');
    curl_setopt($ch, CURLOPT_POSTFIELDS, json_encode($data));
    curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);

    // WRITE JSON HEADERS
    curl_setopt($ch, CURLOPT_HTTPHEADER, array(
        'Content-Type: application/json',
        'Authorization:key=' . $apiKey)
    );

    curl_setopt($ch, CURLOPT_SSL_VERIFYHOST, false);
    curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, false);

    $result = curl_exec($ch);

    curl_close($ch);

    echo $result;
} 
```

我正在使用浏览器密钥。我也尝试了服务器密钥，但它们都不起作用，curl_exec 总是返回 false。有人知道为什么吗？

编辑：我刚刚使用了'netstat -tuanc | 我的服务器上的 grep 173' 并执行了服务器调用。我使用 grep 173 因为如果我 ping android.googleapis.com 我 ping 这个 IP 地址。当我使用 curl_exec 时，netstat 没有显示到该 IP 地址的任何连接。这是否意味着我没有连接到 android.googleapis.com？还是我做错了？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T08:52:49.197

检查android代码中的“消息”内容是否相同。'message'=>'my message' 应该与来自 android 中的 IntentService 类的消息匹配。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T17:06:54.973

我已经设法修复它。这是防火墙问题，我的防火墙阻止了连接。我已经添加了接受这些消息的规则，现在它可以工作了。

感谢所有试图提供帮助的人:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-05T15:34:55.367

尝试将其从 https 更改为 http

```
curl_setopt($ch, CURLOPT_URL, 'https://android.googleapis.com/gcm/send'); 
```

到

```
curl_setopt($ch, CURLOPT_URL, 'http://android.googleapis.com/gcm/send'); 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-01-02T05:06:15.450

试试这个[http://2mecode.blogspot.hk/2013/01/google-cloud-messaging-php.html](http://2mecode.blogspot.hk/2013/01/google-cloud-messaging-php.html)

希望它可以帮助你

# unit-testing - AngularJS 测试示例

> ID：12509073
> 
> 赞同：20
> 
> 时间：2012-09-20T08:46:00.773
> 
> 标签：unit-testing, testing, angularjs

我不知道为什么，但我发现使用 AngularJS 设置 JavaScript 测试真的很难。

我有我的 app.js、controller.js 以及许多其他用于 Ajax、存储服务、过滤器等的文件。我的应用程序运行良好，但我想学习如何进行 E2E 和单元测试。

我想我需要创建一个独立的 HTML 页面来运行我的测试，但我不确定，我也不确定我可能需要哪些额外的 JavaScript 文件/库。

是否有我可以用来进行初始设置的 AngularJS 测试示例？

*理想情况下，我想运行我在 Visual Studio 2012 中创建的 JS 测试……但这真是太好了！*

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-04-19T14:45:48.203

我发现本教程是一个好的开始。

[http://www.yearofmoo.com/2013/01/full-spectrum-testing-with-angularjs-and-testacular.html](http://www.yearofmoo.com/2013/01/full-spectrum-testing-with-angularjs-and-testacular.html)

它不仅教如何进行单元测试，还教 E2E 和一个特殊的...中途测试。一个很好的参考恕我直言。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-09-20T12:37:37.293

我建议您查看 angular-seed 项目。它已经设置了 e2e 测试。 [https://github.com/angular/angular-seed](https://github.com/angular/angular-seed)

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2013-02-13T15:11:53.843

AngularJS 开发指南有一个关于这个主题的完整页面：http: [//docs.angularjs.org/guide/unit-testing](http://docs.angularjs.org/guide/unit-testing)

还有一篇博客文章提到了 github 中的示例应用程序，包括此处的 Testacular 测试：http: [//blog.angularjs.org/2012/11/angularjs-example-applications.html](http://blog.angularjs.org/2012/11/angularjs-example-applications.html)

希望能帮助到你。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-09-17T21:53:56.660

[Angular Test Patterns](https://github.com/daniellmb/angular-test-patterns) is worth looking into as well. There are examples in both CoffeeScript and JavaScript for testing [Controllers](https://github.com/daniellmb/angular-test-patterns/blob/master/patterns/controller.md), [Services](https://github.com/daniellmb/angular-test-patterns/blob/master/patterns/service.md), [Directives](https://github.com/daniellmb/angular-test-patterns/blob/master/patterns/directive.md) and [Filters](https://github.com/daniellmb/angular-test-patterns/blob/master/patterns/filter.md). As well as ideas on how to use [Mocks](https://github.com/daniellmb/angular-test-patterns/blob/master/patterns/mock.md), [End-to-End tests](https://github.com/daniellmb/angular-test-patterns/blob/master/patterns/e2e.md) etc.

# blackberry - 如何计算一个应用有多少打开的文件资源？

> ID：12509074
> 
> 赞同：2
> 
> 时间：2012-09-20T08:46:02.777
> 
> 标签：blackberry, java-me

此问题旨在作为此问题的后续：[Blackberry 中的 FileIOException](https://stackoverflow.com/questions/4917579/fileioexception-in-blackberry)

我得到了同样的`out of resources` `IOException`结果，但想要一种方法来内部跟踪一次打开多少个句柄。这可能吗？

# nhibernate - 使用 nhibernate 从表中仅获取一行和一列

> ID：12509076
> 
> 赞同：1
> 
> 时间：2012-09-20T08:46:07.977
> 
> 标签：nhibernate, queryover

我有疑问：

```
 var query = this.session.QueryOver<Products>()

.Where(uic => uic.PageNumber == nextPage[0])

.SingleOrDefault(uic => uic.ProductNumber) 
```

但是这个查询结果是产品类型。结果可能只是 ProductNumber 列的整数类型？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-20T08:59:30.747

尝试这样的事情：

```
var query = this.session.QueryOver<Products>()
    .Where(uic => uic.PageNumber == nextPage[0])
    .Select(uic => uic.ProductNumber)
    .SingleOrDefault<int>(); 
```

由于您需要单个原始类型值，您可以`.Select`定义结果列，然后`.SingleOrDefault`获取唯一的结果。对于复杂类型，您需要使用转换器。

您可以在 nhibernate.info 上的此博客文章中找到有关 QueryOver 的更多信息：http: [//nhibernate.info/blog/2009/12/17/queryover-in-nh-3-0.html](http://nhibernate.info/blog/2009/12/17/queryover-in-nh-3-0.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-20T14:02:14.933

您可以使用 Miroslav 的答案`QueryOver`，但使用 LINQ 会更简洁：

```
var productNumber = session.Query<Products>()
                           .Where(uic => uic.PageNumber == nextPage[0])
                           .Select(uic => uic.ProductNumber)
                           .SingleOrDefault(); 
```

请注意，您不需要强制转换，因为`Select`运算符将表达式类型更改为其参数的返回类型（即 的类型`ProductNumber`）。

# php - 如何判断我在 xml 对象中的位置

> ID：12509083
> 
> 赞同：0
> 
> 时间：2012-09-20T08:46:32.597
> 
> 标签：php, xml, sax

我正在使用 PHP 中的 sax，因为我正在解析以更新数据库的 xml 文件大约为 150MB。

我无法理解如何判断我在使用 sax 的 xml 对象中的哪个位置。例如 xml 看起来像这样：

```
<listing>
    <home>
        <address>123 main st.</address>
    </home>
    <brokerage>
        <address>555 N. high st.</address>
    </brokerage>
</listing> 
```

使用 sax，我知道列表标记何时开始，以及 home 标记，然后是地址标记等，但随后控制权被传递给我使用 xml_set_character_data_handler 设置的函数，我可以获得地址。

我的问题是知道我是在阅读家庭-> 地址还是经纪-> 地址。

这个xml文件中有多个字段共享同一个标签名，并且在不同的父标签下被多次使用（firstName、lastName、phone、email等作为listingAgent、propertyContact等下的子标签）。

我一直在谷歌搜索，但我发现的唯一 sax 示例显示了如何回显数据，而不是如何根据 xml 文件中的数据做出决策。是否有我不知道的函数，或者我必须编写自己的函数来确定孩子属于哪些父元素？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T08:53:30.787

您可以使用简单的堆栈检查您在 XML 文档中的位置，该堆栈存储打开的标签列表（伪代码）：

```
$openedTags = array();

while ($node = /* read next XML node*/) {
    if ($node->isOpeningTag()) {
        array_push($openedTags, $node->getTagName());
        continue;
    }

    if ($node->isClosingTag()) {
        array_pop($openedTags);
        continue;
    }

    if ($node->isTextNode()) {
        print_r($openedTags);       // root ... listing, home, address
        echo $node->getTextValue(); // 123 main st.
    }
} 
```

# css - 父级中绝对与相对定位图像上 chrome 的左偏移差异是不均匀的像素宽度

> ID：12509094
> 
> 赞同：2
> 
> 时间：2012-09-20T08:46:57.243
> 
> 标签：css, google-chrome, positioning

我有一个宽度为 49% 的 div（作为响应式布局的一部分）。在这个 div 中，我将两张图像堆叠在一起，一张是相对定位的，一张是绝对定位的。它们都以父级为中心——相对的使用`margin: 0 auto;`和绝对的使用`margin:0 auto; left:0; right:0;`。

现在，Chrome 有时（取决于窗口宽度）会在绝对图像和相对图像之间产生一两个像素的偏移差异。这可以在检查图像元素时在[我的 Fiddle](http://jsfiddle.net/henrikandersson/P4AfQ/)中看到- 如果您在 Chrome 中看不到差异，请尝试稍微调整窗口大小。

我在适用于 Windows 的 Chrome 21 中得到了这种不同。它在 Firefox 或 IE 中不存在，所以我想知道这是否是 Chrome 中的一个已知错误，是否有修复？

**更新：**它似乎不是父级宽度百分比的结果，而是每当父级像素宽度不均匀时，它就会出现，请参阅[更新的 Fiddle](http://jsfiddle.net/henrikandersson/P4AfQ/1/)。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T09:23:52.500

它真的很有趣，你可以通过使用逻辑上相同的位置

```
.wrapper {
    position: relative;
    background-color: yellow;
    height: 200px;
    width: 215px;
}
.relative-img {
    display: block;
    width: 100px;
    position: relative;
    margin: 0 auto;
}
.absolute-img {
    display: block;
    width: 100px;
    position: absolute;
    margin: 0 auto;
    left: 0;
    right: 0;
    top: 0;
} 
```

但实际上，当尝试获取两个图像**的左侧位置时，左侧位置存在 0.5px 的差异**

```
relative-img - 65.5 
absolute-img - 66 
```

看到[这个控制台](http://jsbin.com/ogicun/2/edit)

我也尝试通过分配绝对值使它们相同

```
$(".relative-img").offset().left =$(".absolute-img").offset().left; 
```

但结果还是一样

```
relative-img - 65.5 
absolute-img - 66 
```

**惊讶吗？**

**对此的答案可能是事实上：**在 Chrome 中，值小数部分被截断，因此 65、65.5 和 65.6 都显示相同[的](https://stackoverflow.com/users/49376/skilldrick)[结果](http://jsfiddle.net/q5BQs/3/)

# http - Tomcat 7 上的 webapp 只能通过 ssl 使用（http 不工作，https 工作）

> ID：12509095
> 
> 赞同：1
> 
> 时间：2012-09-20T08:47:05.110
> 
> 标签：http, https, tomcat7, server.xml

我昨天重新启动了我的 tomcat 7 网络服务器，因为我部署了第二个网络应用程序。我在 server.xml 中添加了一个“GlobalNamingResources”，但没有更改任何其他内容！

重新启动后，我的 ROOT 应用程序无法再通过 http 访问，只能通过 https 访问。

这是我的 server.xml 连接器：

```
<Connector 
        port="8080" 
        protocol="HTTP/1.1" 
        connectionTimeout="20000" 
        redirectPort="443"

       compression="on"
       noCompressionUserAgents="gozilla, traviata"
       compressableMimeType="text/html,text/xml, .... [some more]"
        />

<Connector 
       port="8443" 
       maxThreads="200"
       scheme="https" 
       secure="true" 
       SSLEnabled="true"
       keystoreFile="${catalina.base}/conf/.keystore" 
       keystorePass="***"
       clientAuth="false" 
       sslProtocol="TLS"

       compression="on"
       noCompressionUserAgents="gozilla, traviata"
       compressableMimeType="text/html,text/xml, .... [some more]"
       /> 
```

难道redirectPort="443" 最好是redirectPort="8443"？但是，这以前有效。

高度赞赏任何想法。谢谢！

# javascript - 数组长度不返回 0

> ID：12509098
> 
> 赞同：1
> 
> 时间：2012-09-20T08:47:11.473
> 
> 标签：javascript, jquery

虽然我正在尝试计算数组的长度：

```
$('input:checkbox[name="promoOn[]"]').click( function(){
  var attributes = [];
  $('input:checkbox[name="promoOn[]"]:checked').each(function(index) { 
    attributes.push($(this).val());
    $('#promo-on-total').html(attributes.length);
  });       
}); 
```

由于某种原因，array.length 不返回 0？结果如下：

```
Checkbox 1, checked = array.length = 1
Checkbox 2, checked = array.length = 2
Checkbox 2, unchecked = array.length = 2
Checkbox 1, unchecked = array.length = 1 (not 0???) 
```

有什么想法可能是错的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T09:01:05.953

问题是您正在运行所有选中的复选框并在`promo-on-total`那里更新 div 中的长度值，但是一旦取消选中所有复选框，循环就不再执行（因此值不会更新）。

这会给你我所期望的：

```
$('input:checkbox[name="promoOn[]"]').click( function(){
  var checkedValues = [];
  $('input:checkbox[name="promoOn[]"]:checked').each(function(index) {
    checkedValues.push($(this).val());
  });

  $('#promo-on-total').html(checkedValues.length);        
}); 
```

[演示](http://jsfiddle.net/FQqBT/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T09:11:57.227

我认为使用此代码会更好。

```
$('input:checkbox[name="promoOn[]"]').click( function(){
  $('#promo-on-total').html($('input:checkbox[name="promoOn[]"]:checked').size());
}); 
```

当您取消选中一个复选框时，问题就出现了， $('input:checkbox[name="promoOn[]"]:checked') 为空，因此 html 内容 $('#promo-on-total') 没有更新。

我在[这里](http://jsfiddle.net/charlesjourdan/uvhjL/)做了一个 jsfiddle 。

# android - 更改 android 选项菜单布局

> ID：12509101
> 
> 赞同：1
> 
> 时间：2012-09-20T08:47:23.677
> 
> 标签：android, android-optionsmenu

我正在使用 \menu 文件夹下的 xml 中定义的 android 选项菜单。菜单中有 5 个项目，它们在布局中显示在两行 - 顶行包含 2 个项目，底行包含其他 3 个项目。

有没有办法配置菜单，所以顶行将包含 3 个项目，而底行将包含另外 2 个？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T11:37:13.377

我认为，如果您将菜单项放在一组中，它会尝试将它们放在一起。当您在活动中创建菜单时，控制菜单项的顺序会更好，而不是使用 XML。在您的活动中，您可以在组中获取菜单项，如下所示：

```
@Override
        public boolean onCreateOptionsMenu(Menu menu)
        {
        int group1Id = 1; 

        int Id1 = Menu.FIRST;
        int Id2 = Menu.FIRST +1;
        int Id3 = Menu.FIRST +2;

             super.onCreateOptionsMenu(menu);

                menu.add(group1Id, Id1, 1, "Option 1");
                menu.add(group1Id, Id2,  2, "Option 2");
                menu.add(group1Id, Id3,  3, "Option 3");
                      return true;
            }      

        @Override
        public boolean onOptionsItemSelected(MenuItem item) {
            super.onOptionsItemSelected(item);

            switch (item.getItemId()) {
            case 1:        //for option 1

                return true;
            case 2:      //for option 2

                return true;
            case 3:        //for option 3

                return true;      
                   default:
                return false;
            } 
```

**参数**： **groupId** 此项目应属于的组标识符。

**itemId** 唯一的项目 ID。如果您不需要唯一 ID，请使用 NONE。

**order** 项目的顺序。如果您不关心订单，请使用 NONE。

**标题** 要为项目显示的文本。

**返回**：新添加的菜单项。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-09T12:40:44.687

我们可以为选项菜单使用不同的布局，例如：-

```
<?xml version="1.0" encoding="utf-8"?>
<menu xmlns:android="http://schemas.android.com/apk/res/android">
<item android:id="@+id/menuRefresh"
     android:icon="@drawable/ic_menu_refresh"
     android:title="Refresh"
      android:showAsAction = "always"/>
<item android:id="@+id/menuAbout"
     android:icon="@drawable/ic_menu_info_details"
     android:title="About"
     android:showAsAction = "always"/>
</menu> 
```

你可以使用“never”“withtext”“ifRoom”“always”“collapseActionView” [或者你可以在这里阅读完整的细节](http://developer.android.com/guide/topics/resources/menu-resource.html)

# deprecated - viewDidUnload no longer called in ios6

> ID：12509102
> 
> 赞同：21
> 
> 时间：2012-09-20T08:47:24.940
> 
> 标签：deprecated, ios6, viewdidunload

I just installed the new version of Xcode/ios6\. viewDidUnload is now depreciated.

In the apple doc,

> viewDidUnload [...] Deprecated in iOS 6.0\. Views are no longer purged under low-memory conditions and so this method is never called.

But numbers of apps are using this callback to release their properties, like :

```
- (void)viewDidUnload {
    [super viewDidUnload];

    self.recipientButton = nil;
    self.connectButton = nil;
    self.infoLabel = nil;
} 
```

This was the best practice to release your IBOutlets.

**So, first question:**
What is going to happen these existing apps in iOS 6? Will they leak ?

**and second one:**
What is the new recommended way to release an IBOutlet property ? In dealloc method ?

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-09-20T09:05:09.240

For the first Question:

Your ViewController will receive didReceiveMemoryWarning method callback and you can nil out the view & other components in this method

For Reference Do Check WWDC 2012 video Session on EVOLUTION OF VIEW CONTROLLER, in case you haven't (I Believe they are available only for registered developers, but not sure).

Answer to your second one.

[object release]; in dealloc. No need to assign nil to object before releasing.

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-09-20T18:45:43.987

I recommend you to use weak property for the IBOutlets like

```
@property (weak) IBOutlet UILabel * labelText; 
```

That way you don't need to do anything in dealloc. In iOS 6, simply ViewDidUnload won't call, iOS5 or earlier it is just call when memory warning have occur.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-30T23:33:18.960

> and second one: What is the new recommended way to release an IBOutlet property ? In dealloc method ?

What is the "old" recommended way? You must always release retained instance variables in `dealloc`; it has always been this way and continues to be this way.

It was just that in `viewDidUnload` (which is only called for low memory) you could *also* set your properties to `nil`.

# grails - 如何在 Grails 中动态地将属性/字段添加到域类中？

> ID：12509103
> 
> 赞同：3
> 
> 时间：2012-09-20T08:47:33.557
> 
> 标签：grails, groovy, grails-orm, grails-domain-class

对于我目前正在处理的项目，我需要将属性动态添加到域类并稍后将它们保存在数据库中。一般来说，我需要一个附加到“普通”域类的键/值存储。遗憾的是我不能使用 NoSQL 数据库（例如 Redis）。

我的方法是通过在 a`save()`中识别它们`afterInsert`或`afterUpdate`将它们写入另一个表来处理 a 上的附加属性 - 我不希望在域类中使用 map 属性，而是使用附加的“字段”表（以更好地支持搜索）。

我尝试使用**metaClass 方法**添加属性：

```
person.metaClass.middlename = "Biterius"
assert person.middlename == "Biterius"    // OK 
```

这行得通，我可以识别 afterInsert/afterUpdate 方法中的其他属性，但似乎此后我无法更改该值 - 即，以下内容不起作用：

```
person.middlename = "Tiberius"
assert person.middlename == "Tiberius"    // FAIL 
```

然后我尝试了一种**Expando 方法**，通过 Expando 类（直接（“Person extends Expando”）和通过抽象中间类（“Person extends AbstractPerson”和“AbstractPerson extends Expando”））扩展 Person 类。

```
def person = new Person()
assert person in Person          // OK
assert person in AbstractPerson  // OK
assert person in Expando         // OK 
```

两种变体都不起作用-我可以将值分配给任意“属性”，但未存储值！

```
person.mynewproperty = "Tiberius"  // no MissingPropertyException is thrown 
println person.mynewproperty       // returns null 
```

那么如何在运行时以编程方式将属性添加到域类，在 afterInsert 或 afterUpdate 期间更改它们并检索它们，以便“手动”将它们存储在“字段”表中？

还是我做错了什么？还有其他/更简单的方法可以做到这一点吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T18:15:54.987

将您的数据库变成“NoSQL”怎么样？

在我的一个项目中，我只是使用字符串属性将地图存储为 JSON 对象。对于 Groovy 来说，在 map 和 JSON-Object 之间进行转换并不是什么大问题。而且由于您可以像访问具有属性的对象一样访问地图，因此我发现此解决方案非常方便。

唯一的缺点：您必须提前计划字符串属性的大小......

**更新：**对不起，刚刚读到你想支持搜索......

关于什么

```
class Person {
  ...
  static hasMany = [extProperties:KeyValue]
  ...
  def invokeMethod(String name, args) {
    if (name.startsWith('get')) {
       //an unknown properties's getter is called
    }
    //add same for setter
  }
}

class KeyValue {
  String key
  String value
} 
```

我想这样的模式会给你你需要的所有自由。即使没有`hasMany`，您也可以使用`invokeMethod`来处理您的外部表...

getter 和 setter 可以将您的值保存在瞬态字符串属性 ( `static transients = ['myTransientProperty']`) 中。这个属性应该在`afterInsert`/ `afterUpdate` 事件中可用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T18:48:41.260

你为什么不在域对象上创建一个字符串映射并手动存储你的额外数据呢？除非您要存储复杂的数据，否则您应该能够将所需的任何内容转换为字符串。

# url - 如何处理 OData Url 中使用复合身份密钥的实体？

> ID：12509111
> 
> 赞同：16
> 
> 时间：2012-09-20T08:47:57.910
> 
> 标签：url, entity, odata, asp.net-web-api, composite-primary-key

我有一个具有*OrderId*和*ProductId整数字段的**实体 OrderItem* ，这两个字段形成了该表的*身份键/主键*。 我想使用*OData/Web API*通过服务公开此类实体，并能够通过它们的**复合 ID选择***OrderItem*实例。

 *******URL**的格式应该是什么？

是否有处理此类情况的最佳实践？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-09-20T09:47:00.563

URL 中的复合键使用如下语法：

```
~/OrderItems(OrderId=1234,ProductId=1234) 
```

“语法”在[OData ABNF 构造规则](http://docs.oasis-open.org/odata/odata/v4.0/errata02/os/complete/abnf/odata-abnf-construction-rules.txt)中定义（参见“compoundKey”的定义）

可以在 OASIS 的[OData 版本 4.0 中找到一个示例用法。第 2 部分：URL 约定和勘误表 03](http://docs.oasis-open.org/odata/odata/v4.0/errata03/os/complete/part2-url-conventions/odata-v4.0-errata03-os-part2-url-conventions-complete.html#_Toc453752343)

请注意，“复合键”（又名“复合键谓词”）[自 OData 1.0 以来](http://www.odata.org/documentation/odata-version-2-0/uri-conventions/#AddressingEntries)一直存在。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2018-03-13T10:00:47.163

首先，您必须确保在配置文件中明确提及它具有复合键

```
builder.EntityType<OrderItem>().HasKey(t => new { t.OrderId, t.ProductId}); 
```

然后，该操作应具有以下标头

```
public SingleResult<OrderItem> Get([FromODataUri] string keyOrderId, [FromODataUri] string keyProductId) 
```

请注意用于两个参数的前缀（**键）！**

这是 OData V4。另请参考[https://odata.github.io/WebApi/13-06-KeyValueBinding/](https://odata.github.io/WebApi/13-06-KeyValueBinding/)*****

# c# - 我可以在 MSChart 的极坐标图中选择点吗？

> ID：12509112
> 
> 赞同：1
> 
> 时间：2012-09-20T08:47:59.963
> 
> 标签：c#, .net, winforms, visual-studio-2010, mschart

我想在 MSChart 的极坐标图中选择点。
我有`ChartAreas.CursorX(and Y).IsUserSelection = true`. 但是当我尝试选择一个区域时，该`SelectionChanged`事件没有激活，我也没有在图表中看到选择。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T10:00:53.947

不，查看 mschart 的内部代码，当图表区域为圆形时（如极坐标图），光标用户选择被禁止。

实际上反编译的代码`chart.MouseDown`是这样的：

```
if(!area.IsCircular ...)
{
   area.CursorX.Cursor_MouseDown(this, e);
   area.CursorY.Cursor_MouseDown(this, e);
} 
```

因此，唯一的方法是处理`MouseClick`/`MouseMove`事件，使用`HitTest`方法获取点值并手动执行您需要的任何操作。

例如，[这个答案](https://stackoverflow.com/a/9647958/316644)解释了如何在`MouseClick`/`MouseMove`事件上显示工具提示。

* * *

**编辑 ：**

[这是一个完整的工作代码片段](http://pastebin.com/cmd2j6ia)，展示了如何在极坐标图中实现选择。

截屏：

![在此处输入图像描述](../Images/615bc272f9cf4a5f2a3d4a8b2996e27d.png)

# regex - 如何使用 RewriteRule 删除除特定 URL 的“回调”之外的任何查询？

> ID：12509120
> 
> 赞同：0
> 
> 时间：2012-09-20T08:48:15.117
> 
> 标签：regex, apache, mod-rewrite, query-string

当前删除任何查询，但对任何 URL 的`RewriteRule`查询除外。`callback`

```
# Remove question mark and parameters
RewriteCond %{THE_REQUEST} ^[A-Z]{3,9}\ /([^?#\ ]*)\?[^\ ]*\ HTTP/ [NC]
# Query rewrite exceptions
##RewriteCond %{REQUEST_URI}?%{QUERY_STRING} !^/api.*?callback=.* #does not work
RewriteCond %{QUERY_STRING} !callback=
RewriteRule .*$ %{REQUEST_URI}? [R=301,L] 
```

如何避免`callback`仅从 URL 重写查询`^api\/?([^\/]*)$`？异常结果：

*   无需重写 /api?callback=1, /api/user?callback=1, /api/user/2?callback=1
*   重写 /apis?callback=1、/user?callback=1、/api/user?foo=1 等。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T10:45:46.637

我终于明白你的问题了...

替换这些行：

```
##RewriteCond %{REQUEST_URI}?%{QUERY_STRING} !^/api.*?callback=.* #does not work
RewriteCond %{QUERY_STRING} !callback= 
```

用这条线：

```
RewriteCond %{REQUEST_URI}?%{QUERY_STRING} !^/api(/.*)?\?callback=.* 
```

**重要的提醒：**

如果您的脚本不在文档根目录中，而是在 dir`/htest`中，并且完整 URL 看起来像我的：`http://localhost/htest/api/?callback=1`，那么您必须在 RewriteCond 中放置 API 的完整路径：

```
RewriteCond %{REQUEST_URI}?%{QUERY_STRING} !^/htest/api(/.*)?\?callback=.* 
```

您可以通过使用而不是开始您的正则表达式来克服这个`!/api`问题`^/path/to/api`，但是`/foo/api`并且`/bar/api`也将被跳过重写。

**更新：**

这个 .htaccess 在文档根目录中工作正常：

```
RewriteEngine On

RewriteCond %{THE_REQUEST} ^[A-Z]{3,9}\ /([^?#\ ]*)\?[^\ ]*\ HTTP/ [NC]
RewriteCond %{REQUEST_URI}?%{QUERY_STRING} !^/api(/.*)?\?callback=.*
RewriteRule .*$ %{REQUEST_URI}? [R=temporary,L] 
```

您可以尝试在没有任何其他规则的情况下使用它来检查问题所在

**更新 2**

如果您有其他条件，即

```
RewriteRule ^([^.]*)$ index.php?url=$1 [QSA,L] 
```

在它之前重复 RewriteCond：

```
RewriteCond %{REQUEST_URI}?%{QUERY_STRING} !^/api(/.*)?\?callback=.*
RewriteRule ^([^.]*)$ index.php?url=$1 [QSA,L] 
```

也能够在`/foo`subdir 中使用这些规则，替换`^/api`为`^/foo/api`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-29T20:35:48.023

`RewriteRule`要启用**index.php**，需要添加查询重写异常。

此规则工作正常并解决了此问题：

```
# Remove question mark and parameters
RewriteCond %{QUERY_STRING} .+
# Query rewrite exceptions
RewriteCond %{REQUEST_FILENAME} !index.php
RewriteCond %{REQUEST_URI}?%{QUERY_STRING} !/api(/.*)?\?callback=.*
RewriteRule .*$ %{REQUEST_URI}? [R=301,L] 
```

# javascript - Node Js中每个请求之间延迟5秒

> ID：12509123
> 
> 赞同：3
> 
> 时间：2012-09-20T08:48:29.343
> 
> 标签：javascript, node.js, setinterval

这是我的代码：

我的数据库中有超过 500,000 条记录，我想循环并从另一台服务器请求一些信息。除了每个请求之间的延迟之外，我已经成功编写了所有函数。如果我使用 node.js 发送所有请求，远程服务器出现故障或无法回答每个请求。所以我需要创建一个循环队列但是我的代码无法正常工作，仍然非常快速地发送所有请求。

```
var http = require('http')
, mysql = require('mysql');
var querystring = require('querystring');
var fs = require('fs');
var url  = require('url');

var client = mysql.createClient({
    user: 'root',
    password: ''
});

client.useDatabase('database');
client.query("SELECT * from datatable",
    function(err, results, fields) {
        if (err) throw err;
        for (var index in results) {
            username = results[index].username;
            setInterval(function() {

                requestinfo(username);
            }, 5000 );

        }
    }
    );
client.end();
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-20T09:17:17.533

您的问题在于 for 循环，因为您将所有请求设置为每 5 秒关闭一次。这意味着 5 秒后所有请求将相对同时触发。并且由于它是使用 setInterval 完成的，因此它将每 5 秒发生一次。

您可以通过两种方式解决它。

如果索引是数字，第一选择是设置一个间隔以每 5 秒创建一个新请求，因此您可以执行以下操作而不是 for 循环：

```
 var index = 0;
    setInterval(function(){
      requestinfo(results[index].username);
      index++;
    }, 5000) 
```

第二种选择是将所有请求设置为增加超时，以便您修改当前脚本，如下所示：

```
 var timeout = 0;
    for (var index in results) {
        username = results[index].username;
        setTimeout(function() {
            requestinfo(username);
        }, timeout );
        timeout += 5000;
    } 
```

这将为 0,5,10,15... 等秒设置超时，因此每 5 秒触发一个新请求。

# android - Android 和 iOS 推送应用启动？

> ID：12509125
> 
> 赞同：0
> 
> 时间：2012-09-20T08:48:48.383
> 
> 标签：android, ios, cordova

我已经构建了一个 Phonegap (jquery) 应用程序。现在我想在服务器端发生一些事件时启动这个应用程序。我读过 Apple 提供 APN，当您发送新通知时可以启动应用程序。Android有类似的东西吗？我的问题简化了：我有一个 Android 和一个 iPhone 应用程序（用 Phonegap 编写）。这两个应用程序正在与服务器通信，它们有时会向服务器发送一个日期，我希望该应用程序在该日期启动。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T08:51:10.827

先生有类似的东西！它被称为[谷歌云消息传递](http://developer.android.com/guide/google/gcm/index.html)

# c# - 工厂方法 - 在 .NET 2.0 中通过 ID 获取

> ID：12509128
> 
> 赞同：0
> 
> 时间：2012-09-20T08:48:51.073
> 
> 标签：c#, factory-pattern

我正在尝试实现一个工厂。据我了解，以下简单代码是工厂（C#）

```
private void methodName()
{
    var result = GetTypeByName("nameOfType")
}

private AbstractClassName GetTypeByName(string nameOfType)
{
    switch(nameOfType)
    {
       case "type1":
           return new inheritedFromAbstractClass();
       case "type2":
           return new alsoInheritedFromAbstractClass();
       default:
           throw new Exception();
    }
} 
```

遗憾的是，我被困在一个带有 VS2005 的 .NET 2.0 项目上，因此不能使用“var”关键字。谁能给我任何关于如何完成或如何在 .NET 2.0 中完成的建议。

所以，一个更现实的例子：

```
class Program
{
    static void Main(string[] args)
    {
        Console.WriteLine("Starting order");
        Console.WriteLine("Press 1 or 2");
        string s = Console.ReadLine();
        var order = GetOrderByIdFromFactory(s);
        order.ShippingAddress = "My House, England";
        Console.WriteLine(order.Ship());
        Console.ReadKey();
    }

    private static OrderShipment GetOrderByIdFromFactory(string s)
    {
        OrderShipment os = default(OrderShipment);
        switch (s)
        {
            case "1":
                return new FedExShipping();
                break;
            case"2":
                return  new UpsShipping();
                break;
            default:
                throw new NotImplementedException("Not implemented");
        }
    }
} 
```

我的抽象基类

```
public abstract class OrderShipment
{

    #region Properties
    public string ShippingAddress { get; set; }
    internal string Label { get; set; }
    private readonly TextWriter _text = new StringWriter();
    #endregion

    #region Public Methods

    internal string Ship ()
    {
        VerifyShippingData();
        GetShippingLabelFromCarrier();
        PrintLabel();
        return _text.ToString();
    }

    internal virtual void VerifyShippingData()
    {
        if (string.IsNullOrEmpty(ShippingAddress))
        {
            throw new ApplicationException("Invalid Address");
        }
    }

    internal abstract void GetShippingLabelFromCarrier();

    internal virtual void PrintLabel()
    {
        _text.Write(Label);
    }

    #endregion
} 
```

还有我的 2 个继承类

```
public class FedExShipping : OrderShipment
{
    internal override void GetShippingLabelFromCarrier()
    {
        //ToDo perform logic
        Label = "FedEx Label Details";
    }
}

public class UpsShipping : OrderShipment
{
    internal override void GetShippingLabelFromCarrier()
    {
        //ToDo logic
        Label = "Ups Label Details";
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-20T08:50:13.037

为什么不这样：

```
AbstractClassName result = GetTypeByName("nameOfType") 
```

`var`关键字不是*创新*，它只是让你*不要输入* `AbstractClassName`（在这个具体例子中）。所以在这个具体的问题场景中，你不会放松太多使用`2.0`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T08:57:41.167

工厂的想法是它隐藏了抽象类的哪个子类型从系统中实例化。这使您可以轻松地切换（例如通过配置文件）应该在整个系统中使用哪个子类。

然而，为了使这个工作你的工厂应该公开一个方法来构造抽象类的一个实例。我可能会更改您的代码：

```
private void methodName() 
{ 
    var result = GetTypeByName("nameOfType") 
} 
```

到

```
public AbstractClassName Create() 
{ 
    return GetTypeByName("nameOfType") 
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-20T08:50:54.883

为什么不使用

```
AbstractClassName result = GetTypeByName("nameOfType"); 
```

?

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-20T08:52:19.647

```
private void methodName()
{
    AbstractClassName result = GetTypeByName("nameOfType")
} 
```

# java - 如何强制 Java 7 在 Windows 上创建“目录符号链接”而不是“文件符号链接”？

> ID：12509132
> 
> 赞同：6
> 
> 时间：2012-09-20T08:49:09.040
> 
> 标签：java, windows, symlink, java-7

我在 Windows 64 位上使用 Oracle Java 7。

[当我使用Files.createSymbolicLink](http://docs.oracle.com/javase/7/docs/api/java/nio/file/Files.html)创建符号链接时，我注意到这种行为：

1.  如果目标是目录，则创建“目录符号链接”。
2.  如果目标是文件，则创建“文件符号链接”。
3.  如果目标不存在，则创建“文件符号链接”。

[符号链接的类型是固定的，永远不会改变](http://www.quora.com/File-Systems/What-are-essential-differences-in-the-implementation-of-Symbolic-Links-between-Windows-and-Linux)，不管它的目标有什么改变。

使用 Windows 的本机`mklink`命令，可以强制链接类型为“目录符号链接”。是否可以使用本机 Java API 或某些库来实现这一点？

一种琐碎而丑陋的方法是：

1.  如果目标是目录，只需创建链接
2.  如果目标不存在，则创建一个新的空目标目录，创建链接，然后删除该目录。
3.  如果目标是一个文件......处理它（移动它，应用＃2，将它移回）。

丑陋的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-03T11:57:26.700

不幸的是，我在 Java API 中看不到这样做的方法。

我检查了 Windows JRE 代码，看起来该决定是基于文件属性本身：

```
try
{
   WindowsFileAttributes windowsfileattributes = WindowsFileAttributes.get(windowspath2, false);
   if(windowsfileattributes.isDirectory() || windowsfileattributes.isDirectoryLink())
      i |= 1;
} 
```

属性本身来自**本机**代码，看起来无法影响它们。

显然，您还有其他选项，例如手动调用`mklink`甚至使用类似的东西操作返回的对象`PowerMock`（这显然不是为此目的）。

另一个肮脏的选择是创建所有相关类的代理`Path`：`FileSystem`和`FileSystemProvider`.
它的工作方式是`Path`返回 a `FileSystem`，它返回 a `FileSystemProvider`- 您需要做的是修改`FileSystemProvider.createSymbolicLink`方法的行为方式。

该`createSymbolicLink`方法接收一个当前未使用的 varargs 参数-您可以向它传递一个参数，该参数将指示您的包装器它需要覆盖创建符号链接的方式-然后您就可以了:)

在写完所有这些之后——我唯一的问题是——你为什么需要这种行为？

# android - 如何使用 BluetoothHeadset API 获取蓝牙连接的设备

> ID：12509135
> 
> 赞同：13
> 
> 时间：2012-09-20T08:49:32.800
> 
> 标签：android, bluetooth, bluetooth-sco

我想获取蓝牙连接设备的列表……而不仅仅是配对设备。

我`BluetoothHeadset`在**API 级别 11**中找到了 API，它提供`getConnectedDevices()`了获取已连接蓝牙设备列表的方法。

如何使用此 API 获取蓝牙连接设备的列表？

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-09-25T08:17:36.200

终于得到了解决方案。`BluetoothHeadset`下面是一些使用API获取蓝牙音频连接设备的代码片段。

```
BluetoothHeadset mBluetoothHeadset;

// Get the default adapter
BluetoothAdapter mBluetoothAdapter = BluetoothAdapter.getDefaultAdapter();

// Establish connection to the proxy.
mBluetoothAdapter.getProfileProxy(context, mProfileListener, BluetoothProfile.HEADSET); 
```

```
// Define Service Listener of BluetoothProfile
private BluetoothProfile.ServiceListener mProfileListener = new BluetoothProfile.ServiceListener() {
    public void onServiceConnected(int profile, BluetoothProfile proxy) {
        if (profile == BluetoothProfile.HEADSET) {
            mBluetoothHeadset = (BluetoothHeadset) proxy;
        }
    }
    public void onServiceDisconnected(int profile) {
        if (profile == BluetoothProfile.HEADSET) {
            mBluetoothHeadset = null;
        }
    }
}; 
```

```
// call functions on mBluetoothHeadset to check if Bluetooth SCO audio is connected.
List<BluetoothDevice> devices = mBluetoothHeadset.getConnectedDevices();                        
for ( final BluetoothDevice dev : devices ) {           
     return mBluetoothHeadset.isAudioConnected(dev);
} 
```

```
// finally Close proxy connection after use.
mBluetoothAdapter.closeProfileProxy(BluetoothProfile.HEADSET, mBluetoothHeadset); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T09:07:19.667

首先你需要在 Androindmanifest.xml 中定义 Permission

```
<uses-permission android:name="android.permission.BLUETOOTH_ADMIN" />
<uses-permission android:name="android.permission.BLUETOOTH" /> 
```

搜索连接的设备活动，

```
private static BluetoothAdapter mBtAdapter;
private final static int REQUEST_ENABLE_BT = 1;

            // Register for broadcasts when a device is discovered
            IntentFilter filter = new IntentFilter(BluetoothDevice.ACTION_FOUND);
            this.registerReceiver(mReceiver, filter);

            // Register for broadcasts when discovery has finished
            filter = new IntentFilter(BluetoothAdapter.ACTION_DISCOVERY_FINISHED);
            this.registerReceiver(mReceiver, filter);

            filter = new IntentFilter( BluetoothAdapter.ACTION_DISCOVERY_STARTED );
            this.registerReceiver( mReceiver, filter ); 
```

广播接收器类

```
private final BroadcastReceiver mReceiver = new BroadcastReceiver() 
{
    @Override
    public void onReceive(Context context, Intent intent) 
    {
        try
        {
            String action = intent.getAction();

            // When discovery finds a device
            if ( BluetoothDevice.ACTION_FOUND.equals(action) ) 
            {
                // Get the BluetoothDevice object from the Intent
                BluetoothDevice device = intent.getParcelableExtra(BluetoothDevice.EXTRA_DEVICE);
            }
        }
        catch ( Exception e )
        {
            logger.info( DateFormat.format( ConstantCodes.dateFormat ,new java.util.Date()).toString(),"Broadcast Error : " + e.toString(), ConstantCodes.SEARCH_ACTIVITY );
            System.out.println ( "Broadcast Error : " + e.toString() );
        }
    }
}; 
```

# c++ - 在 DLL 中完成分配时释放客户端内存？

> ID：12509140
> 
> 赞同：1
> 
> 时间：2012-09-20T08:49:48.663
> 
> 标签：c++, mfc

我创建了一个常规 dll，其中我有一种`GetRecord`为`RecordInfo`结构分配内存的方法。

```
struct RecordInfo{
  // Some Data member
}

BOOL GetRecord(RecordInfo *& pRecordInfo)
{
   // Allocate RecordInfo, fill data and return as out paramter.
} 
```

现在我从 MFC 应用程序和完成我的工作后访问这个 dll。我使用删除在客户端发布 RecordInfo。

```
delete pRecordInfo; 
```

在发布模式下没有问题，但是在调试模式下应用程序显示断言失败。有人可以解释这种行为背后的原因。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T08:54:29.877

内存分配和释放应该在组件/dll的同一侧完成。

一个更优雅的解决方案是填充 a `std::unique_ptr<RecordInfo>`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T09:01:15.147

如果你想在 DLL 中分配内存并在客户端代码中释放它，你应该确保 DLL 和客户端都是使用**相同版本的编译器**和**相同的 CRT** “风格”构建的（例如，两者都是调试版本，或者两者都是发布版本）。

这当然是高度约束的。

作为替代方案，为了更好地解耦，您可以从 DLL 函数导出以*分配*和*解除分配*数据结构（在您的特定情况下，您可以`DeleteRecord`从 DLL 添加和导出函数，并`delete`从该函数体内部调用）。

我建议您阅读Old New Thing 博客上的[这篇有趣的博客文章](http://blogs.msdn.com/b/oldnewthing/archive/2009/09/23/9898230.aspx)，并特别注意开头的句子（强调我的）：

> 分配内存的代码和释放内存的代码需要使用*相同的分配器*，这应该是您的第二天性。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-20T09:02:48.077

生产者和消费者需要就一个共同的分配器达成一致。在 Windows 世界中，最明智的选择是`CoTaskMemAlloc`/ `CoTaskMemFree`，它正是为此目的而编写的。

# wcf - 如何解决 Web 套接字客户端连接数限制

> ID：12509141
> 
> 赞同：2
> 
> 时间：2012-09-20T08:49:53.163
> 
> 标签：wcf, websocket

我开发了一个 websocket 服务和客户端遵循[http://blogs.microsoft.co.il/blogs/idof/archive/2012/03/06/what-s-new-in-wcf-4-5-websocket-support-部分 2-of-2.aspx](http://blogs.microsoft.co.il/blogs/idof/archive/2012/03/06/what-s-new-in-wcf-4-5-websocket-support-part-2-of-2.aspx)。当我测试它时，我发现只有十个客户端可以连接到该服务。这是我的配置：

```
<customBinding>
<binding name="customConfig">
<byteStreamMessageEncoding />
     <httpTransport>
     <webSocketSettings transportUsage="Always" createNotificationOnConnection="true" maxPendingConnections="10000" />
          </httpTransport>
        </binding>
      </customBinding> 
```

我知道对于像tcpbinding这样的双工通信，设置“maxConnections”属性可以提高可以连接服务器的客户端数量。但是对于自定义绑定，没有这样的属性。

我该怎么做才能解决它？

我已经配置了行为：

```
<serviceBehaviors>
        <behavior name="serviceBehaive">
          <serviceMetadata httpGetEnabled="true" httpsGetEnabled="true" />
          <serviceDebug includeExceptionDetailInFaults="false" />
          <serviceThrottling maxConcurrentCalls="100000" maxConcurrentSessions="100000"
            maxConcurrentInstances="100000" />
        </behavior>
      </serviceBehaviors> 
```

谁能帮我？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T00:39:28.370

这个问题我咨询了作者，他的回答是：这是桌面操作系统中iis的一个限制。在服务器操作系统上没有限制，还有 iis express

谢谢他

# javascript - New Image() 应该添加 .src 吗？

> ID：12509146
> 
> 赞同：0
> 
> 时间：2012-09-20T08:50:11.777
> 
> 标签：javascript

关于 new Image() 的问题

我认为以下代码来自'JavaScript by Example Second Edition'

```
planet[0] = "images/Venus.jpg" 
```

错了，应该是

```
planet[0].src = "images/Venus.jpg" 
```

并更换

```
document.images["planet_pic"].src = planet[i]; 
```

和

```
document.images["planet_pic"].src = planet[i].src; 
```

这样对吗？

```
<!DOCTYPE html>
<html>
<head>
    <title>Slide Show</title>
    <script type="text/javascript">
        var i = 0;
        var timeout;
        function preLoadImages() {
            if (document.images) {
                planet = new Array(); // global variable
                planet[0] = new Image();
                planet[0] = "images/Venus.jpg";
                planet[1] = new Image();
                planet[1] = "images/Neptune.jpg";
                planet[2] = new Image();
                planet[2] = "images/Earth.jpg";
                planet[3] = new Image();
                planet[3] = "images/Mars.jpg";
                planet[4] = new Image();
                planet[4] = "images/Jupiter.jpg";
            }
            else {
                alert("There are no images to preload");
            }
        }
        function startSlideShow() {
            if (i < planet.length) {
                document.images["planet_pic"].src = planet[i];
                i++;
            }
            else {
                i = 0;
                document.images["planet_pic"].src = planet[i];
            }
            timeout = setTimeout('startSlideShow()', 1500);
        }
        function stopSlideShow() {
            clearTimeout(timeout);
        }
    </script>
</head>
<body bgcolor="black" onload="preLoadImages()">
    <img name="planet_pic" src="/images/Jupiter.jpg" height="348"
        width="545px" />
    <form>
        <br />
        <br />
        <input type="button" value="Start Show"
            onclick="return startSlideShow();" />
        <input type="button" value="Stop Show"
            onclick="return stopSlideShow();" />
    </form>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T08:53:41.957

是的，应该是，

```
planet[0] = new Image();
planet[0].src = "images/Venus.jpg"; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T08:54:22.360

试试这个：

```
var list = ["Venus.jpg", "Neptune.jpg", "Earth.jpg", "Mars.jpg", "Jupiter.jpg"];
var img;
planet = []; // **WHY a global?** global variable

for (var i = 0; i < list.length; i++) {
  img = new Image();
  img.src = "images/" + list[i];
  planet[i] = img;
  // or planet.push(img);
} 
```

# regex - 如何使用 sed 打印匹配模式

> ID：12509150
> 
> 赞同：2
> 
> 时间：2012-09-20T08:50:12.760
> 
> 标签：regex, linux, bash, sed, awk

我想使用 sed 打印匹配模式，例如：
我想获取 uuid，所以我可以使用这个：
`blkid $1 | grep -o -E "[a-f0-9-]{8}([a-f0-9-]{4}){3}[a-f0-9-]{12}"`
我如何使用 sed 或 awk 来做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-20T09:34:06.343

`sed`

```
sed -n 's/pattern/&/p' file 
```

`-n`是告诉`sed`要安静，`&`是匹配的字符串，`p`是打印。

`awk`

```
awk '/pattern/' file 
```

在您的情况下，更改`pattern`为`[a-f0-9-]{8}([a-f0-9-]{4}){3}[a-f0-9-]{12}`, 可能需要使用`\`escape `[`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-20T09:33:38.350

你要这个？

awk：

```
kent$  echo '/dev/sda6: UUID="c6e3ce88-f44e-4261-9178-042db8423081" TYPE="ext3"'|awk -F'UUID="|" ' '{print $2}'
c6e3ce88-f44e-4261-9178-042db8423081 
```

赛德：

```
kent$  echo '/dev/sda6: UUID="c6e3ce88-f44e-4261-9178-042db8423081" TYPE="ext3"'|sed -r 's/.*UUID="([^"]*).*"/\1/g'
c6e3ce88-f44e-4261-9178-042db8423081 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-20T10:24:28.917

```
blkid | sed -nr 's/^.+UUID="(.*?)" .+$/\1/p' 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-20T09:35:12.453

awk 和 sed 解决方案：

```
$ blkid /dev/sda2 | sed -e 's/.*UUID="\([0-9A-F]*\).*/\1/'
16A42BA2A42B837B

$ blkid /dev/sda2 | awk '{split($2, tmp, "=") ; print tmp[2]}'
"16A42BA2A42B837B"

$ blkid /dev/sda2 | awk -F'UUID="|"' '{print $2}'
16A42BA2A42B837B 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-20T11:45:03.727

使用 sed：

```
sed -n 's/.*\(Pattern\).*/\1/p' 
```

经过测试

> echo "<TextValue> 开始</TextValue>" <TextValue> 开始</TextValue> echo "<TextValue> 开始</TextValue>" | sed -n's/. *（开始）。*/\1/p' 开始

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-10-01T19:43:07.060

[在http://sed.sourceforge.net/sed1line.txt](http://sed.sourceforge.net/sed1line.txt)有一个很好`sed`的单行列表。它提出了两种模拟方法：`grep`

```
sed -n '/regexp/p'           # method 1
sed '/regexp/!d'             # method 2 
```

`/regexp/p`打印匹配的行`/regexp/`。（需要该`-n`标志来防止`sed`打印/重新打印每个已处理的行。）

`/regexp/!d`删除*不*匹配的每一行`/regexp/`，因此只打印匹配的行。

# asp.net-mvc - 如何删除默认的客户端验证器？

> ID：12509151
> 
> 赞同：0
> 
> 时间：2012-09-20T08:50:12.987
> 
> 标签：asp.net-mvc, validation

我已经根据以下主题中接受的答案实现了下拉 DateTime 控件和验证器： [How to validate a date using 3 dropdowns( day, month, year) using jquery unobtrusive validation？](https://stackoverflow.com/questions/11475670/how-to-validate-a-date-using-3-dropdowns-day-month-year-using-jquery-unobtr)

我正在使用 MVC 4。

这个 3-dropdown 日期大部分工作正常，但有时当我单击这三个下拉菜单并选择不同的值（包括“未选择”值）时，我会从默认 DateTime 验证器中收到错误消息“出生日期必须是日期”。即使我选择了有效的年/月/日并且我的自定义验证器通过了。

当日期设置正确时，此消息不会阻止 POST 表单，但该消息会使用户感到困惑。

当我检查 Firebug 中不显眼的规则时，我看到这条消息来自默认的“日期”规则。我知道我可以使用规则（“删除”（或删除规则、消息）删除此默认日期规则，但我不确定何时删除它们以停止 MVC 再次添加该规则。

如何删除此默认“日期”规则以确保只有我的自定义规则对这三个下拉菜单有效？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T14:25:12.467

我没有尝试过，但我猜默认数据类型客户端验证规则是由`ClientDataTypeModelValidatorProvider`. 此提供程序默认为 ON。您可以尝试从`ModelValidatorProvidersCollection`Global.asax.cs 中删除它。

```
 var clientDataTypeProvider = ModelValidatorProviders.Providers.FirstOrDefault(p => p.GetType().Equals(typeof(ClientDataTypeModelValidatorProvider)));
  ModelValidatorProviders.Providers.Remove(clientDataTypeProvider); 
```

注意：通过删除它，您也将失去对**数字**的验证。其他选项是创建一个自定义`ClientDataTypeModelValidatorProvider`并将其添加到提供程序集合中。还有一件事是这个想法在全球范围内有效，并影响到所有其他地方。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T09:59:58.243

所以我发明了一个快速技巧，也许有人会觉得它有用或者有什么需要改进的地方：

```
function removeDefaultDateValidators(selector, validatorToRemove) {
    $('form').each(function () {
        var settings = $(this).validate().settings;
        $(selector, this).each(function () {
            // rules and messages seem to be keyed by element name, not id
            var elmName = $(this).attr('name');
            delete settings.rules[elmName][validatorToRemove];
            delete settings.messages[elmName][validatorToRemove];
        });
    });
}

$(function () {
    removeDefaultDateValidators('select[data-val-trippleddldate]', 'date');
}); 
```

加载页面时，它会遍历所有表单并找到应该删除验证器的元素。在我的情况下，我正在从所有具有我的自定义tripledlddate 验证器的下拉列表中删除默认日期验证器。

在 Firefox 和 IE 9 中测试，“在我的机器上工作”。

# objective-c - 报亭应用内容

> ID：12509152
> 
> 赞同：2
> 
> 时间：2012-09-20T08:50:18.773
> 
> 标签：objective-c, ios, newsstand-kit

我做了相当多的搜索，并决定我一定是个白痴。

我目前正在构建一个 Newsstand 应用程序，该应用程序将从服务器中提取 PDF，但是，订阅了 Newsstand 应用程序后，我知道这些杂志比 PDF 更复杂。我的问题是，这些自定义杂志（带有视频和可平移图片）到底是如何构建的，我需要做什么才能从服务器中提取它们？

我什至不知道这些自定义杂志是什么文件类型，而且从我读过的所有内容来看，似乎假设我只会知道。

请帮帮我，我完全糊涂了。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-01T11:56:54.330

报亭 api 不关心您的杂志或报纸的格式。报亭只管理“NKAssetDownloads”和订阅。Apple 建议将您拥有的任何资产捆绑到一个可下载的内容中，尽管如果您愿意，报亭 api 确实允许您下载多个资产（虽然这确实使事情变得复杂，所以我建议您不要这样做！）[http://developer.apple.com/library/ios/#documentation/StoreKit/Reference/NKAssetDownload_Class/NKAssetDownload/NKAssetDownload.html#//apple_ref/occ/cl/NKAssetDownload](http://developer.apple.com/library/ios/#documentation/StoreKit/Reference/NKAssetDownload_Class/NKAssetDownload/NKAssetDownload.html#//apple_ref/occ/cl/NKAssetDownload)

相反，您应该将所有杂志页面、视频、图像等打包到一个 zip 文件中，然后将其作为 NKAssetDownload 下载。完成后，您可以解压缩它（您可以让报刊亭决定将其全部粘贴到哪里），然后在您的应用程序中使用它做任何您喜欢的事情。如果您有图像，您可以在图像视图中显示它们，html 页面可以在 web 视图中显示等。这取决于您的杂志采用什么格式。

实际杂志在到达您的应用程序之前是如何制作的则是另一回事。对于我在报纸公司工作的应用程序，我们为我们提供了一堆 pdf 页面，然后我们在应用程序中显示这些页面，并带有一些自定义绘图和效果。他们还为我们提供了一些纯文本页面和坐标信息，以便我们可以做其他时髦的事情。

# php - 应用按钮后重定向 joomla

> ID：12509154
> 
> 赞同：0
> 
> 时间：2012-09-20T08:50:21.883
> 
> 标签：php, forms, redirect, joomla

我有一个简单的查询

```
 <button type="button" onclick="Joomla.submitbutton('propform.apply')">
            <?php echo JText::_('JAPPLY') ?> 
```

我想在应用功能之后将其重定向到新选项卡 - 有什么简单的方法可以实现这一点：（某种 onclick - 在应用功能之后重定向功能）？在此先感谢史蒂夫

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T16:18:46.150

如果您使用的是扩展 JControllerForm 的控制器，那么您可以通过覆盖保存函数来实现这一点。

```
public function save($key = null, $urlVar = null)
{
    parent::save($key, $urlVar);

    $task = $this->getTask();
    if($task == 'apply') {
        $this->setRedirect(
            JRoute::_('index.php?option=com_mycomponent&view=anothertab', false)
        );
    }
} 
```

# java - 活动调用完成（）时通知pendingIntent contentIntent失败

> ID：12509156
> 
> 赞同：11
> 
> 时间：2012-09-20T08:50:27.400
> 
> 标签：java, android

我有一个前台服务通知，单击该通知应启动一项活动。此活动在调用完成（）之前非常短暂。

第一次点击通知它工作，第二次，此后我得到错误：

```
 Sending contentIntent failed: android.app.PendingIntent$CanceledException 
```

在创建前台服务通知时的代码中，我已将 randomActivity.class 更改为另一个不调用完成的 Activity 类，并且每次点击都能完美运行。从：

```
 Intent notificationIntent = new Intent(this, RandomActivity.class); 
```

至：

```
 Intent notificationIntent = new Intent(this, HomeActivity.class); 
```

工作正常...

我使用了来自 Android Developers 网站的标准通知代码，并使用 Notification builder 对其进行了测试。无论如何，我都会得到相同的结果。除非 Activity 调用 finish(); 否则它工作得很好。

**这是预期的行为，错误还是我错过了什么？**

我提前感谢您的帮助，并希望有一个解决方案！

注意：我使用的通知代码是完全标准的，所以我没有发布它。RandomActivity 调用完成（）；在 onCreate 中，所以也没有什么不寻常的地方。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-09-21T10:20:01.817

在尝试了所有可能的方法后，我最终找到了解决方案。发布以防任何人也偶然发现此问题。

我必须将 int requestCode 与通知 ID 匹配。为什么？完全不知道......我只能假设它可以防止意图数据变为空或重用它？

```
 private static int ONGOING_NOTIFICATION_ID = 76;

    PendingIntent contentIntent = PendingIntent.getActivity(this,
    ONGOING_NOTIFICATION_ID, notificationIntent, PendingIntent.FLAG_UPDATE_CURRENT); 
```

与 startForeground 的通知 id 相同：

```
 this.startForeground(ONGOING_NOTIFICATION_ID, not); 
```

希望这可以帮助某人。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2015-01-23T04:15:54.920

我不需要检查通知 ID（就像你建议的那样），但我确实必须将标志更改为`FLAG_UPDATE_CURRENT`，而不是`FLAG_ONE_SHOT`.

使用`FLAG_ONE_SHOT`时，待处理的 Intent 会在交付后被取消，之后，无论点击多少通知都不会允许再次交付相同的待处理 Intent，因此出现异常。

这对我来说是个问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-09-29T16:43:38.867

我刚刚遇到了类似的问题，它不是前台通知，但有时单击通知会导致`Sending contentIntent failed: android.app.PendingIntent$CanceledException`错误并且没有任何反应。所以我只想描述我的问题和解决方案，因为我在这里寻找它。

对我来说，问题是我在服务器上有一个剩余的安装对象，所以我实际上得到了两次 FCM onMessageReceived 事件并两次发布本地通知。它是为了替换自己而实现的，因为它与同一个事件有关，所以我没有注意到。

但是我使用当前时间来生成一个唯一的 requestCode，精度为 10ms，所以如果第二次调用在第一次调用后 10ms 内发布本地通知，它会得到相同的请求代码。

我也使用了标志 FLAG_CANCEL_CURRENT，但它应该只是取消先前的待处理意图并创建一个新意图。

因此，然后我尝试将 requestCode 设为常量 - 尽管如此，有时意图仍然可以正常工作。

我认为罪魁祸首是这两个调用并行运行，有时，取消其pendingIntent 的通知实际上是稍后发布的，替换了具有工作pendingIntent 的通知。

我的解决方案：我确保 onMessageReceived 中的代码等待上一个调用完成。它停止发生，一切正常。我还在 onMessageReceived 方法中添加了一些过滤，以忽略传入的推送，这些推送具有完全相同的数据并且相隔不到 5 秒就被接收到。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-12-10T22:26:04.747

我的问题源于多个`PendingIntent`s 相等；在这种情况下，取消一个会`PendingIntent`取消所有“重复”。

[根据 Android 文档](https://developer.android.com/reference/android/app/PendingIntent)：

> 重要的是要知道两个 Intent 何时被*认为是相同*的，以便检索 PendingIntent。人们犯的一个常见错误是创建多个 PendingIntent 对象，其 Intent 仅在其“额外”内容上有所不同，期望每次都获得不同的 PendingIntent。这不会发生。Intent 中用于匹配的部分与 Intent#filterEquals(Intent) 定义的部分相同。如果您使用两个根据 Intent#filterEquals(Intent) 等效的 Intent 对象，那么您将获得相同的 PendingIntent 对象。

关于如何处理这个问题的两个建议：

> 如果您确实需要同时激活多个不同的 PendingIntent 对象（例如用作同时显示的两个通知），那么您将需要**确保它们有所不同**，以便将它们与不同的待定意图。**这可能是 Intent#filterEquals(Intent) 考虑的任何 Intent 属性，或**提供给 getActivity(Context, int, Intent, int)、getActivities(Context, int, Intent[], int)、getBroadcast( Context, int, Intent, int) 或 getService(Context, int, Intent, int)。
> 
> 如果您一次只需要一个激活的 PendingIntent 用于您将使用的任何 Intent，那么您也可以使用标志 FLAG_CANCEL_CURRENT 或 FLAG_UPDATE_CURRENT 来取消或修改与您提供的 Intent 关联的任何当前 PendingIntent。

[两个意图在 时相等](https://developer.android.com/reference/android/content/Intent.html#filterEquals(android.content.Intent))：

> 它们的动作、数据、类型、身份、类别和类别是相同的。这不会比较意图中包含的任何额外数据。请注意，从技术上讲，当实际与 IntentFilter 匹配时，标识符会被忽略，而在这里它会像其他字段一样直接比较是否相等。

# sql - 我应该如何使用 IF else 语句验证一个日期时间字段是否大于 sql server 2008 中的第二个日期时间？

> ID：12509163
> 
> 赞同：0
> 
> 时间：2012-09-20T08:50:49.307
> 
> 标签：sql, sql-server, sql-server-2008, validation, datetime

我正在编写一个 sql 查询，我想检查表 a 中的一个日期时间字段是否大于表 b 中的一个日期时间字段。

任何帮助都将不胜感激。

我的查询看起来像这样：

```
SELECT A.AFIELD, B.BFIELD, ( <HERE I WANT TO PUT THE VALIDATION STATEMENT> ) AS 'VALIDATED AS' FROM A JOIN B ON A.AFIELD=B.AFIELD 
```

验证声明应该像

```
If (A.XFIELD < B.YFIELD)
THEN "YES"
ELSE
"NO" 
```

我正在尝试但无法这样做，如果有人可以提供帮助，那就太好了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T08:52:26.497

你想要case语句

```
CASE WHEN datediff(d,A.XFIELD, B.YFIELD) > 0 THEN 'YES'  ELSE  'NO' END 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T08:56:22.157

你可以用`case statement`这个。

**句法：**

**简单的 CASE 表达式：**

```
CASE input_expression 
     WHEN when_expression THEN result_expression [ ...n ] 
     [ ELSE else_result_expression ] 
END 
```

**搜索到的 CASE 表达式：**

```
CASE
     WHEN Boolean_expression THEN result_expression [ ...n ] 
     [ ELSE else_result_expression ] 
END 
```

在你的情况下，它会像：

```
SELECT 
A.AFIELD, 
B.BFIELD, 
(
CASE 
WHEN
 A.XFIELD < B.YFIELD THEN 'YES'  
ELSE  'NO' 
END
) AS 'VALIDATED AS' 
FROM A JOIN B ON A.AFIELD=B.AFIELD 
```

[有关案例的详细信息，请参阅此处](http://msdn.microsoft.com/en-us/library/ms181765.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-20T08:53:43.657

像这样的东西

```
SELECT 
A.AFIELD, 
B.BFIELD, 
(
CASE WHEN A.XFIELD < B.YFIELD THEN 'YES'  
ELSE  'NO' 
END
) AS 'VALIDATED AS' 

FROM A JOIN B ON A.AFIELD=B.AFIELD 
```

# jquery - Jqgrid通过传递参数将删除按钮绑定到javascript函数

> ID：12509164
> 
> 赞同：0
> 
> 时间：2012-09-20T08:50:53.113
> 
> 标签：jquery, asp.net-mvc, asp.net-mvc-3, jqgrid, jqgrid-asp.net

我有一个 jqgrid 我正在使用格式化程序作为列

```
{ name: 'Delete', width: 40, formatter: self.deleteBtnFormatter } 
```

其中 deleteBtnFormatter 如下：

```
 deleteBtnFormatter: function (cellvalue, options, rowdata) {
    var self = this;        
    if (cellVale== "Yasser") {
        return "<div class='abc'>-</div>";
    }
    else {
        var deleteBtnId = // i am getting this from rowData
        var deleteButton = "<div class='xyz'" + "id='" + deleteBtnId + "' >Delete<div>";        

        return deleteButton;
    }

 }, 
```

现在我的问题是我应该如何将所有这些删除按钮绑定到另一个 javascript 方法，从那里我将进行 ajax 调用以删除此条目。

我还注意到我想将参数传递给 javascript 方法。

我知道这可以使用`Url.Action`或玩弄`href`属性来完成，但我想绑定它。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T12:33:35.347

您可以使用以下格式化程序 javascript 函数：

```
function deleteformatter(cellvalue, options, rowdata)
{
var id = // i am getting this from rowData
return "<input style='height:17px;width:17px;'  type='image' src='../Images/delete-icon.png' title='Remove' onclick=\"javascript:Delete_Click(this,id);\"/>";
}
// you can use ajax call rather to use this jqgrid delete function.
function Delete_Click(imgbtn,id){        
    HideError();
    var url = ""//function that you want to call
    jQuery("#jqgridId").jqGrid('delGridRow', id, { top: 230, left: 350, height: 110, reloadAfterSubmit: true, url: url,
                afterComplete : function () {
                    $('#jqgridId').trigger('reloadGrid');                        
                }
            });
} 
```

您可以将以下函数替换为 ajax 调用以删除网格条目。

```
 jQuery("#jqgridId").jqGrid('delGridRow', id, { top: 230, left: 350, height: 110, reloadAfterSubmit: true, url: url,
                afterComplete : function () {
                    $('#jqgridId').trigger('reloadGrid');                        
                }
            }); 
```

下面是ajax调用的例子：

```
 $.ajax({
            url: url,
            type: "POST",
            data: JSON.stringify({ ID: id }), 
            dataType: 'json',
            contentType: "application/json; charset=utf-8",
            error: function (xhr, status, error) {
                var error = extractError(xhr);
            },
            success: function (data) {

            }
        }); 
```

# android - 安卓图标位置

> ID：12509167
> 
> 赞同：0
> 
> 时间：2012-09-20T08:50:57.713
> 
> 标签：android

我想从 Android 上的活动屏幕获取图标位置，我的意思是主屏幕，而不是菜单。
有谁知道如何检测Android中图标的大小和位置，有可能吗？
我找不到任何关于它的手册。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T11:01:50.140

> 我想从 Android 上的活动屏幕获取图标位置，我的意思是主屏幕，而不是菜单。

Android中没有“主屏幕”的概念。

> 有谁知道如何检测Android中图标的大小和位置，有可能吗？

如果“图标”在您的活动中，找到`ImageView`显示图标的或其他小部件，您可以找出它的位置。

如果“图标”在其他任何地方，您将无法找出存在哪些图标，更不用说它们在第三方应用程序或操作系统中的位置了。

# excel - 如何使用VB6计算所选excel文件中的行数

> ID：12509172
> 
> 赞同：1
> 
> 时间：2012-09-20T08:51:17.150
> 
> 标签：excel, vb6, vba

我正在使用下面的代码来读取 excel 文件：我只想打印第一行数据，因为我需要在工作表中找到行数（非空白）。

```
Set xlBook = GetObject(FilePath)
xlBook.Application.Visible = True
xlBook.Windows(1).Visible = True
xlBook.Application.WindowState = xlMinimized

Dim irow As Integer

For irow = 2 To 101
    MsgBox xlBook.Worksheets(1).Cells(irow, 1).Value
Next 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T09:33:20.517

不幸的是，我不会推荐`UsedRange`。

两个原因

1.  `UsedRange`不会给你`no of rows in sheet (non blank)`你想要的。
2.  `UsedRange`是非常不可靠的。如果您想找到最后一行，请查看此[链接](https://stackoverflow.com/questions/11169445/error-finding-last-used-cell-in-vba/11169920#11169920)。请注意，这仍然不会为您提供**NON Blank Rows**的数量。

要获得非空白行的数量，您必须使用自动筛选。`<>""`用作自动筛选条件，然后使用可见单元格行数来获取非空白行。

**编辑：**

看到这个[链接](https://stackoverflow.com/questions/10705724/how-can-i-use-vba-to-delete-all-columns-which-are-empty-apart-from-a-specific-he)

这篇文章删除了除特定标题之外的所有空列。我相信你可以修改它以满足你的需要。

# ruby-on-rails - 在模型名称中使用大写字母覆盖 Rails 控制器路由

> ID：12509176
> 
> 赞同：15
> 
> 时间：2012-09-20T08:51:30.317
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ruby-on-rails-3.1

我想在 Rails 中创建一个模型：

```
rails generate model ABCThing 
```

所以这将创建一个表，`abc_things`. 伟大的。问题来自控制器和路由。我希望我的控制器是：

```
class ABCThingsController < ApplicationController
end 
```

但是，添加后`routes.rb`

```
resources :abc_things, :only => [:index] 
```

并创建相应的`index`视图，我在浏览器中收到以下错误：

```
Expected /app/controllers/abc_things_controller.rb to define AbcThingsController 
```

这个问题很容易看到（`"ABCThings".tableize.classify => "AbcThing"`），但我不太确定如何解决它。我想覆盖从视图到控制器的 rails 默认路由，但不确定如何。

将不胜感激任何帮助（以及更好的问题标题的建议！）

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2016-02-25T13:40:14.277

在尝试了上述所有解决方案后，我遇到了这个问题；能够使用变形器解决我的问题。

就我而言，问题是`TLA::ThingsController`正在解决`Tla::ThingsController`

将以下内容放在我的初始化程序文件夹中修复了它

`config/initializers/inflections.rb`

```
ActiveSupport::Inflector.inflections do |inflect|
  inflect.acronym 'TLA'
end 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-20T11:39:06.990

您应该在 routes.rb 中设置自定义控制器名称：

```
resources :abc_things, :only => [:index], :controller => "ABCThings" 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-12-09T18:28:22.970

这可能在某些时候在 Ruby 中发生了变化，但是对于连续多个大写字母（首字母缩写词或首字母缩写）的类的命名，您不再需要在文件名中包含下划线。

```
# abc_thing.rb 
```

可以包含

```
class ABCThing

  def hello
    puts "Hello World"
  end

end 
```

或者

```
class AbcThing

  def hello
    puts "Hello World"
  end

end 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-20T09:00:58.357

当你运行命令

```
rails generate model ABCThings 
```

它将生成模型而不是控制器。如果您希望模型和控制器都使用以下

```
rails generate scaffold ABCThings 
```

我认为您没有使用 rails 命令生成控制器，因此使用以下命令生成控制器时出现问题

```
rails generate controller ABCThings 
```

你可以`/app/controllers/abc_things_controller.rb`如下

```
class AbcThingsController < ApplicationController
end 
```

# javascript - 如何提醒 Shape,TwoDShape 类的名称？

> ID：12509177
> 
> 赞同：1
> 
> 时间：2012-09-20T08:51:32.870
> 
> 标签：javascript, inheritance, prototype

我有这个执行警报的[演示](http://jsfiddle.net/centerwow/4Bjjp/)，它运行良好：

在代码下方。

```
var Shape = function(){};
var TwoDShape = function(){};
Shape.prototype.name = 'shape';
Shape.prototype.toString = function(){return this.name;};

alert('there is alert');​ 
```

当我添加这一行时：`extend(TwoDShape, Shape);`

如您所见，我无法执行警报[Demo](http://jsfiddle.net/centerwow/4Bjjp/1/)

在此之后我添加行：

```
var my = new TwoDShape();
alert(my.toString());
alert(TwoDShape.prototype.name);
alert(my.hasOwnProperty('name')); 
```

提醒班级的名称，`shape`或者`TwoDShape`我无法成功显示class.name 为什么？

[这是完整的代码：](http://jsfiddle.net/centerwow/4Bjjp/5/) ​</p>

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T09:15:17.687

首先，您的代码中没有函数`extend()`，因此代码在那里遇到错误并停止运行。

所以我使用 jQuery 修复了它[`$.extend()`](http://api.jquery.com/jQuery.extend/)，或者你可以`extend()`自己编写（参见 Jimmy 的回答）。

其次，如果您希望所有 Shape/TwoDShape 实例都具有`name`可使用 访问的类`toString()`，则需要扩展原型：

`TwoDShape.prototype = $.extend(TwoDShape.prototype, Shape.prototype);`

请参阅我在扩展原型上创建的 jsfiddle [http://jsfiddle.net/4Bjjp/6/](http://jsfiddle.net/4Bjjp/6/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T09:05:55.077

您的代码中断，因为`extend`函数不存在。您必须实施自己的才能使其工作。这是一个简单的实现。

```
function extend(destination, source) {
  for (var key in source) {
    if(source.hasOwnProperty(key)) {
      destination[key] = source[key];
    }
  }

  return destination;
} 
```

# windows - 如何在 node.js 上执行 CSSO 命令行 CSS minifier

> ID：12509179
> 
> 赞同：1
> 
> 时间：2012-09-20T08:51:43.357
> 
> 标签：windows, node.js, command-line

我正在尝试在**node.js**上使用 CSSO 命令行。

可悲的是，我无法理解如何才能调用`csso`命令。

检查此页面以获取 CSSO 的文档：[https ://github.com/css/csso#33-from-the-command-line](https://github.com/css/csso#33-from-the-command-line)

我已经按照文档页面的步骤使用 NPM 下载 CSSO。它已经安装了，因为我可以执行`require("csso").justDoIt(".....")`，但这对我来说并不好，因为我需要在一些 Visual Studio 构建过程中使用这个 CSS 缩小器，所以我需要在命令行中执行它。

* * *

**请注意，解决方案不会*使用其他压缩器*，因为我尝试过 YUI、AjaxMin 和其他具有命令行界面的压缩器，它们不会将重复的类、标识符和选择器合并为一个。**

先感谢您！！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T17:06:38.623

bin 文件夹中的 csso 文件基本上只是调用 /csso/lib/csso.js 文件，因此您应该能够围绕以下内容修补您的要求；

节点 /path/to/csso/lib/csso.js -i -o

未经测试，它可能需要一些变量的工作，但这应该让你开始解决问题！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T10:59:21.223

使用节点的[子进程](http://nodejs.org/api/child_process.html)

```
var spawn = require('child_process').spawn,
csso  = spawn('csso/bin/csso', ['test.css']);

csso.stdout.on('data', function (data) {
  console.log('stdout: ' + data);
}); 
```

# expressionengine - 将表达式引擎从 2.1 升级到 2.5 后，插件 url 链接到 index.php

> ID：12509181
> 
> 赞同：2
> 
> 时间：2012-09-20T08:51:47.847
> 
> 标签：expressionengine

我按照那里的指南将表达式引擎驱动的站点从 2.1.x 新升级到了 2.5.x。除了插件的管理菜单项外，一切顺利。例如，该站点使用 Structure 模块，安装后它仍然指向 index.php。菜单中不是附加组件的所有其他项目都指向 admin.php。有没有人有解决这个问题的方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T13:08:35.370

听起来您必须删除并重新添加快速选项卡（菜单栏中的额外按钮）。这些位置包括数据库中的文件名，因此它们可能没有从 更改`index.php`为`admin.php`.

去**成员**→**查看全部**→***用户***名→**主菜单管理器**。对于任何麻烦的按钮，清空**Title**字段并单击**Update**。这将删除按钮。

然后导航回附加组件（aay，**附加组件**→**模块**→**结构**），然后单击菜单栏中的“ **+ 添加**”链接，将其与更新的链接一起添加回来`admin.php`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T12:22:32.253

我建议两件事：

1.  确保将 Structure 升级到最新版本。
2.  确保 -see `$config['cp_url']`Admin **→ System Administration → Config File Editor**的值正确指向**http://yoururl.com/admin.php**。

# html - 兼容性问题在谷歌浏览器中

> ID：12509183
> 
> 赞同：1
> 
> 时间：2012-09-20T08:51:54.773
> 
> 标签：html

我的要求是通过选择一个文件

```
<input type="file"> 
```

并将所选文件的位置发送到

```
<form> 
```

所以我写了如下的html代码：

```
 <form method="post" action="Xmlsubmit">
 <input name="path" type="file" id="t" />
 <input type="submit" class="button" value="submit">
 </form> 
```

这在 IE 中没有任何问题，但是当我使用 google chrome 和 mozilla firefox 尝试此操作时，我面临“找不到文件异常”。是否有任何工作可以与 google chrome 和 mozilla firefox 一起使用？

我需要的是：我只是想将所选文件的位置发送到表单元素

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-09-20T08:56:45.897

您忘记设置表单 enctype ..

尝试 `<form enctype="multipart/form-data" ...>`

# jquery - jQuery Mobile 链接错误？

> ID：12509185
> 
> 赞同：0
> 
> 时间：2012-09-20T08:51:58.787
> 
> 标签：jquery, cordova, jquery-mobile

我正在使用 jQuery Mobile 和 PhoneGap 制作一个应用程序。我注意到，当我与事件链接时，`$.mobile.changePage()`我遇到了一些问题。`pageinit`它被多次调用，但在一段时间后，例如在 15 次重定向后它停止工作。

当我将链接更改为`window.location.href = ()`. 不幸的是，我需要转换，但这种方法不提供它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T14:12:18.807

你应该小心你在哪里绑定你的事件。Jquery mobile 以这样一种方式处理页面更改，当您更改页面时不会“重置”事件绑定，就像在更传统的更改页面上发生的那样。因此，如果每次加载页面时都调用事件绑定，那么绑定函数将被调用的次数与页面已经加载的次数一样多，这将随着每次导航而增加。我通常将我所有的 pageinit 事件绑定在我的页面标题中。由于标头仅由 jquery mobile 在初始页面上加载，因此您可以确保通过这种方式绑定只会执行一次。

# c++ - collect2：ld返回1退出状态构建错误

> ID：12509187
> 
> 赞同：4
> 
> 时间：2012-09-20T08:51:59.617
> 
> 标签：c++, qt, compiler-errors, exit, status

编译器：Qt 语言：C++

这个程序不适合我哈哈，这是我第三次不得不寻求帮助，这让我发疯了（感谢大家对我的耐心和帮助）

我尝试运行我的程序（再次第 100 万次）因为我无法整理出 ostream，所以我在 main 中注释掉了所有 cout 函数，以便我可以处理我的其余代码。但是当我尝试运行它时，我得到了 collect2: ld 在我的构建问题中返回了 1 个退出状态。

我切换到编译输出......和天哪......

> 运行项目列表的构建步骤...配置不变，跳过 qmake 步骤。开始：“C:/Qt/2010.05/mingw/bin/mingw32-make.exe”-w mingw32-make：进入目录`C:/Qt/2010.05/bin/List-build-desktop'
> 
> C:/Qt/2010.05/mingw/bin/mingw32-make -f Makefile.Debug
> 
> mingw32-make[1]：进入目录`C:/Qt/2010.05/bin/List-build-desktop'
> 
> g++ -enable-stdcall-fixup -Wl,-enable-auto-import -Wl,-enable-runtime-pseudo-reloc -Wl,-subsystem,console -mthreads -Wl -o debug\List.exe debug/main.o调试/list.o -L"c:\Qt\2010.05\qt\lib" -lQtCored4
> 
> debug/main.o:C:\Qt\2010.05\bin\List-build-desktop/../List//List.h:194: 未定义对 `List::getNewNode(double const&)' 的引用
> 
> debug/main.o:C:\Qt\2010.05\bin\List-build-desktop/../List//List.h:215: 未定义对 `List::getNewNode(double const&)' 的引用
> 
> debug/main.o:C:\Qt\2010.05\bin\List-build-desktop/../List//List.h:215: 未定义对 `List::getNewNode(int const&)' 的引用
> 
> debug/main.o:C:\Qt\2010.05\bin\List-build-desktop/../List//List.h:194: 未定义对 `List::getNewNode(int const&)' 的引用
> 
> debug/main.o:C:\Qt\2010.05\bin\List-build-desktop/../List//List.h:466: 未定义对 `List::getNewNode(int const&)' 的引用
> 
> debug/main.o:C:\Qt\2010.05\bin\List-build-desktop/../List//List.h:466: 未定义对 `List::getNewNode(double const&)' 的引用
> 
> collect2: ld 返回 1 个退出状态
> 
> mingw32-make[1]: 离开目录`C:/Qt/2010.05/bin/List-build-desktop'
> 
> mingw32-make: 离开目录`C:/Qt/2010.05/bin/List-build-desktop'
> 
> mingw32-make[1]: *** [debug\List.exe] 错误 1
> 
> mingw32-make: *** [调试] 错误 2
> 
> 进程“C:/Qt/2010.05/mingw/bin/mingw32-make.exe”退出，代码为 %2。构建项目列表时出错（目标：桌面）执行构建步骤“Make”时

这基本上就是我得到的。我有 2 个头文件和 1 个源文件。标头：ListNode.h 和 list.h，我的 cpp 是 main.cpp

一切都相互联系，所以我不明白为什么它给了我未定义的参考错误。

我所有的其他朋友都几乎放弃了这项任务，我拒绝放弃。我只是今晚不睡觉哈。再次感谢您的帮助！

编辑::--代码

列表节点.h

```
#ifndef LISTNODE_H
#define LISTNODE_H

template<typename NODETYPE> class List;

template<typename NODETYPE>
class ListNode
{
    friend class List< NODETYPE >;

public:
    ListNode(const NODETYPE &);
    NODETYPE getData() const;
private:
    NODETYPE data;
    ListNode< NODETYPE > *nextPtr;

};

template<typename NODETYPE>
ListNode< NODETYPE >::ListNode(const NODETYPE &info)
    :data(info), nextPtr(0)
{

}

template<typename NODETYPE>
NODETYPE ListNode< NODETYPE >::getData() const
{
    return data;
}

#endif // LISTNODE_H 
```

我不会把所有的东西都放上去，因为它很多......这是List.h..我只能想象它还有多少是错误的，但我无法检查，因为错误......

```
#include <iostream>
using std::cout;

#include <fstream>

#include <string>
using std::ostream;

#include "ListNode.h"

template< typename NODETYPE >
class List
{
  //template <typename OUTPUT >
  //friend ostream &operator <<(ostream &, const List<NODETYPE> & );

public:
    List();
    ~List();
    void insertAtFront( const NODETYPE & );
    void insertAtBack( const NODETYPE & );
    bool removeFromFront( NODETYPE & );
    bool removeFromBack( NODETYPE & );
    bool isEmpty() const;
    void print() const;

    bool append(const NODETYPE &);
    bool add_n(int, const NODETYPE &);
    bool concat(List&);
    void reverse();
    bool remove_last();
    bool remove_n(int);
    void sort();
    bool merge(List&);
    void add_in(const NODETYPE &);
    void remove(const NODETYPE &);
    NODETYPE sum();
    int count();

private:
    ListNode< NODETYPE > *firstPtr;
    ListNode< NODETYPE > *lastPtr;

    ListNode< NODETYPE > *getNewNode( const NODETYPE &);

};

template<typename NODETYPE>
List<NODETYPE>::List()
    : firstPtr(0), lastPtr(0)
{

}

template< typename NODETYPE>
List<NODETYPE>::~List()
{
    if( !isEmpty() )
    {
        cout << "Destroying Nodes...\n";

        ListNode< NODETYPE > *currentPtr = firstPtr;
        ListNode< NODETYPE > *tempPtr;

        while ( currentPtr != 0)
        {
            tempPtr = currentPtr;
            cout << tempPtr->data << "\n";
            currentPtr = currentPtr->nextPtr;
            delete tempPtr;
        }
    }

    cout << "All nodes destroyed \n\n";
}

template< typename NODETYPE >
void List< NODETYPE>::insertAtFront(const NODETYPE &value)
{
    ListNode< NODETYPE > *newPtr = getNewNode (value);

    if( isEmpty())
        firstPtr = lastPtr = newPtr;
    else
    {
        newPtr->nextPtr = firstPtr;
        firstPtr = newPtr;
    }
}

template< typename NODETYPE >
void List<NODETYPE>::insertAtBack(const NODETYPE &value)
{
    ListNode<NODETYPE> *newPtr = getNewNode(value);

    if( isEmpty())
        firstPtr = lastPtr = newPtr;
    else
    {
        lastPtr->nextPtr = newPtr;
        lastPtr = newPtr;
    }
}

template< typename NODETYPE >
bool List<NODETYPE>::removeFromFront(NODETYPE &value)
{
    if(isEmpty())
        return false;
    else
    {
        ListNode<NODETYPE> *tempPtr = firstPtr;

        if(firstPtr == lastPtr)
            firstPtr = lastPtr = 0;
        else
            firstPtr = firstPtr->nextPtr;

        value = tempPtr->data;
        delete tempPtr;
        return true;
    }
}

template<typename NODETYPE>
bool List<NODETYPE>::removeFromBack(NODETYPE &value)
{
    if( isEmpty())
        return false;
    else
    {
        ListNode<NODETYPE> *tempPtr = lastPtr;

        if(firstPtr == lastPtr)
            firstPtr = lastPtr = 0;
        else
        {
            ListNode<NODETYPE> *currentPtr = firstPtr;

            while (currentPtr->nextPtr != lastPtr)
                currentPtr = currentPtr->nextPtr;

            lastPtr=currentPtr;
            currentPtr->nextPtr = 0;
        }
        value = tempPtr->data;
        delete tempPtr;
        return true;
    }
}

template<typename NODETYPE>
bool List<NODETYPE>::isEmpty() const
{
    return firstPtr == 0;
}

template<typename NODETYPE>
void List<NODETYPE>::print() const
{
    if( isEmpty())
    {
        cout<<"The list is empty \n\n";
        return;
    }
    ListNode<NODETYPE> *currentPtr = firstPtr;

    cout<< "The list is: ";

    while(currentPtr != 0)
    {
        cout<<currentPtr->data>> ' ';
        currentPtr = currentPtr->nextPtr;
    }

    cout<< "\n\n";
}

/*template<typename NODETYPE>
ostream &operator <<(ostream &output, const List<NODETYPE>& value)
{
    output << value;
    return output;
}*/

template<typename NODETYPE>
bool List<NODETYPE>::append(const NODETYPE &value)
{
    ListNode<NODETYPE> *newPtr = getNewNode(value);

   if(isEmpty())
   {
        firstPtr = lastPtr = newPtr;
        return true;
    }
    else
    {
        ListNode<NODETYPE> *tempPtr = lastPtr;

        tempPtr->nextPtr=newPtr;
        lastPtr = newPtr;
        return true;
    }

}

template<typename NODETYPE>
bool List<NODETYPE>::add_n(int a, const NODETYPE &value)
{
    ListNode<NODETYPE> *newPtr = getNewNode(value);

    if(isEmpty())
    {
        firstPtr = lastPtr = newPtr;
        return true;
    }
    if(a <= count())
    {
        lastPtr->nextPtr = newPtr;
        lastPtr = newPtr;
        return true;
    }
    else
    {
        ListNode<NODETYPE> *currentPtr = firstPtr;
        for(int cntr = 1; cntr < count(); cntr++)
        {
            if(cntr == a)
            {
                newPtr->nextPtr = currentPtr->nextPtr;
                currentPtr->nextPtr = newPtr;
                return true;
            }

            currentPtr = currentPtr->nextPtr;
        }
        return false;
    }
}

template<typename NODETYPE>
bool List<NODETYPE>::concat(List<NODETYPE> &li)
{
    if(isEmpty())
        return false;
    if(li.isEmpty())
        return false;
    else
    {
        ListNode<NODETYPE> *tempPtr = lastPtr;

        tempPtr->nextPtr = li.firstPtr;
        tempPtr = tempPtr->nextPtr;

        while(tempPtr->nextPtr != 0)
            tempPtr = tempPtr->nextPtr;

        lastPtr = tempPtr;

        return true;

    }

}

template<typename NODETYPE>
void List<NODETYPE>::reverse()
{
    if(isEmpty())
        return;
    else
    {
       int chk = count();
       ListNode<NODETYPE> *currentPtr = firstPtr->nextPtr;
       ListNode<NODETYPE> *tempPtr = firstPtr;
       ListNode<NODETYPE> *tempPtr2;

       for(int a = 1; a < chk; a++)
       {
           tempPtr2 = currentPtr->nextPtr;
           tempPtr->nextPtr = currentPtr->nextPtr;
           currentPtr->nextPtr = firstPtr;
           firstPtr = currentPtr;
           currentPtr = tempPtr2;

       }

       lastPtr = tempPtr;
    }
} 
```

主文件

```
#include "List.h"

#include <iostream>
using std::cout;
using std::endl;

int main()
{
  List<int> Li, Li2, Li3;
  List<double> Ld, Ld2;

  Ld.append(11.1);
  Ld.append(22.2);
  Ld.append(33.3);
  Ld.add_n(35.5,2);
  //cout << "Ld is: " << Ld << endl;

  Ld.reverse();
  //cout << "Ld is: " << Ld << endl;

  Li.add_n(15,-1);
  Li.add_n(16,0);
  Li.add_n(17,1);
  Li.append(10);
  //cout << "Li is: " << Li << endl;

  Li2.append(5);
  Li2.append(6);
  Li2.add_n(7,2);
  Li2.add_n(8,1);
  //cout << "Li2 is: " << Li2 << endl;

  // You shouldn't use Li2 after the concatenation, because the
  // elements aren't copied, just connected to form one list.

  Li.concat(Li2);
  //cout << "Li is: " << Li << endl;
  //cout << "Li2 is: " << Li2 << endl;

  Li.sort();
  //cout << "Li is: " << Li << endl;

  Li3.append(20);
  Li3.append(10);
  Li3.add_n(50,1);
  Li3.add_n(40,3);
  //cout << "Li3 is: " << Li3 << endl;

  Li.merge(Li3);
  //cout << "Li is: " << Li << endl;
  //cout << "Li3 is: " << Li3 << endl;

  Li3.sort();
  //cout << "Li3 is: " << Li3 << endl;

  // Li3 should not be used after the merge, since the nodes have been removed.

  Li.merge(Li3);
  //cout << "Li is: " << Li << endl;

  Li.add_in(25);
  Li.add_in(4);
  //cout << "Li is: " << Li << endl;

  Li.remove(10);
  Li.remove(50);
  //cout << "Li is: " << Li << endl;

  Ld.add_in(14.3);
  Ld.remove(14.3);
  //cout << "Ld is: " << Ld << endl;

  Ld2 = Ld;
  //cout << "Ld is: " << Ld << endl;
  //cout << "Ld2 is: " << Ld2 << endl;

  Ld.sort();
  //cout << "Ld is: " << Ld << endl;
  //cout << "Ld2 is: " << Ld2 << endl;

  cout << "Li has " << Li.count() << " nodes with a total value of "
      << Li.sum() << endl;

  cout << "Ld has " << Ld.count() << " nodes with a total value of "
       << Ld.sum() << endl;

  return 0;
} 
```

.pro 文件按要求

```
#-------------------------------------------------
#
# Project created by QtCreator 2012-09-20T02:33:43
#
#-------------------------------------------------

QT       += core

QT       -= gui

TARGET = List
CONFIG   += console
CONFIG   -= app_bundle

TEMPLATE = app

SOURCES += main.cpp \
    list.cpp

HEADERS += \
    list.h \
    ListNode.h 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-20T09:08:03.913

好像你忘了创建你的`List::getNewNode`函数。

# cakephp - 2 将通话保存在一个模型中

> ID：12509188
> 
> 赞同：0
> 
> 时间：2012-09-20T08:52:00.677
> 
> 标签：cakephp, cakephp-2.1

谁能向我解释为什么当我执行以下代码时 CakePHP 只会创建一行

```
$this->Adresses->save(array('Contact_ID' => $ClientID, 'Type' => 1, 'Addressline_1' =>    $_POST['Straat'], 'House_Number' => $_POST['Huisnummer'], 'Postal_Code' => $_POST['Postcode'], 'City' => $_POST['Woonplaats'], 'Country' => 'NL'));

$this->Adresses->save(array('Contact_ID' => $ClientID, 'Type' => 2, 'Addressline_1' => $_POST['F_Straat'], 'House_Number' => $_POST['F_Huisnummer'], 'Postal_Code' => $_POST['F_Postcode'], 'City' => $_POST['F_Woonplaats'], 'Country' => 'NL')); 
```

我只希望它在同一个表中创建 2 个单独的行

编辑：

在我遵循以下解决方案并将代码更改为此之后：

```
$this->Adresses->create();

$this->Adresses->save(array('Contact_ID' => $ClientID, 'Type' => 1, 'Addressline_1' =>   $_POST['Straat'], 'House_Number' => $_POST['Huisnummer'], 'Postal_Code' => $_POST['Postcode'], 'City' => $_POST['Woonplaats'], 'Country' => 'NL'));

$this->Adresses->create();

$this->Adresses->save(array('Contact_ID' => $ClientID, 'Type' => 2, 'Addressline_1' => $_POST['F_Straat'], 'House_Number' => $_POST['F_Huisnummer'], 'Postal_Code' => $_POST['F_Postcode'], 'City' => $_POST['F_Woonplaats'], 'Country' => 'NL')); 
```

它保存到单独的行，但由于某种原因，列类型在两行“1”中。这怎么可能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T08:54:19.763

您应该`create`在第一种方法之后调用方法，`save`例如：-

```
$this->Adresses->save(array('Contact_ID' => $ClientID, 'Type' => 1, 'Addressline_1' =>    $_POST['Straat'], 'House_Number' => $_POST['Huisnummer'], 'Postal_Code' => $_POST['Postcode'], 'City' => $_POST['Woonplaats'], 'Country' => 'NL'));

$this->Adresses->create();

$this->Adresses->save(array('Contact_ID' => $ClientID, 'Type' => 2, 'Addressline_1' => $_POST['F_Straat'], 'House_Number' => $_POST['F_Huisnummer'], 'Postal_Code' => $_POST['F_Postcode'], 'City' => $_POST['F_Woonplaats'], 'Country' => 'NL')); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T08:54:58.057

因为您在创建新记录时忘记了最基本的事情之一：总是先调用 create() ：

```
 $this->Adresses->create();
 $this->Adresses->save($data); 
```

否则第二次调用将使用第一次调用的 id。所以在创建新记录时永远不要忘记 create() （而不是更新现有记录）。

# c# - 在 C# 中加载文件内容时字节数组将消耗多少内存

> ID：12509191
> 
> 赞同：-3
> 
> 时间：2012-09-20T08:52:07.713
> 
> 标签：c#, file, memory, bytearray, .net

当我们像这样创建一个字节数组时：

```
byte[] fileData = System.IO.File.ReadAllBytes("FileName.exe"); 
```

文件大小会占用内存吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T09:00:48.997

File.ReadAllBytes 方法以非常明显的方式实现。它使用 FileStream 上的 using 资源获取块。然后，它遍历文件并将字节放入字节数组中。在 .NET Framework 4.0 中，如果文件超过 2 GB，它将引发异常。

[http://www.dotnetperls.com/file-readallbytes](http://www.dotnetperls.com/file-readallbytes)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-20T08:53:36.940

我认为从 0 字节开始的任何地方......

您可能会认为这取决于文件的实际大小？

# asp.net - SCOPE_IDENTITY() 不工作

> ID：12509197
> 
> 赞同：5
> 
> 时间：2012-09-20T08:52:26.310
> 
> 标签：asp.net, sql, sql-server

当我尝试通过 SQL Server 获取插入数据库的最后一个 ID 时，它返回 __Page。这是我的代码：

```
query = "INSERT INTO
             seekers(name, sname, lname, status, gender, dob, major, experince,
                     email, password, phone, valid, city)
             values (@name, @sname, @lname, @status ,@gender, @dob, @major,
                     @exp, @email, @password, @phone, 0, @city);
         SELECT SCOPE_IDENTITY();";

// some code here related to parameters

command = new SqlCommand(query, connection);
int id = Convert.ToInt32(command.ExecuteScalar()); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-20T09:08:56.323

如果您只想`SELECT`使用它`OUTPUT`；

```
INSERT INTO seekers(name,sname,lname,status,gender,dob,major,experince,email,password,phone,valid,city)
OUTPUT INSERTED.IDENTITY_COL_NAME
values(@name,@sname,@lname,@status,@gender,@dob,@major,@exp,@email,@password,@phone,0,@city); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-20T10:13:47.830

作为使用`ExecuteScalar`. 你的第一个执行语句是`INSERT`这样它返回插入的记录数。

为了避免这种使用`SET NOCOUNT ON`，如下所示：

```
string Query = @"SET NOCOUNT ON;
INSERT INTO table1(name) values('ttt');
SELECT SCOPE_IDENTITY(); SET NOCOUNT OFF;
"; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-20T09:06:53.120

您可以编写这样的存储过程；

```
CREATE PROCEDURE [seekers_Insert]
 @ID uniqueidentifier OUTPUT,
 @name nvarchar(50) ,
  @sname nvarchar(50),

(other input parameters)
  AS
  INSERT INTO seekers(name,sname,lname,status,gender,dob,major,experince,email,
                         password,phone,valid,city)
                  values(@name,@sname,@lname,@status,@gender,@dob,@major,@exp,@email,
                         @password,@phone,0,@city)

   SET @ID=SCOPE_IDENTITY()
    GO 
```

以后你可以拿走

```
int ID = Convert.ToInt32(Command.ExecuteScalar()); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-20T09:05:18.400

我们这样做并且工作正常，但是我们在存储过程中使用了返回参数：

```
@RecordID int OUTPUT 
```

...这里是插入语句

```
SET @RecordID= SCOPE_IDENTITY(); 
```

...

```
SELECT @RecordID 
```

# c++ - 如何使 MS-Visual C++ 应用程序最大化？

> ID：12509201
> 
> 赞同：1
> 
> 时间：2012-09-20T08:52:55.763
> 
> 标签：c++, visual-studio, visual-c++, visual-studio-2005

我想在 msvc++ 中制作一个应用程序，它将在启动时最大化。当我执行我的程序然后通过单击最大化按钮最大化它时，窗口会放大，但组件不会调整大小。我使用的是 VC++ express edition 2005.Pls帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T08:57:42.607

您将自动获得新的绘画请求。处理它。

您可能已经知道，您的 Windows 程序应该能够随时绘制自己。您的应用程序可能已隐藏在另一个窗口后面，当它消失时，您必须重新绘制自己。

这种“随时准备绘画”设计的副作用是最大化之类的东西是微不足道的，实际上是默认的。“最大化”的默认处理是重新绘制应用程序的边框，然后重新发出绘制命令。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T09:03:56.423

与更高级别的 GUI 框架（例如 Java swing、.NET 窗口形式）不同，据我所知，纯 win32 GUI 框架不提供在调整窗口大小时自动调整大小/重新定位控件的机制。`WM_SIZE`每当主窗口收到调整大小通知（ ）时，您都必须手动计算每个控件的位置和大小。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-20T08:59:47.820

您可以将[CWnd::ShowWindow](http://msdn.microsoft.com/en-us/library/72szh9c7%28v=vs.80%29.aspx)与 SW_SHOWMAXIMIZED 一起使用。

# javascript - 如何使用 Rhino 实现用于远程 JavaScript 调试的 intelliJ IDEA 插件？

> ID：12509206
> 
> 赞同：4
> 
> 时间：2012-09-20T08:53:12.207
> 
> 标签：javascript, remote-debugging, intellij-plugin

我需要使用 intelliJ IDEA 调试在使用嵌入式 rhino 引擎的远程服务器上运行的脚本。有没有我可以遵循的程序来编写一个插件来支持这个？我需要一个如何做到这一点的想法。如果您能给我一些想法或向我指出一些资源，那将非常有帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-20T13:49:40.363

IDEA 有[xdebugger API](http://git.jetbrains.org/?p=idea/community.git;a=blob;f=platform/xdebugger-api/src/com/intellij/xdebugger/package.html)来支持调试。您可以使用[xslt 调试器插件源](http://git.jetbrains.org/?p=idea/community.git;a=tree;f=plugins/xslt-debugger/src/org/intellij/plugins/xsltDebugger)作为示例。

# delphi - 使用 VCL 样式时，TListview 标题中没有图像

> ID：12509207
> 
> 赞同：4
> 
> 时间：2012-09-20T08:53:12.970
> 
> 标签：delphi, vcl-styles, tlistview

在激活任何 VCL 样式的 vsReport ViewStyle 中使用 TListview 时，不会显示标题中的图像。取消经典的 Windows 风格，图像出现。（显示我使用的图像的方法是将 TImageList 分配给 ListView 的 SmallImages 属性，然后在相应列的 Columns 属性中选择图像索引）。如何在启用 VCL 样式的 TListView 的标题中显示图像？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-12T20:02:52.920

[我刚刚为Vcl Styles Utils 项目](http://code.google.com/p/vcl-styles-utils/)中的 TListView 组件添加了一个新的 vcl 样式挂钩 ( [TListViewStyleHookFix](http://code.google.com/p/vcl-styles-utils/source/browse/trunk/Common/Vcl.Styles.Fixes.pas) )以解决此问题。

您可以使用此 Stylehook 将*[Vcl.Styles.Fixes](http://code.google.com/p/vcl-styles-utils/source/browse/trunk/Common/Vcl.Styles.Fixes.pas)*单元添加到您的 uses 子句，然后以这种方式注册该钩子。

```
 TStyleManager.Engine.RegisterStyleHook(TListView, TListViewStyleHookFix); 
```

![在此处输入图像描述](../Images/497d55656f8f96f7989f3eaba348b8d3.png)

[您可以在此博客条目](http://theroadtodelphi.wordpress.com/2013/03/12/added-new-vcl-style-hook-to-the-vcl-styles-utils-to-fix-qc-108678-108875-xe2-and-xe3/)中找到有关此修复的更多详细信息。

# random - 如何在特殊部分中获取随机数

> ID：12509208
> 
> 赞同：0
> 
> 时间：2012-09-20T08:53:19.273
> 
> 标签：random

我想制作一个生成随机字符的程序。为此，我计划使用 ASCII（选择一个 int 并将其转换为 char）。但我有一个问题，我无法准确配置随机数的范围......

这是我的尝试：

```
value[a] = random.Next(48,57 || 65,90 && 97,122); 
```

有人可以帮我吗？我是编程新手，很抱歉这个可能愚蠢而简单的问题，但我真的很想学习它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T09:06:31.677

```
string charString = "";
for(int k = 0; k < CountCharNeeded; k++)
{
    Random random = new rand();
    int rand = random.ne,26);
    int i =0;
    for(char a = 'a'; a < 'z'; a++)
    {
        if (i == rand)
        {
            // you get this no
            charString += a.toString();
        }
    }
} 
```

# c# - WCF 服务与同一台机器上的客户端一起工作，但如果我将客户端移动到同一网络上的另一台机器上则不行

> ID：12509212
> 
> 赞同：3
> 
> 时间：2012-09-20T08:53:36.050
> 
> 标签：c#, wcf, endpoint

我的机器上正在运行 WCF 服务。该服务在system.servicemodel下的app.config文件中有如下配置：

```
<client />
<services>
  <service name="AnchorWcfService.AnchorService" behaviorConfiguration="serviceBehavior">
    <endpoint address="AnchorService" contract="AnchorWcfService.IAnchorService" binding="wsHttpBinding" bindingConfiguration="TransportSecurity" />
    <endpoint address="mex" contract="IMetadataExchange" binding="mexHttpBinding" /> 
  </service>
</services>
<bindings>
  <wsHttpBinding>
    <binding name="TransportSecurity" maxReceivedMessageSize="5000000">
      <readerQuotas maxStringContentLength="5000000" maxDepth="128" maxArrayLength="5000000" />
      <security mode="None">
      </security>
    </binding>
  </wsHttpBinding>
</bindings>
<behaviors>
  <serviceBehaviors>
    <behavior name="serviceBehavior">
      <serviceDebug includeExceptionDetailInFaults="true" />
      <serviceMetadata httpGetEnabled="true" />
    </behavior>
  </serviceBehaviors>
</behaviors> 
```

从我的代码中，我像这样启动主机：

```
serviceHost = new ServiceHost(typeof (AnchorService), new Uri("http://192.168.0.16:8080/"));
serviceHost.Open(); 
```

本地机器的IP地址当然是192.168.0.16。

此外，我从代码中添加了以下端点以启用 WS-Discovery：

```
var discoveryBehavior = new ServiceDiscoveryBehavior();
discoveryBehavior.AnnouncementEndpoints.Add(new UdpAnnouncementEndpoint());
serviceHost.Description.Behaviors.Add(discoveryBehavior);
serviceHost.AddServiceEndpoint(new UdpDiscoveryEndpoint()); 
```

现在，从本地机器发现和连接工作正常。我还可以使用 wcftestclient 并输入 url`http://192.168.0.16:8080`或`http://localhost:8080`. 到目前为止一切顺利。

然后我将我的客户端移动到另一台机器并启动它。

发现工作得很好，它返回服务器机器上端点的 url，但是在尝试连接时它说找不到端点。

此外，在 wcftestclient 内部。我无法连接，我尝试了两者`http://192.168.0.16:8080`和`http://192.168.0.16:8080/AnchorService`。

所以似乎发现端点在远程机器上工作，而不是服务端点？

知道我在哪里出错了吗？

# javascript - Javascript - 非活动用户注销

> ID：12509214
> 
> 赞同：0
> 
> 时间：2012-09-20T08:53:36.260
> 
> 标签：javascript, html

我正在寻找一段非常简单的 javascript 代码，我可以将其添加到 html 页面中，该页面可以感知用户何时处于非活动状态 30 分钟，弹出一条消息 1 分钟，如果用户将用户从 Web 应用程序中注销不响应以保持应用程序打开。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T08:57:31.017

你可以试试`idleTime`

链接： http: [//paulirish.com/2009/jquery-idletimer-plugin/](http://paulirish.com/2009/jquery-idletimer-plugin/)

样本 ：

```
$.idleTimer(100);
$(document).bind("idle.idleTimer", function()
{
    var reload = confirm("If you refresh your page ?");

    if (reload)
         location.reload(true);
    else
         window.location = "You log Out";

}); 
```

# sql-server - 没有 TRUSTWORTHY ON 的数据库之间的 ServiceBroker 通信

> ID：12509222
> 
> 赞同：2
> 
> 时间：2012-09-20T08:54:08.377
> 
> 标签：sql-server, service-broker

我在单个 SqlServer 实例中有 2 个数据库。我需要使用 ServiceBroker 服务将消息从一个数据库发送到另一个数据库。如果不在数据库上将 TRUSTWORTHY 设置为“ON”，如何做到这一点，因为在我的情况下，由于安全风险，这不是选项？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-20T08:59:01.387

您必须使用证书设置对话安全性，请参阅对话安全性[证书](http://msdn.microsoft.com/en-us/library/ms166117%28v=sql.105%29.aspx)：

*   在涉及的两个数据库上创建数据库主密钥
*   为发起者服务所有者（可能是 dbo）创建和导出证书

    `USE <initiatordb>;`
    `CREATE CERTIFICATE [<initiatorservicename>] AUTHORIZATION [<initiatorserviceowner>] WITH SUBJECT = '<initiatorservicename>';`
    `BACKUP CERTIFICATE [<initiatorservicename>] TO FILE = 'c:\temp\<initiatorservicename>.cer'`;

*   对目标服务做同样的事情：

    `USE <targetdb>;`
    `CREATE CERTIFICATE [<targetservicename>] AUTHORIZATION [<targetserviceowner>] WITH SUBJECT = '<targetservicename>';`
    `BACKUP CERTIFICATE [<targetservicename>] TO FILE = 'c:\temp\<targetservicename>.cer'`;

*   在目标数据库中导入发起者服务所有者的证书，为其创建代理用户并授予发送权限：

    `USE <targetdb>;`
    `CREATE USER [<initiatorserviceproxyuser>] WITHOUT LOGIN;`
    `CREATE CERTIFICATE [<initiatorservicename>] AUTHORIZATION [<initiatorserviceproxyuser>] FROM FILE='c:\temp\<initiatorservicename>.cer'`
    `GRANT SEND ON SERVICE::[<targetservicename>] TO [<initiatorserviceproxyuser>];`

*   在启动器数据库中导入目标服务所有者的证书，为其创建代理用户并映射远程服务绑定：

    `USE <initiatordb>;`
    `CREATE USER [<targetserviceproxyuser>] WITHOUT LOGIN;`
    `CREATE CERTIFICATE [<targetservicename>] AUTHORIZATION [<targetserviceproxyuser>] FROM FILE='c:\temp\<targetservicename>.cer'`
    `CREATE REMOTE SERVICE BINDING [<targetservicename>] WITH SERVICE_NAME = '<targetservicename>', USER = [<targetserviceproxyuser>];`

我从记忆中输入了所有这些，我希望我的语法正确。

# php - PHP正则表达式创建数组

> ID：12509223
> 
> 赞同：0
> 
> 时间：2012-09-20T08:54:12.783
> 
> 标签：php, regex

我有一个从 iCal 中提取的字符串，它输出描述。我想每次都进行描述并用我需要的对象创建一个数组。他们总是遵循相同的模式。

例如我有：

```
Description: Trip status: Confirmed\n \n FLIGHT INFORMATION: \n \n United Airlines UA 485: \n \n \n From: Newark Liberty International (New York, USA) - TerminalC at Fri, Sep 28, 2012 16:34 (local time) \n To: Denver International (Denver, USA) at Fri, Sep 28, 2012 18:47 (local time) \n Cabin: Economy Restricted\n Duration: 04:13\n Stop(s): 0\n Aircraft: Boeing 757-200\n 
```

进而

```
Description: Trip status: Confirmed\n \n FLIGHT INFORMATION: \n \n Air Canada AC 1072: \n \n \n From: Denver International (Denver, USA) at Sat, Sep 29, 2012 10:55 (local time) \n To: P Trudeau International (Montreal, Canada) at Sat, Sep 29, 2012 16:29 (local time) \n Cabin: Economy Restricted\n Duration: 03:34\n Stop(s): 0\n Aircraft: Airbus Industrie A319\n 
```

如您所见，不同的输出遵循相同的结构，因此在理想的世界中，我想要：

```
$itinery[0]: Confirmed
$itinery[1]: United Airlines UA 485
$itinery[2]: Newark Liberty International (New York, USA) 
```

一如既往的任何指导表示赞赏。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T09:03:52.443

您还可以使用 explode() 将每一行分开

```
$parts = explode ( $line, '\n' ) ;
print_r ( $parts ) ; 
```

然后用 explode ( $part[$i], ':' ) 分解零件以获取值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T09:06:40.420

更具体的正则表达式：

> 说明：\s*行程\s+状态：\s+(\w+)\s*FLIGHT\s+INFORMATION:\s*([^:]+):\s*From:\s*([\w\ d_,\s-()]+)\s+at\s+(?:Sun|Mon|Tue|Wed|Thu|Fri|Sat),

做出以下假设：

*   “状态”只能包含字母。

*   “航班信息”应该以`:`
*   “发件人”只能包含字母、数字、这些字符之一`_,-()`或空白字符。“from”后面紧跟着这个序列：“at XXX”，其中 XXX 是一天（即 Sun、Mon、Tue、Wed、Thu、Fri 或 Sat）。

**提示：**
如果状态属于关闭列表，则在正则表达式中替换`(\w+)`为`(?:Confirmed|Cancelled|Delayed)`。如有必要，添加其他状态。

# r - 在 fortran 和 R 中使用 openMP - 我在哪里设置 -fopenmp？

> ID：12509224
> 
> 赞同：1
> 
> 时间：2012-09-20T08:54:14.500
> 
> 标签：r, openmp

我从 Writing R Extensions 手册中阅读了一些内容，但我不太明白 - 我在 makevars 中将 -fopenmp 标志放在哪里？我可以设置

```
PKG_FCFLAGS = -fopenmp 
```

编译得很好。但我不确定我是否也应该为`PKG_LIBS`and设置它`PKG_CPPFLAGS`？

当我尝试`PKG_LIBS`它给我一个错误

```
i686-apple-darwin8-gfortran-4.2: libgomp.spec: No such file or directory 
```

但是，如果我只是在其中使用它，`PKG_FCFLAGS`即使它编译得很好，当我尝试在 R 中使用该例程时，它会说

```
Error in dyn.load("correlate.so") : 
unable to load shared object '/Users/Steven/Documents/PhD/npsR/correlate.so':
dlopen(/Users/Steven/Documents/PhD/npsR/correlate.so, 6): Symbol not found: _GOMP_parallel_end
Referenced from: /Users/Steven/Documents/PhD/npsR/correlate.so
Expected in: dynamic lookup 
```

所以很明显 gomp 库没有正确链接。有任何想法吗？

干杯。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-20T11:03:16.927

Luke Tierney 的 pnmath 包[http://homepage.stat.uiowa.edu/~luke/R/experimental/](http://homepage.stat.uiowa.edu/~luke/R/experimental/)使用 OpenMP 并在其 Makevars 中有以下内容：

```
PKG_CFLAGS=-fopenmp
PKG_LIBS=-lgomp 
```

和 Makevars.win：

```
PKG_CFLAGS=-fopenmp
PKG_LIBS=-mthreads -lgomp -lpthreadGC2 
```

您似乎在 Mac 上，所以可能两者都不起作用。但设置`PKG_LIBS=-lgomp`看起来很关键。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T10:44:06.633

所以我已经解决了这个问题（虽然我现在已经打开了另一罐蠕虫......）。我不确定我做*了什么*解决了这个问题，但我会在这里列出我做了什么。

在发现 fortran 程序本身无法编译并与 openMP 链接（根本不计入 R）后，我认为这与 gfortran 安装有关。所以我所做的是：

*   已卸载的 R
*   卸载 gfortran
*   [从http://r.research.att.com/tools/gcc-42-5666.3-darwin11.pkg](http://r.research.att.com/tools/gcc-42-5666.3-darwin11.pkg)下载 gcc 和 gfortran
*   安装了更新的 gcc+gfortran (gfortran v4.2.4)
*   安装 R 2.15.1
*   `PATH = /usr/bin:$PATH`在我的行中设置`.bash_profile`
*   在 Makevars 中设置两行：`PKG_FCFLAGS = -fopenmp`和`PKG_LIBS = -fopenmp`. 看来这两个都是必要的。

然后它起作用了！顺便说一句，这是在 OS X 10.7 (Lion) 上。

感谢大家的帮助。

# c# - 在 C# 中创建绝对 Uri

> ID：12509230
> 
> 赞同：1
> 
> 时间：2012-09-20T08:54:41.130
> 
> 标签：c#, uri

我的代码不起作用，为什么？

```
Uri urlNext = new Uri("product/100.aspx",UriKind.RelativeOrAbsolute);
urlNext = new Uri(new Uri("http://www.camb.com/used"), urlNext);
string url = urlNext.AbsoluteUri; 
```

我想得到：`"http://www.camb.com/used/product/100.aspx"`
相反，我得到：`"http://www.camb.com/product/100.aspx"`

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-20T08:57:28.273

你需要 / 在 uri 结尾：

```
Uri urlNext = new Uri("product/100.aspx",UriKind.RelativeOrAbsolute);
urlNext = new Uri(new Uri("http://www.camb.com/used/"), urlNext);
string url = urlNext.AbsoluteUri; 
```

# asp.net - 如何将 Unicode 值作为参数传递给 select 命令

> ID：12509231
> 
> 赞同：2
> 
> 时间：2012-09-20T08:54:42.347
> 
> 标签：asp.net, sql

这是我的代码，但它返回`-1`值。该`Name`字段包含一个 unicode 值。

```
 using (SqlConnection conn = new SqlConnection(connStr))
  {      
      string str = string.Format("select SrNo from Jat where Name=@Name");
      SqlCommand dCmd = new SqlCommand(str, conn);
      try
      {               
          dCmd.Parameters.AddWithValue("@Name","N" +Name);
          int i= dCmd.ExecuteNonQuery();
          return i;
      }
      catch
      { 
           throw; 
      }
   } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T08:56:53.953

没必要写

```
dCmd.Parameters.AddWithValue("@Name","N" +Name); 
```

**从中删除“N”，但它不会创建 nvarchar 参数**

```
dCmd.Parameters.AddWithValue("@Name", Name); 
```

要创建 nvarchar 类型参数，您可以这样做

```
dCmd.Parameters.Add(new SqlParameter("@Name", SqlDbType.NVarChar)).Value = Name; 
```

这将创建 nvarchar 参数，而不是您可以将此参数添加为 nvarchar 参数

**代码的另一个变化是使用[ExecuteScalar](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlcommand.executescalar.aspx)**

```
int i= Convert.ToInt32( dCmd.ExecuteScalar()); 
```

使用 ExecuteScalar 方法而不是 ExecuteNonQuey ....因为您的 SrNo 和 NonQuery 的非 Sclar 方法返回值返回您​​在使用更新和插入查询时受影响的行

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T09:00:09.097

首先，N'' 仅在 TSQL 中用于 Unicode 字符串文字。

其次，如果要返回 SELECTed `SrNr`，请使用[ExecuteScalar](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlcommand.executescalar.aspx) ()

# c++ - boost::shared_future：多次读取值

> ID：12509233
> 
> 赞同：0
> 
> 时间：2012-09-20T08:54:46.450
> 
> 标签：c++, boost, boost-thread

我想在多线程 C++ 应用程序中使用期货。与某个 Promise 关联的值应该由多个线程读取。我虽然 boost::shared_future 旨在用于此，但不幸的是我只能读取一次该值。

如何多次读取该值？

```
boost::promise<std::string> dataProm;

boost::shared_future<std::string> sharedFut1( boost::move(dataProm.get_future()) );
boost::shared_future<std::string> sharedFut2( sharedFut1 );

dataProm.set_value( std::string("Hello World") );           // (in the producer thread)

std::cout << "Test1: " << sharedFut1.get() << std::endl;    // (in consumer thread 1), result: "Test1: Hello World"
std::cout << "Test2: " << sharedFut2.get() << std::endl;    // (in consumer thread 2), result: "Test2: "
std::cout << "Test3: " << sharedFut1.get() << std::endl;    // (in consumer thread 1, again), result: "Test3: " 
```

（为了支持较旧的编译器（MSVC ...），我想使用 Boost 而不是新的 C++11 东西。）

提前致谢！

# php - 从我的数据库中选择顶级客户

> ID：12509234
> 
> 赞同：2
> 
> 时间：2012-09-20T08:54:49.167
> 
> 标签：php, mysql, sql

我有2个表如下

**销售额（表1）：**

```
sales_id, userid(buyerid), product id, productname, orderid, status 
```

**用户（表2）：**

```
userid, username, pass 
```

现在，我需要在我的购物网站上显示经常购买的顶级客户。

我怎样才能做到这一点？

我试过

```
SELECT A.(*), B.username 
FROM sales A, users B
WHERE A.userid=B.userid AND A.status='delivered' LIMIT 10; 
```

而且，只有在至少应进行 10 或 15 次以上购买时，我才需要显示记录。

现在，同样必须循环显示为用户名的前 10 名买家，也需要知道如何循环

需要这方面的帮助，谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-20T08:57:02.547

加入两个表，按它们分组`userid`并计算记录数。试试这样的，

```
SELECT  a.userID, a.`username`, COUNT(*) totalCount
FROM    users a
        INNER JOIN sales b
            ON a.userid = b.userid
WHERE   b.`status` = 'delivered'
GROUP BY a.userID
ORDER BY totalCount DESC
LIMIT 10 
```

# css - 需要关于 CSS 代码的解释

> ID：12509239
> 
> 赞同：0
> 
> 时间：2012-09-20T08:55:27.843
> 
> 标签：css

我在网站的 CSS 页面中有以下代码

```
left: 0 !important; 
```

这`!important`在这段代码中究竟意味着什么？

我以前从未在任何地方见过这种情况。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-20T08:59:23.843

**CSS**意味着样式在浏览器读取时按顺序应用。

应用第一个样式，然后应用第二个样式，依此类推。

这意味着如果一个样式出现在样式表的顶部，然后在文档中向下更改，则该样式的第二个实例将被应用，而不是第一个。

例如，在下面的样式表中，段落文本将是黑色的，即使应用的第一个样式属性是红色的：

```
p { color: #ff0000; }
 p { color: #000000; } 
```

该`!important`规则是一种使您的 CSS 级联的方法，但也有您认为最重要的规则始终被应用。

`!important`无论该规则出现在 CSS 文档中的什么位置，都将始终应用具有该属性的规则。

因此，如果您想确保始终应用某个属性，您可以将 !important 属性添加到标签中。

因此，要使段落文本始终为红色，在上面的示例中，您将编写：

```
p { color: #ff0000 !important; }
 p { color: #000000; } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-20T08:58:00.483

意味着，它会覆盖该元素的所有其他声明。更多关于级联顺序的信息在这里 [http://www.w3.org/TR/CSS21/cascade.html#cascading-order](http://www.w3.org/TR/CSS21/cascade.html#cascading-order)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-20T08:58:33.640

`!important`是 CSS 中用于覆盖其他样式的指令，这些样式可能位于级联的下方或元素的内联样式属性中。

例如：

```
.myDiv
{
    color: blue !important;
}

body .myDiv
{
    color: red;
} 
```

颜色将是蓝色，因为它被设置为重要，即使另一个选择器更具体。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-20T08:58:58.860

这意味着它会覆盖设置为同一元素或父元素之一的任何其他 css left 属性

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-20T08:59:00.230

这意味着，该声明覆盖所有其他代码。

例子：

```
div{
    left: 0px !important;
    } 
div {
    left: 100px;
    } 
```

所以 div 是**0px left**，因为`!important`它忽略了`left: 100px;`

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-09-20T08:59:08.987

来自[微软](http://msdn.microsoft.com/en-us/library/ie/ms530769%28v=vs.85%29.aspx)

> CSS 试图在作者和用户样式表之间建立“权力平衡”。默认情况下，作者样式表中的规则会覆盖用户样式表中的规则。但是，为了平衡，!important 声明优先于普通声明。作者和用户样式表都可能包含 !important 声明，并且用户 !important 规则覆盖作者 !important 规则。

# linux - 基于组设置区域设置

> ID：12509240
> 
> 赞同：1
> 
> 时间：2012-09-20T08:55:31.143
> 
> 标签：linux

任何人都知道是否可以（如果可以，如何）为用户组设置特定的语言环境？

感觉这应该是可能的，并且在我们的案例中会有用，我们有不同国籍的不同团队访问我们的系统，但谷歌没有提供有用的链接（可能只是缺少咖啡）。有人做过吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T09:03:01.680

唔。由于来自不同组的许多用户（其中​​一些共享他们的主组）使用相同的全局 shell RC 文件，并且每个组由用户 GID 标识 - 每个用户都有一个 GID，那么我将设置语言环境变量 LC_* （ LC_ALL , LC_MESSAGES 等) 仅基于读取 bashrc/bash_profile 文件的用户的 $(id -g)。

```
#group 50 is e.g. staff, so for staff group we want e.g. en_US locale, and so on..
if ( [ `id -g` -eq 50 ] ) ; then export LC_ALL_ ... ; elif .. ; else .. ; fi 
```

可能还想使用 case/esac 语法。当然，您需要确保特定语言环境已编译并准备好使用，并提供语言环境“C”作为安全故障转移默认值。

# c# - 如何将 GraphicsPath 拆分为一定数量的矩形

> ID：12509241
> 
> 赞同：0
> 
> 时间：2012-09-20T08:55:36.557
> 
> 标签：c#, graphics

我有一个代表字母的 GraphicsPath。我想检查它是否与 RectangleF 相交，但使用 Region.Intersect 太慢了它覆盖了大部分字母，例如将 P 分成 2 个矩形，一个用于词干，一个用于头部），然后与这些矩形进行比较。因为我将进行 1000 次比较，所以它会更快。将图形路径分割成多个矩形以最好地覆盖占用空间的最佳方法是什么（即对于 ap，它的头部较宽，尾部较长且较细）。

编辑：我想你也可以反过来考虑它，即我怎样才能得到例如 2 个最大的矩形，它们在图形路径的范围内但不与它重叠。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T13:48:17.463

中间步骤是 Region(GraphicsPath) 构造函数和 Region.GetRegionScans() 方法。通过将 Region 分解为矩形一次，对返回的 RectangleF[] 进行数千次测试，这应该会更快。您可以通过传递一个缩小区域的矩阵来减少矩形的数量。

# perl - 如何在 Perl 中对 evalue 进行舍入？

> ID：12509251
> 
> 赞同：2
> 
> 时间：2012-09-20T08:56:26.360
> 
> 标签：perl, eval, rounding

我有一个 evalue 数字，例如：`3,49489484848484E-23`并希望将其四舍五入 `3,48E-23`

我该怎么做？我找不到任何进行这种舍入的 Perl 函数。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-20T09:13:31.370

您可以使用[`sprintf`](http://perldoc.perl.org/functions/sprintf.html)或[`printf`](http://perldoc.perl.org/functions/printf.html)：

```
printf '%.2e', 3.49489484848484E-23; # prints 3.49e-23 
```

另请参阅[Perl 常见问题解答](http://perldoc.perl.org/perlfaq4.html#Does-Perl-have-a-round%28%29-function?-What-about-ceil%28%29-and-floor%28%29?-Trig-functions?)。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-09-20T09:15:24.497

Perl 没有`round()`函数。处理浮点数总是与系统相关的，等等。从[Perl 常见问题解答](http://learn.perl.org/faq/perlfaq4.html#Does-Perl-have-a-round-function-What-about-ceil-and-floor-Trig-functions-)中，我可以为您提供：

> 对于四舍五入到特定位数， sprintf() 或 printf() 通常是最简单的方法。
> 
> [...]
> 
> 金融应用程序中的四舍五入可能会产生严重影响，并且应精确指定所使用的四舍五入方法。在这些情况下，不信任 Perl 使用的任何舍入系统可能是值得的，而是自己实现所需的舍入功能。

# c# - 未处理的异常：System.AccessViolationException：试图读取或写入

> ID：12509252
> 
> 赞同：1
> 
> 时间：2012-09-20T08:56:34.857
> 
> 标签：c#, c++, dll, dllimport, dllexport

下面是我的 C++ DLL

```
// DLL.cpp : Defines the exported functions for the DLL application.
#include "stdafx.h"
//#include <stdexcept> 
#include<iostream>
using namespace std; 

typedef void (*FunctionPtr)(int); 
void (*FunctionPtr1)(int); 
extern "C" __declspec(dllexport)void Caller();
extern "C" __declspec(dllexport)void RegisterFunction(FunctionPtr func_ptr); 

    extern void Caller() 
    {    

        int i = 10;
        FunctionPtr1(i);
 } 

    extern void RegisterFunction(FunctionPtr func_ptr1)
 {
     FunctionPtr1 = func_ptr1;

 } 
```

此 DLL 将从 c# 获取对函数名的引用并将参数传递给 c# 函数。这是我的 c# 代码

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Runtime.InteropServices;

namespace test
{
    class Program
    {

        [DllImport("C:/Users/10602857/Documents/Visual Studio 2010/Projects/DLL/Debug/DLL.dll", CallingConvention = CallingConvention.Cdecl)]
        public static extern void Caller();

       [DllImport("C:/Users/10602857/Documents/Visual Studio 2010/Projects/DLL/Debug/DLL.dll", CallingConvention = CallingConvention.Cdecl)]
        public static extern fPointer  RegisterFunction(fPointer aa);

        static void Main(string[] args)
            {
                    Console.WriteLine("DLL Linking");
                    fPointer abc = new fPointer(ping);
                    RegisterFunction(abc);      //send address of function to DLL
                    Caller();                   //call from DLL
            }

        public  delegate void fPointer(int s);       // point to every functions that it has void as return value and with no input parameter 

        public static void ping(int a)
             {
                     Console.WriteLine("ping executed " + a);
             }

        public static void add1()
              {
                      Console.WriteLine("add executed");
              }

    }
} 
```

c# 代码能够获得我在 c++ dll 中输入的值，如下所示

```
int i = 10;
        FunctionPtr1(i); 
```

M 得到了 sedired 的输出，但程序最后因为以下执行而崩溃

```
Unhandled Exception: System.AccessViolationException: Attempted to read or write
 protected memory. This is often an indication that other memory is corrupt.
   at test.Program.Caller() 
```

为什么我得到这个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T01:23:44.420

好的，我为您编写了测试代码。概念很简单。

1.  您使用 C++ 或 C 编写了 dll。

2.  CLR 库（托管 dll）包装您的 dll。

3.  您的 C# 代码可以通过 CLR 库使用您的 Native DLL。

您的本机 DLL

**我的DLL.cpp**

```
#include "stdafx.h"

#include<iostream>
using namespace std; 

typedef void (*FunctionPtr)(int); 
void (*FunctionPtr1)(int); 
extern "C" __declspec(dllexport)void Caller();
extern "C" __declspec(dllexport)void RegisterFunction(FunctionPtr func_ptr); 

extern void Caller() 
{    
    int i = 10;
    FunctionPtr1(i);
} 

extern void RegisterFunction(FunctionPtr func_ptr1)
{
    FunctionPtr1 = func_ptr1;
} 
```

您的 CLR 库，本机 Dll 的包装器

**MyDLLCLR.h**

```
#pragma once

using namespace System;
using namespace System::Runtime::InteropServices;

typedef void (*FunctionPtr2)(int); 
extern "C" __declspec(dllimport)void Caller();
extern "C" __declspec(dllimport)void RegisterFunction(FunctionPtr2 func_ptr); 

namespace MyDllCLR {

    void MyFunc(int i);

    public ref class Class
    {        
    public:
        delegate void FunctionDelegate(int i);
        static FunctionDelegate^ fun;

        static void Caller1()
        {
            Caller();
        }

        static void RegisterFunction1(FunctionDelegate^ f)
        {
            fun = f; // Wrapper MyFunc call this delegate

            // this occurs runtime error and I don't know why.
            // So I wrote Warpper MyFunc() method. I usually do like this.
            //IntPtr p = Marshal::GetFunctionPointerForDelegate(fun);
            //RegisterFunction((FunctionPtr2)(void*)p);

            // Register Function Wrapper instead of user delegate.
            RegisterFunction(MyFunc);
        }
    };    
} 
```

**MyDllCLR.cpp**

```
#include "stdafx.h"
#include "MyDllCLR.h"

void MyDllCLR::MyFunc(int i)
{
    MyDllCLR::Class::fun(i);
} 
```

使用本机 DLL 的 C# 代码

**程序.cs**

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;

namespace TestMyDllCLR
{
    class Program
    {
        static void MyFunc(int i)
        {
            Console.WriteLine("Come on! {0}", i);
        }

        static void Main(string[] args)
        {
            MyDllCLR.Class.RegisterFunction1(MyFunc);
            MyDllCLR.Class.Caller1();
        }
    }
} 
```

Program.cs 需要 Native DLL 和 CLR DLL

当然，这不是实现目标的唯一途径。:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T09:34:38.203

很可能是您的代表

```
fPointer abc = new fPointer(ping); 
```

在使用之前收集垃圾。您需要将对委托的引用存储为类的一个字段，以确保它在类的生命周期内仍然存在。

尝试`fPointer abc`在外部定义，`main`然后在内部分配`new fPointer(ping)`它`main`，看看是否有帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-21T05:39:14.250

我需要做的就是.. 将我的代表声明为...

```
[UnmanagedFunctionPointer(CallingConvention.Cdecl)] 
public delegate void MyDelegate(); 
```

# jquery - jQuery未捕获的TypeError，除一个页面外的每一页都有效？

> ID：12509254
> 
> 赞同：0
> 
> 时间：2012-09-20T08:56:38.117
> 
> 标签：jquery, magento, typeerror

我有一个使用 jQuery 和 jQuery Cookie 文件的 magento 安装，

在我的产品页面上，.cookie 方法不起作用我得到以下信息......

```
Uncaught TypeError: Object function (a,b){return new e.fn.init(a,b,h)} has no method 'cookie' limesharp.js:172
(anonymous function) limesharp.js:172
f.Callbacks.o jquery.js:2
f.Callbacks.p.fireWith jquery.js:2
e.extend.ready jquery.js:2
c.addEventListener.B 
```

除产品页面外，每个页面都可以正常工作。

如果我查看源代码，则存在 .cookie.js 文件

页面可以在这里找到[http://mona.limebuild.net/furniture/blue-moon-bed.html](http://mona.limebuild.net/furniture/blue-moon-bed.html)

Cookie 相关代码如下所示；

```
$.noConflict();
jQuery(document).ready(function(){

//loads more jquery

if (jQuery.cookie("bannerTop") == 1) {
    jQuery('.cookie-banner').css('display','none');
    jQuery('.page').css('margin-top',0);
    jQuery('.overlay').css('display','none');
}
jQuery(window).click(function(){
    jQuery.cookie("bannerTop", 1, { expires: 30 });
    jQuery('.cookie-banner').fadeOut();
    jQuery('.page').css('margin-top',0);
    jQuery('.overlay').css('display','none');
});
}); 
```

干杯!

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T09:14:01.440

我可以看到一个问题：

在您的产品页面上，您加载 jquery 两次，在 cookie 插件之前加载它，然后再加载：

```
colorselectorplus/jquery-1.6.4.min.js 
```

这似乎只发生在产品页面上

# iphone - ScrollView 的 iOS 自动布局问题

> ID：12509265
> 
> 赞同：2
> 
> 时间：2012-09-20T08:57:21.353
> 
> 标签：iphone, ios, uiscrollview, modalviewcontroller, autolayout

你好我有一个自动布局问题`UIScrollView`和`ModalViewController`。这是我的编码步骤作为示例代码：

1）我有`UIViewController`一个`UIScrollView`as`subView`

```
UIViewController *viewController = [[UIViewController alloc] init];
UIScrollView *scrollView = [[UIScrollView alloc] init];

scrollView.translatesAutoresizingMaskIntoConstraints = NO;
[viewController.view addSubview:scrollView];

UIView *superView = viewController.view;
NSDictionary *viewsDict = NSDictionaryOfVariableBindings(superView,scrollView);

[superView addConstraints:[NSLayoutConstraint constraintsWithVisualFormat:@"H:|[scrollView(==superView)]|"
                                                                  options:0
                                                                  metrics:nil
                                                                    views:viewsDict]];
[superView addConstraints:[NSLayoutConstraint constraintsWithVisualFormat:@"V:|[scrollView(==superView)]|"
                                                                  options:0
                                                                  metrics:nil
                                                                    views:viewsDict]]; 
```

这行得通

2）我添加2个子视图`scrollView`

```
UIView *view1 = [[UIView alloc] init];
view1.backgroundColor = [UIColor redColor];
view1.translatesAutoresizingMaskIntoConstraints = NO;
[scrollView addSubview:view1];

UIView *view2 = [[UIView alloc] init];
view2.backgroundColor = [UIColor greenColor];
view2.translatesAutoresizingMaskIntoConstraints = NO;
[scrollView addSubview:view2];

viewsDict = NSDictionaryOfVariableBindings(scrollView,view1,view2);

[scrollView addConstraints:[NSLayoutConstraint constraintsWithVisualFormat:@"H:|[view1(==scrollView)]|"
                                                                   options:0
                                                                   metrics:nil
                                                                     views:viewsDict]];
[scrollView addConstraints:[NSLayoutConstraint constraintsWithVisualFormat:@"H:|[view2(==scrollView)]|"
                                                                   options:0
                                                                   metrics:nil
                                                                     views:viewsDict]];

[scrollView addConstraints:[NSLayoutConstraint constraintsWithVisualFormat:@"V:|[view1(180)][view2(==scrollView)]|"
                                                                   options:0
                                                                   metrics:nil
                                                                     views:viewsDict]];

UIButton *btn = [UIButton buttonWithType:UIButtonTypeRoundedRect];
[btn setTitle:@"open" forState:UIControlStateNormal];
btn.frame = CGRectMake(10, 10, 100, 100);
[view2 addSubview:btn];
[btn addTarget:self action:@selector(openPopOver) forControlEvents:UIControlEventTouchUpInside]; 
```

这也很好

3）我滚动到内容偏移 y 180，我只能看到 view2

```
[scrollView setContentOffset:CGPointMake(0, 180) animated:YES]; 
```

4）我`ModalViewController`在`ViewController上打开一个

```
- (void)openModal{
UIViewController *viewController = [[UIViewController alloc] init];

UIButton *btn = [UIButton buttonWithType:UIButtonTypeRoundedRect];
[btn setTitle:@"close" forState:UIControlStateNormal];
btn.frame = CGRectMake(10, 10, 100, 100);
[viewController.view addSubview:btn];
[btn addTarget:self action:@selector(closePopOver) forControlEvents:UIControlEventTouchUpInside];

[self presentViewController:viewController animated:YES completion:nil]; 
```

}

5）当我关闭`ModalViewController`我的布局`scrollView`不起作用时，它会滚动到我没有设置的不同内容偏移量。当我将内容偏移量重置为 y 180 时，滚动视图的内容大小是错误的。

```
- (void)closeModal{
[self dismissViewControllerAnimated:YES completion:^{

}]; 
```

}

我希望有人可以帮助我解决这个问题。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-21T22:38:27.490

我认为这可能是 iOS 自动布局 wrt UIScrollViews 中的一个错误。仅在我的情况下我遇到了类似的问题，我会推送到详细视图，然后弹回作为 UIScrollView 的主视图。滚动视图中的内容将向上移动。将滚动视图滚动到顶部，然后再次推送和弹出，事情将被正确重置。

我什至尝试了使用 UIScrollView 而不是表视图作为主视图的开箱即用主细节应用程序，并且能够证明该缺陷。

表视图和集合视图似乎没有这个问题。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-20T09:06:52.760

也许您可以在`viewWillAppear`? 你已经实施了`-(void)layoutsubviews`吗？

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-20T10:12:34.837

从[`UIViewController`](http://developer.apple.com/library/ios/#documentation/UIKit/Reference/UIViewController_Class/Reference/Reference.html)'`presentViewController:`方法的文档中：

> 此方法将presentedViewController 属性设置为指定的视图控制器，**调整该视图控制器的视图大小，**然后将该视图添加到视图层次结构中。视图根据呈现的视图控制器的 modalTransitionStyle 属性中指定的过渡样式在屏幕上进行动画处理。

因此，您的视图控制器的大小调整是有意的。好吧，无论如何，苹果公司。

解决这个问题的一种方法是记录调整大小的视图的坐标并推断出究竟发生了什么变化。也许您可以调整约束以防止这种情况发生。

或者，您可以尝试在此方法的完成处理程序中调整所有内容的大小。

# c# - 下载图像不起作用

> ID：12509266
> 
> 赞同：0
> 
> 时间：2012-09-20T08:57:24.700
> 
> 标签：c#, visual-studio-2010, download

我正在使用 C# 下载方法下载图像下载图像但它没有用它是空的或者我们说损坏的图像没有打开。

问题是图像有不寻常的链接：

```
http://www.example.com/image1.php 
```

而不是其他人喜欢：

```
http://www.example.com/img1.jpg 
```

那么如何下载这些图像，如果我使用浏览器转到图像并单击另存为下载就好了。

代码：

```
 System.Net.WebClient client = new System.Net.WebClient();
 picname = "testingimage";
 client.DownloadFile(imagepath, filepath + picname + ".jpg"); 
```

让我知道是否有其他方法可以做到这一点。

图片网址：

```
<img src="http://www.abx.com/img1.php" alt="http://www.abx.com/img1.php" class="decoded"> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T13:35:37.953

我解决了它，但使用长路线创建另一个线程登录到该页面并使用`WEBBROWSER`控制保存图像：

保存图像的代码：

```
 IHTMLDocument2 doc = (IHTMLDocument2)webBrowser1.Document.DomDocument;
                    IHTMLControlRange imgRange = (IHTMLControlRange)((HTMLBody)doc.body).createControlRange();
 string imagename = string.Empty;
 try
 {
 foreach (IHTMLImgElement img in doc.images)
   {
     imgRange.add((IHTMLControlElement)img);
     imgRange.execCommand("Copy", false, null);
     using (Bitmap bmp = (Bitmap)Clipboard.GetDataObject().GetData(DataFormats.Bitmap))
        {
            bmp.Save(@"c:\testImage\TestPic.jpg");
        }
     imagename = img.nameProp;
     break;

   }
 }
 catch (System.Exception aaa)
 {

 } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T09:14:31.777

听起来 PHP 脚本正在检查请求标头的预期返回类型，即默认为 HTML，但如果请求请求图像，它将只返回图像。虽然我以前没有使用`client.DownloadFile`过，所以不知道你会如何设置标题。但这可能值得研究。

# php - 在单击事件上更改 php 变量

> ID：12509268
> 
> 赞同：0
> 
> 时间：2012-09-20T08:57:29.810
> 
> 标签：php, javascript, jquery, html

如果用户单击按钮，我想更改 php 变量（由 var b1 和 var b2 调用的 $start 和 $end）。现在我知道 php 是服务器端的，但我该怎么做呢？我读了一些关于使用 $get 但我不知道如何实现它：

```
<?php if ( is_user_logged_in() ) { ?>
<input type="submit" value="Start Chat" id="start_chat" style="position: absolute; top: 30px; left: 10px;" />
<?php
 } ?> 

 <script>
jQuery('#start_chat').click(function(){
  $(this).data('clicked', true);
});

var b1 = '<?php echo $start; ?>';
var b2 = '<?php echo $end; ?>';

if(jQuery('#start_chat').data('clicked')) {
   // change var b1 and b2
} else {
    // do not change anything
}

</script>

<div id="eu_la">
<?php
$start = strtotime('9:30');
$end = strtotime('12:30');
$timenow = date('U'); 
if((date('w') == 4) && ($timenow >= $start && $timenow <= $end)) { // day 2 = Tuesday
  include('facut_mine.php');
   } 
  else {
do_shortcode('[upzslider usingphp=true]');
  } ?> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-20T09:15:23.747

在您当前的代码上，添加：

```
// change var b1 and b2
$.ajax({
    type: "POST",
    url: "chat.php",
    data: { b1: "123", b2: "456" }
}); 
```

上`chat.php`：

```
$start = $_POST['b1'];
$end = $_POST['b2']; 
```

**更新：**

如果您需要在此处用 javascript 加载数据：

进行`chat.php`这些更改：

```
// variables
if (!empty($_POST)) {
    $data['b1'] = $_POST['b1'];
    $data['b2'] = $_POST['b2'];
}

// to not lose them
$_SESSION['chat'] = $data;

// to keep it compatible with your old code
$start = $data['b1'];
$end = $data['b2'];

// send the JSON formatted output
echo json_encode($data); 
```

在您的客户端代码上：

```
// change var b1 and b2
$.ajax({
    type: "POST",
    url: "chat.php",
    dataType: 'json',
    data: { b1: "123", b2: "456" }
}).done(function(data) {
    b1 = data.b1;
    b2 = data.b2;
}); 
```

我没有测试过，但希望它有效！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T09:14:13.420

首先，输入标签必须包含在表单标签中。像这样，

```
<?php if ( is_user_logged_in() ) { ?>
<form method="GET">
<input type="submit" value="Start Chat" id="start_chat" style="position: absolute; top: 30px; left: 10px;" />
<input type="hidden" name="start" value="[WHATEVER YOU WANT GOES HERE]" />
<input type="hidden" name="end" value="[WHATEVER YOU WANT GOES HERE]" />
</form>
<?php
 } ?> 
```

然后，在 PHP 代码中

```
if (isset($_GET['start']))
    $start = $_GET['start'];
if (isset($_GET['end']))
    $start = $_GET['end']; 
```

这会将 $start 和 $end 变量设置为您通过表单提交的任何值。但是，您的 JavaScript 代码不会按预期工作

```
jQuery('#start_chat').click(function(){
     $(this).data('clicked', true);
});

if(jQuery('#start_chat').data('clicked')) {
   // change var b1 and b2
} else {
    // do not change anything
} 
```

第一段代码将事件侦听器添加到#start_chat 元素。然而，问题在于，当未设置 data('clicked') 时，后一段代码被立即读取并执行（由解释器）。所以它永远不会进入**if**分支。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-20T09:14:50.467

正如您所说的那样，PHP 是服务器端。这就是为什么您必须调用 Ajax-Send 到服务器，将新值推送到 php 脚本。然后，您必须加载通过 Javascript（Ajax onready）从 PHP 传递的答案，并用新加载的页面（部分）替换。

仅更改开始和结束时间对我来说似乎非常复杂。直接在 JS 中做就行了；）

# jquery - 将 ajax 与现有表单一起使用

> ID：12509272
> 
> 赞同：1
> 
> 时间：2012-09-20T08:57:38.173
> 
> 标签：jquery, ajax, forms, firebug, web-inspector

我想用 ajax 处理这个表单，但我并不完全清楚在发送之前应该如何处理数据。这是我的表单，它是一个输出它的表达式引擎模块，所以我不知道 php 函数会发生什么：

```
<form id="bookmark_form_entry_106" class="bookmark_form" name="bookmark_form" method="post" action="http://mysite.com//S=1b73e2e22729ccf0613b758ecc7e2631fab28745/">

<div class="hiddenFields">
<input type="hidden" name="XID" value="438068dba50235d9992e1492a6171e892f7bac60">
<input type="hidden" name="ACT" value="50">
<input type="hidden" name="RET"     value="http://mysite.com/S=1b73e2e22729ccf0613b758ecc7e2631fab28745/video/esegui_slq_1">
<input type="hidden" name="type" value="entry">
<input type="hidden" name="data_id" value="106">
<input type="hidden" name="site_id" value="3">
</div>

<input type="submit" value="add bookmark">

</form> 
```

我将使用 jQuery $.ajax(); 但我不知道如何处理表单数据：

```
$.ajax({  
type: "POST",  
url: "http://mysite.com//S=1b73e2e22729ccf0613b758ecc7e2631fab28745/",  // is this correct?
data: ,  // what data should go there?
success: function() {  
 // wohoo, this works! 
}  
}); 
```

我是一个表单的新手，所以我不确定我是否必须更多地了解 POST 脚本将如何处理我的数据，或者是否知道表单本身的内容就足够了。

我也很好奇如何使用网络检查器（或萤火虫）进行测试，谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-20T09:00:05.480

要获取数据，您需要 jQuery 的序列化函数 ( [http://api.jquery.com/serialize/](http://api.jquery.com/serialize/) )。

```
var data = $('#form_id').serialize() 
```

然后只需`data`在您的 AJAX 调用中使用该变量！

根据您处理表单提交的准确程度，您应该能够让`$(this)`变量成为您已提交的表单。

因此，构建调用的一种好方法是：

```
$.ajax({  
type: "POST",  
url: $(this).attr('action'),  // read the action attribute of the form
data: $(this).serialize(),  // what data should go there?
success: function() {  
 // wohoo, this works! 
}  
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T09:01:18.083

关于`data`使用`$('#bookmark_form_entry_106').serialize()`设置帖子值

```
$.ajax({  
    type: "POST",  
    url: "http://mysite.com//S=1b73e2e22729ccf0613b758ecc7e2631fab28745/",  // is this correct?
    data: $('#bookmark_form_entry_106').serialize(),  // what data should go there?
    success: function() {  
     // wohoo, this works! 
    }  
}); 
```

# php - PHP：是否可以在嵌套对象中调用嵌套对象的方法？

> ID：12509274
> 
> 赞同：5
> 
> 时间：2012-09-20T08:57:40.397
> 
> 标签：php

我不知道如何更好地解释这一点，所以（见第二课内的评论）：

```
<?php

    class main {
        public function something() {
            echo("do something");
        }
        public function something_else() {
            $child=new child();
            $child->child_function();
        }
    }

    class child {
        public function child_function() {
            echo("child function");
            //is it possible to call main->something() here somehow if this class is initiated inside class main?
        }
    }

?> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-20T09:00:37.120

不，对象不能简单地访问更高范围的东西。你需要明确地`main`传入`child`：

```
$child->child_function($this); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T09:03:19.307

您已将该函数定义`something_else`为公共的，因此您可以在创建主类的对象后访问它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-20T09:03:22.813

试试这个，

```
 class main {
        public function something() {
            echo("do something");
        }
        public function something_else() {
            $child=new child($this);
            $child->child_function();
        }
    }

    class child {
        protected $_main;
        public function __construct($main)
        {$this->_main = $main;}
        public function child_function() {
            echo("child function");
             $this->_main->something();
        }
    }

?> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-20T09:07:37.690

您可以使用 main 扩展您的子对象。*这允许孩子通过调用$this->something();*
来访问父类。因为它成为主类的成员，并且可以访问它的所有属性和方法。

 *```
<?php    
    class main {
        public function something() {
            echo("do something");
        }
    }

    class child extends main {
        public function child_function() {
            echo("child function");
            //is it possible to call main->something() here somehow if this class is initiated inside class main?
            $this->something();
        }
    }

?> 
```

如果你想在两者中都使用 __construct() ，你可以这样做：

```
public function __construct () {
    parent::__construct();
} 
```

这适用于所有方法。*

# jakarta-ee - Glassfish 3.1.2.2：IIOP1002：主要传播：在主题中找不到主要信息

> ID：12509281
> 
> 赞同：6
> 
> 时间：2012-09-20T08:58:23.383
> 
> 标签：jakarta-ee, glassfish, ejb, glassfish-3, iiop

我正在尝试找出导致 glassfish 中一条恼人消息污染我们日志文件的原因。

为了简化我们的设置，我们有 2 个 glassfish 服务器运行 3.1.2.2。

服务器 A 在其上部署了一个 Web 服务，使用 Web 服务中的角色以及 sun-ejb-jar.xml 和 sun-application.xml 中的映射定义的基于证书的安全性。

服务器 B 上部署了一个远程 EJB，没有配置安全性。

在服务器 B 上调用远程 EJB 时，从服务器 A 上的 Web 服务使用如下代码：

```
Properties props = new Properties();
props.setProperty("java.naming.factory.initial", "com.sun.enterprise.naming.SerialInitContextFactory");
props.setProperty("java.naming.factory.url.pkgs", "com.sun.enterprise.naming");
props.setProperty("java.naming.factory.state", "com.sun.corba.ee.impl.presentation.rmi.JNDIStateFactoryImpl");
props.setProperty("org.omg.CORBA.ORBInitialHost", server.getServer());
props.setProperty("org.omg.CORBA.ORBInitialPort", Integer.toString(server.getEjb3Port()));
InitialContext ic = new InitialContext(props);

return ((MyIF)ic.lookup(MyIF.class.getName())).doWork(); 
```

服务器 A 上的日志记录了以下内容，但 EJB 调用按预期工作。

```
[#|2012-09-20T08:43:42.141+0100|SEVERE|glassfish3.1.2|javax.enterprise.system.core.security.com.sun.enterprise.iiop.security|_ThreadID=26;_ThreadName=Thread-2;|IIOP1002: Principal propagation: Cannot find principal information in subject|#] 
```

有没有人遇到过这个错误并且知道如何解决这个问题？

消息上的[Oracle 文档](http://docs.oracle.com/cd/E26576_01/doc.312/e24933/error-messages.htm#sthref127 "甲骨文文档")不是很有帮助。

> IIOP1002 主体传播：在主题中找不到主体信息
> 
> 原因：主题中没有找到主体信息
> 
> 行动：请检查身份传播的配置设置

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-05T12:46:26.667

我们遇到了与身份传播相关的类似问题，但我们在部署远程 EJB 的服务器上收到了垃圾日志。那将是您设置中的服务器 B。示例日志条目：

```
[#|2013-06-05T10:36:50.111+0000|SEVERE|glassfish3.1.2|javax.enterprise.resource.corba.com.sun.enterprise.common.iiop.security|_ThreadID=24;_ThreadName=Thread-2;|iiop.importname_exception
java.io.IOException: Invalid Name
    at com.sun.enterprise.iiop.security.GSSUtils.importName(GSSUtils.java:158)
    at com.sun.enterprise.iiop.security.GSSUtilsService.importName(GSSUtilsService.java:63)
    at com.sun.enterprise.common.iiop.security.GSSUPName.<init>(GSSUPName.java:97)
    at com.sun.enterprise.iiop.security.SecServerRequestInterceptor.createIdCred(SecServerRequestInterceptor.java:349)
    at com.sun.enterprise.iiop.security.SecServerRequestInterceptor.receive_request(SecServerRequestInterceptor.java:547)
    at com.sun.corba.ee.impl.interceptors.InterceptorInvoker.invokeServerInterceptorIntermediatePoint(InterceptorInvoker.java:612)
    at com.sun.corba.ee.impl.interceptors.PIHandlerImpl.invokeServerPIIntermediatePoint(PIHandlerImpl.java:612)
    at com.sun.corba.ee.impl.protocol.CorbaServerRequestDispatcherImpl.getServantWithPI(CorbaServerRequestDispatcherImpl.java:333)
    at com.sun.corba.ee.impl.protocol.CorbaServerRequestDispatcherImpl.dispatch(CorbaServerRequestDispatcherImpl.java:196)
    at com.sun.corba.ee.impl.protocol.CorbaMessageMediatorImpl.handleRequestRequest(CorbaMessageMediatorImpl.java:1624)
    at com.sun.corba.ee.impl.protocol.CorbaMessageMediatorImpl.handleRequest(CorbaMessageMediatorImpl.java:1486)
    at com.sun.corba.ee.impl.protocol.CorbaMessageMediatorImpl.handleInput(CorbaMessageMediatorImpl.java:990)
    at com.sun.corba.ee.impl.protocol.giopmsgheaders.RequestMessage_1_2.callback(RequestMessage_1_2.java:214)        at com.sun.corba.ee.impl.protocol.CorbaMessageMediatorImpl.handleRequest(CorbaMessageMediatorImpl.java:742)
    at com.sun.corba.ee.impl.protocol.CorbaMessageMediatorImpl.dispatch(CorbaMessageMediatorImpl.java:539)
    at com.sun.corba.ee.impl.protocol.CorbaMessageMediatorImpl.doWork(CorbaMessageMediatorImpl.java:2324)
    at com.sun.corba.ee.impl.orbutil.threadpool.ThreadPoolImpl$WorkerThread.performWork(ThreadPoolImpl.java:497)
    at com.sun.corba.ee.impl.orbutil.threadpool.ThreadPoolImpl$WorkerThread.run(ThreadPoolImpl.java:540)|#] 
```

我们通过在部署远程 ejb 的服务器上禁用远程 EJB 的传播来解决这个问题。不幸的是，我们似乎不得不对每一个远程 EJB 都这样做。至少日志现在更具可读性。在 glassfish-ejb-jar.xml 中为包含远程 ejb 的 ejb-jar 文件禁用。

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE glassfish-ejb-jar PUBLIC "-//GlassFish.org//DTD GlassFish Application Server 3.1 EJB 3.1//EN" "http://glassfish.org/dtds/glassfish-ejb-jar_3_1-1.dtd">
<glassfish-ejb-jar>
    <enterprise-beans>
        <ejb>
            <ejb-name>RemoteEjb1</ejb-name>
            <ior-security-config>
                <sas-context>
                    <caller-propagation>NONE</caller-propagation>
                </sas-context>
            </ior-security-config>
        </ejb>
        <ejb>
            <ejb-name>RemoteEjb2</ejb-name>
            <ior-security-config>
                <sas-context>
                    <caller-propagation>NONE</caller-propagation>
                </sas-context>
            </ior-security-config>
        </ejb>
    </enterprise-beans>
</glassfish-ejb-jar> 
```

# java - 我可以得到屏幕安卓手机的尺寸吗？

> ID：12509284
> 
> 赞同：1
> 
> 时间：2012-09-20T08:58:55.120
> 
> 标签：java, android, screen-resolution, screen-size

> **可能重复：**
> [如何获取屏幕尺寸并对其做出响应？](https://stackoverflow.com/questions/6577430/how-to-get-screen-size-and-respond-to-it)

能不能得到android手机的屏幕大小，类似电脑里的方法。我对屏幕分辨率和（或）对角线屏幕感兴趣。
有没有可能找到我感兴趣的信息，它可以是计算机的 anologii 交易：

```
Toolkit toolkit = getDefaultToolkit();
Dimension screenSize = toolkit.getScreenSize();
int widthScreen = screenSize.width;
int heightScreen = screenSize.height; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-20T09:02:27.497

[http://developer.android.com/reference/android/util/DisplayMetrics.html](http://developer.android.com/reference/android/util/DisplayMetrics.html)

您可以按如下方式使用它：

```
DisplayMetrics displaymetrics = new DisplayMetrics();
getWindowManager().getDefaultDisplay().getMetrics(displaymetrics);
int height = displaymetrics.heightPixels;
int width = displaymetrics.widthPixels; 
```

对于密度，有

```
int densitiy = displaymetrics.densityDpi; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T09:03:42.147

您可以使用以下代码来获取屏幕高度和宽度。

```
WindowManager windowManager = (WindowManager) getSystemService(Context.WINDOW_SERVICE);
Display display = windowManager.getDefaultDisplay();
densityX = display.getWidth(); // default height width of screen
densityY = display.getHeight(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-20T09:04:12.703

使用此代码：

```
DisplayMetrics displaymetrics = new DisplayMetrics();
getWindowManager().getDefaultDisplay().getMetrics(displaymetrics);
int height = displaymetrics.heightPixels;
int wwidth = displaymetrics.widthPixels; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-20T09:04:28.057

试试这个：

```
Display display = ((WindowManager)getSystemService(Context.WINDOW_SERVICE)).getDefaultDisplay();
int screen_width = display.getWidth();
int screen_height = display.getHeight(); 
```

# cmd - 逗号提示的异常行为。谁能解释一下？

> ID：12509287
> 
> 赞同：0
> 
> 时间：2012-09-20T08:58:59.677
> 
> 标签：cmd

在cmd中更改驱动器，我们通常将**驱动器**号写成如下：

```
E: 
```

驱动器将更改为 E 驱动器，但是 cmd 的以下行为让我感到惊讶：

```
C:\Users\Rohan>cd E:/java/java files/Applets
C:\Users\Rohan>E:
E:\JAVA\java files\Applets>dir

 Volume in drive E is DISK1_VOL2
 Volume Serial Number is 94AA-4876

  Directory of E:\JAVA\java files\Applets 
```

通过在驱动器号之前给出 cd 命令来查看整个目录路径的更改方式，而不仅仅是驱动器。

谁能解释一下，这是怎么回事？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T09:07:51.147

可以把它想象成每个驱动器都有自己的***当前目录***。因此，您可以分别更改每个驱动器的***当前目录***，但您始终会选择一个***活动***驱动器。

如果您切换到另一个驱动器，它的***当前目录***也会被激活。如果您想要一种更一致的方式来一步更改驱动器和目录，您可以使用`CD`带有`/D`开关的命令。像这样：

```
C:\Users\Rohan>cd /D "E:/java/java files/Applets"
E:\JAVA\java files\Applets> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T12:42:24.687

同时更改驱动器和目录的另一个选项是使用 PUSHD

```
pushd "E:/java/java files/Applets" 
```

您可以使用未记录的动态变量来检查任何给定驱动器的当前目录。

```
echo %=c:%
echo %=e:% 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-20T09:51:07.287

根据我的经验，情况一直如此。使用驱动器号切换驱动器，同时`cd`为特定驱动器设置当前目录。

# apache-flex - Flex RichTextEditor - 放弃 Ctrl+Y

> ID：12509291
> 
> 赞同：1
> 
> 时间：2012-09-20T08:59:14.833
> 
> 标签：apache-flex, air, keydown, rich-text-editor, undo-redo

我在使用 flex 3.6 构建的 AIR 桌面应用程序中使用 RichTextEditor。

由于没有撤消/重做管理，我正在尝试扩展组件功能。

我有一个功能，每次按`CTRL`+`Y`时我都会遇到问题。

这就是我按下键时的实际操作。

```
<mx:RichTextEditor 
    id="myRTE"
    keyDown="onKeyDown(event);"
/>

....

public function onKeyDown(event:KeyboardEvent):void
{
    if (event.ctrlKey && event.charCode == 122)
    {
        // ctrl + z pressed!
        undo();
    }

    if (event.ctrlKey && event.charCode == 121)
    {
        // ctrl + y pressed!
        redo();
    }
} 
```

我的问题是`CTRL`+`Y`输出在我的 RichTextEditor 中也是一个奇怪的字符，但我想丢弃它。

我试图放一个 event.stopImmediatePropagation(); 就在重做（）之后；但无论如何，奇怪的字符都会附加到我的 RichTextEditor 中。

我真的不知道如何摆脱它。

任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T09:23:22.060

您可以使用以下代码：

```
protected function application1_creationCompleteHandler(event:FlexEvent):void {
    myRTE.textArea.addEventListener(TextEvent.TEXT_INPUT, textInput);
}

private function textInput(event:TextEvent):void {
    // <CTRL+V pressed
    if (event.text.length > 1)
        event.preventDefault();
} 
```

RichTextEditor 封装并使用 TextArea。您可以为 TextEvent.TEXT_INPUT 添加事件以防止`CTRL`+`V`事件。

# javascript - FOSFacebook Bundle 2.0 的 JS 错误

> ID：12509294
> 
> 赞同：2
> 
> 时间：2012-09-20T08:59:21.337
> 
> 标签：javascript, facebook, symfony, fosuserbundle, fosfacebookbundle

我尝试安装 FOSFacebook，我已按照所有步骤操作，但在 js 控制台中出现此错误：

未捕获的 ReferenceError：未定义 onFbInit

我在我的 base.html.twig 中包含了这个 lignes：

```
 <!-- FaceBook Init -->
    {{ facebook_initialize({'xfbml': true, 'fbAsyncInit': 'onFbInit();'}) }}
    {{ facebook_login_button({'autologoutlink': true}) }}

    <script>
    $(document).ready(function() {
        function goLogIn(){
          window.location = "{{ path('_security_check') }}";
        }

        function onFbInit() {
          if (typeof(FB) != 'undefined' && FB != null ) {
              FB.Event.subscribe('auth.statusChange', function(response) {
                  if (response.session || response.authResponse) {
                      setTimeout(goLogIn, 500);
                  } else {
                      window.location = "{{ path('_security_logout') }}";
                  }
              });
          }
        }
    });
    </script> 
```

有人可以帮助我吗？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T09:12:03.840

不要在 $(document).ready(function() 调用中定义这些函数。使用：

```
<script>
    function goLogIn(){
      window.location = "{{ path('_security_check') }}";
    }

    function onFbInit() {
      if (typeof(FB) != 'undefined' && FB != null ) {
          FB.Event.subscribe('auth.statusChange', function(response) {
              if (response.session || response.authResponse) {
                  setTimeout(goLogIn, 500);
              } else {
                  window.location = "{{ path('_security_logout') }}";
              }
          });
      }
    }
</script> 
```

# javascript - MsGesture，在地铁风格应用程序中向不同方向滑动

> ID：12509296
> 
> 赞同：2
> 
> 时间：2012-09-20T08:59:25.393
> 
> 标签：javascript, microsoft-metro, winjs

我的代码在手指滑动手势上运行良好，即如果我滑动手指，它会触发事件并调用 nextMonth() 函数。现在有什么方法可以检查我是否向上和向下滑动，以便我可以在两个不同的手势上调用两种不同的方法。

```
 var myGesture = new MSGesture();
            var v = this.element.querySelector(".bartouch");
            myGesture.target = v;
            v.addEventListener("MSGestureEnd", handleListner,false);
            v.addEventListener("MSPointerDown", handleListner, false);

        function handleListner(evt) {
            if (evt.type == "MSPointerDown")   
                {
                myGesture.addPointer(evt.pointerId);
                return;
            }
        that.nextMonth();
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T16:25:03.993

你有两个选择：

1.  使用`MSGesture`, 和处理[`MSGestureStart`, `MSGestureChange`, 和`MSGestureEnd`](http://msdn.microsoft.com/en-us/library/windows/apps/Hh968035.aspx)事件来计算用户手指（或手指）的平移，并查看它们是否在正确的方向上。`MSGestureChange`由包含`translateX`&属性返回的事件对象`translateY`告诉您用户手指移动了多远。[这里](http://code.msdn.microsoft.com/windowsapps/Input-Instantiable-deda69ca/sourcecode?fileId=57998&pathId=770530612)有一个详细的示例。

2.  使用`Windows.UI.Input.GestureRecognizer`并使用手势对象上的[手势设置](http://msdn.microsoft.com/en-us/library/windows/apps/windows.ui.input.gesturesettings.aspx)，将手势设置为具体的 X 平移或 Y 平移。[Ball 8 示例](http://code.msdn.microsoft.com/windowsapps/Manipulations-and-gestures-26918bb3/sourcecode?fileId=43578&pathId=1052877166)显示了如何执行此操作。它主要涉及创建 GestureRecognizer 类，并通过处理`MSPointer[Down|Move|Up|Cancel]`要查看交互的 DIV 上的 DOM 事件来为其提供事件，并通过其`process[Down|Move|Up]Event`处理程序将它们传递给您的（共享）识别器实例。

就个人而言，我建议使用 2 而不是 1——虽然设置起来更困难，但您最终会让用户在滑动、轻弹等方面拥有一致的手势体验，而不必像您一样手动调整手势如果您选择方法1。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-23T14:10:23.563

我已经在我的一个游戏中成功地使用[了 HammerJS](http://eightmedia.github.io/hammer.js/)来处理各个方向的手势。

这是我处理所有四个方向所需的所有代码：

```
var hammerOptions = { swipeVelocityX: 0.1, swipeVelocityY: 0.1 };
Hammer(contentContainer, hammerOptions).on("swipeleft", function(event) { moveBlocksLeft(); });
Hammer(contentContainer, hammerOptions).on("swiperight", function(event) { moveBlocksRight(); });
Hammer(contentContainer, hammerOptions).on("swipeup", function(event) { moveBlocksUp(); });
Hammer(contentContainer, hammerOptions).on("swipedown", function(event) { moveBlocksDown(); }); 
```

包含内容的div在哪里`contentContainer`，每个方向都有进一步处理手势的功能。

# c++ - 为什么 ++i 在性能方面与 i+=1 不同

> ID：12509298
> 
> 赞同：2
> 
> 时间：2012-09-20T08:59:27.267
> 
> 标签：c++, c, performance, optimization

显然在阅读了旧标题之后

> 为什么会`is ++i fster than i+=1`存在这样的问题

人们懒得彻底阅读问题本身。

问题**不**在于人们提出这个问题的原因！`++i`这是关于为什么编译器会在和之间产生差异`i+=1`，以及是否存在任何可能的情况。虽然我感谢您所有诙谐而深刻的评论，但我的问题与此无关。

* * *

好吧，好吧，让我试着换个方式问这个问题，我希望我的英语足够好，这次我可以表达自己而不会被误解，所以**请阅读**。假设有人在一本 10 年前的书中读到：

> 在 i=i+1 上使用 ++i 会给您带来性能优势。

我不热衷于这个*特定*的例子，而是或多或少地泛泛而谈。

显然，作者在写这本书时，对他来说是有道理的，他不只是虚构的。我们知道，现代编译器不关心您是否使用`++i`,`i+=1`或`i = i + 1`，代码会被优化并且我们将有相同的 asm 输出。

这似乎很合乎逻辑：如果两个操作做同样的事情，并且具有相同的结果，那么就没有理由编译`++i`成一件事，再编译`i+=1`成另一件事。

但*自从书的作者写了它*，他就看到了不同！这意味着某些编译器实际上会为这两行产生不同的输出。这意味着制作编译器的人有一些理由来对待`++i`和`i+=1`区别对待。**我的问题是**他们为什么会这样做？

仅仅是因为当时很难/不可能使编译器足够先进以执行此类优化吗？`++i`或者也许在某些非常特定的平台/硬件/在某些特殊情况下，在and`i+=1`和其他类似的东西之间做出区别实际上是有意义的？或者它可能取决于变量类型？还是编译器开发人员只是懒惰？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-09-20T11:07:25.647

想象一个非优化编译器。它真的不在乎是否`++i`等效`i+=1`，它只是发出它可以想到的第一件事。它知道 CPU 有一个加法指令，它知道 CPU 有一个递增整数的指令。所以假设`i`有 type `int`，那么`++i`它会发出类似的东西：

```
inc <wherever_i_is> 
```

对于`i+=1`，它会发出类似的信息：

```
load the constant 1 into a register
add <wherever_i_is> to that register
store that register to <wherever_i_is> 
```

为了确定后一个代码“应该”与前一个相同，编译器必须注意添加的常量是 1，而不是 2 或 1007。这需要编译器中的专用代码，标准没有需要它，并不是每个编译器都一直这样做。

所以你的问题相当于，“为什么编译器会比我更笨，因为我已经发现了这种等价性而它没有？”。答案是现代编译器在很多时候都比你聪明，但并非总是如此，也并非总是如此。

> 自从这本书的作者写了它，他就看到了不同之处

不必要。如果你看到关于什么是“更快”的声明，有时这本书的作者比你和编译器都笨。有时他很聪明，但他巧妙地在不再适用的条件下形成了他的经验法则。有时，他猜测是否存在像我上面描述的那样愚蠢的编译器，而没有实际检查您实际使用过的任何编译器是否真的那么愚蠢。就像我刚刚做的那样;-)

顺便说一句，10 年前对于一个启用了优化的体面的编译器来说太新了，不能进行这种特殊的优化。确切的时间表可能与您的问题无关，但是如果作者写了那个并且他们的借口是“那是早在 2002 年”，那么我个人不会接受它。那时的说法并不比现在更正确。如果他们说 1992 那么好吧，我个人不知道当时的编译器是什么样的，我无法反驳他们。如果他们说是 1982 年，那么我仍然会怀疑（毕竟当时已经发明了 C++。它的大部分设计都依赖于优化编译器，以避免在运行时进行大量浪费工作，但我承认这个事实的最大用户是模板容器/算法，它在 1982 年还不存在）。如果他们说 1972 年，我 我可能只是相信他们。确实有一段时间 C 编译器被美化为汇编器。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-09-20T11:17:38.907

在 C 中，`i++`通常不等同于，`i=i+1`因为两者产生不同的表达式值。`++i`等价于，`i=i+1`因为它们产生相同的表达式值。

`i`在未使用上述三个表达式 with 中的任何一个的情况下，这三个是相同的。如果它是一个好的编译器，它可以优化掉由`i++`.

这个临时变量之所以活跃，是因为`i++`它决定了以下两件事：

1.  的原始值`i`由表达式返回`i++`
2.  `i`增加 1

如果您首先取 的原始值 `i`然后递增`i`，那么原始（现在旧的）值`i`必须存在于某个地方（内存或寄存器，无关紧要），因为它不能存在于现在递增的变量`i`中。那是你的临时变量。

如果，OTOH，您首先增加`i`1，然后再次，您必须在某处（在寄存器或内存中）创建一个等于`i-1`撤消增量的值，因此可以获得旧的（预增加的）值作为结果表达式`i++`。

有了`++i`和`i=i+1`事情就简单多了。这些表达式要求做两件事：

1.  `i`增加
2.  的新值`i`被返回

在这里很自然地先递增`i`然后取其值。你不必有一对`i`和`i+1`（或`i-1`和`i`）的值，旧的和新的。我们在这里只需要新的。

现在，从编译器不太擅长优化的时代开始就有旧书和老人。从那里人们可以得到一个`i++`可能比`++i`. 在实践中观察到差异，而不是弥补。这是真实的，有些人可能认为今天仍然如此。

还可以尝试分析两（三）个递增表达式之间的差异，并看到确实可能需要做一些额外的操作，并为临时变量使用额外的存储单元以防`i++`. 在这一点上，这个人可能看不到什么时候不需要这个临时的，或者如何检测是否有必要。这是有关上述差异的另一种可能性。

而且，当然，人们一直都喜欢拖钓。:)

至于编译器开发人员懒惰......我不认为他们是。这就是为什么。

回到过去，计算机比现在慢得多，它们携带的 RAM 也少得多。

即使在那时，编写一个体面的优化编译器也是可能的。

问题是用于优化的额外代码使编译器明显变大变慢。如果它更大，可以运行它的计算机更少，可以使用它来编译代码的程序员也更少。如果它比其他编译器慢，人们会更喜欢其他编译器，因为人们讨厌坐着等待。

一个例子：我。在 90 年代中期，我确实可以使用 Borland 的 Turbo C/C++。但直到 90 年代末、0 年代初，我才考虑学习和使用 C。原因？Borland 的 C/C++ 比他们的 Pascal 慢得多，而且我的 PC 也不是很好。等待代码编译是痛苦的。事情就是这样。我首先掌握了 Pascal，后来才回到 C 和 C++。

因此，更智能、更大和更慢的编译器正在花费编译器用户的金钱和时间。至少在积极开发期间，这仍然是一个非常重要的产品阶段，即使最终产品是使用不同的编译器编译的。

您也不应该忘记，使用当时的基本工具开发和管理一大段编译器代码也不是很有趣。只是现在您可以拥有一个不错的 IDE（而不是一个！），其中包含调试器、语法突出显示、自动完成等所有功能、源代码管理、简单的文件比较、Internet/StackOverflow 等等……我们可以现在有多个 20+" 显示器连接到 PC！现在我们正在谈论生产力！:)

真的，我们今天有很棒的工具和设备。20、30、40 年前，人们只能想象或预测它们，但尚未使用。

事情变得更加艰难。而且，虽然我不打算在这里发表声明，但我不会惊讶地发现，当时编程还没有像现在这样商品化，优秀和优秀的程序员比今天更多。当然，这不是绝对数字，而是相对数字。

所以，我怀疑编译器的人是懒惰的。

在网上查找所谓的`Small C`. 它是一个通用术语，用于仅实现 C 语言最重要的特性的一个非常简单且功能减少的 C 编译器。您会发现一些由`Ron Cain`, `James Hendrix`（80 年代初）和其他实现以及从这些实现（例如 RatC/Lancaster 由`Bob Berry`和实现相同`Brian Meekings`）。

如果您查看其中任何一个的代码`Small C's`，您会发现最小代码大小约为 50+ KB 和 2+ KLOC，这只是从 C 到汇编代码的翻译器！在某些时候，有人需要用汇编器来组装它。

我无法想象在像 8 位家用计算机这样的项目上舒适地工作，例如 ZX-Spectrum（我小时候就有），它可以有最大 48KB 的 RAM，CPU 运行在 ~3MHz ，所有存储都在磁带录音机上，数据传输速率约为 10KB/min，屏幕为 32x24，甚至不是 80x25。

80 年代初的所有 Small C 代码，几乎不适合计算机的内存，并没有优化任何东西！

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-23T13:35:40.883

我不完全确定您指的是哪本书，因此无法查找原始报价。但是，我怀疑作者并没有真正完全谈论内置类型。对于内置类型，表达式`++i`、`i += 1`和`i = i + 1`是等价的，编译器很可能会选择最有效的一种，但对于其他类型，例如任何随机访问迭代器，它们不一定是等价的。从语义上讲，它们是等价的，但编译器没有这种语义知识，并且实现可能会做不同的事情。习惯于编写在使用类类型的对象时可能最有效的表单，即使使用内置类型，也可以避免不必要的性能问题：您正在“自动”使用最有效的方式，因此无需付费太多的关注。

在定义提供相关运算符的类时，例如，在创建随机访问迭代器时，编译器可能无法确定代码是否等效。原因之一是代码不一定是可见的，例如，当函数没有内联时。即使函数是内联的，也可能存在编译器无法跟踪的副作用。随机访问迭代器的实现可以很好地在内部使用指针并使用`++p`and `p += n`。但是，一旦`n`恰好是价值常数的信息`1`丢失，它就无法替换`p += n`为`++p`了。尽管编译器擅长常量折叠，但它至少要求整个代码是内联的，并且编译器已经决定内联函数确实应该内联。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-20T10:55:44.803

答案取决于是什么类型`i`。

当类被实现时，有不同的运算符用于预增量 ( `T & T::operator++()`、后增量 ( `T T::operator ++(int))`、加法 (`T T::operator +(T const &)`等)) 和增量 ( `T T::operator +=(T const &)`)。（显然，所有这些都有变体）

对于足够琐碎的类型，这些可能都是很多的。

但是，对于非平凡的类型，性能将取决于它们的编写方式。一般来说：

*   `a++`不太可能比 快`++a`，因为它需要在递增之前返回对象的副本。
*   `a = a + b`不太可能比第一个更快，`a += b`因为第一个需要创建一个临时的。
*   `a += 1`那时不太可能更快，`++a`因为`1`可能与 a 的类型不同，并且可能会涉及一些费用并采取任何必要的措施来解决该问题。
*   对于某些类，其中一些操作可能无论如何都不可用。

除此之外，您唯一可以肯定地说的是您应该审查代码并运行性能测试。

# jquery - 如何制作右侧没有图标的列表视图？

> ID：12509300
> 
> 赞同：0
> 
> 时间：2012-09-20T08:59:37.720
> 
> 标签：jquery, cordova, jquery-mobile

如何制作右侧没有图标的列表视图？我想在 jQuery Mobile 中更改我的只读和普通列表视图的外观。我正在用 PhoneGap 编译应用程序。

我读过类似的帖子，例如：[如何将图标/图像添加到 ListView 的列表项](https://stackoverflow.com/questions/2200052/how-to-add-icon-image-to-listitem-of-listview)，但无法得到我的答案。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-20T09:11:52.307

正如我在评论中提到的，右侧带有图标的列表有一个链接。

您可以创建不包含链接内容的只读列表。

您可以查看在线文档以获取更多信息：

[http://jquerymobile.com/demos/1.0/docs/lists/lists-readonly.html](http://jquerymobile.com/demos/1.0/docs/lists/lists-readonly.html)

**代码示例：**

```
<div data-role="page">
    <div data-role="content">
        <ul data-role="listview" data-theme="a">
            <li>Acura</li>
            <li>Audi</li>
            <li>BMW</li>
            <li> Cadillac</li>
            <li> Ferrari</li>
        </ul>
    </div>
</div> 
```

* * *

如果你想保留链接，你只需要添加`data-icon="false"`到你的`<li>`标签：

**代码示例：**

```
<body>
    <div data-role="page" id="p1">
        <div data-role="content">
            <ul data-role="listview" data-theme="a" >                   
                <li data-icon="false"><a href="#p2">Go to page 2</a></li>
                <li data-icon="false"><a href="#p3">Go to page 3</a></li>
            </ul>
        </div>
    </div>

    <div data-role="page" id="p2">
        Hello! This is page 2!!!
    </div>

    <div data-role="page" id="p3">
        Hello! This is page 3!!!
    </div>
</body> 
```

希望这可以帮助

# c# - 非对称加密生成尽可能小的输出（以字节为单位）？

> ID：12509307
> 
> 赞同：0
> 
> 时间：2012-09-20T09:00:09.507
> 
> 标签：c#, .net, rsa

我必须在我的应用程序中加入 rsa 加密。我将拥有公钥和私钥。问题是我需要将敏感数据存储在移动设备上的 sql ce 数据库中。我需要加密相对较小的字符串，例如最多 20、30 个字符，但它们有很多。稍后他们将不得不上传。

我已经测试了 RSA 加密。对于 20 字节源，我在输出时加密了 172 字节。输出长度可以下降吗？

我选择的位强度是 1024。

任何帮助将不胜感激。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T09:06:48.023

输出的长度与您的密钥大小直接相关。

缩短它的唯一方法是使用较弱的密钥。

一种实用的方法可能是以某种方式组合短字段（刚好在密钥大小之下）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T09:13:22.493

加密结果受填充影响，因此您可能希望通过以下方式减少此开销

*   将字符串组合在一起并将它们加密为一个项目
*   切换第二个参数[`RSACryptoServiceProvider.Encrypt`](http://msdn.microsoft.com/en-us/library/system.security.cryptography.rsacryptoserviceprovider.encrypt.aspx)

# php - 全局VS函数调用mysql内部函数

> ID：12509308
> 
> 赞同：0
> 
> 时间：2012-09-20T09:00:13.140
> 
> 标签：php, mysql, performance, global

你会建议我在以下几点之间明智地使用性能

一个）

```
function db(){ return new mysqli('localhost','user','pass','db'); }

//global scope
$db = db();

function foo(){
//function scope
$db = db();

[...]

} 
```

二）

```
//global scope
$db = new mysqli('localhost','user','pass','db');

function bar(){
//function scope
global $db

[...]

} 
```

目前我正在使用方法 A，但我知道调用函数会产生开销，并且在大多数函数中都会调用 db()，所以我想知道。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T09:48:58.377

如果你想在几个地方访问你的数据库，也许你应该使用一个对象：

```
class db_manager {
    private $db = new mysqli('localhost','user','pass','db');

    public function getDb() {
        return $this->db;
    }
} 
```

并这样称呼它：

```
$db = (new db_manager)->getDb(); 
```

# jquery - 如何在 find() 上添加约束？

> ID：12509309
> 
> 赞同：1
> 
> 时间：2012-09-20T09:00:17.447
> 
> 标签：jquery

以下将在文档准备好后打开第一个选项卡。我只是想保留此功能，但想添加一个约束：如果父 Li 类被隐藏，请不要这样做。如果这太复杂了，我也可以添加一个类`<a/>`并说如果它是这种类型，那么不要这样做。

```
<ul id="attached_deals_tab" class="nav nav-tabs">
   <input id="id_deals-0-id" type="hidden" name="deals-0-id">
   <li class="hidden">
       <a data-toggle="tab" href="#X">X</a>
    </li>
</ul>

$('#attached_deals_tab').find('a:first').tab('show'); 
```

这甚至可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T09:04:12.450

你可以试试这个...

```
$('#attached_deals_tab').find('li[class!=hidden] a:first').tab('show'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T09:05:18.840

假设在`a:first`第一个`li`可见的内部，您可以这样做：

```
$('#attached_deals_tab li:first:visible a:first').tab('show'); 
```

如果您绝对想根据没有课程来做到这一点，`hidden`那么您可以这样做：

```
$('#attached_deals_tab li:not(.hidden) a:first').tab('show'); 
```

并且您可以组合`:first`,`:not`等`:visible`。

另一个技巧是通过从左到右尝试 jQuery 选择器的位，看看在 Firebug 中是否在 dom 中找到正确的元素，从而朝着选择器前进。

例如。只是`$('#attached_deals_tab li:not(.hidden))`在您的 Firebug 控制台中执行应该返回一个 dom 对象，您只需单击该对象即可转到在 HTML 视图中选择的那个元素。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-20T09:05:12.890

```
var a = $('#attached_deals_tab').find('a:first');

if(!a.parent('li').hasClass('hidden')) {
    a.tab('show');
} 
```

# jsf-2 - 如何使复合组件类似于

> ID：12509310
> 
> 赞同：3
> 
> 时间：2012-09-20T09:00:18.627
> 
> 标签：jsf-2, composite-component

我一直在寻找一种方法来制作类似于：`<h:selectOneRadio />` 但我没有成功。

我想要类似的东西：

```
<myowntags:selectOneRadio>
  <f:selectItem itemValue="value0" itemLabel="This is the value 0" />
  <f:selectItem itemValue="value1" itemLabel="This is the value 1" />
  <f:selectItem itemValue="value2" itemLabel="This is the value 2" />
</myowntags:selectOneRadio> 
```

和：

```
<myowntags:selectOneRadio>
  <f:selectItems  value="#{controller.items}"  />
</myowntags:selectOneRadio> 
```

正如你所看到的，我希望这个复合组件有一个孩子：`<f:selectItem />`并按照我想要的方式渲染它。

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-20T13:37:31.070

您可以通过`#{cc.children}`. `#{cc}`指的是当前复合实例[`UIComponent`](http://docs.oracle.com/javaee/6/api/javax/faces/component/UIComponent.html)，它又具有一个[`getChildren()`](http://docs.oracle.com/javaee/6/api/javax/faces/component/UIComponent.html#getChildren%28%29)方法。`instanceof`您可以通过在以下位置检查孩子的 FQN（或简单名称，如果足够的话）来进行某种检查`<cc:implementation>`：

```
<c:forEach items="#{cc.children}" var="child">
    <c:set var="type" value="#{child['class'].simpleName}" />
    <c:if test="#{type == 'UISelectItem'}">
        <input type="radio" value="#{child.itemValue}" />#{child.itemLabel}<br/>
    </c:if>
    <c:if test="#{type == 'UISelectItems'}">
        <c:forEach items="#{child.value}" var="item">
            <input type="radio" value="#{item.value}" />#{item.label}<br/>
        </c:forEach>
    </c:if>
</c:forEach> 
```

然而，您的下一个问题是收集提交的值。为此，您需要在您引用`decode()`的支持中实现该方法。或者，更好的是，使用a创建自定义。在视图中接管' 的工作很笨拙。`UIComponent``<cc:interface componentType>``UIComponent``Renderer``Renderer`

# javascript - 为什么对象在 JS 中用括号括起来？

> ID：12509311
> 
> 赞同：7
> 
> 时间：2012-09-20T09:00:19.527
> 
> 标签：javascript, parentheses

给定以下示例：

```
var foo = {
    root:
        ({
            key1: "Value1",
            key2: "Value2",
            key3: "Value3"
        })
    }; 
```

与以下相比有什么区别：

```
var foo = {
    root:
        {
            key1: "Value1",
            key2: "Value2",
            key3: "Value3"
        }
    }; 
```

在第一个示例中，有一个额外的括号包裹了对象。这是为了什么目的？它与范围界定有什么关系吗？它是否以任何方式影响执行？谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-20T09:03:44.597

这里绝对没有区别。

*AFAIK确实*有所作为的一个地方是当您[在控制台上评估对象文字时](https://stackoverflow.com/questions/9082110/defining-a-javascript-object-in-console)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-20T09:03:55.220

他们什么都不做 :) 他们是为了可读性而存在的，尽管他们是否实现了这个目标是值得怀疑的。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-20T09:34:37.320

按照我的说法，我们应该使用方括号来收集对象。因为，JavaScript 会理解它是一个数组。

圆括号（在示例 1 中使用）仅由 javasript 解析器验证。当您尝试访问它时，java 脚本仅返回圆括号中的最后一个对象（如堆栈中的顶部对象）。

试试下面的脚本

```
var foo = {
    root1:
        {
            key1: "Value1",
            key2: "Value2",
            key3: "Value3"
        },
    root2:({
            key4: "Value4",
            key5: "Value5"
          },{
            key6: "Value6",
            key7: "Value7"
        }),
    root3:[
         {
            key8: "Value8",
            key9: "Value9"
          },{
            key10: "Value10",
            key11: "Value11"
          }
    ]
    };
    console.log(foo['root1']);  // returns object { key1, key2, key3}
    console.log(foo['root2']);  // returns only { key6,key7}
    console.log(foo['root3']);  //returns [ {key8,key9},{key10,key11}] 
```

# c# - Pechkin - Html 到 pdf 转换器 - 在控制台应用程序中

> ID：12509312
> 
> 赞同：0
> 
> 时间：2012-09-20T09:00:26.393
> 
> 标签：c#, html, pdf

我可以使用[https://github.com/gmanny/Pechkin](https://github.com/gmanny/Pechkin)在控制台应用程序中生成 pdf 文件吗？

不过，它在 wincows 表单应用程序上运行良好。

控制台应用程序的任何代码示例都会有所帮助。

并且任何 1 都可以解释 BeginInvoke ，用于此示例

```
 private void OnScPhase(SimplePechkin converter, int phasenumber, string phasedescription)
    {
        if (InvokeRequired)
        {
            BeginInvoke((Action)(() => { Text = ("New Phase " + phasenumber + ": " + phasedescription); }));
        }
        else
        {
            Text = ("New Phase " + phasenumber + ": " + phasedescription);
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T09:03:21.217

是的你可以，

您发送的代码，检查它是否在 UI 线程中执行，如果没有，则将其传输到 UI，UI 元素无法在 UI 线程之外访问

在控制台中，您不需要此代码，只需执行`Console.WriteLine`此操作即可

# php - 是否有包含最知名的危险用户输入的列表？PHP/MySQL

> ID：12509316
> 
> 赞同：4
> 
> 时间：2012-09-20T09:00:48.113
> 
> 标签：php, mysql, security, api, brute-force

我构建了一个 API，我想对其进行测试。**我已经进行了测试，但我想通过已知危险用户输入**`brute forcing`的通用列表确保它在某种程度上是安全的。 它是用 PHP 和 MySql 编写的，你们中的一些人可能不同意蛮力在这里是否是一种好习惯，但这是一项额外的安全措施

 *** * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-20T09:03:28.857

OWASP 提供了一个很好的备忘单，可以回答您的问题：[https ://www.owasp.org/index.php/PHP_Security_Cheat_Sheet](https://www.owasp.org/index.php/PHP_Security_Cheat_Sheet)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T09:22:46.710

很明显，当您制作应用程序时，您希望使其安全。这也是我的担忧。为此，我进行了彻底的研究并收集了有助于保护 PHP 网站的信息。

> PHP 应用程序安全需要考虑的要点
> 
> 1.  使用强密码加密
> 
> 一种。使用密码加盐进行强加密。
> 
> **2.永远不要相信用户输入。考虑每个变量，即 $_POST、$_GET、$_COOKIE、$_SESSION、$_SERVER，就好像它们被污染了一样。对这些变量使用适当的过滤措施。**
> 
> 1.  为了避免 XSS 攻击，在将用户输入数据插入数据库时​​，使用 php 的内置函数 htmlentities、strip_tags 等。[下面的函数（3）将解决这个问题]
>     
>     
> 2.  使用自定义清理功能来避免 sql 注入和其他恶意活动。
>     
>     
> 3.  在 PHP.INI 中禁用注册全局变量
>     
>     
> 4.  在 PHP.INI 中禁用“allow_url_fopen”
>     
>     
> 5.  不要将敏感数据存储在 cookie 中，因为 cookie 可能会被盗。
>     
>     
> 6.  检查十六进制代码攻击。清理用户输入以过滤十六进制代码。
>     
>     
> 
> **9\. 不允许用户输入超出要求的数据。验证输入以允许最大字符数。还要验证相关数据类型的每个字段。**
> 
> 1.  开发期后禁用错误报告。它可能会提供对黑客有用的数据库信息。
>     
>     
> 2.  在浏览器中隐藏文件扩展名。使用 url 重写技术。
>     
>     
> 3.  对于登录系统，在 X 次登录尝试失败后禁用用户。
>     
>     
> 4.  记录每次登录的 IP 地址。
>     
>     
> 5.  对于所有登录，出于安全原因，请设置系统，以便用户必须在 X 天后更改密码。
>     
>     
> 6.  在管理面板中，每个登录都应该有报告（登录失败、登录尝试等）。注意：- 这将有助于跟踪频繁尝试登录系统失败的 IP。我们可以通过 .htaccess 禁止此类 IP 访问系统。
>     
>     
> 7.  在 X 分钟的空闲期后自动从系统中注销用户。
>     
>     
> 8.  当用户请求更改密码时，拒绝用户保留以前的密码。
>     
>     
> 9.  从服务器禁用 exec、eval、shell_exec 等 php 函数。
>     
>     
> 10.  服务器目录安全。通过 .htaccess 禁用目录列表。将 index.html 文件放在每个目录中，如图像、css、文档等。
>     
>     
> 11.  在 PHP.INI 上进行以下设置（在生产服务器中）
>     
>     
> 
> 一种。禁用allow_url_encode b。Display_errors = 关闭 c。Log_errors = on d。Log_errors_max_len = 0 e。Ignore_repeated_errors = 关闭 f。Ignored_repeated_source = 关闭 g。Track_errors = 关闭
> 
> 1.  发布表单时使用一次性令牌。如果令牌存在并且匹配表单帖子是有效的，否则无效。

```
PHP Code : $token = md5 (uniqid (rand (), true)); $_SESSION[“token”] =
> $token; 
```

```
> HTML Code : <form> <input type=”hidden” name=”token” value=”&lt;?php echo
> $token;?>”&gt; </form> 
```

> 1.  限制输入字段长度以避免 BUFFER OVERFLOW ATTACK 例如：- PHP 是一门高级语言，它的内存分配不受限制，但到最后，当页面执行时，处理事情的是 APACHE。Apache 是用 C 语言编写的，它对内存分配有严格的规定。输入字段中的大数据可能会对 Apache 的行为产生影响。
>     
>     
> 2.  每种数据类型的数据库字段长度不应超过实际要求。
>     
>     
> 3.  黑客政策——“如果你不能打败他们，就把他们关掉” 例如：- 必须检查访问应用程序的用户的 IP。如果黑客无法进入应用程序破坏，他们肯定会尽力对应用程序产生负面影响。他们会尝试在无限循环中执行应用程序。这会降低应用程序的速度，耗尽服务器带宽，有时甚至会导致服务器崩溃。因此，跟踪这些活动将避免大量损失。
>     
>     
> 4.  出于性能原因，从 PHP.INI 禁用所有不需要和未使用的 php 扩展和模块。例如：- 如果我们使用 mysql 作为数据库，那么启用 postgre、sqllite、mssql 和 oracle 数据库扩展是没有意义的。
>     
>     
> 5.  避免使用已弃用的 PHP 函数。注意：- PHP 团队不再支持已弃用的函数。因此，明智的做法是避免使用已弃用的函数。
>     
>     
> 6.  开发人员犯的一些严重错误。例子：。在版本查询字符串中传递记录 ID 时，不检查以确保它们是 a) 有效（该记录存在），并且 b) 记录属于请求它的用户，或者用户有权查看该记录。
>     
>     
> 7.  一个好的网络主机。注意：大多数情况下，即使应用程序被安全编码，问题和问题也可能来自糟糕的网络主机。如果应用程序托管在远程服务器上，那么获得具有安全声誉的良好网络主机至关重要。对共享主机说不。
>     
>     
> 
> 例如：在很多情况下，人们报告“我的网站被黑客入侵”，而实际上他们的共享主机允许同一服务器上的另一个用户提升他们的权限。
> 
> 1.  禁用外国IP。如果一个应用程序只需要从某个地方运行，那么禁用这个地方以外的IP。
>     
>     
> 2.  使用存储过程 使用存储过程将大大提高安全性。否则，如果我们使用原始查询，请使用参数化查询。
>     
>     
> 3.  测试应用程序：通过输入随机值来测试应用程序。这应该由不在开发团队中的人完成。
>     
>     
> 4.  要记住的点。无论我们使用 .NET、Java 还是 PHP，安全问题都不是我们选择的语言的问题。安全问题是由于应用程序的编程方式造成的问题。即使是糟糕的编程，.NET 和 Java 应用程序也同样容易受到攻击。
>     
>     
> 5.  加密 PHP 代码 使用 IONCUBE (http://www.ioncube.com/) 等加密工具对生产服务器中的 php 代码进行加密，以使 php 代码免受未经授权的更改。在撰写本文时，IONCUBE 的价格为 199 美元。
>     
>     
> 6.  使用 Havij、Acunetix、Netsparker 等可用工具来检查应用程序中的漏洞。聘请黑客网络应用程序专家将大有裨益。**

# label - 使用选项标签（如值属性）并使用 javascript 传入 url

> ID：12509318
> 
> 赞同：1
> 
> 时间：2012-09-20T09:00:48.280
> 
> 标签：label, option

是否可以传递一个选择选项标签，就像它是使用 JavaScript 隐藏输入字段中的值一样？

例子：

```
<select name="city" size="1"  id="city" class="select">
              <option value="0000" selected="selected">Indicate city</option>
              <option value="0803">Lisbon</option>
              <option value="0201">Porto</option>
</select> 
```

我需要的是：将值（0803）从一个 html 页面表单传递到 URL 中的第二个 html 页面。并在第二个 html 页面的输入字段中写入标签（里斯本）。我需要计算值和标签，以便向用户显示他在第一页中选择的内容。

有人能帮我吗？

谢谢

# jsrender - JsRender 未按预期呈现

> ID：12509320
> 
> 赞同：1
> 
> 时间：2012-09-20T09:00:59.293
> 
> 标签：jsrender

这是我的模板；

```
<script id="DepartmentTemplate" type="text/x-jquery-tmpl">
        {{ for BusinessUnitName }}
            <li>{{:#data}}</li>
        {{/for }}
    </script> 
```

这是我发送数据的地方；

```
RenderDepartments = function (data) {
            $('#departmentList').empty();
            $('#departmentList').html($('#DepartmentTemplate').render($.parseJSON(data)));
        }; 
```

这就是我放置数据的地方；

```
<ul id="departmentList"><%: Html.DisplayFor(model => model.AdditionalDepartmentList) %></ul> 
```

这是接收到函数数据参数中的数据；

```
{\"BusinessUnitName\":[\"Design and Build (Technical)\",\"Architectual Design\",\"ICT\",\"Mechanical & Electrical \",\"Safety Management\"]} 
```

我不知道是否需要使用 jquery $.parseJson，但无论哪种方式，数据都无法正确呈现。使用 $.parseJson 它呈现为；

```
{{ for BusinessUnitName }} 
•[object Object]
 {{/for }} 
```

没有它呈现为

```
{{ for BusinessUnitName }} 
•{"BusinessUnitName":["Architectual Design","ICT","Mechanical & Electrical ","Safety Management","Marketing"]}
 {{/for }} 
```

所以在屏幕上我看到了一些模板定义，而不是一个列表。我该如何解决？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T15:29:30.250

问题出在空格中，删除它们后，代码按预期工作：

```
<script id="DepartmentTemplate" type="text/x-jquery-tmpl">
    {{for BusinessUnitName}}
         <li>{{:#data}}</li>
    {{/for}}
</script> 
```

# java - 从包含在同一 Java 应用程序中的 Jar 库中读取 Java 应用程序文件

> ID：12509321
> 
> 赞同：0
> 
> 时间：2012-09-20T09:01:00.090
> 
> 标签：java, file, jar, external

我创建了一个 Jar 库，它的初始化、功能、特性等都应该自定义。问题是我希望使用外部 XML 文件执行此自定义，因此 Jar 库读取该文件并相应地进行初始化。场景如下：

我有一个包含 Jar 库和 config.xml 文件的 Java 应用程序。如何让 Jar 库读取 config.xml 文件？为了更好地理解的图像：

[图 http://imageshack.us/a/img826/1888/readxmlfromjar.png](http://imageshack.us/a/img826/1888/readxmlfromjar.png)

我一直在寻找几个小时，但我发现的只是如何使用资源方法读取同一个 jar 文件中的文件。这完全可以做到吗？如果没有，有什么好的选择吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T09:07:25.047

您可以使用 java.util.zip 包中的 zip 实用程序[http://docs.oracle.com/javase/6/docs/api/java/util/zip/package-summary.html](http://docs.oracle.com/javase/6/docs/api/java/util/zip/package-summary.html)

像这里[读取 Zip 存档中的文件并将其内容放入 Android 中的字符串](https://stackoverflow.com/questions/6765439/read-a-file-inside-a-zip-archive-and-put-its-content-into-a-string-in-android)

# blackberry - 使用 Blackberry net_rim_bbapi_adv_app.jar 文件预验证错误

> ID：12509323
> 
> 赞同：1
> 
> 时间：2012-09-20T09:01:07.123
> 
> 标签：blackberry, java-me

我创建了一个显示广告的简单应用程序。我使用了 BlackBerry 开发指南“[创建显示广告的 BlackBerry 应用程序](http://docs.blackberry.com/en/developers/deliverables/40306/Creating_a_BB_app_that_displays_an_ad_1176551_11.jsp)”。我按照所有步骤操作，但在 BlackBerry 9900 模拟器上出现 NoClassDefFound 错误。我已经从`developer.blackberry.com/appworld/advertising`

为此，我使用了 preverify.exe 来检查 jar 文件是否与 net_rim_api.jar 兼容：

在我的 CMD 上：

> preverify -classpath "D:\Eclipse\plugins\net.rim.ejde.componentpack7.1.0_7.1.0.10\com ponents\lib\net_rim_api" "net_rim_bbapi_adv_app.jar" "D:\Eclipse\plugins\net.rim. ejde.componentpack7.1.0_7.1.0.10\components\bin\output"

我越来越这样了，我该怎么办？

> 错误预验证类 net.rimlib.blackberry.api.advertising.app.a java/lang/NoClassDefFoundError: java/lang/Thread

我已经从`developer.blackberry.com/appworld/advertising`

这是我的代码：

```
 import net.rim.device.api.ui.UiApplication;
        import net.rim.device.api.ui.container.MainScreen;
        import net.rimlib.blackberry.api.advertising.app.Banner;

        public class AdDemo extends UiApplication{
           public static void main(String[] args)
           {
              AdDemo theApp = new AdDemo();
              theApp.enterEventDispatcher();
           }

           public AdDemo()
           {
              pushScreen(new AdDemoScreen());
           }

        }

        class AdDemoScreen extends MainScreen{

           public AdDemoScreen()
           {
               Banner bannerAd = new Banner(16741, null);
               bannerAd.setMMASize(Banner.MMA_SIZE_EXTRA_LARGE);            
               add(bannerAd);
           }

        } 
```

我该如何克服这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-10T18:45:59.013

将添加到您的黑莓应用程序

您可以检查以下代码：

```
import net.rim.device.api.system.Bitmap;
import net.rim.device.api.ui.Field;
import net.rim.device.api.ui.Manager;
import net.rim.device.api.ui.component.Dialog;
import net.rim.device.api.ui.container.HorizontalFieldManager;
import net.rim.device.api.ui.container.MainScreen;
import net.rim.device.api.ui.container.VerticalFieldManager;
import net.rim.device.api.ui.UiApplication;
import net.rimlib.blackberry.api.advertising.app.Banner;
public class AdDemo extends UiApplication {
 public static void main(String[] args) {
  AdDemo theApp = new AdDemo();
  theApp.enterEventDispatcher();
 }
 public AdDemo() {
  pushScreen(new AdDemoScreen());
 }
}
class AdDemoScreen extends MainScreen {
 final Banner bannerAd;
 public AdDemoScreen() {
  Bitmap bit = Bitmap.getBitmapResource("BannerAd.png");
   bannerAd = new Banner(85983, null,60000 , bit);  bannerAd.setMMASize(Banner.MMA_SIZE_EXTRA_EXTRA_LARGE);
  VerticalFieldManager vfm = new VerticalFieldManager(    Manager.NO_VERTICAL_SCROLL | Manager.NO_VERTICAL_SCROLLBAR
      | Field.USE_ALL_WIDTH);
  HorizontalFieldManager hfm = new HorizontalFieldManager(
    Field.FIELD_HCENTER | Field.FIELD_VCENTER);
  hfm.add(bannerAd);
  vfm.add(hfm);
  add(vfm);
  bannerAd.setFocus();
 } 
 protected boolean navigationClick(int status, int time) {
  if (bannerAd.isFocus()) {
   Dialog.alert("Hellloooo");
  }
  return true;
 }
} 
```

# objective-c - iOS6 - 社交框架 - SLComposeViewController 如何回退到 iOS5 的 TWTweetComposeViewController？

> ID：12509327
> 
> 赞同：20
> 
> 时间：2012-09-20T09:01:31.680
> 
> 标签：objective-c, twitter

我有一段 twitter 共享代码适用于 iOS6，但我需要该应用程序也能很好地回退到 iOS5...

它看起来像这样：

```
- (void) shareOnTwitter
{
    if([SLComposeViewController instanceMethodForSelector:@selector(isAvailableForServiceType)] != nil)
    {
        if ([SLComposeViewController isAvailableForServiceType:SLServiceTypeTwitter])
        {
            NSLog(@"twitter available");
            SLComposeViewController *composeViewController = [SLComposeViewController composeViewControllerForServiceType:SLServiceTypeTwitter];
            [composeViewController setInitialText:self.sharingText];
            [self.sharingController presentViewController:composeViewController animated:YES completion:nil];
        }
        else
        {
            NSLog(@"twitter not available!");
        }
    }
    else
    {
        // SLComposeViewController not available, this is most likely <iOS6, what to do here?
    }
} 
```

那么，我如何在 iOS5 中很好地回退（我假设我需要 TWTweetComposeViewController），以便我也可以在 iOS5 中使用本机 twitter？

编辑：最后我仍然懒得回退到 TWTweetComposeViewController 所以我决定简单地回退到这个顺序：iOS6 原生推文 -> 安装的推特应用程序 -> 网址。这是我整理的功能，希望对某人有所帮助：

```
+(BOOL)isSocialFrameworkAvailable
{
     // whether the iOS6 Social framework is available?
    return NSClassFromString(@"SLComposeViewController") != nil;
}

- (void) shareOnTwitterWithText:(NSString*)text andURL:(NSString*)url andImageName:(NSString*)imageName
{
    // prepare the message to be shared
    NSString *combineMessage = [NSString stringWithFormat:@"%@ %@", text, url];
    NSString *escapedMessage = [combineMessage stringByAddingPercentEscapesUsingEncoding:NSASCIIStringEncoding];
    NSString *appURL = [NSString stringWithFormat:@"twitter://post?message=%@", escapedMessage];

    if([SocialManager isSocialFrameworkAvailable] && [SLComposeViewController isAvailableForServiceType:SLServiceTypeTwitter])
    {
        // user has setup the iOS6 twitter account

        SLComposeViewController *composeViewController = [SLComposeViewController composeViewControllerForServiceType:SLServiceTypeTwitter];
        [composeViewController setInitialText:text];
        if([UIImage imageNamed:imageName])
        {
            [composeViewController addImage:[UIImage imageNamed:imageName]];
        }
        if(url)
        {
            [composeViewController addURL:[NSURL URLWithString:url]];
        }
        [self.sharingController presentViewController:composeViewController animated:YES completion:nil];
    }
    else
    {
        // else, we have to fallback to app or browser
        if([[UIApplication sharedApplication] canOpenURL:[NSURL URLWithString:appURL]])
        {
            // twitter app available!
            [[UIApplication sharedApplication] openURL:[NSURL URLWithString:appURL]];
        }
        else
        {
            // worse come to worse, open twitter page in browser
            NSString *web = [NSString stringWithFormat:@"https://twitter.com/intent/tweet?text=%@", escapedMessage];
            [[UIApplication sharedApplication] openURL:[NSURL URLWithString:web]];
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-09-20T13:46:59.373

您需要弱链接 Twitter 和 Social 框架，并检查您的代码是否有可用的框架。弱链接是这样完成的：

*   在 XCode 中点击你的项目，选择你的 Target，Build Phases，然后 Link Binary with Libraries
*   如果您想在 iOS 5.x 或更早版本上运行此应用，请确保将 Social.framework 设置为 Optional
*   如果您想在 iOS 4.x 或更早版本上运行它，请确保 Twitter.framework 设置为 Optional

我喜欢创建简单的类函数来确定哪些框架可用。这可能看起来像这样：

```
+(BOOL)isTwitterAvailable {
   return NSClassFromString(@"TWTweetComposeViewController") != nil;
}

+(BOOL)isSocialAvailable {
    return NSClassFromString(@"SLComposeViewController") != nil;
} 
```

您的“tweet”代码可能如下所示：

```
if ([SomeClass isSocialAvailable]) {
   // code to tweet with SLComposeViewController
} else if ([SomeClass isTwitterAvailable]) {
   // code to tweet with TWTweetComposeViewController
} else {
   // Twitter not available, or open a url like https://twitter.com/intent/tweet?text=tweet%20text
} 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-11-08T23:24:04.337

不确定这些运行时操作有多昂贵，但这样做并没有什么坏处，因为在应用程序运行时这种状态发生变化的可能性为零：

```
 + (BOOL)isTwitterAvailable
{
    static BOOL available;
    static dispatch_once_t onceToken;
    dispatch_once(&onceToken, ^{
        available = NSClassFromString(@"TWTweetComposeViewController") != nil;        
    });
    return available;
}
+ (BOOL)isSocialAvailable
{
    static BOOL available;
    static dispatch_once_t onceToken;
    dispatch_once(&onceToken, ^{
        available = NSClassFromString(@"SLComposeViewController") != nil;        
    });
    return available;
} 
```

# android - ViewPager & ViewPagerIndicator 不显示任何内容

> ID：12509332
> 
> 赞同：4
> 
> 时间：2012-09-20T09:02:20.133
> 
> 标签：android, android-layout, android-viewpager, viewpagerindicator

我的应用程序实际上有问题，我的 ViewPager 和 ViewPagerIndicator ( [http://viewpagerindicator.com/](http://viewpagerindicator.com/) ) 没有显示任何内容，我不明白为什么。我多次检查了所有内容（正确设置适配器，在 instantiateItem 中添加视图，在 getCount() 中返回合适的大小，...），尝试了一些事情（更改 xml 中的布局参数，重新编写 MyPagerAdapter 类），甚至在谷歌和这里寻找类似的问题，但没有任何工作/不想要我的问题。

我也有一个沼泽，不知道是否有链接，但是我的 PagerAdapter 中的 instantiateItem 方法只被调用了 2 次，而 getCount() 很好地返回了 3。

我真的不知道从哪里来，如果有人有想法，我会很高兴地接受它：

OnCreate（包含 ViewPager 和 ViewPagerIndicator 的 Activity）：

```
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_infos_vehicle);

    title = (TextView) findViewById(R.id.title);

    ll = (LinearLayout) findViewById(R.id.mygallery);

    filenames = new ArrayList<String>();

    [...]

    MyPagerAdapter adapter = new MyPagerAdapter(getResources().getStringArray(R.array.infos_vehicle));

    ViewPager pager = (ViewPager) findViewById(R.id.pager);
    pager.setAdapter(adapter);

    TitlePageIndicator indicator = (TitlePageIndicator) findViewById(R.id.titles_pager);
    indicator.setFooterIndicatorStyle(IndicatorStyle.Triangle);
    indicator.setViewPager(pager);

    [...]
} 
```

MyPagerAdapter 类（第三种情况是为了进行更明显的测试，看看是不是我的 fillGeneral 或 fillEquipments 方法搞砸了）：

私有类 MyPagerAdapter 扩展 PagerAdapter {

```
private final String[] TITLES;

public MyPagerAdapter(String[] titles) {
    TITLES = titles;
}

    @Override
    public int getCount() {
        return (TITLES.length);
    }

    @Override
    public Object instantiateItem(View collection, int position) {
        LayoutInflater inflater = (LayoutInflater) getApplicationContext().getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        View v = null;

        switch (position) {
        case (0):
            v = inflater.inflate(R.layout.linear_layout, null);
            fillGeneral((ViewGroup) v.findViewById(R.id.layout));
            break;
        case (1):
            v = inflater.inflate(R.layout.linear_layout, null);
            fillEquipments((ViewGroup) v.findViewById(R.id.layout));
            break;
        case (2):
            v = new ImageView(getApplicationContext());
            ((ImageView) v).setImageDrawable(getApplicationContext().getResources().getDrawable(android.R.drawable.alert_dark_frame));
            break;
        }
        ((ViewPager) collection).addView(v);
        return (v);
    }

    @Override
    public CharSequence getPageTitle(int position) {
        return (TITLES[position]);  
    }

    @Override
    public void destroyItem(View collection, int position, Object view) {
        ((ViewPager) collection).removeView((View) view);
    }

    @Override
    public boolean isViewFromObject(View arg0, Object arg1) {
        return (arg0.equals(arg1));
    }

    @Override
    public Parcelable saveState() {
        return null;
    } 
```

}

和活动 xml ：

```
<ScrollView xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" >
    <RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
        xmlns:tools="http://schemas.android.com/tools"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content" >

        <TextView
            android:id="@+id/title"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentTop="true"
            android:layout_centerHorizontal="true"
            android:layout_marginTop="10dp"
            android:text="@string/hello_world"
            android:textAppearance="?android:attr/textAppearanceLarge"
            android:textColor="@color/first_color" />

        <Button
            android:id="@+id/try_vehicle"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_below="@+id/title"
            android:layout_centerHorizontal="true"
            android:layout_marginTop="40dp"
            android:onClick="tryingAlert"
            android:text="@string/try_vehicle" />

        <Button
            android:id="@+id/ask_informations"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_below="@+id/try_vehicle"
            android:layout_centerHorizontal="true"
            android:layout_marginTop="20dp"
            android:onClick="informationsAlert"
            android:text="@string/ask_informations" />

        <Button
            android:id="@+id/remove_selection"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:onClick="removeFromSelection"
            android:layout_below="@+id/ask_informations"
            android:layout_centerHorizontal="true"
            android:layout_marginTop="20dp"
            android:text="@string/remove_selection" />

        <HorizontalScrollView
            android:id="@+id/scroll"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:layout_alignParentLeft="true"
            android:layout_below="@+id/remove_selection"
            android:layout_marginTop="18dp"
            android:scrollbars="none" >

            <LinearLayout
                android:id="@+id/mygallery"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:orientation="horizontal" >
            </LinearLayout>

        </HorizontalScrollView>

        <com.viewpagerindicator.TitlePageIndicator
            android:id="@+id/titles_pager"
            android:layout_below="@id/scroll"
            android:layout_height="wrap_content"
            android:layout_width="fill_parent" />

        <android.support.v4.view.ViewPager
            android:id="@+id/pager"
            android:layout_width="match_parent"
            android:layout_height="match_parent"
            android:layout_below="@id/titles_pager" />

    </RelativeLayout>
</ScrollView> 
```

它给了我什么（活动到此结束，如图所示，ViewPagerIndicator 不显示任何内容）：http://i.imgur.com/vRa1O.jpg [（](http://i.imgur.com/vRa1O.jpg)外部链接，无法发布图片抱歉！）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-24T09:12:35.527

好的，所以最后没有任何问题，只是我犯了错误。

如前所述，ViewPagerIndicator 只是白底白字，所以我看不到它，现在很好。

对于 ViewPager，它就在我的 ScrollView 的最后，这意味着它没有可用的“真实”屏幕空间，因此`android:layout_height="match_parent"`无效。这似乎是 ViewPager 的一个常见问题，我会看看我能做些什么来适应它。

无论如何感谢您的帮助，我希望这篇文章对某人有用！

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-05-05T09:24:10.537

我遇到了同样的问题，我看不到选项卡指示器。所以，问题是我没有`style.xml`从项目中复制项目中的文件`ViewPagerIndicator`。希望这可以帮助将来的某个人。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-02-28T19:39:01.403

面对同样的问题，并想出了一个解决方案。也许有点尖峰，但它有效）首先，在 xml 文件集中

```
<android.support.v4.view.ViewPager
    android:id="@+id/pager"
    android:layout_width="match_parent"
    android:layout_height="fill_parent"
    android:layout_below="@+id/tabs"/> 
```

在 ViewPager 中创建自定义侦听器以检查片段大小后

```
public interface ViewPagerListener {
    void onChange(int height);
} 
```

将其实施到您的片段

```
public class FriendProfileTabstFragment extends AbstractFragment implements ViewPagerListener
....
pager = (ViewPager) fragmentView.findViewById(R.id.pager);
adapter = new TabsPagerAdapter(getChildFragmentManager(),user,this); 
```

并实现 onChange 方法，您可以在其中设置布局高度

```
@Override
public void onChange(int height) {
    RelativeLayout.LayoutParams params = (RelativeLayout.LayoutParams) pager.getLayoutParams();
    params.height = height;
    pager.setLayoutParams(params);
} 
```

在您的子片段中，您可以获得 layout_height

```
View fragmentView = inflater.inflate(R.layout.tab_without_list_fragment, null);
userRecordsList = (LinearLayout) fragmentView.findViewById(R.id.user_records_list); 
```

填充视图时，获取布局高度

```
userRecordsList.measure(userRecordsList.getWidth(),userRecordsList.getHeight());
int height = userRecordsList.getMeasuredHeight();
listener.onChange(height); 
```

希望，这有帮助。如果您找到更好的解决方案，请纠正我。

# ruby-on-rails - 如何将 HP 质量中心与导轨集成？

> ID：12509334
> 
> 赞同：0
> 
> 时间：2012-09-20T09:02:27.120
> 
> 标签：ruby-on-rails, ruby, hp-quality-center

我想在 linux 操作系统上将 HP qc 与我的 rails 应用程序集成，有人在任何 api 或 ruby​​ gem 上工作吗？

提前致谢。

阿努拉格·萨克森。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T16:58:55.363

签出这篇文章：

[Rails Active资源集成](https://stackoverflow.com/questions/9221260/consume-non-rails-rest-api-with-activeresource/9423272#9423272)

此后，我将应用程序控制器重写为以下内容：

```
class ApplicationController < ActionController::Base
  protect_from_forgery
  helper_method :Sessions

  $HPQC_HOST = "http://hpqc.example.com:8080"
  $HPQC_REST_URL = "#{$HPQC_HOST}/qcbin/rest/domains/<your_domain>/projects/<your_project>"
  $HPQC_LOGIN_URL = "#{$HPQC_HOST}/qcbin/authentication-point/authenticate"
  $HPQC_LOGOUT_URL = "#{$HPQC_HOST}/qcbin/authentication-point/logout"

  def allow_cross_domain_access
    response.headers["Access-Control-Allow-Origin"] = "*"
    response.headers["Access-Control-Allow-Methods"] = "*"
    response.headers["Access-Control-Allow-Headers"] = "x-requested-with"
  end

  def getAuthenticatedCurl
    @conn = Curl::Easy.new($HPQC_LOGIN_URL)
    @conn.verbose = true
    @conn.http_auth_types = :basic
    @conn.userpwd = '<your_username>:<your_password>'
    @conn.enable_cookies = true
    @conn.cookiejar = 'cookies.txt'
    @conn.perform #creates the first cookie instance, which allows subsequent calls to the HPQC API
    #return _conn
    puts "connected...."
  end
end 
```

简单地说，这些方法就是您的 RoR 应用程序的 ApplicationController，然后从您的每个控制器调用它们以访问 HPQC。然后构建一个 XML 请求并使用 Curl::Easy Gem（即@conn.post_body）将请求发布到 HPQC。

我计划构建一个 HPQC Gem 来配置和初始化 HPQC 请求，但这需要我一点时间！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T07:08:42.657

我想 QC OTA 库有一些限制，阻止了 ROR 的直接实现。但似乎有一种解决方法。查看下面的链接。

[Rails 应用程序与 HPQC（HP 质量中心）的集成](https://stackoverflow.com/questions/9872668/rails-app-integration-with-hpqc-hp-quality-centre)

# regex - RewriteRule 正则表达式问题 - 如何修复 `/apis` 返回 index.php?url=apis

> ID：12509335
> 
> 赞同：1
> 
> 时间：2012-09-20T09:02:29.417
> 
> 标签：regex, apache, mod-rewrite

当前`RewriteRule`失败`/apis`（必须返回 index.php?url=apis）

```
RewriteRule ^api\/?([^\/]*)$ index.php?api&url=$1 [QSA,L]
RewriteRule ^([^.]*)$ index.php?url=$1 [QSA,L] 
```

有效的：

*   /api 返回 index.php?api&url=`[empty]`
*   /api/user 返回 index.php?api&url=user

失败的：

*   /apis 返回 index.php?api&url=s，但必须返回 index.php?url=apis

**更新：** if之后的任何字符`/api`不以斜杠开头`/`必须返回 index.php?url= `[any character]`- /apirf8ty76 必须返回 index.php?url=apirf8ty76

/api 仍然必须返回 index.php?api&url=`[empty]`和 /api/user 返回 index.php?api&url=user

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T09:13:42.250

在您的第一个正则表达式中使用负前瞻，如下所示：

```
RewriteRule ^api(?!s)\/?([^\/]*)$ index.php?api&url=$1 
```

那应该做你想做的事。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T12:27:19.787

将您的条件更改为此以使其正常工作：

```
RewriteRule ^api(?:/([^/]*))?$ index.php?api&url=$1 [QSA,L,NC]

RewriteRule ^([^.]*)$ index.php?url=$1 [QSA,L] 
```

# notepad++ - 复制并粘贴到 NotePad++ 并保留颜色/样式

> ID：12509340
> 
> 赞同：2
> 
> 时间：2012-09-20T09:02:49.650
> 
> 标签：notepad++

有谁知道如何将一些代码复制并粘贴到 Notepad++ 中并保留粘贴文本的所有样式和颜色？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-20T09:03:48.130

纯文本没有格式。

你所要求的是不可能的。

如果您的意思是您在一个 IDE 中看到颜色/样式，那是因为 IDE“理解”格式并以颜色显示您的文本。这并不意味着文本本身具有关联的颜色。

Notepad++ 具有多种语言/格式的语法高亮显示 - 从`Language`菜单中选择适当的一种。

某些文档格式确实有颜色/样式（例如：RTF、HTML）。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2014-03-04T03:29:30.337

作为赏金添加的问题的答案与最初提出的问题不同。我在这里记录一个答案以获得赏金的答案

> 是否可以在保留语法突出显示的同时从记事本++复制？是否可以使用插件来做到这一点？

是的，这是可能的。[SuperUser](https://superuser.com/a/39600/22380)上提供了一个很好的答案，说明如何做到这一点。我在下面引用了它。

> 转到插件-> NppExport。从那里，您可以考虑三个选项：
> 
> 导出为 RTF 导出为 HTML 将所有格式复制到剪贴板 从最后一个开始 - “将所有格式复制到剪贴板” - 这会将具有突出显示语法的整个文件复制到剪贴板。单击它后，打开 Microsoft Word，然后点击粘贴！您应该会看到精美的语法高亮代码。如果出现问题，那么您可以尝试其他选项之一（导出到 RTF/HTML），尽管我从来没有遇到过剪贴板方法的问题。

此外，这是在此[答案](https://stackoverflow.com/a/5106990/189134)的屏幕截图中捕获的。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-03-04T02:11:52.270

您无法保留粘贴到 notepad++ 中的代码的颜色。缩进和格式应该很好地复制。

如果要复制和粘贴代码并具有完全相同的颜色和样式，则需要在一个 IDE 或程序中复制和粘贴。例如，从 Visual Studios 中的一个文件复制并粘贴到 Visual Studios 中的另一个文件。或者花时间在 Notepad++ 中制作自己的颜色风格。存在这样做的选项。

# mysql - MySql 查询 - 具有计数的多个表的数学运算

> ID：12509342
> 
> 赞同：1
> 
> 时间：2012-09-20T09:02:55.097
> 
> 标签：mysql, sql, sum

我有 2 张桌子，一张是“已售产品”列表，另一张是“产品价格”列表。

```
**SALES**
product_1
product_1
product_1
product_2

**PRICES**
Product_1 | 10
product_2 | 20 
```

我需要计算每种产品并将其乘以它的成本。

查询应给出以下格式的结果：

```
NAME_________|______TOTAL

PRODUCT1_____|______30
PRODUCT2_____|______20 
```

任何帮助是极大的赞赏！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-20T09:04:38.153

使用它们的链接列（*特别是外键*）连接两个表，使用聚合函数`SUM`并按它们的名称对它们进行分组。

```
SELECT  a.name, SUM(b.price) as TotalPrice
FROM    sales a
        INNER JOIN prices b
            on a.name = b.name
GROUP BY a.name 
```

# cuda - 带有 READ 和 WRITE 的纹理内存

> ID：12509346
> 
> 赞同：4
> 
> 时间：2012-09-20T09:03:08.427
> 
> 标签：cuda

我正在开发一个 CUDA 应用程序，其中内核必须多次进入全局内存。此内存由所有 CTA 随机访问（无局部性，因此无法使用共享内存）。我需要优化它。听说纹理内存可以缓解这个问题，但是内核可以读写纹理内存吗？一维纹理记忆？2D纹理记忆？还有 CUDA 数组呢？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-20T09:44:14.290

CUDA 纹理是只读的。纹理读取被缓存。所以性能增益是概率性的。

CUDA Toolkit 3.1 及更高版本还具有称为表面的可写纹理，但它们仅适用于计算能力 >=2.0 的设备。表面就像纹理，但优点是它们也可以由内核编写。

曲面只能`cudaArray`使用 flag 绑定到创建`cudaArraySurfaceLoadStore`。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2015-09-01T08:22:43.533

这是 sgarizvi 的回答的后续。

如今，具有计算能力的卡比在提出这个问题时`>=2.0`更为普遍。`2012`

下面是一个关于如何使用**CUDA 表面内存**写入**纹理**的最小示例。

```
#include <stdio.h>

#include "TimingGPU.cuh"
#include "Utilities.cuh"

surface<void, cudaSurfaceType1D> surfD;

/*******************/
/* KERNEL FUNCTION */
/*******************/
__global__ void SurfaceMemoryWrite(const int N) {

    int tid = blockIdx.x * blockDim.x + threadIdx.x;

    surf1Dwrite((float)tid, surfD, tid * sizeof(float), cudaBoundaryModeTrap);
}

/********/
/* MAIN */
/********/
int main() {

    const int N = 10;

    cudaChannelFormatDesc channelDesc = cudaCreateChannelDesc<float>();
    //Alternatively
    //cudaChannelFormatDesc channelDesc = cudaCreateChannelDesc(32, 0, 0, 0, cudaChannelFormatKindFloat);

    cudaArray *d_arr;   gpuErrchk(cudaMallocArray(&d_arr, &channelDesc, N, 1, cudaArraySurfaceLoadStore));
    gpuErrchk(cudaBindSurfaceToArray(surfD, d_arr));

    SurfaceMemoryWrite<<<1, N>>>(N);

    float *h_arr = new float[N];
    gpuErrchk(cudaMemcpyFromArray(h_arr, d_arr, 0, 0, N * sizeof(float), cudaMemcpyDeviceToHost));

    for (int i=0; i<N; i++) printf("h_arr[%i] = %f\n", i, h_arr[i]);

    return 0;
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-09-03T15:04:55.480

这是法扎德回答的后续。

Farzad 的观点在 CUDA C 编程指南中得到了强调：

> 纹理和表面内存被缓存（请参阅设备内存访问），并且在同一个内核调用中，缓存在全局内存写入和表面内存写入方面并不保持一致，因此任何纹理获取或表面读取到一个地址在同一个内核调用中通过全局写入或表面写入写入会返回未定义的数据。换句话说，线程可以安全地读取某个纹理或表面内存位置，前提是该内存位置已被先前的内核调用或内存副本更新，但如果它先前已由同一个线程或来自同一线程的另一个线程更新，则不能内核调用。

这意味着可以修改纹理绑定到的全局内存位置，但这不能发生在操作纹理提取的同一个内核中。另一方面，由于*纹理缓存在内核启动时被清除*，因此上述意义上的“写入纹理”是可能的，请参见[cuda kernel for add(a,b,c) using texture objects for a & b -对于“增量操作”添加（a，b，a）是否正常工作？](https://stackoverflow.com/questions/26422082/cuda-kernel-for-adda-b-c-using-texture-objects-for-a-b-works-correctly-for).

下面，我将提供一个示例，其中修改了纹理绑定到的全局内存位置。在这个例子中，我通过以下方式调用 CUDA 内核

```
median_filter_periodic_boundary<<<iDivUp(N, BLOCKSIZE), BLOCKSIZE>>>(d_out, N);
...
square<<<iDivUp(N, BLOCKSIZE), BLOCKSIZE>>>(d_vec, pitch, N);
...
median_filter_periodic_boundary<<<iDivUp(N, BLOCKSIZE), BLOCKSIZE>>>(d_out, N); 
```

在`median_filter_periodic_boundary`内核中，进行纹理提取操作，而在`square`内核中，修改纹理绑定到的全局内存位置。

这是代码：

```
#include <stdio.h>

#include "TimingGPU.cuh"
#include "Utilities.cuh"

texture<float, 1, cudaReadModeElementType> signal_texture;

#define BLOCKSIZE 32

/*************************************************/
/* KERNEL FUNCTION FOR MEDIAN FILTER CALCULATION */
/*************************************************/
__global__ void median_filter_periodic_boundary(float * __restrict__ d_out, const unsigned int N){

    int tid = threadIdx.x + blockIdx.x * blockDim.x;

    if (tid < N) {

        float signal_center = tex1D(signal_texture, (float)(tid + 0.5 - 0) / (float)N);
        float signal_before = tex1D(signal_texture, (float)(tid + 0.5 - 1) / (float)N);
        float signal_after  = tex1D(signal_texture, (float)(tid + 0.5 + 1) / (float)N);

        d_out[tid] = (signal_center + signal_before + signal_after) / 3.f;

    }
}

    /*************************************************/
    /* KERNEL FUNCTION FOR MEDIAN FILTER CALCULATION */
    /*************************************************/
__global__ void square(float * __restrict__ d_vec, const size_t pitch, const unsigned int N){

    unsigned int tid = threadIdx.x + blockIdx.x * blockDim.x;

    if (tid < N) d_vec[tid] = 2.f * tid;

}

/********/
/* MAIN */
/********/
int main() {

    const int N = 10;                                                                                

    // --- Input/output host array declaration and initialization
    float *h_vec = (float *)malloc(N * sizeof(float));
    for (int i = 0; i < N; i++) h_vec[i] = (float)i;

    // --- Input/output host and device array vectors
    size_t pitch;
    float *d_vec;   gpuErrchk(cudaMallocPitch(&d_vec, &pitch, N * sizeof(float), 1));
    printf("pitch = %i\n", pitch);
    float *d_out;   gpuErrchk(cudaMalloc(&d_out, N * sizeof(float)));
    gpuErrchk(cudaMemcpy(d_vec, h_vec, N * sizeof(float), cudaMemcpyHostToDevice));

    // --- CUDA texture memory binding and properties definition
    cudaChannelFormatDesc channelDesc = cudaCreateChannelDesc<float>();
    //Alternatively
    //cudaChannelFormatDesc channelDesc = cudaCreateChannelDesc(32, 0, 0, 0, cudaChannelFormatKindFloat);
    size_t texture_offset = 0;
    gpuErrchk(cudaBindTexture2D(&texture_offset, signal_texture, d_vec, channelDesc, N, 1, pitch)); 
    signal_texture.normalized = true; 
    signal_texture.addressMode[0] = cudaAddressModeWrap;

    // --- Median filter kernel execution
    median_filter_periodic_boundary<<<iDivUp(N, BLOCKSIZE), BLOCKSIZE>>>(d_out, N);
    gpuErrchk(cudaPeekAtLastError());
    gpuErrchk(cudaDeviceSynchronize());

    gpuErrchk(cudaMemcpy(h_vec, d_out, N * sizeof(float), cudaMemcpyDeviceToHost));
    printf("\n\nFirst filtering\n");
    for (int i=0; i<N; i++) printf("h_vec[%i] = %f\n", i, h_vec[i]);

    // --- Square kernel execution
    square<<<iDivUp(N, BLOCKSIZE), BLOCKSIZE>>>(d_vec, pitch, N);
    gpuErrchk(cudaPeekAtLastError());
    gpuErrchk(cudaDeviceSynchronize());

    gpuErrchk(cudaMemcpy(h_vec, d_vec, N * sizeof(float), cudaMemcpyDeviceToHost));
    printf("\n\nSquaring\n");
    for (int i=0; i<N; i++) printf("h_vec[%i] = %f\n", i, h_vec[i]);

    // --- Median filter kernel execution
    median_filter_periodic_boundary<<<iDivUp(N, BLOCKSIZE), BLOCKSIZE>>>(d_out, N);
    gpuErrchk(cudaPeekAtLastError());
    gpuErrchk(cudaDeviceSynchronize());

    printf("\n\nSecond filtering\n");
    gpuErrchk(cudaMemcpy(h_vec, d_out, N * sizeof(float), cudaMemcpyDeviceToHost));
    for (int i=0; i<N; i++) printf("h_vec[%i] = %f\n", i, h_vec[i]);

    printf("Test finished\n");

    return 0;
} 
```

请注意以下事项：

1.  我没有将纹理绑定到 a `cudaArray`，因为`cudaArray`s 不能从内核中修改；
2.  我没有将`cudaMalloc`纹理绑定到 ed 数组，因为绑定到ed 数组的纹理`cudaMalloc`只能被获取，`tex1Dfetch`并且`tex1Dfetch`不能`cudaAddressModeWrap`保证信号在其边界之外的周期性扩展的寻址模式；
3.  我将纹理绑定到`cudaMallocPitch`ed 数组，因为这样可以通过 获取纹理`tex1D`，这允许`cudaAddressModeWrap`寻址模式；
4.  我正在使用归一化坐标，因为只有那些才能启用`cudaAddressModeWrap`寻址模式。

我需要点和`#2`，因为我从正在编写的代码中提取了这个示例。`#3``#4`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-21T07:34:33.330

我建议将您的记忆声明为倾斜的线性记忆并将其与纹理绑定。我还没有尝试新的无绑定纹理。有人试过吗？

如前所述，纹理内存是通过缓存只读的。将其视为只读存储器。因此，重要的是要注意在内核本身内，您不要写入绑定到纹理的内存，因为它可能不会更新到纹理缓存。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-03-05T07:54:20.600

我遇到了这个问题，经过一番搜索，我发现[这个](https://devtalk.nvidia.com/default/topic/509197/cuda-programming-and-performance/is-texture-memory-read-only-is-texture-memory-in-fact-read-only-or-not-/post/3629941/#3629941)问题和[这个](https://devtalk.nvidia.com/default/topic/509197/cuda-programming-and-performance/is-texture-memory-read-only-is-texture-memory-in-fact-read-only-or-not-/post/3629942/#3629942)答案很有用。基本上纹理内存**是**全局内存。纹理内存是指可以与全局内存**读取**相关联的特殊缓存机制。所以内核**可以**操作绑定到纹理的全局内存。但正如它在[提供的链接](https://devtalk.nvidia.com/default/topic/509197/cuda-programming-and-performance/is-texture-memory-read-only-is-texture-memory-in-fact-read-only-or-not-/post/3629942/#3629942)中显示的那样，没有诸如`tex1D(ref, x) = 12.0`.

# iphone - 在 Xcode 4.5 中构建 AVFoundation.framework 时出现编译错误

> ID：12509352
> 
> 赞同：2
> 
> 时间：2012-09-20T09:03:21.117
> 
> 标签：iphone, xcode, avfoundation, xcode4.5

我今天升级了 XCode 4.5 并构建了我的项目。编译错误显示：

```
/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS6.0.sdk/System/Library/Frameworks/AVFoundation.framework/Headers/AVAudioMix.h:15:9:
'MediaToolbox/MTAudioProcessingTap.h' file not found 
```

即使我在项目设置-> 构建阶段添加 MediaToolbox，也会出现错误。

奇怪的事实是我创建了一个新项目并导入了 AVFoundation.framework。有用。

这是我的环境：

```
Mac OS X version: 10.7.4 
Xcode Version: 4.5 (4G182) 
gcc version 4.2.1 (Based on Apple Inc. build 5658) (LLVM build 2336.11.00)
GNU gdb 6.3.50-20050815 (Apple version gdb-1822) (Sun Aug  5 03:00:42 UTC 2012) 
```

我试过 [XCode 4.5 给我“SenTestingKit/SenTestKit.h”文件找不到，但适用于 4.4.1](https://stackoverflow.com/questions/12498868/xcode-4-5-giving-me-sentestingkit-sentestkit-h-file-not-found-but-works-on-4) 但它没有工作。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-21T01:45:34.353

在我仅填写 Targets->Build Settings->Search Paths->Framework Search Paths $(inherited) 或使其干净后，我已经成功构建。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T18:18:53.650

尝试删除这两个框架，然后将它们都添加回来，首先是 MediateToolbox。

# ios5 - 如何在屏幕层次结构中仅旋转一个屏幕

> ID：12509359
> 
> 赞同：3
> 
> 时间：2012-09-20T09:03:48.153
> 
> 标签：ios5, rotation

我的应用程序具有这样的层次结构：

```
UITabBarCOntroller
    |
    UINavigationController1
    |  |
    |  UITableViewController1
    |     |
    |     UIViewController1
    |        |
    |        UIViewController2
    |
    UINavigationController2
       |
       UITableViewController2
          |
          UIViewController3 
```

我只想旋转 UIViewController2 而其他 ViewControllers 仍然是 UIInterfaceOrientationPortrait。这个怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T10:03:08.207

只需将 UIViewController2 呈现为**模态**视图控制器。这样您就可以`UIViewController`独立于父`UIViewController`s 旋转。[您可以在此处](http://timneill.net/2010/09/modal-view-controller-example-part-1/)找到源代码示例。

# qt - 如何将 WebKit 集成到遗留的 Motif 应用程序中

> ID：12509362
> 
> 赞同：4
> 
> 时间：2012-09-20T09:03:52.800
> 
> 标签：qt, web-applications, dialog, webkit, motif

我们有一个庞大而复杂的遗留 Motif 应用程序，我们希望将 WebKit (http://trac.webkit.org/wiki) 集成到该应用程序中。我不知道 WebKit 的 Motif 端口（至少没有找到），但发现它可以与 Qt 一起使用，QWebKit 甚至可以很好地支持它（参见[http://doc.qt. digia.com/4.7/qtwebkit.html](http://doc.qt.digia.com/4.7/qtwebkit.html)）。Qt 可以通过 Qt Motif 扩展集成到 Motif（参见[http://docs.huihoo.com/qt/solutions/4/qtmotifextension/qtmotif-overview.html](http://docs.huihoo.com/qt/solutions/4/qtmotifextension/qtmotif-overview.html)）。

有没有人已经尝试过这个并发现它是一个可行的解决方案？或者有没有更好的方法来归档这个？

我们为什么要这样做的一些背景：应用程序将逐步更改为现代技术。它的一部分（许多对话框）将变成一个 Web 应用程序（可以是 JSF 或 GWT）。为了让这个对话框在旧 App 中仍然可用，想法是使用 Webkit 直接在 Motif App 中显示移植的对话框。

# java - 例外：Linux 中的“给定最终块未正确填充”，但它适用于 Windows

> ID：12509363
> 
> 赞同：10
> 
> 时间：2012-09-20T09:03:53.533
> 
> 标签：java, encryption

我的应用程序在 Windows 中工作，但在 Linux 中失败，但有`Given final block not properly padded`异常。

配置：

*   JDK版本：1.6
*   视窗：版本 7
*   Linux：CentOS 5.8 64位

我的代码如下：

```
import java.io.IOException;
import java.io.UnsupportedEncodingException;
import java.security.InvalidKeyException;
import java.security.Key;
import java.security.NoSuchAlgorithmException;
import java.security.SecureRandom;

import javax.crypto.BadPaddingException;
import javax.crypto.Cipher;
import javax.crypto.IllegalBlockSizeException;
import javax.crypto.KeyGenerator;
import javax.crypto.NoSuchPaddingException;

import sun.misc.BASE64Decoder;
import sun.misc.BASE64Encoder;

public class SecurityKey {
    private static Key key = null;
    private static String encode = "UTF-8";
    private static String cipherKey = "DES/ECB/PKCS5Padding";

    static  {
        try {
            KeyGenerator generator = KeyGenerator.getInstance("DES");
            String seedStr = "test";
            generator.init(new SecureRandom(seedStr.getBytes()));
            key = generator.generateKey();
        } catch(Exception e) {
        }
    }

    // SecurityKey.decodeKey("password")
    public static String decodeKey(String str) throws Exception  {
        if(str == null)
            return str;

        Cipher cipher = null;
        byte[] raw = null;
        BASE64Decoder decoder = new BASE64Decoder();
        String result = null;
        cipher = Cipher.getInstance(cipherKey);
        cipher.init(Cipher.DECRYPT_MODE, key);
        raw = decoder.decodeBuffer(str);
        byte[] stringBytes = null;
        stringBytes = cipher.doFinal(raw); // Exception!!!!
        result = new String(stringBytes, encode);

        return result;
    }
} 
```

在线：

```
 ciper.doFilnal(raw); 
```

抛出以下异常：

```
 javax.crypto.BadPaddingException: Given final block not properly padded 
```

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T20:45:18.150

答案在于`SecureRandom`特定运行时的播种可能不同。大多数时候你会得到`"SHA1PRNG"`，它不会立即播种。相反，您可以`setSeed()`在请求任何随机之前调用，在这种情况下，种子被用作熵的唯一来源。在这种情况下，您的密钥将始终相同。

问题是没有定义`SecureRandom`返回哪个。您可能会得到一个完全不同的、特定于平台的实现，但上述情况并不适用。如果另一个提供商优先，您可能无法获得其中一个 Sun 提供商。

然后是种子的问题。种子`seedStr`在调用`getBytes()`. 由于编码可能不同，种子可能不同，因此结果也会不同。

尝试使用 PBKDF2 等函数来代替密钥推导；关于如何进行，stackoverflow 上有足够的内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-09T06:21:12.917

如下：我不得不修改内容。

```
static{
    try {
    KeyGenerator generator = KeyGenerator.getInstance("DES");
    String seedStr = "test";
    SecureRandom random = SecureRandom.getInstance("SHA1PRNG");
    random.setSeed(seedStr.getBytes());
    generator.init(random);
    key = generator.generateKey();
} catch(Exception e) {
} 
```

}

有用！！谢谢！！！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-30T11:35:00.547

错误似乎是因为编码数据，BASE64Decoder 将返回 4 的倍数，而 Cipher 期望为 8 的倍数。

# jquery - HTML组合框出现后立即消失

> ID：12509367
> 
> 赞同：0
> 
> 时间：2012-09-20T09:04:01.647
> 
> 标签：jquery, html

我有一个看起来像这样的简单网页。

![在此处输入图像描述](../Images/ce8b83f0696abdfdc16ba32d83c588d6.png)

单击“加载”按钮时，它应该在组合框下显示一个小表单（该表单的 id 是`frmUpdateService`）。

问题是当我单击加载按钮时，它会显示表单，但出现后立即消失！

这是页面的 HTML 代码。

```
<html>
<head>
<link rel="stylesheet" type="text/css" href="stylesheets/styles.css" />
<script type="text/javascript" src="scripts/jquery-1.8.0.min.js"></script>
<script type="text/javascript" src="scripts/scripts.js"></script>
</head>
<body id="body_services">

<?php

include_once 'DatabaseHandler.php';
$db = DatabaseHandler::getInstance();

//loading taxi service names for updating combobox
$queryLoadSids = $db->prepare("SELECT * FROM taxi_services ORDER BY SID");
$queryLoadSids->execute();
$dropdown = "<select name='serviceID'>";
while ($row = $queryLoadSids->fetch(PDO::FETCH_ASSOC))
{
    $dropdown .= "\r\n<option value='{$row['SID']}'>{$row['Name']}</option>";
}
$dropdown .= "\r\n</select>";

?>

<?php

if(isset($_POST['btnload']))
{
    $param = $_POST['serviceID'];

    $queryLoadToUpdate = $db->prepare("SELECT * FROM taxi_services WHERE SID = :serviceID");
    $queryLoadToUpdate->bindParam(':serviceID', $param, PDO::PARAM_STR);
    $queryLoadToUpdate->execute();
    $results = $queryLoadToUpdate->fetchAll(PDO::FETCH_ASSOC);

    $loadedSID = $results["SID"];
    $loadedName = $results["Name"];
    $loadedCost = $results["Cost"];
    $loadedActive = $results["Active"];
}

?>

<div id="tasks">
    <ul>
        <li><a id="add" href="#">Add a new taxi service</a></li>
        <li><a id="update" href="#">Update a taxi service</a></li>
        <li><a id="delete" href="#">Delete a taxi service</a></li>
        <li><a id="view" href="#">View taxi services</a></li>
    </ul>
</div>

<form id="cmbServiceIDs" name="sids">
<table width="380" border="0">
  <tr>
    <td><label for="serviceId">Select the Service ID</label></td>
    <td><?php echo $dropdown; ?></td>
    <td><input id="load" type="submit" value="Load" name="btnload" /></td>
  </tr>
</table>
</form>

<form id="frmUpdateService" name="Update" action="" method="post">
<table width="300" border="0">
  <tr>
    <td><label for="sid">Service ID</label></td>
    <td><input type="text" name="sid" value="<?php echo $loadedSID; ?>" /></td>
  </tr>
  <tr>
    <td><label for="name">Name</label></td>
    <td><input type="text" name="name" value="<?php echo $loadedName; ?>" /></td>
  </tr>
  <tr>
    <td><label for="cost">Cost</label></td>
    <td><input type="text" name="cost" value="<?php echo $loadedCost; ?>" /></td>
  </tr>
  <tr>
    <td><label for="active">Active</label></td>
    <td><input type="checkbox" name="active" value="<? echo $loadedActive; ?>" <?php echo $loadedActive ? 'checked="checked"' : ''; ?> /></td>
  </tr>
  <tr>
    <td></td>
    <td><input type="reset" value="Cancel" /> <input type="submit" value="Update" name="update" /></td>
  </tr>
</table>
</form>

</body>
</html> 
```

我使用 jQuery 来显示/隐藏效果。

```
$(function()
{
    $("#frmUpdateService").hide();
    $("#cmbServiceIDs").hide();

    $("#update").click(function()
    {
        $("#cmbServiceIDs").slideDown("slow");
        $("#frmUpdateService").hide();
    });
    $("#load").click(function()
    {
        $("#frmUpdateService").fadeIn("slow");
    });
}); 
```

谁能解释为什么会发生这种情况以及如何纠正它？

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T09:07:55.777

该`#load`按钮执行您所要求的操作，然后继续提交页面，刷新所有内容。您应该使用普通按钮或某种可点击的 div，或者`preventDefault()`在按钮的 clickhandler 中使用`#load`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T09:08:53.827

问题是由提交按钮引起的，该按钮将页面发布到服务器，并重新加载响应（这会导致隐藏表单的行运行）。

要么改变这个

```
<input id="load" type="submit" value="Load" name="btnload" /> 
```

对此

```
<input id="load" type="button" value="Load" name="btnload" /> 
```

或将您的点击事件更改为以下内容：

```
$("#load").click(function(e)
{
    $("#frmUpdateService").fadeIn("slow");
    e.preventDefault();
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-20T09:12:51.517

是因为这两个说法：

```
$("#frmUpdateService").hide();
$("#cmbServiceIDs").hide(); 
```

他们在每个页面加载时执行。这可以通过 Ajax 很好地解决。

如果你不想使用完整的回发来解决这个问题，你应该确保正确的 html，包括可见和不可见的内容都得到了服务器端的照顾。

# android - Android如何使活动可重用

> ID：12509369
> 
> 赞同：1
> 
> 时间：2012-09-20T09:04:10.893
> 
> 标签：android, android-activity

我有一个用于在我的应用程序中显示图像的活动。现在该活动的初始化非常昂贵（大约需要 1-2 秒），我想知道我是否可以在启动应用程序时以某种方式使其初始化，并且每次都向其发送新的意图，而不是重新初始化它。我想也许启动模式属性会有所帮助，但我不知道如何使用它来实现这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T09:17:36.343

不要与**launchMode 的**东西混淆。只需`AsyncTask`在您的活动中介绍即可进行举重。这样做将使您的活动更快地加载/显示。

此外，如果您仍然有兴趣使用**launchMode**`android:launchMode="singleTop"` ，请在您的活动代码中设置并处理`onNewIntent()`事件。确保您没有破坏/完成您的活动，否则`onCreate()`将被调用。

# json - 在 javascript 中使用 RESTful 服务

> ID：12509378
> 
> 赞同：0
> 
> 时间：2012-09-20T09:04:51.793
> 
> 标签：json, wcf, rest, jsonp

我正在尝试使用我新设置的 RESTful WCF 服务，位于

[http://196.34.92.60/api/api/v1/public.svc/getoperators]

我使用一些第三方工具访问它，我从中获取

[http://code.google.com/a/eclipselabs.org/p/restclient-tool/](http://code.google.com/a/eclipselabs.org/p/restclient-tool/)

[https://addons.mozilla.org/en-US/firefox/addon/restclient/](https://addons.mozilla.org/en-US/firefox/addon/restclient/)

我的结果看起来像我预期的那样：

```
{
   "Results":
   [
       "golden arrow",
       "jammie",
       "myciti"
   ]
} 
```

一切都很好。当我在我的网络浏览器中输入网址时，响应是

```
<ResultList xmlns="http://schemas.datacontract.org/2004/07/Developer_Portal"xmlns:i="http://www.w3.org/2001/XMLSchema-instance"><Results xmlns:a="http://schemas.microsoft.com/2003/10/Serialization/Arrays"><a:string>golden arrow</a:string><a:string>jammie</a:string><a:string>myciti</a:string></Results></ResultList> 
```

不是我所期望的，但我认为这是正常的，并尝试在 Javascript 中使用服务（这里是小提琴）

[http://jsfiddle.net/JmTe4/11/](http://jsfiddle.net/JmTe4/11/)

它以错误响应。在这一点上，我很难过：我需要做什么才能在 javascript 中获得所需的响应？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T10:18:36.607

几件事。其中一些已经被其他成员提及。

1.  通过 XMLHttpRequest 进行的 AJAX 调用不能跨域工作。换句话说，您的 AJAX 代码无法从 jsfiddle.net 调用 196.34.92.60。它们是不同的域。
2.  您的浏览器正在返回 XML，因为它正在发送“Accepts: text\html”作为标题。jQuery 将解决此问题，因为它在请求中使用了 application\json（除非您另外指定）。

所以问题 2 已经修复。问题 1 可以使用 JSONP 解决。你应该只需要添加 ?callback=? 到您的网址的末尾。但是，请阅读 jQuery 网站上的文档以获得完整的概述。

转到此 URL 并在页面上搜索“JSONP” [http://api.jquery.com/jQuery.getJSON/](http://api.jquery.com/jQuery.getJSON/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T13:19:12.673

问题出在服务器 webconfig 中。我不得不添加

```
<binding name="webHttpBindingWithJsonP" crossDomainScriptAccessEnabled="true" /> 
```

感谢您的建议，他们可能解决了我无论如何都会遇到的其他一些问题。:)

# c++ - 这是有效的编译器优化吗？

> ID：12509385
> 
> 赞同：0
> 
> 时间：2012-09-20T09:05:26.400
> 
> 标签：c++, visual-c++

编译器：Visual C++ 2012 RTM

错误与否？：[https ://connect.microsoft.com/VisualStudio/feedback/details/763601/visual-c-2012-rtm-serious-compiler-bug](https://connect.microsoft.com/VisualStudio/feedback/details/763601/visual-c-2012-rtm-serious-compiler-bug)

对我来说，它将调用 test() 内联到第二个 std::cout 语句中似乎很奇怪。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-20T09:10:33.480

是的。编译器可以自由地进行程序无法检测到的更改。由于该`test`函数没有外部可见的影响，因此编译器可以根据自己的意愿自由地使其尽早或延迟，甚至完全消除它。

如果您能以某种方式解释这种优化使您的代码做一些不应该做的事情，那么您就有了一些东西。但到目前为止，您唯一的说法是它使您的代码运行得更慢或更快。编译器可以自由地进行优化，使代码的某些部分变慢而某些部分变快。事实上，这就是优化的本质——做出我们希望能产生净收益的性能权衡。这可能会导致生成的代码质量很差，尽管在这种情况下似乎没有，但它肯定是有效的。这就是优化的全部内容。

编译器获取您的源代码并生成输出编译代码。只要它产生您的源代码要求它产生的可观察结果，它就可以免费构建它喜欢的任何编译代码。如果它可以找到一种方法以它认为更好的方式产生相同的效果，则不需要以与源代码相同的方式产生输出。这就是优化的全部意义——不要按字面意思做你要求它做的事情，而是以其他方式产生相同的结果，希望是更好的方式。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-20T09:19:54.207

它归结为as-if规则。编译器可以自由地以任何它认为合适的方式转换程序，只要它的外部行为与转换之前的行为没有区别。

可以在[此处](http://en.cppreference.com/w/cpp/language/as_if)找到更精确的规则表述。请注意，对 volatile 的访问包含在此定义中，因此您在更改波动性时会看到差异。

# mocking - Mockup 对象的断言失败

> ID：12509387
> 
> 赞同：0
> 
> 时间：2012-09-20T09:05:44.920
> 
> 标签：mocking, phpunit

我在 PHPUnit 中模拟对象时遇到问题：

```
class FootballTest extends PHPUnit_Framework_TestCase
{
    /**
     * @var Football
     */
    protected $object;

    /**
     * Sets up the fixture, for example, opens a network connection.
     * This method is called before a test is executed.
     */
    protected function setUp()
    {
        $this->siteName = 'football';
        $this->footballAPIMock = $this->getMock('FootballAPI');
        $this->object = new Football($this->siteName,$this->footballAPIMock);
    }

    /**
     * Tears down the fixture, for example, closes a network connection.
     * This method is called after a test is executed.
     */
    protected function tearDown()
    {
        $this->object = null;
    }

    public function testGetByTeamOutrights()
    {
        $markets = 5;
        $this->footballAPIMock->expects($this->any())
                             ->method('getByTeamOutrights')
                             ->with($this->equalTo(5))
                             ->will($this->returnValue(5));

        $this->assertNull($this->object->getByTeamOutrights(5));

    }
} 
```

而且我断言那个足球对象失败了

PHPUnit 版本 3.6.12

# wpfdatagrid - 如何在数据网格列中添加滚动条

> ID：12509390
> 
> 赞同：0
> 
> 时间：2012-09-20T09:05:58.263
> 
> 标签：wpfdatagrid

示例 dgTest datagrid row height=40 ，其中一个 datagrid 列包含文本字段。它不显示完整的详细信息。我想在该列上设置滚动条。当行大小大于 40 时，应显示滚动条，它将帮助我清晰地查看....

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T09:08:29.797

你可以利用一个`ScrollViewer`

像这样的东西

```
<ScrollViewer>
  <DataGrid>
 //ur code 
 </DataGrid>
</ScrollViewer> 
```

检查这一点[在文本块列中使用自动换行时数据网格高度太高](https://stackoverflow.com/questions/10857530/data-grid-height-is-too-tall-when-using-word-wrap-in-text-block-column)

# linux - Linux内核模块的早期调试

> ID：12509391
> 
> 赞同：1
> 
> 时间：2012-09-20T09:06:01.100
> 
> 标签：linux, debugging, kernel, remote-debugging

我目前正在尝试调试我的一个内核模块的问题，这会导致整个系统在启动期间不时（大约每 250 次迭代）冻结。实际上它并不是真正的启动过程，因为该模块是由用户空间程序udev调用的，但它仍然非常耗时并且容易出现死锁和其他坏东西。

问题是我在加载时无法从模块中获取日志，因为当模块卡住时 syslogd 仍然死机。我在 syslog 或消息中得到的只是引导过程的前几行。

我有两个想法如何调试，但我不知道该怎么做：

1.  网络控制台。应该很简单，但我不知道如何在我的模块之前强制加载所需的配置。
2.  USB调试电缆。[我按照此处](http://www.kernel.org/doc/Documentation/x86/earlyprintk.txt "这里")所述配置了内核，但无法弄清楚要附加的确切设备号`earlyprintk=dbgp`以及我需要的端口是哪个端口。

因此，如果您对上述选项之一有任何经验，或者您有任何其他想法，我会非常感谢任何提示。

**技术数据：**内核 3.1。Ubuntu 10.10。grub2\. 调试电缆是 PLX 的 NetChip USB2.0。该机器是戴尔E6410笔记本电脑。

提前谢谢你，
大卫

# c# - 文本框未设置为模式弹出扩展器中的值

> ID：12509393
> 
> 赞同：1
> 
> 时间：2012-09-20T09:06:17.497
> 
> 标签：c#, asp.net, asp.net-ajax

我正在使用一个模态弹出扩展器，它包含一个具有三个文本框和两个按钮的面板。我想用我的规范（选择的日期）填充文本框值..但没有成功。

```
protected void myCal_SelectionChanged(object sender, EventArgs e)
    {
        ModalPopupExtender1.Show();
        TextBoxStart.Text = myCal.SelectedDate.ToString();
        TextBoxEnd.Text = myCal.SelectedDate.ToString();
    } 
```

设计师是

```
<asp:UpdatePanel ID="UpdatePanel1" runat="server" UpdateMode="Conditional" ChildrenAsTriggers="false">

  <ContentTemplate>        
      <asp:Calendar ID="myCal" runat="server" Height="600px" width="900px" 
        BorderColor="#F2F3F4" BorderWidth="3px" DayStyle-BorderWidth="1px" 
                TodayDayStyle-BackColor="#82CAFF" NextPrevFormat="ShortMonth" 
        SelectionMode="Day" DayHeaderStyle-Height="30px" 
                TitleStyle-BackColor="#CBE3F0" TitleStyle-ForeColor="#153E7E" 
        OtherMonthDayStyle-ForeColor="#B4CFEC" NextPrevStyle-ForeColor="#2554C7" 
        CssClass="mGrid" onselectionchanged="myCal_SelectionChanged">
        <DayHeaderStyle Height="30px" /><TitleStyle Height="50px" />
        <DayStyle BorderWidth="1px" HorizontalAlign="Left" VerticalAlign="Top" />
        <TodayDayStyle BackColor="#CBE3F0" />
    </asp:Calendar> 
```

```
 <ajaxToolkit:ModalPopupExtender ID="ModalPopupExtender1" runat="server" TargetControlID="ButtonDummy" PopupControlID="pnlSelect">

      </ajaxToolkit:ModalPopupExtender>

</ContentTemplate>

      </asp:UpdatePanel>

    <asp:UpdatePanel ID="UpdatePanel2" runat="server" UpdateMode="Always">
<ContentTemplate>

       <asp:Panel ID="pnlSelect" runat="server" width="200px" Height="200px">

           <table border="0" cellspacing="6" cellpadding="0" style="background-color: white">
               <tr>
                   <td align="right"></td>
                   <td>
                       <h2>New Appointment</h2>
                   </td>
               </tr>
               <tr>
                   <td align="right">Start Date:</td>
                   <td>
                       <asp:TextBox ID="TextBoxStart" runat="server"></asp:TextBox></td>
               </tr>
               <tr>
                   <td align="right">End Date:</td>
                   <td>
                       <asp:TextBox ID="TextBoxEnd" runat="server"></asp:TextBox></td>
               </tr>
               <tr>
                   <td align="right">Name:</td>
                   <td>
                       <asp:TextBox ID="TextBoxName" runat="server"></asp:TextBox></td>
               </tr>
               <tr>
                   <td align="right"></td>
                   <td>
                       <asp:Button ID="ButtonOK" runat="server" OnClick="ButtonOK_Click" Text="OK" />
                       <asp:Button ID="ButtonCancel" runat="server" Text="Cancel" OnClick="ButtonCancel_Click" />
                   </td>
               </tr>
           </table>

       </asp:Panel>
    </ContentTemplate> 
```

有什么问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T10:13:25.927

由于这些文本框放置在 UpdatePanel 之外，因此它们不会根据异步请求进行更新。将它们放入同一个 UpdatePanel 或由另一个 UpdatePanel 包装并将 UpdateMode 设置为“Always”，如下所示：

```
<asp:UpdatePanel runat="server" UpdateMode="Always">
    <ContentTemplate>
        <asp:Panel runat="server" ID="pnlSelect" >
            <asp:TextBox runat="server" ID="TextBoxStart" />
            <asp:TextBox runat="server" ID="TextBoxEnd" />
        </asp:Panel>
    </ContentTemplate>
</asp:UpdatePanel> 
```

尝试将`ChildrenAsTriggers`UpdatePanel1 的属性设置为`true`或将 ModalPopupExtender1 移动到 UpdatePanel2。

此外，您可以将 PopupExtender 和他的目标虚拟按钮移出 UpdatePanel1 并将 pnlSelect 与 UpdatePanel2 交换：

```
<asp:UpdatePanel runat="server" ID="UpdatePanel1" UpdateMode="Conditional" ChildrenAsTriggers="false">
    <ContentTemplate>
        <asp:Button ID="Button1" runat="server" Text="Click Me" />
    </ContentTemplate>
</asp:UpdatePanel>
<asp:Button ID="ButtonDummy" runat="server" Style="display: none" />
<ajaxToolkit:ModalPopupExtender ID="ModalPopupExtender1" runat="server" TargetControlID="ButtonDummy"
    PopupControlID="pnlSelect" BackgroundCssClass="modalBackground" />
<asp:Panel ID="pnlSelect" runat="server" Style="display: none" CssClass="modalPopup">
    <asp:UpdatePanel runat="server" ID="UpdatePanel2" UpdateMode="Always">
        <ContentTemplate>
            <asp:TextBox runat="server" ID="TextBoxStart" />
        </ContentTemplate>
    </asp:UpdatePanel>
</asp:Panel> 
```

# android - 以编程方式将属性 AlignParentRight 设置为 RelativeLayout 中的按钮不起作用？

> ID：12509394
> 
> 赞同：17
> 
> 时间：2012-09-20T09:06:18.760
> 
> 标签：android, android-layout, android-button, android-relativelayout

我尝试以编程方式将属性 AlignParentRight 设置为 RelativeLayout 中的按钮，但程序因 NullPointerException 而崩溃。这是我的代码：

```
//add horizontal realative layout
RelativeLayout layouth = new RelativeLayout(this);
layouth.setLayoutParams(new RelativeLayout.LayoutParams(
        LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT));

//add textview for label
TextView t = new TextView(this);
t.setText(d.getName());
t.setTextSize(25);
t.setId(2);      
t.setLayoutParams(new RelativeLayout.LayoutParams(
        LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT));

//add button
Button b = new Button(this);
b.setText(d.getName());
RelativeLayout.LayoutParams layoutParams =(RelativeLayout.LayoutParams)b.getLayoutParams();
layoutParams.addRule(RelativeLayout.ALIGN_PARENT_RIGHT); 
layoutParams.addRule(RelativeLayout.LEFT_OF, 2);
b.setLayoutParams(layoutParams);   

//add textview and button to horizontal linear layout
layouth.addView(t);
layouth.addView(b);
//add horizontal linear layout to vertical linear layout
layoutv = (LinearLayout) findViewById(R.id.ProjectViewLinearID);
layoutv.addView(layouth); 
```

我的问题在哪里？错误发生在程序行`layoutParams.addRule(RelativeLayout.ALIGN_PARENT_RIGHT);`

**更新解决方案：**

这段代码对我有用：

```
// Creating a new RelativeLayout
RelativeLayout layouth = new RelativeLayout(this);

// Defining the RelativeLayout layout parameters.
// In this case I want to fill its parent
RelativeLayout.LayoutParams rlp = new RelativeLayout.LayoutParams(
        RelativeLayout.LayoutParams.MATCH_PARENT,
        RelativeLayout.LayoutParams.MATCH_PARENT);

// Creating a new TextView
TextView tv = new TextView(this);
tv.setText(d.getName());
tv.setTextSize(25);

//add button
Button b = new Button(this);
b.setText(d.getName());

// Defining the layout parameters of the TextView
RelativeLayout.LayoutParams lp = new RelativeLayout.LayoutParams(
         RelativeLayout.LayoutParams.WRAP_CONTENT,
         RelativeLayout.LayoutParams.WRAP_CONTENT);
         lp.addRule(RelativeLayout.ALIGN_PARENT_RIGHT);

// Setting the parameters on the TextView
tv.setLayoutParams(lp);
b.setLayoutParams(lp);

// Adding the TextView to the RelativeLayout as a child
layouth.addView(tv);
layouth.addView(b); 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-09-20T09:20:22.963

代替

```
RelativeLayout.LayoutParams layoutParams =(RelativeLayout.LayoutParams)b.getLayoutParams(); 
```

和

```
RelativeLayout.LayoutParams layoutParams = new RelativeLayout.LayoutParams(
                RelativeLayout.LayoutParams.MATCH_PARENT,
                RelativeLayout.LayoutParams.WRAP_CONTENT); 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-09-20T09:15:47.657

当您调用时`b.getLayoutParams()`， b 不在布局中。因此，它没有 layoutparams（另外，此时它不知道您期望的是 RelativeLayout.LayoutParams）。

您需要创建一个新的 LayoutParams 实例，就像为 TextView 所做的一样。

# codeigniter - Codeigniter 重定向最佳选择方法

> ID：12509396
> 
> 赞同：0
> 
> 时间：2012-09-20T09:06:23.297
> 
> 标签：codeigniter, redirect

在同一个控制器中，我发现有两种重定向方法。

```
Class Home extends mY_Controller{

    public $view;
    public $redirect;
    function first_method
    {
        $this->view =   FALSE;
        //   $this->second_method();
        //   redirect('Home/second_method');            
    }

    function second_method()
    {
        echo 'Second one';
    }       
} 
```

我想知道哪个是最好的方法，如果某些条件不匹配，我在 my_controller 中有一个重定向方法，使用重定向变量重定向用户只是为了简单起见，我发布了这个

```
<?php
class MY_Controller extends CI_Controller 
{
    protected $data;

    function __construct()
    {
        parent::__construct();
    }

    public function _remap($method, $parameters)
    {
        if($this->view === FALSE)
        {
            redirect($this->redirect);
        }else{
            $this->load->view('my_view');
        }   

    }
} 
```

使用第一种方法我无法访问第二行

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T09:24:58.970

我建议使用`redirect()`，因为稍后更改 HTTP 响应代码很容易，如果您需要它，以及使其中一些成为`refresh`类型。

如果您以后发现有必要更改所有重定向，您可以随时覆盖帮助程序，您甚至可以向它们添加一些逻辑。

# c++ - 使用 CocosDenshion 顺序播放声音？

> ID：12509404
> 
> 赞同：3
> 
> 时间：2012-09-20T09:06:52.330
> 
> 标签：c++, cocos2d-x

我正在使用 Cocos2d-x 库和 Cocosdenshion AudioEngine 开发一个简单的视频游戏。

我可以使用 SharedAudioEngine 的 playEffect 方法播放单个声音，但我想做的是按顺序播放多个声音。

但我不知道从哪里开始。我试图创建一个动作序列，它会使用选择器调用该方法，但它似乎不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-07-15T06:38:32.300

```
 write number of Function equal to the Number of Sound effects.
    like this
    Function1(){
        CocosDenshion::SimpleAudioEngine::sharedEngine()->playEffect("Sound1.mp3");
    }
    Function2{
    CocosDenshion::SimpleAudioEngine::sharedEngine()->stopAllEffects();
        CocosDenshion::SimpleAudioEngine::sharedEngine()->playEffect("Sound2.mp3");
    }
    Function3{
    CocosDenshion::SimpleAudioEngine::sharedEngine()->stopAllEffects();
        CocosDenshion::SimpleAudioEngine::sharedEngine()->playEffect("Sound3.mp3");
    }
CCSequence *seq = CCSequence::create(Func1,func2,func3,NULL);
CCRepeatForever *repeat = CCRepeatForever::create(seq);
this->runAction(repeat); 
```

# java - Java递归读取文件夹中的所有文件

> ID：12509406
> 
> 赞同：3
> 
> 时间：2012-09-20T09:06:56.200
> 
> 标签：java, inputstream, filereader

我需要编写一个程序来读取文件夹路径`stdin`及其所有子文件夹，然后根据它们的扩展名打印出文件的数量。

它将被编译如下：

`java Summary -r <path>`

输出需要如下所示：

```
txt:
  number of files: 5
  combined size: 1202131
  largest file: 729224
  smallest file: 12323
pdf:
  number of files: 2
  etc... 
```

有人可以帮我吗？我不知道如何处理它。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-20T09:23:27.387

你可以从这样的东西开始递归地读取文件

```
public void listFilesForFolder(final File folder) {
    for (final File fileEntry : folder.listFiles()) {
        if (fileEntry.isDirectory()) {
            listFilesForFolder(fileEntry);
        } else {
            System.out.println(fileEntry.getName());
        }
    }
} 
```

此代码由@rich 提供。

其余的细节是你必须解决的。

您可以查看[阅读文件夹中的所有文件以](https://stackoverflow.com/questions/1844688/read-all-files-in-a-folder)获取更多详细信息

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T09:09:31.340

看看这个：[列出java中目录和子目录中的文件，只包括部分文件路径](https://stackoverflow.com/questions/12505491/list-files-from-directories-and-sub-directories-in-java-including-only-partial-f)

您将获得目录下所有文件的列表，然后您可以使用它 `file.length()`来获取大小。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-20T09:10:43.297

与此代码类似的东西（来自[http://www.javapractices.com/topic/TopicAction.do?Id=68](http://www.javapractices.com/topic/TopicAction.do?Id=68)）：

在 JDK 7 中：

```
import java.io.IOException;
import java.nio.file.FileVisitResult;
import java.nio.file.FileVisitor;
import java.nio.file.Files;
import java.nio.file.Path;
import java.nio.file.Paths;
import java.nio.file.SimpleFileVisitor;
import java.nio.file.attribute.BasicFileAttributes;

/** Recursive listing with SimpleFileVisitor in JDK 7\. */
public final class FileListingVisitor {

  public static void main(String... aArgs) throws IOException{
    String ROOT = "C:\\test";
    FileVisitor<Path> fileProcessor = new ProcessFile();
    Files.walkFileTree(Paths.get(ROOT), fileProcessor);
  }

  private static final class ProcessFile extends SimpleFileVisitor<Path> {
    @Override public FileVisitResult visitFile(
      Path aFile, BasicFileAttributes aAttrs
    ) throws IOException {
      System.out.println("Processing file:" + aFile);
      return FileVisitResult.CONTINUE;
    }

    @Override  public FileVisitResult preVisitDirectory(
      Path aDir, BasicFileAttributes aAttrs
    ) throws IOException {
      System.out.println("Processing directory:" + aDir);
      return FileVisitResult.CONTINUE;
    }
  }
} 
```

在较旧的：

```
import java.util.*;
import java.io.*;

/**
* Recursive file listing under a specified directory.
*  
* @author javapractices.com
* @author Alex Wong
* @author anonymous user
*/
public final class FileListing {

  /**
  * Demonstrate use.
  * 
  * @param aArgs - <tt>aArgs[0]</tt> is the full name of an existing 
  * directory that can be read.
  */
  public static void main(String... aArgs) throws FileNotFoundException {
    File startingDirectory= new File(aArgs[0]);
    List<File> files = FileListing.getFileListing(startingDirectory);

    //print out all file names, in the the order of File.compareTo()
    for(File file : files ){
      System.out.println(file);
    }
  }

  /**
  * Recursively walk a directory tree and return a List of all
  * Files found; the List is sorted using File.compareTo().
  *
  * @param aStartingDir is a valid directory, which can be read.
  */
  static public List<File> getFileListing(
    File aStartingDir
  ) throws FileNotFoundException {
    validateDirectory(aStartingDir);
    List<File> result = getFileListingNoSort(aStartingDir);
    Collections.sort(result);
    return result;
  }

  // PRIVATE //
  static private List<File> getFileListingNoSort(
    File aStartingDir
  ) throws FileNotFoundException {
    List<File> result = new ArrayList<File>();
    File[] filesAndDirs = aStartingDir.listFiles();
    List<File> filesDirs = Arrays.asList(filesAndDirs);
    for(File file : filesDirs) {
      result.add(file); //always add, even if directory
      if ( ! file.isFile() ) {
        //must be a directory
        //recursive call!
        List<File> deeperList = getFileListingNoSort(file);
        result.addAll(deeperList);
      }
    }
    return result;
  }

  /**
  * Directory is valid if it exists, does not represent a file, and can be read.
  */
  static private void validateDirectory (
    File aDirectory
  ) throws FileNotFoundException {
    if (aDirectory == null) {
      throw new IllegalArgumentException("Directory should not be null.");
    }
    if (!aDirectory.exists()) {
      throw new FileNotFoundException("Directory does not exist: " + aDirectory);
    }
    if (!aDirectory.isDirectory()) {
      throw new IllegalArgumentException("Is not a directory: " + aDirectory);
    }
    if (!aDirectory.canRead()) {
      throw new IllegalArgumentException("Directory cannot be read: " + aDirectory);
    }
  }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-11-20T05:22:25.537

请使用以下代码。

```
public static void listFiles(final File folder) {
    for (final File fileEntry : folder.listFiles()) {
        if (fileEntry.isFile() && fileEntry.getName().endsWith(".txt")) {
            System.out.println(fileEntry.getName());
        }
    if (fileEntry.isFile() && fileEntry.getName().endsWith(".pdf")) {
            System.out.println(fileEntry.getName());
        }
     else {
            listFiles(fileEntry);
        }
    }
}

public static void main(String startingPath){
    File folder = new File(startingPath);
    listFiles(folder);
} 
```

# javascript - 带有自动过渡的垂直转盘

> ID：12509409
> 
> 赞同：0
> 
> 时间：2012-09-20T09:07:08.960
> 
> 标签：javascript, jquery, asp.net, visual-studio-2010

我想要一个带有垂直缩略图的轮播，如下面的链接所示：

[http://coolcarousels.frebsite.nl/c/11/](http://coolcarousels.frebsite.nl/c/11/)

但是在这个例子中，图像只有在悬停时才会改变，我也想要一个自动滑块。说图像每次变化**10 秒**变化一次。

此外，这在 Firefox 中不起作用。虽然我的主要要求是有一个自动滑块以及手动图像更改（悬停或单击）。

如果有人遇到过，请告诉我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T09:15:56.190

使用`auto`轮播的配置选项。

```
 $(function() {
        $('#carousel').carouFredSel({
            items: 1,
            auto: 5000, // Slide automatically after 5 seconds
            scroll: {
                fx: 'none'
            },
            pagination: {
                container: '#pager',
                event: 'mouseenter',
                anchorBuilder: function(nr, item) {
                    var src = item.attr('src').replace('/large/', '/small/');
                    return '<img src="'+ src +'" border="0" />';
                }
            }
        });
    }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T09:10:03.150

这是我以前使用过的两个轮播：[http ://www.thomaslanciaux.pro/jquery/jquery_carousel.htm](http://www.thomaslanciaux.pro/jquery/jquery_carousel.htm) [http://www.gmarwaha.com/jquery/jcarousellite/](http://www.gmarwaha.com/jquery/jcarousellite/)

它们都允许垂直，并以一定间隔自动滑动。

**编辑**

刚刚快速浏览了您发布的插件，它似乎支持间隔滑动：[http ://coolcarousels.frebsite.nl/c/10/](http://coolcarousels.frebsite.nl/c/10/)

# objective-c - iOS：按目标在 .xcconfig 文件中指定代码签名标识

> ID：12509414
> 
> 赞同：0
> 
> 时间：2012-09-20T09:07:26.103
> 
> 标签：objective-c, ios, build, code-signing, xcconfig

因此，我在“配置”窗格的“信息”选项卡上的“项目设置”中设置了一个 .xcconfig 文件并连接到特定目标（项目中有更多目标）。

.xcconfig 文件的内容如下所示：

```
//:configuration = AppStore //This is the name of the configuration instead of Release
COPY_PHASE_STRIP = NO
CODE_SIGN_IDENTITY = Somecompany Ltd.
CODE_SIGN_IDENTITY[sdk=iphoneos*] = Somecompany Ltd. 
PROVISIONING_PROFILE[sdk=iphoneos*] = 123456789blablablah
//:completeSettings = none 
```

这种作品。我看到它替换了项目设置中的代码签名标识，但它没有替换我想要的特定目标设置中的所有代码签名字段。

**这是它在项目设置中的样子：** ![项目设置](../Images/d50bfc8521af62aea65e0f6ca7f0644b.png)

**这就是它在目标设置中的样子：** ![在此处输入图像描述](../Images/9d8702619c5dcc8a413c9c5655948bfe.png)

问题：**如何按目标在 .xcconfig 文件中指定代码签名标识，或者有什么其他方法可以使其工作？**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2015-12-08T10:05:12.080

只需将其添加到 xcconfig.*

PROVISIONING_PROFILE = fea8c55b-1fb4-4f64-9001-a12e998e3fdd

然后转到“构建设置”=>“代码签名”=>“配置文件”=>“鼠标左键单击”=>选择“其他...”=>输入“$（继承）”=>享受！

[![在此处输入图像描述](../Images/f034747cfe2d5dca38e5dd99caa6cb0d.png)](https://i.stack.imgur.com/xeHob.png)

请告诉我是否对您不起作用。希望能帮助到你。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T09:40:40.197

事实证明，“代码”一直都是正确的。我不需要向 xcconfig 文件添加任何内容，只需将其连接到 Info 窗格中的目标即可。

问题是，即使为代码签名设置了“不要代码签名”行，它仍然算作某事，并且该设置不会被覆盖。**选择上面写着 Don't Code Sign 的行并按退格键解决了问题！**

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-04-28T16:45:05.633

您可以使用在 xcconfig 中定义的变量，并在目标构建设置下以`$(YOUR_VARIABLE)`.

为了在项目中设置它，您必须从列表底部选择“其他”，然后输入语句`$(YOUR_VARIABLE)`。

# java - 如何使用 memcached 客户端搜索键值对？哪个 memcached 客户端更好——（spymemcached、xmemcached 或 gwhalin）？

> ID：12509415
> 
> 赞同：0
> 
> 时间：2012-09-20T09:07:27.760
> 
> 标签：java, memcached

如何使用 memcached 客户端**搜索**键值对？如果我的钥匙是复合钥匙怎么办？单线程*客户端*或多线程客户*端*有用吗？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T09:30:38.210

我不认为你能做到这一点。Memcached 使用一些随机分配密钥的算法对密钥进行哈希处理。这使得基于键的搜索不太可能

# .net - 将基于 .Net 的中间中介添加到 VNC 客户端-服务器连接

> ID：12509416
> 
> 赞同：1
> 
> 时间：2012-09-20T09:07:29.457
> 
> 标签：.net, windows, proxy, remote-access, vnc

我正在就一个复杂的问题寻求建议。

我将从某种模式开始。如果通常的 VNC 客户端-服务器连接看起来像这样：

> [client-web-interface] <===> [VNC-server]

然后我需要做这样的事情：

```
 /=> [VNC-server-1]
[client-web-interface] <===> [Proxy] <===> [VNC-server-2]
                                       ...
                                       \=> [VNC-server-N] 
```

（Windows 服务器，全部）

所以我需要在客户端和 VNC 服务器数量之间添加调解器。通常 VNC 服务器位于本地网络中，并且仅使用该代理服务器连接到世界。

代理服务器本身不仅将连接从客户端重定向到确切的服务器，它还授权客户端并决定客户端将连接到哪个服务器。授权和服务器选择是基于 .Net 的应用程序逻辑的一部分，假设它已经启动并运行。所以我更具体地需要 VNC 堆栈：

*   在客户端和服务器之间添加一些中间代理（最难的部分）。据我了解，它将充当实际客户端的 VNC 服务器，反之亦然，它将充当实际服务器的客户端。
*   为代理添加一些逻辑，这将决定哪个服务器连接客户端（目前，它可以随机连接它们，所以我们不会被“如何从 .net 应用程序获取实际数据”所困扰）。

我对 VNC 完全陌生，所以请原谅我犯了任何错误。

我会很感激任何想法。基于.Net 的解决方案将是完美的。

# android - Android Binder 内部结构

> ID：12509418
> 
> 赞同：5
> 
> 时间：2012-09-20T09:07:34.030
> 
> 标签：android, driver, android-binder

我正在开展一个项目，我们在其中向 android 系统添加了一些非标准的安全功能，但我在调整 Binder 时遇到了一些严重的问题。

有没有人对 Binder System 有深入的了解，并且知道 Binder 为什么会“阻塞”一个进程来传输 Parcel，以及接收进程是如何解除阻塞的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T11:00:53.983

这是 Android 文档中所说的预期行为：http: [//developer.android.com/reference/android/os/IBinder.html](http://developer.android.com/reference/android/os/IBinder.html)

> 关键的 IBinder API 是由 Binder.onTransact() 匹配的 transact()。这些方法允许您分别发送对 IBinder 对象的调用和接收传入 Binder 对象的调用。此事务 API 是同步的，因此在目标从 Binder.onTransact() 返回之前，对 transact() 的调用不会返回；这是调用本地进程中存在的对象时的预期行为，并且底层进程间通信（IPC）机制确保在跨进程时应用这些相同的语义。

观察通知 API。我们进行了一些调用，以便最终获得对 NotificationManager 对象的引用。有了这个对象，我们调用 notify(...);

```
117    public void notify(String tag, int id, Notification notification)
118    {
119        int[] idOut = new int[1];
120        INotificationManager service = getService();
121        String pkg = mContext.getPackageName();
122        if (localLOGV) Log.v(TAG, pkg + ": notify(" + id + ", " + notification + ")");
123        try {
124            service.enqueueNotificationWithTag(pkg, tag, id, notification, idOut);
125            if (id != idOut[0]) {
126                Log.w(TAG, "notify: id corrupted: sent " + id + ", got back " + idOut[0]);
127            }
128        } catch (RemoteException e) {
129        }
130    } 
```

此调用与您的流程同步，它将导致以下调用：

```
 @Override public boolean onTransact(int code, android.os.Parcel data, android.os.Parcel reply, int flags) throws android.os.RemoteException
38 {
39 switch (code)
40 {
...
46 case TRANSACTION_enqueueNotification:
47 {
48 data.enforceInterface(DESCRIPTOR);
49 java.lang.String _arg0;
50 _arg0 = data.readString();
51 int _arg1;
52 _arg1 = data.readInt();
53 android.app.Notification _arg2;
54 if ((0!=data.readInt())) {
55 _arg2 = android.app.Notification.CREATOR.createFromParcel(data);
56 }
57 else {
58 _arg2 = null;
59 }
60 int[] _arg3;
61 _arg3 = data.createIntArray();
62 this.enqueueNotification(_arg0, _arg1, _arg2, _arg3);
63 reply.writeNoException();
64 reply.writeIntArray(_arg3);
65 return true;
66 }
67 case TRANSACTION_cancelNotification:
68 {
...
169return super.onTransact(code, data, reply, flags);
170} 
```

看到对 this.enqueueNotification 的调用了吗？

```
public void enqueueNotification(java.lang.String pkg, int id, android.app.Notification notification, int[] idReceived) throws android.os.RemoteException
188{
189android.os.Parcel _data = android.os.Parcel.obtain();
190android.os.Parcel _reply = android.os.Parcel.obtain();
191try {
192_data.writeInterfaceToken(DESCRIPTOR);
193_data.writeString(pkg);
194_data.writeInt(id);
195if ((notification!=null)) {
196_data.writeInt(1);
197notification.writeToParcel(_data, 0);
198}
199else {
200_data.writeInt(0);
201}
202_data.writeIntArray(idReceived);
203mRemote.transact(Stub.TRANSACTION_enqueueNotification, _data, _reply, 0);
204_reply.readException();
205_reply.readIntArray(idReceived);
206}
207finally {
208_reply.recycle();
209_data.recycle();
210}
211} 
```

现在方法（来自 IBinder） mRemote.transact(Stub.TRANSACTION_enqueueNotification, _data, _reply, 0); 会变魔术。根据 Parcel 类的文档：

> 一个 Parcel 可以包含将在 IPC 另一侧未展平的展平数据（使用此处的各种方法来编写特定类型或通用 Parcelable 接口），以及对将导致另一侧接收的活动 IBinder 对象的引用与 Parcel 中的原始 IBinder 连接的代理 IBinder。

所以一旦对方收到序列化的数据，就会做出相应的响应。所以它因为系统设计而阻塞了调用过程，让开发更加连续，不增加应用程序开发的复杂性和一致性。接收进程没有被阻塞，它是一个活动的 IBinder 对象，它的一个线程将响应请求。现在，如果对象在沉重的开销下工作，它可能会在响应之前阻塞很长时间。因此，如果您打算与忙碌的人交谈，请确保您有一个助手来继续等待回复（也许是另一个线程）。

\o/

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-10-22T15:55:17.550

阻塞和解除阻塞确实是设计使然 - Binder 是“基于事务的”，但它实际上发生在 IPCThreadState 的低得多的级别，它是每个线程实例保存 Binder 数据：

消息通过 ioctl(2) 操作在低级驱动程序（通常是 /dev/binder，但从 8.0 vndbinder、hwbinder）上发送/接收。这使得调用者可以在一个逻辑操作中发送消息和接收回复，而不是像套接字那样执行两个系统调用（send(2)/receive(2)）。

您的应用程序有一个活页夹线程池（由 ProcessState 启动），Android 服务（尤其是 system_server）也是如此。这是为来自驱动程序的传入事务和 BR_* 代码提供服务的内容，这就是 Binder 看似“异步”性质的发生方式 - 池处于休眠状态，但是当传入通知（例如 BR_DEAD_BINDER）到达时，其中一个线程（您可以't control which）在该线程中被转换为 Java 回调（对于死亡通知，onBinderDied）。

这种设计可以轻松享受两全其美——在需要的时候看似异步的操作，在你想要提交“事务”时阻塞发送/接收，这也有助于 AIDL 生成的代码能够获取包裹从池中取出并在完成后回收。

# python - 用于匹配字符串中任意位置 XYZ 之后出现的任何 ABC 的正则表达式

> ID：12509420
> 
> 赞同：2
> 
> 时间：2012-09-20T09:07:45.620
> 
> 标签：python, regex

我正在尝试编写一个正则表达式，该表达式将匹配字符串中任何位置的 XYZ 之后出现的任何 ABC：

前任。text - “一些 ABC 文本后跟 XYZ 后跟多个 ABC，更多 ABC，更多 ABC”

即，正则表达式应该匹配 XYZ 之后的三个 ABC。

有什么线索吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T09:09:39.153

`XYZ`只需匹配重复的文字和组`ABC`：

```
r'XYZ((?:ABC)+)' 
```

该`(?:ABC)+`模式至少匹配一组文字字符，并且整个组前面都有文字 XYZ。

这是非常基本的正则表达式 101，你应该阅读一个很好[的正则表达式匹配教程](http://www.regular-expressions.info/tutorial.html)来开始。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T09:11:54.990

像这样的东西？`r"(?<=XYZ)((?:ABC)+)"`. 这将只匹配`ABC`when they follow的出现`XYZ`，但不会包括`XYZ`其自身。

**编辑**

看起来我误解了 OP 的原始问题。最简单的方法是首先找到字符串`XYZ`。保存 的起始位置`XYZ`。使用起始位置作为`p.finditer(string, startpos)`. 请注意，这仅适用于已编译的正则表达式，因此您需要先编译您的模式。

您需要的模式很简单`r"(ABC)"`。

或者，您可以使用`p.sub()`，它也将进行替换，但要仅对字符串的一部分起作用，您需要先创建一个子字符串。`p.sub()`没有`startpos`参数。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-20T11:31:53.330

您可以采用迭代方法：

```
s = "Some ABC text followed by XYZ followed by multiple ABC, more ABC, more ABC"

pattern = re.compile(r'(?<=XYZ)(.*?)ABC')
while pattern.search(s):
   s = pattern.sub(r'\1REPLACED', s)

print s 
```

输出：

> 一些 ABC 文本后跟 XYZ 后跟多个 REPLACED，更多 REPLACED，更多 REPLACED

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-12-03T09:51:18.720

集合中有一个漂亮的 Counter 对象可能会有所帮助。Counter 对象是一个字典，键是单个项目，值是计数。例子：

```
Counter('hello there hello'.split()) # {'hello':2, 'there', 1} 
```

因为我们要计算单词，所以我们必须在看到空格的地方拆分短语。这是 split 方法的默认行为。这是一个使用计数器的示例脚本。如果需要，下半部分可以改编成函数。

```
from collections import Counter

def count_frequency(phrase):
    """ Return a dictionary with {word: num_of_occurences} """
    counts = Counter(phrase.split())
    return counts

def replace_word(target_word, replacement, phrase):
    """ Replaces *word* with *replacement* in string *phrase* """
    phrase = phrase.split()

    for count, word in enumerate(phrase):
        if word == target_word:
            phrase[count] = replacement

    return ''.join(phrase)

phrase = "hello there hello hello"
word_counts = count_frequency(phrase)
new_phrase = ''
replacement = 'replaced'

for word in word_counts:
    if word_counts[word] > 2:
        phrase = phrase.replace(word, replacement)

print(phrase) 
```

# ios - 如何以编程方式执行 Unwind segue？

> ID：12509422
> 
> 赞同：320
> 
> 时间：2012-09-20T09:07:52.753
> 
> 标签：ios, segue, ios6

使用情节提要非常容易。您只需将操作拖到“退出”即可。但是我应该如何从我的代码中调用它？

* * *

## 回答 #1

> 赞同：293
> 
> 时间：2012-11-03T11:49:35.217

1.  创建手动转场（`ctrl`从文件所有者 -drag 到退出），
2.  在绿色 EXIT 按钮下方的左侧控制器菜单中选择它。

![在绿色退出按钮下方的左侧控制器菜单中选择它](../Images/b20a4557836b9b53cdb748f40c035b0c.png)

插入 Segue 的名称以放松。

然后，`- (void)performSegueWithIdentifier:(NSString *)identifier sender:(id)sender.`使用您的 segue 标识。

* * *

## 回答 #2

> 赞同：177
> 
> 时间：2014-12-13T20:27:36.907

这是 Objective C 和 Swift 的完整答案：

`IBAction`1）在您的目标视图控制器（您想要转场的地方）中创建一个展开转场。实现文件中的任何位置。

```
// Objective C

    - (IBAction)unwindToContainerVC:(UIStoryboardSegue *)segue {

    }

// Swift

 @IBAction func unwindToContainerVC(segue: UIStoryboardSegue) {

    } 
```

2）在源视图控制器（您要从中选择的控制器）上，⌃ + 从“活动名称”拖动以退出。您应该会在弹出窗口中看到在步骤 1 中创建的展开转场。（如果您没有看到，请查看第一步）。从弹出窗口中选择 unwindToContainerVC: 或任何您命名的方法，以将源控制器连接到展开 IBAction。

![在此处输入图像描述](../Images/64d2184d9e5e2b7cfa4b1356eeb586db.png)

3）在故事板的源视图控制器的文档大纲中选择segue（它将在底部附近列出），并给它一个**标识符**。

![在此处输入图像描述](../Images/a00a5c20d7a6660958fef1ad4d98900d.png)

*4) 使用此方法从源*视图控制器调用展开转场，替换您的展开转场名称。

// 目标 C

`[self performSegueWithIdentifier:@"unwindToContainerVC" sender:self];`

// 斯威夫特

`self.performSegueWithIdentifier("unwindToContainerVC", sender: self)`

注意。使用 unwind 方法上 segue 参数的 sourceViewController 属性来访问源控制器上的任何公开属性。另外，请注意框架处理解除源控制器。如果您想确认这一点，请向源控制器添加一个 dealloc 方法，其中包含一条日志消息，一旦它被杀死就应该触发。如果 dealloc 没有触发，您可能有一个保留周期。

* * *

## 回答 #3

> 赞同：89
> 
> 时间：2014-08-06T20:56:34.210

`bradleygriffith`的回答很棒。为了简化，我采取了第 10 步并制作了屏幕截图。这是 Xcode 6 中的屏幕截图。

1.  按住 Control 从橙色图标拖动到红色的退出图标以创建一个展开，视图中没有任何操作/按钮。

![在此处输入图像描述](../Images/b716b8587603c9f00622cf4cf47e837e.png)

2.  然后`unwind segue`在侧边栏中选择：

![在此处输入图像描述](../Images/03af716f8a0d3f6b1f6510310c173635.png)

3.  设置一个 Segue Identifier 字符串：

[![在此处输入图像描述](../Images/aac65d60bed97ff72deac36918e23ba2.png)](https://i.stack.imgur.com/OLbL5.png)

4.  从代码访问该标识符：

```
[self performSegueWithIdentifier:@"unwindIdentifier" sender:self]; 
```

* * *

## 回答 #4

> 赞同：14
> 
> 时间：2012-11-04T23:02:28.030

我用`[self dismissViewControllerAnimated: YES completion: nil];`which 会让你回到通话`ViewController`中。

* * *

## 回答 #5

> 赞同：11
> 
> 时间：2013-11-06T19:21:11.370

引用 Apple 关于 Unwind Segue 的技术说明中的文字：要添加只能以编程方式触发的展开 segue，请从场景的视图控制器图标中控制并拖动到其退出图标，然后从弹出菜单中为新的 segue 选择一个展开动作。

[链接到技术说明](https://developer.apple.com/library/ios/technotes/tn2298/_index.html)

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2014-03-18T22:39:48.550

Vishal Chaudhry 上面的回答对我有用。我还要补充一点，以便使用以下方法手动触发序列：

```
[self performSegueWithIdentifier:@"mySegueName" sender:self]; 
```

在 ViewController 中，您还必须在情节提要中的 ViewController 场景下选择展开转场，并在 RHS 的属性视图中确保 Indentifier 字段包含您在代码中引用的名称（上例中的“mySegueName” ）。

如果省略这一步，上面的行将抛出一个序列名称未知的异常。

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2013-12-23T22:32:52.410

向后兼容的解决方案适用于 ios6 之前的版本，适用于感兴趣的用户：

```
- (void)unwindToViewControllerOfClass:(Class)vcClass animated:(BOOL)animated {

    for (int i=self.navigationController.viewControllers.count - 1; i >= 0; i--) {
        UIViewController *vc = [self.navigationController.viewControllers objectAtIndex:i];
        if ([vc isKindOfClass:vcClass]) {
            [self.navigationController popToViewController:vc animated:animated];
            return;
        }
    }
} 
```

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2018-09-10T09:44:07.877

**斯威夫特 4**：

**1.**创建一个**@IBAction**，在你想放松的控制器内使用segue：

```
 @IBAction func unwindToVC(segue: UIStoryboardSegue) {

    } 
```

**2.**在情节提要中，从您想要从控制器符号中切换（展开）的控制器中按 ctrl+从控制器符号拖动到退出符号并选择您之前创建的方法：

[![在此处输入图像描述](../Images/297c48e2fcce289baf036734558e9749.png)](https://i.stack.imgur.com/GFK4L.png)

**3.**现在您可以注意到在文档大纲中您有标题为“Unwind segue...”的新行。现在你应该点击这一行并打开属性检查器来设置标识符（在我的例子中**是 unwindSegueIdentifier**）。

[![在此处输入图像描述](../Images/556c3a9ea00e3ba51920eb5a502118dc.png)](https://i.stack.imgur.com/edUhH.png)

**4.**你快完成了！现在您需要打开您希望从中放松的视图控制器并创建一些将执行 segue 的方法。例如，您可以添加按钮，使用**@IBAction**将其与代码连接，然后在此**IBAction**中添加**perfromSegue(withIdentifier:sender:)**方法：

```
 @IBAction func unwindToSomeVCWithSegue(_ sender: UIButton) {
         performSegue(withIdentifier: "unwindSegueIdentifier", sender: nil)
     } 
```

所以这就是你所要做的！

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2019-04-02T11:48:42.723

## 斯威夫特 4.2，Xcode 10+

*对于那些想知道如何使用**未通过情节提要设置的**VC 来做到这一点的人（那些通过搜索“以编程方式”+“展开转场”来解决这个问题的人）。*

鉴于您无法以编程方式设置展开转场，最简单的纯编程解决方案是调用：

`navigationController?.popToRootViewController(animated: true)`

这会将堆栈上的所有视图控制器弹出回您的根视图控制器。

* * *

要从导航堆栈中弹出最顶层的视图控制器，请使用：

`navigationController?.popViewController(animated: true)`

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2013-04-19T20:13:34.687

仅供参考：为了使@Vadim 的答案与从视图控制器中调用的手动展开序列操作一起工作，您必须放置命令：

```
[self performSegueWithIdentifier:(NSString*) identifier sender:(id) sender]; 
```

在被覆盖的类方法**viewDidAppear**内部，如下所示：

```
-(void) viewDidAppear:(BOOL) animated
{
    [super viewDidAppear: animated];

    [self performSegueWithIdentifier:@"SomeSegueIdentifier" sender:self];
} 
```

如果您将它放在其他 ViewController 方法中，例如**viewDidLoad**或**viewWillAppear**，它将被忽略。

# ruby-on-rails - Net.tutorialplus.com -Rspec 教程- NoMethodError

> ID：12509426
> 
> 赞同：0
> 
> 时间：2012-09-20T09:08:02.313
> 
> 标签：ruby-on-rails, ruby, rspec, tdd

我正在关注 Net.Tutsplus.com 上的 Rspec 测试教程。我发现了我无法解决的问题。这里的事情。

当我运行测试时：

C:\projekt>rspec 规范/library_spec.rb --format 嵌套

我得到：

```
C:/projekt/spec/library_spec.rb:35:in `block (3 levels) in <top (required)>': un
defined method `books' for nil:NilClass (NoMethodError) 
```

library_spec.rb 看起来像这样：

```
require "spec_helper"

    describe "Library Object" do

    before :all do
        lib_arr = [ 
        Book.new("JavaScript: The Good Parts", "Douglas Crockford", :development),
        Book.new("Designing with Web Standarts", "Jeffrey Zeldman", :design),
        Book.new("Don't Make me Think", "Steve Krug", :usability),
        Book.new("JavaScript Patterns", "Stoyan Sefanov", :development),
        Book.new("Responsive Web Design", "Ethan Marcotte", :design)
    ]

    File.open "books.yml", "w" do |f|
        f.write YAML::dump lib_arr
    end

end

before :each do
    @lib = Library.new "books.yml"

end

describe "#new" do
    context "with no parameters" do
        it "has no books" do
            lib = Library.new
            lib.books.length.should == 0
        end
end

    context "with a yaml file name parameters " do
        it "has five books"
        @lib.books.length.should == 5
    end
end
 end 
```

由于教程说明，我将 library.rb 更改为：

```
require 'yaml'

 class Library
attr_accessor :books

def initalize lib_file = false
    @lib_file = lib_file
    @books = @lib_file ? YAML::load(File.read(@lib_file)) : []
    end
 end 
```

根据教程，它应该解决“books-NoMethodError”问题，但它仍然存在。哪里有问题？

感谢帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T09:32:03.080

`undefined method books for nil:NilClass (NoMethodError)`只是意味着您正在调用`books`nil 的方法，在这种情况下`@lib`。

您需要将`before(:each)`定义的钩子`@lib`放在上下文或描述块中，在您的代码中它在块中不可用`describe '#new'`。

`it "has five books"`此外，您在定义规范后错过了一个 do 。

我在下面更正了这些错误：

```
describe "#new" do
  before :each do
    @lib = Library.new "books.yml"
  end

  context "with no parameters" do
    it "has no books" do
      lib = Library.new
      lib.books.length.should == 0
    end
  end

  context "with a yaml file name parameters " do
    it "has five books" do
      @lib.books.length.should == 5
    end
  end
end 
```

# matplotlib - Matplotlib：空混淆矩阵

> ID：12509430
> 
> 赞同：0
> 
> 时间：2012-09-20T09:08:10.107
> 
> 标签：matplotlib, confusion-matrix

需要用这个脚本绘制一个混淆矩阵。通过运行它会出现一个空图。似乎我接近解决方案。有什么提示吗？

```
from numpy import *
import matplotlib.pyplot as plt
from pylab import *

conf_arr = [[50.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0], [3.0, 26.0, 0.0, 0.0, 0.0, 1.0, 0.0], [0.0, 0.0, 10.0, 0.0, 0.0, 0.0, 0.0], [4.0, 1.0, 0.0, 5.0, 0.0, 0.0, 0.0], [3.0, 0.0, 1.0, 0.0, 6.0, 0.0, 0.0], [0.0, 0.0, 0.0, 0.0, 0.0, 47.0, 0.0], [2.0, 0.0, 0.0, 0.0, 0.0, 0.0, 8.0]]

norm_conf = []
for i in conf_arr:
        a = 0
        tmp_arr = []
        a = sum(i,0)
        for j in i:
        tmp_arr.append(float(j)/float(a))
        norm_conf.append(tmp_arr)

plt.clf()
fig = plt.figure()
ax = fig.add_subplot(111)
res = ax.imshow(array(norm_conf), cmap=cm.jet, interpolation='nearest')
cb = fig.colorbar(res)
savefig("confmat.png", format="png") 
```

谢谢，我有剧情。现在，x 轴上的刻度非常小（图形尺寸为：3 cm x 10 cm 左右）。如何放大它们以获得更比例的图形，比如说 10cm x 10cm 的图？一个可能的原因是我将图形可视化为子图？无法找到合适的文献来调整它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T10:58:06.843

`plt.clf()`在添加新图形之前，您无需清除当前图形 ( )。

```
#plt.clf()  # <<<<< here
fig = plt.figure()
ax = fig.add_subplot(111) 
```

# haskell - 将 Ptr() 转换为 SourceCompletionProvider

> ID：12509431
> 
> 赞同：1
> 
> 时间：2012-09-20T09:08:11.440
> 
> 标签：haskell, gtk2hs

我已经部分解决了上一个[问题](https://stackoverflow.com/questions/12454209/gtksourceview2-implement-completion-provider)。

现在我可以`GObject`通过`bindings-gobject`（参见[hpase](http://hpaste.org/74985)）注册子类型，我可以`SourceCompletionProvider`使用[c'g_type_add_interface_static](http://hackage.haskell.org/packages/archive/bindings-gobject/0.3/doc/html/Bindings-GObject-TypeInformation.html#v:c-39-g_type_add_interface_static)函数来实现（但还没有尝试过）。

唯一的问题是`Ptr ()`将由返回的转换`c'g_object_newv`为`gtk2hs`数据类型`SourceCompletionProvider`。我该怎么做？有什么提示吗？

`SourceCompletionProvider`定义如下：

```
newtype SourceCompletionProvider = SourceCompletionProvider (ForeignPtr (SourceCompletionProvider)) 
```

这个定义是什么意思？为什么它是递归的？提供者是`ForeignPtr`提供者——对我来说看起来很奇怪。

谢谢。

**解决方案：**

```
makeNewGObject mkGObject $ castPtr <$> c'g_object_newv myObType 0 nullPtr 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T10:28:26.183

外部`SourceCompletionProvider`是必需的，因为这是一个新类型，而内部`SourceCompletionProvider`只是一个标记，用于将此外部指针与指向其他类型的指针区分开来。如果您查看 的[定义`Ptr a`](http://hackage.haskell.org/packages/archive/base/latest/doc/html/src/GHC-Ptr.html#Ptr)，它是`data Ptr a = Ptr Addr#`-`a`是一种幻影类型，不会出现在右侧，因此该定义实际上不是递归的。

您可以将 a 转换`Ptr ()`为`ForeignPtr ()`using [`newForeignPtr_`](http://hackage.haskell.org/packages/archive/base/4.6.0.0/doc/html/Foreign-ForeignPtr-Safe.html#g:2)，然后将其转换为`ForeignPtr SourceCompletionProvider`with [`castForeignPtr`](http://hackage.haskell.org/packages/archive/base/4.6.0.0/doc/html/Foreign-ForeignPtr-Safe.html#g:3)。

**编辑：**在看了这个之后，我认为要完成这项工作，您需要首先使用上述方法将您的转换为，然后`Ptr`使用. 不过没有测试。`GObject``unsafeCastGObject`

# sql - 如何使用 WHERE 子句优化 SQL 查询

> ID：12509432
> 
> 赞同：3
> 
> 时间：2012-09-20T09:08:23.663
> 
> 标签：sql, sql-server, sql-server-2005, where-clause

我有一个非常简单的查询。

```
SELECT top 100 *
FROM logs
WHERE description LIKE '%5488826%'
ORDER BY id DESC 
```

但是，它包含一个 LIKE 子句，该子句正在搜索较大的文本字段。

我知道该表只有（例如）200200 行

（我只对查找在行 id > 200000 中发生的事情感兴趣）。

我*试图*通过添加来优化查询

```
 SELECT top 100 *
 FROM logs
 WHERE  ID > 200000 
 AND description LIKE '%5488826%'
 ORDER BY id DESC 
```

我的想法是 SQL 将`ID > 200000`首先运行约束，这将有助于加快查询速度，但运行仍需要几分钟，我应该怎么做才能使它运行得更快。

编辑：ID 是 PK 和索引

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-20T09:13:44.380

您可以尝试创建一个临时表，其中仅包含 id > 200000 的条目，并查询它是否有任何区别：

```
SELECT * INTO #temp FROM logs WHERE id > 200000;

SELECT * FROM #temp WHERE description LIKE '%5488824%' ORDER BY id DESC; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T09:13:10.037

看看这是否有效：

```
SELECT top 100 * from
(select description FROM logs  WHERE  ID > 200000 )  s
where s.description LIKE '%5488826%'  
ORDER BY s.id DESC 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-20T09:15:47.287

我会尝试子查询第一个约束。取决于您使用的数据库，您可以尝试以下操作：

```
SELECT TOP 100 * FROM (
SELECT ID, description FROM logs WHERE ID > 200000
) AS data
JOIN
   logs 
ON
   logs.id = data.id
WHERE
   data.description LIKE '%5488826%'
ORDER BY
   ID DESC 
```

或（对于 SQL Server - 使用 CTE 并读取未提交的提示）：

```
;WITH data AS (
    SELECT ID, description FROM logs WITH (NOLOCK) WHERE ID > 200000
)
SELECT
  logs.*
FROM
  data 
  JOIN
    logs WITH (NOLOCK)
  ON
    logs.id = data.id
WHERE
  data.description LIKE '%5488826%' 
```

并确保您在`id`列上有索引。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-09-20T09:13:48.763

非常简短的回答 ;-) 为列添加索引。

# c# - 具有两种可能类型的通用属性

> ID：12509436
> 
> 赞同：1
> 
> 时间：2012-09-20T09:08:50.893
> 
> 标签：c#, .net, generics

我正在尝试创建一个公共属性，它可以是 type`long`或`Guid`. 泛型可以吗？例如类似的东西

```
public virtual T where T: long or Gui Id { get; set; } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-20T09:23:14.993

> 泛型可以吗？

这是不可能的，但您可以使用 use[`implicit operator`](http://msdn.microsoft.com/en-us/library/z5z9kes2.aspx)来支持`long`and `Guid`，示例代码：

```
internal class YourId
{
    public long LongId { get; private set; }
     public Guid GuidId { get; private set; }

    public YourId(long longValue)
    {
        LongId = longValue;
    }

    public YourId(Guid guidValue)
    {
        GuidId = guidValue;
    }

    public static implicit operator long(YourId yourId)
    {
        return yourId.LongId;
    }

    public static  implicit operator YourId(long value)
    {
        return new YourId(value);
    }

       public static implicit operator Guid(YourId yourId)
    {
        return yourId.GuidId;
    }

    public static  implicit operator YourId(Guid value)
    {
        return new YourId(value);
    }
} 
```

现在您可以使用：

```
YourId id1 = Guid.NewGuid();
YourId id2 = long.MaxValue; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T09:10:35.667

不，这是不可能的。如果您只有两种可能的类型，那么只需将类编写两次，将尽可能多的通用代码放在一个通用基类中？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-20T09:10:38.950

不，那是不可能的。没有这样的约束。这是[可能的约束列表](http://msdn.microsoft.com/en-us/library/d5x73970.aspx)。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-20T09:10:39.607

不，这是不可能的，您必须选择同一个父类，或者您应该编写自己的类的实现来存储两者。

就像是：

```
class LongOrGuid
{
     private Guid _guid;
     private long _long;
     private bool _isGuid = true;

     public LongOrGuid(Guid g)
     {
          _guid = g;
          _isGuid = true;
     }

     public LongOrGuid(long l)
     {
          _long = l;
          _isGuid = false;
     }

     public long Long
     {
          get
          {
               if(_isGuid)
               {
                    throw new NotSupportedException("This is a guid");
               }
               return _long;
          }
     }

     public Guid Guid
     {
          get
          {
               if(!_isGuid)
               {
                    throw new NotSupportedException("This is a long");
               }
               return _guid;
          }
     }

     public bool IsGuid
     {
          get
          {
               return _isGuid;
          }
     }
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-20T09:37:01.373

属性不能像那样是通用的。也许您可以使包含该属性的类改为泛型？

您不能限制为`long`或`Guid`。你可以说：

```
class ClassContainingYourProperty<T> where T : struct, IFormattable, IComparable<T>, IEquatable<T>
{
  static ClassContainingYourProperty() // do type check in static constructor
  {
    var t = typeof(T);
    if (t != typeof(long) && t != typeof(Guid))
      throw new NotSupportedException("T cannot be " + t);
  }

  public virtual T YourProperty { get; set; }
} 
```

# javascript - getElementsByClassName > 获取孩子

> ID：12509440
> 
> 赞同：5
> 
> 时间：2012-09-20T09:08:59.313
> 
> 标签：javascript, dom, getelementbyid

我有这个 HTML 代码：

```
<div id="channels_0">
   <div id="channels">
      <h4 class="date"><span id="date">Sat 22nd Sep</span> @ 
      <span id="time">12:45</span></h4>
      <h3 class="teems"><span id="date">Swansea City v Everton </span></h3>
      <h4 class="tv"><span id="mychannels"></span>Sky Sports 2/Sky Sports 2 HD</h4>
   </div>
</div> 
```

我有这个 JS：

```
document.getElementById('channels').innerText) 
```

哪个输出：

```
Sat 22nd Sep @ 12:45
Swansea City v Everton
Sky Sports 2/Sky Sports 2 HD 
```

我如何获得句柄并输出单个项目，例如：mychannels，或 teems，或时间或日期，即我需要让孩子们，这是如何完成的？

我努力了：

```
document.getElementById('channels').getElementsByTagName('date').value; 
```

和

```
document.getElementsByClassName('date').value; 
```

和其他人，但似乎仍然无法处理它。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-20T09:34:03.483

使用像 jQuery 这样的以 DOM 为中心的 Javascript 库可以使这些任务变得更加容易，代码如下：

```
$('#channels .date').text(); 
```

使用本机方法要实现的重要一点是，虽然`getElementById`总是返回单个元素，但像`getElementsByClass`返回元素集合这样的方法，这是您的代码无法正常工作的原因之一（另一个原因是这`value`不是标准的 DOM 元素属性：它用于检索表单元素的当前值）。

以下文档方法`querySelectorAll`适用于版本 8 以上的所有现代浏览器和 IE（`getElementsByClassName`直到版本 9 在 IE 中才有效）：

```
document.querySelectorAll('#channels .date'); 
```

要组合`innerHTML`出现的任何元素（在您的代码中它只是一个，但可能更多），您需要将该元素集合存储在一个变量中，然后遍历它们以`innerHTML`逐个提取它们：

```
var dates     = document.querySelectorAll('#channels .date');
var datesText = (function(){
    var string = '';

    for(var i = 0; i < dates.length; i++){
        string += dates[i].innerText;
    }

    return string;
}()); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-20T09:12:17.203

```
var channels = document.getElementById('channels');

var date = channels.getElementsByClassName("date")[0];
var datePart = date.getElementById("date").innerHTML;
var timePart = date.getElementById("time").innerHTML;

var teems = channels.getElementsByClassName("teems")[0];
var teemsDate = teems.getElementById("date").innerHTML;

var tv = channels.getElementsByClassName("tv")[0];
var tvChannel = tv.innerText; 
```

另请注意，您`id`的 s 在整个文档中应该是唯一的。

**[演示](http://jsfiddle.net/MLJ6N/)**。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-20T09:19:21.333

如果您需要获取根节点的所有直系后代，请使用此，

```
 var rootChildren = document.getElementById('channels_0').childNodes; 
```

如果您需要根节点的所有子节点，请使用此

```
 var allChildren = document.getElementById('channels_0').getElementsByTagName('*'); 
```

或者获取根节点的所有跨度，因为那是文本所在的位置，试试这个，

```
 document.getElementById('channels').getElementsByTagName('span'); 
```

我不确定这是否是您想要完成的。尽管。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-20T09:12:37.657

尝试这个

```
document.getElementById('mychannels').innerHTML 
```

如果你在不同的地方没有相同的 id

# opengl - Win8/VS2012：无法打开包含文件“GL/glew.h”：没有这样的文件或目录

> ID：12509441
> 
> 赞同：6
> 
> 时间：2012-09-20T09:09:08.100
> 
> 标签：opengl, visual-studio-2012, freeglut, glew

我正在尝试从 Windows 7 迁移到 8，但 glew 和 freeglut 给我带来了问题。

我使用的指令基本上如下：

1) 将库的 Lib 和 Include\GL 文件夹的内容复制到 Program Files\Microsoft SDKs\Windows\[latest version] Lib 和 Include\GL 文件夹

2) 将freeglut.dll和glew的bin文件夹内容复制到Windows\SysWOW64\

使用 Windows 7/VS2010（其中 Microsoft SDK 中的文件夹为 v7.0A）运行良好，但在 Windows 8/VS2012 上，构建解决方案时出现以下错误：

```
error C1083: Cannot open include file: 'GL/glew.h': No such file or directory 
```

对于 SDKs 文件夹，在 Windows 8 上，最新版本是 v8.0A，但是，我也尝试使用 v7.0A，得到相同的结果。但是，我确实注意到，在 Windows 7 中，SDKs 文件夹有 Lib 和 Include 文件夹，但 Windows 8 文件夹没有。不确定这是否重要。

有什么建议么？

编辑：我用于安装的说明是对[此处](http://openglbook.com/setting-up-opengl-glew-and-freeglut-in-visual-c/)找到的说明进行了轻微修改，修改是将 dll 复制到 Windows 的系统文件夹中，而不是复制到每个项目输出中（这似乎也无济于事）。

我正在开发的应用程序是针对大学课程的，因此使用其他库可能是不可能的。

库的版本是 2.8.0 (freeglut) 和 1.9.0 32 位 (glew)。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-20T20:45:31.190

据我了解，GLEW 和 GLUT 已从最新的 SDK 中删除。无论如何，它们已经过时了。[您可以从此处](http://glew.sourceforge.net/)和[此处](http://www.opengl.org/resources/libraries/glut/)获取最新的头文件和库，然后以通常的方式将它们与您的项目集成。

# php - Doctrine DBAL 2：fetchAll() 不必要的数组维度

> ID：12509443
> 
> 赞同：18
> 
> 时间：2012-09-20T09:09:23.350
> 
> 标签：php, pdo, doctrine-orm, dbal

在 DBAL2 中，当我执行这样的查询时：

```
<?php
$connection = $this->getDatabaseConnection();

$sql =  "SELECT page_url
           FROM cms_user_page
          WHERE site_id = :siteid
            AND active = '1'
    ";

$stmt = $connection->prepare($sql);
$stmt->bindValue("siteid", $id);
$stmt->execute(); 

return $stmt->fetchAll();
?> 
```

我得到这样的结果：

```
Array
(
    [0] => Array
        (
            [page_url] => index.php?action=login
        )

    [1] => Array
        (
            [page_url] => index.php?action=shoppingcart
        )

    [2] => Array
        (
            [page_url] => index.php?action=products
        )
) 
```

### 我的问题是，是否有产生如下结果的获取模式：

```
Array
(
    [0] => index.php?action=login

    [1] => index.php?action=shoppingcart

    [2] => index.php?action=products
) 
```

我在文档中找不到有关获取模式的任何信息。我可以做一个数组映射。但在我看来，这是开销..

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2015-04-16T12:33:39.830

您可以将*获取模式*参数传递给`fetchAll()`.

```
$stmt->fetchAll(\PDO::FETCH_COLUMN) 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-12-13T22:34:03.090

此答案已被编辑，因为[此答案](https://stackoverflow.com/a/29674872)是正确的。

您可以`FETCH_COLUMN`在 fetchAll() 中使用 fetch 模式：

```
$stmt->fetchAll(\PDO::FETCH_COLUMN) 
```

正如另一位用户在评论中指出的那样，fetchAll() 可以返回以多种有趣格式格式化的数据。

或者您可以使用 fetchColumn() 进行迭代：

```
while($page_url = $stmt->fetchColumn()) { 
    echo $page_url . PHP_EOL;
} 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2015-02-11T10:44:08.780

从 PHP5.5 开始，您可以使用[aray_column](http://php.net/manual/en/function.array-column.php)来实现所需的结果，如下所示：

```
<?php
$connection = $this->getDatabaseConnection();

$sql =  "SELECT page_url
           FROM cms_user_page
          WHERE site_id = :siteid
            AND active = '1'
    ";

$stmt = $connection->prepare($sql);
$stmt->bindValue("siteid", $id);
$stmt->execute(); 
$data = array_column($stmt->fetchAll(), 'page_url');

return $data; 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-09-20T09:58:45.740

如果你有不止一种情况需要这种形式的结果，虽然我也不太理解这种意义，但你可以实现 AbstractHydrator 接口来创建你自己的 ArrayHydrator，它会根据需要返回结构。

水合课程位于 NS：

```
Doctrine\ORM\Internal\Hydration 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2020-12-03T16:02:42.897

看起来`fetchAll`在最新版本的 DBAL 中已弃用。但是，我发现了另一种称为`fetchFirstColumn`的方法，它似乎与`fetchAll(\PDO::FETCH_COLUMN)`. 我目前使用的是 2.11.1 版 Doctrine DBAL。

我在 Symfony 中这样使用它：

```
$statement = $connection->prepare('SELECT foo FROM bar WHERE baz = :baz');
$statement->execute([':baz' => 1]);
$result = $statement->fetchFirstColumn(); 
```

$result 的值将是一个从 0 开始的数字索引数组，如下所示：

```
[
    0 => 'foo1', 
    1 => 'foo2'
]; 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-20T09:46:35.913

一旦您在数据库中请求多行，它就**没有**意义。

RDBMS 存储行和列，因此它表示的结果是惊喜、行和列。

在编程世界中称为矩阵，在 PHP 世界中称为矩阵`array`

```
 ________________
| id   |   name  |
|______|_________|
| 1    |   foo   |
|______|_________|
| 2    |   bar   |
|______|_________| 
```

将导致

```
array(
  0 => array(
     'id'   => 1,
     'name' => 'foo',
  ),
  1 => array(
     'id'   => 2,
     'name' => 'foo',
  )
); 
```

所以**不，你不能那样做**，你宁愿处理结果以满足你的需要。

# mysql - 在NULL的情况下获取其他字段值

> ID：12509444
> 
> 赞同：1
> 
> 时间：2012-09-20T09:09:27.363
> 
> 标签：mysql, sql

```
CREATE TABLE itemmast (
  cid INTEGER,
  description varchar(30),
  defaultprice DOUBLE);

INSERT INTO itemmast VALUES (1, 'Item 1', '0');
INSERT INTO itemmast VALUES (2, 'Item 2', '8');
INSERT INTO itemmast VALUES (3, 'Item 3', '5.5');
INSERT INTO itemmast VALUES (4, 'Item 4', '0');
INSERT INTO itemmast VALUES (5, 'Item 5', '59');

CREATE TABLE specialprice (
  cid INTEGER,
  username varchar(30),
  newprice DOUBLE);

INSERT INTO specialprice VALUES (4, 'UserS', '10');
INSERT INTO specialprice VALUES (2, 'UserX', '115'); 
```

我想为特定用户获取 [newprice] 的值，以防万一它在 [specialprice] 表中，否则从 [itemmast] 表中获取 [defaultprice]

到目前为止，我有这个但没有按预期工作。

```
SELECT itemmast.*,newprice,
CASE specialprice.newprice
    WHEN NULL
      THEN itemmast.defaultprice
ELSE
  specialprice.newprice
END AS itemprice
FROM itemmast
LEFT JOIN specialprice ON specialprice.cid = itemmast.cid
where itemmast.cid = '1' and username= 'UserS' 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T09:14:18.547

`CASE`将您的陈述更改为

```
CASE WHEN specialprice.cid IS NULL
     THEN itemmast.defaultprice
     ELSE specialprice.newprice
END as RealPrice 
```

# [SQLFiddle 演示](http://sqlfiddle.com/#!2/aa03c/3)

或者使用`COALESCE`

```
COALESCE(specialprice.newprice, itemmast.defaultprice) 
```

# [SQLFiddle 演示](http://sqlfiddle.com/#!2/aa03c/6)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T09:13:52.623

为什么不宁愿我们[IFNULL](http://dev.mysql.com/doc/refman/5.0/en/control-flow-functions.html#function_ifnull)

> •IFNULL(expr1,expr2)
> 
> 如果 expr1 不为 NULL，则 IFNULL() 返回 expr1；否则返回 expr2。IFNULL() 返回一个数字或字符串值，具体取决于使用它的上下文。

```
mysql> SELECT IFNULL(1,0);
        -> 1
mysql> SELECT IFNULL(NULL,10);
        -> 10
mysql> SELECT IFNULL(1/0,10);
        -> 10
mysql> SELECT IFNULL(1/0,'yes');
        -> 'yes' 
```

所以在你的例子中，像

```
SELECT  itemmast.*,
        newprice,  
        IFNULL(specialprice.newprice, itemmast.defaultprice) itemprice
FROM    itemmast  LEFT JOIN 
        specialprice ON specialprice.cid = itemmast.cid 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-20T09:18:50.267

对于更通用的方法，请使用 IF(,,)：

```
IF (specialprice.newprice IS NULL, specialprice.defaultprice, specialprice.newprice) 
```

参考：[http ://dev.mysql.com/doc/refman/5.1/en/control-flow-functions.html#function_if](http://dev.mysql.com/doc/refman/5.1/en/control-flow-functions.html#function_if)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-20T09:27:33.777

其他答案都可以，但是您的 SQL 不起作用的*原因*`null`是它永远不等于任何东西，甚至不等于`null`，并且您的 case 语句正在比较的值`specialprice.newprice`与`null`which*永远不会*为真。

唯一适用于 null 的测试是特殊`is null`测试，因此您必须使用它：

```
case when specialprice.newprice is null ... else ... end 
```

或使用内置功能：

```
select ifnull(specialprice.newprice, itemmast.defaultprice) ... 
```

# python - python, pyserial 读取回复数据

> ID：12509451
> 
> 赞同：1
> 
> 时间：2012-09-20T09:10:07.773
> 
> 标签：python, pyserial

我使用以下十六进制格式写入我的设备`pyserial`：

```
ser.write("\x01\x03\x00\x00\x00\x0A\xC5\xCD")
data = ser.readline()
print data 
```

输出是：

```
Q,f�    ��
Q.f�    �   
Q8f�    �B
Q5f�    � 
```

我的问题是如何以十六进制格式显示输出，例如

```
01 03 14 50 AD 00 00 00 00 00 00 00 00 00 00 66 DC 00 00 00 09 00 00 A8 42 
```

另外，如何转换为十进制：

```
50AD = 20653
66DC = 26332 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T18:29:51.447

查看十六进制：

```
print ' '.join('%2x' % ord(c) for c in data) 
```

我不太确定您要查看小数点做什么。如果您尝试将数据拆分为 16 位块并将它们显示为十进制，那么这应该可以解决问题：

```
print [256*ord(c) + ord(d) for c, d in zip(data[::2], data[1::2])] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T09:23:05.650

我猜你有两个问题：

1.  Python 脚本使用的波特率与终端中设置的波特率不匹配。在发送一些仅用于测试的可打印 ASCII 值时尝试让它们正确。
2.  如果您想以十六进制（而不是 ASCII 字符）的形式查看数据，请查看是否可以更改终端中的某些设置。

# jquery - 你如何将一些脚本应用于每个具有相同 id 的 css 元素？

> ID：12509452
> 
> 赞同：4
> 
> 时间：2012-09-20T09:10:16.067
> 
> 标签：jquery

**HTML：**

```
<div id="tab">This is a paragraph.</div>
<div id="tab">This is a paragraph.</div>
<div id="tab">This is a paragraph.</div>
<div id="tab">This is a paragraph.</div> 
```

**CSS：**

```
#tab{
  height:30px;
  width:130px;
  background-color:red;
} 
```

**查询：**

```
$(document).ready(function() {
    function randomNumber() {
        return Math.floor(Math.random() * 255)
    }
    $('#tab').mouseover(function() {
        $('#tab').css('background-color', 'rgb(' + randomNumber() + ',' + randomNumber() + ',' + randomNumber() + ')');
    });
    $('#tab').mouseout(function() {
        $('#tab').css('background-color', 'white');
    });
}); 
```

我有这个小提琴，我希望颜色变化影响所有#tabs，而不仅仅是第一个，我该怎么做？

[小提琴](http://jsfiddle.net/zhirkovski/nHCXV/)示例可以在这里找到。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T09:12:40.543

您只能分配一个 ID 一次！将其更改为像这样的类[http://jsfiddle.net/nHCXV/3/](http://jsfiddle.net/nHCXV/3/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T09:12:54.507

改用一个类。然后您可以使用

```
 $('.classname') 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-20T09:15:00.253

您需要将 id 属性更改为 class，因为 id 是唯一的。让我们试试这是在[jsfiddle](http://jsfiddle.net/muthusamy/nHCXV/4/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-20T09:17:56.390

这是一个小提琴女巫的正确方法：

[http://jsfiddle.net/ToBadForU/9p7ud/](http://jsfiddle.net/ToBadForU/9p7ud/1/)

这就是你想要的，对吧？

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-20T09:13:12.377

您可以在没有任何' 或的情况下`id`声明' ，而不是给出相同的 '，并给出下面的代码。要了解有关选择器的更多信息，请访问此[链接](http://api.jquery.com/category/selectors/)。`div``id``class`

```
$(document).ready(function() {
function randomNumber() {
    return Math.floor(Math.random() * 255)
}
$('div').mouseover(function() {
    $('div').css('background-color', 'rgb(' + randomNumber() + ',' + randomNumber() + ',' + randomNumber() + ')');
});
$('div').mouseout(function() {
    $('div').css('background-color', 'white');
  });
});​ 
```

或者简单地使用`class`而不是`id`'s。 [因为 id 是唯一的，但不是 classes](http://css-tricks.com/the-difference-between-id-and-class/)。

# tridion - 我应该如何从 DWT 获取 Keyword Key

> ID：12509454
> 
> 赞同：3
> 
> 时间：2012-09-20T09:10:27.537
> 
> 标签：tridion, tridion-2011

这类似于这个[XSLT question](https://stackoverflow.com/questions/10980316/how-can-i-get-the-key-of-a-keyword-from-an-xslt-tbb)，但最终是针对 DWT。

我们可以通过 C# TBB获取[关键字的键。](http://sdllivecontent.sdl.com/LiveContent/content/en-US/SDL_Tridion_2011_SPONE/concept_F2911E7E7A1C471DB4934662D5AB6F95)

```
ItemFields fields = new ItemFields(component.Metadata, component.Schema);
KeywordField keywordField = fields["state"] as KeywordField;

String stateValue = package.EvaluateExpression("Component.Metadata.state");

package.PushItem("statekey", package.CreateStringItem(ContentType.Text, keywordField.Value.Key)); 
```

在 DWT 中，我有时想要`key`组件中的选定关键字。

**从包中添加和获取这些是正确的方法吗？**

`@@Component.Metadata.State@@`让我获得价值。直接从 DWT 引用密钥会很好，但我没有看到任何建议 DWT 公开它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-20T09:48:39.300

我怀疑为此你需要按照你的建议走 TBB 路线，或者甚至编写你自己的 DWT 函数来公开它。

您可以在此处找到创建 DWT 函数的示例：[http ://www.tridiondeveloper.com/get-and-set-variables-in-dwts](http://www.tridiondeveloper.com/get-and-set-variables-in-dwts)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-20T12:02:24.603

作为约翰答案的另一种选择。对 Will 的“获取组件模板 Uris”采取类似的方法并编写一个 TBB 迭代类别的关键字并将它们写入具有所需输出值的包中怎么样？然后，您可以通过“双重评估”直接从 DWT 使用这些值，例如：

```
@@Keyword${Component.Metadata.state}Value@@ 
```

# objective-c - 扩展我的单例类

> ID：12509455
> 
> 赞同：0
> 
> 时间：2012-09-20T09:10:29.210
> 
> 标签：objective-c, xcode, singleton

我使用了一个只包含一个传递值的单例类。然后我尝试添加另一个。

```
#import <Foundation/Foundation.h>

@interface GlobalValueContainer : NSObject {

    NSString *passedText;
    NSString *myPassedPictureName;
}

@property (nonatomic, strong) NSString* passedText;
@property (nonatomic, strong) NSString* myPassedPictureName;

+ (GlobalValueContainer *) sharedStore;

@end

#import "GlobalValueContainer.h"

@implementation GlobalValueContainer;

@synthesize passedText;
@synthesize myPassedPictureName;

static GlobalValueContainer *sharedStore = nil;

+ (GlobalValueContainer *) sharedStore {
    @synchronized(self){
        if (sharedStore == nil){
            sharedStore = [[self alloc] init];
        }
    }

    return sharedStore;
}

@end 
```

然后从第一个视图开始，我尝试设置`myPassedPictureName`

```
-(IBAction)setPicture:(id)sender{

    myPicture = @"Hus";
    GlobalValueContainer* localContainer = [GlobalValueContainer sharedStore];
    localContainer.myPassedPictureName = myPicture;

} 
```

在第二个视图上，我想设置一个具有该名称的图像视图（即 +png）

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    //Store* myStore = [Store sharedStore];

    GlobalValueContainer* localContainer = [GlobalValueContainer sharedStore];
    myPassedPictureName = localContainer.myPassedPictureName;
    myPicture.image = [UIImage imageNamed:myPassedPictureName];
    whatFile.text = myPassedPictureName;

   //object.imageView.image = [UIImage imageNamed:@"downloadedimage.png"];

} 
```

图片不显示。我还尝试添加 UIlabel 并设置应该传递的字符串。但它也变成了空白。

当我使用“passedText”传递文本时，它工作正常。当我添加第二个 NSString 时，什么也没发生？

第一件事。任何人都可以看到有什么问题（仍然在这里学习 obj c :) 并且，这是我尝试操纵`UIImageView`. 我想使用s 根据按下的按钮在`myPassedPictureName`多个 s 上设置图片。`UIView`

期待您的输入。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T21:50:44.733

如果变量“myPassedPictureName”是文件的 URL，那么您不能使用此方法：

```
 [UIImage imageNamed:myPassedPictureName]; 
```

你应该使用

```
NSData *data = [[NSData alloc] initWithContentsOfURL:myPassedPictureName];
UIImage *image = [[UIImage alloc] initWithData:data]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T03:31:19.573

我很确定像这样使用单例传递值不是一个好主意。单例不是为传递值而设计的，而是为了做某事。所以你不能使用像
`sharedManager.passValue`
这里这样的属性有一些关于单例的很好的讨论。
[什么时候应该使用单例模式而不是静态类？](https://stackoverflow.com/questions/46541/when-should-you-use-the-singleton-pattern-instead-of-a-static-class)
我的
[Objective-C 单例应该是什么样子？](https://stackoverflow.com/questions/145154/what-does-your-objective-c-singleton-look-like)
所以我建议这样写：

```
#import <Foundation/Foundation.h>

@interface GlobalValueContainer : NSObject {

}

+ (id) sharedManager;
-(NSString*)myText;
-(NSString*)myPictureName;

@end

#import "GlobalValueContainer.h"

@implementation GlobalValueContainer;

static GlobalValueContainer *sharedManager = nil;

+ (id) sharedManager {
    @synchronized(self){
        if (sharedManager == nil){
            sharedManager = [[self alloc] init];
        }
    }

    return sharedManager;
}

-(NSString*)myText
{
    return @"your text";
}
-(NSString*)myPictureName
{ 
    return @"yourPictureName.png";
}  
@end 
```

# objective-c - '__bridge' 强制转换在不使用 ARC 时无效

> ID：12509463
> 
> 赞同：4
> 
> 时间：2012-09-20T09:10:42.737
> 
> 标签：objective-c, ios6, xcode4.5

在 Xcode 4.5 中编译旧项目时，会出现警告：

> '__bridge' 强制转换在不使用 ARC 时无效

消除此警告的正确方法是什么，以使代码在 ARC 和非 ARC 项目中都能正常工作？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-20T09:16:24.457

任何单独的源文件都必须使用 ARC 编译或不使用 ARC 编译。您应该下定决心，并始终对特定的源文件使用该方法。如果您坚持内存管理命名约定，您可以在同一个项目中混合使用 ARC 和非 ARC 源文件。

我上面说的原因是，如果你有为 ARC 编写的代码并且你在没有 ARC 的情况下编译它，那么由于所有的保留、释放和自动释放的事实，整个地方都会出现内存泄漏和过早的释放缺失。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T10:16:29.110

使用一些`#define`'s 很可能编写为 MRC、ARC 和 GC 中的一个以上正确编译的源文件。

Xcode 不允许你同时启用 ARC 和 GC，知道我们可以这样写：

```
#if defined(__OBJC_GC__)
#  define USING_GC 1
#else
#  define USING_GC 0
#endif

#if __has_feature(objc_arc)
#  define USING_ARC 1
#else
#  define USING_ARC 0
#endif

#if USING_ARC || USING_GC
#  define USING_MRC 0
#else
#  define USING_MRC 1
#endif 
```

它将仅定义`USING_GC`,`USING_MRC`和`USING_ARC`as 中`1`的一个，而其他两个 as `0`。你可以把它放在你的项目前缀头（.pch）中。

您可以在代码中直接使用这些定义来包含/排除诸如桥接演员之类的内容；或者更好地定义用于内存调用、强制转换等的宏，这些宏会根据使用的内存模型扩展为适当的代码。

高温高压

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-24T03:26:06.003

只需为该文件打开 ARC：

```
-fobjc-arc 
```

（转到构建阶段 > 编译源 > 编译器标志）

# yii - Yii 框架：使用 WebServices 复制 CActiveRecord 功能的 CModel

> ID：12509465
> 
> 赞同：0
> 
> 时间：2012-09-20T09:10:44.403
> 
> 标签：yii

有没有人尝试或找到一个从 CModel 派生的类的示例，该类使用 WebServices 而不是数据库连接复制 CActiveRecord 功能？

如果使用 RESTFULL WebServices 完成，那就太好了。如果数据是用JSON编码传输的，太好了！！！...

我很感激你的帮助。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T07:33:19.923

我也花了很多时间寻找它，我在 Github 上发现了这个 Yii 扩展： [https ://github.com/Haensel/ActiveResource](https://github.com/Haensel/ActiveResource)

它使您可以准确地找到您要查找的内容，**自述文件不会使用 changes.md 中反映的更改进行更新**，因此我建议您也阅读本文档。

# Yii 的 EActiveResource

...是 Yii PHP 框架的扩展，允许用户创建使用 RESTful 服务作为持久存储的模型。该实现的灵感来自 Yii 的 CActiveRecord 类和 ActiveResource 的 Ruby on Rails 实现（[http://api.rubyonrails.org/classes/ActiveResource/Base.html](http://api.rubyonrails.org/classes/ActiveResource/Base.html)）。

## 暗示：

注意：这仍然是一个 Alpha 版本！该项目最初是草稿，仍在开发中，所以只要没有 1.0 版本，您可能会遇到可能破坏您的代码的更改。查看 CHANGES.md 文件以获取更多信息

由于那里有数千种不同的 REST 服务使用一千种不同的方法，因此调试错误可能很棘手。因此，我为所有主要功能添加了广泛的跟踪，因此您应该始终能够看到每个请求、它使用的方法以及服务如何响应。只需启用 Yii 的跟踪功能并查找类别“ext.EActiveResource”

## 安装：

1.  通过将扩展放入应用程序的扩展文件夹（例如“/protected/extensions”），将扩展添加到 Yii
2.  编辑您的应用程序 main.php 配置文件并将“application.extensions.EActiveResource.*”添加到您的导入定义中
3.  将资源的配置添加到主配置

    ```
     'activeresource'=>array(
            'class'=>'EActiveResourceConnection',
            'site'=>'http://api.aRESTservice.com',
            'contentType'=>'application/json',
            'acceptType'=>'application/json',
        )),
        'queryCacheId'=>'SomeCacheComponent') 
    ```

4.) 现在创建一个像这样扩展 EActiveResource 的类（不要忘记 model() 函数！）：

## 快速概览：

```
 class Person extends EActiveResource
 {
 /* The id that uniquely identifies a person. This attribute is not defined as a property      
  * because we don't want to send it back to the service like a name, surname or gender etc.
  */
 public $id;

 public static function model($className=__CLASS__)
 {
     return parent::model($className);
 }

 public function rest()
 {
     return CMap::mergeArray(
        parent::rest(),
        array(
            'resource'=>'people',
        )
     );
 }

 /* Let's define some properties and their datatypes
 public function properties()
 {
     return array(
         'name'=>array('type'=>'string'),
         'surname'=>array('type'=>'string'),
         'gender'=>array('type'=>'string'),
         'age'=>array('type'=>'integer'),
         'married'=>array('type'=>'boolean'),
         'salary'=>array('type'=>'double'),
     );
 }

 /* Define rules as usual */
 public function rules()
 {
     return array(
         array('name,surname,gender,age,married,salary','safe'),
         array('age','numerical','integerOnly'=>true),
         array('married','boolean'),
         array('salary','numerical')
     );
 }

 /* Add some custom labels for forms etc. */
 public function attributeLabels()
 {
     return array(
         'name'=>'First name',
         'surname'=>'Last name',
         'salary'=>'Your monthly salary',
     );
 } 
```

}

## 用法：

```
/* sends GET to http://api.example.com/person/1 and populates a single Person model*/
$person=Person::model()->findById(1);

/* sends GET to http://api.example.com/person and populates Person models with the response */
$persons=Person::model()->findAll();

/* create a resource
$person=new Person;
$person->name='A name';
$person->age=21;
$person->save(); //New resource, send POST request. Returns false if the model doesn't validate

/* Updating a resource (sending a PUT request)
$person=Person::model()->findById(1);
$person->name='Another name';
$person->save(); //Not at new resource, update it. Returns false if the model doesn't validate

//or short version
Person::model()->updateById(1,array('name'=>'Another name'));

/* DELETE a resource
$person=Person::model()->findById(1);
$person->destroy(); //DELETE to http://api.example.com/person/1

//or short version
Person::model()->deleteById(1); 
```

希望这可以帮助你

# c# - 读取 XML 文件时出错

> ID：12509466
> 
> 赞同：3
> 
> 时间：2012-09-20T09:10:50.887
> 
> 标签：c#, xml, serialization, xml-serialization, linq-to-xml

```
 Person person = GetPerson();
            XmlSerializerNamespaces ns = new XmlSerializerNamespaces();
            ns.Add(string.Empty, string.Empty);
            XmlSerializer serializer = new XmlSerializer(typeof(Person));
            string personText = string.Empty;
            using (MemoryStream memoryStream = new MemoryStream())
            {
                using (XmlWriter xmlWriter = XmlWriter.Create(memoryStream, new XmlWriterSettings() { Encoding = Encoding.UTF8 }))
                {
                    serializer.Serialize(xmlWriter, person, ns);
                    xmlWriter.Flush();
                    personText = Encoding.UTF8.GetString(memoryStream.ToArray());
                }
            }

            string path = @"D:\person.xml";
// Write method 1:
            File.WriteAllText(path, personText);

// Write method 2:
            using (StreamWriter streamWriter = new StreamWriter(path, false , Encoding.UTF8))
            {
                streamWriter.Write(personText);
            }

// Read the xml
            using (FileStream fileStream = new FileStream(path, FileMode.Open))
            {
                return XDocument.Load(XmlReader.Create(fileStream));
            } 
```

当我使用方法2写入后读取xml时，我得到这个根级别的数据无效。第 1 行，位置 1。但使用方法 1 可以正常工作。

这是什么原因造成的？任何指针表示赞赏。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-20T09:22:04.750

问题是 the`StreamWriter` *和*the`XmlWriter`都添加了字节顺序标记。

选项：

*   将 BOM 字符串从`personText`开始
*   通过`new UTF8Encoding(false)`而不是`Encoding.UTF8`为`StreamWriter`
*   通过`new UTF8Encoding(false)`而不是`Encoding.UTF8`为`XmlWriter`
*   避免首先转换为文本并再次返回：您已经在 中获得二进制数据`MemoryStream`，为什么不直接将其转储*到*磁盘？

# php - strtotime +day 或 +days 有什么区别吗？

> ID：12509469
> 
> 赞同：10
> 
> 时间：2012-09-20T09:11:12.623
> 
> 标签：php, date, strtotime

正在谷歌搜索，但找不到答案。想知道这两个脚本是否有区别？

+3**天**：

```
echo date( 'd.m.Y H:i:s', strtotime( '+3 day' ) ); 
```

+3**天**：

```
echo date( 'd.m.Y H:i:s', strtotime( '+3 days' ) ); 
```

输出完全相同。

那么这是为了确保人们减少错误而实施的还是什么？
并且应该优先使用女巫一号？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-09-20T09:13:34.070

这基本上是同一件事，出于可用性和*美观*的目的：

```
strtotime( '+1 day' );
strtotime( '+3 day' );
strtotime( '+1 days' );
strtotime( '+3 days' );
strtotime( '+1 weeks' );
strtotime( '+3 week' ); 
```

你可以用你更喜欢的那个，基本上是定义de number的那个`1 day`，，`3 days`

# javascript - 在鼠标悬停时显示连接节点显示交叉链接

> ID：12509472
> 
> 赞同：1
> 
> 时间：2012-09-20T09:11:25.723
> 
> 标签：javascript, events, graph, d3.js, fade

我有一个力导向图，在节点鼠标悬停时，未连接到当前节点的元素会淡出，基于以下[示例](https://stackoverflow.com/questions/8739072/highlight-selected-node-its-links-and-its-children-in-a-d3-js-force-directed-g)。问题是，如果光标快速移动并且它穿过一个不属于目标节点连接的链接，它仍然显示为完全不透明，因为在途中触发了交叉链接鼠标悬停，但显然没有时间完成它的mouseout功能。例如，您可以看到： ![褪色问题](../Images/18b1564a3a79c5b5f216d068d093059f.png)

在图片中，鼠标从上到下快速移动，光标停在 HSA-MIR-424 上。与目标节点的连接正确显示，但也可以看到三个额外的链接，因为当光标穿过它们时会触发它们的鼠标悬停。如果我缓慢地重复从上到下的运动到同一个节点或从下到上移动到节点，则不会出现此类问题（因为在该方向上没有要穿过的链接，在图片中）。

如何避免这个问题？

代码的相关部分，链接mouseover/mouseout：

```
 .on("mouseover", function(d) {
      var selection = d3.select(this);
      var initialWidth = Number( selection.style("stroke-width") );
      selection.transition().style("stroke-width", initialWidth + Number(4) )
      .style("stroke-opacity", 1.0);
      //.style("stroke", linkOverColor);
    } )
    .on("mouseout", function(d) {
      var selection = d3.select(this);
      selection.transition().style("stroke-width", getLinkStroke( selection.data()[0] ) )
      .style("stroke-opacity", conf.link_def_opacity);
    }) 
```

节点鼠标悬停/鼠标悬停：

```
 // display closest neighbors and fade others out
    .on("mouseover", fade(0.10) )
    // return to default view
    .on("mouseout", fade(conf.node_def_opacity) ); 
```

褪色功能：

```
 function fade(opacity) {
      return function(d) {

        d3.event.stopPropagation();

        var thisOpacity;

        // return to default view
        if( opacity === conf.node_def_opacity )
        {
          d3.selectAll('marker > path').transition().style("opacity", 1);
          nodeGroup.transition().style("opacity", conf.node_def_opacity);
          link.style("stroke-opacity", conf.link_def_opacity);
        }
        else // fade not-neighborhood away
        {
          d3.selectAll('marker > path').transition().style("opacity", 0);
          // d3.selectAll('marker > path').transition().style('display', 'none');
          nodeGroup.transition().style("opacity", function(o)
          {
            thisOpacity = isConnected(d, o) ? conf.node_def_opacity : opacity;
            return thisOpacity; 
          });

          link.style("stroke-opacity", function(o) {
            return o.source === d || o.target === d ? conf.link_def_opacity : opacity;
          });              
        }
      }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T15:08:00.837

通过为节点和链接鼠标悬停动作引入计时器解决了这个问题。[此答案](https://stackoverflow.com/questions/435732/delay-jquery-hover-event/435793#435793)中列出了代码。

# php - 如何重定向到控制器中的特定视图

> ID：12509473
> 
> 赞同：0
> 
> 时间：2012-09-20T09:11:25.430
> 
> 标签：php, zend-framework

我开始更广泛地使用 Zend Framework 和 MVC，如果他在表单中输入了某些内容，我无法设法重定向用户......

```
<?php

class adresseController extends Zend_Controller_Action {

  public function init() {
    global $config;

    $protocol = strtolower(substr($_SERVER["SERVER_PROTOCOL"], 0, 5)) == 'https' ? "https://" : "http://";
    $this->view->url = $protocol . $config->app->url;
  }

    public function adresseAction() {
    //Si la méthode isPost() de l'objet de requête renvoie true, alors le formulaire a été envoyé.
    if ($this->getRequest()->isPost()) {
      //récupération des données
      $prenom = $form->getValue('prenom');
      if($prenom == "arnaud")
      {
        $this->_helper->redirector("inscription/index");
      }
  }

}
}
?> 
```

我的 HTML 表单中有问题的字段：

```
 <div><input type="text" name="prenom" value="" title="Pr&#233;nom *" class="small error"/> 
```

inscription/index 是我想要重定向到的视图的名称。

在此先感谢您的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T09:56:31.957

如果要重定向到 URL，请使用以下命令：

```
$this->_redirect("/inscription/index"); 
```

如果您想重定向到控制器，那么您已经在使用它：

```
$this->_helper->redirector('action', 'controller'); 
```

# php - Linux PHP 网络服务器 + Apache 或 Nginx

> ID：12509474
> 
> 赞同：2
> 
> 时间：2012-09-20T09:11:33.713
> 
> 标签：php, apache, nginx

我即将完成一个站点，需要决定使用哪个 Web 服务器。

该站点大量使用 PHP - 每个页面上都有很多 PHP。

我读过 Nginx 对于静态页面更快，但与 Apache 在 PHP 中的性能相比，它在 PHP 中的性能存在疑问。

有没有人对我应该使用哪个 Web 服务器有任何意见。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T09:13:22.093

Nginx...

地狱 wordpress.com 正在使用它... :)

这是一些很好的数据……您可能还想将清漆加入混合物中。[http://www.garron.me/linux/apache-vs-nginx-php-fpm-varnish-apc-wordpress-performance.html](http://www.garron.me/linux/apache-vs-nginx-php-fpm-varnish-apc-wordpress-performance.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T09:15:51.423

你可以把它们混合起来。使用 Apache 为 PHP 提供服务，并将 nginx 用于静态页面/图像。Apache 在配置方面更友好（htaccess、htpasswd、重写规则等），nginx 在静态资产方面速度很快。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-20T09:13:45.863

我们的系统管理员使用 nginx 提供静态内容，使用 apache 提供其他内容。我不太确定如何创建这样的设置，因为我只是一名开发人员，但在我们的机器上，我们同时使用它们。

# stripe-payments - Stripe 可以支持离线支付吗？

> ID：12509475
> 
> 赞同：3
> 
> 时间：2012-09-20T09:11:38.707
> 
> 标签：stripe-payments

我使用 Stripe 进行在线支付，但用户也可以离线支付（现金或支票）。我想将所有发票/费用集中在一个地方（条纹）。

我不确定是否可以将离线支付（现金或支票）添加到条带中。我想如果我使用 livemode=false 为我的实时密钥创建客户、发票和费用，我可以。

这是可行的吗？Stripe 是否会接受一些（客户、发票和费用）的 livemode=false 和另一些 livemode=true 的？

如果是，我应该填写虚假信用卡信息还是应该将其设置为 nil？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2016-05-26T05:19:41.997

如果您没有信用卡设置，Stripe 不允许您为客户创建订阅。更准确地说，如果客户无法支付下一张发票，它不允许您创建订阅。因此，对于离线支付，您可以更新客户的“account_balance”，使其具有等于客户电汇金额（信用）的负值。然后，Stripe 将允许您为客户创建订阅，因为它知道客户有足够的帐户余额来支付下一张发票。[这篇文章](https://medium.com/@uttamkini/handling-offline-payments-with-stripe-816f58207a7a#.jq3wmws03)有更多细节。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-01T18:57:08.643

我们目前不支持离线付款，因此您需要为这些付款查看单独的会计系统。

也就是说，您希望将这些数据保存在一个地方是完全可以理解的。您可能有兴趣使用我们的[webhook](https://stripe.com/docs/webhooks)系统为您的会计系统提供实时更新，而无需直接接触在 Stripe 中创建费用的代码。

# .net - 使用 powershell 从网站使用 DownloadString 时出错

> ID：12509476
> 
> 赞同：0
> 
> 时间：2012-09-20T09:11:43.403
> 
> 标签：.net, powershell

执行以下代码以获取 Web 服务器的值时，我收到此错误。

我已经阅读了一些可能的解决方案，这些解决方案涉及更改自己的 Web 服务器上的设置，但这对我来说不是一个选择，因为我不拥有服务器。

**错误**

> 使用“1”参数调用“DownloadString”的异常：“服务器违反协议。Section=ResponseStatusLine”在 C:\get.ps1:28 char:60 + $ramPage = (New-Object System.Net. WebClient).DownloadString <<<< ("http://" + $server + "/RAM/" + $evalRAMStars) + CategoryInfo : NotSpecified: (:) [], MethodInvocationException + FullyQualifiedErrorId : DotNetMethodException

**Powershell 代码**

```
Function Get-Performance(){
$CPU = Get-WmiObject win32_processor | Measure-Object -property LoadPercentage -Average | Select Average

$SystemInfo = Get-WmiObject -Class Win32_OperatingSystem | Select-Object Name, TotalVisibleMemorySize, FreePhysicalMemory
$perRam = (($SystemInfo.FreePhysicalMemory/1MB) / ($systeminfo.totalvisiblememorysize/1MB)) * 100
$perRam = 100 - $perRam

Write-host ("CPU:  " + $CPU.Average + "%")
Write-host ("Ram:  " + $perRam + "%")

$CPUStars = $CPU.Average / 10
$RAMStars = $perRam /10

if($CPUStars -lt 1){$CPUStars = 1}

Write-host ("{0:N0}" -f $CPUStars)
Write-host ("{0:N0}" -f $RAMStars)

$evalCPUStars = "{0:N0}" -f $CPUStars
$evalRAMStars = "{0:N0}" -f $RAMStars

$server = "10.0.0.188"

#this will get our page for later
$cpuPage = (New-Object System.Net.WebClient).DownloadString("http://" + $server + "/CPU/" + $evalCPUStars)
$ramPage = (New-Object System.Net.WebClient).DownloadString("http://" + $server + "/RAM/" + $evalRAMStars)
Write-host("http://" + $server + "/CPU/" + $evalCPUStars)
Write-host("http://" + $server + "/RAM/" + $evalRAMStars)
}

While($x -ne 0)
{
    Get-Performance
    Start-Sleep -s 10   #this will run the powershell script every 10 seconds.
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T13:26:06.970

$evalRAMStars 的值可能导致不安全的标头解析阻止消息。检查其值是否有效。否则，请参阅[服务器违反协议。Section=ResponseStatusLine ERROR](https://stackoverflow.com/questions/2482715/the-server-committed-a-protocol-violation-section-responsestatusline-error)以获得更多解决方案。

# javascript - RaphaelJs：如何在翻译后为路径设置动画

> ID：12509481
> 
> 赞同：1
> 
> 时间：2012-09-20T09:11:59.140
> 
> 标签：javascript, animation, raphael

我正在尝试为旋转的星形图标设置动画：

```
var star = this._paper.path("M26.522,12.293l-5.024-0.73c-1.089-0.158-2.378-1.095-2.864-2.081l-2.249-4.554c-0.487-0.986-1.284-0.986-1.771,0l-2.247,4.554c-0.487,0.986-1.776,1.923-2.864,2.081l-5.026,0.73c-1.088,0.158-1.334,0.916-0.547,1.684l3.637,3.544c0.788,0.769,1.28,2.283,1.094,3.368l-0.858,5.004c-0.186,1.085,0.458,1.553,1.432,1.041l4.495-2.363c0.974-0.512,2.566-0.512,3.541,0l4.495,2.363c0.974,0.512,1.618,0.044,1.433-1.041l-0.859-5.004c-0.186-1.085,0.307-2.6,1.095-3.368l3.636-3.544C27.857,13.209,27.611,12.452,26.522,12.293zM22.037,16.089c-1.266,1.232-1.966,3.394-1.67,5.137l0.514,2.984l-2.679-1.409c-0.757-0.396-1.715-0.612-2.702-0.612s-1.945,0.216-2.7,0.61l-2.679,1.409l0.511-2.982c0.297-1.743-0.404-3.905-1.671-5.137l-2.166-2.112l2.995-0.435c1.754-0.255,3.592-1.591,4.373-3.175L15.5,7.652l1.342,2.716c0.781,1.583,2.617,2.92,4.369,3.173l2.992,0.435L22.037,16.089z")
.attr({ fill: "darkred", stroke: "none" })
.transform("t"+starX+","+starY);

var a0 = Raphael.animation({ transform: "r360"}, 2000);
star.animate(a0.repeat(Infinity)); 
```

如果我删除翻译，我会得到一个不错的动画。但是翻译后的动画很奇怪。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T10:39:25.127

您需要在动画中考虑翻译，如下所示：

```
var paper = Raphael(0,0,500,500);
var starX = 50;
var starY = 50;

// code for your path here as its rather long! Including your translate 
// using the starX and starY

// then the animation
var a0 = Raphael.animation({ transform: "t"+starX+","+starY+"r360"}, 2000);
star.animate(a0.repeat(Infinity));​ 
```

我还在[这里制作了一个 jsfiddle 示例供您查看。](http://jsfiddle.net/aA2dp/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T10:50:38.467

动画的参数也应该包括平移，因为它们是对象的**结束**属性，而不仅仅是开始和结束之间的差异。请参阅示例：http: [//jsfiddle.net/b9akz/32/](http://jsfiddle.net/b9akz/32/)。

```
var paper = new Raphael('holder');
var starX = 100, starY = 100;
var star = paper.path("M26.522,12.293l-5.024-0.73c-1.089-0.158-2.378-1.095-2.864-2.081l-2.249-4.554c-0.487-0.986-1.284-0.986-1.771,0l-2.247,4.554c-0.487,0.986-1.776,1.923-2.864,2.081l-5.026,0.73c-1.088,0.158-1.334,0.916-0.547,1.684l3.637,3.544c0.788,0.769,1.28,2.283,1.094,3.368l-0.858,5.004c-0.186,1.085,0.458,1.553,1.432,1.041l4.495-2.363c0.974-0.512,2.566-0.512,3.541,0l4.495,2.363c0.974,0.512,1.618,0.044,1.433-1.041l-0.859-5.004c-0.186-1.085,0.307-2.6,1.095-3.368l3.636-3.544C27.857,13.209,27.611,12.452,26.522,12.293zM22.037,16.089c-1.266,1.232-1.966,3.394-1.67,5.137l0.514,2.984l-2.679-1.409c-0.757-0.396-1.715-0.612-2.702-0.612s-1.945,0.216-2.7,0.61l-2.679,1.409l0.511-2.982c0.297-1.743-0.404-3.905-1.671-5.137l-2.166-2.112l2.995-0.435c1.754-0.255,3.592-1.591,4.373-3.175L15.5,7.652l1.342,2.716c0.781,1.583,2.617,2.92,4.369,3.173l2.992,0.435L22.037,16.089z")
.attr({ fill: "darkred", stroke: "none" })
.translate(starX,starY);

var a0 = Raphael.animation({ transform: "t"+starX + "," + starY + " r360"}, 2000);
star.animate(a0.repeat(Infinity));​ 
```

# internet-explorer-9 - @font-face 不能在 IE9 中工作，只能在 IE9 中工作

> ID：12509485
> 
> 赞同：0
> 
> 时间：2012-09-20T09:12:11.217
> 
> 标签：internet-explorer-9, font-face

我一直在阅读所有其他遇到此问题的人并尝试他们所说的内容，但在 ie9 中仍然没有运气。

```
@font-face {
    font-family: 'OswaldLight';
    src: url('fonts/oswald-light-webfont.eot');
    src: url('fonts/oswald-light-webfont.eot?#iefix') format('embedded-opentype'),
         url('fonts/oswald-light-webfont.woff') format('woff'),
         url('fonts/oswald-light-webfont.ttf') format('truetype'),
         url('fonts/oswald-light-webfont.svg#OswaldLight') format('svg');
    font-weight: normal;
    font-style: normal; 
```

}

那是在css中。

该网站是[dwlawtx.com](http://www.dwlawtx.com/)

我被扔进了这个主题，所以我不知道服务器方面是什么，或者我是否缺少一些关键元素，据我所知，我做的一切都是正确的，但它不起作用，所以我在想这可能是服务器问题，但后来我认为 eot Embedded-opentype 修复应该解决这个问题，然后我所做的任何 .htaccess 编辑都不会改变任何东西，我很迷茫。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T00:10:36.423

我在使用 Oswald 字体时遇到了同样的问题，我建议使用[Font Squirrel Font Face Generator](http://www.fontsquirrel.com/fontface/generator)来生成字体文件和 CSS。选择“专家”控制选项并将“EOT 压缩”更改为“EOT Lite”（[此处显示](http://imgur.com/vR0Jj)）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T15:08:49.870

不能在 IE9 中工作

```
font: 1em/100%  'myfont' 
```

在 IE9 中完美运行

```
font: 1em/100%  myfont 
```

我花了一天的时间才把这件事做好，这只是一个问题。我喜欢这些东西，它们让我的生活更快乐。:-)

# apache - 上传/下载 BLOBs Jackrabbit

> ID：12509488
> 
> 赞同：0
> 
> 时间：2012-09-20T09:12:17.143
> 
> 标签：apache, upload, download, jackrabbit, sling

我正在寻找一种为 blob 文件提供上传/下载机制的方法。这些文件应存储在 jackrabbit 数据源存储库中。我已经为这项任务发现了 apache Sling 框架，但它似乎不适用于 lare 文件 (BLOB)，因为它有自己的 jackrabbit 实现，不能与我的 jackrabbit 数据源存储库一起使用。您对如何解决这个问题有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T07:16:53.673

请参阅[http://markmail.org/message/rcmsahf4n3olostm](http://markmail.org/message/rcmsahf4n3olostm)，您的清单问题已在此得到解答。

# c# - 将 byte[] 转换为这样的字符串 "AAAADT4RyQ="

> ID：12509490
> 
> 赞同：0
> 
> 时间：2012-09-20T09:12:19.390
> 
> 标签：c#, converter, encoder, decoder

有字节数组：{ 0, 0, 0, 0, 52, 246, 141, 6 }

它以某种方式表示为字符串：AAAAADT4RyQ=

怎么做？什么是编码器？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-20T09:13:14.820

对我来说看起来像 base64 编码：

```
string base64 = Convert.ToBase64String(data); 
```

不过，这并没有给出你所期望的结果——它给出*了*`AAAAADT2jQY=`.

您提供的 base64 字符串对应于 `{ 0, 0, 0, 0, 52, 248, 71, 36 }`- 如果没有有关此数据来自何处或如何获得预期值的更多信息，则无法解释差异。

# jpa-2.0 - 使用 EclipseLink 创建 BLOB

> ID：12509491
> 
> 赞同：4
> 
> 时间：2012-09-20T09:12:24.137
> 
> 标签：jpa-2.0, eclipselink

我正在尝试从 Hibernate 切换到 EclipseLink。现在我面临创建 BLOB 的问题。使用 Hibernate，我以这种方式解决了它：

```
import org.hibernate.LobHelper;
import org.hibernate.classic.Session;

...
  public Blob createBlob(InputStream inputStream, long length)
  {
    Session session = entityManager.unwrap(Session.class);
    LobHelper lobHelper = session.getLobHelper();
    Blob blob = lobHelper.createBlob(inputStream, length);
    return blob;
  } 
```

任何提示我如何使用 EclipseLink 做到这一点？（我在 Oracle DB 上）。

强尼

# ruby - Ruby OptionParser：我如何获得 PATH？如果命令只是“命令路径/到/某些/文件”？

> ID：12509492
> 
> 赞同：0
> 
> 时间：2012-09-20T09:12:26.050
> 
> 标签：ruby, command-line, command-line-arguments

我想创建一个具有以下结构的命令`command path/to/some/file`

如何在不输入选项 -p 或 --path 的情况下启用此功能？

```
#!/usr/bin/env ruby
require 'optparse'

options = {}
option = OptionParser.new() do |opts|

    opts.on('-p PATH', '--path PATH', 'First path argument') do |path| // How do I enable this without entering the option -p or --path? 
       options[:path] = path
    end
end

option.parse!(ARGV) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T09:20:43.077

不能`ARGV[0]`让您访问论点的第一部分吗？在您的情况下，这将是路径，也就是`path/to/some/file`. imo 在这里不需要整个解析器代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T09:43:23.477

它在文档中没有明确说明，但`OptionParser`会从中提取所有选项`ARGV`并保留其余选项，因此正确的方法就是像使用`ARGV`路径列表一样使用。

# wordpress - 使用 Wordpress 获取分层页面 URL 的最简单方法是什么？

> ID：12509495
> 
> 赞同：0
> 
> 时间：2012-09-20T09:12:35.303
> 
> 标签：wordpress, url, hierarchy

如何在 URL 中显示页面结构？

如果我有页面及其父页面的结构类似于

```
+-Home
+-Fruits
+--Apple
+--Banana
+-Vegetables
+--Salad
+--Tomatoes 
```

我想要像这样的网址

```
/fruits/apple
/vegetables/salad 
```

使用 Wordpress 获得它的最佳方法是什么？

我不是指自定义菜单，我指的是页面层次结构。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T09:30:12.090

你只需要激活[漂亮的永久链接](http://codex.wordpress.org/Introduction_to_Blogging#Pretty_Permalinks)

# flash - 在 flash 中 http 访问 crossdomain.xml

> ID：12509498
> 
> 赞同：0
> 
> 时间：2012-09-20T09:12:40.263
> 
> 标签：flash, https, crossdomain.xml

我有一个托管在亚马逊上的**html**，它上面基本上有一个**嵌入式 Flash 对象**。我正在通过 https 协议访问此 html，并且正在显示 IE 上常见的“**您是否只想查看安全传递的网页内容”警报。**当使用带有 https 协议的 url 直接访问 swf 文件时，也会发生此问题。

**我知道这是因为在 swf 文件中“不知何故”存在对外部文件“ crossdomain.xml** ”的非安全 HTTP 访问，但关键是我无法修改 swf 电影。有没有什么方法可以在不修改 swf 文件和我的 IE 浏览器上的任何配置的情况下以编程方式解决这个安全问题（避免错误消息）？

如果不是，我该如何删除对该文件的引用？我反编译了 swf 文件，并没有在 ActionScript 代码中找到任何明确的引用。无论如何，此文件当前正在外部服务器上“托管”并且不再存在（返回 404 Not Found 错误）。

任何帮助将不胜感激。

问候。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T14:30:31.637

当您尝试从 Flash 访问另一个域中的资源时，flash 最初会向同一域上的 crossdomain.xml 发出请求。这意味着您的 swf 正在尝试通过 http 访问不同域上的文件。如果不编辑 swf，您将无法解决此问题。

# tomcat - Liferay portlet 上的内存泄漏

> ID：12509503
> 
> 赞同：1
> 
> 时间：2012-09-20T09:12:49.637
> 
> 标签：tomcat, memory-leaks, liferay, portlet

我目前正在尝试找出在 Tomcat 6.0.26 上运行的 Liferay 门户（6.0.6）上的内存泄漏。我们一直在查看 OutOfMemoryException 发生时产生的内存转储，并且有非常明显的异常。一到三个 ThreadWithAttributes 有一个 String / char 数组，每个数组占用超过 1GB 的内存。它的内容是“10970_LAYOUT_56_INSTANCE_1GnU=ADddfj6O, 536133_LAYOUT_49=J23g02gH”的形式......一遍又一遍地重复。

据我了解，这是某种 portlet-id 和它的实例 id，但是我如何使用这些信息来找出导致这种情况的 portlet？总的来说，我对 Liferay 和 webapps 基本上是全新的，尽管对常规 Java SE 应用程序有很好的背景。据我了解，Tomcat 正在使用一个线程池，该线程池要求 portlet 自行清理，但我们有大量的 portlet，很难猜出负责人。那么，有没有办法使用该 String 来精确定位 portlet？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T15:17:21.297

在您的所有 portlet 中尝试下面提到的行之前，请[阅读此内容...](https://stackoverflow.com/questions/11151001/how-to-get-portlet-id-using-the-portlet-name-in-liferay)

```
 String portletId = (String) request.getAttribute(WebKeys.PORTLET_ID); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-14T00:02:12.550

请参阅 PortletInstanceFactoryImpl.java。这包含了包含所有 portlet 的 hashmap。“10970_LAYOUT_56_INSTANCE_1GnU=ADddfj6O”是 Portlet 实例 ID。liferay 的问题，因为这个哈希图没有被清理。

# regex - Tornado 中 URL 模式末尾的美元符号 ($)

> ID：12509512
> 
> 赞同：1
> 
> 时间：2012-09-20T09:13:21.813
> 
> 标签：regex, url, tornado

我在一个交给我的团队的 Tornado 应用程序中看到了一些以 $ 结尾的 URL 正则表达式......也许我不是最懂网络的人，这对其他人来说很明显，但我看不出它的区别在匹配整个字符串（不在内部搜索）时明确指示行尾。

有什么我遗漏的或者只是多余的吗？

编辑以使我的意思更清楚：

```
 handlers = [
        tornado.web.URLSpec(r'/About/$', ShowSettingsHandler),
        ...
   ] 
```

这应该与以下内容完全相同：

```
 handlers = [
        tornado.web.URLSpec(r'/About/', ShowSettingsHandler),
        ...
   ] 
```

因为处理程序调度程序查找完全匹配，而不是子字符串。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-20T09:34:32.140

不同之处在于，该`$`符号确保即使完全匹配，该模式也不是另一个模式的子字符串。请参阅这两个正则表达式以匹配 url 模式。

1.  带有 $ 符号： [http ://regexr.com?327d2](http://regexr.com?327d2)

2.  没有 $ 符号： [http ://regexr.com?327d5](http://regexr.com?327d5)

[这是djangobook](http://www.djangobook.com/en/2.0/chapter03/)的一些摘录，可能也与龙卷风有关：

`^hello/$`

> 该模式包括插入符号 (^) 和美元符号 ($)。这些是具有特殊含义的正则表达式字符：插入符号的意思是“要求模式匹配字符串的开头”，美元符号的意思是“要求模式匹配字符串的结尾”。</p>
> 
> 这个概念最好通过例子来解释。如果我们改为使用模式 '^hello/'（末尾没有美元符号），那么任何以 /hello/ 开头的 URL 都会匹配，例如 /hello/foo 和 /hello/bar，而不仅仅是 /hello/ . 类似地，如果我们省略了初始插入字符（即'hello/$'），Django 将匹配任何以 hello/ 结尾的 URL，例如 /foo/bar/hello/。如果我们只使用了 hello/，没有插入符号或美元符号，那么任何包含 hello/ 的 URL 都会匹配，例如 /foo/hello/bar。因此，我们同时使用插入符号和美元符号来确保只有 URL /hello/ 匹配——不多也不少。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-21T00:40:19.127

Tornado 中不需要尾随`$`。我把它们放在了习惯上，因为我认为它更清楚，但`r"^/hello"`只会匹配 /hello。

我们可以通过查看[URLSpec 源代码](http://www.tornadoweb.org/en/stable/_modules/tornado/web.html#URLSpec)看到这一点：

```
if not pattern.endswith('$'):
    pattern += '$' 
```

# android - 不断更新 Android 支持库修订

> ID：12509513
> 
> 赞同：8
> 
> 时间：2012-09-20T09:13:21.947
> 
> 标签：android

Eclipse 为 android 项目提供了单击和下载的支持库，并将其添加到 libs/ 文件夹中作为“android-support-v4.jar”

上面的 jar 没有参考修订号（当前为 r10），所以肯定（除非我使用 maven）其他人如何跟上支持库修订的最新信息？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T20:57:46.077

我同意@yorkw，SDK 管理器会告诉您当前安装的是哪个版本。此外，使用 android 工具 -> 添加支持库实际上会安装更新版本（如果可用），稍后您将在 SDK 管理器中看到。如果您要问的是如何知道有新版本可用以便进行更新？正如yorkw所说，答案肯定是SDK管理器。

# java - 动态存储数组中的数据

> ID：12509517
> 
> 赞同：0
> 
> 时间：2012-09-20T09:13:37.103
> 
> 标签：java, arrays

我查看了其他类似的线程，但没有找到答案。

我正在用java做一个练习。这是一个有趣的游戏，每回合都会变得“更聪明”。计算机试图猜测我想到的是哪种动物。游戏看起来像这样：

![在此处输入图像描述](../Images/ee948c03b982ad8377e7c5353049ba66.png)

问题是，我想使用二维数组来存储**Questions**和**Answers**。但是由于程序可以有无限的问题和答案，我不能使用 Array 对象来存储数据，因为数组不能动态调整大小。

那么我们就有了 ArrayList 类，它非常适合在运行时存储对象。但我不认为我应该在这里使用二维数组列表。你会如何处理这种情况？

练习也给了我提示，如果我愿意，我可以在互联网上查看“二叉树”。我做到了，但我只发现了一些我不明白的奇怪事情。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T09:26:31.783

您可以坚持使用多维数组的想法，但是......尝试使用二叉树作为提示。查看下面的[二叉树，](http://mathworld.wolfram.com/CompleteBinaryTree.html)您的答案将是 16-25（叶节点），其他一切都是问题。

所以从顶部（根）开始，这个节点可能是“动物有四条腿吗？”的问题。如果答案“是”，则遍历（移动）到节点 2，否则遍历到节点 3。这意味着节点 2 下的所有叶节点都是有四条腿的动物，而节点 3 下的所有叶节点都是没有四条腿的动物腿。

然后，您需要重复将节点 2 或 3 视为根节点的过程，直到到达叶节点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T09:30:12.047

所有问题和动物都可以存储在一棵二叉树中。将**问题**用作**内部节点**，将**动物**用作**叶子**。每个答案都有两个后代（树的分支是 2 =*二叉树*）或者另一个答案，如果动物还不知道，或者是一个动物（离开节点）。

如何在 Java 中表示树是另一个问题。您可以使用以下类来做到这一点（添加*getters/setters/constructors/convenient methods*）：

```
public class Node {
   // add here other common attributes
   private Node parent;
}

public class Question extends Node {
   private String text;
   private Node yes;
   private Node no;
}

public class Animal extends Node {
   private String name;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-20T09:24:50.013

您可以使用[Map](http://docs.oracle.com/javase/6/docs/api/java/util/Map.html)的任何实现将您的动物名称存储为键，并将`List`答案存储为值。但问题是退出应用程序后此结果将不存在。因此，请考虑使用[数据库](http://www.oracle.com/technetwork/java/javase/tech/index-jsp-136101.html)来存储您的值。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-20T09:25:59.953

你的问题让我有点困惑，所以这可能无法直接回答你的问题。既然你问过二叉树，我正在编译这个答案。我怀疑二叉树在这种情况下的适用性。

好吧，如果您从二叉树开始，首先要了解二叉树的概念和行为。很简单。最多有2个分支的任何东西:)

![在此处输入图像描述](../Images/d4193187bfc70998af1acc91eac99a3a.png)

[图片参考](http://www.cs.cmu.edu/~adamchik/15-121/lectures/Trees/trees.html)

暂时忘掉 Java 和编程吧。这些小程序向您展示了二叉搜索树的一个高级版本的二叉树。

[二叉树演示](http://www.cs.jhu.edu/~goodrich/dsa/trees/btree.html)

[二叉树演示](http://people.ksp.sk/~kuko/bak/)

然后想到编程。如果你不会阅读，那么你就无法学习。您应该尝试一遍又一遍地阅读以了解内容:)

现在这是一个您可以阅读的实际实现。

[二叉树 - Java](http://cslibrary.stanford.edu/110/BinaryTrees.html)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-20T09:19:44.563

听起来像是一个很好的使用案例，`HashTable<QUESTION,ANIMAL>` 您可以动态添加它并存储问题和动物之间的联系

```
Hashtable<String,string> ht = new HashTable<String,String>();
String animal;
//adding
ht["some question"] = "some animal";

//getting
if (ht["some question"] != null)
   animal = ht["some question"]; 
```

# c# - 实体框架 4.3：违反多重性约束

> ID：12509518
> 
> 赞同：1
> 
> 时间：2012-09-20T09:13:40.863
> 
> 标签：c#, entity-framework-4.1

我有 2 节课：

```
public class FlightCostInfo : BaseEntity<Guid>
{
  public Flight FlightInfo { get; set; }
  public virtual ICollection<Cost> Costs { get; set; }
  public virtual ICollection<PriceCalculationNotification> Notifications { get; set; }
  public Guid CalculationResultId { get; set; }
}

public class Cost : BaseEntity<Guid>
{
  public BasePrice Price { get; set; }
  public decimal Amount { get; set; }
  public Vendor Vendor { get; set; }
  public Guid FlightCostInfoId { get; set; }
} 
```

并为他们映射：

```
internal class FlightCostInfoMapping : EntityTypeConfiguration<FlightCostInfo>
    {
        public FlightCostInfoMapping()
        {
            HasKey(i => i.Id);
            Property(i => i.CalculationResultId).HasColumnName("CalculationResult_Id");
            HasOptional(i => i.FlightInfo);
            HasMany(i => i.Costs).WithRequired().HasForeignKey(c => c.FlightCostInfoId);
            HasMany(i => i.Notifications).WithRequired().HasForeignKey(n => n.FlightCostInfoId);
        }
    }

internal class CostMapping : EntityTypeConfiguration<Cost>
{
    public CostMapping()
    {
        HasKey(c => c.Id);
        Property(c => c.FlightCostInfoId).HasColumnName("FlightCostInfo_Id");
        HasRequired(c => c.Price);
        HasRequired(c => c.Vendor);
    }
} 
```

当我保存每个*包含一个或多个 Cost 对象**的 FlightCostInfo 列表时，*我收到以下错误：

 *违反了多重性约束。角色`FlightCostInfo_Costs_Source`的关系`Charges.Infrastructure.DataAccess.FlightCostInfo_Costs`有**多重性 1 或 0..1**

我不知道为什么会这样。有人可以帮忙吗？

更新：保存 FlightCostInfo 列表的代码：

```
 public virtual void Save(IEnumerable<TObject> entities)
        {
            Context.Configuration.AutoDetectChangesEnabled = false;
            entities.ToList().ForEach(entity => 
            {
                if (Equals(entity.Id, default(TKey)) || !Context.ChangeTracker.Entries<TObject>().ToList().Any(dbEntry => dbEntry.Entity.Id.Equals(entity.Id)))
                {
                    Set.Add(entity);
                }
            });

            Context.ChangeTracker.DetectChanges();
            SaveChanges();
            Context.Configuration.AutoDetectChangesEnabled = true;
        }

        protected void SaveChanges()
        {
            var entriesWithGuidKey = Context.ChangeTracker.Entries<BaseEntity<Guid>>().Where(e => e.Entity.Id == Guid.Empty).ToList();
            entriesWithGuidKey.ForEach(e => e.Entity.Id = Guid.NewGuid());

            var entriesWithPeriodicValidity = Context.ChangeTracker.Entries<IPeriodicValidityObject>().ToList();
            entriesWithPeriodicValidity.ForEach(e => 
                {
                   if (e.State != System.Data.EntityState.Unchanged)
                   {
                       e.Entity.ChangedDate = DateTime.UtcNow;
                   }
                });
            Context.SaveChanges();
        } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T14:19:35.483

问题似乎在于 BaseEntity 的 Equals 重载。所以 EF 认为 FlightCostInfo 集合中的所有 Cost 对象都是相等的。

结束问题*

# google-chrome-extension - chrome.webRequest API 黑名单

> ID：12509525
> 
> 赞同：1
> 
> 时间：2012-09-20T09:13:49.140
> 
> 标签：google-chrome-extension, webrequest

在 Chromium 代码源中哪里可以找到有关 webRequest API 的黑名单？

> webRequest API 仅公开扩展程序有权查看的请求，给定其主机权限。此外，只能访问以下方案：http://、https://、ftp://、file:// 或 chrome-extension://。此外，即使某些 URL 使用上述方案之一的请求也会被隐藏，例如 chrome-extension://other_extension_id 其中 other_extension_id 不是处理请求的扩展程序的 ID， [https://www.google.com/ chrome](https://www.google.com/chrome)等（此列表不完整）。

来源：[https ://developer.chrome.com/extensions/webRequest.html#life_cycle_footnote](https://developer.chrome.com/extensions/webRequest.html#life_cycle_footnote)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-20T09:31:02.483

1.  实现：[chromium/src/chrome/browser/extensions/api/web_request/web_request_permissions.cc](http://code.google.com/searchframe#OAMlx_jo-ck/src/chrome/browser/extensions/api/web_request/web_request_permissions.cc)
2.  单元测试：[chromium/src/chrome/browser/extensions/api/web_request/web_request_permissions_unittest.cc](http://code.google.com/searchframe#OAMlx_jo-ck/src/chrome/browser/extensions/api/web_request/web_request_permissions_unittest.cc)

以下 URL 被列入黑名单（模式可以来自源代码和/或单元测试）：

```
 "http://clients2.google.com",
      "http://clients22.google.com",
      "https://clients2.google.com",
      "http://clients2.google.com/service/update2/crx",
      "https://clients.google.com",
      "https://test.clients.google.com",
      "https://clients2.google.com/service/update2/crx",
      "http://www.gstatic.com/chrome/extensions/blacklist",
      "https://www.gstatic.com/chrome/extensions/blacklist",
      "notregisteredscheme://www.foobar.com" 
```

# asp.net - razor webgrid 中的速记条件

> ID：12509526
> 
> 赞同：0
> 
> 时间：2012-09-20T09:13:49.313
> 
> 标签：asp.net, razor

我已经像这样在 webgrid 中设置了 uo 速记条件，但它不起作用，请帮助

```
grid.Column("sold", format: @(item.sold == 1?"Yes":"No")), 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T09:16:40.980

请使用视图模型。向您的视图模型添加一个属性，该属性将负责格式化此值：

```
public string FormattedSold
{
    get
    {
        return sold == 1 ? "Yes" : "No";
    }
} 
```

然后将该列绑定到此属性：

```
grid.Column("FormattedSold"), 
```

如果您不想使用视图模型并将您的视图变成意大利面条代码，请继续，做我的客人：

```
grid.Column(
    "sold", 
    format: @<text>@(item.sold == 1 ? "Yes" : "No")</text>
), 
```

# iphone - 如何在另一个类中添加一个类子视图作为 iPhone 中的子视图？

> ID：12509528
> 
> 赞同：0
> 
> 时间：2012-09-20T09:13:52.197
> 
> 标签：iphone, objective-c, ios, xcode, uiscrollview

我有两`UIViewController`节课，在第一节课中，我有`UIScrollView`一个**子视图**，我想将它添加`UIScrollView`到另一个类中作为**子视图**。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T09:25:38.910

通过在 A类的 .h 文件中分配它并在 A 类的 .m 文件中合成它，将其作为A .ie`UIScrollview`的属性。`viewController``@property(nonatomic,retain)`

在 B 类中进一步在 B .h 文件中创建 A 类的实例，例如：`ViewController *VC1;`并在 B 的 .m 文件中合成它

现在..in`ViewController A`当你打电话`ViewController B`时（通常是在你推动时）例如：

```
ViewControllerB *VC2 = [[ViewControllerB alloc]initWithNibName:@"ViewControllerB" bundle:nil];
VC2.VC1 = self;

[self navigationController pushViewCOntroller:VC2 animated:YES]; 
```

现在在您希望`scrollView`添加 A 类的 B 类中，

在B类中写下

```
 [ self.view addSubView:VC1.scrollView]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T09:17:10.527

您可以添加`[view1 addSubView:view2];`.if将控制器视图添加到要添加的其他视图`UIScrollView`。`UIViewController`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-20T09:18:35.393

我认为这不能正常工作，一旦您将 a 添加`UIView`到一个，`UIView`我认为将其添加到另一个子视图是不合适的。`removeFromSuperview`在将其添加到另一个视图之前，您可能需要显式调用。确保它被保留到足以做到这一点。

# php - file_put_contents 创建时间戳错误的文件

> ID：12509529
> 
> 赞同：2
> 
> 时间：2012-09-20T09:13:53.450
> 
> 标签：php, date, time, timezone

运行此代码时，我遇到了“file_put_contents”问题：

```
file_put_contents("/var/www/html/storage/views/temp", "helllo world"); 
```

它会在未来 1 小时内保存文件。那么它在哪里得到时间呢？

我已经设置了 php.ini date.timezone = "Europe/London" （根据系统时区），这似乎没有帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T09:26:06.650

`php.ini` `date.timezone`选项指定 PHP 将在内部使用哪个时区。

大多数 Unix/Linux 系统使用 UTC 作为**硬件**，然后将**系统**时钟设置为给定的时区。

你最终会得到三个不同的时区，但它应该是完全透明的。

您的问题可能是由于您的**系统**时区与您的**php**时区不同。

要检查您的**系统**时区，您可以执行`date +%Z`

根据您的需要，您将不得不根据您的系统时区更改您的 PHP 时区，或者转换您的时间戳日期来管理您的文件。

除非您有充分的理由这样做，否则我建议您使用系统时区调整您的 php 时区。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T09:24:11.263

file_put_contents 为文件提供**服务器**时间。这意味着，在查看文件的时间戳时，必须考虑*服务器的时区，并且最终必须将其转换为**客户端的时区*。

在我的 linux 机器上，日期输出：`Thu Sep 20 11:23:28 CEST 2012`这也是文件的时间戳。在 CST 时区中，您必须从时间戳中减去 7 小时才能获得 CST 中的创建时间。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-20T09:31:47.890

使用时，您需要正确处理时间戳值。检查这个：

```
<?php
$file = __DIR__ . '/test.dat';
file_put_contents($file, "hello world");
print(gmdate('Y-m-d H:i:s T', filectime($file)) . "\n");
print(date('Y-m-d H:i:s T', filectime($file)) . "\n"); 
```

输出：

```
2012-09-20 09:29:17 GMT 
2012-09-20 11:29:17 CEST 
```

根据您使用的特定日期方法，您可以确定所需的输出。

# java - java socket对象内存泄漏

> ID：12509530
> 
> 赞同：1
> 
> 时间：2012-09-20T09:13:59.317
> 
> 标签：java, sockets, stream, memory-leaks, objectoutputstream

我在 java Socket Object 通信上有一个内存泄漏问题。

这是我的发送线程。

```
 // create a new thread to send the packet
@Override
public synchronized void run() {

    if(!genericSocket.isConnected()){
        if(logger.isEnabled())
            logger.logMessage(PFLogging.LEVEL_WARN, "Socket is close");
        return;
    }

    int retry = 0;
    boolean packetSent = false;

    synchronized (objWriter) {
        while ((retry < RETRY) && (!packetSent) && (genericSocket.isConnected())) {
            try {
                objWriter.writeObject(bean);

                objWriter.flush();

                // Try until the cache is reset and the memory is free
                /*
                boolean resetDone = false;
                while(!resetDone) {
                    try {
                        objWriter.reset();
                        resetDone = true;
                    } catch (IOException r) {
                        Thread.sleep(1);
                    }
                }
                */

                // No error and packet sent
                continuousError = 0;
                packetSent = true;
            } catch (Exception e) {
                continuousError++;

                if(logger.isEnabled())
                    logger.logMessage(PFLogging.LEVEL_ERROR, "Continuous Error [" + continuousError + "] sending message [" + e.getMessage() + "," + e.getCause() + "]");

                // control the number of continuous errors
                if(continuousError >= CONTINUOUS_ERROR) {
                    if(logger.isEnabled())
                        logger.logMessage(PFLogging.LEVEL_WARN, "I close the socket");
                    genericSocket.disconnect();
                }

                // next time is the time!
                retry++;
            }
        }
    }
} 
```

缓存，当我发送大约每毫秒我的数据包增长和增长！

如果我添加注释部分，缓存是干净的，但是当我需要发送异步长消息（大约 3000 个字符）时，我看到其他消息丢失了！

还有另一种方法可以在不重置缓存的情况下清理缓存？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T18:00:27.830

ObjectOutputStream.reset() 是无法避免的，因为它是清除本地哈希表的唯一方法，您可以参考 ObjectOutputStream 的 java 源代码以了解 reset() 中发生的详细信息，否则您最终会得到 OutOfMemoryError

但是你可以很好地实现一个像

```
private void writeObject(Object obj, ObjectOutputStream oos) throws IOException
    {
        synchronized(oos)
        {
            oos.writeObject(obj);
            oos.flush();
            oos.reset();
        }
    } 
```

但是，您必须确保对 ObjectOutputStream 的所有写入都通过此方法进行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T13:22:46.093

我找到的唯一解决方案是，首先启动一个发送线程，检查线程池是否为空，在这种情况下我重置输出流。我整晚都在运行该软件来检查这一点。

谢谢大家！

马泰奥

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-20T09:16:59.223

我会`ObjectOutputStream.reset()`定期使用来清除流的对象缓存。

您甚至可以在发送每个对象后使用它。;)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-20T10:00:17.277

再见 ：），

在 ObjectOutputStream.flush() 之后，您可以安全地使用 ObjectOutputStream.reset()

除非您在另一个线程中使用 objWriter somwhere 而不使用同步 (objWriter) 语句。在这种情况下，恕我直言，最好的方法是在线程中使用 objWriter，它将从同步队列发送对象（请参阅队列子类[http://docs.oracle.com/javase/1.5.0/docs/api/ java/util/Queue.html](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/Queue.html)，例如[http://docs.oracle.com/javase/1.5.0/docs/api/java/util/concurrent/ConcurrentLinkedQueue.html](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/concurrent/ConcurrentLinkedQueue.html)）从另一个线程填充（记住使用 object.clone()，因为 objcet 本身没有同步，它可以在你写它或在队列中被其他线程修改！如果你克隆它，你的克隆将是一个安全副本）。

这样你就不需要同步语句，因为线程和 ObjectOutputStream 之间的数据流已经同步了，你会更不容易出错

# java - OS X 中 Java 7 文件名的编码问题

> ID：12509532
> 
> 赞同：6
> 
> 时间：2012-09-20T09:14:03.250
> 
> 标签：java, macos, file, encoding, java-7

我有以下代码：

```
public static void main( String[] args ) {
    System.out.println(Locale.getDefault());
    File f = new File("/Users/johngoering/Documents");
    File[] fs = f.listFiles();
    for (File ff : fs) {
        System.out.println(ff.getName());
        System.out.println(ff.exists());
    }
} 
```

在我的 Documents 文件夹中，我有一个名为“öß.pdf”的文件。这是 Java 6 下的输出：

```
 en_US
 (...)
 öß.pdf
 true
 (...) 
```

但这里是 Java 7 下的输出：

```
 en_US
 (...)
 o����.pdf
 false
 (...) 
```

特别注意，返回由!!`file.exists`返回的文件 是什么赋予了？有没有什么办法解决这一问题？这似乎是 Java 7 的错误……`false``listFiles`

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-20T10:05:47.310

在 Oracle 的帮助下，我们发现了一种解决方法：环境变量`LC_CTYPE`未`UTF-8`在 Eclipse 中设置（以及从 JNLP 或其他任何地方开始时）。这解释了为什么代码在终端上工作，因为默认情况下 OS X 终端“设置语言环境变量”（一个可以关闭的选项，然后即使在终端中也会遇到与上述相同的问题）。

在启动器中设置这个环境变量解决了这个问题。

我仍然认为这是 Java 7 的错误，因为即使没有这个变量，Java 6 仍然可以工作。

# jquery - 参考div内的href

> ID：12509535
> 
> 赞同：0
> 
> 时间：2012-09-20T09:14:16.737
> 
> 标签：jquery, ajax

我想在窗口加载时进行 ajax 调用并使用 div#links 中的 url

到目前为止，这是我想出的：

```
$(window).load(function() {

    baseUrl =  $("#links a").attr("href");
    $.ajax({
        url: baseUrl,
        type: "get",
        dataType: "",
        success: function(data) {

            // from here not important 
```

HTML：

```
<div id="links"></div> 
```

链接是动态创建的：

```
$('<a href="' + text + lnk + '">' + text + lnk + '</a>')
    .appendTo($('#links')); 
```

但是，这似乎不起作用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-20T09:19:15.777

*更新*

它应该是

```
var baseUrl = ... 
```

（用于适当的范围界定）

但这不是真正的问题......看起来（开始）在生产线上

```
$foop = $('<form>' + data.responseText + '</form>'); 
```

data.responseText 是一个完整的 html 文档（这行代码然后尝试用表单元素包装） - 所以这将是问题的主要来源......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T09:43:52.063

看起来你只是没有等待你的`#links`div 被内容填充。

第一个 ajax 调用用其内容填充链接 div。在 window.load 上，您的 ajax 调用尚未完成，但您已经尝试访问这些链接。

当第一个 ajax 调用的成功处理程序被触发时，您需要执行该代码。现在链接 div 不包含任何内容，因此尝试从尚不存在`a`的标签中获取标签的 href失败。`a`

# jquery - 如何使用 JQUERY 动态更新表类

> ID：12509537
> 
> 赞同：0
> 
> 时间：2012-09-20T09:14:26.540
> 
> 标签：jquery

我需要使用 Jquery 动态更新下面的类。

```
<tr id='myID' class="size colour">  <td></td> </tr> 
```

我尝试在下面使用：

> $("#myID").toggleClass();

它似乎不起作用，因为我的班级名称是“大小颜色”。由于类名是动态的，我无法使用 removeClass。有人可以帮我吗？

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T09:16:31.123

您需要使用 JqueryUI 来切换带有动画的类。

此处的文档和演示：http: [//jqueryui.com/demos/toggleClass/](http://jqueryui.com/demos/toggleClass/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T09:18:23.403

您可能需要将类名作为参数传递，即；`.toggleClass( className )`

否则它正在工作，[请参见此处](http://jsbin.com/okibix/1/edit)。检查元素以查看结果。

[http://www.jqapi.com/#p=toggleClass](http://www.jqapi.com/#p=toggleClass)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-20T09:19:00.750

您的类名不是`size colour`，但您的元素有两个类，`size`并且`colour`- 它们彼此独立。

`toggleClass()`没有任何参数会删除任何当前存在的类，所以在你的情况下

```
$("#myID").toggleClass(); 
```

将删除两个类`size`和`colour`. 在第二次调用时，所有这些类都将被再次添加。

如果这是您打算做的，那么它应该可以正常工作并且错误在其他地方。否则，您必须明确您想要实现的目标。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-09-20T09:26:09.997

不确定您是否要删除课程或在那里添加另一个课程......但这可能会有所帮助......

```
// to remove class
$("#myID").attr('class','');  
output: <tr id='myID' class="">

//to add something to your exsiting class
var classname=$("#myID").attr('class');
$("#myID").attr('class',classname +' yourclassname');
output: <tr id='myID' class="size colour yourclassname"> 
```

# iphone - iPhone 的组合框图像

> ID：12509541
> 
> 赞同：0
> 
> 时间：2012-09-20T09:14:31.243
> 
> 标签：iphone

我正在尝试为我的应用程序创建简单的组合框。我已阅读以下问题：[在操作表中添加 UIPickerView 和按钮 - 如何？](https://stackoverflow.com/questions/1262574/add-uipickerview-a-button-in-action-sheet-how)

你有一个漂亮图像的链接，我可以把它放在像组合框一样的按钮上？我在网上搜索没有运气，所以使用我的应用程序的人都不知道这个按钮实际上是一个组合框。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T09:24:18.957

这是一些漂亮的 iphone 套件图像的链接： [iOS 5 GUI PSD (iPhone 4S)](http://www.google.nl/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&cad=rja&ved=0CCMQFjAA&url=http://www.teehanlax.com/downloads/ios-5-gui-psd-iphone-4s/&ei=leBaUJ76FtKS0QXboIFo&usg=AFQjCNFQdUjwDOAJ-zn8u5nSIlI6jO0cnA)

如果你在那里找不到它，就按照我们的做法去做，要么自己设计图像，要么聘请设计师 :)

# java - 在 Android 中为各种屏幕尺寸编程

> ID：12509551
> 
> 赞同：0
> 
> 时间：2012-09-20T09:15:18.093
> 
> 标签：java, android, surfaceview, android-canvas

我正在使用 Canvas 和 SurfaceView。我已经明确提到了屏幕上各种对象和字体的坐标。该应用程序在三星 Galaxy S Advance 上完美运行，但在三星 Galaxy Fit 或 Pop 等较小的屏幕上，这些对象超出了范围。我如何使其兼容所有屏幕尺寸和像素密度。使用 dpis 似乎是不可能的，因为我没有使用任何 xml 布局。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T09:24:29.373

根据开发人员指南，不鼓励这样做（使用显式坐标）。请参阅 android 设计指南以了解如何做得更好。如果无法避免，则需要考虑屏幕尺寸和密度并相应地计算坐标。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T09:20:45.213

我认为您应该在运行时获得屏幕分辨率并据此设置像素。

# c# - 2 个数组为 1 个，其中 lambda exp 不同

> ID：12509555
> 
> 赞同：0
> 
> 时间：2012-09-20T09:15:24.337
> 
> 标签：c#, lambda

我有 2 个从数据库中获取的对象数组，有些重叠，所以我必须创建一个不同的函数。

我试图制作一个 lambda 表达式，但我仍然得到了一个重叠的对象。

这是我的代码：

```
ArtObject[] pinui = new ArtObject[root.Count - 1];
ArtObject[] c1=     new ArtObject[root2.Count - 1];

pinui = getArticlesArray(root2, pinui);
c1= getArticlesArray(root, c1);

art = new ArtObject[c1.Count()+pinui.Count()];

pinui.CopyTo(art, 0);
c1.CopyTo(art, pinui.Count());

art = art.Distinct().OrderByDescending(a => a.dateTosort).ToArray(); 
```

我猜我的最后一行有问题，`art = art.Distinct().OrderByDescending(a => a.dateTosort).ToArray();`..我想知道什么以及如何才能只获得不同的对象..？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-20T09:17:56.550

`Distinct`将使用`Equals`and`GetHashCode`来确定相等的值。我怀疑您没有覆盖这些方法来指示您希望如何检查相等性。

另请注意，您的最后一部分会更简单：

```
ArtObject[] art = pinui.Union(c1).OrderByDescending(a => a.dateTosort).ToArray(); 
```

`a.Union(b)`相当于`a.Concat(b).Distinct()`。

`GetHashCode`覆盖and的另一种方法`Equals`是指定一个`IEqualityComparer<Person>`to`Union`或`Distinct`。

[MoreLINQ](http://morelinq.googlecode.com)使用以下方法使这更容易[`DistinctBy`](http://code.google.com/p/morelinq/source/browse/MoreLinq/DistinctBy.cs)：

```
var query = collection.DistinctBy(x => x.Description); 
```

（目前还没有等价物`Union`，但我们可以很容易地添加一个。）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-20T09:19:52.963

您的代码看起来不错，尽管可以缩短（无需使用 CopyTo）：

```
 var art = pinui.Union(c1).OrderByDescending(a => a.dateTosort).ToArray(); 
```

`Union`已经删除了像`Distinct`.

对象没有被检测为重复的原因可能是因为它们是不同的。例如，默认情况下，

```
 var obj1 = new ArtObject("Picasso");
 var obj2 = new ArtObject("Picasso"); 
```

是两个不同的对象。

但是，您可以为or[提供自定义相等比较器](http://msdn.microsoft.com/en-us/library/bb338049.aspx)，链接的 MSDN 页面包含一个很好的示例。`Distinct``Union`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-20T09:40:39.480

如果您在其中一个字段上做不同，您可以使用`GroupBy`then get `First`：

```
pinui.Concat(c1).GroupBy(a => a.Description, (key, g) => g.First())
    .OrderByDescending(a => a.dateTosort).ToArray(); 
```

# python - 在 Python 中将数组/列表的子集引用作为参数传递

> ID：12509557
> 
> 赞同：2
> 
> 时间：2012-09-20T09:15:24.217
> 
> 标签：python, arrays, list, reference, arguments

我对 Python 有点陌生（1 天），所以我的问题可能很愚蠢。我已经看过[这里，](https://stackoverflow.com/questions/986006/python-how-do-i-pass-a-variable-by-reference)但我找不到我的答案。

我需要以随机大小的随机偏移量修改数组的内容。我有一个 Python API 来连接我无法修改的 USB 设备的 DDL。有一个像这样的功能：

```
def read_device(in_array):
    # The DLL accesses the USB device, reads it into in_array of type array('B')
    # in_array can be an int (the function will create an array with the int 
    # size and return it), or can be an array or, can be a tuple (array, int) 
```

在我的代码中，我创建了一个 64 个字节的数组，我想从第 32 个字节开始读取 16 个字节。在 C 语言中，我会给出`&my_64_array[31]`函数`read_device`。在 python 中，如果给：

```
read_device(my_64_array[31:31+16]) 
```

似乎 in_array 是对给定子集副本的引用，因此`my_64_array`没有被修改。

我能做些什么 ？之后我必须拆分`my_64_array`并重新组合它吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T10:06:14.800

查看您如何无法更新和/或更改 API 代码。最好的方法是向函数传递一个小的临时数组，然后在函数调用后将其分配给现有的 64 字节数组。

所以这将类似于以下内容，不知道您的 API 调用的确切细节。

```
the_64_array[31:31+16] = read_device(16) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T09:27:20.957

读取列表子集时，您使用该列表`__getitem__`的`slice(x, y)`参数调用。在您的情况下，这些陈述是相等的：

```
my_64_array[31:31+16]
my_64_array.__getitem__(slice(31, 31+16)) 
```

这意味着`__getitem__`可以在子类中重写该函数以获得不同的行为。

您还可以设置相同的子集，`a[1:3] = [1,2,3]`在这种情况下它会调用`a.__setitem__(slice(1, 3), [1,2,3])`

所以我建议以下任何一种：

*   将 list ( `my_64_array`) 和一个`slice`对象传递给 read_device 而不是传递 的结果`__getitem__`，之后您可以读取必要的数据并设置相应的偏移量。没有子类化。就可读性和易于开发而言，这可能是最好的解决方案。
*   子类化列表，覆盖`__getitem__`并`__setitem__`返回具有父引用的该子类的实例，然后将列表的所有修改或读取方法更改为引用父列表。如果您是 python 新手，这可能有点棘手，但基本上，您会利用 python 列表属性在很大程度上由`list`实例内的方法定义。这在性能方面可能更好，因为您可以创建引用。
*   如果`read_device`返回结果列表，并且该列表大小相同，则可以执行以下操作：`a[x:y] = read_device(a[x:y])`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-20T09:28:36.323

正如您所说，如果您将切片输入到函数中，它会创建切片的引用副本。

稍后添加它`read_device`的两种可能方法（假设返回相关切片）：

```
my_64_array = my_64_array[:32] + read_device(my_64_array[31:31+16]) + my_64_array[31+16:]
# equivalently, but around 33% faster for even small arrays (length 10), 3 times faster for (length 50)...
my_64_array[31:31+16] = read_device(my_64_array[31:31+16]) 
```

所以我认为你应该使用后者。

.

如果它是一个可修改的函数（但在这种情况下不是！）你可以改变你的函数参数（一个是整个数组）：

```
def read_device(the_64_array, start=31, end=47):
   # some code
   the_64_array[start:end] = ... #modifies `in_array` in place 
```

并调用`read_device(my_64_array)`或`read(my_64_array, 31, 31+16)`。

# php - 如何扩展在 Symfony 1.4 中生成后端表单字段的查询？

> ID：12509567
> 
> 赞同：0
> 
> 时间：2012-09-20T09:16:01.340
> 
> 标签：php, forms, doctrine, symfony-1.4

我想根据登录用户过滤 SF-1.4 后端模块中选择框的选项。修改/扩展 SQL 查询（即创建 SELECT-Box）的正确位置在哪里？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T16:17:13.123

只需覆盖表单过滤器类中该选择框的小部件/验证器。我可以为您提供更多信息，但我需要知道您使用的是什么 ORM。

* * *

sfWidgetFormDoctrineChoice 和 sfValidatorDoctrineChoice 都有一个名为 的选项`query`。使用它并设置您的自定义查询。所以你需要在你的过滤器类中做这样的事情：

```
$query = Doctrine::getTable('Table')->createQuery()->where('field = ?', $field_value);

$this->widgetSchema['your_form_field']->setOption('query', $query);

$this->validatorSchema['your_form_field']->setOption('query', $query); 
```

`

# mysql - 在 SQL 语句中添加附加项会导致性能下降

> ID：12509568
> 
> 赞同：2
> 
> 时间：2012-09-20T09:16:05.740
> 
> 标签：mysql, performance, merge, indexing, database-indexes

我有一个如下所示的 sql 语句：

```
SELECT colID
FROM tableName
WHERE ColDateStart <='$lowerDate'
AND ColDateStart>='$upperDate'
AND ColVcamID='$id1'
AND ColVlviID='$id2'
AND ColSomeID='$id3'; 
```

WHERE 语句中的所有列都是索引列。

当我运行它时，它需要一秒钟。但是，当我在没有其他 Id3 的情况下运行它时，性能会大大提高（0.03 秒）。

当我使用 otherId3 运行解释时，它使用使用 otherId1 和 otherId3 的索引合并。但是，当我删除 otherId3 时，它使用 otherId2 的单个索引。

为什么添加 otherId3 会对性能产生影响？

表结构：

```
+----------------------+-------------+------+-----+---------------------+----------------+
| Field                | Type        | Null | Key | Default             | Extra          |
+----------------------+-------------+------+-----+---------------------+----------------+
| ColID                | int(11)     | NO   | PRI | NULL                | auto_increment |
| ColCustID            | int(11)     | NO   | MUL | 0                   |                |
| ColCarrID            | int(11)     | NO   | MUL | NULL                |                |
| ColTariID            | int(11)     | NO   | MUL | 0                   |                |
| ColCarrierRef        | varchar(30) | NO   | MUL |                     |                |
| ColNumbID            | int(11)     | NO   | MUL | 0                   |                |
| ColVlviID            | int(11)     | NO   | MUL | NULL                |                |
| ColVcamID            | int(11)     | NO   | MUL | NULL                |                |
| ColSomeID            | int(11)     | NO   | MUL | NULL                |                |
| ColVlnsID            | int(11)     | NO   | MUL | NULL                |                |
| ColNGNumber          | varchar(12) | NO   |     |                     |                |
| ColOrigNumber        | varchar(16) | NO   | MUL | NULL                |                |
| ColCLIRestrictedFlag | int(2)      | NO   |     | NULL                |                |
| ColOrigLocality      | varchar(11) | NO   | MUL |                     |                |
| ColOrigAreaCode      | varchar(11) | NO   | MUL |                     |                |
| ColTermNumber        | varchar(16) | NO   | MUL | NULL                |                |
| ColBatchNumber       | varchar(10) | NO   |     |                     |                |
| ColDateStart         | date        | NO   | MUL | 0000-00-00          |                |
| ColDateClear         | date        | NO   |     | 0000-00-00          |                |
| ColTimeStart         | time        | NO   |     | 00:00:00            |                |
| ColTimeClear         | time        | NO   |     | 00:00:00            |                |
| ColCallLength        | time        | NO   |     | 00:00:00            |                |
| ColRingLength        | time        | NO   |     | 00:00:00            |                |
| ColEffectiveFlag     | smallint(1) | NO   | MUL | NULL                |                |
| ColUnansweredFlag    | smallint(1) | NO   | MUL | NULL                |                |
| ColEngagedFlag       | smallint(1) | NO   |     | NULL                |                |
| ColRecID             | int(11)     | NO   | MUL | NULL                |                |
| ColCreatedUserID     | int(11)     | NO   |     | 0                   |                |
| ColCreatedDatetime   | datetime    | NO   | MUL | 0000-00-00 00:00:00 |                |
| ColDirection         | int(1)      | NO   | MUL | NULL                |                |
+----------------------+-------------+------+-----+---------------------+----------------+ 
```

索引

```
+-------+------------+-------------------------------+--------------+---------------------+-----------+-------------+----------+--------+------+------------+---------+
| Table | Non_unique | Key_name                      | Seq_in_index | Column_name         | Collation | Cardinality | Sub_part | Packed | Null | Index_type | Comment |
+-------+------------+-------------------------------+--------------+---------------------+-----------+-------------+----------+--------+------+------------+---------+
| tableName |          0 | PRIMARY                       |            1 | ColID              | A         |    18031283 |     NULL | NULL   |      | BTREE      |         |
| tableName |          1 | idx_ColCustID                |            1 | ColCustID          | A         |        1339 |     NULL | NULL   |      | BTREE      |         |
| tableName |          1 | idx_ColNumbID                |            1 | ColNumbID          | A         |       24366 |     NULL | NULL   |      | BTREE      |         |
| tableName |          1 | idx_colOrigNumber            |            1 | colOrigNumber      | A         |     4507820 |     NULL | NULL   |      | BTREE      |         |
| tableName |          1 | idx_colOrigLocality          |            1 | colOrigLocality    | A         |       36873 |     NULL | NULL   |      | BTREE      |         |
| tableName |          1 | idx_colOrigAreaCode          |            1 | colOrigAreaCode    | A         |         696 |     NULL | NULL   |      | BTREE      |         |
| tableName |          1 | idx_colTermNumber            |            1 | colTermNumber      | A         |      137643 |     NULL | NULL   |      | BTREE      |         |
| tableName |          1 | idx_colDateStart             |            1 | colDateStart       | A         |        3639 |     NULL | NULL   |      | BTREE      |         |
| tableName |          1 | idx_colEffectiveFlag         |            1 | colEffectiveFlag   | A         |           2 |     NULL | NULL   |      | BTREE      |         |
| tableName |          1 | idx_colUnansweredFlag        |            1 | colUnansweredFlag  | A         |           2 |     NULL | NULL   |      | BTREE      |         |
| tableName |          1 | idx_colEngagedFlag           |            1 | colUnansweredFlag  | A         |           2 |     NULL | NULL   |      | BTREE      |         |
| tableName |          1 | idx_colTariID                |            1 | colTariID          | A         |          91 |     NULL | NULL   |      | BTREE      |         |
| tableName |          1 | idx_CustID_DateStart          |            1 | colCustID          | A         |        1339 |     NULL | NULL   |      | BTREE      |         |
| tableName |          1 | idx_CustID_DateStart          |            2 | colDateStart       | A         |      693510 |     NULL | NULL   |      | BTREE      |         |
| tableName |          1 | idx_NumbID_DateStart          |            1 | colNumbID          | A         |       24366 |     NULL | NULL   |      | BTREE      |         |
| tableName |          1 | idx_NumbID_DateStart          |            2 | colDateStart       | A         |     4507820 |     NULL | NULL   |      | BTREE      |         |
| tableName |          1 | idx_colRecID                 |            1 | colRecID           | A         |      214658 |     NULL | NULL   |      | BTREE      |         |
| tableName |          1 | idx_colCarrierRef            |            1 | colCarrierRef      | A         |     6010427 |     NULL | NULL   |      | BTREE      |         |
| tableName |          1 | idx_colCustID_colTermNumber |            1 | colCustID          | A         |        1339 |     NULL | NULL   |      | BTREE      |         |
| tableName |          1 | idx_colCustID_colTermNumber |            2 | colTermNumber      | A         |      143105 |     NULL | NULL   |      | BTREE      |         |
| tableName |          1 | idx_colCreatedDatetime       |            1 | colCreatedDatetime | A         |      474507 |     NULL | NULL   |      | BTREE      |         |
| tableName |          1 | idx_colDirection             |            1 | colDirection       | A         |           2 |     NULL | NULL   |      | BTREE      |         |
| tableName |          1 | idx_colVlviID                |            1 | colVlviID          | A         |        4133 |     NULL | NULL   |      | BTREE      |         |
| tableName |          1 | idx_colSomeID                |            1 | colSomeID          | A         |          10 |     NULL | NULL   |      | BTREE      |         |
| tableName |          1 | idx_colVcamID                |            1 | colVcamID          | A         |           7 |     NULL | NULL   |      | BTREE      |         |
| tableName |          1 | idx_colVlnsID                |            1 | colVlnsID          | A         |          18 |     NULL | NULL   |      | BTREE      |         |
| tableName |          1 | idx_colCarrID                |            1 | colCarrID          | A         |           4 |     NULL | NULL   |      | BTREE      |         |
+-------+------------+-------------------------------+--------------+---------------------+-----------+-------------+----------+--------+------+------------+---------+ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T09:27:09.530

首先，你有太多的索引。这些指数中的大多数可能毫无意义。如果您没有为 WHERE 条件、JOIN 或 ORDERing 使用特定索引，请删除它，因为它只会减慢速度。

接下来，为您的查询指定 3 列，这些列始终在查询中，包括 1x DATE 和 2x INT 列。DATE 列应该是第一个，因为日期范围在索引上非常快，然后是两个 INT。这给出了以下 3 列索引的起点

```
CREATE INDEX searchIndex 
ON tableName (ColDateStart,ColVlviID,ColVcamID) 
USING BTREE; 
```

更多信息请点击此处：[http ://dev.mysql.com/doc/refman/5.0/en/multiple-column-indexes.html](http://dev.mysql.com/doc/refman/5.0/en/multiple-column-indexes.html)

我故意以这种方式订购了这些列。ColDateStart 用于日期范围过滤，然后按基数降序排列其他列。我选择 ColVlviID 作为第二列，因为它的基数为 4133，而 ColVcamID 的基数为 7。这将允许 MySQL 更有效地减少匹配行。

现在，假设 colSomeID 是最后一列，我可能会改为执行以下操作

```
CREATE INDEX searchIndex_someID
ON tableName (ColDateStart,ColVlviID,ColVcamID,ColSomeID) 
USING BTREE; 
```

这个 3 列索引将帮助 MySQL 在检查最后一个 ID 之前找到适用的数据集。如果您通常在另一个特定的 INT 列中进行过滤，则可以选择在最后向该索引添加第 4 列。

顺便说一句，您可能需要考虑以下而不是 dateCol 标准

```
SELECT colID
FROM tableName
WHERE ColDateStart BETWEEN DATE('$lowerDate') AND DATE('$upperDate')
AND ColVcamID=$id1
AND ColVlviID=$id2
AND ColSomeID=$id3 
```

以上所有内容当然假设您在执行查询之前对变量进行了清理。我已经从 $idx 变量中删除了引号，因为它们应该是数字，因此不需要作为字符串输入。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T09:39:26.063

```
SELECT id
FROM tableName FORCE INDEX(`idx_otherId2`)
WHERE dateCol <='$lowerDate'
AND dateCol>='$upperDate'
AND otherId1='$id1'
AND otherId2='$id2'
AND otherId3='$id3'; 
```

# css - Stellar.js 的背景问题

> ID：12509574
> 
> 赞同：1
> 
> 时间：2012-09-20T09:16:21.913
> 
> 标签：css, html, background, parallax

我在使用 stellar.js 时无法可视化背景封面我总共有 4 个 div，但我不明白为什么前 3 个 div 的背景没有出现，而是最后一个可以正常工作。这是网站： http: [//www.maqrollexperience.com/ivanminutillo/](http://www.maqrollexperience.com/ivanminutillo/) 感谢所有 Ivan

# sql-server - IF 子句中的短路

> ID：12509578
> 
> 赞同：3
> 
> 时间：2012-09-20T09:16:30.987
> 
> 标签：sql-server, sql-server-2008, bitwise-operators, temp-tables

我已经搜索并没有发现任何关于它的信息（我相信这是不可能的）。我的问题是我必须检查是否存在临时表以及该临时表上是否有一些特定数据。

以前有人遇到过吗？你是如何设法解决的？我想避免创建数百万个`IF..ELSE`块。

编辑：

```
IF (OBJECT_ID('tempdb..#tempTable') IS NOT NULL 
AND EXISTS (SELECT * FROM #tempTable WHERE THIS_COLUMN = 'value'))
BEGIN
   PRINT 'Temp table and data exists'
END
ELSE
BEGIN
   PRINT 'Temp table or data does not exist'
END 
```

这就是我想做的。当 tempTable 不存在（可能发生）时，问题就来了。它会抛出一个错误，因为虽然第一个语句返回 false，但它会继续执行第二个语句。并且该`SELECT`语句无法找到该表，因此会引发错误。我找到的解决方案是这样做：

```
IF OBJECT_ID('#tempTable') IS NOT NULL
BEGIN
    IF EXISTS (SELECT * FROM #tempTable WHERE THIS_COLUMN = 'value'
    BEGIN
        PRINT 'Temp table and data exists'
    END
    ELSE
    BEGIN
        PRINT 'Temp table exists but data does not exist'
    END
END
ELSE
BEGIN
    PRINT 'Temp table does not exist'
END 
```

我的问题是，有没有办法有 2 个条件，如果第一个条件返回 false，不检查第二个条件？一种`&&`在编程语言中使用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-20T11:47:20.407

您尝试做的事情是不可能的，因为这是编译时失败，整个语句需要一起编译。

它不会评估语句的第一部分，然后仅当这是真的时才编译第二部分。您需要将存在的测试和引用表的查询拆分为两个单独的语句，以便分别编译它们。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-20T09:25:02.790

看[这里](https://stackoverflow.com/questions/2646514/what-are-xand-and-xor)

没有 XAND 逻辑门（异与）之类的东西。从理论上讲，XAND 意味着两个操作数都为真或都为假。所以这意味着 XAND 与等于 (=) 相同，至少对于按位逻辑运算而言。

请显示一些示例代码来说明您要执行的操作。

问候

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-20T11:29:32.800

我前段时间搜索过这个，如果我没记错的话，Sql Server 确实会短路逻辑条件，但它决定首先检查哪个条件，而不管它们在`if`子句中出现的顺序如何。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-07-10T23:42:44.533

这可能是一个粗略的解决方案，但我有时会使用 COALESCE 语句来控制您试图获得的 if、else、then 结构的种类。在这种情况下，它看起来有点脏，因为我们正在寻找合并语句的逆。

```
DECLARE @temp_message AS varchar(100)
SELECT @temp_message = COALESCE(CASE
                                 WHEN OBJECT_ID('tempdb..#tempTable') IS NOT NULL THEN NULL
                                 ELSE 'Temp table does not exist'
                                END,
                                CASE
                                 WHEN EXISTS (SELECT * FROM #tempTable WHERE THIS_COLUMN = 'value') THEN NULL
                                 ELSE 'Specified value does not exist in temp table'
                                END,
                                'Temp table and data exists')

PRINT @temp_message 
```

COALESCE 运行一条又一条语句，直到一条语句不产生 NULL 值。这意味着你可以做一些很酷的事情，比如在运行一个昂贵的大型查询之前运行一系列小查询来检查一些值。让我知道这是否真的是非法的！它在我的机器上工作:)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-20T12:34:56.960

我在 MSSQL 中看到了两种接近这一点的方法：

**第一的。**如果您使用`sp_executesql`（动态 sql），您的存储过程将被编译而不会出错。此外，如果#tempTable 不存在，服务器将输出错误但继续批量执行：

```
exec sp_executesql N'SELECT count(*) FROM #tempTable WHERE THIS_COLUMN = ''value'''
if @@rowcount > 0 
     print 'ok'
else 
     print 'error'
end; 
```

**第二。**只需创建具有嵌套 IF 和 EXISTS 的用户定义函数（就像您现在所做的那样），它输出 0 和 1。并使用动态 sql 将表名和可能的过滤器值输入到此 UDF。在这种情况下，您可以在 IF 中使用此 UDF。

# java - 无法初始化类 net.sf.cglib.proxy.Enhancer

> ID：12509579
> 
> 赞同：8
> 
> 时间：2012-09-20T09:16:37.063
> 
> 标签：java, eclipse, hibernate, spring-mvc, jar

尝试在 Eclipse 中使用 hibernate 运行 spring mvc 应用程序时出现以下错误。

```
java.lang.NoClassDefFoundError: Could not initialize class net.sf.cglib.proxy.Enhancer
org.springframework.aop.framework.Cglib2AopProxy.createEnhancer(Cglib2AopProxy.java:229)
org.springframework.aop.framework.Cglib2AopProxy.getProxy(Cglib2AopProxy.java:171)
org.springframework.aop.framework.ProxyFactory.getProxy(ProxyFactory.java:112)
org.springframework.aop.framework.autoproxy.AbstractAutoProxyCreator.createProxy(AbstractAutoProxyCreator.java:476)
org.springframework.aop.framework.autoproxy.AbstractAutoProxyCreator.wrapIfNecessary(AbstractAutoProxyCreator.java:362)
org.springframework.aop.framework.autoproxy.AbstractAutoProxyCreator.postProcessAfterInitialization(AbstractAutoProxyCreator.java:322)
org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.applyBeanPostProcessorsAfterInitialization(AbstractAutowireCapableBeanFactory.java:407)
org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1461)
org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:519)
org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:456)
org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:294)
org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:225)
org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:291)
org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:193)
org.springframework.beans.factory.support.DefaultListableBeanFactory.findAutowireCandidates(DefaultListableBeanFactory.java:876)
org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:818)
org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:735)
org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredMethodElement.inject(AutowiredAnnotationBeanPostProcessor.java:551)
org.springframework.beans.factory.annotation.InjectionMetadata.inject(InjectionMetadata.java:87)
org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor.postProcessPropertyValues(AutowiredAnnotationBeanPostProcessor.java:284)
org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1106)
org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:517)
org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:456)
org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:294)
org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:225)
org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:291)
org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:193)
org.springframework.beans.factory.support.DefaultListableBeanFactory.findAutowireCandidates(DefaultListableBeanFactory.java:876)
org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:818)
org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:735)
org.springframework.beans.factory.support.ConstructorResolver.resolveAutowiredArgument(ConstructorResolver.java:795)
org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:723)
org.springframework.beans.factory.support.ConstructorResolver.autowireConstructor(ConstructorResolver.java:196)
org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.autowireConstructor(AbstractAutowireCapableBeanFactory.java:1035)
org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:939)
org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:485)
org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:456)
org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:294)
org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:225)
org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:291)
org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:193)
org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:609)
org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:918)
org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:469)
org.springframework.web.servlet.FrameworkServlet.configureAndRefreshWebApplicationContext(FrameworkServlet.java:631)
org.springframework.web.servlet.FrameworkServlet.createWebApplicationContext(FrameworkServlet.java:588)
org.springframework.web.servlet.FrameworkServlet.createWebApplicationContext(FrameworkServlet.java:645)
org.springframework.web.servlet.FrameworkServlet.initWebApplicationContext(FrameworkServlet.java:508)
org.springframework.web.servlet.FrameworkServlet.initServletBean(FrameworkServlet.java:449)
org.springframework.web.servlet.HttpServletBean.init(HttpServletBean.java:133)
javax.servlet.GenericServlet.init(GenericServlet.java:160)
org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)
org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:98)
org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:927)
org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)
org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1001)
org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:585)
org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:310)
java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)
java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)
java.lang.Thread.run(Thread.java:679) 
```

我已将 cglib-nodep-2.2.3 .jar 放入我的 web-inf/lib 文件夹中，但我仍然遇到同样的错误。不知道为什么，因为类在罐子里。无论罐子是否在那里，我都会收到相同的错误消息。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-11-22T13:17:35.650

这个问题是由于不包括 cglib 所具有的 asm 依赖项造成的。

解决方案 1：将正确版本的 asm 和 asm-util 添加到您的类路径

解决方案 2：使用 cglib-nodep 版本（包括两个 asm 依赖项）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-17T12:43:00.310

好的，因为没有解决方案，我遇到了同样的问题，我已经解决了，所以我把我的解决方案放在这里..

这

```
Could not initialize class net.sf.cglib.proxy.Enhancer 
```

正如@swemon 所说，与 cglib-nodep jar 有关

因此，即使在下载了最新版本并将其添加到我的构建路径之后，它也没有工作，因为之前我有一个旧版本，它仍然存在于 JBOSS/deploy/server/myServer/lib 文件夹中。我所做的只是在这个文件夹中替换了所需的 jar（cglib-nodep.jar 与 cglib-nodep-2.2.jar），做了一个 buid，重新启动服务器并完成。

注意：您的 cglib-nodep jar 版本可能与我的不同。确保使用正确版本的 Jar。注意：2：根据您使用的应用服务器，您的服务器部署文件夹可能与我的不同。

希望有帮助！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-20T09:20:18.943

你缺少罐子。我认为`cglib-nodep-2.2.3.jar`不包括`net.sf.cglib.proxy.Enhancer` 您需要的课程。您应该尝试[http://www.jarfinder.com/index.php/java/search/~net.sf.cglib.proxy.Enhancer~](http://www.jarfinder.com/index.php/java/search/~net.sf.cglib.proxy.Enhancer~)找到包含此类的 jar 文件并将这些 jar 文件之一添加到构建路径.

如果您发现您的类包含在哪个 jar 中，则在将 lib 添加到 web-inf/lib 文件夹后，

*   右键单击您的项目
*   单击构建路径 > 配置构建路径...
*   选择库标签并单击添加 JAR...
*   指向你的罐子，然后单击确定。
*   重建并再次运行。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-06-04T12:08:28.767

经过长时间的调试，我得到了解决方案。只需如上所述更改 aop:config 以及正确添加的 jar，

> aop:config proxy-target-class="true"

柴坦亚！

# .net - Emgu.CV.CvInvoke 抛出异常

> ID：12509582
> 
> 赞同：0
> 
> 时间：2012-09-20T09:16:50.840
> 
> 标签：.net, dll, opencv, emgucv

我在我的项目中使用 emgu。

我得到了这个例外： ![在此处输入图像描述](../Images/beaf3b1ff42e7b63f0a66185cfb59764.png)

这里是异常的详细信息： ![在此处输入图像描述](../Images/3120488abd971756fcc5eba11837ec36.png)

opencv_core242 在文件夹项目中，平台目标设置为 x86。

知道什么可能导致异常以及如何解决它吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T05:52:51.980

您可以在 cvextern.dll 上使用[Dependency Walker](http://www.dependencywalker.com/)来查看 opencv_core242.dll 是否依赖于另一个 dll，例如 nvcuda.dll，或者您是否有 32/64 位不匹配。

看看这个其他[问题](https://stackoverflow.com/questions/12594993/emgucv-nvcuda-dll-could-not-be-found)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T14:32:34.987

在 .../windows/system32 我粘贴了 cudart32_42_9.dll 文件。它帮助我解决了我的问题

# c++ - 在调用 clFinish 或 clWaitForEvents 之前，OpenCL 内核执行不会开始

> ID：12509587
> 
> 赞同：7
> 
> 时间：2012-09-20T09:17:05.233
> 
> 标签：c++, opencl

我正在尝试在 GPU 上运行内核并在主机（CPU）上进行额外的计算。我看到了这个效果：

只有内核需要大约 2000 毫秒：

> clEnqueueNDRangeKernel ...
> 
> clFinish（或 clWaitForEvents，我都试过了）

我用 sleep(10) 在 CPU 上模拟了额外的计算：

> clEnqueueNDRangeKernel ...
> 
> 睡眠（10）；
> 
> clFinish（或 clWaitForEvents）

理论上内核应该在 GPU 上运行，并且在 10 秒睡眠后内核应该完成。但是时间测量表明这一切都需要 12000 毫秒而不是 10000 毫秒。

clFinish 或 clWaitForEvents 是调用内核启动还是我错过了什么？

我正在使用 AMD Fusion CPU/GPU 和 Linux。

非常感谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-20T11:05:24.087

尝试`clFlush`在以下情况下立即调用`clEnqueueNDRangeKernel`：

> 刷新
> 
> 将命令队列中所有先前排队的 OpenCL 命令发布到与命令队列关联的设备。

[http://www.khronos.org/registry/cl/sdk/1.0/docs/man/xhtml/clFlush.html](http://www.khronos.org/registry/cl/sdk/1.0/docs/man/xhtml/clFlush.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-21T07:21:17.280

clFinish() 只保证当程序继续执行这个函数时内核已经完成，但内核何时开始执行则不确定。clFlush() 可以保证内核已经在设备上启动，而程序继续执行 clFlush() 语句，但是什么时候结束还不确定，所以需要 clFlush() 来保证内核已经在设备上启动，然后时间（2000ms）可以与主机端的睡眠时间（10000ms）重叠。希望它会有所帮助。

# audio - 在 J2me 中录制音频时出现异常

> ID：12509588
> 
> 赞同：4
> 
> 时间：2012-09-20T09:17:07.203
> 
> 标签：audio, java-me, midp, audio-recording, mmapi

在诺基亚 C1 中录制音频时出现异常。以下是我得到的以下异常：

```
Error2:
javax.microediting.media.MediaException: MUS 
```

谁能帮助我消除此异常或我哪里出错了？

下面，我提供了我在其中遇到此异常的代码：

```
package video;

import javax.microedition.midlet.*;

import java.io.*;
import javax.microedition.lcdui.*;
import javax.microedition.media.*;
import javax.microedition.media.control.*;

public class VoiceRecordMidlet extends MIDlet {

    private Display display;

    public void startApp() {
        display = Display.getDisplay(this);
        display.setCurrent(new VoiceRecordForm());
    }

    public void pauseApp() {
    }

    public void destroyApp(boolean unconditional) {
        notifyDestroyed();
    }
}

class VoiceRecordForm extends Form implements CommandListener {

    private StringItem message;
    private StringItem errormessage;
    private final Command record, play, end;
    private Player player;
    private byte[] recordedAudioArray = null;
    private RecordControl rc;
    private ByteArrayOutputStream output;

    public VoiceRecordForm() {
        super("Recording Audio");
        message = new StringItem("", "Select Record to start recording.");
        this.append(message);
        errormessage = new StringItem("", "");
        this.append(errormessage);
        record = new Command("Record", Command.SCREEN, 0);
        this.addCommand(record);
        play = new Command("Play", Command.SCREEN, 0);
        end = new Command("End", Command.SCREEN, 0);
        this.setCommandListener(this);
    }

    public void commandAction(Command comm, Displayable disp) {
        if (comm == record) {
            Thread t = new Thread() {

                public void run() {
                    try {

                        player = Manager.createPlayer("capture://audio");

                        player.realize();
                        rc = (RecordControl) player.getControl("RecordControl");
                        output = new ByteArrayOutputStream();
                        rc.setRecordStream(output);
                        rc.startRecord();
                        player.start();
                        removeCommand(record);
                        addCommand(end);

                    } catch (Exception e) {
                        errormessage.setLabel("Error1");
                        errormessage.setText(e.toString());
                    }
                }
            };

            t.start();

        } else if (comm == play) {
            try {

                ByteArrayInputStream recordedInputStream = new ByteArrayInputStream(recordedAudioArray);

                Player p2 = Manager.createPlayer(recordedInputStream, "audio/basic");

                **p2.prefetch();

                p2.start();**

            } catch (Exception e) {
                errormessage.setLabel("Error2");
                errormessage.setText(e.toString());
            }
        } else if (comm == end) {
            try {
                rc.stopRecord();
                removeCommand(end);
                addCommand(play);
                                rc.commit();
                recordedAudioArray = output.toByteArray();

                player.close();

            } catch (IOException ex) {
                ex.printStackTrace();
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T19:35:27.787

将代码的录制部分与我的一个项目的录制部分进行比较时，我能发现的唯一区别是我在调用 recordControl.startRecord() 之前调用 player.start()

```
player = Manager.createPlayer("capture://audio");
player.realize();
player.start();
recordControl = (RecordControl) player.getControl("RecordControl");
bos = new ByteArrayOutputStream();
recordControl.setRecordStream(bos);
recordControl.startRecord(); 
```

这适用于索尼爱立信手机。

我不播放音频，所以我不知道你的代码的那部分是否导致了问题。

# javascript - 从弹出 jsp 到 javascript 中检索值

> ID：12509589
> 
> 赞同：3
> 
> 时间：2012-09-20T09:17:07.537
> 
> 标签：javascript, jsp

我正在使用 JavaScript 打开一个弹出窗口（JSP 页面）。

我在弹出窗口中设置一些值并执行`window.close()`.

现在，我要将该值返回到我通过 JavaScript 打开弹出窗口的主页。

如何检索值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T09:30:28.133

在您的**jsp 页面**中添加以下内容：

```
function onPopupClose(returnParameter) {
   // Process returnParameter here
}

window.open('popup.jsp?parameter='+param,'mywindow','width=500,height=350,toolba‌​r=no,resizable=no,menubar=no'); 
```

然后在您的**弹出 jsp**中，在调用之前`window.close`，添加以下行：

```
window.opener.onPopupClose(myValue);//myValue is the value you want to return to main javascript
window.close(); 
```

# ruby - sinatra, rack auth basic 和从文件中查找

> ID：12509595
> 
> 赞同：4
> 
> 时间：2012-09-20T09:17:24.353
> 
> 标签：ruby, sinatra, rack

在 sinatra 应用程序中使用**rack::auth::basic**，有一种方法可以从简单的 yaml 文件中*查找用户和密码*（密码是否保持清晰无关紧要）？

示例 yaml 配置/users.yml

```
---
:users:
  usersA:
    :password: passwordA
    :otherdata: xxxxx
  userB:
    :password: passwordB 
```

我正在尝试的 sinatra 配置块（没有成功）。我如何从 yaml 文件中查找用户？

```
configure do
  config = YAML::load_file(File.join(Dir.pwd, 'config', 'users.yml'))   
  use Rack::Auth::Basic, "login" do |u, p|
  [u, p] == [u, config[:users][username][:password]]
  end
end 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-20T10:28:04.833

简单如：

```
configure do
  config = YAML::load_file(File.join(Dir.pwd, 'config', 'users.yml'))   
  use Rack::Auth::Basic, "login" do |u, p|
    p == config[:users][u][:password]
  end
end 
```

您还可以考虑将密码存储为 SHA1 并检查为：

```
Digest::SHA1.hexdigest(p) == config[:users][u][:password] 
```

# android - 从原生 android 活动代码调用 javascript 函数

> ID：12509598
> 
> 赞同：3
> 
> 时间：2012-09-20T09:17:52.417
> 
> 标签：android, html

我有以下测试 Android 应用程序。

```
public class TestActivity extends Activity {
    @Override
    public void onCreate(Bundle savedInstanceState) {       
        super.onCreate(savedInstanceState);

        setContentView(R.layout.main);

        WebView webView = (WebView)findViewById(R.id.webView);
        webView.getSettings().setJavaScriptEnabled(true);
        webView.setWebChromeClient(new WebChromeClient());
        webView.loadUrl("file:///android_asset/www/test.html");        
   }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        getMenuInflater().inflate(R.menu.sudoku, menu);
        return true;
    }

    @Override
    public boolean onOptionsItemSelected(MenuItem item) {
    // Need to call javascript function testFun() here (see test.html)
  }
} 
```

test.html 的代码

```
<!doctype html>
<html>
  <head>
  <title>Test</title>
  <meta charset="UTF-8" />
  <script type="text/javascript">
    function testFun()
     {
       alert('Hi');
    }
  </script
  <body>
        <button type="button" onclick="testFun()">Test</button>
  </body>
</html> 
```

我阅读了有关在 javascript [http://developer.android.com/guide/webapps/webview.html中调用 android 函数的信息](http://developer.android.com/guide/webapps/webview.html)

但无法从 android 调用 javascript 函数（菜单项单击）。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-20T09:19:50.063

你有没有试过这个。

```
webView.loadUrl("javascript:testFun()"); 
```

# javascript - 如何在 Box2D 中将身体粘在地上？

> ID：12509601
> 
> 赞同：1
> 
> 时间：2012-09-20T09:18:06.487
> 
> 标签：javascript, box2d

我想创建一个类似`b2CircleShape`或`b2PolygonShape`for ex 的身体并使用关节将其连接/粘贴到“**地面**”（屏幕？/世界？），这样当我用鼠标拖动它并释放它时，它会被拖回它的原始位置凭借关节。

我是否只创建两个实体，一个固定到位，另一个可以移动并在它们之间创建关节？

还是我将身体连接到某种“**地**”？

到目前为止，我得到了这个：http: [//jsfiddle.net/AP2D6/5/](http://jsfiddle.net/AP2D6/5/)

我正在使用**Box2DWeb**：[http ://code.google.com/p/box2dweb/](http://code.google.com/p/box2dweb/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T11:02:08.660

您可以使用鼠标关节或电机关节来执行此操作。电机关节是 Box2D 中相对较新的补充，因此很可能还没有出现在 Box2DWeb 中。

要使用鼠标关节执行此操作，只需按照通常对“真实”鼠标关节（即玩家实际控制的关节）所做的一切操作，但目标点不移动。您需要将“粘在地面”鼠标关节的最大力设置为比用于拖动身体的力更弱的值，否则您将无法移动它:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T09:30:52.543

也许您正在寻找“重力”？

我使用了 java 端口，但是：

创建 World 实例时，第二个参数是表示重力方向和力的 Vector2d。这种重力作用于所有非静态物体的每一步

如果您想要与身体不同的“自定义重力”，则创建一个表示身体重力方向和力的 Vector2d，然后每个循环都将其应用于身体

```
customGravity = new b2Vec2(x,y)
body.applyForce(customGravity)
[...]
world.step() 
```

# javascript - html5：有没有办法防止儿童干扰拖动事件

> ID：12509602
> 
> 赞同：7
> 
> 时间：2012-09-20T09:18:21.430
> 
> 标签：javascript, html, drag-and-drop

我在使用**html5**拖放时遇到了一点问题。我看不出有什么简单的办法摆脱它。基本上我有一些“盒子”，里面有一些其他的html元素。父框是可拖动的，它们可以相互放置。

我在正文上绑定`dragover`事件以处理整个页面上的拖放。问题是，当您拖动框时 - 有时会在子元素上触发事件，而父元素根本不会收到此事件。

有没有一种简单的方法可以防止这种情况发生？

基本上，我希望鼠标在目标框区域内时立即触发 dragover 事件。我知道解决这个问题的几种方法，但它们真的很丑，我想知道是否有一些简单的东西。

谢谢你的想法

我在代码中所做的简短版本：

```
document.addEventListener('dragenter', function(e) {

    if (e.target.className == 'candrophere')
        // cancel out "e" to allow drop

}, false); 
```

但在我的情况下，子元素几乎占据了整个 '.candrophere' 框，因此事件几乎永远不会在正确的目标上触发（尤其是当我更快地移动鼠标时）

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-03-05T05:31:12.950

css`pointer-events`规则防止鼠标交互事件在其应用的元素上触发，但 IE 目前不支持 ( [http://caniuse.com/pointer-events](http://caniuse.com/pointer-events) )。

我用于此问题的解决方法是添加类似

```
.is-drag-in-progress .child-elements
{
    pointer-events:none;
} 
```

到您的 CSS，并将`is-drag-in-progress`类添加到处理程序中的`body`元素`onDragStart`（并在拖动结束时将其删除）。这将防止子元素干扰父元素上的拖动事件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T10:00:54.203

基本上我的解决方案如下：

由于 e.target 和 e.currentTarget 大多数时候无法匹配到父框 - 剩下要做的就是手动检查 e.target 是否是父框的子框。有很多方法可以做到这一点，但我使用的是自定义函数。不能在这里发，因为它是基于我自己的框架，反正没有它就不行，但是伪代码如下：

```
// target is a framework object (much like jquery)
closestDroppableParent = function(target)
{
    // i know that all children in those boxes will not be any deeper than this
    var max_levels = 5;

    while (target && max_levels > 0)
    {
        max_levels--;

        // droppable boxes have data-droptype attribute set so only other boxes with the same attribute
        // can be dropped on them. This check can be done any way you like. You can have a custom class
        // for droppable objects, check for draggable attribute etc...
        // .data() is a framework function that returns the value of the data-* attributes
        if (target.data('droptype'))
            return target;

        // .parent() is a framework function to get parent node
        target = target.parent();
    }

    return null;
}

// drag over event
dragOverEventHandler = function(e)
{
    // convert the element to its closest droppable parent
            // $() is much like jquery
    var closest = closestDroppableParent($(e.target));

    if (closest)
        closest.addClass('draggedOver');
} 
```

# c# - linq 查询关闭我的 wpf 应用程序

> ID：12509607
> 
> 赞同：0
> 
> 时间：2012-09-20T09:18:39.857
> 
> 标签：c#, linq, c#-4.0, linq-to-objects

我有一个 wpf 应用程序。当我关闭它时。我调试了它，发现这个 linq 查询关闭了它（我不知道为什么！）

```
TodayCards = cards.Where(i => (i.NextTime.Day == DateTime.Now.Day && i.NextTime.Month == DateTime.Now.Month && i.NextTime.Year == DateTime.Now.Year)).Select(i => i).ToList(); 
```

我也试过

```
TodayCards = cards.Where(i => (i.NextTime.Day == DateTime.Now.Day && i.NextTime.Month == DateTime.Now.Month && i.NextTime.Year == DateTime.Now.Year)).ToList(); 
```

但它关闭了这两种情况。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T09:20:38.690

最有可能`NextTime`在`null`至少一张卡上或`cards`本身是`null`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T09:28:51.063

我发现了原因！ `cards`为空，它关闭了我的应用程序。我将此代码放在我的 linq 查询之前：

```
 foreach (var item in cards)
        {
            if (item.NextTime == null)
            {
                int a = 0;
            }
        } 
```

查找下次是否有任何 null 但它在运行前关闭，我发现问题是`card`. 我仍然不能说为什么它会毫无例外地关闭应用程序，但问题解决了！

# ef-code-first - EF 代码优先：当 IDENTITY_INSERT 设置为 OFF 时，无法在表“”中插入标识列的显式值

> ID：12509608
> 
> 赞同：3
> 
> 时间：2012-09-20T09:18:41.197
> 
> 标签：ef-code-first, sql-server-2000

我首先遇到了 EF 代码的问题

当我尝试将新记录插入表中时，我收到消息。

```
Cannot insert explicit value for identity column in table '' when IDENTITY_INSERT is set to OFF. 
```

知道为什么我会收到错误吗？

我正在使用以下代码：

```
 public void SaveNewResponse()
    {
        using (var context = new Context())
        {
            var newResponse = new Response()
                {
                    lngRequestLineID = 1001233,
                    memXMLResponse = "test Response",
                    fAdhoc = false,
                };
            context.tblResponses.Add(newResponse);
            context.SaveChanges();
        }
    } 
```

这是我的映射

```
 public class tblResponsMap : EntityTypeConfiguration<tblRespons>
{
    public tblResponsMap()
    {
        // Primary Key
        this.HasKey(t => new { t.lngResponseLineID});

        // Properties
        this.Property(t => t.lngResponseLineID)
            .HasDatabaseGeneratedOption(DatabaseGeneratedOption.None);

        this.Property(t => t.lngRequestLineID);

                 // Table & Column Mappings
        this.ToTable("tblResponses");
        this.Property(t => t.lngResponseLineID).HasColumnName("lngResponseLineID");
        this.Property(t => t.lngRequestLineID).HasColumnName("lngRequestLineID");
        this.Property(t => t.fAdhoc).HasColumnName("fAdhoc");
        this.Property(t => t.memXMLResponse).HasColumnName("memXMLResponse");

    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-20T09:21:35.860

好的，我找到了。数据库已正确设置，但我的映射不正确。

```
public class tblResponsMap : EntityTypeConfiguration<tblRespons>
{
public tblResponsMap()
{
    // Primary Key
    this.HasKey(t => new { t.lngResponseLineID});

    // Properties
    this.Property(t => t.lngResponseLineID)
        .HasDatabaseGeneratedOption(DatabaseGeneratedOption.Identity); <-- here

    this.Property(t => t.lngRequestLineID);

    // Table & Column Mappings
    this.ToTable("tblResponses");
    this.Property(t => t.lngResponseLineID).HasColumnName("lngResponseLineID");
    this.Property(t => t.lngRequestLineID).HasColumnName("lngRequestLineID");
    this.Property(t => t.fAdhoc).HasColumnName("fAdhoc");
    this.Property(t => t.memXMLResponse).HasColumnName("memXMLResponse");
}
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-05-12T17:57:08.400

当我通过将关系指向在当前上下文之外获取且不再被跟踪的实体模型来添加与 EF 核心实体模型的关系时，我遇到了这个错误。我这样做是为了避免最初让我感到尴尬的额外读取操作。

```
public static void AddMatches(List<Match> matches, Profile p)
{
    using (var db = new DbContext())
    {
        foreach (var match in matches)
        {
            match.Profile = p;
            db.Match.Add(match);
        }
        db.SaveChanges();
    }
} 
```

我通过执行另一个读取操作来解决它。在咨询了 Microsoft 文档[Here](https://docs.microsoft.com/en-us/aspnet/core/data/ef-mvc/crud?view=aspnetcore-5.0#entity-states)之后，我确信这是相对正常的，尤其是在 MVC 世界中。使固定：

```
public static void AddMatches(List<Match> matches, Profile p)
{
    using (var db = new DbContext())
    {
        var profile = db.Profile.Find(p.ProfileId);
        foreach (var match in matches)
        {
            match.Profile = profile;
            db.Match.Add(match);
        }
        db.SaveChanges();
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-10-25T00:18:34.863

您不需要更改映射代码，而是应该更改此行：

```
lngRequestLineID = 1001233 
```

对此：

```
lngRequestLineID = 0 
```

在我的过期中，用 [KeyAttribute] 装饰 de Id 实体的属性就足够了。

# tomcat - 为什么我能够使用一个网络连接而不是另一个网络连接来连接到 Tomcat 服务器？

> ID：12509612
> 
> 赞同：0
> 
> 时间：2012-09-20T09:19:12.810
> 
> 标签：tomcat, connection

在我的工作中，我有两个网络连接，第一个是 WIFI，第二个是有线连接。

使用 WIFI 连接，我可以通过在浏览器中输入连接到我的 tomcat 管理器：

```
http://my.website.ip:8080 
```

但是使用有线连接，浏览器正在等待然后给我一个错误消息，服务器没有响应超时问题。

如果我键入以下内容，知道我使用这两个连接中的任何一个都没有问题：

```
http://my.website.ip 
```

我有一个页面承认我的 tomcat 服务器正在工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T09:22:25.273

这可能不是一个编程问题。

您是否检查过您的有线连接是否将请求转发到端口 8080 和答案？端口 8080 的连接可能由于未知原因而被阻止用于任何目的地。

# qt - Qt 语言学家为什么我不能更改默认翻译

> ID：12509616
> 
> 赞同：1
> 
> 时间：2012-09-20T09:19:26.750
> 
> 标签：qt, linguistics

我试图从 linguist 工具中打开一个默认的 ts 文件，并发现我无法编辑翻译，如果我已经安装了二进制文件。但是如果我自己构建了源代码，我就可以做到这一点。有人可以解释为什么会这样吗？

# html - Howto get_env(REQUEST_METHOD) w/o ERROR 500

> ID：12509617
> 
> 赞同：2
> 
> 时间：2012-09-20T09:19:30.040
> 
> 标签：html, c, gdb, cgi

我正在使用 C 处理 CGI 文件，该文件仅在请求方法为 POST 时才执行。

```
int main(void)
{
    char    *method_str = getenv("REQUEST_METHOD");
    int iMethod = strcmp(method_str,"POST");
    int tid = 0;
    int own_id = 0;
    char    key[16] = "\0";

    if (iMethod == -1) {
        puts("Location:start.cgi\n\n");
    } else if (iMethod == 0) {
        char    *data = getenv("CONTENT_LENGTH");
        int size = atoi(data);
        char    *buffer = malloc((size+1)*sizeof(char));
        fgets(buffer,atoi(data)+1,stdin);
        int counter = count(buffer);
        char    **names = malloc(counter*sizeof(char *));
        char    **values = malloc(counter*sizeof(char *));
        parse(buffer, names, values);
        int isDel = strcmp(*(values+1),"Back to Start");
        if (isDel == 0) startpage(atoi(*values));
        else {
            own_id = atoi(*values);
            sprintf(key,"%s",*(values+1));
            int stat = login_status(own_id,key);
            if (stat == -1) {
                startpage(0);
            } else userpage(own_id);
        }
        free_mallocs(names,values,counter);
        free(buffer);

    }
    free(method_str);

    return 0;
} 
```

在 gdb 中运行 CGI 文件告诉我问题出在以下行：

> `int iMethod = strcmp(method_str,"POST");`. 错误是 SIGSEGV。

当我从 XAMPP 服务器打开 CGI 时，它运行良好。但是，当我在与我不同的 Ubuntu 服务器上运行它时，会出现错误 500。我尝试将 的值`getenv("REQUEST_METHOD")`与 NULL 进行比较，gdb 告诉我文件运行正常。但是，CGI 文件在我的 XAMPP 服务器和另一台服务器上都无法正常运行，两者都显示错误 500。我可以告诉您的是，这些函数设置了它们的 Content 标头。函数 count() 和 parse() 被适当地设置并且独立于手头的情况。提前致谢。

更新：如果用户直接打开 CGI 文件，浏览器将重定向到另一个 CGI 文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T09:29:16.257

我不确定您*到底*在问什么，但如果环境变量不存在则[`getenv()`](http://en.cppreference.com/w/c/program/getenv)返回。`NULL`取消引用`NULL`指针是未定义的行为，传递给的指针`strcmp()`将被取消引用。`NULL`作为参数传递给`strcmp()`是因此未定义的行为，这可能是分段错误（并且是这里的可能原因）。`strcmp()`通过`NULL`选中来保护对 的调用`method_str`。

为什么环境变量不存在我不知道。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T09:28:51.503

`strcmp`当第一个参数为`NULL`. 检查一下`NULL`，你会没事的：

```
char *method_str = getenv("REQUEST_METHOD");
int iMethod = -1;
if (method_str != NULL) 
     iMethod = strcmp(method_str,"POST");
} 
```

另外，尽量避免`strcmp`并始终使用`strncmp`它，因为它更安全：

```
strncmp(method_str, "POST", 4); 
```

# java - 获取IE浏览器的可视矩形

> ID：12509618
> 
> 赞同：0
> 
> 时间：2012-09-20T09:19:29.880
> 
> 标签：java, .net, windows, internet-explorer

在 Java 中，我如何获取 IE 浏览器的句柄并获取浏览器区域的矩形？在 .Net 中，我能够使用[UI Automation](http://msdn.microsoft.com/en-us/library/ms747327.aspx)完成此操作。

这是我在 .net 中完成的代码

```
AutomationElement element = AutomationElement.RootElement.FindFirst(TreeScope.Children,
    new PropertyCondition(AutomationElement.NameProperty, browserTitle+" - Windows Internet Explorer"));
element = element.FindFirst(TreeScope.Children,
    new PropertyCondition(AutomationElement.ClassNameProperty, "Frame Tab"));
element = element.FindFirst(TreeScope.Descendants,
    new PropertyCondition(AutomationElement.ClassNameProperty, "TabWindowClass"));

BrowserRect = element.Current.BoundingRectangle; 
```

有没有办法使用java做类似的事情并获得浏览器区域的矩形？

# php - Adobe Flex 和数据推送

> ID：12509636
> 
> 赞同：0
> 
> 时间：2012-09-20T09:20:41.673
> 
> 标签：php, mysql, apache-flex, client-server, push

我在这里找到了一个类似的问题，但答案没有那么有帮助，所以我希望能更幸运:)

我正在和我的朋友一起在 flex 中制作一个类似“风险”的游戏，作为一个大学项目。我们制定了与创建新游戏和允许多个用户加入相关的所有逻辑。但是，现在，我们正在使用从服务器获取游戏状态的“ping”更新每个客户端。

显然，这不是最好的方法，我想要某种服务器数据推送实现。

有谁知道如何做到这一点？

干杯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T12:18:34.193

许多 flex api 使用事件通知（例如 NetStream ）来让客户端了解服务器上发生的情况。这是一个使用 .net 的示例： http: [//cookbooks.adobe.com/post_RTMP_Data_Push_from__NET_to_Flex-16983.html](http://cookbooks.adobe.com/post_RTMP_Data_Push_from__NET_to_Flex-16983.html)

# iis - 如何在 ftp 上创建两个用户以访问不同的目录？

> ID：12509639
> 
> 赞同：0
> 
> 时间：2012-09-20T09:21:01.827
> 
> 标签：iis, ftp

如何为第二个用户创建 ftp 帐户？我有以下情况。

我有域名 xxx.yyy.com。当用户输入时，它会询问他们的用户名和密码。这会将它们定向到文件夹 C:\test\125。我现在想要的是创建另一个进入目录 C:\test\150 的用户。我试图在 test.yyy.com 同一个域上创建另一个用户。但是它并没有给我任何错误，只是不接受用户名和密码。我可以在日志文件中看到打开会话接受登录并再次关闭会话。

现在要么我有 xxx.yyy.com 并且根据用户转到这个目录 C:\test\150 或者这个 C:\test\125。我怎样才能做到这一点？

或者有这个

test.yyy.com 并转到一个目录 C:\test\125。

我怎样才能做到这一点。

感谢您提前提供帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T09:35:12.650

在 Godaddy 服务器中，它可以选择在为 FTP 帐户创建用户时提供访问路径。通过这个你可以解决问题

# sugarcrm - 还原由 SugarCRM 制作的自定义字段

> ID：12509644
> 
> 赞同：0
> 
> 时间：2012-09-20T09:21:23.777
> 
> 标签：sugarcrm

通过工作室在 SugarCRM 中创建自定义字段是非常简单的任务。我想要的是反之亦然。我想通过更改代码和数据库来恢复工作室制作的自定义字段？

我发现的一种简单方法是简单地从 vardef 中删除字段并从数据库中删除相关列，但我不确定它是否会起作用并且不会成为将来出现问题的原因。

任何人都可以提出任何可靠的解决方案吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T09:48:58.293

您可以通过 Studio 轻松删除字段。

[http://support.sugarcrm.com/02_Documentation/01_Sugar_Editions/04_Sugar_Professional/Sugar_Professional_6.5/Administration_Guide/07_Developer_Tools/01_Studio#Fields](http://support.sugarcrm.com/02_Documentation/01_Sugar_Editions/04_Sugar_Professional/Sugar_Professional_6.5/Administration_Guide/07_Developer_Tools/01_Studio#Fields)

# ruby-on-rails - Rails 3.1 引擎：my_engine.gemspec、add_dependency、add_development_dependency 和 Gemfile 的区别

> ID：12509646
> 
> 赞同：17
> 
> 时间：2012-09-20T09:21:31.343
> 
> 标签：ruby-on-rails, gem, rails-engines, gemfile

只是出于好奇……在我之前的帖子[Rails3.1 engine: can't get SLIM or HAML to work in test/dummy app](https://stackoverflow.com/questions/12508805/rails3-1-engine-cant-get-slim-or-haml-to-work-in-test-dummy-app/12509149#12509149)我问在哪里告诉 Ruby 在我的`test/dummy`应用程序中使用一些 gem。

（显而易见的？）答案是将其放入我的引擎的 Gemfile 中。这行得通，但它让我有点不舒服，因为在 Yehuda Katz 的帖子[澄清 .gemspec 和 Gemfile 的角色中，](https://stackoverflow.com/questions/12508805/rails3-1-engine-cant-get-slim-or-haml-to-work-in-test-dummy-app/12509149#12509149)他提到......

> ...在开发 gem 时，Gemfile “gem 的 Gemfile 应该包含 Rubygems 源和单个 gemspec 行”。

另一方面，在我的 Engine 的 Gemfile（使用 Rails 生成`rails plugin new my_engine`）中有：

```
# jquery-rails is used by the dummy application
gem "jquery-rails" 
```

所以这似乎是对的。**更新：不，它没有！看看我下面的回答...**

尽管如此，[在 StackOverflow 上的其他地方，](https://stackoverflow.com/questions/9073272/how-do-i-get-my-dummy-app-to-use-the-engines-template-engine)我看到解决方案据说只需要所需的 gem `config/application.rb`，而 https://stackoverflow.com/questions/5159607/rails-engine-gems-dependencies-how-to-load-them -into-the-application 它被告知最好放入`lib/<your_engine>/engine.rb file`.

这是我的想法：为什么`test/dummy`应用程序不简单地自动要求文件中指定的所有 Gems `.gemspec`？`add_dependency`我们甚至通过显式使用and来告诉 gem，哪些 gem 用于生产，哪些用于开发模式`add_development_dependency`，所以我看不出有什么不这样做的理由`test/dummy`。

所以这是最后一个问题：我必须在哪里告诉 Ruby 在我的`test/dummy`应用程序中使用 gem？我不想强迫 Ruby 在主机应用程序中也使用宝石。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-07-27T10:43:35.957

我认为正确的方法如下：

引擎是一个普通的宝石。开发 gem 时，将其依赖项放入`gemspec`文件中。如果您使用捆绑软件，那么作为开发人员，您可以创建一个`.lock`没有问题的特定版本的文件。但是在 中声明依赖项`gemspec`并不足以使用它们，您必须`require`在 gem 代码中使用它们。需要时，如果 gem 与 bundle 一起使用，则`.lock`使用版本。

在引擎中，与任何其他 gem 一样，它是相同的。您在`gemspec`文件中定义依赖项并运行`bundle install`，但仅使用它们是不够的。您必须要求它们，例如，在`lib/my_engine.rb`.

例如：

```
# File: my_engine.rspec
# ...
s.add_dependency `slim_rails`, ' ~>1.0' 
```

## # ...

```
# File: lib/my_engine.rb
require "my_engine/engine"
require "slim-rails"

module MyEngine
end 
```

`Gemfile`我不确定为什么如果[在](http://guides.rubyonrails.org/engines.html#other-gem-dependencies).

> 引擎内的 Gem 依赖项应在引擎根目录的 .gemspec 文件中指定。原因是引擎可能作为 gem 安装。如果要在 Gemfile 中指定依赖项，传统的 gem 安装将无法识别这些依赖项，因此它们不会被安装，从而导致引擎出现故障。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-27T13:41:55.540

这是我到目前为止发现的。

在引擎（使用创建）中，您必须**仅**`rails plugin new my_engine`在 my_engine.gemspec 文件中指定所需的 gem ，因为它们随后会从 test/dummy/Gemfile 中使用.**`gemspec`**

 **这是生成的 test/dummy/Gemfile 内容：

```
source "http://rubygems.org"

# Declare your gem's dependencies in simple_view_helpers.gemspec.
# Bundler will treat runtime dependencies like base dependencies, and
# development dependencies will be added by default to the :development group.
gemspec

# jquery-rails is used by the dummy application
gem "jquery-rails"

# Declare any dependencies that are still in development here instead of in
# your gemspec. These might include edge Rails or gems from your path or
# Git. Remember to move these dependencies to your gemspec before releasing
# your gem to rubygems.org.

# To use debugger
# gem 'debugger' 
```

我真的不知道这条线`gem "jquery-rails"`在这里做什么，似乎与评论中提出的完全矛盾。另一方面，当我尝试在我的测试/虚拟应用程序中使用[SLIM](https://github.com/stonean/slim) gem（而不是 ERB）时，似乎我**必须**在 Gemfile 中指定它，否则它将无法工作。还是有点乱，这玩意...

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-11-23T18:30:58.117

**TL;博士：**

`Gemfile`开发引擎时不要使用任何。把所有东西都放在你的引擎里`gemspec`，让引擎本身需要它需要的一切。

* * *

> 为什么测试/虚拟应用程序不简单地自动要求 .gemspec 文件中指定的所有 Gem？

我猜应用程序不会出于性能原因自动要求其引擎的依赖项。

因此，如果虚拟应用程序应该是使用引擎对真实应用程序的真实模拟，那么它也不应该这样做。

此外，假设虚拟应用程序*将*自动要求所有依赖项，包括开发依赖项。在这种情况下，即使您的开发依赖项之一实际上是运行时依赖项，您的测试也可能会成功。那真的很烦人。

> 据说只需要 config/application.rb 中所需的 gem

这也可能掩盖引擎的运行时依赖关系，所以最好不要这样做。

> 所以这是最后一个问题：我必须在哪里告诉 Ruby 在我的测试/虚拟应用程序中使用 gem？我不想强迫 ruby​​ 在主机应用程序中也使用 gem。

如果该 gem 仅用于测试，请在您的测试/规范助手中使用它。

否则，如果您的引擎需要该 gem 才能运行，您确实*应该*强制使用它。

> James：这会让我相信引擎的依赖项放在 gemspec 中，而虚拟应用程序的依赖项放在 Gemfile 中

虚拟应用程序的捆绑程序存根实际上引用了虚拟应用程序自己的缺失 Gemfile。所以我想它是故意遗漏的。这是完全有道理的。

可以这样想：您为更改虚拟应用程序所做的任何事情都会导致测试无法在中性背景下执行，因此不具有代表性。

如果您真的希望能够重用您的引擎，并将其放入任何空白的新 Rails 应用程序中，那么您的虚拟应用程序应该就是这样：一个空白的新 Rails 应用程序。**

# php - Mongodb/PHP 更新，删除集合中的一条记录并引发异常。为什么？

> ID：12509652
> 
> 赞同：0
> 
> 时间：2012-09-20T09:22:14.423
> 
> 标签：php, mongodb

我的mongodb集合的内容是

```
{
"_id" : ObjectId("50072668b4a6de94100000bb"),
"addresses" : [
    {
            "_id" : ObjectId("50072668b4a6de94100000bf"),
            "address1" : "66 Wadsworth Park Dr",
            "address2" : null,
            "city" : "Draper",
            "country" : "United States",
            "country_code" : "US",
            "name" : "main",
            "primary" : true,
            "state" : "Utah",
            "zip" : "84020"
    }
 ]
} 
```

我正在尝试在集合中添加另一个地址详细信息，以便内容变为，

```
{
 "_id" : ObjectId("50072668b4a6de94100000bb"),
  "addresses" : [
  {
        "_id" : ObjectId("50072668b4a6de94100000bf"),
        "address1" : "66 Wadsworth Park Dr",
        "address2" : null,
        "city" : "Draper",
        "country" : "United States",
        "country_code" : "US",
        "name" : "main",
        "primary" : true,
        "state" : "Utah",
        "zip" : "84020"
   } 
   {
        "_id" : ObjectId("50072668b4a6de9410000023"),
        "address1" : "a",
        "address2" : "b",
        "city" : "c",
        "country" : "d",
        "country_code" : "d",
        "name" : "e",
        "primary" : "f",
        "state" : "g",
        "zip" : "h"
   } 
 ]
} 
```

这是我为更新地址字段而编写的代码。

```
$add_address = array('$addToSet' => array("addresses" => array("_id" => new MongoId(), "address1" => $address1, "address2" => $address2, "city" => $city, "country" => $country, "country_code" => $country_code, "name" => $name, "primary" => $primary, "state" => $state, "zip" => $zip)));
$mycollection->update(array("_id" => new MongoId($id)), $add_address); 
```

但是这段代码并没有更新内容，同时它删除了整条记录。我得到的异常消息是，

```
 Fatal error: Uncaught exception 'MongoCursorException' with message 'false' 
```

我拥有的“**地址**”是一个嵌入式对象。我想知道我们是否可以在嵌入式对象上使用**“addToSet” 。**

我哪里错了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T09:39:51.837

您是否尝试过以下方式进行更新？

```
$add_address = array('$set' => array("addresses" => array("_id" => new MongoId(), "address1" => $address1, "address2" => $address2, "city" => $city, "country" => $country, "country_code" => $country_code, "name" => $name, "primary" => $primary, "state" => $state, "zip" => $zip)));
$mycollection->update(array("_id" => new MongoId($id)), $add_address); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T09:59:20.823

`$addToSet`用于将字段附加到数组（如果它尚不存在）。

你应该做的是使用[`$set`](http://www.mongodb.org/display/DOCS/Updating#Updating-%24set)更新修饰符：

```
$add_address = array('addresses' => array("_id" => new MongoId(), "address1" => $address1, "address2" => $address2, "city" => $city, "country" => $country, "country_code" => $country_code, "name" => $name, "primary" => $primary, "state" => $state, "zip" => $zip));
$mycollection->update( array( array("_id" => new MongoId($id) ), array('$set' => $add_address) ); 
```

并且`$unset`用于删除一个字段。

# session - 在会话中存储用户凭证的安全方式

> ID：12509662
> 
> 赞同：1
> 
> 时间：2012-09-20T09:22:53.127
> 
> 标签：session, credentials

我知道您可能在想“*不要存储用户的凭据，用盐+胡椒对它们进行哈希处理，你这个白痴！* ”，但请继续阅读。

我正在开展一个项目，该项目将向用户询问其数据库的凭据（登录名/密码）。这些凭据将针对数据库进行尝试，如果连接成功，我将“保留”它们以按照用户的要求对数据库进行一些工作（创建表、更改行、执行 SELECT 等）。

这意味着，每次用户执行某项操作时，我都会在执行他的请求之前重新连接到数据库 => 我无法对凭据进行哈希处理，因为它们对后续请求毫无用处。如果你愿意，它就像 phpMyAdmin。

所以我想出了各种可能，但每一个都有缺陷。我正在寻找建议以确定哪个更好。

1.  **只需在 clear 中使用带有登录名/密码的 Session cookie**。但只允许通过 HTTPS 使用：这是最简单的实现方式。我看到的唯一缺点是如果客户端存在 XSS，则可以检索凭据。
2.  **相同的会话 cookie，但使用 AES 加密的登录名/密码**。我相信这就是 PhpMyAdmin 所使用的。我也可以通过只允许 HTTPS 走得更远。
3.  **将凭证以明文形式存储在本地会话存储**中（sqlite 中的 session.db），并为将使用给定令牌 + 浏览器详细信息检索的客户端使用令牌。缺点：如果攻击者访问 session.db 文件，他将能够读取尚未从文件中删除的会话。我不认为加密它们会有用，因为如果他可以访问 session.db，他当然也可以访问用于加密它们的 SECRET_KEY。

你怎么看？你会怎么办？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T09:43:17.650

我建议不要使用 1\. 或 2.，原因如下：

*   凭据对客户端无用
*   在每个请求（以任何形式）时通过网络发送他的凭据不是一个好主意

所以留下来的是版本 3 的一个变体。将它存储在会话中。这有一个重要的属性：**如果您的会话存储不安全，这意味着您的服务器不安全。游戏结束。**

尽管如此，为了防止对 session.db 的攻击，您可以在您的应用程序中使用硬编码的密钥库。这个密钥库用会话令牌加盐，然后散列，结果用作加密和解密客户端凭据的密钥。这样，攻击者将需要破坏 session.db 和您的应用程序（以获取密钥库）。如果他能够做到这一点，没有什么可以帮助你。

# javascript - 如何实现这是带有 Redis 的 node Js/Express ？基本上将回调值存储到变量

> ID：12509663
> 
> 赞同：0
> 
> 时间：2012-09-20T09:22:52.567
> 
> 标签：javascript, jquery, node.js, express

我的数据结构如下所示`redis`。我想获得所有的价值`list`，它是来自其他人的相关数据`sets.`

数据结构 ：

```
lpush mylist test1
lpush mylist test2
lpush mylist test3

set test1 "test1 value1"
set test1 "test1 value2"
set test2 "test2 value1"
set test2 "test2 value2" 
```

我想从中获取所有值`list`和相关`set`值。

我在下面尝试过这样的。

```
var redis        = require('redis')
var redis_client = redis.createClient();

var test = redis_client.lrange(conv_id, 0, -1, function (error, response) {
                     return response;
             });

var datas = redis_client.mget(test, function (error, response) {
                     res.send("datas_text", {data: response});
             }); 
```

如何获取回调值？

但这种方式是有效的。

```
 redis_client.lrange(conv_id, 0, -1, function (error, response) {
                   redis_client.mget(response, function (err, datas) {
                      res.send("datas_text", {data: datas});
                   });
             }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T15:15:20.463

你必须记住 node.js 是异步工作的；这意味着当您的代码运行时，所有耗时的活动都被设置为在后台运行，并且应该保存返回值的变量将为空。

您要做的是创建一个回调函数，该函数将在进程完成时运行；阅读这本免费的电子书：[http](http://www.nodebeginner.org/) : //www.nodebeginner.org/ 它解释了 node.js 如何很好地工作。

祝你好运！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T09:42:13.967

因为这是一个异步函数调用 return 在这里不起作用，如果你想继续处理响应数据，你必须稍微重构你的代码并传入另一个回调函数。

我已经发布了一个类似问题的简短示例，在这里查看[回调函数和异步请求的用法](https://stackoverflow.com/questions/12446646/usage-of-callback-functions-and-asynchronous-requests/12446699#12446699)，希望这对您有所帮助，并且您对回调编码风格有所了解。

# sql-server - 仅返回一年中当前和过去的月份

> ID：12509664
> 
> 赞同：0
> 
> 时间：2012-09-20T09:23:04.470
> 
> 标签：sql-server, sql-server-2008, tsql, datetime

下面是我的代码，它将返回一年中的所有月份。

```
SELECT TOP 12
DATENAME(MONTH, DATEADD(MONTH,ROW_NUMBER() OVER (ORDER BY object_id) - 1,0))
FROM sys.columns 
```

我必须进行哪些更改才能仅返回已过去的月份和当前月份？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-20T09:26:24.280

试试这个。

```
select DATENAME(month, dateadd(month, number-1,0))
from master..spt_values
where type='p'
and number between 1 and MONTH(getdate()) 
```

# jquery - 如何在 jQuery Mobile 中更改标题的高度？

> ID：12509666
> 
> 赞同：0
> 
> 时间：2012-09-20T09:23:07.020
> 
> 标签：jquery, iphone, html, mobile

我正在制作一个移动网页，但我认为标题太小，高度明智。有什么办法让我改变它吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T12:12:20.563

如果您需要创建不遵循默认配置的标头，只需将自定义样式标记包装在任何容器中，例如 div。该插件不会将自动按钮逻辑应用于标题容器内的包装内容，因此您可以编写自定义样式来布置标题中的内容。

也可以在完全不使用标题数据角色的情况下创建自定义条。例如，从任何容器开始并添加 ui-bar 类以应用标准条形填充，并添加 ui-bar-b 类以从您的主题中分配条形样本样式。（“b”可以是任何样本字母。）[链接](http://jquerymobile.com/test/docs/toolbars/docs-headers.html)

# zend-framework - 具有相同索引的数组的 zend 形式

> ID：12509667
> 
> 赞同：2
> 
> 时间：2012-09-20T09:23:08.897
> 
> 标签：zend-framework, zend-form

我需要在zend中获得类似的东西

```
<input type="text" name="phone[1]" value="" />
<input type="text" name="address[1]" value="" />
<input type="text" name="banana[1]" value="whatever" /> 
```

请注意，它们在括号内具有相同的 id！（我不需要`name="phone[]"`，或`name="phone[phone1]"`）

我已经尝试过 [https://stackoverflow.com/a/3673034/579646](https://stackoverflow.com/a/3673034/579646)和 [https://stackoverflow.com/a/406268/579646](https://stackoverflow.com/a/406268/579646)和[https://stackoverflow.com/a/7061713/579646](https://stackoverflow.com/a/7061713/579646)

问题出在 ZendFramework 中，我最终不得不用相同的名称“1”命名 3 个元素，最后一个元素覆盖了前一个元素。即使我创建 3 个子表单，我也会得到相同的效果。

不同的示例显示了如何获得具有不同索引或没有索引（`[]`）的数组，但我需要不同的数组来具有相同的索引。

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-25T20:41:54.450

Zend_Form 对此命名有一个特性`setElementsBelongTo`。请参阅 [http://framework.zend.com/manual/1.12/en/zend.form.advanced.html](http://framework.zend.com/manual/1.12/en/zend.form.advanced.html)

使用方法是为 Zend_Form 对象设置前缀`setElementsBelongTo`，如果你想遍历每个字段，那么你可以使用子表单来封装每组字段

您可以`setElementsBelongTo`在控制器或`init()`表单类的方法中调用：

```
$mainForm = new Zend_Form();

$phoneForm = new Zend_Form_Subform();
$element = $phoneForm->createElement('text', '1'); // 1 is the element inside of the brackets
$phoneForm->addElement($element);
$phoneForm->setElementsBelongTo('phone'); // phone is the part leading the brackets
$mainForm->addSubform($phoneForm, 'phone_form');

$phoneForm = new Zend_Form_Subform();
$element = $phoneForm->createElement('text', '2'); // 1 is the element inside of the brackets
$phoneForm->addElement($element);
$phoneForm->setElementsBelongTo('phone'); // phone is the part leading the brackets
$mainForm->addSubform($phoneForm, 'phone_form2');

$addressForm = new Zend_Form_Subform();
$element = $addressForm->createElement('text', '1');
$addressForm->addElement($element);
$addressForm->setElementsBelongTo('address');
$mainForm->addSubform($addressForm, 'address_form');

echo $mainForm;

var_dump($mainForm->getValues()); 
```

给

```
 array(2) { 
["phone"]=> array(2) { [1]=> NULL [2]=> NULL } 
["address"]=> array(1) { [1]=> NULL } } 
```

要获得预期的结果，您需要删除一些装饰器（Form、dt 等）：

```
<input type="text" name="phone[1]" value="" />
<input type="text" name="address[2]" value="" /> 
```

然后，当您检索值时`$form->getValues()`，结果是：

```
Array(
   'phone' = Array(
       '1' => <value>,
   ),
   'address' = Array(
       '1' => <value>,
   )
); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T10:27:27.770

i do not understand, why you need this special case, but the only possible solution in my opinion is, to use a custom template.

```
class YourForm extends Zend_Form
{
    public function init()
    {
        $this->setDecorators(array(
            array(
                'ViewScript',
                array(
                    'viewScript' => 'path/to/your/phtml/file',
                    'possibleOtherParamYouWantToPass' => 'value',
                    ...
                )
            )
        ));
    }
} 
```

So what you do is, you say that you want to use a template file, where you can declare everything by yourself. Also your `banana[1]`.

But you will lose simple validation and other benefits.

# asp.net - 如何验证未经批准的用户 asp.net MVC 3

> ID：12509668
> 
> 赞同：0
> 
> 时间：2012-09-20T09:23:09.093
> 
> 标签：asp.net, asp.net-mvc-3, asp.net-membership

在用户获得批准之前验证用户时遇到问题。这是代码：

> 公共无效登录（LoginViewModel 模型）{
> 
> ```
>  if (Membership.ValidateUser(model.UserName, model.Password))
>         {
>             if (Membership.GetUser(model.UserName).IsApproved)
>             {
> 
>                 FormsAuthentication.SetAuthCookie(model.UserName, model.KeepMeLoggedIn);
>             }
>             else
>             {
>                 throw new Exception("Your email is not verified yet. Please check your email!");
>             }
>         }
>         else
>         {
>             throw new Exception("Username or Password doesn't match");
>         }
>     } 
> ```

问题是即使用户名和密码都很好，但用户还没有被批准，它会抛出第二个异常。

我试图覆盖 ValidateUser，但我不能调用它。

> ```
> public class MyValidation : SqlMembershipProvider
>     {
>         public override bool ValidateUser(string username, string password)
>         {
>             MembershipUser user = GetUser(username, false);
>             if (!user.IsApproved)
>             {
>                 return true;
>             }
> 
>             return base.ValidateUser(username, password);
> 
>         }
>     } 
> ```

有什么建议么？

编辑：控制器代码

```
[AcceptVerbs(HttpVerbs.Post)]
    public ActionResult Login(LoginViewModel model)
    {
        AccountService service = new AccountService();
        if (ModelState.IsValid)
        {
            try
            {
                service.Login(model);
                return RedirectToAction("Index", "Home");
            }
            catch (Exception e)
            {
                TempData["errorMessage"] = e.Message;
                return RedirectToAction("Index", "Home");
            }
        }
        return RedirectToAction("Index", "Home");
    } 
```

我提到登录是部分视图

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T09:28:54.790

> 我试图覆盖 ValidateUser，但我不能调用它。

当您调用时，`Membership.ValidateUser`这将查找在您的 web.config 中注册的成员资格提供程序。因此，如果您已经配置了自定义提供程序，那么它将调用您的自定义 ValidateUser 方法：

```
<membership defaultProvider="MyProvider">
    <providers>
        <add name="MyProvider" type="MvcApplication1.MyValidation, MvcApplication1" />
    </providers>
</membership> 
```

此外，您不应该在这些情况下抛出异常，因为这些不是异常情况。使用异常仅处理异常情况。您应该在 ModelState 中添加错误。控制器动作也不应该`ActionResults`返回`void`。当您启动一个新的 MVC 应用程序时，请查看默认为您创建的`LogOn`操作。`AccountController`

# android - XmlPullParser 看不到 DOCDECL 元素

> ID：12509677
> 
> 赞同：0
> 
> 时间：2012-09-20T09:23:39.930
> 
> 标签：android, xml-parsing, xmlpullparser

我正在使用 XML 拉解析器来读取 XML 文件，并且我想读取 DocDecl 元素（文件开头的 .

这是我正在使用的代码，

```
FileInputStream inputStream;
XmlPullParserFactory factory;
XmlPullParser xpp;
XmlNode document;

inputStream = new FileInputStream(file);

factory = XmlPullParserFactory.newInstance();
factory.setNamespaceAware(true);
factory.setFeature(XmlPullParser.FEATURE_PROCESS_DOCDECL, true);
xpp = factory.newPullParser();
xpp.setInput(inputStream, null);

int eventType = xpp.getEventType();
while (eventType != XmlPullParser.END_DOCUMENT) {

    switch (eventType) {
    case XmlPullParser.START_DOCUMENT:
        Log.i("Test XML", "START_DOCUMENT");
        break;
    case XmlPullParser.END_DOCUMENT:
        Log.i("Test XML", "END_DOCUMENT");
        break;
    case XmlPullParser.START_TAG:
        Log.i("Test XML", "START_TAG");
        break;
    case XmlPullParser.END_TAG:
        Log.i("Test XML", "END_TAG");
        break;
    case XmlPullParser.TEXT:
        Log.i("Test XML", "TEXT");
        break;
    case XmlPullParser.CDSECT:
        Log.i("Test XML", "CDSECT");
        break;
    case XmlPullParser.ENTITY_REF:
        Log.i("Test XML", "ENTITY_REF");
        break;
    case XmlPullParser.IGNORABLE_WHITESPACE:
        Log.i("Test XML", "IGNORABLE_WHITESPACE");
        break;
    case XmlPullParser.PROCESSING_INSTRUCTION:
        Log.i("Test XML", "PROCESSING_INSTRUCTION");
        break;
    case XmlPullParser.COMMENT:
        Log.i("Test XML", "COMMENT");
        break;
    case XmlPullParser.DOCDECL:
        Log.i("Test XML", "DOCDECL");
        break;
    default:
        break;
    }
    eventType = xpp.nextToken();
} 
```

这是我得到的结果logcat：

START_DOCUMENT START_TAG START_TAG TEXT END_TAG START_TAG TEXT END_TAG COMMENT END_DOCUMENT

使用以下 xml

```
<?xml version="1.0" encoding="utf-8"?>
<root>
    <item>Some text</item>
    <item>Some other text</item>
    <!-- Here's a comment -->
</root> 
```

我正在使用 FEATURE_PROCESS_DOCDECL 以及 nextToken() 来确保阅读所有内容，但未处理 DocDecl。我错过了什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T13:00:41.297

我将 DOCDECL 标记误认为是 xml 文件开头的标记，但它用于 DOCTYPE 声明。

为了实现我想要的，从 xml 中获取版本、编码等，可以使用以下代码：

```
public static final String PROPERTY_XML_VERSION = "http://xmlpull.org/v1/doc/properties.html#xmldecl-version";
public static final String PROPERTY_XML_STANDALONE = "http://xmlpull.org/v1/doc/properties.html#xmldecl-standalone";

// [...] 

int eventType = xpp.getEventType();

while (eventType != XmlPullParser.END_DOCUMENT) {
}

String version = (String) xpp.getProperty(PROPERTY_XML_VERSION);
Boolean standalone = (Boolean) xpp.getProperty(PROPERTY_XML_STANDALONE);
String encoding = xpp.getInputEncoding(); 
```

我应该更好地阅读[XmlPullParser Doc](https://developer.android.com/reference/org/xmlpull/v1/XmlPullParser.html)

# algorithm - 具有指定距离/节点数的寻路算法

> ID：12509679
> 
> 赞同：8
> 
> 时间：2012-09-20T09:23:51.200
> 
> 标签：algorithm, path-finding

我需要一种算法，它会给我一条从开始节点到结束节点的路径，但路径必须有确切数量的节点，否则寻路应该失败。

为了扩展，我有一个瓷砖网格。只能移动到紧邻的上、下、左或右瓷砖（意思是，没有对角线移动）。在路径中可以使用和不可以使用哪些 tile 有很多规则，但大多数情况下可以归结为一个简单的 bool 来判断该 tile 是否可以使用（这可以在开始算法之前计算. 但是，给我带来麻烦的是，我有一个指定的路径必须具有的距离，这意味着，从一块瓷砖到相邻瓷砖的每一次移动都是 1 的距离，整条路径应该有一个指定的距离，不多也不少。而且，一旦一个瓷砖被踩过（但在算法开始时所有的瓷砖都可用），它就不能再被踩到，有点像玩旧的蛇游戏，你必须注意不要吃自己。

我查看了 Dijkstra/A* 并搜索了寻路算法，但据我所知，所有这些算法都集中在最短路径上，这对我没有多大好处。我不在乎它是哪条路径，只要它遵循上述规则即可。

我是否遗漏了一些东西，这样的算法是否已经存在，或者是否有一种简单的方法可以修改 Dijkstra/A* 以给出这个结果？由于我不是以英语为母语的人，我可能使用了错误的术语，因此我欢迎针对此类算法提出关键字建议。

当我说它必须是准确的距离并且不能两次使用同一个瓷砖时，这是我的意思的一个例子。

假设距离必须为 7。现在让我们用 O 标记路径中可以使用的图块，用 X 标记不能使用的图块，用 S 标记起点，用 E 标记目标。

```
XXXXXXX
潇潇
呜呜呜

```

如果没有距离限制，一个人可以向左走，问题就解决了。如果有距离限制，而不是“不能踩同一块瓷砖”的限制，可以先下一次，然后左，再右，再左，再右，再左，再上到达目标. 由于存在两种限制，因此需要向右，向下，向左，向左，向左，向上，然后向右才能到达目标。但是，如果情况是这样，就没有有效的路径。

```
XXXXXXX
潇潇
XXOOOXO

```

如果它是相关的，我正在用 C# 开发这个棋盘游戏。

至于最大距离，这里是距离的范围。玩家将掷骰子并得到数字 1-6。如果玩家得到一个 6，他再次掷骰子，如果他得到另一个 6，一次又一次，直到他没有得到一个 6。距离是得到的数字加上玩家捡起的物品数量，理论上可以上升到 8，但通常是 0-3，maaaybe 4。

另一方面，我刚刚收到新订单，游戏规则已更改为允许在同一路径上两次踩同一位置，我相信这大大简化了过程，但我将把这个问题保留为我认为它有很好的答案可以帮助处于这种情况的人。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-20T10:01:03.407

由于您遇到每个步骤的成本为 1 的问题，因此称为[深度限制搜索](https://en.wikipedia.org/wiki/Depth-limited_search)的深度优先搜索的简单变体应该能够找到您想要的路径类型。Python中的朴素版本：

```
def dls(path, goal, depth):
    last = path[-1]
    if len(path) == depth:
        if last == goal:
            return path
    else:
        for n in neighbors(last):
            if allowed(n) and n not in path:
                path.append(n)
                solution = dls(path, depth)
                if solution:
                    return solution
                path.pop()

# call as:
dls([start], goal, depth) 
```

正如其他人所指出的，这个问题是 NP 完全的，所以不要指望更长的路径长度会出现奇迹。

[Russell & Norvig](http://aima.cs.berkeley.edu/)是这类算法的权威教科书。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-20T09:56:04.347

由于它是 NP 完全的，正如 Haile 所指出的，如果您的问题足够小，这里有一个启发式方法：

*   找到不包含`S`nor的半岛（即仅通过一个节点连接到其余部分的图的部分）`E`并删除它们。
*   找到`P`从`S`到的最短路径`E`。如果`n`小于`len(P)`，则无解。
*   `S`现在，从到进行深度优先搜索`E`，使用以下启发式方法选择首先挖掘的节点。设为`A`深度优先搜索中的当前图块。在欧几里得几何中，将 的位置投影`A`在线上`(SE)`并称之为点`A'`。尽量保持比例`len(current path) / n`接近`len([SA']) / len([SE])`。或者更好的是，以某种方式“投射”在获得并保持比率接近`A`的路径上。`P``A''``len(current path) / n``len([SA''] along P) / len(P)`

我们对您将要处理的具体情况知之甚少，肯定有更多启发式方法可以添加以丢弃深度优先搜索树的部分内容。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-20T09:41:46.293

如果有一个快速的算法，你可以插入，`number of nodes = n`算法会很快告诉你是否有[哈密顿路径](http://en.wikipedia.org/wiki/Hamiltonian_path)。由于该问题是NP完全的，因此您的问题也是如此。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-20T14:51:32.763

现在问题已经用通常的距离值更新了......

因此，在每个时间步，您最多有 4 个选择，最多有 5+4 = 9 个步骤。这使得少于 4 ⁹ = 262 144 个潜在路径。先试试蛮力，看看能走多远。

另外，请注意，反复掷骰子直到得到 6 以外的数字，就相当于在 1 和 5 之间抽取一个随机数。在电脑游戏中微不足道，并且有物理的这种骰子（谷歌搜索“5 面骰子”图像）。使用十面骰子也很常见。

# asp.net - nopCommerce 2.65 的命名空间中的子元素“MvcBuildViews”无效

> ID：12509681
> 
> 赞同：0
> 
> 时间：2012-09-20T09:23:53.283
> 
> 标签：asp.net, asp.net-mvc, asp.net-mvc-3, razor, nopcommerce

我已经下载了带有 MVC/Razor 的 nopCommerce 最新版本，但我无法打开该项目，因为它给出的错误为`invalid child element 'MvcBuildViews' in namespace`.

我试图删除它，然后尝试打开项目，但它不允许这样做。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T13:45:51.333

我通过安装 MVC 3 修复了它

# java - 通过 OpenCMIS 或 java API 在 alfresco 中创建用户

> ID：12509682
> 
> 赞同：1
> 
> 时间：2012-09-20T09:24:03.563
> 
> 标签：java, alfresco, createuser, opencmis

我使用 alfresco-community-4.0.e、OpenCMIS 和 primefaces 作为用户界面构建 Web 应用程序。

我需要以编程方式在露天创建用户。我尝试使用以下代码创建用户：

```
Blockquote 
if (!personService.personExists("tuser1")) {
        personService.createPerson(createDefaultProperties("tuser1", "Test", "User1", "tuser1@localhost", "password"));
        if (logger.isDebugEnabled()) logger.debug("Created tuser1 person");
    }

    if (!personService.personExists("tuser1")) {
        personService.createPerson(createDefaultProperties("tuser1", "Test", "User1", "tuser1@localhost", "password"));
        if (logger.isDebugEnabled()) logger.debug("Created tuser1 person");
    } 

Blockquote 
```

但我面临身份验证问题。

我为 alfresco 身份验证创建了一个类，它抛出了 openCMIS，它可以很好地创建我的自定义内容和其他一些自定义操作。

知道为什么它现在正在使用创建用户或任何其他代码来以编程方式构建用户吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-20T13:12:04.093

您的代码几乎就在那里，但缺少一个关键行。除了创建人员之外，您还需要为他们创建关联的身份验证

你可能想要类似的东西

```
if (this.authenticationService.authenticationExists(userName) == false)
{
   this.authenticationService.createAuthentication(userName, password.toCharArray());

   PropertyMap ppOne = new PropertyMap(4);
   ppOne.put(ContentModel.PROP_USERNAME, userName);
   ppOne.put(ContentModel.PROP_FIRSTNAME, "firstName");
   ppOne.put(ContentModel.PROP_LASTNAME, "lastName");
   ppOne.put(ContentModel.PROP_EMAIL, userName+"@example.com");
   ppOne.put(ContentModel.PROP_JOBTITLE, "jobTitle");

   this.personService.createPerson(ppOne);
} 
```

# android - Android 短信的拼写和语法检查？

> ID：12509685
> 
> 赞同：0
> 
> 时间：2012-09-20T09:24:09.790
> 
> 标签：android, algorithm, grammar, spelling, autocorrect

我目前花一些时间使用此处的代码开发文本消息应用程序..

[http://mobiforge.com/developing/story/sms-messaging-android](http://mobiforge.com/developing/story/sms-messaging-android)

现在代码已成功编译并运行，我需要将这件事提升到一个新的水平。我想在 java 中合并一个拼写/语法检查算法，自动修复要发送给收件人的字符串/单词..我非常需要帮助:(

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T09:28:36.790

Damerau-Levenshtein 距离似乎是确定哪些词与您所追求的词相近的良好开端：

[http://en.wikipedia.org/wiki/Damerau%E2%80%93Levenshtein_distance](http://en.wikipedia.org/wiki/Damerau%E2%80%93Levenshtein_distance)

但是你需要一本字典来和我猜的比较，它可能不会真正解决语法问题。

# c# - 向右水平对齐 + wpf

> ID：12509694
> 
> 赞同：1
> 
> 时间：2012-09-20T09:24:38.940
> 
> 标签：c#, wpf, wpf-controls, alignment

我有一个窗口 wpf 应用程序，显示项目列表。我希望将列表显示在右侧，而不是像目前那样显示在左侧。附上我的部分 xaml 文件。我尝试将属性水平对齐附加到文本块和图像，但没有任何改变。

```
 <HierarchicalDataTemplate DataType="{x:Type cl:FolderData}" ItemsSource="{Binding Path=Children,UpdateSourceTrigger=PropertyChanged}">
    <Border BorderThickness="1">
        <!-- Drop="FolderStackPanel_PreviewDrop" -->
        <StackPanel DragEnter="StackPanel_PreviewDragEnter" DragLeave="StackPanel_PreviewDragLeave" 
                         Name="FolderStackPanel" Drop="FolderStackPanel_PreviewDrop" Orientation="Horizontal" ContextMenu="{StaticResource cmExportDelete}"
                    HorizontalAlignment="Right">
            <Image Name="NodeIcon" Width="24"  Margin="5" Height="24" Source="pack://application:,,,/ExportToolWpf;component/Images/folder_icon.png"/>
            <StackPanel Orientation="Vertical" Margin="0,5,0,0" >
                <TextBlock Name="NodeHeader" FontSize="11" Text="{Binding Path=FolderName}" />
                <StackPanel Name="IdPanel" Orientation="Horizontal">
                    <TextBlock FontSize="10" Foreground="Gray" Text="Client ID:" />
                    <TextBlock FontSize="10" Foreground="Gray" Text="{Binding Path=ClientId}" Margin="0,0,7,0" />
                    <TextBlock FontSize="10" Foreground="Gray" Text="Project ID:"/>
                    <TextBlock FontSize="10" Foreground="Gray" Text="{Binding Path=ProjectId}" />
                </StackPanel>
            </StackPanel>
        </StackPanel>
    </Border> </HierarchicalDataTemplate> 
```

我感谢您提供的任何帮助。谢谢，哈达斯。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T04:09:28.043

```
<Grid>
 <Grid.ColumnDefinitions>
  <ColumnDefinition Width="*"/>
  <ColumnDefinition Width="Auto"/>
 </Grid.ColumnDefinitions>
 <StackPanel Grid.Column="1" />
</Grid> 
```

您可以在堆栈面板上方引入一个网格并使用 Column #1 来获得右对齐

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T09:29:36.647

使用`DockPanel`代替`StackPanel`并尝试设置`HorizontalContentAlignment`

# c# - 在哪里使用数据集和数据阅读器。推荐什么

> ID：12509695
> 
> 赞同：0
> 
> 时间：2012-09-20T09:24:42.503
> 
> 标签：c#, .net, ado.net, datareader

> **可能重复：**
> [哪个更好：DataSet 或 DataReader？](https://stackoverflow.com/questions/1083193/whats-better-dataset-or-datareader)

我已经了解了数据集和数据阅读器的基础知识（优点和缺点）。但是对于我应该使用的应用程序。如果它需要检索大量数据。我可以通过两种方式做到这一点。所以问题是哪个合适？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T09:25:58.510

如果您只对查询执行选择，则可以使用`ExecuteDataReader`

为了提高你的表现。

链接 MSDN 关于性能报告：http: [//msdn.microsoft.com/en-us/library/ms978388.aspx](http://msdn.microsoft.com/en-us/library/ms978388.aspx)

# java - Java：2D HashMap 的最后访问

> ID：12509701
> 
> 赞同：0
> 
> 时间：2012-09-20T09:24:57.323
> 
> 标签：java, hashmap

我有以下结构：

> HashMap<字符串，HashMap<字符串，字符串>>

现在我想知道二维中最后访问的元素。

我知道 TreeMap 在第一维是有意义的，但在那之后就没有任何意义了。

如何跟踪 2D HashMap 排序？

访问我的意思是：

> 值 = hashmap.get("a").get("1")
> 
> 值 = hashmap.get("b").get("2")
> 
> 值 = hashmap.get("c").get("3")
> 
> hashmap.removeLast();
> 
> hashmap.removeLast();
> 
> hashmap.removeLast();

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T09:39:21.163

没有本地方法可以做你想做的事。但是您可以扩展 HashMap，覆盖 get 以将 get 的键存储在列表中，然后添加一个类似 removeLastGetElemet() 的方法，该方法只获取列表的最后一个元素并调用 remove(key)

# crystal-reports - 为什么我的代码无法在 C# 中正确运行 CristalReport？

> ID：12509706
> 
> 赞同：0
> 
> 时间：2012-09-20T09:25:06.370
> 
> 标签：crystal-reports

我是 C# 的新手，我开发了小代码来运行我的 Crystal 报表，但它挂起机器，我正在使用 VS 2010 访问 2007 和 Crystal 报表 10 和 Crystl32.OCX。

我的代码是：

```
private void Form12_Load(object sender, EventArgs e)
    {

        ConnectionInfo crConnectionInfo = new ConnectionInfo();
        crConnectionInfo.DatabaseName = Application.ExecutablePath + "\\Pharma.accdb";
        crConnectionInfo.UserID = "";
        crConnectionInfo.Password = "";
        cr1.LogOnInfo.Equals(crConnectionInfo); //("sa", "password", @"MS Access           Database", "pharma");

        ReportDocument reportDocument = new ReportDocument();

        ParameterFields paramFields = new ParameterFields();

        ParameterField paramField = new ParameterField();
        ParameterDiscreteValue paramDiscreteValue = new ParameterDiscreteValue();
        paramField.Name = "CName";
        paramDiscreteValue.Value = "AHmed";
        paramField.CurrentValues.Add(paramDiscreteValue);
        paramFields.Add(paramField);

        this.cr1.RefreshReport();
        this.cr1.Show();
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-22T17:03:10.337

不确定这是否是唯一的问题，但这条线不正确：

```
cr1.LogOnInfo.Equals(crConnectionInfo); 
```

你在这里比较平等......

我宁愿尝试：

```
cr1.LogOnInfo.ConnectionInfo = crConnectionInfo; 
```

它试图在 LogOnInfo 对象上分配/设置 ConnectionInfo。

# c# - 使用 c# 突出显示包含特定单词的链接

> ID：12509707
> 
> 赞同：0
> 
> 时间：2012-09-20T09:25:10.687
> 
> 标签：c#, .net, office-interop

我正在从网站中提取 html，并使用 c# 将输出 html 写入 word 文档。我通过使用 httpwerequest 和 html 解析完成了这项工作。我的最后一步是在 word 文档中突出显示包含锚关键字的特定链接。例如，我在 html 中获得了几个链接，这些链接是我写的，比如

1.  克罗格回忆起菠菜包装的选择
2.  克罗格因李斯特菌风险召回菠菜
3.  购买 Safeway 并出售 Whole Foods

这些都是超链接。我想突出显示那些包含名为 Kroger 的锚关键字的链接。所以只有前两个链接会在word文档中突出显示。如何实现这一点？提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T09:29:52.297

本文可能有助于实现您正在寻找的内容：

[通过 C# 在 MS Word 中搜索和突出显示文本](http://www.codeproject.com/Tips/220074/Search-and-Highlight-the-Text-in-Word-through-Csha)

从那里，使用`Microsoft.Office.Interop.Word`，您可以：

1.  在您的文档中定义一个范围，指定其开始和结束位置（有关更多信息，请参阅[此 MSDN 页面）](http://msdn.microsoft.com/fr-fr/library/microsoft.office.interop.word._document.range%28v=office.11%29.aspx)
2.  指定范围`HighlightColorIndex`属性的值（例如 的值`wdYellow`）。[MSDN](http://msdn.microsoft.com/en-us/library/office/aa172829%28v=office.11%29.aspx)上的更多信息也适用于此。

# javascript - 在 HTML 表单的 HTML DOM 脚本中出现错误“Unexpected Token”

> ID：12509710
> 
> 赞同：1
> 
> 时间：2012-09-20T09:25:16.553
> 
> 标签：javascript, android, html, dom

我正在开发一个带有phonegap的android应用程序。我正在尝试在其中一个页面中使用 HTML 表单，并且有人告诉我应该使用 HTML DOM。我已经制作了脚本，但我收到一条错误消息：Unexpected token。

这是 HTML 中的示例代码：

```
<form name="editNoteForm" id="formaltera" method="post" action="index.html">
  <div data-role="fieldcontain">
    <label for="primeiroNome">Primeiro Nome</label>
    <input type="text" name="primeiroNome" id="primeiroNome">
  </div>

  <div data-role="fieldcontain">
    <label for="ultimoNome">Ultimo Nome</label>
    <input type="text" name="ultimoNome" id="ultimoNome">
  </div>

  <div data-role="fieldcontain">
    <label for="numeroTelefone">Telefone</label>
    <input type="number" name="numeroTelefone" id="numeroTelefone">
  </div>

  <div data-role="fieldcontain">
    <input type="submit" id="submit" value="Guardar">
  </div>
</form> 
```

这是我制作的脚本，所以我可以得到类似上面的 HTML 代码。

```
<form name="formaltera" id="formaltera" method="post" action="index.html"></form>
    <script charset="utf-8" language="javascript">
    var temp1 = localStorage.getItem("selected");
    var temp = localStorage.getItem(temp1);

    temp = temp.split(";");
    var firstName = temp[0];
    var lastName = temp[1];
    var phoneNumber = temp[2];
    var form = document.getElementById('formaltera');
    var formBody = form.childNodes[0];
    var div = document.createElement('div');
    var inputTextA = document.createElement('input');
    var inputTextB = document.createElement('input');
    var inputTextC = document.createElement('input');
    var inputSubmit = document.createElement('input');
    var labelA = document.createElement('label');
    var labelB = document.createElement('label');
    var labelC = document.createElement('label');
    var labelTextA = document.createTextNode('Primeiro Nome');
    var labelTextB = document.createTextNode('Ultimo Nome');
    var labelTextC = document.createTextNode('Telefone');

    div.data-role = "fieldcontain";

    labelA.for = "primeiroNome"; //I'm getting an error in here
    labelB.for = "ultimoNome";
    labelC.for = "numeroTelefone";

    inputTextA.type = "text";
    inputTextA.name = "primeiroNome";
    inputTextA.id = "primeiroNome";
    inputTextA.value = firstName;

    inputTextB.type = "text";
    inputTextB.name = "ultimoNome";
    inputTextB.id = "ultimoNome";
    inputTextB.value = lastName;

    inputTextC.type = "number";
    inputTextC.name = "numeroTelefone";
    inputTextC.id = "numeroTelefone";
    inputTextC.value = phoneNumber;

    inputSubmit.type = "submit";
    inputSubmit.name = "submit";
    inputSubmit.id = "submit";
    inputSubmit.value = "Guardar";

    form.appendChild(div);
    div.appendChild(labelA);
    labelA.appendChild(labelTextA);
    div.appendChild(inputTextA);

    form.appendChild(div);
    div.appendChild(labelB);
    labelA.appendChild(labelTextB);
    div.appendChild(inputTextB);

    form.appendChild(div);
    div.appendChild(labelC);
    labelA.appendChild(labelTextC);
    div.appendChild(inputTextC);

    form.appendChild(div);
    div.appendChild(inputSubmit));

    </script> 
```

HTML 代码可能与我编写的脚本有点不同，因为我编写它只是为了向您说明。提前致谢。希望我能很好地解释自己。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T09:27:11.830

该`for`属性应通过`htmlFor`属性分配

```
labelA.htmlFor = ... 
```

请参阅[https://developer.mozilla.org/en-US/docs/DOM/HTMLLabelElement](https://developer.mozilla.org/en-US/docs/DOM/HTMLLabelElement)以获取更多参考

# asp.net - ASP.NET 值在方法调用时发生变化

> ID：12509712
> 
> 赞同：0
> 
> 时间：2012-09-20T09:25:21.983
> 
> 标签：asp.net, visual-studio-2010, gac

这让我发疯！我的服务器上有一个 asp.net 应用程序。它引用了两个 dll 文件，它们位于服务器上我的 GAC 中。我还在 GAC 文件夹中放置了 pdb 文件，以便我可以远程调试。

这是我的问题：当我调用以下命令时：

```
addToAbsenceList(e.Initials, a.StartDate, a.EndDate, a.Type.TypeId, vacationDays); 
```

我可以看到 e.Initials 包含值“OFR”。当我按 F11 跳转到 addToAbsenceList 时：

```
addToAbsenceList(string initials, DateTime startDate, DateTime endDate, int AbsenceType, double duration) 
```

变量 initials 现在包含值 NULL。

我刚刚纠正了这个问题（以前它总是发送 NULL - 现在它可以工作了），所以它似乎仍然从我以前的代码中获取信息。

我的 GAC 文件夹中只有一个版本的 dll。
我已确保我的 dll 文件夹中的版本是新版本（基于文件的日期）。
为了 100% 确定，我还将新的 dll 文件放在项目的 BIN 文件夹中。
使用 JetBrains 的 dotPeek 反编译 dll 文件时，我看到它包含我的更正。
我尝试从 IIS 重新启动我的 Web 应用程序
它在我的开发环境中工作。

所以不知何故，旧的 dll 文件似乎在我的 GAC 中仍然处于活动状态。我如何确保调用新的？最好不要重新启动生产服务器。

服务器：MS Windows 2008 R2 64-bit
开发：Windows 7 32-bit

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T10:18:58.363

如果您在 GAC 中有 2 个与 web.config 相同的 dll 汇编，您可以指定哪个 dll 必须用作：

```
<configuration>
     <runtime>
          <assemblyBinding xmlns="urn:schemas-microsoft-com:asm.v1">
               <dependentAssembly>
                     <assemblyIdentity name="YourClassLibrary" publicKeyToken="b035c4774706cc72" culture="neutral"/>
                     <bindingRedirect oldVersion= "1.0.1830.10493" newVersion= "1.1.1830.10461"/>
               </dependentAssembly>
          </assemblyBinding>
     </runtime>
</configuration> 
```

在**newVersion**中，您可以指定必须使用的版本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T09:17:52.537

相信我必须将我的评论“升级”为答案：

现在它起作用了！我尝试以管理员身份打开命令提示符。然后我将 dll 文件直接复制到 GAC 文件夹中。然后它起作用了。为什么它应该不同于以管理员模式打开 Windows 资源管理器并复制它，这对我来说是个谜。也因为我确实检查了日期/时间并且它们已正确更新。——</p>

# android - Android：具有后台线程的 Util 类静态方法（异步任务）

> ID：12509719
> 
> 赞同：1
> 
> 时间：2012-09-20T09:26:05.020
> 
> 标签：android, multithreading, android-lifecycle

我有带有静态方法的实用程序类。假设这些方法可以触发后台任务，如下所示：

```
class ExampleAsyncUtil {
    public static void doSomeAsyncJob() {
        new AsyncTask<Void, Void, Void> () {

            @Override
            protected Void doInBackground (Void... params) {
                //do heavy job here ...
                return null;
            }
        }.execute();
    }
} 
```

如果然后我在活动中调用 util 类方法，然后该方法将被销毁：

```
class ExampleActivity extends Activity {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        ExampleAsyncUtil.doSomeAsyncJob();
    }

    @Override
    protected void onDestroy() {

        //should i stop async task in util on destroy ?

        super.onDestroy();
    }
} 
```

它有什么害处吗？（假设后台线程不保留对调用实用程序方法的活动的任何引用）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T10:18:54.827

是的，您应该从 UI 中取消 AsyncTask。否则，您可以泄漏 AsyncTask（从经验中谈）。而且，谁知道呢，甚至可能会阻止另一个线程在同一个线程上启动：他们不断更改实现：http: [//developer.android.com/reference/android/os/AsyncTask.html](http://developer.android.com/reference/android/os/AsyncTask.html)。或者，相反，多个 onCreate() 可能会创建重复的“僵尸”AsyncTask。无论如何，这不是 AsyncTask 的预期用途：它们应该是短暂的并且被适当地控制。因此，该静态业务似乎没有真正的收益。

我认为您应该在 Activity 的生命周期内启动一个服务并从中产生一个踏板，或者传统上使用 AsyncTask。

这里有一个很好的异步处理教程：[http](http://www.vogella.com/articles/AndroidPerformance/article.html) ://www.vogella.com/articles/AndroidPerformance/article.html 。

# php - 如何在数据库中插入正确的数字

> ID：12509721
> 
> 赞同：0
> 
> 时间：2012-09-20T09:26:08.097
> 
> 标签：php, mysqli

我试图从表中挑选出正确的问题编号并将其插入数据库。假设我有一个表格，它附加了行并且我有 3 行，下面的表格将如下所示：

```
Question No     Image

1              (file input)
2              (file input)
3              (file input) 
```

下面是创建上表的代码： var qnum = 1;

```
var $qid = $("<td class='qid'></td>" ).text(qnum);
var $image = $("<td class='image'></td>"); 

    var $fileImage = $("<form action='imageupload.php' method='post' enctype='multipart/form-data' target='upload_target' onsubmit='return imageClickHandler(this);' class='imageuploadform' >" + 
        "Image File: <input name='fileImage' type='file' class='fileImage' /></label><br/><br/><label class='imagelbl'>" + 
    "<input type='submit' name='submitImageBtn' class='sbtnimage' value='Upload' /></label>" + 
    "<label><input type='button' name='imageClear' class='imageClear' value='Clear File'/></label>" +
    "</p></form>"); 

$tr.append($qid);
$tr.append($image);

    ++qnum;
    $(".questionNum").text(qnum);
    $(".num_questions").val(qnum); 
```

我的问题是，假设我使用第 2 行中的文件输入，例如，如何在要插入数据库的文件输入的同一行中插入问题编号（插入的问题编号显然是 2）？

另一个例子是，例如，如果我使用第 3 行中的文件输入，我如何在与要插入数据库的文件输入相同的行中插入问题编号（插入的问题编号显然是 3）？

下面是我目前将数据插入数据库的代码（主代码）：

```
$lastID = $mysqli->insert_id;         

 $imagequestionsql = "INSERT INTO Image_Question (ImageId, SessionId, QuestionId)  
    VALUES (?, ?, ?)"; 

     if (!$insertimagequestion = $mysqli->prepare($imagequestionsql)) { 
      // Handle errors with prepare operation here 
       echo "Prepare statement err imagequestion"; 
    } 

$qnum = 1;

$insertimagequestion->bind_param("isi",$lastID, $sessid, $qnum); 

$sessid =  $_SESSION['id'] . ($_SESSION['initial_count'] > 1 ? $_SESSION['sessionCount'] : ''); 

    $insertimagequestion->execute(); 

                if ($insertimagequestion->errno) { 
          // Handle query error here 
        } 

        $insertimagequestion->close(); 
```

目前，上面的代码只是每次在数据库中为问题编号插入数字 1

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T14:10:06.650

如果我正确理解了您的问题，这是一个很好的方法：PHP 在 $_POST、$_GET 和 $_FILES 中支持“子数组”。IE 如果你有

```
<input type="file" name="upload[1]" />
<input type="file" name="upload[2]" />
<input type="file" name="upload[3]" /> 
```

您可以轻松检查哪个文件上传是由 $_FILES["upload"][X] 触发的，其中 X 介于 1 和 3 之间。$_GET 和 $_POST 也是如此。请记住这个技巧，因为它非常有用，**尤其是**在使用 JavaScript 动态添加元素时。例如，您可以有如下代码：

```
last_index = 1;
//later in the code
//....
$('#container').append('<input type="file" name="upload['+last_index+']" />');
last_index++; 
```

然后，在 PHP 代码中，您可以检查 $_FILES["upload"] 数组的长度，甚至可以使用 array_keys 获取其键并检查哪个文件输入已“上传”。希望这可以帮助。

# c# - 将 c++ dll 的 char 指针数组传递给 c# 字符串

> ID：12509726
> 
> 赞同：0
> 
> 时间：2012-09-20T09:26:35.823
> 
> 标签：c#, c++, pointers, dll

考虑以下 c++ 代码

```
#include "stdafx.h"
    #include<iostream>
    using namespace std;

this much part i want in c#..

void ping(int,char* d[]);

    void ping(int a,char *b[])
    {
    int size;
    size=sizeof(b)/sizeof(int); // total size of array/size of array data type

    //cout<<size; 
        for(int i=0;i<=size;i++)
        cout<<"ping "<<a<<b[i]<<endl;
    } 
```

下面的部分是在 c++ 中

```
int _tmain(int argc, _TCHAR* argv[])
{
    void (*funcptr)(int,char* d[]);

    char* c[]={"a","b"};
    funcptr= ping;
    funcptr(10,c);

    return 0;
} 
```

我如何在 c# 中实现相同的功能。我是 c# 的新手。我如何在 C# 中有 char 指针数组？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-20T09:28:56.180

你通常避免`char*`或`char[]`赞成[字符串](http://msdn.microsoft.com/en-us/library/system.string%28v=vs.110%29.aspx)类。如果您想要一个字符串数组，而不是使用 a `char* d[]`，您将使用 a ，或者如果您想要单个字符列表，则使用 simple 。`string[] d``string d`

C++ 和 C# 之间的互操作总是很棘手。一些很好的参考资料包括将[C# 字符串传递给 C++ 并将 C++ 结果（字符串、char*.. 不管）传递给 C#](https://stackoverflow.com/questions/2179270/pass-c-sharp-string-to-c-and-pass-c-result-string-char-whatever-to-c-s)以及[在 C# 中使用数组和指针与 C DLL](https://stackoverflow.com/questions/741206/using-arrays-and-pointers-in-c-sharp-with-c-dll)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T11:17:56.560

我们可以这样做

在 DLL 中，我们将拥有

```
 extern "C" __declspec(dllexport) void  __stdcall Caller() 
        { 

        static char* myArray[3];

        myArray[0]="aasdasdasdasdas8888";

        myArray[1]="sssss";

        FunctionPtr1(2,myArray);

    } 

and in C# i just added following lines

 public static void ping(int a, IntPtr x)
        {

            Console.WriteLine("Entered Ping Command");
              //code to fetch char pointer array from DLL starts here
              IntPtr c = x;
               int j = 0;
               string[] s = new string[100]; //I want this to be dynamic 
               Console.WriteLine("content of array");
               Console.WriteLine("");

            do
            {
                s[j] = Marshal.PtrToStringAnsi(Marshal.ReadIntPtr(c, 4 * j));
                Console.WriteLine(s[j]);
                j++;

            } while (s[j - 1] != null);
            //**********end****************

            Console.WriteLine("Integer value received from DLL is "+a);

        } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-20T09:44:19.460

首先，您的“C++”代码实际上是 C 和糟糕的 C - 它根本无法正确执行。`sizeof(b)`不会给*你*数组的大小或类似的东西，它会给你一个*指针*的大小。考虑在尝试转换为 C# 之前编写一些正确的 C++。

```
template<int N> void ping(int a, std::array<std::string, N>& arr) {
    for(int i = 0; i < N; i++) std::cout << a <<  arr[i] << "\n";
}
int _tmain(int argc, _TCHAR* argv[]) {
     std::array<std::string, 2> c = { "a", "b" };
     ping(10, c);
    return 0;
} 
```

C# 没有静态大小的数组，但其余的很容易完成

```
public static void ping(int a, string[] arr) {
    for(int i = 0; i < arr.Length; i++) {
         System.Console.Write(a);
         System.Console.Write(arr[i]);
    }
}
public static void Main(string[] args) {
    string[] arr = { "a", "b" };
    ping(10, arr);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-20T10:50:14.873

这应该对您有所帮助，尽管请注意输出缓冲区的大小是固定的，因此这不适用于动态大小的字符串，您需要事先知道大小。

```
public unsafe static void Foo(char*[] input)
{
    foreach(var cptr in input)
    {
        IntPtr ptr = new IntPtr(cptr);
        char[] output = new char[5]; //NOTE: Size is fixed
        Marshal.Copy(ptr, output, 0, output.Length);

        Console.WriteLine(new string(output));
    }
} 
```

请记住**允许不安全代码**，因为这是在 C# 中使用固定指针的唯一方法（右键单击项目、属性、构建、允许不安全代码）。

下次更具体和明确，并尝试对这里的人更加尊重，我们不会得到报酬来帮助你了解:-)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-20T09:33:40.737

A`string`是一个字符列表。随着您提到字符操作和循环的使用，我假设您关心的是从一个列表/数组中定位特定字符 - 从这个意义上说，您可以在从 a 询问特定字符时几乎相同地编码`string`（好像它是一个`char`数组）。

例如：

```
string testString = "hello";
char testChar = testString[2]; 
```

在这种情况下，testChar 将等于“l”。

# version-control - Websphere MQ 和版本控制

> ID：12509727
> 
> 赞同：3
> 
> 时间：2012-09-20T09:26:49.920
> 
> 标签：version-control, ibm-mq

生产环境中的每一次更改都必须进行版本控制并追踪到更改它的特定人员以及更改原因。

有没有可能为此使用一些工具？如果没有，如何使用 SVN 或 GIT 进行 MQ 配置？

**更改Websphere MQ**配置的最佳实践是什么？

我知道所有配置都在`/var/mqm/qmgrs/QMNAME`目录中。但这些不是文本文件，因此简单的 SVN 不会告诉我发生了什么变化。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-20T12:15:37.920

WebSphere MQ 不像静态编译的工件，而是一个部分自我管理的活系统。集群、触发器、仪器甚至应用程序之类的东西都可以在运行时更改 MQ 对象的设置。

许多商店选择做的是将对象定义和授权控制列表存储在 MQSC 脚本中，并将这些文件保存在 SVN 或其他更改控制系统中。然后，为了捕获实时更改，他们启用并监视[配置事件](http://pic.dhe.ibm.com/infocenter/wmqv7/v7r5/topic/com.ibm.mq.doc/mo10560_.htm)，这些事件报告更改的详细信息以及启动它们的用户 ID。

特别是，WMQ 集群中的对象在运行时更不稳定，因此脚本应该反映这一事实。对象属性可以根据它们是静态属性还是表示运行时状态来分类。MQSC 脚本可以通过在单独的步骤中定义静态属性和动态属性来利用这一点。通过使用`REPLACE`和`NOREPLACE`选项可以编写脚本，以便在重新运行脚本时保留集群状态。这支持将所有相关对象存储在版本化脚本中的更改控制方法，而不是为系统的每次更改编写新脚本。捕获脚本版本之间的增量可为您提供所有静态属性和监控，事件消息为您提供所有更改的视图，包括脚本中未捕获的动态属性的更新。

两步对象定义如下所示：

```
* Stateful attributes use NOREPLACE so rerunning the script does not
* reset them to default values at run-time
DEFINE QLOCAL (APP.FUNCTION.SUBFUNCTION.QA) +
       GET(DISABLED) +
       PUT(DISABLED) +
       NOTRIGGER +
       NOREPLACE

* Static values use the REPLACE option to make sure any changes
* are recorded next time the script runs
ALTER  QLOCAL (APP.FUNCTION.SUBFUNCTION.QA) +
       DESCR('APP service queue for QA') +
       DEFPSIST(NO) +
       BOTHRESH(5) +
       BOQNAME('APP.FUNCTION.BACKOUT.QA') +
       CLUSTER('DIV_QA') +
       CLUSNL(' ') +
       DEFBIND(NOTFIXED) 
```

[*Mission:Messaging: Migration, failover, and scaling in a WebSphere MQ cluster 中*](http://www.ibm.com/developerworks/websphere/techjournal/0811_mismes/0811_mismes.html)有关于此方法的更多详细 信息。

# c++ - 无效部署异常

> ID：12509728
> 
> 赞同：1
> 
> 时间：2012-09-20T09:26:56.757
> 
> 标签：c++, .net, visual-studio-2010

创建新的类实例时，我得到“System.Deployment.dll 中发生'System.Deployment.Application.InvalidDeploymentException' 类型的第一次机会异常”。

它发生在：

```
PrinterSettings^ MyPS = gcnew PrinterSettings(); 
```

一切正常，我得到了我想要的价值。

表格1.cpp：

```
#include "stdafx.h"
#include "Form1.h"
#include "Print.h"
#include <iostream>

System::Void DPrint::Form1::Form1_Load(System::Object^  sender, System::EventArgs^  e)
{
    PrinterSettings^ MyPS = gcnew PrinterSettings();
    System::Windows::Forms::MessageBox::Show("From Class PrinterSettings: " + MyPS->IniFilePath());
} 
```

打印.h：

```
#ifndef PRINT_H
#define PRINT_H

public ref class PrinterSettings
{
private:
    System::String^ m_strPath;

public:
    PrinterSettings()
    {
        m_strPath = System::Windows::Forms::Application::UserAppDataPath;
    }

    System::String^ IniFilePath() { return m_strPath; };

};
#endif 
```

有什么想法吗？谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T11:54:02.563

这是一个“第一次机会”异常，这意味着调试器观察到一个可以处理的异常被抛出。在这种情况下，应用程序可能会尝试确定应用程序的安装方式，例如通过 ClickOnce，以确定您的用户应用程序路径是什么。

请参阅[WPF 应用程序中导致 InvalidDeploymentException 的原因是什么？](https://stackoverflow.com/questions/4677756/what-causes-an-invaliddeploymentexception-in-a-wpf-application)一个很好的解释。

# rpm - 如何检测何时应该自动安装或升级 RPM？

> ID：12509732
> 
> 赞同：1
> 
> 时间：2012-09-20T09:27:03.150
> 
> 标签：rpm

我想编写一个脚本来安装或升级一组 RPM，而不知道系统上已经安装了什么。

有没有办法从脚本中做到这一点？我没有看到像升级或安装这样的选项。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T12:47:56.287

```
rpm -Uvh 
```

[文件](http://www.rpm.org/max-rpm/ch-rpm-upgrade.html)说，两者都处理。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T09:16:19.257

有可用的[python 绑定](http://docs.fedoraproject.org/en-US/Fedora_Draft_Documentation/0.1/html/RPM_Guide/ch-rpm-programming-python.html)。

或者您可以简单地`rpm -U <packages> --replacepkgs`允许重新安装相同的确切版本。

# c++ - C# 与非托管 C++ 互操作性的延续传奇

> ID：12509738
> 
> 赞同：5
> 
> 时间：2012-09-20T09:27:27.890
> 
> 标签：c++, wpf, visual-studio-2010, visual-studio, interop

经过一天的从字面上和比喻上把我的头撞到墙上后，我请求帮助：

我有一个非托管 C++ 项目，它被编译为 DLL。我们称之为*CPP 项目*。它目前在非托管环境中工作。另外，我创建了一个 WPF 项目，名为*WPF Project*。这个项目是一个简单且目前几乎是空的项目。它包含一个窗口，我希望它使用项目 1 中的代码。为此，我创建了一个 CLR C++ 项目，该项目应称为*Interop Project*，也被编译为 DLL。

为简单起见，我将附上一些我已经归结为基础的基本测试代码。

CPP项目有以下两个测试文件：

**测试者.h**

```
#pragma once
extern "C" class __declspec(dllexport) NativeTester
{
public:
    void NativeTest();
}; 
```

**测试器.cpp**

```
#include "tester.h"
    void NativeTester::NativeTest()
    {
        int i = 0;
    } 
```

互操作项目具有以下文件：

**互操作库**

```
#pragma once
#include <tester.h>
using namespace System;
namespace InteropLib {
    public ref class InteropProject
    {
    public:
        static void Test()
        {
            NativeTester nativeTester;
            nativeTester.NativeTest();
        }
    };
} 
```

最后，WPF 项目有一个引用互操作项目的单一窗口：

**主窗口.xaml.cs**

```
using System;
using System.Windows;
using InteropLib;
namespace AppGUI
{
    public partial class MainWindow : Window
    {
        public MainWindow()
        {
            InitializeComponent();
            InteropProject.Test();
        }
    }
} 
```

XAML 本身有一个空窗口（默认创建）。

一旦我尝试运行 WPF 项目，就会收到以下错误：

> System.Windows.Markup.XamlParseException：'调用与指定绑定约束匹配的类型'AppGUI.MainWindow'的构造函数引发异常。行号“3”和行位置“9”。---> System.IO.FileNotFoundException：无法加载文件或程序集“InteropLib.dll”或其依赖项之一。指定的模块无法找到。
> 在 AppGUI.MainWindow..ctor()

有趣的是，如果我不从 CPP 项目中导出类，我不会收到此错误。说，如果我`tester.h`改为：

```
#pragma once
class NativeTester
{
public:
    void NativeTest()
    {
        int i = 0;
    }
}; 
```

但是，在这种情况下，我不能使用更复杂的类。如果我像以前一样将我的实现移动到一个 cpp 文件，由于我没有导出我的代码，我会得到未解决的链接错误。我想要实际使用的 C++ 代码很大并且有很多类并且是面向对象的，所以我不能将我的所有实现都移到 h 文件中。

请帮助我理解这个可怕的错误，我一直在尝试解决但没有成功。

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-20T13:37:23.257

这从一开始就出错了，您的 tester.h 文件不正确。当您构建测试器项目时，该类应该只具有 __declspec(dllexport) 属性。使用 DLL 的任何*其他*项目都必须看到具有 __declspec(dllimport) 属性的类。通过在 tester.h 中使用宏开始修复此问题：

```
#undef EXPORTED
#ifdef BUILDING_DLL
#   define EXPORTED __declspec(dllexport)
#else
#   define EXPORTED __declspec(dllimport)
#endif

class EXPORTED NativeTester {
    // etc..
}; 
```

在您的测试器项目中，使用 C/C++、预处理器、预处理器定义并添加 BUILDING_DLL。

接下来是确保 DLL 存储在正确的目录中。这就是异常所抱怨的，它找不到 DLL。C++ 项目的构建目录是 Debug，但 WPF 项目的构建目录是 bin\Debug。通过更改 General + Output Directory 设置来解决此问题，使其`$(SolutionDir)$bin\(ConfigurationName)`.

构建 C++ 项目并验证您是否可以在解决方案的 bin\Debug 目录中找到该 DLL。并检查您是否还有 .lib 文件，在构建 C++/CLI 项目时需要它。作为额外的验证步骤，从 Visual Studio 命令提示符运行 Dumpbin.exe /exports foo.dll 并检查您是否确实看到了导出的类。

接下来的 C++/CLI 项目，您需要以相同的方式更改输出目录设置。将 .lib 文件添加到链接器的 Additional Dependencies 属性中。如果您跳过该步骤，您将得到您所说的那种链接器错误。构建它并再次验证您是否在正确的 bin\Debug 目录中获得了 DLL。

对发布配置重复这些更改。

设置项目依赖，WPF项目依赖C++/CLI项目。C++/CLI 项目依赖于 C++ 项目。这可确保项目以正确的顺序构建。

您现在应该可以很好地在 WPF 项目中使用这些 DLL。

# javascript - jQuery自动完成 - 选择一个项目时，光标移动到开始

> ID：12509739
> 
> 赞同：1
> 
> 时间：2012-09-20T09:27:31.050
> 
> 标签：javascript, jquery-ui, autocomplete

我正在使用 jquery 进行自动完成，当用户从下拉列表中选择任何项目时，输入文本的光标会向左移动（输入文本的开头）。

输入文本不是只读的，因为我想让用户输入文本而不仅仅是选择。

这是我的代码：

```
 $("#id").autocomplete({        
    source: url,
    select:  function (event, ui) {
               // some code here
    }
}); 
```

这种行为是不正确的。我需要光标停留在所选项目的末尾而不是移动到开头。

谢谢你的帮助，

约翰。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T09:58:28.057

您可以使用此插件将光标移动到选择事件上 [https://gist.github.com/1007907](https://gist.github.com/1007907)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T09:54:28.870

我没有这种行为。这是一个解释我如何测试的小提琴：http: [//jsfiddle.net/S77xa/62/](http://jsfiddle.net/S77xa/62/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-20T09:58:02.707

当您之前没有关注元素时，这通常是一个问题。尝试使用

```
$("#id").focus(); 
```

在选择。

# php - Codeigniter - 从数据库中选择孩子和父母

> ID：12509743
> 
> 赞同：0
> 
> 时间：2012-09-20T09:27:45.127
> 
> 标签：php, codeigniter

我想从我的数据库中提取对应的记录`parent_id`，如下所示：

```
function getChildren($id, $parent_id) {
    $q = $this->db->select('id, name, slug, plat');
    $q = $this->db->from('games');
    $q = $this->db->where('parent_id',$id);
    $q = $this->db->or_where('id',$parent_id);
    $q = $this->db->get();

    return $q->result_array();
} 
```

它 - 如果是儿童游戏 - 获取`parent_id`并搜索具有此类游戏的游戏以及与此游戏相同`id`的其他游戏。`parent_id`如果它是父游戏，它只会寻找与`parent_id`它相同的游戏`id`。

问题是......它并不总是有效。我在数据库中有四个游戏：

```
id  |  parent_id  |  title
15  |  0          |  Abe
19  |  15         |  Abe
20  |  0          |  RE2
21  |  20         |  RE2 DS 
```

前两个作品，最后两个作品 - 只有孩子（`id = 21`）显示父母。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T09:37:56.363

使用此查询

```
select 
    * 
from games as g
where parent_id = 0
union all
select
    l.*
from games r 
left join (select * from games) as l on r.id = t.id
where
r.parent_id != 0 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T09:33:23.963

**对于关系数据库**，您可能无法做到这一点。RDBMS 不打算管理任何形式的树。

你*可以*在一些简单的情况下，比如一级层次结构，但是一旦它变得更复杂，它就会变得越来越混乱。

保持你的结构，你必须每个 LEVEL 做**一个 JOIN**，这意味着提前知道深度。

将树存储在数据库中的一种解决方案称为嵌套树，它基本上存储每行的间隔，但自己实现有点复杂。

看看[维基百科的解释](http://en.wikipedia.org/wiki/Nested_set_model)。然而，有一些库允许您以编程方式抽象此类操作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-20T09:36:27.253

在发布我的问题后，我尝试了另一种解决方案。有趣的是，我用这个坐了一个多小时，在浪费了你的时间之后，我提出了解决方案；）

无论如何，这里是：

```
function getChildren($id, $parent_id) {
    $q = $this->db->select('id, name, slug, plat');
    $q = $this->db->from('games');
    $q = $this->db->where('parent_id',$id);
    $q = $this->db->or_where('id',$parent_id);
    $q = $this->db->or_where('parent_id',$parent_id);
    $q = $this->db->where('id !=', $id);
    $q = $this->db->get();

    return $q->result_array();
} 
```

# iphone - UITableviewcell单元格间距

> ID：12509747
> 
> 赞同：4
> 
> 时间：2012-09-20T09:28:10.730
> 
> 标签：iphone, uitableview

我正在`UITableView`动态创建单元格并在其上添加三个标签。我通过**opaque no 和 clearcolor**使我的表格透明。但是单元格显示时没有空格。我需要在单元格之间留出空间。实际上，如果我`UITableViewCell`从 xib 文件加载自定义，空间会自动出现。如何解决这个问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-07-26T15:15:12.990

### 具有自定义间距的 UITableView

您可以通过欺骗 tableView 单元格来做到这一点。默认情况下，您只能指定一条线、蚀刻线或无，因此这里是另一种选择。您需要覆盖 tableView 委托方法：

```
- (CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath 
```

计算单元格高度及其内容、边距/填充/线宽并返回。将单元格的背景颜色设置为`[UIColor clearColor]`并使表格背景成为分隔符所需的颜色。子类 UITableViewCell 并附加一个 backgroundContainerView 并使其成为您的单元格所需的背景颜色。将所有子视图附加到该 backgroundContainerView。

最后，在 UITableViewCell 子类中实现

```
- (void)layoutSubviews 
```

在这里，您应该使用容器视图来布置子视图，就好像那是整个单元格一样。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T09:36:27.750

在 UITableView 你有 2 个属性：`separatorStyle`和`separatorColor`。使用它们，也许您的分隔符颜色是**clearcolor**，因此请尝试更改它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-20T09:55:05.397

这个问题是由于 TableView 和自定义单元格的高度不同造成的。在 heightForRowAtIndexPath 委托中设置单元格高度。

# jboss - 无法从 JBoss ESB 4.10 调用部署在 JBoss 7.1 上的 EJB

> ID：12509752
> 
> 赞同：2
> 
> 时间：2012-09-20T09:28:31.667
> 
> 标签：jboss, ejb-3.0, jboss7.x, jboss-esb

我正在尝试从 JBoss ESB 4.10 的远程实例调用部署在 Jboss 7.1 Final 上的无状态会话 Bean (EJB 3)。在我的`jboss-esb.xml`我有以下信息：

```
<action name="EJBTestWithReturnValue" class="org.jboss.soa.esb.actions.EJBProcessor">
    <property name="ejb3" value="true" />
    <property name="method" value="login" />
    <property name="jndi-name" value="gwtbatis-ear/gwtibatis-ejb/UserServiceEJB!com.aestasit.gwtibatis.UserServiceRemote" />
    <property name="initial-context-factory" value="org.jnp.interfaces.NamingContextFactory" />
    <property name="security-principal" value="xxxx" />
    <property name="security-credentials" value="xxxx" />
    <property name="provider-url" value="localhost:4447" />
    <property name="ejb-params">
        <arg0 type="java.lang.String">username</arg0>
        <arg1 type="java.lang.String">password</arg1>
    </property>
    <property name="esb-out-var" value="org.jboss.soa.esb.message.defaultEntry"/> 
```

无论我尝试什么 JNDI 绑定，我总是得到一个错误“ `invalid stream header: 00000018`”。我成功地从 Java 客户端调用了相同的 EJB，但我使用了不同的上下文工厂（“ `org.jboss.naming.remote.client.InitialContextFactor`”）。

有没有办法从 ESB 调用远程 EJB，而无需导入 JBoss 7 所需的客户端库并编写我自己的 EJB 调用程序？

# visual-studio-2012 - AnhkSVN 没有出现在 VS2012 Web 中

> ID：12509757
> 
> 赞同：12
> 
> 时间：2012-09-20T09:28:48.210
> 
> 标签：visual-studio-2012, ankhsvn

我刚刚安装了 AnkhSvn-2.4.11610，打算将它与 VS2012 Express for Web 一起使用，但它没有出现在插件选择下拉框中。

有谁知道可能出了什么问题？

非常感谢。

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-11-27T02:01:01.980

在 VS2012 中转到`Tools -> Options... -> Source Control -> Plug-In Selection -> complement choice AnkhSVN - Subversion Support for Visual Studio` （在 Current Source 控件插件下拉列表中选择此选项）然后它会起作用。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-09-20T09:30:07.837

是的。Visual Studio Express 版本不允许使用源代码控制插件。

[http://ankhsvn.open.collab.net/wiki/Faq#head-5cfda3c01b2ff5bab6b3742c33ced4abe1426eb2](http://ankhsvn.open.collab.net/wiki/Faq#head-5cfda3c01b2ff5bab6b3742c33ced4abe1426eb2)

# android - 正在清除应用程序缓存，已删除“数据/数据/ /文件”文件？

> ID：12509762
> 
> 赞同：1
> 
> 时间：2012-09-20T09:28:54.410
> 
> 标签：android, caching

从设置页面清除android中的应用程序缓存时，“数据/数据//文件”是否被删除？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T09:52:00.947

`/data/data/<packagename>/files`当缓存被清除时，您通过[Context#getFilesDir()](https://developer.android.com/reference/android/content/Context.html#getFilesDir%28%29)获得的文件夹不会被清除。

只有当您的应用程序被卸载或用户点击系统设置中的删除数据按钮时，此处的文件才会被删除。

另一方面，文件夹 Context#getCacheDir() 可以自动`/data/data/<packagename>/cache`清除[。](https://developer.android.com/reference/android/content/Context.html#getCacheDir%28%29)（或通过系统设置中的清除缓存按钮）

正如文档所述

> 当设备存储空间不足时，这些文件将首先被删除。无法保证何时删除这些文件。

# wordpress - 运行多个随机发布查询

> ID：12509768
> 
> 赞同：-1
> 
> 时间：2012-09-20T09:29:10.400
> 
> 标签：wordpress

我正在为 wordpress 构建一个握把类型的滑块。每个网格有 17 个块，包含 17 个不同的帖子。我不得不创建 17 个单独的查询，因为每个块的大小不同。

这一切都很好，但我决定在页面加载时使每个块中的帖子随机。

这是我的查询：

```
$do_not_duplicate = array();
$featucat = get_option('themnific_slider1_category');
$my_query = new WP_Query( 'post_type=myportfoliotype&showposts=1&orderby=rand');     
while ($my_query->have_posts()) : $my_query->the_post();$do_not_duplicate[] =  $post->ID; 
```

我的问题是 $do_not_duplicate 函数不能正常工作，我仍然收到重复的帖子。

关于我做错了什么的任何想法？

干杯，丹

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T12:14:00.533

我真的不明白你在追求什么，但我曾经遇到过类似的问题。也许[这](https://wordpress.stackexchange.com/questions/53578/one-random-post-from-multiple-custom-post-types)很有帮助。

还有一个很好的关于查询的[教程](http://betterwp.net/9-latest-posts-from-each-post-type/)。

# git - 如何对项目的 cron 作业进行版本控制？

> ID：12509774
> 
> 赞同：10
> 
> 时间：2012-09-20T09:29:36.413
> 
> 标签：git, version-control, cron, fabric

我有一堆项目，我用 git 和 fab 推送到服务器。它们是大量的 Django 站点。其中一些站点有 cron 作业。

我希望能够：

*   通过在本地编辑文件并运行 fab 命令来管理站点的 cron 作业（例如`fab save deploy`，就像我目前所做的那样）

*   远程安装新作业（仅）并替换任何旧作业（我不希望每次都克隆作业）

*   保持相同的高度可定制的时间设置。@hourly 并不是我所有的问题都能解决。

解决这个问题的最佳方法是什么？

* * *

我知道[您如何将 cron 作业部署到生产环境？](https://stackoverflow.com/questions/1603034/how-do-you-deploy-cron-jobs-to-production)但是那里的重点似乎是关于将 cronning 入侵到结构脚本中，并且（至少在答案中）没有考虑到每个用户可能有多个项目需要 cron 作业。

我正在寻找存储在 VCS 中的东西（我不会将我的 fabfile 推送到 git - 它在我的所有项目之间共享），它将与 crontab 中的其他工作一起工作。如果 ProjectA 和 ProjectB 每次部署时都覆盖彼此的作业，那就不好了。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-20T12:38:01.273

我不喜欢编辑 crontab 或每个用户的 cron 作业。任何编辑它的人都`crontab`可能弄乱您的部署。相反，我创建了`/etc/cron.$interval`允许我使用[Puppet](https://puppet.com/docs/open-source-puppet)（参见[cron 类型](https://puppet.com/docs/puppet/latest/cheatsheet_core_types.html#cron)）或简单`cp`命令部署它们的脚本。

因此，如果我需要一个每天运行一次的脚本，我会在`$project/cron/cron.daily/$project`没有 Puppet 的情况下安装它。

或者，如果你真的需要合并 crontab，你应该为每个脚本添加页眉和页脚，这样很容易看出 crontab 的某些部分来自哪里。页眉/页脚还允许您自动添加/删除每个脚本。

你永远不应该替换整个 crontab，因为有一天，有人会手动编辑它。编辑将一直有效，直到您再次部署，此时它会突然静默失败。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-20T10:53:17.530

所以这是我迄今为止最好的主意：

*   我所有的项目都住在`/web/project_name/`
*   任何需要 cronjobs 的项目都会将它们插入`/web/project_name/cron`
*   在部署时，fab 在服务器上运行以下命令：

    ```
    find /web/ -maxdepth 2 -name cron | xargs cat | crontab 
    ```

这会清理它找到的任何 cron 文件，`/web/`并将它们填充到我的用户的 crontab 中。更好的是，如果我有想要运行的项目独立作业，我可以将它们粘贴进去`/web/cron`，它们将位于生成的 crontab 的顶部。

# vb.net - 在 WindowsCE 中从 Mac ID 获取 IP 地址

> ID：12509778
> 
> 赞同：1
> 
> 时间：2012-09-20T09:29:58.270
> 
> 标签：vb.net, compact-framework, windows-ce, opennetcf

如何使用 VS 2008/VS2005 中的 VB.net Smartdevice 应用程序在 WindowsCE 中找到 mac id 的 IP 地址？

我正在尝试使用 OpenNETCF.Net，但没有得到想要的结果。

有人知道吗？请发表您的建议。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-20T13:13:20.043

你说你尝试使用 OpenNETCF.Net.dll 程序集，但你没有说你尝试*了什么*。在 C# 中，它看起来像这样：

```
IPAddress GetAdapterForMac(PhysicalAddress mac)
{
    var intf = (from n in NetworkInterface.GetAllNetworkInterfaces()
            where n.GetPhysicalAddress().Equals(mac)
            select n).FirstOrDefault();

    if (intf == null) return null;

    return intf.CurrentIpAddress;
} 
```

我的 VB.NET 生锈了，但我认为这意味着：

```
Imports System.Linq
Imports OpenNETCF.Net.NetworkInformation

Private Function GetAdapterForMac(mac As PhysicalAddress) As IPAddress
    Dim intf as NetworkInterface = (From n In NetworkInterface.GetAllNetworkInterfaces() _
              Where n.GetPhysicalAddress().Equals(mac) _
              Select n).FirstOrDefault()

    If intf Is Nothing
        Return Nothing
    End If

    Return intf.CurrentIpAddress
End Function 
```

# c++ - 如何设置 CMAKE_INTDIR 或 CMAKE_CFG_INTDIR 来移除项目配置？

> ID：12509786
> 
> 赞同：1
> 
> 时间：2012-09-20T09:30:36.693
> 
> 标签：c++, visual-studio-2010, cmake

现在我正在使用 CMake 创建一个 VC 10 项目。我发现的一个问题是输出库或执行程序的路径与项目配置（调试或发布）有关。为了说明这一点，我举了以下例子：

```
 cmake_minimum_required( VERSION 2.6 )
  project (test) 
  add_definitions (-DEXP_STL )
  add_library(lib1 SHARED lib1.cxx)
  set_target_properties(lib1 PROPERTIES LINK_INTERFACE_LIBRARIES "")
  set(LIBRARY_OUTPUT_PATH ${test_SOURCE_DIR}) 
```

脚本中的最后一条命令表示我想将输出库（`lib1`）放在`${test_SOURCE_DIR}`. 但是，输出库位于 `${test_SOURCE_DIR}/Debug`。我想知道如何确保输出库完全在我设置的路径中。谢谢！

**BWT**：我之所以提出这个问题，是因为在Linux开发环境中，输出库或者执行程序路径正是你用`set(LIBRARY_OUTPUT_PATH ...)`function设置的路径。我想要一个一致的结果。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-06-12T16:06:20.737

这个问题被认为是重复的，一种可能的解决方案如下：

```
if (WIN32)
    set(myoutputdirectory ${your_source_file_SOURCE_DIR}/output/win/32)
elseif (CMAKE_COMPILER_IS_GNUCC)
    set(myoutputdirectory ${your_source_file_SOURCE_DIR}/output/linux/32)
elseif(APPLE)
    set(myoutputdirectory ${your_source_file_SOURCE_DIR}/output/mac/32)
endif (WIN32)
# set output parth
set( CMAKE_RUNTIME_OUTPUT_DIRECTORY ${myoutputdirectory} )
set( CMAKE_LIBRARY_OUTPUT_DIRECTORY ${myoutputdirectory} )
set( CMAKE_ARCHIVE_OUTPUT_DIRECTORY ${myoutputdirectory} )
# for multi-config builds (e.g. msvc)
foreach( OUTPUTCONFIG ${CMAKE_CONFIGURATION_TYPES} )
    string( TOUPPER ${OUTPUTCONFIG} OUTPUTCONFIG )
    set( CMAKE_RUNTIME_OUTPUT_DIRECTORY_${OUTPUTCONFIG} ${myoutputdirectory} )
    set( CMAKE_LIBRARY_OUTPUT_DIRECTORY_${OUTPUTCONFIG} ${myoutputdirectory} )
    set( CMAKE_ARCHIVE_OUTPUT_DIRECTORY_${OUTPUTCONFIG} ${myoutputdirectory} )
endforeach( OUTPUTCONFIG CMAKE_CONFIGURATION_TYPES ) 
```

# sql - Dapper 不添加参数

> ID：12509791
> 
> 赞同：3
> 
> 时间：2012-09-20T09:31:06.423
> 
> 标签：sql, odbc, informix, dapper

我正在尝试将 Dapper 用于我们的复杂查询，以消除以前在 NH 中存在的任何丢失的开销。

我有以下查询（请注意，这已大大缩小）：

```
SELECT DISTINCT *
FROM  tasks t 
WHERE t.initials = @UserInits 
```

通过我们的存储库调用如下：

```
taskRepo.RawExec<TaskListItemDTO>(Query,new {UserInits = "SAS"}) 
```

我们对 DapperExec 的实现包括如下：

```
public IEnumerable<T> RawExec<T>(string SQL, object param)
{
   return _session.Connection.Query<T>(SQL,param);
} 
```

但是 Dapper 似乎没有将参数添加到查询中，因此，我们遇到了语法错误。

如果有帮助，我们将通过 ODBC 连接到 Informix。

谢谢

更新代码示例：

抱歉拖了这么久，工作很忙！下面是 MS SQL (2008) 服务器的示例，它应该使用参数值 1 或 0 简单地查询 sys.all_objects (systables?) - 但在此示例中，由于 ODBC 不使用命名参数，这将不起作用.

```
using Dapper;
using DapperSQL;
using System.Collections.Generic;
using System.Data;
using System.Data.Odbc;

namespace DapperTests
{
    public class SQLEx
    {
        private OdbcConnection GetConnection()
        {
            var cnn = new OdbcConnection("DSN=ODBCSOURCE");
            cnn.Open();

            // wrap the connection with a profiling connection that tracks timings 
            return cnn;
        }

        public IEnumerable<object> DapperTest()
        {
            using (OdbcConnection conn = GetConnection())
            {
                return conn.Query("SELECT * FROM sys.all_objects where is_ms_shipped = ?", new { is_ms_shipped = 1 });
            }
        }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-07-20T07:31:54.883

I know this is old post, just use SP instead of query, please check this link [Dapper using ODBC store procedure Input parm](https://stackoverflow.com/questions/28717971/dapper-using-odbc-store-procedure-input-parm-always-promt-xxx-was-not-supplied), this using sybase odbc Sp, all odbc use same technique, I wish it works in Informix.

# ruby-on-rails - rails服务器没有启动

> ID：12509792
> 
> 赞同：1
> 
> 时间：2012-09-20T09:31:24.483
> 
> 标签：ruby-on-rails, openssl

我刚刚捆绑安装成功，现在启动 rails 服务器时出现此错误。

我已经尝试通过安装 openssl 并重新安装 rvm 来启动服务器。我正在使用 rvm 1.8.7 和 rails 3.0.10。

```
rony@linuxmint ~/Documents/trunk $ rails s
/home/rony/.rvm/gems/ruby-1.8.7-p370/gems/activesupport-3.0.10/lib/active_support/dependencies.rb:239:in `require': no such file to load -- openssl (LoadError)
    from /home/rony/.rvm/gems/ruby-1.8.7-p370/gems/activesupport-3.0.10/lib/active_support/dependencies.rb:239:in `require'
    from /home/rony/.rvm/gems/ruby-1.8.7-p370/gems/activesupport-3.0.10/lib/active_support/dependencies.rb:225:in `load_dependency'
    from /home/rony/.rvm/gems/ruby-1.8.7-p370/gems/activesupport-3.0.10/lib/active_support/dependencies.rb:593:in `new_constants_in'
    from /home/rony/.rvm/gems/ruby-1.8.7-p370/gems/activesupport-3.0.10/lib/active_support/dependencies.rb:225:in `load_dependency'
    from /home/rony/.rvm/gems/ruby-1.8.7-p370/gems/activesupport-3.0.10/lib/active_support/dependencies.rb:239:in `require'
    from /home/rony/.rvm/gems/ruby-1.8.7-p370/gems/stripe-1.7.0/lib/stripe.rb:7
    from /home/rony/.rvm/gems/ruby-1.8.7-p370@global/gems/bundler-1.2.1/lib/bundler/runtime.rb:68:in `require'
    from /home/rony/.rvm/gems/ruby-1.8.7-p370@global/gems/bundler-1.2.1/lib/bundler/runtime.rb:68:in `require'
    from /home/rony/.rvm/gems/ruby-1.8.7-p370@global/gems/bundler-1.2.1/lib/bundler/runtime.rb:66:in `each'
    from /home/rony/.rvm/gems/ruby-1.8.7-p370@global/gems/bundler-1.2.1/lib/bundler/runtime.rb:66:in `require'
    from /home/rony/.rvm/gems/ruby-1.8.7-p370@global/gems/bundler-1.2.1/lib/bundler/runtime.rb:55:in `each'
    from /home/rony/.rvm/gems/ruby-1.8.7-p370@global/gems/bundler-1.2.1/lib/bundler/runtime.rb:55:in `require'
    from /home/rony/.rvm/gems/ruby-1.8.7-p370@global/gems/bundler-1.2.1/lib/bundler.rb:128:in `require'
    from /home/rony/Documents/trunk/config/application.rb:8
    from /home/rony/.rvm/gems/ruby-1.8.7-p370/gems/railties-3.0.10/lib/rails/commands.rb:28:in `require'
    from /home/rony/.rvm/gems/ruby-1.8.7-p370/gems/railties-3.0.10/lib/rails/commands.rb:28
    from /home/rony/.rvm/gems/ruby-1.8.7-p370/gems/railties-3.0.10/lib/rails/commands.rb:27:in `tap'
    from /home/rony/.rvm/gems/ruby-1.8.7-p370/gems/railties-3.0.10/lib/rails/commands.rb:27
    from script/rails:6:in `require'
    from script/rails:6 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T09:35:13.397

参考[这个](https://stackoverflow.com/questions/3464098/rails-3-no-such-file-to-load-openssl)

```
rvm pkg install openssl (older format - rvm package install openssl)
rvm pkg install iconv (older format - rvm package install iconv)
rvm remove 1.9.2
rvm install 1.9.2 -C --with-openssl-dir=$HOME/.rvm/usr,--with-iconv-dir=$HOME/.rvm/usr 
```

归功于[http://www.isnull.com.ar/](http://www.isnull.com.ar/)

# sql - 使用 MAX 作为日期，但在“中断”查询上添加列到组 - 子查询？

> ID：12509794
> 
> 赞同：0
> 
> 时间：2012-09-20T09:31:30.027
> 
> 标签：sql, sql-server-2008, tsql

我有一个包含日期的表，但我需要知道每个位置条件为真的最新日期，唯一的问题是一旦我添加了一个名为“notes”的列，它会破坏查询并返回太多行，当前查询是.. .

```
SELECT
        Location,
        MAX(date) AS date,
        type,
        notes
  FROM NotesTable a
 INNER JOIN Location b on a.LocationID = b.LocationID
 INNER JOIN Type c on a.typeid = c.typeid
 WHERE typeid <> 8
 GROUP BY Location, type, notes 
```

如果我注释掉注释列，那么它可以正常工作，但是一旦我将它添加到分组中，它就会返回比所需更多的行。

已尝试使用子查询，但仍然无法正常工作，下面的子查询

```
SELECT
        r.location,
        r.date,
        r.type,
        t.notes
  FROM (SELECT Location, MAX(date), type
          FROM NotesTable a INNER JOIN Location b on a.LocationID = b.LocationID
         INNER JOIN Type c on a.typeid = c.typeid
         WHERE typeid <> 8
         GROUP BY location,type
        ) r
INNER JOIN NotesTable t ON t.date = r.date 
```

有人有其他建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T09:37:42.107

```
select * from
(
     SELECT Location,Date, Type, Notes, Row_Number() Over (Partition By Location, Type order by date desc) RN 
     FROM
          NotesTable a
           INNER JOIN Location b on a.LocationID = b.LocationID
           INNER JOIN Type c on a.typeid = c.typeid
      WHERE typeid <> 8
) v
WHERE rn = 1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T09:38:56.753

您的查询几乎是正确的，您需要在`ON`子句中添加此附加条件

```
 AND
    t.location = r.location AND
    t.type = r.type 
```

完整的查询，

```
SELECT r.location
     , r.DATE
     , r.type
     , t.notes
FROM (
    SELECT Location
         , MAX(DATE) maxDate
         , type
    FROM NotesTable a
        INNER JOIN Location b
            ON a.LocationID = b.LocationID
        INNER JOIN Type c
            ON a.typeid = c.typeid
    WHERE typeid <> 8
    GROUP BY location
            , type
    ) r
INNER JOIN NotesTable t
    ON t.DATE = r.maxDate AND
        t.location = r.location AND
        t.type = r.type 
```

# android - 在单击按钮上使用指定输入打开指定站点上的浏览器的问题

> ID：12509795
> 
> 赞同：-1
> 
> 时间：2012-09-20T09:31:32.970
> 
> 标签：android

如果用户单击它，我想在 [http://www.dtcsearch.com/](http://www.dtcsearch.com/)上打开浏览器，并在此站点的栏搜索中自动插入我的程序的字符串 S 的值。例如：如果 s="ciao" 并且用户单击按钮我想打开[http://www.dtcsearch.com/](http://www.dtcsearch.com/) 并写在搜索 ciao

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T09:37:47.720

要打开浏览器，您可以简单地启动一个活动，如下所示：

```
Intent i = new Intent(Intent.ACTION_VIEW, Uri.parse("http://www.dtcsearch.com"));
startActivity(i); 
```

但是要填写网页上的搜索框，您也需要修改您的网页以包含/支持此要求。例如，您需要将搜索字符串放在 URL 中，然后修改您的网页以通过**GET**方法读取 url 内容，并在文本框中填写提供的搜索字符串。

```
Intent i = new Intent(Intent.ACTION_VIEW,
             Uri.parse("http://www.dtcsearch.com/?s=hello"));
startActivity(i); 
```

并在网页中（假设它是用**PHP**编写的）

```
$strSearch = $_GET["s"];  //should return 'hello' 
```

最后，用于`$strSearch`填写网页上的搜索文本框。

# windows - 如何在 30 秒内关闭 tomcat windows 服务（或向 SCM 询问更多时间）

> ID：12509796
> 
> 赞同：2
> 
> 时间：2012-09-20T09:31:35.103
> 
> 标签：windows, tomcat, service, timeout, shutdown

我的 tomcat 作为 Windows 服务启动时遇到问题。它上面运行的 Web 应用程序很少，当我尝试停止服务（以编程方式）时，它需要超过 30 秒才能停止，并且由于时间限制（默认为 30 秒），SCM 中止操作。这可以在注册表中配置，但我无法更改它（并且似乎是丑陋的解决方案）。我该如何解决这个问题？tomcat有一些kill_timeout吗？或者我应该如何停止我的应用程序？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-04-19T14:32:54.220

Tomcat 配置 GUI（又名 Apache *“Commons Daemon Service Manager”*）有一个`Shutdown`选项卡（提示：`tomcatw.exe`在您的安装路径中打开）。在这里您将看到一个`Timeout`值。这可能会解决您的问题。

[![tomcatw.exe 截图 |  关机 |  暂停](../Images/6bb294c814721068e2c95049064c7a9e.png)](https://i.stack.imgur.com/e6Lnb.png)

它也在[https://tomcat.apache.org/tomcat-7.0-doc/windows-service-howto.html#Command_line_parameters](https://tomcat.apache.org/tomcat-7.0-doc/windows-service-howto.html#Command_line_parameters)中进行了解释：

> `ParameterName` *默认* 描述
> [...]
> `--StopTimeout` *No Timeout* 定义 procrun 等待服务正常退出的超时时间（以秒为单位）。

或者，检查一下：[Tomcat 不会停止。我该如何调试呢？](https://stackoverflow.com/questions/9971876/tomcat-doesnt-stop-how-can-i-debug-this)

# c++ - ofstream 指针的向量

> ID：12509799
> 
> 赞同：5
> 
> 时间：2012-09-20T09:31:51.790
> 
> 标签：c++, pointers, vector, error-handling, ofstream

这是我的问题，我需要创建 X 个文件并根据不同的事实写入它们，我的解决方案是创建一个像这样的 ofstream 指针向量

```
#include <boost/algorithm/string.hpp>
#include <vector>
#include<string>
#include <iostream>
#include <fstream>
vector<ofstream*> files;
files.resize(SplitVec.size()-4);
          for(i=0;i<SplitVec.size()-4;i++)
          {
              line="/Users/jorge/Desktop/testing/strain_"+lexical_cast<string>(i);
              cout<<"ine"<<endl;
              files[i]=new ofstream(line.c_str());
          } 
```

直到这部分它创建了很好的文件，然后在我写给它们的程序中，这也很好，我的问题是当我想关闭对象时，如果我使用：

```
for(i=0;i<SplitVec.size()-4;i++)
          {
              *files[i].close();
          } 
```

我收到以下错误：

```
In file included from main.cpp:14:./methyl.h:298: error: request for member 'close' in 'files. std::vector<_Tp, _Alloc>::operator[] [with _Tp = std::ofstream*, _Alloc = std::allocator<std::ofstream*>](1ul)', which is of non-class type 'std::ofstream*' 
```

所以，我有一个问题，首先，为什么我不能调用 close，它是一个指向 ofstream 的指针，所以使用 *files[i]，我会想象我可以关闭它，其次，如果我不关闭它，程序工作正常，但我几乎可以肯定这是一种不好的做法，并且不想成为一个懒惰或蹩脚的程序员，我已经尽可能多地看了，但我找不到答案。谢谢！！！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-20T09:32:56.853

采用

```
(*files[i]).close(); 
```

或直接

```
files[i]->close(); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-20T09:58:34.230

您的代码不是异常安全的（例如，如果抛出异常，因为您有一个*原始*指针向量，它们会被**泄露**- 带有关联的流句柄）。

我建议采用*现代 C++* RAII 方法。

例如，如果您使用类似`shared_ptr`（来自 Boost，或来自 C++11`<memory>`标头）的智能指针，您可以构建一个`vector`of `shared_ptr`，并使用它`make_shared`来分配`ofstream`对象：

```
// RAII exception-safe approach
vector<shared_ptr<ofstream>> files;

// Add a new ofstream object to the vector:
files.push_back( make_shared<ofstream>( filename ) ); 
```

当向量超出范围时，它会被破坏，并且所有指向的流对象都会*自动*释放：非常简单、清晰且异常安全。

如果你想在向量超出范围之前强制流清理，你可以`.clear()`在向量上调用方法。

（另一种方法是使用 C++11 *move-semantics* -powered `unique_ptr`，并定义 a `vector<unique_ptr<ofstream>>`，但不幸的是没有标准等效`make_shared`for `unique_ptr`，并且代码可能有点冗长，除非您编写自定义实现`make_unique`，例如[Herb Sutter 提出的那个](http://herbsutter.com/gotw/_102/)。）

请注意，通常的`files[i]->close()`语法也适用于这种*智能*指针向量的情况。

# ios - XCode 4.5 iOS 5 模拟器：无法打开文档“xxx.xib”。操作无法完成。

> ID：12509802
> 
> 赞同：7
> 
> 时间：2012-09-20T09:32:39.880
> 
> 标签：ios, xcode, xcode4.5

我在 iOS 5 模拟器上的 XCode 4.5 中收到此错误。

无法打开文档“xxx.xib”。操作无法完成。文档的两个成员的对象 ID 为 17。这可能是通过外部编辑发生的，例如 SCM 合并操作。

关于如何解决它的任何想法？

谢谢普拉迪普

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-09-20T09:43:47.173

您可以使用文本编辑器（例如 BBEdit 或 TextWrangler）打开 .xib 文件并手动更改数字。

1.  在纯文本编辑器中打开 XIB 文件。

2.  搜索不带引号的“>17”。

3.  用大量替换它（别担心，它是暂时的）。这将消除冲突。

4.  现在保存文件并在 XCode Interface builder 中打开它。Xcode 应该通知您该文件存在问题，并且它已自动修复该问题。该文件现在应该可以正常打开。

如果由于某种原因问题仍然存在，请尝试在步骤 3 中使用不同的号码。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-20T13:01:33.150

我能够解决这个问题

1.  在文本编辑器中打开 XIB 文件 - 我使用了 TextWrangler
2.  搜索不带引号的“>17”
3.  用一些大数字替换它
4.  现在保存文件并在 XCOde Interface builder 中打开它
5.  如果错误以不同的值继续，则重复步骤 2 - 步骤 4，直到 xcode 界面构建器打开 xib 文件。
6.  Xcode 将修复该文件，它会再次工作。

谢谢普拉迪普

# windbg - !dumpobj in windbg,Domain:Value dynamic statics NYI 002a8428:NotInit 是什么意思？

> ID：12509804
> 
> 赞同：4
> 
> 时间：2012-09-20T09:32:49.230
> 
> 标签：windbg, sos

当我使用 windbg ***!do***查看地址时，它输出：

```
0:000> !do 01ef30f4 
Name:        System.Collections.Generic.List`1[[System.Byte[], mscorlib]]
MethodTable: 0021285c
EEClass:     6313a530
Size:        24(0x18) bytes
File:        C:\Windows\Microsoft.Net\assembly\GAC_32\mscorlib\v4.0_4.0.0.0__b77a5c561934e089\mscorlib.dll
Fields:
      MT    Field   Offset                 Type VT     Attr    Value Name
633b70a0  4000ca6        4      System.Object[]  0 instance 01eed1b8 _items
63402df0  4000ca7        c         System.Int32  1 instance        0 _size
63402df0  4000ca8       10         System.Int32  1 instance        0 _version
633ffa60  4000ca9        8        System.Object  0 instance 00000000 _syncRoot
633b70a0  4000caa        0      System.Object[]  0   shared   static _emptyArray

     **Domain:Value dynamic statics NYI 002a8428:NotInit** 
```

**Domain:Value dynamic statics NYI 002a8428:NotInit**是什么意思？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-07-23T11:29:06.350

对于静态字段，`!do`在您拥有的每个 AppDomain 中显示静态字段的值。第一个值`002a8428`是 AppDomain 地址，第二个值是该 AppDomain 中静态字段的值。

# delphi - ShowMessage 窗口丢失模式

> ID：12509805
> 
> 赞同：1
> 
> 时间：2012-09-20T09:32:50.083
> 
> 标签：delphi

我使用`TAcroPDF`activeX 控件来打印pdf 文档。应用程序打印页面，但如果需要打印 2 页，则打印第一页，然后显示消息对话框，要求用户翻页，然后打印第二页。这个概念非常简单，但由于未知原因，它无法正常运行。它确实打印了第一页，但随后使 ShowMessage 窗口闪烁（立即隐藏）并且应用程序似乎继续运行。然后我可以恢复隐藏在主应用程序窗口后面的丢失的 Showmessage 窗口，但是（奇怪的是）我可以轻松地在 showmessage 窗口和主应用程序之间更改焦点。看起来程序在其他线程中运行，因为 ActiveX？？？当我单击“确定”按钮时，将`ShowMessage('Please, turn the page');`执行之后的代码。谁能告诉我发生了什么事？这是示例：

```
procedure TForm1.btn1Click(Sender: TObject);
begin
acrpdf1.src := Getcurrentdir + '\temp.pdf';
acrpdf1.PrintAll;
ShowMessage('Please, turn the page'); //it does not hover over main window, it hides behind
Form1.Color:=clRed;  //it is executed after closing Showmessage window
end; 
```

# sql-server - SQL Server Express 安装失败

> ID：12509809
> 
> 赞同：3
> 
> 时间：2012-09-20T09:32:56.833
> 
> 标签：sql-server, failed-installation

我在安装 Microsoft SQL Server 2012 Express 或 2008 R2 Express 时遇到问题。

安装开始，我选择“新安装...”，我进入选择应该安装的步骤，然后继续到我指定实例名称的步骤，但是当我在步骤中单击下一步时，我得到一个错误弹出窗口说：

```
SQL Server Setup has encountered the following:

Could not find the file.

Error code 0x84BB0001 
```

然后它说安装崩溃了...

我以前安装过 2008 R2 Express，但必须重新安装。

现在我的猜测是某处留下了文件，所以我运行 Windows Installer Cleanup Utility 来删除与 SQL Server 相关的任何内容，但它仍然无法正常工作。

我能做些什么来解决这个问题？我们真的正在为此寻找解决方案。

编辑，从堆栈之前的日志中复制：

```
2012-09-20 12:07:00 SQLBrowser: CalculateUserNamePassword: SQL Server Browser service exists: retrieving current service account.
2012-09-20 12:07:00 Slp: Sco: Attempting to get start account for service SQLBrowser
2012-09-20 12:07:00 Slp: Invoking QueryServiceConfig Win32 API for buffer size
2012-09-20 12:07:00 Slp: Error: Action "Microsoft.SqlServer.Configuration.UIExtension.WaypointAction" threw an exception during execution.
2012-09-20 12:07:00 Slp: Microsoft.SqlServer.Setup.Chainer.Workflow.ActionExecutionException: Thread was being aborted. ---> System.Threading.ThreadAbortException: Thread was being aborted. 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-20T09:53:56.297

您之前已经安装了 SQL Server。安装已正确卸载，但留下了您的*数据库*。不幸的是，SQL Server 2008 R2 (SP2) 和 SQL Server 2012 不支持在该数据上进行安装，如果以前的安装版本比当前版本更新，则这一点尤其明显，在这种情况下，无法降级数据库架构版本.

在磁盘上找到您的 .mdf/.ldf 文件并删除整个数据文件夹。

# php - 使用 SSL 证书对 Web 浏览器进行身份验证

> ID：12509811
> 
> 赞同：2
> 
> 时间：2012-09-20T09:33:13.043
> 
> 标签：php, authentication, browser, ssl

是否可以使用 ssl 证书对 Web 浏览器进行身份验证。

假设我在我的应用程序中存储了一个私钥，有没有办法从浏览器中读取一个密钥并尝试基于它进行身份验证？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-20T10:18:39.627

您可以使用 SSL/TLS 客户端证书身份验证对浏览器/用户进行身份验证。

服务器必须请求客户端证书，因此您需要访问服务器配置（不仅仅是在共享服务器上安装一些 PHP 代码）。这是在 SSL/TLS 层完成的（实际上，该机制并不特定于 HTTPS）：服务器在 SSL/TLS 握手期间请求客户端证书（有时通过重新协商的握手）。在 Apache Httpd 中，这通常通过[`SSLVerifyClient`](http://httpd.apache.org/docs/2.2/mod/mod_ssl.html#sslverifyclient)（尽管您也需要指定其他选项）来完成。

然后，服务器将根据您为其配置的 CA（可能是您自己的，并且可能独立于用于服务器证书本身的 CA）来验证证书。（或者，在某些情况下，您可以在服务器级别禁用证书验证，并让 PHP 应用程序执行此操作，但这有点高级，您需要知道自己在做什么。）

您可以从应用程序访问客户端证书并获取其主题 DN（或替代名称），以识别客户端。

目前尚不清楚您是在识别*浏览器*还是*用户*之后。最后，无论如何，一切都通过浏览器，但客户端证书往往分配给用户。用户必须将该证书安装到他们的浏览器中。

* * *

**编辑：**有关更多详细信息，如果您能澄清您的问题以及您打算对此做什么，将会有所帮助。

> 是否可以使用 ssl 证书对 Web 浏览器进行身份验证。
> 
> 假设我在我的应用程序中存储了一个私钥，有没有办法从浏览器中读取一个密钥并尝试基于它进行身份验证？

首先，严格来说，不存在“SSL 证书”这样的东西，因为 SSL/TLS 可以使用多种类型的证书，其中一些相同的证书还可以用于 SSL/TLS 以外的其他用途。通常，“SSL 证书”是指“SSL/TLS 上下文中的 X.509 证书”。

因此，使用 SSL 证书对 Web 浏览器进行身份验证意味着在 SSL/TLS 层进行。（已经尝试在 HTTP 层使用 X.509 证书实现消息级安全性，但它们并未得到浏览器的广泛支持。）

其次，私钥由您进行身份验证的远程方持有。验证远程方的本地方看不到任何私钥。如果您（作为服务器）想要验证 Web 浏览器，则需要拥有私钥的是浏览器，而不是您的（可能是 PHP）应用程序。在这种情况下，如果您要验证的浏览器是您的（PHP？）应用程序，为什么它会拥有/需要私钥，这还不是很清楚。

您的验证应用程序可能需要（如果不是由服务器本身完成）是一个 CA 证书，以便能够验证它所提供的客户端证书（或至少某种形式的信任锚来验证客户端证书）。这里不需要私钥，只需要公钥和证书，除非您希望您的应用程序也成为 CA。

实际上，您可以让您的应用程序成为一个迷你 CA。它可以使浏览器生成密钥对并向服务器发送证书请求（有一些机制可以让网页让浏览器完成所有这些工作）。然后服务器将生成证书并让浏览器将其导入回其私钥。随后，浏览器可以使用该证书与该服务器（或可以识别这些证书的其他服务器）进行身份验证。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-09-20T09:35:45.883

不，你不能那样做。

有一些进展正在进行，几天前 W3C 提出了一项加密标准的提案。

但是，您可以将密钥放入 cookie 并使用它来识别。这是默认的 PHP 会话 ID 行为。

# ios - Mac 上的两个开发者证书

> ID：12509827
> 
> 赞同：1
> 
> 时间：2012-09-20T09:34:22.963
> 
> 标签：ios

是否可以在一台 Mac 上使用两个 iOS 开发者证书？有什么特别的事情要做吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T09:36:40.983

是的，这是可能的。您无需执行任何具体操作。

# ruby-on-rails - Rails 看不到我的自定义验证器

> ID：12509828
> 
> 赞同：3
> 
> 时间：2012-09-20T09:34:26.540
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我正在尝试将自定义验证器与我的 Rails 3 应用程序一起使用。这是我的文件：

**应用程序/验证器/video_validator.rb**

```
class VideoValidator < ActiveModel::Validator
  def validate(record)
    videoInfo = VideoInfo.new(record.video_url)
    if !videoInfo.valid?
      record.errors[:base] << "Some error message."
    end
  end
end 
```

**应用程序/模型/user_video.rb**

```
class UserVideo < ActiveRecord::Base
  validates_with VideoValidator
end 
```

现在，当我尝试`new`从`user_videos`脚手架控制器执行操作时，我得到的只是这个错误：

> 路由错误未初始化常量 UserVideo::VideoValidator

我看过很多关于如何创建自定义验证器的教程，但我仍然找不到我做错了什么。我将不胜感激任何提示和建议:)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-20T09:38:29.077

是自动加载配置中配置的验证器路径。您可以在这里查看 **[Rails 3 Custom Validator Problem](https://stackoverflow.com/questions/5597347/rails-3-custom-validator-problem)**。

还要确保重新启动您的服务器:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T09:39:44.667

我想你需要在你的 uservideo 类中包含 VideoValidator

# c# - 有没有办法在不构建 .exe 的情况下调试解决方案？

> ID：12509829
> 
> 赞同：2
> 
> 时间：2012-09-20T09:34:27.817
> 
> 标签：c#, build, visual-studio-2012, executable, exe

基本上，我在学校使用 C# 进行编码，由于学校网络的限制，我构建的可执行文件被组策略阻止；“此程序被组策略阻止...”

我已经和我学校的管理员谈过了，但是这个问题将是长期的，可能会有些令人沮丧，因为我必须在学校编码，希望尽可能少的错误，把解决方案带回家，看看如果它在那里工作。

有没有其他方法可以调试我的 C# 程序？

更新：感谢所有的反馈，我已经接受了人们所说的；我的文件在学校的网络驱动器上，我无法访问本地驱动器。我想在家测试我的文件不是一个太糟糕的解决方案，但是人们提到了“单元测试”，这究竟意味着什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-20T09:46:20.750

您可以通过测试执行部分程序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T09:57:10.937

不，如果不构建和运行一些可执行文件，就无法调试代码。（试图弄清楚程序在不运行它的情况下做了什么相当于[停止问题](http://en.wikipedia.org/wiki/Halting_problem)）

听起来您的学校有一项政策类似于“如果该程序不在我的允许程序列表中，则不要运行该程序”，在这种情况下，您应该能够通过简单地构建来运行您的代码一个 DLL 而不是可执行文件，并让一些其他程序（例如单元测试应用程序）为您加载和运行您的代码。

值得首先与您的管理员讨论这一点，但是如果他们对您以这种方式绕过他们的安全策略感到满意，那么没有真正的理由限制您执行任意程序。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-20T09:40:52.620

基本上，IDE 需要构建应用程序并生成编译输出以及调试符号才能调试您的代码。

没有编译的输出，什么都做不了。调试的工作原理是调试指向源代码中与可执行代码中的内存位置或函数指针匹配的位置的符号，IDE 使用该信息向您显示当前正在执行的代码行以及范围内的变量具有哪些值。

我完全同意并支持其他使用单元测试来测试和调试应用程序部分的答案。

# java - 每个请求是否访问相同的 servlet 对象？

> ID：12509830
> 
> 赞同：21
> 
> 时间：2012-09-20T09:34:30.550
> 
> 标签：java, http, servlets, request

每个 HTTP 请求是否访问相同的 servlet 对象但在不同的线程中？还是创建一个新线程和新的 Servlet 实例？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-09-20T09:42:52.317

如果您的 servlet 未实现，容器将使用相同的 servlet 实例`SingleThreadModel`。否则无法保证`Servlet`命中同一个对象。如果它认为有必要，容器可以自由地创建更多的 servlet 实例。但是请求来自不同的线程，不一定是新创建的（正如 Sanjay 提到的）。

从 Servlet 3.0 规范：

> 对于不在分布式环境中托管的 servlet（默认设置），servlet 容器必须在每个 servlet 声明中仅使用一个实例。但是，对于实现 SingleThreadModel 接口的 servlet，servlet 容器可能会实例化多个实例来处理繁重的请求负载并将请求序列化到特定实例。

...

> 通常，Web 容器通过在不同线程上并发执行 service 方法来处理对同一个 servlet 的并发请求。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-09-20T09:36:27.670

每个 HTTP 请求都会创建一个新线程，但会访问同一个 Servlet 实例。

编辑：如果是一个服务器节点，您将在该节点上拥有相同的 Servlet 实例。在负载平衡/许多服务器的情况下，通常每个 Java VM 有一个实例。

# c# - 我可以在结构中创建一个只有单个具体类可以访问的“集合”的属性吗？

> ID：12509834
> 
> 赞同：0
> 
> 时间：2012-09-20T09:34:37.343
> 
> 标签：c#, properties, access-modifiers

我知道这听起来有点奇怪，但我会试着解释一下：假设我有一个有很多属性的类，而且它们都是只读的，所以这个类是唯一可以修改其属性的类（它正在侦听一个事件，并使用该事件中包含的信息填充属性）。

但是，我想在一些结构上封装一些属性，以创建一个组织良好的层次结构，所以这些结构的属性也应该是只读的，除了所有者类。例如：

```
public class A
{
    private int a1;
    public int A1 
    { 
        get{ return a1; } 
    }

    private B structB;
    public B StructB
    {
        get{ return structB; }
    }

    private method eventListenerMethod(...)
    {
        a1 = someValue;
        structB.B1 = otherValue; //I want that only this class can modify this property!
    }
}

public struct B
{
    private int b1;
    public int B1
    {
        get{ return b1; } // This property should be modifiable for Class A!!
    }
} 
```

我想我不能做到这一点，但有谁知道我怎样才能做到这一点？非常感谢您提前。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T09:43:34.887

似乎您所追求的是 C++ 中的“朋友”关键字。但是，它在 C# 中不存在，但“内部”是一个很好的折衷方案。因此，只需创建一个“内部集”属性，它可以（仅）在程序集中访问。因此，将使用您的程序集的其他人将无权访问它

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T09:47:39.940

将 更改`struct`为 a`class`并制作它`private`，但将它的定义放在**里面** `class A`。

这意味着只能`class A`访问其属性。然后内部的所有属性`class B`都可以是公共的（因为只有定义它的类才能访问它）。

这将导致编译器错误，因为`class B`它将是私有的，但会暴露在公共属性上。要解决此问题，请创建一个公共接口以公开为类型`IClassB`（名称不好，但您明白了）并将属性类型更改为接口。确保此接口仅对属性方法签名具有 get 访问器。

像这样的东西应该工作：

```
public class A : IClassB
{
   public IClassB B { get; }

   private class B : IClassB
   {
       public int B1 { get; }
   }
}

public interface IClassB
{
   int B1 { get; }
} 
```

# jquery - jQuery 对话框只显示一次

> ID：12509835
> 
> 赞同：0
> 
> 时间：2012-09-20T09:34:43.060
> 
> 标签：jquery, jquery-ui, jquery-ui-dialog

我正在用我的 jQuery 泡菜。情况如下：我正在加载一个页面（主页）。当单击某个元素时，会打开一个加载了另一个页面（page1）的 div。在这个加载的页面中，我有一个按钮，它打开一个对话框，其中包含另一个加载的页面（page2）。

这一切都很好，一次。当我关闭对话框时，单击 page1 上的按钮时它不会再次出现。

我搜索了互联网，但解决方案对我没有帮助。我无法弄清楚我在这里做错了什么。这是一个非常常见的问题，但我似乎有正确的代码，对吧？

这是我的代码（无论如何，有用的部分）：

```
<script>
$(document).ready(function(e) {
    $("#editdialog").dialog({
                autoOpen: false,
                width: 400,
                height: 600,

    });

    $(".editfreight").one("click", function(){
        $("#editdialog").load("inc/ajax/editfreight_ajax.php?id=" + $(this).data("freight"));
        $("#editdialog").dialog("open");

    });

});

</script>

<div id="editdialog" style="display: hidden"></div> 
```

好吧，我希望有人可以在这里帮助我！我也试过这个：

```
$(".editfreight").one("click", function(){
$("#editdialog").dialog({
                    autoOpen: false,
                    width: 400,
                    height: 600,
                    close: function() {
                          $("#editdialog").dialog("destroy")

        });
        $("#editdialog").load("inc/ajax/editfreight_ajax.php?id=" + $(this).data("freight"));
    $("#editdialog").dialog("open");
)}; 
```

这样，我想当我单击按钮（而不是在页面加载时）时启动对话框，并在关闭对话框时销毁实例。显然这也不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T09:40:11.790

事件处理程序附件应该`on("click")`，而不是`one("click")`，`one`只会触发一次

```
$(".editfreight").on("click", function(){
}); 
```

见`one`文档：[http ://api.jquery.com/one/](http://api.jquery.com/one/)

> `one()`：将处理程序附加到元素的事件。每个元素最多执行一次处理程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T09:38:23.860

改变这个并尝试

```
$(".editfreight").one("click",function(){ 
```

改成

```
$(".editfreight").click(function(){ 
```

也改变这条线

```
close: function() {
     $("#editdialog").dialog("close") 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-20T09:38:31.850

代替

```
$(".editfreight").one("click", function(){ 
```

经过

```
$(".editfreight").click(function(){ 
```

[一个](http://api.jquery.com/one/)被设计为只工作一次。

# post - post方法中未定义的索引

> ID：12509838
> 
> 赞同：2
> 
> 时间：2012-09-20T09:34:52.170
> 
> 标签：post, php

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-20T09:41:26.713

`if`您忘记为语句添加括号，如下所示：

```
if(isset($_POST['user_input']) && isset($_POST['search_for']) 
    && isset($_POST['replace_with']) && !empty($_POST['user_input']) 
    && !empty($_POST['search_for']) && !empty($_POST['replace_with'])) {
    echo $user_input = $_POST['user_input'];
    echo $search_for = $_POST['search_for'];
    echo $replace_with = $_POST['replace_with'];
} 
```

上面的代码应该做你想做的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T09:38:50.430

在使用`$ _POST`或`$ _GET`从表单中检索变量时，您可能会遇到以下错误：

注意：“当前行”行“正在执行的 php 文件的路径”中未定义的索引“表的字段”

出现此错误是因为您的 PHP 错误报告设置。通常，它会在您的变量设置不正确时出现。有两种方法可以处理此问题：

1.使用前检查是否设置了`$_POST['action']`或`$GET['action']`。例如：

```
if (!isset($_POST['action'])) {//your pure stuff   }       

 if (!isset($_GET['action'])) {//your pure stuff   } 
```

2\. 禁止通知警告

注意警告可以通过更改 PHP.ini 中的 error_reporting 变量来抑制。error_reporting 可以设置为显示除通知和编码标准警告之外的所有错误：error_reporting = E_ALL & ~E_NOTICE

```
<?php error_reporting (E_ALL ^ E_NOTICE); ?> 
```

但我个人的建议是解决警告而不是使用 2 方法

* * *

**更新的问题答案**

您没有添加封闭括号`{}`，因此 if 之后的唯一一行将考虑为 if 正文，并且无论您的 if 的结果是真还是假，都将执行您的第二和第三回声

它应该是

```
if(isset($_POST['user_input']) && isset($_POST['search_for']) 
    && isset($_POST['replace_with']) && !empty($_POST['user_input']) 
    && !empty($_POST['search_for']) && !empty($_POST['replace_with'])) {
    echo $user_input = $_POST['user_input'];
    echo $search_for = $_POST['search_for'];
    echo $replace_with = $_POST['replace_with'];
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-20T09:46:17.210

如果您在发布表单之前使用变量，例如`$var = $_POST['var'];` 它将返回错误。

最好检查是否已按下提交按钮。

例子：

```
if(isset($_POST['submit'])){
    //form has been posted
} 
```

然后，我将确保您将使用的所有帖子变量都已设置，如果没有抛出错误。

例子：

```
$error = false;
//['submit'] is the button used to post the form.
if(isset($_POST['submit'])){
    $testVar = (isset($_POST['testVar']) && strlen($_POST['testVar']) > 0 ? $_POST : $error[] = 'Please enter something.');

    if(!$error){
        //Submit for
    }
    else{
        foreach($error as $e){
            echo $e;
        }
    }
} 
```

# android - 从服务获取位置但 myLocationOverlay 不起作用

> ID：12509839
> 
> 赞同：1
> 
> 时间：2012-09-20T09:34:52.157
> 
> 标签：android, service, mylocationoverlay

我有一个 MapActivity，必须使用 myLocationOverlay 在地图上显示我的当前位置，我从服务中获取位置。

这是我的活动：

```
public class ShowMapActivity extends MapActivity {

private MapController mapController;
private MapView mapView;
private LocationManager locationManager;
private MyOverlayUtility itemizedoverlay;
private MyLocationOverlay myLocationOverlay;
private double latitude;
private double longitude;

public void onCreate(Bundle bundle) {
    super.onCreate(bundle);
    setContentView(R.layout.activity_showmap);
    Intent serviceIntent = new Intent(this, LocationService.class);
    serviceIntent.setAction("startListening");
    startService(new Intent(this, LocationService.class));
    // check if the GPS is on
    // isGPSEnable();
    IntentFilter filter = new IntentFilter();
    filter.addAction(UPDATE_MAP);
    registerReceiver(updateReceiver, filter);

    // Configure the Map
    mapView = (MapView) findViewById(R.id.mapview);
    mapView.setBuiltInZoomControls(true);
    mapView.setSatellite(true);
    mapController = mapView.getController();
    mapController.setZoom(14);

    myLocationOverlay = new MyLocationOverlay(this, mapView);
    myLocationOverlay.runOnFirstFix(new Runnable() {
        public void run() {
            mapView.getController().animateTo(
                    myLocationOverlay.getMyLocation());
        }
    });

}

@Override
protected boolean isRouteDisplayed() {
    return true;
}

private final String UPDATE_MAP = "com.livetrekker.activities.UPDTAE_LOCATION";
private BroadcastReceiver updateReceiver = new BroadcastReceiver() {
    @Override
    public void onReceive(Context context, Intent intent) {
        longitude = intent.getDoubleExtra("long", 0);
        latitude = intent.getDoubleExtra("lat", 0);
        Log.e("LOCATION", "lat = " + latitude + " long = " + longitude);
    }
};} 
```

这是我的服务：

```
public class LocationService extends Service implements LocationListener {

private final String UPDATE_MAP = "com.livetrekker.activities.UPDTAE_LOCATION";
private LocationManager locationManager;
private String provider;

private Location location;

@Override
public int onStartCommand(final Intent intent, final int flags,
        final int startId) {

    Log.e("Service", "start location");
    // if (intent.getAction().equals("startListening")) {
    locationManager = (LocationManager) this
            .getSystemService(Context.LOCATION_SERVICE);
    Criteria criteria = new Criteria();
    provider = locationManager.getBestProvider(criteria, false);
    Location location = locationManager.getLastKnownLocation(provider);

    if (location != null) {
        Log.e("LOCATION", "Provider " + provider + " has been selected");
        onLocationChanged(location);
    }

    locationManager.requestLocationUpdates(LocationManager.GPS_PROVIDER, 0,
            0, this);

    // }
    /*
     * else { if (intent.getAction().equals("stopListening")) {
     * locationManager.removeUpdates(this); locationManager = null; } }
     */

    return START_STICKY;

}

@Override
public IBinder onBind(final Intent intent) {
    return null;
}

@Override
public void onLocationChanged(final Location location) {
    this.location = location;
    double lng = location.getLongitude();
    double lat = location.getLatitude();
    Log.e("SERVICELOCATION", "lat : " + lat + " lng : " + lng);
    Intent updateIntent = new Intent();
    updateIntent.putExtra("long", lng);
    updateIntent.putExtra("lat", lat);
    updateIntent.setAction(UPDATE_MAP);
    getApplicationContext().sendBroadcast(updateIntent);
}

public void onProviderDisabled(final String provider) {
}

public void onProviderEnabled(final String provider) {
}

public void onStatusChanged(final String arg0, final int arg1,
        final Bundle arg2) {
}} 
```

所以位置管理器工作正常，我能够在我的活动中获得我的纬度和经度，但 myLocationOverlay 没有出现。

那么是否可以使用这种方式在地图上显示我的当前位置？

谢谢

编辑：

我解决了更换问题

```
myLocationOverlay = new MyLocationOverlay(this, mapView);
    myLocationOverlay.runOnFirstFix(new Runnable() {
        public void run() {
            mapView.getController().animateTo(
                    myLocationOverlay.getMyLocation());
        }
    }); 
```

经过 ：

```
 List overlays = mapView.getOverlays();
    MyLocationOverlay myLocationOverlay = new MyLocationOverlay(this, mapView);
    myLocationOverlay.enableMyLocation();
    overlays.add(myLocationOverlay); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T09:45:25.027

遵循以下代码：

```
public class GoogleMapsActivity extends MapActivity {
    public static final String TAG = "GoogleMapsActivity";
    private MapView mapView;
    private LocationManager locationManager;
    Geocoder geocoder;
    Location location;
    LocationListener locationListener;
    CountDownTimer locationtimer;
    MapController mapController;
    MapOverlay mapOverlay = new MapOverlay();

    @Override
    protected void onCreate(Bundle icicle) {
        super.onCreate(icicle);
        setContentView(R.layout.googlemap);
        initComponents();
        mapView.setBuiltInZoomControls(true);
        mapView.setSatellite(true);
        mapController = mapView.getController();
        mapController.setZoom(16);
        locationManager = (LocationManager) getSystemService(LOCATION_SERVICE);
        if (locationManager == null) {
            Toast.makeText(GoogleMapsActivity.this,
                    "Location Manager Not Available", Toast.LENGTH_SHORT)
                    .show();
            return;
        }
        location = locationManager
                .getLastKnownLocation(LocationManager.GPS_PROVIDER);
        if (location == null)
            location = locationManager
                    .getLastKnownLocation(LocationManager.NETWORK_PROVIDER);
        if (location != null) {
            double lat = location.getLatitude();
            double lng = location.getLongitude();
            Toast.makeText(GoogleMapsActivity.this,
                    "Location Are" + lat + ":" + lng, Toast.LENGTH_SHORT)
                    .show();
            GeoPoint point = new GeoPoint((int) (lat * 1E6), (int) (lng * 1E6));
            mapController.animateTo(point, new Message());
            mapOverlay.setPointToDraw(point);
            List<Overlay> listOfOverlays = mapView.getOverlays();
            listOfOverlays.clear();
            listOfOverlays.add(mapOverlay);
        }
        locationListener = new LocationListener() {
            @Override
            public void onStatusChanged(String arg0, int arg1, Bundle arg2) {
            }

            @Override
            public void onProviderEnabled(String arg0) {
            }

            @Override
            public void onProviderDisabled(String arg0) {
            }

            @Override
            public void onLocationChanged(Location l) {
                location = l;
                locationManager.removeUpdates(this);
                if (l.getLatitude() == 0 || l.getLongitude() == 0) {
                } else {
                    double lat = l.getLatitude();
                    double lng = l.getLongitude();
                    Toast.makeText(GoogleMapsActivity.this,
                            "Location Are" + lat + ":" + lng,
                            Toast.LENGTH_SHORT).show();
                }
            }
        };
        if (locationManager.isProviderEnabled(LocationManager.GPS_PROVIDER))
            locationManager.requestLocationUpdates(
                    LocationManager.GPS_PROVIDER, 1000, 10f, locationListener);
        locationManager.requestLocationUpdates(
                LocationManager.NETWORK_PROVIDER, 1000, 10f, locationListener);
        locationtimer = new CountDownTimer(30000, 5000) {
            @Override
            public void onTick(long millisUntilFinished) {
                if (location != null)
                    locationtimer.cancel();
            }

            @Override
            public void onFinish() {
                if (location == null) {
                }
            }
        };
        locationtimer.start();
    }

    public MapView getMapView() {
        return this.mapView;
    }

    private void initComponents() {
        mapView = (MapView) findViewById(R.id.googleMapview);
    }

    @Override
    protected boolean isRouteDisplayed() {
        return false;
    }

    class MapOverlay extends Overlay {
        private GeoPoint pointToDraw;

        public void setPointToDraw(GeoPoint point) {
            pointToDraw = point;
        }

        public GeoPoint getPointToDraw() {
            return pointToDraw;
        }

        @Override
        public boolean draw(Canvas canvas, MapView mapView, boolean shadow,
                long when) {
            super.draw(canvas, mapView, shadow);

            Point screenPts = new Point();
            mapView.getProjection().toPixels(pointToDraw, screenPts);

            Bitmap bmp = BitmapFactory.decodeResource(getResources(),
                    R.drawable.pingreen);
            canvas.drawBitmap(bmp, screenPts.x, screenPts.y - 24, null);
            return true;
        }
    }

} 
```

（或）点击此链接：[http ://www.javacodegeeks.com/2011/02/android-google-maps-tutorial.html](http://www.javacodegeeks.com/2011/02/android-google-maps-tutorial.html)

# ruby-on-rails - nil:NilClass 的未定义方法“调试”

> ID：12509846
> 
> 赞同：2
> 
> 时间：2012-09-20T09:35:15.843
> 
> 标签：ruby-on-rails, debugging

几天来，我一直有以下问题：

在我所有的模型中，当它运行时，我得到`"undefined method`了 nil:NilClass"` 的调试信息

```
logger.debug "whatever" 
```

添加导轨。在 logger.debug 前面解决了这个问题，但我想找到原因。

我不知道在哪里搜索。我正在运行 rails 3.2.8，我最近安装的唯一 gem 是friendly_id

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T15:40:49.860

问题是由于我在模型中添加了 actionview 助手：

```
 include ActionView::Helpers 
```

我不知道原因，但这就是原因......为了避免在我所有的记录器行之前添加 Rails，然后我在包含 Helpers 的模型中添加了这一行：

```
 logger = Logger.new(STDOUT) 
```

# c++ - 使用 Qt 作为纯终端应用程序的网络爬虫

> ID：12509847
> 
> 赞同：1
> 
> 时间：2012-09-20T09:35:20.337
> 
> 标签：c++, qt, web-crawler

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T13:37:03.583

当然这是可能的。QWebPage 仅继承自 QObject，而不是 QWidget。[甚至在 Qt 文档页面上](http://doc.qt.digia.com/4.7-snapshot/qwebpage.html#using-qwebpage-in-a-widget-less-environment)也有一个简短的教程如何在没有 GUI的情况下进行操作。仅针对 url 爬虫，我猜你甚至不需要渲染部分。

# android - RotateAnimation 后的布局位置

> ID：12509848
> 
> 赞同：0
> 
> 时间：2012-09-20T09:35:27.757
> 
> 标签：android, rotateanimation

我用三个`RotateAnimation`来旋转我的。但是在旋转之后，布局及其子视图返回到动画之前的起始位置。如何让它在动画后保持旋转？`FrameLayout``ImageView`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T09:38:35.997

阅读 Animation 的文档，尤其是 fillAfter。

[http://developer.android.com/reference/android/view/animation/Animation.html](http://developer.android.com/reference/android/view/animation/Animation.html)

# c# - 指定的演员对日期选择器无效

> ID：12509852
> 
> 赞同：1
> 
> 时间：2012-09-20T09:35:51.743
> 
> 标签：c#, asp.net, telerik, nullable, informix

我尝试在评估我的选择器中的日期之前检查 null ，因为我不允许输入任何日期：

```
 <telerik:RadDatePicker ID="rpick_to_date" runat="server" Visible="false" SelectedDate='<%# Eval("to_date") == null ? "" : Eval("to_date") %>'>
                                            <Calendar UseColumnHeadersAsSelectors="False" UseRowHeadersAsSelectors="False" ViewSelectorText="x">
                                            </Calendar>
                                            <DatePopupButton HoverImageUrl="" ImageUrl="" />
                                            <DateInput DateFormat="dd/MM/yyyy" DisplayDateFormat="dd/MM/yyyy">
                                            </DateInput>
 </telerik:RadDatePicker> 
```

* * *

但我一直收到以下错误：

> 指定的演员表无效。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-20T09:51:14.273

我相信你应该使用`DbSelectedDate`属性来绑定值而不是`SelectedDate`

> 使用 DbSelectedDate 属性而不是 SelectedDate 以数据库友好的方式获取或设置 RadDatePicker 的日期内容。与 SelectedDate 的唯一区别是，如果新值为 null 或 DBNull，它不会抛出异常。设置空值将在内部将 SelectedDate 恢复为空值，即输入值将为空。

[从这里](http://www.telerik.com/community/forums/aspnet-ajax/calendar/specified-cast-is-not-valid-error-with-raddatepicker.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T09:42:59.017

您可以使用此代码（删除字符串“”） -`SelectedDate`是`Nullable<DateTime>`

```
SelectedDate='<%# Eval("to_date")%>' 
```

# linux - 如何解决编译linux内核2.6.32.8时出现的错误

> ID：12509853
> 
> 赞同：1
> 
> 时间：2012-09-20T09:35:53.683
> 
> 标签：linux, kernel

在编译 2.6.32.8 linux 内核时，我收到如下错误消息：

```
In file included from drivers/net/igbvf/ethtool.c:36:0:
drivers/net/igbvf/igbvf.h: At top level:
drivers/net/igbvf/igbvf.h:128:15: error: duplicate member ‘page’
make[3]: *** [drivers/net/igbvf/ethtool.o] Error 1
make[2]: *** [drivers/net/igbvf] Error 2
make[1]: *** [drivers/net] Error 2
make: *** [drivers] Error 2 
```

我的 gcc 版本是 4.6.3，我使用的是 Ubuntu linux（我使用的内核是 3.2.0.30）。我尝试了很多次但失败了，请帮忙！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T03:35:17.367

我已经完成了......或者准确地说，我避免了它。我改变了要编译的内核，我改变了ubuntu的版本。内核2.6.38.4可以在ubuntu 10.04下编译内核2.6.32和gcc 4.4.3

# html - 在 HTML5 中引用 RDFa 命名空间的正确方法是什么？

> ID：12509854
> 
> 赞同：5
> 
> 时间：2012-09-20T09:35:55.407
> 
> 标签：html, semantic-web, rdfa

我正在设置一个 HTML5 网页并希望包含 RDFa。我尝试使用[w3 验证器检查语法，并使用](http://validator.w3.org)[w3 RDFa distiller](http://www.w3.org/2007/08/pyRdfa/)检查提取的 RDF 。当我使用`xmlns:<ns>="<uri>"`验证器声明命名空间时抱怨该属性不允许在那里，并且规范说 xmlns 已被弃用，但如果我尝试另一个建议`prefix="<ns> <uri>"`蒸馏器不会发现嵌入在我的页面上的 RDFa。我应该坚持哪种方式？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-20T18:06:02.350

使用`@prefix`. 您问题的关键在于 W3C 的 RDFa Distiller 页面上的前几句话：

> 该蒸馏器符合 RDFa 1.0 规范。2012 年，W3C 发布了该规范的更新版本，称为 RDFa Core 1.1。一个新的蒸馏器，处理 RDFa 1.1 内容，已经实施，它取代了这个。

该`@prefix`属性是 RDFa 1.1 中的新增功能，因此旧 Distiller 无法识别。

[W3C RDFa 1.1 Distiller](http://www.w3.org/2012/pyRdfa/)应该能够正确处理它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T19:23:29.950

另外，请确保正确使用支持 HTML5 和 RDFa 的 NU 验证器：http: [//validator.w3.org/nu/](http://validator.w3.org/nu/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-20T07:06:21.180

xmlns 是从 RDFa 仅限于**X** HTML 时遗留下来的。XHTML5 之类的东西允许 XML 操作（例如 XSLT）与 HTML 功能一起使用，因此无论 xmlns 为构建 RDFa 自己的身份而弃用的状态如何，杀死 xmlns 都是不太可能的。至于较新的技术，即使您继续前进，某些工具也可能不得不迎头赶上。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-03-17T13:05:45.020

我正在使用这个：

```
<!DOCTYPE html>
<html vocab="http://www.w3.org/2011/rdfa-context/rdfa-1.1">
<!-- you can use one or more prefixes
cat:        http://www.w3.org/ns/dcat#
qb:         http://purl.org/linked-data/cube#
grddl:      http://www.w3.org/2003/g/data-view#
ma:         http://www.w3.org/ns/ma-ont#
owl:        http://www.w3.org/2002/07/owl#
rdf:        http://www.w3.org/1999/02/22-rdf-syntax-ns#
rdfa:       http://www.w3.org/ns/rdfa#
rdfs:       http://www.w3.org/2000/01/rdf-schema#
rif:        http://www.w3.org/2007/rif#
rr:         http://www.w3.org/ns/r2rml#
skos:       http://www.w3.org/2004/02/skos/core#
skosxl:     http://www.w3.org/2008/05/skos-xl#
wdr:        http://www.w3.org/2007/05/powder#
void:       http://rdfs.org/ns/void#
wdrs:       http://www.w3.org/2007/05/powder-s#
xhv:        http://www.w3.org/1999/xhtml/vocab#
xml:        http://www.w3.org/XML/1998/namespace
xsd:        http://www.w3.org/2001/XMLSchema#
prov:       http://www.w3.org/ns/prov#
sd:         http://www.w3.org/ns/sparql-service-description#
org:        http://www.w3.org/ns/org#
gldp:       http://www.w3.org/ns/people#
cnt:        http://www.w3.org/2008/content#
dcat:       http://www.w3.org/ns/dcat#
earl:       http://www.w3.org/ns/earl#
ht:         http://www.w3.org/2006/http#
ptr:        http://www.w3.org/2009/pointers#
cc:         http://creativecommons.org/ns#
ctag:       http://commontag.org/ns#
dc:         http://purl.org/dc/terms/
dc11:       http://purl.org/dc/elements/1.1/
dcterms:    http://purl.org/dc/terms/
foaf:       http://xmlns.com/foaf/0.1/
gr:         http://purl.org/goodrelations/v1#
ical:       http://www.w3.org/2002/12/cal/icaltzd#
og:         http://ogp.me/ns#
rev:        http://purl.org/stuff/rev#
sioc:       http://rdfs.org/sioc/ns#
v:          http://rdf.data-vocabulary.org/#
vcard:      http://www.w3.org/2006/vcard/ns#
schema:     http://schema.org/
describedby:http://www.w3.org/2007/05/powder-s#describedby
license:    http://www.w3.org/1999/xhtml/vocab#license
role:       http://www.w3.org/1999/xhtml/vocab#role
-->
<head>
    <meta property="og:title dc:title" content="This is a test!">
    <meta property="dc:description" content="This is a description test">
</head>
<body>
          <header typeof="role:banner schema:Organization">
    <div>
        <h1>
            <a href="/" title="home" rel="home" accesskey="1">
                <img class="logo" property="schema:image" src="my-image.png" width="160" alt="My logo">
            </a>
        </h1>
        <h2>
            <span property="schema:description">creative design and rock-solid development</span>
        </h2>
    </div>
</header>
...and so on...
</body>
</html> 
```

你可以在这里阅读更多关于它的信息[http://rdfa.info](http://rdfa.info)

# php - cURL 使用 utf-8 BOM 获得响应

> ID：12509855
> 
> 赞同：2
> 
> 时间：2012-09-20T09:35:57.020
> 
> 标签：php, curl, utf-8, byte-order-mark

在我的脚本中，我使用 cURL 发送数据，并启用了 CURLOPT_RETURNTRANSFER。响应是 json 编码的数据。当我尝试 json_decode 时，它​​返回 null。然后我发现响应在字符串（ï»¿）的开头包含 utf-8 BOM 符号。

有一些实验：

* * *

```
$data = $data = curl_exec($ch);
echo $data; 
```

结果是 {"field_1":"text_1","field_2":"text_2","field_3":"text_3"}

```
$data = $data = curl_exec($ch);
echo mb_detect_encoding($data); 
```

结果 - UTF-8

```
$data = $data = curl_exec($ch);
echo mb_convert_encoding($data, 'UTF-8', mb_detect_encoding($data));
// identical to echo mb_convert_encoding($data, 'UTF-8', 'UTF-8'); 
```

结果 - ï»¿{"field_1":"text_1","field_2":"text_2","field_3":"text_3"}

* * *

有帮助的一件事是删除前 3 个符号：

```
if (substr($data, 0, 3) == pack('CCC', 239, 187, 191)) {
    $data = substr($data, 3);
} 
```

但是，如果会有另一个 BOM 怎么办？所以问题是：如何检测 cURL 响应的正确编码？或者如何检测到什么 BOM？或者也许如何用 BOM 转换响应？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-20T09:49:00.610

恐怕您已经自己找到了答案——这是个坏消息，因为我知道没有更好的答案。

BOM 不应该在那里，发件人有责任不将其发送。

但我可以向你保证，BOM 要么存在要么不存在，如果存在，那就是你知道的那三个字节。

您可以稍微快一点并处理另一个 N BOM，只需稍作改动：

```
$__BOM = pack('CCC', 239, 187, 191);
// Careful about the three ='s -- they're all needed.
while(0 === strpos($data, $__BOM))
    $data = substr($data, 3); 
```

第三方 BOM 检测器不会有任何不同。这样，即使 cURL 稍后开始剥离不需要的 BOM，您也会被覆盖。

# 可能的原因

一些 JSON 优化器和过滤器可能会决定输出需要 BOM。此外，也许更简单的是，编写生成 JSON 的脚本的人无意中在开始 PHP 标记之前包含了一个 BOM。Apache，不关心 BOM 是什么，看到开始标记之前有数据，因此将其发送并隐藏在 PHP 流本身中。这有时也会导致“无法添加标题：输出已开始”错误。

# 内容检测

您可以验证 JSON 是有效的 UTF-8、BOM 还是非 BOM，但需要`mb_string`支持*并且*您必须使用严格模式来获取一些边缘情况：

```
if (false === mb_detect_encoding($data, 'UTF-8', true)) {
    // JSON contains invalid sequences (erroneously NOT JSON encoded)
} 
```

我建议**不要**尝试纠正可能的编码错误；您可能会破坏自己的代码，并且还必须维护*其他人的*工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T09:48:21.373

此页面详细介绍了类似的问题：[Wordpress 自动生成的 PHP 页面中的 BOM](https://stackoverflow.com/questions/1814258/bom-in-a-php-page-auto-generated-by-wordpress)

基本上，当 JSON 生成器是用 PHP 编写的并且编辑器以某种方式在开始`<?php`标记之前潜入 BOM 时，就会发生这种情况。由于您的客户端语言是 PHP，我假设这是相关的。

您可以使用`substr`比较将其去掉——BOM 只出现在文档的开头。但是，如果您可以控制 JSON 源，则应改为从源文档中删除 BOM。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-20T09:50:37.317

“{”之前的字符永远不会超过 3 个。这 3 个字符是 UTF-8 中的一个字符。所以如果你只是做 $data = substr($data, 3); 你会好起来的。

在这里查看更多信息：[json_decode 在 webservice 调用后返回 NULL](https://stackoverflow.com/questions/689185/json-decode-returns-null-php)

# comparison - 文本文件比较软件

> ID：12509856
> 
> 赞同：2
> 
> 时间：2012-09-20T09:36:02.333
> 
> 标签：comparison, compare, notepad

是否有任何软件可用于比较两个文本文件之间的差异。我有两个 CSS 文本文件，我想比较它们的区别。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T09:38:45.147

在 Linux 或 Mac OS 上，在命令行上使用 diff：

```
man diff 
```

在 Windows 上，试试这个：

[http://www.prestosoft.com/edp_examdiff.asp](http://www.prestosoft.com/edp_examdiff.asp)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T09:41:17.980

[阿拉克西斯。](http://www.araxis.com/merge/)

还要检查 Visual Studio 扩展[代码比较](http://visualstudiogallery.msdn.microsoft.com/dace3633-0b51-4629-85d4-c59cdce5bb3b)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-20T13:44:32.090

WinMerge 也适用于比较文本文件和源代码。而且它是免费的！

# objective-c - Xcode、Objective-C 和 Cocoa 有什么区别？

> ID：12509859
> 
> 赞同：19
> 
> 时间：2012-09-20T09:36:25.937
> 
> 标签：objective-c, xcode, cocoa-touch, cocoa

这个问题在这里经常出现，即使只是在用户错误标记他们的 iOS 问题时隐含地出现。那么，Xcode、Objective-C 和 Cocoa 有什么区别呢？

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2012-09-20T09:36:25.937

Objective-C 是一种编程语言。可以说，它只是对有效的 Objective-C 程序的外观和含义的描述。如果你有一个用 Objective-C 编写的源代码清单，你需要一个解释器或编译器来让这个清单工作。像 Objective-C 这样的语言通常是经过编译的，所以大多数人使用编译器（比如[LLVM](http://clang.llvm.org/)）。Objective-C 几乎专门用于开发 iOS 和 OS X，但也有其他用途——例如，有些人为 Linux 编写 Objective-C。

您可以使用文本编辑器编写源代码并使用编译器将它们转换为实际程序，但使用现代技术需要处理的事情更多，因此还有另一个程序可以让您的工作更轻松。这些被称为集成开发环境或 IDE。IDE 为您提供了一种方便的方式来编辑源代码、编译它们、调试生成的程序、阅读文档以及许多其他事情。Xcode 就是这样一种 IDE。这里的一个重要观察是 Xcode 本身不会编译您的源代码，它只是调用独立编译器 (LLVM)。而且 Xcode 并不是您可以用来开发 Objective-C 应用程序的[唯一 IDE——](http://www.jetbrains.com/objc/)例如，还有 AppCode。

每次从头开始编写 iOS 或 OS X 应用程序将非常耗时。这就是为什么 Apple 为开发人员提供了一套好的库。这些库只是 Apple 编写的大量源代码，这些源代码处理了应用程序的大部分共同点。这些库称为 Cocoa。

现在，如果你不知道如何扩展一个类，你很可能在谈论 Objective-C。它与 Xcode 或 Cocoa 没有任何关系，您可以使用 Vim 作为 IDE 和 GCC 作为编译器为 Linux编写一些[GNUstep代码。](http://www.gnustep.org/)另一方面，如果您的 Xcode 构建过程由于某些神秘设置而失败，或者您尝试在 Xcode 中构建静态库，那么这显然是 Xcode 问题。如果你不知道如何使用一些 NSObject 工具或 NSFileManager 类，那就是 Cocoa。（但它不必与 Xcode 相关，因为您可以使用 AppCode 或 TextMate 作为您的 IDE！）

* * *

[最初可在我的博客上找到](http://blog.zmotula.cz/post/31915106673/the-difference-between-xcode-objective-c-and-cocoa)。在重新标记或解释差异时，请随意链接到博客文章或此问题。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-09-21T00:27:30.697

Xcode 是集成开发环境 (IDE)——开发人员用来为 iOS 和/或 OS X 编写软件的应用程序。它包括编辑器、构建系统（确定构建什么来生成所需的目标），以及相当多的其他几件事。

Objective-C 是开发人员编写此类软件的主要语言。他们可以用纯 C 编写它的一部分，使用 C++ 或将其与 Objective-C 结合（产生 Objective-C++），或者用另一种语言编写部分或全部程序完全语言，例如 MacRuby、Java（使用 j2objc）或 C#（使用 MonoTouch）。

Xcode 包括 Clang 编译器，它将用 Objective-C、C 和其他一些语言编写的代码转换为可执行代码。大多数错误消息来自 Clang，Xcode 严重依赖它来搜索索引、语法高亮和 Objective-C 代码的名称完成。

Cocoa 和 Cocoa Touch 是应用程序框架。每一个都是一组许多单独的框架（存储在名为 blahblah.framework 的文件夹中的库），例如：

*   Foundation（两者）：通用的面向对象实用程序，包括 NSString、NSURL、NSFileManager 等。
    *   Core Foundation（两者）：大部分相同，但不同，主要在于拥有基于 C 的 API 而不是 Objective-C
*   Application Kit (Mac)：应用程序和窗口框架
*   UIKit (iOS)：应用程序和窗口框架
*   核心图形（两者）：绘图
*   核心动画（两者）：Sprite 管理和动画框架

（还有很多很多来自哪里，尤其是在 Mac 上）

所以：

*   您可以使用除 Cocoa 或 Cocoa Touch 之外的框架，但在某种程度上，您必须有*一些*Cocoa/Cocoa Touch 代码，以便您的应用程序与系统对话、接收事件、绘图等。目标 Mac 和/或 iOS 将包含不同质量级别的相关包装器。
*   您可以使用 Objective-C 之外的语言，但您会遇到很多语法上的尴尬，因为大部分 Cocoa 和 Cocoa Touch 都是针对 Objective-C 独特的语法特性（尤其是选择器）而设计的。
*   您可以使用 Xcode 之外的编辑器，甚至可以使用 Xcode 之外的构建系统（例如 make），但 Apple 的 App Store 期望应用程序以特定方式构建（尤其是在代码签名方面），所以除非您不是针对在 App Store 中，任何其他构建系统都必须复制 Xcode 所做的事情，否则会冒着被用户拒绝的风险。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-21T00:38:49.547

一个明显的错误是未能将 Xcode 与其他一切区分开来。Xcode 是您用来编程的工具 - 用于编辑代码、运行代码等。因此，如果您在使用该*工具*时遇到问题（例如，窗口无法正确显示您的代码，或者您在绘图时遇到问题）你的界面等），这是一个 Xcode 问题。

如果你不明白为什么你的*代码不起作用*，你可能遇到了 Objective-C 问题或 Cocoa 问题。但你不一定知道是哪个。

*   如果您的问题根源在于您不知道该语言是如何工作的（例如，您不知道星号的用途，或者该声明不是实例化，或者发送给 nil 的消息不知道，那么这就是一个 Objective-C 问题出错但也不做任何事情）。

*   如果您不了解委托架构或视图控制器的工作原理，那么这是一个 Cocoa 问题。

但我对人们提出问题的方式的经验是，你可能不知道*哪些*是你不知道的。我不是指你个人，我指的是我们所有人。这会使正确提出问题变得困难，因为您不知道您不知道的到底是什么——如果您知道，您就会知道并且您可能不会遇到问题（您会正在解决问题并继续下一步）。

# html - 使用 CodeIgniter 在 HTML 中随机引用

> ID：12509863
> 
> 赞同：1
> 
> 时间：2012-09-20T09:36:27.240
> 
> 标签：html, codeigniter, quotes

我的 HTML 中出现了随机引号（见下图），我终生无法弄清楚如何摆脱它们。我已经将它追溯到我的模型，现在那里有引号。我还压缩了所有代码，仍然有引号。

![在此处输入图像描述](../Images/a8406bdc2ecd1347bfa9e47798e8c6f1.png)

有人遇到过这个bug？？？

这是我的 PHP 代码

```
<ul><?php foreach ($account_media as $value) : ?><li class="span2"></li>​&lt;?php endforeach; ?></ul> 
```

我正在使用 CodeIgniter

![在此处输入图像描述](../Images/ae4f19426c326dbe4cfa73ffda187964.png)

更新：好的，这是不久前的，但我想我会用我的解决方案更新你们所有人。不要从 JSFIDDLE 复制和粘贴真的很难调试（将代码粘贴到文本编辑器中另存为纯文本，然后删除旧代码并替换为纯文本版本）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-20T10:08:07.807

你为什么使用`Inspect Element`而不是`View Source`？显示什么`View Source`？

引号可能显示为`empty`元素检查的指示。或者在您的情况下，它可能表明`<li>`标签是非块并且是分开的。

拜托，人们，读/写正确，我厌倦了看到 ignitOrs。这是 CodeIgnit **E** r。我指出这一点并不是因为我是一些正确的术语怪胎，而是因为它会使您的问题被搜索引擎错误地解析。

元素之间的空格`<li>`是css的问题，参考这篇文章：[Remove Spacing between li](https://stackoverflow.com/questions/1770601/remove-spacing-between-li)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T15:44:16.240

Chrome 通常会这样做。没什么好担心的。

以后查看源代码以获得 HTML 的绝对呈现，而不是检查元素。

请参阅下面的屏幕截图。

![截屏](../Images/42e2bb3696d5fb5c4bd31591233c4509.png)

# git - Git：损坏的松散对象

> ID：12509867
> 
> 赞同：2
> 
> 时间：2012-09-20T09:36:42.567
> 
> 标签：git

我试图将我的`master`分支与另一个名为的分支合并`pull-stage`，但 Git 向我抛出了这个错误：

```
error: inflate: data stream error (invalid distance too far back)
error: corrupt loose object '5a63450f4a0b72abbc1221ccb7d9f9bfef333250'
fatal: loose object 5a63450f4a0b72abbc1221ccb7d9f9bfef333250 (stored in .git/objects/5a/63450f4a0b72abbc1221ccb7d9f9bfef333250) is corrupt 
```

我该如何解决这个问题？

我查看了其他帖子，但没有成功的结果：

*   [如何用从我的文件创建的新对象替换损坏的 Git 对象，这很好](https://stackoverflow.com/questions/2183780/how-to-replace-corrupt-git-objects-with-new-ones-created-from-my-files-which-ar)
*   [Git：“损坏的松散对象”](https://stackoverflow.com/questions/4254389/git-corrupt-loose-object)
*   [损坏的 Git 存储库（数据流错误）](https://stackoverflow.com/questions/9320997/corrupted-git-repository-data-stream-error)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-05-19T15:11:11.350

我最近遇到了同样的错误，在我运行 git 的 virtualbox 来宾崩溃之后。我做了以下事情，它解决了我的具体问题。请在尝试此操作之前备份您的树。

1.  删除松散对象 rm .git/object/5a/63450f4a0b72abbc1221ccb7d9f9bfef333250

2.  编辑logs/refs/head/，在最后一个之前找到commit id。

3.  编辑 refs/head/，并使用旧的提交 ID

这应该允许您回到标准的 git 操作（但最后一次提交将丢失）。

# iphone - Vuforia AR 按钮可以打开另一个视图或应用程序吗？

> ID：12509871
> 
> 赞同：3
> 
> 时间：2012-09-20T09:36:56.203
> 
> 标签：iphone, unity3d, augmented-reality

我正在使用统一和 vuforia 扩展制作应用程序。当应用程序识别图像时，它应该在其上方显示一个按钮，并且当用户按下它时，我想显示一个照片库。有没有办法让这个按钮触发显示另一个 UIView？或者显示另一个应用程序？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-02-20T13:48:18.527

是的，你绝对可以做到这一点。有一些资源可以教你如何创建一个可以启动外部 UIView 的插件。例如：http: [//forum.unity3d.com/threads/56755-Unity-plugin-to-handle-loading-native-Cocoa-UI-s-with-ease](http://forum.unity3d.com/threads/56755-Unity-plugin-to-handle-loading-native-Cocoa-UI-s-with-ease)

此外，您可以使用 Apple 的 URL 方案打开另一个应用程序，如下所述： [https ://developer.apple.com/library/ios/featuredarticles/iPhoneURLScheme_Reference/Introduction/Introduction.html](https://developer.apple.com/library/ios/featuredarticles/iPhoneURLScheme_Reference/Introduction/Introduction.html)

# java - Facelets ui:repeat 标记会破坏 JSF 表单验证

> ID：12509876
> 
> 赞同：0
> 
> 时间：2012-09-20T09:37:05.367
> 
> 标签：java, validation, jsf, facelets

我有以下 JSF 页面（它是在伪代码中输入的，以使其可见）：

```
<table>
    <tr>
        <td><h:inputText id="field1" value="#{Bean.singleField.value}" required="true"/></td>
        <td>
            <ui:repeat value="#{Bean.listOfFields} var="field">
                <h:inputText value="#{field.value}/>
            </ui:repeat>
        </td>
    </tr>
</table> 
```

如果 field1 未填写（因此为空）并且我提交了表单，则表单验证为 false。那很完美。但是我在 ui:repeat 标记内的输入框中输入的所有值在否定验证后都不会恢复。所有字段再次为空！如果我使用“a4j:repeat”，这些值会恢复。ui:repeat 标签有问题吗？

亲切的问候，

约臣

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T09:42:11.460

我正在使用 Mojarra 版本 2.0.3，我刚刚在 JSF Facelets 中发现了这个错误......这是一个错误，在以后的版本中解决了：http: [//java.net/jira/browse/JAVASERVERFACES-1807](http://java.net/jira/browse/JAVASERVERFACES-1807)

# ios - 如何最好地保存相机中的图像以供以后处理？

> ID：12509883
> 
> 赞同：0
> 
> 时间：2012-09-20T09:37:40.690
> 
> 标签：ios, core-graphics, avfoundation

我正在使用`AVCaptureVideoDataOutput`. 我检查了 captureOutput 中的 pixelBuffer：

```
- (void)captureOutput:(AVCaptureOutput *)captureOutput
     didOutputSampleBuffer:(CMSampleBufferRef)sampleBuffer
     fromConnection:(AVCaptureConnection *)connection {

    CVImageBufferRef pixelBuffer = CMSampleBufferGetImageBuffer(sampleBuffer); 
```

如果我在像素缓冲区中找到我想要的东西，那么我想保存这个图像以供以后图像处理。

我看到三个选项，我想知道哪个最好用：

1.  我可以保存`sampleBuffer`或复制它
2.  我可以保存`pixelBuffer`或复制它
3.  我可以制作一个`CGImage`并`pixelBuffer`保存它，然后当我需要进行图像处理时，我可以`CGBitmapContextGetData()`用来取回位图以进行操作。似乎这里有一堆不需要的副本，我可以不用。

哪一种是保存位图以供以后处理的首选方法？我不需要保存位图超过几分钟，即不需要保存到文件系统。如果答案是 1 或 2，那么我可以只保留缓冲区还是需要通过`malloc`and来复制它们`memcpy`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T11:24:12.860

我这样做 3) 但您必须将像素缓冲区复制到新分配的内存中，因为它仅在您处于该回调的短暂时刻有效。我使用该技术每秒抓取 30 帧。

# javascript - 属于实例的对象是否应该与原型保持链接？

> ID：12509885
> 
> 赞同：1
> 
> 时间：2012-09-20T09:37:48.533
> 
> 标签：javascript, prototype

什么更好？

这个实现

```
var Animal = function(){
     this.properties = {};
     for(var key in Animal.prototype.properties) this.properties[key] = Animal.prototype.properties[key];
};
Animal.prototype.properties = {
    name: 'animal'
}; 
```

或者这个

```
var AnimalV2 = function(){
    this.properties = Object.create(AnimalV2.prototype.properties);
};
AnimalV2.prototype.properties = {
    name: 'animalv2'
}; 
```

当我更改原型属性时，它只会影响第二个实现。

```
var dog = new Animal()
var cat = new AnimalV2();

Animal.prototype.properties.name = 'hello world';
AnimalV2.prototype.properties.name = 'hello world';

console.log(dog.properties.name); // 'animal'    
console.log(cat.properties.name); // 'hello world' 
```

正如我们所见，dog.properties 不再与 Animal.prototype.properties 相关联。是性能更好还是代码质量更好？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T21:15:50.780

好吧，在第一种情况下

```
var Animal = function(){
     this.properties = {};
     for(var key in Animal.prototype.properties)
         this.properties[key] = Animal.prototype.properties[key];
};
Animal.prototype.properties = {
     name: 'animal'
}; 
```

您正在遍历所有属性并一一分配它们，因此在 Animal.prototype.properties 中的属性越多，第二个属性就越多：

```
var AnimalV2 = function(){
     this.properties = Object.create(AnimalV2.prototype.properties);
};
AnimalV2.prototype.properties = {
     name: 'animalv2'
}; 
```

您正在创建一个新对象并将其 [[Prototype]] 属性分配给 AnimalV2.prototype.properties，因此无论 AnimalV2.prototype.properties 有多少属性，这只是一个分配。

TL; DR 所以看看性能和优雅，第二个是更好的方法。

对于干净的代码，我不喜欢其中的任何一个，我更喜欢始终在构造函数上拥有属性并保留方法的原型，这对于非 JavaScript 程序员来说很简单。（它也会更快）

```
AnimalV3 = function() {
    this.properties = {
       prop1: 'a',
       prop2: 'b'
    };
} 
```

# java - LinkedList接口的实现

> ID：12509886
> 
> 赞同：0
> 
> 时间：2012-09-20T09:37:52.730
> 
> 标签：java, linked-list

我想使用链表接口添加多个元素.....我的代码是：

```
import java.util.*;

public class LList 
{
      public static void main(String[] args) 
      {
          Node node;

          Random rand = new Random();
          int Threshold = 10;
          long P,D,Du;

          LinkedList<Node> ll = new LinkedList<Node>();

          for(int i =1;i<=Threshold;i++)
          {  
              Calendar c = new GregorianCalendar();
              long m = c.get(GregorianCalendar.SECOND);
              Du = rand.nextInt(4);
              P =   rand.nextInt(10)+1;
              D = Period + m;
                  node = new Node("T"+i, m, Du, P, D);
                          ll.add(node)
              System.out.println("The content of linklist is: " + ll);
              System.out.println("The size of linklist is: " + ll.size());
         } 

      }
    } 
```

//节点类

```
import java.util.LinkedList;

public class Node extends LinkedList
{

     long du;
     long p,Arr,d;
     String task;
     Node next;  

     public Node(String Task,long arr,long dur, long per,long d1)  
     { 
         task=Task;
         Arr = arr;
         du = dur;
         p = per;
         d = dl;
     }  

     public void displayNode()  
     {  
            System.out.print(task+","+Arr+","+du+","+p+","+d+"\n");

     }

} 
```

输出：

链表的内容为：[[],[],[],[],[],[],[],[],[],[]]链表的大小为：10

它不显示值......我实现这个接口错了吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-20T09:43:59.810

您的列表未显示的原因是您没有覆盖 Node 类中的 toString() 接口。

我还想知道您是否意识到您的`Node`类的每个实例实际上都是一个列表。所以每个实例都有一堆元素、一些数据字段和到另一个节点的链接。如果你真的想从头开始实现一个链表，你可能不应该扩展`LinkedList`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T09:46:37.040

`Node`是列表的元素。它不需要扩展`LinkedList`。此外，`toString`在类中覆盖`Node`而不是使用`diaplayNode`.

# python - 如何使用请求库发送 xml 正文？

> ID：12509888
> 
> 赞同：61
> 
> 时间：2012-09-20T09:37:56.430
> 
> 标签：python, python-requests

```
def request():
    #encoded_xml = urllib.urlencode({'XML': read_xml()})
    #encoded_xml = read_xml()
    headers = {'Authorization': AUTH_TOKEN,\
               'developerToken': DEVELOPER_TOKEN,\
               'clientCostumerID': CLIENT_ID}
    content = {'__rdxml': encoded_xml}
    #content = encoded_xml
    #content = {'__rdxml': read_xml2()}
    r = requests.post(URL, data=content,\
        headers=headers)
    return r 
```

这些组合似乎不起作用。

由于某种原因未设置标题。

* * *

## 回答 #1

> 赞同：126
> 
> 时间：2012-09-20T10:17:12.947

只需直接发送 xml 字节：

```
#!/usr/bin/env python2
# -*- coding: utf-8 -*-
import requests

xml = """<?xml version='1.0' encoding='utf-8'?>
<a>б</a>"""
headers = {'Content-Type': 'application/xml'} # set what your server accepts
print requests.post('http://httpbin.org/post', data=xml, headers=headers).text 
```

### 输出

```
{
  "origin": "x.x.x.x",
  "files": {},
  "form": {},
  "url": "http://httpbin.org/post",
  "args": {},
  "headers": {
    "Content-Length": "48",
    "Accept-Encoding": "identity, deflate, compress, gzip",
    "Connection": "keep-alive",
    "Accept": "*/*",
    "User-Agent": "python-requests/0.13.9 CPython/2.7.3 Linux/3.2.0-30-generic",
    "Host": "httpbin.org",
    "Content-Type": "application/xml"
  },
  "json": null,
  "data": "<?xml version='1.0' encoding='utf-8'?>\n<a>\u0431</a>"
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-20T10:08:35.800

传入直接的 XML 而不是字典。

# eclipse - 山狮osx上的eclipse juno erlide运行时设置问题

> ID：12509890
> 
> 赞同：2
> 
> 时间：2012-09-20T09:38:14.900
> 
> 标签：eclipse, macos, erlang, erlide

我有一个新的开发箱（mountain lion osx 10.8.1），我正在尝试使用 erlide 插件设置 eclipse。我安装了不同版本的 erlang，如下所示：

```
$ pwd
/Users/abhinavsingh
abhinav:~ abhinavsingh$ ls Builds/
R14B03  R14B04  R15B01  R15B02 
```

在 下`Eclipse --> Preferences --> Erlang --> Installed Runtime`，我有以下运行时设置：

```
Name: erl1404
Directory: /Users/abhinavsingh/Builds/R14B04/lib/erlang
Version: R14B04 
```

当我切换到 Erlang 透视图时，我可以在里面看到以下日志`erlide.log`：

```
14:51:00,054 F: (ErlangCore.java:77) : Starting CORE Thread[main,6,main]
14:51:00,056 I: (ErlangCoreLogger.java:43) : *** starting Erlide v0.17.2.201209170837 (core=0.17.2.201209170837) *** (MacRoman) 
14:51:00,060 F: (ErlangCore.java:94) : Started CORE
14:51:00,062 F: (ErlideUIPlugin.java:148) : Starting UI Thread[main,6,main]
14:51:00,063 F: (ErlideUIPlugin.java:155) : Started UI
14:51:00,079 F: (RuntimeInfoManager.java:205) : set erlide runtime: erl1404 R14B04 
```

这很好，但现在当我继续尝试创建项目或单击进程列表视图时，`erlide.log`文件被以下日志消息轰炸，使 eclipse 无法使用：

```
14:43:01,564 F: (BackendFactory.java:40) : Create ide backend
14:43:01,616 F: (BackendFactory.java:53) : Create backend 47e3e_abhinavsingh_f3a3af_erlide
14:43:01,618 F: (BackendUtils.java:188) : detected longName=192.168.1.21  shortName=abhinav.local
14:43:01,660 F: (ErlangLaunchDelegate.java:84) : doLaunch runtime erl1404 (erl1404)
14:43:01,661 F: (ErlangLaunchDelegate.java:86) : doLaunch cookie erlide (erlide)
14:43:01,662 I: (GenericBackendData.java:51) : Backend data:run mode,  with attributes::
14:43:01,662 I: (GenericBackendData.java:61) : org.eclipse.debug.ui.ATTR_CONSOLE_ENCODING: ISO-8859-1
14:43:01,663 I: (GenericBackendData.java:61) : *..cookie                     : erlide
14:43:01,663 I: (GenericBackendData.java:61) : *..extra_args                 : 
14:43:01,663 I: (GenericBackendData.java:61) : *..has_backend                : true
14:43:01,664 I: (GenericBackendData.java:61) : *..longName                   : false
14:43:01,664 I: (GenericBackendData.java:61) : *..managed                    : true
14:43:01,665 I: (GenericBackendData.java:61) : *..nodeName                   : 47e3e_abhinavsingh_f3a3af_erlide
14:43:01,665 I: (GenericBackendData.java:61) : *..runtime                    : erl1404
14:43:01,665 I: (GenericBackendData.java:61) : process_factory_id            : org.erlide.core.ertsProcessFactory
14:43:01,666 I: (GenericBackendData.java:66) : ---------------
14:43:01,667 F: (ErlangLaunchDelegate.java:159) : START node :> [/Users/abhinavsingh/Builds/R14B04/lib/erlang/bin/erl, -sname, 47e3e_abhinavsingh_f3a3af_erlide, -setcookie, erlide] *** /Users/abhinavsingh/Downloads/eclipse/Eclipse.app/Contents/MacOS
14:43:01,709 F: (ErlangLaunchDelegate.java:178) : process is running
14:43:01,754 F: (ErtsProcess.java:27) : # create ErtsProcess: 47e3e_abhinavsingh_f3a3af_erlide
14:43:01,756 F: (ErlangLaunchDelegate.java:138) : Started erts: 47e3e_abhinavsingh_f3a3af_erlide >> 47e3e_abhinavsingh_f3a3af_erlide
14:43:01,925 F: (ErlRuntime.java:292) : using cookie 'erlide...'6 (info: 'erlide')
14:43:01,954 F: (Backend.java:240) : 47e3e_abhinavsingh_f3a3af_erlide@abhinav.local: waiting connection to peer...
14:43:02,085 F: (ErlRuntime.java:108) : # ping...47e3e_abhinavsingh_f3a3af_erlide@abhinav.local main
14:43:02,390 F: (ErlRuntime.java:108) : # ping...47e3e_abhinavsingh_f3a3af_erlide@abhinav.local main
14:43:02,704 F: (ErlRuntime.java:108) : # ping...47e3e_abhinavsingh_f3a3af_erlide@abhinav.local main
14:43:03,008 F: (ErlRuntime.java:108) : # 
...
...
...
14:43:17,184 S: (Backend.java:403) : error starting code server for erl1404: timeout in erlang:whereis/1
14:43:17,184 S: (Backend.java:248) : Could not connect to backend! Please check runtime settings.
14:43:17,194 F: (ErlRuntime.java:108) : # ping...47e3e_abhinavsingh_f3a3af_erlide@abhinav.local main
14:43:17,497 F: (ErlRuntime.java:108) : # ping...47e3e_abhinavsingh_f3a3af_erlide@abhinav.local main
14:43:17,800 F: (ErlRuntime.java:108) : # ping...47e3e_abhinavsingh_f3a3af_erlide@abhinav.local main
14:43:18,103 F: (ErlRuntime.java:108) : # 
...
...
...
14:43:47,322 F: (CodeManager.java:221) : loading org.erlide.kernel.builder for Runtime<erl1404 (/Users/abhinavsingh/Builds/R14B04/lib/erlang) R14B04 []>
14:43:47,323 F: (CodeManager.java:113) : loading plugin org.erlide.kernel.builder in erl1404
14:43:47,345 F: (ErlRuntime.java:108) : # ping...47e3e_abhinavsingh_f3a3af_erlide@abhinav.local main
14:43:47,648 F: (ErlRuntime.java:108) : # ping...47e3e_abhinavsingh_f3a3af_erlide@abhinav.local main
14:43:47,952 F: (ErlRuntime.java:108) : # ping...47e3e_abhinavsingh_f3a3af_erlide@abhinav.local main
14:43:48,255 F: (ErlRuntime.java:108) : # 
...
...
...
14:44:02,410 W: (BackendHelper.java:166) : timeout in code:is_sticky/1
org.erlide.jinterface.rpc.RpcTimeoutException: timeout in code:is_sticky/1
    at org.erlide.jinterface.rpc.RpcHelper.getRpcResult(RpcHelper.java:239)
    at org.erlide.jinterface.internal.rpc.RpcFutureImpl.get(RpcFutureImpl.java:55)
    at org.erlide.jinterface.rpc.RpcHelper.rpcCall(RpcHelper.java:107)
    at org.erlide.backend.internal.ErlRuntime.makeCall(ErlRuntime.java:181)
    at org.erlide.backend.internal.Backend.call(Backend.java:200)
    at org.erlide.backend.internal.Backend.call(Backend.java:192)
    at org.erlide.backend.internal.Backend.call(Backend.java:185)
    at org.erlide.backend.BackendHelper.loadBeam(BackendHelper.java:156)
    at org.erlide.backend.internal.CodeManager.loadBeam(CodeManager.java:107)
    at org.erlide.backend.internal.CodeManager.loadPluginCode(CodeManager.java:143)
    at org.erlide.backend.internal.CodeManager.registerBundle(CodeManager.java:223)
    at org.erlide.backend.internal.CodeManager.register(CodeManager.java:83)
    at org.erlide.backend.internal.Backend.registerCodeBundle(Backend.java:458)
    at org.erlide.backend.internal.Backend.initialize(Backend.java:820)
    at org.erlide.backend.internal.BackendFactory.createBackend(BackendFactory.java:77)
    at org.erlide.backend.internal.BackendFactory.createIdeBackend(BackendFactory.java:41)
    at org.erlide.backend.internal.BackendManager.getIdeBackend(BackendManager.java:186)
    at org.erlide.ui.views.processlist.ProcessListView.getBackend(ProcessListView.java:364)
    at org.erlide.ui.views.processlist.ProcessListView$ViewContentProvider.<init>(ProcessListView.java:84)
    at org.erlide.ui.views.processlist.ProcessListView.createPartControl(ProcessListView.java:220)
    at org.eclipse.ui.internal.e4.compatibility.CompatibilityPart.createPartControl(CompatibilityPart.java:129)
    at org.eclipse.ui.internal.e4.compatibility.CompatibilityView.createPartControl(CompatibilityView.java:155)
    at org.eclipse.ui.internal.e4.compatibility.CompatibilityPart.create(CompatibilityPart.java:300)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.eclipse.e4.core.internal.di.MethodRequestor.execute(MethodRequestor.java:56)
    at org.eclipse.e4.core.internal.di.InjectorImpl.processAnnotated(InjectorImpl.java:857)
    at org.eclipse.e4.core.internal.di.InjectorImpl.processAnnotated(InjectorImpl.java:837)
    at org.eclipse.e4.core.internal.di.InjectorImpl.inject(InjectorImpl.java:111)
    at org.eclipse.e4.core.internal.di.InjectorImpl.internalMake(InjectorImpl.java:318)
    at org.eclipse.e4.core.internal.di.InjectorImpl.make(InjectorImpl.java:240)
    at org.eclipse.e4.core.contexts.ContextInjectionFactory.make(ContextInjectionFactory.java:161)
    at org.eclipse.e4.ui.internal.workbench.ReflectionContributionFactory.createFromBundle(ReflectionContributionFactory.java:102)
    at org.eclipse.e4.ui.internal.workbench.ReflectionContributionFactory.doCreate(ReflectionContributionFactory.java:71)
    at org.eclipse.e4.ui.internal.workbench.ReflectionContributionFactory.create(ReflectionContributionFactory.java:53)
    at org.eclipse.e4.ui.workbench.renderers.swt.ContributedPartRenderer.createWidget(ContributedPartRenderer.java:141)
    at org.eclipse.e4.ui.internal.workbench.swt.PartRenderingEngine.createWidget(PartRenderingEngine.java:889)
    at org.eclipse.e4.ui.internal.workbench.swt.PartRenderingEngine.safeCreateGui(PartRenderingEngine.java:623)
    at org.eclipse.e4.ui.internal.workbench.swt.PartRenderingEngine$6.run(PartRenderingEngine.java:511)
    at org.eclipse.core.runtime.SafeRunner.run(SafeRunner.java:42)
    at org.eclipse.e4.ui.internal.workbench.swt.PartRenderingEngine.createGui(PartRenderingEngine.java:496)
    at org.eclipse.e4.ui.workbench.renderers.swt.ElementReferenceRenderer.createWidget(ElementReferenceRenderer.java:74)
    at org.eclipse.e4.ui.internal.workbench.swt.PartRenderingEngine.createWidget(PartRenderingEngine.java:889)
    at org.eclipse.e4.ui.internal.workbench.swt.PartRenderingEngine.safeCreateGui(PartRenderingEngine.java:623)
    at org.eclipse.e4.ui.internal.workbench.swt.PartRenderingEngine.safeCreateGui(PartRenderingEngine.java:725)
    at org.eclipse.e4.ui.internal.workbench.swt.PartRenderingEngine.access$2(PartRenderingEngine.java:696)
    at org.eclipse.e4.ui.internal.workbench.swt.PartRenderingEngine$7.run(PartRenderingEngine.java:690)
    at org.eclipse.core.runtime.SafeRunner.run(SafeRunner.java:42)
    at org.eclipse.e4.ui.internal.workbench.swt.PartRenderingEngine.createGui(PartRenderingEngine.java:675)
    at org.eclipse.e4.ui.workbench.renderers.swt.StackRenderer.showTab(StackRenderer.java:1042)
    at org.eclipse.e4.ui.workbench.renderers.swt.LazyStackRenderer$1.handleEvent(LazyStackRenderer.java:67)
    at org.eclipse.e4.ui.services.internal.events.UIEventHandler$1.run(UIEventHandler.java:41)
    at org.eclipse.swt.widgets.Synchronizer.syncExec(Synchronizer.java:180)
    at org.eclipse.ui.internal.UISynchronizer.syncExec(UISynchronizer.java:150)
    at org.eclipse.swt.widgets.Display.syncExec(Display.java:4605)
    at org.eclipse.e4.ui.internal.workbench.swt.E4Application$1.syncExec(E4Application.java:187)
    at org.eclipse.e4.ui.services.internal.events.UIEventHandler.handleEvent(UIEventHandler.java:38)
    at org.eclipse.equinox.internal.event.EventHandlerWrapper.handleEvent(EventHandlerWrapper.java:197)
    at org.eclipse.equinox.internal.event.EventHandlerTracker.dispatchEvent(EventHandlerTracker.java:197)
    at org.eclipse.equinox.internal.event.EventHandlerTracker.dispatchEvent(EventHandlerTracker.java:1)
    at org.eclipse.osgi.framework.eventmgr.EventManager.dispatchEvent(EventManager.java:230)
    at org.eclipse.osgi.framework.eventmgr.ListenerQueue.dispatchEventSynchronous(ListenerQueue.java:148)
    at org.eclipse.equinox.internal.event.EventAdminImpl.dispatchEvent(EventAdminImpl.java:135)
    at org.eclipse.equinox.internal.event.EventAdminImpl.sendEvent(EventAdminImpl.java:78)
    at org.eclipse.equinox.internal.event.EventComponent.sendEvent(EventComponent.java:39)
    at org.eclipse.e4.ui.services.internal.events.EventBroker.send(EventBroker.java:81)
    at org.eclipse.e4.ui.internal.workbench.UIEventPublisher.notifyChanged(UIEventPublisher.java:57)
    at org.eclipse.emf.common.notify.impl.BasicNotifierImpl.eNotify(BasicNotifierImpl.java:374)
    at org.eclipse.e4.ui.model.application.ui.impl.ElementContainerImpl.setSelectedElement(ElementContainerImpl.java:171)
    at org.eclipse.e4.ui.workbench.renderers.swt.StackRenderer$7.widgetSelected(StackRenderer.java:848)
    at org.eclipse.swt.widgets.TypedListener.handleEvent(TypedListener.java:248)
    at org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java:84)
    at org.eclipse.swt.widgets.Display.sendEvent(Display.java:4134)
    at org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:1458)
    at org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:1481)
    at org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:1466)
    at org.eclipse.swt.widgets.Widget.notifyListeners(Widget.java:1271)
    at org.eclipse.swt.custom.CTabFolder.setSelection(CTabFolder.java:3023)
    at org.eclipse.swt.custom.CTabFolder.onMouse(CTabFolder.java:1730)
    at org.eclipse.swt.custom.CTabFolder$1.handleEvent(CTabFolder.java:270)
    at org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java:84)
    at org.eclipse.swt.widgets.Display.sendEvent(Display.java:4134)
    at org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:1458)
    at org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:1481)
    at org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:1466)
    at org.eclipse.swt.widgets.Widget.notifyListeners(Widget.java:1271)
    at org.eclipse.swt.widgets.Display.runDeferredEvents(Display.java:3980)
    at org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:3619)
    at org.eclipse.e4.ui.internal.workbench.swt.PartRenderingEngine$9.run(PartRenderingEngine.java:1022)
    at org.eclipse.core.databinding.observable.Realm.runWithDefault(Realm.java:332)
    at org.eclipse.e4.ui.internal.workbench.swt.PartRenderingEngine.run(PartRenderingEngine.java:916)
    at org.eclipse.e4.ui.internal.workbench.E4Workbench.createAndRunUI(E4Workbench.java:86)
    at org.eclipse.ui.internal.Workbench$5.run(Workbench.java:585)
    at org.eclipse.core.databinding.observable.Realm.runWithDefault(Realm.java:332)
    at org.eclipse.ui.internal.Workbench.createAndRunWorkbench(Workbench.java:540)
    at org.eclipse.ui.PlatformUI.createAndRunWorkbench(PlatformUI.java:149)
    at org.eclipse.ui.internal.ide.application.IDEApplication.start(IDEApplication.java:124)
    at org.eclipse.equinox.internal.app.EclipseAppHandle.run(EclipseAppHandle.java:196)
    at org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.runApplication(EclipseAppLauncher.java:110)
    at org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.start(EclipseAppLauncher.java:79)
    at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:353)
    at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:180)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.eclipse.equinox.launcher.Main.invokeFramework(Main.java:629)
    at org.eclipse.equinox.launcher.Main.basicRun(Main.java:584)
    at org.eclipse.equinox.launcher.Main.run(Main.java:1438)
14:44:02,414 S: (CodeManager.java:146) : Could not load erlide_builder
14:44:02,422 F: (ErlRuntime.java:108) : # ping...47e3e_abhinavsingh_f3a3af_erlide@abhinav.local main
14:44:02,726 F: (ErlRuntime.java:108) : # ping...47e3e_abhinavsingh_f3a3af_erlide@abhinav.local main
14:44:03,029 F: (ErlRuntime.java:108) : # ping...47e3e_abhinavsingh_f3a3af_erlide@abhinav.local main
14:44:03,332 F: (ErlRuntime.java:108) : # ping...47e3e_abhinavsingh_f3a3af_erlide@abhinav.local main
14:44:03,636 F: (ErlRuntime.java:108) : # 
...
...
... 
```

虽然这一切都在进行，但我试图检查我的开发箱上正在运行哪些 erlang 节点，我发现了这一点：

```
$ ps aux | grep erl
abhinavsingh   85175   0.2  0.0  2432768    616 s004  R+    2:44PM   0:00.00 grep erl
abhinavsingh   85164   0.1  0.3  2495764  12052   ??  S     2:43PM   0:00.40 /Users/abhinavsingh/Builds/R14B04/lib/erlang/erts-5.8.5/bin/beam.smp -- -root /Users/abhinavsingh/Builds/R14B04/lib/erlang -progname erl -- -home /Users/abhinavsingh -- -sname 47e3e_abhinavsingh_f3a3af_erlide -setcookie erlide
abhinavsingh   76967   0.0  0.0  2432804    368   ??  S     4:31AM   0:00.74 /Users/abhinavsingh/Builds/R14B04/lib/erlang/erts-5.8.5/bin/epmd -daemon
abhinavsingh   85111   0.0  0.0  2432756    516 s003  S+    2:36PM   0:00.01 tail -f erlide.log 
```

Now I am not sure what can be done here to get this up and running. I was planning to have multiple erlang runtimes inside erlide since I will need different run configuration for my different projects. Unfortunately, I am stuck here at the very first step.

Any help, pointers will be greatly appreciated.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T11:52:07.183

Please try the new beta version from [http://erlide.org/update_beta](http://erlide.org/update_beta), this problem should be fixed.

regards, Vlad

# objective-c - Objective C - HID 设备的热键

> ID：12509898
> 
> 赞同：0
> 
> 时间：2012-09-20T09:38:42.987
> 
> 标签：objective-c, usb, hid, magnetic-cards

所有，在此先感谢您。我目前正在用 Objective C 为 OSX 编写一个迷你应用程序，它从读卡器读取并针对 API 运行。

读卡器充当 HID 设备（即键盘），只需键入即可。我在Objective C 中设置了Register HotKeys 来收听击键（即% 符号开始，; 结束，加上0-9 数字）。但是，这会在所有键盘上收听，这意味着 %, ; 和 0-9 键是没用的。

在 Objective C 中是否有一种方法可以确定注册热键时使用的键盘，或者有什么方法可以使它工作？

干杯，马特

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T16:02:18.890

您最好的选择是使用 IOHIDManager API [1] 并订阅该设备的事件。您可以将其设置为查找设备的 VendorID 或 ProductID，然后为每个单独的设备提供单独的响应。

[1] [http://developer.apple.com/library/mac/#technotes/tn2187/_index.html](http://developer.apple.com/library/mac/#technotes/tn2187/_index.html)

# html - 在 Metro 应用程序中使用 AppBar 加载 Listview 时出现问题？

> ID：12509904
> 
> 赞同：0
> 
> 时间：2012-09-20T09:39:15.383
> 
> 标签：html, microsoft-metro, winjs, appbar

我正在尝试在 AppBarCommand 按钮单击下加载 listview。实际上 listview 正在加载并且单击 listview-item 将导航到另一个页面很好但这里的问题是如果我单击 AppBarCommand 两次（或更多次）意味着尝试加载 listview 两次或三次，它的加载很好。加载列表视图后，当我们单击列表视图项目本身时，应用程序正在终止，它没有导航到其他页面？谁能帮助我在我的应用程序中哪里出错？

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-30T19:59:26.120

尝试检查应用程序的功能，以查看您尝试使用的资源是否确实从功能中启用。例如 - 如果您的列表视图与从文档库访问数据的数据源绑定，则启用文档库。

# javascript - 如何设置使用 jQuery 变量指定的 DIV 的文本？

> ID：12509905
> 
> 赞同：0
> 
> 时间：2012-09-20T09:39:17.450
> 
> 标签：javascript, jquery

我有以下内容：

```
var oLink = {
        $modal: '',
        $message: ''
    }

oLink.$message = oLink.$modal.find('.message'); 
```

我试图像这样设置这个变量的文本：

```
oLink.$message.Text("Contacting Server, please wait ... "); 
```

但即使调试器说 oLink.$message 是一个 HTMLDIV 元素，它也会给出一条错误消息说未定义。.message 类的元素是 DIV。如何在 DIV 中设置文本？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T09:41:13.930

应该`.text()`不是`.Text()`。

另外，你确定`oLink.$message`真的指的是一个div吗？

如果您执行`console.log(oLink.$message)`操作，您会在控制台中看到什么？（您需要使用安装了 firebug 插件的 Firefox 来执行此操作）。

# jquery - Jquery通过单个类名隐藏/显示多个划分

> ID：12509906
> 
> 赞同：0
> 
> 时间：2012-09-20T09:39:18.647
> 
> 标签：jquery, html

HTML

```
 <p class="heading"></p>
<div id="div1" class="targetDiv">content1</div>
 <p class="heading"></p>
<div id="div2" class="targetDiv">content2</div>
 <p class="heading"></p>
<div id="div3" class="targetDiv">content3</div>
 <p class="heading"></p>
<div id="div4" class="targetDiv">content4</div>

<script type="text/javascript">
    jQuery(document).ready(function() {
              jQuery(".targetDiv").hide();
              //toggle the componenet 
              jQuery(".heading").click(function()
              {
                jQuery(this).next(".targetDiv").slideToggle(500);

              });
            });
    </script> 
```

在这里，我可以在单击标题时显示一个 div，但是当我要打开另一个时，它必须被隐藏。事实上，当我打开一个 div 时，其他必须隐藏。

请帮助我...

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T09:42:36.667

这应该可以解决问题：

```
<script type="text/javascript">
    jQuery(document).ready(function() {
              jQuery(".targetDiv").hide();
              //toggle the componenet 
              jQuery(".heading").click(function()
              {
                jQuery(".targetDiv").slideUp();
                jQuery(this).next(".targetDiv").slideToggle(500);

              });
            });
</script> 
```

一个小解释：它首先隐藏所有 div，然后打开一个。我应该做得那么快，你将无法看到它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T09:44:02.243

```
$(".heading").click(function() {                        
    $('.targetDiv:visible').hide();  /* reference to the single previous
                                      *  opened tab and hide it 
                                      */
    $(this).next(".targetDiv").slideToggle(500);
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-20T09:44:50.613

你的意思是这样的：

[http://jsfiddle.net/Et4gh/1/](http://jsfiddle.net/Et4gh/1/)

只需添加 jQuery(".targetDiv").hide(); 也进入点击功能。

# c# - 在 C# 和 Xaml 中以编程方式单击 Windows 8 按钮

> ID：12509908
> 
> 赞同：2
> 
> 时间：2012-09-20T09:39:24.047
> 
> 标签：c#, xaml, button, windows-8, .net-4.5

我想在 C# xaml 中以编程方式单击按钮。我发现没有像 PerformClick 这样的方法。还有什么可以替代它。

实际上，我有 10 个带有 x:Name 的按钮，例如 btn1、btn2、btn3 等...我有一个从 1 到 10 的数字，基于该数字我需要单击这些按钮。我打算通过使用来获得控制权

```
ParentControl.FindName('btn' + number) 
```

然后从中触发事件。但由于 Windows 8 C# 中没有 PerformClick 方法，因此我需要一个替代方法。

举办活动 ![在此处输入图像描述](../Images/c27d451994bd89f38d4b625fbd5c2bf8.png)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2014-04-05T19:08:07.503

这是如何做到的......

假设您在`XAML`文件中定义了此按钮：

```
<Button Grid.Column="0" Grid.Row="0" x:Name="DefaultSnooze" Content="Default Snooze" Click="SendToast_Click" Height="34" Width="134"/> 
```

然后在您希望`Click`以编程方式触发事件处理程序代码的代码后面执行此操作：

```
ButtonAutomationPeer peer = new ButtonAutomationPeer(DefaultSnooze);

IInvokeProvider invokeProv = peer.GetPattern(PatternInterface.Invoke) as IInvokeProvider;
invokeProv.Invoke(); 
```

我现在对其进行了测试，效果很好。:)

* * *

来源：[如何以编程方式单击按钮](http://joshsmithonwpf.wordpress.com/2007/03/09/how-to-programmatically-click-a-button/)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-20T09:44:58.210

您应该能够使用：

```
RaiseEvent(new RoutedEventArgs(Button.ClickEvent, myButton)); 
```

在 XAML 视图的代码隐藏中。

`RaiseEvent`可用于任何 UIElement 派生类。

# android - Phonegap中的对话框？

> ID：12509910
> 
> 赞同：0
> 
> 时间：2012-09-20T09:39:25.557
> 
> 标签：android, cordova

我是phonegap的新手。我想在应用程序中显示对话框。如何显示对话框。我已经搜索了教程，但我找不到。请任何人提供指导或教程以显示对话框。提前致谢... .

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-20T09:41:23.110

采用

```
alert("on device ready!!!!"); 
```

或者

```
navigator.notification.alert("PhoneGap is working"); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-26T10:32:06.533

您可以使用 Fancybox javascript 来执行此操作：

[花式盒 javascript](http://fancybox.net)

您可以创建包含所需内容的对话框。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-16T01:48:22.323

我使用绝对定位的 <div> 制作了对话框，它根据对话框是打开还是关闭来显示或隐藏。

**在我的 index.html**

```
<div id="hellodlg" class="dialog hidden">
Hello
<button class="closedlg">close</button>
</div>
<button class="openclosedlg">open/close</button> 
```

**很有型**

```
<style>
.dialog {
position:absolute;
left:50%; // position in the middle
margin-left: -5em; // move left so that dialog is in the middle
top: 2em;
width: 10em;
height:10em;
background:blue;
border: 1px solid black:
}

.hidden {
display:none;
}
</style> 
```

**在使用 jquery 的脚本中[（请参阅如何在没有 jquery 的情况下添加类）](https://stackoverflow.com/questions/507138/how-do-i-add-a-class-to-a-given-element)**

```
<script>
// open dialog
$(".openclosedlg").click(function() { $(".dialog").toggleClass("hidden");});

// listen for button
$(".closedlg").click(function() { $(".dialog").addClass("hidden");});
</script> 
```

[这是一个完整的例子](http://www.creabros.com/files/test.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-21T10:11:51.363

使用[JQM](http://jquerymobile.com)

作为一个最适合phonegap伴侣的设计框架。

# database - 在数据库中执行聚合/非规范化的最佳方法是什么？

> ID：12509914
> 
> 赞同：1
> 
> 时间：2012-09-20T09:39:37.670
> 
> 标签：database, aggregation, denormalization

我们有一个数据库来存储点击次数、查看次数和达到的目标。正如您可以猜到的那样，数据库中的点击量达到了数百万，因此我们开始汇总数据以获得更快的统计数据。此时我们删除所有记录并在聚合表中写入新记录（您可以正确猜到您的 mysql 键正在迅速增加），但这是聚合我们的统计数据而不会出现任何错误的最简单方法。

我在互联网上搜索了数据库聚合。就像如何存储/非规范化数据一样，您可以快速选择正确的数据，而无需尊重多个表。但我没有找到答案。

我还猜测 mysql 不是存储聚合数据的正确数据库，因为聚合数据会快速增长并且可以从头到尾选择（比如选择一整年的统计数据）。我的结论对吗？如果是这样，你会推荐我什么数据库？

我也考虑将数据拆分到多个表中以获得多种解决方案，但我不确定这是否明智。

我的问题是：

*   您使用什么聚合技术来保持聚合表正确？
*   什么数据库最适合存储聚合？
*   我应该在多个表上拆分聚合吗？还是我应该制作一个可以处理多种类型数据请求的通用表？
*   你如何处理速度问题？
*   数据聚合有不同的名称吗？

我很抱歉这个冗长的问题:)。我搜索了 SO 和互联网，并没有找到关于这些问题的任何好的答案。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-09-20T09:46:06.787

> 什么数据库最适合存储聚合？

如果我理解你对“聚合”的定义，我会说你正在删除所有关系的东西，所以你的目标可能是一些 noSQL 解决方案。

> 我应该在多个表上拆分聚合吗？或者我应该制作一个可以>处理多种类型的数据请求的通用表？

不能说，看你想要什么。您正在做的是去规范化，以便您可以更快地获取数据。但是如果你去规范化太多，你就找不到正确的数据。因此，对于每种情况，它确实是不同的。

> 你如何处理速度问题？

再一次，不可能说。大致：找出导致它们的原因，并解决问题。

> 数据聚合有不同的名称吗？

看起来您正在构建某种“数据仓库”？有关更多信息，请参阅随机互联网（例如[http://en.wikipedia.org/wiki/Data_warehouse](http://en.wikipedia.org/wiki/Data_warehouse)）。

# c# - Asp.Net MVC4'对象引用未设置为对象的实例'

> ID：12509922
> 
> 赞同：0
> 
> 时间：2012-09-20T09:40:04.697
> 
> 标签：c#, asp.net, .net, asp.net-mvc, asp.net-mvc-3

我目前在 asp.net mvc4 工作。并实施用户资料信息。我的控制器即**HomeController**包含；

```
public ActionResult Resume()
{
    using (ProfileInfo profile = new ProfileInfo())
    {
        return View(profile.ProfileGetInfoForCurrentUser());
    }
} 
```

我的**profileinfo**类包含一个返回类型为“ResumeViewModel”的方法；

```
public ResumeViewModel ProfileGetInfoForCurrentUser()
{
    ProfileBase profile = ProfileBase.Create(Membership.GetUser().UserName);
    ResumeViewModel resume = new ResumeViewModel();
    resume.Email = Membership.GetUser().Email.ToString();
    resume.FullName = Membership.GetUser().UserName;
    return resume;

} 
```

现在我的**ResumeViewModel**看起来像这样；

```
public class ResumeViewModel
{
    public string FullName { get; set; }
    public string Email { get; set; }
} 
```

虽然我的观点是强烈的`'@model PortfolioMVC4.Models.ResumeViewModel'`. 但是，当我运行它时，出现以下错误；

```
Object reference not set to an instance of an object. 
  Description: An unhandled exception occurred during the execution of the current web request. Please review the stack trace for more information about the error and where it originated in the code. 

 Exception Details: System.NullReferenceException: Object reference not set to an instance of an object.
{
Line 14:             ProfileBase profile = ProfileBase.Create(Membership.GetUser().UserName);
Line 15:             ResumeViewModel resume = new ResumeViewModel();
Line 16:             resume.Email = Membership.GetUser().Email.ToString();
Line 17:             resume.FullName = Membership.GetUser().UserName; 
```

**我在第 15 行遇到错误；**这基本上是 ProfileGetInfoForCurrentUser 方法中存在的代码（如上所示）。我不知道该怎么办？对此的任何帮助都是值得赞赏的；

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-20T09:48:44.063

看起来 Email 属性为空，因此您不能对其调用`.ToString`方法。顺便说一句，该[`MembershipUser.Email`](http://msdn.microsoft.com/en-us/library/system.web.security.membershipuser.email.aspx)属性已经是一个字符串，因此`.ToString()`在其上调用 a 几乎没有任何意义。

此外，我建议您`Membership.GetUser()`只调用一次该方法并将结果缓存到局部变量中，以避免多次请求冲击您的数据库：

```
public ResumeViewModel ProfileGetInfoForCurrentUser()
{
    var user = Membership.GetUser();
    ProfileBase profile = ProfileBase.Create(user.UserName);
    ResumeViewModel resume = new ResumeViewModel();
    resume.Email = user.Email;
    resume.FullName = user.UserName;
    return resume;
} 
```

顺便说一句，您似乎在声明一些`profile`变量而没有用它做很多有用的事情。你确定真的有必要吗？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-20T09:44:38.390

可能`Membership.GetUser()`已返回 null - 客户端是否经过身份验证？

也许您需要`[Authorize]`在控制器上放置一个属性。

调试器是你的朋友！

# android - 在 google play 上部署与不安全服务通信的应用程序

> ID：12509924
> 
> 赞同：0
> 
> 时间：2012-09-20T09:40:14.890
> 
> 标签：android, connection, publishing, google-play

我有一个 android 应用程序，它通过普通的 tcp/ip（无 http）连接与我的服务器进行通信。服务器面向处理许多同时的客户端连接，是用 apache mina 编写的。android 客户端和服务器之间的通信在某些情况下是不安全的。我只保护包含个人信息的消息，其他消息是不安全的。但更重要的是 - 我使用我自己的安全方法 - 而不是 ssl。我正在制作 RSA + AES 密码和公钥交换。现在我开始担心，当我部署应用程序时，它会被 google play 拒绝，因为它会与其他服务建立不安全的网络连接。您对此有何看法，也许我应该购买证书，并尝试通过支持 ssl 的 tcp 进行通信？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T11:44:52.737

根据[Google Play 开发者计划政策](http://play.google.com/about/developer-content-policy.html)，只有关于个人数据的规则：

> **个人和机密信息：**我们不允许未经授权发布或披露人们的私人和机密信息，例如信用卡号、社会保险号、驾照号和其他驾照号码，或任何其他不可公开访问的信息。

正如我所看到的，与第三方服务器的不安全连接应该没有任何问题。

# java - 应用程序已停止运行 Android

> ID：12509930
> 
> 赞同：0
> 
> 时间：2012-09-20T09:40:42.210
> 
> 标签：java, android, xml

我正在尝试使用[此处](http://www.youtube.com/watch?v=e-ymoagI0MM)的教程编写一个简单的登录页面。这是我的 Java 页面：

```
public class Main extends Activity implements OnClickListener{
    EditText etUser, etPass;
    Button bLogin;

    //Create string variables that will have the input assigned to them
    String username, password;

    //Create a HTTPClient as the form container
    HttpClient httpclient;

    //Use HTTP POST method
    HttpPost httppost;

    //Create an array list for the input data to be sent
    ArrayList<NameValuePair> nameValuePairs;

    //Create a HTTP Response and HTTP Entity
    HttpResponse response;
    HttpEntity entity;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        initialise();
    }

    private void initialise() {
        // TODO Auto-generated method stub
        etUser = (EditText) findViewById(R.id.username);
        etPass = (EditText) findViewById(R.id.password);
        bLogin = (Button) findViewById(R.id.login_button);
        //Now to set an onClickListener
        bLogin.setOnClickListener(this);
    }

    @Override
    public void onClick(View v) {
        // This is where we will be working now

        //Create new default HTTPClient
        httpclient = new DefaultHttpClient();

        //Create new HTTP POST with URL to php file as parameter
        httppost = new HttpPost("http://10.0.2.2:8080/logine/work.php");

        //Assign input text to strings
        username = etUser.getText().toString();
        password = etPass.getText().toString();

        //place them in an array list
        nameValuePairs.add(new BasicNameValuePair("username", username));
        nameValuePairs.add(new BasicNameValuePair("password", password));

        //Next block of code needs to be surrounded by try/catch block for it to work
        try {
            //Add array list to http post
            httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs));

            //assign executed form container to response
            response = httpclient.execute(httppost);

            //check status code, need to check status code 200
            if(response.getStatusLine().getStatusCode()== 200){

                //assign response entity to http entity
                entity = response.getEntity();

                //check if entity is not null
                if(entity != null){

                    //Create new input stream with received data assigned
                    InputStream instream = entity.getContent();

                    //Create new JSON Object. assign converted data as parameter.
                    JSONObject jsonResponse = new JSONObject(convertStreamToString(instream));

                    //assign json responses to local strings
                    String retUser = jsonResponse.getString("user");//mySQL table field
                    String retPass = jsonResponse.getString("pass");

                }

            }

        } catch(Exception e){
            e.printStackTrace();
        }

    }//END onClick()

    private static String convertStreamToString(InputStream is) {
        /*
         * To convert the InputStream to String we use the BufferedReader.readLine()
         * method. We iterate until the BufferedReader return null which means
         * there's no more data to read. Each line will appended to a StringBuilder
         * and returned as String.
         */
        BufferedReader reader = new BufferedReader(new InputStreamReader(is));
        StringBuilder sb = new StringBuilder();

        String line = null;
        try {
            while ((line = reader.readLine()) != null) {
                sb.append(line + "\n");
            }
        } catch (IOException e) {
            e.printStackTrace();
        } finally {
            try {
                is.close();
            } catch (IOException e) {
                e.printStackTrace();
            }
        }
        return sb.toString();
    }//END convertStreamToString()

} 
```

这是 Logcat Stacktrace

```
 java.lang.NullPointerException
        at com.Application.Main.onClick(Main.java:79)
        at android.view.View.performClick(View.java:2485)
        at android.view.View$PerformClick.run(View.java:9080)
        at android.os.Handler.handleCallback(Handler.java:587)
        at android.os.Handler.dispatchMessage(Handler.java:92)
        at android.os.Looper.loop(Looper.java:123)
        at android.app.ActivityThread.main(ActivityThread.java:3683)
        at java.lang.reflect.Method.invokeNative(Native Method)
        at java.lang.reflect.Method.invoke(Method.java:507)
        at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
        at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
        at dalvik.system.NativeStart.main(Native Method)
09-20 15:23:58.258: ERROR/InputDispatcher(60): channel '40725a60 com.Application/com.Application.Main (server)' ~ Consumer closed input channel or an error occurred.  events=0x8
09-20 15:23:58.258: ERROR/InputDispatcher(60): channel '40725a60 com.Application/com.Application.Main (server)' ~ Channel is unrecoverably broken and will be disposed! 
```

我在做什么错。当然我不太了解 java.BTW 我的 AVD 是 2.3.3

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T09:45:12.983

你没有初始化对象`nameValuePairs`......

```
nameValuePairs = new ArrayList<NameValuePair>(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T09:48:43.137

你还没有初始化nameValuePairs。

```
ArrayList<NameValuePair> nameValuePairs; 
```

它具有空值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-20T10:13:53.630

**-**你只声明了类型的`Object Reference ArrayList`变量。`nameValuePairs``NameValuePair`

**-**因为它是在 中声明的`Class scope`，并且`Object`它的默认值是`null`.

**-**你**必须初始化它**......

# javascript - 来自 javascript 的 AS3 文件参考

> ID：12509933
> 
> 赞同：0
> 
> 时间：2012-09-20T09:41:00.927
> 
> 标签：javascript, actionscript-3, externalinterface

是否可以使用 JavaScript 中的 Actionscript 3 文件引用。我需要编写一个应用程序，该应用程序将使用 javascript 来调用 fileReference 的浏览方法。

在我在代码中投入太多时间之前，我想确保这是可能的。我不知道那里是否存在一些安全问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T09:56:53.080

您可以从 Javascript 调用您想要在 AS3 中定义的任何内容。问题是，您将无法`FileReference`在 Javascript 中直接使用该对象，但您可以在 Actionscript 中编写您需要的所有方法，然后在需要时调用它们。所以 AS3 就像一个数据提供者。

如果您需要一些代码示例，请告诉我。如果您是新手，请查看[ExternalInterface](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/external/ExternalInterface.html)。

编辑：

那么你想从 Flash 端还是从 JS 加载 .mp3 文件？如果你想使用 a`FileReference`我猜它来自 Flash。无论如何，Flash 需要将 .mp3 作为`ByteArray`指向它的链接或链接，以便它可以加载和播放声音。

基本上你需要把所有东西都做成 Flash 的一面。我的意思是实际音量、播放/暂停和其他功能应该在 Flash 端实现，但由 Javascript 控制。

您可以为 Flash 中的方法添加回调，以便之后您可以从 javascript 执行以下操作：

```
flashObject.playMusic(); 
```

在 Flash 方面，您需要编写如下内容：

```
if(ExternalInterface.available) {
    ExternalInterface.addCallback("playMusic", playMusic);
}

function playMusic():void {
    musicObject.play();
} 
```

所以我们在这里要做的是，给 Flash 对象添加一个回调，以便`playMusic`可以从 Javascript 调用该方法，然后定义我们播放声音对象的实际方法。您可以像往常一样传递和获取参数。

请记住将`allowScriptAccess`HTML 中 Flash 对象的参数设置为`always`.

# android - 从多个微调器获取数据？

> ID：12509938
> 
> 赞同：1
> 
> 时间：2012-09-20T09:41:16.723
> 
> 标签：android, android-spinner

嗨，这个问题让我很震惊。我有许多动态创建的微调器。请帮助我从这些微调器中获取数据。

单击添加按钮时，应从所有微调器获取数据。

按钮点击代码

```
btnSave.setOnClickListener(new OnClickListener() {

        public void onClick(View v) {  
            String[] strings = new String[allEds.size()];
            String[] stringSpinns = new String[allSpns.size()];
            for(int i=0; i < allEds.size(); i++){
                strings[i] = allEds.get(i).getText().toString();

              try
                {
                        json.put("Name", strings[i]);
                        //json.put("Description", descOfFolder);
                        Log.w("ANDROID DYNAMIC VIEWS:", "View Id: " + json);
                }
                catch (JSONException e)
                {
                        // TODO Auto-generated catch block
                        e.printStackTrace();
                }

            }

        }
    });
} 
```

使用此代码动态添加的微调器

```
public void addSpinner() {

    LinearLayout rAlign = (LinearLayout)findViewById(R.id.lId);
    List<String> list = new ArrayList<String>();
    list.add("Net Banking Id");
    list.add("Net Banking password");
    list.add("Account Number");
    ArrayAdapter<String> dataAdapter = new ArrayAdapter<String>(this,
        android.R.layout.simple_spinner_item, list);
    Log.w("ANDROID DYNAMIC VIEWS:", "View Id: " + dataAdapter);       
    LinearLayout spinnerHolder = new LinearLayout(getApplicationContext());
    spinnerHolder.setOrientation(LinearLayout.HORIZONTAL);
    spinnerHolder.setLayoutParams(
            new LinearLayout.LayoutParams(
                LinearLayout.LayoutParams.FILL_PARENT, 
                LinearLayout.LayoutParams.WRAP_CONTENT, 1f));
        Spinner newSpinner = new Spinner(getApplicationContext());
        allSpns.add(newSpinner);
        newSpinner.setLayoutParams(
            new Spinner.LayoutParams(ViewGroup.LayoutParams.FILL_PARENT, 
                ViewGroup.LayoutParams.WRAP_CONTENT));
        newSpinner.setAdapter(dataAdapter);
        rAlign.addView(spinnerHolder);
        spinnerHolder.addView(newSpinner);
        Log.w("ANDROID DYNAMIC VIEWS:", "View Id: " + allSpns);

  } 
```

创建列表以跟踪微调器的数量并打开循环以获取数据。

```
String[] stringSpinns = new String[allSpns.size()]; 
```

但是对如何获取数据感到困惑......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-03-17T08:50:54.530

它有一个简单的解决方案。

```
@Override
public void onItemSelected(AdapterView<?> parent, View view, int position, long id)
{
    switch(your spinner id)
    {
        case spinnerid:
        Toast.makeText(your context,parent.getItemAtPosition(position).toString()+"  Selected", Toast.LENGTH_LONG).show();
    }
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-20T09:49:05.557

如果问题是微调器的数量和处理它们，您可以制作一个微调器数组，然后使用另一个数组中的循环检索数据。**或者**，您可以使用一个恒定的 id 数组并找到您的微调器`findViewById(yourSpinnerId)`，然后使用此微调器来获取所选项目。要制作一个恒定的整数数组，您可能需要查看[此处](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/Collections.html#unmodifiableList%28java.util.List%29)或[此处](http://guava-libraries.googlecode.com/svn-history/r12/trunk/javadoc/com/google/common/collect/ImmutableList.html)

如果您关心微调器的选定值，请使用

```
mySpinner.getItemAtPosition(mySpinner.getSelectedItemPosition()) 
```

此外，您可以使用以下方法 : , 或`getSelectedItem()`Documentation `getSelectedItemPosition()`for these are [here](http://developer.android.com/guide/topics/ui/controls/spinner.html)和[here](http://developer.android.com/reference/android/widget/Spinner.html)`getSelectedItemId()``getSelectedView()`

# android - 使用 Eclipse 安装 Open-CV 时出错

> ID：12509941
> 
> 赞同：2
> 
> 时间：2012-09-20T09:41:19.547
> 
> 标签：android

构建过程中发生错误。在项目“org.opencv.samples.tutorial3.Sample3Native”上运行构建器“CDT Builder”时出错。构建项目 org.opencv.samples.tutorial3.Sample3Native 配置的内部错误 默认 java.lang.NullPointerException 构建项目 org.opencv.samples.tutorial3.Sample3Native 配置的内部错误 默认 java.lang.NullPointerException

帮我

# android - 从 Service Android 调用对话框时出错

> ID：12509942
> 
> 赞同：0
> 
> 时间：2012-09-20T09:41:21.367
> 
> 标签：android, service, dialog

当我尝试打开对话框时，出现以下 android 异常。

```
09-20 09:27:46.119: W/System.err(558): android.view.WindowManager$BadTokenException: Unable to add window -- token null is not for an application
09-20 09:27:46.139: W/System.err(558):  at android.view.ViewRoot.setView(ViewRoot.java:440)
09-20 09:27:46.139: W/System.err(558):  at android.view.WindowManagerImpl.addView(WindowManagerImpl.java:181)
09-20 09:27:46.139: W/System.err(558):  at android.view.WindowManagerImpl.addView(WindowManagerImpl.java:95)
09-20 09:27:46.139: W/System.err(558):  at android.app.Dialog.show(Dialog.java:269)
09-20 09:27:46.139: W/System.err(558):  at android.app.AlertDialog$Builder.show(AlertDialog.java:907) 
```

我正在从 Service Android 调用对话框，并尝试了以下代码：

```
handler.post(new Runnable() {
    public void run() {                               
        try{
            new AlertDialog.Builder(getApplicationContext()).setTitle("Alert!").setMessage("SIMPLE MESSAGE!").setPositiveButton("OK", new DialogInterface.OnClickListener() {
                public void onClick(DialogInterface dialog, int which) { 

                }
            }).show();
        } catch(Exception ex){
            ex.printStackTrace();
        }
    }
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T11:03:06.457

您无法从服务中打开对话框。Dialog 是一个 UI 组件，它需要与一个 UI 元素（Activity）相关联。您可以做的是从您的服务中启动一个“看起来像”对话框的活动。您可以为 Activity 的 UI 提供一个“DialogTheme”，使其看起来像一个标准的 Andrdoid 对话框。只需在 StackOverflow 中搜索“活动对话框主题”即可。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T09:44:09.770

我猜问题出在`getApplicationContext()`它可能返回null，传递正确的上下文......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-08-06T03:20:58.033

第 1 步：创建类 MyReciever：

```
import android.content.BroadcastReceiver;
import android.content.Context;
import android.content.Intent;

public class MyReceiver extends BroadcastReceiver {
    public MyReceiver() {
    }

    @Override
    public void onReceive(Context context, Intent intent) {
        if(intent.getAction().equalsIgnoreCase(Intent.ACTION_BOOT_COMPLETED)){
            Intent serviceIntent = new Intent(context, MyService.class);
            context.startService(serviceIntent);
        }

        Intent serviceIntent = new Intent(context, MyService.class);
        context.startService(serviceIntent);
    }
} 
```

第 2 步：创建类 MyService

```
import android.app.PendingIntent;
import android.app.Service;
import android.content.Context;
import android.content.Intent;
import android.os.Build;
import android.os.Bundle;
import android.preference.PreferenceManager;

public class MyService extends Service {

    public MyService() {
    }

    @Override
    public void onCreate() {

    //your SERVICE code here... 

        super.onCreate();
    }

    @Override
    public IBinder onBind(Intent intent) {
        // TODO: Return the communication channel to the service.
        throw new UnsupportedOperationException("Not yet implemented");
    }
} 
```

第 3 步：在 MainActivity 类中启动服务：

```
startService(new Intent(this, MyService.class)); 
```

# c# - 如何使用正则表达式将 rgb 值替换为字符串中的十六进制值

> ID：12509950
> 
> 赞同：0
> 
> 时间：2012-09-20T09:41:48.960
> 
> 标签：c#

我正在尝试编写一个正则表达式，通过它我可以用字符串中的十六进制代码替换 rgb 颜色值。字符串可能有以下类型：

```
=> rgb(0, 0, 0) 0 0 0
=> rgb(0 100, 200)
=> 0 0 rgb(201,45,65) 
```

首先，我想从字符串中访问 rgb 值，然后用十六进制代码替换它。所以结果将是：

```
=> #XXXXXX 0 0 0 
=> #XXXXXX
=> 0 0 #XXXXXX 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T09:52:23.503

```
var newstr = Regex.Replace(
                input, 
                @"rgb\([ ]*(\d+)[ ]*,[ ]*(\d+)[ ]*,[ ]*(\d+)[ ]*\)", 
                m => {
                    return "#" + Int32.Parse(m.Groups[1].Value).ToString("X2") +
                    Int32.Parse(m.Groups[2].Value).ToString("X2") +
                    Int32.Parse(m.Groups[3].Value).ToString("X2");
                }
            ); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T09:46:41.537

要从您的字符串中获取值，您可以根据 and 的索引创建一个子字符串`"rbg("`，`")"`然后在`" "`and/or上进行后续拆分`","`。然后...

看这里：

[http://bytes.com/topic/c-sharp/answers/268611-convert-rgb-hexadecimal](http://bytes.com/topic/c-sharp/answers/268611-convert-rgb-hexadecimal)

```
public static string ToHtml ( System.Drawing.Color color )
{
   if (System.Drawing.Color.Transparent == color)
      return "Transparent";
   return string.Concat("#", (color.ToArgb() & 0x00FFFFFF).ToString("X6"));
} 
```

或者：

```
System.Drawing.Color color = System.Drawing.Color.FromArgb(longRgb); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-20T09:55:41.700

怎么样

```
string str = "rgb(0 100, 200)";

int startindex = str.IndexOf("rgb(");

int endindex = str.LastIndexOf(')');

string result = str.Substring(0, startindex) 
              + "#XXXXXX" 
              + str.Substring(endindex + 1); 
```

尝试了您提供的所有 3 个选项。

# java - 在 Eclipse 中调试 org.apache.struts.action.RequestProcessor 等类

> ID：12509952
> 
> 赞同：2
> 
> 时间：2012-09-20T09:41:57.480
> 
> 标签：java, eclipse, debugging

只是想知道是否有任何选项可以深入调试核心框架类，如 org.apache.struts.action.RequestProcessor、org.apache.struts.action.ActionServlet 等。

因为在eclipse中调试时我只能看到这些类中的行号增加（因为这些类只显示为.class文件并且“找不到源”错误即将到来）并且只有在进入我写的类之后才能调试并查看每个步骤中的数据。

有没有办法防止“找不到源”错误并调试到类文件中......

如果这是一个愚蠢的问题，请忽略...只是想检查我是否可以深入研究这些核心类并进行调试。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-20T09:48:20.250

您可以从 apache 存储库下载源代码，然后选择“附加源代码”按钮进入 Eclipse，然后您将看到代码，就好像它是在您的工作区中构建的一样，并通过它进行调试

# php - 两次看到 php 语句，我该如何解决？

> ID：12509953
> 
> 赞同：-1
> 
> 时间：2012-09-20T09:42:02.657
> 
> 标签：php

我有一个关于 php 的问题。要查看我网站上的个人资料，您必须是用户/会员。好吧，这行得通，但是如果您以访客身份单击个人资料的链接，则什么也看不到。这不是问题，但我想用一些东西填满它或将客人重定向到注册页面。如果我改变`a href`，那必须工作，我知道。但主要问题是该`UPDATEDATE`语句，它显示了消息的编辑日期（当然，如果它被编辑）。作为会员，您可以在它所属的地方看到它：在该人的昵称之后，但如果您是客人，您会看到它的两倍/两倍！在一个人的昵称之后，您会以正确的方式看到它，但您也会在消息本身上看到更新的日期，这是不对的。我该如何解决这个日期问题？

我尝试了以下代码：

```
if ($verified_user)
       echo "
          <div align=right class=aul>
            $tag $spit $move $remove

           (<a href=\"home.php?process=who=$nick\" title=\"$usertitle\" style=\"text-decoration: none;\">$user</a></span>, ".dateTime($date2);

if($updatedate!=""){echo " ~ $updatedate";} 

        echo ")"; 
```

对于客人：

```
if (!$verified_user)
  echo "
          <div align=right class=aul>
             $tag $spit $move $remove

           (<a href=\"home.php?process=who=$nick\" title=\"$usertitle\" style=\"text-decoration: none;\">$user</a></span>, ".dateTime($date2);

if($updatedate!=""){echo " ~ $updatedate";} 

    echo ")"; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T09:44:58.507

您缺少 if 的**{**：

```
if ($verified_user) {
  echo "
    <div align=right class=aul> $tag $spit $move $remove    
      (<a href=\"home.php?process=who=$nick\" title=\"$usertitle\" 
       style=\"text-  decoration: none;\">$user</a></span>, ".dateTime($date2);

   if($updatedate!="") {echo " ~ $updatedate";}     
   echo ")";

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T09:53:37.380

您需要在 IF 中添加更多大括号 - 包括`if($updatedate!='')...`在括号中`if (!$verified_user) { ... if($updatedate!='') {...} }`

或执行以下操作（我认为更好）：

```
if (!$verified_user) {
   ...
} else {
   ...
}
if($updatedate!='') { ... } 
```

# c# - 如何使用 .net windowsForm 在服务器上创建文件夹和文件

> ID：12509956
> 
> 赞同：0
> 
> 时间：2012-09-20T09:42:10.860
> 
> 标签：c#, winforms, desktop-application

我正在使用 Windows 窗体，我有一项任务是使用 Windows 窗体在我的客户端服务器上创建目录和文件。那么如何在客户端上创建目录和文件

使用我的 Windows/桌面应用程序的服务器。

谢谢

我不知道..意味着我如何将我的桌面验证到我的 Live Server

我只是在尝试该代码，但它不起作用

```
string path= "\\ipaddress\\Templates\\";
System.IO.Directory.CreateDirectory(@path); 
```

如果我试试这个

```
string path = "\\123.100.000.000\KapilSearch\"; 
```

我有以下错误

```
[Error  1   Unrecognized escape sequence]
[Error  2   Newline in constant] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T11:46:29.060

您的路径转义不正确。你有两个选择。

```
string path= @"\\ServerName\ShareName\targetnewfolder";
System.IO.Directory.CreateDirectory(path); 
```

或这个：

```
string path = "\\\\ServerName\\ShareName\\targetnewfolder";
System.IO.Directory.CreateDirectory(path); 
```

请注意打开字符串前面的 @ - 并且斜杠等于您在 Windows 资源管理器中使用的数字 - 使用 @ 修饰符时不需要转义。另请注意，CreateDirectory 参数中没有 @ 符号。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-20T09:51:30.483

如果您问如何创建目录，那么这很简单： [Directory.CreateDirectory](http://msdn.microsoft.com/en-us/library/vstudio/system.io.directory.createdirectory%28v=vs.100%29.aspx)

# javascript - 加载事件时在网页周围自动移动 Div。并且需要在鼠标悬停时停止这种移动......？

> ID：12509958
> 
> 赞同：0
> 
> 时间：2012-09-20T09:42:13.713
> 
> 标签：javascript, jquery, html

如何使用javascript 中的事件在`div`网页中移动。`onload`并且需要在`mouse over`事件被调用时停止这种运动？

```
<script type="text/javascript">
  var wid=1002;

  var rmax = wid2;
  var tmr  = 10;

  var intg = 2;
  var dir  = 2;

  function moveIt() {
    obj = document.getElementById("d1").style;
    curr = parseInt(obj.left);
    if (curr > rmax) {
      dir = -dir;
    }
    obj.left = curr + dir + "px";
    if ((curr == 0) && (dir < 0)) {
      dir = -dir;
    }
    timer=setTimeout("moveIt()", intg*tmr);
  }

  function init() 
  {
    setTimeout("moveIt()", intg*tmr);
  }

  function stoper() {
    clearTimeout(timer);
  }

  function hideDiv() {
   $(".floatMainContainer").hide();
   $(".floatThankyouContainer").show();
  }
</script>
<body onLoad="init()">
  <div id="d1" style="border:px solid black; top: 2%; left: 0px; z-index:999999; position:absolute; width:262px; height:6px; background-color:none;" onMouseOver="stoper()"   onmouseout="moveIt(),10000" >
    <div class="floatMainContainer"  >
      <span class="close">
        <span>Close</span>
      </span>
    </div>
  </div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T09:50:35.347

假设你用 jquery 标记了这篇文章，我想你会使用它。

jQuery 中的 On Load 事件如下所示：

```
$(function(){ <!-- here you can start moving around your div's as crazy -->   }); 
```

要阻止它们移动（假设您使用 jQuery animate 来移动它们），只需执行以下操作：

```
$(yourDivsClass).mouseover(function(){ $(this).stop(); } 
```

# c++ - 定义没有类的模板变量

> ID：12509961
> 
> 赞同：2
> 
> 时间：2012-09-20T09:42:19.967
> 
> 标签：c++, templates

我想定义没有类的模板变量，但 MSVC++ 不接受它，并且根据 C++ 标准在它周围搜索似乎是不正确的：

```
template<CharType> static CharType hexDigits[17];
template<> char hexDigits[17] = "0123456789ABCDEF";
template<> wchar_t hexDigits[17] = L"0123456789ABCDEF"; 
```

然后，这些专用变量将在（非专用）模板函数中使用。

所以我不得不这样写：

```
template<typename CharType> class dummyclass {
    static CharType hexDigits[17];
};
template<> char dummyclass<char>::hexDigits[17] = "0123456789ABCDEF";
template<> wchar_t dummyclass<wchar_t>::hexDigits[17] = L"0123456789ABCDEF"; 
```

有什么方法可以*在不*定义虚拟类的情况下定义这两个变量？

另外， C++ 标准不允许第一段代码有什么好的理由*吗？*毕竟，类外的模板*函数*是允许的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T10:30:57.890

> 另外，C++ 标准不允许第一段代码有什么好的理由吗？毕竟，类外的模板函数是允许的。

请注意：

```
template<CharType> static CharType hexDigits[17];
template<> char hexDigits[17] = "0123456789ABCDEF";
template<> wchar_t hexDigits[17] = L"0123456789ABCDEF"; 
```

有两个不同类型但名称相同的符号：这不可能工作，因此编译器必须开始修改/修饰变量的名称，就像它已经对函数和类所做的那样。

在干净地实现这一点方面，这对我来说似乎是一个特征......如果您不介意出现链接错误而不是编译错误，您甚至可以跳过专业化并仅声明适当的静态成员：

```
template <typename CharType> struct my_char_traits {
    static CharType hex_digits[17];
};

template<> char my_char_traits<char>::hex_digits[17] = "0123456789ABCDEF";
template<> wchar_t my_char_traits<wchar_t>::hex_digits[17] = L"0123456789ABCDEF"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T09:46:35.530

您只能创建类模板或结构或函数模板。

像您尝试做的模板变量在 C++ 中是非法的。

您必须创建一个类模板，然后使用它。

# c++ - static_assert 用于确保设计合同

> ID：12509962
> 
> 赞同：10
> 
> 时间：2012-09-20T09:42:21.160
> 
> 标签：c++, iterator

作为开发人员团队的一员，我想确保在我们发布的自定义迭代器上实现一组函数（和运算符）。使用 STL 迭代器类型作为基本类型会有所帮助，但是由于某些原因（我无法控制），我们决定不强制执行 STL 兼容性。迭代器由同一团队和整个公司的人员使用。

**我想设计一个模板类，它使用迭代器类型并根据设计合同进行测试。**

例如，我希望迭代器实现 operator++ 、 operator-- 并声明所需的 typedef。

1>是否有可能实现这样一个执行设计合同的模板类？可能使用 static_assert ？

2> 如果是，这是一个好的设计吗？

参考：[自定义迭代器](https://stackoverflow.com/questions/3582608/how-to-correctly-implement-custom-iterators-and-const-iterators)

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-09-20T10:19:26.023

> 是否可以实现这样一个执行设计合同的模板类？可能使用 static_assert ？

[检查特定方法是否存在（与此示例](https://stackoverflow.com/a/257382/476681)非常相似）：

```
struct Hello
{
};

struct Generic {
    int operator++()
    {
        return 5;
    }
};

// SFINAE test
template <typename T>
class has_operator_plusplus
{
    typedef char one;
    typedef long two;

    template <typename C> static one test( decltype(&C::operator++) ) ;
    template <typename C> static two test(...);

public:
    enum { value = sizeof(test<T>(0)) == sizeof(char) };
};

int main(int argc, char *argv[])
{
    // the first check breaks the build
    //static_assert( has_operator_plusplus<Hello>::value, "has no operator" );
    static_assert( has_operator_plusplus<Generic>::value, "has no operator" );
} 
```

> 这是一个好的设计吗？

是的，因为通过中断构建，错误会很快被捕获，并且该类的用户不必阅读文档（大多数人在编程时通常会跳过该部分）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-20T09:52:56.190

是的，你可以实现这样一个模板类。您可以使用 SFINAE 来测试各种成员的存在，如果它们不正确，`static_assert`. 尽管我不确定您为什么要在 C++11 世界中定义 typedef。

对代码进行额外检查总是一个好主意。

# spring-mvc - Mockito... 春季测试

> ID：12509964
> 
> 赞同：-1
> 
> 时间：2012-09-20T09:42:34.123
> 
> 标签：spring-mvc, mockito, spring-test, spring-test-mvc, springmockito

这是我的测试课..

```
 @RunWith(SpringJUnit4ClassRunner.class)
   @ContextConfiguration(loader=AnnotationConfigContextLoader.class)
   public Testclass {
     @Autowired
     private VClasss vclass;
       .....
       .....

     @Before
     public void setup() {
       //mockito.when.(vClass.isvalid()).thenReturn(true);

    }
    @After
    public void verify( {
     Mockito.verify(vCLass, VerificationModeFactory.times(1)).isValid();
     Mockito.reset();
    }

   @Test
   public void test1() {
     //set up test which will call the mock isValid method

   }

   @Test
   public void test1() {
    //set up test which will call the mock isValid method
   }

   @Configuration
   static class configurationForTest {
    @Bean
     public VClass vClass() {
      return mockito.mock(VClass.class);
     }
   } 
```

我的问题是，当我设置它时，第一个测试通过，因为验证是正确的 isValid 被调用了一次，但是第二个失败，因为现在验证抱怨要求 isValid 被调用了两次。我希望 mockito 上的 reset 方法重置每次测试后调用计数..

有人有什么建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T09:52:52.997

您没有通过任何模拟来重置。该行应该是

```
Mockito.reset(vClass); 
```

# android - 可以从静态方法调用 startActivity() 吗？

> ID：12509968
> 
> 赞同：2
> 
> 时间：2012-09-20T09:42:41.193
> 
> 标签：android

我需要`startActivity()`从我的`static`一种方法中调用一个，这可能吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-20T09:43:43.933

你需要一个上下文才能做到这一点。您可以将上下文作为参数传递给您的静态方法吗？

```
public static void doSomething(Context ctx) {
    // do some stuff here
    ctx.startActivity(new Intent(ctx, OtherActivity.class));
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T09:46:54.450

这也可以帮助你

```
((Activity)mcontext).startActivity(new Intent(((Activity)mcontext),OtherActivity.class)); 
```

# html - Gwt 和页面内的超链接（#Chapter3）会干扰历史记号

> ID：12509969
> 
> 赞同：0
> 
> 时间：2012-09-20T09:42:44.403
> 
> 标签：html, gwt, anchor

在我们的 gwt 应用程序中，一些元素从 cms 加载并作为“HTML”对象添加到页面。到目前为止，这工作正常。但是现在添加了一个更大的 Html 页面，其中有一些锚元素可以跳转到这个 html 文档的不同部分。这个锚看起来像这样：

```
<a href="#Chapter3</a> 
```

问题是这会干扰 gwt 的历史令牌。单击此类令牌将引导应用程序进入`<app address>/#Chapter3`，这不是有效的令牌 - 导致开始页面。

那么如何在html页面中添加这样的inpage链接呢？

**更新** 最后我希望点击`<a href="#Chapter3</a>`跳转到`<a name="Chapter3</a>`同一个文档 - 正常的 html 行为。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T14:57:32.013

将 ClickHandler 附加到您的 HTML 小部件：

```
myHTMLWidget.addClickHandler(new ClickHandler() {
    @Override
    public void onClick(ClickEvent event) {

        // Stop this event
        event.preventDefault();

        Element e = Element.as(event.getNativeEvent().getEventTarget());
        if (e.getAttribute("href").contains("#")) {
            e.scrollIntoView();
        }
    }
}); 
```

如果需要，您可以有不同的滚动行为（例如，滚动到光标位置）。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-20T21:01:42.280

`iframe`有点粗糙，但您可以尝试在（GWT 的[Frame](http://google-web-toolkit.googlecode.com/svn/javadoc/latest/com/google/gwt/user/client/ui/Frame.html)）中加载您的 HTML 内容。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-09-20T11:20:16.097

```
Anchor link=new Anchor("Print",true); 
```

# xamarin.ios - MonoTouch 6 更新

> ID：12509970
> 
> 赞同：0
> 
> 时间：2012-09-20T09:42:50.660
> 
> 标签：xamarin.ios, xamarin

今天收到关于软件更新的通知：

*   Mac OS X 10.7.5；
*   Xcode 4.5；
*   MonoDevelop 3.XXXX；
*   单触6.0。

除 MonoTouch 6 外，所有产品均已成功安装。它尝试替换文件、执行脚本，但随后...显示消息“操作失败”：

![在此处输入图像描述](../Images/3fc4f422ee9ef80ab1ac59b5d062d89a.png)

如何判断错误原因？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-20T10:03:48.920

对话框解释它：

```
Contact the software manufacturer. 
```

您可以通过发送电子邮件至 support@xamarin.com 来执行此操作

# functional-programming - 对 GPU 的纯函数式编程

> ID：12509976
> 
> 赞同：9
> 
> 时间：2012-09-20T09:43:08.873
> 
> 标签：functional-programming, cuda, opencl, gpu

我一直想玩弄函数式代码，并认为对一些随机组合的函数进行交互式实时光线追踪会很有趣。有谁知道任何编译器或转换器可以从函数式语言（或任何具有高阶函数的语言）中获取代码并将其转换为可在 CUDA 或 OpenCL 中使用的东西？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-20T12:13:02.360

Haskell 中有几种针对 CUDA 和/或 OpenCL 的嵌入式语言。

最高级别是[加速](http://hackage.haskell.org/package/accelerate)，它是 Haskell 的一个子集，用于数组处理，嵌入在 Haskell 中。它适用于 CUDA。

Conal Elliott在 Haskell 中嵌入了[着色器语言，用于图形编程](http://hackage.haskell.org/package/shady-gen)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-20T09:53:17.723

有一些尝试，例如[Obsidian](http://www.cse.chalmers.se/%7Ejoels/writing/dccpaper_obsidian.pdf) (Haskell) 和 SaC (Single Assignment C)。

本文描述了有关此尝试和其他一些尝试的更多信息： [Functional Programming for High-Performance Computing on Heterogeneous Architectures](https://www.researchgate.net/publication/347158897_A_Platform_Programming_Paradigm_for_Heterogeneous_Systems_Integration)

# android - 自定义图库不滚动

> ID：12509991
> 
> 赞同：0
> 
> 时间：2012-09-20T09:43:48.900
> 
> 标签：android, custom-controls, xamarin.android, android-gallery, xamarin.mobile

我正在关注这个问题：[如何停止在图库小部件中滚动？](https://stackoverflow.com/questions/2373617/how-to-stop-scrolling-in-a-gallery-widget)

我试图像这样实现我的自定义画廊：

```
public class CustomGallery : Gallery
    {
        public CustomGallery(Context context, IAttributeSet attrs) :
            base(context, attrs)
        {
            Initialize();
        }

        public CustomGallery(Context context, IAttributeSet attrs, int defStyle) :
            base(context, attrs, defStyle)
        {
            Initialize();
        }

        private void Initialize()
        {
        }

        public override bool OnFling(MotionEvent e1, MotionEvent e2, float velocityX, float velocityY)
        {
            Keycode kEvent;
            if (isScrollingLeft(e1, e2))
            { //Check if scrolling left
                kEvent = Keycode.DpadLeft;
            }
            else
            { //Otherwise scrolling right
                kEvent = Keycode.DpadRight;
            }

            OnKeyDown(kEvent, null);

            return true;
        }

        private bool isScrollingLeft(MotionEvent e1, MotionEvent e2)
        {
            return e2.GetX() > e1.GetX();

        }
    } 
```

我在布局中引用了自定义图库，我看到了第一张图片，但是当我尝试滚动到下一张图片时没有任何反应。

奇怪的是，如果我删除 OnFling 的覆盖，我的画廊仍然没有滚动？当然，如果我不覆盖任何东西，我的自定义组件应该表现得像普通的画廊组件吗？

PS：我要做的就是防止画廊在我向左或向右滑动时滚动浏览多张图片，我想一次滚动一张图片。

任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T09:54:23.037

从头开始，想通了，我在我的活动中覆盖了 OnTouch 事件><

# c# - 如何设置 ClientCredentials？

> ID：12509992
> 
> 赞同：16
> 
> 时间：2012-09-20T09:43:50.683
> 
> 标签：c#, wcf, credentials

我正在尝试使用 WCF 服务：

该服务的配置是：

```
<?xml version="1.0" encoding="utf-8"?>
<configuration>
    <system.serviceModel>
        <bindings>
            <netNamedPipeBinding>
                <binding name="netNamedPipeEndpoint" closeTimeout="00:01:00"
                    openTimeout="00:01:00" receiveTimeout="00:10:00" sendTimeout="00:01:00"
                    transactionFlow="false" transferMode="Buffered" transactionProtocol="OleTransactions"
                    hostNameComparisonMode="StrongWildcard" maxBufferPoolSize="524288"
                    maxBufferSize="65536" maxConnections="10" maxReceivedMessageSize="65536">
                    <readerQuotas maxDepth="32" maxStringContentLength="8192" maxArrayLength="16384"
                        maxBytesPerRead="4096" maxNameTableCharCount="16384" />
                    <security mode="None">
                        <transport protectionLevel="EncryptAndSign" />
                    </security>
                </binding>
            </netNamedPipeBinding>
            <netTcpBinding>
                <binding name="netTcpEndpoint" closeTimeout="00:01:00" openTimeout="00:01:00"
                    receiveTimeout="00:10:00" sendTimeout="00:01:00" transactionFlow="false"
                    transferMode="Buffered" transactionProtocol="OleTransactions"
                    hostNameComparisonMode="StrongWildcard" listenBacklog="10"
                    maxBufferPoolSize="524288" maxBufferSize="65536" maxConnections="10"
                    maxReceivedMessageSize="65536">
                    <readerQuotas maxDepth="32" maxStringContentLength="8192" maxArrayLength="16384"
                        maxBytesPerRead="4096" maxNameTableCharCount="16384" />
                    <reliableSession ordered="true" inactivityTimeout="00:10:00"
                        enabled="false" />
                    <security mode="None">
                        <transport clientCredentialType="Windows" protectionLevel="EncryptAndSign" />
                        <message clientCredentialType="Windows" />
                    </security>
                </binding>
            </netTcpBinding>
            <wsHttpBinding>
                <binding name="wsHttpBindingConfiguration" closeTimeout="00:01:00"
                    openTimeout="00:01:00" receiveTimeout="00:10:00" sendTimeout="00:01:00"
                    bypassProxyOnLocal="false" transactionFlow="false" hostNameComparisonMode="StrongWildcard"
                    maxBufferPoolSize="524288" maxReceivedMessageSize="65536"
                    messageEncoding="Text" textEncoding="utf-8" useDefaultWebProxy="true"
                    allowCookies="false">
                    <readerQuotas maxDepth="32" maxStringContentLength="8192" maxArrayLength="16384"
                        maxBytesPerRead="4096" maxNameTableCharCount="16384" />
                    <reliableSession ordered="true" inactivityTimeout="00:10:00"
                        enabled="false" />
                    <security mode="None">
                        <transport clientCredentialType="Windows" proxyCredentialType="None"
                            realm="" />
                        <message clientCredentialType="Windows" negotiateServiceCredential="true" />
                    </security>
                </binding>
            </wsHttpBinding>
        </bindings>
        <client>
            <endpoint address="net.tcp://webapppro-v11/FlightInfoWebService/FlightInfoService.svc"
                binding="netTcpBinding" bindingConfiguration="netTcpEndpoint"
                contract="FlightInfoService" name="netTcpEndpoint" />
            <endpoint address="net.pipe://webapppro-v11/FlightInfoWebService/FlightInfoService.svc"
                binding="netNamedPipeBinding" bindingConfiguration="netNamedPipeEndpoint"
                contract="FlightInfoService" name="netNamedPipeEndpoint" />
            <endpoint address="http://webapppro-v11/FlightInfoWebService/FlightInfoService.svc"
                binding="wsHttpBinding" bindingConfiguration="wsHttpBindingConfiguration"
                contract="FlightInfoService" name="wsHttpBindingConfiguration" />
        </client>
    </system.serviceModel>
</configuration> 
```

当我尝试调用服务时：

```
public async void LoadCities()
{
    _client = new FlightInfoServiceClient(Maquette_MyAirport_Win8.FlightService.FlightInfoServiceClient.EndpointConfiguration.wsHttpBindingConfiguration, "http://servuucs.fr/FlightInfoWebService/FlightInfoService.svc");

    var citiesResponse = await _client.GetAllCitiesAsync(new BaseRequest());
    var  myCities = citiesResponse.Cities;
} 
```

我抓住了这个例外：

> 错误：UnAuthorizedAccess 描述：您无权访问此服务

如何设置我的 ClientCredentials？

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-09-20T11:30:35.030

正如@Paciv 在评论中指出的那样，您可以通过代码来做到这一点。使用属性[ClientCredentials.Windows](http://msdn.microsoft.com/en-us/library/system.servicemodel.description.clientcredentials.windows.aspx)设置它们，如下所示：

```
_client.ClientCredentials.Windows.ClientCredential.Domain = "warzone42";
_client.ClientCredentials.Windows.ClientCredential.UserName = "user1428798";
_client.ClientCredentials.Windows.ClientCredential.Password = "p@ssw0rd"; 
```

在代码中设置凭据当然是不明智的。如果您没有像上面那样以编程方式设置 Windows 用户，我相信运行客户端的用户的凭据会被发送过来（这可能是更典型的情况？）。

请注意，如果您在代码中设置凭据，您实际上可能正在寻找[UserName authentication](http://msdn.microsoft.com/en-us/library/ms733131.aspx)。