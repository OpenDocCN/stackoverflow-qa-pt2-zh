# StackOverflow 问答 14615000-14615999

# chef-infra - 如何在运行 chef-solo 时仅获取更新信息

> ID：14615000
> 
> 赞同：2
> 
> 时间：2013-01-30T22:22:37.980
> 
> 标签：chef-infra

我是个厨师菜鸟，现在只是尝试通过一些试验和错误来更新一些配置文件。当您运行 chef-solo 命令来更新服务器时，它会吐出很多我不关心的信息，这是一个很大的痛苦。

有没有办法在某些内容实际更改或更新时获取输出？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T08:59:14.273

您无法让 Chef 仅打印有关它更改的资源的信息，因为它们处于相同的日志级别。

`-o`但是你可以通过提供给 chef-solo一次只运行一个食谱/食谱组（例如你已经改变的那些） 。这样您就不必等待已经成功运行的食谱并且您也可以获得更小的日志。

```
chef-solo -o mycookbook,role[role-name],mycookbook::recipe1 
```

# c# - 自定义 Shell 无法运行 ShowWindow

> ID：14615004
> 
> 赞同：0
> 
> 时间：2013-01-30T22:22:52.670
> 
> 标签：c#, windows-7, windows-shell, showwindow

我正在运行自定义 shell **Test.exe**而不是**Explorer.exe**，它会在用户登录时启动全屏应用程序。但是，该应用程序无法自行执行 ShowWindow 命令（最小化或隐藏）。当默认 shell 是**Explorer.exe**时它工作正常，所以它可能与没有任务栏的自定义 shell 有关？

有没有办法处理这种情况，如果是这样，我将如何去做？我希望能够在自定义 shell 中最小化窗口，而不是让资源管理器运行。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T22:47:14.880

请也尝试 SetWindowPlacement：

[http://msdn.microsoft.com/en-us/library/ms633544%28v=vs.85%29.aspx](http://msdn.microsoft.com/en-us/library/ms633544%28v=vs.85%29.aspx)

如果什么都没发生，请尝试向窗口发送一条 syscommend 消息：

[http://msdn.microsoft.com/en-us/library/windows/desktop/ms646360%28v=vs.85%29.aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/ms646360%28v=vs.85%29.aspx)

对于 WM_SYSCOMMAND，SC_MINIMIZE 是 0xF020

# javascript - 使用 jquery 获取相同的元素并更改值

> ID：14615012
> 
> 赞同：0
> 
> 时间：2013-01-30T22:23:16.213
> 
> 标签：javascript, jquery

我有一个页面，其中多次出现相同的 webpart。问题是 z 索引，因为当 webpart 控件中的下拉菜单打开放置在下方的相同 webpart 时，它会隐藏它，因为它也具有相同的 z 索引。因此，我试图通过类获取页面中的所有元素，然后希望在 webpart 控件出现在页面上时通过它们递减 z 索引进行循环。

因此，如果有 3 个控件实例，第一个获得 az index 60，第二个获得 50，第三个获得 40。所有控件都可以选择，下面是使用类。所以如果有人能告诉我如何获得引用在类模式中具有类的所有元素，然后循环遍历它们，然后分配 z 索引。

```
 $(document).ready(function() {

    $('.Wrapper .selectbox').css('z-index', '100');

}); 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T22:24:54.977

```
$($('.Wrapper .selectbox').get().reverse()).each(function(i){
    $(this).css('z-index', i * 20);
}); 
```

或者，如果您想清理它，请创建一个简单的函数：

```
jQuery.fn.reverse = [].reverse; 
```

并使用以下语法：

```
$('.Wrapper .selectbox')reverse().each(function(i){
    $(this).css('z-index', i * 20);
}); 
```

# c - 简单的程序导致“堆栈粉碎”

> ID：14615013
> 
> 赞同：0
> 
> 时间：2013-01-30T22:23:20.690
> 
> 标签：c

我正在尝试连接两个字符串，然后在 UNIX 环境中进行系统调用。该程序执行我想要的操作，但因错误而终止`*** stack smashing detected ***`

为什么会这样？

这是我的代码：

```
main(int argc, const char* argv[])
{

    //Check if there is an arg otehr than file name
    if(argc > 1)
    {
        int i;
        //argv[0] is prog name start at 1.
        for(i=1; i<argc; i++)
        {

            char st1[] = "wc -l ";
            strcat(st1, argv[i]);
            printf("%s",system(st1));
        }

    }
    else
    {
        printf("\nExiting. No input files given.\n");
    }
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T22:24:18.930

`str1`不足以包含结果字符串，因为它只有足够的元素来包含`wc -l \0`（它是一个`char[7]`数组）。调用`strcat()`写入超出了数组的范围，覆盖了它不应该覆盖的内存。

动态分配足够的空间，根据传入参数的长度计算，以确保有足够的内存可用：

```
char* s = malloc(7 + strlen(argv[i])); /* 7 is 6 for "wc -l " and null term. */
if (s)
{
    sprintf(s, "wc -l %s", argv[i]);

    free(s);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T22:25:04.233

```
char st1[] = "wc -l ";
strcat(st1, argv[i]); 
```

`st1`将在堆栈上分配，刚好足够用于初始化它的字符串常量。然后附加另一个字符串，可能（几乎可以肯定）破坏堆栈。

# javascript - IE9 错误：对象不支持属性或方法“setAttribute”

> ID：14615016
> 
> 赞同：2
> 
> 时间：2013-01-30T22:23:29.187
> 
> 标签：javascript, internet-explorer-9

功能：

```
function disable_hidden_flip_questions(option, value){
    var first_q = document.getElementById('hidden_auto_questions');
    var second_q = document.getElementById('hidden_include_auto');
    var inputs_list = [];
    if(option == 'all'){
        inputs_list.push(first_q.getElementsByTagName("input"));
        inputs_list.push(second_q.getElementsByTagName("input"));
    }else if (option == 'first'){
        inputs_list.push(first_q.getElementsByTagName("input"));
    }else if(option == 'second'){
        inputs_list.push(second_q.getElementsByTagName("input"));
    }

    for (var inputs in inputs_list){
        for(var input in inputs_list[inputs]){
            if(inputs_list[inputs].hasOwnProperty(input) && input != 'length'){
                if(!value){
                    inputs_list[inputs][input].removeAttribute('disabled');
                }else{
                    inputs_list[inputs][input].setAttribute("disabled", "disabled");
                }
            }
        }
    }
} 
```

在 Chrome 和 Firefox 中运行良好，但在 IE9 中，控制台在这一行给我一个错误：

```
inputs_list[inputs][input].setAttribute("disabled", "disabled") 
```

如果我`console.log(inputs_list[inputs][input])`在 Chrome 中得到这个：

（输入是由 RoR 生成的，这就是它`name`和`id`如此长的原因）

```
<input class="radio_buttons optional" id="custom_attributes_trailer_insurance_endorsement_false" name="custom_attributes[trailer_insurance_endorsement]" type="radio" value="false" disabled="disabled"> 
```

是的，这就是我想要的（和期望的）......但是在 IE9 的控制台中，我得到了这个：

```
[object HTMLCollection] 
```

这是完全没用的......

所以问题：在 IE 的崇高观点中我哪里出错了？我知道 IE9 支持`setAttribute`，所以我假设它与我的`for...in`循环有关。

**编辑：**所以由于评论，问题可能出在对象类型（`HTMLCollection`存储在 an 中`Array`）。如果确实如此，我该如何让所有数据类型都兼容？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T22:34:08.220

HTMLCollections 并不是真正的数组，因此以这种方式处理它们可能会得到不一致的结果。虽然所有浏览器都会从 getElementsByTagName 返回 HTMLCollection，但它们允许您处理它们的方式可能存在重大差异。最好的方法是使用 DOM 方法从 HTMLCollection 访问内容 - 因此您将使用 .item(0) 来确保您引用的是 dom 节点而不是集合本身（请参阅[https://developer.mozilla.org /en-US/docs/DOM/HTMLCollection](https://developer.mozilla.org/en-US/docs/DOM/HTMLCollection)）。此外，您不会尝试操作集合列表，因此如果您确实使用数组将数据推送到其中，请确保它们是单独的数据而不是 HTMLCollection。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T17:37:53.420

jquery中的解决方案：

```
 $("input[name=trailer_use]").click(function(event){
        if(event.target.id == "trailer_use_yes"){
            $("#hidden_auto_questions").removeClass('hide_auto').addClass('show_auto');
            $("input[name=trailer_insured]").removeAttr("disabled");
            show_trailer_warning(null, "remove");
        }else {
            $("#hidden_auto_questions").removeClass('show_auto').addClass('hide_auto');
            $("input[name=trailer_insured]").attr("disabled", "disabled");
            if($("#hidden_include_auto").hasClass("show_auto")){
                $("#hidden_include_auto").removeClass('show_auto').addClass('hide_auto');
                $('input[name="custom_attributes[trailer_insurance_endorsement]"]').attr("disabled", "disabled");
            }
            show_trailer_warning(null, "disclaimer");
        }
  }); 
```

# ruby-on-rails - 快速测试：如何在不使用 FactoryGirl 的情况下创建类的实例

> ID：14615018
> 
> 赞同：0
> 
> 时间：2013-01-30T22:23:32.677
> 
> 标签：ruby-on-rails, rspec

我正在为帮助类运行 rspec 测试。为了加快速度，我想避免加载 FactorGirl 和 Rails。

我的助手类目前使用 Factory Girl 从 User Class 和 Project 类中实例化对象。例如：

```
describe '#show_follower_pic(user)' do
  it 'should show the profile pic when the user has one' do
    user = FactoryGirl.create(:user, profile_pic_source: 'facebook',facebook_uid: "22331111", facebook:  {"info"=>{"image"=>"test_image.png"}} )
    show_follower_pic(user).should == "test_image.png" 
  end 
```

如何为仅存在于此特定测试文件（而不是更大的测试套件）范围内的用户和项目创建假类？

# gnuplot - 如何让 gnuplot 显示与鼠标指针具有相同 x 值的绘图函数的坐标？

> ID：14615021
> 
> 赞同：11
> 
> 时间：2013-01-30T22:23:49.533
> 
> 标签：gnuplot

如果在 gnuplot 中键入`plot(x**2)`，并获取此函数的绘图，则在绘图的左下角，我可以看到与鼠标指针位置相对应的坐标。

我想知道的是是否有办法将指针“捕捉”到函数的图形（或者更确切地说是显示坐标的十字准线，使它们与鼠标指针共享相同的 x 坐标）。

最终效果是，当我沿着绘图从左到右移动鼠标时，与指针具有相同 x 值的十字准线将直接显示在函数的图形上，并且该十字准线的当前坐标将为打印在某处（例如在绘图的左下角）。换句话说，对于某个 x 值，打印的十字准线坐标始终为 (x, f(x))。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-09-19T21:48:21.380

虽然这对函数 (x, f(x)) 很有用，但请注意 gnuplot 还可以绘制参数函数以及 2D 和 3D 表面，因此此功能的用途有限。另请注意，您已经可以使用 和 将带有和`set table`的值输出到控制台。`for``print`

如果您确实需要交互性，这里有一个 MWE，如果您单击屏幕，它会根据鼠标指针 X 位置输出 (x, f(x)) 对，作为屏幕上的标签以及通过打印到控制台（根据需要删除）。

```
#!/usr/bin/gnuplot -persist

## this binds commands to the mouse click that uses the MOUSE_X variable
## to do what you want
bind all "Button1" \
  'result=sprintf("(x, f(x)) = (%g, %g)", \
  MOUSE_X, f(MOUSE_X)); \
  set label 1 result at graph 0.05, graph 0.05; \
  print result; replot'

f(x) = x**2

plot f(x)
## the pause is needed only to keep gnuplot running,
## so you see the print output
## the label works without the pause
pause mouse 
```

# jquery - JQuery textarea 值为空

> ID：14615029
> 
> 赞同：3
> 
> 时间：2013-01-30T22:24:18.273
> 
> 标签：jquery

这类问题往往会立即获得反对票。如果你有答案，请帮忙！谢谢。

我有一个向 dom 添加 textarea 的脚本。当我输入数据并稍后尝试检索它时，该值返回空。

这成功地设置了 textarea 的值：

```
$("textarea").each(function(){
    $(this).val("ASDFASDF");
}); 
```

这成功设置了 textarea 的 css 背景属性：

```
$("textarea").each(function(){
    $(this).css({"border":"2px solid red"});
}); 
```

但这不会返回值：

```
$("textarea").each(function(){
    alert($(this).val());
}); 
```

我已经尝试过 .text()、.html()、.value - 它们都没有返回任何内容！它不会警告“未定义”或 null，而只是一个空值。

我不知道为什么。

提前感谢您的建议。

**更多信息**

HTML是：

```
<textarea id="Bio" rows="4"></textarea> 
```

JQuery 库： [http ://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js](http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js)

dom 加载完成后，通过按钮触发函数。

代码的简化版本在这里： [http ://social-gamer.com/textarea.html](http://social-gamer.com/textarea.html)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-30T22:28:55.553

它确实有效，还有其他问题。你可以[看到它在这里工作](http://jsfiddle.net/2bjLJ/)

```
<textarea>Hello One</textarea>
<textarea>Hello One two</textarea>
<textarea>Hello One two three</textarea>

$("textarea").each(function(){
    alert($(this).val());
}); 
```

*   您使用的是什么版本的 jQuery？
*   您的代码是否在加载 DOM 之前运行？
*   你的 HTML 是什么样的？您是否为 textarea 分配了 value 属性？那不起作用，请参阅[http://jsfiddle.net/2bjLJ/1/](http://jsfiddle.net/2bjLJ/1/)

**其他注意事项**

`each`当您想在所有底层对象上调用方法时不需要。

```
$("textarea").each(function(){
    $(this).val("ASDFASDF");
});

$("textarea").each(function(){
    $(this).css({"border":"2px solid red"});
}); 
```

它可以只是

```
$("textarea").val("ASDFASDF");
$("textarea").css({"border":"2px solid red"}); 
```

但是，在阅读时，您必须调用 each，否则您将从 jQuery 集合中的第一个对象中获取值

[**工作示例**](http://jsfiddle.net/2bjLJ/2/)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-30T23:32:05.257

问题最终成为重复的 ID。通常我会先检查这个，但我什至没有通过它的 ID 访问元素，而只是通过输入类型“textarea”。

因此，即使按类或仅按其在 DOM 中的位置来定位元素，如果它具有重复的 ID，它也会失败。我之前并没有真正考虑这么多，因为我没有通过身份证！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-30T23:46:03.400

你好吗，

听着，TextArea 是唯一一个不使用 val() 获取和设置值的输入，因为当您将值放在 textarea 上时，您将放在标签内。

有一个例子

```
<textarea>Inside is the content so to 
get the content inside of tags you use HTML or TEXT</textarea> 
```

因此，当您尝试获取数据时，您必须这样做：

```
$('textarea').text(); 
```

并设置文本区域的数据：

```
$('textarea').text("HERE'S THE CONTENT."); 
```

这是一个小提琴，你可以看到我所说的一切

[http://jsfiddle.net/nfTVJ/](http://jsfiddle.net/nfTVJ/)

祝你好运，再见

# sql - SQL - 从左连接中删除重复项

> ID：14615032
> 
> 赞同：9
> 
> 时间：2013-01-30T22:24:24.680
> 
> 标签：sql, sql-server, join

我正在创建两个表的连接视图，但是从 table2 中得到了不需要的重复项。
例如：table1 有 9000 条记录，我需要结果视图包含完全相同的记录；table2 可能有多个具有相同 FKID 的记录，但我只想返回一条记录（我的客户可以随机选择）。我有以下代码可以正常工作，但性能比预期慢（超过 14 秒）。

```
SELECT     
    OBJECTID
    , PKID
    ,(SELECT TOP (1) SUBDIVISIO
        FROM dbo.table2 AS t2
        WHERE (t1.PKID = t2.FKID)) AS ProjectName
    ,(SELECT TOP (1) ASBUILT1
        FROM dbo.table2 AS t2
        WHERE (t1.PKID = t2.FKID)) AS Asbuilt
FROM dbo.table1 AS t1 
```

有没有办法对连接做类似的事情来提高性能？
我正在使用 SQL Server 2008 R2。
我接近了以下代码（约 0.5 秒），但“不同”仅在所有列重复时过滤掉记录（而不仅仅是 FKID）。

```
SELECT
    t1.OBJECTID
    ,t1.PKID
    ,t2.ProjectName
    ,t2.Asbuilt
FROM dbo.table1 AS t1
    LEFT JOIN (SELECT
        DISTINCT FKID
        ,ProjectName
        ,Asbuilt
        FROM dbo.table2) t2
    ON t1.PKID = t2.FKID 
```

表格示例

```
table1          table2

OID, PKID       FKID, ProjectName, Asbuilt
1, id1          id1, P1, AB1
2, id2          id1, P5, AB5
3, id4          id2, P10, AB2
5, id5          id5, P4, AB4 
```

在上面的示例中，返回的记录应该是 id5/P4/AB4、id2/P10/AB2 和 (id1/P1/AB1 OR id1/P5/AB5)

我的搜索提出了类似的问题，但没有一个能解决我的问题。 [链接](https://stackoverflow.com/questions/757957/restricting-a-left-join),[链接](https://stackoverflow.com/questions/6127338/sql-select-distinct-but-return-all-columns)
在此先感谢您的帮助。这是我的第一篇文章，如果我违反了任何规则，请告诉我。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-01-30T22:41:57.300

这将给出您要求的结果，并且应该具有最佳性能。

```
SELECT     
    OBJECTID
    , PKID
    , t2.SUBDIVISIO,
    , t2.ASBUILT1

FROM        dbo.table1 AS t1
OUTER APPLY (
    SELECT  TOP 1 *
    FROM    dbo.table2 AS t2
    WHERE   t1.PKID = t2.FKID
    ) AS t2 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-30T22:32:03.860

您的原始查询正在为两列生成任意值（使用`top`with no `order by`）。你可以得到同样的效果：

```
SELECT t1.OBJECTID, t1.PKID, t2.ProjectName, t2.Asbuilt
FROM dbo.table1 t1 LEFT JOIN
     (SELECT FKID, min(ProjectName) as ProjectName, MIN(asBuilt) as AsBuilt
      FROM dbo.table2
      group by fkid
     ) t2
    ON t1.PKID = t2.FKID 
```

此版本将 替换`distinct`为`group by`.

要在 SQL Server 中获得真正随机的行（您的语法建议您正在使用该行），请尝试以下操作：

```
SELECT t1.OBJECTID, t1.PKID, t2.ProjectName, t2.Asbuilt
FROM dbo.table1 t1 LEFT JOIN
     (SELECT FKID, ProjectName, AsBuilt,
             ROW_NUMBER() over (PARTITION by fkid order by newid()) as seqnum
      FROM dbo.table2
     ) t2
    ON t1.PKID = t2.FKID and t2.seqnum = 1 
```

这假定版本为 2005 或更高版本。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-30T22:51:37.340

如果您想要描述的结果，您需要使用`INNER JOIN`以下查询将满足您的需要：

```
SELECT
  t1.OID,
  t1.PKID,
  MAX(t2.ProjectName) AS ProjectName,
  MAX(t2.Asbuilt) AS Asbuilt
FROM table1 t1
JOIN table2 t2 ON t1.PKID = t2.FKID
GROUP BY
  t1.OID,
  t1.PKID 
```

如果您想查看左表（**table1**）中的所有行，无论它是否在右表中有对，那么使用`LEFT JOIN`和相同的查询将为您提供所需的结果。

**已编辑**

这种构造性能很好，不需要使用子查询。

# c# - 设置一个带接口的类，2个选项

> ID：14615033
> 
> 赞同：0
> 
> 时间：2013-01-30T22:24:25.570
> 
> 标签：c#, optimization

我正在通过一个示例，但我不确定他们为什么要这样做。他们正在将 mySender 设置为 IEmailSender....

```
IEmailSender mySender = new MyEmailSender(); 
```

为什么不写

```
MyEmailSender mySender = new MyEmailSender(); 
```

因为 MyEmailSender 已经有 IEmailSender 接口参考

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T22:26:53.830

稍后在他们可以编写的代码中

```
mySender = new MyNewEmailSender(); 
```

如有必要。但这不一定是对或错。他们只是想表达一个观点，`mySender`不管`IEmailSender`实施如何。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-30T22:27:21.967

原因有很多，一个是如果你对`IEmailSender`接口编程，后来又决定`MyEvenBetterEmailSender`改用你，你只需要更改一行代码！

另一个是它允许您将代码与特定实现“分离”，甚至可以将其注入而不是在程序中硬编码。

在 Wikipedia上阅读有关[基于接口的编程的更多信息。](http://en.wikipedia.org/wiki/Interface-based_programming)

# javascript - 传递给 .on() 函数的变量始终是最后一个元素

> ID：14615036
> 
> 赞同：0
> 
> 时间：2013-01-30T22:24:33.903
> 
> 标签：javascript, jquery

我有点用这样的对象来模拟 Backbone 的事件系统：

```
var events = {
    'click .one': 'fnOne',
    'click .two': 'fnTwo',
    'click .three': 'fnThree'
} 
```

然后使用 jquery 设置事件侦听器，我使用以下内容：

```
var method,
    match,
    event_name,
    selector;

var scope = {
     // Complex object literal passed to the event's
     // function for access...
};

var delegateEventSplitter = /^(\S+)\s*(.*)$/;
for (key in events) {
    if (events.hasOwnProperty(key)) {
        method = events[key];
        match = key.match(delegateEventSplitter);
        event_name = match[1];
        selector = match[2];

        $('#element').on(event_name,selector,function(event){ 
            method(event,scope);
        });
     }
} 
```

我遇到的问题是它绑定正确，除了所有事件都会触发最后一个函数`fnThree`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-30T22:36:37.687

Just a closure/loop problem. A closure only binds lexical names, not the values at the time.

One of my favorite ways to capture values is `with`:

```
for (key in events) {
    if (events.hasOwnProperty(key)) {
        method = events[key];
        match = key.match(delegateEventSplitter);
        event_name = match[1];
        selector = match[2];

        with ({method:method})
        {
            $('#element').on(event_name,selector,function(event){ 
               method(event,scope);
            });
        }
    }
} 
```

But this causes some acolytes of Doug Crockford to die of heart attack so you can also do:

```
 (function(method) { $('#element').on(event_name,selector,function(event){ 
               method(event,scope);
            }); })(method); 
```

I'll let you decide which you find preferable.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T22:37:26.190

尝试使用`$.each()`. 它的函数参数在每次迭代时方便地形成一个闭包。

```
$.each(events, function(key, method) {
    var match = key.match(delegateEventSplitter);
    $('#element').on(match[1], match[2], function(event){ 
        method(event, scope);
    });
}); 
```

# java - java.lang.ClassFormatError：尝试使用 Mockito 模拟 HttpServletRequest 时

> ID：14615039
> 
> 赞同：2
> 
> 时间：2013-01-30T22:24:38.177
> 
> 标签：java, eclipse, jakarta-ee, junit, mockito

我在 Eclipse 中运行一些单元测试，我使用 Mockito 模拟如下：-

```
 HttpServletRequest mockRequest = mock(HttpServletRequest.class); 
```

当我从**Eclipse 中**运行测试时，我得到以下堆栈跟踪

```
java.lang.ClassFormatError: Absent Code attribute in method that is not native or abstract in class file javax/servlet/ServletException
at java.lang.ClassLoader.defineClass1(Native Method)
at java.lang.ClassLoader.defineClassCond(ClassLoader.java:631)
at java.lang.ClassLoader.defineClass(ClassLoader.java:615)
at java.security.SecureClassLoader.defineClass(SecureClassLoader.java:141)
at java.net.URLClassLoader.defineClass(URLClassLoader.java:283)
at java.net.URLClassLoader.access$000(URLClassLoader.java:58)
at java.net.URLClassLoader$1.run(URLClassLoader.java:197)
at java.security.AccessController.doPrivileged(Native Method)
at java.net.URLClassLoader.findClass(URLClassLoader.java:190)
at java.lang.ClassLoader.loadClass(ClassLoader.java:306) 
```

但是，当使用 maven 从命令行运行时，我没有收到任何此类错误

我在其他地方看到过类似的问题，并且我确保我有实现 jar 而不仅仅是 API jar。我的maven依赖如下

```
 <dependency>
        <groupId>org.glassfish</groupId>
        <artifactId>javax.servlet</artifactId>
        <version>10.0-b28</version>
        <scope>test</scope>
    </dependency> 
```

我在这方面花了太多时间，摆弄我的类路径并多次清理我的工作区，但无济于事。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-01-30T22:48:43.287

我刚刚创建了一个简单的测试：

```
@Test
public void test(){
    HttpServletRequest request = Mockito.mock(HttpServletRequest.class);
    System.out.println(request);
} 
```

使用我的 Helios eclipse 和您提供的依赖项 - 一切都按预期工作，没有例外......您可能在 eclipse 的类路径中有其他内容，或者问题可能来自不同的行。

您可以尝试使用（例如）检查使用了哪个 jar

```
HttpServletRequest.class.getProtectionDomain().getCodeSource() 
```

您还可以考虑使用 httpunit 而不是模拟请求。

# iron.io - 在 Iron.io 工作者中使用 Hugin 和 libpano13

> ID：14615046
> 
> 赞同：0
> 
> 时间：2013-01-30T22:25:22.077
> 
> 标签：iron.io, ironworker

我想使用 Iron.io 工作人员来拼接全景图并使用 OpenSource Hugin 和 libpano13 工具包创建 HDR。所需的程序都是命令行（不需要 GUI），但我不完全确定如何构建一个包含正确二进制文件以使用 Hugin panotools 的工作程序。

我可以为 Iron.io 工作操作系统（Ubuntu Linux）预编译正确的二进制文件吗？我可以创建一个 VM 并在其上安装 Ubuntu，以构建一组包含在我的工作程序中的二进制文件。但是有没有更好的方法在工作文件中使用“build”指令？我马上看到的问题是 Hugin 是一个基于 cmake 的构建，所以我需要创建一些使用 autoconf/automake 的东西，对吧？

我也不需要所有的 Hugin。我只需要控制点查找实用程序和 enfuse/enblend 实用程序来进行实际拼接。我不需要任何基于 wxWidgets 的 GUI 东西。

谁能阐明我将如何解决这个问题？谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-30T22:50:56.523

你真的只需要静态编译的 x64 二进制文件，在任何地方找到它们——你就完成了。

可能的解决方案：

*   在本地 Ubuntu x64 上安装东西（IronWorker 使用 12.04 TLS x64）并将所需文件包含到 worker 的包中（上传后只是 .zip 文件）（并且可能在 worker 启动时扩展 PATH）
*   使用`build`命令远程执行任何安装过程（尽管您仍然限于非 root 操作）
*   使用`deb`命令安装现有的 .deb 包。

.worker 文件示例（包括自定义版本的 imagemagick）：

```
runtime 'binary'
exec 'run.sh'
full_remote_build true
deb 'http://mirror.pnl.gov/ubuntu//pool/main/i/imagemagick/libmagickcore5_6.7.7.10-2ubuntu4_amd64.deb'
deb 'http://mirror.pnl.gov/ubuntu//pool/main/i/imagemagick/libmagickwand5_6.7.7.10-2ubuntu4_amd64.deb'
deb 'http://mirror.pnl.gov/ubuntu//pool/main/i/imagemagick/imagemagick_6.7.7.10-2ubuntu4_amd64.deb' 
```

# javascript - 当 DOM 元素消失时，绑定事件会发生什么？

> ID：14615052
> 
> 赞同：2
> 
> 时间：2013-01-30T22:25:43.970
> 
> 标签：javascript, jquery, events, javascript-engine

当我将事件处理程序绑定到 DOM 元素然后销毁 DOM 元素时会发生什么？我是否必须通过解除绑定事件处理程序的过程？

```
<div id="el1">
    <span id="c">Click Me!</span>
</div>
<span id="note">Note...</span>
<script>
    var i=0;
    $("#c").click(function(){
        i++;
        $("#note").html("'Click Me!' was clicked.");
        $("#el1").html("<span id=\"c\">Click Me! ("+i+" time)</span>");
    });
</script> 
```

在行动：http: [//jsfiddle.net/lordloh/FyLdM/](http://jsfiddle.net/lordloh/FyLdM/)

显然，偶数处理程序不会绑定到具有相同 id 的新 DOM 对象。我正在使用的解决方法是

```
<div id="el1">
   <span id="c">Click Me!</span>
</div>
<span id="note">Note...</span>
<script>
var i=0;
$("#c").click(clickHandler);

function clickHandler(){
    i++;
    $("#note").html("'Click Me!' was clicked.");
    $("#el1").html("<span id=\"c\">Click Me! ("+i+" time)</span>");
    $("#c").click(clickHandler);
}
</script> 
```

在行动：http: [//jsfiddle.net/lordloh/FyLdM/1/](http://jsfiddle.net/lordloh/FyLdM/1/)

我担心的是这是一种不好的做法还是可以接受？如果这个序列重复数百万次会发生什么？javascript引擎会冒内存不足的风险吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T22:30:07.557

您应该专注于事件委托。

```
$('#someWrapper').on('click', '.someClass', function() {
   // do your stuff.
}); 
```

然后您可以将元素添加到包装器中，分配它们`.someClass`并且事件将触发。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T22:34:49.500

不必在每次创建元素时都重新绑定事件，而应按照 AlienWebguy 的建议使用事件委托。但是，在这种情况下，从 dom 中删除 jQuery 对象后没有任何内容指向它们，因此垃圾收集应该负责清理未使用的变量。

# compilation - 在 msys 中使用外部库 - minGW

> ID：14615053
> 
> 赞同：0
> 
> 时间：2013-01-30T22:25:49.677
> 
> 标签：compilation, mingw, msys, fltk

我想编写和编译需要 FLTK 1.3.2 GUI 库的 C++ 代码。我想将 minGW 与 MSYS 一起使用。
我已经正确安装了 minGW 和 MSYS，并且能够使用 ./configure make 构建 FLTK。一切都到了这个地步。现在我正在测试 hello 程序，并且可以让编译器找到头文件，但它返回错误 - 我认为这是编译器找不到 FLTK 库的位置的结果。我查看了 minGW 站点，似乎让 MSYS 将编译器引导到正确位置的困难并不少见。

我已经使用 C++ minGW 工作了大约一年，但对 MSYS 完全陌生。

这是我的命令：

```
c++ Hello.cxx -Lc:/fltk-1.3.2/test -Ic:/fltk-1.3.2 -o Hello.exe 
```

（我不确定我的语法是否正确，因此感谢任何评论）

这是我从编译器得到的：

```
C:\Users\CROCKE~1\AppData\Local\Temp\ccbpaWGj.o:hello.cxx(.text+0x3c): undefined reference to 'Fl_Window::Fl_Window(int, int, char const*)' 
```

...更多类似的评论...

```
collect2: ld returned exit status 
```

似乎编译器找不到我相信的函数定义`c:/fltk-1.3.2/test.`

同样，我是新手，因此非常感谢任何帮助。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T10:04:57.060

您的编译命令不好...您仅使用 -L 参数通知 LD 在哪里搜索其他库，但您没有指定您实际要使用的任何库。为此，您使用 -l 标志。所以命令应该是这样的：`g++ Hello.cxx -Lc:/fltk-1.3.2/test -Ic:/fltk-1.3.2 -o Hello.exe -llibfltk_images -llibfltk -llibwsock32 -llibgdi32 -llibuuid -llibole32` 我的建议 - 使用提供的 fltk-config 脚本来获取标志。

这是我从这里“偷走”的 MinGW makefile：[http](http://www.fltk.org/articles.php?L1286) ://www.fltk.org/articles.php?L1286 。

```
# Makefile for building simple FLTK programs
# using MinGW on the windows platform.

# I recommend setting C:\MinGW\bin AND C:\MinGW\msys\1.0\bin 
# in the environment %PATH% variable on the development machine.

MINGW=C:/MinGW
MSYS=${MINGW}/msys/1.0
FLTK_CONFIG=${MSYS}/local/bin/fltk-config
INCLUDE=-I${MSYS}/local/include
LIBS=-L${MSYS}/local/lib 
CC=${MINGW}/bin/g++.exe
RM=${MSYS}/bin/rm
LS=${MSYS}/bin/ls
EXE=dynamic_buttons_scroll.exe

SRC=$(shell ${LS} *.cxx)
OBJS=$(SRC:.cxx=.o)
CFLAGS=${INCLUDE} `${FLTK_CONFIG} --cxxflags`
LINK=${LIBS} `${FLTK_CONFIG} --ldflags`

all:${OBJS}
        ${CC} ${OBJS} ${LINK} -o ${EXE}

%.o: %.cxx
        ${CC} ${INCLUDE} ${CFLAGS} -c $*.cxx -o $*.o

clean:
        - ${RM} ${EXE}
        - ${RM} ${OBJS}

tidy: all
        - ${RM} ${OBJS}

rebuild: clean all

# Remember, all indentations must be tabs... not spaces. 
```

# ruby-on-rails - 用户认证过程中的错误

> ID：14615054
> 
> 赞同：1
> 
> 时间：2013-01-30T22:26:03.763
> 
> 标签：ruby-on-rails, ruby, authentication, authorization, password-encryption

我正在尝试在新应用程序中重新创建用户身份验证过程。我有一个旧的，现有的用户身份验证，我真的复制了代码（当然是更改名称），而不是期望它是一个很好的起点......但是它不起作用！我已经尝试了一切，但由于某种原因我无法登录这个程序......也许我忽略了一些东西？

登录.html.erb

```
<div class="login" style="margin-left: 390px;">
  <%= form_tag(:action => 'team_login') do %>
  <table>
    <tr>
      <td><%= label_tag(:username) %></td>
      <td><%= text_field_tag(:username) %></td>
    </tr>
    <tr>
      <td><%= label_tag(:password) %></td>
      <td><%= password_field_tag(:password) %></td>
    </tr>
    <tr>
      <td>&nbsp;</td>
      <td><%= submit_tag("Log In") %></td>
    </tr>
  </table>
  <% end %>
</div> 
```

团队控制器.rb

```
 def team_login
    authorized_team = Team.authenticate(params[:username], params[:password])
    if authorized_team
      #To Do: mark user as logged in
      session[:team_id] = authorized_team.id
      session[:team_name] = authorized_team.username
      #check!
      flash[:notice] = "You are now logged in."
      redirect_to(:controller => 'show', :id => session[:team_id])
    else
      flash[:notice] = "Invalid username and password combination"
      redirect_to(:action => 'login')
    end
  end 
```

团队.rb

```
 attr_accessible :username, :password

  attr_accessor :password

  before_save :create_hashed_password

  def self.authenticate(username="", password="")
    qTeam = Team.find_by_username(username)
    if qTeam && qTeam.password_match?(password)
      return qTeam
    else
      return false
    end
  end

  def password_match?(password="")
    hashed == Team.salt_hash(salt, password)
  end

  def self.make_salt(username="")
    Digest::SHA1.hexdigest(" #{username} #{Time.now}")
  end

  def self.salt_hash(salt="", password="")
    Digest::SHA1.hexdigest("#{salt} #{password}")
  end

  private

  def create_hashed_password
    unless password.blank?
      self.salt = Team.make_salt(username) if salt.blank?
      self.hashed = Team.salt_hash(password, salt)
    end
  end 
```

* * *

我意识到创建用户时发生了错误。如果我手动进入并使用保存给用户的盐，密码，并生成一个散列密码，它与保存在数据库中的密码不同。我假设这是发生错误的地方 - 我用来创建用户的模板只是从脚手架生成的标准 _form。所有代码都和上面一样——before_save 运行了几个方法（create_hashed_pa​​ssword、make_salt 和 salt_hash）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T23:18:54.753

您需要确保您拥有：

```
:action => 'team_login' 
```

指向一条有效的路线。

我通常使用类似的东西：

```
<%= form_tag sessions_path do %>
...
<% end %> 
```

使用如下所示的路线：

```
MyApp::Application.routes.draw do
  get "sessions/new"
  get "login" => "sessions#new", :as => "login"
  resources :sessions
  ...
end 
```

使用如下所示的 session_controller：

```
class SessionsController < ApplicationController

  def create
    user = login(params[:email], params[:password], params[:remember_me])
    if user
      redirect_back_or_to root_url, :notice => "Welcome, #{user.email}."
    else
      flash.now.alert = "Email or password was invalid"
      render :new
    end
  end

  def destroy
    logout
    redirect_to root_url, :notice => "Logged out!"
  end
end 
```

在将身份验证等功能从一个应用程序复制/粘贴到另一个应用程序时，忘记连接路由是一种常见的错误。

# c# - 添加链接到 WebBrowser 控件的 InnerText

> ID：14615055
> 
> 赞同：0
> 
> 时间：2013-01-30T22:26:14.127
> 
> 标签：c#, webbrowser-control, mshtml

我在 WebBrowser 控件中显示传入的电子邮件。如果电子邮件采用 HTML 格式，则链接是可点击的，用户可以在默认浏览器中快速导航到 URL。但是，如果电子邮件是纯文本的，我只是将 WebBrowser 的 InnerText 设置为等于电子邮件的文本。

这给我留下了没有锚标记的 URL，用户必须将 URL 复制并粘贴到他们的浏览器中。

我的第一直觉只是将 InnerHTML 设置为电子邮件文本，使用正则表达式查找任何 URL，并将匹配项替换为相同的内容，但使用锚标记。

这提出了删除所有换行符的问题，所以我只是用适当的标签替换了这些换行符。

```
public static string CheckPlainTextLinks(string html)
{
  Regex regx = new Regex(@"((https?|ftp|gopher|telnet|file|notes|ms-help):((//)|(\\\\))+[\w\d:#@%/;$()~_?\+-=\\\.&]*)", RegexOptions.IgnoreCase);
  MatchCollection mactches = regx.Matches(html);

  foreach (Match match in mactches)
  {
    html = html.Replace(match.Value, "<a href='" + match.Value + "'>" + match.Value + "</a>");
  }

  html = html.Replace(Environment.NewLine, "<br />");

  return html;
} 
```

这是我扫描文本和添加链接的全部功能。然后，我将 webBrowser 控件的 InnerHTML 设置为此函数返回的内容。不幸的是，当我对该函数的调用被取消时，程序开始出现 OutOfMemory 异常。

我研究了使用 mshtml 创建链接，而不是在这些帖子的帮助下直接更改 html，[http: //social.msdn.microsoft.com/Forums/da-DK/csharpgeneral/thread/1d050260-3625-42cc-94ec -59bba0651a1c](http://social.msdn.microsoft.com/Forums/da-DK/csharpgeneral/thread/1d050260-3625-42cc-94ec-59bba0651a1c)。我只是不确定如何在每个正则表达式匹配上创建 IHTMLTxtRange。

有没有更好的方法来创建这些链接或内存不足异常的解决方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T22:57:55.827

这对你会更好吗？

```
public static string CheckPlainTextLinks(string html) {
    var regx=new Regex(@"((https?|ftp|gopher|telnet|file|notes|ms-help):((//)|(\\\\))+[\w\d:#@%/;$()~_?\+-=\\\.&]*)", RegexOptions.IgnoreCase);
    return regx.Replace(html, x => "<a href='"+x.Value+"'>"+x.Value+"</a>").Replace(Environment.NewLine, "<br />");
} 
```

这不是在循环中重复替换，而是`foreach`与`MatchEvaluator`.

# jquery - Android 4.0.4 页面的背景线性渐变在滚动和触摸时发生变化

> ID：14615057
> 
> 赞同：0
> 
> 时间：2013-01-30T22:26:15.437
> 
> 标签：jquery, css, html, jquery-mobile

我正在使用 4.0.4 版本在 Andriod 设备上测试网页。网站的背景设置为线性渐变。

```
background-image: -webkit-gradient(linear, left top, left bottom, from(#afe3f3 10% /*{a-body-background-start}*/), to(#FFFFFF 35% /*{a-body-background-end}*/)); /* Saf4+, Chrome */
background-image: -webkit-linear-gradient( #a1ddf1 10% /*{a-body-background-start}*/, #FFFFFF 35% /*{a-body-background-end}*/); /* Chrome 10+, Saf5.1+ */
background-image:    -moz-linear-gradient( #a1ddf1 10% /*{a-body-background-start}*/, #FFFFFF 35% /*{a-body-background-end}*/); /* FF3.6 */
background-image:     -ms-linear-gradient( #a1ddf1 10% /*{a-body-background-start}*/, #FFFFFF 35% /*{a-body-background-end}*/); /* IE10 */
background-image:      -o-linear-gradient( #a1ddf1 10% /*{a-body-background-start}*/, #FFFFFF 35% /*{a-body-background-end}*/); /* Opera 11.10+ */
background-image:         linear-gradient( #a1ddf1 10% /*{a-body-background-start}*/, #FFFFFF 35%/*{a-body-background-end}*/);
background-attachment: fixed; 
```

当我尝试在字段中输入数据并显示键盘时，渐变百分比不断变化，导致颜色随机变化。

有谁知道这个问题的解决方法？

我尝试在窗口调整大小时使用 jQuery 添加样式，但它不起作用。

```
var initialScreenSize = window.innerHeight;
window.addEventListener("resize", function () {
    if (window.innerHeight < initialScreenSize) {
        $("[data-role=footer]").hide();
    }
    else {
        $("[data-role=footer]").show();
    }

    var isAndroid = navigator.userAgent.toLowerCase().indexOf('android') > -1;
     if (isAndroid) {
           $("[data-role=page]").css('background-image', '-webkit-linear-gradient( #afe3f3 10% , #FFFFFF 35%');

    }
}); 
```

# windows - 在每个目录上执行相同的脚本

> ID：14615060
> 
> 赞同：0
> 
> 时间：2013-01-30T22:26:43.563
> 
> 标签：windows, powershell, batch-file

我有这个精彩的脚本：

```
gci -Recurse| where {$_.LastWriteTime -gt (Get-Date).AddDays(-45)}| group Extension -NoElement 
```

输出是：

```
4352    .JPG
2352    .doc
2135    .pdf
1811    .xls
1472    
857 .pub
732 .xlsx
565 .docx
66  .rtf
64  .lnk
63  .ppt
61  .url
41  .png
38  .xml
28  .htm
27  .msg 
```

我想要的是在当前目录的每个目录上运行相同的脚本（非递归）。例如，如果我在目录`c:\test`中，并且该目录作为文件夹`alex`,`liza`和`harry`, 那么我希望将此脚本应用于`c:\test\alex`, `c:\test\liza`,`c:\test\harry`

我想要的输出是：

```
4352    .JPG    directory name
2352    .doc    directory name
2135    .pdf    directory name
1811    .xls    directory name
1472        directory name
857 .pub    directory name
732 .xlsx   directory name
565 .docx   directory name 
```

如何修改上述脚本以对每个目录执行此操作并附加目录名称？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T22:33:12.120

格式重要吗？如果没有，您可以按多个属性分组。

```
gci -Recurse| 
    where {$_.LastWriteTime -gt (Get-Date).AddDays(-45)}|
    group Extension, Directory -NoElement 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T09:20:51.690

试试这个

```
Get-ChildItem c:\test | Where-Object {$_.PSIsContainer} | ForEach-Object{
   $folder = $_.FullName
   Get-ChildItem $_.FullName -Recurse | Where-Object {$_.LastWriteTime -gt (Get-Date).AddDays(-45)} | Group-Object Extension -NoElement | Select-Object Name,Count,@{n='Directory';e={$folder}}
} 
```

# php - 从 php 中的文本文件中删除匹配项

> ID：14615067
> 
> 赞同：2
> 
> 时间：2013-01-30T22:27:02.067
> 
> 标签：php, regex

考虑一个项目列表的 txt 文件

qqqqqq

啊啊啊

dddddd

哈哈哈

dddddd

哈哈哈

999999

并且列表中的某些项目是重复的。如何使用 php 输出一个文本文件，其中删除了任何重复的内容。

结果：

qqqqqq

啊啊啊

999999

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-30T22:33:55.267

您可以使用`array_unique`

然后将内容返回

```
$file = fopen("filename.txt", "r");
$members = array();

while (!feof($file)) {
   $members[] = fgets($file);
}

fclose($file);
$unique_members = array(); 
$unique_members = array_unique($members);
var_dump($unique_members);
//write the content back to the file 
```

上述解决方案仅用于删除重复项并使它们独一无二。感谢 nhahtdh 指出。

```
$count_members = array_count_values($members); 
foreach($count_members as $key=>$value)
{
   if($value == 1) 
       //write it to the file 
} 
```

所以你不需要 array_unique 的东西 再次抱歉

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T22:40:49.580

```
<?php

$file = file_get_contents('file.txt'); //get file to string
$row_array = explode("\n",$file); //cut string to rows by new line
$row_array = array_count_values(array_filter($row_array));

foreach ($row_array as $key=>$counts) {
    if ($counts==1)
        $no_duplicates[] = $key; 
}

//do what You want
echo '<pre>';
print_r($no_duplicates);

file_put_contents('no_duplicates.txt',$no_duplicates); //write to file. If file don't exist. Create it. 
```

# uiimagepickercontroller - 导入用户相册相册

> ID：14615070
> 
> 赞同：0
> 
> 时间：2013-01-30T22:27:15.310
> 
> 标签：uiimagepickercontroller, photos, alassetslibrary

我正在尝试一次导入多张照片，而且一次导入多个相册（或单个相册，如果不可能的话）。

基本上我想在 iPad 上实现类似于股票相框应用程序的东西。它让您选择相册的方式（iPad 设置>相框）。

到目前为止，我的印象是**UIImagePickerController**还不够强大。我确实发现**ALAssetsLibrary**很有希望，但还没有成功。

我需要的只是给定相册中给定的 NSArray 照片。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T02:03:37.040

使用**[ALAssetsGroupType](http://developer.apple.com/library/ios/#documentation/AssetsLibrary/Reference/ALAssetsLibrary_Class/Reference/Reference.html)**。它是识别资产类型的位域。

```
typedef NSUInteger ALAssetsGroupType; 
```

**可用性：**在 iOS 4.0 及更高版本中可用。

**声明于：** ALAssetsLibrary.h

**资产类型**

> ALAssetsGroup 库
> 
> ALAssetsGroup相册
> 
> ALAssetsGroupEvent
> 
> ALAssetsGroupFaces
> 
> ALAssetsGroupSavedPhotos
> 
> ALAssetsGroupPhotoStream
> 
> ALAssetsGroupAll

**示例代码：**

```
[assetsLibraryObj enumerateGroupsWithTypes:ALAssetsGroupSavedPhotos usingBlock:listGroupBlock failureBlock:failureBlock]; 
```

**ALAssetsGroup 库**

包含从 iTunes 同步的所有资产的资料库组。

在 iOS 4.0 及更高版本中可用。

在 ALAssetsLibrary.h 中声明。

**ALAssetsGroup相册**

在设备上创建或从 iTunes 同步的所有专辑，不包括照片流或共享流

在 iOS 4.0 及更高版本中可用。

在 ALAssetsLibrary.h 中声明。

**ALAssetsGroupEvent**

所有事件，包括在相机连接套件导入期间创建的事件。

在 iOS 4.0 及更高版本中可用。

在 ALAssetsLibrary.h 中声明。

**ALAssetsGroupFaces**

从 iTunes 同步的所有面孔专辑。

在 iOS 4.0 及更高版本中可用。

在 ALAssetsLibrary.h 中声明。

**ALAssetsGroupSavedPhotos**

相机胶卷中的所有照片。

在 iOS 4.0 及更高版本中可用。

在 ALAssetsLibrary.h 中声明。

**ALAssetsGroupPhotoStream**

PhotoStream 相册。

在 iOS 6.0 及更高版本中，这还包括共享流。

在 iOS 5.0 及更高版本中可用。

在 ALAssetsLibrary.h 中声明。

**ALAssetsGroupAll**

与除 ALAssetsGroupLibrary 之外的所有组类型进行 ORing 相同。

在 iOS 4.0 及更高版本中可用。

在 ALAssetsLibrary.h 中声明。

# javascript - javascript 可以处理的最大文件大小是多少？

> ID：14615074
> 
> 赞同：3
> 
> 时间：2013-01-30T22:27:29.000
> 
> 标签：javascript, jquery, xml

> **可能重复：**
> [Javascript 内存限制](https://stackoverflow.com/questions/2936782/javascript-memory-limit)

我正在使用客户端javascript创建html页面，它将在页面加载时加载大约150mb的XML数据文件。当文件大小约为 5 mb 时，将整个数据加载到数组中需要 30 秒。但是当我将文件更改为 140 mb 时，页面在 Firefox 中没有响应并且在 chrome 中突然崩溃。我加载数据的片段将处理 xml 中的每个单独的标签。我的问题是，javascript 的堆大小是否有限制？任何学术文章资源都最好强调我的研究。

```
$(document).ready(function () {
        // Open the xml file
        $.get("xyz.xml", {}, function (xml) {
            // Run the function for each  in the XML file
             $('abc', xml).each(function (i) {
                a = $(this).find("a").text();
                b = $(this).find("b").text();
                c = $(this).find("c").text();
                ab = $(this).find("ab").text();
                bc = $(this).find("bc").text();
                cd = $(this).find("cd").text();
                de = $(this).find("de").text();
                // process data
              dosomething(a,b,c,ab,bc,cd,de);
                   }); }); }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T23:02:00.057

我不知道有什么限制。我什至能够加载一个 1Gb 的文件。是的，最初加载速度很慢，而且一切都运行得很慢，因为大部分内存将被分页。

但是，尝试加载一个那么大的单个 JavaScript 对象时会出现问题，主要是因为解析器无法解析太大的对象。请参阅[我是否已达到浏览器中 JavaScript 可以处理的对象大小的限制？](https://stackoverflow.com/questions/4833480/have-i-reached-the-limits-of-the-size-of-objects-javascript-in-my-browser-can-ha/4833756#4833756)

对于这种情况，解决方案是将 JavaScript 对象的创建分解为多个阶段，而不是使用单个文字语句。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T22:30:33.093

因为要改进的太多了。首先，我想向您推荐一个[76 字节的帖子，以获得更快的 jQuery](http://james.padolsey.com/javascript/76-bytes-for-faster-jquery/)。因此，依靠 $_(this) 替换您的 $(this)。它将为您节省大量内存和时间！！

如果您不想使用单个 jQuery 对象，请像这样兑现您的变量：

```
$('abc', xml).each(function (i) {
   var $this = $(this);
   a = $this.find("a").text();
   ....
}); 
```

你可以提供你的 dosomething 函数来尝试改进它

# cocoa - NSTextfield 文本有时会消失

> ID：14615094
> 
> 赞同：1
> 
> 时间：2013-01-30T22:29:18.857
> 
> 标签：cocoa, nstextfield

我正在为用户名和密码使用两个 NSTextField。通常它工作正常，但偶尔当我切换出用户名文本字段时，用户名中的文本会消失，但字符串值仍然存在。当我切换回“用户名”文本字段时，该文本会重新出现，但在我单击或退出时消失。有谁知道问题是什么？

此外，有时当我退出编辑用户名文本字段时，我的程序会滞后。我不知道这些问题是否相关。

我的程序是一个`NSTextFieldDelegate`，我实现了这个`(BOOL)control:(NSControl *)control textShouldBeginEditing:(NSText *)fieldEditor`功能。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T21:26:08.083

我解决了这个问题。我想问题是每当我重新打开应用程序时，我都会重新初始化窗口。所以我只是做了一个`tempWindow`变量，就解决了这个问题。

# ruby-on-rails-3 - Rails 片段缓存不会过期

> ID：14615097
> 
> 赞同：2
> 
> 时间：2013-01-30T22:29:28.933
> 
> 标签：ruby-on-rails-3, caching, memcached

我在 3.1 中使用片段缓存。Rails 应用程序有一个片段没有过期，我不知道为什么。这是我想根据时间（每小时）过期的片段。我在 Heroku 上，使用 Memcachier Add-on 进行缓存。我似乎没有任何其他缓存问题。

在我的应用中，共有三个模型：用户、社区和活动。在 Community#index 上，有一个片段显示此社区中的用户的活动，我希望每小时过期。计算是 Activity 模型中的一种方法，工作正常 - 只是片段每小时到期（并且刷新）。

在我看来，我有：

```
<% cache("activity_#{community.id}", :expires_in => 1.hour) do %>               
    <-- content >      
<% end %> 
```

我还尝试通过在 User 模型中添加缓存的过期时间来使其成为计划任务。

```
 def self.expire_activity
    Community.find_each do |community|
      ActionController::Base.new.expire_fragment('activity_#{community.id}')
    end
  end 
```

我试图按照这个[问题](https://stackoverflow.com/questions/393395/how-to-call-expire-fragment-from-rails-observer-model)的答案来确定如何使模型中的缓存过期，但是使用这段代码，我得到了错误：

`NoMethodError: undefine method 'expire_fragment' for #<Class:0x5ffc3e8>`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-07-12T20:34:34.597

我在 Rails 4.2.1 上遇到了类似的问题。这是由于服务器设置的时区与 rails 应用程序的时区不匹配造成的。将两者设置为相同解决了我的问题。

在服务器上，假设是 Ubuntu，以 root 身份运行此命令并按照提示操作：

```
dpkg-reconfigure tzdata 
```

在`application.rb`配置文件中，确保以下行与服务器匹配（默认为 UTC）。

```
# config.time_zone = 'Central Time (US & Canada)' 
```

要获取 rails 的可用时区列表，请运行：

```
bundle exec rake time:zones:all 
```

我知道这是一个老问题，但在搜索解决方案时在谷歌中返回很高。

# asp.net - 使用 Knockout.js 绑定 JSONP 数据

> ID：14615098
> 
> 赞同：2
> 
> 时间：2013-01-30T22:29:28.943
> 
> 标签：asp.net, web, knockout.js, asp.net-web-api, knockout-2.0

我正在开发一个涉及跨域调用的 Web 项目，我决定使用 Knockout.js 和 ASP.NET Web Api。我在 VS 2012 中使用了单页应用程序模板，并按原样实现了 Knockout 类。当我从同一个域进行 JSON 调用时，该页面效果很好，但是当我尝试从远程服务器使用 JSONP 时，敲除似乎没有绑定数据。在进行 JSONP 调用时，我可以看到从远程接收到的 JSON 数据，但是敲除无法绑定数据。

这是我的 JavaScript ViewModel 类：

```
window.storyApp.storyListViewModel = (function (ko, datacontext) {
    //Data
    var self = this;
    self.storyLists = ko.observableArray();
    self.selectedStory = ko.observable();   
    self.error = ko.observable();

    //Operations
    //Load initial state from the server, convert it to Story instances, then populate self

    datacontext.getStoryLists(storyLists, error); // load update stories      

    self.selectStory = function (s) {
        selectedStory(s); $("#showStoryItem").click(); window.scrollTo(0, 0);
        storyItem = s;        
    }
    //append id to the hash for navigating to anchor tag
    self.backToStory = function () {        
        window.location.hash = storyItem.id;       
    }

    self.loadStories = function () {
        datacontext.getStoryLists(storyLists, error); // load update stories
    }

    return {
        storyLists: self.storyLists,
        error: self.error,        
        selectStory: self.selectStory
    };
})(ko, storyApp.datacontext);

// Initiate the Knockout bindings
ko.applyBindings(window.storyApp.storyListViewModel); 
```

我的 DataContext 类如下：

```
window.storyApp = window.storyApp || {};

window.storyApp.datacontext = (function (ko) {

    var datacontext = {
        getStoryLists: getStoryLists
    };

    return datacontext;

    function getStoryLists(storyListsObservable, errorObservable) {
        return ajaxRequest("get", storyListUrl())
            .done(getSucceeded)
            .fail(getFailed);

        function getSucceeded(data) {
            var mappedStoryLists = $.map(data, function (list) { return new createStoryList(list); });
            storyListsObservable(mappedStoryLists);
        }

        function getFailed() {
            errorObservable("Error retrieving stories lists.");
        }

        function createStoryList(data) {
            return new datacontext.StoryList(data); // TodoList is injected by model.js
        }
    }

    // Private
    function clearErrorMessage(entity) {
        entity.ErrorMessage(null);
    }

    function ajaxRequest(type, url, data) { // Ajax helper
        var options = {
            dataType: "JSONP",
            contentType: "application/json",
            cache: false,
            type: type,
            data: ko.toJSON(data)
        };
        return $.ajax(url, options);
    }

    // routes
    function storyListUrl(id) {
        return "http://secure.regis.edu/insite_webapi/api/story/" + (id || "");
    }
})(ko); 
```

此页面：[http](http://insite.regis.edu/insite/index.html) : //insite.regis.edu/insite/index.html 对secure.regis.edu 进行跨域调用，但它不起作用。然而，在secure.regis.eduinsite/index.html 上进行JSON 调用的同一页面工作得很好。

我究竟做错了什么？任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T18:05:09.153

感谢那些提供的帮助。

我设法通过将 WebApiContrib.Formatting.Jsonp 类添加到我的 WebApi 项目中来解决该问题，如[https://github.com/WebApiContrib/WebApiContrib.Formatting.Jsonp](https://github.com/WebApiContrib/WebApiContrib.Formatting.Jsonp)中所述，并对我的 jQuery Ajax 帮助程序类进行如下轻微修改：

```
function ajaxRequest(type, url, data, callbackWrapper) { // Ajax helper
    var options = {
        dataType: "jsonp",
        crossDomain : true,
        type: type,
        jsonp: "callback",
        jsonpCallback: callbackWrapper,
        data: ko.toJSON(data)
    };   

    return $.ajax(url, options);
} 
```

一切都像魅力一样。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T06:06:37.603

我建议如下：

创建一个简化的示例（没有 Knockout），它只使用简单的警报式成功和错误回调进行 AJAX 调用。确认它在跨域情况下抛出错误。

检查以下链接：[jQuery.ajax request with jsonp content type 之后的 parsererror](https://stackoverflow.com/questions/5359224/parsererror-after-jquery-ajax-request-with-jsonp-content-type)。如果这还不够，请在 Web（和 StackOverflow）上搜索有关 jQuery JSONP 解析错误和回调的信息。

如果您仍然卡住，并且您已经完成了 #1 并看到了我希望您会看到的内容，请使用您的简化示例重新编写这篇文章，并删除对 Knockout 的所有引用（在标题、标签中）。我知道 Knockout，但我不知道 JSONP，而知道 JSONP 的人似乎并没有接触到这个，所以我认为这个问题的受众是错误的。更改标题和标签以强调 JSONP/跨域方面可能会为您提供所需的帮助。

# jquery - 如何使 Jquery 菜单具有粘性

> ID：14615099
> 
> 赞同：2
> 
> 时间：2013-01-30T22:29:32.557
> 
> 标签：jquery, menu, sticky

我发现了一些非常简单的菜单代码，并且在没有插件的情况下仅使用 jquery 就可以很好地工作。我想做的是使其具有粘性，以便在链接到新页面时，该页面将菜单（如有必要）扩展到链接的项目，并在当前 window.location 与标签匹配时将该项目突出显示为活动的链接。我一直在寻找 Dom 控制台，但如果幸运的话，我认为必须有一个更简单的 jquery 解决方案。任何关于如何实现这一目标的建议都非常感谢。谢谢

```
 $(document).ready(function() {
        $('#menu ul').hide();

  /* Note the following three lines added as working solution to original question. */
  /* works for fully qualified url: i.e. http://www.mydomain.com/mypage.ext         */
  /* also note that addClass('current') requires .current class in your css          */

        var currentLink = $("a[href='" + location.href + "']");
        currentLink.parents("ul:hidden").slideDown("normal");
        currentLink.filter('a:first').addClass('current');

  /* end of solution fix                                                             */

        $('#menu li a').click(
         function() {
           var openMe = $(this).next();
           var mySiblings = $(this).parent().siblings().find('ul');
           if (openMe.is(':visible')) {
               openMe.slideUp('normal');  
           } else {
              mySiblings.slideUp('normal');  
              openMe.slideDown('normal');
           }
       });
    }); 
```

菜单如下：

```
<ul id="menu">
 <li><a href="#">1</a></li>
 <li><a href="#">2</a></li> 
 <li><a href="#">3</a>
     <ul class="submenu">
        <li><a href="#">3-1</a>
            <ul>
                <li><a href="#">3-1-1</a></li>
                <li><a href="#">3-1-2</a></li>
                <li><a href="#">3-1-3</a></li>
            </ul>
        </li>
        <li><a href="#">3-2</a>
            <ul>
                <li><a href="#">3-2-1</a></li>
                <li><a href="#">3-2-2</a></li>
            </ul>
        </li>
    </ul>
 </li>
 <li><a href="#">4</a></li>
 <li><a href="#" title="">5</a>
 <ul>
     <li><a href="#">5-1</a></li>
     <li><a href="#">5-2</a></li>
     <li><a href="#">5-3</a></li>
 </ul>
 </li>
 <li><a href="#" title="">6</a>
 <ul>
     <li><a href="#">6-1</a></li>
     <li><a href="#">6-2</a></li>
     <li><a href="#">6-3</a></li>
 </ul>
 </li>
 <li><a href="#" title="">7</a></li>
 <li><a href="#" title="">8</a>
 <ul>
     <li><a href="#">8-1</a></li>
     <li><a href="#">8-2</a></li>
     <li><a href="#">8-3</a></li>
 </ul>
 </li>
 <li><a href="#" title="">9</a></li>
</ul> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T22:50:47.003

这是查找具有匹配 url 的链接的防弹方法：

```
var currentLink = $("a").filter(function() {
    return this.href == location.href;
}); 
```

如果您总是使用应用程序相对 URL 作为您的 href（例如`href="/abc/123.htm"`），您可以使用属性选择器：

```
var appRelativeUrl = location.pathname + location.search + location.hash;
var currentLink = $("a[href='" + appRelativeUrl + "']"); 
```

如果你总是为你的 href 使用绝对 URL（例如`href="http://mysite.com/abc/123.htm"`），你也可以使用属性选择器：

```
var currentLink = $("a[href='" + location.href + "']"); 
```

但是，如果您在 HTML 中使用相对 url，请使用第一种技术，使用`.filter()`.

然后，展开菜单，找到所有隐藏的父`<ul>`元素并将它们向下滑动。显示父母后，如果要展开链接的子菜单，请单击链接：

```
currentLink.parents("ul:hidden").slideDown("normal", function() {
    currentLink.click();
}); 
```

[Demo here](http://fiddle.jshell.net/2dPYT/1/show/#3-1)
[演示代码](http://jsfiddle.net/2dPYT/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T22:35:05.300

这通常在服务器端处理，方法是在提供页面时向当前菜单项添加适当的类名，以便它们可见。

# ios - iOS 目标 C：将 utf-16 转换为 base64

> ID：14615101
> 
> 赞同：0
> 
> 时间：2013-01-30T22:29:36.560
> 
> 标签：ios, objective-c

如何从目标 C（iOS SDK）中的文本输入中读取字符串，并将其视为 UTF-16，将字节编码为 base64？

我在这两个方面都在苦苦挣扎，既将文本框的值视为 UTF-16，然后将这些字节编码为 UTF-16。

我很欣赏在 SO 上可能存在部分或类似的问题，我已经搜索（并阅读了各种帖子），但我是一个 iOS/objective C 菜鸟，可以从这里的完整示例中真正受益。

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-30T22:33:46.223

使用转换`NSString`为 UTF16 编码`NSData`

```
[str dataUsingEncoding:NSUTF16StringEncoding] 
```

然后将结果转换为 Base64，例如使用[Converting between NSData and base64 strings](https://stackoverflow.com/questions/5999370/nsdata-to-base64)`NSData`的答案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T22:34:16.283

假设您知道如何获取值`NSString*`（这应该很简单），您可以使用以下方法获取 UTF-16 `-getCharacters:range:`：

```
unichar *buffer = malloc(sizeof(unichar) * [str length]);
[str getCharacters:buffer range:NSMakeRange(0, [str length])]; 
```

这将为您提供一个`unichar*`缓冲区，它是一个 UTF-16 字符的缓冲区。

或者，如果您更喜欢使用`NSData*`，您可以使用

```
[str dataUsingEncoding:NSUTF16StringEncoding]; 
```

# django - Django的新手。如何在表单中加入“添加更多”按钮

> ID：14615116
> 
> 赞同：1
> 
> 时间：2013-01-30T22:30:19.157
> 
> 标签：django, django-forms

我是 python 和 Django 框架的新手。我正在处理我的应用程序中的许多表格，这些表格是由之前在这个职位上工作的人开发的一半。我现在需要更改表单以将“添加其他详细信息”按钮合并到我现有的表单中。

谁能帮我解决这个问题？如果您需要我提供的任何其他信息，请告诉我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T22:42:27.547

我建议您阅读表单文档：[https ://docs.djangoproject.com/en/dev/topics/forms/?from=olddocs](https://docs.djangoproject.com/en/dev/topics/forms/?from=olddocs)

我真的不明白您所说的“添加其他详细信息”是什么意思。我假设您只想在应用程序的 form.py 中添加其他项目，无论是模型数据吗？再次阅读文档，他们真的帮助了我。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T05:25:15.640

表单是否使用（内联）表单集？

您需要使用 javascript 或 jQuery 将一组新字段插入到网页中。表单集管理值也需要更新。

查看[此片段](http://djangosnippets.org/snippets/1389/)或[此插件](http://code.google.com/p/django-dynamic-formset/)

# windows - 如何在 Windows 上配置 npm-gyp 以使用 gcc 而不是 VC++？

> ID：14615117
> 
> 赞同：6
> 
> 时间：2013-01-30T22:30:25.687
> 
> 标签：windows, node.js, gcc, npm

有没有办法将 npm-gyp 配置为在 Windows 机器上使用 gcc（在 Linux 上看起来如此）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-02-17T18:56:35.913

如此处所述，这是不可能[的](https://github.com/TooTallNate/node-gyp/issues/402)。

**更新**已向 gyp 团队提交了
增强[请求。](https://code.google.com/p/gyp/issues/detail?id=448)
**更新**
...但可能不会采取行动。[[评论]](https://code.google.com/p/gyp/issues/detail?id=448#c1)

# entity-framework - EF 5.0 不删除可选的一对一导航属性

> ID：14615121
> 
> 赞同：0
> 
> 时间：2013-01-30T22:30:35.517
> 
> 标签：entity-framework, lazy-loading, code-first

在 Entity Framework 5 中将可选的一对一导航属性设置为 null 似乎无法进入数据库。这是预期的行为吗？

在下面的示例中，Person 是一个代理对象。我希望将地址设置为 null 会导致该地址从数据库中删除。

如果我在将地址设置为空之前延迟加载地址，则下面的代码有效。但是加载之前的地址

任何帮助将不胜感激。

```
namespace ConsoleApplication2
{
using System;
using System.Data.Entity;

internal class Program
{
    private static void Main(string[] args)
    {
        using (PersonContext context = new PersonContext())
        {
            // Make sure person with Id = 1 exists with an address.
            Person person = context.People.Find(1) ?? context.People.Add(new Person { Id = 1 });
            if (person.Address == null)
            {
                person.Address = new Address
                    {
                        Street = "123 Main Street",
                        City = "SomeCity",
                        State = new State
                        {
                            Code = "NY",
                            Name = "New York"
                        },
                        Zip = "11771"
                    };
            }
            context.SaveChanges();
        }

        // Setting address to null should remove relationship 
        using (PersonContext context = new PersonContext())
        {
            Person person = context.People.Find(1);

            Console.WriteLine("Person is a " + person.GetType());

            person.Address = null;
            context.SaveChanges();

            if (person.Address == null)
            {
                Console.WriteLine("Success: Person.Address is null.");
            }
            else
            {
                Console.WriteLine("Failure: Person.Address is not null.");
            }
        }
    }
}

public class Person
{
    public int Id { get; set; }
    public virtual Address Address { get; set; }
}

public class Address
{
    public int Person_Id { get; set; }
    public string Street { get; set; }
    public string City { get; set; }
    public int StateId { get; set; }
    public State State { get; set; }
    public string Zip { get; set; }
}

public class State
{
    public int Id { get; set; }
    public string Code { get; set; }
    public string Name { get; set; }
}

public class PersonContext : DbContext
{
    public DbSet<Person> People { get; set; }

    public DbSet<State> States { get; set; }

    protected override void OnModelCreating(DbModelBuilder modelBuilder)
    {
        base.OnModelCreating(modelBuilder);

        modelBuilder.Entity<Address>()
            .HasKey(x => x.Person_Id);

        modelBuilder.Entity<Person>()
            .HasOptional<Address>(x => x.Address)
            .WithRequired()
            .WillCascadeOnDelete();
    }
} 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T07:29:26.780

在不使用延迟加载的情况下，不会加载诸如 Address 等相关属性，因此已经为 null。

为了确保它总是被加载使用急切加载：

```
Person person = context.People.Include(x => x.Address).Single(x => x.Id == 1); 
```

# ruby-on-rails - 在 RHEL 6（x86_64 架构）中使用 rvm 构建 32 位 ruby

> ID：14615123
> 
> 赞同：0
> 
> 时间：2013-01-30T22:30:41.270
> 
> 标签：ruby-on-rails, ruby, linux, redhat, rhel

希望有人能为我阐明这个问题。我正在使用 rvm 在 RHEL 6 x86_64 中构建 ruby​​ 32 位。按照本[指南](http://www.jeffmdean.com/2012/3/13/developing-locally-with-oracle-and-ruby-on-a-mac)（忽略了与 Mac 相关的内容），我跑了

> rvm_archflags="-arch i386" CFLAGS="-arch i386" LDFLAGS="-arch i386" rvm install 1.9.2

我收到这样的错误：

```
Error running './configure --disable-install-doc --prefix=/home/deploy/.rvm/rubies/ruby-1.8.7-p371 --enable-shared' 
```

尝试原始方法：`rvm install 1.8.7 --32`并得到了这个：

> 'env MACOSX_DEPLOYMENT_TARGET= CFLAGS=-O3 -arch i386 -g -Os -pipe -no-cpp-precomp CCFLAGS=-arch i386 -g -Os -pipe CXXFLAGS=-arch i386 -g -Os -pipe LDFLAGS=-arch i386 -bind_at_load LDSHARED=cc -arch i386 -dynamiclib -undefined suppress -flat_namespace ./configure --disable-install-doc --prefix=/home/deploy/.rvm/rubies/ruby-1.8.7-p371 --enable-共享'

查看 config.log，它说 C 编译器无法创建可执行文件。从错误的外观来看，我猜它与目标机器不匹配（Mac 而不是 RHEL）。我不太明白为什么，因为 gcc 绝对是为 x86_64 Red Hat linux 构建的。有人可以就这个问题给我一个提示吗？

非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T23:34:06.483

在 32 位编译需要使用`-m32`linux 上的选项。该`-arch i386`选项是特定于 Mac 的。

当然，您需要全套 32 位开发库。

# c# - ViewBag RuntimeBinderException (MVC 4, ASPX)

> ID：14615124
> 
> 赞同：3
> 
> 时间：2013-01-30T22:30:44.267
> 
> 标签：c#, asp.net, .net, asp.net-mvc, viewbag

我使用引擎（不是 Razor）启动了一个 Default MVC 4 项目`ASPX`，一切正常。
我可以用

`<% Model.Name %>`

和

`<% Model.Rating %>`

用于图书评级（而不是 asp.net/mvc 教程网站上的餐厅评论）。但是，我的代码错误 `<% ViewBag.Message %>`

...所以由于某种原因，当从 BookReview 模型中的“BookReviewer”类继承时，我可以查看模型信息，但不能查看`Viewbag`？我错过了什么吗？代码如下。

[控制器] HomeController.cs：

```
 public class HomeController : Controller
    {
        var model = new BookReview()
        {
            Name = "Pro jQuery For Noobs",
            Rating = 7
        };
        return View(model);
    } 
```

[模型] BookReview.cs

```
 namespace Bookreview.Models
    {
            public class BookReview
            {
                    public string Name { get; set; }
                    public int Rating { get; set; }
            }
    } 
```

[查看] Index.aspx:

```
 <%@ Page Title="" Language="C#" MasterPageFile="~/Views/Shared/Site.Master" Inherits="System.Web.Mvc.ViewPage<BookRevew.Models.BookReviewer>" %>
    <asp:Content ID="indexFeatured" ContentPlaceHolderID="FeaturedContent" runat="server">
        <h2>
            <% ViewBag.Message %>
            <% Model.Name %>
            <% Model.Rating %>
        </h2>
    </asp:content> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-30T22:54:56.527

正如我们从您的评论中看到的那样，您正在`ViewBag.Message`另一个控制器中设置。`ViewBag`仅适用于为视图提供服务的**控制器设置的视图数据**。

如果您需要从另一个控制器发送它，您应该在您的操作方法中使用一个参数，然后您可以将 设置`ViewBag.Message`为传入的参数。

# google-maps - 谷歌地图自定义标记未出现

> ID：14615125
> 
> 赞同：0
> 
> 时间：2013-01-30T22:30:53.967
> 
> 标签：google-maps, google-maps-api-3

我无法使用数组显示自定义标记。我的代码看起来像这样

```
<html>
  <head>
    <style>
    body { font-family: Helvetica; }
    .map-content h3 { margin: 0; padding: 5px 0 0 0; }
    </style>
    <script type="text/javascript" src="http://maps.googleapis.com/maps/api/js?key=AIzaSyA6VosQrKQOjoTbDSp4Kk4BHvofOJFUfZU&sensor=true"></script>
    <script>
    // Set the Map variable
        var map;
        function initialize() { 
            var myOptions = {
            zoom: 9,
            mapTypeId: google.maps.MapTypeId.ROADMAP
        };
        var all = [
            ["Indianapolis International Airport", "7800 Col. H. Weir Cook Memorial Drive", "Indianapolis", "IN", "46241", "39.71449", "-86.29842", "airport"], 
            ["Location 2", "7205 Olmstead Dr", "Burlington", "NC", "27215", "36.069974", "-79.548101", "airport",],
            ["Location 3", "W Market St", "Graham", "NC", "27253", "36.0722225", "-79.4016207", "airport"],
            ["Location 4", "Mt Hermon Rock Creek Rd", "Graham", "NC", "27253", "35.9826328", "-79.4165216", "airport"],
            ["Location 5", "415 Spring Garden St", "Greensboro", "NC", "27401", "36.06761", "-79.794984", "airport"]
        ];                          
        var infoWindow = new google.maps.InfoWindow;
        map = new google.maps.Map(document.getElementById('map_canvas'), myOptions);
        // Set the center of the map
        var pos = new google.maps.LatLng(36.0621881, -79.5101063);
        map.setCenter(pos);
        function infoCallback(infowindow, marker) { 
            return function() {
            infowindow.open(map, marker);

        };

   }            
   function setMarkers(map, all) {  
    for (var i in all) {                                        
            var name    = all[i][0];
            var address = all[i][1];
            var city    = all[i][2];
            var state   = all[i][3];
            var zip     = all[i][4];
            var lat     = all[i][5];
            var lng     = all[i][6];
            var image   = all[i][7];
            var latlngset;
            latlngset = new google.maps.LatLng(lat, lng);
            var marker = new google.maps.Marker({  
              map: map,  title: city,  position: latlngset, icon: image,
            });
            var airport = new google.maps.MarkerImage(
            'images/airport.png',
            new google.maps.Size(32,37),
            new google.maps.Point(0,0),
            new google.maps.Point(16,37)
             );
            var content = '<div class="map-content"><h3>' + name + '</h3>' + address + '<br />' + city + ', ' + state + ' ' + zip + '<br /><a href="http://maps.google.com/?daddr=' + address + ' ' + city + ', ' + state + ' ' + zip + '" target="_blank">Get Directions</a></div>';                   
            var infowindow = new google.maps.InfoWindow();
              infowindow.setContent(content);
              google.maps.event.addListener(
                marker, 
                'click', 
                infoCallback(infowindow, marker)
              );
          }
        }           
        // Set all markers in the all variable
        setMarkers(map, all);
      };
      // Initializes the Google Map
      google.maps.event.addDomListener(window, 'load', initialize);
    </script>
  </head>
  <body>
    <div id="map_canvas" style="height: 500px; width: 800px;"></div>
  </body>
</html> 
```

到目前为止，当我设置 var image= airport 时，它可以工作。当我做 icon:airport 时，它可以工作，但是当我尝试获取图像时，请参考 var image 它不起作用。有人可以帮我吗？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T23:30:47.320

`image`不是图标，它是一个字符串（而不是 URL）：

```
var marker = new google.maps.Marker({  
  map: map,  title: city,  position: latlngset, icon: image,
}); 
```

`airport`是一个图标（实际上是一个已弃用的 MarkerImage，但它会起作用），但没有被使用。

```
var airport = new google.maps.MarkerImage(
  'images/airport.png',
  new google.maps.Size(32,37),
  new google.maps.Point(0,0),
  new google.maps.Point(16,37)
); 
```

像这样的东西应该工作：

```
var icon = null;
if (image == "airport") icon = airport;
var marker = new google.maps.Marker({  
  map: map,  title: city,  position: latlngset, icon: icon
}); 
```

[工作示例](http://www.geocodezip.com/v3_SO_customIconA.html)（使用不同的自定义图标）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-04-10T07:09:00.913

这对我有用： [https ://developers.google.com/maps/documentation/javascript/examples/icon-complex](https://developers.google.com/maps/documentation/javascript/examples/icon-complex)

只需将 URL 包装在地图中： var _icon = {url:'/statics/images/red-marker.png'}

然后在标记中： var marker = new google.maps.Marker({ id: args.id, map:CurrentMap, position: new google.maps.LatLng(args.lat, args.lng), icon: _icon }) ;

# css - 如何摆脱页面顶部/底部的空白间距？

> ID：14615129
> 
> 赞同：0
> 
> 时间：2013-01-30T22:31:07.743
> 
> 标签：css, whitespace, spacing

我正在尝试删除我正在处理的布局的顶部间距，您可以在此处查看：50.116.81.173/~speedcit/wordpress/。但是，我似乎没有太多运气。我基本上想删除页面顶部的白色间距。

下面是我目前使用的 CSS 代码：

```
body, html {
    font-family: Arial;
    font-size: 11.5pt;
    height: 100%;
    margin: 0;
    padding: 0;
    border: 0;
}

table, tr, td, div {
    font-family: Arial;
    font-size: 11.5pt;
}

#outer {
    text-align: center;
    margin: 0px;
}

#wrapper {
    border-left: 1px #000000 dotted;
    border-right: 1px #000000 dotted;
    padding-top: 2px;
    padding-left: 2px;
    text-align: left;
    width: 1024px;
    display: block;
    margin-left: auto;
    margin-right: auto;
    min-height: 100%;
}

#header {
    background-image: url(http://50.116.81.173/~speedcit/images/header.jpg);
    width: 1024px;
    height: 280px;
}

#menu {
    width: 1024px;
    height: 61px;
}

#content {
    background-image: url(http://50.116.81.173/~speedcit/images/content-bg.jpg);
    background-repeat: no-repeat;
    width: 804px;
    height: 357px;
    padding-top: 80px;
    padding-bottom: 10px;
    padding-left: 110px;
    padding-right: 110px;
    line-height: 24pt;
}

#footer {
    margin: 0px;
    padding: 0px;
}

.txt {
    color: #BF2736;
    font-weight: bold;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T22:33:39.487

将填充 0 添加到包装器中。CSS 重置应该可以解决您的问题，但可能会创建新问题。 [http://meyerweb.com/eric/tools/css/reset/](http://meyerweb.com/eric/tools/css/reset/)

```
#wrapper {padding:0;} 
```

问题的根本原因是您没有将浏览器呈现 CSS 的方式重置为零。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T22:34:47.360

将#wrapper 的填充更改为零

```
#wrapper {
    border-left: 1px #000000 dotted;
    border-right: 1px #000000 dotted;
    padding-top: 0px; -- Change This to zero!!!
    padding-left: 2px;
    text-align: left;
    width: 1024px;
    display: block;
    margin-left: auto;
    margin-right: auto;
    min-height: 100%;
} 
```

您可能想了解 CSS 重置工具

[http://meyerweb.com/eric/tools/css/reset/](http://meyerweb.com/eric/tools/css/reset/)

> 重置样式表的目标是减少浏览器在默认行高、页边距和标题字体大小等方面的不一致

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-30T22:37:51.520

将 #wrapper 规则中的 padding-top:2px 替换为 padding:0 。如果在 padding-top 属性之前添加 padding:0 ，您仍然会遇到问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-30T22:39:39.893

底部填充的问题是图像本身。图像中有一个空白区域。编辑并删除它：50.116.81.173/~speedcit/images/footer.jpg

你的顶部空白问题是其他人之前所说的。

# ios - 游戏中心身份验证的 Xcode 4.6 ARC 警告

> ID：14615131
> 
> 赞同：10
> 
> 时间：2013-01-30T22:31:19.477
> 
> 标签：ios, xcode, automatic-ref-counting, game-center, xcode4.6

这是一个*新*的编译器警告，仅在我将 XCode 更新到 4.6 时才出现。我的代码直接取自 Apple 的文档（顺便说一句，这是我的 iOS 6 代码）。

```
GKLocalPlayer *localPlayer = [GKLocalPlayer localPlayer];

localPlayer.authenticateHandler = ^(UIViewController *viewController, NSError *error) {
    [self setLastError:error];
    if(localPlayer.authenticated){ 
```

**警告--在此块中强烈捕获 'localPlayer' 可能会导致保留周期**

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-01-30T23:14:21.580

问题是 localPlayer 对象保持对自身的强引用 - 当 localPlayer 被“捕获”以在 authenticateHandler 块中使用时，它被保留（当在块中引用objective-c对象时，ARC下的编译器调用retain为你）。现在，即使对 localPlayer 的所有其他引用不再存在，它的保留计数仍然为 1，因此永远不会释放内存。这就是编译器向您发出警告的原因。

用弱引用引用它，例如：

```
GKLocalPlayer *localPlayer = [GKLocalPlayer localPlayer];

__weak GKLocalPlayer *blockLocalPlayer = localPlayer;
localPlayer.authenticateHandler = ^(UIViewController *viewController, NSError *error) {
    [self setLastError:error];
    if (blockLocalPlayer.authenticated) {
        ... 
```

鉴于 authenticateHandler 和 localPlayer 的生命周期是紧密联系的（即当 localPlayer 被释放时，authenticHandler 也是如此），因此无需在 authenticateHandler 中维护强引用。使用 Xcode 4.6，这不再生成您提到的警告。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T22:36:01.570

编译器只是帮助您解决已经存在问题的代码，它只是以前不知道。

您可以在此处阅读有关保留周期的信息：http: [//www.cocoawithlove.com/2009/07/rules-to-avoid-retain-cycles.html](http://www.cocoawithlove.com/2009/07/rules-to-avoid-retain-cycles.html)

基本上，您只需要将代码更改为：

```
GKLocalPlayer *localPlayer = [GKLocalPlayer localPlayer];

__weak MyViewController *blockSelf = self;
localPlayer.authenticateHandler = ^(UIViewController *viewController, NSError *error) {
    [blockSelf setLastError:error];
    if(localPlayer.authenticated){ 
```

# database - Python：我正在制作几个列表来跟踪数据库中的变量

> ID：14615137
> 
> 赞同：0
> 
> 时间：2013-01-30T22:31:44.260
> 
> 标签：database, list, file-io, while-loop

# 它应该将文本文件中的每一行保存到一个列表中，并根据逗号将其拆分，并将它们分类为多个不同的列表。错误发生在 while 循环中，指出索引超出范围。

```
lineCounter = 0
j = 0
file = open("savefile.txt","r") 
with open('savefile.txt', 'r') as f:
    string = [line.strip() for line in f]
for line in file:
    lineCounter += 1
while(j<lineCounter):
    tempList = string[j].split(',')
    firstName[j] = tempList[0]
    lastName[j] = tempList[1]
    postition[j] = tempList[2]
    department[j] = tempList[3]
    seniority[j] = tempList[4]
    vacationWeeks[j] = tempList[5]
    sickDays[j] = tempList[6]
    iD[j] = tempList[7]
    status[j] = tempList[8]
    j += 1 
```

print firstName file.close() # 关闭文本文件

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T23:18:47.800

NVM 的问题是需要附加而不是替换列表。

# vb.net - 创建单元测试：未找到 TimeClock_Append 的私有访问器。请重建包含项目或手动运行 Publicize.exe

> ID：14615138
> 
> 赞同：1
> 
> 时间：2013-01-30T22:31:43.813
> 
> 标签：vb.net, unit-testing, rest, .net-3.5

我正在尝试对如下所示的方法创建单元测试：

```
Public Function TimeClock_Append(ByVal timeClockUploadJson As TimeClockUploadJson) As TimeClockUploadJson Implements IResourceCommanderData.TimeClock_Append
...
End Function 
```

当我右键单击函数名称并选择“创建单元测试”时，这就是我得到的......

```
'TODO: Ensure that the UrlToTest attribute specifies a URL to an ASP.NET page (for example,
' http://.../Default.aspx). This is necessary for the unit test to be executed on the web server,
' whether you are testing a page, web service, or a WCF service.
'''<summary>
'''A test for TimeClock_Append
'''</summary>
<TestMethod(), _
 HostType("ASP.NET"), _
 AspNetDevelopmentServerHost("C:\Projects\ACS.ResourceCommander 3.8\ACS.ResourceCommander.WCFRest", "/ACS.ResourceCommander.WCFRest"), _
 UrlToTest("http://localhost/ACS.ResourceCommander.WCFRest")> _
Public Sub TimeClock_AppendTest()
    'Private Accessor for TimeClock_Append is not found. Please rebuild the containing project or run the Publicize.exe manually.
    Assert.Inconclusive("Private Accessor for TimeClock_Append is not found. Please rebuild the containing" & _
            " project or run the Publicize.exe manually.")
End Sub 
```

我不明白“未找到 TimeClock_Append 的私有访问器。请重建包含项目或手动运行 Publicize.exe”消息。

我尝试删除与此方法相关的测试引用文件夹中的文件，然后右键单击该方法并选择“创建私有访问器”，但没有解决任何问题。

我该如何解决这个问题？

# javascript - 合并嵌套类并保留值

> ID：14615143
> 
> 赞同：0
> 
> 时间：2013-01-30T22:32:29.823
> 
> 标签：javascript, class, object, nested

我想将一个类中的一个对象扩展为该类`alpha.helper`的一个实例，但`Helper`每次`alpha.helper`调用函数时都很难设置它，因为我需要传输`alpha.imperfect`.

```
var _ = require("underscore");

var Helper = function(imperfect){

    var helper = {};

    helper.use = function(item){
        console.log(item);
        console.log(imperfect);
        return false;
    }

    helper.bar = function(item){
        console.log(item);
        console.log(imperfect);
        return false;
    }

    return helper;

}

var Alpha = function(){

    var alpha = {};

    alpha.imperfect = {}    

    alpha.add = function(item){
        _.extend(alpha.imperfect, item);
    }

    alpha.helper = function(){
        var helper = new Helper(alpha.imperfect);
        return helper;
    };

    return alpha;

}

var alpha = new Alpha();

alpha.add({"name":"thomas"});

alpha.add({"something":"seven"});

alpha.helper.use("foo"); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T23:13:21.337

只需使用

```
alpha.helper = new Helper(alpha.imperfect); 
```

> 每次调用 alpha.helper 函数时都增加了设置的难度，因为我需要传输 alpha.imperfect 的当前值。

不，`helper`始终可以访问当前`imperfect`值，因为它仍然引用同一个对象。

# python - Django：外键查询以在 html 模板上发布信息

> ID：14615145
> 
> 赞同：2
> 
> 时间：2013-01-30T22:32:40.217
> 
> 标签：python, django, django-templates, django-views

我的下一步是显示从数据库到 html 模板的查询。我可以提供一些基本信息，但我被外键查询卡住了。

这是我的代码示例：

这是我的模型：

```
class Player_Bios(models.Model):
    my_id            = models.SlugField(unique=True)
    player_id        = models.IntegerField(primary_key=True, max_length=50)    
    name             = models.CharField(max_length=50) 
    last             = models.CharField(max_length=50)

    def __unicode__(self):
       return self.player_id

class BatStat (models.Model):
    player_id           = models.ForeignKey('Player_Bios')
    team_id             = models.ForeignKey('Team')
    bat_stat_id         = models.CharField(max_length=50, unique=True)
    sport_code           = models.CharField(max_length=50, blank=True) 
    ab                  = models.IntegerField(max_length=50, null=True)

def __unicode__(self):
    return self.bat_stat_id 
```

我的观点：

```
def SpecificPLayer(request, playerslug):
   player = Player_Bios.objects.get(player_id=playerslug) #this is the name, last and it is working fine
   playerStat = BatStat.objects.filter(player_id=playerslug) #Here I'm calling the foreign key
   print playerStat
   context = {'player' : player, 'today' : date.today(), 'playerStat' : playerStat }
   return render_to_response ('singleplayer.html', context,          context_instance=RequestContext(request)) 
```

我的 HTML 模板：

```
{% extends 'base.html' %}
{% block content %}

  <div id="singleplayer">
       <p>Name: {{ player.name|capfirst  }}</p>
       <p>Last Name: {{ player.last|capfirst  }}</p>

  </div>
        {% endfor %}

{% endblock %} 
```

现在，当我打印 playerStat 时，我会从 player_id 获取所有 BatStat。在你的情况下，我得到以下信息：

```
[<BatStat: 40539520011>, <BatStat: 40539520021>, <BatStat: 40539520031>] 
```

通过执行以下操作，我在 shell 上得到了我想要的结果：

```
playerStatID=BatStat.objects.filter(player_id='the player id here')
print playerStatID
[<BatStat: 40539520011>, <BatStat: 40539520021>, <BatStat: 40539520031>]
for i in playerStatID:
      playerStat= BatStat.objects.get(bat_stat_id=i)
      print BatStat.ab
      200 
```

所以通过这样做我可以获得我需要的信息，现在我怎么能得到它，但是把它放在模板上。我不能在模板上使用循环来获取查询，所以我猜循环必须在视图上完成，但是如何。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T22:56:53.303

由于您有一个`ForeignKey`between`BatStat`和`Player_Bios`，您可以使用 a来获取单个玩家的`batstat_set`所有相关信息。`BatStats`

[此处的文档`_set`。][1]

所以你会有你`views.py`的：

```
def SpecificPLayer(request, playerslug):
    player = Player_Bios.objects.get(player_id=playerslug) #this is the name, last and it is working fine   
    batstats = player.batstat_set.all() 
    context = {'player' : player, 'today' : date.today(), 'batstats': batstats, }
    return render_to_response ('singleplayer.html', context,context_instance=RequestContext(request)) 
```

并在您的模板中：

```
{% for stat in batstats %}
    {{ stat.ab }}
{% endfor %} 
```

# c - 如何复制内存

> ID：14615148
> 
> 赞同：2
> 
> 时间：2013-01-30T22:33:04.790
> 
> 标签：c, pointers

说我有：

```
unsigned char *varA, *varB, *varC;
varA=malloc(64);
varB=malloc(32);
varC=malloc(32); 
```

如何将 varA 的**前**32 个字节放入 varB，将 varA 的**最后**32 个字节放入 varC？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-30T22:35:41.430

```
memcpy(varB, varA, 32);
memcpy(varC, varA + 32, 32); 
```

之所以这么简单，是因为底层数据类型是`unsigned char`，它的大小与一个字节相同。如果`varA`、`varB`和`varC`是整数，则需要将 size 参数乘以`memcpy`（即 32）`sizeof(int)`以计算要复制的正确字节数。如果我是迂腐的，我可以在上面的例子中乘以 32 `sizeof(unsigned char)`，但这没有必要，因为`sizeof(unsigned char)`== 1。

请注意，我不需要将 32 乘以`varA + 32`任何值，因为编译器在向指针添加常量偏移量时会为我执行此操作。

还有一件事：如果你想快点，`varA`单独处理每一半就足够了，而不是分配两个新的缓冲区并复制到它们中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T22:39:44.857

您可以使用循环来一一复制单个字节：

```
for (int i = 0; i != 32; ++i)
    varB[i] = varA[i];

for (int i = 0; i != 32; ++i)
    varC[i] = varA[32 + i]; 
```

或者`memcpy`来自 C 运行时库的函数：

```
memcpy(varB, varA, 32);
memcpy(varC, varA + 32, 32); 
```

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2013-01-30T22:39:58.477

好吧，让我们这样做......

```
uint64 source;
uint32 upperBytes, lowerBytes;

upperBytes = source&0xFFFFFFFF00000000;
lowerBytes = source&0x00000000FFFFFFFF; 
```

功课做完了。

# ios - 从文档目录中删除所有文件后，UITableView 没有重新加载

> ID：14615152
> 
> 赞同：0
> 
> 时间：2013-01-30T22:33:27.220
> 
> 标签：ios, objective-c, uitableview, nsfilemanager

请在这里快速帮助:-)

我已经用我的 Documents Directory 的内容填充了 UITableView，我可以通过一个按钮从目录中删除所有文件。

现在，当我删除文件时，用户看到的列表仍然是相同的，直到我重新加载视图才会显示这些文件确实已经消失了。

我已经按照下面的代码使用了：

```
[_mainTableView reloadData];
[_mainTableView beginUpdates]; & [_mainTableView endUpdates]; 
```

这些都不起作用，但是一旦这些文件消失，我需要刷新 tableView。

```
 [_mainTableView beginUpdates];            
        NSFileManager *fileMgr = [[NSFileManager alloc] init];
        NSError *error = nil;

        NSArray *directoryContents = [fileMgr contentsOfDirectoryAtPath:[self filePath] error:&error];
        NSLog(@"FILES - %@", directoryContents);

       if (error == nil) {
            for (NSString *path in _mainDataArray) {
                NSString *fullPath = [[self filePath] stringByAppendingPathComponent:path];
                BOOL removeSuccess = [fileMgr removeItemAtPath:fullPath error:&error];
                if (!removeSuccess) {
                    // Error handling

                }
                else if(removeSuccess)
                {
                    [_mainTableView reloadData];
                }
            }
        }
        [_mainTableView endUpdates]; 
```

还有什么我需要尝试的吗？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T22:37:51.880

我认为您不需要创建 ; 的新实例`NSFileManager`。改为使用：

```
[NSFileManager defaultManager]; 
```

第一个 if 条件`if (error == nil)`将为真，因为错误为 nil，所以我认为它不会进入 for 循环

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T22:47:05.937

您没有清空填充表格的数组。您正在使用数组中的数据删除文件夹中的项目，但没有从数组中删除项目，因此，当然，该表仍被填充。

# c++ - 了解如何创建atoi；人物如何比较？

> ID：14615162
> 
> 赞同：8
> 
> 时间：2013-01-30T22:34:01.250
> 
> 标签：c++, character, atoi

我正在努力提高我对 C++ 的理解，尤其是指针算术。我经常使用 atoi，但我很少考虑它是如何工作的。查找它是如何完成的，我基本了解它，但有一件事我很困惑。

**这是我在网上找到的解决方案示例：**

```
int atoi( char* pStr ) 
{
  int iRetVal = 0; 

  if ( pStr )
  {
    while ( *pStr && *pStr <= '9' && *pStr >= '0' ) 
    {
      iRetVal = (iRetVal * 10) + (*pStr - '0');
      pStr++;
    }
  } 
  return iRetVal; 
} 
```

我认为我很难理解过去如何使用atoi的主要原因是角色的比较方式。“while”语句是说**当字符存在时，*并且*字符小于或等于 9，*并且*大于或等于 0**然后执行操作。这句话对我说了两件事：

1.  字符可以在逻辑上与其他字符进行比较（但返回值是什么？）。

在我研究这个之前，我想我下意识地知道它，但我从来没有真正想过它，但是“5”字符比“6”字符“小”，就像 5 小于 6，所以你可以比较字符作为整数，本质上（为此目的）。

1.  不知何故，虽然 (*sPtr) 和 *SPtr != 0 是不同的。这对我来说似乎很明显，但我发现我无法用语言表达，这意味着我知道这是真的，但我不明白为什么。

编辑：我不知道***pStr - '0'**部分会做什么。

理解这些观察结果的任何帮助都会非常...有帮助！谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-30T22:40:56.260

> 当角色存在时

不，不是。它说“虽然字符不是 0（或`'\0'`）。基本上，ASCII 字符`'\0'`表示“C”字符串的结尾。因为您不想超过字符数组的结尾（并且确切的长度未知） ，每个字符都经过测试`'\0'`。

> 字符可以在逻辑上与其他字符进行比较

这是正确的。字符只不过是一个数字，至少在 ASCII 编码中是这样。例如，在 ASCII 中，`'0'`对应的十进制值是 49，`48`是90（您可以在[此处查看 ASCII 表](http://lazarenko.me/other/ascii/)）。所以是的，你可以像比较整数一样比较字符。`'1'``'Z'`

> 不知何故`while (*sPtr)`，`*sPtr != 0`是不同的。

一点也不不同。十进制 0 是一个特殊的 ASCII 符号`(nul)`，用于指示“C”字符串的结尾，正如我在开头提到的那样。您看不到或打印`(nul)`，但它就在那里。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-30T22:37:56.523

*pStr - '0' 将字符转换为其数值 '1' - '0' = 1 while 循环检查我们是否不在字符串的末尾并且我们有一个有效的数字。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-30T22:38:00.537

C 中的字符简单地表示为 ASCII 值。由于所有数字在 ASCII 中都是连续的（即 0x30 == '0' 和 0x39 == '9' 以及介于两者之间的所有其他数字），您可以通过简单地进行范围检查来确定字符是否为数字，并且您可以通过减法得到数字的值`'0'`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-30T22:43:56.743

[C 风格的字符串是以*null 结尾的*](https://stackoverflow.com/questions/2037209/what-is-a-null-terminated-string)。

所以：

```
while ( *pStr && *pStr <= '9' && *pStr >= '0' ) 
```

这测试：

*   `*pStr`我们还没有到达字符串的末尾，相当于写`*pStr != 0`（注意没有单引号，ASCII值`0`，或[`NUL`](http://en.wikipedia.org/wiki/NUL_%28character%29)）。
*   `*pStr >= '0' && *pStr <= '9'`（也许更合乎逻辑）字符在(ASCII value ) 到(ASCII value )`*pStr`的范围内，即*digit*。`'0'``48``'9'``57`

 ** * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-30T22:45:13.950

请注意，已发布的 atoi 实现并不完整。真正的 atoi 可以处理负值。

> 不知何故，虽然 (*sPtr) 和 *sPtr != 0 是不同的。

这两种表达方式是一样的。当用作条件时，`*sPtr`当存储在地址 sPtr 的值不为零时被认为是真，并且`*sPtr != 0`当存储在地址 sPtr 的值不为零时被认为是真。区别在于在其他地方使用时，第二个表达式的计算结果为真或假，但第一个表达式的计算结果为存储值。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-30T22:51:51.860

`'0'`in memory os的表示`0x30`和`'9'`is的表示`0x39`。这就是计算机所看到的，当它将它们与逻辑运算符进行比较时，它会使用这些值。nul 终止字符表示为`0x00`, （又名零）。这里的关键是它`chars`就像`int`机器的任何其他东西一样。

因此，`while`声明说：

> 虽然我们正在检查的 char 是有效的（也不是零，因此不是 nul 终止符），并且它的值（如机器所见）小于 0x39 并且其值大于 0x30，但继续。

然后循环体`while`根据整数在字符串中的位置计算适当的值以添加到累加器中。然后它增加指针并再次前进。完成后，它将返回累积值。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-01-30T23:04:27.787

这段代码使用 ascii 值来累积它的 alpha 等效值的整数。

关于您的第一个编号项目符号，在比较任何结果时，结果都是布尔值似乎很简单。虽然我觉得你想问编译器是否真的理解“字符”。据我了解，虽然这种比较是使用字符的 ascii 值完成的。即 a < b 被解释为 (97 < 98)。（请注意，当您比较 'a' 和 'A' 时，也很容易看到使用了 ascii 值，因为 'A' 小于 'a'）

关于您的第二个项目符号，似乎 while 循环正在检查实际上是否存在一个不是 NULL 的分配值（ascii 值为 0）。一旦遇到错误语句，and 运算符就会产生 FALSE，这样您就不会对 NULL 字符进行比较。至于 while 循环的其余部分，它正在进行 ascii 比较，正如我在第 1 条中提到的那样。它只是检查给定字符是否对应于与数字相关的 ascii 值。即在 '0' 和 '9' 之间（或 ascii：在 48 和 57 之间）

最后， (*ptr-'0') 在我看来是最有趣的部分。此语句返回一个介于 0 和 9 之间的整数（包括 0 和 9）。如果你看一下 ascii 图表，你会注意到数字 0 到 9 是相邻的。所以想象一下 '3'-'0' 是 51 - 48 并产生 3！:D 所以简单来说，它是做 ascii 减法并返回相应的整数值。:D

干杯，我希望这能解释一下

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-01-30T23:27:11.913

让我们分解一下：

`if ( pStr )`

如果你传递 atoi 一个空指针，`pStr`将会是`0x00`- 这将是错误的。否则，我们有一些东西要解析。

`while ( *pStr && *pStr <= '9' && *pStr >= '0' )`

好的，这里发生了很多事情。`*pStr`意味着我们检查 pStr 指向的值是否是`0x00`。如果您查看 ASCII 表，则 ASCII 为`0x00`“null”，而在 C/C++ 中，约定是字符串以 null 结尾（与 Pascal 和 Java 样式的字符串相反，后者告诉您它们的长度然后有那么多字符）。所以，当`*pStr`计算结果为假时，我们的字符串已经结束，我们应该停止。

`*pStr <= '9' && *pStr >= '0'`有效，因为 ASCII 字符 '0' '1' '2' '3' '4' '5' '6' '7' '8' '9' 的值都是连续的 - '0'`0x30`和 '9'是`0x39`，例如。所以，如果`pStr`' 指向的值超出了这个范围，那么我们就没有解析一个整数，我们应该停止。

`iRetVal = (iRetVal * 10) + (*pStr - '0');`

由于 ASCII 数字的属性在内存中是连续的，因此如果我们知道我们有一个数字，就会`*pStr - '0'`计算出它的数值 - 0 代表 '0' ( `0x30 - 0x30`)，1 代表 '1' ( `0x31 - 0x30`)... 9 代表'9'。因此，我们将号码向上移动并滑入新的位置。

`pStr++;`

通过给指针加一，指针指向内存中的下一个地址——我们正在转换为整数的字符串中的下一个字符。

请注意，如果字符串不是以 null 结尾的，它有任何非数字（例如'-'），或者它以任何方式不是 ASCII，则此函数将搞砸。这不是魔术，它只是依赖于这些事情是真实的。*

# maven - Maven Invoker 插件日志到控制台（System.out）？

> ID：14615164
> 
> 赞同：2
> 
> 时间：2013-01-30T22:34:07.797
> 
> 标签：maven, maven-3, maven-plugin

是否可以将[Maven Invoker 插件](http://maven.apache.org/plugins/maven-invoker-plugin/)配置为登录到 System.out 而不是 build.log 文件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T08:57:12.260

maven-invoker-plugin 有两个参数[noLog](http://maven.apache.org/plugins/maven-invoker-plugin/integration-test-mojo.html#noLog)或[streamLog](http://maven.apache.org/plugins/maven-invoker-plugin/integration-test-mojo.html#streamLogs)您应该检查其中一个是否满足您的要求。我会假设 streamLog 应该是正确的方向。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T01:49:04.293

不，他们创建了文件记录器并广泛使用它：

```
private FileLogger setupLogger( File basedir )
    throws MojoExecutionException
{
    FileLogger logger = null;

    if ( !noLog )
    {
        File outputLog = new File( basedir, "build.log" );
        try
        {
            if ( streamLogs )
            {
                logger = new FileLogger( outputLog, getLog() );
            }
            else
            {
                logger = new FileLogger( outputLog );
            }

            getLog().debug( "build log initialized in: " + outputLog );
        }
        catch ( IOException e )
        {
            throw new MojoExecutionException( "Error initializing build logfile in: " + outputLog, e );
        }
    }

    return logger;
} 
```

# javascript - 手机游戏引擎

> ID：14615168
> 
> 赞同：-1
> 
> 时间：2013-01-30T22:34:15.503
> 
> 标签：javascript, networking, mobile, game-engine, multiplayer

我有一个多人手机游戏的想法。我想到了一个网页游戏，让IOS和Android用户都可以玩。

但我没有得到任何东西......如果我主要使用 javascript 构建游戏，它非常容易受到黑客攻击，不是吗？我的意思是，如果我向服务器发出一些 ajax 请求，每个人都可以在 Internet Explorer 中打开开发人员工具，为请求设置断点并在发送请求之前更改一些数据。

例如：用户在游戏中获得了一些钱。现在我想将新金额发送到服务器以将其保存到数据库中。一些“坏”男孩可能会在请求发送之前更改货币价值，并且服务器获得操纵的价值。

我说的对吗？或者我可以在游戏中构建任何安全功能吗？

所以我搜索了一个多平台移动引擎，但我找不到合适的。我找到了[spaceport.io](http://spaceport.io)，但它还没有发布。

还有其他我可以使用的引擎吗？

*   我想用 Javascript 或 C# 编程
*   我想为 IOS 和 Android 部署游戏
*   游戏将是 2D 的（以后可能会有一些 3D 功能）
*   我需要多人游戏的网络支持

哦...而且我没有多少钱;-)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-30T23:08:24.573

是的，正如所指出的那样，javascript 是不安全的，但其他引擎也是如此。他们只是需要更多的工作来破解。

这里的重点是确保客户端仅将用户输入发送回服务器，服务器根据输入计算操作并返回响应。

例如，如果客户说“我刚刚打开了一个箱子，它给了我 100 金币，将其添加到我的余额中”，用户可以轻松破解它说“我刚刚打开一个箱子，它给了我 100,000 金币，将其添加到我的余额”。

相反，客户会简单地说“我打开了箱子”。服务器会说“那个箱子有 100 金币，它已经添加到你的余额中。”

此外，服务器应该根据发送到服务器的移动请求知道玩家在哪里。而不是客户端说“我在这个位置打开了箱子”它应该只说“我在我所在的地方打开了箱子”并且服务器应该知道用户在哪里，所以他们不能只是欺骗所有的箱子位置并打开他们都没有实际移动。

这也意味着客户端不应该告诉服务器玩家在哪里，而只是给出移动通知。IE“我向北移动了一个街区。” “我向东移动了一个街区” 然后服务器可以记录这些，对它们采取行动，并跟踪用户在哪里寻找黑客。如果用户在不发送所有移动请求的情况下尝试更改其位置，则服务器不会对玩家欺骗的位置采取行动。

出于速度目的，可以让客户端在发送移动请求后移动玩家而不等待服务器响应，但如果服务器响应“不，您不是您认为的位置，而是您的位置”客户端响应通过在它的一侧进行更正以匹配服务器。这就是导致游戏在滞后时跳来跳去或向后跳的原因。客户端已经更新了动作以保持流畅和响应，但由于滞后，服务器没有收到移动请求，或者迟到了，所以客户端必须更正。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-30T22:36:29.910

JavaScript 本质上是不安全的，并且容易受到各种客户端黑客攻击。发生的一切都需要在服务器端进行验证。

> 我想用 Javascript 或 C# 编程

C# 在服务器上运行。JavaScript 在客户端上运行。这里没有非此即彼的选择。

# php - 从数据库mysql计算上次登录时间

> ID：14615171
> 
> 赞同：0
> 
> 时间：2013-01-30T22:34:44.290
> 
> 标签：php, mysql, datetime

我目前有一个数据库，其中包含`last_login`数据`last_logout`类型设置为`datetime`. 当用户登录和退出系统时，这两列中的时间都会更新。

我现在想创建一个通知，通知用户他们以前何时登录系统。我想以小时为单位显示答案，例如（23 小时前或 128 小时前）。

我只是不知道如何在 PHP 中使用这些列中的值执行计算。请帮忙。

如果这个问题难以理解，我深表歉意。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T22:41:32.823

```
SELECT (TIME_TO_SEC(TIMEDIFF(LOGOUT_COLUMN, LOGIN_COLUMN)) / 3600) AS TimeDiff 
```

应该做的伎俩，将在几秒钟内返回差异，然后在 PHP 端你可以在几分钟或几小时内转换它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T22:42:45.393

在mysql中做

```
Select TimeStampDiff(HOUR,LastLoginTime,Now()) From MyLoginTable 
```

例如

# node.js - 从 Mongoose 中间件访问旧模型属性

> ID：14615173
> 
> 赞同：0
> 
> 时间：2013-01-30T22:34:47.800
> 
> 标签：node.js, mongoose

我有一个`Category`模型，它的唯一属性是`name`.

还有一个`SubCategory`模型，它有一个包含模型名称`name`的`category`字符串字段`Category`。

当`Category`模型`name`更改时，`SubCategory`指向该类别的每个都应更新其`category`字段以匹配新名称。

我目前正在通过获取`SubCategories`指向某个类别的所有内容、遍历它们并更新它的类别字段来直接在路由处理程序上实现这一点。

我想在模型中实现这个逻辑，它应该属于。

`Category`我在模型上创建了一个预中间件，

```
CategorySchema.pre('save', function(next) {
  console.log('Saving ' + this.name);
  next();
}); 
```

负责`PUT`请求的路由处理程序使用更新后的名称保存模型，如下所示：

```
...
parentCategory.name = requestedName;
parentCategory.validate(function(validationError) {          
  if (validationError) {
    return res.send(response.BAD_REQUEST); 
  }     
  parentCategory.save(function(saveError) {       
    if(saveError) {
      return res.send(response.SERVER_ERROR);        
    }
  });
});
... 
```

但是我打印了**新**名称，所以我无法迭代它的子类别，因为我只能访问新名称。

我不确定我应该如何将旧名称和新名称都传递给中间件以在那里做这些事情。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T22:36:05.650

我可以通过像这样查询 Category 模型来访问旧值：

```
CategorySchema.pre('save', function(next) {
    var that = this;
    var updateEachSubCategory = function(subcategory) {
    subcategory.category = that.name;
    subcategory.save(function(saveError) {
      if(saveError) {
        console.log(saveError);
        return 1;                    
      }
    });
  };
    var updateChildrenCategoryField = function(err, subCategoriesArray) {
        solange.asyncFor(subCategoriesArray, updateEachSubCategory);   
    };
    var findChildren = function(categorySearchError, categoryFound) {
        if(!categorySearchError) {
            mongoose.models["SubCategory"].find({ category: categoryFound.name }, updateChildrenCategoryField);
        }
    };
    mongoose.models["Category"].findOne({ _id: this._id }, findChildren);
    next();
}); 
```

由于这是一个**预**保存中间件，新名称尚未保存，因此我们可以通过查询模型来访问它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-07-13T09:47:47.720

我的解决方案是在 post init 中间件中备份属性值

```
schema.post('init', function(model) {
  model.oldValues = JSON.parse(JSON.stringify(model));
} 
```

比我们可以在任何其他中间件中访问这些属性，例如`this.someAttr === this.oldValues.someAttr`在属性修改之前。

我写了一个[要点来检查它](https://gist.github.com/oshybystyi/ad98f3963ab797b0df32)。

这是它的输出：

```
    ------------------
    预初始化属性
    文档是新的，再次运行应用程序
    ------------------
    ------------------
    发布初始化属性
    { _id: 55a37cc88ff0f55e6ee9be2d,
      name: '测试 1 - 12:07:88',
      __v: 0,
      准备好：真}
    设置 this.oldValues
    ------------------
    ------------------
    预存属性
    { _id: 55a37cc88ff0f55e6ee9be2d,
      name: '测试 1 - 12:07:16',
      __v: 0,
      准备好：假}
    ------------------
    ------------------
    后期保存属性
    { _id: 55a37cc88ff0f55e6ee9be2d,
      name: '测试 1 - 12:07:16',
      __v: 0,
      准备好：假}
    旧属性 (model.oldValues)
    { _id: '55a37cc88ff0f55e6ee9be2d',
      name: '测试 1 - 12:07:88',
      __v: 0,
      准备好：真}
    ------------------

```

# architecture - 编译器的应用程序二进制接口、指令集架构和物理微架构如何一起“工作”？

> ID：14615174
> 
> 赞同：1
> 
> 时间：2013-01-30T22:34:49.357
> 
> 标签：architecture

当您编写代码时，编译器和/或汇编器遵循 ABI（应用程序二进制接口）。

然而，ISA 在不同的可用微架构之间是不同的，它们提供了一层数据处理，它们抽象了一些裸机操作，还是在最终方法上有所不同？

这三件事非常令人困惑，因为每个不同的微处理器都可以有不同的 ISA，并且 ABI 是特定于 ISA 的吗？如果是这样，您必须知道每个微处理器的确切 ISA，并且只使用一个与 ABI 的细节相匹配的 ISA 到微级别。

只是我，还是这不会让其他人感到困惑？维基百科对这些文章也没有多大意义，所以任何人都可以帮助理顺这背后的想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-25T02:49:32.183

William Stallings 的操作系统书对这些差异有很好的解释。

转述。

ISA是硬件提供的接口。它由应用程序或操作系统使用。

API 是应用程序的接口。这包括 ISA 以及对操作系统进行的系统调用。

ABI 类似于 API，只是它是可用于编译代码的版本。

以下线程很好地解释了 ABI 和 API 之间的区别。 [什么是应用程序二进制接口 (ABI)？](https://stackoverflow.com/questions/2171177/what-is-application-binary-interface-abi)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T22:41:01.117

它们并不完全依赖，但也不完全排斥。

我们以 x86 为例。ABI 的一个方面是`__cdecl`调用约定。这表明调用者按从右到左的顺序将参数压入堆栈。它声明调用者负责在调用后从堆栈中清除这些参数。这适用于所有 x86 微架构。

x86 指令集之间的区别在于 SSE 指令的存在。这些指令是否存在对如何将参数压入堆栈没有影响。

# jquery - No style on jquery mobile header buttons

> ID：14615177
> 
> 赞同：0
> 
> 时间：2013-01-30T22:34:58.080
> 
> 标签：jquery, css, cordova, jquery-mobile

I'm having this problem with buttons in the jquery mobile header bar.

They appear without style, only the text 'Back' is shown.

I already tried replacing the stylesheets with freshly downloaded ones.

This happens when I add the back button by placing `<a href="index.html" data-icon="arrow-l" data-rel="back">Back</a>` inside the header div and also when I set this attribute `data-add-back-btn="true"` to the page div.

The page on wich this happens is dynamicly loaded, but when I'm testing it on the index page it also happens.

Does anyone know what could be going wrong? I'm using jquery mobile 1.2.0 in combination with Cordova (PhoneGap).

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T22:51:15.047

我认为您链接上的数据角色可能是错误的。尝试添加`data-role="button"`到您的链接，看看会发生什么。它应该看起来像这样。

```
<a href="index.html" data-role="button" data-icon="back">Back</a> 
```

# oauth - Why am I being prompted to authorize an Oauth1 application repeatedly with Google?

> ID：14615178
> 
> 赞同：1
> 
> 时间：2013-01-30T22:35:04.290
> 
> 标签：oauth, google-oauth, google-signin

I have an application which requests that Google authorize it for basic profile and email permissions via Oauth1\. If I clear all cookies and repeat the process, I am again prompted to authorize the application.

According to [https://developers.google.com/accounts/docs/OAuth2Login](https://developers.google.com/accounts/docs/OAuth2Login):

> If your repeat this process, you will not see the consent screen. Google remembers your consent, and simply issues a new access token to the site. If, for some reason, you'd like to reprompt the user for consent, you can add `approval_prompt=force` to the parameters in the request.

Am I being prompted because

1.  I'm using Oauth1 and not Oauth2?
2.  Some other reason (Maybe I haven't given enough information to tell why)

Note that stack overflow itself does not exhibit this behavior, so I know this should be possible.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T21:40:43.500

您可能会在几件事上得到“提示”。首先，输入您的凭据以登录。如果您清除 cookie，系统将提示您输入用户名和密码。OAuth 1 或 2 会发生这种情况。但要回答您的问题，我们不支持 OAuth1 授权的自动批准。您应该保留您的访问令牌，并且不必重新提示用户继续 API 访问。

这是我添加标准免责声明的地方，如果您应该强烈考虑使用 OAuth2 而不是 OAuth1。我们已弃用 OAuth1。OAuth 2 更容易编码，并且用户体验得到了很大改善。

# android - Google Drive Authentication Exception - Needs Permission? (v2)

> ID：14615182
> 
> 赞同：4
> 
> 时间：2013-01-30T22:35:15.907
> 
> 标签：android, google-drive-api

I have been trying to add Google Drive(v2) into my Android application and I can’t get past authorization. I have been getting UserRecoverableAuthIOException, with the message “NeedPermission.” I have a feeling that there is something wrong with my Client ID on Google API Console, but I thought I should post here to see if anyone could shed some light on my situation.

I have implemented the Drive Quickstart for Android, and I ran DrEdit with no problems. ([https://developers.google.com/drive/quickstart-android](https://developers.google.com/drive/quickstart-android) and [https://developers.google.com/drive/examples/android](https://developers.google.com/drive/examples/android))

The only real difference between my application and the sample/example applications is that the Google Drive code would be in a library project, so I tried the following:

I created a project with a package name (Let’s call it com.example.googledrivetest), that had the Android Quickstart code. This ran perfectly.

Then, I made this project into a Library Project, and changed the package name (Let’s call this com.example.googledrivetestlibrary), and made a project with “com.example.googledrivetest” as the package name. This new project called the library project. Running this new project worked correctly as well!

So, I tried moving the code that was getting the UserRecoverableAuthException in the other project into the library project (since, it was working). To my surprise, it worked perfectly.

Now, both “com.example.googledrivetest” and my other application (with the exception) are both registered on Google Console APIs’ API Access. So I tried changing “com.example.googledrivetest” to “, and then it started getting the UserRecoverableAuthIOException. If I changed it back to “com.example.googledrivetest,” it worked again.

So, I was wondering if there is anything I am doing wrong, or need to add to my code to get it to work.

# android - E/AndroidRuntime(6696): java.lang.RuntimeException: 无法启动活动 ComponentInfo{com

> ID：14615183
> 
> 赞同：2
> 
> 时间：2013-01-30T22:35:17.127
> 
> 标签：android

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="com.thenewboston.travis"
android:versionCode="1"
android:versionName="1.0" >

<uses-sdk
    android:minSdkVersion="10"
    android:targetSdkVersion="17" />

<application
    android:allowBackup="true"
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name" >
    <activity
        android:name=".Splash"
        android:label="@string/app_name" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
    <activity
        android:name=".startingPoint"
        android:label="@string/app_name" >
        <intent-filter>
            <action android:name="com.thenewboston.travis.STARTINGPOINT" />

            <category android:name="android.intent.category.DEFAULT" />
        </intent-filter>
    </activity>
</application>

</manifest> 
```

1）这是我的 xml 清单

```
package com.thenewboston.travis;

import android.app.Activity;
import android.content.Intent;
import android.os.Bundle;

public class Splash extends Activity{

@Override
protected void onCreate(Bundle InstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(InstanceState);
    setContentView(R.layout.splash);
    Thread timer = new Thread(){
        public void run(){
            try{
                sleep(5000);
            } catch (InterruptedException e){
                e.printStackTrace();
            }finally{
                Intent openStartingPoint = new       Intent("com.thenewboston.travis.STARTINGPOINT");
                startActivity(openStartingPoint);
            }
        }
    };
    timer.start();

}

} 
```

2）这是我的splash java活动

```
package com.thenewboston.travis;

import android.app.Activity;
import android.os.Bundle;
import android.view.View;
import android.widget.Button;
import android.widget.TextView;

public class startingPoint extends Activity {

int counter;
Button add, sub;
TextView display;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    counter = 0;
    add = (Button) findViewById(R.id.bAdd);
    sub = (Button) findViewById(R.id.bSub);
    display = (TextView) findViewById(R.id.tvDisplay);
    add.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View v) {
            // TODO Auto-generated method stub
            counter += 1;
            display.setText("Your total is" + counter);
        }
    });
    sub.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View v) {
            // TODO Auto-generated method stub
            counter -= 1;
            display.setText("Your total is" + counter);
        }
    });
}

} 
```

3）这是我的起点java活动

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:id="@+id/LinearLayout1"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:orientation="vertical"
tools:context=".MainActivity" >

<TextView
    android:id="@+id/tvDisplay"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:layout_gravity="center"
    android:gravity="center"
    android:text= "@string/text"
    android:textSize="@string/text_size" />

<Button
    android:id="@+id/bAdd"
    android:layout_width="250dp"
    android:layout_height="wrap_content"
    android:layout_gravity="center"
    android:text="@string/atext"
    android:textSize="@string/btext_size" />

<Button
    android:id="@+id/bSub"
    android:layout_width="250dp"
    android:layout_height="wrap_content"
    android:layout_gravity="center"
    android:text="@string/stext"
    android:textSize="@string/btext_size" />

</LinearLayout> 
```

4）这是我的主要 xml

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:orientation="vertical" 
android:background="@drawable/splash">

</LinearLayout> 
```

5）这是我的启动 xml

```
01-30 17:43:17.396: E/(7511): <s3dReadConfigFile:75>: Can't open file for reading
01-30 17:43:17.396: E/(7511): <s3dReadConfigFile:75>: Can't open file for reading
01-30 17:43:22.391: E/AndroidRuntime(7511): FATAL EXCEPTION: main
01-30 17:43:22.391: E/AndroidRuntime(7511): java.lang.RuntimeException: Unable to start   activity ComponentInfo{com.thenewboston.travis/com.thenewboston.travis.startingPoint}:   android.view.InflateException: Binary XML file line #9: Error inflating class <unknown>
01-30 17:43:22.391: E/AndroidRuntime(7511):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2088)
01-30 17:43:22.391: E/AndroidRuntime(7511):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2113)
01-30 17:43:22.391: E/AndroidRuntime(7511):     at android.app.ActivityThread.access$700(ActivityThread.java:139)
01-30 17:43:22.391: E/AndroidRuntime(7511):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1224)
01-30 17:43:22.391: E/AndroidRuntime(7511):     at android.os.Handler.dispatchMessage(Handler.java:99)
01-30 17:43:22.391: E/AndroidRuntime(7511):     at android.os.Looper.loop(Looper.java:137)
01-30 17:43:22.391: E/AndroidRuntime(7511):     at  android.app.ActivityThread.main(ActivityThread.java:4918)
01-30 17:43:22.391: E/AndroidRuntime(7511):     at java.lang.reflect.Method.invokeNative(Native Method)
01-30 17:43:22.391: E/AndroidRuntime(7511):     at java.lang.reflect.Method.invoke(Method.java:511)
01-30 17:43:22.391: E/AndroidRuntime(7511):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:1004)
01-30 17:43:22.391: E/AndroidRuntime(7511):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:771)
01-30 17:43:22.391: E/AndroidRuntime(7511):     at dalvik.system.NativeStart.main(Native Method)
01-30 17:43:22.391: E/AndroidRuntime(7511): Caused by: android.view.InflateException: Binary XML file line #9: Error inflating class <unknown>
01-30 17:43:22.391: E/AndroidRuntime(7511):     at android.view.LayoutInflater.createView(LayoutInflater.java:613)
01-30 17:43:22.391: E/AndroidRuntime(7511):     at   com.android.internal.policy.impl.PhoneLayoutInflater.onCreateView(PhoneLayoutInflater.java:    56)
01-30 17:43:22.391: E/AndroidRuntime(7511):     at android.view.LayoutInflater.onCreateView(LayoutInflater.java:660)
01-30 17:43:22.391: E/AndroidRuntime(7511):     at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:685)
01-30 17:43:22.391: E/AndroidRuntime(7511):     at android.view.LayoutInflater.rInflate(LayoutInflater.java:746)
01-30 17:43:22.391: E/AndroidRuntime(7511):     at android.view.LayoutInflater.inflate(LayoutInflater.java:489)
01-30 17:43:22.391: E/AndroidRuntime(7511):     at android.view.LayoutInflater.inflate(LayoutInflater.java:396)
01-30 17:43:22.391: E/AndroidRuntime(7511):     at android.view.LayoutInflater.inflate(LayoutInflater.java:352)
01-30 17:43:22.391: E/AndroidRuntime(7511):     at com.android.internal.policy.impl.PhoneWindow.setContentView(PhoneWindow.java:306)
01-30 17:43:22.391: E/AndroidRuntime(7511):     at android.app.Activity.setContentView(Activity.java:1901)
01-30 17:43:22.391: E/AndroidRuntime(7511):     at com.thenewboston.travis.startingPoint.onCreate(startingPoint.java:19)
01-30 17:43:22.391: E/AndroidRuntime(7511):     at android.app.Activity.performCreate(Activity.java:5048)
01-30 17:43:22.391: E/AndroidRuntime(7511):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1094)
01-30 17:43:22.391: E/AndroidRuntime(7511):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2052)
01-30 17:43:22.391: E/AndroidRuntime(7511):     ... 11 more
01-30 17:43:22.391: E/AndroidRuntime(7511): Caused by: java.lang.reflect.InvocationTargetException
01-30 17:43:22.391: E/AndroidRuntime(7511):     at java.lang.reflect.Constructor.constructNative(Native Method)
01-30 17:43:22.391: E/AndroidRuntime(7511):     at java.lang.reflect.Constructor.newInstance(Constructor.java:417)
01-30 17:43:22.391: E/AndroidRuntime(7511):     at   android.view.LayoutInflater.createView(LayoutInflater.java:587)
01-30 17:43:22.391: E/AndroidRuntime(7511):     ... 24 more
01-30 17:43:22.391: E/AndroidRuntime(7511): Caused by: java.lang.UnsupportedOperationException: Can't convert to dimension: type=0x3
01-30 17:43:22.391: E/AndroidRuntime(7511):     at android.content.res.TypedArray.getDimensionPixelSize(TypedArray.java:463)
01-30 17:43:22.391: E/AndroidRuntime(7511):     at android.widget.TextView.<init> (TextView.java:898)
01-30 17:43:22.391: E/AndroidRuntime(7511):     at android.widget.TextView.<init>   (TextView.java:556)
01-30 17:43:22.391: E/AndroidRuntime(7511):     ... 27 more 
```

6）这是我的日志猫

7）此代码运行启动画面，但当 5000 毫秒完成时它崩溃？？？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T22:47:55.833

来自 LogCat：

```
Caused by: java.lang.UnsupportedOperationException: Can't convert to dimension: type=0x3
    at android.content.res.TypedArray.getDimensionPixelSize(TypedArray.java:463)
    at android.widget.TextView.<init> (TextView.java:898)
    at android.widget.TextView.<init>   (TextView.java:556) 
```

我认为文本大小不能用字符串表示。

```
<TextView
    ...
    android:textSize="@string/text_size" /> 
```

尝试为所有视图硬编码此值：

```
<TextView
    ...
    android:textSize="16sp" /> 
```

如果可行，请查看[样式和主题](http://developer.android.com/guide/topics/ui/themes.html)以找到为每个视图设置一个文本大小的适当方法。

# dojo - how to programmatically add a new entry?

> ID：14615184
> 
> 赞同：0
> 
> 时间：2013-01-30T22:35:17.253
> 
> 标签：dojo, xpages, xpages-extlib

I have a name picker attached to the input but also want to allow type-ahead in a second field attached to the name picker, and then add the selected entry in the type-ahead control to the dojo name text box control.

In the typeahead onchange event, I can get the value of it and I can get the values in the Name Text Box control, but each entry in the NameTextBox is a spanned link like this:

```
<SPAN tabIndex=0 val="**abbreviatedNotesName**"><A class=lotusFilter tabIndex=-1 href="javascript:;">**commonNotesName**<SPAN class=lotusClose>x</SPAN></A></SPAN> 
```

Do I need to re-write the innerHTML of the NameTextBox, and guess at the commonname from the typeahead result? Or, is there a better way? Thanks for any help/suggestions.

Here's the code:

```
<div id="copyToRow">
    <div class="namePickerContainer">
        <xe:namePicker id="namePicker1" for="fld_copyto_recipients">

            <xe:this.dataProvider>
                <xe:namePickerAggregator>
                    <xe:this.dataProviders>
                        <xe:dominoNABNamePicker addressBookSel="all"
                            nameList="peopleAndGroups">
                        </xe:dominoNABNamePicker>
                        <xe:dominoViewNamePicker labelColumn="$1"
                            viewName="($VIMPeople)" databaseName="#{javascript:viewScope.personalNAB;}"
                            label="#{javascript:viewScope.personalNABTitle;}">
                        </xe:dominoViewNamePicker>
                    </xe:this.dataProviders>
                </xe:namePickerAggregator>
            </xe:this.dataProvider>
        </xe:namePicker>
<xp:div id="copyToContainer" styleClass="addresseeContainer">
    <xe:djextNameTextBox id="fld_copyto_recipients"
        value="#{sendFilesDoc.file_CopyToRecipients}" multipleSeparator=","
        style="min-height:1.5em;" multipleTrim="true">
    </xe:djextNameTextBox>
    <xp:inputTextarea id="copyto_typeahead">
        <xp:typeAhead mode="partial" minChars="1"
            preventFiltering="true">
            <xp:this.valueList><![CDATA[#{javascript:getComponent("namePicker1").getTypeAheadValue(this)}]]></xp:this.valueList>
        </xp:typeAhead>

        <xp:eventHandler event="onchange" submit="true"
            refreshMode="partial" refreshId="copyToRow">
            <xp:this.script><![CDATA[var copyTo = XSP.getElementById("#{id:copyto_typeahead}");
var result = XSP.getElementById("#{id:copyToTA}");
var newEntry = '<SPAN tabIndex=0 val="' + copyTo.value + '"><A class=lotusFilter tabIndex=-1 href="javascript:;">' + copyTo.value + '<SPAN class=lotusClose>x</SPAN></A></SPAN>';
//Format: <SPAN tabIndex=0 val="<abbreviated NotesName>"><A class=lotusFilter tabIndex=-1 href="javascript:;">common NotesName<SPAN class=lotusClose>x</SPAN></A></SPAN>

result.value = copyTo.value;
var copyToRecipients = XSP.getElementById("#{id:fld_copyto_recipients}");
//<INPUT style="MIN-HEIGHT: 1.5em" id=view:_id1:include1:fld_copyto_recipients type=text name=view:_id1:include1:fld_copyto_recipients dojoType="extlib.dijit.NameTextBox">
var copyToValue = copyToRecipients.innerHTML;
alert('copytorecipients innerHTML = ' + copyToValue);
alert('copytorecipients value = ' + document.getElementById("#{id:fld_copyto_recipients}").value);  <-- undefined

var copyToArray = new Array();
var a = document.getElementsByName("#{id:fld_copyto_recipients}");
copyToArray = (a[0].value.split(','));

copyToArray.push(result.value);
//copyToRecipients.value = copyToArray.join(',');   <-- this does not work
alert('copyToArray value = ' + copyToArray.join(','));
result.value = copyToArray.join(',');

copyTo.value = "";
return;]]></xp:this.script>
        </xp:eventHandler>
    </xp:inputTextarea>
</xp:div>

<xp:inputText id="copyToTA">

</xp:inputText>
</div></div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T17:33:59.387

我认为让我绊倒的是需要对 NameTextBox 进行验证，这似乎可以防止 typeahead 中的 onchange 事件触发。谁知道？经历了很多迭代......我最终添加了[Tommy Valand 的 JS 函数](http://dontpanic82.blogspot.ca/2010/03/xpages-making-validation-behave.html)来控制何时触发验证，这似乎可以解决问题。

将 NameTextBox 绑定到数据源字段。将 typeahead 绑定到 requestScope 变量。下面的 typeahead onchange 事件代码还在包含 2 个输入的容器面板上进行了部分刷新。

```
/* append the typeahead name to those already selected */
var curVals:java.util.Vector = sendFilesDoc.getItemValue("file_SendToRecipients");
curVals.addElement(requestScope.sendToTypeAhead);
sendFilesDoc.replaceItemValue("file_SendToRecipients",curVals);
requestScope.sendToTypeAhead = null; 
```

然后在 NameTextBox onChange 事件中也部分刷新容器面板：

```
 /*
    remove duplicates that can be picked if the format of the displayed name in the right panel of the 
    name picker dialog doesn't match the column returned from the picker -- for instance, this will
    happen on internet-style names stored in the user's personal names.nsf
    e.g. FName LName <user@somecompany.com>
*/

    var thisField:javax.faces.component.UIInput = getComponent("fld_sendto_recipients");
    var theNames = @Unique(thisField.getValue());
    thisField.value = theNames; 
```

因此，您最终会得到类似于 MSN hotmail 工作方式的内容。最后一个问题要尝试解决，那就是如何在使用名称选择器或做出预先输入选择后让光标返回预先输入字段。根据这篇[文章](https://stackoverflow.com/questions/12459512/how-can-i-set-focus-to-edit-box-inside-repeat-control)在 NameTextBox 的客户端 onchange 事件中添加了此代码，但光标只是跳转到 typeahead 字段，然后立即跳出：

```
 /* set focus back on the typeahead input -- the input is a child of the typeahead dojo widget */
/* matches any <input> that is a child of the .dijitInputField class of the <div> for the typeahead */
var el = dojo.query('div[widgetid*="sendto_typeahead"] .dijitInputField > input').at(-1)[0].focus(); 
```

有什么帮助？？？或者，对解决方案改进的建议？

# jquery - jQuery - IF IN String or Array Condition

> ID：14615185
> 
> 赞同：3
> 
> 时间：2013-01-30T22:35:18.747
> 
> 标签：jquery, option, custom-attributes

With Jquery, I'm looping through the attribute named `tags`, in each `<option>` of the `<select>` dropdown below.

You'll see I would LOVE to have 2 of the options preselected, if the number 6 exists in the `tags` attribute.

```
<select name="someFun" id="someFun"  multiple="multiple">
  <option value="1" tags="4,6,7">something</option>
  <option value="44" tags="2">something</option>
  <option value="61" tags="1,3,6">something</option>
  <option value="44" tags="2">something</option>
</select>

<script language="javascript" type="text/javascript">
$(document).ready(function(){

  var preselectedtag = '6'; // auto select any with 6

  $("#someFun > option").each(function() {
     var tag = $(this).attr("tags");

     /* change attr of this option to "selected" if 6 exists in var tag */

  });

});
</script> 
```

I could use some help here. Is there a best way to do this?
In PHP I normally use an in_array() function, but javascript seems way more picky.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-30T22:39:41.163

jQuery有一个[`inArray()`](http://api.jquery.com/jQuery.inArray/)功能：

```
var tags = $(this).attr("tags").split(",");
if ($.inArray(preselectedtag, tags) > -1) {
  alert("Tag " + preselectedtag + " detected!");
} 
```

**编辑**

选择检测到的选项标签的 OP 代码的重构版本：

```
$(function(){
  var preselectedtag = '6',
      selected = [];
  $("#someFun > option").each(function() {
    var n = $(this), 
        tags = n.attr("tags").split(",");
    if ($.inArray(preselectedtag, tags) > -1) {
      selected.push(n.val());
    }
  });
  $('#someFun').val(selected);
}); 
```

[http://jsfiddle.net/zFBVT/](http://jsfiddle.net/zFBVT/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T22:39:00.423

拆分它`,`并检查呢？

```
var tags = tag.split(",")
if(tags.indexOf("6")!==-1){
    //do whatever manipulation you desire
} 
```

# php - PHP Variable scope issue laravel

> ID：14615189
> 
> 赞同：3
> 
> 时间：2013-01-30T22:35:35.533
> 
> 标签：php, variables, laravel

```
public function action_detail($orderId)
{
    $customerWithOrderDetails = Customer::with(array('order' => function($query)
    {   global $orderId;
        $query->where('id', '=', $orderId);
    }, 'order.orderdetail', 'order.attachment'))->find(Auth::user()->id);
    return var_dump($customerWithOrderDetails);
} 
```

I am getting "variable undefined" error. Why?

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-30T22:39:35.517

`$orderId`不是全局变量，而是父函数的变量。尝试这个：

```
function($query) use ($orderId)
    {
        $query->where('id', '=', $orderId);
    } 
```

代替：

```
function($query)
    {   global $orderId;
        $query->where('id', '=', $orderId);
    } 
```

# cordova - Cordova / Samsung Galaxy SIII - Camera Crashes app

> ID：14615190
> 
> 赞同：8
> 
> 时间：2013-01-30T22:35:38.157
> 
> 标签：cordova, samsung-mobile

# Fixed: "Do not keep activities" is default on SG3

Samsung Galaxy S3 ships with "Do not keep Activities" on by default (test models in two locations were both having this fault out the box)

Of course this means that as soon as any other activity is started, including from within your Cordova/PhoneGap app, your app's main activity will be destroyed. Any callback events will obviously never fire.

Switching the option off fixes the problem.

Check developer options regardless of brand/model, for example Asus Nexus 7 tablets do not have this default.

* * *

I've setup a basic test app. Which has a button and an img tag + the unmodified Cordova `index.js`

Button onclick is calling `capturePhoto()`:

```
function onPhotoURISuccess(imageURI) {
  console.log(imageURI);
  var largeImage = document.getElementById('largeImage');
  largeImage.style.display = 'block';
  largeImage.src = imageURI;
}

function capturePhoto() {
  navigator.camera.getPicture( onPhotoURISuccess, onFail, 
     { quality: 20, allowEdit: true, destinationType: Camera.DestinationType.FILE_URI });
}

function onFail(message) {
  alert('Failed because: ' + message);
} 
```

When I run the app on the simulator and also on a Asus Nexus 7 Tablet, the Camera opens as expected, allows a photo to be taken and confirmed, and then returns with the FILE_URI and sets the image `src` attribute.

However on a Samsung Galaxy SIII, (we are testing with two in different locations) the Camera opens, allows a capture, and after confirmation, attempts to resume the test app and dies.

Does anyone know of this problem, and is there a way to fix it?

FYI, I've added an extra setting to the `AndroidManifest.xml` activity node : `android:screenOrientation="nosensor"` - although this doesn't solve the issue (clutching at straws here.)

### Other info:

*   Phone is running Android 4.1.2
*   Targetting sdk 16
*   Cordova v 2.4.0rc1

Tested versions of phonegap - 1.8 - 2.4rc (all crash or fail to return image.)

Relevant portion of the stacktrace is here: [http://pastie.org/5974920](http://pastie.org/5974920)

# Update

*   regarding Simon MacDonald's suggestion.

Tested with `quality : 100`

Same results as before.

*   1.9-2.1 bomb (no message)
*   2.2-2.3 get back to the app, but no image.
*   2.4 - sorry the app has stopped - "managed" crash

None working.

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-25T22:40:21.080

在三星 Galaxy 3上，默认情况下，开发人员选项**“不保留活动”处于启用状态。**

当您启动任何其他活动时，这将垃圾收集您的主要活动，在这种情况下是相机。

关闭该选项可以解决问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-06T20:18:32.787

我有一个三星 Galaxy Note II。我有同样的问题。我在 AndroidManifest.xml 中更改了它，现在它适用于三星和 HTC Thunderbolt

```
<uses-feature android:name="android.hardware.camera" android:required="false"/>

<uses-sdk android:minSdkVersion="7" android:targetSdkVersion="10"/>

<activity  android:configChanges="orientation|keyboardHidden" /> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-07T21:55:05.103

您是否关闭了后台进程？如果是这样，这将破坏所有 Android 相机。在意图中传回的数据不能为空。

此外，请务必将其添加到您的 Android 清单中：

```
android:configChanges="orientation|keyboardHidden|keyboard|screenSize|locale" 
```

2.4.x 崩溃的事实是一个错误，因为在这种情况下处理恢复状态的东西坏了，但事实是您需要后台进程将数据从一个意图传递到另一个意图，否则这将不适用于任何安卓应用。我们至少开始优雅地处理这种情况。我认为关闭应用程序可能是一个错误，所以我有兴趣在这里看到一张票：[https ://issues.apache.org/jira/browse/CB](https://issues.apache.org/jira/browse/CB)

**更新**：见[https://issues.apache.org/jira/browse/CB-2533](https://issues.apache.org/jira/browse/CB-2533)

# activemq - authenticated queue create/access with a name pattern with activemq

> ID：14615192
> 
> 赞同：1
> 
> 时间：2013-01-30T22:35:44.100
> 
> 标签：activemq, apache-camel

Hi i want configure a activemq to secure queue access and creation.

```
client.<client-id>.sub 
```

`client.<client-id>.pub`

And late create a Camel redirect to a unique queue adding client-id headers on message redirected

Any suggestion?

PS Please forget my english

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T16:29:47.370

您处理对 ActiveMQ 队列和主题的授权的方式是通过前缀和用户级别的授权插件。

```
<authorizationPlugin>
       <map>
         <authorizationMap>
           <authorizationEntries>
             <authorizationEntry queue="client.client123.>" read="client123" write="client123" admin="admins" />
             <authorizationEntry topic="client.client123.>" read="client123" write="client123" admin="admins"/>
              ... etc. for other clients.
           </authorizationEntries> 
```

这假设 client123 已通过任何[身份验证机制进行身份验证](http://activemq.apache.org/security.html)进行身份验证。

我不遵循您希望 Camel 如何处理路由，但这样的事情可能是您想要从多个客户端队列路由到带有标头的单个队列（只是一个示例，您可能必须修改它以适应你的情况有点，错误处理等等。

注意`>`通配符队列的使用。

```
 from("jms:queue:client.>")
        .process(new Processor(){
            @Override
            public void process(Exchange exchange) throws Exception {
                String queue = exchange.getIn().getHeader("JMSDestination").toString();
                // queue name is: queue://client.<client_id>.xx
                String clientId = queue.substring(queue.indexOf(".")+1);
                int idx = clientId.lastIndexOf(".");
                clientId = clientId.substring(0,idx);
                System.out.println("ClientID: " + clientId);
                exchange.getIn().setHeader("SendingClientId", clientId);
            }

        })
        .to("jms:queue:collector.queue"); 
```

# ruby - How to match specific characters in a string only when character is surrounded by space on both sides?

> ID：14615194
> 
> 赞同：1
> 
> 时间：2013-01-30T22:36:04.443
> 
> 标签：ruby, regex, ruby-on-rails-3

So another regex question:

say i have this string `<p> < Hello World > </p>`. And I wanted to remove the inner `<>`, but not the p-tags.

How would I go about making a regex that matches < or > **only** when they have a space on both sides?

Thanks alot, Erwin

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T22:38:51.770

[对Rubular](http://rubular.com/)的快速访问给了我们这个答案：

```
string.match(\s[<>]\s) 
```

# dotnetnuke - 使用 .ASCX 文件创建 dotnetnuke 模块

> ID：14615200
> 
> 赞同：1
> 
> 时间：2013-01-30T22:36:45.123
> 
> 标签：dotnetnuke, loading, ascx

我试图了解 DotNetNuke 如何动态加载具有静态定义的事件处理程序的 Web 用户控件 (.ascx)。我试图浏览 DotNetNuke 网站上提供的文档，但找不到我的问题的正确答案。

假设用户控件内部有一个按钮，并且在 .ascx 文件中指定了其单击事件。用户控件不会连接 page_load() 或 init() 内的事件处理程序。因此，如果用户控件是动态加载的，而没有在每次加载时在 page_load() 中连接事件处理程序，为什么按钮的事件处理程序仍然有效？DotNetNuke 从 ASCX 文件中创建模块的过程是什么？如果有人可以向我指出一些文档，那也很棒。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T04:15:05.517

它只是在页面生命周期的早期加载控件，它的工作原理没有什么神奇的。它们是常规的 ascx 控件。关键是ascx上“AutoEventWireup”的定义。

# jquery - Need a jQuery function to cycle through some variables

> ID：14615201
> 
> 赞同：1
> 
> 时间：2013-01-30T22:36:45.940
> 
> 标签：jquery

I am fairly new to jQuery and need to cut some lines of code by writing a function that cycles through 3 separate variables. Below is my attempt to describe this (note that the objects work fine on their own, I just a function to cycle through the custom parameters: TYPE, POSITION AND RANK):

```
//TYPE: e, br, ie
//POSITION: l, r
//RANK: 1, 2, 3, 4, 5

//my script starts here
var TYPEPOSITIONRANKname = "label";
var TYPEPOSITIONRANKvalue = "percentage";
var TYPEPOSITIONRANKimg = "imgurl";
$("#statsTYPE .numberRANKranked .infobox_POSITION h3 span").text(TYPEPOSITIONRANKname);
$("#TYPEPOSITIONRANK img").attr({
    alt: TYPEPOSITIONRANKname,
    src: TYPEPOSITIONRANKimg
});
var TYPEPOSITIONRANKinter = $("#statsTYPE .numberRANKranked .infobox_POSITION p").text().replace(/[^0-9]+/g, "");
var TYPEPOSITIONRANKheight = parseInt(TYPEPOSITIONRANKinter, 10) /10 + 5;
$("#TYPEPOSITIONRANK").height(TYPEPOSITIONRANKheight + "%"); 
```

The words in all CAPS are my "parameters". In the example below, TYPE=e, POSITION=l and RANK=1:

```
var el1name = "label";
var el1value = "percentage";
var el1img = "imgurl";
$("#statse .number1ranked .infobox_l h3 span").text(el1name);
$("#el1 img").attr({
    alt: el1name,
    src: el1img
});
var el1inter = $("#statse .number1ranked .infobox_l p").text().replace(/[^0-9]+/g, "");
var el1height = parseInt(el1inter, 10) /10 + 5;
$("#el1").height(el1height + "%"); 
```

# php - PHPUnit turning an instance of a class into a mock after instantiation

> ID：14615204
> 
> 赞同：14
> 
> 时间：2013-01-30T22:36:56.173
> 
> 标签：php, unit-testing, mocking, phpunit

Is there a way to create a mock class with PHPUnit which I can then create a new instance of by using its class name?

I have an interface which defines two methods. Something like:

```
interface FooInterface {
    function getA();
    function getB();
} 
```

I then have another class which accepts a class name, creates an instance of that class, checks if it is an instance of what it expects (FooInterface) and then calls two methods on that class to get some information.

```
class FooInfo {
    protected $a;
    protected $b;

    public function __construct($fooClass) {
        $foo = new $fooClass;

        if (!($foo instanceof FooInterface)) {
            throw new \Exception();
        }

        $this->a = $foo->getA();
        $this->b = $foo->getB();
    }
} 
```

I know how to mock an object just fine. The problem is, since this class accepts a class name, not an object (it is a part of a Manager which creates instances of the given class as needed), I can't use a normal mock object.

I tried to make a mock object then use that class name. It seems to create the object just fine, and even seems to have the functions I mocked out. However, it doesn't seem to follow the will($this->returnValue('myValue')) portion I set up later.

```
public function testConstruct()
{
    $foo = $this->getMockForAbstractClass('Foo', array('getA', 'getB'));
    $foo->expects($this->any())->method->('getA')->will($this->returnValue('a'));
    $foo->expects($this->any())->method->('getB')->will($this->returnValue('b'));

    $copyClass = get_class($foo);
    $copy = new $copyClass();

    // Passes
    $this->assertTrue(method_exists($copy, 'getA');

    // Fails, $copy->getA() returns null.
    $this->assertEquals($copy->getA(), $foo->getA());
} 
```

So, it does have the functions which were mocked, but they all return null.

Any ideas?

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-01-31T11:21:10.977

`new`由于您现在遇到的原因，即使考虑到您灵活的用例，在类的构造函数中使用关键字也是一个相当糟糕的习惯。

您的测试将不起作用，因为您创建的模拟将永远不会被使用，因为您的类将始终创建注入类名的真实实例。

也就是说，你想做的事情可以用[padraic](http://blog.astrumfutura.com/)的优秀 mocking library [mockery](https://github.com/padraic/mockery)来完成！您需要的是一个“实例模拟”：

```
$mock = \Mockery::mock('overload:MyNamespace\MyClass'); 
```

您可以在该模拟上定义您的期望，该模拟将在实例化后立即转移到真实对象。

将 mockery 与 phpUnit 集成起来很容易，并且在项目的自述文件中得到了很好的解释。

顺便说一句。每个单元测试最好只做出一个断言！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T07:13:15.800

方法`getA`并`getB`返回 null 因为您没有指定它们应该返回什么。`$foo`您确实通过调用一些方法为抽象指定了这一点。没有办法解决这个问题。

由于很难（如果不是不可能）测试该功能，我会重写代码本身。如果您的构造函数需要类实例而不是类名，则测试会很容易。如果您还必须接受字符串，则可以编写几行代码来检查字符串输入并在提供字符串时创建一个类。

# javascript - Is it possible to get an xpath element using javascript, without using document.evaluate()?

> ID：14615205
> 
> 赞同：0
> 
> 时间：2013-01-30T22:36:56.237
> 
> 标签：javascript, document.evaluate

The reason I wish to do this is because document.evaluate() does not work in IE. Is there an alternative?

# wpf - How can I simplify the implementation of Commands in ViewModels for WPF/MVVM?

> ID：14615207
> 
> 赞同：2
> 
> 时间：2013-01-30T22:36:57.890
> 
> 标签：wpf, mvvm, delegatecommand

I have noticed that I am repeating a lot of code when implementing Commands on ViewModels for a MVVM-WPF scenario. The standard implementation, as shown below, consists of a public readonly field of type `ICommand`, a private `DelegateCommand` field and a method for the execution logic. `DelegateCommand` gets initialized in the `ICommand`s get-accessor.

How can this approach be condensed, considering the repetition for every command?

```
private DelegateCommand saveCommand;
private DelegateCommand commandClearInputFileList;
private DelegateCommand commandInputFilesDeleteSelected;

public ICommand SaveCommand {
    get {
        if (saveCommand == null) {
            saveCommand = new DelegateCommand(CommitDataBasePush);
        }
        return saveCommand;
    }
}

public ICommand CommandClearInputFileList {
    get {
        if (commandClearInputFileList == null) {
            commandClearInputFileList = new DelegateCommand(InputFilesClear);
        }
        return commandClearInputFileList;
    }
}

public ICommand CommandInputFilesDeleteSelected {
    get {
        if (commandInputFilesDeleteSelected == null) {
            commandInputFilesDeleteSelected = new DelegateCommand(InputFilesDeleteSelected);
        }
        return commandInputFilesDeleteSelected;
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-30T22:44:13.043

除了空合并运算符之外，您还可以使用[延迟加载](http://msdn.microsoft.com/en-us/library/dd642331.aspx)：

```
private Lazy<DelegateCommand> _cmd = new Lazy<DelegateCommand>(() => new DelegateCommand(InputFilesClear) );

public ICommand CommandClearInputFileList { get { return _cmd.Value; } } 
```

就个人而言，我已经放弃了命令，转而支持[Caliburn.Micro](http://caliburnmicro.codeplex.com/)框架提供的约定。上面的命令将简单地替换为公共方法。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-30T22:40:52.120

就个人而言，我越来越喜欢这种风格：

```
 private DelegateCommand saveCommand;
    public ICommand SaveCommand 
    {
        get 
        {
            return saveCommand ?? 
                (saveCommand = new DelegateCommand(CommitDataBasePush));
        }
    } 
```

或者，使用更少的代码行：

```
 private DelegateCommand saveCommand;
    public ICommand SaveCommand 
        => saveCommand ?? (saveCommand = new DelegateCommand(CommitDataBasePush)); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-31T09:38:16.290

`DelegateCommand`您可以将及其延迟初始化包装到一个简单的自定义命令类中，该类实现`ICommand`. 我称之为它`LazyCommand`，它的用法很简单：

```
// Declaration
public ICommand SomeCommand { get; private set; }

// Definition
SomeCommand = new LazyCommand(ExecuteSomeCommandMethod); 
```

该类`LazyCommand`如下所示：

```
public class LazyCommand : ICommand
{
    private readonly Lazy<DelegateCommand> _innerCommand;

    public LazyCommand(Action executeAction, Func<bool> canExecuteAction = null)
    {
        _innerCommand = canExecuteAction == null ? 
            new Lazy<DelegateCommand>(() => new DelegateCommand(executeAction)): 
            new Lazy<DelegateCommand>(() => new DelegateCommand(executeAction, canExecuteAction));
    }

    public bool CanExecute(object parameter)
    {
        return _innerCommand.Value.CanExecute();
    }

    public void Execute(object parameter)
    {
        _innerCommand.Value.Execute();
    }

    public event EventHandler CanExecuteChanged
    {
        add { _innerCommand.Value.CanExecuteChanged += value; }
        remove { _innerCommand.Value.CanExecuteChanged -= value; }
    }

    public void RaiseCanExecuteChanged()
    {
        _innerCommand.Value.RaiseCanExecuteChanged();
    }
} 
```

请让我知道这对你有没有用。干杯...

# php - Extract Data From XMLHttpRequest .responseText

> ID：14615209
> 
> 赞同：1
> 
> 时间：2013-01-30T22:37:08.240
> 
> 标签：php, javascript, ajax, xmlhttprequest

I have a fully functioning .php which utilizes XMLHttpRequest to Post data back to itself. What I'm looking to do is making the response a little more friendly for the user rather than me simply displaying a JS alert() when the function completes.

How can/should I access particular portions in the response rather than the entire response. For example, I could...

```
document.getElementById('result').innerHTML = "Received:<br>\n" + xmlhttp.responseText; 
```

...to grab all of it. Can I simply pull individual pieces out with document.getElementByid()??

Thanks.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T22:40:54.430

您不能在 responseText 上调用这些方法，但可以在 responseXML 上调用它们 - 请参阅[http://msdn.microsoft.com/en-us/library/ms534370(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/ms534370(v=vs.85).aspx)示例。responseXML 属性将包含一个 DOM，您可以在其中使用标准 DOM 方法（当然，假设您的服务器实际上正在发送回 XML - 如果没有，您需要自己解析 responseText）

# asp.net-mvc-3 - 从 EF 迁移到 Fluent NHibernate：内存泄漏、架构

> ID：14615216
> 
> 赞同：1
> 
> 时间：2013-01-30T22:37:26.463
> 
> 标签：asp.net-mvc-3, performance, nhibernate, jquery, fluent-nhibernate

下午好，我正在将一个相当大的项目迁移到 Fluent NHibernate 以用于单声道。我已经让大部分关键功能运行良好，但是我遇到了内存问题。

目前，此代码在我的两个控制器中。这似乎甚至不是最佳的。但我不确定把这个放在哪里。

```
 private static ISessionFactory CreateSessionFactory()
    {
        return Fluently.Configure()
           .Database(MySQLConfiguration.Standard.ConnectionString(
           c => c.FromConnectionStringWithKey("DashboardModels")
       ))
   .Mappings(m => m.FluentMappings.AddFromAssemblyOf<Accounts>())
   .Mappings(m => m.FluentMappings.AddFromAssemblyOf<Notes>())
    .Mappings(m => m.FluentMappings.AddFromAssemblyOf<Sales_Forecast>())
     .Mappings(m => m.FluentMappings.AddFromAssemblyOf<ChangeLog>())
      .Mappings(m => m.FluentMappings.AddFromAssemblyOf<Tasks>())

   .BuildSessionFactory();
    }
    ISessionFactory sessionFactory = CreateSessionFactory(); 
```

我的大多数数据库调用都是 AJAX，一次触发几个。这让我相信我创建了太多没有被发布的会话。

```
 public ActionResult ReadAccounts([DataSourceRequest] DataSourceRequest request)
    {
        DataSourceResult result;

        using (var session = sessionFactory.OpenStatelessSession())
        using (var tx = session.BeginTransaction())
        {
            var customers = from customer in session.Query<Accounts>().AsNoTracking()
                            where !customer.Deleted
                            select customer;
            result = customers.ToDataSourceResult(request);
            tx.Commit();
        }
    return Json(result, JsonRequestBehavior.AllowGet);

    } 
```

考虑到我将 StatelessSessions 用于仅返回数据的方法。

```
 public JsonResult GetNoteInfo(int id = 0)
    {
        Notes note;
        using (var session = sessionFactory.OpenStatelessSession())
        using (var tx = session.BeginTransaction())
        {
             note = (from notes in session.Query<Notes>().AsNoTracking()
                        where notes.Note_ID == id
                        select notes).FirstOrDefault();
             tx.Commit();
            return Json(JsonResponseFactory.SuccessResponse(note), JsonRequestBehavior.DenyGet);
        }
    } 
```

正如我所提到的，这是可行的，但是如何提高内存性能呢？大约有 5 种与底部方法类似的方法同时触发，因此如果您之前做过此操作的任何人，请告知如何防止内存快速膨胀，我将不胜感激。感谢您的时间和愉快的编码！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-31T07:42:52.757

控制器将为每个请求实例化。看起来您可能会在每次创建控制器时调用 CreateSessionFactory()。这是一个非常耗时的调用，通常应该在应用程序生命周期内只执行一次。一种常见的方法是在 Global.asax 中处理这个问题。

至于会话，您已将它们包装在 using 语句中，这将确保它们关闭连接等，因此这部分对我来说是正确的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T21:37:34.913

这就是我个人解决问题的方式（在 DotJoe、Oskar Berggren 和本网站上的其他人的帮助下）

全球.asax.cs

```
public static ISessionFactory SessionFactory =
         SessionProvider.BuildSessionFactory(); 
```

控制器

```
public ActionResult ReadAccounts([DataSourceRequest] DataSourceRequest request)
{
    DataSourceResult result;

    using(ISession session = MvcApplication.SessionFactory.OpenSession())
    {
        using (ITransaction tx = session.BeginTransaction())
        {
            var customers = session.Query<Accounts>().Where(a => a.Deleted == false).AsNoTracking();
            //from customer in session.Query<Accounts>().AsNoTracking()
            //                where !customer.Deleted
            //                select customer;
            result = customers.ToDataSourceResult(request);
            tx.Commit();
        }
    }
    return Json(result, JsonRequestBehavior.AllowGet);
} 
```

然后我在一个名为 Utilities 的文件夹中创建了一个类：

会话工厂.cs

```
public class SessionProvider  
{
 public static ISessionFactory BuildSessionFactory()
 {
 return Fluently.Configure()
      .Database(MySQLConfiguration.Standard.ConnectionString(
      c => c.FromConnectionStringWithKey("DashboardModels")
  ))
 .Mappings(m => m.FluentMappings.AddFromAssemblyOf<Accounts>())
 .BuildSessionFactory();

 }
} 
```

我希望这段代码可以帮助其他需要从 EF 转换为 NHibernate 的人。

这使我的内存管理在一个拥有 145 个用户的相当大的应用程序中保持在略高于 450,000kb 的范围内。（从使用 EF 的 600,000kb 减少）证明了 NHibernate 的可扩展性。

强烈推荐NHProf。它有很好的建议，并将为您的特定问题提供资源。

如果您要使用 Mono，我认为这是要走的路。

# php - 使用 PHP 驱动程序的 MongoDB 组查询

> ID：14615221
> 
> 赞同：0
> 
> 时间：2013-01-30T22:37:34.220
> 
> 标签：php, mongodb, group-by

我正在尝试使用官方 PHP 驱动程序和组（[http://www.php.net/manual/en/mongocollection.group.php](http://www.php.net/manual/en/mongocollection.group.php)）函数将工作`MongoDB`组查询转换为等效查询。`PHP`

这是**工作**的原始 MongoDB 查询：

```
db.collection.group(
{
    keyf: function(doc) {
        var date = new Date(doc.executed);
        var dateKey = (date.getMonth() + 1) + "/" + date.getDate() + "/" + date.getFullYear();
        return {'day': dateKey};
     },
    cond: { executed: { $gt: new Date('01/01/2013') }},
    initial: { executions:0 },
    reduce: function(obj, prev) { prev.executions++; }
}); 
```

这是我**不工作**的PHP 代码：

```
$keyf = new MongoCode('function(doc) {
    var date = new Date(doc.executed);
    var dateKey = (date.getMonth() + 1) + "/" + date.getDate() + "/" + date.getFullYear();
    return {\'day\': dateKey};
}');

$initial = array("executions" => 0);
$reduce = "function(obj, prev) { prev.executions++; }";
$conditionals = array("executed" => array('$gt' => "new Date('01/01/2013')"));

$result = $c->group($keyf, $initial, $reduce, array("condition" => $conditionals)); 
```

和：`print_r()`_`$result`

```
Array
(
    [retval] => Array
        (
        )

    [count] => 0
    [keys] => 0
    [ok] => 1
) 
```

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T22:55:28.277

您正在`condition`将 a 与字符串而不是日期进行比较。你需要一个[MongoDate](http://www.php.net/manual/en/class.mongodate.php)代替。就像是：

```
$cond_date = new MongoDate(strtotime("2013-01-01 00:00:00"));
$conditionals = array("executed" => array('$gt' => $cond_date)); 
```

# scala - Scala 有更好的方式来表达“自递归泛型”吗？

> ID：14615224
> 
> 赞同：17
> 
> 时间：2013-01-30T22:37:36.810
> 
> 标签：scala, generics, recursion, type-safety

有一个常见的 Java 习惯用法（`Enum`例如见）来声明必须匹配实际派生类型的泛型类型变量。

```
class Enum<E extends Enum<E>> {
...
} 
```

或者，如果需要更通用的参数：

```
abstract class Foo<T, Actual extends Foo<T, Actual>> {
    //now we can refer to the actual type
    abstract Actual copy();
}
class Concrete<T> extends Foo<T, Concrete<T>> {
    Concrete<T> copy() {...}
} 
```

事情很快就会变得非常冗长，所以我想 Scala 可能有比上面例子的直译更好的东西。

有没有更优雅的方法来实现这一点？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-30T23:08:45.797

另一种表述是使用抽象类型成员：

```
trait Foo { self => 
  type A <: Foo {type A = self.A}
} 
```

用你的例子：

```
trait Foo { self =>
  type T
  type Actual <: Foo {type T = self.T; type Actual = self.Actual}
}

trait Concrete extends Foo { self =>
  type T
  type Actual = Concrete {type T = self.T}
} 
```

虽然这种重新表述在 trait/class 声明中并不是真的更好，但在使用 trait/classes 时它可能会更简洁。（据我所知，没有其他方法可以重新表述递归类型）。

# jquery - 为 tinyMCE 添加自定义表格样式

> ID：14615225
> 
> 赞同：2
> 
> 时间：2013-01-30T22:37:38.387
> 
> 标签：jquery, html, html-table, tinymce

我希望为 TinyMCE 添加自定义表格样式，如何指定表格/标题/行的样式？

```
 <table class="tdata " border="0" cellpadding="0" cellspacing="0" 
width="600" style="margin-top: 8px; font-family: tahoma, arial, sans-serif; 
width: 600px; color: #000000;">

<th style="margin: 0px; padding: 2px 0px; border-top-width: 2px; 
border-top-style: solid; border-top-color: black;
border-bottom-width: 2px; border-bottom-style: solid; 
border-bottom-color: #aaaaaa; vertical-align: bottom; 
font-size: 10px; width:144px; text-align:center;">Company</th>

     formats : {

     customformat : {inline : 'span', styles : {verticalAlign: 'middle',
 borderWidth: '0px 0px 1px', borderStyle:'none none solid', 
borderbottomcolor: '#aaaaaa', fontFamily: 'tahoma, arial,
 sans-serif', fontSize: '10px', color: '333333'}, attributes : 
{title : 'My custom format'}}
            }, 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T09:29:12.420

您可以将自己的 css 文件添加到编辑器 iframe 头中，然后将其应用于编辑器内容。要包含此 css 文件，您只需使用 tinymce 配置参数[content_css](http://www.tinymce.com/wiki.php/Configuration%3acontent_css)

```
tinyMCE.init({
        ...
        content_css : "http::/your_server/your_css/your_custom_content.css"    
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-09-05T20:06:57.837

尝试添加以下内容

\config\tinyMceConfig.config

```
<config>

<config key="extended_valid_elements">table[class=tdata]</config>

</config> 
```

等等

# jquery - 从 jQuery UI 滑块计算和输出平均值

> ID：14615226
> 
> 赞同：0
> 
> 时间：2013-01-30T22:37:44.723
> 
> 标签：jquery, jquery-ui, jquery-calculation

我试着让它尽可能简单：我有六个 jQuery UI 滑块，如果它们的值不为 0，我需要获取它们的值，并显示一个平均值，这让我发疯了。

基本上我有六个（它们的名字来自 pm_rating_c1、pm_rating_c2 等）：

```
<input type="hidden" name="pm_rating_c1" value="60"> 
```

我需要在此输入字段中“实时”输出平均值：

```
<input type="text" class="rwmb-text" name="pm_overall_score" id="pm_overall_score" value="" size="30"> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T23:23:57.770

看看这个我做了一个类，这样循环起来会更容易

[http://jsfiddle.net/6SftR/](http://jsfiddle.net/6SftR/)

**JS代码**

```
var sum = 0 ; 
 var nums = 0;
$('.slider').bind({

    slidechange : function(event,ui) {
      sum = 0;
      nums  = 0;
    $('.slider').each(function(){

        var value = $( this ).slider( "option", "value" );
        if(value > 0 ) 
         {
            sum += value ; 
            nums++;
          }

        }); 
       var avg = sum / nums ; 
       $('.average').val(Math.floor(avg));
       console.log(avg); 
    }
}).slider(); 
```

**代码**

```
<div class="slider"></div>
<div class="slider"></div>
<div class="slider"></div>
<div class="slider"></div>
<div class="slider"></div>
<div class="slider"></div>

    <input type="text" class="average" name="pm_overall_score" id="pm_overall_score" value="" size="30"> 
```

我希望这个能帮上忙

# jquery - 用于其他用途的 tinyMCE 模态弹出窗口

> ID：14615230
> 
> 赞同：2
> 
> 时间：2013-01-30T22:37:57.047
> 
> 标签：jquery, tinymce

我正在尝试为我的 tinyMCE 编辑器实现一个额外的按钮。我以localhost:61025/Web/Scripts/tinymce/themes/advanced/source_editor.htm的来源为例，它是html(source)按钮的引用。

[看图片](http://s18.postimage.org/q8irex83d/editor.png)

如何创建一个引用我自己的文件的按钮，例如：

```
<input type=button value=html onclick="open_source_html()"> 
```

并且 open_source_html() 应该打开我的 tinymcepopup：localhost:61025/Web/Scripts/tinymce/themes/advanced/source_editor_CUSTOM.htm 文件

请帮我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T10:00:15.993

Alons 链接是一个很好的链接。您还可以查看 tinymce 插件目录中的一些插件。

```
tinyMCE.init({
    mode : "textareas",
    theme : "advanced",
    ...
    setup : function(ed) {
        // Add a custom button
        ed.addButton('yourbutton', {
            title : 'Your button',
            image : 'img/example.gif', // path to your image
            onclick : function() {
                // Add you own code to execute something on click
                open_source_html();
            }
        });
    }
)}; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T19:36:28.293

```
tinyMCE.activeEditor.windowManager.open({
            url : 'http://localhost/Save.html',
            width : 520,
            height : 340,
            resizable : "yes",
            inline : true,
            close_previous : "yes"

            }); 
```

知道了。多谢你们。

# javascript - 如何将输入限制为仅接受数字？

> ID：14615236
> 
> 赞同：94
> 
> 时间：2013-01-30T22:38:20.293
> 
> 标签：javascript, angularjs, angularjs-directive

我在 AngularJS 中使用 ngChange 来触发一个自定义函数，该函数将删除用户添加到输入中的任何字母。

```
<input type="text" name="inputName" data-ng-change="numbersOnly()"/> 
```

问题是我需要定位触发的输入，`numbersOnly()`以便删除输入的字母。我在谷歌上找了很久很久，却找不到任何关于这个的东西。

我能做些什么？

* * *

## 回答 #1

> 赞同：106
> 
> 时间：2013-01-30T23:51:31.020

**简单的方法**，如果它适用于您的用例，请使用[type="number" ：](https://docs.angularjs.org/api/ng/input/input%5Bnumber%5D)

```
<input type="number" ng-model="myText" name="inputName"> 
```

**另一种简单的方法：** [ng-pattern](https://docs.angularjs.org/api/ng/directive/ngPattern)也可用于定义一个正则表达式，以限制该字段中允许的内容。另请参阅[有关表单的“食谱”页面](http://docs.angularjs.org/cookbook/form)。

**骇客？方式**，$watch 控制器中的 ng-model：

```
<input type="text"  ng-model="myText" name="inputName"> 
```

控制器：

```
$scope.$watch('myText', function() {
   // put numbersOnly() logic here, e.g.:
   if ($scope.myText  ... regex to look for ... ) {
      // strip out the non-numbers
   }
}) 
```

**最好的方法**，在指令中使用 $parser。我不会重复@pkozlowski.opensource 提供的已经很好的答案，所以这里是链接：[https ://stackoverflow.com/a/14425022/215945](https://stackoverflow.com/a/14425022/215945)

上述所有解决方案都涉及使用 ng-model，这使得查找变得`this`不必要。

使用 ng-change 会导致问题。请参阅[AngularJS - 重置 $scope.value 不会更改模板中的值（随机行为）](https://stackoverflow.com/questions/12176925/angularjs-reset-of-scope-value-doesnt-change-value-in-template-random-behav)

* * *

## 回答 #2

> 赞同：66
> 
> 时间：2014-02-28T07:23:08.697

`ng-pattern`在文本字段上使用：

```
<input type="text"  ng-model="myText" name="inputName" ng-pattern="onlyNumbers"> 
```

然后将其包含在您的控制器上

```
$scope.onlyNumbers = /^\d+$/; 
```

* * *

## 回答 #3

> 赞同：19
> 
> 时间：2014-11-20T21:54:59.133

这是我对`$parser`@Mark Rajcok 推荐为最佳方法的解决方案的实现。它本质上是 @pkozlowski.opensource 的[优秀 $parser 用于文本答案](https://stackoverflow.com/a/14425022/215945)，但重写为只允许数字。所有功劳归功于他，这只是为了节省您阅读该答案然后重写您自己的 5 分钟：

```
app.directive('numericOnly', function(){
    return {
        require: 'ngModel',
        link: function(scope, element, attrs, modelCtrl) {

            modelCtrl.$parsers.push(function (inputValue) {
                var transformedInput = inputValue ? inputValue.replace(/[^\d.-]/g,'') : null;

                if (transformedInput!=inputValue) {
                    modelCtrl.$setViewValue(transformedInput);
                    modelCtrl.$render();
                }

                return transformedInput;
            });
        }
    };
}); 
```

你会像这样使用它：

```
<input type="text" name="number" ng-model="num_things" numeric-only> 
```

有趣的是，除非被字母数字包围，否则空格永远不会到达解析器，因此您必须`.trim()`根据需要这样做。此外，此解析器**不适**用于`<input type="number">`. 出于某种原因，非数字永远不会进入解析器，在那里它们会被删除，但它们*确实*会进入输入控件本身。

* * *

## 回答 #4

> 赞同：19
> 
> 时间：2016-11-17T13:26:38.950

提出的解决方案都不适合我，几个小时后我终于找到了方法。

这是角度指令：

```
angular.module('app').directive('restrictTo', function() {
    return {
        restrict: 'A',
        link: function (scope, element, attrs) {
            var re = RegExp(attrs.restrictTo);
            var exclude = /Backspace|Enter|Tab|Delete|Del|ArrowUp|Up|ArrowDown|Down|ArrowLeft|Left|ArrowRight|Right/;

            element[0].addEventListener('keydown', function(event) {
                if (!exclude.test(event.key) && !re.test(event.key)) {
                    event.preventDefault();
                }
            });
        }
    }
}); 
```

输入看起来像：

```
<input type="number" min="0" name="inputName" ng-model="myModel" restrict-to="[0-9]"> 
```

正则表达式**计算按下的键，而不是值**。

它还可以完美地与输入配合使用，`type="number"`因为它可以防止更改其值，因此永远不会显示密钥并且它不会与模型混淆。

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2016-10-11T08:35:53.177

这是一个很好的解决方案，只允许输入数字`input`：

```
<input type="text" ng-model="myText" name="inputName" onkeypress='return event.charCode >= 48 && event.charCode <= 57'/> 
```

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2015-10-29T13:41:07.697

有几种方法可以做到这一点。

你可以使用`type="number"`：

```
<input type="number" /> 
```

或者 - 我为此创建了一个使用正则表达式的可重用[指令。](https://jsfiddle.net/ohx7wpmw/2/)

**html**

```
<div ng-app="myawesomeapp">
    test: <input restrict-input="^[0-9-]*$" maxlength="20" type="text" class="test" />
</div> 
```

**Javascript**

```
;(function(){
    var app = angular.module('myawesomeapp',[])
    .directive('restrictInput', [function(){

        return {
            restrict: 'A',
            link: function (scope, element, attrs) {
                var ele = element[0];
                var regex = RegExp(attrs.restrictInput);
                var value = ele.value;

                ele.addEventListener('keyup',function(e){
                    if (regex.test(ele.value)){
                        value = ele.value;
                    }else{
                        ele.value = value;
                    }
                });
            }
        };
    }]);    
}()); 
```

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2018-10-17T18:09:49.913

以上所有解决方案都很大，我想为此付出 2 美分。

我只检查输入的值是否为数字，并检查它是否为空，仅此而已。

这是html：

```
<input type="text" ng-keypress="CheckNumber()"/> 
```

这是JS：

```
$scope.CheckKey = function () {
    if (isNaN(event.key) || event.key === ' ' || event.key === '') {
        event.returnValue = '';
    }
}; 
```

这很简单。

我相信这不会在粘贴上起作用，只是众所周知。

对于粘贴，我认为您需要使用 onChange 事件并解析整个字符串，这完全是另一种野兽。这是特定于打字的。

**更新粘贴**：只需添加这个 JS 函数：

```
$scope.CheckPaste = function () {
    var paste = event.clipboardData.getData('text');

    if (isNaN(paste)) {
        event.preventDefault();
        return false;
    }
}; 
```

并且 html 输入添加触发器：

```
<input type="text" ng-paste="CheckPaste()"/> 
```

我希望这有助于o/

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2016-02-05T10:59:54.243

这是一个[Plunker](http://plnkr.co/edit/OPtc6tcoKrPRwtVVOhfi?p=preview)处理上述建议不处理的任何情况。
通过使用 $formatters 和 $parsers 管道并避免 type="number"

这里是问题/解决方案的解释（也可以在 Plunker 中找到）：

```
/*
 *
 * Limit input text for floating numbers.
 * It does not display characters and can limit the Float value to X numbers of integers and X numbers of decimals.
 * min and max attributes can be added. They can be Integers as well as Floating values.
 *
 * value needed    |    directive
 * ------------------------------------
 * 55              |    max-integer="2"
 * 55.55           |    max-integer="4" decimal="2" (decimals are substracted from total length. Same logic as database NUMBER type)
 *
 *
 * Input type="number" (HTML5)
 *
 * Browser compatibility for input type="number" :
 * Chrome : - if first letter is a String : allows everything
 *          - if first letter is a Integer : allows [0-9] and "." and "e" (exponential)
 * Firefox : allows everything
 * Internet Explorer : allows everything
 *
 * Why you should not use input type="number" :
 * When using input type="number" the $parser pipeline of ngModel controller won't be able to access NaN values.
 * For example : viewValue = '1e'  -> $parsers parameter value = "".
 * This is because undefined values are not allowes by default (which can be changed, but better not do it)
 * This makes it impossible to modify the view and model value; to get the view value, pop last character, apply to the view and return to the model.
 *
 * About the ngModel controller pipelines :
 * view value -> $parsers -> model value
 * model value -> $formatters -> view value
 *
 * About the $parsers pipeline :
 * It is an array of functions executed in ascending order.
 * When used with input type="number" :
 * This array has 2 default functions, one of them transforms the datatype of the value from String to Number.
 * To be able to change the value easier (substring), it is better to have access to a String rather than a Number.
 * To access a String, the custom function added to the $parsers pipeline should be unshifted rather than pushed.
 * Unshift gives the closest access to the view.
 *
 * About the $formatters pipeline :
 * It is executed in descending order
 * When used with input type="number"
 * Default function transforms the value datatype from Number to String.
 * To access a String, push to this pipeline. (push brings the function closest to the view value)
 *
 * The flow :
 * When changing ngModel where the directive stands : (In this case only the view has to be changed. $parsers returns the changed model)
 *     -When the value do not has to be modified :
 *     $parsers -> $render();
 *     -When the value has to be modified :
 *     $parsers(view value) --(does view needs to be changed?) -> $render();
 *       |                                  |
 *       |                     $setViewValue(changedViewValue)
 *       |                                  |
 *       --<-------<---------<--------<------
 *
 * When changing ngModel where the directive does not stand :
 *     - When the value does not has to be modified :
 *       -$formatters(model value)-->-- view value
 *     -When the value has to be changed
 *       -$formatters(model vale)-->--(does the value has to be modified) -- (when loop $parsers loop is finished, return modified value)-->view value
 *                                              |
 *                                  $setViewValue(notChangedValue) giving back the non changed value allows the $parsers handle the 'bad' value
 *                                               |                  and avoids it to think the value did not changed
 *                Changed the model <----(the above $parsers loop occurs)
 *
 */ 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2016-09-27T14:07:33.857

```
 <input type="text" name="profileChildCount" id="profileChildCount" ng-model="profile.ChildCount" numeric-only maxlength="1" /> 
```

您可以使用纯数字属性。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2017-01-06T17:07:23.680

十进制

```
directive('decimal', function() {
                return {
                    require: 'ngModel',
                    restrict: 'A',
                    link: function(scope, element, attr, ctrl) {
                        function inputValue(val) {
                            if (val) {
                                var digits = val.replace(/[^0-9.]/g, '');

                                if (digits.split('.').length > 2) {
                                    digits = digits.substring(0, digits.length - 1);
                                }

                                if (digits !== val) {
                                    ctrl.$setViewValue(digits);
                                    ctrl.$render();
                                }
                                return parseFloat(digits);
                            }
                            return "";
                        }
                        ctrl.$parsers.push(inputValue);
                    }
                };
            }); 
```

数字

```
directive('entero', function() {
            return {
                require: 'ngModel',
                restrict: 'A',
                link: function(scope, element, attr, ctrl) {
                    function inputValue(val) {
                        if (val) {
                            var value = val + ''; //convert to string
                            var digits = value.replace(/[^0-9]/g, '');

                            if (digits !== value) {
                                ctrl.$setViewValue(digits);
                                ctrl.$render();
                            }
                            return parseInt(digits);
                        }
                        return "";
                    }
                    ctrl.$parsers.push(inputValue);
                }
            };
        }); 
```

[验证数字的角度指令](http://aandresdev.blogspot.pe/2017/01/angular-directivas-para-validar-input.html)

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2015-06-24T01:10:43.363

我知道这是旧的，但我为此目的创建了一个指令，以防有人正在寻找一个简单的解决方案。使用非常简单。

你可以在[这里查看](http://cohenadair.github.io/angular.number-input/)。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2016-04-30T21:03:58.363

您可能还想删除输入开头的 0...我只是在上面的 Mordred 答案中添加了一个 if 块，因为我还不能发表评论...

```
 app.directive('numericOnly', function() {
    return {
      require: 'ngModel',
      link: function(scope, element, attrs, modelCtrl) {

          modelCtrl.$parsers.push(function (inputValue) {
              var transformedInput = inputValue ? inputValue.replace(/[^\d.-]/g,'') : null;

              if (transformedInput!=inputValue) {
                  modelCtrl.$setViewValue(transformedInput);
                  modelCtrl.$render();
              }
              //clear beginning 0
              if(transformedInput == 0){
                modelCtrl.$setViewValue(null);
                modelCtrl.$render();
              }
              return transformedInput;
          });
      }
    };
  }) 
```

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2016-09-19T11:08:35.477

基本 HTML

```
<input type="number" /> 
```

基本引导

```
<input class="form-control" type="number" value="42" id="my-id"> 
```

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2018-06-26T13:43:27.720

试试这个，

```
<input ng-keypress="validation($event)">

 function validation(event) {
    var theEvent = event || window.event;
    var key = theEvent.keyCode || theEvent.which;
    key = String.fromCharCode(key);
    var regex = /[0-9]|\./;
    if (!regex.test(key)) {
        theEvent.returnValue = false;
        if (theEvent.preventDefault) theEvent.preventDefault();
    }

} 
```

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2019-02-27T16:04:55.260

解决方案：我为应用程序中的所有输入、数字、文本或任何内容创建了一个指令，因此您可以输入一个值并更改事件。制作角度 6

```
 import { Directive, ElementRef, HostListener, Input } from '@angular/core';

 @Directive({
// tslint:disable-next-line:directive-selector
selector: 'input[inputType]'
})
  export class InputTypeDirective {
 constructor(private _el: ElementRef) {}

 @Input() inputType: string;
 // tipos: number, letter, cuit, tel

@HostListener('input', ['$event']) onInputChange(event) {
if (!event.data) {
  return;
}

switch (this.inputType) {
  case 'number': {
    const initalValue = this._el.nativeElement.value;
    this._el.nativeElement.value = initalValue.replace(/[^0-9]*/g, '');
    if (initalValue !== this._el.nativeElement.value) {
      event.stopPropagation();
    }
     break;
          }
       case 'text': {
        const result = event.data.match(/[^a-zA-Z Ññ]*/g);
        if (result[0] !== '') {
           const initalValue = this._el.nativeElement.value;
           this._el.nativeElement.value = initalValue.replace(
          /[^a-zA-Z Ññ]*/g,
           ''
         );
           event.stopPropagation();
        }
        break;
    }
        case 'tel':
          case 'cuit': {
         const initalValue = this._el.nativeElement.value;
      this._el.nativeElement.value = initalValue.replace(/[^0-9-]*/g, '');
       if (initalValue !== this._el.nativeElement.value) {
         event.stopPropagation();
       }
     }
   }
  }
   } 
```

HTML

```
 <input matInput inputType="number" [formControlName]="field.name" [maxlength]="field.length" [placeholder]="field.label | translate"  type="text" class="filter-input"> 
```

* * *

## 回答 #16

> 赞同：-1
> 
> 时间：2016-05-03T00:42:35.710

我最终创建了上述代码的修改指令以接受输入并即时更改格式...

```
.directive('numericOnly', function($filter) {
  return {
      require: 'ngModel',
      link: function(scope, element, attrs, modelCtrl) {

           element.bind('keyup', function (inputValue, e) {
             var strinput = modelCtrl.$$rawModelValue;
             //filter user input
             var transformedInput = strinput ? strinput.replace(/[^,\d.-]/g,'') : null;
             //remove trailing 0
             if(transformedInput.charAt(0) <= '0'){
               transformedInput = null;
               modelCtrl.$setViewValue(transformedInput);
               modelCtrl.$render();
             }else{
               var decimalSplit = transformedInput.split(".")
               var intPart = decimalSplit[0];
               var decPart = decimalSplit[1];
               //remove previously formated number
               intPart = intPart.replace(/,/g, "");
               //split whole number into array of 3 digits
               if(intPart.length > 3){
                 var intDiv = Math.floor(intPart.length / 3);
                 var strfraction = [];
                 var i = intDiv,
                     j = 3;

                 while(intDiv > 0){
                   strfraction[intDiv] = intPart.slice(intPart.length-j,intPart.length - (j - 3));
                   j=j+3;
                   intDiv--;
                 }
                 var k = j-3;
                 if((intPart.length-k) > 0){
                   strfraction[0] = intPart.slice(0,intPart.length-k);
                 }
               }
               //join arrays
               if(strfraction == undefined){ return;}
                 var currencyformat = strfraction.join(',');
                 //check for leading comma
                 if(currencyformat.charAt(0)==','){
                   currencyformat = currencyformat.slice(1);
                 }

                 if(decPart ==  undefined){
                   modelCtrl.$setViewValue(currencyformat);
                   modelCtrl.$render();
                   return;
                 }else{
                   currencyformat = currencyformat + "." + decPart.slice(0,2);
                   modelCtrl.$setViewValue(currencyformat);
                   modelCtrl.$render();
                 }
             }
            });
      }
  }; 
```

})

* * *

## 回答 #17

> 赞同：-1
> 
> 时间：2016-06-17T08:19:10.400

```
<input type="text" ng-model="employee.age" valid-input input-pattern="[^0-9]+" placeholder="Enter an age" />

<script>
var app = angular.module('app', []);

app.controller('dataCtrl', function($scope) {
});

app.directive('validInput', function() {
  return {
    require: '?ngModel',
    scope: {
      "inputPattern": '@'
    },
    link: function(scope, element, attrs, ngModelCtrl) {

      var regexp = null;

      if (scope.inputPattern !== undefined) {
        regexp = new RegExp(scope.inputPattern, "g");
      }

      if(!ngModelCtrl) {
        return;
      }

      ngModelCtrl.$parsers.push(function(val) {
        if (regexp) {
          var clean = val.replace(regexp, '');
          if (val !== clean) {
            ngModelCtrl.$setViewValue(clean);
            ngModelCtrl.$render();
          }
          return clean;
        }
        else {
          return val;
        }

      });

      element.bind('keypress', function(event) {
        if(event.keyCode === 32) {
          event.preventDefault();
        }
      });
    }
}}); </script> 
```

# jms - akka 队列是否支持顺序单元，在 weblogic jms 队列中可用

> ID：14615239
> 
> 赞同：1
> 
> 时间：2013-01-30T22:38:28.513
> 
> 标签：jms, weblogic, akka, sequential

我们正在研究将应用程序从 weblogic 移植到使用 akka。应用程序利用 weblogic jms 队列提供的订单单元特性来确保消息驱动 bean 顺序处理相同订单（由订单 ID 标识）的消息。问题：AKKA 是否支持此功能？如果 AKKA 没有现成的，最好的方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T11:23:31.050

Akka Actor 串行处理其消息，因此只需将需要串行执行的消息发送到同一个 Actor 就可以了。

# android - Android：有什么方法可以加快 canvas.drawBitmap 的速度吗？

> ID：14615244
> 
> 赞同：8
> 
> 时间：2013-01-30T22:38:53.453
> 
> 标签：android, performance, sprite, tablet, frame-rate

简单的问题，但不确定是否有简单的答案！

我能做些什么来加快我的表面视图绘图吗？

我正在使用这样的东西：

```
c.drawBitmap(scaledSprite, X, Y, redPaint); 
```

我使用的方法必须在屏幕上绘制大约 25 个这样的精灵，所以我使用了 for 循环，这意味着它必须在一帧中显示 25 个。

现在，这在我测试过的 3 部手机上运行良好，但在平板电脑上，它只会变慢。我已经注释掉了所有其他的绘图方法，只留下了这个，这绝对是拖慢游戏速度的原因。

任何人都可以给我任何聪明的提示来加快速度吗？

我知道开放 GL 是一种可能性，但现在大部分游戏都是编写的，所以如果我能提供帮助，我现在真的不想做任何剧烈的改变。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-30T23:03:16.823

如果您将 SurfaceView 设置为较低质量的图形

```
getHolder().setFormat(0x00000004); //RGB_565 
```

并在同一配置中加载所有位图

```
Options options = new BitmapFactory.Options();
options.inScaled = false; 
options.inPreferredConfig = Bitmap.Config.RGB_565; 
```

这会使其更快，而且您需要根据帧延迟使精灵的移动速度可变。

但是，即使使用这些设置，具有许多精灵的街机游戏也无法在平板电脑上正常运行，因此，恐怕如果您想制作一款适合销售的游戏，您必须创建一个 OpenGL 框架或使用现成的框架。

# linux - svn 永久接受所有用户的证书

> ID：14615246
> 
> 赞同：1
> 
> 时间：2013-01-30T22:39:00.377
> 
> 标签：linux, svn, centos, ssl-certificate

所以我有一个第三方 svn 服务器的证书问题，现在修复它不是我的选择。当我 ssh 进入我的服务器时，我可以信任证书，但它仅适用于我登录的用户。现在要永久接受证书，我只是这样做：

```
svn info "https://www.example.com/repo" 
```

我收到以下消息

```
Error validating server certificate for 'https://www.example.com:443':
 - The certificate is not issued by a trusted authority. Use the
   fingerprint to validate the certificate manually!
Certificate information:
 - Hostname: www.example.com
 - Valid: from Mon, 21 Jan 2013 00:49:57 GMT until Thu, 24 Mar 2016 12:18:43 GMT
 - Issuer: GeoTrust, Inc., US
 - Fingerprint: XX:XX:XX:XX:XX:XX:XX:XX:XX
(R)eject, accept (t)emporarily or accept (p)ermanently? 
```

然后我点击`p`永久接受它。问题是当我以其他用户身份登录时，我会收到相同的证书警告。有什么方法可以同时永久接受我的帐户和所有现有帐户的证书？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T09:09:11.010

根据[svnbook](http://svnbook.red-bean.com/en/1.7/svn.serverconfig.httpd.html#svn.serverconfig.httpd.ssl.client)，当你点击“p”时，

> Subversion 会将服务器证书缓存在您的私有运行时 auth/ 区域中，就像缓存您的用户名和密码一样。

在 unix/linux 上，这种缓存发生在每个用户的主目录下。（有关更多信息，请参阅[此](http://svnbook.red-bean.com/en/1.7/svn.serverconfig.netmodel.html#svn.serverconfig.netmodel.credcache)内容）

因此，您需要了解缓存，然后将证书放在适当的位置。

高温高压

# c# - 如何将错误设置为控制器上的返回并在asp net mvc 4中的uploadify上获取它？

> ID：14615248
> 
> 赞同：0
> 
> 时间：2013-01-30T22:39:17.057
> 
> 标签：c#, asp.net, asp.net-mvc, asp.net-mvc-4, uploadify

我没有想法。系统的构建方式我不确定我能做我必须做的事情。

这是处理来自uploadify的上传文件的控制器。

```
public ActionResult Upload(HttpPostedFileBase FileData, FormCollection form)
{
     try 
     {
        String path = String.Format("{0}{1}", caminhoArmazenamento, tipoDocNome);

        if (!Directory.Exists(path))
        {
            Directory.CreateDirectory(path);
            FileData.SaveAs(path);
            //HERE I NEED SOME CONTROL TO RETURN THAT THINGS WENT RIGHT
        }
        else
        {
            FileData.SaveAs(path);
            //HERE I NEED SOME CONTROL TO RETURN THAT THINGS WENT RIGHT
        }
    }
    catch(exception)
    {
       //HERE I NEED SOME CONTROL SAYING THAT THINGS WENT WRONG
    }
} 
```

这是上传：

```
$('#file_upload').uploadify({
        'swf': '../../Components/uploadify/uploadify.swf',
        'uploader': '/Operacao/Upload',
        'auto': false,
        'buttonImage': '../../Images/uploadify/importar.jpg',
        'buttonClass': 'uploadifyBtn',
        'width': '250',
        'height': '25',
        'onFallback': function () {
            alert('Versão do flash não compativel com o sistema de upload. Favor contactar o administrador do sistema!');
        },
        'onUploadError' : function(file, errorCode, errorMsg, errorString) {
            alert('O arquivo ' + file.name + ' não pode ser importado: ' + errorCode + ' - ' + errorMsg + ' - ' + errorString);
        },
        'onSelectError': function () {
            alert('Você não tem permissão para acessar o arquivo: "' + file.name + '" ou o arquivo está corrompido. Favor contactar o administrador do sistema.');
        }
    }); 
```

有人在asp net mvc 4中成功实现uploadfy吗？不管我设置什么返回，我只会得到一个或一般错误或成功消息。我需要更具体地实现错误控制，例如，如果无法创建目录或无法上传文件以及原因。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T23:00:20.053

据我所知，根据返回服务器代码，uploadify 将执行不同的回调。

这是服务器返回 404 以及如何上传响应的示例： [http ://www.uploadify.com/documentation/uploadify/onuploaderror/](http://www.uploadify.com/documentation/uploadify/onuploaderror/)

您要做的是根据发生的情况返回适当的 Response.StatusCode (200, 404, 501)。

[如何让 MVC 动作返回 404](https://stackoverflow.com/questions/2948484/how-to-get-mvc-action-to-return-404)

# java - 使用 32 字节密钥的 Java AES 加密 - 密钥大小无效

> ID：14615249
> 
> 赞同：6
> 
> 时间：2013-01-30T22:39:21.503
> 
> 标签：java, encryption, aes

> **可能重复：**
> [InvalidKeyException 非法密钥大小](https://stackoverflow.com/questions/3862800/invalidkeyexception-illegal-key-size)

```
public static byte[] encryptBytes(byte[] bytes, byte[] key)
{
    Cipher cipher = null;

    try
    {
        cipher = Cipher.getInstance("AES/ECB/PKCS5Padding");
        SecretKeySpec secretKey = new SecretKeySpec(key, "AES");
        cipher.init(Cipher.ENCRYPT_MODE, secretKey);

        return Base64.encodeBase64(cipher.doFinal(bytes));
    }
    catch (Exception e)
    {
        e.printStackTrace();
    }

    return null;
}

public static byte[] decrpytBytes(byte[] encryptedData, String key)
{
    byte[] keyBytes = convertToByteArray(key);
    Cipher cipher = null;

    try
    {
        cipher = Cipher.getInstance("AES/ECB/PKCS5PADDING");
        SecretKeySpec secretKey = new SecretKeySpec(keyBytes, "AES");
        cipher.init(Cipher.DECRYPT_MODE, secretKey);

        return cipher.doFinal(Base64.decodeBase64(encryptedData));
    }
    catch (Exception e)
    {
        e.printStackTrace();
    }

    return null;
}
//Simply takes every other two characters an terms them into a byte value 
    //then stuffs them into  a byteArray
public static byte[] convertToByteArray(String key)
{
    byte[] b = new byte[key.length()/2];

    for(int i=0, bStepper=0; i<key.length()+2; i+=2)
        if(i !=0)
            b[bStepper++]=((byte) Integer.parseInt((key.charAt(i-2)+""+key.charAt(i-1)), 16));

    return b;
}

public static void main(String[] args) throws Exception
{
            //This string has 64 characters. When sent to convertToByteArray it returns a byte array or 32 bytes
    String key = "00112233445566778899AABBCCDDEEFF0123456789ABCDEF0123456789ABCDEF";

            //Test it out
    byte f[] = {2,4,7};
    byte[] encrypted = encryptBytes(f, convertToByteArray(key));
    byte[] unencrypted = decrpytBytes(encrypted, key);

    System.out.print(unencrypted[0]);
} 
```

错误：

非法密钥大小或默认参数

我不知道为什么我的密钥大小无效。它应该能够采用 256 加密的 32 字节密钥

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-30T23:30:07.330

[http://www.javamex.com/tutorials/cryptography/unrestricted_policy_files.shtml](http://www.javamex.com/tutorials/cryptography/unrestricted_policy_files.shtml)

“事实证明，Cipher 类通常不允许密钥大小超过 128 位的加密。这背后的明显原因是一些国家（尽管越来越少）对进口加密软件的允许密钥强度有限制，尽管实际数字 128 是有问题的（见下文）。好消息是：

您可以通过使用 Sun 提供的其他文件覆盖安全策略文件来轻松消除限制。”

# c# - Protobuf-net 序列化问题

> ID：14615250
> 
> 赞同：2
> 
> 时间：2013-01-30T22:39:22.877
> 
> 标签：c#, protobuf-net

这似乎是一个相当简单的用例，我不明白以下代码片段中的异常是如何被抛出的。

```
static void Main(string[] args)
{
    using (var foobar = new MemoryStream())
    {
        ProtoBuf.Serializer.Serialize(foobar, new Foobar());
        if (foobar.Length == 0)
            throw new Exception("Didn't serialize");
    }
}

[ProtoContract]
public class Foobar
{
    [ProtoMember(1)]
    public int FoobarInt { get; set; }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T22:48:51.167

ProtoBuf 有点奇怪......零长度序列化形式本身并不是“错误”......

这样想：

如果你想 *de*serialize 一个流并获得你试图序列化的空对象，一个空流就足够了（即，对象的“新”会做同样的事情）但是如果对象上有任何数据集，现在您需要实际保存/加载内容

```
static void Main(string[] args)
{
    using (var foobar = new MemoryStream())
    {
        var foo = new Foobar() { FoobarInt = 1 };
        ProtoBuf.Serializer.Serialize(foobar, foo);
        if (foobar.Length == 0)
            throw new Exception("Didn't serialize");
    }
}

[ProtoContract]
public class Foobar
{
    [ProtoMember(1)]
    public int FoobarInt { get; set; }
} 
```

现在产生一个字节数组`0x08, 0x01`

# c# - 在 VB.NET 项目中使用 C# 类

> ID：14615253
> 
> 赞同：1
> 
> 时间：2013-01-30T22:39:31.407
> 
> 标签：c#, vb.net, winforms

我有一`C#`堂课（很多台词）。我想`class`在我的`VB.NET`项目中使用它。因此，我尝试将`.cs`文件添加到我的`VB.NET`项目中，然后通过以下方式调用它：

`MyclassName.VoidName()`

它不工作。

( `'MycalssName' is not declared. It may be inaccessible due to its protection level.`)

如何`C#` `class`在我的`VB.NET`项目中使用 a？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-30T22:41:44.637

您可以简单地 `C#`将代码编译成程序集 (DLL) 并从您的`VB.NET`项目中引用该程序集。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T23:10:57.203

单个 .NET 程序集/项目应仅包含以一种支持的语言编写的代码。任何 .NET 项目的编译都需要特定语言的 MSBuild 目标（作为项目文件的一部分包含在内）。因此，您将无法在 VB.net 项目中编译/使用 C# 语言源文件，反之亦然。

忽略 MSBUild 方面，vb.net 项目（带有 ac# 源文件）的编译甚至不会成功，因为语法会不同，编译器 (vbc.exe) 会抛出很多编译器错误。

因此，最好编译 C# 项目并引用 VB.net 项目中的类型。

# xml - 如何以另一种方式导出 WordPress 帖子和评论...？

> ID：14615260
> 
> 赞同：0
> 
> 时间：2013-01-30T22:39:45.627
> 
> 标签：xml, wordpress

我妈妈的博客经过 10 年的写作（因此手动复制几乎是不可能的）已被其平台提供商转移到 WordPress。我们想使用我们自己的 WordPress 实例，但旧实例的提供者通过禁用大量选项使 WordPress 无法使用，因此我们既不能使用默认导出选项，也不能使用插件来这样做。

如何在这个被阻止的 WordPress 实例中生成 XML，以便我可以移动我们自己的 WordPress 实例上的所有数据？

提前致谢！

# java - Big-O 分析字符串算法的子字符串。O(n*logn) 是否简化？

> ID：14615264
> 
> 赞同：2
> 
> 时间：2013-01-30T22:40:02.190
> 
> 标签：java, algorithm, data-structures, big-o

您好，感谢您的阅读。我正在做家庭作业。我创建了一种与字符串进行比较的方法，以查看一个是否是另一个的子字符串。我知道已经有一个内置的方法可以做到这一点。作业不允许我使用它们。无论如何，下面的代码正在工作。

我必须使用 Big-O 表示法来分析算法的复杂性。从我可以看到外循环以线性时间运行，因为它只是运行与字符串长度一样多的时间。因此：O(n)

内部循环是不同的，它可能会发生也可能不会发生，如果发生，它可能会在它输入的第二个字符串的长度之前完成。因此：O(logn)

所以在我看来复杂度是 O (n*logn)。这会简化为 O(n) 还是保持当前形式？或者我错了内循环是O（logn）？

```
import java.util.Scanner;

public class HW3q6 {
public static void main(String[] args) {
    Scanner userInput = new Scanner( System.in );
    System.out.println("Please enter the first string: ");
    char[] charArray1 = userInput.nextLine().toUpperCase().toCharArray();
    System.out.println("Please enter the second string: ");
    char[] charArray2 = userInput.nextLine().toUpperCase().toCharArray();

    System.out.println("The second string is a substring of the first: " + subString(charArray1, charArray2));

}

private static boolean subString(char[] charArray1, char[] charArray2) {
    int counter = 0;
    for (int i = 0; i < (charArray1.length + 1) - charArray2.length ; i++) {
        if (charArray1[i] == charArray2[0]) {
            for (int n = 0; n < charArray2.length; n++) {
                if (charArray1[i+n] == charArray2[n]) {
                    counter++;
                }
            }
            if (counter == charArray2.length) {
                return true;
            } else
                counter = 0;
        }
    }
    return false;

}
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T23:29:52.027

我看到你已经接受了一个答案。但是您的时间复杂度实际上是较小的文本和较大的文本`O(m*(n-m+1))`在哪里。要看到这种区别很重要，只需为 m 和 n 选择几个数字并计算。如果论点是当谈到 Big-O 表示法时和since之间没有太大区别，那么您可以说复杂度是since 。此外，您的代码没有进行正确的错误检查，请参阅[Geekviewpoint.com 关于字符串匹配的一些提示。](http://www.geekviewpoint.com/java/string_search_algorithm/find_substring)`m``n``O(mn)``O(m*(n-m+1))``O(mn) > O(m*(n-m+1))``O(n^2)``O(n^2) > O(mn) > O(m*(n-m+1))`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-30T23:01:45.030

内循环不是 logN。Big O 衡量最坏情况的复杂性。正如我从您的代码中了解到的那样，内部循环可以运行 N（字符串长度 2）次。解释如下：

假设你有两个字符串 aaaaaaaa 和 aaac，外循环会匹配第一个字符，你会进入内循环，检查每个字符，然后实现一个 false。然后外循环将再次将第二个字符串的开头与第一个字符串的第二个字符匹配，然后您将再次检查第二个字符串中的所有字符是否为假。这将适用于第一个字符串的 M 个字符，以及第二个字符串的 N 个字符，产生一个 O(MN) 算法，考虑到 M=c*N，它是 O(N^2)，其中 c 是一个常数。

希望这可以帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-30T23:00:21.947

正如 mellamokb 指出的那样，内部循环仍然以线性时间运行。因此，您的算法作为一个整体将是 O(mn)，其中 m 和 n 是两个字符串的长度。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-30T22:43:05.833

`O(NlogN)`不等于`O(N)`

但是，您认为内部循环是错误的推理`O(logN)`是错误的。它“可能会发生也可能不会发生”的事实并不一定会成功`O(logN)`。例如，如果内部循环发生“平均大约一半的时间”，那么贡献可能是`C * 1/2 N`; 即`O(N)`。

我现在没有时间详细分析代码，但您似乎需要查看最佳、平均和最坏情况的复杂性。

（例如，快速排序算法的经典形式，`O(NlogN)`平均而言，但最坏情况的复杂度为`O(N^2)`.）

# java - 应用程序中的 BlackBerry 地图未放大到坐标

> ID：14615267
> 
> 赞同：1
> 
> 时间：2013-01-30T22:40:06.167
> 
> 标签：java, blackberry, maps, blackberry-maps

应用程序正在显示`MapView`，但无法放大到提供的坐标。我错过了什么...任何帮助将不胜感激

代码如下——

```
 public Screen()
{        
    // Set the displayed title of the screen       
    setTitle("Roamiing Checker");
    String currentNetwork = RadioInfo.getCurrentNetworkName();
    add(new RichTextField("Current Operator:"+currentNetwork, Field.FOCUSABLE));

    RichTextField roam_rtf = new RichTextField("",Field.FOCUSABLE);

    if(Check_NON_CAN_Operator())
    synchronized(Application.getEventLock())
    {
        roam_rtf.setText("Roaming");
    }
    else
    synchronized(Application.getEventLock())
    {
        roam_rtf.setText("Not in roaming");
    }

    add(roam_rtf);

    maps_rtf = new RichTextField("Waiting on current location.");

    loc = new LocationThread();
    loc.run();

    Timer timer = new Timer();
    timer.schedule(new LocationTimer(), 2*1000, 10*1000);

    add(maps_rtf);
    add(map_grid);

}

public class LocationTimer extends TimerTask
{
    public LocationTimer()
    {
    }

    public void run()
    {
        if(loc.getLatitude()==0 && loc.getLongitude()==0)
        {
            synchronized(App.getEventLock())
            {
                if(maps_rtf.getText().length() > 26)
                {
                    if(maps_rtf.getText().length() >  32)
                        maps_rtf.setText("Waiting on current location.");
                    else
                        maps_rtf.setText(maps_rtf.getText() + ".");
                }       
                else
                    maps_rtf.setText("Waiting on current location.");
            }
        }
        else
        {
            if(counter==0)
                synchronized(App.getEventLock())
                {
                    maps_rtf.setText("");
                    BBMaps(loc.getLatitude(),loc.getLongitude(),loc.getAltitude());
                    counter++;
                }
            else
                synchronized(App.getEventLock())
                {
                    maps_rtf.setText("");

                    map_coord = new Coordinates(loc.getLatitude(),loc.getLongitude(),loc.getAltitude());
                    mf.moveTo(map_coord);
                    map_grid.set(mf,2,1);

                    map_grid.set(new RichTextField("Latitude:- "+ loc.getLatitude()),3,1);
                    map_grid.set(new RichTextField("Longitude:- "+ loc.getLongitude()),4,1);
                    map_grid.set(new RichTextField("Altitude:- "+ loc.getAltitude()),5,1);

                    //BBMaps(loc.getLatitude(),loc.getLongitude(),loc.getAltitude());
                    counter++;
                }
        }
    }
}

public boolean Check_NON_CAN_Operator()
{
    boolean NON_CANOperatorCheck = true;

    final String CanadianOperators[] = {"Rogers Wireless" , "Telus" , "Bell"};

    String CurrentNetworkName = "";

    CurrentNetworkName = RadioInfo.getCurrentNetworkName();

    if( CurrentNetworkName.equalsIgnoreCase(CanadianOperators[0]) 
                || CurrentNetworkName.equalsIgnoreCase(CanadianOperators[1])
                ||CurrentNetworkName.equalsIgnoreCase(CanadianOperators[2]) )
        NON_CANOperatorCheck = false;               //if Current Operator is CANADIAN then **FALSE**
    else
        NON_CANOperatorCheck = true;                //if Current Operator is not CANADIAN then **TRUE** hence ROAMING

    return NON_CANOperatorCheck;
 }

public void BBMaps(double Lat,double Lng,float Alt)
{
    mf.setPreferredSize(mf_width, mf_height);           //480*100px

    map_coord = new Coordinates(Lat,Lng, Alt);
    mf.moveTo(map_coord);       //Maps pointing on the current location(if found unless Greenland)

    //Row 1
    map_grid.add(new RichTextField("Roaming State:- " + String.valueOf(Check_NON_CAN_Operator()),Field.FOCUSABLE));
    //Row 2
    map_grid.add(mf);           //Map Field added
    //Row 3
    map_grid.add(new RichTextField("Latitude:- " + Lat),Field.FOCUSABLE);
    //Row 4
    map_grid.add(new RichTextField("Longitude:- " + Lng),Field.FOCUSABLE);
    //Row 5
    map_grid.add(new RichTextField("Accuracy:- " + Alt),Field.FOCUSABLE);

} 
```

我正在严格地使用 OS 5.0..如果它是 6.0，使用新的 lbs.maps.* API 会更容易

# html - 与不间断空格相反的 HTML

> ID：14615268
> 
> 赞同：38
> 
> 时间：2013-01-30T22:40:08.410
> 
> 标签：html, css

在我的 HTML 中，我有一个很长的单词，并且我试图仅在没有足够空间的情况下强制一个特定的断点。我需要的是一种打破条件的占位符。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2013-01-30T22:45:36.510

也许Unicode零宽度空间会有所帮助：[http ://www.fileformat.info/info/unicode/char/200b/index.htm](http://www.fileformat.info/info/unicode/char/200b/index.htm)

`&#8203;`例如 ，HTML 实体`over&#8203;flow`会在“over”和“flow”之间断开单词，仅当整个单词不适合时。

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2013-01-30T22:41:20.173

标签`<wbr>`（用于 Word BReak）会做你想做的事。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-02-24T14:48:02.413

我将发布另一种选择，因为那是我第一次发现这个问题时真正想要的。

您应该使用[Soft hyphen](https://en.wikipedia.org/wiki/Soft_hyphen)而不是[Zero-width space](https://en.wikipedia.org/wiki/Zero-width_space)。

从[软连字符](https://en.wikipedia.org/wiki/Soft_hyphen)：

> **软连字符**或**音节连字符**，缩写为**SHY**，是在某些编码字符集中保留的代码点，用于通过插入可见连字符来跨行分隔单词。

此外，将其与[软连字符](https://en.wikipedia.org/wiki/Soft_hyphen)的“零宽度空间”进行比较：

> 它用作一个不可见的标记，用于指定文本中允许使用连字符的位置，而不会在文本重新**排列时在不方便的位置强制换行。**它只有在行尾换行后才可见。软连字符的 Unicode 语义和 HTML 实现**在许多方面类似于 Unicode 的零宽度空间，除了软连字符会在不可见时保留两边字符的字距**。另一方面，零宽度空间不会，因为即使未渲染它也被视为可见字符，因此具有自己的字距调整指标。

您还可以查看 wikipedia 文章，其中包含在窗口调整大小时更改的示例文本。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-07-31T14:15:15.663

br 的反义词：

```
<nobr>   </nobr> 
```

问候

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-01-30T23:32:22.753

Microsoft CSS 规则 "word-wrap:word-break" 应该做你想做的事，大多数旧浏览器都支持

[https://developer.mozilla.org/en-US/docs/CSS/word-wrap](https://developer.mozilla.org/en-US/docs/CSS/word-wrap)

[http://msdn.microsoft.com/en-us/library/ie/ms531186(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/ie/ms531186(v=vs.85).aspx)

现在还有一个 WC3 版本 - “overflow-wrap:break-word;” 正如您在规范中所读到的“出于遗留原因，UA 必须将 'word-wrap' 视为 'overflow-wrap' 属性的替代名称，就好像它是 'overflow-wrap' 的简写。” - 所以你可能想测试你的浏览器集是否真的实现了这个。

[http://www.w3.org/TR/css3-text/#overflow-wrap](http://www.w3.org/TR/css3-text/#overflow-wrap)

[http://caniuse.com/#search=overflow-wrap](http://caniuse.com/#search=overflow-wrap)

你总是可以安全地使用它并同时使用

```
p.breaklongwords {
    word-wrap:word-break;
    overflow-wrap:break-word;
} 
```

# javascript - 将所选文本保持在输入焦点上

> ID：14615270
> 
> 赞同：1
> 
> 时间：2013-01-30T22:40:21.253
> 
> 标签：javascript, select, text, input, focus

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T22:51:18.043

您可以使用[rangy 库](http://code.google.com/p/rangy/source/browse/trunk/src/js/rangy.js?r=5)来轻松进行选择管理。

1.  这是一个跨浏览器支持的库。
2.  使用简单

# database - Postgres Timestamp

> ID：14615271
> 
> 赞同：10
> 
> 时间：2013-01-30T22:40:21.940
> 
> 标签：database, postgresql, timezone, timestamp

We are having a debate about the best way to store a timestamp in postgres. Currently all time stamps are stored as +00 and we have a timezone associated with each client. We look up the timezone and convert the time that something happened which increases complexity as we need to do more joins and a more complex query.

Another method is connecting to Postgres and setting the timezone of the connection and it changes all the times to be that timezone.

My problem with this is that in ANZ there are 4-5 timezones. When we try and do our invoices we need to know what day certain transactions happened, and across three timezones there is no perfect solution.

I was thinking of including the timezone in the timestamp to make it easier - TIMESTAMP '1999-01-15 8:00:00 -8:00'

I was under the impression that this was best practice, but some people say this is a bad idea. We will have customers across ANZ that we need to do accurate invoices for, what is the best solution and most elegant?

Cheers Scott

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-01-31T00:46:31.780

这里没有防弹解决方案。

我的第一个建议：永远不要依赖服务器的默认时区。

我的第二个建议：`timestamp`根据`timestamptz`数据的（主要）语义进行选择。

更详细地说：PostgresSQL 有两个时间戳变体，名称容易混淆**`TIMESTAMP WITHOUT TIMEZONE (timestamp)`**，而**`TIMESTAMP WITH TIMEZONE (timestamptz)`**. 实际上，**既不**存储时区，也不存储偏移量。两种数据类型占用相同的宽度（4 个字节），它们的区别是微妙的 - 更糟糕的是，如果你不完全理解它们并且你的服务器更改了时区，它们可能会咬你。我的理智规则集是：

*   用于**`TIMESTAMP WITH TIMEZONE (timestamptz)`**存储主要与**“物理”时间**相关的事件，您主要感兴趣的是查询是否`event 1`之前`event 2`（不考虑时区），或计算时间间隔（以“物理单位”为单位，例如秒；不在“民用”单位，如日-月等）。典型的例子是记录创建/修改时间——“*时间戳*”这个词通常意味着什么。

*   用于**`TIMESTAMP WITHOUT TIMEZONE (timestamp)`**存储相关信息为**“公民时间”** （即`{year-month-day hour-min-sec}`整个字段）且查询涉及日历计算的事件。在这种情况下，您将仅在此处存储“本地时间”，即相对于某些未指定（不相关、隐含或存储在其他地方）时区的日期时间。

第二个选项使您更容易查询，例如，“在 '2013-01-20' 日发生的所有事件”（在每个相应的地区/国家/时区） - 但更难查询“所有事件在参考事件之前（物理上）发生”（除非我们知道它们在同一时区）。你选。

如果您需要完整的东西，两者都不够，您需要将时区或偏移量存储在附加字段中。另一种浪费几个字节但对查询更有效的选择是存储这两个字段。

另请参阅[此答案](https://stackoverflow.com/questions/6627289/what-is-the-most-recommended-way-to-store-time-in-postgresql-using-java/6627999#6627999)。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-01-30T23:12:29.427

为您的输入字段使用[`timestamptz`](http://www.postgresql.org/docs/current/static/datatype-datetime.html)（或`timestamp with time zone`用于标准 SQL 语法），然后您可以使用适合您偏好的时区或时间偏移量为每个插入设置自定义时间偏移量。

例子……</p>

```
CREATE TABLE "timetest"
(
"timestamp" timestamptz
);

INSERT INTO "timetest" ("timestamp") VALUES ('2013-01-01 08:45:00 PST');
INSERT INTO "timetest" ("timestamp") VALUES ('2013-01-01 08:45:00 Europe/Madrid');
INSERT INTO "timetest" ("timestamp") VALUES ('2013-01-01 08:45:00 Europe/Athens');
INSERT INTO "timetest" ("timestamp") VALUES ('2013-01-01 08:45:00 GMT+11');
INSERT INTO "timetest" ("timestamp") VALUES ('2013-01-01 08:45:00 GMT-11');
INSERT INTO "timetest" ("timestamp") VALUES ('2013-01-01 08:45:00 UTC'); 
```

...您的时间将相应调整

```
SELECT * FROM "timetest"; -- note this may default to your timezone
------------------------
[timestamp]
------------------------
2013-01-01 16:45:00+00
2013-01-01 07:45:00+00
2013-01-01 06:45:00+00
2012-12-31 21:45:00+00
2013-01-01 19:45:00+00
2013-01-01 08:45:00+00
2013-01-01 08:45:00+00 
```

或者更好的是，尝试以下...

```
SELECT 
"timestamp" AT TIME ZONE 'Australia/Sydney' AS "Sydney", 
"timestamp" AT TIME ZONE 'Australia/Perth' AS "Perth" 
FROM "timetest";
--------------------------------------------
[Sydney]..............[Perth]
--------------------------------------------
2013-01-02 03:45:00 - 2013-01-02 00:45:00
2013-01-01 18:45:00 - 2013-01-01 15:45:00
2013-01-01 17:45:00 - 2013-01-01 14:45:00
2013-01-01 08:45:00 - 2013-01-01 05:45:00
2013-01-02 06:45:00 - 2013-01-02 03:45:00
2013-01-01 19:45:00 - 2013-01-01 16:45:00 
```

最后，要了解数据库可用的时区列表，请尝试：

```
SELECT * FROM pg_timezone_names ORDER BY utc_offset DESC; 
```

# sql - 重新格式化结果的 SQL 查询

> ID：14615283
> 
> 赞同：2
> 
> 时间：2013-01-30T22:41:11.090
> 
> 标签：sql, select, db2

这是示例“销售”数据表 ![在此处输入图像描述](../Images/35a55222ce3f698df79b08ccf9f04868.png)

这是所需的输出结果集 ![在此处输入图像描述](../Images/3f46284693b540408844c5cbb2a084ee.png)

* * *

下面是将从该 SQL 语句生成的**不想要**的结果集的示例。

```
SELECT Vendor, SUM(Markdown), SUM(Regular), SUM(Promotion), SUM(Returned)
FROM sales
GROUP BY Vendor, Date 
```

![在此处输入图像描述](../Images/d2b7d2c2aecf6f59dad66a11586096ab.png)

* * *

有没有办法只通过 SQL 获得所需的结果集？

我们在 IBM iSeries 上运行 SQL DB2 数据库。

我确实意识到这是尝试执行此操作的一种非常奇怪的方法……我们只是想找到一种方法来根据需要取回结果集，而无需通过代码对结果进行任何手动转换。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-30T22:49:46.050

你需要使用`UNION`语句

尝试，

```
SELECT Vendor, 'Markdown' as Type,  SUM(Markdown) as Amount 
FROM sales 
GROUP BY Vendor, Date

UNION

SELECT Vendor, 'Regular' as Type, SUM(Regular) as Amount  
FROM sales 
GROUP BY Vendor, Date

UNION

SELECT Vendor, 'Promotion' as Type, SUM(Promotion) as Amount 
FROM sales 
GROUP BY Vendor, Date

UNION

SELECT Vendor, 'Returned' as Type, SUM(Returned) as Amount 
FROM sales 
GROUP BY Vendor, Date 
```

# mysql - 跨多个表的 SQL 选择语句

> ID：14615287
> 
> 赞同：2
> 
> 时间：2013-01-30T22:41:31.367
> 
> 标签：mysql, sql

这是我的表：`School` `Class` `Kid`。

每个班级属于一所学校。

每个孩子属于一个班级。

所有表都有一个自动递增的主键。

`Class`有一个外键指向它所属的学校的主键。与`Kid`指向`Class`它们所属的主键相同。

如果我想`select kid.id, kid.name, school.id, school.name`如何在一个查询中执行此操作？

此结果将返回每个孩子的记录及其 id 和 name。它还将包括他们的学校 ID 和姓名。

```
SCHOOL
------     
id-primary     
eyname

CLASS
-----
id-primary key         
school_id-foreign key to school name

KID
---
id-primary key           
class_id-foreign key to class name 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T22:46:15.203

你只需要使用[`JOIN`](http://dev.mysql.com/doc/refman/5.0/en/join.html). 执行以下操作：

```
SELECT kid.id, kid.name, school.id, school.keyname
FROM kid
JOIN class on class.id = kid.class_id
JOIN school on school.id = class.school_id 
```

你也可以这样做：

```
SELECT kid.id, kid.name, school.id, school.name
FROM kid, class, school
WHERE class.id = kid.class_id and school.id = class.school_id 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T22:57:04.033

如果所有孩子实体最终都将映射到学校，那么您正在寻找的是 INNER JOIN。可能需要不同的 JOIN，否则它是 LEFT 或 RIGHT 连接。

SELECT kids.id、kids.name、schools.id、schools.name FROM kids INNER JOIN classes ON kids.class_id = classes.id INNER JOIN school ONschools.id = classes.school_id;

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-30T22:49:21.727

```
Select kid.id,kid.Name,school.Id,school.keyname
From kid
Inner join Class On k.Class_id = Class.Id
Inner join School On Class.school_id = school.id 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-30T23:03:01.927

```
select s.*, c.*, k.* 
from school s 
left join class c on c.school_id=s.id
left join kid k on k.class_id=c.id 
```

# internet-explorer - 谷歌地图复杂图标 - 页面错误

> ID：14615295
> 
> 赞同：0
> 
> 时间：2013-01-30T22:42:09.853
> 
> 标签：internet-explorer, google-maps, google-maps-api-3, internet-explorer-8

我有以下谷歌地图代码：

```
<script type="text/javascript"> 
function initialize() { 
var mapOptions = { 
center: new google.maps.LatLng(-27.444916,153.03), 
zoom: 12, 
disableDefaultUI: true,
keyboardShortcuts: false,
mapTypeId: google.maps.MapTypeId.ROADMAP 
}; 
var map = new google.maps.Map(document.getElementById("map_canvas"), 
mapOptions); 
setMarkers(map, beaches); 
} 
var beaches = [
['Car:806', -27.4481025666613, 153.035155217002, 916],
['Car:520', -27.4777186625335, 153.00697421394, 915],
['Car:1477', -27.4523199466005, 153.029570366226, 914],
['Car:815', -27.5315143182514, 153.023819055977, 913],
['Car:334', -27.3930054770139, 153.104887341157, 912],
['Car:191', -27.4705744176833, 153.030243260862, 911],
...

['Car:618', -27.4146792620242, 153.081801794924, 1],
['Car:1096', -27.3369540394594, 153.069279763313, 0],
];
function setMarkers(map, locations) { 
var image = new google.maps.MarkerImage('http://labs.google.com/ridefinder/images/mm_20_orange.png', 
new google.maps.Size(20, 32), 
new google.maps.Point(0,0), 
new google.maps.Point(0, 32)); 
var shadow = new google.maps.MarkerImage('http://labs.google.com/ridefinder/images/mm_20_shadow.png', 
new google.maps.Size(37, 32), 
new google.maps.Point(0,0), 
new google.maps.Point(0, 32)); 
var shape = { 
coord: [1, 1, 1, 20, 18, 20, 18 , 1], 
type: 'poly' 
}; 
for (var i = 0; i < locations.length; i++) { 
var beach = locations[i]; 
var myLatLng = new google.maps.LatLng(beach[1], beach[2]); 
var marker = new google.maps.Marker({ 
position: myLatLng, 
map: map, 
shadow: shadow, 
icon: image, 
shape: shape, 
title: beach[0], 
zIndex: beach[3] 
}); 
} 
} 
</script> 
```

它在 chrome 和 IE 中运行良好，但在 IE 中我得到一个错误。对我来说一切都很好，但我真的很想弄清楚为什么我会收到这个错误：

网页错误详情

```
User Agent: Mozilla/4.0 (compatible; MSIE 8.0; Windows NT 5.1; Trident/4.0; GTB7.4; .NET CLR 2.0.50727; .NET CLR 3.0.4506.2152; .NET CLR 3.5.30729; .NET4.0C; .NET4.0E; .NET CLR 1.1.4322)
Timestamp: Wed, 30 Jan 2013 22:40:09 UTC

Message: '1' is null or not an object
Line: 966
Char: 1
Code: 0
URI: file://ycab01/Homedirs$/it3/Desktop/Michael/WEB%20DEV/CarPositionBrisbane.HTML 
```

对第 996 行的引用是：

```
var myLatLng = new google.maps.LatLng(beach[1], beach[2]); 
```

我认为 IE 不喜欢调用数组中的索引。我只是想知道是否有其他方法可以做到这一点？

麦克风

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T23:39:42.980

IE 不喜欢“悬挂逗号”（数组或对象末尾的逗号，后面没有任何内容）。它们导致它在对象或数组的末尾附加一个空值，然后在 API 中生成一个错误。

从您的代码中删除它们。

```
var beaches = [
['Car:806', -27.4481025666613, 153.035155217002, 916],
['Car:520', -27.4777186625335, 153.00697421394, 915],
['Car:1477', -27.4523199466005, 153.029570366226, 914],
['Car:815', -27.5315143182514, 153.023819055977, 913],
['Car:334', -27.3930054770139, 153.104887341157, 912],
['Car:191', -27.4705744176833, 153.030243260862, 911],
...

['Car:618', -27.4146792620242, 153.081801794924, 1],
['Car:1096', -27.3369540394594, 153.069279763313, 0], // ** remove the comma at the end of this line **
]; 
```

# wordpress - Wordpress Plugin Youtube API 播放器展示

> ID：14615302
> 
> 赞同：0
> 
> 时间：2013-01-30T22:43:01.903
> 
> 标签：wordpress, youtube-api

伙计们..你能帮我调试我的第一次wordpress插件吗？我正在处理这个已经快 2 周了，我一直坚持显示预览或前端显示..

这是一个 youtube 搜索 api，然后结果将自动列为播放列表。我已经获取了一些代码并对其进行了自定义。但我似乎无法向玩家展示..

这是我的核心插件代码： http: [//pastebin.com/hE62zYvm](http://pastebin.com/hE62zYvm)

或者你可以尝试安装。我已经可以从用户那里获取数据了。我认为唯一的问题是让播放器显示我的搜索结果

[https://dl.dropbox.com/u/65217109/youtube_content.zip](https://dl.dropbox.com/u/65217109/youtube_content.zip)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T16:39:40.853

YouTube 播放器提供了开箱即用的功能。有关详细信息，请参阅[http://apiblog.youtube.com/2012/03/new-player-options-for-lists-of-videos.html 。](http://apiblog.youtube.com/2012/03/new-player-options-for-lists-of-videos.html)

如果您指定`listType=search`和`list=YOUR_SEARCH_TERM`作为播放器参数，那么您将获得一个播放列表播放器，其中包含匹配的视频`YOUR_SEARCH_TERM`。

我不确定这是否是您所追求的确切 UX，但听起来实现起来要简单得多。

# asp.net - 在 URL 重写到子文件夹之后，是否可以保留相对图像路径？

> ID：14615303
> 
> 赞同：1
> 
> 时间：2013-01-30T22:43:03.087
> 
> 标签：asp.net, iis-7, url-rewrite-module

我们设置了一个 URL 重写规则，以便：

www.MySite.com/bhgre/

重写为

www.MySite.com/landingpages/bhgre.aspx

```
 <rewrite>
        <rules>
            <rule name="BHGRE" stopProcessing="true">
                <match url="bhgre/?$" />
                <action type="Rewrite" url="/landingpages/bhgre.aspx" />
            </rule>
        </rules>
    </rewrite> 
```

重写工作正常，URL 与 /bhgre 保持一致。然而，实际的网页使用了它自己的子文件夹（即images/image1.png）中图像的相对路径。该页面正在获取 404，因为正在从中提取图像

www.mysite.com/images/image1.png

代替

www.mysite.com/landingpages/images/image1.png

URLRewrite 中是否有其他技术可以使这项工作？或者，是使用图像子文件夹的完整路径的唯一解决方案吗？

谢谢！

# r - Matlab中与R的rep类似的功能

> ID：14615305
> 
> 赞同：21
> 
> 时间：2013-01-30T22:43:08.533
> 
> 标签：r, matlab

我正在寻找一个行为类似于`rep`R for Matlab 中的函数的函数。例如，`rep`我可以执行以下操作：

```
> rep(c(1,2,3),times=3)
[1] 1 2 3 1 2 3 1 2 3

> rep(c(1,2,3),each=3)
[1] 1 1 1 2 2 2 3 3 3
> 
```

在matlab中有repmat函数完成第一部分

```
>> repmat([1,2,3],1,3)

ans =

     1     2     3     1     2     3     1     2     3 
```

但不是第二部分（或者至少我不知道该怎么做）。

有什么建议么？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-31T13:02:10.823

您可以通过首先定义如下函数来相当接近地重现 R 中 rep 函数的语法：

```
function [result]=rep(array, count)
matrix = repmat(array, count,1);
result = matrix(:); 
```

然后，您可以通过使用行或列向量调用来重现所需的行为：

```
>> rep([1 2 3],3)
ans =
 1     1     1     2     2     2     3     3     3

>> rep([1 2 3]',3)
ans =
 1     2     3     1     2     3     1     2     3 
```

注意我在第二次调用中使用了转置 (') 运算符将输入数组作为列向量（3x1 矩阵）传递。

我在我的笔记本电脑上对此进行了基准测试，对于具有 100,000 个重复 100 次的元素的基本数组，它比使用上面的 ceil 选项快 2 到 8 倍，具体取决于您想要第一种还是第二种排列。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-01-30T23:03:37.310

好问题+1。实现此目的的一种简洁的单线方法是通过 Kronecker 张量积，例如：

```
A = [1 2 3];
N = 3;
B = kron(A, ones(1, N)); 
```

然后：

```
B =

     1     1     1     2     2     2     3     3     3 
```

**更新：** @Dan 提供了一个非常简洁的解决方案，看起来比我的`kron`方法更有效，所以在离开页面之前检查答案:-)

**更新：** @bcumming 还提供了一个很好的解决方案，当输入向量很大时应该可以很好地扩展。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-01-31T06:50:50.680

如果您像我一样不知道 Kronecker 张量积是什么，您可能会对这个更直观（实际上我认为更快）的解决方案感兴趣：

```
c(ceil((1:length(c)*n)/n)); 
```

所以在这里我使用向量索引来复制矩阵。例如，使用上面的两种情况，我们可以这样做：

```
c = 1:3;
c([1 1 1 2 2 2 3 3 3]) %for each
c([1 2 3 1 2 3 1 2 3]) %for times 
```

所以问题是我们如何在没有您要求的功能的情况下制作向量 [1 2 3 1 2 3 1 2 3]。所以我用我们需要的元素数量制作了一个向量，即 1:9，然后除以三并向上取整（即`ceil((1:9)/3)`在命令行中尝试。

一些基准测试（我知道这些东西应该在循环中，所以也许这不是那么准确）：

```
c = 1:3; n = 3;
tic; k = kron(c, ones(1, n)); toc; % 0.000208 seconds.
tic; a = c(ceil((1:length(c)*n)/n)); toc;  % 0.000025 seconds.
clear;
c = 1:1000000; n = 3;
tic; k = kron(c, ones(1, n)); toc; % 0.143747 seconds.
tic; a = c(ceil((1:length(c)*n)/n)); toc;  % 0.090956 seconds.
clear;
c = 1:10000; n = 1000;
tic; k = kron(c, ones(1, n)); toc; % 0.583336 seconds.
tic; a = c(ceil((1:length(c)*n)/n)); toc;  % 0.237878 seconds. 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-30T22:53:00.787

这是一个想法：

```
a=[1,2,3];
reshape(repmat(a,1,length(a)),1,length(a)^2)

ans =

 1     2     3     1     2     3     1     2     3

reshape(repmat(a,length(a),1),1,length(a)^2)

ans =

 1     1     1     2     2     2     3     3     3 
```

我还没有找到一个更简单的功能，可以一步完成，如果有的话感兴趣。

# javascript - 内联 jquery 数据分配

> ID：14615306
> 
> 赞同：0
> 
> 时间：2013-01-30T22:43:12.603
> 
> 标签：javascript, jquery, jquery-data

我已经看到在这样的 javascript 函数中访问了一些数据：

```
$(this).data('js'); 
```

在 html 中，数据是这样分配的。

```
<li data-js="m">
    <a href="#">Male</a>
</li>
<li data-js="f">
    <a href="#">Female</a>
</li> 
```

我以前没见过这样做。而且我真的不知道该怎么称呼它来搜索它。内联jquery数据分配？这是好习惯吗？支持好不好？它叫什么？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T22:54:25.263

这是一个利用**[HTML5 自定义数据属性](http://www.w3.org/html/wg/drafts/html/master/dom.html#embedding-custom-non-visible-data-with-the-data-%2a-attributes)**特性的简单[jQuery 方法](http://api.jquery.com/data/#data2)：

> 自定义数据属性是无名称空间中的属性，其名称以字符串“data-”开头，连字符后至少有一个字符，与 XML 兼容，并且不包含大写 ASCII 字母。自定义数据属性旨在存储页面或应用程序私有的自定义数据，没有更合​​适的属性或元素。

在您的示例中，`$(this).data('js');`代码将返回“m”或“f”，具体取决于是`this`指 first 还是 second `li`。

以下是一些相关文章：

*   [http://html5doctor.com/html5-custom-data-attributes/](http://html5doctor.com/html5-custom-data-attributes/)
*   [http://ejohn.org/blog/html-5-data-attributes/](http://ejohn.org/blog/html-5-data-attributes/)（这个是从上面的jQuery页面链接的）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T22:48:02.697

jQuery 函数记录在这里[http://api.jquery.com/jQuery.data/](http://api.jquery.com/jQuery.data/)

这很好地解释了 html5 数据属性 [http://webdesign.tutsplus.com/tutorials/htmlcss-tutorials/all-you-need-to-know-about-the-html5-data-attribute/](http://webdesign.tutsplus.com/tutorials/htmlcss-tutorials/all-you-need-to-know-about-the-html5-data-attribute/)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-30T22:47:01.997

你读过 jQuery 文档吗？我认为这将为您提供有关其用法和用途的足够信息[http://api.jquery.com/jQuery.data/](http://api.jquery.com/jQuery.data/)

# c# - 异步套接字在本地工作，但不能在互联网上工作

> ID：14615307
> 
> 赞同：0
> 
> 时间：2013-01-30T22:43:19.303
> 
> 标签：c#, sockets, asyncsocket

除了有时（仅在 vista 上注意到）之外，它真的很好用

我正在尝试创建一个强大的 Async Socket.BeginReceive 进程。目前我所做的只是连接到服务器，服务器确认连接并向客户端发送文件。客户端解析前缀，并通过 BinaryWriter 处理文件。

**TCP** ****BufferSize = 1024****

**编辑：重新设计功能以使其更强大** **工作流程如下；**

**发送：** - 我发送 8 字节前缀数据包，这是两个整数。（第一个 Int 是预期的文件大小，第二个 int 是预期的前缀大小，然后是文件本身。

**收到：**

*   在毫无疑问地收到前 8 个字节后，我处理将前 4 个字节转换为整数（文件大小字节长度）的前缀，然后将接下来的 4 个字节转换为整数（前缀大小字节长度）

*   然后，我无疑会从缓冲区接收前缀大小字节长度，并处理我的前缀。

*   然后我开始接收基于文件大小字节长度存储在前缀消息中的文件。

问题：在本地一切正常。我在发送和接收后测试了校验和和文件数据，一切看起来都很好。

然而商业环境（在vista上注意到），偶尔（并不总是，大部分时间传输成功）我会得到一个 System.IO.IOException: The process cannot access the file 'C:\TestReceived.txt' 。 ..这是确切错误的屏幕截图。

我认为正在发生的事情是，由于在`beginRecieve`单独的线程上被称为异步，有时两个线程都尝试通过`BinaryWriter`.

当我读到它将锁定文件时，我尝试使用 FileShare.None 初始化二进制写入器。

```
BinaryWriter writer = new BinaryWriter(File.Open(state.receivedPath, FileMode.Append,FileAccess.Write,FileShare.None)); 
```

它似乎没有按预期锁定文件，因为这不能解决问题。

**问题：任何大师都可以指导我如何正确锁定 FileStream 吗？我已经`ReceiveCallback`在我认为我出错的地方指出了。**

**编辑：解决方案：所以我最终发现也许我没有清理用于创建/附加到文件的资源。我已经切换到 using 语句来初始化我的`FileStream`对象和`BinaryWriter`对象，希望它能更好地管理清理工作，而且它似乎正在工作:) 一整天都没有失败的测试。现在是时候在服务器端处理异常了！谢谢大家的帮助。**

![在此处输入图像描述](../Images/e8f4215c02652305e2ee3f08cac5c46c.png)

```
 private static void ReceiveCallback(IAsyncResult ar)
    {
        try
        {
            // Retrieve the state object and the client socket 
            // from the asynchronous state object.
            StateObject state = (StateObject)ar.AsyncState;
            Socket client = state.workSocket;

            // Read data from the remote device.
            int bytesRead = client.EndReceive(ar);
            state.totalBytesRead += bytesRead;
            if (bytesRead > 0)
            {
                if (state.flag == 0)
                {
                    if (state.totalBytesRead >= 8)
                    {
                        // we know we put the msgLen / prefixLen as the first 8 bytes on the stream
                        state.msgLen = BitConverter.ToInt32(state.buffer, 0);
                        state.prefixLen = BitConverter.ToInt32(state.buffer, 4);
                        state.flag = 1;
                        // good to process the first 2 integer values on the stream
                        //state.sb.Append(Encoding.ASCII.GetString(state.buffer, 8, bytesRead));

                        int prefixRequestBytes = state.prefixLen;

                        if (prefixRequestBytes > StateObject.BufferSize)
                            prefixRequestBytes = StateObject.BufferSize;

                        state.lastSendByteCount = prefixRequestBytes;
                        state.totalBytesRead = 0;

                        // start re-writing to the begining of the buffer since we saved
                        client.BeginReceive(state.buffer, 0, prefixRequestBytes, 0, new AsyncCallback(ReceiveCallback), state);
                        return;
                    }
                    else
                    {
                        int bytesToSend = state.lastSendByteCount - bytesRead;
                        state.lastSendByteCount = bytesToSend;
                        // need to receive atleast first 8 bytes to continue
                        // Get the rest of the data.
                        client.BeginReceive(state.buffer, state.totalBytesRead, bytesToSend, 0, new AsyncCallback(ReceiveCallback), state);
                        return;
                    }
                }
                if (state.flag == 1)
                {
                    // we are expexing to process the prefix
                    if (state.totalBytesRead >= state.prefixLen)
                    {
                        // we are good to process
                        // Lets always assume that our prefixMsg can fit into our prefixbuffer ( we wont send greater than prefixbuffer)
                        state.sb.Append(Encoding.ASCII.GetString(state.buffer,0,state.prefixLen));
                        string prefixMsg = state.sb.ToString();

                        state.receivedPath = @"C:\TestReceived.txt";

                        state.flag++;
                        int msgRequestBytes = state.msgLen;
                        if (msgRequestBytes > StateObject.BufferSize)
                            msgRequestBytes = StateObject.BufferSize;

                        state.lastSendByteCount = msgRequestBytes;
                        state.totalBytesRead = 0;

                        // should be good to process the msg now
                        // start re-writing to the begining of the buffer since we saved
                        client.BeginReceive(state.buffer, 0, msgRequestBytes, 0, new AsyncCallback(ReceiveCallback), state);
                        return;
                    }
                    else
                    {
                        int bytesToSend = state.lastSendByteCount - bytesRead;
                        state.lastSendByteCount = bytesToSend;
                        // request the rest of the prefix
                        // Get the rest of the data.
                        client.BeginReceive(state.buffer, state.totalBytesRead, bytesToSend, 0, new AsyncCallback(ReceiveCallback), state);
                        return;
                    }
                }

                // we are expecting to process the file
                if (state.flag > 1)
                {
                    // I think here, the binarywriter needs to be locked
                    if (state.totalBytesRead >= state.msgLen)
                    {
                        Console.WriteLine("Writing final {0} bytes to server", bytesRead);

                        BinaryWriter writer = new BinaryWriter(File.Open(state.receivedPath, FileMode.Append,FileAccess.Write,FileShare.None));

                            writer.Write(state.buffer, 0, bytesRead);
                            writer.Close();

                        Console.WriteLine("Finished reading file");
                    }
                    else
                    {

                        Console.WriteLine("Reading {0} bytes from server...", bytesRead);
                        // Padd these bytes
                        BinaryWriter writer = new BinaryWriter(File.Open(state.receivedPath, FileMode.Append, FileAccess.Write, FileShare.None));

                            writer.Write(state.buffer, 0, bytesRead);
                            writer.Close();

                        // get how many more bytes are left to read
                        int bytesToSend = state.msgLen - bytesRead;

                        if (bytesToSend > StateObject.BufferSize)
                            bytesToSend = StateObject.BufferSize;

                        client.BeginReceive(state.buffer, 0, bytesToSend, 0, new AsyncCallback(ReceiveCallback), state);
                        return;

                    }
                }

            }
            else
            {
                // All the data has arrived;

            }
        }
        catch (Exception e)
        {
            Console.WriteLine(e.ToString());
        }
    } 
```

我的发送非常简单，因为我使用了 Socket.BeginSendFile(..); 我在这里所做的只是添加我的前缀，然后发送文件。

```
 private static void Send(Socket handler)
    {
        string msg = "Fetching...<EOF>";
        byte[] prefixMsg = Encoding.ASCII.GetBytes(msg);

        FileInfo fi = new FileInfo(@"C:\test.txt");
        byte[] fileLen = BitConverter.GetBytes(fi.Length); // The length of the file msg, we will use this to determin stream len
        byte[] prefixMsgLen = BitConverter.GetBytes(prefixMsg.Length); // the length of the prefix msg, we will use this to determin head len

        // copy out prefix to a prefix byte array
        byte[] prefix = new byte[ 4 + 4 + prefixMsg.Length];
        fileLen.CopyTo(prefix, 0);
        prefixMsgLen.CopyTo(prefix, 4);
        prefixMsg.CopyTo(prefix, 8);

        // *** Receive design requires prefixmsg.length to fit into prefix buffer

        handler.BeginSendFile(fi.FullName, prefix, null, 0, new AsyncCallback(AsynchronousFileSendCallback), handler);

    } 
```

非常感谢您的宝贵时间。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T23:08:07.733

您知道在单个读取操作中接收到的字节数可能低至 1 个字节，而不管请求的数量是多少？

在这种情况下，您需要再次（异步）读取，直到收到您期望的字节数。

*我还建议您在故障点收集更好的数据。考虑使用带有日志库的[http://msdn.microsoft.com/en-us/library/system.appdomain.unhandledexception.aspx来捕获更多信息。](http://msdn.microsoft.com/en-us/library/system.appdomain.unhandledexception.aspx)同时，您是否查看过受影响机器上的 Windows 应用程序日志？那里应该有一个基本的堆栈跟踪。*

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-30T23:07:43.347

从您的问题中不清楚它是什么类型的*套接字*，但我会假设它是 TCP。

您似乎遇到了 TCP 编程的经典错误。

例如，当您发送**N**个字节时，您**不能假设**您将在第一次调用时读取/接收**N个字节。**TCP 最终将传递**N**个字节，但它可能需要更多的读取/接收调用。检查调用时收到的字节数（ *bytesRead ）*`handler.EndReceive(ar);`

# python - 在 raspbian 软浮点上使用 FTDI D2XX 驱动程序和来自 Raspberry Pi 的 Python

> ID：14615308
> 
> 赞同：6
> 
> 时间：2013-01-30T22:43:24.360
> 
> 标签：python, usb, raspberry-pi, ftdi, raspbian

我们有一个由 FTDI 的 D2XX 驱动程序控制的 USB 设备。它目前通过 Python 接口从 Windows 机器控制，作为一个有趣的项目，我尝试将控制转移到 Raspberry Pi（大约是 PC 成本的 1/10，不包括操作系统成本）。

有许多障碍需要清除，但几周后，我终于找到了所有答案并让它发挥作用。答案分布在多个论坛上，因此感谢 Stack Overflow 社区，我想我会在这里整合它们。

一、项目要求：

*   操作系统：我从[Raspberry Pi 网页中选择了最新的](http://www.raspberrypi.org/downloads)[“Wheezy”](https://en.wikipedia.org/wiki/Debian#Release_timeline) Raspbian（硬浮点 2012-12-16）。这包括 Python。
*   [FTDI D2XX 驱动程序](http://www.ftdichip.com/Drivers/D2XX.htm)与我们的 FTDI 设备通信。
*   D2XX 驱动程序的 Python 接口。我使用[了 PyUSB](http://bleyer.org/pyusb/)
*   我们的 Python 脚本

我下载了 Wheezy 发行版并使用 Win32DiskImager 写入 4 GB SD 卡。Raspberry Pi 启动没有问题。然后我解压 D2XX 库 (libftd2xx.so) 并将其安装到`/usr/local/lib`.

PyUSB (1.6) 目前仅针对 Windows 进行测试，但它们提供了源代码。为 Raspberry Pi 编译一个副本非常简单。基本上，修改 setup.py 以链接到 libftd2xx.so 库（无需复制它）。还要编辑 d2xx/_d2xx.c 以注释掉没有 Linux 实现的例程（当前为 ftobj_Rescan、ftobj_Reload ftobj_GetComPortNumber）。将 FTDI D2XX 驱动程序下载（在发行版中）目录中的 WinTypes.h 和 ftd2xx.h 复制到 ftdi-win32 并运行`python setup.py install`，它将编译和安装 Python 模块。

完成所有这些后，我编写了一个简单的 Python 脚本来与 FTDI 芯片对话。请注意，您需要通过 sudo 运行。

```
import d2xx
jd = d2xx.open(0)
pd = jd.eeRead()
print pd 
```

d2xx 模块似乎找不到 libftd2xx.so 文件。因此，我调整了 setup.py 脚本以链接到库的静态副本 libftd2xx.a。瞧，我得到了问题的第一个线索：D2XX 库是使用软浮点构建的，而我的 Wheezy 发行版被配置为使用浮点寄存器。也就是说，我系统上的 gcc 生成的代码与 D2XX 库二进制不兼容，并且不允许链接到它们。

为了解决这个问题，我下载了[soft-float debian "wheezy" 发行版](http://www.raspberrypi.org/downloads)(2012-08-08) 并写入了 4 GB SD 卡。这次映像无法启动。环顾四周后，我发现了这个[有用的答案](https://raspberrypi.stackexchange.com/questions/2140/cant-boot-wheezy). 简而言之，软浮点的启动映像存在问题，因此对于某些 Raspberry Pi 板，它不会启动。解决方案是将软浮点发行版中的 start.elf 文件替换为可以正常工作的文件，例如硬浮点 Raspbian 映像的副本。幸运的是，SD 卡有两个分区：一个 FAT 分区和一个 ext3(?) 分区。启动映像位于 FAT 分区上，因此将硬浮动 SD 卡弹出到 Windows 框中，复制 start.elf 文件，弹出软浮动 SD 卡并使用硬浮动更新其 start.elf 是微不足道的-浮动一个。之后，Raspberry Pi 启动没有问题。

在安装 FTDI 的 D2XX 驱动程序并从 PyUSB 构建 d2xx Python 模块后，我再次尝试了测试脚本。又失败了。d2xx 模块可以毫无问题地读取 libftd2xx.so 库，但由于某种原因无法与设备通信。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-30T22:56:17.097

我不确定问题出在哪里：是 PyUSB、FTDI 的 libftd2xx.so 的问题还是 Debian 发行版的问题？

使用 FTDI 包有一个测试，在`release/examples/EEPROM/read`. 您必须构建它，但这只是键入 make 的问题。运行它（通过 sudo），它无法打开 USB 设备，很明显它不是 PyUSB。在四处寻找之后，我发现了一个对驱动程序 ftdi_sio 的引用，它可能与其他 D2XX 驱动程序发生冲突。所以，使用[lsmod](https://en.wikipedia.org/wiki/Lsmod)，我看到 ftdi_sio 已经默认安装，所以我运行`rmmod ftdi_sio`. 之后，一切正常。读取命令应显示如下内容：

```
Library version = 0x10112
Opening port 0
FT_Open succeeded.  Handle is 0xf7d240
FT_GetDeviceInfo succeeded.  Device is type 4.
FT_EE_Read succeeded.
Signature1 = 0
Signature2 = -1
Version = 1
VendorId = 0x0407
ProductId = 0x6009
Manufacturer = MagicIncorporated
ManufacturerId = wo
Description = MyCompany Test Board
SerialNumber = testit_028
MaxPower = 44
PnP = 1
SelfPowered = 0
RemoteWakeup = 1
2232RC:
-------
    Rev5 = 0x1
    IsoInA = 0x0
    IsoInB = 0x0
    IsoOutA = 0x0
    IsoOutB = 0x0
    PullDownEnable5 = 0x0
    SerNumEnable5 = 0x0
    USBVersionEnable5 = 0x0
    USBVersion5 = 0x110
    AIsHighCurrent = 0x0
    BIsHighCurrent = 0x0
    IFAIsFifo = 0x0
    IFAIsFifoTar = 0x0
    IFAIsFastSer = 0x0
    AIsVCP = 0x0
    IFBIsFifo = 0x0
    IFBIsFifoTar = 0x0
    IFBIsFastSer = 0x0
    BIsVCP = 0x0
Returning 0 
```

我也从 PyUSB 切换到[ftd2xx](https://github.com/snmishra/ftd2xx)，因为它是纯 python，但不是绝对必要的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T19:50:45.043

有一个特殊版本的 libftd2xx 1.1.12 修复了 Raspberry pi 上的问题。那可能会解决你的问题。

我忘记了在哪里找到它，但我在我网站的下载页面[Lightput 下载页面](http://lightput.com/download.html)上有一份副本。

# c++ - 寻找一个好的空间划分数据结构来快速生成数百万个原子键

> ID：14615310
> 
> 赞同：7
> 
> 时间：2013-01-30T22:43:27.583
> 
> 标签：c++, optimization, data-structures, space-partitioning

我正在执行一些涉及数百万个原子系统的 MD 模拟。

我编写了一些代码来生成一个文件，该文件只是 XYZ 原子坐标的列表。现在我需要在原子之间产生键。如果两个原子彼此相距一定距离，则被认为是键。

示例 XYZ 文件：

```
1 0 0
2 0 0
7 0 0
10 0 0
9 0 0 
```

所以我有五个原子。如果我的距离阈值为 2 个单位，那么我的债券列表将是：

```
1 2
3 5
4 5 
```

（其中数字对应于 XYZ 文件中的坐标索引）。

生成此列表的简单方法是：

```
for i = 1:numAtoms
    for j = i+1:numAtoms
        if distance(atom[i], atom[j]) < 2
            bonds.push [i, j] 
```

然而，这很快就达到了算法限制，即使在针对数百万个原子的高度优化的 C 语言中也很慢，至少在我将执行此过程的频率上如此。

我曾经写过一次光子映射器时，对空间分区数据结构的唯一经验是使用 kd-trees，所以我真的不知道这个问题的最佳解决方案是什么。我敢肯定，那里可能有一些最适合这个的东西。

我还应该提到我的模拟框是周期性的，这意味着 (0.5, 0, 0) 处的原子将与 (boxWidth - 0.5, 0, 0) 处的原子结合，距离阈值为 2。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-30T22:56:26.327

首先尝试简单的解决方案。它们可以快速编码，并且易于测试。如果这不能为您提供所需的性能，*那么*您可以尝试一些更棘手的事情。

因此，您可以通过为您的原子分配网格坐标来认真修剪搜索空间。没什么技术含量。像穷人的八叉树...

您需要做的就是将网格大小设为 2，然后搜索本地网格和每个相邻网格中的所有原子。显然，网格是 3D 的。一个原子的网格位置并不比将其每个坐标除以网格大小更复杂。

显然，您进行了初步传递并创建了属于每个细胞的原子列表（或向量）。您可以将列表存储在`map`由 3D 网格坐标索引的索引中。然后对于每个原子，您只需查找本地列表并进行键测试。

另外，不要使用平方根来计算距离。改为以距离平方操作。这将节省大量的处理。

# wpf - 如何在不使用 user32.dll 导入的情况下找到非托管窗口并将其置于前面

> ID：14615311
> 
> 赞同：2
> 
> 时间：2013-01-30T22:43:29.853
> 
> 标签：wpf, window, unmanaged

我正在开发 WPF 应用程序。我有一个场景，当它弹出时我需要找到一个非托管弹出窗口并将其带到应用程序的前面。我使用 user32.dll 和以下代码片段（类似）来实现它：

```
private void SetPopupScreenForeground()
    {
        string popupTitle = "Popup Screen"
        IntPtr hwnd = FindWindowByCaption(IntPtr.Zero, popupTitle);
        if (IntPtr.Zero != hwnd)
        {
            SetForegroundWindow(hwnd);
        }
    } 
```

但是当我在另一台机器上安装我的应用程序时，代码不起作用。从互联网上，我发现代码作为服务运行并且无法在不同的机器上访问的原因。这个问题有什么解决方法吗？

有没有办法在不使用 user32.dll 的情况下找到非托管窗口并将其置于 WPF 应用程序的前面？请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T22:51:55.823

问题实际上是 Windows 如何处理“桌面”。服务在无法与用户桌面交互的特殊桌面下运行。您将需要使用共享对象（例如命名管道）进行通信。

这是一个重复的问题：

[如何从服务应用程序中使用 FindWindow()？](https://stackoverflow.com/questions/4891720/how-to-use-findwindow-from-a-service-application)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T22:51:16.253

如果服务是指Windows服务，那么那些通常根本无法与Windows桌面交互，所以这不是使用user32.dll的问题。

# python - PySerial 如何使 Mac OS X 崩溃？

> ID：14615315
> 
> 赞同：2
> 
> 时间：2013-01-30T22:43:54.103
> 
> 标签：python, macos, osx-mountain-lion, pyserial, python-3.3

我通过对 PySerial 的愚蠢误用成功地重现地*冻结了 OS X*（至少是键盘和鼠标输入）。尽管电源按钮起作用，但键盘和鼠标完全停止响应。我还没有找到实际的错误，但我很惊讶这样的事情甚至是可能的。那么问题来了：**这怎么可能？**

附上代码：

```
#!/usr/bin/env python3

from hashlib import *
from serial import *
from sqlalchemy import *
from sqlalchemy.orm import *
from sqlalchemy.ext.declarative import *

engine = create_engine('sqlite:///Cards.data', echo=True)
Base = declarative_base()

class Card (Base):
    __tablename__ = 'cards'

    id     = Column(Integer, primary_key=True)
    track1 = Column(String)
    track2 = Column(String)
    track3 = Column(String)
    name   = Column(String)
    room   = Column(String)

    def __init__ (self, track1, tack2, track3, name=None, room=None):
        self.track1 = track1
        self.track2 = track2
        self.track3 = track3
        self.name   = name
        self.room   = room

    def __repr__ (self):
        return '<%s>' % (hashlib.sha256(self.track1+self.track2+self.track3).hexdigest()[:4])

ESC           = b'\x1B'
FS            = b'\x1C'
ACK           = b'\x1B\x79'
RESET         = b'\x1B\x61'
READ_ISO      = b'\x1B\x72'
WRITE_ISO     = b'\x1B\x77'
COM_TEST      = b'\x1B\x65'
ALL_LED_OFF   = b'\x1B\x81'
ALL_LED_ON    = b'\x1B\x82'
GREEN_LED_ON  = b'\x1B\x83'
YELLOW_LED_ON = b'\x1B\x84'
RED_LED_ON    = b'\x1B\x85'
SENSOR_TEST   = b'\x1B\x86'
RAM_TEST      = b'\x1B\x87'

DEVICES       = ['/dev/cu.usbserial', '/dev/ttyUSB0']
BAUD_RATE     = 9600

class MSR605 (object):

    def __init__ (self, device=None):
        self._connect(device)

    def readCard (self):
        pass

    def eraseCard (self, t1=True, t2=True, t3=True):
        flags = (t1 and 1 or 0) | (t2 and 2 or 0) | (t3 and 4 or 0)
        self._send('\x63', chr(flags))
        self._read_status()

    def setBPI (self, t1_density, t2_density, t3_density):
        self._send('\x62', t1_density and '\xD2' or '\x4B')
        self._read_status()
        self._send('\x62', t2_density and '\xA1' or '\xA0')
        self._read_status()
        self._send('\x62', t3_density and '\xC1' or '\xC0')
        self._read_status()

    def setBPC (self, t1, t2, t3):
        self._send('\x6F', chr(t1), chr(t2), chr(t3))
        self._expect(ESC + '\x30' + chr(t1) + chr(t2) + chr(t3))

    def _connect (self, device=None):
        if not device:
            for d in DEVICES:
                self._device = device
                try:
                    self._serial = Serial(d,BAUD_RATE)
                    self._write(RESET)
                    self._write(COM_TEST)
                    self._expect(ESC)
                    self._expect(b'y')
                    return
                except: pass
        self._device
        self._serial = None
        raise ConnectionError()

    def _expect (self, data):
        result = self.read(len(data))
        if result != data: raise ReadError()

    def _send (self, command, *args):
        self.flushInput()
        self.flushOutput()
        self.write(ESC + command + b''.join(args))

    def _status (self):
        exceptions = {
            b'\x31': ReadWriteError,
            b'\x32': CommandFormatError,
            b'\x34': CommandError,
            b'\x39': SwipeError,
            b'\x41': SetError,
        }
        self._expect(self.ESC_CHR)
        status = self.read(1)
        if status in exceptions:
            raise exceptions[status]()
        return status

    def _read (self, length=None):
        if length: return self._serial.read(length)
        else:      return self._serial.read()

    def _write (self, data):
        self._serial.write(data)

    class MSR605Error (Exception): pass
    class CommandError (MSR605Error): pass
    class CommandFormatError (MSR605Error): pass
    class ConnectionError (MSR605Error): pass
    class ReadError (MSR605Error): pass
    class ReadWriteError (MSR605Error): pass
    class SetError (MSR605Error): pass
    class SwipeError (MSR605Error): pass

if __name__ == '__main__':
    Base.metadata.create_all(engine)
    msr = MSR605()
    card = msr.readCard()
    print(card) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T22:55:50.600

它不是 PySerial，而是驱动程序。无论是 Apple 的驱动程序还是您安装的第 3 方驱动程序（如果您安装了）都是单独的讨论。但是驱动程序显然在内核中混搭了 USB 子系统，这会杀死您的鼠标和键盘。

# count - 为什么最喜欢的计数归零，即使是我自己的视频？

> ID：14615318
> 
> 赞同：0
> 
> 时间：2013-01-30T22:44:02.060
> 
> 标签：count, youtube-api, public, favorites

相关

[YouTube API](https://stackoverflow.com/questions/13393690/favoritecount-from-youtube-api-getting-zero-0)[中收藏夹的 YouTube 数量FavoriteCount 变为零 (0)](https://stackoverflow.com/questions/12722177/youtube-number-of-favourites)

即使我获得了身份验证，我也无法为自己的视频获得 favoriteCount。它显示为零（即使我可以看到关键字等私人详细信息）

好像坏了 有什么方法可以让我自己的视频获得总收藏次数？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T16:42:05.950

此数据不再可用于公开请求或已验证为视频所有者的请求。很抱歉让您失望，但它按预期工作。

# java - 处理同一组元素中包含的不同对象类型

> ID：14615322
> 
> 赞同：2
> 
> 时间：2013-01-30T22:44:31.520
> 
> 标签：java, xml, jaxb

我有一个类似于以下内容的 XML 文档：

请注意，我无法更改模式，因为它是标准 XML 模式（国会图书馆 METS）的一部分。

```
<amdSec ID="AMDSEC001">
    <digiprovMD ID="DMD001">
        <mdWrap MDTYPE="OBJECT">
            <xmlData>
                <object xsi:type="file">
                    .....
                </object>
            </xmlData>
        </mdWrap>
    </digiprovMD>
    <digiprovMD ID="DMD001_EVENT">
        <mdWrap MDTYPE="EVENT">
            <xmlData>
                <event xsi:type="event">
                    .....
                </event>
            </xmlData>
        </mdWrap>
    </digiprovMD>
</amdSec> 
```

如您所见，内部元素`<mdWrap>`可以包含不同类型的元素；在这种情况下，它们是`<event>`和`<object>`，但不仅限于这两种类型。创建两个类（如下所示），编组可以，但这不适用于解组。

```
class ObjectMDWrap {
    @XmlElementWrapper(name = "xmlData")
    @XmlElement(name = "object")
    List<MyObject> object; //Wrapped in list to use @XmlElementWrapper
}

class EventMDWrap {
    @XmlElementWrapper(name = "xmlData")
    @XmlElement(name = "event")
    List<MyEvent> event; //Wrapped in list to use @XmlElementWrapper
} 
```

我该怎么做才能让 JAXB 解组 MDWrap 的正确“类型”？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T23:17:47.380

我认为，在这种情况下，最好的解决方案是使用[XJC](http://jaxb.java.net/2.2.4/docs/xjc.html)工具生成 POJO 类。

1.  下载描述 XML 文件的 XSD 文件。
2.  使用[XJC](http://jaxb.java.net/2.2.4/docs/xjc.html)工具将 XSD 文件转换为 POJO 类。如果 XSD 不正确 - 修复它。
3.  如果您需要在生成的类中进行一些更改。
4.  在编组/解组过程中使用此类。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T21:05:29.483

我能够找出解决方案，而且它比我最初想象的要简单得多（这说明我对 XML 和 JAXB 的经验相对缺乏）。`MDWrap`通过以下方式创建我的课程

```
class MDWrap {
    @XmlAnyElement(lax = true)
    @XmlElementWrapper(name = "xmlData")
    Object wrappedMD;
} 
```

然后`MDWrap`可以包含任何类型的对象，并且将正确解组，只要其`wrappedMD`实例的类被注释为`@XmlRootElement`. 诀窍是注释`wrappedMD`为`XmlAnyElement`.

# model-view-controller - 在类中定义处理程序并在控制器中定义侦听器？

> ID：14615326
> 
> 赞同：0
> 
> 时间：2013-01-30T22:44:42.337
> 
> 标签：model-view-controller, extjs

我的应用程序有一个广泛的控制器。在某些情况下，代码有几行不同。我的想法是，在类中编写处理程序并继承行为以减少代码。并在事件触发时在控制器中调用此方法。这是可能的？。谢谢 ！

# c++ - 在模板类中提升模板依赖结构的多索引容器

> ID：14615328
> 
> 赞同：5
> 
> 时间：2013-01-30T22:44:48.700
> 
> 标签：c++, templates, boost, boost-multi-index

我想要一个类中的多索引容器，这取决于类中依赖于模板的类。听起来很复杂，代码如下：

```
#include <boost/unordered_map.hpp>
#include <boost/multi_index_container.hpp>
#include <boost/multi_index/hashed_index.hpp>
#include <boost/multi_index/random_access_index.hpp>
#include <boost/multi_index/ordered_index.hpp>
#include <boost/multi_index/member.hpp>

template <typename Type>
class myDataContainer{
public:
    struct DataStruct{
        double t;
        std::vector<Type> data;
    };

    // indices structs
    struct TagTime{};
    struct TagOrdered{};

    typedef boost::multi_index::multi_index_container<
    DataStruct,
    boost::multi_index::indexed_by<
        boost::multi_index::hashed_unique<boost::multi_index::tag<TagTime>,     boost::multi_index::member<DataStruct, double, &DataStruct::t> >,
        boost::multi_index::ordered_unique<boost::multi_index::tag<TagOrdered>,     boost::multi_index::member<DataStruct, double, &DataStruct::t> > // this index represents     timestamp incremental order
        >
    > InnerDataContainer;
    typedef typename boost::multi_index::index<InnerDataContainer,TagTime>::type timestamp_view;
    typedef typename boost::multi_index::index<InnerDataContainer,TagOrdered>::type ordered_view;

    InnerDataContainer dataContainer;
    void begin(){
        ordered_view& ordView = dataContainer.get<TagOrdered>();
        ordView.begin();
    }

};

int main(int argc, char *argv[])
{
    myDataContainer<float> data;
    myDataContainer<float>::ordered_view& ordView = data.dataContainer.get<TagOrder>();
    ordView.begin();
} 
```

如果没有`myDataContainer::begin()`此代码编译的函数，但出现`myDataContainer::begin()`以下错误：

```
main.cpp: In member function 'void myDataContainer<Type>::begin()':
main.cpp:134:66: error: expected primary-expression before '>' token
main.cpp:134:68: error: expected primary-expression before ')' token 
```

我错过了什么吗？这是提升中的错误还是不可能？

在此先感谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-30T23:00:57.120

因为 dataContainer 依赖于模板参数，所以你需要

```
ordered_view& ordView = dataContainer.template get<TagOrdered>(); 
```

在`main()`您使用特定的专业化时，因此不再有依赖表达式。

# magento - Magento Connect 安装错误移动上传的文件

> ID：14615329
> 
> 赞同：1
> 
> 时间：2013-01-30T22:44:50.403
> 
> 标签：magento, connect

我对 magento 连接有问题。我无法安装任何下载的 magento 扩展包，例如 mailchimp、onestep checkout 包。

当我上传包时，它显示错误，如**移动上传文件时出错**

我不知道该怎么办。请帮我..

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-04-14T14:55:59.760

这个问题的解决方法是将所有文件夹权限设置为777。

转到您的安装根文件夹并运行以下命令（您应该有权访问服务器上的 SSH 以运行此命令）：-

```
find . -type d -exec chmod 777 {} \; 
```

现在您将不会在 Magento Connect Manager 上收到错误消息，您将能够从那里安装任何扩展程序。

完成从 Magento Connect Manager 安装扩展程序后，不要忘记将文件夹权限更改为 755。

为此，请运行以下命令：-

```
find . -type d -exec chmod 755 {} \;
chmod 777 var var/.htaccess app/etc
find var -type d -exec chmod 777 {} \;
chmod -R 777 media 
```

# http - gwan REQ_ENTITY 或请求字符串

> ID：14615330
> 
> 赞同：1
> 
> 时间：2013-01-30T22:44:57.940
> 
> 标签：http, httprequest, g-wan

使用 gwan 服务器，是否可以获取请求字符串...即。论据。

给定[http://myserver.com/main.cpp?arg1=one&arg2=two](http://myserver.com/main.cpp?arg1=one&arg2=two)

我想获得一个 char 字符串`arg1=one&arg2=two`

根据[文档](http://gwan.com/api#env)，应该是

```
REQ_ENTITY,      // char  *ENTITY          // "arg=x&arg=y..." 
```

但是这样做会给我一个空字符串（在上面的网址上使用 args）

```
char * req = (char*) get_env(argv, REQ_ENTITY);
xbuf_cat(get_reply(argv), req);; 
```

啊哈。我应该补充一点，`get_arg( "arg1" ...)`在完全相同的 url 字符串上没有问题（建议它在某处。也许是原始查询字符串

可能只需要一个提示或指向示例的指针。在某些时候使用映射/重定向进行这项工作也会很好。 [http://myserver.com/main/arg1=one&arg2=two](http://myserver.com/main/arg1=one&arg2=two)

问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T05:02:14.983

关于 REQ_ENTITY 的简要说明。

您上面的示例没有 REQ_ENTITY 因为您只是在执行 GET 请求。如果请求具有实体主体（如 POST），您可以使用 REQ_ENTITY 获取实体主体，但通常不需要，因为您可以使用示例（逐步通过 argv）或使用 get_arg() 访问它。

[get_arg() 示例](http://mnd22.com/resources/g-wan/api/get_arg)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T23:10:21.620

这个漂亮的代码片段适用于我的目的。在文档中找到。只是连接它们。所以喜欢在服务器上用 c 工作。

```
int i = 0;
while(i < argc)
{
    xbuf_xcat(get_reply(argv), "argv[%u] '%s'   <br>", i, argv[i]);
    i++;
} 
```

并将其调整为以下内容：

```
string concatArgs(void) {
    stringstream ss;
    int i = 0;
    while(i < argc) {
        ss << argv[i++];
    }
    return ss.str();
} 
```

# php - 如何通过soap和php检索wsdl元素名称？

> ID：14615332
> 
> 赞同：1
> 
> 时间：2013-01-30T22:45:04.710
> 
> 标签：php, soap

我制作了一个连接到 WSDL 的肥皂客户端。我能够运行 __getFunctions 方法并返回 WSDL 函数。我需要做的是从 WSDL 中检索“元素名称”和“元素引用”。当我在浏览器中以 xml 格式访问 WSDL URL 时，我能够查看这些信息，但是有没有办法通过 PHP soap 客户端获取这些信息？

# javascript - 如何使用 javascript 加载 css 规则？

> ID：14615335
> 
> 赞同：-1
> 
> 时间：2013-01-30T22:45:24.600
> 
> 标签：javascript, css

我目前正在使用 Vert.x。我可以很容易地加载所需的 js 文件，但是当涉及到 CSS 时，什么都没有加载。所以我想我最后的手段是写一些js来设置这些css规则（超级最后的手段是在html文件中编写css）。

有没有很好的方法来做到这一点？我在想类似的事情：

```
function loadIndexCss()
{
    document.getElementById("p2").style.color="blue";
    document.getElementById("p2").style.fontFamily="Arial";
    document.getElementById("p2").style.fontSize="larger";
} 
```

将其保存在文件中，然后：

```
<script type="text/javascript" src="../css/css.js"></script>

<body onload="loadIndexCss()">
    <form id='frm_login'>
        <fieldset >
            <legend>Admin Login</legend>
            <label for='u' >Username: </label>
            <input type='text' name='username' id='u' maxlength="25" class="blocky"/>
            <label for='p' >Password:  </label>
            <input type='password' name='password' id='p' maxlength="25" class="blocky"/>
            <br/>
            <input type='button' name='Login' value='Login' id="btn_login" />
        </fieldset>
    </form>
</body> 
```

那还能用吗？如果这是愚蠢的，请教:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T22:48:21.573

是的，这应该有效。你也可以用肮脏的方式来做，创建命名样式标签：

```
<style id="sty"></style> 
```

然后添加CSS：

```
 document.getElementById("sty").innerHTML = "a {color: blue}"; 
```

# jquery - Jquery替换表

> ID：14615337
> 
> 赞同：1
> 
> 时间：2013-01-30T22:45:55.603
> 
> 标签：jquery, replace, html-table

我有这张桌子：

```
<table class="catsTable" width="100%" cellspacing="1" cellpadding="0" border="0">
  <tbody><tr>
    <td style="width:25%" class="catsTd" id="cid5" valign="top">
        <a href="/load/prison_break_online/sezonul_1/5" >Sezonul 1</a> <span class="catNumData" style="unicode-bidi:embed;">[6]</span>
    </td>
    <td style="width:25%" class="catsTd" id="cid6" valign="top"><a href="/prison_break_online/sezonul_2/6" class="catName">Sezonul 2</a> <span class="catNumData" style="unicode-bidi:embed;">[0]</span></td>
    <td style="width:25%" class="catsTd" id="cid7" valign="top"><a href="/prison_break_online/sezonul_3/7" class="catName">Sezonul 3</a> <span class="catNumData" style="unicode-bidi:embed;">[0]</span></td>
    <td style="width:25%" class="catsTd" id="cid8" valign="top"><a href="/prison_break_online/sezonul_4/8" class="catName">Sezonul 4</a> <span class="catNumData" style="unicode-bidi:embed;">[0]</span></td>
  </tr></tbody>
</table> 
```

因此可以将其替换为：

```
<ul id="menu-css">
    <li><a href="/prison_break_online/sezonul_2/6">Sezonul 2</a></li>
    <li><a href="/prison_break_online/sezonul_3/7">Sezonul 3</a></li>
    <li><a href="/prison_break_online/sezonul_4/8">Sezonul 4</a></li>
    <li><a href="/prison_break_online/sezonul_5/9">Sezonul 4</a></li>
</ul> 
```

我试过：

```
<script>
    $($('.catsTable').find('td').get().reverse()).each(function(){
         $(this).replaceWith($('<li>'+$(this).html()+'</li>'))
    })
    $('.catNumData').remove();
</script> 
```

但是仍然存在`<table><tbody><tr>` 或什至不可能这样的事情？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T22:56:03.740

为什么不简单：

```
var newUL = $('<ul />',{'id' : 'menu-css'}).insertBefore('table.catsTable');
$('table.catsTable').find('a').each(function(){
    $(this).wrap('<li></li>').parent().appendTo(newUL);
}).closest('ul').next('table').remove(); 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/HBnMm/)。

参考：

*   [`appendTo()`](http://api.jquery.com/appendTo/).
*   [`closest()`](http://api.jquery.com/closest/).
*   [`each()`](http://api.jquery.com/each/).
*   [`find()`](http://api.jquery.com/find/).
*   [`insertBefore()`](http://api.jquery.com/insertBefore/).
*   [`next()`](http://api.jquery.com/next/).
*   [`parent()`](http://api.jquery.com/parent/).
*   [`remove()`](http://api.jquery.com/remove/).
*   [`wrap()`](http://api.jquery.com/wrap/).

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T22:56:03.530

如果您想用 替换所有表格`<ul>`，您可以执行以下操作：

```
$('.catsTable').after('<ul id="menu-css">' + 
    '<li><a href="/prison_break_online/sezonul_2/6">Sezonul 2</a></li>' +
    '<li><a href="/prison_break_online/sezonul_3/7">Sezonul 3</a></li>' +
    '<li><a href="/prison_break_online/sezonul_4/8">Sezonul 4</a></li>' +
    '<li><a href="/prison_break_online/sezonul_5/9">Sezonul 4</a></li>' +
'</ul>').first().remove(); 
```

我希望我没有误解你想要什么...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-30T22:52:51.640

也许你应该试试这个修复：

```
<script>
    $('.catsTable').find('td').each(function(){
         $(this).replaceWith('<li>'+$(this).html()+'</li>);
    });
    $('.catNumData').remove();
</script> 
```

我修正了你的一些语法。你有一些额外的 $() 我删除了。

# mysql - 如何在 cloudcontrol 上通过 my.cnf 增加 max_user_connections

> ID：14615339
> 
> 赞同：-3
> 
> 时间：2013-01-30T22:46:03.047
> 
> 标签：mysql, cloudcontrol

我有没有机会访问 my.cnf 来增加

max_user_connections

在云控制上？到目前为止，max_user_connections 限制为 2

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-31T09:58:19.523

好像你用`mysqls.free`. 在 mysqls 上，`max_user_connections`取决于 mysqls 的[计划](https://www.cloudcontrol.com/add-ons/mysqls)。因此，只需选择一个更大的计划来增加限制。

对于 mysqld，我不确定，但你会得到一个专用的 mysql-server。

# linux - 没有 X 的硬件加速

> ID：14615342
> 
> 赞同：5
> 
> 时间：2013-01-30T22:46:22.620
> 
> 标签：linux, opengl-es, embedded, arm, xorg

我想知道是否有可能在没有 Xorg 及其 DDX 驱动程序的情况下，仅使用内核模块和用户空间驱动程序的其余部分来获得图形硬件加速。我问这个是因为我开始在嵌入式平台上进行开发（类似于 beagleboard 或更粗略的带有集成 GPU 的德州仪器 ARM 芯片），并且我将获得硬件加速而无需图形服务器的开销（这不是需要）。

如果是，如何？我在考虑 OpenGL 或 OpengGLES 实现，或 Qt 嵌入式[http://harmattan-dev.nokia.com/docs/library/html/qt4/qt-embeddedlinux-accel.html](http://harmattan-dev.nokia.com/docs/library/html/qt4/qt-embeddedlinux-accel.html)

并且 TI 提供了大量文档，但我仍然不清楚 [http://processors.wiki.ti.com/index.php/Sitara_Linux_Software_Developer%E2%80%99s_Guide](http://processors.wiki.ti.com/index.php/Sitara_Linux_Software_Developer%E2%80%99s_Guide)

谢谢你。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-31T02:06:41.120

*答案*将取决于您的用户应用程序。如果一切都是*裸机*并且您的应用程序团队正在编写一切，那么可以按照 Fredrik 的建议使用[DirectFB API 。](http://directfb.org/docs/DirectFB_Reference_1_6/index.html)如果您使用 GTK 的帧缓冲版本，这可能会特别有趣。

但是，如果您使用的是 Qt，那么这不是最好的方法。Qt5.0 取消了 QWS（[Qt 嵌入式加速](http://qt-project.org/doc/qt-4.8/qt-embeddedlinux-accel.html)）。Qt 正在迁移到*LightHouse*，现在称为[**QPA**](http://qt-project.org/wiki/Qt-Platform-Abstraction)。如果您编写的*QPA*插件通过您公开的任何内核机制使用图形加速，那么您已经 *加速*了Qt 图形。同样令人感兴趣的可能是[Wayland 架构](http://wayland.freedesktop.org/architecture.html)；**Wayland**有**QPA**插件。Qt4.8+ 和 Qt5.0+ 中 存在对**QPA的支持。**[Skia](http://code.google.com/p/skia/)也是一个有趣的图形 API，支持 OpenGL 后端；安卓设备使用 Skia。

 ****获得图形加速很容易。你要合成吗？你的记忆脚印是多少？谁是你的开发者受众，他们会为*API*编程？您需要*对象*功能还是只需要绘制图元？*SKIA*、*PegUI*、*WindML*和成熟的图形框架（Gtk、Qt）之间存在很大差异，这些框架具有人们今天所期望的所有小部件和动态效果。[对OpenGL ES](http://en.wikipedia.org/wiki/OpenGL_ES) API进行编程乍一看似乎很好，但如果您的应用程序有任何复杂性，您将需要更丰富的图形框架；主要是重复**Mats Petersson 的**评论。

**编辑：**来自[Qt 嵌入式加速](http://qt-project.org/doc/qt-4.8/qt-embeddedlinux-accel.html)链接，

1.  CPU blitter - 最慢
2.  [硬件 blitter](http://en.wikipedia.org/wiki/Blitter) - 例如，directFB。快速内存移动通常使用位操作而不是机器字，例如 DMA。
3.  2D 矢量 - OpenVG，简图绘图，带有位操作。
4.  3D 绘图 - OpenGL(ES) 具有多边形填充等。

这是您希望执行的绘图类型。像*Qt*和*Gtk*这样的框架，提供了一个 API 来在屏幕上放置单选按钮、复选框、编辑框等。它还具有文本样式以及与键盘、鼠标和/或触摸屏和其他元素的交互。*框架*使用绘图引擎将*对象*放在屏幕上。

图形加速只是将[Bresenham 算法之](http://en.wikipedia.org/wiki/Bresenham%27s_line_algorithm)类的算法放在单独的 CPU 或专用硬件中。如果您选择的框架不支持*3D*对象，则这些框架不太可能需要 OpenGL 支持，并且性能**可能**不会更好。

最后一块拼图是[窗口管理器](http://en.wikipedia.org/wiki/Window_manager)。许多嵌入式设备不需要这个。然而，许多手机正在使用*合成*和*alpha*值来创建透明窗口并允许同时看到多个应用程序。这也可能会影响您的图形 API。

此外：[没有 X 的 DRI](http://dri.freedesktop.org/wiki/DriWithoutX/)给出了一些令人信服的理由，说明这可能不是一件好事；对于单个用户任务的情况，甚至不需要**DRI 。**

下面是Wayland[博客上的一个](http://ppaalanen.blogspot.ca/2012/03/what-does-egl-do-in-wayland-stack.html)**Wayland**图形堆栈图。

![韦兰图](../Images/595387a18163c8a65bdf101d7d9582ea.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-20T06:10:35.523

这取决于 soc gpu 驱动程序实现，在 iMX6 上，您可以在帧缓冲区上使用 wayland 复合我构建了一个示例项目作为参考

[在 imx6D/Q 上带有 Wayland 的 Qt](https://github.com/liyaoshi/buildroot.git)

在omap3上有一个项目

[omap3 sgx 韦兰](https://github.com/nemomobile/ti-omap3-sgx-wayland-wsegl)****

# forms - 更改搜索输入的 url

> ID：14615343
> 
> 赞同：0
> 
> 时间：2013-01-30T22:46:27.443
> 
> 标签：forms, search, input

我在 Drupal 页面（自定义视图）上有一个搜索表单，用于搜索我的所有文章：

网址：www.site.com/articles

```
<form> 
  <input type="text" placeholder="Search Library" class="searchbox">        
  <button type="submit" id="edit-submit" name="op" value="Search" class="form-submit">Search</button>
</form> 
```

当用户提交此表单时，我会在 url 的末尾附加一个字符串，如下所示：

```
www.site.com/articles?search_fulltext=SEARCHTERM&op=Search 
```

问题是它不工作，为了让它工作，我必须从不同的页面搜索，比如这里：

```
www.site.com/search?search_fulltext=SEARCHTERM&op=Search 
```

所以最终我希望我的搜索框出现在页面上，但是当用户提交时，我希望它引用另一个 url：

```
www.site.com/search?search_fulltext=SEARCHTERM&op=Search 
```

我基本上想在正在搜索的不同页面上有一个搜索框。如果那有意义的话。:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T22:50:40.580

使用 <form> 标签的 action 属性将表单提交到搜索页面，例如：

```
<form action="http://www.site.com/search"> 
```

我也刚刚意识到您可能只想搜索特定的内容类型，因此您可能希望查看自定义搜索模块 ( [http://drupal.org/project/custom_search](http://drupal.org/project/custom_search) )。

# ios - 移动地图后MKAnnotation消失

> ID：14615346
> 
> 赞同：0
> 
> 时间：2013-01-30T22:46:52.337
> 
> 标签：ios, xcode, mapkit, mkannotation

我有一张带有注释的地图。但是当我移动地图时，注释消失了。

我该怎么做才能使注释没有消失？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T23:00:59.210

我的猜测是您的注释数据为零或以某种方式更改。据我回忆，当您在地图上移动时，注释会重新加载，因此如果它们不存在，它们似乎会消失。当您停止移动时，它们可能会重新出现，但这是一种残余效应。

# objective-c - 从 NSException 子类化特定于应用程序的异常是一种好习惯吗？

> ID：14615350
> 
> 赞同：1
> 
> 时间：2013-01-30T22:47:11.450
> 
> 标签：objective-c, exception, nsexception

从 NSException 子类化特定于应用程序的异常是一种好习惯吗？这样一来，一切都集中在一个类中，以便于管理。

例如

```
@interface AppException : NSException

+ (AppException *)InvalidSomething;
+ (AppException *)InvalidSomething2;

@end 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-30T22:55:38.243

不，继承 NSException 是不好的，因为它是一个不需要比现在更具体的类。此外，如文档中所述，如果抛出，子类可能无法接收正确的调用堆栈符号：

> 冒充 NSException 类的 NSException 子类或其他干扰异常引发机制的 API 元素可能无法获取此信息。

如果您希望抛出“预定义的异常”，您可以在 NSAssert 上编写一个宏。

```
#define BOAssert NSAssert(0, @"Something bad just happened"); 
```

如果您需要“特定于应用程序的异常”，请创建一个可以传递给`+raise:format:`. 但请记住，Objective-C 不是 Java。异常不是控制流的一种方式，并且永远不应该这样使用（Cocoa-Touch 中没有任何东西可以被视为异常安全的）。因为异常是致命的，所以要认真考虑为什么你实际上需要抛出它们，以及在什么情况下——例如，UITableView 在更新到未定义状态时会抛出异常。

# actionscript-3 - As3 iPad 软键盘键码听

> ID：14615351
> 
> 赞同：0
> 
> 时间：2013-01-30T22:47:13.663
> 
> 标签：actionscript-3, air

我想听用户点击“完成”按钮来提交我的表单。我使用的是 Textfiled 而不是 StageText。有没有办法可以听用户点击它。

干杯比尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T00:32:08.633

您可以在 TextInput 上收听 FlexEvent.ENTER - 当用户通过单击“完成”关闭软键盘时会触发它

要在一般情况下侦听软键盘关闭，请将 SoftKeyboardEvent.SOFT_KEYBOARD_DEACTIVATE 侦听器添加到 TextInput

有关完整信息，请参阅[http://help.adobe.com/en_US/flex/mobileapps/WS82181550ec4a666a39bafe0312d9a274c00-8000.html#WS19f279b149e7481c-66e67e6c13313699023-8000](http://help.adobe.com/en_US/flex/mobileapps/WS82181550ec4a666a39bafe0312d9a274c00-8000.html#WS19f279b149e7481c-66e67e6c13313699023-8000)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T01:26:04.460

我已经进行了几次测试，看起来 keycodeEvent 剂量有效。“完成”等于“输入”。代码是“13”

# scala - 为什么不可变的地图大小总是为零？

> ID：14615353
> 
> 赞同：1
> 
> 时间：2013-01-30T22:47:18.010
> 
> 标签：scala

下面的 Scala 类使用 JDOM 解析文件并将文件中的值填充到 Scala 不可变 Map 中。在 Map 上使用`+`运算符似乎没有任何效果，因为 Map 始终为零。

```
import java.io.File
import org.jsoup.nodes.Document
import org.jsoup.Jsoup
import org.jsoup.select.Elements
import org.jsoup.nodes.Element
import scala.collection.immutable.TreeMap

class JdkElementDetail() {

  var fileLocation: String = _

  def this(fileLocation: String) = {
      this()
      this.fileLocation = fileLocation;
    }

  def parseFile : Map[String , String] = {

    val jdkElementsMap: Map[String, String] = new TreeMap[String , String];
    val input: File = new File(fileLocation);
    val doc: Document = Jsoup.parse(input, "UTF-8", "http://example.com/");
    val e: Elements = doc.getElementsByAttribute("href");

    val href: java.util.Iterator[Element] = e.iterator();
    while (href.hasNext()) {
      var objectName = href.next();
      var hrefValue = objectName.attr("href");
      var name = objectName.text();

      jdkElementsMap + name -> hrefValue
            println("size is "+jdkElementsMap.size)
    }

    jdkElementsMap
  }

}

println("size is "+jdkElementsMap.size) always prints "size is 0" 
```

为什么大小总是零，我没有正确添加到地图中吗？

唯一的解决方法是转换`jdkElementsMap`为 a`var`然后使用以下内容吗？

```
jdkElementsMap += name -> hrefValue 
```

在这里删除 while 循环是我更新的对象：

```
package com.parse

import java.io.File
import org.jsoup.nodes.Document
import org.jsoup.Jsoup
import org.jsoup.select.Elements
import org.jsoup.nodes.Element
import scala.collection.immutable.TreeMap
import scala.collection.JavaConverters._

class JdkElementDetail() {

  var fileLocation: String = _

  def this(fileLocation: String) = {
      this()
      this.fileLocation = fileLocation;
    }

  def parseFile : Map[String , String] = {

    var jdkElementsMap: Map[String, String] = new TreeMap[String , String];
    val input: File = new File(fileLocation);
    val doc: Document = Jsoup.parse(input, "UTF-8", "http://example.com/");
    val elements: Elements = doc.getElementsByAttribute("href");

    val elementsScalaIterator = elements.iterator().asScala

    elementsScalaIterator.foreach {
      keyVal => {
          var hrefValue = keyVal.attr("href");
          var name = keyVal.text();
          println("size is "+jdkElementsMap.size)
          jdkElementsMap += name -> hrefValue
       }
    }
    jdkElementsMap
  }

} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-30T23:33:06.927

不可变的数据结构——无论是列表还是映射——就是这样：不可变的。您永远不会更改它们，而是根据对旧数据结构的更改创建*新的数据结构。*

如果你这样做`val x = jdkElementsMap + (name -> hrefValue)`了，那么你会得到新的地图`x`，而`jdkElementsMap`仍然是一样的。

如果你`jdkElementsMap`变成a `var`，那么你可以做`jdkEleemntsMap = jdkElementsMap + (name -> hrefValue)`，或者只是`jdkElementsMap += (name -> hrefValue)`。后者也适用于*可变*地图。

这是唯一的方法吗？不，但你必须放弃`while`循环来实现同样的目标。您可以替换这些行：

```
val href: java.util.Iterator[Element] = e.iterator();
while (href.hasNext()) {
  var objectName = href.next();
  var hrefValue = objectName.attr("href");
  var name = objectName.text();

  jdkElementsMap + name -> hrefValue
        println("size is "+jdkElementsMap.size)
}

jdkElementsMap 
```

带有折叠，例如：

```
import scala.collection.JavaConverters.asScalaIteratorConverter

e.iterator().asScala.foldLeft(jdkElementsMap) {
  case (accumulator, href) =>  // href here is not an iterator
    val objectName = href
    val hrefValue = objectName.attr("href")
    val name = objectName.text()

    val newAccumulator = accumulator + (name -> hrefValue)

    println("size is "+newAccumulator.size)

    newAccumulator
} 
```

或递归：

```
def createMap(hrefIterator: java.util.Iterator[Element],
              jdkElementsMap: Map[String, String]): Map[String, String] = {
  if (hrefIterator.hasNext()) {
    val objectName = hrefIterator.next()
    val hrefValue = objectName.attr("href")
    val name = objectName.text()

    val newMap = jdkElementsMap + name -> hrefValue

    println("size is "+newMap.size)

    createMap(hrefIterator, newMap)
  } else {
     jdkElementsMap
  }
}

createMap(e.iterator(), new TreeMap[String, String]) 
```

性能方面，折叠会比较慢，递归应该会稍微快一点。

请注意，Scala 确实提供了可变映射，而不仅仅是为了能够说它拥有它们：如果它们更适合您的问题，那么继续使用它们！如果您想学习如何使用不可变的方法，那么上面的两种方法是您应该学习的方法。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-30T22:52:16.260

该地图是不可变的，因此任何修改都将返回修改后的地图。`jdkElementsMap + (name -> hrefValue)`返回一个包含新对的新地图，但在创建后您将丢弃修改后的地图。

编辑：看起来您可以将 Java 可迭代对象转换为 Scala 可迭代对象，因此您可以折叠生成的序列并累积映射：

```
import scala.collection.JavaConverters._
val e: Elements = doc.getElementsByAttribute("href");
val jdkElementsMap = e.asScala
    .foldLeft(new TreeMap[String , String])((map, href) => map + (href.text() -> href.attr("href")) 
```

如果你不关心你创建什么样的地图，你可以使用`toMap`：

```
val jdkElementsMap = e.asScala
    .map(href => (href.text(), href.attr("href")))
    .toMap 
```

# python - scipy中重采样数组的索引

> ID：14615355
> 
> 赞同：1
> 
> 时间：2013-01-30T22:47:21.043
> 
> 标签：python, numpy, python-3.x, scipy

例如，我有两个长度相同的一维数组，包含时间序列和值序列

```
t = linspace(0, 5, 5) # [0, 1.25, 2.5, 3.75, 5]
x = array(range(10, 25)) # [10, 11, 12, 13, 14] 
```

例如，我必须使用不同的采样时间点重新采样 x 数组（具有相同的起点和终点，但可以有任意数量的元素）

```
r = linspace(0, 5, 4) # [ 0, 1.667, 3.333, 5]
x2 = resample(t, x, r) # [10, 11, 12, 14] 
```

也就是r的每个时间点都放在t的两个时间点之间，我想在t中找到两者的下点的索引。从索引数组中，可以得到 x 的相对点。

我想要一个基于向量的解决方案，没有循环，可能使用 scipy 的运算符。如果使用 scipy 的功能会更好。

编辑：这是我需要的代码，但更短、更快且基于矢量的解决方案会更好。我找不到一个（直到尝试）。

```
def resample(t, r):
    i, j, k = 0, 1, 0
    s = []
    while j < len(t):
        if t[i] <= r[k] < t[j]:
            s.append(i)
            k += 1
        else:
            i += 1
            j += 1
    s.append(len(t) - 1)
    return array(s) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T23:55:58.327

以下两个小功能中的第二个可以完成您想要完成的工作：

```
def resample_up(t, x, r) :
    return x[np.argmax(r[:, None] <= t, axis=1)]

def resample_down(t, x, r) :
    return x[::-1][np.argmax(r[:, None] >= t[::-1], axis=1)]

>>> resample_up(t, x, r)
array([10, 12, 13, 14])
>>> resample_down(t, x, r)
array([10, 11, 12, 14]) 
```

如果您发现很难弄清楚发生了什么，以下可能会有所帮助：

```
>>> r[:, None] <= t
array([[ True,  True,  True,  True,  True],
       [False, False,  True,  True,  True],
       [False, False, False,  True,  True],
       [False, False, False, False,  True]], dtype=bool)
>>> r[:, None] >= t[::-1]
array([[False, False, False, False,  True],
       [False, False, False,  True,  True],
       [False, False,  True,  True,  True],
       [ True,  True,  True,  True,  True]], dtype=bool) 
```

然后返回每行`np.argmax`中第一次出现的索引。`True`

**编辑**它很难让它比一行代码更短，但是对于大型数组，性能会受到影响，因为索引查找永远不会在循环的早期中断。因此，对于非常大的数组，使用 python 循环扫描数组可能会更快。对于较小的，它不会：

```
In [2]: %timeit resample_up(t, x, r)
100000 loops, best of 3: 7.32 us per loop

In [3]: %timeit resample_down(t, x, r)
100000 loops, best of 3: 8.44 us per loop

In [4]: %timeit resample(t, x, r) # modified version of the OP's taking also x
100000 loops, best of 3: 13.7 us per loop 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T23:11:50.917

您可以尝试使用`interp1d`in 中的函数，将参数`scipy.interpolate`指定为。使用你的数组：`kind``zero`

```
>>> from scipy.interpolate import interp1d
>>> f = interp1d(t,x,kind="zero")
>>> f(r)
array((10, 11, 12, 13)) 
```

请注意，“重新采样”数组中的最后一个元素是 13，而不是您在问题中要求的 14，而是`f(5.001) = 14`(*)。只要“重采样”数组与原始数组中的一个点匹配，插值函数就是不连续的。

(*)如果要`bounds_error=False`在.`interp1d``t`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-02T14:26:28.160

[numpy.interp](http://docs.scipy.org/doc/numpy-dev/reference/generated/numpy.interp.html)是一个快速简单的分段线性插值器：

```
from __future__ import division
import numpy as np

t = np.linspace(0, 5, 5)  # [0, 1.25, 2.5, 3.75, 5]
x = np.array(range(10, 15))  # [10, 11, 12, 13, 14]
r = np.linspace(0, 5, 4)  # [ 0, 1.667, 3.333, 5]

print "np.interp:", np.interp( r, t, x )
    # [ 10\.    11.33  12.67  14\.  ]
xint = np.arange( len(t) )
print "r to int:", np.interp( r, t, xint ).astype(int)
    # [0 1 2 4] 
```

# python - 运行时将属性注入模块命名空间

> ID：14615357
> 
> 赞同：3
> 
> 时间：2013-01-30T22:47:40.773
> 
> 标签：python

当导入我正在编写的 python 模块时，我想根据在同一模块中定义的字典的内容为模块创建一组属性。这是模块中字典的一小部分：

```
list_of_constellations = {
   0: Constellation("And", "Andromeda"),
   1: Constellation("Ant", "Antlia"),
   2: Constellation("Aps", "Apus"),
   3: Constellation("Aql", "Aquila"),
} 
```

其中 Constellation 是一个命名元组。我想要的是向命名空间注入一组新的属性，其名称是元组中的第一个元素，其值是键。因此，导入后，可以使用以下属性：

```
import constellations

print constellations.And   # prints 0
print constellations.Ant   # prints 1 
```

我该怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-30T22:56:33.143

在模块本身中，`globals()`函数将模块命名空间作为字典返回；只需使用每个命名元组的第一个元素作为键来设置整数值：

```
for key, const in list_of_constellations.items():
    globals()[const[0]] = v  # set "And" to 0, etc. 
```

或从模块外部，用于`setattr()`向模块添加属性：

```
import constellations

for key, const in constellations.list_of_constellations.items():
    setattr(constellations, constellation[0], v)  # set "And" to 0, etc. 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T23:15:34.553

在 Python 2.7 中：

```
>>> import constellations
>>> dir(constellations)
['Constellation', 'list_of_constellations', 'namedtuple', 'namespace', ...]
>>> for key, tupl in constellations.list_of_constellations.iteritems():
>>>    setattr(constellations, tupl[0], key)
>>> dir(constellations)
['And', 'Ant', 'Aps', 'Aql', 'Constellation', 'list_of_constellations',
'namedtuple', 'namespace', ...] 
```

对于 Python3，替换`iteritems()`为`items()`.

您可以`vars(constellations).update(dict)`单独使用 over 设置属性，其中`dict`包含要以 name:value 格式插入的属性的字典对象。

# asp.net-web-api - ASP.NET Web API 避免查询字符串中的无效参数

> ID：14615359
> 
> 赞同：6
> 
> 时间：2013-01-30T22:47:51.597
> 
> 标签：asp.net-web-api, filter, query-string

给定以下 Web API 控制器操作：

```
 // GET api/values
    public IEnumerable<string> Get()
    {
        return new string[] { "value1", "value2" };
    } 
```

即使查询字符串中的参数不存在，执行以下请求也不会失败：

```
 http://localhost:22297/api/values?someinvalidparameter=10 
```

有没有办法确保查询字符串中的所有参数都是正在调用的操作的有效参数？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-30T23:34:20.957

您可以编写一个操作过滤器来验证操作参数中是否存在所有查询参数，如果不存在则抛出。

```
using System;
using System.Linq;
using System.Net;
using System.Net.Http;
using System.Web.Http.Controllers;
using System.Web.Http.Filters;

namespace My.Namespace.Filters
{
    /// <summary>
    /// Action filter that checks that parameters passed in the query string
    /// are only those that we specified in methods signatures.
    /// Otherwise returns 404 Bad Request.
    /// </summary>
    public class ValidateQueryParametersAttribute : ActionFilterAttribute
    {
        /// <summary>
        /// This method runs before every WS invocation
        /// </summary>
        /// <param name="actionContext"></param>
        public override void OnActionExecuting(HttpActionContext actionContext)
        {
            //check that client does not use any invalid parameter
            //but just those that are required by WS methods
            var parameters = actionContext.ActionDescriptor.GetParameters();
            var queryParameters = actionContext.Request.GetQueryNameValuePairs();

            if (queryParameters.Select(kvp => kvp.Key).Any(queryParameter => !parameters.Any(p => p.ParameterName == queryParameter)))
            {
                actionContext.Response = actionContext.Request.CreateResponse(HttpStatusCode.BadRequest);
            }
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-31T08:32:03.520

为了使其能够很好地使用开箱即用的验证支持，我创建了自己的操作选择器，它可以将 URI 参数绑定到复杂类型的对象而不会重复。

因此，您可以使用此操作选择器执行以下操作：

```
public class CarsByCategoryRequestCommand {

    public int CategoryId { get; set; }
    public int Page { get; set; }

    [Range(1, 50)]
    public int Take { get; set; }
}

public class CarsByColorRequestCommand {

    public int ColorId { get; set; }
    public int Page { get; set; }

    [Range(1, 50)]
    public int Take { get; set; }
}

[InvalidModelStateFilter]
public class CarsController : ApiController {

    public string[] GetCarsByCategoryId(
        [FromUri]CarsByCategoryRequestCommand cmd) {

        return new[] { 
            "Car 1",
            "Car 2",
            "Car 3"
        };
    }

    public string[] GetCarsByColorId(
        [FromUri]CarsByColorRequestCommand cmd) {

        return new[] { 
            "Car 1",
            "Car 2"
        };
    }
} 
```

然后，您可以注册一个操作过滤器来验证用户输入以终止请求并返回“400 Bad Request”响应以及验证错误消息：

```
[AttributeUsage(AttributeTargets.Class | AttributeTargets.Method, AllowMultiple = false, Inherited = true)]
public class InvalidModelStateFilterAttribute : ActionFilterAttribute {

    public override void OnActionExecuting(HttpActionContext actionContext) {

        if (!actionContext.ModelState.IsValid) {

            actionContext.Response = actionContext.Request.CreateErrorResponse(
                HttpStatusCode.BadRequest, actionContext.ModelState);
        }
    }
} 
```

查看以下帖子以获取有关此操作选择器以及如何获取它的更多信息：

*   [ASP.NET Web API 中使用 ComplexTypeAwareActionSelector 的复杂类型操作参数 - 第 1 部分](http://www.tugberkugurlu.com/archive/complex-type-action-parameters-with-complextypeawareactionselector-in-asp-net-web-api-part-1)
*   [ASP.NET Web API 中使用 ComplexTypeAwareActionSelector 的复杂类型操作参数 - 第 2 部分](http://www.tugberkugurlu.com/archive/complex-type-action-parameters-with-complextypeawareactionselector-in-asp-net-web-api-part-2)

# c# - 用C#提取HtmlElement“onclick”属性的文本内容

> ID：14615362
> 
> 赞同：1
> 
> 时间：2013-01-30T22:48:07.863
> 
> 标签：c#, html-parsing, webbrowser-control

我有这个 HTML 代码

```
<div class="anc-style" onclick="window.open('./view.php?a=foo')"></div> 
```

我想提取“onclick”属性的内容。我试图做类似的事情：

```
div.GetAttribute("onclick").ToString(); 
```

理想情况下会产生字符串

`"window.open('./view.php?a=foo')"`

但它返回一个 System.__ComObject。

我可以通过将（“onclick”）更改为（“class”）来获取课程，onclick 发生了什么？

```
HtmlElementCollection div = webBrowser1.Document.GetElementsByTagName("div");
        for (int j = 0; j < div.Count; j++) {
            if (div[j].GetAttribute("class") == "anc-style") {
             richTextBox1.AppendText(div[j].GetAttribute("onclick").ToString());   
            }
        } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-30T23:41:56.637

您可以使用 htmlDocument 类提取文档标签并提取如下数据。这只是一个例子

```
string htmlText = "<html><head></head><body><div class=\"anc-style\" onclick=\"window.open('./view.php?a=foo')\"></div></body></html>";

WebBrowser wb = new WebBrowser();
wb.DocumentText = "";
wb.Document.Write(htmlText);
foreach (HtmlElement hElement in  wb.Document.GetElementsByTagName("DIV"))
{
    //get start and end positions
    int iStartPos = hElement.OuterHtml.IndexOf("onclick=\"") + ("onclick=\"").Length;
    int iEndPos = hElement.OuterHtml.IndexOf("\">",iStartPos);
    //get our substring
    String s = hElement.OuterHtml.Substring(iStartPos, iEndPos - iStartPos);

    MessageBox.Show(s);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T23:02:49.903

也尝试使用`div[j]["onclick"]`您使用的浏览器？

我创建了一个可以尝试的 jsfiddle，看看它是否适合你

[http://jsfiddle.net/4ZwNs/102/](http://jsfiddle.net/4ZwNs/102/)

# php - 使用 GearmanManager 添加新工作？

> ID：14615366
> 
> 赞同：3
> 
> 时间：2013-01-30T22:48:32.697
> 
> 标签：php, gearman

我对整个 Gearman 和 GearmanManager 周期还是陌生的。我有一个工作服务器，并且在服务器启动时验证了我的作业是否已经在我的队列（MySQL 表）中。但是，我需要能够从 PHP 中添加新作业到队列中，如果可能的话，还需要从工作人员内部添加。

现在我有一份工作，我将在部署我们的新代码库时创建。这将是第一个运行的作业，其目的是为报告收集一些数据并将其存储。

这需要每小时运行一次，所以我想利用该`when_to_run`列。我一直在考虑 Gearman 的文档，但我仍然对我应该如何将工作添加到队列中感到困惑。

我试过运行：

```
<?php
$gm = new GearmanClient;
$gm->addServer();
$gm->doBackground('Metadata_Ingest_Report', '', com_create_guid()); 
```

顺便说一句，是的，我确实安装了 php-pecl-uuid。

上面的代码只是挂起，没有做任何事情。没有工作被添加到数据库中，没有任何反应。

这是因为我没有完全了解如何发送工作，并且我正在尽最大努力实现 RTM，但我没有任何运气。

因此，如果您有什么可以指点我的，或者如果有人有时间来解释我应该如何设置并将作业添加到 MySQL 队列，以便 GearmanManager 的工作人员接他们，那就太棒了。

**编辑：**所以看来你必须打电话给`$gm->addServer('127.0.0.1')`. 根据文档`127.0.0.1`应该是默认设置，但运行 PHP 5.4.11 的情况似乎并非如此。如果我`$gm->runTasks()`在之后调用，我现在可以让任务运行`$gm->addTask()`。我希望只需要调用`$gm->addTask()`，任务就会被添加到数据库中，GearmanManager 会看到它并将其后台处理。还在挖...

最好的问候，
安德鲁

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-04T19:20:31.270

因此，该`when_to_run`功能似乎未在`pecl-gearman`. 因此，我们无法使用他们的内置方法为未来安排工作。似乎该库并未像应有的那样创建数据库记录（我假设这实际上可能是 Gearmand 在运行之前没有将作业卸载到数据库。

为了解决这个问题，我们决定执行以下操作。

**安排未来的工作**

1.  手动将作业插入到`gearman_queue`.
2.  每分钟运行一次 CRON 以 ping 队列表并加载具有`when_to_run <= time()`
3.  `addTask($function, $payload)`通过和解雇这些工作`runTasks()`。也包含来自数据库的`$payload`UUID。
4.  GearmanManager 接手工作并将有效负载交给各自的工作人员。
5.  Worker 运行，然后在完成时使用`DELETE`.

**立即运行作业**

1.  手动将作业插入`gearmand_queue`到`when_to_run`.`NULL`
2.  运行`addTask($function, $payload)`和`runTasks()`。也包含来自数据库的`$payload`UUID。
3.  GearmanManager 接手工作并将有效负载交给他们的相应工作人员。
4.  Worker 运行，然后在完成时使用`DELETE`.

**结论**

Gearmand Job Server、GearmanManager 和 pecl-gearman 在支持什么以及如何完成时似乎都不同步。在大多数情况下，我认为这个问题是 pecl-gearman 与 Gearmand 交谈的核心。

我还在 pecl-gearman 项目上打开了一个功能请求`when_to_run`：[https ://bugs.php.net/bug.php?id=64120](https://bugs.php.net/bug.php?id=64120)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T14:10:42.370

在添加任务之前，需要启动 gearman 服务器。

对于 Linux：

```
/usr/bin/gearmand -d  -L 127.0.0.1 -q libdrizzle /
--libdrizzle-user=your_db_user --libdrizzle-password=your_db_pass /
--libdrizzle-db=your_db_name --libdrizzle-mysql -vvvv 
```

添加任务后，创建工人看起来像worker.php：

```
<?php

$worker= new GearmanWorker(); 

$worker->addServer(); 

while ($worker->work());

function Metadata_Ingest_Report( $job )
{ 
    // do something
} 
```

并启动这个工人

```
/usr/bin/php worker.php 
```

# visual-studio-2012 - 显示服务器资源管理器上下文菜单中缺少的数据 - 无法查看数据

> ID：14615369
> 
> 赞同：2
> 
> 时间：2013-01-30T22:48:52.790
> 
> 标签：visual-studio-2012

直到今天，我可以在 Visual Studio 2012 服务器资源管理器中右键单击数据库表，我会看到“显示数据”选项，还有另一个选项我不记得打开“设计表面”的名称。

这些选项消失了，现在我只能刷新、复制或单击上下文菜单中的属性。如何恢复上下文菜单选项？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T15:09:13.830

我已经重新安装了VS，但它并没有解决问题。比解决方案更多的解决方法是使用[SQL Server Data Tools](http://msdn.microsoft.com/en-us/library/hh272686%28v=vs.103%29.aspx)。当您运行程序并使用服务器对象资源管理器（类似于服务器资源管理器）时，您可以浏览到数据库所在的目录，并从那里查看表数据。

# javascript - 知道如何禁用嵌入式“Vine.co”视频的自动播放吗？

> ID：14615370
> 
> 赞同：5
> 
> 时间：2013-01-30T22:48:59.417
> 
> 标签：javascript, jquery, ajax, autoplay

我正在做一个小项目。

我可以嵌入和显示指定的 vine.co 视频

```
<iframe id='eFrame' src='http://vine.co/v/bJjdTLBnwx1/card' width='380' height='380' frameborder='0'></iframe> 
```

我正在通过 Ajax 拉入链接以在页面上显示它们，但是现在的问题是它们都是自动播放的，这会导致主要的浏览器滞后。

任何人都知道如何在**禁用自动播放**的情况下将它们附加到正文中？这个项目都是客户端，所以我将仅限于客户端语言。（即 Javascript/jQuery 等。）

非常感谢，干杯。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-09-01T12:02:23.127

我可能迟到了，但您可以通过 postMessage javascript 函数传递一些命令。它对我有用：

```
var iframe = document.getElementById(id);

iframe.contentWindow.postMessage('pause', '*'); 
```

播放、静音和取消静音的结构相同。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-04-25T14:04:23.213

`<iframe id='eFrame' src='http://vine.co/v/bJjdTLBnwx1/embed/simple' width='320' height='320' frameborder='0'></iframe>`

试试这个，它会对更好的控制有很大帮助，只有按下播放按钮它才会运行。

试试看。

# php - 空测试的 PHPUnit 占位符

> ID：14615371
> 
> 赞同：3
> 
> 时间：2013-01-30T22:49:00.157
> 
> 标签：php, unit-testing, phpunit

我喜欢偶尔为占位符使用空函数（主要是空的构造函数，因为它有助于避免构造函数的意外重复，因为我的团队知道某处必须始终存在一个）。

我还喜欢对一个类的每个方法至少进行一次测试（主要是因为这是一个很好的简单规则，可以让我的团队反对）。

我的问题很简单：我们应该在这些空测试方法中添加什么来防止“无测试”警告。

我们可以只做 $this->assertTrue(true)，我知道它会工作得很好。但是，我想知道是否有任何更正式和适当的触摸（最好是一些使它成为的东西，因此该方法不计入测试运行的数量，人为地夸大了一点）。

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-30T22:52:51.163

尝试这个 ：

```
/**
 * @covers Controllers\AdminController::authenticate
 * @todo   Implement testAuthenticate().
 */
public function testAuthenticate()
{
    // Remove the following lines when you implement this test.
    $this->markTestIncomplete(
      'This test has not been implemented yet.'
    );
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T15:50:10.817

You try a reflection class on the function and ensure that the method is there. Then the test could simply be that the method exists (empty or not), which will pass without a warning.

```
class MethodExistsTest extends \PHPUnit_Framework_TestCase
{
    protected $FOO;

    protected function setUp()
    {
        $this->FOO = new \FOO();
    }

    /**
     * @covers \FOO::Bar
     */
    public function testEmptyMethodBarExists()
    {
        $ReflectionObject = new \ReflectionObject($this->FOO);
        $this->assertTrue($ReflectionObject->getMethod('Bar'));
    }

    /**
     * @covers \FOO::__construct
     */
    public function testConstructorExists()
    {
        $ReflectionObject = new \ReflectionObject($this->FOO);
        $this->assertNotNull($ReflectionObject->getConstructor());
    }
} 
```

# php - 显示在 html 标记之外的内容以用于返回和回显

> ID：14615372
> 
> 赞同：0
> 
> 时间：2013-01-30T22:49:02.150
> 
> 标签：php, html, return, echo

我知道 echo 会回显内容并 return 将返回内容以供进一步处理。但是，我已经说过功能：

```
class Content{

    protected $_html = '';

    public function display_content(){
        $this->_html = 'content';
    }

    public function __toString(){
        return $this->html;
    }
} 
```

然后一些我有以下内容：

```
$content = new Content();
<p><?php $content->disaply_content(); ?></p> 
```

我得到：

```
<p></p>
content 
```

作为页面的源代码。无论我是回显还是返回都没关系，无论哪种方式它都显示在标签的外面。

想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T22:53:12.803

我不确定第二个“内容”来自哪里，但请注意：

```
<?php $content->display_content();?> 
```

不会在`<p>`标签之间显示任何内容。你应该使用：

```
<?php echo $content->display_content();?> 
```

（我认为 disaply_content() 是问题中的错字，而不是代码中的错字）。

# sql - 如何检查是否存在使用表的视图

> ID：14615374
> 
> 赞同：3
> 
> 时间：2013-01-30T22:49:12.010
> 
> 标签：sql, database, sql-server-2008, ssms

是否可以使用 SQL Server Management Studio 检查表是否是相同或不同数据库中视图的一部分？

如果可以通过一些插件来完成，那也很好。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-30T22:53:20.843

像这样：

```
SELECT  *
FROM    INFORMATION_SCHEMA.VIEW_TABLE_USAGE
WHERE   TABLE_SCHEMA = 'dbo'    --(or whatever your Schema name is)
  AND   TABLE_NAME   = 'YourTableName' 
```

应该适用于任何符合 ISO SQL 的数据库，而不仅仅是 SQL Server。

请注意，跨数据库依赖是另一回事。理论上，它们应该出现在这里，但实际上这可能不一致，因为 SQL Server 在涉及跨数据库引用时确实允许延迟解析，即使对于视图也是如此。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-30T22:59:36.543

```
SELECT QUOTENAME(OBJECT_SCHEMA_NAME([object_id]))
  + '.' + QUOTENAME(OBJECT_NAME([object_id]))
  FROM sys.sql_dependencies
  WHERE referenced_major_id = OBJECT_ID(N'dbo.your_table_name'); 
```

或者：

```
SELECT referencing_schema_name, referencing_entity_name
  FROM sys.dm_sql_referencing_entities(N'dbo.your_table_name', N'OBJECT'); 
```

但是请注意，其中一些方法，包括`sp_depends`、等`INFORMATION_SCHEMA`，`sysdepends`都容易出现不同步的情况。更多信息在这里：

*   [在 SQL Server 2008 中使 sysdepends 保持最新](https://sqlblog.org/2008/09/09/keeping-sysdepends-up-to-date-in-sql-server-2008)

一个简单的例子：

```
CREATE TABLE dbo.table1(id INT);
GO
CREATE VIEW dbo.view1 
AS
  SELECT id FROM dbo.table1;
GO

SELECT QUOTENAME(OBJECT_SCHEMA_NAME([object_id]))
  + '.' + QUOTENAME(OBJECT_NAME([object_id]))
  FROM sys.sql_dependencies
  WHERE referenced_major_id = OBJECT_ID('dbo.table1');

-- returns 1 row

GO    
DROP TABLE dbo.table1;
GO
CREATE TABLE dbo.table1(id INT);
GO

SELECT QUOTENAME(OBJECT_SCHEMA_NAME([object_id]))
  + '.' + QUOTENAME(OBJECT_NAME([object_id]))
  FROM sys.sql_dependencies
  WHERE referenced_major_id = OBJECT_ID('dbo.table1');

-- returns 0 rows!!!! 
```

如果执行以下操作，它将再次返回行：

```
EXEC sp_refreshsqlmodule N'dbo.view1'; 
```

但谁愿意在每次要检查元数据时刷新系统中的每个视图？

因此，您可能希望将此方法与所有视图的文本暴力解析结合起来：

```
SELECT name FROM sys.views
  WHERE OBJECT_DEFINITION([object_id])
  LIKE N'%your_table_name%'; 
```

根据您的表格名称，这可能会产生一些误报，但这可能是一个很好的交叉检查。

为避免此类问题，我尝试养成创建视图的习惯`WITH SCHEMABINDING`（或尽可能避免视图）。当然，当您需要以不影响视图的方式更改表格时，这可能会变得很痛苦，但无论如何都应该认真对待表格更改。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-30T22:53:08.233

对于相同的数据库，您可以检查该表的依赖关系并查看其他对象使用它。

```
EXEC sp_depends @objname = N'your_table_name' ; 
```

# jquery - jQuery 验证

> ID：14615381
> 
> 赞同：0
> 
> 时间：2013-01-30T22:49:31.497
> 
> 标签：jquery, jquery-validate

我有一个带有 Jquery 验证脚本的简单联系提交表单，它应该告诉用户那里的提交是成功还是失败并显示错误。我遇到的问题是提交正在进行，但我没有收到验证消息。这是代码。

[http://jsfiddle.net/62dj5/](http://jsfiddle.net/62dj5/)

```
 <form class="cmxform" id="CommentForm" method="post" action="#">
                    <input type="text" name="ContactName" id="ContactName" placeholder="Name" />         
                    <input type="text" name="ContactEmail" id="ContactEmail" placeholder="Email" />     
                    <input type="text" name="ContactNumber" id="ContactNumber" placeholder="Phone Number" />         
                    <input type="text" name="ContactCompany" id="ContactCompany" placeholder="Company Name" />      
                    <input type="text" name="EventCity"  id="EventCity" placeholder=" Event City" />         
                    <input type="text" name="EventState" id="EventState"  placeholder="Event State" />          
                <p class="text">  
                    <textarea name="ContactComment" id="ContactComment" placeholder="Enter your message here"></textarea>  
                </p>  
                <p class="submit">  
                    <input type="submit" value="Send" />  
                </p>  
                <label id="loader" style="display:none;"><img src="images/ajax-loader.gif" alt="Loading..." id="LoadingGraphic" /></label>
                <input class="" type="hidden" name="subject" value="Website Contact Form" />
            </form>  

            result = '';
            c = '';
            if (response === 'success') { 
                result = 'Your message has been sent. Thank you!';  
                c = 'success';
            } else {
                result = response;
                c = 'error';
            }

            note.removeClass('success').removeClass('error').text('');
            var i = setInterval(function() {
                if ( !note.is(':visible') ) {
                    note.html(result).addClass(c).slideDown('fast');
                    clearInterval(i);
                }
            }, 40); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-07-02T20:39:32.863

这是一个示例，只是为了给您一个如何进行验证的示例。看起来您的脚本中引用了两种不同的形式；`#CommentForm`因此`#subscribeForm`，目前还不清楚您要做什么，这使得帮助您解决提交问题变得困难。

这是我放在 jsfiddle 上的示例的完整代码。请记住，这是供参考，剪切和粘贴此示例不会解决您的问题（特别是因为看起来您在服务器端验证发生后尝试输出成功/失败消息）。请花一些时间查看[jqueryvalidation.org上的文档](http://jqueryvalidation.org/)

```
$('#CommentForm').validate({
  errorClass: 'validation-error',
  rules: {
    name: {
      required: true,
      minlength: 3
    },
    email: {
      required: true,
      email: true
    },
    phone: {
      required: true,
      phoneUS: true
    },
    company: {
      required: true,
      minlength: 3
    },
    city: {
      required: true,
      minlength: 3
    },
    state: {
      required: true,
      stateUS: true,
      minlength: 2
    },
    message: {
      required: true,
      minlength: 20
    }
  },
  messages: {
    name: {
      required: "Please enter your full name!"
    },
    email: {
      required: "Please enter your email!",
      email: "Please enter a valid email address"
    },
    phone: {
      required: "Please enter your phone!"
    },
    company: {
      required: "Please enter your company!"
    },
    city: {
      required: "Please enter your city!"
    },
    state: {
      required: "Please enter your state!"
    },
    message: {
      required: "Please enter a short message!"
    }
  }
});

$('#reset').click(function() {
  var validator = $("#CommentForm").validate();
  validator.resetForm();
});
```

```
input,
.form-control {
  border-radius: 0;
  box-shadow: none;
  padding: 15px;
  height: 45px;
  font-size: 16px;
  border: 1px solid #F2F2F2;
  vertical-align: middle;
}
textarea {
  border-radius: 0;
  box-shadow: none;
  font-size: 16px;
  border: 1px solid #F2F2F2;
}
.form-control:focus {
  background-color: rgba(74, 185, 255, 0.55);
  border-color: #33342e;
  color: #ffffff;
  box-shadow: 0 0 1px rgba(102, 175, 233, 0.2);
  -webkit-box-shadow: 0 0 1px rgba(102, 175, 233, 0.2);
}
.form-control {
  font-family: "Lucida Grande", "Lucida Sans Unicode", "Lucida Sans", "DejaVu Sans", Verdana, sans-serif;
  display: block;
  width: 100%;
  height: 60px;
  padding: 12px 12px;
  margin: 12px 0 12px 0;
  font-size: 22px;
  font-weight: 500;
  line-height: 1.42857143;
  color: #555;
  text-align: center;
  background-color: #fff;
  background-image: none;
  border: 1px solid #ccc;
  border-radius: 4px;
  -webkit-box-shadow: inset 0 1px 1px rgba(0, 0, 0, .075);
  box-shadow: inset 0 1px 1px rgba(0, 0, 0, .075);
  -webkit-transition: border-color ease-in-out .15s, box-shadow ease-in-out .15s;
  transition: border-color ease-in-out .15s, box-shadow ease-in-out .15s;
}
.form-control:focus {
  border-color: #4AB9FF;
  outline: 0;
  -webkit-box-shadow: inset 0 1px 1px rgba(0, 0, 0, .075), 0 0 8px rgba(102, 175, 233, .6);
  box-shadow: inset 0 1px 1px rgba(0, 0, 0, .075), 0 0 8px rgba(102, 175, 233, .6);
}
.form-control::-moz-placeholder {
  color: #999;
  opacity: 1;
}
.form-control:-ms-input-placeholder {
  color: #999;
}
.form-control::-webkit-input-placeholder {
  color: #999;
}
.btn-clear {
  color: #378ABF;
  background-color: #fff;
  border-color: #42A6E5;
  width: 100%;
  height: 60px;
  font-size: 16px;
  font-weight: 500;
  margin: 12px 0 12px 0;
}
.btn-clear:hover,
.btn-clear:focus,
.btn-clear:active,
.btn-clear.active,
.open .dropdown-toggle.btn-clear {
  color: #fff;
  background-color: #E80046;
  border-color: #1c1c1c;
  -webkit-transition: background-color 0.5s ease-out;
  -moz-transition: background-color 0.5s ease-out;
  -o-transition: background-color 0.5s ease-out;
  transition: background-color 0.5s ease-out;
}
.btn-clear:active,
.btn-clear.active,
.open .dropdown-toggle.btn-clear {
  background-image: none;
}
.btn-send {
  color: #fff;
  background-color: #63C1D6;
  border-color: #fff;
  width: 100%;
  height: 60px;
  font-size: 16px;
  font-weight: 500;
  margin: 12px 0 12px 0;
}
.btn-send:hover,
.btn-send:focus,
.btn-send:active,
.btn-send.active,
.open .dropdown-toggle.btn-send {
  color: #fff;
  background-color: #035061;
  border-color: #1c1c1c;
  -webkit-transition: background-color 0.5s ease-out;
  -moz-transition: background-color 0.5s ease-out;
  -o-transition: background-color 0.5s ease-out;
  transition: background-color 0.5s ease-out;
}
.btn-send:active,
.btn-send.active,
.open .dropdown-toggle.btn-send {
  background-image: none;
}
label.validation-error {
  color: #fff;
  font-size: 16px;
  font-weight: 700;
  padding: 10px;
  background: rgba(245, 12, 12, 0.75);
  width: 100%;
  text-align: center;
  margin-bottom: 10px;
}
input.validation-error,
textarea.validation-error,
select.validation-error {
  border: 1px solid #f53660;
}
.alert {
  padding: 10px 5px 20px 5px;
  border: 1px solid #f53660;
  margin-bottom: 30px;
  font-size: 16px;
  line-height: 100%;
  text-align: center;
  color: #fff;
  font-weight: 700;
}
.alert.info {
  background: #3194b1;
}
.alert.success {
  background: #749958;
}
.alert.error {
  background: #b55454;
}
.alert.warning {
  background: #978c68;
}
.alert i {
  position: relative;
  top: 5px;
  margin-right: 10px;
  font-size: 32px;
}
.alert.info i {
  color: #fff;
}
.alert.success i {
  color: #fff;
}
.alert.error i {
  color: #fff;
}
.alert.warning i {
  color: #fff;
}
#formstatus {
  padding-top: 10px;
}
label.validation-error {
  color: #fff;
  font-size: 16px;
  font-weight: 700;
  padding: 10px;
  background: rgba(245, 12, 12, 0.75);
  width: 100%;
  text-align: center;
  margin-bottom: 10px;
}
input.validation-error,
textarea.validation-error,
select.validation-error {
  border: 1px solid #f53660;
}
```

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-validate/1.13.1/additional-methods.min.js"></script>
<script src="https://ajax.aspnetcdn.com/ajax/jquery.validate/1.13.1/jquery.validate.min.js"></script>
<link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css" rel="stylesheet" />
<div class="container">
  <form class="clearfix" id="CommentForm" name="CommentForm" method="post" action="php/comment.php">
    <div class="row">
      <div class="col-md-4">
        <input class="form-control" type="text" name="name" value="" placeholder="Full Name">
        <div class="clearfix"></div>
      </div>
      <div class="col-md-4">
        <input class="form-control" type="email" name="email" value="" placeholder="Email">
        <div class="clearfix"></div>
      </div>
      <div class="col-md-4">
        <input class="form-control" type="tel" name="phone" value="" placeholder="Telephone">
        <div class="clearfix"></div>
      </div>
    </div>
    <!--endrow-->
    <div class="row">
      <div class="col-md-4">
        <input class="form-control" type="text" name="company" value="" placeholder="Company">
        <div class="clearfix"></div>
      </div>
      <div class="col-md-4">
        <input class="form-control" type="text" name="city" value="" placeholder="City">
        <div class="clearfix"></div>
      </div>
      <div class="col-md-4">
        <input class="form-control" type="text" name="state" value="" placeholder="State">
        <div class="clearfix"></div>
      </div>
    </div>
    <div class="row">
      <div class="col-md-12">
        <textarea class="form-control" id="message" name="message" value="" rows="5" placeholder="Enter your message..."></textarea>
        <div class="clearfix"></div>
      </div>
    </div>
    <div class="row">
      <div class="col-md-6">
        <input class="btn btn-send" type="submit" value="Send">
        <div class="clearfix"></div>
      </div>
      <div class="col-md-6">
        <input class="btn btn-clear" type="reset" id="reset" onClick="CommentForm.reset();" value="Clear Form" readonly>
        <div class="clearfix"></div>
      </div>
    </div>
    <!--end row-->
    <div id="formstatus"></div>
  </form>
</div>
```

# mongodb - mongodump'ing a 32-bit Older Version of MongoDB and mongorestore'ing It to 64-bit Updated Version

> ID：14615385
> 
> 赞同：1
> 
> 时间：2013-01-30T22:49:52.787
> 
> 标签：mongodb, mongodump, mongorestore

我有一个生产服务器，它恰好使用 MongoDB 的 32 位旧版本（2.0.0）的单个实例。在将这些数据转移到单独的服务器上之前，我想检查几件事。

1.  在 32 位安装上执行 mongodump 和在 64 位安装上执行 mongorestore 会不会有任何冲突？

2.  将 2.0 数据库转储移动到 2.2.x 安装是否有任何问题？

我读到您无法执行 2.2 的 mongodump 并正确地将 mongorestore 存储到 2.0，但我只是在进行版本升级。我还读到您可以在 32 位和 64 位版本的 MongoDB 之间创建副本集，所以我希望这种转换能够正常工作。

只是想检查一下，谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T00:21:40.510

> 在 32 位安装上执行 mongodump 和在 64 位安装上执行 mongorestore 会不会有任何冲突？

不，这很好，没有问题 - BSON 格式不会因为架构而改变

> 将 2.0 数据库转储移动到 2.2.x 安装是否有任何问题？

这里也没有问题，事实上，如果你愿意，你可以直接复制数据文件（只要源数据库当时关闭）。这实际上会更快，因为您不必重建索引。

# java - 如何在 Java 中使用 printf 用 0 填充空白空间

> ID：14615386
> 
> 赞同：1
> 
> 时间：2013-01-30T22:50:02.117
> 
> 标签：java, printf

如何用0填充以下代码中第一列的空格？

```
for(int i = 0; i < 10; i++) {
    System.out.printf("%-3.0f  %-1s%8.2f%1s %8.2f\n", (double)i, "[", 10d, "]", 10000d);
} 
```

输出：

```
0    [   10.00] 10000.00
1    [   10.00] 10000.00
... 
```

我想要的输出

```
000  [   10.00] 10000.00
001  [   10.00] 10000.00
... 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-30T22:56:19.280

在打印格式前面放一个零：

```
System.out.printf("%03.0f ...");
// -----------------^ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T22:57:21.383

```
 for(int i = 0; i < 10; i++) {
       System.out.printf("%-3.0f  %-1s%08.2f%1s %08.2f\n", (double)i, "[", 10d, "]", 10000d);
  } 
```

请参阅 8 之前的 0。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-30T23:00:16.677

```
 for(int i = 0; i < 10; i++) {
        System.out.printf("%03d  %-1s%8.2f%1s %8.2f\n", (int)i, "[", 10d, "]", 10000d); 
```

# visual-studio-2010 - 我可以在进入中断模式时冻结鼠标位置并在返回运行模式时恢复它吗？

> ID：14615389
> 
> 赞同：0
> 
> 时间：2013-01-30T22:50:29.343
> 
> 标签：visual-studio-2010, debugging, visual-c++, mouseover

在调试桌面应用程序时，Visual Studio 中是否有一个工具来记住当我遇到断点时鼠标的位置，以便我可以在单步执行代码时在 Visual Studio 中使用它，然后在我执行时将其捕捉回那个位置恢复执行？这将有助于鼠标悬停事件和其他位置敏感的工作流程。

如果没有内置的东西，是否可以使用 Visual Studio 插件来做到这一点？或者有没有办法安装一个钩子，以便调试器向我的应用程序发送一个事件或中断，它可以用来在中断时保存该状态并在恢复时恢复它？

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T22:41:03.030

VS 调试器没有内置任何东西来执行此操作。它不仅仅是鼠标位置，可能还有细微的状态变化（如焦点和激活），很难可靠地保存和恢复。

一个快速而肮脏的事情是`OutputDebugString`在有问题的代码中添加一些消息，以便在不实际中断执行的情况下为您提供内部正在发生的事情的线索。VS 将在输出窗口中显示消息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-02T04:12:59.913

接近您所追求的唯一方法是使用远程调试。您可以远程调试在虚拟机中运行的代码，这样您实际上就不需要单独的物理机。

# android - 将应用程序添加到 Android 中的最近任务列表（长按主页按钮）

> ID：14615393
> 
> 赞同：1
> 
> 时间：2013-01-30T22:50:49.873
> 
> 标签：android, android-homebutton

我在 Android 中编写了自己的应用程序。一切运行正常，但是当我单击手机上的主页按钮时，我没有在任务管理器的列表中看到我的应用程序。我看到其他应用程序，但我没有看到我的应用程序。

我不知道在这种情况下是否重要，但我也使用 Sherlock Action Bar。
如何将我的应用添加到任务管理器？
有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T00:42:16.633

假设“任务管理器”是指“最近的任务”，我唯一能想到的就是清单[中`android:excludeFromRecents="true"`的活动](http://developer.android.com/guide/topics/manifest/activity-element.html#exclude)。

# jsf - JSF filterBy 停止，页面中的其他所有内容都被阻止

> ID：14615409
> 
> 赞同：0
> 
> 时间：2013-01-30T22:52:35.653
> 
> 标签：jsf, primefaces

我有一个数据表，在一列中有一个 filterBy 参数。

当我在过滤器框中输入内容时，它确实过滤了表格，但是当我删除或更改我在该字段上写的内容时，什么也没有发生，并且页面中的所有其他操作都被阻止。

我的意思是，在那之后，如果我点击一个按钮，没有任何反应，也不会执行任何事件操作。

我在 Tomcat 7 上使用 JSF 2.1 和 EE5。

你有什么建议？提前非常感谢。

XHTML 代码片段：

```
<p:dataTable value="#{consolidacionAslBean.listaMunicipios}"
    rowKey="#{municipio}" var="municipio" paginator="true"
    rows="5" id="tableMunicipio"
    selection="#{consolidacionAslBean.municipios}" style="font-size: 13px"
    filteredValue="#{consolidacionAslBean.filteredMunicipios}"
    >

<p:column 
        filterBy="#{municipio.catMunicipios.id.cdgMunicipio}"  
        headerText="Clave">
    <h:outputText value="#{municipio.catMunicipios.id.cdgMunicipio}" />
</p:column> 
```

并 bean 正确的对象：

```
private List<AslMunicipios> filteredMunicipios;
private List<AslMunicipios> listaMunicipios; 
```

谢谢！

# tridion - SDL Tridion 2011 粘贴特殊功能

> ID：14615413
> 
> 赞同：7
> 
> 时间：2013-01-30T22:53:04.787
> 
> 标签：tridion, tridion-2011, paste, rich-text-editor

SDL Tridion 2011 中的粘贴特殊功能在任何当前的 Web 浏览器中都不起作用。有人知道这个问题是否会在 Tridion 2013 中得到解决？当它起作用时，它可以真正节省时间，并且可以防止从 Microsoft Word 或任何类似程序粘贴时无法避免的大量重新格式化。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-31T00:00:55.647

马克 - 对我来说，这确实有效，我刚刚用 IE7 和 FF18 都看过。在 IE 中，*粘贴特殊*弹出对话框的焦点有时从不在前面，所以有时我必须最小化 SDL Tridion 编辑窗口才能找到它。

也许您可以提供一些有关您收到的浏览器和错误的附加信息？

此外，官方 SDL 文档中支持的浏览器显示：

> 网络浏览器支持：
> 
> Internet Explorer 9.0 Safari 5.1 for Mac Google Chrome，最新版本 Mozilla Firefox，最新版本

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-01T07:23:37.387

选择性粘贴适用于我们在 Internet Explorer 中，但不适用于 Chrome 或 Firefox。

随着 2011 年的升级，我们一直在推动用户使用 Google Chrome，因为它比 IE 或 Firefox 快得多，而且特殊粘贴无法在 Chrome 中正常工作已成为我们的编辑和制作人在 Tridion 2011 中遇到的最大可用性问题之一（毫不奇怪，他们喜欢主要用 msword 编写。）我们在 11 月提出了在 Tridion 支持下，Paste Special 无法在 Chrom 中工作的问题，并从他们那里收到了两个相互矛盾的回应。

在这两种情况下，Tridion 都承认知道该问题，并且在这两种情况下，他们都表示他们不会在 Tridion 2011 中解决该问题。不同之处在于，在我们收到他们的第一个回复中，他们说他们将在Tridion 2013 在我们收到的第二个回复中，他们说他们没有解决问题的计划。

我们确实查看了代码的情况，看看我们是否可以通过破解 UI 来修复它，我们为 Chrome 找到的是以下启用/禁用粘贴按钮的片段：

```
if ($dom.isWebkit) // couldn't get it to work in Chrome
{
    delete allowedActions["Paste"];
} 
```

因此，基本上看起来 Tridion 尝试过但放弃了在 Chrome 中实现选择性粘贴同样在 Firefox 中启用了按钮，但是当您尝试进行特殊粘贴时，什么也没有发生。我们的开发经理进行了调试，结果发现 paste 方法在执行时抛出了一个静默异常 ->`NS_ERROR_DOM_XPCONNECT_ACCESS_DENIED`在以下代码中`lDocument.execCommand`：

```
var lPasteFailed = false; 
try 
{ 
pastingWithFlag = iProcessingFlag; 
if (lPasteFailed = (!lDocument.execCommand("paste", false, null) || lDocument.body.innerHTML == "")) 
{ 
throw Error("paste had no result - possibly clipboard data unaccessible"); 
} 
if (pastingWithFlag == undefined) 
{ 
lPasteFailed = true; // in certain cases lDocument.execCommand("paste"...) will cause paste into the main area in IE, which will be handled in the onpaste event handler ->     do not paste again 
} 
} 
catch (err) 
{ 
$fa.canAccessClipboard = false; 
lPasteFailed = true; 
self.fireEvent("warning", { source: "paste()", message: err.message }); 
} 
```

为了解决这个问题，我们面临着很大的内部压力，所以我们将在 Tridion 支持下重新打开这个问题，我计划在接下来几天的某个时间与我的客户代表联系，以提出这个问题对他来说也是一个关键问题。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-13T16:24:02.800

我们用 SDL 重新打开了这个问题，这里是他们关于 Paste Special 应该在哪里/何时在 Tridion 中工作的回应：

> *   IE：支持并且有效。可以报​​告任何问题，我们将研究解决它。
> *   Chrome：不支持（Chrome 不允许访问剪贴板）
> *   Firefox：这里有启用剪贴板访问的步骤（[http://sdllivecontent.sdl.com/LiveContent/content/en-US/SDL_Tridion_2011_SPONE/task_RECON43B1609144D94562A394BB51FAC884B9](http://sdllivecontent.sdl.com/LiveContent/content/en-US/SDL_Tridion_2011_SPONE/task_RECON43B1609144D94562A394BB51FAC884B9)），尽管我们已经看到了 Firefox 关闭剪贴板访问的证据，类似于 Chrome
> 
> 构建扩展以启用特殊粘贴超出了研发当前范围。
> 
> 2013 年 2 月 13 日，SDL 将在社区网络研讨会 ( [http://webinars.julianwraith.com/](http://webinars.julianwraith.com/) ) 期间宣布一项竞赛。
> 
> 比赛将挑战社区为 CME 和 XPM 创建粘贴特殊扩展。
> 
> 比赛将有价格来激励社区参与。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-12-11T06:32:40.807

人们经常登陆这个页面，只是想知道，现在社区上有一个扩展可用。

[http://www.sdltridionworld.com/community/2011_extensions/pastespecial.aspx](http://www.sdltridionworld.com/community/2011_extensions/pastespecial.aspx)

# iphone - iOS 6.1 和 Xcode 4.6，枚举警告 UIViewAnimationCurveEaseOut

> ID：14615417
> 
> 赞同：36
> 
> 时间：2013-01-30T22:53:16.480
> 
> 标签：iphone, ios, enums, xcode4.6

我已经安装了新的 iOS 6.1 和 Xcode 4.6，现在我的代码中有一些枚举警告，我无法解决这个问题：

```
[UIView animateWithDuration:0.4
                          delay:0.0
                        options:UIViewAnimationCurveEaseOut
                     animations:^{

                     } completion:^(BOOL finished) {}]; 
```

这是警告：

```
Implicit conversion from enumeration type 'enum UIViewAnimationCurve' to different enumeration type 'UIViewAnimationOptions' (aka 'enum UIViewAnimationOptions') 
```

我该如何解决这个警告？

* * *

## 回答 #1

> 赞同：103
> 
> 时间：2013-01-30T22:56:15.017

您使用了错误的选项值。试试`UIViewAnimationOptionCurveEaseOut`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-02-05T13:29:09.353

替换`UIViewAnimationCurveEaseOut`成`UIViewAnimationOptionCurveEaseOut`

**例如：**

```
[UIView animateWithDuration:0.4
                          delay:0.0
                        UIViewAnimationOptionCurveEaseOut
                     animations:^{

                     } completion:^(BOOL finished) {}]; 
```

# php - 如何将 PHP 中以逗号分隔的整数列表作为参数传递给 SQL Server 2008 中的存储过程？

> ID：14615419
> 
> 赞同：0
> 
> 时间：2013-01-30T22:53:33.793
> 
> 标签：php, sql, sql-server-2008, stored-procedures

希望我以正确的方式解决这个问题，如果不是，我更愿意学习如何做得更好。

我需要将逗号分隔的整数列表（始终为正整数，无小数）传递给存储过程。然后，存储过程将使用 WHERE 子句的 IN 运算符中的整数：

```
WHERE [PrimaryKey] IN (1,2,4,6,212); 
```

前端是 PHP，连接是通过 ODBC 建立的，我尝试将参数用单引号括起来，并在列表到达查询之前在存储过程中将它们过滤掉，但这似乎不起作用。

我得到的错误是：

> *将 varchar 值 '1,2,4,6,212' 转换为数据类型 int 时转换失败。*

我以前从未这样做过，迄今为止的研究没有产生任何积极的结果。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T05:54:05.427

首先，让我们使用 SQL 函数来执行分隔数据的拆分：

```
CREATE FUNCTION dbo.Split
(
    @RowData nvarchar(2000),
    @SplitOn nvarchar(5)
)  
RETURNS @RtnValue table 
(
    Id int identity(1,1),
    Data nvarchar(100)
) 
AS  
BEGIN 
    Declare @Cnt int
    Set @Cnt = 1

    While (Charindex(@SplitOn,@RowData)>0)
    Begin
        Insert Into @RtnValue (data)
        Select 
            Data = ltrim(rtrim(Substring(@RowData,1,Charindex(@SplitOn,@RowData)-1)))

        Set @RowData = Substring(@RowData,Charindex(@SplitOn,@RowData)+1,len(@RowData))
        Set @Cnt = @Cnt + 1
    End

    Insert Into @RtnValue (data)
    Select Data = ltrim(rtrim(@RowData))

    Return
END 
```

要使用它，您只需将分隔字符串和分隔符传递给函数，如下所示：

```
SELECT
  *
FROM
  TableName
WHERE
  ColumnName IN (SELECT Data FROM dbo.Split(@DelimitedData, ',')) 
```

如果您仍然有问题，由于数据类型，请尝试：

```
SELECT
  *
FROM
  TableName
WHERE
  ColumnName IN (SELECT CONVERT(int,Data) FROM dbo.Split(@DelimitedData, ',')) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T22:59:59.123

您可以传递一个逗号分隔的值列表。但是，您不能在`in`语句中随意使用它们。你可以这样做：

```
where ','+@List+',' like '%,'+PrimaryKey+',%' 
```

也就是说，您想查看该值是否存在。我使用 SQL Server 语法进行连接，因为该问题被标记为 Microsoft。

# c# - 外部媒体播放器的下一首歌曲按钮？

> ID：14615425
> 
> 赞同：1
> 
> 时间：2013-01-30T22:54:31.423
> 
> 标签：c#, winforms, button, keyboard, keyboard-shortcuts

随意编辑标题。

好的，所以我正在尝试创建一个短键按钮，可以跳到任何媒体播放器的下一首歌曲？就像某些键盘在 FN + F11 中所具有的一样，它会转到下一首歌曲，无论如何要将其集成到我自己的键盘的 c# 中？到目前为止我有这个代码，但它所做的只是将一个味精发布到 textbox1 上。

```
// Structure contain information about low-level keyboard input event 
[StructLayout(LayoutKind.Sequential)]
private struct KBDLLHOOKSTRUCT
{
    public Keys key;
    public int scanCode;
    public int flags;
    public int time;
    public IntPtr extra;
}
//System level functions to be used for hook and unhook keyboard input  
private delegate IntPtr LowLevelKeyboardProc(int nCode, IntPtr wParam, IntPtr lParam);
[DllImport("user32.dll", CharSet = CharSet.Auto, SetLastError = true)]
private static extern IntPtr SetWindowsHookEx(int id, LowLevelKeyboardProc callback, IntPtr hMod, uint dwThreadId);
[DllImport("user32.dll", CharSet = CharSet.Auto, SetLastError = true)]
private static extern bool UnhookWindowsHookEx(IntPtr hook);
[DllImport("user32.dll", CharSet = CharSet.Auto, SetLastError = true)]
private static extern IntPtr CallNextHookEx(IntPtr hook, int nCode, IntPtr wp, IntPtr lp);
[DllImport("kernel32.dll", CharSet = CharSet.Auto, SetLastError = true)]
private static extern IntPtr GetModuleHandle(string name);
[DllImport("user32.dll", CharSet = CharSet.Auto)]
private static extern short GetAsyncKeyState(Keys key);
//Declaring Global objects     
private IntPtr ptrHook;
private LowLevelKeyboardProc objKeyboardProcess;

private IntPtr captureKey(int nCode, IntPtr wp, IntPtr lp)
{
    if (nCode >= 0)
    {
        KBDLLHOOKSTRUCT objKeyInfo = (KBDLLHOOKSTRUCT)Marshal.PtrToStructure(lp, typeof(KBDLLHOOKSTRUCT));

        // Keys
        if (objKeyInfo.key == Keys.F10 && ModifierKeys == Keys.Alt)
        {
            textBox1.Focus();
            a += 1;
            c += 1;
            textBox1.Text += Convert.ToString(c) + ". " + "Previous Song" + Environment.NewLine;
            PrevSongCount.Text = Convert.ToString(a);
            AllUpCount.Text = Convert.ToString(c);
            return (IntPtr)1;
        }
        if (objKeyInfo.key == Keys.F11 && ModifierKeys == Keys.Alt)
        {
            textBox1.Focus();
            b += 1;
            c += 1;
            textBox1.Text += Convert.ToString(c) + ". " + "Next Song" + Environment.NewLine;
            NextSongCount.Text = Convert.ToString(b);
            AllUpCount.Text = Convert.ToString(c);
            return (IntPtr)1;
        }
    }
    return CallNextHookEx(ptrHook, nCode, wp, lp);
}
bool HasAltModifier(int flags)
{
    return (flags & 0x20) == 0x20;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-23T14:12:31.903

这并不像我想象的那么容易。但最后我设法做到了，解决方案非常简单。

编译后，您将使用古老的虚拟媒体键盘代码。 [http://msdn.microsoft.com/en-us/library/dd375731%28v=VS.85%29.aspx](http://msdn.microsoft.com/en-us/library/dd375731%28v=VS.85%29.aspx)

我将这个 cmd line prog 用于我的微软自然键盘，它没有媒体键，但有 5 个可编程键，要让它工作，你可以破解注册表

HKEY_CURRENT_USER\Software\Microsoft\IntelliType Pro\EventMapping\82 或

HKEY_CURRENT_USER\Software\Microsoft\IntelliType Pro\ModelSpecific\1016\EventMapping\82

其中 81 只是动态键之一 (78-​​82) 并将值放在 Arguments 键中。

```
using System;
using System.Runtime.InteropServices;

namespace NxtTrack
{    
class Program
{
    [DllImport("user32.dll")]
    private static extern bool PostMessage(IntPtr hWnd, uint Msg, UIntPtr wParam, IntPtr lParam);
    [DllImport("user32.dll")]
    public static extern void keybd_event(byte vkCode, byte scanCode, int flags, IntPtr extraInfo);

    enum TrackMove
    {
        Previous,Next
    }

    static void Main(string[] args)
    {

        TrackMove trackMove;

        try
        {
            if(args[0].ToLower().Contains("previous"))
                trackMove = TrackMove.Previous;
            else if(args[0].ToLower().Contains("next"))
                trackMove = TrackMove.Next;
            else
            {
                throw new Exception("wrong param");
            }
        }
        catch
        {
            Console.WriteLine("Params needed: Next or Previous");
            return;
        }
        TrackKeys(trackMove);
    }

    private static void TrackKeys(TrackMove trackMove)
    {
        //http://msdn.microsoft.com/en-us/library/dd375731%28v=VS.85%29.aspx

        byte msg = trackMove == TrackMove.Previous ? (byte)0xB1 : (byte)0xB0;
        keybd_event(msg, 0x45, 0, IntPtr.Zero);
    }
}
} 
```

# highcharts - HighStock CrossHair 值显示在具有多种趋势的工具提示之外

> ID：14615427
> 
> 赞同：2
> 
> 时间：2013-01-30T22:54:38.400
> 
> 标签：highcharts, highstock

我有一个 HighStock 图表（下图），其中平均显示 10-15 个趋势。我发现在单个显示器上运行如此多的趋势时，工具提示变得缓慢且太大。我想禁用工具提示，但仍显示十字准线悬停的每个趋势的值。我在 HighStock 中订阅了哪些事件，以将工具提示中显示的值移动到自定义内容？

我附上了我的图表图像，其中工具提示可见，左侧有自定义图例。我想让悬停的值（在十字准线处）出现在左侧的图例项旁边，就像它们在工具提示中一样，禁用工具提示，但保留十字准线。

我找到了几种使用 PlotOptions.Series.Point.Events.MouseOver 的方法，但这只适用于一种趋势。我如何为我的所有趋势做到这一点？

[![图表截图](../Images/fd9ec053fdf1aefa13404e53705f3cc6.png)](https://i.stack.imgur.com/knD70.gif)

值得注意的是，我的代码运行良好。上图是在 MVC4 中动态生成的工作图的图片，在 PC/MAC/iPhone/iPad 上显示精美。我的问题最终需要精通 HighStock 的人来回答，因为他们将拥有了解需要订阅哪些事件或需要进行哪些更改才能将我需要的数据推送到 Javascript 函数所需的深入知识（所以我可以将十字准线值推送到我的自定义图例）。这不是“我的代码正确吗？”的问题。这是一个“我使用什么代码来获得所需的效果？”的问题。

但这里是代码，以防万一。请注意，我正在构建一个 C# 通用“var”并通过“Javascript()”返回它。

```
// BUILD HIGHCHARTS JAVASCRIPT
        var data = @"$(function () {
            $.post(""";
        if (Request.ApplicationPath.ToString() == "/")
        {
            data += @"/HighCharts/GetData"", function (data) {";
        }
        else
        {
            data += Request.ApplicationPath.ToString() + @"/HighCharts/GetData"", function (data) {";
        }
        data += @"// Create the chart
                window.chart = new Highcharts.StockChart({
                    chart: {
                        events : {
                            load : LoadComplete
                        },

                        renderTo: 'container',
                        zoomType: 'x'
                    }, ";
        data += @"colors: [ ";

        foreach (var a in model.listOfSensors)
        {
            data += "'" + a.ColorHex.ToString() + "'";
            y = y + 1;
            if (y != model.listOfSensors.Count)
            {
                data += ",";
            }
        }

        data += @"], ";
        data += @"plotOptions: {
                    series: {
                        point: {
                            events: {
                                mouseOver: function () {
                                    SeriesMouseOver(this.series.name)
                                },
                                mouseOut: function () {
                                    SeriesMouseOut(this.series.name)
                                }
                            }
                        }
                    }
                },";
        data += @"navigator : {
                    adaptToUpdatedData: false
                }, ";
        data += @"exporting : {
                    enabled: true
                }, ";
        data += @"rangeSelector : {
                        buttons: [{
                            type: 'hour',
                            count: 12,
                            text: '12h'
                        }, {
                            type: 'day',
                            count: 1,
                            text: '1d'
                        }, {
                            type: 'day',
                            count: 2,
                            text: '2d'
                        }, {
                            type: 'all',
                            text: 'All'
                        }],
                        inputEnabled: true, // it supports only days
                        inputStyle: {
                            color: '#CCCCCC',
                            fontFamily: 'Arial'
                        },
                        labelStyle: {
                            color: '#000000',
                            fontFamily: 'Arial',
                            fontWeight: 'bold'
                        },
                        selected : 3 // all
                    },
                xAxis : {
                    events : {
                        afterSetExtremes : afterSetExtremes
                    },
                    minRange: 3600 * 1000 // one hour
                },  
                yAxis: [";

        // BUILD SCALES
        foreach (IECRM_Data_Project.Entities.Scale a in model.scales)
        {
            data += "{ ";
            data += "min: " + a.Min.ToString() + ",";
            data += "showEmpty: " + a.ShowIfEmpty.ToString().ToLower() + ",";
            data += "max: " + a.Max.ToString() + ",";
            data += "lineColor: '" + a.ColorHex.ToString() + "',";
            data += "labels: { enabled: false }" ;
            data += "}";
            x = x + 1;
            if (x != model.scales.Count) //ADD A COMMA AFTER EACH EXCEPT THE LAST
            {
                data += ",";
            }
        }

           data += @"],
                    tooltip: {
                        pointFormat: '<span id=""{series.name}.replace(/\./g, """")"" style=""color:{series.color}"">{series.name}: {point.y}</span><br />',
                        useHTML: true,
                        valueDecimals: 1
                    },
                    series: data
                });
            });

        });";
return JavaScript(data); 
```

# svg - 如何在 SVG 中嵌入 schema.org 标记？

> ID：14615429
> 
> 赞同：3
> 
> 时间：2013-01-30T22:54:48.723
> 
> 标签：svg, schema.org

我希望向 SVG 文件添加语义，并希望使用 schema.org 术语。SVG 有这样做的语法吗？我的第一次尝试是：

```
<svg:text xmlns:svg="xmlns="http://www.w3.org/2000/svg" x="100" y="200"   
       html:itemtype="http://schema.org/Person" xmlns:html="http://www.w3.org/1999/xhtml"
       >Joe Soap</svg:text> 
```

这会是有效的 SVG 并在符合标准的工具中显示吗？搜索引擎会识别 schema.org 标记吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-20T11:35:39.553

我从未尝试过，但我想应该可以使用[**RDFa**](http://www.w3.org/TR/rdfa-syntax/)，因为 SVG Tiny 1.2[允许属性](http://www.w3.org/TR/2008/REC-SVGTiny12-20081222/metadata.html#MetadataAttributes)

*   `about`
*   `content`
*   `datatype`
*   `property`
*   `rel`
*   `resource`
*   `rev`
*   `typeof`

（您可以将[`metadata`元素](http://www.w3.org/TR/2008/REC-SVGTiny12-20081222/metadata.html#MetadataElement)与[RDF/XML](http://www.w3.org/TR/rdf-syntax-grammar/)一起使用。）

# android - 如何忽略三星 Galaxy 3 上的手掌滑动事件

> ID：14615430
> 
> 赞同：3
> 
> 时间：2013-01-30T22:54:52.473
> 
> 标签：android, events, gesture

我的 Android 应用程序中有一些按钮，按下时会发出声音，释放按钮时会停止播放。我使用下面的代码来实现这个

```
 private OnTouchListener dialTouch = new OnTouchListener() 
  {
    public boolean onTouch(View v, MotionEvent event)
    {
         if ( event.getAction() == MotionEvent.ACTION_DOWN) 
            {   
                 //play tone
            }
            else  if ( event.getAction() == MotionEvent.ACTION_UP) 
            {
                    // stop tone
            }
     }
  } 
```

然而，在三星 Galaxy 3 上，手掌滑动功能（例如在截屏时）会触发这些 MotionEvent.ACTION_DOWN 事件。有什么方法可以忽略代码中的手掌滑动事件，但仍然能够在按下按钮时产生音调。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-02-28T22:41:15.330

嗨，我知道这是旧的，但你有没有得到答复？我真的需要知道如何关闭手掌扫听器

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-06-08T05:40:13.240

我也想知道这个问题的答案。android 本身是否有任何手掌滑动监听器，或者我们需要使用我们的逻辑以编程方式执行此操作。

# java - 在构造时选择性地为多维数组分配维度

> ID：14615432
> 
> 赞同：0
> 
> 时间：2013-01-30T22:55:00.930
> 
> 标签：java, multidimensional-array

Java 支持多维数组，表示为“数组的数组”。例如，我可以使用以下代码创建一个字符串数组：

```
int rows = ...
int cols = ...
String[][] array2d = new String[rows][cols]; 
```

我想做的是让第二个维度被“取消”。换句话说，像这样的 for 循环`for(String[] array : array2d) System.err.println(array);`会打印出：

```
null
...
null 
```

我想这样做的原因是因为我已经分配了一堆`String[]`我想放入的实例`array2d`。我有几个解决方案，但由于以下原因，两者似乎都不是最佳的：

**解决方案 1**

我可以做类似的事情`String[][] array2d = new String[rows][0]`，使用 for 循环来清空第一个维度，然后填充行，但这对我来说似乎很难看，因为 Java 将为`String[]`每一行创建一个新的空，我真的不需要它到。

**解决方案 2**

我也可以做类似的事情`String[][] array2d = new String[][]{null, null, ... null}`，但这更糟糕，因为我必须`array2d`通过括号中的代码部分对第一个维度的长度进行硬编码，这很恶心。

我认识到这不是一个大问题，尤其是当维数很小的时候，任何称职的程序员都会选择其他构造而不是创建多维数组。我只是好奇是否有办法在构造时部分分配多维数组的维度。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-30T22:59:12.333

最简单的解决方案：

```
int rows = ...
String[][] array2d = new String[rows][]; 
```

如果您不初始化第二个维度，则您的数组将`null`在维度 1 中包含条目。

# c++ - 传值、常量值、引用、常量引用、指针、常量指针

> ID：14615435
> 
> 赞同：5
> 
> 时间：2013-01-30T22:55:13.167
> 
> 标签：c++, parameter-passing

探索更多并找到答案以确定如何通过[旧帖子](https://stackoverflow.com/questions/270408/is-it-better-in-c-to-pass-by-value-or-pass-by-constant-reference)（抱歉重复）

*   如果函数打算将参数更改为副作用，请通过非常量引用获取它。
*   如果函数不修改其参数并且参数是原始类型，则按值获取。
*   否则通过 const 引用获取，但以下情况除外
    *   如果该函数无论如何都需要复制 const 引用，请按值获取。

**[原帖如下]**

我想总结一下按值传递、常量值、引用、常量引用、指针、常量指针的用法，请纠正我并给我你的建议。

*   至于引用和指针，尽可能使用 const （感谢所有人）。
*   通过引用传递和指针传递之间没有性能差异。
*   当大小不大于指针时（感谢 Mark Ransom），按值传递。

还有一些问题：

1.  我很少看到通过 const 值传递。它有用还是编译器会检测到值传递中的常量性？
2.  const 引用占用了太多空间。我可以只使用按值传递吗？现代编译器会优化它以不牺牲性能吗？

根据 juanchopanza 提到的文章[“想要速度？传递价值”](http://cpp-next.com/archive/2009/08/want-speed-pass-by-value/)，我再添加一项。

*   如果要复制参数，请按值传递它们并让编译器进行复制，而不是通过 const 引用传递它们并在函数体中自己进行复制。

非常感谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-30T23:07:13.020

> 我很少看到通过 const 值传递。它有用还是编译器会检测到值传递中的常量性？

按值传递`const`并不存在。当您按值传递时，您不能以使更改在子例程之外可见的方式修改该值。这是因为当您按值传递时，会从原始值制作副本，并且在函数中使用该副本。

> const 引用占用了太多空间。我可以只使用按值传递吗？现代编译器会优化它以不牺牲性能吗？

通过 ( `const`) 引用传递与通过值传递不同。当您通过引用传递值时，不会复制值，只是提供了一个内存位置，因此您可以“修改”（间接）您通过引用传递的值。

例如，以下内容：

```
void byValue(int x) {
    x += 1
}
void byRef(int &x) {
    x += 1
}

// ...
{
    y = 10;
    byValue(y);
    cout << y << endl // Prints 10
    byRef(y);
    cout << y << endl; // Prints 11
}
// ... 
```

> 尽可能使用 const。

在必要的地方通过`const`总是一个好主意。它有助于代码的可读性，让其他人知道他们传递给方法的值会发生什么，并帮助编译器捕捉您在修改方法内的值时可能犯的任何错误。

> 通过引用传递和指针传递之间没有性能差异。

如果有的话，可以忽略不计。编译器将在这里处理细节。它为您节省了创建指针的工作，并为您很好地取消引用它。

> 当大小不大于一个字时，按值传递。

正如 Mark 指出的那样，*如果值小于指针*，则执行此操作。指针在 32 位和 64 位系统上的大小不同（因此得名），因此这完全由您自行决定。`char`除了原始类型（ , `int8_t`, `int16_t`, , 等）之外，我喜欢为几乎所有东西传递指针`float`，但这只是我的观点。

# delphi - 使用 delphi 和 ms 访问时查询表达式中的语法错误（缺少运算符）

> ID：14615436
> 
> 赞同：2
> 
> 时间：2013-01-30T22:55:16.643
> 
> 标签：delphi, ms-access

有谁知道这个错误的来源：

> 项目 xxxx.exe 引发异常类 EoleException，并在查询表达式“序列号=？”中显示消息“语法错误（缺少运算符）”

这是我在 delphi 中使用 ms access 数据库的实际代码。

```
with AddIndividualsAccountADOQuery do
begin
  SQL.Clear;
  SQL.Add('Select * from IndividualAccount where Serial Number=:Sno');
  Parameters.ParamByName('Sno').Value:=edit1.Text;
  Open;
  Active:= True;
end; 
```

实际代码在 delphi 和 sql 数据库中运行良好。但是当我使用 ms 访问时，当我运行应用程序时会出现上述错误。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-30T22:57:52.697

我相信对于 MS-Access，您需要在名称周围加上括号（因为它包含一个空格）：

```
Select * from IndividualAccount where [Serial Number]=:Sno 
```

# sql-server - 使用 WinCE 摩托罗拉设备连接到 SQL Server 时出现一般网络错误

> ID：14615439
> 
> 赞同：0
> 
> 时间：2013-01-30T22:55:49.323
> 
> 标签：sql-server, networking, windows-ce, motorola

我收到异常：“一般网络错误。请检查您的网络文档。” 连接到我们的新 SQL Server 2008 R2 服务器时。关于这个例外，我只能说什么了。

在 Windows CE5 或 CE6（取决于使用的是 Motorola MC3090 还是 MC3190）中，安装了 Microsoft SQL Client 2.0（从 Visual Studio 2008 运行应用程序时部署了包 sql.wce5.armv4i.CAB）。我无法在两个版本的枪上连接到该数据库……我只能连接到我们的 Windows 应用程序（x32 和 x64）。我使用的连接字符串如下：“Data Source=ip_address;Database=dbname;User ID=username;Password=password”

我成功连接到我们局域网中的开发数据库。开发数据库服务器也是 2008 R2 SP1，但没有端口块（全开）。显然，根据系统管理员的说法，没有任何东西被阻止。新的数据库服务器现在是虚拟的和远程的。

是否有可能有某种选项来阻止来自某些来源的连接？有什么我可以使用的诊断工具吗？

除此之外还有什么想法吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T21:01:41.427

这终于是我的错了。测试时，我将枪放在支架上，然后连接失败了……我需要使用无线连接在支架上的枪上进行测试，它可以工作！

# performance - 如何计算算法的加密和解密时间复杂度？

> ID：14615444
> 
> 赞同：2
> 
> 时间：2013-01-30T22:56:09.537
> 
> 标签：performance, cryptography, encryption-symmetric

我尝试计算以下算法的时间复杂度。

```
private void encrypt()
{
        M = new BigInteger(64,random);
        C = M.multiply(k).mod(N); // O(n^2)    
}

private void decrypt()
{
        kk= k.modinverse(N); // O(n^3)
        Mp = kk.multiply(c).mod(N); //O(n^2)
} 
```

我计算的时间复杂度对吗？

其中加密的时间复杂度为 O(n^2)，解密的时间复杂度为 O(n^3) + O(n^2) = O(n^3)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T23:35:00.137

您的分析可以**更详细**，并**使用更好的数字乘法界限**。它应该包含更多关于您从哪里得到所用程序的复杂性的详细说明。

对于大数字相乘，您可以使用[Karatsuba 算法](http://en.wikipedia.org/wiki/Karatsuba_algorithm)或[Schönhage–Strassen 算法](http://en.wikipedia.org/wiki/Sch%C3%B6nhage%E2%80%93Strassen_algorithm)达到`O(n^1.585)`或降低（有关详细信息，请参阅链接的维基百科页面）。

构造一个新整数并计算模数`N`的复杂性不会比线性差。

因此，程序的复杂性`encrypt`将**取决于选择的乘法算法**。

程序也是如此`decrypt()`。我不知道你从哪里得到复杂性`modinverse`。最多可以计算[模乘逆](http://en.wikipedia.org/wiki/Modular_multiplicative_inverse)`O(n^2)`。

维基百科页面中给出的模逆的复杂度为`O(log(M)^2)`，它使用数字的值表示，为此，我们计算逆。您的分析（通常在处理数论算法时进行）使用数字长度而不是它们的值，这就是复杂性的原因`O(N^2)`。

# wcf - WCF 仅本地 NamedPipe

> ID：14615457
> 
> 赞同：5
> 
> 时间：2013-01-30T22:57:03.857
> 
> 标签：wcf, named-pipes, self-hosting, usersession

这是我的问题的一个简单示例。我正在编写一个应用程序，它自己托管 WCF 服务，仅在用户会话中进行通信。当多个用户在终端服务机器上同时运行这个应用程序时，只要他们没有本地管理员权限，所有用户都会很高兴。如果两个或更多用户是管理员，问题就开始了，第一个用户创建服务，第二个用户因为服务已经在全球范围内创建......

没有 WCF 的简单 Win32 实现将创建一个带有“Local\”前缀的命名管道。WCF 似乎首先尝试创建全局共享内存映射，然后失败，然后创建本地映射。

有没有人找到一种方法来自托管当前用户会话本地的 WCF 服务，即使用户是本地管理员？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T23:44:24.347

简单的方法是让每个实例使用不同的服务 URL（从用户会话的某些特征中派生它以使其唯一 - 例如会话登录 ID）。

如果 WCF 绑定以足够的权限运行，则无法阻止 WCF 绑定在全局命名空间中发布其端点详细信息（也称为真实管道名称）。但也许您可以在打开服务主机之前调整进程令牌权限以禁用 SeCreateGlobalPrivilege，如果您的服务发现它以具有提升权限的管理员身份运行。

# c++ - 不完整类型'PGconn {aka struct pg_conn}'的无效使用

> ID：14615460
> 
> 赞同：4
> 
> 时间：2013-01-30T22:57:13.843
> 
> 标签：c++, c, oop

我有两个类，主类和一个连接类：

**康涅狄格.cpp：**

```
#include "conn.h"
#include <postgresql/libpq-fe.h>

Conn::getConnection()
{
        connStr = "dbname=test user=postgres password=Home hostaddr=127.0.0.1 port=5432";
        PGconn* conn;
        conn = PQconnectdb(connStr);
        if(PQstatus(conn) != CONNECTION_OK)
              {
                cout << "Connection Failed.";
                PQfinish(conn);
              }
        else
              {
                cout << "Connection Successful.";
              }
        return conn;

} 
```

**连接器**

```
#ifndef CONN_H
#define CONN_H
#include <postgresql/libpq-fe.h>
class Conn
{
public:
    const char *connStr;
    Conn();
    PGconn getConnection();
    void closeConn(PGconn *);
}; 
```

**主文件**

```
#include <iostream>
#include <postgresql/libpq-fe.h>
#include "conn.h"

using namespace std;

int main()
{
    PGconn *connection = NULL;
    Conn *connObj;
    connection = connObj->getConnection();

return 0;
} 
```

**错误：无效使用不完整类型'PGconn {aka struct pg_conn}'**

**错误：“PGconn {aka struct pg_conn}”的前向声明**

有什么帮助吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T23:01:28.940

在您的`conn.h`, 您应该定义`getConnection`为返回 a `PGconn *`，而不是`PGconn`。`PGconn`是一个不透明的类型（你的代码不应该知道任何关于它的名字），所以你不能返回它或按值使用它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T23:01:42.693

该行：

```
PGconn getConnection(); 
```

由于`PGConn`是一个不完整的类型，你不能*定义*一个按值返回它的函数，只能定义一个指向它的指针。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-30T23:05:47.663

在您的 conn.cpp 中，`conn::getConnection()`没有返回类型。从您的代码中，我猜您需要返回一个指向 PGconn 的指针：

连接器

```
class Conn
{
public:
    const char *connStr;
    Conn();
    PGconn* getConnection();
          ^^ return pointer instead of return by value
    void closeConn(PGconn *);
}; 
```

连接程序

```
PGconn* Conn::getConnection()
^^^^^^ // return PGconn pointer
{
   connStr = "dbname=test user=postgres password=Home hostaddr=127.0.0.1 port=5432";

   PGconn* conn = NULL;
   conn = PQconnectdb(connStr);
   if(PQstatus(conn) != CONNECTION_OK)
   {
       cout << "Connection Failed.";
       PQfinish(conn);
   }
    else
    {
      cout << "Connection Successful.";
    }
    return conn;
} 
```

# python - 为什么与多个 Popen 子进程一起使用时会出现通信死锁？

> ID：14615462
> 
> 赞同：9
> 
> 时间：2013-01-30T22:57:32.563
> 
> 标签：python, python-2.7, multiprocessing, subprocess

*Python 2.7.3 中不会*出现以下问题。但是，我的机器（64 位 Mac OSX 10.7.3）上的 Python 2.7.1 和 Python 2.6 都会出现这种情况。这是我最终将分发的代码，所以我想知道是否有任何方法可以完成这项任务，而不是过于依赖 Python 版本。

我需要并行打开多个子进程并将 STDIN 数据写入每个子进程。通常我会使用该`Popen.communicate`方法来执行此操作。但是，`communicate`每当我同时打开多个进程时，就会出现死锁。

```
import subprocess

cmd = ["grep", "hello"]
processes = [subprocess.Popen(cmd, stdin=subprocess.PIPE,
                              stdout=subprocess.PIPE, stderr=subprocess.PIPE)
                                for _ in range(2)]

for p in processes:
    print p.communicate("hello world\ngoodbye world\n") 
```

如果我将进程数更改为`for _ in range(1)`，则输出与预期一样：

```
('hello world\n', '') 
```

但是，当有两个进程 ( `for _ in range(2)`) 时，进程会无限期地阻塞。我尝试过手动写入标准输入的替代方法：

```
for p in processes:
    p.stdin.write("hello world\ngoodbye world\n") 
```

但是任何从进程中读取的尝试，（`p.stdout.read()`例如）仍然是死锁。

起初[这](http://bugs.python.org/issue13817)似乎是相关的，但它指定它在使用多个线程时发生，并且死锁仅很少发生（而这里总是发生）。有没有办法让它在 2.7.3 之前的 Python 版本上工作？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-31T01:32:18.770

我不得不为这个挖一点。（我曾经遇到过类似的问题，所以以为我知道答案，但错了。）

此处描述了该问题（以及 2.7.3 的补丁）：

[http://bugs.python.org/issue12786](http://bugs.python.org/issue12786)

问题是 PIPE 被子流程继承。答案是在您的 Popen 通话中使用“close_fds=True”。

```
processes = [subprocess.Popen(cmd, stdin=subprocess.PIPE,
               stdout=subprocess.PIPE, stderr=subprocess.PIPE,close_fds=True)
                            for _ in range(2)] 
```

*如果这导致您想要*重用的其他文件描述符出现问题（如果这是一个简化的示例），那么您可以 wait()/communicate() 以与创建子进程相反的顺序来处理子进程，而且看起来去工作。

即，而不是：

```
for p in processes:
    print p.communicate("hello world\ngoodbye world\n") 
```

采用：

```
while processes:
    print processes.pop().communicate("hello world\ngoodbye world\n") 
```

（或者，我猜，只需在现有循环之前执行 'processes.reverse()'。）

# ios - 在 CALayer 中定位内容

> ID：14615464
> 
> 赞同：1
> 
> 时间：2013-01-30T22:57:45.667
> 
> 标签：ios, objective-c, calayer, avcapture

如何在 CALayer 中定位内容，使其缩放以适应宽度（保留纵横比）并定位在图层的顶部？

更具体地说，我正在尝试使用 AVCaptureVideoPreviewLayer 来实现此定位。如果我将预览层的 videoGravity 设置为 AVLayerVideoGravityResizeAspectFill ，那么它会填充宽度但将内容垂直居中在框架中（切断顶部和底部）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-07-31T07:09:57.587

尝试使用 .contentGravity 属性 -

> 一个常量，指定层的内容如何在其边界内定位或缩放

```
<CALayer>.contentsGravity = kCAGravityResizeAspect; 
```

可能的

```
CA_EXTERN NSString * const kCAGravityCenter
    __OSX_AVAILABLE_STARTING (__MAC_10_5, __IPHONE_2_0);
CA_EXTERN NSString * const kCAGravityTop
    __OSX_AVAILABLE_STARTING (__MAC_10_5, __IPHONE_2_0);
CA_EXTERN NSString * const kCAGravityBottom
    __OSX_AVAILABLE_STARTING (__MAC_10_5, __IPHONE_2_0);
CA_EXTERN NSString * const kCAGravityLeft
    __OSX_AVAILABLE_STARTING (__MAC_10_5, __IPHONE_2_0);
CA_EXTERN NSString * const kCAGravityRight
    __OSX_AVAILABLE_STARTING (__MAC_10_5, __IPHONE_2_0);
CA_EXTERN NSString * const kCAGravityTopLeft
    __OSX_AVAILABLE_STARTING (__MAC_10_5, __IPHONE_2_0);
CA_EXTERN NSString * const kCAGravityTopRight
    __OSX_AVAILABLE_STARTING (__MAC_10_5, __IPHONE_2_0);
CA_EXTERN NSString * const kCAGravityBottomLeft
    __OSX_AVAILABLE_STARTING (__MAC_10_5, __IPHONE_2_0);
CA_EXTERN NSString * const kCAGravityBottomRight
    __OSX_AVAILABLE_STARTING (__MAC_10_5, __IPHONE_2_0);
CA_EXTERN NSString * const kCAGravityResize
    __OSX_AVAILABLE_STARTING (__MAC_10_5, __IPHONE_2_0);
CA_EXTERN NSString * const kCAGravityResizeAspect
    __OSX_AVAILABLE_STARTING (__MAC_10_5, __IPHONE_2_0);
CA_EXTERN NSString * const kCAGravityResizeAspectFill
    __OSX_AVAILABLE_STARTING (__MAC_10_5, __IPHONE_2_0); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T18:07:57.953

尝试使用这组代码：

将此行添加到图层的初始布局：

```
[previewLayer setVideoGravity:AVLayerVideoGravityResizeAspectFill]; 
```

然后添加这些：

```
- (void) viewDidLayoutSubviews
{
    [self layoutPreviewInView:_photoImageView];
}

-(void)layoutPreviewInView:(UIView *) aView
{
    AVCaptureVideoPreviewLayer *layer = [self previewInView:aView];
    if (!layer) return;

    UIDeviceOrientation orientation = [UIDevice currentDevice].orientation;
    CATransform3D transform = CATransform3DIdentity;
    if (orientation == UIDeviceOrientationPortrait) ;
    else if (orientation == UIDeviceOrientationLandscapeLeft)
        transform = CATransform3DMakeRotation(-M_PI_2, 0.0f, 0.0f, 1.0f);
    else if (orientation == UIDeviceOrientationLandscapeRight)
        transform = CATransform3DMakeRotation(M_PI_2, 0.0f, 0.0f, 1.0f);
    else if (orientation == UIDeviceOrientationPortraitUpsideDown)
        transform = CATransform3DMakeRotation(M_PI, 0.0f, 0.0f, 1.0f);

    layer.transform = transform;
    layer.frame = aView.bounds;
}

-(AVCaptureVideoPreviewLayer *) previewInView: (UIView *) view
{
    for (CALayer *layer in view.layer.sublayers)
    {
        if ([layer isKindOfClass:[AVCaptureVideoPreviewLayer class]])
            return (AVCaptureVideoPreviewLayer *) layer;
    }
    return nil;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-07-31T11:43:31.927

我通常使用自动布局来做到这一点：

```
-(void)awakeFromNib{
  [super awakeFromNib];
  self.backgroundColor = [UIColor clearColor];
  CAGradientLayer* gradient = (CAGradientLayer*) self.layer;
  gradient.frame = self.bounds;
  gradient.colors = [NSArray arrayWithObjects:
                     (id)[UIColor colorWithRed:0 green:0 blue:0 alpha:0].CGColor,
                     (id)[UIColor colorWithRed:0 green:0 blue:0 alpha:1].CGColor, nil];

}

+ (Class) layerClass {
  return [CAGradientLayer class];
} 
```

# jquery - 将 Jquery 多选值绑定到隐藏的输入框

> ID：14615466
> 
> 赞同：0
> 
> 时间：2013-01-30T22:57:54.463
> 
> 标签：jquery

我在获取这个多选框的值时遇到了一些[问题](http://www.erichynds.com/jquery/jquery-ui-multiselect-widget/)。

我有一个 php foreach 循环出每个可用的选项，这显示得非常好。但是当我从下拉列表中选择一个选项时，我的隐藏字段会从下拉列表中接收所有可能的值，而不是我选择的值。有什么帮助吗？

```
$('.ui-multiselect-menu input:checkbox').on('change',function() {

            selectedItems = new Array();
            console.log(selectedItems);
            $(".ui-multiselect-menu input:checkbox").each(function() {
                if($.inArray($(this).val(), selectedItems) != 0){
                  selectedItems.push($(this).val());
                }
            });
            console.log(selectedItems);
                var data = selectedItems.join(',');
            $(".live").val(data);
        }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T23:13:50.390

想出了答案。

```
$('.ui-multiselect-menu input:checkbox').on('change',function() {

            selectedItems = new Array();
            console.log(selectedItems);
            $(".ui-multiselect-menu input[name=multiselect_0]:checked").each(function() {
                if($.inArray($(this).val(), selectedItems) != 0){
                  selectedItems.push($(this).val());
                }
            });
            console.log(selectedItems);
                var data = selectedItems.join(',');
            $(".live").val(data);
        }); 
```

# objective-c - 解析一个大的 NSString

> ID：14615467
> 
> 赞同：1
> 
> 时间：2013-01-30T22:57:55.487
> 
> 标签：objective-c, cocoa, nsstring, nsrange

我有一个大的 NSString 对象，如下所示。我想解析这个字符串以获取其中的所有 icmp_seq 和时间值。我写的代码总是给我最后的价值。

任何想法如何以更好的方式做到这一点，除了用换行符分割它，然后在每次分割时运行解析器。

```
64 bytes from 74.125.129.105: icmp_seq=0 ttl=43 time=23.274 ms
64 bytes from 74.125.129.105: icmp_seq=1 ttl=43 time=28.704 ms
64 bytes from 74.125.129.105: icmp_seq=2 ttl=43 time=23.519 ms
64 bytes from 74.125.129.105: icmp_seq=3 ttl=43 time=23.548 ms
64 bytes from 74.125.129.105: icmp_seq=4 ttl=43 time=23.517 ms
64 bytes from 74.125.129.105: icmp_seq=5 ttl=43 time=23.293 ms
64 bytes from 74.125.129.105: icmp_seq=6 ttl=43 time=23.464 ms
64 bytes from 74.125.129.105: icmp_seq=7 ttl=43 time=23.323 ms
64 bytes from 74.125.129.105: icmp_seq=8 ttl=43 time=23.451 ms
64 bytes from 74.125.129.105: icmp_seq=9 ttl=43 time=23.560 ms 
```

代码：

```
-(void)parsePingData:(NSString *)iData {
  NSRange anIcmpRange = [iData rangeOfString:@"icmp_seq"];
  NSRange aTtlRange =[iData rangeOfString:@"ttl"];
  NSRange icmpDataRange = NSMakeRange(anIcmpRange.location + 1, aTtlRange.location - (anIcmpRange.location + 1));
  NSLog(@"Output=%@",[iData substringWithRange:icmpDataRange]);    
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T00:00:30.607

根据您发布的代码进行了一些更改，我们可以得到这样的结果：

```
NSRange range = NSMakeRange(0, largeString.length);
while (range.location != NSNotFound) {
  NSRange icmpRange = [largeString rangeOfString:@"icmp_seq=" options:NSLiteralSearch range:range];
  range.location = icmpRange.location + icmpRange.length;
  range.length = largeString.length - range.location;
  if (range.location != NSNotFound) {
    NSRange ttlRange = [largeString rangeOfString:@" ttl" options:NSLiteralSearch range:range];
    if (ttlRange.location != NSNotFound) {
      NSLog(@"icmp_seq = [%@]", [largeString substringWithRange:NSMakeRange(range.location, ttlRange.location - range.location)]);
    }
  }
} 
```

保持更新的范围并使用`rangeOfString:options:range`，我们只能搜索我们尚未搜索的字符串部分。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T23:09:50.343

这是一种方法。我相信有一个更好的解决方案，如果这看起来真的很糟糕，我很抱歉。但你可以这样做：

```
NSArray *stringArray = [largeString componentsSeparatedByString: @":"]; 
```

然后做一个for循环：

```
for (int i = 1; i < stringArray.count; i++) {
     [self parsePingData:[stringArray objectAtIndex:i]];
} 
```

我开始这样做是`int i = 1`因为索引 0 不会包含您想要的任何值。

# python - Django 以不恰当的方式使用 LIKE？

> ID：14615469
> 
> 赞同：3
> 
> 时间：2013-01-30T22:58:04.250
> 
> 标签：python, mysql, django

我正在尝试执行以下操作

```
from core.models import *
q1 = MessageRecipient.objects.filter(message__subject__icontains="Enfim") 
```

产生以下`WHERE`子句：

```
WHERE `message`.`subject` LIKE %Enfim% 
```

![在此处输入图像描述](../Images/a8dddd31bef350b5cb9c87920a22d178.png)

看类似的说法。

Django 没有使用报价。我在这里错过了什么吗？我打赌我是。因为这是一个常用的功能。有人会意识到这是否是一个错误。发生了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T23:21:36.433

如果您在[https://github.com/django/django/blob/master/django/db/models/sql/query.py](https://github.com/django/django/blob/master/django/db/models/sql/query.py)查看对象的`__str__()`方法，您将在文档字符串中看到以下警告：`Query`

> 参数值不一定会被正确引用，因为这是由数据库接口在执行时完成的。

别担心，这不重要，似乎是消息！这不是一个错误，因此，您只需要考虑您的`.query`用途。如果您想在以后重新创建具有最新结果的查询集，则可以进行调试或[pickle 。](https://docs.djangoproject.com/en/1.3/ref/models/querysets/#pickling-querysets)这不是您可以直接传递给数据库的东西。

# c# - 在组合框中添加新元素，下拉列表未更新

> ID：14615471
> 
> 赞同：0
> 
> 时间：2013-01-30T22:58:13.067
> 
> 标签：c#, wpf, xaml

我正在基于代码隐藏绑定 ComboBox，下面是我的 XAML 和代码隐藏：

```
<Window x:Class="ComboBoxBindingDatabase.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    Title="MainWindow" Height="350" Width="525">
<Grid>
    <ComboBox Height="29" HorizontalAlignment="Left" Margin="135,60,0,0" Name="comboBox1" VerticalAlignment="Top" Width="194" IsEditable="True"/>
    <TextBox Height="39" HorizontalAlignment="Left" Margin="135,159,0,0" Name="textBox1" VerticalAlignment="Top" Width="194" />
    <Button Content="Button" Height="23" HorizontalAlignment="Left" Margin="384,165,0,0" Name="button1" VerticalAlignment="Top" Width="75" Click="button1_Click" />
    <TextBox Height="35" HorizontalAlignment="Left" Margin="368,0,0,172" Name="textBox2" VerticalAlignment="Bottom" Width="115" />
</Grid> 
```

和背后的代码：

```
public partial class MainWindow : Window
{
    public MainWindow()
    {
        InitializeComponent();
        BindComboBox(comboBox1);
    }

    ArrayList b = new ArrayList();

    public void BindComboBox(ComboBox comboBoxName)
    {

        b.Add("a");
        b.Add("b");
        b.Add("c");
        b.Add("d");
        comboBoxName.ItemsSource = b;  
        comboBoxName.DisplayMemberPath = Name;
        comboBoxName.SelectedValuePath = Name;

    }

    private void button1_Click(object sender, RoutedEventArgs e)
    {
        b.Add(textBox2.Text);
        foreach (string s in b)
        {
            comboBox1.ItemsSource = b;
            comboBox1.DisplayMemberPath = Name;
            comboBox1.SelectedValuePath = Name;
        }

    }

} 
```

因此，当我第一次运行该项目时，ComcoBox 将 a、b、cd 显示为下拉列表。但是当我在文本框中输入一些新字母并单击按钮时，ArrayList b 确实将新字母添加到列表中，我正在尝试重新绑定组合框，但它不起作用。它仍然显示 a,b,c,d 认为我看到 ArrarList b 确实增加了。

为什么 ComboBox 不重新绑定？无论如何，是否可以根据 Code Behind 将元素动态添加到 ComboBox 中，而只是简单的 item.add 方法。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T23:12:35.427

您应该改用 ObservableCollection。并且您不必在按钮单击内再次绑定，即使集合将在添加新项目时触发更改通知并且组合框将被更新。

```
 ObservableCollection<string> b= new ObservableCollection<string>();

  public void BindComboBox(ComboBox comboBoxName)
    {

        b.Add("a");
        b.Add("b");
        b.Add("c");
        b.Add("d");

        comboBoxName.ItemsSource = b;  

    }

 private void button1_Click(object sender, RoutedEventArgs e)
    {
        b.Add(textBox2.Text);

    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T23:13:50.203

在 WPF 中，直接在后面的代码中引用 UIControls 是一种不好的做法。您的控件应该绑定到数据，并且当您更改数据时，应该更新 UI。

这是一个小示例，说明您要减少对 UIControls 的引用

xml:

```
<Window x:Class="WpfApplication8.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="MainWindow" Height="233" Width="405" Name="UI">
    <Grid DataContext="{Binding ElementName=UI}">
        <StackPanel>
            <ComboBox ItemsSource="{Binding MyList}" Name="comboBox1" IsEditable="True"/>
            <TextBox x:Name="textbox1" />
            <Button Content="Button" Tag="{Binding ElementName=textbox1, Path=Text}" Name="button1" Click="button1_Click" />
        </StackPanel>
    </Grid>
</Window> 
```

代码：

```
 public partial class MainWindow : Window
    {
        private ObservableCollection<string> _myList = new ObservableCollection<string>();

        public MainWindow()
        {
            InitializeComponent();
            MyList.Add("a");
            MyList.Add("b");
            MyList.Add("c");
            MyList.Add("d");
        }

        public ObservableCollection<string> MyList
        {
            get { return _myList; }
            set { _myList = value; }
        }

        private void button1_Click(object sender, RoutedEventArgs e)
        {
            MyList.Add((sender as Button).Tag.ToString());
        }
     } 
```

# sql - SSRS 中的分组问题

> ID：14615476
> 
> 赞同：1
> 
> 时间：2013-01-30T22:58:28.650
> 
> 标签：sql, reporting-services, ssrs-2008, ssrs-grouping

所以我有一个有分区和细分的表。结构如下：

```
COMPANYID | DIVISIONID | DIVISION | PARENTID
    1     |     1      | North    | NULL
    1     |     2      | South    | NULL
    1     |     3      | East     | NULL
    1     |     4      | West     | NULL
    1     |     5      | Sales    | 1
    1     |     6      | Service  | 1
    1     |     7      | Sales    | 2
    1     |     8      | Service  | 2
    1     |     9      | Sales    | 3
    1     |     10     | Service  | 3
    1     |     11     | Sales    | 4
    1     |     12     | Service  | 4 
```

该表背后的想法是，数据将表明所有这些部门/细分都是同一家公司的。任何具有空 PARENTID 的东西都是“部门”，任何具有 PARENTID 的东西都是“子部门”。最多有 2 层（Division --> Subdivision）。该表将创建以下层次结构：

```
Company 1
    North
        Sales
        Service
    South
        Sales
        Service
    East
        Sales
        Service
    West
        Sales
        Service 
```

我正在尝试制作一份 SSRS 报告，其中显示有关公司的详细信息，包括包含所有部门和子部门的表格。我正在使用以下查询来检索所有部门和细分的列表：

```
SELECT division, parentid
FROM division
WHERE companyid=@companyid 
```

@companyid 是报告的参数。我的思考过程是，我想创建一个具有父组和详细信息组的表，其中父组将是所有具有空 PARENTID 的行，然后详细组将列出其 PARENTID 等于父行的除法的所有行. 我只是不确定如何在组中进行设置。过滤器？分开查询？在 SQL 查询中执行吗？

非常感谢任何和所有帮助！谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T23:20:38.960

如果我正确理解了您的目标，您希望报告以层次结构模式显示信息。

如果是这样，您可以通过设置递归层次结构组来实现它。

Reporting Services 能够以“树”布局显示“层次结构”信息

[更多信息请看这里](http://technet.microsoft.com/en-us/library/dd255243.aspx)

您不必创建另一个查询第一个具有`CompanyID`And the`ParentID`就可以了

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T23:21:07.777

对于最多具有 2 个级别的简单层次结构，您只需将表连接到自身：

```
SELECT D1.CompanyId, D1.DivisionId, D1.Division, D2.Division AS Subdivision
FROM DivisionTable D1
INNER JOIN DivisionTable D2 ON D1.DivisionId = D2.ParentId AND D1.CompanyId = D2.CompanyId
WHERE D1.CompanyId = @CompanyId 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-30T23:23:46.840

您只需要将您的 select 语句作为数据集，SSRS 就可以为您进行分组。您甚至可以在多个级别上进行分层，或者更好地根据过滤器折叠和扩展您的分组。

如何开始：

1.  如您所示创建数据集
2.  从工具箱中放入一个表格对象
3.  只放入明细数据的列
4.  在“设计”布局的左下方单击“详细信息”，然后单击“添加组>父组”。选择您的分组
5.  如果您愿意，您可以按需“折叠”详细信息列。您可以在详细信息分组上选择“可见性”。'报告最初运行时'>选择'隐藏'。选中“可以通过此报告项目切换显示”：选择一个单元格引用，以引用您想要扩展详细信息的内容。

# javascript - jQuery 是否在每个循环中使用创建文档片段？

> ID：14615484
> 
> 赞同：7
> 
> 时间：2013-01-30T22:58:50.170
> 
> 标签：javascript, jquery, documentfragment

所以我读到 jQuery 在内部使用文档片段来加快渲染速度。但是我想知道是否有人知道在我使用每个循环将 img 元素附加到 DOM 的情况下 jQuery 是否会使用 createDocumentFragment？

```
var displayArray = []; // Lots of img elements

$.each(displayArray, function()
{
    $('#imgSection').append(this);
}); 
```

或者我是否需要使用此代码来减少浏览器重排的次数？

```
var displayArray = []; // Lots of img elements
var imgHolder = $('<div/>');

$.each(displayArray, function()
{
    imgHolder.append(this);
});

$('#imgSection').append(imgHolder); 
```

此外，displayArray 由其他代码填充，此处未显示，这些代码基于 JSON 文件中的路径创建 img 元素。

谢谢你的任何建议。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-30T23:02:08.893

~~为什么要循环添加元素？~~

 ~~```
$('#imgSection').append("<div>" + displayArray .join("") + "</div>"); 
```~~  ~~好的，它是元素。

最快的方法是对数组本身使用 append。

```
$("#out").append(elems); 
```

使用一个 div 追加的另一个选项是

```
var div = $("<div/>").append(elems);
$("#out").append(div); 
```

但是一次添加很多图像会很糟糕，除非它们被预加载。那将是一堆正在排队的http请求。

[jsPerf 测试用例](http://jsperf.com/test-appending-array)

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-01-30T23:23:57.813

1.  不，如果您使用，`$.each()`那么 jQuery 将不会使用 a `DocumentFragment`- jQuery 无法知道您将在循环内做什么，并且每次迭代都是独立的。

2.  文档片段的要点是，您*不必*像在第二个示例中所做的那样将所有新元素包装在一个包装器元素中以限制重排。

3.  如果您将元素数组直接传递给而不是自己迭代它们，jQuery[显然会使用文档片段。](http://www.bennadel.com/blog/2281-jQuery-Appends-Multiple-Elements-Using-Efficient-Document-Fragments.htm)`.append()`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-30T23:36:45.577

如果您真的关心回流（并且注意到显示速度很慢），您可以隐藏和显示图像保持元素：

```
var displayArray = […]; // Lots of img elements
var holder = $('#imgSection').hide();
for (var i=0; i<displayArray.length; i++)
    holder.append(displayArray[i]);
holder.show(); 
```~~

# mysql - 说出查询非常慢 - 减少参数加快查询

> ID：14615485
> 
> 赞同：1
> 
> 时间：2013-01-30T22:59:06.683
> 
> 标签：mysql, optimization

我知道这是一个普遍的问题。

下面的查询很慢。我对所有 where 语句都有索引。我可以提出一些加快速度的建议：

1.  如果我传入较少的参数并直接在查询中使用这些参数，我会失去灵活性——这是否会加快查询速度。
2.  有没有更快的选择方法。我不一定需要选择列。我可以简单查询一下列不在选择中的位置，就像标签、集合的情况一样
3.  选择语句中的子查询比执行连接慢 - 我可以优化第一个选择中的地址计数以改进事情。

任何最有帮助的建议

```
BEGIN

DECLARE user_id int;
SET user_id =(SELECT im.user_id FROM image im WHERE im.id = in_image_id);

/*Image details*/
SELECT STRAIGHT_JOIN im.id, im.alias_title, im.title,im.guid_id, im.description, im.hits, im.show_comment, im.can_print, im.can_download, im.can_share, im.created_on, im.date_taken, im.approved, im.visible,
(SELECT count(*) from image where image.address_id = im.address_id) as address_count,
ad.id as image_address_id, ad.address_line_1, ad.address_line_2, ad.town_village_city, ad.state_province_county, ad.postal_code, ad.other_address_detail, co.country,
geo.latitude, geo.longitude, geo.zoom, geo.yaw, geo.pitch,
c.make, c.model,
us.first_name, us.surname, uf.user_id, uf.real_name, uf.user_name, uf.gender, uf.description as user_description, uf.buddy_icon_url, uf.first_taken_date, uf.first_date,
uf.time_zone_label, uf.time_zone_offset,
adf.id as user_address_id,
adf.address_line_1 as user_address_line_1, adf.address_line_2 as user_address_line_2, adf.town_village_city as user_town_village_city, adf.state_province_county as user_state_province_county, 
adf.postal_code as user_postal_code, adf.other_address_detail as user_other_address_detail, cof.country as user_country,
geof.latitude as user_geolocation_latitude, geof.longitude as user_geolocation_longitude, geof.zoom as user_geolocation_zoom, geof.yaw as user_geolocation_yaw, geof.pitch as user_geolocation_pitch,
im.id = in_image_id AS image_selected -- image selected
FROM image im
LEFT JOIN address ad ON im.address_id = ad.id
LEFT JOIN country co ON ad.country_id = co.id
LEFT JOIN geolocation geo ON im.geolocation_id = geo.id
LEFT JOIN camera c ON im.camera_id = c.id
INNER JOIN user us ON im.user_id = us.id
LEFT JOIN user_flickr uf ON us.id = uf.id
LEFT JOIN address adf ON uf.address_id =adf.id
LEFT JOIN country cof ON ad.country_id = cof.id
LEFT JOIN geolocation geof ON uf.geolocation_id = geof.id
WHERE im.user_id = user_id
AND im.approved = in_image_approved 
AND im.visible = in_image_visible
AND (im.advertise_to <= NOW() OR im.advertise_to IS NULL)
ORDER BY image_selected  DESC, date_taken DESC;

/* Select albums for a user and albums the image belongs to */
SELECT a.alias_title, a.title, a.hits, a.created_on, a.updated_on, a.updated_by,
       im.id = in_image_id AS image_albums  -- album belongs to
FROM   album       a
  JOIN album_image ai ON a.id        = ai.album_id
  JOIN image       im ON ai.image_id = im.id
WHERE  a.user_id = user_id
   AND a.approved = in_album_approved
   AND a.visible  = in_album_visible
GROUP BY alias_title
ORDER BY image_albums DESC;

/*Tags*/
SELECT ta.id, ta.raw,ta.title, ta.hits as tag_hits, it.hits as image_tag_hits,
(SELECT count(*) from image_tag where image_tag.tag_title_id = ta.id) as tag_count
FROM tag_title ta
INNER JOIN image_tag it ON ta.id = it.tag_title_id
INNER JOIN image im ON it.image_id = im.id
WHERE im.id = in_image_id HAVING tag_count >1;

/*Comments*/
SELECT fc.comment_html, fc.author_user_id, fc.author_user_name,
         fc.permalink, fc.author_buddy_icon
         FROM flickr_comment fc
INNER JOIN image_flickr_comment ifc ON fc.id = ifc.comment_id
INNER JOIN image im ON ifc.image_id = im.id; 

/*Sets*/
SELECT ms.alias_title, ms.title, ms.photo_set_small_url,
(SELECT count(*) from image_media_set where image_media_set.media_set_id = ms.id) as media_set_count
FROM media_set ms
INNER JOIN image_media_set ims ON ms.id = ims.media_set_id
INNER JOIN image im ON ims.image_id = im.id
WHERE im.id = in_image_id HAVING media_set_count >1; 

/*Media Galleries*/
SELECT mg.alias_title, mg.title, mg.primary_photo_medium_url, 
(SELECT count(*) from image_media_gallery where image_media_gallery.media_gallery_id = mg.id) as media_gallery_count
FROM media_gallery mg 
INNER JOIN image_media_gallery img ON mg.id = img.media_gallery_id
INNER JOIN image im ON img.image_id = im.id
WHERE im.id = in_image_id HAVING media_gallery_count >1;

/*Media Groups*/
/*SELECT mg.alias_title, mg.name, mg.icon_url FROM media_group mg 
INNER JOIN image_media_group img ON mg.id = img.media_group_id
INNER JOIN image im ON img.image_id = im.id
WHERE im.id = in_image_id;*/

SELECT mg.alias_title, mg.name, mg.icon_url,
(SELECT count(*) from image_media_group where image_media_group.media_group_id = mg.id) as media_group_count
FROM media_group mg 
INNER JOIN image_media_group img ON mg.id = img.media_group_id
INNER JOIN image im ON img.image_id = im.id
WHERE im.id = in_image_id HAVING media_group_count >1;

END 
```

# php - Codeigniter 设置横向数据库过滤器

> ID：14615487
> 
> 赞同：1
> 
> 时间：2013-01-30T22:59:11.003
> 
> 标签：php, mysql, codeigniter, activerecord

我想在我的网站上有一个过滤器，这样他们就只能看到他们想看到的内容。例如，用户启用位置过滤器并选择他只想查看美国配置文件。我将过滤器保存在不同的数据库表中，然后保存在 userdata 和 json 中。

这听起来很简单，但事实并非如此 :) 我想防止我必须将一长串代码粘贴到几乎每个模型函数中。

例如，我是否可以使用 json_decode 和 foreaches 创建 1 次函数以生成正确的活动记录（where）代码并将其插入模型函数中，例如 $this->enableFilters(); ? 我使用多个模型，所以我实际上不想为每个模型添加一个功能。

这一切都可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T03:31:18.837

一种选择是扩展核心模型类以包含一个通用功能。查看手册中的[扩展本机库](http://ellislab.com/codeigniter/user-guide/general/creating_libraries.html)部分。

因此，例如，您将创建一个`MY_Model`to extend`CI_Model`并且您的所有模型都可以扩展`MY_Model`。您可以`MY_Model`使用所有子类都可以使用的常用功能。

# javascript - 如何使用 dynatree 全部展开和全部折叠？

> ID：14615490
> 
> 赞同：1
> 
> 时间：2013-01-30T22:59:12.473
> 
> 标签：javascript, jquery, dynatree

我正在使用 dynatree，并希望在树上方有“打开所有”和“关闭所有”链接。如何使用链接执行此操作？

提前致谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-30T23:03:59.570

[文档中](http://wwwendt.de/tech/dynatree/doc/dynatree-doc.html#h8.4.7)有一个扩展所有节点的示例。使用该`.visit()`方法并`.expand()`在每个节点上调用：

```
$("#tree").dynatree("getRoot").visit(function(node){
    node.expand(true);
}); 
```

通过`false`折叠每个节点。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-30T23:03:16.180

你需要阅读它的 API

我从 API 示例中得到了这个

```
<a href="#" id="btnCollapseAll">Collapse All </a>

<a href="#" id="btnExpandAll">Expand All </a>

$("#btnCollapseAll").click(function(){
      $("#tree").dynatree("getRoot").visit(function(node){
        node.expand(false);
      });
      return false;
    });
    $("#btnExpandAll").click(function(){
      $("#tree").dynatree("getRoot").visit(function(node){
        node.expand(true);
      });
      return false;
    }); 
```

# scheme - 如何创建 Scheme 定义以解析复合 S 表达式并放入正常形式

> ID：14615491
> 
> 赞同：1
> 
> 时间：2013-01-30T22:59:17.750
> 
> 标签：scheme, racket, mit-scheme

给定一个 : 形式的表达式`(* 3 (+ x y))`，我如何评估该表达式以便将其放入表单中`(+ (* 3 x) (* 3 y))`？（注意：在一般情况下，3 是任何常数，“x”或“y”可以是单个变量或其他 s 表达式（例如`(+ 2 x)`）的项。

如何编写一个 lambda 表达式，递归地评估原始表达式中的项目（原子？）并确定它们是常量还是项？如果是术语，则需要再次递归评估以确定该术语列表中每个项目的类型。

同样，对我来说，问题的症结在于定义的递归“内核”。

我显然需要一个基本案例来确定一旦我到达表达式最深处的最后一个单个原子。然后递归地“备份”工作，根据规则以适当的形式构建表达式。

来自 Java / C++ 背景，我很难理解如何在 Scheme 中从语法上做到这一点。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-31T00:43:07.480

让我们从最初的问题快速绕道一些稍微相关的问题。假设您得到以下内容：您想编写一个评估器，它接受“字符串构建”表达式，`(* 3 "hello")`并将其“评估”为“hellohellohello”。我们想做的其他例子包括

```
(+ "rock" (+ (* 5 "p") "aper"))     ==> "rockpppppaper"
(* 3 (+ "scis" "sors"))             ==> "scissorsscissorsscissors" 
```

为了解决这样的问题，我们需要准确地指定输入的形状。本质上，我们想要描述一种数据类型。我们会说我们的输入将是“字符串表达式”。让我们`str-exprs`简称他们。然后让我们定义什么是`str-expr`.

A`str-expr`是：

1.  `<string>`
2.  `(+ <str-expr> <str-expr>)`
3.  `(* <number> <str-expr>)`

通过这种表示法，我们试图说`str-expr`s 都适合这三种形状中的一种。

一旦我们对数据的形状有了很好的了解，我们就有更好的指南来编写处理函数`str-exprs`：它们必须对这三个备选方案进行案例分析！

```
;; A str-expr is either:
;;      a plain string, or
;;     (+ str-expr str-expr), or
;;     (* number str-expr)

;; We want to write a definition to "evaluate" such string-expressions.

;; evaluate: str-expr -> string
(define (evaluate expr)
  (cond
    [(string? expr)
     ...]
    [(eq? (first expr) '+)
     ...]
    [(eq? (first expr) '*)
     ...])) 
```

'...' 是我们将要填写的内容。

实际上，我们知道如何填写更多关于 '...' 的内容：我们知道在第二种和第三种情况下，内部部分本身就是 str-exprs。这些是可能发生重复的主要地点：由于我们的数据是根据自身描述的，处理它们的程序也可能需要引用它们自己。简而言之，处理`str-expr`s 的程序几乎肯定会遵循这种形式：

```
(define (evaluate expr)
  (cond
    [(string? expr)
     ... expr 
     ...]
    [(eq? (first expr) '+)
     ... (evaluate (second expr))
     ... (evaluate (third expr))
     ...]
    [(eq? (first expr) '*)
     ... (second expr) 
     ... (evaluate (third expr))
     ...])) 
```

这一切甚至都没有做任何实际工作：我们可以完全弄清楚这部分，因为这就是数据的形状告诉我们的。填写 '...' 的其余部分以使这一切顺利进行实际上并不算太糟糕，尤其是当我们还考虑我们已经编写的测试用例时。（[代码](https://gist.github.com/4678794)）

正是这种标准的数据分析/案例分析是您问题的核心，它是[HTDP](http://www.ccs.neu.edu/home/matthias/HtDP2e/)等课程广泛涵盖的内容。这不是特定于 Scheme 或 Racket 的：您会在 Java 中进行相同类型的数据分析，并且您会在许多其他地方看到相同类型的方法。在 Java 中，用于案例分析的底层机制可能会有所不同，也许是动态调度，但核心思想都是一样的。您需要描述数据。一旦有了数据定义，就可以使用它来帮助您勾勒出处理该数据所需的代码。使用测试用例来确定如何填写草图。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T23:28:30.593

你需要分解你的问题。我将从遵循 HtDP (www.htdp.org) 方法开始。你的输入是什么？你能准确地指定它们吗？在这种情况下，这些输入将是自引用的。

然后，指定输出形式。实际上，您上面的文字对此有些模糊：我想我知道您的输出形式是什么样的，但我并不完全确定。

接下来，编写一组测试。这些应该基于您输入术语的结构；从最简单的开始，然后从那里向上工作。

一旦你有一套好的测试，实现这个功能应该很简单。如果您遇到困难，我很乐意提供帮助！

# css - CSS 仅倾斜容器，而不是内容

> ID：14615492
> 
> 赞同：12
> 
> 时间：2013-01-30T22:59:34.600
> 
> 标签：css, transform, skew

我无法弄清楚如何使以下布局起作用。我不仅限于纯 CSS——我知道 JS 将参与到跨浏览器中——但 CSS 解决方案会很棒。这是我想要实现的目标：

![在此处输入图像描述](../Images/e90c3680b8fb91543dd3085f1f7958bc.png)

我试过下面的代码，倾斜容器，然后向相反的方向倾斜图像，但它只给了我一个方形图像。Chrome 检查器向我显示容器已正确倾斜，但将图像向后倾斜使其再次呈方形。添加溢出：隐藏到容器类型的作品，但角度的边缘变得锯齿状。这是我尝试过的：

[http://codepen.io/anon/pen/ubrFz](http://codepen.io/anon/pen/ubrFz)

请帮忙！:)

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-30T23:04:58.763

需要调整容器的位置和大小，以便您可以裁剪它，并应用`backface-visibility`规则：

```
.skew {
    -webkit-backface-visibility : hidden; /* the magic ingredient */
    -webkit-transform           : skew(16deg, 0);
    overflow                    : hidden;
    width                       : 300px;
    height                      : 260px;
    position                    : relative;
    left                        : 50px;
    border                      : 1px solid #666
}

.skew img {
    -webkit-transform : skew(-16deg, 0);
    position          : relative;
    left              : -40px;
} 
```

[http://codepen.io/anon/pen/HLtlG](http://codepen.io/anon/pen/HLtlG) <- 之前（别名）

[http://codepen.io/anon/pen/wnlpt](http://codepen.io/anon/pen/wnlpt) <- 之后（抗锯齿）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T23:24:17.737

代替CSS方案，也可以使用canvas和一些JS来实现效果；并将一系列裁剪的图像合成到该画布上。canvas 方法的好处是您可能会在作物上获得更平滑的边缘，并且可能会得到更好的支持。

HTML 中的画布元素；

```
<canvas id="mycanvas"></canvas> 
```

和JS；

```
var img1 = new Image();
var img2 = new Image();
var img3 = new Image();
img1.src = '../my/image1.jpg';
img2.src = '../my/image2.jpg';
img3.src = '../my/image3.jpg';

var can = document.getElementById("mycanvas");
var ctx = can.getContext('2d');

var imgs = [img1, img2, img3]; //array of JS image objects that you've set up earlier

can.width = 1000;
can.height = 100;

for (var i=0; i < imgs.length; i++) {
    ctx.beginPath();
    ctx.moveTo(0, 0);
    ctx.lineTo(800 - (200 * i), 0);
    ctx.lineTo(900 - (200 * i), 100); 
    ctx.lineTo(0, 100);
    ctx.closePath();
    ctx.clip();

    ctx.drawImage(imgs[i], 0, 0);
} 
```

代码就在我的脑海中——我还没有测试过。但基本上 - 假设您有一个最大为 1000 像素宽和 100 像素高的画布。上面发生的情况是，您在画布上设置了一个从点 (800,0) 到 (900,100) 的对角线的剪切区域，然后将图像绘制到该剪切区域...然后设置一个 200 像素的新剪切路径每个图像都更短（注意 '200 * i' 位）。显然，数学需要针对任意数量的图像进行调整等等......但这个想法就在那里。

可能比纯 CSS 有点棘手 - 但正如我所说 - 可能更好地支持跨浏览器（尽管有 IE ......）。

**编辑**
做了一个快速测试 - 看起来你需要设置画布尺寸 - 并且显然还要等待所有图像正确加载，然后才能在画布上合成它们。

# javascript - AngularJS - 过滤器空结果的占位符

> ID：14615495
> 
> 赞同：95
> 
> 时间：2013-01-30T22:59:43.327
> 
> 标签：javascript, html, angularjs

我想要一个占位符，例如`<No result>`当过滤结果返回空时。有人可以帮忙吗？我什至不知道从哪里开始...

**HTML**：

```
<div ng-controller="Ctrl">
<h1>My Foo</h1>
<ul>
    <li ng-repeat="foo in foos">
        <a href="#" ng-click="setBarFilter(foo.name)">{{foo.name}}</a>
    </li>
</ul>
<br />
<h1>My Bar</h1>
<ul>
    <li ng-repeat="bar in bars | filter:barFilter">{{bar.name}}</li>
</ul>

</div> 
```

**JS**：

```
function Ctrl($scope) {

  $scope.foos = [{
    name: 'Foo 1'
  },{
    name: 'Foo 2'
  },{
    name: 'Foo 3'
  }];

  $scope.bars = [{
    name: 'Bar 1',
    foo: 'Foo 1'
  },{
    name: 'Bar 2',
    foo: 'Foo 2'
  }];

  $scope.setBarFilter = function(foo_name) {
    $scope.barFilter = {};
    $scope.barFilter.foo = foo_name;
  }
} 
```

**jsFiddle**：http: [//jsfiddle.net/adrn/PEumV/1/](http://jsfiddle.net/adrn/PEumV/1/)

谢谢！

* * *

## 回答 #1

> 赞同：252
> 
> 时间：2013-02-01T23:12:23.780

只需要您指定一次过滤器的方法的调整：

```
 <li ng-repeat="bar in filteredBars = (bars | filter:barFilter)">{{bar.name}}</li>
</ul>
<p ng-hide="filteredBars.length">Nothing here!</p> 
```

[小提琴](http://jsfiddle.net/mrajcok/k4u5z/)

* * *

## 回答 #2

> 赞同：37
> 
> 时间：2013-01-31T00:22:25.530

这是使用 ng-show 的技巧

**HTML：**

```
<div ng-controller="Ctrl">
<h1>My Foo</h1>
<ul>
    <li ng-repeat="foo in foos">
        <a href="#" ng-click="setBarFilter(foo.name)">{{foo.name}}</a>
    </li>
</ul>
<br />
<h1>My Bar</h1>
<ul>
    <li ng-repeat="bar in bars | filter:barFilter">{{bar.name}}</li>
</ul>
<p ng-show="(bars | filter:barFilter).length == 0">Nothing here!</p>

</div> 
```

**jsFiddle：http:** [//jsfiddle.net/adrn/PEumV/2/](http://jsfiddle.net/adrn/PEumV/2/)

* * *

## 回答 #3

> 赞同：22
> 
> 时间：2016-07-07T02:55:09.430

取自[这份](https://docs.angularjs.org/api/ng/directive/ngRepeat#animations)官方文件，他们是这样做的：

```
ng-repeat="friend in friends | filter:q as results" 
```

然后将结果用作数组

```
<li class="animate-repeat" ng-if="results.length == 0">
  <strong>No results found...</strong>
</li> 
```

完整片段：

```
<div ng-controller="repeatController">
I have {{friends.length}} friends. They are:
<input type="search" ng-model="q" placeholder="filter friends..." aria-label="filter friends" />

<ul class="example-animate-container">
    <li class="animate-repeat" ng-repeat="friend in friends | filter:q as results">
      [{{$index + 1}}] {{friend.name}} who is {{friend.age}} years old.
    </li>
    <li class="animate-repeat" ng-if="results.length == 0">
      <strong>No results found...</strong>
    </li>
  </ul>
</div> 
```

# java - Hamcrest.Matchers：JSON 嵌套数组

> ID：14615496
> 
> 赞同：1
> 
> 时间：2013-01-30T22:59:45.543
> 
> 标签：java, json, testng, hamcrest, rest-assured

我有一个数组如下： [[Disable,Enable,No,Yes][Joe,Bill,Doug,Kevin],[Red,Blue,Pink,Magenta],[One,Two,Three,Four]];

我需要一个 hamcrest 匹配器，该匹配器将与其中包含名称/值对数据的 excel 文件匹配。我尝试过：hasItem、hasItems、hasItemInArray。

我查看了以下链接：

[Hamcrest 链接](http://code.google.com/p/hamcrest/wiki/Tutorial)

如果我遗漏任何有用的信息，请告诉我。

```
private String[][] getExcelSheetData(String excelFile)
        throws NoExcelValidationDataFoundException {
    String[][] excelValidationData = null;

    try {
        ExcelDAOFactory excelDAOFactory = (ExcelDAOFactory) DAOFactory
                .getFactory(DAOFactory.EXCEL);
        excelDAOFactory.setExcelFile(excelFile);
        excelValidationData = excelDAOFactory.fetchData();
        TAFLogger.logTAFActivity("Finished retrieving data from "
                + excelFile);
    } catch (InvalidFormatException | IOException | UnsupportedDAOException e) {
        TAFLogger.logTAFActivity(
                "Error retrieving data from ExcelDAOFactory: "
                        + e.getMessage(), logger.WARN);
        throw new NoExcelValidationDataFoundException(
                "Could not retireve validation " + "data from " + excelFile
                        + e.getMessage());
    }
    return excelValidationData;
} 
```

尝试与 hamcrest 匹配的代码，我可以看到它没有任何“嵌套数组”：

```
 requestBuilder = new RequestSpecBuilder();
    requestBuilder.addCookie().setContentType(ContentType.JSON);
    requestSpecification = requestBuilder.build();

    responseBuilder = new ResponseSpecBuilder();
    responseBuilder.expectStatusCode(Integer.parseInt(xmlTest
        .getParameter("http-status-code-200")));
    //responseBuilder.expectContentType(ContentType.JSON);
    responseSpecification = responseBuilder.build();

    try {
        validationData = getExcelSheetData(excelFile);
    } catch (NoExcelValidationDataFoundException e) {
        Logger.logActivity("Could not retrieve Excel sheet data: "
                + e.getMessage(), Logger.ERROR);
        Assert.fail("Could not retrieve Excel sheet data: "
                + e.getMessage());

  for (int i = 0; i < validationData.length; i++) {
  responseBuilder.expectBody(validationData[i][0],
hasItemInArray(validationData[i][1]));

 responseSpecification = responseBuilder.build();

    try {
        //Response res = given().getValue()).get("data/roles");

        String data = given().spec(requestSpecification).
.expect().spec(responseSpecification).when().get("data/roles").asString();
        System.out.println(data);

        logger.logTestActivity("Completed testing JSON payload using Excel    file");
    } catch (AssertionError e) {
        logger.logTestActivity(
                "Error testing JSON payload: " + e.getMessage(),
                logger.ERROR);
        throw new Exception(e); 
```

与“hasIteminArray”的最后一个标准是我试图利用 Hamcrest 对嵌套数组的 JSON 进行断言。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T07:00:22.893

AFAIK Hamcrest 中没有包含 Excel 集成。[simple-excel](http://baddotrobot.com/blog/2012/09/14/diff-excel-with-java-and-hamcrest/)提供对生成的 excel 文件的验证，并为此带来了自己的 Hamcrest 匹配器。

否则，您很可能不得不使用[Apache POI](http://poi.apache.org/)或[JExcel](http://jexcelapi.sourceforge.net/)滚动您自己的匹配项。

# c# - 访问维度的上、下、后缀和前缀属性时出现 AccessViolationException

> ID：14615497
> 
> 赞同：1
> 
> 时间：2013-01-30T22:59:47.073
> 
> 标签：c#, revit, revit-api

在 Revit 2013 中，我正在制作将尺寸从一个绘图视图复制到另一个绘图视图的工具。我已经可以正确创建一个新版本的维度，包括`Curve`、`DimensionType`和 ，`References`但是我在使用属性`Above`、`Below`、`Prefix`和时遇到了问题`Suffix`。如果其中至少一个具有价值，它们就可以很好地复制。但是，如果它们都没有值，那么`AccessViolationException`当我尝试访问它们时它会抛出一个。我试图捕获该异常，但它冒泡并导致 Revit 崩溃（我假设它是由失败的本机代码引起的）。

当我在不触发此复制的情况下进行复制时，如何检查这些属性是否有任何价值`AccessViolationException`？

[Autodesk 讨论组问题](http://forums.autodesk.com/t5/Autodesk-Revit-API/AccessViolationException-on-Above-Below-Prefix-and-Suffix-for/m-p/3765595)

该类`DimensionData`是我自己的，用于存储维度信息，以便可用于在单独的文档中创建维度。

```
private IEnumerable<DimensionData> GetDimensionDataSet(Document document, 
  View view)
{
  if (document == null)
    throw new ArgumentNullException("document");

  if (view == null)
    throw new ArgumentNullException("view");

  List<DimensionData> dimensionDataSet = new List<DimensionData>();

  FilteredElementCollector dimensionCollector = 
    new FilteredElementCollector(document, view.Id);

  dimensionCollector.OfClass(typeof(Dimension));

  foreach (Dimension oldDimension in dimensionCollector)
  {
    Line oldDimensionLine = (Line)oldDimension.Curve;
    string dimensionTypeName = oldDimension.DimensionType.Name;

    List<ElementId> oldReferences = new List<ElementId>();

    foreach (Reference oldReference in oldDimension.References)
      oldReferences.Add(oldReference.ElementId);

    DimensionData dimensionData;

    try
    {
      string prefix = oldDimension.Prefix;

      dimensionData = new DimensionData(oldDimensionLine,
                                        oldReferences,
                                        dimensionTypeName,
                                        prefix,
                                        oldDimension.Suffix,
                                        oldDimension.Above,
                                        oldDimension.Below);
    }
    catch (AccessViolationException)
    {
      dimensionData = new DimensionData(oldDimensionLine, 
        oldReferences, dimensionTypeName);
    }

    dimensionDataSet.Add(dimensionData);
  }

  return dimensionDataSet;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-07-08T16:48:23.803

关于交易：据我所知，仅当您进行任何类型的更改（修改、删除、添加）时，您才需要在交易中。如果您所做的只是收集维度信息，则不需要事务，但是当您使用该信息在另一个文档中创建新维度时，该代码必须在事务中。我有许多正在开发的程序，它们还没有修改文档，只是收集了参数设置并将它们发布到 TaskDialog.Show()。这些程序运行良好，我在您的代码中没有看到任何实际修改您的模型的内容，因此这似乎不是您的问题。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-31T06:17:03.887

好像我有问题。您可以将问题发布到 ADN 支持吗？

我可以建议的解决方案是使用`Parameters`而`Dimension element`不是`Dimension`类属性。

例如，您可以通过以下代码获取`Suffix`and`Prefix`

```
var suffixParameter =
    oldDimension.get_Parameter(BuiltInParameter.SPOT_SLOPE_SUFFIX);
string suffix = null;
if (suffixParameter != null)
{
    suffix = suffixParameter.AsString();
}

var prefixParameter =
    oldDimension.get_Parameter(BuiltInParameter.SPOT_SLOPE_PREFIX);
string prefix = null;
if (prefixParameter != null)
{
    prefix = prefixParameter.AsString();
} 
```

不幸的是，我没有告诉你如何通过参数获取`Above`和`Below`属性，因为我没有要测试的项目。[但是您可以使用BuiltInParameter Checker](http://thebuildingcoder.typepad.com/blog/2013/01/built-in-parameter-enumeration-duplicates-and-bipchecker-update.html)轻松确定参数

希望能帮助到你。

# video - 在 xhtml 中添加可在所有平台上查看的视频

> ID：14615504
> 
> 赞同：1
> 
> 时间：2013-01-30T23:00:23.473
> 
> 标签：video, xhtml

我如何将视频添加到 xhtml 中，从服务器中提取视频的内容，而不是像 youtube，

这有效吗？还是我最好使用普通的 html 方法？

```
<!-- First, try the applet -->
<object
    src="http://www.example.com/applets/classes/TheEarth.class"
    srctype="application/x-java-applet">
      <!-- Else, try the video -->
      <object
          src="TheEarth.mpeg"
          srctype="video/mpeg"
          xml:base="http://www.example.com/videos/">
            <!-- Else, try the image -->
            <object
                src="TheEarth.png"
                srctype="image/png"
                xml:base="http://www.example.com/images/">
                <!-- Else process the alternate text -->
                The <strong>Earth</strong> as seen from space.
            </object>
      </object>
</object> 
```

还有什么是让它在所有平台上工作的最佳解决方案，比如安卓、ios、windows、chrome等

# java - 从编译器中提取源代码元数据

> ID：14615516
> 
> 赞同：0
> 
> 时间：2013-01-30T23:01:47.450
> 
> 标签：java, compiler-construction, metadata, javac

我正在尝试用 Java 编写一个简单的代码分析器/元数据提取器。一开始，我要做的就是提取和区分实例和本地变量、方法及其签名，并将本地变量与它们所属的方法相关联，这与 Eclipse 在其大纲视图中显示它们的方式大致相同。当然，这可以通过简单的文本解析来完成，但这显然是一种极其繁琐且繁琐的方法，绝对是在重新发明轮子。由于编译器已经解析了源代码，我想利用它的功能以一种干净、简单、优雅的方式提取元数据。

知道使用哪个 API 来完成此任务吗？任何人都可以指向我可以用来执行此操作的 Eclipse 中的 API（因为我确信它存在）？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T23:48:43.020

试试看： http: [//www.steike.com/code/java-reverse-engineering/](http://www.steike.com/code/java-reverse-engineering/)

您可以使用反射，这有点棘手

```
User user = new User();
Field[] fields = user.getClass().getDeclaredFields(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T03:04:53.513

如果您使用的是 javac，您应该能够通过 Compiler API、Compiler Tree API 和 Language Model API 的组合来完成所有您想做的事情。请参阅[http://docs.oracle.com/javase/7/docs/technotes/guides/javac/](http://docs.oracle.com/javase/7/docs/technotes/guides/javac/)

使用编译器 API 调用 javac。使用 Compiler Tree API 检查 AST 使用 Language Model API 查看树的语义。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-31T02:22:11.723

Eclipse [ASTParser](http://help.eclipse.org/juno/topic/org.eclipse.jdt.doc.isv/reference/api/org/eclipse/jdt/core/dom/ASTParser.html)似乎是一个不错的起点。

# php - 通过两个不同服务器上的 getJSON 调用在 PHP 中设置 cookie

> ID：14615522
> 
> 赞同：0
> 
> 时间：2013-01-30T23:02:26.410
> 
> 标签：php, jquery, cookies, setcookie

我有两台服务器，“www.domain.local”和“api.domain.local”。我想在从 www 调用的 api 服务器上的脚本中设置一个 cookie。Chrome 不允许我这样做（还没有尝试其他浏览器）

我的 PHP 代码：

```
header("Access-Control-Allow-Origin:*");
echo json_encode(array("cookie"=>print_r($_COOKIE,true)));
setcookie("test","ok",time()+24000*3600,"/",".domain.local"); 
```

在我的 jQuery 中：

```
$.getJSON("http://api.domain.local/test.php",{
  command:"setcookie"
},function(fb){
  alert(fb.cookie);
}); 
```

PHP 首先返回它拥有的 cookie，第一次运行 this 应该是零，它是。在 PHP 脚本的标题中，我看到以下内容：

> 设置 Cookie:test=ok; 到期=格林威治标准时间 2015 年 10 月 27 日星期二 22:52:52；路径=/; domain=.domain.local X-Powered-By:PHP/5.3.14

这是我所期望的。但是cookie没有设置。当我再次运行 jQuery 时，我希望设置 cookie（使用 $_COOKIE 的 print_r 获得警报），但我什么也没得到。我在 Chrome 调试部分的网络资源的“cookies”选项卡中注意到的一件事是到期时间设置为“无效日期”。如果我直接运行 PHP 脚本，我没有这个问题。

是否可以在从 jQuery 调用的 PHP 脚本中设置 cookie，如果可以，如何设置？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T00:22:28.363

让我们看看，在与页面加载的域不同的域上设置一个 cookie，并在 PHP 中从 jQuery

有人可能会发布你应该如何做。我可能只是作弊。

**www.domain.local/test.html**包括

```
$.getScript("http://api.domain.local/test.php?dowhat=setcookie"); 
```

**api.domain.local/test.php**是

```
<?php
switch ($_GET['dowhat']){
    case 'showcookie':
        print_r($_COOKIE);
        break;
    case 'setcookie':
        setcookie("test",date('Y m D H:i:s'),time()+24000*3600,"/");
        break;
}
header("Content-type: application/javascript"); // may as well, it expects this
die; 
```

现在去[http://api.domain.local/test.php?dowhat=showcookie](http://api.domain.local/test.php?dowhat=showcookie)

```
Array ([test] => 2013 01 Thu 00:20:52 ) 
```

达达！

PS 如果您需要设置它而没有顽皮的人也可以作弊，我不建议您这样做。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T23:18:37.483

您的代码似乎有问题。在第一行你忘了用 . 关闭你的字符串`"`。

# asp.net - 在 ASP.NET MVC 中自定义验证 CKEditor (RTE)

> ID：14615523
> 
> 赞同：1
> 
> 时间：2013-01-30T23:02:27.317
> 
> 标签：asp.net, asp.net-mvc, validation, ckeditor, rich-text-editor

我正在使用 ASP.NET MVC 和 CKEditor (Basic) 来获取输入（几乎完全像这个堆栈溢出 RTE。）用户仅限于粗体、斜体、链接。

我假设我需要验证这个服务器端，以防有人向我的控制器发出带有任何所需 HTML 的 CURL 请求。（IE 因此它们不受客户端验证的限制）。

所以我需要允许，粗体，斜体，链接标签，列表，但绝对没有别的，这怎么能实现？我将在我的视图模型上有一个自定义验证器，但是构建这个自定义验证器的最佳方式是什么？寻找什么等？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T13:07:01.620

这可以通过正则表达式和负前瞻来实现。

类似的东西`<(?!br/|br /|a|/a|strong|/strong|b|/b|i|/i|ul|/ul|li|/li>).+?>`会匹配除`<br />`, `<a></a>`, `<strong></strong>`, `<b></b>`, `<i></i>`, `<ul></ul>`, 和之外的所有标签`<li></li>`。

然后你可以用一个空字符串替换匹配的出现。

例如这个输入（在 regextester.com 上测试）：

```
test <a href="http://www.test.com">test link</a>
Some <strong>text in bold</strong> and <b>another one</b> but also something
in <i>italic</i>
<ul>
    <li>Now</li>
    <li>a list</li>
</ul>
<table>
    <tr>
         <td>And a table</td>
    </tr>
</table>
<br />
<hr /> 
```

会成为 ：

```
test <a href="http://www.test.com">test link</a>
Some <strong>text in bold</strong> and <b>another one</b> but also something 
in <i>italic</i>
<ul>
    <li>Now</li>
    <li>a list</li>
</ul>

And a table

<br /> 
```

# visual-studio-2012 - 在 VSPackage 中设置值后如何刷新 Visual Studio 设置

> ID：14615524
> 
> 赞同：4
> 
> 时间：2013-01-30T23:02:33.297
> 
> 标签：visual-studio-2012, vspackage

在 Visual Studio 扩展中，我定义了一个 VSPackage，其中包含许多命令。在其中一个命令的处理程序中，我使用以下代码设置了用户设置：

```
SettingsManager settingsManager = new ShellSettingsManager(this);
WritableSettingsStore userSettingsStore = settingsManager.GetWritableSettingsStore(SettingsScope.UserSettings);

userSettingsStore.SetBoolean("Text Editor", "Visible Whitespace", true); 
```

这成功地设置了注册表中的值（在`HKEY_CURRENT_USER\Software\Microsoft\VisualStudio\11.0Exp\Text Editor`隔离外壳的情况下），但编辑器不会自动收到更改通知，即空白保持隐藏状态。编辑 > 高级 > 显示空白处的菜单选项也保持关闭状态。重新启动 Visual Studio 会获取更改。

如何告诉 Visual Studio 刷新其用户设置的状态，以便其他所有内容都收到更改通知？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-06-22T12:14:03.237

`ITextView`当打开a 时，我得到了正确的命令。这很重要，因为如果`ITextView`它没有打开，在我看来命令只是失败了。更快的方法是创建一个 Editor Margin 扩展项目（必须安装 VS SDK）。在`EditorMargin`课堂上这样做：

```
 [Import]
    private SVsServiceProvider _ServiceProvider;

    private DTE2 _DTE2;

    public EditorMargin1(IWpfTextView textView)
    {
        // [...]

        _DTE2 = (DTE2)_ServiceProvider.GetService(typeof(DTE));

        textView.GotAggregateFocus += new EventHandler(textView_GotAggregateFocus);
    }

    void textView_GotAggregateFocus(object sender, EventArgs e)
    {
        _DTE2.Commands.Raise(VSConstants.CMDSETID.StandardCommandSet2K_string,
            (int)VSConstants.VSStd2KCmdID.TOGGLEVISSPACE, null, null);

        //  The following is probably the same
        // _DET2.ExecuteCommand("Edit.ViewWhiteSpace");
    } 
```

注意：`IWpfTextViewCreationListener`如果您不想创建保证金，应该足够了。了解 MEF 扩展以使用它。

现在，这个设置可能是在 VS2010 之前的 Tools -> Options 页面中控制的。该页面的其他选项可以通过 DTE 自动化进行控制：

```
_DTE2.Properties["TextEditor", "General"].Item("DetectUTF8WithoutSignature").Value = true;
_DTE2.Properties["Environment", "Documents"].Item("CheckLineEndingsOnLoad").Value = true; 
```

`ShellSettingsManager`只是关于写入注册表，没有设置刷新功能（如果存在，它无论如何都不会有效，因为它必须重新加载整个设置集合）。以前的那些是我正在寻找的。解决你的问题是一个奖励:)

# mysql - MYSQL GROUP_CONCAT CONCAT_WS 并处理 NULL 值

> ID：14615525
> 
> 赞同：0
> 
> 时间：2013-01-30T23:02:34.080
> 
> 标签：mysql, null, case, group-concat, concat-ws

如何处理具有 NULL 值的行，特别是从这里开始（这只是值可以为 NULL 的地方，因为产品没有任何属性）：

```
GROUP_CONCAT(DISTINCT (CONCAT_WS (': ', GroupAttrLang.`name`, AttrLang.`name`)) ORDER BY AttrLang.`name` ASC 
```

这是我的 BIG 查询的一部分：

```
SELECT
TProduct.`reference` AS ProdReference,
ProdLang.`name` AS ProductName,
ProdLang.`description` AS ProdDesc,
ROUND((TProduct.`price`*1.23)/4.1989,2) AS ProductPrice,

CASE 
    WHEN COUNT(ProdAttr.`id_product`) = 0 THEN 1 
    ELSE (GROUP_CONCAT(DISTINCT (CONCAT_WS (': ', GroupAttrLang.`name`, AttrLang.`name`)) ORDER BY AttrLang.`name` ASC)) 
END AS ProdAttributes,

/*IF ((COUNT(ProdAttr.`id_product`) > 0), GROUP_CONCAT(DISTINCT (CONCAT_WS (': ', GroupAttrLang.`name`, AttrLang.`name`)) ORDER BY AttrLang.`name` ASC) , 'n/a' ) AS ProdAttributes,*/

GROUP_CONCAT(DISTINCT (CONCAT_WS (' - ', ParLang.`name`, CatLang.`name` ))) AS ProdFit 
    FROM `ps_product` AS TProduct
        LEFT JOIN `ps_category_product` AS CatProd ON CatProd.`id_product` = TProduct.`id_product`

        LEFT JOIN `ps_category` AS Cat ON Cat.`id_category` = CatProd.`id_category`
        LEFT JOIN `ps_category_lang` AS ParLang ON Cat.`id_parent` = ParLang.`id_category`
        LEFT JOIN `ps_product_lang` AS ProdLang ON ProdLang.`id_product` = TProduct.`id_product`
        LEFT JOIN `ps_category_lang` AS CatLang ON CatLang.`id_category` = CatProd.`id_category`
        LEFT JOIN `ps_product_attribute` AS ProdAttr ON ProdAttr.`id_product` = TProduct.`id_product`
        LEFT JOIN `ps_product_attribute_combination` AS ProdAttrComb ON ProdAttrComb.`id_product_attribute` = ProdAttr.`id_product_attribute`
        LEFT JOIN `ps_attribute` AS TAttr ON TAttr.`id_attribute` = ProdAttrComb.`id_attribute`
        LEFT JOIN `ps_attribute_group_lang` AS GroupAttrLang ON GroupAttrLang.`id_attribute_group` = TAttr.`id_attribute_group`
        LEFT JOIN `ps_attribute_lang` AS AttrLang ON AttrLang.`id_attribute` = TAttr.`id_attribute`
    WHERE 
        Cat.`id_parent` != 1 AND 
        ProdLang.`id_lang`=1 AND
        CatLang.`id_lang` = 1 AND
        GroupAttrLang.`id_lang` = 1 AND
        AttrLang.`id_lang` = 1
             GROUP BY TProduct.`reference` ORDER BY TProduct.`reference` ASC; 
```

除了处理上面列表中的 NULL 值之外，一切正常。我试过 **IF**语句结果是一样的，查询跳过具有 NULL 值的行。我尝试进行一个查询，只打印一件事：

```
SELECT 
CASE 
    WHEN COUNT(ProdAttr.`id_product`) > 0 THEN COUNT(ProdAttr.`id_product`)
    ELSE 'n/a'
END AS ProdAttrList
FROM `ps_product` AS TProduct 
    LEFT JOIN `ps_product_attribute` AS ProdAttr ON ProdAttr.`id_product`=TProduct.`id_product` 
        GROUP BY TProduct.`reference`; 
```

并且工作完美，请参见图像[PrtSc。最后上市的](http://forum.4programmers.net/Bazy_danych/211468-wymuszenie_wyswietlenia_wiersza_pomimo_concat_ws_null?mode=download&id=3548)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T12:06:27.640

必须更改**WHERE**语句：

```
...WHERE
GroupAttrLang.`id_lang` = 1 AND
AttrLang.`id_lang` = 1... 
```

对此：

```
LEFT JOIN `ps_attribute_group_lang` AS GroupAttrLang ON GroupAttrLang.`id_attribute_group` = TAttr.`id_attribute_group` AND GroupAttrLang.`id_lang` = 1
LEFT JOIN `ps_attribute_lang` AS AttrLang ON AttrLang.`id_attribute` = TAttr.`id_attribute` AND AttrLang.`id_lang` = 1 
```

问题已解决，您现在可以从您的 prestashop 中导出产品目录。

# angularjs - 自定义指令（如 ng-repeat）

> ID：14615534
> 
> 赞同：8
> 
> 时间：2013-01-30T23:03:17.933
> 
> 标签：angularjs, ng-repeat

我尝试了许多不同的方法来解决`ng-repeat`. 包括此处描述的内容：[如何“取消观看”表达式](https://stackoverflow.com/questions/13651578/how-to-unwatch-an-expression)

我需要在页面上有一大组行，最多 1000 行。每一行都包含相当多的东西。现在在我看来，它会很慢`ng-repeat`，我想我必须构建自己的自定义`ng-repeat`或者我必须构建一个指令来构建表格中的每一行......我不知道如何做任何一个。你们能帮帮我吗？你能告诉我一些例子吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-02T03:06:48.210

这是用 <dt>s 和 <dd>s 填充 <dl> 的示例...

## 步骤 01 - 创建一个 widge.product.details.js

// 绑定到 $scope.details = [] //数组对象

```
angular.module('widget.product.details',[])
  .directive('productDetails',function(){
   return {
    template:'<dl class="dl-horizontal"></dl>',
    replace:true,
    restrict:'E',
    compile : function compile(tElement, tAttrs, transclude) {
     return {
      post: createProductDetails
     }
    }
   }
  });

var createProductDetails = function (scope, iElement, iAttrs, controller) {
    scope.$watch('details', function(newVal, oldVal) {
    angular.forEach(newVal, function(v,k){
        iElement.append( angular.element('<dt>'+v.dt+'</dt><dd>'+v.dd+'</dd>') );
        });
    });
} 
```

## 步骤 02 - 创建您的 html

```
<div class="span7" ng-controller="ProductInfoCtrl">
 <product-details></product-details>
</div> 
```

## 步骤 03 - 创建一个 app.product.js

```
function ProductInfoCtrl($scope) {
 $scope.details = [
                   {dt:'condition',dd:'brand new'},
                   {dt:'year bought',dd:'3 years ago'},
                   ]
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-10-12T09:58:49.437

```
angular.module('setRepeat',[]).directive('setRepeat', function () {

  return {
    transclude: 'element',
    priority: 1000,
    compile: compileFun
  };

  function compileFun(element, attrs, linker) {
      var expression = attrs.setRepeat.split(' in ');
      expression = {
        child : expression[0],
        property : expression[1]
      };

      return {
        post: repeat
      };

      function repeat(scope, iele, iattrs /*, attr*/) {
        var template = element[0].outerHTML;
        var data = scope.$eval(expression.property);
        addElements(data,scope,iele);

        return;

        function makeNewScope (index, expression, value, scope, collection) {
          var childScope = scope.$new();
          childScope[expression] = value;
          childScope.$index = index;
          childScope.$first = (index === 0);
          childScope.$last = (index === (collection.length - 1));
          childScope.$middle = !(childScope.$first || childScope.$last);

          /**
          *
          * uncomment this if you want your children to keep listening for changes
          *
          **/

          //childScope.$watch(function updateChildScopeItem(){
            //childScope[expression] = value;
          //});
          return childScope;
        }

        function addElements (collection, scope, insPoint) {
          var frag = document.createDocumentFragment();
          var newElements = [], element, idx, childScope;

          angular.forEach(data, function(v,i){
            childScope = makeNewScope(i,expression.child,v,scope,collection);
            element = linker(childScope, angular.noop);
            newElements.push(element);
            frag.appendChild(element[0]);
          });

          insPoint.after(frag);
          return newElements;
        }
      }
  }

}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-12-25T13:59:56.543

**angularJS 中自定义 ngReapeat 指令的简单代码：**

```
 <!DOCTYPE html>
   <html>
    <head>
       <script type='text/javascript' src='angular.min.js'></script>    
    </head>
    <body ng-app="customNgReapeat">
      <div ng-controller='ProductInfoCtrl'>
        <div custom-repeat></div>
      </div>    
    </body>
  </html> 
```

**JS代码**

```
 var csREapeat = angular.module('customNgReapeat', [])
      .directive('customRepeat', function() {
        return {
          restrict: 'A',
          link: function(scope, iElement, iAttrs, controller) {
            angular.forEach(scope.details, function(v, k) {
              iElement.append(angular.element('<div>' + v.name + '</div>             <div>' + v.address + '</div>'));
            });
          }
        };
      })

 function ProductInfoCtrl($scope) {
   $scope.details = [
      {name: 'Nidhi', address: 'India-Gurgaon'},
      {name: 'Khushi', address: 'India-Ghazipur'}
   ];
} 
```

# matlab - R 到 Matlab：外积 (%o%) 和 lower.tri 函数

> ID：14615535
> 
> 赞同：1
> 
> 时间：2013-01-30T23:03:19.880
> 
> 标签：matlab, for-loop

列表 (1,2,3,4,5) 可以有 5*4/2 = 10 种组合。如果我想进行成对乘法，我在 R 中执行如下操作：

```
x <- 1:5
mx <- x%o%x
mx
     [,1] [,2] [,3] [,4] [,5]
[1,]    1    2    3    4    5
[2,]    2    4    6    8   10
[3,]    3    6    9   12   15
[4,]    4    8   12   16   20
[5,]    5   10   15   20   25
mx <- mx[lower.tri(mx)]
mx
[1] 2  3  4  5  6  8 10 12 15 20 
```

如何在 MATLAB 中做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T23:13:34.317

只需执行 n×1 数组和 1×n 数组的矩阵乘法：

```
out = (1:5)' * (1:5)

out =

     1     2     3     4     5
     2     4     6     8    10
     3     6     9    12    15
     4     8    12    16    20
     5    10    15    20    25 
```

要获得对角线以下的值，您可以执行以下操作

```
idx = tril(true(5),-1);
mx = out(idx) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T23:15:50.207

以下工作，虽然如果我能找到一种方法来避免额外的代码行，我会更高兴（**更新：** @Jonas 提供了一个更简洁的解决方案 +1）：

```
A = [1 2 3 4 5];
B = A' * A;
C = triu(B, 1);
C = sort(C(C ~= 0));

C' =

     2     3     4     5     6     8    10    12    15    20 
```

# mysql - 如何使用mysql通过table1显示table2中的数据？

> ID：14615536
> 
> 赞同：0
> 
> 时间：2013-01-30T23:03:22.603
> 
> 标签：mysql

我有两张桌子`directory`， 和`pictures`。两者都`directory`包含`pictures`在第 1 列中的 ID 号。我希望第 1 行（ID 1）`directory`提取`pictures`. 我希望它具有通用性，即如果我从中提取 ID 2，`directory`它将显示来自`pictures`.

我想根据ID`directory.ID`拉。`Pictures.photo`也许这更有意义......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T23:09:47.803

为此，您应该使用[JOIN](http://dev.mysql.com/doc/refman/5.0/en/join.html)。

```
select * 
from directory d
JOIN pictures p ON d.ID = p.ID 
```

# java - 函数 split.default 中的错误

> ID：14615542
> 
> 赞同：1
> 
> 时间：2013-01-30T23:04:14.113
> 
> 标签：java, r, statistics

我正在使用带有 SPOT 和 Java 的 R 来校准我正在从事的项目的参数。.res 文件看起来不错，它具有应具有的值。我是 R 和 SPOT 的新手，我在任何地方都找不到这个错误。这是我收到的信息：

```
 Entering spotGetRawResData
Loading result data from:: prueba.res
  Leaving spotGetRawResData
SPOT Step: 1
Create Sequential Design
  Entering spotGetRawResData
Loading result data from:: prueba.res
  Leaving spotGetRawResData
Error in split.default(rawData[, spotConfig$alg.resultColumn], rawData$CONFIG) : 
  Group length is 0 but data length > 0 
```

我正在使用 SPOT 附带的模板 .R 文件，这是我认为发生错误的地方：

```
res <-data.frame(res)
colNames = TRUE
if (file.exists(io.resFileName)){
   colNames = FALSE
}
## quote = false is required for JAVA
write.table(res
    , file = io.resFileName
    , row.names = FALSE
    , col.names = colNames
    , sep = " "              
    , append = !colNames
    , quote = FALSE
);      
colNames = FALSE
spotConfig$alg.currentResult=rbind(spotConfig$alg.currentResult,res);
#always log the results in spotConfig 
```

# c++ - 为什么这个矢量不打印？

> ID：14615545
> 
> 赞同：-1
> 
> 时间：2013-01-30T23:04:28.227
> 
> 标签：c++, vector, c++11, iterator, auto

编译错误说`it`没有在这个范围内声明，它没有命名类型，预期`;`

```
#include <iostream>
#include <vector>

using namespace std;

int main()
{
    vector<int> vec;

    vec.push_back(1);
    vec.push_back(3);
    vec.push_back(5);

    for (auto it = vec.begin(); it != vec.end(); ++it) {
         cout << *it << endl;
    }

    cout << "size: " << vec.size() << endl;

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T23:10:30.723

如评论所述，您需要`-std=c++11`在编译时指定标志。

只需提及用于迭代的替代语法[range-for 语句](http://www.stroustrup.com/C++11FAQ.html#for)：

```
for (auto& i: vec)
{
    std::cout << i << std::endl;
} 
```

[并使用统一初始化](http://www.stroustrup.com/C++11FAQ.html#uniform-init)填充`vector`初始值：

```
std::vector<int> vec {1, 3, 5}; 
```

* * *

另请参阅[为什么“使用命名空间标准”被认为是不好的做法？](https://stackoverflow.com/questions/1452721/why-is-using-namespace-std-considered-a-bad-practice-in-c)

# awk - 删除行 awk

> ID：14615547
> 
> 赞同：0
> 
> 时间：2013-01-30T23:04:42.387
> 
> 标签：awk

一个非常简单的问题（我认为）

我正在学习编辑文件`awk`

我想从文件中搜索所有衬里并删除所有带有单词醋酸盐的行

我试过了

```
awk 'match($0,"acetate") == 0 {print $0}' filename.txt > filename.txt 
```

但是，这会返回一个空的 txt 文件。

有什么建议吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-30T23:05:56.213

尝试这样做：

```
awk '!/acetate/{print}' filename.txt > new_filename.txt &&
mv new_filename.txt filename.txt 
```

或者简单地说：

```
awk '!/acetate/' filename.txt > new_filename.txt &&
mv new_filename.txt filename.txt 
```

不能同时打印和修改文件`awk`。如果您想在同一命令中执行此操作，请尝试使用[sed](/questions/tagged/sed "显示标记为“sed”的问题")：

```
sed -i '/acetate/d' filename.txt 
```

或 Mac OS X ：

```
sed -i.'' '/acetate/d' filename.txt 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-31T01:22:19.077

看起来您在 UNIX 上。当你这样做时：

```
command file > file 
```

其中“command”是任何 UNIX 命令，在“command file”读取之前，您将面临“file”被“> file”覆盖的风险，因此永远不要这样做。

某些工具（例如“sed”）具有允许“就地”编辑的选项，因此在输入文件上运行该命令的结果将被写回该文件。他们中的大多数人在幕后使用临时文件。

将命令结果写回文件的安全、可移植的方法是将输出重定向到 tmp 文件，然后将临时文件移动到原始文件：

```
command file > tmp && mv tmp file 
```

安全、简单，适用于任何命令。

对于您仅在文件中查找不包含特定单词的行的特殊情况，您可能想要的命令是“grep”，您可以将其用作：

```
grep -v acetate filename.txt > tmp && mv tmp filename.txt 
```

对于更复杂的事情，您可能需要 awk。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-30T23:33:47.450

sputnick给出了比较完整的答案，我加了一个grep的方式：

```
grep -v 'acetate' file > newfile 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-31T09:28:07.933

```
perl -pi -e 'if(/acetate/){undef $_}' your_file 
```

这将进行就地替换，这意味着文件中带有字符串“acetate”的行将被自动删除。或者你也可以这样做：

```
perl -pi -e 'undef $_ if /acetate/' your_file 
```

或者

```
sed -i.bak '/acetate/d' temp 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-12-09T19:24:57.870

你的命令没问题，但你不能使用相同的文件作为输入和输出。您应该使用数据透视文件，然后移动它：

```
awk 'match($0,"acetate") == 0 {print $0}' filename.txt > filename.tmp<br>
mv -f filename.tmp filename.txt 
```

# html - 带有不可编辑岛的 HTML 内容可编辑

> ID：14615551
> 
> 赞同：37
> 
> 时间：2013-01-30T23:05:00.207
> 
> 标签：html, contenteditable

我有一种基于浏览器的所见即所得编辑器，用户可以在其中编辑文档模板。

文档模板是一个带有一些特殊“合并代码占位符”的普通 html。通过将这些占位符替换为来自 DB 的数据，此类模板得到“实例化”。这给出了最终文档 - 模板的一个实例。

我目前的方法如下所示：

```
<div contenteditable>
  Sample template with <input type=button class="mergecode" value="MergeCode1">.
</div> 
```

（在线示例：http: [//jsfiddle.net/tFBKN/](http://jsfiddle.net/tFBKN/)）

在这种情况下，输入是不可编辑的，并且表现为一个实心块——这正是我所需要的。用户可以通过单击 DEL 或 BACKSPACE 作为任何其他字符等来删除此类合并代码。通过为此类 input.mergecode 设置适当的 CSS，我能够实现我想要的外观。

但是通过这种方法，我在三个不同的 UA 中遇到了三个不同的问题：

*   IE - CSS`{ font:inherit }`在那里根本不起作用，所以如果输入`<b>`像这里一样在里面，`<b><input value="test"></b>`它不会继承任何字体样式。
*   FF - 包含`<input>`元素的片段副本会从剪贴板内容中删除该输入，因此进一步的粘贴操作会插入所有内容，但不插入输入。
*   `<input>`GC - 在产生奇怪的结果后立即点击 {BACKSPACE} （[错误](https://bugs.webkit.org/show_bug.cgi?id=107967)）

所以我正在寻找其他关于如何在 HTML 中表示不可编辑的内联块类似“岛”的想法。

到目前为止我尝试过的其他方法：

*   `<span contenteditable="false">MergeCode1</span>`- 它不起作用，因为大多数 UA 从选择中删除了此类节点。因此，不可能在包含此类跨度的选择之上应用`<b>`或应用。`<i>`

还有其他想法吗？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-02-04T08:59:23.803

我是 CKEditor 开发人员。我们对嵌套只读元素（即[`placeholder`](http://ckeditor.com/addon/placeholder)插件和我们目前正在开发的功能[#9764](https://dev.ckeditor.com/ticket/9764)）有一些经验，但我没有好消息。如果你想拥有一致的外观和感觉，你必须手动处理每一个行为。没有任何技巧可以修复浏览器。许多事情（比如在 GC 输入周围发生的奇怪事情）似乎是无法解决的。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2013-02-02T03:04:06.363

还有一个看起来很有希望的想法：

要使用空跨度`::before { content:"caption"; }`，应该产生在 DOM 中表示为内部没有插入符号位置的节点的不可编辑块。

你可以在这里试试[http://jsfiddle.net/TwVzt/1/](http://jsfiddle.net/TwVzt/1/)

但是这种方法并非没有问题（在我的例子中）：没有办法`::before`使用*样式*DOM 属性声明内联，因此应该在 CSS 中预先声明整个集合。但是我拥有的一组合并代码非常大，在某些用例中甚至是完全未知的。叹。

不过，如果有人有更好的情况（已知的代码集），请把这个食谱放在这里。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2015-12-29T21:55:05.983

我知道它是一个旧线程，我遇到了类似的问题。只需要几个不可编辑的跨度在可编辑的 div 中。最终实现了一个像...一样的HACK-AROUND

```
$('#testDiv').on('keydown', function(e) { 
    var targetNode = getSelectionStart();
    if(targetNode != undefined && targetNode.nodeType === 1 && targetNode.nodeName == 'SPAN')    
    {
      var nodeHtmlString = targetNode.outerHTML;

      if(~nodeHtmlString.indexOf("nonEditable"))
      {
        e.preventDefault();
        e.stopPropagation();
      }
    }
});

function getSelectionStart() {
 var node = document.getSelection().anchorNode;
 return (node.nodeType == 3 ? node.parentNode : node);
} 
```

[在https://jsfiddle.net/fxmb3nL6/20/](https://jsfiddle.net/fxmb3nL6/20/)完成小提琴

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-09-25T23:28:07.480

下面的解决方案 - 有一个小警告。但首先——你们太棒了！
我不是 JS 或 HTML 专家，但我也不知道 jsfiddle.net。因此，阅读您的评论以及其他在线搜索，以及对 jsfiddle 的一些测试，我创建了以下有效的代码。

```
<pre><code>
<div contenteditable="false" class="editor" readonly="true" UNSELECTABLE="ON">
    Sample template with <span class="mergecode test1" />.
    <span contenteditable> editable </span>
    <font color=red><span UNSELECTABLE="ON" contenteditable="false" readonly="true"
     UNSELECTABLE="ON">  uneditable1 </span></font>
    <span contenteditable> editable2 </span>
    <font color=red><span contenteditable=false readonly="true" UNSELECTABLE="ON"> uneditable3</span></font>  
    <span contenteditable> editable4 </span>
    <span contenteditable="false" readonly="true" UNSELECTABLE="ON"> uneditable5 </span>
< /div>
</code></pre> 
```

如果你把它放到 chrome 上的 jsfiddle 中，你会发现它在 chrome 中工作（以及 IE 和 FF，但有点不同），但似乎有一个小警告。

需要注意的是您的键绑定对 Backspace 的作用！就我而言，当我选择一个不可编辑的短语并在 chrome 中按退格键时，它似乎会刷新，或者执行“转到最后一页”！我将前两个 undeditbles 设为红色（留下最后一个黑色），以便您可以看到会发生什么。我在 Chrome、FF 和 IE 中的 jsfiddle 上对其进行了测试。一切似乎都采取了正确的行动，给予或接受退格问题。

**我认为这是它如何工作的逻辑。** 第一个 Div 是顶级父级，它是 contenteditable="false"。所以它下面的所有东西都应该是不可编辑的。除了其中具有跨度 contenteditble="true" 的孩子之外，它们变得可编辑。所以你从你的父母那里继承，但是你可以作为一个孩子覆盖。

我还把标签 readonly="true" UNSELECTABLE="ON" 因为我在某个地方读到过它们。而且还需要更多的测试！！！请注意，我必须将 Font... 放在跨度之外，否则它将不起作用。但在 IE 中它工作得很好。uneditables 是我告诉他们的任何颜色，没有多少单次，双击或三次单击会选择 jsfiddle 中的 uneditbles ！！！:-) 对于 Chrome，单击什么也没做，双击选择了不可编辑的，并且使用退格键它有点疯狂！似乎会转到上一页。FF的事情有点疯狂！双击选中不可编辑的和之前的可编辑的！不知道为什么。

如果有人能弄清楚并写下 Chrome 和 FF 的问题，那就太好了。如果在 Chrome 和 FF 中双击或任意数量的快速点击也不起作用，那就太好了。我想再次强调跨度......似乎必须在不可编辑和字体旁边......在跨度之外。

希望这一切都有意义。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-10-27T16:38:22.463

这是我在项目中使用的解决方案：

```
<div>
  <span contenteditable>Editable text</span> <span> - Non editable text</span>
</div> 
```

用对应的 CSS 看结果：

```
div {
  border: 1px solid black;
  display: inline-block;
  max-width: 200px;
} 
```

结果如下：[http ://www.cssdesk.com/rULJM](http://www.cssdesk.com/rULJM)

* * *

## 回答 #6

> 赞同：-3
> 
> 时间：2013-01-31T18:32:29.420

对于 IE，试试这个：

```
<span contenteditable="true">Uneditable</span> 
```

注意 contenteditable 属性的反向值！它违背了所有常识，但它确实有效——至少在 IE8 和 IE9 中是这样。您可以移动和复制/粘贴这个不可编辑的元素。然而，它远非完美。例如，如果您将包含不可编辑元素的区域加粗，这也会感染不可编辑元素的内容。因此，您可能必须使用一些脚本来保持元素的完整性。还设置 contenteditable="true" 将使用调整大小手柄装饰不可编辑的元素。您可以通过设置 unselectable="on" 再次关闭它们，但这将防止对象被拖动。同样，您可能不得不依赖恢复宽度和高度的脚本。

# ios - 苹果单例代码警告......再次

> ID：14615552
> 
> 赞同：5
> 
> 时间：2013-01-30T23:05:00.660
> 
> 标签：ios, objective-c

我在一个应用程序中有这个单例代码，我不时更新它。当我获取 Apple 参考代码时，我不得不更新一两次，因为 clang 抱怨并且 Apple 更新了它作为回应。今天我尝试使用 Xcode 4.6 进行分析，但我再次收到警告，尽管 Apple 已经两年没有更新了。我真的无法理解他们如何无法以静态分析器不会抱怨的方式对单例进行编码。如果他们认为他们的参考代码是正确的，他们并不是不能改变静态分析器来适应他们的代码。但回到代码，我有这个类：

```
@implementation MySingleton

static MySingleton *sSharedSingleton = nil;

+ (MySingleton *)sharedSingleton 
{
    if (sSharedSingleton == nil)
    {
        sSharedSingleton = [[super allocWithZone:NULL] init];
    }
    return sSharedSingleton;    
}

+ (id)allocWithZone:(NSZone *)zone
{
    return [[self sharedSingleton] retain];
}

- (id)copyWithZone:(NSZone *)zone
{
    return self;
}

- (id)retain
{
    return self;
}

- (unsigned)retainCount
{
    return NSUIntegerMax;  //denotes an object that cannot be released
}

- (oneway void)release
{
    //do nothing
}

- (id)autorelease
{
    return self;
}

@end 
```

据我所知，这正是来自[https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/CocoaFundamentals/CocoaObjects/CocoaObjects.html的参考](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/CocoaFundamentals/CocoaObjects/CocoaObjects.html)

Clang 抱怨 allocWithZone 实现的返回行并带有警告：

```
Object with a +0 retain count returned to caller where a +1 (owning) retain count is expected 
```

我认为我们得到了这一点，因为我们正在覆盖保留。你认为谁是正确的，clang 还是参考代码？我应该只是更改代码以抑制消息（例如避免覆盖保留）并忘记它吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-30T23:09:05.907

该示例已过时，尤其是在引入 ARC 和 GCD 时，大多数情况下，您只需要这个

```
+ (DSSingleton *)sharedInstance
{
    static DSSingleton *sharedInstance;
    static dispatch_once_t onceToken;
    dispatch_once(&onceToken, ^{
        sharedInstance = [DSSingleton new];
    });

    return sharedInstance;
} 
```

Xcode 为该内部部分提供了很棒的代码片段 - 只需键入 dispatch_once 并查找自动完成

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T23:28:43.157

你应该忘记它。在某些情况下，人工智能（代码分析器）无法与自然智能竞争。
一个 //@suppress 警告会很好，如果它可以工作

# symfony - FOSUserBundle 额外的认证标准

> ID：14615554
> 
> 赞同：0
> 
> 时间：2013-01-30T23:05:14.153
> 
> 标签：symfony, symfony-2.2

我正在开发一个多租户应用程序，我需要完成一些规则来检查用户何时可以通过身份验证（我不是在谈论角色，尝试 make login 应该返回“无效的用户名或密码”）。

我的问题是：放置这些额外检查的最佳位置在哪里？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T00:56:54.323

我认为您最好的选择是阅读 FosUserBundle 中的用户相关类。我通过在[UserManager.php中添加自定义方法进行了许多更改](https://github.com/FriendsOfSymfony/FOSUserBundle/blob/master/Model/UserManager.php)

FOS 调用许多链式方法，您可以浏览这些文件并根据需要进行更改

还要注意

`UserListerner.php` `User.php`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-04T17:24:26.927

这取决于您打算执行的检查类型，但通常最好的方法是使用自定义安全投票器。

官方文档中有一个示例展示了如何实现 IP 黑名单： [http ://symfony.com/doc/current/cookbook/security/voters.html](http://symfony.com/doc/current/cookbook/security/voters.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-12-17T15:33:29.520

我认为这个问题很老，但仍然非常相关。答案帮助我走上了正确的道路（FOSUserBundle 2.0 和 Symfony 3.3） - 如果有人还在寻找，这里有更多详细信息 [https://symfony.com/doc/master/bundles/FOSUserBundle/user_manager.html](https://symfony.com/doc/master/bundles/FOSUserBundle/user_manager.html)

这部分对我来说很关键：

> `FOS\UserBundle\Model\UserManagerInterface`您可以通过定义服务实现并在配置中设置其 id来替换用户管理器的默认实现 。默认实现的 id 是 `fos_user.user_manager.default`
> 
> `fos_user: # ... service: user_manager: custom_user_manager_id`
> 
> 您的自定义实现可以扩展`FOS\UserBundle\Model\UserManager` 以重用通用逻辑。

就我而言，我只是将整个`FOS\UserBundle\Doctrine\UserManager`(which extends `FOS\UserBundle\Model\UserManager`) 复制到 my`AppBundle\Services`作为起点。

我还必须从这里复制注射：`vendor/friendsofsymfony/user-bundle/Resources/config/doctrine.xml`

# c# - 循环泛型语法

> ID：14615556
> 
> 赞同：1
> 
> 时间：2013-01-30T23:05:44.103
> 
> 标签：c#, generics

我有以下情况，我无法弄清楚如何正确声明允许我使用类型强制。删除`where`子句可以正常工作，但我宁愿能够使用它们来强制执行类型安全。有什么想法可以让我完成这项工作吗？

```
class ClassA<TB, TC> where TB : ClassB where TC : ClassC
{
    private TB MyPropB;
    private TC MyPropC;
}

class ClassB<TC> where TC : ClassC
{
    private TC MyPropC;
}

class ClassC<TB> where TB : ClassB
{
    private TB MyPropB;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-30T23:20:51.000

在每个类中指定两个泛型类型参数似乎可行：

```
class ClassA<TB, TC>
    where TB : ClassB<TB, TC>
    where TC : ClassC<TB, TC>
{
    public TB MyPropB { get; set; }
    public TC MyPropC { get; set; }
}

class ClassB<TB, TC>
    where TB : ClassB<TB, TC>
    where TC : ClassC<TB, TC>
{
    public TC MyPropC { get; set; }
}

class ClassC<TB, TC>
    where TB : ClassB<TB, TC>
    where TC : ClassC<TB, TC>
{
    public TB MyPropB { get; set; }
} 
```

`ClassB`需要`TC`它自己的属性和具有属性`TB`的 where 子句中的类型参数，反之亦然。到处都有两个泛型类型参数似乎是有意义的，因为类总是成对一起工作。`ClassC``TB``ClassB``ClassC`

* * *

您可以像这样定义具体的类：

```
class Ape : ClassA<Bear, Cougar>
{
}

class Bear : ClassB<Bear, Cougar>
{
}

class Cougar : ClassC<Bear, Cougar>
{
} 
```

# c# - 如何以回复模式在 Outlook 中打开 MSG 文件

> ID：14615567
> 
> 赞同：-1
> 
> 时间：2013-01-30T23:07:16.870
> 
> 标签：c#, outlook, reply, msg

我有一个 C# WinForm 应用程序，它显示了本地 MSG 文件的列表。

当用户单击列表中的某个项目时，我希望它以回复模式在 Outlook 窗口中打开 MSG 文件。即完全显示窗口，就好像我在 Outlook 收件箱中选择了电子邮件并单击了回复按钮一样。

客户端应用程序将始终是 Outlook。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T00:12:49.250

您的意思是 Outlook 检查器必须以编辑模式显示，而不是只读模式？或者您想以编程方式调用对特定 MSG 文件的回复然后显示它？
在前一种情况下，MSG 文件必须先未发送。如果需要重置现有消息的标志，可以使用[Redemption](http://www.dimastr.com/redemption) - 使用 RDOSession.GetMessageFromMsgFile 打开 MSG 文件，将 RDOMail.Sent 设置为 false，调用 RDOMail.Save。
在后一种情况下，使用 Application.Session.OpenSharedItem（返回 MailItem）打开 MSG 文件，调用 MailItem.Reply（返回新的 MailItem 对象），调用 MailItem.Display。

# sql - 将 .sqlite 文件转换为 MSSQL 格式

> ID：14615568
> 
> 赞同：5
> 
> 时间：2013-01-30T23:07:19.917
> 
> 标签：sql, sqlite

我正在尝试这样做，到目前为止，我已经找到了一个[Firefox 插件](https://addons.mozilla.org/en-us/firefox/addon/sqlite-manager/)，可以将我的 .sqlite 文件转换为某种 .sql 创建脚本（需要一些关于这是什么格式的建议，它是 sqlite，但是有什么区别在这个和 .sqlite 文件之间？）。

我试过在 MySQL 和 MSSQL 中执行它，但它不会运行，所以我猜它是某种 sqlite 语法。

无论如何我可以转换这个 .sql 文件，以便它以 MSSQL 语法放入我的数据库中吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-30T23:22:37.870

根据您所写的内容，firefox 插件不是您的工具。我建议您使用 SQL Server 导入和导出向导（位于 Start->Programs->SQL Server 文件夹中）。您可以在此处选择源数据库和目标数据库。

但在开始之前，您必须创建与您的 sqlite 数据库的 ODBC 连接。请使用[开源驱动程序](http://www.ch-werner.de/sqliteodbc/)将 ODBC 连接字符串设置为您的 sqlite 数据库。

然后在 SQL Server 导入和导出向导中选择“.Net Framework data provider for ODBC”作为源数据库并输入您的连接字符串。您还必须在下一步中指定目标 SQL Server 数据库。

之后，向导将为您提供导入内容的选项

# asp.net - RequiredFieldValidator 不允许使用中文字符

> ID：14615570
> 
> 赞同：1
> 
> 时间：2013-01-30T23:07:34.280
> 
> 标签：asp.net, utf-8, requiredfieldvalidator, chinese-locale

我在 ASP.NET 4.0 Web 表单上有一个标准的RequiredFieldValidator。它对英文名称表现良好，但由于某种原因，它不会验证我是否使用中文字符。我已经尝试从这里更改编码元标记：

```
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" /> 
```

对此无效：

```
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" /> 
```

我还验证了全球化设置是默认设置，这意味着请求/响应也是 utf-8。

这是 ASP.NET 的一个已知问题，是否有解决方法？

这是我正在使用的测试数据：

```
Last Name: 方
First Name: 李
Address1: 香港东路6号
Address2: 5号楼,8号室
City: 青岛市
State: 山东 
```

# android - 如何获取 Activity 窗口的背景可绘制对象？

> ID：14615577
> 
> 赞同：8
> 
> 时间：2013-01-30T23:08:13.130
> 
> 标签：android

从一个活动中，我可以像这样设置背景可绘制对象：

```
getWindow().setBackgroundDrawable(drawable) 
```

但我找不到检索背景可绘制的方法。

有吗？如果不是，为什么不呢？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-01-31T06:42:52.163

您可以使用它`getWindow().getDecorView().getBackground();`来检索背景可绘制对象。

# c# - 为什么我的 System.Diagnostics 命名空间中没有 Process 类？

> ID：14615580
> 
> 赞同：-1
> 
> 时间：2013-01-30T23:08:25.980
> 
> 标签：c#, namespaces

我目前正在使用 `C# Express`. 它确实有一个`system.dll 4.2`，我添加了这个参考。但是，其中缺少很多东西。比如`Process class`中的`System.Diagnostics namespace`。

顺便说一句，另一个问题：每个`dll`文件都有一些`namespace`，并且`System.Diagnostics`命名空间在`system.dll file`. 我说得对吗？那么如果我想使用流程类呢？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T19:33:12.253

Netduino 使用不支持该类的[.NET Micro Framework](http://msdn.microsoft.com/en-us/library/ee435793.aspx)`Process`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T23:23:16.420

尝试卸载并重新安装 VCS excpress。似乎我记得在某处看到过类似的问题（我知道，非常具体），这解决了这个问题。

另一件事可能是检查项目的目标框架，并确保它没有使用 Metro 或 compact 或任何类似的东西。

编辑：快速搜索让我发现：[缺少对 System.Diagnostics.Process 的引用](https://stackoverflow.com/questions/11845828/missing-reference-to-system-diagnostics-process)

# mysql - os.date 函数没有返回期望的结果

> ID：14615582
> 
> 赞同：0
> 
> 时间：2013-01-30T23:08:36.103
> 
> 标签：mysql, lua, date-format, luasql, ptokax

我正在使用此`os.date()`函数调用将字符串变量插入到我的 MySQL 表中：

```
tSend["sDate"] = os.date( "%Y-%m-%d %X", Core.GetUserValue(v, 25) ) 
```

表 tSend 被转发到另一个函数，该函数将它插入到表中。

这不能按要求工作。例如。它将**2013-01-31 12:59:59**而不是**2013-01-31 00:59:59**插入表中。它发生在 1159 小时之后的所有时间。

根据[Lua PiL](http://www.lua.org/pil/22.1.html "Lua 编程：22.1 – 日期和时间")书，

> **`%X`**暗示*时间*（例如，23:48:10）

我不能`NOW()`在我的查询中使用，因为生成的时间[`Core.GetUserValue(v, 25)`](http://wiki.ptokax.ch/doku.php/scriptinghelp/ptokaxapi2#core.getuservalue_tuser_nvauleid)是 PtokaX 的一个属性，并且**从 1.1.1970 开始作为用户登录时间（以秒为单位**）给出。

这里有什么问题？一个简单的lua代码

```
print( os.date("%Y-%m-%d %X", 1355586777) ) 
```

生成**2012-12-15 21:22:57**作为输出（其中*1355586777*是我从`Core.GetUserValue`通话中收到的值）。

我曾经有过`%H:%M:%S`，`%X`但我想到了使用`%X`，看来，我必须恢复原状。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T23:30:52.253

我想我发现了行为中的错误。

我认为这可能是因为 PtokaX 是用 C 编写的，然后通过它调用了 lua 脚本。因为，[strftime](http://en.cppreference.com/w/c/chrono/strftime "C++ strftime 文档")定义`%X`为

> 写入本地化时间表示（取决于语言环境）

这会导致时间输出为 12 小时格式，而不是 24 小时。今天中午 12 点之后我仍然要测试它。

## 附言

我不知道如何检查`locale`日期格式，但我假设这是导致此行为的唯一有效原因。

* * *

我切换回`os.date( "%Y-%m-%d %X" )`在我的脚本中使用。

# html - 仅对嵌套无序列表的上一层进行样式设置

> ID：14615583
> 
> 赞同：0
> 
> 时间：2013-01-30T23:08:42.243
> 
> 标签：html, css, html-lists

我想知道是否可以只对嵌套列表的上一层进行样式设置。要明白我的意思，请看这个小提琴：

[http://jsfiddle.net/MYasJ/](http://jsfiddle.net/MYasJ/)

在小提琴中，我可以通过覆盖嵌套列表`background-color`属性来达到预期的效果，但这不是我想要的——在我的具体情况下，父列表有图像作为背景，第一级`li`元素应该有红色背景，但是元素嵌套列表应该再次透明，以便“根”列表的背景可见。在小提琴中，我使用绿色而不是图片，但我希望你明白这一点。

关于 SO 有几个问题，例如[here](https://stackoverflow.com/questions/12787342/nested-list-styling-how-to-separate-styles)，但它们要么涵盖不同的主题，要么解决方案涉及覆盖子属性——但这并不能解决我的问题。

编辑：小细节：问题是因为嵌套列表包含在父`li`元素中。这有一些很好的理由（例如，如果您浮动父元素，嵌套列表将随之浮动），但也导致您不能（至少我不知道如何，这是我的问题）`li`仅设置元素的样式. 我对伪类有一些运气，`:first-line`但这显然不适用于多行项目，也不能跨越`li`元素的整个宽度。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T23:18:47.367

在您的 HTML 代码中，`"Only this item should have red background"`文本节点和嵌套节点`<ul>`都是 parent 的子节点`<li>`。因此，它们显示在红色背景上。

您可能希望将文本包装成 a`<div>`并为其分配背景颜色。

```
<ul id="nav">
    <li>
        <div>Only this item should have red background</div>
        <ul>
            <li>But this item should have no background</li>
            <li>Just like this one</li>
            <li>So the green background of the root ul element is visible</li>
       </ul>
    </li>
</ul>

#nav > li > div {
    background-color: red;
} 
```

# java - Java小程序在Firefox中不起作用

> ID：14615584
> 
> 赞同：1
> 
> 时间：2013-01-30T23:08:43.923
> 
> 标签：java, firefox, firefox-addon

我确定这个问题已经解决了，但我似乎无法找到我正在寻找的答案。我正在尝试在 Firefox 上显示一个小程序，但我无法通过 Firefox 显示它来警告我有关安全漏洞的信息。我首先从 Java SE 7 开始。我尝试安装 Java SE 6 以查看它是否能解决问题，但这没有奏效。有人可以帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T23:15:46.147

我认为这个问题与 java SE 7 -7u10 jdk- 中的安全问题有关（因此我在不同浏览器上打开 Java 应用程序时遇到了类似的问题） [http://www.csoonline.com/article/724327/oracle- s-java-security-update-缺少专家说](http://www.csoonline.com/article/724327/oracle-s-java-security-update-lacking-experts-say)

另见 [http://blog.mozilla.org/security/2013/01/11/protecting-users-against-java-vulnerability/](http://blog.mozilla.org/security/2013/01/11/protecting-users-against-java-vulnerability/)

但我曾经让它工作，我认为某处有一个小链接，这样你就可以继续，但对自己的行为负责！

# javafx-2 - JavaFX LineChart 悬停值

> ID：14615590
> 
> 赞同：19
> 
> 时间：2013-01-30T23:09:06.967
> 
> 标签：javafx-2

我正在用 JavaFX 创建折线图。目前一切都很好，它成功地用我需要的数据库存储过程中的数据创建了图表。无论如何，如果可能的话，我需要的是 LineChart 上的每个数据点都有一个鼠标悬停事件，它说明特定点后面的值，例如 150,000 英镑。我已经在 PieCharts 上看到了这样的例子，它显示了悬停时的 % 值，但是我在任何地方都找不到 LineCharts 的例子，这甚至可以做到吗？

如果可能的话，谁能指出我正确的方向？

到目前为止的代码：

```
private static final String MINIMIZED = "MINIMIZED";
private static final String MAXIMIZED = "MAXIMIZED";
private static String chartState = MINIMIZED;
// 12 Month Sales Chart
XYChart.Series<String, Number> series = new XYChart.Series<>();
XYChart.Series<String, Number> series2 = new XYChart.Series<>();

public void getDeltaData() {

    try {
        Connection con = DriverManager.getConnection(connectionUrl);
        //Get all records from table
        String SQL = "";
        Statement stmt = con.createStatement();

        //Create the result set from query execution.
        ResultSet rs = stmt.executeQuery(SQL);

        while (rs.next()) {

            series.getData().add(new XYChart.Data<String, Number>(rs.getString(1),
                    Double.parseDouble(rs.getString(7))));
            series2.getData().add(new XYChart.Data<String, Number>(rs.getString(1),
                    Double.parseDouble(rs.getString(8))));

        }
        rs.close();
        stmt.close();

    } catch (Exception e) {
    }
    yearChart = createChart();
}

    protected LineChart<String, Number> createChart() {
    final CategoryAxis xAxis = new CategoryAxis();
    final NumberAxis yAxis = new NumberAxis();

    // setup chart
    series.setName("Target");
    series2.setName("Actual");
    xAxis.setLabel("Period");
    yAxis.setLabel("£");

    yearChart.getData().add(series);
    yearChart.getData().add(series2);

    yearChart.setCreateSymbols(false);

    return yearChart;
} 
```

**Jewelsea提供的答案是解决这个问题的完美方案。**

谢谢你，珠宝海。

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2013-01-31T10:21:53.457

使用[XYChart.Data.setNode(hoverPane)](http://docs.oracle.com/javafx/2/api/javafx/scene/chart/XYChart.Data.html#setNode%28javafx.scene.Node%29)为每个数据点显示一个自定义节点。使 hoverNode 成为类似[StackPane](http://docs.oracle.com/javafx/2/api/javafx/scene/layout/StackPane.html)的容器。添加鼠标事件侦听器，以便您知道鼠标何时[进入](http://docs.oracle.com/javafx/2/api/javafx/scene/Node.html#setOnMouseEntered%28javafx.event.EventHandler%29)和[离开](http://docs.oracle.com/javafx/2/api/javafx/scene/Node.html#setOnMouseExited%28javafx.event.EventHandler%29)节点。在输入时，为 hoverPane 内的值放置一个[标签](http://docs.oracle.com/javafx/2/api/javafx/scene/control/Label.html)。退出时，从 hoverPane 中删除标签。

有一些[示例代码](https://gist.github.com/4681797)来演示这种技术。

示例代码的输出显示为光标悬停在 22 节点上。

![悬停节点](../Images/078c0ce59d4153e1edf6b22c74364033.png)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2016-11-04T21:21:22.710

**使用工具提示：**

```
import java.util.Iterator;
import java.util.Map;
import java.util.Random;
import java.util.Set;
import java.util.TreeMap;
import javafx.application.Application;
import javafx.scene.Scene;
import javafx.scene.chart.LineChart;
import javafx.scene.chart.NumberAxis;
import javafx.scene.chart.XYChart;
import javafx.scene.chart.XYChart.Data;
import javafx.scene.control.Tooltip;
import javafx.stage.Stage;

/**
 *
 * @author blj0011
 */
public class JavaFXApplication250 extends Application
{

    @Override
    public void start(Stage stage)
    {
        stage.setTitle("Line Chart Sample");
        //defining the axes
        final NumberAxis xAxis = new NumberAxis();
        final NumberAxis yAxis = new NumberAxis();
        xAxis.setLabel("Number of Month");
        //creating the chart
        final LineChart<Number, Number> lineChart = new LineChart<>(xAxis, yAxis);

        lineChart.setTitle("Stock Monitoring, 2010");
        //defining a series
        XYChart.Series<Number, Number> series = new XYChart.Series();
        series.setName("My portfolio");
        //populating the series with data
        Random rand = new Random();

        TreeMap<Integer, Integer> data = new TreeMap();
        //Create Chart data
        for (int i = 0; i < 3; i++) {
            data.put(rand.nextInt(51), rand.nextInt(51));
        }
        Set set = data.entrySet();

        Iterator i = set.iterator();
        while (i.hasNext()) {
            Map.Entry me = (Map.Entry) i.next();
            System.out.println(me.getKey() + " - " + me.getValue());
            series.getData().add(new XYChart.Data(me.getKey(), me.getValue()));//Add data to series
        }

        lineChart.getData().add(series);

        //loop through data and add tooltip
        //THIS MUST BE DONE AFTER ADDING THE DATA TO THE CHART!
        for (Data<Number, Number> entry : series.getData()) {                
            System.out.println("Entered!");
            Tooltip t = new Tooltip(entry.getYValue().toString());
            Tooltip.install(entry.getNode(), t);
        }

        Scene scene = new Scene(lineChart, 800, 600);

        stage.setScene(scene);
        stage.show();
    }

    /**
     * @param args the command line arguments
     */
    public static void main(String[] args)
    {
        launch(args);
    }    
} 
```

# python - Python：计算列表笛卡尔幂的最短方法

> ID：14615595
> 
> 赞同：7
> 
> 时间：2013-01-30T23:09:29.220
> 
> 标签：python, list, product, cartesian

假设我们有一个列表`L`。笛卡尔积`L x L`可以这样计算：

```
product = [(a,b) for a in L for b in L] 
```

如何`L x L x L x ... x L`以一种简短有效的方式计算笛卡尔幂（n 次，对于给定的 n）？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-30T23:12:31.027

使用[`itertools.product()`](http://docs.python.org/2/library/itertools.html#itertools.product)：

```
product = itertools.product(L, repeat=n) 
```

现在哪里`product`是可迭代的；`list(product)`如果您想将其具体化为完整列表，请致电：

```
>>> from itertools import product
>>> list(product(range(3), repeat=2))
[(0, 0), (0, 1), (0, 2), (1, 0), (1, 1), (1, 2), (2, 0), (2, 1), (2, 2)] 
```

# ruby-on-rails - Gem 安装 ruby -audio 失败

> ID：14615596
> 
> 赞同：3
> 
> 时间：2013-01-30T23:09:31.193
> 
> 标签：ruby-on-rails, rubygems

我已经克隆了一个现有的存储库，现在正在运行`bundle install`——由于某种原因，它在 ruby​​-audio gem 上失败了。

```
Installing ruby-audio (1.6.1) with native extensions 
Gem::Installer::ExtensionBuildError: ERROR: Failed to build gem native extension.

/Users/thisuser/.rvm/rubies/ruby-1.9.3-p194/bin/ruby extconf.rb 
checking for sndfile.h in /opt/local/include,/usr/local/include,C:/Program Files (x86)/Mega-Nerd/libsndfile/include,C:/Program Files/Mega-Nerd/libsndfile/include... no
checking for sf_open() in -lsndfile-1... no
checking for sf_open() in -lsndfile... no
*** extconf.rb failed ***
Could not create Makefile due to some reason, probably lack of
necessary libraries and/or headers.  Check the mkmf.log file for more
details.  You may need configuration options.

Provided configuration options:
--with-opt-dir
--with-opt-include
--without-opt-include=${opt-dir}/include
--with-opt-lib
--without-opt-lib=${opt-dir}/lib
--with-make-prog
--without-make-prog
--srcdir=.
--curdir
--ruby=/Users/thisuser/.rvm/rubies/ruby-1.9.3-p194/bin/ruby
--with-sndfile-dir
--without-sndfile-dir
--with-sndfile-include
--without-sndfile-include=${sndfile-dir}/include
--with-sndfile-lib
--without-sndfile-lib=${sndfile-dir}/lib
--with-sndfile-1lib
--without-sndfile-1lib
--with-sndfilelib
--without-sndfilelib
extconf.rb:26:in `<main>':   Can't find libsndfile (http://www.mega-nerd.com/libsndfile/) (RuntimeError)

  Try passing --with-sndfile-dir or --with-sndfile-lib and --with-sndfile-include
  options to extconf. If there are spaces in the path on windows, it may not work.

Gem files will remain installed in /Users/thisuser/.bundler/tmp/5253/gems/ruby-audio-1.6.1 for inspection.
Results logged to /Users/thisuser/.bundler/tmp/5253/gems/ruby-audio-1.6.1/ext/rubyaudio_ext/gem_make.out
An error occured while installing ruby-audio (1.6.1), and Bundler cannot continue.
Make sure that `gem install ruby-audio -v '1.6.1'` succeeds before bundling. 
```

老实说，我不知道该怎么办。谷歌搜索显示与 mysql gem 相同的错误，解决方案是 mysql 特定的。

有没有人偶然发现过这个？如果没有，有没有办法明确告诉 Rails 忽略该宝石？从 gem 文件中删除它并`bundle install`再次运行并没有成功。

谢谢你的帮助！

**编辑**

运行后`brew install libsndfile`我得到以下输出：

```
Warning: Your Xcode (4.5.2) is outdated
Please install Xcode 4.6.
==> Downloading http://www.mega-nerd.com/libsndfile/files/libsndfile-1.0.25.tar.gz
Already downloaded: /Library/Caches/Homebrew/libsndfile-1.0.25.tar.gz
==> Patching
patching file programs/sndfile-play.c
==> ./configure --prefix=/usr/local/Cellar/libsndfile/1.0.25
==> make install
make[1]: *** [sndfile-play.o] Error 1
make[1]: *** Waiting for unfinished jobs....
brew: superenv removed: -g -O2 -Wall -Wextra -Wdeclaration-after-statement -Wpointer-arith -Wstrict-prototypes -Wmissing-prototypes -Wcast-align -Wcast-qual -Wnested-externs -Wbad-function-cast -Wwrite-strings -Wundef
brew: superenv removed: -g -O2 -Wall -Wextra -Wdeclaration-after-statement -Wpointer-arith -Wstrict-prototypes -Wmissing-prototypes -Wcast-align -Wcast-qual -Wnested-externs -Wbad-function-cast -Wwrite-strings -Wundef
make: *** [install-recursive] Error 1
Your Xcode and or CLT are mis-configured. Try some or all of the following:
    xcrun --kill-cache
    xcodebuild -license
    sudo xcode-select -switch /path/to/Xcode.app 
```

我尝试了所有建议的命令 - 无济于事。我还能做些什么来解决这个问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-31T00:46:57.270

所以，我们让它一起工作，我想我会分享我必须采取的步骤来完成这项工作。感谢所有评论的人！

1.  问题是在安装 gem 时，它找不到`libsndfile`
2.  要安装它，我必须运行`brew install libsndfile`（如果你还没有自制软件，请先安装它），这不起作用，所以我不得不......
3.  ... 将 Xcode 更新到最新版本并安装 Xcodes 命令行工具（不要问我为什么，但我必须这样做。）
4.  然后我跑了`brew install libsndfile`，这行得通
5.  最后但并非最不重要的是，我`bundle install`再次运行，最终安装了所需的 gem。

# php - 在 jQuery 中回显 php

> ID：14615597
> 
> 赞同：0
> 
> 时间：2013-01-30T23:09:43.293
> 
> 标签：php, jquery

我在让 php echo 在 jQuery 中工作时遇到问题。

```
global $data; // fetch options stored in $data 
```

你能指出我正确的方向吗，谢谢。

# jQuery

```
$(window).load(function(){
  var slidertype = "<?php global $data; echo $data['slider_type']; ?>";
  $('.flexslider').flexslider( {
        animation: "slidertype",
        controlNav: false,
        smoothHeight: true, 
        slideshowSpeed: 7000, 
        animationSpeed: 600,
        start: function(slider) {
          $('body').removeClass('loading');
        }
      });
     }); 
```

# PHP

```
<select id="slider_type" name="slider_type">
    <option value="slide" id="0"></option>
    <option value="fade" id="1"></option>
</select> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-30T23:14:30.210

```
$(window).load(function(){
  var slidertype = "<?php global $data; echo $data['slider_type']; ?>";
  $('.flexslider').flexslider( {
        animation: slidertype, // Need to reference the var, not a string literal
        controlNav: false,
        smoothHeight: true, 
        slideshowSpeed: 7000, 
        animationSpeed: 600,
        start: function(slider) {
          $('body').removeClass('loading');
        }
    });
 }); 
```

# backbone.js - Underscore.js“一些”不返回布尔值

> ID：14615602
> 
> 赞同：3
> 
> 时间：2013-01-30T23:10:10.970
> 
> 标签：backbone.js, coffeescript, underscore.js, backbone-layout-manager

我正在使用 underscore.js 来检查列表中的元素是否为真。这是它的咖啡脚本代码：

```
uploading  = _(@getViews ".file-forms").some (view) ->
    view.uploading is true 
```

打印“上传”，而不是返回真或假，给出：

```
uploading
  y
   _chain: true
   _wrapped: false
   __proto__: Object 
```

以下是下划线“some”的定义：http: [//underscorejs.org/#some](http://underscorejs.org/#some)。

此外，getViews 是此处定义的主干布局管理器的功能：[https ://github.com/tbranyen/backbone.layoutmanager/wiki/Nested-views](https://github.com/tbranyen/backbone.layoutmanager/wiki/Nested-views)

以下是其他变量的输出，可能会使调试更容易：

```
_(this.getViews(".file-forms"))
 y
  _chain: true
  _wrapped: Array[1]
  0: d
  length: 1
  __proto__: Array[0]
  __proto__: Object

_
 function (a){if(a instanceof y)return a;if(this instanceof y)this._wrapped=a;else return new y(a)} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T00:02:02.460

`getViews`似乎正在返回一个预先包装和链接的下划线对象供您使用。在这种情况下，再次调用`_`它没有任何作用。你可以把`uploading.value()`得到你想要的结果。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-31T00:01:36.637

如果你看一下[`getViews`](https://github.com/tbranyen/backbone.layoutmanager/blob/master/backbone.layoutmanager.js#L89)，你会看到发生了什么：

```
getViews: function(fn) {
  //...
  if (typeof fn === "string") {
    return _.chain([this.views[fn]]).flatten();
  }
  //...
} 
```

如果您查看所有可能的返回值，您会发现它们都是[`_.chain`](http://underscorejs.org/#chain)调用的结果，而没有[`_.value`](http://underscorejs.org/#value)调用剥离链接包装器。这意味着这`getViews`将返回一个可链接的 Underscore 包装器，而不是您期望的简单数组。

您不应该这样做`_(@getViews '...')`，因为`getViews`返回值已经包含在下划线中。您应该可以这样做：

```
uploading = @getViews(".file-forms").some((view) -> view.uploading is true).value() 
```

* * *

顺便说一句，我对你的`v.uploading is true`测试有点怀疑；显式检查`true`并`false`可能导致奇怪的行为（尤其是在 CoffeeScript where `is`is really中`===`）。我可能会改用`(v) -> v.uploading`as 函数。当然，这是个人喜好。

# php - PHP: array_diff - 删除一个值

> ID：14615603
> 
> 赞同：3
> 
> 时间：2013-01-30T23:10:14.277
> 
> 标签：php, arrays

我目前正在尝试使用 array_diff 从数组中删除 1 个值。

代码现在看起来像这样：

```
$item_id = 501;
$array = array_diff($user_items, array($item_id)); 
```

用户项目数组：501,501,502,502

在数组中正确结果：502,502

是否可以仅删除 1x501 而不是 2x501 值？或者说不同：将删除限制为 1 个值

那么数组是：501,502,502

任何建议表示赞赏

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-30T23:13:27.543

您可以使用[`array_search`](http://php.net/manual/en/function.array-search.php)来查找和删除第一个值：

```
$pos = array_search($item_id, $user_items);

if($pos !== false)
  unset($user_items[$pos]); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-30T23:20:18.267

如何搜索该项目，然后如果它存在则将其删除？

```
$key = array_search($item_id, $user_items)
if ($key !== FALSE) {
  unset($user_items[$key]);
} 
```

使用`unset`并不像你想象的那么简单。有关详细信息，请参阅 Stefan Gehrig 在[此类似问题](https://stackoverflow.com/questions/369602/how-to-delete-an-element-from-an-array-in-php/369761)中的回答。

# automapper - Autofac 3 和 Automapper

> ID：14615607
> 
> 赞同：4
> 
> 时间：2013-01-30T23:10:30.183
> 
> 标签：automapper, autofac

有谁知道使用 Autofac 设置 Automapper 的综合指南。我对这两者都是新手，但我已经玩过静态 Mapper 类，但是我希望能够模拟和注入 IMappingEngine 并创建一个配置来设置我的所有映射。到目前为止，我看过的所有指南都没有真正解释发生了什么，我也无法完全弄清楚。此外，我正在使用 Autofac 3.0，它似乎在 ContainerBuilder 方法中存在一些差异，这无济于事（我使用它的原因是 Autofac.mvc4 依赖于它）。

**更新：**

好的，最简单的解决方案似乎效果很好，但是我在互联网上的任何地方都没有看到它，这可能是我不知道的一个很好的理由？最简单的做法就是将静态 Mapper.Engine 注册为 IMappingEngine 并仍然使用静态 Mapper.CreateMap 进行配置。

```
var builder = new ContainerBuilder();
builder.Register<IMappingEngine>(c => Mapper.Engine); 
```

现在 Autofac 可以将 IMappingEngine 注入到您的构造函数中。这确实意味着 Mapper 将处理 IMappingEngine 单例而不是 Autofac，而 Autofac 只是充当它的包装器。我希望 Autofac 处理 IMappingEngine 实例，但我不确定如何处理？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-03T19:37:36.677

只要您不想在单元测试中模拟映射器或为嵌套的生命周期范围创建具有修改配置的映射器，您的简单解决方案就可以了（后一个对我来说看起来有点奇怪，但谁知道）。

如果需要，可以从类中获取一些代码[并`Mapper`注册](https://github.com/AutoMapper/AutoMapper/blob/master/src/AutoMapper/Mapper.cs)组件，如下所示：

```
builder.Register(ctx => new ConfigurationStore(new TypeMapFactory(), MapperRegistry.AllMappers()))
       .AsImplementedInterfaces()
       .SingleInstance();

builder.RegisterType<MappingEngine>()
       .As<IMappingEngine>(); 
```

我不确定你是否真的需要做`IMappingEngine`一个单身人士。创建每个依赖项应该非常轻量级。

现在你可以像这样使用它：

```
// in a bootstrapper:
var mapperConfig = ctx.Resolve<IConfiguration>();
mapperConfig.CreateMap<A, B>();

// later on:
public class X{
    IMappingEngine _mapper;

    public X(IMappingEngine mapper){
        _mapper = mapper;
    }

    public B DoSmth(){
        return _mapper.Map<B>(new A());
    }
} 
```

您还可以像这样设置自动配置文件注册：

```
builder.Register(ctx => new ConfigurationStore(new TypeMapFactory(), MapperRegistry.AllMappers()))
       .AsImplementedInterfaces()
       .SingleInstance()
       .OnActivating(x => {
           foreach (var profile in x.Context.Resolve<IEnumerable<Profile>>()){
               x.Instance.AddProfile(profile);
           }
       }); 
```

然后只需`Profile`在 Autofac 配置或模块中的任何位置注册一个实现即可将其连接到配置。

# azure - Azure ACS 和 SimpleMembership

> ID：14615610
> 
> 赞同：0
> 
> 时间：2013-01-30T23:10:42.610
> 
> 标签：azure, asp.net-mvc-4, single-sign-on, acs

我想创建 azure mvc4 网站（azurewebsites）：

*   公司域内员工的 SSO（ADFS 已与 ACS 联合）
*   通过本地帐户或 LiveID OAuth（liveid 是 ACS 上的 IdP）访问外部（非员工）。
*   要求是管理应用程序中的用户配置文件和角色。

我看到以下选项：

1.  将我的应用与 ACS 联合并使用联合身份验证，为 UserProfiles 和 Membership 等创建自定义表集，在这种方法中，我不能使用任何现有的提供程序。我在索赔中没有必要的信息。

2.  为 ACS 编写自定义 OAuth/OAuth2 客户端（我找不到任何客户端）并使用 OAuthWebSecurity 注册它。这种方法似乎适合我，我可以使用 SimpleMembership 等。问题是我找不到任何示例如何以正确的方式实现它。

问：

在这种情况下，正确的方法是什么？

还有其他选择可以满足我的要求吗？

ACS 是否有任何 OAuthWebSecurity 客户端？

谢谢， Maciej

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T08:20:34.603

我会选择方法1。因为 -

a) 无论如何您都需要 ws-fed 来合并 ADFS b) ACS 没有 OAuth 客户端 - ACS 仅支持 OAuth 的一些特殊用例（这就是为什么您还没有找到它的客户端的原因）。

无论如何，您都希望完全控制您的数据库 - 而不是使用魔术/半生不熟（取决于您的观点）简单的会员资格...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-28T15:31:59.190

我们最近实施了一个类似问题的解决方案。我们所做的是：

*   使用 ACS 和身份提供程序（Windows Live、Google 等）获取身份令牌
*   使用我们自己的机制将这些身份映射到用户/角色。例如，我们在第一次登录时使用工资单数据来验证针对员工的索赔。
*   对于那些不想使用社交媒体身份的用户，我们允许他们在通过 ACS 链接的“自己的”身份提供者上创建用户名/密码。这是一项单独的服务，运行[Thinktecture Identity Server](http://thinktecture.github.io/Thinktecture.IdentityServer.v2/)的修改版本。所以我们使用 thinktecture 身份服务作为 STS 端点。
*   我们将对联合 ADFS 执行相同的操作（就像您所做的那样）

随着时间的推移，似乎我们可以使用 Thinktecture 服务器来替换 ACS 功能，并提供比 ACS 中可用的更多控制（例如使用我们自己的域名），但现在，ACS 可以工作，我们将保留它在那。但是 Thinktecture 服务，作为简单用户名/密码的替代登录，对我们来说很重要——但这确实意味着托管一个单独的云服务。

您想从 SimpleMembership 中得到什么？用户名/密码登录（在这种情况下使用/主机/构建用户名/密码 STS 端点），或成员/角色表（无论如何都不*是*很好）。？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-28T13:40:40.240

ASP.NET 中有一个 OAUTH2 客户端框架，我为此编写了一个 ACS 提供程序。Web 应用程序加载 OAUTH2 提供程序，它是 OAUTH2 端点的外观。实际上，它将 ws-fedp 与 ACS（及其各种发行人）进行对话。由于 oauth 协议或 ws-fedp 协议等都隐藏在提供程序中，因此 API 使用者（ASP.NET 管道）不知道（或关心）。毕竟，它已经不在乎它是否在同一个 API 后面谈论 OAUTH1、OAUTH2 或 openid。

它非常有效-并且可以毫不费力地重用简单的会员资格。适用于 Web 表单、网页和 MVC。后两者是开源的，其源代码访问有助于看到更大的图景。

# html - 访问二进制数据 源代码

> ID：14615611
> 
> 赞同：8
> 
> 时间：2013-01-30T23:10:48.193
> 
> 标签：html, html5-audio

对于一些小型黑客项目，我想将 MP3 的原始数据加载到 ArrayBuffer 中。

```
<audio src="http://xyz.com/test.mp3"> 
```

我知道一个`<audio>`元素公开了一些基本功能，但我找不到我要找的东西。如果有这样的东西，它很可能是 Web Audio API 的一部分，并且现在只能在 Chrome 中使用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T23:24:53.010

您无法访问 HTML5`<audio>`元素的原始数据。

你能做的是

*   通过 AJAX 加载数据

*   从结果中获取原始数据以供内部使用

*   将数据转发给音频元素（这里可能需要做data-uri）

但是对于这种操作，我建议使用 Web Audio API 而不是`<audio>`：

[http://www.html5rocks.com/en/tutorials/webaudio/intro/](http://www.html5rocks.com/en/tutorials/webaudio/intro/)

Firefox 支持应该在几次迭代中实现。

# python - 关于连分数的 Python 代码

> ID：14615615
> 
> 赞同：0
> 
> 时间：2013-01-30T23:11:25.713
> 
> 标签：python

我试图了解下面的 python 代码中发生了什么。我取 2 的平方根并将其小数除以 1。这样做 5 次始终给出相同的值，但第 6 次和第 7 次我得到不同的值。

为什么输入值与前 5 次计算相同时，第 6 次输出会发生变化？

```
import math as M
frct = M.sqrt(2)

# 1
frct = 1 / (frct - int(frct))
print frct # 2.41421356237

# 2
frct = 1 / (frct - int(frct))
print frct # 2.41421356237

# 3
frct = 1 / (frct - int(frct))
print frct # 2.41421356237

# 4
frct = 1 / (frct - int(frct))
print frct # 2.41421356237

# 5
frct = 1 / (frct - int(frct))
print frct # 2.41421356237

# 6
frct = 1 / (frct - int(frct))
print frct # 2.41421356238

# 7
frct = 1 / (frct - int(frct))
print frct # 2.41421356235 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-30T23:22:17.423

短版，Python 正在四舍五入输出:)

```
import math as M
frct = M.sqrt(2)

for i in range(7):
    frct = 1 / (frct - int(frct))
    print 'Attempt %d: %.20f' % (i, frct) 
```

长版本，浮点不存储真实（没有双关语）值，它们存储指数和尾数。有关更多信息，请参阅此维基百科页面：[http ://en.wikipedia.org/wiki/Floating_point](http://en.wikipedia.org/wiki/Floating_point)

基本上，浮点数的存储方式如下：

```
Significant digits × base^exponent 
```

如果您想要 Python 中更精确的版本，请尝试使用 decimal 模块：

```
import decimal
context = decimal.Context(prec=100)
frct = context.sqrt(decimal.Decimal(2))

print 'Original square root:', frct

for i in range(7):
    frct = context.divide(1, frct - int(frct))
    print 'Attempt %d: %s' % (i, frct) 
```

输出：

```
Original square root: 1.414213562373095048801688724209698078569671875376948073176679737990732478462107038850387534327641573
Attempt 0: 2.414213562373095048801688724266222622763067167798368627068136427003657772608039155697953022512189319
Attempt 1: 2.414213562373095048801688723683379910288448158038030882339615025168647691299718507620657724911891709
Attempt 2: 2.414213562373095048801688727180436185136162216600057354932063779738350752352175486771948426117071942
Attempt 3: 2.414213562373095048801688706780941248524496874988236407630784335182989956231878308913506955872772859
Attempt 4: 2.414213562373095048801688825680854593346774866097140494471009059332623720827093783193465943198777227
Attempt 5: 2.414213562373095048801688132680869461024772261055702548455940065126184103929661474210576202848416747
Attempt 6: 2.414213562373095048801692171780866910134509900201052604731129303452089934643341550673727041448985316 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-30T23:17:18.333

`print frct`显示`str(frct)`哪个显示的有效数字数量少于准确复制数字所需的数量。替换`print frct`为`print repr(frct)`，您会发现前五次数字不一样，它们变化得足够慢（起初），以使其四舍五入的表示保持不变：

```
2.4142135623730945
2.4142135623730985
2.414213562373075
2.414213562373212
2.4142135623724124
2.414213562377074
2.414213562349904 
```

# asp.net - URL 重定向问题 ASP.NET

> ID：14615619
> 
> 赞同：1
> 
> 时间：2013-01-30T23:12:02.297
> 
> 标签：asp.net, url, iis, redirect, config

我遇到了重定向都重定向到同一页面的问题，我需要它们重定向到完全匹配的页面，而不仅仅是部分匹配。

例如：product.asp?dtlid=2 应该转到页面 A product.asp?dtlid=212 应该转到页面 B

似乎两个页面都转到产品 A，因为在这两种情况下第一个数字都是 2，我的代码如下。提前致谢。

```
<rule name="RedirectP251" stopProcessing="true">
          <match url="catalog/details.asp$" />
          <conditions logicalGrouping="MatchAll" trackAllCaptures="true">
            <add input="{QUERY_STRING}" pattern="dtlid=2" />
          </conditions>
          <action type="Redirect" url="http://www.sitename.com/producta.mvc" appendQueryString="false" redirectType="Permanent" />
        </rule>
<rule name="RedirectP671" stopProcessing="true">
          <match url="catalog/details.asp$" />
          <conditions logicalGrouping="MatchAll" trackAllCaptures="true">
            <add input="{QUERY_STRING}" pattern="dtlid=211" />
          </conditions>
          <action type="Redirect" url="http://www.sitename.com/productb.mvc" appendQueryString="false" redirectType="Permanent" />
        </rule> 
```

# performance - knockout.js 和最快的模板引擎

> ID：14615626
> 
> 赞同：3
> 
> 时间：2013-01-30T23:12:57.413
> 
> 标签：performance, knockout.js, template-engine, dot.js

我需要一个比内置的 knockout.js 更快的模板引擎。什么是最快的，你如何设置它？网上有例子吗？我一直在考虑 doT.js 或车把。我想等待 JsRender，但性能没有达到标准。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-31T20:08:45.130

我专门为快速表生成创建了一个绑定：[https](https://github.com/mbest/knockout-table) ://github.com/mbest/knockout-table 。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-31T16:43:51.547

**这个答案不再准确。Knockout 2.2 现在支持通过 foreach 绑定重新排序元素。**

敲除的主要问题`observableArray`是所有修改数组的操作都会导致`foreach`绑定下的元素完全重新呈现。如果这成为性能瓶颈，您可以通过不移动行而是复制它们的值来解决这个问题。

在每次更改时重新渲染整个内容的明显方式`foreach`如下：

```
function Row(value) {
    this.value = value;
}
var model = {
    rows = ko.observableArray([new Row(1), new Row(2), new Row(3), new Row(4), new Row(5)])
}
function move(index, insertionIndex) {
    var rows = models.rows();
    // TODO Insert some clever code here
    // - remove row from rows array
    // - insert row at insertionIndex into rows array
    rows.valueHasMutated();
} 
```

由于这将重绘整个表格，这可能不是您想要的。更好的方法是支持复制的可变 Row 元素：

```
function Row(value) {
    this.value = ko.observable(value);
}
Row.prototype.copyFrom(anotherRow) {
    this.value(anotherRow().value());
}
Row.prototype.swap(anotherRow) {
    var tmp = this.value();
    this.value(anotherRow.value());
    anotherRow.value(tmp);
}
var model = {
    rows = ko.observableArray([new Row(1), new Row(2), new Row(3), new Row(4), new Row(5)])
}
function move(index, insertionIndex) {
    var rows = models.rows();
    var tmp = new Row();
    tmp.copyFrom(rows[index]) // save the current row
    if (index < insertionIndex) {
        // move row down -> move other rows up
        for (var i=index; i<insertionIndex; i++) {
            rows[i].copyFrom(rows[i+1])
        }
    } else {
        // move row up -> move other rows down
        for (var i=index; i>insertionIndex; i--) {
            rows[i].copyFrom(rows[i-1])
        }
    }
} 
```

请注意，您不再需要使用 ，`rows.valueHasMutated()`因为您不是在修改数组而是更改`Row`对象。因此`foreach`绑定不会更新，您只会重新呈现更改的行。

如果淘汰赛能够提供更强大`observableArray`和`foreach`绑定的处理程序实现，而不需要在更改时重新呈现整个模板，那将是很酷的。在那之前，如果您想坚持使用 Knockout，这是您最好的选择。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-11-15T19:47:03.560

我发现了这个错误，[http://bugs.jqueryui.com/ticket/6757](http://bugs.jqueryui.com/ticket/6757)，并且有人回答了另一个修复它的问题。

[Knockout.js 和大型数据集也使下拉列表变慢](https://stackoverflow.com/questions/19883679/knockout-js-and-large-dataset-makes-dropdown-list-slow-also)

# php - 通过php执行时MYSql查询不给出结果

> ID：14615628
> 
> 赞同：0
> 
> 时间：2013-01-30T23:13:21.633
> 
> 标签：php, mysql

没有显示输出。但是对于其他一些查询，代码运行而不是这个查询。此外，此查询在终端上运行良好。请指导！！

```
<?php
$con=mysql_connect('servername','uname','passwd');
mysql_select_db('dbname');

$sql="select jobid from jobs where userid='xyz'";
$result=mysql_query($sql);
while($col=mysql_fetch_assoc($result)){
echo 'jobid:' . $col['jobid'] . '</br>';
}
?> 
```

# java - 启用 webmvc 时，基于 Spring Java 的配置和 JUnit 不起作用

> ID：14615629
> 
> 赞同：3
> 
> 时间：2013-01-30T23:13:22.937
> 
> 标签：java, spring, model-view-controller, configuration, junit

我从一个新的基于**Spring 3.2.0.RELEASE的应用程序开始，我真的很想取消 XML 配置，因为它是一个新项目，但是在编写****Junit**测试时我遇到了困难。

这是 java 配置 ( **WebConfig.java** ): package com.myapp.config;

```
import org.springframework.context.annotation.Bean;
import org.springframework.context.annotation.ComponentScan;
import org.springframework.context.annotation.Configuration;
import org.springframework.web.servlet.config.annotation.EnableWebMvc;
import org.springframework.web.servlet.view.InternalResourceViewResolver;

@Configuration
@EnableWebMvc
@ComponentScan("com.myapp.controllers")
public class WebConfig{
     @Bean
     public InternalResourceViewResolver configureInternalResourceViewResolver() {
         InternalResourceViewResolver resolver = new InternalResourceViewResolver();
         resolver.setPrefix("/WEB-INF/views/");
         resolver.setSuffix(".jsp");
         return resolver;
     }
} 
```

这是**测试类**：

```
package com.myapp.test.integration;

import org.junit.Test;
import org.junit.runner.RunWith;
import org.springframework.test.context.ContextConfiguration;
import org.springframework.test.context.junit4.SpringJUnit4ClassRunner;
import org.springframework.test.context.web.WebAppConfiguration;

import com.myapp.config.WebConfig;

@RunWith(SpringJUnit4ClassRunner.class)
@ContextConfiguration(classes={ WebConfig.class})
@WebAppConfiguration
public class HomeControllerTest {

    @Test
    public void testController(){
        System.out.println("Executing test");
    }   

} 
```

当我尝试**运行**测试时，我得到以下信息（我已启用**调试**以获取更多信息）：

```
DEBUG: org.springframework.test.context.junit4.SpringJUnit4ClassRunner - SpringJUnit4ClassRunner constructor called with [class com.myapp.test.integration.HomeControllerTest].
DEBUG: org.springframework.test.context.support.AbstractDelegatingSmartContextLoader - Delegating to AnnotationConfigWebContextLoader to process context configuration [ContextConfigurationAttributes@252d252d declaringClass = 'com.myapp.test.integration.HomeControllerTest', locations = '{}', classes = '{class com.myapp.config.WebConfig}', inheritLocations = true, initializers = '{}', inheritInitializers = true, contextLoaderClass = 'org.springframework.test.context.ContextLoader'].
DEBUG: org.springframework.test.context.ContextLoaderUtils - Could not find an 'annotation declaring class' for annotation type [org.springframework.test.context.ActiveProfiles] and class [com.myapp.test.integration.HomeControllerTest]
DEBUG: org.springframework.test.context.TestContextManager - @TestExecutionListeners is not present for class [class com.myapp.test.integration.HomeControllerTest]: using defaults.
DEBUG: org.springframework.test.context.TestContextManager - Could not instantiate default TestExecutionListener class [org.springframework.test.context.transaction.TransactionalTestExecutionListener]. Specify custom listener classes or make the default listener classes available.
DEBUG: org.springframework.test.annotation.ProfileValueUtils - Retrieved @ProfileValueSourceConfiguration [null] for test class [com.myapp.test.integration.HomeControllerTest]
DEBUG: org.springframework.test.annotation.ProfileValueUtils - Retrieved ProfileValueSource type [class org.springframework.test.annotation.SystemProfileValueSource] for class [com.myapp.test.integration.HomeControllerTest]
DEBUG: org.springframework.test.annotation.ProfileValueUtils - Retrieved @ProfileValueSourceConfiguration [null] for test class [com.myapp.test.integration.HomeControllerTest]
DEBUG: org.springframework.test.annotation.ProfileValueUtils - Retrieved ProfileValueSource type [class org.springframework.test.annotation.SystemProfileValueSource] for class [com.myapp.test.integration.HomeControllerTest]
DEBUG: org.springframework.test.annotation.ProfileValueUtils - Retrieved @ProfileValueSourceConfiguration [null] for test class [com.myapp.test.integration.HomeControllerTest]
DEBUG: org.springframework.test.annotation.ProfileValueUtils - Retrieved ProfileValueSource type [class org.springframework.test.annotation.SystemProfileValueSource] for class [com.myapp.test.integration.HomeControllerTest]
DEBUG: org.springframework.test.annotation.ProfileValueUtils - Retrieved @ProfileValueSourceConfiguration [null] for test class [com.myapp.test.integration.HomeControllerTest]
DEBUG: org.springframework.test.annotation.ProfileValueUtils - Retrieved ProfileValueSource type [class org.springframework.test.annotation.SystemProfileValueSource] for class [com.myapp.test.integration.HomeControllerTest]
DEBUG: org.springframework.test.annotation.ProfileValueUtils - Retrieved @ProfileValueSourceConfiguration [null] for test class [com.myapp.test.integration.HomeControllerTest]
DEBUG: org.springframework.test.annotation.ProfileValueUtils - Retrieved ProfileValueSource type [class org.springframework.test.annotation.SystemProfileValueSource] for class [com.myapp.test.integration.HomeControllerTest]
DEBUG: org.springframework.test.annotation.ProfileValueUtils - Retrieved @ProfileValueSourceConfiguration [null] for test class [com.myapp.test.integration.HomeControllerTest]
DEBUG: org.springframework.test.annotation.ProfileValueUtils - Retrieved ProfileValueSource type [class org.springframework.test.annotation.SystemProfileValueSource] for class [com.myapp.test.integration.HomeControllerTest]
DEBUG: org.springframework.test.context.support.AbstractDelegatingSmartContextLoader - Delegating to AnnotationConfigWebContextLoader to load context from [WebMergedContextConfiguration@a580a58 testClass = HomeControllerTest, locations = '{}', classes = '{class com.myapp.config.WebConfig}', contextInitializerClasses = '[]', activeProfiles = '{}', resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader'].
DEBUG: org.springframework.test.context.web.AbstractGenericWebContextLoader - Loading WebApplicationContext for merged context configuration [WebMergedContextConfiguration@a580a58 testClass = HomeControllerTest, locations = '{}', classes = '{class com.myapp.config.WebConfig}', contextInitializerClasses = '[]', activeProfiles = '{}', resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader'].
DEBUG: org.springframework.test.context.web.AnnotationConfigWebContextLoader - Registering annotated classes: {class com.myapp.config.WebConfig}
INFO : org.springframework.web.context.support.GenericWebApplicationContext - Refreshing org.springframework.web.context.support.GenericWebApplicationContext@5cf15cf1: startup date [Wed Jan 30 17:42:16 EST 2013]; root of context hierarchy
INFO : org.springframework.context.annotation.ClassPathBeanDefinitionScanner - JSR-250 'javax.annotation.ManagedBean' found and supported for component scanning
INFO : org.springframework.context.annotation.ClassPathBeanDefinitionScanner - JSR-330 'javax.inject.Named' annotation found and supported for component scanning
INFO : org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor - JSR-330 'javax.inject.Inject' annotation found and supported for autowiring
DEBUG: org.springframework.ui.context.support.UiApplicationContextUtils - Unable to locate ThemeSource with name 'themeSource': using default [org.springframework.ui.context.support.ResourceBundleThemeSource@7a487a48]
INFO : org.springframework.beans.factory.support.DefaultListableBeanFactory - Pre-instantiating singletons in org.springframework.beans.factory.support.DefaultListableBeanFactory@61266126: defining beans [org.springframework.context.annotation.internalConfigurationAnnotationProcessor,org.springframework.context.annotation.internalAutowiredAnnotationProcessor,org.springframework.context.annotation.internalRequiredAnnotationProcessor,org.springframework.context.annotation.internalCommonAnnotationProcessor,webConfig,org.springframework.context.annotation.ConfigurationClassPostProcessor.importAwareProcessor,homeController,org.springframework.web.servlet.config.annotation.DelegatingWebMvcConfiguration,requestMappingHandlerMapping,mvcContentNegotiationManager,viewControllerHandlerMapping,beanNameHandlerMapping,resourceHandlerMapping,defaultServletHandlerMapping,requestMappingHandlerAdapter,mvcConversionService,mvcValidator,httpRequestHandlerAdapter,simpleControllerHandlerAdapter,handlerExceptionResolver,configureInternalResourceViewResolver]; root of factory hierarchy
INFO : org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping - Mapped "{[/],methods=[GET],params=[],headers=[],consumes=[],produces=[],custom=[]}" onto public java.lang.String com.myapp.controllers.HomeController.home(java.util.Locale,org.springframework.ui.Model)
DEBUG: org.springframework.jndi.JndiTemplate - Looking up JNDI object with name [java:comp/env/spring.liveBeansView.mbeanDomain]
Jan 30, 2013 5:42:17 PM null null
SEVERE: javaAccessorNotSet
DEBUG: org.springframework.jndi.JndiLocatorDelegate - Converted JNDI name [java:comp/env/spring.liveBeansView.mbeanDomain] not found - trying original name [spring.liveBeansView.mbeanDomain]. javax.naming.ConfigurationException: Name space accessor for the java: name space has not been set. Possible cause is that the user is specifying a java: URL name in a JNDI Context method call but is not running in a J2EE client or server environment.
DEBUG: org.springframework.jndi.JndiTemplate - Looking up JNDI object with name [spring.liveBeansView.mbeanDomain]
DEBUG: org.springframework.test.context.support.DirtiesContextTestExecutionListener - After test class: context [[TestContext@12a312a3 testClass = HomeControllerTest, testInstance = [null], testMethod = [null], testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@a580a58 testClass = HomeControllerTest, locations = '{}', classes = '{class com.myapp.config.WebConfig}', contextInitializerClasses = '[]', activeProfiles = '{}', resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader']]], dirtiesContext [false]. 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T08:08:30.987

您忘记设置活动配置文件。这是一个正在运行的示例测试。家庭控制器：

```
package com.myapp.test.integration;

import org.springframework.context.annotation.Profile;
import org.springframework.stereotype.Controller;
import org.springframework.web.bind.annotation.RequestMapping;

/**
 *
 */
@Controller
@Profile("cloudx")
public class HomeController {
    @RequestMapping("/test")
    public String test() {
        return "test";
    }
} 
```

网络配置：

```
package com.myapp.test;

import org.springframework.context.annotation.Bean;
import org.springframework.context.annotation.ComponentScan;
import org.springframework.context.annotation.Configuration;
import org.springframework.web.servlet.config.annotation.EnableWebMvc;
import org.springframework.web.servlet.view.InternalResourceViewResolver;

@Configuration
@EnableWebMvc
@ComponentScan("com.myapp.test")
public class WebConfig {
    @Bean
    public InternalResourceViewResolver configureInternalResourceViewResolver() {
        InternalResourceViewResolver resolver = new InternalResourceViewResolver();
        resolver.setPrefix("/WEB-INF/views/");
        resolver.setSuffix(".jsp");
        return resolver;
    }
} 
```

家庭控制器测试：

```
package com.myapp.test;

import static org.springframework.test.web.servlet.request.MockMvcRequestBuilders.get;
import static org.springframework.test.web.servlet.result.MockMvcResultMatchers.status;

import org.junit.Before;
import org.junit.Test;
import org.junit.runner.RunWith;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.test.context.ActiveProfiles;
import org.springframework.test.context.ContextConfiguration;
import org.springframework.test.context.junit4.SpringJUnit4ClassRunner;
import org.springframework.test.context.web.WebAppConfiguration;
import org.springframework.test.web.servlet.MockMvc;
import org.springframework.test.web.servlet.MvcResult;
import org.springframework.test.web.servlet.setup.MockMvcBuilders;
import org.springframework.web.context.WebApplicationContext;

@RunWith(SpringJUnit4ClassRunner.class)
@ContextConfiguration(classes = WebConfig.class)
@WebAppConfiguration
@ActiveProfiles("cloudx")
public class HomeControllerTest {
    @Autowired
    protected WebApplicationContext wac;
    protected MockMvc mockMvc;

    @Before
    public final void onSetup() throws Exception {
        mockMvc = MockMvcBuilders.webAppContextSetup(wac).build();
    }

    @Test
    public void test() throws Exception {
        MvcResult result = mockMvc.perform(get("/test")).andExpect(status().isOk()).andReturn();
        System.out.println(result.getResponse().getContentAsString());
    }

} 
```

# inno-setup - 如何制作带有背景窗口图像幻灯片和无限音乐循环播放的安装程序？

> ID：14615631
> 
> 赞同：1
> 
> 时间：2013-01-30T23:13:30.660
> 
> 标签：inno-setup

我想在我的安装程序中有：

*   安装过程中无限循环播放音乐

*   背景上的一个窗口（就像以前的安装一样，用图像填充屏幕并只显示安装窗口），在该背景窗口上带有幻灯片

如何在 InnoSetup 中执行此操作？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-31T00:57:14.220

如果您想要安装一个带有无限音乐曲目播放的背景图像幻灯片的安装程序，您可以执行以下操作：

*   [`InnoCallback`](http://www.sherlocksoftware.org/page.php?id=55)获取用于幻灯片计时器实现的库的最新版本
*   [`Inno Media Player`](http://code.google.com/p/inno-media-player/wiki/Introduction?tm=6)用于音乐播放获取例如Unicode Inno Setup的最新副本

编写一个类似于以下或 的脚本[`download the complete project`](http://code.google.com/p/projects-stackoverflow-tlama/downloads/detail?name=14615631.ZIP)，其中包括下一个脚本代码中使用的所有必要文件。因此，您唯一需要做的就是在最新版本的 Unicode Inno Setup 中构建它。

***请注意，Inno Media Player 是一个 Unicode 库，因此您只能将它与 Inno Setup 的 Unicode 版本一起使用，而不能与 ANSI 版本一起使用！不支持 ANSI 版本的 Inno Setup...！***

```
[Setup]
AppName=My Program
AppVersion=1.5
DefaultDirName={pf}\My Program
OutputDir=userdocs:Inno Setup Examples Output
BackColor=clLime
BackColor2=clYellow
WindowVisible=yes

[Files]
Source: "Image1.bmp"; Flags: dontcopy
Source: "Image2.bmp"; Flags: dontcopy
Source: "AudioFile.mp3"; Flags: dontcopy
Source: "MediaPlayer.dll"; Flags: dontcopy
Source: "InnoCallback.dll"; Flags: dontcopy

[Code]
var
  TimerID: Integer;
  SlideID: Integer;
  BackImage: TBitmapImage;
const
  EC_COMPLETE = $01;
type
  TTimerProc = procedure(Wnd: HWND; Msg: UINT; TimerID: UINT_PTR; 
    SysTime: DWORD);
  TDirectShowEventProc = procedure(EventCode, Param1, Param2: Integer);

function WrapTimerProc(Callback: TTimerProc; ParamCount: Integer): LongWord;
  external 'wrapcallback@files:InnoCallback.dll stdcall';    
function SetTimer(hWnd: HWND; nIDEvent, uElapse: UINT;
  lpTimerFunc: UINT): UINT; external 'SetTimer@user32.dll stdcall';
function KillTimer(hWnd: HWND; uIDEvent: UINT): BOOL; 
  external 'KillTimer@user32.dll stdcall'; 

function DSGetLastError(var ErrorText: WideString): HRESULT;
  external 'DSGetLastError@files:mediaplayer.dll stdcall';
function DSPlayMediaFile: Boolean;
  external 'DSPlayMediaFile@files:mediaplayer.dll stdcall';
function DSStopMediaPlay: Boolean;
  external 'DSStopMediaPlay@files:mediaplayer.dll stdcall';
function DSSetVolume(Value: LongInt): Boolean;
  external 'DSSetVolume@files:mediaplayer.dll stdcall';
function DSInitializeAudioFile(FileName: WideString; 
  CallbackProc: TDirectShowEventProc): Boolean; 
  external 'DSInitializeAudioFile@files:mediaplayer.dll stdcall';

procedure OnMediaPlayerEvent(EventCode, Param1, Param2: Integer); 
begin
  if EventCode = EC_COMPLETE then
  begin
    if DSInitializeAudioFile(ExpandConstant('{tmp}\AudioFile.mp3'), 
      @OnMediaPlayerEvent) then
    begin
      DSSetVolume(-2500);
      DSPlayMediaFile;
    end;
  end;
end;

procedure OnSlideTimer(Wnd: HWND; Msg: UINT; TimerID: UINT_PTR; 
  SysTime: DWORD);
begin
  case SlideID of 
    0: SlideID := 1;
    1: SlideID := 0;
  end;
  BackImage.Bitmap.LoadFromFile(
    ExpandConstant('{tmp}\Image' + IntToStr(SlideID + 1) + '.bmp'));
end;

procedure StartSlideTimer;
var
  TimerCallback: LongWord;
begin
  TimerCallback := WrapTimerProc(@OnSlideTimer, 4);
  { third parameter here is the timer's timeout value in milliseconds }
  TimerID := SetTimer(0, 0, 5000, TimerCallback);
end;

procedure KillSlideTimer;
begin
  if TimerID <> 0 then 
  begin
    if KillTimer(0, TimerID) then
      TimerID := 0;
  end;
end;

procedure InitializeWizard;
var
  ErrorCode: HRESULT;
  ErrorText: WideString;   
begin
  TimerID := 0;
  SlideID := 0;
  ExtractTemporaryFile('Image1.bmp');
  ExtractTemporaryFile('Image2.bmp');
  BackImage := TBitmapImage.Create(MainForm);
  BackImage.Parent := MainForm;
  BackImage.Top := 70;
  BackImage.Left := 10;  
  BackImage.AutoSize := True;
  BackImage.Bitmap.LoadFromFile(ExpandConstant('{tmp}\Image1.bmp'));
  StartSlideTimer;

  ExtractTemporaryFile('AudioFile.mp3');
  if DSInitializeAudioFile(ExpandConstant('{tmp}\AudioFile.mp3'), 
    @OnMediaPlayerEvent) then
  begin
    DSSetVolume(-2500);
    DSPlayMediaFile;
  end
  else
  begin
    ErrorCode := DSGetLastError(ErrorText);
    MsgBox('TDirectShowPlayer error: ' + IntToStr(ErrorCode) + '; ' + 
      ErrorText, mbError, MB_OK);
  end;
end;

procedure DeinitializeSetup;
begin
  KillSlideTimer;
  DSStopMediaPlay;
end; 
```

***更多资源：***

*   [`How to make a slideshow in InnoSetup ?`](https://stackoverflow.com/q/10130184/960757)
*   [`How to play a sound during InnoSetup installation process ?`](https://stackoverflow.com/q/12359859/960757)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-09-22T08:24:11.213

创建背景功能：

您是否尝试**过图形安装程序**( [http://www.graphical-installer.com](http://www.graphical-installer.com) )？

这是一个专业的 Inno Setup 扩展（创建具有背景的酷炫安装程序），因此创建这样的安装程序只需几分钟（无需编码）。

# php - 反转wordpress标题标签

> ID：14615640
> 
> 赞同：0
> 
> 时间：2013-01-30T23:13:52.863
> 
> 标签：php, wordpress, title, codex

我想构建我的标题标签以显示：站点名称 | 页面标题

根据[法典](http://codex.wordpress.org/Function_Reference/wp_title)，这应该有效：

```
<?php wp_title('|',true,'right'); ?><?php bloginfo('name'); ?> 
```

但它正在反向呈现：页面标题| 站点名称

任何其他受控的位置，可能会导致覆盖？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T23:29:15.347

根据法典，您可以编辑标题以完全按照您的意愿进行操作。

```
<title><?php is_home() ? bloginfo('description') : wp_title('', false); ?> | <?php bloginfo('name'); ?></title> 
```

那是你要找的吗？

# prolog - B-Prolog 中的表格模式和回溯

> ID：14615645
> 
> 赞同：3
> 
> 时间：2013-01-30T23:14:22.713
> 
> 标签：prolog, b-prolog

考虑程序：

```
:- table cost(+, min).
cost(1, 0).
cost(1, 1).
cost(2, 1). 
```

我预计结果`cost(I, C).`是 I = 1, C = 0; I = 2, C = 1 - 所有可能的输入参数以及相应的最小结果。

但我只得到一个：

```
cost(I, C).
I = 1
C = 0 ?;
no 
```

但是，如果我明确指出输入参数的所有可能性，我会得到我想要的：

```
( I = 1 ; I = 2 ), cost(I, C).
I = 1
C = 0 ?;
I = 2
C = 1 ?;
no 
```

是否可以在不显式枚举所有可能输入的情况下获得具有相应最小结果的输入参数的所有组合？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T14:34:42.313

具有优化模式（最小值或最大值）的表声明指示系统为输入参数的每个组合表一个答案。您可以给出基数限制以指示系统存储多个最佳答案。例如，您可以给出如下声明：

```
:- table cost(+, min):3. 
```

然后，系统将为每个输入列出最多 3 个最佳答案，按最优性排序。如果没有明确给出限制，则假定为 1。

系统不会存储所有答案。这很重要，因为对于动态规划问题，您只需要记住子问题的当前最佳答案。

周能发

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-12-24T00:35:41.070

前段时间，我在 B-Prolog 手册中找到了答案：“请注意，**如果不尊重表模式**，或者如果没有优化参数**的界限，程序可能会给出意想不到的答案**”。

问题中的代码不尊重“表成本（+，min）”。模式并尝试使用第一个 cost/2 参数作为输出。

# emacs - 添加一个函数到 在 emacs 中

> ID：14615646
> 
> 赞同：0
> 
> 时间：2013-01-30T23:14:23.400
> 
> 标签：emacs

我想在输入时添加（删除尾随空格）。

我找不到提供的东西，因此我无法将它绑定到我的新功能。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-30T23:32:01.863

就我个人而言，我不建议将其绑定到 enter 键，因为这可能经常发生并且可能很慢，而是我使用

```
(add-hook 'before-save-hook 'delete-trailing-whitespace) 
```

这只是在您保存文件时删除所有尾随空格，而不是每次按下键时。

如果您仍想绑定它，请查看@ataylor 的答案。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-31T00:48:47.663

从你正在按下的行中删除空格怎么样`RET`？

```
(defun delete-whitespace-on-this-line-then-newline ()
  "before doing a newline, remove any trailing whitespace on this line"
  (interactive)
  (save-match-data
    (save-excursion
      (beginning-of-line)
      (when (re-search-forward "\\s-+$" (line-end-position) t)
        (replace-match ""))))
  (newline)) 
```

这不像[耶稣拉莫斯的](https://stackoverflow.com/a/14615866/6148)答案那么好，但它是你所要求的。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-30T23:29:57.623

键必须绑定到命令，因此首先定义一个执行您想要的命令：

```
(defun delete-trailing-whitespace-newline ()
  (interactive)
  (delete-trailing-whitespace)
  (newline)) 
```

defun 需要一个顶层的交互式表单作为命令。然后将密钥绑定到命令：

```
(global-set-key (kbd "RET") 'delete-trailing-whitespace-newline) 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-31T00:32:36.043

看看这个答案及其评论：

[https://stackoverflow.com/a/14164500/324105](https://stackoverflow.com/a/14164500/324105)

我使用*仅从*`ws-trim`我编辑的行中自动删除尾随空格（这是我认为您希望通过键绑定实现的更强大的解决方案）。*`enter`*

 *event_jr 还提到`ws-butler`，它做了类似的事情，但仅在您保存时删除尾随空格（仍然仅从您编辑的行中删除）。*

# csv - 从 CSV 导入时将字段设置为缺失

> ID：14615647
> 
> 赞同：1
> 
> 时间：2013-01-30T23:14:24.163
> 
> 标签：csv, sas

```
data myout;
infile "&path.\regex.csv" dlm=',';
input fname $ format1 $ format2 $ format3 $; 
run; 
```

我的 CSV 看起来像：

```
field_name, format1, format2, format3
bank_acct, /\d{8}/,,
sort_code, /\d{2}-\d{2}-\d{2}/,,
bank_name, string,,
credit_card, /\d{16}/,,
customer_id, /\s{2}\d{11}/, /\s{1}\d{12}/, /\d{12}/
... 
```

在没有第二种和第三种格式的情况下，如何将字段设置为缺失？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T00:06:44.213

将`DSD`添加`TRUNCOVER`选项添加到您的**INFILE**语句：

```
data myout;
   infile "&path.\regex.csv" dlm=',' DSD TRUNCOVER;
   input fname $ format1 $ format2 $ format3 $; 
run; 
```

空的数据行将自动设置为缺失。

# ruby-on-rails - 在 rails 中自定义 facebook like 按钮的行为

> ID：14615650
> 
> 赞同：1
> 
> 时间：2013-01-30T23:14:40.677
> 
> 标签：ruby-on-rails, facebook, facebook-like

我有这个问题：我的网站上有一个普通的 iframe facebook like 按钮，我破解了标签内的 url，以便它始终指向我希望它指向的特定链接。但是，当我在 facebook.com 中看到“赞”时，它 (1) 为“赞”选择了一个看似随机的图像，并且 (2) “赞”的标题始终相同，即站点名称！

我怎样才能拥有一个可以产生适当“喜欢”的多功能按钮？当我的访问者点击它时，我希望他们的 Facebook 时间线显示我选择的图像和我选择的标题。

我使用rails，我有一个自定义身份验证（没有omniauth）。那么，我可以在自定义身份验证中使用 opengraph、图形 API 吗？这些东西只适用于 cookie 吗？我应该把标题和我想去时间轴的图像是一些特定的标签吗？

让我提醒您，在 rails 中，<head> 内容似乎无法更改，因为布局模板已指定一次。

*   *   twitter API 可以无缝运行 BTW。

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T00:12:17.520

您希望您的页面符合[Open Graph 协议](http://developers.facebook.com/docs/opengraphprotocol/)。这是一种奇特的说法，即您需要在文档的头部添加一些新的元标记：一旦您这样做了，您的“赞”按钮将自动拾取它。

尽管您通常在 head 中定义一次内容，但您仍然可以稍后将内容添加到其中。您视图中的实例变量将被加载到模板中，因此您可以执行以下简单操作：

```
application.html.erb
<head>
<%= @stuff %>
</head>

view.html.erb
<% @stuff = "<meta ...>" %> 
```

但是，这不是完全可扩展或自动的。冒着自吹自擂的风险，我写了一篇博文，讨论如何带着顾虑来做这[件事，如果你有兴趣，可以看看](http://joshsymonds.com/blog/2012/07/12/rails-concerns-iii-metatags/)。

# c++ - 如何制作一个带有关闭按钮且窗口左上角没有图标/菜单的窗口？

> ID：14615651
> 
> 赞同：3
> 
> 时间：2013-01-30T23:14:42.713
> 
> 标签：c++, winapi

如何创建一个窗口，其右侧有菜单按钮，例如关闭按钮，但左侧没有图标，当您单击它时会打开一个菜单。

编辑：为了清楚起见，我添加了一个图形示例。[![例子](../Images/2e226f9a131862b65aea658378e24e0c.png)](https://i.stack.imgur.com/qKm08.jpg)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T23:27:31.650

这是 CreateWindowEx 的 api 参考。

[http://msdn.microsoft.com/en-us/library/ms632680(v=VS.85).aspx](http://msdn.microsoft.com/en-us/library/ms632680(v=VS.85).aspx)

如果你有一个窗口句柄，你可以调用带有 WS_EX_TOOLWINDOW 标志的 SetWindowLong，它类似于单边框样式但更小。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-11-06T03:36:47.313

创建窗口的时候就写：WS_SYSMENU & ~WS_CAPTION

# crm - 在 Chrome 中评估方法 XPath

> ID：14615652
> 
> 赞同：0
> 
> 时间：2013-01-30T23:14:44.617
> 
> 标签：crm, microsoft-dynamics, jscript

我正在使用 CRM Dynamics 2011。我有这个代码

```
var roles = oXml.selectNodes("//BusinessEntity/q1:name"); 
```

其中 oXml 是我的 xml，通过 XMLHttpRequest 获得。

我需要我的代码在 Chrome 中工作，但似乎 chrome 不支持选择节点。

我尝试

```
var roles = document.evaluate( "//BusinessEntity/q1:name", oXml, null, XPathResult.ANY_TYPE, null ); 
```

它不起作用。我不知道我错过了什么。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-29T10:41:14.743

我遇到了完全相同的问题，并且我认为我已经找到了解决方案：您的代码不起作用的原因如下：您没有指定正确的 XML 命名空间解析器。这意味着 Chrome 或 Firefox 无法理解如何查找元素“q1:name”。

您可以在下面找到在 CRM 2011 中获取业务实体名称的正确版本：

```
function nsResolver(prefix) {
  var ns = {
    'q1': 'http://schemas.microsoft.com/crm/2007/WebServices'
  };

  return ns[prefix] || null;
}

var roles = node.evaluate("//BusinessEntity/q1:name", oXml, nsResolver, XPathResult.ANY_TYPE, null); 
```

有关命名空间解析的更多信息，请参见[https://developer.mozilla.org/en-US/docs/Introduction_to_using_XPath_in_JavaScript#Implementing_a_User_Defined_Namespace_Resolver](https://developer.mozilla.org/en-US/docs/Introduction_to_using_XPath_in_JavaScript#Implementing_a_User_Defined_Namespace_Resolver)

希望这可以帮助！

# bash - 将 stdout 和 stderr 捕获到一个文件中，也捕获到一个控制台

> ID：14615653
> 
> 赞同：1
> 
> 时间：2013-01-30T23:14:50.943
> 
> 标签：bash, exec, tee

我正在尝试制作一个在控制台上吐出状态的脚本，并制作一个日志文件。为此，我一直在我的 bash 脚本中使用以下行：

```
exec > >(tee logfile.txt) 
```

让这一行有效地在控制台上显示标准输出并将其存储到 logfile.txt 中。现在我想同时捕获标准输出和标准错误。我尝试使用

```
exec 2>&1 >(tee logfile.txt) 
```

这似乎不起作用。为什么？我怎样才能完成我的任务？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T23:17:54.557

只需颠倒重定向的顺序即可。它可以帮助我从右到左阅读它们：

```
exec > >(tee logifle.txt) 2>&1 
```

# javascript - 从 Mobile Safari 日期输入返回的对象类型

> ID：14615655
> 
> 赞同：0
> 
> 时间：2013-01-30T23:14:59.273
> 
> 标签：javascript, jquery, ios6, datepicker, mobile-safari

我试图弄清楚当我使用内置日期选择器时 Mobile Safari 返回的对象类型。例如：

```
<input id="d" type="date" /> 
```

和javascript：

```
alert( $("#d").val() ); 
```

在非移动 Safari 平台上，这将返回日期（例如“01/30/2013”​​）。在 Mobile Safari 上，我认为这绝对不会返回任何内容。我发现这篇文章（[在 iPad 上设置日期输入的值](https://stackoverflow.com/questions/11183959/setting-the-value-of-date-inputs-on-ipad)）让我更进一步：

```
alert( $("#d").val('yyyy-MM-dd') ); 
```

但是警报弹出`[object Object]`，我被卡住了。当我在选择器中指定格式时，它返回什么样的对象`val()`？我尝试通过 $.datepicker（来自 jQueryUI）运行它，但没有成功，当我尝试`new Date($("#d").val('yyyy-MM-dd'))`返回的警报时显示“日期无效”。最终，我想要的只是获取日期字段返回的“Jan 30, 2013”​​字符串并将其转换为“01/30/2013”​​（一个字符串），这样我就可以将它作为参数传递。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T15:24:34.990

`.val()`有两个函数 - 没有参数，它是一个 getter 并返回一个日期，有 1 个参数它是一个 setter，并返回你调用的 dom 对象`.val()`。因此，如果您`alert( $("#d").val('yyyy-MM-dd') );`实际上调用警报，则会返回`#d`dom 对象。

这也是`new Date($("#d").val('yyyy-MM-dd'))`给你一个错误的原因。它应该改为： `new Date($("#d").val('yyyy-MM-dd').val())`.

```
new Date("Jan 30, 2013") 
```

除了你需要的 IOS 外，其他人都可以正常工作

```
new Date("2013-01-30") 
```

这将为您返回一个 Date 对象，然后您可以使用该对象。

该方法`.toISOString();`可帮助您将普通日期转换为 IOS 所需的 ISO 格式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T16:04:42.520

结果证明这是人为错误。移动版本试图读取错误的输入。（一个带有 jQ​​ueryUI 选择器的桌面输入，一个带有`<input type="text">`字段的移动输入`<input type="date">`。）

我觉得自己像个白痴……事实证明`<input type="date">`，即使 Mobile Safari 会将“2013 年 1 月 31 日”放在该字段中，jQuery 1.9 也会`$("#d").val()`毫无技巧地返回“2013-01-31”。当然，假设您正在阅读正确的输入字段。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-31T15:36:26.780

Mobile Safari 为日期输入返回与任何其他 Webkit 浏览器完全相同类型的值。您遇到的困惑是 jQuery。

jQuery 的 val 方法在不带参数调用时返回日期输入的 'value' 属性的值，例如

```
var value = $("input.foo").val() 
```

但是当它被调用 /with/ 参数时，它将设置 value 属性并返回一个 jQuery 对象以允许链接。例如

```
var value = $("input.foo").val("2013-05-22").val() //"2013-05-22" 
```

在最后一个示例中，该值设置为“2013-05-22”，然后读取。

# ruby - 处理正则表达式中的单词边界

> ID：14615663
> 
> 赞同：1
> 
> 时间：2013-01-30T23:15:38.983
> 
> 标签：ruby, regex

在下面的字符串中，我试图匹配独立`Inc.`的 s。

```
Inc. aa Inc. bbbInc. Inc. 
```

以下正则表达式不起作用：

```
/\bInc\.\b/       # got zero matches
/\bInc\.(\b|$)/   # matched the last Inc. 
```

我认为这是因为`\b`匹配单词和非单词字符之间的边界，我在`\b`之后`\.`有一个非单词字符。我对其进行了调整以使其工作。

```
/\bInc\.($|\W)/
/\bInc\.\B/ 
```

*   我无法理解为什么第四个表达式有效。
*   3 和 4 中哪种方法的边缘情况最少？
*   这个问题有更好的解决方案吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T23:57:29.913

您想匹配`"Inc."`后跟一个非单词字符。由于`"."`是非单词字符，因此您在结束边界处期望的是一个`\W\W`序列（或字符串的结尾）。匹配 a或序列`\b`的边界，因此其匹配不会与预期匹配相交。`\w\W``\W\w`

第四个表达式有效，因为`\B`匹配`\w\w`序列或`\W\W`序列（或字符串的开头或结尾）的边界，并且因为“。” matches `\W`，`\.\B`匹配范围缩小到`\W\W`您想要的（或字符串的结尾）。

比较第三个和第四个表达式，第三个有两个问题。(1) 注意`\W`匹配一个字符串。因此，`/\bInc\.($|\W)/`将在匹配中包含您想要的部分后面的字符。为了避免这种情况，您可以使用前瞻：`/\bInc\.(?=$|\W)/`，但与此相比，第四个要好得多。(2) 虽然这不是您的特定示例的问题，但当字符串超出单行时，`$`将无法正确匹配字符串的结尾。使用`\z`更好。

我想不出比你的第四个更好的了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T23:25:34.283

来自[Perl 正则表达式文档](http://perldoc.perl.org/perlre.html#Assertions)

> 单词边界 (\b ) 是两个字符之间的一个点，其中一个 \w 在它的一侧，一个 \W 在它的另一侧（以任意顺序），计算从开头和结尾开始的虚构字符与 \W 匹配的字符串。

因为`\w`代表`[a-zA-Z0-9_]` `\b`不会匹配 . 正如您正确假设的那样。

```
\bInc\.\B 
```

将匹配`Inc..`，或任何非 \w 字符后`Inc.`相同

```
\bInc\.($|\W) 
```

如果您想匹配`Inc.`后跟空格或换行符，我会使用

```
\bInc\.(\s|$) 
```

# php - 我的 wordpress “小部件”出现问题.. 尝试 ping 一个我的世界服务器以查看它是否在线

> ID：14615666
> 
> 赞同：0
> 
> 时间：2013-01-30T23:15:46.253
> 
> 标签：php, ping, minecraft, wordpress

所以我一直在尝试为 wordpress 编写这个小部件，以检查我在本地托管的 minecraft 服务器是否在线。我正在为我的网站使用托管服务，我的代码只是有一点问题，我不知道如何解决它。

```
<?php

define('PLUGIN_URL', plugin_dir_url( __FILE__ ));

add_action("widgets_init", array('sc_status', 'register'));
register_activation_hook( __FILE__, array('sc_status', 'activate'));
register_deactivation_hook( __FILE__, array('sc_status', 'deactivate'));
class sc_status {
function activate(){
        $scdata = array( 'option1' => 'Default value' ,'option2' => 55);
        if ( ! get_option('sc_status')){
            add_option('sc_status' , $scdata);
        } else {
              update_option('sc_status' , $scdata);
        }
}
function deactivate(){
        delete_option('sc_status');
}
function control(){
        $scdata = get_option('sc_status');
    ?>
        <p><label>Title : <input name="widget_title" type="text" value="<?php echo $scdata['widget_title']; ?>" /></label></p>
        <p><label>IP : <input name="server_ip" type="text" value="<?php echo $scdata['server_ip']; ?>" /></label></p>
        <p><label>Port (25565) : <input name="server_port" size="5"  type="text" value="<?php echo $scdata['server_port']; ?>" /></label></p>
    <?php
        if (isset($_POST['server_ip'])){
        $scdata['widget_title'] = attribute_escape($_POST['widget_title']);
        $scdata['server_ip'] = attribute_escape($_POST['server_ip']);
        $scdata['server_port'] = attribute_escape($_POST['server_port']);
        update_option('sc_status', $scdata);
    }
}
function widget($args){

          wp_enqueue_style('sc', PLUGIN_URL.'/css/sc_button.css');

          $scdata = get_option('sc_status');
          $title = $scdata['widget_title'];
          $port = $scdata['server_port'];
          if(empty($port)) {
              $port = "25565";
          }

        echo $args['before_widget'];
        if(!empty($title)) {
            echo $args['before_title'] . $title . $args['after_title'];
        }
        // Check Server Status
        $waitTimeoutInSeconds = 1; 
        if($fp = fsockopen($scdata['server_ip'],$port,$errCode,$errStr,$waitTimeoutInSeconds)){   
           // It worked 
           echo '<div class="btn btn-success" rel="tooltip" title="first tooltip">online</div>';
        } else {
           // It didn't work 
           echo '<div class="btn btn-danger">offline</div>';
        } 
        fclose($fp);

        // End
        echo $args['after_widget'];
  }
  function register(){
        register_sidebar_widget('Servercraft Status', array('sc_status', 'widget'));
        register_widget_control('Servercraft Status', array('sc_status', 'control'));
  }
} 
```

这适用于“大多数”部分。它的问题是错误是：

警告：fsockopen() [function.fsockopen]: 第 62 行无法连接到（不想发布 ip）（连接超时）

然后它像它应该的那样发布“离线” div .. 其次是

警告：fclose() 期望参数 1 是资源，第 69 行给出的布尔值

所以希望有人可以告诉我我做错了什么或如何解决它。

编辑！这是我对上述部分进行了几次修复后的代码。我仍然遇到的问题是服务器仍在向站点反馈它处于脱机状态......它根本不是。

```
<?php

define('PLUGIN_URL', plugin_dir_url( __FILE__ ));

add_action("widgets_init", array('sc_status', 'register'));
register_activation_hook( __FILE__, array('sc_status', 'activate'));
register_deactivation_hook( __FILE__, array('sc_status', 'deactivate'));
class sc_status {
function activate(){
        $scdata = array( 'option1' => 'Default value' ,'option2' => 55);
        if ( ! get_option('sc_status')){
            add_option('sc_status' , $scdata);
        } else {
              update_option('sc_status' , $scdata);
        }
}
function deactivate(){
        delete_option('sc_status');
}
function control(){
        $scdata = get_option('sc_status');
    ?>
        <p><label>Title : <input name="widget_title" type="text" value="<?php echo $scdata['widget_title']; ?>" /></label></p>
        <p><label>IP : <input name="server_ip" type="text" value="<?php echo $scdata['server_ip']; ?>" /></label></p>
        <p><label>Port (25565) : <input name="server_port" size="5"  type="text" value="<?php echo $scdata['server_port']; ?>" /></label></p>
    <?php
        if (isset($_POST['server_ip'])){
        $scdata['widget_title'] = attribute_escape($_POST['widget_title']);
        $scdata['server_ip'] = attribute_escape($_POST['server_ip']);
        $scdata['server_port'] = attribute_escape($_POST['server_port']);
        update_option('sc_status', $scdata);
    }
}
function widget($args){

          wp_enqueue_style('sc', PLUGIN_URL.'/css/sc_button.css');

          $scdata = get_option('sc_status');
          $title = $scdata['widget_title'];
          $port = $scdata['server_port'];
          if(empty($port)) {
              $port = "25565";
          }

        echo $args['before_widget'];
        if(!empty($title)) {
            echo $args['before_title'] . $title . $args['after_title'];
        }

        // Check Server Status
        $waitTimeoutInSeconds = 1;
        $fp = @fsockopen($scdata['server_ip'],$port,$errCode,$errStr,$waitTimeoutInSeconds);
        echo "<span class='sc_status'> IP : ".$scdata['server_ip']."</span>";
        if($fp){                
            // It worked 
            echo '<div class="btn btn-success" rel="tooltip" title="first tooltip">online</div>';
            fclose($fp);
        } else {
            // It didn't work 
            echo '<div class="btn btn-danger">offline</div>';
        } 

        // End
        echo $args['after_widget'];
  }
  function register(){
        register_sidebar_widget('Servercraft Status', array('sc_status', 'widget'));
        register_widget_control('Servercraft Status', array('sc_status', 'control'));
  }
} 
```

?>

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T23:38:45.180

非常简单的解决方案：

```
if($fp = @fsockopen($scdata['server_ip'],$port,$errCode,$errStr,$waitTimeoutInSeconds)){   
 //it worked
 fclose($fp);
} 
```

您只需使用 @ 隐藏错误消息。并且只有在连接打开时才关闭连接（所以转到`fclose($fp);`“它工作”部分）。

# javascript - 将对象的属性和值转换为键值对数组

> ID：14615669
> 
> 赞同：23
> 
> 时间：2013-01-30T23:15:55.247
> 
> 标签：javascript, reflection, introspection

我对 JavaScript 相当陌生，不确定这是否可行，但基本上我想获取一个对象并将其转换为格式中的字符串数组；`array[0] = 'prop1=value1'`

这背后的原因是我让用户将 k=v 对的列表输入到表单中，后来它被写为 json blob 中的对象。从键值 csl 到 json 对象很简单，现在我需要以另一种方式返回（我已经通过 ajax 调用接收到 JSON 并希望填充一个空白表单）。这在 JavaScript 中可能吗？如果没有，请提供合理的解决方法。

示例代码；

调试器中的对象；

```
 Object
        private_key: "private-key"
        public_key: "public-key" 
```

我需要将其转换为；

```
 "private_key=private-key,public_key=public-key" 
```

基本上我需要这样的东西（伪代码）

```
var outputString = '';
foreach (prop in obj)
{
    outputString = outputString + prop.tostring() + '=' + prop.value + ',';
} 
```

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2013-01-30T23:25:42.110

你可能正在寻找类似的东西

```
var obj = {value1: 'prop1', value2: 'prop2', value3: 'prop3'};
var arr = [];
for (var key in obj) {
    if (obj.hasOwnProperty(key)) {
        arr.push(key + '=' + obj[key]);
    }
};
var result = arr.join(',');
alert(result); 
```

请注意，如果您的值是字符串，它将正常工作；如果它们是复杂的对象，那么您需要添加更多代码。

或者您可以只使用[jQuery.param](https://api.jquery.com/jquery.param/)，它可以满足您的需求，即使对于复杂类型也是如此（尽管它使用`&`字符作为分隔符，而不是逗号。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2017-11-30T22:39:41.190

在 ES6 中，您可以使用`Object.entries({object1:1,object2:2});`. 结果是：`[["object1",1],["object2",2]]`

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-01-30T23:24:52.613

```
var array = [];
for (k in o)
{
    if (o.hasOwnProperty(k))
    {
        array.push(k+"="+o[k]);
    }
} 
```

然后，您可以`join`为最终字符串创建数组。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-01-30T23:28:07.097

```
var object = {
    private_key: "private-key",
    public_key: "public-key"
};

var array = [];
for (var prop in object)
    array.push(prop + "=" + object[prop]);
return array.join(','); // "private_key=private-key,public_key=public-key" 
```

请注意，不保证订单。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2017-11-24T10:08:24.783

```
obj = {
  private_key: "private-key",
  public_key: "public-key"
}

str = JSON.stringify(obj).replace(/[{}]/g, '').replace(/"/g, '').replace(/:/g, '=');
console.log("Using JSON.stringify:\n", str);

str = Object.keys(obj).map((key) => `${key}=${obj[key]}`).join(',')
console.log("Using ES6 keys/map:\n", str);

str = jQuery.param(obj).replace(/&/g,',');
console.log("Using jQuery.param:\n", str);
```

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2018-05-11T07:34:40.427

```
var obj =[
            {'2018-05-07':1},
            {'2018-05-08':3},
            {'2018-05-09':2}
        ];

        for(var i of obj) {
            var key = Object.keys(i).toString();
            console.log(i,'=',i[key]);
        } 
```

> 结果

： [![在此处输入图像描述](../Images/8f0a04a4248159759767280e399d7f2a.png)](https://i.stack.imgur.com/FNFfF.png)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-01-19T00:23:57.873

1 班轮：

```
Object.entries(yourObj).map(e => ({ name: e[0], value: e[1] })); 
```

示例使用：

```
let yourObj = { foo: "bar", baz: "bas" };

// turn object properties into array entries
let array = Object.entries(yourObj).map(e => ({ name: e[0], value: e[1] }));

// returns
array = [
  { name: "foo", value: "bar" },
  { name: "baz", value: "bas" },
]
// loop over it
for (let prop of array) {
  console.log(prop.name, "=", prop.value);
}
// shows
foo = bar
baz = bas 
```

或者，以您想要的格式创建字符串：

```
Object.entries(yourObj).map(e => e[0] + "=" + e[1]).join(",");
"foo=bar,baz=bas" 
```

# c++ - 不使用 EOF 位作为我们的流提取条件的真正原因是什么？

> ID：14615671
> 
> 赞同：10
> 
> 时间：2013-01-30T23:15:59.007
> 
> 标签：c++, iostream, eof, language-lawyer

^(受我[上一个问题的启发](https://stackoverflow.com/q/14591203/150634))

新 C++ 程序员的一个常见错误是从文件中读取以下内容：

```
std::ifstream file("foo.txt");
std::string line;
while (!file.eof()) {
  file >> line;
  // Do something with line
} 
```

他们经常会报告文件的最后一行被读取了两次。这个问题的常见解释（我之前给出的）是这样的：

> 如果您尝试提取文件结尾，则提取只会在流上设置 EOF 位，而不是如果您的提取只是在文件结尾处停止。`file.eof()`只会告诉您前一次读取是否到达文件末尾，而不是下一次读取是否会。在提取了最后一行之后，EOF 位仍未设置，并且迭代再发生一次。然而，在最后一次迭代中，提取失败并且`line`仍然具有与之前相同的内容，即最后一行被复制。

但是，这个解释的第一句话是错误的，所以代码在做什么的解释也是错误的。

格式化输入函数（即`operator>>(std::string&)`）的定义将提取定义为使用`rdbuf()->sbumpc()`或`rdbuf()->sgetc()`获取输入字符。它指出，如果这些函数中的任何一个返回`traits::eof()`，则设置 EOF 位：

> 如果`rdbuf()->sbumpc()`或`rdbuf()->sgetc()`返回`traits::eof()`，则输入函数，除非另有明确说明，否则会在返回之前完成其操作并执行`setstate(eofbit)`，这可能会抛出`ios_base::failure`(27.5.5.4)。

我们可以通过使用 a 而不是文件的简单示例看到这一点`std::stringstream`（它们都是输入流并且在提取时表现相同）：

```
int main(int argc, const char* argv[])
{
  std::stringstream ss("hello");
  std::string result;
  ss >> result;
  std::cout << ss.eof() << std::endl; // Outputs 1
  return 0;
} 
```

这里很清楚，单次提取`hello`是从字符串中获取的*，*并将 EOF 位设置为 1。

那么解释有什么问题呢？`!file.eof()`导致最后一行重复的文件有什么不同？我们不应该将`!file.eof()`其用作提取条件的真正原因是什么？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-01-30T23:15:59.007

是的，如果提取在文件末尾停止，从输入流中提取将设置 EOF 位，如`std::stringstream`示例所示。如果它是如此简单，那么带有`!file.eof()`as 条件的循环将在如下文件上正常工作：

```
hello
world 
```

第二次提取会吃掉`world`，在文件末尾停止，并因此设置 EOF 位。下一次迭代不会发生。

然而，许多文本编辑器都有一个肮脏的秘密。当您保存文本文件时，即使如此简单，他们也在对您撒谎。他们没有告诉你的是`\n`文件末尾有一个隐藏文件。文件中的每一行都以 结尾`\n`，包括最后一行。所以该文件实际上包含：

```
hello\nworld\n 
```

这就是在`!file.eof()`用作条件时导致最后一行重复的原因。现在我们知道了这一点，我们可以看到第二次提取将`world`停止`\n`并且*不*设置 EOF 位（因为我们还没有到达那里）。循环将第三次迭代，但下一次提取将失败，因为它没有找到要提取的字符串，只有空格。字符串的先前值仍然悬而未决，因此我们得到了重复的行。

你不会体验到这一点，`std::stringstream`因为你坚持的就是你得到的。与文件不同，`\n`末尾没有。`std::stringstream ss("hello")`如果你这样做`std::stringstream ss("hello\n")`，你会遇到同样的重复行问题。

所以当然，我们可以看到`!file.eof()`从文本文件中提取时我们永远不应该使用作为条件 - 但这里真正的问题是什么？为什么我们真的不应该使用它作为我们的条件，无论我们是否从文件中提取？

真正的问题是，**`eof()`我们不知道下一次读取是否会失败**。在上面的例子中，我们看到即使`eof()`是 0，下一次提取也失败了，因为没有要提取的字符串。如果我们没有将文件流与任何文件相关联，或者流为空，也会发生同样的情况。EOF 位不会被设置，但没有什么可读取的。`eof()`我们不能仅仅因为没有设置就盲目地从文件中提取。

使用`while (std::getline(...))`和相关条件非常有效，因为在提取开始之前，格式化输入函数会检查是否设置了任何错误、失败或 EOF 位。如果其中任何一个是，则立即结束，并在此过程中设置失败位。如果它在找到要提取的内容之前找到文件结尾，它也会失败，同时设置 eof 和失败位。

* * *

注意：如果您在保存之前保存文件，则`\n`可以在 vim中保存没有额外的文件。`:set noeol``:set binary`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-23T03:25:02.787

你的问题有一些虚假的概念。你给个解释：

> “如果您尝试提取文件结尾，则提取只会在流上设置 EOF 位，而不是如果您的提取只是在文件结尾处停止。”

然后声称它“是错误的，因此对代码所做的解释也是错误的”。

其实，是对的。让我们看一个例子......

当读入`std::string`...

```
std::istringsteam iss('abc\n');
std::string my_string;
iss >> my_string; 
```

...默认情况下，正如您的问题一样，`operator>>`读取字符直到找到空格*或*EOF。所以：

*   `'abc\n'`从->读取，一旦`'\n'`遇到它就不会“尝试提取文件结尾”，而是“只在 [EOF] 处停止”，并且`eof()`不会返回`true`，
*   从而不是读取`'abc'`-> 尝试提取发现内容结尾的文件结尾`string`，因此`eof()`将返回`true`.

同样，解析`'123'`成一个`int`集合`eof()`，因为解析不知道是否会有另一个数字并试图继续读取它们，点击`eof()`. 解析`'123 '`为`int`不会设置`eof()`。

`char`至关重要的是，不会设置将'a' 解析为 a，`eof()`因为不需要尾随空格即可知道解析已完成 - 一旦读取了一个字符，就不会尝试查找另一个字符并且`eof()`不会遇到。（当然从同一个流中进一步解析命中`eof`）。

> 很明显 [for stringstream "hello" >> std::string] 单次提取从字符串中获取 hello 并将 EOF 位设置为 1。那么解释有什么问题呢？导致 !file.eof() 导致最后一行重复的文件有什么不同？我们不应该使用 !file.eof() 作为提取条件的真正原因是什么？

原因如上所述......文件往往被一个'\ n'字符终止，当它们是getline或`>> std::string`返回最后一个非空白标记时，不需要“尝试提取文件结尾” （使用你的短语）。

# c++ - 在 C++ 中的窗口上接收挂起的拖放操作的通知

> ID：14615672
> 
> 赞同：1
> 
> 时间：2013-01-30T23:16:01.633
> 
> 标签：c++, winapi, visual-c++, mfc, dialog

我有一个 MFC 对话窗口，其中包含支持拖放功能的控件。这些控件已注册以接收拖放，并且该部分工作正常。

我的问题是关于我的主 MFC 对话框窗口。当拖放的“对象”被拖动到该窗口上时，是否可以在其中接收通知，并且它在我的窗口上的坐标是什么？

PS。我需要此功能在拖放过程中“展开”主窗口中的某些控件，以便用户可以将“对象”放入其中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T00:02:46.957

阅读[COleDropTarget](http://msdn.microsoft.com/en-us/library/4w4z9dwh%28v=vs.80%29.aspx)类。基本上，您在主窗口中创建一个成员变量，然后调用 COleDropTarget::Register 方法来注册窗口。然后你需要在你的窗口中实现 OnDragEnter(), OnDragOver(), OnDragLeave(), OnDrop()。

以这篇[不错的代码项目](http://www.codeproject.com/Articles/840/How-to-Implement-Drag-and-Drop-Between-Your-Progra)文章为例（跳过有关 DragAcceptFiles 的部分，我感觉您确实需要支持文件，否则，它会更容易。）

# android - Android：将 actionBar 标题文本更改为图像

> ID：14615677
> 
> 赞同：1
> 
> 时间：2013-01-30T23:16:39.817
> 
> 标签：android, layout, styles, themes, android-actionbar

在操作栏中有图标然后标题

我想放一个图像，而不是titleText，所以actionBar将是Icon，然后是TitleImage，我该怎么做？

我可以制作自己的 actionBar 布局吗？或者我只能编辑它的风格？我说的是 HOLO LIGHT 主题。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T23:42:12.330

您真的应该查看[http://actionbarsherlock.com/](http://actionbarsherlock.com/)以了解此级别的自定义。它真的很容易实现，你将能够做更多的事情。

希望它有所帮助

# objective-c - Xcode 4.6 如何命名@synthesized ivars？

> ID：14615678
> 
> 赞同：1
> 
> 时间：2013-01-30T23:16:41.143
> 
> 标签：objective-c, xcode, xcode4.6

我的教授多次明确告诉我们，在 Xcode 4.6 调用中：

```
@synthesize suit; 
```

与调用相同：

```
@synthesize suit = _suit; 
```

在那个 Xcode 将创建一个 ivar 并使用下划线命名约定命名它（示例`@property suit`将获得一个名为 ivar 的 ivar `_suit`）

但是，我一直在查看文档，并在[Apple Documentation EncapsulatingData中找到了这段话](http://developer.apple.com/library/ios/#documentation/cocoa/conceptual/ProgrammingWithObjectiveC/EncapsulatingData/EncapsulatingData.html)

> 重要提示：如果您使用 @synthesize 而不指定实例变量名称，例如：@synthesize firstName; 实例变量将具有与属性相同的名称。在此示例中，实例变量也将称为 firstName，不带下划线。

这似乎与我的教授直接矛盾。:(

这是我所知道的。在 Xcode 4.6 中，任何`@property`声明的内容都会`@synthesize`自动获得 -ed，因此您甚至不需要调用`@synthesize`. 如果您允许 Xcode 自动合成，它会使用 ivar 下划线名称 ( `_suit`)。但是，如果您实现自定义 getter 和 setter，则必须`@synthesize`显式调用。

我的问题是这个。当您有一个自定义的 getter 和 setter（就像我一样）并且需要调用时`@ synthesize`，Xcode 是否在您未指定名称时使用默认的下划线命名方案？

例如，当我这样称呼时：

```
@synthesize suit; 
```

Xcode 是否命名底层 ivar`suit`或`_suit`?

从我的简单测试和阅读文档来看，这似乎不是我的教授认为的那样`@synthesize suit;`。我是个菜鸟，我只是在属性和合成上纠结，所以我需要你的帮助。 `@synthesize suit = suit``@synthesize suit = _suit`

另外，我该怎么做才能自己测试或在文档中找到实际答案？谢谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-31T00:11:59.937

这是官方的词——*用Objective C* [封装数据](http://developer.apple.com/library/ios/#documentation/Cocoa/Conceptual/ProgrammingWithObjectiveC/EncapsulatingData/EncapsulatingData.html%23//apple_ref/doc/uid/TP40011210-CH5-SW1)编程，也许也是混淆的根源

> **大多数属性都由实例变量支持**
> 
> 除非您另外指定，否则合成的实例变量与属性具有相同的名称，但带有下划线前缀。例如，对于名为 firstName 的属性，合成的实例变量将称为 _firstName。

在同一页面的下方（您引用的部分）......

> **您可以自定义合成的实例变量名称**
> 
> **重要提示**：如果您使用`@synthesize`时未指定实例变量名称，如下所示：
> `@synthesize firstName;`
> 实例变量将与属性具有相同的名称。
> 在这个例子中，实例变量也将被调用`firstName`，没有下划线。

它们似乎确实自相矛盾，但前面的段落仅指自动*合成*的实例变量，而后者是当您显式合成时发生的情况。

自动合成是一个更新的特性，它只在 XCode 4.4 版中出现，并包含了 Clang 编译器 v4。在此之前，关于@synthesizing 你的变量是否带有前导下划线（[传说](http://iosptl.com/posts/leading-underscores/)这是留给Apple 使用）、尾随下划线（Google 的[objective-C 风格指南](https://google-styleguide.googlecode.com/svn/trunk/objcguide.xml)）或两者都没有的优缺点一直存在[无休止的争论。](https://stackoverflow.com/search?q=%5Bobjc%5D+underscore+ivar+naming+convention)从 XCode 4.4 开始，这已解决：使用前导下划线显式命名所有 iVar，但最好还是让编译器为您完成。

*更新*：我注意到谷歌已经[更新了他们的风格指南](https://google-styleguide.googlecode.com/svn/trunk/objcguide.xml?showone=Trailing_vs_Leading_Underscores#Trailing_vs_Leading_Underscores)以适应我们其他人......

> *尾随下划线曾经是实例变量名的首选。*
> 
> 我们的风格指南曾经有一条规则，即实例变量的命名应带有尾随下划线，类似于 C++ 中成员变量的命名。这已更改为前导下划线以与更广泛的 Objective-C 社区保持一致，以更好地遵循 Apple 的官方指南，*并允许使用新的编译器功能，如自动实例变量合成。*强烈鼓励新项目使用前导下划线。现有项目可能会继续在新代码中使用尾随下划线，以保持与其他代码库的一致性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T00:02:16.343

你是对的（你的教授不是）。`@synthesize`如果未指定变量名，则创建一个与属性同名的 ivar。

```
@synthesize foo; 
```

...将创建一个名为`foo`

# joomla - Joomla 默认模板

> ID：14615680
> 
> 赞同：-2
> 
> 时间：2013-01-30T23:16:46.480
> 
> 标签：joomla, joomla2.5

我正在使用 Joomla 2.5 Beez2 默认模板。我正在添加新的菜单和文章，但它已经有了我不需要的默认菜单和文章，这让我很困扰。例如，有没有办法删除所有菜单并从头开始创建我自己的菜单？还是我必须一一删除它们？如果我使用这个模板，我想在进行所有更改之前将其恢复到其设置设置？有没有办法改变标题背景图像？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T02:26:59.567

删除所有示例数据将花费您不超过 5 分钟的时间，或者如果您没有添加任何可以添加的内容（假设这不是一个实时站点，请删除所有表并运行 joomla.sql o 设置一个空站点。

# git - Git：跳过提交

> ID：14615682
> 
> 赞同：0
> 
> 时间：2013-01-30T23:16:53.793
> 
> 标签：git, git-diff

假设提交 1 安装了一个全新的功能，因此它添加、删除和更改了一些功能。之后执行一些提交，仅修复在此期间发现的小问题。
是否可以跳过提交 1，但同时在它最终得到一个包含所有修复但没有新功能的解决方案之后执行所有提交？
恐怕该解决方案可能存在一些冲突或他们所说的任何问题，因为修复是通过与上述功能相关的代码实现的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T23:19:56.020

`git rebase -i COMMIT1^`应该让您删除该提交。你是对的，你可能需要解决一些冲突。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T01:16:30.327

正如[Carl Norum](https://stackoverflow.com/a/14615711/758345)建议的那样，您可能应该使用`git rebase`（但只有在您阅读了其中的含义之后）。

如果您无法重写历史记录或冲突解决的数量过多，因为在那之后您有很多提交，那么还有另一种选择：您可以创建一个新的提交，通过运行以下命令撤消提交 1 的更改：

```
git revert COMMIT1 
```

如果有冲突，您还必须运行

```
git mergetool -y
git commit 
```

# msbuild - 如何根据项目设置属性值并将该属性用作属性函数的输入？

> ID：14615683
> 
> 赞同：1
> 
> 时间：2013-01-30T23:17:05.213
> 
> 标签：msbuild, .net, msbuild-4.0, msbuild-propertygroup

我正在尝试根据 Item 设置属性值但是属性似乎没有注意到 Item 例如，我的代码就像

```
<ItemGroup>
   <temp Include="test.txt"></temp>
</ItemGroup>

<PropertyGroup>
  <Name>%(temp.Identity)</Name>
  <Test>$([system.IO.File]::ReadAllText('$(Name)').Replace('ABC', '###'))</Test> 
</PropertyGroup>    

<Target Name="Write">
   <Message Text="$(Name)"/>
   <WriteLinesToFile File="%(temp.Filename).asl" Lines="$(Test)" Overwrite="true"/> 
</Target> 
```

但是当我运行它时，它说它无法读取 %(temp.Identity) 我错过了什么吗？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T01:21:47.987

在任何项目之前评估属性。将组移动到延迟评估的目标中，您的“写入”或通用[InitialTargets](http://msdn.microsoft.com/en-us/library/bcxfsh87.aspx)之一。

请参阅[属性和项目评估顺序](http://msdn.microsoft.com/en-us/library/dd997067.aspx)。

# scala - 类型与返回单元的方法不匹配

> ID：14615684
> 
> 赞同：0
> 
> 时间：2013-01-30T23:17:05.320
> 
> 标签：scala

我对 Scala 完全陌生，找不到关于此的明确信息。

我有这个对象：

```
object pc { 
  val stack = new Stack[Lattice]
  def top(): Lattice = stack.top
  def pop() = stack.pop
  def push(lev: Lattice) =
    if (stack.isEmpty) stack push lev
    else stack.push(lev(pc.top))            
} 
```

但是当我尝试使用 pop 时`pc.pop()`，我得到一个类型不匹配，要求我需要从程序中的不同类返回一个类型，尽管找到了类型`Lattice`。调用示例：

```
case If(e, t1, t2) ⇒ {
  val v = eval(e)
  if ( v.T ) {
    pc.push(v.myLevel.⊔(pc.top()))  
    eval( t1 )
    pc.pop()
  } else {
    pc.push(v.myLevel.⊔(pc.top()))
    eval(t2)
    pc.pop()
  }
} 
```

这是我尝试使用 pop 时的确切错误

```
interpreter.scala:127: error: type mismatch;
 found   : ScalaObject
 required: cs162.miniJS.values.Storable
    pc.pop() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T00:08:47.210

不可变`Stack`的`pop`返回尾巴。`def pop() = if (stack.nonEmpty) { val top = stack.top; stack.pop; Some(val) } else None`应该修复它。或者使用可变的。

# mysql - 多表的SQL查询问题

> ID：14615685
> 
> 赞同：1
> 
> 时间：2013-01-30T23:17:05.913
> 
> 标签：mysql, sql, multiple-tables

查找我的表的查询时遇到问题

我有 2 个表选项卡 table1 和 table2 如下

```
table1
id (int) auto_increment
table2_id1(int)
table2_id2(int)
table2_id3(int)
table2_id4(int) 
```

表2

```
id(int) auto
name (varchar) 
```

我要做的是获取一个查询以显示 table2.name 的名称 insted 的 table2_id1 整数。

例如我将做什么并且没有查询

```
1....test...test...test...test
2....mos...test...mos...mos 
```

我的表格如下

表格1

```
1   1   1   1   1   
2   2   1   2   2 
```

表2

```
1   test
2  mos 
```

希望你能理解我想要做什么，可能是一些简单的方法来获得结果，但我找不到它。我很高兴能得到所有帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T23:21:22.533

您需要使用别名加入 table2，4 次不同，请注意，正如**Mike**指出的那样，这不是一个很好的结构，您最好创建一个不同的表来处理这种一对多关系，而不是在表 1 上添加列

```
 SELECT Table1.id, a.name AS name1, b.name AS name2, c.name as name3, d.name AS name4
 FROM Table1
      JOIN Table2 a on Table1.table2_id1 = a.id 
      JOIN Table2 b on Table1.table2_id2 = b.id 
      JOIN Table2 c on Table1.table2_id3 = c.id 
      JOIN Table2 d on Table1.table2_id4 = d.id 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T23:26:45.470

试试这个

```
SELECT id, A.name, B.name 
FROM table1 
  LEFT JOIN table2 AS A ON A.id = table1.table2_id1 
  LEFT JOIN table2 AS B ON B.id = table1.table2_id2; 
```

我只包括了前两个，但你可以用同样的方式添加其余的

# spring - 我如何以一种宁静的方式使用 Spring 3.2 spring-mvc 上传/流式传输大图像

> ID：14615692
> 
> 赞同：24
> 
> 时间：2013-01-30T23:18:12.397
> 
> 标签：spring, rest, spring-mvc

我尝试将大图像上传/流式传输到 REST 控制器，该控制器获取文件并将其存储到数据库中。

```
@Controller
@RequestMapping("/api/member/picture")
public class MemberPictureResourceController {

  @RequestMapping(value = "", method = RequestMethod.POST)
  @ResponseStatus(HttpStatus.NO_CONTENT)
  public void addMemberPictureResource(@RequestBody InputStream image) {
    // Process and Store image in database
  }
} 
```

这是我试图实现的一个无效示例（当然，或者我猜 InputStream 不工作）。我想通过@RequestBody 流式传输/读取图像。

我到处搜索，但找不到如何实现这一目标的好例子。大多数人似乎只问如何通过表单上传图像，但不使用 REST/RestTemplate 来做到这一点。有没有人可以帮助我解决这个问题？

我很感谢任何指向正确方向的提示。

亲切的问候，克里斯

**解决方案**

下面我尝试在 Dirk 和 Gigadot 的输入之后发布对我有用的解决方案。目前我认为这两种解决方案都值得一看。首先，我尝试在 Dirk 的帮助下发布一个工作示例，然后我将尝试在 Gigadot 的帮助下创建一个。我将 Dirks 的答案标记为正确答案，因为我一直在明确询问如何通过 @RequestBody 上传文件。但我也很想测试 Gigadot 的解决方案，因为它可能更容易使用，也更常见。

在下面的示例中，我将文件存储在 MongoDB GridFS 中。

**解决方案 1 - Dirks 推荐后的示例**

控制器（在评论中使用 curl 命令进行测试）：

```
/**
*
* @author charms
* curl -v -H "Content-Type:image/jpeg" -X PUT --data-binary @star.jpg http://localhost:8080/api/cardprovider/logo/12345
*/
@Controller
@RequestMapping("/api/cardprovider/logo/{cardprovider_id}")
public class CardproviderLogoResourceController {

  @Resource(name = "cardproviderLogoService")
  private CardproviderLogoService cardproviderLogoService;

  @RequestMapping(value = "", method = RequestMethod.PUT)
  @ResponseStatus(HttpStatus.NO_CONTENT)
  public void addCardproviderLogo(@PathVariable("cardprovider_id") String cardprovider_id,
      HttpEntity<byte[]> requestEntity) {
    byte[] payload = requestEntity.getBody();
    InputStream logo = new ByteArrayInputStream(payload);
    HttpHeaders headers = requestEntity.getHeaders();

    BasicDBObject metadata = new BasicDBObject();
    metadata.put("cardproviderId", cardprovider_id);
    metadata.put("contentType", headers.getContentType().toString());
    metadata.put("dirShortcut", "cardproviderLogo");
    metadata.put("filePath", "/resources/images/cardproviders/logos/"); 

    cardproviderLogoService.create1(logo, metadata);
  }
} 
```

服务（未完成但作为测试工作）：

```
@Service
public class CardproviderLogoService {

  @Autowired
  GridFsOperations gridOperation;

  public Boolean create1(InputStream content, BasicDBObject metadata) {
    Boolean save_state = false;
    try {
      gridOperation.store(content, "demo.jpg", metadata);
      save_state = true;
    } catch (Exception ex) {
      Logger.getLogger(CardproviderLogoService.class.getName())
          .log(Level.SEVERE, "Storage of Logo failed!", ex);
    }
    return save_state;    
  }
} 
```

**解决方案 2 - Gigadots 推荐后的示例**

这在 Spring 手册中有描述：http: [//static.springsource.org/spring/docs/3.2.1.RELEASE/spring-framework-reference/html/mvc.html#mvc-multipart](http://static.springsource.org/spring/docs/3.2.1.RELEASE/spring-framework-reference/html/mvc.html#mvc-multipart)

这很容易，并且默认情况下还包含所有信息。我想我至少会为二进制上传选择这个解决方案。

感谢大家发帖和回答。非常感谢。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-31T15:33:31.920

看起来好像您正在使用 spring，您可以使用 HttpEntity ( [http://static.springsource.org/spring/docs/3.1.x/javadoc-api/org/springframework/http/HttpEntity.html](http://static.springsource.org/spring/docs/3.1.x/javadoc-api/org/springframework/http/HttpEntity.html) )。

使用它，你会得到这样的东西（看看“有效载荷”的东西）：

```
@Controller
public class ImageServerEndpoint extends AbstractEndpoint {

@Autowired private ImageMetadataFactory metaDataFactory;
@Autowired private FileService fileService;

@RequestMapping(value="/product/{spn}/image", method=RequestMethod.PUT) 
public ModelAndView handleImageUpload(
        @PathVariable("spn") String spn,
        HttpEntity<byte[]> requestEntity, 
        HttpServletResponse response) throws IOException {
    byte[] payload = requestEntity.getBody();
    HttpHeaders headers = requestEntity.getHeaders();

    try {
        ProductImageMetadata metaData = metaDataFactory.newSpnInstance(spn, headers);
        fileService.store(metaData, payload);
        response.setStatus(HttpStatus.NO_CONTENT.value());
        return null;
    } catch (IOException ex) {
        return internalServerError(response);
    } catch (IllegalArgumentException ex) {
        return badRequest(response, "Content-Type missing or unknown.");
    }
} 
```

我们在这里使用 PUT 是因为它是一个 RESTfull “将图像放入产品”。'spn' 是产品编号，图像名称由 fileService.store() 创建。当然你也可以发布图片来创建图片资源。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-02-02T02:55:33.313

当您发送 POST 请求时，您可以使用两种类型的编码将表单/参数/文件发送到服务器，`application/x-www-form-urlencoded`即`multipart/form-data`. 这是更多[阅读](https://en.wikipedia.org/wiki/POST_%28HTTP%29)。

`application/x-www-form-urlencoded`如果您的 POST 请求中有大量内容，则使用不是一个好主意，因为它通常会使 Web 浏览器崩溃（根据我的经验）。因此， `multipart/form-data`推荐。

`multipart/form-data`如果您向调度程序添加多部分解析器，Spring 可以自动处理内容。Spring 用于处理此问题的实现是使用 apache-commons-fileupload 完成的，因此您需要将此库添加到您的项目中。

现在对于如何实际操作的主要答案已经在此处发布了博客[http://viralpatel.net/blogs/spring-mvc-multiple-file-upload-example/](http://viralpatel.net/blogs/spring-mvc-multiple-file-upload-example/)

我希望这可以帮助您找到解决方案。您可能想了解什么是 REST。听起来你有点困惑。基本上，即使 url 很丑，几乎所有的 http 请求都是 RESTful 的。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-01-31T02:37:57.177

我最近这样做了，请参阅[此处](http://thoughtfulsoftware.blogspot.com/2012/12/uploading-binary-files-fun-way.html)的详细信息。

在浏览器上，我们可以使用文件 API 来加载文件，然后使用 Base64 编码对其内容进行编码，最后在发布之前将编码的内容分配给 javascript 对象。

在服务器上，我们有一个 Spring 控制器来处理请求。作为将请求正文转换为 java 对象的 json 解组的一部分，图像字节的 base64 编码值将转换为标准 Java byte[]，并作为 LOB 存储在数据库中。

要检索图像，另一个 Spring Controller 方法可以通过直接流式传输字节来提供图像。

我在上面链接的博客文章假设您想将图像用作另一个对象的一部分，但如果您只想直接使用图像，原理应该是相同的。让我知道是否有任何需要澄清的地方。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-07-08T23:01:35.443

如果您想将请求正文作为 InputStream 处理，您可以直接从请求中获取它。

```
@Controller
@RequestMapping("/api/member/picture")
public class MemberPictureResourceController {

    @RequestMapping(value = "", method = RequestMethod.POST)
    @ResponseStatus(HttpStatus.NO_CONTENT)
    public void addMemberPictureResource(HttpServletRequest request) {
        try {
            InputStream is = request.getInputStream();
            // Process and Store image in database
        } catch (IOException e) {
            // handle exception
        }
    }
} 
```

# objective-c - 如何在不获取 EXC_BAD_ACCESS 的情况下访问 cellForRowAtIndexPath 中的数组

> ID：14615697
> 
> 赞同：0
> 
> 时间：2013-01-30T23:18:27.867
> 
> 标签：objective-c, ios5, uitableview

我有一个让我发疯的错误。我有一个`NSArray`被叫的问题。该数组由 JSON 响应填充。我正在尝试使用它来填充表格视图。

在我的头文件中，我正在定义这样的问题

```
@interface OneViewController : UITableViewController <MBProgressHUDDelegate> {
    NSArray *questions;
    MBProgressHUD *HUD;
}

@property (nonatomic, strong) NSArray *questions; 
```

在我的实现中，我像这样实例化它

```
@synthesize questions; 
```

当视图加载时，我正在调用这个函数来 ping 我的 JSON 服务

```
- (void) pullQuestions {
    NSMutableDictionary *viewParams = [NSMutableDictionary new];
    [viewParams setValue:@"questions" forKey:@"view"];
    [PythonView viewGet:viewParams success:^(AFHTTPRequestOperation *operation, id responseObject) {
        questions = responseObject;
        NSLog(@"Qestions: %@", responseObject);
        [self.tableView reloadData];
        [HUD hide:YES];
    } failure:^(AFHTTPRequestOperation *operation, NSError *error) {
        //ALog(@"Failure: %@", [error localizedDescription]);
    }];
} 
```

当我得到响应时，我会追踪响应对象，它是一个格式正确的 JSON 响应。

```
 - (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
    {
        static NSString *CellIdentifier = @"VideoFeedCell";
        NSInteger count = [questions count];
        NSLog(@"Count: %i", count);
        for (int i = 0; i < count; i++) {
            NSString* body = [questions objectAtIndex:i];
            NSLog(@"Object: %@", body);
        }
    if (cell == nil) {
        NSArray *topLevelObjects = [[NSBundle mainBundle] loadNibNamed:@"VideoFeedCell" owner:self options:nil];
        // Grab a pointer to the first object (presumably the custom cell, as that's all the XIB should contain).
        cell = [topLevelObjects objectAtIndex:0];   
    }
    return cell;
} 
```

因此，当我遍历此内容时，问题计数为 4，并且跟踪了数组中的第一个对象（为 null）。它第二次尝试执行 for 循环时，我得到`EXC_BAD_ACCESS`. 几乎就像问题数组消失了一样。最奇怪的是我在另一个项目中使用了几乎完全相同的代码，它工作正常。我什至使用我在另一个项目中使用的相同 JSON 服务对其进行了测试（所以我知道它没有格式错误或其他什么），但我仍然收到此错误。我真的卡住了，我觉得它必须与保存有关JSON响应作为一个数组或它自己被释放的数组的一些奇怪的东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T15:18:16.683

问题与 ARC 有关。我从一些旧的样板代码开始（我不久前建立的一个选项卡式导航项目）。并试图对其进行改造。我没有注意到一个项目与 ARC 交战，而一个项目没有。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T15:16:02.807

假设您没有使用 ARC，我怀疑问题在于您将`responseObject`直接分配给`questions`实例变量而不是通过属性。这意味着您没有获得所有权，`responseObject`并且在刷新自动释放池时它会被释放。

尝试改变：

```
questions = responseObject; 
```

至：

```
questions = [responseObject retain]; 
```

或者：

```
self.questions = responseObject; 
```

看看是否能解决问题。

# javascript - 除非打开 IE 开发人员控制台，否则我的 CRM 2011 Web 资源不会加载

> ID：14615703
> 
> 赞同：0
> 
> 时间：2013-01-30T23:18:53.453
> 
> 标签：javascript, jquery, dynamics-crm-2011

> **主要编辑 1**下面是我最初的问题的描述，但我发现 Chrome 和 Firefox 都正确加载了库。即使反复刷新，*IE 9/10* 也根本*无法*工作。但是，一旦我打开开发者控制台并重新加载，一切正常。

我已阅读有关该问题的[这篇文章](https://stackoverflow.com/questions/5168471/crm-2011-is-undefined)并按照概述的步骤进行操作。问题是 jQuery 在 IE 9/10、Chrome 或 Firefox 中无法可靠/一致地加载。

我也无法以 100% 的可靠性重复这个问题。但是，*通常*发生的情况是，在我在自定义 Web 资源中发布更改并重新加载表单后，我会在开发人员控制台中看到“jQuery 未定义”。随后的重新加载将不会显示错误，并且如果我在重新加载之前清除缓存，则行为似乎没有差异。

以下是我的实现的一些细节：

*   我正在使用依赖于 jQuery 的 CrmFetchKit 库。
*   为了完成这项工作，我将这两个库合并为一个 Web 资源。这背后的想法是错误总是来自 CrmFetchKit，它告诉我该*文件*在正确包含方面没有问题。
*   我的代码如下。
*   我的函数“genericFetch()”在 onChange 事件处理程序中设置，用于我的实验表单上的查找属性。
*   当 jQuery 可用时，一切都按预期工作（即使 js 超级难看）。

如果需要，我很乐意提供更多信息和/或屏幕截图。

```
// Fetch XML generic fetch format
function genericFetch(entity, targetField, returnFields, searchSource)
{
    returnFields = returnFields.split('|');
    var searchValue  = Xrm.Page.getAttribute(searchSource).getValue();

    if(searchValue)
    {
        searchValue = searchValue[0]['values'][1]['value'];
    }
    else
    {
        return false;
    }

    function onFetchError(xhr, status, errorThrown)
    {
        var errormsg = $(xhr.responseXML).find('Message').text();
        alert('CrmFetchKit-Error occured: ' +  errormsg);
    }
    var fetchXml = ['<fetch version="1.0" output-format="xml-platform" mapping="logical">'];
    fetchXml.push('<entity name="' + entity + '">');
    var len = returnFields.length;
    for(i=0; i<len; i++)
    {
        fetchXml.push('<attribute name="' + returnFields[i] + '" />');
    }
    fetchXml.push('<filter type="and">');
    fetchXml.push('<condition attribute="' + returnFields[0] + '" operator="eq" value="' + searchValue + '" />');
    fetchXml.push('</filter>');
    fetchXml.push('</entity>');
    fetchXml.push('</fetch>');
    fetchXml = fetchXml.join('');

    CrmFetchKit.Fetch(fetchXml).then(function (results) {
        /* success handler */
        console.log("results: " + JSON.stringify(results, null, 4));
        Xrm.Page.getAttribute(targetField).setValue(results[0]['attributes']['productnumber']['value']);
    }, onFetchError);
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-08T20:20:37.793

这是由于脚本中的这行代码：

```
console.log("results: " + JSON.stringify(results, null, 4)); 
```

在 IE 中，默认情况下未定义控制台对象（这可能是由于 MS CRM 始终处于 IE8 文档模式，我不确定，但我在其他网站上看到过这个问题）。

一旦你打开开发者工具窗口，控制台对象就被定义了，代码就开始工作了。

我在所有 MS CRM 脚本中的解决方案是：如果未定义控制台对象，则为其定义一个空覆盖，例如

```
var _f_ = function () { };
window.console = window.console || { log: _f_, error: _f_, info: _f_, debug: _f_, warn: _f_, trace: _f_, dir: _f_, dirxml: _f_, group: _f_, groupEnd: _f_, time: _f_, timeEnd: _f_, assert: _f_, profile: _f_ }; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-30T23:52:00.917

这可能是由于您的脚本在 jQuery 加载之前运行。即如果脚本未包含在：

```
$(document).ready( function() {
    // Your code...
}); 
```

或者

```
$(window).load( function() {
    // Your code...
}); 
```

`$(window).load(...);`在您的场景中，您可能会取得更大的成功。

这似乎是最有可能的，因为它是一个间歇性问题。然而; 我还建议查看您的代码是否与另一个脚本发生冲突，例如，如果首先加载与 jQuery 冲突的脚本，那么它可能会阻止 jQuery 正常工作。

你可以通过使用这样的东西来解决这个问题：

```
(function( $ ) {
    // Put code using jQuery via '$' here...
}(jQuery)); 
```

# ruby - 让 content_for 与 Slim 一起工作

> ID：14615705
> 
> 赞同：4
> 
> 时间：2013-01-30T23:19:16.340
> 
> 标签：ruby, sinatra, slim-lang

我正在努力在[Hardwired](http://hardwiredcms.com)中实现 content_for 和 yield_content 支持。

Sinatra::Contrib 实现不起作用，所以我尝试了一个更简单的版本：

```
 module ContentFor

    def content_for(key, &block)
      content_blocks[key.to_sym] << block.call
      return ""
    end

    def content_for?(key)
      content_blocks[key.to_sym].any?
    end

    def yield_content(key, *args)
      content_blocks[key.to_sym].join
    end

    private

    def content_blocks
      @content_blocks ||= Hash.new {|h,k| h[k] = [] }
    end
  end 
```

不幸的是，这会重复内容（content_for 似乎抓取了模板中的所有内容，而不仅仅是子内容）。

我应该采取什么方法来实现这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-31T20:56:41.667

## Slim 仅在您使用`=`or时捕获子内容`==`，而不是`-`。

只需使用`= content_for :area do`而不是`- content_for :area do`

注意：显然这个问题是特定于 Sinatra 风格`content_for`和`yield_content`. 显然，更复杂的 Rails 实现也设法使用缓冲区魔法来实现这一点`-`。

# cocos2d-iphone - Cocos2D 2.0 中的重复背景使精灵变黑

> ID：14615709
> 
> 赞同：0
> 
> 时间：2013-01-30T23:19:51.870
> 
> 标签：cocos2d-iphone, repeat

当我在 Cocos2d 2.0 中沿屏幕滚动图像时，我无法无限期地重复图像......我正在使用 ccTexParams 方法，如下所示：

```
_movingHills = [CCSprite spriteWithFile:@"MenuBackHills.png"];
_movingHills.position = backGround.position;
[self addChild:_movingHills z:1];

//make sure hills repeat!

ccTexParams repeatHills = {GL_LINEAR, GL_LINEAR, GL_REPEAT, GL_CLAMP_TO_EDGE};
[_movingHills.texture setTexParameters:&repeatHills]; 
```

然后更新：

```
float PIXELS_PER_SECOND = 1;
static float offset = 0;
offset += PIXELS_PER_SECOND * dt;

CGSize textureSize = _movingHills.textureRect.size;
[_movingHills setTextureRect:CGRectMake(offset, 0, textureSize.width, textureSize.height)]; 
```

然而，所有这一切都导致我的场景中添加了一个漆黑的屏幕：/

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T00:33:08.557

我一直在努力获取单个背景图像来滚动我想要的方式一段时间。我发现[了这个](https://github.com/aramkocharyan/cocos2d)，它很容易实现并且运行良好。只需将文件复制到项目的 cocos2d 文件夹中，然后按照链接中显示的简短教程进行操作，一切都会正常进行。

# javascript - 切换类名 onclick JavaScript

> ID：14615712
> 
> 赞同：10
> 
> 时间：2013-01-30T23:20:07.937
> 
> 标签：javascript, toggle

我快到了，只是对我的代码设置有点不确定，我基本上想在点击时删除一个类，然后在点击时再次添加它，然后删除 onclick，然后添加 onclick。等等！这就是我所拥有的，它几乎就在那里，但如果有更好的方法来做到这一点，那么请帮忙！谢谢你。

```
document.getElementById('myButton').onclick = function() {
    myButton.className = myButton.className.replace(/(?:^|\s)active(?!\S)/g, '') ? 'active': jbar.className.replace(/(?:^|\s)active(?!\S)/g, '') ;
} 
```

非常感谢任何帮助！

* * *

## 回答 #1

> 赞同：64
> 
> 时间：2015-12-29T16:17:35.503

我*真的很*惊讶没有人在这里提到[classList](https://developer.mozilla.org/en-US/docs/Web/API/Element/classList)。所以只是为了完整：替代解决方案是使用 classList 方法**toggle()**。

那么你的情况就是：

```
document.getElementById('myButton').onclick = function() {
    this.classList.toggle('active');
} 
```

e.classList.toggle() 有很好的支持（除了，嗯，IE，它从 IE10 开始就在那里）。[单击此处](https://developer.mozilla.org/en-US/docs/Web/API/Element/classList#Browser_compatibility)了解完整的浏览器兼容性。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2013-01-30T23:24:19.273

如果要使用三元运算符，请使用：

```
document.getElementById('myButton').onclick = function() {

    var className = ' ' + myButton.className + ' ';

    this.className = ~className.indexOf(' active ') ?
                         className.replace(' active ', ' ') :
                         this.className + ' active';
} 
```

* * *

为清楚起见，我会使用常规的 if/else：

```
document.getElementById('myButton').onclick = function() {

    var className = ' ' + myButton.className + ' ';

    if ( ~className.indexOf(' active ') ) {
        this.className = className.replace(' active ', ' ');
    } else {
        this.className += ' active';
    }              
} 
```

这是小提琴：http: [//jsfiddle.net/ttEGY/](http://jsfiddle.net/ttEGY/)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-30T23:24:53.760

如果 JQuery 对你来说没问题，它真的很简单

```
$(myButton).toggleClass('active') 
```

[http://jsfiddle.net/bikeshedder/eRJB4/](http://jsfiddle.net/bikeshedder/eRJB4/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-09-04T16:41:44.677

建议toggleClass方法的常用实现：

```
function toggleClass(element, tClass) {
    tClass = tClass.replace(/\s/g, "");

    var classes =  element.className;
    element.className = classes.indexOf(tClass) !== -1 
        ? classes.replace(" " + tClass, "")
        : classes + " " + tClass;
} 
```

使用：

```
var element = document.getElementById('myId');
toggleClass(element, 'active'); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-01-31T16:47:32.427

使用数组方法实现：

```
const toggleClass = (element, className) => {
  let classNames = element.className.split(' ');
  let index = classNames.indexOf(className);
  if (index === -1) {
    classNames.push(className);
  } else {
    classNames.splice(index, 1);
  }
  element.className = classNames.filter(item => item !== '').join(' ');
} 
```

用法：

```
let body = document.getElementsByTagName('body')[0];
toggleClass(body, 'ready'); 
```

[普朗克](https://embed.plnkr.co/3jWU3gva6GJVPUdturaN/)

# c++ - 鼠标回调函数 OpenCV

> ID：14615713
> 
> 赞同：0
> 
> 时间：2013-01-30T23:20:08.337
> 
> 标签：c++, qt, opencv, window, mouseevent

我对 OpenCV 有疑问。我已经尝试过其他问题的实施，但问题仍然存在。我有一个名为**MainWindow**的类，在该类的某个时刻，它创建了一个名为“rectified”的**NamedWindow 。**在我的主要功能中，我试图添加一个侦听器来捕获该**cvNamedWindow**实例上的点击事件。问题是 on_mouse 函数没有响应。这是我的主要方法：

```
static void on_mouse( int event, int x, int y, int flags, void *param)
{
     qDebug("hjhv00");
     MainWindow * mw=(MainWindow*)param;
     if(mw->getMyVision()->getCalibrationDone())
     {
        if(event==CV_EVENT_LBUTTONDOWN){
           qDebug("%d<---->%d",x,y);
        }
     }
}

int main(int argc, char *argv[])
{
    QApplication a(argc, argv);
    MainWindow w;
    int mouseParam=5;

    w.show();
    cvSetMouseCallback("rectified",on_mouse,&w);

    return a.exec();
    // test svn
    // test from google
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T18:55:56.870

使用我之前关于这个主题的帖子作为参考：

*   [使用 OpenCV 在网络摄像头上绘图](https://stackoverflow.com/questions/5490655/draw-on-webcam-using-opencv/5493633#5493633)
*   [自由形式的图像选择（最好在 C++ 中）](https://stackoverflow.com/a/8196180/176769)
*   [使用鼠标从视频上的矩形设置 ROI](https://stackoverflow.com/questions/10881397/setting-roi-with-mouse-from-a-rectangle-on-a-video/10883266#10883266)

我能够组装一个快速的 C++/Qt/OpenCV 演示，它创建一个 OpenCV 窗口，并在每次按下鼠标左键时在控制台上写入一条消息。

我相信代码是不言自明的：

**主.cpp：**

```
#include <cv.h>
#include <highgui.h>

#include <iostream>

#include <QtWidgets/QApplication>

void on_mouse(int event, int x, int y, int flags, void* param)
{
    if (event == CV_EVENT_LBUTTONDOWN)
    {
        std::cout << "@ Left mouse button pressed at: " << x << "," << y << std::endl;
    }
}

int main(int argc, char* argv[])
{
    QApplication app(argc, argv);

    IplImage* img = cvLoadImage("/Users/karlphillip/workspace/opencv/qt_mouse/LeafGlyph.jpg");
    if (!img)
    {
        std::cout << "!!! Failed to load image" << std::endl;
        return -1;
    }

    cvNamedWindow("result", CV_WINDOW_AUTOSIZE);

    cvSetMouseCallback("result",&on_mouse, 0);

    cvShowImage("result", img);
    cvWaitKey(0);

    return app.exec();
} 
```

**project.pro**（在 Mac OS X 上使用）：

```
TEMPLATE = app

QT      += widgets

## OpenCV settings for Mac OS X
macx {
    INCLUDEPATH += /usr/local/include/opencv

    LIBS += -L/usr/local/lib/ \
        -lopencv_core \
        -lopencv_highgui \
        -lopencv_imgproc
}

SOURCES += \
    main.cpp 
```

## 关于您的实施的注意事项：

我建议您将呼叫转移`cvSetMouseCallback()`到您呼叫的任何地方`cvNamedWindow()`。我怀疑这样做的正确位置是在`MainWindow`应该创建窗口的构造函数中，对吧？！然后，您还必须将其定义`on_mouse()`为*静态*成员`MainWindow`并实现它。

如果您这样做，您的代码将类似于：

```
void MainWindow::on_mouse(int event, int x, int y, int flags, void* param)
{
    if (event == CV_EVENT_LBUTTONDOWN)
    {
        std::cout << "@ Left mouse button pressed at: " << x << "," << y << std::endl;
    }
}

MainWindow::MainWindow()
{
    IplImage* img = cvLoadImage("/Users/karlphillip/workspace/opencv/qt_mouse/LeafGlyph.jpg");
    if (!img)
    {
        std::cout << "!!! Failed to load image" << std::endl;
        return;
    }

    cvNamedWindow("result", CV_WINDOW_AUTOSIZE);

    cvSetMouseCallback("result",&on_mouse, 0);

    cvShowImage("result", img);
    cvWaitKey(0);
} 
```

# python - VIM 如何区分 `Ctrl-J` 和 `LF`？

> ID：14615717
> 
> 赞同：9
> 
> 时间：2013-01-30T23:20:25.210
> 
> 标签：python, vim, ncurses, python-curses

我正在尝试创建一个小的 Python/curses 应用程序。

但据我所知，没有办法判断 `CTRL`+`J`是否`Enter`被按下。现在这可能是因为它们都具有相同的 ascii 代码 (10)：

[http://en.wikipedia.org/wiki/Control_character#In_ASCII](http://en.wikipedia.org/wiki/Control_character#In_ASCII)

但是 VIM 是如何区分这两者的呢？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-31T05:39:53.443

`Enter`通常等于 Cm。但是，如果`icrnl`tty 的标志是活动的（请参阅`stty -a`），那么输入的 Cm 将自动转换为 Cj（因此只需按 即可轻松键入 Unix-ly 终止的行`Enter`）。

在纯 C 语言中，您可以使用*termios*函数*tcgetattr(3)*和*tcsetattr(3)*来取消设置 ICRNL 标志，`c_iflag`以便 Cm 在输入时不会转换为 Cj。如果您想对输入和输出进行绝对控制，您将使用“原始”模式（禁用所有输入和输出处理）。看起来[Python 有这些*termios*函数](http://docs.python.org/2/library/termios.html)。

curses 库有一些用于处理 tty 模式的高级函数：*savetty(3)*、*resetty(3)*、*nonl(3)*、*raw(3)*、*cbreak(3)*等。看起来[Python 也有这些*curses*功能](http://docs.python.org/2/library/curses.html)。

*如果您正在使用curses*库的其他位，那么最好也使用它的函数来调整 ICRNL 标志（例如*nonl(3)*）以避免破坏库所做的任何假设（即它假设 tty 是设置一种方式，但是您的*termios*级别调用会改变事情并打破该假设）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T00:18:35.417

我不认为`<ctrl-J>`和`Enter`相同。在 vim 中，`<ctrl-j>`有 keycode 10，但`Enter`有 13。

有一些等效的键，例如

```
<ctrl-M> and Enter
<ctrl-H> and backspace
<ctrl-[> and ESC
... 
```

无论您处于哪种模式，您都可以在您的 vim 中进行测试，`<ctrl-M>`并做同样的事情。`Enter`

`<Enter>`其实还有一个组合键，用and也很难区分`<Ctrl-M>`。就是`<C-Enter>`不知道你想达到什么目的，你说你想做一些终端开发（ncurses），如果终端连那些键都分辨不出来，你就别管了。我没有ncurses的经验，如果我错了不要生气。^_^

如果您键入`:h keycodes`您可以看到更多信息，下表是从 vim 帮助中复制的。

```
notation    meaning         equivalent  decimal value(s)    ~
-----------------------------------------------------------------------
<Nul>       zero            CTRL-@    0 (stored as 10) *<Nul>*
<BS>        backspace       CTRL-H    8 *backspace*
<Tab>       tab         CTRL-I    9 *tab* *Tab*
                            *linefeed*
<NL>        linefeed        CTRL-J   10 (used for <Nul>)
<FF>        formfeed        CTRL-L   12 *formfeed*
<CR>        carriage return     CTRL-M   13 *carriage-return*
<Return>    same as <CR>                *<Return>*
<Enter>     same as <CR>                *<Enter>*
<Esc>       escape          CTRL-[   27 *escape* *<Esc>*
<Space>     space                32 *space*
<lt>        less-than       <    60 *<lt>*
<Bslash>    backslash       \    92 *backslash* *<Bslash>*
<Bar>       vertical bar        |   124 *<Bar>*
<Del>       delete              127
<CSI>       command sequence intro  ALT-Esc 155 *<CSI>*
<xCSI>      CSI when typed in the GUI       *<xCSI>* 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-31T08:43:56.503

`<C-J>`等价于`<NL>`，而不是`<CR>`（对应于`<C-M>`）：

```
:echo "\<C-J>" ==# "\<CR>"
0
:echo "\<C-J>" ==# "\<NL>"
1 
```

所以你的假设是错误的；甚至 Vim 也无法区分它们。由于键盘输入在内部处理的方式，并且由于终端及其 API 的悠久而复杂的历史，很难区分这些键，尽管（在大多数现代终端仿真器中），这在今天是可能的。

有些人（最重要的是 Paul LeoNerd Evans）想要解决 Vim 中的问题，并提出了各种建议，cp。[http://groups.google.com/group/vim_dev/browse_thread/thread/626e83fa4588b32a/bfbcb22f37a8a1f8](http://groups.google.com/group/vim_dev/browse_thread/thread/626e83fa4588b32a/bfbcb22f37a8a1f8)

但是截至今天，还没有补丁或志愿者出现，尽管许多人表示希望在未来的 Vim 8 主要版本中拥有它。我不知道如何在 Python 中解决这个问题，但您可能会从链接的讨论中找到一些见解。

# iphone - Objective-C：我可以用代码“观察”一个变量，以便它改变的那一刻我可以把它改回来吗？

> ID：14615718
> 
> 赞同：1
> 
> 时间：2013-01-30T23:20:31.540
> 
> 标签：iphone, ios, objective-c, ipad

有一个 BOOL 值是我想保持设置为 NO 的 iOS UIKit 对象的一部分。一些用户操作改变了它的状态，我对此无能为力。

有没有办法使用objective-c运行时来“观察”这个变量，并在它发生时立即停止变化？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-30T23:26:56.200

KVO 支持属性更改侦听器的概念。

这是文档：[KVO 合规性指南](http://developer.apple.com/library/ios/#documentation/cocoa/conceptual/KeyValueObserving/Articles/KVOCompliance.html)

# java - Android：带变量的 ShowDialog

> ID：14615728
> 
> 赞同：1
> 
> 时间：2013-01-30T23:21:06.523
> 
> 标签：java, android, variables, showdialog

嗨，我正在研究 ShowDialog，我希望它显示一条带有 2 个局部变量的消息。出于这个原因，它说有一个错误，所以如果有一种方法可以显示这些变量，我将不胜感激。这是我的代码，错误所在的行是这一行：

```
 .setMessage("The NIF is" +user +DNIWord  "-") 
```

其余的代码是这个：

```
protected Dialog onCreateDialog (int id){

     switch (id) {
     case DIALOG_ERROR_CANDIDATO:
           return new AlertDialog.Builder(this)
               .setIcon(R.drawable.ic_error)
               .setTitle(R.string.error)
               .setMessage("The NIF is" +user +DNIWord  "-")
               .setPositiveButton(R.string.alert_dialog_ok, new DialogInterface.OnClickListener() {
                   public void onClick(DialogInterface dialog, int whichButton) {
                    }
               })

               .create();
     }

    return null;

} 
```

2个变量从这里获得：

```
int user = Integer.parseInt(dniText.getText().toString());

public static String DNIWord(int user) {
  return String.valueOf(user) + NIF_STRING_ASOCIATION.charAt(user % 23);
} 
```

谢谢

编辑：

```
 package com.prueba.inicio;

import com.prueba.R;
import com.prueba.R.drawable;
import com.prueba.R.id;
import com.prueba.R.layout;
import com.prueba.R.string;
import com.prueba.inicio.Autorizacion;

import android.app.Activity;
import android.app.AlertDialog;
import android.app.Dialog;
import android.media.MediaPlayer;
import android.os.Bundle;
import android.content.DialogInterface;
import android.content.Intent;
import android.text.style.BackgroundColorSpan;
import android.view.KeyEvent;
import android.view.LayoutInflater;
import android.view.View;
import android.widget.Button;
import android.widget.EditText;
import android.widget.ProgressBar;

public class Ident extends Activity {
    private static final int DIALOG_ERROR_CANDIDATO= 0;
    public static final String NIF_STRING_ASOCIATION = "TRWAGMYFPDXBNJZSQVHLCKE";

    public static String DNIWord(int user) {
      return String.valueOf(user) + NIF_STRING_ASOCIATION.charAt(user % 23);
    }

    public void onCreate(Bundle icicle)
       {
          super.onCreate(icicle);
          setContentView(R.layout.identificacion);
          Button bSiguiente = (Button) findViewById(R.id.btn_siguiente);
          final EditText dniText = (EditText) findViewById(R.id.dni_candidato);

    bSiguiente.setOnClickListener(new View.OnClickListener() {
        public void onClick(View arg0) {

         int user = Integer.parseInt(dniText.getText().toString());

         String longitud = dniText.getText().toString();

         if(user==8){
             Intent i = new Intent(Ident.this,Autorizacion.class);
                 startActivity(i);
         }
         else{
             showDialog(DIALOG_ERROR_CANDIDATO);
         }

    }

});

}
    protected Dialog onCreateDialog (int id){

         switch (id) {
         case DIALOG_ERROR_CANDIDATO:
               return new AlertDialog.Builder(this)
                   .setIcon(R.drawable.ic_error)
                   .setTitle(R.string.error)
                   .setMessage("The NIF is" +user +DNIWord (user)+  "-")
                   .setPositiveButton(R.string.alert_dialog_ok, new DialogInterface.OnClickListener() {
                       public void onClick(DialogInterface dialog, int whichButton) {
                        }
                   })

                   .create();
         }

        return null;

}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T23:24:08.300

`user`是一个类变量，*只是*`DNIWord`一个方法。修改调用，使其如下所示：

 *```
.setMessage("The NIF is" +user +DNIWord (user)+  "-") 
```

DNIWord 虽然适用于阴影`user`变量，所以

```
("The NIF is" +user +DNIWord (user)+  "-") 
```

可以缩短为

```
("The NIF is" + DNIWord (user)+  "-") 
```

~~但是，由于`user`它似乎是类范围的，并且您尝试获取 的值`dniText`，这似乎是 a `EditText/TextView`，因此您*很可能*`NullPointerException`在实际运行应用程序时也会得到 a 。将 user 的分配移动到 inside 之类的地方 `onCreateDialog()`。~~

**编辑：** `user`不是类作用域，而是`onCreate()`局部变量的局部变量，顾名思义是封闭方法的局部变量。

将用户移到外面`onCreate()`，然后在 onCreate 中取出`int`用户并将其写为`user`.

```
int user = 0; //class instance variable
public void onCreate(Bundle icicle)
{

  //...
  try{
    user = Integer.parseInt(dniText.getText().toString()); //no "int", just user
  }
  catch (NumberFormatException e)
  {
  }
} 
```

然后在您的`onCreateDialog()`方法中，您应该能够访问`user`.*

# jquery - MVC：通过ajax添加一行后，新值不会传递给控制器

> ID：14615731
> 
> 赞同：1
> 
> 时间：2013-01-30T23:21:22.393
> 
> 标签：jquery, ajax, asp.net-mvc-3

我正在尝试使用 MVC 编写一个简单的页面，显示特定事件的图例定义。模型的结构是

```
public class ServiceSymbols
{
    [Required(ErrorMessage = "ID is required")]
    public int ID { get; set; }
    public List<SymbolsDef> SymbolsDef { get; set; }

}
public class SymbolsDef
{
    public string value { get; set; }
    public string label { get; set; }
    public string color { get; set; }
} 
```

在视图中，一个服务符号（ServiceSymbols）有多个符号定义（SymbolsDef），我使用了 AJAX，它可以根据表格行添加或删除符号定义。但是有一个问题。

如果页面最初加载 2 行。然后，我通过 AJAX 添加了 3 行，为每一行输入值，提交表单。然后，我检查了控制器中的值（通过添加断点），只有前 2 个 SymbolsDef 值是我输入的，其余与第二个相同。如果页面最初加载 5 行，并且我不添加或删除任何内容，只需更改每条记录的值，然后提交。那么传递给控制器​​的值就没有这个问题了。

这是提交功能的一部分：

```
function saveServiceSymbology() {
    var symbolData = $("form#EditSymbols").serialize();
    $.ajax({ url: "/Home/SaveSymbolsDef",
        async: false,
        type: "POST",
        data: symbolData,
        success: function (data) {
            alert("Succeed");
        }
    });
} 
```

我认为这是对模型问题的一种绑定值，我也怀疑序列化函数。

有没有人遇到过这种问题？它让我呆了一段时间，非常沮丧。

这是添加新行的操作方法：

```
[OutputCache(Duration = 0)] // make sure come here each time, do not cathe it.
public ActionResult AddNewSymbolsDef()
{
    return PartialView("_SymbolsDefPartial", new SymbolsDef());
} 
```

这是保存方法：

```
[HttpPost]
public ActionResult SaveSymbolsDef(ServiceSymbols ServiceSymbols)
{
    //Actions Here
} 
```

我没有为 SaveSymbolsDef 编写所有动作，因为当我在 SaveSymbolsDef 中设置一个断点，并将光标放在“ServiceSymbols”上，并从那里查看所有值时，该值已经改变，所以我没有不认为这将是行动问题。

```
Here is the log output when I add a new row:    
<tr>
    <input autocomplete="off" name="SymbolsDef.Index" type="hidden" value="f65560ae-650b-4f6d-ba7e-29db945dc3b0" />
    <td style="display:none">
        <input type="text" id = "fromValue" />
    </td>
    <td style="display:none">
        <input type="text" id = "toValue" />
    </td>
    <td>
        <input id="value" name="SymbolsDef[f65560ae-650b-4f6d-ba7e-29db945dc3b0].value"  type="text" value="" />
    </td>
    <td>
        <input id="label" name="SymbolsDef[f65560ae-650b-4f6d-ba7e-29db945dc3b0].label"  type="text" value="" />
    </td>
    <td id="symbolColorPicker">
        <input class="color" id="SymbolsDef_f65560ae-650b-4f6d-ba7e-29db945dc3b0__color" name="SymbolsDef[f65560ae-650b-4f6d-ba7e-29db945dc3b0].color"  type="text" value="" />
        <input id="color" name="SymbolsDef[f65560ae-650b-4f6d-ba7e-29db945dc3b0].value" type="hidden" value="" />
    </td>
    <td>
        <img src="../../Scripts/Images/delete.png" id="DeleteSymbol" title="Delete this row" alt="delete" style="cursor: pointer;" onclick=
        "if ($('#symbolsdiv tr').length > 3) $(this).closest('tr').remove();else alert('This can not be deleted!');reasignSymbol()" />
    </td>
</tr> 
```

# linux - 如何让 SDL 使用 fbcon 而不是 caca

> ID：14615732
> 
> 赞同：7
> 
> 时间：2013-01-30T23:21:31.067
> 
> 标签：linux, sdl, framebuffer

我正在尝试开始使用 SDL 创建一个可以在 X 下或直接从终端运行的便携且漂亮的前端（希望在某个时候在 rasberry pi 上） - 目前我正在使用最新的笔记本电脑Ubuntu就可以了。

我无法在终端上正确显示图像 - 它以 ascii 艺术形式出现。我认为这是我的系统配置问题，而不是我的示例程序，因为它在 X 下运行时运行良好。

到目前为止，我认为我所知道的是 SDL 应该使用 fbcon 视频驱动程序，而是使用 aalib。我收集到 SDL 检查帧缓冲区是否可用，如果它是可用的，则使用它 - 并且它在那里 - 至少根据输出

```
> fbset -i  

mode "1024x768"
    geometry 1024 768 1024 768 32
    timings 0 0 0 0 0 0 0
    accel true
    rgba 8/16,8/8,8/0,0/0
endmode 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-31T18:42:35.527

确保您的 SDL 安装是使用帧缓冲区支持 ( `--enable-video-fbcon`and/or `--enable-video-directfb`)构建的，[并且`SDL_VIDEODRIVER`环境变量设置为`fbcon`or`directfb`](https://www.libsdl.org/release/SDL-1.2.15/docs/html/sdlenvvars.html)。

# vb.net - 为什么 Webbrowser1.Url 不能转到我的字符串？

> ID：14615733
> 
> 赞同：0
> 
> 时间：2013-01-30T23:21:31.083
> 
> 标签：vb.net, web

我的目标是保存用户当前所在的网页，但出现错误。这是我的代码：

```
Dim C As String = "C:\"
Dim website As String = WebBrowser1.Url 'errors here!
Dim LocalFilePath As String = C + website
Dim objWebClient As New System.Net.WebClient
objWebClient.DownloadFile(website, LocalFilePath) 
```

错误是它不会让我将该 URL 塞入我的字符串变量中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T23:25:10.233

`WebBrowser1.Url`返回[Uri](http://msdn.microsoft.com/en-us/library/system.uri.aspx)类型的对象，而不是字符串。您正在尝试将 Uri 分配给字符串，因此要么将其转换为字符串，要么更改`website`为 type `Uri`。

```
Dim website As String = WebBrowser1.Url.ToString() 
```

或者

```
Dim website As Uri = WebBrowser1.Url 
```

# jquery - jQuery Cycle 和 Backstretch 的使用

> ID：14615739
> 
> 赞同：0
> 
> 时间：2013-01-30T23:22:12.707
> 
> 标签：jquery, cycle

我正在尝试结合这两个插件。我试图完成的用法示例是：

```
<ul class="slide">
  <li><img class="bg" src="imageurl"><p>blahblah</p></li>
  <li><img class="bg" src="imageurl2"><p>blahblah</p></li>
</ul>

<script>
 $('.slide').cycle({
   fx: 'fade'
});
$('.slide).backstretch(+$('.bg').attr('src')+);
</script> 
```

我究竟做错了什么？

插件 url [Cycle](http://jquery.malsup.com/cycle/) [Backstretch](http://srobbin.com/jquery-plugins/backstretch/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T13:24:38.940

我有“一些”有效的解决方案。一般来说，我发现标记对于您想要实现的目标并不完美。图像必须手动隐藏，这不是一个很干净的方法！我会设置一个属性

*   -element 左右，其中包含用于后伸的 url...

    这是我的小提琴：http: [//jsfiddle.net/MBcXT/](http://jsfiddle.net/MBcXT/)

    ```
    $(document).ready(function(){
        function onBefore(curr, next, opts){
            $(next).backstretch($(next).children('img').prop('src'));
        };

     $('.slide').cycle({
         before: onBefore
     });
    }); 
    ```

# java - String.split 处理空格和制表符的奇怪行为

> ID：14615741
> 
> 赞同：0
> 
> 时间：2013-01-30T23:22:18.180
> 
> 标签：java, regex, string

我有一个由制表符和空格以及一些任意字符组成的字符串。下面的字符串由 组成`space space tab tab 1 space tab -2 tab space + space`。

```
import java.util.Arrays;

String[] s = "          1   -2   + ".split("[\\s]+");
System.out.println(Arrays.toString(s)); 
```

使用正则表达式运行 split`[\s+]`期望得到`[1, -2, +]`，但是我在我的机器（OS X，JDK1.6.0_37）上得到的返回数组是`[, 1, -2, +]`.

事实证明，第一个元素只是“空白”（`s[0].equals("")`returns `true`），所以它应该被匹配`\s`。

我错过了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T23:26:00.580

如果在拆分字符串时，字符串的第一个字符在分隔符中，则生成的数组的第一个元素始终是`empty string`.

采取这种方式，你的字符串总是以`empty string`. 因此，您的分隔符 -`\s+`将`" a"`字符串（注意前导空格）分为两部分，第一部分之前`\s+`是*空字符串* `""`，之后是`a`.

所以，你得到的输出是显而易见的。

> 事实证明，第一个元素只是“空白”（s[0].equals("") 返回 true），因此它应该与 \s 匹配。

不，它不应该是。空格不是空字符串。它们之间是有区别的。

# jira - CustomField.getValue() 在 doValidation() 中总是返回 null

> ID：14615743
> 
> 赞同：0
> 
> 时间：2013-01-30T23:22:21.277
> 
> 标签：jira, jira-plugin

三个开发人员花了一个下午的大部分时间尝试解决这个问题：

我有一个不接受某些字符的文本自定义字段。JIRA 内置了此验证，但我想更进一步，准确突出显示无效字符。

我想我应该重写 CreateIssueDetails.doValidate()，获取自定义字段值，检查无效字符，然后发回错误。但是我的 customField.getValue(issueObject) 调用总是返回 null。代码很简单：

```
CustomField field = getCustomFieldManager().getCustomFieldObjectByName("custom_field");
String value = (String)field.getValue(getIssueObject()); 
```

但是，无论我如何尝试，该值始终为空。由于我仍在验证中，因此尚未设置 fieldValue 吗？如果是这样，我在哪里可以找到文本框中的值？我想也许它会在某个临时存放区，等待插入数据库，但我不知道那会是什么。getFieldValuesHolder() 返回 null。

有什么想法吗？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T15:22:51.153

我发现我可以直接从 HttpRequest 获取原始字段值。我用：

```
String[] string = ActionContext.getRequest().getParameterValues(fieldId); 
```

# php - 删除 PHP 字符串后的最后一个逗号？

> ID：14615749
> 
> 赞同：0
> 
> 时间：2013-01-30T23:22:51.787
> 
> 标签：php, string, wordpress

> **可能重复：**
> [如何在 PHP 中从数组中创建逗号分隔列表？](https://stackoverflow.com/questions/2435216/how-to-create-comma-separated-list-from-array-in-php)

我有一个 Wordpress 网站，我使用插件 Magic Fields。为了回显来自插件的输入，我使用以下代码：

```
<?php 
$my_list = get('startopstilling_test');
foreach($my_list as $element){
echo   $element . ","; 
```

} ?>

代码回显了这一点：

卡西利亚斯、阿尔比奥尔、哈比阿隆索、卡卡、

但我想删除使它看起来像这样的最后一个逗号：

卡西利亚斯、阿尔比奥尔、哈比阿隆索、卡卡

谁能帮我？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-30T23:25:01.350

您应该[`implode`](http://php.net/manual/en/function.implode.php)改用：

```
echo implode(',', $my_list); 
```

但如果你真的想要，你也可以使用`rtrim`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T23:24:34.780

要么使用[implode](http://php.net/implode)，[rtrim ，或者可能更好，使用](http://php.net/rtrim)[JSON](http://php.net/json_encode)之类的东西。在当前状态下，当您的某个字段中有逗号时会发生什么？我怀疑事情会崩溃和燃烧:)。

如果你确实走 CSV 的路线，你可以用 fputcsv 正确地做到这一点：

```
$han = fopen("php://memory", "rw");
fputcsv($someArray);
fseek($han, 0);
echo stream_get_contents($han); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-30T23:24:52.467

你可以这样做：

```
$del = "";
foreach ($my_list as $element)
{
    echo $del . $element;
    $del = ", ";
} 
```

或将其全部构建成一个字符串，然后使用：

```
echo rtrim($string, ","); 
```

甚至更好，只需使用 implode：

```
echo implode(",", $my_list); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-30T23:26:14.790

您可以将其全部存储到一个字符串中，然后删除逗号

```
$str="";    
foreach($my_list as $element){
    $str.=$element . ",";}
rtrim($str,',');
echo $str; 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-01-30T23:26:13.350

您可以连接字符串`$elementstr`

```
<?php 
  $my_list = get('startopstilling_test');

  foreach($my_list as $element){
       $elementstr.= $element . ",";
 } 

 ?> 
```

接着

```
echo rtim($elementstr,','); 
```

# r - 数据框从宽到长的简单重塑

> ID：14615751
> 
> 赞同：-2
> 
> 时间：2013-01-30T23:23:04.010
> 
> 标签：r, dataframe, reshape

我在重塑数据框时遇到了麻烦。

这是一个示例数据集：

```
u<-data.frame(patient=1:9,time=1:3,var1=rnorm(9),var2=rnorm(9),var3=rnorm(9),var5=rnorm(9),var6=rnorm(9)) 
```

我有 20 个变量，而不是 6 个。

我唯一想要的就是把这个宽数据集变成一个长数据集。另外，我一直在 Stack Overflow/Google 上搜索如何做到这一点，但没有成功。这里发布的大多数重塑问题似乎比我所追求的要困难得多。

我追求的是：

```
patient time    variable    value
1          1    var1        1.70484636
2          2    var1        0.19637999
3          3    var1        -1.20419038
4          1    var1        0.06944788
5          2    var1        -1.03074549
6          3    var1        0.9396862
7          1    var1        -0.57904879
8          2    var1        1.16163798
9          3    var1        1.11314472
1          1    var2        0.2138141
2          2    var2        2.9763986
3          3    var2        0.9686543
4          1    var2        0.1321531
5          2    var2        0.844687
6          3    var2        1.1336502
7          1    var2        0.5902222
8          2    var2        1.392971
9          3    var2        1.5335116
1          1    var3        0.93968 62
2          2    var3        2.9763986
3          3    var3        0.844687
.... 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T23:27:33.280

您是否在 stackoverflow/Google 搜索中遇到过 reshape2 包？

```
require(reshape2)
melt(u, id = c('patient', 'time'))
#   patient time variable       value
1        1    1     var1  0.25585248
2        2    2     var1 -0.98750355
3        3    3     var1 -0.12871163
4        4    1     var1 -0.11789488
5        5    2     var1 -1.16252583
6        6    3     var1 -0.46498923
7        7    1     var1 -2.11571402
8        8    2     var1 -1.91485293
9        9    3     var1 -0.19154752
10       1    1     var2  2.38927206
[skip] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T23:31:41.530

您正在寻找 reshape2 包。

```
require('reshape2')
head(melted.u <- melt(u, id.vars=c('patient', 'time')))

  patient time variable   value
1       1    1     var1 -1.8745
2       2    2     var1  0.6428
3       3    3     var1  0.4367
4       4    1     var1  0.1102
5       5    2     var1 -0.1590
6       6    3     var1  1.7786 
```

# rdf - Sparql 查询由类和属性组成的模型，例如 freebase 主题

> ID：14615756
> 
> 赞同：1
> 
> 时间：2013-01-30T23:23:29.603
> 
> 标签：rdf, sparql, owl, freebase, mql

好的，很难找到这个问题的标题......对不起......我会尽力更好地解释我的问题！

我有一个图表和一个本体。我有数百个模型，如 Person、Animal、Book 等，其中任何一个都具有多个深度的属性：

```
<Person1>  <hasName>    <Luca>
<Person1>  <hasAddress> <Address1>
<Address1> <hasStreet>  "Some street" 
```

请**注意**，对于“模型”，我指的是 OWL/RDF 类和属性的集合，在示例中，模型“Person”包含“Person”和“Address”类。

**我想做**的是用 1 个查询获取整个模型实例……比如 'get('Person1')'

作为一个例子，想想**Freebase**。在 Freebase 中，它们具有某些类型（我称之为模型）的主题（模型实例），并且一个主题由一个类和几个可能引用其他类（中介）的属性完全描述......当您访问网页时一个freebase主题，你可以看到整个模型。

在本体中我无法定义模型，但我在其他文件中定义了它们并且可以以任何格式使用，从 RDF 到 JSON 和 Ruby/Python 对象。

实际上我不知道如何解决这个问题...我想使用带有 JSON 或 Ruby obj 模型的文件来自动为给定模型创建 SPARQL 查询，但是当您应该在同时..我认为它真的很慢......（我有200种不同的型号......）

是否有任何“纯”SPARQL 方法可以解决我的问题，或者我应该为每个模型制作一个特定的查询？

感谢您的任何帮助！

卢卡

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-31T13:15:31.587

基本上你正在寻找的是一个[SPARQL 构造查询](http://www.w3.org/TR/rdf-sparql-query/#construct)。因此，如果您想获得与`http://example.org/Person1`您相关的 RDF，可以做一个简单的描述：

```
describe <http://example.org/Person1> 
```

这将为您返回关于 的图表`http://example.org/Person1`。该图中的确切内容实际上取决于 RDF 数据库。规范没有强加任何特定的解释，例如简洁的有界描述。但通常，结果将为您的目的提供足够的信息。

但如果不是，您可以使用构造查询，例如：

```
construct { <http://example.org/Person1> ?p ?o . ?p rdfs:label ?l } 
where {
  <http://example.org/Person1> ?p ?o.
  ?p rdfs:label ?l.
} 
```

这会让你得到所有三元组`http://example.org/Person1`的主题和它所拥有的属性的标签。在返回有关`http://example.org/Person1`.

如果您需要与 的任意级别的关系`http://example.org/Person1`，那么您需要考虑自行实施[CBD](http://www.w3.org/Submission/CBD/)或类似策略。这是一个非常简单的实现，如果你需要走那条路，可能只有 100 LOC。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T00:41:10.543

如果你想做一些类似 Freebase Topic API 的事情，你真的应该考虑将数据放在键/值数据存储中。

查看[Seevl](http://seevl.net/blog/2013/01/15/storing-and-querying-rdf-data-with-redis/)的这篇博客文章，他们使用 Redis 对 RDF 数据进行逐个主题的查询。

否则，您需要根据您对架构的了解以及需要扩展哪些属性（例如人员地址）以提供该实体的正确快照，为每个主题构建自定义 SPARQL 查询。

# count - 在 Netlogo 中添加链接邻居的数量

> ID：14615763
> 
> 赞同：1
> 
> 时间：2013-01-30T23:24:13.343
> 
> 标签：count, netlogo

我想在 Netlogo 中添加特定颜色的乌龟的链接邻居的数量。我在执行过程中这样做了：

```
ask one-of turtles [

set num-vecinos sum [count turtles] of link-neighbors with [color = gray]
show num-vecinos
] 
```

奇怪的是我只有一个灰色的 turlte，但如果我运行代码我得到 5。为什么它算 5？我不应该得到一个吗？谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-31T12:57:53.647

这

```
[count turtles] 
```

将返回世界上海龟的总数，而不管您的所有其他代码。

要计算所有灰色的邻居海龟，您可以使用

```
set num-vecinos count (link-neighbors with [color = gray]) 
```

括号不是严格需要的，但我认为它们使代码更具可读性。

# php - 向functions.php添加简码 - 可能是语法错误？

> ID：14615768
> 
> 赞同：0
> 
> 时间：2013-01-30T23:24:30.303
> 
> 标签：php, wordpress, shortcode

我只是在玩弄 wordpress 和 php 并被卡住了。

在 wordpress 的 functions.php 文件中，我正在使用它创建两个基本示例短代码

```
<?php

add_shortcode('addAudioFile', 'addAudioFile');
function addAudioFile( $atts, $content = null ) 
{
  return '<li class="audio_file">' . $content . '</li>';
} 

add_shortcode('addAudioPlayer', 'addAudioPlayer');
function addAudioFile() 
{
  return '<audio preload></audio>';
} 
```

第一个只是将用户内容变成一个列表项，第二个只是调用插件 audio.js 的一个实例。正如它所写的那样，管理面板坏了，我认为我的语法遗漏了一些东西。

它是什么？？？谢谢！！！

PS php 文件中的一个短代码可以正常工作，但是当我同时添加它们时，它就不起作用了。这就是函数文件中的全部内容。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T23:26:53.320

PHP 不允许覆盖函数，所以不能有两个同名的函数。您需要重命名第二个。

# ios - Theos 偏好错误

> ID：14615782
> 
> 赞同：0
> 
> 时间：2013-01-30T23:25:16.553
> 
> 标签：ios, jailbreak, tweak, theos

我的调整有问题，实际上是设置部分。当我“安装包”时，它给了我几十个与首选项相关的错误。

在 Tweak.xm 中默认添加了#import。我在网上为我的 IOS（即 5.1.1）找到的标头没有preferences.h。但即使我自己创建它并将其添加到其余标题中，终端也会给我很多与preferences.h 和其余标题相关的错误。

请告诉我如何摆脱这些错误并通过 Theos 添加一个简单的首选项（设置）。

这是我更改为时得到`#import<Preferences/Preferences.h>`的`#import<Preferences/PSListController.h>`：

```
Compiling prefs.mm...
In the file included from /var/mobile/greet/theos/include/Preferences/PSListController.h:7,
                     from prefs.mm:1:
/var/var/mobile/greet/theos/include/Preferences/PSViewController.h:7:29: error:     UIViewController.h: No such file or directory
cclobjplus: warnings being treated as errors

In the file included from /var/mobile/greet/theos/include/Preferences/PSController-Protocol.h:7,
                     from /var/mobile/greet/theos/include/Preferences/PSViewController.h:9,
                     from /var/mobile/greet/theos/include/Preferences/PSListController.h:7,
                     from prefs.mm:1:
/var/mobile/greet/theos/include/Preferences/NSObject-Protocol.h:7: warning: duplicate declaration for protocol 'NSObject'
In the file included from /var/mobile/greet/theos/include/Preferences/PSListController.h:7,
                     from prefs.mm:1:
/var/mobile/greet/theos/include/Preferences/PSViewController.h:11: error: expected ';' before '<' token
In the file included from /var/mobile/greet/theos/include/Preferences/PSListController.h:10,
                     from prefs.mm:1:
/var/mobile/greet/theos/include/Preferences/UIActionSheetDelegate-Protocol.h:9: warning: duplicate declaration for protocol 'UIActionSheetDelegate'
In the file included from /var/mobile/greet/theos/include/Preferences/PSListController.h:11,
                     from prefs.mm:1:
/var/mobile/greet/theos/include/Preferences/UIAlertViewDelegate-Protocol.h:9: warning: duplicate declaration for protocol 'UIAlertViewDelegate'
In the file included from /var/mobile/greet/theos/include/Preferences/PSListController.h:13,
                     from prefs.mm:1:
/var/mobile/greet/theos/include/Preferences/UITableViewDataSource-Protocol.h:9: warning: duplicate declaration for protocol 'UITableViewDataSource'
In the file included from /var/mobile/greet/theos/include/Preferences/UITableViewDelegate-Protocol.h:8,
                     from /var/mobile/greet/theos/include/Preferences/PSListController.h:14,
                     from prefs.mm:1:
/var/mobile/greet/theos/include/Preferences/UIScrollViewDelegate-Protocol.h:9: warning: duplicate declaration for protocol 'UIScrollViewDelegate'
In the file included from /var/mobile/greet/theos/include/Preferences/PSListController.h:14,
                     from prefs.mm:1:
In the file included from /var/mobile/greet/theos/include/Preferences/UITableViewDelegate-Protocol.h:10:  warning: duplicate declaration for protocol 'UITableViewDelegate'
make[3]: *** [obj/prefs.mm.88233918.o] Error 1
make[2]: *** [internal-bundle-all ] Error 2
make[1]: *** [prefs.all.bundle.variables] Error 2
make: *** [internal-all] Error 2 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-09T21:15:09.243

感谢 Andy Ibanez，这个问题得到了解决。问题在于标头 IOSurfaceAPI.h。此处描述了类似的内容[https://github.com/peterhajas/MobileNotifier/issues/316](https://github.com/peterhajas/MobileNotifier/issues/316)

我正在使用来自 github.com 的 rpetrich 标头，但从未提及文件夹“_fallback”。该文件夹具有 IOSurfaceAPI.h 标头，因此我将其复制到“IOSurface”文件夹。之后一切正常。希望它会帮助有同样错误的人。

# php - 使用时是否有速度/流程改进 只是想知道是否 可以提高或改善处理速度和请求 视口初始比例错误

> ID：14615783
> 
> 赞同：0
> 
> 时间：2013-01-30T23:25:17.350
> 
> 标签：php, tags, shortcode

只是想知道是否

```
<?php ?> 
```

可以提高或改善处理速度和请求

```
<? ?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T23:41:40.490

没有性能影响。

要使用`<?`（或 short_tags），您需要在 php.ini 上启用它

不推荐使用短标签。

`<?=`自 php 5.4 起，也`<?php echo`始终可用

fig-standarts psr-1 也明确表示只能使用`<?php`或`<?=`用于框架代码

这个问题是关于这个主题的一个很长很老的问题，并且确实有更多关于它的信息。

[可以使用 PHP 短标签吗？](https://stackoverflow.com/questions/200640/are-php-short-tags-acceptable-to-use)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T23:41:25.643

不会。两种构造都同样慢（在模板中广泛使用时会很明显）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-30T23:27:40.127

使用任何一种都没有显着的性能影响。

短标签如何`<? ?>`被弃用且不应使用（短回显标签除外，`<?= ?>`现在默认可用）。

# html - 视口初始比例错误

> ID：14615784
> 
> 赞同：1
> 
> 时间：2013-01-30T23:25:32.610
> 
> 标签：html, css, meta-tags, metatag

当我尝试在 iphone 上访问我的网站时，似乎初始比例不是很好。宽度不适合屏幕并且谷歌搜索了很多次，但似乎没有解决我的问题。任何人都可以帮助我吗？

元标记：

```
<meta name="viewport" content="width=device-width; initial-scale=1.0; maximum-scale=1"> 
```

CSS：

```
@media screen and (max-width:480px){
    ...
} 
```

这是网址[http://www.estudiocaju.com.br/homolog/dleve/home/](http://www.estudiocaju.com.br/homolog/dleve/home/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T23:35:04.707

```
<!-- iPhone Retina -->

<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"> 

<!-- iPhone 5 -->

<meta name="viewport" content="initial-scale=1.0,width=320.1"> 
```

设置启动图标/启动画面：

```
 <!-- iPhone (Retina) -->

    <link href="imgs/apple-touch-icon-114x114.png"

    sizes="114x114"

    rel="apple-touch-icon">

    <link href="imgs/apple-touch-startup-image-640x920.png"

    media="(device-width: 320px) and (device-height: 480px)

    and (-webkit-device-pixel-ratio: 2)"

    rel="apple-touch-startup-image">

    <!-- iPhone 5 -->

    <link href="imgs/apple-touch-startup-image-640x1096.png"

    media="(device-width: 320px) and (device-height: 568px)

    and (-webkit-device-pixel-ratio: 2)"

    rel="apple-touch-startup-image"> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-26T20:37:18.030

问题不是逻辑或意图或无关因素之一，而只是语法之一。“视口”的“内容”部分内的分隔符应该是逗号 (,) 而不是分号 (;)。您对分号的使用会扰乱浏览器对视口指令的解析，很可能导致浏览器无法看到第一个分号之后的所有内容。

# java - 一台服务器上的多个客户端java

> ID：14615786
> 
> 赞同：0
> 
> 时间：2013-01-30T23:25:35.477
> 
> 标签：java

好的，所以我的一个朋友正在教我有关 java 的网络知识，我们有一个成功的程序。这是一个简单的聊天，我们用 putty 连接，但我们有一个问题。一次只能连接一个客户端。有人可以说如何一次连接更多客户端以及如何限制连接的客户端数量吗？

```
public class Base 
{
  static ServerSocket serverSocket;
  public static void main(String[] args) throws IOException
  {
    final ServerSocket serverSocket = new ServerSocket (1337);
    Thread thread = new Thread(new Runnable()
                                 {
      public void run()
      {
        try
        {
          System.out.println("Waiting for connections...");
          //Make Socket on port
          Socket client = serverSocket.accept();
          System.out.println("Connection from " + client.getInetAddress());
          //initialixe no socket with connect server gets
          BufferedReader in = new BufferedReader (new InputStreamReader(client.getInputStream()));
          //init new beffer to read incom
          //while loop to read stuff
          final BufferedWriter out = new BufferedWriter(new PrintWriter(client.getOutputStream()));
          out.write("Your Connected Mate");
          out.newLine();
          out.flush();
          new Thread(new Runnable()
                       {
            public void run()
            {
              try
              {
                Scanner s = new Scanner(System.in);
                while(s.hasNext())
                {
                  out.write("CLIENT] " + s.nextLine());
                  out.newLine();
                  out.flush();
                }
              }
              catch(Exception e)
              {
                e.printStackTrace();
              }
            }
          }).start();
          while(true)
          {
            //make a string form anything thats read from the socket
            String tmp = in.readLine();
            //if the string isnt null (which it is if we disconnect) print it out
            if(tmp != null)
            {
              System.out.println("[CLIENT -> SERVER] " + tmp);
            }
          }
        }
        catch(Exception e)
        {
          e.printStackTrace();
        }
      }
    });
    thread.run();
  }
} 
```

我们没有尝试过任何事情，因为我们不知道:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T23:49:24.130

我相信您需要围绕接受客户端中的连接（在现有线程内）放置一个`while(true)`循环（或或其他东西）。如果您要让连接长时间保持活动状态，我想您会想要生成处理它们的线程（简单的 Web 服务器等用例可能不需要生成线程 - 时间量每个客户端占用的资源可能少于生成线程所占用的资源）。`while(notInterrupted)``run`

尝试四处寻找一些示例服务器，看看是否可以根据需要调整它们。

至于限制能够连接的客户端数量，您可能需要某种阻塞数据结构来处理线程池，并且只有在一个线程被释放时才给您一个。想到一个[线程池......](http://docs.oracle.com/javase/tutorial/essential/concurrency/pools.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T23:49:57.660

将第一个语句中的所有内容包围`try`在一个 while 循环中，只要您希望连接另一个客户端，该循环就会不断重复。然后，您需要将输入代码（如`in.readLine()`代码）放入它自己的线程中，就像您为服务器的输出（`out.write())`.

每个客户端都需要自己的输入线程和输出线程。尽量保持客户端和服务器之间的通信脱离主线程，以便服务器可以继续接受连接。

示例代码：

```
//Setup your ServerSocket

ServerSocket server = new ServerSocket();

while (true){
    Socket s = server.accept();
    Thread input = new Thread(new Runnable(){
            //Set up your BufferedReader or whatever input method you are using here
                      BufferedReader in = new BufferedReader (new InputStreamReader(client.getInputStream()));

            while(true)
            {
            //make a string form anything thats read from the socket
            String tmp = in.readLine();
            //if the string isnt null (which it is if we disconnect) print it out
            if(tmp != null)
            {
              System.out.println("[CLIENT -> SERVER] " + tmp);
            }
          }
        }).start();

    //Do the same for your output as you just did for your input (make a new thread, make a new writer object, etc.)
}
} 
```

**注意：这是一个*非常*粗略的例子。您需要填写一些空白，也许还有一些 {}** 希望这会有所帮助！

# ruby-on-rails - 在Rails的列表项中嵌套跨度内容标签

> ID：14615787
> 
> 赞同：0
> 
> 时间：2013-01-30T23:25:42.123
> 
> 标签：ruby-on-rails, ruby, content-tag

如何使用 Rails content_tag 方法嵌套内容标签（跨越一个 li）以显示以下内容：

```
<ul>
  <li>
   <a href="something">Groups</a>
     <span>
       <a href="something">Recent</a>
     </span>
     <span>
       <a href="something">Popular</a>
     </span>
   </li>
</ul> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T23:28:29.550

```
<% content_tag :li do %>
  <span>...</span>
<% end %> 
```

您也可以嵌套`content_tag`s，但您的代码可能会变得不那么可读。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T23:41:44.063

```
content_tag :ul do
  content_tag :li do
    link_to "Groups", something_path
    content_tag :span do
       link_to "Recent", something_path
    end
    content_tag :span do
       link_to "Popular", something_path
    end
  end
end 
```

我不认为这是使用 content_tag 的另一种方法，而且我认为代码的可读性一点也不差。这只是口味问题。=D

# javascript - 需要帮助了解 RegEx 在 JavaScript 中的作用

> ID：14615790
> 
> 赞同：1
> 
> 时间：2013-01-30T23:25:49.523
> 
> 标签：javascript, regex

```
///^index\s([0-9A-Fa-f]+)\.\.([0-9A-Fa-f]+)\s?(.+)?$/// 
```

据我所知，它`index`在一开始就搜索这个词..然后我迷路了..

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-30T23:28:04.110

您可以使用[regex101.com](http://regex101.com/r/fF7zO9)来解释：

![在此处输入图像描述](../Images/9497f904a7c872ec4fb26b680f078c44.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-30T23:31:22.507

我将 regexper 用于此类事情：[http ://www.regexper.com/](http://www.regexper.com/)

![在此处输入图像描述](../Images/b2a707fcd2c3e5e9fdc57c4c3a9523bd.png)

看到图形流程图更适合我的大脑。

从这里我可以看出它正在寻找以下行：

`index 9F..A0 something`

并捕获十六进制数字和最终的东西作为子字符串匹配。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-30T23:30:30.403

逐行：

```
^    //start of the line
index    //the literal string 'index'
\s //a whitespace char
([0-9A-Fa-f]+) //1 or more characters from the given set
\.\. //two literal periods
([0-9A-Fa-f]+) //1 or more characters from given set
\s? //0 or 1 whitespace characters
(.+)? //0 or 1 multiples of 1 or more periods
$ //end of the line 
```

所以......看起来它正在匹配具有一些奇怪格式的十六进制编码字符串：

```
index 9A9A..ACAC.......... 
```

应该匹配。

# matlab - Matlab中的经度、纬度和距离

> ID：14615792
> 
> 赞同：1
> 
> 时间：2013-01-30T23:25:57.893
> 
> 标签：matlab, for-loop, coordinate

我的矩阵 datamat 具有 XY 坐标：

```
-80.26 40.11
-80.44 40.24
-80.29 40.49
-80.45 40.48
-80.55 40.90
-80.32 40.19 
```

我必须计算所有对的距离，其数量为 6*5/2=15。距离只是 sqrt((x_i-x_j)^2+(y_i-y_j)^2)。如何创建一个存储这十五个距离值的向量？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T23:47:27.090

这里有两种可能的解决方案。第一个使用单个循环，但在该结构中相当有效。第二种是无循环的，但需要分配额外的矩阵`A`。我在两者上都进行了一些定时运行（见下文），并且无循环解决方案表现最佳。

```
%# Your matrix
M = [-80.26 40.11;
     -80.44 40.24;
     -80.29 40.49;
     -80.45 40.48;
     -80.55 40.90;
     -80.32 40.19];

%# Get the indices of all combinations
I1 = combnk(1:size(M, 1), 2);
T = size(I1, 1);

%# Loop-based solution
Soln1 = nan(T, 1);
for n = 1:T
    Soln1(n) = sqrt((M(I1(n, 1), 1) - M(I1(n, 2), 1))^2 + (M(I1(n, 1), 2) - M(I1(n, 2), 2))^2);
end 

%# Loop-less but requires the creation of matrix A
A = M(I1', :);
A = A(2:2:end, :) - A(1:2:end, :);
Soln2 = sqrt(sum(A.^2, 2)); 
```

对于一个有 100 行的随机矩阵`M`，我对每个解决方案执行了 1000 次迭代。结果是：

```
Elapsed time is 0.440229 seconds. %# Loop based solution
Elapsed time is 0.168733 seconds. %# Loop-less solution 
```

无循环解决方案似乎是赢家。

# java - 用java启动一个新程序

> ID：14615794
> 
> 赞同：1
> 
> 时间：2013-01-30T23:26:04.453
> 
> 标签：java, class

我正在尝试在 Eclipse 中创建如下所示的程序，但它显示错误。我是 Java 新手，所以有人可以帮我修复它并解释它显示错误的原因吗？

```
public class Specifiers {

    public static void main(String[] args) {
        public void start1()
        {
            System.out.println("In Start Method");

        }

    }
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-30T23:29:02.507

您在类的方法中有一个方法。`start1`应该在类（而不是方法）中，并且您想从方法中*调用*它`main`。

此外，您需要创建类的*实例*才能访问非静态方法。非静态方法可以访问实例的各个状态（字段），因此您需要先使用构造函数构造一个。我建议您更多地了解面向对象编程中类和实例的概念。

```
public class Specifiers {
    public static void main(String[] args) {
        Specifiers x = new Specifiers();
        x.start1();
    }

    public void start1() {
        System.out.println("In Start Method");
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-30T23:28:30.900

Java 中的方法中不能有方法

这将起作用：

```
public class Specifiers {

    public static void main(String[] args) {
        System.out.println("In Start Method");
    }
} 
```

或这个

```
public class Specifiers {

    public static void main(String[] args) {
      new Specifiers( ).start1( );
    }

    public void start1()
    {
      System.out.println("In Start Method");

    }
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-30T23:29:41.327

您在方法中有一个方法声明。尝试这个：

```
public class Specifiers {

    public static void main(String[] args) {
        start1();
    }

    public static void start1()
    {
        System.out.println("In Start Method");
    }
} 
```

编辑：当然，它需要是静态的。我的错...

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-31T00:00:28.217

该`main`方法是 Java 虚拟机执行的第一个方法。当您使用 Java 解释器执行一个类时，运行时系统首先调用该类的`main()`方法。然后该`main()`方法调用运行应用程序所需的所有其他方法。可以说main方法是Java程序的入口点，没有这个方法Java程序就无法运行

```
public class FirstClass{
    public static void main(String[] args) {
        Specifiers x = new Specifiers();
        x.start1();
    }
}

public class Specifiers {

    public void start1() {
        System.out.println("In Start Method");
    }
} 
```

# android - 需要Button连续多次播放.mp3声音

> ID：14615795
> 
> 赞同：1
> 
> 时间：2013-01-30T23:26:07.383
> 
> 标签：android

1）这是我的主要活动

```
package com.art.drumdrum;

import java.util.Timer;
import android.app.Activity;
import android.media.MediaPlayer;
import android.os.Bundle;
import android.view.View;
import android.widget.Button;

public class MainActivity extends Activity {

Timer time;
MainActivity p;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    final MediaPlayer mpButtonClick = MediaPlayer.create(this, R.raw.kick);

    Button kick = (Button) findViewById(R.id.kick);
    kick.setOnClickListener(new View.OnClickListener() {

        public void onClick(View v) {
            mpButtonClick.start();
        }
    });

}

} 
```

2）这是我的 xml 清单

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="com.art.drumdrum"
android:versionCode="1"
android:versionName="1.0" >

<uses-sdk
    android:minSdkVersion="10"
    android:targetSdkVersion="17" />

<application
    android:allowBackup="true"
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@style/AppTheme" >
    <activity
        android:name="com.art.drumdrum.MainActivity"
        android:label="@string/app_name" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>

</application>

</manifest> 
```

3）这是我的主要布局xml（主要看按钮ID“踢”）

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:background="#000000"
tools:context=".MainActivity" >

<Button
    android:id="@+id/button4"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignBaseline="@+id/button6"
    android:layout_alignBottom="@+id/button6"
    android:layout_marginLeft="39dp"
    android:layout_toRightOf="@+id/button6"
    android:text="Button" />

<Button
    android:id="@+id/button6"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_below="@+id/button8"
    android:layout_marginTop="15dp"
    android:layout_toRightOf="@+id/button8"
    android:text="Button" />

<Button
    android:id="@+id/button3"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_below="@+id/button7"
    android:layout_marginTop="48dp"
    android:layout_toRightOf="@+id/button6"
    android:text="Button" />

<Button
    android:id="@+id/button7"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignLeft="@+id/button2"
    android:layout_below="@+id/button5"
    android:layout_marginTop="18dp"
    android:text="Button" />

<Button
    android:id="@+id/button2"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignLeft="@+id/button3"
    android:layout_below="@+id/button1"
    android:layout_marginLeft="14dp"
    android:text="Button" />

<Button
    android:id="@+id/button1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentTop="true"
    android:layout_alignRight="@+id/button6"
    android:layout_marginRight="22dp"
    android:layout_marginTop="22dp"
    android:text="Button" />

<Button
    android:id="@+id/button9"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_below="@+id/button6"
    android:layout_marginTop="22dp"
    android:layout_toLeftOf="@+id/button7"
    android:text="Button" />

<Button
    android:id="@+id/kick"
    style="@style/style"
    android:layout_width="wrap_content"
    android:layout_height="match_parent"
    android:layout_alignBaseline="@+id/button3"
    android:layout_alignBottom="@+id/button3"
    android:layout_alignParentLeft="true"
    android:layout_marginLeft="25dp"
    android:text="kick" />

<Button
    android:id="@+id/button5"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignLeft="@+id/button6"
    android:layout_alignTop="@+id/button2"
    android:layout_marginTop="33dp"
    android:text="Button" />

</RelativeLayout> 
```

4）只希望每个按钮都有声音，然后能够继续按下它们并且声音重叠，现在它等待声音结束后再播放下一个，即使我只是按下同一个键

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T23:38:15.130

似乎您只有一个 MediaPlayer 对象。如果这是真的，那么这就是您一次只能播放一个样本的原因之一。尝试使用多个 MediaPlayer 对象也许每个按钮一个？

我仍然不确定这是否会起作用，这可能是 MediaPlayer 类本身的限制。在这种情况下，您需要改用[SoundPool](https://developer.android.com/reference/android/media/SoundPool.html)，并确保将最大流设置为 > 1。

它看起来像这样：

```
sp = new SoundPool(5, AudioManager.STREAM_MUSIC, 0);
int streamID = sp.load(this, R.raw.sound, 1);
//....
sp.play(streamID, 1, 1, 1, 0, 1); 
```

这个`5`例子是最大流值，所以如果您一次需要超过 5 个流，请更改它。

# ios - 在 Flipside 模板上使用 TableView

> ID：14615798
> 
> 赞同：0
> 
> 时间：2013-01-30T23:26:18.697
> 
> 标签：ios

我正在使用 Xcode 的**Flipside**模板。

我想在 Flipside 视图上添加一个表格视图。

我添加了表格视图和单元格视图并修改了 .h

```
@class FlipsideViewController;

@protocol FlipsideViewControllerDelegate
- (void)flipsideViewControllerDidFinish:(FlipsideViewController *)controller;
@end

@interface FlipsideViewController : UIViewController
< ABPeoplePickerNavigationControllerDelegate,UITableViewDataSource, UITableViewDelegate>
{
    NSMutableArray *mydata;
    IBOutlet UITableView *tblVw;
}

@property (weak, nonatomic) id <FlipsideViewControllerDelegate> delegate; 
```

在 Flipside.m 中，我有一个切换到主视图的按钮：

```
- (IBAction)done:(id)sender
{
    [self.delegate flipsideViewControllerDidFinish:self];
} 
```

它应该启动主视图的 FlipsideViewControllerDidFinish 方法，但我不再工作，因为我添加了 Tableview 并且它是委托 ..

有什么问题？谢谢

# java - 如何在条件 (if/then) 语句中包含范围？

> ID：14615802
> 
> 赞同：1
> 
> 时间：2013-01-30T23:26:48.023
> 
> 标签：java, range, conditional-statements

我正在尝试用 Java 编写一个程序，当所有季度的成绩以及期中考试和期末考试的成绩都在时，它会返回一个字母成绩。到目前为止，它是这样的：

```
public static void main (String args[])
{
   System.out.println("To figure out final grade answer these questions. Use only numbers, and include decimal points where applicable");
   Scanner g = new Scanner(System.in); 
   System.out.println("What was your quarter one grade?");
   int o = g.nextInt();
   System.out.println("What was your quarter two grade?");
   int t = g.nextInt(); 
   System.out.println("What was your quarter three grade?");
   int h = g.nextInt();
   System.out.println("What was your quarter four grade?");
   int r = g.nextInt();
   System.out.println("What was your grade on the midterm?");
   int m = g.nextInt();
   System.out.println("What was your grade on the final?");
   int f = g.nextInt();
   double c = 0.2 * o + 0.2 * t + 0.2 * h + 0.2 * r + 0.1 * m + 0.1 *f;
   if(c >= 95)
   {
        System.out.println("A+");
   } 
   else if(c = ?)
   {
       System.out.println("A");
   }  
} 
```

}

我想在代码的最后一个 else if 语句中显示 90 到 94 的范围。有人建议我使用 Math.random 作为命令，但我不知道要写什么方程才能在我提到的范围内工作。任何帮助将非常感激。提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-30T23:29:24.117

由于您已经`c >= 95`在第一条语句中进行了测试，因此您只需要检查下限：

```
if(c >= 95) { /* A+ */ }
else if(c >= 90) { /* A */ }
else if(c >= 85) { /* A- */ }
... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T23:49:33.270

```
if(c >= 95)
   {
        System.out.println("A+");
   } 
   else if(c >= 90 && c <=94)
   {
       System.out.println("A");
   } 
```

编辑您可以根据需要摆脱， `&& c <=94`因为您已经检查了上限

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-06-18T12:48:38.577

这是一种稍微不同的动态生成成绩的方法，

```
private static final String[] constants = {"F","D","C","B","A"};
public String getGrade(float score) {
    if(score < 0)
        throw new IllegalArgumentException(Float.toString(score));

    if((int)score <= 59)
        return constants[0];

    if((int)score >= 100)
        return constants[4];

    int res = (int) (score/10.0);
    return constants[res-5];
} 
```

# javascript - 为什么多个 setTimeouts 在 IE9 上只执行一次？

> ID：14615810
> 
> 赞同：0
> 
> 时间：2013-01-30T23:27:11.867
> 
> 标签：javascript, internet-explorer-9, settimeout

我已经检查了有关此的其他条目，但似乎都不是我的问题。下面的 HTML 页面在 Chrome 上运行良好。有三行输出。

然而，在 IE9 上，只输出第一行。关于为什么会这样的任何想法？

```
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <title></title>
    <script>
        var process = (function () {

            var count = 0;    

            function _execute() {
                count++;
                document.write("Executed " + count + " time(s).<br\>");
            }

            return {
                add: function () {

                    setTimeout(_execute, 50);
                }
            };
        })();
    </script>
</head>
<body>
<script>
    process.add();
    process.add();
    process.add();
</script>

</body>
</html> 
```

输出铬：

```
Executed 1 time(s).
Executed 2 time(s).
Executed 3 time(s). 
```

输出 IE9：

```
Executed 1 time(s). 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T23:39:05.370

页面加载后不要使用 document.write！查看页面源。您将看到它替换了整个文档。

使用 appendChild 或 innerHTML 向页面添加新内容。如果您正在调试，请使用控制台。

```
 var process = (function () {

        var count = 0,
            outElem = document.getElementById("out");

        function _execute() {
            count++;
            var li = document.createElement("li");
            li.innerHTML = "Executed " + count + " time(s)";
            outElem.appendChild(li);
        }

        return {
            add: function () {

                setTimeout(_execute, 50);
            }
        };
    })(); 
```

[使用 appendChild 运行示例](http://jsfiddle.net/d7CRN/)

# actionscript-3 - 使用 ActionScript 进行绑定

> ID：14615817
> 
> 赞同：2
> 
> 时间：2013-01-30T23:27:48.910
> 
> 标签：actionscript-3, apache-flex, flex3

我已经自定义了带有 x 属性的 textinput 控件。在我的程序中，我将控件实例化为 vtiA。我的程序有一个名为 _y 的可绑定变量。

我希望每次我的程序更改 _y 时，控件 vtiA 的属性 x 都会反映新值。

我所做的不起作用的是

```
[Bindable] private var _y;

private function whocares():void
{
var vtiA:MyTextInput = new MyTextInput;
vtiA.x = _y
} 
```

如果这是 mxml 我只想说；

```
<xx:MyTextInput id="vtiA" x="{_y}"/> 
```

as3中的等价物是什么？

保罗

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T23:40:13.283

[可绑定] 仅适用于公共属性。所以你需要：

```
[Bindable] public var _y; 
```

# php - 图片上传速度更快

> ID：14615818
> 
> 赞同：0
> 
> 时间：2013-01-30T23:27:55.353
> 
> 标签：php, mysql

这是一个多图像选择器上传器，我遇到的问题是一旦选择图像并单击提交它需要很长时间才能收到请求有没有办法让它处理得更快？

不要担心数据库表和列是否因为测试原因而没有使我的完整数据库成为第一个测试。

提前致谢。

```
 <?
session_start();
include('connect.php');
?>

<form action="" method="POST" enctype="multipart/form-data">
<input type="file" name="files[]" multiple/>
<input type="submit"/>
</form>

<?

if(isset($_FILES['files'])){
$errors= array();
foreach($_FILES['files']['tmp_name'] as $key => $tmp_name ){
    $file_name = $key.$_FILES['files']['name'][$key];
    $file_size =$_FILES['files']['size'][$key];
    $file_tmp =$_FILES['files']['tmp_name'][$key];
    $file_type=$_FILES['files']['type'][$key];  
    if($file_size > 2097152){
        $errors[]='File size must be less than 2 MB';
    }
$desired_dir="Uploads/";    
    $query="INSERT into Pictures (`id`,`Image1`,`Image2`,`Image3`) VALUES('','$desired_dir$file_name','$file_size','$file_type'); ";
    if(empty($errors)==true){
        if(is_dir($desired_dir)==false){
            mkdir("$desired_dir", 0700);        // Create directory if it does not exist
        }
        if(is_dir("$desired_dir/".$file_name)==false){
            move_uploaded_file($file_tmp,"$desired_dir/".$file_name);
        }else{                                  // rename the file if another one exist
            $new_dir="$desired_dir/".$file_name.time();
             rename($file_tmp,$new_dir) ;               
        }
     mysql_query($query);           
    }else{
            print_r($errors);
    }
}
if(empty($error)){
    echo "Success";
}
}
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T23:43:05.883

根据上面的评论，上传似乎正常。您的 Internet 连接速度较慢，上传文件时速度会变慢。

我还强烈建议您研究[MySQLi](http://php.net/manual/en/book.mysqli.php)或[PDO](http://php.net/manual/en/book.pdo.php)。您当前的脚本很容易受到攻击

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-09-29T06:27:05.207

据我所知，没有多线程将文件上传到服务器。并且上传速度受限于**服务器的下载速度**和**用户的上传速度**（比服务器的下载速度慢得多）。不幸的是，无法通过更改代码来加快上传速度。

# vb.net - Overloading a method with Object as parameter type

> ID：14615822
> 
> 赞同：0
> 
> 时间：2013-01-30T23:28:24.693
> 
> 标签：vb.net, object, inheritance, overloading

I'm trying to figure out this weird behavior. I have a base class (A) with an overloaded method called "M": one for integers, and one for floats (single on VB.NET).

On the other hand, I have a second class (B) that inherits from A, and it overloads method M in two ways: one for data type double, and one for object data type.

The problem is: I expect the methods to use each function for its data type, but for some strange reason, the method with Object data type takes all the calls. Why is that happening?

I expected the output of this program to be `15`, but instead, it's `4`.

Here's the code (VB.NET):

```
Module Module1

Public Class A

    Public Function M(ByVal a As Integer) As Integer
        Return 8
    End Function

    Public Function M(ByVal a As Single) As Integer
        Return 4
    End Function

End Class

Public Class B
    Inherits A

    Public Overloads Function M(ByVal a As Double) As Integer
        Return 2
    End Function

    Public Overloads Function M(ByVal a As Object) As Integer
        Return 1
    End Function

End Class

Sub Main()

    Dim a0 As Double = 1
    Dim a1 As Single = 2
    Dim a2 As Integer = 4
    Dim a3 As Object = 8

    Dim arre(4)

    arre(0) = a0
    arre(1) = a1
    arre(2) = a2
    arre(3) = a3

    Dim b As New B

    Dim suma% = 0

    For i = 0 To 3
        suma += b.M(arre(i))
    Next i

    Console.WriteLine(suma)

    System.Threading.Thread.CurrentThread.Sleep(2000)
End Sub

End Module 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T00:25:04.910

The reason why it calls the overload that takes an `Object` is because your array is of type `Object`.

```
' original code
Dim arre(4)

arre(0) = a0
arre(1) = a1
arre(2) = a2
arre(3) = a3

' verbose version
Dim arre(4) As Object

arre(0) = DirectCast(a0, Object)
arre(1) = DirectCast(a1, Object)
arre(2) = DirectCast(a2, Object)
arre(3) = DirectCast(a3, Object) 
```

Look up "boxing" and "unboxing" in .NET, there are tons of good articles that explain this in more detail.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T00:37:24.510

The Object overload is being called in your example every time because you are declaring the array as a Object array. (`Option Strict` will force you to put `As Object` after it, but that doesn't change things.) It doesn't matter what type you put inside the array because the values are getting "boxed" into Objects

Consider the following, simplified to demonstrate what is happening (There is no need for your custom classes or inheritance to demonstrate what you saw)

```
Module Module1

Public Function M(ByVal a As Integer) As Integer
    Return 8
End Function

Public Function M(ByVal a As Object) As Integer
    Return 1
End Function

Sub Main()
    Dim a0 As Integer = 0
    Dim a1 As Object = 0
    Dim arre(1)
    arre(0) = a0
    arre(1) = a1

    Console.WriteLine(M(arre(0)))
    ' 1, arre() is implicitly typed as an array of Objects
    ' so the Object overload will be called

    Console.WriteLine(M(arre(1)))
    ' 1, see above

    Console.WriteLine(M(DirectCast(arre(0), Integer)))
    ' 8, explicit cast to an Integer

    Console.WriteLine(M(DirectCast(arre(1), Integer)))
    ' 8, see above

    Console.WriteLine(M(a0))
    ' 8, a0 declared explicitly as an Integer

    Console.WriteLine(M(a1))
    ' 1, a1 declared explicitly as an Object

    Threading.Thread.Sleep(2000)
End Sub

End Module 
```

# typescript - 在 TypeScript 中扩展 Date.prototype

> ID：14615827
> 
> 赞同：3
> 
> 时间：2013-01-30T23:28:57.240
> 
> 标签：typescript

请帮助我理解为什么这适用于数字但不适用于日期。

```
declare interface Number {
    toPreferredStringFormat(): string;
}

declare interface Date {
    toPreferredStringFormat: string;
}

(function () {
    // OK
    Number.prototype.toPreferredStringFormat = () => {
        return this.toString() + " preferred!";
    };

    // ERROR (why?!)
    Date.prototype.toPreferredStringFormat = () => {
        return this.toString() + " preferred!";
    };
})(); 
```

我做对了吗？

谢谢！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2016-05-26T19:24:30.373

当我想用一种新方法扩展 Date 原型时，对我有用的是：

```
declare global {
    interface Date{
        yyyymmdd: () => string;    
    }
} 
```

[我从这里](https://github.com/Microsoft/TypeScript/issues/7726#issuecomment-204056766)捡到的

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-05-01T08:10:36.247

您的两个声明之间存在细微差别...

```
toPreferredStringFormat(): string; // has ()
toPreferredStringFormat: string; // doesn't have () 
```

这两个中的第二个说属性是一个字符串，第一个说它是一个函数。

这是一个完整的工作示例，使用简单的方式说您希望函数返回一个字符串，这使得它比仅仅存在括号更明显，但这也有效：

```
declare interface Number {
    toPreferredStringFormat: () => string;
}

declare interface Date {
    toPreferredStringFormat: () => string;
}

(function () {
    // OK
    Number.prototype.toPreferredStringFormat = () => {
        return this.toString() + " preferred!";
    };

    // ERROR (why?!)
    Date.prototype.toPreferredStringFormat = () => {
        return this.toString() + " preferred!";
    };
})(); 
```

# javascript - 查询字符串中的重复变量

> ID：14615828
> 
> 赞同：3
> 
> 时间：2013-01-30T23:29:01.570
> 
> 标签：javascript, jquery, html, firefox

我在使用 javascript 和 firefox 10.0.11 时遇到了一个奇怪的问题。我已经用 IE 进行了测试，但无法复制该问题。

我有一个链接，该链接指向显示有关对象的一些信息的页面。我使用 javascript 向此页面添加了附加功能。如果启用了 javascript，则锚链接将被重定向到 javascript 函数。

```
<a href="/Comment?id=1186281" onclick="return CommentSubmit(1186281)">Comment</a> 
```

```
function CommentSubmit(id) {
    $("#DynForm").append("<input type='hidden' name='id' value='" + id + "' />");
    $("#DynForm").attr("action", "/Comment/Index");
    $("#DynForm").submit();
    return false;
}; 
```

如您所见，javascript 插入了一个带有键值的隐藏输入标签。无 javascript 版本工作正常，但我遇到了 javascript 的一些问题。第一次单击`Comment`任何项​​目的按钮时，它可以正常工作。如果我回击然后单击任何`Comment`链接，页面就会显示，就好像我再次单击了第一个链接一样。经过检查，我注意到 url 参数对于每个后续的“返回”和“点击”都被“堆叠”了

```
/Comment?id=1
/Comment?id=1&id=2
/Comment?id=1&id=2&id=3 
```

如果我再次导航到该页面（不返回），第一个链接将再次起作用，然后开始这种奇怪的行为。单击几个链接后查看页面源，我看不到`hidden`会添加这些附加参数的新字段。这是一个已知的问题？我该如何进一步调试并修复它？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-30T23:34:45.987

这不是错误，这是一个功能:)

您的浏览器正在缓存页面，因此当您返回时，您并没有刷新它，而是按原样返回，即使用隐藏的输入字段。

您需要做的就是在再次附加之前删除该字段。

```
function CommentSubmit(id) {
    $("input[name=id]").remove();
    $("#DynForm").append("<input type='hidden' name='id' value='" + id + "' />");
    $("#DynForm").attr("action", "/Comment/Index");
    $("#DynForm").submit();
    return false;
}; 
```

# java - DataNucleus 类不可持久异常

> ID：14615830
> 
> 赞同：2
> 
> 时间：2013-01-30T23:29:03.497
> 
> 标签：java, netbeans, jdo, datanucleus

我试图用datanucleus jdo（和neodatis作为数据存储）制作一些基本的持久类。

我有以下三个课程（从教程中复制）

库存.java

```
@PersistenceCapable
public class Inventory {

@PrimaryKey
String name = null;

Set<Product> products = new HashSet();

public Inventory(String name)
{
    this.name = name;}

public Set<Product> getProducts() {return products;}
} 
```

产品.java

```
@PersistenceCapable
public class Product {

@PrimaryKey
@Persistent(valueStrategy=IdGeneratorStrategy.INCREMENT)
long id;
String name = null;
String description = null;
double price = 0.0;

public Product(String name, String desc, double price)
    {
    this.name = name;
    this.description = desc;
    this.price = price;}

} 
```

和 book.java

```
@PersistenceCapable
public class Book extends Product {

String author=null;
String isbn=null;
String publisher=null;

public Book(String name, String desc, double price, String author, 
            String isbn, String publisher)
{
    super(name,desc,price);
    this.author = author;
    this.isbn = isbn;
    this.publisher = publisher;
}    
} 
```

自从构建项目时，所有这些都应该得到正确的增强，我得到了这个：

```
(...)
gen 31, 2013 12:10:14 AM org.datanucleus.enhancer.DataNucleusEnhancer main
INFO: DataNucleus Enhancer (version 3.2.0.m2) for API "JDO" using JRE "1.7"
ENHANCED (PersistenceCapable) : minchiabbasta.Book
ENHANCED (PersistenceCapable) : minchiabbasta.Inventory
ENHANCED (PersistenceCapable) : minchiabbasta.Product
(...) 
```

但

运行应用程序时，持久性管理器会很好地启动，但是当它尝试使某些东西持久化时，会抛出此异常

```
org.datanucleus.api.jdo.exceptions.ClassNotPersistenceCapableException: The class 
"minchiabbasta.Inventory" is not persistable. This means that it either hasnt been 
enhanced, or that the enhanced version of the file is not in the CLASSPATH (or is 
hidden by an unenhanced version), or the Meta-Data/annotations for the class are not 
found. 
```

我无法弄清楚为什么，有人可以给我一个提示吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-04-20T02:14:26.820

多年后，同样的症状。就我而言，我在堆栈跟踪上遇到了同样的错误和 3 条建议。然而对我来说，真正的问题不是这些，而是​​我在 Eclipse 和 Google | 上运行的。App Engine 设置未选中“启用本地 HRD 支持”和“用户数据核 JDO/JPA 以访问数据存储区”。一旦我检查了这些项目，我就能够使用与以前相同的代码进行持久化，并且没有收到上述错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-08-06T02:34:46.437

如果您的增强器在 Eclipse 中保存文件时运行，请注意查看它是否在 Eclipse 控制台中进行了增强。我注意到我安装的 Eclipse 偶尔会忘记增强类。如果它忘记了，它会将类部署到未增强的 GAE。只需重新启动 Eclipse 即可。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-30T23:44:14.753

试试看：

```
@Entity // use this annotation 
public class MyClass
{
@Id
long id;

@Basic
@Convert(converter=URLStringConverter.class)
URL url; 
```

# javascript - Soundcloud Javascript API SC.get() 不允许我更改函数外部的变量

> ID：14615831
> 
> 赞同：1
> 
> 时间：2013-01-30T23:29:04.750
> 
> 标签：javascript, soundcloud

Soundcloud Javascript API 中的 SC.get 函数似乎有问题。我尝试将新项目推送到 newSounds 数组；但是，在 _.each 循环退出后，newSounds 对象仍然是一个长度 = 0 的数组。此外，在 loadSounds 执行后，sounds 对象未定义。一些帮助将不胜感激，如果我需要发布更多信息来帮助解决问题，请告诉我。

```
loadSounds = function() {
    var newSounds = [];
    _.each(trackURLs, function(trackURL) {
      console.log(trackURL);
      SC.get(trackURL, function(track) {
        console.log(track.artwork_url);
        newSounds.push(track);
      });
    });
    return newSounds;
};

var sounds = loadSounds(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T10:22:22.800

在这种情况下，棘手的是它`SC.get`很可能是异步的，所以当你返回时，`newSounds`它几乎肯定是空的/不完整的。最重要的是，有多个调用`SC.get`来管理。

使用 jQuery 中的`deferred` [对象](http://api.jquery.com/category/deferred-object/)，您可以像这样解决您的问题（灵感来自[http://www.tentonaxe.com/index.cfm/2011/9/22/Using-jQuerywhen-with-a-dynamic-number-of-对象](http://www.tentonaxe.com/index.cfm/2011/9/22/Using-jQuerywhen-with-a-dynamic-number-of-objects)）：

```
function loadSounds() {
    var newSounds = [];

    var deferredObjects = $.map(trackURLs, function (item, index) {
        var deferred = $.Deferred();

        SC.get(trackURL, function(track) {                 
            newSounds.push(track);
            deferred.resolve(track);
        });

        return deferred.promise();
    });

    $.when.apply(this, deferredObjects).then(function () {
        console.log('All done');
        console.log(newSounds);
    });

    return newSounds;
} 
```

# python - 我怎样才能把一个大的 django-celery tasks.py 模块分成更小的块？

> ID：14615836
> 
> 赞同：3
> 
> 时间：2013-01-30T23:29:40.633
> 
> 标签：python, django, django-celery

我有一些非常冗长的任务功能，我想从我的`tasks.py`模块中分离出来，但仍然可以像`from myapp.tasks import my_task`. 我尝试为每个任务创建子模块，但随后我必须在 中插入一些技巧`tasks/__init__.py`，这看起来很hackish（并且需要为任务提供与模块相同的名称）：

```
import pkgutil

for module_loader, name, ispkg in pkgutil.iter_modules(__path__):
    __import__('myapp.tasks.%s' % name)
    locals().update({name: getattr(locals()[name], name)}) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-31T18:14:10.987

*这个答案是关于管理命令而不是 Celery 后台任务意义上的任务。*

* * *

我认为最直接的解决方案是首先将任务编写为 Django 管理命令，然后从 tasks.py 中调用它们。这样，您可以将您的任务分解为每个文件一个任务，并获得能够从命令行任意调用您的任务的额外好处。

所以，在`tasks.py`：

```
from django.core import management

@task()
def my_task():
    management.call_command('my_task') 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-31T00:02:13.993

我对 Django-Celery 不熟悉，但对 Celery 很熟悉，所以这更像是一个一般性的说明，可以回答你的问题......

Celery 任务在执行时由名称标识。默认情况下，任务被赋予其 Python 位置的名称，即。`'%s.%s' % (my_task.__module__, my_task.__name__)`，或“myapp.tasks.function_name”。也就是说，您可以通过为 @task 装饰器提供“名称”kwarg 来覆盖任务名称。因此，如果您想覆盖任务名称：

```
# We're in myapp.tasks but the task will not be named myapp.tasks.my_task as expected
@task(name='some.overridden.name')
def my_task():
    print 'Something' 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-02-21T15:23:34.460

以下也有效：

*   创建一个包`tasks`
*   `tasks`在包内的 python 模块中传播你的任务
*   将模块导入到`tasks/__init__.py`

例子：

```
django_app
| tasks
   | __init__.py
   | filesystem_tasks.py
| admin.py
| url.py 
```

*   `tasks/filesystem_tasks.py`可以包含这个：

    ```
    from __future__ import absolute_import, unicode_literals
    from celery import shared_task

    @shared_task
    def add(x, y):
        return x + y 
    ```

*   `tasks/__init__.py`可以包含这个：

    ```
    from .filesystem_tasks import * 
    ```

*   运行 celery 表示任务，因为它们将`tasks.py`在同一级别中声明，例如。`url.py`.

# php - 采取 OOP 暴跌

> ID：14615838
> 
> 赞同：2
> 
> 时间：2013-01-30T23:29:43.863
> 
> 标签：php

我决定开始或尝试开始在 OOP 中为我的 PHP 应用程序编写代码。这是我的第一堂课。这个类的目的是创建一个表单并构建不同的元素。请让我知道它是否在正确的轨道上。这些字段已经存储在数据库中。优先级参数还没有做任何事情，但会突出问题。

```
//Form Class
<?php

class form {

        function genQuestion ($id) {

        $type = $this->getQuestionType($id);

        $priority = $this->getQuestionPriority($id);

        if ($field['type'] == "text") {
            $html .= $this->add_text_field($id, $priority);
        }
        if ($field['type'] == "select") {
            $html .= $this->add_select_field($id, $priority);
        }
        if ($this->type == 'radio') {
            $html .= $this->add_radio_field($id, $priority);
        }
        if ($field['type'] == "checkbox") {
            $html .= $this->add_checkbox_field($id, $priority);
        }       

        return $html;

    }

    function getQuestionType ($id) {
        $field_query = "SELECT type FROM fields WHERE id = '$id'";
        $field = mysql_query($field_query);
        $field = mysql_fetch_assoc($field);
        $this->type = $field['type'];       
    }   

    function getQuestionPriority ($id) {
        $field_query = "SELECT priority FROM fields WHERE id = '$id'";
        $field = mysql_query($field_query);
        $field = mysql_fetch_assoc($field);
        $this->type = $field['priority'];       
    }       

    function add_text_field($id) {
        $fields_query = "SELECT * FROM fields WHERE id = '$id'";
        $fields = mysql_query($fields_query);
        $field = mysql_fetch_assoc($fields); 
        $content .= '<div><label> ' . $field['field'] . ': </label>';       
        $content .= '<input type="text" name="' . $field['id'] . '"></div>';
        return $content;
    } 

    function add_select_field($id) {
        $fields_query = "SELECT * FROM fields WHERE id = '$id'";
        $fields = mysql_query($fields_query);
        $field = mysql_fetch_assoc($fields); 
        $content .= '<div><label> ' . $field['field'] . ': </label>';       
        $options = explode('|', $field['options']);
        $content .= '<select name="' . $field['id'] . '">'; 
        while (list($key, $value) = each($labels)) {
            $content .= '<option value="' . $key . '"> ' .  $value . '</option>';
        }
        $content .= '</select></div>';
        return $content;
    } 

    function add_radio_field($id) {
        $fields_query = "SELECT * FROM fields WHERE id = '$id'";
        $fields = mysql_query($fields_query);
        $field = mysql_fetch_assoc($fields); 
        $content .= '<div style="float: left; margin: 0 auto; width: 500px; text-align: right; clear: both;"><div style="float: left; width: 200px; margin-right: 25px;"><label> ' . $field['field'] . ': </label></div>';      
        $options = explode('|', $field['options']);
        while (list($key, $value) = each($options)) {
            $content .= '<div style="float: left; margin-right: 7px;">' . $value . '</div><div style="float: left;  margin-right: 17px;"><input type="radio" name="' . $field['id'] . '" value="' . $key . '" /></div>';
        }
        $content .= '</div>';
        return $content;
    } 

    function add_checkbox_field($id) {
        $fields_query = "SELECT * FROM fields WHERE id = '$id'";
        $fields = mysql_query($fields_query);
        $field = mysql_fetch_assoc($fields); 
        $content .= '<div><label> ' . $field['field'] . ': </label>';       
        $content .= '<input type="checkbox" name="' . $field['id'] . '" value="' . $field['options'] . '" /> ' . $field['labels'] . '</div>';
        return $content;
    }       

}

?>

//Controller
$fields_quesry = "SELECT * FROM fields";
$fields = mysql_query($fields_quesry);

$form = new form;

$form->genQuestion($field['id']); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T23:40:40.103

OOP 的重点不仅仅是使用类。是真正感觉到面向对象。这是什么意思？

程序代码旨在将程序制作为一系列算法。相反，OOP 代码旨在将程序视为一系列对象，这些对象填充了（通常）由对象本身管理的私有数据。

*当您以 OOP 方式*编写项目时，您不会*被迫*使用类。当您觉得需要拥有大量数据并仅以您想要的方式访问这些数据时，您应该使用类。

在您的代码中，我没有将该类视为一个对象，而是将一堆帮助函数由一个实际上不应该存在的类链接在一起。

# sql-server - SQL Server Profiler 监视器锁定持续时间

> ID：14615842
> 
> 赞同：2
> 
> 时间：2013-01-30T23:30:08.293
> 
> 标签：sql-server, locking, sql-server-2000, sql-server-performance

我正在尝试监视我的 SQL Server 上的锁定持续时间，但 Duration 列是空白的。如何使用 Profiler 进行监控？

# javascript - 如果集合包含空集，Raphaeljs 中的 getBBox 会出现问题

> ID：14615843
> 
> 赞同：2
> 
> 时间：2013-01-30T23:30:10.403
> 
> 标签：javascript, raphael

假设您有 Raphael set1，其中包含： - 一个矩形 (r1) - 一组矩形 (set2) - 一个空集 (set3)。

在 Raphael element.getBBox() 将适用于 set2。但是对于 set1，它将返回 NaN（对于 x2、y2、宽度和高度 - 但对于 x 和 y 则不会，它们可以正常工作）。但是 set1 确实有宽度和高度，因为它还包含 r1 和 set2。

set3.getBBox().y2 将返回 -Infinity。

我编写了一个小函数，可以帮助我获得包含空集的集合的“真实”getBBox()，但它非常复杂。我敢肯定有更直接的方法可以解决这个问题，但我对 js 的了解还不够。另外，我的代码可能还有一些我还没有看到的问题。有任何想法吗？谢谢！

```
function newBBox(e){
    function clean(s){
        for (var i=s.length-1; i>=0; i--){
            if (isNaN(s[i].getBBox().y2)) s[i] = clean(s[i])
            else if (s[i].getBBox().y2 == -Infinity) s.exclude(s[i]);
            };
        return s;
        }
    if (!isNaN(e.getBBox().y2)) return e.getBBox();
    // if not ok, e must be a set that at some point contains an empty set. Lets find it, exclude it and return the getBBox for the new set
    return clean(e.clone()).getBBox(); // can´t use e because its a pointer to the original set and we'll be excluding things from the set
    } 
```

# android - Android：试图在根 ScrollView 中居中 RelativeLayout

> ID：14615844
> 
> 赞同：0
> 
> 时间：2013-01-30T23:30:16.550
> 
> 标签：android

我希望 ScrollView 填充整个屏幕，并且相对布局以 ScrollView 为中心，其内容居中，或者填充 ScrollView 并使其内容居中。如果应用程序在小屏幕上运行，则滚动视图就在那里。

我已经以RelativeLayout 作为根实现了效果，但是当我将scrollView 添加为包装器时，我无法将其居中，RelativeLayout 只是添加到顶部。我尝试更改 RelativeLayout 的 layout_height，但这也不起作用，只是给了我一个警告。

有趣的是它在 Eclipse 中的图形布局上看起来不错。

```
<ScrollView xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="match_parent"
tools:context=".MainActivity" >

<RelativeLayout
    android:id="@+id/RelativeLayout1"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:layout_gravity="center"
    android:fillViewport="true"
    android:gravity="center" >
.... 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-31T01:50:46.487

经过一番折腾，这终于奏效了。

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:gravity="center"
tools:context=".MainActivity" >

<ScrollView
    android:layout_width="match_parent"
    android:layout_height="wrap_content" >

    <RelativeLayout
        android:id="@+id/RelativeLayout1"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:gravity="center" > 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-30T23:50:09.377

你总是可以把它`RelativeLayout`放在一个 LinearLayout 里面，这样它就可以居中。

您遇到的问题是 没有重力属性，因此您需要在其中接受重力`ScrollView`的另一个布局。`ScrollView`

```
<ScrollView xmlns:android="http://schemas.android.com/apk/res/android"
   xmlns:tools="http://schemas.android.com/tools"
   android:layout_width="match_parent"
   android:layout_height="match_parent"
   tools:context=".MainActivity" >

  <LinearLayout
        android:id="@+id/linearLayout1"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:orientation="vertical" 
        android:layout_gravity="center"
        android:gravity="center">

     <RelativeLayout
         android:id="@+id/RelativeLayout1"
         android:layout_width="match_parent"
         android:layout_height="wrap_content"
         android:layout_gravity="center"
         android:fillViewport="true"
         android:gravity="center" >
      </RelativeLayout>
   </LinearLayout>
</ScrollView> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-30T23:40:59.540

尝试更改 the`ScrollView`和`RelativeLayout`to的高度和宽度`fill_parent`。如果这不起作用，请发布您的整个 xml 文件。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-31T01:31:17.250

将另一个`rootview`，`RelativeLayout`或者`LinearLayout,`放在现有的 RelativeLayout 中，然后将这些属性添加到新的。

```
android:layout_height="wrap_content" 
android:layout_centerVertical="true" 
```

# c - 浮动灌封的除法算法

> ID：14615845
> 
> 赞同：-1
> 
> 时间：2013-01-30T23:30:19.037
> 
> 标签：c, algorithm, division

```
//------------------------------------------------------------------------------------------//
//  divisionAlg -- This will take the incoming value and "asciify" each byte according to
//                 a character lookup table
//
//  Parameters:
//      unsigned int value -- the value to be asciified
//
//------------------------------------------------------------------------------------------//

void divisionAlg(unsigned int value);

int main(int argc, char *argv[])        // Always remember to pass an argument while executing
{
 divisionAlg(45);
}

void divisionAlg(unsigned int value)
{
    int MAX_REM=2;
    int MAX_BASE=10;
    const char *charTable = {"0123456789ABCDEF"};  // lookup table for converting remainders
    char rembuf[MAX_REM + 1];   // holds remainder(s) and provision null at the end
    int  index;                 // 
    int  i;                     // loop variable

    unsigned int rem;           // remainder
    unsigned int base;          // we'll be using base 10 
    ssize_t numWritten;         // holds number of bytes written from write() system call

    base = 10;

    // validate base
    if (base < 2 || base > MAX_BASE)
        err_sys("oops, the base is wrong");

    // For some reason, every time this method is called after the initial call, rembuf
    // is magically filled with a bunch of garbage; this just sets everything to null.
    // NOTE: memset() wasn't working either, so I have to use a stupid for-loop
    for (i=0; i<MAX_REM; i++)
        rembuf[i] = '\0';

    rembuf[MAX_REM] = 0;    // set last element to zero
    index = MAX_REM;        // start at the end of rembuf when adding in the remainders

    do
    {
        // calculate remainder and divide valueBuff by the base
        rem = value % base;
        value /= base;

        // convert remainder into ASCII value via lookup table and store in buffer
        index--;
        rembuf[index] = charTable[rem];

    } while (value != 0);

    // display value
    if ((numWritten = write(STDOUT_FILENO, rembuf, MAX_REM + 1)) == -1)
        err_sys("something went wrong with the write");

} // end of divisionAlg() 
```

我正在尝试制作除法算法，但我不知道为什么不起作用，请帮助！

这个“除法算法”被假定为获取传入的值并根据字符查找表“asciify”每个字节

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T23:51:50.507

我认为这就是为什么：

首先将整个数组（长度为 MAX_REM+1，例如 0 到 MAX_REM 是有效索引）初始化为空值 (0x00)。所以 rembuf 看起来像这样（0x00 为 ascii null）：

'0x00', '0x00', '0x00', '0x00', '0x00', '0x00', ... '0x00', '0x00', '0x00', '0x00'

现在，我们通过这样做将值插入到 rembuf 中：

```
index = MAX_REM;
index--;
rembuf[index] = charTable[rem]; 
```

所以在循环结束时，如果我们在 12 上运行你的算法，我们可能会得到这样的结果：

'0x00', '0x00', '0x00', '0x00', '0x00', '0x00', ... '0x00', '1', '2', '0x00'

现在打印你这样做：

```
if ((numWritten = write(STDOUT_FILENO, rembuf, MAX_REM + 1)) == -1) 
```

问题是你把它传递给了rembuf。当它从 rembuf 读取时，它立即看到 0x00 并决定“这个字符串是空的，我无事可做”。您实际上应该做的是向它传递一个指向您的号码开始位置的指针 - '1' 在内存中的位置。（编辑：正如评论所说，`write()`写入尽可能多的字节，并且不会在空值上停止，所以这不是原因）

编辑：当您使用它时，MAX_REM 应该大得多（对于将 2^32 作为字符串保存的情况，它需要为 10 - 对于 2^64，它需要为 20）

# python - 如何检查一个列表/字典的元素是否存在于python中的另一个列表/字典中

> ID：14615846
> 
> 赞同：2
> 
> 时间：2013-01-30T23:30:22.773
> 
> 标签：python, list, dictionary

这是一个场景，我正在检查 B 中是否存在 A 的元素。虽然这段代码有效，但当我阅读数百万行时需要花费大量时间。有效的方法是将 A 和 B 中的每个列表作为字典并查看它们是否存在于彼此中。但是我想不出一种简单的方法来进行字典查找。那是对于dict A中的每个键值对，我想检查该键值对是否存在于dictB中

```
A = [['A',[1,2,3]],['D',[3,4]],['E',[6,7]]]

B=  [['A',[1,2,3]],['E',[6,7]],['F',[8,9]]]

count = 0

for line in A:

  if len(line[1]) > 1:

     if line in B:

       count = count + 1

print count 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-30T23:36:59.780

1.  将列表转换为元组
2.  将元组列表转换为集合
3.  相交两组
4.  打印交点的长度

例子：

```
A = [['A',[1,2,3]],['D',[3,4]],['E',[6,7]]] 
B = [['A',[1,2,3]],['E',[6,7]],['F',[8,9]]]

A_set = set((a, tuple(b)) for a, b in A)
B_set = set((a, tuple(b)) for a, b in B)
print len(A_set & B_set) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-30T23:44:32.093

您总是可以尝试使用列表理解并以此为基础逐步提高：

```
a = [[1], [5], [7]]
b = [[5], [7], [0]]
r = [x for x in a if x in b] 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-30T23:37:33.750

制作`A`字典`B`：

```
dA = dict(A)
dB = dict(B) 
```

然后，只需检查键和值是否匹配：

```
count = 0
for k,v in dA.iteritems():
    if dB.get(k) == v:
        count += 1 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-30T23:33:06.733

您需要对 B 进行一些预处理，因此它的元素是不可变的。

```
def deep_tuple(x):
    if type(x) in [type(()), type([])]:
        return tuple(map(deep_tuple,x))
    return x

A = ['A',[1,2,3]],['D',[3,4]],['E',[6,7]]
B = ['A',[1,2,3]],['E',[6,7]],['F',[8,9]]]
B = set(deep_tuple(B))
count = 0
for line in A:
  if len(line[1]) > 1:
     if line in B: 
       count = count + 1
print count 
```

把 B 变成一个集合。与 O(|B|) 相比，在集合中查找是 O(1)。此操作的整体复杂性将与 O(|A|) 成正比。

# python - 显示对象表 django

> ID：14615847
> 
> 赞同：8
> 
> 时间：2013-01-30T23:30:25.843
> 
> 标签：python, django, django-models, django-templates, django-views

我需要用 Django 从我的数据库中显示一个表。显而易见的方法是手动输入表格标题并循环遍历`model.objects.all()`. 但是，由于非常懒惰，我想自动执行此操作，即通过自省从模型中加载所有字段以显示为列标题，并加载所有字段值以显示为行。这种方法还可以为我节省一些时间，因为我不必在模型更改时更新我的​​模板代码。我让它工作，但有两个问题：

1.  我找不到加载 AutoField 字段 (id) 值，所以我必须切掉 ID 列。
2.  代码看起来很乱，尤其是在使用随机模板标签的情况下。

这是我的代码。请注意，代码运行良好，因此我将跳过所有正确的导入：

> **views.py**我使用序列化程序来序列化数据，这是我在 stackoverflow 某处读到的一个技巧

```
def index(request):
   fields    = MyModel._meta.fields
   data      = serializers.serialize("python", MyModel.objects.all())
   context_instance = RequestContext(request, {    
       'data'      : data,
       'fields'    : fields,
   })
   return TemplateResponse(request, 'index.html', context_instance) 
```

> **template/index.html**：请注意，我必须通过切掉字段列表的第一个元素来切掉 ID 列

```
{% with fields|slice:"1:" as cached_fields %}
<table>
    <thead>
        <tr>
            {% for field in cached_fields %}
                <th>{% get_verbose_name field %}</th>
            {% endfor %}
        </tr>
    </thead>
    <tbody>
        {% for instance in data %}
        <tr>
            {% for field in cached_fields %}
                <td>{% get_value_from_key instance.fields field %}</td>
            {% endfor %}
        </tr>
        {% endfor %}
    </tbody>
</table>
{% endwith %} 
```

> **模板标签/extra_tags.py**

```
# tag to get field's verbose name in template 
@register.simple_tag
def get_verbose_name(object):
    return object.verbose_name

# tag to get the value of a field by name in template
@register.simple_tag
def get_value_from_key(object, key):
    # is it necessary to check isinstance(object, dict) here? 
    return object[key.name] 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-30T23:54:12.650

`serializers.serialize("json`或`xml", Model.objects.all())`格式返回 id 字段；可能不是您正在寻找的东西，但一些 jQuery 网格插件可以进一步自动化任务。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-31T01:20:20.173

耶！感谢 Видул Петров 关于将数据序列化为 json 的建议，我找到了解决方法，这也允许我加载 pk 字段。它仍然感觉太手动和hackish（和冗长），但我想我已经接近了。请帮助我进一步重构此代码。

> **views.py**将数据序列化为 JSON 对象列表并将其解析为字典列表以将其传递给模板

```
from django.utils import simplejson as json    

def index(request):
   fields    = MyModel._meta.fields
   data      = json.loads(serializers.serialize("json", MyModel.objects.all()))

   def parse_data(data):

        result = [] 

        # flatten the dictionary
        def flatten_dict(d):
            """ 
            Because the only nested dict here is the fields, let's just
            remove the 'fields' suffix so that the fields can be loaded in 
            template by name
            """
            def items():
                for key, value in d.items():
                    if isinstance(value, dict):
                        for subkey, subvalue in flatten_dict(value).items():
                            yield subkey, subvalue
                    else:
                        yield key, value

            return dict(items())

        for d in data:
            # change the 'pk' key name into its actual name in the database
            d[Employee._meta.pk.name] = d.pop('pk') 
            # append the flattend dict of each object's field-value to the result 
            result.append(flatten_dict(d))

        return result

   context_instance = RequestContext(request, {    
       'data'      : parse_data(data),
       'fields'    : fields,
   })
   return TemplateResponse(request, 'index.html', context_instance) 
```

> **template/index.html**模板现在好多了

```
<table>
    <thead>
        <tr>
            {% for field in cached_fields %}
                <th>{% get_verbose_name field %}</th>
            {% endfor %}
        </tr>
    </thead>
    <tbody>            
            {% for d in data %}
                <tr>
                    {% for field in fields %}
                        <td>{% get_value_from_key d field %}</td>
                    {% endfor %}
                </tr>
            {% endfor %}            
    </tbody>
</table> 
```

# requirejs - RequireJS：名称-值对示例（文档中的 1.2.1）用于什么？

> ID：14615849
> 
> 赞同：2
> 
> 时间：2013-01-30T23:30:44.060
> 
> 标签：requirejs

从 RequireJS 的文档（1.2.1）中，它有一个简单的名称-值对的例子，没有依赖关系。

```
//Inside file my/shirt.js:
define({
    color: "black",
    size: "unisize"
}); 
```

它没有返回语句，因此看起来任何其他模块都无法获取这些值。

我将如何使用它或访问这里的值？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-30T23:42:54.003

如果您将该模块包含在另一个模块中，您将公开它的内容：

我/衬衫.js：

```
define({
    color: "black",
    size: "unisize"
}); 
```

衬衫商店.js：

```
define(["my/shirt"], function(shirt) {
    console.log(shirt.color);
    console.log(shirt.size);
} 
```

基本上， shirt.js 的内容成为一个对象，当您将其声明为另一个模块的依赖项时，您可以访问该对象。

# c - 使用 C 的指针应用程序

> ID：14615855
> 
> 赞同：4
> 
> 时间：2013-01-30T23:31:10.127
> 
> 标签：c

目标：仅使用指针表示法，编写一个函数，将字符列表中的所有值向左（朝向开头）旋转一个元素。

```
#include <stdio.h>

void rotateLeft( char word[] );

int main (void)
{
//  Local Definitions
    char word[20] = "applications";
//  Statements
    printf( "Before rotation: %s\n", word );
    rotateLeft( word );
    printf( " After rotation: %s\n", word );
    return 0;
}

/*  =================================================================== */
/*  Rotate left
    PRE: word[]
    POST: word rotated left
*/
void rotateLeft( char word[] )
{
    char hold;
    char *pW;
    pW = word;
    hold = *pW;

    while (*pW != '\0')
    {
        printf("%c ", *pW);
        *pW = *(pW + 1);
        *pW++;
    }

    *(pW - 1) = hold;
    *pW = '\0';

    return;
} 
```

我的导师告诉我使用 *(pW + 1) 是一种非常丑陋的风格。我想知道是否有另一种方法可以在不使用我当前使用的样式的情况下解决此解决方案。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-30T23:33:54.183

`*(pW + 1)`是一样的`pW[1]`。不过，我不知道“非常丑陋”。事实上，在某些情况下，它可能是首选。实际上，您在问题的开头说过，无论如何，您应该只使用指针表示法。也许你的导师只是不喜欢这个名字`pW`？您不需要它 - 因为您不需要`word`其他任何东西，您只需将`pW`程序中的所有引用替换为`word`.

您应该注意，在您的程序中，`*pW++`与 没有任何不同`pW++`。用 clang 编译你的程序会给出这个方便的警告：

```
example.c:35:13: warning: expression result unused [-Wunused-value]
            *pW++;
            ^~~~~
1 warning generated. 
```

你也不需要这`*pW = '\0'`条线。由于您没有修改现有的空终止符，因此该语句只是用 a 覆盖`\0`a `\0`。

# facebook - App Center 提交后更改 facebook 应用程序显示名称

> ID：14615859
> 
> 赞同：2
> 
> 时间：2013-01-30T23:31:50.837
> 
> 标签：facebook, center

我向 Facebook 的应用中心提交了我的应用程序，现在我需要更新应用程序名称。当我转到应用程序设置并单击“编辑”时，显示名称显示为灰色。我猜我需要取消我的提交并重新提交，但是当我点击“取消提交”时，会出现一个加载对话框并且页面只是挂起。

# c# - 中止线程还是让它被计算机清理？

> ID：14615860
> 
> 赞同：3
> 
> 时间：2013-01-30T23:31:52.117
> 
> 标签：c#, multithreading, garbage-collection, thread-safety, netduino

我有以下代码，如果线程在 2 秒内未完成，我想中止它。您可以从第一个代码中看到我在 while 循环中创建了一个新的 myThread evertyime 并且不中止它。好吧，我不希望它是这样的，但是如果我将 myThread 置于循环之外并像第二个代码一样使用 abort() 函数。中止会有错误。

```
while (true)
        {

            try
            {
                m_socket = new Socket(AddressFamily.InterNetwork, SocketType.Stream, ProtocolType.Tcp);//reset up socket
                myThread = new System.Threading.Thread(new System.Threading.ThreadStart(socket_connect));
                myThread.Start();
                if (!myThread.Join(2000))
                {
                    throw new SocketException(SocketError.AccessDenied);
                }

            }
            catch (Exception ex)
            {
                m_socket.Close();
            }
        }
    }
     private static void socket_connect()
    {
        m_socket.Connect(remoteEndPoint);//Connect to remote device  
    } 
```

我一开始尝试了下面的代码，但是它给出了线程异常。

```
 myThread = new System.Threading.Thread(new System.Threading.ThreadStart(socket_connect));   
  while (true)
        { try
            {
                m_socket = new Socket(AddressFamily.InterNetwork, SocketType.Stream,     ProtocolType.Tcp);//reset up socket

                myThread.Start();
                if (!myThread.Join(2000))
                {

                    myThread.Abort();
                    throw new SocketException(SocketError.AccessDenied);
                }
            }
            catch (Exception ex)
            {
                m_socket.Close();
            }
        }
    }
    private static void socket_connect()
    {
        m_socket.Connect(remoteEndPoint);//Connect to remote device  
    } 
```

我知道 abort() 不是一个好主意，所以我转而让线程保留并让 C#(.Net？我不知道实际上是谁在这样做) 处理垃圾收集。任何人都可以判断这是否是一个好主意，因为该程序将在没有大量内存用于容纳线程束的板上运行。有人能告诉我垃圾收集是如何在 C# 中完成的吗？例如线程。
需要提及的另一件事是我没有 Task 类或 socket.beginconnect() 方法，我猜这是因为我正在构建一个将在小板上运行的程序，而不是 PC。该板是netduido plus，我正在netduino plus平台上构建我的项目。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T03:54:00.473

> 我有以下代码，如果线程在 2 秒内未完成，我想中止它。

阅读代码，看起来您实际上想在两秒钟内尝试将套接字连接到资源。如果超过两秒钟，你想继续。

我主要是在复制[这个答案](https://stackoverflow.com/questions/1062035/how-to-config-socket-connect-timeout-in-c-sharp/4708790#4708790)中的代码，我相信这大约是你应该做的来实现你的目标，而不是旋转一个线程并中止它：

```
Socket socket = new Socket(AddressFamily.InterNetwork,
                           SocketType.Stream,
                           ProtocolType.Tcp);

// Connect using a timeout (2 seconds)

IAsyncResult result = socket.BeginConnect( sIP, iPort, null, null );

bool success = result.AsyncWaitHandle.WaitOne( 2000, true );

if ( !success )
{
            // NOTE, MUST CLOSE THE SOCKET

            socket.Close();
            throw new ApplicationException("Failed to connect server.");
}

// Success
//... 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-31T02:29:57.793

[编辑：取消制表符/间距时大量复制粘贴失败]

哦，请使用`Task`库，处理这些情况会更容易：

（LINQPad 友好的 blob）

```
void Main()
{
    var canceller = new CancellationTokenSource();
    var task = Task.Factory.StartNew(() => DoStuff(canceller.Token), canceller.Token);        
    if(!task.Wait(2000, canceller.Token))
    {
        canceller.Cancel();
        task.Wait(2);
    }
    sw.Elapsed.Dump();
}
private Stopwatch sw;
private void DoStuff(CancellationToken token)
{
    try
    {
        sw = Stopwatch.StartNew();
        while(!token.IsCancellationRequested)
        {       
        }
    }
    // no catch - rethrown exceptions must be checked on Task
    finally
    {
        sw.Stop();
    }
} 
```

或者，您可以使用一些“退出标志”条件 - 您的线程启动器和线程运行器都可以看到/更改的布尔值，并在您的`while`条件下使用它。

# c - 错误 LNK2001：使用 Visual C++ 的 Pro*C 代码的未解析引用

> ID：14615861
> 
> 赞同：0
> 
> 时间：2013-01-30T23:31:52.680
> 
> 标签：c, windows, visual-studio, oracle

尝试使用 Pro*C 预处理的 C 文件构建 DLL 文件时出现错误，我用来构建我的 dll 的命令是：

```
link /NOLOGO /DLL /SUBSYSTEM:WINDOWS /NODEFAULTLIB:libc.lib /IMPLIB:orasql11.lib /IMPLIB:orasqx11.lib /OUT:qvc.dll\
    /IMPLIB:oraxa11.lib /IMPLIB:oci.lib \
    /LIBPATH:"$(ORACLE_HOME)\precomp\lib\msvc" /LIBPATH:"$(ORACLE_HOME)\precomp\lib" @files.lnk 
```

错误是：

```
error LNK2019: unresolved external symbol _sqlcxt 
```

我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T23:46:14.910

选项是为正在创建的`/IMPLIB`导入库指定名称 - 而您希望链接器使用 ProC 库作为输入：

```
link /NOLOGO /DLL /SUBSYSTEM:WINDOWS /NODEFAULTLIB:libc.lib orasql11.lib orasqx11.lib /OUT:qvc.dll\
    oraxa11.lib oci.lib \
    /LIBPATH:"$(ORACLE_HOME)\precomp\lib\msvc" /LIBPATH:"$(ORACLE_HOME)\precomp\lib" @files.lnk 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-03-03T15:22:04.823

我在尝试使用与以前相同的 Visual C++ 2005 项目但使用 oracle12c 而不是 oracle 11 链接 oracle 数据库应用程序时收到相同的消息。

似乎 orasql12.lib 是使用添加下划线作为前缀的代码生成的，但 Visual Studio 需要一个**没有前导下划线**的导入库。

所以我通过重新生成 orasql12.lib 来解决这个问题。为此，您必须在 Visual Studio 工具命令行控制台中使用 DUMPBIN 和 LIB 命令。在安装 oraclesql12.dll 的目录中打开 VC++ 命令行控制台，然后键入： `DUMPBIN /EXPORTS orasql12.dll > orasql12.def`

这将生成一个 def 文件，您必须对其进行编辑才能删除除名称列符号之外的所有内容并添加两个标题行，您的 orasql12.def 文件的第一行将如下所示：

```
LIBRARY orasql12
     EXPORTS
 DSNTIAR
 ORASQL8
... 
```

然后在 VC++ 工具控制台中使用 LIB 命令并键入：

`LIB /DEF:orasql12.def /MACHINE:X86 /LIBPATH:D:\users\Appl\oracle\client_12c\bin`

（LIBPATH 设置为 orasql12.dll 安装目录，如果需要更改 X86） 新的 orasql12.lib 已生成，没有前导下划线。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-11-24T00:39:01.587

**错误 LNK2019：未解析的外部符号 _sqlcxt 上 **Visual Studio VC++** 错误已解决**

如果您使用的是 Oracle 客户端，您可能会因为库损坏（可能是）而出现此错误。例如**orasqx12.lib 和 orasqx12.lib**。这些库可能存在一些错误。如果您已经下载了 Oracle Client 12.2.0.1 或者可能使用的是早期版本，那么您会没事的。但是，如果您正在下载 64 位版本的 Oracle 数据库或 Oracle 客户端

1.  **您必须在项目解决方案的配置管理器中将**您的 Visual Studio 平台更改为 **64 位而不是 32 位。******

     **2.  如果您是初学者并正在尝试学习如何将**Pro* C 与您的 Visual Studio 结合**使用，您可能需要下载[Oracle 数据库 11g 第 2](http://www.oracle.com/technetwork/database/database-technologies/express-edition/downloads/index.html)版快捷版。因为该库文件（orasql11.lib）可以正常工作而不会给您**此错误**_sqlcxt**。**** 

 **我会说这个错误是由库引起的，它正在寻找该库中定义的函数并且找不到它，可能是因为它已损坏。我不知道。因为有很多人有这个问题，所以我决定发布这个。此外，这仅适用于尝试使用 Visual Studio 学习 Pro* C 的初学者。不适合专家。您也可能不会在使用 Oracle 数据库的标准 Edison 时遇到此错误。.**

# java - WSDL2JAVA 和 Heroku

> ID：14615863
> 
> 赞同：0
> 
> 时间：2013-01-30T23:31:57.380
> 
> 标签：java, maven, heroku

我正在尝试在 Heroku 环境中访问外部 API。我基本上已经设置了所有正确的依赖项，但现在它抛出了以下错误：

> java.lang.ClassNotFoundException：无法加载名为 schemaorg_apache_xmlbeans.system.sEACC53AB4DE4AB80D192E3C9B6CE210A.TypeSystemHolder 的类

我知道我的资源目录中有生成的 XSB 文件和 TypeSystemHolder.class 文件。

谁能指出我如何引用这些的正确方向，因为我不知道如何使用 Maven 做到这一点。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T07:01:13.483

确保生成类的“资源”目录是源目录。

# c# - 如何使用 EWL 中的 ExportLogic 命令部署应用程序？

> ID：14615868
> 
> 赞同：1
> 
> 时间：2013-01-30T23:32:09.323
> 
> 标签：c#, deployment, enterprise-web-library

在包管理器控制台中运行 ExportLogic 后要采取的具体步骤是什么？这对更新服务器上的数据库有什么作用吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T02:03:22.247

要使用 部署 EWL 系统`ExportLogic`，第一步是对您的解决方案进行**发布**构建。

完成后，运行`ExportLogic`，这会在您的解决方案文件夹中创建一个`Logic Packages`文件夹。`Logic Packages`将包含：

*   `Server Side Logic`文件夹 - 包含您需要放在服务器上以使系统正确运行的文件，减去特定于安装的配置文件
*   `Client Side Application`文件夹（如果您的系统包含客户端应用程序）- 包含正确运行系统客户端应用程序所需的文件，减去特定于安装的配置文件

将 的内容复制到您的服务器，然后在该文件夹中`Server Side Logic`创建一个文件夹并将您的安装特定配置文件放入其中。`Installation``Configuration`

如果您的系统有一个数据库，请执行`Configuration\Database Updates.sql`尚未针对您的实时数据库执行的部分。

最后，对于复制到服务器的每个 Web 应用程序文件夹，创建一个 IIS 网站或指向它的虚拟目录。

如果您对自动化部分/所有这些步骤感兴趣，EWL 中的 API 可能会有所帮助。

# java - 配置现有的 eclipse java 项目以使用 gradle 构建

> ID：14615872
> 
> 赞同：32
> 
> 时间：2013-01-30T23:32:32.870
> 
> 标签：java, eclipse, gradle

我在 Eclipse 中有一个现有的 Java 项目。我想使用 gradle 实现构建。[我尝试使用此处](http://gradle.org/docs/current/userguide/eclipse_plugin.html)给出的 gradle eclipse 插件， 但在 Eclipse 中遇到了许多错误。

我正在使用 gradle 1.3，并尝试从命令提示符运行 gradle，但出现编译错误。

所以我的问题是，有没有人知道一些很好的资源，它提供了如何将 Eclipse 中的现有 java 项目转换为使用 gradle 编译的方法。我对其他项目也有一些依赖。我给出的教程的链接并没有真正的帮助。

更新：如果我的项目不依赖其他项目，我可以让 gradle 工作。但是，如果它确实引用了其他项目，我不知道如何引用另一个项目？我已将引用的项目目录添加到存储库，但我仍然收到“类不存在”错误。我的gradle文件如下：

```
apply plugin: 'java'
apply plugin: 'eclipse'

version='1.0-SNAPSHOT'

def repositoryPath = 'C:/Users/AMoody/workspace/temp/temp-protocols/'

repositories{
    mavenCentral()
    flatDir {
        dirs repositoryPath
    }
}

dependencies{

    compile 'org.slf4j:slf4j-api:1.+'
    compile 'junit:junit:4.+'
     testCompile 'junit:junit:4.+'

} 
```

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2015-12-01T07:23:36.443

好的，所以如果你有一个简单的 java 项目，它的目录/文件结构如下

[![在此处输入图像描述](../Images/c41e4246201aa6eb1d3be1d739791419.png)](https://i.stack.imgur.com/I9JmE.jpg)

**Step-1：**在项目根目录下创建文件名`build.gradle`如下

[![在此处输入图像描述](../Images/76260c7cbf008d97fc6f378cc36d06ab.png)](https://i.stack.imgur.com/N1cco.jpg)

**第2步：**添加以下gradle脚本`build.gradle`

```
apply plugin: 'java'
apply plugin: 'eclipse'
archivesBaseName = 'someJar'
version = '1.0-SNAPSHOT' 

repositories {
    mavenCentral()
}

jar {
    manifest {
        attributes 'Main-Class': 'com.test.Run'
    }
}

dependencies {
   compile  'log4j:log4j:1.2.16'
} 
```

**步骤3：**关闭或从eclipse中删除这个项目并再次导入它，同时选择Gradle项目，如下所示

## [![在此处输入图像描述](../Images/b9dd0d7e76863617297e7b924180c09d.png)](https://i.stack.imgur.com/7PbnR.jpg)

## [![在此处输入图像描述](../Images/b6fc607ef78e09ab68bba98997c28b76.png)](https://i.stack.imgur.com/CdI84.jpg)

现在您的项目层次结构将如下所示。（还要注意它在导入项目时添加的 Gradle 依赖项）

[![在此处输入图像描述](../Images/0aa03b615223bc16d00c514fb7a8984c.png)](https://i.stack.imgur.com/2vVOa.jpg)

**第 4 步：**在项目中创建`src/main/java`源文件夹并将所有包移动到该源文件夹中。

[![在此处输入图像描述](../Images/d853da1d9c199be3927f2eee64ec6694.png)](https://i.stack.imgur.com/CQd5K.jpg)

**最后但并非最不重要的第 5 步：** *干杯 :)*

所以现在您的 Simple Java 项目已转换为 Gradle 项目！

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-31T00:14:59.940

[Gradle 用户指南](http://gradle.org/docs/current/userguide/userguide_single.html)的前几章，以及完整[Gradle 发行版](http://www.gradle.org/downloads)中的许多 (Java) 示例，应该可以帮助您入门。无论您当前的构建是 Eclipse 还是其他东西，都无关紧要。要在 Gradle 上取得成功，您首先必须掌握它的基础知识。

一旦您的 Gradle 命令行构建工作正常，您就可以再试一次 IDE 集成。根据您的偏好，您可以使用 Gradle 的[Eclipse 插件](http://gradle.org/docs/current/userguide/userguide_single.html#eclipse_plugin)生成 IDE 文件（再次参见完整 Gradle 发行版中的示例），或者使用[Eclipse Gradle Integration](https://github.com/SpringSource/eclipse-integration-gradle)获得更集成的 IDE 体验。

查看[Gradle 主页](http://www.gradle.org/learn)以获取更多资源。当遇到有关 Gradle 构建语言的具体问题时，请参阅[Gradle DSL 参考](http://gradle.org/docs/current/dsl/index.html)。[对单页Gradle 用户指南](http://gradle.org/docs/current/userguide/userguide_single.html)进行全文搜索也非常有效。最后但同样重要的是，请务必访问[Gradle 论坛](http://forums.gradle.org)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-12-14T12:55:06.597

尝试为 Gradle 集成 Eclipse：[http ://marketplace.eclipse.org/content/buildship-gradle-integration](http://marketplace.eclipse.org/content/buildship-gradle-integration)

# typescript - 如何使用可选参数覆盖/隐藏方法？

> ID：14615873
> 
> 赞同：2
> 
> 时间：2013-01-30T23:32:33.113
> 
> 标签：typescript

请看下面的评论：

```
class MyClassA {
    constructor(optionalParam?: any) {
    }

    initialize(optionalParam?: any) {
    }   
}

class MyClassB extends MyClassA {
    constructor(requiredParam: any) {
        super(requiredParam);
        // OK.
    }

    // I want to override this method and make the param required
    // I can add the private modifier but I want it to
    // be public and hide the method with optionalParam
    initialize(requiredParam: any) {
        // compiler error!
    }
} 
```

我怎样才能做到这一点？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T23:53:16.223

编译器正在阻止您违反继承合同 - 建议`MyClassB`不能用作`MyClassA`.

考虑：

```
var x = new MyClassB(); // Create a new MyClassB
var y: MyClassA = x;    // OK
y.initialize();         // OK... but MyClassB isn't going to get a value for requiredParam 
```

您可以重构，使其`MyClassB`不派生自`MyClassA`，或任何数量的其他选项。

# java - 分两步对字符串进行编码（先到 ISO-8859-1，然后再到 UTF-8）

> ID：14615874
> 
> 赞同：0
> 
> 时间：2013-01-30T23:32:35.430
> 
> 标签：java, encoding, utf-8, iso-8859-1

我想我认为这更像是我正在寻找的问题。我希望至少

我在 Java 中声明了这个字符串

```
input = "||3.2|2013-01-25T17:24:00|ingreso|PAGO EN UNA SOLA EXHIBICION|6386.21|MXN|7408.00|No identificado|NAUCALPAN DE JUÁREZ, ESTADO DE MEXICO|CAOS640116HT5|OSCAR MARTIN CARRERA|CTO. ORADORES 33|33|CD. SATELITE|NAUCALPAN DE JUÁREZ|ESTADO DE MEXICO|MÉXICO|53100|CTO. ORADORES 33|33|CD. SATELITE|NAUCALPAN DE JUÁREZ|ESTADO DE MEXICO|MÉXICO|53100|Persona Física con Actividad Empresarial|BAÑ930616R66|BAÑOMOBIL, S.A. DE C.V.|Av. 1° de Mayo|197|San. Lorenzo|TLALNEPANTLA DE BAZ|ESTADO DE MEXICO|MÉXICO|54047|1|NO APLICA|Dominio .com|Dominio por 1 año www.sanitariosportatiles.com|586.21|586.21|1|NO APLICA|Hospedaje 2 Gb|Hospedaje 2 Gb por 1 año www.sanitariosportatiles.com|5800.00|5800.00|IVA|16.00|1021.79|1021.79||"; 
```

是否可以将其转换为 ISO-8859-1，然后再转换为 UTF-8？先把它转成ISO-8859-1没意义吗？

基本上，我只需要在 utf8 字节中拥有该字符串，我不知道是否因为某些字符来自 ISO-8859-1 我必须先将其转换为该字符串，然后再转换为 UTF-8 或什么是正确的实现它的过程。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-30T23:36:28.230

不，你不需要两个步骤。

您可以简单地使用：

```
byte[] utf8bytes = input.getBytes("UTF-8"); 
```

# html - 当我将粘贴复制到另一个文档中时，HTML 不起作用

> ID：14615875
> 
> 赞同：0
> 
> 时间：2013-01-30T23:32:35.513
> 
> 标签：html, vb.net

我用记事本写了一些 HTML，当我用 IE 打开它时它工作正常并在页面上加载谷歌地图。然后我将该文本转换为 vb.net 流编写器。当它创建 html 文档时，它不会加载谷歌地图。但是，如果我复制应用程序创建的 html 并将其粘贴到我用记事本制作的 html 文档中，它可以正常工作。

这是怎么回事？

我用

```
Using writer As StreamWriter = New StreamWriter("C:\CarPosition" & Loc & ".htm", True) 
```

编写大部分 HTML

我在应用程序中有一个循环来编写一个数组，我使用以下行来做到这一点：

```
 My.Computer.FileSystem.WriteAllText("C:\CarPosition" & Loc & ".htm", vbNewLine & "['Car:" & CarNumber & "'," & " -" & LatsDecimal & "," & " " & LongsDecimal & ", " & Count & "],", True) 
```

我想知道vb.net是否在文本文档或记事本中写入了一些隐藏字符？因为如果我分析两个 html 文档，它们是相同的，一个在 IE 中正确加载，一个没有。

谢谢，

麦克风

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T00:27:51.463

提示：

*   在两个文件之间进行二进制差异以找出差异。[你可以在网上做](http://www.diffnow.com/?url1=http://www.diffnow.com/demo/1.bin&url2=http://www.diffnow.com/demo/2.bin)
*   首先检查 BinaryReader 以读取文件[https://stackoverflow.com/a/10353961/390330](https://stackoverflow.com/a/10353961/390330)

# mysql - MySQL JOIN 多个表，每个结果都有 LIMIT Last Table By DateTime

> ID：14615876
> 
> 赞同：1
> 
> 时间：2013-01-30T23:32:37.063
> 
> 标签：mysql, join, limit, greatest-n-per-group

我有一个有趣的。我要加入 3 张桌子。我加入的最后一张表，我只想按日期查看最新条目，而不是用同一个用户将我的结果加倍，只是有不同的登录时间。

示例（这只是一个示例表）：

```
 SELECT a.user_id
       a.user_name,
       b.department,
       c.last_logon_date_time,
       c.computer_name
 FROM table1 a
 LEFT OUTER JOIN table2 b ON a.user_id = b.user_id
 LEFT OUTER JOIN table3 c ON c.user_id = c.user_id 
```

下面会给我我正在寻找的结果，但看起来效率很低，而且速度很慢。有什么方法可以加快速度并提高效率吗？

我可以这样做

```
 SELECT a.user_id
       a.user_name,
       b.department,
       (SELECT c.last_logon_datetime FROM table 3 c WHERE a.user_id = c.user_id ORDER BY c.last_logon_datetime DESC LIMIT 1) as last_logon_datetime,
       (SELECT c.computer_name FROM table 3 c WHERE a.user_id = c.user_id ORDER BY c.last_logon_datetime DESC LIMIT 1) as  computer_name
 FROM table1 a
 LEFT OUTER JOIN table2 b ON a.user_id = b.user_id 
```

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T23:40:23.643

您可以加入从这样的子选择创建的“表”：

```
SELECT t1.user_id, t1.user_name, t2.department, t3.computer_name, t3.logon_date
FROM table1 AS t1
LEFT OUTER JOIN table2 AS t2 ON t1.user_id = t2.user_id
LEFT OUTER JOIN
(SELECT user_id, computer_name, MAX(last_logon_date) AS `logon_date` FROM table 3 GROUP BY computer_name) AS t3 ON t1.user_id = t3.user_id 
```

# r - 从时间戳按天汇总数据帧

> ID：14615882
> 
> 赞同：1
> 
> 时间：2013-01-30T23:33:24.947
> 
> 标签：r, timestamp, dataframe, plyr

我有一个数据集`data`，其中包含一个时间戳和一组其他变量，每个时间戳都有值。我正在尝试使用`ddply`inside`plyr`创建一个新的数据框，该数据框是分组日变量的摘要（例如平均值）。

如何让 ddply 按天分组？或者我怎样才能从时间戳中的日期 (%d) 创建一个组或分组变量？

结果数据框将包含`data`.

```
library(plyr)
data <- read.csv("data.csv", header=T)
data$TIMESTAMP <- strptime(data$TIMESTAMP, "%m/%d/%Y %H:%M")
ddply(data,.(DAY),summarise, V1 = mean(P), V2 = max(WS)) # I know that day is wrong here

# dput of data 
data <- structure(list(TIMESTAMP = structure(list(sec = c(0, 0, 0, 0, 
0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0), min = c(0L, 0L, 0L, 0L, 0L, 
0L, 0L, 0L, 0L, 0L, 0L, 0L, 0L, 0L, 0L), hour = c(11L, 12L, 13L, 
14L, 15L, 11L, 12L, 13L, 14L, 15L, 11L, 12L, 13L, 14L, 15L), 
    mday = c(1L, 1L, 1L, 1L, 1L, 2L, 2L, 2L, 2L, 2L, 7L, 7L, 
    7L, 7L, 7L), mon = c(0L, 0L, 0L, 0L, 0L, 0L, 0L, 0L, 0L, 
    0L, 3L, 3L, 3L, 3L, 3L), year = c(112L, 112L, 112L, 112L, 
    112L, 112L, 112L, 112L, 112L, 112L, 112L, 112L, 112L, 112L, 
    112L), wday = c(0L, 0L, 0L, 0L, 0L, 1L, 1L, 1L, 1L, 1L, 6L, 
    6L, 6L, 6L, 6L), yday = c(0L, 0L, 0L, 0L, 0L, 1L, 1L, 1L, 
    1L, 1L, 97L, 97L, 97L, 97L, 97L), isdst = c(0L, 0L, 0L, 0L, 
    0L, 0L, 0L, 0L, 0L, 0L, 1L, 1L, 1L, 1L, 1L)), .Names = c("sec", 
"min", "hour", "mday", "mon", "year", "wday", "yday", "isdst"
), class = c("POSIXlt", "POSIXt")), P = c(992.4, 992.4, 992.4, 
992.4, 992.4, 992.4, 992.4, 992.4, 992.4, 992.4, 239, 239, 239, 
239, 239), WS = c(4.023, 3.576, 4.023, 6.259, 4.47, 3.576, 3.576, 
2.682, 4.023, 3.576, 2.682, 3.129, 2.682, 2.235, 2.682), WD = c(212L, 
200L, 215L, 213L, 204L, 304L, 276L, 273L, 307L, 270L, 54L, 24L, 
304L, 320L, 321L), AT = c(16.11, 18.89, 20, 20, 19.44, 10.56, 
11.11, 11.67, 12.22, 11.11, 17.22, 18.33, 19.44, 20.56, 21.11
), FT = c(17.22, 22.22, 22.78, 22.78, 20, 11.11, 15.56, 17.22, 
17.78, 15.56, 24.44, 25.56, 29.44, 30.56, 29.44), H = c(50L, 
38L, 38L, 39L, 48L, 24L, 19L, 18L, 16L, 18L, 23L, 20L, 18L, 17L, 
15L), B = c(1029L, 1027L, 1026L, 1024L, 1023L, 1026L, 1025L, 
1024L, 1023L, 1023L, 1034L, 1033L, 1032L, 1031L, 1030L), FM = c(14.9, 
14.4, 14, 13.7, 13.6, 13.1, 12.8, 12.3, 12, 11.7, 12.8, 12, 11.4, 
10.9, 10.4), GD = c(204L, 220L, 227L, 222L, 216L, 338L, 311L, 
326L, 310L, 273L, 62L, 13L, 312L, 272L, 281L), MG = c(8.047, 
9.835, 10.28, 13.41, 11.18, 9.388, 8.941, 8.494, 9.835, 10.73, 
6.706, 7.153, 8.047, 8.047, 7.6), SR = c(522L, 603L, 604L, 526L, 
248L, 569L, 653L, 671L, 616L, 487L, 972L, 1053L, 1061L, 1002L, 
865L), WS2 = c(2.235, 3.576, 4.47, 4.47, 5.364, 4.023, 2.682, 
3.576, 3.576, 4.023, 3.129, 3.129, 3.576, 2.682, 3.129), WD2 = c(200L, 
201L, 206L, 210L, 211L, 319L, 315L, 311L, 302L, 290L, 49L, 39L, 
15L, 348L, 329L)), .Names = c("TIMESTAMP", "P", "WS", "WD", "AT", 
"FT", "H", "B", "FM", "GD", "MG", "SR", "WS2", "WD2"), row.names = c(NA, 
-15L), class = "data.frame") 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-30T23:54:58.533

您可以使用`format`提取日期

```
 dat$DAY <- as.factor(format(dat$TIMESTAMP,'%d'))

 [1] 01 01 01 01 01 02 02 02 02 02 07 07 07 07 07
Levels: 01 02 07 
```

由于某些原因，如果我不删除第一列，我会出错（正如我在写这篇文章时的评论中所说）

```
ddply(data[,-1],.(DAY),summarise, V1 = mean(P), V2 = max(WS))
  DAY    V1    V2
1  01 992.4 6.259
2  02 992.4 4.023
3  07 239.0 3.129 
```

将 TIMESTAMP 转换为`POSIXct`似乎可以解决问题

```
 dat$TIMESTAMP <- as.POSIXct(dat$TIMESTAMP)

ddply(dat,.(DAY),summarise, V1 = mean(P), V2 = max(WS))
  DAY    V1    V2
1  01 992.4 6.259
2  02 992.4 4.023
3  07 239.0 3.129 
```

**编辑无需使用格式**

由于您的 TIMESTAMP 列是一个`POSIXlt`，因此很容易从中检索一天部分，您可以这样做：

```
dat$TIMESTAMP$mday
 [1] 1 1 1 1 1 2 2 2 2 2 7 7 7 7 7 
```

# javascript - 通过引用交换对象中的数组元素

> ID：14615883
> 
> 赞同：0
> 
> 时间：2013-01-30T23:33:28.377
> 
> 标签：javascript

我刚刚发现 JavaScript 属性总是通过引用返回。我需要他们的价值观。

我有一个以数组作为其属性之一的对象。我需要在该数组中交换两个值。

下面的代码被大大简化了，实际的数组包含对象，而不仅仅是字符串。我当前的解决方法涉及获取数组的两个索引。但我感觉到我在这里做错了什么。

有什么建议吗？下面的代码不是我的解决方法，而是我试图做出更好的事情。但数组内没有任何变化。

```
var obj = {
    arr: ['a', 'b', 'c', 'd']
};

console.log(obj);

var source = obj.arr[0];
var destination = obj.arr[1];

obj.arr[0] = destination;
obj.arr[1] = source;

console.log(obj); 
```

奇怪的是；第一次输出是偶数 b, a, c, d。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-30T23:35:05.200

您需要更新数组本身：

```
var source = obj.arr[0];
var destination = obj.arr[1];

obj.arr[0] = destination;
obj.arr[1] = source; 
```

# magento - Magento - 如何判断页面命中是否来自缓存

> ID：14615884
> 
> 赞同：1
> 
> 时间：2013-01-30T23:33:45.153
> 
> 标签：magento

Magento 的全页缓存让我们非常头疼，我正在寻找一种方法来判断一个页面是从 FPC 中提取出来的，还是该页面是从头开始生成的。

任何想法都非常感谢！

杰夫

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T00:08:07.173

也许查看此文件有助于`Enterprise_PageCache_Model_Observer`方法`processPreDispatch`

处理器应该是`Enterprise_PageCache_Model_Processor`

`Mage::dispatchEvent('pagecache_processor_metadata_before_save', array('processor' => $this));`处理器类上的此事件可能会对您有所帮助。

# java - 最终使用滚动条的 JPanel 列表

> ID：14615888
> 
> 赞同：5
> 
> 时间：2013-01-30T23:34:01.620
> 
> 标签：java, swing, scrollbar

我正在尝试为我的 Java 应用程序构建一个 GUI。我动态添加了 JPanel，它是我的 GUI 中的“行”。在面板列表下有一个添加新面板的按钮。随着 List 的增长，它会到达父 Container 的末尾。然后我想使用滚动条，以便用户能够访问列表中的每个面板。

到目前为止，我尝试了 JScrollPanes 和 Layouts，但我不知道如何让它工作。

你能给我一些建议吗？

```
this.setLayout(new BorderLayout());
JPanel listContainer = new JPanel();
listContainer.setLayout(BoxLayout(listContainer, BoxLayout.Y_AXIS);

this.add(new JScrollPane(listContainer), BorderLayout.CENTER);
this.add(new JButton(), BorderLayout.PAGE_END);

//then i add panels to the listContainer. this wont work, when the space is complettly used there is no scrollbar. 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-30T23:51:16.793

很难从您的代码片段中准确断言您可能遇到问题的位置。

![在此处输入图像描述](../Images/2309d2fab03ab7a15da8a4310d8d3759.png)

```
public class DynamicPanelList {

    public static void main(String[] args) {
        new DynamicPanelList();
    }

    public DynamicPanelList() {
        EventQueue.invokeLater(new Runnable() {
            @Override
            public void run() {
                try {
                    UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
                } catch (Exception ex) {
                }

                JFrame frame = new JFrame("Test");
                frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                frame.add(new TestPane());
                frame.pack();
                frame.setLocationRelativeTo(null);
                frame.setVisible(true);
            }
        });
    }

    public class TestPane extends JPanel {

        private JPanel mainList;

        public TestPane() {
            setLayout(new BorderLayout());

            mainList = new JPanel(new GridBagLayout());
            GridBagConstraints gbc = new GridBagConstraints();
            gbc.gridwidth = GridBagConstraints.REMAINDER;
            gbc.weightx = 1;
            gbc.weighty = 1;
            mainList.add(new JPanel(), gbc);

            add(new JScrollPane(mainList));

            JButton add = new JButton("Add");
            add.addActionListener(new ActionListener() {
                @Override
                public void actionPerformed(ActionEvent e) {
                    JPanel panel = new JPanel();
                    panel.add(new JLabel("Hello"));
                    panel.setBorder(new MatteBorder(0, 0, 1, 0, Color.GRAY));
                    GridBagConstraints gbc = new GridBagConstraints();
                    gbc.gridwidth = GridBagConstraints.REMAINDER;
                    gbc.weightx = 1;
                    gbc.fill = GridBagConstraints.HORIZONTAL;
                    mainList.add(panel, gbc, 0);

                    validate();
                    repaint();
                }
            });

            add(add, BorderLayout.SOUTH);

        }

        @Override
        public Dimension getPreferredSize() {
            return new Dimension(200, 200);
        }
    }
} 
```

您确实需要提供[SSCCE](http://sscce.org/)，以便我们诊断您遇到的问题。

就个人而言，这取决于您的要求，更好的布局管理器可能`VerticalLayout`来自 SwingLabs SwingX 库。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-30T23:51:05.547

您可能忘记调用`revalidate()`您的`listContainer`（并且您犯了一堆语法错误）。`BoxLayout`在我看来并没有做得很好，但这不是问题所在。

这是一个看起来运行良好的小演示代码：

```
import java.awt.BorderLayout;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;

import javax.swing.BoxLayout;
import javax.swing.JButton;
import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.JPanel;
import javax.swing.JScrollPane;
import javax.swing.SwingUtilities;
import javax.swing.UIManager;
import javax.swing.UnsupportedLookAndFeelException;

public class TestScollpane {
    private int i;
    private JPanel listContainer;

    private void initUI() {
        final JFrame frame = new JFrame(TestScollpane.class.getSimpleName());
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        listContainer = new JPanel();
        listContainer.setLayout(new BoxLayout(listContainer, BoxLayout.Y_AXIS));

        frame.add(new JScrollPane(listContainer), BorderLayout.CENTER);
        JButton button = new JButton("Add");
        button.addActionListener(new ActionListener() {

            @Override
            public void actionPerformed(ActionEvent e) {
                final JPanel newPanel = new JPanel();
                newPanel.add(new JLabel("Label " + i++));
                listContainer.add(newPanel);
                listContainer.revalidate();
                // Scroll down to last added panel
                SwingUtilities.invokeLater(new Runnable() {
                    @Override
                    public void run() {
                        newPanel.scrollRectToVisible(newPanel.getBounds());
                    }
                });
            }
        });
        frame.add(button, BorderLayout.PAGE_END);

        frame.setSize(300, 200);
        frame.setVisible(true);
    }

    public static void main(String[] args) {
        try {
            UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
        } catch (ClassNotFoundException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (InstantiationException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (IllegalAccessException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (UnsupportedLookAndFeelException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
        SwingUtilities.invokeLater(new Runnable() {

            @Override
            public void run() {
                new TestScollpane().initUI();
            }
        });
    }
} 
```

# php - htaccess 不好，一些带和不带扩展名的网址

> ID：14615891
> 
> 赞同：0
> 
> 时间：2013-01-30T23:34:18.063
> 
> 标签：php, .htaccess, rewrite

我在我的 htaccess 中需要的是以下内容：

*   一些没有 .php 的 url（一些）（当前 htaccess 中缺少）
*   如果没有，网站总是重定向到 www
*   如果没有目录，则删除斜杠（现在可以使用）

我整天都在尝试，但我认为它的顺序不正确......这就是我所拥有的：

```
 RewriteEngine On
    RewriteBase /
    RewriteCond %{REQUEST_FILENAME} !-f
    RewriteCond %{REQUEST_FILENAME} !-d
    RewriteRule ^([^\.]*)(\.php)?(\?*)$ index.php/$1$3 [L,QSA]

    RewriteCond %{REQUEST_FILENAME} !-d
    RewriteRule ^(.*)/$ /$1 [L,R=301]

    RewriteCond %{THE_REQUEST} ^[A-Z]{3,}\ /(.*)index\.php/?([^\?\ ]*)
    RewriteRule ^ /%1%2 [L,R=301] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T23:38:19.290

使用 .htaccess 将非 www 重定向到 www

```
RewriteEngine On
RewriteCond %{HTTP_HOST} !^www\.
RewriteRule ^(.*)$ http://www.%{HTTP_HOST}/$1 [R=301,L 
```

删除 .php 扩展名

```
RewriteEngine On
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME}.php -f
RewriteRule ^(.*)$ $1.php [NC,L] 
```

# magento - 从 adminhtml 获取 magento 交易电子邮件模板

> ID：14615897
> 
> 赞同：0
> 
> 时间：2013-01-30T23:34:53.373
> 
> 标签：magento, configuration, adminhtml, transactional-email

我试图在我的模块控制器中发送交易电子邮件并在 magentos 后端进行配置。

这是我的尝试：

在我的 config.xml

```
 under config/global

    <template>
        <email>
            <customer_lowerprice_mail_toshop_template
                translate="label" module="telllowerpricelink">

                <label>The mail from the TellLowerPriceForm to the shop</label>
                <file>tellLowerPriceLink/toShopMail.html</file>
                <type>html</type>
            </customer_lowerprice_mail_toshop_template>
        </email>
    </template> 
```

在我的 system.xml

```
<?xml version="1.0" encoding="UTF-8"?>
    <config>
    <sections>
    <customer translate="label" module="telllowerpricelink">
                <groups>
                    <lowerprice_mail translate="label">
                        <label>Emails to tell a lower price</label>
                            <frontend_type>text</frontend_type>
                                <sort_order>5</sort_order>
                                <show_in_default>1</show_in_default>
                                <show_in_website>0</show_in_website>
                                <show_in_store>0</show_in_store>
                                <fields>
                                    <toshop_template translate="label">
                                        <label>Template for the lower price mail which will be sent to the shop</label>
                                        <frontend_type>select</frontend_type>
                                        <source_model>adminhtml/system_config_source_email_template</source_model>
                                        <sort_order>3</sort_order>
                                        <show_in_default>1</show_in_default>
                                        <show_in_website>1</show_in_website>
                                        <show_in_store>1</show_in_store>
                                    </toshop_template>
                                </fields>
                            </lowerprice_mail>
                        </groups>
                    </customer>
                </sections>
            </config> 
```

在我的 install-0.1.0.php

```
$configValuesMap = array(
        'customer/lowerprice_mail/toshop_template' =>
        'customer_lowerprice_mail_toshop_template',
);

foreach ($configValuesMap as $configPath=>$configValue) {
    $installer->setConfigData($configPath, $configValue);
} 
```

最后是我的控制器：

```
 $this->toShopTemplateId = Mage::getStoreConfig('customer/lowerprice_mail/toshop_template');
    var_dump($this->toShopTemplateId);
// output: customer_lowerprice_mail_toshop_template

    $this->toShopSubject = 'my test subject';

        /* Will be set with the submitted mailaddress of the user */
    $this->toShopSender = 'test@me.com';
    $this->toShopRecipients = 'test2@me.com';
    $toShopMailVars = Array(
    );

    /* instantiating the mailtemplatemodel and sending it */
    $toShopMail = Mage::getModel('core/email_template')
            ->setTemplateSubject($this->toShopSubject);
    var_dump($toShopMail->getId());
    //output: NULL 
```

那么为什么我没有在我的配置字段的 magento 后端获得带有 ID 的事务性邮件模板呢？对不起，当它很明显

非常感谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-30T23:46:28.317

你应该使用 sendTransactional 方法。像：

```
$mail = Mage::getModel('core/email_template');
$mail->setDesignConfig(array('area' => 'frontend', 'store' => Mage::app()->getStore()->getId()))
     ->sendTransactional(
                        Mage::getStoreConfig('customer/lowerprice_mail/toshop_template'),
                        $sender,
                        $email,
                        null,
                        array(
//params array
                )); 
```

# excel - 编辑 Excel 宏 VBA 以使其填充 C 列和右侧，而不是 A 列

> ID：14615902
> 
> 赞同：1
> 
> 时间：2013-01-30T23:35:05.390
> 
> 标签：excel, vba, edit

我目前正在使用下面的宏进行 excel 将数据从一张表移动到另一张表。只要行是空的，它就设置为从第 2 行向下填充。我不想让它已经包含第 2 列和第 3 列中的数据。我已经尝试了很多东西，但运气不佳。我对此并不陌生，并且“修复”了别人的宏。

```
Sub MergeSheets()

Sheets("New").Activate
LastRowNew = Application.WorksheetFunction.CountA(Columns(1))
For i = 2 To LastRowNew
    OrderNumber = Cells(i, 3)
    Sheets("PRIOrders").Activate
    LastRowPRI = Application.WorksheetFunction.CountA(Columns(1))
    For j = 2 To LastRowPRI
        If Cells(j, 3) = OrderNumber Then
            Exit For
        ElseIf j = LastRowPRI Then
            Sheets("New").Rows(i).Copy Destination:=Sheets("PRIOrders").Rows(LastRowPRI + 1)
            Sheets("PRIOrders").Rows(2).Copy
            Sheets("PRIOrders").PasteSpecial xlPasteFormats
        End If
    Next
    Sheets("New").Activate
Next 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T00:26:27.927

```
Sub MergeSheets()

Dim shtNew As Worksheet, shtOrders As Worksheet
Dim rngOrder As Range, rngNewOrders As Range
Dim f As Range, lastRow As Long

    Set shtNew = ActiveWorkbook.Sheets("New")

    Set rngNewOrders = shtNew.Range(shtNew.Range("C2"), _
                       shtNew.Cells(Rows.Count, 3).End(xlUp))

    Set shtOrders = ActiveWorkbook.Sheets("PRIOrders")

    For Each rngOrder In rngNewOrders.Cells

        Set f = shtOrders.Columns(3).Find(Trim(rngOrder.Value), , xlValues, xlWhole)
        If f Is Nothing Then
            'find the last occupied row in Col B or C
            lastRow = Application.Max(shtOrders.Cells(Rows.Count, 2).End(xlUp).Row, _
                                      shtOrders.Cells(Rows.Count, 3).End(xlUp).Row)

            rngOrder.EntireRow.Copy shtOrders.Cells(lastRow + 1, 1)

        End If

    Next rngOrder

End Sub 
```

# php - Codeigniter：使用 ajax 将来自 Google API 的响应传递给 db 时出错

> ID：14615903
> 
> 赞同：0
> 
> 时间：2013-01-30T23:35:09.370
> 
> 标签：php, jquery, codeigniter

我在加载视图时从 Google API 获取数据。我获取数据的页面的 PHP 代码位于`<body>`. 现在我想将这些数据从视图传递到控制器，以便我可以将其保存到数据库中。

**在加载页面时获得响应。（此代码可见）**

```
$req = new Google_HttpRequest("https://www.google.com/m8/feeds/contacts/default/full?max-results=500");
              $val = $client->getIo()->authenticatedRequest($req);
              $xml = simplexml_load_string($val->getResponseBody());
              $result = $xml->xpath('//gd:email');
foreach ($result as $title) {
                echo $title->attributes()->address . "<br>";
                array_push($gmailContacts, $title->attributes()->address);
              } 
```

所以如果我这样做，`print "<pre>" .print_r($result,false). "</pre>";`我可以打印页面上的所有电子邮件。
AJAX 调用以保存`$gmailContacts`到数据库。

```
<script type="text/javascript">
     var contacts = <?php echo json_encode($gmailContacts)?>;
     $(document).ready(function(){
        $.ajax({
            url:'saveGmailContacts',
            data:contacts,
            type:'POST',
            success: function(msg){

            }

        });
     });
    </script> 
```

我正在获取`Severity: Notice --> Undefined variable: gmailContacts`变量

# iphone - 音频播放时更新 UISlider 进度条当前时间和持续时间

> ID：14615904
> 
> 赞同：0
> 
> 时间：2013-01-30T23:35:15.343
> 
> 标签：iphone, ios6

播放音频时在 UIToolbar 上有一个 UISlider ProgressBar 希望 UISlider ProgressBar 显示音频文件的持续时间和音频文件的当前时间。

```
 - (void)playAction:(id)sender
 {
if([player isPlaying])
{
    [sender setImage:[UIImage imageNamed:@"1play.png"] forState:UIControlStateSelected];
    [player pause];
    //[self pauseTimer];

}else{
    [sender setImage:[UIImage imageNamed:@"audiopause.png"] forState:UIControlStateNormal];
    [player play];
    //[self resumeTimer];

    }

[self updateProgressBar:timer];

}

- (void)updateProgressBar:(NSTimer *)timer
{
NSTimeInterval playTime = [self.player currentTime];
NSTimeInterval duration = [self.player duration];
float progress = playTime/duration;
[_progressBar setProgress:progress];

} 
```

但它不起作用。

感谢帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T00:15:10.360

您可能希望使用计时器调用 updateProgressBar 方法，而不是您现在正在执行的操作（在 playAction 方法中调用它）。相反，您可以使用 playAction 方法创建调用 updateProgressBar 的计时器，或暂停/停止现有计时器。

看起来您已经有一个实例变量来跟踪计时器，这很好。以下是创建新计时器的方法：

```
[timer invalidate]; // stop the old timer

// this timer runs once per second, perhaps you want to make it something shorter which would look less choppy
NSTimer *progressTimer = [NSTimer timerWithTimeInterval:1.0 target:self selector:@selector(updateProgressBar:) userInfo:nil repeats:YES];
[[NSRunLoop mainRunLoop] addTimer:progressTimer forMode:NSRunLoopCommonModes];
timer = progressTimer; 
```

如果您有暂停音频的方法，您也可以在那里使计时器无效。

```
[timer invalidate];
timer = nil; 
```

总而言之，在您的代码中，这看起来像：

```
 - (void)playAction:(id)sender
 {
    if([player isPlaying])
    {
        [sender setImage:[UIImage imageNamed:@"1play.png"] forState:UIControlStateSelected];
        [player pause];

        [timer invalidate];
        timer = nil;

    } else {

        [sender setImage:[UIImage imageNamed:@"audiopause.png"] forState:UIControlStateNormal];
        [player play];

        [timer invalidate];

        NSTimer *progressTimer = [NSTimer timerWithTimeInterval:1.0 target:self selector:@selector(updateProgressBar:) userInfo:nil repeats:YES];
        [[NSRunLoop mainRunLoop] addTimer:progressTimer forMode:NSRunLoopCommonModes];
        timer = progressTimer;

    }

}

- (void)updateProgressBar:(NSTimer *)timer
{
    NSTimeInterval playTime = [self.player currentTime];
    NSTimeInterval duration = [self.player duration];
    float progress = playTime/duration;
    [_progressBar setProgress:progress];

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T04:49:03.777

试试这个：这是用于更新滑块..

```
[NSTimer scheduledTimerWithTimeInterval:1.0 target:self selector:@selector(updateSlider) userInfo:nil repeats:YES];
        slider.maximumValue = avAudioPlayer.duration;

        [slider addTarget:self action:@selector(sliderChanged:) forControlEvents:UIControlEventValueChanged];

- (void)updateSlider {

    slider.value = avAudioPlayer.currentTime;
}

- (IBAction)sliderChanged:(UISlider *)sender {

    [avAudioPlayer stop];
    [avAudioPlayer setCurrentTime:slider.value];
    [avAudioPlayer prepareToPlay];
    [avAudioPlayer play];
} 
```

# wcf - 无法通过 HTTPS 连接到自托管 WCF 服务

> ID：14615905
> 
> 赞同：3
> 
> 时间：2013-01-30T23:35:30.170
> 
> 标签：wcf, https, self-hosting

我无法连接到使用 WebHttp+HTTPS 绑定运行的自托管 WCF 服务。由于各种原因，我完全在代码中配置服务，而不是使用配置文件，并以这种方式实例化服务：

```
private ServiceHost CreateService()
{
    Type myServiceType = typeof(MyService);
    ServiceHost myService = new ServiceHost(myServiceType, new Uri(Constants.ServiceAddress));
    ContractDescription contract = ContractDescription.GetContract(myServiceType);

    WebHttpBinding httpsBinding = new WebHttpBinding(WebHttpSecurityMode.Transport);
    httpsBinding.Security.Transport.ClientCredentialType = HttpClientCredentialType.None;

    ServiceEndpoint endpoint = myService.AddServiceEndpoint(myServiceType, httpsBinding, "MyService.svc");
    endpoint.Behaviors.Add(new WebHttpBehavior());

    ServiceMetadataBehavior metadataBehavior = new ServiceMetadataBehavior();
    metadataBehavior.HttpGetEnabled = true;
    metadataBehavior.HttpsGetEnabled = true;
    myService.Description.Behaviors.Add(metadataBehavior);

    myService.Credentials.ServiceCertificate.SetCertificate(
        StoreLocation.LocalMachine, 
        StoreName.My, 
        X509FindType.FindByThumbprint, 
        Constants.CertThumbprint);

    return myService;
} 
```

当我运行此代码时，该服务被实例化并无错误地启动。当我在代码中查询该服务时，该服务声称已打开，并`netstat`显示有人正在侦听相应的端口。我有一个防火墙例外，它允许此端口上的传入连接。

但是，如果我尝试在浏览器或客户端中打开服务端点地址，连接会立即失败。任何线索为什么？有没有忘记服务主机或环境的配置？

**编辑**：

没有要报告的错误消息——没有 404、500 或其他错误。浏览器的行为就好像它无法打开到目标端口的连接一样。服务器似乎甚至看不到传入的连接。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-31T18:04:36.473

问题原来是我没有**为我的 port 注册 SSL 证书**。以下代码行不起作用：

```
myService.Credentials.ServiceCertificate.SetCertificate(
    StoreLocation.LocalMachine, 
    StoreName.My, 
    X509FindType.FindByThumbprint, 
    Constants.CertThumbprint); 
```

仅当您打算对客户端使用证书身份验证时，设置服务凭据才相关。如果您使用的是 HTTPS，则需要为您正在侦听的端口注册 SSL 证书。发出以下命令可解决该问题：

```
netsh http add sslcert ipport=0.0.0.0:443 certhash=0b740a29f29f2cc795bf4f8730b83f303f26a6d5 appid={00112233-4455-6677-8899-AABBCCDDEEFF} 
```

还有一个用于执行此操作的非托管接口，但不存在托管包装器，因此使用该`netsh`程序执行此操作是最简单的。

# c++ - CreateWindowEx 的资源

> ID：14615911
> 
> 赞同：1
> 
> 时间：2013-01-30T23:36:08.603
> 
> 标签：c++, winapi, visual-c++, resources

我正在用 msvc 和 C++ 做一些测试。我正在尝试使用 ResEdit（可在此处获得[http://www.resedit.net/](http://www.resedit.net/)）创建对话框，并且在创建 .RC 文件时，我正在尝试对 CreateWindowEx API 使用相同的值以通过本机方式创建对话（因为资源可以编辑，我不想要这样的东西）。但是，当我将 .RC 值转换为 CreateWindowEx 时，它变得太小了。有人可以建议我做什么或简单的工作代码吗？谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-30T23:40:52.270

对话框单位与像素大小不同。在内存中，一个对话单元默认代表 1.5 个像素。因此，为了快速破解，将您的位置和大小值缩放 1.5。

但是您应该真正使用该`GetDialogBaseUnits`功能，因为这些单位被设计为与系统字体一起缩放。

参考这里：

[http://msdn.microsoft.com/en-us/library/windows/desktop/ms645475(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/ms645475(v=vs.85).aspx)

# tomcat - 为什么 Apache-Tomcat 中的 Javaw 只能使用 taskkill /F 停止

> ID：14615916
> 
> 赞同：2
> 
> 时间：2013-01-30T23:36:39.507
> 
> 标签：tomcat, javaw

我对此很陌生，所以如果我的要求很明显，请原谅。

根据我在 Windows 上阅读和观察到的内容，java 和 javaw 是相同的，只是 javaw 在没有控制台的情况下运行。那么为什么 javaw 只能使用 taskkill /F 来终止呢？

我在寻找通过命令提示符关闭 Apache Tomcat 服务器（v 6.0.36）的方法时发现了这一点。关闭脚本适用于`java.exe`但不适用`javaw.exe`。此外，我想知道是否有一种解决方法`javaw.exe`可以优雅地关闭。我遇到了`SendSignal.exe` [http://www.latenighthacking.com/projects/2003/sendsignal/](http://www.latenighthacking.com/projects/2003/sendsignal/)并没有运气尝试过。

谢谢

# mysql - 从另一个表和列中拉出一个表和列？

> ID：14615922
> 
> 赞同：0
> 
> 时间：2013-01-30T23:37:06.510
> 
> 标签：mysql

我希望显示器显示单个信息单元。例如，我希望 ID 1 'jscbb_directory' 仅显示 ID 1 'pictures' 列的信息。相反，它在pictures.picture 中显示所有内容。

```
SELECT jscbb_directory.id, pictures.picture
FROM jscbb_directory, pictures
WHERE jscbb_directory.id = pictures.picture; 
```

输出：

```
1
2
3
4 
```

我使用fourwinds作为前端，我想要它，所以当用户点击ID 1'jscbb_directory'时，它只显示来自'pictures'的ID 1的信息

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-30T23:46:26.370

尝试指定您要显示的 id

像那样

```
 SELECT jscbb_directory.id, pictures.picture
    FROM jscbb_directory, pictures
     WHERE jscbb_directory.id = pictures.picture
     AND jscbb_directory.id = 1;   // <--------- put the id number you want or the variable $id 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-30T23:47:03.333

我会建议你用`JOIN`一个`ON`子句。不是因为它解决了问题，而是因为它更容易阅读。

`SELECT`随你喜欢。在此处选择您想要的列。
`FROM jscbb_directory JOIN pictures ON jscbb_directory.id = pictures.picture`

现在你有了和以前一样的东西，但更具可读性。

所以现在在最后添加一个过滤器。`where jscbb_directory.id=1;`

随时澄清您要做什么。我不确定我是否理解你的问题。

* * *

这又是我的答案，全部合二为一。

```
SELECT jscbb_directory.id, pictures.picture
FROM jscbb_directory JOIN pictures ON jscbb_directory.id = pictures.picture
WHERE jscbb_directory.id = 1; 
```

并且，它输出

```
+----+---------+
| id | picture |
+----+---------+
|  1 |       1 |
+----+---------+ 
```

我不知道你为什么要两次相同的东西。所以也许你应该试试这个

```
SELECT jscbb_directory.id
FROM jscbb_directory JOIN pictures ON jscbb_directory.id = pictures.picture
WHERE jscbb_directory.id = 1; 
```

或这个

```
SELECT pictures.*
FROM jscbb_directory JOIN pictures ON jscbb_directory.id = pictures.picture
WHERE jscbb_directory.id = 1; 
```

看看他们做了什么

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-30T23:44:06.773

您似乎将 JOIN 条件与 WHERE 子句过滤器的使用混为一谈。您应该使用`ON`or`USING`子句明确您的 JOIN 条件，并在 WHERE 中应用过滤条件。所以它应该是这样的：

```
SELECT jscbb_directory.id, pictures.picture
FROM jscbb_directory
INNER JOIN pictures ON jscbb_directory.id = pictures.picture
WHERE jscbb_directory.id = ? 
```

where`?`替换为您要过滤的 id。

# r - 逐步建立公式

> ID：14615928
> 
> 赞同：2
> 
> 时间：2013-01-30T23:37:53.230
> 
> 标签：r

我正在尝试构建一个用于 deriv() 的公式。它很长，所以我想把它分成几部分（每个部分都有子部分），但我不知道该怎么做。我尝试了 as.formula()、expression()、eval()、paste() 等的各种组合，但都没有成功。我希望它最终看起来像这样（非工作示例）：

```
chunk1a <- a + b^2/c
chunk1b <- 4*c - a^2
chunk1 <- chunk1a^2 + 4*chunk1b

chunk2a <- 3*a
chunk2b <- a*b*c^2
chunk2 <- 7*chunk2b/chunk2a

chunk3a <- 5*b*c/a
chunk3b <- b^4 + 5*c
chunk3 <- 4*chunk3a - 1/chunk3b

myderiv <- deriv(~ chunk1 + chunk2/chunk3, 
                 c('a', 'b', 'c')) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-31T12:37:34.510

而不是字符串和字符串操作（如@Justin's answer），使用带引号的调用和语言操作：

```
chunk1a <- quote(a + b^2/c)
chunk1b <- quote(4 * c - a^a)

substitute((a) ^ 2 + (b) * 4, list(a = chunk1a, b = chunk1b))

# OR
bquote(.(chunk1a) ^ 2 + .(chunk1b) * 4) 
```

更多详细信息，请访问[https://github.com/hadley/devtools/wiki/Computing-on-the-language](https://github.com/hadley/devtools/wiki/Computing-on-the-language)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T23:52:50.760

我认为会有不可预见的边缘情况，但你可以这样做：

```
chunk1a <- 'a + b^2/c'
chunk1b <- '4 * c - a^a'

chunk1 <- paste('(', chunk1a, ')^2 +', chunk1b, '* 4') 
```

然后你进入永远可怕的`eval` `parse`土地：

```
a <- 1
b <- 2
c <- 3

eval(parse(text=chunk1))
# [1] 13.44444 
```

您也可以将其放入`deriv`没有`eval`：

```
deriv(parse(text=chunk1), c('a', 'b', 'c'))
# expression({
#     .expr1 <- b^2
#     .expr3 <- a + .expr1/c
#     .expr7 <- a^a
#     .value <- .expr3^2 + 4 * c - .expr7 * 4
#     .grad <- array(0, c(length(.value), 3L), list(NULL, c("a", 
#         "b", "c")))
#     .grad[, "a"] <- 2 * .expr3 - (a^(a - 1) * a + .expr7 * log(a)) * 
#         4
#     .grad[, "b"] <- 2 * (2 * b/c * .expr3)
#     .grad[, "c"] <- 4 - 2 * (.expr1/c^2 * .expr3)
#     attr(.value, "gradient") <- .grad
#     .value
# }) 
```

您还可以创建一个函数来为您完成一些肮脏的工作：

```
myfun <- function(expr_string1, wrapper1=NULL, expr_string2=NULL, wrapper2=NULL, join_fun=NULL) {
  if (!is.null(wrapper1)) {
    expr_string1 <- paste('(', expr_string1, ')', wrapper1)
  }

  if (!is.null(wrapper2)) {
    expr_string2 <- paste('(', expr_string2, ')', wrapper2)
  }

  if (!is.null(expr_string2) & !is.null(join_fun)) {
    expr_string1 <- paste(expr_string1, join_fun, expr_string2)
  }

  return (expr_string1)
} 
```

并称之为：

```
deriv(parse(text=myfun(chunk1a, '^2', chunk1b, '*4', '+')), 
            c('a', 'b', 'c')) 
```

哎呀...

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-31T00:23:51.520

试试这个：

```
library(Ryacas)

a <- Sym("a")
b <- Sym("b")
c <- Sym("c")

chunk1a <- a + b^2/c
chunk1b <- 4*c - a^2
chunk1 <- chunk1a^2 + 4*chunk1b

chunk2a <- 3*a
chunk2b <- a*b*c^2
chunk2 <- 7*chunk2b/chunk2a

chunk3a <- 5*b*c/a
chunk3b <- b^4 + 5*c
chunk3 <- 4*chunk3a - 1/chunk3b

deriv(deriv(deriv(chunk1 + chunk2/chunk3, a), b), c) 
```

# php - 使用 Javascript 编写文档 - smarty

> ID：14615933
> 
> 赞同：1
> 
> 时间：2013-01-30T23:38:48.343
> 
> 标签：php, javascript, smarty

我昨天提出了一个[关于](https://stackoverflow.com/questions/14555279/smarty-javascript-interference)javascript 和 smarty 的问题，所以因为我无法处理 { %} 标签。所有信息都可以在[这里找到](https://github.com/blueimp/JavaScript-Templates#compiled-templates)

```
 <script id="template-download" type="text/x-tmpl">
{% for (var i=0, file; file=o.files[i]; i++) { %}
    <tr class="template-download fade">
        {% if (file.error) { %}
            <td></td>
            <td class="name"><span>{%=file.name%}</span></td>
            <td class="size"><span>{%=o.formatFileSize(file.size)%}</span></td>
            <td class="error" colspan="2"><span class="label label-important">Error</span> {%=file.error%}</td>
        {% } else { %}
            <td class="preview">{% if (file.thumbnail_url) { %}
                <a href="{%=file.url%}" title="{%=file.name%}" data-gallery="gallery" download="{%=file.name%}"><img src="{%=file.thumbnail_url%}"></a>
            {% } %}</td>
            <td class="name">
                <a href="{%=file.url%}" title="{%=file.name%}" data-gallery="{%=file.thumbnail_url&&'gallery'%}" download="{%=file.name%}">{%=file.name%}</a>
            </td>
            <td class="size"><span>{%=o.formatFileSize(file.size)%}</span></td>
            <td colspan="2"></td>
        {% } %}
        <td class="delete">
            <button class="btn btn-danger" data-type="{%=file.delete_type%}" data-url="{%=file.delete_url%}"{% if (file.delete_with_credentials) { %} data-xhr-fields='{"withCredentials":true}'{% } %}>
                <i class="icon-trash icon-white"></i>
                <span>Delete</span>
            </button>
            <input type="checkbox" name="delete" value="1">
        </td>
    </tr>
{% } %}
</script> 
```

我正在尝试将标签放在字符串中：

```
<script id="template-download">
    for (var i=0, file; file=o.files[i]; i++) {
        document.write('<tr class="template-download fade">');
            if (file.error) {
                document.write('<td></td><td class="name"><span>**');document.write(file.name);** 
```

...

现在的问题是最后一行被部分读取并且没有在我的浏览器中输出，但是我在这里以粗体显示的行在我的浏览器中输出。这是为什么 ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T01:22:42.837

最后，

我设法让它顺利进行：

{文字}

{{literal}%{/literal} for (var i=0, file; file=o.files[i]; i++) { {literal}%{/literal}} ...

{/文字}

等等...

# ruby - 奇怪的 ruby for 循环行为（为什么会这样）

> ID：14615937
> 
> 赞同：5
> 
> 时间：2013-01-30T23:39:14.403
> 
> 标签：ruby, for-loop

```
def reverse(ary)
  result = []
  for result[0,0] in ary
  end
  result
end

assert_equal ["baz", "bar", "foo"], reverse(["foo", "bar", "baz"]) 
```

这有效，我想了解原因。有什么解释吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-30T23:51:36.237

如果我使用`each`而不是重写`for/in`它，它看起来像这样：

```
def reverse(ary)
  result = []

  # for result[0,0] in ary
  ary.each do |item|
    result[0, 0] = item
  end

  result
end 
```

`for a in b`基本上说，取出数组中的每个项目`b`并将其分配给 expression `a`。因此，当它不是一个简单的变量时，就会发生一些魔术。

该`array[index, length] = something`语法允许替换多个项目，甚至是 0 个项目。所以`ary[0,0] = item`说在索引零处插入`item`，替换零项。这基本上是一个`unshift`操作。

* * *

但实际上，只需使用`each`带有块的方法即可。一个没有改变状态的主体的 for 循环必须是最迟钝和难以阅读的东西之一，乍一看它并没有达到你的预期。 `each`提供更少的疯狂惊喜。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-30T23:51:59.523

您将 ary 中的值放在结果的第一个位置。所以假设我们有数组： `a = ["baz", "bar", "foo"]`

所以`a[0,0] = 5`将`a`等于`[5, "baz", "bar", "foo"]`

由于您遍历整个数组，因此您将每个元素插入结果数组的开头，同时移动现有元素，从而反转原始元素。

# c# - WMI 使用 c# 线程搜索如何提高 CPU 效率

> ID：14615938
> 
> 赞同：1
> 
> 时间：2013-01-30T23:39:25.203
> 
> 标签：c#, multithreading, winforms, wmi, wmi-query

我有一个程序，它创建一个线程来搜索 WMI（Win32 类）以检查各种系统信息。现在我为每个搜索创建一个线程，但很明显，当我使用组合框并快速滚动或触发多个线程时，cpu 会出现峰值，即使在关闭表单后，发送的“命令”仍然会发送到 wmi 提供程序，从而导致 cpu秒杀了好一阵子……

**问题：**

在不关闭表单的情况下，限制 cpu 使用率/创建的最大线程数以防止 cpu 峰值的最佳方法是什么。（如果我关闭表单，我可以为 WMI 提供程序进程发送一个终止进程，以便停止它）。

**图片：**

![在此处输入图像描述](../Images/05f78b93462b3fddf7eff5d331b063b7.png)

**代码：**

```
namespace Admin_Helper
{
    public partial class frmHardwareInformation : Form
    {
        public frmHardwareInformation()
        {
            InitializeComponent();
        }

        string searchQuery;

        private void cmbItemList_SelectedIndexChanged(object sender, EventArgs e)
        {
            var dctPropertyList = new Dictionary<string, string>(); //Store property name/value
            searchQuery = cmbItemList.SelectedItem.ToString(); //Search term
            new Thread(() => FindWMI(searchQuery, dctPropertyList, lstHwSearchList)).Start(); //Start thread for each search

    }

    private void FindWMI(string s, Dictionary<string, string> dct, ListView listView)
    {
        try
        {
            ManagementObjectSearcher moSearcher = new ManagementObjectSearcher("select * from " + s);

            Invoke(new MethodInvoker(() =>
                {
                    listView.Items.Clear(); //Clear items to prevent endless list
                }));

            foreach (ManagementObject moObject in moSearcher.Get())
            {
                if (moObject != null) //Gives errors if I don't check for null's..
                {
                    foreach (PropertyData propData in moObject.Properties)
                    {
                        if (propData.Value != null && propData.Value.ToString() != "" && propData.Name != null && propData.Name != "") //More prevention of errors..
                            dct[propData.Name] = propData.Value.ToString();

                    }
                }
            }

            foreach (KeyValuePair<string, string> listItem in dct)
            {
                Invoke(new MethodInvoker(() =>
                {
                    listView.Items.Add(listItem.Key).SubItems.Add(listItem.Value);
                    Application.DoEvents();
                }));
            }
        }
        catch (Exception) { } //Mostly catches invalid searches nothing too bad so far
    }
} 
```

}

## 编辑：包括代码更改

*在表单关闭、创建列表和调用整个更新时添加了 1x 的杀戮过程。

```
private void FindWMI(string s, Dictionary<string, string> dct, ListView listView)
    {

        try
        {
            List<ListViewItem> itemsList = new List<ListViewItem>();

            ManagementObjectSearcher moSearcher = new ManagementObjectSearcher("select * from " + s);
            Invoke(new MethodInvoker(() =>
            {
              listView.Items.Clear();
            }));

            foreach (ManagementObject moObject in moSearcher.Get())
            {
                if (moObject != null)
                {
                    foreach (PropertyData propData in moObject.Properties)
                    {
                        if (propData.Value != null && propData.Value.ToString() != "" && propData.Name != null && propData.Name != "")
                            dct[propData.Name] = propData.Value.ToString();
                    }
                }
            }
            foreach (KeyValuePair<string, string> listItem in dct)
            {
                ListViewItem lstItem = new ListViewItem(listItem.Key);
                lstItem.SubItems.Add(listItem.Value);
                itemsList.Add(lstItem);
            }

            Invoke(new MethodInvoker(() =>
            {
                listView.Items.AddRange(itemsList.ToArray());
            }));
        }
        catch (Exception) { }
    }

    private void frmHardwareInformation_FormClosed(object sender, FormClosedEventArgs e)
    {
        foreach (System.Diagnostics.Process myProc in System.Diagnostics.Process.GetProcesses())
        {
            if (myProc.ProcessName == "WmiPrvSE")
            {
                myProc.Kill();
            }
        }
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T23:58:32.547

为了提高性能，您绝对应该避免在循环中调用 Control.Invoke()。您可以将整个循环包装在 Control.Invoke() 中，或者更好的是，创建要显示的项目列表，然后在单个 Control.Invoke() 调用中更新您的控件。如果您通过在非 GUI 线程上执行项目来实现对项目的进一步过滤，这将允许您避免性能损失。

此外，您不需要在那里调用 Application.DoEvents() 。

下面是我的意思的示例，即创建一个项目列表并稍后将它们添加到控件中：

```
var itemsToAdd = new List<ListViewItem>();
foreach (KeyValuePair<string, string> listItem in dct)
{
    ListViewItem item = new ListViewItem(listItem.Key);
    item.SubItems.Add(listItem.Value);
    itemsToAdd.Add(item);
}

Invoke(new MethodInvoker(() =>
{
    listview.Items.AddRange(itemsToAdd);
})); 
```

# ajax - 阿贾克斯回到上一页

> ID：14615941
> 
> 赞同：-1
> 
> 时间：2013-01-30T23:39:41.070
> 
> 标签：ajax

我有一个由 jQuery Ajax 插入到页面 div 的表单（比如“内容”），当用户完成填写表单并点击“提交”按钮时，将显示结果以供进一步验证。html和ajax代码如下：

HTML：

```
<form id="userForm" action="..." method="post">
  ...
  ...
</form> 
```

阿贾克斯：

```
$(document).ready(function() {
  $('#userForm').ajaxForm({
    success: function(returnData) {
      $('#content').html(returnData);
    }
  });
}); 
```

“returnData”是用于进一步确认的填写表格（没有输入字段）。现在，如何实现“返回”按钮，以便用户可以返回并修改先前输入的数据？

我正在使用 Python 开发 Google App Engine。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T00:15:13.207

我不会`form`用新的 HTML 替换。

我宁愿隐藏表单`display: none`并添加新的 HTML 以便在旁边查看。如果要返回，则只需隐藏“查看 div”并再次显示`form`，无需重新填充任何输入元素。

这些方面的东西应该起作用

HTML：

```
<div id="content">
    <div id="user-form-container">
        <form id="userForm" ...>...</form>
    </div>

    <div id="viewing-container"></div>
</div> 
```

CSS：

```
#viewing-container {
    display: none;
} 
```

查看部分包含某种`back-button`，它隐藏查看区域并再次显示表单

问：

```
$(document).ready(function() {
    $('#userForm').ajaxForm({
        success: function(returnData) {
            $('#viewing-container').html(returnData);
            $('#user-form-container').hide();
            $('#viewing-container').show();
            $('#viewing-container #back-button').click(function() {
                $('#user-form-container').show();
                $('#viewing-container').hide();
            });
        }
    });
}); 
```

# c# - 在不同的布局容器上画一条线

> ID：14615943
> 
> 赞同：1
> 
> 时间：2013-01-30T23:39:44.753
> 
> 标签：c#, wpf, layout

我正在构建一个 C# WPF 应用程序，在我的一个 XAML 视图中，我需要使用一条线连接两个位于不同容器中的控件。

这是我的简化布局伪代码：

```
<DockPanel>
   <Grid DockPanel.Dock="Top">
      <Button Name="Button1" />
   </Grid>
   <UniformGrid Columns="3" DockPanel.Dock="Bottom">
      <StackPanel>
         <Button Name="ButtonA" />
      </StackPanel>
      <StackPanel>
         <Button Name="ButtonB" />
      </StackPanel>
      <StackPanel>
         <Button Name="ButtonC" />
      </StackPanel>
   </UniformGrid>
</DockPanel> 
```

我的要求是通过一条线将 Button1 连接到 ButtonA、B 或 C，但我不知道如何。根据我的研究，人们通常使用 Canvas 并连接托管在该 Canvas 中的控件，并使用附加属性 Canvas.SetTop 和 Canvas.SetLeft 将控件定位在容器内。我尝试用 Canvas 包裹我的 DockPanel，但没有成功。

我的问题是：是否可以绘制连接不同类型布局的控件的线？（在我的情况下是 DockPanel-Grid-UniformGrid）或实现此目的的替代或更标准的方法。我也尝试让我的控制位置相对于 DockPanel 但也没有工作......

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T19:05:31.397

基于 Charles Petzold ['Thinking outside the grid'](http://msdn.microsoft.com/en-us/magazine/ff646962.aspx)文章，我最终得到了这样的结构：

```
<UserControl ... >
  <Grid ... >
    <local:SimpleUniformGrid ... >
      <Button ... />
      <Button ... />
      ...
    </local:SimpleUniformGrid>

    <Canvas>
      <Path ... /> 
      <Path ... />
      <Path ... />
    </Canvas>
  </Grid>
</UserControl> 
```

关键段落是这个：

“在处理 LayoutUpdated 事件时，你不想做任何会导致另一个布局传递并让你卷入无限递归的事情。**这就是 Canvas 派上用场的地方：因为它总是向其父级报告零大小，所以你可以在不影响布局的情况下更改画布中的元素**。”

除此之外，我还使用了他的[Dragable Objects 文章中的 Denis Vuyka MyThumb 类](http://denisvuyka.wordpress.com/2007/10/13/wpf-draggable-objects-and-simple-shape-connectors/)

可以使用 GeneralTransform 类确定创建线时的起点和终点，如[本文所述](http://www.infosysblogs.com/microsoft/2007/07/wpf_finding_control_location.html)：

```
 GeneralTransform transform = thumb.TransformToAncestor(this);
    Point rootPoint = transform.Transform(new Point(0, 0)); 
```

这里的关键教训是了解 Canvas 不占用 Grid 内的任何空间，因此您可以将其用作存储路径/LineGeometry 的容器，并在视图中的任何坐标处显示它们，无论源/目标控件是否属于到不同的容器。

# apache - 在apache下使用http basic auth一次登录多个虚拟主机

> ID：14615944
> 
> 赞同：2
> 
> 时间：2013-01-30T23:39:50.210
> 
> 标签：apache, virtualhost, basic-authentication

我在一个域下有 2 个虚拟主机：a.mydomain.com、b.mydomain.com。在 apache 的全局配置中，我有以下内容：

```
<Directory />
Options FollowSymLinks
AllowOverride None
AuthType Basic
AuthName "Restricted Area"
AuthBasicProvider file
AuthUserFile /etc/httpd/password_http_auth
Require user mydomain_user
</Directory> 
```

这适用于所有具有基本身份验证保护的虚拟主机。但是，在我访问 mydomain.com 并在那里进行身份验证后，我需要输入 a.mydomain.com 和 b.mydomain 的用户名和密码。

所以我的问题是：有没有办法只在 mydomain.com 上进行身份验证，并且该用户不需要为该域下的所有虚拟主机再次输入用户名和密码？

提前谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-12-09T12:41:24.530

在 httpd.conf 或 apache2.conf 中完成的任何配置都是全局配置，并将应用于您配置的所有站点。

仅使其适用于其中一个站点。将身份验证配置移动到特定的虚拟主机配置文件

```
<Directory />
  # keep these
  Options FollowSymLinks
  AllowOverride None

  # move these to the vhost configuration you want to protect
  AuthType Basic
  AuthName "Restricted Area"
  AuthBasicProvider file
  AuthUserFile /etc/httpd/password_http_auth
  Require user mydomain_user
</Directory> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-04-12T12:20:07.273

这可能对某人有用：

我有一个带有许多别名的虚拟主机。它是一个多站点设置，具有多个网站的单一源代码。我需要对某些主机进行基本身份验证，但对其他主机则不需要，而虚拟主机对所有主机/域都是通用的。

这是我做到的，它工作正常（Apache 2.4 / Ubuntu 18LTS）：

```
SetEnvIf Host "secure\.host\.com" SECURED
SetEnvIfNoCase Request_URI "^/secure-dir/" SECURED
AuthType Basic
AuthName "Basic Auth Message"
AuthUserFile /var/www/public-html/.htpasswd
Require valid-user
Satisfy any
Order allow,deny
Allow from all
Deny from env=SECURED 
```

在上面的示例中，我还有一个安全目录（第 2 行），它与正则表达式一起使用，因此它将与该目录中的任何文件匹配。

第 1 行是安全主机名。请注意每个点字符前的反斜杠！

根据需要为主机或目录添加尽可能多的行。

# javascript - 页面加载后 Javascript 未在 Webview 中显示

> ID：14615950
> 
> 赞同：0
> 
> 时间：2013-01-30T23:40:16.850
> 
> 标签：javascript, android, webview

我正在从资产加载内部网页。当 onPageFinished 触发时，我从服务器异步请求数据并使用 jQuery 将响应数据注入页面。网页有时是空白的，就好像 javascript 从未执行过一样。服务器响应数据在那里并且应该显示。我应该打电话给 webview.postInvalidate(); 在注入响应数据的线程中？我认为问题在于数据正确时的视图。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T00:50:34.190

您需要在 WebView 中显式启用 Javascript：http: [//developer.android.com/reference/android/webkit/WebSettings.html#setJavaScriptEnabled(boolean)](http://developer.android.com/reference/android/webkit/WebSettings.html#setJavaScriptEnabled(boolean))

# android - Android 变量在 AsyncTask 中交换值

> ID：14615952
> 
> 赞同：1
> 
> 时间：2013-01-30T23:40:25.140
> 
> 标签：android, variables, android-asynctask, swap

我有一个显示服务器状态的程序（无论是在线还是离线）。我放了一个微调器来向用户展示它的加载，并且在 AsyncTask 中我关闭了在线/离线图像并在加载时打开微调器，完成后执行相反的操作。该代码完成了它的工作，但我觉得它是由一些小故障完成的，并且可能会在以后破坏它，所以我想现在修复它。基本上发生的是在线/离线图像的变量和微调器交换值的变量，但我不知道为什么。

这是我的代码：

```
public View background;
public View status;
public View loading;

class CheckStatusTask extends AsyncTask<Void, Void, Boolean> { 

    //show loading
    protected void onPreExecute(){
        status.setVisibility(View.VISIBLE);<-- this shows the spinner but should show online/offline
        //loading.setVisibility(View.INVISIBLE);<-- this shows the online/offline but should show the spinner
    }

    //check if server is online
    protected Boolean doInBackground(Void... params) {
        return CheckStatus.check();
    }

    //set status bar to offline if flag is false
    protected void onPostExecute(Boolean flag) {
        status.setVisibility(View.INVISIBLE);<-- this shows the spinner but should show online/offline
        //loading.setVisibility(View.VISIBLE);<-- this shows the online/offline but should show the spinner
        if(!flag){
            background.setBackgroundResource(R.layout.offline);
            status.setBackgroundResource(R.drawable.offline);<-- correct 
        }
    }

}

@Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        background = findViewById(R.id.status);
        status = findViewById(R.id.image); 
        loading = findViewById(R.id.loading);
        new CheckStatusTask().execute();
    } 
```

XML 文件：

```
<?xml version="1.0" encoding="utf-8"?>
<ScrollView
xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:fillViewport="true">
<RelativeLayout
    android:layout_width="fill_parent"
    android:layout_height="wrap_content" android:background="#ffffff">

    <!--  Status  Starts-->
    <LinearLayout android:id="@+id/status"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:background="@layout/online"
            android:paddingTop="5dip"
            android:paddingBottom="5dip">
            <!-- Online/Offline Start-->

            <ImageView android:id="@+id/image"
                        android:src="@drawable/logo"
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:layout_marginLeft="10dip"/>
            <ProgressBar
                android:id="@+id/loading"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content" />
            <!-- Online/Offline Ends -->

    </LinearLayout>
    <!--  Status Ends -->

    <!-- Main Form -->
    <LinearLayout
      xmlns:android="http://schemas.android.com/apk/res/android"
      android:orientation="vertical"
      android:layout_width="match_parent"
      android:layout_height="wrap_content"
      android:padding="10dip"
      android:layout_below="@id/status">

        <TextView 
            android:id="@+id/text"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:textColor="#372c24"
            android:text="Home"/>

    </LinearLayout>
    <!-- Main Form Ends -->
</RelativeLayout>
</ScrollView> 
```

正如您所看到的，状态变量被定义为显示在线/离线图像，加载变量被定义为显示微调器，但它的作用恰恰相反。这只发生在此特定功能的其他任何地方。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T00:21:29.463

```
android:background="@layout/online" 
```

使用这条线，您可以将线性布局的背景设置为`res/layout/`文件夹中的可绘制形状。

可绘制资源，例如形状可绘制对象，应放在`res/drawable/`文件夹内。通过将其存储在布局文件夹中，会混淆资源的 R.id 值。我不知道为什么问题会以这种方式表现出来。但是将这些 online.xml 和 offline.xml 移动到`res/drawable/`并删除其中的那些`res/layout/`应该可以解决它。

移动文件后，将上面的行更改为：

```
android:background="@drawable/online" 
```

有关xml 可[绘制资源](http://developer.android.com/guide/topics/resources/drawable-resource.html)的更多信息，请参阅可绘制资源。

# asp.net - Asp.Net MVC 4、LocalDB 和分离服务层项目

> ID：14615953
> 
> 赞同：0
> 
> 时间：2013-01-30T23:40:35.863
> 
> 标签：asp.net, asp.net-mvc, design-patterns, asp.net-mvc-4

我使用带有 LocalDB 的 Asp.net MVC 4.0 构建了一个表单身份验证（实际上我正在使用新的单页应用程序）网站。我想为访问数据库的服务层创建一个单独的类库项目。我需要将默认帐户/身份验证表与我自己的表集成。

**问题：**

1.  我应该将 Sql server LocalDB 文件放在服务项目文件夹下吗？
2.  如果答案不是（1），那么服务项目如何访问MVC项目下的LocalDB文件呢？
3.  如果我将 LocalDB 文件放在服务项目下，是否需要修改系统生成的帐户登录代码。让认证码通过服务层而不是默认的DBContext来访问数据库怎么样？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T02:42:36.963

这种模式很常见，主要的控制和理解点是 IIS 和那里的安全性。确实值得一看 MSDN IIS 站点，以便对这个主题充满信心。 [http://msdn.microsoft.com/en-us/library/aa292471%28v=vs.71%29.aspx](http://msdn.microsoft.com/en-us/library/aa292471%28v=vs.71%29.aspx)

1) SQL server DB 的位置无关紧要。SQL 服务器实例所在的位置确实起作用。如果它在同一个域/AD 中，那么使用 Windows 集成安全登录到数据库效果很好。2）如果连接SQL的userid是数据库实例上的合法用户，并且拥有底层数据库的必要权限，那么您就可以访问数据了。

3）这个代码是什么？

有许多问题需要回答/考虑。

a) 您是在 IIS 中使用 FORMS 登录还是 Windows 集成登录。b）您想使用服务用户访问数据库，还是让每个用户在数据库中分配。c) 您的应用程序的安全模型是什么。

另请参阅[http://leastprivilege.com/category/net-security/](http://leastprivilege.com/category/net-security/) Dominick Baier 安全博客。

**作为示例解决方案，（不是唯一的）。**

*   您可以在 IIS 中设置网站以使用 FORMS 身份验证
*   在 IIS 中设置网站使用的应用程序池以使用特定的 Service 用户。您在 IIS 应用程序池中键入用户 ID 和密码。您必须首先在域上创建此用户。为它分配尽可能少的权利。
*   将此服务用户添加到 SQL 服务器，并在应访问的数据库中为其提供足够的权限。（2 个步骤）因此服务用户可以访问数据库，但几乎没有其他操作。

因此，这会让您使用**System.Environment.UserName** 作为您在网站后面的应用程序池中设置的系统用户。然后按照您认为合适的方式管理您的应用程序安全性。进入 .net 4.5 后的索赔本金是一种“新方式”。
但是你在这里保持尽可能简单。 **Thread.CurrentPrincipal.Identity.Name** 将包含基于表单的用户的名称。

祝你好运...

![在此处输入图像描述](../Images/5a4c66fdb6a850e86ab618f64ee55eaf.png)

# c++ - OpenCV imwrite 一个浮动图像，使用哪种转换？

> ID：14615959
> 
> 赞同：0
> 
> 时间：2013-01-30T23:40:45.990
> 
> 标签：c++, opencv

我需要在 OpenCV 中存储一个浮动图像。[按照@tomriddle_1234](https://stackoverflow.com/questions/13961789/opencv-imwrite-saving-black-png)的建议将其转换为 CV8U 图像仍会存储黑色 png。

```
reference.type() = 5
reference.channels() = 1
reference.depth() = 5 
```

如何将图像转换为 8 位或 16 位，以便 imwrite 可以存储图像，同时保持其浮动属性，即：由于转换/精度损失，存储的图像不会“褪色”！

```
imshow("5t aligned Mean", reference); //Displays the correct image
//reference.convertTo(reference, CV_8U); //Convert image to 8Bit INCORRECT
reference.convertTo(reference, CV_8U, 255.0, 1/255.0); //Correct image
imwrite(subject.c_str(), reference); //Stores a completely black png 
```

任何建议都非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T04:57:19.220

您可以通过将每个浮点像素乘以 2^16-1 来转换为 16 位。浮点图像存储在 [0,1] 之间的值，您希望将其映射到范围 [0,2^16-1]

opencv 将使用普通的 imwrite() 在 PNG 和 TIFF 中保存 16 位未压缩的数据。

（它也会将它们保存为 JPEG，尽管我不太幸运地找到读取 16 位 jpeg 的内容）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T00:10:02.297

在使用 CV_NORM_MINMAX 在 0 和 255 之间转换之前标准化图像

# c# - 在 ASP.NET app_code 文件夹中调用移动检测类方法

> ID：14615966
> 
> 赞同：0
> 
> 时间：2013-01-30T23:41:22.033
> 
> 标签：c#, asp.net, mobile, detection, app-code

# 概括

我的 app_code 文件夹内的 C# 类文件中有一个 ASP.NET 3.5 网站和一个移动检测方法。我想调用这个设置 cookie 的方法，然后切换我的母版页文件（如果它是移动设备）。

我正在使用从本文评论部分获得的方法：http: [//www.codeproject.com/Articles/34422/Detecting-a-mobile-browser-in-ASP-NET](http://www.codeproject.com/Articles/34422/Detecting-a-mobile-browser-in-ASP-NET)

这似乎比使用 51 度检测方法更简单，因为我真的不需要高水平的检测，而且我不想将它们发送到不同的 URL，而只是翻转到不同的母版页和 NuGet易于安装的软件包不适用于 ASP.NET 3.5。

我目前遇到的问题是调用该方法。

# 这是代码

## 外部 app_code 类

```
public static class fooBar // test method
{
    public static bool ean()
    {
        return true;
    }
}

public static class HttpRequestExt
{
    #region Private Fields

    // These regular expressions retrieved from http://detectmobilebrowser.com/ "Open source mobile phone detection".
    private static Regex MobileBrowsers = new Regex(@"android|avantgo|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\\/|plucker|pocket|psp|symbian|treo|up\\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino", RegexOptions.IgnoreCase | RegexOptions.Multiline);
    private static Regex MobileApps = new Regex(@"1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\\-(n|u)|c55\\/|capi|ccwa|cdm\\-|cell|chtm|cldc|cmd\\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\\-s|devi|dica|dmob|do(c|p)o|ds(12|\\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\\-|_)|g1 u|g560|gene|gf\\-5|g\\-mo|go(\\.w|od)|gr(ad|un)|haie|hcit|hd\\-(m|p|t)|hei\\-|hi(pt|ta)|hp( i|ip)|hs\\-c|ht(c(\\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\\-(20|go|ma)|i230|iac( |\\-|\\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\\/)|klon|kpt |kwc\\-|kyo(c|k)|le(no|xi)|lg( g|\\/(k|l|u)|50|54|e\\-|e\\/|\\-[a-w])|libw|lynx|m1\\-w|m3ga|m50\\/|ma(te|ui|xo)|mc(01|21|ca)|m\\-cr|me(di|rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\\-2|po(ck|rt|se)|prox|psio|pt\\-g|qa\\-a|qc(07|12|21|32|60|\\-[2-7]|i\\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\\-|oo|p\\-)|sdk\\/|se(c(\\-|0|1)|47|mc|nd|ri)|sgh\\-|shar|sie(\\-|m)|sk\\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\\-|v\\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\\-|tdg\\-|tel(i|m)|tim\\-|t\\-mo|to(pl|sh)|ts(70|m\\-|m3|m5)|tx\\-9|up(\\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|xda(\\-|2|g)|yas\\-|your|zeto|zte\\-", RegexOptions.IgnoreCase | RegexOptions.Multiline);

    #endregion

    public const string ViewMobileSiteCookieName = "ViewMobile";

    /// <summary>
    /// Determines if the request emanated from a mobile-device client; 
    /// and stores the result in a cookie on the response.
    /// </summary>
    /// <param name="request"></param>
    /// <param name="Response"></param>
    /// <returns></returns>
    /// 
    public static bool IsMobileClient(this System.Web.HttpRequest request, System.Web.HttpRequest Response)
    {
        bool isMobile = false;
        bool isCookieSet = false;
        var viewMobileCookie = request.Cookies[ViewMobileSiteCookieName];

        if (viewMobileCookie != null && bool.TryParse(viewMobileCookie.Value, out isMobile))
        {
            isCookieSet = true;
        }
        else if (request.Browser.IsMobileDevice)
        {
            isMobile = true;
        }
        else if (request.ServerVariables["HTTP_X_WAP_PROFILE"].IsNotEmpty())
        {
            isMobile = true;
        }
        else if
            (
                request.ServerVariables["HTTP_ACCEPT"].IsNotEmpty()
                &&
                (
                    request.ServerVariables["HTTP_ACCEPT"].ToLower().Contains("wap")
                    || request.ServerVariables["HTTP_ACCEPT"].ToLower().Contains("wml+xml")
                )
            )
        {
            isMobile = true;
        }
        else if (request.ServerVariables["HTTP_USER_AGENT"].IsNotEmpty())
        {
            string userAgent = request.ServerVariables["HTTP_USER_AGENT"];
            isMobile = ((MobileBrowsers.IsMatch(userAgent) || MobileApps.IsMatch(userAgent.Substring(0, 4))));
        }

        // Store the result as a cookie.
        if (!isCookieSet)
            Response.Cookies.Add(new HttpCookie(ViewMobileSiteCookieName, isMobile.ToString()));

        return isMobile;
    }

    public static bool IsNotEmpty(this string instance)
    {
        return instance != null && instance.Length > 0;
    }
} 
```

## 我的呼唤）

现在我在页面上做，但我想我会在会话开始时在 global.asax 中做这个？

```
sectionTitle.InnerHtml = fooBar.ean().ToString(); // test works
sectionTitle.InnerHtml = HttpRequestExt.IsMobileClient.ToString(); // compile error 
```

### 编译错误：

> CS0119：“SWIC.HttpRequestExt.IsMobileClient(System.Web.HttpRequest, System.Web.HttpRequest)”是一种“方法”，在给定的上下文中无效

我是否必须以某种方式将其转换为当前实例？我应该一起做不同的事情吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T23:44:03.100

您正在尝试调用属性之类的方法。方法需要括号：

```
HttpRequestExt.IsMobileClient().ToString()
                             ^^ 
```

您还必须在当前请求上调用它，而不仅仅是静态地调用它，因为它是一个扩展方法（它需要一个参数）。例如：

```
sectionTitle.InnerHtml = Page.Request.IsMobileClient(Page.Response).ToString(); 
```

# visual-studio-2008 - 为什么 cuda 程序在运行期间而不是在调试期间崩溃

> ID：14615967
> 
> 赞同：1
> 
> 时间：2013-01-30T23:41:23.283
> 
> 标签：visual-studio-2008, cuda

我正在使用 Visual Studio 2008 在 Windows 上工作。我的 Cuda 程序在运行期间崩溃，即屏幕变黑，我想操作系统会杀死内核，因为由于看门狗超时，执行时间太长（大约 10 秒）。但是，我不明白为什么同一个程序不会崩溃，或者为什么我调试内核时操作系统不会杀死？内核在调试期间仍然需要大约 10 秒（或更长）来执行。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-04-21T20:18:53.770

我刚遇到这个问题；

就我而言，当我通过 NSight CUDA 调试器（Visual Studio 2012）执行我的程序时，它执行得很好。但是，如果我在 NSight 之外运行它，或者使用 Visual Studios 内部调试器，或者单独运行，调用`cudaGLMapBufferObject(void** devPtr, GLuint bufObj)`将失败，返回`cuda_status`未知错误的枚举，并且如果我在此之后没有退出，其他调用将失败并出现相同的错误。

这是因为我忘记在我使用动态大小的共享内存的内核中传递第三个参数（定义运行时大小的共享内存的大小）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-01-18T14:10:12.117

以防万一它帮助别人。

我遇到了同样的问题（但在 VS 2013 和 cuda 7.5 上工作），当我在属性的 CUDA C/C++ -> Device 部分关闭 Generate GPU Debug Information 和 Generate Line Number Information 时解决了这个问题。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-30T23:44:45.030

通常，当存在竞争条件问题时，就会出现这些问题。由于调试运行较慢，因此不会出现错误，但当调试关闭时，指令处理顺序不同，程序崩溃。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-02-05T22:01:56.970

通常，这可能发生在调试初始化值为零时，而发布不会初始化这些值。首先，我会确保一切都已初始化。另一张海报提到的比赛条件也可能发生。您可能还想尝试在发布版本中禁用优化。偶尔，但不经常，编译器会执行破坏代码的不安全优化。请记住，通常如果您认为编译器有问题，那您就错了，尤其是对于没有几年经验的人。

# c++ - std::sort 之后的自定义对象不良行为

> ID：14615969
> 
> 赞同：0
> 
> 时间：2013-01-30T23:41:39.007
> 
> 标签：c++

在对自定义类 Elevator 的 std::vector 进行排序后，我遇到了问题。

**类定义：**

```
class Elevator
{
private:

        uint16_t m_id;
        char *m_channel;
        ElevatorType m_type;

public:

        Elevator(uint16_t id, const char *channel, ElevatorType type);
        Elevator(const Elevator &other);
        ~Elevator();

        char *ToCString();

        bool operator<(const Elevator& rhs) const;

        static vector<Elevator> *ElevatorsFromWorkbook(const char *path);

}; 
```

**less 运算符**是这样实现的：

```
bool Elevator::operator<(const Elevator& rhs) const
{
    return (this->m_id < rhs.m_id);
} 
```

**ToCString**方法是这样实现的：

```
char *Elevator::ToCString()
{
    char *output = (char*)malloc(sizeof(char) * (8+strlen(m_channel)));
    char type = 'U';
    if (m_type == ELEVATOR_TYPE_A)
    {
        type = 'A';
    }
    else if (m_type == ELEVATOR_TYPE_G)
    {
        type = 'G';
    } 
    else if (m_type == ELEVATOR_TYPE_M)
    {
        type = 'M';
    }
    sprintf(output,"%d %s %c",m_id,m_channel,type);
    return output;
} 
```

**复制构造函数：**

```
Elevator::Elevator(const Elevator &other)
{
    m_id = other.m_id;
    m_channel = (char*)malloc(sizeof(char)*(strlen(other.m_channel)+1));
    strcpy(m_channel,other.m_channel);
    m_type = other.m_type;

} 
```

问题示例：

```
std::vector<Elevator> elevators;
elevators.push_back(Elevator(4569,"CHANNEL3",ELEVATOR_TYPE_G));
elevators.push_back(Elevator(4567,"CHANNEL3",ELEVATOR_TYPE_G));

printf("%s\n",elevators.at(0).ToCString()); //Prints "4567 CHANNEL1 G"
std::sort(elevators.begin(),elevators.end());
printf("%s\n",elevators.at(0).ToCString()); //ISSUE: Prints "4567 4567 ▒#a G" 
```

我究竟做错了什么？谢谢你的时间！

**编译注意事项：**我正在使用带有这些标志的 Cygwin：-Wall -Wextra -fno-exceptions -fno-rtti -march=pentium4 -O2 -fomit-frame-pointer -pipe

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T02:27:47.947

根据标准，`std::sort`要求一个对象是可交换的，这意味着你可以调用`swap`它。由于您没有`swap`过载，这意味着`std::swap`. 并`std::swap`说

> 要求：类型 T 应为 MoveConstructible（表 20）和 MoveAssignable（表 22）。

（那是 C++11。将 C++03 的“移动”替换为“复制”。）

您的类不是 CopyAssignable 因为它缺少`operator=`重载，因此您应该添加它。（请参阅[什么是三法则？](https://stackoverflow.com/questions/4172722/what-is-the-rule-of-three)）请注意，复制构造可以从默认构造和 合成`operator=`。

# c++ - 布尔变量通常实现为单个位吗？

> ID：14615977
> 
> 赞同：1
> 
> 时间：2013-01-30T23:42:12.410
> 
> 标签：c++, visual-c++, gcc, compiler-construction

> **可能重复：**
> [一字节布尔值。为什么？](https://stackoverflow.com/questions/14220726/one-byte-bool-why)

我想向一个类添加一个布尔变量。但是，这个类对大小非常敏感，因此我不愿意添加另一个字段。然而，它是由一堆至少一个`char`宽的成员和一个其他的组成的`bool`。

如果我手写这段代码，我会将这些布尔字段实现为对象最后一个字节左右的位。由于访问必须是字节对齐的，这不会导致空间开销。

现在，编译器通常会这样做吗？我可以让他们不这样做的唯一原因是因为它会涉及一个额外的掩码来让那个位离开那里。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-30T23:48:08.987

不，编译器无法做到这一点，因为每个成员的地址必须是不同的。如果要打包固定数量的位，请使用`std::bitset`. 如果您需要可变数量的位数，请使用`boost::dynamic_bitset`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-30T23:43:48.070

不，我不知道有任何编译器可以优化布尔值。

您可以通过以下方式强制执行此行为：

```
unsigned int m_firstBit : 1;
unsigned int m_secondBit : 1;
unsigned int m_thirdBit : 1; 
```

至于为什么不这样做，它可能会违反一些语言保证。例如，如果它没有自己的保留字节，则无法传递`&myBool`给采用 a 的函数。`bool*`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-30T23:47:59.307

编译器通常不这样做，但您可以使用`std::bitset<2>`将两个布尔值打包成一个字节。

# c# - 如何在非英语 Win Vista Business 上使用 System.Speech

> ID：14615979
> 
> 赞同：0
> 
> 时间：2013-01-30T23:42:16.730
> 
> 标签：c#, .net-4.0, windows-vista, speech-recognition, system.speech.recognition

我想尝试语音识别来控制程序。我用 C# 编写了测试程序，当我调试它时，每次都会发生错误 -

```
System.Runtime.InteropServices.COMException (0x80004005): Calling part of COM return error HRESULT E_FAIL.* 
in System.Speech.Recognition.RecognizerBase.Initialize(SapiRecognizer recognizer, Boolean inproc)
in System.Speech.Recognition.SpeechRecognitionEngine.get_RecoBase()
in System.Speech.Recognition.SpeechRecognitionEngine.LoadGrammar(Grammar grammar) 
```

看起来错误是由于`engine.LoadGrammar(new DictationGrammar());` 我的笔记本上我安装了 CZECH OS Vista 引起的，这可能是语音识别语言与操作系统语言不同的问题。

有没有办法在非英语操作系统中使用 system.speech 进行开发，或者我在某些步骤中错了？语言没有问题，我想用英语进行语音识别，但是我无法获得英语 Vista 或 MUI 语言包。

完整代码如下。

非常感谢！

```
using System;
using System.Windows;
using System.Speech.Recognition;

namespace rozpoznani_reci_WPF
{
   public partial class MainWindow : Window
    {
        public MainWindow()
        {
            InitializeComponent();

            SpeechRecognitionEngine engine = new SpeechRecognitionEngine();

            try
                {
                    engine.LoadGrammar(new DictationGrammar());
                    engine.SetInputToDefaultAudioDevice();
                    engine.SpeechRecognized += new EventHandler<SpeechRecognizedEventArgs>(recognizer_SpeechRecognized);
                }

            catch(Exception e)
                {
                    //MessageBox.Show(e.ToString());
                    textBox1.Text = e.ToString();
                 }
            }

        void recognizer_SpeechRecognized(object sender, SpeechRecognizedEventArgs e)
        {
            if (e.Result != null)
            {
                textBox1.Text = e.Result.Text + "  ";
            }
        }
      }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T00:00:42.937

根据 MSDN 文档[`DictationGrammar`](http://msdn.microsoft.com/en-us/library/system.speech.recognition.dictationgrammar.aspx)，无参数构造函数

> 为 Windows 桌面语音技术提供的默认听写语法初始化 DictationGrammar 类的新实例。

`DicationGrammar`您的机器上有捷克语课程吗？如果没有，您需要创建一个并使用另一个构造函数[`DictationGrammar(String)`](http://msdn.microsoft.com/en-us/library/ms554225.aspx)并从 URI 加载一个。您也可以使用[`GrammarBuilder`](http://msdn.microsoft.com/en-us/library/system.speech.recognition.grammarbuilder.aspx)来构建自己的并使用[`SpeechRecognizer.LoadGrammar()`](http://msdn.microsoft.com/en-us/library/system.speech.recognition.speechrecognizer.loadgrammar.aspx).

您可能还会发现[此链接](http://dotnet.org.za/beta/archive/2008/01/06/system-speech-recognition.aspx)很有用；它是从 2008 年开始的，但您*确实*询问过 Vista。:-)

# ant - 使用 Ant/JUnit，指定 .java 文件而不是 .class 文件有什么好处？

> ID：14615980
> 
> 赞同：1
> 
> 时间：2013-01-30T23:42:18.990
> 
> 标签：ant, junit

我正在`junit`我的 Ant 脚本中编写一个任务，我看到[文档](http://ant.apache.org/manual/Tasks/junit.html)说您可以同时指定`.java`和`.class`文件。

为什么要指定`.java`文件？

该`junit`任务不编译源文件，因此没有任何好处。而且您已经必须在类路径中指定类文件。我想也许指定 java 源文件会导致我的堆栈跟踪显示行号，但实验表明这没有发生。

所以我很难过。有什么区别吗？事实上，它似乎*不太*方便。

指定`.java`文件有好处吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T23:53:18.640

如果您有需要编译的源列表，则可以将其传递给 java 任务，该任务将编译它们。在这种情况下，能够将该列表传递给 junit 任务，而不必将所有 .java 文件名映射到 .class 文件名，这是一种（小）便利。

# .net - 授予 WPF 应用程序对共享驱动器的访问权限，但不授予用户访问权限

> ID：14615982
> 
> 赞同：0
> 
> 时间：2013-01-30T23:42:47.813
> 
> 标签：.net

我有一个 WPF 应用程序，它将为我们公司的用户提供一种将文件下载和上传到 Windows 服务器上的目录的方法。该应用程序将安装在每个公司成员自己的机器上。

我们希望这样用户不能直接在文件浏览器中访问目录，所以他们不能只是去：“\fileserver\files”然后乱七八糟。他们只能使用该应用程序上传/下载文件。

为这种情况设置权限的最佳方法是什么？我们可以在服务器上创建一个用户并让应用程序保存该用户的凭据吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T23:52:08.853

您将要调查模仿。您可以让您的应用程序在另一个用户下执行代码。尝试在您希望应用程序在其下执行代码的服务器上设置一个帐户。

这样做意味着您的代码仅在 using 语句期间模拟用户，而不是在应用程序的整个生命周期中以其他用户身份运行。

此类支持跨域模拟以及同域模拟。

```
C#    
using System;
using System.Collections.Generic;
using System.Text;
using System.Security.Principal;
using System.Runtime.InteropServices;
using System.ComponentModel;
namespace Utils
{
    public class dvImpersonator : IDisposable
    {
        private WindowsImpersonationContext ImpersonationContext = null;
        enum LogonType
        {
            Interactive = 2,
            Network = 3,
            Batch = 4,
            Service = 5,
            Unlock = 7,
            NetworkClearText = 8,
            NewCredentials = 9
        }
        enum LogonProvider
        {
            Default = 0,
            WinNT35 = 1,
            WinNT40 = 2,
            WinNT50 = 3
        }
        /// <summary>
        /// 
        /// </summary>
        /// <param name="userName"></param>
        /// <param name="domainName"></param>
        /// <param name="password"></param>
        /// <returns></returns>
        public bool LogOn(string _UserName, string _DomainName, string _Password)
        {
            return ImpersonateValidUser(_UserName, _DomainName, _Password, LOGON32_LOGON_INTERACTIVE);
        }

        public bool CrossDomainLogOn(string _UserName, string _DomainName, string _Password)
        {
            return ImpersonateValidUserCrossDomain(_UserName, _DomainName, _Password);
        }

        public void Dispose()
        {
            UndoImpersonation();
        }

        [DllImport("advapi32.dll", SetLastError = true)]
        private static extern int LogonUserA(
                      string lpszUserName,
                      string lpszDomain,
                      string lpszPassword,
                      int dwLogonType,
                      int dwLogonProvider,
                      ref IntPtr phToken);

        [DllImport("advapi32.dll", CharSet = CharSet.Auto, SetLastError = true)]
        private static extern int DuplicateToken(
               IntPtr hToken,
               int impersonationLevel,
               ref IntPtr hNewToken);

        [DllImport("advapi32.dll", CharSet = CharSet.Auto, SetLastError = true)]
        private static extern bool RevertToSelf();

        [DllImport("kernel32.dll", CharSet = CharSet.Auto)]
        private static extern bool CloseHandle(
                 IntPtr handle);

        private const int LOGON32_PROVIDER_DEFAULT = 0;
        private const int LOGON32_LOGON_NEW_CREDENTIALS = 9;
        private const int LOGON32_LOGON_INTERACTIVE = 2;

        /// <summary>
        /// Does the actual impersonation.
        /// </summary>
        /// <param name="userName">The name of the user to act as.</param>
        /// <param name="domainName">The domain name of the user to act as.</param>
        /// <param name="password">The password of the user to act as.</param>
        private bool ImpersonateValidUser(string _UserName, string _Domain, string _Password, int provider)
        {
            WindowsIdentity tempWindowsIdentity;
            IntPtr token = IntPtr.Zero;
            IntPtr tokenDuplicate = IntPtr.Zero;
            int iRet = 0;
            if (RevertToSelf())
            {
                //Console.WriteLine("here 1");
                if ((iRet = LogonUserA(_UserName, _Domain, _Password,
                    provider, LOGON32_PROVIDER_DEFAULT, ref token)) != 0)
                {
                    if (DuplicateToken(token, 2, ref tokenDuplicate) != 0)
                    {
                        tempWindowsIdentity = new WindowsIdentity(tokenDuplicate);
                        ImpersonationContext = tempWindowsIdentity.Impersonate();
                        if (ImpersonationContext != null)
                        {
                            CloseHandle(token);
                            CloseHandle(tokenDuplicate);
                            return true;
                        }
                    }

                }
                //Console.WriteLine("iret " + iRet);
            }
            if (token != IntPtr.Zero)
                CloseHandle(token);
            if (tokenDuplicate != IntPtr.Zero)
                CloseHandle(tokenDuplicate);
            return false;

        }

        /// <summary>
        /// Does the actual impersonation.
        /// </summary>
        /// <param name="userName">The name of the user to act as.</param>
        /// <param name="domainName">The domain name of the user to act as.</param>
        /// <param name="password">The password of the user to act as.</param>
        private bool ImpersonateValidUserCrossDomain(string _UserName, string _Domain, string _Password)
        {
            WindowsIdentity tempWindowsIdentity;
            IntPtr token = IntPtr.Zero;
            IntPtr tokenDuplicate = IntPtr.Zero;
            int iRet = 0;
            if (RevertToSelf())
            {
                //Console.WriteLine("here 1");
                if ((iRet = LogonUserA(_UserName, _Domain, _Password,
                    (int)LogonType.NewCredentials, (int)LogonProvider.WinNT50, ref token)) != 0)
                {
                    if (DuplicateToken(token, 2, ref tokenDuplicate) != 0)
                    {
                        tempWindowsIdentity = new WindowsIdentity(tokenDuplicate);
                        ImpersonationContext = tempWindowsIdentity.Impersonate();
                        if (ImpersonationContext != null)
                        {
                            CloseHandle(token);
                            CloseHandle(tokenDuplicate);
                            return true;
                        }
                    }

                }
                //Console.WriteLine("iret " + iRet);
            }
            if (token != IntPtr.Zero)
                CloseHandle(token);
            if (tokenDuplicate != IntPtr.Zero)
                CloseHandle(tokenDuplicate);
            return false;

        }

        /// <summary>
        /// Reverts the impersonation.
        /// </summary>
        private void UndoImpersonation()
        {
            if (ImpersonationContext != null)
            {
                ImpersonationContext.Undo();
            }
        }

    }

} 
```

样品用法：

C＃

```
using (var LogOn = new Utils.dvImpersonator())
{
    LogOn.CrossDomainLogOn(this.oConfig.User, this.oConfig.Domain, this.oConfig.Password);

       //Code to Execute as other users
} 
```

您还可以拥有一个服务器端 WCF 服务，该服务具有上传方法和下载方法。然后在您的 WPF 应用程序中使用 WCF 服务，并让您的 WCF 服务器端服务在有权访问服务器的帐户下运行。

# gwt - GWT Maven 插件有没有办法生成返回 SafeHtml 的 I18N 消息接口？

> ID：14615984
> 
> 赞同：2
> 
> 时间：2013-01-30T23:43:03.877
> 
> 标签：gwt, maven, internationalization

对于 GWT 项目，如果配置 pom 以生成 I18N 消息包，则生成的接口都返回字符串。

我想知道是否有办法让一些或所有方法返回 SafeHtml 生成消息包接口。

我不确定您将如何有选择地决定哪些消息返回 String 以及哪些返回 SafeHtml（可能通过 .properties 文件中的某种标记）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-31T03:23:43.747

尽管默认绑定到一个阶段，`gwt:i18n`但 99.9% 的时间都不应该在构建期间使用。

`gwt:i18n`从现有属性文件引导接口非常好，但它无法支持 GWT I18N 的所有强大功能：非字符串常量、非字符串消息参数、复数和其他替代消息，以及`SafeHtml`.

我的建议：放弃`gwt:i18n`。

# windows-server-2008 - Windows Server 2008 - 拒绝访问文件夹。即使在管理员

> ID：14615986
> 
> 赞同：3
> 
> 时间：2013-01-30T23:43:16.967
> 
> 标签：windows-server-2008

我在 Windows 2008 Server R2 版本上创建了一个位于 C:\SharedFolder 的文件夹。我整天都能正常访问它，但现在由于某种原因我什至无法在本地打开文件夹。我以计算机管理员身份登录，计算机上没有创建其他用户名。

我尝试打开文件夹，我得到“您当前没有访问此文件夹的权限”

然后它说“单击继续永久访问此文件夹。”

我点击继续然后我得到..

您已被拒绝访问该文件夹的权限。”

然后它说“要访问此文件夹，您需要使用安全选项卡”

然后我点击安全选项卡，我得到..

文件夹的“安全”选项卡下的“您无权访问此对象权限文件夹”...

有人见过这个吗？我在这个文件夹中有我真正需要的数据。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2015-04-09T08:15:13.160

我在 Windows 2008 中经常遇到这个问题，如果获取所有权的正常途径不起作用，我通常可以通过`Shared Folder Sessions`使用`Computer Management`插件关闭任何打开来解决它。一旦任何打开的会话关闭，我就可以获得该文件夹的所有权。

关闭打开的文件夹会话（会话关闭的用户将无法访问他们打开的任何内容）

*   开始 -> 管理工具 -> 计算机管理
*   计算机管理 -> 系统工具 -> 共享文件夹 -> 会话
*   右键单击-> 关闭会话

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T19:38:01.310

这可能是因为加密的文件系统。此外，打开 WinExplorer 并使用安全/高级/所有者选项卡物理获取文件夹的所有权。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-06T19:56:27.837

原始问题的答案是，即使您使用管理员帐户本身，您也必须重置文件夹的权限。显然，这是微软在后来的补丁中明显修复的一些错误。

# cocoa - 如何定位 NSPopover

> ID：14615989
> 
> 赞同：1
> 
> 时间：2013-01-30T23:43:39.320
> 
> 标签：cocoa, nsview, nsoutlineview, nsviewcontroller, nspopover

我有一个 OSX 应用程序，它使用 NSViewController 在我的 NSView 中交换进出视图。其中一个视图是 NSOutlineView。我现在希望在用户双击大纲视图中的一行时出现 NSPopover。目前我使用[以下方法](https://stackoverflow.com/questions/11495082/nspopover-not-appearing)让弹出框出现：

```
NSRect theRect = [[NSApp keyWindow] convertRectFromScreen: NSMakeRect(700, 400, 5, 5)];
[myPopover showRelativeToRect: theRect // Window Coordinates
                        ofView: [[NSApp keyWindow] contentView]
                 preferredEdge: NSMinYEdge]; 
```

这使得 NSPopover 出现在应用程序的底部。这可行，但我希望能够让弹出框恰好出现在 NSOutlineView 的单击行下方。我换入换出的每个视图都由 NSViewController 控制，我认为我可以使用 NSViewController 的 view 属性来识别我的视图位置。但是，如果我替换`[[NSApp keyWindow] contentView]`为`myViewController.view`我收到视图没有窗口并且 NSPopover 崩溃的错误。显然，我遇到了麻烦 1）在 NSView 中找到单击行相对于主窗口的坐标 2）理解为什么我的视图没有窗口。如果有人有可以帮助我理解这些问题的建议，我将不胜感激。

更新 06/02/2013 我仍在为我的问题而苦苦挣扎，但我发现如果我通过我的 MainWindowController (myControlledView) 访问它的属性，我可以获得正确的视图坐标。然后，当我询问视图的原点和帧大小时，我得到了正确的值。我的 VC 将自定义视图加载为 NIB 文件，当我询问加载视图的来源时，我得到 (0,0)。我认为即使我将视图加载为 NIB，视图相对于窗口的位置也会保持不变？我可以将视图原点传递给我的 VC，从而正确设置 NSPopover，但这看起来相当麻烦，我认为 NIB 加载的视图原点可以通过 VC 正确访问。

```
managingViewController *vc = [viewControllers objectAtIndex:[viewIndex intValue]];
[self.currentViewController.view removeFromSuperview];
[self setCurrentViewController:vc];
[self.myControlledView addSubview:vc.view];
NSLog(@"My origin: %f %f",vc.view.frame.origin.x,vc.view.frame.origin.y); 
```

这导致`:My origin: 0.000000 0.000000`并且不是我想要的，而这：

```
NSLog(@"My origin: %f %f",self.myControlledView.frame.origin.x,self.myControlledView.frame.origin.y); 
```

结果是正确的来源：`My origin: 176.000000 38.000000`

显然，我不了解有关视图和窗口的内容。任何帮助都将不胜感激。

感谢您的建议和帮助！干杯，特隆德

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-19T16:39:58.760

当我明白自己在做什么时，这变得非常容易。事实证明，我的 currentViewController 有两个分配。一个在 IB 中分配，一个在代码中分配。当我删除 IB 创建的 VC 时，我可以与正确的代码启动视图交互，并且能够使用（跟踪）鼠标的位置定位我的 NSPopover：

```
-(void)mouseMoved:(NSEvent *)theEvent {
    NSPoint p = theEvent.locationInWindow;
    self.myMouseX=[NSNumber numberWithFloat:p.x];
    self.myMouseY=[NSNumber numberWithFloat:p.y];
} 
```

鼠标位置用于定义我的矩形坐标：

```
NSRect theRect = NSMakeRect([self.myMouseX floatValue] + 5,[self.myMouseY floatValue],1,1);

[myPopover showRelativeToRect: theRect // Window Coordinates
                       ofView: [[NSApp keyWindow] contentView]
                preferredEdge: NSMaxXEdge]; 
```

干杯，特隆德

# c - 使用 snprintf 在开头追加

> ID：14615990
> 
> 赞同：1
> 
> 时间：2013-01-30T23:43:43.480
> 
> 标签：c

我有一个用 malloc 创建的数组 u_char *，它包含一个字符串。它实际上大于字符串的长度。

我想使用 snprintf() 将另一个数组附加到此数组的开头，并存储在另一个数组中。

所以我有这样的东西

```
u_char * newstorage = (u_char *)malloc(strlen(first) + strlen(second));
snprintf(newstorage, "%s%s", first, second); 
```

无论第一还是第二的内容，这项工作是否应该起作用，或者他们是否需要有特殊的考虑（以 \0 或任何内容开始或结束）？

first 和 second 都是动态分配的 u_char 数组。

问题是最后的newstorage 似乎不包含完整的字符串，而只是它应该包含的内容的一个子集。如果第一个或第二个在字符串中间包含错误的 \0 或其他什么，会有任何问题吗？（很有可能，因为我无法控制它们）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-30T23:46:05.830

你应该分配`strlen(first) + strlen(second) + 1`.

> 如果第一个或第二个在字符串中间包含错误的 \0 或其他东西

那么它们就不是 C 字符串了，你也没有必要`strlen`在它们上面使用字符串函数。您应该使用`memcpy`而不是`snprintf`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T23:48:43.130

> 无论第一还是第二的内容，这是否都有效，还是需要特殊考虑（以 \0 或任何内容开头或结尾）？

您正在使用字符串函数，因此这些函数必须是正确的 C 字符串：即，它们必须以`'\0'`字符结尾，并且字符串中不能有任何其他 NUL。

如果这些实际上是二进制数据而不是字符串，那么您不能使用像`strlen`和这样的字符串函数`sprintf`。我想我会为这两种不同的情况写两个不同的答案。

### 字符串

如果这些是正确的以 NUL 结尾的 C 字符串，则：

1.  不要忘记为`'\0'`字符包含空格。
2.  演员表`(u_char *)`是不必要的。
3.  这甚至可以编译吗？第二个参数`snprintf`应该是要写入的字节*数。*
4.  编译器还应该抱怨传递 a`u_char *`而不是 a `char *`。

鉴于这一切，我将代码编写为：

```
size_t  size = strlen(first) + strlen(second) + 1;
u_char *str  = malloc(size);

if (str == NULL) {
    /* handle error */
}
else {
    snprintf((char *) str, size, "%s%s", first, second);
} 
```

实际上，在这种情况下，您可以选择更简单`sprintf`的，因为您知道字符串总是合适的。

```
sprintf((char *) str, "%s%s", first, second); 
```

### 二进制数据

如果这些是二进制数据，那么您不能使用像`strlen`和这样的字符串函数`sprintf`。您必须重写代码以避免它们。

没有自动方法可以确定字节数组的长度。这是您必须自己跟踪的信息。

```
size_t  firstSize  = /* ??? */; 
size_t  secondSize = /* ??? */; 
u_char *newStorage = malloc(firstSize + secondSize); 
```

`memcpy`要在 use或周围复制任意字节`memmove`。

```
if (newStorage == NULL) {
    /* handle error */
}
else {
    memcpy(newStorage,             first,  firstSize);
    memcpy(newStorage + firstSize, second, secondSize);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-30T23:47:56.490

有很多方法可以做到这一点，这是其中之一。您的问题是您没有为新分配的数组中的终止 NULL 留出空间。

以`snprintf`这种方式使用效率低下，我不确定这对您来说是否有问题。您可以同样分配一个新数组并用于`strcpy`连接您的数组。

# git - 从 Git 中删除文件夹

> ID：14615992
> 
> 赞同：6
> 
> 时间：2013-01-30T23:43:58.213
> 
> 标签：git

我有一个在 git 下的本地文件夹，当我在不同的 IDES 中玩一些 git 的东西时，它被添加到了 git 但我不希望它受 git 控制，我只是希望它是一个正常的文件夹暂时！直到我决定稍后将其添加到某个 repo 中。

我是 git 新手，所以不太了解命令，但如果我运行`git status`命令，这就是我得到的：

```
git status
# On branch master
#
# Initial commit
#
# Changes to be committed:
#   (use "git rm --cached <file>..." to unstage)
#
#   new file:   .idea/vcs.xml
#   new file:   .idea/workspace.xml
#
# Changes not staged for commit:
#   (use "git add <file>..." to update what will be committed)
#   (use "git checkout -- <file>..." to discard changes in working directory)
#
#   modified:   .idea/workspace.xml
#
# Untracked files:
#   (use "git add <file>..." to include in what will be committed)
#
#   .idea/.name
#   .idea/.rakeTasks
#   .idea/HisFirstService.iml
#   .idea/dictionaries/
#   .idea/encodings.xml
#   .idea/misc.xml
#   .idea/modules.xml
#   .idea/scopes/
#   Gemfile
#   Gemfile.lock
#   README
#   Rakefile
#   client.rb
#   config/
#   db/
#   models/
#   service.rb
#   spec/ 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-30T23:52:38.773

听起来您想删除由 IDE 自动创建的 git*存储库。*（请注意，`git`不跟踪*文件夹*，只跟踪文件。）

如果是这种情况，只需删除该`.git`目录，您将得到一个根本不被 git 跟踪的文件夹。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-30T23:48:05.787

用于`git rm --cached`从存储库中删除此目录（它应该保留在您的工作目录中），然后将其名称放入 .gitignore 文件中。最后提交 .gitignore 和目录删除。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-30T23:52:37.137

如果您正在使用终端并且有多个要从 git 中删除的文件，请执行以下操作：

```
git status | grep [d]eleted | awk '{print $3}' | xargs git rm --cache 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-30T23:54:16.480

注意 git 不存储目录；它只存储文件。这意味着如果您已将子目录中的任何文件提交到您的 git 存储库中，那么您需要使用`git rm <filename>`. 您还需要按照 给出的说明`git status`从索引中删除文件。例如，`git rm --cached <filename>`将删除新文件，这样它们就不会被提交。最后，您需要创建一个 .gitignore 文件，其中包含您不希望在存储库中包含的目录名称。这将使所有未来的 git 命令忽略它。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-30T23:50:21.180

创建一个名为 .gitignore 的文件并添加要忽略的文件夹的路径（以“/”结尾）。

完整文档：[https ://help.github.com/articles/ignoring-files](https://help.github.com/articles/ignoring-files)

# mysql - MySQL：对分析表的随机影响

> ID：14615998
> 
> 赞同：4
> 
> 时间：2013-01-30T23:44:23.293
> 
> 标签：mysql, indexing, sql-execution-plan, explain

我有 3 个`innodb`表，比如 A、B 和 C。有一个查询可以连接这三个表以生成结果。

```
SELECT A.a, B.b, C.c
from A 
join B on A.id = B.a_id 
join C on C.id = B.c_id
where A.a = 'example' and B.b < 10; 
```

一开始，当我使用“解释”命令测试查询时，它给了我以下顺序：

> B -- C -- A

然而，这不是最优的。所以我对所有表运行“分析表”，它给了我：

> A -- B -- C

，我相信这是正确的顺序。

然后我将SQL部署到生产中，1​​个月后，无缘无故的执行计划切换回了不好的选项，即B--C--A。之后，我`ANALYZE TABLE`又尝试*了几次*运行，但这一次，结果让我感到困惑。有时它也给我 B--C--A，有时它给我 A--B--C，有时甚至是其他执行计划。

所以我的问题是：

1.  为什么部署后执行计划会发生变化？
2.  除了固定执行计划（数据更新和变化很快，所以未来可能会改变最优计划），有没有办法保证最优计划总是得到保证？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-30T23:51:41.883

优化器根据有关表大小、基数、值分布、索引等的内存统计信息来选择重新排序表和使用索引。这些统计信息是*估计值*，并非在任何时候都绝对准确。

InnoDB 会不时更新其统计信息，这就是您在运行 ANALZYE TABLE 时可能导致发生的情况。

但是，在某些情况下，内存中的统计信息正处于使优化器做出不同选择的风口浪尖，因此您会看到这种翻转行为。

您可以通过在查询中指定[索引提示](http://dev.mysql.com/doc/refman/5.5/en/index-hints.html)来覆盖优化器选择索引的默认算法。

您可以通过指定来覆盖优化器对表重新排序的默认算法[`STRAIGHT_JOIN`](http://dev.mysql.com/doc/refman/5.5/en//join.html)。这意味着您希望它按照您在 FROM 子句中给它们的顺序读取表，并且不要重新排序它们。

您可以使用 STRAIGHT_JOIN 作为查询修饰符（如 DISTINCT）。把它放在 SELECT 之后：

```
SELECT STRAIGHT_JOIN A.a, B.b, C.c
from A 
join B on A.id = B.a_id 
join C on C.id = B.c_id
where A.a = 'example' and B.b < 10; 
```

但要小心不要过于随意地使用索引提示或连接提示。在数据的大小和分布发生一点点变化之后，优化器可能会在下周避免翻转行为。如果您的代码中有太多覆盖，您可能会阻止优化器做得更好！