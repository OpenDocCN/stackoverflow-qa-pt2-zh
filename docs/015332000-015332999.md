# StackOverflow 问答 15332000-15332999

# heroku - 为假人添加 Heroku 合作者？

> ID：15332000
> 
> 赞同：1
> 
> 时间：2013-03-11T05:49:38.480
> 
> 标签：heroku

我正在为一个客户开发一个应用程序，我们一起同意尝试 Heroku，尽管我们都没有任何经验。客户将处于控制之中，并将我添加为合作者。[https://devcenter.heroku.com/articles/sharing](https://devcenter.heroku.com/articles/sharing)上的说明看起来很简单......除了它们似乎不起作用。

我开了一个账户，客户也做了。客户端运行以下内容：

```
heroku apps:create appname
heroku sharing:add myemail@gmail -app appname 
```

客户说这两个操作都报告成功，但我还没有收到邀请我在应用程序上进行协作的电子邮件。在添加合作者之前，大概需要一些额外的步骤才能让事情顺利进行？

谁能解释我们还需要做什么？或者，我知道可以转移应用程序的所有权，我创建它然后将所有权转移给客户会更容易吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T08:35:22.013

您可以验证是否从 heroku.com 上的 Web UI 添加了协作者 - 转到“我的应用程序”页面，找到该应用程序并单击协作者图标，您应该会看到列出的新协作者。也可以直接从此页面邀请人。

我们典型的工作流程是在我们帐户中的应用程序中为客户构建网站，然后将应用程序的所有权转移给客户进行 golive，以便他们负责计费等。

为了能够转移帐户，您要转移到的人需要是应用程序的合作者。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T15:31:59.507

我们发现了问题。在 add collaborator 命令中，我们需要在 app 前面再添加一个破折号；它应该是：

```
heroku sharing:add myemail@gmail --app appname 
```

# php - 在 MYSQL PHP 中获取与 GROUP_CONCAT 相关的数据

> ID：15332014
> 
> 赞同：0
> 
> 时间：2013-03-11T05:50:51.230
> 
> 标签：php, mysql

## 表格1

![表格1](../Images/ccc0d7cfe94c66b0aaecd1af102d637e.png)

## 表 2

![表2](../Images/820843cdeea3edbde0896d4b6bce7fa0.png)

这是我通过使用此查询获得的那两个表的结果：

```
SELECT t1.*, GROUP_CONCAT(t2.content_id) 
FROM news_categories t1 
LEFT JOIN news_content t2 
    ON t2.cat_ids = t1.cat_id 
GROUP BY t1.cat_id 
```

## 结果生成

![结果](../Images/2e5e4425ca71bbbac0f73f8f8b2b7ddc.png)

如何从`GROUP_CONCAT(t2.content_id)`与 相关的结果（表）中获取表 2 中的信息`content_id`？

并使用 PHP 从 table2 中检索这些数据

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T08:34:34.470

好吧，你在这里有一个一对多的关系。这意味着 table1 中的一行可以与 table2 中的 0-n 行相关。

如果您按 table1 的主键分组，则将结果限制为表一中每一行的一个结果行，方法是使用`GROUP_CONCAT(table2_col)`默认情况下为逗号的分隔符连接 table2_column 的所有匹配行。

使用以下查询：

```
SELECT
     t1.*, 
     GROUP_CONCAT(t2.content_id) AS content_ids,
     GROUP_CONCAT(t2.title) AS content_titles
FROM 
    news_categories t1 
        LEFT JOIN news_content t2 ON t2.cat_ids = t1.cat_id 
GROUP BY t1.cat_id 
```

或者

```
SELECT
     t1.*, 
     t2.*
FROM 
    news_categories t1 
        LEFT JOIN news_content t2 ON t2.cat_ids = t1.cat_id 
```

我建议写出你想要的列，而不是使用 .*

**编辑**

要分离 php 中的连接值，请查看[explode](http://php.net/manual/de/function.explode.php)

你像往常一样获取数据，例如

```
$result = mysqli_query( $query );
while ( $row = mysqli_fetch_assoc( $result ) ) {
    print_r( $row );
} 
```

看看[这个例子](http://www.php.net/manual/mysqli-result.fetch-assoc.php)

# mediaelement.js - mediaelement.js - 使用典型的 wordpress 短代码 [audio src=""] 没有显示音量控制

> ID：15332018
> 
> 赞同：1
> 
> 时间：2013-03-11T05:51:01.880
> 
> 标签：mediaelement.js

**`mediaelement.js`**- 是否有用于音量控制的 wordpress 插件简码选项？我的图形显示没有音量控制。[**mediaelement**](http://mediaelement.com/)上的示例图形显示了一个有效的音量控制。

我的典型简码是：**`[audio src="url"]`**

我试过了**`[audio src="url" volume="true"]`**- 但是，仍然没有音量控制。

Firefox 和 IE 的问题是一样的。

# google-chrome - 在 chrome web 检查器中自动更新 websocket 框架

> ID：15332020
> 
> 赞同：3
> 
> 时间：2013-03-11T05:51:13.673
> 
> 标签：google-chrome, websocket

当我在 Google Chrome Web Inspector 中检查 Web 套接字时（请参阅[Chrome Web Inspector Web Socket 调试](https://stackoverflow.com/questions/8952773/chrome-web-inspector-web-socket-debugging)），我必须不断单击左侧的套接字以刷新右侧的消息。

有什么方法可以在每次发送/接收新消息时自动刷新？还是这根本还没有开发？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-11T13:14:43.923

不幸的是，即使在开发频道（atm）中仍然是这种情况，`v27`并且查看 Chromium bugtracker 似乎也没有计划。

[相关问题在这里](https://code.google.com/p/chromium/issues/detail?id=142280&q=websocket%20refresh&colspec=ID%20Pri%20M%20ReleaseBlock%20Cr%20Status%20Owner%20Summary)

你可以投票，但我不能说这是否真的能完成任何事情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-01T22:39:40.407

我已经用最新的 Chrome (32.0.1700) 进行了测试，它们仍然不支持自动更新 WebSocket 帧。但是，您可以使用 Fiddler（使用 FiddlerScript）以与检查 HTTP 流量相同的方式检查 WebSocket 流量，并且它支持帧的自动刷新。

![检查 WebSocket 流量](../Images/aad1a038f3adaf15f55feaec7e80d4a9.png)

请参阅 CodeProject 上的文章，该文章向您展示如何使用 Fiddler（使用 FiddlerScript）调试/检查 WebSocket 流量。[http://www.codeproject.com/Articles/718660/Debug-Inspect-WebSocket-traffic-with-Fiddler](http://www.codeproject.com/Articles/718660/Debug-Inspect-WebSocket-traffic-with-Fiddler)

# ios - 是否可以在 Xcode 中的 iOS 上运行 perl？

> ID：15332021
> 
> 赞同：1
> 
> 时间：2013-03-11T05:51:14.093
> 
> 标签：ios, xcode, perl

是否可以在 Xcode 特别是 iOS 中运行 perl 脚本？如果是这样，怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T05:57:33.260

不，iOS 使用 Objective C。2010 年，Apple 取消了这一限制，允许其他语言，如基于 .NET 的东西（C# 等），但恐怕 Perl 并未捆绑到开发工具包中。

# php - 想要对此进行更详细的描述：基本路径解决方案

> ID：15332025
> 
> 赞同：1
> 
> 时间：2013-03-11T05:51:28.710
> 
> 标签：php, apache, .htaccess, zend-framework

下面的代码来自 zf 命令自动生成的 .htaccess 文件。给出了描述，但对我来说它反弹了。

```
# The following rewrites all other queries to index.php. The 
# condition ensures that if you are using Apache aliases to do
# mass virtual hosting, the base path will be prepended to 
# allow proper resolution of the index.php file; it will work
# in non-aliased environments as well, providing a safe, one-size 
# fits all solution.

    RewriteCond %{REQUEST_URI}::$1 ^(/.+)(.+)::$
    RewriteRule ^(.*)$ - [E=BASE:%1]
    RewriteRule ^(.*)$ %{ENV:BASE}index.php [NC,L] 
```

当我们在共享主机上有一个 zend 项目并想要解析路径时，它是否与解决方案有关`index.php`？请解释。

# ruby - 撬：whereami 命令的别名

> ID：15332034
> 
> 赞同：2
> 
> 时间：2013-03-11T05:51:49.897
> 
> 标签：ruby, configuration, alias, pry

`whereami`Pry中的命令有简写吗？

如果没有，有没有办法在配置中为 Pry 命令定义别名`.pryrc`？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-11T05:59:34.583

找不到任何内置的速记，但添加它`~/.pryrc`似乎可以解决问题：

```
Pry.config.commands.alias_command "@", "whereami" 
```

[有关Prys 的 Pry rc Wiki 页面的](https://github.com/pry/pry/wiki/Pry-rc)更多信息

# c++ - 打印 boost 属性树生成的 xml

> ID：15332035
> 
> 赞同：5
> 
> 时间：2013-03-11T05:51:51.997
> 
> 标签：c++, boost, boost-propertytree

我进行了测试`boost::property_tree`，结果很好：我可以加载 XML、提取元素、保存 XML 等。但是，是否可以生成 XML 并打印它？我不想保存它。

```
void debug_settings::load(const std::string &filename) {
    using boost::property_tree::ptree;
    ptree pt;
    read_xml(filename, pt);
    m_file = pt.get<std::string>("debug.filename");
    m_level = pt.get("debug.level", 0);
    BOOST_FOREACH(ptree::value_type &v, pt.get_child("debug.modules"))m_modules.insert(v.second.data());

}

void debug_settings::save(const std::string &filename) {
    using boost::property_tree::ptree;
    ptree pt;
    pt.put("debug.filename", m_file);
    pt.put("debug.level", m_level);
    BOOST_FOREACH(const std::string &name, m_modules)pt.add("debug.modules.module", name);
    write_xml(filename, pt);

} 
```

这是我用来加载和保存 XML 的函数。我们有什么方法可以显示它吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-11T06:04:40.997

使用以下版本的函数

```
template<typename Ptree> 
  void write_xml
  (
     std::basic_ostream< typename Ptree::key_type::value_type > & stream, 
     const Ptree & pt, 
     const xml_writer_settings< typename Ptree::key_type::value_type > & settings = 
     xml_writer_settings< typename Ptree::key_type::value_type >()
  ); 
```

[http://www.boost.org/doc/libs/1_52_0/doc/html/boost/property_tree/xml_parser/write_xml_id1233444.html](http://www.boost.org/doc/libs/1_52_0/doc/html/boost/property_tree/xml_parser/write_xml_id1233444.html)

```
write_xml(std::cout, pt); 
```

用于控制台中的输出

```
std::ostringstream oss;
write_xml(oss, pt); 
```

用于输出`stringstream`（您可以`stringstream`使用`str`的功能在控制台中输出内容`stringstream`）。

[http://liveworkspace.org/code/4qV9om](http://liveworkspace.org/code/4qV9om) 4 美元

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T06:00:08.990

您可以使用任何类型的输出流，因此 std::cout 可以很好地将您的 XML 打印到当前控制台。

# html - iframe 不会是绝对位置

> ID：15332036
> 
> 赞同：8
> 
> 时间：2013-03-11T05:52:16.953
> 
> 标签：html, css, iframe

是否可以绝对定位 iframe？我可以定位顶部和左侧，但不能定位底部和右侧。我需要做所有4个方面。

### HTML

```
<iframe src="http://apple.com/" id="myframe"></iframe> 
```

### CSS

```
#myframe {
  position: absolute;
  top: 40px;
  left: 40px;
  right: 40px;
  bottom: 40px;
} 
```

看看我的[小提琴](http://jsfiddle.net/bTrfD/)

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-11T06:07:55.633

这只是一个想法，我`<iframe>`用一个包裹我`<div>`，看这里： [jsfiddle.net/bTrfD/1/](http://jsfiddle.net/bTrfD/1/)

```
<div>
  <iframe src="http://apple.com/" id="myframe"></iframe>
</div> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-11T06:02:31.540

它是一种黑客攻击，未经测试，但请尝试

```
#myframe {
  position:absolute;
  top:40px;
  left:40px;
  width:100%;
} 
```

然后在父元素上添加**“padding-bottom: 40px; padding-right: 40px”**

编辑

CSS 测试

```
div{
    padding:40px;
    position:absolute;
    top:0px;
    bottom:0px;
    left:0px;
    right:0px;
}
iframe{
    height:100%;
    width:100%;
} 
```

html

```
<div><iframe></iframe></div> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-11T06:08:01.527

让我们用 css 样式来做吧

演示：http: [//jsfiddle.net/krish/bTrfD/2/](http://jsfiddle.net/krish/bTrfD/2/)

```
 width:270px;
    height:150px;
    position:absolute;
    left:50%;
    top:50%;
    margin:-75px 0 0 -135px; 
```

# c++ - 为什么这个 const 成员函数会修改静态成员数据？

> ID：15332037
> 
> 赞同：2
> 
> 时间：2013-03-11T05:52:24.280
> 
> 标签：c++, constants

我有以下来自 C++ 中 Eckel-Thining 的代码行

```
Class Obj{
    static int i,j;
    public:
    void f() const {cout<<i++<<endl;}
    void f() const {cout<<i++<<endl;}
};
int Obj::i=47;
int Obj::j=11; 
```

现在它是用 Ecekl 为 const 成员函数编写的，通过声明一个成员函数 const ，我们告诉编译器不要修改类数据。我知道在某些特定情况下，例如 mutable const 并通过显式丢弃 this 指针的 constness ，我们可以取消它，但这里两者都没有发生，并且 i++ 和 j++ 工作正常。为什么会这样？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-11T05:53:37.813

`const`仅针对对象（`this`指针为`const`），`static members`允许修改。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-11T06:01:20.807

> 在 const 成员函数中，调用函数的对象是通过 const 访问路径访问的；因此，const 成员函数不得修改对象及其非静态数据成员。

来源：[有人引用 c++ 标准](https://stackoverflow.com/questions/4187746/const-method-accessing-static-variables)

如您所见，静态数据成员不受`const`c++ 标准的保护。

# javascript - 尝试在 REST 中使用 javascript

> ID：15332039
> 
> 赞同：0
> 
> 时间：2013-03-11T05:52:56.003
> 
> 标签：javascript, json, web-services

没有什么比 Web 开发更让我感到沮丧的了，幸运的是我不经常这样做，这里有一个例子。`alert("2")`以下代码在 DreamWeaver Live View 中运行良好，在 Chrome 上停止（警报 3 从未出现，输出中也没有任何内容）并且在 Internet Explorer 中根本不起作用，是否有任何理由？

```
<script type="text/javascript">
    function getStuff() {
        var url = "http://url/to/restful/api";              

        alert("1");     
        var client = new XMLHttpRequest();              
        client.open("GET", url, false);

        client.setRequestHeader("Content-Type", "application/json");
        alert("2")

        client.send();  
        alert("3")              

        document.getElementById("output").value = client.responseText; 
    }    
</script> 
```

这被称为：

```
<button onClick="getStuff()">GET</button> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T06:10:37.877

尝试以下代码：请通过此链接[http://en.wikipedia.org/wiki/XMLHttpRequest](http://en.wikipedia.org/wiki/XMLHttpRequest)

```
<script type="text/javascript">
    function getStuff() {
        var url = "http://url/to/restful/api";              

        alert("1");     
        var client = getXMLHttpRequestObject();              
        client.open("GET", url, false);

        client.onreadystatechange = function() {
          if(client.readyState == 4){
                  document.getElementById("output").value = client.responseText;
            }
        };

        client.setRequestHeader("Content-Type", "application/json");
        alert("2")

        client.send();  
        alert("3")              

    }    

function getXMLHttpRequestObject() {
    var ref = null;
    if (window.XMLHttpRequest) {
        ref = new XMLHttpRequest();
    } else if (window.ActiveXObject) { // Older IE.
        ref = new ActiveXObject("MSXML2.XMLHTTP.3.0");
    }
    return ref;
}
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T06:17:47.707

附带说明

> `client.open("GET", url, false);`

使用 ajax 使用同步连接是个坏主意。它会冻结你的 UI 代码。

这就是为什么永远不会调用 alert(3) 的原因。当您执行 xhr.send() 时，线程停止并等待来自服务器的响应。

理想的方法是`client.open("GET", url, true);`

# node.js - 带有nodejs的mongodb（npm mongodb）

> ID：15332042
> 
> 赞同：0
> 
> 时间：2013-03-11T05:53:26.717
> 
> 标签：node.js, mongodb

在我的应用程序中，我必须使用 nodejs(npm mongodb) 将数据存储到 mongodb。我已经安装了 mongodb 、 nodejs 和 npm mongodb 但这里的问题是我将它们安装在单独的文件夹中。我无法正确组织目录结构，这就是我遇到错误的方式。如果您告诉我文件夹结构，它将对我有很大帮助。

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-11T09:13:27.040

试试 mongoose - `npm install mongoose`，mongoose 是 mongodb 的 ODM。API 文档 - [http://mongoosejs.com/](http://mongoosejs.com/)

官方文档中的简短示例：

```
var mongoose = require('mongoose');
mongoose.connect('localhost', 'test');

var schema = mongoose.Schema({ name: 'string' });
var Cat = mongoose.model('Cat', schema);

var kitty = new Cat({ name: 'Zildjian' });
kitty.save(function (err) {
  if (err) // ...
  console.log('meow');
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-04-02T13:28:15.190

在您的应用程序目录中运行`npm install mongodb`命令。例如，nodejsapp 文件夹就是应用程序目录。目录内的文件夹结构将如下所示：

```
    节点应用程序
    ├──────────── node_modules <--使用npm安装的所有node模块都在这里--> 
    | ├──────────── .bin
    | ├──────────── 快递
    | └──────────── mongodb
    ├──────────── app         <-- 保存我们所有的节点组件文件（模型、路由）-->  
    ├──────────── config      <-- 我们所有的配置will be here --> 
    ├─────────── public      <-- 保存我们前端应用程序的所有文件 --> 
    ├─────────── server.js   <-- 节点配置-->

```

`node_modules`当您在应用程序目录中使用`npm`命令 时，将创建该文件夹。
这是为项目组织节点包的更好方法。

# java - Tomcat 服务器中的应用程序部署失败

> ID：15332043
> 
> 赞同：0
> 
> 时间：2013-03-11T05:53:27.603
> 
> 标签：java, tomcat, netbeans

当我尝试使用 tomcat 服务器在 netbeans 中运行我的 war 文件时，出现此错误。

```
Tomcat server started.
In-place deployment at C:\Users\saeed\Documents\NetBeansProjects\GomrokProject\PoliceSmsCenter\target\PoliceSmsCenter-2.0-SNAPSHOT deploy?config=file%3A%2FC%3A%2FUsers%2Fsaeed%2FAppData%2FLocal%2FTemp%2Fcontext6847039033559451727.xml&path=/PoliceSmsCenter<br> http://localhost:8084/manager/text/deploy?config=file%3A%2FC%3A%2FUsers%2Fsaeed%2FAppData%2FLocal%2FTemp%2Fcontext6847039033559451727.xml&path=/PoliceSmsCenter"<br> The module has not been deployed.<br> See the server log for details.
at org.netbeans.modules.j2ee.deployment.devmodules.api.Deployment.deploy(Deployment.java:210)
at org.netbeans.modules.maven.j2ee.ExecutionChecker.performDeploy(ExecutionChecker.java:179)
at org.netbeans.modules.maven.j2ee.ExecutionChecker.executionResult(ExecutionChecker.java:131)
at org.netbeans.modules.maven.execute.MavenCommandLineExecutor.run(MavenCommandLineExecutor.java:211)
at org.netbeans.core.execution.RunClassThread.run(RunClassThread.java:153) 
```

可能是什么原因？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T06:01:09.037

尝试在您的 pom 文件中包含以下依赖项。用于`<scope>provided</scope>`指示您需要编译该工件，但不要在您的战争中使用它。

```
<dependency>
    <groupId>javax</groupId>
    <artifactId>javaee-api</artifactId>
    <version>6.0</version>
    <scope>provided</scope>
</dependency> 
```

# php - Yii 框架扩展

> ID：15332046
> 
> 赞同：3
> 
> 时间：2013-03-11T05:53:54.450
> 
> 标签：php, yii, yii-extensions

我目前正在尝试使用 YII 框架扩展。但是，我遇到了一些问题。

我已按照此网站中的分步程序进行操作：[https ://github.com/drumaddict/skydrive-api-yii](https://github.com/drumaddict/skydrive-api-yii)

但是，当我打电话时

```
Yii::import('protected.extensions.skydrive.SkyDriveAPI'); 
```

在 php.ini 中。

它给了我 `Uncaught exception 'CException' with message 'Alias "protected.extensions.skydrive.SkyDriveAPI" is invalid.`

我是 Yii 框架的新手，需要一些帮助。任何人都可以给我一些指示。

谢谢，陈耀

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-11T08:38:56.297

如果您的扩展被放置在`protected/extensions`just use 中：

```
Yii::import('ext.skydrive.SkyDriveAPI'); 
```

这与以下内容相同：

```
Yii::import('application.extensions.skydrive.SkyDriveAPI'); 
```

# javascript - JavaScript 缓存具有多个参数的函数的返回值

> ID：15332049
> 
> 赞同：2
> 
> 时间：2013-03-11T05:54:25.287
> 
> 标签：javascript, caching

我正在浏览[John Resig 关于高级 JavaScript 的片段](http://ejohn.org/apps/learn/)。在[#19](http://ejohn.org/apps/learn/#19)中，他提到了一种缓存函数返回值的方法。缓存具有多个参数的函数的返回值的最佳方法是什么？

必须有一种比对接收到的参数进行字符串化并将其用作缓存对象的键更好的方法：

```
function $$(selector, el) {
    var cacheKey = JSON.stringify(arguments);
    if ($$.cache[cacheKey]) return $$.cache[cacheKey];

    return ($$.cache[cacheKey] = NodeListToArray( (el || document).querySelectorAll(s) ));
}
$$.cache = {}; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T06:20:24.333

您可以使用可以对对象进行操作的自定义哈希函数。但是哈希函数会导致冲突，并且需要比您的简单示例更多的代码。

或者您可以将缓存设为 n 维，其中 n 是参数的数量。所以本质上是这样的：

```
function $$(selector, el) {
    if ($$.cache[selector] && $$.cache[selector][el])
        return $$.cache[cacheKey][el];
    // etc. 
```

假设选择器和 el 都可以用作对象键。您可能需要以另一种方式对它们进行字符串化。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T06:23:01.663

只考虑一个数组元素，

JSON（JavaScript Object Notation）适用于通用平台，因此为了方便使用，您必须创建一个函数供您使用，

这`$$.cache[0]`是您阅读后的简单方法`cachekey`，

如果我们让事情变得更简单，我们以后可能会遇到安全问题。

我希望这能满足你的要求:)

# python - 如何检查 memcached 是否正在运行，如果不是从 python 启动它？

> ID：15332051
> 
> 赞同：4
> 
> 时间：2013-03-11T05:54:25.713
> 
> 标签：python, memcached

我正在使用 python 和 memcached 开发一个 Web 应用程序。

首先，我想从我的 python 程序启动 memcached，如果我是对的，我`subprocess.Popen(["memcached"]);`会这样做。真正困扰我的是如何检查 memcached 是否已经在后台运行。

我想要类似的东西

```
if check_memcached():
    start_memcached(); 
```

`check_memcached()`如果 memcached 尚未运行，则该函数应返回 true。有人知道怎么做吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-11T06:15:23.583

检查的最佳方法可能取决于您的平台。以下是您可以尝试的一些方法：

*   尝试连接到 memcached 服务器。如果连接失败，则假定服务器未运行。
*   如果您希望 memcached 在本地运行，请查找 PID 文件。在 Debian 上，它通常位于`/var/run/memcached.pid`并包含正在运行的 memcached 守护程序的进程 ID。为了更加确定您可以读取文件中包含的 PID，并验证具有此 PID 的进程是否仍在运行。
*   使用该`subprocess`模块运行可以直接检查本地运行的守护进程的命令。例如。`pidof memcached`使用运行命令`subprocess`并检查返回码。

# c++ - 如何使用参数化构造函数动态分配对象数组？

> ID：15332053
> 
> 赞同：4
> 
> 时间：2013-03-11T05:54:35.867
> 
> 标签：c++, dynamic-allocation

考虑一个简单的类：

```
class SimpleClass {
    int a;
public:
    SimpleClass():a(0){}
    SimpleClass(int n):a(n){}
    // other functions
};

SimpleClass *p1, *p2;

p1 = new SimpleClass[5];

p2 = new SimpleClass(3); 
```

在这种情况下，`SimpleClass()`调用默认构造函数来构造 p1 的新分配对象和 p2 的参数化构造函数。我的问题是：是否可以分配一个数组并使用 new 运算符使用参数化构造函数？例如，如果我希望使用变量`a`值分别为 10、12、15、... 的对象初始化数组，是否可以在使用 new 运算符时传递这些值？

我知道使用 stl vector 是处理对象数组的更好主意。我想知道是否可以使用 new 来分配数组。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-11T06:08:09.897

您可以将*placement-new*用作：

```
typedef std::aligned_storage<sizeof(SimpleClass), 
                             std::alignment_of<SimpleClass>::value
                             >::type storage_type;

//first get the aligned uninitialized memory!
SimpleClass *p1 = reinterpret_cast<SimpleClass*>(new storage_type[N]);

//then use placement new to construct the objects
for(size_t i = 0; i < N ; i++)
     new (p1+i) SimpleClass(i * 10); 
```

在此示例中，我将传递`(i * 10)`给`SampleClass`.

*   [在线演示](http://stacked-crooked.com/view?id=6d1b2eff3a96196f092536faa040a243-18aa934a8d82d638dde2147aa94cac94)

希望有帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T06:00:26.563

这是一种方法，但它并不完全是您通过 new SimpleClass[5] 实现的，因为它创建了一个指针数组而不是值数组：

```
SimpleClass *p[] = {
    new SimpleClass(10), 
    new SimpleClass(12), 
    new SimpleClass(15)
}; 
```

为了实现你想要的，我推荐类似于这样的代码：

```
SimpleClass *p2 = new SimpleClass[3];
SimpleClass *pp = p2;
*pp = 10;
*++pp = 12;
*++pp = 15; 
```

这并不理想，因为它会在堆栈上创建临时对象并调用赋值运算符，但从代码的角度来看它看起来很干净。这里稍微牺牲了一点性能。

# android - 如何擦除画布上绘制的线条？

> ID：15332062
> 
> 赞同：2
> 
> 时间：2013-03-11T05:55:47.630
> 
> 标签：android, canvas, draw, erase

我正在使用一个`Canvas`类在画布上画线。现在我想擦除画布上绘制的线条，就像我们在笔记本中使用橡皮擦一样。我经历了几个例子，但没有什么对我有用。

如果有人知道这个问题的解决方案，请你能帮我解决这个问题吗？

**Java 代码：**

```
public class DrawView extends View implements OnTouchListener 
{
        private Canvas      m_Canvas;

        private Path        m_Path;

        private Paint       m_Paint;

        ArrayList<Pair<Path, Paint>> paths = new ArrayList<Pair<Path, Paint>>();

        ArrayList<Pair<Path, Paint>> undonePaths = new ArrayList<Pair<Path, Paint>>(); 

        private float mX, mY;

        private static final float TOUCH_TOLERANCE = 4;

        private Bitmap          bitmapToCanvas;

        private CanvasManager   m_CanvasManagerObject;

        private Paint   mBitmapPaint;

        public DrawView(Context context)
        {
            super(context);
            setFocusable(true);
            setFocusableInTouchMode(true);      
            this.setOnTouchListener(this);

            onCanvasInitialization();
        }    

        public void onCanvasInitialization()
        {
            m_Paint = new Paint(Paint.DITHER_FLAG);
            m_Paint.setAntiAlias(true);
            m_Paint.setDither(true);
            m_Paint.setColor(Color.parseColor("#37A1D1"));
            m_Paint.setStyle(Paint.Style.STROKE);
            m_Paint.setStrokeJoin(Paint.Join.ROUND);
            m_Paint.setStrokeCap(Paint.Cap.ROUND);
            m_Paint.setStrokeWidth(2);                          
            m_Path = new Path();

            mBitmapPaint = new Paint(Paint.DITHER_FLAG);
        }

        @Override
        protected void onSizeChanged(int w, int h, int oldw, int oldh) 
        {       
            super.onSizeChanged(w, h, oldw, oldh);

            bitmapToCanvas = Bitmap.createBitmap(w, h, Bitmap.Config.ARGB_8888);
            m_Canvas = new Canvas(bitmapToCanvas);
        }

        @Override
        protected void onDraw(Canvas canvas)
        {           
            canvas.drawBitmap(bitmapToCanvas, 0f, 0f, mBitmapPaint);    
            canvas.drawPath(m_Path, m_Paint);
        }

        public boolean onTouch(View arg0, MotionEvent event) 
        {
            float x = event.getX();
            float y = event.getY();

            switch (event.getAction()) 
            {
                case MotionEvent.ACTION_DOWN:
                touch_start(x, y);
                invalidate();
                break;
                case MotionEvent.ACTION_MOVE:
                touch_move(x, y);
                invalidate();
                break;
                case MotionEvent.ACTION_UP:
                touch_up();
                invalidate();
                break;
            }

            return true;
        }

        private void touch_start(float x, float y) 
        {
            m_Path.reset();
            m_Path.moveTo(x, y);
            mX = x;
            mY = y;
        }

        private void touch_move(float x, float y) 
        {
            float dx = Math.abs(x - mX);
            float dy = Math.abs(y - mY);
            if (dx >= TOUCH_TOLERANCE || dy >= TOUCH_TOLERANCE) 
            {
                m_Path.quadTo(mX, mY, (x + mX)/2, (y + mY)/2);
                mX = x;
                mY = y;
            }
        }

        private void touch_up() 
        {
            m_Path.lineTo(mX, mY);

            // commit the path to our offscreen
            m_Canvas.drawPath(m_Path, m_Paint);

            // kill this so we don't double draw                    
            Paint newPaint = new Paint(m_Paint); // Clones the mPaint object
            paths.add(new Pair<Path, Paint>(m_Path, newPaint));
            m_Path = new Path();
        }

        public void onClickEraser() 
        { 

        }

} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2014-03-06T22:23:07.350

如果您有纯色背景，您需要做的就是将`Paint`颜色设置为背景颜色。例如，如果您有白色背景，您可以执行以下操作：

```
paint.setColor(Color.White); 
```

但是，如果您需要擦除具有透明背景的线条，请尝试以下操作：

为了使用透明颜色进行绘制，您必须使用`Paint` `setXfermode`它仅在您为画布设置位图时才有效。如果您按照以下步骤操作，您应该会得到想要的结果。

1.  创建一个画布并设置它的位图。

    ```
    mCanvas = new Canvas();
    mBitmap= Bitmap.createBitmap(scrw, scrh, Config.ARGB_8888);
    mCanvas.setBitmap(mBitmap); 
    ```

2.  当你想擦除某些东西时，你只需要使用 setXfermode。

    ```
    public void onClickEraser() 
    { 
       if (isEraserOn)
          mPaint.setXfermode(new PorterDuffXfermode(PorterDuff.Mode.CLEAR));
       else
          mPaint.setXfermode(null);
    } 
    ```

3.  现在你应该可以使用透明颜色绘制：

    `mCanvas.drawPath(path, mPaint);`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-02-11T01:21:44.793

使用后，与 Daniel Albert 的答案相当：

```
public void onClickEraser() 
{ 
   if (isEraserOn)
      mPaint.setXfermode(new PorterDuffXfermode(PorterDuff.Mode.CLEAR));
   else
      mPaint.setXfermode(null);
} 
```

…你应该在你的`touch_move`方法上提交每一幅画，以避免坚实的路径。`drawpath`如果也禁用`isErase = true`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-11T06:01:55.003

为了擦除，除了画笔颜色之外，您还需要设置背景颜色。请想象您正在使用 mspaint，橡皮擦本身正在画布上“绘制”背景颜色。

如果您的背景是 000，那么 delbrush 可能就像

```
delPaint = new Paint();
delPaint.setColor(0x00000000);
delPaint.setXfermode(clear);
delPaint.setAlpha(0x00);
delPaint.setAntiAlias(true);
delPaint.setDither(true);
delPaint.setStyle(Paint.Style.STROKE);
delPaint.setStrokeJoin(Paint.Join.ROUND);
delPaint.setStrokeCap(Paint.Cap.ROUND); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-02-28T09:55:00.737

```
 relativeLayout = (RelativeLayout) findViewById(R.id.relativelayout1);

    button = (Button)findViewById(R.id.button);
    view = new SketchSheetView(slate.this);
    paint = new Paint();
    path2 = new Path();

    relativeLayout.addView(view, new RelativeLayout.LayoutParams(
    RelativeLayout.LayoutParams.MATCH_PARENT,
    RelativeLayout.LayoutParams.MATCH_PARENT));

    paint.setDither(true);

    paint.setColor(Color.BLACK);

    paint.setStyle(Paint.Style.STROKE);

    paint.setStrokeJoin(Paint.Join.ROUND);

    paint.setStrokeCap(Paint.Cap.ROUND);

    paint.setStrokeWidth(5);

    button.setOnClickListener(new View.OnClickListener() {
        @Override
        public void onClick(View v) {
            path2.reset();
            relativeLayout.removeAllViewsInLayout();
            view = new SketchSheetView(slate.this);
            relativeLayout.addView(view, new RelativeLayout.LayoutParams(
                    RelativeLayout.LayoutParams.MATCH_PARENT,
                    RelativeLayout.LayoutParams.MATCH_PARENT));
        }
    });
}

private class SketchSheetView extends View {
    public SketchSheetView(slate slate) {
        super(slate);
        bitmap = Bitmap.createBitmap(820, 480, Bitmap.Config.ARGB_4444);

        canvas = new Canvas(bitmap);

        this.setBackgroundColor(Color.WHITE);
    }
    ArrayList<DrawingClass> DrawingClassArrayList= new ArrayList<DrawingClass>();

    @Override
    public boolean onTouchEvent(MotionEvent event) {

        DrawingClass pathWithPaint = new DrawingClass();

        canvas.drawPath(path2, paint);

        if (event.getAction() == MotionEvent.ACTION_DOWN) {

            path2.moveTo(event.getX(), event.getY());

            path2.lineTo(event.getX(), event.getY());
        }
        else if (event.getAction() == MotionEvent.ACTION_MOVE) {

            path2.lineTo(event.getX(), event.getY());

            pathWithPaint.setPath(path2);

            pathWithPaint.setPaint(paint);

            DrawingClassArrayList.add(pathWithPaint);

        }

        invalidate();
        return true;
    }

    @Override
    protected void onDraw(Canvas canvas) {
        super.onDraw(canvas);
        if (DrawingClassArrayList.size() > 0) {

            canvas.drawPath(
                    DrawingClassArrayList.get(DrawingClassArrayList.size() - 1).getPath(),

                    DrawingClassArrayList.get(DrawingClassArrayList.size() - 1).getPaint());
        }
    }
}

public class DrawingClass {

    Path DrawingClassPath;
    Paint DrawingClassPaint;

    public Path getPath() {
        return DrawingClassPath;
    }

    public void setPath(Path path) {
        this.DrawingClassPath = path;
    }

    public Paint getPaint() {
        return DrawingClassPaint;
    }

    public void setPaint(Paint paint) {
        this.DrawingClassPaint = paint;
    }
} 
```

# sql - SQLselect count with case/when

> ID：15332063
> 
> 赞同：1
> 
> 时间：2013-03-11T05:55:54.537
> 
> 标签：sql, sas, proc-sql

我有下表：

```
Id  Type 
1   A
2   B
3   C
4   A 
```

我想创建一个新表来计算每种类型的行数。为每种类型计数创建每个表很容易，但我想让它的外观和性能更好，所以可以在一个查询中做到这一点吗？我想出了一个像下面这样的查询，但它不起作用。该错误表示“WHEN 子句 2 的结果与前面的结果的数据类型不同”。帮助表示赞赏，并提前感谢。

```
PROC SQL;
   CREATE TABLE WORK.Statistics_Count AS
   SELECT 
      COUNT(Id) as total,
      COUNT(CASE WHEN Type = "A" then Id else . end) as typeA,
      COUNT(CASE WHEN Type = "B" then Id else . end) as typeB,
      COUNT(CASE WHEN Type = "C" then Id else . end) as typeC,
      COUNT(CASE WHEN Type <> "A" then Id else . end) as nonTypeA
   FROM WORK.ListTable;
QUIT; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T14:58:57.413

SAS 解决方案是不要将 PROC SQL 用于这样的事情。SQL 总是会有点慢或更难/更混乱的异常编码（没有 NotTypeA 这会更容易）。在 SAS 中，PROC TABULATE 和 PROC FORMAT 将在之后通过快速转置轻松地为您提供。更多的代码，但更灵活。

```
data have;
input Id Type  $;
datalines;
1  A
2  B
3  C
4  A
;;;;
run;

proc format lib=work;
value $typeF (multilabel notsorted)
'A'='TypeA'
'B'='TypeB'
'C'='TypeC'
'B','C'='NonTypeA'
;;;;
run;

proc tabulate data=have out=want;
format type $typef.;
class type/mlf preloadfmt order=data;
tables type*n;
run;

proc transpose data=want out=want_t(drop=_NAME_);
var N;
id type;
run; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T05:59:32.480

试试下面的代码：

```
Select Type , count(Type) as cnt
from WORK.Statistics_Count
group by Type 
```

代码根据评论更新。

```
 Select Type, count(Type) as cnt from  ( 
Select Type from WORK.Statistics_Count
where Type in ('A','B','C')

Union All

Select 'Others' as Type from WORK.Statistics_Count
where Type not in ('A','B','C'))z
group by Type 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-11T06:22:30.137

试试这个：

```
select type,count(*) NoofRows from tbl group by type 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-11T06:00:48.130

您可以通过执行以下操作找到计数`SELECT`：

```
SELECT COUNT(*)
FROM WORK.ListTable
GROUP BY Type 
```

请参阅 MySQL [GROUP BY](http://dev.mysql.com/doc/refman/5.0/en/group-by-functions.html)（聚合）函数。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-11-17T12:41:15.483

```
`proc sql noprint;`
 create table test as
 select * , 
   case 
    when type = "A" then count(id) 
   end as typeA
   ,
 case 
    when type = "B" then count(id) 
   end as typeB
   ,
 case 
    when type = "C" then count(id) 
   end as typeC
   ,
 case 
    when type ne "A" then count(id) 
   end as nontypeA

 from datain;
quit;

*  if you have many types, you can try this method below:  ;

data a;
 set datain;
   output;
  if type ne "A" then type="not A";
   output;
run;
  proc sql noprint;
  create talbe test1
   select * , count(id) as count
  from datain
  group by type
  order by id;
  quit;
proc transpose data=test1 out= final;
 id type;
 by id;
 var count;
run; 
```

# forms - codeigniter 数据表从表单中获取数据

> ID：15332064
> 
> 赞同：0
> 
> 时间：2013-03-11T05:55:59.233
> 
> 标签：forms, codeigniter, datatables

请帮助基本上我想使用表单过滤我的数据表。

每个输入都有一个值，该值会影响提交表单的查询。

这是我的 JQUERY。

```
$("#submit").click(function (e) {               

    $('#table').dataTable
    ({  

        "sAjaxSource": "index.php/report/get_report",       
        "sServerMethod": "POST",        
        'fnServerData': function (url, data, callback) {
        // Add new data 
            dataString = $("#myform").serialize();
            $.ajax({
                'url': "index.php/report/get_report",
                'data': dataString,
                'type': 'POST',
                'success': callback,
                'dataType': 'json',
                'cache': true
            });
        },                          
        'bServerSide'    : true,
        "aaSorting": [[ 3, "desc" ]],
        "bPaginate": true,                       
        "bSortClasses": false,
        "bAutoWidth": true,
        "bInfo": true,          
        "iDisplayLength"    : 3,        
        "bScrollCollapse": true,                                        
        "oLanguage": {
            "sSearch": "Search:"
        },
        "bDestroy": true        
    });     
}); 
```

这是我的 HTML 表格

```
<form name="myform">                                        
    <label>Employee:</label>
    <input type="text" name="employeeid" id="employeeid" title="Type Employee" />
    <label>Training Type: </label>
        <select name="trainingtype" id="trainingtype" >
        <option value="" selected="selected">All</option>
        <option value="1">Externally Facilitated Training</option>
        <option value="3">Internally Facilitated Training</option>
        <option value="2">Webcast/E-Learning</option>
        </select>                                       
    <label>Datestart</label>
    <input type="text" class="field size3" name="datestart" id="datepicker_s" />                    
    <label>Dateend </label>
    <input type="text" class="field size3" name="dateend" id="datepicker_e" />              
    <input type="hidden" id="txtsearchid" name="txtsearchid">
    <input type="button" class="button" value="Submit" id="submit" /> 
```

当我提交表单时，我什么也得不到。

我做对了吗？

请帮忙。

**知道了**

```
"fnServerData": function ( sSource, aoData, fnCallback ) {
                //REQUIRED: Add a Post variable with the object value                   
                aoData.push( 
                    { "name": "txtsearchid", "value": $( "#txtsearchid" ).val() },
                    { "name": "datestart", "value": $( "#datepicker_s" ).val() },
                    { "name": "dateend", "value": $( "#datepicker_e" ).val() },
                    { "name": "trainingtype", "value": $( "#trainingtype" ).val() }

                );

                $.ajax( {
                        dataType: 'json',
                        type: "POST",
                        url: sSource,
                        data: aoData ,
                        success: fnCallback
                } );
        }, 
```

这一定是我的问题的解决方案。我没有使用序列化而不是推送

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T06:07:04.890

使用 Mozilla 的 Firebug 插件来检查错误

# macos - 如何更改 Cocoa 应用程序的标题栏颜色？

> ID：15332066
> 
> 赞同：1
> 
> 时间：2013-03-11T05:56:03.793
> 
> 标签：macos, cocoa, window

我需要在 OS X 中更改应用程序的标题栏颜色。我希望有一个涉及 Cocoa 或 Carbon 的解决方案，但如有必要我可以做其他场所。本质上，我的一个客户希望标题栏是黑色的，而不是灰色的。我知道这是可能的，因为 OS X 的提醒应用程序可以做到这一点，带有角色的 Firefox 和带有主题的 Google Chrome 也是如此。

我知道这有可能破坏用户体验，我考虑过其他选择，但这是客户想要的方式，我需要交付。我不能真正使用没有标题栏的窗口，因为窗口已经设计好了，我相信这会比简单地改变窗口颜色更能扼杀用户体验。

任何想法将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T06:15:30.217

查看[Apple 的 Core Data Stickies 示例应用程序](http://www.cocoawithlove.com/2009/01/serving-nsmanagedobjectcontext-over.html)

```
1\. Create borderless window.

- (id)initWithContentRect:(NSRect)contentRect 
                styleMask:(unsigned int)styleMask 
                  backing:(NSBackingStoreType)backingType 
                    defer:(BOOL)flag
{
    if (self = [super initWithContentRect:contentRect
                                styleMask:NSBorderlessWindowMask 
                                  backing:backingType 
                                    defer:flag]) {
        [self setBackgroundColor:[NSColor yellowColor]];
        [self setHasShadow:YES];
    }
    return self;
}

- (BOOL)canBecomeKeyWindow { return YES; }  

2\. Place view on that window and implement custom title bar. 
```

![在此处输入图像描述](../Images/96cf5a686c594ec3cef1c96721577592.png)
**输出**

![在此处输入图像描述](../Images/aa2c6793d9efc57108871954b490f7c4.png)

# css - 图像彩色悬停在溢出

> ID：15332067
> 
> 赞同：1
> 
> 时间：2013-03-11T05:56:13.450
> 
> 标签：css

只是一个简单的图像，当鼠标悬停时，它使用一些 jQuery 在顶部淡化一些内容。唯一的问题是，当悬停生效时，悬停溢出到 div 排水沟中，使悬停大于实际容器。

每个图像都像这样布置

```
<li class="large-4 columns item">
<div class="description"><h1>Image hover</h1><a href="#"></a></div>
<img class="display" src="http://placehold.it/400x300">
</li> 
```

可以在这里看到一个活生生的例子。 [http://jsfiddle.net/QLUMH/](http://jsfiddle.net/QLUMH/)

关于修复/改进我在这里所做的事情的任何想法？干杯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T06:01:19.977

[演示](http://jsfiddle.net/stackmanoz/QLUMH/1/)

在这里你有一个活生生的例子，你给宽度和高度 100%。所以真的会溢出。

代码编辑-

```
#portfolio .description {
        position: absolute;
        background: rgba(0,199,134,0.8);
        display: none;
        width: 400px;
        height: 300px;
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T07:41:41.783

问题是您的描述填充了整个列，比您的图像更宽。如果您添加一个折叠到与图像相同宽度的“内列”/容器，它将正常工作。我已经[为你的演示创建了一个分支来演示](http://jsfiddle.net/yTmF7/)这一点。

我在每个 .column.item 中添加了一个包装器“ib”（仅代表内部块。将其重命名为适当的名称），如下所示：

```
<div class="ib">
    <div class="description">
       <h1>Image hover</h1><a href="#"></a>
    </div>
    <img class="display" src="http://placehold.it/400x300">
</div> 
```

然后创建了一个非常简单的 CSS 规则来让这个包装器折叠到它的内容：

```
.ib {
    display: inline-block;
    position: relative;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-11T06:03:58.967

CS的变化将有所帮助，

我已经更新了相同的[`fiddle`](http://jsfiddle.net/QLUMH/2/)

随着 CSS 的变化，

```
#portfolio .description {
    position: absolute;
    background: rgba(0,199,134,0.8);
    display: none;
    width: 400px;
    height: 300px;
}

#portfolio .description h1 {
    color: white;
    opacity: 1;
    font-size: 1.4em;
    text-transform: uppercase;
    text-align: center;
    margin-top: 20%;
width:400px;
height:300px;
overflow:hidden;
} 
```

更新：

如果`H1`创建了额外的切割器和包装问题（对于某些），请改用`DIV`标签，它应该可以正常工作！

我希望这能解决你的问题:)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-11T06:16:32.147

你没有设计你的`li`. 问题是在foundation.css 中它正在获取`padding-left`和`padding-right`。您需要删除它并使用`margin-left`and`margin-right`代替。而且您还需要修复`li`. `.description`将获得 100% 的高度。所以你需要在自己的文件中包含一个小css（不要修改foundation.css）。

```
#portfolio li.columns{
    /* You can use the width in '%' if you want to make the design fluid */
    width: 400px;
    padding: 0px;
    margin: 0px 0.9375em;
} 
```

[小提琴](http://jsfiddle.net/QLUMH/6/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-11T07:59:42.750

你只需要摆脱 tne 上的填充`li`

`li{ padding:0 }`

或使用[box-sizing](https://developer.mozilla.org/en-US/docs/CSS/box-sizing)属性：

`li { box-sizing:border-box; -moz-box-sizing:边框框；}

# symfony - 在创建时将新的 FOSUserBundle 用户添加到默认组

> ID：15332071
> 
> 赞同：8
> 
> 时间：2013-03-11T05:56:25.607
> 
> 标签：symfony, fosuserbundle

我正在构建我的第一个严肃的 Symfony2 项目。我正在为我的用户/组管理扩展 FOSUserBundle，并且我希望将新用户自动添加到默认组中。我猜你只需要像这样扩展 User 实体构造函数：

```
/**
 * Constructor
 */
public function __construct()
{
    parent::__construct();
    $this->groups = new \Doctrine\Common\Collections\ArrayCollection();
    // Get $defaultGroup entity somehow ???
    ...
    // Add that group entity to my new user :
    $this->addGroup($defaultGroup);
} 
```

但我的问题是我如何首先获得我的 $defaultGroup 实体？

我尝试从实体内部使用实体管理器，但后来我意识到这很愚蠢，并且 Symfony 抛出了一个错误。我搜索了这个，但没有找到真正的解决方案，除了可能[为此设置服务](https://stackoverflow.com/questions/4108291/using-entitymanager-inside-doctrine-2-0-entities?answertab=votes#tab-top)......虽然这对我来说似乎很不清楚。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-12T04:19:25.593

好的，我开始着手实现[artartad](https://stackoverflow.com/users/401025/artworkad)的想法。

我做的第一件事是在 composer.json 中将 FOSUserBundle 更新为 2.0.*@dev，因为我使用的是 v1.3.1，它没有实现 FOSUserEvents 类。这是订阅我的注册活动所必需的。

```
// composer.json
"friendsofsymfony/user-bundle": "2.0.*@dev", 
```

然后我添加了一个新服务：

```
<!-- Moskito/Bundle/UserBundle/Resources/config/services.xml -->
<service id="moskito_bundle_user.user_creation" class="Moskito\Bundle\UserBundle\EventListener\UserCreationListener">
    <tag name="kernel.event_subscriber" alias="moskito_user_creation_listener" />
        <argument type="service" id="doctrine.orm.entity_manager"/>
</service> 
```

在 XML 中，我通过参数告诉服务我需要访问 Doctrine `doctrine.orm.entity_manager`。然后，我创建了 Listener ：

```
// Moskito/Bundle/UserBundle/EventListener/UserCreationListener.php

<?php
namespace Moskito\Bundle\UserBundle\EventListener;

use FOS\UserBundle\FOSUserEvents;
use FOS\UserBundle\Event\FormEvent;
use Symfony\Component\EventDispatcher\EventSubscriberInterface;
use Doctrine\ORM\EntityManager;

/**
 * Listener responsible to change the redirection at the end of the password resetting
 */
class UserCreationListener implements EventSubscriberInterface
{
    protected $em;
    protected $user;

    public function __construct(EntityManager $em)
    {
        $this->em = $em;
    }

    /**
     * {@inheritDoc}
     */
    public static function getSubscribedEvents()
    {
        return array(
            FOSUserEvents::REGISTRATION_SUCCESS => 'onRegistrationSuccess',
        );
    }

    public function onRegistrationSuccess(FormEvent $event)
    {
        $this->user = $event->getForm()->getData();
        $group_name = 'my_default_group_name';
        $entity = $this->em->getRepository('MoskitoUserBundle:Group')->findOneByName($group_name); // You could do that by Id, too
        $this->user->addGroup($entity);
        $this->em->flush();

    }
} 
```

基本上，就是这样！

每次注册成功后，`onRegistrationSuccess()`都会调用，所以我让用户通过`FormEvent $event`并将其添加到我通过 Doctrine 获得的默认组中。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-11T08:38:53.377

你没有说你的用户是如何创建的。当某些管理员创建用户或您有自定义注册操作时，您可以在控制器的操作中设置组。

```
$user->addGroup($em->getRepository('...')->find($group_id)); 
```

但是，如果您在注册中使用 fosuserbundles，则必须连接到控制器：[https](https://github.com/FriendsOfSymfony/FOSUserBundle/blob/master/Resources/doc/controller_events.md) ://github.com/FriendsOfSymfony/FOSUserBundle/blob/master/Resources/doc/controller_events.md并使用事件侦听器。

# wso2 - WSO2 ESB - 转换 HTTP 202 接受的响应

> ID：15332073
> 
> 赞同：1
> 
> 时间：2013-03-11T05:56:40.817
> 
> 标签：wso2, esb, wso2esb

下面的 Endpoint_BPS_CreateCaseService/UpdateCaseService 端点都指向在 WSO2 BPS 上运行的单向 BPEL 服务。WSO2 BPS 在被调用时会立即返回一条 HTTP 202 接受消息。

如果我使用的客户端应用程序没有获得有效的 SOAP 信封作为响应，它将引发错误，因此我将使用 ESB 中的代理服务来环绕 BPEL 流程。

如何使用 WSO2 ESB 代理服务将 SOAP 信封转发到下面的 Endpoint_BPS_*，然后将 SOAP 信封响应返回到我的客户端应用程序？

如果任一端点不可用或超时，我还想执行 faultSequence“ProcessFault”。我之前使用 OUT_ONLY 来解决上述响应问题，但这意味着我无法检测到端点问题。除非有可能以某种方式做到这两点？

我尝试过的另一件事是克隆消息，但这有点混乱。

非常感谢任何帮助

```
<proxy xmlns="http://ws.apache.org/ns/synapse" name="BPSProxyService" transports="https,http" statistics="disable" trace="enable" startOnLoad="true">
   <target faultSequence="ProcessFault">
      <inSequence>
         <log level="full">
            <property name="MESSAGE" value="BEGIN BPSProxyService" />
         </log>
         <switch source="//*[local-name()='Operation']">
            <case regex="create">
               <send>
                  <endpoint key="Endpoint_BPS_CreateCaseService" />
               </send>
            </case>
            <case regex="update">
               <send>
                  <endpoint key="Endpoint_BPS_UpdateCaseService" />
               </send>
            </case>
         </switch>
      </inSequence>
      <outSequence>
         <property name="HTTP_SC" value="200" scope="axis2" />
         <class name="esb.mediators.InjectSOAPEnvelope" />
         <log level="full">
            <property name="MESSAGE" value="END BPSProxyService" />
         </log>
         <send />
         <drop />
      </outSequence>
   </target>
   <publishWSDL key="common/bpsproxyservice/bpsproxyservice.wsdl">
      <resource location="schema.xsd" key="common/schema_v2.xsd" />
   </publishWSDL>
</proxy> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2014-09-28T11:24:05.017

当您在代理服务的 outSequence 中收到来自后端（如 BPS）的“HTTP/1.1 202 Accepted”响应时，您需要该`<property name="SC_ACCEPTED" value="false" scope="axis2"/>`语句将“202”响应修改为其他内容。

例子： `<property name="SC_ACCEPTED" value="false" scope="axis2"/> <property name="HTTP_SC" value="200" scope="axis2"/> <payloadFactory media-type="xml"> <format> <response> <result>OK</result> </response> </format> <args/> </payloadFactory> <send/>`

响应将转换为带有响应消息的“HTTP/1.1 200 OK”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-12T10:04:48.070

在代理服务的 inSequence 中添加“FORCE_SC_ACCEPTED”参数和“OUT_ONLY”，如下所示。

```
<property name="FORCE_SC_ACCEPTED" value="true" scope="axis2" type="STRING"/>
<property name="OUT_ONLY" value="true" scope="default" type="STRING"/> 
```

有关更多信息，请使用以下文章： http: [//mohanadarshan.wordpress.com/2013/05/05/out_only-scenario-in-proxy-service-wso2-esb/](http://mohanadarshan.wordpress.com/2013/05/05/out_only-scenario-in-proxy-service-wso2-esb/)

# php - PHP Multi Curl 为第一个 url 返回 NULL 值

> ID：15332074
> 
> 赞同：3
> 
> 时间：2013-03-11T05:56:42.160
> 
> 标签：php, curl, null

我使用多卷曲检索一些页面，从 1 到 200。问题是列表中的第一个链接总是返回空！我不明白为什么！o_o

```
$mh = curl_multi_init();

for($j=0; $j<$i; $j++){
    $ch[$j] = curl_init($Links[$j]);
    curl_setopt($ch[$j], CURLOPT_CONNECTTIMEOUT, $curlConTimeOut);
    curl_setopt($ch[$j], CURLOPT_TIMEOUT, $curlTimeOut);
    curl_setopt($ch[$j], CURLOPT_RETURNTRANSFER, true);
    curl_setopt($ch[$j], CURLOPT_MAXREDIRS, 3);
    curl_setopt($ch[$j], CURLOPT_FOLLOWLOCATION, 1);
    curl_multi_add_handle($mh, $ch[$j]);
}

$active = null;
do {
    $mrc = curl_multi_exec($mh, $active);
} while ($mrc == CURLM_CALL_MULTI_PERFORM);

while ($active && $mrc == CURLM_OK) {
    if (curl_multi_select($mh) != -1) {
        do {
            $mrc = curl_multi_exec($mh, $active);
        } while ($mrc == CURLM_CALL_MULTI_PERFORM);
    }
}
$Si = 0; $Fi = 0; $Disp = "";
for($j=0; $j<$i; $j++){
    if($ch[$j]){
        if(curl_multi_getcontent($ch[$j]) == null){
            $Disp .= '0';
            $Fi++;
        }else{
            $Disp .= '1';
            $Si++;
        }           
        curl_multi_remove_handle($mh, $ch[$j]);
        curl_close($ch[$j]);
    }
}
curl_multi_close($mh); 
```

$Si / $Fi / $Disp 仅用于测试，结果示例如下：

链接成功：65/161

链接失败：96/161

Disp: 00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000001111111111111111101111110011111111001111111111111111111111111111111111

其中0代表失败，1代表成功。如果 N 元素为 0，则表示 N Link 返回 NULL

不可能每次只有首字母元素返回null！！几率是多少？！？！？！我要求 curl_error，所有内容都是：“连接在 XXXXX 毫秒后超时”！

1°：13852 毫秒

2°：13833 毫秒 ... 12676 毫秒 ... 10195 ... 并继续下降到 6007 毫秒，然后开始正确的！

CURLOPT_CONNECTTIMEOUT 设置为 6 秒！

为什么每次都从一个较大的数字开始到6，然后返回对吗？O_o 我想强调一下，空响应的顺序仅取决于列表！不从多卷曲时间响应！

另一个链接较少的示例：

| 链接成功：30/52

| 链接失败：22/52

| 显示：00000000000000000000001111111111011111111111111111111

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T12:45:14.610

正如您所看到的，当您执行/请求更少的内容/页面时，您会更快地达到 1（1 是成功，0 是错误）。

据我所知，您的第一个请求已超时。我的猜测是您需要降低每次请求/执行的数量。让我们继续执行 5，获取值，然后执行下一个 5。

5 只是我说的一个数字，所以测试哪个数字更适合你。如果你的处理器可以同时处理更多的东西，这个数字可能会更大。但也仅限于互联网的另一端他们的响应速度。

希望有帮助

# c# - 在 windows phone 上调用 web 服务

> ID：15332076
> 
> 赞同：0
> 
> 时间：2013-03-11T05:56:57.280
> 
> 标签：c#, windows-phone-7, windows-phone-8, windows-phone

如何在不使用`service_GetItemInfoCompleted()`以下代码中的函数的情况下调用 Web 服务？没有函数能不能得到结果`service_GetItemInfoCompleted()`。

任何的想法？

```
private void btnFind_Click(object sender, RoutedEventArgs e)
{
      Service1Client service = new Service1Client();
      service.GetItemInfoAsync(txt1.Text);
      service.GetItemInfoCompleted += new EventHandler<GetItemInfoCompletedEventArgs>(service_GetItemInfoCompleted);    
}

void service_GetItemInfoCompleted(object sender, GetItemInfoCompletedEventArgs e)
{
      txb1.Text = e.Result;
} 
```

示例 2

```
public void running()
{    
      ServiceReference1.WebServiceSoapClient test = new ServiceReference1.WebServiceSoapClient();

      test.ReadTotalOutstandingInvoiceCompleted += new EventHandler<ServiceReference1.ReadTotalOutstandingInvoiceCompletedEventArgs>(serviceClient);  

      test.ReadTotalOutstandingInvoiceAsync();
}

public void serviceClient(object sender, ReadTotalOutstandingInvoiceCompletedEventArgs e)
{

      answer = int.parse(e.Result.ToString());
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T06:17:50.287

上述方法是正确的方法：将请求发送到服务，当它返回时，在您的文本框中显示返回的数据。

如果您在一个阻塞调用中执行了相同的操作...

```
private void btnFind_Click(object sender, RoutedEventArgs e)
{
    Service1Client service = new Service1Client();
    txtb1.Text = service.GetItemInfoAsync(txt1.Text);
} 
```

...然后您的主 UI 线程将阻塞，直到从服务返回数据。如果服务需要几秒钟才能返回，那么您的应用程序的 UI 会间歇性地“挂起”几秒钟，给您的用户带来非常糟糕的体验。这是一件**坏事**，也是要不惜一切代价避免的事情！

所以我们想异步调用你的服务并等待它返回而不阻塞线程。但与其手动编写异步代码，我们可以使用 C# 5.0 中的 new `async`&`await`关键字来实现与上述相同的目标，但代码和复杂性更少：

```
private async void btnFind_Click(object sender, RoutedEventArgs e)
{
    Service1Client service = new Service1Client();
    string result = await service.GetItemInfoAsync(txt1.Text);
    txtb1.Text = result;
} 
```

注意上面代码中`async`和的使用。`await`async 关键字告诉编译器您希望它构建一个由等待状态驱动的状态机。每个 await 关键字都告诉编译器向状态机添加一个新状态。执行代码时，等待代码设置状态机以在等待的任务（`service.GetItemInfoAsync()`在本例中）完成时在下一个操作中获取。

HTH。

# json - Extjs - 如何在控制器中引用 json 数据？

> ID：15332078
> 
> 赞同：0
> 
> 时间：2013-03-11T05:57:00.903
> 
> 标签：json, extjs, extjs4, store

我正在开发一个简单的登录页面，其中我需要将任何用户在用户名字段中输入的值与单击“登录按钮”时的 json 数据存储进行比较。我的问题是，我们可以从数组中的 json 存储中获取用户名列表并与文本字段值进行比较吗？如果是这样，怎么做？

我的 nSpaceIndex.html

```
<html>
    <head>
        <title>nSpace | Expense / Project Solutions</title>
        <link rel="stylesheet" type="text/css" href="extjs/resources/css/ext-all.css">
        <script type="text/javascript" src="extjs/ext-debug.js"></script>
        <script type="text/javascript" src="app.js"></script>
    </head>

    <body>
    </body>
</html> 
```

应用程序.js：

```
Ext.application({
    requires: ['Ext.container.Viewport'],
    name: 'nSpace',
    controllers: [
        'nSpaceController'
    ],
    appFolder: 'app',

    launch: function() {
        Ext.create('Ext.container.Viewport', {
            layout: 'fit',
            items: {
                xtype: 'loginView'
            }
        });
    }
}); 
```

我的 nSpaceController.js：

```
Ext.define('nSpace.controller.nSpaceController', {
    extend: 'Ext.app.Controller',
    stores: [
        'Users'
    ],
    views: [
        'login.loginView'
    ],
    model: 'loginModel',
    init: function() {
        this.control({
            "#loginButton": {
                click: this.onLoginButtonClick
            }
        });
    },
    onLoginButtonClick: function(){
                //var jsonArray = store.Users.data.items
                //console.log(jsonArray);
                            // I NEED TO GET THE REFERENCE OF MY STORE: USERS TO COMPARE
                            var logUserName = Ext.getCmp('getUserName').getValue();
                var logPassword = Ext.getCmp('getPassword').getValue();             
                if(logUserName == 'user01' && logPassword == 'password01'){
                    Ext.MessageBox.show({title: 'Success', msg: 'You will be redirected to the home page in few moments...', icon:Ext.MessageBox.INFO});
                }
                else if(logUserName == 'user02' && logPassword == 'password02'){
                    Ext.MessageBox.show({title: 'Success', msg: 'You will be redirected to the home page in few moments...', icon:Ext.MessageBox.INFO});
                }
                else{
                    Ext.MessageBox.show({title: 'OOPS!!!', msg: 'Please Enter Valid Details', icon:Ext.MessageBox.WARNING});
                }
    },

}); 
```

我的 loginModel.js：

```
Ext.define('nSpace.model.loginModel', {
    extend: 'Ext.data.Model',
    fields: ['loginusername', 'password']
}); 
```

用户.js：

```
Ext.define('nSpace.store.Users', {
    extend: 'Ext.data.Store',
    model: 'nSpace.model.loginModel',

    autoLoad : true,
    proxy: {
        type: 'ajax',
        url: 'data/users.json',
        reader: {
            type: 'json',
            root: 'users',
            successProperty: 'success'
        }
    }
}); 
```

登录视图.js：

```
Ext.define('nSpace.view.login.loginView' ,{
    extend: 'Ext.form.Panel',
    alias: 'widget.loginView',
    store: 'Users',
    title: 'nSpace | Login',
    frame:true,
    bodyPadding: 5,
    width: 350,
    layout: 'anchor',
    defaults: {
        anchor: '100%'
    },
    defaultType: 'textfield',
    items: [{
        fieldLabel: 'User Name',
        name: 'loginusername',
        id: 'getUserName',
        allowBlank: false
    },{
        fieldLabel: 'Password',
        inputType: 'password',
        id: 'getPassword',
        name: 'password',
        allowBlank: false
    }],

    // Reset and Submit buttons
    buttons: [{
        text: 'Sign Up',
        handler: function() {
           // location.href = 'signUp.html';
        }
    },{
        text: 'Reset',
        handler: function() {
            this.up('form').getForm().reset();
        }
    }, {
        text: 'Login',
        id:'loginButton',
        formBind: true, //only enabled once the form is valid
        disabled: true,
    }],
    renderTo: Ext.getBody()
}); 
```

用户.json：

```
{
    "success": true,
    "users": [
        {"loginusername": 'user01', "password": 'password01'},
        {"loginusername": 'user02', "password": 'password02'}
    ]
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T08:46:22.567

> 在 this.control 上方的 init 函数中尝试使用 this..

```
var store = this.getUsersStore();
        store.load({
            callback:function(){
                  var l =  store.first();
                  console.log(l.get("password"));
          }
        }); 
```

这是你可以检查的方式

```
store.each(function(rec){
        if (rec.get('password') === value) {
            display = rec.get('username');
            return false;
        }
    }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-24T13:13:02.153

正如其他用户所指出的，在应用程序的客户端执行授权是微不足道的。但是您已经表示这不是问题，因此我将回答您的问题，但不会解决这种方法明显的安全缺陷。

我看到您正在使用，`Ext.getCmp()`因此您的组件已被分配一个`id`. 这通常被认为是不好的做法，因为该`id`属性是全局的，因此如果有两个组件用相同`id`的 实例化，应用程序将崩溃。您可能会发现改为分配组件 an`itemId`并创建引用以在`Controller`的`refs[]`定义中轻松检索组件很有用。

例如：

```
Ext.define('nSpace.controller.nSpaceController', {

... other store/model/view here ...

refs: [{
    name: 'userNameField', // makes magic method 'getUserNameField()'
    selector: 'textfield[name=loginusername]',
    xtype: 'textfield'
},{
    name: 'passwordField', // makes magic method 'getPasswordField()'
    selector: 'textfield[name=password]',
    xtype: 'textfield'
}],

this.control({ .. observe events here .. });
}); 
```

检索对您的商店的引用，并搜索提供的用户...

```
var me = this, // controller
    store = Ext.getStore('Users'),
    user  = me.getUserNameField.getValue(),
    pass  = me.getPasswordField().getValue(),
    success;

// Attempt to find a record matching the provided user/pass
success = store.findBy(function(rec){
    return (rec.get('loginusername') === user && rec.get('password') === pass);
});

// Store findBy returns the index, or -1 if no matching record is found
if(success >= 0){
   // user/password matched
}else{
   // no user/password match found
} 
```

# ios - 在 iOS 上根据国家/地区的电话格式

> ID：15332079
> 
> 赞同：1
> 
> 时间：2013-03-11T05:57:01.110
> 
> 标签：ios, objective-c, locale

有没有办法根据使用 Objective-C 选择的国家/地区获取电话号码格式？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T06:44:38.087

尝试使用这个库：[https](https://github.com/iziz/libPhoneNumber-iOS) ://github.com/iziz/libPhoneNumber-iOS 它是 Google 的 libphonenumber 库的 iOS 端口，用于解析、格式化、存储和验证国际电话号码。它支持以下格式：国家、国际、E164 和 RFC3966

# django - 通过 django shell 保存图像/文件

> ID：15332086
> 
> 赞同：34
> 
> 时间：2013-03-11T05:57:31.407
> 
> 标签：django, django-models, django-file-upload, django-shell, python

我正在尝试通过 django shell 保存图像文件。

我`model.py`的是：

```
class user(models.Model):
    name = models.CharField(max_length=20)
    pic = models.ImageField() 
```

管理员和表单一切都很好，但我想使用 shell 保存图像：

就像是

```
>>> user1 = User(name='abc', pic="what to write here") 
```

* * *

## 回答 #1

> 赞同：64
> 
> 时间：2013-05-03T20:15:54.867

```
from django.core.files import File

user1=User(name='abc')
user1.pic.save('abc.png', File(open('/tmp/pic.png', 'r'))) 
```

您最终会将图像`abc.png`复制`upload_to`到`ImageField`.

在这种情况下，该`user1.pic.save`方法还将保存`user1`实例。保存文档`ImageField`可以在这里找到[https://docs.djangoproject.com/en/dev/ref/files/file/](https://docs.djangoproject.com/en/dev/ref/files/file/)

* * *

## 回答 #2

> 赞同：31
> 
> 时间：2015-12-15T11:29:37.697

```
from django.core.files import File
user1=User(name='abc')
user1.pic.save('abc.png', File(open('/tmp/pic.png', 'rb'))) 
```

请使用“rb”而不是“r”。如果您使用的是 python3.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2021-10-09T18:55:28.373

对我有用的是：

```
django.core.files.uploadedfile import UploadedFile
user1=User(name='abc')
user1.pic.save('abc.png', UploadedFile(file=open('/tmp/pic.png', 'rb'), content_type='image/png')) 
```

# python - ganglia 目录 __SummaryInfo__ 包含什么？

> ID：15332089
> 
> 赞同：0
> 
> 时间：2013-03-11T05:57:48.687
> 
> 标签：python, rrdtool, rrd, ganglia

Ganglia 将集群矩阵写入 rrd 文件并保存在“ **/var/lib/ganglia/rrds/ClusterName/** ”位置下（默认配置）。在上面的位置有集群中不同主机的目录和“ **__SummaryInfo__** ”目录

我的问题是目录“ **__SummaryInfo__”**包含什么？
以及如何收集集群中所有机器的平均矩阵？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T06:37:30.077

`__SummaryInfo__`包含计算集群中所有指标值的平均值所需的信息。rrd 文件有两个数据源，`sum`一个是所有主机的指标值的总和，一个`num`是报告该指标的主机数量。

`sum`您可以通过`num`在 rrdtool CDEF 语句中除以来计算平均值：

```
DEF:sum=nameOfYour.rrd:sum:AVERAGE  
DEF:num=nameOfYour.rrd:num:AVERAGE 
CDEF:average=sum,num,/ 
```

请注意，随着数据变旧（添加更多数据），数据分辨率会下降。

# android - 在用户定义的路径中移动画布中的图像

> ID：15332091
> 
> 赞同：2
> 
> 时间：2013-03-11T05:58:07.240
> 
> 标签：android, android-canvas, android-animation

我需要在画布中移动图像。图像不应遵循线性、圆形或椭圆形路径。我知道这可以通过使用 COS 和 SIN 函数来实现。但是在这里我需要让图像在 4 个不同的路径中遍历，就像我在下面的快照中显示的那样。如果有任何方法可以实现这一点，请帮助我。即使我有任何想法来实现这一点也应该没问题。

快照：

![在此处输入图像描述](../Images/57c0c1493d9357f8ca9590d2b1146dbb.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T06:47:11.067

我会先尝试 android 动画包 - 你应该能够定义几个点并让它平滑点之间的路径。

见这里：http: [//developer.android.com/guide/topics/graphics/view-animation.html](http://developer.android.com/guide/topics/graphics/view-animation.html)

# r - 如何将多个数据文件的平均值制成表格

> ID：15332093
> 
> 赞同：2
> 
> 时间：2013-03-11T05:58:15.727
> 
> 标签：r, plyr

我有多个数据文件格式如下：

```
Condition    Score  Reqresponse 
   Z          1         b   
   Y          0         a 
```

我想读取多个数据文件，获得每个条件/reqresponse 组合的平均分数，然后将该平均值制成一个主表。我希望每个数据文件在主表（或列表等）中填充一行。

这是我尝试过的

```
#loop reads data from source example with only 2 files named 1 and 2
for(i in 1:2)
{
n= paste(i,".txt", sep="")
data <- read.table(toString(n), header = TRUE, sep = "\t") 
```

到目前为止还不错吧？在这之后我迷路了。

```
Score <- ave(x = data$Score, data$Condition, data$Reqresponse, FUN = mean)
table(Score)
} 
```

这就是我想出的全部。我不知道表中的哪些单元格属于哪个 Condition x Reqresponse 组合，或者如何创建一个新行然后将它们输入到主表中。

顺便说一句，如果这只是一种愚蠢的方式来处理我正在做的事情，请随时指出>）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-11T06:13:21.507

这应该可以工作，尽管它可以进行相当多的优化：

```
all_data<-data.frame() #make empty data.frame (we don't know the size)
for(i in 1:2){ #go through all files    
  #add rows to the data frame
  all_data <- rbind(all_data,read.table(paste(i,".txt", sep=""), 
              header = TRUE, sep = "\t"))
}
#use tapply to compute mean
Score<-tapply(all_data$Score,list(all_data$Condition,all_data$Reqresponse),mean) 
```

编辑：在性能方面更好的解决方案可以通过根本不制作主数据框来实现（尽管我不确定 xtabs 与 tapply 的效率）：

```
#read the first file
data <- read.table(paste(1,".txt", sep=""),header = TRUE, sep = "\t"))
#number of 1's, formula is a equal to Score==1~Condition+Reqresponse
score1<-xtabs(xtabs(Score~.,data=data) 
#number of 0's, formula is a equal to Score==0~Condition+Reqresponse
score0<-xtabs(!Score~.,data=data)
for(i in 2:n){ #go through the rest of the files  

  data <- read.table(paste(i,".txt", sep=""),header = TRUE, sep = "\t"))

  #sum the number of combinations in file i.txt to previous values
  score1<-score1+xtabs(xtabs(Score~.,data=data) 
  score0<-score0+xtabs(!Score~.,data=data)  
}
#Compute the means   
Score<-score1/(score0+score1) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-11T06:56:51.023

@Hemmo 的答案涉及顺序增长一个对象。如果文件量很大，这可能会变得非常慢。更 R 风格的方法不是使用`for`循环，而是首先创建文件向量，然后使用应用样式循环遍历它们。我将使用`plyr`pacakge 中的应用循环，因为这会使生活更轻松：

```
library(plyr)
file_list = sprintf("%s.txt", 1:2)
all_data = ldply(file_list, read.table, header = TRUE, sep = "\t") 
```

之后，您可以使用另一个`plyr`函数来处理数据：

```
ddply(all_data, .(Condition, Reqresponse), summarise, mn = mean(Score)) 
```

您还可以使用基本 R 函数：

```
all_data = do.call("rbind", lapply(file_list, read.table, header = TRUE, sep = "\t"))
# Here I copy the tapply call of @Hemmo
Score<-tapply(all_data$Score,list(all_data$Condition,all_data$Reqresponse),mean) 
```

# asp.net - 查找 Sql 查询类型

> ID：15332098
> 
> 赞同：1
> 
> 时间：2013-03-11T05:58:26.100
> 
> 标签：asp.net, mysql, c#-4.0, ado.net

这是`console`与`MySQL`数据库通信并返回的`Resultset`，但在此我无法找到查询的类型。所以我必须要求最终用户在执行查询之前选择适当的**查询类型**（*下拉选择）。*

有没有办法找出查询的性质，所以我可以选择执行`non-query`或`Data adapter`返回值。

![My-Sql 编辑器](../Images/dea70cf617753df4f849093b6eaa5fc0.png)

# sql - 操作数数据类型 void 类型对 sum 运算符无效

> ID：15332102
> 
> 赞同：7
> 
> 时间：2013-03-11T05:59:14.133
> 
> 标签：sql, sql-server, sql-server-2008, sql-server-2008-r2

我对 null 的使用有疑问。

如果我运行此查询

```
SELECT SUM(x)
FROM (SELECT NULL AS x) AS DerivedTable 
```

我收到错误消息

> “操作数数据类型 void 类型对 sum 运算符无效。”

但是，如果我创建一个带有可为空字段的表并在 sum 聚合中使用它，它将忽略 NULL 值并基本上将所有其余记录相加。

```
CREATE TABLE #temp1(x int)
insert into #temp values (NULL),(3),(5)

SELECT SUM(x) FROM #temp1 
```

结果是 8。

这个有逻辑上的解释吗？会不会是因为 NULL 的数据类型没有在派生表的查询中声明，而是在临时表中声明？另外，我真的很想知道在从表或派生表运行时是否有办法产生此错误消息，就像第二个 #temp1 示例一样。非常欢迎从表或表表达式运行时产生此错误消息的任何示例。

谢谢你们

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-03-11T06:04:52.357

这确实是因为在您的派生表场景中 **无法推断列的类型。**

如果您更改语句并在列上显式使用类型，则选择将起作用。

```
SELECT SUM(x) FROM (SELECT CAST(NULL AS INTEGER) AS x) AS DerivedTable 
```

与可以推断类型的以下语句一样

```
SELECT SUM(x) FROM (SELECT NULL AS x UNION SELECT 1) AS DerivedTable 
```

[SQL小提琴](http://www.sqlfiddle.com/#!3/d41d8/10707)

* * *

这也将回答您的第二个问题。由于您无法在不声明类型的情况下创建表，因此无法生成会生成特定错误消息的语句。

# vb6 - 检查计算机是台式机还是笔记本电脑等

> ID：15332103
> 
> 赞同：-2
> 
> 时间：2013-03-11T05:59:16.143
> 
> 标签：vb6, wmi, runtime-error

我正在使用以下 vb6 代码来检查计算机是否是台式机、笔记本电脑等，但代码无法正常工作并出现运行时错误。我在 VB.net 中执行了相同的代码，它工作正常。当我在 vb6 中执行此操作时，我遇到了错误。我知道我遗漏了导致错误的东西。有人可以帮我解决错误吗？以下是vb6中的完整代码

```
Option Explicit
 Private Sub Command1_Click()
  Dim oWMI As Object
  Dim oSystem As Object
  Dim SQL As String
  Dim objChassis As Object
  Dim strChassisType As Object
  Dim objWMIService As Object
  Dim colChassis As Object

  Dim strComputer As String
   strComputer = "."
  SQL = "Select * from Win32_SystemEnclosure"

  Set objWMIService = GetObject("winmgmts:" _
& "{impersonationLevel=impersonate}!\\" & strComputer & "\root\cimv2")

Set colChassis = objWMIService.ExecQuery(SQL)
For Each objChassis In colChassis
        For Each strChassisType In objChassis.ChassisTypes
            Select Case strChassisType
                Case 1
                    MsgBox ("Other")
                Case 2
                    MsgBox ("Unknown")
                Case 3
                    MsgBox ("Desktop")
                Case 4
                    MsgBox ("Low Profile Desktop")
                Case 5
                    MsgBox ("Pizza Box")
                Case 6
                    MsgBox ("Mini Tower")
                Case 7
                    MsgBox ("Tower")
                Case 8
                    MsgBox ("Portable")
                Case 9
                    MsgBox ("Laptop")
                Case 10
                    MsgBox ("Notebook")
                Case 11
                    MsgBox ("Handheld")
                Case 12
                    MsgBox ("Docking Station")
                Case 13
                    MsgBox ("All-in-One")
                Case 14
                    MsgBox ("Sub-Notebook")
                Case 15
                    MsgBox ("Space Saving")
                Case 16
                    MsgBox ("Lunch Box")
                Case 17
                    MsgBox ("Main System Chassis")
                Case 18
                    MsgBox ("Expansion Chassis")
                Case 19
                    MsgBox ("Sub-Chassis")
                Case 20
                    MsgBox ("Bus Expansion Chassis")
                Case 21
                    MsgBox ("Peripheral Chassis")
                Case 22
                    MsgBox ("Storage Chassis")
                Case 23
                    MsgBox ("Rack Mount Chassis")
                Case 24
                    MsgBox ("Sealed-Case PC")
                Case Else
                    MsgBox ("Unknown")
            End Select
        Next
    Next
End Sub 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T17:55:19.773

因此，您采用了[工作 VBScript 代码](http://blogs.technet.com/b/heyscriptingguy/archive/2004/09/21/how-can-i-determine-if-a-computer-is-a-laptop-or-a-desktop-machine.aspx)，并通过将所有变量声明为`Object`. 现在您的移植代码失败并出现错误。会出什么问题？

了解相关语言使用的数据类型是值得的。幸运的是，VBScript 中的所有变量都是`Variant`. 根据[文档](http://msdn.microsoft.com/en-us/library/9e7a57cf%28v=vs.84%29.aspx)：

> VBScript 只有一种数据类型，称为 Variant。Variant 是一种特殊的数据类型，可以包含不同类型的信息，具体取决于它的使用方式。因为 Variant 是 VBScript 中唯一的数据类型，所以它也是 VBScript 中所有函数返回的数据类型。
> 
> 大多数情况下，您可以将所需的数据类型放入 Variant 中，而 Variant 的行为方式最适合其包含的数据。

更幸运的是，VB6 支持相同的`Variant`数据类型。这就是为什么将变量声明为`Variant`解决问题的原因：

```
 Dim oWMI
  Dim oSystem
  Dim SQL
  Dim objChassis
  Dim strChassisType
  Dim objWMIService
  Dim colChassis
  Dim strComputer 
```

# java - 管理仪表板中的 AppEngine URI 错误

> ID：15332106
> 
> 赞同：0
> 
> 时间：2013-03-11T05:59:29.950
> 
> 标签：java, google-app-engine

我已上传新版本的 Google App Engine 并启用已上传的应用程序版本作为默认版本。我正在使用 Java。我在管理控制台中发现仍然需要不在新版本中的旧文件。

我在管理控制台仪表板中指的是 URI 错误下。例如，我有`/image/main.jpg`URI 错误的错误。

在我的`appengine-web.xml`文件中，我有以下静态文件到期：

```
<static-files>
    <include path="/js/**" expiration="30m"/>
    <include path="/image/**" expiration="30m"/>
    <include path="/css/**" expiration="30m"/>
</static-files> 
```

为什么我会收到不在启用版本中的文件的 URI 错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T15:53:43.927

您是否去了管理员并将默认版本设置为您的新版本？

# jquery - jquery 日历

> ID：15332112
> 
> 赞同：2
> 
> 时间：2013-03-11T05:59:47.867
> 
> 标签：jquery, jquery-plugins

我正在寻找与[jquery 周历](http://jquery-week-calendar.googlecode.com/svn/trunk/jquery.weekcalendar/full_demo/weekcalendar_full_demo.html)**具有**相同功能的jquery 日历

我已经浏览了某些日历，但它们不包含**jquery 周历的资源**

这可能是一个愚蠢的问题，但我可以修改**jquery 周历** ，使其可以用作日历吗？

我能够使用我自己的功能将前一周和下周按钮更改为前一天和第二天购买，但未加载事件，我不知道该怎么做。

如果有人以前这样做过，请在此突出显示我。

[我已经在这里jquery.js](http://pastebin.com/kjvdANvV)发布了我在 jquery.js 文件中所做的更改

在 demo.js

```
var d = new Date();
var n = d.getDay();

$calendar.weekCalendar({
    timeslotsPerHour : 4,
    allowCalEventOverlap : true,
    overlapEventsSeparate: true,
    firstDayOfWeek : n,
    businessHours :{
        start: 6, 
        end: 22, 
        limitDisplay: true
    },
    daysToShow : 1, 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T13:51:06.197

我从您的问题中了解到您需要周历，您之前听说过 JQuery Full Calender 插件吗？你可以使用年，月，甚至有一天它有很多属性和功能可以处理并且易于定制我使用它制作一个任务列表..

这是链接[FullCalender](http://arshaw.com/fullcalendar/)

这是它的文档： [FullCalender Documentation](http://arshaw.com/fullcalendar/docs/)

# java - Java Combobox，管理数据库中的 2 个字段

> ID：15332113
> 
> 赞同：0
> 
> 时间：2013-03-11T05:59:48.070
> 
> 标签：java, database, combobox, field

我想从我的数据库中获得一个包含 2 个字段的结果集。

```
 rs=Con.sqlQueryTable("Select id_prov, name_prov from prov"); 
```

然后我想在组合框中显示名为“name_prov”的字段（作为项目）。但我也想让我的“id_prov”，即 ID（主键）作为这个项目的值。这用于仅通过使用组合框将（在这种情况下为提供者的）名称与其 ID 相关联。

这是我当前使用的 JComboBox 事件 FocusGained 的代码。

```
try {
        //CBProv is the Combobox
        CBProv.removeAllItems();

        rs=Con.sqlQueryTable("Select id_prov, name_prov from prov");

        while(rs.next())
        {

            CBProvedores.addItem(rs.getString("name_prov"));
            //Here should be the Value related to the item I am creating

        }
    } catch (Exception e) {
        JOptionPane.showMessageDialog(this, "Error" + e  );
    } 
```

无论如何我可以做到这一点吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-11T06:19:08.203

首先创建一个 POJO，它将同时保存您的`name`和`id`.

```
public class ComboItem {
    private String id;
    private String name;

    public ComboItem(String id, String name) {
        this.id = id;
        this.name = name;
    }

    // Add the getter and setter as you want.

    // This will be used internally by JComboBox as the label to be displayed.
    @Override
    public String toString() {
        return name;
    }
} 
```

然后使用这个 POJO 对象放入你的`JComboBox`.

```
try {
        //CBProv is the Combobox
        CBProv.removeAllItems();

        rs=Con.sqlQueryTable("Select id_prov, name_prov from prov");

        while(rs.next())
        {                
            String id = rs.getString("id_prov"); // Get the Id
            String name = rs.getString("name_prov"); // Get the Name

            ComboItem comboItem = new ComboItem(id, name); // Create a new ComboItem
            CBProv.addItem(comboItem); // Put it into the ComboBox

        }
    } catch (Exception e) {
        JOptionPane.showMessageDialog(this, "Error" + e  );
    } 
```

最后要获得选定的值，您可以这样做：-

```
CBProv.addActionListener(new ActionListener() {

            @Override
            public void actionPerformed(ActionEvent e) {
                ComboItem comboItem = (ComboItem) CBProv.getSelectedItem();
                // comboItem.getId(), comboItem.getName() - Use as you wish.
            }
    }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-11-26T06:45:08.130

您好，我也是 java 和 javafx 的新手。这就是我在 javafx 中所做的，它对我有用希望你可以在 java 中解决它。

```
 private void fillProviders()
  {
    List<String> providerList = new ArrayList<String>();

  try
    {   
        String Sql = "select * from prov ";
        pat= conn.prepareStatement(Sql);
        rs=pat.executeQuery();

        while (rs.next())
        {
            providerList.add(rs.getString("id_prov")+" "+ rs.getString("name_prov"));
        }

        ObservableList<String> provider =  FXCollections.observableArrayList(providerList);
            bankName.setItems(provider);  
    }

    catch( Exception e)
    {
        JOptionPane.showMessageDialog(null, e);
    }         
} 
```

希望对你有效。请注意，我的组合框名称是 bankName

# javascript - 将 document.domain 动态设置为 iframe

> ID：15332115
> 
> 赞同：9
> 
> 时间：2013-03-11T05:59:53.133
> 
> 标签：javascript, iframe

我有一个在页面中注入的 iframe，称他为“助手”。因此，由于同源策略，我需要将 iframe 域设置为与父窗口域相同。但我无法访问父窗口域。如何解决？

此代码目前适用于二级域：

```
pathArray = window.location.host.split('.');
var arrLength = pathArray.length;
var domainName = pathArray.slice(arrLength - 2, arrLength).join('.');
document.domain = domainName; 
```

但我需要以某种方式从父窗口获取它，而不是依赖于二级域

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-12T09:34:33.320

我不知道它是否有帮助，但我在 iframe 中使用它

```
 try {
    var domainName = window.parent.parent.iframeData.domainName;
}
//Access violation
catch (err) {
    document.domain = window.location.hostname.replace('www.', '');
} 
```

所以我检查域是否已经设置我们有异常尝试猜测域，在任何一种情况下，都不需要设置域

编辑：如果需要，更正确地使用发布消息来设置域

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-11T06:13:11.713

简而言之，它不能。`document.domain`仅当 iFrame 和包含窗口实际上是同一域的一部分时，设置才有效。如果浏览器让您设置`document.domain`为您实际所在域以外的其他内容，则将违反安全规定。考虑一下，任何恶意脚本都可能只是说“不，真的，相信我这个”，而浏览器基本上会说，“哦，好吧，既然你问得这么好，这就是你想要的所有权限”。

`document.domain`只能设置为页面实际域的父域。如果一个 iFrame 和一个包含窗口至少不共享，那么没有浏览器将允许它们串扰。

除非我误解了你的问题。随意张贴一些例子来澄清。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-11T06:30:32.697

假设您的父母可以是`a.domain.com` 并且您的 iframe 是`b.domain.com`- 那么您可以做您正在尝试的事情。如果您必须知道父级是什么，请在 iframe src 属性中传递它或尝试`document.referrer`

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2017-03-05T18:51:12.707

在两个页面中添加 document.domain = 'your.domain'。

像这样。不要忘记 parent.top

document.domain = 'corp.local'; 只有父母喜欢

document.domain = 'corp'; 不会工作。

正如我在这里提到的。[javascript 获取 iframe url 在子域上的当前页面](https://stackoverflow.com/questions/32501901/javascript-get-iframe-urls-current-page-on-subdomain/42612398#42612398)

该文件有所帮助。[http://javascript.info/tutorial/same-origin-security-policy](http://javascript.info/tutorial/same-origin-security-policy)

# java - JSCH - 无效的私钥

> ID：15332120
> 
> 赞同：17
> 
> 时间：2013-03-11T06:00:15.237
> 
> 标签：java, jsch

我正在使用 netbeans 7.2 运行 JDK 1.7 和 Windows 7 我使用 putty-keygen 生成了一个 SSH 私钥和公钥对（SSH2-2048 位）。我没有任何私钥密码。我现在正在尝试使用 SFTP 连接到其中一台主机。但是当我通过私钥（ppk）来设置身份时，代码返回无效的私钥错误。我在 WinSCP 中使用相同的私钥连接到同一主机，并且工作正常。请帮助我解决错误。这是我的代码：

```
JSch jsch = new JSch();

Session session = null;

try {

    jsch.addIdentity("D:\\TEMP\\key.ppk");

    session = jsch.getSession("tiabscp", "ssiw.support.qvalent.com", 22);
    session.setConfig("StrictHostKeyChecking", "no");
    //session.setPassword("");
    session.connect();
    Channel channel = session.openChannel("sftp");
    System.out.println("Getting connected");
    channel.connect();
    System.out.println("connected successfully");
    ChannelSftp sftpChannel = (ChannelSftp) channel;
    sftpChannel.get("remotefile.txt", "localfile.txt");
    sftpChannel.exit();
    session.disconnect();
}catch (JSchException e) {

    e.printStackTrace();

}catch (SftpException e) {

    e.printStackTrace();
} 
```

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2013-03-11T06:33:38.573

我猜您的密钥不是 OpenSSH 密钥文件格式。JSch 期望私钥采用 OpenSSH 格式。

[您可以按照此处](http://www.wellsi.com/sme/ssh/ssh.html)描述的步骤使用 PuTTYgen 将您的私钥转换为与 OpenSSH 一起使用：

1.  按加载并选择使用 PuTTYgen 创建的私钥。
2.  输入密码以加载密钥。
3.  从“转换”菜单中选择导出 OpenSSH 密钥
4.  保存私钥。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-03-04T15:00:12.187

也许不是你的解决方案，但我在搜索我的问题时发现了这个问题。

当 JSCH 需要私钥文件时，我不小心给出了公钥文件的路径。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-01-29T12:00:05.830

您可以使用 PEMWriter 将您的私钥转换为 JSch 接受的 PEM 格式

以下示例转换从 Java KeyStore (JKS) 返回的密钥

```
Key privateKey = KeyStore.getKey(privateKeyAlias, keyStorePassword);//get key from JKS
StringWriter stringWriter = new StringWriter();
PEMWriter pemWriter = new PEMWriter(stringWriter);
pemWriter.writeObject(privateKey);
pemWriter.close();

byte[] privateKeyPEM = stringWriter.toString().getBytes(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-11T06:31:27.783

以下示例代码可能会对您有所帮助。

```
package ssh.control;

import java.io.BufferedReader;
import java.io.ByteArrayOutputStream;
import java.io.InputStreamReader;
import java.util.ArrayList;
import java.util.List;
import java.util.Properties;

import android.util.Log;

import com.jcraft.jsch.ChannelExec;
import com.jcraft.jsch.JSch;
import com.jcraft.jsch.Session;

public class SSHConnections {
    static String user="";
    static String pass="";
    static String ip="";

    static Session session;

    public static ChannelExec getChannelExec() throws Exception{
        //System.out.println("connected");
        //This class serves as a central configuration point, and as a factory for Session objects configured with these settings.
        JSch jsch = new JSch();
        //A Session represents a connection to a SSH server.
        session = jsch.getSession(user, ip, 22);
        //getSession()   :-  the session to which this channel belongs. 
        session.setPassword(pass);

        // Avoid asking for key confirmation
        //http://docs.oracle.com/javase/1.4.2/docs/api/java/util/Properties.html
        Properties prop = new Properties();
        prop.put("StrictHostKeyChecking", "no");

        //Sets multiple default configuration options at once. 
        session.setConfig(prop);

        session.connect();
        if(session.isConnected()) {
            System.out.println("connected");
        }

        // SSH Channel 
        //Opens a new channel of some type over this connection. 
        ChannelExec channelssh = (ChannelExec) session.openChannel("exec");

        return channelssh;
    }

    public static  String[] executeRemoteCommand(String command) throws Exception {

        ByteArrayOutputStream baos = new ByteArrayOutputStream();
        ChannelExec channelssh = SSHConnections.getChannelExec();
        channelssh.setOutputStream(baos);

        // Execute command
        channelssh.setCommand(command);//gedit tt
        InputStreamReader isr = new InputStreamReader(channelssh.getInputStream());

        BufferedReader bufred = new BufferedReader(isr);

        channelssh.connect();
        String s = bufred.readLine();

        List<String> lines = new ArrayList<String>();

        int count = 0;
        while( s!=null ) {
            //System.out.println(s);
            lines.add(count,s);
            //      filesandfolders[count]=s;
            //      System.out.println(filesandfolders[count]);
            s = bufred.readLine();  
            count++;
        }

        String filesandfolders[] = new String[count];

        for(int i = 0; i<count;i++) {
            filesandfolders[i] = lines.get(i);
            Log.d("filesandfolders[i]", filesandfolders[i]);
        }
        //for(int j=0;j<filesandfolders.length;j++) {
        //System.out.println(filesandfolders[j]);
        //}
        //System.out.println("lines is "+lines.get(0));
        //int a;
        //while((a = isr.read()) != -1)
        //System.out.print((char)a);
        //channelssh.disconnect();
        //return baos.toString();
        return filesandfolders;
    }

    public static  List<String> executeRemoteCommand1(String command) throws Exception {
        ByteArrayOutputStream baos = new ByteArrayOutputStream();
        ChannelExec channelssh=SSHConnections.getChannelExec();
        channelssh.setOutputStream(baos);

        // Execute command
        channelssh.setCommand(command);//gedit tt
        InputStreamReader isr = new InputStreamReader(channelssh.getInputStream());

        BufferedReader bufred = new BufferedReader(isr);

        channelssh.connect();
        String s = bufred.readLine();

        List<String> lines = new ArrayList<String>();

        int count=0;
        while(s != null) {
            //System.out.println(s);
            lines.add(count, s);
            //      filesandfolders[count] = s;
            //      System.out.println(filesandfolders[count]);
            s = bufred.readLine();  
            count++;
        }

        String filesandfolders[] = new String[count];

        for(int i=0; i<count;i++) {
            filesandfolders[i]=lines.get(i);
        }
        //for(int j=0;j<filesandfolders.length;j++) {
        //System.out.println(filesandfolders[j]);
        //}
        //System.out.println("lines is "+lines.get(0));
        //int a;
        //while((a = isr.read()) != -1)
        //System.out.print((char)a);
        //channelssh.disconnect();
        //return baos.toString();
        return lines;
    }
} 
```

制作目录：

```
SSHConnections.user = "username";
SSHConnections.ip = "192.168.1.102";
SSHConnections.pass = "mypassword";
ChannelExec channelssh = SSHConnections.getChannelExec();

String dirname = "sampledirectory";
try {
    String[] str = SSHConnections.executeRemoteCommand("mkdir "+dirname);
} catch (Exception e) {
    e.printStackTrace();
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-08-20T12:11:54.950

我在使用 JSch 使用 ppk 进行 ssh 时遇到了同样的问题。这可能对某人有用。

在使用来自 Putty 的 ppk 文件时，它曾经可以工作。但是与 JSch 使用相同，它曾经抛出这个异常。

我尝试了几个解决方案。最后，我只是将 ppk 文件加载到 PuTTYgen 并保存私钥，它生成了类似的外观（在文本编辑器中）文件，但它有效。

1.  按“加载”并选择 ppk 文件
2.  输入密码
3.  单击加载选项下方的“保存私钥”按钮并保存私钥

# asp.net-mvc - 将项目插入到 @Html.DropdownList

> ID：15332122
> 
> 赞同：0
> 
> 时间：2013-03-11T06:00:31.270
> 
> 标签：asp.net-mvc, razor

这是我当前用于简单选择的剃刀代码。

```
@Html.DropDownList("Season", Model.Seasons.Select(s => new SelectListItem { Text = s.Name, Value = s.SeasonId.ToString() }), new { @class = "sel_season" }) 
```

我想要做的是添加/插入一个名为“全部”的附加选项。我已经尝试过 Concat，但我似乎无法让它工作。

```
@Html.DropDownList("Season", Model.Seasons.Select(s => new SelectListItem { Text = s.Name, Value = s.SeasonId.ToString() }).Concat( new {"All", "0"}), new { @class = "sel_season" }) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T06:05:50.083

以下示例使用[HtmlHelper 类](http://msdn.microsoft.com/en-us/library/dd504967%28v=vs.108%29.aspx)中的重载扩展方法：

```
@Html.DropDownList("Season"
    , Model.Seasons.Select(s => new SelectListItem {
        Text = s.Name,
        Value = s.SeasonId.ToString()
    })
    , "All"
    , new { @class = "sel_season" }
) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T06:04:42.350

尝试这个

```
@Html.DropDownList("Season", 
                  Model.Seasons
                    .Select(s =>
                       new SelectListItem { Text = s.Name, Value = s.SeasonId.ToString() })
                    .ToList().Insert(0, SelectListItem { Text = "All",Value =  "0"}), 
                   new { @class = "sel_season" }) 
```

# php - 以编程方式添加节点

> ID：15332127
> 
> 赞同：0
> 
> 时间：2013-03-11T06:00:59.110
> 
> 标签：php, drupal

我对 Drupal 很陌生。我需要使用这个 CMS 开发一个网站。作为管理员，我可以理解创建内容。但我想从代码中创建内容。例如，我想以编程方式在后端创建文章而不发布它们。因此，该站点管理员可以根据需要查看和发布它们。像这样的任务。有程序员的参考吗？关于drupal代码的结构以及在哪里编写类似的东西。不是我不能在办公室看的视频。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T14:50:11.023

Drupal 中的自定义代码通常是在模块的帮助下完成的。

熟悉 Drupal API 的一种方法是安装[示例](http://drupal.org/project/examples)。

在您的 Google 搜索中，查找有关编写您自己的模块的教程。

话虽如此，以编程方式保存节点是相当简单的，我怀疑你在找出如何去做时会遇到问题。

您的主要问题是了解“Drupal 方式”。

您可以查看优秀的资源，例如
- [buildamodule.com](http://buildamodule.com/)
- [drupalize.me](http://drupalize.me/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-22T10:27:04.847

**解决方案 ！**

您可以使用以下代码通过 drupal 以编程方式创建节点，

```
 $node = new stdClass(); // Create a new node object
    $node->type = 'YOUR_CONTENT_TYPE';
    node_object_prepare($node); // Set some default values
    $node->language = LANGUAGE_NONE;
    $node->status = 0; // un-published
    $node->uid = 'USER_ID';
    $node->title = 'YOUR_TITLE';
    $node->body['und'][0]['value'] = 'YOUR_DESCRIPTION';
    $node->body['und'][0]['summary'] = 'YOUR_SHORT_DESCRIPTION';
    $node->body['und'][0]['format'] = 'filtered_html';
    $node = node_submit($node); //prepare node for saving
    node_save($node); // save node 
```

# java - 求解数独的递归方法

> ID：15332134
> 
> 赞同：1
> 
> 时间：2013-03-11T06:01:34.950
> 
> 标签：java, recursion, sudoku

我目前正在学习我的第二门 Java 编程课程，但我需要完成的作业有问题才能通过课程。基本上它是关于编写一个通过回溯递归解决数独的程序。这是我想出的算法。我使用一个 9x9 数组来表示一开始用零填充的网格。checkFill 检查是否可以在 position[i][j] 中插入一个数字 (var)。问题是它只解决了部分数独问题，它总是返回 false（无解），并且一些单元格仍然包含零。我在这里做错了什么？

```
import java.awt.*;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import javax.swing.*;

public class Sudoku {
    private int[][] sudoku;
    private JFrame frame;
    private JFormattedTextField[][] sudokuSquares;
    private JButton solve, clear;

    public Sudoku() {
        sudoku = new int[9][9];
        frame = new JFrame("Sudoku Solver");
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        JPanel northPanel = new JPanel();
        northPanel.setLayout(new GridLayout(9, 9));
        northPanel.setBorder(BorderFactory.createEmptyBorder(10, 10, 10, 10));
        sudokuSquares = new JFormattedTextField[9][9];
        Font font1 = new Font("SansSerif", Font.BOLD, 20);
        for(int i = 0; i < 9; i++) {
            for(int j = 0; j < 9; j++) {
                sudokuSquares[i][j] = new JFormattedTextField();
                sudokuSquares[i][j].setHorizontalAlignment(JTextField.CENTER);
                sudokuSquares[i][j].setFont(font1);
                sudokuSquares[i][j].setBorder(BorderFactory.createEtchedBorder(javax.swing.border.EtchedBorder.RAISED));
                northPanel.add(sudokuSquares[i][j]);
            }
        }
        setColor();
        frame.add(northPanel, BorderLayout.NORTH);
        JPanel southPanel = new JPanel();
        solve = new JButton("Solve");
        solve.addActionListener(new SolveButtonListener());
        clear = new JButton("Clear");
        clear.addActionListener(new ClearButtonListener());
        southPanel.add(clear);
        southPanel.add(solve);
        frame.add(southPanel, BorderLayout.SOUTH);
        frame.setResizable(false);
        frame.setSize(280, 330);
        frame.setVisible(true);
    }

    private void solveSudoku() {
        boolean hasSolution = solve(0, 0);
        if(hasSolution) {
            JOptionPane.showMessageDialog(frame, "Sudoku has been successfully solved");
        } else {
            JOptionPane.showMessageDialog(frame, "Sudoku has no solution");
        }

    }

    private class SolveButtonListener implements ActionListener {
        @Override
        /**
         * Checks input for errors and outputs the sudoku matrix after it's been solved.
         */
        public void actionPerformed(ActionEvent e) {
            String s;
            setColor();
            for(int i = 0; i < 9; i++) {
                for(int j = 0; j < 9; j++) {
                    s = sudokuSquares[i][j].getText();
                    if(s.isEmpty()) {
                        s = "0";
                    } else if(s.length() > 1 || !Character.isDigit(s.charAt(0)) || s.charAt(0) == '0') {
                        sudokuSquares[i][j].setBackground(Color.RED);
                        JOptionPane.showMessageDialog(frame, "Invalid entry! Please enter a number between 1-9");
                        return;
                    }
                    sudoku[i][j] = Integer.parseInt(s);
                }
            }
            solveSudoku();
            for(int i = 0; i < 9; i++) {
                for(int j = 0; j < 9; j++) {
                    sudokuSquares[i][j].setText(String.valueOf(sudoku[i][j]));
                }
            }
        }
    }

    private class ClearButtonListener implements ActionListener {
        @Override
        public void actionPerformed(ActionEvent e) {
            for(int i = 0; i < 9; i++) {
                for(int j = 0; j < 9; j++) {
                    sudokuSquares[i][j].setText("");
                }
            }
            setColor();
        }   
    }

    /**
     * Sets the background color of sudoku cells
     */
    private void setColor() {
        for(int i = 0; i < 9; i++) {
            for(int j = 0; j < 9; j++) {
                if((i / 3 < 1 || i / 3 >= 2) && (j / 3 < 1 || j / 3 >= 2) || 
                        (i / 3 >= 1 && i / 3 < 2) && (j / 3 >= 1 && j / 3 < 2)) {
                    sudokuSquares[i][j].setBackground(new Color(220, 220, 220));
                } else {
                    sudokuSquares[i][j].setBackground(Color.WHITE);
                }
            }
        }
    }

    /**
     * Solves the sudoku through recursive technique
     * @param i row
     * @param j column
     * @return returns true if the sudoku has a solution, returns false otherwise
     */
    private boolean solve(int i, int j) {
        if(i > 8) {
            return true;
        }
        if(sudoku[i][j] == 0) {
            for(int var = 1; var < 10; var++) {
                if(checkFill(i, j, var)) {
                    sudoku[i][j] = var;
                    if(j >= 8) {
                        solve(i + 1, 0);
                    } else {
                        solve(i, j+1);
                    }
                }
            }
        } else {
            if(j >= 8) {
                solve(i + 1, 0);
            } else {
                solve(i, j+1);
            }
        }
        return false;
    }

    /**
     * Checks if var could be inserted at position [i][j]
     * @param i row
     * @param j column
     * @param var number to be checked for possible insertion
     * @return
     */
    private boolean checkFill(int i, int j, int var) {
        for(int a = 0; a < 9; a++) {
            if(sudoku[a][j] == var) {
                return false;
            }
        }
        for(int a = 0; a < 9; a++) {
            if(sudoku[i][a] == var) {
                return false;
            }
        }
        int tempI = (i / 3) * 3;
        int tempJ = (j / 3) * 3;
        for(int a = 0; a < 3; a++) {
            for(int b = 0; b < 3; b++) {
                if(sudoku[tempI + a][tempJ + b] == var)
                    return false;
            }
        }
        return true;
    }

} 
```

所以有人有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T02:43:20.480

您的程序似乎只是检查给定数字是否可以放入给定插槽，检查行、列和本地 3x3 网格，如果这三个检查通过，则将其永久放置在那里。

这是有问题的，因为大多数数独在这种简单的检查中不会产生单一的可能性。

您需要为每个点列出可能的值，然后开始使用[双对](http://www.sudokuoftheday.com/pages/techniques-4.php)等技术进一步解决问题。

由于它是一台计算机并且速度很快，因此在您使用其中一些技术之后，您可以开始暴力破解它。

另一种方法是将数独问题转换为 SAT 公式，将其输入 SAT 求解器，然后将解决方案转换回数独解决方案。现在有非常先进的 SAT 求解器可以非常快速地处理 9x9 数独。[这里](http://www.cs.qub.ac.uk/~i.spence/SuDoku/SuDoku.html)有更深入的解释。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-16T01:33:03.843

在您的求解方法中，您在进行更改之前测试是否 sudoku[i][j]==0。这意味着一旦你输入了一个数字，无论它是对是错，你都永远不会改变它。你需要能够退出错误的动作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-11T06:34:11.567

您可以在此处找到简化的 Java 数独程序。[http://www.heimetli.ch/ffh/simplifiedsudoku.html](http://www.heimetli.ch/ffh/simplifiedsudoku.html)

如果您可以分享完整的源代码，包括方法 checkFill，我们可以帮助您进一步调试

# javascript - 是什么导致我的图像最初无法在 Safari 中加载。所有其他浏览器似乎都可以正常工作

> ID：15332135
> 
> 赞同：5
> 
> 时间：2013-03-11T06:01:53.120
> 
> 标签：javascript, jquery, image, css, safari

我目前在我的网站上使用 3d cardflip 方法，它在 Firefox、IE 以及旧浏览器的 IE 降级中运行良好。我的问题是由于似乎所有 Apple iOS 设备和 Safari 都不会在页面初始加载时加载卡片上的图像和信息，但只有在执行硬重新加载或简单重新加载页面时才会加载。我已经尝试了我能想到的一切来解决这个问题，但我也找不到任何关于这个问题的信息。任何帮助将不胜感激！不工作的页面是[http://www.paytonandsam.com/about_sam.html](http://www.paytonandsam.com/about_sam.html)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-12-17T05:49:18.783

请在 Safari 5.1.5、6.0.2、6.0.3 即更高版本的 Safari 浏览器上测试本网站。因为现在 safari 浏览器比旧版本更快更灵活。

# ios - 如何创建一个在静态图像中滚动的简单滚动视图？

> ID：15332136
> 
> 赞同：1
> 
> 时间：2013-03-11T06:01:53.650
> 
> 标签：ios, xcode, uiscrollview, interface-builder, scrollview

到目前为止，也许是 Xcode 4.5+ 或 iOS 6 使我的研究毫无结果，但是......

*   [苹果自己的建议](http://developer.apple.com/library/ios/#documentation/windowsviews/conceptual/UIScrollView_pg/CreatingBasicScrollViews/CreatingBasicScrollViews.html)对我没有用。我将 contentSize 设置为不同的值，它不会导致任何变化。
*   我发现这[不是我独有的](https://stackoverflow.com/questions/7101656/setting-the-content-size-of-my-uiscrollview-in-viewdidload-viewwillappear-has-no)，但该问题 1.) 中的答案并没有告诉我问题和 2.) 我想知道是否真的不可能创建一个简单的、非继承的 UIScrollView 示例. 于是，这个问题。
*   在 viewDidLoad 和 viewDidAppear 中尝试了[更好的 answer](https://stackoverflow.com/questions/5464550/ios-how-to-change-the-size-of-the-uiscrollview-content)的代码，但无济于事。

那么给了什么？ **是否可以创建一个允许滚动的简单的、充满图像的视图？**[说...就像我在 github 上建立的](https://github.com/hyliandanny/SimpleScrollViewExample)这个基本项目一样简单——但是工作吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T06:55:32.520

1.  创建并初始化一个`UIScrollView`
2.  将其作为子视图添加到 viewcontroller 的视图中
3.  制作一组图像名称
4.  在循环中创建 UIImageView 并添加图像并将图像视图添加到滚动视图中，考虑图像的宽度，设置图像视图的框架
5.  图像的数量是已知的，它消耗的宽度可以从循环本身计算出来，用它来设置`contentSize`滚动视图的

# php - PHP Post/Redirect/Get Failing with Google Chrome

> ID：15332140
> 
> 赞同：3
> 
> 时间：2013-03-11T06:02:08.093
> 
> 标签：php, google-chrome, post-redirect-get

我尝试在 PHP 中实现 POST/REDIRECT/GET 设计模式，当我重定向到完全相同的页面时，它适用于 Safari，但不适用于 Google Chrome（适用于 Mac）。如果我稍微改变 URL（比如添加一个斜杠），它就可以正常工作。

这是一个功能齐全的示例：

```
<?php
if(TRUE === isset($_POST['submit'])) {
    header('Location: http://' . $_SERVER['SERVER_NAME'] . $_SERVER['REQUEST_URI'], true, 303);
    exit();
}?>
<html><head></head><body>
<form action="" method="post"><input type="submit" name="submit" value="submit" /></form>
</body></html> 
```

当我转到页面并单击提交按钮然后刷新页面时，我得到一个对话框，要求我确认重新提交表单数据。我所有的搜索都表明，上面的代码是实现 POST/REDIRECT/GET 的正确方法，并且应该可以工作（在 Safari 中也可以），但它不适用于 Mac 上的 Chrome。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-11T06:17:49.187

您的代码似乎没问题，我猜您遇到的问题与[问题 177855：Chrome 25 中的重定向错误处理有关](https://code.google.com/p/chromium/issues/detail?id=177855&q=reload&colspec=ID%20Pri%20Mstone%20ReleaseBlock%20OS%20Area%20Feature%20Status%20Owner%20Summary)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-11T06:07:21.287

刷新您发布到的页面会为您提供该弹出框，因为浏览器想知道它是否应该重新发送最初将您带到该页面的数据。所有形式都会发生这种情况。你说它在chrome中不起作用。你有错误吗？它只是不重定向吗？

此外，使用锚标记将某人直接链接到新页面会更有意义，或者使用迂回的方式，例如：

`<a href="http://<?php echo $_SERVER['SERVER_NAME'] . $_SERVER['REQUEST_URI'] ?>?act=forward">Forward</a>`

并检查 $_GET["act"] 是否等于 "forward"，而不是检查表单是否已发送。

# mysql - sql查询错误

> ID：15332145
> 
> 赞同：0
> 
> 时间：2013-03-11T06:02:21.443
> 
> 标签：mysql, sql, database, relational-division

嗨，我有以下数据库架构

```
Professor (EMP ID,Name,Status,Salary,Age)
Course(Course ID,Course Name,PoINts)
Works(Course ID,EMP ID,Class ID) 
```

我已将以下查询写入返回谁教过 M1 或 M2 课程但不是两者的员工列表

```
SELECT p.empid,p.name
FROM professor p,course c,works w
WHERE p.empid = w.empid
AND w.courseid = c.courseid
AND ((c.coursename = ‘m1’ AND c.coursename != ‘m2’)
OR
(c.coursename = ‘m2’ AND c.coursename != ‘m1’)) 
```

上面的查询是否正确，因为我是 sql 新手，请帮忙

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T06:05:59.273

这个问题通常被称为`Relational Division`. 下面的查询所做的是获取教授的所有教授的姓名，该教授教授诸如`m1`和之类的课程`m2`。在对教授进行过滤后，它会计算 distinct 的数量`CourseName`。显然，如果它只教授一门课程，它就会返回一门`:D`。

```
SELECT  a.EmpID, a.Name
FROM    Professor a
        INNER JOIN Works b
            ON a.EmpID = b.EmpID
        INNER JOIN  Course c
            ON b.CourseID = c.CourseID
WHERE   c.CourseName IN ('m1', 'm2')
GROUP   BY a.EmpID, a.Name
HAVING  COUNT(DISTINCT c.CourseName) = 1 
```

*   [关系划分的SQL](http://www.simple-talk.com/sql/t-sql-programming/divided-we-stand-the-sql-of-relational-division/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T06:09:57.830

尝试：

```
SELECT p.empid,p.name
FROM professor p join works w on
p.empid = w.empid
having count(w.courseid) = 2 
```

这假设您总共有 2 个课程，虽然不太可能，但它会为您指明正确的方向。

# python - 检测序列是否是Python中子序列的倍数

> ID：15332148
> 
> 赞同：14
> 
> 时间：2013-03-11T06:02:26.153
> 
> 标签：python, algorithm, sequence

我有一个 0 和 1 的元组，例如：

```
(1, 0, 1, 1, 1, 0, 1, 1, 1, 0, 1, 1) 
```

事实证明：

```
(1, 0, 1, 1, 1, 0, 1, 1, 1, 0, 1, 1) == (1, 0, 1, 1) * 3 
```

我想要一个函数`f`，使得 if`s`是一个由零和一组成的非空元组，`f(s)`是最短的子元组`r`，使得`s == r * n`对于某个正整数`n`。

例如，

```
f( (1, 0, 1, 1, 1, 0, 1, 1, 1, 0, 1, 1) ) == (1, 0, 1, 1) 
```

`f`用 Python编写函数的巧妙方法是什么？

编辑：

我目前使用的幼稚方法

```
def f(s):
  for i in range(1,len(s)):
    if len(s)%i == 0 and s == s[:i] * (len(s)/i):
      return s[:i] 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-11T07:02:06.213

我相信我有一个 O(n) 时间解决方案（实际上是 2n+r，n 是元组的长度，r 是子元组），它不使用后缀树，而是使用字符串匹配算法（如 KMP，你应该找到它-架子）。

我们使用以下鲜为人知的定理：

```
If x,y are strings over some alphabet,

then xy = yx if and only if x = z^k and y = z^l for some string z and integers k,l. 
```

我现在声称，就我们的问题而言，这意味着我们需要做的就是确定给定的元组/列表（或字符串）是否是其自身的循环移位！

为了确定一个字符串是否是其自身的循环移位，我们将它与自身连接（它甚至不必是真正的连接，只需一个虚拟连接即可）并检查子字符串匹配（与自身）。

为了证明这一点，假设字符串是自身的循环移位。

我们有给定的字符串 y = uv = vu。由于 uv = vu，我们必须有 u = z^k 和 v= z^l，因此 y = z^{k+l} 从上述定理。另一个方向很容易证明。

这是python代码。该方法称为powercheck。

```
def powercheck(lst):
    count = 0
    position = 0
    for pos in KnuthMorrisPratt(double(lst), lst):
        count += 1
        position = pos
        if count == 2:
            break

    return lst[:position]

def double(lst):
    for i in range(1,3):
        for elem in lst:
            yield elem

def main():
    print powercheck([1, 0, 1, 1, 1, 0, 1, 1, 1, 0, 1, 1])

if __name__ == "__main__":
    main() 
```

这是我使用的 KMP 代码（由于 David Eppstein）。

```
# Knuth-Morris-Pratt string matching
# David Eppstein, UC Irvine, 1 Mar 2002

def KnuthMorrisPratt(text, pattern):

    '''Yields all starting positions of copies of the pattern in the text.
Calling conventions are similar to string.find, but its arguments can be
lists or iterators, not just strings, it returns all matches, not just
the first one, and it does not need the whole text in memory at once.
Whenever it yields, it will have read the text exactly up to and including
the match that caused the yield.'''

    # allow indexing into pattern and protect against change during yield
    pattern = list(pattern)

    # build table of shift amounts
    shifts = [1] * (len(pattern) + 1)
    shift = 1
    for pos in range(len(pattern)):
        while shift <= pos and pattern[pos] != pattern[pos-shift]:
            shift += shifts[pos-shift]
        shifts[pos+1] = shift

    # do the actual search
    startPos = 0
    matchLen = 0
    for c in text:
        while matchLen == len(pattern) or \
              matchLen >= 0 and pattern[matchLen] != c:
            startPos += shifts[matchLen]
            matchLen -= shifts[matchLen]
        matchLen += 1
        if matchLen == len(pattern):
            yield startPos 
```

对于您的示例，此输出

```
[1,0,1,1] 
```

正如预期的那样。

我将它与 shx2 的代码（不是 numpy 的代码）进行了比较，通过生成一个随机的 50 位字符串，然后复制以使总长度为 100 万。这是输出（十进制数是 time.time() 的输出）

```
1362988461.75

(50, [1, 1, 1, 0, 0, 1, 0, 1, 0, 0, 1, 0, 0, 1, 1, 1, 0, 0, 0, 0, 0, 0, 1, 1, 1, 1, 0, 0, 0, 1, 1, 0, 1, 1, 1, 1, 1, 1, 1, 0, 0, 1, 1, 1, 0, 0, 0, 0, 0, 1])

1362988465.96

50 [1, 1, 1, 0, 0, 1, 0, 1, 0, 0, 1, 0, 0, 1, 1, 1, 0, 0, 0, 0, 0, 0, 1, 1, 1, 1, 0, 0, 0, 1, 1, 0, 1, 1, 1, 1, 1, 1, 1, 0, 0, 1, 1, 1, 0, 0, 0, 0, 0, 1]

1362988487.14 
```

上述方法耗时约 4 秒，而 shx2 的方法耗时约 21 秒！

这是计时码。（shx2 的方法称为 powercheck2）。

```
def rand_bitstring(n):
    rand = random.SystemRandom()
    lst = []
    for j in range(1, n+1):
        r = rand.randint(1,2)
        if r == 2:
            lst.append(0)
        else:
            lst.append(1)

    return lst

def main():
    lst = rand_bitstring(50)*200000
    print time.time()
    print powercheck(lst)
    print time.time()
    powercheck2(lst)
    print time.time() 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-11T06:35:51.400

以下解决方案是 O(N^2)，但具有不创建数据的任何副本（或切片）的优点，因为它基于迭代器。

根据您输入的大小，您避免复制数据的事实可能会导致显着的加速，但当然，它不会像复杂度较低的算法（例如 O(N*日志N))。

[这是我的解决方案的第二次修订，第一个在下面给出。这个更容易理解，并且更符合 OP 的元组乘法，仅使用迭代器。]

```
from itertools import izip, chain, tee

def iter_eq(seq1, seq2):
    """ assumes the sequences have the same len """
    return all( v1 == v2 for v1, v2 in izip(seq1, seq2) )

def dup_seq(seq, n):
    """ returns an iterator which is seq chained to itself n times """
    return chain(*tee(seq, n))

def is_reps(arr, slice_size):
    if len(arr) % slice_size != 0:
        return False
    num_slices = len(arr) / slice_size
    return iter_eq(arr, dup_seq(arr[:slice_size], num_slices))

s = (1, 0, 1, 1, 1, 0, 1, 1, 1, 0, 1, 1)
for i in range(1,len(s)):
    if is_reps(s, i):
        print i, s[:i]
        break 
```

[我的原始解决方案]

```
from itertools import islice

def is_reps(arr, num_slices):
    if len(arr) % num_slices != 0:
        return False
    slice_size = len(arr) / num_slices
    for i in xrange(slice_size):
        if len(set( islice(arr, i, None, num_slices) )) > 1:
            return False
    return True

s = (1, 0, 1, 1, 1, 0, 1, 1, 1, 0, 1, 1)
for i in range(1,len(s)):
    if is_reps(s, i):
        print i, s[:i]
        break 
```

您可以`set()`使用以下方法避免调用：

```
def is_iter_unique(seq):
    """ a faster version of testing len(set(seq)) <= 1 """
    seen = set()
    for x in seq:
        seen.add(x)
        if len(seen) > 1:
            return False
    return True 
```

并替换这一行：

```
if len(set( islice(arr, i, None, num_slices) )) > 1: 
```

和：

```
if not is_iter_unique(islice(arr, i, None, num_slices)): 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-11T20:03:22.593

简化 Knoothe 的解决方案。他的算法是对的，但是他的实现太复杂了。这个实现也是 O(n)。

由于您的数组仅由 1 和 0 组成，因此我所做的是使用现有的 str.find 实现（Bayer Moore）来实现 Knoothe 的想法。它在运行时出奇地简单和惊人地快。

```
def f(s):
    s2 = ''.join(map(str, s))
    return s[:(s2+s2).index(s2, 1)] 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-11T07:25:07.790

这是另一个解决方案（与我之前基于迭代器的解决方案竞争），利用 numpy.

它确实制作了您的数据的（单个）副本，但是利用您的值是 0 和 1 的事实，它非常快，这要归功于 numpy 的魔法。

```
import numpy as np

def is_reps(arr, slice_size):
    if len(arr) % slice_size != 0:
        return False
    arr = arr.reshape((-1, slice_size))
    return (arr.all(axis=0) | (~arr).all(axis=0)).all()

s = (1, 0, 1, 1, 1, 0, 1, 1, 1, 1, 1, 1) * 1000
a = np.array(s, dtype=bool)
for i in range(1,len(s)):
    if is_reps(a, i):
        print i, s[:i]
        break 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-12T01:06:59.027

这只是 Haskell 中的一个愚蠢的递归比较。Knoothe 的百万长弦 (fa) 大约需要一秒钟。很酷的问题！我会再考虑一下。

```
a = concat $ replicate 20000 
    [1,1,1,0,0,1,0,1,0,0,1,0,0,1,1,1,0,0,
     0,0,0,0,1,1,1,1,0,0,0,1,1,0,1,1,1,1,
     1,1,1,0,0,1,1,1,0,0,0,0,0,1]

f s = 
  f' s [] where
    f' [] result = []
    f' (x:xs) result =
      let y = result ++ [x]   
      in if concat (replicate (div (length s) (length y)) y) == s
            then y
            else f' xs y 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-11T06:20:45.503

只是解决问题的不同方法

我首先确定长度的所有因素，然后拆分列表并检查所有部分是否相同

```
>>> def f(s):
    def factors(n):
        #http://stackoverflow.com/a/6800214/977038
        return set(reduce(list.__add__,
                ([i, n//i] for i in range(2, int(n**0.5) + 1) if n % i == 0)))
    _len = len(s)
    for fact in reversed(list(factors(_len))):
        compare_set = set(izip(*[iter(s)]*fact))
        if len(compare_set) == 1:
            return compare_set

>>> f(t)
set([(1, 0, 1, 1)]) 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-03-11T07:07:25.717

您可以通过对输入数组的旋转二进制形式进行异或运算，在亚线性时间内将其存档：

1.  得到数组的二进制表示，`input_binary`
2.  从 循环`i = 1 to len(input_array)/2`，对于每个循环，将`input_binary`向右旋转`i`一位，将其保存为，`rotated_bin`然后比较`XOR`和。`rotated_bin``input_binary`
3.  产生 0的第一个`i`是所需子字符串的索引。

完整代码：

```
def get_substring(arr):
    binary = ''.join(map(str, arr)) # join the elements to get the binary form

    for i in xrange(1, len(arr) / 2):
        # do a i bit rotation shift, get bit string sub_bin
        rotated_bin = binary[-i:] + binary[:-i]
        if int(rotated_bin) ^ int(binary) == 0:
            return arr[0:i]

    return None

if __name__ == "__main__":
    test = [1, 0, 1, 1, 1, 0, 1, 1, 1, 0, 1, 1]
    print get_substring(test) # [1,0,1,1] 
```

# android - 将值发送到要在表格中显示这些值的先前活动

> ID：15332152
> 
> 赞同：0
> 
> 时间：2013-03-11T06:02:43.880
> 
> 标签：android, android-activity

我有一个活动，我想从中**导航到****按钮单击**事件上的另一个活动。

现在在新打开的活动中，我有一些编辑文本字段和一个按钮。单击按钮时，我想将**edittext的****值发送**到我想在表格中动态显示它们的**先前活动。**

 ****请指导我如何做到这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T06:15:11.803

在 Activity_A 的按钮中放这个

```
Intent i = new Intent(getApplicationContext(), Activity_A.class);
            startActivityForResult(i, 100); 
```

然后覆盖 onActivityResult(...)

```
@Override
protected void onActivityResult(int requestCode,
                                 int resultCode, Intent data) {
    super.onActivityResult(requestCode, resultCode, data);
    if(resultCode == 100){
         String editBoxTxt = data.getExtras().getString("txt");

         Toast.makeText(this,editBoxTxt  , Toast.LENGTH_SHORT).show();   
    }

} 
```

而在 Activity_B

```
Intent in = new Intent(getApplicationContext(),
                    Activity_A.class);
            // String str = get EditText value
            in.putExtra("txt", str);
            setResult(100, in);
            // Closing Activity_B
            finish(); 
```

希望这对您有所帮助。****

# asp.net - 仅使用 css 将标签与文本框正确对齐

> ID：15332154
> 
> 赞同：0
> 
> 时间：2013-03-11T06:03:04.557
> 
> 标签：asp.net, css, textbox, alignment, label

我知道阅读此标题可能会想到相同的 CSS 旧故事，但并不相同。我有一个文本框，我给了它占位符属性并向它应用了一个 CSS 类。现在我必须添加一个标签以将其标记为必填字段。问题是因为 css，我无法将标签放在文本框的右上角。

这是代码：

```
<div id="formwrap">
        <div class="formarea">
            <p class="sub_headline">
                User Details</p>

            <asp:TextBox ID="txtFname" class="input" placeholder="First name" runat="server"></asp:TextBox>
            <asp:Label runat="server" Text="*" ForeColor="Red"></asp:Label><br />
            <asp:RequiredFieldValidator runat="server" ErrorMessage="Please Enter First name" ControlToValidate="txtFname" ></asp:RequiredFieldValidator>

</div>
</div> 
```

CSS代码：

```
.input
{
    font-family: 'Lato' , sans-serif;
    border: 1px solid #CCCCCC;
    width: 65%;
    height: 20px;
    margin: 14px 94px 0 0;
    font-size: 16px;
    font-weight: lighter;
    padding: 4px;
    color: #E96151;
    float: left;
} 
```

我怎样才能摆脱它？

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T06:27:15.283

只需删除文本框的边距即可。

```
.input
{
    font-family: 'Lato' , sans-serif;
    border: 1px solid #CCCCCC;
    width: 65%;
    height: 20px;
    /*margin: 14px 94px 0 0;*/
    font-size: 16px;
    font-weight: lighter;
    padding: 4px;
    color: #E96151;
    float: left;
} 
```

请查看 html 控件中的这个[**DEMO**](http://jsfiddle.net/BLgLK/)，如果您不想编辑 css 类，则只需覆盖`style="margin:0;"`在文本框中添加。

**建议：**占位符仅适用于 html 输入，您可以使用下面的代码来代替，效果很好。

```
 <asp:TextBox ID="txtFname" class="input" Text="First Name"
       onblur="if (this.value == '') {this.value = 'First Name';}" onfocus="if (this.value == 'First Name') {this.value = '';}" runat="server"></asp:TextBox> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T06:12:09.920

您可以通过在设计应用程序的 UI 时使用 HTML 表格来解决此问题。

取一个 HTML 表格并将文本框放在一列中，并将下一列中的标签 [Manditory *] 放在文本框中，如下所示>>

```
 <table class="style1">
        <tr>
            <td>
                <asp:TextBox ID="TextBox1" runat="server"></asp:TextBox>
            </td>
            <td>
                <asp:Label ID="lblMantitory" runat="server" Text="*"></asp:Label>
            </td>
        </tr>

    </table> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-11T06:17:18.863

您必须为每个元素创建不同的父容器，然后才有可能。

```
<div id="formwrap">
    <div class="formarea">
        <p class="sub_headline">
            User Details</p>

        <asp:TextBox ID="txtFname" class="input" placeholder="First name" runat="server"></asp:TextBox>
        <div>
          <asp:Label runat="server" Text="*" ForeColor="Red"></asp:Label><br />
        </div>
        <div>
            <asp:RequiredFieldValidator runat="server" ErrorMessage="Please Enter First name" ControlToValidate="txtFname" ></asp:RequiredFieldValidator>
        </div>
     </div>  
</div> 
```

并设置样式垂直对齐

# c - malloc 分配的指针大小

> ID：15332156
> 
> 赞同：0
> 
> 时间：2013-03-11T06:03:12.620
> 
> 标签：c, memory, malloc

```
char* pointer;
pointer = malloc (20000);

printf("%d", sizeof(pointer));
//output: 8 
```

由于我使用 malloc 保留了 20000 个字节，因此我期望输出为 20000。但是，它返回 8。为什么会这样？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-11T06:10:19.483

您必须使用 64 位系统/操作系统，这就是为什么它为 printf("%d", sizeof(pointer)); 打印 8 的原因

当你声明 char *p; 它将在您的内存中保留等于 sizeof(char *) 的空间。

现在，如果系统是 64 位，它将保留 8 个字节，或者如果它是 32 位，则它将保留 4 个字节。

现在

```
char* pointer;
pointer = malloc (20000); 
```

当您定义指针 = malloc(20000) 时，它将在内存中保留一个 20000 字节的块，其中指针指向该块的第一个字节，它不会为指针分配 20000 字节。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-11T06:04:11.823

`sizeof`返回您传递给它的*类型的大小。*
类型是`char *`，它只是指向一个大小的内存位置`20000`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-11T06:06:17.820

sizeof 为您提供指针变量的大小，而不是它指向的区域的大小。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-11T06:05:35.090

`sizeof`是编译时运算符。它只知道指针的大小（这里是 8 个字节），而不知道它所指向的大小。 `sizeof`在运行时不存在。

# amazon-web-services - Amazon RDS 的可用内存不足。我应该担心吗？

> ID：15332158
> 
> 赞同：61
> 
> 时间：2013-03-11T06:03:26.200
> 
> 标签：amazon-web-services, amazon-rds

我有一个 Amazon RDS 实例。自设置超过 1-2 周以来，可用内存一直在下降，从 15GB 内存下降到大约 250MB。由于它在最近几天下降到这个低点，它开始类似于锯齿模式，其中可用内存下降到这个范围（250 - 350MB），然后以锯齿模式重新回到 500 - 600MB。

申请质量没有明显下降。但是，我担心数据库会耗尽内存并崩溃。

是否存在 RDS 实例内存不足的危险？是否有一些设置或参数我应该查看以确定实例是否设置正确？是什么导致了这种锯齿状图案？

![可释放内存下降](../Images/4ae3cd67e970e7a601f3d5144e42cc96.png)

* * *

## 回答 #1

> 赞同：48
> 
> 时间：2015-01-22T21:52:26.023

简短的回答 - 您不应该担心 FreeableMemory，除非它变得非常低（大约 100-200 Mb）或发生大量交换（请参阅 RDS SwapUsage 指标）。

FreeableMemory 不是 MySQL 指标，而是 OS 指标。很难给出精确的定义，但您可以将其视为操作系统能够分配给任何请求它的内存（在您的情况下可能是 MySQL）。[MySQL 有一组设置将其整体内存使用限制在某个上限（您可以使用类似的](http://www.mysqlcalculator.com/)东西来实际计算它）。您的实例不太可能达到此限制，因为通常您永远不会达到最大连接数，但这仍然是可能的。

现在回到 FreeableMemory 指标中的“下降”。对于 MySQL，InnoDB 缓冲池消耗的大部分内存（请参见[此处](http://dev.mysql.com/doc/refman/5.5/en/innodb-buffer-pool.html)详情）。默认情况下，配置中的 RDS 实例将此缓冲区的大小设置为主机物理内存的 75% - 在您的情况下约为 12 GB。此缓冲区用于缓存在读取和写入操作中使用的所有 DB 数据。所以在你的情况下，因为这个缓冲区真的很大 - 它正在慢慢地填充缓存的数据（这个缓冲区很可能实际上大到足以缓存所有数据库）。因此，当您第一次启动实例时，该缓冲区是空的，并且一旦您开始将内容读/写到 DB 中，所有这些数据都会被带入缓存。他们将一直留在这里，直到此缓存已满并出现新请求。此时，最近最少使用的数据将被新数据替换。因此，数据库实例重启后 FreeableMemory 的初始下降可以解释这一事实。这不是一件坏事，因为您实际上希望尽可能多的数据被缓存，以便您的数据库更快地工作。唯一令人讨厌的事情是当部分或全部缓冲区将被推出物理内存进入交换时。到那时，您将有巨大的性能下降。

作为预防措施，调整用于不同事物的 MySQL 最大内存可能是一个好主意，以防 FreeableMemory 指标始终处于 100-200 Mb 的水平，以减少交换的可能性。

* * *

## 回答 #2

> 赞同：46
> 
> 时间：2013-03-11T06:49:56.150

MySQL 使用可释放内存字段为其自己的进程进行缓冲和缓存。Freeable 内存量随时间减少是正常的。我不会担心它会排除旧信息，因为它需要更多空间。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2019-02-05T21:28:35.330

在 AWS 获得了几张支持票后，我发现调整参数组会有所帮助，特别是共享缓冲区，降低它们以保持保留数量，以避免由于内存不足而导致丢失或故障转移

# c# - 控制器中带参数的构造函数 - MVC

> ID：15332159
> 
> 赞同：7
> 
> 时间：2013-03-11T06:03:31.943
> 
> 标签：c#, asp.net-mvc, constructor

我读过几篇关于 IOC 和 Unity 的文章，让我自己感到困惑 :(

所以回到基础，有人能告诉我下面的代码是做什么的吗？

```
private IStudent _student;
public HomeController(IStudent student)
{
     _student= student;
}

public interface IStudent 
{
     // Some method
} 
```

Itz Basic 但我试图从外行的角度理解。上面的代码究竟做了什么？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-03-11T06:42:47.193

HomeController*依赖*于 Student，因为它将一些责任委托给 Student 类。

**一种实现方式是：**

```
public HomeController()
{
    private Student _student;
    public HomeController()
    {
        _student = new Student();
    }
}
public class Student 
{
    // Some method
} 
```

但是 HomeController 对 Student 类有很强的**依赖性**。如果您想使用 Student 的其他一些实现（例如，想在对 HomeController 进行单元测试时模拟 Student）怎么办？您将不得不修改 Student 类或 HomeController 类（或使用其他一些不太好的选项）。这意味着您的 HomeController与Student 类**紧密耦合。**

**另一种方式是您发布的代码：**

```
public class HomeController
{
    private IStudent _student;
    public HomeController(IStudent student)
    {
        _student = student;
    }
}
public interface IStudent
{
    // Some method
}
public class Student : IStudent
{
    // Implementation of some method
} 
```

在这里，您可以传递 IStudent 的任何实现，即在您的单元测试中您可以传递 IStudent 的模拟对象，在您的实际代码中您将传递 Student 类的对象。所以你的 HomeController 现在*依赖*于 IStudent 接口（抽象）而不是 Student 类（一个实现）。这符合 OOP 原则：

> 编程接口，而不是实现。
> 
> 依赖于抽象。不要依赖具体的类。

此外，它现在具有软依赖性。它不再与 Student 类紧密耦合。它是**松耦合的**。现在，通常您不必担心在实例化 HomeController 时应该通过哪个 IStudent 实现。只要您使用它注册正确的接口和类，这就是依赖注入容器（在您的情况下为 Unity）将负责的事情。

```
_container.Register<IStudent, Student>(); 
```

因此，当需要 HomeController 的新实例时，容器将识别出需要 IStudent 的实例。所以它将实例化 IStudent 的注册实例，并在实例化 HomeController 类时将其作为参数传递。

另外，请注意，您所指的是“依赖注入”（这是 IoC 的一种特定形式）。还有其他形式的 IoC（例如回调、观察者模式等）。

**编辑：** 不要忘记阅读关于 DI的[热门文章。](http://martinfowler.com/articles/injection.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-11T06:11:09.803

一般来说，它被称为注入一个类的依赖项，考虑一个类，或者更确切地说是一个处理所有东西的 GOD 类（验证用户输入、与数据库协调、生成 HTML 输出等），这样你就可以保留所有代码单一的地方，或者你可以说你使用单一的类来开发你所有的软件，不是很好吗？

答案取决于你组织事物的方式，你认为将事物组织在它所属的地方比你在上面的 GOD 课程中看到的问题更有益。

因此，就 OOPS 而言，单个类 shd 有一个需要更改的原因，但需要完成工作而不是 shd 从服务中获取帮助。

你的 HomeController 也在做同样的事情，因为它不想过度工作，它已经要求 Student 对象来处理 student。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-11T06:10:23.750

在 IoC 中，您需要注册接口和实现该接口的类。因此，一旦你注册了，只要你有上面的签名，IoC 就会自动创建一个 IStudent 实现类的实例，并在初始化控制器时将其注入到对象中。它节省了声明成员的时间和精力。在上述情况下，您只需声明一个，但它的数量可能更多，并且所有这些都可能需要更多的实例才能传递给控制器​​。一旦我们正确地注册了所有这些，IoC 之后就会开始工作。事实上，我们可以决定注入成员的范围/生命周期。它可以是 PerInstance/Per Request/ 或 Singleton。

有许多可用的 IoC 框架，由您决定使用哪一个。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-11T06:15:37.683

当 IOC 解析器构造一个新的 HomeController 对象时，它将通过其构造函数获取一个实现 IOC 容器（您注册的容器）提供的 IStudent 接口的对象。

您可以在此处阅读有关[构造函数注入的更多信息。](http://www.codeproject.com/Articles/13831/Dependency-Injection-for-Loose-Coupling)

# magento - Magento 块文件有时没有显示

> ID：15332160
> 
> 赞同：0
> 
> 时间：2013-03-11T06:03:32.740
> 
> 标签：magento, templates

目录.xml

```
<default>
    <!-- Mage_Catalog -->
    <reference name="top.menu">
        <block type="catalog/navigation" name="catalog.topnav" template="catalog/navigation/top.phtml">
          <block type="catalog/navigation" name="topnav_extra" template="catalog/navigation/top_extra.phtml" />
        </block>
    </reference> 
```

top_extra.phtml

```
<ul>
<li> Custom Menu1 </li>
<li> Custom Menu2 </li>
</ul> 
```

顶部.phtml

```
<?php if($_menu): ?>
<ul id="topnav">
    <?php echo $_menu ?>
    <!-- Header Menu laset tab start here --> 
<?php  echo $this->getChildHtml('topnav_extra');  ?>
</ul> 
```

当我刷新两次或三次时，此块有时不会显示。我每天使用 cron 进行重新索引和缓存刷新。但我不知道为什么它会随机出现？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T06:25:21.617

这对我来说听起来像是一个缓存问题。尝试通过 PHP 而不是 XML 调用您的自定义菜单

```
 <?php echo $this->getLayout()->createBlock('cms/block')->setBlockId('block_id')- >toHtml(); ?> 
```

这将缓解您在使用 XML 文件时可能遇到的任何问题。希望这可以帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T13:38:06.267

```
<?php echo $this->getLayout()->createBlock('core/template')->setTemplate('catalog/navigation/top_extra.phtml')->toHtml(); ?> 
```

我包括那个没有布局句柄的文件。我不确定这样做是否正确？但它的出现。我放了日志以知道它没有出现多少次..会看到

# objective-c - 在新的 UIScrollView 中粘贴 UIImageViews 后保留位置

> ID：15332162
> 
> 赞同：0
> 
> 时间：2013-03-11T06:03:47.233
> 
> 标签：objective-c, uiview, uiscrollview

我为一个应用程序制作了一个原型，作为一个概念证明来测试功能是否正常工作。现在我对工作功能感到满意，我想将放在 a 中的图像粘贴`UIView`到 a`UIScrollView`中，这样我就可以在不同的页面中显示数据。但是，当我选择元素并将其粘贴到 a 中`scrollview`时，所有位置都丢失了，我必须手动将元素放置在界面构建器中。

看看这张图片，我有很多元素需要粘贴到`UIScrollView`.

![在此处输入图像描述](../Images/f6d169a45da2e0ec1a068b21a6d92552.png)

有没有更好的方法来做到这一点？还是我必须手动将元素放置在我想要的位置？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T06:11:14.327

如果您想避免在 IB 中重新定位控件的头痛，请尝试以下选项

1）再拿一个`UIView`。

2) 添加`UIScrollView`到`UIView`.

3）将您的当前`UIView`（您在问题中显示的视图）添加到`UIScrollView`.

谢谢。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-02T15:11:35.643

选择所有孩子，然后选择菜单/编辑器/嵌入滚动视图。等等瞧！

# c++ - OpenCV：在 C++ 中将 CV_8UC3 图像转换为 CV_32S1 图像

> ID：15332163
> 
> 赞同：2
> 
> 时间：2013-03-11T06:03:51.253
> 
> 标签：c++, opencv, type-conversion, mat, watershed

我需要将具有 3 个通道的 CV_8U 图像转换为必须是单通道 CV_32S 的图像。但是当我尝试这样做时，我得到的图像全是黑色的。我不明白为什么我的代码不起作用。

我正在处理灰度图像，这就是为什么我将 3 通道图像拆分为单通道图像的矢量，然后只处理第一个通道。

```
//markers->Image() returns a valid image, so this is not the problem

cv::Mat dst(markers->Image().size(), CV_32SC1);
dst = cv::Scalar::all(0);
std::vector<cv::Mat> vectmp;
cv::split(markers->Image(), vectmp);
vectmp.at(0).convertTo(dst, CV_32S);

//vectmp.at(0) is ok, but dst is black...? 
```

先感谢您。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-11T11:12:53.133

您是否尝试过获取结果图像的值？像这样：

```
for (int i=0; i<result.rows; i++)
{
    for (int j=0; j<result.cols; j++)
    {
        cout << result.at<int>(i,j) << endl;
    }
} 
```

我已经将（也使用过`convertTo`）随机灰度单通道图像转换为`CV_32S`（它是每个像素的有符号 32 位整数值）我的输出是这样的：

```
80
111
132 
```

当我试图展示它时，我也会得到黑色图像。从[文档](http://docs.opencv.org/modules/highgui/doc/user_interface.html#imshow)：

> 如果图像是 16 位无符号或 32 位整数，则像素除以 256。即取值范围 [0,255*256] 映射到 [0,255]。

因此，如果您将这些小数除以 255，您将得到 0（`int`类型）。这就是为什么`imshow`显示黑色图像。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-22T10:17:23.673

我有同样的问题，通过尝试将 8UC1 转换为 32S 而不是 8UC3 来间接解决它。

RgbToGray 接受使用 8UC3 或 8UC1 元素类型创建灰度图像。8UC1 图像是我的标记图像。

我在 Opencvsharp 中做到了这一点：

```
Mat buf3 = new Mat(iplImageMarker);
buf3.ConvertTo(buf3, MatType.CV_32SC1);
iplImageMarker= (IplImage)buf3;

iplImageMarker=iplImageMarker* 256; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-28T19:36:08.463

我相信这就是您正在寻找的。将您的图像转换为此 8 位单通道。CV_8UC1。您从 8 位图像开始并将其更改为 32 位单通道？为什么？保持8位。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-11T11:31:07.443

如果要显示 32 位图像并看到有意义的结果，则需要在调用之前将其所有元素乘以 256 `imshow`。否则，`imshow`会将您的值缩小为零，您将获得黑色图像（正如 Astor 指出的那样）。

由于原始值是 8 位无符号的，它们必须小于 255。因此将它们乘以 256 是安全的，不会溢出 32 位整数。

**编辑**我刚刚意识到您的输出类型是有*符号*的32 位整数，但原始类型是*无符号*的 8 位整数。在这种情况下，您需要适当地缩放您的值（查看[scaleAdd](http://opencv.willowgarage.com/documentation/cpp/core_operations_on_arrays.html#scaleAdd)）。

最后，在开始丢弃图像通道之前，您可能需要确保图像是 YCbCr 格式。

# r - 如何处理“rpart”中的连续和离散变量 - 使用 R 的决策树？

> ID：15332168
> 
> 赞同：3
> 
> 时间：2013-03-11T06:04:20.937
> 
> 标签：r, classification, decision-tree, rpart

我正在使用 R 中的包**rpart**创建一些决策树。我的数据集中有离散变量，如年龄、儿童数量。但是生成的决策树有这些变量 n 小数。这意味着，它被视为连续变量。

如何避免这种情况以及如何使这些变量在我的决策树中离散？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T06:17:52.097

将它们变成因子，这是在 R 中表示离散变量的标准方法。

# windows - 线程 fs 段寄存器在用户和内核空间之间切换

> ID：15332171
> 
> 赞同：5
> 
> 时间：2013-03-11T06:04:41.630
> 
> 标签：windows, multithreading, kernel

fs段寄存器如何指向TEB和KPCR。这些数据结构是否保存在线程用户和内核堆栈中？那么，当线程上下文从用户切换到内核时，包含 TEB 指针的 fs 段寄存器被保存到线程用户堆栈中，然后指向 KPCR 的内核 fs 段寄存器被加载回fs 段寄存器？这是 fs 段寄存器指向 TEB 和 KPCR 的方式吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-11T06:38:13.287

该寄存器在或（本地/全局段描述符表）`FS`中具有与其关联的段基地址。几乎是描述符表的索引，它选择表中定义的段之一。`LDT``GDT``FS`

当您通过`FS`（使用`FS`指令中的段覆盖前缀）访问内存时，您访问的虚拟地址等于指令中的地址*加上*段基地址。

该段基地址必须与线程特定的控制数据结构的位置一致。因此，当使用其特定的控制数据结构创建线程时，基础设置为指向该数据。

这些位置对于同一进程中的不同线程是不同的，因为它们都共享内存并且不应该跨入彼此的结构。上下文切换要么只是更新`FS`以指向不同的段，要么更新描述符表中段的基地址，然后重新加载`FS`，以便 CPU 观察到更改。

当一个线程从用户模式转换到内核模式时，`FS`它指向的内容不受内核 POV 的信任，我希望内核重新加载`FS`一个指向内核端线程特定数据结构的值。在回来的路上，`FS`应该恢复用户模式。实际上，事情可能会更复杂一些，但这应该会给你一个想法。

在 64 位模式下，您甚至有`SWAPGS`快速交换`GS`寄存器内容的指令，其作用类似于`FS`在 32 位模式下。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T07:30:35.117

所以fs段寄存器肯定指向kpcr。查看windbg并发出“dt nt！_kpcr”后，kpcr中的第一个结构是NtTib或TEB中的第一个结构，所以当人们说fs指向KPCR和TEB时，fs实际上指向KPCR和TIB/TEB是KPCR 中的第一个数据结构。

# c++ - c++ while循环重复

> ID：15332173
> 
> 赞同：1
> 
> 时间：2013-03-11T06:04:52.033
> 
> 标签：c++

我有以下代码。当输入类似的东西时`jackpot`，它会打印出 8 次 cout，每个字符一次。为什么要这样做？信息是一个结构，数字是一个整数。

```
do {
        cout <<"Please input a valid number."<< endl;
        cin>>information.number;
        if (!cin)
          {
             cin.clear();
             cin.ignore();
          }
    }
while(information.number> 12 || information.number< 1); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T06:09:12.033

您可以指定最大忽略长度长度和忽略`delimiter`：

```
do {
        cout <<"Please input a valid number."<< endl;
        cin>>information.number;
        if (!cin)
          {
             cin.clear();
             cin.ignore(1024, '\n'); // ignore up to 1024 chars. until '\n'
          }
    }
while(information.number> 12 || information.number< 1); 
```

# python - 排列代码没有完全按照我的意愿去做

> ID：15332179
> 
> 赞同：-1
> 
> 时间：2013-03-11T06:05:25.737
> 
> 标签：python, permutation, combinations

我对 python 很陌生，我已经完成了这段代码，但并没有完全按照我的意愿去做。非常感谢您的帮助。

这是我到目前为止的代码

```
def permute(LIST):

    length=len(LIST)
    if length <= 1:
        yield LIST
    else:
        for n in range(0,length):
             for end in permute( LIST[:n] + LIST[n+1:] ):
                 yield [ LIST[n] ] + end 
```

当我给它[4,3,2,1]之类的东西时，它不会重复最后一个数字，它只会对每个字母进行一次组合。因此，例如，输出永远不会是 [4,3,2,2]。

但我希望它这样做。这是我希望输出的示例

```
INPUT = ['1','2','3','4']

OUTPUTs = [1 2 3 4][1 2 3 1][1 2 3 2][1 2 3 3] [1 2 4 1][1 2 4 2] [1 2 4 3] [1 2 4 4] [1 2 1 1]and so on 
```

我可以对我的代码做些什么来实现这个改变？

谢谢你的热心帮助

编辑：我不能使用 ITERTOOLS

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T06:10:12.713

好的。我使用 itertools.permutations 得到 -1 :(

似乎您需要在不使用 itertools 的情况下重复排列。干得好：

```
def permutation_with_repitition(items, prefix):
  if len(prefix) == len(items):
     yield prefix

  else:
    for item in items:
      prefix.append(item)
      for p in  permutation_with_repitition(items, prefix):
        yield p
      prefix.pop()

L = [1,2,3]

for p in permutation_with_repitition(L, []):
  print p 
```

输出：

```
[1, 1, 1]
[1, 1, 2]
[1, 1, 3]
[1, 2, 1]
[1, 2, 2]
[1, 2, 3]
[1, 3, 1]
[1, 3, 2]
[1, 3, 3]
[2, 1, 1]
[2, 1, 2]
[2, 1, 3]
[2, 2, 1]
[2, 2, 2]
[2, 2, 3]
[2, 3, 1]
[2, 3, 2]
[2, 3, 3]
[3, 1, 1]
[3, 1, 2]
[3, 1, 3]
[3, 2, 1]
[3, 2, 2]
[3, 2, 3]
[3, 3, 1]
[3, 3, 2]
[3, 3, 3] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T06:31:36.520

但也许[itertools.product](http://docs.python.org/2/library/itertools.html#itertools.product)是你想要的：

```
>>> I = range(3)
>>> print list(itertools.product(I, repeat=len(I)))
[(0, 0, 0), (0, 0, 1), (0, 0, 2), (0, 1, 0), (0, 1, 1), (0, 1, 2), (0, 2, 0), (0, 2, 1), (0, 2, 2), (1, 0, 0), (1, 0, 1), (1, 0, 2), (1, 1, 0), (1, 1, 1), (1, 1, 2), (1, 2, 0), (1, 2, 1), (1, 2, 2), (2, 0, 0), (2, 0, 1), (2, 0, 2), (2, 1, 0), (2, 1, 1), (2, 1, 2), (2, 2, 0), (2, 2, 1), (2, 2, 2)] 
```

# c++ - 凯撒密码解密器

> ID：15332180
> 
> 赞同：0
> 
> 时间：2013-03-11T06:05:26.560
> 
> 标签：c++, encryption

好的，所以我一直在“任务”编写一个程序来解密简单的凯撒密码。

我的一切工作正常，只有我的输入停止了大约 29 个字符。它从一个非常大的文件中读取，文本停止在：“独立声明”中间句子。有什么想法可能导致这种情况吗？我假设我在这里滥用和误用某些东西。随意向我的头扔石头。我相信我可以使用更多的“学习”

编辑：经过进一步调查，我相信我的问题与我的循环和 sizeof(myarray) 有关

编辑2：我已经编辑了代码，现在由于**“访问冲突读取位置0x002A4000”而中断：**

```
 for (int i = 0; i < myArray.length(); i++)
    {
        // pritns each occurance cout << char(i + 'a') << " has " << count_Array[i] <<" occuarnces"  <<endl;
        if (count_Array[i] > tester)
        {
            //finds largest 
            tester = count_Array[i];
            max_array_value = i;
        }
    }
    // print

Thanks for any tips :] 

code: 

   #include <iostream>
#include <string>
#include <cctype>
#include <fstream>
using namespace std;

int decipher(string myArray, string outputFileName);

int main ()
{ 
    string outputFileName;
    string inputFileName;
    ifstream inputFile;
    string reply;
    char myArray;
    string all_text = "";

    //getting input and output files
    cout << "Please input filename: ";
    getline(cin,inputFileName);
    cout <<"please enter output filename:";
    getline(cin,outputFileName);
    //opens file
    inputFile.open(inputFileName);

    if (!inputFile.is_open())
    {
        //file failed to open
        cout <<"unable to open input file." <<endl << "Press enter to continue...";
        getline(cin,reply);
        exit(1);
    }
    //read file into all_text
    while(inputFile.peek() != EOF)
    {
        inputFile.get(myArray);
            all_text+=myArray;

    }
    // prints out file cout <<all_text;
            inputFile.close();
            //send to decipher
            decipher(all_text, outputFileName);
    cout << "press enter to continue";
    getline(cin,reply);
    return 0;
}

int decipher(string myArray, string outputFileName)
{
    char default_alp[26] = {'a', 'b' ,'c','d','e','f','g','h','i','j','k','l','m','n','o','p','q','r','s','t','u','v','w','x','y','z' };
    int count_Array[26] = { 0 };
    int tester = count_Array[0];
    int max_array_value = 0;
    string my_Message;
    char temp;
    ofstream outputFile;
    //gets count of occurances
    for (int i = 0; i < myArray.length(); i++)
    {
        count_Array[tolower(myArray[i]) - 'a']++;
    }

    for (int i = 0; i < myArray.length(); i++)
    {
        // pritns each occurance cout << char(i + 'a') << " has " << count_Array[i] <<" occuarnces"  <<endl;
        if (count_Array[i] > tester)
        {
            //finds largest 
            tester = count_Array[i];
            max_array_value = i;

        }
    }
    // prints useful information cout << "Largest number of occurances " << default_alp[max_array_value] <<endl << "shift amount is: " << default_alp[max_array_value]-'e' <<endl;
    for (int i = 0; i < myArray.length(); i++)
    {
//prints out each letter    cout << myArray[i];
    }

    for (int i = 0; i < myArray.length; i++)
    {
        cout <<myArray.length();
        //shifts the text based on value in dec
        int shift = default_alp[max_array_value]-'e';
        temp = myArray[i];
        if (isalpha(temp))
        {
            if(tolower(myArray[i])-shift >= 97)
            {
                my_Message += tolower(myArray[i]) - shift;
            }
            else
            {
                my_Message += tolower(myArray[i]) + 26-shift;
            }
        }
        else
        {
                my_Message +=myArray[i];
        }
    }
    outputFile.open(outputFileName);
    outputFile << my_Message;
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T06:23:36.733

你用的是什么编译器。对我来说，它不会编译，因为

//打开文件 inputFile.open(inputFileName);

需要//打开文件 inputFile.open(inputFileName.c_str());

[http://www.cplusplus.com/reference/fstream/ifstream/open/](http://www.cplusplus.com/reference/fstream/ifstream/open/)

但是当它编译时，一切似乎都正常。整个文件被读取。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T06:43:16.650

在`decipher`中，`sizeof(myArray)`为您提供`string`实例的大小。该`string`实例可能包含字符串的实际长度、非常小的字符串的一些空间和指向实际数据的指针，但它不包含数据，即字符串本身。

而不是`sizeof(myArray)`，使用`myArray.length()`！

# java - 当主代码引用测试代码时，我可以让 eclipse（使用 maven、m2e）抛出错误/警告吗？

> ID：15332182
> 
> 赞同：5
> 
> 时间：2013-03-11T06:05:36.553
> 
> 标签：java, eclipse, unit-testing, maven, m2e

我正在使用带有默认设置的 m2e 的 Eclipse (4.2 Juno)。源代码在`src/main/java`，测试代码在`src/test/java`.

有时我不经意间`import`把一些东西从测试转到了主类。Eclipse 不会抱怨这一点（两者`src/main/java`都`src/test/java`只是在使用 m2e 时配置为源文件夹），并且测试都可以正常运行，因为测试环境（JUnit）可以从 main 和 test 访问代码。`ClassNotFoundException`但是，当我稍后尝试自己运行主代码时（经过表面测试后），我在尝试使用代码时不可避免地会得到一堆s。

有没有办法让 Eclipse 在发生这种情况时显示错误或警告？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T09:55:58.963

如果您的代码 in`src/main/java`引用 中的代码`src/test/java`，它将根本无法使用 Maven 编译。无需为此编写您自己的执行器规则。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T11:59:54.690

不幸的是，没有办法做到这一点（据我所知）。m2e 有时也会以其他方式错误地获取类路径，因此您应该在签入之前习惯于运行 Maven 构建 - 不管 Eclipse 对代码编译的说法如何。

有关更多背景信息，请参阅此演示文稿[http://www.eclipsecon.org/europe2012/sites/eclipsecon.org.europe2012/files/EclipseConEU2012-m2e-talk.pdf](http://www.eclipsecon.org/europe2012/sites/eclipsecon.org.europe2012/files/EclipseConEU2012-m2e-talk.pdf)（在“依赖范围”下）。

# silverlight - 本地化在 Silverlight 中的框架中不起作用

> ID：15332188
> 
> 赞同：0
> 
> 时间：2013-03-11T06:05:59.870
> 
> 标签：silverlight

在我的 Silverlight 应用程序中，我在该页面中有主页，我有 6 个按钮（Page1、page2、Back、Forward、en-US、ja-JP）。

在 MainPage 框架中加载第 1 页中的第 1 页 TextBox 与属性绑定然后我加载第 2 页并将语言更改为 Ja-Jp 并单击第 1 页的选定后退按钮但第 1 页文本框中的语言未更改这里是代码。请帮我解决这个问题

```
 TextBox     Text="{Binding ElementName=page1,Path=MyLanguage.IetfLanguageTag, Mode=TwoWay}" 
   public XmlLanguage MyLanguage
    {
        get { return (XmlLanguage)GetValue(MyLanguageProperty); }
        set { SetValue(MyLanguageProperty, value); }
    }

    public static readonly DependencyProperty MyLanguageProperty =
        DependencyProperty.Register("MyLanguage", typeof(XmlLanguage), typeof(Page1), new PropertyMetadata(null, change));
    private static void change(DependencyObject d, DependencyPropertyChangedEventArgs e)
    {
        var update = d as Page1;
        update.languageChangeText.Text = ((System.Windows.Markup.XmlLanguage)(e.NewValue)).IetfLanguageTag.ToString();
    }

    public Page1()
    {
        InitializeComponent();
        Binding binding = new Binding();
        binding.Mode = BindingMode.TwoWay;
        binding.Source = this;
        //binding.RelativeSource = new RelativeSource() { Mode = RelativeSourceMode.FindAncestor, AncestorType = typeof(ContentControl), AncestorLevel = 1 };
        binding.Path = new PropertyPath("Language");
        binding.UpdateSourceTrigger = UpdateSourceTrigger.PropertyChanged;
        this.SetBinding(Page2.MyLanguageProperty, binding);
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T07:24:04.060

看起来一切都是正确的，除了你的绑定路径

*binding.Path = new PropertyPath("语言");* 应该

```
binding.Path = new PropertyPath("MyLanguage"); 
```

# apache-flex - 如何在项目渲染器中动态更改组件的属性？

> ID：15332190
> 
> 赞同：0
> 
> 时间：2013-03-11T06:06:12.720
> 
> 标签：apache-flex, datagrid, flex4, itemrenderer

我有一个包含形状对象数组的数据网格表。我的数据网格表中的 GridColumn 调用了一个名为“MovementLogItemRenderer”的项目渲染器。

在我的“MovementLogItemRenderer”中，我有一个包含几个标签的 HGroup。我使用 itemRenderer 的数据属性来访问要在标签中显示的某些信息。

我想要做的是控制标签中文本的颜色。因此，当 data.shapeColor 的值等于 "purple" 时，我想更改特定标签中文本的颜色。

当我运行该文件时，它没有向我显示任何内容。整个 UI 未显示在浏览器上。

请有人告诉我如何做到这一点？这样做的正确方法是什么？

这是我的包含数据网格表的 MXML 文件：

```
 <s:Application xmlns:fx="http://ns.adobe.com/mxml/2009" 
           xmlns:s="library://ns.adobe.com/flex/spark" 
           xmlns:mx="library://ns.adobe.com/flex/mx" minWidth="955" minHeight="600"
           creationComplete="createShapes()">
<fx:Declarations>
    <!-- Place non-visual elements (e.g., services, value objects) here -->
</fx:Declarations>
<fx:Script>
    <![CDATA[
        import mx.collections.ArrayCollection;
        import mx.controls.Alert;

        [Bindable]
        private var myShapes:ArrayCollection = new ArrayCollection();   

        import FrontEndObjects.Shapes;
        private function createShapes():void{
            var shape1:Shapes = new Shapes();
            shape1.shapeId = "1001";
            shape1.shapeName ="Rec";
            shape1.shapeColor ="pink";                  

            var shape2:Shapes = new Shapes();
            shape2.shapeId = "1002";
            shape2.shapeName ="Cirl";
            shape2.shapeColor ="orange";

            var shape3:Shapes = new Shapes();
            shape3.shapeId = "1003";
            shape3.shapeName ="Trig";
            shape3.shapeColor ="purple";

            myShapes.addItem(shape1);
            myShapes.addItem(shape2);   
            myShapes.addItem(shape3);   
        }

    ]]>
</fx:Script>
<s:DataGrid x="52" y="105" width="378" dataProvider="{myShapes}" requestedRowCount="4">
    <s:columns>
        <s:ArrayList>
            <s:GridColumn dataField="shapedetails" headerText="Shape details" itemRenderer="FrontEndObjects.MovementLogItemRenderer"></s:GridColumn>
            <s:GridColumn dataField="shapeId" headerText="Shape Id"></s:GridColumn>
            <s:GridColumn dataField="shapeName" headerText="Shape Name"></s:GridColumn>
            <s:GridColumn dataField="shapeColor" headerText="Shape Colour"></s:GridColumn>
        </s:ArrayList>
    </s:columns>        
</s:DataGrid> 
```

这是我的“MovementLogItemRenderer”项目渲染器：

```
 <s:GridItemRenderer xmlns:fx="http://ns.adobe.com/mxml/2009" 
                xmlns:s="library://ns.adobe.com/flex/spark" 
                xmlns:mx="library://ns.adobe.com/flex/mx" clipAndEnableScrolling="true">    

<fx:Script>
    <![CDATA[   

        [Bindable] public var myTextColour:uint;
        override public function prepare(hasBeenRecycled:Boolean):void {

            super.prepare( hasBeenRecycled );

            if(data.shapeColor == "purple"){
                myTextColour = 0x7a11f1;
            } else {
                myTextColour = 0x000000;
            }
        } 

    ]]>
</fx:Script>    
<s:HGroup>
    <s:Label text="{data.shapeId}"  paddingTop="8"/>    
    <s:Label text="{data.shapeName}"  paddingTop="8"  />    
    <s:Label text="{data.shapeColor}"  paddingTop="8"  color="{myTextColour}" />            
</s:HGroup> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T11:51:39.257

ActionScript 中 Label 的 color 属性是一个 uint
，因此您必须使用这种类型
（仅在 MXML 中您可以使用 #000000 等颜色代码）
，并且由于您将 ActionScript 属性绑定到您必须使用的标签颜色uint 类型
此外，当不满足条件时，您必须将其设置回“正常”颜色，以防 itemRenderer 将被回收。
例如

```
override public function prepare(hasBeenRecycled:Boolean):void {

            super.prepare( hasBeenRecycled );

            if(data) {
                if(data.shapeColor == "purple"){
                    myTextColour = 0x7a11f1;
                } else {
                    myTextColour = 0x000000;
                }
            }
        } 
```

为什么你的洞用户界面没有显示出来，没有更多代码就无法告诉你当我尝试使用 Grid 组件时，你的示例运行良好

# entity-framework - 是否可以只为模型的一部分生成迁移？

> ID：15332193
> 
> 赞同：1
> 
> 时间：2013-03-11T06:06:36.430
> 
> 标签：entity-framework, migration, entity-framework-migrations

我想使用自定义 VSIX 插件生成迁移，并且只针对模型的一部分。我发现我可以过滤从`CSharpMigrationCodeGenerator`overridnig 方法继承的类中生成的代码`Generate(IEnumerable<MigrationOperation> operations, string @namespace, string className)`。我在此方法中过滤了一个表的操作。我读到我应该`Add-Migration`在修改迁移时在包管理器控制台中第二次调用。我做的。然后更新数据库。当我为整个模型创建下一个迁移时，没有生成过滤表的代码，我必须自己为以前过滤的表编写代码。

我认为`Add-Migration`当我在迁移文件中进行更改时第二次调用方法将查看迁移代码并为模型生成哈希，这将在我应用此迁移时出现。

编辑：

我尝试使用 -Force 参数和不带 -Force 参数来调用 Add-Migration。当我对 Up/Down 方法使用 -Force 参数迁移代码时，如果我对迁移代码进行了一些额外的更改，则将被覆盖。这就是为什么我认为在这种情况下我不应该使用 -Force 参数。

我的 MigrationCodeGenerator 在 Configuration 构造函数中设置正确： CodeGenerator = new MigrationCodeGenerator(tables);

我过滤操作但不生成索引的 MigrationCodeGenerator 代码：

```
using System.Collections.Generic;
using System.Data.Entity.Migrations.Model;
using System.Data.Entity.Migrations.Utilities;
using System.Data.Entity.Migrations.Design;

namespace MyNamespace.Migrations
{
  public class MigrationCodeGenerator : CSharpMigrationCodeGenerator
  {
    /// <summary>
    /// Tables for which to generate migration file
    /// </summary>
    private List<string> Tables;

    public MigrationCodeGenerator(List<string> tables)
    {
      Tables = tables;
    }

    protected override void GenerateInline(CreateIndexOperation createIndexOperation, IndentedTextWriter writer) { }

    protected override void Generate(CreateIndexOperation createIndexOperation, IndentedTextWriter writer) { }

    protected override void Generate(DropIndexOperation dropIndexOperation, IndentedTextWriter writer) { }

    protected override string Generate(IEnumerable<MigrationOperation> operations, string @namespace, string className)
    {
      if (Tables != null)
      {
        List<MigrationOperation> filteredOperations = new List<MigrationOperation>();

        foreach (var operation in operations)
        {
          if (operation is CreateTableOperation)
          {
            CreateTableOperation createTableOperation = operation as CreateTableOperation;

            if (Tables.Contains(createTableOperation.Name))
              filteredOperations.Add(operation);
          }
          else if (operation is AddColumnOperation)
          {
            AddColumnOperation addColumnOperation = operation as AddColumnOperation;

            if (Tables.Contains(addColumnOperation.Table))
              filteredOperations.Add(operation);
          }
          else if (operation is AddPrimaryKeyOperation)
          {
            AddPrimaryKeyOperation addPrimaryKeyOperation = operation as AddPrimaryKeyOperation;

            if (Tables.Contains(addPrimaryKeyOperation.Table))
              filteredOperations.Add(operation);
          }
          else if (operation is AddForeignKeyOperation)
          {
            AddForeignKeyOperation addForeignKeyOperation = operation as AddForeignKeyOperation;

            if (Tables.Contains(addForeignKeyOperation.DependentTable))
              filteredOperations.Add(operation);
          }
          else if (operation is DropTableOperation)
          {
            DropTableOperation dropTableOperation = operation as DropTableOperation;

            if (Tables.Contains(dropTableOperation.Name))
              filteredOperations.Add(operation);
          }
          else if (operation is DropColumnOperation)
          {
            DropColumnOperation dropColumnOperation = operation as DropColumnOperation;

            if (Tables.Contains(dropColumnOperation.Table))
              filteredOperations.Add(operation);
          }
          else if (operation is DropPrimaryKeyOperation)
          {
            DropPrimaryKeyOperation dropPrimaryKeyOperation = operation as DropPrimaryKeyOperation;

            if (Tables.Contains(dropPrimaryKeyOperation.Table))
              filteredOperations.Add(operation);
          }
          else if (operation is DropForeignKeyOperation)
          {
            DropForeignKeyOperation dropForeignKeyOperation = operation as DropForeignKeyOperation;

            if (Tables.Contains(dropForeignKeyOperation.DependentTable))
              filteredOperations.Add(operation);
          }
          else if (operation is AlterColumnOperation)
          {
            AlterColumnOperation alterColumnOperation = operation as AlterColumnOperation;

            if (Tables.Contains(alterColumnOperation.Table))
              filteredOperations.Add(operation);
          }
          else if (operation is RenameColumnOperation)
          {
            RenameColumnOperation renameColumnOperation = operation as RenameColumnOperation;

            if (Tables.Contains(renameColumnOperation.Table))
              filteredOperations.Add(operation);
          }
          else if (operation is RenameTableOperation)
          {
            RenameTableOperation renameTableOperation = operation as RenameTableOperation;

            if (Tables.Contains(renameTableOperation.Name))
              filteredOperations.Add(operation);
          }
          else if (operation is SqlOperation)
          {
            filteredOperations.Add(operation);
          }
        }

        return base.Generate(filteredOperations, @namespace, className);
      }

      return base.Generate(operations, @namespace, className);
    }
  }
} 
```

# r - 读取具有不同行数的多个 CSV 文件以在文件开头跳过

> ID：15332195
> 
> 赞同：11
> 
> 时间：2013-03-11T06:07:04.813
> 
> 标签：r, csv, read.table

我必须阅读大约 300 个单独的 CSV。我已经设法使用循环和结构化的 CSV 名称来自动化这个过程。然而，每个 CSV 在开始时都有 14-17 行垃圾，并且随机变化，因此在 read.table 命令中硬编码“跳过”参数将不起作用。每个 CSV 的列名和列数相同。

这是我所反对的一个例子：

```
QUICK STATISTICS:

      Directory: Data,,,,
           File: Final_Comp_Zn_1
      Selection: SEL{Ox*1000+Doma=1201}
         Weight: None,,,
     ,,Variable: AG,,,

Total Number of Samples: 450212  Number of Selected Samples: 277

Statistics

VARIABLE,Min slice Y(m),Max slice Y(m),Count,Minimum,Maximum,Mean,Std.Dev.,Variance,Total Samples in Domain,Active Samples in Domain AG,  
6780.00,   6840.00,         7,    3.0000,   52.5000,   23.4143,   16.8507,  283.9469,        10,        10 AG,   
6840.00,   6900.00,         4,    4.0000,    5.5000,    4.9500,    0.5766,    0.3325,        13,        13 AG,   
6900.00,   6960.00,        16,    1.0000,   37.0000,    8.7625,    9.0047,   81.0848,        29,        29 AG,   
6960.00,   7020.00,        58,    3.0000,   73.5000,   10.6931,   11.9087,  141.8172,       132,       132 AG,   
7020.00,   7080.00,        23,    3.0000,  104.5000,   15.3435,   23.2233,  539.3207,        23,        23 AG,   
7080.00,   7140.00,        33,    1.0000,   15.4000,    3.8152,    2.8441,    8.0892,        35,        35 AG, 
```

基本上我想从行中读取`VARIABLE,Min slice Y(m),Max slice Y(m),...`。我可以想到一些解决方案，但我不知道如何对其进行编程。无论如何我可以：

1.  首先阅读 CSV 并以某种方式计算出有多少行垃圾，然后重新阅读并指定要跳过的正确行数？或者
2.  告诉`read.table`它在找到列名时开始阅读（因为这些对于每个 CSV 都是相同的）并忽略之前的所有内容？

我认为解决方案（2）是最合适的，但我愿意接受任何建议！

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-03-11T06:26:26.950

这是可以采用的一种方法的最小示例。

首先，让我们组成一些类似于您描述的 csv 文件：

```
cat("blah\nblah\nblah\nVARIABLE,X1,X2\nA,1,2\n", file="myfile1.csv")
cat("blah\nVARIABLE,A1,A2\nA,1,2\n", file="myfile2.csv")
cat("blah\nblah\nVARIABLE,Z1,Z2\nA,1,2\n", file="myfile3.csv") 
```

其次，确定数据从哪里开始：

```
linesToSkip <- sapply(list.files(pattern = "myfile.*.csv"), 
                      function(x) grep("^VARIABLE", readLines(x))-1) 
```

第三，使用该信息将文件读入单个列表。

```
lapply(names(linesToSkip), 
       function(x) read.csv(file=x, skip = linesToSkip[x]))
# [[1]]
#   VARIABLE X1 X2
# 1        A  1  2
# 
# [[2]]
#   VARIABLE A1 A2
# 1        A  1  2
# 
# [[3]]
#   VARIABLE Z1 Z2
# 1        A  1  2 
```

* * *

### 编辑#1

读取数据两次的另一种方法是将其读取一次到列表中，然后执行相同类型的处理：

```
myRawData <- lapply(list.files(pattern = "myfile.*.csv"), readLines)
lapply(myRawData, function(x) {
  linesToSkip <- grep("^VARIABLE", x)-1
  read.csv(text = x, skip = linesToSkip)
}) 
```

或者，就此而言：

```
lapply(list.files(pattern = "myfile.*.csv"), function(x) {
  temp <- readLines(x)
  linesToSkip <- grep("^VARIABLE", temp)-1
  read.csv(text = temp, skip = linesToSkip)
}) 
```

* * *

### 编辑#2

正如@PaulHiemstra 所指出的，您可以使用该参数`n`仅将每个文件的几行读入内存，而不是读取整个文件。因此，如果您确定每个文件中的“垃圾”行不超过 20 行，如果您使用的是所描述的第一种方法，则可以使用：

```
linesToSkip <- sapply(list.files(pattern = "myfile.*.csv"), 
                      function(x) grep("^VARIABLE", readLines(x, n = 20))-1) 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-03-11T07:52:06.520

`fread`包[data.table](http://cran.r-project.org/web/packages/data.table/index.html)中的函数自动检测要跳过的行数。该功能目前处于开发阶段。

这是一个示例代码：

```
require(data.table)

cat("blah\nblah\nblah\nVARIABLE,X1,X2\nA,1,2\n", file="myfile1.csv")
cat("blah\nVARIABLE,A1,A2\nA,1,2\n", file="myfile2.csv")
cat("blah\nblah\nVARIABLE,Z1,Z2\nA,1,2\n", file="myfile3.csv")

lapply(list.files(pattern = "myfile.*.csv"), fread) 
```

# sql - 如何在 SQL 中将值从另一个表列方式插入到行方式

> ID：15332198
> 
> 赞同：0
> 
> 时间：2013-03-11T06:07:26.070
> 
> 标签：sql, sql-server-2005

我有一个表使用查询我们如何从第一个表值中实现第二个表结构

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T09:02:04.660

```
SELECT t1.PageID,
       t1.Value AS PC,
       t2.Value AS OS,
       t3.Value AS Hardware,
       t4.Value AS Software
FROM srcTable t1

JOIN 
srcTable t2 ON t1.PageID = t2.PageID
JOIN 
srcTable t3 ON t1.PageID = t3.PageID
JOIN 
srcTable t4 ON t1.PageID = t4.PageID

WHERE t1.Header = 'PC'
AND
t2.Header = 'OS'
AND
t3.Header ='Hardware'
AND
t4.Header = 'Software' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T06:12:33.117

`SELECT * INTO tblNew FROM oldTbl`

如果您只想复制结构：

```
SELECT * INTO tblNew FROM oldTbl WHERE 1=2 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-11T06:15:27.657

如果你想克隆一个表

```
Select * into Dest_Table from Src_Table 
```

如果你想复制

```
insert * into Dest_Table select * from Src_Table 
```

# java - 无法识别 Spring 控制器请求映射

> ID：15332200
> 
> 赞同：0
> 
> 时间：2013-03-11T06:07:32.800
> 
> 标签：java, spring, web-applications, spring-mvc

我一直在从事一个业余项目，但我对 Spring 框架还是有些陌生。我注意到，当我在 tomcat 服务器上编译 Web 应用程序时，请求映射永远不会被识别。我已经确定正在使用组件扫描 xml 标记，但我不确定在哪里可以找到它们没有被加载的原因。这是github项目的链接：

[http://github.com/dmcquillan314/YouthMinistryHibernate.git](http://github.com/dmcquillan314/YouthMinistryHibernate.git)

根据要求，这是我的 web.xml

```
<web-app id="WebApp_ID" version="2.4"
    xmlns="http://java.sun.com/xml/ns/j2ee" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://java.sun.com/xml/ns/j2ee 
    http://java.sun.com/xml/ns/j2ee/web-app_2_4.xsd">

    <display-name>YouthMinistryHibernate</display-name>

    <!-- Spring MVC -->
    <context-param>
        <param-name>contextConfigLocation</param-name>
        <param-value>/WEB-INF/spring/root-context.xml</param-value>
    </context-param>
    <context-param>
        <param-name>spring.profiles.default</param-name>
        <param-value>simple</param-value>
    </context-param>
    <listener>
        <listener-class>org.springframework.web.context.ContextLoaderListener</listener-class>
    </listener>
    <servlet>
        <servlet-name>appServlet</servlet-name>
        <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
        <init-param>
            <param-name>contextConfigLocation</param-name>
            <param-value></param-value>
        </init-param>
        <init-param>
            <param-name>spring.profiles.default</param-name>
            <param-value>simple</param-value>
        </init-param>
        <load-on-startup>1</load-on-startup>
    </servlet>

    <!-- Spring Security -->
    <filter>
        <filter-name>encodingFilter</filter-name>
        <filter-class>org.springframework.web.filter.CharacterEncodingFilter</filter-class>
        <init-param>
            <param-name>encoding</param-name>
            <param-value>UTF-8</param-value>
        </init-param>
        <init-param>
            <param-name>forceEncoding</param-name>
            <param-value>true</param-value>
        </init-param>
    </filter>
    <filter-mapping>
        <filter-name>encodingFilter</filter-name>
        <url-pattern>/*</url-pattern>
    </filter-mapping>
    <filter>
        <filter-name>springSecurityFilterChain</filter-name>
        <filter-class>org.springframework.web.filter.DelegatingFilterProxy</filter-class>
    </filter>
    <filter-mapping>
        <filter-name>springSecurityFilterChain</filter-name>
        <url-pattern>/*</url-pattern>
    </filter-mapping>
    <filter>
        <filter-name>hiddenHttpMethodFilter</filter-name>
        <filter-class>org.springframework.web.filter.HiddenHttpMethodFilter</filter-class>
    </filter>
    <filter-mapping>
        <filter-name>hiddenHttpMethodFilter</filter-name>
        <url-pattern>/*</url-pattern>
    </filter-mapping>
</web-app> 
```

和我的 spring-mvc.xml 文件

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:context="http://www.springframework.org/schema/context"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns:mvc="http://www.springframework.org/schema/mvc"
    xsi:schemaLocation="http://www.springframework.org/schema/mvc http://www.springframework.org/schema/mvc/spring-mvc-3.2.xsd
        http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
        http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-3.0.xsd">

    <mvc:annotation-driven/>

    <context:component-scan base-package="com.youthministry.controller"  />

    <bean class="org.springframework.web.servlet.view.InternalResourceViewResolver">
        <property name="prefix">
            <value>/WEB-INF/jsp/</value>
        </property>
        <property name="suffix">
            <value>.jsp</value>
        </property>
    </bean>

    <bean id="messageSource" class="org.springframework.context.support.ResourceBundleMessageSource">
        <property name="basenames">
            <list>
                <value>message</value>
            </list>
        </property>
    </bean>

</beans> 
```

如果我需要进一步发布任何内容，请告诉我。

任何帮助是极大的赞赏。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T21:31:23.233

你的 web.xml 是什么样的？（也许你可以直接在这篇文章上发布相关的配置文件......）必须指定路径才能“拾取”。

[http://static.springsource.org/spring/docs/3.2.x/spring-framework-reference/html/mvc.html](http://static.springsource.org/spring/docs/3.2.x/spring-framework-reference/html/mvc.html)

```
<web-app>

  <servlet>
    <servlet-name>example</servlet-name>
    <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
    <load-on-startup>1</load-on-startup>
  </servlet>

  <servlet-mapping>
    <servlet-name>example</servlet-name>
    <url-pattern>/example/*</url-pattern>
  </servlet-mapping>

</web-app> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T06:16:36.940

我无法为我的本地问题检查您的项目，下面的链接解释了您可能使用的不同类型的配置标签`mvc:annotation-drive ,context component-scan`，等等。

[不同的 Spring 注解 XML 声明](https://stackoverflow.com/questions/8038830/different-spring-annotation-xml-declarations)

而且我还建议你在项目中添加log4j，然后将日志级别设置为调试。这样当您启动项目时，它可以打印出@RequestMapping中的所有url，并且当您向服务器发送请求时，它也可以打印出您发送的url，这样您就可以轻松找到问题所在。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-11T06:11:15.863

查看您的上下文 xml 文件，您已添加组件扫描标记。但是缺少一个标签，它使应用程序能够读取注释。

```
<annotation-driven/>

<context:component-scan base-package="com.youthministry.controller" /> 
```

尝试添加缺少的标签。

# django - 如何在通过表单验证之前获取表单字段值？

> ID：15332210
> 
> 赞同：3
> 
> 时间：2013-03-11T06:08:46.730
> 
> 标签：django

我的问题与此链接有关：[如何允许用户输入逗号](https://stackoverflow.com/questions/15320974/how-to-allow-user-to-input-comma)

所以我试图尽一切可能让它发挥作用。现在，我试图在执行保存操作时通过 form.is_valid() 验证值传递。

我通过这样做成功地获得了价值：

```
.........    
if request.method == 'POST':
    if request.POST['process'] == 'addtrans':
        tform = AddTransactionForm(request.user, 
                                   request.POST)

        print tform.fields['amount'] // this is the value that I want to get

        if tform.is_valid():
.......... 
```

但遗憾的是输出是这样的：

```
<django.forms.fields.DecimalField object at 0x7fcc84fd2c50> 
```

如何获得确切的值或解码该输出？我希望有人尝试过这个。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-11T07:25:46.917

我想这就是你所描述的——

```
def transaction(request): 
    if request.POST.method == 'POST':
        post = request.POST.copy()
        if 'amount' in post:
            post['amount'] = post['amount'].replace(',','')
        tform = AddTransactionForm(request.user, post)
        #... 
```

（您必须创建`request.POST`字典的副本，因为它是不可变的）。

# extjs - 如果 ExtJS3.4 和 ExtJS4 都在一个应用程序中使用但在不同的浏览器窗口中使用，是否会加重浏览器的负担？

> ID：15332211
> 
> 赞同：1
> 
> 时间：2013-03-11T06:08:49.423
> 
> 标签：extjs, extjs4, extjs3

我在 ExtJS 3.4 中有一个 Web 应用程序。现在单击一个按钮，我将打开一个新的 html 窗口。我计划在那个新的 html 窗口中使用 ExtJS 4。但我需要回答的几个问题是：

1.  浏览器会很重吗？如果是 多少钱？（它几乎是 ext-all.js 和所有这些库文件以及我在两个 html 页面中都包含的文件吗？）
2.  我听说 ExtJS 4 有垃圾收集器 那么使用 ExtJS 4 会更好吗？因为每次他们点击这个按钮（在 ExtJS 3.4 中）都会打开一个新窗口，在其中加载 Extjs 4。所以当他们关闭垃圾收集器时会小心。

那么最后是只在那个新窗口中使用 ExtJS 3.4 还是 ExtJS 4 呢？为什么 ？

供参考：以下路径中加载到浏览器 sita 的所有文件：C:\Users\"用户名"\AppData\Local\Microsoft\Windows\Temporary Internet Files

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-11T10:42:38.933

不，对于浏览器（在任何相当现代的计算机上）来说不会太多，而且没有理由应该这样做。ExtJS4 中的垃圾收集器只有在您使用异步加载文件时才有用。它与整体性能无关。另请注意，某些浏览器（尤其是 Chrome）的每个窗口/选项卡都作为单独的进程运行，因此它们不会相互影响。

# c - 在 C 中读取分数

> ID：15332212
> 
> 赞同：2
> 
> 时间：2013-03-11T06:08:58.250
> 
> 标签：c, fractions

如何将分数读入 C 中以进行数学运算？（分数将包含斜线符号）例如，用户将输入 3/12。(a string) 程序会找到 gcd，计算约化分数并得出 1/4。

我最初的计划是使用 strtok() 函数自己获取分子和分母，但我遇到了将分子和分母存储到单独变量中的问题。这是一个有效的方法吗？如果是这样，在对字符串进行标记后，如何将分子和分母存储到 2 个单独的变量中？

```
void blah(void) {
  char str[30];
  scanf("%s",&str);
  char * pch;
  pch = strtok (str,"/");
  int i;
  while (pch != NULL)
  {
    i = atoi(pch);
    printf("\n%d", i);
    pch = strtok (NULL, "/");
  }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T06:12:47.867

这里使用 sscanf 来获取数字，当然你可以直接使用 scanf ：

```
#include <stdio.h>
int main() {
  const char *s = " 13/6  \n";
  int a,b;
  sscanf(s, "%d/%d", &a, &b);
  printf("%d frac %d\n", a, b);
  return 0;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T06:16:41.773

保留一个指向字符串头部的指针。

然后研究使用[`strchr()`](http://pubs.opengroup.org/onlinepubs/009695399/functions/strchr.html)来获取指向该`/`字符的第二个指针。

然后您可以：

1.  从取消引用的第一个指针中读取字符，直到您的第一个指针等于第二个指针。将这些字符存储到一个`char []`或`char *`中——这是你的分子作为一个 C 字符串。
2.  从第二个指针指向的位置之后的下一个字符开始读取，直到`/0`字符串末尾的 nul 终止符。在一秒钟内存储这些字符，`char []`或者`char *`- 这是你的分母作为 C 字符串。

用于`atoi()`将两个 C 字符串转换为整数。

如果`strchr()`返回 NULL，那么您可以很容易地进行错误检查，因为`/`输入字符串中没有。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-11T06:27:10.683

好吧。我有一个不同的方法。使用`strtol`which 将为您返回一个指向您添加 1 并`strtol`在下半场再次调用的“/”的指针。

这是第一个答案的两倍，是第二个答案的一半。:)

```
#include <stdio.h>
#include <string.h>

int main(){
    char *f = " 12/7 ";
    char *s;
    long n,d;
    n = strtol(f, &s, 10);
    d = strtol(s+1, NULL, 10);
    printf(" %ld/%ld \n", n, d);
    return 0;
} 
```

*要回答您的其余问题，如果它是一个分数*，您肯定需要 2 个变量。如果您可以在内部使用浮点并且分数只是用户输入的一个很好的功能，那么您可以继续将它们除以并将数字存储在一个变量中。

```
double v;
v = (double)n / d; 
```

强制转换`double`为对两个整数进行浮点除法。

另一方面，如果您要处理很多*分数*，您可能需要创建一个结构来保存它们（如果您愿意，可以使用*object*）。

```
struct frac {
    long num;
    long den;
};
struct frac f = { 12, 7 };
printf("%ld/%ld\n", f.num, f.den); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-11T06:30:01.440

你也可以这样做......

```
 char str[30];
  scanf("%s",str);
  char c[30];
  int i, num, denom;

  i = 0;
  while (*(str+i) != '/')
  {
      memcpy((c+i), (str+i), 1);
      i++;
  }
  *(c+i) = 0;
  i++;
  num = atoi(c);
  strcpy(c, (str+i));
  denom = atoi(c);
  printf("%d\n", num);
  printf("%d\n", denom); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-03-18T00:48:42.430

```
#include <stdio.h>

typedef struct
{
int num, denom;
}fraction;

int main()
{
fraction fract = {1,2};

printf("fraction: %i/%i", fract.num, fract.denom);
return 0;
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-04-20T15:09:54.587

这是我通常做的。

```
int main()
{
double a,b=1.0f,s;
scanf("%lf/%lf",a,b);
s=a/b;
printf("%lf",s);
} 
```

即使用户没有输入变量 b 的值，该值也已经初始化为 1.0f，因此无论如何它都可以计算它的值。

这是在带有 GCC 的 Ubuntu 上尝试的。

# asp.net-mvc - 复选框 oncheck 重定向到 mvc 中的 actionresult

> ID：15332225
> 
> 赞同：1
> 
> 时间：2013-03-11T06:10:13.633
> 
> 标签：asp.net-mvc, checkbox, webgrid

我正在使用 webgrid 的 mvc 中创建一个项目。在 webgrid 我有两列，即**Status**和**IsActive**。

状态列只能包含两个值：**选中**或未**选中**。这两个值都来自数据库。

IsActive 列具有复选框，如果在 Status 列中选中状态，则该复选框处于选中状态，反之亦然。

我的控制器中有一个actionresult，它检查特定行的状态并将其反转（即）如果状态被选中，它将变为未选中，反之亦然。这是代码：

```
public ActionResult Add(string path,string status)
{
    on.Open();
    if (status == "unchecked")
    {
            SqlCommand cmd = new SqlCommand("SpAdRegister1", con);
            cmd.CommandType = CommandType.StoredProcedure;
            cmd.Parameters.AddWithValue("@imagepath", path);
            cmd.ExecuteNonQuery();
        }
    }
    else
    {
        SqlCommand cmd = new SqlCommand("SpAddeRegister", con);
        cmd.CommandType = CommandType.StoredProcedure;
        cmd.Parameters.AddWithValue("@imagepath", path);
        cmd.ExecuteNonQuery();
    }
    return RedirectToAction("Index", "Ad");
} 
```

在上面的代码中，状态是相应状态列的值，路径是数据库中定义的图像的路径。

当我选中/取消选中复选框时，上面的代码应该执行。此外，复选框的状态应该是永久的（即）如果它被选中，它必须始终保持选中状态，直到我取消选中它。

**编辑** 这是我获取路径值并将其传递给视图的方式：

```
public ActionResult Index()
        {

            SqlCommand cmd = new SqlCommand("select * from Cpecial_Ad_management_tbl where [Partner Name]='"+partname+"' ", con);

            con.Open();
            SqlDataReader dr = cmd.ExecuteReader();
            List<AddDetailModel> model = new List<AddDetailModel>();
            while (dr.Read())
            {
                model.Add(new AddDetailModel()
                {

                AdName = dr["Ad_name"].ToString(),
                AdType=dr["Ad_type_name"].ToString(),
                PartnerName=dr["Partner Name"].ToString(),
                hrefurl=dr["Ad_url"].ToString(),
                startDate=dr["Start_date"].ToString(),
                endDate = dr["End_date"].ToString(),
                tagName = dr["Tag"].ToString(),
                AdPath= dr["Ad_image_path"].ToString(),
                Status = dr["Status"].ToString()              
                });
            }
            dr.Close();

            return View(model);
        } 
```

这里的**AdPath**是我在另一个控制器中使用的路径。

**编辑**查看代码：

```
@model IEnumerable<EShopPartnerSetting.Models.AddDetailModel>

@{
    var grid1 = new WebGrid(source: Model.Where(m => m.AdType == "bottom_banner").ToArray(),
                                              defaultSort: "First Name",
                                              rowsPerPage: 2, fieldNamePrefix: "wg_",
                                              canPage: true, canSort: true,
                                              pageFieldName: "pg", sortFieldName: "srt"
                                              );
    var grid2 = new WebGrid(source: Model.Where(m => m.AdType == "side_banner_bottom").ToArray(),
   defaultSort: "First Name",
   rowsPerPage: 2, fieldNamePrefix: "wg_",
   canPage: true, canSort: true,
   pageFieldName: "pg", sortFieldName: "srt"
   );
    var grid3 = new WebGrid(source: Model.Where(m => m.AdType == "side_banner_top").ToArray(),
    defaultSort: "First Name",
    rowsPerPage: 2, fieldNamePrefix: "wg_",
    canPage: true, canSort: true,
    pageFieldName: "pg", sortFieldName: "srt"
    );  
}
<html>
<head>
    <meta name="viewport" content="width=device-width" />
    <title>Ad Management</title>
    <link href="../../CSS/AdminLayStyle.css" rel="stylesheet" type="text/css" />
    <link href="../../CSS/Content/themes/base/jquery-ui.css" rel="stylesheet" type="text/css" />
    <link href="../../CSS/Content/themes/base/jquery.ui.all.css" rel="stylesheet" type="text/css" />
    <link href="../../CSS/Content/themes/base/jquery.ui.base.css" rel="stylesheet" type="text/css" />
    <link href="../../CSS/Content/themes/base/jquery.ui.dialog.css" rel="stylesheet"
        type="text/css" />
    <script src="../../Scripts/jquery-1.7.1.js" type="text/javascript"></script>
    <script src="../../Scripts/jquery-ui-1.8.20.js" type="text/javascript"></script>
    <script type="text/javascript">
        $('input[name=chk]').change(function () {

            var status;
            if ($('input[name=chk]').is(':checked')) {
                status = "checked"
            } else {
                status = "unchecked"
            }
            var path = @Model.AdPath;
            alert(status);
                sendRequest(path, status);
        });
function sendRequest(path, status) {
    $.get('@Url.Action("Add","Ad")' + '?path=' + path + '&status=' + status, function(){
       alert('calling the actionresult add');
    }).done(function(){
       //show an update on the page
    });
}

    <style type="text/css">
       some style
    </style>
</head>
<body>
    @using (Html.BeginForm(new { id = "target" }))
    {
        @Html.ValidationSummary(true)
        <table width="960" border="0" align="center" cellpadding="0" cellspacing="0">
            <tr>
                <td>
                    <div class="maindiv1">
                        <div class="hd">
                            <h3>
                                Ad Management</h3>
                        </div>
                        <div class="bd">
                            <table align="center" cellpadding="0" cellspacing="0" width="100%">
                                <tr>
                                    <td>
                                        <input id="new" type="button" value="Create New Ad" style="color: #FFFFFF; background-color: #1688C6;" />
                                    </td>
                                </tr>
                                <tr>
                                    <td>
                                        &nbsp;
                                    </td>
                                </tr>
                                <tr>
                                    <td align="center">
                                        <span><div style="background-color:#4FA6E4; width:680px;" >Bottom Banner</div></span>
                                        @grid1.GetHtml(tableStyle: "listing-border", headerStyle: "gridhead", footerStyle: "paging", rowStyle: "td-dark", alternatingRowStyle: "td-light",
                            columns:
                                grid1.Columns(
                                grid1.Column("AdName", "Ad/Campaign", style: "colProductid"),
                                grid1.Column(header: "Ad", format: @<text><img src="@item.AdPath"  id="adimg"  alt="YourText" title="Ad Image"  width:"50px" height="50px"></text>, style: "colAdimage"),
                                grid1.Column("startDate", "Start Date", style: "colCategoryID"),
                                grid1.Column("endDate", "End Date", style: "colCategoryID"),
                                  grid1.Column(header: "IsActive", format: @<text><input name="chk" class="chk2"(@item.Status)" type="checkbox"  @item.Status/></text>, style: "colOperation"),
                                  grid1.Column(header: "Edit", format: @<text><a id="@item.AdName" class="clk"><img
                                    src="../../Images/edit.png" class="asa" width="25px" height="25px" alt="" style="border: none;" /></a></text>, style: "colOperation"),
                                 grid1.Column(header: "Delete", format: @<text><a href="@Url.Action("Delete", "Ad", new { aname = item.AdName, apath = item.AdPath, status = item.Status })" onclick="javascript:return ConfirmDelete();"><img
                                    src="../../Images/delete.png" width="20px" height="20px" alt="" style="border: none;" /></a></text>, style: "colOperation"),
                                 grid1.Column(header: "Status", format: @<text>
                                        </text>, style: "colOperation")
                                         ), mode: WebGridPagerModes.All)
                                    </td>
                                </tr>
                                <tr>
                                    <td>
                                        &nbsp;
                                    </td>
                                </tr>
                                <tr>
                                    <td width="100%" align="center">
                                        @* <input id="Submit1" type="submit" value="submit" />*@
                                    </td>
                                </tr>
                            </table>
                        </div>
                        <script type="text/javascript">
                            function ConfirmDelete() {
                                return confirm("Are you sure you want to delete this?");
                            }
                        </script>
                    </div>
                    @* <a id="clk">click here</a>*@
                    <div id="dialog" title="Edit" style="overflow: hidden;">
                    </div>
                    <div id="newdialog" title="Create" style="overflow: hidden;">
                    </div>
                </td>
            </tr>
        </table>
    }
</body>
</html> 
```

型号代码：

```
 public class AddDetailModel
    {

    public string AdName { get; set; }
    public string AdType { get; set; }
    public string PartnerName { get; set; }
    public string hrefurl { get; set; }
    public string startDate { get; set; }
    public string endDate { get; set; }
    public string tagName { get; set; }
    public string AdPath { get; set; }
    public string BannerPath { get; set; }
    public string Status { get; set; }
    } 
```

所以本质上问题是如何在复选框单击时重定向到 actionresult 以及如何根据数据库中的某些值使复选框的状态（选中/未选中）？

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T07:11:32.357

如果您修改 Add 操作结果以返回某种类型的带有 json 结果的成功消息，则可以使用 javascript 异步执行此操作：

```
public ActionResult Add(string path, string status)
{
    //Execute your stored procedure.

    //If successful 
    return Json(new { success = true }, JsonRequestBehaviours.AllowGet);
}

$('input[name=CheckBoxName]').change(function(){
    var path = //as your model type is IEnummerable<AddDetail> you will have to select it using javascript
    var status = $(this).is(':checked') ? 'unchecked' : 'checked';
    sendRequest(path, status);
});

function sendRequest(path, status) {
    $.get('@Url.Action('Add')' + '?path=' + path + '&status=' + status, function(){
       alert('calling the actionresult add');
    }).done(function(){
       //show an update on the page
    });
} 
```

另一方面，考虑将您的数据访问代码抽象到不同的层。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T07:13:30.867

一种可能性是使用 javascript 并订阅`change`复选框的事件，然后重定向到此控制器操作。例如，如果你使用 jQuery，你可能会尝试这样的事情：

```
<script type="text/javascript">
    $(function() {
        $('table input[type="checkbox"]').change(function() {
            // determine the value of the status parameter based on whether
            // the checkbox that we clicked on was checked or unchecked
            var status = $(this).is(':checked') ? 'unchecked' : 'checked';

            // it's not quite clear where the path parameter should come from
            // but if it shown somewhere in the table you could use a jQuery 
            // selector to retrieve it
            var path = ...;

            // calculate the url to redirect to
            var url = '@Url.Action("Add")' + 
                      '?path=' + encodeURIComponent(path) + 
                      '&status' + encodeURIComponent(status);

            // redirect
            window.location.href = url;
        });
    });
</script> 
```

# c++ - 在哪里可以找到“WinBase.H”

> ID：15332230
> 
> 赞同：0
> 
> 时间：2013-03-11T06:10:42.383
> 
> 标签：c++, windows, winapi, turbo-c++

我正在使用 turbo c++ 4.5，并打算使用`Win32 API`. 我已经申请`CreateFile()`了，但它显示一个错误：

> “调用未定义的函数”。

我想我需要 Winbase.h 文件。

# javascript - 在幻灯片导航中选择图像幻灯片

> ID：15332240
> 
> 赞同：3
> 
> 时间：2013-03-11T06:11:32.337
> 
> 标签：javascript, jquery, html

我刚刚制作了我的图像滑块，我让它在无限循环中左右动画，这很有效。我现在遇到的麻烦是在幻灯片中选择一个图像，在我的 jsFiddle 示例中是一组彩色的小框，当您在顶部选择一张幻灯片时，它与它们的幻灯片颜色相关，应该滑动到选定的图像但是在这一点上它没有，有人可以帮我完成这个（选择顶部的幻灯片并将其向左滑动到相关的彩色图像）[jsFiddle here](http://jsfiddle.net/mdy5R/1/)

在您选择了一种颜色后，我遇到了索引问题索引应该有一个新的起始索引，因为幻灯片会移动到右侧的末尾，但是如果有人知道如何修复它，它们似乎不会改变，那么我可以得到某处。

jQuery：

```
$('.stages li a').on('click', function(e) {
    var slide = $('#' + $(this).data('slide'));
    $('.stages li').removeClass('selected');
    $(this).parent().addClass('selected');
    goto_slide(slide);          
});

function goto_slide(slide) {
    var index = $(slide).index();

    var count = index;

    $('.slides ul').animate({'margin-left': '-=' + (item_width * (count - 1))}, 500, function() {
        $('.slides ul li').slice(0, count - 1).each(function() {
            $('.slides ul li:first').after($('.slides ul li:last'));                        
        })                  
    });

    $('#index').text(index);
} 
```

我已经更新了我的版本，现在它的工作方式应该[是 jsFiddle](http://jsfiddle.net/mdy5R/2/)。我最终能够让它工作，现在它工作得非常好。我想做的一个改进是让它在您选择顶部的图像幻灯片时仅显示下一张幻灯片，并隐藏在所选幻灯片之间有索引的其他幻灯片，如果您可以为我这样做，它会看起来很棒如果可以的话，先给它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T06:51:30.307

好的，这就是你的做法。

第 1 步：创建一个容器 div 并为其设置特定的高度和宽度。像下面

```
<style>

.container{
    height:400px;
    width:500px;
    overflow:none;
    position : relative;
}

.container img{
    width : 400px;
    height : 500px;
    display:none;
    position : absolute;
    top : 0px;
}

.container img.selected{
    display : inline-block;
}

.container .nextslide{
    top : 0px;
    left : 500px;
}

</style>

<div class="container">
    <img ... class="selected"/>
    <img ... class=""/>
    <img ... class=""/>
    <img ... class=""/>
    ...
</div>

<script>
$(function(){
    var x=0;
    $(".container img").each(function(){
        $(this).css("left", x + "px"); x+=$(this).width();
    });

    window.setInterval(function(){
        var current = $("container img.selected");
        var next = current.next();
        next.addClass("nextslide);
        $(next).animate({ "left" : "0px"}, 500, function(){
            next.addClass("selected");
        });

        $(current).animate({ "left" : "-" + current.width() + "px"}, 500, function(){
            current.removeClass("selected");
        });
    }, 1000);
});
</script> 
```

我认为这应该给你一个相当好的想法来创建滑动图像。

# php - php重定向使用标头位置和传输变量

> ID：15332242
> 
> 赞同：2
> 
> 时间：2013-03-11T06:11:48.110
> 
> 标签：php, html

我阅读了关于 SO 和 google 的所有相关问题，但仍然无法得到相同的答案。

这是我的 html 表单代码

```
<form id="Form1" name="Form1" method="post" action="page1.php" enctype="multipart/form-data">
Your Name:<input type="text" class="input" name="txtUserName">
Your Email:<input type="text" class="input" name="txtUserEmail">
<input type="submit" name="submit" value="Submit">
</form> 
```

这是我的这个页面的 php 代码 (page1.php) // 我将这些变量转移到其他页面 page2.php

```
<?php
$values['txtUserName'] = 'username';
$values['txtUserEmail'] = 'useremail';
header( 'Location: page2.php' );
?> 
```

这是page2.php的监听代码

```
<?php
$username = $_GET['username'];
$useremail = $_GET['useremail'];
?> 
```

在 html 页面下方的某个地方

```
<div class="text1">
<?php echo $username; ?>
<?php echo $useremail; ?>
</div> 
```

1.  我收到未定义索引用户名和 useremail 的通知
2.  回声不显示任何内容..我错在哪里？

3.  另外，如果我不想将表单值转移到第二页，而是将变量 $username 转移到第二页.. 那怎么办？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T06:18:27.667

`page2.php`如果您将数据发送到 page2.php，则该操作应该是

```
action="page2.php" 
```

并在`page2.php`使用`$_POST`中，因为您已经设置了形式`method='post'`

```
<?php
$username = $_POST['txtUserName'];  // txtUserName is as name in form
$usereail = $_POST['txtUserEmail']; // txtUserEmail is as name in form
?> 
```

用这个`page1.php`

```
$username = $_POST['txtUserName'];
$usermail = $_POST['txtUserEmail'];
header( 'Location: page2.php?username='.$username.'&useremail='.$usermail ); 
```

并`GET`在 page2.php 中使用

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T07:40:07.047

这个说法：

```
header('Location: page2.php'); 
```

除了您重定向到的不是绝对 URL 之外，它还会重定向到`page2.php`而不传递任何 GET 参数。为此，您只需附加它们：

```
header('Location: page2.php?' . http_build_query($values)); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-11T06:17:16.163

您的变量应该来自名称，并且您使用的是 post not get

```
$username = $_POST['txtUserName'];
$useremail = $_POST['txtUserEmail']; 
```

您还应该使用 action="page2.php"

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-11T06:18:09.913

您的表单正在发送数据，`method="post"`但您使用 检索值`$_GET['username']`。您应该更改`$_GET`为`$_POST['username']`.

另外，请注意`$usereail = $_GET['useremail'];`和`$useremail;`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-11T06:18:33.977

在您的页面 page2.php 中使用此代码

```
 $username = $_POST['username'];
 $useremail = $_POST['useremail']; 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-11T06:19:48.060

尝试这个：

```
<form id="Form1" name="Form1" method="post" action="page2.php" enctype="multipart/form-data">
    Your Name:<input type="text" class="input" name="txtUserName">
    Your Email:<input type="text" class="input" name="txtUserEmail">
    <input type="submit" name="submit" value="Submit">
</form> 
```

PHP 代码：$_GET['txtUserName'] 名称应与 html 标签名称相同。

```
<?php
    $username = $_POST['txtUserName'];
    $useremail = $_POST['txtUserEmail'];
?>

<div class="text1">
    <?php echo $username; ?>
    <?php echo $useremail; ?>
</div> 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-03-11T06:23:36.783

在 php 中，您可以通过调用受尊重的输入名称的名称来获取文本框值或任何输入的值。所以你需要按照你的代码进行如下校准

$username=$_POST['txtUserName']; $useremail = $_POST['txtUserEmail'];

# cakephp - 当行为可包含时如何显示该字段？

> ID：15332243
> 
> 赞同：2
> 
> 时间：2013-03-11T06:12:01.620
> 
> 标签：cakephp, cakephp-1.3, cakephp-2.0, cakephp-2.1

我的模型中有可包含的行为我有一个这样的数组

```
 [0] => Array
    (
        [Post] => Array
            (
                [id] => 1
                [title] => First article
                [content] => aaa
                [created] => 2008-05-18 00:00:00
            )
        [Comment] => Array
            (
                [0] => Array
                    (
                        [id] => 1
                        [post_id] => 1
                        [author] => Daniel
                        [email] => dan@example.com
                        [website] => http://example.com
                        [comment] => First comment
                        [created] => 2008-05-18 00:00:00
                    )
                [1] => Array
                    (
                        [id] => 2
                        [post_id] => 1
                        [author] => Sam
                        [email] => sam@example.net
                        [website] => http://example.net
                        [comment] => Second comment
                        [created] => 2008-05-18 00:00:00
                    )
            )
        [Tag] => Array
            (
                [0] => Array
                    (
                        [id] => 1
                        [name] => Awesome
                    )
                [1] => Array
                    (
                        [id] => 2
                        [name] => Baking
                    )
            )
    ) 
```

如何在我的视图中显示字段的值？就像我想显示的值

```
 [Post][title]
    [Comment][post_id]
    [Comment][author] 
```

我该怎么做，请帮我做，我是 cakephp 的新手，我不知道该怎么做，在此先感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T08:23:20.407

尝试这个

```
foreach($posts as $post){

 foreach($post['Comment'] as $comment){
   /*Display start here*/
     $post['Post']['title'];
     $comment['post_id'];
     $comment['author'];

 }

} 
```

希望这有助于...

# algorithm - 排行榜的高效数据结构

> ID：15332244
> 
> 赞同：6
> 
> 时间：2013-03-11T06:12:01.950
> 
> 标签：algorithm, data-structures

我想实现一个排行榜，我意识到即使这似乎是一个简单的任务，这可能会变得非常复杂。我可以简单地使用具有适当索引的数据库，但我想知道是否有可以支持以下操作的有效数据结构。

*   为给定玩家添加分数
*   检索给定玩家的最佳分数
*   检索给定玩家的排名
*   检索得分高于和低于当前玩家等级的玩家
*   支持不同的时间范围：今天的分数，本周，今年等。
*   扩展到约 100,000 名玩家
*   内存占用尽可能小（即在廉价机器上运行）

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2019-04-26T11:41:23.577

解决方案是使用两种数据结构。更新操作将 O(n) 视为不仅给定的玩家，而且所有玩家的排名都必须重新计算。

```
We will use two DS for this:
    a. Balanced Binary Search Tree
    b. Hash Map

Each node of a Binary Search Tree is [Uid, Score, Reverse-rank]
    Uid: is the user id of a player.
    Score: is the score of a player.
    Reverse-rank: This is a rank of a player but in reverse order. The player scoring lowest will
    have this value as 1\. The player scoring highest will have this value as the size of a BST.

    The Binary Search Tree is implemented based on the score of a player.

The Hash Map structure is as follows:
    Key: Uid
    Value: BST Node.

updateRank(userId, score)
    if player is new (userid not in map)
        1\. Insert the player in a BST.
        2\. Insert the player in a Map.
        3\. Calculate Rank: If a node is inserted to right, then its rank will be one less than its
        parent. If a node is inserted to left, then its rank will be one more than its parent.

    if player is old (userid exists in map)
        1\. Fetch the node from Map.
        2\. if new score and old score is same then do nothing.
        3\. Delete the old node.
        4\. Insert the new node.
        5\. Calculate Rank: Perform in-order and mark all the nodes from 1 to n (length).
           This op is expensive among all. It takes O(n)
    O(n)

getRank(userId)
    Find a node from the map.
    return rank as (n + 1) - reverse rank
    O(1)

display()
    Perform inorder traversal and return all the players.
    O(n)

NOTE: 1\. The tree has to be balanced BST.
      2\. We cannot use heap because, the display() would be difficult to implement. We would have
      to remove every element from heap which would take O(nlogn). 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T07:53:05.097

您可以使用二叉搜索树（平衡树，如 AVL 或红黑）来存储基于总分的玩家信息。在播放器结构中，您可以为不同的时间范围使用不同的数组，并为总分和最佳分使用单独的变量。查找排名或低于或高于某个玩家的玩家将需要按顺序遍历。

# iphone - 选择 UITableViewCell 时更改图像

> ID：15332246
> 
> 赞同：0
> 
> 时间：2013-03-11T06:12:11.173
> 
> 标签：iphone, uitableview, customization

我有一个`UITableViewController`，我在`UIImageView`这些单元格中添加了一个。这`UIImageView`是在自定义 TableViewCell 中。`didSelectRowAtIndexPath` `delegate`所以我的问题是当我使用方法选择行时如何更改此图像。我试过了，它在 tableviewcell 上显示图像，但单击此图像后没有改变。如何解决这个问题？

这是我的代码-

```
 - (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:
      (NSIndexPath *)indexPath
      {
            static NSString *CellIdentifier = @"Cell";

             MantrasListCell *customCell = [tableView 
             dequeueReusableCellWithIdentifier:CellIdentifier];

               if (customCell == nil) 
               {
                  customCell = [[MantrasListCell 
                  alloc]initWithStyle:UITableViewCellStyleDefault 
                  reuseIdentifier:CellIdentifier];
               }

         customCell.imgView.image = [UIImage imageNamed:@"play.png"];

         return customCell;
      }

   - (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
     {
    MantrasListCell *customCell = (MantrasListCell*)[tableView          
                              cellForRowAtIndexPath:indexPath];

    customCell.imgView.image = [UIImage imageNamed:@"pause.png"];        
     } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T09:29:04.780

此链接将为您解释。您需要做的不是隐藏，而是可以相应地设置图像。

[如何检查在 UItableview 中选择单元格以进行图像显示](https://stackoverflow.com/questions/4453413/how-to-check-cell-is-selected-in-uitableview-for-image-display)

# virtualpathprovider - mvc4 razor 中是否有任何 VirtualPathProvider 工作示例？

> ID：15332247
> 
> 赞同：3
> 
> 时间：2013-03-11T06:12:11.653
> 
> 标签：virtualpathprovider

我已经阅读了数十个相关线程，并从示例中创建了我非常简单的虚拟提供程序。

但**它不渲染虚拟文件流。只显示计划文本。**

这是输出。

```
@inherits System.Web.Mvc.WebViewPage 
@{ViewBag.Title = "Hellow World !";}
<h2>Hellow World !</h2> 
```

有关于此的相关线程，但他们并没有说他们是如何解决它或解决方案不起作用的。我找不到我做错了什么。

*   [VirtualPathProvider 不解析剃刀标记](https://stackoverflow.com/questions/12628620/virtualpathprovider-not-parsing-razor-markup?rq=1)
*   [MVC3 自定义 VirtualPathProvider 不呈现 Razor](https://stackoverflow.com/questions/13680588/mvc3-custom-virtualpathprovider-not-rendering-razor)
*   [从数据库而不是文件中提取视图](https://stackoverflow.com/questions/3367106/pulling-a-view-from-a-database-rather-than-a-file/13668845#13668845)
*   [使用区域时如何在 MVC3 中指定到共享视图的路由](https://stackoverflow.com/questions/6375044/how-to-specify-route-to-shared-views-in-mvc3-when-using-areas)
*   [ASP.NET MVC 从数据库加载 Razor 视图](https://stackoverflow.com/questions/4218454/asp-net-mvc-load-razor-view-from-database?lq=1)
*   [如何从类库项目中加载视图？](https://stackoverflow.com/questions/5467227/how-to-load-views-from-a-class-library-project)

还有更多...

怎么了 ？

这是我的测试代码。（Global.asax，这就是我改变的全部。）

```
public class MvcApplication : System.Web.HttpApplication
{
    protected void Application_Start()
    {
        System.Web.Hosting.HostingEnvironment.RegisterVirtualPathProvider(
            new MyProvider());

        AreaRegistration.RegisterAllAreas();

        WebApiConfig.Register(GlobalConfiguration.Configuration);
        FilterConfig.RegisterGlobalFilters(GlobalFilters.Filters);
        RouteConfig.RegisterRoutes(RouteTable.Routes);
        BundleConfig.RegisterBundles(BundleTable.Bundles);
        AuthConfig.RegisterAuth();
    }
}

public class MyProvider : VirtualPathProvider
{
    public override bool FileExists(string virtualPath)
    {
        if (Previous.FileExists(virtualPath))
            return true;
        else
            //  ~/Infra is the test url
            return virtualPath.StartsWith("/Infra") || virtualPath.StartsWith("~/Infra");
    }

    public override VirtualFile GetFile(string virtualPath)
    {
        if (Previous.FileExists(virtualPath))
            return base.GetFile(virtualPath);
        else
            return new MyVirtualFile(virtualPath);
    }

    public class MyVirtualFile : VirtualFile
    {
        public MyVirtualFile(string virtualPath) : base(virtualPath) { }

        public override Stream Open()
        {
            //Loading stream from seperate dll shows just plain text
            //System.Reflection.Assembly assembly = System.Reflection.Assembly.LoadFile(
            //  System.IO.Path.Combine(HttpRuntime.BinDirectory, "Infra.dll"));
            //return assembly.GetManifestResourceStream("Infra.Views.Home.Index.cshtml");

            //Changed to string but also it shows plain text.
            return new System.IO.MemoryStream(System.Text.ASCIIEncoding.UTF8.GetBytes(
                "@inherits System.Web.Mvc.WebViewPage \r\n  <h2>Hellow World !</h2>"));
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-09-06T16:45:31.107

我可以看到这个问题有点老了，但我遇到了同样的错误。我相信问题出在测试 URL 上。我没有时间进行全面调查，但我认为除非提供的 URL 采用预期格式（ASP.NET MVC 视图引擎是基于约定的），否则它可能不会使用 razor 作为视图引擎；我不确定这是否是原因，但使用您正在使用的“Infra”字符串的一些示例：

家庭控制器中的新 MVC 4 项目：

```
public ActionResult Index()
{
    ViewBag.Message = "Welcome to ASP.NET MVC!";

    dynamic x = new ExpandoObject();

    return View("Infra-test.cshtml", x);
} 
```

这要求：

```
private bool IsPathVirtual(string virtualPath) 
```

设置`virtualPath`为`'/Views/Home/Infra-test.cshtml.aspx'`. 它在末尾添加了一个 aspx 扩展名，这让我相信它没有使用 razor 来编译视图。对虚拟路径提供程序进行小的修改将看到以下链接有效：

```
public override bool FileExists(string virtualPath)
{
    if (Previous.FileExists(virtualPath))
        return true;
    else
        //  prevent view start compilation errors
        return virtualPath.StartsWith("/Infra") && !virtualPath.Contains("_ViewStart");
} 
```

有效的 URL：

```
return View("/Infra/test.cshtml", x);
return View("/Infra/one/test.cshtml", x);
return View("/Infra/one/two/test.cshtml", x); 
```

这些不起作用：

```
return View("/Infra", x);
return View("/Infra/test", x); 
```

为了使示例工作，您还需要实施`GetCacheDependency`；否则，当它在磁盘上找不到虚拟路径的文件时会抛出异常，下面是一个简单的例子。阅读文档以正确实施。

```
private bool IsVirtualPath(string virtualPath)
{
    return virtualPath.StartsWith("/Infra") && !virtualPath.Contains("_ViewStart");
}

public override CacheDependency GetCacheDependency(string virtualPath, System.Collections.IEnumerable virtualPathDependencies, DateTime utcStart)
{
    if (IsVirtualPath(virtualPath))
        return null;

    return Previous.GetCacheDependency(virtualPath, virtualPathDependencies, utcStart);
} 
```

# php - 为什么 mysqli_insert_id() 总是返回 0？

> ID：15332250
> 
> 赞同：21
> 
> 时间：2013-03-11T06:12:31.217
> 
> 标签：php, mysqli

我有以下代码。应该返回表的最后一行的 mysqli_insert_id()（在本例中为“$last_row”）总是返回 0。为什么会这样？

```
<?php

include 'connect-db.php';
$last_row = mysqli_insert_id($connection);

if ($content != '') {
    $sql = "INSERT INTO myCity VALUES (NULL, 'Stuttgart', 'DEU', 'Stuttgart', 617000)";

    if (!mysqli_query($connection, $sql)) {
        die('Error: ' . mysqli_error($connection));
    }

    echo $last_row;
    mysqli_close($connection);
} 
```

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2013-03-11T06:14:40.960

`mysqli_insert_id`不返回**表**最后一行的 ID。从[文档](http://php.net/manual/en/mysqli.insert-id.php)中，它：

> ...返回由对具有 AUTO_INCREMENT 属性的列的表的查询生成的 ID。如果最后一个查询不是`INSERT`or`UPDATE`语句，或者修改后的表没有具有该`AUTO_INCREMENT`属性的列，则此函数**将返回零**。

*（我的重点）*

也就是说，如果您要在自动生成 ID 的插入*后*立即运行它，在您执行插入的同一连接上，它将返回为该插入生成的 ID。

上面链接的文档中的示例说明了这一点：

```
$query = "INSERT INTO myCity VALUES (NULL, 'Stuttgart', 'DEU', 'Stuttgart', 617000)";
$mysqli->query($query);

printf ("New Record has id %d.\n", $mysqli->insert_id); 
```

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2013-03-11T06:17:31.150

要获得结果，您应该将

```
$last_row = mysqli_insert_id($connection); 
```

在您的 INSERT 查询之后

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-06-02T01:57:06.383

也许您尝试过`INSERT IGNORE INTO`并且您`UNIQUE`已经插入了一个值。在这种情况下，此 id 为零。

此外，如果 MySQL 连接不足，您将得到“零”。

> 您可能知道 PHP “mysql” 扩展支持持久连接，但它们在新的“mysqli”扩展中被禁用——Peter Zaitsev

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-01-13T01:37:28.193

这个功能的另一个问题——如果你正在做：

```
INSERT INTO table (col1, col2) VALUES (1, 2) ON DUPLICATE KEY UPDATE col2=3 
```

并且插入不会发生，因为键重复，对于`UPDATE`，就像在我的情况下，如果`col2`已经设置为`3`，那么`mysqli_insert_id`也将返回 0。

# twitter-bootstrap - 使用引导程序应用额外的 CSS

> ID：15332254
> 
> 赞同：1
> 
> 时间：2013-03-11T06:12:47.217
> 
> 标签：twitter-bootstrap

我正在使用推特引导程序。我并创建了额外的 css 文件，该文件在**"app.css"**内具有网站特定样式。

并创建了另一个**site.css**并在其中编写了以下代码-

```
@import url('../Content/bootstrap/css/bootstrap.min.css');
@import url('../Content/bootstrap/css/bootstrap-responsive.min.css');
@import url('../Content/bootstrap/css/app.css'); 
```

我在布局文件中使用了 site.css。

在 app.css 里面按照样式编写-

```
.margin0 {
margin:0;
}

.text-span{
    width: 100%;
  }

.text-center {
text-align:center;
} 
```

像那样。

然后我将上面的类与引导样式应用为-

```
<div class="span4">
   <span class="text-span hideOverflow">@Html.ActionLink(item.Name, "Details", new { id = item.Id }, new { @class = "JumpLinks", @style = "font-size:13px;font-weight:bold;" })</span>
   <span style="color: #ADADAD; font-size: 11px;" class="text-span margin0">@Html.DisplayFor(modelItem => item.StartDate)</span>
</div> 
```

现在的问题是我的**margin0**没有按我的意愿申请。**引导样式效果覆盖我的 css 效果**。我不想让它发生。如何解决这个问题？

我检查了元素，然后我的类被类下面的引导程序覆盖-

```
.row-fluid [class*="span"] {
display: block;
float: left;
width: 100%;
min-height: 30px;
margin-left: 2.127659574468085%;
-webkit-box-sizing: border-box;
-moz-box-sizing: border-box;
box-sizing: border-box;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T06:18:23.070

尝试

```
<div class="span4">
<span class="text-span hideOverflow">@Html.ActionLink(item.Name, "Details", 
 new { id =  item.Id }, new { @class = "JumpLinks", @style = "font-size:13px;
  font-  weight:bold;" })</span>
    <span style="color: #ADADAD; font-size: 11px;margin:0px !important; " class="
     text-span">@Html.DisplayFor(modelItem => item.StartDate)</span>
</div> 
```

# ios - iOS - 如何在 ios6 中实现自创委托

> ID：15332264
> 
> 赞同：1
> 
> 时间：2013-03-11T06:13:37.237
> 
> 标签：ios, objective-c, delegates

我为我的项目创建了一个委托，我的主视图的代码是

**VedantViewController.h**

```
@protocol VedantDelegate;

@interface VedantViewController : UIViewController
{    
    id <VedantDelegate> delegate;   
}

//some other outlets
@property(nonatomic, assign) id <VedantDelegate> delegate;

@protocol VedantDelegate <NSObject>

- (void)display:(NSString *)JSONResponse;

@end 
```

**VedantViewController.m**

```
@synthesize delegate;

[delegate display:jsonResponse]; 
```

**SecondViewController.h**

```
@interface SecondViewController : UIViewController<VedantDelegate>

- (void)display:(NSString *)JSONResponse; 
```

**第二视图控制器.m**

```
- (void)display:(NSString *)string
{

} 
```

但是当我使用断点调试代码时，此代码无法正常工作，代码到达

```
[delegate display:abc]; 
```

但它不调用**SecondViewController.m**文件中的显示函数

我认为我的代码是正确的，但有一些我无法识别的错误

让我解释一下我的项目流程这可能是问题所在

默认情况下，VedantViewController 视图在单击显示按钮后启动，它会在视图中调用 SecondViewController 视图，这些是调用 VedantViewController 中的函数的列表按钮，此函数然后调用委托方法，即 [delegate display:jsonResponse]；

在此先感谢，阿伦。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T06:16:31.503

与协议确认的视图控制器应该在 viewDidLoad 或您正在制作该 viewController 对象的任何地方都有这一行

在 SecondViewController.m 中添加这一行

`VedantViewControllerObject.delegate = self;`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T06:21:16.117

```
@protocol VedantDelegate;

    @interface VedantViewController : UIViewController{

        id<VedantDelegate> delegate;

    }
     //some other outlets
    @property(nonatomic,assign) id<VedantDelegate> delegate;

    @protocol VedantDelegate <NSObject>

    -(void)displayAccounts:(NSString *)JSONResponse;
    -(void)display:(NSString *)JSONResponse;

@end 
```

并在 SecondViewController 类中将 VedantViewControllerObject 类的对象的委托设置为 self ，并且应该初始化和分配 VedantViewControllerObject 类的对象。

```
vedantViewControllerObject.delegate = self; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-11T06:21:53.713

在您的`VedantViewController.h`文件中，您声明了如下方法

```
-(void)displayAccounts:(NSString *)JSONResponse; 
```

但你在叫它`[delegate display:jsonResponse];`

你只是试着打电话

```
 [delegate displayAccounts:jsonResponse]; 
```

在**SecondViewController.m**

```
(void)displayAccounts:(NSString *)string{

    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-11T06:23:53.177

您的代码中存在一些问题：

1.  在第二个视图控制器中设置委托 vedViewObject.delegate = self;
2.  您`displayAccounts`在委托和调用`display`方法中添加了方法，这可能会导致问题。如果该方法未在委托类中实现。
3.  添加 if 条件，如：`if(delegate)[delegate displayAccounts:jsonResponse];`

# objective-c - 在 tabBarItem 点击事件上显示默认的 tabBarView

> ID：15332265
> 
> 赞同：1
> 
> 时间：2013-03-11T06:13:39.103
> 
> 标签：objective-c, xcode

我`UITabbarController`在我的应用程序中使用过。其中一个 tabBarItem`contactsViewController`显示联系人列表`UITableView`。当我单击 tableRow 时，它会加载另一个视图。然后我单击其他一些。再次单击`tabBarItem`它`contactsViewController`会将我带到我离开的视图。它不显示默认联系人视图`UITabbarController`。我已经以编程方式创建。如何在点击时显示默认 tabBarView `tabBarItem`？

```
tabbarController = [[UITabBarController alloc]init];
self.tabbarController.delegate = self;

tabbarView = [[UIView alloc]initWithFrame:CGRectMake(0, 431, 320, 49)];

            UIImageView *tabImage = [[UIImageView alloc]initWithFrame:CGRectMake(0, 0, 320, 49)];
            [tabImage setImage:[UIImage imageNamed:@"Taskbar.png"]];
            [tabbarView addSubview:tabImage];

            UIButton *tabItem1 = [[UIButton alloc]initWithFrame:CGRectMake(0, 0, 64, 49)];
            [tabItem1 setImage:[UIImage imageNamed:@"Btn_Home.png"] forState:UIControlStateNormal];
            [tabItem1 setTag:1];
            [tabItem1 addTarget:self action:@selector(tabBarBtnAction:) forControlEvents:UIControlEventTouchUpInside];
            [tabbarView addSubview:tabItem1];

-(IBAction)tabBarBtnAction:(id)sender
{
    UIButton *btn = (UIButton *)sender;
//    NSLog(@"tag %d\n",btn.tag);
    [self resetTabBarBtnImage];
    [self resetAllTabBarBtnImage];
    PreviousBtnTag = btn.tag;
    if ([btn tag]==1) {
        tabbarView.hidden = YES;
        [self.tabbarController setSelectedIndex:0];
        [self.navigationController popToRootViewControllerAnimated:YES];
        [btn setImage:[UIImage imageNamed:@"Btn_Home-Over.png"] forState:UIControlStateNormal];

    }
    else if([btn tag]==2)
    {
        tabbarView.hidden = NO;
        [self.tabbarController setSelectedIndex:1];
        [btn setImage:[UIImage imageNamed:@"Btn_Contacts-Over.png"] forState:UIControlStateNormal];
         [self.navigationController popToRootViewControllerAnimated:YES];

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T06:49:01.807

在`appDelegate`类中，最初设置`UItabbarController` `delegate`为`self`

在`appDelegate`ie .m 文件的实现中

```
//Assuming the first tab has the contactsviewController

-

(void)tabBarController:(UITabBarController *)tabBarController didSelectViewController:(UIViewController *)viewController   {
        if (tabBarController.selectedIndex == 0) {
            UINavigationController *requiredNavigationController = [tabBarController.viewControllers objectAtIndex:0];
            [requiredNavigationController popToRootViewControllerAnimated:YES];
        }
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T15:16:49.587

我建议您使用 Interface Builder 创建“标签栏控制器”，因为以这种方式实现这些东西要容易得多。无论如何，如果您想继续尝试以编程方式创建它，请尝试更改：

```
[self.navigationController popToRootViewControllerAnimated:YES]; 
```

为了这：

```
RootViewController *controller = [self.storyboard instantiateViewControllerWithIdentifier:@"Root"];
    [self.navigationController pushViewController:controller animated:YES]; 
```

如果这对您不起作用，您为什么不使用工具栏项目，而不是标签栏控制器？使用工具栏项目管理事件非常容易，因为它们被视为按钮。

祝你好运！

# isabelle - 以应用样式删除目标中的变量

> ID：15332271
> 
> 赞同：1
> 
> 时间：2013-03-11T06:14:43.070
> 
> 标签：isabelle

最近学习[了如何在应用式证明中删除不需要的前提](https://stackoverflow.com/questions/15311959/drop-a-premise-in-a-goal-in-apply-style)，我现在想知道如何删除不需要的*变量*。也就是说，假设我有目标

```
1\. !!x y z. A ⟹ B ⟹ C 
```

where`y`没有出现在`A`,`B`或`C`中。如何将其转换为以下内容？

```
1\. !!x z. A ⟹ B ⟹ C 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-11T10:27:33.273

`triv_forall_equality`确实是去除冗余参数的纯规则。`prune_params_tac`作为 ML 策略，它也适用于所有子目标。请注意，后者没有作为 Isar 证明方法公开，因为在实践中几乎不需要它：默认情况下，类似的工具`simp`已经`auto`包含它。

请注意，方法 via`(simp only: triv_forall_equality)`在许多情况下都有效，但也有一个障碍：`only`Isabelle/HOL 中的修饰符比“仅”使用给定的 simp 规则做得更多。它包括诸如算术求解器之类的东西，这可能会在某些情况下引起意外或混乱。

`prune_params_tac`为了在 Isar 方法语言中精确模仿，您可以使用，`(unfold triv_forall_equality)`尽管存在一个微小的概念障碍：它使用任意重写而不是仅仅折叠方程`c = t`只是一个历史事故。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-11T06:40:25.943

一个简单的：

```
apply simp 
```

会成功的。如果您不想对目标状态执行任何其他转换，可以尝试：

```
apply (simp only: triv_forall_equality) 
```

这将删除不必要的元量词，但不会修改目标状态。

# requirejs - Marionette + RequireJS：在 ItemView.render() 中执行 require

> ID：15332274
> 
> 赞同：0
> 
> 时间：2013-03-11T06:15:00.320
> 
> 标签：requirejs, marionette

我正在尝试异步加载和渲染其他视图并将它们附加到 ItemView。

简化代码-为什么`$el`没有在`require()`块中定义`render()`-我在这里缺少什么？我没有正确使用 RequireJS，还是 Marionette，或者只是我对 javascript 缺乏经验？

推荐的方法是什么？它需要是动态的，因为在运行时可能会提供其他部分视图，而我还不知道插件已注册。

```
define(['require','marionette', 'App', 'swig', 'backbone.wreqr','text!./settings.html'],
function (require,Marionette, App,Swig, Wreqr,  settingsHtml )
{

    var sectionViews = ['./settingscontent/GeneralView'];

    var SettingsView = Marionette.ItemView.extend(
        {
            template: Swig.compile(settingsHtml),
            commands: new Wreqr.Commands(),
            initialize: function ()
            {
                this.commands.addHandler('save', function (options, callback)
                {
                    callback();
                });
                Marionette.ItemView.prototype.initialize.apply(this, arguments);
            },
            render: function()
            {

                Marionette.ItemView.prototype.render.call(this);
                var $el = this.$el;
                var self = this;
                require(sectionViews, function (View)
                {
                    $el.find('div.tab-content').append(new View(self.model).render().$el);
                // $el is not defined 
                // self != outer this - $el is an empty div 
                });
                return this;

            }
        }
     return SettingsView;
}) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T16:14:13.507

你为什么要重载 itemview.render？

为什么不使用内置的 onrender 事件 [https://github.com/marionettejs/backbone.marionette/blob/master/docs/marionette.itemview.md#render--onrender-event](https://github.com/marionettejs/backbone.marionette/blob/master/docs/marionette.itemview.md#render--onrender-event)

从该文档中：

```
Backbone.Marionette.ItemView.extend({
  onRender: function(){
   // manipulate the `el` here. it's already
   // been rendered, and is full of the view's
   // HTML, ready to go.
 }
}); 
```

似乎更容易和更典型的木偶用法

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-06T12:22:25.583

您需要将`this`函数内部绑定到`SettingsView`对象。就像是：

```
render: function()
{
     Marionette.ItemView.prototype.render.call(this);
     var $el = this.$el;
     var self = this;
     require(sectionViews, _.bind(function (View)
     {
         ...
     }, this));
     return this;
 } 
```

局部变量在绑定函数内将不可见。`this`但是，您可以`this.$el`安全地使用。

# c# - 将静态变量传递给函数

> ID：15332276
> 
> 赞同：1
> 
> 时间：2013-03-11T06:15:15.287
> 
> 标签：c#, multithreading, static

我有以下全局变量

```
private static Queue<List<object>> webdata1Queue = new Queue<List<object>>();
private static Queue<List<object>> webdata2Queue = new Queue<List<object>>();
public static DataTable products1;
public static DataTable products2; 
```

和这个功能

```
private void Downloader(Queue<List<object>> webdataQueue,Datatable products)
        {
        } 
```

这是将静态变量传递给函数的正确方法吗？我需要传递声明的变量，因为我将使用具有 2 个不同线程的相同函数。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T06:43:51.037

如果您要将 null 分配给该变量或在方法内对其进行初始化，那么它将不起作用，但是如果您只是修改它的属性并将项目添加到列表中，您可以像您正在做的那样传递它。

# java - 如何使用 Swing 在 Java 中构建我的图形结构？

> ID：15332277
> 
> 赞同：0
> 
> 时间：2013-03-11T06:15:19.047
> 
> 标签：java, swing, graphics, frame, java-canvas

我想知道您是否可以帮助我了解我的程序结构。我正在用 Java 制作游戏，我有 2 个类。1 类是一个图形类，它用一个paint 方法扩展了 JFrame：

图形类 paint() 并调用使用 JFrame 作为参数的各种对象。类内部是一个实现 MouseListener 和 Mouse Motion Listener 的子类，它与paint方法交互。

画布类我计划将第一个类嵌入到一个更大的画布类中，该类将具有按钮、面板等，因此基本上将该类用作更大程序中的一个较小（子程序）。这可能吗/我这样做是否正确。每当我尝试在画布类中调用图形类时，图形都不会出现。

```
 public Canvas(){
    graphic = new Graphic(name);

}
/**
 * @param args
 */
public static void main(String[] args) {
    // TODO Auto-generated method stub
    Canvas canvas = new Canvas();
            canvas.setDefaultCloseOperation(EXIT_ON_CLOSE);
            canvas.setSize(1500, 1500);
    canvas.setVisible(true);
} 
```

任何帮助/指导将不胜感激。我只是想主要知道我是否正确地考虑了图形编程。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T07:23:14.127

`Canvas`不是“窗口”。为了在屏幕上显示任何内容，必须将组件添加到窗口委托。

我个人会避免覆盖`paint`顶级容器的方法。这样做的主要原因是顶级容器不是双缓冲的，它会降低您的应用程序的可移植性。将一个组件添加到其他组件要容易得多，一个框架是非常最终的。

我也会`JPanel`在 Canvas 上使用，因为`JPanel`它是双缓冲的。

# c++ - 访问静态成员时的 EXC_BAD_ACCESS？

> ID：15332280
> 
> 赞同：1
> 
> 时间：2013-03-11T06:15:24.173
> 
> 标签：c++, xcode, exc-bad-access, cocos2d-x, static-members

我在 Cocos2d-x v2 平台上开发了一款游戏，我从 Android 开始，在 Eclipse 上完全完成编码后，我在 Xcode 上使用相同的代码创建和 iOS 版本。添加所有必需的库后，我成功编译了代码。然而，游戏在 iOS 设备上运行时会挂起，尽管它在 Android 上运行没有任何问题。我尝试了模拟器和 iPod，但从静态方法访问静态成员时总是得到 EXC_BAD_ACCESS。静态成员总是指向 0x0！！这是代码的摘录：\

AppDelegate.cpp

```
#include "AppDelegate.h"
#include "NASEncData.h"
AppDelegate::AppDelegate()
{
    ep = NASEncData::sharedUserData();
} 
```

NASEncData.h

```
namespace CocosNas
{
    class NASEncData : public CCObject
    {
public:
        static NASEncData* sharedUserData();

private:
        NASEncData();

        static void initXMLFilePath();

        static std::string m_sFilePath;
    }
} 
```

NASEncData.cpp

```
#include "NASEncData.h"

NASEncData* NASEncData::sharedUserData()
{
    initXMLFilePath();

    // only create xml file one time
    // the file exists after the programe exit
    if ((! isXMLFileExist()) && (! createXMLFile()))
    {
        return NULL;
    }

    if (! m_spUserData)
    {
        m_spUserData = new NASEncData();
    }

    return m_spUserData;
}

void NASEncData::initXMLFilePath()
{
    if (! m_sbIsFilePathInitialized)
    {
        m_sFilePath += CCFileUtils::sharedFileUtils()->getWriteablePath() + NASENCDATA_XML_FILE_NAME;                  <----error happens here
        m_sbIsFilePathInitialized = true;
    }   
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T16:35:20.137

根据您对问题的评论，您的问题可能是静态数据的初始化顺序。更具体地说，我认为静态`AppDelegate`实例有可能在`NASEncData`. 这个问题也可以解释你在不同平台上看到不同行为的事实，因为不相关的静态数据的初始化顺序取决于编译器和链接器。

要解决此问题，您可以`NASEncData`像这样更改：（请注意，这只是一种可能的解决方法，尽管如果静态的初始化顺序确实是您的问题，我认为这是最简单和最好的解决方案，除了重新设计您的代码以便您不必依赖静态成员。）

NASEncData.h

```
namespace CocosNas
{
    class NASEncData : public CCObject
    {
    public:
        static NASEncData* sharedUserData();

    private:
        NASEncData();

        static void initXMLFilePath();

        // Note how the stuff below this line have changed
        struct StaticData
        {
            std::string m_sFilePath;
            // Put other static members here
            //   (e.g. m_sbIsFilePathInitialized, m_spUserData, etc.)
            // Put a proper constructor here if needed
        };

        static StaticData & getStaticData ()
        {
            static StaticData s_data;
            return s_data;
        }
    }
} 
```

NASEncData.cpp

```
void NASEncData::initXMLFilePath()
{
    if (! m_sbIsFilePathInitialized)
    {
        // Note the change in accessing m_sFilePath
        // You should access all your static members like this
        getStaticData().m_sFilePath +=
            CCFileUtils::sharedFileUtils()->getWriteablePath() +
            NASENCDATA_XML_FILE_NAME;
        getStaticData().m_sbIsFilePathInitialized = true;
    }   
} 
```

这样做可以确保当您尝试访问静态成员数据时，它们已经被初始化。发生这种情况是因为您的所有静态成员数据现在都在函数内部定义为静态的，并且要访问它们，您必须调用该函数，并且编译器会生成代码以确保第一次调用该函数（并且仅是第一次) 您的数据已正确构建和初始化，这反过来意味着您第一次实际尝试访问此数据时，无论何时何地，您的数据都已正确初始化。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T07:39:20.143

这确实是一个初始化问题，我只需将代码从构造移动到 bool AppDelegate::applicationDidFinishLaunching() 并且它起作用了！

# java - JavaFX2 - 获取 IO-Control 的 ImageView

> ID：15332288
> 
> 赞同：0
> 
> 时间：2013-03-11T06:15:45.890
> 
> 标签：java, javafx-2

我正在使用 JavaFX2.2。在创建 UI 控件后，实际上是否可以将**ImageView**用作 UI 控件（例如 Button 或 Label）的构造函数中的参数？

我想更改控件的图像。我也可以用 CSS 来做，但我不确定如何在那里使用 jar-resources。

例子：

```
Label label = new Label("", new ImageView(new Image(getClass().getResourceAsStream("test.png"))));
label.getImageView().setImage(...); // there is no such method getImageView() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T07:42:58.117

((ImageView) label.getGraphic()).setImage(...)

# php - 通过引用传递（当变量可以改变，但不是必须的）

> ID：15332289
> 
> 赞同：1
> 
> 时间：2013-03-11T06:15:52.260
> 
> 标签：php, pass-by-reference, copy-on-write

已经非常彻底地解释了，如果它们是技术原因，您只能在 PHP 中通过引用传递，因为 Copy-On-Write 基本上使性能等效。据我了解，如果它从未更改过，它永远不会复制对象。

但是，如果函数确实更改了变量，但您的代码不再使用它/不使用任何已更改的部分怎么办？是否更改原始代码对代码无关紧要。是的，PHP 优化器可能会考虑这种情况，但我没有理由相信它会这样做。

传递单个引用肯定会比复制一个巨大的数组或对象快得多。

那么这是通过引用传递的好情况吗？

例如，假设您传入一个 DomCrawler （只不过是一个大的 [html 格式化] 字符串，除了在这种特定情况下它是通过引用隐式传递的）。爬行一点并提取一些信息。在许多情况下，您不需要将 Crawler 重置为其原始位置，因为您根本不会再次使用它。另外，想象一下我们确实使用了 DOMCrawler，我们从中读取 URI。该函数没有改变这一点，所以通过引用或值传递仍然是等价的，但是通过引用传递不会明显更优化吗？我认为这种情况对于任何优化者来说都很难发现。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-11T17:56:32.693

> 那么这是通过引用传递的好情况吗？

不。

好的。想象一下，你有一个 $bigString 并将它传递给一个函数，该函数修改它并用它做一些事情，而调用者再也不需要它了。通过引用传递最初更快，因为它避免了复制。但是，这仍然是一个坏主意。

(1) 如果另一个调用者调用您的函数*并*希望继续使用该变量，那么事情就会中断。该引用基本上违反了封装。

(2) 只要​​您在函数外部有*多个*非引用变量引用该值，只需创建引用就需要再次复制。（变量值保存在可能是非引用（修改时复制）或引用（修改时不做任何特殊操作）的容器中，因此对于引用变量和非引用变量，请尝试在同时，它必须被复制。）

(3) 由于上述原因，像在函数中调用 strlen 这样无辜的事情将不得不复制值，因为 strlen 的参数是按值传递的，这是规范。现在假设您在循环中调用了一些函数，例如 substr 和 strlen，并且您*每次都在制作数据的新副本。*

(4) DDR3 RAM 每秒可以推超过 10 GB，而 CPU 缓存 RAM 天知道有多快。我认为 PHP 性能比字符串或数组复制需要多长时间更需要担心。

不要将参考用于迷信的性能提升。它永远不会起作用。

如果您真的想避免复制，那么正确的方法可能是将您的函数作为照顾变量的对象的方法：

```
class Thing {
    private $bigString;

    public function foo() {
        $this->bigString[0] = 'x';
    }
} 
```

然后您避免复制，获得封装的好处并且没有引用的微妙之处。

PS：DomCrawler 不是一个很好的例子，因为它是一个对象。PHP 对象无论如何都不是写时复制（我认为它们是，但是有一个额外的间接级别，所以写时复制的唯一部分是一个小指针容器，或类似的东西）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-27T12:54:03.053

出于与避免 goto 相同的原因，我一直避免通过引用传递。

```
$a = myFunction($a); 
```

比阅读和重用更容易`myFunction(&$a);`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-11T06:42:57.187

根据我对 PHP 系统的理解，一切都是通过“引用”传递的。因此，如果您要传递巨大的数组或对象，它们总是通过“引用”传递。

我把“参考”放在引号中，因为这里有两种不同的类型：

*   显式引用是您向 php 指定您希望将其作为引用跟踪的位置
*   隐式引用是您希望将其作为值跟踪的位置，而不是

PHP 默认为隐式引用。

因此，在您更改隐式引用之前，不会对性能产生影响。在这种情况下，PHP 会将值分配到单独的内存地址并更新您的引用。

如果编译器检测到该变量不再被使用或不再在作用域内，GC 会将其铲除。

# java - java中的类型转换

> ID：15332297
> 
> 赞同：1
> 
> 时间：2013-03-11T06:16:55.143
> 
> 标签：java, casting, type-conversion

在java的类型提升规则中定义了long数据可以转换为float数据类型。怎么可能？？

例如 ：

```
 class casting{

    void show(float a){
   System.out.println("float");
   }

 public static void main(String args[]){
   casting obj = new casting();
  obj.show(10l);
  }

} 
```

但是这里的输出是 float 8 字节的长数据如何转换为浮点数据（4 字节）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T06:27:40.813

我修改了你的程序如下。long 是 64 位有符号数据类型，最大值为 9223372036854775807l。当您将其转换为浮点数时，它会打印为 9.223372E18。float 是 32 位单精度数据类型。希望这可以帮助

```
public class casting {

    void show(float a) {
        System.out.println("float is " + a);
    }

    public static void main(String args[]) {
        casting obj = new casting();
        obj.show(9223372036854775807l);
    }

} 
```

# entity-framework - 如何停止 EF 检测对我的数据库/模型的更改

> ID：15332305
> 
> 赞同：3
> 
> 时间：2013-03-11T06:17:33.720
> 
> 标签：entity-framework

我的代码中有以下内容：

```
 DbContext = new DataContext();
 DbContext.Configuration.AutoDetectChangesEnabled = false; 
```

然后在我的控制器方法中：

```
// GET /api/Applications
public IEnumerable<Application> Get()
{
    return _uow.Applications.GetAll().OrderBy(p => p.Name);
} 
```

但是我仍然收到以下消息：

```
System.InvalidOperationException was unhandled by user code
  HResult=-2146233079
  Message=The model backing the 'DataContext' context has changed since the database was created. Consider using Code First Migrations to update the database (http://go.microsoft.com/fwlink/?LinkId=238269).
  Source=EntityFramework
  StackTrace: 
```

有人可以解释为什么会这样。我认为创建上下文后的行会停止此检查。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-11T07:53:07.967

您可以放置​​（这是一个静态方法）

```
Database.SetInitializer<DataContext>(null); 
```

在你第一次使用你的`DataContext`. 但请注意，这将关闭它。完毕。如果您的数据库与模型不兼容，您的查询等将失败。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T06:39:08.533

这是因为您的实体模式在数据库模式方面存在一些差异。错误是说您需要根据代码中的新模型更新数据库模式。

**AutoDetectChangesEnabled** 与[此错误无关](https://stackoverflow.com/questions/6977609/ef-4-1-dbcontext-autodetectchangesenabled)。因为它是关于跟踪数据的变化，而你得到的错误与数据库模式的变化有关。

该错误消息建议您使用[代码优先迁移](http://msdn.microsoft.com/en-US/data/jj591621)来根据您对数据模型的更改来更新数据库架构。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-11-05T01:26:35.700

您有 2 个选项：

**1.`null`通过将此行放在派生 DbContext 的构造函数中来设置上下文的 Initializer：**

```
Database.SetInitializer<MyContext>(null); 
```

**2\. 通过在节点内`Web.config`添加一个来禁用文件中的数据库初始化程序：`Key``appSettings`**

```
<?xml version="1.0" encoding="utf-8"?>
<configuration>
    <appSettings>    
    <add key="DatabaseInitializerForType YourNamespace.YourDbContext, YourAssemblyName"
            value="Disabled" />
    </appSettings>
</configuration> 
```

将`YourNamespace.YourDbContext`和替换`YourAssemblyName`为应用程序中的相应值。

# .net - 引用另一个表中的多个主键

> ID：15332308
> 
> 赞同：3
> 
> 时间：2013-03-11T06:17:48.560
> 
> 标签：.net, sql, database

我正在开发一个新的 Web 应用程序，为此我还需要定义它的数据库结构。

问题是我有一个名为 的表`Department`，其中包含：

```
id: int
name: varchar 
```

还有一张桌子叫`Employee`

```
id: int
name: varchar
dept: Department.id(s) (Foreign Key) 
```

问题是一个员工可能属于多个部门，我无法弄清楚如何将这些信息存储在表中，例如：

如果客户 001 属于部门 004,005 和 006，那么我如何将这三个部门键存储在一列中，即 Employee.dept？

我发现一种可能的方法可以将它们存储为分隔字符串，如“004,005,006”，但为此我必须将它们来回转换为字符串和 int，而不是在字符串中搜索特定的出现。

任何人都可以帮助我为这个问题提出一个“有效”和正确的解决方案吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-11T06:20:01.323

不要将它们存储`ID`为逗号分隔值。这是一个非常非常糟糕的设计。正确规范化表格。

这是一种`Many-to-Many`关系。所以你的架构上应该有三个表，

部门

*   身份证（PK）
*   姓名

员工

*   身份证（PK）
*   姓名

Employee_Department

*   部门 ID (FK)
*   员工 ID (FK)

* * *

所以当翻译成真正的 DDL 时，

```
CREATE TABLE Department
(
    ID INT,
    NAME VARCHAR(50),
    CONSTRAINT dept_pk PRIMARY KEY (ID),
    CONSTRAINT dept_uq UNIQUE(Name)
)

CREATE TABLE Employee
(
    ID INT,
    NAME VARCHAR(50),
    CONSTRAINT Emp_pk PRIMARY KEY (ID),
    CONSTRAINT Emp_uq UNIQUE(Name)
)

CREATE TABLE Employee_Department
(
    DepartmentID INT,
    EmployeeID INT,
    CONSTRAINT empdep_pk PRIMARY KEY (DepartmentID, EmployeeID),
    CONSTRAINT empdep_FK1 FOREIGN KEY (DepartmentID)
        REFERENCES Department(ID),
    CONSTRAINT empdep_FK2 FOREIGN KEY (EmployeeID)
        REFERENCES Employee(ID)
) 
```

# java - 从存储为超类 Java 的子类访问方法（向下转换？）

> ID：15332314
> 
> 赞同：0
> 
> 时间：2013-03-11T06:17:57.983
> 
> 标签：java, class, subclass, jlist, downcast

我正在使用 Java 开发库存程序。我将库存中的每个对象都存储为每个位置的相关`DefaultListModel`类类型；`JList`例如，如果我在“Dorm”位置有一个名为“Mulan”的视频和一个名为“Ball”的通用事物，在`JList`名为“Dorm”中，“Mulan”将是一个实例，`video`“Ball”将是一个实例的`thing`。所有的类都继承自thing。

我正在尝试做这样的事情......

```
Dorm.getSelectedValue().methodInVideoOrThing; 
```

...但是当我尝试它时，它说：

```
error: cannot find symbol
      Dorm.getSelectedValue().methodInVideoOrThing();
                             ^
symbol:   method methodInVideoOrThing()
location: class Object 
```

因为 DefaultListModel 将每个对象存储在一个通用`object`变量中，所以我无法访问我创建的任何类的方法。我试过这个...

```
class c = Dorm.getSelectedValue().getClass();
c A = (c) Dorm.getSelectedValue();
A.methodInC; 
```

...但它返回了以下错误：

```
error: cannot find symbol
      c A = (c) Dorm.getSelectedValue();
      ^
symbol: class c

error: cannot find symbol
      c A = (c) Dorm.getSelectedValue();
             ^
2 errors
symbol: class c 
```

我知道我可以`isInstanceOf`根据具体情况循环遍历所有使用和向下转换的类，但这会非常乏味。另外，当我做...

```
System.out.println(Dorm.getSelectedValue().getClass()); 
```

...它返回`class video`or `class thing`，具体取决于选择的是“Ball”还是“Mulan”，所以我知道 java 知道它是什么类。

那么，当该子类存储为对象类型的变量时，是否有某种方法可以访问子类的方法，而无需向下转换？或者有没有办法通过向下转换来做到这一点，而我只是做错了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T07:30:07.530

因此，除了向下转换之外，没有办法使用超类型的子类型方法。所以最好你可以设置一个if-else阶梯

```
if (o instanceof Type1)
{
((Type1)0)MethodOfType1
}
else if
{
...
} 
```

但在我看来，我宁愿在你的事物和视频之上再添加 1 级类，并为事物和视频提供一个通用的方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T09:09:37.807

这里的问题在于您的面向对象设计。什么样的方法是“methodInVideoOrThing()”？如果这是所有事物（包括视频）共有的方法，那么它属于 Thing。如果它是特定于视频的方法，那么它属于 Video。

在第一种情况下（Thing 的方法），您只需将 JList 中的值转换为 Thing 即可：

```
Thing selectedThing = (Thing) dorm.getSelectedValue();
selectedThing.methodInThing(); 
```

在第二种情况下（视频方法），您遇到了您描述的问题，即必须区分不同类别的事物，如视频、水果和服装。我想在这种情况下我会做的是创建单独的类来处理每个类别并根据其类别将对象传递给它，一个简单的例子：

```
public interface Handler {
    public Class getCategory();
    public void handle(Thing item);
}

public class VideoHandler implements Handler {
    public Class getCategory() {
        return Video.class;
    }

    public void handle(Thing item) {
        if (!item instanceof getCategory()) {
            throw new IllegalArgumentException("Wrong category - can only handle Video");
        }
        Video video = (Video) item;
        // do video-things            
    }        
} 
```

在您的调用类中，您需要根据类别选择正确的处理程序：

```
private void init() {
    List<Handler> handlers = new ArrayList<Handler>();
    handlers.add(new VideoHandler());
    // add other handlers
}

public void someMethod(Jlist dorm) { 
    Object item = dorm.getSelectedValue();
    for(Handler handler : handlers) {
        if (item instanceof handler.getCategory()) {
            // optionally catch IllegalArgumentException here 
            handler.handle(item);
        }
    }
} 
```

这可以做得更好一点，例如使用枚举作为类别而不是类，使用泛型来键入处理程序并将任何常见行为（如类型检查）提取到抽象类中，但这就是它的要点。

# c# - 如何制作操作系统启动时启动的启动程序

> ID：15332315
> 
> 赞同：-2
> 
> 时间：2013-03-11T06:18:00.333
> 
> 标签：c#, .net, windows, winforms, c#-4.0

假设我有一个做某事的 C# 程序，

我希望该程序继续自行运行或在计算机启动时自动开始执行。

以及如何使该程序无法检测到，即，不能在任务管理器的进程列表中检测到它。

假设我有一个在 Windows 窗体上显示随机数的程序。

```
for(;;)
{
Random random = new Random();
int randomNumber = random.Next(0, 100);
} 
```

我希望该程序在计算机启动时运行并继续运行直到计算机关闭。我不希望用户终止它怎么做。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-11T06:21:00.127

听起来你想创建一个`Windows Service`

在这里查看更多信息：

[http://msdn.microsoft.com/en-us/library/zt39148a(v=VS.80).aspx](http://msdn.microsoft.com/en-us/library/zt39148a(v=VS.80).aspx)

[http://www.codeproject.com/Articles/14353/Creating-a-Basic-Windows-Service-in-C](http://www.codeproject.com/Articles/14353/Creating-a-Basic-Windows-Service-in-C)

[http://www.c-sharpcorner.com/UploadFile/mahesh/window_service11262005045007AM/window_service.aspx](http://www.c-sharpcorner.com/UploadFile/mahesh/window_service11262005045007AM/window_service.aspx)

值得注意的是，Windows 不会让您创建用户无法终止的服务。这是由于安全性和性能。至少据我所知，唯一不能停止的服务类型是系统驱动程序。

# dictionary - Clojure 交换！不在 let 绑定中的地图函数内工作

> ID：15332320
> 
> 赞同：2
> 
> 时间：2013-03-11T06:18:26.673
> 
> 标签：dictionary, clojure, swap, let

我有两个要比较的序列，我需要将比较结果保存在地图中，第一个序列中的数据用作键，第二个用作 val。这是有效的示例代码

```
(def myAtom  (atom {}))

(map #(if (== %1 %2) (swap! myAtom assoc %1 %2 ))
              [1 2 3]   [4 5 3]) 

(prn @myAtom)  ; ==>  {3 3} 
```

然而，在将上面的“相同”的东西放入一个 let 绑定之后，它就不再起作用了

```
(let  [ myAtom  (atom {})]    
  (map #(if (== %1 %2) (swap! myAtom assoc %1 %2 ))
              [1 2 3]   [4 5 3]) 
  (prn @myAtom)) ;;==> {} empty??? 
```

那么问题来了，在 let 绑定中 myAtom 会发生什么？怎么不见了？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-11T06:34:43.790

`map`是从序列中生成惰性序列，而您需要为序列中的每个项目执行某些操作（即交换），因此您需要使用`doseq`

**编辑：（更新为@mobyte 建议）**

```
(let  [myAtom  (atom {})
       a [1 2 3]
       b [4 5 3]]    
  (doseq [[x y] (map vector a b)]
    (if (== x y) (swap! myAtom assoc x y )))
  (prn @myAtom)) 
```

您的第一个示例有效，因为您在 REPL 中执行了每个表达式，这使得 map 操作执行其惰性操作。

我见过很多人尝试使用 map 来执行某些类似这样的操作， map 应该只用于一个目的，即将一个序列映射到另一个序列，而没有任何副作用操作。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-11T08:30:07.737

正如 Ankur 提到的，最好`doseq`用于命令式操作：

```
(let [myAtom  (atom {})]    
  (doseq [[a b] (map vector 
                     [1 2 3]
                     [4 5 3])]
    (when (== a b) (swap! myAtom assoc a b )))
  (prn @myAtom)) 
```

但是您可以通过[`dorun`](http://clojuredocs.org/clojure_core/clojure.core/dorun)在原始版本中使用来强制评估地图结果：

```
(let  [ myAtom  (atom {})]    
  (dorun (map #(when (== %1 %2) (swap! myAtom assoc %1 %2 ))
              [1 2 3] [4 5 3])) 
  (prn @myAtom)) 
```

**PS** Ankur 的版本不等同于原版

`doseq`：

```
(doseq [a [1 2 3]
        b [4 5 3]]
  (println [a b]))

=> [1 4]
   [1 5]
   [1 3]
   [2 4]
   [2 5]
   [2 3]
   [3 4]
   [3 5]
   [3 3] 
```

`map`：

```
(dorun (map #(println [%1 %2]) 
            [1 2 3]
            [4 5 3]))

=> [1 4]
   [2 5]
   [3 3] 
```

# svn - 如何安排我的 SVN 目录？

> ID：15332324
> 
> 赞同：2
> 
> 时间：2013-03-11T06:18:39.237
> 
> 标签：svn, settings, project, directory

我的团队中有 3 名开发人员，他们都从事同一个项目，即 .NET VB 系统。它们通常在不同的功能上工作，但它们经常发生冲突，因为它们更改了相同的文件。源文件在网络设备上共享，当然每个人都有自己的工作副本 (WC)。问题是，设置 SVN 存储库的最佳解决方案是什么？：

1）我在 Trunk dir 上导入主要源文件，然后在 3 个不同的 WC 上签出，每个 WC 都针对其本地计算机上的特定用户，然后从该单个 Repos 处理所有冲突/合并/提交/更新。分支。
2）我在 Trunk 目录中导入主要源文件，然后复制到单个“Branches”目录，然后从那里处理所有操作。一切设置好后，我将处理主干和分支之间的合并。
3）我在 Trunk 目录中导入主要源文件，然后复制到 3 个不同的“Branches”目录，例如：

svn 复制树干-> 分支/user1；svn 复制树干 -> 分支/user2 ；svn 复制树干-> 分支/user3

然后处理所有不同的合并，我想这有点复杂。
4）任何其他解决方案？

非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T13:39:36.270

我自己更喜欢选项#3，因为它允许每个开发人员维护个人历史。分支和合并越频繁，就越容易，因此您可能会发现这在短期内是可行的。此工作流程还可以很好地映射到[功能分支](http://martinfowler.com/bliki/FeatureBranch.html)，我将其视为最佳实践。

从长远来看，如果你打算扩大这个团队，SVN 不适合这个工作流程。如果您想以这种方式工作，请考虑使用 DVCS，例如[Git](http://git-scm.com/)或[Mercurial ，因为它们极大地简化了分支和合并。](http://mercurial.selenic.com/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T13:48:31.137

听起来您应该采用早期分支模型。将主要源导入到`trunk`，然后将其分支并让您的团队为此工作。在正常开发过程中，可能会出现一个人的更改与另一个人发生冲突的情况，但这在任何版本控制系统中都是可以预料的。积极主动，把它当作一种学习经验。当您对分支中的工作感到满意时，将其合并回`trunk`.

几点建议：

*   `trunk`是国王。除非您*真的*知道自己在做什么，`trunk`否则应该始终处于“黄金”状态，这意味着不应该有任何会破坏构建的提交。
*   适当地命名你的分支。为一周挑选一些相关的开发任务，用合适的名称分支主干，处理它，然后在一周结束时将其合并回来。然后，您可以删除分支并在主干上创建一个新的分支，并使用新名称。随着时间的推移，您可以从主干（v1.0、v1.1、...等）标记发布。
*   使用有意义的提交消息进行小提交。它将在 3、6、12 个月后为您提供帮助。

更多信息[在这里](http://svnbook.red-bean.com/en/1.1/ch04s04.html#svn-ch-4-sect-4.4.2 "SVN 特征分支")和[这里](http://svnbook.red-bean.com/en/1.6/svn.branchmerge.tags.html "SVN 标签")。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-11T15:32:21.500

首先，您说“*源文件在网络设备上共享*”。你是什​​么意思？对于某些站点，它们有一个共享的网络驱动器并用于`file://`结帐和签入。如果您正在这样做，请不要这样做。请改用`svnserve`Apache HTTPD。`svnserve`在 Windows 上设置非常容易，并且有关如何设置`svnserve`为 Windows 服务的说明比比皆是，因此它会自动启动并重新启动。主要问题是端口 3690 是否在您的网络上被阻止。还有几个 Windows 软件包将安装已集成的 Apache httpd 和 Subversion。有些是完全开源的解决方案，但大多数是免费的。

偶尔的文件冲突应该不是问题。Subversion 能够以非常理智的方式处理冲突。假设开发人员*A*签出工作副本，开发人员*B*也是如此。开发人员*A*和*B*都更改了 foo.vbs。开发人员*B*首先提交他们的副本。当开发人员*A*尝试提交他们的更改时，Subversion 将不允许开发人员*B*提交，直到开发人员*B*更新他们的工作副本以包含开发人员*A*的更改。一旦开发人员*A*执行此操作并测试他们的更改，他们就可以提交组合的更改集。这是您的第一个场景。

使用场景 #3，通过让每个开发人员在单独的分支上工作，确实与场景 #1 做同样的事情：开发人员*A*和*B*都从主干创建一个分支，并从各自的分支结帐。他们可以在不合并的情况下将工作提交到自己的分支，但迟早他们必须将代码合并回主干。然后，他们将遇到相同的问题，即第一个开发人员可以轻松地进行合并，但第二个开发人员必须处理任何合并冲突。

唯一的区别是当您必须处理合并冲突时。场景 #3 允许开发人员忽略合并冲突，直到游戏进行到很晚，这使得处理合并变得更加困难。场景 #1 迫使开发人员在问题仍然很小时立即处理问题。我有几十个开发人员都在同一个分支上工作，没有任何问题。

# c#-4.0 - 将 if 'with range' 转换为 switch 语句

> ID：15332326
> 
> 赞同：0
> 
> 时间：2013-03-11T06:19:01.667
> 
> 标签：c#-4.0, if-statement, .net-4.0, switch-statement

今天有人问我如何将下面的if语句转换为switch：

```
int i=5;
if(i>10)
{
   Do Something;
}
else
{
    Do Something else;
} 
```

我建议假设 i 是一个只有正值的整数：

```
int i=5;
switch(i)
{
    case 1:
    case 2:
    case 3:
    case 4:
    case 5:
    case 6:
    case 7:
    case 8:
    case 9:
    case 10: Do Something else;
    break;
    case default: Do Something;
    break;
} 
```

还有其他更优雅的方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T06:23:08.310

首先，请注意您的两个代码示例（如最初编写的那样）不等效：

*   你不是`Do[ing] Something Else`在`i==10`你的`switch`例子中。
*   但是原始`if`代码正在检查`i>10`（而不是`i>=10`）。
*   所以`case 10:`应该明确地包含在你的`case`s列表中`Do Something Else`。

为了回答您的问题，我相信某些语言（例如帕斯卡，目标 C，我认为？）允许与此类似的*范围：*

```
switch(i)
{
    case 1-10: // or is it "case 1 .. 10" ?
        Do Something else;
        break;
    case default: 
        Do Something;
        break;
} 
```

但这在 C# 中不受支持***。***请参阅代码讨论中关于“堆叠”案例标签的最后一点[MSDN switch(C#)](http://msdn.microsoft.com/en-us/library/06tc147t%28v=vs.71%29.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T06:28:25.640

在 C# 中没有直接的方法，您可以尝试以下方法。

```
int range = (number - 1) / 10;

switch(range)
{
  case 0: 
       Console.WriteLine("1 to 10");
       break;
  case 1:
       Console.WriteLine("11 to 20");
       break;
 //.,......
  default:
       break;
} 
```

不太清楚它有多清楚，IMO，上述方法会降低代码的可读性，如果您`if-else`用于范围检查，它会更好。此外，仅当范围恒定时，上述方法才有效。

# sql-server - 对一组链值进行分组

> ID：15332329
> 
> 赞同：1
> 
> 时间：2013-03-11T06:19:14.673
> 
> 标签：sql-server, sql-server-2008

我在 SQL Server 2008 中有下表

```
DECLARE @UnitConvert table 
(
  ID int identity(1,1),
  ConvertUnitOne nvarchar(50),
  ConvertUnitTwo nvarchar(50)
) 

INSERT INTO @UnitConvert
SELECT 100,500
UNION ALL SELECT 200,100
UNION ALL SELECT 500,300
UNION ALL SELECT 2000,1000
UNION ALL SELECT 3000,9000
UNION ALL SELECT 2000,700
UNION ALL SELECT 820,3000

SELECT * FROM @UnitConvert 
```

这里 UnitConvertOne 中的值等价于 UnitConvertTwo 所以它有一个价值链

所以我想显示结果

```
Group         unit

1             100

              200

              300

              500

2             700

              1000

              2000

3             820

              3000

              9000 
```

组值将根据可以创建的组数自动增加单位值可以从小到大排序

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T13:01:36.970

感谢 sqlservercentral.com 的 Eugene Elutin

```
DECLARE @UnitConvert table 
(
  ID int identity(1,1),
  ConvertUnitOne nvarchar(50),
  ConvertUnitTwo nvarchar(50)
) 

INSERT INTO @UnitConvert
SELECT 100,500
UNION ALL SELECT 200,100
UNION ALL SELECT 500,300
UNION ALL SELECT 2000,1000
UNION ALL SELECT 3000,9000
UNION ALL SELECT 2000,700
UNION ALL SELECT 820,3000

;WITH cteUP AS
(
 SELECT  ConvertUnitTwo AS childUP, ConvertUnitOne AS unitUP, 0 AS Lvl
 FROM @UnitConvert 
 UNION ALL 
 SELECT cte.childUP, u.ConvertUnitOne AS unitUP, Lvl = Lvl + 1 
 FROM @UnitConvert u
 INNER  JOIN cteUP cte ON cte.unitUP = u.ConvertUnitTwo
)
--select * from cteUP
SELECT   c.ConvertUnit
        ,DENSE_RANK() OVER (ORDER BY ISNULL(cm.unitUP, c.ConvertUnit)) AS GrpNO
FROM   (SELECT ConvertUnitOne AS ConvertUnit FROM @UnitConvert 
        UNION 
        SELECT ConvertUnitTwo AS ConvertUnit FROM @UnitConvert) c
OUTER APPLY (SELECT  TOP 1 unitUP FROM cteUP m WHERE
             m.childUP = c.ConvertUnit ORDER BY Lvl DESC) cm 
```

# jquery - 向上滚动以突出显示验证失败的 div

> ID：15332332
> 
> 赞同：0
> 
> 时间：2013-03-11T06:19:25.090
> 
> 标签：jquery, css, jsp, html, scroll

我有一个表单（jsp 页面）并包含一个 div，其中显示错误消息（如果有）。当用户提交表单时，验证在服务器端完成，并根据任何违规设置错误消息字段，该字段使用 div 内的 struts 属性标记显示在 JSP 中。

现在的问题是，由于我的表单有很多字段，因此提交按钮位于下方，错误 div 位于表单上方，因此如果出现错误，会显示消息，但用户需要向上滚动以查找错误消息. 我需要的是，当错误发生时，页面应该自动向上滚动并且错误应该被突出显示。

如果可能的话，我可以使用任何 jquery 或 css 解决方案。请帮忙。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T06:33:56.023

您可以使用 ScrollTop 功能，滚动到一个 div。

```
$('#btnSubmit').on('click',function(){

 //if is any error found. then do this
    $(window).scrollTop($('#yourErrorDiv').offset().top);
}); 
```

# c++ - 以下代码有什么问题

> ID：15332334
> 
> 赞同：0
> 
> 时间：2013-03-11T06:19:31.837
> 
> 标签：c++

我正在尝试编译以下代码片段。请检查我最后得到的错误。

```
#include "Tree.h"

template <class T>
CNode<T>* CNode<T>::GetChild(const T& kData)
{
    for( std::vector< CNode >::iterator it = m_vChildren.begin(); it!= m_vChildren.end(); ++it)
    {
        if(*it== kData)
        {
           return &(*it);
        }
    }
} 
```

Tree.h（头文件）：

```
#include "../include_m.h"
#include <vector>

template <class T>
class CNode
{
 public:
    CNode(const T& kData)
    {
        m_Data = kData;
    }

    void AddChildNode(const CNode& kcChildNode);
    void DeleteChildNode(const T& kData);
    void GetChildNode(const T& kData) const;
    void Print();

 private:
    T                       m_Data;
    std::vector<CNode>      m_vChildren;

    CNode * GetChild(const T& kData);
}; 
```

这无法编译并出现以下错误：

```
g++ -o tree Tree.cpp 
Tree.cpp: In member function ‘CNode<T>* CNode<T>::GetChild(const T&)’:
Tree.cpp:12: error: expected `;' before ‘it’
Tree.cpp:12: error: ‘it’ was not declared in this scope 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T06:45:43.343

你所缺少的只是一个`typename`before `std::vector< CNode >::iterator`。由于`CNode<T>::GetChild`是模板化上下文，编译器无法知道`std::vector< CNode >::iterator`是类​​型成员还是值成员。例如，您可以将`std::vector<CNode<int> >`where`iterator`定义为类字段的模板特化。您需要使用`typename`关键字来解决这种歧义。

在相关说明中，您需要`template`关键字的情况更加棘手，在这里可能值得一提，请考虑：

```
template <class T>
struct C {
   template <class U>
   void memfunc();
};

template <class T>
void func() {
   C<T> c;
   c.template memfunc<int>();
} 
```

您需要在最后一行出现奇怪的`template`关键字，因为由于与您的问题类似的原因，编译器无法知道该成员实际上是 class 的所有专业化中的模板方法`C`。您收到的错误消息也很奇怪，每次都让我感到困惑。

其他答案也有关于在`.cpp`文件中包含模板定义的相关点。您可能应该听从他们的建议并将定义移动到`.h`文件中。但是，在某些情况下，您需要在`.cpp`文件中定义模板。例如，该方法可能只在同一个`.cpp`文件中使用。或者，您可能想要控制希望使用显式实例化来实例化模板化成员函数的类型。您可以通过以下方式实现：

```
template class CNode<int>; // explicitly instantiate CNode<int> 
template CNode<double>* CNode<double>::GetChild(const double& kData); // explicitly instantiate only the GetChild method for CNode<double> 
```

这样，每当您更改方法的实现时，您就不必重新编译`.cpp`包含的每个文件。`tree.h``GetChild`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T06:45:08.460

1.  您不能将`.cpp`文件与模板类一起使用。一切都必须在`.h`.
2.  您`CNode`在标头中使用对来指示返回类型、放置在`std::vector`s 和参数中的值。这些*都*必须改成`CNode<T>`.

* * *

这是因为`CNode`它本身并不作为一个类存在，而是一个用于在编译时创建的类的*模板。*对于放置在其中的每种类型`<T>`；在编译时创建一个新类。

含义`CNode<X>`与 不同类`CNode<Y>`，并且`CNode`在二进制/可执行文件中根本不存在。

这意味着您*永远不能*引用 CNode 或其成员，而不提供`<T>`.

# ajax - jquery中的ajax调用

> ID：15332335
> 
> 赞同：0
> 
> 时间：2013-03-11T06:19:32.293
> 
> 标签：ajax, jquery

我有一个 ajax 调用，我需要调用它并附加一些特定的参数，以便在 firebug 的 net 部分中有参数字段。

并且参数不是数据而是类型之类的类型，=必须将副本附加到调用

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T06:46:43.987

你想这样使用并传递数据..

```
jQuery.ajax({
          type: "POST",
          url: "example.php",
          data: { identityid:0,userid:"<?php echo $user_id;?>" },
          success: function() {       

                  }
           }); 
```

# android - Android自定义摄像头无法跟随手机默认摄像头视图

> ID：15332337
> 
> 赞同：1
> 
> 时间：2013-03-11T06:19:32.710
> 
> 标签：android, android-layout, android-camera, phonegap-plugins

我读到您需要获取 parameters.getSupportedPreviewSizes() 和 parameters.getSupportedPictureSizes() 所以我这样做了

```
Camera.Parameters pic = mCamera.getParameters();
List<Size> pic2 = pic.getSupportedPictureSizes();

Camera.Parameters p = mCamera.getParameters();
List<Size> previews = p.getSupportedPreviewSizes(); 
Size preview = getOptimalPreviewSize(previews, pic2.get(0).width,pic2.get(0).height); 
```

以此获得最佳预览

```
private Size getOptimalPreviewSize(List<Size> sizes, int w, int h) {
    final double ASPECT_TOLERANCE = 0.05;
    double targetRatio = (double) w / h;
    if (sizes == null) return null;

    Size optimalSize = null;
    double minDiff = Double.MAX_VALUE;

    int targetHeight = h;

    // Try to find an size match aspect ratio and size
    for (Size size : sizes) {
        double ratio = (double) size.width / size.height;
        if (Math.abs(ratio - targetRatio) > ASPECT_TOLERANCE) continue;
        if (Math.abs(size.height - targetHeight) < minDiff) {
            optimalSize = size;
            minDiff = Math.abs(size.height - targetHeight);
        }
    }

    // Cannot find the one match the aspect ratio, ignore the requirement
    if (optimalSize == null) {
        minDiff = Double.MAX_VALUE;
        for (Size size : sizes) {
            if (Math.abs(size.height - targetHeight) < minDiff) {
                optimalSize = size;
                minDiff = Math.abs(size.height - targetHeight);
            }
        }
    }
    return optimalSize;
} 
```

然后

```
mFrameLayout.getLayoutParams().height = preview.height; 
mFrameLayout.getLayoutParams().width = preview.width; 

mCamera.setParameters(parameters);
mCamera.setDisplayOrientation(90);

mFrameLayout.addView(mPreview); 
```

我希望获得与具有类似于 instagram 的自定义视图的相机意图类似的预览，但这显示了一个扁平化为预览的矩形。有没有办法获取默认相机的预览和图片大小并将其设置为自定义相机？

出于某种原因，当我拍照时，左侧和右侧保存的图片中的内容比您在预览布局中看到的内容更多，它看起来像已缩放但检查了缩放并且它为 0。有关如何修复的任何提示这个？

只是另一个问题，您可以在布局上使用相机意图而不是打开默认相机吗？

# vb.net - vfp9 'THIS' 相当于 vb.net

> ID：15332338
> 
> 赞同：0
> 
> 时间：2013-03-11T06:19:36.660
> 
> 标签：vb.net, visual-foxpro

在 VFP9 中有一个对象引用`THIS`，它在事件代码或类定义中提供对当前对象的引用。在 vb.net 中有，`ME`但正如我所观察到的，它指的是实际形式而不是对象本身。

button1 点击的 VFP 代码：

```
this.caption = "CLICKED" <<OR>> thisform.button1.caption = "CLICKED" 
```

VB代码

```
-----------------------  <<OR>> Me.button1.text="CLICKED" 
```

我想知道 vb.net 中等效的虚线，对当前对象的引用。我们有一个 VFP9 系统，我正在尝试将其转换为 vb.net。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T15:39:21.207

VFP 基于控件的嵌套对象引用工作，“this”允许相对引用的能力。如果您想长期处理 VFP 等效项，则类似于

```
Thisform.button1.Caption = "CLICKED" 
```

现在，也就是说，您可能会在转换的下游遇到其他控件，看起来像...

this.Parent.otherControl.something...

“.Parent”只是指当前对象的父控件。所以，假设你有一个带有页框的表单......在那上面有 3 页。在第 1 页上有一个容器。该容器有一个文本框和一个按钮。

在单击按钮时，您希望在文本框控件中显示值的消息。该按钮可能有类似的东西

```
Messagebox( This.Parent.TheTextBoxControl.Text ) 
```

您不必知道容器在表单中的埋藏深度，您只需知道文本框通过同一个父控件相对于按钮。

# jquery - 使用 jquery 在 span 中更改图像 src

> ID：15332339
> 
> 赞同：2
> 
> 时间：2013-03-11T06:19:39.560
> 
> 标签：jquery

我有 5 个跨度元素和 5 个图像。

```
 <div id="myDiv">
    <span class="fwheeler"><img src="car1.jpg"/></span>
    <span class="fwheeler"><img src="car1.jpg"/></span>
    <span class="fwheeler"><img src="car1.jpg"/></span>
    <span class="fwheeler"><img src="car1.jpg"/></span>
    <span class="fwheeler"><img src="car1.jpg"/></span>
    </div> 
```

我有一个这样的按钮

```
<button type="button" id="park1">Park</button> 
```

如果我点击按钮 span:img 的 src 应该改变。为此我正在使用

```
$("img").attr('src', '\car.jpg'); 
```

这是替换所有图像 src。但我的要求是，如果我第一次点击按钮，只有第一个跨度的图像 src 应该改变。如果我点击第二次，第一次和第二次都应该改变等等..

我怎样才能做到这一点。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-11T06:24:44.373

将单击的值计入全局变量.....使用 eq() 更改 src 属性.. 试试这个

```
var clickCount=0;
$('#park1').click(function(){  
     if(clickcount < $('#myDiv span').length){  //check the length of span if clickCount is greater make it 0.... so that you get the same effect after 6th click
      $("img").eq(clickCount).attr('src', '\car.jpg'); 
      clickCount++;
     }else{
        clickCount=0;
     }
}); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-11T06:23:24.083

然后放置一个不计算点击次数的全局变量。

然后使用

```
 <button type="button" id="park1">Park</button>

    <script>
    var count = 0;
     $('#park1').click(function(){
       if(count< $('#myDiv span').length){        
       $("img").eq(count).attr('src', '\car.jpg'); 
      count++;
     }else{
        count=0;
     }
 });    
</script> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-11T06:26:11.817

试试下面的东西。

```
<script type="text/javascript">
    var clickCounter = 0;
    $(function()
    {
        $('#park1').on('click',function()
        {

            if(clickCounter >= $('#myDiv span').length)
            {
                clickCounter = 0;
            }
            else
            {
                clickCounter++;
            }
            $("img").eq(clickCounter).attr('src', '\car.jpg');
        });

    });
</script>
<div id="myDiv">
    <span class="fwheeler"><img src="car1.jpg"/></span>
    <span class="fwheeler"><img src="car1.jpg"/></span>
    <span class="fwheeler"><img src="car1.jpg"/></span>
    <span class="fwheeler"><img src="car1.jpg"/></span>
    <span class="fwheeler"><img src="car1.jpg"/></span>
</div>

<button type="button" id="park1">Park</button> 
```

我所做的用于`.on()`允许在动态加载时添加事件`DOM`。

我声明`clickCounter`为`global`变量，因此第二个和第三个等`click`事件可以使用其先前的值。

并计算是否`clickCounter`可用DOM 图像`equal`，`greater`然后将其设置为 0。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-11T06:30:43.997

试试这个：

```
$('#park1').click(function () {
    $('img[src$="car.jpg"]').first().attr('src', '\car.jpg');
}); 
```

### [检查这个小提琴](http://jsfiddle.net/DxkcQ/)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-11T06:40:36.700

这应该有效：

```
var clickCount=0;

(function() {

$("park1").click(function() {
$("myDiv").find("img").eq(clickCount).attr('src','/car.jpg');
clickCount++;    
});

}); 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-03-11T06:43:36.567

**CSS**

```
.NewImage
{
content:url("\car.jpg");
} 
```

**代码**

```
 $(span).each(function(){

    if ($(this img).hasClass('NewImage') == false)
       {
         $(this img).addclass('NewImage')
         return false;
       }

    }); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-03-11T06:25:38.027

如果您使用 jquery 使用 first();

# javascript - 使用 drupal add js 调用函数

> ID：15332348
> 
> 赞同：0
> 
> 时间：2013-03-11T06:20:24.130
> 
> 标签：javascript, jquery, drupal-7

我正在调试一个drupal模块，第二行drupal_add_js调用uc_discounts.js中的一个js函数

```
drupal_add_js(drupal_get_path('module', 'uc_discounts') . '/uc_discounts.js');
drupal_add_js('(function($){jQuery(document).ready(function () { uc_discountsOnLoad(e); })})(jQuery);', array('type' => 'inline', 'group' => JS_DEFAULT, 'scope' => 'footer')); 
```

firebug 中有一条错误消息，ReferenceError: uc_discountsOnLoad is not defined，任何人都可以找出问题所在？

** 更新 **

我知道问题所在！

如果在外部定义 uc_discountsOnLoad (function ($) {})(jQuery); 可以调用~但是不能使用jquery符号，是冲突！但在这种情况下，我该如何调用这个函数？

```
function uc_discountsOnLoad(e) {

  context = $('body');
  uc_discountsProcessCodes(context, e);

  //Add click event listener to discounts pane button once
  $("input[id*=uc-discounts-button]:not(.uc_discountsOnLoad-processed)", 
    context).addClass("uc_discountsOnLoad-processed").click(function(e) {
      uc_discountsProcessCodes(context, e);
      //Return false to prevent default actions and propogation
      return false;
    });
} 
```

如果在 (function ($) {})(jQuery); 之外定义 uc_discountsOnLoad(e)，$('body') 会出错！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T14:39:49.317

`uc_discountsOnLoad(e)`找不到该函数。

*   检查`uc_discounts.js`该函数是否确实存在。

*   `uc_discounts.js`调用函数后加载？（检查您的页面来源）

# vb.net - 异常 System.Reflection.TargetInvocationException 错误

> ID：15332351
> 
> 赞同：0
> 
> 时间：2013-03-11T06:20:41.873
> 
> 标签：vb.net, mscorlib, targetinvocationexception

我正在尝试运行较旧的 vb.net 代码，但它因此错误而中断（异常 System.Reflection.TargetInvocationException）。这是跟踪日志：

```
 Source="mscorlib"   StackTrace:
   à System.RuntimeMethodHandle._SerializationInvoke(Object target, SignatureStruct& declaringTypeSig, SerializationInfo info, StreamingContext context)
   à System.Runtime.Serialization.ObjectManager.CompleteISerializableObject(Object obj, SerializationInfo info, StreamingContext context)
   à System.Runtime.Serialization.ObjectManager.FixupSpecialObject(ObjectHolder holder)
   à System.Runtime.Serialization.ObjectManager.DoFixups()
   à System.Runtime.Serialization.Formatters.Binary.ObjectReader.Deserialize(HeaderHandler handler, __BinaryParser serParser, Boolean fCheck, Boolean isCrossAppDomain, IMethodCallMessage methodCallMessage)
   à System.Runtime.Serialization.Formatters.Binary.BinaryFormatter.Deserialize(Stream serializationStream, HeaderHandler handler, Boolean fCheck, Boolean isCrossAppDomain, IMethodCallMessage methodCallMessage)
   à System.Resources.ResourceReader.DeserializeObject(Int32 typeIndex)
   à System.Resources.ResourceReader.LoadObjectV2(Int32 pos, ResourceTypeCode& typeCode)
   à System.Resources.RuntimeResourceSet.GetObject(String key, Boolean ignoreCase, Boolean isString)
   à System.Resources.ResourceManager.GetObject(String name, CultureInfo culture, Boolean wrapUnmanagedMemStream)
   à JMF.MDIContainer.InitializeComponent() dans C:\JMF\SOURCES\JMF\Menu.vb:ligne 160
   à JMF.MDIContainer..ctor() dans C:\JMF\SOURCES\JMF\Menu.vb:ligne 73
   à JMF.MDIContainer.Main() dans C:\JMF\SOURCES\JMF\Menu.vb:ligne 187
   à System.AppDomain._nExecuteAssembly(Assembly assembly, String[] args)
   à Microsoft.VisualStudio.HostingProcess.HostProc.RunUsersAssembly()
   à System.Threading.ExecutionContext.Run(ExecutionContext executionContext, ContextCallback callback, Object state)
   à System.Threading.ThreadHelper.ThreadStart() 
```

第 160 行执行此任务 Me.ImageList1.ImageStream = CType(resources.GetObject("ImageList1.ImageStream"), System.Windows.Forms.ImageListStreamer)

我认为错误是由于这条线引起的，当我评论它时，一切运行良好。我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T06:28:38.557

这是导致问题的语句中的表达式

```
resources.GetObject("ImageList1.ImageStream") 
```

根据堆栈跟踪，`ImageList1.ImageStream`资源似乎有问题。它存在，但反序列化代码无法正确处理它。

如果没有看到实际资源，很难说问题是什么。我的第一步是简单地在 Visual Studio 中加载资源并查看它是否已损坏。如果不尝试用库存图像列表替换它，看看问题是否消失（表示资源错误）

# android - Android sqlite 不支持联合多表查询

> ID：15332352
> 
> 赞同：0
> 
> 时间：2013-03-11T06:20:42.933
> 
> 标签：android, sqlite

通过检查的数据`String sql = "select * from disease order by id"`可以显示在列表视图中。

但`String sql = "SELECT disease.id id, disease.DiseaseName_CN DiseaseName_CN,chufang.xuewei_cn xuewei_cn" + " FROM disease,chufang where chufang.diseaseid=disease.id order by id";`查不到数据。它可以在firefox和ADB中执行。但它不能显示在模拟器中由后面的行检查的数据。

为什么会这样？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-03-11T06:33:47.163

SQLite 不支持的一些 SQL 标准特性包括：右外连接、全外连接、外键约束、嵌套事务和某些形式的 ALTER 语句

# objective-c - 捕获复制和粘贴密钥

> ID：15332354
> 
> 赞同：0
> 
> 时间：2013-03-11T06:20:58.217
> 
> 标签：objective-c, cocoa

我正在 Cocoa 中开发 OpenGL 游戏，并且需要在用户尝试复制或粘贴时捕获（通过 command+c 或 command+v）。

到目前为止，我有一个`NSView<NSTextInputClient>`作为我的`NSWindow`. 它成功地允许在我的游戏中输入非 ASCII 字符（例如中文维基百科），但我在尝试捕获复制和粘贴时迷失了方向。

我想我可能能够使用`flagsChanged`combine获得一个可行的解决方案`keyDown`，但这感觉就像一个 hack，我敢肯定有人知道更好的解决方案。:)

**编辑**：为清楚起见，我主要寻找预定义的复制事件或键码​​的存在。基本原理是，如果我手动将 Copy 定义为“Command+C”，那么如果用户重新映射了他/她的键或正在使用某些辅助工具，这可能会中断。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T06:51:10.713

您可以使用`NSEvent`类方法：`+ (id)addGlobalMonitorForEventsMatchingMask:(NSEventMask)mask handler:(void (^)(NSEvent*))block`

或者你可以实施`- (void)keyDown:(NSEvent *)theEvent`

```
- (void)keyDown:(NSEvent *)theEvent {

    if ([theEvent modifierFlags] & NSCommandKeyMask) {
        NSString *character = [theEvent charactersIgnoringModifiers];
        if ([character isEqualToString:@"c"]) {
            NSLog(@"Capture Copy&Paste Key");
        }
    }
    [super keyDown:theEvent];
} 
```

# video-streaming - 如何在 windows phone 中播放 HLS（不是 SmoothStreaming）？

> ID：15332355
> 
> 赞同：2
> 
> 时间：2013-03-11T06:20:58.190
> 
> 标签：video-streaming, windows-phone, http-live-streaming

我需要在 Windows Phone（无米特版本）中播放 HLS 视频流。那么，我该怎么做呢？也许有任何第三方解决方案？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T00:54:23.890

适用于 Windows 8 和 Windows Phone 8的[3ivx HLS 适配器](http://www.3ivx.com/technology/windows/metro/http_live_streaming.html)允许编写可以使用 HTTP 实时流的应用程序

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-22T17:17:58.660

你也可以试试[http://phonesm.codeplex.com/](http://phonesm.codeplex.com/)

它应该允许播放 m3u8 hls 流（包括流 NASA TV 的直播 .m3u8 提要的示例）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-11T09:37:32.383

Windows Phone 不包括对 HLS 的本机支持。（嗯，这是苹果的技术）

我确实知道市场/商店中有允许流式传输某些 HLS 内容的应用程序，但我知道没有可用的第 3 方解决方案。

# paypal-subscriptions - Paypal 定期付款问题

> ID：15332358
> 
> 赞同：0
> 
> 时间：2013-03-11T06:21:00.453
> 
> 标签：paypal-subscriptions

我的应用程序允许订阅服务，我为此使用贝宝的定期付款。根据那里的手册，我使用的顺序是 SetExperssCheckOut-->GetExppressCheckOut-->DoExpressCheckOut->CreateRecurringPayment Profile。

在 DoExpressCheckOut 事件本身上，我进行了第一笔付款，然后在创建定期付款资料时进行下一笔付款，即如果我有每日订阅，则在第 3 天结束时，没有付款 = 4（来自定期付款的 3付款和 1 从获得快速结帐）。我只想在第 3 天结束时支付 3 笔款项。我使用的代码是：

```
 GetExpressCheckout getExpressCheckout = new GetExpressCheckout();
        GetExpressCheckoutDetailsResponseType getExpressCheckoutResponse = getExpressCheckout.ECGetExpressCheckoutCode(token);

        if (getExpressCheckoutResponse.Ack == AckCodeType.Success)
        {
            ExpressCheckout expressCheckout = new ExpressCheckout();
            DoExpressCheckoutPaymentResponseType doExpressCheckoutResponse = expressCheckout.DoExpressCheckoutPayment
                                                        (
                                                            token,
                                                            getExpressCheckoutResponse.GetExpressCheckoutDetailsResponseDetails.PayerInfo.PayerID,
                                                            PayPalSettings.OrderAmount,
                                                            PaymentActionCodeType.Sale,
                                                            CurrencyCodeType.USD
                                                        );

            if (doExpressCheckoutResponse.Ack == AckCodeType.Success)
            {
                //create Recurring Payment Profile
                CreateRecurringPaymentsProfile createRecurringPaymentsProfile = new CreateRecurringPaymentsProfile();
                CreateRecurringPaymentsProfileResponseType recurringPaymentProfileResponse = createRecurringPaymentsProfile.CreateRecurringPaymentsProfileCode(
                                                                                                doExpressCheckoutResponse.DoExpressCheckoutPaymentResponseDetails.Token,
                                                                                                doExpressCheckoutResponse.Timestamp,
                                                                                                PayPalSettings.OrderAmount,
                                                                                                1,
                                                                                                BillingPeriodType.Day,//BillingPeriodType.Month
                                                                                                CurrencyCodeType.USD
                                                                                                );
                if (recurringPaymentProfileResponse.Ack == AckCodeType.Success)
                {
//Do something
} 
```

如何在定期付款部分下进行所有付款？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T14:33:32.030

使用定期付款时，不需要调用 DoExpressCheckoutPayment API。当客户被重定向到 PayPal 进行身份验证时，他们会提交对预定付款的同意。

尝试跳过 DoExpressCheckoutPayment API 调用，这应该会处理额外的付款。

如果您遇到任何问题，请告诉我。

# android - 用于在地图上显示地址的纬度和经度

> ID：15332359
> 
> 赞同：-2
> 
> 时间：2013-03-11T06:21:04.240
> 
> 标签：android

在谷歌地图中，​​我可以得到我触摸过的点的纬度和经度。现在我怎样才能得到纬度和经度的地址（反向地理编码）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T06:24:53.190

```
List<Address> addresses = null;
try {
            Locale mLocale = new Locale("en");
            Geocoder gCoder = new Geocoder(context , mLocale);
            addresses = gCoder.getFromLocation(lat, lng, 1);
            Address addr = addresses.get(0);
            ...
            ...
            ..
        } catch (Exception e) {

        } 
```

[地理编码器](http://developer.android.com/reference/android/location/Geocoder.html)

# sql-server - 用于高级搜索的 MS SQL 查询

> ID：15332362
> 
> 赞同：0
> 
> 时间：2013-03-11T06:21:23.897
> 
> 标签：sql-server, sql-server-2008, tsql

我需要为高级搜索编写一个 ms sql 查询，该查询基于不同的过滤器，如标题、描述、类别、作者、语言和日期

我需要将此查询作为存储过程，但我不确定如果 CatID = 0、WriterID = 0 等，我如何构建查询。我可以使用 & 传递整个查询在 c# (ASP.Net) 中轻松构建此查询`IF Statement`，但我不确定如何将其构建为 T-SQL 或存储过程

```
DECLARE @keyword nvarchar(300)
DECLARE @CatID int
DECLARE @WritterID int
DECLARE @IssueID int
DECLARE @sDate date
DECLARE @eDate date
DECLARE @LangID int
    SET @keyword = 'xyz';
    SET @CatID = 1;
    SET @WritterID = 1;
    SET @IssueID = 1;
    SET @sDate = '1/01/2012';
    SET @eDate = '1/01/2013';
    SET @LangID = 1

SELECT ArticleID,ArticleTitle,ArticleCategoryID,ArticleAuthorID,IssueID,ArticlePublishDate FROM art_Articles
    WHERE  ArticleTitle LIKE '%'+ @keyword +'%' 
    OR   ArticleDesc LIKE '%'+ @keyword +'%' 
```

**C# 中的代码示例**

```
 strSql = "SELECT ArticleID, ArticleTitle, ArticleDesc, ArticlePublishDate FROM art_Articles WHERE ";
    strSql += "( (ArticleVisible = 1 AND ArticleActive =1 AND LanguageID =" + LangID + " ))";
        if (CatID > 0)
        { strSql += " AND  ArticleCategoryID ="+ CatID; }
        if (WriterID > 0)
        { strSql += " AND  ArticleAuthorID ="+ WriterID; } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T11:13:48.330

您可以像在 C# 代码中一样在 SqlServer 中构建 SQL。

声明一个文本变量并使用它来连接你想要的 SQL。

这称为动态 SQL。

然后，您可以使用“EXEC”命令执行此代码

例子：

```
 DECLARE @SQL VARCHAR(100)
DECLARE @LangID VARCHAR(20)
DECLARE @CatID VARCHAR(20)
DECLARE @WriterID VARCHAR(20)

SET @SQL = 'SELECT ArticleID, ArticleTitle, ArticleDesc, ArticlePublishDate FROM art_Articles WHERE '

SET @SQL = @SQL + '( (ArticleVisible = 1 AND ArticleActive =1 AND LanguageID =' + @LangID

IF (@CatID > 0)
    SET @SQL = @SQL + ' AND  ArticleCategoryID =' + @CatID

IF (@WriterID > 0)
    SET @SQL = @SQL + ' AND  ArticleAuthorID ='+ @WriterID

EXEC (@SQL) 
```

但是，使用此方法时您真正应该注意的是称为“SQL 注入”的安全问题。

你可以在这里阅读：http: [//msdn.microsoft.com/en-gb/library/ms161953 (v=sql.105).aspx](http://msdn.microsoft.com/en-gb/library/ms161953(v=sql.105).aspx)

防止 SQL 注入的一种方法是在将变量传递给 SQL-Server 之前在 C# 代码中对其进行验证。

另一种方法（或者可能最好在推测中使用）不是使用“EXEC”命令，而是使用一个名为“sp_executesql”的内置存储过程。

可在此处找到详细信息：http: [//msdn.microsoft.com/en-gb/library/ms188001.aspx](http://msdn.microsoft.com/en-gb/library/ms188001.aspx) 此处详细说明了如何使用：http: [//msdn.microsoft.com/en-gb/library /ms175170(v=sql.105).aspx](http://msdn.microsoft.com/en-gb/library/ms175170(v=sql.105).aspx)

您必须稍微不同地构建 SQL 并将参数传递给存储过程以及 @SQL。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T07:57:14.060

我在 codeproject.com 上为存储过程中的动态 sql 查询找到了很好的解决方案

[http://www.codeproject.com/Articles/20815/Building-Dynamic-SQL-In-a-Stored-Procedure](http://www.codeproject.com/Articles/20815/Building-Dynamic-SQL-In-a-Stored-Procedure)

# javascript - 未使用嵌套函数和 Javascript 中的 getJSON 更新变量

> ID：15332365
> 
> 赞同：0
> 
> 时间：2013-03-11T06:21:30.423
> 
> 标签：javascript, ajax, jquery, getjson

我想创建一个简单的函数来读取一些 json，进行一些简单的处理，然后返回一个数组作为结果。

我目前有下面的代码。但是，该函数始终返回 []。

如果我将 temps 移动到全局范围，它首先返回 []，然后第二次调用它的数据被添加，第三次调用它的长度增加一倍，等等。

```
function getTempData() {
    var temps = [];
    $.getJSON('temp.json', function(data) {
    data = data.observations.data;

    for(var i = 0; i < data.length; i++) {
        year    = parseInt(data[i].aifstime_utc.substr(0, 4));
        month   = parseInt(data[i].aifstime_utc.substr(4, 2));
        day     = parseInt(data[i].aifstime_utc.substr(6, 2));
        hour    = parseInt(data[i].aifstime_utc.substr(8, 2));
        min     = parseInt(data[i].aifstime_utc.substr(10, 4));
        time = Date.UTC(year, month, day, hour, min);

        temps.push([time, data[i].air_temp]);
    }
});
return temps;
} 
```

看看其他一些问题，似乎这可能与异步有关？有没有办法让它同步加载，我想在高图中绘制数据。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T06:38:15.063

dakait 几乎就在那里，因为 ajax 调用的异步性质，您的函数在调用处理数据的函数之前返回。考虑以下示例：

```
function test(){
  var done=false;
  setTimeout(function(){
    done=true;
  },500);
  return done;
};
alert(test());//will say false 
```

在您的代码中，您需要 3 个函数：1）调用 getTempData 2）从服务器获取数据 3）处理数据

```
function getTempData() {
    var temps = [];
// 2) fetch the data
    $.getJSON('temp.json', 
    function(data) {
// 3) process the data
    data = data.observations.data;

    for(var i = 0; i < data.length; i++) {
        year    = parseInt(data[i].aifstime_utc.substr(0, 4));
        month   = parseInt(data[i].aifstime_utc.substr(4, 2));
        day     = parseInt(data[i].aifstime_utc.substr(6, 2));
        hour    = parseInt(data[i].aifstime_utc.substr(8, 2));
        min     = parseInt(data[i].aifstime_utc.substr(10, 4));
        time = Date.UTC(year, month, day, hour, min);

        temps.push([time, data[i].air_temp]);
    }
    processTempData(temps);
});
//return temps;//this line executed immediately after $.getJSON is called
// but before function 2) has been called
}

1)
function callgetTempData(){
//...
  getTempData();
  // no use processing anything here since the ajax call is not finished yet
  // asynchronous means that js will not wait until it's done.
  // I would not advice using synchronous
}
2) // further process data
function processTempData(theData){
// do something with the data here
} 
```

在包含大量 ajax 调用的应用程序中，您可能会考虑使用中介者模式：

[用于不同进程使用的多个 xmlhttprequest 的良好模式](https://stackoverflow.com/questions/14440809/good-pattern-to-use-for-multiple-xmlhttprequests-used-by-different-processes)

# iphone - 以编程方式列出 iPhone 上所有已安装的应用程序？

> ID：15332369
> 
> 赞同：2
> 
> 时间：2013-03-11T06:21:55.727
> 
> 标签：iphone, ios, jailbreak

我需要在编码的帮助下列出 iPhone 上所有已安装的应用程序。我正在使用越狱的 iPhone。我使用了 ihasapp API，但它没有显示所有已安装应用程序的完整列表。请帮我写代码。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2016-07-13T07:22:45.787

我得到了我的 iPhone 中所有已安装应用程序的列表。它使用私有框架，但它不是越狱设备。查看下面的代码。

```
#include <objc/runtime.h>

    Class LSApplicationWorkspace_class = objc_getClass("LSApplicationWorkspace");
    SEL selector=NSSelectorFromString(@"defaultWorkspace");
    NSObject* workspace = [LSApplicationWorkspace_class performSelector:selector];

    SEL selectorALL = NSSelectorFromString(@"allApplications");
    NSLog(@"apps: %@", [workspace performSelector:selectorALL]); 
```

我已经尝试过这段代码，它在 iOS9 上运行良好。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-11T15:14:56.630

有一个私有 API SBSCopyApplicationDisplayIdentifiers

它的签名如下

CFArrayRef SBSCopyApplicationDisplayIdentifiers(bool onlyActive, bool debuggable);

如果您链接到 SpringboardServices 框架并使用它，它将返回已安装应用程序的列表。

**更新 1**

[这是从此处](https://github.com/comex/sbsutils/blob/master/sbbundleids.c)复制的用法示例

```
CFArrayRef SBSCopyApplicationDisplayIdentifiers(bool onlyActive, bool debuggable);

int main() {
    char buf[1024];
    CFArrayRef ary = SBSCopyApplicationDisplayIdentifiers(false, false);
    for(CFIndex i = 0; i < CFArrayGetCount(ary); i++) {
        CFStringGetCString(CFArrayGetValueAtIndex(ary, i),buf, sizeof(buf), kCFStringEncodingUTF8);
        printf("%s\n", buf);
    }
    return 0;
} 
```

不要忘记链接到 pravite 框架 SpringboardServices。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-11T16:27:44.087

我自己使用 AppList 库来获取所有已安装应用程序的列表。它使用私有框架，因此它也只能越狱。[在https://github.com/rpetrich/AppList](https://github.com/rpetrich/AppList)查看。

更新：@Nate 关于这个已经被问和回答是正确的。查看：[获取所有已安装应用程序的列表](https://stackoverflow.com/q/7226406/381233)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-02-27T11:23:08.930

我搜索了很多以获取 iOS 11 上已安装的应用程序列表。但是有代码可以检查当前安装在此设备上的应用程序。

```
//If the device is iOS11
if ([[UIDevice currentDevice].systemVersion floatValue] >= 11.0) {
    NSBundle *container = [NSBundle bundleWithPath:@"/System/Library/PrivateFrameworks/MobileContainerManager.framework"];
    if ([container load]) {
        Class appContainer = NSClassFromString(@"MCMAppContainer");

        id test = [appContainer performSelector:@selector(containerWithIdentifier:error:) withObject:bundleId withObject:nil];
        NSLog(@"%@",test);
        if (test) {
            return YES;
        } else {
            return NO;
        }
    }
    return NO;

} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-06-16T08:38:43.840

尝试这个。

```
NSArray *appList = [[NSFileManager defaultManager] contentsOfDirectoryAtPath:@"/Applications" error:nil];
NSLog(@"%@",appList); 
```

# android - 从 Android 相机捕获单个图像的快速方法

> ID：15332371
> 
> 赞同：0
> 
> 时间：2013-03-11T06:22:02.210
> 
> 标签：android, camera, image-capture

由于我找不到任何有用的文档来说明如何从相机中获取单帧/图像，我在这里问它，可能有人提示从哪里开始。

我想快速使用相机中的单个图像。意味着我想检索单个图像，然后对其进行一些内部处理（可能需要一些时间）并在处理完成后立即检索下一张图像。

我发现了一些示例/文档，这些示例/文档描述了通过使用外部应用程序的 Intent 检索单个图像 - 但这对我来说似乎太慢了。除此之外，其中一些示例将图像存储在必须加载它的磁盘上 - 这也很慢。

那么如何从我自己的应用程序中捕获单个帧，以便使用可用于进一步图像处理的格式将图像返回到内存中？我在 stackoverflow.com 和其他页面上找到的示例使用了相机应用程序——这不是我想要的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T06:29:20.677

您应该使用[Camera](http://developer.android.com/reference/android/hardware/Camera.html)类并调用[takePicture](http://developer.android.com/reference/android/hardware/Camera.html#takePicture%28android.hardware.Camera.ShutterCallback,%20android.hardware.Camera.PictureCallback,%20android.hardware.Camera.PictureCallback,%20android.hardware.Camera.PictureCallback%29)。然后，您只需为[PictureCallback](http://developer.android.com/reference/android/hardware/Camera.PictureCallback.html) .onPictureTaken 注册一个处理程序。

# sencha-touch-2 - 使用 sencha touch2 在地图上的当前位置显示标记

> ID：15332372
> 
> 赞同：1
> 
> 时间：2013-03-11T06:22:04.923
> 
> 标签：sencha-touch-2

我能够在屏幕上显示地图并获取当前的纬度和经度位置。但是我想在这些纬度和经度值的位置显示一个标记。我尝试在渲染地图时添加一个侦听器。下面是代码。但是屏幕上没有出现任何标记。关于如何让标记显示在当前位置的任何指示都会非常有帮助。

```
<script src="http://maps.googleapis.com/maps/api/js?sensor=true"></script>
<link href="touch/resources/css/sencha-touch.css" rel="stylesheet" type="text/css" /> 

<script type="text/javascript"> 
```

Ext.application({ name: 'MapApp',

```
launch: function() {
var lat,lng;

//get latitude and longititude values

Ext.device.Geolocation.getCurrentPosition({
success: function(position) {
    lat = position.coords.latitude;

    lng = position.coords.longitude;
    alert(lat);
    alert(lng);
     Ext.Viewport.add( {
        xtype:'map',
        useCurrentLocation:true,
        fullscreen: true,
        layout:'fit',
        listeners : {
        maprender : function() {
            alert('map rendered');
            var marker = new google.maps.Marker({
            position: new google.maps.LatLng(lat,lng),
            title : 'testing',

            });
        }
    }

    });
},
failure: function() {
    alert('something went wrong!');
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T09:15:25.913

```
maprender : function(map, gmap, options) {
            alert('map rendered');
            var marker = new google.maps.Marker({
                position: new google.maps.LatLng(lat,lng),
                title : 'testing',
                map: //gmap or map, try both one of them will work
            });
            } 
```

此映射键很重要，您还需要确保在数组中保存标记以供将来使用

# networking - speex 编解码器 - 每秒数据包

> ID：15332373
> 
> 赞同：0
> 
> 时间：2013-03-11T06:22:09.150
> 
> 标签：networking, voip, codec

如果我们使用每秒多少个数据包

> Speex 编解码器 - 16kHz - H.323,SIP

在 Ekiga 软电话中？以及如何计算？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T06:51:26.487

在 Speex 中，[帧大小始终为 20ms](http://lists.xiph.org/pipermail/speex-dev/2005-September/003694.html)，因此为了最大限度地减少延迟，它应该/将始终每秒生成 50 个数据包。只有数据包大小会有所不同。

编解码器本身并不禁止在一个数据包中合并多个帧，但这会大大增加延迟，对于软电话来说可能不是一件好事。

[Speex RTP 配置文件文档](https://datatracker.ietf.org/doc/html/draft-herlein-speex-rtp-profile-02)中还提供了您需要的所有详细信息以及更多信息。

# php - codeigniter：控制器功能，用于加载视图和处理提交的数据

> ID：15332374
> 
> 赞同：1
> 
> 时间：2013-03-11T06:22:09.783
> 
> 标签：php, codeigniter

即使在多次访问文档后，我在理解控制器的使用方面也存在差距。我有以下内容：

```
class Membership extends CI_Controller 
{

    /*Load the login view first assuming user is member*/
    public function index()
    {
        $this->load->view('login');
    }

    /*if not member, load register view*/
    public function register()
    {
        $this->load->view('register');
    }

    /*view to recover user credentials*/
    public function recover()
    {
        $this->load->view('recover');
    }

    public function enroll_user()
    {
        /*Retrieve post parameters*/
        $fullname = $this->input->post('fullname');
        $email = $this->input->post('email');
        $mobile = $this->input->post('mobile');
        $home = $this->input->post('home');
        $username = $this->input->post('username');
        $password = $this->input->post('password');
        $confirmPassword = $this->input->post('cpassword');
    }

} 
```

现在示例当用户单击主页上的立即注册链接时， register() 函数应该加载视图。但是在他填写完表格并提交之后，我应该提交到哪个函数呢？这是否意味着我必须为每个功能创建两个函数，一个用于加载视图（register.php），第二个用于处理该函数的操作（enroll_user）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-11T06:46:10.983

你可以一口气做到这一点

```
public function register()
{
    $post = $this->input->post();
    if($post){
        // do other stuff here
        // you can load view here too if validation fails
    }else{
        $this->load->view('register');
    }
} 
```

在你的表格中使用这个

```
echo form_open(current_url()); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T06:37:01.370

在您的 register.php 中，将表单的操作放到 memebership/enroll_user 中，这样当用户提交注册表单时，该操作将提交到enroll_user 函数，它会处理注册等。

您需要两个功能，一个用于显示注册表单，另一个用于处理提交的数据。您可以使用一个控制器来执行此操作，但最好在两个控制器中执行此操作，因为稍后您可以更轻松地找出哪个功能正在做什么。

# .net - 子类型字段编号顺序依赖于 protobuf-net

> ID：15332380
> 
> 赞同：3
> 
> 时间：2013-03-11T06:22:30.150
> 
> 标签：.net, serialization, protobuf-net

我可以看到 protobuf-net 似乎需要对运行类型模型进行确定性排序。什么是一个很好的策略来使用而不需要在每个类上都有属性来进行排序。

如果您是通过属性实现的，protobuf 它自己会如何做？

```
model.Add(typeof(IMessage), false).AddSubType(8500, typeof(DogBarkedEvent));
model.Add(typeof(IMessage), false).AddSubType(8501, typeof(DogBarkedEvent2)); 
```

如果我创建一个新模型并尝试反序列化

```
model2.Add(typeof(IMessage), false).AddSubType(8655, typeof(DogBarkedEvent));
model2.Add(typeof(IMessage), false).AddSubType(5300, typeof(DogBarkedEvent2)); 
```

它肯定会失败。

我不知道运行时会有多少子类型，这就是为什么我担心下次启动应用程序时顺序可能会改变。

我已经阅读了这篇之前的帖子[protobuf-net v2 type meta](https://stackoverflow.com/questions/6702172/protobuf-net-v2-type-meta)，但它并没有说明如何生成有关 UniqueIdentifier 的好方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T08:07:51.710

它不依赖于*订单*- 它依赖于*价值*。protobuf（意思是：google定义的规范；不是专门的protobuf-net）*非常简洁*。你得到的只是数字标识符，告诉你你将要得到什么。

如果我们首先考虑属性/字段（`.Name`,`.DateOfBirth`等） - 那么这就是它在（例如）`17`线路上的键和`.Name`属性之间映射的方式。显然，如果你在`Name`<===>的时候存储数据`17`，然后改变主意，在`Name`<===>`22`和`ShoeSize`<===>的时候读回来`17`，那么**就会有很大的问题**。字段编号映射是合同的重要组成部分；如果您需要读取旧数据，则不应更改字段编号映射（嗯，有一些有限的方法可以解决它，涉及自定义模型和一些技巧......但没有什么好玩的）。

现在; 让我们考虑继承。protobuf*没有定义继承*；以任何方式。为了您的方便，protobuf-net 提供了一种使继承工作的机制，通过将继承建模为子对象的封装。这意味着映射`DogBarkedEvent`<===>与我们后面的/示例`8500`根本没有区别。如果我们改变主意并使用不同的字段编号，*它将失败*。`Name``ShoeSize`

 *所以是的，您需要一种强大的可重复方式来`DogBarkedEvent` ***每次***生成相同的密钥，而不管添加/删除/重命名了多少其他子类。最*简单*的方法是使用 , 等属性`[ProtoInclude(...)]`，因为它在代码中是固定的和静态的。如果这不是可取的，那么建议使用某种地图的外部存储；一个平面文本文件就可以了——只需解析它并应用；IE

```
My.NameSpace.DogBarkedEvent=8500
My.NameSpace.DogBarkedEvent2=8501 
```

这还取决于您为什么不想使用`[ProtoInclude(...)]`; 如果这是因为生成了您的代码文件，请考虑`partial`类：

```
namespace My.NameSpace
{    
    [ProtoInclude(8500, typeof(DogBarkedEvent))]
    [ProtoInclude(8501, typeof(DogBarkedEvent2))]
    partial class MyParentType {}
} 
```

如果问题是您不想在代码中使用特定于库的类型；然后可能声明您自己的属性并在配置模型时阅读它；例如：

```
[SubtypeKey(8500, typeof(DogBarkedEvent))]
[SubtypeKey(8501, typeof(DogBarkedEvent2))] 
```

（并使用 获取`Attribute.GetCustomAttribute`）*

# c - linux/list.h - 如何安全地从列表中删除项目？

> ID：15332381
> 
> 赞同：8
> 
> 时间：2013-03-11T06:22:37.783
> 
> 标签：c, list, linux-kernel

在评论中[`linux/list.h`](http://lxr.linux.no/#linux+v3.7.6/include/linux/list.h)写道：

1.  On using `list_del_entry`: *注意：`list_empty`在此之后，on entry 不会返回 true，该条目处于未定义状态。*
2.  For `list_del`：*这仅适用于我们已经知道上一个/下一个条目的内部列表操作！*

那么，我将如何安全地从链表中删除一个对象并确保它`list_empty`正常工作或确保下一个链表节点删除是正确的？

这是我目前的实现：

```
struct kool_list{
    int to;
    struct list_head list;
    int from;
};

struct kool_list *tmp;
struct list_head *pos, *q;
struct kool_list mylist;

list_for_each_safe(pos, q, &mylist.list){
         tmp= list_entry(pos, struct kool_list, list);
         printf("freeing item to= %d from= %d\n", tmp->to, tmp->from);
         list_del(pos);
         free(tmp);
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-11T10:41:36.063

我想你误解了评论。第一个说这`list_empty(&entry->list)`不会返回true。但是，如果您从列表中删除所有元素（您的操作方式是正确的）并且`list_empty(&mylist.list)`您会得到 true 的结果。

如果出于某种原因您希望将条目保持`struct list_head`在内部一致的状态，请使用`list_del_init`.

其次，`__list_del`仅供内部使用，`list_del`是公平的游戏。

# python - python - 二维插值，一次一维

> ID：15332388
> 
> 赞同：2
> 
> 时间：2013-03-11T06:23:07.923
> 
> 标签：python, numpy, scipy, interpolation

我正在尝试实现一些插值技术 - 特别是使用 scipy pchip 例程。

我要确定的是我是否可以通过分别插值每个坐标来执行规则空间 2d 数据的插值。

例如，如果我有：

```
(1 x m) vector of X coordinates
(1 x n) vector of Y coordinates

(m x n) matrix of Z coordinates //Z value corresponding to (x,y) pair 
```

是否可以在每个维度上连续执行 pchip 插值，从而创建一个插值曲面？

Pchip 需要 pchip(X,Z) 形式的数据——其中 X 和 Z 都是一维数组。那么插值每个维度的最佳方法是什么？例如，我应该为 Z 矩阵的每一列执行 pchip(X,Z) 吗？然后 pchip(Y,Z*) 在第一次插值产生的矩阵的每一行上？

感谢您的帮助。我看过关于使用 pchip 执行张量 rpoduct 插值的 pv 帖子，但它会导致我无法摆脱的讨厌的除以零错误，即使他在 github 上进行了更新。

**编辑：**

我发现这张票是关于我使用 pchip 发出的警告的： [http ://projects.scipy.org/scipy/ticket/1838](http://projects.scipy.org/scipy/ticket/1838)

谁能告诉我当它说“通过应用布尔条件掩码过滤掉这样生成的infs / nans，但可以在除法之前应用掩码以完全避免警告时，它是什么意思。”

我该如何应用它来避免警告？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T16:19:47.900

看一下 [双线性插值](http://en.wikipedia.org/wiki/Bilinear_interpolation)中的顶部图片。
找到最接近 y, x 的行 y1, y2
`pchip`得到 R1 R2（蓝色），
然后线性插值得到 P（绿色）。
（您也可以按其他顺序执行此操作，并对值 x-then-y、y-then-x 进行平均。）

但是，如果`pchip`节点之间几乎是线性的（它是为了你的数据吗？），
那么直接做双线性会更简单，无论是使用 [scipy BivariateSpline](http://docs.scipy.org/doc/scipy/reference/generated/scipy.interpolate.RectBivariateSpline.html)
还是使用 [scipy.ndimage.interpolation.map_coordinates](http://docs.scipy.org/doc/scipy-dev/reference/generated/scipy.ndimage.interpolation.map_coordinates.html) ( ... order=1 ) 和 (ahem ) 包装器 [Intergrid](http://denis-bz.github.com/docs/intergrid.html)。

# highcharts - IE 9 64 位渲染问题

> ID：15332398
> 
> 赞同：1
> 
> 时间：2013-03-11T06:23:39.417
> 
> 标签：highcharts, highstock

我正在使用 Highstock JS v1.2.4。

我创建了一个包含多个系列的图表。这些系列被组合在一起。所以，我正在绘制一个线分隔符来分隔这些组使用

```
 axis.addPlotLine({
                id: 'separator',
                value: minVal, // minVal is dynamic
                width: global.lineWidth, // global.lineWidth is 2
                color: timelineDefaults.colors.separatorLine, // Line Color
                dashStyle: 'solid'
            }); 
```

另外，我添加 `plotBorderColor: '#346691', plotBorderWidth:1, ..` 了`chart:{...}`

在我固有地升级到 Windows 7 64 位和 IE 9 64 位之前，它运行顺利。如果我在 IE 32 位 7-8 9 和 9 兼容模式下测试它们，则相同的代码有效）。

这是屏幕![在此处输入图像描述](../Images/d27cb100c962d92de940e25d9c11e6e9.png)

这是来自 IE 64 位 ![在此处输入图像描述](../Images/efeae46a3bfc549f4127a3d64a950793.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T10:31:30.627

不支持兼容模式，只支持原生浏览器。

# jaxb - javassist不在现有字段注入注释

> ID：15332399
> 
> 赞同：3
> 
> 时间：2013-03-11T06:23:40.293
> 
> 标签：jaxb, annotations, javassist

我正在尝试使用 Javassist 在运行时注入 JAXB 注释。我写了以下代码：

```
public class AssistAnnotationInjector {
public static void addAnnotationRunTime(String className, String fieldName) throws NotFoundException, CannotCompileException, IOException, ClassNotFoundException{

    CtClass ctClass = ClassPool.getDefault().get(className);
    ClassFile ccFile = ctClass.getClassFile();
    ConstPool constPool = ccFile.getConstPool();
    AnnotationsAttribute attr = new AnnotationsAttribute(constPool, AnnotationsAttribute.visibleTag);
    Annotation annot = new Annotation("javax.xml.bind.annotation.XmlTransient",constPool);
    attr.addAnnotation(annot);
    CtField field = ctClass.getDeclaredField(fieldName);
    field.getFieldInfo().addAttribute(attr);
    System.out.println(field.getAnnotation(XmlTransient.class));
    ccFile.setVersionToJava5();
    ctClass.writeFile();
}

public static void main (String args[]) throws CannotCompileException, NotFoundException, IOException, SecurityException, NoSuchMethodException, ClassNotFoundException, JAXBException, NoSuchFieldException{
    Person<Student> p = new Person<Student>();
    p.setName("XYZ");
    Student s = new Student();
    s.setName("ABC");
    s.setId("239423");
    p.setPayload(s);

    addAnnotationRunTime("RuntimeAnnotation.Person", "name");

    Field f = p.getClass().getDeclaredField("name");
    System.out.println(f.getAnnotation(XmlTransient.class));

    JAXBContext context = JAXBContext.newInstance(p.getClass());

      Marshaller mr = context.createMarshaller();
      mr.setProperty(Marshaller.JAXB_FORMATTED_OUTPUT, Boolean.TRUE);

      mr.marshal(p, System.out);
}
} 
```

而 Person.java 类是：

```
@XmlRootElement(name="Person")
@XmlAccessorType(XmlAccessType.FIELD)
@XmlSeeAlso({Student.class})
public class Person <T>{

private T payload;

private String name;

public void setPayload(T payload){
    this.payload = payload;
}

public T getPayload(){
    return payload;
}

public void setName(String name){
    this.name = name;
}

public String getName(){
    return name;
}
} 
```

在 AssistAnnotationInjector.java 中，我试图将 XmlTransient 注释添加到“名称”字段。但是名称字段仍然在编组输出中。为什么会这样？

PS：元帅输出是：

```
@javax.xml.bind.annotation.XmlTransient
null
<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<Person>
<payload xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:type="student">
    <name>ABC</name>
    <id>239423</id>
</payload>
**<name>XYZ</name>**
</Person> 
```

名称标签预计不会出现在输出中..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-04-21T10:19:09.467

将属性添加到字段后，您需要调用 ctClass.toClass() 方法，该方法会冻结类。在此之后，您可以检查注释。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T21:03:10.647

你基本上有两个选择：

1.  在加载类**之前**进行修改。您不能以正常方式使用反射！可以尝试使用 org.reflections 和 Maven 插件来预取类。请参阅[此处](http://code.google.com/p/reflections/wiki/ReflectionsMojo)了解更多信息。

2.  使用**自定义类加载器**来加载修改后的类。请参阅[此处](http://www.csg.is.titech.ac.jp/~chiba/javassist/tutorial/tutorial.html#load)了解更多信息。

# jquery - 如何使用 JQuery 进行 SOAP 请求跨域

> ID：15332404
> 
> 赞同：4
> 
> 时间：2013-03-11T06:24:04.040
> 
> 标签：jquery, ajax, soap

我正在使用 SOAP Web 服务从另一台服务器获取响应。我正在使用 Jquery ajax 调用从服务器获取数据。但我从服务器获取**0**（零）状态码。

如何使用 Jquery 实现跨域 ajax 调用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T06:50:50.030

与其尝试使用 jQuery 获取跨域数据，不如尝试使用 PHP 或其他允许跨域访问的语言获取数据。创建一个加载 SOAP 数据的 PHP 页面，并使用 jQuery 将该信息嵌入到您的页面中。虽然它不是 SOAP 连接，但为了说明这个想法，您可以创建这个 PHP 页面来加载 Youtube 视频：

```
<?php
$vid = filter_var($_POST['id'], FILTER_SANITIZE_STRING);
?>
<?php if ($vid) : ?>
    <iframe title="YouTube video player" width="510" height="317" src="http://www.youtube.com/embed/<?php echo $vid; ?>?autoplay=1" frameborder="0" allowfullscreen></iframe>
<?php endif; ?> 
```

然后使用 jQuery 来显示它——点击一个链接可以调用这个函数：

```
function loadContent() {
$(this).parent().load("/youtube-video.php",{id:video_id},showNewContent());
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T09:00:28.430

你的问题似乎很模糊。但下面是在 jQuery 中进行跨域请求的一种方法：

```
$(function() {
            $.ajax({
                type:'GET',
                dataType:'jsonp',
                jsonp:'jsonp',
                url:'http://api.stackoverflow.com/1.0/tags/',
                success:function(data) {
                    $.each(data["tags"], function(index, item) {
                        var $tag = item.name;
                        var $count = item.count;
                        $("body").append('<div class="stackoverflow"> The Tag
              <span class="q-tag">' + $tag + '</span> has <
span class="q-count">'
 + $count + '</span> Questions.</div>')
                    });
                },
                error:function() {
                    alert("Sorry, I can't get the feed");  
                }
            });
        }); 
```

[**演示**](http://www.codeforbrowser.com/demos/stackoverflowtags.html)

[**上述说明**](http://codeforbrowser.com/blog/cross-domain-request-with-jquery-and-jsonp/)

# java - 从java中的文件中提取特定文本

> ID：15332406
> 
> 赞同：-1
> 
> 时间：2013-03-11T06:24:17.987
> 
> 标签：java, io

```
import java.io.BufferedWriter;
import java.io.File;
import java.io.FileReader;
import java.io.FileWriter;
import java.io.LineNumberReader;

public class ReadingfromModellerOutput {

    public static void main(String args[])throws Exception
    {
       // BufferedReader br = new BufferedReader(new FileReader("ModellerOutput.txt"));
      LineNumberReader reader=  new LineNumberReader(new FileReader("ModellerOutput1.txt"));

        String line;
                while ((line = reader.readLine()) != null) 
        {
           if(line.startsWith("Summary"))
           {

            System.out.println(reader.getLineNumber());
             for(int i=reader.getLineNumber();i<=(reader.getLineNumber()+50);i++)
            {
               System.out.println(reader.getLineNumber());
                writeTofile(line);
            }   

             }
             }
           }
    public static void writeTofile(String line)
    {
        //System.out.println(reader.getLineNumber());
          //   for(int i=reader.getLineNumber();i<=(reader.getLineNumber()+50);i++)
           //  {
                 // System.out.println(reader.getLineNumber());
          try 
              {
            BufferedWriter bw = new BufferedWriter(new FileWriter(new File("Output_1.txt"), true));
            System.out.println("Hi");
            bw.write(line);
            bw.newLine();
            bw.close();
        }
        catch (Exception e) {}
    }

    } 
```

我正在尝试编写一个代码来从一个文本文件中提取 50 行，该行以 **“约束违规摘要”开头的行：** 上面的代码正在编写同一行**“约束违规摘要：** 50 次”。请帮忙。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-11T06:27:02.883

```
System.out.println(reader.getLineNumber());
line = reader.readLine(); // You forgot to put this.
writeTofile(line); 
```

也不要忘记`break;`在你的`for`循环之后（在 内`if`）放一个，这样你就不会在你的`50 lines`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T06:28:18.107

我认为您应该阅读 for 循环内的行。

但是您必须再次检查文件结尾。看看这个实现：

```
String line = reader.readLine();
while (line != null) {
    if (line.startsWith("Summary")) {
        for (int i = 0; i < 50; i++) {
            line = reader.readLine();
            if (line != null) {
                writeTofile(line);
            } else {
                break;
            }
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-11T06:31:42.877

```
line = reader.readLine(); 
```

上面的行应该在 for 循环内。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-11T06:42:58.493

试试这个程序。使用适当的 Break 语句

```
import java.io.BufferedWriter;
import java.io.File;
import java.io.FileReader;
import java.io.FileWriter;
import java.io.LineNumberReader;

public class ReadingfromModellerOutput {

    public static void main(String args[])throws Exception
    {
       // BufferedReader br = new BufferedReader(new FileReader("ModellerOutput.txt"));
      LineNumberReader reader=  new LineNumberReader(new FileReader("ModellerOutput1.txt"));

        String line;
                while ((line = reader.readLine()) != null) 
        {
           if(line.startsWith("Summary"))
           {

            System.out.println(reader.getLineNumber());
             for(int i=reader.getLineNumber();i<=(reader.getLineNumber()+50);i++)
            {
               System.out.println(reader.getLineNumber());
                writeTofile(line);
            }   
             break;
             }
             }
           }
    public static void writeTofile(String line)
    {
        //System.out.println(reader.getLineNumber());
          //   for(int i=reader.getLineNumber();i<=(reader.getLineNumber()+50);i++)
           //  {
                 // System.out.println(reader.getLineNumber());
          try 
              {
            BufferedWriter bw = new BufferedWriter(new FileWriter(new File("Output_1.txt"), true));
            System.out.println("Hi");
            bw.write(line);
            bw.newLine();
            bw.close();
        }
        catch (Exception e) {}
    }

    } 
```

# svn - 如何进一步限制汇编 SVN 的可见性？

> ID：15332415
> 
> 赞同：1
> 
> 时间：2013-03-11T06:25:02.907
> 
> 标签：svn, permissions

我想给每个团队成员自己的 SVN，所以我禁止他们查看整个项目。是否可以只让他们每个人查看一个 SVN？现在我有自己的 FULL SVN，然后他们都可以看到“他们的”SVN 和“其他”的 SVN，但我想给他们每个人自己的 SVN，而不是让他们看到任何其他人。

程序集的 ACL 是否允许直接用户权限？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T18:13:50.753

我为 Assembla 工作。如果我理解正确，您正在寻找基于目录的权限。这是目前计划中的一项功能。我们计划允许用户拥有一个包含一堆文件夹的 SVN 存储库，并在每个目录上都有一个 ACL。

目前，您只能通过在多个空间中拥有多个 SVN 存储库来执行此级别的 ACL。每个开发人员都会在该空间中拥有自己的空间、自己的存储库和自己的门票工具。

如果您只是在寻找写入级别的 ACL（而不是读取），您可以在 SVN 设置中查看受保护的分支（您可以阻止某些团队成员提交到某些目录，他们将需要使用合并请求并且所有者可以接受代码）。

我们正在开发的另一个功能是 Space Manager。目前处于 beta 测试阶段。我们可以将您添加到该计划中。这将允许您在具有 SVN 存储库的多个空间中共享门票工具。如果您想加入此计划，请联系我或引用此 URL 的 Assembla 支持人员。

# ruby - Ruby 2.0 中的 Nokogiri

> ID：15332416
> 
> 赞同：4
> 
> 时间：2013-03-11T06:25:03.973
> 
> 标签：ruby, nokogiri

当我`require 'nokogiri'`在 Ruby 2.0 中时，它有一个错误

```
`require': cannot load such file -- nokogiri/2.0/nokogiri (LoadError) 
```

nokogiri 还不支持 Ruby 2.0 吗？我可以看到 nokogiri 在`gem list`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T11:40:53.340

Ruby 2.0 支持尚不适用于 Windows。[在此处](https://github.com/sparklemotion/nokogiri/issues/851)关注更新：

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T07:26:23.550

是的，它工作正常：

```
RUBY_VERSION # => "2.0.0"
require 'nokogiri'
doc = Nokogiri::HTML('<html><body><p>foo</p></body></html>')
doc.at('p').text # => "foo" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-08-07T04:50:54.720

Nokogiri 现在支持 Ruby 2.0，即使在 Windows 上也是如此，请参阅[此处](https://github.com/sparklemotion/nokogiri/issues/864)

# javascript - 在javascript中比较字符串的麻烦

> ID：15332417
> 
> 赞同：1
> 
> 时间：2013-03-11T06:25:12.447
> 
> 标签：javascript

我在 JS 比较字符串时遇到了一个奇怪的问题。一个字符串来自用户输入。

```
y = data;
document.getElementById("typeThisWord").innerHTML = y;
x = document.getElementById("inputField");
document.getElementById("youTyped").innerHTML = x.value;
first = document.getElementById("youTyped");
second = document.getElementById("typeThisWord");
if(first==second) correct=true; 
```

当单词相同时，它仍然是错误的。我添加了“第一”和“第二”变量只是为了看看它是否会有所作为。以前我尝试过将“x”与“y”进行比较。我也试过 x.value==y、x==y.value 和 x.value==y.value。“第一”和“第二”也是如此。令人惊讶的是 first.value==second.value 一直都是真的，即使它不应该是。

```
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
    <script>
        var x, y;
        var first, second;
        var availV = window.innerHeight - 100;
        var availH = window.innerWidth - 100;
        var randV, randH;
        var correct = new Boolean(); correct=true;
        var imageX;
        function displayWord() {

            if(correct) {
                correct=false;
                $.ajax({
                    url: "http://localhost:25578/TypeGood/VisitsSession",
                    success: function(data) { y = data; },
                    async: false
                });
                document.getElementById("typeThisWord").innerHTML = y;
                imageX = document.createElement("img");
                imageX.src = "https://encrypted-tbn1.gstatic.com/images?q=tbn:ANd9GcRPRV4XdE7C9sa0pM-FeXcOSQydg7Sh0INg-ZD6FKZ4wjY8WPHa5Q";
                imageX.height = 100;
                imageX.width = 100;
                imageX.style.position = "absolute";
                randV = Math.round( Math.random() * availV );
                randH = Math.round( Math.random() * availH );
                imageX.style.top = randV + "px";
                imageX.style.left = randH + "px";
                imageX.style.zIndex = "-20";
                document.body.appendChild(imageX);
            }
            x = document.getElementById("inputField");
            document.getElementById("youTyped").innerHTML = x.value;
            first = document.getElementById("youTyped").innerHTML;
            second = document.getElementById("typeThisWord").innerHTML;
            if(first==second) {correct=true;}
            x.value = "";

        }
    </script> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-11T06:26:46.930

`getElementById`返回对 DOM 元素的引用，而不是字符串，因此您不是在比较字符串，而是在比较 DOM 元素。由于它们是不同的元素，因此它们不是`==`.

至少，你的最后三行应该是这样的：

```
first = document.getElementById("youTyped").innerHTML;
second = document.getElementById("typeThisWord").innerHTML;
if(first==second) correct=true; 
```

（例如，使用`innerHTML`元素的 ，它**是**一个字符串。）虽然我认为我可能会将这些值保留在变量中，而不是为它们返回 DOM。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T06:53:24.803

例如：

```
y = data; //data is string value "First" 
```

将此值更改为新字符串 "first" >> 这里 f 很小

```
y2 = "first" 
```

现在，当两者都是相同类型时，它区分大小写。

```
if(y==y2) 
```

所以价值观是..

```
First == first 
```

那将是`false`。

因此，请确保您在内部 html 中传递数据。并确保你没有添加一些空白。

我希望这可以解决问题。:)

如果修改代码后没有解决，请回复评论:)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-11T06:27:12.143

使用它而不是（first==second）：

```
if(first===second) 
```

并从 html 中检索值，如下所示：

```
 first = document.getElementById("youTyped").innerHTML; 
```

# sql - 无法连接到 pc-name\SQLEXPRESS

> ID：15332418
> 
> 赞同：34
> 
> 时间：2013-03-11T06:25:12.773
> 
> 标签：sql, sql-server, database, sql-server-2008, database-design

尝试通过 SQL Server Management Studio 2005 连接到 SQL Server 2005 Standard Edition 时，出现以下错误：

![下面给出了错误的屏幕截图](../Images/6b7081b0194fe3c1c88b4d150383e27d.png)

我竭尽全力解决这个问题，但没有解决方案。在[以下帖子](https://stackoverflow.com/questions/360141/how-to-connect-to-local-instance-of-sql-server-2008-express#3461900)中的堆栈溢出中，我发现了这个屏幕截图： ![屏幕截图的解决方案](../Images/764a8fcf9ded25a7defcdf82cdd616e4.png)

当我看到我的连接到服务器对话框时，我发现了不同之处

![我的连接到服务器对话框](../Images/c1776721c5fdaf2f49ff05e7567b65e1.png)

问题是什么？

此 SQL 服务器在单台机器上运行，而不是在集群或客户端服务器上。

* * *

## 回答 #1

> 赞同：50
> 
> 时间：2013-03-11T06:30:50.080

![在此处输入图像描述](../Images/5f222165a5d2be7ea16dfcbd7af9ad30.png)

转到服务（services.msc）并重新启动映像中的服务，然后尝试连接。

* * *

## 回答 #2

> 赞同：36
> 
> 时间：2015-08-01T18:46:46.793

如果您有***Microsoft Windows 10***：

1.  在*Cortana*搜索栏上键入***控制面板***（默认情况下显示“**在此处键入以搜索**”）。或单击 Windows 图标并键入**控制面板**
******   点击**管理工具***   然后双击**服务***   向下滚动并查找：**SQL Server (SQLEXPRESS)**，然后*右键单击**   然后在弹出的窗口中点击**开始*******

 *****现在您应该能够连接到您的***pc-name\SQLEXPRESS***

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2019-02-14T12:23:43.290

使用 (LocalDB)\MSSQLLocalDB 作为服务器名称

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2018-04-07T06:22:33.827

当你得到这个错误。

请按照以下步骤解决您的问题

1.  按 (window + r) 键打开命令提示符或单击 windows 按钮并键入 Run 然后键入**services.msc**并单击 OK 或按 Enter 键。

2.查找**SQL Server (SQLEXPRESS)**。

3.现在看到左上角并单击开始。

4.如果服务显示错误，然后右键单击 SQL Express，然后单击属性。

5.然后单击登录选项卡。

6.输入Windows认证的用户名和密码

7.然后启动您的服务

8.问题将得到解决并运行您的查询

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2018-02-13T15:04:32.397

按照这些步骤，然后你解决你的问题 100%。

1.  当您收到此错误时，请关闭所有内容（Microsoft SQL Server 管理）：

[![错误](../Images/c186830780cfe50c27c79da4f871e9ba.png)](https://i.stack.imgur.com/MUtrj.png)

2.  然后按 ( `window`+ `r`) 键打开命令提示符并键入`services.msc`并单击确定或按 Enter 键。

3.  并搜索 **SQL Server (SQLEXPRESS)，如图所示。

[![在此处输入图像描述](../Images/2bb7c8d3c9313e6bc7057bf0d2c2bc6c.png)](https://i.stack.imgur.com/qRljJ.png)

4.  现在看到左上方并单击开始。

5.  如果您打开 Microsoft SQL Server Management，则不会收到任何类型错误。

享受！！！

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2016-10-04T22:41:14.850

初始化 SQL Server 浏览器服务。

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2016-04-10T20:33:15.467

我正在运行 Windows 10，这对我有用：

1.  通过在工具栏中搜索服务来打开服务。
2.  右键单击 SQL Server (SQLEXPESS)
3.  转到属性 - 登录
4.  检查本地系统帐户并允许服务与桌面交互。
5.  应用并重新启动服务。
6.  然后我能够连接

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2013-03-12T14:29:42.633

尝试使用 IP 而不是电脑名称。如果 ip 工作，那么它可能是名称管道未启用。如果它仍然无法正常工作，则可能会禁用使用 windows 的登录。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2015-10-23T19:30:46.763

我有这个问题。所以我这样写： PC-NAME\SQLSERVER 因为 SQLSERVER 是在安装时设置的实例名称。

身份验证：Windows 身份验证

连接！！！

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2014-07-25T15:33:50.680

转到服务并启动与 SQL 相关的服务

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2020-02-10T23:05:45.387

当我将 PC 添加到域时，会出现我的问题。重新启动服务，确保它正在运行，它具有正确的凭据来运行等，因为在其他答案中不起作用。我不确切知道问题出在哪里，但我什至无法再使用本地用户登录以授予域用户访问权限。以下是对我有用的步骤：

在**SSMS中**

*   查看 > 注册服务器
*   数据库引擎 > 本地服务器组 > 右键单击`pcname\sqlexpress`
*   删除 > 是
*   右键单击本地服务器组 > 任务 > 注册本地服务器
*   它确认它重新注册。 `pcname\sqlexpress`再次出现。

然后我可以再次使用本地 Windows auth 用户登录，我的数据库都在那里，一切都在那里。然后我开始我的业务，​​将域用户添加到安全 > 登录。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2021-05-31T08:19:22.903

就我而言，我是从 as 复制和粘贴服务器名称`appsettings.json`；

`DESKTOP-IVQP9DJ\\SQLEXPRESS`.

所以问题是服务器名称中有两个斜杠，这对我来说是个问题。如果您`.net core`像我一样使用和复制/粘贴服务器名称，请确保仅使用一个斜杠：

`DESKTOP-IVQP9DJ\SQLEXPRESS`*****

# webview - 在 webview android 的外部浏览器中打开广告

> ID：15332421
> 
> 赞同：2
> 
> 时间：2013-03-11T06:25:29.623
> 
> 标签：webview

我用 webview 创建了应用程序，我想在 webview 中加载所有内部链接并在 android 浏览器中加载外部链接。现在的问题是我正在使用 html 广告，当我点击广告时，我想打开外部浏览器，但它在 webview 中打开。唯一的问题是广告，否则一切正常。那么我该怎么做呢？

我的代码如下：

`class MyWebViewClient 扩展 WebViewClient {

```
@Override   
public boolean shouldOverrideUrlLoading(WebView view, String url) { if (Uri.parse(url).getHost().equals("www.mysite.com")) {
    view.loadUrl(url);
    return true;
}else{

        Intent intent = new Intent(Intent.ACTION_VIEW, Uri.parse(url));
        startActivity(intent);
        return true;}}` 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-03T07:36:17.163

我做了一些修改，它非常适合横幅广告。我做了以下更改：

*   如果条件改变。
*   如文档所述，我正在为“if”块返回 false：

> 如果提供了 WebViewClient，则返回 true 表示宿主应用程序处理 url，而 return false 表示当前 WebView 处理 url

```
@Override   
public boolean shouldOverrideUrlLoading(WebView view, String url) 
{ 
    if (url.contains("www.mysite.com")) 
    {
       view.loadUrl(url);
       return false;
    }else
    {
       Intent intent = new Intent(Intent.ACTION_VIEW, Uri.parse(url));
       startActivity(intent);
       return true;
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-11-01T22:34:34.030

你的代码应该是：

```
@Override   
public boolean shouldOverrideUrlLoading(WebView view, String url) {
    if (Uri.parse(url).getHost().equals("www.mysite.com")) {
        return true;
    }else{
        Intent intent = new Intent(Intent.ACTION_VIEW, Uri.parse(url));
        startActivity(intent);
        return false;
    }
} 
```

我改变的只是：

1.) 返回 true 在 webview 中加载 URL，**不需要 view.loadUrl()**

2.) 当你广播 ACTION_VIEW 意图时返回 false

# mpi - mpi_send 在发送第二条消息时会被阻塞

> ID：15332430
> 
> 赞同：0
> 
> 时间：2013-03-11T06:26:19.697
> 
> 标签：mpi

node00 可以成功发送信息到 rank 为 1 的 node01，但是在第二次发送到 node01 时会被阻塞。为什么会这样？非常感谢。我认为代码中没有死锁。

给定 MPI 编程，有 5 个节点

```
.....
MPI_Comm_size(MPI_COMM_WORLD, &size);
MPI_Comm_rank(MPI_COMM_WORLD, &rank);
MPI_Get_processor_name(processor_name, &namelen);
MPI_Status status;

int buff;

if(rank ==0)
{  
    buff=123;
    for(int i=1;i<size;i++){
    MPI_Send(&buff, 1, MPI_INT, i, tag, MPI_COMM_WORLD);  //succeed
    MPI_Send(&buff, 1, MPI_INT, i, tag, MPI_COMM_WORLD);  //blocked
   }
}
else
{
   MPI_Recv(&buff, 1, MPI_INT, 0, tag, MPI_COMM_WORLD, &status);//succeed
   MPI_Recv(&buff, 1, MPI_INT, 0, tag, MPI_COMM_WORLD, &status);//blocked
}
............ 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-06-11T09:28:41.660

```
#include<stdio.h>
#include<math.h>
#include<mpi.h>
#define tag 777
int rank;
int size;
int main(int argc,char *argv[])
{

  MPI_Init(&argc, &argv);
MPI_Comm_size(MPI_COMM_WORLD, &size);
MPI_Comm_rank(MPI_COMM_WORLD, &rank);
//MPI_Get_processor_name(processor_name, &namelen);
MPI_Status status;

int buff;
int i;
if(rank ==0)
{  printf("hai");
    buff=123;
    for(i=1;i<size;i++){
    MPI_Send(&buff, 1, MPI_INT, i, tag, MPI_COMM_WORLD);  //succeed
    MPI_Send(&buff, 1, MPI_INT, i, tag, MPI_COMM_WORLD);  //blocked
   }
}
else
{
printf("hello");
   MPI_Recv(&buff, 1, MPI_INT, 0, tag, MPI_COMM_WORLD, &status);//succeed
   MPI_Recv(&buff, 1, MPI_INT, 0, tag, MPI_COMM_WORLD, &status);//blocked
}

//MPI_Finalize(); //finalize MPI operations
return 0;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T07:44:12.610

为什么不使用 MPI_Isend 和 MPI_Irecv。这些是非阻塞调用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-08-01T14:16:44.413

您应该使用 mpi_finialize，如下所示：

```
int main(int argc, char *argv[])
{

    int rank, size;

    MPI_Init(&argc, &argv);
    MPI_Comm_size(MPI_COMM_WORLD, &size);
    MPI_Comm_rank(MPI_COMM_WORLD, &rank);
    int buff, tag = 99;
    MPI_Status status;
    if (rank == 0)
    {
        buff = 123;
        for (int i = 1; i < size; i++)
        {
            MPI_Send(&buff, 1, MPI_INT, i, tag, MPI_COMM_WORLD); //succeed
            MPI_Send(&buff, 1, MPI_INT, i, tag, MPI_COMM_WORLD); //blocked
        }
    }
    else
    {
        MPI_Recv(&buff, 1, MPI_INT, 0, tag, MPI_COMM_WORLD, &status); //succeed
        printf("%d\n", buff);
        MPI_Recv(&buff, 1, MPI_INT, 0, tag, MPI_COMM_WORLD, &status); //blocked
        printf("%d\n", buff);
    }

    MPI_Finalize();
    return 0;
} 
```

# mysql - 数据库：链接到单个外键的不同主键

> ID：15332436
> 
> 赞同：0
> 
> 时间：2013-03-11T06:26:44.720
> 
> 标签：mysql, sql, database

我有一张桌子

```
users 
[attributes : user_id] 
websites
 [web_id, user_id[foreign key] ] 
```

我想存储与 user_id 访问的每个网站相对应的用户 ID。Mysql 不提供动态存储，因此我无法将网站存储在单个数据库中。问题是如何将主键链接到单个外键。

所以我有网站的链接/域名，以及访问这些网站的所有用户的用户 ID，单个用户现在可以访问多个网站我想将此信息存储在表中，这样我就有指向用户 ID 的网络 ID/网站名称，但是因为有多个用户标识与单个网页/网站相关联，如何创建表来存储这些信息？

# javascript - 在 IE7 中启用 Javascript

> ID：15332438
> 
> 赞同：1
> 
> 时间：2013-03-11T06:26:50.413
> 
> 标签：javascript, ajax, internet-explorer, jquery, internet-explorer-7

我在本地有一个带有以下代码的 Html 文件

```
 <h1>This is session token </h1>
            <div id="noob"></div>

          <script src="http://code.jquery.com/jquery-1.9.1.min.js" type="text/javascript"></script> 
        <script>
        $(document).ready(function(){
        var sessiontoken;
         var randomUser = Math.round(Math.random() * 1000000);
             var supportCors = $.support.cors;
                       var sessiontoken ;

                       $.support.cors = true;

            $.ajax({
                           type: 'POST',
                           url: "https://abc.com/Gateway.Session/Session",
                           dataType: "json",
                           data: {
                               UserId: "TestUser" + randomUser,
                               CSK1: "abc",
                               CustId: "cde"
                           },
        success: function (data) {

                            $.support.cors = supportCors;
                            sessiontoken=data.Token;
                            alert(sessiontoken);
                            document.getElementById('noob').innerHTML = sessiontoken;

                           },
                           error: function (xhr, textStatus, error) {
                               $.support.cors = supportCors;
                                  alert("responseText: " + xhr.responseText);
                               alert("XHR statusText: " + xhr.statusText);
                               alert("textStatus: " + textStatus);
                               alert("error: " + error.message);
                           }

            });
          });

        </script> 
```

此代码在本地运行时（例如：c:/development/mypage.html）在启用 IE7 的弹出窗口“允许运行 javascript”后生成会话令牌。即，上述 javascript 中的 ajax 函数在运行时返回“成功”本地并生成会话令牌。但是当此代码部署在服务器中并在 IE7 中打开时（http://localhost:8080/mypage.html），上述脚本的 ajax 函数返回“错误”。

当我们在本地运行文件时，我们启用了弹出窗口以允许运行脚本。但是，当文件部署在服务器中时，当从服务器访问 html 页面时，我们不会出现 javascript 自行运行的弹出窗口。当我们从服务器提交文件时，我无法弄清楚为什么控制会转到“错误”部分或“成功”部分

那么如何让这个 ajax 函数在从服务器访问时返回“成功”部分。

该文件在本地或从服务器访问时在 chrome 中执行良好。现在我需要它与 IE7 一起使用。

# c++ - 在 OpenCV 中播放视频

> ID：15332446
> 
> 赞同：3
> 
> 时间：2013-03-11T06:27:17.560
> 
> 标签：c++, video, opencv

我是 OpenCV 的初学者，我希望在 OpenCV 中播放视频。我制作了一个代码，但它只显示一个图像。我正在使用 OpenCV 2.1 和 Visual Studio 2008。如果有人指导我哪里出错了，我将不胜感激。这是我粘贴的代码：

```
#include "stdafx.h"
#include "cv.h"
#include "highgui.h"

int main()
{
CvCapture* capture = cvCaptureFromAVI("C:/OpenCV2.1/samples/c/tree.avi");
IplImage* img = 0; 
if(!cvGrabFrame(capture)){              // capture a frame 
printf("Could not grab a frame\n\7");
exit(0);}
cvQueryFrame(capture); // this call is necessary to get correct 
                   // capture properties
int frameH    = (int) cvGetCaptureProperty(capture, CV_CAP_PROP_FRAME_HEIGHT);
int frameW    = (int) cvGetCaptureProperty(capture, CV_CAP_PROP_FRAME_WIDTH);
int fps       = (int) cvGetCaptureProperty(capture, CV_CAP_PROP_FPS);
int numFrames = (int) cvGetCaptureProperty(capture,  CV_CAP_PROP_FRAME_COUNT);
///numFrames=total number of frames

printf("Number of rows %d\n",frameH);
printf("Number of columns %d\n",frameW,"\n");
printf("frames per second %d\n",fps,"\n");
printf("Number of frames %d\n",numFrames,"\n");

for(int i=0;i<numFrames;i++)
{
IplImage* img = 0;
img=cvRetrieveFrame(capture); 
cvNamedWindow( "img" );
cvShowImage("img", img);

}
cvWaitKey(0);
cvDestroyWindow( "img" );
cvReleaseImage( &img );
cvReleaseCapture(&capture);

return 0;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-11T07:19:52.080

您必须使用`cvQueryFrame`而不是`cvRetrieveFrame`. 同样正如@Chipmunk 所指出的，您必须在`cvShowImage`.

```
#include "stdafx.h" 
#include "cv.h"       
#include "highgui.h"
cvNamedWindow( "img" );
for(int i=0;i<numFrames;i++)
{
   IplImage* img = cvQueryFrame(capture); 
   cvShowImage("img", img);
   cvWaitKey(10);
} 
```

以下是使用 OpenCV 播放视频的完整方法：

```
int main()
{
    CvCapture* capture = cvCreateFileCapture("C:/OpenCV2.1/samples/c/tree.avi");

    IplImage* frame = NULL;

    if(!capture)
    {
        printf("Video Not Opened\n");
        return -1;
    }

    int width = (int)cvGetCaptureProperty(capture,CV_CAP_PROP_FRAME_WIDTH);
    int height = (int)cvGetCaptureProperty(capture,CV_CAP_PROP_FRAME_HEIGHT);
    double fps = cvGetCaptureProperty(capture, CV_CAP_PROP_FPS);
    int frame_count = (int)cvGetCaptureProperty(capture,  CV_CAP_PROP_FRAME_COUNT);

    printf("Video Size = %d x %d\n",width,height);
    printf("FPS = %f\nTotal Frames = %d\n",fps,frame_count);

    while(1)
    {
        frame = cvQueryFrame(capture);

        if(!frame)
        {
            printf("Capture Finished\n");
            break;
        }

        cvShowImage("video",frame);
        cvWaitKey(10);
    }

    cvReleaseCapture(&capture);
    return 0;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T06:37:05.663

在窗口上显示图像后，必须延迟或等待才能显示下一个图像，我想你可以猜到这是为什么。好的，所以对于我们使用的延迟`cvWaitKey()`。这就是我在循环代码中添加的内容。

```
cvNamedWindow( "img" );
for(int i=0;i<numFrames;i++)
{
   IplImage* img = 0;
   img=cvRetrieveFrame(capture); 

   cvShowImage("img", img);
   cvWaitKey(10); 

} 
```

# android - 如何将多维 JSON 数组保存到 Android 上的 CSV 文件？

> ID：15332450
> 
> 赞同：3
> 
> 时间：2013-03-11T06:27:42.847
> 
> 标签：android, json, csv

我想将大型`JSON`数组数据存储到 CSV 文件中。我怎样才能做到这一点？

我有以下代码，它不会将任何数据保存到在我的 android“test”文件夹中创建的“test1.csv”文件中。

这是代码。

```
JSONArray outerArray = [{"value":true,"Id":0,"name":"214"},    {"value":true,"Id":0,"name":"215"},{"value":true,"Id":0,"name":"216"}]

public void saveCsv(JSONArray outerArray) throws IOException, JSONException {
    String rootPath = Environment.getExternalStorageDirectory()
            .getAbsolutePath() + "/test/";
    File dir = new File(rootPath);
    if (!dir.exists()) {
        dir.mkdir();
    }
    File file;
    EditText editText = (EditText) findViewById(R.id.editText1);
    if (!editText.getText().toString().equals("")) {
        file = new File(rootPath, editText.getText().toString() + ".csv");
    } else {
        editText.setError("Defualt csv file name will be used");
        Toast.makeText(this, "CSV name is empty", 5000).show();
        file = new File(rootPath, "test1.csv");
    }
    file.createNewFile();
    if (file.exists()) {
        CSVWriter writer = new CSVWriter(new FileWriter(file), ',');
        String[][] arrayOfArrays = new String[outerArray.length()][];
        for (int i = 0; i < outerArray.length(); i++) {
            JSONObject innerJsonArray =  (JSONObject) outerArray.get(i);
            String[] stringArray1 = new String[innerJsonArray.length()];
            for (int j = 0; j < innerJsonArray.length(); j++) {
                stringArray1[j] = (String) innerJsonArray.get("value");
            }
            arrayOfArrays[i] = stringArray1;
            writer.writeNext(arrayOfArrays[i]);
        }
        writer.close();
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-11T07:52:05.007

我从这里[http://sourceforge.net/projects/opencsv/](http://sourceforge.net/projects/opencsv/)使用了 opencsv-2.3.jar 。记录在这里[http://sourceforge.net/projects/opencsv/](http://sourceforge.net/projects/opencsv/)

我关注带有布尔值的 JSON，这会将布尔值转换为字符串值

```
JSONArray outerArray = [{"value":true,"Id":0,"name":"214"},    {"value":true,"Id":0,"name":"215"},{"value":true,"Id":0,"name":"216"}] 
```

我已将 json.get() 更改为 json.getString()。以下代码现在可以正常工作:)

```
 public void saveCsv(JSONArray outerArray) throws IOException, JSONException {
    String rootPath = Environment.getExternalStorageDirectory()
            .getAbsolutePath() + "/test/";
    File dir = new File(rootPath);
    if (!dir.exists()) {
        dir.mkdir();
    }
    File file;
    EditText editText = (EditText) findViewById(R.id.editText1);
    if (!editText.getText().toString().equals("")) {
        file = new File(rootPath, editText.getText().toString() + ".csv");
    } else {
        editText.setError("Defualt csv file name will be used");
        Toast.makeText(this, "CSV name is empty", 5000).show();
        file = new File(rootPath, "test1.csv");
    }
    if(!file.exists()){
        file.createNewFile();
    }       
    if (file.exists()) {
        CSVWriter writer = new CSVWriter(new FileWriter(file), ',');
        String[][] arrayOfArrays = new String[outerArray.length()][];
        for (int i = 0; i < outerArray.length(); i++) {
            JSONObject innerJsonArray =  (JSONObject) outerArray.get(i);
            String[] stringArray1 = new String[innerJsonArray.length()];

            stringArray1[0]= (String) innerJsonArray.getString("Id");
            stringArray1[1]= (String) innerJsonArray.getString("value");
            stringArray1[2]= (String) innerJsonArray.getString("name");
            arrayOfArrays[i] = stringArray1;
            writer.writeNext(arrayOfArrays[i]);
        }
        writer.close();
    }
} 
```

# jsp - 如何在浏览器的新窗口中打开一个jsp页面

> ID：15332452
> 
> 赞同：0
> 
> 时间：2013-03-11T06:28:13.453
> 
> 标签：jsp, jakarta-ee

我当前的jsp页面中有一个锚标记链接，单击哪个studentid作为查询字符串传递，我想打开一个新的浏览器窗口，其中将显示学生的详细信息。我正在使用简单的 jsp 和 servlet。怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-11T06:39:09.690

```
<a href="javaScript:{openNewWindow();}"></a>

   function openNewWindow()
    {
    window.open("jsp name")
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T06:32:00.097

使用javascript怎么样

```
window.open('your') 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-12T11:04:17.877

在您的超链接中添加目标。

```
<a href="jsp page name" target = "_blank">Click here</a> 
```

当我们单击它时，它将在新选项卡中打开。

# xml - 我想 xpath 导航到一个节点，然后移动到兄弟模式，创建一个节点列表以将内容写入列表框

> ID：15332456
> 
> 赞同：0
> 
> 时间：2013-03-11T06:28:23.627
> 
> 标签：xml, xpath

我对 VB 很陌生，对 XML 和 xpath 更是如此。我有一个列表视图框，它传递标识 xml 文件中的节点所需的变量（在下面的情况下，变量是 id 元素的文本值。

该变量选择一个节点，但我需要它的一些兄弟/子节点的内部文本。我知道如何制作 xmlnodelists 并编写它们的内部文本没问题，但我无法完成这项工作。这是我的 xml 示例（我没有编写 xml 文件，因此无法更改它）：

```
<file>
  <outcomes>
   <outcome>
    <id>CPK</id>
    <id_text>description</outcome_text>
    <indicators>
        <indicator>
            <p>the text i want to write to listbox</p>
        </indicator>
        <indicator>
            <p>more text I want to write</p>
        </indicator>
    </indicators>
   </outcome>
  <outcome>
  <outcome>
    <id>CPK</id>
    <id_text>description</id_text>
    <indicators>
        <indicator>
            <p>the text i want to write to listbox</p>
        </indicator>
        <indicator>
            <p>more text I want to write</p>
        </indicator>
    </indicators>
   </outcome>
  <outcome>
 </outcomes>    
</file> 
```

所以假设传递的变量是“CPK”

这是我的代码：

```
 Private Sub Button1_Click_1(sender As Object, e As EventArgs) Handles Button1.Click
    'get variable to identify node
    Dim id As String
    Dim out As String
    id = Me.outListView.SelectedItems(0).Text
    out = Me.outListView.SelectedItems(0).SubItems(1).Text
    IndForm.SelOutBox.Text = id & "  " & out

    'start xpath navigation
    Dim document As XPathDocument = New XPathDocument("C:\Temp\" & sb & "_education_" & gr & ".XML")
    Dim navigator As XPathNavigator = document.CreateNavigator()

    'select the node with with variable, by text value
    navigator.SelectSingleNode("/files/outcomes/goal_section/outcome/id[@text='" & id & "']")

    'move to the needed node
    navigator.MoveToNext() 'should be at /outcome/id_text
    navigator.MoveToNext() 'should be at /outcome/indicators
    navigator.MoveToFirstChild() 'should be at /outcome/indicators/indicator
    navigator.MoveToFirstChild() 'should be at /outcome/indicators/indicator/p

    'now what? I want to loop through the <p> elements and have some sort of do statement and write them to 
    'to the IndForm.Listbox1

    IndForm.Show()
End Sub 
```

真实文件中每个 ID 都有许多“p”元素。任何帮助（我相信有一种更简单的方法可以做到这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T06:49:02.137

如果您只想要与`p`您拥有的 ID 匹配的 s 的值（我将使用半伪代码，因为我不太了解 VB 语法）：

```
 Dim pNodes as XPathNodeIterator = navigator.Select(
                 "/files/outcomes/outcome[id = '" & id & 
                 "']/indicators/indicator/p")

 While pNodes.MoveNext
    ' pNodes.Current.Value is the current value
 Loop 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T22:00:05.997

最终的工作代码，感谢 JRRishe：

```
 Private Sub Button1_Click_1(sender As Object, e As EventArgs) Handles Button1.Click
    'get variable to identify node
    Dim id As String
    Dim out As String
    id = Me.outListView.SelectedItems(0).Text
    out = Me.outListView.SelectedItems(0).SubItems(1).Text
    IndForm.SelOutBox.Text = id & "  " & out
    'start xpath navigation
    Dim doc As New Xml.XmlDocument()
    doc.load("C:\Temp\" & sb & "_education_" & gr & ".XML")

    'select the node with with variable, by text value
    Dim idList As Xml.XmlNodeList = doc.SelectNodes("/curriculum/outcomes/outcome[id = '" & id & "']/indicators/indicator/p")
    For Each p As Xml.XmlNode In idList
        IndForm.curIndBox.Items.Add(p.InnerText)
    Next

    IndForm.Show()
End Sub 
```

# objective-c - 实现触摸以用手指拖动各种图像

> ID：15332461
> 
> 赞同：1
> 
> 时间：2013-03-11T06:29:07.667
> 
> 标签：objective-c

我试图能够使用触摸来拖动各种图像。到目前为止，我试图让它只使用 1 张图像，但它不起作用（即我无法用手指移动图像）。我究竟做错了什么？

我有几个包含以下代码的文件：

**拖动视图.h**

```
@interface DragView : UIImageView {
}
@end 
```

**拖动视图.m**

```
#include "DragView.h"
    @implementation DragView

    - (void)touchesMoved:(NSSet *)set withEvent:(UIEvent *)event {
        CGPoint p = [[set anyObject] locationInView:self.superview];
        self.center = p;
    }

    @end 
```

**视图控制器.h**

```
#import <UIKit/UIKit.h>
#import "DragView.h"

@interface ViewController : UIViewController {
}

@property (nonatomic, strong) DragView *basketView;

@end 
```

**视图控制器.m**

```
 #import "ViewController.h"

    @interface ViewController ()

    @end

    @implementation ViewController

    @synthesize basketView;

    - (void)viewDidLoad
    {
        [super viewDidLoad];

        basketView = [[DragView alloc]
                      initWithImage:[UIImage imageNamed:@"basket.png"]];
        basketView.frame = CGRectMake(140, 340.2, 60, 30);
        [self.view addSubview:basketView];
    }

    - (void)didReceiveMemoryWarning
    {
        [super didReceiveMemoryWarning];
        // Dispose of any resources that can be recreated.
    }

    @end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T06:30:58.833

试试这个：

```
basketView.userInteractionEnabled = YES; 
```

[文档说：](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIImageView_Class/Reference/Reference.html)

> 新的图像视图对象默认配置为忽略用户事件。如果要在 UIImageView 的自定义子类中处理事件，则必须在初始化对象后将 userInteractionEnabled 属性的值显式更改为 YES。

# c# - 从两侧多选控件中获取选定的项目

> ID：15332469
> 
> 赞同：0
> 
> 时间：2013-03-11T06:29:59.683
> 
> 标签：c#, javascript, jquery, .net, linq

我有一个类似于下页中的多选控件-

[http://www.stevefenton.co.uk/cmsfiles/assets/File/twolateralmultiselect.html](http://www.stevefenton.co.uk/cmsfiles/assets/File/twosidedmultiselect.html)

它很酷。我面临的唯一挑战是如何巧妙地获取所选项目。我认为一些 linq 查询会对我有所帮助，但我对此并不陌生 -

表格示例，

1）如果我们在选择中添加新项目 -

```
prevSelection = {item1,item2}
newSelection ={item1,item2,item3} 
```

如何发现newSelection中只新增了item3？

2）如果我们在选择中删除一个项目 -

```
prevSelection = {item1,item2}
newSelection ={item1} 
```

如何找出在 newSelection 中删除了 item2？

3）更具挑战性，如果我们在我们的选择中删除并添加一些项目 -

```
prevSelection = {item1,item2}
newSelection ={item3,item4} 
```

如何发现在newSelection中删除了item1和item2，在newSelection中添加了item3、item4？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T08:03:22.887

1)

```
var newItems = newSelection.Except(prevSelection); 
```

2)

```
var deletedItems = prevSelection.Except(newSelection); 
```

3)

```
var newItems = newSelection.Except(prevSelection);
var deletedItems = prevSelection.Except(newSelection); 
```

# asp.net - 如何使所有页面都通过登录页面进行身份验证

> ID：15332471
> 
> 赞同：2
> 
> 时间：2013-03-11T06:30:11.463
> 
> 标签：asp.net, authentication

我的项目中有五个`.aspx`页面，第一个是登录页面，其他是主页，索引等。问题是当用户在登录页面输入用户名和密码时，它会直接进入下一页即主页. 但是当我简单地输入主页的 URL 时，它也会显示没有任何登录身份验证的页面。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T06:37:50.997

对于您项目的当前结构，您可以`Session`在验证用户凭据并存储登录用户详细信息后在登录页面上创建一个变量，即

在您的登录页面中，登录按钮单击处理程序执行以下操作：

```
 protected void btnLogin_Click(object sender, EventArgs e) 
 {
      string username= txtUsername.Text;
      string pwd = txtPassword.Text;

      //call your logic to verify user credentials.
      VerifyUserCredentialFromDb(username, pwd);

     if(UserValid)
     {
        Session["User"] = GetUserObject(username,pwd);

        //whatever your logic is, make sure, you create the Session object, before 
        //below line,whereever you are doing it
        Response.Redirect("Home.aspx");
     }
 } 
```

并在所有其他页面的 Page_load

```
 protected void Page_Load(object sender, EventArgs e)
  {
      if(Session["User"]==null)
        Response.Redirect("login.aspx");
  } 
```

顺便说一句，您应该查看[Forms Authentication](http://www.codeproject.com/Articles/13872/Form-authentication-and-authorization-in-ASP-NET)。

看看[这个](http://msdn.microsoft.com/en-us/library/xdt4thhy%28v=vs.100%29.aspx)简单的表单身份验证实现

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T07:11:36.473

您可以使用表单身份验证在 web.config 文件中控制身份验证...

```
<system.web>
    <authentication mode="Forms">
        <forms name="MySite" loginUrl="~/Login.aspx" protection="All" timeout="30" path="/" requireSSL="false" slidingExpiration="true" cookieless="UseCookies"/>
    </authentication>
    <authorization>
        <allow users="?"/>
    </authorization>
</system.web>

<location path="Members">
    <system.web>
        <authorization>
            <deny users="?"/>
        </authorization>
    </system.web>
</location> 
```

这将阻止对网站中成员文件夹的所有未经授权的访问。因此，如果您只是在`http://localhost/Members/Default.aspx`地址栏中输入内容，它会将您发送回登录页面`localhost/Login.aspx`。

虽然这明确拒绝访问成员文件夹中的页面，但您可以重写它以阻止访问除主页之外的所有页面，方法是替换`<allow users="?" />`为`<deny users="?" />`您在其下方看到的。

通常，您还想在那些看起来像这样 (C#) 的页面中编写检查：

```
protected void Page_Load(object sender, System.EventArgs e)
{
    if (Context.User.Identity.IsAuthenticated) 
    {
        // User is logged in, continue
    }
    else
    {
        // No valid login...
        Session.Clear();
        Response.Redirect("~/Login.aspx");
    }
} 
```

希望这可以帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-11T07:03:10.227

您需要在会话中保存用户凭据......以及在 aspx 页面上的页面加载事件中

```
 protected void Page_Load(object sender, EventArgs e)
 {   
  if(Session["Username"]==null)
  Response.Redirect("login.aspx");
 } 
```

如果没有会话，它会重定向到登录页面..

# sql - 每次在 SQL Server 中更新或插入行时，我都想获取当前日期时间

> ID：15332472
> 
> 赞同：2
> 
> 时间：2013-03-11T06:30:16.430
> 
> 标签：sql, sql-server

我有一个表`s_phone`，在这个表中有列`s_update`。

每次更新或插入此表时，我都想获取当前日期时间

`getdate()`或`systime()`或`CURRENT_TIMESTAMP`仅在插入时获取日期时间，而不是在更新时获取

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-11T06:38:55.877

您可以使用[TRIGGER](http://msdn.microsoft.com/en-us/library/ms189799.aspx) 触发器将在表中发生插入/更新时自动运行。

例如：

```
create table tbl1
(
    col1 int primary key,
    col2 datetime
)
go
create trigger trg01
on tbl1
for insert, update
as 
begin
   update tbl1 
   set col2 = GETDATE()
   where col1 in (select col1 from inserted)
end   
go
insert into tbl1(col1) values (1); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T06:35:51.533

您的问题令人困惑，首先您说： “..***我每次更新或插入****此表时都想获取当前日期时间..”***在问题的最后一部分，您说：*“..获取日期时间**仅插入时不更新时**..”***

 **但是试试这个，为什么不在列上设置一个默认值，例如：

```
CREATE TABLE Hello
(
    ID INT,
    DATE DATETIME DEFAULT GETDATE()
)

INSERT INTO Hello (ID) VALUES (1)
INSERT INTO Hello (ID) VALUES (2)
INSERT INTO Hello (ID) VALUES (3)
INSERT INTO Hello (ID) VALUES (4) 
```

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!3/80a6b/1)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-11T06:42:32.270

```
getdate() or systime() or CURRENT_TIMESTAMP 
```

这些将为您提供当前的系统日期时间。如果您想在插入、更新事件中捕获日期时间，请使用触发器或您自己，您可以获取日期时间并插入所需的表中。**

# c# - 工作线程未更新按钮的可见性状态

> ID：15332488
> 
> 赞同：0
> 
> 时间：2013-03-11T06:31:30.717
> 
> 标签：c#, wpf, c#-4.0, wpf-controls

我在 wpf 应用程序中借助 BackgroundWorker 进行批量复制操作。我从工作线程调用方法 DoAction，如下所示

```
private void DoAction()
  {

     .....................
     .....................   // some code goes here and works fine

     //Enable the Explore link to verify the package
     BuildExplorer.Visibility = Visibility.Visible; // here enable the button to visible and gives error
  } 
```

如果我在最后看到 BuildExplorer 按钮可见性，则会显示错误“调用线程无法访问此对象，因为不同的线程拥有它。” 如何更新 UI 线程状态？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T06:33:22.590

从 WPF 中的 UI 线程修改 UI 是合法的。更改可见性之类的操作正在修改 UI，并且无法从后台工作人员中完成。您需要从 UI 线程执行此操作

在 WPF 中执行此操作的最常见方法如下

*   `Dispatcher.CurrentDispatcher`在 UI 线程中捕获
*   从后台线程调用`Invoke`捕获的值以在 UI 线程上工作

例如

```
class TheControl { 
  Dispatcher _dispatcher = Dispatcher.CurrentDispatcher;

  private void DoAction() {
    _dispatcher.Invoke(() => { 
      //Enable the Explore link to verify the package
      BuildExplorer.Visibility = Visibility.Visible;
    });
  }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T06:36:56.943

如果您从不同的线程访问，请编组控制访问。在 Windows 和许多其他操作系统中，一个控件只能由它所在的线程访问。你不能从另一个线程摆弄它。在 WPF 中，调度程序需要与 UI 线程相关联，并且您只能通过调度程序编组调用。

如果长时间运行的任务比使用 BackgroundWorker 类来获取完成通知

```
var bc = new BackgroundWorker();
    // showing only completed event handling , you need to handle other events also
        bc.RunWorkerCompleted += delegate
                                     {
                                        _dispatcher.Invoke(() => { 
                                        //Enable the Explore link to verify the package
                                        BuildExplorer.Visibility = Visibility.Visible;
                                     }; 
```

# iphone - 我如何将天气图实现为天气频道应用程序？

> ID：15332491
> 
> 赞同：1
> 
> 时间：2013-03-11T06:31:39.903
> 
> 标签：iphone, objective-c, ios4, map, xcode4

我正在为天气图雷达实施[HAMweather 的 Aeris API 。](http://www.hamweather.com/products/aeris-api/)它不像天气频道应用程序那样显示天气。它在控制台中给了我结果

```
 2013-03-11 11:54:58.298 C2S[1487:c07] [AerisEngine] Account does not have access to tile overlay for code {radar}.
  2013-03-11 11:54:59.666 C2S[1487:c07] [AerisEngine] API response received, used cache: NO 
```

有谁能够帮我？

天气频道应用程序显示天气，如图所示： ![显示天气的天气频道应用程序](../Images/b9e3f6f6369cf5eb15ae89785e8cabd7.png)

Aeris 只给了我这张地图： ![Aeris 给了我这张地图](../Images/dc3e18dfa5d3e4780c7fe7936805609b.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T06:44:19.857

你在这里描述了几个问题。

1)

您显然没有正确访问显示数据的权限（“帐户无权访问代码的图块叠加层”错误）。

2)

[Aeris / HAMweather 与天气频道不同](http://www.hamweather.com/support/documentation/mobile/ios/starting/)

3)

[天气频道有自己的 API](http://press.weather.com/press-releases/the-weather-channel-launches-new-api-for-developers/)。访问“低至每月 20 美元”。我的研究还不够深入，无法发现他们是否有 iOS api。你能负担得起每月20美元吗？

# soundcloud - 在 soundcoud 上按许可证搜索返回 503 错误

> ID：15332493
> 
> 赞同：2
> 
> 时间：2013-03-11T06:32:00.003
> 
> 标签：soundcloud

当我尝试通过许可证复制搜索时，如此处所述

[http://developers.soundcloud.com/docs#search](http://developers.soundcloud.com/docs#search)

使用此代码

```
<script src="http://connect.soundcloud.com/sdk.js"></script>
<script>
SC.initialize({
  client_id: //insert client ID here
});

// find all sounds of buskers licensed under 'creative commons share alike'
SC.get('/tracks', { q: 'buskers', license: 'cc-by-sa' }, function(tracks) {
  console.log(tracks);
});
</script> 
```

我得到的只是 503 错误。你可以在这里自己尝试

[http://karelbilek.com/musicalibre/](http://karelbilek.com/musicalibre/)

这很可能是 SoundCloud 的一个问题，因为当我删除该`license: 'cc-by-sa'`部分时，它工作正常。即使我写`licence`而不是`license`，它也可以正常工作，但它不会过滤任何东西。

我尝试通过电子邮件联系 SoundCloud，但由于他们不回复邮件而是回复关于 SO 的问题，因此很遗憾我使用 SO 来报告错误。

我还要补充一点，我在 7 天前尝试过，它返回了完全相同的错误，所以这不仅仅是暂时的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T12:36:54.843

感谢您报告此问题，该错误现已修复并已部署。这是您的代码的工作示例：http: [//jsbin.com/ewamay/1/edit](http://jsbin.com/ewamay/1/edit)

# android - android旋转矩阵转换的顺序

> ID：15332496
> 
> 赞同：-1
> 
> 时间：2013-03-11T06:32:08.683
> 
> 标签：android, rotation

android使用以下代码计算旋转矩阵：

```
 float Ax = gravity[0];
    float Ay = gravity[1];
    float Az = gravity[2];
    final float Ex = geomagnetic[0];
    final float Ey = geomagnetic[1];
    final float Ez = geomagnetic[2];
    float Hx = Ey*Az - Ez*Ay;
    float Hy = Ez*Ax - Ex*Az;
    float Hz = Ex*Ay - Ey*Ax;
    final float normH = (float)Math.sqrt(Hx*Hx + Hy*Hy + Hz*Hz);
    if (normH < 0.1f) {
        // device is close to free fall (or in space?), or close to
        // magnetic north pole. Typical values are  > 100.
        return false;
    }
    final float invH = 1.0f / normH;
    Hx *= invH;
    Hy *= invH;
    Hz *= invH;
    final float invA = 1.0f / (float)Math.sqrt(Ax*Ax + Ay*Ay + Az*Az);
    Ax *= invA;
    Ay *= invA;
    Az *= invA;
    final float Mx = Ay*Hz - Az*Hy;
    final float My = Az*Hx - Ax*Hz;
    final float Mz = Ax*Hy - Ay*Hx;
    if (R != null) {
        if (R.length == 9) {
            R[0] = Hx;     R[1] = Hy;     R[2] = Hz;
            R[3] = Mx;     R[4] = My;     R[5] = Mz;
            R[6] = Ax;     R[7] = Ay;     R[8] = Az;
        } else if (R.length == 16) {
            R[0]  = Hx;    R[1]  = Hy;    R[2]  = Hz;   R[3]  = 0;
            R[4]  = Mx;    R[5]  = My;    R[6]  = Mz;   R[7]  = 0;
            R[8]  = Ax;    R[9]  = Ay;    R[10] = Az;   R[11] = 0;
            R[12] = 0;     R[13] = 0;     R[14] = 0;    R[15] = 1;
        }
    } 
```

我也想知道这背后的逻辑是什么，使用的旋转顺序是什么？我想使用旋转矩阵来校正旋转。所以android的计算顺序很重要。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T06:51:34.193

Android 假设重力参数是一个位于世界天空轴上的向量。也就是说，如果 ( **w_1** , **w_2** , **w_3** ) 是世界基，其中**w_1**是指向东方的单位向量，**w_2**是指向北方的单位向量，而**w_3**是指向天空的向量，那么重力参数是一个向量，它是**w_3**的倍数。因此，重力参数的归一化是**w_3**。
此外，代码假设地磁场参数是位于由**w_2**和**w_3跨越的平面上的向量**因此，归一化地磁场参数和归一化重力参数的叉积是正交于由**w_2**和**w_3**跨越的平面的单位向量。因此这个产品只是**w_1**。
现在**w_3**和**w_1**的叉积是**w_2**。因此，您可以获得从设备坐标到世界坐标的基础变化。 我不明白“使用的轮换顺序”是什么意思，因此无法回答这个问题。

# data-binding - 如何在 ZK 模板标签中使用 if="some condition"

> ID：15332500
> 
> 赞同：3
> 
> 时间：2013-03-11T06:32:46.990
> 
> 标签：data-binding, mvvm, zk

我的 ZUL 文件中有一个 <template> 标记，并且我想在某些条件发生时使用此模板（例如，当某些 LABEL 的值更改为某些文本时）。

请看下面的代码...如您所见，“templateStatus”是我标签的名称，但它不起作用。

我该如何解决这个问题？

```
 <template name="allTaskTemplate" var="allTask" if="templateStatus.value == 'allTask'">
        <row>
            <label value="" />
            <label value="@load(allTask.documentDTO.docTypeDTO.title)"/>
            <label value="@load(allTask.documentDTO.docNumber)"/>
            <label value="@load(allTask.documentDTO.docDateTime)"/>
            <label value="@load(allTask.assignerID)"/>
            <label value="@load(allTask.assigneeID)"/>
            <label value="@load(allTask.assignDateTime)"/>
            <label value="@load(allTask.assignDateTime)"/>
            <label value="@load(allTask.assignDateTime)"/>
            <label value="@load(allTask.assignDateTime)"/>
            <label value="@load(allTask.documentDTO.docTypeStateDTO.stateActionDTO.actionDTO.title)"/>
            <label value="@load(allTask.catalogDTO.catalogTypeDTO.title)"/>
        </row>
    </template>
</grid> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-06-18T12:40:40.443

使用`if`语句：

```
<zk if="${vm.type=='foo'}">
    <!-- Child components -->
</zk>

<zk if="${vm.type=='check'}">
    <!-- Child components -->
</zk>

<zk if="${vm.type=='something'}">
    <!-- Child components -->
</zk>

<zk if="${vm.type=='value'}">
    <!-- Child components -->
</zk> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-11T07:15:50.993

请参阅下面的 ZK 示例。您可以使用条件模板...

```
<grid model="@bind(vm.itemList) @template(vm.type eq 'foo'?'template1':'template2')">
    <template name="template1">
    <!-- child components -->
    </template>

    <template name="template2">
    <!-- child components -->
    </template>
</grid> 
```

更多信息，您可以查看 ZK 的官方页面，*[收集和选择](http://books.zkoss.org/wiki/ZK_Developer%27s_Reference/MVVM/Data_Binding/Collection_and_Selection)*。

请参阅以下代码...

```
 <menubar id="mbar" children="@bind(vm.menuList) @template(empty each.children?'menuitem':'menu')">
    <template name="menu" var="menu">
        <menu label="@bind(menu.name)">
            <menupopup children="@bind(menu.children) @template(empty each.children?'menuitem':'menu')"/>
        </menu>
    </template>
    <template name="menuitem" var="item">
        <menuitem label="@bind(item.name)" onClick="@command('menuClicked',node=item)" />
    </template>
</menubar> 
```

见上文。使用两个以上的模板，你可以做这样的事情。我不知道您的要求，但您可以使用上述逻辑并在您的代码中实现它。

或者你也可以查看 ZK 论坛，[Zk 论坛](http://forum.zkoss.org/question/85540/different-template-for-each-grid-row/)。

# wso2 - 如何处理 WSO2ESB 中的错误序列

> ID：15332501
> 
> 赞同：0
> 
> 时间：2013-03-11T06:32:47.570
> 
> 标签：wso2, wso2esb, wso2dss

我想使用故障序列处理错误，但我希望使用删除操作对其进行自定义我的情况是当我在 2 个表中插入时，如果在第 2 个表插入中发生错误我需要删除第 1 行插入，我的配置也在下面

```
<proxy xmlns="http://ws.apache.org/ns/synapse" name="ErrorHandling" transports="https,http" statistics="disable" trace="disable" startOnLoad="true">
   <target >
      <inSequence onError="fault">
         <property name="eno" expression="//eno/text()" scope="default" type="STRING"/>
         <property name="ename" expression="//ename/text()" scope="default" type="STRING"/>
         <property name="esal" expression="//esal/text()" scope="default" type="STRING"/>
         <property name="deptname" expression="//deptname/text()" scope="default" type="STRING"/>
         <property name="deptid" expression="//deptid/text()" scope="default" type="STRING"/>
         <payloadFactory>
            <format>
               <p:insert_emp_operation xmlns:p="http://ws.wso2.org/dataservice">
                  <xs:eno xmlns:xs="http://ws.wso2.org/dataservice">$1</xs:eno>
                  <xs:ename xmlns:xs="http://ws.wso2.org/dataservice">$2</xs:ename>
                  <xs:esal xmlns:xs="http://ws.wso2.org/dataservice">$3</xs:esal>
               </p:insert_emp_operation>
            </format>
            <args>
               <arg expression="get-property('eno')"/>
               <arg expression="get-property('ename')"/>
               <arg expression="get-property('esal')"/>
            </args>
         </payloadFactory>
         <send receive="Error_Seq">
            <endpoint>
               <address uri="http://localhost:9764/services/emp_DataService/" format="soap11"/>
            </endpoint>
         </send>
         <log level="full"/>
      </inSequence>
      <outSequence  onError="fault">
         <send/>
         <log level="full"/>
      </outSequence>
   </target>
   <description></description>
</proxy> 
```

和序列是这样的

```
<sequence xmlns="http://ws.apache.org/ns/synapse" name="Error_Seq" onError="fault">
   <property xmlns:f="http://ws.wso2.org/dataservice" xmlns:ns="http://org.apache.synapse/xsd" name="ID" expression="//f:ID/text()" scope="default" type="STRING"/>
   <log>
      <property xmlns:ns="http://org.apache.synapse/xsd" name="faisal" expression="get-property('ID')"/>
   </log>
   <payloadFactory>
      <format>
         <p:insert_dept_operation xmlns:p="http://ws.wso2.org/dataservice">
            <xs:deptno xmlns:xs="http://ws.wso2.org/dataservice">$1</xs:deptno>
            <xs:deptname xmlns:xs="http://ws.wso2.org/dataservice">$2</xs:deptname>
            <xs:deptid xmlns:xs="http://ws.wso2.org/dataservice">$3</xs:deptid>
         </p:insert_dept_operation>
      </format>
      <args>
         <arg xmlns:ns="http://org.apache.synapse/xsd" expression="get-property('ID')"/>
         <arg xmlns:ns="http://org.apache.synapse/xsd" expression="get-property('deptname')"/>
         <arg xmlns:ns="http://org.apache.synapse/xsd" expression="get-property('deptid')"/>
      </args>
   </payloadFactory>
   <send>
      <endpoint>
         <address uri="http://localhost:9764/services/dept_DataService/" format="soap11"/>
      </endpoint>
   </send>
</sequence> 
```

故障顺序是这样的

```
<sequence xmlns="http://ws.apache.org/ns/synapse" name="fault">
   <property xmlns:ns="http://org.apache.synapse/xsd" name="ID" expression="get-property('ID')" scope="default" type="STRING"/>
   <log level="full">
      <property name="MESSAGE" value="Executing default 'fault' sequence"/>
      <property xmlns:ns="http://org.apache.synapse/xsd" name="ERROR_CODE" expression="get-property('ERROR_CODE')"/>
      <property xmlns:ns="http://org.apache.synapse/xsd" name="ERROR_MESSAGE" expression="get-property('ERROR_MESSAGE')"/>
      <property xmlns:ns="http://org.apache.synapse/xsd" name="Property" expression="get-property('ID')"/>
   </log>
   <payloadFactory>
      <format>
         <p:Delete_Op xmlns:p="http://ws.wso2.org/dataservice">
            <xs:eno xmlns:xs="http://ws.wso2.org/dataservice">$1</xs:eno>
         </p:Delete_Op>
      </format>
   </payloadFactory>
   <send>
      <endpoint>
         <address uri="http://localhost:9764/services/dept_DataService/" format="soap11"/>
      </endpoint>
   </send>
</sequence> 
```

但它在 DSS 处于关闭模式时无法正常工作让我知道 DSS 处于运行模式时如何删除第一个表行

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T07:36:20.533

在您的场景中，当 DSS 更新失败时，它会将 SOAP 错误发送回 ESB。由于 ESB 这仍然只是另一个消息响应，它不会进入故障序列，除非您明确检查消息并执行必要的操作。所以你必须声明 comming 消息是一个 SOAP_FAULT 所以你不得不说它是一个 SOAP_FAULT 并强制它出错序列。这在 [1] 中有解释。

[1] [http://maharachchi.blogspot.com/2012/09/now-you-can-send-soapfaults-to-fault.html](http://maharachchi.blogspot.com/2012/09/now-you-can-send-soapfaults-to-fault.html)

# algorithm - 以产品的下限最小化总和

> ID：15332503
> 
> 赞同：1
> 
> 时间：2013-03-11T06:33:02.513
> 
> 标签：algorithm, primes, mathematical-optimization

我有一个优化问题，我目前正在通过蛮力解决，但我希望有更好的方法。

**问题**：给定`n`and `d`，找到素数幂`p1^e1, ..., pk^ek`（`pi`s 是不同的）使得

1.  `p1^e1 * ... * pk^ek >= n^d`
2.  `p1^e1 + ... + pk^ek < n`是最小的

我目前的解决方案是遍历所有可能的素数子集（直到某个固定数），然后遍历所有可能的指数（直到某个固定数），然后测试条件 1，然后查看总和是否是迄今为止最小的。这需要很长时间。有什么更聪明的方法可以加快速度吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T07:51:43.303

这似乎是一个[背包问题](http://en.wikipedia.org/wiki/Knapsack_problem)。我怀疑它是NP完全的。事实上，如果 (d = 1)，*优化*可能等同于分解。

然而，并非所有的背包问题都是 NP 难题——这就是 Merkle-Hellman 背包密码系统被破解的原因。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T10:12:37.877

通过 AM-GM 不等式并使用其他约束，您可以获得：

(n / k)^k > 产品 >= n^d

因此 n^(kd) > k^k。将 log 以 n 为底，我们得到：kd > k*log(k)。由于 k <= n (基于总和) k * (1 - log(k)) > d

您可以绘制上面的 LHS 以获得 k 的估计值。

# asp.net-mvc - extjs4 MVC Ext.ComponentQuery.query(...).setVisible 不是函数

> ID：15332504
> 
> 赞同：1
> 
> 时间：2013-03-11T06:33:05.900
> 
> 标签：asp.net-mvc, extjs4

我在如下视图中有按钮：

```
initComponent: function() {
    this.layout = {
        type: 'vbox',
        align: 'center',
        pack: 'center'
    };

    this.items = [
        Ext.create('Ext.Button', {
            name:'loginButton',
            action:'login',
            text: 'Login',
            scale   : 'medium',
            width: 100,
            itemId:'loginButton',
            handler: function() {
                //any default action here
            }

        })
    ]; 
```

现在在控制器中我想隐藏那个按钮，我写了

```
 Ext.ComponentQuery.query('button[text=Login]').setVisible(false); 
```

但它得到一个错误。

```
TypeError: Ext.ComponentQuery.query(...).setVisible is not a function 
```

请帮我...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T07:35:56.017

`query`返回一个数组，因此您需要访问第一个索引。

# php - Magento：以编程方式创建订单的问题

> ID：15332506
> 
> 赞同：0
> 
> 时间：2013-03-11T06:33:10.243
> 
> 标签：php, magento, cart

我正在创建一个 magento 扩展，我需要在其中以编程方式从购物车创建订单。为此，我正在使用以下代码。但我无法让它工作。任何帮助，将不胜感激。

```
// Check whether the product could be loaded
if(isset($_POST['create_order'])){
  // Get the customer model
  $customer = Mage::getModel('customer/customer');

  // Set the website id associated with the customer
  $customer->setWebsiteId(Mage::app()->getWebsite()->getId());

if($_POST['customer'] == 'exist')
  $email = $_POST['mageUser']['email'];
else
  $email = $_POST['mageUser']['email_id'];

  // Try to load the customer by email
  $customer->loadByEmail($email);

  // Check whether the customer not exists
  if(!$customer->getId())
  {
      // Create the customer
      $customer->setEmail($email);
      $customer->setFirstname($_POST['mageUser']['first_name']);
      $customer->setLastname($_POST['mageUser']['last_name']);
      $customer->save();
      $fname = $_POST['mageUser']['first_name'];
      $lname = $_POST['mageUser']['last_name'];
  }
  else {
    $fname = $customer->getFirstname();
    $lname = $customer->getLastname();
  }

  // Set the esstial order data
  $orderData = array(
      'currency' => 'USD',
      'account'  => array(
          'group_id' => Mage_Customer_Model_Group::NOT_LOGGED_IN_ID,
          'email'    => $email
      ),
      'billing_address' => array(
          'firstname'  => $fname,
          'lastname'   => $lname,
          'street'     => 'pos',
          'city'       => 'Pos',
          'country_id' => '54',
          'region_id'  => 'BW',
          'postcode'   => 'pos',
          'telephone'  => 'pos',
      ),
      'comment' => array(
          'customer_note' => "Order placed by point of sales\n"
      ),
      'send_confirmation' => false 
  );

  // Set the shipping address to the billing address
  $orderData['shipping_address'] = $orderData['billing_address'];

  // Set the payment method
  $paymentMethod = 'pay';

  // Set the shipping method
  $shippingMethod = 'freeshipping_freeshipping';

  // Get the backend quote session
  $quoteSession = Mage::getSingleton('adminhtml/session_quote');

  // Set the session store id
  $quoteSession->setStoreId(Mage::app()->getStore('default')->getId());

  // Set the session customer id
  $quoteSession->setCustomerId($customer->getId());

  // Get the backend order create model
  $orderCreate = Mage::getSingleton('adminhtml/sales_order_create');

  // Import the data
  $orderCreate->importPostData($orderData);

  // Calculate the shipping rates
  $orderCreate->collectShippingRates();

  // Set the shipping method
  $orderCreate->setPaymentMethod($paymentMethod);

  // Set the payment method to the payment instance
  $orderCreate->getQuote()->getPayment()->addData(array('method' => $paymentMethod));

  // Set the shipping method
  $orderCreate->setShippingMethod($shippingMethod);

  // Set the quote shipping address shipping method
  $orderCreate->getQuote()->getShippingAddress()->setShippingMethod($shippingMethod);

  // Add the product
  $quote = Mage::getSingleton('checkout/session')->getQuote();
  $cartItems = $quote->getAllVisibleItems();
  $prd = array();
  foreach ($cartItems as $item) {
    $prd[$item->getId()] = array('qty' => $item->getQty());
  }

  $orderCreate->addProducts($prd);
  //print_r($orderCreate); exit();
  // Initialize data for price rules
  $orderCreate->initRuleData();

  // Save the quote
  $orderCreate->saveQuote();

  // Create the order
  $order = $orderCreate->createOrder();
  $order->setData('state', "complete");
  $order->setStatus("complete");
  $history = $order->addStatusHistoryComment('Order marked as complete automatically.', false);
  $history->setIsCustomerNotified(false);
  $order->save();
} 
```

当我打开开发者模式时它显示此错误消息

```
#0 /home/seat2/public_html/Projects/MagentoPos/Repo/WebApp/app/code/core/Mage/Adminhtml/Model/Sales/Order/Create.php(1614): Mage::throwException('')
#1 /home/seat2/public_html/Projects/MagentoPos/Repo/WebApp/app/code/core/Mage/Adminhtml/Model/Sales/Order/Create.php(1508): Mage_Adminhtml_Model_Sales_Order_Create->_validate()
#2 /home/seat2/public_html/Projects/MagentoPos/Repo/WebApp/app/code/local/Nettantra/Pos/controllers/IndexController.php(210): Mage_Adminhtml_Model_Sales_Order_Create->createOrder()
#3 /home/seat2/public_html/Projects/MagentoPos/Repo/WebApp/app/code/core/Mage/Core/Controller/Varien/Action.php(419): Nettantra_Pos_IndexController->createorderAction()
#4 /home/seat2/public_html/Projects/MagentoPos/Repo/WebApp/app/code/core/Mage/Core/Controller/Varien/Router/Standard.php(250): Mage_Core_Controller_Varien_Action->dispatch('createorder')
#5 /home/seat2/public_html/Projects/MagentoPos/Repo/WebApp/app/code/core/Mage/Core/Controller/Varien/Front.php(176): Mage_Core_Controller_Varien_Router_Standard->match(Object(Mage_Core_Controller_Request_Http))
#6 /home/seat2/public_html/Projects/MagentoPos/Repo/WebApp/app/code/core/Mage/Core/Model/App.php(354): Mage_Core_Controller_Varien_Front->dispatch()
#7 /home/seat2/public_html/Projects/MagentoPos/Repo/WebApp/app/Mage.php(683): Mage_Core_Model_App->run(Array)
#8 /home/seat2/public_html/Projects/MagentoPos/Repo/WebApp/index.php(87): Mage::run('', 'store')
#9 {main} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-05-28T21:26:52.017

```
$productModel = Mage::getModel('catalog/product');
$productId = $productModel->getIdBySku($sku);
$product = $productModel->load($productId);
$cart = Mage::getModel('checkout/cart');
$cart->init();
$cart->addProduct($product, array('qty' => $quantity));
$cart->save(); 
```

**您需要定义 $sku 和 $quantity 这将创建一个购物车并添加一个产品；希望这会为您指明正确的方向

# android - 在 OnItemLongClickListener 上禁用 onItemclicklistener

> ID：15332508
> 
> 赞同：2
> 
> 时间：2013-03-11T06:33:19.963
> 
> 标签：android, onitemclicklistener

我想在长按时禁用 onItemclicklistener。问题是我在网格视图的 onItemclick 上播放视频。我想在 onItemLongclick 上做一些其他的任务。但是当我长按时它正在播放视频并执行其他任务..这是我的代码。

```
gv.setOnItemClickListener(new OnItemClickListener() {
        @SuppressWarnings("deprecation")
        public void onItemClick(AdapterView<?> parent, View v,final int position, long id) {

        Log.d(TAG, "got in onItemClick of Item  "+position);
        System.gc();
         Uri uri = MediaStore.Video.Media.EXTERNAL_CONTENT_URI;
         String[] cols = new String[]{
                MediaStore.Video.VideoColumns._ID,
                MediaStore.Video.VideoColumns.DISPLAY_NAME,
                MediaStore.Video.VideoColumns.DATA};
         Cursor c;
         c = managedQuery(uri, cols, null, null, MediaStore.Video.VideoColumns.DATE_TAKEN);
         c.moveToFirst();
         int mPath = c.getColumnIndexOrThrow(MediaStore.Video.VideoColumns.DATA);
         c.moveToPosition(position);
         String filename = c.getString(mPath);
         Log.d(TAG, "video position is " + position+ " video path is " + filename);
         Intent intent = new Intent(Isabella_galleryActivity.this, ViewVideo.class);
         intent.setDataAndType(uri, "video/*");
         intent.putExtra("videofilename", filename);
         intent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
         startActivity(intent);
        }
    });

gv.setOnItemLongClickListener(new OnItemLongClickListener() {

        //@Override
        public boolean onItemLongClick(AdapterView<?> parent, View v,
                int position, long id) {
            Log.d(TAG, "got in onItemLongClick of Item  "+position);// TODO Auto-generated method stub
            //del_image = (ImageView)findViewById(R.id.video_delet_image);
            //del_image.setVisibility(View.VISIBLE);
            //gv.setClickable(false);
            div.setVisibility(View.VISIBLE);
            div.setOnClickListener(new OnClickListener() {

                @Override
                public void onClick(View v) {
                    Log.w(TAG, "deleting the video");

                }
            });
            return false;
        }
       });
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T06:49:31.213

尝试将`OnItemLongClickListener`返回值设置为 true 以告知回调已被使用。如果您返回 false 它认为长点击没有被消耗。这可能会解决您的问题

# java - 在 JAVA 中替换所有数字和它们之后的所有内容，但是当有连字符不做任何事情时

> ID：15332510
> 
> 赞同：-6
> 
> 时间：2013-03-11T06:33:24.677
> 
> 标签：java

我有像 'Alian 12WE' "ANI1451' 'ANI 14-ti' 这样的字符串

那么有什么方法可以替换所有数字**和它们**之后的所有内容..但是当数字后面有连字符 (-) 时不会替换任何内容，所以输出应该看起来像 'Alian' 'ANI' 'ANI 14-ti'

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T06:49:03.040

```
String numberless = input.replaceAll("\\d+($|[^-].*)", ""); 
```

# html - 当我转到 html 页面中的子菜单时，无法在菜单上保持悬停状态

> ID：15332511
> 
> 赞同：1
> 
> 时间：2013-03-11T06:33:25.323
> 
> 标签：html, css, menu, submenu

我能够制作一个侧面菜单，当我将鼠标悬停在菜单项上时它会显示子菜单。现在我面临两个问题 1\. 当悬停到菜单项时，它会显示子菜单，但是当我悬停在子菜单上时，菜单项的悬停状态会消失。我需要它处于悬停状态。2.子菜单块显示时，显示为透明的，我可以看到它后面的内容。但是我怎样才能让它完全不透明呢？

我的代码如下...

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en-US">

<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<title>CSS Drop Down Menus</title>

<style type="text/css">
<!-- * {
    margin: 0;
    padding: 0;
}

body {
    font-family: "Trebuchet MS", Helvetica, Sans-Serif;
    font-size: 14px;
} -->

a {
    text-decoration: none;
    color: #FFFFFF;
}

a:hover {
    color: black;

}

#menu {
    position: relative;
    width:20%;
    height:400px;
    border:1px solid #000;
}

#menu a {
    display: block;
    width: 140px;
    background-image:url(menuitemhover.png);
}

#menu ul {
    list-style-type: none;
    padding-top: 5px;
}

#menu li {
    float: top;
    position: relative;
    padding: 3px 0;
    text-align: center;
}

#menu ul.sub-menu {
    display: none;
    position: absolute;
    top: -10px;
    left: 170px;
    padding: 10px;
    z-index: 90;
}

#menu ul.sub-menu li {
    text-align: top;
}

#menu li:hover > ul.sub-menu {
    display: block;
    border: 1px solid #ececec;
    background-image:url(menuitemhover.png);
}
</style>

</head>
<body>

<div id="menu">
    <ul>
        <li><a href="#">Home</a>

        <ul class="sub-menu" style="border:1px solid #d14836"}>
            <li><a href="#">Pages</a></li>
            <li><a href="#">Archives</a></li>
            <li><a href="#">New Posts</a></li>
            <li><a href="#">Recent Comments</a></li>
        </ul>

        </li>

        <li><a href="#">About</a>

        <ul class="sub-menu" style="border:1px solid #d14836">
            <li><a href="#">Get to know us</a></li>
            <li><a href="#">Find out what we do</a></li>
        </ul>

        </li>

        <li><a href="#">Contact</a>

        <ul class="sub-menu" style="border:1px solid #d14836">
            <li><a href="#">E-mail Us</a></li>
            <li><a href="#">Use Our Contact Form</a></li>
        </ul>

        </li>
    </ul>
</div>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T06:48:24.263

如果我理解正确，您还需要为`#menu li:hover > ul.sub-menu`and应用背景颜色`#menu a`。我更容易尝试使用非常明显的颜色进行测试，例如绿色或红色。测试完成后，只需更换您想要的颜色即可

# installshield-2010 - 使用 InstallShield 注册 COM Interop dll

> ID：15332512
> 
> 赞同：3
> 
> 时间：2013-03-11T06:33:26.147
> 
> 标签：installshield-2010

我试图从过去 10 天开始使用 Installshield 注册 COM 互操作 dll，但仍然没有运气。这是问题：

我有一个带有一些 ActiveX 控件和 dll 的 Installscript 项目。现在我想用 C#.net 在 VS2010 上创建的 .NET com Interop dll 替换一些 ActiveX。我正在使用批处理文件注册那些 com Interop dll。

所以问题是，如果 VS2010 安装在客户端计算机上，则应用程序可以正常工作，但如果 .NET Framework 安装在客户端计算机上而不是 VS2010 上，则 dll 会注册但应用程序无法正常工作并抛出错误“确保对象在系统注册表中输入”。知道我做错了什么吗？任何帮助将不胜感激。提前致谢。

# css - 我的电脑上 Chrome 也有样式表吗？

> ID：15332516
> 
> 赞同：1
> 
> 时间：2013-03-11T06:33:37.490
> 
> 标签：css, google-chrome, browser, stylesheet

例如，一个锚标签，如果没有明确地给出一个样式，那么它就已经有一个样式了。它是蓝色的，访问时变为紫色，并在悬停时更改光标。

**Chrome 从哪里加载这些样式？**

我的计算机上是否有*Google Chrome 样式表，或者由 chrome 通过*具有以下条目的 rel 链接访问：

```
...
a.visited {
    color:purple; /* just because */
}
a.hover {
    cursor:pointer;
}
... /* dozens of other CSS styles */ 
```

我在哪里可以找到这个*Google Chrome 样式表文件或在线资源？*

理想情况下，类似：**chrome://internals/styles**

或类似：**[http ://cdn.google.com/chrome/html.css](http://cdn.google.com/chrome/html.css)**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T15:25:55.850

所有浏览器都有一个`user agent stylesheet`. 这本质上是他们决定应用的默认样式，没有要求或官方标准，尽管浏览器总是会尝试按照您的预期行事（蓝色超链接，点击后紫色等）。

[webkit 一可以在这里找到](http://trac.webkit.org/browser/trunk/Source/WebCore/css/html.css)

[其他浏览器可以在这里找到](https://stackoverflow.com/questions/6867254/browsers-default-css-for-html-elements/6867287#6867287)

当您检查元素时，您会注意到某些样式。例如，检查网页上的任何元素，然后单击`<head>`标签。您会注意到以下内容：

![用户代理](../Images/fc16f85fa4ee53456920ee580abd9416.png)

A`head`就像任何其他元素一样，因此它通常会出现在您的网页上。显然这不是开发人员想要的，他们当然不希望在每个样式表中都隐藏头部，所以默认情况下用户代理会为他们做这件事。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T15:26:24.547

看看这两个链接。

[http://trac.webkit.org/browser/trunk/Source/WebCore/css/html.css](http://trac.webkit.org/browser/trunk/Source/WebCore/css/html.css)

[浏览器对 HTML 元素的默认 CSS](https://stackoverflow.com/questions/6867254/browsers-default-css-for-html-elements/6867287#6867287)

他们应该帮助你一点。

# ios - 可以在 flash 和 IOS 组件之间切换吗？

> ID：15332527
> 
> 赞同：0
> 
> 时间：2013-03-11T06:34:14.037
> 
> 标签：ios, flash

我有一个使用 Flash 的网站。有没有可能做这样的事情

伪代码

```
if (user_agent == iOS[ipad, iphone, what-have-you])
    show_ios_component
else
    show_flash_component 
```

因此，我的问题是：有没有办法构建在网站上运行的“应用程序”。我一直在 YouTube、MSNBC 等视频网站上看到这一点，即他们的视频播放器突然可以在 iOS 浏览器（如 safari 和 chrome）上运行在 iPad、iPhone 等上。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T11:05:59.723

Flash 不会在 IOS 上运行。在这种情况下，在网站上运行的应用程序是 .swf(Flash)。这些站点对视频使用 HTML5 后备，因此您将在浏览器中确定目标具有哪个操作系统，然后显示 swf 或 HTML5 组件。通常在 javascript 中执行此操作

```
var iOS = ( navigator.userAgent.match(/(iPad|iPhone|iPod)/g) ? true : false ); 
```

这个片段会告诉你 IOS 是真还是假。

# regex - 需要正则表达式从 Unix id 命令中提取组

> ID：15332529
> 
> 赞同：0
> 
> 时间：2013-03-11T06:34:19.093
> 
> 标签：regex, linux, unix, grep

我需要从 Unix id 命令输出中提取组名。我试过但无法编写正则表达式。id 命令的示例输出是：

```
uid=xxxxxx(amit) gid=xxxxxxx(xxxxxx) groups=xx(xxxx),xxxxxx(xxxxxx),xxxxx(xxxxx) 
```

之后如何提取括号中的字符串`groups=`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T08:39:50.093

如果您的版本支持它，最**简单的事情是：**`id`

```
$ id -nG
group1 group2 group3 
```

查看`man id`可用选项：

```
 -G, --groups
          print all group IDs
   -n, --name
          print a name instead of a number 
```

如果您确实想知道如何使用正则表达式进行解析，您可以执行以下操作。

这个正则表达式`(?<=\()[^)]+(?=\)(,|$))`将完成这项工作，它使用[正向超前和后向来](http://www.regular-expressions.info/lookaround.html)匹配括号内的字符串，后跟逗号或字符串的结尾。与`GNU grep`：

```
$ id | grep -Po '(?<=\()[^)]+(?=\)(,|$))'
group1
group2
group3 
```

如果您没有`GNU grep`哪个支持[PCRE](http://www.pcre.org/pcre.txt)，那么您可以放弃环视并使用以下内容进行过滤`sed`：

```
$ id | grep -Eo '\([^)]+\)(,|$)' | sed 's/[),(]//g'
group1
group2
group3 
```

# javascript - 在主干视图中将数据传递给事件处理程序

> ID：15332530
> 
> 赞同：4
> 
> 时间：2013-03-11T06:34:29.440
> 
> 标签：javascript, backbone.js

我正在使用 Backbonejs 开发一个网络应用程序。我有一个用例，我必须将 div1 的新位置传递给 Backbone 视图的双击事件处理程序。

我的代码看起来像

```
var MyView = Backbone.Views.extend({
    events: {
    'dblclick #div1' : 'div1ClickHandler' //here I want to pass new offset for #div1
   }
});

div1ClickHandler: function()
{
......
}

var myView = new MyView({model: myModel,el : #div1}); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-11T08:08:47.257

您可以这样做：在内部`div`您需要添加一个带有名称的新字段，`data-yourfieldName`并从 js 调用：

```
yourFunctionName: function(e) {
    e.preventDefault();
    var email = $(e.currentTarget).data("yourfieldName");

} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-11T08:09:15.333

您可以在视图本身中传递小部件，然后您将完全控制小部件。

```
var MyView = Backbone.Views.extend({
initialize: function(options) {
    this.widget = options.widget; // You will get widget here which you passed at the time of view creation 
}

events: {
    'dblclick #div1' : 'div1ClickHandler' //here I want to pass new offset for #div1
   }
});

div1ClickHandler: function() {
 // Query to fetch new position and dimensions using widget
  // update the respective element

}

var myView = new MyView({model: myModel, el: $('#div1'), widget: widgetInstance}); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-11T15:30:50.240

假设您的视图元素是 jquery 小部件的子元素，最好的办法可能是在点击处理程序中获取您需要的值：

```
var MyView = Backbone.Views.extend({
    events: {
    'dblclick #div1' : 'div1ClickHandler'
   }
});

div1ClickHandler: function()
{
  var $this = $(this);
  var $widget = $this.parents('.widget-selector:first');
  $this.offset($widget.offset());
  $this.height($widget.height());
  $this.width($widget.width());
}

var myView = new MyView({model: myModel,el : #div1}); 
```

如果 jquery 小部件始终是视图元素的直接父级，则可以替换`parents('.widget-selector:first')`为`parent()`; 否则，您需要替换`.widget-selector`为适用于 jquery 小部件的选择器。

# javascript - 移动 Web 应用程序的 Access-Control-Allow-Origin 问题

> ID：15332535
> 
> 赞同：0
> 
> 时间：2013-03-11T06:35:06.427
> 
> 标签：javascript, ajax, cordova, sencha-touch, sencha-touch-2

我正在使用 sencha touch 2.1 开发移动网络应用程序。目前我正在制作一个登录系统。为此，我正在从本地计算机向远程服务器发送 ajax 请求，其中包含用户名和密码。但我不断收到这个错误

```
XMLHttpRequest cannot load http://something.com/login.php?_dc=1362983327250\. Origin http://dev.vclouds.com is not allowed by Access-Control-Allow-Origin. 
```

在上面的错误`http://dev.vclouds.com`是我的`localhost`. 我以这种方式在我的 apache 配置中设置它。

这是我的ajax请求代码

```
Ext.Ajax.request({
        url: 'http://something.com/beta/webservice/login.php',
        method: 'post',
        params: {
            user_name: username,
            user_password: password
        },
        success: function (response) {
            var loginResponse = Ext.JSON.decode(response.responseText);
            console.log(loginResponse);
            if(loginResponse.success === "true") {
                me.sessionToken = loginResponse.sessionToken;
                me.signInSuccess();
            } else {
                me.signInFailure(loginResponse.message);
            }
        },
        failure: function (response) {
            me.sessionToken = null;
            me.signInFailure('Login failed');
        },
        callback: function (opts, success, response) {
            console.log('callback');
            console.log(opts);
            console.log(success);
            console.log(response);
        }
    }); 
```

我怎么解决这个问题？

**更新**

我也试过JsonP如下

```
Ext.data.JsonP.request({  //<-- line 35
        url: 'http://something.com/beta/webservice/login.php',
        callbackKey: 'callback',
        //method: 'post',
        params: {
            user_name: username,
            user_password: password
        },
        callback: function (opts, success, response) {
            console.log('callback');
            console.log(opts);
            console.log(success);
            console.log(response);
        }
    }); 
```

但我收到了这个错误

```
Uncaught TypeError: Cannot call method 'request' of undefined             Login.js:35 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T06:52:10.267

您需要使用[JsonP](http://docs.sencha.com/touch/2-1/#!/api/Ext.data.JsonP)而不是 Ajax。只有当您在同一个域中时才能使用 Ajax，即发出的请求和请求的资源应该在同一个域中。在这种情况下，您有不同的域，因此您需要用户`JsonP`请求。

他们使用 JsonP 的方式是，

```
 Ext.data.JsonP.request({
        url: 'http://something.com/beta/webservice/login.php',
        callbackKey: 'callback',
        params: {
            user_name: username,
            user_password: password
        },
        callback:function(result,response){
              console.log(response);
        }
   }); 
```

这里要考虑的重要一点是，`JsonP`数据将`GET`仅通过方法发送。你不能用`POST`方法。服务器还需要返回`callback`正在发送的请求，以便继续执行`callback`功能。[你可以在这里](https://stackoverflow.com/a/14868680/1211980)找到关于我的 ans 的一些信息。

同样对于CORS，即`Cross-Origin Resource Sharing`相关信息，请参阅我的另一个ans [here](https://stackoverflow.com/a/14779047/1211980)

**编辑**您需要添加所需的类。就像`requires:['Ext.data.proxy.JsonP']`在你的文件中一样。使用 JSONP引用[未定义的错误](https://stackoverflow.com/a/14662957/1211980)

# javascript - 使用 Javascript 拖放文件不起作用

> ID：15332536
> 
> 赞同：0
> 
> 时间：2013-03-11T06:35:08.253
> 
> 标签：javascript, jquery, drag-and-drop

我错过了一些东西，但我不确定它可能是什么......

我正在尝试将拖放文件的 Base 64 代码版本推送到文本区域中...但由于某种原因它无法正常工作...

有人愿意告诉我代码哪里出错了吗？这对我来说是新的领域...

```
$(document).ready(function() {

    function processFile(file){
        var o = $("#fileInfo");
        var reader = new FileReader();
        reader.onload = function(e) {
        o.innerHTML = e.target.result.replace(/</g, "&lt;").replace(/>/g, "&gt;");
        }
        reader.readAsURL(file);
    }

    // Sets up dataTransfer event
    jQuery.event.props.push('dataTransfer');

    // Bind drop to drop zone
    $('#drop-files').bind('drop', function(e) {
        // Prevents element from default function
        e.preventDefault();
        // Grabs list of files
        var files = e.dataTransfer.files;
        // Loop through files...
        $.each(files, function(index, file) {
            processFile(files[index]);
        });
    });
}); 
```

我真的不确定我在哪里搞砸了......最终我会将它推送到我自己选择的上传页面......但现在我想至少获得第一个文件的Base64代码来显示在该文本区域（“fileInfo”）中。

在这里欣赏任何想法...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T06:36:44.040

`o`表示`jQuery`对象，您无法访问其上的`DOM`对象属性`innerHTML`。调用[**html(**](http://api.jquery.com/html/) )`o`或使用`DOM`.`indexer`

改变

```
o.innerHTML = e.target.result.replace(/</g, "&lt;").replace(/>/g, "&gt;"); 
```

至

```
o.html(e.target.result.replace(/</g, "&lt;").replace(/>/g, "&gt;");) 
```

或者

```
o[0].innerHTML = e.target.result.replace(/</g, "&lt;").replace(/>/g, "&gt;"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T00:30:14.730

我才明白发生了什么...

该行：

```
reader.readAsURL(file); 
```

应该读：

```
reader.readAsURLData(file); 
```

*摇我的头*

但是我现在发现了另一个小问题，稍后我将发布...

谢谢你的努力...

# c - 在结构中填充 char 指针

> ID：15332541
> 
> 赞同：9
> 
> 时间：2013-03-11T06:35:49.190
> 
> 标签：c, string, pointers, struct, char

我已经定义了一个带有模型（char *model）和模型年份（int year）的“汽车”结构。我有一个函数可以创建一个新的汽车结构；但是，在复制 char 指针时会出现段错误。这应该为链表创建一个新节点。

```
Car *newCar(char *model, int year){
    Car *new = malloc(sizeof(Car));
    new->year = year;
    new->model = malloc(MAX_LENGTH*sizeof(char));
    strcpy(new->model, model);
    new->next = NULL;
    return new;
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2015-11-02T20:41:07.557

以供将来参考，此功能解决了我的问题...

```
Car *createCar(char *model, int year){
    Car *new = malloc(sizeof(Car));
    new->year = year;
    new->model = malloc(strlen(model)+1);
    strcpy(new->model, model);
    new->next = NULL;
    return new;
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-11T06:47:33.897

这里你的模型是字符指针。

但是 strcpy 需要两个参数 - 应该是`array`or`character pointer to which memory allocated by malloc or calloc`

但是您`strcpy();`将一个参数作为不被接受的字符指针。

所以让

`new->model = malloc(strlen(model) + 1)`然后写你的`strcpy ()`它会工作。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-03-11T10:34:41.560

你可以试试这个：

```
new->model = model == NULL ? NULL : strdup(model); 
```

如果模型为NULL，这可以防止您出现错误，否则会为您分配确切的空间量并对其进行strcopy；另外，这使您可以`free(new->model)`在所有情况下最终完成。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-11T06:48:33.193

看看下面的代码并将其与您的程序进行比较，相信您会发现您的程序有什么问题

```
#include <stdio.h>
#include <string.h>

typedef struct car{
char *model;
int year;
}Car;

Car * newCar(char *, int );

int main()
{

Car *benz = newCar("S-class",1990);

printf("\nModel = %s\n",benz->model);
printf("\nYear = %d\n",benz->year);

}

Car * newCar(char *model, int year)
{
    Car *new = malloc(sizeof(Car));
    new->year = year;
    new->model = malloc(strlen(model));
    strcpy(new->model, model);
    return new;
} 
```

# jquery - 让 apex_util.json_from_sql 返回 0.5

> ID：15332544
> 
> 赞同：1
> 
> 时间：2013-03-11T06:35:52.370
> 
> 标签：jquery, json, oracle, oracle-apex

我正在使用 Application Express 和 Jquery。如果我的字段包含 0.5 的值，Oracle 将其返回为 0.5，不带零。这会导致 jQuery JSON 解析器阻塞。

```
declare v_sql varchar2(4000);

begin
    v_sql := 'select 0.5 xyz from dual';
    apex_util.json_from_sql (v_sql);
end; 
```

回报：

```
{"row":[{"XYZ":.5}]} 
```

我想：

```
{"row":[{"XYZ":0.5}]} 
```

如果所有十进制字段都需要，是否有某种方法可以指示 json_from_sql 输入前导零？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T11:03:45.920

据我所知，json_from_sql 没有选项，令人讨厌的是，官方文档中仍然没有记录。可能在该字段上发生了隐式 to_char ，删除了前导零。
这是在 htmldb_util 的规范中，没有评论。

```
procedure json_from_sql (
    sqlq     in varchar2 default null,
    p_sub    in varchar2 default 'N',
    p_owner  in varchar2 default null); 
```

当您从 SQL 研讨会 > SQL 命令执行选择时，也不会显示零。
我知道这并不令人兴奋，但您可以考虑在您的数字周围放置一个 to_char：

```
v_sql := 'select TO_CHAR(0.5,''FM9990D0'') xyz from dual'; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T23:46:10.137

我通过在客户端进行字符串替换解决了这个问题

```
json = json.replace(/\:\./g, ":0."); 
```

在调用 parseJSON 之前

# c++ - 我们如何在英特尔 TBB 中同时运行两个不同的功能作为不同的任务？

> ID：15332546
> 
> 赞同：0
> 
> 时间：2013-03-11T06:35:53.447
> 
> 标签：c++, intel

假设我有两个函数 fun1() 和 fun2()。我想在英特尔线程构建块上同时运行它们。与在 openmp 中一样，我可以使用 #pragma omp 部分同时运行两个不同的功能。我们如何使用英特尔 TBB 做同样的事情？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-20T20:48:12.543

对于大多数用途来说，parallel_invoke 是实现此目的的好方法，并使用 TBB 提供的最高级别 API 来实现此目的。在 TBB 中还有其他方法可以使用较低级别的 API 来执行此操作，这可能对您有用。实现此目的的下一个较低级别的 API 方法是创建一个新的 task_group。更进一步，TBB 中最低级别的 API 允许您创建自己的任务树，这可以创建任意并行模式。如果您要走那么远，您需要的关键洞察力是**您可以一次创建多个根任务**。这在某些文档中并不明显，但是一旦您了解它，您就可以创建您可以想象的任何并行模式。

[使用英特尔® 线程构建模块优化游戏架构](http://software.intel.com/en-us/articles/optimizing-game-architectures-with-intel-threading-building-blocks)一文展示了使用此最低级别 API 来实现您描述的目的的示例，以及您可能会发现有用的其他几个示例。

# sql-server - HDFS 中的存储和可扩展性优势

> ID：15332548
> 
> 赞同：0
> 
> 时间：2013-03-11T06:36:02.850
> 
> 标签：sql-server, hadoop, storage, scalability, hdfs

我对HDFS的存储和扩展性有一定的怀疑----

首先，普通 SQL Server 数据文件上的 1 TB 也将约为 1 TB。等于 HDFS 上的 1 TB。那么使用 HDFS 有什么好处。

请澄清疑问（不知道是对是错）

第二

由于多个节点处理每个读/写操作，因此读取和写入的巨大性能增益来自并行性。

这个假设是否正确

请澄清疑惑

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T10:21:53.810

这个问题的措辞相当广泛，但我认为解决这个问题的最佳资源是 Konstantin Shvachko 关于[HDFS 可扩展性的论文：增长的限制](http://static.usenix.org/publications/login/2010-04/openpdfs/shvachko.pdf)。

# powershell - 在远程桌面上创建快捷方式，但快捷方式是使用“文件”而不是“文件夹”作为“目标类型”创建的

> ID：15332549
> 
> 赞同：1
> 
> 时间：2013-03-11T06:36:06.240
> 
> 标签：powershell, powershell-remoting

我正在尝试在此处的域中的远程桌面上创建快捷方式，并且我是域管理员。如果我直接在目标机器上运行以下代码，则可以创建快捷方式并能够将我引导到目标路径。

```
$shortcutpath3 =  "c:\Users\Public\Desktop\Shortcuts to Test Custom\VV 1211 -TC.lnk"
$WshShell3 = New-Object -comObject WScript.Shell
$Shortcut3 = $WshShell3.CreateShortcut($shortcutpath3)
$Shortcut3.TargetPath = "\\machine\testcustom\"
$Shortcut3.Save() 
```

我将此脚本保存为 test.ps1，在不同的机器上使用以下代码运行它。代码结束时没有任何错误/警告，并且使用我指定的属性在目标机器上创建快捷方式。但它不能把我带到目标位置，它实际上要求我选择一个程序来打开那个文件。我比较了2个快捷方式的属性，发现被破坏的快捷方式的“目标类型”是“文件”，而它是“文件夹”，这是一个很好的快捷方式。

```
Invoke-Command -ComputerName TARGETSERVER -FilePath test.ps1 
```

知道如何解决这个问题吗？为什么会这样？感谢！！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-17T18:47:01.580

我遇到了同样的问题，我使用 Get-Item 使其工作。尝试这个：

```
$targetPath = Get-Item("\\machine\testcustom\")
$WshShell3 = New-Object -comObject WScript.Shell
$Shortcut3 = $WshShell3.CreateShortcut($shortcutpath3)
$Shortcut3.TargetPath = $targetPath.FullName
$Shortcut3.Save() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T10:13:11.113

由于您是域管理员，我强烈建议您使用[Group Policy Preference](http://4sysops.com/archives/group-policy-preferences-best-practices/)执行此操作。您可以将快捷方式创建限制为特定用户/组/计算机/等。通过[项目级定位](http://technet.microsoft.com/en-us/library/cc733022.aspx)。

# java - 在 jFrame 中禁用最大化并使用鼠标调整大小

> ID：15332561
> 
> 赞同：9
> 
> 时间：2013-03-11T06:36:57.067
> 
> 标签：java, swing, jframe

`JFrame`带有隐藏或没有最大化按钮，但应该能够使用鼠标重新调整大小（单击并拖动`jFrame`边框）。`setResizable(false)`仅禁用最小化按钮，但无法使用鼠标重新调整大小。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T05:52:08.253

我个人想不出允许调整大小而不允许最大化的理由，但这里有一个示例，说明如何在允许调整大小和最小化的同时防止最大化 JFrame。在 windows 中测试，在所有其他平台上未经测试。使用 setMaximizedBounds() 最小化全屏闪烁。

```
 final JFrame jFrameNoMax = new JFrame() {
        {
            setMaximizedBounds(new Rectangle(0, 0));
            addWindowStateListener(new WindowStateListener() {
                public void windowStateChanged(final WindowEvent e) {
                    if (e.getNewState() == MAXIMIZED_BOTH) {
                        setExtendedState(NORMAL);
                    }
                }
            });
        }
    };

    // Tester
    jFrameNoMax.setDefaultCloseOperation(JFrame.DISPOSE_ON_CLOSE);
    jFrameNoMax.setSize(300, 300);
    jFrameNoMax.setLocation(300, 300);
    jFrameNoMax.setVisible(true); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-06-22T03:29:37.987

您可以采取以下步骤：

-右键单击JFrame -选择属性 -取消选中可调整大小的复选框 -关闭属性 -运行程序

见附图： [![冻结最大化按钮](../Images/aab2075f03d19197f1210f2bc93e9f0c.png)](https://i.stack.imgur.com/77vfe.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-12T04:10:19.667

一种选择可能是使用 a`JDialog`而不是 a `JFrame`。这允许窗口可以手动调整大小但不能最大化。这样做的唯一问题是您丢失了最小化和最大化按钮。这对您的应用程序可能是也可能不是问题。

# java - Solr 4.0 中如何自动删除事务日志文件？

> ID：15332566
> 
> 赞同：4
> 
> 时间：2013-03-11T06:37:05.647
> 
> 标签：java, solr

在 Solr 4.0 中，在添加文档时会创建一个事务日志文件。提交文档后，该位置中会出现一个事务日志文件。如果事务日志文件很大并且提交的事务该日志文件占用不必要的空间。如何删除已提交的事务日志文件，如果不再使用它会自动删除吗？

是否有任何配置可以设置事务日志的最大大小？如果是这样，一旦达到事务日志文件的最大大小，是否会创建新的事务日志文件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T11:39:09.790

从这个问题 - [Solr 事务日志问题](http://lucene.472066.n3.nabble.com/Solr-Transaction-Log-Question-td3776301.html)，在 Solr 用户邮件列表中：

> **问：**事务日志会增长到多大，应该保留多长时间？
> 
> **答：**我们保留了足够的日志以满足至少 100 次更新回溯。不需要的日志文件会自动删除。当硬提交完成时，我们创建一个新的日志文件（因为我们知道正常的索引文件已经同步，因此我们不再需要更新日志来保证持久性）。

发出硬提交是将事务日志保持在可管理大小的关键。您可以将 Solr 配置为根据时间或文档计数自动执行提交 - 有关更多详细信息，请参阅 Solr Wiki 上的[更新处理程序部分。](http://wiki.apache.org/solr/SolrConfigXml#Update_Handler_Section)

# django - Django 过滤

> ID：15332568
> 
> 赞同：0
> 
> 时间：2013-03-11T06:37:09.523
> 
> 标签：django

我一直在尝试过滤特定模块的用户名。

我有一个名为 Person 的模块，它与 User 相关联。我可以获取所有 Person 对象，但我怎样才能获取他们的用户名。

我的解决方案是使用 User.objects.all() 但我不想抓住每个人都喜欢 admin account 。我只想获取 Person 中的所有用户及其关联的用户名。所以我可以在我的函数和模板中使用它们。

对不起，如果这没有意义，我正在尽力解释情况我的models.py

```
class Person(models.Model):
    user = models.ForeignKey(User)
    name = models.CharField(max_length=100)
    image = models.FileField(upload_to="images/",blank=True,null=True) 
```

我的观点.py

```
def Everyone(request):
    everyone = Person.objects.all()
    return render('everyone.html',{'everyone':everyone}) 
```

每个人.html

```
 {% if everyone %}
     {% for one in everyone %}
     <a href ="{% url world:profile username %}">{{one.name}}
     {% endfor %}
 {% endif %} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T06:39:12.107

```
{% if everyone %}
     {% for one in everyone %}
     <a href ="{% url world:profile one.user.username %}">{{one.user.username}}
     {% endfor %}
{% endif %} 
```

# iphone - 单击按钮时将单元格动态添加到 UItableview

> ID：15332569
> 
> 赞同：1
> 
> 时间：2013-03-11T06:37:09.560
> 
> 标签：iphone, uitableview

我有 2 个 UITextField 和一个按钮，当我在填充之后单击按钮时，我必须在表格视图单元格中以相同格式获取 UItextfields 和按钮，当我填充这些并单击按钮时，必须将相同的文本字段添加到下一个单元格，保持上述单元格相同并且文本字段中的数据也不会被删除

我是这个编程的新手，我不知道如何在单击按钮时向单元格添加视图，帮助我解决这个问题。

```
 -(IBAction)btnaddbusiness:(UIButton*)sender
{
    tableView=[[UITableView alloc]initWithFrame:CGRectMake(0, 370, 300, 30)];

    tableView.delegate=self;
    tableView.dataSource=self;
    [testscroll addSubview:tableView];
        i=i+1;
    if(sender.tag==1 || i==1)
    {

        if([txtprovEmail1.text isEqualToString:@""] && [txtprovName1.text isEqualToString:@""])
        {

        }
        else
        {
            testscroll.contentSize=CGSizeMake(320, 500);
            view1=[[UIView alloc]initWithFrame:CGRectMake(0, 0, 300, 30)];

            txtprovName2 =[[UITextField alloc]init];
            [txtprovName2 setFrame:CGRectMake(0,0,116, 30)];
            [txtprovName2 setBorderStyle:UITextBorderStyleRoundedRect];
            [txtprovName2 setAutocorrectionType:UITextAutocorrectionTypeNo];
            txtprovName2.textAlignment=UITextAlignmentCenter;
            txtprovName2.placeholder=@"Provider Name";
            txtprovName2.font=[UIFont fontWithName:@"System" size:11];
            txtprovName2.userInteractionEnabled=YES;
            [view1 addSubview:txtprovName2];

            txtprovEmail2 =[[UITextField alloc]init];
            [txtprovEmail2 setFrame:CGRectMake(130, 0,116, 30)];
            [txtprovEmail2 setBorderStyle:UITextBorderStyleRoundedRect];
            [txtprovEmail2 setAutocorrectionType:UITextAutocorrectionTypeNo];
            txtprovEmail2.textAlignment=UITextAlignmentCenter;
            txtprovEmail2.placeholder=@"Provider Email";
            txtprovEmail2.font=[UIFont fontWithName:@"System" size:11];
            txtprovEmail2.userInteractionEnabled=YES;
            [view1 addSubview:txtprovEmail2];

            btnRemove1 = [UIButton buttonWithType:UIButtonTypeRoundedRect];
            btnRemove1.frame = CGRectMake(268, 0,80, 30);
            [btnRemove1 setTitle:@"Remove" forState:UIControlStateNormal];
            [btnRemove1.titleLabel setFont:[UIFont fontWithName:@"Helvetica-Bold" size:14]];
            // [ btnRemove1 setBackgroundImage:[UIImage imageNamed:@"background-button.png"] forState:UIControlStateNormal];
            btnRemove1.titleLabel.textColor=[UIColor blackColor];
            btnRemove1.tag=1;

           // [btnRemove1 addTarget:self action:@selector(btnRemove1Clicked)                forControlEvents:UIControlEventTouchUpInside];
           [ view1 addSubview: btnRemove1];

          /*  btnsubmit = [UIButton buttonWithType:UIButtonTypeRoundedRect];
            btnsubmit.frame = CGRectMake(40, 470,80, 30);
            [btnsubmit setTitle:@"Submit" forState:UIControlStateNormal];
            [btnsubmit.titleLabel setFont:[UIFont fontWithName:@"Helvetica-Bold" size:14]];

            btnsubmit.titleLabel.textColor=[UIColor blackColor];

            [btnsubmit addTarget:self
                          action:@selector(btnsubmitclicked)
                forControlEvents:UIControlEventTouchUpInside];
            [ testscroll addSubview: btnsubmit];*/

          /*
            btnreset = [UIButton buttonWithType:UIButtonTypeRoundedRect];
            btnreset.frame = CGRectMake(100, 470,80, 30);
            [btnreset setTitle:@"Reset" forState:UIControlStateNormal];
            [btnreset.titleLabel setFont:[UIFont fontWithName:@"Helvetica-Bold" size:14]];

            btnreset.titleLabel.textColor=[UIColor blackColor];

            [btnreset addTarget:self
                         action:@selector(btnResetclicked)
               forControlEvents:UIControlEventTouchUpInside];
            [ testscroll addSubview: btnreset];

            */

            sender.tag=2;

        }
    }

    else if(sender.tag==2|| i==2)
    {

        if(txtprovEmail2.text==NULL && txtprovName2.text==NULL)
        {

        }
        else
        {

            testscroll.contentSize=CGSizeMake(320, 600);
            testscroll.pagingEnabled=YES;
            view2=[[UIView alloc]initWithFrame:CGRectMake(0, 0, 300, 30)];
            txtprovName3 =[[UITextField alloc]init];
            [txtprovName3 setFrame:CGRectMake(20, 470,94, 30)];
            [txtprovName3 setBorderStyle:UITextBorderStyleRoundedRect];
            [txtprovName3 setAutocorrectionType:UITextAutocorrectionTypeNo];
            txtprovName3.textAlignment=UITextAlignmentCenter;
            txtprovName3.placeholder=@"Provider Name";
            txtprovName3.font=[UIFont fontWithName:@"System" size:11];
            txtprovName3.userInteractionEnabled=YES;
            [view2 addSubview:txtprovName3];

            txtprovEmail3 =[[UITextField alloc]init];
            [txtprovEmail3 setFrame:CGRectMake(118, 470,92, 30)];
            [txtprovEmail3 setBorderStyle:UITextBorderStyleRoundedRect];
            [txtprovEmail3 setAutocorrectionType:UITextAutocorrectionTypeNo];
            txtprovEmail3.textAlignment=UITextAlignmentCenter;
            txtprovEmail3.placeholder=@"Provider Email";
            txtprovEmail3.font=[UIFont fontWithName:@"System" size:11];
            txtprovEmail3.userInteractionEnabled=YES;

            [view2 addSubview:txtprovEmail3];

            btnRemove2 = [UIButton buttonWithType:UIButtonTypeRoundedRect];
            btnRemove2.frame=CGRectMake(210, 470, 80, 30) ;
            [btnRemove2 setTitle:@"Remove" forState:UIControlStateNormal];
            [btnRemove2.titleLabel setFont:[UIFont fontWithName:@"Helvetica-Bold" size:14]];
            // [ btnRemove1 setBackgroundImage:[UIImage imageNamed:@"background-button.png"] forState:UIControlStateNormal];
            btnRemove2.titleLabel.textColor=[UIColor blackColor];

           /* [btnRemove2 addTarget:self    action:@selector(btnRemove2Clicked)
                 forControlEvents:UIControlEventTouchUpInside];*/
            btnRemove2.tag=2;
            [view2 addSubview:btnRemove2];

            [btnreset removeFromSuperview];
            [btnsubmit removeFromSuperview];

            [ btnsubmit setFrame:CGRectMake(80, 510, 50, 30)];
            [btnreset setFrame:CGRectMake(80, 510, 50, 30)];

            sender.tag=3;

        }
    }

    else if(sender.tag==3 || i==3)
    {

        if(txtprovEmail3.text==NULL && txtprovName3.text==NULL)
        {

        }
        else
        {

            testscroll.contentSize=CGSizeMake(320, 700);

            txtprovName4 =[[UITextField alloc]init];
            [txtprovName4 setFrame:CGRectMake(20, 510,94, 30)];
            [txtprovName4 setBorderStyle:UITextBorderStyleRoundedRect];
            [txtprovName4 setAutocorrectionType:UITextAutocorrectionTypeNo];
            txtprovName4.textAlignment=UITextAlignmentCenter;
            txtprovName4.placeholder=@"Provider Name";
            txtprovName4.font=[UIFont fontWithName:@"System" size:11];
            txtprovName4.userInteractionEnabled=YES;
            [testscroll addSubview:txtprovName4];

            txtprovEmail4 =[[UITextField alloc]init];
            [txtprovEmail4 setFrame:CGRectMake(118, 510,92, 30)];
            [txtprovEmail4 setBorderStyle:UITextBorderStyleRoundedRect];
            [txtprovEmail4 setAutocorrectionType:UITextAutocorrectionTypeNo];
            txtprovEmail4.textAlignment=UITextAlignmentCenter;
            txtprovEmail4.placeholder=@"Provider Email";
            txtprovEmail4.font=[UIFont fontWithName:@"System" size:11];
            txtprovEmail4.userInteractionEnabled=YES;

            [testscroll addSubview:txtprovEmail4];

            btnRemove3 = [UIButton buttonWithType:UIButtonTypeRoundedRect];
            btnRemove3.frame = CGRectMake(210, 510,80, 30);
            [btnRemove3 setTitle:@"Remove" forState:UIControlStateNormal];
            [btnRemove3.titleLabel setFont:[UIFont fontWithName:@"Helvetica-Bold" size:14]];
            // [ btnRemove1 setBackgroundImage:[UIImage imageNamed:@"background-button.png"] forState:UIControlStateNormal];
            btnRemove3.titleLabel.textColor=[UIColor blackColor];

            [btnRemove3 addTarget:self    action:@selector(btnRemove3Clicked)
                 forControlEvents:UIControlEventTouchUpInside];
            btnRemove3.tag=3;
            [testscroll addSubview:btnRemove3];

            [btnreset removeFromSuperview];
            [btnsubmit removeFromSuperview];

            [ btnsubmit setFrame:CGRectMake(40, 550, 50, 30)];
            [btnreset setFrame:CGRectMake(100, 550, 50, 30)];
            sender.tag=4;

        }
    }
    else if(sender.tag==4||i==4)
    {

        if(txtprovEmail4.text==NULL && txtprovName4.text==NULL)
        {

        }
        else
        { testscroll.contentSize=CGSizeMake(320, 800);
            txtprovName5 =[[UITextField alloc]init];
            [txtprovName5 setFrame:CGRectMake(20, 550,94, 30)];
            [txtprovName5 setBorderStyle:UITextBorderStyleRoundedRect];
            [txtprovName5 setAutocorrectionType:UITextAutocorrectionTypeNo];
            txtprovName5.textAlignment=UITextAlignmentCenter;
            txtprovName5.placeholder=@"Provider Name";
            txtprovName5.font=[UIFont fontWithName:@"System" size:11];
            txtprovName5.userInteractionEnabled=YES;
            [testscroll addSubview:txtprovName5];

            txtprovEmail5 =[[UITextField alloc]init];
            [txtprovEmail5 setFrame:CGRectMake(118, 550,92, 30)];
            [txtprovEmail5 setBorderStyle:UITextBorderStyleRoundedRect];
            [txtprovEmail5 setAutocorrectionType:UITextAutocorrectionTypeNo];
            txtprovEmail5.textAlignment=UITextAlignmentCenter;
            txtprovEmail5.placeholder=@"Provider Email";
            txtprovEmail5.font=[UIFont fontWithName:@"System" size:11];
            txtprovEmail5.userInteractionEnabled=YES;

            [testscroll addSubview:txtprovEmail5];

            btnRemove4 = [UIButton buttonWithType:UIButtonTypeRoundedRect];
            btnRemove4.frame = CGRectMake(210, 550,80, 30);
            [btnRemove4 setTitle:@"Remove" forState:UIControlStateNormal];
            [btnRemove4.titleLabel setFont:[UIFont fontWithName:@"Helvetica-Bold" size:14]];
            // [ btnRemove1 setBackgroundImage:[UIImage imageNamed:@"background-button.png"] forState:UIControlStateNormal];
            btnRemove4.titleLabel.textColor=[UIColor blackColor];

            [btnRemove4 addTarget:self    action:@selector(btnRemove4Clicked)
                 forControlEvents:UIControlEventTouchUpInside];
            btnRemove4.tag=4;
            [testscroll addSubview:btnRemove4];
            testscroll.scrollEnabled=YES;

            [btnreset removeFromSuperview];
            [btnsubmit removeFromSuperview];

            [ btnsubmit setFrame:CGRectMake(40, 690, 50, 30)];
            [btnreset setFrame:CGRectMake(100, 690, 50, 30)];

        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T07:05:07.883

[您可以从这里](https://developer.apple.com/library/ios/#samplecode/UICatalog/Introduction/Intro.html)下载示例应用程序

以下链接也将对您有所帮助。

[UITableViewCell 帮助中的 UITextField](https://stackoverflow.com/questions/4568214/uitextfield-in-uitableviewcell-help)

[如何将 UITextField 放在 UITableViewCell 内（分组）？](https://stackoverflow.com/questions/2487413/how-to-put-a-uitextfield-inside-of-a-uitableviewcell-grouped)

**编辑：**

您只需要**重新加载**（`[tablename reloadData];`）您的表在 `-(IBAction)btnaddbusiness:(UIButton*)sender`.

添加您正在执行的视图应该在 `rowForIndexPath:`.

您可以做的是在您的函数中将一个变量**布尔值**设置为**TRUE**并**重新加载**您的表，然后`rowForIndexPath`检查该变量是否为**真**，然后将您的视图的**隐藏**属性设置为**False**，反之亦然。

# c# - WPF 中的用户控件与控件模板

> ID：15332574
> 
> 赞同：4
> 
> 时间：2013-03-11T06:37:22.403
> 
> 标签：c#, wpf, user-controls, controltemplate

我最近审查了某人的代码并遇到了一个用户控件，其 UI 就像这个屏幕截图

![在此处输入图像描述](../Images/bd9c89e12f47a17b8b8b016b94b3840a.png)

此控件的代码隐藏文件中没有代码，我想我们可以将此用户控件的所有 xaml 代码移动到控件模板并在需要时使用它。我想知道这是否是一个好习惯，我应该这样做吗？

一种方法比另一种方法有什么性能和设计优势吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T08:13:43.650

由于最终这将是一个 UserCotrol，现在假设其他一些在其他模块上工作的团队需要此控件，并且他们希望在此控件中加载 Datagrid 的事件，现在如果您在 usercontrol 中将其创建为 datagrid，那么他们可以轻松访问该 datagrid并订阅 Load Event 给它。如果您将在 ControlTemplate 中执行此操作，那么即使不是不可能，也会很困难。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T07:19:53.133

> 我想知道这是否是一个好习惯

所以首先我们应该定义好的实践？我将给出敏捷良好实践的观点：仅在需要时才这样做。因此，对您而言，答案就在您的问题中：

> 在需要的地方使用它

其他地方需要吗？如果是这样，请使用控制模板。如果没有，请使用用户控件，无论如何这对于下一个开发人员来说将更具可读性（保持愚蠢和简单）。

# java - 设置布局以调整使用 netbeans 设计的 java 中的控件大小

> ID：15332575
> 
> 赞同：1
> 
> 时间：2013-03-11T06:37:23.400
> 
> 标签：java, swing, netbeans, netbeans-7

我正在使用 NetBeans 设计 swing JFrame 表单。我不确定 JFrame 表单中的布局设置。当我们更改窗口的分辨率时，表单不会自动调整

> 但我希望表单上设计的表单和控件应该自动调整大小。这怎么可能

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T19:17:58.457

您可以通过右键单击面板来更改 LayoutManager。查看此[布局管理器指南](http://docs.oracle.com/javase/tutorial/uiswing/layout/visual.html)以找到最适合您的程序的。

或者：对于默认的 NetBeans 布局管理器，您需要“锚定”组件以自动调整大小。并将它们设置为可调整大小（但这是默认设置）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-06-03T15:12:10.207

对于您要在图像下方添加布局的任何组件，将指导您：

[![在此处输入图像描述](../Images/639018df0acfe2fba1777ed6394b2d5b.png)](https://i.stack.imgur.com/YZhlD.png)

您需要选择适合您要求的布局。

您还可以自定义布局，以做到这一点：

[![在此处输入图像描述](../Images/9f1e3799aefe4b3e4b1fffd83bd52d13.png)](https://i.stack.imgur.com/ibIQy.png)

您也可以手动进行，也可以从**自定义代码**更改属性。

要像上图那样右键单击组件并转到自定义代码（不能这样做`JFrame`）。

# android - [android]微调器 onItemSelected 和可见性

> ID：15332576
> 
> 赞同：2
> 
> 时间：2013-03-11T06:37:25.393
> 
> 标签：android, spinner, visibility

我尝试通过微调器上的选择项触发 editText 和 TextView 可见性。我使用下面的代码，但它不起作用。该项目应该第一次消失，当我在微调器上选择项目时，editText 和 TextView 将出现。发生的情况是 editText 和 TextView 第一次出现，当我选择另一个项目时，editText 和 TextView 不会消失。

```
ArrayAdapter<String> adapter2 = new ArrayAdapter<String>
    (this, android.R.layout.simple_spinner_dropdown_item, SP_KMA);
    Spiner_KMA.setAdapter(adapter2);

    Spiner_KMA.setOnItemSelectedListener(new OnItemSelectedListener() {

        @Override
        public void onItemSelected(AdapterView<?> arg0, View arg1,
                int arg2, long arg3) {
            // TODO Auto-generated method stub
            String select = arg0.getSelectedItem().toString();
            if(select.equalsIgnoreCase("ganti meter")){
                txt_ganti_meter.setVisibility(1);
                et_id_ganti_meter.setVisibility(1);
            }else{
                txt_ganti_meter.setVisibility(2);
                et_id_ganti_meter.setVisibility(2);
            }

        }

        @Override
        public void onNothingSelected(AdapterView<?> arg0) {
            // TODO Auto-generated method stub

        }

    }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T06:47:06.617

像这样设置可见性

```
txt_ganti_meter.setVisibility(View.VISIBLE);

txt_ganti_meter.setVisibility(View.GONE); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T06:51:27.280

目前你正在传递错误的常量值来`setVisibility`制作视图 `INVISIBLE`或 `VISIBLE`：

如在[视图](http://developer.android.com/reference/android/view/View.html#GONE)类中：

> 常量值：2 (0x00000002)：视图对于可访问性并不重要。

和

> 常量值：1 (0x00000002)：视图对于可访问性很重要。

你将通过`0`并使`4`View Visible 或 InVisible

**对于可见：** `setVisibility(0)`或`setVisibility(View.VISIBLE)`

**对于隐形：** `setVisibility(4)`或`setVisibility(View.INVISIBLE)`

**对于 GONE ：** `setVisibility(8)`或`setVisibility(View.GONE)`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-11T06:51:45.400

根据需要使用此 txt_ganti_meter.setVisibility(View.INVISIBLE) 或 txt_ganti_meter.setVisibility((View.VISIBLE)

# c++ - C++程序在文件中查找和替换字符串

> ID：15332581
> 
> 赞同：0
> 
> 时间：2013-03-11T06:37:56.190
> 
> 标签：c++

这是一个初学者的问题。我试图在文本文件中找到一个字符串并将其替换回同一个文件。以下代码可以很好地将文件内容收集到缓冲区中并替换字符串。但是当我尝试将数据保留回同一个文件时，它充满了一些垃圾字符。请让我知道我做错了什么？

```
#include <iostream>
#include <fstream>
using namespace std;

const char *fileName = "Test.dat";

int main () {

// This is where we'll put the stuff we read from file
char buffer[ 100 ];

ifstream finout(fileName, ios_base::in | ios_base::out | ios_base::binary);

if(!finout.is_open())
{
    cout << "Can not open file " << endl;
    return(1);
}

while (finout.getline(buffer, sizeof(buffer))
{
    string g( buffer );
    string search = "am";
    string replace = "was";
    long j;

    if ( (j = g.find(str2)) != string::npos)
    {    
        g.replace(g.find(str2), str2.length(), "str");
        finout.write((char *) &g, sizeof(g)); //This won't work 

    }

cout << g << "\n";
finout.close();
return 0;
} 
```

我的 Test.dat 文件包含以下信息：

```
Hello, How are you?
I am fine. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T06:55:03.673

*   当您作为文本文件进行读/写时，请勿通过以下方式打开它`ios_base::binary`
*   你把`finout.close();`你的阅读循环放在里面，所以它只适用于一行。
*   当您以文本形式读取/写入文件时，请使用文本流方法和运算符。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T06:57:32.300

您正在尝试使用`sizeof()`运算符读取字符串的大小。

这不起作用，因为它是一个关键字，它为您提供对象或类型的非动态大小。

您应该使用`g.size()`来访问字符串大小！

但首先，您可以处理流处理您的错误：

```
finout << g; 
```

将完成这项工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-09-10T11:15:51.567

首先，您要同时读取和写入文件，因此使用 fstream 而不是 ifstream。其次，你有一个文本文件，所以不要使用 ios_base::binary Third (char*) &g where g is std::string 不起作用，请改用 g.c_str() 。（只需写 finout << g;

现在您可以开始考虑实施...

# git - TFS Shelve 与 DVCS（例如 Git、Mercurial）离线提交

> ID：15332582
> 
> 赞同：3
> 
> 时间：2013-03-11T06:38:02.103
> 
> 标签：git, mercurial, dvcs

在向使用 TFS 的同事介绍 DVCS 概念时，我遇到了以下问题：

> “这些‘离线提交’与 TFS 搁置有何不同？我可以使用它来备份我的更改、回滚到特定更改并将我当前的更改与搁置的变更集进行比较。”

我得到的唯一答案是 TFS 搁置要求您连接到 DVCS 不需要的中央服务器。

你会怎么回答？DVCS 的“本地提交”方法相对于 TFS 货架有什么明显优势？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-08-15T13:26:29.127

主要区别在于 DVCS 离线提交更加灵活。它们允许您准备一系列变更集，然后您可以一次性将其作为一个组发布。您还可以对它们进行一些巧妙的操作，例如重新排序、组合、拆分它们，甚至完全删除其中的一些。另一方面，使用 TFS 搁置集，您一次只能使用一个变更集在本地工作。

假设您进行了十次单独的更改，编号为 1 到 10。在 DVCS 中，您只需在每次更改后签入，然后在完成后通过单个操作推送到原点。使用 TFS，您最终会得到十个搁置集，每个搁置集都包含您的工作与存储库中最新版本之间的差异。它们看起来像这样：

1.  变化 1
2.  变化 1 + 变化 2
3.  更改 1 + 更改 2 + 更改 3

等等。

这意味着您不能只使用单个命令（如 中）发布一系列变更集`git push origin master`，您必须一次取消搁置它们，然后将它们全部单独签入。仅此一项就够麻烦了，但最重要的是，第二个和后续的变更集都会给您带来合并冲突，因为您正在重新应用已经应用的早期变更。

此外，您控制发布哪些更改的选项受到严重限制。如果您只想签入更改 1、2、4、6-8 和 10，而忽略更改 3、5 和 9，则无法执行此操作。您也无法重新排序它们，也无法压缩不连续的更改范围。

这样做的结果是，在 TFS 中，即使有搁置，坚持每小时几次在本地签入的最佳做法是不切实际的，确保每次签入只进行一次更改，然后在你之前整理发布您的更改。结果将是一个由更大、更臃肿的签入组成的历史记录，这些签入更难理解，也不太有用，例如，如果您需要追踪引入错误的修订版。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T19:12:22.700

从未使用过 TFS，但我相信我明白了要点。

不同之处在于您可以在*本地*进行等效操作，例如在飞机上。为未完成的工作设置分支，使用标签标记您以后可能想要参考的开发中的任何点。可以混合和匹配，将当前提示与另一个分支、该分支上的前一个标签、另一个分支上的标签、任何两个标签，甚至是你想以某种方式选择的随机提交进行比较。无需提前计划在开发线上什么是有用的“标记”。对于历史的直观视图`gitk`是一个很大的帮助。一个很好的优势是没有人需要了解你的笨手笨脚和愚蠢的实验，所有这些都是你想要的隐私。您当然可以设置远程存储库用于备份目的（不多于`git`和`ssh`为此需要在远程端，并且需要`git push`有一些规律性的纪律），并且只将您希望其他人看到的内容发送到官方的公共存储库。

# ruby-on-rails - SCRIPT14：没有足够的存储空间来完成此操作，IE 上的 ckeditor gem 错误

> ID：15332583
> 
> 赞同：0
> 
> 时间：2013-03-11T06:38:03.210
> 
> 标签：ruby-on-rails, internet-explorer, ckeditor

我在我的 Rails 应用程序中使用 ckeditor gem，但它不能在 IE 上运行。它给出了一个错误

```
SCRIPT14: Not enough storage is available to complete this operation.

ckeditor.js?body=1, line 63 character 140 
```

我在谷歌上搜索并看到了一些结果（[http://krasimrtsonev.com/blog/article/CKEditor-Not-enough-storage-is-available-to-complete-this-operation](http://krasimirtsonev.com/blog/article/CKEditor-Not-enough-storage-is-available-to-complete-this-operation)和[http://ckeditor.com/ forums/Support/Not-enough-storage-error-IE7IE8](http://ckeditor.com/forums/Support/Not-enough-storage-error-IE7IE8)）但我不明白如何使用 gem“ckeditor_rails”、“~> 4.0.2”在我的 Rails 应用程序上实现它。请帮忙！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T07:04:46.507

根据[http://krasimrtsonev.com/blog/article/CKEditor-Not-enough-storage-is-available-to-complete-this-operation](http://krasimirtsonev.com/blog/article/CKEditor-Not-enough-storage-is-available-to-complete-this-operation)

如何实施？

1) 请`vendor/assets/javascripts/ckeditor/ckeditor.js`从 ckeditor_rails gem 复制到`app/assets/javascripts/ckeditor/ckeditor.js`您的项目。

2) 找到

```
if(this.$.createStyleSheet)this.$.createStyleSheet 
```

并替换为

```
if(false)this.$.createStyleSheet 
```

3）清理浏览器的缓存并重新启动服务器以查看它是否有效。

老实说，我不会为 IE 尝试它。但这就是 Rails 资产管道的工作方式。

新版本 v4.1 也有这段代码。CKEDITOR 团队可能无法解决该错误。

另见[https://github.com/tsechingho/ckeditor-rails/issues/17](https://github.com/tsechingho/ckeditor-rails/issues/17)

# java - 使用 setValueAt() 设置 jtable 列的值

> ID：15332585
> 
> 赞同：0
> 
> 时间：2013-03-11T06:38:13.227
> 
> 标签：java, swing, netbeans, jtable

我正在尝试使用 netbeans 中的 setValueAt() 设置 jtable 列的值，但它不起作用。以下是我使用“自定义代码”选项设置的内容。显示 null 的列是布尔类型，即它们可以被选中和不被选中。我想从数据库中读取值并相应地设置列值。

```
pref_table = new javax.swing.JTable();

pref_table.setModel(new javax.swing.table.DefaultTableModel(
new Object [][] {
    {"MONDAY", null, null, null, null},
    {"TUESDAY", null, null, null, null},
    {"WEDNESDAY", null, null, null, null},
    {"THURSDAY", null, null, null, null},
    {"FRIDAY", null, null, null, null},
    {"SATURDAY", null, null, null, null}
},
new String [] {
    "DAY", "9 A.M-11 A.M", "11 A.M-1 P.M", "1 P.M-3 P.M", "3 P.M-5 P.M"
}
) {
    Class[] types = new Class [] {
    java.lang.String.class, java.lang.Boolean.class, java.lang.Boolean.class, java.lang.Boolean.class, java.lang.Boolean.class
};

public Class getColumnClass(int columnIndex) {
    return types [columnIndex];
}
}); 
```

当初始化包含 jtable(pref_table) 的框架时，通过调用以下函数将列值设置为 true 或 false，但它似乎不起作用。

```
public void set_tab_val(boolean x,int r,int c)
{
  pref_table.setValueAt(true,r,c);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T06:53:11.100

我在框架中添加了一个按钮并调用了您编写的方法，它对我来说效果很好。

```
import java.awt.BorderLayout;
import java.awt.Button;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;

import javax.swing.JButton;
import javax.swing.JFrame;
import javax.swing.JScrollPane;
import javax.swing.JTable;

public class TableSetEx 
{

    static JTable pref_table;

    public static void main(String[] args) {
        pref_table = new javax.swing.JTable();

        pref_table.setModel(new javax.swing.table.DefaultTableModel(
        new Object [][] {
            {"MONDAY", null, null, null, null},
            {"TUESDAY", null, null, null, null},
            {"WEDNESDAY", null, null, null, null},
            {"THURSDAY", null, null, null, null},
            {"FRIDAY", null, null, null, null},
            {"SATURDAY", null, null, null, null}
        },
        new String [] {
            "DAY", "9 A.M-11 A.M", "11 A.M-1 P.M", "1 P.M-3 P.M", "3 P.M-5 P.M"
        }
        ) {
            Class[] types = new Class [] {
            java.lang.String.class, java.lang.Boolean.class, java.lang.Boolean.class, java.lang.Boolean.class, java.lang.Boolean.class
        };

        public Class getColumnClass(int columnIndex) {
            return types [columnIndex];
        }
        });

        JButton button = new JButton("Click");
        button.addActionListener(new ActionListener() {

            public void actionPerformed(ActionEvent arg0) {
                // Some hardceded cell.
                set_tab_val(true,2,3);
            }
        });

        JFrame frame = new JFrame();
        frame.setLayout(new BorderLayout());
        frame.add(new JScrollPane(pref_table), BorderLayout.NORTH);
        frame.add(button, BorderLayout.CENTER);
        frame.pack();
        frame.setVisible(true);
    }

    public static void set_tab_val(boolean x,int r,int c)
    {
      pref_table.setValueAt(true,r,c);
    }
} 
```

# vb.net - Datetimepicker - 转换为秒单位

> ID：15332586
> 
> 赞同：1
> 
> 时间：2013-03-11T06:38:13.840
> 
> 标签：vb.net, visual-studio-2012

这几天脑子都在绞。。

您如何获取 datetimepicker 框值并将 24 小时时间格式 HH:mm:ss 转换为完整的总单位秒数？

基本上如果 datetimepicker 设置为 01:01:01 我正在寻找的答案是 3661

感谢您的任何帮助和回复。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T06:44:53.657

试试这个：

```
 Dim dt As DateTime = Now()
    Dim d2 As DateTime = Now.Date
    Dim ts As TimeSpan = dt.Subtract(d2)
    Dim s As String = ts.TotalSeconds 
```

使用 Now 获取时间。仅获取 d2 的日期，它呈现时间 00:00:00。减去较小的，瞧:)

# jquery - 迁移到最新的 jquery 验证插件

> ID：15332588
> 
> 赞同：0
> 
> 时间：2013-03-11T06:38:16.093
> 
> 标签：jquery, twitter-bootstrap, jquery-validate

我目前正在使用 jquery validate 插件版本 1.9.0 最新的是版本 1.11.0。当我迁移到最新版本时，表单的错误检查不起作用。在阅读了文档并查看[了网站上的示例之后](http://bassistance.de/jquery-plugins/jquery-plugin-validation/)，我仍然无法找到解决方法。（有些例子不能正常工作）

在我的代码中，我使用元验证类来指定字段是否有效，并希望将其保留在 html 中，而不是在 JS 中指定它。

```
 $("#report-listing-form").validate({
     meta: "validate",
     rules: {
         recaptcha_response_field: {
             required: true
         }
     },
     errorContainer: {},
     invalidHandler: function (event, validator) {
         var errors = validator.numberOfInvalids();
         if (errors) {
             var message = (errors == 1)
                                    ? '1 invalid field.'
                                    : errors + ' invalid fields.';

             $("#err_report-listing-form").html(message).addClass("text-error");
         }
     },
     submitHandler: function (form) {
         alert('works');
     }
 }); 
```

我的代码示例在这里：

[http://jsfiddle.net/deArQ/42/](http://jsfiddle.net/deArQ/42/)

为了使用旧插件的元数据必须使用这个插件

```
 /* ##################################################################################################### */
/* ##################################################################################################### */
/*
 * Metadata - jQuery plugin for parsing metadata from elements
 *
 * Copyright (c) 2006 John Resig, Yehuda Katz, JÔøΩ√∂rn Zaefferer, Paul McLanahan
 *
 * Dual licensed under the MIT and GPL licenses:
 *   http://www.opensource.org/licenses/mit-license.php
 *   http://www.gnu.org/licenses/gpl.html
 *
 * Revision: $Id: jquery.metadata.js 4187 2007-12-16 17:15:27Z joern.zaefferer $
 *
 */

/**
 * Sets the type of metadata to use. Metadata is encoded in JSON, and each property
 * in the JSON will become a property of the element itself.
 *
 * There are three supported types of metadata storage:
 *
 *   attr:  Inside an attribute. The name parameter indicates *which* attribute.
 *          
 *   class: Inside the class attribute, wrapped in curly braces: { }
 *   
 *   elem:  Inside a child element (e.g. a script tag). The
 *          name parameter indicates *which* element.
 *          
 * The metadata for an element is loaded the first time the element is accessed via jQuery.
 *
 * As a result, you can define the metadata type, use $(expr) to load the metadata into the elements
 * matched by expr, then redefine the metadata type and run another $(expr) for other elements.
 * 
 * @name $.metadata.setType
 *
 * @example <p id="one" class="some_class {item_id: 1, item_label: 'Label'}">This is a p</p>
 * @before $.metadata.setType("class")
 * @after $("#one").metadata().item_id == 1; $("#one").metadata().item_label == "Label"
 * @desc Reads metadata from the class attribute
 * 
 * @example <p id="one" class="some_class" data="{item_id: 1, item_label: 'Label'}">This is a p</p>
 * @before $.metadata.setType("attr", "data")
 * @after $("#one").metadata().item_id == 1; $("#one").metadata().item_label == "Label"
 * @desc Reads metadata from a "data" attribute
 * 
 * @example <p id="one" class="some_class"><script>{item_id: 1, item_label: 'Label'}</script>This is a p</p>
 * @before $.metadata.setType("elem", "script")
 * @after $("#one").metadata().item_id == 1; $("#one").metadata().item_label == "Label"
 * @desc Reads metadata from a nested script element
 * 
 * @param String type The encoding type
 * @param String name The name of the attribute to be used to get metadata (optional)
 * @cat Plugins/Metadata
 * @descr Sets the type of encoding to be used when loading metadata for the first time
 * @type undefined
 * @see metadata()
 */

(function($) {

$.extend({
    metadata : {
        defaults : {
            type: 'class',
            name: 'metadata',
            cre: /({.*})/,
            single: 'metadata'
        },
        setType: function( type, name ){
            this.defaults.type = type;
            this.defaults.name = name;
        },
        get: function( elem, opts ){
            var settings = $.extend({},this.defaults,opts);
            // check for empty string in single property
            if ( !settings.single.length ) settings.single = 'metadata';

            var data = $.data(elem, settings.single);
            // returned cached data if it already exists
            if ( data ) return data;

            data = "{}";

            if ( settings.type == "class" ) {
                var m = settings.cre.exec( elem.className );
                if ( m )
                    data = m[1];
            } else if ( settings.type == "elem" ) {
                if( !elem.getElementsByTagName )
                    return undefined;
                var e = elem.getElementsByTagName(settings.name);
                if ( e.length )
                    data = $.trim(e[0].innerHTML);
            } else if ( elem.getAttribute != undefined ) {
                var attr = elem.getAttribute( settings.name );
                if ( attr )
                    data = attr;
            }

            if ( data.indexOf( '{' ) <0 )
            data = "{" + data + "}";

            data = eval("(" + data + ")");

            $.data( elem, settings.single, data );
            return data;
        }
    }
});

/**
 * Returns the metadata object for the first member of the jQuery object.
 *
 * @name metadata
 * @descr Returns element's metadata object
 * @param Object opts An object contianing settings to override the defaults
 * @type jQuery
 * @cat Plugins/Metadata
 */
$.fn.metadata = function( opts ){
    return $.metadata.get( this[0], opts );
};

})(jQuery); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T07:23:57.880

**1）** 拉出所有的内联规则。他们显然不会像这样工作......

```
class="{validate:{required:true, email: true}}" 
```

`.validate({...})`而是在其中指定它们。不要忘记将任何[包含特殊字符的名称放在引号内](http://docs.jquery.com/Plugins/Validation/Reference#Fields_with_complex_names_.28brackets.2C_dots.29)。

```
rules: {
    'listing-report-email': {
        required: true,
        email: true
    }, 
    // your other rules
}, 
```

**工作演示： http: [//jsfiddle.net/4VP9X/4/](http://jsfiddle.net/4VP9X/4/)** *（运行 jQuery 1.9.1 和 JQuery Validate 1.11.0）*

* * *

**2）** 规则`maxWords`要求包含[`additional-methods.js`文件](http://ajax.aspnetcdn.com/ajax/jquery.validate/1.11.0/additional-methods.js)。

* * *

**3)** 不要忘记将代码包装在 DOM 就绪事件处理函数中。

```
$(document).ready(function () {

    $("#report-listing-form").validate({
        // your rules & options
    });

}); 
```

* * *

**4）** 我也不知道该`meta: "validate"`选项应该为您做什么。 [在我能找到的任何地方都没有记录它](http://docs.jquery.com/Plugins/Validation)，而且没有它，您的代码似乎也能[正常工作](http://jsfiddle.net/4VP9X/5/)。

* * *

**5)** `errorContainer: {},`

您已将`errorContainer:`选项留空。如果这是故意的，您可以完全忽略此选项。根据评论，将其替换为以下`errorPlacement`回调函数以抑制错误消息。然后为您的`.valid`和`.error`CSS 类设置样式以相应地突出显示有效和无效字段。

[http://jsfiddle.net/4VP9X/8/](http://jsfiddle.net/4VP9X/8/)

```
errorPlacement: function(error, element) {
    return false;  // will suppress all validation messages
}, 
```

# linux - 如何将数组实现为 AWK 表达式？

> ID：15332592
> 
> 赞同：1
> 
> 时间：2013-03-11T06:38:34.333
> 
> 标签：linux, arrays, bash, awk, multiple-columns

我正在编写一个脚本，并且我有一个看起来像这样的分隔文件。

```
1|Anderson|399.00|123                                  
2|Smith|29.99|234                                  
3|Smith|98.00|345                                   
4|Smith|29.98|456                                   
5|Edwards|399.00|567  
6|Kreitzer|234.56|456 
```

这是一个 awk 语句，它将获取包含“Smith”的行的第一列中的所有值。

```
echo $(awk -F '|' 'BEGIN {count=0;} $2=="Smith" {count++; print $1}' customer) 
```

输出将是：

```
2 3 4 
```

我怎么能做到这一点，所以我还将值作为 awk 增量输入到数组中。我试过这个：

```
echo $(awk -F '|' 'BEGIN {count=0;} $2=="Smith" {count++; arr[count]=$1; print $1}' customer) 
```

编辑：稍后进入脚本，当我输入

```
echo ${array[1]} 
```

没有输出。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T07:01:46.987

您的代码似乎是正确的！也许，我可能没有正确回答您的问题？

我稍微增强了您的代码以在执行结束时打印存储在数组中的值。此外，在`print`打印值之前有一个语句。

```
echo $(awk -F '|' 'BEGIN {count=0;} $2=="Smith" {count++; arr[count]=$1; print $1} END { print "Printing the inputs"; for (i in arr) print  arr[i] }' customer)
2 3 4 Printing the inputs 2 3 4 
```

此外，请查看[此站点](http://www.thegeekstuff.com/2010/03/awk-arrays-explained-with-5-practical-examples/)以获取更多示例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T08:03:02.967

Found an easy solution. Set the output of awk into a variable. Then turn the variable into an array.

```
list=$(awk -F '|' 'BEGIN {count=0;} $2=="Smith" {count++; print $1}' customer)

array=($list) 
```

Typing:

```
echo ${array[1]} 
```

Will give you the second entry in the array

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-11T07:22:45.277

你的问题不是很清楚。寻找这样的东西？

```
awk -F "|" '$2=="Smith" {arr[count++]=$1}
            END {n=length(arr); for (i=0;i<n;i++) print (i+1), arr[i]}' in.file 
```

### 输出

```
1 2
2 3
3 4 
```

# eclipse - 如何找到可以在 Eclipse 中覆盖的超类的所有方法？

> ID：15332594
> 
> 赞同：0
> 
> 时间：2013-03-11T06:38:47.047
> 
> 标签：eclipse

很抱歉提出这样一个荒谬的问题，但是我可以在 Eclipse 中打开哪个窗口来公开我在扩展类时可以覆盖的所有方法，或者作为实现的一部分的所有方法。

我觉得我戳了戳每个明显的地方，我只是没看到。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T06:40:55.047

> 源 -> 覆盖/实现方法

[http://help.eclipse.org/juno/index.jsp?topic=%2Forg.eclipse.jdt.doc.user%2Freference%2Fref-dialog-override-method.htm](http://help.eclipse.org/juno/index.jsp?topic=%2Forg.eclipse.jdt.doc.user%2Freference%2Fref-dialog-override-method.htm)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T06:46:04.733

除了@Ajay 提到的方式，如果你想要一个显示方法的窗口，你可以通过右键单击类名和“打开类型层次结构”来打开“类型层次结构”视图

# jsf-2 - 命令链接在 ui:repeat 中不起作用

> ID：15332595
> 
> 赞同：0
> 
> 时间：2013-03-11T06:38:52.023
> 
> 标签：jsf-2, primefaces, uirepeat

我的 xhtml 页面中有一个`<p:commandLink>`内部 a `<ui:repeat>`，我的 bean 范围设置为“查看”。我正在使用带有 primefaces 3.4 的 JSF2.0。这是代码片段。

```
<ui:repeat value="#{bean.selectedJob.conversions}" var="conversion">
    <p:commandLink styleClass="contextMenuItem"
    update=":form:outputParent" immediate="true"
    action="#{bean.method()}"
    oncomplete="$('#outputFilterContextMenu').hide();">
<h:outputText value="#{conversion.convType}: #{conversion.convNodeName}" />
</ui:repeat> 
```

但命令链接不调用后端方法。我已经用 actionListener 而不是 action 尝试过，但这也不起作用。任何帮助或建议将不胜感激。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-10-19T16:35:43.107

当 commandLink 在里面`<ui:repeat>`时，调用 action 的 bean 必须是 SessionScoped。

# php - uploadify 视频上传问题和 302 错误

> ID：15332596
> 
> 赞同：2
> 
> 时间：2013-03-11T06:38:52.540
> 
> 标签：php, iis, upload

我在我的 php 网站中集成了 uploadify 3.1。

问题：我的uploadify 脚本适用于较小的视频。视频文件上传到目标文件夹并存储到数据库中。

1) 对于 50 MB 以下的视频文件 - 视频上传很好，但在完成 100% 上传后，虽然视频已上传到目标文件夹并且信息也存储到数据库中，但它会给出 302 错误。

2) 对于 50 MB 以上的视频文件 - 视频上传状态显示视频已上传 100%。在进度条中获得 100% 上传状态后，视频不会上传到目标文件夹，也不会存储到数据库中。

请帮助解决这些问题。我试图提供尽可能多的信息。

下面的东西是在 IIS 服务器上设置的，所以这不是问题。

```
php 5.2.7
mysql
max_execution_time = 10800 seconds
max_input_time = 10800 seconds
memory_limit = 512M
post_max_size = 512M
upload_max_filesize = 512M
Fast CGI Timeout = 3600 seconds 
```

下面是网站结构

```
admin (folder)
     video/video_add.php (upload page location inside admin folder)
     video/video_add_p.php (upload programming where file is being uploaded and stored into database)
data (folder)
     video (video files will be stored inside this folder) 
```

以下文件包含在 video_add.php 页面上

```
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js" type="text/javascript"></script>
<script src="jquery.uploadify-3.1.min.js" type="text/javascript"></script> 
```

以下是 video_add.php 页面上的上传设置

```
<script type="text/javascript">
<?php $timestamp = time();?>
$(function() {
    $('#file_upload').uploadify({
        'auto'          : true,
        'buttonText'        : 'SELECT AND UPLOAD VIDEO',
        'checkExisting'     : './check-exists.php',
        'fileSizeLimit'     : '200MB',
        'fileTypeDesc'      : 'Video Files',
        'fileTypeExts'      : '*.flv; *.mp4; *.mpg; *.mpeg; *.wmv; *.FLV; *.MP4; *.MPG; *.MPEG; *.WMV;', 
        'formData'          : {
            'timestamp'     : '<?php echo $timestamp;?>',
            'token'         : '<?php echo md5('unique_salt' . $timestamp);?>',
            'pkid'          : '<?php echo $int_pkid;?>',
             },
        'method'            : 'post',
        'multi'             : false,
        'progressData'      : 'speed',
        'removeCompleted'   : false,
        'swf'               : 'uploadify.swf',
        'uploader'          : './video_add_p.php',
        'uploadLimit'       : 1,
        'width'             : 250,
        'onSelect'          : function() { 
                                if(trim(txt_title.value)=="")
                                {
                                    alert("Please enter video name.");
                                    txt_title.focus();
                                    $('#file_upload').uploadify('cancel'); 
                                    return false;
                                }
                              },
        'onSelectError'     : function() { alert('The file returned an error and was not added to the queue.');},
        'onUploadStart'     : function() { $("#file_upload").uploadify('settings', 'formData', {'txt_title':  $('#txt_title').val()}); },
        'onUploadComplete'  : function() { location.reload(true); },
    });
}); 
```

下面是选择视频文件的输入按钮

```
<input type="text" id="txt_title" name="txt_title" size="90">
<input type="file" id="file_upload" name="file_upload" placeholder="Select your file to upload"> 
```

下面是video_add_p.php编程上传视频

```
$targetFolder = "../../data/video/"; // Relative to the root
$verifyToken = md5('unique_salt' . $_POST['timestamp']);

if (!empty($_FILES) && $_POST['token'] == $verifyToken) {
$tempFile = $_FILES['Filedata']['tmp_name'];
$targetPath = $targetFolder;
$targetFileExt=GetExtension($_FILES['Filedata']['name']);
$targetFileName = "video_".$int_pkid."_".date("ymdhis").".".$targetFileExt;;
$targetFile = rtrim($targetPath,'/') . '/' . $targetFileName;

// Validate the file type
$fileTypes = array('flv','mp4','mpg','mpeg','wmv','FLV','MP4','MPG','MPEG','WMV'); 

    // File extensions
$fileParts = pathinfo($_FILES['Filedata']['name']);

if (in_array($fileParts['extension'],$fileTypes)) {
    set_time_limit(0);
    move_uploaded_file($tempFile,$targetFile);
    echo '1';
} 
else { echo 'Invalid file type.'; }
}

-- Here script is written to store uploaded video file data into mysql database. -- 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T07:21:08.227

试着用这种格式写你的尺寸......希望它对你有用

```
'fileSizeLimit': 20971345, 
```

# android - 创建一个无限的 ViewPager 向一个方向滚动

> ID：15332604
> 
> 赞同：4
> 
> 时间：2013-03-11T06:39:27.350
> 
> 标签：android, android-viewpager

我是 Android 编程的新手，这是我在这个网站上的第一个问题。我花了很多时间寻找这个问题，但没有找到适合我的情况的答案。

我在 ViewPager 中有两个页面，一个用于当前页面，一个用于下一页。当第二个片段显示时，我将其索引设置为 0，删除第一个片段并创建一个新片段作为第二个片段的替换。这是我的代码。

```
mPager.setOnPageChangeListener(new OnPageChangeListener() {

        @Override
        public void onPageSelected(int pageSelected) {
        }

        @Override
        public void onPageScrolled(int position, float positionOffset, int positionOffsetPixels) {
            if (position  == 1) {
                currentQuestFr = nextQuestFr;
                nextQuestFr = newQuest();
                mPager.setCurrentItem(0, false);
                mPagerAdapter.notifyDataSetChanged();
            }
        }

        @Override
        public void onPageScrollStateChanged(int state) {

        }
    }); 
```

和适配器

```
private class QuestPagerAdapter extends FragmentStatePagerAdapter {

    public QuestPagerAdapter(FragmentManager fm) {
        super(fm);
    }

    @Override
    public Fragment getItem(int position) {
        if (position == 0) return currentQuestFr;
        else return nextQuestFr;
    }

    @Override
    public int getCount() {
        return NUM_PAGES;
    }

    @Override
    public int getItemPosition(Object object)
    {
        return POSITION_NONE;
    }
} 
```

该代码运行良好，但`notifyDataSetChanged()`似乎不需要那样刷新我的视图。它让用户有点恼火。有没有办法在不重绘视图的情况下刷新适配器，或者以其他方式达到相同的目的？非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-03T04:41:17.537

您是否希望它以一种应该首先加载所有数据然后在某些事件上手动重绘视图的方式工作？然后您可以使用 **mPager.setOffscreenPageLimit(n)** 其中 n 是您在 mPager 中的页数。这将在加载时绘制所有页面。

# javascript - 如何在嵌入的谷歌地图中拖动和重置方向

> ID：15332609
> 
> 赞同：0
> 
> 时间：2013-03-11T06:39:48.690
> 
> 标签：javascript, google-maps, google-maps-api-3, google-maps-api-2, map-directions

如何在嵌入的谷歌地图中拖动和重置方向。目前我正在获得两点之间的最短路线，但我想将其稍微调整为一些最近的路线。我知道在原始谷歌地图页面中我们可以做到这一点，但如何在嵌入页面中做到这一点。

```
 <!DOCTYPE html>
<html>
  <head>
    <meta name="viewport" content="initial-scale=1.0, user-scalable=no">
    <meta charset="utf-8">
    <title>Google Maps JavaScript API v3 Example: Directions Complex</title>    
    <style type="text/css">
    html, body {
  height: 100%;
  margin: 0;
  padding: 0;
}

#map_canvas {
  height: 100%;
}

@media print {
  html, body {
    height: auto;
  }

  #map_canvas {
    height: 650px;
  }
}
      #directions-panel {
        height: 100%;
        float: right;
        width: 390px;
        overflow: auto;
      }

      #map-canvas {
        margin-right: 400px;
      }

      #control {
        background: #fff;
        padding: 5px;
        font-size: 14px;
        font-family: Arial;
        border: 1px solid #ccc;
        box-shadow: 0 2px 2px rgba(33, 33, 33, 0.4);
        display: none;
      }

      @media print {
        #map-canvas {
          height: 500px;
          margin: 0;
        }

        #directions-panel {
          float: none;
          width: auto;
        }
      }
    </style>
    <script src="https://maps.googleapis.com/maps/api/js?v=3.exp&sensor=false"></script>
    <script>
      var directionDisplay;
      var directionsService = new google.maps.DirectionsService();

      function initialize() {
        directionsDisplay = new google.maps.DirectionsRenderer();
        var mapOptions = {
          zoom: 7,
          mapTypeId: google.maps.MapTypeId.ROADMAP,
          center: new google.maps.LatLng(41.850033, -87.6500523)
        };
        var map = new google.maps.Map(document.getElementById('map_canvas'),
            mapOptions);
        directionsDisplay.setMap(map);
        directionsDisplay.setPanel(document.getElementById('directions-panel'));

        var control = document.getElementById('control');
        control.style.display = 'block';
        map.controls[google.maps.ControlPosition.TOP].push(control);
      }

      function calcRoute() {
        var start = document.getElementById('start').value;
        var end = document.getElementById('end').value;
        var request = {
          origin: start,
          destination: end,
          travelMode: google.maps.DirectionsTravelMode.DRIVING
        };
        directionsService.route(request, function(response, status) {
          if (status == google.maps.DirectionsStatus.OK) {
            directionsDisplay.setDirections(response);
          }
        });
      }

      google.maps.event.addDomListener(window, 'load', initialize);
    </script>
  </head>
  <body>
    <div id="control">
      <strong>Start:</strong>
      <select id="start" onchange="calcRoute();">
        <option value="chicago, il">Chicago</option>
        <option value="st louis, mo">St Louis</option>
        <option value="joplin, mo">Joplin, MO</option>
        <option value="oklahoma city, ok">Oklahoma City</option>
        <option value="amarillo, tx">Amarillo</option>
        <option value="gallup, nm">Gallup, NM</option>
        <option value="flagstaff, az">Flagstaff, AZ</option>
        <option value="winona, az">Winona</option>
        <option value="kingman, az">Kingman</option>
        <option value="barstow, ca">Barstow</option>
        <option value="san bernardino, ca">San Bernardino</option>
        <option value="los angeles, ca">Los Angeles</option>
      </select>
      <strong>End:</strong>
      <select id="end" onchange="calcRoute();">
        <option value="chicago, il">Chicago</option>
        <option value="st louis, mo">St Louis</option>
        <option value="joplin, mo">Joplin, MO</option>
        <option value="oklahoma city, ok">Oklahoma City</option>
        <option value="amarillo, tx">Amarillo</option>
        <option value="gallup, nm">Gallup, NM</option>
        <option value="flagstaff, az">Flagstaff, AZ</option>
        <option value="winona, az">Winona</option>
        <option value="kingman, az">Kingman</option>
        <option value="barstow, ca">Barstow</option>
        <option value="san bernardino, ca">San Bernardino</option>
        <option value="los angeles, ca">Los Angeles</option>
      </select>
    </div>
    <div id="directions-panel"></div>
    <div id="map_canvas"></div>
  </body>
</html> 
```

还想在该路线中存储 latlong 点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T08:25:18.163

```
var rendererOptions = {
  draggable: true
};
var directionsDisplay = new google.maps.DirectionsRenderer(rendererOptions);;
var directionsService = new google.maps.DirectionsService(); 
```

# jquery - 通过ajax添加内容，但是mouseenter事件无效

> ID：15332616
> 
> 赞同：1
> 
> 时间：2013-03-11T06:40:38.510
> 
> 标签：jquery, django, dajaxice, dajax

有一个html表格，在每一行中，我添加了“编辑”图标，当鼠标进入图标时，它会弹出一个菜单。在 document.ready 函数中，事件 mouseenter 生效。但是如果我通过 dajax 添加一个新行，事件 mouseenter 是无效的。

```
function add_finding(table_type){
if(!check_finding_attribute(table_type))
    return;
else{
Dajaxice.codeinsight.add_finding(Dajax.process,get_finding_attribute_dict(table_type));
    reset_finding_attribute(table_type);
    //reload the popup menu
    $(".menubox").each(function(){
        var menubox_id=$(this).attr("id");
        var showmenu_id=menubox_id.replace("menubox","showmenu");
        $.showmenu("#"+showmenu_id,"#"+menubox_id);
    });
}
}

$(document).ready(function(){
jQuery.showmenu = function(showbtnid,showboxid) {
    var showmenubtn = $(showbtnid);
    var showmenubox = $(showboxid);
    showmenubtn.mouseenter(function(e){
        var thish = $(this).height();
        var offset = $(this).offset();
        var tipx = offset.left;
        var tipy = offset.top+thish-1;
        showmenubox.show().css("left",tipx).css("top",tipy);
        t= setTimeout(function(){showmenubox.hide();},1000);
      });
    showmenubox.mouseenter(function(){
        clearTimeout(t);
    });
    showmenubox.mouseleave(function(){
        $(this).hide();
    });
};
$(".menubox").each(function(){
    var menubox_id=$(this).attr("id");
    var showmenu_id=menubox_id.replace("menubox","showmenu");
    $.showmenu("#"+showmenu_id,"#"+menubox_id);
});
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T06:43:12.677

如果内容来自 AJAX，并且您也想将事件绑定到该内容，那么您应该这样做。

```
jQuery.on(...) 
```

正常的事件绑定不适用于那些。

```
jQuery.on("mouseenter", showbtnid,function(){...}) 
```

上述绑定将处理现有元素以及将来新添加的元素。

快乐编码:)

# mysql - 自动从 Mysql 表中删除的记录

> ID：15332618
> 
> 赞同：4
> 
> 时间：2013-03-11T06:40:42.443
> 
> 标签：mysql, django, python-2.7, xeround

我在 Python 中创建了一个 cronjob。目的是根据某些条件将数据从另一个表插入到表中。有超过 65000 条记录要插入。我已经执行了 cronjob 并且看到插入了超过 25000 条记录。但在那之后，记录会自动从该表中删除。甚至在执行 cronjob 前一天已经插入表中的记录也被删除。“当前数据库托管在 Xeround 云中。” MySQL是否这样做，即某种回滚或什么

有没有人对此有任何想法。请给我一个解决方案。提前致谢..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T15:04:28.153

在 django shell 中运行你的 django orm 语句并打印回溯。在 django traceback sql 中查找删除语句。

# android - “hasSystemFeature()”方法的实现在哪里？

> ID：15332619
> 
> 赞同：2
> 
> 时间：2013-03-11T06:40:49.107
> 
> 标签：android, android-package-managers

我想看看 'hasSystemFeature()' 方法的实现。请告诉我实施在哪里。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T07:45:00.720

通常的实现调用包管理器服务。它的实现位于 Android 基础平台框架存储库中的`hasSystemFeature()`services [/java/com/android/server/pm/PackageManagerService.java 。](https://github.com/android/platform_frameworks_base/blob/master/services/core/java/com/android/server/pm/PackageManagerService.java)

# ruby-on-rails - Rails f.select 试图禁止下拉列表被更改

> ID：15332620
> 
> 赞同：1
> 
> 时间：2013-03-11T06:40:49.953
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

我正在尝试禁止在表单上更新下拉列表。

目前我的表格中有这一行：

```
<%= f.select :permission, options_for_select([['Admin', 'admin'], ['Read Only', 'readonly'], ['Editable', 'editable']], {:disabled => @permissions_disabled}) %> 
```

我的编辑控制器方法包含：

```
@permissions_disabled = params[:id].to_i == current_user.id.to_i
p @permissions_disabled 
```

我可以在我的日志中清楚地看到 1@permissions_disabled1 是真的，但是当我编辑表单时，我仍然可以在下拉列表中选择新值。

我在这里做错了什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-11T06:45:39.383

`select`接受 5 个参数，第 4 个是帮助器的一组选项。第 5 个是 html 选项，如 class 和 id。我认为您需要将其传递给

```
<%= f.select :permission, options_for_select([['Admin', 'admin'], ['Read Only', 'readonly'], ['Editable', 'editable']], {}, {:disabled => @permissions_disabled}) %> 
```

`options_for_select`更新：在您的代码中没有看到。如果您正在使用，则不需要它`select`，您只想在使用时使用它`select_tag`

```
<%= f.select :permission, [['admin', 'Admin'], ['readonly', 'Read Only'], ['editable', 'Editable']], {}, {:disabled => @permissions_disabled} %> 
```

# javascript - 如何将具有多个类的新 li 添加到 UL

> ID：15332621
> 
> 赞同：0
> 
> 时间：2013-03-11T06:40:51.087
> 
> 标签：javascript, mootools

我有以下代码：

```
<div class="content">
    <h2>Choose a category</h2>
    <ul class="clean menu" id="topics">
        <li class="drop png">
            <a cat="ntech" class="sec_accnt" href="javascript:void(0);" name="&amp;lid=choose_category_billing" rel="1" style="BACKGROUND-POSITION: 13px -164px">Billing</a>
        </li>
       <li class="drop png">
            <a cat="tech" class="sec_homecontrol" href="javascript:void(0);" name="&amp;lid=choose_category_homecontrol" rel="1" style="BACKGROUND-POSITION: 13px -121px">Home Monitoring &amp; Control</a>
       </li>
        <li class="drop png">
            <a cat="ntech" class="sec_regis" href="javascript:void(0);" name="&amp;lid=choose_category_regis_signin" rel="1" style="BACKGROUND-POSITION: 13px -207px">Registration &amp; Sign In</a>
        </li>
    </ul>
 </div> 
```

现在我想在第二个位置的列表中添加一个新的 li。添加后的代码应该是这样的：

```
<div class="content">
    <h2>Choose a category</h2>
    <ul class="clean menu" id="topics">
        <li class="drop png">
            <a cat="ntech" class="sec_accnt" href="javascript:void(0);" name="&amp;lid=choose_category_billing" rel="1" style="BACKGROUND-POSITION: 13px -164px">Billing</a>
        </li>

        <li class="drop png">
            <a cat="tech" class="sec_net_1" href="javascript:void(0);" name="&amp;lid=choose_category_internet_fios" rel="1">FiOS Internet</a>
        </li>    <!-- Newly added li -->

       <li class="drop png">
            <a cat="tech" class="sec_homecontrol" href="javascript:void(0);" name="&amp;lid=choose_category_homecontrol" rel="1" style="BACKGROUND-POSITION: 13px -121px">Home Monitoring &amp; Control</a>
       </li>
        <li class="drop png">
            <a cat="ntech" class="sec_regis" href="javascript:void(0);" name="&amp;lid=choose_category_regis_signin" rel="1" style="BACKGROUND-POSITION: 13px -207px">Registration &amp; Sign In</a>
        </li>
    </ul>
 </div> 
```

我们如何使用 mootools 实现这一目标？我正在使用 mootools 1.3.2。我使用了以下行：

```
 $("#topics").bind('<li class="drop png"><a cat="tech" class="sec_net_1" href="javascript:void(0);" name="&amp;lid=choose_category_internet_fios" rel="1">FiOS Internet</a></li>'); 
```

但这是一个错误`'null' is null or not an object`。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T06:54:59.743

`$("#topics")`应该是`$("topics")`。

```
var el = new Element('li', {
    class: "drop png",
    html: "FiOS Internet" // ... you may add other attributes
});
$('topics').grab(el); 
```

我实际上不知道 mootools，但如果你想使用它，你应该更仔细地阅读文档：http: [//mootools.net/docs/core](http://mootools.net/docs/core)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T07:09:10.127

您正在寻找[Element.inject()](http://mootools.net/docs/core/Element/Element#Element%3ainject)。

像这样的东西应该可以完成这项工作（为了更好地指出要做什么，我对其进行了一些简化）：

```
var li = new Element('li'), 
    a = new Element('a'), 
    span = new Element('span', {'text': 'FiOS Internet'});
span.inject(a);
a.inject(li);
li.inject($('x1'),'after'); 
```

请注意，为了获得正确的订单，您可能想要`id`物品`li`或以类似的方式标记它们。这不是必需的，但它使它更容易理解。

对于此示例，我已将您的第一项标记如下：

```
<li id='x1' class="drop png">
    ....
</li> 
```

JSFiddle：http: [//jsfiddle.net/tvc3n/](http://jsfiddle.net/tvc3n/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-11T07:11:35.547

这应该这样做：

```
var newLi = new Element('li.drop.png', {
    html: '<a cat="tech" class="sec_net_1" href="javascript:void(0);" name="&amp;lid=choose_category_internet_fios" rel="1">FiOS Internet</a>'
});
$('topics').getElement('li').grab(newLi, 'after'); 
```

[http://jsfiddle.net/ZB3cF/1/](http://jsfiddle.net/ZB3cF/1/)

# javascript - 如何修复javascript以及c#上发生的计算错误

> ID：15332622
> 
> 赞同：2
> 
> 时间：2013-03-11T06:40:52.467
> 
> 标签：javascript, c#-4.0

我将 mvc3 与 c# 语言一起使用，但我遇到了计算问题。这里我对 3 个属性 Qty、Cost 和 totalprice 使用双类型变量

这里总价格=数量*成本；

我有要求获得不带小数的产品总价格。例如，如果数量=14.3，成本=15。然后在 java script/C# 上我会得到总价 214.5

但我需要 214。为了解决这个问题，我使用 Math.Floor(214.5) 得到 214。但是当 Qty=18.9 且成本=1500 时。然后在 javascript 或 C# 乘法上，我得到总价格 = 28349.999999999996，正确的结果应该是 28350。请帮助我获得可以准确获得两个结果的解决方案

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T06:42:52.260

在c#中根据你选择。

```
-3        -2        -1         0         1         2         3
 +--|------+---------+----|----+--|------+----|----+-------|-+
    a                     b       c           d            e

                       a=-2.7  b=-0.5  c=0.3  d=1.5  e=2.8
                       ======  ======  =====  =====  =====
Floor                    -3      -1      0      1      2
Ceiling                  -2       0      1      2      3
Truncate                 -2       0      0      1      2
Round (ToEven)           -3       0      0      2      3
Round (AwayFromZero)     -3      -1      0      2      3 
```

在 javscript 中这样做：

```
var qty=qty.toFixed(1);
var cost=cost.toFixed(1);
var totalprice=Math.round(qty*cost); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T06:42:47.850

你可以使用 Math.round(); 这解决了你的问题。

```
Math.round(214.5- .1); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-11T06:46:10.987

这个问题在这里已经有了答案：[Javascript 浮动计算错误](https://stackoverflow.com/questions/14727839/javascript-floating-calculation-error/14728132#14728132)

您可以使用 toFixed() 例如： (1.2 - 1).toFixed(1) * 1 // 0.2

# android - 如何限制用户从安卓手机卸载应用程序

> ID：15332624
> 
> 赞同：0
> 
> 时间：2013-03-11T06:41:02.830
> 
> 标签：android

如果有关于此功能的任何解决方案，我想开发一个不会在未经身份验证的情况下从移动设备上卸载的应用程序，请给我任何解决方案。

等待回复。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T06:53:02.633

您需要将您的 apk 推送到 /system/app。为此，您需要对您的设备进行根目录操作。

看看： http: [//www.addictivetips.com/mobile/how-to-install-any-app-as-system-app-on-android/](http://www.addictivetips.com/mobile/how-to-install-any-app-as-system-app-on-android/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T07:03:13.673

你不能那样做。如果可以，那将是安全漏洞。

# android - 创建安装应用程序并仅运行该应用程序的代码

> ID：15332625
> 
> 赞同：0
> 
> 时间：2013-03-11T06:41:09.057
> 
> 标签：android, ios

我需要一台仅运行一个自定义应用程序且不允许用户访问任何其他功能的设备。构建一个完整的设备肯定会涉及大量的时间和金钱（只有当这可以用 android 完成时）。这通常可以为每个 android 设备单独完成。如果有一段代码可以简单地在安装应用程序的设备上执行，同时根据要求限制设备，那可能会更好。有人可以建议我一种在 Android 设备中实现的方法。有没有可能:(也想知道iOS是否可以做到这一点..谢谢..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T06:49:20.310

如果您想绝对确保用户只能访问一个特定的应用程序，那么唯一的方法就是创建一个[自定义 ROM](http://forum.xda-developers.com/showthread.php?t=1801690)，只允许安装您的应用程序。

# xcode - 强制 Xcode 更新项目文件

> ID：15332626
> 
> 赞同：0
> 
> 时间：2013-03-11T06:41:10.250
> 
> 标签：xcode, macos, cocoa

**好的，这是我的问题：**

*   我在 Lion 下使用 Xcode 4.6
*   在我当前的项目中，我添加了几个“真实”文件夹（带有源或带有资源），Xcode 表示为**“组”**
*   但是，每当我在一个已经导入的文件夹中添加另一个文件时，该文件都不会显示*（而是我必须手动将每个新文件拖到其适当的位置）*。

好吧，鉴于我的项目由数百个不同的文件组成，并且不断添加文件，这似乎有点过头了。

我意识到这可能与 Xcode 以 Group 为中心的方法有关，但它仍然困扰着我。

那么，有什么解决方法吗？有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T06:58:29.340

对于许多IDE，它不会扫描包含文件夹中新文件的更改，以防止意外添加会破坏编译过程的额外代码。如果你真的想这样做，编写一个脚本来添加文件夹中的所有文件并在预编译阶段运行它，即在 Xcode 中，“外部目标”

请参阅：[https ://stackoverflow.com/a/976459/188331](https://stackoverflow.com/a/976459/188331)

# javascript - Requirejs domReady 插件与 Jquery $(document).ready()？

> ID：15332628
> 
> 赞同：102
> 
> 时间：2013-03-11T06:41:15.580
> 
> 标签：javascript, jquery, html, requirejs, document-ready

我正在使用 RequireJS 并且需要在准备好的 DOM 上初始化一些东西。现在，RequireJS 提供了[`domReady`插件](http://requirejs.org/docs/api.html#pageload)，但是我们已经有了 jQuery `$(document).ready()`，因为我需要 jQuery，所以我可以使用它。

所以我有两个选择：

1.  使用`domReady`插件：

    ```
    require(['domReady'], function (domReady) {
        domReady(function () {
            // Do my stuff here...
        });
    }); 
    ```

2.  使用`$(document).ready()`：

    ```
    $(document).ready(function() {
        // Do my stuff here...
    }); 
    ```

**我应该选择哪一个，为什么？**

这两个选项似乎都按预期工作。我对 jQuery 没有信心，因为 RequireJS 正在发挥它的魔力。也就是说，由于 RequireJS 会动态添加脚本，我担心 DOM 准备好可能会在所有动态请求的脚本加载之前发生。`domReady`然而，当我已经需要 jQuery 时，RequireJS 会增加额外 JS 的负担。

## 问题

*   `domReady`当我们可以拥有 jQuery 的时候，为什么 RequireJS 提供了一个插件`$(document).ready();`？我没有看到包含另一个依赖项的任何好处。
*   如果它只是为了满足需求，那么为什么不为跨浏览器 AJAX 提供一个呢？

据我所知，`domReady`在文档准备好后不会获取或执行需要的模块，您也可以使用 jQuery 执行相同的操作：

```
require(['jQuery'], function ($) {
    $(document).ready(function () {
        // Do my stuff here...
    });
}); 
```

为了更清楚地说明我的问题： requires **or 和有什么****区别？`domReady``jQuery`**

* * *

## 回答 #1

> 赞同：93
> 
> 时间：2013-03-20T06:07:25.450

似乎所有的关键点都已经被击中，但一些细节却漏掉了。主要是：

### domReady

它既是插件又是模块。如果您将它包含在带有尾随的需求数组中，那么`!`您的模块在与 DOM 交互“安全”之前不会执行：

```
define(['domReady!'], function () {
    console.info('The DOM is ready before I happen');
}); 
```

注意加载和执行是不同的；您希望所有文件尽快加载，这是对时间敏感的内容的执行。

如果省略`!`，那么它只是一个普通的模块，恰好是一个函数，它可以接受一个在 DOM 可以安全交互之前不会执行的回调：

```
define(['domReady'], function (domReady) {
    domReady(function () {
        console.info('The DOM is ready before I happen');
    });
    console.info('The DOM might not be ready before I happen');        
}); 
```

### 使用 domReady 作为插件时的优势

依赖于一个模块的代码又依赖于`domReady!`一个非常显着的优势：它不需要等待 DOM 准备好！

假设我们有一个代码块 A，它依赖于一个模块 B，它依赖于`domReady!`. 在 DOM 准备好之前，模块 B 不会完成加载。反过来，A 在 B 加载之前不会运行。

如果您要`domReady`在 B 中用作常规模块，则 A 还需要依赖`domReady`，并将其代码包装在`domReady()`函数调用中。

此外，这意味着 与`domReady!`享有同样的优势`$(document).ready()`。

### 关于 domReady 和 $(document).ready() 之间的区别

两者都以基本相同的方式嗅探 DOM 是否/何时准备好。

### 重新担心 jQuery 在错误的时间触发

即使 DOM 在 jQuery 之前加载，jQuery 也会触发任何就绪回调（您的代码不应该关心哪个先发生。）。

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2013-03-12T14:40:11.463

尝试回答您的主要问题：

> 当我们可以拥有 jquery 时，为什么要`requirejs`提供插件？`domReady``$(document).ready();`

他们做两件不同的事情，真的。RequireJS 的`domReady`依赖表示该模块需要在运行之前完全加载 DOM（因此，如果您愿意，可以在应用程序中的任意数量的模块中找到），而`$(document).ready()`当 DOM 运行时会触发其回调函数加载完成。

差异可能看起来很微妙，但请考虑一下：我有一个模块需要以某种方式耦合到 DOM，所以我可以在模块定义时依赖并耦合它，或者在它的末尾`domReady`放下 a`$(document).ready()`带有对模块初始化函数的回调。我称第一种方法更清洁。

同时，如果我有一个事件需要在 DOM 准备好时立即发生，那么该`$(document).ready()`事件将是首选，因为这并不特别依赖于 RequireJS 是否完成加载模块，只要你的代码依赖调用它从被满足。

同样值得考虑的是，您不一定将 RequireJS 与 jQuery 一起使用。任何需要 DOM 访问（但不依赖 jQuery）的库模块仍然可以通过使用`domReady`.

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-03-20T02:51:42.630

按出现顺序回答你的子弹：

*   他们都完成了同样的事情
*   如果您出于某种原因对 jquery 有所保留，请使用 domReady
*   正确，所以只需使用 jQuery
*   因为不是每个人都使用 jQuery
*   我同意，只需使用 jQuery
*   根据定义，插件“满足需求”。
*   跨浏览器 ajax 不是一回事。跨域？可能有，如果没有，则无需喂食。
*   ， -， -， - 行

当它归结为它时，你想多了。这是一种在 domReady 上执行 javascript 的机制。如果你没有 jQuery，我会提倡 domReady 插件。既然你有 jQuery，那么不要加载更多的脚本来做一些已经可用的事情。

**清晰度更新**

domReady 插件[收集](https://github.com/requirejs/domReady/blob/master/domReady.js#L21)在文档“就绪”时调用的函数。如果它已经加载，那么它们会立即执行。

JQuery 收集函数并将[延迟对象](https://github.com/jquery/jquery/blob/master/src/core.js#L233)绑定到“准备就绪”的 dom。当 dom 准备好时，延迟对象将被解析并且函数将被触发。如果 dom 已经“准备好”，那么 deferred 将已经被解析，因此该函数将立即执行。

这意味着他们有效地做完全相同的事情。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-07-23T12:21:09.380

在对带有多个模块的 requirejs 进行了一些试验之后，我建议使用**domReady**。

我注意到当 requirejs 加载多个模块时，不会调用与**$(document).ready(...)关联的函数。**我怀疑 dom 在执行所有 requirejs 代码之前就准备好了，并且在它与用户定义的函数（即在主模块代码中）绑定之前调用了 jquery 就绪回调处理程序。

```
require(['jquery',
    'underscore',
    'text!some_template.html',
    './my_module_1',
    './my_module_2',
    'domReady',
    'other_dependency_1',
    'other_dependency_2'
    ], function($, _, someTemplate, myModule1, myModule2, domReady) {

    $(document).ready(function() {
        console.info('This might never be executed.'); 
        console.info('Dom might get ready before requirejs would load modules.');
    });

    domReady(function () {
        console.info('This runs when the dom gets ready and modules are loaded.');
    });
}); 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2015-08-12T02:35:41.370

我发现我这样做是作为主条目的一部分，这样可以保证我的所有 javascript 都准备好 DOM 并且加载了 jquery。不确定这有多好，欢迎任何反馈，但这是我的 main.js：

```
require(['domReady!'], function(domReady){
    console.log('dom is ready');
    require(['jquery', 'bootstrap'], function(){
        console.log('jquery loaded');
        require(['app'], function(app){
            console.log('app loaded');
        });
    });
}); 
```

# android - 如何获取android中图像顶部的文本？

> ID：15332633
> 
> 赞同：0
> 
> 时间：2013-03-11T06:42:17.310
> 
> 标签：android, textview, imageview

我有一张上面有文字的图片。我需要从图像中提取文本。

例如：假设我有一张图片，在图片上我有一个 LOGO“ *NOKIA* ”。我想从图像中提取徽标作为文本。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T06:46:42.747

我不确定你的意思是从 imageview 获取文本。我假设您想在 android 中的图像上提取文本。为此，您需要一个 OCR-光学字符识别器。

我建议看看这个链接[有没有适用于 Android 的免费 OCR 库？](https://stackoverflow.com/questions/1106202/android-ocr).

也下载这个并根据您的需要进行修改。[https://github.com/GautamGupta/Simple-Android-OCR](https://github.com/GautamGupta/Simple-Android-OCR)。

[Android OCR 使用 tess-two 的一个分支 tesseract](https://stackoverflow.com/questions/14525004/android-ocr-using-tess-two-a-fork-of-tesseract)。

[https://github.com/smart-mobile-software/ocrapiservice](https://github.com/smart-mobile-software/ocrapiservice)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T06:47:45.943

这是一个图像。所以你可以试试android OCR。

[https://github.com/rmtheis/android-ocr](https://github.com/rmtheis/android-ocr)

[http://code.google.com/p/mobileocr/source/browse/#svn%2Ftrunk](http://code.google.com/p/mobileocr/source/browse/#svn%2Ftrunk)

# c++ - 如何使用 tr1 函数并绑定具有更改参数的函数？

> ID：15332647
> 
> 赞同：1
> 
> 时间：2013-03-11T06:43:01.883
> 
> 标签：c++, boost, callback, boost-bind, tr1

我目前正在从 C# 转到 C++ 并重写一些游戏引擎代码，我想我在 tr1 的墙上；本质上，我想要做的是让输入层从触摸屏获取输入，然后触发回调以通知任何侦听该输入的元素。现在 tr1/boost 似乎通过使用**function**和**bind**使这变得超级简单，但是触发 void() 回调没有问题，但现在我试图在调用时将参数发送到这些回调（例如枚举） .

这里的问题是，当我调用 bind 并插入参数时，它不会充当占位符，而是充当要传递的永久值。例如我的代码在这里：

**包含类：**

```
tr1::function<void (MenuActions action)> callback;
callback = tr1::bind(&MenuScene::handleInputCallback, this, MenuActions::neutral);
m_menuUILayer->registerCallback(callback); 
```

我的意图是创建一个函数并绑定它，然后*registerCallback*将此回调传递给成员类并存储引用。这部分有效，但现在在成员类中我可以调用回调，但是总是发送默认参数......

**会员等级：**

```
if (m_callback)
{
    m_callback(MenuActions::backgroundTouchDown);
} 
```

因此，这里没有*将 MenuActions::backgroundTouchDown*发送到回调中的主包含类，而是仍在使用默认的*MenuActions::neutral 。*我想知道我是否错过了什么，或者我睡眠不足只是让我走错了路？多谢你们！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-11T06:51:09.230

你应该使用占位符

```
callback = tr1::bind(&MenuScene::handleInputCallback, this,
tr1::placeholders::_1); 
```

然后像这样打电话

```
if (m_callback)
{
    m_callback(MenuActions::backgroundTouchDown);
} 
```

你的函数`handleInputCallback`可以有默认参数，默认为`MenuActions::neutral`

# android - HTC webview 问题 .getting force close

> ID：15332650
> 
> 赞同：1
> 
> 时间：2013-03-11T06:43:15.860
> 
> 标签：android

这是我的自定义网页视图

```
public class MycustomWebView extends WebView {

    public static boolean sClicked = false;
    private boolean mOverrideCheckIsTextEditor = true;

    public View mCross;

//  public MycustomWebView(Context context, AttributeSet attrs, int defStyle) {
//      super(context, attrs, defStyle);
//  }

    public MycustomWebView(Context context, AttributeSet attrs, int defStyle) {
        super(context, attrs, android.R.attr.webViewStyle);
    }

    public MycustomWebView(Context context, AttributeSet attrs) {
        super(context, attrs);
    }

    public MycustomWebView(Context context) {
        super(context);
    }

    @Override
    public boolean onTouchEvent(MotionEvent ev) {
        sClicked = true;
        switch (ev.getAction()) {
        case MotionEvent.ACTION_DOWN:
        case MotionEvent.ACTION_UP:
            if (!hasFocus()) {
                try {
                    requestFocus();
                } catch(Exception e){
                    Toast.makeText(getContext(), "error no focus", Toast.LENGTH_SHORT).show();
                    Log.d("Focus issue", e.getMessage());
//                  Logger.v("can't get focus " + e.getMessage());
                }
            }
            break;
        }
        try {
            // crashes on some devices
            return super.onTouchEvent(ev);
        } catch(Exception e){
            return false;
        }
    }
    @Override
    public boolean onCheckIsTextEditor() {

         if (mOverrideCheckIsTextEditor) {
                return true;
            } else {
                return super.onCheckIsTextEditor();
            }

    }

    @Override
    public void loadUrl(String url) {
        super.loadUrl(url);
    }

    public void setOverrideOnCheckIsTextEditor(boolean b) {

        mOverrideCheckIsTextEditor = b;
    }

} 
```

这是我的主要活动

```
public class MainActivity extends Activity {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        WebView myWebView = (WebView) findViewById(R.id.myweb1);

//      myWebView=  new WebView(this, null, android.R.attr.webViewStyle, true);
        WebSettings webSettings = myWebView.getSettings();
        myWebView.setFocusable(true);
        myWebView.isFocusableInTouchMode();
        myWebView.requestFocus();
        webSettings.setJavaScriptEnabled(true);
        myWebView.loadUrl("http://developer.samsung.com/resources.do");
        }
} 
```

这是我的 XML 代码

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    tools:context=".MainActivity" >

    <TextView
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_centerHorizontal="true"
        android:layout_centerVertical="true"
        android:text="@string/hello_world" />

    <com.example.testproj.MycustomWebView
        android:id="@+id/myweb1"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:focusable="true"
        android:layerType="software" />

       <!--  <com.example.testproj.LiveWebView
        android:id="@+id/myweb1"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"

        android:layerType="software" /> -->

</RelativeLayout> 
```

我的问题是，当我在 HTC 设备中运行我的应用程序时，它会强制关闭，而在其他设备（例如 nexus）中它工作正常。任何人请帮助我

这是错误日志

```
FATAL EXCEPTION: main
 java.lang.NullPointerException
    at android.webkit.WebView$PrivateHandler.handleMessage(WebView.java:9972)
    at android.os.Handler.dispatchMessage(Handler.java:99)
    at android.os.Looper.loop(Looper.java:156)
    at android.app.ActivityThread.main(ActivityThread.java:4987)
    at java.lang.reflect.Method.invokeNative(Native Method)
    at java.lang.reflect.Method.invoke(Method.java:511)
    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
    at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T12:23:15.523

我自己解决了这个问题。我刚刚评论了这段代码

```
@Override
    onCheckIsTextEditor() {

         if (mOverrideCheckIsTextEditor) {
                return true;
            } else {
                return super.onCheckIsTextEditor();
            }

    } 
```

对我来说它正在工作。希望它会帮助别人

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T06:46:16.580

请在清单 xml 中检查您的最低版本支持。正确提供最低版本以支持您的设备

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-19T12:12:15.203

是的，这个错误是由 HTC 设备中 Webkit 浏览器的自定义实现引起的。解决方案未知。

Android 问题跟踪器：[http ://code.google.com/p/android/issues/detail?id=9995](http://code.google.com/p/android/issues/detail?id=9995)

# ios - iPhone 中的快速结帐按钮而不是使用 paypal 按钮付款

> ID：15332658
> 
> 赞同：1
> 
> 时间：2013-03-11T06:43:45.657
> 
> 标签：ios, objective-c, paypal

在我的应用程序中，我获得了使用 PayPal 支付按钮，但我想获得快速结帐按钮。
那么，我需要任何额外的库吗？还是我应该更改我的代码？我使用了示例披萨库。
我的按钮初始化代码是

```
UIButton *button = [[PayPal getPayPalInst] getPayButtonWithTarget:self andAction:
                   @selector(payWithPayPal)andButtonType:BUTTON_118x24]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T06:47:50.583

代替

```
UIButton *button = [[PayPal getPayPalInst] getPayButtonWithTarget:self andAction:
                   @selector(payWithPayPal)andButtonType:BUTTON_118x24]; 
```

和

```
[[PayPal getInstance] fetchDeviceReferenceTokenWithAppID:yourAppId forEnvironment:ENV_LIVE withDelegate:self]; 
```

在 IB 中随心所欲地使用任何文本进行自定义`button`，或者在运行时分配新按钮并创建我上面在`viewDidLoad`.

# java - Selenium Grid 显示 WebDriverException 错误

> ID：15332662
> 
> 赞同：5
> 
> 时间：2013-03-11T06:44:15.463
> 
> 标签：java, selenium-grid

我的 Selenium Grid 显示错误：

`org.openqa.selenium.WebDriverException: The path to the driver executable must be set by the webdriver.chrome.driver system property;`

但我已经完美地指定了它（据我所知）

```
System.out.println("googlechrome"); 
capability = DesiredCapabilities.chrome(); 
capability.setBrowserName("chrome"); 
capability.setPlatform(org.openqa.selenium.Platform.WINDOWS); 
System.setProperty("webdriver.chrome.driver", "D:\\testing\\zip file\\chromedriver_win_26.0.1383.0\\chromedriver.exe");
driver = new ChromeDriver(); 
```

我不知道出了什么问题。同样的代码上周运行良好，但现在不行了。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-11T08:48:47.893

**如果您正在运行 Grid，则需要在节点**中设置 Chromedriver 可执行文件：

```
 java -jar selenium-server-standalone-2.31.0.jar -role node -hub http://localhost:4444/grid/register -maxSession 15 -browser browserName="chrome",version=ANY,platform=WINDOWS,maxInstances=15 -Dwebdriver.chrome.driver=lib\chromedriver.exe 
```

最重要的部分是`-D`在 chrome 浏览器设置之后的切换器。

此外，如果您运行多个节点，则该路径必须指向具体计算机（节点）上的 chromedriver 可执行文件。这就是为什么我将它作为相对路径而不是绝对路径的原因......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T08:29:57.480

这不是你需要的吗？

```
File file = new File("D:\testing\zip file\chromedriver_win_26.0.1383.0\chromedriver.exe");
system.setProperty("webdriver.chrome.driver", file.getAbsolutePath());
driver = new ChromeDriver(capability); 
```

# android - android中的标准XML解析器

> ID：15332666
> 
> 赞同：3
> 
> 时间：2013-03-11T06:44:22.110
> 
> 标签：android, xml-parsing, standards

android中是否有标准的xml解析器，我可以在其中放置任何标准的RSS链接，它会给我结果？我找到了一个示例，但我必须指定项目的路径。像这个链接 [http://www.rssboard.org/files/sample-rss-2.xml](http://www.rssboard.org/files/sample-rss-2.xml)

```
 try {

        URL conn = new URL("http://www.rssboard.org/files/sample-rss-2.xml");
        XmlParserHelper helper = new XmlParserHelper(conn.openStream(), "rss");

        final String TITLES = "language";
        XmlParseObject object = helper.createObject(TITLES, "//channel//item//title");
        object.setParseAttributes();
        object.setParseContent();

        Map<String, List<XmlObject>> results = helper.parse();
        List<XmlObject> titlesList = results.get(TITLES);
        for (XmlObject title : titlesList) {
            Log.d("Guid:", title.toString());
        }
    } catch (Exception e) {
        e.printStackTrace();
    }

   public class XmlParserHelper 
 {
protected String mRootName = "";
protected InputStream mXmlStream = null;
protected List<XmlParseObject> mParseList = new ArrayList<XmlParseObject>();

/**
 * Initialize xml helper with file stream
 * @param xmlStream input xml stream
 */
public XmlParserHelper(InputStream xmlStream, String rootName) 
{
    this.mXmlStream = xmlStream;
    this.mRootName = rootName;
}
/**
 * Point parse all attributes for XPath
 * @param objectName key for attributes list in response
 * @param XPath path to tag
 */
public void createAttributesObject(String objectName, String XPath) 
{
    XmlParseObject currentObject = new XmlParseObject(objectName, XPath);
    currentObject.setParseAttributes();
    mParseList.add(currentObject);
}
public void createContentObject(String objectName, String XPath) 
{
    XmlParseObject currentObject = new XmlParseObject(objectName, XPath);
    currentObject.setParseContent();
    mParseList.add(currentObject);
}
public XmlParseObject createObject(String objectName, String XPath) 
{
    XmlParseObject currentObject = new XmlParseObject(objectName, XPath);
    mParseList.add(currentObject);
    return currentObject;
}
public Map<String, List<XmlObject>> parse() throws Exception 
{
    if (mRootName.equals("")) 
    {
        throw new Exception("Root tag must be defined");
    }
    RootElement root = new RootElement(mRootName);
    for (XmlParseObject parselable : mParseList) 
    {
        parselable.configurateListenersForRoot(root);
    }
    try {
        Xml.parse(mXmlStream, Xml.Encoding.UTF_8, root.getContentHandler());
    } catch (Exception e) {
        e.printStackTrace();
        throw new RuntimeException(e);
    }
    Map<String, List<XmlObject>> result = new HashMap<String, List<XmlObject>>();
    for (XmlParseObject parselable : mParseList) 
    {
        result.put(parselable.getName(), parselable.getResults());
    }
    return result;
} 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T07:00:00.910

```
 URL url = new URL("http://www.rssboard.org/files/sample-rss-2.xml");        
            XmlPullParserFactory factory = XmlPullParserFactory.newInstance();
            factory.setNamespaceAware(false);
            XmlPullParser xpp = factory.newPullParser();
            xpp.setInput(url.openConnection().getInputStream(), "UTF_8"); 
            //xpp.setInput(getInputStream(url), "UTF-8");

            boolean insideItem = false;

                // Returns the type of current event: START_TAG, END_TAG, etc..
            int eventType = xpp.getEventType();
            while (eventType != XmlPullParser.END_DOCUMENT) {
                if (eventType == XmlPullParser.START_TAG) {

                    if (xpp.getName().equalsIgnoreCase("item")) {
                        insideItem = true;
                    } else if (xpp.getName().equalsIgnoreCase("title")) {
                        if (insideItem)
                            headlines.add(xpp.nextText()); //extract the headline
                    } else if (xpp.getName().equalsIgnoreCase("link")) {
                        if (insideItem)
                            links.add(xpp.nextText()); //extract the link of article
                    }
                }else if(eventType==XmlPullParser.END_TAG && xpp.getName().equalsIgnoreCase("item")){
                    insideItem=false;
                }

                eventType = xpp.next(); //move to next element
            }

        } catch (MalformedURLException e) {
            e.printStackTrace();
        } catch (XmlPullParserException e) {
            e.printStackTrace();
        } catch (IOException e) {
            e.printStackTrace();
        } 
```

根据您的需要修改上述内容。我使用了 XmlPullParser。

# javascript - TinyMCE 在 IE8 浏览器中不显示网页内容

> ID：15332667
> 
> 赞同：18
> 
> 时间：2013-03-11T06:44:26.483
> 
> 标签：javascript, internet-explorer-8, tinymce, text-editor

当我从网页粘贴内容时，`tinymce`IE8 中的编辑器不显示内容。

嗨，我正在添加我得到的图像。![在此处输入图像描述](../Images/e16d17f3c1e0dfe1181fc248f2f37625.png)

**我的问题是** 1.我从网页[http://ch.tbe.taleo.net/CH02/ats/careers/requisition.jsp?org=TRAILERPARK&cws=1&rid=148](http://ch.tbe.taleo.net/CH02/ats/careers/requisition.jsp?org=TRAILERPARK&cws=1&rid=148)复制内容 并尝试粘贴到我的 tinymce 编辑器在Ie8中打开.. 2.结果如图中红色框所示

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-09T12:23:11.063

请参阅向[TinyMCE 字体选项添加新字体](https://stackoverflow.com/questions/14170758/adding-new-fonts-to-tinymce-font-options)

您要复制的网站使用（请参阅源代码）：

```
@font-face
    {
        font-family: "Museo Slab W01 1000";
        src: url("http://www.trailerpark.com/Fonts/ee02ec61-b42e-49bb-9942-0793380267f5.eot?iefix");
        src:
            url("http://www.trailerpark.com/Fonts/f6e64e68-be62-481f-bcf3-923028fc62e0.svg#f6e64e68-be62-481f-bcf3-923028fc62e0") format("svg"),
            url("http://www.trailerpark.com/Fonts/b6bcb198-882f-4f57-a02c-07e8155aab5f.woff") format("woff"),
            url("http://www.trailerpark.com/Fonts/cfa01f25-bb4c-4a09-8ba3-8afafcbb3508.ttf") format("truetype");
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-26T07:35:25.820

使用方法类型：编码：“原始”

函数 exilTinyMCEInit(args) {

```
tinyMCE.init({
            mode : "exact",
            theme : "advanced",
            plugins : "paste",
            elements : args,
            theme_advanced_buttons1 : "bold,italic,underline,strikethrough,|,bullist,numlist,undo,redo",
            theme_advanced_buttons2 : "",
            theme_advanced_buttons3 : "",
            theme_advanced_buttons4 : "",
            theme_advanced_toolbar_location : "bottom",
            theme_advanced_toolbar_align : "center",
            theme_advanced_resizing : false,
            onchange_callback : "exilTinyMCEOnChangeHandler",
            encoding : "raw",
            setup : function(ed) {
                var curElement = P2.getFieldObject(ed.id);
                if (curElement.disabled || curElement.readOnly) {
                    ed.settings.readonly = true;
                } else {
                    ed.settings.readonly = false;
                }
            }
        }); 
```

}

# mysql - 如何使用 Zend Framework 2 运行原始 SQL 查询

> ID：15332671
> 
> 赞同：17
> 
> 时间：2013-03-11T06:44:48.557
> 
> 标签：mysql, zend-framework2

有没有办法在 Zend Framework 2 中将 SQL 字符串作为查询执行？

我有一个这样的字符串：

```
$sql = "SELECT * FROM testTable WHERE myColumn = 5" 
```

现在我想直接执行这个字符串。

* * *

## 回答 #1

> 赞同：55
> 
> 时间：2013-03-11T07:39:30.450

只需将 sql 字符串传递给您的数据库适配器，如下所示：

```
$resultSet = $adapter->query($sql, \Zend\Db\Adapter\Adapter::QUERY_MODE_EXECUTE); 
```

如果你想传递参数：

```
$sql = "SELECT * FROM testTable WHERE myColumn = ?";
$resultSet = $adapter->query($sql, array(5)); 
```

编辑：请注意，查询方法并不总是返回结果集。当它的结果集产生 query( `SELECT`) 时，它返回一个`\Zend\Db\ResultSet\ResultSet`else( `INSERT`, `UPDATE`, `DELETE`, ...) 它将返回一个`\Zend\Db\Adapter\Driver\ResultInterface`.

当你将第二个参数留空时，你会得到一个`\Zend\Db\Adapter\Driver\StatementInterface`你可以执行的。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-03-11T08:26:52.863

```
use Zend\Db\Sql\Sql;
use Zend\Db\Adapter\Adapter;

$dbAdapterConfig = array(
    'driver'   => 'Mysqli',
    'database' => 'dbname',
    'username' => 'dbusername',
    'password' => 'dbuserpassword'
);
$dbAdapter = new Adapter($dbAdapterConfig);

$sql = new Sql($dbAdapter);
$select = $sql->select();
$select->from('testTable');
$select->where(array('myColumn' => 5));

$statement = $sql->prepareStatementForSqlObject($select);
$result = $statement->execute(); 
```

S. 文档：[Zend\Db](http://framework.zend.com/manual/2.1/en/index.html#zend-db) → [Zend\Db\Sql](http://framework.zend.com/manual/2.1/en/modules/zend.db.sql.html)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2015-03-28T10:27:15.900

如果您使用的是 tableGateway，则可以使用此语句运行原始 SQL 查询，

```
$this->tableGateway->getAdapter()->driver->getConnection()->execute($sql); 
```

其中 $sql 与您的原始查询有关。这对于没有本机 ZF2 对应项（如 TRUNCATE / INSERT SELECT 语句）的查询很有用。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-02-08T09:47:30.663

如果你`EntityManager`手上有 $em，你可以这样做：

```
 $select = $em->getConnection()->executeQuery("
        SELECT a.id, a.title, a.announcement, asvc.service_id, COUNT(*) AS cnt,
            GROUP_CONCAT(asvc.service_id SEPARATOR \", \") AS svc_ids
        FROM article AS a
        JOIN articles_services AS asvc ON asvc.article_id = a.id
        WHERE
        asvc.service_id IN (
            SELECT tsvc.service_id
            FROM tender AS t
            JOIN tenders_services AS tsvc ON tsvc.tender_id = t.id
            WHERE t.id = :tenderId
        )
        GROUP BY a.id
        ORDER BY cnt DESC, a.id DESC
        LIMIT :articlesCount
    ", [
        'articlesCount' => 5,
        'tenderId' => $tenderId,
    ], [
        'articlesCount' => \PDO::PARAM_INT,
    ]);

    $result = $select->fetchAll(); // <-- here are array of wanted rows 
```

我认为这种执行复杂查询的方式最适合 Zend。但可能我在 Zend 中还不是很聪明。很高兴看到它是否对某人有帮助。

# ios - iOS MDM 策略

> ID：15332672
> 
> 赞同：5
> 
> 时间：2013-03-11T06:44:52.327
> 
> 标签：ios, mdm

我需要准备一份关于 iOS 移动设备管理的演示文稿。我被要求包括已实施的政策，并选择其中一项并详细描述。问题是，我不知道存在哪些不同的政策。请帮帮我。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-11T15:19:32.147

这是您需要了解的有关 MDM 和 MDM 的所有信息的链接。

**无线配置文件交付概念**

[http://developer.apple.com/library/ios/#documentation/NetworkingInternet/Conceptual/iPhoneOTAConfiguration/OTASecurity/OTASecurity.html](http://developer.apple.com/library/ios/#documentation/NetworkingInternet/Conceptual/iPhoneOTAConfiguration/OTASecurity/OTASecurity.html)

**MDM**

（这个需要访问 Apple Enterprise Developer Program） [http://adcdownload.apple.com//Documents/mobile_device_management_protocol/mobile_device_management_protocol.pdf](http://adcdownload.apple.com//Documents/mobile_device_management_protocol/mobile_device_management_protocol.pdf)

逆向工程 MDM 协议：

[http://media.blackhat.com/bh-us-11/Schuetz/BH_US_11_Schuetz_InsideAppleMDM_WP.pdf](http://media.blackhat.com/bh-us-11/Schuetz/BH_US_11_Schuetz_InsideAppleMDM_WP.pdf)

**企业部署指南**

[http://manuals.info.apple.com/en_US/Enterprise_Deployment_guide.pdf](http://manuals.info.apple.com/en_US/Enterprise_Deployment_guide.pdf)

**配置文件指南**

[http://developer.apple.com/library/ios/#featuredarticles/iPhoneConfigurationProfileRef/Introduction/Introduction.html](http://developer.apple.com/library/ios/#featuredarticles/iPhoneConfigurationProfileRef/Introduction/Introduction.html)

*更新 1*

这是允许游戏中心如何工作的示例。假设您有一台设备在 MDM 中注册。

*   在某个时刻，MDM 服务器决定您（您的设备）应该被禁止运行游戏中心（例如，这是您的企业策略）。
*   MDM 服务器生成一个安装配置文件命令并将其放入设备的待处理命令队列中。
*   MDM 服务器向您的设备发送推送通知
*   您的设备接收推送通知和联系人返回到 MDM 服务器
*   您的设备请求任何未完成的命令
*   您的设备会收到安装配置文件的命令。作为此命令的一部分，您将获得一个包含限制有效负载的配置文件。
*   此限制有效负载将具有一个值为 false 的键 allowGameCenter
*   您的设备将保存此配置文件
*   此后将禁止用户运行游戏中心。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-11T06:48:10.170

如果您在设备上安装了自定义配置，以下是您可以对设备进行的配置和查询列表。这些查询可以由 MDM 进行

支持的可配置项

帐户 • Exchange ActiveSync • IMAP/POP 电子邮件 • Wi-Fi • VPN • LDAP • CardDAV • CalDAV • 订阅的日历

密码策略 • 设备上需要密码 • 允许简单值 • 需要字母数字值 • 最小密码长度 • 最少复杂字符数 • 最长密码使用期限 • 自动锁定前的时间 • 密码历史记录 • 设备锁定宽限期 • 最大失败尝试次数

安全和隐私 • 允许将诊断数据发送给 Apple • 允许用户接受不受信任的证书 • 强制加密备份

仅受监督的限制 • 允许 iMessage • 允许 Game Center • 允许删除应用程序 • 允许 iBookstore • 允许 iBookstore 中的色情作品 • 启用 Siri 亵渎过滤器 • 允许手动安装配置文件

其他设置 • 凭证 • Web 剪辑 • SCEP 设置 • APN 设置 • 全局 HTTP 代理（仅限受监督） • 单应用程序模式（仅限受监督）

设备功能 • 允许安装应用程序 • 允许 Siri • 锁定时允许 Siri • 锁定时允许存折通知 • 允许使用相机 • 允许 FaceTime • 允许截屏 • 允许漫游时自动同步 • 允许同步最近的邮件 • 允许语音拨号 • 允许应用内购买 • 所有购买都需要商店密码 • 允许多人游戏 • 允许添加 Game Center 好友

应用程序 • 允许使用 YouTube • 允许使用 iTunes Store • 允许使用 Safari • 设置 Safari 安全首选项

iCloud • 允许备份 • 允许文档同步和键值同步 • 允许照片流 • 允许共享照片流

内容分级 • 允许播放露骨的音乐和播客 • 设置分级区域 • 设置允许的内容分级7

查询设备

除了配置之外，MDM 服务器还能够查询设备以获取各种信息。此信息可用于确保设备继续遵守所需的策略。

支持的查询

设备信息

• 唯一设备标识符 (UDID) • 设备名称 • iOS 和内部版本 • 型号名称和编号 • 序列号 • 容量和可用空间 • IMEI • 调制解调器固件 • 电池电量 • 监督状态

网络信息

• ICCID • 蓝牙® 和 Wi-Fi MAC 地址 • 当前运营商网络 • 用户运营商网络 • 运营商设置版本 • 电话号码 • 数据漫游设置（开/关）

合规性和安全信息

• 已安装配置描述文件 • 安装的证书有到期日期 • 列出所有强制实施的限制 • 硬件加密功能 • 存在密码

应用

• 安装的应用程序（应用程序 ID、名称、版本、大小和应用程序数据大小） • 安装的配置文件具有到期日期

# android - 如何检查日期之间的某个日期？

> ID：15332680
> 
> 赞同：0
> 
> 时间：2013-03-11T06:45:10.187
> 
> 标签：android, sqlite

我有一个数据库，其中有两列开始和结束。开始和结束是 DD.MM.YYYY 格式。

我有一个日期也是 DD.MM.YYYY 格式。**如何检查我的日期是否在开始和结束之间。**

请提出一些查询来检查这些条件并从其他列中获取数据。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T08:16:30.580

正如 Jon Skeet 所写，您应该以`yyyy-mm-dd`格式存储日期。

但是，可以通过重新排序字段（**如果**字符串中的字段具有固定长度）将您的日期值即时转换为正确的日期值：

```
SELECT *
FROM MyTable
WHERE '2013-03-11' BETWEEN substr(StartDate, 7, 4) || '-' ||
                           substr(StartDate, 4, 2) || '-' ||
                           substr(StartDate, 1, 2)
                       AND substr(EndDate, 7, 4) || '-' ||
                           substr(EndDate, 4, 2) || '-' ||
                           substr(EndDate, 1, 2) 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-11T06:55:43.043

使用下面的代码。它将返回两个日期之间的天数。日期格式为 YYYY-MM-DD

```
YourDatabse database=new YourDatabse (getApplicationContext(), 1);
 SQLiteDatabase sqlite=database.getReadableDatabase();
            Cursor fetch=sqlite.rawQuery("SELECT julianday('"+date2+"') - julianday('"+date1+"')", null);
            fetch.moveToFirst();
            sqlite.close();
            int noOfDays=fetch.getInt(0); 
```

# java - 生命射线

> ID：15332681
> 
> 赞同：7
> 
> 时间：2013-03-11T06:45:18.900
> 
> 标签：java, jsp, tags, liferay, liferay-6

在我的jsp中，我有以下代码：

```
<portlet:actionURL name="addDetails" var="addDetailsURL" />
<aui:form name="addDetails" action="<%=addDetailsURL.toString() %>" method="post" >
        <aui:input type="text" label="name:" name="name" value="" />
        <aui:input type="text" label="surname:" name="surname" value="" />
        <aui:input type="text" label="age:" name="age" value="" />
        <aui:button type="submit" value="addDetails" />
</aui:form> 
```

我正在使用liferay。我想提交将在 java 类中处理的数据。我的 java 类的功能很少。我应该如何在上面的jsp中指定它应该在提交表单后访问java中的特定函数？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-03-11T06:51:57.937

如果您的 portlet 继承`MVCPortlet`，只需创建一个与您的 actionURL 具有相同“名称”的公共方法，它接受一个`ActionRequest`and`ActionResponse`参数：

```
public void addDetails(ActionRequest req, ActionResponse rsp) {
    // ...
} 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-03-12T11:37:25.210

只是为了记录，您也可以使用注释。例如，你有这个 jsp：

```
<portlet:actionURL var="urlAction">
    <portlet:param name="javax.portlet.action" value="myAction"/>
</portlet:actionURL>

<aui:form action="${urlAction}" method="post">
    <aui:input type="text" label="name:" name="name" value="" />
    <aui:button type="submit" value="Submit" />
</aui:form> 
```

而你的这个Java方法`MVCPortlet`：

```
@ProcessAction(name = "myAction")
public void method(ActionRequest actionRequest, ActionResponse actionResponse) {
    // ...
} 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-03-11T06:50:22.997

如果您只想处理一项操作：

小门户

```
@Override
public void processAction(ActionRequest actionRequest, ActionResponse actionResponse) throws IOException, PortletException
{
    // TODO Auto-generated method stub
    super.processAction(actionRequest, actionResponse);
} 
```

JSP

```
<form action="<portlet:actionURL />" method="post">
    <aui:button type="submit" value="addDetails" />
</form> 
```

如果您想要多个操作方法：

```
public void myAction(ActionRequest request, ActionResponse response)
{
     Long id = ParamUtil.getLong(request, "myParam");
     // TODO
} 
```

JSP

```
<portlet:actionURL name="myAction" var="myActionVar">
    <portlet:param name="myParam" value="${currentElement.id}"></portlet:param>
</portlet:actionURL>

<a href="${myActionVar}">Click Me!</a> 
```

但你可能会这样做：

小门户

```
@Override
public void serveResource(ResourceRequest request, ResourceResponse response) throws IOException
{
    String action = request.getParameter("action");

    if(action.equalsIgnoreCase("myAction")){
        // handle AJAX call
    }
} 
```

JSP

```
<portlet:resourceURL var="resourceUrl" />
<input id="resourceURL" type="hidden" value="${resourceUrl}" /> 
```

JavaScript

```
$.post($('#resourceURL').val(),{
    action : 'myAction'
}).done(function(result){
    alert('Action completed successfully!')
}); 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-06-12T17:50:58.207

如果您不使用 MVCPortlet 而是使用类似 GenericPortlet 的东西，请向 actionURL 添加一个参数，如下所示：

```
<portlet:actionURL name="addDetails" var="addDetailsURL" >
<portlet:param name="method" value="addDetails"/>
</portlet:actionURL> 
```

然后在您的 processAction 方法中，以这种方式处理检查方法类型：

```
public void processAction(ActionRequest aReq, ActionResponse aResp) throws IOException,
            PortletException {

        final String method = aReq.getParameter("method");

        if ( method != null && method.equals("addDetails")) 
        {   
            addDetails(aReq, aResp);

        } 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2015-11-01T23:13:34.817

将此粘贴到您的控制器类中

```
public void addDetails(ActionRequest actionRequest, ActionResponse actionResponse) {
    //this method will be called on submitting the form
    System.out.println("addDetails");
} 
```

或者您可以将其用作

```
@ProcessAction(name="addDetails")
public void myaddDetails(ActionRequest actionRequest, ActionResponse actionResponse) {
    //this method will be called on submitting the form
    System.out.println("addDetails");
} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2014-07-13T13:48:18.147

如果您的 java 类正在扩展 MVCPortlet，那么只有方法名称应该与 actionURL 名称匹配，即 addDetails 。如果该类正在扩展 GenericPortlet，您将必须在您的方法之上指定相同的注释，例如 @ProcessAction(name="addDetails")。在这种情况下，您的方法的名称可以不同。

# ruby-on-rails - Rails 如何使用带有虚拟属性的 f.select

> ID：15332687
> 
> 赞同：0
> 
> 时间：2013-03-11T06:45:47.487
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

我有一个用户模型，它在数据库中包含 2 个布尔值 - 管理员和只读。基本上，这允许我拥有 3 级访问权限（只读、可编辑和管理员）。

我有一个允许管理员编辑其他用户权限的屏幕。我没有为 admin 和 readonly 的布尔值设置 2 个复选框，而是使用 f.select 创建了一个下拉列表，并创建了一个名为“permission”的虚拟属性。

就权限而言，保存用户时一切正常，唯一的是，当您转到特定用户的编辑页面时，它不会在下拉菜单中加载具有用户实际权限的页面。它只是将下拉列表中的第一个值加载为默认值。

我怎样才能使它在第一次加载用户编辑页面时显示用户的实际权限？

这是我的用户模型的虚拟属性代码：

```
# get the permission
    def permission
        if self.read_only
            @permission = 'readonly'
        elsif self.admin
            @permission = 'admin'
        else 
            @permission = 'editable'
        end
    end

    # Set the permission.
    def permission=(value)
        p "VALUE = #{value}"
        if value == 'readonly'
            self.read_only = true
            self.admin = false
            @permission = 'readonly'
        elsif value == 'admin'
            p "INSIDE admin"
            self.read_only = false
            p "before #{self.admin}"
            self.admin = true
            p "after #{self.admin}"
            @permission = 'admin'
        elsif value == 'editable'
            self.read_only = false
            self.admin = false
            @permission = 'editable'
        end
    end 
```

这是我的表单视图中的 f.select：

```
<%= f.select :permission, options_for_select([['Admin', 'admin'], ['Read Only', 'readonly'], ['Editable', 'editable']], {:disabled => @permissions_disabled}) %> 
```

我尝试使用 collection_select，但不知道如何填充列表。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T06:55:12.800

如[Rails f.select 中所述，试图禁用下拉列表被更改](https://stackoverflow.com/questions/15332620/rails-f-select-trying-to-disable-a-dropdown-from-being-changed/15332685)，你不需要`options_for_select`. 如果你删除它并传递第四个参数一个`selected`选项，你应该被设置。

```
<%= f.select :permission, [['admin', 'Admin'], ['readonly', 'Read Only'], ['editable', 'Editable']], { selected: 'readonly' }, { disabled: @permissions_disabled } %> 
```

但是给定上面的代码，即使没有`selected`选项，只要 f.object.permission 返回正确的值，你应该没问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T06:49:37.180

尝试将此添加到您的最后一个选项哈希中：`:selected => @user.permission`

例如：

```
<%= f.select :permission, options_for_select([['Admin', 'admin'], ['Read Only', 'readonly'], ['Editable', 'editable']], {:disabled => @permissions_disabled, :selected => @user.permission}) %> 
```

# windows-phone-7 - Windows Phone 7 开发 - 图像源问题

> ID：15332690
> 
> 赞同：-1
> 
> 时间：2013-03-11T06:46:00.920
> 
> 标签：windows-phone-7

在为 Windows Phone 7 开发项目时，我在 Grid 上添加了一个图像控件，并在 C# 中使用以下代码来设置图像源：-

```
 Uri nUri = new Uri("/TestImage.png", UriKind.Relative);
            BitmapImage nBitmapImage = new BitmapImage(nUri);
            FacebookImage.Source = nBitmapImage; 
```

问题是，每当我使用自定义图像时，当我在模拟器上构建和运行应用程序时，它们都不会出现。然而，如果我将上述代码中的图像文件名更改为默认包含在项目中的图像之一（ApplicationIcon.png），则图像会在运行时显示。我想知道这是否是代码或我正在使用的自定义图像文件的问题。我确保我正在创建的图像是正确的，并且具有与默认包含的图像相同的属性。有人可以帮我解决这个问题。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T06:53:31.057

在 Visual Studio 的解决方案资源管理器中单击您的自定义图片。然后，查看属性窗口（如果它已关闭，请按 F4）和“构建操作”行。它基本上告诉编译器如何将您的文件嵌入到应用程序中。ApplicationIcon.png 的构建动作应该是“内容”，只需为您的自定义图片设置相同的动作即可。

# android - PagerAdapter 类 instantiateItem 在 onCreate 中被自动调用两次

> ID：15332705
> 
> 赞同：2
> 
> 时间：2013-03-11T06:46:51.360
> 
> 标签：android, android-viewpager, android-pageradapter

我是viewpager的新手，我想使用viewpager创建视图，这里所有的东西都是动态的，所以我遵循这种方式，我的问题是instantiateItem（）在创建时被调用了两次。
创建

```
{
    pager = (ViewPager) findViewById(R.id.panelPager);
    adapter = new MyPagerAdapter();     
    pager.setAdapter(adapter);
}
public class MyPagerAdapter extends PagerAdapter {

        @Override 
        public Object instantiateItem(View collection,int position) {

            Log.d("Pos",""+position);
            //PagerView = new View(collection.getContext());
            LayoutInflater inflater = (LayoutInflater) collection.getContext()
                    .getSystemService(Context.LAYOUT_INFLATER_SERVICE);
            PagerView = inflater.inflate(R.layout.newmainviewpager, null, false);
            lvMenu=(ListView)PagerView.findViewById(R.id.lvMenuItem);
            imgMainItem=(ImageView)PagerView.findViewById(R.id.imgDisplay);
            addMenuItemAdapter.clear();
            addMenuItemAdapter.notifyDataSetChanged();
            addMenuItemAdapter.notifyDataSetInvalidated();
            String str[][] = datasource.GetSubMenuDetailsFromMenuId(MenuIdlst
                    .get(position).trim());
            Log.d("Str", "" + str.length);
            SubMnuIdlst.clear();
            SubMnuNamelst.clear();
            ArabicSubMnulst.clear();
            TypeIdlst.clear();
            TypeNamelst.clear();
            for (int i = 0; i < str.length; i++) {

                SubMnuIdlst.add(""+str[i][0]);
                SubMnuNamelst.add(""+str[i][2]);
                ArabicSubMnulst.add(""+str[i][3]);
                Log.d("SubMenuId",""+str[i][0]);
                Log.d("SubMenuName",""+str[i][2]);
                Log.d("SubMenuNameArabicMenu",""+str[i][3]);
            }
            String [][]TypeDetails=datasource.GetTypeDetailsFromMenuId(MenuIdlst.get(position));
            for (int i = 0; i < TypeDetails.length; i++) {
                TypeIdlst.add(TypeDetails[i][0]);
                TypeNamelst.add(TypeDetails[i][3]);
                Log.d("TypeId",""+TypeDetails[i][0]);
                Log.d("TypeName",""+TypeDetails[i][3]);

            }

            for(int i=0;i<SubMnuIdlst.size();i++)
            {
                //Pricelst.clear();
                for(int j=0;j<TypeIdlst.size();j++)
                {
                    String Price=datasource.getPriceFromSubMenuIdAndTypeId(TypeIdlst.get(j),SubMnuIdlst.get(i));
                    //Pricelst.add(Price);      
                    Log.d("Adaper",MenuIdlst.get(i)+","+SubMnuIdlst.get(i)+","+SubMnuNamelst.get(i)+","+
                            TypeIdlst.get(j)+","+TypeNamelst.get(j)+","+Price);
                    addMenuItemAdapter.add(MenuIdlst.get(i)+","+SubMnuIdlst.get(i)+","+SubMnuNamelst.get(i)+","+
                                        TypeIdlst.get(j)+","+TypeNamelst.get(j)+","+Price);
                }
            }

            byte[] photo =datasource.getImagePathFromSubMenuId(SubMnuIdlst.get(position));
            ByteArrayInputStream imageStream = new ByteArrayInputStream(photo);
            Bitmap theImage= BitmapFactory.decodeStream(imageStream);
            Bitmap bitmapScaled = Bitmap.createScaledBitmap(theImage, 100,80, true);
            Drawable drawable = new BitmapDrawable(bitmapScaled);
            imgMainItem.setBackgroundDrawable(drawable);

            lvMenu.setAdapter(addMenuItemAdapter);

            ((ViewPager) collection).addView(PagerView, 0);
            return PagerView;

        }

        @Override
        public void destroyItem(ViewGroup collection, int position, Object view) {
                ((ViewPager) view).removeView((View) view);
        }

/**
 * Determines whether a page View is associated with a specific key object
 * as returned by instantiateItem(ViewGroup, int). This method is required
 * for a PagerAdapter to function properly.
 * @param view Page View to check for association with object
 * @param object Object to check for association with view
 * @return
 */
        @Override
        public boolean isViewFromObject(View view, Object object) {
            return view == ((View) object);
        }

    /**
     * Called when the a change in the shown pages has been completed.  At this
     * point you must ensure that all of the pages have actually been added or
     * removed from the container as appropriate.
     * @param arg0 The containing View which is displaying this adapter's
     * page views.
     */
        @Override
        public void finishUpdate(ViewGroup arg0) {}

        @Override
        public void restoreState(Parcelable arg0, ClassLoader arg1) {}

        @Override
        public Parcelable saveState() {
                return null;
        }

        @Override
        public void startUpdate(ViewGroup arg0) {}
        @Override
        public int getCount() {
            // TODO Auto-generated method stub
            return  MenuIdlst.size();
        }

    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-05-27T09:36:48.867

这是在视图页面创建下一个视图并将其存储以从当前视图快速切换到下一个视图时调用它两次的行为，基本上它为当前视图创建其左右元素，以便您可以在起始页面向任何方向滚动页面因为没有左页，所以它只被调用两次。您还可以更改您想要创建和保留的视图数量，但总的来说，我认为最小（不确定但实际上有时会遇到）是 3

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T12:21:27.293

可能是您的 viewpager 嵌套在依赖于其他视图的视图组中（例如设置了 layout_weight 的 LinearLayout 或引用其他视图的 RelativeLayout 以计算其高度和/或宽度）？如果是这样，这可能是由于父视图的多个布局请求，因为它依赖于其他视图。如果这是原因，请尝试优化您的布局。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-08-11T22:02:33.853

解决此问题的其他方法是覆盖`getCount()`定义要在寻呼机中加载的元素数量的方法。

```
 @Override
    public int getCount() {
       return NUMBER_OF_PAGES;
   } 
```

# java - 表单中的 Spring Auto 实体填充

> ID：15332716
> 
> 赞同：0
> 
> 时间：2013-03-11T06:48:17.320
> 
> 标签：java, spring, hibernate, spring-mvc

我正在使用hibernate和spring mvc，我有一个场景，我有一个对象A和一个子对象C。现在更新Entity AI使用spring mvc的模型对象，这会通过反射自动填充表单中的所有键，实体 C 除外。

我目前正在做的是：

1）为外键添加一个隐藏的形式，

2) 显式获取实体 C。

3）在实体A中设置实体C。

4) 更新实体 A。

上述方法的问题是，它存在安全漏洞，我可以通过 firebug 更改隐藏变量。其次，即使我忽略了这个安全问题，我也需要自己获取实体，然后必须再次返回对象，我认为这是一项乏味的任务。

有没有更好的方法通过 form/spring-from 自动更新整个对象。

# c# - 用它们的符号替换 URL 编码的数据

> ID：15332724
> 
> 赞同：0
> 
> 时间：2013-03-11T06:48:56.863
> 
> 标签：c#, asp.net-mvc

嗨，我正在尝试格式化我的 Url，以使其看起来更加用户友好。到目前为止，我设法用“-”替换了空格，但似乎有特殊字符，如 # 和 : 显示为编码数据。这就是我是说：

```
http://localhost:51208/Home/Details/C%23-in-Depth%2c-Second-Edition/BookId-3 
```

“#”符号显示为 %23，“，”显示为 %2c。我希望能够用其原始符号替换此编码。

这种方式存在吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-11T06:50:23.103

哦不，你完全不想用`#`. 该符号在 url 中具有特殊含义。它代表[`fragment identifier`](http://en.wikipedia.org/wiki/Fragment_identifier)并且它的值永远不会发送到服务器。这基本上意味着如果`#`您的 url 中有一个符号，那么它后面的所有内容都会被截断并且永远不会发送到服务器。您可以[`following post`](https://stackoverflow.com/a/25486/29407)查看 StackOverflow 用于格式化问题标题中的 slug 的内容。您可以通过此替换功能运行您的字符串，以确保不留下任何危险字符。

我还建议您阅读[`following blog post`](http://www.hanselman.com/blog/ExperimentsInWackinessAllowingPercentsAnglebracketsAndOtherNaughtyThingsInTheASPNETIISRequestURL.aspx)Scott Hanselman 的文章，他介绍了如果您尝试在 url 的路径部分发送特殊字符，您可能会遇到 IIS 的各种场景。我在这里引用他的结论：

> 在为在请求路径中获得疯狂的东西所做的所有努力之后，值得一提的是，简单地将值保留为查询字符串的一部分（还记得本文开头的 WAY 吗？）更容易、更清洁、更灵活，而且更多安全的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T06:54:23.243

只需将“#”替换为“sharp”，将“:”替换为“-”，您不能只将这些特殊字符放在 url

# extjs - 使用 Ext JS 为标签添加书签？

> ID：15332730
> 
> 赞同：3
> 
> 时间：2013-03-11T06:49:12.323
> 
> 标签：extjs, extjs4.1, tabpanel

在 Ext jS*中为标签添加书签*需要一些帮助。

我有一个包含多个选项卡的选项卡面板，单击各个选项卡会更改 URL。我目前正在使用哈希。*但是，当我使用它的“ id + delimiter + other id's* ” URL 直接导航到页面时，我无法恢复应用程序。

这是示例代码：

```
launch : function() {
    Ext.state.Manager.setProvider(new Ext.state.CookieProvider(
            {
                expires : new Date(new Date().getTime()
                        + (1000 * 60 * 60 * 24 * 7))
            }));

var  tabPanel=new Ext.TabPanel({
    width:1000,
    title:'TabPanel',
    height:700,
    id:'main-tab',
    activeTab:0,
    layout:'fit',       
    region:'north', 
    stateful:true,
    stateId:'tp1',
    stateEvents:['tabchange'],
    getState:function(){
        return {
            activeTab:this.items.findIndex('id',this.getActiveTab().id)             
        };
    },
    applyState:function(s){
        this.setActiveTab(s.activeTab);
    },
    items:
        [
          //included tabID and title
         ],
     listeners:{            
                tabchange:function(tabPanel,currTab){                                       
                    window.location.hash='#myTabs/'+currTab.id; //config.position;
                    console.log(window.location);                   
                }
        }
});

var viewport=new Ext.Viewport({
    id:'main-viewport',     
    layout : 'fit',
    title:'Main',
    deferredRender:true,
    items : [ tabPanel ],
    width:200,
    region:'west'
});

viewport.doLayout(); 
```

`expire`我已经通过使用配置（使用`Ext.state.Manager`and ）保存页面的当前状态来解决当前的问题`Ext.state.CookieProvider`。

但是，我使用的 url 应该**在任何时间长度内都有效**。

此外，如果我上次访问的 URL 是*.../apps/Bookmarking/services.html#myTabs/5* 并且我将我的 URL 更改回*.../apps/Bookmarking/services.html*，它应该回到我的默认值（在我的情况下是第一个）选项卡。相反，它导航回*.../apps/Bookmarking/services.html#myTabs/5*。

我该如何纠正？

提前致谢！

PS：请查看此链接以了解我针对此问题所做的全部更改 [http://www.sencha.com/forum/showthread.php?154174-Bookmarking-and-History-in-extjs](http://www.sencha.com/forum/showthread.php?154174-Bookmarking-and-History-in-extjs)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T15:29:23.633

我认为您在查看[Ext.util.History](http://docs.sencha.com/ext-js/4-0/#!/api/Ext.util.History)时走在正确的轨道上。不幸的是，我认为您刚刚在[他们的示例](http://dev.sencha.com/deploy/ext-4.0.0/examples/history/history.html#main-tabs%3atab4)中发现了一个错误。

而不是总是在渲染后设置活动选项卡；

```
function onAfterRender() {
    ...

    var activeTab1 = Ext.getCmp('main-tabs').getActiveTab(),
        activeTab2 = activeTab1.getActiveTab();

    onTabChange(activeTab1, activeTab2);
} 
```

如果没有令牌，可能会尝试设置它；

```
Ext.util.History.on('ready', function(history){
    if ( !history.getToken() ) {
        var activeTab1 = Ext.getCmp('main-tabs').getActiveTab(),
            activeTab2 = activeTab1.getActiveTab();

        onTabChange(activeTab1, activeTab2);
    }
}, this); 
```

# java - 如何在java中将列表数据转换为json

> ID：15332733
> 
> 赞同：26
> 
> 时间：2013-03-11T06:49:20.917
> 
> 标签：java, json, list

我有一个函数，它像`List`在 java 类中一样返回数据。现在根据我的需要，我必须将其转换为`Json`格式。

下面是我的功能代码片段：

```
public static List<Product> getCartList() {
    List<Product> cartList = new Vector<Product>(cartMap.keySet().size());
    for(Product p : cartMap.keySet()) {
        cartList.add(p);
    }
    return cartList;
} 
```

我尝试使用此代码进行转换`json`，但由于函数属于 List 类型，因此出现类型不匹配错误...

```
public static List<Product> getCartList() {
    List<Product> cartList = new Vector<Product>(cartMap.keySet().size());
    for(Product p : cartMap.keySet()) {
        cartList.add(p);
    }

    Gson gson = new Gson();
     // convert your list to json
     String jsonCartList = gson.toJson(cartList);
     // print your generated json
     System.out.println("jsonCartList: " + jsonCartList);

     return jsonCartList;

        } 
```

请帮我解决这个问题。

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2013-03-11T06:59:58.003

使用[gson](https://code.google.com/p/google-gson/)就简单多了。使用以下代码片段：

```
 // create a new Gson instance
 Gson gson = new Gson();
 // convert your list to json
 String jsonCartList = gson.toJson(cartList);
 // print your generated json
 System.out.println("jsonCartList: " + jsonCartList); 
```

### 从 JSON 字符串转换回您的 Java 对象

```
 // Converts JSON string into a List of Product object
 Type type = new TypeToken<List<Product>>(){}.getType();
 List<Product> prodList = gson.fromJson(jsonCartList, type);

 // print your List<Product>
 System.out.println("prodList: " + prodList); 
```

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2013-03-11T06:52:23.373

```
public static List<Product> getCartList() {

    JSONObject responseDetailsJson = new JSONObject();
    JSONArray jsonArray = new JSONArray();

    List<Product> cartList = new Vector<Product>(cartMap.keySet().size());
    for(Product p : cartMap.keySet()) {
        cartList.add(p);
        JSONObject formDetailsJson = new JSONObject();
        formDetailsJson.put("id", "1");
        formDetailsJson.put("name", "name1");
       jsonArray.add(formDetailsJson);
    }
    responseDetailsJson.put("forms", jsonArray);//Here you can see the data in json format

    return cartList;

} 
```

您可以通过以下形式获取数据

```
{
    "forms": [
        { "id": "1", "name": "name1" },
        { "id": "2", "name": "name2" } 
    ]
} 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2019-03-12T07:24:37.200

试试这些简单的步骤：

```
ObjectMapper mapper = new ObjectMapper();
String newJsonData = mapper.writeValueAsString(cartList);
return newJsonData;
ObjectMapper() is com.fasterxml.jackson.databind.ObjectMapper.ObjectMapper(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-11T06:53:27.730

我编写了自己的函数来返回填充组合框的对象列表：

```
public static String getJSONList(java.util.List<Object> list,String kelas,String name, String label) {
        try {
            Object[] args={};
            Class cl = Class.forName(kelas);
            Method getName = cl.getMethod(name, null);
            Method getLabel = cl.getMethod(label, null);
            String json="[";
            for (int i = 0; i < list.size(); i++) {
            Object o = list.get(i);
            if(i>0){
                json+=",";
            }
            json+="{\"label\":\""+getLabel.invoke(o,args)+"\",\"name\":\""+getName.invoke(o,args)+"\"}";
            //System.out.println("Object = " + i+" -> "+o.getNumber());
            }
            json+="]";
            return json;
        } catch (ClassNotFoundException ex) {
            Logger.getLogger(JSONHelper.class.getName()).log(Level.SEVERE, null, ex);
        } catch (Exception ex) {
            System.out.println("Error in get JSON List");
            ex.printStackTrace();
        }
        return "";
    } 
```

并从任何地方调用它：

```
String toreturn=JSONHelper.getJSONList(list, "com.bean.Contact", "getContactID", "getNumber"); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-04-17T04:34:43.017

试试下面的`**`Gson`**`图书馆。

早期的转换列表格式为：

```
[Product [Id=1, City=Bengalore, Category=TV, Brand=Samsung, Name=Samsung LED, Type=LED, Size=32 inches, Price=33500.5, Stock=17.0], Product [Id=2, City=Bengalore, Category=TV, Brand=Samsung, Name=Samsung LED, Type=LED, Size=42 inches, Price=41850.0, Stock=9.0]] 
```

转换源从这里开始。

```
//** Note I have created the method toString() in Product class.

//Creating and initializing a java.util.List of Product objects
List<Product> productList = (List<Product>)productRepository.findAll();

//Creating a blank List of Gson library JsonObject
List<JsonObject> entities = new ArrayList<JsonObject>();

//Simply printing productList size
System.out.println("Size of productList is : " + productList.size());

//Creating a Iterator for productList
Iterator<Product> iterator = productList.iterator();

//Run while loop till Product Object exists.
while(iterator.hasNext()){

    //Creating a fresh Gson Object
    Gson gs = new Gson();

    //Converting our Product Object to JsonElement 
    //Object by passing the Product Object String value (iterator.next())
    JsonElement element = gs.fromJson (gs.toJson(iterator.next()), JsonElement.class);

    //Creating JsonObject from JsonElement
    JsonObject jsonObject = element.getAsJsonObject();

    //Collecting the JsonObject to List
    entities.add(jsonObject);

}

//Do what you want to do with Array of JsonObject
System.out.println(entities); 
```

转换后的 Json 结果是：

```
[{"Id":1,"City":"Bengalore","Category":"TV","Brand":"Samsung","Name":"Samsung LED","Type":"LED","Size":"32 inches","Price":33500.5,"Stock":17.0}, {"Id":2,"City":"Bengalore","Category":"TV","Brand":"Samsung","Name":"Samsung LED","Type":"LED","Size":"42 inches","Price":41850.0,"Stock":9.0}] 
```

希望这会帮助很多人！

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-03-28T05:53:10.347

```
JSONObject responseDetailsJson = new JSONObject();
JSONArray jsonArray = new JSONArray();

List<String> ls =new  ArrayList<String>();

for(product cj:cities.getList()) {
    ls.add(cj);
    JSONObject formDetailsJson = new JSONObject();
    formDetailsJson.put("id", cj.id);
    formDetailsJson.put("name", cj.name);
    jsonArray.put(formDetailsJson);
}

responseDetailsJson.put("Cities", jsonArray);

return responseDetailsJson; 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-10-20T14:51:10.223

您可以使用以下使用杰克逊库的方法

```
public static <T> List<T> convertToList(String jsonString, Class<T> target) {
    if(StringUtils.isEmpty(jsonString)) return List.of();

        return new ObjectMapper().readValue(jsonString, new ObjectMapper().getTypeFactory().
                constructCollectionType(List.class, target));
    } catch ( JsonProcessingException | JSONException e) {
        e.printStackTrace();
        return List.of();
    }
} 
```

# javascript - 设备方向不起作用

> ID：15332735
> 
> 赞同：-1
> 
> 时间：2013-03-11T06:49:28.803
> 
> 标签：javascript, html, device-orientation, uideviceorientation

好吧，我有这个小脚本：

```
<script>
window.addEventListener('deviceorientation', function(event) {
  var a = event.alpha;
  var b = event.beta;
  var g = event.gamma;
}, false);
</script>

<script>
setInterval('alert(""+g+"");', '1000');
</script> 
```

哪个应该添加`deviceorientation`，将其附加到页面上，并每隔 1 秒提醒当前方向是什么，即 gamma。

但是，它不起作用？没有任何警报！任何提示...想法...？

**编辑：我在控制台日志中收到“未捕获的 ReferenceError：g 未定义”......但它已定义！**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T07:17:33.320

该`var`语句将变量的范围设置为它所在的函数。

您正在尝试访问全局范围内的局部变量——它不存在。

此外，在 a 发生之前您不会设置变量`deviceorientation`，但您会一直尝试读取它。

您将不得不像这样重写您的代码：

```
<script>
window.addEventListener('deviceorientation', function(event) {

  var a = event.alpha;
  var b = event.beta;
  var g = event.gamma;

  console.log( g.toString() ); // Better to use a non-blocking method like console.log to display results.

}, false);
</script> 
```

# javascript - 日期格式在 IE7 中不起作用

> ID：15332736
> 
> 赞同：0
> 
> 时间：2013-03-11T06:49:30.027
> 
> 标签：javascript

我只想要比较两个日期的时间戳，但它不会将字符串转换为日期。我试过这段代码：

```
var a_date = new Date('2013-03-25');
var b_date = new Date('25-03-2013');
alert(a_date + '***' + b_date); 
```

我在 Firefox 和 IE7 上都试过了。Date`a_date`在 Firefox 中有效，但在 IE7 中无效（它提供`Invalid Date`价值），`b_date`在 IE7 上有效，但在 Firefox 中无效（它提供`NaN`价值）。有什么方法可以只使用一种日期格式来运行两者？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T06:55:04.077

实例化日期有四种方法（[https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Date](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Date)）：

```
var d = new Date();
var d = new Date(milliseconds);
var d = new Date(dateString);
var d = new Date(year, month, day, hours, minutes, seconds, milliseconds); 
```

对于其他格式，您必须编写自己的转换器。请参阅[在 jQuery 和 Internet Explorer 中将字符串转换为日期？](https://stackoverflow.com/questions/4052660/convert-string-to-date-in-jquery-and-internet-explorer)例如

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T06:58:00.143

使用值 0-11 作为月份字段[是 Date 对象](http://developer.mozilla.org/en/Core_JavaScript_1.5_Reference/Global_Objects/Date)的定义。

我相信使用 String 的构造函数依赖于系统（更不用说依赖于语言环境/时区），因此您最好使用将年/月/日指定为单独参数的构造函数。

顺便说一句，在 Firefox 中，

```
new Date("04/02/2008"); 
```

对我来说很好 - 它会解释斜杠，但不会解释连字符。我认为这证明了我的观点，即使用 String 构造 Date 对象是有问题的。改为使用月/日/年的显式值：

```
 new Date(2008, 3, 2); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-11T09:17:47.960

它的工作由我执行此代码：

```
var a_date = document.getElementById('Date_From').value;
var parts1 = a_date.split('-'); 
var b_date = document.getElementById('Date_To').value;
var parts2 = b_date.split('-');

var a_date_1 = new Date( parseInt( parts1[0], 10 ), parseInt( parts1[1], 10 ) - 1, parseInt( parts1[2], 10 ) );
var a_date_2 = new Date( parseInt( parts2[0], 10 ), parseInt( parts2[1], 10 ) - 1, parseInt( parts2[2], 10 ) );
       var date1 = a_date_1.getTime();
       var date2 = a_date_2.getTime();

   if(date1 <= date2) {
      return true;
    } else {
        return false;
    } 
```

特别感谢@Salman A 和@Juhana

# javascript - 防止在浏览器中导航回来

> ID：15332739
> 
> 赞同：0
> 
> 时间：2013-03-11T06:49:39.643
> 
> 标签：javascript, jquery

我想防止使用 JavaScript 或 jQuery 向后导航（防止浏览器中的退格键和后退按钮）。我的语言是coldfusion 8。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T06:58:36.620

使用退格键防止后退的 Jquery 代码。添加到脚本

```
$(document).unbind('keydown').bind('keydown', function (event) {
var doPrevent = false;
if (event.keyCode === 8) {
    var d = event.srcElement || event.target;
    if ((d.tagName.toUpperCase() === 'INPUT' && (d.type.toUpperCase() === 'TEXT' || d.type.toUpperCase() === 'PASSWORD')) 
         || d.tagName.toUpperCase() === 'TEXTAREA') {
        doPrevent = d.readOnly || d.disabled;
    }
    else {
        doPrevent = true;
    }
}

 if (doPrevent) {
    event.preventDefault();
 }
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T07:18:45.360

您必须在您不希望用户导航回的所有页面的代码中执行此操作：

```
 <html>
    <head>
    <script type="text/javascript">    
    window.history.forward();
    function prevent()
    {
     window.history.forward(); 
    }
    </script>
    </head>
    <body onload="prevent();" onpageshow="if (event.persisted) prevent();" onunload="">
    <!--content here-->
    </body>
    </html> 
```

# javascript - 在 iOS6 上从相机上传图像的 HTML/JS

> ID：15332743
> 
> 赞同：2
> 
> 时间：2013-03-11T06:50:11.937
> 
> 标签：javascript, html, ios6

我有这个片段：

```
<script>
        var reader = new FileReader();
        reader.onload = (function(theFile) {
            return function(e) {
                // Render thumbnail.
                var span = document.createElement('span');
                span.innerHTML = ['<div id="wrap"><img id="image" class="thumb draggable" src="', e.target.result,
                    '" title="', escape(theFile.name), '" draggable="true" /></div>'].join('');
                document.getElementById('list').insertBefore(span, null);
            };
        })(f);

        // Read in the image file as a data URL.
        reader.readAsDataURL(f); 
```

我在 iOS 的移动应用程序中使用它，它从相机捕获数据并在 div 中显示预览。一切正常，除了我第一次在新设备上加载应用程序而未经批准访问照片（它在你第一次尝试拍照时提示它）。

这里的问题是，当我`reader.readAsDataURL(f);`在用户批准访问用户照片之前调用时，`reader.onload`不会触发。

是否有任何用户批​​准的监听器，或者是否有办法在页面加载时提示用户访问相机？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T05:44:07.477

我相信这里的问题有两个方面。

首先，我假设我们正在监听标签上的某种`onchange`事件，该事件`<input type="file" />`调用相机/用户照片，然后调用读取文件的代码。如果没有，我们绝对应该这样做，因为这将等待适当的事件。

最后，我们将`f`作为参数传递给匿名函数，在某种代码开始时，该函数返回另一个匿名函数，该函数成为我们实际的事件侦听器。问题不在于调用文件时`reader.readAsDataURL(f);`看到您`f`首先在`reader.onload`.

看到它`f`的范围比`reader.onload`事件更高，我们应该能够做到以下几点：

```
reader.onload = function(e) {
    // Render thumbnail.
    var span = document.createElement('span');
    span.innerHTML =
        ['<div id="wrap"><img id="image" class="thumb draggable" src="',
        e.target.result, '" title="', escape(f.name), // we use f, not theFile
        '" draggable="true" /></div>'].join('');
    document.getElementById('list').insertBefore(span, null);
}; 
```

上面，我们消除了我们的函数 inception 并简单地引用了`f`已经在范围内的函数。除非我们获得许可，否则此功能也不会执行，因此这应该可以解决您最初的用例问题。

# c# - Tabindex 未达到 gridview 中的 lastrow

> ID：15332752
> 
> 赞同：1
> 
> 时间：2013-03-11T06:51:01.383
> 
> 标签：c#, asp.net

**我有带有 2 个文本框的 Gridview..我已经为第一个 texbox 行设置了标签索引...它

除了最后一行之外的所有行都可以正常工作。它在最后一行之前停止。

它没有到达最后一行......

请帮助....**

```
<asp:GridView ID="GridView1" runat="server">
                    <AlternatingRowStyle BackColor="White" />
                    <Columns>
                        <asp:BoundField DataField="st_id" HeaderText="Id" SortExpression="st_id" />
                        <asp:TemplateField HeaderText="Attended-OutOff">
                            <ItemTemplate>
                            <table>
                            <tr>
                            <td>
                                <asp:TextBox ID="tbattendedlectures"  runat="server" Height="27px" Width="32px"></asp:TextBox>
                                </td>

                  <td>
                                     <asp:TextBox ID="tbtotalattendence" runat="server" Height="27px" Width="32px" ReadOnly="true"></asp:TextBox>
                 </td>
                  </tr>
                  </table>
                            </ItemTemplate>
                        </asp:TemplateField>
                    </Columns>
                 </asp:GridView>

    protected void GridView1_RowDataBound(object sender, GridViewRowEventArgs e)
        {
            if (e.Row.RowType == DataControlRowType.DataRow)
            {

                Label batch = (Label)e.Row.FindControl("lbbatch");
                batch.Text = dpbatchname.SelectedItem.Text.ToString();
                Label subject = (Label)e.Row.FindControl("lbsubject");
                subject.Text = dpsubjname.SelectedItem.Text.ToString();

                Label sessional = (Label)e.Row.FindControl("lbcurrentsessional");
                sessional.Text = dpsessional.SelectedItem.Text.ToString();
                TextBox total = (TextBox)e.Row.FindControl("tbtotalattendence");
                total.Text = tbnooflecture.Text.ToString();
               /* TextBox attendence = (TextBox)e.Row.FindControl("tbattendedlectures");
                attendence.Text = tbnooflecture.Text.ToString();
                */

                SetTabIndexes();
            }
        }

    private void SetTabIndexes()
    {
        short currentTabIndex = 0;
        GridView1.TabIndex = ++currentTabIndex;

        foreach (GridViewRow gvr in GridView1.Rows)
        {

            TextBox inputField1 = (TextBox)gvr.FindControl("tbattendedlectures");
            inputField1.TabIndex = ++currentTabIndex;

        }

    } 
```

# java - 在 Java 调度方面需要帮助？

> ID：15332753
> 
> 赞同：-4
> 
> 时间：2013-03-11T06:51:06.530
> 
> 标签：java, scheduled-tasks

我从数据源（文件或 dbms）中选择了一个时间表。这个时间表告诉我什么时候打开设备，什么时候关闭它。例如上午 11 点开，下午 12:30 关，下午 2 点开，下午 3 点关...等。该时间表每天重复。每个设备都有自己的时间表。

我想根据他们的日常日程安排所有这些设备。我怎样才能在 Java 中做到这一点？

```
public class Device{
  boolean state;//true is on.
  String schedule = "11am ON, 12:30pm OFF, 2PM ON, 3PM OFF...etc";

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T06:53:14.750

看看[**`java.util.TimerTask`**](http://docs.oracle.com/javase/7/docs/api/java/util/TimerTask.html)和[**`java.util.Timer`**](http://docs.oracle.com/javase/7/docs/api/java/util/Timer.html)类。

您可以使用[**`Timer.schedule`**](http://docs.oracle.com/javase/7/docs/api/java/util/Timer.html#schedule%28java.util.TimerTask,%20java.util.Date%29)方法来安排任务在特定时间运行。同样来自官方文档：

> 安排指定任务在指定时间执行。如果时间是过去，则安排任务立即执行。

还有其他变体`schedule`，您也可以安排任何任务以重复执行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T07:02:47.463

你可以尝试实现一种轮询模式……让你的所有设备都实现一个通用接口……

```
Interface DeviceScheduling
{   

    public String[] getOnTime();

    public String[] getOffTime();

    // task to be performed by device
    public void performTask();
    // stop device
    public void stopTask();
} 
```

将所有这些设备添加到 a 中`List<DeviceScheduling>`，然后以特定的时间间隔轮询此列表并检查当前时间是否匹配或是否比`getOnTime()`or返回的任何条目更晚`getOffTime()`。根据匹配调用`performTask()`或`stopTask()`.

# php - 您如何分解包含 .txt 文件中的内容？

> ID：15332754
> 
> 赞同：0
> 
> 时间：2013-03-11T06:51:06.890
> 
> 标签：php, explode

如何在 PHP 中分解包含 .txt 文件的内容？我知道如何通过创建数组和使用explode 函数来使用.php 包含文件。但是对于文本文件，我不能使用数组。我试图让我的页面显示这个：

```
John Lee
University of Oregon
Sophmore

Anna Smith
Harvard
Senior

Thomas Stout
University of California Irvine
Junior 
```

这是我的代码：

.txt 文件：

```
John Lee~University of Oregon~Sophmore
Anna Smith~Harvard~Senior
Thomas Stout~University of California Irvine~Junior 
```

学生.php 文件：

```
<?php
include ("student.php)";
#???
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T21:59:38.237

为什么不将`.txt`文件加载到变量中，然后`preg_split()`使用适当的正则表达式运行？在你的情况下，你想在 ~ 字符和换行符处拆分，所以它会是这样的：

```
$input = file_get_contents('students.txt');
$output = preg_split( "/(~|\n)/", $input ); 
```

然后就很简单了：

```
foreach( $output as $line )
    echo $line . '<br/>'; 
```

`[**Example**](http://phpfiddle.org/main/code/98a-bhp)`

# wordpress - 在 wordpress 中应用搜索过滤的插件

> ID：15332757
> 
> 赞同：1
> 
> 时间：2013-03-11T06:51:10.933
> 
> 标签：wordpress, search, plugins

我是一名学生，这些天在使用 wordpress 时学习 wordpress，我虽然默认情况下在我的网站上实现搜索过滤器，但 wordpress 搜索我想在搜索中应用过滤器的帖子。让我用简单的话解释我想要做什么。我的数据库表中有许多产品，用户可以通过其唯一 ID 或名称搜索产品。当用户搜索选择下拉菜单时，这将向他显示以下选项以使用唯一 ID（品牌 ID）进行搜索。他可以搜索以特定输入词开头的产品。我担心如何更改 wordpress 的搜索查询。如果有人可以帮助我完成这项任务？我将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-11T08:01:52.780

我希望这段代码对您有所帮助。

```
function ba_SearchFilter($query) {
    if (!$query->is_search) {
        return $query;
    }
    if (isset($_POST['cat'])){
        $query->set('category__and', $_POST['cat']);
    }
    if (isset($_POST['tags'])){
        $query->set('tag__and', $_POST['tags']);
    }
    return $query;
}
//hook filters to search
add_filter('pre_get_posts','ba_SearchFilter');

function ba_search_with_filters(){
    $out = '<form role="search" method="get" id="searchform" action="'. home_url( '/' ).'">
    <div><label class="screen-reader-text" for="s">Search for:</label>
        <input type="text" value="" name="s" id="s" /><br />';
            $categories=  get_categories(); 
            foreach ($categories as $category) {
                $option = '';
                $option .= '<input type="checkbox" name="cat[]" id="cat[]" value="'.$category->term_id.'"> ';
                $option .= $category->cat_name .'<br />';
                $out.= $option;
            }
            $tags=  get_categories(); 
            foreach ($tags as $tag) {
                $option = '';
                $option .= '<input type="checkbox" name="tags[]" id="tags[]" value="'.$tag->term_id.'"> ';
                $option .= $tag->cat_name .'<br />';
                $out.= $option;
            }
    $out .='<input type="submit" id="searchsubmit" value="Search" />
        </div>
        </form>';
    return $out;
}

add_shortcode('search_with_filter','ba_search_with_filters');

?> 
```

您必须根据需要更改代码。您还可以看到插件[http://wordpress.org/extend/plugins/advance-wp-query-search-filter/](http://wordpress.org/extend/plugins/advance-wp-query-search-filter/)

# xcode4.5 - 由于缺少屏幕截图，无法上传到应用商店

> ID：15332759
> 
> 赞同：0
> 
> 时间：2013-03-11T06:51:26.877
> 
> 标签：xcode4.5, app-store-connect

我的应用程序的状态已准备好上传

我上传了，但我忘记添加一个屏幕截图。

没问题。重新上传就好了。

但是，我的应用程序现在的状态不再是“准备上传”，而是缺少 1 个屏幕截图。

因此，当我尝试再次上传时，我得到的是：

> 应用程序必须准备好上传到 iTunes Connect，然后才能在 Xcode 中进行验证或提交。

我该怎么办？我知道我错过了一张截图。我现在已经添加了。那么现在怎么办？如果我无法上传应用程序，我将无法上传该屏幕截图。我无法上传应用程序，因为状态是“缺少 1 个屏幕截图”而不是准备上传。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T07:00:09.680

您需要返回 iTunes Connect 并编辑元数据和/或应用程序的数据，以添加缺少的屏幕截图，并将状态设置为“准备上传”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T07:10:28.037

在 iTunes 连接中，选择二进制详细信息。

之后选择拒绝这个二进制文件。

然后点击准备上传。

多田状态又回到了以前的样子。

# javascript - 从 Sugarcrm 中的 QuickCreate 中删除必填字段

> ID：15332765
> 
> 赞同：2
> 
> 时间：2013-03-11T06:51:50.867
> 
> 标签：javascript, sugarcrm

我编写了一个函数来从联系人 QuickCreate 中删除帐户名称相关字段，但我的函数在 Firefox 中完美运行，但在 chrome 中它不起作用......这是我的函数

```
function manageRequired(reqArr, disabledVal)
{
    var requiredLabel = '<span class="required">*</span>'; // for firefox
    var search_requiredLabel = '<span class="required"'; // searching string for firefox
    var form = "";

    for(var i = 0; i < document.forms.length; i++)
    {
        if(document.forms[i].id=='EditView')
        {
            form = 'EditView';
            break;
        }
        if(document.forms[i].id=='form_SubpanelQuickCreate_Contacts')
        {
            form = 'form_SubpanelQuickCreate_Contacts';
            break;
            }
        if(document.forms[i].id=='form_QuickCreate_Contacts')
        {
            form = 'form_QuickCreate_Contacts';
            break;
            }
        if(document.forms[i].id=='form_QuickCreate_Accounts')
        {
            form = 'form_QuickCreate_Accounts';
            break;
            }
    }
    for(var j = 0; j < reqArr.length; j++)
    {
        var flag = true;
        if (validate[form] != 'undefined') 
        {
            for(var i = 0; i < validate[form].length; i++)
            {
                if(validate[form][i][0] == reqArr[j].id && validate[form][i][2])
                {
                    if(disabledVal)
                    {
                        flag = false;
                        break;
                    }
                    else
                    {
                        validate[form][i][2] = false;
                    }
                }
            }
        }
        var labelNode = document.getElementById(reqArr[j].id + '_label');
        if(flag & disabledVal)
        {
            // we require the field now
            addToValidate(form, reqArr[j].id, reqArr[j].type, true,reqArr[j].label );
        }
        if(disabledVal)
        {
            if(labelNode != null && labelNode.innerHTML.indexOf(search_requiredLabel) == -1) // for IE replace search string
            {
                search_requiredLabel = '<SPAN class=required>';
            }
            if (labelNode != null && labelNode.innerHTML.indexOf(search_requiredLabel) == -1) 
            {
                labelNode.innerHTML = labelNode.innerHTML.replace(requiredLabel, '');
                labelNode.innerHTML = labelNode.innerHTML + requiredLabel;
            }
        }
        else
        {
            if(labelNode != null)
            {
                if(labelNode != null && labelNode.innerHTML.indexOf("<SPAN class=required>*</SPAN>") == -1 && labelNode.innerHTML.indexOf('<span class="required">*</span>') == -1 )// for that field which is unrequired
                {
                }
                else if(labelNode != null && labelNode.innerHTML.indexOf(requiredLabel) == -1) // for IE replace span string
                {
                    requiredLabel = "<SPAN class=required>*</SPAN>";
                }
                labelNode.innerHTML = labelNode.innerHTML.replace(requiredLabel, '');
            }
        }
    }
} 
```

谁能帮我解决这个问题...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-12-10T10:17:24.830

要从*Sugarcrm*中的*QuickCreate*中删除必填字段，您可以使用此功能：

```
removeFromValidate('EditView','eventlist_c'); 
```

或删除删除应用于该字段的验证：

```
$('#eventlist_c_label').html('{$mod_strings['LBL_EVENTLIST']}: '); 
```

# mysql - 查找表中不重复的行

> ID：15332767
> 
> 赞同：0
> 
> 时间：2013-03-11T06:51:54.380
> 
> 标签：mysql

我有下表

```
|| some_id || value_A || value_B ||  timestamp ||
-------------------------------------------------
||       3 ||    1000 ||       1 || 1362979652 ||
||       3 ||    1001 ||       2 || 1362979652 ||
||       4 ||    1002 ||       2 || 1362979652 ||
||       4 ||    1003 ||       3 || 1362979652 ||
||       4 ||    1004 ||       3 || 1362979652 ||
||       3 ||    1000 ||       1 || 1362980605 ||
||       3 ||    1001 ||       1 || 1362980605 || <-- value_b is different here
||       4 ||    1002 ||       2 || 1362980605 ||
||       4 ||    1003 ||       3 || 1362980605 ||
||       4 ||    1004 ||       2 || 1362980605 || <-- value_b is different here 
```

该表由一组数据组成，然后插入一组几乎相同的数据（具有不同的时间戳）。`value_B`正如您在上面看到的，数据并不完全相同，因为某些行中的数据不同。

我需要做的是删除所有重复的行，并将旧的类似行替换为新行（新行具有较新的时间戳）。

我已经尝试了几种不同的内部连接方法，但我遇到了困难。我认为这是一个两部分的事情。首先，我需要简单地摆脱重复项：

```
|| some_id || value_A || value_B ||  timestamp ||
-------------------------------------------------
||       3 ||    1000 ||       1 || 1362979652 ||
||       3 ||    1001 ||       2 || 1362979652 ||
||       4 ||    1002 ||       2 || 1362979652 ||
||       4 ||    1003 ||       3 || 1362979652 ||
||       4 ||    1004 ||       3 || 1362979652 ||
||       3 ||    1000 ||       1 || 1362980605 || <-- will be deleted
||       3 ||    1001 ||       1 || 1362980605 ||
||       4 ||    1002 ||       2 || 1362980605 || <-- will be deleted
||       4 ||    1003 ||       3 || 1362980605 || <-- will be deleted
||       4 ||    1004 ||       2 || 1362980605 || 
```

接下来，如果剩下的新行具有相同`some_id`且相同的`value_A`值，我需要删除任何旧行。

```
|| some_id || value_A || value_B ||  timestamp ||
-------------------------------------------------
||       3 ||    1000 ||       1 || 1362979652 ||
||       3 ||    1001 ||       2 || 1362979652 || <-- will be deleted
||       4 ||    1002 ||       2 || 1362979652 ||
||       4 ||    1003 ||       3 || 1362979652 ||
||       4 ||    1004 ||       3 || 1362979652 || <-- will be deleted
||       3 ||    1001 ||       1 || 1362980605 ||
||       4 ||    1004 ||       2 || 1362980605 || 
```

所以处理后，上面的结果表如下所示：

```
|| some_id || value_A || value_B ||  timestamp ||
-------------------------------------------------
||       3 ||    1000 ||       1 || 1362979652 ||
||       4 ||    1002 ||       2 || 1362979652 ||
||       4 ||    1003 ||       3 || 1362979652 ||
||       3 ||    1001 ||       1 || 1362980605 ||
||       4 ||    1004 ||       2 || 1362980605 || 
```

我正在寻找一种有效的解决方案，因为实际上，我正在使用的表有几千行数据。所以效率是关键。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T07:15:02.603

您的示例有点错误，因为 1001 是重复的，而 1002 不是，但您在重复消除步骤中指示相反。不过，这个简单的删除连接应该可以为您提供正确的结果；

```
DELETE a 
FROM MyTable a
JOIN MyTable b
  ON a.value_A=b.value_A
 AND a.some_id = b.some_id
 AND (a.`timestamp` < b.`timestamp` AND a.value_B <> b.value_B OR
      a.`timestamp` > b.`timestamp` AND a.value_B =  b.value_B) 
```

[一个用于测试的 SQLfiddle](http://sqlfiddle.com/#!2/2eb64/2)。

当然，千万不要在没有备份的情况下从 Internet 上随机运行人的破坏性 SQL。

# c# - 如何在数据库中添加会话购物车表并为所有订购的商品提供一个唯一的 orderid？

> ID：15332773
> 
> 赞同：0
> 
> 时间：2013-03-11T06:52:05.847
> 
> 标签：c#

```
ProductName     price   brand   Quantity    Net   AmountNet   Amount    Update 
```

我有上表，我必须在其中插入用户添加到购物车的产品。用户可以将多个产品添加到他们的购物车。我在会话中有用户添加产品的表，我通过将该会话表作为数据表逐行读取它。我必须在上表中逐行插入所有产品。

我还有另一个表如下：

```
orderID    CartItemID   RegistrationID   OrderDate   NetAmount  Remarks   Created 
```

我的问题是，如何为用户订购的所有产品提供一个唯一的订单 ID？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T07:28:31.210

在我的项目中，我使用 3 个表来解决这个问题

```
CREATE TABLE cart(
    ID          NUMBER,
    CUSTOMER_ID NUMBER,
    DATE        DATE DEFAULT SYSDATE,
    SESSION_ID  VARCHAR2(32 BYTE)
)

CREATE TABLE cart_parameter(
    SESSION_ID  VARCHAR2(32 BYTE),
    CODE        VARCHAR2(32 BYTE),
    TYPE        VARCHAR2(32 BYTE),
    AMOUNT      NUMBER
)

CREATE TABLE product(
    ID          NUMBER,
    CODE        VARCHAR2(32 BYTE),
    description VARCHAR2(200 BYTE),
    price       NUMBER(30,2),
    ... more info
)

Other tables 
```

这种架构是正确的，因此篮子可以是不同数量的项目，并在不同的表中。例如，您有一张桌子，上面有电脑、智能手机、书籍等。您可以选择输入产品 ID，但不同的表可以是具有相同标识符的不同产品。那你扩展应用有问题

此函数返回此会话的唯一值

```
FUNCTION getSessionID
IS

BEGIN
 RETURN utl_raw.cast_to_raw(DBMS_OBFUSCATION_TOOLKIT.MD5(TO_CHAR(customer_id) || TO_CHAR(systimestamp, 'DDMONYYYYHH24MISSFF') || s_user_ip || dbms_random.random()));
END; 
```

使用此 sessionID 连接购物车表和购物车参数表

P/S：原谅我的英文，都是谷歌翻译的

# php - 在php中从数组中查找元素

> ID：15332775
> 
> 赞同：0
> 
> 时间：2013-03-11T06:52:18.970
> 
> 标签：php, arrays, search

我有以下从我的 css 文件中获取的类名数组

```
test array after printing values:

Array
(
  [0] => #sa_nav
  [1] => #sa_nav ul li.account
  [2] => .loyaltyBox
) 
```

```
 if(array_search("#sa_nav",$test))
 {
  echo 'Element is exist';
 }
 else
 {
  echo 'Element is not exist';
 } 
```

尽管元素存在于数组中，但它会打印“元素不存在”。请帮助

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-11T06:53:30.217

使用`in_array`功能

```
$test = array("#sa_nav", "#sa_nav ul li.account", ".loyaltyBox");

if (in_array("#sa_nav", $test)) {
  echo 'Element is exist';
} else {
  echo 'Element is not exist';
} 
```

// 输出

```
Element is exist 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-11T06:54:22.200

**array_search 所做的是在数组中搜索给定的值，如果成功则返回相应的键**

所以这意味着它不返回 true 或 false 所以使用`in_array()`php 函数。

`in_array`—**检查一个值是否存在于数组中**

```
$test = array("#sa_nav","#sa_nav ul li.account",".loyaltyBox");

if(in_array("#sa_nav",$test))
{
  echo 'Element is exist';
}
else
{
  echo 'Element is not exist';
} 
```

**用于搜索和返回 TRUE FASLE**

```
function search_array($arrays, $cssSelector)
{
   foreach($arrays as $key => $array)
   {
      if ( $array === $cssSelector )
         return true;
   }
   return false;
} 
```

并将其称为`search_array($array,'#sa_nav');`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-11T07:01:07.730

> [array_search()](http://php.net/manual/en/function.array-search.php)搜索一个值，如果匹配则返回相应的键。

现在在你的情况下 -

#sa_nav 键值为`0`

所以进入`IF`循环它会评估这样的东西 -

```
array_search("#sa_nav",$test) return value is `0` [Zero]. 
```

所以表达式将被评估为 -

```
if(0) 
```

所以它输出 -

```
Element is not exist 
```

不，如果您尝试使用此代码块，它将被评估为`true`

```
$test = array("#sa_nav","#sa_nav ul li.account",".loyaltyBox");

 if(array_search(".loyaltyBox",$test))
 {
  echo 'Element is exist';
 }
 else
 {
  echo 'Element is not exist';
 } 
```

要使您的代码段正常工作，您可以尝试使用`in_array()`大多数其他答案中建议的方法。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-11T06:56:09.640

手册始终是第一个查看的地方：

> [**`array_search`**](http://www.php.net/array_search)
> 
> 如果在数组中找到 needle 的键，则返回它，否则返回 FALSE。
> 
> ***警告***
> 
> ***此函数可能返回布尔值 FALSE，但也可能返回计算结果为 FALSE 的非布尔值。请阅读有关布尔值的部分以获取更多信息。使用 === 运算符测试此函数的返回值。***

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-11T06:54:58.267

检查此代码

```
$test = array("#sa_nav","#sa_nav ul li.account",".loyaltyBox");

 if(in_array("#sa_nav",$test))
 {
  echo 'Element is exist';
 }
 else
 {
  echo 'Element is not exist';
 } 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-11T07:01:20.087

您可以使用 PHP 内置功能

[array_search — 在数组中搜索给定的值，如果成功则返回相应的键](http://www.php.net/array_search)

或者您也可以使用

[in_array — 检查一个值是否存在于数组中](http://www.php.net/manual/en/function.in-array.php)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-03-11T07:35:05.493

首先，当您提出这样的问题时，请考虑使用`var_dump()`来显示您的数组包含的内容。

其次，您的状况应该做一个简单的改变：

```
if (false !== array_search("#sa_nav",$test)) {
} 
```

如果`#sa_nav`是第一项，`array_search()`将返回`0`，其计算结果为`false`。考虑到您并没有真正`array_search()`以任何特别有意义的方式使用 of 的返回值，您也可以使用`in_array()`它总是返回一个布尔值。

# .net - 不同类型的托管 WCF 应用程序及其优势

> ID：15332776
> 
> 赞同：6
> 
> 时间：2013-03-11T06:52:21.180
> 
> 标签：.net, wcf, wcf-hosting, wcf-http

可以完成不同类型的托管。

1.  Windows 进程激活服务 (WAS)

2.  IIS

3.  自托管

4.  在 Windows 服务中托管

使用一个比另一个有优势吗？哪个更可取？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-11T07:19:32.550

[这](http://msdn.microsoft.com/en-us/library/ms730158.aspx)和[这](http://msdn.microsoft.com/en-us/library/bb332338.aspx)可以提供帮助。但基本上：

1) IIS 现在使用 WAS

2) IIS 托管。优点：通常不需要托管代码，易于维护，IIS 基础架构（安全、会话、站点集成等）。缺点：“被动”服务，需要 IIS。

3) 自托管。优点：易于调试。缺点：没有基础设施，需要。自定义托管代码，交互使用（一般来说）。

4) 在 Windows 服务中托管。优点：对于“活动”、长时间运行的服务、服务基础设施（启动/停止/暂停、无人值守（非交互式）执行、依赖项、mmc 等），相对易于管理。缺点：要求。自定义托管代码，相对难以调试（与 IIS 托管相比）。

# java - 部署前如何执行java程序

> ID：15332778
> 
> 赞同：0
> 
> 时间：2013-03-11T06:52:23.863
> 
> 标签：java, deployment, jetty

每次在`Jetty`服务器中部署war文件之前，我都需要执行一个java代码。我的需要是，每次部署新战争时，我都需要运行一个 java 代码来清理我的数据库并在部署前添加一些记录。

我可以在应用程序启动时编写它，但它是部署发生时的一次性过程。

谁能建议如何做到这一点。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T08:07:27.883

一种方法是从 ContextListener 调用代码，但在 WAR 文件中放置一个标志，以便在部署新的 WAR 文件时仅执行一次代码。

例如，您可以在 WAR 中放置一个具有特定名称的空文件，并在 ContextListener 的代码中执行以下操作：

```
if(file is present){
  do something, call DB etc
  delete(file)
} 
```

另一种（也许更干净？）方法是将属性放在初始值为 false 的配置属性文件中，例如：

```
initialDeploymentCodeExecuted=false 
```

然后检查此属性而不是整个文件。如果为假，则在执行的代码中将其更改为真。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T07:11:28.863

上下文监听器怎么样？[您可以在contextInitialized()](http://docs.oracle.com/javaee/6/api/javax/servlet/ServletContextListener.html#contextInitialized%28javax.servlet.ServletContextEvent%29)方法中添加您的数据库清理代码。

# mysql - 获取MYSQL奇异表中每个组中的最后一条记录，条件忽略某些组

> ID：15332779
> 
> 赞同：1
> 
> 时间：2013-03-11T06:52:25.923
> 
> 标签：mysql, sql, group-by, greatest-n-per-group

我尝试了 Karwin 先生在这里提出的解决方案，
[检索每组中的最后一条记录](https://stackoverflow.com/questions/1313120/retrieving-the-last-record-in-each-group)

我有一个单数表，其中包含我需要的所有记录以及 FF 记录。

```
 --------------------------------------------------
 | Keynum     | PaymentID  | BuyerID | LatestBill |
 |----------- | -----------|---------|------------|
 |   3        |    4       |    4    |  30000     |
 |   2        |    4       |    4    |  10000     |
 |   1        |    4       |    4    |  10000     |
 |   1        |    9       |    9    |  9999      |
 -------------------------------------------------- 
```

所需的输出是：

```
 --------------------------------------------------
 | Keynum     | PaymentID  | BuyerID | LatestBill |
 |----------- | -----------|---------|------------|
 |   3        |    4       |    4    |  30000     |
 |   1        |    9       |    9    |  9999      |
 -------------------------------------------------- 
```

我试过的是这样的：

```
 Select keynum, PaymentID, BuyerId, LatestBill From  Sales where LatestBill != 0 group by PaymentID, BuyerID order by keynum  Desc; 
```

还有这个

```
 SELECT max(keynum), PaymentID, BuyerID, NewInstallmentBal
 FROM aliissales.tblmovedactual
 GROUP BY PaymentID, BuyerID DESC; 
```

但是，我得到的是：

```
 --------------------------------------------------
 | Keynum     | PaymentID  | BuyerID | LatestBill |
 |----------- | -----------|---------|------------|
 |   1        |    4       |    4    |  10000     |
 |   1        |    9       |    9    |  9999      |
 -------------------------------------------------- 
```

我需要的是每组的最后一条记录，每条记录按 PaymentID 和 BuyerID 分组。

如果我使用 Max(keynum)，它确实获得了每个组的最大 keynum，但不是相应的记录。是让记录与 Keynum 一起使用的更简单方法吗？

此外，如果 LatestBill = 0，则现在忽略整个组。

即如果

```
keynum 3 LatestBill = 0, group BuyerID 4 , PaymentID 4 is now ignored. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T06:54:42.470

```
SELECT  a.*
FROM    aliissales.tblmovedactual a
        INNER JOIN
        (
            SELECT  max(keynum) xx, PaymentID, BuyerID
            FROM    aliissales.tblmovedactual
            GROUP   BY PaymentID, BuyerID
        ) b ON  a.PaymentID = b.PaymentID   AND
                a.BuyerID = b.BuyerID AND
                a.keynum = b.xx 
```

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!2/099c3/1)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T05:33:41.350

SELECT keynum, PaymentID, BuyerID, NewInstallmentBal FROM aliissales.tblmovedactual WHERE keynum IN (SELECT max(keynum) FROM aliissales.tblmovedactual GROUP BY PaymentID)

# python - 下载 gae 应用程序问题，无法创建目录

> ID：15332783
> 
> 赞同：1
> 
> 时间：2013-03-11T06:53:07.840
> 
> 标签：python, google-app-engine

尝试从 gae 开发者帐户下载源代码。

```
appcfg.py download_app -A appname /"my folder"/path/appname 
```

当我下载该应用程序时，它给了我这个错误：

```
 2013-03-11 14:37:53,807 ERROR appcfg.py:1791 Couldn't create directory "/path-to-folder/admin": [Errno 13] Permission denied: '/path-to-folder' 
```

如何解决这个问题？

编辑：没关系，我登录到root并修复它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T06:57:04.260

检查您尝试放置应用程序的文件夹是否设置了正确的权限。

# memory-management - Windows Phone 8 中的内存管理

> ID：15332785
> 
> 赞同：0
> 
> 时间：2013-03-11T06:53:11.880
> 
> 标签：memory-management, windows-phone-8

我的应用程序需要每次使用提供的类别从网络加载图像并且它正在工作，问题是内存，加载到内存中的图像在下一个类别图像加载时不会被删除，因此内存增加并且应用程序关闭并显示以下消息 -

**程序“[4036] TaskHost.exe”已退出，代码为 -2005270523 (0x887a0005)。**

代码是---

void webClient_DownloadStringCompleted(object sender, DownloadStringCompletedEventArgs e) { if (e.Error != null) { timer.Stop(); 返回; } 列表 rootobj = JsonConvert.DeserializeObject>(e.Result);

```
 int c = 0, x = 0;
        for (int i = 0; i < rootobj.Count; i++)
        {
            Image img = new Image();
            img.HorizontalAlignment = System.Windows.HorizontalAlignment.Left;
            img.VerticalAlignment = System.Windows.VerticalAlignment.Top;
            img.Height = 160;
            img.Width = 210;
            img.Stretch = System.Windows.Media.Stretch.Fill;

            BitmapImage bit = new BitmapImage();
            string path = rootobj.ElementAt(i).ThumbnailUrl;
            bit.UriSource = new Uri(path,UriKind.RelativeOrAbsolute);
            img.Source = bit;
   img.Margin = new Thickness(x, y, 0, 0);

            c++;
            if (c == 2)
            {
                x = 0;
                y = y + 160;
                c = 0;
            }
            else
            {
                x = x + 210;
            }
            mainGrid.Children.Add(img);  
        } mainGrid.Children.Add(grid);
       } 
```

并删除我曾尝试过这些 -

```
 for (int i = 0; i < rootobj.Count; i++)
        {
            Image image = (Image)mainGrid.Children.ElementAt(i);
            BitmapImage bitmapImage = image.Source as BitmapImage;
            bitmapImage.UriSource = null;
            image.Source = null;
            bitmapImage = null;
            image = null;
        }

        grid.Children.Clear();

        mainGrid.Children.Remove(grid); 
```

但是在选择了几种类型的图像后它仍然崩溃。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T07:14:55.300

您可以执行以下操作：

```
grid1.Children.Remove(image1);
image1 = null; 
```

# java - 是否可以在没有任何服务器的情况下通过 WAN 进行点对点连接？

> ID：15332794
> 
> 赞同：2
> 
> 时间：2013-03-11T06:53:43.503
> 
> 标签：java, sockets, wan, peer

我需要用 Java 将文件从计算机发送到计算机。我在具有服务器/客户端模型的本地网络中执行此操作。但是有可能通过广域网做到这一点吗？

客户端可能在[NAT](http://en.wikipedia.org/wiki/Network_address_translation)下。我手动将作为文件接收者（服务器）的外部地址和内部地址发送给发送文件的人（客户端）。

# prototype - 学习资源：Javascript原型对象模型？

> ID：15332799
> 
> 赞同：0
> 
> 时间：2013-03-11T06:53:58.940
> 
> 标签：prototype, javascript

我很陌生`in-depth` `javascript`。

现在，因为我来自`C/C++ or Java`类型类的世界 - 我发现它很新。

问题是 ：

*   当我搜索资源时`Javascript Prototype Object`，我最终得到`prototypejs`
*   [ProtoTypeJs](http://prototypejs.org/) - 它是一个 js 库，就像`jQuery`
*   PrototypeJS：AFAIK 它使 javascript 类就像`Java`类型类一样。

简而言之，它使我无法学习 javascript 对象模型。:P

你能提供一些资源，即`Videos`或`articles`或`ebooks`教授`Javascript Prototype Object Model`吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T06:56:15.220

到目前为止，我遇到的最好的初学者是

[http://dmitrysoshnikov.com/ecmascript/javascript-the-core/#a-prototype-chain](http://dmitrysoshnikov.com/ecmascript/javascript-the-core/#a-prototype-chain)

您还可以通过 ECMA 规范获得清晰的图片

# android - 在 Android 应用程序中显示图片 - 分辨率？

> ID：15332800
> 
> 赞同：0
> 
> 时间：2013-03-11T06:54:03.863
> 
> 标签：android, imageview

我的应用程序中有一个照片库。图片集存储在可绘制文件夹中。当用户在图像中滑动时，我正在使用 ViewPager。xhdpi、hdpi、mdpi 的像素和 dps 的宽度和高度是多少？

我知道 Android 文档说 px = dp*dpi/160.. 但我仍然对图片下载像素应该是什么感到困惑，以便它适合所有屏幕尺寸？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T07:30:32.957

没有一种神奇的尺寸可以保证它完全适合所有屏幕。每种密度下都有不止一个屏幕尺寸。

您应该着眼于使您的布局在尽可能多的设备上很好地扩展。在您的情况下，听起来您不应该专注于特定的像素大小，而是如何在常见屏幕上正确显示并在不太常见的屏幕上优雅地显示。话虽这么说，我会做以下事情：

我会在[这里](http://developer.android.com/about/dashboards/index.html)查看仪表板。我的布局首先针对具有正常屏幕尺寸（市场的 50.1%）的 hdpi，然后是具有正常屏幕尺寸的 xhdpi（25.1%），然后是 mdpi（11%）正常屏幕尺寸。查看此[页面](http://developer.android.com/guide/practices/screens_support.html)上的表 3，了解这些值的常见屏幕尺寸。由于您最有可能使用图像视图，因此请确保检查比例类型属性以帮助处理图像视图不在

作为旁注（以后可能有用），如果您在转换密度和原始像素值之间的大小时遇到​​困难，请使用[此](http://labs.skinkers.com/content/android_dp_px_calculator/)计算器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T07:36:45.747

使用以下函数为您提供当前显示的*高度*和*宽度*

```
DisplayMetrics displaymetrics = new DisplayMetrics();
getWindowManager().getDefaultDisplay().getMetrics(displaymetrics);
deviceHeightPix = displaymetrics.heightPixels;
deviceWidthPix = displaymetrics.widthPixels; 
```

基于此，您可以在服务器上传递数据以获取相关图像。

# asp.net - 我必须设置ftp

> ID：15332807
> 
> 赞同：0
> 
> 时间：2013-03-11T06:54:24.233
> 
> 标签：asp.net

我必须首先调用`exe`该生成`.txt`文件。然后`FTP`推送那个文件。我必须在`.bat`文件中执行此操作。它首先调用`.exe`生成文件，然后通过 ftp 发送该文件。 `.exe`中生成文件`d:/csst/zppr1.txt`。这个怎么做？

# c# - 如何在gridview中找出选定的行

> ID：15332808
> 
> 赞同：0
> 
> 时间：2013-03-11T06:54:28.887
> 
> 标签：c#, asp.net

我正在用 c# 在 .net 中做一个项目。因为有一个新用户进入网站的注册表。管理员应该批准注册。为此，我正在使用 GridView。如何在网格视图中找出选定的行？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T07:06:30.457

使用以下 gridview 属性>

```
gvTradeFile.SelectedRows[0].Cells[10].Value.ToString(); 
```

希望这会帮助你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T08:29:54.113

通常我将[RowCommand](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.gridview.rowcommand.aspx)用于这种类型的事情：

```
<asp:GridView runat="server" id="gvUsers" AutoGenerateColumns="False">
    <Columns>
        <asp:BoundField DataField="username" HeaderText="Username" />
        <asp:BoundField DataField="dateregistered" HeaderText="Date" />
        <asp:TemplateField>
            <ItemTemplate>
                <asp:LinkButton runat="server" id="lnkApprove" CommandName="Approve" CommandArgument='<%# Eval("userid") %>' Text="Approve"></asp:LinkButton>
            </ItemTemplate>
        </asp:TemplateField>
        <asp:TemplateField>
            <ItemTemplate>
                <asp:LinkButton runat="server" id="lnkDeny" CommandName="Deny" CommandArgument='<%# Eval("userid") %>' Text="Deny"></asp:LinkButton>
            </ItemTemplate>
        </asp:TemplateField>
    </Columns>
</asp:GridView> 
```

现在您需要在 RowCommand 上传递指令...

```
private void gvUsers_RowCommand(Object sender, GridViewCommandEventArgs e)
{
    switch (e.CommandName)
    {
        case "Approve":
            // Executes code to update the users table,
            // setting the approved flag to true
            // Usage: ApproveUser(integer userid);
            ApproveUser(e.CommandArgument);
            break;
        case else:
            // do whatever if the user registration wasn't approved
            break;
    }
} 
```

如果您需要对此处的数据执行一些操作，则切换是一个好主意。它评估所选行（单击链接时自动确定）的行的主键值（在这种情况下，即`userid`数据库中列的值）以及 CommandName 以告诉它如何处理该信息.

希望这可以帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-11T06:56:39.117

使用[`GridView.SelectedRow`属性](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.gridview.selectedrow.aspx)。

[`GridView.SelectedIndex`或者，您可以使用属性](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.gridview.selectedindex.aspx)获取所选行的索引。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-11T06:59:14.167

您可能指的是DATAGRIDVIEW吗？

如果是，则查找所选行的某一列的内容

```
 datagridviewname.item(0, datagridviewname.currentrow.index).value 
```

其中 0 = 数据网格的第一列

# ruby-on-rails - 未定义的方法`home_home_path'

> ID：15332818
> 
> 赞同：0
> 
> 时间：2013-03-11T06:55:16.997
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我是 Rails 开发的新手，但仍在尝试了解它的构建块。在运行这个简单的代码时，我收到以下错误

```
undefined method `home_home_path' 
```

它来自这一行 <%= form_for(@homes) do |f| %> 在 .html.erb 文件中。这是我的完整代码，我做错了什么？

我有家庭控制器文件

```
 def index
    @homes = Home.all
  end

  def show
    @home = Home.find(params[:id])
  end

  def new
    @home = Home.new
  end

  def create
    @home = Home.new(params[:home])
    @home.save
  end 
```

Homes.rb 模型文件

```
class Home < ActiveRecord::Base
  attr_accessible :email, :message, :name
end 
```

意见/家园/index.html.erb

```
# this will show all the data
<% @homes.each do |home| %>
    <%= home.name %><br />
    <%= home.email %> <br />
    <%= home.message %><br />
<% end %>
<br />

# this is a form where you will new records
<%= form_for(@homes) do |f| %>
    <%= f.text_field :name %>
    <%= f.text_field :email %>
    <%= f.text_area :message %>
    <%= f.submit %> 
<% end %> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T06:58:49.540

你应该使用：

```
<%= form_for(@home) do |f| %> 
```

（单数）

如果你想在 index.html 中添加一个表单，记得在你的控制器 index 方法中实例化一个新的 home 对象：

```
 def index
    @homes = Home.all #For displaying all the homes
    @home = Home.new  #For your form
 end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T06:58:58.363

`@homes`是一个数组对象。我不太确定 Rails 如何从中推断出 url 但正在运行

```
url_for Home.limit(2).all 
```

也会给你同样的错误。

解决方案是将@homes 更改为`Home.new`或`@home = Home.new`在您的控制器中声明并在表单中使用@home。

```
form_for Home.new 
```

或者

```
# controller
def index
  @homes = Home.all
  @home = Home.new
end

# view
form_for @home 
```

# sql - 根据同一表中其他列的不同值更新sql表中的列

> ID：15332819
> 
> 赞同：0
> 
> 时间：2013-03-11T06:55:24.967
> 
> 标签：sql, sql-server, tsql

我有一个包含以下示例数据的 sql 表：

```
Id Test_Id Strategy_Name Symbol_Name Test_Start_Date Test_End_Date Test_Interval P1 P2 P3

11 0       5x5           ICC         2012-01-01      2012-12-31    Hourly    69 18 2    
12 0       5x5           ICC         2012-01-01      2012-12-31    Hourly    5  25 2    
13 0       5x5           ICC         2012-01-01      2012-12-31    Hourly    6  25 2    
14 0       5x5           ICC         2012-01-01      2012-12-31    Hourly    2  25 2    
15 0       5x5           ICC         2011-01-01      2011-12-31    Hourly    2  25 2 
```

我想运行一个更新查询，它将根据不同的 strategy_name、symbol_name、test_interval、P1、P2、P3 为 test_id 列分配一个唯一值。因此，除了第 4 行和第 5 行之外，上述所有行的 test_id 都是唯一的，因为除了 test_start_date 和 test_end_date 之外，它们具有相同的值，因此它们将具有相同的 test_id。

如何执行此操作，您可以只运行更新查询或存储过程来自动增加测试 id 值吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T07:10:07.193

我曾经使用`ROW_NUMBER()`. 我不知道这是否是在您的情况下填写 id 的最简单方法，但它应该可以工作。

它可以在没有临时表的情况下使用单个更新，但有时我发现以更小的步骤拆分操作更容易。

创建一个带有 id 的临时表

```
select
    ROW_NUMBER() OVER (order by strategy_name, symbol_name, test_interval, P1, P2, P3 asc) as id,
    strategy_name, symbol_name, test_interval, P1, P2, P3
INTO #ids
FROM [table]
GROUP BY strategy_name, symbol_name, test_interval, P1, P2, P3 
```

填写id

```
UPDATE [table]
SET test_id = (select id from #ids where 
  [table].strategy_name = #ids.strategy_name, 
  and [table].symbol_name = #ids.symbol_name, 
  and [table].test_interval = #ids.test_interval, 
  and [table].P1 = #ids.P1, 
  and [table].P2 = #ids.P2, 
  and [table].P3 = #ids.P3) 
```

# java - 如何从 Android 中的 noraml java 类调用 Activity 类

> ID：15332826
> 
> 赞同：4
> 
> 时间：2013-03-11T06:55:54.007
> 
> 标签：java, android, android-activity

我在这个类的构造函数中有一个 noraml java 类说 ReceivedChat.java 我想调用 Android 的 Activity。

```
public class ReceivedChat {
    String message;
    String from;
    Context context;

    ReceivedChat(String message, String from) {
        this.message = message;
        this.from = from;

        Bundle b = new Bundle();
        b.putString("message", this.message);
        b.putString("from", this.from);
        b.putString("fromChat", "true");

        Intent i = new Intent(context.getApplicationContext(), XmppChatActivity.class);
        i.putExtras(b);
        context.getApplicationContext().startActivity(i);
    }
} 
```

我的活动课程是`XmppChatActivity`。

这个程序不工作。它没有调用我`XmppChatActivity`班级的 onCreate 任何帮助都会感谢我。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-03-11T06:59:42.697

> 如何从普通的 java 类中调用 Activity 类

您需要`ReceivedChat`在从活动或任何其他应用程序组件创建对象时将当前活动上下文传递给：

```
ReceivedChat(String message, String from,Context context)
{
this.message = message;
this.from = from;
this.context=context;  //<< initialize Context here 
Intent i = new Intent(context,XmppChatActivity.class);
 //....your code here
context.startActivity(i);

} 
```

而不是从类 Constructor 启动另一个 Activity 创建一个方法`ReceivedChat`并在创建对象后调用它

# hadoop - hadoop程序在运行应用程序时是否可以自动添加节点

> ID：15332828
> 
> 赞同：2
> 
> 时间：2013-03-11T06:55:57.183
> 
> 标签：hadoop

我是初学者程序员和hadoop学习者。在启动 maptask 和 hdfs 之前，我正在使用 5 台 PC（具有双核 cpu 和 ram 2G）测试 hadoop 完全分发模式，我知道我必须配置文件（IP 上的 etc/hosts、主机名和 hadoop 文件夹/conf/masters， slaves 文件）所以我完成了该文件的配置

在我公司的研讨会上辩论时，我的老板和负责人坚持认为即使hadoop应用程序运行状态，如果hadoop需要更多节点或集群，hadoop会自动添加更多节点是否可能？在我学习hadoop集群的时候，很多hadoop书籍和社区站点都坚持认为在配置和运行应用程序之后，我们不能添加更多的节点或集群。但是我的老板对我说，亚马逊说在运行的应用程序上添加节点是可能的。真的吗？堆栈溢出社区的hadoop高手，请告诉我真相。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T19:13:51.723

是的，这确实是可能的。

[这](http://wiki.apache.org/hadoop/FAQ#I_have_a_new_node_I_want_to_add_to_a_running_Hadoop_cluster.3B_how_do_I_start_services_on_just_one_node.3F)是hadoop wiki中的解释。

此外，Amazon 的 EMR 可以让人们在一个正在运行的集群中即时添加 100 个节点，一旦机器启动，它们就会被主节点委派任务（未启动的映射器和/或减速器任务）。

所以，是的，这是很有可能的，并且正在使用中，而不仅仅是在理论上。

# php - 如何使用 PHP/MySQL 根据表的行创建特定大小的随机数？

> ID：15332830
> 
> 赞同：-3
> 
> 时间：2013-03-11T06:56:10.020
> 
> 标签：php, mysql

我想为数据库表中的每一行创建一个特定大小的随机“键”。例如，对于“id”或行（自动递增 ID）“20”，“key”列将具有“xEd456”，而对于第 21 行，它将是“rYU875”。但是，我还想确保表中没有重复的“键”。我更喜欢使用 6 个字符的“密钥”。我如何实现这一目标？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T06:58:37.060

这意味着您需要一个字母数字键，请参阅代码

```
while(true)
  {
  $str="";
  for($i=0;$i<6;$i++)
    {
    $rnd=rand(1,16);
    if(intval(fmod($rnd, 2)))
    $a=rand(48,57);
    else
    $a=rand(65,90);
    $str .= chr($a);
    }
  // skipping the mysql connection functions
  $sql=mysql_query(“select user_id from user_master_table where user_id_alias='".$str."'");
  $rs=mysql_fetch_array($sql);
  if($rs["user_id"]=="")
    break;
  } 
```

您可以自由更改循环值和随机数范围。

# magento - 无法在 magento 中对捆绑产品进行分类

> ID：15332832
> 
> 赞同：0
> 
> 时间：2013-03-11T06:56:16.260
> 
> 标签：magento, bundle

我将在 magento 中设置计算机商店，因为我已经使用捆绑产品来定制台式计算机。现在我想要 3 类捆绑产品，其中第一个包含“桌面部件”的定制，第二个包含“软件和服务”的定制，第三个包含“配件”。

我已尝试使用此代码更改 view.phtml

```
<?php if ($_product->isSaleable() && $this->hasOptions()):?>
    <?php echo $this->getChildChildHtml('container2', '', true, true) ?>
<?php endif;?> 
```

但是此代码获取所有捆绑产品。我希望它分为 3 类。我还附上了我想要开发的快照。![在此处输入图像描述](../Images/8a24c079ba6d76581797caf0aff61d81.png)

请帮我解决这个问题。提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T07:07:18.957

您需要为此自定义相应的模板文件，您可以在下面找到这些文件

```
 app\design\frontend\base\default\template\bundle\catalog\product 
```

注意：覆盖上面的相应模板文件和自定义主题文件夹中的布局文件（Bundle.xml）

# ruby-on-rails - Paperclip 2.3.5 到 3.3.1 导致 url 与路径不同

> ID：15332833
> 
> 赞同：2
> 
> 时间：2013-03-11T06:56:28.090
> 
> 标签：ruby-on-rails, paperclip, rails-3-upgrade

我正在将我的 rails 应用程序从 2.3 升级到 3.2，但我遇到了回形针问题。我的应用以前使用的是回形针 v2.3.5，现在我使用的是带有回形针 v3.3.1 的 rails 3.0.20

当我尝试将头像上传到 S3 时会出现问题。看起来回形针在将其发送到 S3 之前转义了路径，但是当我询问特定样式的 url 时，该 url 使用路径的未转义版本，这会导致 S3 出现“NoSuchKey”错误（更像404 未找到）

在我的模型中，我有

```
Paperclip.interpolates :last_modified do |attachment, style|
  attachment.instance.updated_at.to_i
end

:path => "folder/:id/:style.:extension?:last_modified",
:url  => ":s3_domain_url", 
```

所以我的应用程序的旧版本使用来自 S3 的 url，例如：

```
http://my-bucket.s3.amazonaws.com/folder/123/thumbnail.png?123456789 
```

但是现在，每次我上传头像时，S3 都会像这样存储 url：

```
http://my-bucket.s3.amazonaws.com/folder/123/thumbnail.png%3F123456789 
```

并向我的模型询问缩略图样式的 url，将返回：

```
http://my-bucket.s3.amazonaws.com/folder/123/thumbnail.png?123456789 
```

S3 找不到。

我知道这似乎是一个容易解决的问题，但我主要担心的是生产应用程序有很多用户有很多图片，更新他们所有的图片是一项微妙的任务，手动转义问号不是解决方案.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-26T20:15:20.753

我刚刚想出了如何解决与此类*似的*问题。有一个新`escape_url`选项。也许试着把它变成`false`?

```
:path => "folder/:id/:style.:extension?:last_modified",
:url  => ":s3_domain_url",
:escape_url => false 
```

# excel - 我需要使用 vba 中的输入框在 excel 中填充数学表。“如何在新添加的工作表中填充表格？”

> ID：15332836
> 
> 赞同：-1
> 
> 时间：2013-03-11T06:56:47.097
> 
> 标签：excel, vba

我正在使用以下代码，

```
Sub chk() 

    Dim x As Variant

    Select Case StrPtr(x)
        Case 0
            Exit Sub
        Case Else
            Dim d As Integer
            Dim y As Integer
            Dim ws As Object
            Set ws = Worksheets(1)
            d = InputBox("enter the integer")
            For y = 1 To 10
                ws.Cells(y, 1) = y * d
            Next y
            ActiveSheet.Name = d
            ActiveWorkbook.Sheets.Add after:=Worksheets(3)
            Set ws = Nothing
    End Select

End Sub 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T12:43:55.740

在我看来，您的表格总是被添加到 Sheet1 而不是您添加的新表格？如果要将表格添加到新工作表中，请执行以下操作：

```
Sub chk() 

Dim x As Variant

Select Case StrPtr(x)
    Case 0
        Exit Sub
    Case Else
        Dim d As Integer
        Dim y As Integer
        Dim ws As Worksheet
        d = InputBox("enter the integer")
        Set ws = ActiveWorkbook.Sheets.Add After:=Worksheets(3)
        ws.Name = d
        For y = 1 To 10
            ws.Cells(y, 1) = y * d
        Next
        Set ws = Nothing
End Select 
```

结束子

# c# - 在登录页面 3-Tire 架构中遇到问题

> ID：15332842
> 
> 赞同：-4
> 
> 时间：2013-03-11T06:57:02.217
> 
> 标签：c#, database-connection, 3-tier

业务接入层：

```
 public static int login(string userlogin, string pwdlogin)
    {
        SqlConnection con = new SqlConnection();
        con.ConnectionString = GetConnectionString();
        con.Open();
        int id = 0;
        string selectstr = "SELECT UserName, Password FROM Registration WHERE UserName = '" + userlogin.Trim() + "' AND Password = '" + pwdlogin.Trim() + "'";
        SqlCommand cmd = new SqlCommand();
        cmd.CommandText = selectstr;
        cmd.CommandType = System.Data.CommandType.Text;
        cmd.Connection = con;
        id = cmd.ExecuteNonQuery();
        cmd = null;
        con.Close();
        return id;
    } 
```

登录.cs

```
 protected void Button1_Click(object sender, EventArgs e)
    {
        int id = BusinessAccessLayer.login(userlogin.Text.Trim(), pwdlogin.Text.Trim());
        if (id > 0)
        {
            message.Text = " valid";
        }
        else
        {
            message.Text = "in valid";
        }   
    } 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-11T07:01:20.007

好的，这里有很多问题：

1）`using`即使抛出异常，您也应该使用语句来确保关闭连接和命令

2) 您应该使用参数化 SQL 而不是将值直接放入您的 SQL 语句中，以避免 SQL 注入攻击

3）您似乎以纯文本形式存储密码。**不要那样做。**使用加盐哈希或类似的东西（理想情况下计算速度很慢）。

4) 你忽略了 .NET 命名约定；方法应该在 PascalCase

5) 您的 SQL 从不查看任何与用户 ID 相关的字段。不清楚您希望`ExecuteNonQuery`返回什么，但如果您想要实际的 ID，则需要在 SQL 中引用它。（即使最初你只是想知道用户的密码是否有效，我强烈怀疑在某些时候你会想要使用真实的用户 ID，所以你应该让你的代码返回它。如果你*真的*只想要知道密码是否有效，您应该将方法的返回类型更改为`bool`。）

6）`ExecuteNonQuery`当您的命令显然*是*查询时，您正在使用。使用[`ExecuteReader`](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlcommand.executereader.aspx)或[`ExecuteScalar`](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlcommand.executescalar.aspx)代替。（`ExecuteNonQuery`用于插入、删除和更新语句，它会返回受命令影响的行数。）

所以像：

```
public static int Login(string user, string password)
{
    using (var conn = new SqlConnection(GetConnectionString()))
    {
        conn.Open();
        string sql = "select Id, PasswordHash from logins where Username=@Username";
        using (var command = new SqlCommand(sql))
        {
            command.Parameters.Add("@Username", SqlDbType.NVarChar).Value = user;

            using (var reader = command.ExecuteRead())
            {
                if (reader.Read())
                {
                    int id = reader.GetInt32(0);
                    string hash = reader.GetString(1);
                    // TODO: Hash provided password with the same salt and compare
                    // results
                    if (CheckPassword(password, hash))
                    {
                        return id;
                    }
                }
                return 0; // Or use an int? return type and return null
            }
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T07:00:01.557

如果需要结果，则不能使用 .ExecuteNonQuery。使用 .ExecuteReader。

```
public static int login(string userlogin, string pwdlogin)
{
    SqlConnection con = new SqlConnection();
    con.ConnectionString = GetConnectionString();
    con.Open();
    int id = 0;
    string selectstr = "SELECT UserId FROM Registration WHERE UserName = '" +    userlogin.Trim() + "' AND Password = '" + pwdlogin.Trim() + "'";
    SqlCommand cmd = new SqlCommand();
    cmd.CommandText = selectstr;
    cmd.CommandType = System.Data.CommandType.Text;
    cmd.Connection = con;

    SqlDataReader reader = cmd.ExecuteReader();
    reader.Read();
    id = reader.GetInt32("UserId");

    reader.Close();
    con.Close();

    return id;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-11T07:02:44.347

[ExecuteNonQuery](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlcommand.executenonquery.aspx)用于 For UPDATE、INSERT 和 DELETE 语句。对于 SELECT 语句，使用[ExecuteReader](http://msdn.microsoft.com/en-us/library/9kcbe65k.aspx)

```
public static int login(string userlogin, string pwdlogin)
{
        SqlConnection con = new SqlConnection();
        con.ConnectionString = GetConnectionString();
        con.Open();
        int id = 0;
        string selectstr = "SELECT UserName, Password FROM Registration WHERE UserName = '" + userlogin.Trim() + "' AND Password = '" + pwdlogin.Trim() + "'";
        SqlCommand cmd = new SqlCommand();
        cmd.CommandText = selectstr;
        cmd.CommandType = System.Data.CommandType.Text;
        cmd.Connection = con;
        SqlDataReader reader = cmd.ExecuteReader();
        while (reader.Read())
        {
               id++; 
        }
        cmd = null;
        reader.Close();
        con.Close();
        return id;
} 
```

# c++ - 'wcsncasecmp' 未在此范围内声明

> ID：15332845
> 
> 赞同：3
> 
> 时间：2013-03-11T06:57:22.590
> 
> 标签：c++, c, json

我已经包含了来自 simpleJSON 的文件 JSONValue，它用于解析 json 字符串。编译时出现此错误，即未在此范围内声明“wcsncasecmp”。在这条线上。在搜索更多关于 wcsncasecmp 是 GNU 特定功能的信息时，我正在使用 Windows，所以任何人都可以帮助我。

```
else if ((simplejson_wcsnlen(*data, 4) && wcsncasecmp(*data, L"true", 4) == 0) ||     (simplejson_wcsnlen(*data, 5) && wcsncasecmp(*data, L"false", 5) == 0))
    {
    bool value = wcsncasecmp(*data, L"true", 4) == 0;
    (*data) += value ? 4 : 5;
    return new JSONValue(value);
} 
```

. 我会很感激任何帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T07:01:52.183

在 Windows 上`_wcsnicmp`，您可以使用。

更多参考：[_strnicmp、_wcsnicmp、_mbsnicmp、_strnicmp_l、_wcsnicmp_l、_mbsnicmp_l](http://msdn.microsoft.com/en-us/library/chd90w8e.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-06-11T12:21:35.197

请在您的源代码或 Visual Studio 中定义 WIN32 宏，请将其添加到项目/属性/C/C++/预处理器定义中。

```
#define WIN32 
```

在内部，它会将**wcsncasecmp**定义为**_wcsnicmp** ，就像 Rohan 已经提到的那样。这是 SimpleJSON 的一个已知问题。

```
// Win32 incompatibilities
#if defined(WIN32) && !defined(__GNUC__)
    #define wcsncasecmp _wcsnicmp
    static inline bool isnan(double x) { return x != x; }
    static inline bool isinf(double x) { return !isnan(x) && isnan(x - x); }
#endif 
```

# node.js - 带有nodejs的mongodb

> ID：15332852
> 
> 赞同：-2
> 
> 时间：2013-03-11T06:57:56.513
> 
> 标签：node.js, mongodb

这是我用来向 mongodb 插入文档的代码。

```
 var client = new Db('test', new Server("127.0.0.1", 27017, {}), {w: 1}),
        test = function (err, collection) {
        collection.insert({a:2}, function(err, docs) {

        collection.count(function(err, count) {
          test.assertEquals(1, count);
        });

        // Locate all the entries using find
        collection.find().toArray(function(err, results) {
          test.assertEquals(1, results.length);
          test.assertTrue(results[0].a === 2);

          // Let's close the db
          client.close();
        });
      });
    };

client.open(function(err, p_client) {
  client.collection('test_insert', test);
}); 
```

但是在运行时我收到错误

xports, require, module, __filename, __dirname) { var client = new Db('test', ^ ReferenceError: Db is not defined at Object. (C:\Users\Basic node\cheerio\mongonode.js:1:81

```
at Module._compile (module.js:449:26)
at Object.Module._extensions..js (module.js:467:10)
at Module.load (module.js:356:32)
at Function.Module._load (module.js:312:12)
at Module.runMain (module.js:492:10)
at process.startup.processNextTick.process._tickCallback (node.js:244:9) 
```

你能建议我如何解决这个问题吗

提前致谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-11T18:34:22.670

请导入您正在使用的所有必需模块。`Db is not defined`指出它`Db`是在其他模块中定义的，或者您忘记声明它。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-06-24T20:34:53.650

您会注意到这个确切的代码块发布在许多不同的 stackoverflow 问题中。这里的问题是，这是从 mongodb 文档中复制和粘贴的代码块，实际上是 mongodb nodejs 程序的第一个示例。

[https://npmjs.org/package/mongodb](https://npmjs.org/package/mongodb)

您会在“简介”下找到“插入文档的简单示例”。

这显然是一个不完整的例子，但很多人只是在尝试看看他们是否正确安装了所有东西并立即撞到墙上。

大多数人都会安装 mongodb 驱动程序，但会在顶部缺少如下内容：

```
var mongodb = require('mongodb');
var Db = mongodb.Db;
var Server = mongodb.Server; 
```

我在这里也陷入了复制粘贴陷阱，并遇到了另一个问题，即“assertEquals”方法不存在。我看到其他人在网络上的其他地方引用了该功能，但不确定它是如何工作的。

无论如何，为了让它对我有用，我需要 assert 模块：

```
var assert = require('assert'); 
```

然后我用这样的东西替换了 assertEquals 行：

```
 assert.equal(1, count, "Unexpected result"); 
```

请注意，如果您运行了几次，您将遇到问题；它会计算那张表中的东西的数量，而且会不止一个。

您必须弄清楚如何进入 mongo 的 CLI 并删除它们以使其成功运行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-12T06:51:18.490

尝试安装mongodb原生驱动

```
npm install mongodb 
```

# hover - 如何在不影响图像的情况下使 CSS 悬停在图像上

> ID：15332855
> 
> 赞同：-2
> 
> 时间：2013-03-11T06:58:00.740
> 
> 标签：hover

看图...理解;P

这是我使用的代码

```
.img1 {
background-image: url('img1.png');
width: 381px;
height: 187px;
background-repeat: no-repeat;
float: left;}

.img1:hover {
    background-image: url('imghover.png');
    width: 381px;
    height: 115px;
    background-repeat: no-repeat;
} 
```

但它正在影响 img1 我希望它出现在 img1 上方而不影响它

我修好了对不起

看到这是示例 [https://dl.dropbox.com/u/35904623/css.gif](https://dl.dropbox.com/u/35904623/css.gif)

+ 另一个

[https://dl.dropbox.com/u/35904623/css2.gif](https://dl.dropbox.com/u/35904623/css2.gif)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T06:59:58.533

在悬停时，您将高度设置为 381 像素，边距顶部设置为 -116 像素

```
height: 381px;
margin-top: -116px; 
```

会影响图像 1。

# android - 在Android中增加textSize

> ID：15332856
> 
> 赞同：0
> 
> 时间：2013-03-11T06:58:24.313
> 
> 标签：android, android-webview, textview

我需要开发一个安卓应用程序。我需要的是，当我点击 ImageView 时，文本大小会自动增加。我怎样才能做到这一点？

我使用了以下代码：

```
String title = in.getStringExtra("Title");
lblName = (TextView) findViewById(R.id.title);
lblName.setText(title);
ImageView positive = (ImageView) findViewById(R.id.imageView3);
positive.setOnClickListener(new OnClickListener() {
public void onClick(View v) {
lblName.setTextSize(TypedValue.COMPLEX_UNIT_PX, lblName.getTextSize() + 2);
  }  
}); 
```

在这里，TextView 上的 textSize 增加得很好。我怎样才能增加 android webview 上的 textSize ......

请给我解决这些？

```
WebView des = (WebView) findViewById(R.id.des);
String description = in.getStringExtra("Description");
des.loadDataWithBaseURL(null,description, "text/html", "UTF-8", null); 
```

我怎样才能增加这些描述的 textSize ????

我添加了以下代码：

```
WebSettings webSettings = des.getSettings();
webSettings.setTextSize(WebSettings.TextSize.SMALLEST); 
```

我必须运行该应用程序，这意味着我得到的文本是最小的字体大小。但我希望在单击 imagview 时增加字体大小......

**笔记：**

请看[这里](https://itunes.apple.com/gb/app/bbc-news/id377382255?mt=8)。请参阅底部的第二张图像 -A 和 +A 图像。单击该图像意味着自动增加和减少整个应用程序的 textview 字体大小。我怎样才能在android应用程序中做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T07:04:00.973

利用

```
webView.zoomIn(); 
```

用户感觉文本大小正在增加。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T07:06:27.443

```
WebSettings web_settings = web_view.getWebSettings();
web_settings.setTextZoom((int)(web_settings.getTextZoom()*1.2)); 
```

# mysql - SQL，当一 列的值为A或B时查找条目

> ID：15332857
> 
> 赞同：1
> 
> 时间：2013-03-11T06:58:26.883
> 
> 标签：mysql, sql, regex

基本上，我想在一个名为`foo`WHERE 的 TABLE 中选择值，该`foo`列等于`foo1`or `foo2`。

这可能吗，使用尽可能少的查询代码？

我认为这可能需要正则表达式，但如果有更短的方法，那就这样吧。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-11T07:01:13.897

使用 IN 或条件与 OR 的组合

```
select * from table where col in ('foo1', 'foo2')

select * from table where col = 'foo1' or col = 'foo2' 
```

# php - 如何使用 php 将我的 sql 表导出到 .doc 文件并下载

> ID：15332863
> 
> 赞同：1
> 
> 时间：2013-03-11T06:58:42.753
> 
> 标签：php, pdf-generation, doc, auto-generate

我的 sql 数据库中有一个包含大量数据的表，我必须使用 PHP 编码获取 .doc 或 .pdf 格式的副本。

我必须在单击页面中的“下载”按钮时进行下载。

在我的表中，我有以下格式的学生详细信息

![在此处输入图像描述](../Images/5d3fdb84354d233db111393ad8e89997.png)

我试图以

![在此处输入图像描述](../Images/d2890c50cbf888b235718dc4bb48403c.png)

但是我在 .Doc 文件中得到了没有表格形式和 S.no 的值

我的 PHP 文件中的代码是，..

```
<?php
include "../../db_connection/db_connection.php";
include "../../config/config.php";  
 ?>
<?PHP
 $result =mysql_query("SELECT Stu_id,Name,Class,Total,Rank FROM Student");
 $i = 0;
 if (mysql_num_rows($result) > 0) {
   for ($i = 0; $i < mysql_num_fields($result); $i++)
    echo mysql_field_name($result, $i)." ";
print("\n\n\n");
    }
  $values = mysql_query("SELECT Stu_id,Name,Class,Total,Rank  FROM Student");
  while ($rowr = mysql_fetch_row($values)) {
     for ($j=0;$j<$i;$j++) {
        $csv_output .= $rowr[$j]." ";
      }
     $csv_output .= "\n\n";
    }
    $filename = "Result"."_".date("Y-m-d_H-i",time());
    header("Content-type: application/vnd.ms-excel");
    header("Content-disposition: csv" . date("Y-m-d") . ".docx");
    header( "Content-disposition: filename=".$filename.".docx");
    print $csv_output;
    exit;
  ?> 
```

我对这段代码的输出是，..

![在此处输入图像描述](../Images/2763d6d90b30f5f7da904657ad67b6b7.png)

在这里我可以在哪里添加值以获取 S.No 以及如何在 .Doc 类型中形成表格形式..

我可以使用相同的代码为相同的流程生成 PDF 文件吗？

有人建议最好的主意..！

# jakarta-ee - 重复的 Post Data Struts

> ID：15332865
> 
> 赞同：-2
> 
> 时间：2013-03-11T06:58:48.977
> 
> 标签：jakarta-ee, struts2, struts, jmeter

我尝试通过使用 JMetter 提交表单（提交 100 个数据）来测试我的保存功能。在我的函数中，首先我将数据保存到数据库中。但是因为有太多重复保存的数据，我试着只写数据。我明白了，当我捕捉到 JMetter 提交的数据时，重复的数据就来了。我想问一下，为什么提交的数据是重复的，而当我使用wireshark检查提交的请求（发布）数据时，JMetter没有发送重复的数据。这意味着问题出在struts上。这个怎么解决，谢谢。

动作类中的函数代码以显示表单

```
public String renderAddMaintenanceItemForm(){
    maintenanceItem = new MaintenanceItemDto();
    return SUCCESS;
} 
```

jsp表单代码

```
<%@ taglib prefix="s" uri="/struts-tags"%>
<script type="text/javascript"> 
jQuery(document).ready(function() { 
    jQuery("#frmAddMaintenanceItem").validate({
        submitHandler: function(form) {
            return postForm(form, "savemaintenanceitem", "listmaintenanceitem", true);
        }
    });
});
</script>

<h4 class="widgettitle nomargin shadowed">Add Maintenance Item</h4>
<div class="widgetcontent bordered shadowed nopadding">
<form id="frmAddMaintenanceItem" class="stdform stdform2">   
    <s:hidden name="maintenanceItem.id" value="%{maintenanceItem.id}"/> 
    <s:if test="maintenanceItem.criteria == 'perma'">
        <s:hidden name="maintenanceItem.criteria" value="%{maintenanceItem.criteria}"/> 
        <p>
            <label>Item Name</label>
            <span class="field">
                <s:textfield name="maintenanceItem.name" value="%{maintenanceItem.name}" cssClass='input-xlarge required chardigit' minlength="5" maxlength="50"/>
            </span>
            </p>
    </s:if>
    <s:else>    
            <p>
                <label>Tipe</label>
                <span class="field">
                    <select name="maintenanceItem.criteria" class="uniformselect required">
                        <option>Select</option>
                            <option value='event' <s:if test="maintenanceItem.criteria == 'event'">selected="selected"</s:if>>
                                Event
                            </option>
                            <option value='time' <s:if test="maintenanceItem.criteria == 'time'">selected="selected"</s:if>>
                                Time
                            </option>
                    </select>
                </span>
            </p>
            <p>
                <label>Item Name</label>
                <span class="field">
                    <s:textfield name="maintenanceItem.name" value="%{maintenanceItem.name}" cssClass='input-xlarge required chardigit' minlength="5" maxlength="50"/>
                </span>
            </p>
            <p>
                <label>Normal Treshold (KM)</label>
                <span class="field"><s:textfield name="maintenanceItem.normalTreshold" value="%{maintenanceItem.normalTreshold}" cssClass="input-xxlarge required"/></span>
            </p>
            <p>
                <label>Max Treshold (KM)</label>
                <span class="field"><s:textfield name="maintenanceItem.maxTreshold" value="%{maintenanceItem.maxTreshold}" cssClass="input-xxlarge required"/></span>
            </p>
    </s:else>
    <p>
        <label>Note</label>
        <span class="field"><s:textfield name="maintenanceItem.note" value="%{maintenanceItem.note}" cssClass="input-xxlarge required"/></span>
    </p>
    <p class="stdformbutton">
        <button class="btn btn-primary">Submit </button>
        <button type="reset" class="btn">Reset </button>
    </p>
</form>
</div> 
```

这是保存用户输入的功能（在这种情况下，我只是将其写入控制台）

```
public String saveMaintenanceItem(){
    System.out.println(maintenanceItem.getName());
    /*messageDto = carService.saveMaintenanceItem(maintenanceItem);
    actionStatus = messageDto.getResult();
    SessionManager.serviceReturnToSession(session(), messageDto);*/
    return SUCCESS;
} 
```

当我检查时，就像 jmetter 忽略了表单上的 javascript。Jmetter 直接将数据发布到动作类。这样对吗？而且我仍然很困惑为什么它仍然会得到重复的数据。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T09:39:29.833

似乎在名为 postForm 的 javascript 函数中，还有另一个表单提交。这可能会导致双重表单提交。如果您找不到问题，请剪切 jsp 页面块的部分并检查并提交给操作类。

# tomcat - 在java中创建连接池

> ID：15332881
> 
> 赞同：0
> 
> 时间：2013-03-11T06:59:39.680
> 
> 标签：tomcat, jdbc, connection, connection-pooling

我正在为我的应用程序创建一个连接池。为此，我只想知道将 context.xml 保存在哪里，它具有资源名称、用户名、密码、驱动程序类名

当我将 context.xml 保留在 tomcat 中并保留在我的项目 META-INF 中时，有什么区别？

提前致谢！！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T07:08:21.423

要回答您的第一个问题...将 context.xml 保留在 META-INF 中并使用 JNDI 阅读它。据我所知，只有在您想使用 tomcat 处理数据库连接时才将 context.xml 保存在 tomcat 中。将 context.xml 保留在 META-INF 中将使您更容易阅读和管理您的连接。

# mysql - MYSQL UNION 和 WHERE 条件

> ID：15332882
> 
> 赞同：3
> 
> 时间：2013-03-11T06:59:40.213
> 
> 标签：mysql, union, where

我无法在 MYSQL 中为 UNION 设置 WHERE 条件。现在使用下面的 SQL 行，我得到了表中的所有记录，而不是过滤两个日期之间的日期。

我的订单工作正常。我想在不创建视图的情况下执行此操作

```
 SELECT *
    FROM DCHDR AS H
    LEFT JOIN DCDTL AS T ON H.DC_No = T.DC_Nos
    UNION
    SELECT *
    FROM DCHDR AS H
    RIGHT JOIN DCDTL AS T ON H.DC_No = T.DC_Nos
    WHERE H.DC_date
    BETWEEN '2013-03-02'
    AND '2013-03-11'
    ORDER BY `Product_Desc` ASC
    LIMIT 510 , 30 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-11T07:02:35.877

与 不同的是`ORDER BY`，`WHERE`联合中的子句仅影响联合的那一部分（`SELECT`它附加到的单个查询），*而不*影响整个联合。

将您的联合放在子查询中并过滤结果：

```
SELECT *
FROM
(
    SELECT *
    FROM DCHDR AS H
    LEFT JOIN DCDTL AS T ON H.DC_No = T.DC_Nos
    UNION
    SELECT *
    FROM DCHDR AS H
    RIGHT JOIN DCDTL AS T ON H.DC_No = T.DC_Nos
) H
WHERE H.DC_date BETWEEN '2013-03-02' AND '2013-03-11'
ORDER BY `Product_Desc` ASC
LIMIT 510, 30 
```

或为每个部分复制您的条件：

```
SELECT *
FROM DCHDR AS H
LEFT JOIN DCDTL AS T ON H.DC_No = T.DC_Nos
WHERE H.DC_date BETWEEN '2013-03-02' AND '2013-03-11'
UNION
SELECT *
FROM DCHDR AS H
RIGHT JOIN DCDTL AS T ON H.DC_No = T.DC_Nos
WHERE H.DC_date BETWEEN '2013-03-02' AND '2013-03-11'
ORDER BY `Product_Desc` ASC
LIMIT 510 , 30 
```

* * *

**看起来您正在尝试模拟完全连接。**我是否可以建议使用以下查询，它应该*更快*（并且实际上做你想要的，而*不是*过滤联合的第二部分）：

```
SELECT *
FROM DCHDR AS H
LEFT JOIN DCDTL AS T ON H.DC_No = T.DC_Nos
WHERE H.DC_date BETWEEN '2013-03-02' AND '2013-03-11'
UNION ALL
SELECT *
FROM DCHDR AS H
RIGHT JOIN DCDTL AS T ON H.DC_No = T.DC_Nos
WHERE H.DC_No IS NULL
ORDER BY `Product_Desc` ASC
LIMIT 510 , 30 
```

`DCDTL`请注意，如果您故意尝试使用 过滤掉重复的行，则`UNION`可以将其更改`UNION ALL`为`UNION`，但我怀疑实际上*并非*如此。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-11T07:02:27.547

尝试将其放在子查询中并在外部进行过滤：

```
SELECT *
FROM
(
    SELECT *
    FROM DCHDR AS H
    LEFT JOIN DCDTL AS T ON H.DC_No = T.DC_Nos
    UNION
    SELECT *
    FROM DCHDR AS H
    RIGHT JOIN DCDTL AS T ON H.DC_No = T.DC_Nos
) AS sub
WHERE DC_date BETWEEN '2013-03-02'
                  AND '2013-03-11'
ORDER BY `Product_Desc` ASC;
LIMIT 510 , 30 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-11T07:36:29.457

让我们看看你的`UNION`. 它由两部分组成：

```
SELECT *
FROM DCHDR AS H
LEFT JOIN DCDTL AS T ON H.DC_No = T.DC_Nos 
```

和

```
SELECT *
FROM DCHDR AS H
RIGHT JOIN DCDTL AS T ON H.DC_No = T.DC_Nos
WHERE H.DC_date
BETWEEN '2013-03-02'
AND '2013-03-11' 
```

a 中的条件`UNION`适用于后半部分。第二部分只是一个`INNER JOIN`，因为您在左侧部分列上有一个条件。并且由于`UNION`删除了重复行，因此整体查询等于您的第一个`LEFT JOIN`.

# delphi - [AnyDac][DApt]-400 但是我的桌子确实有 PK

> ID：15332885
> 
> 赞同：0
> 
> 时间：2013-03-11T06:59:46.890
> 
> 标签：delphi, master-detail, anydac

> [anydac][DApt]-400.Fetch command fetched[0] 而不是 [1] 记录，可能的原因：更新表没有 PK 或行标识符，记录已被另一个用户更改/删除，

执行时

```
SingleTestRunADQuery.Append();
SingleTestRunADQuery.FieldByName('run_id').Value := StartRecordingButton.Tag;
SingleTestRunADQuery.FieldByName('ph_value').Value := FloatToStr(ph_reading);
SingleTestRunADQuery.FieldByName('conductivity_value').Value := conductivity_reading;
SingleTestRunADQuery.FieldByName('cod_value').Value := cod_reading;
SingleTestRunADQuery.Post(); 
```

在

```
mysql> describe measurements;
+------------------------+-----------+------+-----+-------------------+-------+
| Field                  | Type      | Null | Key | Default           | Extra |
+------------------------+-----------+------+-----+-------------------+-------+
| run_id                 | int(11)   | NO   | MUL | NULL              |       |
| measurement_time_stamp | timestamp | NO   | PRI | CURRENT_TIMESTAMP |       |
| ph                     | float     | NO   |     | NULL              |       |
| conductivity           | float     | NO   |     | NULL              |       |
| cod                    | float     | NO   |     | NULL              |       |
+------------------------+-----------+------+-----+-------------------+-------+
5 rows in set (0.03 sec) 
```

如您所见，该表确实有一个PK。此外，该程序是单线程的，只有一个副本在运行，所以没有其他人在更新。

我将其设置`SingleTestRunADQuery.MasterFields=run_id and IndexFieldNames=run_id`为包含所有测试运行摘要的表的 PK。第二张表包含测试期间进行的测量，并`run_id`给出了一次测试运行的所有测量值（我只在 tiemstamp 上添加了 PK 以消除此错误，但它不起作用并且可以删除，我猜）。

如果有帮助，这里是主数据源：

```
mysql> describe test_runs;
+------------------+-------------+------+-----+-------------------+----------------+
| Field            | Type        | Null | Key | Default           | Extra          |
+------------------+-------------+------+-----+-------------------+----------------+
| run_id           | int(11)     | NO   | PRI | NULL              | auto_increment |
| start_time_stamp | timestamp   | NO   |     | CURRENT_TIMESTAMP |                |
| end_time_stamp   | timestamp   | YES  |     | NULL              |                |
| description      | varchar(64) | YES  |     | NULL              |                |
+------------------+-------------+------+-----+-------------------+----------------+
4 rows in set (0.05 sec) 
```

知道有什么问题吗？

* * *

[更新]@mj2008 指出有些字段有不同的名称。这是出于历史原因（我仍在尝试一些东西并且还不想改变），但是这些是由查询调整的：

```
SELECT run_id,
       measurement_time_stamp, 
       ph as ph_value, 
       conductivity as conductivity_value, 
       cod as cod_value

FROM photo_catalytic.measurements

ORDER BY measurement_time_stamp DESC 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-11T09:35:23.400

我不确定将 TIMESTAMP 字段作为主键是否正确。它会在每次更新时[自动更改。](http://dev.mysql.com/doc/refman/5.1/en/timestamp-initialization.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-04-27T19:30:04.487

通过“字段编辑器”选项查看查询组件的 TFields 属性。检查“关键字段”是否将 ProviderFlags.pfInKey 属性设置为 true。

这适用于今天的 FireDac 组件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-12-03T19:09:24.483

您应该按如下方式更改连接属性：尝试将 UpdateOptions.RefreshMode 设置为 rmManual。

[在此处输入图像描述](https://i.stack.imgur.com/dFOly.png)

# javascript - 提交表单时未打开 Jquery 移动弹出窗口

> ID：15332886
> 
> 赞同：2
> 
> 时间：2013-03-11T06:59:52.363
> 
> 标签：javascript, asp.net, jquery-mobile

有一个`jquery mobile submit form`我用来将值保存到`SQL database`.
一旦值成功存储在 DB 中，就会打开一个弹出窗口。

问题是单击提交按钮时弹出窗口未打开。我需要单击 2 次才能打开弹出窗口，这又会添加 2 个数据库条目。

代码 ：

```
 <script type="text/javascript" >
        function BuyerDetails() {
            var keys = new Array();
            keys[0] = $('#boardingPassId').val();
            keys[1] = $('#MainContent_totalPrice').val();
            keys[2] = document.getElementById("select-choice-a").options[document.getElementById("select-choice-a").selectedIndex].text;
            keys[3] = $('#email').val();
            keys[4] = $('#Username').val();
            keys[5] = $('#Feedback').val();
            PageMethods.AddToBuyers(keys, onSuccess, onFailure);
        }

        function onSuccess(result) {
            $('#popupDiv').popup("open");
        }

        function onFailure(error) {
            alert(error);
        }
    </script> 
```

HTML 代码

```
<div id="page" data-role="page">
    <div data-theme="a" data-role="header" data-position="fixed">
        <h3 style="color: white;">Confirmation
        </h3>
        <a data-role="button" onclick="javascript:history.back()" class="ui-btn-left">Back</a>
        <a style="color: white;" data-role="button" data-ajax="false" href="Default.aspx">Home</a>
    </div>
    <div data-role="content">
        <div class="content-primary">
            <ul data-role="listview" data-inset="true">
                <li data-role="fieldcontain">
                    <label for="email">
                        Boarding pass Number</label>
                    <input id="boardingPassId" type="text" name="input" value="" />
                </li>
                <li data-role="fieldcontain">
                    <label for="email">
                        Name</label>
                    <input id="Username" type="text" name="input" value="" />
                </li>
                <li data-role="fieldcontain">
                    <label for="email">
                        Total Price</label>
                    <input type="text" name="input1" runat="server" id="totalPrice" readonly="readonly" />
                </li>
                <li data-role="fieldcontain">
                    <label for="email" class="select">
                        Payment Method</label>
                    <select name="select-choice-a" id="select-choice-a" data-native-menu="false" style="width: 500px;">
                        <option value="card">Card</option>
                        <option value="cash">Cash</option>
                    </select>
                </li>
                <li data-role="fieldcontain">
                    <label for="email">
                        Feedback(possible improvement/suggestions)</label>
                    <textarea cols="40" rows="8" name="textarea" id="Feedback"></textarea>
                </li>
                <li data-role="fieldcontain">
                    <label for="email">
                        Email id</label>
                    <input type="text" name="email" id="email" value="" />
                </li>
                <li class="ui-body ui-body-b">
                    <fieldset class="ui-grid-a">
                        <div class="ui-block-a">
                            <button type="submit" data-theme="d">
                                Cancel</button>
                        </div>
                        <div class="ui-block-b">
                            <button type="button" onclick="BuyerDetails()" data-theme="a">
                                Submit</button>
                        </div>
                    </fieldset>
                </li>
            </ul>
        </div>

        <div class="content-secondary">
            <div data-role="popup" id="popupDiv" data-theme="d" data-overlay-theme="b" class="ui-content"
                style="max-width: 340px;">
                <span id="dialog_title_span">Thank You</span>
                <p>
                    Your order has been placed
                </p>
                <a id="productPrice" data-role="button" data-theme="b" data-icon="check" data-inline="true"
                    href="Default.aspx" data-mini="true">DONE</a>
            </div>
        </div>
    </div>

</div> 
```

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T09:31:47.290

jQuery Mobile 弹出窗口有一点问题，主要是在 Chrome 浏览器下执行。

经典的修复是把这行：

```
$('#popupDiv').popup("open"); 
```

在 setTimeout 函数中：

```
setTimeout(function(){
    $('#popupDiv').popup("open");
},100); 
```

1ms 应该足够了，但您还应该使用其他值进行测试。

我还为您做了一个工作示例：http: [//jsfiddle.net/Gajotres/4yvBK/](http://jsfiddle.net/Gajotres/4yvBK/)

# visual-studio - 如何在另一台 PC 上显示 WP 应用程序的演示？

> ID：15332895
> 
> 赞同：0
> 
> 时间：2013-03-11T07:00:25.920
> 
> 标签：visual-studio, sdk, installation, windows-phone-8, windows-phone-8-emulator

我有一个小型 WP 应用程序，我需要向另一个没有在他的 PC 上安装任何 WP 相关软件的人展示它的（交互式）演示并展示它的功能。

是否有其他人可以下载的 WP 模拟器的超级精简版？

另外，如何创建 WP 应用程序的安装文件，以便他轻松安装和运行？

他肯定不需要安装整个 SDK，包括 Visual Studio，对吧？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T09:13:51.613

要运行模拟器，您需要安装完整的 SDK ( [http://dev.windowsphone.com/en-us/downloadsdk](http://dev.windowsphone.com/en-us/downloadsdk) )，但请注意，这不需要现有版本的 Visual Studio。
没有仅适用于模拟器的独立安装程序。

应用程序被编译成 XAP 文件（类似于 APK）并且`Application Deployment`应用程序（作为 SDK 的一部分安装）将允许将其加载到模拟器中。此工具还可用于将应用程序加载到附加的、开发人员解锁的设备中。

在向不熟悉 Windows Phone 的人演示应用程序方面，我发现让他们在模拟器上体验它通常是一种低于标准的体验，并不能创造最佳体验。让人们在实际设备上体验应用程序要好得多。或者，如果它处于应用程序开发的早期阶段，通常最好只捕获正在运行的应用程序的视频（如果很好并且通常更容易，则来自模拟器）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T22:45:56.530

好的，我想我已经找到了所需的步骤：

1.  从“Documents\Visual Studio 2010\Projects\AppName\Bin\Release\”发送 XAP 文件，其中“AppName”是应用程序的名称。

2.  下载并安装[sdk](http://dev.windowsphone.com/en-us/downloadsdk)。不确定是否需要 Visual Studio。

3.  运行“XapDeploy.exe”工具，该工具将允许运行模拟器并将 XAP 文件安装到其中。该文件类似于：C:\Program Files (x86)\Microsoft SDKs\Windows Phone\v8.0\Tools\XAP Deployment

4.  从模拟器中运行应用程序。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-11T07:04:59.010

他需要安装 VS Express 并满足所有需要（Win8、客户端 Hyper-V 的 CPU 支持）。

模拟器在远程桌面和其他远程查看技术（如 Skype）上运行良好，所以这是另一种选择。

# apache-flex - 如何从 AIR 项目中导出 Mac 上的 EXE 本机安装程序

> ID：15332896
> 
> 赞同：0
> 
> 时间：2013-03-11T07:00:29.150
> 
> 标签：apache-flex, air

我有一个 AIR 应用程序，我可以将它导出到 DMG（本机 Mac 应用程序）。但是，我看不到如何导出到 Windows EXE 文件。

**更多详细信息**
我使用的是 Mac OSX 10.8.2、Flash Builder 4.7、AIR 3.6 和 Flex 4.6。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T14:36:38.837

您无法在 Mac 上创建 exe；您必须在 Windows 操作系统中执行此操作。不过，这可以是在 mac 硬件上运行虚拟化的 Windows。

同样，您不能在 Windows 机器上创建 DMG 文件。

# iphone - 在 iPhone 应用程序中从谷歌驱动器下载图像

> ID：15332899
> 
> 赞同：1
> 
> 时间：2013-03-11T07:00:42.353
> 
> 标签：iphone, ios, objective-c, google-drive-api

我正在制作一个集成了谷歌驱动器的 iPhone 应用程序。现在我想将驱动器中的图像下载到应用程序中。有多个图像。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T17:25:05.513

Google Drive SDK 文档包含多种语言的完整代码片段，展示了如何下载文件：

[https://developers.google.com/drive/manage-downloads](https://developers.google.com/drive/manage-downloads)

您还应该查看 参考指南`files.get`，其中包括 Objective-C 代码：

[https://developers.google.com/drive/v2/reference/files/get](https://developers.google.com/drive/v2/reference/files/get)

# css - 如何在没有绝对和不包装div的情况下定位样式锚元素？

> ID：15332901
> 
> 赞同：2
> 
> 时间：2013-03-11T07:00:44.970
> 
> 标签：css, anchor, css-position

我有以下 HTML：

```
<div class="top">
        <div class="header title">Some Big Header Goes Here</div>
        <div class="sub-header title">The fancyness enters here.</div>
        <a href="#">A random link</a>
</div> 
```

具有以下类的样式：

```
.header {
        padding:2%;
}
.sub-header {
        font-size:120%;
        font-style:italic;
}
.title {
        font-size:158%;
        line-height:80%;
}
.top {  
        display:block;
        text-align:center;
        border:1px solid lime;
        padding:1%;
}
.top a {
       /*color:red;*/ /* This works but I don't want this */
       padding:100000px; /* This does not work, nor do smaller values */
       margin:-999999px; /* This does nothing. */
} 
```

如何设置锚链接的样式以仅使用一点填充和边距来定位它，从而使其与上面的两个标题保持一点距离？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-11T07:08:31.400

将 a 添加`display: block;`到您的 .top 样式中，然后相应地调整边距和填充。

```
top a {
       display: block;
       /*color:red;*/ /* This works but I don't want this */
       padding:10px; 
       margin:20px; 

} 
```

工作小提琴：http: [//jsfiddle.net/jnz65/](http://jsfiddle.net/jnz65/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-11T07:31:00.117

使用锚标记指定属性时，锚标记不会从父标记继承某些属性`href`。这就是为什么您需要专门添加`display:block`到锚标记的样式。

# php - 删除 csv 文件中某个位置之后的所有字符

> ID：15332905
> 
> 赞同：-2
> 
> 时间：2013-03-11T07:00:55.903
> 
> 标签：php, csv

我有一个每天交付给我的 CSV 文件，最后与我不需要的数据合并，如下所示：

```
 "Date","Site","PCode","PName","Sales"
    "2013/03/10 00:00:00","10195","66011","GT 1","9"
    "2013/03/10 00:00:00","22413","66005","GT 2E","4"
    "2013/03/10 00:00:00","10082","66003","GT 23E","6"
    "SCode"
    "12345678" 
```

我想在其上运行一个 PHP 脚本，删除包括“SCode”在内的所有字符。文件中的位置和文件总长度每天都在变化，因此它需要来自单词而不是来自设定位置。

有任何想法吗？我看过，但大多数示例在设置位置后删除，不会随不同文件更改。谢谢你。

像这样的新文件：

```
 "Date","Site","PCode","PName","Sales"
    "2013/03/10 00:00:00","10195","66011","GT 1","9"
    "2013/03/10 00:00:00","22413","66005","GT 2E","4"
    "2013/03/10 00:00:00","10082","66003","GT 23E","6" 
```

从下面的反馈中使用了这个谢谢：

```
 <?
    $path="test.csv";
    $csv = file_get_contents($path);

    $new_csv = strstr($csv,'"SCode"',true); //csv file up to "SCode"

    $file = fopen("test2.csv","w");
    fwrite($file,$new_csv);
    fclose($file);
    ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T07:07:05.947

如果 csv 文件不是大得离谱，您可以使用该`strstr()`函数，并将标志`$before_needle`设置为 true：

```
$csv; //your loaded in csv file as a string

$new_csv = strstr($csv,'"SCode"',true); //csv file up to "SCode" 
```

# php - 我们可以在 symfony2 的多个包中使用通用（教义）orm 文件吗？

> ID：15332914
> 
> 赞同：2
> 
> 时间：2013-03-11T07:01:30.883
> 
> 标签：php, symfony, orm, doctrine

我是新手`symfony2`。我正在开发一个 Web 应用程序，其中有两个捆绑包：第一个是 AdminBundle，第二个是 UserBundle。我正在使用 Doctrine`ORM`作为数据库。我有多个表，其中一些表对两个捆绑包都是通用的。

现在，我必须`ORM`在两个常见的 Bundle 中制作文件。有什么方法可以将这些通用`ORM`文件放在一个地方并在两个捆绑包中使用？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T07:17:49.213

您绝对可以使用常见的实体和映射。当您引用它时，只需使用正确的名称空间。例如，从您的管理包中，您可以访问用户包实体，例如

```
$user = new Acme\UserBundle\Entities\User();
$userRepo = $em->getRepository("AcmeUserBundle:User"); 
```

# gdb - GDB MI：执行时打印或列出代码

> ID：15332915
> 
> 赞同：1
> 
> 时间：2013-03-11T07:01:42.490
> 
> 标签：gdb, gdbserver

有没有办法让 GDB 接口打印或列出当前正在执行的代码。

如何通过 GDB 执行此操作（列出当前正在执行的代码）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T08:21:55.390

不确定 MI 是否有列出源代码的命令（实际上我敢打赌它没有）。它拥有的是-stack-info-frame，它将返回有关源文件、行等的信息。

一旦你有了这些信息，它只是打开文件，阅读适当的行等。

# android - 如何在 Android 中播放高 fps 视频

> ID：15332917
> 
> 赞同：2
> 
> 时间：2013-03-11T07:01:45.097
> 
> 标签：android, video, android-videoview

我想播放每秒帧数更高的视频。例如：90fps,120fps 当我使用视频视图播放它们时，播放不流畅。我能做些什么来解决这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T07:13:39.587

Android 上的最大帧率为 60FPS。

# jquery - 如何使用单选组填充表单

> ID：15332923
> 
> 赞同：2
> 
> 时间：2013-03-11T07:01:56.933
> 
> 标签：jquery

我有一个包含很多广播组的表格。我想使用 jquery 填充此表单。我的问题发布在 js fiddle

```
<form id="MyForm">
    <input type="radio" name="a[1]"/>
    <input type="radio" name="a[1]"/>
    <input type="radio" name="a[1]"/>
    <br>
     <input type="radio" name="b[1]"/>
    <input type="radio" name="b[1]"/>
    <input type="radio" name="b[1]"/>
    <br>
     <input type="radio" name="b[2]"/>
    <input type="radio" name="b[2]"/>
    <input type="radio" name="b[2]"/>
</form> 
```

[链接到 jsFiddle](http://jsfiddle.net/sujithwayanad/eQeZg/)

帮我

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T07:05:12.297

您忘记在小提琴中添加 jquery 并对其进行了一些更正..

```
function populate(frm, data) {
 $.each(data, function(key, value){
   $('[name="'+key+'"]', frm).val(value); //here added ""
   $('[name="'+key+'"]', frm).attr("checked", value);
 });
} 
```

[在这里工作小提琴](http://jsfiddle.net/bipen/eQeZg/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T07:05:46.203

你的选择器出错了`$('[name="'+key+'"]', frm)`..因为`key`有`[`，`]`符号（`a[1]`等`a[2]`），你应该让它`$('[name="'+key+'"]', frm)`..

你也忘了在你的小提琴中添加 jQuery 库..

尝试：

```
function populate(frm, data) {
   $.each(data, function(key, value){
    $('[name="'+key+'"]', frm).val(value);
     $('[name="'+key+'"]', frm).attr("checked", value);
  });
} 
```

**[样本](http://jsfiddle.net/EQmeJ/)**

# hibernate - 就在我提交事务时违反了完整性约束

> ID：15332930
> 
> 赞同：5
> 
> 时间：2013-03-11T07:02:31.570
> 
> 标签：hibernate, annotations, hibernate-annotations

我正在使用 Hibernate 4.0 Final 和 ojdbc6 来开发我的 Web 应用程序。一切都很好，除非我尝试插入新的父/子关系。首先，这些是实体：

```
@Entity
@Table(name = "EMPLOYEE")
public class Employee implements Serializable, Cloneable {
    @Id
    @SequenceGenerator(name = "seq", sequenceName = "P_SEQ")
    @GeneratedValue(generator = "seq")
    @Column(name = "ID_EMPLOYEE")
    private long idEmployee;
    ......
    @OneToMany(cascade = CascadeType.ALL, fetch = FetchType.EAGER, mappedBy = "employee", orphanRemoval = true)
    @Fetch(FetchMode.SELECT)
    @BatchSize(size = 10)
    private Set<Address> addresses;
    ......
}

@Entity
@Table(name = "ADDRESS")
public class Address implements Serializable, Cloneable, Comparable {    
    @Id
    @SequenceGenerator(name = "seq", sequenceName = "P_SEQ")
    @GeneratedValue(generator = "seq")
    @Column(name = "ID_ADDRESS")
    private long idAddress;

    @ManyToOne(fetch = FetchType.LAZY)
    @JoinColumn(name = "ID_EMPLOYEE")
    private Employee employee;
    .......
} 
```

让我们看看这两种情况：

1.  员工已经存在，我尝试向其添加新地址 --> 它工作正常。
2.  员工尚不存在，我尝试创建一个新员工。两种不同的情况：

    *   a) 我只插入一个员工（没有地址）--> 它工作正常。
    *   b）我插入和员工及其地址->**它失败**了。不得不说，这一定是一个原子事务。我的意思是，我需要一次创建（保存）一名员工和一个地址。

这是事务处理程序：

```
public static void save(Employee employee) throws HibernateException, Exception {
    Session session = HibernateUtil.getCurrentSession();
    session.beginTransaction();
    try {
        session.saveOrUpdate(employee);
    } catch (Exception ex) {
        session.refresh(employee);
        HibernateUtil.closeSession();
        throw ex;
    }
    HibernateUtil.commitTransaction();
}
public static void commitTransaction() throws Exception {
    Transaction tx = getSessionFactory().getCurrentSession().getTransaction();
    try {
        if (tx != null && !tx.wasCommitted() && !tx.wasRolledBack()) {
            tx.commit();
        }
    } catch (Exception ex) {
        tx.rollback();
        throw ex;
    } finally {
        closeSession();
    }
} 
```

可以想象，2.b 案例是我关心的案例。我已经调试了事务，这是我调用 save() 方法（在 DAO 类中）时得到的：

1.  **session.saveOrUpdate(employee)**方法执行成功（我可以检查保存的员工是否有地址）。此外，它`idEmployee`的设置正确（从序列中获取）并且地址绑定到员工并且具有有效`idAddress`（也从序列中获取）。
2.  在执行**commitTransaction()**方法期间，我得到一个`org.hibernate.exception.ConstraintViolationException`，尽管两者`idEmployee`和`idAddress`之前都已正确设置。

简而言之，异常只是在提交过程中出现。就像这开始提交孩子（地址）而不是父母（员工）。

我究竟做错了什么？有谁能够帮助我？提前致谢。

**更新。**上面，你可以看到涉及问题的两个类的主要部分。现在，除了异常跟踪之外，这里还有调用它们的方法。它们按照它们被调用的顺序排列。

属于 DataBacking 类：

```
public void save(ActionEvent event) {
    try {
        EmployeeDAO.save(selectedEmployee);
        newEmployee();  //reset the employee and its collections
    } catch (ConstraintViolationException ex) {
        Utilities.addFacesMessage(FacesMessage.SEVERITY_WARN, ex.getMessage(), "");
    } catch (Exception ex) {
        Utilities.log("error", ex.getCause().toString());
        Utilities.addFacesMessage(FacesMessage.SEVERITY_WARN, ex.getMessage(), "");
    }
} 
```

属于 EmployeeDAO 类：

```
public static void save(Employee employee) throws HibernateException, Exception {
    Session session = HibernateUtil.getCurrentSession();
    session.beginTransaction();
    try {
        session.saveOrUpdate(employee);
    } catch (Exception ex) {
        session.refresh(employee);
        HibernateUtil.closeSession();
        throw ex;
    }
    HibernateUtil.commitTransaction();
} 
```

属于 HibernateUtil 类：

```
public static void commitTransaction() throws Exception {
    Transaction tx = getSessionFactory().getCurrentSession().getTransaction();
    try {
        if (tx != null && !tx.wasCommitted() && !tx.wasRolledBack()) {
            tx.commit();
        }
    } catch (Exception ex) {
        tx.rollback();
        throw ex;
    } finally {
        closeSession();
    }
} 
```

在 EmployeeDAO.save() 方法调用 session.SaveOrUpdate(employee) 之后，我得到以下跟踪：

```
2013-03-12 07:22:55,958 [DEBUG, org.hibernate.internal.SessionImpl] Opened session at timestamp: 13630693759 
2013-03-12 07:22:57,584 [DEBUG, org.hibernate.engine.transaction.spi.AbstractTransactionImpl] begin 
2013-03-12 07:22:57,585 [DEBUG, org.hibernate.engine.jdbc.internal.LogicalConnectionImpl] Obtaining JDBC connection 
2013-03-12 07:22:57,586 [DEBUG, org.hibernate.engine.jdbc.internal.LogicalConnectionImpl] Obtained JDBC connection 
2013-03-12 07:22:57,587 [DEBUG, org.hibernate.engine.transaction.internal.jdbc.JdbcTransaction] initial autocommit status: true 
2013-03-12 07:22:57,587 [DEBUG, org.hibernate.engine.transaction.internal.jdbc.JdbcTransaction] disabling autocommit 
2013-03-12 07:23:00,285 [DEBUG, org.hibernate.SQL] 
    select
        P_SEQ.nextval 
    from
        dual 
2013-03-12 07:23:00,361 [DEBUG, org.hibernate.id.SequenceGenerator] Sequence identifier generated: BasicHolder[java.lang.Long[5665]] 
2013-03-12 07:23:00,365 [DEBUG, org.hibernate.event.internal.AbstractSaveEventListener] Generated identifier: 5665, using strategy: org.hibernate.id.SequenceGenerator 
2013-03-12 07:23:00,411 [DEBUG, org.hibernate.SQL] 
    select
        P_SEQ.nextval 
    from
        dual 
2013-03-12 07:23:00,417 [DEBUG, org.hibernate.id.SequenceGenerator] Sequence identifier generated: BasicHolder[java.lang.Long[5666]] 
2013-03-12 07:23:00,421 [DEBUG, org.hibernate.event.internal.AbstractSaveEventListener] Generated identifier: 5666, using strategy: org.hibernate.id.SequenceGenerator 
```

在调用提交之后：

```
2013-03-12 07:24:53,288 [DEBUG, org.hibernate.engine.transaction.spi.AbstractTransactionImpl] committing 
2013-03-12 07:24:53,336 [DEBUG, org.hibernate.event.internal.AbstractFlushingEventListener] Processing flush-time cascades 
2013-03-12 07:24:53,343 [DEBUG, org.hibernate.event.internal.AbstractFlushingEventListener] Dirty checking collections 
2013-03-12 07:24:53,403 [DEBUG, org.hibernate.engine.internal.Collections] Collection found: [org.svq.pol.gesper.bean.Employee.addresses#5665], was: [<unreferenced>] (initialized) 
2013-03-12 07:24:53,439 [DEBUG, org.hibernate.event.internal.AbstractFlushingEventListener] Flushed: 2 insertions, 0 updates, 0 deletions to 2 objects 
2013-03-12 07:24:53,440 [DEBUG, org.hibernate.event.internal.AbstractFlushingEventListener] Flushed: 1 (re)creations, 0 updates, 0 removals to 1 collections 
2013-03-12 07:24:53,453 [DEBUG, org.hibernate.internal.util.EntityPrinter] Listing entities: 
2013-03-12 07:24:53,454 [DEBUG, org.hibernate.internal.util.EntityPrinter] org.svq.pol.gesper.bean.Address{address=fasdf, pc=, city=fadsf, idAddress=5666, operator=xxxxx, province=, telef2=, movDate=Tue Mar 12 07:21:15 CET 2013, telef1=, employee=org.svq.pol.gesper.bean.Employee#5665, version=0} 
2013-03-12 07:24:53,456 [DEBUG, org.hibernate.internal.util.EntityPrinter] org.svq.pol.gesper.bean.Employee{surname=fadsf, user=null, dob=Tue Jan 01 00:00:00 CET 1980, address=[org.svq.pol.gesper.bean.Address#5666], pob=fadsf, operator=xxxxx, movDate=Tue Mar 12 07:21:15 CET 2013, version=0, name=fasdf, gender=H, idEmployee=5665, id=12345678} 
2013-03-12 07:24:53,572 [DEBUG, org.hibernate.SQL] 
    insert 
    into
        EMPLOYEE    
    (SURNAME, ID, MOV_DATE, DOB, GENDER, POB, OPERATOR, USER, VERSION, ID_EMPLOYEE)
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?) 
2013-03-12 07:24:53,793 [DEBUG, org.hibernate.SQL] 
    insert 
    into
        ADDRESS
    (pc, address, MOV_DATE, OPERATOR, ID_EMPLOYEE, city, province, telef_1, telef_2, version, ID_ADDRESS)        
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) 
2013-03-12 07:24:53,943 [DEBUG, org.hibernate.engine.jdbc.spi.SqlExceptionHelper] ORA-02291: integrity constraint (PERPLADM.ADDRESS_EMPLOYEE_FK) violated - parent key not found
 [n/a] 
java.sql.SQLIntegrityConstraintViolationException: ORA-02291: integrity constraint (PERPLADM.ADDRESS_EMPLOYEE_FK) violated - parent key not found

    at oracle.jdbc.driver.T4CTTIoer.processError(T4CTTIoer.java:445)
    at oracle.jdbc.driver.T4CTTIoer.processError(T4CTTIoer.java:396)
    at oracle.jdbc.driver.T4C8Oall.processError(T4C8Oall.java:879)
    at oracle.jdbc.driver.T4CTTIfun.receive(T4CTTIfun.java:450)
    at oracle.jdbc.driver.T4CTTIfun.doRPC(T4CTTIfun.java:192)
    at oracle.jdbc.driver.T4C8Oall.doOALL(T4C8Oall.java:531)
    at oracle.jdbc.driver.T4CPreparedStatement.doOall8(T4CPreparedStatement.java:207)
    at oracle.jdbc.driver.T4CPreparedStatement.executeForRows(T4CPreparedStatement.java:1044)
    at oracle.jdbc.driver.OracleStatement.doExecuteWithTimeout(OracleStatement.java:1329)
    at oracle.jdbc.driver.OraclePreparedStatement.executeInternal(OraclePreparedStatement.java:3584)
    at oracle.jdbc.driver.OraclePreparedStatement.executeUpdate(OraclePreparedStatement.java:3665)
    at oracle.jdbc.driver.OraclePreparedStatementWrapper.executeUpdate(OraclePreparedStatementWrapper.java:1352)
    at org.apache.tomcat.dbcp.dbcp.DelegatingPreparedStatement.executeUpdate(DelegatingPreparedStatement.java:105)
    at org.apache.tomcat.dbcp.dbcp.DelegatingPreparedStatement.executeUpdate(DelegatingPreparedStatement.java:105)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at org.hibernate.engine.jdbc.internal.proxy.AbstractStatementProxyHandler.continueInvocation(AbstractStatementProxyHandler.java:122)
    at org.hibernate.engine.jdbc.internal.proxy.AbstractProxyHandler.invoke(AbstractProxyHandler.java:81)
    at $Proxy46.executeUpdate(Unknown Source)
    at org.hibernate.engine.jdbc.batch.internal.NonBatchingBatch.addToBatch(NonBatchingBatch.java:56)
    at org.hibernate.persister.entity.AbstractEntityPersister.insert(AbstractEntityPersister.java:2849)
    at org.hibernate.persister.entity.AbstractEntityPersister.insert(AbstractEntityPersister.java:3290)
    at org.hibernate.action.internal.EntityInsertAction.execute(EntityInsertAction.java:80)
    at org.hibernate.engine.spi.ActionQueue.execute(ActionQueue.java:273)
    at org.hibernate.engine.spi.ActionQueue.executeActions(ActionQueue.java:265)
    at org.hibernate.engine.spi.ActionQueue.executeActions(ActionQueue.java:186)
    at org.hibernate.event.internal.AbstractFlushingEventListener.performExecutions(AbstractFlushingEventListener.java:323)
    at org.hibernate.event.internal.DefaultFlushEventListener.onFlush(DefaultFlushEventListener.java:52)
    at org.hibernate.internal.SessionImpl.flush(SessionImpl.java:1081)
    at org.hibernate.internal.SessionImpl.managedFlush(SessionImpl.java:315)
    at org.hibernate.engine.transaction.internal.jdbc.JdbcTransaction.beforeTransactionCommit(JdbcTransaction.java:101)
    at org.hibernate.engine.transaction.spi.AbstractTransactionImpl.commit(AbstractTransactionImpl.java:175)
    at org.svq.pol.gesper.utility.HibernateUtil.commitTransaction(HibernateUtil.java:57)
    at org.svq.pol.gesper.dao.EmployeeDAO.save(EmployeeDAO.java:110)
    at org.svq.pol.gesper.backing.DataBacking.save(DataBacking.java:498)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at org.apache.el.parser.AstValue.invoke(AstValue.java:262)
    at org.apache.el.MethodExpressionImpl.invoke(MethodExpressionImpl.java:278)
    at com.sun.faces.facelets.el.TagMethodExpression.invoke(TagMethodExpression.java:105)
    at javax.faces.event.MethodExpressionActionListener.processAction(MethodExpressionActionListener.java:148)
    at javax.faces.event.ActionEvent.processListener(ActionEvent.java:88)
    at javax.faces.component.UIComponentBase.broadcast(UIComponentBase.java:769)
    at javax.faces.component.UICommand.broadcast(UICommand.java:300)
    at javax.faces.component.UIViewRoot.broadcastEvents(UIViewRoot.java:794)
    at javax.faces.component.UIViewRoot.processApplication(UIViewRoot.java:1259)
    at com.sun.faces.lifecycle.InvokeApplicationPhase.execute(InvokeApplicationPhase.java:81)
    at com.sun.faces.lifecycle.Phase.doPhase(Phase.java:101)
    at com.sun.faces.lifecycle.LifecycleImpl.execute(LifecycleImpl.java:118)
    at javax.faces.webapp.FacesServlet.service(FacesServlet.java:409)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:304)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:224)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:169)
    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:168)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:100)
    at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:929)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:405)
    at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:964)
    at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:515)
    at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:302)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)
    at java.lang.Thread.run(Thread.java:722)
2013-03-12 07:24:54,027 [WARN, org.hibernate.engine.jdbc.spi.SqlExceptionHelper] SQL Error: 2291, SQLState: 23000 
2013-03-12 07:24:54,027 [ERROR, org.hibernate.engine.jdbc.spi.SqlExceptionHelper] ORA-02291: integrity constraint (PERPLADM.ADDRESS_EMPLOYEE_FK) violated - parent key not found 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2015-01-26T16:40:56.267

经过几天的努力，我最终找到了问题所在，并且显然找到了解决方案。据我所知，上面显示的映射是正确的（至少，应用程序可以正常工作）。唯一的问题是在数据库中，其中有一个用于插入序列的触发器。这样，每次我尝试插入员工（及其地址）时，Hibernate 都会给我两个正确设置的序列号（一个用于父级，另一个用于子级）。然而，在提交的准确时刻，Oracle 又给了我两个序列号，这一次设置不正确，我的意思是，外键与父主键不匹配。

但是因为我需要触发器，所以我必须再做一步：我必须修改这些触发器，以便它们检查`:new.ID`值是否`NULL`存在。如果是，则意味着触发器已从 Hibernate 外部（即另一个应用程序）触发，因此我从序列中获取 nextval，否则我保留来自 Hibernate 的值。

# ios - 从foursquare发帖到facebook群组的方式？

> ID：15332932
> 
> 赞同：0
> 
> 时间：2013-03-11T07:02:36.917
> 
> 标签：ios, foursquare, facebook-social-plugins

无论是以编程方式，还是“开箱即用”（我没有看到），有​​没有办法让来自foursquare的帖子直接进入Facebook群组（假设我拥有该群组）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T16:55:12.517

目前，Foursquare 提供的唯一[广播选项](https://developer.foursquare.com/docs/checkins/add)是用户的 Facebook 或 Twitter 帐户，而不是 Facebook 用户拥有的群组。

# c# - 如何在列表中添加新项目时通过 ItemAdded 事件接收器编码添加 wiki 页面？

> ID：15332933
> 
> 赞同：-2
> 
> 时间：2013-03-11T07:02:42.753
> 
> 标签：c#, visual-studio-2010, sharepoint, sharepoint-2010

我有一个名为“List1”的列表，其中有“title”和“WikiLink”列。我想使用 ItemAdded 事件接收器代码添加一个关于添加新项目的 wiki 页面，并更新“WikiLink”列上的链接。请帮我解决这个问题。我已经坚持了很长一段时间。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T07:31:40.607

要创建 wiki 页面，您必须将新项目添加到接受 wiki 页面的库之一。通常它是`Site Pages`，代码更不像这样：

```
var l = (SPDocumentLibrary) SPContext.Current.Web.Lists["Site Pages"];
var folder = l.RootFolder;
var f = folder.Files.Add(string.Format("{0}/{1}", folder.ServerRelativeUrl.TrimEnd("/"), "MyWiki.aspx"), SPTemplateFileType.StandardPage);

//Site Absolute url + Site-relative Url, more info on MSDN.
var url = string.Format("{0}/{1}", SPContext.Current.Site.Url.TrimEnd("/"), f.Url); 
```

# asp.net - 如何从基本母版页访问内容页中的网格控件？

> ID：15332943
> 
> 赞同：0
> 
> 时间：2013-03-11T07:03:16.733
> 
> 标签：asp.net, master-pages

我们有 3 个级别的母版页继承：

基本母版页 -> 母版页 1 -> 母版页 2。

母版页 2 有内容页。该内容页面包含网格控件。

如何从基本母版页访问内容页面中的网格控件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T07:07:18.990

每个控件都有`Controls`集合和`FindControl`方法。鉴于控件在页面上，您可以使用任何 Master Page 的 Page 属性，即

```
 this.Page.FindControl("MyGrid") 
```

在您命名的任何母版页的代码隐藏中。

更新：如果控件是动态添加的，您仍然可以设置此类控件的 ID 属性，因此使用 FindControl 仍然可以工作。

同样正如我之前所说，您可以递归地遍历控件。我相信[这个](https://stackoverflow.com/questions/2594314/using-linq-how-do-you-get-all-label-controls/2594334#2594334)问题的答案会给你一个想法。

[这是msdn](http://msdn.microsoft.com/en-us/library/system.web.ui.control.page.aspx)上此方法的链接 链接到[msdn](http://msdn.microsoft.com/en-us/library/486wc64h.aspx) 上的页面属性描述

# c# - 在多线程应用程序中启用控制台输出的禁用选项

> ID：15332946
> 
> 赞同：0
> 
> 时间：2013-03-11T07:03:46.400
> 
> 标签：c#, console-application, server-application

你好我正在开发一个多线程的服务器应用程序，它有一个控制面板表单和一个用于输出的控制台。我正在通过控制台输出使用日志。对于启用日志，我编译带有日志的版本，对于禁用日志，我编译不带日志的版本。这是处理的，因为我使用的所有代码都在行之间。

```
#if Enable_DEBUG_ECHO
Console.WriteLine("Something is happening");
#endif 
```

所以我如果`#define Enable_DEBUG_ECHO`在文件顶部使用它会为 echo 编译。但我想实现一个选项，用户可以通过单击或类似的方式启用/禁用日志。有人给我一个想法，我该怎么做。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T07:14:19.437

您知道，当您使用预编译选项（例如您的代码）时，该程序仅包含代码的一个“版本”代码（我的意思是，如果您定义 Enable_DEBUG_ECHO，行 'Console.WriteLine("Something istaking"); ' 将包含在结果 dll 中，但如果您未定义 Enable_DEBUG_ECHO，它将不包含在内）。

所以如果你想在运行时启用/禁用你的日志，你应该在没有预编译选项的情况下创建你的日志。

因此，您需要将“打开/关闭”变量保存在配置文件中。然后

```
if (VARIABLE_FROM_CONFIG)
{
Console.WriteLine("Something is happening");
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T07:10:08.237

您可以使用诸如[NLog](http://nlog-project.org/)或[log4net](http://sourceforge.net/projects/log4net/)之类的日志框架，这使这一切变得如此简单。您可以通过编程方式或通过配置文件配置它们。

# sql - SQL nesting queries

> ID：15332950
> 
> 赞同：3
> 
> 时间：2013-03-11T07:04:07.213
> 
> 标签：sql, sql-server-2005

I wish to write two nested queries of create and select statements. My motive is to create a new table which includes columns and entries from two other tables. I wrote a query but it is giving me an error.

```
create table table_3(select * from table_1,table_2) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T07:08:02.893

For SQL Server you can use:

```
SELECT * 
INTO table_3
FROM table_1, table_2 
```

If you want to join the two tables based on some key then:

```
SELECT * 
INTO table_3
FROM table_1 JOIN table_2 on table_1.ID = table_2.FKID 
```

You may see: [SQL SERVER – CTAS – Create Table As SELECT – What is CTAS?](http://blog.sqlauthority.com/2011/04/30/sql-server-ctas-create-table-as-select-what-is-ctas/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T07:17:38.980

This can be used to create another table of same type

```
CREATE TABLE new_table
  AS (SELECT * FROM old_table); 
```

# oracle - 恢复已删除的记录

> ID：15332951
> 
> 赞同：3
> 
> 时间：2013-03-11T07:04:15.047
> 
> 标签：oracle, oracle11g, data-recovery

我已经意外删除了表中的一些行并且也进行了提交。现在我想恢复它们。

我使用的数据库是 Oracle 11g R2。

我使用以下查询来获取已删除的记录：

```
SELECT * FROM MY_TABLE AS OF TIMESTAMP ('13-MAR-11 8:50:58','DD-MON-YY HH24: MI: SS') 
```

但是在执行时它给出了一个错误说：

```
Error at Command Line:3 Column:75
Error report:
SQL Error: ORA-00907: missing right parenthesis
00907\. 00000 -  "missing right parenthesis"
*Cause:    
*Action: 
```

但我无法解决这个查询中的问题。

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-11T07:12:20.000

这需要一个实际的时间戳（或日期），您正在传递一对值。

尝试：

```
SELECT * FROM MY_TABLE
AS OF TIMESTAMP TO_DATE('13-MAR-11 08:50:58','DD-MON-YY HH24:MI:SS') 
```

（您的时间格式说明符也不正确，并且与您的日期字符串不匹配。）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-02-21T13:43:43.710

例如 ：

```
 SELECT * FROM EMP AS OF TIMESTAMP 
   TO_TIMESTAMP('2005-04-04 09:30:00', 'YYYY-MM-DD HH:MI:SS')
   WHERE name = 'JOHN'; 
```

但闪回查询可能会因 ORA-1555 失败，其他选项：

**日志矿工**

如果启用了 Oracle 补充日志，您可以为您的删除语句获取 undo sql

```
-- switch again logfile to get a minimal redo activity alter system switch logfile;

-- mine the last written archived log 
exec dbms_logmnr.add_logfile('archivelog/redologfile', options =>dbms_logmnr.new); 
exec dbms_logmnr.start_logmnr(options => dbms_logmnr.dict_from_online_catalog); 
select operation, sql_redo from v$logmnr_contents where seg_name = 'EMP'; 
```

**甲骨文 PRM-DUL**

PRM-DUL 将是最后的选择。即使 Oracle 块中已删除的行块始终只是用已删除掩码标记行标志，该行块仍然可以通过扫描 Oracle 数据块来读取。PRM-DUL 可以扫描整个表，找出标记为已删除的每条记录/行并写入平面文件。

# git - 什么更好？删除文件并使用 git add -u 或 git rm

> ID：15332959
> 
> 赞同：1
> 
> 时间：2013-03-11T07:05:12.843
> 
> 标签：git, github, repository

我知道有两种方法可以从 git repo 中删除文件。一种是手动删除文件，然后用于`git add -u`暂存这些文件。其他是使用`git rm`命令。什么时候用哪个？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-11T07:31:09.123

如果文件仍在工作树中，我更喜欢[`git rm`](http://git-scm.com/docs/git-rm)默认情况下会从索引和工作树中删除我想要的文件。

但是如果文件已经通过外部操作从索引中删除，那么[`git add -u`](http://git-scm.com/docs/git-add)是一个更实际的选择。

请注意，这两个命令都支持`-n`or选项：在实际从索引中删除任何内容*之前*`--dry-run`检查这些命令会做什么总是有用的。

 ** * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-11T07:12:26.637

就 git 而言，这两种方法是等价的。只需使用更适合*您的*工作流程的那个。*

# android - 向下或向上滚动列表视图时编辑文本值变为空

> ID：15332964
> 
> 赞同：0
> 
> 时间：2013-03-11T07:05:59.117
> 
> 标签：android, android-listview

我的列表视图有问题。在edittext中输入文本时，edittext（我正在输入的内容）的焦点转到列表视图中的另一个edittext。同样，当我向下滚动列表视图时，最顶部的edittext 的值会下降到屏幕中可见的最后一个edittext。帮我解决这个问题。

我的 single_row.xml 代码：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="wrap_content"
android:background="#ffffff" >

<TextView
    android:id="@+id/textViewSingleRowAddEditCategory"
    android:layout_width="250dp"
    android:layout_marginTop="10dp"
    android:layout_height="wrap_content"
    style="@style/font_color_and_type"
    android:layout_alignParentTop="true"
    android:layout_centerHorizontal="true"
    android:text="TextView" />

<EditText
    android:id="@+id/editTextSingleRowAddEditCategory"
    android:layout_width="250dp"
    android:layout_height="40dp"
    android:layout_below="@+id/textViewSingleRowAddEditCategory"
    android:layout_centerHorizontal="true" >
</EditText>

<ImageView
    android:id="@+id/imageViewAddEditCategoryEraseData"
    android:layout_width="35dp"
    android:layout_height="35dp"
    android:layout_alignTop="@+id/editTextSingleRowAddEditCategory"
    android:layout_toRightOf="@+id/editTextSingleRowAddEditCategory"
    android:src="@drawable/delete4" />

</RelativeLayout> 
```

我的 main_layout.xml 代码是：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:background="#ffffff"
tools:context=".AddEditCategory" >

<RelativeLayout
    android:id="@+id/relativeLayoutAddEditCategoryTopBar"
    android:layout_width="match_parent"
    android:layout_height="50dp"
    android:layout_alignParentLeft="true"
    android:layout_alignParentTop="true" >

    <TextView
        android:id="@+id/textViewAddEditScreenTitle"
        android:text="Screen Title"
        style="@style/screen_title"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content" />

    <ImageView
        android:id="@+id/imageViewAddEditCategoryDelete"
        android:layout_width="22dp"
        android:layout_height="22dp"
        android:layout_alignParentRight="true"
        android:layout_centerVertical="true"
        android:layout_marginRight="24dp"
        android:src="@drawable/set_delete" />

</RelativeLayout>

<View
    android:id="@+id/view5"
    android:layout_width="match_parent"
    android:layout_height="5dp"
    android:layout_below="@+id/relativeLayoutAddEditCategoryTopBar"
    android:background="@drawable/shadow" />

<ListView
    android:id="@+id/listViewAddEditCategory"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:layout_below="@+id/view5"
    android:divider="@android:color/transparent"
    android:dividerHeight="1dp" >
</ListView>

<Button
    android:id="@+id/buttonAddEditCategorySave"
    android:layout_width="250dp"
    android:layout_height="40dp"
    android:layout_alignParentBottom="true"
    android:layout_centerHorizontal="true"
    android:text="Save" />

</RelativeLayout> 
```

Main_activity.java 的代码如下：

```
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_add_edit_category);

    this.setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_PORTRAIT);

    Intent intent = getIntent();
    final String operation = intent.getStringExtra("operation");

    tv_screen_title = (TextView) findViewById(R.id.textViewAddEditScreenTitle);
    tv_screen_title.setText(operation);

    iv_delete = (ImageView) findViewById(R.id.imageViewAddEditCategoryDelete);

    al_items_from_editText = new ArrayList<String>();

    btn_save = (Button) findViewById(R.id.buttonAddEditCategorySave);
    btn_save.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View v) {
            if (operation.equals("Add Category")) {
                loadDatabase();

                View view1 = listview_add_edit_category.getChildAt(0);
                EditText et = (EditText) view1
                        .findViewById(R.id.editTextSingleRowAddEditCategory);
                String category_name = et.getText() + "";
                Log.i("category_name", category_name);

                for (int i = 1; i < listview_add_edit_category
                        .getChildCount(); i++) {
                    View view = listview_add_edit_category.getChildAt(i);
                    EditText editText = (EditText) view
                            .findViewById(R.id.editTextSingleRowAddEditCategory);
                    al_items_from_editText.add(editText.getText()+"");
                    Log.i(i+"", editText.getText()+"");
            }
        }
    });

    listview_add_edit_category = (ListView) findViewById(R.id.listViewAddEditCategory);

    if (operation.equals("Add Category")) {
        iv_delete.setVisibility(View.GONE);
        manageAddCategoryList();
        mPLAdapter = new PlacesListAdapter(AddEditCategory.this,
                mPlacesData1, mPlacesData2);
        listview_add_edit_category.setAdapter(mPLAdapter);
    }
}

private void manageAddCategoryList() {

    mPlacesData1.clear();
    mPlacesData2.clear();

    mPlacesData1.add("Category Name");
    mPlacesData2.add("Name");
    mPlacesData1.add("# Field 1");
    mPlacesData2.add("Field 1");
    mPlacesData1.add("# Field 2");
    mPlacesData2.add("Field 2");
    mPlacesData1.add("# Field 3");
    mPlacesData2.add("Field 3");
    mPlacesData1.add("# Field 4");
    mPlacesData2.add("Field 4");
    mPlacesData1.add("# Field 5");
    mPlacesData2.add("Field 5");
    mPlacesData1.add("# Field 6");
    mPlacesData2.add("Field 6");
    mPlacesData1.add("# Field 7");
    mPlacesData2.add("Field 7");
    mPlacesData1.add("# Field 8");
    mPlacesData2.add("Field 8");
    mPlacesData1.add("# Field 9");
    mPlacesData2.add("Field 9");
    mPlacesData1.add("# Field 10");
    mPlacesData2.add("Field 10");
}

private void loadDatabase() {
    database = openOrCreateDatabase(database_name,
            SQLiteDatabase.OPEN_READWRITE, null);
}

@Override
public boolean onKeyDown(int keyCode, KeyEvent event) {
    if (keyCode == KeyEvent.KEYCODE_BACK && event.getRepeatCount() == 0) {
        finish();
        startActivity(new Intent(AddEditCategory.this,
                CategoryManagement.class));
        return true;
    }
    return super.onKeyDown(keyCode, event);
} 
```

这是 PlaceListAdapter.java 代码：

```
package com.walletapp;

import java.util.ArrayList;

import android.content.Context;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.widget.BaseAdapter;
import android.widget.EditText;
import android.widget.ImageView;
import android.widget.TextView;

public class PlacesListAdapter extends BaseAdapter {
// private Context mContext;
private LayoutInflater mInflater;
private ArrayList<String> al_caption = new ArrayList<String>();
private ArrayList<String> al_hint = new ArrayList<String>();

public PlacesListAdapter(Context c, ArrayList<String> al_caption,
        ArrayList<String> al_hint) {
    mInflater = LayoutInflater.from(c);
    // mContext = c;
    this.al_caption = al_caption;
    this.al_hint = al_hint;
}

public int getCount() {
    return al_caption.size();
}

public Object getItem(int position) {
    return al_caption.get(position);
}

public long getItemId(int position) {
    return position;
}

public View getView(final int position, View convertView, ViewGroup parent) {
    final ViewHolder holder;
    if (convertView == null) {
        convertView = mInflater.inflate(
                R.layout.single_row_add_edit_category, null);
        holder = new ViewHolder();

        holder.tv_caption = (TextView) convertView
                .findViewById(R.id.textViewSingleRowAddEditCategory);
        holder.et_value = (EditText) convertView
                .findViewById(R.id.editTextSingleRowAddEditCategory);
        holder.erase_data = (ImageView) convertView
                .findViewById(R.id.imageViewAddEditCategoryEraseData);

        convertView.setTag(holder);
    } else {
        holder = (ViewHolder) convertView.getTag();
    }

    holder.tv_caption.setText(al_caption.get(position));
    holder.et_value.setHint(al_hint.get(position));
    holder.erase_data.setVisibility(View.GONE);

    return convertView;
}

static class ViewHolder {
    TextView tv_caption;
    EditText et_value;
    ImageView erase_data;
}
} 
```

请任何人帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T07:09:22.500

> `holder.et_value.setHint(al_hint.get(position));`

将再次设置提示，这将导致文本丢失。

将此行移入 if block 。

喜欢

```
>  if (convertView == null) {
>         convertView = mInflater.inflate(
>                 R.layout.single_row_add_edit_category, null);
>         holder = new ViewHolder();
> 
>         holder.tv_caption = (TextView) convertView
>                 .findViewById(R.id.textViewSingleRowAddEditCategory);
>         holder.et_value = (EditText) convertView
>                 .findViewById(R.id.editTextSingleRowAddEditCategory);
>         holder.erase_data = (ImageView) convertView
>                 .findViewById(R.id.imageViewAddEditCategoryEraseData);
>         holder.et_value.setHint(al_hint.get(position));
> 
>         convertView.setTag(holder);
> 
>     } else {
>         holder = (ViewHolder) convertView.getTag();
>     }
> 
>     holder.tv_caption.setText(al_caption.get(position)) 
```

# ios - 将数据从一个标签栏视图控制器传递到另一个标签栏视图控制器

> ID：15332969
> 
> 赞同：1
> 
> 时间：2013-03-11T07:06:22.907
> 
> 标签：ios, uitabbarcontroller

我有两个标签栏项目歌曲，标签栏控制器上的播放器。我想要做的是，当我在歌曲视图控制器中选择一首歌曲时，必须选择播放器标签栏，并且必须将歌曲传递给播放器标签栏视图控制器并播放。如何做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T07:39:50.987

在您的课程中尝试此代码，并在另一个选项卡中创建此设置字符串方法。

```
 ViewController *viewController=[[ViewController alloc]initWithNibName:@"ViewController" bundle:nil];
//Pass the string to next viewcontroller
[viewController setString:albumURLstring]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T07:24:07.070

您需要在推送视图控制器之前设置 url。试试下面的代码，它现在应该可以工作了。

```
 if(!viewContObj) viewContObj=[[ViewController alloc]initWithNibName:@"ViewController" bundle:nil]; 
viewContObj.url =[NSURL URLWithString:albumURLstring];
[self.navigationController pushViewController:viewContObj animated:YES]; 
 [viewContObj playLiveStream:nil]; 
```

# c#-4.0 - 了解 ANTS profiler 生成的图形

> ID：15332975
> 
> 赞同：0
> 
> 时间：2013-03-11T07:06:37.027
> 
> 标签：c#-4.0, redgate, red-gate-ants

我正在使用 ANTS 分析器在我的应用程序中分析内存使用情况，它表明 Excell 单元对象在第 2 代中占用了大量内存。应用程序正在使用 EPPlus 库生成 excel 文件。

我附上了该工具生成的一些图表。**我不确定如何进一步钻探以找出哪个对象正在持有引用并占用内存。请就如何进一步深入图表提供您的建议。**

![总结图](../Images/07696061267685741c427679ebe307be.png)

![实例图_1](../Images/e9c7094cf1e0b152fa53d6bae0adcae8.png)

![实例图_2](../Images/a028167e76f3913cb3cc6186b52f58ba.png)

![在此处输入图像描述](../Images/47da1f7b0ae2912f950b1c9f2999d27c.png)

问题是：该图再次指向同一对象。我想我没有正确使用这个工具。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T13:32:33.537

查看您拍摄的两个快照（来自摘要屏幕），我缺少每个快照的工作流上下文，因此我将做出一些假设：

快照 1：在您创建 Excel 文件之前。快照 2：在您创建 Excel 文件并且您认为此操作已完成之后。

首先，我建议您稍微调整一下您的工作流程并进行以下快照。

快照 1：在创建 Excel 文件之前拍摄。

快照 2/3：取决于应用程序工作流程；如果您创建数据（可以查看它等），则在此数据之后创建一个文件，然后在数据生成后拍摄快照，然后在文件创建后拍摄另一个快照。

最终快照：拍摄一个最终快照 - 这是一种很好的做法，可以在完成工作流程后更好地了解内存中的内容，因为它允许清除终结器队列。

这里不会有答案，因为从几个屏幕截图中很难做到这一点 - 只是建议 - 我不了解您的应用程序，并且对您所需的内存使用情况做出假设，例如缓存数据等。

(a) 使用 Instance Categorizo​​r 视图并选择 Categorized References，您需要从顶部（仅）参考链开始并从右到左工作。再次做出假设（简单化的假设）超越作为 Excel 库一部分的节点，并查看引用它的类。在这一点上，这将给您足够的在代码 (b) 中查找该引用或深入探索 (c) 的起点。(a) 如果你认为这个参考链（从右到左的路径）不值得追求，那么向下移动到下一个。使用 Instance Categorizo​​r 视图，您可以使用 Right-Left、Top-Botton。

(b) 如果您有源代码，您可以右键单击一个节点并浏览到 Visual Studio 中的类。或者自己去那里:>

(c) 通过从 (a) 更深入地探索参考链，我的意思是使用链接“显示此路径上的实例”，然后根据显示的指标（大小、距 GC 根的距离）做出判断，选择一个类的实例来探索更多细节。这将带您进入实例保留图，该图更详细地显示了该实例的参考链。注意这里的工具提示，颜色区域和节点类型都意味着不同的东西。请参阅下面的链接。

我认为从这个答案中可以清楚地看出，您可能会从查看 AMP 文档中受益，因为有很多东西要学习，而且我只和您一起对应用程序进行了非常高级的操作，并且我已经做了很多（远很多) 假设。

请参阅链接以获得一些帮助：

[类视图过滤器](http://www.red-gate.com/supportcenter/Content?p=ANTS%20Memory%20Profiler&c=ANTS_Memory_Profiler/help/7.0/amp_filtering_overview.htm&toc=ANTS_Memory_Profiler/help/7.0/toc1286240.htm)

[实例分类器](http://www.red-gate.com/supportcenter/Content?p=ANTS%20Memory%20Profiler&c=ANTS_Memory_Profiler/help/7.0/amp_3_categorizer.htm&toc=ANTS_Memory_Profiler/help/7.0/toc1286233.htm)

[实例保留图](http://www.red-gate.com/supportcenter/Content?p=ANTS%20Memory%20Profiler&c=ANTS_Memory_Profiler/help/7.0/amp_5_retention.htm&toc=ANTS_Memory_Profiler/help/7.0/toc1286233.htm)

[大对象堆碎片提示](http://www.red-gate.com/supportcenter/Content?p=ANTS%20Memory%20Profiler&c=ANTS_Memory_Profiler/help/7.0/amp_loh_frag.htm&toc=ANTS_Memory_Profiler/help/7.0/toc1286225.htm)<- 正如其他海报所指出的那样。

[Red Gate 的内存分析器学习门户](http://www.red-gate.com/products/dotnet-development/ants-memory-profiler/video/)<- 可以查看视频和技术论文部分

我希望这能让你开始。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T12:45:38.940

首先，作为开发人员，只有您知道这些 Excell 对象是否应该在内存中（例如，外部观察者如何知道这些对象是否是缓存对象）？您可以提供有关是否已在这些对象上调用 Dispose 的信息。

其次，您是否看到它在哪里给了您大对象 hap 碎片的警告？我会先调查一下。

# perl - 在 Perl 子例程中使用 @_ 时得到错误的参数值

> ID：15332978
> 
> 赞同：3
> 
> 时间：2013-03-11T07:06:45.820
> 
> 标签：perl, arguments, subroutine

我在使用 @_ 将单个参数传递给 Perl 子例程时遇到了一个奇怪的错误。传递给子程序的值在进入子程序后立即改变。

代码示例：

```
my $my_def = 0;
print "my_def = $my_def \n";
@someResult = doSomething($my_def);

sub doSomething {
    my $def = @_;
    print "def = $def \n";
    ...
} 
```

这返回：

```
> my_def = 0
> def = 1  # instead of "0" 
```

一件更奇怪的事情是代码在几个月前就可以正常工作。

当我将其更改为：

```
sub doSomething {
    my $def = $_[0]; 
```

谁能告诉可能导致问题的原因？使用 @_ 传递单个参数是否有任何限制？

谢谢！

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-11T07:12:40.560

你得到了正确的行为，尽管它不是你所期望的。

从子例程的参数中获取局部变量的简单经验法则是始终在`my (...)`声明中的变量列表周围使用括号：

```
sub do_something
{
    my ($def) = @_;
    ...
} 
```

区别在于列表上下文和标量上下文。在标量上下文中，所有数组都返回数组中元素的数量：在您的情况下为 1。当您编写时，`my $def = @_`您提供了标量上下文。当您`my $def = $_[0]`改为使用时，您显式访问了数组的元素零，这是一个标量（因此是`$`印记），所以它再次起作用。

在一般情况下，您可能有：

```
sub do_something_else
{
    my ($arg1, $arg2, $arg3, @the_rest) = @_;
    ...
} 
```

现在您有了三个标量局部变量 、`$arg1`和`$arg2`，`$arg3`以及一个数组，`@the_rest`用于收集传递的任何额外参数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T07:15:35.740

答案很简单，当分配给标量值的数组返回数组中的元素数时

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-11T07:25:01.023

这都是关于上下文的。这是一个例子：

```
@data = (0, 1, 2);

$count = @data;        # imply in scalar context
### $count: 3

$count = scalar @data; # same as above, but force scalar context
### $count: 3

$first = $data[0];     # both sides are in scalar context
### $first: 0

($first) = @data;      # both sides are in list context   
### $first: 0

$first = shift @data;  # get the first, but @data was modified
### $first: 0
### @data: (1, 2)

($second, $third) = @data;
### $second: 1
### $third: 2 
```

# ios - 如何将解析json字符串数据存储到phonegap ios中的本地文本文件中？

> ID：15332979
> 
> 赞同：0
> 
> 时间：2013-03-11T07:06:50.690
> 
> 标签：ios, json, cordova

如何首先将解析json字符串数据存储到localltext文件中，然后下次从本地文件中获取数据它自己这是我编写的代码

$.getJSON("我的规则",函数(数据)

上面的行正在解析 json url，我需要将该数据存储到本地文本文件中，然后用户第二次从本地文本文件中读取数据，而不是 json url？

请给出一些想法或建议或一些链接来解决这个问题

我在ipohne做了这个问题

感谢和问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T10:31:54.430

您可以在 Phonegap ( [http://docs.phonegap.com/en/2.5.0/cordova_file_file.md.html#FileWriter](http://docs.phonegap.com/en/2.5.0/cordova_file_file.md.html#FileWriter) )中使用 FileWriter 写入数据

问候，

# android - 从 Android 上的外部应用程序更新 SQLite

> ID：15332980
> 
> 赞同：-2
> 
> 时间：2013-03-11T07:06:51.347
> 
> 标签：android, sqlite

*如果已经回答了这个问题，请将我重定向到正确的帖子。*

这是问题所在：

我有 2 个正在开发中的 android 应用程序。我有一个要求，其中一个应用程序（应用程序 A）将更新 SQLite DB> 表“A”中的某个字段，而另一个应用程序（应用程序 B）必须读取此条目。数据库将通过 App B 而不是 App A 创建和维护。

这可能吗？如果是这样，怎么做？

如果需要更多信息，请告诉我。

提前致谢

内存

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T07:29:04.800

如果您希望您的应用程序数据在所有其他应用程序之间共享，那么最好选择内容提供商而不是使用 sqlite。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T07:11:27.433

如果您共享应用程序的用户 ID，您将能够在两个应用程序中使用相同的数据库：[sharedUserId](http://developer.android.com/reference/android/R.attr.html#sharedUserId)

# winapi - 如何使 COM DoDragAndDrop API 在 Windows 7/8 上具有触控功能？

> ID：15332983
> 
> 赞同：1
> 
> 时间：2013-03-11T07:07:05.467
> 
> 标签：winapi, com, drag-and-drop, touch

在 Windows 上，拖放操作可以通过 COM DoDragAndDrop API 完成，参见[http://msdn.microsoft.com/zh-cn/library/windows/desktop/ms678486%28v=vs.85%29.aspx](http://msdn.microsoft.com/zh-cn/library/windows/desktop/ms678486%28v=vs.85%29.aspx)。它可以完美地进行D&D操作，具有最佳的系统集成度。

最近，我发现它不是触摸友好的 API，它不能很好地处理触摸事件。在 Window 7/8 上，由 CreateWindow API 创建的 Win32 窗口也能够以与处理鼠标事件相同的方式处理触摸事件。Actullay，似乎将触摸事件转换为类似的鼠标事件，例如当手指按下时触发鼠标按下事件，当手指移动时触发鼠标移动事件。

但是，DoDragAndDrop COM API 不会将触摸事件转换为鼠标事件，甚至 COM 服务根本不知道触摸事件。但是我尝试将文件从一个文件夹拖到 Win8 上的另一个文件夹，它可以工作。如果 D&D 操作也是基于 COM API 实现的，我确实得到了一个矛盾的结果。

当我使用 DoDragAndDrop 支持触摸事件时，我错过了什么吗？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T18:24:02.817

`DoDragDrop()`确实支持 Win7/8 上的触摸（是的，文件的 D&D 是由 Windows Explorer 使用 实现的`DoDragDrop()`），所以你的问题与其他问题有关。您是否检查过是否`DoDragDrop()`将任何错误代码返回到您可能忽略的代码中？

# ios - AVAudioPlayer 声音文件位置未更改/更新

> ID：15332985
> 
> 赞同：1
> 
> 时间：2013-03-11T07:07:08.400
> 
> 标签：ios, objective-c, xcode, avaudioplayer

*这是我的第一个stackoverflow问题，如果我做错了什么，请道歉。

我正在尝试创建一个简单的音板应用程序。我无法让我的 AVAudioPlayer 在 xCode 4.1 (iOS 6.1.2) 上更新要播放的声音文件的位置。我想避免使用多个音频播放器（audioPlayer2、audioPlayer3 等），所以我尝试使用相同的音频播放器，而是更新声音文件所在的位置。我只想一次播放一个声音，所以多个声音显然不是问题。这是我的代码：

```
- (IBAction)play {
 if (audioPlayer.playing == NO) {
    NSURL *url = [NSURL fileURLWithPath:[NSString stringWithFormat:@"%@/k.mp3", [[NSBundle mainBundle] resourcePath]]];
    NSError *error;
    audioPlayer = [[AVAudioPlayer alloc] initWithContentsOfURL:url error:&error];
    audioPlayer.numberOfLoops = 0;

    //I added the next two lines to allow me to play AVAudio with MPiPodPlayer (which I found on this site, too) simultaneously.
    AVAudioSession *audiosession = [AVAudioSession sharedInstance];
    [audiosession setCategory:AVAudioSessionCategoryAmbient error:nil];

    [audioPlayer play];
    [start setTitle:@"Stop" forState:UIControlStateNormal];
}
 else
     if (audioPlayer.playing == YES) {
         [audioPlayer stop];
     [start setTitle:@"Start" forState:UIControlStateNormal];
    }
    }

- (IBAction)play2 {
if (audioPlayer.playing == NO) {
    NSURL *url = [NSURL fileURLWithPath:[NSString stringWithFormat:@"%@/chicken.mp3", [[NSBundle mainBundle] resourcePath]]];
    NSError *error;
    audioPlayer = [[AVAudioPlayer alloc] initWithContentsOfURL:url error:&error];
    audioPlayer.numberOfLoops = 0;

    AVAudioSession *audiosession = [AVAudioSession sharedInstance];
    [audiosession setCategory:AVAudioSessionCategoryAmbient error:nil];

    [audioPlayer play];
    [start2 setTitle:@"Stop" forState:UIControlStateNormal];
    clicked = 1;
    clicked2 = 0;
} else
    if (audioPlayer.playing == YES) {
        [audioPlayer stop];
        [start2 setTitle:@"Start" forState:UIControlStateNormal];
        clicked = 0;
    }
} 
```

我的 IBActions 链接到 UIButtons 并且“开始”是 UIButton 引用。每当我单击“开始”时，它都会播放“k.mp3”，但是如果我在开始播放“k.mp3”文件而不是鸡肉文件之后单击“start2”。我首先点击的按钮是 url 设置的。这是我的第一个 iPhone OS 应用程序项目，所以我意识到其中可能存在一些令人尴尬的编码错误（请随时纠正我）。我想要一个适用于多个按钮的答案，即使是大约 30 个按钮，所以我不必为每个按钮复制和粘贴停止音频播放器 1、2 和 3。

总结一下：我有多个按钮，每个按钮播放一种声音，我希望一次播放的声音不超过一种；当我单击一个按钮时，它会播放 1 种声音，并且所有其他音频播放器都会停止。为了简单起见，我宁愿只有一个 AVAudioPlayer 实例。提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T07:19:37.260

检查应用程序控制是否进入`- (IBAction)play2`

如果控制进入其中但仍然无法正常工作，那么您可以`[audioPlayer release]`先尝试

```
audioPlayer = [[AVAudioPlayer alloc] initWithContentsOfURL:url error:&error]; 
```

这可能对你有用

# wordpress - WP Snap插件中的错误

> ID：15332986
> 
> 赞同：0
> 
> 时间：2013-03-11T07:07:12.140
> 
> 标签：wordpress

此插件显示以下错误：“警告：preg_match() [function.preg-match]：编译失败：在偏移量 4 处的字符类缺少终止]”我试图通过在第四个偏移量处添加 \ 来解决它，错误已删除但现在插件无法正常工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T08:06:56.670

完整的错误信息是什么？错误末尾应该有一个特定的 php 文件。

您的永久链接结构可能存在错误，或者您添加了某种类型的永久链接插件。或者您可能会收到该错误，因为您的博客没有内容。这也可能意味着您使用的是旧版本的插件。同样，如果没有完整的错误消息，很难说是什么 php 文件导致了问题。但是你可以尝试改变这个：

```
Code: Select all
if (preg_match("/$bad/i", strtolower($comments))){$allow = false;} 
```

对此：

```
Code: Select all
if (@preg_match("/$bad/i", strtolower($comments))){$allow = false;} 
```

# android - setonlongclicklistener 同时用于多个按钮

> ID：15332991
> 
> 赞同：1
> 
> 时间：2013-03-11T07:07:31.490
> 
> 标签：android, onlongclicklistener, long-click

我希望 button1,2,3 响应长按，用户将被提示输入文本的按钮。在 onCreate 里面我写道：

```
Button botonEditable;
Context context;
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    ...
    context = MainActivity.this;
    Resources r = getResources();
    String pName = getPackageName();

    for (int i=1;i<4;i++){
    botonEditable = (Button) findViewById(r.getIdentifier("button" + i, "id", pName));
    botonEditable.setOnLongClickListener(new View.OnLongClickListener() {
        public boolean onLongClick(View v) {
            final AlertDialog.Builder alert = new AlertDialog.Builder(context);
            alert.setMessage("Nueva Categoria:");
            final EditText input = new EditText(context);
            alert.setView(input);
            alert.setPositiveButton("Ok", new DialogInterface.OnClickListener() {
                public void onClick(DialogInterface dialog, int whichButton  ) {
                    // Do something with value!
                    String newCateg = input.getText().toString();
                    botonEditable.setText(newCateg);
                }
            });

            alert.setNegativeButton("Cancel", new DialogInterface.OnClickListener() {
                public void onClick(DialogInterface dialog, int whichButton) {
                    // Canceled.
                }
            });        
            alert.show();                   
            return true;
        }
    });
    }
 } 
```

测试时，这 3 个按钮会相应响应以显示警告消息，但是当我输入文本并单击确定时，文本仅在 button3 中更改，无论长按哪个按钮:( 出了什么问题以及如何修复它一个简单的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T07:17:26.503

试试这个

```
button.setOnLongClickListener(new longClcik());

class longClcik implements OnLongClickListener {

    public boolean onLongClick(View v) {
        return false;

    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T07:17:34.127

试试这个..替换以下代码

```
 public void onClick(DialogInterface dialog, int whichButton  ) {
                    // Do something with value!
                    String newCateg = input.getText().toString();
                    botonEditable.setText(newCateg);
                } 
```

和

```
 public void onClick(DialogInterface dialog, int whichButton  ) {
                    // Do something with value!
                    String newCateg = input.getText().toString();
                    ((Button)v).setText(newCateg);
                } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-11T07:18:42.270

您应该使用`View`传递给`OnLongClickListener`. 这将为您提供当前单击的视图并更新其值，因此请改为执行此操作

```
botonEditable.setOnLongClickListener(new View.OnLongClickListener() {
    public boolean onLongClick(View v) {
        final AlertDialog.Builder alert = new AlertDialog.Builder(context);
        alert.setMessage("Nueva Categoria:");
        final EditText input = new EditText(context);
        alert.setView(input);
        alert.setPositiveButton("Ok", new DialogInterface.OnClickListener() {
            public void onClick(DialogInterface dialog, int whichButton  ) {
                // Do something with value!
                String newCateg = input.getText().toString();
                ((Button)v).setText(newCateg); //<-- see the botonEditable changed to v
            }
        });

        alert.setNegativeButton("Cancel", new DialogInterface.OnClickListener() {
            public void onClick(DialogInterface dialog, int whichButton) {
                // Canceled.
            }
        });        
        alert.show();                   
        return true;
    }
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-12T03:48:09.223

我找到了解决方案，在我的代码中我只是替换了该行

```
public boolean onLongClick(View v) {.... 
```

通过这个

```
public boolean onLongClick(final View v) {.... 
```

加上你的建议：

```
((Button)v).setText(newCateg.toUpperCase()); 
```

现在，一切都好。谢谢大家，您的帮助使我无法解决问题。
:)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-11-03T20:15:42.150

我这样做：

1.  首先你必须实现你的类 View.OnLongClickListener
2.  第二个覆盖方法 onLongClick

    > @Override
    > public boolean onLongClick(View v) {
    > onCheckboxLongClicked(v);
    > 返回真；
    > }

3.  创建方法 onCheckBoxLongClicked 无效。或者你可以在 onLongClick 里面实现你的 swith

    > switch(view.getId()) {
    > case R.id.cbDigits:
    > Toast.makeText(getActivity(), "Message", Toast.LENGTH_SHORT).show();
    > 休息;
    > .
    > .
    > .
    > }

抱歉，但我仍然不知道如何格式化代码以缩进...

# jquery - 停止更改 edit_in_place 插件中的值？

> ID：15332995
> 
> 赞同：0
> 
> 时间：2013-03-11T07:08:08.820
> 
> 标签：jquery, plugins

我正在使用[edit_in_place 插件](http://www.arashkarimzadeh.com/jquery/7-editable-jquery-plugin.html)。

我也在更新**数据库**中的值。这就是为什么我在编辑值之前使用确认弹出窗口。当用户单击是按钮时，它应该更新，否则它不应该更新。是的，操作效果很好，但是当我单击“**否**”时，数据库中的值没有改变，但在网页上它似乎可见。我怎样才能停止在网页上进行更改。

这是我的**HTML**代码：

```
<?
   $e_c_query = "select * from category order by id desc";
   $e_c_result = mysql_query($e_c_query);
   while($e_c_row = mysql_fetch_object($e_c_result))
   {
 ?>
       <tr class="highlighter">
           <td class="editable-2" id="<?=$e_c_row->id?>" align="center"><div id="<?=$e_c_row->id?>"><?=$e_c_row->category_name?></div></td>

      </tr>
<?
   }
?> 
```

**jQuery**代码：

```
$('.editable-2').editable({onSubmit: submitData});
        function submitData (content) {
            //alert('aa');
            if(content.previous==content.current || content.current == "")
                {

                }
                else{
                    var yes = confirm("Are you sure to Edit");
                    if(yes)
                            {
                            $.get('change_categ.php', {already_categ_val : content.previous, categ_name: content.current },function(data){
                            if(data=='1')
                                {
                                    document.getElementById('manual_msg_div').className='msg-div';
                                    document.getElementById('manual_msg_div').innerHTML="Category Updated Successfullly";
                                    $('#manual_msg_div').append('<br/>');
                                }
                        });
                        }else{

                        }
                }

        } 
```

**PHP**代码

```
<?    $already_categ_val = $_GET['already_categ_val'];
    $categ_name = $_GET['categ_name'];

    mysql_query("update category set category_name='".$categ_name."' where category_name='".$already_categ_val."'") or die(mysql_error());
    //echo "update category set category_name='".$categ_name."' where category_name='".$categ_name."'";
    if(mysql_affected_rows() == 1)
        echo "1";
    else {
        echo "0";
    }
    ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T07:18:37.267

尝试

```
if(yes) {
 //...
}
else {
   this.html(content.previous);
} 
```