# StackOverflow 问答 14740000-14740999

# xslt - 在 XSLT 中转换 GMT 时间本地时间

> ID：14740005
> 
> 赞同：3
> 
> 时间：2013-02-06T22:21:46.447
> 
> 标签：xslt, time, gmt, mdt

如何将 GMT 时间自动转换为本地时间（MDT 或 MST）。

我在下面得到了这个工作，但我需要一个根据日期确定 utc -6 或 utc -7 的条件。

`<xsl:value-of select="xs:dateTime($docdate) + xs:dayTimeDuration('-PT7H')"/>`

谢谢哈里

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T01:15:29.160

您可能会查看函数`adjust-time-to-timezone($arg as xs:time?)`，它将 $arg 中给出的时间调整为动态上下文中给出的隐式时区。没有保证，但在许多实现中，可能是操作系统环境中设置的时区。

例如，如果我评估表达式

```
adjust-time-to-timezone( xs:time('20:45:00.0+01:00')) 
```

我的系统（当前设置为 UTC 以西 7 小时）返回值

```
12:45:00-07:00 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-06T22:24:21.603

您可以使用脚本，例如使用[javascript dates](http://www.hunlock.com/blogs/Javascript_Dates-The_Complete_Reference)的 javascript 。

# android - 什么时候使用哪种方式访问 UI 线程？

> ID：14740010
> 
> 赞同：1
> 
> 时间：2013-02-06T22:22:09.140
> 
> 标签：android, multithreading, user-interface

根据文档，应该使用三个选项之一来从不同的线程访问 UI 线程。这些是选项：

1.  Activity.runOnUiThread（可运行）
2.  View.post（可运行）
3.  View.postDelayed（可运行，长）

我什么时候应该使用哪个？他们似乎都在 UI 线程的消息队列中添加了一个 Runnable。

我认为 postDelayed 仅在您想稍后安排 Runnable 时才真正有用，他们只提到它是因为它还在 UI 线程上运行 Runnable。

对于额外的混乱，还有 AsyncTask。我现在什么时候应该使用它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T22:31:27.483

**runOnUiThread**和**View.post**完全相同，它们都向活动的**Handler**发送一个可运行对象。所以使用任何你喜欢的。

关于**AsynchTask**它不用于在 UI 线程上运行。但是在异步任务完成工作后，它会调用`OnPostExcute`在 UI 线程上调用的方法。

关于这个主题有一个非常棒的教程[Here](http://www.vogella.com/articles/AndroidPerformance/article.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T22:42:00.197

如果您需要一种无需上下文即可返回到随处可用的 UI 线程的机制，您可以使用以下方法：

```
Handler handler = new Handler(Looper.getMainLooper());
handler.post(Runnable); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-06T22:26:38.297

我总是选择 runOnUiThread，我认为这是在同一个 UI 线程上运行某些东西的最佳方式。AsyncTasks 很棘手，这是一个好主意，但如果您想使用新的东西，请使用加载器或 IntentService。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-06T22:35:04.350

忘了`AsyncTask`，它不是在 UI 线程中运行代码，而是在`AsyncTask` **从**UI 线程开始的后台线程中运行代码。

关于其他选项，请随意选择其中任何一个。如果您正在处理一个`View`对象，很可能您已经在 UI 线程上。因此，您最好保留对`Activity`来自其他线程的上下文的引用并调用**runOnUiThread**。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-06T22:36:22.570

我会推荐你​​使用[AsyncTasks ，它们被设计用来在其他线程（](http://developer.android.com/reference/android/os/AsyncTask.html) [doInBackground()](http://developer.android.com/reference/android/os/AsyncTask.html#doInBackground%28Params...%29) ）中进行艰苦的工作，然后与 UI 线程同步以推送工作结果（[onPostExecute()](http://developer.android.com/reference/android/os/AsyncTask.html#onPostExecute%28Result%29)），当然你可以定期更新 UI 与工作进度( [onProgressUpdate()](http://developer.android.com/reference/android/os/AsyncTask.html#onProgressUpdate%28Progress...%29) )。

如果你想在大于 HONEYCOMB 的 Android 版本上同时运行多个 AsyncTask，你可以使用我的小库：[Android-AsyncTask-Executor](https://github.com/artem-zinnatullin/Android-AsyncTask-Executor)

# sql - 索引是否计入 SQL Server Express 上的 10gb 数据库大小限制？

> ID：14740012
> 
> 赞同：9
> 
> 时间：2013-02-06T22:22:11.853
> 
> 标签：sql, tsql, indexing, sql-server-express

我正在开发一个使用 SQL Server Express 数据库的项目，该数据库已经相当大，并且我知道索引特定列/表可能会占用相当多的空间。

我不知道索引使用的空间是否计入数据库的总大小限制。如果有人有任何见解，请告诉我。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-06T22:26:10.993

`relational data`计入限额。这实际上包括索引，但不包括 FILESTREAM 数据。

[可以在 MSDN 上找到完整的限制](http://msdn.microsoft.com/en-us/library/cc645993%28v=SQL.110%29.aspx)列表。这包括关于关系数据的注释。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-07T06:53:52.323

限制实际上是针对数据库的 MDF 文件的大小，所以是的，它将包括您的索引以及其他数据库对象，如 SQLCLR 代码等。从 SQL Server 2008 开始，全文索引也是数据库的一部分，所以他们将计入限制。

Steve 提到的 FILESTREAM 数据类型中存储的数据被排除在外，因为 FILESTREAM 数据存储在单独的文件中，而不是 MDF 文件中。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-01-27T13:44:17.460

我写了一篇关于 SQL Express 中 10GB 大小限制的详细[博](http://blog.ramondeklein.nl/2014/01/27/sql-express-database-size/)文，以及如何尝试将数据库大小保持在限制以下。正如上面答案中的其他人所提到的，索引确实会增加数据库的大小。

查看我的博文和标准 SQL Server 报告（可从 SQL Server Management Studio 获得）以了解索引的大小。如果您使用大量索引，它们可能会很大。

# objective-c - UIAlertview 标题半隐藏 - 目标 c

> ID：14740014
> 
> 赞同：1
> 
> 时间：2013-02-06T22:22:20.487
> 
> 标签：objective-c, uialertview, title

当我单击表格中的一行时，我正在尝试使用以下警报。我确实收到了警报，但标题是半隐藏的。谁能告诉我如何使整个标题可见？

```
uiViewForVoteSelection = [[UIAlertView alloc] initWithTitle:[NSString stringWithFormat:@"Please amend member's selection by selecting one of the options"] message:@"" delegate:self cancelButtonTitle:@"Cancel" otherButtonTitles:@"Yes",@"No" ,@"Abstain",@"Not Selecting",@"Not Present",nil];
[uiViewForVoteSelection show]; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-06T22:42:35.217

问题不是标题，甚至像“请”这样的标题也会被部分隐藏。原因是您添加到警报的按钮数量。如果您想保持警报，您应该提供更大的框架。但我想建议您为这种 UI 使用 actionSheet。

您可以使用以下 UIAlertViewDelegate 方法：

```
- (void)willPresentAlertView:(UIAlertView *)alertView{
    CGRect frame = <your_frame>
    alertView.frame = frame;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T22:38:52.370

因为标题太长了。您应该选择一个短标题并在警报消息中提供该字符串。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-07T09:49:52.520

不幸的是，没有办法完全自定义警报视图。我会建议您坚持使用较小的标题和较少的按钮，更重要的是如果您对 iPhone 使用横向。这么多按钮不适合。按钮的大小和间距是恒定的，因此请尝试使用更少的按钮和更小的标题。

# timeout - dojo AMD 加载程序在页面加载后执行时无法下载依赖项

> ID：14740016
> 
> 赞同：0
> 
> 时间：2013-02-06T22:22:20.473
> 
> 标签：timeout, dependencies, dojo

`require`在页面加载后运行 dojo 1.8 中的函数时，我遇到了一致性问题。

例如，当我动态更新网页上的节点（在本例中为 portlet）时，会以 JSON 格式接收内容，该 JSON 被成功解析并插入网页中。如果它包含任何脚本标签，它们也会成功执行，但是，`require`有时调用该函数时，有 50-60% 的时间无法下载其依赖项并在 dojoloader 中报告超时错误。更奇怪的是，我没有看到加载程序报告为“超时”的依赖项发起的请求。

![在此处输入图像描述](../Images/1193b1342d7c462adfc12596f2320cf1.png)

这只发生在页面加载完成后调用它时，因为页面加载时存在的脚本没有任何此类问题。我还注意到，当我故意使服务器响应变慢（500 毫秒睡眠）时，它永远无法下载依赖项（超时时间约为 5 秒，所以这应该不是问题吧？）

我一直在 Chrome、Firefox 和 IE9 中遇到这个问题（它总是惨遭失败），这让我很生气，因为我无法弄清楚为什么会发生这种情况......

感谢您提供的任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-09T02:50:24.603

由 ASP MVC 在声明式集中生成的脚本标记`dijit/MenuItem`导致了问题。

```
<div data-dojo-type="dijit/MenuItem">
  ...
  <script>
    ...
  </script>
</div> 
```

这两个混在一起不好...

# algorithm - Boggle 板的邻接矩阵

> ID：14740021
> 
> 赞同：0
> 
> 时间：2013-02-06T22:22:41.220
> 
> 标签：algorithm, matrix, graph, depth-first-search, adjacency-matrix

我想为 Boggle 板生成邻接矩阵。Boggle board 是一个在 nxn 矩阵中有字母的地方，如下所示： [http ://www.wordtwist.org/sample.gif](http://www.wordtwist.org/sample.gif)

每个小区都连接到其相邻小区；基本上我们向上/向下/向左/向右/对角线移动以连接到另一个单元格。

如果将每个单元格视为图中的一个顶点，那么我们可以找到 boggle board 的邻接矩阵。

我想出了以下公式来查找相邻的单元格：假设单元格的索引从 0 开始，并且从左到右编号。i = 单元格索引，n = 行数/列数。所以在 3x3 矩阵中，i=0 将是第一个单元格，n 是 3。

```
up = i-n
down = i+n
left = i-1
right = i+1
diagonal 1 = i-(n+1), i+(n+1)
diagonal 2 = i-(n-1), i+(n-1) 
```

上述公式在角落单元格的情况下失败。如何排除极端情况下的无效单元格？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T22:28:57.990

您不必“排除”任何内容，只需检查您的结果以查看它是否在界限内，如果不是，则没有有效的单元格。（即，如果您位于 3x3 矩阵的左上角 (i = 0)，则向上 (i - n) 为 (0 - 3 = -3)。由于 -3 在矩阵的边界之外，因此没有有效细胞。

因此，如果您正在搜索并且想要沿着“向上”相邻单元格移动，请首先检查该位置是否在边界内，如果不是，那么您就在最后。

要检查您是在矩阵的左边缘还是右边缘，请使用：

`if i % (n-1) == 0`// 右边缘

`if i % (n) == 0`// 左边缘

# javascript - 从 Pandora 中提取字符串并用 JavaScript 将其发送到 Youtube

> ID：14740026
> 
> 赞同：2
> 
> 时间：2013-02-06T22:22:55.683
> 
> 标签：javascript, html, youtube, pandora

我的项目是当 Pandora 打开并播放时，能够点击一个按钮（在页面上或作为 Firefox 中的附加组件。然后此按钮将激活一个脚本，该脚本将从页面中提取歌曲和艺术家姓名并存储它们在变量中。然后这些字符串将通过 Youtube 搜索。然后，第一个视频的 URL 将存储在另一个变量中。将打开一个从视频中删除 mp3 的网站，并将 Youtube URL 存储在适当的字段。理想情况下，将下载转换后的文件。

我不太了解 Javascript，但这个项目的目的是帮助我学习。我还没有走很远，需要一些帮助。我知道歌曲字符串在页面上的 div，但似乎无法存储它。我正在使用 GreaseMonkey 运行脚本。

一个建议是使用 Java 并使其成为桌面应用程序，让它监听系统音量并将其发送到类似 Shazam 的网站，然后从那里开始，但没有适用于此的非移动 Shazam 应用程序。

我需要帮助：

JS 是用于此任务的正确语言吗？如果是这样：如何将歌曲信息存储到变量中。我已经对其进行了研究，并且我放入脚本中涉及变量的任何内容都会导致它无法运行。

提前致谢。

# jquery - HTML文件不加载jQuery

> ID：14740030
> 
> 赞同：0
> 
> 时间：2013-02-06T22:23:15.740
> 
> 标签：jquery, html

包括我

```
<script type='text/javascript' src='script.js'></script>
<script src="//ajax.googleapis.com/ajax/libs/jqueryui/1.9.1/jquery-ui.min.js"></script> 
```

在我的`index.html`标题中，script.js 与 index.html 位于同一文件夹中。我有一个简单的 div 可以在正文部分调整大小。

script.js 有

```
$(document).ready(function () {
    $("div").resizable();
}); 
```

非常简单.. 但是当我在所有浏览器上加载 index.html 时，div 不可调整大小。我包含js文件的方式不正确吗？

我假设我应该能够加载 index.html 并开始调整 div 的大小。

更新：

```
<!DOCTYPE html>
<html>
    <head>
        <title>Test</title>
        <link rel='stylesheet' type='text/css' href='stylesheet.css'/>
        <link rel="stylesheet" href="http://ajax.googleapis.com/ajax/libs/jqueryui/1.9.0/themes/ui-lightness/jquery-ui.css"/>
        <script src="http://code.jquery.com/jquery-1.9.0.js"></script>
        <script src="http://code.jquery.com/ui/1.10.0/jquery-ui.js"></script>
        <script src='script.js'></script>
    </head>
    <body>
        <div>Resize Me!</div>
    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-06T22:25:33.070

您正在加载 jQuery UI 文件。您还需要加载标准的 jQuery 文件。

```
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.0/jquery.min.js"></script>
<script src="//ajax.googleapis.com/ajax/libs/jqueryui/1.10.0/jquery-ui.min.js"></script>
<link rel="stylesheet" href="http://ajax.googleapis.com/ajax/libs/jqueryui/1.9.0/themes/ui-lightness/jquery-ui.css"> 
```

标准的 jQuery 文件允许您使用选择器`$("#div")`和函数`ready()`。jQueryUI 允许您使用该功能`resizeable()`。所以你需要加载两者。

编辑：由于您将其标记为[html5](https://stackoverflow.com/questions/tagged/html5)，您可以使用

```
<script src='script.js'></script> 
```

假设`<script>`是 HTML5 中的 javascript。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T22:49:19.353

在您的“stylesheet.css”中，您是否引用了 jquery UI 样式？这可能是问题所在 - 出现在可调整大小元素右下角的可拖动箭头是使用 jquery UI css 生成的。

来自 jquery UI 的网站：

```
<link rel="stylesheet" href="http://code.jquery.com/ui/1.10.0/themes/base/jquery-ui.css" />
  <script src="http://code.jquery.com/jquery-1.8.3.js"></script>
  <script src="http://code.jquery.com/ui/1.10.0/jquery-ui.js"></script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-06T22:43:16.937

您需要更多的东西来正确设置 HTML + JS。

```
<html>
    <meta name="viewport" content="height=device-height,width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no" />
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="format-detection" content="telephone=no" />

    <link href="Styling/jquery-ui/jquery-ui-1.10.0.css" rel="stylesheet" type="text/css" />

    <!-- Add your CSS here -->

    <script src="Scripts/External/jquery-1.9.0.js" type="text/javascript"></script>
    <script src="Scripts/External/jquery-ui-1.10.0.js" type="text/javascript"></script>

    <!-- Add your JS here -->
</head>
<body>
    <div id='sizeableDiv'> Resize me! </div>
</body>
</html> 
```

您所做的是忘记为 jQuery 添加样式。

***编辑***在文档中发现可调整大小的方法也略有不同。在`<div>`标记之后，添加：

```
<script type="text/javascript">
    $( "#sizeableDiv" ).resizable( "enable" );
</script> 
```

[在这里](http://api.jqueryui.com/resizable/#method-enable)找到这个。

# spring-batch - 如何安装 Spring Batch Samples 项目。Maven 问题

> ID：14740031
> 
> 赞同：1
> 
> 时间：2013-02-06T22:23:18.610
> 
> 标签：spring-batch, sts-springsourcetoolsuite

我正在调查 Spring-Batch 以在我们的商店中实施。我也不是 Maven 专家。

但是，我已经下载了示例并将它们导入到一个项目中。我已经键入了所有 Maven 依赖项。但是，我还剩下 7 个缺失的工件：

遗失的神器：

```
 org.vmware.sqlfire:sqlfireclient.jar:1.0.3
    org.codehaus.woodstox:stax2-api:jar:3.0.1.GA
    org.hibernate:hibernate-entitymanager:jar:4.1.9.FINAL 
```

还有更多，但修复一个可能会解决所有问题。我可能只是不理解安装 Spring Batch Samples 项目的说明。这几天我一直在扔石头，试图找到它需要的罐子。我之前在其他项目中看到过 Maven 抓取并维护所有必要的 jar。

一个侧边栏。Spring Batch 值得探索吗？它是在市场上被积极使用，还是被其他东西取代了？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-07T12:57:58.180

对于构建示例项目，这些 jar 不是强制性的。请找到一些春季批处理项目，[http://java.dzone.com/news/spring-batch-hello-world-1](http://java.dzone.com/news/spring-batch-hello-world-1)

[如何开始使用 Spring Batch？](https://stackoverflow.com/questions/1609793/how-can-i-get-started-with-spring-batch)

# html - 单独的html的多次嵌入

> ID：14740033
> 
> 赞同：5
> 
> 时间：2013-02-06T22:23:21.063
> 
> 标签：html, angularjs

我想将多个部分转换为一个指令。这是我如何设置它的想法。

```
<div id="content" class="mainDirective">
    <div class="sub">
        <ul>
            <li>Everyone</li>
            <li>Development (3)</li>
            <li>Marketing</li>
        </ul>
    </div>
    <div class="subButtons">
        <span class="csStIcon add" data-ng-click="addTeam()"></span>
        <span class="csStIcon edit" data-ng-click="editTeam()"></span>
        <span class="csStIcon delete" data-ng-click="deleteTeam()"></span>
    </div>
    <div class="main">
        <table>
            <thead>
                <tr><td>Name</td><td>Last name</td><td>Department</td></tr>
            </thead>
            <tbody>
                <tr><td>Lorem</td><td>Ipsum</td><td>Development</td></tr>
                <tr><td>Lorem</td><td>Ipsum</td><td>Development</td></tr>
                <tr><td>Lorem</td><td>Ipsum</td><td>Development</td></tr>
            </tbody>
        </table>
    </div>
</div> 
```

我的指令模板：

```
<div>
    <div class="left">
        <div data-ng-multi-transclude="sub"></div>
        <div class="bottomOptions">
            <span class="csStIcon collapse"></span>
            <div data-ng-multi-transclude="subButtons"></div>
        </div>
    </div>
    <div class="right">
        <div data-ng-multi-transclude="main"></div>
    </div>
</div> 
```

最后的输出：

```
<div>
    <div class="left">
        <div class="sub">
            <ul>
                <li>Everyone</li>
                <li data-ng-click="loadDepartment()">Development (3)</li>
                <li data-ng-click="loadDepartment()">Marketing</li>
            </ul>
        </div>
        <div class="bottomOptions">
            <span class="csStIcon collapse"></span>
            <div class="subButtons">
                <div class="subButtons">
                    <span class="csStIcon add" data-ng-click="addTeam()"></span>
                    <span class="csStIcon edit" data-ng-click="editTeam()"></span>
                    <span class="csStIcon delete" data-ng-click="deleteTeam()"></span>
                </div>              
            </div>
        </div>
    </div>
    <div class="right">
        <div class="main">
            <table>
                <thead>
                    <tr><td>Name</td><td>Last name</td><td>Department</td></tr>
                </thead>
                <tbody>
                    <tr><td>Lorem</td><td>Ipsum</td><td>Development</td></tr>
                    <tr><td>Lorem</td><td>Ipsum</td><td>Development</td></tr>
                    <tr><td>Lorem</td><td>Ipsum</td><td>Development</td></tr>
                </tbody>
            </table>
        </div>
    </div>
</div> 
```

这可能在角度范围内吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-08-29T19:53:06.373

我最终也需要这个功能，所以我写了[ng-multi-transclude](https://github.com/zachsnow/ng-multi-transclude) - 有趣的是，我当时还没有看到这个问题，只是幸运地得到了同一个名字。

用法几乎与您的问题草图完全相同；唯一的区别是您使用`name`属性来选择要填充的“洞”而不是`class`属性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-02-09T14:39:40.307

这已在 angular 1.5 中添加

[http://angularjs.blogspot.ca/2016/02/angular-150-ennoblement-facilitation.html](http://angularjs.blogspot.ca/2016/02/angular-150-ennoblement-facilitation.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-07-04T18:18:26.503

我使用 transclude 函数提出了这个指令：

```
app.directive('mainDirective', function($compile) {
    var template = ['<div>',
                    '    <div class="left">',
                    '        <div data-ng-multi-transclude="sub"></div>',
                    '        <div class="bottomOptions">',
                    '            <span class="csStIcon collapse"></span>',
                    '            <div data-ng-multi-transclude="subButtons"></div>',
                    '        </div>',
                    '    </div>',
                    '    <div class="right">',
                    '        <div data-ng-multi-transclude="main"></div>',
                    '    </div>',
                    '</div>'].join('\n');
    return {
        restrict: 'C',
        transclude: true,
        template: template,
        link: function(scope, element, attr, model, transclude) {
            var places = element.find('[data-ng-multi-transclude]');
            console.log(element);
            places.each(function() {
                var self = $(this);
                var class_ = self.data('ng-multi-transclude');
                transclude(scope.$new(), function(clone, scope) {
                    var item = clone.closest('.' + class_);
                    $compile(item)(scope).appendTo(self);
                });
            });
        }
    };
}); 
```

我使用了编译，所以你可以在你的嵌入代码中使用角度。

如果你使用这个：

```
self.replaceWith($compile(item)(scope)); 
```

你不会得到那些带有`data-ng-multi-transclude`属性的原始包装器 div。

您还需要包含 jQuery（总是在 Angular 之前，因为否则您会得到 jQLite）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-07-04T18:27:24.657

我在编写的组件中使用了多个“嵌入”。在实践中，它只是嵌套指令，但它们完成了工作：[https ://github.com/AlexCppns/ac-fancy-input](https://github.com/AlexCppns/ac-fancy-input)

更具体地说，请查看以下文件：

[https://github.com/AlexCppns/ac-fancy-input/blob/master/src/ac-fancy-input/directives/fancy-input.js](https://github.com/AlexCppns/ac-fancy-input/blob/master/src/ac-fancy-input/directives/fancy-input.js)

# android - 拒绝来电

> ID：14740034
> 
> 赞同：3
> 
> 时间：2013-02-06T22:23:27.523
> 
> 标签：android

我正在开发一个允许用户将数字添加到黑名单的 android。当来电号码与黑名单中的号码匹配时，即使电话短暂响铃然后断开呼叫，呼叫也应被拒绝。

我在 SO 上找到的所有内容都表示，如果不在我创建的 com.android.internal.telephony 中创建 AIDL 就无法完成，但我无法添加修改手机状态权限，因为它说它需要一个系统应用程序。

我的目标是 ICS 向上，我已经看到其他应用程序阻止 ICS 和向上的调用，所以这是如何完成的。我还尝试将修改手机状态权限添加到清单文件中，它显示一个错误，指出它仅适用于系统应用程序，所以我该如何解决这个问题。我不希望该应用程序必须植根。

感谢您的任何帮助，您可以提供

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-06T22:59:33.850

我靠运气找到了答案。

而不是添加权限`MODIFY_PHONE_STATE`添加权限`CALL_PHONE`

创建一个名为`com.android.internal.telephony`

在这个包中创建一个名为`ITelephony.aidl`并添加以下内容的文件

包 com.android.internal.telephony；

```
interface ITelephony {      

    boolean endCall();     

    void answerRingingCall();      

    void silenceRinger(); 

} 
```

使用以下代码来阻止呼叫

```
try
        {
            TelephonyManager tm = (TelephonyManager)context.getSystemService(Context.TELEPHONY_SERVICE);
            Class c = Class.forName(tm.getClass().getName());
            Method m = c.getDeclaredMethod("getITelephony");
            m.setAccessible(true);

            com.android.internal.telephony.ITelephony  telephonyService = (ITelephony)m.invoke(tm);
            //telephonyService.silenceRinger();
            telephonyService.endCall();
        }
        catch (Exception e)
        {
            Log.d("BLOCK CALL", e.toString());
            Toast.makeText(context, e.toString(), Toast.LENGTH_LONG).show();
        } 
```

希望这对其他人有帮助，它不太容易找到。我不明白为什么谷歌删除了这样做的能力而不像这样搞砸。

# html - DOM 节点是同步的吗？

> ID：14740038
> 
> 赞同：7
> 
> 时间：2013-02-06T22:24:02.110
> 
> 标签：html, css, dom, styling

我想知道 DOM 节点属性在样式信息方面是否是同步的？我正在阅读以下[文章](http://taligarsiel.com/Projects/howbrowserswork1.htm#The_browsers_we_will_talk_about)，并且阅读了以下行

> 要求样式信息的脚本，例如“offsetHeight”可以同步触发增量布局。

从文章中，似乎表明有一个“脏节点”系统会暂停脚本执行，直到文档完全布局。所以，如果我有一个脏节点n，如果从javascript调用n.offsetHeight，文章建议n.offsetHeight在偏移高度完全具体化之前不会返回。我对此的理解正确吗？我可以依靠浏览器始终为我提供任何附加 DOM 元素的当前稳定版本吗？

简而言之，如果我修改节点上的某些样式（使用样式属性、类名、动态 css 等），然后读取一些依赖于所述样式的属性，我是否可以始终确定我得到的值将是应用了我以前的样式的节点的值吗？如果不是这种情况，我怎么知道我的样式更改何时应用？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-06T22:33:51.040

当您从 DOM 元素中读取信息时，您将始终获得当前值，而依赖于其他属性或其他元素的属性在您读取它们时将始终正确计算。

当您更改 DOM 以更改布局时，在您进行更改时不会直接重新计算所有元素。如果您更改需要再次重新计算的更多内容，那将是一种浪费。只要不需要重新计算，布局就会保持未计算状态。如果您读取依赖于该重新计算的属性，它将在返回值之前完成。

因此，通过规划如何设置和读取属性，可以避免不必要的重新计算。

# jquery - Jquery mobile：pageinit事件未触发

> ID：14740041
> 
> 赞同：1
> 
> 时间：2013-02-06T22:24:15.967
> 
> 标签：jquery, jquery-mobile

有人可以帮我解决这个代码吗？这可能是一些愚蠢的解决方法，但我现在已经坚持了几个小时！pageinit 事件不会触发。触发它的唯一方法是将脚本移到正文中，就在结束标记之前，但是我在任何官方文档中都没有找到这种奇怪的结构，我怀疑是错误的！我正在三星手机模拟器（avd）上进行测试。

```
<!DOCTYPE html>
<html>
  <head>
    <meta name="generator"
    content="HTML Tidy for HTML5 (experimental) for Windows https://github.com/w3c/tidy-html5/tree/c63cc39" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta name="viewport" content="width=device-width, minimum-scale=1, maximum-scale=1" />

    <link rel="stylesheet" href="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.css" />
    <script src="http://code.jquery.com/jquery-1.8.2.min.js"></script>
    <script>
       $( document ).delegate("#aboutPage", "pageinit", function () {
                alert('ok');
            alert($('#homePage').text());
        });

</script>
    <script src="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.js"></script>
    <title>Test Mobile Application</title>
  </head>
  <body>
    <div data-role="popup" id="popupBasic">
      <p>-....</p>
    </div>
    <!-- Begin Homepage -->
    <section id="homePage" data-role="page" data-theme="a">
      <header data-role="header" data-position="fixed">
        <h1>Header</h1>
      </header>
      <div class="content" data-role="content">
        <p>Homepage</p>
        <a onclick="javascript:alert($('#homePage').text());" data-role="button">aaaaa</a>
        <p>
          <a href="#aboutPage">Go to About Page</a>
        </p>
        <a href="#popupBasic" data-rel="popup">Open Popup</a>
      </div>
      <footer data-role="footer" data-position="fixed">
        <h1>Footer</h1>
      </footer>
    </section>
    <!-- End Homepage -->
    <!-- Begin About Page -->
    <section id="aboutPage" data-role="page" data-theme="b">
      <header data-role="header" data-position="fixed">
        <h1>Header</h1>
      </header>
      <div class="content" data-role="content">
        <p>This is About Page</p>
        <p>
          <a href="#portfolioPage">Go to Portfolio Page</a>
        </p>
      </div>
      <footer data-role="footer" data-position="fixed">
        <h1>Footer</h1>
      </footer>
    </section>
    <!-- End About page -->
    <!-- Begin Portfolio Page -->
    <section id="portfolioPage" data-role="page" data-theme="a">
      <header data-role="header" data-position="fixed" data-theme="d">
        <h1>Header</h1>
      </header>
      <div class="content" data-role="content" data-theme="c">
        <p>This is Portfolio Page</p>
        <p>
          <a href="#homePage">Go back to Homepage</a>
        </p>
      </div>
      <footer data-role="footer" data-position="fixed" data-theme="d">
        <h1>Footer</h1>
      </footer>
    </section>
    <!-- End Portfolio page -->
  </body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T07:47:55.413

[你的代码工作得很好](http://jsfiddle.net/pmatseykanets/CCght/)。 当您的 About 页面通过单击按钮或链接`pageinit()`被获取时，仅被调用一次。`aaaa``Go to About Page`

不过有几件事：

**首先**链接`jquery.mobile`，然后使用它

```
<script src="http://code.jquery.com/jquery-1.8.2.min.js"></script>
<script>
    //Your code as of right now
</script>
<script src="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.js"></script> 
```

应该

```
<script src="http://code.jquery.com/jquery-1.8.2.min.js"></script>
<script src="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.js"></script>
<script>
    //Your code goes here
</script> 
```

**其次**，由于您使用的是 jquery 1.8.2，您可以考虑从切换`delegate()`到`on()`

```
 $(document).on("pageinit", "#aboutPage", function () {
        alert('ok');
        alert($('#homePage').text());
    }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-18T20:43:02.383

经过一番大搜索后，我发现 pageinit 事件没有因为 Ajax 而被触发。然后在调用下一页的链接中添加 data-ajax="false" 第二页

# amazon-web-services - Amazon Elastic Beanstalk：多个应用程序可以共享一个 Amazon RDS 数据库实例吗？

> ID：14740043
> 
> 赞同：4
> 
> 时间：2013-02-06T22:24:21.450
> 
> 标签：amazon-web-services, amazon-rds, amazon-elastic-beanstalk

在 Amazon Elastic Beanstalk 中创建应用程序时，您可以选择创建新的 Amazon RDS 数据库实例。是否可以将现有 RDS 数据库实例与 Elastic Beanstalk 应用程序相关联？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-06T22:30:12.630

如果您想在多个应用程序之间共享一个 RDS 实例，最好的办法是独立于您的 beanstalk 应用程序进行设置。

为每个应用程序设置 privs 并将每个应用程序配置为使用 RDS 实例。

您可能必须手动配置应用程序安全组才能访问数据库实例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-08-30T03:27:23.053

我面临同样的问题并使用以下步骤修复：

1) 转到 EC2 实例并记下您的安全组示例“sg-121212121212”

2) 转到 RDS 安全组 ad=nd 入站流量

3）编辑规则选择所有流量并添加新的ebs安全组“sg-121212121212”

希望它会有所帮助

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2016-10-09T05:25:29.903

单个数据库只能与一个 Elastic Beanstalk 环境一起使用。虽然，它可以在环境之间移动。同样重要的是要记住克隆操作不会克隆数据库。

# graphics - Mathematica 中的绝对纵横比

> ID：14740045
> 
> 赞同：0
> 
> 时间：2013-02-06T22:24:26.103
> 
> 标签：graphics, options, aspect-ratio

假设我绘制 [1000 x,{x,0,1}]。我使用什么选项来强制生成的图形图像在 y 方向具有 10,000 个像素，在 x 方向具有 10 个像素，即我希望 x 和 y 轴以相同的比例缩放（以像素为单位）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-31T01:11:00.190

好吧，对于您的 1000x 示例，它有点难以看到，因为您的斜率几乎是垂直的。因此，让我们使用一个更平缓的斜率以方便显示——也许是 10 的斜率。然后，只需执行以下操作：

```
Plot[10 x, {x, 0, 10}, AspectRatio -> Automatic] 
```

# android - Google Maps V2 - 膨胀类片段时出错

> ID：14740048
> 
> 赞同：36
> 
> 时间：2013-02-06T22:24:46.393
> 
> 标签：android, google-maps-android-api-2

我正在尝试我的手和 Android 应用程序开发。我目前正在使用 Eclipse（我不记得版本，无论是最新版本）。我已经过了一座桥，我似乎无法理解我做错了什么。我正在尝试使用 Google Maps V2 API。我浏览了几个文档并尝试了几种技术，所有这些都导致了同样的错误：

```
Android.view.Inflate Exception: Binary XML file line #2: Error inflating class fragment 
```

我已经连续两天把脸撞到钥匙上了，试图抓住我在这里做错了什么。

我做过的事情：

1.  从一个空白活动开始。
2.  项目 -> 属性 -> Android ->*项目构建目标是 Google API - 4.2 - API 17* - 我也尝试了*所有*其他选项（只要高于 3.0 版，发现它已记录在案
3.  将 google-play-services_lib 添加到我的包资源管理器中。我指出 google-play-services_lib 确实是`a library`.
4.  项目 -> 属性 -> Android -> 库 -> 添加 -> 我选择了 google-play-services_lib 的位置。
5.  作为`android-support-v4.jar`我项目的依赖项。

我已经尝试了很多与我类似的问题的不同答案，但无济于事。:( 我通常可以弄清楚这些事情，但也许我太超载了。

我在 Eclipse 中的包资源管理器树看起来像

1.  谷歌播放服务库
2.  向量机

这是代码：>

**activity_main.xml**

```
<?xml version="1.0" encoding="utf-8"?>
<fragment xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/map"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    class="com.google.android.gms.maps.SupportMapFragment"/> 
```

**显现**

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.testing.svma"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk
        android:minSdkVersion="17"
        android:targetSdkVersion="17" />

    <permission
        android:name="com.testing.svma.permission.MAPS_RECEIVE"
        android:protectionLevel="signature" />

    <uses-permission android:name="com.testing.svma.permission.MAPS_RECEIVE" />
    <uses-permission android:name="android.permission.INTERNET" />
    <uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" />
    <uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION" />
    <uses-permission android:name="android.permission.ACCESS_FINE_LOCATION" />
    <uses-permission android:name="com.google.android.providers.gsf.permission.READ_GSERVICES" />

    <application
        android:allowBackup="true"
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/AppTheme" >
        <activity
            android:name="com.testing.svma.MainActivity"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>

        <meta-data
            android:name="com.google.android.maps.v2.API_KEY"
            android:value="SHA1_Generated_KEY_HERE" />
    </application>

    <uses-feature
        android:glEsVersion="0x00020000"
        android:required="true" />
</manifest> 
```

**MainActivity.java**

```
package com.testing.svma;

import android.os.Bundle;
import android.support.v4.app.FragmentActivity;

public class MainActivity extends FragmentActivity {

    @Override
    protected void onCreate(Bundle savedInstanceState) {

        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

    }
} 
```

**参考文件**

1.  我使用[谷歌地图的“错误膨胀类片段”](https://stackoverflow.com/questions/14082851/error-inflating-class-fragment-with-google-map)来尝试解决我的问题。

2.  我参考了[这个谷歌地图快速入门指南](https://docs.google.com/document/pub?id=19nQzvKP-CVLd7_VrpwnHfl-AE9fjbJySowONZZtNHzw)来创建我的项目。

3.  我最初[是从 Google Maps Android V2 Api 简介中的示例代码开始的](https://developers.google.com/maps/documentation/android/intro)

4.  一大堆SO问题。

那么，SO社区，我做错了什么？为什么我无法掌握这个简单的概念。

先感谢您。

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2014-02-09T13:33:12.700

我知道这可能是一个死线程，但以防万一有人偶然发现这里有相同的问题 - 您的清单可能缺少以下元信息：

```
<meta-data
    android:name="com.google.android.gms.version"
    android:value="@integer/google_play_services_version" /> 
```

在`<application>`元素中声明它，您的代码应该可以工作。在跳过此步骤的 youtube 教程之后，我遇到了同样的问题，只有在仔细阅读原始 Google 教程时，我才注意到缺少代码。

无论如何，希望这对某人有所帮助。

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2013-02-21T15:06:50.377

我有同样的代码/同样的问题！尝试将 android:name="com.testing.svma.MainActivity" 添加到布局中的“片段”！它为我解决了这个问题

```
<?xml version="1.0" encoding="utf-8"?>
<fragment xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/map"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    class="com.google.android.gms.maps.SupportMapFragment"
    android:name="com.testing.svma.MainActivity"/> 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-11-12T17:40:43.093

我有同样的问题，通过修改清单解决了。这是我的清单。

```
 <?xml version="1.0" encoding="utf-8"?>
        <manifest xmlns:android="http://schemas.android.com/apk/res/android"
            package="example.gps"
            android:versionCode="1"
            android:versionName="1.0" >

        <permission 
               android:name="example.gps.permission.MAPS_RECEIVE" 
               android:protectionLevel="signature"></permission>
      <!-- Copied from Google Maps Library/AndroidManifest.xml. -->
         <uses-sdk
           android:minSdkVersion="9"
           android:targetSdkVersion="17"/>
         <uses-permission android:name="android.permission.ACCESS_NETWORK_STATE"/>
         <uses-permission android:name="android.permission.INTERNET"/>
         <uses-permission      android:name="com.google.android.providers.gsf.permission.READ_GSERVICES"/>
      <!-- External storage for caching. -->
         <uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE"/>
      <!-- My Location -->
         <uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION"/>
         <uses-permission android:name="android.permission.ACCESS_FINE_LOCATION"/>
      <!-- Maps API needs OpenGL ES 2.0\. -->
         <uses-feature
            android:glEsVersion="0x00020000"
            android:required="true"/>
      <!-- End of copy. -->

        <application
            android:allowBackup="true"
            android:icon="@drawable/ic_launcher"
            android:label="@string/app_name"
            android:theme="@style/AppTheme"
            android:hardwareAccelerated="true" >
            <meta-data
                android:name="com.google.android.maps.v2.API_KEY"
                android:value="<YOUR VALUE>"/>
            <meta-data
                android:name="com.google.android.gms.version"
                android:value="@integer/google_play_services_version" />
            <activity
                android:name="example.gps.MainActivity"
                android:label="@string/app_name" >
                <intent-filter>
                    <action android:name="android.intent.action.MAIN" />

                     <category android:name="android.intent.category.LAUNCHER" />
                </intent-filter>
            </activity>
        </application>

    </manifest> 
```

xml文件是

```
 <?xml version="1.0" encoding="utf-8"?>
    <fragment xmlns:android="http://schemas.android.com/apk/res/android"
        android:id="@+id/map"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        class="com.google.android.gms.maps.SupportMapFragment"
    /> 
```

java类是

```
 public class MainActivity extends FragmentActivity
        {
           @Override
           protected void onCreate(Bundle savedInstanceState) {
               super.onCreate(savedInstanceState);
               setContentView(R.layout.activity_main);
           }
        } 
```

这解决了我的问题

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-02-06T23:05:39.963

尝试将 google-play-services 库引用添加到您的项目中。`Project->Properties->Android`如果您使用的是 Eclipse ，则需要转到`Add`google-play-services 库项目。

或者，

`project.properties`您可以手动修改文件。尝试添加对您的 google_play_services 库的引用。所以我的`project.properties`文件看起来像：

```
# Project target.
target=android-17
android.library.reference.1=../../../android-sdks/extras/google/google_play_services/libproject/google-play-services_lib 
```

在您的情况下，google-play-services lib 的路径可能会有所不同

我试图导入你的代码，它也崩溃了。当我修改属性文件时 - 我正在运行地图

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-06-24T01:43:04.683

我花了很多时间试图解决这个问题，经过大量阅读和尝试，我通过改变

`public class MainActivity extends FragmentActivity`

为了这

`public class MainActivity extends android.support.v4.app.FragmentActivity`

我希望这可以帮助你

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2014-03-04T23:08:25.453

在几天内尝试了上述所有答案，然后最终奏效了：

项目 -> 属性 -> Android -> 项目构建目标

将项目构建目标更改为 android 4.3(API 18) 并单击应用

然后在清单中我手动更改了最小和目标 sdk 版本：

```
<uses-sdk
    android:minSdkVersion="18"
    android:targetSdkVersion="18" /> 
```

这现在与`target=android-18`project.properties 文件中的匹配（这是我们首先所做的项目构建目标更改的结果）

我也尝试过`android:minSdkVersion="11"`哪个有效，所以这`targetSdkVersion`是重要的一点。

希望这对某人有帮助！

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2014-06-03T14:52:17.533

问题经常出在`Manifest.xml`，所以请确保您编写了正确的权限，例如：`

```
 <?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.zako.android.locationapi.maps"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk
        android:minSdkVersion="17"
        android:targetSdkVersion="17" />

    <permission
        android:name="com.zako.android.locationapi.maps.permission.MAPS_RECEIVE"
        android:protectionLevel="signature" />

    <!-- Required OpenGL ES 2.0\. for Maps V2 -->
    <uses-feature
        android:glEsVersion="0x00020000"
        android:required="true" />

    <!-- Requires OpenGL ES version 2 -->
    <uses-feature
        android:glEsVersion="0x00020000"
        android:required="true" />

    <uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" />
    <uses-permission android:name="com.zako.android.locationapi.maps.permission.MAPS_RECEIVE" />
    <uses-permission android:name="android.permission.INTERNET" />
    <uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" />
    <uses-permission android:name="com.google.android.providers.gsf.permission.READ_GSERVICES" />
    <uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION" />
    <uses-permission android:name="android.permission.ACCESS_FINE_LOCATION" />

    <application
        android:allowBackup="true"
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/AppTheme" >
        <activity
            android:name="com.zako.android.locationapi.maps.MainActivity"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>

        <meta-data
            android:name="com.google.android.maps.v2.API_KEY"
            android:value="......" />
        <meta-data
            android:name="com.google.android.gms.version"
            android:value="@integer/google_play_services_version" />
    </application>

</manifest> 
```

`

不要忘记`<uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" />` 和`<meta-data android:name="com.google.android.gms.version" android:value="@integer/google_play_services_version" />`

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2014-08-09T15:49:29.550

我遇到了同样的问题，我犯了一个错误，只添加了以下 2 个标签之一。

实际错误确实具有误导性，因为您可能正在考虑一些 API 级别的 UI 问题。

> ```
>  <meta-data
>             android:name="com.google.android.maps.v2.API_KEY"
>             android:value="<YOUR VALUE>"/>
>         <meta-data
>             android:name="com.google.android.gms.version"
>             android:value="@integer/google_play_services_version" /> 
> ```

**请注意，您还缺少这两个之一**

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2013-02-07T22:40:16.567

我有一个类似的错误，我认为它来自这一点：当我包含 Google Play 服务 API 时，我没有将它复制到我的工作区中，我使用原始的！

*注意*：您应该引用复制到源代码树的库的副本——您不应该引用 Android SDK 目录中的库。

检查这一点。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2013-07-22T21:58:43.430

我有类似的问题，我通过右键单击解决了`project->tools>add support library`......和`setup library`

我希望这对你有帮助

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2014-03-13T06:02:24.943

只需包含以下代码行`onDestroy()`

```
SupportMapFragment mapFragment = ((SupportMapFragment) getActivity().getSupportFragmentManager().findFragmentById(R.id.map_location_sharing));

if(mapFragment != null) {
    FragmentManager fM = getFragmentManager();
    fM.beginTransaction().remove(mapFragment).commit(); 
```

它对我有用。希望对你也有用。谢谢

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2014-05-29T08:08:46.757

我也有这个错误，这是由于外部权限。这没有任何意义，但我添加了这个权限，从那时起一切正常。

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2017-04-16T07:57:36.053

在某些 android 6.0 移动设备中，此异常是错误如果无法扁平化 XML 导致

```
Caused by: java.lang.NullPointerException: Attempt to invoke virtual method 'android.content.res.Configuration android.content.res.Resources.getConfiguration()' on a null object reference 
```

然后它是 android [https://issuetracker.google.com/issues/35827842中的活动错误](https://issuetracker.google.com/issues/35827842)

这可以通过添加来解决

```
android:hardwareAccelerated="true" adding in activity tag 
```

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2017-08-28T21:29:27.213

在我的情况下，使用两个元数据引用解决了这个问题：

```
<meta-data
    android:name="com.google.android.gms.version"
    android:value="@integer/google_play_services_version" />
<meta-data
    android:name="com.google.android.maps.v2.API_KEY"
    android:value="yourAPIkeyFromGoogleAPIConsole" /> 
```

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2019-01-22T19:24:08.847

我只是将 API 密钥添加到清单中，它有所帮助

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2021-05-20T23:17:59.250

我遇到了同样的问题，我刚刚将**API_KEY**添加到清单中，一切都很好。

```
 <meta-data
        android:name="com.google.android.geo.API_KEY"
        android:value="@string/map_api_key" /> 
```

# wordpress - Javascript 和 Wordpress

> ID：14740051
> 
> 赞同：0
> 
> 时间：2013-02-06T22:24:52.983
> 
> 标签：wordpress, google-fusion-tables

两个相关问题：

*   有没有关于 Fusion Tables Javascript API 的好文档？我找到了一个方法列表，但几乎没有关于返回值、语义或使用习惯用法的信息。

*   是否有任何指南（或建议的插件或习语）将 FT Javascript API 集成到本地托管的 Wordpress 站点中？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T02:29:56.027

这里有一些文档：

[https://developers.google.com/fusiontables/docs/v1/getting_started#JS](https://developers.google.com/fusiontables/docs/v1/getting_started#JS)

但我没有发现它很有用。但是这个例子，在 Google Maps API 的上下文中，我发现新的 API 1.0 非常有用

[https://googledrive.com/host/0B5KVZ6J1ohN_Q3ZqVkFGSGZ2cEE/custom%20markers%20code/customicons_viaApi.html](https://googledrive.com/host/0B5KVZ6J1ohN_Q3ZqVkFGSGZ2cEE/custom%20markers%20code/customicons_viaApi.html)

您需要查看并保存源。此外，如果您在 FT 标签中搜索 JSONP，您会发现许多使用旧的 pre 1.0 API 的示例，但概念是相同的，只是 AJAX 端点发生了变化，并且需要 apiKey。

基本思想是任何 FT 查询都将返回一个包含列和行成员的 JSON 对象，非常类似于 CSV 响应。

如上例所示：

```
function onDataFetched(data) {
    var rows = data.rows;
    var cols = data.cols;
    ...
} 
```

# visual-studio - 我必须为使用 OpenNETCF 的项目部署什么？

> ID：14740052
> 
> 赞同：0
> 
> 时间：2013-02-06T22:24:53.230
> 
> 标签：visual-studio, deployment, windows-ce, opennetcf, typeloadexception

我使用 OpenNETCF 的 SerialPort 类创建了一个 .exe，但是当我将 .exe 复制到运行 Windows CE 6 的摩托罗拉设备并尝试运行它时，我得到了：

```
TypeLoad
Exception
File or assembly name 'OpenNETCF, Version=1.3.50123.0...or one of its dependencies was not found. 
```

我需要复制哪些文件或文件来解决此问题？有没有办法让 Visual Studio (2003, .NET 1.1) 将所需的位捆绑到 .exe 中？

我在 Build | 中注意到 我设置的唯一上下文是“调试”的配置管理器；将其从 Debug 更改为 Release 会有什么不同吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-19T20:16:27.790

我不了解 Visual Studio 2003，但在 2008 年，您可以创建一个智能设备部署 CAB，它实质上为您创建了一个安装程序，其中包含您的程序运行所需的所有参考资料的副本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T22:56:50.823

这可能有点矫枉过正，但我​​复制了所有的 OpenNETCF dll，问题就解决了。

# jquery - jQuery datepicker 默认日期与当前月份和日期以及 2006 年

> ID：14740054
> 
> 赞同：2
> 
> 时间：2013-02-06T22:24:54.123
> 
> 标签：jquery, datepicker

我的日期选择器在这里有一些 jquery 代码

```
$birth.datepicker({
onSelect: function(dateText, inst) { 
    $(this).parent().find("label#error").html("");
    $gender.focus();
},
    yearRange: '1950:2006',
    changeMonth: true,
changeYear: true,           
showOtherMonths: true,          
selectOtherMonths: true,
dateFormat: 'yy-mm-dd'
}); 
```

我正在尝试`defaultDate`为我的日期选择器设置一个日期为 2006-currentMonth-currentDay

这可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T23:06:12.930

首先，使用创建一个日期对象`new Date()`。`getMonth()`然后使用 date 方法和收集当前月份和当前日期`getDate()`。

然后在 datepicker 函数中，使用该`setDate`方法通过将硬编码的年份 (2006) 与当前月份和日期连接起来来分配默认日期。

**注意：**对于我将它增加 1 的月份，因为 getMonth() 从 0-11（1 月到 12 月）和 jQuery 日期选择器从 1-12 到 1 月到 12 月

**HTML：**

```
<label for="datepicker">Date: </label><input id="datepicker" /> 
```

**Javascript：**

```
var todaysDate = new Date(),
    month = todaysDate.getMonth() + 1,
    date = todaysDate.getDate();

$(document).ready(function(){
    $('#datepicker').datepicker({
        dateFormat: 'yy-mm-dd'
    })
    .datepicker('setDate', '2006' + '-' + month + '-' + date);
}) 
```

在这里查看它的工作示例：http: [//jsfiddle.net/tuant/RvHa8/](http://jsfiddle.net/tuant/RvHa8/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T22:39:43.110

```
 var date = new Date();
$(document).ready(function(){
    $('#datepicker').datepicker(
        {defaultDate: date.getDay()+'/'+date.getMonth()+'/2006'});
}) 
```

[http://jsfiddle.net/9HwAP/](http://jsfiddle.net/9HwAP/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-06T22:41:41.383

您可以创建一个日期对象并将年份设置为 2006，并将其作为 defaultDate 参数传递给 datepicker

```
var d = new Date();
d.setFullYear(2006);

$birth.datepicker({
onSelect: function(dateText, inst) { 
    $(this).parent().find("label#error").html("");
    $gender.focus();
},
    yearRange: '1950:2006',
    changeMonth: true,
changeYear: true,           
showOtherMonths: true,          
selectOtherMonths: true,
dateFormat: 'yy-mm-dd',
defaultDate: d
}); 
```

# javascript - 使用 Vows.js 进行集合测试

> ID：14740056
> 
> 赞同：1
> 
> 时间：2013-02-06T22:24:58.163
> 
> 标签：javascript, node.js, vows

我正在尝试使用 Vows.js 对集合中的每个项目运行单元测试，并且我花了很多时间让它工作。这是我目前所拥有的。

```
'the variations objects': {
  topic: function() {
    var promise = new(events.EventEmitter),
      variations = JSON.parse(body).variations;

    for(var i = variations.length - 1; i >= 0; i--) {
      promise.emit("success", variations[i]);
    };

    return promise;
  },
  'should have an x': function(topic) {
    should.exist(topic.x);
  },
  'should have an action on the add_to_cart object if the product is IN_STOCK': function(topic) {
    if(topic.x.id === 'TEST'){
      should.exist(topic.x.action)
    }
  }
} 
```

这似乎正在工作。但是，当我运行测试时，我得到了 34 个通过和 1 个错误。Vows 并没有指出哪个测试出错了。我不觉得使用 an`EventEmitter`是正确的选择，但我不确定如何为给定集合中的每个对象创建一个新主题。

# javascript - javascript的媒体查询

> ID：14740059
> 
> 赞同：1
> 
> 时间：2013-02-06T22:25:10.270
> 
> 标签：javascript, jquery, jquery-ui, jquery-mobile, media-queries

在javascript中我给出了立方体大小....如何减小iphone屏幕的立方体大小是否可以使用javascript中的媒体查询来减小立方体大小....如何将iphone屏幕的立方体大小设置为50

[http://jsfiddle.net/XNaYj/](http://jsfiddle.net/XNaYj/)

```
Gallery = {
        _config: {
            speed: 500,
            size: 100,
            lightbox: !0,
            closeOnEsc: !0,
            animation: "default",
            slideshow: !1,
            slideshow_speed: 3E3,
            cube_speed: 1E3
        }, 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T22:30:15.700

等效于以下 CSS 的 JavaScript：

```
@media all and (max-width:360px) {
    ...
} 
```

是：

```
if( (window.innerWidth || document.documentElement.clientWidth) <= 360) {
    ...
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T22:28:21.227

进行浏览器或设备嗅探通常不是一个好主意，特征检测可能会更好，但要回答这个问题，例如：

```
Gallery = {
    _config: {
        speed: 500,
        size: 100,
        lightbox: !0,
        closeOnEsc: !0,
        animation: "default",
        slideshow: !1,
        slideshow_speed: 3E3,
        cube_speed: 1E3
   }
}

if((navigator.userAgent.match(/iPhone/i)) Gallery._config.size = 50; 
```

# javascript - javascript，无论您在哪个时区，如何获得相同的日期？

> ID：14740064
> 
> 赞同：2
> 
> 时间：2013-02-06T22:25:31.050
> 
> 标签：javascript, kendo-ui

我正在使用剑道日期选择器。我希望用户选择一个日期。我会将它保存在数据库中。

这就是问题所在。

当印度用户选择“2011 年 1 月 1 日”时。我从 kendo datepicker 得到的值是

```
LOG: investmentStartDate: Sat Jan 1 00:00:00 UTC+0530 2011 
```

将其保存到数据库后，日期更改为“2010-12-31”。我认为这是因为时区的原因，我的应用程序服务器和数据库服务器都是东部时间。

我的用户可以来自任何地方，日本、中国、印度或伦敦。有没有办法可以将这个时间转换为实际日期，无论他们住在哪个时区。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T23:07:36.740

向我们提供有关您的服务器端的更多信息。前几天我在时区和剑道方面有很多经验和麻烦。我设法克服了它，所以也许我可以提供帮助。

我遵循和大多数人喜欢的一般最佳实践是将您的服务器数据保持为 UTC 时区格式，然后在客户端添加时区差异。

它对我有用的方式是我通过 REST 服务从位于 UTC 的服务器中提取 DateTime。我有一个事件在数据源从客户端的服务器读取时间后触发，事件逻辑找出浏览器时区并将差异添加到 UTC 时间。然后，用户可以选择在他的时区中显示的时间。当他单击保存按钮时，在将更改的数据发送到服务器之前，它再次转换为 UTC 时区并以该格式发送到服务器。

# rsync - 使用 rsync 和 --log-file 选项记录错误

> ID：14740067
> 
> 赞同：3
> 
> 时间：2013-02-06T22:25:38.013
> 
> 标签：rsync, 4d-database

每当存储同步时，我们都会遇到客户的 SAN 存储和文件“消失”的问题。我们有一个自定义 4D 数据库，它正在执行一个简单的脚本，通过 rsync 将文件从一个位置同步到另一个位置。

我们正在执行的脚本是这样的：“rsync -rvuE --log-file=/tmp/rsync.log SRC DST”。问题是 rsync 报告“rsync 警告：某些文件在传输之前就消失了（代码 23）”。此错误仅显示在终端/STDOUT 和 system.log 中。但是，它不会显示在 --log-file 位置。我想将它发送到 rsync.log 因为我们读回日志以了解完成和错误并将其报告给用户。

现在这是棘手的部分，我们无法将 STDOUT 或 STDERR 重定向到日志，因为它锁定了服务器。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T19:34:03.640

你试过nohup吗？哪个将捕获标准输出和标准错误？您还可以在 system.log 文件中查找错误消息，然后将其附加到日志文件中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-12-04T13:39:30.543

我每天执行`rsync`多次备份（通过自动化工具）。我`grep`通过我的备份日志做了一个。我的日志显示`rsync`默认情况下将消失的文件记录到其日志文件中。我不使用`--log-file-format`或任何其他更改日志文件格式的选项。

它看起来像这样：

```
2012/08/17 19:00:28 [12861] file has vanished: "foo" 
```

我也可以找到那里记录的其他错误，例如由于权限而无法传输的文件。上面的日期是我仍然拥有的最旧日志文件中显示该类型错误的实际日期。我当时用的版本`rsync`是3.0.9，所以`rsync`从那个时候就一直在做。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2014-09-22T14:40:26.127

如果内存不足，4D 将生成 .tmp 文件 - 并再次删除它们。这发生在 4D 数据文件夹中。从同步中排除它。只需同步 4D 生成的备份文件。无论如何，同步打开的 4D 数据文件都会失败……服务器一直在向它写入数据。

彼得

# javascript - 在元素数组上使用 insertBefore

> ID：14740071
> 
> 赞同：1
> 
> 时间：2013-02-06T22:26:02.083
> 
> 标签：javascript, arrays, dom

我有一个元素数组，我想在遍历数组时对每个元素使用 inserBefore。它应该在数组中的每个元素之后添加要插入的元素，但它只将它添加到数组中的最后一个元素。我认为这是一个闭包问题，但即使在使用闭包之后我仍然遇到问题。在没有闭包的情况下，我通过将类名更改为数组所在的键值来测试它，并且它改变了它没有问题。

```
for(var i in elems){
                    var refElem = elems[i];

                        refElem.parentNode.insertBefore(elementToInsert, refElem.nextSibling);
                } 
```

这是减去闭包的代码。如何将 elementToInsert 添加到数组中的每个元素？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-06T23:07:28.890

> 它应该在每个元素之后添加要插入的元素

这就是问题出现的地方，您不能将一个元素多次插入 DOM。如果您尝试这样做，它只会在将元素插入某处（再次）之前从 DOM 中删除该元素。因此，您需要为循环的每一轮创建不同的元素，例如通过[克隆](https://developer.mozilla.org/en-US/docs/DOM/Node.cloneNode)您的`elementToInsert`.

顺便说一句，永远不要使用[for...in-loops 和数组](https://stackoverflow.com/q/500504/1048572)！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-06T23:22:34.353

就像 Bergi 所说，您插入的元素实际上是被添加然后从节点中删除的。

```
for(var i in elems){
    var refElem = elems[i];
    refElem.parentNode.insertBefore(elementToInsert.CloneNode(), refElem.nextSibling);
} 
```

您还可以通知参数“deep”，它也将克隆所有子节点。

[https://developer.mozilla.org/en-US/docs/DOM/Node.cloneNode](https://developer.mozilla.org/en-US/docs/DOM/Node.cloneNode)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-03-17T10:11:02.697

只是对之前的帖子进行了一点更正：

```
for(var i in elems){
    var refElem = elems[i];
    refElem.parentNode.insertBefore(elementToInsert.cloneNode(), refElem.nextSibling);
} 
```

函数 cloneNode() 以小写字母开头。

# mysql - 在 MySQL 和 HBase 中批量插入/加载

> ID：14740072
> 
> 赞同：1
> 
> 时间：2013-02-06T22:26:08.177
> 
> 标签：mysql, hbase, bulkinsert, bulk-load

我有一个具有两个进程的系统，其中一个执行单个插入，另一个执行批量插入。显然，第二个过程更快，我正在努力将第一个过程迁移到批量插入机制，但今天早上我被一位同事提出的关于“为什么批量插入比单次插入更快”的问题难住了。

那么确实，为什么批量插入比单次插入更快？

此外，鉴于它们的数据库架构完全不同，MySQL 和 HBase 中的批量插入和单次插入之间是否存在差异？我将两者都用于我的项目，并且想知道这两个数据库的批量插入和单个插入是否存在差异。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T09:29:36.477

据我所知，这也取决于`Hbase`配置。通常，批量插入意味着`List of Puts`一起使用，在这种情况下，插入（`flushing`在 habse 层中调用）会在您调用时自动完成`table.put`。单个插入可能会等待任何其他插入调用，以便在中间层进行批量刷新。但是，这也取决于配置。

另一个原因可能是任务的简单性，如果您一次有更多工作，它的 Map 和 Reduce 效率更高。文件块的迁移是针对所有输入单次决定的。但在个别插入中，这成为一个关键点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-03-19T17:43:13.953

简而言之 -**批量加载操作绕过常规写入路径。这就是为什么它很快。**
*那么，当您进行简单的逐行放置操作时，在正常写入过程中会发生什么？*
所有数据同时写入 WAL 和 memstore，当 memestore 已满时，将数据刷新到新的 HFile。
但是在 Bulkload 的情况下，它会直接写入正在运行的 hbase 集群中的 StoreFile。**没有**中间的东西...... **快速提示**- 如果您不想经常使用批量加载，它会在短时间内完成，这会给集群带来额外的负担，您可以使用 WAL false 写入以节省一些时间。但这会增加您的数据丢失机会..`Put.setWriteToWal(false)`

# .htaccess - .htaccess：在所有页面上强制 www，在一个页面上强制 https，在所有其他页面上强制 http

> ID：14740075
> 
> 赞同：0
> 
> 时间：2013-02-06T22:26:11.190
> 
> 标签：.htaccess, mod-rewrite, https

我有这个网站，example.com。我想做的是在所有页面上强制 www，在一个页面上强制 https，在所有其他页面上强制 http。

我正在使用以下 .htaccess 代码将所有 http 流量重定向到 www：

```
#Redirect to www
RewriteCond %{HTTP_HOST} ^example.com$ [NC]
RewriteRule ^(.*)$ http://www.example.com/$1 [R=301,L] 
```

以及在我的“表单”页面上设置 SSL 的以下内容：

```
#Force SSL on a specific directory
RewriteCond %{ENV:HTTPS} !on [NC]
RewriteCond %{REQUEST_URI} form
RewriteRule ^(.*)$ https://www.example.com/form/$1 [R,L] 
```

问题是，当我点击[https://example.com/](https://example.com/)时，它不会重定向到 www ( [https://www.example.com](https://www.example.com) )，尤其是 http 和 www ( [http://www.example.com](http://www.example.com) )就像我想要的那样。我试过这个：

```
#Redirect SSL to www
RewriteCond %{ENV:HTTPS} on [NC]
RewriteRule ^(.*)$ http://www.example.com$1 [R=permanent,L] 
```

但这是一个非常愚蠢的尝试，没有奏效。我怎样才能同时完成这三个？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T22:58:12.417

尝试这个：

```
# Handle nonSSL
RewriteCond %{HTTPS} on 
RewriteRule !^/?form(/|$) http://www.ravicti.com%{REQUEST_URI} [L,R=301]

# Handle SSL 
RewriteCond %{HTTPS} off 
RewriteRule ^/?form(/|$) https://www.ravicti.com%{REQUEST_URI} [L,R=301]    

# Add the missing www for both HTTP and HTTPS
RewriteCond %{HTTP_HOST} ^ravicti.com$ [NC]
RewriteCond %{HTTPS}:s (on:(s)|off:s)
RewriteRule (.*) http%2://www.ravicti.com%{REQUEST_URI} [L,R=301] 
```

# javascript - 一个场景，但有自己的相机的多个视口（three.js）

> ID：14740076
> 
> 赞同：12
> 
> 时间：2013-02-06T22:26:11.937
> 
> 标签：javascript, three.js, webgl

我有一个我想重用的场景，在两个 div 中渲染场景，每个 div 具有不同的摄像机角度。

[这个链接](https://github.com/mrdoob/three.js/issues/189)说一个场景不能在多个渲染器之间共享，并建议使用单个渲染器的多个视口。如何将多个摄像头分配给渲染器，然后获取每个摄像头显示的 DOM 元素？

谢谢

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-02-06T23:02:41.683

您想完全按照这三个.js 示例中的方式进行操作：

[https://threejs.org/examples/webgl_multiple_views.html](https://threejs.org/examples/webgl_multiple_views.html)

这使用多个视口，而不是多个 div。这确实是最好的方法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2018-06-22T14:07:10.560

我想在 2018 年更新这个答案，因为这是在寻找用户示例时谷歌的热门搜索之一。

[这已在此提交](https://github.com/mrdoob/three.js/pull/6723)中修复。添加了几个[示例](https://github.com/mrdoob/three.js/blob/master/examples/webgl_multiple_canvases_circle.html)。

将现有场景传递给另一个渲染器实例的工作方式与您现在所期望的一样。

# git - 设置不同的配置后，Git 重新推送所有内容

> ID：14740078
> 
> 赞同：0
> 
> 时间：2013-02-06T22:26:22.967
> 
> 标签：git, newline

我正在跨 Windows 和 Linux 机器进行开发。我意识到，使用 git config 时`core.autocrlf = true`，一些文件的 CRLF 从 Windows 转换为 Linux 中的 LF。

所以在我的 Windows 上，我会在一个文本文件中看到：

```
sometextCRLF
moreCRLF
hahahaCRLF
CRLF
moreCRLF
CRLF 
```

在 Linux 上：

```
sometextLF
moreLF
hahahaLF
LF
moreLF
LF 
```

我跑了之后有什么办法吗

```
git config core.autocrlf true 
```

强制推动一切，以免我的 CRLF 丢失？（我现在无法推送任何内容，因为我没有任何更改。）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T22:39:41.803

`core.autocrlf`对推送没有影响，仅对结帐有影响。如果要更改现有的工作副本，则需要检出它们。如果您想更改存储库中的文件，您需要手动更改并提交它们，然后像​​往常一样推送新的提交。

# ace-editor - 本地运行时 Chrome 中的 Ace 编辑器“SECURITY_ERR：DOM 异常 18”（无服务器）

> ID：14740090
> 
> 赞同：0
> 
> 时间：2013-02-06T22:27:56.070
> 
> 标签：ace-editor

我现在正在尝试从文件系统运行 Ace 编辑器，在 Chrome 中我得到：

```
"SECURITY_ERR: DOM Exception 18" 
```

火狐不介意。

[在谷歌群组](https://groups.google.com/forum/#!msg/ace-discuss/oG0eenv3FbA/_O2ce4NZUBYJ)上找到这个：

> 由于同源限制，无法从 cdn 加载工作人员，您需要将它们放在您的站点上，并添加 ace.config.set("workerPath", "path/to/ace/src-min");

没有喜悦。

我正在像这样初始化编辑器：

```
<script src="js/source-editor/src-min-noconflict/ace.js" type="text/javascript" charset="utf-8"></script>
<script>
    var editor = ace.edit("editor");
    ace.config.set( "workerPath", "js/source-editor/src-min-noconflict");
    editor.setTheme("ace/theme/monokai");
    editor.getSession().setMode("ace/mode/css");
</script> 
```

我错过了一些无可救药的简单吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T20:02:14.977

这不是一个完整的解决方案，但它可能会有所帮助：

```
editor.getSession().setUseWorker(false); 
```

这会关闭工作人员，可能会破坏过程中的性能。通过检查 url 可能应该以您是否是本地文件为条件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T14:58:15.853

对于它的价值，问题消失了一个部署到服务器。

# android - 应用程序意外停止。请重试强制关闭

> ID：14740096
> 
> 赞同：0
> 
> 时间：2013-02-06T22:28:30.733
> 
> 标签：android, android-emulator

当我尝试运行我的应用程序时，我收到错误，因为应用程序示例 2 (com.example.sample2) 已意外停止。请重试强制关闭错误。Logcat错误如下

```
02-07 03:46:52.292: I/Process(275): Sending signal. PID: 275 SIG: 9
02-07 03:47:01.045: D/AndroidRuntime(335): Shutting down VM
02-07 03:47:01.045: W/dalvikvm(335): threadid=1: thread exiting with uncaught exception        (group=0x4001d800)
02-07 03:47:01.106: E/AndroidRuntime(335): FATAL EXCEPTION: main
02-07 03:47:01.106: E/AndroidRuntime(335): java.lang.RuntimeException: Unable to instantiate activity ComponentInfo{com.example.projectsample1/com.example.projectsample1.MainActivity}: java.lang.ClassNotFoundException: com.example.projectsample1.MainActivity in loader dalvik.system.PathClassLoader[/data/app/com.example.projectsample1-1.apk]
02-07 03:47:01.106: E/AndroidRuntime(335):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2585)
02-07 03:47:01.106: E/AndroidRuntime(335):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2679)
02-07 03:47:01.106: E/AndroidRuntime(335):  at android.app.ActivityThread.access$2300(ActivityThread.java:125)
02-07 03:47:01.106: E/AndroidRuntime(335):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2033)
02-07 03:47:01.106: E/AndroidRuntime(335):  at android.os.Handler.dispatchMessage(Handler.java:99)
02-07 03:47:01.106: E/AndroidRuntime(335):  at android.os.Looper.loop(Looper.java:123)
02-07 03:47:01.106: E/AndroidRuntime(335):  at android.app.ActivityThread.main(ActivityThread.java:4627)
02-07 03:47:01.106: E/AndroidRuntime(335):  at java.lang.reflect.Method.invokeNative(Native Method)
02-07 03:47:01.106: E/AndroidRuntime(335):  at java.lang.reflect.Method.invoke(Method.java:521)
02-07 03:47:01.106: E/AndroidRuntime(335):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
02-07 03:47:01.106: E/AndroidRuntime(335):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
02-07 03:47:01.106: E/AndroidRuntime(335):  at dalvik.system.NativeStart.main(Native Method)
02-07 03:47:01.106: E/AndroidRuntime(335): Caused by: java.lang.ClassNotFoundException: com.example.projectsample1.MainActivity in loader dalvik.system.PathClassLoader[/data/app/com.example.projectsample1-1.apk]
02-07 03:47:01.106: E/AndroidRuntime(335):  at dalvik.system.PathClassLoader.findClass(PathClassLoader.java:243)
02-07 03:47:01.106: E/AndroidRuntime(335):  at java.lang.ClassLoader.loadClass(ClassLoader.java:573)
02-07 03:47:01.106: E/AndroidRuntime(335):  at java.lang.ClassLoader.loadClass(ClassLoader.java:532)
02-07 03:47:01.106: E/AndroidRuntime(335):  at android.app.Instrumentation.newActivity(Instrumentation.java:1021)
02-07 03:47:01.106: E/AndroidRuntime(335):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2577)
02-07 03:47:01.106: E/AndroidRuntime(335):  ... 11 more 
02-07 03:52:01.252: I/Process(335): Sending signal. PID: 335 SIG: 9 
```

最初，这个应用程序运行良好。但是几天后，它停止工作并给出上述错误。我似乎不明白出了什么问题。请帮我。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-06T22:37:57.967

你做了以下两件事之一：

1.  重命名您的活动包或类名，但未在清单中更新

或者

1.  更改了您的清单以反映不存在的活动

根据该 Activity 的完全限定类名称检查您的清单。确保它们匹配。然后转到项目-> 清理并清理您的项目。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T22:40:43.030

我认为，您在 AndroidManifes.xml 中声明了 Activity，并将其注册为默认以在您的应用程序中启动。但是，正如您在清单中声明的​​那样，您没有具有此名称的 Activity。只需在 AndroidManifest.xml 中更正活动名称

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-06T22:40:53.887

这是错误：

```
java.lang.ClassNotFoundException: com.example.projectsample1.MainActivity 
```

未找到 projectsample1 应用程序的 MainActivity 类。

如果您知道怎么做，请尝试清除 dalvik-cache。

否则，重新安装应用程序。

或者，如果您是应用程序的开发人员，如果您更改了 MainActivity 类的名称，请确保更改 Manifest.xml 文件中的类名称。

# java - 使用来自不同 jframe 的数据库连接

> ID：14740100
> 
> 赞同：1
> 
> 时间：2013-02-06T22:28:38.680
> 
> 标签：java, mysql

我在一个 jframe 中声明了这个（主要）

```
 Connection con; 
```

我想在另一个 jframe(Gegevens) 中使用相同的连接

```
 try {
        PreparedStatement stat1 = con.prepareStatement("SELECT idrecepten , p.naam , p.achternaam , m.naam , m.fabrikant , m.dosering FROM recepten r JOIN patienten p ON r.patient = p.idpatienten JOIN medicijnen m ON r.medicijn = m.idmedicijnen WHERE r.patient = ? ");
        stat1.setString(1,primarykey[0]);
        ResultSet resultaat = stat1.executeQuery();

        while(resultaat.next())
        {
           gegevens.model2.addElement(resultaat.getString(1)+" "+ resultaat.getString(2) +" "+ resultaat.getString(3)+" "+ resultaat.getString(4) +" "+ resultaat.getString(5) +" " + resultaat.getString(6));
        }

    } catch (SQLException ex) {
        System.out.println(ex);
    } 
```

如您所见，我正在从jframe（Main）填充model2，但我想在OTHER jframe（Gegevens）的构造函数中填充模型，结果相同，方法不同。但

我只想使用一个数据库连接，如果我这样做，我还是不使用相同的数据库连接：

```
 Main main = new Main(); 
```

然后使用连接

```
 main.con 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T22:32:42.663

最好的方法是构造代码，以便在`JFrame`实例化 second/other 时，将`Connection`对象作为参数传递给构造函数。

# c# - 如何将 System.Data.SQLite.dll 嵌入到我的类库中？

> ID：14740101
> 
> 赞同：0
> 
> 时间：2013-02-06T22:28:41.423
> 
> 标签：c#, sqlite

我正在为 SQLite 构建一个类库，当我构建项目时 System.Data.SQLite.dll 作为一个独立的 dll 文件出现，我需要将它与我的类库合并到一个单独的 dll 文件中，我添加了 System.Data .SQLite.dll 作为资源然后，添加/现有项，然后将其添加为嵌入资源

然后我把这个静态构造器放在我的命名空间的开头

```
static SimpleClass()
{
    AppDomain.CurrentDomain.AssemblyResolve += (sender, args) =>
    {
        if (new AssemblyName(args.Name).Name.ToLowerInvariant() == "System.Data.SQLite")
        {
            String resourceName = "SQLlite." + new AssemblyName(args.Name).Name + ".dll";
            using (var stream = Assembly.GetExecutingAssembly().GetManifestResourceStream(resourceName))
            {
                Byte[] assemblyData = new Byte[stream.Length];
                stream.Read(assemblyData, 0, assemblyData.Length);
                return Assembly.Load(assemblyData);
            }
        }
        else
        {
            return null;
        }
    };
} 
```

这给了我诸如错误 CS1518 之类的错误：预期的类、委托、枚举、接口或结构感谢你们的任何帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T22:35:04.230

如果您想从两个组装一个，您可以尝试[ILMerge](http://www.microsoft.com/en-us/download/details.aspx?id=17630)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T02:04:35.410

这最终会失败。System.Data.SQLite 是 SQLite.Interop.dll 的 PInvoke 包装器，它是一个非托管 dll，在 .net 中无法解析。

# apache-flex - 遍历来自 XML 文件的数组列表

> ID：14740107
> 
> 赞同：0
> 
> 时间：2013-02-06T22:28:58.883
> 
> 标签：apache-flex

我正在阅读附件图像中显示的 XML 文件。我正在使用 URLRequest 阅读它，它可以正常工作。我想做的下一件事是用所有“项目”节点填充一个数组列表。我正在将 XML 转换为数组，但源将项目显示为位于 [0] 节点中，并且数组列表的长度为 1。

![在此处输入图像描述](../Images/dceb7875ff8f4de63e194ef3bf8da525.png) ![在此处输入图像描述](../Images/08afbb1fa5f5f1d8b24b3e29ee8edd2f.png)

这样做的正确方法是什么，以便我可以遍历arraylist中的所有项目？

```
private var xmlParameters:XML
private var xmlStoryMap:XMLList;

protected function application1_creationCompleteHandler(event:FlexEvent):void
{
    var params:Object;
    var xmlLoader:URLLoader = new URLLoader();

    xmlLoader.addEventListener(Event.COMPLETE, xmlloader_onComplete_Handler);
    xmlLoader.addEventListener(IOErrorEvent.IO_ERROR,IOError_handler);

    xmlLoader.load(new URLRequest("myXML.xml"));    
}

protected function xmlloader_onComplete_Handler(event:Event):void
{
    var loader:URLLoader = URLLoader(event.target)

    xmlParameters = new XML(loader.data);
    xmlStoryMap = xmlParameters.projects;

    initializeMap();
}

protected function initializeMap():void
{
    var testlist:ArrayList = new ArrayList();
    testlist.source = convertXMLtoArray(xmlStoryMap.project);

}

private function convertXMLtoArray(file:String):Array
{
    var xml:XMLDocument = new XMLDocument(file);
    var decoder:SimpleXMLDecoder = new SimpleXMLDecoder;
    var data:Object = decoder.decodeXML(xml);
    var array:Array = ArrayUtil.toArray(data);

    return array;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T09:24:15.893

为了循环浏览项目，

```
for each(var projectXML:XML in  xmlParameters.projects.project)
{
     // Do operation
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T11:11:43.103

如果您不想出现循环问题，请改用它

```
 protected function xmlloader_onComplete_Handler(event:Event):void
        {
            var loader:URLLoader = URLLoader(event.target)
            var xmlString:String = loader.data;

            initializeMap(xmlString);
        }

        protected function initializeMap(xmlString:String):void
        {
            var testlist:ArrayList = new ArrayList();
            testlist.source = convertXMLtoArray(xmlString);
        }

        private function convertXMLtoArray(xmlString:String):Array
        {
            var xmlDoc:XMLDocument = new XMLDocument(xmlString);
            var decoder:SimpleXMLDecoder = new SimpleXMLDecoder();
            var data:Object = decoder.decodeXML(xmlDoc);

            return ArrayUtil.toArray(data.storymap.projects.project);
        } 
```

# delphi - 我可以将 Delphi TEdit（或类似的）简单地连接到类的已发布属性吗？

> ID：14740109
> 
> 赞同：3
> 
> 时间：2013-02-06T22:29:06.213
> 
> 标签：delphi, editing, rtti, livebindings

我多年来一直有这个问题，但也许现在可以轻松解决它。我需要布置一个带有多个 TEdit 控件的面板，每个控件都应该显示并允许编辑类的已发布属性。传统上，我会使用 TEdit（或来自 Raize 或 Developer Express 库的数字衍生物）并“连接” OnKeyPress 和 OnExit 事件，在编辑文本和属性类型等之间进行转换等。所有这些都按照 Delphi 1（其生日大快了！）。

这些天我们有 RTTI 和 Live Bindings，所以理想情况下，我想要一种告诉 TEdit（或其他类似控件）关于单个已发布属性的方法，然后将建立必要的 2 路链接，而无需所有的接线和转换. 对象检查器当然可以完成这项工作，但我希望使用带标签的编辑控件进行更正式的自定义布局。简单地处理整数、浮点数和字符串就可以了，像 TDBEdit 这样字段名称是我的属性名称的东西会很棒。

我已经查看了“Bind Visually”设计器（我有 XE3），但我不确定。任何人都可以建议这样做的方法吗？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T10:20:49.523

Ken White 和 Rufo 爵士的上述评论很好地指出了使用 Live Bindings 在彼此之间连接组件，但我需要将控件连接到我自己的对象，该对象是在运行时创建的。进一步挖掘使我找到了[这篇出色的文章](http://members.adug.org.au/2012/03/16/using-livebindings-to-connect-the-ui-to-objects/)，它几乎可以满足我的需求。Jarrod 的 TBoundObject 旨在成为您自己的对象的祖先，但通过在构造函数中包含一个 FObject 字段并用 FObject 替换他对“Self”的使用，您可以实例化一个独立的“TObjectBinder”，它可以轻松地将各种标准控件连接到已发布特性。

# sql - VB6 SQL连接字符串设置问题

> ID：14740119
> 
> 赞同：0
> 
> 时间：2013-02-06T22:29:58.157
> 
> 标签：sql, vb6

我正在尝试运行一个旧的 VB6 应用程序，以便我可以看到它是如何工作的，并在 MVC Web 应用程序中复制它的功能。为了让它运行，我必须创建一个测试数据库。为了获取其中的所有数据，我从当前数据库恢复了备份，因此它是应用程序当前运行的环境的精确副本。为了完成这项工作，我认为我必须更新连接字符串，但是每个当我尝试运行它时，我收到错误消息：“[DNETLIB][ConnecionOpen (Connect().]SQL Server 不存在或访问被拒绝。”

我当前的连接字符串是：

```
Set Cn = New ADODB.Connection
Cn.Open _
  "Provider=SQLOLEDB;" & _
  "Data Source=WIN-HO6SNPJR0ST\TestDB;" & _
  "Initial Catalog=TestDB;" & _
  "UID=Test;" & _
  "PWD=test;" 
```

用户“Test”对数据库拥有完全的管理员权限。

我在 VB6 中进行所有调试，所以我不熟悉 IDE，所以我可能会寻找一种更简单的方法来解决这个问题，而不是断点。

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T18:27:02.507

首先，您不确定是否可以从桌面连接。为此，请使用统一数据链接（我认为这就是所谓的）功能。

请按照[本文](http://www.vbrad.com/article.aspx?id=81)中的说明进行操作，这将确保您甚至可以从 PC 进行连接。一旦您可以连接，它将为您提供可以在 VB 应用程序中使用的确切连接字符串。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T12:34:01.733

我会检查 WIN-HO6SNPJR0ST\TestDB 是否为远程连接启用了 TCP/IP 并检查 WIN-HO6SNPJR0ST 上的防火墙是否允许访问端口 1433（默认 sql 端口）

Rgds

J。

# c# - EntityFramework 5 过滤包含的导航属性

> ID：14740121
> 
> 赞同：15
> 
> 时间：2013-02-06T22:30:08.287
> 
> 标签：c#, linq, entity-framework-5

我想找到一种使用 Linq 将导航属性过滤到相关实体子集的方法。我知道围绕这个主题的所有答案都建议使用匿名选择器，例如：

```
query.Where(x => x.Users.Any(y => y.ID == actingUser.ID))
    .Select(x => new
    {
        Event = x,
        Discussions = x.Discussions.Where(actingUser.GenerateSecurityFilterFor<Domain.Discussion>())
    })
    .OrderBy(x => x.Discussions.Count())
    .ThenBy(x => x.Event.Name); 
```

但是，由于我们的查询生成的一般性质，这远不理想，并且如果您抛出分析器，也会产生非常可怕的 sql 查询。

我希望能够完成类似的事情：

```
query.Include(x => x.Discussions.Where(actingUser.GenerateSecurityFilterFor<Domain.Discussion>()))
        .OrderBy(x => x.Discussions.Count())
        .ThenBy(x => x.Name); 
```

我意识到这在 EF5（或任何版本）中不受支持，但必须有一种方法可以通过 Linq 完成对结果集的约束，而无需深入研究匿名类型选择语句。

我试图做一些事情：

```
query.GroupJoin(discquqery, 
    x => x.ID,
    x => x.Event.ID, 
    (evt, disc) => evt.Discussions = disc.Where(actingUser.GenerateSecurityFilterFor<Domain.Discussion>())).ToList(); 
```

但是，您不能在 lambda 表达式中进行赋值，并且在此处选择匿名类型会导致与使用 select 时相同的困境。

我想我无法理解为什么 EF 不提供一种方法（我可以找到）来生成：

```
SELECT
    --Properties
FROM Event e
LEFT OUTER JOIN Discussions d
    ON e.ID = d.EventID AND --Additional constraints
WHERE
    --Where conditions
ORDER BY
    --Order Conditions 
```

在 SQL 中约束连接非常简单，还必须有一种方法可以通过 Linq 来实现。

PS：我搜索了堆栈、MSDN、专家交流等。请注意这不是重复的。任何甚至涉及到这个主题的东西要么有一个“无法完成”的答案，要么根本没有答案。没有什么是不可能的……包括这个。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-07T09:09:20.240

> 任何甚至涉及到这个主题的东西要么有一个“无法完成”的答案，要么根本没有答案。没有什么是不可能的……包括这个。

当然。有可能的。您可以下载 EF 源代码并自行添加此功能。这将对开源项目和社区做出巨大贡献。我相信 EF 团队会很乐意为您提供帮助。

使用当前版本“无法完成”[就是答案](http://data.uservoice.com/forums/72025-entity-framework-feature-suggestions/suggestions/1015345-allow-filtering-for-include-extension-method)。您可以使用投影到匿名或特殊未映射类型，如您在问题开头所述。其他选项是单独的显式查询以加载单个父项的相关实体或单独的查询以加载所有父项的相关实体。

单亲的负载关系：

```
context.Entry(event)
       .Collection(e => e.Discussions)
       .Query()
       .Where(d => ...)
       .Load(); 
```

加载所有父母的关系（需要关闭延迟加载）：

```
// load all parents
var events = query.Where(e => ...).ToList();

// load child filtered by same condition for parents and new condition for children
childQuery.Where(d => e.Event ... && d.Something ...).Load(); 
```

第二种解决方案要求子级将导航属性返回给父级（用于构造最初用于加载父级的相同查询条件）。如果您正确配置了所有内容并且附加了实体，EF 应该自动修复您在父实体中的关系（集合）（但它不会将动态代理中的集合标记为已加载，这就是您不能将其与延迟加载一起使用的原因）。

# asp.net - 错误找不到第 2 列 dr = ds.Tables[0].Rows[0]

> ID：14740123
> 
> 赞同：0
> 
> 时间：2013-02-06T22:30:14.230
> 
> 标签：asp.net, azure, dataset, datarow

我一直在寻找答案，因为这个代码在一小时前工作得很好，而且我没有进行任何编辑，所以如果你们中的任何人能提供帮助，我会很困惑地识别错误，我将不胜感激。提前致谢。

我已经检查过，SQL 查询没有错误，正如我所说的工作正常 dr 全局定义为：DataRow dr = new DataRow(); 并且 MyTable 也被全局定义为

```
DataTable MyTable = new DataTable(); 
```

这是相关代码：

```
sentencia = "select * from Facturas" + Session["sociotabla"].ToString() + " where IdFactura = " + Session["idFactura"].ToString();
ds = bd.Consulta(sentencia);
if (ds != null)
{
    dr = MyTable.NewRow();
    dr = ds.Tables[0].Rows[0];
    LimpiarControles();
    tbFactura.Text = dr[0].ToString();
    ListItem li;
    for (int i = 0; i < ddlCliente.Items.Count; i++)
    {
        li = ddlCliente.Items[i];
        if (li.Value == dr[2].ToString()) //Error here Cannot find Column 2
        {
            ddlCliente.SelectedIndex = i;
            Session["idCliente"] = dr[2].ToString();
            break;
        }
    } 
```

# javascript - javascript构造函数之间的区别

> ID：14740127
> 
> 赞同：0
> 
> 时间：2013-02-06T22:30:19.573
> 
> 标签：javascript

我对这些javascript中的哪个（如果有的话）初始化使用有点困惑，据我所知，它们都做同样的事情。在某些情况下我应该使用其中一种吗？Mt 项目要求我将多个函数和命名空间封装在一个对象中，这样我们就不会用变量名混淆全局范围，我特别不清楚 +function(){}(); 之间的区别；和（函数（））（）；

任何帮助将不胜感激。请记住，最终目标是将我们所有的函数封装在一个命名空间中。IE MyCompany.function, MyCompany.Namepsace.Function ...

```
<script>
    var Ford = {};
    +function() {
        Ford.start = function() {
            console.log("Ford just started");
        };
    }();
    Ford.start();
</script>

<script>
    var Honda = {};
    (function() {
        Honda.start = function() {
            console.log("Honda just srtarted");
        };
    })();
    Honda.start();
</script>

<script>
    var Toyota = function() {
        return {
            start: function() {
                console.log("Toyota just strted");
            }
        };
    }
    var car = new Toyota();
    car.start();
</script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T23:37:26.987

Javascript 函数仅在使用`new`关键字时作为构造函数调用。`new`创建一个新的对象实例，从构造函数的原型继承，并使`this`关键字的上下文成为新创建的对象实例。因此，如果您不使用原型来继承属性或使用关键字`this`在构造函数中创建新属性 - 您实际上不需要使用构造函数。

我认为您正在寻找的是使用[立即调用函数实现的](http://benalman.com/news/2010/11/immediately-invoked-function-expression/)[模块模式](http://www.adequatelygood.com/2010/3/JavaScript-Module-Pattern-In-Depth)。您的前两个示例都使用立即调用的函数。我相信风格是首选。javascript解析器的周围和原因都期望*函数表达式*而不是*函数声明*，这允许尾随调用函数。除了可读性稍差之外，还可能改变函数的返回值。`(function(){}());``+function(){}();``()``+`**`()``+`**

 **我认为您想要对此进行一些更改（[从链接复制](http://www.adequatelygood.com/2010/3/JavaScript-Module-Pattern-In-Depth)）：

```
var MODULE = (function () {   
    var module = {};
    var privateVariable = 1;

    function privateMethod() {
        // ...
    }

    module.moduleProperty = 1;
    module.moduleMethod = function () {
        // ...
    };

    return module;
}()); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T22:42:22.160

虽然所有这些都是有效的 JS，但您所做的假设让我相信您可能不了解 JS 的工作原理。前两个示例根本不是通常意义上的构造函数......它们是一种模块模式，但甚至不是。你可以把它浓缩成

```
var Honda = {}; 
Honda.start = function() { console.log("Honda just started"); } 
```

忘记自动执行功能。上面显示的内容类似于您认为的`static`其他语言中的函数：

```
public class Honda {
    public static void start() { Console.WriteLine("Honda Just Started"); }
} 
```

如果您想要一个实例函数，您需要附加到原型或`this`构造函数中的关键字：

原型：

```
var Honda = function() {}
Honda.prototype.start = function() { console.log("Honda just started"); } 
```

这个：

```
var Honda = function() {
    this.start = function(){
        console.log("Honda just started");
    }
} 
```

你的最后一个例子，丰田表明你对函数构造函数的工作方式有一个基本的误解。您的对象已被丢弃，作为回报，您会得到一些可能已写入的对象字面量：

```
var Toyota = {
    start: function(){
        console.log("Toyota just started");
    }
} 
```

您（可能）想要的是我在上面的本田示例中解释的“这个”模式：

```
var Toyota = function() {
    this.start = function() {
        console.log("Toyota just started");
    }
} 
```

最后，在编写“命名空间”函数库时，模块模式可能是你最好的朋友。这使您无需正式的构造函数/原型等即可维护私有状态：

```
var MyCompany = {};

//car module
(function(ns){
    var module,
        _isStarted;

    function start() { console.log('start'); _isStarted = true; }
    function stop() { console.log('stop'); _isStarted = false; }
    function isStarted() { return _isStarted; }

    module = {
        start: start,
        stop: stop,
        isStarted: isStarted
    }

    ns.CarModule = module;
}(MyCompany));

//use:
MyCompany.CarModule.start();
if(MyCompany.CarModule.isStarted()) { MyCompany.CarModule.stop(); } 
```**

# java - java中的字节数组

> ID：14740128
> 
> 赞同：4
> 
> 时间：2013-02-06T22:30:34.277
> 
> 标签：java, hex, byte

嘿，我需要将以下十六进制值存储在一个字节数组中 - 0xCAFEBABEDEADBEEF。

所以我试着像这样存储它。

```
byte[] v0 = {11001010,11111110,10111010,10111110,11011110,10101101,10111110,11101111}; 
```

其中 11001010 是二进制的 CA，11111110 是二进制的 FE，等等。

但是我得到一个错误，说 11001010 是一个 int，所以我认为这是因为字节在 java 中是有符号字节，我们只能有 +127 和 -128 之间的值。

那么有没有办法我可以在java中做到这一点（也许使用无符号字节......如果它们存在！？）谢谢大家。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-06T22:32:50.463

放在`0b`号码前面。您可能还必须转换为`byte`：

```
byte[] v0 = {(byte)0b11001010,(byte)0b11111110,...}; 
```

前缀表示它`0b`是二进制数。

如果你想让它更容易阅读，你可以使用`0x`十六进制：

```
byte[] v0 = {(byte)0xCA,(byte)0xFE,(byte)0xBA,(byte)0xBE,...}; 
```

如果您使用的 Java 版本低于 7，这是一种方法（二进制形式）：

```
byte[] v0 = {Byte.parseByte("11001010", 2),...); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-06T22:34:32.113

文字`11001010`表示`int`类型和价值的小数`11,001,010`- 即 11 百万和一些东西。

如果您使用的是**Java 7**，则可以使用前缀定义二进制文字`0b`，例如`0b11001010`. 为了提高可读性，您可以在值中加上下划线，例如`0b_1100_1010`.

但是，请注意，即使是这种二进制（或十六进制）文字的类型仍然是`int`. 这一点，再加上字节在 Java 中（不幸地）被**签名**（因此它们的值在 range 中`-128 to 127`）导致了一个问题，即值大于的文字`127`必须手动转换为`byte`：

```
// 0b_1001_0001 or 0x91 is 145 in decimal
byte b1 = (byte) 0b_1001_0001;
byte b2 = (byte) 0x91; 
```

但是，此类字节的值将是`-111`(145 - 256)。要取回无符号值，您需要手动将模块 (256) 添加到该值：

```
int i1 = b1 + 256;
int i2 = b1 & 0xff;
// both i1 and i2 are 145 
```

有关更多信息，请参阅[此问题](https://stackoverflow.com/questions/3516021/literal-syntax-for-byte-arrays-using-hex-notation)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-06T22:33:27.257

如果逐字节写入，您可以使用：

```
byte[] v0 = {0b11001010, 0b11111110, 0b10111010, ... } 
```

或者

```
byte[] v0 = {0xCA, 0xFE, ... } 
```

# javascript - 过滤 Sencha Touch 2 存储以将字段与 int 值完全匹配

> ID：14740129
> 
> 赞同：0
> 
> 时间：2013-02-06T22:30:40.227
> 
> 标签：javascript, regex, filter, sencha-touch-2, datastore

我正在尝试过滤 ST2 商店以准确查找具有特定 ID 的项目。默认情况下，ST2 使用 LIKE 运算符过滤存储，这不适用于查找精确的 int (id) 匹配项。经过一番搜索，我发现我需要使用正则表达式来执行此操作，但我无法找出正确的正则表达式。这是我的代码：

```
var categoriesStore = Ext.getStore('categories');
var category_id = this.config.data.catId;
categoriesStore.filter('category_id', **regex pattern here**); 
```

我没有运气就尝试了以下方法：

```
/^category_id$/ 
```

和

```
"/^"+category_id+"$/" 
```

我确信我非常接近。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T23:00:07.220

当您将模式传递给过滤器时，您不需要将开始/结束斜杠放入正则表达式模式中，这是某些语言/命令行工具中使用的分隔符。

这应该可以正常工作：

```
"^"+category_id+"$" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T23:42:03.503

还有一个exactMatch参数可以在filter对象中设置：[Filtering a Ext.data.Store by a specific id return multiple results](https://stackoverflow.com/questions/5195190/filtering-a-ext-data-store-by-a-particular-id-returns-multiple-results/5195241#5195241)

# django - django-nonrel：在 ForeignKeys 的 LisftField 中添加元素

> ID：14740130
> 
> 赞同：0
> 
> 时间：2013-02-06T22:30:41.703
> 
> 标签：django, mongodb, foreign-keys, django-nonrel, listfield

我正在尝试在 django-nonrel 中实现一个外键列表（我使用 mongo 作为数据库）。

## 这是代码：

```
# models.py
from django.db import models
from django_mongodb_engine.contrib import MongoDBManager
from djangotoolbox.fields import ListField

class FriendList(models.Model):
    objects = MongoDBManager()
    list = ListField(models.ForeignKey('AWUser'))

    def add_friend(self, awuser):
        # awuser must be an instance of AWUser - I removed tests for more clarity
        self.list.append(awuser)
        self.save()

class AWUser(models.Model):
    objects = CustomUserManager()
    user = EmbeddedModelField('User')
    friends = EmbeddedModelField('FriendList') 
```

问题是当我调用*user.friends.add_friend(user1)*时，出现错误*"AttributeError: 'str' object has no attribute '_meta'"*。

## 突破性示例（使用 ./manage shell 控制台制作）：

```
$>user = AWUser.objects.all()[0]
$>user1 = AWUser.objects.all()[1]
$>user.friends.add_friend(user1)
#ask me if you need the complete error - I don't put it more more clarity
AttributeError: 'str' object has no attribute '_meta' 
```

我基本上需要的是创建朋友列表。
如果您认为我的不好，请随时推荐不同的实现。:) 我希望我的实现能够正常工作......
另外，为了更清晰，我没有放置 AWUser 的所有变量，但我可以在必要时添加它们。

## 相关项目依赖：

*   django 1.3.1（安装为 django-nonrel）
*   django-mongodb-engine 0.4.0
*   djangotoolbox==0.9.2
*   项目清单
*   pymongo==2.1.1

谢谢你的帮助。

## 更新：

我尝试按照帖子“ [ListField with ForeignField in django-nonrel](https://stackoverflow.com/questions/14101834/listfield-with-foreignfield-in-django-nonrel?rq=1) ”中所述更改代码，但我仍然遇到相同的错误...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-08-07T15:11:16.037

根据 Django MongoDB Engine 文档，它建议使用 djangotoolbox 中的 EmbeddedModel：

```
from djangotoolbox.fields import ListField, EmbeddedModelField

class Post(models.Model):
    ...
    comments = ListField(EmbeddedModelField('Comment'))

class Comment(models.Model):
    text = models.TextField() 
```

编辑：忘记链接：[http ://django-mongodb-engine.readthedocs.org/en/latest/topics/embedded-models.html](http://django-mongodb-engine.readthedocs.org/en/latest/topics/embedded-models.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T00:43:31.247

我实际上只是想出了什么问题。在 Listfield 中，显然不可能将外键类类型声明为字符串。奇怪......
如果它发生在你身上，只需进行以下更改：

```
list = ListField(models.ForeignKey('AWUser')) 
```

变成：

```
list = ListField(models.ForeignKey(AWUser)) 
```

如果有人能很好地解释发生了什么，我很想听听:)

# php - Opencart - 搜索不分口音

> ID：14740131
> 
> 赞同：10
> 
> 时间：2013-02-06T22:30:41.490
> 
> 标签：php, mysql, database, opencart

已经写过很多次了，Opencart 的基本搜索还不够好.. 好吧，我遇到了这个问题：

当客户在我的国家（斯洛伐克（UTF8））搜索产品时，他可能不会使用变音符号。所以他/她写下“cucoriedka”却一无所获。

但是，数据库中有一个名为“čučoriedka”的产品，我也希望它显示出来，因为这就是他要找的东西。

你知道如何完成这项工作吗？越简单越好！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2015-08-23T23:01:56.433

我对斯洛伐克一无所知，对不起。但斯洛伐克语排序`utf8_slovak_ci`规则将斯洛伐克语字母`č`与`c`. （在您的电话簿中，以**Č**开头的姓氏都在以**C开头的姓氏之后吗？他们可能是这样的。MySQL 的创建者当然认为他们是这样的。）**

排序规则`utf8_general_ci`处理`č`和`c`相同。这是一个展示所有这些的 sql fiddle。[http://sqlfiddle.com/#!9/46c0e/1/0](http://sqlfiddle.com/#!9/46c0e/1/0)

如果您将包含产品名称的列的排序规则更改为`utf8_general_ci`，您将获得一个更易于搜索的表格。假设您的表被调用`product`并且其中具有名称的列被调用`product_name`。然后，此 SQL 数据定义语句将根据需要转换列。您应该查找列的实际数据类型，而不是`varchar(nnn)`像我在此示例中所做的那样使用。

```
 alter table product modify product_name varchar(nnn) collate utf8_general_ci 
```

如果您无法更改表，那么您可以更改 WHERE 子句使其像这样工作，明确指定排序规则。

```
WHERE 'userInput' COLLATE utf8_general_ci = product_name 
```

但这比更改列排序规则搜索起来要慢。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-08-23T22:06:02.357

你可以使用MySQL`SOUNDEX()`的`SOUNDS LIKE`功能。

这些函数比较语音。

除了英语以外，soundex 的准确性值得怀疑。但是，如果我们像这样使用它，它可以得到改进

```
select soundex('ball')=soundex('boll') from dual 
```

`SOUNDS LIKE`也可以使用。

将两者结合使用`SOUNDEX()`将`SOUNDS LIKE`提高准确性。

请参阅 MySQL 文档以获取详细信息或[mysql-sounds-like-and-soundex](http://www.codeworth.com/blog/database/mysql-sounds-like-and-soundex/)

# c++ - 使用 -1 初始化结构或数组的无符号 {} 初始化

> ID：14740132
> 
> 赞同：15
> 
> 时间：2013-02-06T22:30:41.947
> 
> 标签：c++, c, c++11, initialization, narrowing

**真的很简短**

如何创建一个所有位都设置的无符号常量？

...您可以使用它来初始化带有 { } 的字段，

...没有从 GCC 4.7.2 收到 -Wnarrowing 警告。

不满意的有以下几点：

```
 struct U { unsigned ufield; };
 struct Uc { unsigned char ufield; };
 struct ULL { unsigned long long ufield; }; 
 struct U32 { unsigned ufield; }; 
 struct U64 { uint64_t ufield; }

 typedef 
    //any of the above U Uc ULL U32 U64, we will arbitrarily choose:
    U Ueg;

 // somewhere far away
 Ueg u = {-1};   // well defined by C standard, GCC 4.7.2 -Wnarrowing warning
 Ueg u = {~0U};  // finit width constant, warnings in some places, silent non-all-1s-mask others
 Ueg u = {~0ULL};  // ditto
 Ueg u = {-1ULL};  // ditto 
```

基本上，编写 {} 初始化的用户不知道 ufield 的类型。他只知道它是无符号类型，但不知道它有多宽。不完全是哪种无符号类型。

*** 我想要尽可能简单优雅的语法的另一个原因 ***

我不妨提点别的：这里的“用户”实际上并不是在编写 C 或 C++ 程序。他正在编辑一个配置文件。一个程序，一个简单的 Perl 或 Python 脚本，处理配置文件，并生成 C 代码。这个程序不是很复杂，目前通过的文本块看起来像

```
 Foo: {-1,2,3}; 
```

生成 typedef struct Some_Struct { unsigned a; 无符号 b，无符号 c；} Some_Struct = {-1,2,3}; // 同上

基本上，我希望能够为“设置此无符号值中的所有位”的文字提供一种用户友好的语法。无需知道未签名的有多大。并且没有处理配置文件的程序变得太复杂。

以免潜在的答案提供者抱怨这是一个新的约束，不现实等：
我在模板方面遇到了完全相同的问题。即对于模板类型，我想在其中编写一个“无符号的任何宽度，全为 1”的文字。在模板中，我可能更愿意做一些丑陋的、丑陋的、丑陋的语法，显然可以做到这一点：但我真的希望有一个简单、优雅的语法。

***真正的问题***

问：有什么方法可以创建一个“全为 1”而不触发 GCC 4.7.2 警告的常量？

**简短的**

我遇到了一个程序，该程序使用文字常量 -1 来初始化结构的字段，例如

```
> cat ./-1u.cpp
#include <stdio.h>

struct U { unsigned ufield; } ustruct = { -1 };

int main(int argc, char** argv)
{
   printf("ustruct.ufield    = %08x\n",ustruct.ufield);
} 
```

尽管早期版本的 GCC 毫无警告地接受了这一点，但相当新的 GCC 4.7.2 版本提供了一个警告：

```
> /SOME-PATH/import/gcc/gcc-4.7.2.pkg/installdir/bin/g++ -Wall ./-1u.cpp
./-1u.cpp:3:46: warning: narrowing conversion of '-1' from 'int' to 'unsigned int' inside { } is ill-formed in C++11 [-Wnarrowing] 
```

注意：这只是一个警告。将 -1 转换为无符号的结果在 C/C++ 标准中得到了很好的定义：

```
> ./a.out
ustruct.ufield    = ffffffff 
```

我不喜欢警告，所以我想消除这个烦人的警告。我不喜欢使用适用于整个文件的#pragmas，因为这可能会禁用对真正错误的警告。

（顺便说一句，只有在初始化字段时才会收到此警告。在初始化非字段时不会

```
unsigned u = -1;  // no cmpiler warning. 
```

正在做

```
struct U { unsigned ufield; } ustruct = { ~0U }; 
```

使错误沉默。

但有人指出，如果字段的类型不是无符号的，而是 uint64_t，那么 ~0U 提供的结果与 -1 不同：0x00000000FFFFFFFF 而不是 0xFFFFFFFFFFFFFFFF。（即 32 位 1，而不是 64 位 1。）

struct U 和初始化代码可能位于完全不同的位置，我们希望能够在不通知用户的情况下增加字段的大小，即位掩码。目的是获得正在使用的任何无符号类型的“全 1 掩码”。

相似地

```
struct U { unsigned ufield; } ustruct = { -1u }; 
```

使错误沉默。（令我惊讶的是 - 我不知道 -1 可以被认为是无符号的。）

但也是一个有限宽度常数。

**细节**

这是一个测试程序。（顺便说一句，我要问的是使用有符号文字常量 -1 来初始化无符号成员。其他警告只是测试。你不需要向我解释 64 位数字不需要适合 32 位。）

```
sh-3.2$ cat ./-1u.cpp 

#include <stdio.h>

unsigned um1 = -1;

unsigned un0u = ~0u;

unsigned un0ull = ~0ull;

struct Foo {
  unsigned um1;
  unsigned un0u;
  unsigned un0ull;
};

Foo foo = { -1, ~0u, ~0ull };

int main(int argc, char** argv)
{
  printf("um1    = %08x\n",um1);
  printf("un0u   = %08x\n",un0u);
  printf("un0ull = %08x\n",un0ull);

  printf("foo.um1    = %08x\n",foo.um1);
  printf("foo.un0u   = %08x\n",foo.un0u);
  printf("foo.un0ull = %08x\n",foo.un0ull);
}

sh-3.2$ /mips/proj/performance/import/gcc/gcc-4.7.2.pkg/installdir/bin/gcc -Wall ./-1u.cpp
./-1u.cpp:7:20: warning: large integer implicitly truncated to unsigned type [-Woverflow]
./-1u.cpp:15:28: warning: narrowing conversion of '-1' from 'int' to 'unsigned int' inside { } is ill-formed in C++11 [-Wnarrowing]
./-1u.cpp:15:28: warning: narrowing conversion of '18446744073709551615ull' from 'long long unsigned int' to 'unsigned int' inside { } is ill-formed in C++11 [-Wnarrowing]
./-1u.cpp:15:28: warning: large integer implicitly truncated to unsigned type [-Woverflow]

sh-3.2$ /mips/proj/performance/import/gcc/gcc-4.7.2.pkg/installdir/bin/g++ -Wall ./-1u.cpp
./-1u.cpp:7:20: warning: large integer implicitly truncated to unsigned type [-Woverflow]
./-1u.cpp:15:35: warning: narrowing conversion of '-1' from 'int' to 'unsigned int' inside { } is ill-formed in C++11 [-Wnarrowing]
./-1u.cpp:15:35: warning: narrowing conversion of '18446744073709551615ull' from 'long long unsigned int' to 'unsigned int' inside { } is ill-formed in C++11 [-Wnarrowing]
./-1u.cpp:15:35: warning: large integer implicitly truncated to unsigned type [-Woverflow] 
```

在早期的编译器中不会出现：

```
sh-3.2$ /usr/bin/g++ -Wall ./-1u.cpp
./-1u.cpp:7: warning: large integer implicitly truncated to unsigned type
./-1u.cpp:15: warning: large integer implicitly truncated to unsigned type

/usr/bin/g++ --version
g++ (GCC) 4.1.2 20080704 (Red Hat 4.1.2-51)
Copyright (C) 2006 Free Software Foundation, Inc.
This is free software; see the source for copying conditions.  There is NO
warranty; not even for MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-07T16:02:34.877

@Ali 答案的稍微更用户友好的版本：

```
#include <type_traits>

struct all_ones_type {
    template <typename T,
          typename = typename std::enable_if<std::is_unsigned<T>::value>::type>
    constexpr operator T () const
    { return static_cast<T>(-1); }
} const all_ones;

#include <iostream>

struct X {
    unsigned short a;
    unsigned long b;
    unsigned long long c;
};

int main() {
    X x = { all_ones, all_ones, all_ones };
    std::cout << x.a << "\n"
              << x.b << "\n"
              << x.c << std::endl;
} 
```

根据您在尝试转换为有符号类型时想要发生的情况，您可以更改`enable_if`以允许所有整数类型，或者使用 nice 添加另一个重载`static_assert`。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-07T08:51:54.897

这个怎么样？它仅适用于无符号类型，但问题特别指出**无符号。**（见下面 rubenvb 的评论。）

```
#include <cinttypes>
#include <iomanip>
#include <iostream>
#include <limits>
#include <type_traits>

template <typename T>
T all_bits_one() {
    static_assert(std::is_unsigned<T>::value, "the type must be unsigned");
    return std::numeric_limits<T>::max();
}

struct Ui {
    typedef unsigned int the_type;
    the_type ufield;
};

struct ULL {
    typedef unsigned long long the_type;
    the_type ufield;
};

struct U64 {
    typedef uint64_t the_type;
    the_type ufield;
};

int main() {

    using namespace std;

    Ui  ui  = { all_bits_one< Ui::the_type>() };
    ULL ull = { all_bits_one<ULL::the_type>() };
    U64 u64 = { all_bits_one<U64::the_type>() };

    cout << hex;
    cout << "unsigned int:       " <<  ui.ufield << endl;
    cout << "unsigned long long: " << ull.ufield << endl;
    cout << "unsigned int 64:    " << u64.ufield << endl;

    //all_bits_one<int>(); // causes compile-time error if uncommented

    return 0;
} 
```

用户不必知道`the_type`它所代表的确切类型或位数。

有一些代码重复可以删除，但这需要更好地理解您的代码和您正在处理的问题。

我猜你在发布之前简化了你的代码。就目前而言，您`struct`的 s 对我来说毫无意义，一个简单的`typedef`就足够了。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-07T12:00:29.783

为什么不提供掩码和类型？

C：

```
 struct U { unsigned ufield; };
 #define U_MASK (-1U)

 // somewhere far away
 U u = {U_MASK}; 
```

C++：

```
struct U { unsigned ufield; static constexpr unsigned MASK = -1; };

 // somewhere far away
 U u = {U::MASK}; 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-02-07T12:43:21.173

除了所有花哨的模板代码，这里有一些花哨的 C++11 代码：

```
struct Foo
{
  unsigned a;
  unsigned long b;
  unsigned long long c;
};

Foo foo = { decltype(Foo::a)(-1), decltype(Foo::b)(-1), decltype(Foo::c)(-1) }; 
```

这很容易出错，但很实用。

最好的解决方案仍然是为此使用（键入）`enum (class)`。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-07T15:42:10.550

受阿里启发，但使用模板参数推导。

```
T all_bits_one(T& dummy) { return ~(T()); }
unsigned long u = all_bits_one(u); 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-02-07T16:38:37.280

其他方式

```
// C++03 and C++11
Ueg u = { (Ueg().ufield - 1) };

// C99 and C11 (works only inside of functions)
Ueg u = { (Ueg){0}.ufield - 1 }; 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-08-29T11:20:01.960

也许通过将 uint 初始化为 -1 您想要的是所有位都设置为“1”？
在这种情况下：

```
typedef uint MyUIntType;
MyUIntType mID = (MyUIntType)~0; 
```

`~`应用“1 的补码” `0`，有效地翻转其所有位。
结果将是您的 uint 类型可以容纳的最大值，这在 0 是有意义的值并且需要将变量初始化为“其他”的情况下很有用。

# recursion - 扫描仪在递归调用中无法正常工作

> ID：14740135
> 
> 赞同：0
> 
> 时间：2013-02-06T22:30:49.770
> 
> 标签：recursion, java.util.scanner

所以这是我的代码：

```
import java.util.Scanner;

public class partOne {
private static Scanner s;
public static void main(String [] args) {
    s = new Scanner(System.in);
    System.out.print("type: ");

    System.out.println(recursionPartOne(s.next()));

}
public static String recursionPartOne(String str) {
    System.out.print(str + " ");
    if (s.next() == null) {
        return str;
    } else

        return recursionPartOne(s.next());

}
} 
```

如果我给它以下内容，这就是它的输出：

```
type: this is a test run
this a run 
```

我的主要目标是让它使用递归以相反的顺序输出独立的字符串元素，但现在我不明白为什么 s.next() 调用会跳过所有其他元素以及为什么`System.out.println(recursionPartOne(s.next()));`不调用

感谢您的任何回复

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T20:58:38.993

对于您的 if 条件，我认为应该是 if (str == null) 因为如果您说 (s.next() == null)，您正在查看下一个元素，并且当 if 条件失败时，您正在执行递归另一个下一个元素。因此，您正在跳过元素。

# orchardcms - Orchard cms 工作缓慢

> ID：14740137
> 
> 赞同：1
> 
> 时间：2013-02-06T22:31:00.277
> 
> 标签：orchardcms

我已经从 bitbucket 的官方存储库下载了最新版本的果园项目，以便了解它。不幸的是我有一个性能问题。当我运行 Orchard CMS 的后端时，它运行缓慢。有没有办法解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T15:11:23.953

我通过安装缓存模块解决了这个问题。

[http://gallery.orchardproject.net/List/Modules/Orchard.Module.Contrib.Cache](http://gallery.orchardproject.net/List/Modules/Orchard.Module.Contrib.Cache)

# php - 使用带有 json 数据的文件作为数据库

> ID：14740139
> 
> 赞同：0
> 
> 时间：2013-02-06T22:31:02.663
> 
> 标签：php, json, filesystems

我正在编写一个只执行一项任务的小程序，存储需要返回的电话号码，我的目标是使用单个 Json 文件作为数据库。现在这是我的问题，因为我希望所有员工都可以访问这个程序，所以我不能使用 PHP 的 json_decode 和 _encode 函数然后使用 fwrite() 因为这样一个员工将覆盖另一个员工。所以我的问题是他们是否有任何解决方法，或者是否有人可以建议一个可以处理这个问题的库。任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T23:35:37.037

您可以通过创建互斥锁来处理此问题。如果你在 Windows 上，我建议使用[flock](http://us2.php.net/manual/en/function.flock.php)，但如果你在 *nix 上，我建议使用[sys5 semaphore](http://php.net/manual/en/ref.sem.php)。

`json_encode`顺便说一句，如果您想要一个更简单/更简单的设置，您可以通过[error_log](http://us2.php.net/manual/en/function.error-log.php)抽取输出，因为它实现了自己的互斥锁。

另一个可能更容易的选择是使用[SQLite](http://www.sqlite.org/)。

# asp-classic - 使用 VBscript 了解 ASP 中的 Do While 循环

> ID：14740142
> 
> 赞同：0
> 
> 时间：2013-02-06T22:31:14.693
> 
> 标签：asp-classic, vbscript, while-loop

```
<%
option explicit 
dim n, sum
n = 1
do while (n <= 10)
sum = sum + (n * n)
n = n + 1
loop
response.write (sum)
%> 
```

此代码的输出为 385。

我知道我们给 n 的值是 1，

然后当 n 小于或等于 10 时执行状态

那么 sum 的值是 sum plus (n 乘以 n)

然后 n 的 + 运算符为 1

循环这个直到 n 不再小于等于 10

然后输出总和 385

我不明白我们是如何得到这个输出的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T22:45:14.020

以下是计算方法。。

![在此处输入图像描述](../Images/8023b21904fdd1a1ca4238bcc75bbcb5.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T10:09:36.073

```
sum     n
0       1       n<=10 TRUE
1       2       n<=10 TRUE
5       3       n<=10 TRUE
14      4       n<=10 TRUE
30      5       n<=10 TRUE
55      6       n<=10 TRUE
91      7       n<=10 TRUE
140     8       n<=10 TRUE
204     9       n<=10 TRUE
285     10      n<=10 TRUE
385     11      n<=10 FALSE

Exits loop and print 385 
```

# matlab - 需要在matlab中加速这个循环

> ID：14740144
> 
> 赞同：0
> 
> 时间：2013-02-06T22:31:25.373
> 
> 标签：matlab

我在 matlab 中运行 MCMC 模拟，需要加快循环迭代，在分析后我发现以下循环占用的时间最多：

```
for i=1 : n
   u=0;
   for ii=0 : t-1
      if bitget(R(i),8-ii)==1
         u=bitset(u,ii+1+2*t);
      end
      if bitget(G(i),8-ii)==1
         u=bitset(u,ii+1+t);
      end
      if bitget(B(i),8-ii)==1
         u=bitset(u,ii+1);
      end
   end

   %u = Tcb(i)*Tcr(i);   
   p(1+u) = p(1+u) + 1; %kernel(X(i)*X(i)+Y(i)*Y(i));
end 
```

它是获取图像颜色分布的算法的一部分。以下是配置文件结果：

![配置文件结果](../Images/583c8a39491fe84ded9c1b1a4ec8317b.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T09:55:20.940

如果没有更多知识，我只能防止@Theoretical 描述的双重计算以及一些双重查找。

```
for i=1 : n
   u=0;
   ri = R(i);
   gi = G(i);
   ui = U(i);
   for ii=0 : t-1
      pos = 8 - ii;
      if bitget(ri,pos)
         u=bitset(u,ii+1+2*t);
      end
      if bitget(gi,pos)
         u=bitset(u,ii+1+t);
      end
      if bitget(ui,pos)
         u=bitset(u,ii+1);
      end
   end

   %u = Tcb(i)*Tcr(i);   
   p(1+u) = p(1+u) + 1; %kernel(X(i)*X(i)+Y(i)*Y(i));
end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-07T10:17:39.097

假设`R`和是`G`marices`B`类型`uint8`。怎么样

```
% flip bytes function   
flip2dec = @( x ) bin2dec( char( '0' + x(8:-1:1) ) );
flip = @( x ) flip2dec( bitget( x, 1:8 ) );
% flip all at once
fR = arrayfun( flip, R );
fG = arrayfun( flip, G );
fB = arrayfun( flip, B );

u = bitshift( uint32(fR), 16 ) + bitshift( uint32(fG), 8 ) + fB;

p = accumarray( double(u(1:n)) +1, 1 ); % up to transposing of inputs 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-06T23:43:15.770

所以你有 8 位值，你正在反转每个红色、绿色和蓝色通道中的位，然后将它们打包成一个 24 位值。

阅读 Bit Twiddling Hacks 页面条目*使用 7 次操作反转字节中的位*：

[http://graphics.stanford.edu/~seander/bithacks.html#ReverseByteWith32Bits](http://graphics.stanford.edu/~seander/bithacks.html#ReverseByteWith32Bits)

这些操作肯定比`bitget`和快`bitset`。MatLab 提供移位和按位与。

您可以创建一个执行反转的匿名函数，然后使用按位或移位并打包结果。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-06T22:41:22.830

您可以通过在循环开始时将 8-ii 和 ii+1 定义为变量来节省一些时间，从而减少重复计算。

# javascript - OSX 仪表板小部件文件 URI

> ID：14740150
> 
> 赞同：1
> 
> 时间：2013-02-06T22:31:54.007
> 
> 标签：javascript, macos, mac-dashboard-widget

我正在尝试更新已停止工作的仪表板小部件，我认为升级到 Lion 或 Mountain Lion。

该小部件有一个拖放区，用于将文件拖放到其中，然后将它们上传到 Web 服务。

但是，我的 ondrop 事件处理程序正在为 dataTransfer 对象的 text/uri-list 属性返回一个空字符串。

```
 types = event.dataTransfer.types;
    for (i=0; i < types.length; i++) alert(types[i]); 
```

这揭示了两个可能有用的属性：text/uri-list 和 public.file-url。

但是，在其中任何一个上调用 getData 总是会产生一个空字符串。

有谁知道如何获取拖放到 mac 仪表板小部件上的文件的文件 URI？

# opengl - QT5 有 Designer OpenGL Widget 吗？

> ID：14740151
> 
> 赞同：4
> 
> 时间：2013-02-06T22:31:54.420
> 
> 标签：opengl, qt-creator, qt5

我正在将一些代码从 FLTK 迁移到 QT5，但我似乎无法在图形设计中获得与 OpenGL 上下文相对应的小部件？这样的小部件存在吗？

我从官方来源构建了 QT，使用 OpenGL 选项针对 VS2012x64 并尝试添加`QT += opengl`到我的 project.pro 文件中。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-06T23:16:47.363

Qt 有 QGLWidget，但您不应该直接在设计器中使用它。相反，您应该在希望 OpenGL 小部件出现的位置放置一个*布局。*然后你继承 QGLWidget，因为无论如何你必须覆盖这个`paintGL`函数来绘制一些东西。然后在`setupUI()`调用之后实例化您的自定义 GL 小部件并将其添加到您放置在设计器中的布局中`layoutinstance->addWidget(…)`

### 由于评论而更新

主窗口.ui

```
<?xml version="1.0" encoding="UTF-8"?>
<ui version="4.0">
 <class>MainWindow</class>
 <widget class="QMainWindow" name="MainWindow">
  <property name="geometry">
   <rect>
    <x>0</x>
    <y>0</y>
    <width>335</width>
    <height>191</height>
   </rect>
  </property>
  <property name="windowTitle">
   <string>MainWindow</string>
  </property>
  <widget class="QWidget" name="centralwidget">
   <layout class="QVBoxLayout" name="verticalLayout_2">
    <item>
     <layout class="QVBoxLayout" name="verticalLayout"/>
    </item>
   </layout>
  </widget>
  <action name="actionQuit">
   <property name="text">
    <string>&amp;Quit</string>
   </property>
  </action>
 </widget>
 <resources/>
 <connections/>
</ui> 
```

myglwidget.hh

```
#include <QGLWidget>

class MyGLWidget : public QGLWidget
{ //...
}; 
```

主窗口.hh

```
#include <QMainWindow>

#include "myglwidget.hh"
#include "mainwindow_ui.hh" // generated by uic

class MainWindow : public QMainWindow, Ui_MainWindow
{

    MainWindow(QObject *parent = NULL) : 
        QMainWindow(parent)
    { // one would implement the constructor in the .cc file of course
        this->setupUi(this);

        glwidget = new MyGLWidget(this);

        // using the this pointer to emphase the location of the
        // member variable used.
        // NOTE: In the UI we defined a layout names verticalLayout
        this->verticalLayout->addWidget(glwidget);
    }

protected:
    MyGLWidget *glwidget;
}; 
```

关键是，您只使用布局。UI 中的普通常规布局，您可以在其中添加派生的 OpenGL 小部件。用户界面中没有变形，没有促销！

# ruby-on-rails - 表格张贴空白值

> ID：14740153
> 
> 赞同：0
> 
> 时间：2013-02-06T22:32:00.897
> 
> 标签：ruby-on-rails

我正在论坛系统之上构建一个私人消息系统（使用 SO 代码）。将新消息添加到私人消息对话时，正文为空白，但时间戳和用户是正确的。

系统工作如下。对话是由第一个帖子和收件人建立的。这有效，因为它是从 SO 问题 8205284 逐字复制的。

现在我正在尝试通过 user_conversation 控制器（这是构建对话的控制器）中的编辑/更新操作向对话添加新消息。

路线：

```
resources :users do
    resources :conversations, :controller => "user_conversations"
end

resources :conversations, :controller => "user_conversations" do
    resources :messages
end 
```

控制器：

```
def edit
 @conversation = UserConversation.find(params[:id]) 
 @message = Message.new
end

def update
@conversation = UserConversation.find(params[:id]) 
@message = @conversation.messages.build(params[:message])
@message.user = current_user
@message.conversation_id = @conversation.conversation_id
@message.body = "without this test line the message body is blank!"

if @message.save!
  redirect_to user_conversation_path(current_user, @conversation)
else
  redirect_to @conversation
end
end 
```

查看以显示对话和嵌入的新消息表单：

```
<%= form_for(@conversation) do |c| %>
<div class="field">
<%= c.fields_for :messages do |m| %> 
<%= m.text_area :body, placeholder: "New message..." %>
<%= m.submit "New Convo Message", class: "btn btn-large btn-primary" %>
<% end %>
</div>
<%= c.submit "New Convo Message", class: "btn btn-large btn-primary" %>
<% end %> 
```

日志输出：

```
Processing by UserConversationsController#update as HTML
Parameters: {"utf8"=>"✓",         "authenticity_token"=>"InYNwRo47ec6meePrKci3z95yTgKC4K7ytO8wFHuFns=", "user_conversation"=>{"messages"=>{"body"=>"testing"}}, "commit"=>"New Convo Message", "user_id"=>"18",   "id"=>"18"} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T22:38:50.210

我认为你需要：

```
@message = @conversation.messages.build(params[:user_conversation][:messages]) 
```

因为消息根据您的参数嵌套在 user_conversion 中。

消息对应于：

```
<%= c.fields_for :messages do |m| %> – 
```

# emacs - If语句/字符串比较

> ID：14740155
> 
> 赞同：2
> 
> 时间：2013-02-06T22:32:07.033
> 
> 标签：emacs, if-statement, comparison, elisp

我是新手`elisp`，正在尝试使用`if`语句编写一个简单的程序。

重点是在一年的学校阅读并分别返回, , , 或字符串 , , `1`（`2`默认`3`为`4`没有`0`匹配`"freshman"`时`"sophomore"`。我的代码如下：`"junior"``"senior"``0`

```
(defun yearCode(name)
    (if ( = name "freshman") 1
      (if ( = name "sophomore") 2
        (if ( = name "junior") 3
          (if ( = name "senior") 4
            (0))))))

;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
;;; main function                        ;;;
;;; input: year                          ;;;
;;; output: code corresponding to year   ;;;
;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
(defun main (year)
 (interactive "sEnter your academic year: ")  ; read year
 (message "%d" (yearCode year)))              ; display its code

  ;;; Tests...
 (main "junior")
 (yearCode "junior") 
```

老实说，我对 elisp 一无所知，所以即使在编译第一部分时我也遇到了麻烦。谁能帮我`if`正确地构造一个语句？

编辑：我在错误的缓冲区中进行测试-_- 代码使用 if 语句工作。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-06T22:38:01.887

当你有`if..elseif..elseif..else`ruby​​ 时，你`cond`在 emacs lisp 中使用：

```
(defun yearCode (name)
  (cond
   ((string= name "freshman") 1)
   ((string= name "sophomore") 2)
   ((string= name "junior") 3)
   ((string= name "senior") 4))) 
```

然而，我不会这样写。

```
(defun yearCode (name)
  (cdr (assoc name
              '(("freshman" . 1)
                ("sophomore" . 2)
                ("junior" . 3)
                ("senior" . 4))))) 
```

等式有很多种，并且`=`严格用于数字（或标记）。`string=`用于字符串和字符串*指示符*，`eq`用于对象标识，`equal`是一种*元素*的深度相等（这就是它适用于字符串的原因，但它只会在字符串与非字符串比较时返回 false，从不检测错误）。后一个 ,`equal`由 使用`assoc`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-06T22:37:50.370

`yearCode`以最小的更改编写您的方法是：

```
(defun yearCode (name)
  (cond ((string= name "freshman") 1)
        ((string= name "sophomore") 2)
        ((string= name "junior") 3)
        ((string= name "senior") 4)
        (0))) 
```

*编辑添加：问题的原始版本的结构非常不同，所以下面的解释不再适用......*

你写的和上面的代码不同的是，上面的代码`yearCode`有一个( `cond`)表达式，那个函数的返回值就是`cond`语句的返回值。

您的原始代码有 4 个不同的表达式，实际上只返回最后一个表达式的值（最后一个`if`）语句 - 这意味着返回值是`4`or `nil`。

我建议阅读 lisp 入门书籍，我最喜欢的是[SICP](http://mitpress.mit.edu/sicp/)，但您可能应该查看 SO question 询问[最佳入门书籍](https://stackoverflow.com/questions/22873/language-books-tutorials-for-popular-languages)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-06T23:12:55.993

这将是使用 if 语句编写它的方式。if 语句有一个条件部分，它要么是真要么是假。如果为真，则评估 FIRST 部分。真的只能是一句话，除非你用`(progn )`. 其余部分将是 if 语句的 else 部分。

```
(defun yearCode(name)
    (if (string= name "freshman")    ; true or false?
       1                            ; if true, returns 1 

  ; Note that you can't really write anything else here. 
  ; From here on, it is the first else part!

     (if (string= name "sophomore")  ; if false, else part  etc.
       2
      (if (string= name "junior") 
        3
       (if (string= name "senior") 
         4))))) 
```

尽管这专门回答了您关于 的问题`if`，*但我当然建议您* `cond` *改用*，就像其他人建议的那样。

下面的应用`progn`，在 TRUE 的情况下，有超过 1 个要计算的表达式。

```
(defun yearCode(name)
    (if (string= name "freshman")    ; true or false?
       (progn 1                      ; if true, returns 1 
              (message "this is possible!"))          

     (if (string= name "sophomore")  ; if false, else part  etc.
       2
      (if (string= name "junior") 
        3
       (if (string= name "senior") 
         4))))) 
```

# python - 使用python绘制整数与列表

> ID：14740157
> 
> 赞同：0
> 
> 时间：2013-02-06T22:32:16.293
> 
> 标签：python, list, integer

我使用包含 5000 个元素的 Python 程序制作了一个列表。我想根据看起来像的整数列表绘制这个列表`[-2500:2500]`。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-06T22:39:46.620

使用[matplotlib](http://matplotlib.org/index.html)：

```
import math
import random
import matplotlib.pyplot as plt

mylist = [math.sin(i/5000.*2*math.pi)+random.random()/10.0 for i in range(5000)]
x = range(-2500, 2500)
plt.plot(x, mylist)
plt.savefig('test.png')
plt.show() 
```

![在此处输入图像描述](../Images/992504aa1332d0fc8631730885aa5557.png)

[这里](http://matplotlib.org/gallery.html)有一个 matplotlib 示例库（带有源代码）。它可以帮助您评估 matplotlib 是否满足您的需求。

# ios - iOS 6 共享像消息，而不像照片（UIActivityViewController 和 UIDocumentInteractionController）

> ID：14740159
> 
> 赞同：5
> 
> 时间：2013-02-06T22:32:26.393
> 
> 标签：ios, sharing, uidocumentinteraction, uidocument, uiactivityviewcontroller

在 iOS 6 中，点击照片应用程序中的操作按钮会显示标准的 UIActivityViewController：

![照片中的 UIActivityViewController](../Images/45aacf208bb99da3b3e62f42d7d8572c.png)

从消息中执行相同操作会提供一组不同的选项。在我看来，这就像它使用 UIDocumentInteractionController api 来拉取所有说它们可以处理图像的应用程序。

![UIAcitivtyViewController？ 来自消息](../Images/05f5669e92b74ca441bb22beec01c3dd.png)

我的问题是双重的：

1.  如何进入消息操作菜单？Tumblr 和 Halftone，仅举几例，已经做到了……我似乎找不到文档。

2.  如何显示消息样式的操作菜单？当我展示 UIActivityViewController 时，它没有这些选项......只有标准集 facebook/twitter/copy/print/save to camera roll/etc。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T22:42:48.513

如何进入该列表：[“注册您的应用支持的文件类型”](https://developer.apple.com/library/ios/#documentation/FileManagement/Conceptual/DocumentInteraction_TopicsForIOS/Articles/RegisteringtheFileTypesYourAppSupports.html#//apple_ref/doc/uid/TP40010411-SW1)

要处理图像，您可能需要注册`public.image` [（参考）](http://developer.apple.com/library/ios/#documentation/Miscellaneous/Reference/UTIRef/Articles/System-DeclaredUniformTypeIdentifiers.html#//apple_ref/doc/uid/TP40009259-SW1)

要显示该列表，您只需[要让 UIDocumentInteractionController](https://developer.apple.com/library/ios/#documentation/UIKit/Reference/UIDocumentInteractionController_class/Reference/Reference.html#//apple_ref/doc/uid/TP40009304)显示其选项菜单

# jquery - 为了优化 jQuery 的性能而为数百个元素添加 ID 是否值得？

> ID：14740162
> 
> 赞同：1
> 
> 时间：2013-02-06T22:32:36.347
> 
> 标签：jquery, performance, jquery-selectors, dom-manipulation

我需要在一个网站上使用 jQuery 进行大量 HTML 操作，其中数百种产品显示在相同的结构中。几乎每个代码块都单独包装在具有相同类名的 div 容器中。

现在我想知道是否应该在类名中插入一个唯一 ID，以便可以使用 $('#ID') 而不是 $('.class') 进行 HTML 操作。[从这篇文章](http://jquery-howto.blogspot.com/2009/02/5-easy-tips-on-how-to-improve-code.html)#3 中得到这个想法。

我可能会使用 for 循环在类之后插入一个 id 来创建 ID。这值得花时间吗？更重要的是它会帮助性能吗？

**编辑：** 对于我要进行的操作类型，for 循环肯定会经常使用。另外，我不太确定分页是否对性能有任何意义。现在产品每页显示 10 个，用户可以选择每页查看更多。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T22:36:49.420

是的，ID 选择器*效率*更高。使用它们来缩小您的范围，然后您可以稍后按班级进行选择。此外，保存可能重复使用的选择。

```
var container = $("#someId");
var products = container.find(".product");

//later on...

products.find(".class").doSomething(); 
```

另外，请记住，这`.children()`比`.find()`- 所以尽可能使用它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T22:37:47.910

这样做可能是一个好习惯，但是如果您的页面很大（有很多元素）或者如果您多次选择元素（即在循环内），您只会注意到差异

从循环中选择您需要的元素并在内部使用对它的引用会更好、更容易

```
var obj = $('#someid');
while (expression){obj.something();} 
```

# clojure - leiningen 2 省略默认存储库？

> ID：14740163
> 
> 赞同：1
> 
> 时间：2013-02-06T22:32:36.220
> 
> 标签：clojure, leiningen, archiva

我正在尝试将档案设置为 leiningen 项目的代理存储库。我已经看到对以下键的引用：

：省略默认存储库

但它似乎没有工作。当我将 clojars 依赖项粘贴到我的项目文件中时，leiningen 仍然从 clojars 而不是我的代理中提取。我的项目文件如下所示：

```
(defproject test-archiva "0.1.0-SNAPSHOT"
  :description "FIXME: write description"
  :url "http://example.com/FIXME"
  :repositories [["snapshots", "http://myserver:8080/archiva/repository/snapshots"]
                 ["releases", "http://myserver:8080/archiva/repository/internal"]]
  :omit_default_repositories true
  :license {:name "Eclipse Public License"
            :url "http://www.eclipse.org/legal/epl-v10.html"}
  :dependencies [[org.clojure/clojure "1.4.0"]
                 [incanter "1.4.1"]]) 
```

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T01:12:00.580

```
(defproject test-archiva "0.1.0-SNAPSHOT"
:description "FIXME: write description"
:url "http://example.com/FIXME"
:repositories [["snapshots", "http://myserver:8080/archiva/repository/snapshots"]
             ["releases", "http://myserver:8080/archiva/repository/internal"]]
:omit-default-repositories true
:license {:name "Eclipse Public License"
        :url "http://www.eclipse.org/legal/epl-v10.html"}
:dependencies [[org.clojure/clojure "1.4.0"]
             [incanter "1.4.1"]]) 
```

试试看...看起来你有下划线而不是连字符

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-02-25T09:21:38.970

现在你可以写：

```
:repositories ^:replace [["snapshots", "http://myserver:8080/archiva/repository/snapshots"]
               ["releases", "http://myserver:8080/archiva/repository/internal"]] 
```

我找不到哪个版本引入了此功能，但它适用于 2.3.4 或更高版本的 Leiningen。

# java - Java：为了避免 NullPointer ，初始化了一个字符串数组

> ID：14740165
> 
> 赞同：1
> 
> 时间：2013-02-06T22:32:42.813
> 
> 标签：java, nullpointerexception

我进行中间件调用以获得`String`如下所示的数组：

```
String[] freqwords = MViewer.getWordNames(); 
```

问题是可能没有可用数据，因此任何进一步的操作，如`freqWords.length`，都可能导致`NullPointerException`.

因此，为避免我以如下方式处理，如图所示：

```
if (freqwords == null)
{
  freqwords = new String[0];
} 
```

代码运行良好 - 如果有任何更好的方法或任何负面情况，请告诉我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T22:36:18.057

`String[0]`如果您从不需要区分`null`返回值的大小写（例如，`null`当且仅当没有可用数据时才返回），那么这似乎是一个完全合理的解决方案。

# mysql - 下面的MySQL join怎么做？

> ID：14740170
> 
> 赞同：0
> 
> 时间：2013-02-06T22:32:57.940
> 
> 标签：mysql

假设我有以下表格：

表A

```
a_name | age | country
Jordan | 5 | Germany
Molly | 6 | Spain
Paris | 7 | France
John | 7 | Saudi Arabia
John | 5 | Saudi Arabia
John | 6 | Spain 
```

表B

```
id (auto increment primary key) | age | country
1 | 5 | Germany
2 | 6 | Spain
3 | 7 | France
4 | 7 | Spain
5 | 8 | France
6 | 9 | France
7 | 2 | Mexico
8 | 7 | Saudi Arabia
9 | 5 | Saudi Arabia 
```

我希望能够在我能够得到的地方进行某种选择：

表A

```
a_name | age | country | id
Jordan | 5 | Germany | 1
Molly | 6 | Spain | 2
Paris | 7 | France | 3
John | 7 | Saudi Arabia | 8
John | 5 | Saudi Arabia | 5
John | 6 | Spain | 4 
```

迭代地，我通过查找 tableB 中年龄和国家对的内容来填写“id”字段中的内容。是否有一些 SQL 查询/查询可以添加基于表 B 的新“id”列而无需使用游标？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T22:36:02.503

```
select a.a_name, a.age, a.country, b.id
FROM tableA a
JOIN tableB b on a.age = b.age and a.country = b.country 
```

[SqlFiddle](http://sqlfiddle.com/#!2/514e5/2)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T22:55:32.177

前面的答案是正确的，但忽略了您处理问题的方式中的几个问题。

您应该让表中的字段`Country`引用您的表：这样您就不会复制信息（当一个国家/地区更改其名称时，您的设计会发生什么？）。存储人们的年龄也是一个糟糕的选择：您应该存储出生日期（或年份），以避免重新计算他​​们的年龄。`country_id``kids`

儿童桌：

```
name | DOB         | country_id | id
Joe  | Aug 11 2005 | 1          | 1
Jim  | Sep 09 2007 | 21         | 2 
```

国家表：

```
id | name
1  | UK
2  | Germany 
```

那么你需要的select语句是：

```
select kids.name, kids.DOB, countries.name, kids.id from kids join countries on kids.country_id = countries.id 
```

然后，您可以计算应用程序中的年龄，也可以将计算合并到 SQL 中，参见（例如）[http://ma.tt/2003/12/calculate-age-in-mysql/](http://ma.tt/2003/12/calculate-age-in-mysql/)

**编辑**

在阅读了您的说明后，年龄列是该人**访问该国时**的年龄，我建议改为三表设计，仍然遵循存储日期而不是年龄的相同原则，并且只存储每个数据项一次：

**人员表**

结构

```
CREATE TABLE `countries` (
 `id` int(11) unsigned NOT NULL AUTO_INCREMENT,
 `name` varchar(22) NOT NULL DEFAULT '',
 PRIMARY KEY (`id`)
) ENGINE=InnoDB; 
```

示例内容

```
id | name  | DOB
1  | Joe   | 2005-08-11
2  | Jim   | 2007-09-09
3  | Carol | 2008-01-22 
```

**国家表**

结构

```
CREATE TABLE `countries` (
 `id` int(11) unsigned NOT NULL AUTO_INCREMENT,
 `name` varchar(22) NOT NULL DEFAULT '',
 PRIMARY KEY (`id`)
) ENGINE=InnoDB; 
```

样本数据

```
id | name
1  | UK
2  | Germany
3  | Saudi Arabia 
```

**访问表**

结构

```
CREATE TABLE `visits` (
 `id` int(11) unsigned NOT NULL AUTO_INCREMENT,
 `person_id` int(11) unsigned NOT NULL,
 `country_id` int(11) unsigned NOT NULL,
 `date_of_visit` date NOT NULL,
 PRIMARY KEY (`id`),
 KEY `person_id` (`person_id`),
 KEY `country_id` (`country_id`),
 CONSTRAINT `visits_ibfk_1` FOREIGN KEY (`person_id`) REFERENCES `people` (`id`),
 CONSTRAINT `visits_ibfk_2` FOREIGN KEY (`country_id`) REFERENCES `countries` (`id`)
) ENGINE=InnoDB; 
```

样本数据

```
id | person_id | country_id | date_of_visit
1  | 1         | 1          | 2009-01-02
2  | 1         | 2          | 2010-01-01 
```

那么你需要得到你想要的数据的查询是：

```
select 
 people.name, 
 people.DOB, 
 countries.name, 
 visits.date_of_visit 
from 
 visits 
  join 
 countries 
  on 
   visits.country_id = countries.id
  join 
 people
  on
   visits.person_id = people.id; 
```

# html - 将 http:// 添加到链接会导致 target="_blank" 失败

> ID：14740173
> 
> 赞同：0
> 
> 时间：2013-02-06T22:33:04.903
> 
> 标签：html, grails

我正在尝试将指向帮助站点的简单链接添加到导航窗格。由于帮助站点位于 Web 应用程序的其余部分之外，因此我想在新的浏览器选项卡/窗口中打开该页面。只需将`target="_blank"`其作为属性添加到 HTML`<a>`标记，对吗？

问题是，由于我无法理解的原因，只有相对链接会在新窗口/标签中打开。因此， `<a href="helpsite.com/helpPage" target="_blank">Help</a>`在新窗口中打开（损坏的）链接。但是如果我尝试使用绝对 URL `<a href="http://helpsite.com/helpPage" target="_blank">Help</a>`，页面将在同一个窗口中打开。

此问题在所有 Web 浏览器中都存在（Mozilla Firefox、Google Chrome 和 IE 9 已尝试）。在 IE 中，我注意到我暂时处于空白页面，然后被重定向到帮助站点。因此，就好像浏览器正在执行正常过程，但都在同一个选项卡中。

当我用鼠标中键单击链接时也会出现此问题，但如果我右键单击并选择“在新选项卡中打开链接”则不会出现此问题。

有问题的页面是基于 Grails 2.0.1 构建的 Grails 应用程序的一部分，但 gsp 中链接的代码是纯 HTML。无论我将链接放在哪里——在我的导航模板中或在基本 GSP 的中间，都会发生这种情况。

我尝试将链接 HTML 复制并粘贴到纯文本 HTML 文件中，并且效果很好。我不包括我编写的任何 javascript，尽管我们使用的通用站点模板确实包含一个通用 Javascript 文件，几乎所有的 Web 应用程序和页面都使用它。

我已经黔驴技穷了。有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T14:24:26.270

因此，问题原来是我们网站上使用的常见 javascript 文件，该文件使用正则表达式来解析链接以用于 Google Analytics 目的。

我知道。我知道。这可能不应该发生。 [RegEx 匹配打开的标签，XHTML 自包含标签除外](https://stackoverflow.com/questions/1732348/regex-match-open-tags-except-xhtml-self-contained-tags/1732454#1732454)

不过，这个决定不在我的掌控之中。值得庆幸的是，那些持有该决定的人能够快速更新通用 javascript 文件，因此它不会导致这个特定问题。

# ruby-on-rails-3 - 在 Rails 中选择选项标签

> ID：14740175
> 
> 赞同：0
> 
> 时间：2013-02-06T22:33:09.777
> 
> 标签：ruby-on-rails-3

我有一个表单，我想要一个选择下拉列表来显示选项 0-41。我尝试了以下代码，但它不起作用：

```
<%= f.select :years_together, 42.times do |year| %>
  <%= year %>
<% end %> 
```

**更新**

实际上，我希望选择显示值为零的“不到一年”和值 41 的“超过 40”。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T22:39:22.570

我认为您需要致电`options_for_select`：

```
<%= f.select :years_together, options_for_select(41.times { |year| year }) %> 
```

# haskell - Data.List 和 Data.Char 的区别

> ID：14740177
> 
> 赞同：-3
> 
> 时间：2013-02-06T22:33:15.097
> 
> 标签：haskell

在 Haskell 中，带有标题的程序有什么区别

```
module Main where

import Data.List 
```

和

```
module Main where

import Data.Char 
```

///////////////////////////////////////// /

这些是我用来学习的玩具程序：

方案一：

```
 module Main where

    import Data.Char

    prepets1 = ["cat", "dog", "scorpion", "cobra"]
    prepets2 = ["cat", "dog"]
    prepets3 = ["cat", "scorpion"]
    prepets4 = [prepets2, prepets3]

    data Pet = Pet {name :: String,
            venomous :: Bool,
            cost :: Integer }
        deriving (Eq, Show)

    venomous' :: String -> Bool
    venomous' = (>3). length

    cost' :: String -> Integer
    cost' = sum . map (fromIntegral . ord)

    petify :: String -> Pet
    petify s = Pet s (venomous' s) (cost' s)

    pets1 = map petify prepets1

    pets2 = [Pet s (venomous' s) (cost' s) | s <- prepets1]

    ouch1 :: [String] -> Bool
    --is any string here the name of a venomous pet?
    ouch1 xs = True

    ouch2 :: [[String]] -> Bool
    -- Is any string here the name of a veno,ous pet?
    ouch2 xs = False

    printpets = putStrLn . unlines. map show

    blankline = putStrLn "\n"

    main = do
        blankline
        print $ petify "cat"
        blankline
        print $ petify "scorpion"
        blankline
        printpets pets1
        blankline
        printpets pets2
        blankline
        print $ ouch1 prepets2
        blankline
        print $ ouch1 prepets3 
```

方案二：

```
module Main where

import Data.List

data Report = Report {recipe :: Recipe,
                      legal  :: Bool,
                      popcnt :: Integer,
                      cost   :: Integer}
              deriving (Eq, Show)

type Recipe = String  -- seven bits to encode seven ingredients

-- recipes in Gray-code order

gray :: Integer -> [Recipe]
gray n
  | n == 0 = [""]
  | n >  0 = map (++"0") (gray (n-1)) ++
             map (++"1") (reverse (gray (n-1)))

recipes = gray 7

-- recipe analysis and report generation

reports = [Report r (legal' r) 6 16 | r <- recipes]  -- fix!

legal_reports = [r | r <- reports, legal r]

legal' :: Recipe -> Bool
legal' r = take 3 r == "000"  -- fix!

ruleset = [rule0, rule1, rule2, rule3, rule4, rule5]

-- Rule 0: If truffles, then precisely truffles.
rule0 r = True  -- fix!

-- Rule 1: Either truffles or some meat.
rule1 r = False -- fix!

-- Rule 2: Not both peppers and onions.
rule2 r = True  -- fix!

-- Rule 3: If bacon, then peppers.
rule3 r = False  -- fix!

-- Rule 4: If sausage, then onions.
rule4 r = True  -- fix!

-- Rule 5: If ham, then mushrooms.
rule5 r = False  -- fix!

popcnt' :: Recipe -> Integer
-- number of ingredients
popcnt' x = 3  -- fix!

type Bit  = Char

type Cost = Integer

cost' :: Recipe -> Cost
cost' x = 42  -- fix!

includeCost :: Cost -> Bit -> Cost
includeCost cost bit = if bit == '1' then cost else 0

costs = [1, 2, 4, 8, 16, 32, 64]

-- ingredient encoding

peppers   r = r!!0 == '1'

bacon     r = r!!1 == '1'

ham       r = r!!2 == '1'

sausage   r = r!!3 == '1'

onions    r = r!!4 == '1'

mushrooms r = r!!5 == '1'

truffles  r = r!!6 == '1'

preciselyTruffles = (== "0000001")

-- main processing

type Run  = [Report]  -- sequence of legal reports that satisfy the metarule

-- Approach A: Work directly with Grey-code order

runsA = extractRunsA reports

extractRunsA :: [Report] -> [Run]
extractRunsA as
  | clean == [] = []

  | otherwise   = r : extractRunsA as'
                    where (r, as') = break illegal clean
                          clean    = dropWhile illegal as
                          illegal  = not . legal

-- Approach B: Guess a starting seed of a long Hamming run

runsB = extractRunsB legal_reports

extractRunsB :: [Report] -> [Run]
extractRunsB [] = []
extractRunsB xs = run : extractRunsB xs'
                    where run = buildRun (head xs) (tail xs)
                          xs' = xs \\ run  -- list difference

buildRun :: Report -> [Report] -> Run
buildRun seed reports
  | endOfRun  = [seed]

  | otherwise = seed : buildRun seed' reports'
                  where endOfRun   = successors == []
                        successors = filter (.~. seed) reports
                        reports'   = reports \\ [seed]
                        seed'      = head successors

(.~.) :: Report -> Report -> Bool
-- test recipe pairs for Hamming distance 1
x .~. y = True -- fix!

-- print routines

printReports :: [Report] -> IO ()
printReports = putStrLn . unlines . map show

printRecipes :: [Report] -> IO ()
printRecipes = putStrLn . showRecipes

printRuns :: [Run] -> IO ()
printRuns = putStrLn . unlines . map showRecipes

printRuns' :: [Run] -> IO ()
printRuns' = putStrLn . unlines . map showRecipes'

showRecipes :: Run -> String
showRecipes = unlines . map showNames

showRecipes' :: Run -> String
showRecipes' run = (unlines . map showNames) run ++ "  total cost  = $" ++
                   show 15 ++ "\n" ++  -- fix!
                   "  prize money = $" ++ show 4 ++ " million\n"  -- fix!

type Name = String

showNames :: Report -> String
showNames r = (concat . addEggs . translate . recipe) r ++
              "  (" ++ show (popcnt r) ++ ")" ++
              "  $" ++ show (cost r)

translate :: Recipe -> [Name]
translate = zipWith includeName names

includeName :: Name -> Bit -> Name
includeName name bit = if bit == '1' then name else replicate (length name) ' '

addEggs :: [Name] -> [Name]
addEggs = id  -- fix!

names =
  ["peppers ", "bacon ", "ham ", "sausage ", "onions ", "mushrooms ", "truffles"]

blankline = putStrLn ""

render = putStrLn . (++ "\n")

main = do
  blankline
  -- render       "All reports:"
  -- printReports reports
  render       "First ten recipes with number of ingredients and cost:"
  printRecipes $ take 10 reports
  render       "All legal recipes with number of ingredients and cost:"
  printRecipes legal_reports
  render       "All Gray-code runs:"
  printRuns    runsA
  render       "All Gray-code runs with total cost and prize money:"
  printRuns'   runsA
  render       "All seed-generated runs:"
  printRuns    runsB
  render       "All seed-generated runs with total cost and prize money:"
  printRuns'   runsB 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-06T22:38:01.663

[一种允许您使用在Data.List 模块](http://hackage.haskell.org/packages/archive/base/latest/doc/html/Data-List.html)中可以看到的所有功能，另一种允许您使用在[Data.Char 模块](http://hackage.haskell.org/packages/archive/base/latest/doc/html/Data-Char.html)中定义的所有功能。

读一读。

`Data.List`充满了非常方便的列表处理功能。Data.List 中的许多函数仍然可用，因为它们在`Prelude`（隐式导入）中，但有些不是

您不需要`import Data.Char`使用 Char 类型，它用于额外的功能，主要用于告诉您拥有哪种字符。

* * *

您可以通过编辑导入并读取错误来检查他们从 Data.List 或 Data.Char 中使用了哪些函数。

程序 1 使用`ord`来自 Data.Char（请参阅[hoogle](http://www.haskell.org/hoogle/?hoogle=ord)以了解它是什么或它是如何工作的）来计算宠物的成本，这似乎取决于其中的字母（而宠物是否有毒取决于有多少个字母有）！

第二个使用`\\`列表差异（请参阅hoogle以了解它是什么或它是如何工作的）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-06T22:37:23.200

他们正在导入不同的模块（即，将这些模块中定义的所有函数和数据类型带入当前命名空间）。[Data.List](http://www.haskell.org/ghc/docs/latest/html/libraries/base//Data-List.html)包含用于处理列表的函数，例如`++`(append) 和`map`; [Data.Char](http://www.haskell.org/ghc/docs/latest/html/libraries/base//Data-Char.html)包含与 Chars 相关的函数，例如`isAlpha`和`toUpper`。

# sql - 永久加权平均成本计算 SQL Server 2008

> ID：14740181
> 
> 赞同：0
> 
> 时间：2013-02-06T22:33:27.633
> 
> 标签：sql, sql-server-2008, aggregate-functions, cumulative-sum

我想计算库存的永久加权平均成本。我试图了解以下链接 [Inventory Average Cost Calculation in SQL](https://stackoverflow.com/questions/5396827/inventory-average-cost-calculation-in-sql)的解决方案， 但无法获得它，这对我来说很复杂。

这是我的数据库详细信息。

```
Purch_ID  Item_ID   QTY    Unit_Price   

 01         1       10       10               
 02         2       10       20               
 03         3       20       15              
 04         2       10       20               
 05         1       10       18              
 06         2       25       17 
```

我想使用以下公式计算每次购买后的加权平均成本

```
((old_stock x Old unit price)+(New_Purchase_qty x New unit price))/(old stock qty + new purchase qty) 
```

请问有什么建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T22:43:33.483

如果我理解正确，您需要累积平均价格。

这种方法使用子查询来计算累计总量和累计支付总额。该比率是平均成本：

```
select t.*, cumepaid / cumeqty as avg_cost
from (select t.*,
             (select SUM(qty) from t t2 where t2.item_id = t.item_id and t2.purch_id <= t.purch_id
             ) as cumeqty,
             (select SUM(qty*unit_price) from t t2 where t2.item_id = t.item_id and t2.purch_id <= t.purch_id
             ) as cumepaid
      from t
     ) t 
```

在 SQL Server 2012 中，您可以通过直接计算累积和来做到这一点（应该更有效）。您也可以使用 来执行此操作`cross apply`，但我更喜欢标准 SQL。

# nservicebus - NServiceBus 通过代码订阅附加队列

> ID：14740187
> 
> 赞同：-1
> 
> 时间：2013-02-06T22:34:39.127
> 
> 标签：nservicebus

我想补充我在 App.config 文件的 UnicastBusConfig 部分中订阅的端点，以添加到另一个队列中进行订阅。

为此，我添加了一个自定义配置源，如下所示

```
public class MyConfigSource : IConfigurationSource
{
    public T GetConfiguration<T>() where T : class, new()
    {
        // the part you are overriding
        if (typeof(T) == typeof(UnicastBusConfig))
        {
            var config = ConfigurationManager.GetSection(typeof(T).Name) as UnicastBusConfig;

            config.MessageEndpointMappings.Add(new MessageEndpointMapping() { Endpoint = "MyQueue", Messages = "MyMessageNamespace" });
        }

        // leaving the rest of the configuration as is:
        return ConfigurationManager.GetSection(typeof(T).Name) as T;
    }
} 
```

但是，当我在现有 MessageEndpointMappings 集合上调用 Add 时出现异常：

> 启动端点时出现异常，已记录错误。原因：配置是只读的。

有没有更好的方法来加载现有配置并在代码中添加位？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T01:03:41.803

是的，不幸的是，映射集合被设置为只读！

这是一个解决方法（对不起反射的使用！）（我也在使用新的方法来覆盖配置设置`IProvideConfiguration<T>`）：

```
class UnicastBusConfigOverride : IProvideConfiguration<UnicastBusConfig>
{
    public UnicastBusConfig GetConfiguration()
    {
        var unicastBusConfig = Configure.ConfigurationSource.GetConfiguration<UnicastBusConfig>();

        typeof(ConfigurationElementCollection)
            .GetField("bReadOnly", BindingFlags.Instance | BindingFlags.NonPublic)
            .SetValue(unicastBusConfig.MessageEndpointMappings, false);

        unicastBusConfig.MessageEndpointMappings.Add(new MessageEndpointMapping() { Endpoint = "MyQueue", Messages = "MyMessages" });

        return unicastBusConfig;
    }
} 
```

顺便说一句，我将确保我们为 NServiceBus 的下一个主要版本修复此问题，请参阅[https://github.com/NServiceBus/NServiceBus/issues/952](https://github.com/NServiceBus/NServiceBus/issues/952)

# ruby-on-rails - Rails 3.2中一个按钮的多个AJAX请求

> ID：14740189
> 
> 赞同：0
> 
> 时间：2013-02-06T22:34:44.910
> 
> 标签：ruby-on-rails, ruby, ajax, ruby-on-rails-3, jquery

我想在 Rails 3.2 应用程序中创建一个按钮（最好使用“button_to”），该应用程序将三个单独的 AJAX 请求发送到同一控制器的不同操作。

我没有在网上看到任何显示我如何做到这一点的东西。是否可以？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T14:17:26.323

您需要在页面中获取一些 javascript，如下例所示

查看[http://api.jquery.com/jQuery.get/](http://api.jquery.com/jQuery.get/)

```
 // Deal with any button clicks
  $(document).on("click", "#mybuttonid", function(event) {
     $.get('ajax/firsttest.html', function(data) {
      $('.result').html(data);
      alert('First Load was performed.');
                                             });
     $.get('ajax/secondtest.html', function(data) {
      $('.result').html(data);
      alert(' Second Load was performed.');
                                             });

     $.get('ajax/thirdtest.html', function(data) {
      $('.result').html(data);
      alert('Third Load was performed.');
                                             });

}) 
```

# c# - 在 C# 中读取 JSON

> ID：14740191
> 
> 赞同：1
> 
> 时间：2013-02-06T22:34:54.027
> 
> 标签：c#, json, json.net, mozilla

我正在尝试使用 Mozilla Persona 登录做一个示例应用程序，但在示例代码中出现错误。

**代码**

```
public class AuthController : Controller
{
    [HttpPost]
    public ActionResult Login(string assertion)
    {
        if (assertion == null)
        {
            // The 'assertion' key of the API wasn't POSTED. Redirect,
            // or whatever you'd like, to try again.
            return RedirectToAction("Index", "Home");
        }

        using (var web = new WebClient())
        {
            // Build the data we're going to POST.
            var data = new NameValueCollection();
            data["assertion"] = assertion;
            data["audience"] = "https://example.com:443"; // Use your website's URL here.

            // POST the data to the Persona provider (in this case Mozilla)
            var response = web.UploadValues("https://verifier.login.persona.org/verify", "POST", data);
            var buffer = Encoding.Convert(Encoding.GetEncoding("iso-8859-1"), Encoding.UTF8, response);

            // Convert the response to JSON.
            var tempString = Encoding.UTF8.GetString(buffer, 0, response.Length);
            var reader = new JsonReader();
            dynamic output = reader.Read(tempString);

            if (output.status == "okay")
            {
                string email = output.email; // Since this is dynamic, convert it to string.
                FormsAuthentication.SetAuthCookie(email, true);
                return RedirectToAction("Index", "Home");
            }

            // Could not log in, do something else.
            return RedirectToAction("Index", "Home");
        }
    }
} 
```

**错误**

我在下面的行中收到一个错误，通知构造函数不能接受 0 个参数。好的，这很清楚。但是我从[Mozilla Persona](https://developer.mozilla.org/en-US/docs/Persona/Quick_Setup)获得了这段代码。

```
var reader = new JsonReader(); 
```

**更新**

我在下面的代码中遇到了同样的错误

```
var reader = new JsonFx.Json.JsonReader(); 
```

有人可以帮助我吗？

我在 stackoverflow 中发现了一些问题，就像[这个](https://stackoverflow.com/questions/7579248/net-4-how-to-reference-a-dynamic-object-with-property-named-return)你可以看到相同的代码的问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T20:02:30.650

您需要升级到更新版本的 JsonFX，您可以在此处获取：[https](https://github.com/jsonfx/jsonfx) ://github.com/jsonfx/jsonfx 。

在这个更新的版本`JsonReader`中，实际上包含一个默认构造函数，它应该使您的代码能够工作。

在您可能拥有的版本中（我在[这里](http://www.jsonfx.net/)找到了旧版本），`JsonReader`有许多构造函数，但它们都不接受零参数。

# coordinates - 将局部平面坐标转换为 WGS84 的概述

> ID：14740192
> 
> 赞同：2
> 
> 时间：2013-02-06T22:34:55.943
> 
> 标签：coordinates, geospatial, coordinate-systems, wgs84

假设我使用以米为单位的局部平面坐标绘制了一个小区域。例如，一个 300m x 450m 的矩形仓库。我使用一些 GPS 设备找到仓库一角的 WGS 84 纬度/经度。

如何将我的平面坐标投影到 WGS 84 大地水准面上以找到仓库其他 3 个角落的纬度/经度值？

我知道这是一个复杂的问题，因为地球不同地区的价值观各不相同。我是否需要先找到一些局部坐标系，或者我可以以某种方式使用我已知点之间的关系直接进入 WGS84？

我对这类问题没有太多经验，所以如果我的部分问题没有任何意义，请原谅我。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-07T12:12:36.783

您的问题非常有道理，但解决方案远非微不足道。

解决方案取决于您的本地坐标系是南北对齐（相对容易）还是完全任意（非常困难）。

**您的本地系统准确地南北对齐：**

1.  将已知的纬度/经度坐标转换为笛卡尔坐标（东、北）。
2.  确定 (1) 与该点的局部坐标之间的 x 和 y 差异。
3.  将此坐标差应用于 3 个角的局部坐标中的每一个。
4.  将 (3) 转换回地理纬度/经度。

这是有效的，因为两个系统具有相同的单位比例（公制）和旋转（南北），剩下的就是平移，即坐标差。

**您的本地系统是任意的，而不是南北对齐：**

1.  您还需要两个纬度/经度已知点。*这是事实，无法绕开，否则无法确定轮换，无解*。
2.  将这些已知的纬度/经度坐标转换为笛卡尔坐标。
3.  [使用 3 个已知/未知对的helmert 变换](http://en.wikipedia.org/wiki/Helmert_transformation)来求解剩余的未知局部坐标。（搜索在线工具）
4.  将结果转换回地理。

这是有效的，因为 helmert 转换正在确定两个系统之间的平移和旋转。

在纬度/经度和笛卡尔之间转换并再次转换本身并不是微不足道的，而是必要的。要么使用像[proj4](http://trac.osgeo.org/proj/)这样的投影库准确地做到这一点，要么近似地假设一个球形地球，例如[这个答案](https://stackoverflow.com/a/1185413/1332041)。

希望这没有让你失望！

# sinatra - 在 Datamapper 中销毁依赖项

> ID：14740195
> 
> 赞同：2
> 
> 时间：2013-02-06T22:35:08.233
> 
> 标签：sinatra, datamapper

使用 Datamapper，我有一个模型 Album，它有 n, :photos 有一个 Paperclip::Resource

使用 ActiveRecord，我将拥有：

```
has_many :photos, dependent: :destroy 
```

在我的相册模型中，为了在删除相册的同时删除照片，但使用 Datamapper 似乎您必须自己滚动。在 Sinatra 中，要删除我拥有的专辑：

```
delete '/albums/:id' do
  a = Album.get params[:id] 
  a.destroy
  redirect '/'
end 
```

和专辑模型中的前置过滤器：

```
before :destroy do
  photos.destroy
end 
```

但从未调用过之前的过滤器。

如果我使用 bang 方法 a.destroy!，则相册会被销毁，但照片不会。

不会产生错误，也不会引发异常。

**更新**

有错误，但错误哈希为空：

```
INFO -- : #<DataMapper::Validations::ValidationErrors:0x13740dc @resource=#<Album @id=2 @name="Quaver" @created_at=#<DateTime: 2013-02-07T10:30:36+00:00 (5895194251/2400,0/1,2299161)> @updated_at=#<DateTime: 2013-02-07T10:30:36+00:00 (5895194251/2400,0/1,2299161)>>, @errors={}> 
```

很明显我有验证问题。但是我没有在我的模型中设置任何验证：

```
class Photo  
  include DataMapper::Resource
  include Paperclip::Resource  

  property :id, Serial
  property :title, String
  property :created_at, DateTime  
  property :updated_at, DateTime

  has_attached_file :data, url: "/:attachment/:id/:style/:basename.:extension",
                       path: "#    {APP_ROOT}/public/:attachment/:id/:style/:basename.:extension"
  belongs_to :album
end

class Album  
  include DataMapper::Resource  
  property :id, Serial
  property :name, String
  property :created_at, DateTime  
  property :updated_at, DateTime
  has n, :photos

  before :destroy do
    photos.destroy
  end
end 
```

因此，由于 ValidationErrors 而没有调用 before 过滤器，但是当它们没有被显式设置时，它们是从哪里来的呢？

任何帮助，感激不尽。谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-07T15:39:10.420

显然当你使用：

```
require 'data_mapper' 
```

您正在隐式使用 dm-constraints，它默认保护依赖模型。简单地授予销毁权限（很像 ActiveRecord）就可以了：

```
has n, :photos, constraint: :destroy 
```

妈的好疼！

# json - 是否需要将 JSON 文件上传到服务器？

> ID：14740197
> 
> 赞同：4
> 
> 时间：2013-02-06T22:35:35.477
> 
> 标签：json

我正在构建一个 GAE 应用程序，它基本上让用户在计算机上选择一个 JSON 文件，然后这个 JSON 文件将稍作更改（即插入几个字段）并上传到服务器以存储在数据库中。

我正在使用 Javascript 在本地更改 JSON 文件。

我的问题是，由于您无法从本地机器加载和更改 JSON（和其他资源），这是否意味着我必须首先将未更改的 JSON 上传到服务器？

即我必须这样做：

1.  用户从他们的计算机中选择原始未更改的 JSON 文件

2.  然后将其上传到服务器

3.  然后将未更改的 JSON 发送回客户端

4.  在 JSON 上执行一些 javascript 魔法以添加我想要的新字段等。

5.  将修改后的 JSON 文件上传到数据库

6.  从数据库中删除旧的未更改的 JSON 文件

这会是正确的方法吗？似乎很啰嗦。

感谢您的帮助人们:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-06T23:04:55.650

如果用户的浏览器不支持**File API**，那么我认为您的步骤可能是最好的解决方案。但是，许多现代浏览器确实支持 API，因此您可以使用它。

要点是创建一个新`FileReader`对象并加载它。完成后，您应该能够评估 JSON（使用`JSON.parse`），进行编辑，然后进行上传。

在这里阅读更多：http: [//www.html5rocks.com/en/tutorials/file/dndfiles/](http://www.html5rocks.com/en/tutorials/file/dndfiles/)

这是一个使用图像的演示：http: [//html5demos.com/file-api](http://html5demos.com/file-api)

当然，如果可以在服务器端而不是客户端进行处理，情况也会变得相当简单。

# scala - Scala中的交叉产品

> ID：14740199
> 
> 赞同：56
> 
> 时间：2013-02-06T22:35:40.450
> 
> 标签：scala, functional-programming, cartesian-product, cross-product

我想要一个二元运算符`cross`（叉积/笛卡尔积），在 Scala 中使用可遍历：

```
val x = Seq(1, 2)
val y = List('hello', 'world', 'bye')
val z = x cross y    # i can chain as many traversables e.g. x cross y cross w etc

assert z == ((1, 'hello'), (1, 'world'), (1, 'bye'), (2, 'hello'), (2, 'world'), (2, 'bye')) 
```

仅在 Scala 中执行此操作的最佳方法是什么（即不使用 scalaz 之类的东西）？

* * *

## 回答 #1

> 赞同：88
> 
> 时间：2013-02-06T22:45:34.533

您可以使用 Scala 2.10 中的隐式类和`for`-comprehension 非常简单地做到这一点：

```
implicit class Crossable[X](xs: Traversable[X]) {
  def cross[Y](ys: Traversable[Y]) = for { x <- xs; y <- ys } yield (x, y)
}

val xs = Seq(1, 2)
val ys = List("hello", "world", "bye") 
```

现在：

```
scala> xs cross ys
res0: Traversable[(Int, String)] = List((1,hello), (1,world), ... 
```

这在 2.10 之前是可能的——只是不够简洁，因为您需要同时定义类和隐式转换方法。

你也可以这样写：

```
scala> xs cross ys cross List('a, 'b)
res2: Traversable[((Int, String), Symbol)] = List(((1,hello),'a), ... 
```

但是，如果您想`xs cross ys cross zs`返回 a `Tuple3`，则需要大量样板文件或像[Shapeless](https://github.com/milessabin/shapeless)这样的库。

* * *

## 回答 #2

> 赞同：31
> 
> 时间：2018-01-09T06:22:27.903

交叉`x_list`并`y_list`与：

```
val cross = x_list.flatMap(x => y_list.map(y => (x, y))) 
```

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2017-02-07T17:12:46.913

这是任意数量列表的递归叉积的实现：

```
def crossJoin[T](list: Traversable[Traversable[T]]): Traversable[Traversable[T]] =
  list match {
    case xs :: Nil => xs map (Traversable(_))
    case x :: xs => for {
      i <- x
      j <- crossJoin(xs)
    } yield Traversable(i) ++ j
  }

crossJoin(
  List(
    List(3, "b"),
    List(1, 8),
    List(0, "f", 4.3)
  )
)

res0: Traversable[Traversable[Any]] = List(List(3, 1, 0), List(3, 1, f), List(3, 1, 4.3), List(3, 8, 0), List(3, 8, f), List(3, 8, 4.3), List(b, 1, 0), List(b, 1, f), List(b, 1, 4.3), List(b, 8, 0), List(b, 8, f), List(b, 8, 4.3)) 
```

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2020-10-02T15:15:17.110

猫用户的替代方案：

`sequence`on`List[List[A]]`创建交叉产品：

```
import cats.implicits._

val xs = List(1, 2)
val ys = List("hello", "world", "bye")

List(xs, ys).sequence 
//List(List(1, hello), List(1, world), List(1, bye), List(2, hello), List(2, world), List(2, bye)) 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2016-12-06T00:34:02.777

```
class CartesianProduct(product: Traversable[Traversable[_ <: Any]]) {
  override def toString(): String = {
    product.toString
  }

  def *(rhs: Traversable[_ <: Any]): CartesianProduct = {
      val p = product.flatMap { lhs =>
        rhs.map { r =>
          lhs.toList :+ r
        }
      }

      new CartesianProduct(p)
  }
}

object CartesianProduct {
  def apply(traversable: Traversable[_ <: Any]): CartesianProduct = {
    new CartesianProduct(
      traversable.map { t =>
        Traversable(t)
      }
    )
  }
}

// TODO: How can this conversion be made implicit?
val x = CartesianProduct(Set(0, 1))
val y = List("Alice", "Bob")
val z = Array(Math.E, Math.PI)

println(x * y * z) // Set(List(0, Alice, 3.141592653589793), List(0, Alice, 2.718281828459045), List(0, Bob, 3.141592653589793), List(1, Alice, 2.718281828459045), List(0, Bob, 2.718281828459045), List(1, Bob, 3.141592653589793), List(1, Alice, 3.141592653589793), List(1, Bob, 2.718281828459045))

// TODO: How can this conversion be made implicit?
val s0 = CartesianProduct(Seq(0, 0))
val s1 = Seq(0, 0)

println(s0 * s1) // List(List(0, 0), List(0, 0), List(0, 0), List(0, 0)) 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2018-04-30T17:31:02.573

这是类似于[Milad 的响应](https://stackoverflow.com/a/42095955/790075)的东西，但不是递归的。

```
def cartesianProduct[T](seqs: Seq[Seq[T]]): Seq[Seq[T]] = {
  seqs.foldLeft(Seq(Seq.empty[T]))((b, a) => b.flatMap(i => a.map(j => i ++ Seq(j))))
} 
```

基于[这篇博文](http://thushw.blogspot.com/2015/10/cartesian-product-in-scala.html)。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-04-04T11:34:08.967

与其他回应类似，只是我的方法。

```
def loop(lst: List[List[Int]],acc:List[Int]): List[List[Int]] = {
  lst match {
    case head :: Nil => head.map(_ :: acc)
    case head :: tail => head.flatMap(x => loop(tail,x :: acc))
    case Nil => ???
  }
}
val l1 = List(10,20,30,40)
val l2 = List(2,4,6)
val l3 = List(3,5,7,9,11)

val lst = List(l1,l2,l3)

loop(lst,List.empty[Int]) 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2022-02-21T14:41:47.647

您可以使用应用程序：

```
import cats.implicits._
(xs,ys).mapN((x,y) => (x,y)) 
```

# c++ - Sprite 对象在放入 Vector 时不再渲染

> ID：14740200
> 
> 赞同：0
> 
> 时间：2013-02-06T22:35:48.507
> 
> 标签：c++, direct3d, direct3d9

使用 Direct3D 9 和 C++ 创建小型 2D 游戏。我遇到了一个我以前从未见过的问题。该游戏是基于商店的游戏，因此我有一个客户类。我已经在游戏中创建了对象，它呈现并表现出我想要的方式。我决定将对象放入 Vector 中，因为在某些时候，我会随时需要它们的集合。但是，我的问题是，当我将对象放入 Vector 时，它不再在屏幕上可见！

我没有错误。我已将 DirectX 函数的所有返回代码输出到测试文件中，没有任何失败。它运行良好，只是在屏幕上不可见！除了将其放入 Vector 之外，没有任何变化。

我将 Vector 更改为指针向量，因为有人告诉我 Vector 只是创建对象，复制它并删除原始对象。但是，现在看来，使用这种方法，我的 Direct3D 指针很快就会失效。我想我知道出了什么问题，但不确定最好的行动方案。

这是客户类：

```
#include "Headers.h"
#include "Playercard.h"

class Customer{

private:

LPDIRECT3DTEXTURE9 texture, playerInfoCard;
D3DXVECTOR3 position, direction, playerCardPosition;
D3DXVECTOR3 center;
LPD3DXFONT font;
POINT curPos;

HRESULT rc;

//Playercard playerCard;
int depthBuffer;
int walkingAlternator;

// Some information about the customer

char name[10];
int age;
double cash;

int itemWanted;
char productWanted[20];

bool happy;
bool male;
bool female;
bool displayPlayerCard;

RECT textBox;

Playercard playercard;

void assignNameAndGender()
{
    srand((unsigned int)time(0));
    int name_decider = rand() % 16 + 1;

    switch(name_decider)
    {
    case 1:
        strcpy_s(name, "John");
        male = true; female = false;
        break;
    case 2:
        strcpy_s(name, "Chris");
        male = true; female = false;
        break;
    case 3:
        strcpy_s(name, "Ben");
        male = true; female = false;
        break;
    case 4:
        strcpy_s(name, "Jack");
        male = true; female = false;
        break;
    case 5:
        strcpy_s(name, "Jamie");
        male = true; female = false;
        break;
    case 6:
        strcpy_s(name, "Bill");
        male = true; female = false;
        break;
    case 7:
        strcpy_s(name, "Liam");
        male = true; female = false;
        break;
    case 8:
        strcpy_s(name, "Alex");
        male = true; female = false;
        break;
    case 9:
        strcpy_s(name, "Nikki");
        male = false; female = true;
        break;
    case 10:
        strcpy_s(name, "Alice");
        male = false; female = true;
        break;
    case 11:
        strcpy_s(name, "Lucy");
        male = false; female = true;
        break;
    case 12:
        strcpy_s(name, "Emily");
        male = false; female = true;
        break;
    case 13:
        strcpy_s(name, "Laura");
        male = false; female = true;
        break;
    case 14:
        strcpy_s(name, "Mary");
        male = false; female = true;
        break;
    case 15:
        strcpy_s(name, "Katie");
        male = false; female = true;
        break;
    case 16:
        strcpy_s(name, "Emma");
        male = false; female = true;
        break;
    }
}

void assignAge()
{
    srand((unsigned int)time(0));
    age = rand() % 53 + 12;          // An age between 12 and 65
}

void assignCash()
{
    if(age < 16)
        cash = 5.00;
    if(age >= 16 && age <= 18)
        cash = 15.00;
    if(age >= 19 && age <= 21)
        cash = 20.00;
    if(age >= 22 && age <= 25)
        cash = 25.00;
    if(age >= 26 && age <= 30)
        cash = 30.00;
    if(age > 31)
    {
        int randNum = rand() % 9 + 1;

        switch(randNum)
        {
        case 1:
            cash = 20.00;
            break;
        case 2:
            cash = 25.00;
            break;
        case 3:
            cash = 30.00;
            break;
        case 4:
            cash = 35.00;
            break;
        case 5:
            cash = 40.00;
            break;
        case 6:
            cash = 45.00;
            break;
        case 7:
            cash = 50.00;
            break;
        case 8:
            cash = 55.00;
            break;
        case 9:
            cash = 60.00;
            break;
        }
    }
}

public:

Customer()
{
    direction.x = (float)cos(0.558)*4;    // 30 degree movement
    direction.y = (float)sin(0.558)*4;    // 30 degree movement
    position.x = 500;
    position.y = 500;
    displayPlayerCard = false;  // Only true when mouse clicked
    happy = true;               // A new customer is always happy at first!
    walkingAlternator = 1;      // Help control sprite movement

    strcpy_s(productWanted, "Xbox");
    assignNameAndGender();      // Assign customer a name
    assignAge();                // Assign customer an age
    assignCash();               // Assign customer an amount of cash
    playercard.load(name, male, age, cash, productWanted);
}

~Customer()
{
}

void move()
{
    if(KEY_DOWN(0x57) || KEY_DOWN(VK_UP))
    {
        position.y -= direction.y;
        position.x += direction.x;
        walkingUp();
    }
    else if(KEY_DOWN(0x41) || KEY_DOWN(VK_LEFT))
    {
        position.y -= direction.y;
        position.x -= direction.x;
        walkingLeft();
    }
    else if(KEY_DOWN(0x53) || KEY_DOWN(VK_DOWN))
    {
        position.y += direction.y;
        position.x -= direction.x;
        walkingDown();
    }
    else if(KEY_DOWN(0x44) || KEY_DOWN(VK_RIGHT))
    {
        position.y += direction.y;
        position.x += direction.x;
        walkingRight();
    }
    else
    {
        // Reset the sprite here so that the feet are together in resting position AND so that sprite is facing the way it was going when it stopped
    }
}

void loadGraphics()
{
    D3DXCreateTextureFromFileEx(d3dDevice, "player_information_card.png", D3DX_DEFAULT_NONPOW2, D3DX_DEFAULT_NONPOW2, 0, 0, 
        D3DFMT_UNKNOWN, D3DPOOL_DEFAULT, D3DX_DEFAULT, D3DX_DEFAULT, D3DCOLOR_XRGB(255, 255, 255), NULL, NULL, &playerInfoCard);

    D3DXCreateTextureFromFileEx(d3dDevice, "Characters/female_shopper1.png", D3DX_DEFAULT_NONPOW2, D3DX_DEFAULT_NONPOW2, 0, 0,
        D3DFMT_UNKNOWN, D3DPOOL_DEFAULT, D3DX_DEFAULT, D3DX_DEFAULT, D3DCOLOR_XRGB(255, 255, 255), NULL, NULL, &texture);

    D3DXVECTOR3 position(100.0f, 100.0f, 0.0f);
    D3DXVECTOR3 center(0.0f, 0.0f, 0.0f);

    D3DXCreateFont(d3dDevice,                   // the D3D Device
               20,                              // font height of 30
               0,                               // default font width
               FW_NORMAL,                       // font weight
               1,                               // not using MipLevels
               false,                           // italic font
               DEFAULT_CHARSET,                 // default character set
               OUT_DEFAULT_PRECIS,              // default OutputPrecision,
               DEFAULT_QUALITY,                 // default Quality
               DEFAULT_PITCH | FF_DONTCARE,     // default pitch and family
               "Georgia",                       // use Facename Arial
               &font);                          // the font object    
}

void draw()
{
    d3dSprite->Draw(texture, NULL, &center, &position, D3DCOLOR_ARGB(255, 255, 255, 255));

    if(displayPlayerCard) 
    {
        playerCardPosition = position;
        playerCardPosition.y -= 128;
        playerCardPosition.x += 32;

        SetRect(&textBox, (int)playerCardPosition.x+5, (int)playerCardPosition.y+5, (int)playerCardPosition.x+256-5, (int)playerCardPosition.y+128-5);

        d3dSprite->Draw(playerInfoCard, NULL, &center, &playerCardPosition, D3DCOLOR_ARGB(255, 255, 255, 255));
        font->DrawTextA(d3dSprite, playercard.plCard().c_str(), -1, &textBox, DT_LEFT, D3DCOLOR_ARGB(255, 255, 255, 255));
    }
}

void walkingDown()
{
    if(walkingAlternator == 1 || walkingAlternator == 2 || walkingAlternator == 3 || walkingAlternator == 4 || walkingAlternator == 5 
        || walkingAlternator == 6 || walkingAlternator == 7 || walkingAlternator == 8 || walkingAlternator == 9 || walkingAlternator == 10)
    {
        D3DXCreateTextureFromFileEx(d3dDevice, "Characters/female_shopper2.png", D3DX_DEFAULT_NONPOW2, D3DX_DEFAULT_NONPOW2, 0, 0, D3DFMT_UNKNOWN, D3DPOOL_DEFAULT,
        D3DX_DEFAULT, D3DX_DEFAULT, D3DCOLOR_XRGB(255, 255, 255), NULL, NULL, &texture);
        walkingAlternator++;
    }
    else if(walkingAlternator == 11 || walkingAlternator == 12 || walkingAlternator == 13 || walkingAlternator == 14 || walkingAlternator == 15
        || walkingAlternator == 16 || walkingAlternator == 17 || walkingAlternator == 18 || walkingAlternator == 19 || walkingAlternator == 20)
    {
        D3DXCreateTextureFromFileEx(d3dDevice, "Characters/female_shopper3.png", D3DX_DEFAULT_NONPOW2, D3DX_DEFAULT_NONPOW2, 0, 0, D3DFMT_UNKNOWN, D3DPOOL_DEFAULT,
        D3DX_DEFAULT, D3DX_DEFAULT, D3DCOLOR_XRGB(255, 255, 255), NULL, NULL, &texture);
        walkingAlternator++;
    }

    if(walkingAlternator >= 20)
    {
        walkingAlternator = 1;
    }
}

void walkingUp()
{
    if(walkingAlternator == 1 || walkingAlternator == 2 || walkingAlternator == 3 || walkingAlternator == 4 || walkingAlternator == 5 
        || walkingAlternator == 6 || walkingAlternator == 7 || walkingAlternator == 8 || walkingAlternator == 9 || walkingAlternator == 10)
    {
        D3DXCreateTextureFromFileEx(d3dDevice, "Characters/female_shopper1_back2.png", D3DX_DEFAULT_NONPOW2, D3DX_DEFAULT_NONPOW2, 0, 0, D3DFMT_UNKNOWN, D3DPOOL_DEFAULT,
        D3DX_DEFAULT, D3DX_DEFAULT, D3DCOLOR_XRGB(255, 255, 255), NULL, NULL, &texture);
        walkingAlternator++;
    }
    else if(walkingAlternator == 11 || walkingAlternator == 12 || walkingAlternator == 13 || walkingAlternator == 14 || walkingAlternator == 15
        || walkingAlternator == 16 || walkingAlternator == 17 || walkingAlternator == 18 || walkingAlternator == 19 || walkingAlternator == 20)
    {
        D3DXCreateTextureFromFileEx(d3dDevice, "Characters/female_shopper1_back1.png", D3DX_DEFAULT_NONPOW2, D3DX_DEFAULT_NONPOW2, 0, 0, D3DFMT_UNKNOWN, D3DPOOL_DEFAULT,
        D3DX_DEFAULT, D3DX_DEFAULT, D3DCOLOR_XRGB(255, 255, 255), NULL, NULL, &texture);
        walkingAlternator++;
    }

    if(walkingAlternator >= 20)
    {
        walkingAlternator = 1;
    }
}

void walkingLeft()
{
    if(walkingAlternator == 1 || walkingAlternator == 2 || walkingAlternator == 3 || walkingAlternator == 4 || walkingAlternator == 5 
        || walkingAlternator == 6 || walkingAlternator == 7 || walkingAlternator == 8 || walkingAlternator == 9 || walkingAlternator == 10)
    {
        D3DXCreateTextureFromFileEx(d3dDevice, "Characters/female_shopper1_back3.png", D3DX_DEFAULT_NONPOW2, D3DX_DEFAULT_NONPOW2, 0, 0, D3DFMT_UNKNOWN, D3DPOOL_DEFAULT,
        D3DX_DEFAULT, D3DX_DEFAULT, D3DCOLOR_XRGB(255, 255, 255), NULL, NULL, &texture);
        walkingAlternator++;
    }
    else if(walkingAlternator == 11 || walkingAlternator == 12 || walkingAlternator == 13 || walkingAlternator == 14 || walkingAlternator == 15
        || walkingAlternator == 16 || walkingAlternator == 17 || walkingAlternator == 18 || walkingAlternator == 19 || walkingAlternator == 20)
    {
        D3DXCreateTextureFromFileEx(d3dDevice, "Characters/female_shopper1_back4.png", D3DX_DEFAULT_NONPOW2, D3DX_DEFAULT_NONPOW2, 0, 0, D3DFMT_UNKNOWN, D3DPOOL_DEFAULT,
        D3DX_DEFAULT, D3DX_DEFAULT, D3DCOLOR_XRGB(255, 255, 255), NULL, NULL, &texture);
        walkingAlternator++;
    }

    if(walkingAlternator >= 20)
    {
        walkingAlternator = 1;
    }
}

void walkingRight()
{
    if(walkingAlternator == 1 || walkingAlternator == 2 || walkingAlternator == 3 || walkingAlternator == 4 || walkingAlternator == 5 
        || walkingAlternator == 6 || walkingAlternator == 7 || walkingAlternator == 8 || walkingAlternator == 9 || walkingAlternator == 10)
    {
        D3DXCreateTextureFromFileEx(d3dDevice, "Characters/female_shopper4.png", D3DX_DEFAULT_NONPOW2, D3DX_DEFAULT_NONPOW2, 0, 0, D3DFMT_UNKNOWN, D3DPOOL_DEFAULT,
        D3DX_DEFAULT, D3DX_DEFAULT, D3DCOLOR_XRGB(255, 255, 255), NULL, NULL, &texture);
        walkingAlternator++;
    }
    else if(walkingAlternator == 11 || walkingAlternator == 12 || walkingAlternator == 13 || walkingAlternator == 14 || walkingAlternator == 15
        || walkingAlternator == 16 || walkingAlternator == 17 || walkingAlternator == 18 || walkingAlternator == 19 || walkingAlternator == 20)
    {
        D3DXCreateTextureFromFileEx(d3dDevice, "Characters/female_shopper5.png", D3DX_DEFAULT_NONPOW2, D3DX_DEFAULT_NONPOW2, 0, 0, D3DFMT_UNKNOWN, D3DPOOL_DEFAULT,
        D3DX_DEFAULT, D3DX_DEFAULT, D3DCOLOR_XRGB(255, 255, 255), NULL, NULL, &texture);
        walkingAlternator++;
    }

    if(walkingAlternator >= 20)
    {
        walkingAlternator = 1;
    }
}

void checkInteractivity()
{
    GetCursorPos(&curPos);
    if (GetKeyState(VK_LBUTTON) & 0x80 &&                        
        curPos.x >= position.x && curPos.x <= position.x+64 &&   
        curPos.y >= position.y && curPos.y <= position.y+128)    
    {
        displayPlayerCard = true;
    }
    else
    {
        displayPlayerCard = false;
    }
}

D3DXVECTOR3 returnPosition()
{
    return position;
}

D3DXVECTOR3 returnPosition(bool returnCentreOfSprite)
{
    return position;
}

}; 
```

这是主要的代码

```
#include "Headers.h."
#include "Customer.h"
#include "Background.h"
#include "Counter.h"
#include "GameStations.h"
#include "ConsoleCab.h"
#include "ClothesStand.h"
#include "GamePanel.h"

    std::vector<Customer*> customers;

Background background;
Counter counter;
GameStations gameStations;
ConsoleCab consoleCab;
ClothesStand clothesStand;
GamePanel gamePanel;

void initDirectX(HWND hWnd);       // Initializes Direct3D Graphics
void render();                     // Render graphics
void cleanUp();                    // Cleans everything up and releases memory

LRESULT CALLBACK WindowProc(HWND hWnd, UINT message, WPARAM wParam, LPARAM lParam);

int WINAPI WinMain(HINSTANCE hInstance, HINSTANCE hPrevInstance, LPSTR lpCmdLine, int nCmdShow)
{
    HWND hWnd;                                          // The handle to the window function
    WNDCLASSEX window;                                  // Pointer to window struct
    ZeroMemory(&window, sizeof(WNDCLASSEX));            // Clears window class so we can use it
    window.cbSize = sizeof(WNDCLASSEX);                 // Size of window
    window.style = CS_HREDRAW | CS_VREDRAW;             // Redraws the entire window if a movement or size adjustment changes the height of the client area. 
    window.lpfnWndProc = WindowProc;                    // Pointer to the window procedure
    window.hInstance = hInstance;                       // Handle to current instance
    window.hCursor = LoadCursor(NULL, IDC_ARROW);       // We'll stick with the normal cursor here
    window.lpszClassName = "Window";                    // Gives the class a name
    RegisterClassEx(&window);                           // Registers the window class 

    hWnd = CreateWindowEx(NULL,
        "Window",                     // Name of the class
        "Space Game",                 // Title of the window
        WS_EX_TOPMOST | WS_POPUP,     // Fullscreen
        0, 0,                         // Position of window (0,0 for fullscreen)
        SCREEN_WIDTH, SCREEN_HEIGHT,  // Screen resolution (Uses global declaration)
        NULL,                         // Parent window (None)
        NULL,                         // Menus (None)
        hInstance,                    // Application handle
        NULL);                        // Set to NULL as we aren't using more than 1 window

    ShowWindow(hWnd, nCmdShow);                         // Display window
    initDirectX(hWnd);                                  // Initialises the directX graphics
    MSG msg = {0};                                      // msg holds the Windows events message queue

    customers.push_back(new Customer());

    for (std::vector<Customer*>::iterator customerIT = customers.begin(); customerIT != customers.end(); customerIT++)
    {
         (*customerIT)->loadGraphics();
    } // Object properties become invalid here.

    background.loadGraphics();
    counter.loadGraphics();
    gameStations.loadGraphics();
    consoleCab.loadGraphics();
    clothesStand.loadGraphics();
    gamePanel.loadGraphics();

    /************************************** Main game loop *************************************************/

    while(TRUE)                                         // Main game loop
    {
        if(PeekMessage(&msg, NULL, 0, 0, PM_REMOVE))     // If messages are waiting
        {
            TranslateMessage(&msg);                      // Translates the keystroke messages into the correct format
            DispatchMessage(&msg);                       // Sends message to the windowsProc function
            if(msg.message == WM_QUIT)                   // If the message was a quit message
                break;                                   // Breaks out of main game loop
        }
        else                  
        {

        for (std::vector<Customer*>::iterator customerIT = customers.begin(); customerIT != customers.end(); customerIT++)
        {
            (*customerIT)->checkInteractivity();
            (*customerIT)->move();
        }

            gamePanel.hoverDetection();
            render();
        }
    }

    /*******************************************************************************************************/

    // We are out of the main game loop (Due to a WM_QUIT signal)
    cleanUp();                                          // Do some housekeeping before quitting
    return msg.wParam;                                  // Return the WM_QUIT message to Windows. End of program
}

LRESULT CALLBACK WindowProc(HWND hWnd, UINT message, WPARAM wParam, LPARAM lParam)
{
    switch(message)                                     // Sorts through messages
    {
    case WM_DESTROY:                                // When window has been closed
        {
            PostQuitMessage(0);                     // Closes the application
            return 0;  
        } 
        break;
    }
    return DefWindowProc (hWnd,                         // Returns any messages the switch statement didn't pick up
        message,
        wParam,
        lParam);
}

void initDirectX(HWND hWnd)
{
    d3d = Direct3DCreate9(D3D_SDK_VERSION);              // Create DirectX9 interface
    D3DPRESENT_PARAMETERS d3dParameters;                 // Pointer to DirectX9 parameters

    ZeroMemory(&d3dParameters, sizeof(d3dParameters));   // Clears the structure so we can use it
    d3dParameters.Windowed = FALSE;                      // Fullscreen
    d3dParameters.SwapEffect = D3DSWAPEFFECT_DISCARD;    // Get rid of old framess
    d3dParameters.hDeviceWindow = hWnd;                  // Sets the window to be used by Direct3D
    d3dParameters.BackBufferFormat = D3DFMT_X8R8G8B8;    // Sets the back buffer format to 32-bit
    d3dParameters.BackBufferWidth = SCREEN_WIDTH;        // Sets the width of the buffer
    d3dParameters.BackBufferHeight = SCREEN_HEIGHT;      // Sets the height of the buffer

    d3d->CreateDevice(D3DADAPTER_DEFAULT,                // Creates a device class
        D3DDEVTYPE_HAL,
        hWnd,
        D3DCREATE_SOFTWARE_VERTEXPROCESSING,
        &d3dParameters,
        &d3dDevice);

    D3DXCreateSprite(d3dDevice, &d3dSprite);
}

void render()
{
    d3dDevice->Clear(0, NULL, D3DCLEAR_TARGET, D3DCOLOR_XRGB(10, 0, 32), 1.0f, 0);   // Clears the screen to a dark blue
    d3dDevice->BeginScene();                                                         // Begins Direct3D scene
    d3dSprite->Begin(D3DXSPRITE_ALPHABLEND);                                         // Begin sprite drawing

    background.draw();

    counter.draw();
    gameStations.draw();
    consoleCab.draw();
    clothesStand.draw();
    gamePanel.updateInformation(564.55, 800.56, 1034.54, "July");

    for (std::vector<Customer*>::iterator customerIT = customers.begin(); customerIT != customers.end(); customerIT++)
    {
        (*customerIT)->draw();
    }

    gamePanel.draw();

    d3dSprite->End();                                                                // End drawing
    d3dDevice->EndScene();                                                           // Ends the Direct3D scene
    d3dDevice->Present(NULL, NULL, NULL, NULL);                                      // Presents the Direct3D scene (Displays to screen)
}

void cleanUp()
{
    d3dDevice->Release();   // Closes the Direct3D device and releases memory
    d3d->Release();         // Closes Direct3D and releases memory
} 
```

如果我没有正确解释某些事情或遗漏了什么，我会提前道歉。我因试图解释事情而臭名昭著！：/ 谁能帮我吗？开始认为我应该在这个项目中坚持使用 XNA 并稍后更深入地了解指针和向量......不过现在为时已晚:(

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T19:02:14.497

Vector 通过复制元素来存储元素。所以，当你这样做时，`vector.push_back(Customer())`你实际上做了以下事情：

1.  创建新的客户对象。
2.  **将其复制**到向量中。由于您不覆盖赋值运算符，所有成员都按值复制，包括 D3D 指针。
3.  销毁原始客户对象。析构函数释放所有资源。

第 3 步是问题，因为现在 vector 有一个无效对象的副本：它的所有资源都被释放了。我敢打赌这是问题所在，但您的代码没有定义 Customer 的析构函数（或者您没有粘贴它）所以，我不确定。但无论如何，设计远非完美。

我可能建议的是存储**指向**客户的指针。如果我的理论是正确的，这将有助于运行这个特定的代码示例。

```
std::vector<Customer*> customers;
customers.push_back(new Customer()); 
```

当然，您必须处理分配的内存的释放。

顺便说一下，开始检查 D3D 调用结果。没有这个，任何调试都将是一场噩梦（而且已经是）。我的猜测是`d3dSprite->Draw`由于缺少纹理而失败，您可以从那里开始检查。

另一个问题在于`loadGraphics`方法。这段代码：

```
D3DXVECTOR3 position(100.0f, 100.0f, 0.0f);
D3DXVECTOR3 center(0.0f, 0.0f, 0.0f); 
```

可能应该为对象字段设置初始值，但实际上在这里您构造了新的本地对象，这些对象在退出时被销毁。字段`Customer::position`/`Customer::center`实际上未初始化。然后，在`Draw`方法中使用这些未初始化的字段。尝试解决这个问题，希望这会有所帮助。

# object - 如何将对象传递给 Symfony2 中的方法？

> ID：14740207
> 
> 赞同：0
> 
> 时间：2013-02-06T22:36:24.837
> 
> 标签：object, symfony, php

单击链接时，我在我的 AlbumController 中传递了一个对象 ID：

```
<?php

namespace YM\TestBundle\Controller;

use Symfony\Bundle\FrameworkBundle\Controller\Controller;
use Symfony\Component\HttpFoundation\Response;

class AlbumController extends Controller
{
    public function deleteAction($id)
    {

        if ($id > 0) {
            // We get the EntityManager
            $em = $this->getDoctrine()
                       ->getEntityManager();

            // We get the Entity that matches id: $id
            $article = $em->getRepository('YMTestBundle:Album')
                          ->find($id);

            // If the Album doesn't exist, we throw out a 404 error
            if ($article == null) {
              throw $this->createNotFoundException('Album[id='.$id.'] do not exist');
            }

              // We delete the article
            $em->remove($article);
            $em->flush();

            $this->get('session')->getFlashBag()->add('info', 'Album deleted successfully');

              // Puis on redirige vers l'accueil
              return $this->redirect( $this->generateUrl('ymtest_Artist') );
        }
        return $this->redirect( $this->generateUrl('ymtest_dashboard') );
    }
} 
```

它有效。

但是在stackoverflow上看到了一些东西，他们传递了一个我想重现的对象（我听说S2能够自己找到它）：

```
<?php

namespace YM\TestBundle\Controller;

use Symfony\Bundle\FrameworkBundle\Controller\Controller;
use Symfony\Component\HttpFoundation\Response;

class AlbumController extends Controller
{
    public function deleteAction(Album $album)
    {
        // We get the EntityManager
        $em = $this->getDoctrine()
                   ->getEntityManager();

        // If the Album doesn't exist, we throw out a 404 error
        if ($lbum == null) {
          throw $this->createNotFoundException('Album[id='.$id.'] do not exist');
        }

          // We delete the article
        $em->remove($album);
        $em->flush();

        $this->get('session')->getFlashBag()->add('info', 'Album deleted successfully');

          // Puis on redirige vers l'accueil
          return $this->redirect( $this->generateUrl('ymtest_Artist') );

        return $this->redirect( $this->generateUrl('ymtest_dashboard') );
    }
} 
```

但它不起作用，我有：

> 类 YM\TestBundle\Controller\Album 不存在

为什么 ？谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-06T23:02:20.130

首先你忘记了使用声明：

```
use  YM\TestBundle\Entity\Album; 
```

在您的情况下，symfony 在当前命名空间（即 Controller）中查找 Album 类。

Moveover，您可能需要阅读有关 ParamConverter （您询问的机制）的更多信息：

[http://symfony.com/doc/current/bundles/SensioFrameworkExtraBundle/annotations/converters.html](http://symfony.com/doc/current/bundles/SensioFrameworkExtraBundle/annotations/converters.html)

尝试在您的方法注释中添加类似的内容（并且不要忘记此注释的适当命名空间）：

```
use Sensio\Bundle\FrameworkExtraBundle\Configuration\ParamConverter;

(...)

/**
 * @ParamConverter("album", class="YMTestBundle:Album")
 */
public function deleteAction(Album $album)
{
   (...) 
```

：

# ios - 来自 ios 应用程序的帖子被错误识别为活动日志中的共享

> ID：14740211
> 
> 赞同：1
> 
> 时间：2013-02-06T22:36:57.633
> 
> 标签：ios, facebook, facebook-graph-api, sharing

当我们从我们的 ios 应用发布链接时，它会以“via AppName”正确显示在用户的时间线上。

但是，当查看用户的活动日志时，我们的帖子显示如下：

“用户分享了一个链接。”

另一方面，当通过 Zite 分享时，它看起来像这样：

“用户通过 Zite 发布了一些内容。”

此外，当点击活动日志中的所有应用程序时，我们应用程序的帖子没有显示，而 Zite 和 Twitter 的帖子显示。

我的问题是，我们如何才能让我们的应用程序帖子在活动源中以与 Zite 和 Twitter 以及其他此类应用程序相同的方式出现。

仅供参考，我们的应用程序已经在 App Center 中，并且在 Apple Store 中上线。

谢谢你的帮助！

# haskell - 单子的自由单子

> ID：14740213
> 
> 赞同：16
> 
> 时间：2013-02-06T22:37:02.163
> 
> 标签：haskell, free-monad

`x >>= f`相当于`retract (liftF x >>= liftF . f)`？_

也就是说，从同样是 Monad 的 Functor 构建的自由 monad 的 monad 实例是否将具有与原始 Monad 等效的 monad 实例？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-07T03:02:32.347

我不知道你的定义`retract`是什么，但给定

```
retract :: Monad m => Free m a -> m a
retract (Pure a) = return a
retract (Impure fx) = fx >>= retract 
```

和

```
liftF :: Functor f => f a -> Free f a
liftF fx = Impure (fmap Pure fx) 
```

请注意（证明可能是错误的，手工制作并且没有检查过）

```
retract $ liftF x
= retract (Impure (fmap Pure x))
= (fmap Pure x) >>= retract
= (x >>= return . Pure) >>= retract
= x >>= \y -> (return $ Pure y) >>= retract
= x >>= \y -> (retract (Pure y))
= x >>= \y -> return y
= x >>= return
= x 
```

所以你有了

```
retract (liftF x >>= liftF . f)
= retract ((Impure (fmap Pure x)) >>= liftF . f)
= retract $ Impure $ fmap (>>= liftF . f) $ fmap Pure x
= (fmap (>>= liftF . f) $ fmap Pure x) >>= retract
= (fmap (\y -> Pure y >>= liftF . f) x) >>= retract
= (fmap (liftF . f) x) >>= retract
= (liftM (liftF . f) x) >>= retract
= (x >>= return . liftF . f) >>= retract
= x >>= (\y -> (return $ liftF $ f y >>=  retract)
= x >>= (\y -> retract $ liftF $ f y)
= x >>= (\y -> retract . liftF $ f y)
= x >>= (\y -> f y)
= x >>= f 
```

这并不意味着它`Free m a`同构于`m a`，只是那`retract`确实是一个撤回的见证。请注意，这*不是*`liftF`单子态射（不去）。Free 是函子类别中的函子，但它不是单子类别中的单子（尽管看起来很像并且看起来很像）。*`return``return``retract``join``liftF``return`*

 *编辑：请注意，撤回意味着一种等价。定义

```
 ~ : Free m a -> Free m a -> Prop
 a ~ b = (retract a) ==_(m a) (retract b) 
```

然后考虑商类型`Free m a/~`。我断言这种类型与`m a`. 由于. `(liftF (retract x)) ~ x`_ `(retract . liftF . retract $ x) ==_(m a) retract x`因此，一个单子上的自由单子就是那个单子加上一些额外的数据。这与当is是一个幺半群时`[m]`“本质上相同”的声明完全相同。`m``m``m`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-07T06:26:11.573

> 也就是说，从同样是 Monad 的 Functor 构建的自由 monad 的 monad 实例是否将具有与原始 Monad 等效的 monad 实例？

*不。任何*函子上的自由单子都是单子。因此，它不能神奇地知道 Monad 实例何时存在。它也不能“猜测”它，因为同一个函子可能以不同的方式成为 Monad（例如，不同幺半群的 writer monad）。

另一个原因是问这两个 monad 是否有等价的实例没有多大意义，因为它们甚至不是同构的类型。例如，考虑一下 writer monad 上的 free monad。它将是一个类似列表的结构。这两个实例相等意味着什么？

## 不同 monad 实例的示例

如果上面的描述不清楚，这里有一个具有许多可能 Monad 实例的类型示例。

```
data M a = M Integer a

bindUsing :: (Integer -> Integer -> Integer) -> M a -> (a -> M b) -> M b
bindUsing f (M n a) k =
  let M m b = k a
  in M (f m n) b

-- Any of the below instances is a valid Monad instance
instance Monad M where
  return x = M 0 x
  (>>=) = bindUsing (+)

instance Monad M where
  return x = M 1 x
  (>>=) = bindUsing (*) 
```*

# html - 我们可以在本地存储 LocalMediaStream 吗？

> ID：14740214
> 
> 赞同：0
> 
> 时间：2013-02-06T22:37:02.290
> 
> 标签：html, local-storage, getusermedia

在 WebRTC 中，getUserMedia() 为您提供了一个 MediaStreamObject - LocalMediaStream。HTML5ROCKS 有一个教程，您可以在其中中继相机。是否可以将 LocalMediaStream 存储在 localstorage 中，然后将原始字节数组数据传递给服务器？

这是 HTML5ROCKS 文章：http: [//www.html5rocks.com/en/tutorials/getusermedia/intro/](http://www.html5rocks.com/en/tutorials/getusermedia/intro/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T23:57:49.897

不幸的是，目前这是不可能的。另一个问题是本地存储的大小通常是有限的（几兆字节）。还有一个问题是原始字节数组数据浪费了太多空间。这将是一个未压缩的视频，大小很快就会达到几 GB。

# asp.net - MVC 自定义角色提供者重定向到登录页面

> ID：14740216
> 
> 赞同：2
> 
> 时间：2013-02-06T22:37:16.640
> 
> 标签：asp.net, asp.net-mvc, asp.net-mvc-3, asp.net-mvc-4

嗨，我正在使用自定义角色提供程序，并且一切似乎都工作正常，如果用户有权限，则他们被允许进入，如果没有，他们将被重定向到登录页面。

但我想知道的是，当他们被重定向到登录页面时，是否有办法在登录页面中设置一条消息，说明访问被拒绝或其他内容。因此，例如，我想要如下所示的 User.FailedCustomRole？我不确定这样的东西是否存在于某处的对象中：

```
 [AllowAnonymous]
    public ActionResult Login()
    {
        if (User.FailedCustomRole) {
            ViewBag.Message = "No access to this page";
        }
        return View();
    } 
```

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T23:04:50.883

*   一种方法是更改​​ web.config 以将用户重定向到参数为 1 的登录页面。

更改您的登录操作以采用可为空的 int，如果设置，则添加模型状态错误

```
 public ActionResult LogOn(int? id)
    {
        //int id = Request.QueryString[;
        if (id != null)
        {
            LogOnModel model = new LogOnModel();
            ModelState.AddModelError("", "Please Login to use this page");

            return View(model);
        } 
```

*   第二种方法是创建一个操作过滤器来检查登录并重定向设置 Viewbag.LoginError

    ```
    public class CheckLoginFilterAttribute : ActionFilterAttribute
    {
        public override void onactionexecuting(ActionExecutedContext filterContext)
        {
                    if (Membership.GetUser() != null)
                    {
                 Viewbag.LoginError = "Please Login to use this page";
                filterContext.Result = new RedirectToRouteResult(
        new System.Web.Routing.RouteValueDictionary {
            {"controller", "Account"}, {"action", "Logon"}
                    }
            {

            }
        base.OnActionExecuted(filterContext);
    } 
    ```

    向您的登录页面添加一个显示`@(Viewbag.LoginError)`. 如果未填充，这将呈现空白。

*   第三种方法是创建一个自定义授权过滤器，该过滤器重定向并在 V@(ViewData["LoginError"].

向您的登录页面添加一个显示`@(ViewData["LoginError"]`. 如果未填充，这将呈现空白。

**请注意**，我对最后一种方法不太确定或不满意。

# crystal-reports - 交叉表总计 Crystal

> ID：14740222
> 
> 赞同：1
> 
> 时间：2013-02-06T22:37:41.510
> 
> 标签：crystal-reports, crosstab

我正在使用水晶报表 10，

我需要在 2012 年、2013 年的每一年中拆分总列，而不是在一个列中总结所有内容，请，任何建议都应该有帮助......

这就是我所拥有的：

```
              第 1 周 第 2 周 第 3 周 第 4 周 总计
           2012 2013 2012 2013 2012 2013 2012 2013
元1 96,900 33,350 96,900 55,584 96,900 55,584 96,900 77,818 609,936
```

这就是我需要的：

```
        第 1 周 第 2 周 第 3 周 第 4 周 总计
       2012 2013 2012 2013 2012 2013 2012 2013 2012 2013
元1 96,900 33,350 96,900 55,584 96,900 55,584 96,900 77,818 387,6​​00 222,336
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-06-16T16:26:30.120

不幸的是，交叉表网格中的总计功能无法按年份分隔您的总计。

如果您使用的是存储过程，那么您将必须进行数学计算并选择 SQL 中的总计，然后像其他列一样简单地显示它。这意味着您不需要交叉表自动为您创建任何总计，因此您可以通过右键单击交叉表网格并选择“交叉表专家”然后进入“自定义样式”选项卡并取消选中框来关闭它们显示总数。

如果您不使用存储过程，那么它仍然可以在 Crystal Reports 中使用。如果您需要纯水晶解决方案，请告诉我，但您现在可能已经想通了，因为我的回复是在一年多之后。希望这可以帮助某人。

# php - 如何让这个模式窗口在加载时打开 - PHP

> ID：14740228
> 
> 赞同：0
> 
> 时间：2013-02-06T22:38:02.077
> 
> 标签：php, javascript, jquery, html

我从以下链接下载了登录模式。[http://www.alessioatzeni.com/blog/login-box-modal-dialog-window-with-css-and-jquery/](http://www.alessioatzeni.com/blog/login-box-modal-dialog-window-with-css-and-jquery/)

我对 CSS 做了一些更改，但仅此而已。

这是当我单击按钮时启动模式窗口的 jQuery 代码。

```
$(document).ready(function() {
$('a.loginbutton').click(function() {

    // Getting the variable's value from a link 
    var loginBox = $(this).attr('href');

    //Fade in the Popup and add close button
    $(loginBox).fadeIn(300);
    $.fn.formLabels(); //Initialize form labels

    //Set the center alignment padding + border
    var popMargTop = ($(loginBox).height() + 24) / 2; 
    var popMargLeft = ($(loginBox).width() + 24) / 2; 

    $(loginBox).css({ 
        'margin-top' : -popMargTop,
        'margin-left' : -popMargLeft
    });

    // Add the mask to body
    $('body').append('<div id="mask"></div>');
    $('#mask').fadeIn(300);

    return false;
});

// When clicking on the button close or the mask layer the popup closed
$('a.close, #mask').live('click', function() { 
  $('#mask , .login-popup').fadeOut(300 , function() {
    $('#mask').remove();  
}); 
return false;
});
    }); 
```

基本上，我需要这个模式来加载页面加载。我几乎不知道 jQuery，因此我下载了这个插件。我真的需要这个工作。

我已经尝试联系编写此代码的人，但他从未回复过。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-06T22:43:07.197

```
$('a.loginbutton').click(); 
```

只需添加该行，以在页面加载时执行单击事件。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-06T22:42:49.460

您的代码正在等待用户在加载模式之前单击登录按钮。试试这个：

```
$(document).ready(function() {
//$('a.loginbutton').click(function() {

// Getting the variable's value from a link 
var loginBox = $(this).attr('href');

//Fade in the Popup and add close button
$(loginBox).fadeIn(300);
$.fn.formLabels(); //Initialize form labels

//Set the center alignment padding + border
var popMargTop = ($(loginBox).height() + 24) / 2; 
var popMargLeft = ($(loginBox).width() + 24) / 2; 

$(loginBox).css({ 
    'margin-top' : -popMargTop,
    'margin-left' : -popMargLeft
});

// Add the mask to body
$('body').append('<div id="mask"></div>');
$('#mask').fadeIn(300);

return false;
});
// When clicking on the button close or the mask layer the popup closed
$('a.close, #mask').live('click', function() { 
  $('#mask , .login-popup').fadeOut(300 , function() {
    $('#mask').remove();  
}); 
return false;
//});
}); 
```

我想我已经注释掉了 .click() 函数。

$(document).ready(function(){}); 中的任何内容 页面完成加载后将立即触发。

$('a.loginbutton').click(function() {}); 中的任何内容 只有当用户单击该按钮时才会触发。

# c++ - C++中无参数和空参数有什么区别？

> ID：14740229
> 
> 赞同：0
> 
> 时间：2013-02-06T22:38:13.837
> 
> 标签：c++, parameters, void

我最近从 Java 转向学习 C++，我是这门语言的新手，所以我需要你的帮助 :)

有什么不同？

```
void method(void) {

} 
```

和

```
void method() {

} 
```

非常感谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-06T22:39:02.863

在 C++ 中，没有区别——它们都意味着一个接受零参数的函数。

在 C 中，`()`表示一个接受*任意数量参数*的函数，而`(void)`表示一个接受零个参数的函数。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-06T22:38:52.957

没有任何。C 中存在差异（`void`表示没有参数，nothing 表示参数数量未知）但在 C++ 中没有；他们是一样的。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-06T22:39:34.693

在 C++ 中没有区别，它们是相同的

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-06T22:41:35.013

C++ 是完全相同的，但是在 C 中它意味着一个函数，它可以接受任何 # 个参数。这实际上只是一个由你决定的风格问题。

# sharepoint - SharePoint 2010 SQL 中存储的文档库项目的位置

> ID：14740246
> 
> 赞同：2
> 
> 时间：2013-02-06T22:39:19.740
> 
> 标签：sharepoint, sharepoint-2010

有谁知道上传到文档库的文件存储在 SQL 中的哪个数据库和哪个表？我在 SQL 中到处寻找，但在任何地方都找不到它们。我正在尝试将文档从 SQL 中提取出来。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T03:16:48.747

It's a bad idea to access the SharePoint content database directly. The structure and behavior of those tables are subject to change without notice.

More importantly, there are three APIs to access this data. These APIs are *not* subject to change.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-08-30T18:13:27.560

这个问题是 3 岁的，但出于历史目的，这里的答案是： [文档库项目在哪里存储在 db 中？](https://sharepoint.stackexchange.com/a/192349/59550)

**它们存储在** `[AllLists]` **表中。**

```
SELECT TOP 1000 [tp_Title]  
  FROM [DatabaseName].[SchemaName].[AllLists] where [tp_BaseType] = 1 
```

DatabaseName = 您的数据库名称

SchemaName = 基本上，这是 [dbo]

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-02-06T22:56:35.520

看看 AllDocs 表，这是您要找的吗？

...这有一个技巧，您有标记为 Sharepoint_[contentname]_content 的内容数据库。我不知道有一种方法可以在不使用联合的情况下一次获取所有文档，具体取决于您的共享点实现。

# jqgrid - jqgrid选择复选框

> ID：14740258
> 
> 赞同：0
> 
> 时间：2013-02-06T22:40:09.037
> 
> 标签：jqgrid

通过使用以下代码，我的网格上有一个复选框：

```
 colNames: [..., 'Select'],
     ...
     ...

     { name: 'act', index: 'act', width: 30, sortable: false }
     ....

     <input type="button" id="bUpload" value="Upload Report" /> 
```

用户单击“上传”按钮的内容，并且用户为此列选择了多个复选框，我想显示一条消息。我不知道该怎么做。

我尝试了以下但是

```
 $("#bUpload").click(function() {

       var selectedRow;

       if ($("input:checked").length > 1)
       {
          alert('Error -  Please select only one row.');
          return false;
       }

       if ($("input:checked").length > 0) 
       {              
          $("input:checked").each(function() 
          {
             selectedRow = this.value ;
          });
        } 
```

……

这行得通，但我不喜欢这样的原因是因为我可以为其他列设置其他复选框，以及是否会混淆它们是否从“act”列中选择。我怎么说该列是否用于“行为”，然后检查选择了多少。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T00:42:31.390

您可以遍历网格上的每一行并测试每一行。

```
//iterate over each row 
var rowIds = $('#gridName').jqGrid('getDataIDs');

for (i = 1; i <= rowIds.length; i++) {
    rowData = $('#gridName').jqGrid('getRowData', i);

    if(rowData['act'] //etc..checkbox check) {

    }//if
}//for 
```

# css - 在 Wordpress 中使用 CSS3Pie... 一切正常，但仍然无法正常工作

> ID：14740262
> 
> 赞同：0
> 
> 时间：2013-02-06T22:40:26.887
> 
> 标签：css, internet-explorer-8, css3pie

我正在尝试在 IE8 中在我的滑块的导航选项卡上进行圆角处理：csr.steelcase.com ...（“我们的愿景”、“我们的 CEO 致辞”等）

该网站是用 WordPress 编写的，我已经按照我读过的几篇文章正确安装了 CSS3PIE，但无论出于何种原因，我仍然无法在 IE8 中转角。我也尝试过链接到 PIE.htc 文件...无济于事。

```
 body.company .flex-control-paging li a.flex-active{background: white; color:#333;
-webkit-border-top-left-radius: 10px;
-webkit-border-top-right-radius: 10px;
-moz-border-radius-topleft: 10px;
-moz-border-radius-topright: 10px;
border-top-left-radius: 10px;
border-top-right-radius: 10px;
zoom: 1;
position: relative;
behavior: url(http://csr.steelcase.com/wp-content/themes/steelcase360_theme_csr/pie_ver1/PIE.php);
} 
```

有没有人有任何想法？谢谢你的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T00:35:41.720

PIE.htc 只支持边框半径的简写版本，所以使用这个：

```
body.company .flex-control-paging li a.flex-active{
    background: white;
    color:#333;
    -webkit-border-radius: 10px 10px 0 0;
    -moz-border-radius: 10px 10px 0 0;
    border-radius: 10px 10px 0 0;
    zoom: 1;
    position: relative;
    behavior: url(http://csr.steelcase.com/wp-content/themes/steelcase360_theme_csr/pie_ver1/PIE.php);
} 
```

[http://css3pie.com/documentation/supported-css3-features/#border-radius](http://css3pie.com/documentation/supported-css3-features/#border-radius)

# javascript - 无法在 jQuery 上显示单击功能

> ID：14740263
> 
> 赞同：0
> 
> 时间：2013-02-06T22:40:27.843
> 
> 标签：javascript, jquery, hide, show

我无法让我的 jQuery 工作。

当 div 关闭时，我想要文本“显示更多”，然后在它打开时显示“显示更少”。

此文本在打开时有效，但在关闭时不会更改..

```
 $('.more_content').click(function(){
        $('p.show').text($('p.show').is(':visible') ? 'Show less' : 'Show more');
        $('#extra_content').slideToggle('fast')              
    }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T22:55:13.187

该声明

```
$('p.show').is(':visible') 
```

应该：

```
$('#extra_content').is(':visible') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T00:37:36.697

```
$('.more_content').click(function(){
$('#extra_content').is(':visible') ? $('p.show').text('Läs mer om oss') : $('p.show').text('Läs mindre om oss') ;
$('#extra_content').slideToggle('fast')
enter code here}); 
```

# css - 如何仅覆盖多背景图像声明中的第二个图像？

> ID：14740266
> 
> 赞同：8
> 
> 时间：2013-02-06T22:40:31.090
> 
> 标签：css, background-image

如何利用级联仅覆盖多背景图像声明中的第二个图像？

我为`li`s 指定了一个标准样式，带有两个背景图像（小猫和右侧的鱼）。我还指定了一种样式`li.secondary`，我只想更改两个背景图像中的第二个：

```
li { 
  background: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABwAAAAeCAYAAAA/xX6fAAAA/ElEQVR42q2WYQ3DIBSE5wAJk1AJSKiESpiESakEJCChEpAwCW/vJSw0LPQoHMn3A0q5R7leeIjIFNo2JSm+Zz5DSAy6oLan8lKiIjV5fGu8u+TnrkfIKftpUQGks3Au8qNE6yOx1Sb/xPJYyH3EURW4QsHGZ5NB3K0dDpDwDvEZysAZvvP4znVpwTVcmrAgLsLX/yXhP+xfrOyuza00sbFZ7p5TAGlyYMF/J4axNClOvKKVJnEmTa6gpgkSM0Ca8HdITxOiSwuzLjVoAUAUxIWQBXESMQTpSWQd4r0GuxiJsZPII0F6EnUZg5hES7dZWEkExPj3GiDCv9d8AVEGli2R88rKAAAAAElFTkSuQmCC) repeat-y 90% center,
  #CCC url("http://placekitten.com/275/300") repeat right center;
  margin: 1em;
  padding: 1em;
  color: #FFF;
  font-weight: bold;
 }

li.secondary {
  background: #CCC url("http://placekitten.com/325/300") repeat left 10%;
} 
```

JSFiddle：http: [//jsfiddle.net/KatieK/9zcnp/1/](http://jsfiddle.net/KatieK/9zcnp/1/)

但是新的声明`background:`吹掉了第一个背景图像（鱼）。如何仅处理级联规则中的第二个背景图像？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-07T10:47:56.000

不幸的是，级联的工作方式使得在不重复每个声明中的其余层的情况下无法覆盖单个背景层。

通常，[级联](http://www.w3.org/TR/CSS21/cascade.html#cascade)在每个声明的基础上工作，其中每个[声明](http://www.w3.org/TR/CSS21/syndata.html#declaration)仅包含一个属性和一个值：

```
/* Declaration */
property: value; 
```

出于级联的目的，以逗号分隔的背景层列表计为单个值，这就是您的第二个`background`声明完全覆盖第一个的原因。¹

虽然`background`是其他几个属性的简写，但它不是单个背景图层的简写，因为它们没有自己的属性。由于单个图层属性不存在，因此您不能使用级联仅覆盖某些图层而保留其余图层。²

这也是为什么分层背景中的前缀渐变如此冗长和重复的原因。对我们来说可悲的是，这是 CSS 语法的一个限制，因此仅使用 CSS 无法改进或解决它。

* * *

¹ [这类似于为什么像这样的速记声明`background: #ccc`会删除先前使用声明的图像`background-image`（示例[1](https://stackoverflow.com/questions/8686656/does-this-shorthand-for-background-removes-the-other-attributes/8686661#8686661)和[2](https://stackoverflow.com/questions/10455465/why-cant-i-seem-to-use-background-clip/10455580#10455580)）。]

² [一个值得注意的例外是`background-color`，因为对于任何给定的框，只有一种背景颜色，它始终绘制在该层中图像下方的最底层。您可以`background-color`在规则中的任何位置一次设置一个值，并且不会影响其他层。]

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T13:52:27.630

我用 :before 伪元素解决了它。

[http://codepen.io/lajlev/pen/DAyhn](http://codepen.io/lajlev/pen/DAyhn)

```
.tile {
  position:relative;
  display: block;
  float: left;
  width: 100px; 
  height: 100px;
  margin: 30px;
  background: url('http://www.schaik.com/pngsuite/tbbn3p08.png') no-repeat;

  &:before {
    content: '';
    position: absolute;
    width: 100%;
    height: 100%;
    background-color: red;
    z-index: -1;
  }
}

.tile.last:before {
  background-color: green;  
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-02-06T22:56:37.890

显然没有这样的事情，使用`background-image`没有后代的属性设置多个背景等`background-image-1`。

但是，您可以使用一些 Javascript 覆盖它

# jquery - 如何选择带有 where alt != "someString" 的项目

> ID：14740267
> 
> 赞同：0
> 
> 时间：2013-02-06T22:40:33.430
> 
> 标签：jquery

我正在选择一组这样的复选框

```
$(tbl).find('input[type=checkbox]').prop('checked', this.checked); 
```

我想排除任何具有 alt="disabled" 属性的复选框，但我无法让它工作，谁能帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T22:44:43.743

```
$(tbl).find('input[type=checkbox]')
      .not('[alt=disabled]')
      .prop('checked', this.checked); 
```

[例子](http://jsfiddle.net/LtgtZ/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T22:42:49.000

```
$(tbl).find('input[type=checkbox][alt!="disabled"]').prop('checked', this.checked); 
```

我自己总是倾向于使用过滤器功能：

```
$(tbl).find('input[type="checkbox"]').filter(function() {
    return $(this).attr('alt') != 'disabled';
}).prop('checked', this.checked); 
```

# javascript - 在javascript中调用嵌套函数

> ID：14740276
> 
> 赞同：0
> 
> 时间：2013-02-06T22:40:44.780
> 
> 标签：javascript, html, cordova

我有一个`js/jsClasses.js`相对于该文件的名为的 javascript`index.html`文件。

这个文件有一些嵌套函数。这是代码 -

```
function JSClass(){ //notice the capital J which though doesn't change execution is a convention indicating a class constructor
var langSetting;
this.setLanguage = function(){
    langSetting = "en-GB";
    console.log(langSetting);
}
this.getLanguage = function(){
    return langSetting;
} 
```

}

我需要在 中设置变量的`langSetting`值`index.html`。这将是全局变量，在所有后续页面中，我需要访问`langSetting`相应语言的值并加载页面。

目前，这就是我尝试`js/jsClasses.js`从`index.html`

```
<html>
    <script src="js/jsClass.js">
        var object1 = new JSClass();
        object1.setLanguage();
        object1.getLanguage();
    </script>

</html> 
```

当我单击按钮时，什么也没有发生。有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T22:43:10.373

有两种方法可以解决这个问题，一种不好的普通方法和一种好的方法，

不好的是删除`var`关键字`langSetting`，使其`langSetting`成为全局变量。

好的是让 JSClass 返回 `langSetting`或更广泛地说是一个对象来揭示它，作为一个模块愿意揭示，这被称为揭示模块模式，这是[谷歌开发人员 Addy Osmani 的优秀书籍章节](http://addyosmani.com/resources/essentialjsdesignpatterns/book/#revealingmodulepatternjavascript)

在您的情况下，这是一个很好的解决方案：

```
var jsClass= function(){

    var langSetting = "en"; // this is javascript's version of a private variable, it is 'closed' in your jsClass

    var getLanguage = function(){
        return langSetting;
    }

    var setLanguage = function(){
        navigator.globalization.getPreferredLanguage(function (language){
            langSetting = language.value; //set the local variable
            console.log(langSetting);
        }, function(){
            console.log("there was an error");
        });
    }
    return {
        getLanguage:getLanguage,
        setLanguage:setLanguage
    };
} 
```

然后在你的代码中你可以做

```
var obj = new jsClass(); // is exactly the same as var obj = jsClass , when functions return objects it doesn't matter if you use the 'new' keyword
obj.getLanguage(); //returns en 
```

另一种解决方案是使用[构造函数模式](http://addyosmani.com/resources/essentialjsdesignpatterns/book/#constructorpatternjavascript)。有些人认为构造函数模式是实现 Java 开发人员迁移到 javascript 的错误，尽管它在业界和许多库中被广泛使用。这看起来如下：

```
function JSClass(){ //notice the capital J which though doesn't change execution is a convention indicating a class constructor
    var langSetting;
    this.setLanguage = function(){
        //setter code here
    }
    this.getLanguage = function(){
        //getter code here
    }
} 
```

然后使用`new`关键字，它看起来像：

```
var myClass = new JSClass();
myClass.getLanguage();//getter result 
```

另外，请注意我注意到您正在使用 Apache Cordova API 进行全球化，请注意这会使 setLanguage 异步，因此您可能希望它接受 a `callback parameter`，这意味着您可以在完成时“挂钩”。有关回调以及如何使用它们的更多详细信息，请参阅[此 stackoverflow 问题。](https://stackoverflow.com/questions/2190850/javascript-create-custom-callback)

# ruby-on-rails - current_user 的问题 (session_helper.rb)

> ID：14740278
> 
> 赞同：0
> 
> 时间：2013-02-06T22:40:47.657
> 
> 标签：ruby-on-rails, ruby-on-rails-3, session, login, session-variables

我正在关注有关登录的[本教程](http://ruby.railstutorial.org/chapters/sign-in-sign-out#top)。我暂时跳过了注册章节，因此我正在对用户进行硬编码。我非常小心地遵循了它（现在大约四次），但我仍然遇到会话问题，尤其是 current_user 。

**session_helper：**

```
module SessionsHelper

  def sign_in(user)
    cookies.permanent[:remember_token] = user.remember_token
    self.current_user = user
  end

  def signed_in?
    !current_user.nil?
  end

  def current_user=(user)
    @current_user = user
  end

  def current_user
    @current_user ||= User.find_by_remember_token(cookies[:remember_token])
  end

  def sign_out
    self.current_user = nil
    cookies.delete(:remember_token)
  end
end 
```

**会话控制器：**

```
class SessionsController < ApplicationController

  def new
  end

  def create
    user = User.find_by_email(params[:session][:email])
    if user && user.authenticate(params[:session][:password])
      sign_in user
      redirect_to user
    else
      flash.now[:error] = 'Invalid email/password combination' # Not quite right!
      render 'new'
    end
  end

  def destroy
    sign_out
    redirect_to root_url
  end

end 
```

**用户模型：**

```
class User < ActiveRecord::Base

  attr_accessible :first_name, :last_name, :email, :password
  has_secure_password

  before_save :create_remember_token

  has_and_belongs_to_many :projects
  belongs_to :project
  belongs_to :ticket

  validates :first_name, presence: true, length: { maximum: 24 }
  validates :last_name, presence: true, length: { maximum: 50 }
  VALID_EMAIL_REGEX = /\A[\w+\-.]+@[a-z\d\-.]+\.[a-z]+\z/i
  validates :email, presence: true, format: { with: VALID_EMAIL_REGEX }
  validates :password, presence: true, length: { minimum: 6 }

  private
    def create_remember_token
      self.remember_token = SecureRandom.urlsafe_base64
    end

end 
```

**例子：**

```
<% if signed_in? %>
  <li><%= link_to "Create projekt", :controller => "projects", :action => "new" %>
<% end %> 
```

当我运行我的应用程序时，它说我已经登录（显示所有应该只有登录用户才能看到的东西，反之亦然）。我尝试清除 cookie，重新启动浏览器，甚至尝试了另一个浏览器，但都是一样的。

问题是，如果我（在 session_helper.rb 中）从：

```
def signed_in?
  !current_user.nil?
end 
```

至...

```
def signed_in?
  current_user.nil?
end 
```

..即删除“！” 登录/注销工作以及显示正确的链接。但这也意味着我不能使用 current_user 因为它实际上是“nil”。

所以问题是为什么 current_user 为零？代码有什么问题？

**这是用户的数据库模型：**

```
first_name       | varchar(25)
last_name        | varchar(50)
email            | varchar(255)
created_at       | datetime
updated_at       | datetime
password_digest  | varchar(255)
password         | varchar(255)
remember_token   | varchar(255) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T23:28:37.497

问题终于解决了，这是通过删除数据库中的所有（测试）用户并创建新用户（带有种子）来完成的。

用户是在将更改应用于应用程序和数据库模型之前创建的，这可能会导致问题。

# shell - 打印出多个文件中单词的分布

> ID：14740279
> 
> 赞同：2
> 
> 时间：2013-02-06T22:40:49.420
> 
> 标签：shell

我正在尝试制作一个可执行文件，它将接收任意数量的文本文件并给出一个输出，即单词按出现次数的分布。这将在 bash 脚本中完成，到目前为止我所拥有的是：

```
#!/bin/bash
y=$(cat $* | wc -w)

cat $* | tr ' ' '//' |  tr '[:upper:]' '[:lower:]' | tr -d '[:punct:]' | 
grep -v '[^a-z]'| sort | uniq -c | sort -rn | head -$y 
```

我在尝试设置时遇到错误`y`，我无法弄清楚如何`head`打印出每个单词。

有没有更好的打印方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T23:36:32.710

为什么要跑`head`呢？无法保证文件中的字数会与字数一样多；实际上，几乎可以保证不会有（因为会有一些重复的单词）。如果要查看所有数据，则显示所有数据；不要过滤来自`sort -nr`.

第一个`tr`只需要一个斜线，我想。通常，您会将空格和标点符号映射到换行符（可以`-s`选择`tr`将相邻的换行符压缩为一个）。第一个中的斜线`tr`算作第三个中的标点符号`tr`，所以你在那儿并不明显。我想我希望看到类似的东西：

```
cat "$@" |
tr -cs '[:alpha:]' '\n' |      # Convert any non-alpha character to newline
tr '[:upper:]' '[:lower:]' |   # Case-convert to lower case
sort | uniq -c | sort -nr 
```

注意使用`"$@"`而不是`$*`; 当您指定的文件名不包含空格（换行符、制表符等）时，没有区别；当他们这样做时，`"$@"`表格是正确的，`$*`而不是正确的，所以你最好总是使用`"$@"`. 它的正确性远比它的正确性要高得多`$*`。

对于我周围的一些 C 源代码，脚本的输出是：

```
 246 n
 217 i
 153 int
 141 list
 124 if
 118 t
 103 char
  99 a
  97 size
  90 buffer
  89 context
  82 d
  81 void
  79 include
  79 h
  78 s
  65 for
  62 j
  55 ptr
  54 r
  54 const
  53 static
  53 sem
  51 pthread
  49 z
  49 oldneedle
  49 err
  47 to
  47 return
  46 mutex
  44 printf
  43 error
  43 c 
```

请注意，“h”这个词出现的频率与“include”这个词一样频繁；这是有原因的！该词`t`出现很多，但这是因为，例如，`size_t`被过滤视为两个词。可以保留下划线；更改第一个`tr`使用`'[:alpha:]_'`（注意下划线）。您消除了数字，但如果您愿意，您也可以保留这些数字。

# java - InputStream 被读取后未清除

> ID：14740281
> 
> 赞同：0
> 
> 时间：2013-02-06T22:41:08.943
> 
> 标签：java, stream

我有以下代码：

```
public class Interface {    
    public void exec(){            
        Scanner scanner = null;
        Integer count = 0;

        while( count < 4 ){               
            _inputStream.read();
            scanner = new Scanner( _inputStream );
            String inputLine = scanner.nextLine();
            _inputStream.reset();
            System.out.println( inputLine );
        }
        scanner.close();
    }

    public void setInputStream( InputStream inputStream ){
        _inputStream = inputStream;
    }
} 
```

我正在尝试使用以下代码进行测试：

```
public void testInterface() {
    Interface ui = new Interface();
    ui.exec();

    ui.setInputStream( new ByteArrayInputStream( "This is the first prompt".getBytes( Charset.defaultCharset() ) ) );   
    ui.setInputStream( new ByteArrayInputStream( "This is the second prompt".getBytes( Charset.defaultCharset() ) ) );  
    ui.setInputStream( new ByteArrayInputStream( "This is the third prompt".getBytes( Charset.defaultCharset() ) ) );           
    ui.setInputStream( new ByteArrayInputStream( "This is the fourth prompt".getBytes( Charset.defaultCharset() ) ) );
} 
```

我想得到的输出是

```
This is the first input
This is the second input
This is the third input
This is the fourth input 
```

但我实际上得到的是

```
his is the first input
his is the first input
his is the first input
his is the first input 
```

至少据我所知，问题在于`_inputStream`循环的每次迭代中都没有被清除，这意味着`read()`函数会立即返回，而不是等待新的数据流。我在每次阅读后都会重置流，所以我不确定为什么会这样。

如何修改我的代码，以便`_inputStream.read()`在每次运行循环时等待用户输入？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T22:49:07.833

Err，每次调用 setInputStream() 后调用 exec()？

这不可能是您的真实代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T22:49:14.863

在`exec()`您正在调用的方法中`_inputStream.read()`，它是阻塞的。但这并不意味着在这个阶段执行超出了 exec() ！这不像 C# 协程。

所以实际上`_inputStream.read()`是针对在 _inputStream 其他地方分配的任何 InputStream 实例调用的，它会在您有机会调用之前打印四行输出`ui.setInputStream( new ByteArrayInputStream( .....`

因此，您在同一个 InputStream 中阅读了 4 次，并在阅读后将其重置。因此，您有相同的 4 行输出。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-06T23:01:50.453

此外，reset-method 会将流重置回设置最后一个标记的位置或开始位置，但不会取出那里的数据。

# css - 悬停时图像位置发生变化（仅在 Firefox 上）

> ID：14740282
> 
> 赞同：-1
> 
> 时间：2013-02-06T22:41:22.453
> 
> 标签：css, html, firefox, position

我不知道原因，但我在 Firefox 上遇到了一些问题。

![在此处输入图像描述](../Images/b7b85107dbdd44387045f8ad4dc5ed27.png)

旗帜不应该在悬停时移动......但只有在 Firefox 上，旗帜才会改变位置。

![在此处输入图像描述](../Images/b04e6da23293567573d09450460b2586.png)

HTML：

```
<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8" />
</head>
<body>
<header>
  <code>
    <span>E</span>xample
  </code>
<div id="language">
  <a href="/en/home"><img alt="England" src="/assets/england-5be6776a259abf9711f460282fb6867b.png" /></a>
  <a href="/br/home"><img alt="Brazil" src="/assets/brazil-e70ce4232fd8b49307a857cb63f6625a.png" /></a>
</div>
</header>
</body>
</html> 
```

CSS

```
* {margin: 0; padding: 0;}

body {
  background: #f2f2f2;
  font: Verdana,Arial,Helvetica,Sans-Serif;
}

header {
  width: 100%;
  height: 80px;
  background: #333333;
  color: #f5f5f5;
  font-size: 2em;
}

header span {
  font-size: 2.5em;
}

code {
float: left;
}

#language {
  float: right;
}

#language a img{
  height: 25px;
} 
```

我试图将以下内容添加到我的 CSS 中但没有成功。

```
#language a img:hover {
  text-decoration: none;
  border: none;
} 
```

**编辑**

Firefox 18.0.2、Mac OS X V. 10.7.5

感谢@KatieK，我设法在这里模拟了这个问题：http: [//jsfiddle.net/sqCuL/2/](http://jsfiddle.net/sqCuL/2/)。我认为我的css中的其他东西导致了这个问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T22:55:54.737

如评论中所述，您的代码在最新版本的 Firefox 中运行良好。但是，您可以考虑使用 CSS 重置，就像这样简单：

```
* {
    margin: 0;
    padding: 0;
} 
```

或者更详尽如[K. Meyer 的](http://meyerweb.com/eric/tools/css/reset/)（它只是[众多示例之一](https://stackoverflow.com/questions/3485720/which-html5-reset-css-do-you-use-and-why)）。

**现场演示链接后编辑**：

有缺陷的 CSS 是：

```
nav li a, a:hover, a:visited, a:active, #current
{
    display: block;
} 
```

这会改变 Firefox 在鼠标悬停期间布局图像的方式。不知道为什么 Firefox 是唯一触发这种行为的想法。

似乎在 Chrome 中，即使没有用鼠标悬停（可能是因为`a:visited`or `a:active`），CSS 选择器也会匹配，始终将两个图像显示为`block`.

# asp.net-mvc-4 - 从 ASP.MVC 4 / Web.API 应用程序获取域用户？

> ID：14740287
> 
> 赞同：2
> 
> 时间：2013-02-06T22:41:42.600
> 
> 标签：asp.net-mvc-4, asp.net-web-api, windows-authentication

我有一个小型内部应用程序，我需要知道哪个域用户正在访问该站点，而不需要站点身份验证——我只需要知道他们以谁身份登录到他们的机器，并捕获该信息。这仅用于日志记录，而不用于任何类型的访问控制。在公司内部，这只是一个开放的网站。

Web.API 应用程序控制器是否有一种简单的方法可以找出机器上的当前域用户是谁？我需要在我的 web.config 中配置一些东西吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T22:47:29.473

这是不可能的，或者至少是不可能可靠的。

首先，获取用户的唯一方法实际上是使用 Windows 身份验证并强制他们登录。您可以使用 Windows 直通身份验证，但这仅适用于 Internet Explorer，并且仅适用于非常特定的域配置。即使这样，有时它也不起作用。当它不起作用时（如果他们使用 chrome 或 ff 或者只是没有正确配置浏览器），它将强制他们使用他们的凭据登录。这是唯一的方法。

这也可以通过 ActiveX 控件完成，但同样只能在 IE 中使用，而且大多数企业环境不再热衷于 Activex。它可以与 Java（不是 javascript）一起使用，但考虑到 Java 最近的安全问题，这也可能不是一个好主意。

无论如何，没有真正万无一失的方法可以做到这一点。只有一堆不同的方式可能有效也可能无效。

# mysql - 如何在 MySQL 中进行分组？

> ID：14740289
> 
> 赞同：1
> 
> 时间：2013-02-06T22:41:47.843
> 
> 标签：mysql

假设我有以下内容：

表A

```
id (auto increment primary key) | age | country
1 | 5 | Germany
2 | 6 | Spain
3 | 7 | France
4 | 7 | Spain
5 | 8 | France
6 | 9 | France
7 | 2 | Mexico
8 | 7 | Saudi Arabia
9 | 5 | Saudi Arabia 
```

我想要结果表：

表A

```
id (auto increment primary key) | age | country | country_number
1 | 5 | Germany | 1
2 | 6 | Spain | 2
3 | 7 | France | 3
4 | 7 | Spain | 2
5 | 8 | France | 3
6 | 9 | France | 3
7 | 2 | Mexico | 4
8 | 7 | Saudi Arabia | 5
9 | 5 | Saudi Arabia | 5 
```

请注意，“country_number”只是一个基于唯一国家名称的唯一编号。

使用游标很慢。我如何使它可以进行某种“分组”？为每个国家分配一个唯一标识符？还是不需要分组？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T22:47:18.787

查询可能是（沙特阿拉伯没有 5 个，但每个国家/地区至少有不同的 country_number）

```
select a.id, a.age, a.country, b.minId as country_number
FROM TableA a
INNER JOIN (SELECT MIN(id) as minId, country
            FROM TableA
            GROUP BY country) as b
      ON a.country = b.country 
```

[SqlFiddle](http://sqlfiddle.com/#!2/a82f7/2)

要把事情做好，

```
CREATE TABLE COUNTRY(id int PRIMARY KEY auto_increment, name VARCHAR(100))
SELECT distinct COUNTRY as name FROM TableB;

ALTER TABLE TableB Add column countryID int NOT NULL DEFAULT 0;

UPDATE TableB b, country c
set b.countryID = c.Id
where b.country = c.name;

ALTER TABLE TableB drop column country;

ALTER TABLE TableB add  FOREIGN KEY(countryID) REFERENCES country(id); 
```

见[SqlFiddle](http://sqlfiddle.com/#!2/cc64d/2)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T22:47:16.400

您应该创建一个单独的表来存储国家/地区，然后将国家/地区的主键 (country_id) 作为外键存储在当前表中。

# php - 使用 jquery 刷新选项卡

> ID：14740290
> 
> 赞同：0
> 
> 时间：2013-02-06T22:41:48.013
> 
> 标签：php, jquery, html, ajax

这是我上一个问题的链接：[使用 ajax 将 id name on click 传递给 php](https://stackoverflow.com/questions/14609748/passing-id-name-on-click-using-ajax-to-php)

我有三个选项卡，在点击时显示基于 ajax 的搜索结果。单击任何其他选项卡时，如何刷新选项卡（清除搜索结果）。比如说，我在 tab-1 中有搜索结果，然后单击 tab-2 或三个，我希望第一个选项卡返回其初始阶段，依此类推。

我尝试了向上滑动和 .hide 功能，但它们似乎对此不起作用。

有任何想法吗？

```
$("input[name='tab-group-1']").click(function() {
if ($("input[name='tab-group-1']:checked").val() == 'tab-1') {
$("#display_results_1").show();
$("#display_results_2").hide();
$("input[name='display_results_2']")
                        .attr("value", "");
$("#display_results_3").hide();
$("input[name='display_results_3']")
                        .attr("value", "");
}else if {
($("input[name='tab-group-1']:checked").val() == 'tab-2') {

$("#display_results_2").show();
$("#display_results_1").hide();
$("input[name='display_results_1']")
                        .attr("value", "");
$("#display_results_3").hide();
$("input[name='display_results_3']")
                        .attr("value", "");
}
else{
$("#display_results_3").show(); 
$("#display_results_1").hide();
$("input[name='display_results_1']")
                        .attr("value", "");
$("#display_results_2").hide();
$("input[name='display_results_2']")
                        .attr("value", "");
}
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-12-15T17:26:21.483

他大概的意思是：

```
function tabrefresh(){
    $( "#tabs" ).tabs( "refresh" );
}; 
```

# c - 需要帮助理解整数算术函数

> ID：14740295
> 
> 赞同：3
> 
> 时间：2013-02-06T22:42:05.227
> 
> 标签：c, 32-bit, integer-overflow, integer-arithmetic

有人能帮我解释一下这个功能吗，谢谢！

```
int overflow(int x, int y)
{
   int result, non_overflow, overflow, result_sign, mask;

   result = x + y;
   result_sign = result >> 31;  //Need help starting from here... I know
                                //it is shifting 31 bits... but why??
   non_overflow = ((x ^ y) | ~(y ^ result)) >> 31;
   overflow = ~non_overflow;

   mask = overflow << 31;

   return (non_overflow & result) | (overflow & (result_sign ^ mask));  
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-06T23:06:11.187

它正在为加法运算计算一个整数溢出“标志”，它表示结果的大小是小于`INT_MIN`还是大于`INT_MAX`。它假设`int`是 32 位，二进制补码，并且有符号数的右移是复制高位的“算术”移位 - 没有安全的假设。

如果`x`和的符号`y`相同，但结果的符号相反，则结果溢出。这就是它的全部计算。没必要这么复杂。

假设加法不会产生整数异常并且没有奇怪的奇偶校验位，这个表达式将通过以与原始代码相同的精神来操作符号位来工作：

```
( x ^ y ) < 0 && ( x ^ result ) < 0 /* (A^B)<0 iff A and B have opposite sign */ 
```

如果我们想对依赖定义明确的行为挑剔，如果结果可能溢出，则执行`x + y`是*非法的。*允许符合 C 标准的机器在这种溢出（或自毁等）时终止程序，因此我们首先需要避免这样做。

我们要执行的测试是

```
x + y > INT_MAX
x + y < INT_MIN 
```

`x`和`y`直接之间没有安全操作。我们必须将一个移到等式的另一边，这意味着反转它的符号并做减法。只有从 中减去正数`INT_MAX`或从 中减去负数才是安全的`INT_MIN`，所以我们可以修改这些：

```
y > INT_MAX - x
y < INT_MIN - x 
```

最安全的方法是

```
x < 0? ( y < INT_MIN - x ) : ( y > INT_MAX - x ); 
```

* * *

编辑：糟糕，我没有猜到该函数对溢出标志做了什么。如果没有溢出，它显然返回结果，`INT_MAX`如果有正溢出则返回，`INT_MIN`如果有负溢出则返回。换句话说，它是饱和加法。它这样做的方式有点复杂，看起来作者煞费苦心地消除了分支。但是溢出通常不会发生，并且可预测的分支比许多算术便宜，因此可能值得尝试使用更直接的实现`if … else`。

# python - 在 Python 中模拟 Lisp 的 :keywords

> ID：14740297
> 
> 赞同：2
> 
> 时间：2013-02-06T22:42:21.670
> 
> 标签：python

我想做这样的事情：

```
action = :default

if some_condition1:
    action = :do_something

if some_condition2:
    action = :do_other_thing

...

if action == :default:
   one_reaction()
elif action == :do_something:
   other_reaction()
... 
```

我应该用什么来表示动作选择？

想到的变种：

*   创建枚举

    ```
    class MyActions:
        DEFAULT=1
        SO_SOMETHING=2
        SO_OTHER_THING=3 
    ```

    不方便，需要来回滚动并“注册”新的动作选择。

*   使用幻数。不好。

*   使用字符串。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-06T22:45:03.647

从概念上讲，Lisp 中的“符号”可以被认为是内部字符串。

```
action = 'default'

if some_condition1:
    action = 'do_something'

if some_condition2:
    action = 'do_other_thing'

...

if action == 'default':
   one_reaction()
elif action == 'do_something':
   other_reaction()
... 
```

每当您在 Lisp 中使用符号时，Python 都会使用字符串。Lisp 必须做出区分，因为它是同音符号，但由于 Python*不是*同音符号，所以区分是不必要的。

## 备择方案

如果您改用数字，那么您将失去 REPL 能力。例如，

```
default = 1
do_something = 2
do_other_thing = 3

>>> x = default
>>> x
1 # is 1 default? I can't remember... 
```

有更复杂的方法可以做到这一点，比如创建特殊的类，但小小的好处不值得增加复杂性。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-06T22:48:59.130

以下类的实例将返回您从中调用的任何属性的名称。创建一个变量`k`或其他东西会使访问它变得简单。

```
class LispKeyword(object):
    def __getattribute__(self, name):
        return name

>>> k = LispKeyword()
>>> k.blarg
'blarg'
>>> k.what
'what' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-06T22:46:14.333

对于您提供的代码，您可以将变量设置为需要调用的函数。对于更通用的解决方案，您可以使用字符串或枚举。另请参阅[https://stackoverflow.com/a/3743555/113586](https://stackoverflow.com/a/3743555/113586)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-06T23:09:37.123

现在，在 python-ideas 列表[“stdlib 中的常量/枚举类型”](http://mail.python.org/pipermail/python-ideas/2013-January/019003.html)中正在讨论向语言添加类似枚举的想法，多种设计和纯 Python 实现被辗转反侧。在上一轮的讨论中，Guido 和几乎所有其他人都同意*一些*值得添加的东西，但没有人决定要添加什么。

所以，我想你可以说，做枚举常量的惯用方法实际上还没有被发明出来。

值得略读该线程以了解什么被认为是惯用的，以及如果您是荷兰人，那么明显的方法是什么，等等。如果你*确实*想使用枚举，在选择实现之前更值得略读。

同时，如果您想知道在遥远的过去（例如 2013 年 2 月）的惯用语，我同意 Dietrich Epp 的观点，即字符串几乎总是此类问题的正确选择。

他解释了为什么性能问题在 Python 中不是问题，但还有一件人们总是提出来但我想忽略的事情：

```
thingy = 'mokney'
# ...
if thingy == 'gorilla': do_gorilla()
elif thingy == 'monkey': do_monkey()
else: do_default() 
```

如果您使用某种严格的枚举，则不会发生这种情况——或者，至少，您可以通过在/链`assert isinstance(thingy, Primate)`之前放置一个来防止它发生。`if``elif`

这一切听起来都很棒，直到你看到这一行：

```
thigny == 'monkey' 
```

# java - 页面刷新后Spring并发会话控制错误消失

> ID：14740301
> 
> 赞同：0
> 
> 时间：2013-02-06T22:42:29.423
> 
> 标签：java, spring, spring-security

我的流程：

1.  在 browser1 中为 User1 启动会话 (session1)
2.  在 browser2 (session2) 中以 User1 身份登录
3.  在 browser1 中刷新页面 - 显示错误：'此会话已过期（可能是由于尝试以同一用户身份同时登录多个）
4.  再次刷新 browser1 中的页面 - 旧会话成功恢复

我怎样才能结束 session1？

我的弹簧配置：

```
<session-management session-fixation-protection="migrateSession">
    <concurrency-control max-sessions="1" error-if-maximum-exceeded="false"/>
</session-management> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-06-02T14:13:41.473

它的作用是记住我登录以再次登录您。您可以将过期的会话重定向到另一个网址，如下所示，并手动使当前会话过期

## 在安全配置中：

（只需添加过期的 url 属性）

```
.sessionManagement().sessionAuthenticationStrategy(concurrentSessionControlStrategy)
   .maximumSessions(1).maxSessionsPreventsLogin(false).expiredUrl("/users/expire-me") 
```

## 在 fwd api/url 中：

```
@RequestMapping(value="expire-me", method=RequestMethod.GET)
@ResponseBody
public void expireSession(HttpServletRequest request,HttpServletResponse response) throws IOException {
    request.getSession(false).invalidate();
} 
```

这就是我所做的，它工作得很好。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-11-14T08:38:47.783

（另一种解决方法）您也必须使用记住我的身份验证，这就是您的第一个浏览器重新登录的方式。如果您希望它正常工作，请不要使用`remember-me`.

# jsf-2 - 会话过期后未调用 @PreDestroy

> ID：14740302
> 
> 赞同：7
> 
> 时间：2013-02-06T22:42:30.470
> 
> 标签：jsf-2, java-ee-6, cdi, websphere-8

这是一个在 WAS8.0 上运行的 JSF 2 应用程序。这是一页的“支持”bean的代码。

```
 @Named("mySessionBean")
    @SessionScoped
    @Stateful
    @LocalBean
    @StatefulTimeout(unit = TimeUnit.MINUTES, value = 10)
    public class MySessionBean implements Serializable {
        @PostConstruct
        public void init()
        {
             System.out.println("start MySessionBean: " + this.hashCode());
         }

        @PreDestroy
        public void cleanup()
        {
             System.out.println("destroy MySessionBean: " + this.hashCode());
         }
        ....
    } 
```

web.xml 中设置的会话超时值小于 bean 的超时值。当我运行应用程序时，我看到了来自@PostConstruct 的打印输出，但从未看到来自@PreDestroy 的打印输出。我尝试了以下 2 种情况： 1\. 注销 - invalidateSession；2\. 只需等到会话到期。

我不是应用程序的设计者。设计者坚持把所有的backing bean作为一个有状态的session bean。我认为更主流的方法就是让它们成为 CDI bean。但无论如何，当我只将注释更改为 CDI 时，我也开始从 @PreDestroy 获取打印输出

```
 @Named("mySessionBean")
    @SessionScoped
    public class MySessionBean implements Serializable {
    ..... 
```

我的问题是，在第一种情况下我没有得到 @PreDestroy 方法调用的原因是什么？如果我看不到 @PreDestroy 被调用，是否有任何其他方法可以跟踪“支持”bean（在本例中为有状态会话 bean）的生命周期。谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-07T07:26:24.100

[查看Java EE 6 教程](http://docs.oracle.com/javaee/6/tutorial/doc/giplj.html)的这一部分，它显示了有状态会话 bean 的生命周期。*PreDestroy*方法仅在从客户端代码中显式删除 bean 时调用，调用带有*@Remove*注释的方法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-22T15:14:23.090

另一个答案链接到[Java EE 6 Tutorial](http://docs.oracle.com/javaee/6/tutorial/doc/giplj.html)，它甚至没有提到超时的存在。我也不认为该教程明确指出 @PreDestroy 方法仅在显式 @Remove 方法调用之后调用。没有说明因果关系，它只是描述了两个事件，不一定直接相关：

> 在生命周期结束时，客户端调用注解为@Remove 的方法，并且EJB 容器调用注解为@PreDestroy 的方法（如果有）。

[WebSphere 文档](http://pic.dhe.ibm.com/infocenter/wasinfo/v8r5/index.jsp?topic=%2Fcom.ibm.websphere.nd.doc%2Fae%2Ftejb_sfsb.html)提到以下内容：

> 当调用 remove 方法时，会为有状态会话 bean 调用 PreDestroy 生命周期拦截器回调。还要记住，如果有状态会话 bean 在处于被动状态时超时，或者在 bean 上的方法调用期间发生意外异常并且 bean 被丢弃，则不会调用 PreDestroy 生命周期拦截器回调。

现在这里它明确指出**当**调用remove 方法时调用 PreDestroy 回调。同时它明确指出，如果 SFSB 在被动状态下超时，则不会调用 PreDestroy 回调。那么这是否意味着当 SFSB 不处于被动状态时它们会被调用？

现在让我们来看看JBoss。
首先，如果removingTimeout < idleTimeout，则存在一个关于PreDestroy 不会在删除超时时被调用的[JBoss 问题。](https://issues.jboss.org/browse/JBPAPP-7724)似乎已在 5.2 中修复。
其次，我刚刚在 JBoss 4.3 上进行了测试，当钝化的 SFSB 在超时时被移除时会发生什么 - 它在销毁之前被激活。

因此，对于超时和 bean 移除的行为方式，似乎存在多种解释。

# google-maps - 谷歌地图的原生移动控件？

> ID：14740308
> 
> 赞同：0
> 
> 时间：2013-02-06T22:42:54.917
> 
> 标签：google-maps, google-maps-api-3

我将 Chrome 中的用户代理伪装成移动设备，当我访问 maps.google.com 时，我看到了这个很棒的移动 UI：

![很棒的谷歌地图移动用户界面](../Images/f2ba4e653847c221dc70e264636ee9f2.png)

这是 Google Maps API 的本机部分，因此可以在移动网络应用程序中使用吗？如果是这样，如何配置他们的谷歌地图来显示这个移动用户界面？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T02:34:26.430

该 UI 特定于 maps.google.com。然而，该 api 确实公开了开发您自己的版本所需的接口，但没有内置相同的控件。

# jquery - jquery 将 td 移动到另一个 td 下面

> ID：14740309
> 
> 赞同：-6
> 
> 时间：2013-02-06T22:42:57.123
> 
> 标签：jquery

由此：

```
<tr>
<td>A</td>
<td>B</td>
</tr>

<tr>
<td>C</td>
<td>D</td>
</tr> 
```

对此：

```
<tr>
<td>A</td>
</tr>
<tr>
<td>B</td>
</tr>

<tr>
<td>C</td>
</tr>
<tr>
<td>D</td>
</tr> 
```

理想情况下，我不想为 TD 创建一个新行，但我认为没有办法，是吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T22:43:45.467

不，没有别的办法。

要让 a`td`出现在新行中，您当然必须创建新行。

添加另一行：

```
$('#myTable tr:last').after('<tr><td>' + YOURSTUFF + '</td></tr>'); 
```

或者，如果您想将其放在特定行之后（`B`向下移动）：

```
$('#theRow').after('<tr><td>' + YOURSTUFF + '</td></tr>'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T22:49:44.723

像这样的事情应该这样做

```
$('tr').each(function(){
    var self = $(this);
    self.after('<tr>').next().append( self.find('td:last') );
}); 
```

演示在[http://jsfiddle.net/rucsh/](http://jsfiddle.net/rucsh/)

# vba - Outlook 2010 规则：如果收件人超过 5 个，则移动邮件

> ID：14740311
> 
> 赞同：3
> 
> 时间：2013-02-06T22:43:04.643
> 
> 标签：vba, outlook-2010

我唯一一次收到超过 5 个收件人的电子邮件是在办公室八卦传开的时候。我很想制定一个规则/过滤器，将任何超过 5 个收件人的传入邮件移动到垃圾文件夹中。

Outlook 2010 可以做到这一点吗？我在默认规则中找不到类似的东西，不确定你是否可以通过宏或其他东西来 VBA 规则。

感谢任何见解、帮助或资源。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-07T19:09:52.873

如果有人感兴趣，我使用 DeanOC 提供的资源编写了 VBA 脚本。

此脚本获取所有传入的电子邮件并计算`To:`字段中的收件人，如果收件人数大于 5，则将其标记为已读，并将其移动到`Gossip`文件夹。

还有一个次要条件是检查主题是否包含`CVS`（我们从具有 10 个收件人的并发版本系统中获取更新）并移动到适当的文件夹。

```
Sub moveOfficeGossip(item As Outlook.MailItem)

    Dim strNames As String, i As Integer, j As Integer, cvs As String
    Dim olApp As New Outlook.Application
    Dim olNameSpace As Outlook.NameSpace
    Dim olDestFolder As Outlook.MAPIFolder

    j = 1
    cvs = "CVS"
    strNames = item.To
    Set olNameSpace = olApp.GetNamespace("MAPI")

    For i = 1 To Len(strNames)
        If Mid(strNames, i, 1) = ";" Then j = j + 1
    Next i

    If (j >= 5) Then
        If InStr(UCase(item.subject), cvs) Then
            Set olDestFolder = olNameSpace.Folders("Personal Folders").Folders("Filtered").Folders("CVS")
            item.Move olDestFolder
        Else
            Set olDestFolder = olNameSpace.Folders("Personal Folders").Folders("Filtered").Folders("Gossip")
            item.UnRead = False
            item.Move olDestFolder
        End If
    End If

End Sub 
```

如果这不是最正式的格式，我深表歉意，我知道它可以组织得更好一些，但这是我第一次尝试使用任何 Visual Basic 语法。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-07T02:39:53.990

此链接：[如何在 Outlook 2010 中用超链接替换传入邮件正文中的文本？](https://superuser.com/questions/464000/how-to-replace-text-in-the-body-of-an-incoming-message-with-a-hyperlink-in-outlo)展示了如何在使用“消息到达后”条件时创建自定义操作。您需要更改 VBA 代码来询问您的邮件项目以查看它是否有 5 个以上的收件人，然后将邮件项目移动到您的垃圾文件夹。

可以通过查看`MailItem.To`属性找到收件人（分号分隔的字符串）

如果邮件符合您的标准，那么您可以使用该`MailItem.Move`方法将邮件移动到您想要的文件夹。

此链接：[MailItem Members (Outlook)](http://msdn.microsoft.com/en-us/library/office/ff861252%28v=office.14%29.aspx)提供有关该`MailItem`对象的更多信息。

# webkit - 在 capybara-webkit 中替代 find_field('doc-name').native.send_keys(:tab)

> ID：14740312
> 
> 赞同：2
> 
> 时间：2013-02-06T22:43:05.557
> 
> 标签：webkit, capybara, capybara-webkit

capybara 中的 :selenium 驱动程序允许我写：

`find_field('doc-name').native.send_keys(:tab)`

是否有与 :webkit 驱动程序等效的构造？

我试图远离一个字段，这会导致一些 AJAX 验证发生，然后继续我的测试文件中的下一步。capybara-webkit 出现以下错误：

`undefined method`send_keys' for "20":String`

我在用：

```
jruby (1.6.7)
capybara (1.1.2)
capybara-webkit (0.13.0)
cucumber (1.1.0)
cucumber-rails2 (0.3.5)
factory_girl (1.2.4)
gherkin (2.5.4)
rails (2.3.8)
rake (0.8.7)
rspec (1.3.2)
rspec-rails (1.3.4)
trinidad (1.3.5) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-02-15T20:49:47.740

Capybara 现在支持`send_keys`这样的：

```
element = page.find("#my_element")
element.send_keys(:space) 
```

不过，唯一受支持的击键是 Space、Enter 和 Backspace。

我也发现它非常不可靠（每隔一段时间就会失败）。

来源： [https ://github.com/thoughtbot/capybara-webkit/blob/master/lib/capybara/webkit/node.rb#L50-L65](https://github.com/thoughtbot/capybara-webkit/blob/master/lib/capybara/webkit/node.rb#L50-L65)

# algorithm - 最优三镇算法

> ID：14740322
> 
> 赞同：8
> 
> 时间：2013-02-06T22:43:36.460
> 
> 标签：algorithm

我一直在尝试为受游戏“三联镇”启发的问题找到最佳算法。游戏是这样进行的：

您将对象放置在一个网格中，每次您制作一组三个时，它们都会**在最后放置的对象的位置**凝结成一个更高级别的对象。

* * *

![基本转变](../Images/5c7567a1c36858c9a3dc43cc8504a275.png)

* * *

此外，如果将其中三个 b 对象放在一起，它们会再次压缩以形成更高级别的对象。

* * *

![为 c 设置](../Images/2ea87cddb30d17ae4e64f32c49ccb4b0.png)

* * *

![转换为 c](../Images/665877cb95e66f41e9fadcf4246f29a2.png)

* * *

注意：在这些图中，对象的级别表示为 a [i]、 b [i]和 c [i]，下标表示三个一组中的对象编号。

为了简化事情，我只考虑你必须放置的每个对象都是最低级别的。

现在我的问题是：

1：给定x，是否有一种算法可以确定制作x级对象所需的最少网格区域？

例如，a 级需要 1x1，b 级需要 1x3，c 级需要 1x5。

2：给定网格的尺寸，我们能否找到可实现的最高级别和对象数量？

例如，对于 2x2，您可以获得 2 级 'a' 和 2 级 'b'

3：在给定固定网格的情况下，是否有一种算法可以找到对象的最佳顺序和位置以获得尽可能高的级别？

例如，对于 2x2，您可以获得 (1,1),(1,2),(2,2)

4：给定一个预期级别 x 对象的位置，哪一组移动可以最小化制作该对象所需的空间量？

5：这些算法的最佳复杂度是多少？

**更新：**

我认为在寻找解决方案中突出的一件事是，**无法在任何地方完成获取级别 x 的项目**。

例如：`[ _ _ _ _ c]`在固定的 1 x 5 网格中是不可能实现的，因为您需要最后一个 b 在第 5 位，因此您的最后一个 a 在第 5 位。所以要放置第一个 b:`[a _ _ _ _]->[a a _ _ _]->[_ _ b _ _]`或`[_ a _ _ _]->[_ a a _ _]->[_ _ _ b _]`. 在这两种情况下，都没有足够的空间来放置 3 个 a 来制作 c 的最后一个 b。

另一件事，**我们不能假设任何东西都可以展开为一维网格**。这一点在我的下一点中变得很清楚。

我发现了一些有趣的东西：

一个 c 级对象可以在一维网格中与边界的最小接近度。`[_ _ a a a]->[_ _ _ b]->[_ a a a b]->[_ _ _ b b]->[a a a b b]->[_ _ c _ _]`. 因此，只能在第 3 个位置制作 1 x 5（最佳）网格中的 c 级对象。

由此可见，这是可以由任何数字网格在 1 中制作的最高级别。取 1 乘以无穷大的网格：

`..._ a a a _ ... -> ... _ a a a b _ ... -> ... _ a a a b b _ ... -> ... _ c _ ...`

现在我们尝试在它旁边直接获取另一个 c：

`..._ c a a a _ ... = ... _ c b _ ... or ... _ c _ b _ ... or ... _ c _ _ b _ ...`

唯一的选择是`..._ c b _ ...`因为其他选项无法在 c 和 b 之间形成另一个 b。我们唯一的选择阻止了我们直接在第一个 c 旁边创建 c 的唯一方法，因为它阻止了最后一个 c 去那里。因此，在一维中，c 是我们可以制作的最高级别。换句话说，**问题必须在 2 个维度上考虑**。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T23:12:08.117

编辑：以下内容实际上是错误的，原因如下：按照描述的方式获得“c”，这是怎么回事：_ _ aaa -> _ _ _ b -> (..) _ _ _ bb -> _ _ bbb -> _ _ c _ _

所以“c”现在位于该行的中间，并且前置不能以这种方式工作。我把它留在这里，所以如果有人读到它，至少有一个解释为什么它是错误的。也许这会节省你一些时间来思考同样的错误。

* * *

[FALSE FROM HERE] 1：您始终可以在 3+2*(x-1) 中执行此操作，因为您只需“前置”所需的元素和每个“级别”的字母。归纳证明：

要获得“b”，您需要 3+2*(1-1) = 3 个空格。

如果你可以在 3+2*(x-1) 个空间中获得 x 级，x+1 级需要 3+2*(x-1) 个空间来构建 x 级字符和 2 个存储空间，花费你 3+ 2*(x-1)+2 = 3+2*((x+1)-1) 个空格。

所以你有了它，你实际上可以在一个 1 高和 5 宽的矩形中得到一个“c”。您可以使用 13 个空格获得“f”，依此类推。

* * *

想想这意味着什么：如果你想把你的信打包成一个小区域，找一个有 3+2*(x-1) 个空格的小区域，并在需要时转动前置。这意味着你总是可以从你想要以螺旋状结束的位置向外走。不过，这里的转折点是：你可能需要每个级别的最后一块石头来自交替的方向，这样你就不会离开你开始的地方。实际完成所有步骤的复杂性是 O(3^x)，因为下一个级别需要前一级的 3 个字母，而且都是乘法的。

# iphone - 如何在 ActionScript 3 中将图片/图像从 iPhone 上传到 App？

> ID：14740323
> 
> 赞同：0
> 
> 时间：2013-02-06T22:43:40.203
> 
> 标签：iphone, ios, actionscript-3, flash-builder

我正在我的 Flash 构建器中构建一个带有 actionscript 3.0 的应用程序。但是我找不到用于将手机中的图像上传到应用程序的代码？您可以链接我/或发布示例代码来完成此任务吗？

谢谢！

～喵喵

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T22:54:01.700

我相信您正在寻找[`CameraRoll`](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/media/CameraRoll.html)课程。它允许用户从设备的“相机胶卷”中选择图像

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-19T10:16:55.020

您可以使用此代码[Capture Photo using CameraUI](https://stackoverflow.com/questions/10595050/flash-cs5-5-photo-is-rotated-when-capture-a-photo-using-cameraui-on-iphone)，但图片方向在手机设备上无法正常工作。

# c# - 如何获取已分配弹性 IP 的 EC2 实例的列表？

> ID：14740330
> 
> 赞同：0
> 
> 时间：2013-02-06T22:44:11.573
> 
> 标签：c#, amazon-web-services, ec2-api-tools

如何使用 C# 获取已分配静态公共弹性 IP 的 EC2 实例的列表？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T23:55:36.090

基本上，您将获得实例和公共 IP，然后您将比较实例是否包含任何公共 IP 地址。

这是将为您执行此操作的代码：

```
 AmazonEC2 ec2 = AWSClientFactory.CreateAmazonEC2Client();

                //Create instance request
                DescribeInstancesRequest request = new DescribeInstancesRequest();
                DescribeInstancesResponse response = ec2.DescribeInstances(request);

                //Create ip address request enumeration
                DescribeAddressesRequest daRequest = new DescribeAddressesRequest();
                DescribeAddressesResponse daResponse = ec2.DescribeAddresses(daRequest);
                var publicIps = from ips in daResponse.DescribeAddressesResult.Address select ips.PublicIp;

                //List of the instances which has public IP
                List<RunningInstance> publicIpInstances = new List<RunningInstance>();

                //Iterate over instances and check if they have public IP
                foreach (Reservation ri in response.DescribeInstancesResult.Reservation)                    
                    publicIpInstances.AddRange(ri.RunningInstance.Where(inst => publicIps.Contains(inst.IpAddress))); 
```

# c++ - 将纹理添加到由顶点组成的平面

> ID：14740331
> 
> 赞同：6
> 
> 时间：2013-02-06T22:44:39.683
> 
> 标签：c++, opengl, textures

我用以下代码在 OpenGL 上创建了一个平面：

```
glBegin(GL_TRIANGLE_STRIP);
glColor4f(0.8, 0.8, 0.5, 1.0);
glVertex3f(startlen, height, startwid);    
glVertex3f(startlen, height, startwid + width);
glVertex3f(startlen + length, height, startwid);
glVertex3f(startlen + length, height, startwid + width);
glEnd(); 
```

现在我想在这个平面上应用纹理。

我在[这里](http://www.opengl-tutorial.org/beginners-tutorials/tutorial-5-a-textured-cube/)阅读了本教程，但我在“在 OpenGL 中使用纹理”部分停了下来，因为我没有 UV 坐标。

*我知道我们必须导入纹理文件，在我的例子中是位图文件。
loader返回一个Glint，也就是textureID，是全局的吗？例如，如果我需要加载该纹理，我只需要使用给定的 ID 调用绑定纹理函数？*

无论如何，我怎样才能将纹理应用到飞机上？

* * *

**编辑＃1：** 示例蚊子发布的纹理现在可以使用。
我发现我正在将纹理加载到类的构造函数中，我不应该这样做，因为该对象是公共的，并且它是在 OpenGL 初始化之前构造的。
所以纹理现在在四边形示例中加载得很好:)

现在的问题是我试图在我的飞机上使用它，它看起来很扭曲。对此的解决方案可能是使纹理能够加载多次，但保持其原始大小*（虽然我不知道如何做到这一点）*。

此外，我在当前平面旁边创建了另一个平面，颜色为奶油色，但在纹理化之后，它看起来像这样： ![在此处输入图像描述](../Images/41135808aeab4c85a53b29945550f0fb.png)

所以现在有2个问题：

*   纹理必须保持其原始分辨率，但显示的次数要覆盖整个平面
*   它旁边的飞机失去了颜色（为什么会发生这种情况？如何修复它？--我也可以为这架飞机使用纹理）

* * *

**编辑#2：**

第二个问题现在已经解决了，感谢蚊子！但是平铺仍然不起作用。这是它现在的样子： ![在此处输入图像描述](../Images/bb0a5739541235b5d2adcfc81269f9a9.png)

这是我使用的纹理：
![在此处输入图像描述](../Images/5361b691461376ae6999ead840f94d7e.png)
它的尺寸是 256x256（我使用图像编辑器裁剪它）

* * *

**编辑#3：**
这些是 glTexCoord2f 坐标及其匹配顶点（用于内边距）：

```
glTexCoord2f(0.0f, 0.0f);   glVertex3f(startlen, height, startwid);
glTexCoord2f(0.0f, 1.0f);   glVertex3f(startlen, height, startwid - width/2);
glTexCoord2f(1.0f, 0.0f);   glVertex3f(startlen + length, height, startwid);
glTexCoord2f(1.0f, 1.0f);   glVertex3f(startlen + length, height, startwid - width/2); 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-06T23:06:10.803

如果您有返回 textureID 的加载器，那么它可能已经负责加载图像数据、设置属性并将其存储为真实纹理以供进一步使用。因此，我将继续将纹理绑定到您的纹理目标。

`glBindTexture()`如果你有这个 id，你基本上必须在绘制三角带之前调用函数：

```
glBindTexture(GL_TEXTURE_2D, id); // where id is GLuint returned by your loader 
```

现在对于您绘制的每个顶点，您还应该为这些顶点指定纹理坐标。为此，您使用`glTexCoord2f()`函数。对于简单的四边形，它可能如下所示：

```
glBegin(GL_QUADS);
    // Bottom left
    glTexCoord2f(0.0f, 1.0f);                   
    glVertex2i(0.0f, 10.0f);

    // Top left
    glTexCoord2f(0.0f, 0.0f);
    glVertex2i(0.0f, 0.0f);

    // Top right
    glTexCoord2f(1.0f, 0.0f);
    glVertex2i(10.0f, 0.0f);

    // Bottom right
    glTexCoord2f(1.0f, 1.0f);
    glVertex2i(10.0f, 10.0f);
glEnd(); 
```

如您所见，每个顶点都附有纹理“点”。它会告诉 OpenGL 如何显示你的纹理。

现在，您可以通过为顶点指定适当的坐标来选择希望纹理在平面上分布的方式。

您必须记住的是纹理坐标以 0.0 开始，以 1.0 结束。将此值增加到大于 1.0 将导致行为取决于纹理的设置（例如平铺）。

在您的教程中，您有非常漂亮的图片展示纹理坐标从 0.0 到 1.0 范围以及为特定顶点设置的纹理坐标：

![在此处输入图像描述](../Images/0659d02964537f6c57a16a09e41bd779.png)

PS。为了使纹理被显示，您必须首先通过调用启用此功能：

```
glEnable(GL_TEXTURE_2D); 
```

您不必每次使用纹理绘制对象时都调用它。它可能在您绘图之前只调用一次。

* * *

**编辑**

1.  根据您的下一个问题：您想要的是实现平铺效果，这可以在创建纹理时轻松完成。在您的加载程序中，在此行之后：

    `glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, GL_NEAREST);`

    你应该像这样设置下一个纹理参数：

    ```
    glTexParameterf( GL_TEXTURE_2D, GL_TEXTURE_WRAP_S, GL_REPEAT );
    glTexParameterf( GL_TEXTURE_2D, GL_TEXTURE_WRAP_T, GL_REPEAT ); 
    ```

    在这种情况下`GL_REPEAT`，只要它的坐标高于 1.0，就会使用它来重复纹理。例如，如果您将纹理坐标指定为 2.0，则它与您输入的 1.0 相同，依此类推。

2.  您的第二个问题存在，因为您仍然有纹理绑定并且您启用了纹理（记住您使用过 `glEnable(GL_TEXTURE_2D);`），所以基本上您现在绘制的所有内容都将被纹理覆盖。

    但是，如果您现在想在不对其进行纹理化的情况下绘制某些东西，则基本上必须在绘制第二个平面之前禁用纹理化，并在绘制后再次启用它：

    ```
    glDisable(GL_TEXTURE_2D);
       // Draw your second plane here
    glEnable(GL_TEXTURE_2D); 
    ```

* * *

**编辑2**

好吧，我想你误解了我一点。在这种情况下，平铺无法工作，因为您将纹理坐标指定为最大值 1.0，这是纹理的结尾。我准备了一张图片，可以向您展示我的意思：

![在此处输入图像描述](../Images/68bf483bd85766e0affa8f1a260e443a.png)

在中间那些**红色**的图片中，我标记了纹理坐标和**黑色**- 顶点坐标。

所以基本上如果你像现在这样设置你的纹理坐标（最大值为 1.0），你会让你的纹理围绕你的平面拉伸。现在想象这个平面非常大——如果纹理分辨率低，它只会导致丑陋的拉伸效果。

为了达到平铺效果，您必须将值设置为高于 1.0，就像在我的示例中一样 - 2.0 会导致纹理重复两次。

由于没有神奇的方法可以让您的纹理在您的平面上看起来“漂亮”，因此您必须使用一些数学来实现它。现在我把这个留给你。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T23:12:24.060

您需要为每个顶点指定一个 uv 坐标。您使用函数执行此操作，该`glTexCoord2f();`
函数接受两个参数，第一个是 u，另一个是 v。您的绘图代码将变为：

```
glBegin(GL_TRIANGLE_STRIP);
glColor4f(0.8, 0.8, 0.5, 1.0);
glTexCoord2f(0.0f, 0.0f); glVertex3f(startlen, height, startwid);
glTexCoord2f(0.0f, 1.0f); glVertex3f(startlen, height, startwid + width);
glTexCoord2f(1.0f, 1.0f); glVertex3f(startlen + length, height, startwid);
glTexCoord2f(1.0f, 0.0f); glVertex3f(startlen + length, height, startwid + width);
glEnd(); 
```

您可能会稍微切换它们，我不知道您想如何将纹理映射到它。您可以将 u 视为纹理上的 x，其中 0.0 = 左侧和 1.0 = 右侧，您可以将 v 视为纹理上的 y，其中 0.0 = 顶部和 1.0 = 底部。
现在，您还需要做一些事情，首先，需要启用纹理：

```
glEnable(GL_TEXTURE_2D); //call this once, during initialization 
```

需要加载纹理，就像您已经说过的那样：

```
glGenTextures(1, &MyTexture);
glBindTexture(GL_TEXTURE_2D, MyTexture);
glTexParameteri(GL_TEXTURE_2D,GL_TEXTURE_MIN_FILTER,GL_NEAREST);
glTexParameteri(GL_TEXTURE_2D,GL_TEXTURE_MAG_FILTER,GL_NEAREST);
glTexImage2D(GL_TEXTURE_2D, 0, GL_RGB, width, height, 0, GL_RGB, GL_UNSIGNED_BYTE, data); //data is a gluByte array of your image data 
```

在绘制四边形之前必须绑定它：

```
glBindTexture(GL_TEXTURE_2D, MyTexture); 
```

我会让纹理的实际加载由你决定，因为这将是一个完全不同的问题，并且需要在这里广泛讨论。

# database - 声纳不会根据日期值将分析保存到数据库

> ID：14740333
> 
> 赞同：1
> 
> 时间：2013-02-06T22:44:50.883
> 
> 标签：database, date, jenkins, sonarqube

在 Jenkins 服务器上，我需要保存一些跨越多个修订版的 java 项目的声纳运行。到目前为止，这一切正常，直到我尝试在某些旧版本的代码上运行。我发现如果我将项目属性值 sonar.projectDate 设置为 2006-2007 年的某个地方（我拥有的最古老的代码来自那里），Sonar 将不会保存运行。但是，Jenkins 控制台输出是成功运行和失败运行之间的完全匹配（甚至都在底部声明了 SUCCESS）。不幸的是，它不在仪表板上，但如果我将日期修改为更近的日期，甚至在未来，比如 2020 年，Sonar 将完美地保存这些数据，并且它确实会显示在仪表板上。

还有其他人有这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T06:51:52.777

愚蠢的我，这必须处理 Sonar 的默认行为是如何保存和终止快照（测量代码库的实例）。默认情况下，快照仅在最佳情况下最多保存 5 年，如果您将代码库快照上的日期设置为超过 5 年最大值，它将被忽略。

# javascript - XPCOM writeString 错误

> ID：14740337
> 
> 赞同：0
> 
> 时间：2013-02-06T22:45:16.713
> 
> 标签：javascript, firefox, xpcom, imacros

我正在使用此功能通过 FireFox 中的 iMacros 插件将文本写入文件。

```
//This function writes string into a file
function WriteFile(path,string)
{

//import FileUtils.jsm
Components.utils.import("resource://gre/modules/FileUtils.jsm");
//declare file
var file = new FileUtils.File(path);

//declare file path
file.initWithPath(path);

//if it exists move on if not create it
if (!file.exists())
{
file.create(file.NORMAL_FILE_TYPE, 0666);
}

var charset = 'EUC-JP';
var fileStream = Components.classes['@mozilla.org/network/file-output-stream;1']
.createInstance(Components.interfaces.nsIFileOutputStream);
fileStream.init(file, 18, 0x200, false);
var converterStream = Components
.classes['@mozilla.org/intl/converter-output-stream;1']
.createInstance(Components.interfaces.nsIConverterOutputStream);
converterStream.init(fileStream, charset, string.length,
Components.interfaces.nsIConverterInputStream.DEFAULT_REPLACEMENT_CHARACTER);

//write file to location
converterStream.writeString("\r\n"+string);
converterStream.close();
fileStream.close();

} 
```

但是就昨天而言，无论我尝试使用哪种浏览器以及在不同的 PC 上，我都开始收到此消息。

```
[Exception... "Component returned failure code: 0x80460003 (NS_ERROR_LOSS_OF_SIGNIFICANT_DATA) [nsIConverterOutputStream.writeString]"  nsresult: "0x80460003 (NS_ERROR_LOSS_OF_SIGNIFICANT_DATA)"  location: "JS frame :: chrome://imacros/content/iMacros.js :: WriteFile :: line 329"  data: no] (Error code: 991) 
```

所以我检查了[Mozilla 开发人员](https://developer.mozilla.org/en-US/docs/Table_Of_Errors)这个错误是什么意思，发现了这个。

```
NS_ERROR_LOSS_OF_SIGNIFICANT_DATA (0x80460003)
NS_ERROR_ILLEGAL_DURING_SHUTDOWN (0x8046001E)
Many operations cannot be performed once the application is being shutdown. This error will occur in this situation. 
```

但是我无法弄清楚这里的错误是什么，因为我没有以任何方式更改功能代码。有人可以解释这个错误吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T22:16:58.633

我换了这个

```
var charset = 'EUC-JP'; 
```

有了这个

```
var charset = 'UTF8'; 
```

它解决了我的问题。

# xml - AS3 - 你如何确保你的 XML 加载

> ID：14740346
> 
> 赞同：1
> 
> 时间：2013-02-06T22:46:15.733
> 
> 标签：xml, actionscript-3, loading

我不需要对我的代码进行任何调试，我正在寻找更多的方法。

这是我的问题。我正在开发一个公司仪表板，它将加载到公司范围内的多台大屏幕电视上。每个屏幕都会加载我的 Flash 应用程序以显示各种信息。这提出了我的问题...... XML。

现在我在开发时在本地运行我的应用程序。一切都很好，即使我在一台电视上测试过，它也运行良好。然而，在开发此应用程序之前，我为他们在我工作之前所拥有的东西做了另一个“创可贴修复”。该应用程序运行良好，但可能每周一次加载失败并且所有内容都变为空白。在 1 天的空白信息后，它会重新加载并继续工作。

在我的新应用程序中，我试图围绕我已经看到的这个问题进行计划。我想做的是尝试加载 xml，如果它无法再次尝试相同的功能 3 次。如果它失败了3次，那么它应该被打破。:)

对我来说，这听起来像是一个 try/catch 语句，但我似乎无法让它以我想要的方式工作。我觉得好像这是我想太多了。

```
function loadXML ()
    var i:Number = 0;
    do {
        try{
            XMLLoader.load(new URLRequest("myXMLURL"));
        } catch (error:Error) {
            i++
          }
        }
    while(i < 3)
} 
```

任何反馈或确保 xml 不会失败的任何其他方法将不胜感激。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T23:00:05.863

而不是这样的循环，您应该使用在这些情况下调度的内置事件，例如[`IOErrorEvent`](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/events/IOErrorEvent.html).

如果您将侦听器附加到`URLLoader`加载 XML，您将能够在`IOErrorEvent`处理程序中重试：

```
function loadXML():void
{
    var ldr:URLLoader = new URLLoader();

    ldr.addEventListener(IOErrorEvent.IO_ERROR, error);
    ldr.load( new URLRequest("document.xml") );
}

function error(e:IOErrorEvent):void
{
    loadXML();
} 
```

`URLLoader`这是在类似情况下调度的[其他事件的列表。](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/net/URLLoader.html#eventSummary)

# jquery - 来自 jsonp 的数据

> ID：14740352
> 
> 赞同：0
> 
> 时间：2013-02-06T22:46:27.193
> 
> 标签：jquery, json, jsonp

¿我如何（使用 Jquery）从这个 json 结果中获取特定值？例如电子邮件

```
 [
 {
   address: "",
   province: "",
   firstName: "Anna",
   email: "anna@example.org",
   postalCode: "",
   key: "135",
   type: "technical",
   description: "",
   isPrimaryContact: true,
   phone: "",
   country: "",
   city: "",
   salutation: "",
   position: " Projects Leader, Academic Systems",
   lastName: ""
 }
] 
```

我使用来自不同服务器中的 json 的 $.ajax() 。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T22:49:08.520

如果您有一个 JSON 对象，您只需使用：

```
var email = data.email; 
```

这是一个完整的简短示例：

```
 var data = {
   address: "",
   province: "",
   firstName: "Anna",
   email: "anna@example.org"
 };

alert(data.email); 
```

如果您的数据确实是一个数组，则需要使用：

```
alert(data[0].email); 
```

类似的缩短示例：

```
 var data = [{
   address: "",
   province: "",
   firstName: "Anna",
   email: "anna@example.org"
 }];

alert(data[0].email); 
```

# api - 有哪些流行的机器人 API/框架

> ID：14740353
> 
> 赞同：2
> 
> 时间：2013-02-06T22:46:44.923
> 
> 标签：api, frameworks, robotics

我正在为 Arduino 开发一个机器人库，我希望能够站在巨人的肩膀上，并确保我能够满足主要要求。是否有任何流行的、构建良好的机器人 API 可供我仔细阅读以了解典型的机器人功能？硬件平台无关紧要。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-08T03:53:26.880

[ROS（机器人操作系统）](http://www.ros.org/)是事实上的标准。

[您可以在他们的网站](http://wiki.ros.org/ROS/Tutorials)上找到涵盖该平台的教程。

您还将找到有关在 Arduino 中使用 ROS的[教程。](http://wiki.ros.org/rosserial_arduino/Tutorials/Arduino%20IDE%20Setup)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-10-27T08:47:35.637

ROS 是开源标准。

# batch-file - IF块内的设置和环境变量

> ID：14740356
> 
> 赞同：0
> 
> 时间：2013-02-06T22:46:54.657
> 
> 标签：batch-file, environment-variables, dos

在 if 块内设置环境变量 BOOBOO 的值似乎不会设置它。但是，它是在 if 块结束后设置的。为什么它在 if 块中没有值？

在 Microsoft Windows XP [版本 5.1.2600] SP3 上运行

```
echo BOOBOO is +++%BOOBOO%+++
echo step 1
setlocal enableextensions
IF "%BOOBOO%" == "" (
    echo step 2
    SET BOOBOO=xyz
    echo step 3
    echo BOOBOO has been set to %BOOBOO%
    echo BOOBOO part is %BOOBOO:~0,2%
    echo step 4
)
echo step 8
echo BOOBOO ends up as %BOOBOO%
echo step 9
EXIT /B 0 
```

===

```
M:> t
BOOBOO is ++++++
step 1
step 2
step 3
BOOBOO has been set to
BOOBOO part is ~0,2
step 4
step 8
BOOBOO ends up as xyz
step 9 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T23:05:30.360

该值是在 IF 块中设置的，但是您无法使用普通扩展看到更改，因为该值在解析时被扩展，并且在执行 IF 命令之前会立即解析整个块。因此，您将获得进入 IF 块之前存在的值。

您已经启用了延迟扩展。你只需要使用它。

```
echo BOOBOO has been set to !BOOBOO!
echo BOOBOO part is !BOOBOO:~0,2! 
```

# jquery - 看不到我在哪里失踪；声明之前

> ID：14740357
> 
> 赞同：0
> 
> 时间：2013-02-06T22:47:00.377
> 
> 标签：jquery

我正在尝试使用 javascript 创建一个计时器来运行计时器和 mysqli 绑定变量`$dbSessionDuration`以从数据库中检索开始时间。问题是：

*   我收到一个未定义的变量，因为它表明我是`missing ; before statement`，但我看不到问题出在哪里，因为它与变量本身指向同一行

如何修复错误？

```
View source code below:

    (function(){
  $(document).ready(function() {
    var time = 
Notice: Undefined variable: dbSessionDurationTime in /web/stud/u0867587/Mobile_app/assessment.php on line 108
null,
      parts = time.split(':'),
      hours = +parts[0],
      minutes = +parts[1],
      seconds = +parts[2],
      span = $('#countdown');

    function correctNum(num) {
      return (num<10)? ("0"+num):num;
    }

    var timer = setInterval(function(){
        seconds--;
        if(seconds == -1) {
            seconds = 59;
            minutes--;

            if(minutes == -1) {
                minutes = 59;
                hours--;

                if(hours==-1) {
                  alert("timer finished");
                  clearInterval(timer);
                  return;
                }
            }
        }
        span.text(correctNum(hours) + ":" + correctNum(minutes) + ":" + correctNum(seconds));
    }, 1000);
  }); 

}); 
```

实际代码如下：

```
(function(){
  $(document).ready(function() {
    var time = <?php echo json_encode($dbSessionDurationTime); ?>,
      parts = time.split(':'),
      hours = +parts[0],
      minutes = +parts[1],
      seconds = +parts[2],
      span = $('#countdown');

    function correctNum(num) {
      return (num<10)? ("0"+num):num;
    }

    var timer = setInterval(function(){
        seconds--;
        if(seconds == -1) {
            seconds = 59;
            minutes--;

            if(minutes == -1) {
                minutes = 59;
                hours--;

                if(hours==-1) {
                  alert("timer finished");
                  clearInterval(timer);
                  return;
                }
            }
        }
        span.text(correctNum(hours) + ":" + correctNum(minutes) + ":" + correctNum(seconds));
    }, 1000);
  }); 

}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T22:49:49.270

这实际上是 PHP 问题而不是 javascript 问题。您的变量`$dbSessionDurationTime`未定义。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T22:50:59.483

`$dbSessionDurationTime`没有定义。如果你去定义你不应该再收到这个错误。这是 PHP 而不是 Java 脚本。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-06T22:52:24.340

变量 $dbSessionDuration 未定义。来自 Javascript 代码中间的 PHP 代码的错误消息导致语法错误。

# csv - 在 Jmeter 中使用 CSV 文件设置 2 while 循环

> ID：14740358
> 
> 赞同：2
> 
> 时间：2013-02-06T22:47:10.023
> 
> 标签：csv, while-loop, jmeter

我想在我的 Jmeter 项目中添加 2 个 while 循环，其中包含 2 个 CSV 数据集配置项，如下所示：

```
While Loop condition: ${__javaScript("${var1}"!="<EOF>")}
    CSVDataSetConfig variables: var1 - recycle : false, stop thread on current thread: true
    While Loop condition: ${__javaScript("${var2}"!="<EOF>")}
        CSVDataSetConfig variables: var2 - recycle : false, stop thread on current thread: false
        HTTP Request
        . . . 
```

这必须执行第二个循环，直到第一个循环的变量 (var1) 位于文件末尾。

但问题是，var2 卡在 <EOF> 上，因此跳过了第二个 while 循环。

您是否有将 var2 设置为文件开头的解决方案或其他解决方案？

# perl - 为什么 LWP::UserAgent 不能完全获取这个站点？

> ID：14740365
> 
> 赞同：3
> 
> 时间：2013-02-06T22:47:32.850
> 
> 标签：perl, lwp, lwp-useragent

它从一开始只输出几行。

```
#!/usr/bin/perl

use strict;
use warnings;
use LWP::UserAgent;

my $ua = LWP::UserAgent->new;
my $response = $ua->get('http://www.eurogamer.net/articles/df-hardware-wii-u-graphics-power-finally-revealed');
print $response->decoded_content; 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-06T23:54:53.330

我进行了以下修改：

```
my $response = $ua->get( 'http://www.eurogamer.net/articles/df-hardware-wii-u-graphics-power-finally-revealed' );
say $response->headers->as_string; 
```

看到了这个：

```
Cache-Control: max-age=60s
Connection: close
Date: Wed, 06 Feb 2013 23:51:15 GMT
Via: 1.1 varnish
Age: 0
Server: Apache
Vary: Accept-Encoding
Content-Length: 50519
Content-Type: text/html; charset=ISO-8859-1
Client-Aborted: die
Client-Date: Wed, 06 Feb 2013 23:50:50 GMT
Client-Peer: 94.198.83.18:80
Client-Response-Num: 1
X-Died: Illegal field name 'X-Meta-Twitter:card' at .../HTML/HeadParser.pm line 207.
X-Varnish: 630361704 
```

它似乎不喜欢第`<meta name="twitter:card" content="summary" />`27 行的标签。它说它死了。

它似乎将任何`meta`具有`name`属性的标签转换为`"X-Meta-\u$attr->{name}"`“标题”。然后它尝试将`content`属性的值存储为 X-meta“标题”值。像这样（从第 194 行开始）：

```
if ($tag eq 'meta') {
    my $key = $attr->{'http-equiv'};
    if (!defined($key) || !length($key)) {
        if ($attr->{name}) {
            $key = "X-Meta-\u$attr->{name}"; # <-- Here's the little trick
        } elsif ($attr->{charset}) { # HTML 5 <meta charset="...">
            $key = "X-Meta-Charset";
            $self->{header}->push_header($key => $attr->{charset});
            return;
        } else {
            return;
        }
    }
    $self->{'header'}->push_header($key => $attr->{content});
} 
```

我将此模块的修改副本推送到 PERL5LIB 目录中。我将步骤包装`push_header`在一个`eval`块中并完全下载了页面。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-07-19T11:54:34.687

我有完全相同的问题...

我修复了它禁用启用 HTML::HeadParser 的选项“parse_head”。

```
 $self->{ua}->parse_head(0); 
```

我知道禁用此功能不是一个好主意，但我更喜欢可用性而不是正确解码的文档。

# wcf - WCF SOAP 1.1 和 WS-Security 1.0、客户端证书传输身份验证、消息正文签名的服务证书、用户名令牌、密码摘要、随机数

> ID：14740369
> 
> 赞同：13
> 
> 时间：2013-02-06T22:47:36.810
> 
> 标签：wcf, authentication, certificate, signature, usernametoken

**概括：** 我正在开发一个 .NET 4.0 WCF 客户端，以使用 SOAP 1.1 和 WS-Security 1.0 使用 Web 服务（另一端是 DataPower，Java 服务）。WCF 客户端必须为传输层的相互身份验证实现客户端证书。消息正文需要使用单独的服务/签名证书进行签名。SOAP 标头还需要包含带有密码摘要的用户名令牌，并包含 Nonce 和 Created 标记。

我可以使用带有 BasicHTTPBinding 的 WSE 3.0 使用此 Web 服务。但到目前为止，我还没有成功地使用 WSHttpBinding 或 CustomBinding 实现 WCF。我已经尝试了所有的安全绑定元素，但到目前为止都没有运气。

我也在使用这里的 usernametoken 库（[http://blogs.msdn.com/b/aszego/archive/2010/06/24/usernametoken-profile-vs-wcf.aspx](http://blogs.msdn.com/b/aszego/archive/2010/06/24/usernametoken-profile-vs-wcf.aspx)）所以我可以添加密码摘要/随机数/在 SOAP 标头中的 UsernameToken 中创建。

我目前正在使用 SecurityBindingElement.CreateMutualCertificateBindingElement 我还尝试了其他几个，例如 AsymmetricSecurityBindingElement、TransportSecurityBindingElement 等（在下面的代码中注释掉）

**CERTS：** 我使用 MMC 将客户端证书和服务证书加载到证书存储中（顺便说一句，我在 Windows 7 上）。客户端证书和服务证书都有私钥。我已将 PFX 文件加载到 LocalMachine/Personal、LocalMachine/Root 和 LocalMachine/TrustedPeople。我还运行了 FindPrivateKey/ICACLS 来授予“IIS App Pool/DefaultAppPool”帐户的权限。尽管这些都不重要，因为我可以从我的机器上运行 WSE 3.0 代码，并且它可以在没有任何证书问题的情况下运行。

*命令运行：*

```
FindPrivateKey.exe My LocalMachine -t "thumbprint of client cert"
FindPrivateKey.exe My LocalMachine -t "thumbprint of service cert"
icacls C:\ProgramData\Microsoft\Crypto\RSA\MachineKeys\{privateKeyOfClientCert} /grant "IIS AppPool\DefaultAppPool":R      <<Successfully processed 1 files; Failed processing 0 files>>
icacls C:\ProgramData\Microsoft\Crypto\RSA\MachineKeys\{privateKeyOfServiceCert} /grant "IIS AppPool\DefaultAppPool":R     <<Successfully processed 1 files; Failed processing 0 files>> 
```

**WCF 问题：** 我目前收到来自 DataPower 网关的“无法为具有权限 'xxcom' 的 SSL/TLS 建立安全通道”消息。我认为这可能是因为网关正在获取服务证书并将其用于客户端身份验证，而不是使用我发送的客户端证书。我这样说是因为当我没有为端点指定 DNS 身份时，我收到一条消息，说网关期望 DNS 身份是“{服务的主题名称/签名证书}”。

这是 WCF 生成的 SOAP 请求，它给出了上述错误。WCF SOAP 请求看起来与 WSE SOAP 请求非常相似。上述错误很可能是由于 SSL/传输层的证书问题而发生的。

***WCF SOAP 请求：***

```
<s:Envelope xmlns:s="http://schemas.xmlsoap.org/soap/envelope/" xmlns:u="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd">
<s:Header>
    <o:Security s:mustUnderstand="1" xmlns:o="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">
        <u:Timestamp u:Id="uuid-8533d9a5-865e-4a4b-a750-fadb7c1ce36c-1">
            <u:Created>2013-02-06T20:53:04.679Z</u:Created>
            <u:Expires>2013-02-06T20:58:04.679Z</u:Expires>
        </u:Timestamp>
        <o:BinarySecurityToken u:Id="uuid-0bab08ce-3e3b-4360-a44b-694b06a3dd67-2" ValueType="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-x509-token-profile-1.0#X509v3">Removed Service Cert Encoded Value</o:BinarySecurityToken>
        <wsse:UsernameToken wsu:Id="7843ab92-f69a-4d00-a5ba-117e32a74f49" xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd"
                            xmlns:wsu="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd">
            <wsse:Username>USER_Removed</wsse:Username>
            <wsse:Password Type="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-username-token-profile-1.0#PasswordDigest">XXX=</wsse:Password>
            <wsse:Nonce>XXX==</wsse:Nonce>
            <wsu:Created>2013-02-06T20:53:04Z</wsu:Created>
        </wsse:UsernameToken>
        <Signature xmlns="http://www.w3.org/2000/09/xmldsig#">
            <SignedInfo>
                <CanonicalizationMethod Algorithm="http://www.w3.org/2001/10/xml-exc-c14n#"></CanonicalizationMethod>
                <SignatureMethod Algorithm="http://www.w3.org/2000/09/xmldsig#rsa-sha1"></SignatureMethod>
                <Reference URI="#_1">
                    <Transforms>
                        <Transform Algorithm="http://www.w3.org/2001/10/xml-exc-c14n#"></Transform>
                    </Transforms>
                    <DigestMethod Algorithm="http://www.w3.org/2000/09/xmldsig#sha1"></DigestMethod>
                    <DigestValue>XXX=</DigestValue>
                </Reference>
                <Reference URI="#uuid-8533d9a5-865e-4a4b-a750-fadb7c1ce36c-1">
                    <Transforms>
                        <Transform Algorithm="http://www.w3.org/2001/10/xml-exc-c14n#"></Transform>
                    </Transforms>
                    <DigestMethod Algorithm="http://www.w3.org/2000/09/xmldsig#sha1"></DigestMethod>
                    <DigestValue>XXX=</DigestValue>
                </Reference>
                <Reference URI="#7843ab92-f69a-4d00-a5ba-117e32a74f49">
                    <Transforms>
                        <Transform Algorithm="http://www.w3.org/2001/10/xml-exc-c14n#"></Transform>
                    </Transforms>
                    <DigestMethod Algorithm="http://www.w3.org/2000/09/xmldsig#sha1"></DigestMethod>
                    <DigestValue>XXX=</DigestValue>
                </Reference>
            </SignedInfo>
            <SignatureValue>XXXLongXXX=</SignatureValue>
            <KeyInfo>
                <o:SecurityTokenReference>
                    <o:Reference URI="#uuid-0bab08ce-3e3b-4360-a44b-694b06a3dd67-2"></o:Reference>
                </o:SecurityTokenReference>
            </KeyInfo>
        </Signature>
    </o:Security>
</s:Header>
<s:Body u:Id="_1" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema">
    <ping xmlns="https://x.x.com/xxx/v1">
        <pingRequest xmlns="">hello</pingRequest>
    </ping>
</s:Body> 
```

***WSE 3.0 SOAP 请求（有效）：***

```
<soap:Envelope xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:wsa="http://schemas.xmlsoap.org/ws/2004/08/addressing"
           xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd" xmlns:wsu="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd">
<soap:Header>
    <wsa:Action wsu:Id="Id-4271fb72-464a-467d-ab1f-4d32542e20f0"/>
    <wsa:MessageID wsu:Id="Id-11657f64-d856-47d8-b600-d5379fb91a0d">urn:uuid:ff8becb7-74c2-4844-ab46-8ae23f1355a7</wsa:MessageID>
    <wsa:ReplyTo wsu:Id="Id-40b2e6e8-e67b-4a6c-a545-071ce0f0107a">
        <wsa:Address>http://schemas.xmlsoap.org/ws/2004/08/addressing/role/anonymous</wsa:Address>
    </wsa:ReplyTo>
    <wsa:To wsu:Id="Id-d5e0b488-6f8a-479c-940d-2b85833dbc66">https://x.x.com/xxx/v1</wsa:To>
    <wsse:Security soap:mustUnderstand="1">
        <wsu:Timestamp wsu:Id="Timestamp-68476551-5c58-4a47-967b-54ec18257b1b">
            <wsu:Created>2013-02-06T19:38:39Z</wsu:Created>
            <wsu:Expires>2013-02-06T19:43:39Z</wsu:Expires>
        </wsu:Timestamp>
        <wsse:UsernameToken wsu:Id="SecurityToken-e5f65166-a825-48cb-a939-8e515a637e01">
            <wsse:Username>USER_Removed</wsse:Username>
            <wsse:Password Type="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-username-token-profile-1.0#PasswordDigest">XXX=</wsse:Password>
            <wsse:Nonce>XXX==</wsse:Nonce>
            <wsu:Created>2013-02-06T19:38:39Z</wsu:Created>
        </wsse:UsernameToken>
        <Signature xmlns="http://www.w3.org/2000/09/xmldsig#">
            <SignedInfo>
                <ds:CanonicalizationMethod xmlns:ds="http://www.w3.org/2000/09/xmldsig#" Algorithm="http://www.w3.org/2001/10/xml-exc-c14n#"/>
                <SignatureMethod Algorithm="http://www.w3.org/2000/09/xmldsig#rsa-sha1"/>
                <Reference URI="#Id-4271fb72-464a-467d-ab1f-4d32542e20f0">
                    <Transforms>
                        <Transform Algorithm="http://www.w3.org/2001/10/xml-exc-c14n#"/>
                    </Transforms>
                    <DigestMethod Algorithm="http://www.w3.org/2000/09/xmldsig#sha1"/>
                    <DigestValue>XXX=</DigestValue>
                </Reference>
                <Reference URI="#Id-11657f64-d856-47d8-b600-d5379fb91a0d">
                    <Transforms>
                        <Transform Algorithm="http://www.w3.org/2001/10/xml-exc-c14n#"/>
                    </Transforms>
                    <DigestMethod Algorithm="http://www.w3.org/2000/09/xmldsig#sha1"/>
                    <DigestValue>XXX=</DigestValue>
                </Reference>
                <Reference URI="#Id-40b2e6e8-e67b-4a6c-a545-071ce0f0107a">
                    <Transforms>
                        <Transform Algorithm="http://www.w3.org/2001/10/xml-exc-c14n#"/>
                    </Transforms>
                    <DigestMethod Algorithm="http://www.w3.org/2000/09/xmldsig#sha1"/>
                    <DigestValue>XXX=</DigestValue>
                </Reference>
                <Reference URI="#Id-d5e0b488-6f8a-479c-940d-2b85833dbc66">
                    <Transforms>
                        <Transform Algorithm="http://www.w3.org/2001/10/xml-exc-c14n#"/>
                    </Transforms>
                    <DigestMethod Algorithm="http://www.w3.org/2000/09/xmldsig#sha1"/>
                    <DigestValue>XXX=</DigestValue>
                </Reference>
                <Reference URI="#Timestamp-68476551-5c58-4a47-967b-54ec18257b1b">
                    <Transforms>
                        <Transform Algorithm="http://www.w3.org/2001/10/xml-exc-c14n#"/>
                    </Transforms>
                    <DigestMethod Algorithm="http://www.w3.org/2000/09/xmldsig#sha1"/>
                    <DigestValue>XXX=</DigestValue>
                </Reference>
                <Reference URI="#Id-6f76e50e-932c-4878-bbc0-3ef4c8a36990">
                    <Transforms>
                        <Transform Algorithm="http://www.w3.org/2001/10/xml-exc-c14n#"/>
                    </Transforms>
                    <DigestMethod Algorithm="http://www.w3.org/2000/09/xmldsig#sha1"/>
                    <DigestValue>XXX=</DigestValue>
                </Reference>
            </SignedInfo>
            <SignatureValue>XXXLongXXX=</SignatureValue>
            <KeyInfo>
                <wsse:SecurityTokenReference>
                    <wsse:KeyIdentifier ValueType="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-x509-token-profile-1.0#X509SubjectKeyIdentifier"
                                        EncodingType="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-soap-message-security-1.0#Base64Binary">XXX=</wsse:KeyIdentifier>
                </wsse:SecurityTokenReference>
            </KeyInfo>
        </Signature>
    </wsse:Security>
</soap:Header>
<soap:Body wsu:Id="Id-6f76e50e-932c-4878-bbc0-3ef4c8a36990">
    <ping xmlns="https://x.x.com/xxx/v1">
        <pingRequest xmlns="">hello</pingRequest>
    </ping>
</soap:Body> 
```

这是所有配置，请让我知道我做错了什么！

WCF web.config：当我在代码中进行所有配置时，我从 web.config 中删除了所有内容。

代码中的 WCF 配置：

```
var proxy = GetProxy();
pingResponseMessage resp = proxy.ping("hello");
lblStatus.Text = resp.status.ToString();

private XXXClient GetProxy()
{

    System.Net.ServicePointManager.ServerCertificateValidationCallback += (se, cert, chain, sslerror) => { return true; };

    XXXClient proxy = new XXXClient(GetCustomBinding(), new EndpointAddress(new Uri("https://xxx"), EndpointIdentity.CreateDnsIdentity("I am forced to put the signing cert subject here, nothing else works"), new AddressHeaderCollection()));

    proxy.Endpoint.Behaviors.Remove(typeof(ClientCredentials));
    proxy.Endpoint.Behaviors.Add(new UsernameClientCredentials(new UsernameInfo(@"USER_Removed", "X")));

    proxy.ClientCredentials.ClientCertificate.SetCertificate(StoreLocation.LocalMachine, StoreName.My, X509FindType.FindByThumbprint, "REMOVED");
    proxy.ClientCredentials.ServiceCertificate.SetDefaultCertificate(StoreLocation.LocalMachine, StoreName.My, X509FindType.FindByThumbprint, "REMOVED");
    proxy.ClientCredentials.ServiceCertificate.Authentication.CertificateValidationMode = System.ServiceModel.Security.X509CertificateValidationMode.None;

    return proxy;
}

private Binding GetCustomBinding()
{
    //TransportSecurityBindingElement secBE = SecurityBindingElement.CreateCertificateOverTransportBindingElement(MessageSecurityVersion.WSSecurity10WSTrust13WSSecureConversation13WSSecurityPolicy12BasicSecurityProfile10);
    //AsymmetricSecurityBindingElement secBE = (AsymmetricSecurityBindingElement)SecurityBindingElement.CreateMutualCertificateBindingElement(MessageSecurityVersion.WSSecurity10WSTrustFebruary2005WSSecureConversationFebruary2005WSSecurityPolicy11BasicSecurityProfile10);
    //secBE.InitiatorTokenParameters = new System.ServiceModel.Security.Tokens.X509SecurityTokenParameters { InclusionMode = SecurityTokenInclusionMode.AlwaysToRecipient, RequireDerivedKeys = false, X509ReferenceStyle = X509KeyIdentifierClauseType.SubjectKeyIdentifier };
    //secBE.RecipientTokenParameters = new System.ServiceModel.Security.Tokens.X509SecurityTokenParameters { InclusionMode = SecurityTokenInclusionMode.AlwaysToInitiator, RequireDerivedKeys = false, X509ReferenceStyle = X509KeyIdentifierClauseType.SubjectKeyIdentifier };
    //secBE.MessageProtectionOrder = System.ServiceModel.Security.MessageProtectionOrder.SignBeforeEncrypt;
    //secBE.EndpointSupportingTokenParameters.Signed.Add(new UserNameSecurityTokenParameters() { InclusionMode = SecurityTokenInclusionMode.AlwaysToRecipient, RequireDerivedKeys = false });
    //secBE.EndpointSupportingTokenParameters.Signed.Add(new X509SecurityTokenParameters(X509KeyIdentifierClauseType.SubjectKeyIdentifier, SecurityTokenInclusionMode.Never) { InclusionMode = SecurityTokenInclusionMode.Never, RequireDerivedKeys = false, X509ReferenceStyle = X509KeyIdentifierClauseType.SubjectKeyIdentifier });
    //secBE.ProtectionTokenParameters = new System.ServiceModel.Security.Tokens.X509SecurityTokenParameters { InclusionMode = SecurityTokenInclusionMode.AlwaysToRecipient };
    //secBE.DefaultAlgorithmSuite = new CustomSecurityAlgorithm();

    SecurityBindingElement secBE = SecurityBindingElement.CreateMutualCertificateBindingElement(MessageSecurityVersion.WSSecurity10WSTrustFebruary2005WSSecureConversationFebruary2005WSSecurityPolicy11BasicSecurityProfile10);
    secBE.MessageSecurityVersion = MessageSecurityVersion.WSSecurity10WSTrustFebruary2005WSSecureConversationFebruary2005WSSecurityPolicy11BasicSecurityProfile10;
    secBE.EndpointSupportingTokenParameters.Signed.Add(new UsernameTokenParameters() { InclusionMode= SecurityTokenInclusionMode.AlwaysToRecipient, ReferenceStyle = SecurityTokenReferenceStyle.External, RequireDerivedKeys = false });
    secBE.SecurityHeaderLayout = SecurityHeaderLayout.Strict;
    //secBE.AllowInsecureTransport = false;
    //secBE.AllowSerializedSigningTokenOnReply = false;
    secBE.EnableUnsecuredResponse = true;
   secBE.IncludeTimestamp = true;
    secBE.SetKeyDerivation(false);

    TextMessageEncodingBindingElement textEncBE = new TextMessageEncodingBindingElement(MessageVersion.Soap11, System.Text.Encoding.UTF8);

    HttpsTransportBindingElement httpsBE = new HttpsTransportBindingElement();
    httpsBE.RequireClientCertificate = true;
    //httpsBindingElement.AllowCookies = false;
    //httpsBindingElement.AuthenticationScheme = System.Net.AuthenticationSchemes.Basic;
    httpsBE.BypassProxyOnLocal = false;
    httpsBE.HostNameComparisonMode = HostNameComparisonMode.StrongWildcard;
    //httpsBindingElement.KeepAliveEnabled = false;
    httpsBE.TransferMode = TransferMode.Buffered;
    httpsBE.UseDefaultWebProxy = true;

    CustomBinding myBinding = new CustomBinding();
    myBinding.Elements.Add(secBE);
    myBinding.Elements.Add(textEncBE);
    myBinding.Elements.Add(httpsBE);

    return myBinding;
} 
```

我在 ServiceContract 和 OperationContracts 上添加了 ProtectionLevel.Sign，因为我只需要对消息正文进行签名。不过，我还没有走到这一步来验证它。

```
[System.ServiceModel.ServiceContractAttribute(Namespace = "https://x.x.com/xxx/v1", ConfigurationName = "x.x", ProtectionLevel = System.Net.Security.ProtectionLevel.Sign)]
public interface XXXService {
    [System.ServiceModel.OperationContractAttribute(Action = "", ReplyAction = "*", ProtectionLevel = System.Net.Security.ProtectionLevel.Sign)]
    [System.ServiceModel.XmlSerializerFormatAttribute(SupportFaults=true)]
    [return: System.ServiceModel.MessageParameterAttribute(Name="return")]
    XXX.pingResponse ping(XXX.ping request);

[System.ServiceModel.ServiceContractAttribute(Namespace = "https://x.x.com/xxx/v1", ProtectionLevel = System.Net.Security.ProtectionLevel.Sign)]
public partial class XXXClient : System.ServiceModel.ClientBase<XXXService> {
    [System.ServiceModel.OperationContractAttribute(Action = "", ReplyAction = "*", ProtectionLevel = System.Net.Security.ProtectionLevel.Sign)]
    public XXX.pingResponseMessage ping(string pingRequest) { 
```

我已将以下内容添加到 web.config 以允许记录整个肥皂，包括 pii 数据

```
(for pii, also added <machineSettings enableLoggingKnownPii="true" /> under <system.serviceModel> to C:\Windows\Microsoft.NET\Framework\vX\CONFIG\machine.config)

<system.serviceModel>
<diagnostics>
  <messageLogging logKnownPii="true" logEntireMessage="true" logMalformedMessages="true" logMessagesAtServiceLevel="true" logMessagesAtTransportLevel="true" maxMessagesToLog="3000"/>
</diagnostics>
</system.serviceModel>
<system.diagnostics>
<sources>
  <source name="System.ServiceModel.MessageLogging" logKnownPii="true">
    <listeners>
      <add initializeData="C:\trace.log" type="System.Diagnostics.XmlWriterTraceListener" name="messages"/>
    </listeners>
  </source>
</sources>
</system.diagnostics> 
```

================

***WSE 3.0（工作配置和代码）：*** web.config：

```
<system.serviceModel>
<bindings>
  <basicHttpBinding>
    <binding name="myBinding" closeTimeout="00:01:00" openTimeout="00:01:00" receiveTimeout="00:10:00" sendTimeout="00:01:00" allowCookies="false" bypassProxyOnLocal="false" hostNameComparisonMode="StrongWildcard" maxBufferSize="65536" maxBufferPoolSize="524288" maxReceivedMessageSize="65536" messageEncoding="Text" textEncoding="utf-8" transferMode="Buffered" useDefaultWebProxy="true">
      <readerQuotas maxDepth="32" maxStringContentLength="8192" maxArrayLength="16384" maxBytesPerRead="4096" maxNameTableCharCount="16384"/>
      <security mode="Transport">
        <transport clientCredentialType="None" proxyCredentialType="None" realm=""/>
        <message clientCredentialType="UserName" algorithmSuite="Default"/>
      </security>
    </binding>
  </basicHttpBinding>
</bindings>
<client>
  <endpoint address="https://x.x.com/xxx/v1" binding="basicHttpBinding" bindingConfiguration="myBinding" contract="XXXService" name="XXX"/>
</client>
</system.serviceModel>
<appSettings>
<add key="XXXImplService" value="https://x.x.com/xxx/v1"/>
</appSettings> 
```

...和 ​​WSE3 代码：

```
var proxy = new XXXImplServiceWse();

UsernameToken usernameToken = new UsernameToken(@"USER_Removed", "X");
proxy.RequestSoapContext.Security.Tokens.Add(usernameToken);

X509Certificate2 mutualCert = LoadCertFromStore(StoreLocation.LocalMachine, StoreName.My, "Client Cert Subject Name");
proxy.ClientCertificates.Add(mutualCert);

X509Certificate2 signCert = LoadCertFromStore(StoreLocation.LocalMachine, StoreName.My, "Service Cert Subject Name");

X509SecurityToken signatureToken = new X509SecurityToken(signCert);

MessageSignature signature = new MessageSignature(signatureToken); // <!-- IS THIS SAME AS THIS STEP IN WCF: secBE.EndpointSupportingTokenParameters.Signed.Add(new UsernameTokenParameters()) -->

proxy.RequestSoapContext.Security.Elements.Add(signature); 
```

==========

**那么，如何将上述 WSE 3.0 代码转换为 WCF？**

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-11T22:07:59.850

我能够解决我的问题并使用以下 WCF CustomBinding (CertificateOverTransport) 和 CustomCredentials（带有密码摘要的用户名令牌、用于传输身份验证的客户端证书和用于消息正文签名的服务证书）连接到 DataPower (IBM Xi50) Web 服务网关。不知道究竟是什么解决了这个问题，但这是我的工作 WCF 代码！我希望这可以帮助与我处于类似情况的其他人。

请验证是否也为 WCF 配置了 DataPower Xi50 网关。来自 IBM：“将 BasicHttpBinding 与 SSL 一起使用时：您可以使用 disable-ssl-cipher-check 参数来禁用任何 TransportBinding 断言的密码检查。Web 服务代理默认不支持 Basic Auth Header。需要注入 WWW-Authenticate 标头的错误规则才能与 WCF 进行互操作。” 有关详细信息，请访问此处：[https](https://publib.boulder.ibm.com/infocenter/ieduasst/v1r1m0/index.jsp?topic=/com.ibm.iea.wdatapower/wdatapower/1.0/xa35/380DataPowerWCFIntegration/player.html) ://publib.boulder.ibm.com/infocenter/ieduasst/v1r1m0/index.jsp?topic=/com.ibm.iea.wdatapower/wdatapower/1.0/xa35/380DataPowerWCFIntegration/player.html .

如果您希望您的消息正文仅签名（而不是加密），请确保您已在服务合同上设置 ProtectionLevel.Sign。

对于我之前遇到问题的 DNS 身份，我现在可以输入我的客户端证书主题名称 - 之前这不起作用。

我的 web.config 中没有任何配置。

这是使用 CustomBinding 的代理：

```
private ClientProxy GetProxy()
{
    XXXServiceClient proxy = new XXXServiceClient(GetCustomBinding(), new EndpointAddress(new Uri("<<GatewayURLHere>>"), EndpointIdentity.CreateDnsIdentity("<<DNS or Client Cert Subject Name>>"), new AddressHeaderCollection()));
    proxy.Endpoint.Behaviors.Remove(typeof(ClientCredentials));
    proxy.Endpoint.Behaviors.Add(new CustomCredentials(<clientCertHere>, <signingCertHere>));
    proxy.ClientCredentials.UserName.UserName = @"XXX";
    proxy.ClientCredentials.UserName.Password = "yyy";
    return proxy;
}

private Binding GetCustomBinding()
{
    TransportSecurityBindingElement secBE = SecurityBindingElement.CreateCertificateOverTransportBindingElement(MessageSecurityVersion.WSSecurity10WSTrustFebruary2005WSSecureConversationFebruary2005WSSecurityPolicy11BasicSecurityProfile10);
    secBE.EndpointSupportingTokenParameters.Signed.Add(new UserNameSecurityTokenParameters { InclusionMode = SecurityTokenInclusionMode.Never, RequireDerivedKeys = false });
    secBE.EnableUnsecuredResponse = true;
    secBE.IncludeTimestamp = true;
    TextMessageEncodingBindingElement textEncBE = new TextMessageEncodingBindingElement(MessageVersion.Soap11WSAddressingAugust2004, System.Text.Encoding.UTF8);
    HttpsTransportBindingElement httpsBE = new HttpsTransportBindingElement();
    httpsBE.RequireClientCertificate = true;

    CustomBinding myBinding = new CustomBinding();
    myBinding.Elements.Add(secBE);
    myBinding.Elements.Add(textEncBE);
    myBinding.Elements.Add(httpsBE);

    return myBinding;
} 
```

这是我的 CustomCredentials 类，我从多个来源（包括上面提到的 UsernameToken 库）组合在一起 - 在传输层设置客户端证书以进行（相互？）身份验证，为消息体签名的服务/签名证书以及在 SOAP 中使用密码摘要的 UsernameToken标题：

```
using System;
using System.IdentityModel.Selectors;
using System.IdentityModel.Tokens;
using System.Security.Cryptography;
using System.Security.Cryptography.X509Certificates;
using System.ServiceModel;
using System.ServiceModel.Channels;
using System.ServiceModel.Description;
using System.ServiceModel.Security;
using System.Text;

namespace XXX_WCF
{
    public class CustomCredentials : ClientCredentials
    {
        private X509Certificate2 clientAuthCert;
        private X509Certificate2 clientSigningCert;

        public CustomCredentials() : base() { }

        public CustomCredentials(CustomCredentials other)
            : base(other)
        {
            clientSigningCert = other.clientSigningCert;
            clientAuthCert = other.clientAuthCert;
        }

        protected override ClientCredentials CloneCore()
        {
            CustomCredentials scc = new CustomCredentials(this);
            return scc;
        }

        public CustomCredentials(X509Certificate2 ClientAuthCert, X509Certificate2 ClientSigningCert)
            : base()
        {
            clientAuthCert = ClientAuthCert;
            clientSigningCert = ClientSigningCert;
        }

        public X509Certificate2 ClientAuthCert
        {
            get { return clientAuthCert; }
            set { clientAuthCert = value; }
        }

        public X509Certificate2 ClientSigningCert
        {
            get { return clientSigningCert; }
            set { clientSigningCert = value; }
        }

        public override SecurityTokenManager CreateSecurityTokenManager()
        {
            return new CustomTokenManager(this);
        }
    }

    public class CustomTokenManager : ClientCredentialsSecurityTokenManager
    {
        private CustomCredentials custCreds;

        public CustomTokenManager(CustomCredentials CustCreds)
            : base(CustCreds)
        {
            custCreds = CustCreds;
        }

        public override SecurityTokenProvider CreateSecurityTokenProvider(SecurityTokenRequirement tokenRequirement)
        {
            if (tokenRequirement.TokenType == SecurityTokenTypes.X509Certificate)
            {
                x509CustomSecurityTokenProvider prov;
                object temp = null;
                TransportSecurityBindingElement secBE = null;

                if (tokenRequirement.Properties.TryGetValue("http://schemas.microsoft.com/ws/2006/05/servicemodel/securitytokenrequirement/SecurityBindingElement", out temp))
                {
                    secBE = (TransportSecurityBindingElement)temp;
                }

                if (secBE == null)
                    prov = new x509CustomSecurityTokenProvider(custCreds.ClientAuthCert);
                else
                    prov = new x509CustomSecurityTokenProvider(custCreds.ClientSigningCert);
                return prov;
            }

            return base.CreateSecurityTokenProvider(tokenRequirement);
        }

        public override System.IdentityModel.Selectors.SecurityTokenSerializer CreateSecurityTokenSerializer(System.IdentityModel.Selectors.SecurityTokenVersion version)
        {
            return new CustomTokenSerializer(System.ServiceModel.Security.SecurityVersion.WSSecurity10);
        }
    }

    class x509CustomSecurityTokenProvider : SecurityTokenProvider
    {
        private X509Certificate2 clientCert;

        public x509CustomSecurityTokenProvider(X509Certificate2 cert)
            : base()
        {
            clientCert = cert;
        }

        protected override SecurityToken GetTokenCore(TimeSpan timeout)
        {
            return new X509SecurityToken(clientCert);
        }
    }

    public class CustomTokenSerializer : WSSecurityTokenSerializer
    {
        public CustomTokenSerializer(SecurityVersion sv) : base(sv) { }

        protected override void WriteTokenCore(System.Xml.XmlWriter writer, System.IdentityModel.Tokens.SecurityToken token)
        {
            if (writer == null)
            {
                throw new ArgumentNullException("writer");
            }
            if (token == null)
            {
                throw new ArgumentNullException("token");
            }

            if (token.GetType() == new UserNameSecurityToken("x", "y").GetType())
            {
                UserNameSecurityToken userToken = token as UserNameSecurityToken;

                if (userToken == null)
                {
                    throw new ArgumentNullException("userToken: " + token.ToString());
                }

                string tokennamespace = "o";

                DateTime created = DateTime.Now;
                string createdStr = created.ToString("yyyy-MM-ddThh:mm:ss.fffZ");
                string phrase = Guid.NewGuid().ToString();
                string nonce = GetSHA1String(phrase);
                string password = GetSHA1String(nonce + createdStr + userToken.Password);
                //string password = userToken.Password;

                writer.WriteStartElement(tokennamespace, "UsernameToken", "http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd");
                writer.WriteAttributeString("u", "Id", "http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd", token.Id);
                writer.WriteElementString(tokennamespace, "Username", "http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd", userToken.UserName);
                writer.WriteStartElement(tokennamespace, "Password", "http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd");
                writer.WriteAttributeString("Type", "http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-username-token-profile-1.0#PasswordDigest");
                writer.WriteValue(password);
                writer.WriteEndElement();
                writer.WriteStartElement(tokennamespace, "Nonce", "http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd");
                writer.WriteAttributeString("EncodingType", "http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-soap-message-security-1.0#Base64Binary");
                writer.WriteValue(nonce);
                writer.WriteEndElement();
                writer.WriteElementString(tokennamespace, "Created", "http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd", createdStr);
                writer.WriteEndElement();
                writer.Flush();
            }
            else
            {
                base.WriteTokenCore(writer, token);
            }
        }

        protected string GetSHA1String(string phrase)
        {
            SHA1CryptoServiceProvider sha1Hasher = new SHA1CryptoServiceProvider();
            byte[] hashedDataBytes = sha1Hasher.ComputeHash(Encoding.UTF8.GetBytes(phrase));
            return Convert.ToBase64String(hashedDataBytes);
        }
    }//CustomTokenSerializer
} 
```

祝你好运！

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-10T18:38:01.513

我浏览了你的代码，它看起来是正确的。WSE 和 WCF SOAP 消息的区别很小，但区别仅在于引用用于签署消息的证书的方式。

我认为这里的核心问题是证书的错误使用。您正在使用传输和消息相互安全。理论上，这需要四个证书。你需要

*   用于传输安全的服务证书 - 服务器使用此证书来建立 SSL 连接。要成功建立连接，客户端必须信任证书（您需要信任颁发证书的机构，或者服务器证书必须放在您信任的人员存储中）。
*   用于传输安全的客户端证书 - 此证书用于在传输级别对服务器上的客户端进行身份验证 - 您的个人存储中必须有证书及其私钥
*   用于消息安全的服务证书 - 此证书用于加密请求和签署响应（当 WS-Security 1.0 时）。您需要在您的机器上的某处拥有此证书（由您决定使用哪个位置来加载证书）。
*   用于消息安全的客户端证书 - 此证书用于加密响应和签名请求（当 WS-Security 1.0 时）。您需要在您的机器上的某处拥有此证书及其私钥（由您决定使用哪个位置来加载证书）。

看起来您只有两个证书 - 一个客户端和一个服务器。在这种情况下，它们可能应该用于传输和消息安全。但是这里出现了一个有趣的问题 - 您在 WSE 示例中客户端的“签名”证书实际上是服务证书。如果确实如此，则意味着客户端必须有权访问服务器的私钥——这永远不会发生。这是对 PKI 基础设施的最严重违反。PKI 基础设施基于对证书颁发机构的信任和保护私钥，其中每个参与者都有自己的私钥，其他人无法访问。共享私钥会降低安全性。在最坏的情况下，它可能等于根本没有安全性，因为任何有权访问私钥的人都可以拦截通信或消息上的虚假签名。

如果我是对的，您应该使用 WSE 3.0 并对此感到满意。仅仅强制 WCF 为 HTTPS 和消息安全使用不同的客户端证书可能非常困难。您只有一个`ClientCertificate`属性，但您需要为 HTTPS 和消息安全加载不同的证书。它需要创建`ClientCredentials`具有两个属性的自定义和自定义`SecurityTokenManager`以返回正确的证书提供程序（通过实现每种用法（这是一个理论 - 我从未尝试过）。

顺便提一句。您的问题`EndpointIdentity`是基于您的服务在某些 DNS 上公开的事实，并且如果服务证书（在您的情况下也是签名证书）中的主题不同，您必须为您的端点创建一个新的 DNS 身份。否则 WCF 将不信任证书。服务器证书应与用于访问服务器的 DNS 名称匹配的主题颁发。

# php - 从表中删除变量不起作用

> ID：14740370
> 
> 赞同：2
> 
> 时间：2013-02-06T22:47:40.583
> 
> 标签：php, mysql, pdo

我想从我的表中删除这是功能，

```
function deleteFromTable($table, $file_upload_id, $dbh) {
    $deleteTable = $dbh->prepare("DELETE FROM ".$table." WHERE upload_id = ?");
    $deleteTable->execute(array($file_upload_id));
    $deleted = $dbh->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);
    print_r($deleted);exit;
}
deleteFromTable('reimbursment_id', '76', $dbh); 
```

我没有收到任何错误，也没有从我的桌子上删除任何东西；但是当我尝试不使用变量时它可以完美运行，这段代码有什么问题？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-02-09T16:43:58.837

试试这样的。不要认为准备喜欢变量

```
$sth = $dbh->prepare('DELETE FROM :table WHERE id = :id');
$sth->execute(array(':table' => $table, ':id' => $file_upload_id)); 
```

如果这项工作完成，请尝试回显 sql 并在 phpmyadmin 或 mysql 终端中尝试（如果有的话）。

# html - 格式化双重列表

> ID：14740372
> 
> 赞同：0
> 
> 时间：2013-02-06T22:47:43.930
> 
> 标签：html, css, html-lists

我无法根据需要格式化导航栏。我有这样的html设置

```
<nav>
   <ul>
      <li><a href="#">1</a><li>
           <ul>
               <li><a href="#">1.1</a></li>
               <li><a href="#">1.2</a></li>
           </ul>
      <li><a href="#">2</a><li>
           <ul>
               <li><a href="#">2.1</a></li>
               <li><a href="#">2.2</a></li>
           </ul>
           <ul>
               <li><a href="#">2.3</a></li>
               <li><a href="#">2.4</a></li>
           </ul>
      <li><a href="#">3</a></li>
   </ul>
</nav> 
```

我的CSS是这个

```
* {
margin: 0;
padding: 0;
color: #294076;
}

html {
background-image: url('2.jpeg');
}

nav {
min-width: 660px;
height:60px;
position absolute;
left:240px; 
}

header {
float: left;
min-width: 300px;
height: 60px;
font-size:45px;

}

nav ul {    
display: inline-block;
list-style-type:none;
margin: 6px -10px 0px 75px;
padding: 0;
font-size:25px;
}

nav ul > ul {
position: absolute;
}

ul > ul li {
float: top;
}

nav ul ul li {
display: none;
}

aside {
float: left;
font-size: 5px;
width: 160px;
padding: 0px;
margin: 0px;
}

section {
font-size: 10px;
position: absolute;
left: 165px;
min-width: 800px;       
}

a {
text-decoration: none;
}

nav ul:hover ul li {
display: block;
font-size: 15px; 
} 
```

用小数设置的列表不会直接内联在其父列表下。我已经尝试弄乱位置属性并给它不同的间距，但它似乎仍然没有正确格式化它们并将它们全部移动到彼此之上。我也无法让我在 2 岁以下的两个列表并排出现。它们只是堆叠在另一个之上。如何让他们并排站立，如何让所有十进制列表直接在其父列表下格式化？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T22:53:59.813

您的标记格式不正确。您有几个`<li>`未关闭的元素。

也许这更接近你想要的？

```
<nav>
<ul>
    <li>
        <a href="#">1</a>
        <ul>
            <li>
                <a href="#">1.1</a>
            </li>
            <li>
                <a href="#">1.2</a>
            </li>
        </ul>
    </li>
    <li>
        <a href="#">2</a>
        <ul>
            <li>
                <a href="#">2.1</a>
            </li>
            <li>
                <a href="#">2.2</a>
            </li>
            <li>
                <a href="#">2.3</a>
            </li>
            <li>
                <a href="#">2.4</a>
            </li>
        </ul>
    </li>
    <li>
        <a href="#">3</a>
    </li>
</ul>
</nav> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T23:34:06.960

将子菜单`<ul>`元素放在适当的`<li>`项目中。像这样：

```
<li>
    <a href="#">2</a>
    <ul>
        <li><a href="#">2.1</a></li>
        <li><a href="#">2.2</a></li>
        <li><a href="#">2.3</a></li>
        <li><a href="#">2.4</a></li>
    </ul>
<li> 
```

工作演示：http: [//jsbin.com/onugic/2/edit](http://jsbin.com/onugic/2/edit)

始终提供 HTML、CSS、JS 相关问题和答案的演示。

# python - Python中的实验设计（DoE）？

> ID：14740373
> 
> 赞同：12
> 
> 时间：2013-02-06T22:47:49.240
> 
> 标签：python, statistics

Python 中是否有任何模块或包可用于使用[实验设计 (DoE)](http://en.wikipedia.org/wiki/Design_of_experiments)方法？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-09-15T01:52:48.903

你试过[pyDOE](http://pythonhosted.org//pyDOE/)吗？它非常适合构建因子设计、响应曲面设计等。你可以在[PyPi](https://pypi.python.org/pypi/pyDOE)上找到它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-07-04T17:09:50.700

试试这个新的代码库，它将一个简单的 CSV 文件作为输入变量的范围，并在另一个 CSV 文件中生成所需的 DOE。它不是一个完整的包，而是要使用的功能的集合。

[实验设计-Python](https://github.com/tirthajyoti/Design-of-experiment-Python)

# variables - 带有 GUI 的 Powershell 不会设置变量

> ID：14740375
> 
> 赞同：3
> 
> 时间：2013-02-06T22:47:58.100
> 
> 标签：variables, user-interface, button, powershell

我正在学习 Powershell 并尝试创建一个类似于[此处](http://technet.microsoft.com/en-us/library/ff730949.aspx)示例的 GUI 界面。

但是，当我按原样运行它时，`$x`从未定义过。知道我做错了什么吗？我知道这与以下内容有关：

`$OKButton.Add_Click({$x=$objListBox.SelectedItem;$objForm.Close()})`

因为如果我将其更改为：

`$OKButton.Add_Click({Write-Host "worked";$objForm.Close()})`

它确实返回`worked`。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-06T22:59:47.763

您的操作块在单独的本地范围内运行。要修改全局（会话范围）变量，请使用 scope-modifier( `$global:varname`)。例如：

```
$OKButton.Add_Click({$global:x=$objListBox.SelectedItem;$objForm.Close()}) 
```

有关 Technet范围的更多信息[- about_Scopes](http://technet.microsoft.com/en-us/library/hh847849.aspx)（或`Get-Help about_scopes`在 PowerShell 中编写）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-09-17T17:53:12.060

代替`$Global:variable`one 也可以使用`$Script:variable`which 将增加你的变量的范围到你的脚本。因此，如果您使用 A 函数来创建按钮，并且在该函数内您也拥有该`.Add_Click({})`函数，它将在您的函数范围内工作。该`$Script:`变量将变量的范围增加到最近的父脚本文件范围。

# jquery - Jquery Masonry：调整窗口大小之前的排水沟不正确

> ID：14740376
> 
> 赞同：5
> 
> 时间：2013-02-06T22:48:02.647
> 
> 标签：jquery, html, css, jquery-masonry

我有一个包含三列的百分比宽度容器。我给这些列固定宽度的排水沟，如下所示：

```
width: -webkit-calc( 33.33% - 16px );
width: -moz-calc( 33.33% - 16px );
width: calc( 33.33% - 16px ); 
```

这是我的 Masonry 代码，在调整窗口大小时我会在其中更改列数：

```
$( window ).load( function() {
    var columns    = 3,
    setColumns = function() { columns = $( window ).width() > 959 ? 3 : $( window ).width() > 640 ? 2 : 1; };

    setColumns();
    $( window ).resize( setColumns );

    $( '#main-posts' ).masonry({
        itemSelector : '[class*=main-posts-]',
        columnWidth : function( containerWidth ) { return containerWidth / columns; }
    });
}); 
```

加载页面时，列之间的间距太大，但在调整窗口大小时它们会自行纠正。有人可以帮我解决这个问题吗？

这是重新设计的链接，它处于开发的早期阶段：http: [//keithpickering.net/redesign/](http://keithpickering.net/redesign/)

容器上的绿色背景只是为了帮助说明正在发生的事情。

多谢你们。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-12-25T17:53:16.433

遇到同样的问题，页面加载完成后调用layout方法解决。不优雅，但它有效。

```
$(window).load(function(){ 

    var $container = $('#container');
    $container.masonry({
      gutter: 0,
      itemSelector : '.content-box',
      columnWidth: ".grid-sizer",
      isResizable: true,
    });
   /// call the layout method after all elements have been loaded
   $container.masonry();

}); 
```

[http://masonry.desandro.com/methods.html#layout](http://masonry.desandro.com/methods.html#layout)

# javascript - 尝试在 sencha 2 中使用 Ext.Ajax 调用从服务器获取响应

> ID：14740379
> 
> 赞同：0
> 
> 时间：2013-02-06T22:48:32.350
> 
> 标签：javascript, extjs, sencha-touch, sencha-touch-2

我正在尝试创建一个登录表单，在其中将用户名和密码发布到服务器并获得响应以处理 Ext.Ajax 调用。下面是我的代码：

**我的登录表格**

```
Ext.define('GS.view.Main', {
    extend: 'Ext.form.Panel',
    config: {
        fullscreen: true,
        id: 'register',
        frame:true,
        items: [{
            xtype: 'fieldset',
            items: [
                {
                    xtype: 'textfield',
                    name : 'userName',
                    itemId: 'userName',
                    placeHolder : 'Orgnisationsnummer',
                },
                {   
                    xtype: 'passwordfield',
                    name : 'password',
                    itemId: 'password',
                    placeHolder : 'Lösenord'
                }
            ]
        }, {
            xtype: 'button',
            text: 'Logga in',
            minHeight: '45px',
            action: 'submitFormAction'
        }]
    }
}); 
```

我的控制器

```
Ext.define('GS.controller.Controller', {
    extend : 'Ext.app.Controller',    
    config : {   
        control : {
            'button[action="submitFormAction"]' : {
                tap : 'submitForm'
            },
        }
    },
    submitForm : function() {
        var form = Ext.getCmp('register');
        Ext.Ajax.request({
            url : "URL HERE", 
            params : { username : form.getValues().userName, password: form.getValues().password  },
            method: 'POST',
            success: function ( result, request ) {
                console.log(result);
                var jsonData = Ext.decode(result.responseText);
                Ext.Msg.alert('Success', 'Data return from the server: '+ jsonData.msg); 
            },
            failure: function ( result, request) { 
                Ext.Msg.alert('Failed', result.responseText); 
            } 

        });
    }
}); 
```

**我的简单 PHP 脚本**

```
<?php
$username = $_POST["userName"];
$password = $_POST["password"];

if(!empty($username) && !empty($password)) {
   $response = array("success" => 'true', 'id' => '1');
   echo json_encode($response);

} 

?> 
```

问题是我从服务器得到这个响应：

```
getAllResponseHeaders: function () {
getResponseHeader: function (header) {
request: Object
requestId: 1
responseText: ""
responseXML: null
status: 200
statusText: "OK"
__proto__: Object

Error: You're trying to decode an invalid JSON String: 
```

到底是怎么回事？我究竟做错了什么？我没有正确发布表单值吗？

谢谢！

/ 新人 :)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T02:56:34.790

您正在发布两个参数：

*   “用户名”
*   “密码”

...但是在您的 PHP 脚本中，您正在寻找这两个：

*   “用户名”（注意大写 N）
*   “密码”

我想这可能是问题所在，尽管我没有看到您在 PHP 中解码任何内容，因此错误消息有点奇怪。

我的建议是从 PHP 中回显用户名/密码值，以确保它们被正确发送/接收。您还可以在 JS 代码中设置一些断点，以确保在发送 AJAX 请求之前这些值是正确的。当我不知道您实际发送的值是什么时，很难说一切都很好。

# java - 在 Jlist 中显示 Objects 的属性

> ID：14740381
> 
> 赞同：7
> 
> 时间：2013-02-06T22:48:38.443
> 
> 标签：java, swing, jlist, defaultlistmodel

我有一个成分类

```
public class Ingredient {
String NameP;
List ListS;
String Desc;
List ListT;
... 
```

此类的多个实例存储在对象列表中。我还有一个

```
javax.swing.JList ListIng; 
```

它的模型设置为

```
ListIngModel = new DefaultListModel(); 
```

想法是使用 Jlist 显示所有对象的字段“NameP”，选择其中一个进行进一步检查，然后抓取所选对象：

```
Ingredient Selected = ListIngModel.get(ListIng.getSelectedIndex()) 
```

我可以在列表模型中加载对象，但 JList 会显示这些对象的地址。有没有一种优雅的方式让它显示它存储的对象的属性？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-06T22:58:16.430

你应该使用`JList`'s`CellRenderer`

查看[如何使用列表](http://docs.oracle.com/javase/tutorial/uiswing/components/list.html#renderer)了解更多详细信息。

基本上，它允许您定义列表模型中的给定对象在视图中的显示方式。此方法允许您根据需要自定义视图，甚至在运行时替换它。

**例如**

```
public class IngredientListCellRenderer extends DefaultListCellRenderer {
    public Component getListCellRendererComponent(JList<?> list,
                                 Object value,
                                 int index,
                                 boolean isSelected,
                                 boolean cellHasFocus) {
        super.getListCellRendererComponent(list, value, index, isSelected, cellHasFocus);
        if (value instanceof Ingredient) {
            Ingredient ingredient = (Ingredient)value;
            setText(ingredient.getName());
            setToolTipText(ingredient.getDescription());
            // setIcon(ingredient.getIcon());
        }
        return this;
    }
} 
```

# c# - 具体解析XML成数组

> ID：14740382
> 
> 赞同：2
> 
> 时间：2013-02-06T22:48:57.133
> 
> 标签：c#, .net, xml, linq, linq-to-xml

因此，如果我的 XML 看起来像这样......

```
<people>
    <person>
        <name>a</name>
    </person>
    <person>
        <name>b</name>
    </person>
</people> 
```

将其解析为名为“people”的 C# 数组的最佳/最简单方法是什么，其中 people[0] 是第一人称对象，然后将如何格式化以及如何访问它？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-06T22:59:03.940

您可以使用[LINQ-To-Xml](http://msdn.microsoft.com/en-us/library/bb387098.aspx)将此文件加载到数组中。

要在加载对象后简单地处理对象，您可以创建一个代表人的类：

```
public class Person
{
    public string Name { get; set; }
} 
```

[`XElement.Load`然后使用-method](http://msdn.microsoft.com/en-us/library/system.xml.linq.xelement.load.aspx)加载文件：

```
var document = XElement.Load("persons.xml");
var persons = document.Elements("Person")
    .Select(p => new Person{ Name = p.Element("Name").Value }
    .ToArray(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-06T23:49:38.790

我的 C# 生锈了，但这很简单，使用**XML 序列化**

反序列化（读取），修改，然后序列化（写入）：

```
using System;
using System.IO;
using System.Xml.Serialization;

namespace ConsoleApplication1
{

    [XmlRoot("people")]
    public class People
    {
        [XmlElement("person")]
        public Person[] person { get; set; }
    }

    [Serializable]
    public class Person
    {
        [XmlElement("name")]
        public string Name { get; set; }
    }

    class Program
    {
        public static void Main(string[] args)
        {
            People people = null;
            XmlSerializer serializer = new XmlSerializer(typeof(People));
            using (StreamReader reader = new StreamReader("people.xml"))
            {
                people = (People)serializer.Deserialize(reader);
            }
            people.person[0].Name = "Dan";
            using (StreamWriter writer = new StreamWriter("people.xml"))
            {
                serializer.Serialize(writer, people);
            }
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-06T22:56:56.117

**您可以使用LinqToXml**轻松完成：

```
var doc = XDocument.Parse(myXmlString); // .Load("filepath");
var persons = doc.Root
                 .Elements("Person")
                 .Select(x=> new Person {Name= x.Element("Name").Value})
                 .ToArray(); 
```

它将返回一个`Person`定义如下的 ' 数组。

**人**

```
public class Person{
     public string Name {get; set;}
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-06T22:57:20.057

假设：

```
class Person
{
    public string Name { get; set; }
} 
```

然后（查询语法）：

```
var arr = (from p in XDocument.Load(path) // or .Parse(str)
                              .Root
                              .Elements("person")
           select new Person
           {
               Name = (string)p.Attribute("name")
           }).ToArray(); 
```

扩展方法语法相同：

```
XDocument.Load(path)
         .Root
         .Elements("person")
         .Select(p => new new Person
             {
                 Name = (string)p.Attribute("name")
             })
         .ToArray(); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-06T23:00:03.397

```
var doc = XDocument.Parse(input);
string[] names = doc.Root.Descendants("name").Select(x => x.Value).ToArray(); 
```

如果输入的 xml 格式与您提供的上述语句一样简单，则已足够，否则添加此 where 子句以不捕获`name`xml 文件中的其他元素：

```
string[] names = doc.Root.Descendants("name")
                        .Where(x => x.Parent.Name == "person")
                        .Select(x => x.Value).ToArray(); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-06T23:18:37.463

一条线就够了。

```
var people=XDocument.Load(path).Root.Elements().Select(y => y.Elements().ToDictionary(x => x.Name, x => x.Value)).ToArray(); 
```

您需要指定以下命名空间进行测试

```
using System.Xml.Linq;
using System.Collections.Generic;
using System.Collections;
using System.Linq; 
```

测试代码

```
var path=@"c:\people.xml";
var people=XDocument.Load(path).Root.Elements().Select(y => y.Elements().ToDictionary(x => x.Name, x => x.Value)).ToArray();

foreach(var person in people) {
    Console.WriteLine("name = {0}", person["name"]);
    Console.WriteLine("name = {0}", person["age"]); // requires person have a age defined in your xml file
} 
```

用于测试的示例 xml

```
<people>
    <person>
        <name>Humbert Humbert</name>
        <age>36</age>
    </person>

    <person>
        <name>Lolita</name>
        <age>12</age>
    </person>
</people> 
```

# spring - 我的 Spring 应用程序没有打开另一个页面

> ID：14740397
> 
> 赞同：0
> 
> 时间：2013-02-06T22:50:00.367
> 
> 标签：spring, spring-mvc

我使用 netbeans 创建了一个 Spring 应用程序，我没有更改任何配置。在 index.jsp 中，我有一个指向另一个页面的链接，但它没有到达第二个页面并显示“请求的资源 () 不可用”。

在服务器控制台中，它显示以下警告

```
"WARNING: No mapping found for HTTP request with URI [/Myapp/emp.htm] in DispatcherServlet with name 'dispatcher'" 
```

我的 emp.jsp 文件位于 jsp 文件夹中。

索引.jsp

```
<%@page contentType="text/html" pageEncoding="UTF-8"%>
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
    "http://www.w3.org/TR/html4/loose.dtd">

<html>
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
        <title>Welcome to Spring Web MVC project</title>
    </head>

    <body>
        <a href="emp.htm">emp</a>
    </body>
</html> 
```

调度程序-servlet

```
 <?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xmlns:p="http://www.springframework.org/schema/p"
       xmlns:aop="http://www.springframework.org/schema/aop"
       xmlns:tx="http://www.springframework.org/schema/tx"
       xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-2.5.xsd
       http://www.springframework.org/schema/aop http://www.springframework.org/schema/aop/spring-aop-2.5.xsd
       http://www.springframework.org/schema/tx http://www.springframework.org/schema/tx/spring-tx-2.5.xsd">

    <bean class="org.springframework.web.servlet.mvc.support.ControllerClassNameHandlerMapping"/>

    <!--
    Most controllers will use the ControllerClassNameHandlerMapping above, but
    for the index controller we are using ParameterizableViewController, so we must
    define an explicit mapping for it.
    -->
    <bean id="urlMapping" class="org.springframework.web.servlet.handler.SimpleUrlHandlerMapping">
        <property name="mappings">
            <props>
                <prop key="index.htm">indexController</prop>
            </props>
        </property>
    </bean>

    <bean id="viewResolver"
          class="org.springframework.web.servlet.view.InternalResourceViewResolver"
          p:prefix="/WEB-INF/jsp/"
          p:suffix=".jsp" />

    <!--
    The index controller.
    -->
    <bean name="indexController"
          class="org.springframework.web.servlet.mvc.ParameterizableViewController"
          p:viewName="index" />

    <bean name="/emp.htm" class="controller.Employee"/> <<I changed this to "/Myapp/emp.htm" as well but does not work

</beans> 
```

Web.xml

```
 <?xml version="1.0" encoding="UTF-8"?>
    <web-app version="3.0" xmlns="http://java.sun.com/xml/ns/javaee" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd">
        <context-param>
            <param-name>contextConfigLocation</param-name>
            <param-value>/WEB-INF/applicationContext.xml</param-value>
        </context-param>
        <listener>
            <listener-class>org.springframework.web.context.ContextLoaderListener</listener-class>
        </listener>
        <servlet>
            <servlet-name>dispatcher</servlet-name>
            <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
            <load-on-startup>2</load-on-startup>
        </servlet>
        <servlet-mapping>
            <servlet-name>dispatcher</servlet-name>
            <url-pattern>*.htm</url-pattern>
        </servlet-mapping>
        <session-config>
            <session-timeout>
                30
            </session-timeout>
        </session-config>
        <welcome-file-list>
            <welcome-file>redirect.jsp</welcome-file>
        </welcome-file-list>
    </web-app> 
```

雇员.java

```
/*
 * To change this template, choose Tools | Templates
 * and open the template in the editor.
 */
package controller;

import org.springframework.web.servlet.mvc.Controller;
import org.springframework.web.servlet.ModelAndView;

import javax.servlet.ServletException;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;

import org.apache.commons.logging.Log;
import org.apache.commons.logging.LogFactory;

import java.io.IOException;

public class Employee implements Controller {

    protected final Log logger = LogFactory.getLog(getClass());

    @Override
    public ModelAndView handleRequest(HttpServletRequest request, HttpServletResponse response)
            throws ServletException, IOException {

        logger.info("Returning hello view");

        return new ModelAndView("emp.jsp");
    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T22:57:25.410

更改`<a href>`以获取像这样的实际网址

```
 <a href="<c:url value="/emp"/>" /> 
```

还要确保`Dispatcher servlet`映射到您的`web.xml`

```
<servlet>
    <servlet-name>DispatcherServlet</servlet-name>
    <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
    <load-on-startup>1</load-on-startup>
</servlet> 
<servlet-mapping>
    <servlet-name>DispatcherServlet</servlet-name>
    <url-pattern>/</url-pattern>
 </servlet-mapping> 
```

更多关于 Spring MVC 实现的信息可以在[**这里找到**](http://static.springsource.org/spring/docs/3.2.x/spring-framework-reference/html/mvc.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T00:02:14.147

@Daniel 是的，我可以看到 emp.jsp 是一个简单的消息 jsp。问题是这就是**MVC**模式的工作原理（与 Spring 无关）。MVC 就是让调度程序坐在所有请求的前面并将请求路由到适当的资源（例如控制器、servlet 等）如果 jsp 中的消息是动态生成的，我认为请求应该通过控制器并转发到emp.jsp。如果 emp.jsp 的全部内容只是某种静态页面，则可以将 emp.js 放在**webapp/static/emp.jsp**下，并在 spring servlet 配置文件中指示 /static 下的所有内容都应通过 Spring **ServletDispatcher**。

配置文件将如下所示

```
<mvc:resources mapping="/static/**" location="/static/" /> 
```

通过这样做，请求 /static/emp.jsp 将工作并且不会通过 Spring DispatcherServlet。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-06T23:54:57.850

我已经通过添加解决了

`<prop key="emp.htm">empController</prop>`

和

```
<bean name="empController"
          class="org.springframework.web.servlet.mvc.ParameterizableViewController"
          p:viewName="emp" /> 
```

# java - 从一个类运行一个 jar

> ID：14740407
> 
> 赞同：-3
> 
> 时间：2013-02-06T22:50:36.757
> 
> 标签：java, eclipse

我想从java类运行一个jar，我该怎么做？就像是：

```
public static void main(String[] args) {
    Process process = Runtime.getRuntime().exec("java --jar grok.jar");
} 
```

我将在我的 IDE eclipse 中运行它。我不确定如何使用返回的进程来检查命令的结果。如果我可以将 jar 的输出定向到我选择的位置，那也很好。这可能可以使用“process.getOutputStream()”来完成，但是由于 jar 将启动一个阻塞进程，不确定它是如何工作的？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T22:59:16.857

这个问题已经[在这里](https://stackoverflow.com/questions/1320476/execute-another-jar-in-a-java-program)回答了。例如，看看[这个答案](https://stackoverflow.com/a/1320485/2047424)，它应该让您了解如何启动进程并将输出作为 InputStream 获取。

```
 Process ps=Runtime.getRuntime().exec(new String[]{"java","-jar","A.jar"});
    ps.waitFor();
    java.io.InputStream is=ps.getInputStream(); 
```

# jquery - 基于模糊起源的父依赖验证 - Visualforce 和 PageBlockSections

> ID：14740408
> 
> 赞同：0
> 
> 时间：2013-02-06T22:50:39.830
> 
> 标签：jquery, dom, jquery-selectors, visualforce, dom-traversal

SFDC / Visualforce 生成一些非常粗糙的标记。对于每个 pageBlockSection，我想要一个“validateMe”类。每个 pageBlockSection 内部都有各种必填字段，我认为我的选择器定位正确。

我想要实现的是拥有一个涵盖任意数量 pageBlockSections 的功能 - 主要目标是检测模糊事件何时发生 - 然后将 DOM 遍历到具有“validateMe”类的部分，然后返回向下检查是否还填写了**其他必填字段（仅限该部分！）。**

复选框效果很好。

但是，输入文本字段没有 - 这里有什么帮助吗？

小提琴 - [http://jsfiddle.net/grQwP/20/](http://jsfiddle.net/grQwP/20/)

HTML块

```
<div id="first:test"> <span class="statusFlag" style="color:red">Incomplete</span>
  <br/>
  <input type="checkbox" value="Stuff">Box 1</input>
  <input type="checkbox" value="Stuff">Box 2</input>
  <input type="checkbox" value="Stuff">Box 3</input>
</div>
<div id="second:test"> <span class="statusFlag" style="color:red">Incomplete</span>
  <br/>
  <input type="checkbox" value="Stuff">Box 1</input>
  <input type="checkbox" value="Stuff">Box 2</input>
  <input type="checkbox" value="Stuff">Box 3</input>
</div>
<div id="noTest">
  <input type="checkbox" value="stuff">No Validate</input>
</div>

<div id="patientEnrollmentForm:theform:j_id71:patientInfoSection" class="validateMe">
  <div class="pbSubsection">
    <table class="detailList">
      <tbody>
        <tr>
          <td> <span id="patientEnrollmentForm:theform:j_id71:patientInfoSection:patientInfoStatus"
            style="color:red" class="statusFlag">Incomplete</span>
          </td>
        </tr>
        <tr>
          <td>
            <table>
              <tbody>
                <tr>
                  <td>
                    <label class="labelColumn">Name</label>
                  </td>
                  <td>
                    <div class="requiredInput">
                      <div class="requiredBlock"></div>
                      <input maxlength="80" name="First_Name_gne" class="placeholder"
                      placeholder="First Name">
                    </div>
                  </td>
                  <td>
                    <div class="requiredInput">
                      <div class="requiredBlock"></div>
                      <input maxlength="80" name="Patient_Name_gne" class="placeholder"
                      placeholder="Last Name">
                    </div>
                  </td>
                  <td>
                    <input maxlength="1" name="Mid_Initial_gne" class="placeholder" placeholder="Mid. Initial">
                  </td>
                </tr>
              </tbody>
            </table>
          </td>
        </tr>
      </tbody>
    </table>
  </div>
</div>

<div id="patientEnrollmentForm:theform:j_id71:secondSection" class="validateMe">
  <div class="pbSubsection">
    <table class="detailList">
      <tbody>
        <tr>
          <td> <span id="patientEnrollmentForm:theform:j_id71:patientInfoSection:secondSection"
            style="color:red" class="statusFlag">Incomplete</span>
          </td>
        </tr>
        <tr>
          <td>
            <table>
              <tbody>
                <tr>
                  <td>
                    <label class="labelColumn">Name</label>
                  </td>
                  <td>
                    <div class="requiredInput">
                      <div class="requiredBlock"></div>
                      <input maxlength="80" name="First_Name_gne" class="placeholder"
                      placeholder="First Name">
                    </div>
                  </td>
                  <td>
                    <div class="requiredInput">
                      <div class="requiredBlock"></div>
                      <input maxlength="80" name="Patient_Name_gne" class="placeholder"
                      placeholder="Last Name">
                    </div>
                  </td>
                  <td>
                    <input maxlength="1" name="Mid_Initial_gne" class="placeholder" placeholder="Mid. Initial">
                  </td>
                </tr>
              </tbody>
            </table>
          </td>
        </tr>
      </tbody>
    </table>
  </div>
</div> 
```

对不起，混乱的 DOM。

脚本

```
$('[id$=test] input:checkbox').change(function () {
    if ($(this).parent().children('input:checkbox').filter(':checked').length > 0) {
    setStatus(this,'[id$=test]','green','Complete');
  } else {
    setStatus(this,'[id$=test]','red','Incomplete');
  }
});

var $fields = $('.validateMe .requiredInput :input');

$fields.blur(function () {
  if ($(this).parents('.validateMe').find('.requiredInput :input').filter(function() {return $.trim(this.value) !== "";})) {
    setStatus(this, '.validateMe','green','Complete');
  } else {
    setStatus(this, '.validateMe','red','Incomplete');
  }
});

function setStatus(element, selector, color, status){
  return $(element).closest(selector).find('.statusFlag').css('color', color).text(status);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T23:07:51.387

之后需要重新评估长度/尺寸....

```
$fields.blur(function () {
  if ($(this).parents('.validateMe').find('.requiredInput input').filter(function (){
       return $.trim(this.value) === '';
     }).length === 0) {
    setStatus(this, '.validateMe','green','Complete');
  } else {
    setStatus(this, '.validateMe','red','Incomplete');
  }
}); 
```

[http://jsfiddle.net/grQwP/23/](http://jsfiddle.net/grQwP/23/)

# android - Android BroadcastReceiver On Boot 不工作

> ID：14740409
> 
> 赞同：2
> 
> 时间：2013-02-06T22:50:40.440
> 
> 标签：android, broadcastreceiver, toast, boot

我正在尝试运行一个简单的启动接收器。我只需要从我的数据库中获取一条记录（确实存在 - 已测试），我正在使用 Toast 消息对其进行测试（这可能吗？）。手机启动时没有任何反应：

接收者 ：

```
 public class OnBootReceiver extends BroadcastReceiver {

    int milibaza;    

    @Override 
    public void onReceive(Context context, Intent intent) { 
    // TODO Auto-generated method stub 

    Cursor cursor = DatabaseManager.getAllData(); 
    if(cursor !=null) 
    { 
    cursor.moveToFirst();    
    milibaza = cursor.getInt(2); 
    Toast.makeText(context, ((new StringBuilder("Vrijeme u bazi").append(milibaza).toString())), Toast.LENGTH_LONG).show();
cursor.close();   
    }              
    } 
    } 
```

获取所有数据方法：

```
public static Cursor getAllData() 
    { 
        Cursor cursor=null; 
        if(db!=null)
        { 
            cursor=db.query(TABLE_NAME, new String[] { TABLE_COLUMN_ID, TABLE_COLUMN_ONE, TABLE_COLUMN_TWO }, null, null, null, null, null); 
        } 

        return cursor; 
        } 
```

清单中的值连接到我正在尝试运行的接收器：

```
 <receiver android:name=".OnBootReceiver" >
            <intent-filter>
                <action android:name="android.intent.action.BOOT_COMPLETED" />
            </intent-filter>
        </receiver>

<uses-permission android:name="android.permission.RECEIVE_BOOT_COMPLETED" /> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T22:54:31.123

确保在启动手机之前实际运行您的应用程序。如果您在重新启动前强制停止应用程序，或者您在安装 APK 后没有运行应用程序，您的广播接收器将不会收到任何消息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T00:16:32.177

我认为您不能使用 BroadcastReceiver onReceive() 函数的上下文来启动 Toast。尝试使用 Intent 来启动应用程序活动。

# javascript - 如何将字符串从 Javascript 传递到 HTML 中图像标签的 src 部分？

> ID：14740410
> 
> 赞同：0
> 
> 时间：2013-02-06T22:50:46.117
> 
> 标签：javascript, html, image, tags

我写了一个非常简单的 Javascript 函数。它所做的只是随机选择一个图像文件名（例如，file.png）并将其传递给 getElementById。

```
var nameA=fileNames[randnumA];
document.getElementByID("image1").firstChild.nodeValue= nameA; 
```

当然，还有其他的东西，但我觉得没有必要被包括在内。我所做的只是从 Javascript 传递一个字符串。很简单。

问题是我想使用该字符串作为 HTML 标记的来源。我是菜鸟，以前没有这样做过，所以一个简单的解释会很棒。我当前的 HTML 代码是这样的：

```
<img src=<span id="image1">&nbsp;</span>> 
```

我没想到它会起作用，因为将标签放在其他标签中感觉不对。

关于我应该如何做到这一点的任何想法？谢谢大家，我很感激帮助。

此外，该函数肯定会被调用。我将它作为`<body>`标签中的 onLoad 。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T22:52:41.010

*两眼发直*

```
<img id="image1" /> 
```

JS：

```
var nameA = fileNames[randnumA];
document.getElementById('image1').src = nameA; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T22:52:42.827

Javascript：

```
var nameA=fileNames[randnumA];
document.getElementByID("image1").src = nameA; 
```

HTML：

```
<img id="image1" /> 
```

# javascript - 升级javascript函数。没有经验

> ID：14740411
> 
> 赞同：0
> 
> 时间：2013-02-06T22:50:46.317
> 
> 标签：javascript, web

我正在使用 DreamWeaver 创建一个网站，我使用了一个 Spry 小部件，它只是一个用于导航的侧边栏，可让您通过单击来打开和关闭选项卡。你可以打开多个标签，这是我不太喜欢的。我希望它在打开新选项卡时关闭打开的选项卡（所以你总是只有一个打开的选项卡）。没用过javascript编程，看了一下js文件的代码，修改起来也不是太难。在这里你有它： http: [//pastebin.com/eZAYE0kZ](http://pastebin.com/eZAYE0kZ)

我看到打开选项卡时执行的功能是

```
Spry.Widget.CollapsiblePanel.prototype.onTabClick = function(e)
{
        if (this.isOpen())
                this.close();
        else
        {
                this.open();
        }

        this.focus();

        return this.stopPropagation(e);
}; 
```

，所以我认为正确修改这个，我可以让它关闭打开的那个。另外，我意识到底部有一个功能，它的目标是关闭所有选项卡（或面板），

```
Spry.Widget.CollapsiblePanelGroup.prototype.closeAllPanels = function()
{
        var cpanels = this.getPanels();
        var numCPanels = cpanels.length;
        for (var i = 0; i < numCPanels; i++)
        {
                var w = this.getElementWidget(cpanels[i]);
                if (w && w.isOpen())
                        w.close();
        }
}; 
```

所以我认为通过从前一个函数调用这个函数（假设我没有像 Millons 那样的选项卡，所以它不会做一个大的 bucle），我可以找到打开的选项卡，然后关闭它。所以我修改了第一个，

```
Spry.Widget.CollapsiblePanel.prototype.onTabClick = function(e)
{
    if (this.isOpen())
        this.close();
    else
    {
        this.closeAllPanels();
        this.open();
    }

    this.focus();

    return this.stopPropagation(e);
}; 
```

但它现在甚至没有打开标签。我不知道错误在哪里，因为我从未用 Javascript 编写过代码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T23:01:42.170

您的问题是 closeAllPanels() 函数是 CollapsiblePanelGroup 类的方法，而不是 CollapsiblePanel 的方法。**当这**是一个 CollapsiblePanel时，您试图调用 this.closeAllPanels() 。

我不熟悉您正在使用的小部件，但我敢打赌您的面板会给您一些方法来访问它所属的组。查找名为**parent**或**group**或类似的属性。然后你可以调用 this.parent.closeAllPanels()

祝你好运！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T23:01:53.920

尝试删除“这个”。从 closeAllPanels() 之前开始；

我最近很少接触 JavaScript，但我相信与您的函数相关的关键字“this”指的是触发事件的控件，也就是您单击的选项卡。

此选项卡没有名为 closeAllPanels() 的函数，因为它属于页面。这将导致空引用错误，并且脚本的其余部分不会运行。

# qt - Qt 项目委托

> ID：14740417
> 
> 赞同：1
> 
> 时间：2013-02-06T22:51:21.003
> 
> 标签：qt, qlistview, qfilesystemmodel, qitemdelegate

我是 Qt 的新手，并且正在慢慢找到自己的方式。我的目标是让图标中`QListView`的`QFileSytemModel`文件名称换行，类似于在任何操作系统上发现的行为，如果名称太长，文本会被拆分。

通过浏览互联网，我相信我需要创建一个自定义类来扩展`QAbstractItemDelegate`以执行我的特殊绘图和文本换行。但是，我无法找到`ItemDelegate`stock`QListView`类开箱即用的默认值。

我想要默认类的原因是我可以在使用自己的渲染器时四处探索并了解更多关于 Qt 组件的生命周期的信息。我想知道是否有人知道在哪里`QListView`可以找到该类的默认渲染器？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T15:48:00.977

如果你想显示带有文本的图标，`QListView`有一个模式可以做到这一点，只需将视图模式设置为`QListView::IconMode`using `QListView::setViewMode()`。如果您仍然想自定义显示功能，那么您应该实现自定义项目委托，最好使用您自己的实现进行子类化`QItemDelegate`和覆盖。`paint()`

# vb.net - 使类可序列化

> ID：14740419
> 
> 赞同：8
> 
> 时间：2013-02-06T22:51:37.097
> 
> 标签：vb.net, serialization

我搜索如何使此类可序列化以用于服务（SOAP）

```
<Serializable()> _
    Public Class Items

        Inherits StringEnumBase(Of Items)
        Public Sub New(ByVal StrValue As String)
            MyBase.New(StrValue)
        End Sub

        <Description("item 1")> Public Shared ReadOnly ITEM1 As New Items("ValueOfItem1")
        <Description("item 2")> Public Shared ReadOnly ITEM2 As New Items("ValueOfItem2")
        <Description("item 3")> Public Shared ReadOnly ITEM3 As New Items("ValueOfItem3")

    End Class 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-06T23:01:25.620

属性没问题，但它必须有一个公共的无参数构造函数。

# microsoft-test-manager - 测试结果存储在 MTM 2010 的什么位置？

> ID：14740420
> 
> 赞同：0
> 
> 时间：2013-02-06T22:51:47.297
> 
> 标签：microsoft-test-manager

我正在尝试向客户提供使用 MTM 2010 记录的测试结果的副本，您知道在哪里获取结果吗？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T11:14:22.723

我按照下面提到的两种方法中的任何一种来分析我的测试运行：

1.  从“运行”运行以下命令： start mtm://[tfsserver:portnumber/tfs/collectionname]/p:[teamproject]/testing/testrun/open?id=

2.  将结果文件 (.trx) 下载到我的本地系统： tcm run /export /id:id /resultsfile:[my_local_path] /collection:CollectionURL /teamproject:project [/login:username,[password]] [/attachment:attachmentname]

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-09T15:57:34.373

测试运行及其附件存储在 TFS 服务器上，可通过 TFS SDK 获得。请参阅[TestManagementService api](http://msdn.microsoft.com/en-us/library/dd998375.aspx)，其中 ITestRun.Attachments 将包含所有测试运行相关的附件

```
var testsvc = tfs.GetService<TestManagementService>()
IEnumerable<ITestRun> testRun = testsvc.GetTeamProject("myteamprojectname").TestRuns; // you can use the query/find 
```

# perl - 有没有办法在催化剂中使用测试数据库

> ID：14740424
> 
> 赞同：5
> 
> 时间：2013-02-06T22:52:30.550
> 
> 标签：perl, catalyst

使用催化剂时，是否可以像在 Rails 中那样指定开发、测试和生产数据库？我浏览了文档，但没有找到答案。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-07T14:27:42.447

参考cpan [Catalyst Testing Tutorial](http://search.cpan.org/~zarquon/Catalyst-Manual-5.8005/lib/Catalyst/Manual/Tutorial/08_Testing.pod#SUPPORTING_BOTH_PRODUCTION_AND_TEST_DATABASES)

> 您可能希望为您的实时应用程序维护一个“生产数据库”和为您的测试用例维护一个“测试数据库”。
> 
> **模型类中的数据库配置切换**
> 
> 一种解决方案是允许使用环境变量覆盖数据库规范。例如，在编辑器中打开 lib/MyApp/Model/MyAppDB.pm 并将 `__PACKAGE__->config(...`声明更改为：
> 
> ```
> my $dsn = $ENV{MYAPP_DSN} ||= 'dbi:SQLite:myapp.db';
> __PACKAGE__->config(
>     schema_class => 'MyAppDB',
>     connect_info => [
>         $dsn,
>         '',
>         '',
>         { AutoCommit => 1 },
> 
>     ],
> ); 
> ```
> 
> 然后，当您运行测试用例时，您可以使用以下命令：
> 
> $ cp myapp.db myappTEST.db
> $ CATALYST_DEBUG=0 MYAPP_DSN="dbi:SQLite:myappTEST.db" 证明 --lib lib -vt/live_app01.t
> 
> 这将仅在测试用例运行时修改 DSN。如果您在未定义 MYAPP_DSN 环境变量的情况下启动普通应用程序，它将默认为与以前相同的 dbi:SQLite:myapp.db。
> 
> **使用多个配置文件进行数据库配置切换**
> 
> 通过利用[Catalyst::Plugin::ConfigLoader](http://search.cpan.org/~bricas/Catalyst-Plugin-ConfigLoader-0.30/lib/Catalyst/Plugin/ConfigLoader.pm)的基于环境变量加载多个配置文件的功能，您可以覆盖默认（生产）数据库连接设置。
> 
> 在测试脚本中将 $ENV{ MYAPP_CONFIG_LOCAL_SUFFIX } 设置为“testing”会导致在 myapp.conf 之后加载一个名为 myapp_testing.conf 的附加配置文件，该文件将覆盖 myapp.conf 中的任何参数。
> 
> 您应该在测试脚本的 BEGIN 块中设置环境变量，以确保在启动 Catalyst 应用程序之前设置它。
> 
> 以下是名为 MyDB 的 DBIx::Class 模型和名为 Foo 的控制器的配置和测试脚本的示例：
> 
> myapp_testing.conf：
> 
> ```
> <Model::MyDB>
>     <connect_info>
>         dsn dbi:SQLite:myapp.db
>     </connect_info>
> </Model::MyDB> 
> ```

使用单独的数据库时也要检查[这个](http://wiki.dandascalescu.com/howtos/catalyst/using_dbicx%3a%3atestdatabase_with_catalyst)

# python - Python列表中的映射

> ID：14740425
> 
> 赞同：3
> 
> 时间：2013-02-06T22:52:34.023
> 
> 标签：python, list, map

我有一个存储在元组列表中的索引列表：

```
index=[(0,0), (0,1), (1,0), (1,1) ....] 
```

这些索引将用于计算图像`im`（numpy 数组）中的能量，公式如下：

```
(1-im[0,0])^2+(1-im[0,1])^2+.... 
```

`im`这是一个二维 numpy 数组。这是一个例子`im`：

```
im=Image.open('lena_noisy.png')
im=numpy.array(im)
print im

[[168 133 131 ..., 127 213 107]
 [174 151 111 ..., 191  88 122]
 [197 173 143 ..., 182 153 125]
 ..., 
 [ 34  15   6 ..., 111  95 104]
 [ 37  15  57 ..., 121 133 134]
 [ 49  39  58 ..., 115  74 107]] 
```

如何使用 list 的 map 函数来执行这个计算？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-06T23:01:05.360

如果你`index`分成两个元组，`xidx`然后`yidx`你可以使用花哨的索引来访问所有`im`值作为一个 numpy 数组。然后计算变得很容易表达，并且比执行 Python 循环（或列表理解）更快：

```
import numpy as np
xidx, yidx = zip(*index)
print(((1-im[xidx, yidx])**2).sum()) 
```

* * *

```
import numpy as np
import scipy.misc as misc

im = misc.lena()
n = min(im.shape)
index = np.random.randint(n, size = (10000,2)).tolist()

def using_fancy_indexing(index, im):
    xidx, yidx = zip(*index)
    return (((1-im[xidx, yidx])**2).sum())

def using_generator_expression(index, im):
    return sum(((1 - im[i[0], i[1]]) ** 2) for i in index) 
```

这是使用 timeit 的比较：

```
In [27]: %timeit using_generator_expression(index, im)
100 loops, best of 3: 17.9 ms per loop

In [28]: %timeit using_fancy_indexing(index, im)
100 loops, best of 3: 2.07 ms per loop 
```

因此，根据 的大小`index`，使用花式索引可能比使用生成器表达式快 8 倍。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-06T22:55:25.717

像这样，使用生成器表达式：

```
sum((1-im[i][j])**2 for i, j in index) 
```

也就是说，假设`im`是一个二维列表并且`index`是 中的坐标列表`im`。请注意，在 Python 中，二维列表的访问方式如下：`m[i][j]`而不是这样：`m[i,j]`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-06T22:57:59.097

使用`sum`和生成器表达式：

```
sum(((1 - im[i[0], i[1]]) ** 2) for i in index) 
```

如果 index 也是一个 numpy 数组，则可以将该数组用作索引：

```
sum(((1 - im[i]) ** 2) for i in index) 
```

# php - 平面 PHP 数组到层次结构树

> ID：14740429
> 
> 赞同：17
> 
> 时间：2013-02-06T22:52:42.023
> 
> 标签：php, arrays, hierarchy

我有一个包含以下键的数组

```
id   
parent_id
name 
```

一个示例数组：

```
array(7) {
  [0]=>
  array(3) {
    ["id"]=>
    string(1) "4"
    ["parent_id"]=>
    string(1) "0"
    ["name"]=>
    string(16) "Top Level Page 4"
  }
  [1]=>
  array(3) {
    ["id"]=>
    string(1) "5"
    ["parent_id"]=>
    string(1) "1"
    ["name"]=>
    string(19) "Second Level Page 1"
  }
  [2]=>
  array(3) {
    ["id"]=>
    string(1) "6"
    ["parent_id"]=>
    string(1) "2"
    ["name"]=>
    string(19) "Second Level Page 2"
  }
  [3]=>
  array(3) {
    ["id"]=>
    string(1) "7"
    ["parent_id"]=>
    string(1) "5"
    ["name"]=>
    string(18) "Third Level Page 1"
  }
  [4]=>
  array(3) {
    ["id"]=>
    string(1) "3"
    ["parent_id"]=>
    string(1) "0"
    ["name"]=>
    string(16) "Top Level Page 3"
  }
  [5]=>
  array(3) {
    ["id"]=>
    string(1) "2"
    ["parent_id"]=>
    string(1) "0"
    ["name"]=>
    string(16) "Top Level Page 2"
  }
  [6]=>
  array(3) {
    ["id"]=>
    string(1) "1"
    ["parent_id"]=>
    string(1) "0"
    ["name"]=>
    string(16) "Top Level Page 1"
  }
} 
```

我想做的是使用这个数组显示一个层次结构树，我现在的代码正在生成：

```
Top Level Page 4
--Second Level Page 1
---Second Level Page 2
----Third Level Page 1
Top Level Page 3
Top Level Page 2
Top Level Page 1 
```

理想情况下，我需要产生以下结果，但级别不受限制：

```
Top Level Page 4
-Second Level Page 1
-Second Level Page 2
--Third Level Page 1
Top Level Page 3
Top Level Page 2
Top Level Page 1 
```

我到目前为止的代码是：

```
$level = 1;
        foreach ($data as $row) {
            if ($row['parent_id'] == 0) {
                echo $row['name'] . '<br/>';
            } else {
                $level++;
                foreach ($data as $m) {
                    if ($m['parent_id'] === $row['parent_id']) {
                        $c = 0;
                        $append = '';
                        while ($c < $level) {
                            $append.="-";
                            $c++;
                        }
                        echo $append . $row['name'] . '<br/>';
                    }
                }
            }
        }
    } 
```

如果有人能给我一些关于如何实现这一目标的指示，将不胜感激。

我在这里找到了一个解决方案：[从 PHP 数组为下拉选择字段创建嵌套列表](https://stackoverflow.com/questions/14613546/create-nested-list-from-php-array-for-dropdown-select-field?rq=1)

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2013-02-06T23:25:43.347

你应该使用递归。

这里是一个代码示例：

```
$datas = array(
    array('id' => 1, 'parent' => 0, 'name' => 'Page 1'),
    array('id' => 2, 'parent' => 1, 'name' => 'Page 1.1'),
    array('id' => 3, 'parent' => 2, 'name' => 'Page 1.1.1'),
    array('id' => 4, 'parent' => 3, 'name' => 'Page 1.1.1.1'),
    array('id' => 5, 'parent' => 3, 'name' => 'Page 1.1.1.2'),
    array('id' => 6, 'parent' => 1, 'name' => 'Page 1.2'),
    array('id' => 7, 'parent' => 6, 'name' => 'Page 1.2.1'),
    array('id' => 8, 'parent' => 0, 'name' => 'Page 2'),
    array('id' => 9, 'parent' => 0, 'name' => 'Page 3'),
    array('id' => 10, 'parent' => 9, 'name' => 'Page 3.1'),
    array('id' => 11, 'parent' => 9, 'name' => 'Page 3.2'),
    array('id' => 12, 'parent' => 11, 'name' => 'Page 3.2.1'),
    );

function generatePageTree($datas, $parent = 0, $depth=0){
    $ni=count($datas);
    if($ni === 0 || $depth > 1000) return ''; // Make sure not to have an endless recursion
    $tree = '<ul>';
    for($i=0; $i < $ni; $i++){
        if($datas[$i]['parent'] == $parent){
            $tree .= '<li>';
            $tree .= $datas[$i]['name'];
            $tree .= generatePageTree($datas, $datas[$i]['id'], $depth+1);
            $tree .= '</li>';
        }
    }
    $tree .= '</ul>';
    return $tree;
}

echo(generatePageTree($datas)); 
```

您可以在以下位置对其进行测试：http: [//phpfiddle.org/main/code/1qy-5fj](http://phpfiddle.org/main/code/1qy-5fj)

或者，如果您想要确切的格式：

```
function generatePageTree($datas, $parent = 0, $depth = 0){
    $ni=count($datas);
    if($ni === 0 || $depth > 1000) return ''; // Make sure not to have an endless recursion
    $tree = '';
    for($i=0; $i < $ni; $i++){
        if($datas[$i]['parent'] == $parent){
            $tree .= str_repeat('-', $depth);
            $tree .= $datas[$i]['name'] . '<br/>';
            $tree .= generatePageTree($datas, $datas[$i]['id'], $depth+1);
        }
    }
    return $tree;
} 
```

测试： http: [//phpfiddle.org/main/code/jw3-s1j](http://phpfiddle.org/main/code/jw3-s1j)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-11-14T15:17:47.897

您可以使用Gears 助手库中的[FlatToTreeConverter 类](https://github.com/Cosmologist/Gears/blob/master/src/Gears/Collection/FlatToTreeConverter.php)：

```
<?php
namespace Cosmologist\Gears\Collection;
/**
 * Class able to convert a flat array with parent ID's to a nested tree
 */
class FlatToTreeConverter
{
    /**
     * Convert a flat array with parent ID's to a nested tree
     *
     * @link http://blog.tekerson.com/2009/03/03/converting-a-flat-array-with-parent-ids-to-a-nested-tree/
     *
     * @param array  $array           Flat array
     * @param string $idKeyName       Key name for the element containing the item ID
     * @param string $parentIdKey     Key name for the element containing the parent item ID
     * @param string $childNodesField Key name for the element for placement children
     *
     * @return array
     */
    public static function convert(array $array, $idKeyName = 'id', $parentIdKey = 'parentId', $childNodesField = 'children')
    {
        $indexed = array();
        // first pass - get the array indexed by the primary id
        foreach ($array as $row) {
            $indexed[$row[$idKeyName]]                   = $row;
            $indexed[$row[$idKeyName]][$childNodesField] = array();
        }
        // second pass
        $root = array();
        foreach ($indexed as $id => $row) {
            $indexed[$row[$parentIdKey]][$childNodesField][$id] = &$indexed[$id];
            if (!$row[$parentIdKey]) {
                $root[$id] = &$indexed[$id];
            }
        }
        return $root;
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-03-07T17:33:55.883

不确定您是否找到了答案，但我今天一直在寻找相同的解决方案，最后最终制作了自己的解决方案。下面的代码是我刚刚创建的类，它适用于 PHP 数组和对象，并且可以递归到无限数量的维度。

`GitHub` [https://github.com/DukeOfMarshall/PHP-Array-Heirarchy-Display](https://github.com/DukeOfMarshall/PHP-Array-Heirarchy-Display)

使用此代码的一个简单示例是：

```
<?php

require_once('Arrays.class.php');
$display = new Array_Functions();

$display->display_hierarchy($multidimensional_array);

?> 
```

还可以设置其他选项，但这只是数组或对象的直接层次显示。

```
<?php

class Array_Functions {
public $number_of_tabs  = 3; # The default number of tabs to use when branching out
private $counter            = 0; # The counter to use for the number of tab iterations to use on the current branch

public $display_square_brackets     = TRUE; 
public $display_squiggly_brackets = FALSE;
public $display_parenthesis           = FALSE;

public $display_apostrophe  = TRUE;
public $display_quotes        = FALSE;

public function __construct(){
}

/**
 * Displays the array in an organized heirarchy and even does so recursively
 * 
 * $array ARRAY - The array to display in a heirarchy
 * 
 * $key_bookends STRING - The character to place on either side of the array key when printed
 * @@ square - Displays a set of square brackets around the key (DEFAULT)
 * @@ squiggly - Displays a set of squiggly brackets around the key
 * @@ parenthesis - Displays a set of parenthesis around the key
 * @@ FALSE - Turns off the display of bookends around the array key
 * 
 * $key_padding STRING - The padding to use around the array key with printed
 * @@ quotes - Pads the array key with double quotes when printed
 * @@ apostrophe - Pads the array key with apostrophes when printed (DEFAULT)
 * @@ FALSE - Turns off the display of padding around the array key
 * 
 * $number_of_tabs_to_use INT - The number of tabs to use when a sub array within the array creates a branch in the heirarchy
 * 
 */
public function display_hierarchy($array, $key_bookends = '', $key_padding = '', $number_of_tabs_to_use = ''){
    # Convert the input to a JSON and then back to an array just to make sure we know what we're working with
    $array = $this->convert_object_to_array($array);

    # If the $array variable is still not an array, then error out.
    # We're not going to fool around with your stupidity
    if(gettype($array) != 'array'){
        echo 'Value submitted was '.strtoupper(gettype($array)).' instead of ARRAY or OBJECT. Only arrays or OBJECTS are allowed Terminating execution.';
        exit();
    }

    # Establish the bookend variables
    if($key_bookends != '' || !$key_bookends){
        if(strtolower($key_bookends) == 'square'){
            $this->display_square_brackets      = TRUE;
            $this->display_squiggly_brackets    = FALSE;
            $this->display_parenthesis            = FALSE;
        }elseif(strtolower($key_bookends) == 'squiggly'){
            $this->display_square_brackets      = TRUE;
            $this->display_squiggly_brackets    = TRUE;
            $this->display_parenthesis            = FALSE;
        }elseif(strtolower($key_bookends) == 'parenthesis'){
            $this->display_square_brackets      = FALSE;
            $this->display_squiggly_brackets    = FALSE;
            $this->display_parenthesis          = TRUE;
        }elseif(!$key_bookends){
            $this->display_square_brackets      = FALSE;
            $this->display_squiggly_brackets    = FALSE;
            $this->display_parenthesis            = FALSE;
        }
    }

    # Establish the padding variables
    if($key_padding != '' || !$key_padding){
        if(strtolower($key_padding) == 'apostrophe'){
            $this->display_apostrophe = TRUE;
            $this->display_quotes       = FALSE;
        }elseif(strtolower($key_padding) == 'quotes'){
            $this->display_apostrophe = FALSE;
            $this->display_quotes       = TRUE;
        }elseif(!$key_padding){
            $this->display_apostrophe = FALSE;
            $this->display_quotes       = FALSE;
        }
    }       

    # Establish variable for the number of tabs
    if(isset($number_of_tabs_to_use) && $number_of_tabs_to_use != ''){
        $this->number_of_tabs = $number_of_tabs_to_use;
    }

    foreach($array as $key => $value){
        $this->insert_tabs();

        if(is_array($value)){
            echo $this->display_padding($key)." => {<BR>";

            $this->counter++;
            $this->display_hierarchy($value);
            $this->counter--;
            $this->insert_tabs();
            echo '} <BR>';
        }else{
            echo $this->display_padding($key)." => ".$value.'<BR>';
        }
    }
}

# Inserts tab spaces for sub arrays when a sub array triggers a branch in the heirarchy
# Helps to make the display more human readable and easier to understand
private function insert_tabs(){
    for($i=1; $i<=$this->counter; $i++){
        for($x=1; $x<=$this->number_of_tabs; $x++){
            echo '&emsp;';
        }
    }
}

# Takes a PHP object and converts it to an array
# Works with single dimension and multidimensional arrays
public function convert_object_to_array($object){
    $object = json_decode(json_encode($object), TRUE);
    return $object;
}

# Sets the displayed padding around the array keys when printed on the screen
public function display_padding($value){
    $default_container = "['VALUE_TO_REPLACE']";

    $value = str_replace("VALUE_TO_REPLACE", $value, $default_container);

    if($this->display_square_brackets){
    }elseif($this->display_squiggly_brackets){
        $value = str_replace('[', '{', $value);
        $value = str_replace(']', '}', $value);
    }elseif($this->display_parenthesis){
        $value = str_replace('[', '(', $value);
        $value = str_replace(']', ')', $value);
    }else{
        $value = str_replace('[', '', $value);
        $value = str_replace(']', '', $value);
    }

    if($this->display_apostrophe){
    }elseif($this->display_quotes){
        $value = str_replace("'", '"', $value);
    }else{
        $value = str_replace("'", '', $value);
    }

    return $value;
}
}

?> 
```

# ruby - 有什么方法可以立即看到对 erb 文件的编辑？

> ID：14740431
> 
> 赞同：3
> 
> 时间：2013-02-06T22:52:50.000
> 
> 标签：ruby, sinatra, erb

我在Passenger/Apache 上使用Sinatra 和erb。每次我对 erb 文件进行编辑时，我都必须重新启动 Apache 并在浏览器中刷新。

有什么方法可以编辑文件，sinatra 可以立即更新它吗？我的意思是只需单击浏览器中的刷新按钮就可以查看更新吗？

* * *

结论：

如果你在 sinatra 上开发，你可以使用`shotgun`or `SinatraLoader`。

如果您使用Passenger，您可以创建一个空文件：`tmp\always_restart.txt`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-06T22:54:32.347

是的，您可以使用[Sinatra::Reloader](http://www.sinatrarb.com/contrib/reloader.html)。

> ## Sinatra::重新加载器
> 
> 重新加载修改文件的扩展。在开发过程中很有用，因为它会自动要求定义路由、过滤器、错误处理程序和内联模板的文件，每个传入请求，但前提是它们已经更新。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-06T22:55:17.843

您可以为此使用 Shotgun：[https ://github.com/rtomayko/shotgun](https://github.com/rtomayko/shotgun)

> ## 霰弹枪
> 
> 这是 Rack 附带的 rackup 命令的自动重新加载版本。它可以用作 Web 框架或不支持应用程序重新加载的环境中提供的复杂重新加载逻辑的替代方案。

# spring - Spring 解组并将 XML 连接到 bean

> ID：14740433
> 
> 赞同：1
> 
> 时间：2013-02-06T22:52:59.260
> 
> 标签：spring, jaxb2

给定一个静态 XML（如下定义），您可以配置 spring 以在不使用工厂方法的情况下解组和加载 bean。更具体地说，是否可以在应用程序上下文中以某种方式对其进行配置，以便应用程序自动加载 bean。

```
<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<outerbean>
    <age>20</age>
    <innerbean>
        <innerName>Inner123</innerName>
        <innerAge>10</innerAge>
    </innerbean>
</outerbean>

@XmlRootElement(name="outerbean")
@XmlAccessorType(XmlAccessType.FIELD)
    @Component
public class OuterBean {

    @XmlElement(required=true)
    private String name;

    @XmlElement(required=true)
    private int age;

    @XmlElement(name="innerbean")
    private InnerBean innerBean;

    ....
}

@XmlRootElement(name = "innerbean")
@XmlAccessorType(XmlAccessType.FIELD)
public class InnerBean {

    @XmlElement(required=true)
    private String innerName; 

    @XmlElement(required=true)
    private int innerAge;

....    
} 
```

# locking - 线程/进程是否必须在执行关键部分时禁用中断

> ID：14740435
> 
> 赞同：1
> 
> 时间：2013-02-06T22:53:11.907
> 
> 标签：locking, interrupt, critical-section, interrupt-handling

让我们考虑一个场景：-

内核线程获取锁并在发生中断时处于临界区的中间。中断处理程序运行并到达相同的临界区并尝试获取锁并进入睡眠状态。

会发生这种情况还是在关键部分禁用中断？采取了哪些措施来避免它？

```
// Some Code
 Acquire_lock()

Critical section   //Interrupt occurs and arrives to acquire the same lock.

Disable_lock() 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T23:12:32.813

您永远不会允许持有锁的代码被尝试获取相同锁的代码中断。如果您的意思是在操作系统内部，则可能需要禁用与也由中断处理程序操作的对象交互的代码中的所有中断。

用户空间线程和进程没有这样的问题。没有中断处理程序获取用户空间线程可以获取的锁。如果一个持有用户空间锁的线程被中断，它会在重新调度后立即释放它——用户空间线程仍然可以运行。

# mysql - 选择所有数据包括另一个表，即使为空

> ID：14740438
> 
> 赞同：13
> 
> 时间：2013-02-06T22:53:28.353
> 
> 标签：mysql, sql

设置：（1）员工表（employeeID、firstName、lastName）

（1）鞋表（shoeID、Employee_employeeID、shoeName、shoeColor、shoeBrand）

我想选择 Employee 表中的所有行，即使鞋表中没有匹配的 EmployeeID (Employee_EmployeeID) 无论如何都会显示整行。示例所需的输出：

```
 EmployeeID  | firstName    | lastName    | shoeName     |   shoeColor  | shoeBrand

 1            John           Smith         AirMax2          Red          Nike
 2            Ronald         Mcdonald      null             null         null
 3            James          Knight        null             null         null
 4            Cindy          Smith         Pump             Brown        Cole Haan 
```

我已经尝试了很多不同的连接，我会得到每个员工的重复行。

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-02-06T23:03:03.143

试试这个

```
 SELECT e.employeeId,e.firstName,e.lastName,s.ShoeName,s.ShoeColor,s.ShoeBrand 
   FROM    Employee e
   LEFT JOIN Shoe s
   ON e.employeeID = s.Employee_employeeID 
```

[**在这里演示 SQLFIDDLE**](http://sqlfiddle.com/?_escaped_fragment_=2/a82f7/2#!2/8dd1f/2)

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-02-06T22:56:21.133

你需要一个`left outer join`：

```
select e.employeeid, e.firstname, e.lastname, s.shorname, s.shoecolor, s.shoebrand
from employee e left outer join
     shoe s
     on e.employeeid = s.employeeid 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-02-06T22:56:47.163

您将要使用`LEFT JOIN`：

```
select e.employeeId,
  e.firstName,
  e.lastName,
  s.ShoeName,
  s.ShoeColor,
  s.ShoeBrand
from Employee e
left join shoe s
  on e.employeeID = s.Employee_employeeID 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!2/d1a76/1)

即使表中没有匹配的行， A`LEFT JOIN`也会从表中返回匹配的行。`employee``shoe`

如果您在学习`JOIN`语法方面需要帮助，这里有一个很好[的 joins 可视化解释](http://www.codinghorror.com/blog/2007/10/a-visual-explanation-of-sql-joins.html)。

现在，如果您想要匹配两个表的所有行，那么您将使用`INNER JOIN`.

# android - getSupportFragmentManager() 和 getChildFragmentManager() 有什么区别？

> ID：14740445
> 
> 赞同：84
> 
> 时间：2013-02-06T22:54:15.377
> 
> 标签：android, android-fragments, android-listfragment

我的类继承了 Fragment，这就是它不能使用 getSupportFragmentManager() 的原因。我正在使用 getChildFragmentManager，它显示错误 - IllegalArguementException: No view found for id... 错误。

任何指导将不胜感激。

调用 AttachmentsListFragment 的代码是

```
Bundle b = new Bundle();
b.putSerializable("AttachmentsList", msg.attachments);  
        AttachmentListFragment listfrag = new AttachmentListFragment(msg.attachments);
FragmentTransaction transaction = getFragmentManager().beginTransaction();       
transaction.add(R.id.attachmentslistcontainer, listfrag);
transaction.addToBackStack(null);
transaction.commit(); 
```

附件layout.xml 是

```
<?xml version="1.0" encoding="utf-8"?>
<FrameLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:id="@+id/attachmentslistcontainer"
    android:orientation="vertical" >

    <TextView
        android:id="@+id/textViewAttachmentHeader"
        style="@style/Normal.Header.Toolbar"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:background="@color/list_separator_background"
        android:ellipsize="end"
        android:gravity="center"
        android:maxLines="2"
        android:text="@string/attachments_header"
        android:textColor="#FFFFFFFF"
        android:textSize="22sp"
        android:textStyle="bold"
        android:visibility="visible" />

    <ListView
        android:id="@android:id/list"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent" >
    </ListView>

</FrameLayout> 
```

附件列表片段.java

```
public class AttachmentListFragment extends ListFragment implements IAttachmentsData {

    ArrayList<Attachments> items = null;
    Integer cellLayoutID;
    Integer index;

    public AttachmentListFragment() {

    }

    public AttachmentListFragment(ArrayList<Attachments> items) {
        this.items = items;
        Log.i("Logging", "Items size" + items.size()); //$NON-NLS-1$
    }

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        Bundle bundle;
        if (savedInstanceState != null) {
    }

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        //super.onCreateView(inflater, container, savedInstanceState);

        //  setContentView(R.layout.attachmentslayout);
        View view = inflater.inflate(R.layout.attachmentslayout, container, false);
        return view;
    }

    @Override
    public void onActivityCreated(Bundle savedInstanceState) {
        super.onActivityCreated(savedInstanceState);
        setListAdapter(new AttachmentAdapter(
                getActivity().getApplicationContext(),
                R.layout.attachmentslistcellcontent,
                items));
    }

    @Override
    public void onListItemClick(ListView l, View v, int position, long id) {
        // TODO Auto-generated method stub
        super.onListItemClick(l, v, position, id);
        index = position;
        Intent intent = new Intent();
        Bundle b = new Bundle();
        b.putByteArray("Data", items.get(position).getImageData());
        intent.putExtras(b);
    }

    public byte[] getData() {
        // TODO Auto-generated method stub
        if (items != null && index < items.size()) {

            return items.get(index).getImageData();
        }
            return null;
    }

} 
```

* * *

## 回答 #1

> 赞同：165
> 
> 时间：2013-02-08T14:59:42.643

的定义`getChildFragmentManager()`是：

> 返回一个私有的 FragmentManager 用于在这个 Fragment 中放置和管理 Fragment。

同时`getFragmentManager()`（或在这种情况下`getSupportFragmentManager()`）的定义是：

> 返回 FragmentManager 以与与此片段的活动关联的片段进行交互。

基本上，不同之处在于 Fragment 现在有自己的内部`FragmentManager`可以处理 Fragment。子 FragmentManager 是处理仅包含在它添加到的 Fragment 中的 Fragment 的管理器。另一个 FragmentManager 包含在整个`Activity`.

在这种情况下，我猜你已经将 Fragments 添加到了 Activity 的 FragmentManager。您会得到不包含您要查找的内容的子 FragmentManager。因此，您会收到异常，因为它无法找到具有给定 ID 的 Fragment，因为它位于不同的 FragmentManager 中。

* * *

## 回答 #2

> 赞同：32
> 
> 时间：2017-11-29T04:00:12.343

`getFragmentManager`属于`Activity`
`getChildFragmentManager`属于`Fragment`

示例我们有一个应用程序，其中`MainActivity`, `Fragment1`, `Fragment2`,`container_view_on_main`是一个布局`activty_main.xml`

**要显示** `Fragment1`在`MainActivity`我们**必须**使用`getSupportFragmentManager()`

```
getSupportFragmentManager().beginTransaction().replace(R.id.container_view_on_main, Fragment1.newInstance()); 
```

**`Fragment2`从`Fragment1`我们有 2 种方式**显示****

 **采用`getFragmentManager()`

```
getFragmentManager().beginTransaction().replace(R.id.container_view_on_main, Fragment1.newInstance()); 
```

采用`getChildFragmentManager()`

首先，我们必须创建一个 id `container_view_on_fragment1`inside的布局`fragment1.xml`，然后

```
getChildFragmentManager().beginTransaction().replace(R.id.container_view_on_fragment1, Fragment2.newInstance()).commit(); 
```

**结论**

在这个演示中，我认为我们应该使用`getFragmentManager()`when go from `Fragment1`to，`Fragment2`因为它简单且有利于性能（打开`Fragment1`时会停止`Fragment2`）

*我们什么时候用`getChildFragmentManager()`？*
例如，您`MainActivity`有一个`ViewPager`3 页，在每个页面内您需要替换一些片段。

**更多**
**- getParentFragment()**
`getFragmentManager()` => return null
`getChildFragmentManager()` => 总是返回根片段（`Fragment1`在演示中，即使我们去 Fragment3,,...）

这个答案是基于我的理解，所以如果我错了，请纠正我。希望有帮助

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2019-05-03T04:40:50.203

如果你想要一个片段作为片段的容器，你必须使用片段的 getChildFragmentManager 方法。如果您使用 getSupportFragmentManager，您基本上将使用片段管理器，它的行为方式与活动生命周期的方式相同，而不是您的片段方式。

例如，我有一个包含 ViewPager 的片段——它被称为 CollectionsFragment。所以我有 3 个片段显示为其中的选项卡：AllCollectionsFragment、MyCollectionsFragment、FavouriteCollectionsFragment。我将 getActivity().getSupportFragmentManager() 给了我正在使用的 FragmentStatePagerAdapter。

所以这导致了以下行为 - 3 个选项卡片段的 onDestroyView/onDestroy/onDetach/onStop 方法不被调用。当我改为使用 getChildFragmentManager 时，一切正常。

如果您愿意，可以查看文档以了解这两种方法：

getChildFragmentManager()：返回一个私有的 FragmentManager，用于在这个 Fragment 内部放置和管理 Fragment。

getSupportFragmentManager()：返回 FragmentManager 用于与与此 Fragment 的活动关联的 Fragment 进行交互。**

# python - Django 以查询开头

> ID：14740446
> 
> 赞同：1
> 
> 时间：2013-02-06T22:54:17.440
> 
> 标签：python, django

我将如何进行以下查询？

```
SELECT * FROM title WHERE id LIKE '12345%' 
```

我目前拥有的是：

```
Title.objects.get(id='12345') 
```

这显然不这样做`LIKE%`（并且`icontains`两者都这样做）。这里正确的查询是什么？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-06T22:57:29.050

```
Title.objects.filter(id__startswith='12345') 
```

[https://docs.djangoproject.com/en/dev/ref/models/querysets/](https://docs.djangoproject.com/en/dev/ref/models/querysets/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-09-13T06:57:05.600

您可以这样做，您想要过滤表的字符串`code`在哪里。`startswith`

code = '12345' 在此处输入代码Title.objects.extra(where=["%s LIKE id||'%%'"], params=[code])

# scala - 使用 Scala 的 XmlRpc 客户端

> ID：14740452
> 
> 赞同：1
> 
> 时间：2013-02-06T22:54:37.777
> 
> 标签：scala, sbt, xml-rpc

我需要使用 Scala 的 xmlrpc 服务，到目前为止，我唯一的选择似乎是 Apache XML-RPC 库。

我将此依赖项添加到我的`Build.scala`：

`"org.apache.xmlrpc" % "xmlrpc" % "3.1.3"`

并且 sbt 报告下载库没有问题。但是，我不知道如何实际*访问*图书馆。

`val xml = org.apache.xmlrpc.XmlRpcClient("http://foo")`不会编译

和

`import org.apache.xmlrpc._`

报告*对象 xmlrpc 不是包 org.apache 的成员*。

要导入的正确包是什么？

（或者，有没有更好的来自 Scala 的 XmlRpc 库？）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T23:05:28.817

尝试

```
"org.apache.xmlrpc" % "xmlrpc-client" % "3.1.3" 
```

所以 ：

```
 class XmlRpc(val serverURL: String) {

    import org.apache.xmlrpc.client.XmlRpcClient
    import org.apache.xmlrpc.client.XmlRpcClientConfigImpl
    import org.apache.xmlrpc.client.XmlRpcSunHttpTransportFactory
    import java.net.URL
    val config = new XmlRpcClientConfigImpl();
    config.setServerURL(new URL(serverURL));
    config.setEncoding("ISO-8859-1");
    val client = new XmlRpcClient();
    client.setTransportFactory(new XmlRpcSunHttpTransportFactory(client));
    client.setConfig(config);

    client.execute(...)
  } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-09-26T18:18:23.173

这种任务有一个很好的模块： [https ://github.com/jvican/xmlrpc](https://github.com/jvican/xmlrpc)

# nuget - “包还原”有什么用途？

> ID：14740456
> 
> 赞同：2
> 
> 时间：2013-02-06T22:54:51.990
> 
> 标签：nuget

我了解在构建项目之前，nuget 的包恢复下载并“安装”各种所需的包。但我无法弄清楚这实际上有什么作用。

据我所知，包还原期间包的“安装”与包的实际安装不同 - 例如，如果您执行以下操作：

1.  安装 jQuery 包（注意，这会将 jQuery 脚本文件添加到项目的“脚本”目录中）
2.  删除添加的 jQuery 脚本文件
3.  删除“包”目录（步骤 2 和 3 模拟构建机器或其他开发机器上的状态）
4.  进行构建（触发包还原）

此时构建状态

```
2>  Successfully installed 'jQuery 1.9.1'. 
```

但是，jQuery 包的脚本文件*不会*添加到“脚本”文件夹中，并且文件*不会*添加到项目中。

这意味着无论如何您都必须将这些文件签入源代码管理。

这也意味着当您更新此软件包时，您必须管理添加/删除新/旧文件（因为使用不同的版本文件名）。否则，您的“脚本”文件夹将充满版本化脚本文件的无尽历史。

因此，如果您无论如何*都*必须检查所有内容，并且*必须*在更新时手动管理添加和删除文件，那么在构建时恢复包到底有什么好处？这有什么用？

更重要的是，为什么*这不能*达到明显的目的：自动将包的文件添加到项目中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T09:20:54.167

[在不将包提交到源代码管理的情况下使用 NuGet](http://docs.nuget.org/docs/workflows/using-nuget-without-committing-packages)讨论了包还原背后的原因。

包还原意味着您不必将**包**文件夹签入源代码管理。一旦为您的项目启用，它将下载包并在构建时将它们放回包文件夹（如果它们丢失）。正如您所发现的，它不会将任何包文件添加到您的项目中。对于 jQuery，NuGet 包中的所有文件都将添加到您的项目中。然而，其他 NuGet 包包含一个或多个二进制文件。

# java - 检票表格和后退按钮问题

> ID：14740458
> 
> 赞同：1
> 
> 时间：2013-02-06T22:55:00.947
> 
> 标签：java, forms, wicket, back-button

我不知道我是否错过了什么，但我有以下问题。我正在使用 wicket 6.5.0，我有一个简单的表单。提交表单将我重定向到另一页。当我按下浏览器（firefox 14）上的后退按钮时，我会返回我的表单，但它是空的。我想在我提交的状态下看到它。

我还注意到，如果我在表单的第一页上，我的版本是 /?0。提交带我到版本 /second?2 的页面，返回按钮带我回到版本 /?0 的页面。为什么会这样？为什么我要跳过版本？1？

这是我的代码：WicketApplication.java

```
public class WicketApplication extends WebApplication
{       

    @Override
    public Class<? extends WebPage> getHomePage()
    {
        return HomePage.class;
    }

    @Override
    public void init()
    {
        super.init();
        mountPage("second", SecondPage.class);
    }
} 
```

主页.java：

```
public class HomePage extends WebPage {
    private static final long serialVersionUID = 1L;

    public HomePage(final PageParameters parameters) {
        super(parameters);
        add(new SimpleForm("form"));

    }

     public final class SimpleForm extends Form<Void>
        {
        private static final long serialVersionUID = -562538189475312724L;

            private final ValueMap properties = new ValueMap();

            public SimpleForm(final String id)
            {
                super(id);
                add(new TextField<String>("field", new PropertyModel<String>(properties, "field")));
            }

            @Override
            public final void onSubmit()
            {
                    setResponsePage(new SecondPage(getPageParameters()));
            }
        }
} 
```

主页.html

```
...
    <form wicket:id="form">
        <input type="text" wicket:id="field" value="" size="50" /> <input
            type="submit" value="submit" />
    </form>
... 
```

谢谢您的回复。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T00:28:16.447

当你提交的时候，因为模型变了，页面被弄脏了，wicket 增加了页面的版本，添加到了页面管理器中。因此，您可以通过插入 ?1 创建一个版本 1。如果您尝试一下，您应该会看到 html wicket 中的预期值正在发回。

您可以通过覆盖页面上的 isVersioned 来解决此问题，返回 false。

从组件 - isVersioned()：

> 如果页面没有版本化，那么它不会跟踪其组件中的更改，并将在其生命周期内使用相同的 Page#getPageId()

这意味着它将根据现有页面 ID 序列化脏页面。

# java - 在 cmd 窗口中启动一个进程并获取输出

> ID：14740460
> 
> 赞同：0
> 
> 时间：2013-02-06T22:55:11.473
> 
> 标签：java, process, cmd

我想用 Java 在 CMD 窗口中启动一个进程，最简单的方法是

```
Runtime.getRuntime().exec("cmd /c start program.exe") 
```

问题是现在我无法从流程中获取输入。如何从进程中获取输出并能够在单独的 CMD 窗口中运行它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T02:56:07.273

嘿兄弟，如果你想打印你的进程的输出过程，请使用这个

```
Process process= Runtime.getRuntime().exec("cmd /c start program.exe");
BufferedReader br = new BufferedReader(new InputStreamReader(process.getInputStream()));

String line = null;
while ((line = br.readLine()) != null) {
        line = br.readLine();
        System.out.println(line);
} 
```

这样，您将获得与 cmd 输出完全相同的每个输出过程。

如果你想处理 2 cmd 也许你可以用不同的 exec 制作 2 进程

```
Process process1 = Runtime.getRuntime().exec("cmd /c start program1.exe");
Process process2 = Runtime.getRuntime().exec("cmd /c start program2.exe"); 
```

如果你想用同一个线程运行，请阅读关于线程的java书籍，你可以用线程同时运行它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T02:45:20.867

您的问题是这是一个单独的命令，其目的是启动一个与调用`start`无关的全新进程。然后执行的任何内容都不会连接到原始文件，并且无法被您的 Java 程序访问。`cmd``start``start``cmd`

如果您需要访问子流程的 in/out/err 流，请不要使用`start`.

# php - Magento API v2 按自定义属性过滤

> ID：14740463
> 
> 赞同：1
> 
> 时间：2013-02-06T22:55:17.050
> 
> 标签：php, magento, soap

我一直在网上寻找，但似乎找不到任何示例，我已经尝试过但失败了。我正在使用 api 的第 2 版，我想找到按客户属性过滤的产品......

```
$filter = array(
        array(
            'key'=>'custom_attribute',
            'value'=>"463"
        )
);
$products = $client->catalogProductList($session,array(
    'filter'=>$filter
)); 
```

但我得到的是所有产品，而不是我正在寻找的特定产品。有什么我做错了吗？有什么我想念的吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-07T07:38:30.130

试试下面的代码。

```
$complexFilter = array (
    'complex_filter' => array(
        array(
        'key' => 'custom_attribute',
            'value' => array(
                'key' => 'eq', 
                'value' => '463'
            )
        )
    )
);
$products = $client->catalogProductList($session, $complexFilter); 
```

# applescript - 修改 AppleIRController 以使用 AppleScript 启用/禁用 IR 控制器

> ID：14740471
> 
> 赞同：1
> 
> 时间：2013-02-06T22:55:37.043
> 
> 标签：applescript

我正在寻找使用 AppleScript 启用和禁用 IR。我在[这里](http://macscripter.net/viewtopic.php?id=27226)按照示例进行操作。该代码成功更新了系统偏好设置中的复选标记，但实际上并没有启用（或禁用）红外接收器。有什么建议么？

# javascript - Javascript 触发的 CSS 效果

> ID：14740476
> 
> 赞同：1
> 
> 时间：2013-02-06T22:56:02.347
> 
> 标签：javascript, css

我正在做一个小项目，如果用户在网站上输入 Konami 代码，则会对每个元素应用一个过滤器（目前，最终版本会更好）。现在我有：

```
 <script type="text/javascript">
        var success = function() {
            var css = 'div { -webkit-filter: blur(10px); }',
                head = document.getElementsByTagName('head')[0],
                style = document.createElement('style');

            style.type = 'text/css';
            if (style.styleSheet){
                style.styleSheet.cssText = css;
            } else {
                style.appendChild(document.createTextNode(css));
            }
        }
        var konami = new Konami(success);
    </script> 
```

并且我正在使用`http://snaptortoise.com/konami-js/`它在与重定向而不是函数一起使用时成功运行（文档说我可以使用上面显示的方法创建一个新的 Konami，或者使用要用作重定向的 url 字符串）。

我已经收到`alert`要显示的 javascript 消息，但无法实现此过滤器。我做错什么了？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T22:58:57.837

将类保留在样式表中：

```
.blurred {
    -webkit-filter: blur(10px);
} 
```

然后将其添加到您的`<body>`标签中：

```
var success = function() {
    document.body.className = 'blurred';
}; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-06T22:59:56.643

你永远不会附加`style`到头部：

```
head.appendChild(style); 
```

[http://jsfiddle.net/ExplosionPIlls/2mTJf/](http://jsfiddle.net/ExplosionPIlls/2mTJf/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-06T23:01:54.177

您需要添加`head.appendChild(style)`.

JS 小提琴[http://jsfiddle.net/NMetj/](http://jsfiddle.net/NMetj/)

# coldfusion - 无法为 Coldfusion JVM 分配额外的内存

> ID：14740477
> 
> 赞同：0
> 
> 时间：2013-02-06T22:56:03.303
> 
> 标签：coldfusion, jvm-arguments, jrun

再会，

我在具有 4gig RAM（2gig 始终免费）的 Windows 2003 32 位服务器上运行 Coldfusion 8 MX，但我无法为 JVM 分配超过 550m 的内存。

我已经提交了这个问题，但是它太长了，并且与我的所有编辑都混淆了。我最接近它的开始是当我设置 -Xmn 时，它在崩溃前运行了 10 分钟。崩溃后，即使使用相同的参数，它也不会再次以 1024m 开始。

这些崩溃日志适用于 Java 1.6.0_38。我已经尝试过使用 Java 5，它给出了相同的结果。我什至无法让 CF8 从 Java 7 开始（这是一个单独的问题）。

我需要为 JVM 分配更多 RAM，这样 CF 就不会在重负载下不断崩溃，因此我们将不胜感激任何对此行为的深入了解。

Java Args 是：

```
java.args=-server -Xmx1024m -Xms1024m -Xmn200m -XX:MaxPermSize=256m -XX:PermSize=256m -Xloggc:{application.home}/../logs/CFGC/CFGC.log -XX:+PrintGCDetails -XX:+UseParNewGC -XX:+UseConcMarkSweepGC -Dcoldfusion.rootDir={application.home}/../ -Dcoldfusion.libPath={application.home}/../lib 
```

崩溃日志 #1（服务器运行了 10 分钟后才生成此日志）：

```
#
# A fatal error has been detected by the Java Runtime Environment:
#
#  EXCEPTION_ACCESS_VIOLATION (0xc0000005) at pc=0x7c82a5c4, pid=4604, tid=4760
#
# JRE version: 6.0_38-b05
# Java VM: Java HotSpot(TM) Server VM (20.13-b02 mixed mode windows-x86 )
# Problematic frame:
# C  [ntdll.dll+0x2a5c4]
#
# If you would like to submit a bug report, please visit:
#   http://java.sun.com/webapps/bugreport/crash.jsp
# The crash happened outside the Java Virtual Machine in native code.
# See problematic frame for where to report the bug.
#

---------------  T H R E A D  ---------------

Current thread (0x5c4f0400):  JavaThread "jrpp-2" [_thread_in_native, id=4760, stack(0x638d0000,0x639d0000)]

siginfo: ExceptionCode=0xc0000005, reading address 0x00000000

Registers:
EAX=0x680bd710, EBX=0x003e0000, ECX=0x00000000, EDX=0x00000000
ESP=0x639cc950, EBP=0x639cc95c, ESI=0x680bd708, EDI=0x680b56f8
EIP=0x7c82a5c4, EFLAGS=0x00010246

Top of Stack: (sp=0x639cc950)
0x639cc950:   003e0000 680b56f8 00000000 639cca44
0x639cc960:   7c82a69b 003e0000 00000000 639cca24
0x639cc970:   00000000 00000057 680b5700 00008004
0x639cc980:   04c0a470 7c827b79 71b219d6 000018a4
0x639cc990:   00000001 639cc9ac 000018a4 00000103
0x639cc9a0:   00000103 639cc9c0 7c826e39 ffb3b4c0
0x639cc9b0:   ffffffff 0014dfa8 00000000 00000000
0x639cc9c0:   639cca38 580d0000 000018a4 00002020 

Instructions: (pc=0x7c82a5c4)
0x7c82a5a4:   85 db a6 02 00 8a 46 05 24 10 a8 10 88 47 05 0f
0x7c82a5b4:   85 02 0f 00 00 8b 4e 0c 8d 46 08 8b 10 89 4d 0c
0x7c82a5c4:   8b 09 3b 4a 04 89 55 14 0f 85 f5 72 01 00 3b c8
0x7c82a5d4:   0f 85 ed 72 01 00 56 53 e8 17 fa ff ff 8b 45 14 

Register to memory mapping:

EAX=0x680bd710 is an unknown value
EBX=0x003e0000 is an unknown value
ECX=0x00000000 is an unknown value
EDX=0x00000000 is an unknown value
ESP=0x639cc950 is pointing into the stack for thread: 0x5c4f0400
EBP=0x639cc95c is pointing into the stack for thread: 0x5c4f0400
ESI=0x680bd708 is an unknown value
EDI=0x680b56f8 is an unknown value

Stack: [0x638d0000,0x639d0000],  sp=0x639cc950,  free space=1010k
Native frames: (J=compiled Java code, j=interpreted, Vv=VM code, C=native code)
C  [ntdll.dll+0x2a5c4]  wcslen+0x1d6
C  [ntdll.dll+0x2a69b]  wcslen+0x2ad
C  [MSVCR71.dll+0x218a]  free+0x39
C  [net.dll+0x711f]  Java_java_net_SocketInputStream_socketRead0+0x1c6
j  java.net.SocketInputStream.socketRead0(Ljava/io/FileDescriptor;[BIII)I+0

Java frames: (J=compiled Java code, j=interpreted, Vv=VM code)
j  java.net.SocketInputStream.socketRead0(Ljava/io/FileDescriptor;[BIII)I+0
J  macromedia.jdbc.sqlserver.SQLServerByteOrderedDataReader.makeMoreDataAvailable()V
j  macromedia.jdbc.sqlserver.SQLServerByteOrderedDataReader.receive()V+14
j  macromedia.jdbc.sqlserver.tds.TDSRPCRequest.submitRequest(Lmacromedia/jdbc/sqlserver/SQLServerImplStatement;)V+132
j  macromedia.jdbc.sqlserver.tds.TDSRPCNonCursorExecuteRequest.submitPrepExec(Lmacromedia/jdbc/sqlserver/SQLServerImplStatement;Lmacromedia/jdbc/base/BaseWarnings;)V+26
j  macromedia.jdbc.sqlserver.tds.TDSRPCExecuteRequest.doPrepExec(Lmacromedia/jdbc/sqlserver/SQLServerImplStatement;Lmacromedia/jdbc/base/BaseWarnings;)V+29
j  macromedia.jdbc.sqlserver.tds.TDSRPCExecuteRequest.execute(Lmacromedia/jdbc/sqlserver/SQLServerImplStatement;Lmacromedia/jdbc/base/BaseWarnings;)V+339
j  macromedia.jdbc.sqlserver.SQLServerImplStatement.execute()V+468
j  macromedia.jdbc.base.BaseStatement.commonExecute()V+40
j  macromedia.jdbc.base.BaseStatement.executeInternal()Z+5
j  macromedia.jdbc.base.BasePreparedStatement.execute()Z+42
j  macromedia.jdbc.base.BasePreparedStatementPoolable.execute()Z+4
j  coldfusion.sql.Executive.executeQuery(Ljava/sql/Connection;Ljava/lang/String;Lcoldfusion/sql/ParameterList;Ljava/lang/Integer;Ljava/lang/Integer;Ljava/lang/Integer;[IIIZZ)Lcoldfusion/sql/Table;+507
j  coldfusion.sql.Executive.executeQuery(Ljava/sql/Connection;Ljava/lang/String;Lcoldfusion/sql/ParameterList;Ljava/lang/Integer;Ljava/lang/Integer;Ljava/lang/Integer;[ILcoldfusion/sql/DataSourceDef;)Lcoldfusion/sql/Table;+181
j  coldfusion.sql.Executive.executeQuery(Ljava/sql/Connection;Ljava/lang/String;Lcoldfusion/sql/ParameterList;Ljava/lang/Integer;Ljava/lang/Integer;Ljava/lang/Integer;[ILjava/lang/Object;)Lcoldfusion/sql/Table;+61
j  coldfusion.sql.SqlImpl.execute(Z)Lcoldfusion/sql/Table;+138
j  coldfusion.tagext.sql.QueryTag.executeQuery(Z)Lcoldfusion/sql/Table;+5
j  coldfusion.tagext.sql.QueryTag.doEndTag()I+65
j  cfTransferGateway2ecfc585582040$funcLISTBYPROPERTYMAP.runFunction(Lcoldfusion/runtime/LocalScope;Ljava/lang/Object;Lcoldfusion/runtime/CFPage;Lcoldfusion/runtime/ArgumentCollection;)Ljava/lang/Object;+2719
J  coldfusion.runtime.UDFMethod.invoke(Lcoldfusion/filter/FusionContext;)V
J  coldfusion.runtime.UDFMethod$ReturnTypeFilter.invoke(Lcoldfusion/filter/FusionContext;)V
J  coldfusion.runtime.TemplateProxy.invoke(Ljava/lang/String;[Ljava/lang/Object;Ljava/util/Map;Lcoldfusion/runtime/CfJspPage;Lcoldfusion/filter/FusionContext;)Ljava/lang/Object;
J  coldfusion.runtime.CfJspPage._invoke(Ljava/lang/Object;Ljava/lang/String;[Ljava/lang/Object;)Ljava/lang/Object;
j  cfSQLManager2ecfc937842696$funcLISTBYPROPERTYMAP.runFunction(Lcoldfusion/runtime/LocalScope;Ljava/lang/Object;Lcoldfusion/runtime/CFPage;Lcoldfusion/runtime/ArgumentCollection;)Ljava/lang/Object;+450
J  coldfusion.runtime.UDFMethod.invoke(Lcoldfusion/filter/FusionContext;)V
J  coldfusion.runtime.UDFMethod$ReturnTypeFilter.invoke(Lcoldfusion/filter/FusionContext;)V
J  coldfusion.runtime.UDFMethod.runFilterChain(Ljava/lang/Object;Ljava/lang/Object;Lcoldfusion/runtime/ArgumentCollection;)Ljava/lang/Object;
j  coldfusion.runtime.UDFMethod.invoke(Ljava/lang/Object;Ljava/lang/String;Ljava/lang/Object;Ljava/util/Map;)Ljava/lang/Object;+26
J  coldfusion.runtime.TemplateProxy.invoke(Ljava/lang/String;[Ljava/lang/Object;Ljava/util/Map;Lcoldfusion/runtime/CfJspPage;Lcoldfusion/filter/FusionContext;)Ljava/lang/Object;
J  coldfusion.runtime.TemplateProxy.invoke(Ljava/lang/String;Ljava/util/Map;Ljavax/servlet/jsp/PageContext;)Ljava/lang/Object;
j  coldfusion.runtime.CfJspPage._invoke(Ljava/lang/Object;Ljava/lang/String;Ljava/util/Map;)Ljava/lang/Object;+58
j  cfTransfer2ecfc1333771829$funcREADBYPROPERTYMAP.runFunction(Lcoldfusion/runtime/LocalScope;Ljava/lang/Object;Lcoldfusion/runtime/CFPage;Lcoldfusion/runtime/ArgumentCollection;)Ljava/lang/Object;+278
J  coldfusion.runtime.UDFMethod.invoke(Lcoldfusion/filter/FusionContext;)V
J  coldfusion.runtime.UDFMethod$ReturnTypeFilter.invoke(Lcoldfusion/filter/FusionContext;)V
J  coldfusion.runtime.TemplateProxy.invoke(Ljava/lang/String;[Ljava/lang/Object;Ljava/util/Map;Lcoldfusion/runtime/CfJspPage;Lcoldfusion/filter/FusionContext;)Ljava/lang/Object;
J  coldfusion.runtime.CfJspPage._invoke(Ljava/lang/Object;Ljava/lang/String;[Ljava/lang/Object;)Ljava/lang/Object;
j  cfUserService2ecfc1575820687$funcGETUSERBYPROPERTYMAP.runFunction(Lcoldfusion/runtime/LocalScope;Ljava/lang/Object;Lcoldfusion/runtime/CFPage;Lcoldfusion/runtime/ArgumentCollection;)Ljava/lang/Object;+116
J  coldfusion.runtime.UDFMethod.invoke(Lcoldfusion/filter/FusionContext;)V
J  coldfusion.runtime.UDFMethod$ReturnTypeFilter.invoke(Lcoldfusion/filter/FusionContext;)V
J  coldfusion.runtime.TemplateProxy.invoke(Ljava/lang/String;[Ljava/lang/Object;Ljava/util/Map;Lcoldfusion/runtime/CfJspPage;Lcoldfusion/filter/FusionContext;)Ljava/lang/Object;
J  coldfusion.runtime.CfJspPage._invoke(Ljava/lang/Object;Ljava/lang/String;[Ljava/lang/Object;)Ljava/lang/Object;
j  cfCardListener2ecfc1071855549$funcGETCARD.runFunction(Lcoldfusion/runtime/LocalScope;Ljava/lang/Object;Lcoldfusion/runtime/CFPage;Lcoldfusion/runtime/ArgumentCollection;)Ljava/lang/Object;+333
J  coldfusion.runtime.UDFMethod.invoke(Lcoldfusion/filter/FusionContext;)V
J  coldfusion.runtime.UDFMethod$ReturnTypeFilter.invoke(Lcoldfusion/filter/FusionContext;)V
J  coldfusion.runtime.UDFMethod.runFilterChain(Ljava/lang/Object;Ljava/lang/Object;Lcoldfusion/runtime/ArgumentCollection;)Ljava/lang/Object;
j  coldfusion.runtime.UDFMethod.invoke(Ljava/lang/Object;Ljava/lang/String;Ljava/lang/Object;Ljava/util/Map;)Ljava/lang/Object;+26
J  coldfusion.runtime.TemplateProxy.invoke(Ljava/lang/String;[Ljava/lang/Object;Ljava/util/Map;Lcoldfusion/runtime/CfJspPage;Lcoldfusion/filter/FusionContext;)Ljava/lang/Object;
J  coldfusion.runtime.TemplateProxy.invoke(Ljava/lang/String;Ljava/util/Map;Ljavax/servlet/jsp/PageContext;)Ljava/lang/Object;
j  coldfusion.runtime.CfJspPage._invoke(Ljava/lang/Object;Ljava/lang/String;Ljava/util/Map;)Ljava/lang/Object;+58
j  coldfusion.tagext.lang.InvokeTag.doEndTag()I+176
j  cfEventInvoker2ecfc577457096$funcINVOKELISTENER.runFunction(Lcoldfusion/runtime/LocalScope;Ljava/lang/Object;Lcoldfusion/runtime/CFPage;Lcoldfusion/runtime/ArgumentCollection;)Ljava/lang/Object;+412
J  coldfusion.runtime.UDFMethod.invoke(Lcoldfusion/filter/FusionContext;)V
J  coldfusion.runtime.UDFMethod$ReturnTypeFilter.invoke(Lcoldfusion/filter/FusionContext;)V
J  coldfusion.runtime.TemplateProxy.invoke(Ljava/lang/String;[Ljava/lang/Object;Ljava/util/Map;Lcoldfusion/runtime/CfJspPage;Lcoldfusion/filter/FusionContext;)Ljava/lang/Object;
J  coldfusion.runtime.CfJspPage._invoke(Ljava/lang/Object;Ljava/lang/String;[Ljava/lang/Object;)Ljava/lang/Object;
j  cfNotifyCommand2ecfc1810625261$funcEXECUTE.runFunction(Lcoldfusion/runtime/LocalScope;Ljava/lang/Object;Lcoldfusion/runtime/CFPage;Lcoldfusion/runtime/ArgumentCollection;)Ljava/lang/Object;+295
J  coldfusion.runtime.UDFMethod.invoke(Lcoldfusion/filter/FusionContext;)V
J  coldfusion.runtime.UDFMethod$ReturnTypeFilter.invoke(Lcoldfusion/filter/FusionContext;)V
J  coldfusion.runtime.TemplateProxy.invoke(Ljava/lang/String;[Ljava/lang/Object;Ljava/util/Map;Lcoldfusion/runtime/CfJspPage;Lcoldfusion/filter/FusionContext;)Ljava/lang/Object;
J  coldfusion.runtime.CfJspPage._invoke(Ljava/lang/Object;Ljava/lang/String;[Ljava/lang/Object;)Ljava/lang/Object;
j  cfEventHandler2ecfc451386063$funcHANDLEEVENT.runFunction(Lcoldfusion/runtime/LocalScope;Ljava/lang/Object;Lcoldfusion/runtime/CFPage;Lcoldfusion/runtime/ArgumentCollection;)Ljava/lang/Object;+322
J  coldfusion.runtime.UDFMethod.invoke(Lcoldfusion/filter/FusionContext;)V
J  coldfusion.runtime.UDFMethod$ReturnTypeFilter.invoke(Lcoldfusion/filter/FusionContext;)V
J  coldfusion.runtime.TemplateProxy.invoke(Ljava/lang/String;[Ljava/lang/Object;Ljava/util/Map;Lcoldfusion/runtime/CfJspPage;Lcoldfusion/filter/FusionContext;)Ljava/lang/Object;
J  coldfusion.runtime.CfJspPage._invoke(Ljava/lang/Object;Ljava/lang/String;[Ljava/lang/Object;)Ljava/lang/Object;
j  cfRequestHandler2ecfc128659239$funcHANDLEEVENT.runFunction(Lcoldfusion/runtime/LocalScope;Ljava/lang/Object;Lcoldfusion/runtime/CFPage;Lcoldfusion/runtime/ArgumentCollection;)Ljava/lang/Object;+862
J  coldfusion.runtime.UDFMethod.invoke(Lcoldfusion/filter/FusionContext;)V
J  coldfusion.runtime.UDFMethod$ReturnTypeFilter.invoke(Lcoldfusion/filter/FusionContext;)V
J  coldfusion.runtime.UDFMethod.runFilterChain(Ljava/lang/Object;Ljava/lang/Object;Lcoldfusion/runtime/ArgumentCollection;)Ljava/lang/Object;
J  coldfusion.runtime.CfJspPage._invokeUDF(Ljava/lang/Object;Ljava/lang/String;Lcoldfusion/runtime/CFPage;[Ljava/lang/Object;)Ljava/lang/Object;
j  cfRequestHandler2ecfc128659239$funcHANDLENEXTEVENT.runFunction(Lcoldfusion/runtime/LocalScope;Ljava/lang/Object;Lcoldfusion/runtime/CFPage;Lcoldfusion/runtime/ArgumentCollection;)Ljava/lang/Object;+181
J  coldfusion.runtime.UDFMethod.invoke(Lcoldfusion/filter/FusionContext;)V
J  coldfusion.runtime.UDFMethod$ReturnTypeFilter.invoke(Lcoldfusion/filter/FusionContext;)V
J  coldfusion.runtime.UDFMethod.runFilterChain(Ljava/lang/Object;Ljava/lang/Object;Lcoldfusion/runtime/ArgumentCollection;)Ljava/lang/Object;
J  coldfusion.runtime.CfJspPage._invokeUDF(Ljava/lang/Object;Ljava/lang/String;Lcoldfusion/runtime/CFPage;[Ljava/lang/Object;)Ljava/lang/Object;
j  cfRequestHandler2ecfc128659239$funcPROCESSEVENTS.runFunction(Lcoldfusion/runtime/LocalScope;Ljava/lang/Object;Lcoldfusion/runtime/CFPage;Lcoldfusion/runtime/ArgumentCollection;)Ljava/lang/Object;+390
J  coldfusion.runtime.UDFMethod.invoke(Lcoldfusion/filter/FusionContext;)V
J  coldfusion.runtime.UDFMethod$ReturnTypeFilter.invoke(Lcoldfusion/filter/FusionContext;)V
J  coldfusion.runtime.UDFMethod.runFilterChain(Ljava/lang/Object;Ljava/lang/Object;Lcoldfusion/runtime/ArgumentCollection;)Ljava/lang/Object;
J  coldfusion.runtime.CfJspPage._invokeUDF(Ljava/lang/Object;Ljava/lang/String;Lcoldfusion/runtime/CFPage;[Ljava/lang/Object;)Ljava/lang/Object;
j  cfRequestHandler2ecfc128659239$funcHANDLEREQUEST.runFunction(Lcoldfusion/runtime/LocalScope;Ljava/lang/Object;Lcoldfusion/runtime/CFPage;Lcoldfusion/runtime/ArgumentCollection;)Ljava/lang/Object;+1738
J  coldfusion.runtime.UDFMethod.invoke(Lcoldfusion/filter/FusionContext;)V
J  coldfusion.runtime.UDFMethod$ReturnTypeFilter.invoke(Lcoldfusion/filter/FusionContext;)V
J  coldfusion.runtime.TemplateProxy.invoke(Ljava/lang/String;[Ljava/lang/Object;Ljava/util/Map;Lcoldfusion/runtime/CfJspPage;Lcoldfusion/filter/FusionContext;)Ljava/lang/Object;
J  coldfusion.runtime.CfJspPage._invoke(Ljava/lang/Object;Ljava/lang/String;[Ljava/lang/Object;)Ljava/lang/Object;
j  cfmach2dii2ecfc392524582$funcHANDLEREQUEST.runFunction(Lcoldfusion/runtime/LocalScope;Ljava/lang/Object;Lcoldfusion/runtime/CFPage;Lcoldfusion/runtime/ArgumentCollection;)Ljava/lang/Object;+1653
J  coldfusion.runtime.UDFMethod.invoke(Lcoldfusion/filter/FusionContext;)V
J  coldfusion.runtime.UDFMethod$ReturnTypeFilter.invoke(Lcoldfusion/filter/FusionContext;)V
J  coldfusion.runtime.UDFMethod.runFilterChain(Ljava/lang/Object;Ljava/lang/Object;Lcoldfusion/runtime/ArgumentCollection;)Ljava/lang/Object;
J  coldfusion.runtime.CfJspPage._invokeUDF(Ljava/lang/Object;Ljava/lang/String;Lcoldfusion/runtime/CFPage;[Ljava/lang/Object;)Ljava/lang/Object;
j  cfApplication2ecfc1704547219$funcONREQUESTSTART.runFunction(Lcoldfusion/runtime/LocalScope;Ljava/lang/Object;Lcoldfusion/runtime/CFPage;Lcoldfusion/runtime/ArgumentCollection;)Ljava/lang/Object;+829
J  coldfusion.runtime.UDFMethod.invoke(Lcoldfusion/filter/FusionContext;)V
J  coldfusion.runtime.UDFMethod$ReturnTypeFilter.invoke(Lcoldfusion/filter/FusionContext;)V
J  coldfusion.runtime.TemplateProxy.invoke(Ljava/lang/String;[Ljava/lang/Object;Ljava/util/Map;Lcoldfusion/runtime/CfJspPage;Lcoldfusion/filter/FusionContext;)Ljava/lang/Object;
J  coldfusion.runtime.TemplateProxy.invoke(Ljava/lang/String;[Ljava/lang/Object;Ljavax/servlet/jsp/PageContext;)Ljava/lang/Object;
j  coldfusion.runtime.AppEventInvoker.invoke(Ljava/lang/String;[Ljava/lang/Object;Lcoldfusion/filter/FusionContext;)Z+28
j  coldfusion.runtime.AppEventInvoker.onRequestStart([Ljava/lang/Object;Lcoldfusion/filter/FusionContext;)Z+5
j  coldfusion.filter.ApplicationFilter.invoke(Lcoldfusion/filter/FusionContext;)V+676
j  coldfusion.filter.RequestMonitorFilter.invoke(Lcoldfusion/filter/FusionContext;)V+56
j  coldfusion.filter.MonitoringFilter.invoke(Lcoldfusion/filter/FusionContext;)V+12
j  coldfusion.filter.PathFilter.invoke(Lcoldfusion/filter/FusionContext;)V+124
j  coldfusion.filter.ExceptionFilter.invoke(Lcoldfusion/filter/FusionContext;)V+13
j  coldfusion.filter.ClientScopePersistenceFilter.invoke(Lcoldfusion/filter/FusionContext;)V+5
j  coldfusion.filter.BrowserFilter.invoke(Lcoldfusion/filter/FusionContext;)V+35
j  coldfusion.filter.NoCacheFilter.invoke(Lcoldfusion/filter/FusionContext;)V+120
j  coldfusion.filter.GlobalsFilter.invoke(Lcoldfusion/filter/FusionContext;)V+13
j  coldfusion.filter.DatasourceFilter.invoke(Lcoldfusion/filter/FusionContext;)V+5
j  coldfusion.filter.RequestThrottleFilter.invoke(Lcoldfusion/filter/FusionContext;)V+82
j  coldfusion.CfmServlet.service(Ljavax/servlet/ServletRequest;Ljavax/servlet/ServletResponse;)V+114
j  coldfusion.bootstrap.BootstrapServlet.service(Ljavax/servlet/ServletRequest;Ljavax/servlet/ServletResponse;)V+30
j  jrun.servlet.FilterChain.doFilter(Ljavax/servlet/ServletRequest;Ljavax/servlet/ServletResponse;)V+53
j  com.intergral.fusionreactor.filter.FusionReactorCoreFilter.doHttpServletRequest(Ljavax/servlet/http/HttpServletRequest;Ljavax/servlet/http/HttpServletResponse;Ljavax/servlet/FilterChain;)V+468
j  com.intergral.fusionreactor.filter.FusionReactorCoreFilter.doFusionRequest(Ljavax/servlet/http/HttpServletRequest;Ljavax/servlet/http/HttpServletResponse;Ljavax/servlet/FilterChain;)V+262
j  com.intergral.fusionreactor.filter.FusionReactorCoreFilter.doFilter(Ljavax/servlet/ServletRequest;Ljavax/servlet/ServletResponse;Ljavax/servlet/FilterChain;)V+45
j  com.intergral.fusionreactor.filter.FusionReactorFilter.doFilter(Ljavax/servlet/ServletRequest;Ljavax/servlet/ServletResponse;Ljavax/servlet/FilterChain;)V+39
j  jrun.servlet.FilterChain.doFilter(Ljavax/servlet/ServletRequest;Ljavax/servlet/ServletResponse;)V+80
j  coldfusion.monitor.event.MonitoringServletFilter.doFilter(Ljavax/servlet/ServletRequest;Ljavax/servlet/ServletResponse;Ljavax/servlet/FilterChain;)V+9
j  coldfusion.bootstrap.BootstrapFilter.doFilter(Ljavax/servlet/ServletRequest;Ljavax/servlet/ServletResponse;Ljavax/servlet/FilterChain;)V+25
j  jrun.servlet.FilterChain.doFilter(Ljavax/servlet/ServletRequest;Ljavax/servlet/ServletResponse;)V+80
j  jrun.servlet.FilterChain.service(Ljavax/servlet/ServletRequest;Ljavax/servlet/ServletResponse;)V+3
j  jrun.servlet.ServletInvoker.invoke(Ljavax/servlet/http/HttpServletRequest;Ljavax/servlet/http/HttpServletResponse;Ljrun/servlet/InvokerChain;)V+183
j  jrun.servlet.JRunInvokerChain.invokeNext(Ljavax/servlet/http/HttpServletRequest;Ljavax/servlet/http/HttpServletResponse;)V+55
j  jrun.servlet.JRunRequestDispatcher.invoke(Ljrun/servlet/ServletConnection;)V+249
j  jrun.servlet.ServletEngineService.dispatch(Ljrun/servlet/ServletConnection;)V+74
j  jrun.servlet.jrpp.JRunProxyService.invokeRunnable(Ljava/lang/Runnable;)V+24
j  jrunx.scheduler.ThreadPool$DownstreamMetrics.invokeRunnable(Ljava/lang/Runnable;)V+113
j  jrunx.scheduler.ThreadPool$ThreadThrottle.invokeRunnable(Ljava/lang/Runnable;)V+16
j  jrunx.scheduler.ThreadPool$UpstreamMetrics.invokeRunnable(Ljava/lang/Runnable;)V+47
j  jrunx.scheduler.WorkerThread.run()V+24
v  ~StubRoutines::call_stub

---------------  P R O C E S S  ---------------
[I removed this section due to StackOverflow question size limits. Please let me know if you need to see this]

Other Threads:
0x56879000 VMThread [stack: 0x566d0000,0x567d0000] [id=5156]
0x568af000 WatcherThread [stack: 0x57260000,0x57360000] [id=3788]

VM state:not at safepoint (normal execution)

VM Mutex/Monitor currently owned by a thread: None

Heap
par new generation   total 184320K, used 34086K [0x039d0000, 0x101d0000, 0x101d0000)
eden space 163840K,  11% used [0x039d0000, 0x04cc5c60, 0x0d9d0000)
from space 20480K,  71% used [0x0edd0000, 0x0fc23e68, 0x101d0000)
to   space 20480K,   0% used [0x0d9d0000, 0x0d9d0000, 0x0edd0000)
concurrent mark-sweep generation total 843776K, used 325395K [0x101d0000, 0x439d0000, 0x439d0000)
concurrent-mark-sweep perm gen total 262144K, used 146524K [0x439d0000, 0x539d0000, 0x539d0000)

Code Cache  [0x00710000, 0x010f8000, 0x03710000)
total_blobs=2699 nmethods=2465 adapters=187 free_code_cache=40016832 largest_free_block=17152

Dynamic libraries:
[I removed this section due to StackOverflow question size limits. Please let me know if you need to see this]

VM Arguments:
jvm_args: -Xmx1024m -Xms1024m -Xmn200m -XX:MaxPermSize=256m -XX:PermSize=256m -Xloggc:C:\ColdFusion8\runtime/../logs/CFGC/CFGC.log -XX:+PrintGCDetails -XX:+UseParNewGC -XX:+UseConcMarkSweepGC -Dcoldfusion.rootDir=C:\ColdFusion8\runtime/../ -Dcoldfusion.libPath=C:\ColdFusion8\runtime/../lib -Dsun.io.useCanonCaches=false -Djmx.invoke.getters=true 
java_command: <unknown>
Launcher Type: generic

Environment Variables:
PATH=C:\ColdFusion8\runtime\..\lib;C:\ColdFusion8\runtime\..\jintegra\bin;C:\ColdFusion8\runtime\..\jintegra\bin\international;C:\Program Files\CollabNet Subversion Server;C:\ColdFusion8\verity\k2\_nti40\bin;C:\CFusionMX7\verity\k2\_nti40\bin;C:\WINDOWS\system32;C:\WINDOWS;C:\WINDOWS\System32\Wbem;C:\PROGRA~1\NcFTP;C:\WINDOWS\system32\WindowsPowerShell\v1.0;C:\WINDOWS\system32\WindowsPowerShell\v1.0;D:\StrawberryPerl\c\bin;D:\StrawberryPerl\perl\site\bin;D:\StrawberryPerl\perl\bin;D:\php\ext;
OS=Windows_NT
PROCESSOR_IDENTIFIER=x86 Family 6 Model 23 Stepping 6, GenuineIntel

---------------  S Y S T E M  ---------------

OS: Windows Server 2003 family Build 3790 Service Pack 2

CPU:total 2 (1 cores per cpu, 1 threads per core) family 6 model 23 stepping 6, cmov, cx8, fxsr, mmx, sse, sse2, sse3, ssse3, sse4.1

Memory: 4k page, physical 3919344k(2146400k free), swap 7963284k(5585376k free)

vm_info: Java HotSpot(TM) Server VM (20.13-b02) for windows-x86 JRE (1.6.0_38-b05), built on Nov 14 2012 01:50:25 by "java_re" with MS VC++ 7.1 (VS2003)

time: Wed Feb 06 17:21:55 2013
elapsed time: 401 seconds 
```

崩溃日志 #2（在它崩溃之后，我尝试使用相同的配置重新启动 CF 服务，但它甚至无法启动，并产生此错误）：

```
#
# A fatal error has been detected by the Java Runtime Environment:
#
#  EXCEPTION_ACCESS_VIOLATION (0xc0000005) at pc=0x7c8194cd, pid=6020, tid=5608
#
# JRE version: 6.0_38-b05
# Java VM: Java HotSpot(TM) Server VM (20.13-b02 mixed mode windows-x86 )
# Problematic frame:
# C  [ntdll.dll+0x194cd]
#
# If you would like to submit a bug report, please visit:
#   http://java.sun.com/webapps/bugreport/crash.jsp
#

---------------  T H R E A D  ---------------

Current thread (0x568a2c00):  JavaThread "C2 CompilerThread1" daemon [_thread_in_native, id=5608, stack(0x57060000,0x57160000)]

siginfo: ExceptionCode=0xc0000005, writing address 0x0000e010

Registers:
EAX=0x5b644638, EBX=0x5a9f0000, ECX=0x5b652658, EDX=0x0000e010
ESP=0x5715e534, EBP=0x5715e56c, ESI=0x003e0000, EDI=0x5b652650
EIP=0x7c8194cd, EFLAGS=0x00010283

Top of Stack: (sp=0x5715e534)
0x5715e534:   5b652650 5b652658 5b652650 580d0000
0x5715e544:   00000000 5b673000 00000000 567d0140
0x5715e554:   00000000 00000000 00000000 00000136
0x5715e564:   00000000 00000000 5715e590 7c81727a
0x5715e574:   5b653000 00020000 00000136 00001000
0x5715e584:   5b652650 003e0000 00000071 5715e7b8
0x5715e594:   7c82b460 003e0000 00007ff4 00007ff4
0x5715e5a4:   579f2508 7c86a7b2 00000000 5715e5d4 

Instructions: (pc=0x7c8194cd)
0x7c8194ad:   ff ff 0f b7 c8 8d 84 ce 78 01 00 00 39 00 0f 84
0x7c8194bd:   1d 55 ff ff 8b 50 04 8d 4f 08 89 01 89 51 04 57
0x7c8194cd:   89 0a 56 89 48 04 e8 5d 0f 01 00 66 83 7d fc 00
0x7c8194dd:   0f 85 0b 73 ff ff 8b 45 ec 85 c0 0f 85 8a 2d ff 

Register to memory mapping:

EAX=0x5b644638 is an unknown value
EBX=0x5a9f0000 is pointing into the stack for thread: 0x57608400
ECX=0x5b652658 is an unknown value
EDX=0x0000e010 is an unknown value
ESP=0x5715e534 is pointing into the stack for thread: 0x568a2c00
EBP=0x5715e56c is pointing into the stack for thread: 0x568a2c00
ESI=0x003e0000 is an unknown value
EDI=0x5b652650 is an unknown value

Stack: [0x57060000,0x57160000],  sp=0x5715e534,  free space=1017k
Native frames: (J=compiled Java code, j=interpreted, Vv=VM code, C=native code)
C  [ntdll.dll+0x194cd]  RtlFreeThreadActivationContextStack+0x418
C  [ntdll.dll+0x1727a]  towlower+0xb1
C  [ntdll.dll+0x2b460]  wcscpy+0x175
C  [MSVCR71.dll+0x16b3]  _crtLCMapStringA+0x305
C  [MSVCR71.dll+0x16db]  _crtLCMapStringA+0x32d
V  [jvm.dll+0x5edd3]
V  [jvm.dll+0x5eff2]
V  [jvm.dll+0x5f273]
V  [jvm.dll+0x27ed7e]
V  [jvm.dll+0x27c263]
V  [jvm.dll+0x259bf9]
V  [jvm.dll+0x2600a3]
V  [jvm.dll+0x261382]
V  [jvm.dll+0x24fa4a]
V  [jvm.dll+0x4882d]
V  [jvm.dll+0x493bf]
V  [jvm.dll+0x12e8a4]
V  [jvm.dll+0x15719c]
C  [MSVCR71.dll+0x9565]  endthreadex+0xa0
C  [kernel32.dll+0x2482f]  GetModuleHandleA+0xdf

Current CompileTask:
C2:   4520  97      java.util.Arrays.mergeSort([Ljava/lang/Object;[Ljava/lang/Object;IIILjava/util/Comparator;)V (235 bytes)

---------------  P R O C E S S  ---------------
[I removed this section due to StackOverflow question size limits. Please let me know if you need to see this]

Other Threads:
0x56879000 VMThread [stack: 0x566d0000,0x567d0000] [id=320]
0x568a6c00 WatcherThread [stack: 0x57260000,0x57360000] [id=5852]

VM state:synchronizing (normal execution)

VM Mutex/Monitor currently owned by a thread:  ([mutex/lock_event])
[0x003e61c8] Threads_lock - owner thread: 0x56879000

Heap
par new generation   total 184320K, used 37692K [0x039d0000, 0x101d0000, 0x101d0000)
eden space 163840K,  23% used [0x039d0000, 0x05e9f248, 0x0d9d0000)
from space 20480K,   0% used [0x0d9d0000, 0x0d9d0000, 0x0edd0000)
to   space 20480K,   0% used [0x0edd0000, 0x0edd0000, 0x101d0000)
concurrent mark-sweep generation total 843776K, used 1673K [0x101d0000, 0x439d0000, 0x439d0000)
concurrent-mark-sweep perm gen total 262144K, used 12535K [0x439d0000, 0x539d0000, 0x539d0000)

Code Cache  [0x00710000, 0x00950000, 0x03710000)
total_blobs=244 nmethods=121 adapters=77 free_code_cache=49693952 largest_free_block=21888

Dynamic libraries:
[I removed this section due to StackOverflow question size limits. Please let me know if you need to see this]

VM Arguments:
jvm_args: -Xmx1024m -Xms1024m -Xmn200m -XX:MaxPermSize=256m -XX:PermSize=256m -Xloggc:C:\ColdFusion8\runtime/../logs/CFGC/CFGC.log -XX:+PrintGCDetails -XX:+UseParNewGC -XX:+UseConcMarkSweepGC -Dcoldfusion.rootDir=C:\ColdFusion8\runtime/../ -Dcoldfusion.libPath=C:\ColdFusion8\runtime/../lib -Dsun.io.useCanonCaches=false -Djmx.invoke.getters=true 
java_command: <unknown>
Launcher Type: generic

Environment Variables:
PATH=C:\ColdFusion8\runtime\..\lib;C:\ColdFusion8\runtime\..\jintegra\bin;C:\ColdFusion8\runtime\..\jintegra\bin\international;C:\Program Files\CollabNet Subversion Server;C:\ColdFusion8\verity\k2\_nti40\bin;C:\CFusionMX7\verity\k2\_nti40\bin;C:\WINDOWS\system32;C:\WINDOWS;C:\WINDOWS\System32\Wbem;C:\PROGRA~1\NcFTP;C:\WINDOWS\system32\WindowsPowerShell\v1.0;C:\WINDOWS\system32\WindowsPowerShell\v1.0;D:\StrawberryPerl\c\bin;D:\StrawberryPerl\perl\site\bin;D:\StrawberryPerl\perl\bin;D:\php\ext;
OS=Windows_NT
PROCESSOR_IDENTIFIER=x86 Family 6 Model 23 Stepping 6, GenuineIntel

---------------  S Y S T E M  ---------------

OS: Windows Server 2003 family Build 3790 Service Pack 2

CPU:total 2 (1 cores per cpu, 1 threads per core) family 6 model 23 stepping 6, cmov, cx8, fxsr, mmx, sse, sse2, sse3, ssse3, sse4.1

Memory: 4k page, physical 3919344k(2858352k free), swap 7963284k(5630528k free)

vm_info: Java HotSpot(TM) Server VM (20.13-b02) for windows-x86 JRE (1.6.0_38-b05), built on Nov 14 2012 01:50:25 by "java_re" with MS VC++ 7.1 (VS2003)

time: Wed Feb 06 17:22:00 2013
elapsed time: 4 seconds 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T10:40:29.940

您在 32 位 VM 上运行，这对堆的大小施加了一些限制。我不是这方面的世界上最好的权威，所以你可能需要做进一步的谷歌搜索来确认/澄清其中一些观点。

每个进程只有 2 Gig 的内存限制，所以你有很多东西可以适应：

*   你的堆。这是上面示例中的 1 个演出
*   你的 Perm gen （我相信它没有放在堆里）。那是 256 兆。
*   栈内存：每个线程都有一个栈，在上面的例子中至少是一个meg。将线程数乘以 1 meg 并将其添加到上面的 1.25 gig 中。
*   本机 Java 代码。JVM的代码和本机内存需要加载或映射到内存空间。
*   其他 DLL，例如 Windows 功能（ntdll.dll 和 MSVCR71.dll），而且我相信防病毒软件和其他各种杂乱无章的东西都可以映射进去。

我相信如果将 DLL 映射到整个 2 Gig 空间中的内存位置，您可能会遇到内存分配问题，您会得到一种碎片，其中没有大的连续内存块可用。

计算活动线程的数量（可能是你必须从上面的转储中剪掉的那部分），看看你的记忆中有多少凹痕。我们的应用程序使用 -Xss256k 将线程堆栈大小减少到 256k，我们已经在规模和负载下对其进行了测试，它适用于我们的应用程序，但您需要测试自己的应用程序。

在CF根本无法启动的崩溃之后，它会以较低的-Xmx设置启动吗？

尝试使用 SysInternals 中的 VMMap.exe[工具](http://technet.microsoft.com/en-us/sysinternals/dd535533)。它会比你想知道的更多地告诉你你的过程在做什么。ProcMon 对于更高级别的进程信息也非常有用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-11T07:59:40.980

我想我会与大家分享我的最终解决方案。

我将为您省去有关我如何达到此解决方案的无聊细节。可以说，我收到的最好的建议是“首先找出问题所在”。

我最终安装了[JRockit](http://www.oracle.com/technetwork/middleware/jrockit/downloads/index.html)来识别哪些代码块占用的 RAM 最多。

在此过程中，需要将 Coldfusion 使用的 JRE 更改为 JRockit 内部的 JRE。

```
#java.home=D:/Program Files/Java/jdk1.6.0_38/jre
java.home=D:/Program Files/Java/jrockit-jdk1.6.0_37-R28.2.5-4.1.0/jre 
```

我相信这个JRE是由BEA而不是SUN制造的？不要引用我的话。但我需要按如下方式更改我的 java args：

```
java.args=-server -Xmx1200m -Xms1200m -Xns300m -Xgc:singlecon -Dcoldfusion.rootDir={application.home}/../ -Dcoldfusion.libPath={application.home}/../lib -Dcom.sun.management.jmxremote.port=53578 -Dcom.sun.management.jmxremote.authenticate=false -Dcom.sun.management.jmxremote.ssl=false 
```

我打开了一个随机端口，JRockit 可以使用它来分析 JVM 堆的使用情况。它为我指明了几段代码的方向，我永远不会认为这是有问题的。

但是，我也一直在修改 RAM 设置，发现 1200m 似乎工作得很好。

经验教训：并非所有 JRE 都是平等的。

# user-interface - 为 GUI 输入创建函数指针的更好方法是什么？

> ID：14740480
> 
> 赞同：1
> 
> 时间：2013-02-06T22:56:26.260
> 
> 标签：user-interface, input, widget, controls, function-pointers

我目前正在开发 C 中的开源游戏引擎，供人们学习等，我想知道通过鼠标点击、按键等为 UI 系统进行输入的最佳方式是什么。

目前我有ui系统的输入，使用函数指针在哪里设置用户将去的函数。

```
button1.mousepress = button1_press; 
```

然后，如果用户单击 button1，它将循环查找按钮 1，然后执行 button1 的单击事件。但是我需要它去控制内部的一个事件，然后去用户控制。我设置函数指针的方式如下。

```
struct widget
{
//contains control special data
void *control;

//contains the parent of the widget.
widget *parent;

//contains events for quick calling
void(*draw)(widget *);
void(*mousepress)(widget *,int,int);
void(*mouserelease)(widget *,int,int);
void(*mousewheel)(widget *,int);
void(*keypressed)(widget *,int,int);

//hidden and shown arrays
widget_array shown;
widget_array hidden;

vector2ui pos;
vector2ui actualpos;
vector2ui originalpos;
vector2i imgpos;
image img;
uint16 width;
uint16 height;
uint8 type;
sbool action;
}; 
```

正如你所看到的，函数指针目前不是通用的，所以如果我必须让它们通用，我会的。除此之外，将函数指针设置为允许它们进入 gui 控件事件的最佳方法是什么，然后转到用户制作的 **button1.mousepress**。关于什么是做瘦的最佳方法的任何想法。我的一个朋友建议使用链接，但我无法弄清楚链接是如何工作的......

感谢您阅读本文的任何人，也感谢那些愿意提供帮助的人。

# javascript - 用户正在查看的位置弹出 div

> ID：14740483
> 
> 赞同：0
> 
> 时间：2013-02-06T22:56:46.517
> 
> 标签：javascript, css, popup

我有一个弹出 div 正在点击。我需要让弹出窗口出现在用户正在查看的浏览器中。现在在短页面上找不到弹出 div，在长页面上，您必须向下滚动才能看到弹出窗口。

到目前为止，我在我的 popUpDiv 中尝试了一些不同的东西，但没有成功。

```
margin: 30px auto 0;
    top: 50%;
    left: 50%;

 margin-left: -155px;
    margin-top: -700px; 
```

这是我的CSS：

```
/*STYLES FOR CSS POPUP*/
#blanket {
   background-color:#111;
   opacity: 0.65;
   *background:none;
   position:absolute;
   z-index: 9001;
   top:0px;
   left:0px;
   width:100%;
}
#popUpDiv {
    padding: 40px;
    position:absolute;
    background-color: #f3f3f3;
    height:255px;
    border:5px solid #000;
    z-index: 9002;
    -moz-border-radius: 10px;
    -webkit-border-radius:10px;
    border-radius: 10px;
    margin-left: -155px;
    margin-top: -700px;
}
#popUpDiv a {position:relative; top:0px; right:10px}
/*END CSS POPUP*/ 
```

这是我的 php 文件中的内容：

```
<!--POPUP--> 
<script type="text/javascript" src="http://domain.com/js/css-pop.js"></script>

    <div id="blanket" style="display:none;">
    </div>
    <div id="popUpDiv" style="display:none;">

        Pop Up content Here

    </div>
<!-- / POPUP--> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T23:00:55.557

在 jscript 中做你想做的事情的方法不止几种，但凯迪拉克的方法可能是模态弹出窗口：[http](http://www.script-tutorials.com/css3-modal-popups/) ://www.script-tutorials.com/css3-modal-popups/ 。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T23:38:39.577

定位：固定会解决你的问题。你对 position: absolute 的使用造成了所有的戏剧性。

```
#popUpDiv {
    padding: 40px;
    position:fixed;
    background-color: #f3f3f3;
    height:255px;
    border:5px solid #000;
    z-index: 9002;
    -moz-border-radius: 10px;
    -webkit-border-radius:10px;
    border-radius: 10px;
} 
```

# java - 从 String 数组到 ArrayList 的转换相关的性能

> ID：14740486
> 
> 赞同：1
> 
> 时间：2013-02-06T22:56:51.317
> 
> 标签：java

我正在将一个空的 String 数组（我可以从中间件获得）转换为 List 。

对于转换过程，我使用了抛出 java.lang.UnsupportedOperationException 的 Arrays.asList （请参见下面的代码）。

```
public class Ramddd {
    public static void main(String args[]) {
        String[] words = null;
        if (words == null) {
            words = new String[0];
        }
        List<String> newWatchlist = Arrays.asList(words);
        List<String> other = new ArrayList<String>();
        other.add("ddd");
        newWatchlist.addAll(other);
    }

}

Exception in thread "main" java.lang.UnsupportedOperationException
    at java.util.AbstractList.add(Unknown Source)
    at java.util.AbstractList.add(Unknown Source)
    at java.util.AbstractCollection.addAll(Unknown Source)
    at Ramddd.main(Ramddd.java:18) 
```

**如果我使用，我不会收到此错误**

```
List<String> mylist = new ArrayList<String>();
        for (int i = 0; i < words.length; i++) {
            mylist.add(words[i]);
        } 
```

这形成了一种适当的`List` 和任何类似的操作`addALL`，`removeALL`看起来不错，但不想使用这种 for 循环方法，因为它可能会导致性能下降。请让我知道将 String 数组转换为 ArrayList 的最佳和安全方法是什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T23:01:11.133

以下情况如何：

```
public class Ramddd {
    public static void main(String args[]) {
        String[] words = getWords();
        if (words == null) {
            words = new String[0];
        }
        List<String> other = new ArrayList<String>(Arrays.asList(words));
        other.add("ddd");
    }
} 
```

在性能方面，我不担心这是什么，除非你有一个非常巨大的字符串数组。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T23:05:53.517

该方法[`java.util.Arrays.asList(T...)`](http://docs.oracle.com/javase/7/docs/api/java/util/Arrays.html#asList%28T...%29)返回一个由指定数组支持的固定大小的列表。此`List`方法 ( `java.util.Arrays.ArrayList`) 的实现不支持这些方法。请参阅[`java.util.AbstractList`](http://docs.oracle.com/javase/7/docs/api/java/util/AbstractList.html).

如果您知道单词列表的总大小，则可以为 初始化容量[`ArrayList`](http://docs.oracle.com/javase/7/docs/api/java/util/ArrayList.html)，添加 n 个元素需要*O* ( *n* ) 时间。如果您不知道最终大小，请使用 LinkedList。

[在List Implementations (The Java Tutorials > Collections > Implementations)](http://docs.oracle.com/javase/tutorial/collections/implementations/list.html)中查看更多信息。

# ruby-on-rails - 从 Rails 中的 API 提供视图

> ID：14740488
> 
> 赞同：0
> 
> 时间：2013-02-06T22:56:56.697
> 
> 标签：ruby-on-rails, api, rest

我正在构建一个 Rails 应用程序，我还将为其开发一个移动应用程序。我正在尝试使其成为 RESTful 并创建一个 API，所有前端视图都将通过该 API 与后端进行通信。有没有办法让控制器与 API 对话而不是直接与模型对话？这样，我可以确保所有前端访问都由 API 控制。

**编辑**：

我找到了两篇讨论这个的文章。但我正在尝试找到一种方法来精确地将 API 与网站的主要控制器和视图分开。有没有办法让我的控制器和视图直接与 API 对话，而不是模型？

[http://engineering.gomiso.com/2011/05/16/if-youre-using-to_json-youre-doing-it-wrong/](http://engineering.gomiso.com/2011/05/16/if-youre-using-to_json-youre-doing-it-wrong/)

[http://blog.gomiso.com/2011/06/27/building-a-platform-api-on-rails/](http://blog.gomiso.com/2011/06/27/building-a-platform-api-on-rails/)

[http://www.rubyflow.com/items/5649-rabl-the-ruby-api-template-language](http://www.rubyflow.com/items/5649-rabl-the-ruby-api-templating-language)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T23:51:11.553

通常，控制器是 API。但是，您所描述的是服务层。有一个关于这方面的 railscasts 插曲可能会在这方面为您提供帮助。

[http://railscasts.com/episodes/398-service-objects](http://railscasts.com/episodes/398-service-objects)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T23:26:55.643

你想从控制器发出一个简单的 api 请求吗？

因此，您可以使用 Net::HTTP 或开箱即用的处理异常的 gem Typhoeus ... [https://github.com/typhoeus/typhoeus](https://github.com/typhoeus/typhoeus)

# jquery - icanhaz.js 问题

> ID：14740489
> 
> 赞同：0
> 
> 时间：2013-02-06T22:56:57.300
> 
> 标签：jquery, icanhaz.js

我只是想显示一个我通过 AJAX 调用拉入的对象内的项目列表。我想用 icanhaz.js 模板显示它。

HTML：

```
<script id="trending" type="text/html">
      <li>
        <p>Name: {{ Trending.name }}</p>
      </li>
  </script>

<ul id="trending" class="span12">
    <li>Trending</li>
</ul> 
```

JS：

```
$(document).ready(function(){
    $.ajax({
            dataType : 'jsonp',
            url      : 'https://s3.amazonaws.com/sxsw_trending/sxsw_trending.json',
            jsonp : "callback",
            jsonpCallback: "sxswTrending",
                success  : function (data) {
                            console.log(data.Trending);
                                var trendingArr = [];
                                         var trending;
                                         trending = ich.trending(data);
                                         $('#trending').append(trending);       

                                for (var i = 0, len = data.length; i < len; i++) {
                                         var trending;
                                         trending = ich.trending(data[i]);
                                         $('#trending').append(trending);

                                         trendingArr.push(data[i]);
                                }

               }

    });

}); 
```

我提取的数据如下所示： sxswTrending({"Restaurants":[],"Bars":[],"Trending":[{"id":"43582f80f964a520dd281fe3","name":"Whole Foods Market" ,"hereNow":12},{"id":"440da323f964a52092301fe3","name":"奥斯汀会议中心","hereNow":6}]})

不知道我的挂断在哪里，我只是想在每个名为 Trending 的对象中显示名称。

我也把它放在 JSFiddle 上：http: [//jsfiddle.net/xtian/W6mmu/](http://jsfiddle.net/xtian/W6mMu/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T23:18:36.447

我简化了您的代码，以说明如何修复它。

```
$(document).ready(function(){
    $.ajax({
        dataType      : 'jsonp',
        url           : 'https://s3.amazonaws.com/sxsw_trending/sxsw_trending.json',
        jsonpCallback : 'sxswTrending',
        success  : function(data) {      
                     for (var i = 0; i < data.Trending.length; i++) {
                        var trending = ich.trending(data.Trending[i]);
                           $('#trending').append(trending);
                     }
                   }                                    
    });
}); 
```

见[http://jsfiddle.net/adamzr/43WDa/](http://jsfiddle.net/adamzr/43WDa/)

# javascript - 使用转义字符查询字符串

> ID：14740493
> 
> 赞同：0
> 
> 时间：2013-02-06T22:57:10.360
> 
> 标签：javascript, escaping, query-string

我需要从某个页面上的文本框中传递一些值作为查询字符串，然后在另一个页面中接收它。

事情是想为文本框的新行发送转义字符`(\r\n)`

```
button.onclick = function () {
    window.open('receiver.aspx?Device=' +
                          document.getElementById('myTextbox').value);
}; 
```

这可能/允许吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-06T23:00:54.073

使用[`encodeURIComponent`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/encodeURIComponent)：

```
button.onclick = function () {
    window.open('receiver.aspx?Device=' +
                 encodeURIComponent(document.getElementById('myTextbox').value));
}; 
```

它：

> 通过将某些字符的每个实例替换为表示字符的 UTF-8 编码的一个、两个、三个或四个转义序列来编码统一资源标识符 (URI) 组件

# jquery - Jquery-validate 不起作用，浏览器冻结

> ID：14740499
> 
> 赞同：0
> 
> 时间：2013-02-06T22:57:31.267
> 
> 标签：jquery, jquery-validate

我正在尝试使用引导程序和 jQuery 验证创建一个注册页面。不幸的是，当我调用 .validate() 函数时，Opera 冻结了约 5 秒并且验证不起作用。

JS：

```
$(document).ready(function()
{
$("#register").validate({
    rules:{
        email:{required:true,email: true},
        password:{required:true,minlength: 6}
    },
    messages:{
        email:{
             required:"Enter your email address",
             email:"Enter valid email address"
        },
        password:{
             required:"Enter your password",
             minlength:"Password must be minimum 6 characters"
        }
    },
    errorClass: "help-inline",
    errorElement: "span",

    highlight: function(element, errorClass, validClass)
    {
        $(element).parents('.control-group').addClass('error');
    },
    unhighlight: function(element, errorClass, validClass)
    {
        $(element).parents('.control-group').removeClass('error');
        $(element).parents('.control-group').addClass('success');
    }
 });
}); 
```

HTML：

```
<form class="form-horizontal" id="register" method='post' action=''>
<fieldset>
<legend>Reg</legend>
<div class="control-group">
<label class="control-label" for="email">Email</label>
<div class="controls">
<input type="text" class="input-medium" id="email" name="email">
</div>
</div>
<div class="control-group">
<label class="control-label" for="password">Password</label>
<div class="controls">
<input type="password" class="input-medium" id="password" name="password">
</div>
</div>
<div class="control-group">
<label class="control-label"></label>
<div class="controls">
<button type="submit" class="btn btn-primary">Go</button>
</div>
</div>
</fieldset>
</form> 
```

知道有什么问题吗？

包含的 JS 文件：jquery-1.8.3.min.js、bootstrap.min.js、jquery-validate.min.js

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T23:10:25.967

原来我使用了错误的库 - [http://plugins.jquery.com/validate/](http://plugins.jquery.com/validate/)而不是[http://bassistance.de/jquery-plugins/jquery-plugin-validation/](http://bassistance.de/jquery-plugins/jquery-plugin-validation/)。真可惜：/

# javascript - dribbble API 上的 if else 语句

> ID：14740502
> 
> 赞同：0
> 
> 时间：2013-02-06T22:57:40.737
> 
> 标签：javascript, json, api, if-statement

我不太擅长 JS，并且很难处理有关 Dribbble API 的 IF Else 声明。我想渲染宽度为 800 像素的镜头与宽度为 400 像素的镜头不同。我可以让 API 以相同的大小吐出我的所有镜头，但我想要一个 if image width = 800 以一种方式渲染，否则以另一种方式渲染。

有人可以在下面教我如何解决这个烂摊子。

```
function larger(fileterLarge){
if(filter.shots[i].width = 800){
function render(filter){
for (var i = 0; i<filter.shots.length;i++){
    inner = inner + innerP1 + filter.shots[i].url + innerP2 + filter.shots[i].image_url + innerP3 + filter.shots[i].likes_count + innerP4 + filter.shots[i].comments_count + innerP5 + filter.shots[i].title + innerp6;
}

};
$('.gallery').html(inner);
inner = "";
}; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T00:31:12.037

要确定图像的呈现方式，您必须在语句中使用`equality "==="`运算符而不是`assignment "="`运算符。`if else`希望[这个小提琴](http://jsfiddle.net/superhacker/cn88t)对你有帮助

# mysql - 在数据库中存储多项选择调查答案的最佳方式

> ID：14740504
> 
> 赞同：9
> 
> 时间：2013-02-06T22:57:58.123
> 
> 标签：mysql, sql, database

我目前正在使用 PHP/MySQL 进行调查创建/管理 Web 应用程序。我对数据库表进行了几次修改，我再次发现我可能需要重新考虑某种类型答案的存储。

现在，我有一个看起来像这样的表：

**调查答案**

```
id          PK
eid
sesid
intvalue    Nullable
charvalue   Nullable 
```

> id = 分配给每一行的唯一值
> 
> eid = 此答案所答复的调查问题
> 
> sesid = 调查“会话”（有关调查时间和日期的信息）id
> 
> intvalue = 答案的值（如果是数值）
> 
> charvalue = 答案的值（如果它是文本表示形式）

这让我可以继续使用 MySQL 的数学函数来加快处理速度。

然而，我发现了一个新的挑战：存储具有多个响应的问题。一个例子是：

***您喜欢吃以下哪一项？（选择所有申请）***

*   女童子军饼干
*   熏肉
*   玉米
*   鲸脂

现在，当我想存储结果时，我不确定处理它的最佳方法。目前，我有一个表格，仅用于多项选择，如下所示：

**调查元素选项**

```
id        PK
eid
value 
```

> id = 与每一行关联的唯一值
> 
> eid = 此选项关联的问题/元素
> 
> value = 该选项的文本值

使用此设置，然后我将返回的多项选择答案存储在“survey_answers”中，作为调查中选择的 element_options 行的逗号分隔 ID 字符串。（即类似“4,6,7,9”）我想知道这是否确实是最好的解决方案，或者创建一个新表来保存每个选择的答案是否更实际，然后参考一个给定的答案行，它反过来引用元素并最终引用调查。

* * *

**编辑**

对于任何感兴趣的人，这是我最终采用的方法（在 PhpMyAdmin 关系视图中）：

![数据库关系和表结构](../Images/4643105eb225a278fff5796ff8643ffe.png)

收集多选问题的计数的基本查询如下所示：

```
SELECT e.question AS question, eo.value AS value, COUNT(eo.value) AS count
FROM survey_elements e, survey_element_options eo, survey_answer_options ao
WHERE e.id = 19
AND eo.eid = e.id
AND ao.oid = eo.id
GROUP BY eo.value 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-06T23:11:07.833

这真的取决于很多事情。

1.  通常，将逗号分隔值列表存储在数据库中是不好的，尤其是如果您计划对这些数据进行远程智能操作。特别是如果您想对答案进行任何类型的高级报告。
2.  存储它的*最佳*关系方法是也在第二个表中定义答案，然后将它们链接到用户对第三个表中的问题的响应（每个用户问题有多个条目，或者可能是用户调查问题，如果用户可以针对同一个问题进行多项调查。

作为一个简单的例子，这可能会变得有点复杂：

示例表：

*   `Users`( `Username`, `UserID`)
*   `Questions`( `qID`, `QuestionsText`)
*   `Answers`（`AnswerText`[在这种情况下，示例可能是可重用的，但这也会导致额外的复杂性]，`aID`）
*   `Question_Answers`([此问题的可用答案，每个问题多个条目] `qaID`, `qID`, `aID`),
*   `UserQuestionAnswers`( `qaID`, `uID`)

**注意：仅作为示例，而非推荐**

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-06T23:09:18.627

将主键转换为非唯一索引，并在相同 id 下添加相同问题的答案。

例如。

```
id  | eid | sesid | intval | charval
 3     45      30        2  
 3     45      30        4 
```

如果需要，您仍然可以为常规唯一 PK 添加另一列。

保持简单。这里不需要关系。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-06T23:16:21.563

这真是一匹马的课程。

您可以存储为逗号分隔的字符串（但是当您的答案之一中有文字逗号时会发生什么）。

您可以存储为一对多表，例如：

**调查元素答案**

```
id                PK
survey_answers_id FK
intvalue          Nullable
charvalue         Nullable 
```

然后循环遍历该表。如果您选择一个答案，它将在此表中创建一行。如果您选择两个答案，它将在此表中创建两行，依此类推。然后您将从survey_answers 表中删除 intvalue 和 charvalue。

另一种选择，因为您已经将元素选项存储在他们自己的表中，所以创建一个多对多表，例如：

**调查元素答案**

```
id                         PK
survey_answers_id          FK
survey_element_options_id  FK 
```

同样，每个选项选择一行。

另一个选择是存储位掩码值。这将消除对多对多表的需要。

**调查元素选项**

```
id              PK
eid             FK
value           Text
optionnumber    unique for each eid
optionbitmask   2 ^ optionnumber 
```

optionnumber 对于每个 eid 应该是唯一的，并且从 1 开始递增。如果您使用 bigint，则限制为 63 个选项，如果您使用 int，则限制为 31 个选项。

然后在你的**survey_answers**

```
id            PK
eid
sesid
answerbitmask bigint 
```

对于用户选择的每个选项，通过将所有选项位掩码相加来计算答案位掩码。例如，如果 7 存储在 Answerbitmask 中，那么这意味着用户选择了前三个选项。

可以通过以下方式进行连接：

其中survey_answers.answerbitmask &survey_element_options.optionbitmask > 0

所以，是的，有几个选项需要考虑。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-02-06T23:09:02.723

如果您在另一个查询中不使用 id 作为外键，或者如果您可以使用 sesid 查询结果，请尝试多对一关系。否则，我会将多项选择答案存储为序列化数组，例如 JSON 或通过 php 的 serialize() 函数。

# jira - 将已解决的问题分配给报告者，除非报告者不在 QA 组中

> ID：14740511
> 
> 赞同：0
> 
> 时间：2013-02-06T22:58:19.050
> 
> 标签：jira, user-management, jira-plugin

我目前正在修改我们的 JIRA 工作流程和问题路由，并遇到以下困境。

我想*将*所有已*解决*的问题分配给原始报告人，*除非*报告人不在*QA Group*中。然后应该将问题分配给单个用户（在本例中是我们的 QA Lead）。

在研究了几个插件和线程之后，我还没有找到任何类似的东西或任何有助于实现这一目标的东西。

如果您需要更多信息，请告诉我。一如既往，我们非常感谢您的帮助。

**编辑：** 吉拉版本 5.2

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T11:57:22.300

*“希望分配所有已解决*的问题”是什么意思？

如果您的意思是要检查所有问题并执行此操作，那么您最好使用[REST API](https://developer.atlassian.com/display/JIRADEV/JIRA+REST+APIs)，例如使用[jira-python](http://jira-python.readthedocs.org/en/latest/) 编写一个脚本，该脚本将解决所有问题并进行更改。

**如果您想将此规则应用于所有正在解决的问题**- 这可以很容易地使用[Jira 的脚本套件](https://marketplace.atlassian.com/plugins/com.quisapps.jira.jss)或[Jira Groovy Runner](https://marketplace.atlassian.com/plugins/com.onresolve.jira.groovy.groovyrunner)（取决于您的 jira 版本）`resolve issue transition`在工作流程中附加一个 post 函数来检查每个问题和进行必要的更改。

如果您在编码任何这些解决方案或更多信息方面需要帮助，请告诉我..

**更新**

使用[Jira Groovy Runner](https://marketplace.atlassian.com/plugins/com.onresolve.jira.groovy.groovyrunner)，将[脚本发布功能](https://studio.plugins.atlassian.com/wiki/display/GRV/Script+Runner#ScriptRunner-Conditions,Validators,PostFunctions)添加到工作流的`resolve`过渡中。脚本应该是这样的：

```
import com.atlassian.jira.issue.Issue;
import com.atlassian.jira.issue.MutableIssue
import com.atlassian.jira.ComponentManager
import com.atlassian.jira.user.util.UserManager
import com.atlassian.jira.security.groups.GroupManager
import com.atlassian.crowd.embedded.api.User

MutableIssue myIssue = issue
User reporter= issue.getReporter()
GroupManager usersGroup = (GroupManager) ComponentManager.getComponentInstanceOfType(GroupManager.class);
Collection<String> currentUserGroups = usersGroup.getGroupNamesForUser(reporter)
if ('QA' in currentUserGroups) {
  // assign issues back to the original reporter 
  issue.setAssignee(reporter)
} else {
  // EXCEPT when the reporter is not in the QA Group
  // Then the issue should be assigned to the QA Lead.
  issue.setAssignee(ComponentManager.instance.userUtil.getUserObject('qa_leader_name'))
} 
```

有关更多信息，请查看[Jira 的 API](http://docs.atlassian.com/jira/latest/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T01:39:45.560

我们为客户编写了一个类似的自定义插件：

“这个发布功能可以添加到诸如 Resolve 之类的转换中，开发人员表示该问题已准备好进行测试。目的是减少 QA 经理的分类工作。

如果报告者是 QA 等已配置组的成员：则将受理人更改为报告人 否则将受理人更改为 QA 组的已配置主管”

如果这听起来相关，请发送电子邮件至 info@customware.net。

〜马特

# iphone - 多个 SKPaymentTransaction

> ID：14740512
> 
> 赞同：2
> 
> 时间：2013-02-06T22:58:42.193
> 
> 标签：iphone, ios, in-app-purchase, storekit

我在我的应用程序中实现了 StoreKit。我注意到，对于我的一些测试账户，`SKPaymentTransaction`paymentQueue 中有多个 's。这导致`SKPaymentTransactionObserver`被多次调用`SKPaymentTransactionStatePurchased`

当我在升级过程中停止应用程序或将应用程序置于后台时，这个问题似乎更加明显。

我不确定是什么导致了多次付款，或者这是预期的行为？此外，确保在验证后完成所有购买的交易。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-07T02:51:14.837

当交易完成、取消或失败时，您需要将其从队列中移除，否则您将有多个交易仍在支付队列中处于活动状态。这就是导致您的问题的原因。要解决此问题，每当事务完成、取消或失败时，请调用以下命令。

```
[[SKPaymentQueue defaultQueue] finishTransaction:transaction]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-07T01:22:32.370

您需要`[[SKPaymentQueue defaultQueue] finishTransaction:transaction]`对每个事务执行以将其从队列中删除。

# mercurial - hgext.extdiff 默默地什么都不做

> ID：14740513
> 
> 赞同：2
> 
> 时间：2013-02-06T22:58:45.700
> 
> 标签：mercurial, mercurial-extension

在尝试启动我的真正差分引擎时，我已将设置调整为非常小的设置，但仍然没有输出，也没有任何迹象表明为什么似乎什么也没发生。（搜索 extdiff 的 SO 和 Mercurial 站点（包括 mercurial wiki）给了我我尝试过的所有想法，尽管也许我还没有尝试过。）

我尝试了一个 bash 脚本和一个 .bat 文件；我已经尝试了位于 E: 驱动器的“根”中的每个脚本，标识为 /cygdrive/e/ 或 E:/ 我尝试过引用和不引用脚本的路径。我想我已经用尽了这些组合，还没有得到任何迹象表明正在运行什么（如果有的话）。直接调用时，FdbCmp.bat 的行为与预期相同；它位于我的 $PATH 目录和 Windows Path 环境变量中。

其他建议？看起来它很简单，应该“正常工作”

mercurial.ini 包括

```
[extdiff]  
hgext.extdiff
cmd.fdiff0 = "e:/Program Files/DbCmp/FdbCmp.bat"
opts.fdiff0 = $root --file $local --file $other 
```

FdbCmp.bat：

```
@echo off
echo FdbCmp.bat testing
echo FdbCmp.bat args: ::%1:: ::%2:: ::%3 ::%4:: ::%5:: ::%6:: ::%7:: ::%8:: ::%9:: 
```

*汞显示配置 | grep extdiff*返回预期结果（在其他几行中）

```
extdiff.cmd.fdiff0="e:/Program Files/DbCmp/FdbCmp.bat"  
extdiff.opts.fdiff0=$root --file $local --file $other  
extensions.hgext.extdiff= 
```

*hg fdiff0*返回 $? = 0（cygwin bash 或 CMD.EXE）并且不显示输出。我预计 FdbCmp.bat 文件会打印一些东西。

*hg fdiff0 abc*（其中文件 a、b、c 不存在）返回以下内容。这是预期的，因为文件不存在并且 Hg 报告了这一点。

```
a: The system cannot find the file specified  
b: The system cannot find the file specified  
c: The system cannot find the file specified 
```

*hg fdiff0 file1 file2 file3*所有文件都存在的地方返回没有错误也没有输出。这是出乎意料的 - FdbCmp.bat 应该已经被调用并打印了它的东西。

仅测试 .bat 文件就可以得到预期的结果：
$ *FdbCmp.bat moo cow oink pig*

```
FdbCmp.bat testing  
FdbCmp.bat args: ::moo:: ::cow:: ::oink ::pig:: :::: :::: :::: :::: :::: 
```

hg --version 是 2.4.6-35ba170c0f82

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T03:05:10.887

我想，您必须重新阅读[“Extdiff 扩展”](https://www.mercurial-scm.org/wiki/ExtdiffExtension)维基页面

无论如何，如果你想使用而不是类似的`hg diff FILE1 FILE2`东西`hg fdiff FILE1 FILE2`来区分，你有（见差异）

*   添加到全局 mercurial.ini（或项目的 .hgrc）

`[extensions]`

`hgext.extdiff =`

（也许只是`extdiff =`，必须测试）

*   在文件中创建新`[exdiff]`部分，并在此部分中为外部差异和命令选项定义新命令（带有 3 个文件的差异？？？），可能像这样（FdbCmp.bat 添加到 PATH）

`cmd.fdiff = FdbCmp.bat`

`opts.fdiff = $0 --file $1 --file $2`

对于我上面的示例导致命令

`hg fdiff /PATH/TO/ B C`

必须在幕后产生结果

`FdbCmp.bat /PATH/TO/ --file B --file C`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-11T21:33:03.930

重新阅读文档的 extdiff 部分显示选项“将插入到程序名称和文件/目录之间的命令中以进行比较”，这与合并工具行为不同，其中选项和文件可以根据需要混合建立一个适当的命令行。$local, $root, ... 变量在 extdiff 的上下文中不存在；它们是此处不适用的合并工具功能。

现在相关的 mercurial.ini 部分是

```
[extensions]
# enable the extdiff extension
hgext.extdiff =

[extdiff]
# define a jpeg differencing script; no options required
cmd.jpgdiff = HgJpgDiff.bat
# HgJpgDiff.bat is in a directory in my $PATH and contains:
# @rem ... various lines to test if we have been handed directories or files to compare
# @rem ...we only compare files, so this is the only active line
# JpgDiff --file %1 --file %2

[diff-patterns]
**.jpg=jpgdiff 
```

现在所有工作都按要求进行。将参数回显到文件有助于调试；屏幕上什么也没有显示。

非常感谢。

# c# - 扩展 VS2010 表单设计器上下文菜单

> ID：14740514
> 
> 赞同：2
> 
> 时间：2013-02-06T22:58:56.320
> 
> 标签：c#, visual-studio-2010, menu, add-in, designer

我正在尝试在 Visual Studio 2010 表单设计器的上下文菜单中添加一个项目。

到目前为止，我有一个插件项目，它检索表单设计器的 IDesignerHost、IDesigner 等表示。这些界面似乎都没有公开与上下文菜单相关的任何内容。我还尝试为设计器站点检索 IMenuEditorService，但这没有任何关联的项目。

我还尝试遍历窗口 DTE 中的所有 CommandBar 项目（如[Visual Studio 2010 Plug-in - 添加上下文菜单到编辑器窗口](https://stackoverflow.com/questions/11709274/visual-studio-2010-plug-in-adding-a-context-menu-to-the-editor-window)），同样，这些似乎都不代表表单设计器上下文菜单。

是否有捷径可寻？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-07T05:22:24.403

动词出现在设计器菜单和控件属性中。如果将动词添加到设计器对您来说就足够了，那么您可以这样做：

```
DesignerVerb _verb;
_verb = new DesignerVerb("Do something", OnConvertClick);

var designer = _designerHost.GetDesigner(comp);
if (!designer.Verbs.Contains(_verb))
  designer.Verbs.Add(_verb);

void OnConvertClick(object sender, EventArgs e)
{
   MessageBox.Show("Hello world!");
} 
```

# php - 使用php隐藏模板中特定页面的滑块

> ID：14740519
> 
> 赞同：0
> 
> 时间：2013-02-06T22:59:21.173
> 
> 标签：php, html, hide

我正在使用 TomatoCart 建立一个在线商店。该平台使用模板系统。

我使用了一个具有 HTML、CSS 和 JavaScript 的滑块。安装非常简单，并且在网站上显示得很好。

问题是它现在显示在所有页面上，并且只在索引页面上是必需的。我环顾四周，似乎有一种方法可以通过 php 做到这一点。

在这个项目之后，我将学习 php 作为我的使命，但与此同时，任何人都可以向我解释如何使滑块仅在一页上可见，而不是全部。它保存在 div 中，文件名为 index.php

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T00:50:30.757

```
<?php
if (strpos($_SERVER['SCRIPT_NAME'], 'index.php') !== false) 
{
// add the slider  code here
}
?>

Here we just check if the page is index.php or not.  If it is it will execute the code within the if condition.

Regards
Abnab 
```

# android - API 中的 GridView 填充小于 10

> ID：14740522
> 
> 赞同：4
> 
> 时间：2013-02-06T22:59:27.757
> 
> 标签：android, gridview

我需要 GridView 而不在 Android API 中填充小于 10。我的布局：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
tools:context=".MainActivity" >

<GridView
    android:id="@+id/grid"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentBottom="true"
    android:layout_alignParentLeft="true"
    android:layout_alignParentRight="true"
    android:layout_alignParentTop="true"
    android:alwaysDrawnWithCache="true"
    android:background="@color/gridview_background"
    android:clipChildren="true"
    android:horizontalSpacing="1dp"
    android:numColumns="6"
    android:verticalSpacing="1dp" /> 
```

结果：

![在此处输入图像描述](../Images/847c053f766f8abeae6a9e449b7a66c2.png)

红色箭头显示在填充上。它只在 Android < 3.0 我需要的结果

![在此处输入图像描述](../Images/35b6563dc6db9e07c8c9814ac971ef68.png)

没有填充。

PS 在 android 3.0 上完全相同的代码没有填充。这是为什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-03T08:04:12.200

我几乎找不到答案=）。在 2.x Android 中，样式是您的 listSelector，而 4.x. 在 4.x 上他可能是空的，而 2.x 则比这还要多，并在吠叫上填写他需要放置的属性：

```
android: listSelector="@null" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T04:07:50.197

我建议在 4.x SDK 下编译以获得您想要的行为，但包括您想要在 minSDK 中支持的设备。

我*不*建议使用 10 级/Android 3.0，因为 Honeycomb 只是 Android 的平板电脑化身。您可能希望以 API 级别 14 为目标，并且 minSDKVersion 为 8-10。

# javascript - 主干嵌套集合

> ID：14740526
> 
> 赞同：1
> 
> 时间：2013-02-06T22:59:41.493
> 
> 标签：javascript, web-applications, backbone.js

我正在尝试填充模型内部的嵌套集合，并在另一个集合中填充最后一个模型。代码如下

```
App.Models.Bed = Backbone.Model.extend();

App.Collections.Beds = Backbone.Collection.extend({
model: App.Models.Bed,
initialize: function(models, options){
    this.room = options.room;
}
});

App.Models.Room = Backbone.Model.extend();

App.Collections.Room = Backbone.Collection.extend({
url: 'rooms/',
initialize: function(){
    this.on('reset', this.getBeds, this);
},

getBeds: function(){
    this.each(function( room ){
        room.beds = new App.Collections.Beds([], { room: room});
        room.beds.url = 'rooms/' + room.id + '/beds';
        room.beds.fetch();
        console.log(room.beds.toJSON());
    });
}
}); 
```

现在，如果我执行：

```
var rooms = new App.Collections.Room();
rooms.fetch();
rooms.toJSON(); 
```

它只给了我居住的房间，但每张床上都没有床位。有线的事情是它向 /rooms/1/beds 的服务器发出请求，然后我取回每张床。

它是否填充了床系列？难道我做错了什么？

谢谢你的时间伙伴。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T23:23:06.530

看起来你需要传递`Room Model`给`Room Collections`.

# python-2.7 - 将 Tkinter 事件时间转换为系统时间

> ID：14740529
> 
> 赞同：0
> 
> 时间：2013-02-06T22:59:50.933
> 
> 标签：python-2.7, tkinter

我正在尝试查看最近`Event`发生的事件（以便我可以忽略在处理第一个事件时积压的事件。）我看到事件具有`time`以毫秒为单位的属性，但它与我从调用中获得的系统时间`time.time()`。有谁知道如何在两者之间转换？谢谢！

## 例子

```
from Tkinter import Tk, Label
from time import time

def print_fn(event): print event.time, time()

app = Tk()
label = Label(app, text='Click Here!')
label.bind('<Button>', print_fn)
label.pack()
app.mainloop() 
```

## 输出

```
1430467703 1360190553.41 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T06:10:29.657

*event.time*属性对于确定两个*Tkinter*事件之间的时间很有用。

[*事件时间*](http://infohost.nmt.edu/tcc/help/pubs/tkinter/web/event-handlers.html)

> 该属性设置为一个没有绝对意义的整数，但每毫秒递增一次。例如，这允许您的应用程序确定两次鼠标单击之间的时间长度。

[*时间.时间*](http://docs.python.org/2/library/time.html?highlight=time#time.time)

> 以浮点数形式返回自纪元以来的时间（以秒为单位）。请注意，尽管时间始终以浮点数形式返回，但并非所有系统都提供比 1 秒更好的时间精度。虽然此函数通常返回非递减值，但如果系统时钟已在两次调用之间调回，则它可以返回比先前调用更低的值。

为了测量已经过去了多少时间，我们通常使用[*time.time*](http://docs.python.org/2/library/time.html?highlight=time#time.time)或[*time.clock*](http://docs.python.org/2/library/time.html?highlight=time#time.clock)，如下所示：

```
start = time.clock()
somefunction()
elapsed = time.clock() - start 
```

您根本不必使用*event.time*。

可以在此处找到有关此的更多信息：[链接](https://stackoverflow.com/q/85451/1217270)

# jquery - Internet Explorer , Jquery $.post

> ID：14740531
> 
> 赞同：1
> 
> 时间：2013-02-06T22:59:53.203
> 
> 标签：jquery, internet-explorer, post

```
$.post("example.php",function(data){
    alert(data); // result: undefined
}) 
```

**例子.php**

```
hello ie are you ok? 
```

为什么`alert(data)`在 IE 中未定义？它适用于其他浏览器。

# java - 需要一些帮助才能通过 setText 问题将变量从 Fragment X 传递到 Fragment Y

> ID：14740533
> 
> 赞同：0
> 
> 时间：2013-02-06T23:00:02.387
> 
> 标签：java, android, settext

希望你一切都好，恭喜你的工作！场景：我有 3 个片段文件，Pagegauchefragment、PageMilieufragment 和 PageDroiteFragment，由 2 个文件 FragmentsSliderActivity 和 MyPagerAdapter 管理。第一个和第二个是带有 EditText 的数据字段，由用户填写。最后一个是保存数据用户文件的 ListView。从列表视图（最后一个片段）中，用户以 3 种可能性单击文件：1\. 导入文件 / 2\. 删除文件 / 3\. 取消（我使用操作栏过程来保存数据）。现在的问题：我无法将我的数据刷新（使用 setText）传递给其他片段。日志：标签：IIputConnectionWrapper / 文本：非活动 InputConnection 上的 getSelectedText，非活动 InputConnection 上的 setComposingText。

```
 View W =inflater.inflate(R.layout.page_droite_layout,container, false);
     this.mListView = (ListView) W.findViewById(R.id.ListView01);
     ArrayAdapter<String> adapter = new ArrayAdapter<String>(this.getActivity(), android.R.layout.simple_list_item_1, tabRevues);
     this.mListView.setAdapter(adapter);

     this.mListView.setOnItemClickListener(new OnItemClickListener() {           

        @Override
            public void onItemClick(AdapterView<?> parent, View view,
                    int position, long id) {
             View WW =inflater.inflate(R.layout.page_gauche_layout,container, false);
             file_name = (EditText) WW.findViewById(R.id.label_LiquidBase);

             //int item = position;
             item_name = ((TextView)view).getText().toString();
             AlertDialog.Builder ad = new AlertDialog.Builder(getActivity());               

             ad.setTitle("Selection Recettes : " + item_name);
             ad.setMessage("Que souhaitez-vous faire ?");

             ad.setPositiveButton("Importer", 
                     new DialogInterface.OnClickListener() {

                        public void onClick(DialogInterface dialog, int id) {                           
                            try { 
```

在这里，我将文本传递给 setText（例如）：

```
file_name.setText("blahblah"); 
```

我想我在一个 Void 方法中，但我不知道如何传递变量......任何帮助都将不胜感激！克里斯托弗

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T23:13:32.077

从不建议在 Fragment 之间直接传递数据。相反，将数据从 Fragment X 传递到 FragmentsSliderActivity，FragmentsSliderActivity 会将这些数据传递到 Fragment Y。您可以通过在 Fragment 类中定义的接口来执行此操作，并实例化在 onAttach() 中定义的回调。

有关如何在此处执行此操作的更多信息 [与其他片段的通信](http://developer.android.com/training/basics/fragments/communicating.html)

快速示例，考虑片段 A 和片段 B。片段 A 是一个列表片段，无论何时选择一个项目，它都会改变片段 B 中显示的内容。很简单，对吧？

首先，这样定义片段 A。

```
 public class FragmentA extends ListFragment{

   //onCreateView blah blah blah

} 
```

这是片段 B

```
public class FragmentB extends Fragment{

 //onCreateView blah blah blah

} 
```

这是我的 FragmentActivity 将管理它们

```
public class MainActivity extends FragmentActivity{

//onCreate 
//set up your fragments

} 
```

大概您已经有了类似的东西，现在这里是您将如何更改 FragmentA（我们需要从中获取一些数据的列表片段）。

```
 public class FragmentA extends ListFragment implements onListItemSelectedListener, onItemClickListener{

OnListItemSelectedListener mListener;

   //onCreateView blah blah blah

 // Container Activity must implement this interface
    public interface OnListItemSelectedListener {
    public void onListItemSelected(int position);
}

}

  @Override
  public void onAttach(Activity activity) {
    super.onAttach(activity);

    // This makes sure that the container activity has implemented
    // the callback interface. If not, it throws an exception
    try {
        mListener = (OnListItemSelectedListener) activity;
    } catch (ClassCastException e) {
        throw new ClassCastException(activity.toString()
                + " must implement OnListItemSelectedListener");
    }
}

  @Override 
 public void onItemClick(AdapterView<?> parent, View view, int position, long id){

 //Here's where you would get the position of the item selected in the list, and  pass    that position(and whatever other data you need to) up to the activity 
//by way of the interface you defined in onAttach

  mListener.onListItemSelected(position);

} 
```

这里最重要的考虑是你的父Activity实现了这个接口，否则你会得到一个异常。如果成功实施，每次选择列表片段中的项目时，都会通知您的 Activity 其位置。显然你可以用任意数量或类型的参数来改变你的接口，在这个例子中我们只是传入我们的整数位置。希望这能澄清一点，祝你好运。

# ios - Xcode - 更改捆绑标识符但不更改产品名称

> ID：14740538
> 
> 赞同：13
> 
> 时间：2013-02-06T23:00:31.027
> 
> 标签：ios, xcode

我的包标识符必须与 iOS 开发门户中的标识符匹配：

com.mydomain.myappname

在 Xcode 中执行此操作的唯一方法似乎是转到 Targets，Build Settings，并将 Product Name 更改为 myappname。但是，这也会导致应用程序在设备主屏幕（图标下方）上被称为“myappname”。我知道必须能够以不同的方式设置。（我希望显示“我的应用程序”而不是“myappname”）。我在哪里设置这个？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-02-06T23:03:13.200

您在 Xcode 的 Build Settings 中将此设置为“产品名称”。您想在应用程序的 info.plist 文件中设置捆绑标识符。

Info.plist 中的包标识符可以包含占位符变量，例如 ${PRODUCT_NAME}。编译应用程序时，这些占位符变量将替换为构建设置中的值。使用 plutil 查看 .app 包中 Info.plist 的编译版本。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-11-20T15:54:40.937

在 info.plist 文件中设置了“Bundle identifier”和“Bundle display name”。“捆绑显示名称”是主屏幕上的应用程序图标显示的内容。它们可以使用占位符值，例如 ${PRODUCT_NAME} 或 ${PRODUCT_NAME:rfc1034identifier}，或者您可以显式设置它们。“产品名称”在构建设置中设置。您可以首先按照您想要的方式设置“产品名称”，然后通过编辑 info.plist 文件来调整或覆盖派生值。

听起来您要做的是将产品名称设置为“myappname”，将捆绑标识符保留为“com.mydomain.${PRODUCT_NAME:rfc1034identifier}”，然后将捆绑显示名称设置为“我的应用” ”。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-10-17T13:05:18.713

我所做的是在“构建设置>产品名称”中放入匹配的包标识符名称。然后在“信息 > 捆绑显示名称”中键入实际的应用程序名称。覆盖 ${PRODUCT_NAME} 变量并键入确切的“我的应用程序”。这可以解决问题。

# iphone - 如何创建自定义 UIViewController 过渡动画？

> ID：14740545
> 
> 赞同：2
> 
> 时间：2013-02-06T23:01:17.353
> 
> 标签：iphone, ios, animation, uiviewcontroller

这个问题似乎被问了很多，但我从来没有找到一个明确的答案来确定是否可以像 UIKit 一样进行自定义转换。

我知道你可以做一些技巧，比如截取当前视图和即将到来的视图，然后在你更改动画下的视图控制器时为它们设置动画。但是，这需要相当多的内存，因为您基本上有 2 个额外的完整屏幕值得绘制（因为屏幕截图）。

我正在寻找一种更优雅的方式来呈现带有自定义动画的视图控制器。或者，是否有一种更节省内存的方法来执行上述方法？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-06T23:40:35.490

有几种方法可以实现这一点，具体取决于您想要转换的方式，您的控制器是否嵌入到容器控制器中等。在最简单的情况下，您有一个控制器，并且您想要转换到另一个控制器，您可以通过以下步骤完成：

1.  实例化新的控制器（我们称它为 B，而原来的控制器是 A）
2.  添加 B 的视图作为窗口的子视图（来自 self.view.window）
3.  将 B 的框架设置为在您想要的任何方向上离开屏幕，或者使其 alpha 为 0，或者使其大小为零，具体取决于您想要的过渡类型。
4.  使用 animateWithDuration:animations:completion: remove A's view (在完成块中) 做任何你想要的转换
5.  在完成块中，使 B 成为窗口的根视图控制器

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-15T17:24:04.727

本质上，您正在让系统自动保留和释放，以及在概述的调用 rdelmar 的答案下方发生的任何事情。转换视图控制器只是为视图设置动画，同时让系统将控制器保存在内存中。

但是，为了回答您的更多问题，UIView 动画也会创建副本并缓存图像。（顺便说一句，系统缓存不会卸载其内存，因此请避免使用 UIImage imageNamed。

如果您想要提高效率，您可能会想使用计时器自己编写代码，并鼓起您能想到的所有图形技巧。

And never, ever trust iOS to work the same way it did the last version. Everything I said is subject to being wrong the same way iOS 6 broke retain on annotating, and the manuals stated iOS 3 animations will become obsolete (and are now replaced instead?) gah, just saying be careful with efficiency, it may be broken or updated in the somewhat distant future if you try it.

# php - 在 PHP 和 MYSQL 中设置用户权限

> ID：14740551
> 
> 赞同：1
> 
> 时间：2013-02-06T23:01:46.850
> 
> 标签：php, mysql, session, privileges

我想让某些用户可以访问我的一些 php 页面。我在“user_privilege”属性中将用户表中的这些用户标记为“super_user”。太胖了，我的登录和会话工作正常。但我不确定“super_user”只有页面。基本上这是我想让超级用户可以访问的页面：

```
<?php
require_once('../includes/su_permission.inc.php');
require_once('../includes/session_timeout_db.inc.php');
?>
<!DOCTYPE HTML>
<html>
<head>
<meta charset="utf-8">
<title>Secret page</title>
</head>

<body>
<h1>Restricted area</h1>
<p><a href="menu_db.php">Back to restricted menu</a> </p>
<?php include('../includes/logout_db.inc.php'); ?>
</body>
</html> 
```

session_timeout_db.inc.php 文档检查用户的会话是否已过期并且工作正常。我还添加了这个：require_once('../includes/su_permission.inc.php'); 在代码中检查用户是否是超级用户。这是我对代码的尝试：

```
<?php
require_once 'login.php';
$conn = new mysqli ($host, $user, $password, $database) or die("Connection Failed");

$sql = 'SELECT user_role FROM users WHERE user_email = ?';

$stmt = $conn->stmt_init();
$stmt->prepare($sql);

$stmt->bind_param('s', $user_email);

$stmt->bind_result($user_role);
$stmt->execute();
$stmt->fetch();

if ($user_role='SU') {
  $_SESSION['privilege_level'] = $user_role;

// some other code needed here
  exit;
} else {
  echo 'No permission to visit this page';
} 
```

我知道这是一个糟糕的尝试，但我不确定从这里还能做什么。有人可以建议我能做到这一点的最佳方法吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T23:16:18.317

这是你的问题：

```
if ($user_role='SU') { 
```

您需要一个适当的比较运算符（`==`或`===`）。您现在正在做的是在所有情况下都为`SU`to分配一个值。`$user_role`

避免此类问题的一个轻微编程建议是翻转到如下比较顺序：

```
if ('SU' == $user_role) { 
```

这样，如果您不小心输入`=`了`==`or `===`，您将得到一个错误输出，而不是让您的代码在执行您不希望它执行的操作时安静地运行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-07T14:19:22.070

我在我正在处理的网站上做了类似的事情。我为不同的用户“类型”设置了三个不同的区域。

然后我为页面组设置了 3 个不同的会话检查文件。我确信这可以只使用一个文件和一些 elseifs 来完成，但无论如何。无论如何，这是我在页面上使用的代码片段，用于检查用户是否登录，以及他们是否是查看页面的正确“类型”用户：

```
if (isset($_SESSION['authenticated']) && $_SESSION['authenticated'] !== 'admin') {

//if (!isset($_SESSION['authenticated'])) {
  header("Location: $redirect");
  exit; 
```

如果他们不正确，它会重定向他们。我希望这会有所帮助。

# .net - 安全测试作为持续集成的一部分？

> ID：14740558
> 
> 赞同：1
> 
> 时间：2013-02-06T23:02:01.220
> 
> 标签：.net, security, continuous-integration, xss, sql-injection

我们已经有一个持续集成过程，我们在其中构建、运行单元测试、进行静态代码分析和生成文档。但是，我们希望将其扩展为包括自动安全测试。在这种情况下，我们正在开发一个 .NET Web 应用程序，所以我认为必须有一些 XSS 和 SQLi 扫描器在 CI 设置中特别好（通过命令行调用初学者），并且可能进行一些静态代码分析专注于安全的工具。

那么，您是否将自动安全测试作为 CI 的一部分？你测试什么，你使用哪些工具？你的经历是怎样的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T17:44:53.057

我们现在正在使用 ZAP 在 Mozilla 中执行此操作，并且我正在与也在以相同方式使用它的其他各种公司合作。

[维基](http://code.google.com/p/zaproxy/wiki/SecRegTests)上有一些信息，包括视频。

基本上你：

1.  以守护程序模式启动 ZAP（无 UI）
2.  代理您通过它进行的任何功能测试
3.  使用 REST API 运行爬虫来覆盖你的测试没有覆盖的东西
4.  运行活动扫描仪
5.  检索任何警报，然后使构建失败（如果相关）

您可以直接或通过 Java 或 Python 客户端访问 REST API。如果您想要其他语言的客户并且可以提供帮助，那么我们可以解决这个问题。

在这方面还有很多工作要做（尤其是文档；）但它对我们（尤其是我）来说是一个高度优先事项。由于这有点前沿，我们倾向于在[ZAP 开发人员组](http://groups.google.com/group/zaproxy-develop)中讨论它，但我也很高兴在这里讨论它。

请注意，ZAP 不进行任何静态代码分析，但您也可以对此进行调查。

西蒙（ZAP 项目负责人）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T13:13:55.480

在这一点上我的想法是看看[w3af](http://w3af.org/)和[OWASP Zed](https://www.owasp.org/index.php/OWASP_Zed_Attack_Proxy_Project)

# javascript - 如何使用 Bing Maps Ajax Control 6.3 绘制圆圈？

> ID：14740559
> 
> 赞同：0
> 
> 时间：2013-02-06T23:02:08.173
> 
> 标签：javascript, ajax, bing-maps

我一直在寻找解决方案，但没有成功，我想做的是通过指定半径和中心，在地图上画一个圆。用于形状的Bing Maps Ajax Control 6.3[文档](http://msdn.microsoft.com/en-us/library/bb412535.aspx)不包括圆形。有没有办法在地图上画圆圈？

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T07:38:00.147

您应该查看 Mike Garza 的博客 (Garzilla)，该博客围绕您的需求创建了非常有趣的示例：[http ://www.garzilla.net/vemaps/CircleDragHandle.aspx](http://www.garzilla.net/vemaps/CircleDragHandle.aspx)

以下是生成圆圈位置的示例代码：

```
function buildCircle(latin, lonin, radius) {
    var locs = new Array();
    var lat1 = latin * Math.PI / 180.0;
    var lon1 = lonin * Math.PI / 180.0;
    var d = radius / 3956;
    var x;
    for (x = 0; x <= 360; x+=10) {
        var tc = (x / 90) * Math.PI / 2;
        var lat = Math.asin(Math.sin(lat1) * Math.cos(d) + Math.cos(lat1) * Math.sin(d) * Math.cos(tc));
        lat = 180.0 * lat / Math.PI;
        var lon;
        if (Math.cos(lat1) == 0) {
            lon = lonin; // endpoint a pole 
        }
        else {
            lon = ((lon1 - Math.asin(Math.sin(tc) * Math.sin(d) / Math.cos(lat1)) + Math.PI) % (2 * Math.PI)) - Math.PI;
        }
        lon = 180.0 * lon / Math.PI;
        var loc = new VELatLong(lat, lon);
        locs.push(loc);
    }
    return locs;
} 
```

这里的代码将其添加到地图上并使用以前的方法：

```
//Build circle        
circle = new VEShape(VEShapeType.Polygon, circlePoints);        
circle.HideIcon();        
circle.SetLineWidth(2);        
map.AddShape(circle); 
```

# jquery - div刷新时的jQuery可排序

> ID：14740560
> 
> 赞同：1
> 
> 时间：2013-02-06T23:02:09.823
> 
> 标签：jquery, jquery-ui, jquery-ui-sortable

我有一个带有 jQ​​uery 可在行上排序的表。该表在一个 div 中，每一行代表一个志愿者工作。下面是可排序的代码。

```
function JobSort () {
    $(".su-jsort").sortable({
        items: "> tbody tr.su-jsortitem",
        handle: '.su-jsorthandle',
        update: function () {
            var order = $(this).sortable('toArray');
            $.ajax({
                url: '/app/volunteerschedule/jobsort/' + $(this).attr("data-purl"),
                data: { sectionorder: order },
                type: 'POST',
                traditional: true
            });
        }
    });
    $("#su-sections").disableSelection();
} 
```

当用户单击以添加新的志愿者工作行时，ajax 调用将包含表格的 div 替换为表单。当用户保存表单时，它会使用更新的表刷新 div。

Sortable 在页面加载时有效，但在添加新作业后无效。我已经尝试过可排序的“刷新”，并且正在考虑隐藏表格并通过可排序附加行。在我重新编写代码之前，有没有解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T11:08:37.970

Destroyed 一旦被放置在桌子被移除之前就可以工作。

# c++ - decltype::static_member C++

> ID：14740561
> 
> 赞同：1
> 
> 时间：2013-02-06T23:02:17.997
> 
> 标签：c++, templates, reflection, decltype

正如标题所示，我试图使用 decltype 来获取模板的类型。我尝试的方法是：

```
template<typename T> class List
{
....
public:
    typedef T type;
....
}; 
```

主程序

```
int main(int argc, char* argv[])
{
    List<int> intl;
    decltype(intl)::type t;  // compiler doesnt try to access the decltype's members but reverts to global namespace (as if i had typed :: on a new line
} 
```

我的印象是 decltype 返回一个类型，就好像你乱写它一样（在代码中也称为“int”）。不是这样吗？

另外，还有其他方法可以从模板类中获取类型名 T 吗？

提前致谢。

扩展：

```
 List<int> intl;
typedef decltype(intl) listtype;
listtype::type i; 
```

我是一个无符号整数……我很困惑

好的，找到了。1 中的 WOO 2 编译器错误 :) 我有一个声明 unsigned int 的 for 循环（然后超出范围，但由于某种原因，当我稍后使用它时它仍然是 unsigned int

# r - R新手：如何从一组坐标向量创建一个数组？

> ID：14740563
> 
> 赞同：0
> 
> 时间：2013-02-06T23:02:23.433
> 
> 标签：r, vector, multidimensional-array, coordinates

假设我在 3D 空间的不同位置进行了一组测量。测量的位置具有坐标向量

```
x <- c(0,1,2,3)
y <- c(4,5,6)
z <- c(7,8) 
```

因此，例如，最接近原点的测量是在 location= 完成的`(0,4,7)`。从上面的坐标向量中，我想创建一个 3D 数组——而且只有一个数组。@bnaul：这些是体素中心的坐标，我想为其赋值。我的意图是，在 pcode 中，

```
arr <- magic( c(0,1,2,3) , c(4,5,6) , c(7,8) )
# arr is now a 3D array filled with NAs
value1 -> arr[0, 4, 7]
value2 -> arr[3, 5, 7]
# and so on, but if one does
valueBad -> arr[4,3,2] # one should get an error, as should, e.g.,
valueBad2 -> arr[3,4,5] 
```

但我怀疑我已经“在 NetCDF 中思考”太久了：基本上我上面想做的是将[坐标](http://www.unidata.ucar.edu/software/netcdf/docs/BestPractices.html#Coordinate%20Systems)分配给一个数组，我不相信在 R 中可以做到这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T23:17:34.237

```
# starting data
x <- c(0,1,2,3)
y <- c(4,5,6)
z <- c(7,8)

# find every combo
w <- expand.grid( x , y , z )

# convert to a matrix
v <- as.matrix( w )

# view your result
v 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T23:32:05.750

或者，这也可能有所帮助。请澄清您想要的结果:)

```
# starting data
x <- c(0,1,2,3)
y <- c(4,5,6)
z <- c(7,8)

# create a 4 x 3 x 2 array
v <- 
    array( 
        # start out everything as missing..
        NA , 
        # ..and make the lengths of the dimensions the three lengths.
        dim = 
            c( length( x ) , length( y ) , length( z ) ) 
    )

# view your result
v

# now populate it with something..
# for now, just populate it with 1:24
v[ , , ] <- 1:length(v)

# view your result again
v 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-07T00:28:26.900

```
 array(NA, dim=c(4,3,2), 
   dimnames=list( x = c(0,1,2,3),
     y = c(4,5,6),
     z = c(7,8) ) )
, , z = 7

   y
x    4  5  6
  0 NA NA NA
  1 NA NA NA
  2 NA NA NA
  3 NA NA NA

, , z = 8

   y
x    4  5  6
  0 NA NA NA
  1 NA NA NA
  2 NA NA NA
  3 NA NA NA 
```

# android - Android 处理吉他调音器的音频

> ID：14740567
> 
> 赞同：12
> 
> 时间：2013-02-06T23:02:38.793
> 
> 标签：android, audio, signal-processing

处理音频的最佳方法是什么，以便我可以输出正在播放的音符？我正在为大学作业创建吉他调音器，并且我是 Android 开发的新手。

我已经看过关于从 Google API 录制声音的 Android 示例，但我想知道从那里去哪里？

我知道我必须进行傅立叶变换或其他操作才能获得频率，只是想知道是否有人对如何做到这一点有任何建议？

一旦我们可以在屏幕上显示正确的频率，我们将完成大部分项目。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-09T00:55:18.247

如果您从未做过 Android 开发，并且在数字信号处理和傅里叶变换方面几乎没有经验，那么您将面临一个艰巨的挑战。

另一方面，如果您可以按照 anthropomo 建议的那样使用现有的库来完成作业，那么您可能会有很好的机会完成它。

但是，如果您的教授不允许您使用现有的库，您将需要解决以下难题：

您的程序如何自动找到正在播放的音符的基频？看看这个真正的古典原声吉他演奏 E2 音符的频率/频率分贝幅度图。观察到基频 (82.4 Hz) 比一次谐波低约 17 分贝 (17 dB)（一次谐波为 164.8 Hz）。

![GuitarE2frequency_decibelMagnitude](../Images/2b4d94aaefd6e7e44cb10765f7ab8890.png)

下面是同一图的特写，您可以更清楚地看到基本峰值：

![GuitarE2frequency_decibelMagnitudeCloseup](../Images/101ac958960a15761a07628774c8e32b.png)

基频比一次谐波衰减 17 dB，这是一个很大的衰减。下面是相同的 E2 音符频谱，但现在它绘制在线性频率幅度轴上（垂直轴现在是线性频率幅度而不是分贝频率幅度）。现在您可以更清楚地看到基频峰值实际低于一次谐波有多远。

![GuitarE2frequency_linearMagnitude特写](../Images/b2fdd0a09ee16671fd9924f1eb76b449.png)

您的程序必须自动检测 82.4 Hz 的 17 dB 衰减基波，但是在您的程序无法提前知道用户在他的吉他上弹奏哪个音符的一般情况下，您如何做到这一点？

上述频谱适用于古典原声吉他上的 E2。钢弦吉他上 E2 的频谱有何不同？放大电吉他上的 E2 怎么样？您的程序将如何处理这些不同光谱之间的差异？

问题不是微不足道的。问题是你有多少时间来完成这项作业，以及你的教授认为什么是已完成的作业。

这篇参考给出了更深入的理解：[乐器频谱到 102.4 KHz](http://www.cco.caltech.edu/~boyk/spectra/spectra.htm)

您可以在此处绘制频谱并听到 E2 到 Bb5 的吉他音符：[乐器频谱](https://sooeet.com/music/musical-instrument-spectrum.php)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-07T07:46:41.680

不要使用裸 FFT 幅度或其他频率峰值估计器。对于大多数吉他的低音弦，它们会给您带来非常糟糕/错误的结果。音高是人类的心理声学感知现象，通常与 FFT 频率不同（除了纯正弦音，不像真正的弦乐器产生的音）。

谷歌“音高检测”和“音高估计”方法代替。一些可能性包括加权自相关、AMDF、ASDF、倒谱/倒谱分析、谐波乘积频谱分析以及诸如 RAAPT 和 YAPT 之类的复合算法。关于其中一些估计算法的几篇学术论文的参考资料可能在我的网页上： http: [//www.nicholson.com/rhn/dsp.html#1](http://www.nicholson.com/rhn/dsp.html#1)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-02-07T00:22:04.237

如果您的讲师同意您使用库进行音频处理，这里是使用 libpd 的完整 android 吉他调音器应用程序的源代码：

[https://github.com/nettoyeurny/Making-Musical-Apps/tree/master/android/GuitarTuner](https://github.com/nettoyeurny/Making-Musical-Apps/tree/master/android/GuitarTuner)

要使用它，您还需要学习 Pure Data 音频合成编程语言的基础知识。调谐器所需的工具并不太广泛，并在上述应用程序中进行了布局。显然，您需要做一些工作才能使这成为您自己的工作。

这是使用纯数据的一个很好的介绍：

[http://en.flossmanuals.net/pure-data/](http://en.flossmanuals.net/pure-data/)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-02-26T08:24:30.857

吉他特纳应用的好例子。使用 Jtransfrom。

[https://github.com/nivwusquorum/Simple-Guitar-Tuner](https://github.com/nivwusquorum/Simple-Guitar-Tuner)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-06T23:40:10.810

本文对您可能使用的音高检测算法进行[了](http://dafx10.iem.at/proceedings/papers/VonDemKnesebeckZoelzer_DAFx10_P102.pdf)全面评估。

如前所述，自相关是一种易于实现的方法，但不是特别准确——尤其是在经常缺少基频的现实世界乐器信号上。FFT 方法需要大量的后处理。

我怀疑对于大学作业，您最好使用一个并不总是准确的完整工作系统，而不是一个不完整的准确系统。

# jquery - 在 jQuery 中使用 $.when 获取延迟调用

> ID：14740569
> 
> 赞同：0
> 
> 时间：2013-02-06T23:02:41.330
> 
> 标签：jquery

我正在尝试在内部进行 jQuery AJAX 调用，`$.when()`以便在收到回调时执行其他操作。但不幸的是，我没有从我正在调用的方法中获得回调，该方法成功进行了 AJAX 调用。以下是代码...

```
/****** Code which calls the function ******/

var pathString = "/Cities?state=" + whichState;

$.when(makeAJAXRequest(pathString)).done(function(data)
{
    alert(data);                  //Shows undefined

    //Other operations ..... 
}

/****** My function which makes the AJAX call ******/

function makeAJAXRequest(pathString)
{

$.ajax({
        type:'GET',
        async:'false',
        cache:false,
        url:'./proxy.php',
        data:{path:pathString},         //Can put the query-string in the path. But if put in data attribute, it will work with both GET and POST
        dataType:'xml',
        success:function(data)
        {
    //alert(data);

    return data;
    },
    error:function(xhr, textStatus, errorThrown)
    {
    alert("Error in AJAX request: " + textStatus + errorThrown);

    return ("Error in AJAX request: " + textStatus + errorThrown);
    }
});

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T23:11:36.810

问题是您实际上并没有在 makeAjaxRequest() 方法中返回延迟对象。

它应该是这样的：

```
function makeAJAXRequest(pathString) {
    var deferred = new $.Deferred();
    $.ajax({
        type:'GET',
        async:'false',
        cache:false,
        url:'./proxy.php',
        data:{path:pathString}
        dataType:'xml',
        success:function(data) {
            // Deferred object success
            return deferred.resolve(data);
        },  
        error:function(xhr, textStatus, errorThrown) {
            alert("Error in AJAX request: " + textStatus + errorThrown);
            // Deferred object reject
            return deferred.reject("Error in AJAX request: " + textStatus + errorThrown);
        });
    return deferred.promise();
    } 
```

请仔细查看延迟文档：[http ://api.jquery.com/category/deferred-object/](http://api.jquery.com/category/deferred-object/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T23:22:52.580

在`makeAJAXRequest()`中，您只需要返回`$.ajax`一个`jqXHR`对象[http://api.jquery.com/jQuery.ajax/#jqXHR](http://api.jquery.com/jQuery.ajax/#jqXHR)

```
function makeAJAXRequest(pathString) {
    return $.ajax({
    // ...
    });
} 
```

# java - 最大化后JFrame宽度等于0

> ID：14740570
> 
> 赞同：-5
> 
> 时间：2013-02-06T23:02:42.503
> 
> 标签：java

为什么返回0？我究竟做错了什么？

```
public MainFrame() {
        setExtendedState(JFrame.MAXIMIZED_BOTH);
        setVisible(true);
        System.out.println(getWidth() + " " + getHeight());
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T23:04:22.640

你得到 0 的原因是你没有调用任何 pack()、setSize(int, int) 或 setSize(Dimension)。只有在调用其中一种方法时才会计算框架的布局。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T23:19:00.460

以下代码片段可以帮助您。我什至不确定你在做什么。

```
import javax.swing.*;
import java.awt.*;

public class TestFrameSize {

    public static void main(String[] args) {
        JFrame frame = new JFrame();
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
//        frame.setSize(new Dimension(450, 400));
        frame.setExtendedState(JFrame.MAXIMIZED_BOTH);
//        frame.setLayout(new BorderLayout());

        JLabel question = new JLabel("But that's whole code... Those 3 lines are whole code ");
        question.setHorizontalAlignment(JLabel.CENTER);
        frame.add(question);
        frame.setVisible(true);

        System.out.println(frame.getWidth() + " : " + frame.getHeight());
    }
} 
```

# jquery - Jquery 有一个奇怪的错误

> ID：14740572
> 
> 赞同：0
> 
> 时间：2013-02-06T23:02:53.343
> 
> 标签：jquery

我试图让返回键充当制表键，但它不适用于表格。这是[小提琴](http://jsfiddle.net/Beyq7/2/)。

当我移除桌子并使用它时，我不确定是什么导致它无法正常工作`<br />`。它也适用于 jQuery 计算器功能。认为这是导致问题的原因，但事实并非如此。我不确定我是否要求 jQuery 做一些图书馆会更好的事情。

## HTML

```
<table border="1">
    <tr>
        <td id="larger">field 1</td>
        <td>
            <input type="text" id="sum1" name="sum1" class="sum" size="15" border="0"
            />
        </td>
        <td>
            <input type="text" id="sum2" name="sum2" class="ttw" size="15" />
        </td>
        <td>
            <input name="cash" type="text" class="cash" id="cash1" value="" size="15"
            />
        </td>
    </tr>
</table> 
```

## jQuery

```
$('table:input').keydown(function (event) {
    if (event.which == 13) {
        if (!$(this).hasClass("last")) {
            event.preventDefault();
            $(this).nextAll('input:first').focus();
        } else {
            $("form").submit();
        }
    }
});
$(function () {
    $('input[name^=sum]').keyup(function () {
        var sum1 = parseFloat($('input[name=sum1]').val(), 2) || 0; // Or parseInt if integers only
        var sum2 = parseFloat($('input[name=sum2]').val(), 2) || 0;
        $('#cash1').val(sum1 + sum2);
    });
});
$(function () {
    $('input#cash1').blur(function () {
        var amt = parseFloat(this.value, 2) || 0;
        $(this).val('' + amt.toFixed(2));
    });
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T23:17:08.870

你可以做类似[http://jsfiddle.net/Beyq7/6/](http://jsfiddle.net/Beyq7/6/)

`$(this).parent().next().children('input:first').focus();`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T23:13:24.250

您查找下一个输入的选择器错误...尝试以下[http://jsfiddle.net/Beyq7/4/](http://jsfiddle.net/Beyq7/4/)

```
 $(this).parent().next().find('input').focus(); 
```

此外，在绑定按键事件时，您没有正确定位输入，请使用：

```
$('table input') 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-06T23:24:59.730

这是我的解决方案。您需要更新您的标记，以便最后一个输入具有类`last`并将您的选择器更改为`td input`. 然后您的选择器获取下一个输入可能如下所示`$(this).parent().next().find('input').focus();`。

那应该行得通。

JS 小提琴[http://jsfiddle.net/bFRnf/](http://jsfiddle.net/bFRnf/)

# amazon-s3 - swfobject 直接上传到亚马逊 s3 如何将不同的文件名发送到 s3

> ID：14740579
> 
> 赞同：1
> 
> 时间：2013-02-06T23:03:46.173
> 
> 标签：amazon-s3, swfobject

我有一个工作正常的上传系统。我使用 Swfobject 直接上传到 amazon s3。我的系统将文件保存在相应的用户文件夹中。如果用户 A 上传，它将上传 A/，当用户 B 上传时，它将上传到 B/ 文件夹。总而言之，一切都很好，除了。我需要根据他们填写的可能的 html 表单来更改文件名。这可以做到吗？可能通过Javascript或JQuery？

这是我的代码

```
<script type="text/javascript">

    var isMacUser = false;
    var successURL = 'http://dummy.com/dummy/filelist.php';

        var swfu;

        window.onload = function() {
            var settings = {
                flash_url : "swfupload/swfupload.swf",
                flash9_url : "swfupload/swfupload_fp9.swf",
                //upload_url: "upload.php",
        upload_url: "http://dummy.s3.amazonaws.com/",
        post_params: {"AWSAccessKeyId":"THIS IS ACCESSKEY", "key":"UsernamePHPEcho/${filename}", "acl":"public-read", "policy":"GIBBERISH GOES HERE", "signature":"a/thBERU0dLtd6r+QvRbUJEvMxU=","success_action_status":"201", "content-type":"image/"},

        http_success : [201],
        assume_success_timeout : 0,

        // File Upload Settings
        file_post_name: 'file',
        file_size_limit : "100 MB",    // 100 MB
        file_types : "*.*",
        file_types_description : "All Files",
        file_upload_limit : "10",
        file_queue_limit : 3,

                custom_settings : {
                    progressTarget : "fsUploadProgress",
                    cancelButtonId : "btnCancel"
                },
                debug: false,

                // Button Settings
        button_placeholder_id : "spanButtonPlaceholder",
        button_width: 61,
        button_height: 22,
        button_window_mode: SWFUpload.WINDOW_MODE.TRANSPARENT,
        button_cursor: SWFUpload.CURSOR.HAND,

        moving_average_history_size: 10,

                // The event handler functions are defined in handlers.js
                swfupload_preload_handler : preLoad,
                swfupload_load_failed_handler : loadFailed,
                file_queued_handler : fileQueued,
                file_queue_error_handler : fileQueueError,
                file_dialog_complete_handler : fileDialogComplete,
                upload_start_handler : uploadStart,
                upload_progress_handler : uploadProgress,
                upload_error_handler : uploadError,
                upload_success_handler : uploadSuccess,
                upload_complete_handler : uploadComplete,
                queue_complete_handler : queueComplete  // Queue plugin event
            };

            swfu = new SWFUpload(settings);
         };
    </script> 
```

# median - 如何计算销售数据的中值？

> ID：14740581
> 
> 赞同：1
> 
> 时间：2013-02-05T21:24:39.843
> 
> 标签：median

在 MySQL 中，虽然有 AVG 函数，但没有 Median。所以我需要创建一种方法来计算销售数据的中值。

我知道中位数是中间值。但是，我不清楚您如何处理不是奇数列表的列表。您如何确定选择哪个值作为中位数，或者是否需要进一步计算来确定这一点？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T16:46:43.477

我喜欢包含明确的 ORDER BY 语句：

选择 t1.val 作为 median_val

从 （

SELECT @rownum:=@rownum+1 as `row_number`, d.val FROM data d, (SELECT @rownum:=0) r WHERE 1 -- 在此处放置一些 where 子句 ORDER BY d.val ) as t1,

( SELECT count(*) as total_rows FROM data d WHERE 1 -- 将相同的 where 子句放在这里 ) as t2 WHERE 1 AND t1.row_number=floor(total_rows/2)+1;

# actionscript-3 - Flex：寻找设计模式以在我的应用程序“忙碌”时显示忙碌光标

> ID：14740583
> 
> 赞同：0
> 
> 时间：2013-02-06T23:04:03.513
> 
> 标签：actionscript-3, apache-flex, flex4

我有一个 Flex 4 应用程序，它不时需要进行大量处理，这导致用户等待几秒钟才能完成。我知道 Flex 允许通过游标管理器设置和删除繁忙的游标。我使用它如下：

```
CursorManager.setBusyCursor();    // add busy cursor
// execute lengthy processing here; e.g. switch to a new screen with a lot of layout
CursorManager.removeBusyCursor(); // remove busy cursor 
```

然而，在实践中，在某些情况下，忙碌光标不会显示，或者，如果它显示，它会在它被删除之前显示（如果你眨眼你会错过它）。这个想法是在冗长的处理过程中显示繁忙的光标，而不是在完成后的几分之一秒内。

所以，我想知道是否有一种设计模式可以用来确保在执行冗长的处理步骤之前总是显示繁忙的光标。例如，这些处理步骤可能是：(1) 转换到必须构建的具有复杂布局的新屏幕，或 (2) 创建需要很长时间才能呈现的图表等。

我怀疑任何使用 Flex 进行设计的人都曾遇到过这种情况。是否有一个可以使用的通用设计模式，或者每次找出执行繁忙光标的确切位置以便它在正确的时间显示出来是一次独特的冒险？任何建议表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T01:16:09.377

您的问题是任何类型的“冗长处理”都会冻结 UI，因此它不会有机会更新屏幕 - 因此在开始计算之前不会显示任何光标更改。

您可以做几件事，但在我们详细介绍之前：当然，最好从一开始就防止冻结！您可以通过以下两种方式之一来执行此操作：更改您的计算，以便您充分优化您的算法，以便它们可以比当前帧速率更快地完成，或者将较长的计算分解为更小的块，从而“分散”资源跨多个帧的密集循环 - 并允许屏幕在其间更新。您可以在当前的 FP 版本中使用[工作](http://esdot.ca/site/2012/intro-to-as3-workers-hello-world)线程，或者在旧版本中使用[伪线程。](http://jacksondunstan.com/articles/1427)

为了快速获得结果，只需在更改光标*后*`setTimeout`使用,将繁重的过程延迟 100 毫秒。这样，屏幕可以在计算开始之前更新。

# java - Ant build.xml 导致 java.io.IOException: System cannot find the specified file

> ID：14740585
> 
> 赞同：2
> 
> 时间：2013-02-06T23:04:19.933
> 
> 标签：java, mysql, eclipse, ant

当我尝试在 Eclipse 中运行以下 build.xml 文件以使用我的 java 应用程序中的 mysql 时，我收到以下错误消息：

BUILD FAILED
d:\mypath\workspace\appname\database\build.xml:14: Execute failed: java.io.IOException: Cannot run program "mysql": CreateProcess error=2, 系统找不到指定的文件

这是 build.xml 的代码：

```
<?xml version="1.0" encoding="UTF-8"?>

<project name="publisher" default="all" basedir=".">
  <property name="mysql.params" value="-u publisher -ppublisher -D publisher" />
  <target name="all" depends="cleandb, createdb, insertdb"></target>

  <target name="cleandb">
     <exec executable="mysql" input="cleandb.sql">
        <arg line="${mysql.params}" />
     </exec>
  </target>

  <target name="createdb">
     <exec executable="mysql" input="createdb.sql">
        <arg line="${mysql.params}" />
     </exec>
  </target>

  <target name="insertdb">
     <exec executable="mysql" input="insertdb.sql">
        <arg line="${mysql.params}" />
     </exec>
  </target>
</project> 
```

从 Eclipse 中，我将文件作为“Ant Build ...”运行，并首先调用 createdb.sql。因此，抛出的行是被要求执行的第一行，即：

问题似乎是脚本无法找到mysql。在 Windows 命令行中，我可以使用以下路径调用数据库实例：
d:\mypath\MySQL\MySQL Server\bin\mysqld

我认为xml文件需要指定mysql安装的路径，但我不确定如何做到这一点，同时还要传递上面代码中所需的参数。这是我第一次使用 Ant 和 mysql，所以语法对我来说是新的。

谁能告诉我如何修复上面的代码，以便它可以找到我的数据库？

***编辑：***

* * *

我按照whiskyspider的建议编辑了我的代码如下：

```
-- I had a bunch of code here that I am now omitting for brevity because  
-- there is a newer, revised version of the code in the second edit below. 
```

它可能有助于一些读者知道我正在尝试使用[本教程](http://cse.csusb.edu/turner/java_web_programming/mysql/)中的代码。不同之处在于我使用的是 mysql 5.6 版和版本：Juno Service Release 1 Build id: 20120920-0800 of Eclipse。本教程使用两个应用程序的旧版本，这就是造成混乱的原因。

***第二次编辑：***

* * *

我再次更改了 build.xml 文件以实现whiskyspider的第二轮更正。该脚本现在访问 mysql 数据库，但下面还有另一条我有疑问的消息。

这是新的 build.xml 代码，现在可以正常运行：

```
<?xml version="1.0" encoding="UTF-8"?>

<project name="publisher" default="all" basedir=".">
  <property name="mysql.params" value="-u publisher -ppublisher -D publisher" />
  <property name="mysql.exec.path" value="d:\\mypath\\MySQL\\bin\\"/>
  <target name="all" depends="cleandb, createdb, insertdb"></target>

  <target name="cleandb">
     <exec executable="${mysql.exec.path}/mysqld" input="cleandb.sql">
        <arg line="${mysql.params}" />
     </exec>
  </target>

  <target name="createdb">
     <exec executable="${mysql.exec.path}/mysqld" input="createdb.sql">
        <arg line="${mysql.params}" />
     </exec>
  </target>

  <target name="insertdb">
     <exec executable="${mysql.exec.path}/mysqld" input="insertdb.sql">
        <arg line="${mysql.params}" />
     </exec>
  </target>
</project> 
```

以下是运行 build.xml 时 Eclipse 控制台中报告的日志：

```
Buildfile: d:\mypath\workspace\publisher\database\build.xml
createdb:
     [exec] Warning: Using a password on the command line interface can be insecure.
insertdb:
     [exec] Warning: Using a password on the command line interface can be insecure.
BUILD SUCCESSFUL
Total time: 1 second 
```

当我需要使用密码从使用 eclipse 运行的 ant 代码进入数据库时​​，谁能告诉我如何通过提高安全性来解决此警告？具体来说，如何更改我的代码以便执行相同的任务而没有安全风险？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T23:06:13.833

实现目标的最佳方法是将`.../mysql/bin`文件夹添加到您的`PATH`.

如果它不是一个选项，您可以通过属性指定mysql位置：`-Dmysql.bin.dir=/path/to/mysql`然后使用`<exec executable="${mysql.bin.dir}/mysql" input="cleandb.sql">`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T23:24:43.440

使用可执行文件的路径创建一个属性：

```
<property name="mysql.exec.path" value="C:/path/to/it" /> 
```

您可以通过首先加载可能覆盖它的本地属性文件来使其可移植，例如：

```
<property file="${user.home}/local.properties" />  // can override mysql.exec.path property, if necessary
<property name="mysql.exec.path" value="C:/path/to/it" />  // if not, use the default 
```

然后像这样引用它：

```
<exec executable="${mysql.exec.path}/mysql" input="cleandb.sql">
  <arg line="${mysql.params}" />
</exec> 
```

# java - JAVA-EE Tomcat Axis2 - 设置和项目构建

> ID：14740586
> 
> 赞同：4
> 
> 时间：2013-02-06T23:04:22.240
> 
> 标签：java, eclipse, web-services, tomcat, axis2

**大家好，**

**我对 Eclipse 环境中的 JAVA WebService 开发非常陌生。**

***我正在使用 Eclipse IDE - Tomcat v7.0 Webserver - Axis2 进行开发。***
*一切似乎都配置得很好，因为每次我启动服务器并访问本地主机时，都会将我带到 Tomcat 服务器页面。当我访问*

> 本地主机：8080/axis2/

*它带我到 Axis2 页面。* **所以，我认为开发人员的配置已经正确完成。环境。**

***问题：***

> *如何创建 .aar 文件以便我可以将其部署到远程服务器？我们是手动创建它还是在我们构建项目时创建它？我想对skeleton.java 类进行一些更改-生成.aar 文件并部署到linux 机器。*

***我试过的：***

> *我已对代码进行了所需的更改，构建了项目，但我认为 .aar 文件没有任何更改。*

**对此的任何帮助将不胜感激。**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T18:56:49.423

看看这里[1] 创建 SimpleService.aar 文件后，您可以使用 Tomcat 上的 Axis2 控制台上传和部署 SimpleService.aar 文件。

[1] - [http://wso2.org/library/95](http://wso2.org/library/95)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-08T22:41:22.710

您不需要将 Axis2 安装为 Web 应用程序广告创建 aar next。我通常更喜欢包含axis2的完整Web应用程序，然后将其导出为WAR并部署该WAR。

如果您已经编写了 Web 服务并且可以在 Eclipse 中对其进行测试，则可以将其导出为 WAR 并进行部署。

# svn - 如何通过自动创建相对目录/路径来导出 svn？

> ID：14740589
> 
> 赞同：4
> 
> 时间：2013-02-06T23:04:23.603
> 
> 标签：svn

通常我手动执行此操作：

1.  `mkdir -p folder1/foder2/folder3`
2.  `cd folder1/foder2/folder3`
3.  `svn export svn://127.0.0.1/svn/app1/branches/branch1/folder1/foder2/folder3/file1.txt`

有没有我不需要执行第 1 步和第 2 步的方法或直接 svn export 命令？我希望有一种更简单的方法，svn 会自动创建从 SVN 到我的本地机器的目录结构。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T08:13:45.873

好的，现在我想出了一个创建相对路径的 bash 脚本。我对 bash 脚本没有深入的了解，所以这有点难看。请原谅我。但希望这能激起一个想法。

**svn_export.sh**

```
#!/bin/sh
for var in "$@"
do
    svnArg1=$var;
    svnArg2=`echo "$svnArg1" | sed -e 's/file:\/\/\/usr\/share\/svn\///'`;

    tempDir=`dirname $svnArg2`;
    tempFile=`basename $svnArg2`;
    if [ -n "$tempFile" ]; then

        if [ ! -d "$tempDir" ]; then
            echo "mkdir -p $tempDir";
            echo `mkdir -p $tempDir`;
        fi    

        echo "svn export $svnArg1 $svnArg2";
        echo `svn export $svnArg1 $svnArg2`;

    fi

done

exit 0; 
```

**用法：**

`sudo svn diff -r 1:HEAD --summarize file:///usr/share/svn/TestRepository/ | awk '{print $2}' | xargs ./svn_export.sh`

**输出**

```
A TestRepository/trunk/test2.txt Export complete.
A TestRepository/trunk/test3.txt Export complete.
A TestRepository/trunk/test.txt Export complete. 
```

所以基本上，你只需要将's 参数`file:\/\/\/usr\/share\/svn\/`中的这个字符串修改`sed`为你的 svn URL。

例子：`svn:\/\/127.0.0.1\/svn\/project1\/branches\/`

所以现在，用法如下：

```
svn diff -r 1540:HEAD --summarize svn://172.0.0.1/svn/project1/branches/branch1 | awk '{print $2}' | xargs ./svn_export.sh 
```

希望这可以帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T02:26:19.640

如果存储库中**已知硬编码路径**的情况 - 是的，只需在导出中写入目标路径（手动）

`svn export svn://127.0.0.1/svn/app1/branches/branch1/folder1/foder2/folder3/file1.txt folder1/foder2/folder3/file1.txt`

如果是动态可变的相对路径 - 不，您没有内部预制选项。但是，如果您从存储库中导出修订内容，您可以使用`svnlook`子命令和代码中的自己的逻辑来实现它

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-07-05T03:55:19.647

在as in 中似乎没有`-p`等价物，你最好的选择是在你的`svn export/checkout``mkdir``.bashrc`

```
function svnExport() {
    mkdir -p "$(dirname "$1")" && svn export "$0$1" "$1"
} 
```

所以你的具体例子是

```
svnExport 'svn://127.0.0.1/svn/app1/branches/branch1/' 'folder1/foder2/folder3/file1.txt' 
```

* * *

编辑：原来`--force`将处理子目录，但有自动覆盖等副作用。因此，如果您不担心，那么您可以这样做

```
svn export --force 'svn://127.0.0.1/svn/app1/branches/branch1/folder1/foder2/folder3/file1.txt' 'folder1/foder2/folder3/file1.txt' 
```

或者

```
function svnExport() {
    svn export --force "$0$1" "$1"
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-11-02T07:51:35.313

我尝试使用 SVN UI 执行此操作，效果很好。

假设我有一个文件夹'abc'。我想在文件夹'build'（不存在）中导出一个文件。

[![显示源 url 和目标目录的图像](../Images/0b55740f822d55ee8ec3dbf7c38c5318.png)](https://i.stack.imgur.com/mpa72.png)

创建构建文件夹后成功导出文件。至于命令行选项，我尝试了所有可能的方法。它本身不会创建新文件夹。该文件夹需要已经存在。

# ruby-on-rails - Bundler 不允许我安装 gems

> ID：14740590
> 
> 赞同：3
> 
> 时间：2013-02-06T23:04:48.263
> 
> 标签：ruby-on-rails, ruby, rspec, gem, bundler

每当我尝试运行 rspec 测试时，我都会尝试消除这些烦人的弃用警告（我正在艰难地阅读 Rails 教程）。

我尝试按照这里的建议：[rspec 触发“弃用警告：ActiveSupport::Concern 中的 InstanceMethods 模块将不再自动包含在内。”](https://stackoverflow.com/questions/10770160/rspec-triggers-deprecation-warning-the-instancemethods-module-inside-activesup) 简单地更新我的 rspec 版本。

但是，无论何时尝试，我都会收到这样的消息：

```
The bundle currently has rspec-core locked at 2.1.0.
Try running `bundle update rspec-core` 
```

或这个：

```
Bundler could not find compatible versions for gem "rspec-core":
  In Gemfile:
    rspec-rails (= 2.1.0) x86-mingw32 depends on
      rspec-core (~> 2.1.0) x86-mingw32

    rspec-core (2.10.1) 
```

最后，我继续点击`bundle install`更新我所有的宝石。但是，这产生了不更新那些 rspec 的奇妙结果。这是怎么回事？（而且我一直在更新我对当前 git 分支的提交。）

谢谢你。

编辑：这是我的 gemfile 和 gemfile.lock 的样子：

```
source 'https://rubygems.org'

gem 'rails', '3.2.1'

group :development, :test do
    gem 'sqlite3', '1.3.5'
    gem 'rspec-rails', '2.1.0' #NOTICE: possible error with rails version
end

group :assets do
  gem 'sass-rails',   '~> 3.2.5'
  gem 'coffee-rails', '~> 3.2.2'    
  gem 'uglifier', '1.2.3'
end

gem 'jquery-rails', '2.0.2'

group :test do
  gem 'capybara', '1.1.2'
end

group :production do
  gem 'pg', '0.12.2'
end 
```

还有我的 gemfile.lock：

```
GEM
  remote: https://rubygems.org/
  specs:
    actionmailer (3.2.1)
      actionpack (= 3.2.1)
      mail (~> 2.4.0)
    actionpack (3.2.1)
      activemodel (= 3.2.1)
      activesupport (= 3.2.1)
      builder (~> 3.0.0)
      erubis (~> 2.7.0)
      journey (~> 1.0.1)
      rack (~> 1.4.0)
      rack-cache (~> 1.1)
      rack-test (~> 0.6.1)
      sprockets (~> 2.1.2)
    activemodel (3.2.1)
      activesupport (= 3.2.1)
      builder (~> 3.0.0)
    activerecord (3.2.1)
      activemodel (= 3.2.1)
      activesupport (= 3.2.1)
      arel (~> 3.0.0)
      tzinfo (~> 0.3.29)
    activeresource (3.2.1)
      activemodel (= 3.2.1)
      activesupport (= 3.2.1)
    activesupport (3.2.1)
      i18n (~> 0.6)
      multi_json (~> 1.0)
    arel (3.0.2)
    builder (3.0.4)
    capybara (1.1.2)
      mime-types (>= 1.16)
      nokogiri (>= 1.3.3)
      rack (>= 1.0.0)
      rack-test (>= 0.5.4)
      selenium-webdriver (~> 2.0)
      xpath (~> 0.1.4)
    childprocess (0.3.7)
      ffi (~> 1.0, >= 1.0.6)
    coffee-rails (3.2.2)
      coffee-script (>= 2.2.0)
      railties (~> 3.2.0)
    coffee-script (2.2.0)
      coffee-script-source
      execjs
    coffee-script-source (1.4.0)
    diff-lcs (1.1.3)
    erubis (2.7.0)
    execjs (1.4.0)
      multi_json (~> 1.0)
    ffi (1.3.1-x86-mingw32)
    hike (1.2.1)
    i18n (0.6.1)
    journey (1.0.4)
    jquery-rails (2.0.2)
      railties (>= 3.2.0, < 5.0)
      thor (~> 0.14)
    json (1.7.6)
    mail (2.4.4)
      i18n (>= 0.4.0)
      mime-types (~> 1.16)
      treetop (~> 1.4.8)
    mime-types (1.20.1)
    multi_json (1.5.0)
    nokogiri (1.5.6-x86-mingw32)
    pg (0.12.2-x86-mingw32)
    polyglot (0.3.3)
    rack (1.4.4)
    rack-cache (1.2)
      rack (>= 0.4)
    rack-ssl (1.3.3)
      rack
    rack-test (0.6.2)
      rack (>= 1.0)
    rails (3.2.1)
      actionmailer (= 3.2.1)
      actionpack (= 3.2.1)
      activerecord (= 3.2.1)
      activeresource (= 3.2.1)
      activesupport (= 3.2.1)
      bundler (~> 1.0)
      railties (= 3.2.1)
    railties (3.2.1)
      actionpack (= 3.2.1)
      activesupport (= 3.2.1)
      rack-ssl (~> 1.3.2)
      rake (>= 0.8.7)
      rdoc (~> 3.4)
      thor (~> 0.14.6)
    rake (10.0.3)
    rdoc (3.12.1)
      json (~> 1.4)
    rspec (2.1.0)
      rspec-core (~> 2.1.0)
      rspec-expectations (~> 2.1.0)
      rspec-mocks (~> 2.1.0)
    rspec-core (2.1.0)
    rspec-expectations (2.1.0)
      diff-lcs (~> 1.1.2)
    rspec-mocks (2.1.0)
    rspec-rails (2.1.0)
      rspec (~> 2.1.0)
    rubyzip (0.9.9)
    sass (3.2.5)
    sass-rails (3.2.6)
      railties (~> 3.2.0)
      sass (>= 3.1.10)
      tilt (~> 1.3)
    selenium-webdriver (2.29.0)
      childprocess (>= 0.2.5)
      multi_json (~> 1.0)
      rubyzip
      websocket (~> 1.0.4)
    sprockets (2.1.3)
      hike (~> 1.2)
      rack (~> 1.0)
      tilt (~> 1.1, != 1.3.0)
    sqlite3 (1.3.5-x86-mingw32)
    thor (0.14.6)
    tilt (1.3.3)
    treetop (1.4.12)
      polyglot
      polyglot (>= 0.3.1)
    tzinfo (0.3.35)
    uglifier (1.2.3)
      execjs (>= 0.3.0)
      multi_json (>= 1.0.2)
    websocket (1.0.7)
    xpath (0.1.4)
      nokogiri (~> 1.3)

PLATFORMS
  x86-mingw32

DEPENDENCIES
  capybara (= 1.1.2)
  coffee-rails (~> 3.2.2)
  jquery-rails (= 2.0.2)
  pg (= 0.12.2)
  rails (= 3.2.1)
  rspec-rails (= 2.1.0)
  sass-rails (~> 3.2.5)
  sqlite3 (= 1.3.5)
  uglifier (= 1.2.3) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-06T23:17:32.360

我认为您的问题是您需要简单地执行以下操作

```
sudo gem uninstall rspec-core -v 2.2.1
bundle update rspec-core 
```

这可能需要其他依赖的 gem，比如 (rspec-rails, rspec)

通过做检查这个`gem list rspec`

# msbuild - WiX GenerateBootrstraper 升级后不再工作

> ID：14740596
> 
> 赞同：0
> 
> 时间：2013-02-06T23:05:12.270
> 
> 标签：msbuild, visual-studio-2012, wix, installation, bootstrapper

我在带有 .NET 4 的 Visual Studio 2010 中有一个包含 2 个项目的解决方案。一个项目是共享库（“Widget”），另一个是 WiX 设置项目（“Setup”）。WiX 项目是为 v3.6 创建的

我将解决方案和项目升级到 Visual Studio 2012 和 WiX 3.7（仍然针对 .NET v4），但我的安装项目由于引导程序错误而无法构建。

在我的项目文件中，我声明了以下内容

```
<!-- WiX Bootstrapper for installing prerequisites-->
<ItemGroup>
  <BootstrapperFile Include=".NETFramework,Version=v4.0">
    <ProductName>.NET Framework 4.0</ProductName>
  </BootstrapperFile>
  <BootstrapperFile Include="Microsoft.Windows.Installer.4.5">
    <ProductName>Windows Installer 4.5</ProductName>
  </BootstrapperFile>
</ItemGroup>  

<Target Name="AfterBuild">
  <GenerateBootstrapper ApplicationFile="$(TargetFileName)"
                        ApplicationName="My Widget"
                        BootstrapperItems="@(BootstrapperFile)"
                        ComponentsLocation="Relative"
                        CopyComponents="True"
                        OutputPath="$(OutputPath)"
                        Path="C:\Program Files (x86)\Microsoft SDKs\Windows\v8.0A\Bootstrapper\"/>    
</Target> 
```

但是，当我构建安装项目时，它会失败并出现以下问题（抱歉冗长，只是想详细说明）

```
7>------ Rebuild All started: Project: My.Project.Setup, Configuration: Debug x86 ------
7>  C:\Program Files (x86)\WiX Toolset v3.7\bin\candle.exe -dDebug -d"DevEnvDir=C:\Program Files (x86)\Microsoft Visual Studio 11.0\Common7\IDE\\" -dSolutionDir=X:\Source\My.Project\ -dSolutionExt=.sln -dSolutionFileName=My.Project.sln -dSolutionName=My.Project -dSolutionPath=X:\Source\My.Project\My.Project.sln -dConfiguration=Debug -dOutDir=bin\Debug\ -dPlatform=x86 -dProjectDir=X:\Source\My.Project\My.Project.Setup\ -dProjectExt=.wixproj -dProjectFileName=My.Project.Setup.wixproj -dProjectName=My.Project.Setup -dProjectPath=X:\Source\My.Project\My.Project.Setup\My.Project.Setup.wixproj -dTargetDir=X:\Source\My.Project\My.Project.Setup\bin\Debug\ -dTargetExt=.msi -dTargetFileName=My.Project.Setup.msi -dTargetName=My.Project.Setup -dTargetPath=X:\Source\My.Project\My.Project.Setup\bin\Debug\My.Project.Setup.msi -dMy.Project.Widget.Configuration=Debug -d"My.Project.Widget.FullConfiguration=Debug|x86" -dMy.Project.Widget.Platform=x86 -dMy.Project.Widget.ProjectDir=X:\Source\My.Project\My.Project.Widget\ -dMy.Project.Widget.ProjectExt=.csproj -dMy.Project.Widget.ProjectFileName=My.Project.Widget.csproj -dMy.Project.Widget.ProjectName=My.Project.Widget -dMy.Project.Widget.ProjectPath=X:\Source\My.Project\My.Project.Widget\My.Project.Widget.csproj -dMy.Project.Widget.TargetDir=X:\Source\My.Project\My.Project.Widget\bin\Debug\ -dMy.Project.Widget.TargetExt=.exe -dMy.Project.Widget.TargetFileName=My.Project.Widget.exe -dMy.Project.Widget.TargetName=My.Project.Widget -dMy.Project.Widget.TargetPath=X:\Source\My.Project\My.Project.Widget\bin\Debug\My.Project.Widget.exe -out obj\Debug\ -arch x86 -ext "C:\Program Files (x86)\WiX Toolset v3.7\bin\\WixUIExtension.dll" -ext "C:\Program Files (x86)\WiX Toolset v3.7\bin\\WixNetFxExtension.dll" Product.wxs
7>  C:\Program Files (x86)\WiX Toolset v3.7\bin\Light.exe -out X:\Source\My.Project\My.Project.Setup\bin\Debug\My.Project.Setup.msi -pdbout X:\Source\My.Project\My.Project.Setup\bin\Debug\My.Project.Setup.wixpdb -cultures:null -ext "C:\Program Files (x86)\WiX Toolset v3.7\bin\\WixUIExtension.dll" -ext "C:\Program Files (x86)\WiX Toolset v3.7\bin\\WixNetFxExtension.dll" -contentsfile obj\Debug\My.Project.Setup.wixproj.BindContentsFileListnull.txt -outputsfile obj\Debug\My.Project.Setup.wixproj.BindOutputsFileListnull.txt -builtoutputsfile obj\Debug\My.Project.Setup.wixproj.BindBuiltOutputsFileListnull.txt -wixprojectfile X:\Source\My.Project\My.Project.Setup\My.Project.Setup.wixproj obj\Debug\Product.wixobj
7>X:\Source\My.Project\My.Project.Setup\My.Project.Setup.wixproj(71,5): error MSB3152: To enable 'Download prerequisites from the same location as my application' in the Prerequisites dialog box, you must download file 'WindowsInstaller4_5\WindowsXP-KB942288-v3-x86.exe' for item 'Windows Installer 4.5' to your local machine. For more information, see http://go.microsoft.com/fwlink/?LinkId=239883.
7>X:\Source\My.Project\My.Project.Setup\My.Project.Setup.wixproj(71,5): error MSB3152: To enable 'Download prerequisites from the same location as my application' in the Prerequisites dialog box, you must download file 'WindowsInstaller4_5\WindowsXP-KB958655-v2-x86-ENU.exe' for item 'Windows Installer 4.5' to your local machine. For more information, see http://go.microsoft.com/fwlink/?LinkId=239883.
7>X:\Source\My.Project\My.Project.Setup\My.Project.Setup.wixproj(71,5): error MSB3152: To enable 'Download prerequisites from the same location as my application' in the Prerequisites dialog box, you must download file 'WindowsInstaller4_5\WindowsServer2003-KB942288-v4-x86.exe' for item 'Windows Installer 4.5' to your local machine. For more information, see http://go.microsoft.com/fwlink/?LinkId=239883.
7>X:\Source\My.Project\My.Project.Setup\My.Project.Setup.wixproj(71,5): error MSB3152: To enable 'Download prerequisites from the same location as my application' in the Prerequisites dialog box, you must download file 'WindowsInstaller4_5\WindowsServer2003-KB958655-v2-x86-ENU.exe' for item 'Windows Installer 4.5' to your local machine. For more information, see http://go.microsoft.com/fwlink/?LinkId=239883.
7>X:\Source\My.Project\My.Project.Setup\My.Project.Setup.wixproj(71,5): error MSB3152: To enable 'Download prerequisites from the same location as my application' in the Prerequisites dialog box, you must download file 'WindowsInstaller4_5\WindowsServer2003-KB942288-v4-x64.exe' for item 'Windows Installer 4.5' to your local machine. For more information, see http://go.microsoft.com/fwlink/?LinkId=239883.
7>X:\Source\My.Project\My.Project.Setup\My.Project.Setup.wixproj(71,5): error MSB3152: To enable 'Download prerequisites from the same location as my application' in the Prerequisites dialog box, you must download file 'WindowsInstaller4_5\WindowsServer2003.WindowsXP-KB958655-v2-x64-ENU.exe' for item 'Windows Installer 4.5' to your local machine. For more information, see http://go.microsoft.com/fwlink/?LinkId=239883.
7>X:\Source\My.Project\My.Project.Setup\My.Project.Setup.wixproj(71,5): error MSB3152: To enable 'Download prerequisites from the same location as my application' in the Prerequisites dialog box, you must download file 'WindowsInstaller4_5\Windows6.0-KB958655-v2-x86.MSU' for item 'Windows Installer 4.5' to your local machine. For more information, see http://go.microsoft.com/fwlink/?LinkId=239883.
========== Rebuild All: 6 succeeded, 1 failed, 0 skipped ========== 
```

有任何想法吗？Packages 位置有效，我验证了它的存在....

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T20:37:51.120

我能够部分解决它，并且我可以构建我的设置，但是哦，这是多么痛苦；）

这是我所做的：

*   阅读[如何：使用 MSDN 上的 ClickOnce 应用程序包含先决条件](http://msdn.microsoft.com/en-us/library/hh873130%28v=vs.110%29.aspx)
*   对于每个所需的设置依赖项，您必须下载 1 个或多个包并将它们放在正确的`Packages/<package_name>/`文件夹中。

## 笔记：

1.  下载后不要忘记“取消阻止”软件包（右键单击 -> 属性 -> 取消阻止）
2.  对于英语（en）可再发行文件，下载到`/Packages/<package_name>/`文件夹（不是`/Packages/<package_name>/en/`）
3.  一些可再发行组件在文件中包含下载链接，`/Packages/<package_name>/Product.xml`而不是`/Packages/<package_name>/en/Package.xml`Windows Installer 4.5 就是这种情况（它只有 /en/ 子文件夹，所以这可能就是原因）

## 还是一个问题：

在 Visual Studio WiX 项目中，2 个依赖项旁边仍然有黄色三角形（警告？）图标。单击时，我收到一个错误，即缺少依赖项，尽管一切都没有问题。

# c# - 在 C# 中杀死一个 python 脚本

> ID：14740603
> 
> 赞同：3
> 
> 时间：2013-02-06T23:05:41.417
> 
> 标签：c#, python, process, kill

我想知道是否可以使用 C# 杀死一个 python 脚本。

在我目前正在开发的小型应用程序中，一个 python 应用程序启动到 localhost:portnumber。应用程序的端口号始终相同。

是否有可能，当应用程序已经在运行时（我正在通过获取当前正在使用的端口列表来检查），使用某种命令来杀死它？

我已经发现，如果它没有运行，我可以使用`Process.Start();`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T23:16:15.413

您可以使用**[Process.Kill()](http://msdn.microsoft.com/en-us/library/system.diagnostics.process.kill.aspx)**杀死特定进程...
要找出要杀死*的*进程，您可以使用`GetProcesses()`并遍历它们...

例如，这里是如何杀死计算器 (calc.exe)：

```
 foreach (Process process in Process.GetProcesses().Where(p => 
                                                         p.ProcessName == "calc"))
 {
     process.Kill();
 } 
```

这将找到所有名为“calc”的进程并杀死它们。

在您的情况下，如果您已经有一个`Process`对象（因为您调用了`Process.Start()`），您可以使用该`Kill()`方法专门杀死该对象。

# c# - 两次调用相同的 C# 属性是不好的编程习惯吗？

> ID：14740606
> 
> 赞同：5
> 
> 时间：2013-02-06T23:05:44.557
> 
> 标签：c#, java, methods, properties

举个例子，我见过很多 C# 代码，如下所示：

```
XmlNode n = GetXmlNode();
String[] attributes = new String[n.Attributes.Count];
for (int x = 0; x < n.Attributes.Count; x++)
{
    //do something
} 
```

现在，如果这是java，我们可以编写类似于以下的代码，但是我们会犯`getAttributes()`两次调用该方法的错误，如果我没记错的话，有一条规则说不要多次调用同一个方法，而是声明一个变量来保存对方法调用返回的对象的引用，然后根据需要多次使用该变量。

```
Node n = GetXmlNode();
String[] attributes = new String[n.getAttributes().getLength()];
for (int x = 0; x < n.getAttributes().getLength(); x++)
{
    //do something
} 
```

但是由于 C# 属性只是封装在一个类型成员中的 getter 方法和 setter 方法，是否应该遵循相同的规则？

或者该规则是否不适用于这种情况，因为假设调用标准库中的 C# 属性和 Java get 方法只是返回对字段的引用而不是执行繁重的工作是“安全的”？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-06T23:08:31.637

永远不要存储你可以计算的东西。当计算值更改但您仍在使用存储的值时，存储您可以计算的内容将导致细微的错误。仅当您的程序运行缓慢时才违反此规则，这是程序运行缓慢的最大原因（提示：可能不是）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-06T23:18:52.737

这取决于是否有一些计算来获取属性的值（*我认为在属性获取器中进行一些更大的计算是不好的做法，但你不能依赖没有这样的属性*）。

**规则是：**在大多数情况下，您可以多次调用属性。*...但谁知道呢，谁实现了该死的性能杀手属性，只是因为它可以以这种方式实现......*

**好**- 自动属性

```
public string MyValueProperty { get; set; } 
```

像在java中一样编译为getter/setter：

```
private string myValueProperty;
public string MyValueProperty
{
     get{
          return myValueProperty;
     }
     set{
          this.myValueProperty = value;
     }
} 
```

*多次调用此类属性时，您将受到很少或没有性能影响。它类似于在 java 中调用基本的 getter/setter 方法。*

**不好**- 需要一些计算来获得财产的价值

```
public string MyLongTimeToGetValueProperty
{
     get 
     { 
          var res = DoSomeComputation();
          return res;
     }
} 
```

*最好避免多次调用此类属性。（不管这种属性应该被重构为方法，因为它们的行为就像一个）*

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-06T23:07:50.227

我会认为它是过早的优化.. 取决于它返回的集合有多大。

如果收藏量很大......存储一次计数并从那时起使用它。否则..我根本不会担心。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-06T23:19:45.447

如果可能，请在您第一次访问它时第二次使用它。

在您的示例中，您可以编写以下代码：

```
XmlNode n = GetXmlNode();
String[] attributes = new String[n.Attributes.Count];
for (int x = 0; x < attributes.GetUpperBound(0) + 1; x++)
{
     //do something
} 
```

# javascript - 使用 jQuery 顺序加载和淡入元素

> ID：14740607
> 
> 赞同：5
> 
> 时间：2013-02-06T23:05:45.627
> 
> 标签：javascript, jquery

我正在编写一些代码，这些代码将依次加载一堆（20+）大图像（每个约 500 KB）。在每个图像加载后，它都会淡入。我使用这个[讨论中的](https://forum.jquery.com/topic/sequential-loading-of-images)[这个小提琴](http://jsfiddle.net/aGnBS/14/)作为起点。

我已经按照我想要的方式加载了图像，但是我需要在不破坏这种顺序加载的情况下做一些其他的事情。我需要在第三个和第四个图像之间加载包含 iframe 的标记，并且我需要在图像之后加载一个链接。这是我需要的标记输出示例：

```
<div id="container">
  <img src="img-1.jpg" />
  <img src="img-2.jpg" />
  <img src="img-3.jpg" />
  <div><iframe></iframe></div>
  <img src="img-4.jpg" />
  <img src="img-5.jpg" />
  <img src="img-6.jpg" />
  <img src="img-7.jpg" />
  <img src="img-8.jpg" />
  <img src="img-9.jpg" />
  <a href="/link/">Link text</a>
</div> 
```

我可以很好地加载图像，但是我只在前三个加载后才加载该 iframe，然后加载其余图像，然后加载链接。这是我当前的javascript：

```
var no = 22,
main = [],
i;

for (i = 1; i <= no; i++) {
    main[i] = "path/to/image/folder/img-" + i + ".jpg";
}

function loadImages(arr,loc) {
if (arr.length === 0) {
    return;
}

function imageLoaded(img) {
$(img).hide().appendTo(loc).fadeIn(800);
}

function loadImage() {
    var url = arr.shift(),
    img = new Image(),
    timer;

    img.src = url;

    if (img.complete || img.readyState === 4) {
        imageLoaded(img);
        if (arr.length !== 0) {
            loadImage();
        }
    }
    else {
        timer = setTimeout(function() {
            if (arr.length !== 0) {
                loadImage();
            }
            $(img).unbind("error load onreadystate");
        }, 10000);
        $(img).bind("error load onreadystatechange", function(e) {
            clearTimeout(timer);
            if (e.type !== "error") {
                imageLoaded(img);
            }
            if (arr.length !== 0) {
                loadImage();
            }
        });
    }
}
    loadImage();
}

loadImages(main,"#container"); 
```

“no”变量设置要循环通过的图像数量（我需要在具有不同图像数量的多个页面上执行此操作），并且 loadImages 函数接受要循环通过的数组以及放置图像的位置的参数。这段代码可能会更干净，但我是 javascript 新手。任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T00:20:49.173

一个可能的解决方案是在每个 loadImage 函数调用中轮询加载图像的长度，如下所示

```
loadImage(){
//stuff 
if($('#container img').length == 4){
    insertIframeMarkup(); 
}

//other stuff

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T00:28:42.040

**[*这是我如何做到的一个例子*](http://jsfiddle.net/HFUzW/1/)**

这与您的方法略有不同，但我认为它可以为您提供所需的结果。

```
var imgArr = ['http://healthystartups.com/storage/600px-MA_Route_1.png?__SQUARESPACE_CACHEVERSION=1319542839834', 'http://upload.wikimedia.org/wikipedia/commons/thumb/5/54/MA_Route_2.svg/600px-MA_Route_2.svg.png', 'http://foo.com/foo_873.jpg', 'http://3.bp.blogspot.com/-Q_owQUxNjdQ/Te3ALCmT3oI/AAAAAAAAAnk/wv9r0b0MT-g/s1600/600px-MA_Route_3.svg_.jpg', 'http://honestreviewscorner.com/wp-content/uploads/2012/10/the-number-4-in-a-circle.jpg1.png', 'http://www.thefrugalette.com/wp-content/uploads/2011/09/number-5.png'];

var count = 0;

function LoadImages(images) {
    img = images[count];
    img = new Image();
    img.src = images[count];

    //Between 3 and 4
    if(count == 4)
    {
        $('<iframe src="http://www.w3schools.com"></iframe>').appendTo('body');
    }

    if (img.complete || img.readyState === 4) {
        $(img).hide().appendTo('body').fadeIn(function () {
            count++;
            if (count < images.length) LoadImages(images);
            else $('body').append('<div>last line</div>')
        })

    } else {
        count++;
        LoadImages(images)
    }

}
LoadImages(imgArr); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-07T00:55:23.617

这里是`**[working fiddle](http://jsfiddle.net/amantur/8hbZp/1/)**`。代码如下：

```
var imgArr = ['http://healthystartups.com/storage/600px-MA_Route_1.png?__SQUARESPACE_CACHEVERSION=1319542839834', 
    'http://upload.wikimedia.org/wikipedia/commons/thumb/5/54/MA_Route_2.svg/600px-MA_Route_2.svg.png',
    'http://1.bp.blogspot.com/-jiW5NeKtZBY/T-nyLRuSSZI/AAAAAAAACaA/Ro8wjmk32ow/s1600/red-number-8.jpg',
    'http://3.bp.blogspot.com/-Q_owQUxNjdQ/Te3ALCmT3oI/AAAAAAAAAnk/wv9r0b0MT-g/s1600/600px-MA_Route_3.svg_.jpg',
    'http://us.123rf.com/400wm/400/400/zoomzoom/zoomzoom1102/zoomzoom110200070/8913747-4--created-by-light-colorful-digits-over-black-background.jpg',
    'https://twimg0-a.akamaihd.net/profile_images/1633986906/6digits-fist-Logo.png'],
    images=[imgArr.length],
    otherUrls = {}, urlTypes = {
        IFRAME: 0,
        LINK: 1
    };

//INITIALIZE OTHER URLS WITH URL AND INDEX AT WHICH IT WOULD BE LOADED
    function createInfo(url, type, text) {
        var o = {};
        o.URL = url;
        o.Type = type;
        o.Text = text;
        return o;
    }
otherUrls[2] = createInfo("http://http://en.wikipedia.org/wiki/Punjabi_language", urlTypes.IFRAME);
otherUrls[4] = createInfo("http://http://en.wikipedia.org/wiki/Numerical_digit", urlTypes.LINK, "click here [wikipedia]");

function loadImages(arr,loc,other){
    var l=arr.length,i=0, url, idx, o;
    while(arr.length){
        url=arr.shift(),
        idx=(l-arr.length)-1,
        o=other[idx];

        makeImage(url,idx,loc,o);
    }
}

function makeImage(url, idx, loc, other){
    var image=new Image();
    image.src = url;
    images[idx]=image;
    image.onload=function(){
            imageLoaded(idx, loc, other);
        };
    image.onerror=function(){
            var ix=idx,ot=other,lc=loc;
            imageError(ix, lc, ot);
        };
}

function imageLoaded(i,l,o){
    var img=$(images[i]);
    img.hide().css({'display':'block','height':'25px','width':'25px'}).appendTo(l).fadeIn();
    loadOtherObjects(o,img);
}

function imageError(i,l,o){
    // handle 404 using setTimeout set at 10 seconds, adjust as needed
    timer = setTimeout(function () {$(images[i]).unbind("error load onreadystate");}, 10000);
    $(images[i]).bind("error load onreadystatechange", function (e) {
        if (e.type !== "error") {
            imageLoaded(i,l,o);
        }
    });
}

function loadOtherObjects(o,img){
    if (o) {
        console.log(o);
        console.log(o.Type==urlTypes.LINK);
        if (o.Type == urlTypes.IFRAME) {
            var d = $("<div/>").css({'height':'250px','width':'250px'}), f = $("<iframe/>").attr("src", o.URL);
            f.appendTo(d);
            d.insertAfter(img);
        } else if(o.Type == urlTypes.LINK) {
            var lnk = $("<a/>").attr("href", o.URL).text(o.Text);
            lnk.insertAfter(img);
        }
    }
}

$(function(){
    loadImages(imgArr, "#container", otherUrls);
}); 
```

**注意：**请参阅有关通过代码加载图像的另一个问题的[答案](https://stackoverflow.com/a/4913155/13198)`loaded`，因为如果在缓存中找到图像，并非所有浏览器都会触发事件。

# php - 验证字段数组，如果至少填写一个则允许传递

> ID：14740609
> 
> 赞同：0
> 
> 时间：2013-02-06T23:05:50.513
> 
> 标签：php, codeigniter

我的验证设置如下：

```
[
    'field' => 'impressions[]',
    'label' => 'Impressions',
    'rules' => 'required'
], 
```

我有五个称为印象[] 的输入字段。我遇到的问题是，除非全部填写，否则表格将无法验证。我想让它只需要一个。有什么最佳实践吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T23:11:03.950

@dallen，

您需要使用验证回调来检查：

[http://ellislab.com/codeigniter/user-guide/libraries/form_validation.html#callbacks](http://ellislab.com/codeigniter/user-guide/libraries/form_validation.html#callbacks)

您可以将印象传递给它，然后进行正常的 php 数组大小检查等

# c# - 检查碰撞 2D 阵列连接 4

> ID：14740617
> 
> 赞同：1
> 
> 时间：2013-02-06T23:06:58.360
> 
> 标签：c#, arrays, 2d, collision

我目前正在尝试在 C# 中制作 2D 连接四游戏。你知道什么时候所有 4 种颜色都必须匹配。无论如何，我目前正试图让碰撞工作，但不断收到错误消息“索引超出数组范围”你知道这是为什么吗？谢谢

```
private void rules()
{
    int count = 0;

    if (btn[maxR, maxC].BackColor == Color.Red)
    {
        count = 1;
    }
    for (int i = 0; i <= btn.Length; i++)
    {

        if (btn[maxR, i].BackColor == Color.Red)
        {
            count++;
        }

    }
    if (count >= 4)
    {
        lbl2.Text = "winner";
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T23:11:12.447

你用过：

```
i <= btn.Length 
```

这会导致超出范围异常，因为索引从零开始并以`btn.Length-1`.

所以使用：

```
for (int i = 0; i < btn.Length; i++) 
```

PS：不知道有没有逻辑错误。

# python-2.7 - python memoize 装饰器过程安全吗？

> ID：14740618
> 
> 赞同：0
> 
> 时间：2013-02-06T23:07:06.993
> 
> 标签：python-2.7, multiprocessing, decorator, memoization

标准 memoize 装饰器中的缓存是否安全？

例如，假设我定义了以下装饰器：

```
import functools

def memoize(func):
    cache = {}
    @functools.wraps(func)
    def memoized(*args):
        result = None
        if args in cache:
            result = cache[args]
        else:
            result = func(*args)
            cache[args] = result
        return result
    return memoized 
```

并假设我正在尝试使用它来加速递归函数的计算，例如：

```
@memoize
def fib(n):
    result = 1
    if n > 1:
        result = fib(n-1) + fib(n-2)
    return result 
```

现在我想知道计算 fib() 的两个进程是否会发生冲突？例如：

```
if __name__ == "__main__":
    from multiprocessing import Process
    p1 = Process(target=fib, args=(19,))
    p2 = Process(target=fib, args=(23,))
    p1.start()
    p2.start()
    p1.join()
    p2.join() 
```

我的第一个想法是缓存保存在 fib 的上下文中，因此它在进程之间共享，这可能导致竞争条件。但是，我认为可能发生的最坏情况是，他们都会认为，比如说，fib(17) 尚未计算，并且都会继续并行计算并一个接一个地存储相同的结果-不理想，但并不可怕，我猜。但我仍然想知道是否有办法以过程安全的方式来做到这一点。

编辑：我在 memoized() 的每个分支中添加了一个打印语句，似乎每个进程都重新计算了缓存中的所有 fib 值。或许缓存不是共享的，毕竟？如果它没有被共享，我会想如果有一种过程安全的方式来共享它（以节省更多的计算）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T23:38:42.807

默认情况下，Python 中的多进程程序在进程之间共享很少。共享的少数东西是`pickled`，它有其自身的一些限制。您的示例中的`fib`函数名义上是共享的，但`pickle`按名称而不是按值存储函数。这就是为什么它的缓存不被共享的原因。

如果你想为你的`memoize`装饰器有一个同步缓存，你需要向它添加同步，例如 a`multiprocessing.Queue`或`multiprocessing.Array`. 不过，这可能比简单地让每个进程重新计算值要慢，因为它会在进程来回传递更新时引入大量开销。

或者，如果您不需要单独的进程在运行时紧密同步，您可以提出一种在进程启动和停止时将缓存传入和传出进程的方法（例如，使用额外的参数并返回value)，因此即使并行调用没有，顺序调用也可以从记忆中受益。

# c++ - C2440 用于重载函数 MsgProc

> ID：14740620
> 
> 赞同：0
> 
> 时间：2013-02-06T23:07:12.530
> 
> 标签：c++, directx-9

这是[这个](https://stackoverflow.com/questions/14739385/why-cant-i-initialize-wndclassex-wc/14739467)问题的延续。

我有以下任务：

```
WNDCLASSEX wndClass =
{
    sizeof( WNDCLASSEX ), CS_CLASSDC, MsgProc, 0, 0,
    GetModuleHandle( NULL ), NULL, NULL, NULL, NULL,
    "D3D Tutorial", NULL
};
wc = wndClass; 
```

这给了我以下错误：

> 1>e:\rat_engine\rat_engine\rat_engine\rat_rendererdx9.cpp(19): 错误 C2440: 'initializing' : 无法从 'overloaded-function' 转换为 'WNDPROC'
> 
> 1>作用域内没有同名的函数与目标类型匹配

由于 MsgProc 下划线是原因，它应该引用以下函数：

```
LRESULT WINAPI RAT_RendererDX9::MsgProc( HWND hWnd, UINT msg, WPARAM wParam, LPARAM lParam )
{
    switch( msg )
    {
        case WM_DESTROY:
            CleanUp();
            PostQuitMessage( 0 );
            return 0;

        case WM_PAINT:
            Render();
            ValidateRect( hWnd, NULL );
            return 0;
    }

    return DefWindowProc( hWnd, msg, wParam, lParam );
} 
```

在教程中它是这样工作的，我几乎完全复制了它。那么错误来自哪里，我该如何解决呢？

编辑：

MsgProc 的声明是：

```
private:
    LRESULT WINAPI MsgProc( HWND hWnd, UINT msg, WPARAM wParam, LPARAM lParam ); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-06T23:17:44.550

从您的声明来看，`MsgProc`它似乎是一个常规成员函数，这意味着它需要一个“隐藏”`this`指针。这使得它与 WNDPROC 不兼容，这就是编译器抱怨的原因。

尝试将其标记为`static`. 当然，这意味着您不能轻松访问该类的非静态成员 - 您需要在`this`某个地方存储您想要的实例指针的副本来执行此操作。

您可能还需要`CALLBACK`，`WINAPI`但我目前无法轻松访问编译器来验证这一点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-09-23T16:57:41.937

对我来说，将类的实例/对象绑定到 HWND 似乎最优雅。要设置和检索指向您的实例的指针，您可以使用[`SetWindowLongPtr`](https://msdn.microsoft.com/en-us/library/windows/desktop/ms644898.aspx)/ [`GetWindowLongPtr`](https://msdn.microsoft.com/en-us/library/windows/desktop/ms633585(v=vs.85).aspx)。

所以在创建你的窗口之后，你打电话

```
SetWindowLongPtr(hWnd, GWLP_USERDATA, static_cast<LONG_PTR>(this)); 
```

在你的`WindowProcedure`, 你打电话

```
YourClass* instance = static_cast<YourClass*> (GetWindowLongPtr(hWnd, GWLP_USERDATA)); 
```

在创建窗口时要小心`WindowProcedure`：它已经被调用，但显然，你只能在`SetWindowLongPtr`之后调用。所以，当你`WindowProcedure`第一次被调用时，`GetWindowLongPtr`将会失败。确保该功能甚至在这些情况下也有效。

# jquery - 如果选中特定，则 jQuery 多选复选框

> ID：14740626
> 
> 赞同：1
> 
> 时间：2013-02-06T23:07:57.317
> 
> 标签：jquery, html, checkbox, jquery-selectors

如果选择了特定的复选框，我正在尝试在 div 中选择多个复选框。这就是我想要做的[http://jsfiddle.net/8PLH6/](http://jsfiddle.net/8PLH6/)

我正在努力完成这项工作。如果我选中“全部”，则应选中以下所有复选框。出于某种原因，我无法正确选择选择器。代码：

```
<div style="float:left;padding-right:15px;">
<div align="left" style="padding-bottom: 4px; padding-left: 6px;" class="bottom">
    <input type="checkbox" value="1" id="all"/><a href="#" title="All">All</a>
</div>
<div align="left" style="padding-bottom: 4px; padding-left: 6px;" class="bottom">
    <input type="checkbox" value="1" id="cat417"/><a href="" title="1">1</a>
</div>
<div align="left" style="padding-bottom: 4px; padding-left: 6px;" class="bottom">
    <input type="checkbox" value="1" id="cat410"/><a href="" title="2">2</a>
</div>
<div align="left" style="padding-bottom: 4px; padding-left: 6px;" class="bottom">
    <input type="checkbox" value="1" id="cat401"/><a href="" title="3">3</a>
</div>
<div align="left" style="padding-bottom: 4px; padding-left: 6px;" class="bottom">
    <input type="checkbox" value="1" id="cat415"/><a href="" title="4">4</a>
</div>
</div> 
```

和

```
$(document).ready(function () {
$('#all').change(function () {
    $a = $(this).parent('div').parent('div').children('div').children('input[type="checkbox"]');
    $b = $(this).attr('checked');
    if ($b) {
        $($a).attr('checked', true);
    } else {
        $($a).attr('checked', false);
    }
}); 
```

});

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T23:36:47.170

这可能非常棘手。请使用该`.prop()`功能。

```
$(document).ready(function()
{
    $('#all').on("click",function () {
          $("input[type='checkbox']").not("#all").each(function() 
       {
           $(this).prop("checked",$("#all").is(":checked"));
        });
    });
}); 
```

jsfiddle：http: [//jsfiddle.net/8PLH6/3/](http://jsfiddle.net/8PLH6/3/)

# qlikview - 如何从 SQL Server DB 加载 NT 用户以授予对 Qlikview 文件的访问权限？

> ID：14740627
> 
> 赞同：3
> 
> 时间：2013-02-06T23:07:59.390
> 
> 标签：qlikview

是否可以直接从 SQL Server 数据库加载“用户”和“访问”数据以与记录的实际 NT 用户进行比较并授予对我的 QlikView 文件的访问权限？

先感谢您。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-07T16:52:48.140

您的问题没有详细说明您的部署。我假设您正在使用 Qlikview Server、Qlikview Publisher，并且正在通过访问点访问文档。

为了使用户能够访问 Qlikview 应用程序，实际上需要两层安全性，并且您在默认 NTFS 模式（不是 DMS 模式）下运行。

1.  文件权限
2.  部分访问（行级安全性）

文件权限控制谁可以访问文档，部分访问控制每个用户可以在应用程序中看到的数据行。如果在 Qlikview 应用程序中实施了部分访问，并且用户没有被授予访问任何数据行的权限，他们将无法打开该应用程序。

部分访问不是强制性的，只有在您的安全模型需要对数据进行行级过滤时才需要。可以通过多种方式识别用户（AD 组或帐户 SID、Windows 登录、Windows AD 组名称等）。

所以简而言之，是的，您可以从 SQL Server 数据库（或其他数据源）加载安全数据，并使用它在您的 Qlikview 应用程序中应用安全性。QlikView Desktop 在线帮助中详细描述了部分访问功能。除了在部分访问数据中指定之外，唯一的其他考虑因素是确保所有适当的用户都具有访问文件的文件级权限。

---在澄清问题后添加了以下示例---

我通常首先将部分访问数据存储到 QVD 作为提取脚本的一部分：

```
OLEDB CONNECT TO [Provider=SQLOLEDB.1;Integrated Security=SSPI;Persist Security Info=False;Initial Catalog=YOURDB;Data Source=YOURDBSERVER;Use Procedure for Prepare=1;Auto Translate=True;Packet Size=4096;Use Encryption for Data=False;Tag with column collation when possible=False];

SectionAccessData:
LOAD
    Upper(Trim(NetworkUserID)) AS [NTNAME]
    //NTSID can be used in place of NTNAME if that's what you have stored in your data - but you should only use one or the other on a given row of data.  
    //,Upper(Trim(NTSID)) AS NTSID
    ,'USER' AS [ACCESS]
INLINE
    [
    NetworkUserID,SomethingToSecure
    DOMAIN\graeme.smith,SOMEDATATOFILTER
    ];

STORE SectionAccessData INTO SectionAccessData.qvd (qvd); 
```

然后，您可以将此数据加载到 QVW 中包含 UI 元素的 Section Access 表中：

```
SECTION ACCESS;
LOAD 
    [ACCESS]
    ,[NTNAME] 
    //,NTSID    
    //This field will be joined to the data model to restrict the data that the user can see. 
    ,[SomethingToSecure] AS [SomethingToSecure]
FROM
    $(QvdDirectory)\SectionAccess.qvd (qvd)
WHERE 
    (1=1);

SECTION APPLICATION; 
```

您还需要在 UI 文档中修改以下文档属性：

文档属性 -> 打开选项卡

1.  基于检查的部分访问的初始数据减少
2.  严格排除检查
3.  禁止二进制负载检查

如果您需要从 SQL 而不是内联表加载数据：

替换这个：

```
INLINE
[
NetworkUserID,SomethingToSecure
DOMAIN\graeme.smith,SOMEDATATOFILTER
]; 
```

有了这个：

```
SQL
SELECT  
MyNetworkUserIDField as NetworkUserID,
MySomethingToSecure as SomethingToSecure
FROM MyDB.dbo.MyTable; 
```

# arrays - 如何通过python从json数组中获取数据

> ID：14740633
> 
> 赞同：0
> 
> 时间：2013-02-06T23:08:47.253
> 
> 标签：arrays, json, python-2.7, mod-wsgi

我有以下 json 对象数据，如何使用 python 来获取`"BuildId"`第二个`"ftp"` （注意：它在`"ArchiveLocation"`）值？

```
 {"BuildId":"4c53575f-36f48a7f1f37",
      "EventId":1,
      "ArchiveLocations":
      [
         {
            "archive_server":"CA",
            "ftp":"ftp://ABC1.com/2011_V2/2011.4.103.002",
            "dfs":"\\\\ABD\\dfs\\Department\\2011.4.103.002"
         },
         {
            "archive_server":"CT",
            "ftp":"ftp://ABC2.com/2011_V2/2011.4.103.002",
            "dfs":"\\\\ABD.com\\dfs\\Department\\2011.4.103.002"
         }
      ]

   } 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-07T21:37:39.833

你可以这样做：

```
data =   {
      "BuildId":"4c53575f-36f48a7f1f37",
      "EventId":1,
      "ArchiveLocations":
      [
         {
            "archive_server":"CA",
            "ftp":"ftp://ABC1.com/2011_V2/2011.4.103.002",
            "dfs":"\\\\ABD\\dfs\\Department\\2011.4.103.002"
         },
         {
            "archive_server":"CT",
            "ftp":"ftp://ABC2.com/2011_V2/2011.4.103.002",
            "dfs":"\\\\ABD.com\\dfs\\Department\\2011.4.103.002"
         }
      ]

   }

buildid = data['BuildId']
firstserver = data['ArchiveLocations'][0]['archive_server']
secondserver = data['ArchiveLocations'][1]['archive_server']

print buildid, secondserver 
```

这返回`4c53575f-36f48a7f1f37 CT`

或者，您可以遍历每个键并以这种方式提取值。很难给你一个完整的答案，因为我不知道你的问题的上下文。

# javascript - 我使用 .done() 错了吗？

> ID：14740634
> 
> 赞同：-1
> 
> 时间：2013-02-06T23:08:48.073
> 
> 标签：javascript, jquery, ajax

我有一个应用程序，我想从 API 获取数据`.getJSON()`并将其存储在一个数组中，但我不想在数组完全加载之前继续使用代码，所以我调用了该`.done()`方法，但是我的代码在数组完全定义之前继续向前移动，导致未定义的错误。以下是相关代码：

```
var similarList  = getSimilar(randArtist, year);
        similarList.done(function(item){
            for (var j=0, len=similarList.length; j<len; j++){
            similarArtistDict[similarList[j].name] = 
similarArtistDict[similarList[j].name] || true;
        } 
```

该`getSimilar`函数应该返回一个列表，从而定义变量similarList。相反，尽管我调用了 done，但代码直接移动到 for 循环，导致循环尝试获取`similarList.length`.

编辑第 2 部分：我的 getSimilar 方法的精简版本供参考。我意识到函数本身没有返回任何东西，所以我尝试返回 AJAX 调用本身——它没有返回数组。如何调整此函数以返回数组 data.artists？：

```
function getSimilar(name, year){
    $.getJSON(ECHONEST_SIMILAR_URI, {
            api_key: ECHONEST_KEY,
            name: name,
            artist_start_year_before: year,
            results: '5'

    }, function(response){
         var data = response.response;
         console.log(data);
         console.log(data.artists);
         return data.artists;
    } ); } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T23:23:31.900

我想我可以猜到你哪里出错了。

我假设你的`getSimilar`功能看起来像

```
function getSimilar(a,b){
    var arr;
    $.get("test.php").done(function(val) {
        arr = val;
    });
    return arr;
} 
```

如果是这样，您忘记了 AJAX 意味着异步。您希望在请求完成后执行回调函数。

试试这样的东西。

```
function getSimilar(a,b){        
    $.get("test.php").done(function(val) {
        GetListCallback(val);
    });
}
function GetListCallback(val){
    for (var j=0, len=similarList.length; j<len; j++){
        similarArtistDict[similarList[j].name] = similarArtistDict[similarList[j].name] || true;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-07T01:19:05.427

您不能从`getSimilar`函数中返回数组，因为它是异步获取的，并且在函数返回时还不可用。但是，您可以返回异步 jax 调用结果的承诺，并将其通过[管道](http://api.jquery.com/deferred.pipe/)传递到数组中（在最近的 jQuery 版本中，它是`then`方法）：

```
getSimilar(randArtist, year).done(function(similarList) {
    for (var j=0, len=similarList.length; j<len; j++) {
        similarArtistDict[similarList[j].name] = similarArtistDict[similarList[j].name] || true;
    }
});
function getSimilar(name, year){
    return $.getJSON(ECHONEST_SIMILAR_URI, {
            api_key: ECHONEST_KEY,
            name: name,
            artist_start_year_before: year,
            results: '5'

    }).then(function(response){
         var data = response.response;
         console.log(data);
         console.log(data.artists);
         return data.artists;
    });
} 
```

# ruby-on-rails-3 - 将预建的引导模板导入 Rails

> ID：14740639
> 
> 赞同：2
> 
> 时间：2013-02-06T23:09:00.000
> 
> 标签：ruby-on-rails-3, templates, twitter-bootstrap

我可以通过将@import Bootstrap-sass 添加到我的 css 中并导入 bootstrap gem 来获得标准的 bootstrap + rails 站点。我想知道的是：我在[http://builtwithbootstrap.com/](http://builtwithbootstrap.com/)上找到了我喜欢的引导模板。具体来说，它是[http://www.trippoinc.com/flexapp-demo](http://www.trippoinc.com/flexapp-demo)如何获取此模板并将其导入干净的 Rails + Bootstrap 应用程序？然后我可以删除 html，并在页面上重新添加我自己的信息，以及重新设置它的样式。

感谢所有的帮助。

# c# - 无法从传输连接中读取数据

> ID：14740642
> 
> 赞同：2
> 
> 时间：2013-02-06T23:09:15.023
> 
> 标签：c#, web-services, soap

我需要使用 C# 中的 Web 服务，但这样做需要身份验证。尝试调用服务时，出现此错误：

> *无法从传输连接中读取数据。现有连接被远程主机强行关闭*

如果我在 SoapUI 中使用 Web 服务，我可以调用它。但我必须通过密码文本分配 wss-password 类型。如果没有分配它会给我错误

所以不要错过在 c# 上消费时分配密码文本

谢谢

# ruby-on-rails - 我是否需要覆盖 Rails 并将“类”添加到 has_many

> ID：14740643
> 
> 赞同：0
> 
> 时间：2013-02-06T23:09:15.953
> 
> 标签：ruby-on-rails, ruby-on-rails-3.2, rails-activerecord

我的一些 has_many 关系指向具有有效英文名称的类，例如：

```
 has_many :users
  has_many :providers 
```

但对于其中一些，模型名称是例如**key_perform_ind**所以`has_many`看起来像这样：

```
has_many :key_perform_inds 
```

所以我的问题是在这种情况下我是否应该使用 class 关键字并明确告诉 rails 我在说什么类？

如果这很重要，我正在使用 Rails 3.2。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T23:11:37.497

您可以随意命名您的关联...如果名称与实际的类名不同，您需要指定它。

```
has_many :key_performing_industries, class_name: 'KeyPerformInd' 
```

# java - Java Applet 与 Applet 之间的通信仅与一个 Instance

> ID：14740645
> 
> 赞同：0
> 
> 时间：2013-02-06T23:09:22.863
> 
> 标签：java, japplet

我必须为家庭作业编写一个简单的 JApplet，但我有点卡住了。很简单，applet 有一个 JTextField 和一个 JButton。

现在，如果我打开该 Applet 两次，它们应该进行通信（在 TextField 中写入->单击按钮，文本显示在另一个 TextField 中），但没有客户端-服务器通信之类的东西。我打开Applet的两次，它们必须是**同一个实例。**

谈到 Applets，我几乎是个菜鸟，所以我很感激任何帮助。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T23:15:11.993

如有疑问，请始终查看 Oracle 的 Java 教程。这是小程序间通信教程的链接 [http://docs.oracle.com/javase/tutorial/deployment/applet/iac.html](http://docs.oracle.com/javase/tutorial/deployment/applet/iac.html)

# vba - 删除列表框中的多个选定项目 - 仅识别第一个选择的代码

> ID：14740649
> 
> 赞同：5
> 
> 时间：2013-02-06T23:09:43.133
> 
> 标签：vba, ms-access, listbox, multi-select

我有两个列表框，正在尝试将列表 1 中的项目添加到列表 2，然后能够一次从列表 2 中删除多个项目。请注意，列表 1 保持不变（这就是它应该的样子）。

我的添加项目工作正常：

```
'Add the selected items to List 2
Dim i As Integer

If lst1.ItemsSelected.Count > 0 Then
    i = 0
    While i < lst1.ListCount
        If lst1.Selected(i) Then
            lst2.AddItem (lst1.ItemData(i) & ";" & lst1.Column(1, i) & ";")
            lst1.Selected(i) = False
        End If
        i = i + 1
    Wend
End If 
```

但是，当我尝试以类似方式从列表 2 中删除项目时，它只会将第一个选定项目识别为已选中，并跳过我选择的其他项目。这就是问题。这是我的代码：

```
'Remove the selected items from List 2
Dim i As Integer

If lst2.ItemsSelected.Count > 0 Then
    i = lst2.ListCount - 1
    While i >= 0
       If lst2.Selected(i) Then
           lst2.RemoveItem (i)
           lst2.Selected(i) = False
       End If
        i = i - 1
    Wend
End If 
```

我怎样才能让它正常工作？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-07T12:42:51.407

据我所知，一旦您删除一个项目，所有项目都会被取消选中，所以：

```
Dim itm As Variant
Dim srem As String
Dim asrem As Variant

    For Each itm In lst2.ItemsSelected
        srem = srem & "," & itm
    Next

    asrem = Split(Mid(srem, 2), ",")
    For i = UBound(asrem) To 0 Step -1
        lst2.RemoveItem lst2.ItemData(asrem(i))
    Next 
```

另请注意，这是 Access 并且您正在处理一个值列表，因此对 Row Source 的文本进行替换也将起作用。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-02-07T07:08:51.303

尝试使用 for/next 循环而不是 While？

像这样的东西在 PPT/XLS 中有效，我认为在 Access 中应该是类似的。

```
For i = lst2.ListCount - 1 to 0 step -1
    If lst2.Selected(i) = True Then
        lst2.RemoveItem(i)
    End If
Next 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-08-24T18:43:04.367

与@Fionnuala 相同的概念，但我使用了一个我通常认为更灵活的集合：

```
Dim i As Integer
Dim listColl As Collection
Dim Item As Variant

Set listColl = New Collection
With Me.listAvailable
    ' Add Selected Items to Collection (MultiSelect Listbox)
     For i = 0 To .ListCount - 1
        If .Selected(i) Then
            listColl.Add .ItemData(i)
        End If
    Next i
End With

For Each Item In listColl
    Me.listSelected.AddItem Item
    Me.listAvailable.RemoveItem Item
Next Item 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-07-09T22:23:57.337

我使用了这段代码，它工作正常

```
Dim ArraySlctd() As Variant  'this Arry is to save what row is selected because when remove any row all selected are getting false
ReDim ArraySlctd(0 To Me.List1.ListCount - 1)
For lp = 0 To Me.List1.ListCount - 1 '
ArraySlctd(lp) = Me.List1.Selected(lp) 'work in the same range as the selected property
Next lp 
```

现在它易于使用

```
For lp = 0 To Me.List1.ListCount - 1
If ArraySlctd(lp) = True Then
'Remove Or Change(by remove and AddIten with the same Index)
End If

Next lp 
```

# android - Android 传感器数据丢失

> ID：14740652
> 
> 赞同：3
> 
> 时间：2013-02-06T23:09:53.520
> 
> 标签：android, sensors

我正在我的 Android 应用程序中收集数据，如下所示（这是一个精简版）：

```
public class Main extends Activity {

    ...

    public void log5secs(){
        try {
            CollectData collectData = new CollectData(this);
            // collect data for five seconds in the background
            Thread.sleep(5000);
            Log.d("unregister", "gyro from Main: "+collectData.gyroscopeResults.size());
            fingerprint.finish();
        } catch (InterruptedException e) {
            e.printStackTrace();  //To change body of catch statement use File | Settings | File Templates.
        }
    }        

}

public class CollectData implements SensorEventListener  {

    ArrayList<SensorEvent> gyroscopeResults = new ArrayList<SensorEvent>();

    public CollectData(Context context){
        sensorManager = (SensorManager) context.getSystemService(Context.SENSOR_SERVICE);
        gyroscope = sensorManager.getDefaultSensor(Sensor.TYPE_GYROSCOPE);
        sensorManager.registerListener(this, gyroscope, SensorManager.SENSOR_DELAY_NORMAL);
    }

    public void onSensorChanged(SensorEvent event) {
        gyroscopeResults.add(event); 
        Log.d("SensorChanged", "gyro results size: "+gyroscopeResults.size());
    }

    public void finish(){
        unregister();
    }

    private void unregister() {
        Log.d("Unregister", "gyro results size before unregister: "+gyroscopeResults.size());
        sensorManager.unregisterListener(this);
    }
} 
```

因此，日志消息显示每次调用 onSensorChanged 事件时，ArrayList 的大小都会增加（在 5 秒内达到 26）。

但是，当从 Main 请求大小或由于调用 unregister() 时，ArrayList 的大小为零。在调试器中，我看不到它在哪里发生了变化。

我的数据怎么了？？？

我在 HTC Sensation XL 上运行它。

**更新**：获得更多信息！出于好奇，我将 ArrayList gyroscopeResults 设为 Main 类中的静态字段。效果很有趣 - 第二次录制完成，第一次的结果是可见的（但不是第一次）。我想这意味着主线程在传感器数据被记录之前就完成了——某种缓冲问题？？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T05:50:37.790

您的数据没有丢失，问题在于`Thread.sleep()`程序暂停 5 秒（包括传感器收集），然后`fingerprint.finish();` **在此之后**执行该行，开始传感器收集。

所以当你打电话时`Log.d("Unregister", "gyro results size before unregister: "+gyroscopeResults.size());`你会得到`0`，因为在程序睡眠时没有记录传感器数据。

这里有一些建议可以让你的程序按预期工作

采集*5 秒*的数据，可以使用 a `Timer`（这里我是在 5 秒后取消定时器，但是你可以在清除 后继续采集`ArrayList`，以免内存不足）

```
final Timer timer = new Timer();
final CollectData collectData = new CollectData(MainActivity.this);

timer.schedule(new TimerTask() {
boolean started = false;
@Override
public void run() {
  if (!started) {
    Log.d("unregister", "BEFORE] gyro from Main: " + collectData.gyroscopeResults.size());
    started = true;
  } else {
    collectData.finish();
    Log.d("unregister", "AFTER] gyro from Main: " + collectData.gyroscopeResults.size());
    timer.cancel();
  }
    }
}, 0, 5000); 
```

另一种解决方案，可能更简单，如果你想保留`Thread.sleep()`是`log5secs()`在一个`Thread`

```
new Thread() {
    public void run() {
        log5secs();
    }
 }.start(); 
```

但是，如果您想要连续传感器记录，*您*每 5 秒对数据执行一次操作（例如记录到文件和/或清除） ，则使用`Timer`会更合适*`ArrayList`*

# jquery-ui - ThemeRoller 的哪个设置对应于 jqGrid 的标题？

> ID：14740653
> 
> 赞同：0
> 
> 时间：2013-02-06T23:09:57.223
> 
> 标签：jquery-ui, jqgrid, themeroller, jquery-ui-theme

我使用基于 UI Lightness 主题的 ThemeRoller 构建了一个自定义 jQuery UI 主题。我的 jqGrid 现在看起来像这样

![在此处输入图像描述](../Images/9e70c5c9c81243328eac1603e41f5fe2.png)

根据我的调查，标头使用 css 类`ui-state-default ui-th-column ui-th-ltr`并使用背景图像：`images/ui-bg_glass_100_f6f6f6_1x400.png`来自`jquery-ui-1.10.0.custom.css`.

我在[ThemeRoller](http://jqueryui.com/themeroller/#!zThemeParams=5d000001001906000000000000003d8888d844329a8dfe02723de3e5701fa198449035fc060c61aeebe57aea956f56549c851e4dedb571bfffb8f578685ef517268da3618fd1ebce754b46d871034ddfcf86ff7c383efa534e69120e9f006d47f2e0c8b412218361f1c059b596e6da9517783e66c02c24942424be3f98eab2cd751efcdb935018ce2f0647c2a75b32804b0cfe6aa0aae6c2ee351117528888bba0df65401d06a5880b07aab2d77b0e9178c038b844bbe7b169122365b9d6aedc1ac96a6e478cef6dac00f0a4c790bb579e36d5ba0b96c19036c163a79b881755d316133814e0e2703458180ad904c59197a9225c8df510e7ba74c4632e1a0155baecf85648aa78df4c15f3ee7c2d3df90d86669535482906c774c661c4668603b1972a6e94635b38ff6da06d424deadd0c49226eb1148bfc241aaf487ae945fba22329a3feeb53a55b2f4e22ebca2763faa40599753d6622908ecf4ca2a80238274471306e31685c4cbea62d42c9b21bcbc248f13e02b50e65db16a0a266c2ca98d720d9bb2db74a82f10457b81928a89b1af2066880472b9e55f5055a524f03c68b359166c7fafd65fdec6d3df8f63aa9821ac2b013c2695952b19fcdeee7e9d6e4e9ac166fda1369853b5e63c76de53c420ad127f9565b1e16607a9b5b854e9d046a77fe6250fe53e4ac2f836d68966c2261e0da3f197076cb44159a1b53d1f1e3938326063e493a43ffdbae6409)中更改了哪些设置来更改标题颜色？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T16:31:52.603

使用当前的 jQuery.UI：1.10.2 和当前的 jqGrid：4.4.4，我可以通过设置[ThemeRoller的 Clickable: 默认状态来更改标题](http://jqueryui.com/themeroller)

# ios - 点击视图时如何隐藏/显示我的导航栏（不是导航控制器）？

> ID：14740654
> 
> 赞同：2
> 
> 时间：2013-02-06T23:10:03.540
> 
> 标签：ios, xcode, cocoa-touch

我的滚动视图中有一个导航栏。（使用 StoryBoard）
我想在用户点击视图时隐藏我的导航栏。
当用户再次点击时，将显示导航栏。
我怎样才能做到？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-06T23:15:32.670

如果您使用导航栏（没有控制器），则必须为导航栏框架的变化以及滚动视图的变化设置动画。在下面的示例中，我只是将导航栏从屏幕顶部移开并相应地调整滚动视图的大小。您显然需要`IBOutlet`导航栏和滚动视图的引用：

```
@interface ViewController ()

@property (nonatomic) BOOL navigationBarHidden;

@end

@implementation ViewController

- (void)viewDidLoad
{
    [super viewDidLoad];

    self.navigationBarHidden = NO;

    UITapGestureRecognizer *gesture = [[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(handleTap:)];
    [self.scrollView addGestureRecognizer:gesture];
}

- (void)handleTap:(id)sender
{
    [UIView animateWithDuration:0.5
                     animations:^{
                         CGRect navBarFrame = self.navBar.frame;
                         CGRect scrollViewFrame = self.scrollView.frame;

                         if (self.navigationBarHidden)
                         {
                             navBarFrame.origin.y += navBarFrame.size.height;
                             scrollViewFrame.size.height -= navBarFrame.size.height;
                         }
                         else
                         {
                             navBarFrame.origin.y -= navBarFrame.size.height;
                             scrollViewFrame.size.height += navBarFrame.size.height;
                         }

                         self.scrollView.frame = scrollViewFrame;
                         self.navBar.frame = navBarFrame;

                         self.navigationBarHidden = !self.navigationBarHidden;
                     }];
}
@end 
```

如果您使用自动布局，它会略有不同（您必须为约束的变化设置动画），但基本思想是相同的。如果您仅针对 iOS 6 及更高版本并使用自动布局，请告诉我。

* * *

如果您使用的是导航控制器，它会更容易一些，因为您可以隐藏[`setNavigationBarHidden`](http://developer.apple.com/library/ios/documentation/uikit/reference/UINavigationController_Class/Reference/Reference.html#//apple_ref/doc/uid/TP40006934-CH3-SW9)：

```
[self.navigationController setNavigationBarHidden:YES animated:YES]; 
```

您可以显示：

```
[self.navigationController setNavigationBarHidden:NO animated:YES]; 
```

如果您想在水龙头上执行此操作，您可以执行以下操作（`IBOutlet`为此您需要滚动视图）：

```
- (void)viewDidLoad
{
    [super viewDidLoad];

    UITapGestureRecognizer *gesture = [[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(handleTap:)];
    [self.scrollView addGestureRecognizer:gesture];
}

- (void)handleTap:(id)sender
{
    BOOL hidden = self.navigationController.navigationBarHidden;

    [self.navigationController setNavigationBarHidden:!hidden animated:YES];
} 
```

# node.js - 如何在 Node 中使用 coffeescript 的命名空间代码？

> ID：14740655
> 
> 赞同：0
> 
> 时间：2013-02-06T23:10:04.333
> 
> 标签：node.js, oop, coffeescript

相关：[Coffeescript“命名空间”中的类](https://stackoverflow.com/questions/8730859/classes-within-coffeescript-namespace)

好的，所以在阅读了那篇文章后，我抓住了命名空间函数并将其放入自己的文件中。

`namespace.coffee`

```
namespace = (target, name, block) ->
  [target, name, block] = [(if typeof exports isnt 'undefined' then exports else window), arguments...] if arguments.length < 3
  top    = target
  target = target[item] or= {} for item in name.split '.'
  block target, top
  console.log "created namespace "+ name

root = exports ? window
root.namespace = namespace 
```

然后在 Repl 中：

```
>  namespace = require('./assets/js/namespace.js').namespace
[Function] 
```

如果我 toString() 它是正确的。

好的，所以现在我想使用它：（`ns.coffee`来自 Sandro 的回答）

```
namespace = require('./namespace.js').namespace

class MyFirstClass
  myFunc: () ->
    console.log 'works'

class MySecondClass
  constructor: (@options = {}) ->
  myFunc: () ->
    console.log 'works too'
    console.log @options

namespace "Project.Something", (exports) ->
  exports.MyFirstClass = MyFirstClass
  exports.MySecondClass = MySecondClass
  console.log 'done with exports' 
```

然后我在 Repl 中运行它：

> ns = require('./assets/js/ns.js') # 编译后的 ns.coffee
> 使用导出
> 创建的命名空间 Project.Something
> {}

它似乎不起作用：

```
> ns.MyFirstClass                                              
undefined                                                      
> ns.MySecondClass                                             
undefined                                                      
> ns.Project.Something.MySecondClass                           
TypeError: Cannot read property 'Something' of undefined 
```

我在这里做错了吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T00:45:07.790

该`exports`变量是`module.exports` *您从中引用它的文件的*. 因此，当您调用时`namespace`，它会更改`exports`从`require`ing返回的内容`namespace`，而不是将从`require`ing返回的内容`ns`。

请注意如何`namespace`接受 3 个参数，但其中的第一行本质上是`target`可选的。如果你传入`target`（你可能想要`exports`，或者`exports ? window`如果这需要在服务器和客户端中运行），那么它应该做你想要的。

# perl - 带有斜杠的催化剂一致的 url 格式

> ID：14740656
> 
> 赞同：2
> 
> 时间：2013-02-06T23:10:09.057
> 
> 标签：perl, url, catalyst, trailing-slash

我正在开发一个[Catalyst](http://www.catalystframework.org)`Catalyst`应用程序，但在解释 url 的方式上遇到了麻烦。

假设在我们的 Catalyst 应用程序中，我们有一个控制器`Account`。如果是这种情况，Catalyst 将解释

> `http://mydomain.com/account` 和 `http://mydomain.com/account/`

作为**索引**操作的相同 url。

但是，出于 SEO 和链接的目的（并且只是为了总体上保持一致），我想强制 Catalyst 只识别一种格式并坚持使用它。

我发现了一个似乎为此构建的模块：[Catalyst::Plugin::SanitizeUrl](https://metacpan.org/module/Catalyst%3a%3aPlugin%3a%3aSanitizeUrl)，它的文档说你应该把

> 使用催化剂“SanitizeUrl”；

in`myapp.pm`这将为您处理一切。

但是，每当我使用它时，我都会收到此**错误：**

```
Bad request 
```

在每个页面加载。有谁知道让 Catalyst 只使用一种格式的简单方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T16:15:56.407

强制 Catalyst 仅使用一种格式而不使用斜杠的简单方法是将此方法添加到 MyApp.pm：

```
sub begin :Private {
    my ($self, $c) = @_;
    my @path = split "/", $c->req->path, -1;
    $c->detach('default') if @path and (pop @path eq '');
} 
```

如果 uri 在任何请求上以斜线结尾，它将重定向到“默认”方法，即第 404 页。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-25T00:12:01.230

我最终将 edem 所说的与我所做的一些东西结合起来，这是我的最终结果：

```
sub begin :Private {
    my ($self, $c) = @_;

    #don't allow trailing slashes!
    my @path = split "/", $c->req->path, -1;
    if(@path and (pop @path eq '')) {
        my $p = join '/', @path;
        #set as moved permanently
        $c->res->redirect("/$p", 301);
        return;
    }
} 
```

如果请求末尾有斜杠，它将始终重定向到相同的 url，但没有斜杠。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-07T06:15:56.070

我想您可以根据是否`/`存在尾随将 url 转发到不同的操作方法。所以，

```
sub index :Path :Args(0) { 
    my ($self,$c) = @_;
    my $path = $c->request->path;
    my $matched = $path =~ s/(\/)$//;
    if ($matched) {
          $c->forward('withslash');
    }
    else {
          $c->forward('withoutslash');
    }
} 
```

同样，这是一个未经尝试的解决方案，您可能需要检查它。

# c# - jqgrid 分页重复相同的行

> ID：14740657
> 
> 赞同：0
> 
> 时间：2013-02-06T23:10:19.587
> 
> 标签：c#, jquery, ajax, asp.net-mvc, jqgrid

我在 asp.net mvc 上使用 jqgrid。

我的观点：

```
 $("#phoneGrid").jqGrid({
        url: '/Demo/_PhoneChangeData',
        datatype: 'json',
        ajaxGridOptions: { contentType: 'application/json; charset=utf-8' }, 
        serializeGridData: function (postData) {
            if (postData.searchField === undefined) 
               postData.searchField = null;
            if (postData.searchString === undefined) 
               postData.searchString = null;
            if (postData.searchOper === undefined) 
               postData.searchOper = null; 
            return JSON.stringify(postData);
        },
        jsonReader: {
            root: "rows", 
            page: "page",
            total: "total",
            records: "records",
            cell:"cell",
            id: "id" 
        },
        postData:
        {
            accountNumber: "@Model.AccountNumber",
        },
        autoWidth: true,
        shrinkToFit: false,
        mtype: 'POST',
        colNames: ['Phone Number', 'Update Date', 'Update Time'],
        colModel: [
         { name: 'PhoneNumber', width:100, align: 'left' },
         { name: 'UpdateDate', width: 100, align: 'left' },
         { name: 'UpdateTime', width: 100, align: 'left' }],
        rowNum: 10,
        rowList: [], 
        pager: "#pagerphonedetail",
        viewrecords: true, 
        rownumbers: true,
        pgtext: null, 
        width: 346,
        height: 232

    }); 
```

我的控制器：

```
public ActionResult _PhonePopupChangeData(string accountNumber, 
    int page, int rows, string sidx, string sord,
    bool _search, string searchField, string searchOper, string searchString)
    {
        var phdetail = query.GetPhoneUpdHistory(accountNumber);// returns a list

        int recordsCount =  phdetail.Count;

        var viewData = phdetail.Select((p, index) => new TableRow
        {
            id = index + 1,
            cell = new List<string> {
                p.PhoneNumber,  p.UpdateDate, p.UpdateTime
            }
        }).ToArray();
        var jsonData = new
        {
            total = (recordsCount + rows - 1) / rows,
            page = page,
            records = recordsCount,
            rows = viewData
        };

        return Json(jsonData, JsonRequestBehavior.AllowGet);
    } 
```

* * *

**问题：** 我的问题是，每次回发后（如果我在分页上单击下一步）网格中的行永远不会更新，屏幕截图显示它更新了页面编号，但我仍然得到网格的前 10 行，它永远不会更新。如果您不理解我的问题，请告诉我。

* * *

![在此处输入图像描述](../Images/2399de01010e527fbd4552094c259d1b.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T00:10:29.007

看起来您没有在控制器中使用 page 参数并且每次都获得相同的列表。你可以这样做：

```
var viewData = phdetail.Skip(rows*(page-1)).Take(rows).Select((p, index) 
    => new TableRow {
        id = index + 1,
        cell = new List<string> {
            p.PhoneNumber,  p.UpdateDate, p.UpdateTime
        }
    }).ToArray(); 
```

我假设 rows 是每页的行数。

# php - PHP 中的 Javascript - 引用问题

> ID：14740659
> 
> 赞同：0
> 
> 时间：2013-02-06T23:10:28.183
> 
> 标签：php, javascript

我需要在我的 php 文件中包含一些 javascript，但我在使用 javascript 中的引号时遇到了困难

**这是javascript：**

```
<scripttype="text/javascript">

    var sc_project = $$$$;

    var sc_invisible = $;

    var sc_security = "$$$$$$$";

    var scJsHost = (("https:" == document.location.protocol) ? "https://secure." : "http://www.")

    document.write("<sc" + "ript type='text/javascript' src='" + scJsHost + "statcounter.com/counter/counter.js'></" + "script>");

</script> 
```

**我试过了**

```
echo {
    '<scripttype="text/javascript">

                var sc_project = $$$$$$;

                var sc_invisible = $;

                var sc_security = "$$$$$$";

                var scJsHost = (("https:" == document.location.protocol) ? "https://secure." : "http://www.")

                document.write("<sc" + "ript' . 'type=\'text/javascript\' src='' . ' + scJsHost + "statcounter.com/counter/counter.js'.'></" + "script>");

            </script>';
        } 
```

有什么办法可以让这个出现在我的 php 页面上？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T23:12:50.297

一方面......你不能关闭你的PHP然后repoen吗？

如果没有，请尝试转义引号。我通常喜欢将所有内容都用双引号括起来，这样我就可以将变量内联而不连接。

`.`另外你为什么在javascript中使用连接。我没有看到任何要连接的php。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T23:14:13.947

你的脚本标签应该是：

```
<script type="text/javascript"> 
```

因为`type`是一个属性。

当你在 PHP 中使用引号时，你可以为简单的事情混合引号......

```
$test = '<p id="example">Example using mixed quotes</p>'; 
```

如果它变得更复杂，你可以转义引号......

```
$test = '<p id="example">Example using \'escaped\' quotes</p>'; 
```

所以你可以使用这个：

```
echo '<script type="text/javascript">

    var sc_project = $$$$;

    var sc_invisible = $;

    var sc_security = "$$$$$$$";

    var scJsHost = (("https:" == document.location.protocol) ? "https://secure." : "http://www.")

    document.write("<sc" + "ript type=\'text/javascript\' src=\'" + scJsHost + "statcounter.com/counter/counter.js\'></" + "script>");

</script>'; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-06T23:15:08.080

它是php，你不需要echo。只需使用

```
...
?>
<script>
  var sc_project = $$$$$$;
  ...
</script>
<?php
... 
```

由于您的脚本无论如何都在输出页面。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-06T23:16:26.710

使用[nowdoc](http://php.net/manual/en/language.types.string.php#language.types.string.syntax.nowdoc)：

```
$js = <<<'JS'
<scripttype="text/javascript">

    var sc_project = $$$$;

    var sc_invisible = $;

    var sc_security = "$$$$$$$";

    var scJsHost = (("https:" == document.location.protocol) ? "https://secure." : "http://www.")

    document.write("<sc" + "ript type='text/javascript' src='" + scJsHost + "statcounter.com/counter/counter.js'></" + "script>");

</script>
JS;

echo $js; 
```

# c# - 正则表达式“或”运算符避免重复

> ID：14740661
> 
> 赞同：11
> 
> 时间：2013-02-06T23:10:40.707
> 
> 标签：c#, .net, regex

如何`or`在不允许重复的情况下使用运算符？换句话说，正则表达式：

```
(word1|word2|word3)+ 
```

将匹配 `word1word2`但也会匹配`word1word1`我不想要的，因为单词 word1 正在重复。如何避免重复？

总之，我希望匹配以下主题：

```
word1word2word3
word1
word2
word3word2 
```

请注意所有这些都匹配，因为没有重复。我希望以下科目失败：

```
word1word2word1
word2word2
word3word1word2word2 
```

## 编辑

感谢[@Mark](https://stackoverflow.com/users/61974/mark-byers) ，我知道有：

```
(?xi)

(?:  
        (?<A>word1|word2)(?!  .*  \k<A> )      # match for word1 or word2 but make sure that if you capture it it does not follow what it was just captured
    |   (?<B>word3|word4)(?!  .*  \k<B> )
)+ 
```

因为我有兴趣查看是否在 A 组或 B 组中捕获了某些东西。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-06T23:12:21.130

您可以使用[负前瞻](http://www.regular-expressions.info/lookaround.html)：

```
^(?:word1(?!.*word1)|word2(?!.*word2)|word3(?!.*word3))+$ 
```

在线查看它：[rubular](http://rubular.com/r/vVzB3H3FmN)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-06T23:49:51.743

前瞻解决方案在某些情况下不起作用，您可以通过使用如下构造正确解决此问题，无需环顾四周：

```
(?:(?(1)(?!))(word1)|(?(2)(?!))(word2)|(?(3)(?!))(word3))+ 
```

即使某些单词是其他单词的子字符串，这也有效，如果您只想找到更大字符串的匹配子字符串（而不仅仅是匹配整个字符串），这也可以工作。

[现场演示](http://ideone.com/kIOiwy)。

如果之前已经匹配，它只是通过失败更改来工作，由`(?(1)(?!))`. `(?(1)foo)`是一个条件，`foo`如果 group`1`之前匹配，则将匹配。`(?!)`总是失败。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-06T23:50:27.130

Byers 的解决方案编码太硬，并且在字母增加后变得非常麻烦。为什么不简单地让正则表达式查找重复匹配？

```
([^\d]+\d)+(?=.*\1) 
```

如果匹配，则该匹配表示在模式中发现了重复。如果匹配不起作用，则您有一组有效的数据。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-06T23:52:30.093

您可以使用包含反向引用的否定前瞻：

```
^(?:(word1|word2|word3)(?!.*\1))+$ 
```

其中`\1`指的是捕获组的匹配`(word1|word2|word3)`。

请注意，这假设`word2`不能通过将字符附加到 来形成`word1`，并且`word3`不能通过将字符附加到`word1`or来形成`word2`。

# graphics - 使用 Meshlab 进行纹理映射

> ID：14740662
> 
> 赞同：9
> 
> 时间：2013-02-06T23:10:54.667
> 
> 标签：graphics, mesh, meshlab

在未指定 UV 纹理坐标的情况下，使用 Meshlab 在裸 3D 网格上映射纹理图像的最简单方法是什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-09-16T18:13:08.770

过滤器 -> 参数化 -> 每个三角形或平面（选择您的偏好）

# xslt - 如何在本身使用 xsl 生成的节点上使用 xsl:apply-templates？

> ID：14740673
> 
> 赞同：2
> 
> 时间：2013-02-06T23:11:53.287
> 
> 标签：xslt, apply-templates

我有一个这样的xml：

```
<span reference="1">Reference Text 1</span>
<term reference="2">Reference Text 2</term> 
```

我需要它变成这样：

```
<span class="referenceText">Reference Text 1</span> <a href="1">[1]</a>
<i>Reference Text 2</i> <a href="2">[2]</a> 
```

所以，基本上，如果具有该`reference`属性的元素是一个跨度，我们就让它保持原样，添加`class="referenceText"`. 但是，如果它是任何其他元素，那么我们还应该应用为该元素创建的模板。这就是为什么`<term>`应该成为`<i>`- 我有一个模板：

```
<xsl:template match="term">
  <i><xsl:apply-templates select="@* |node()"/></i>
</xsl:template> 
```

对于具有`reference`属性的所有元素的转换，我有这个模板：

```
<xsl:template match="*[@reference]">

  <xsl:param name="href" select="./@reference"/>

  <xsl:choose>
    <xsl:when test="name() = 'span'">
      <span class="referenceText">
        <xsl:value-of select="."/>
      </span>
    </xsl:when>
    <xsl:otherwise>
      <xsl:element name="{name()}">
        <xsl:value-of select="."/>
      </xsl:element>
    </xsl:otherwise>
  </xsl:choose>

  <xsl:text> </xsl:text><a href="#{$href}">[<xsl:value-of select="./@href"/>]</a>

</xsl:template> 
```

不幸的是，这会导致以下输出：

```
<span class="referenceText">Reference Text 1</span> <a href="1">[1]</a>
<term>Reference Text 2</term> <a href="2">[2]</a> 
```

所以，`<term>`不转换成`<i>`. 看起来我需要某种递归来将模板重新应用于生成的内容，但我想不出任何东西。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T23:23:19.447

如果您使用的是 XSLT 1.0，则可以在变量中捕获输出，然后使用[exslt:node-set](http://www.exslt.org/exsl/functions/node-set/)函数将模板应用于变量。不过，尽量避免无限递归:)

```
<xsl:variable name="foo">
...
</xsl:variable>
<xsl:apply-templates select="exslt:node-set($foo)"/> 
```

* * *

*（**编辑：**合并与此答案相关的其他评论）*

为了使用 EXSLT 扩展，第一步是声明其名称空间。EXSLT 项目网站建议在您的`<xsl:stylesheet>`节点上这样做：

> 使用 EXSLT 中描述的扩展的第一步是为 EXSLT 模块定义相关的名称空间。您应该在样式表中的 xsl:stylesheet 元素上声明命名空间。

```
<xsl:stylesheet xmlns:exslt="http://exslt.org/common">
  //...
</xsl:stylesheet> 
```

此外，该`extension-element-prefixes`属性可用于防止将扩展名称空间添加到生成的文档中：

```
<xsl:stylesheet xmlns:exslt="http://exslt.org/common" extension-element-prefixes="exslt">
  //...
</xsl:stylesheet> 
```

# javascript - 为什么id没有变化？

> ID：14740681
> 
> 赞同：0
> 
> 时间：2013-02-06T23:12:24.530
> 
> 标签：javascript, html, css, getelementbyid

我正在尝试更改文本的颜色。为此，我使用 JavaScrip 更改标签`id`上的`div`t，以便应用不同的 CSS 规则。

**主页.html**

```
<html>
    <head>
        <link rel="stylesheet" type="text/css" href="style-original.css" />
        <meta charset="utf-8" />
        <title>test</title>
        <script type="text/javascript">
        <!--
            function change()
            {
                document.getElementById("part1").className = "part2"
            }
        //-->
        </script>
    </head>
    <body>
        Hello.<br />
        <div id="part1">Test test.</div><br />
        <input type='button' onclick='change()' value='Form Checker' />
    </body>
</html> 
```

**样式-original.css**

```
#part1
{
    color: #FF0000;
}

#part2
{
    color: #7D26CD;
} 
```

单击按钮时颜色不会改变。问题是什么？问题是正在改变`className`我应该改变的地方`id`。这是一个巨大的“ [doh](http://commuteorlando.com/wordpress/wp-content/uploads/2008/12/image.gif) ”时刻。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T23:19:16.533

让它工作的最小工作量是将`change()`函数更改为：

```
document.getElementById("part1").id = "part2" 
```

不过，您需要跟踪当前的 id，否则该`change()`函数将无法再次找到该元素。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T23:17:45.233

你有问题。在你的 javascript 函数 change()

而不是这条线

```
document.getElementById("part1").className = "part2" 
```

它应该是这样的

```
document.getElementById("part1").id = "part2" 
```

那是因为您更改了类名而不是元素的 id。看看这里的固定代码：http: [//jsfiddle.net/bA6SD/](http://jsfiddle.net/bA6SD/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-06T23:21:59.540

您正在更改一个比 ID 具有更少特异性的类。保留该 ID 优先于添加类，但在您的示例中，您指定了另一个 ID 而不是类。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-06T23:33:56.673

首先，您想要的行为有点不清楚。也就是说，这是我的解释...

在我看来，以上都不是很好的选择，因为它们没有解决 ids / classes 的意图。Id 是特定 dom 元素的唯一标识符。因此不建议更改。我建议将您的样式更改为引用类而不是 id。然后，您可以使用 id（part1 和 part2）来获取每个元素，并为元素分配一个类名（即 redText、purpleText），并将所需样式与类相关联。

```
document.getElementById("part1").className = "redText"; 
```

令人困惑的部分是您的命名并不表明您要完成什么（第 1 部分到底是什么意思以及为什么以这种方式命名）。以这样的方式命名事物总是一个好主意，这样其他人可以跟随你正在尝试做的事情。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-06T23:36:39.857

你真的需要改变id吗？我建议您改为更改课程（这是您当前在示例中所做的）。这样您就不需要跟踪当前的 id 并且仍然可以更改样式。

[在这里](http://jsbin.com/oqucek/1/edit)找到一个工作示例。

# html - 画布获取形状旋转值

> ID：14740684
> 
> 赞同：1
> 
> 时间：2013-02-06T23:12:33.690
> 
> 标签：html, canvas, rotation, kineticjs

我一直在寻找一种方法来获取画布上形状的实际旋转 val/deg。

[http://www.rfgraham.net/demos/canvas-spinner](http://www.rfgraham.net/demos/canvas-spinner)

正如你在这里看到的，我有一个中间有一个箭头的圆圈。当您单击画布时，箭头开始旋转。再次单击以停止箭头，它将向控制台输出为箭头 obj 存储的当前旋转值。

我不擅长数学，我从 Kineticjs 获取了动画代码，因为这是我正在使用的库。但是，我选择的代码可能是我返回的旋转值的罪魁祸首。

我的目标是找出箭头落在圆的 4 个四分之一上。如果我能以某种方式让当前的旋转脱离 360 度，我可以做类似的事情 -

```
var rotation = 360 / arrow.rotate.val

if(rotation <= 90) {
     console.log("First quarter")
} 
```

然而，我得到的只是一个完整的旋转 = 6.xxxxxxxxxxxx

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T03:13:47.563

Actually, your code does have the answer, attrs.rotation, which shows radians(theta)

```
 console.log(arrowGrp.attrs.rotation)  //shows radian 
```

You can simply change this to degree.

```
 console.log(arrowGrp.attrs.rotation * (180/Math.PI) % 360)  //shows degrees 
```

FYI, Formulas to convert between radians and degrees are.

```
 degrees = radians * (180/Math.PI)
  radians = degrees * (Math.PI/180) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T23:21:07.133

这些值是弧度，因此以“180”度为单位的半圈是1 * pi（3.1415 [...]），以“360”度为单位的整圈是2 * pi（6.28 ....）

获取值，我们称它为 v，并找出 Math.PI 的次数：

```
var v = arrow.rotate.val;
var percent = 2*Math.PI/v;
var degrees = 360 * percent; 
```

但真正的答案当然是“你不需要学位”。数字是从 0 到 6.28 还是从 0 到 360 无关紧要，只要您知道一整圈是哪个数字。在这种情况下，2*Math.PI，所以只需使用它 =)

# sql-server-2008 - 如何防止使用 DDL 触发器仅删除非空表？

> ID：14740688
> 
> 赞同：1
> 
> 时间：2013-02-06T23:12:56.330
> 
> 标签：sql-server-2008, triggers, ddl-trigger

如果其中有行，我想防止删除表。

我写：

```
create trigger prevDrop on database for drop_table
as
begin
   if exists (select * from dropped_table)
    raiserror('cant do',25,1)
end 
```

但是我收到了一个语法错误`dropped table`。

如何跟踪即将删除的表？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T23:48:51.820

我认为您不能使用 DDL 触发器来执行此操作，因为在这种情况下，它是一个*后*触发器 - 因此该表不再存在，并且在系统元数据中没有它的踪迹。为什么不只是防止删除所有表，而不仅仅是非空表？

```
CREATE TRIGGER prevDrop ON DATABASE
FOR DROP_TABLE
AS
BEGIN
  ROLLBACK;
  RAISERROR('Disable the trigger prevDrop to drop tables!',11,1);
END
GO 
```

他们应该实施的是`INSTEAD OF DDL triggers`- 请在这里投票：

[http://connect.microsoft.com/SQLServer/feedback/details/243986](http://connect.microsoft.com/SQLServer/feedback/details/243986)

我还让他们更改了文档，这最初是误导人们相信 DDL 触发器阻止了操作，而实际上它会将它们回滚：

[http://connect.microsoft.com/SQLServer/feedback/details/752210](http://connect.microsoft.com/SQLServer/feedback/details/752210)

我告诉你这一切的原因是因为你说：

> 如何跟踪即将删除的表？

但是，这意味着您认为该表尚未被删除。它有。您当然可以在 DDL 触发器中获取表名：

```
DECLARE @e XML = EVENTDATA(), @t NVARCHAR(513);

SET @t = @e.value('(/EVENT_INSTANCE/SchemaName)[1]', 'nvarchar(255)');
   + '.' + @e.value('(/EVENT_INSTANCE/ObjectName)[1]', 'nvarchar(255)');

RAISERROR('%s has been dropped.', 11, 1, @t); 
```

但这对你没有帮助。您无法检查表的内容，因为它不再存在。您可以徒劳地尝试做一些聪明的事情，例如：

```
DECLARE @sql NVARCHAR(MAX) = N'SELECT COUNT(*) FROM ' + @t;
EXEC sp_executesql @sql; 
```

但这只会产生：

> 消息 208，级别 16，状态 1，第 1 行
> 无效的对象名称“dbo.tablename”。

即使，如果您在触发器中回滚，或者事务以其他方式中止，则该表随后会再次存在。就触发器本身而言，它不存在。

# mysql - 在 MySQL 的 varchar 字段中搜索整数值

> ID：14740692
> 
> 赞同：3
> 
> 时间：2013-02-06T23:13:15.140
> 
> 标签：mysql, search, integer, varchar

我有一个如下命名的表`user`：

```
id || email
---------------------------------
1  || someone@foo.bar
---------------------------------
2  || 1manwithblueshirt@bar.foo
--------------------------------- 
```

为什么是这样：

```
1manwithblueshirt@bar.foo 
```

这个搜索的结果？

```
SELECT * FROM user WHERE email = 1 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-06T23:14:44.280

因为 MySQL 决定将电子邮件转换为整数。规则是将前导字符转换为数字，直到字符不是有效数字。

这是一个简单的例子：

```
select (case when '1abc' = 1 then 'a' else 'b' end) 
```

# ruby-on-rails - 如何在 Ruby 数组中找到所有反射（以及为什么我的不起作用）？

> ID：14740696
> 
> 赞同：0
> 
> 时间：2013-02-06T23:13:33.720
> 
> 标签：ruby-on-rails, ruby, reverse

100,000 以下所有数字的数组，系数为 19。经过测试，工作正常。

```
S= Array.new
S[0]= 19
i= 0
while S[i]+19 < 100000 do
     i+=1
     S[i] = S[i-1]+19
 end 
```

问题：试图在数组中找到所有具有“反射”的数字，该“反射”也在数组中。

我的尝试：

```
reflectionArray= Array.new
i=0

S.each do |s|
    reverse= s.to_s().reverse!
    S.each do |r|
    if (reverse == r)
        reflectionArray[i]= s
        i+=1
    end
  end
end 
```

我期待一个所有镜像因子为 19 的数组，但出现错误。今天是 Ruby 的新手，但我可以发誓这会奏效！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T23:33:01.197

你的问题在这条线上

```
reverse= s.to_s().reverse.to_i # No need for ! and you need to convert back to a number 
```

但你可能想这样做

```
s = Array.new # capital variables are for class names and constantes. Btw: actually classes also are constantes
s << 19 # you don't need to use indexes at all
while s.last +19 < 100000 do
  s << s.last + 19
end 
```

但是你可以使用一个范围来生成你的数组

```
s = (19..100000).step(19) 
```

要找到数组中的所有反射，您可以简单地做

```
reverse_array = s.select {|num| num.to_s == num.to_s.reverse } 
```

所以最后你可以在一行中完成所有这些:)

```
(19..100000).step(19).select {|num| num.to_s == num.to_s.reverse } 
```

# google-maps - 从用户那里获取评论

> ID：14740697
> 
> 赞同：-1
> 
> 时间：2013-02-06T23:13:33.897
> 
> 标签：google-maps, google-places-api

有什么方法可以让单个 Google+ 用户获得一定数量的地方评论？Google+ API 似乎没有这样的功能，我在 Places API 中错过了这样的功能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T23:57:47.813

Google Places API 当前不支持此功能。如果您认为这将是一个有用的功能，您可以在[此处](http://code.google.com/p/gmaps-api-issues/issues/entry?template=Places%20API%20-%20Feature%20Request)提交“Places API - 功能请求” 。

# c# - 使用 C# 将用户添加到 Active Directory 组时遇到问题

> ID：14740700
> 
> 赞同：2
> 
> 时间：2013-02-06T23:13:46.897
> 
> 标签：c#, active-directory, windows-server-2008-r2, directoryservices, active-directory-group

好的，我现在的问题是我们正在尝试编写将用户添加到我们 Active Directory 中不同组的代码。这是我们编写的解决方案。

部分主要方法：

```
string newGroup = "TestDelete";
string userName = result.Properties["cn"][0].ToString();
string adduser = ad.AddToGroup(userName, newGroup);
Console.WriteLine(String.Format("{0} : {1}",userName, adduser)); 
```

从另一个类调用此方法：

```
public String AddToGroup(string userDn, string groupDn)
{
    try
    {
        DirectoryEntry ldapConnection = new DirectoryEntry("LDAP://OU=" + groupDn + ",DC=blah,DC=blah,DC=blah");
        ldapConnection.AuthenticationType = AuthenticationTypes.Secure;

        string newUser = "CN=" + userDn + "CN=Members,DC=blah,DC=blah,DC=blah";

        ldapConnection.Invoke("Add", new object[] { newUser });
        ldapConnection.CommitChanges();
        ldapConnection.Close();

        return "Success";
    }
    catch (System.DirectoryServices.DirectoryServicesCOMException E)
    {
        Console.WriteLine("Exception caught:\n\n" + E.ToString());
    }
} 
```

它抛出异常

> *System.Runtime.InteropServices.COMException (0x80020006)：未知名称。（来自 HRESULT 的异常：0x80020006 (DISP_E_UNKNOWNNAME)） 在 C:\Users\XXX\Documents\ 中的 adjustUsers.Program.AddToGroup(String userDn, String groupDn)
> 的 System.DirectoryServices.DirectoryEntry.InvokeSet(String propertyName, Object[] args)
> Visual Studio 2010\Projects\UserPruning\adjustUsers\Program.cs：
> C:\Users\XXX\Documents\Visual Studio 2010\Projects\UserPruning\UserPruning\MainProgram 中 UserPruning.MainProgram.Main(String[] args) 的第 45 行。 CS：第 46 行*

据我们所知，这表明我们的语法存在问题。

第 46 行是

```
string adduser = ad.AddToGroup(userName,newGroup) 
```

第 45 行是

```
ldapConnection.Invoke("Add", new object[] {newUser}); 
```

前一天我们一直在尝试重写这段代码，但仍然很困惑。

帮助？

谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-07T05:36:39.990

如果您使用的是 .NET 3.5 及更高版本，则应查看`System.DirectoryServices.AccountManagement`(S.DS.AM) 命名空间。在这里阅读所有相关信息：

*   [在 .NET Framework 3.5 中管理目录安全主体](http://msdn.microsoft.com/en-us/magazine/cc135979.aspx)
*   [System.DirectoryServices.AccountManagement 上的 MSDN 文档](http://msdn.microsoft.com/en-us/library/system.directoryservices.accountmanagement.aspx)

基本上，您可以定义域上下文并在 AD 中轻松找到用户和/或组：

```
// set up domain context
using (PrincipalContext ctx = new PrincipalContext(ContextType.Domain))
{
    // find your user
    UserPrincipal user = UserPrincipal.FindByIdentity(ctx, "SomeUserName");

    if(user != null)
    {
        // find the group in question
        GroupPrincipal group = GroupPrincipal.FindByIdentity(ctx, "TestDelete");

        // if found....
        if (group != null)
        {
            // add user to group
            group.Members.Add(user);
            group.Save();
        }
    }
} 
```

新的 S.DS.AM 使得在 AD 中与用户和组一起玩变得非常容易！

# ruby-on-rails - form_for 未定义的方法 `user_path'

> ID：14740702
> 
> 赞同：43
> 
> 时间：2013-02-06T23:13:53.597
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我收到一个错误：

```
undefined method `user_path' for #<#<Class:0x007fd1f223ead0>:0x007fd1f2241af0> 
```

当我尝试编辑学生时。我不太了解“user_path”方法警报，因为我从来没有在视图中写过这个。（学生不是模型）而且我没有使用 rails g scaffold 来生成它。

谢谢

在我的学生控制器中：

```
def edit
  @student = User.find(params[:id])
end 
```

在视图 (edit.html.erb) 中：

```
<%= form_for(@student) do |f| %> ... 
```

在 routes.rb 中：

```
resources :students 
```

* * *

## 回答 #1

> 赞同：98
> 
> 时间：2013-02-07T00:24:51.513

你有一个`students_controller`对应`resources :students`于你的`routes.rb`. 这将创建使用单词`students`like`students_path`和的路由`new_student_path`。使用`form_for(@record)`时，url 由 objects 类确定。在这种情况下，`@record`是 a`User`所以路径是`users_path`当对象是新记录并且`user_path(@record)`对象被持久化时。由于您没有`users_controller`定义，您需要手动设置的 url`form_for`来修复此错误

```
form_for @user, url: student_path(@user), html: { method: :put } do |f| 
```

现在，如果您使用部分调用`_form.html.erb`并在新操作和编辑操作上都使用它，那么您将遇到问题，因为新操作和编辑操作的 url 是不同的。你必须改变你的观点，像这样

```
# new.html.erb
form_for @user, url: students_path, html: { method: :post } do |f|
  render 'form', f: f

# edit.html.erb
form_for @user, url: student_path(@user), html: { method: :put } do |f|
  render 'form', f: f

# _form.html.erb
f.text_field :name
f.text_field :title 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2019-07-21T23:20:40.177

如果您因为命名空间而在这里（例如 10 分钟前的我），您将需要这个：

> 对于命名空间路由，例如 admin_post_url：
> 
> ```
> <%= form_for([:admin, @post]) do |f| %>
>  ...
> <% end %> 
> ```

从[文档](https://api.rubyonrails.org/v5.2.3/classes/ActionView/Helpers/FormHelper.html#method-i-form_for)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-02-07T13:03:42.910

我用渲染中的局部变量修复它。在 rails 5 - form_with 标签：

```
# new.html.erb
  render partial: 'form', locals: {user: @user, url: students_path}

# edit.html.erb
  render partial: 'form', locals: {user: @user, url: student_path(@user)}

# _form.html.erb
form_with  model: user, url: url, local: true do |f|
  f.text_field :name
  f.text_field :title
end 
```

# d3.js - GeoJSON 和 TopoJSON 的区别

> ID：14740705
> 
> 赞同：97
> 
> 时间：2013-02-06T23:14:07.800
> 
> 标签：d3.js, gis, geojson, topojson

GeoJSON 和 TopoJSON 有什么区别，我什么时候可以使用其中一个？

[GitHub 上对 TopoJSON](https://github.com/mbostock/topojson/)的描述意味着 TopoJSON 文件小了 80%。那么为什么不一直使用 TopoJSON 呢？

* * *

## 回答 #1

> 赞同：155
> 
> 时间：2013-02-08T03:41:49.600

如果您关心文件大小或拓扑，请使用 TopoJSON。如果您都不关心，那么为了简单起见，请使用 GeoJSON。

TopoJSON 的主要优点是大小。通过消除冗余并使用更有效的固定精度整数坐标编码，TopoJSON 文件通常比 GeoJSON 文件小一个数量级。TopoJSON 文件的第二个优点是对拓扑进行编码具有有用的应用，例如保留拓扑的简化（类似于[MapShaper](http://www.cartogis.org/docs/proceedings/2006/bloch_harrower.pdf)）和自动网格生成（如本示例中的状态-状态边界[choropleth](http://bl.ocks.org/4060606)）。

这些优势是有代价的：更复杂的文件格式。例如，在 JavaScript 中，您通常会使用[TopoJSON 客户端库](https://github.com/topojson/topojson/)将 TopoJSON 转换为 GeoJSON，以便与[d​​3.geoPath](https://github.com/d3/d3-geo/blob/master/README.md#geoPath)等标准工具一起使用。（在 Python 中，您可以使用[topojson.py](https://github.com/sgillies/topojson/blob/master/topojson.py)。）此外，TopoJSON 的整数格式需要量化坐标，这意味着如果您不小心，它可能会引入舍入误差。（请参阅文档`topojson -q`。）

对于不需要拓扑的几何图形的服务器端操作，GeoJSON 可能是更简单的选择。否则，如果您需要拓扑结构或想要通过线路将几何图形发送到客户端，请使用 TopoJSON。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-02-07T05:57:10.263

TopoJSON 非常适用于相互“对齐”的整洁特征，例如行政区域，但对更混乱或有机的数据没有帮助。如果您的数据只是点，那么 TopoJSON 根本没有帮助。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-07T14:52:36.730

这取决于许多考虑。其中包括：

1) 您想要表示的特性的性质（数据模型） 2) 您希望与这些特性关联的任何属性 3) 您希望这些特性在页面上的行为方式（静态与动态的）

然而，这是一个很难抽象地回答的问题。关于某些细节，如果您有一个连续的多边形覆盖或其他特征共享边界的情况，topojson 的模型允许您利用冗余并将其纳入模型。

阅读文档，剖析示例（例如 bl.ocks.org），然后获取一些数据并在 geojson 和 topojson 中表示并创建您自己的可视化。

# javascript - javascript颜色变化

> ID：14740708
> 
> 赞同：-2
> 
> 时间：2013-02-06T23:14:22.413
> 
> 标签：javascript, jquery, css

我该怎么做：

[http://codepen.io/anon/pen/xeBmt](http://codepen.io/anon/pen/xeBmt)

```
function updateColor(hexValue) {
    $('a').css({"color" : "#" + hexValue});
}

$('body').on('click', 'li', function() {
    var hexValue = $(this).attr('data-color');
    updateColor(hexValue); 
}); 
```

并使其仅在十六进制值为 时更改`a`颜色`#dddddd` ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T23:17:43.160

```
if($('a').css('color') == '#dddddd') {
    $('a').css({"color" : "#" + hexValue});
} 
```

把它放在函数中。

**编辑**

```
function updateColor(obj, hexValue) {
    obj.css("color",hexValue);
}
$('a').click(function() {
    if($(this).css('color') == 'rgb(221, 221, 221)'){
        var hexValue = $(this).data('color');
        updateColor($(this), hexValue);
    }     
}); 
```

这行得通。我对 rgb 的错误。也有一个小提琴。[http://jsfiddle.net/SYBez/1/](http://jsfiddle.net/SYBez/1/)

但是就像@JasonSperske 所说，一旦颜色发生变化，您的代码就会失去它随着颜色变化而起作用的能力。我不知道你试图做什么的目的，但我会使用数据、类或其他东西来解决这个问题，因为依赖颜色作为选择器对我来说似乎很奇怪。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T23:52:44.883

好的，这可能不是您要寻找的答案，但是这段代码会（我认为）您所要求的（[演示](http://jsfiddle.net/SYBez/)）。首先，您需要对标记进行一些更改（我试图展示这些更改的各种排列以及每种排列的工作方式）

让我们从 HTML 开始。这里我添加了一个带有颜色的 CSS 规则（称为`Change`） ，以及一个带有相同颜色的短版 ( )`#ddddd`的内联样式`#ddd`

```
<ul>
  <li data-color="f00">Red</li>
  <li data-color="0f0">Green</li>
  <li data-color="00f">Blue</li>
  <li data-color="ff0">Yellow</li>
  <li data-color="f0f">Purple</li>
</ul>
<a href="#" class='Change'>Look at my color</a>
<a href="#">Look at my color</a>
<a href="#" class='Change'>Look at my color</a>
<a href="#">Look at my color</a>
<a href="#" style='color: #ddd;'>Look at my color</a> 
```

然后是 CSS（你的 CSS 有很多规则可以为每个框着色，我刚刚添加了这个：

```
a.Change {
  color: #dddddd;
} 
```

最后是脚本：

```
function updateColor(hexValue) {
  $('a').filter(function () {
    return $(this).css('color') == 'rgb(221, 221, 221)';
  }).css({
    "color": "#" + hexValue
  });
}

$('body').on('click', 'li', function () {
  var hexValue = $(this).attr('data-color');
  updateColor(hexValue);
}); 
```

如果您单击其中一个块，则只有颜色为`#dddddd`( `rgb(221, 221, 221)`) 的链接将被更新。但是，一旦您更新它们，它们将不再具有您的原始颜色，因此第二次单击它将不起作用（这就是为什么我想知道这个答案是否真的对您尝试做的事情有帮助））

# database - 使用（顺序）GUID 是数据库生成 ID 的唯一可行替代方案吗？

> ID：14740710
> 
> 赞同：2
> 
> 时间：2013-02-06T23:14:30.917
> 
> 标签：database, entity-framework, ef-code-first, sql-server-ce, identity-column

我们正在使用 Entity Framework 5 Code First 方法将我们的 MS-Access 数据库迁移到 SQL Server Compact 4.0。我们发现使用数据库生成的整数 ID 非常慢，更糟糕的是，延迟随着数据库的大小呈指数增长。这使得无法使用 Identity 列，并且在与实体框架配对的 SQL Server Compact 4.0 中，此功能的实现似乎很糟糕。

因此，我们进行了一些测试，发现使用客户端生成的密钥将操作插入速度提高了至少 20 倍，插入的指数增长消失了。

现在我们正在寻找一种生成客户端 ID 的最佳方式。使用 GUID 似乎是最安全的选择，但我读到这会对读取操作产生负面影响。是否有使用客户端生成的自动递增整数的策略？

编辑：我将进一步调查导致该问题的潜在问题。同时，我的真正问题可以回答吗？:-)

EDIT2：令人非常恼火的是，似乎没有人相信在 EF 和 SQL Server compact 4.0 中使用 auto-id 如此缓慢的断言。我发布[了一个单独的问题](https://stackoverflow.com/questions/14768394/exponentially-deteriorating-performance-on-inserts-in-sql-server-compact-4-0-tab)，其中包含一个应该很容易重现的概念证明。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T19:20:50.137

我不认为身份生成的方式是性能问题的根源。
我认为如果您想在迁移过程中获得更好的性能，在转换过程之前，您可以禁用主表上的主键和外键等约束。（这可以通过脚本或手动完成）
但是数据完整性将是您的新关注点，并且您的转换代码必须强大，因此在转换过程之后，可以完成启用约束。
希望这可以帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-07T07:36:15.367

如果您使用 EF 移动大量数据，那么您做错了。使用 ADO.NET，例如使用 BULK COPY 方法（对于 SQL CE，使用 SqlCeUpdateableRecord）。您可以使用我的 SqlCeBulkCopy 库来节省一些编码工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-11T15:06:20.627

我看到的解决方案。

a) 尝试修复性能问题。我的建议（不要在上下文中使用大量实体。）尽可能少地尝试业务问题。不要使用合并跟踪等...请参阅 EF 性能提示。 [http://blogs.msdn.com/b/wriju/archive/2011/03/15/ado-net-entity-framework-performance-tips.aspx](http://blogs.msdn.com/b/wriju/archive/2011/03/15/ado-net-entity-framework-performance-tips.aspx) 和 [http://msdn.microsoft.com/en-au/图书馆/cc853327.aspx](http://msdn.microsoft.com/en-au/library/cc853327.aspx)

b) 使用指南。外部分配（它不是顺序的，但速度很快）

c) 使用在内存中运行的客户整数生成器，可以一次分配许多键并且可以保持当前状态。SAP 使用此技术。他们称之为“数字范围”。可以非常快，但不如 b) 快。

顺便说一句，我使用 GUID 而不是数据库生成的 ID 来制作部分数据库副本和迁移更容易/更容易。:-)

# ssas - 数据采集 系统的事实表粒度

> ID：14740712
> 
> 赞同：0
> 
> 时间：2013-02-06T23:14:41.560
> 
> 标签：ssas

我在全国部署了一个数据采集系统网络。每个系统都在测量不同建筑物的性能。每个系统都进行温度、流量、速度、能量和其他类型的测量。采样率因系统而异；它可以低至 5 秒，高至 15 分钟。

我的目标是将所有数据存储在 SSAS 数据库中以进行分析。但是，我正在努力确定适当的粒度和相关的事实表以及 SSAS 度量/度量组设计。

我的第一个问题是，以下是否有相同的纹理？：

*   具有不同单位的数据值，例如温度和能量值
*   不同采样率的数据值，例如每分钟采样一次的温度值和每15分钟采样一次的温度值
*   从不同建筑物记录的数据值，例如1号楼的室内温度和2号楼记录的室内温度
*   加法数据值（例如能量）和非加法数据值（例如温度）
*   在特定建筑物中使用相同单位进行两次不同的测量，例如一楼温度和二楼温度。

如果这些示例中的大多数或全部没有相同的粒度，这是否意味着每个建筑物的度量都应该在关系数据仓库中有一个单独的事实表，而在 SSAS 数据库中应该有一个单独的度量？如果是，那么如果我们假设我正在研究 10 个建筑物，每个建筑物都有 100 个测量值，那么我会查看 1000 个测量值。这似乎不对，但似乎我正在处理一个具有许多不同度量粒度的数据模型。

我发现的几乎所有示例都与金融或零售有关，它们由明显可加或可数的度量组成，例如美元金额或项目。因此，这些示例并没有太大帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T16:08:58.553

*   如果使用所有维度（时间、建筑物等）的相同交集收集具有不同单位的数据值，则它们可以具有相同的粒度。在该示例中，温度和能量值将是事实表中的单独列。不建议使用单个事实列来表示具有不同单位的测量值。

*   如果您需要能够同时报告两个间隔，则具有不同采样率的数据值不会处于相同的粒度。但是，如果您可以在更细粒度的间隔上标准化您的报告，您可以简单地将更粗粒度的值复制到更细粒度的行中。例如，您可以有一个 TemperaturePerMinute 列和一个 TemperaturePer15Minute 列，其中 15 分钟间隔值在该间隔内的所有分钟值中重复。但是，在粗粒度列上报告时使用聚合（计数等）时需要小心。此外，如果您需要深入到样本级别，您可能需要为每个间隔类型使用单独的事实表。

*   来自不同建筑物的数据值当然可以以相同的粒度记录在单个事实表中。您只需有一个建筑维度，您可以将其链接到每个测量样本的事实表。

*   在 OLAP 模型中，度量通常是相互独立的，因此加法和非加法值可以在同一粒度上简单地表示为单独的列。

*   在这种情况下，您将扩展您的 Building 维度以包含 Floor 层次结构并在 Floor 粒度链接您的事实表记录。但是，如果您需要能够将一些样本链接到建筑物，而将一些样本链接到楼层，那么您可能需要使用[父子维度](http://technet.microsoft.com/en-us/library/ms174846.aspx)（可能是抽象建筑物和楼层的位置维度），您可以将您的事实表到建筑物或楼层。

我发现，当星型模式的组织不明确时，查看您希望如何报告数据会有所帮助。这应该有助于减少您必须创建的多维数据集的数量。不过，一般来说，最好不要尝试规范化 OLAP 模型或使其过于通用（即使用单个列来表示温度和能量）。

# css - 将父级 div 高度扩展到子级

> ID：14740716
> 
> 赞同：1
> 
> 时间：2013-02-06T23:14:52.317
> 
> 标签：css

**我的页脚**定位有问题。它不去`bottom/last`。

所以，我有一个**容器 div**，它有**3 个 div** - `float:right`，`float:left`中间一个（有）位于**两个***浮动*div 之间。`position:absolute`

 ***中心**的必须具有**固定的宽度和高度**，因为它是图像。

在那个**中心**div 中，我有另一个包含*很多内容*的 div 。

问题是，因为**中心 div 有固定的 width 和 height**，它不占用**孩子的 div height**。

所以我的问题是如何把它放在最后的**页脚**（在**容器**之后）？

**注意**- 使用 JQuery，我放置了**浮动 div**的宽度，因为它们占用**100%-980px 的**宽度。

[这就是它的样子](http://jsfiddle.net/ah3nr/5/)。

我试着把**div** `overflow:auto` , `overflow:overlay`, `margin-left:auto;margin-right:auto;`.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T23:21:16.367

给家长试试这个。溢出：自动；

另请参阅此堆栈溢出帖子：[Expanding a parent <div> to the height of its children](https://stackoverflow.com/questions/384145/css-expand-parent-div-to-child-height)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-09T11:43:49.887

再次阅读您的问题后，我得出结论并使用您的代码创建以下小提琴并嵌入您所需大小的示例图像。

在理解您的问题时，如果我错了，请告诉我。所以我可以根据您的需要解决。

小提琴：http: [//jsfiddle.net/ah3nr/6](http://jsfiddle.net/ah3nr/6)

演示：http: [//jsfiddle.net/ah3nr/6/embedded/result/](http://jsfiddle.net/ah3nr/6/embedded/result/)

我的做法：

我已经`position:absolute`从中心删除`div`并添加`new div`了**图像**并使用**css 层技术**将它们关联起来。

更新的CSS：

```
.sectionDownContainer {
    width: 980px;
    /*height:270px;*/
    border:1px solid red;
    /*position: absolute;*/
    position:relative;
    top: -32px;
    z-index: 1;
}
/*.sectionDownMenu {
    margin-left: 50px;
    margin-top: 1px;
    display: block;
}
*/

#image_container {
    position:relative;
    width:980px;
    height: 270px;
    margin-top:-2px;
    z-index:2;
}

.sectionDownContent {
    width: 640px;
    margin-top: -190px;
    margin-left: 50px;
    position: relative;
    z-index:5;
    color:#000;
    font-weight:bold;
} 
```

截屏：![在此处输入图像描述](../Images/752c482e827b9d7872b134a3515403be.png)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-09T16:42:34.933

你需要设置**center-div**的这个属性：（`height:auto`你也可以添加一个最小高度`min-height:400`：）

关于页脚的第二个问题，这要复杂得多。你必须这样做：

```
<div id="content">
    <div id="content_left">
    </div>
    <div id="content_center">
    </div>
    <div id="content_right">
    </div>
    <div id="footer">
    </div>
</div> 
```

我现在给你完整的 CSS（因为它不是那么容易）：

```
.content {position:relative; overflow:hidden;} //hidden overflow just a hack for common issues...
.content_left {height:auto; float:left} //set height to auto (very important)
.content_center {height:300; float:left} //a fixed height also works!
.content_right {height:auto; float:right}
.content_footer {width:100%; height:auto; float:right} //for tests you can also set a fixed height 
```

该解决方案也根据 Stackoverflow 上的其他线程：[将 DIV 与底部或基线](https://stackoverflow.com/questions/2015032/align-divs-to-bottom-or-baseline)对齐，[如何将 div 的内容与底部对齐？](https://stackoverflow.com/questions/585945/how-to-align-content-of-a-div-to-the-bottom-with-css)

但是，如果您遇到问题，您可以这样做（我的首选解决方案）：

```
<div id="content">
    <div id="content_left">
    </div>
    <div id="content_center">
    </div>
    <div id="content_right">
    </div>
</div>
<div id="footer">
</div> 
```

及其CSS：

```
.content {position:relative; overflow:hidden;} //hidden overflow is just a hack
.content_left {height:auto; float:left} //set height to auto (very important)
.content_center {height:300; float:left} //a fixed height also works!
.content_right {height:auto; float:right}
.content_footer {width:100%; height:xxx; float:left} //you can use any height... 
```

请注意，所有上述解决方案仅在您将*所有*“内容”设置为浮动时才有效，它不适用于绝对值！我在这里找到了这个：[http ://wiki.answers.com/Q/How_can_a_parent_DIV_wrap_around_child_DIVs_which_are_floating_left_or_right](http://wiki.answers.com/Q/How_can_a_parent_DIV_wrap_around_child_DIVs_which_are_floating_left_or_right)

这是由于 div 的问题：不可能“告诉”父 div 的大小！所以像“content_center”或“content_right”这样的孩子不会告诉“内容”他们有多长以及“内容”必须有多长。因此，如果您对子项使用绝对值，就不可能告诉页脚在哪里对齐。

所以你的第二个问题，虽然看起来微不足道，但却是一个很重要的问题，也不容易解决。

**重要更新：**

我现在试图找到解决方案`absolute`。问题是，它`absolute`被`fixed`从常规（文本）流中取出，因此它们的大小不再影响任何其他元素的大小/位置。但是我们也必须明白，一个`absolute`元素仍然控制着它的所有子元素，所以我们宁愿将子元素设置`relative`为父元素（这里：“内容”）！所以我终于找到了解决方案，这很奇怪，因为这几乎与我上面建议的相反，但是该解决方案受到其他人发布的影响，而以下解决方案是“我自己的”解决方案（我添加了一个标题用于演示目的):

```
<div id="header">
</div>
<div id="content">
    <div id="content_left">
    </div>
    <div id="content_center">
    </div>
    <div id="content_right">
    </div>
    <div id="footer">
    </div>
</div> 
```

CSS（“标题”清楚地表明，“内容”继承了其子元素的所有定位，如“content_left”、“content_right”等）：

```
.header {position:absolute; left:0; top:0; height:100; width:100%}
.content {position:absolute; left:0; top:100; height:auto; min-width:700} //min-width is only voluntary, but quite useful
.content_left {position:relative; left:0; top:0; width:200; height:auto;} //height:auto is important to adapt the height from containing text!
.content_center {position:relative; left:200; top:0; right:200; width:auto; height:auto;} //in the middle element, also auto-width is important!
.content_right {position:fixed; right:0; top:0; width:200; height:1000;} //we set a fixed position, but that won't influence the footer anymore!
.content_footer {margin:0 0 60 0; position:relative; left:0; bottom:-60; width:100%; height:150;} //a fixed height is also okey...but relative position is needed!
//you still need to add margin:0; border:0; padding:0 or similar values for some elements to get a good layout 
```

这里重要的一点是，您可以决定哪个子元素将是最长的，并设置这个元素的`position:relative`，而另一个可能有`absolute`或`fixed`。但是，如果您不知道哪个元素最长，则需要将所有子元素的位置设置为`relative`. 无论如何，我建议将所有孩子设置为`relative`（`fixed`如果需要的话），因为他们的父母“内容”已经正确地设置了他们的绝对高度位置，所以根本不需要任何东西`absolute`。

我在重复自己：上面我写了不可能告诉父 div 的大小......实际上它是可能的，但如果使用值`absolute`和`fixed`则不是。只有当您使用浏览器标准值 ( `static`) 或`relative`时，父 div 才会被告知其子 div 的大小，因此页脚在页面底部被正确设置。

好吧，我的解决方案在任何地方都有效……即使在 IE（测试 6.0 和 8.0！）中，由于 hack`margin:0 0 60 0`的值`60`应该是`bottom:-60`. 现在我们终于得到了非浮动跨浏览器解决方案。;)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-09T19:16:57.283

您遇到的问题是某些 CSS 属性会导致元素“从文档流中移除”（请参阅[​​ W3C 视觉格式化模型](http://www.w3.org/TR/CSS2/visuren.html#normal-flow)）。父元素自然增长以适应子元素的高度，然而，浮动和绝对定位的元素会从文档流中移除。正如一些评论中提到的，在父元素上设置`overflow: auto;`或`overflow: hidden;`重新建立浮动元素周围的边界框。这意味着您可以在父容器中浮动元素，然后`overflow: hidden;`在父元素上设置，父元素将包含浮动。但是，这不适用于绝对定位的元素：[绝对定位的框是 "](http://www.w3.org/TR/CSS2/visuren.html#absolute-positioning). 唯一的例外是整个文档将尝试增长以显示任何已定位的元素（给定一个元素`position: absolute; top: 3000em;`，页面滚动条将增长以允许您滚动到该元素）。我不知道有什么方法可以为文档以外的元素触发此操作。

回到你想要的效果……如果你不需要IE7的支持，你可以用它`display: table; table-layout: fixed;`来实现一个固定宽度的居中列和两边可变宽度的两列。

**[jsFiddle 演示](http://jsfiddle.net/QKqFc/)**

在不久的将来，这也可以使用 CSS“flexbox”属性。Flexbox 将允许一些[漂亮的新功能](http://www.html5rocks.com/en/tutorials/flexbox/quick/)，包括水平和垂直居中，更改渲染元素的顺序，以及设置“flex”值来确定元素应该占用多少剩余可变宽度。然而，该标准目前正在经历一段变动期，旧标准（获得适度支持）正在被新标准（几乎没有支持）所取代。请参阅[“旧”Flexbox 和“新”Flexbox](http://css-tricks.com/old-flexbox-and-new-flexbox/)以及[随附的演示](http://codepen.io/chriscoyier/pen/qazmI)。考虑到网络标准实施进展缓慢，我不*

# jquery - jQuery Datepicker 设置动态添加的日期选择器的开始和结束日期

> ID：14740724
> 
> 赞同：0
> 
> 时间：2013-02-06T23:15:17.933
> 
> 标签：jquery, jquery-ui, datepicker

我已经动态添加了 id`TrainingPeriodStart[]`和`TrainingPeriodEnd[]`. 我需要针对每一对设置正确的开始和结束日期。

开始和结束日期的设置可在[此处的文档链接](http://jqueryui.com/datepicker/#date-range)中找到。

我记住了下面的代码，但它不起作用：

```
 var inputName = '';
    var number = '';

    $('input[id^="TrainingPeriodStart"]').click(function() {
        inputName = $(this).attr('id');
        number = inputName.substr(inputName.length - 3); // get [number]
    }).datepicker({
        changeYear: true,
        changeMonth: true,
        dateFormat: 'yy-mm-dd',
        onSelect: function( selected ) {
            $('#TrainingPeriodEnd'+number).datepicker( "option", "minDate", 
                selected )
        }
    });

    $('input[id^="TrainingPeriodEnd"]').click(function() {
        inputName = $(this).attr('id');
        number = inputName.substr(inputName.length - 3); // get [number]
    }).datepicker({
        changeYear: true,
        changeMonth: true,
        dateFormat: 'yy-mm-dd',
        onSelect: function( selected ) {
            $('#TrainingPeriodStart'+number).datepicker( "option", "maxDate", 
                selected )
        }
    }); 
```

基本上我想用它们的属性来定位日期选择器对`[number]`并设置它们的最小和最大日期来限制用户选择非法日期范围。

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T23:39:07.693

如果您克隆元素，则需要向克隆的元素添加新的点击事件才能触发该事件：

```
$(function() {
    var inputName = '';
    var number = '';

    var template = $('#training .trainingperiod:first').clone(),
        trainingPeriodCount = 1;

    var addTrainingPeriod = function(){
        trainingPeriodCount++;
        var trainingPeriod = template.clone().find(':input').each(function(){
            var newId = this.id.substring(0, this.id.length-1) + trainingPeriodCount;
            this.name = this.id = newId; // update id and name (assume the same)
        }).end() // back to .trainingperiod
        .attr('id', 'TrainingPeriod' + trainingPeriodCount) // update attendee id
        .prependTo('#training'); // add to container

        $('#TrainingPeriod' + trainingPeriodCount).find('input[id^="TrainingPeriodStart"]').datepicker({
            changeYear: true,
            changeMonth: true,
            dateFormat: 'yy-mm-dd',
            onSelect: function( selected ) {
                var thisInput = $(this).attr('id');
                var thisNumber = thisInput.substr(thisInput.length - 3);
                $('#TrainingPeriodEnd'+thisNumber).datepicker( "option", "minDate", 
                    selected )
            }
        });
        $('#TrainingPeriod' + trainingPeriodCount).find('input[id^="TrainingPeriodEnd"]').datepicker({
            changeYear: true,
            changeMonth: true,
            dateFormat: 'yy-mm-dd',
            onSelect: function( selected ) {
                var thisInput = $(this).attr('id');
                var thisNumber = thisInput.substr(thisInput.length - 3);
                $('#TrainingPeriodStart'+thisNumber).datepicker( "option", "maxDate", 
                    selected )
            }
        });        
    };

    $('.add').click(addTrainingPeriod); // attach event

    $('input[id^="TrainingPeriodStart"]').click(function() {
        inputName = $(this).attr('id');
        number = inputName.substr(inputName.length - 3); // get [number]
    }).datepicker({
        changeYear: true,
        changeMonth: true,
        dateFormat: 'yy-mm-dd',
        onSelect: function( selected ) {
            $('#TrainingPeriodEnd'+number).datepicker( "option", "minDate", 
                selected )
        }
    });

    $('input[id^="TrainingPeriodEnd"]').click(function() {
        inputName = $(this).attr('id');
        number = inputName.substr(inputName.length - 3); // get [number]
    }).datepicker({
        changeYear: true,
        changeMonth: true,
        dateFormat: 'yy-mm-dd',
        onSelect: function( selected ) {
            $('#TrainingPeriodStart'+number).datepicker( "option", "maxDate", 
                selected )
        }
    });
}); 
```

[小提琴在这里](http://jsfiddle.net/mccannf/SCXMD/5/)。

# javascript - 用Backbone.js替换内容时如何解锁jquery ui检查按钮？

> ID：14740725
> 
> 赞同：0
> 
> 时间：2013-02-06T23:15:27.130
> 
> 标签：javascript, jquery, jquery-ui, backbone.js

我有一个替换内容的 Web 应用程序。此内容具有 jquery ui 检查按钮。如果按钮已存在，则当我替换内容时，请不要再次添加它：

```
if(!$('label[for=checkWeekM]').hasClass('ui-button'))
      $('.checkWeek').button(); 
```

如果我按下按钮（它的状态被检查）并且如果我替换了内容，则按钮开始锁定，直到再次替换相同的内容。

我使用 Backbone.js 替换内容

[jsfiddle](http://jsfiddle.net/vicenrele/Thxtr/4/)

如何解锁检查按钮？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-07T05:46:40.017

你在复制`id`属性，这会导致糟糕的 HTML，糟糕的 HTML 会导致沮丧，沮丧会导致愤怒，等等。

你的模板中有这个，你隐藏在一个`<div>`：

```
<input type="checkbox" class="checkWeek" id="checkWeekM" />
<label for="checkWeekM">L</label> 
```

然后将相同的 HTML 插入到您的`.content-central`. 现在您的页面中有两个元素具有相同的`id`属性和两个`<label>`指向它们的元素。当您添加 jQuery-UI 按钮包装器时，您最终会得到一个稍微修改的版本`<label>`作为复选框的可见元素；但是，这`<label>`将通过`for`属性与两个 DOM 元素相关联，一切都崩溃了。

解决方案是停止使用 a`<div>`来存储您的模板。如果您使用 a`<script>`代替，浏览器不会将内容解析为 HTML，并且您不会有重复的`id`属性。像这样的东西：

```
<script id="template-central-home" type="text/x-template">
    <div data-template-name="">
        <input type="checkbox" class="checkWeek" id="checkWeekM" />
        <label for="checkWeekM">L</label>
    </div>
</script> 
```

然后访问 HTML：

```
content.view = new ContentView({
    model: content,
    template: $('#template-' + template_name).html()
}); 
```

演示：http: [//jsfiddle.net/ambiguous/qffsm/](http://jsfiddle.net/ambiguous/qffsm/)

这里有两个快速课程：

1.  拥有有效的 HTML 非常重要。
2.  不要将模板存储在 hidden 中`<div>`，将它们存储在`<script>`具有`type`其他属性的 s 中，`text/html`以便浏览器不会尝试将它们解释为 HTML。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T05:39:20.010

在你提到这个问题后，我仔细看了你的小提琴。我[在这里](https://stackoverflow.com/questions/14716164/content-with-queryui-checkbox-button-grows-when-is-replaced-with-backbone-js/14716863#14716863)建议的解决方案更像是一个快速修复。

如果您想遵循正确的做法以避免长期问题和副作用，您应该考虑[这里](https://stackoverflow.com/a/14716759/827110)提到的内容。这样你的问题就解决了，没有其他错误。

# java - 使用 Apache POI 和 Spring 框架将 Excel 文件上传到数据库

> ID：14740727
> 
> 赞同：2
> 
> 时间：2013-02-06T23:15:31.900
> 
> 标签：java, spring, apache, apache-poi

在互联网上找不到一个好的帖子来帮助我解决这个问题。

我的要求是从电子表格中读取每一行，并使用单元格中的值生成一个 sql 语句，并在读取电子表格完成后进行批量上传。

我正在使用 Apache POI、Spring 框架和 JDBC。

我应该如何从excel生成sqls？

1.  有一个带有 args (?) 的 sql 语句和单元格内容的格式吗？

或者

1.  通过连接单元格内容准备一个sql？

最好的方法是什么？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-06-25T11:39:52.837

几周前我打算做同样的事情，最终为您问题的 excel 部分提供了以下解决方案。该解决方案支持新的和 97-2007 表格式。我正在使用弹簧和 POI。我认为在没有更多信息的情况下回答您的其余问题是不可能的。

用户上传文件的jsp站点：

```
<%@ taglib prefix="form" uri="http://www.springframework.org/tags/form" %>
<%@ page contentType="text/html;charset=UTF-8" language="java" %>
<html>
<head>
    <title>import</title>
</head>
<body>
    <form:form modelAttribute="fileBean" method="post" enctype="multipart/form-data">
        <form:label for="fileData" path="fileData">Select file</form:label><br/><br/>
        <form:input path="fileData" type="file"/>
        <input type="submit" />
    </form:form>
</body>
</html> 
```

将在提交时触发的控制器

```
@Controller
@RequestMapping("/upload")
public class ExcelImporterController {

    @RequestMapping(method = RequestMethod.POST)
    public String upload(FileBean uploadItem, BindingResult result) {
        importService.import(uploadItem);

        return "import/importDone";
    }

} 
```

界面..

```
public interface importService {

    public void import(FileBean fileBean);
} 
```

使用导入方法实现接口..

```
@Override
    public void import(FileBean fileBean) {

        ByteArrayInputStream bis = new ByteArrayInputStream(filedBean.getFileData().getBytes());
        Workbook workbook;
        try {
            if (fileBean.getFileData().getOriginalFilename().endsWith("xls")) {
                workbook = new HSSFWorkbook(bis);
            } else if (fileBean.getFileData().getOriginalFilename().endsWith("xlsx")) {
                workbook = new XSSFWorkbook(bis);
            } else {
                throw new IllegalArgumentException("Received file does not have a standard excel extension.");
            }

            for (Row row : sheet) {
               if (row.getRowNum() == 0) {
                  Iterator<Cell> cellIterator = row.cellIterator();
                  while (cellIterator.hasNext()) {
                      Cell cell = cellIterator.next();
                      //go from cell to cell and do create sql based on the content
                  }
               }
            }

        } catch (IOException e) {
            e.printStackTrace();
        }
    } 
```

将用于 FileBean 中的 spring 上传的 bean 的配置。

```
<bean id="multipartResolver" class="org.springframework.web.multipart.commons.CommonsMultipartResolver">
    <property name="maxUploadSize" value="10000000"/>
</bean> 
```

文件 bean

```
public class FileBean {

  private CommonsMultipartFile fileData;

  public CommonsMultipartFile getFileData()
  {
    return fileData;
  }

  public void setFileData(CommonsMultipartFile fileData)
  {
    this.fileData = fileData;
  } 
```

}

# php - PHP Facebook - API

> ID：14740731
> 
> 赞同：0
> 
> 时间：2013-02-06T23:15:48.490
> 
> 标签：php, facebook, facebook-graph-api

我访问了以下 URL： http: [//developers.facebook.com/docs/reference/php/facebook-api/](http://developers.facebook.com/docs/reference/php/facebook-api/) 我将第一个示例复制到了我的服务器，以替换我自己的应用程序的 appID 和密码。当我访问该页面时，它显示“请登录”，如代码中所示，当我按下该按钮时，应用程序重新加载并且它一直在说同样的事情。我已经登录了 Facebook，但即使我按下登录，也没有任何反应。

我想知道是否有人知道问题是什么？我在 index.php 被称为 src 的文件夹中有 SDK 文件，所以我编辑了“src/facebook.php”的路径？

* * *

编辑 - 我收到以下错误（已替换真实文件路径）。我刚刚发现这可能与代理有关？

发现错误：

```
FacebookApiException Object
(
    [result:protected] => Array
        (
            [error_code] => 7
            [error] => Array
                (
                    [message] => couldn't connect to host
                    [type] => CurlException
                )

        )

    [message:protected] => couldn't connect to host
    [string:Exception:private] => 
    [code:protected] => 7
    [file:protected] => filepath/src/base_facebook.php
    [line:protected] => 977
    [trace:Exception:private] => Array 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T23:57:34.140

我认为这是问题所在：

```
catch(FacebookApiException $e) {
    // If the user is logged out, you can have a 
    // user ID even though the access token is invalid.
    // In this case, we'll get an exception, so we'll
    // just ask the user to login again here.
    $login_url = $facebook->getLoginUrl(); 
    echo 'Please <a href="' . $login_url . '">login.</a>';
    error_log($e->getType());
    error_log($e->getMessage());
  } 
```

Facebook 演示就是这样做的，这真的很烦人。它假定您获得的任何异常都是由于用户令牌过期，而可能是由于拼写错误或其他错误。

所以我要做的就是改变它来简单地显示 $e 的内容。

```
 catch(FacebookApiException $e) {
    echo 'Error found:';
    echo '<br />Type: '.$e->getType();
    echo '<br />Message: '.$e->getMessage();
    exit;  
 } 
```

然后至少你可以很容易地看到错误是什么。一旦你让它工作，一定要把它改回来。

如果您使用以下内容，您可以获得更多信息：

```
 catch(FacebookApiException $e) {
    echo 'Error found:';
    echo '<br /><pre>';
    print_r($e);
    echo '</pre>';
    exit;  
 } 
```

这将产生非常相似的数据页面。我通常会在顶部附近找到我需要的东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T23:39:13.510

我会使用[Fiddler](http://www.fiddler2.com/fiddler2/)来检查哪些位正在通过网络传输（或者这些位正在通过网络传输）。

# ios - 将启动图像拖动到 Retina 4 英寸插槽无效

> ID：14740735
> 
> 赞同：1
> 
> 时间：2013-02-06T23:16:14.167
> 
> 标签：ios, xcode

我刚刚创建了一个新项目，并将图像拖到其目标的 Lauch Images 部分。

我已将一个名为 Default@2x.png 的文件拖入 Retina 3.5 英寸占位符，但是当我将一个名为 Default-568h@2x.png 的文件拖入 Retina 4 英寸占位符时，没有任何反应 - 它既不会出现在该插槽中，也不会出现Xcode 有没有说什么。

我在其他项目中使用过这个完全相同的图像，为什么这次 Xcode 会默默地拒绝它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T23:29:06.497

将图像移到桌面上。

将其重命名为“blah.png”。

确保在名为 Default-568@2x.png 的项目文件夹中没有图像。不在您的 Xcode 项目中。

现在将 blah.png 拖到构建设置中的 4" 默认图像部分。

它现在会将图像移动到项目文件夹中并将其重命名为正确的名称。

不要尝试自己重命名它，否则它会卡住，因为已经有一个文件具有它正在尝试使用的名称。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T23:22:09.143

我遇到了同样的问题，我已经通过首先删除占位符（右键单击它>删除）然后再次重新拖动启动图像来解决它。

# ruby-on-rails - ruby - 如何从数组中删除元素并将它们按顺序保存在变量中？

> ID：14740742
> 
> 赞同：-1
> 
> 时间：2013-02-06T23:16:46.123
> 
> 标签：ruby-on-rails, ruby

我有一个像这样的数组：
`input2 = ["Other", "Y", "X", "Z", "Description"]`

我想取下`"Y", "X", "Z", "Description"`并将它们存储在一个变量中，但保持它们的顺序。
示例：
`input2 = ["Z", "X", "Y", "Other", "Description"]`我们应该有：

`input3 = ["Other"]`
`some_variable = ["Z", "X", "Y", "Description"]`

感谢帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T23:28:25.313

就像是？

```
def get_stuff(arr, *eles) # or change eles from splat to single and pass an array
  eles.map { |e| e if arr.include?(e) }
end

input2 = ["Other", "Y", "X", "Z", "Description"] 

x = get_stuff(input2, 'Y', 'X', 'Z', 'Description')
y = get_stuff(input2, 'Other')
p x
#=> ["Y", "X", "Z", "Description"]
p y
#=> ["Other"] 
```

不是很优雅，但它确实有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T23:23:21.067

```
input2 = [:a,:b,:c,:d,:e]
input3 = input2.slice!(-4..-1) # ! indicates destructive operator
#Or just as well: input3 = input2.slice!(0..4)
input2.inspect
#[:a]
input3.inspect
#[:b,:c,:d,:e] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-06T23:44:27.550

```
def take_it_off(arr, values)
  without = []
  ordered_values = []
  arr.each do |val|
    if values.include? val
      ordered_values << val
    else
      without << val
    end
  end

  return without, ordered_values
end 
```

所以你可以做

```
irb> values = "Y", "X", "Z", "Description"
=> ["Y", "X", "Z", "Description"]

irb> arr = ["Z", "X", "Y", "Other", "Description"]
=> ["Z", "X", "Y", "Other", "Description"]

irb> take_it_off(arr, values)
=> [["Other"], ["Z", "X", "Y", "Description"]] 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-07T01:27:05.407

这实际上可以使用 Ruby 删除方法和地图来完成。可能还可以更简化。

```
def get_stuff(arr=[], eles=[])
  eles.map { |e| arr.delete(e) }
end

a = %w(Other Y X Z Description)
v = %w(Y X Z Description)
r = get_stuff(a, v)

# a is modified to ["Other"]
# r returns ["Y", "X", "Z", "Description"] 
```

# java - 在编译期间自动添加未实现的方法

> ID：14740743
> 
> 赞同：4
> 
> 时间：2013-02-06T23:17:07.733
> 
> 标签：java, code-generation, aspectj, cglib

我正在尝试找到如何实现类似于 Eclipse 功能“添加未实现的方法”的 hack。

我不想在编写代码时添加这些方法，而是想在编译期间执行此操作，使用模板生成方法体。此外，我不想修改原始的 .java 源文件。

例如，假设我有以下内容：

```
interface I { void foo(); }
class C implements I { 
  public static void main(String[] args) { new C().foo(); }
} 
```

编译它通常会导致错误，因为`I.foo`没有实现。

**我希望编译成功并随后执行使用我的模板**。模板可以像`{throw UnsupportedOpeationException()`} 这样简单。我确实希望能够获得有关方法和实现的接口的更多信息并在模板​​中使用它，但这应该不难吧？

我的第一个想法是尝试注释 ( `AutoImplementMethods`)，但注释处理器无法修改它正在处理的注释代码。

我对此感到有些满意，`AspectJ`但我不明白如何使用类型间声明来完成。

除了使用我自己的 java 解析器和生成代码代码之外，有什么建议可以做到这一点吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-14T02:19:27.357

查看[项目 lombok](http://projectlombok.org/index.html)，因为 Lombok 所做的事情与您想要的类似。

龙目岛将采用这个来源，

```
public class GetterSetterExample {
  @Getter @Setter private int age = 10;
  @Setter(AccessLevel.PROTECTED) private String name;

  @Override public String toString() {
    return String.format("%s (age: %d)", name, age);
  } 
```

并生成一个类，如

```
public class GetterSetterExample {
  private int age = 10;
  private String name;

  @Override public String toString() {
    return String.format("%s (age: %d)", name, age);
  }

  public int getAge() {
    return age;
  }

  public void setAge(int age) {
    this.age = age;
  }

  protected void setName(String name) {
    this.name = name;
  }
} 
```

Lombok 使用[JSR 269 Pluggable Annotation Processing API](http://www.jcp.org/en/jsr/detail?id=269)。

[这里](http://notatube.blogspot.ca/2010/12/project-lombok-creating-custom.html)有一篇文章描述了 lombok 的工作原理，以及如何添加自己的转换。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-07T00:22:03.493

我使用 JDT Eclipse 做了一些代码注入。它生成 Java 文件的抽象语法树 (AST)，并解决了各种绑定问题。JDT 允许您直接在语法树级别更改代码。以下是一些有用的链接：

[JDT 教程](http://www.vogella.com/articles/EclipseJDT/article.html)

[JDT 开发者指南](http://help.eclipse.org/indigo/index.jsp?topic=/org.eclipse.jdt.doc.isv/guide/jdt_int_core.htm)

# javascript - 以 1 的延迟调用 setTimeout 的目的是什么？

> ID：14740745
> 
> 赞同：10
> 
> 时间：2013-02-06T23:17:11.803
> 
> 标签：javascript, settimeout

在[Google Drive API 的快速入门指南中，](https://developers.google.com/drive/quickstart-js#step_2_set_up_the_sample)加载客户端库后会调用以下函数：

```
// Called when the client library is loaded to start the auth flow.
function handleClientLoad() {
    window.setTimeout(checkAuth, 1);
} 
```

`setTimeout`像这样延迟1调用而不是立即调用的目的是什么`checkAuth`？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-06T23:20:19.800

Javascript 具有异步 I/O (ajax/requests) 以及`setTimeout`and `setInterval`,

以 1 毫秒（或 0）运行的一种用途`setTimeout`是告诉该代码在*其后*的同步代码之后运行。这是一个例子

```
setTimeout(function(){
     alert("World");
},1); 
alert("Hello");

//alerts "Hello" then "World" 
```

我想让我的回答简单明了，如果您有兴趣，可以在[MDN 文章中详细了解 setTimeout 的工作原理](https://developer.mozilla.org/en-US/docs/DOM/window.setTimeout)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-02-06T23:20:59.127

通过使用，您允许页面在功能完成`setTimeout`之前进行交互。`checkAuth`

从本质上讲，您是在阻止`checkAuth`页面暂停。

作为旁注，HTML5 规范中指定的最小延迟是 5 毫秒，因此 1 毫秒的等待实际上是 5 毫秒的等待。如果回收该时间对您很重要，您可以使用 0ms 延迟获得相同的结果`window.postMessage`。这最初是为处理跨域通信而设计的，但[与将超时设置为 0ms 具有类似的效果](http://dbaron.org/log/20100309-faster-timeouts)（您不能这样做，因为浏览器只允许 5ms - 或在某些较旧的浏览器中允许 10ms）。

最后，时间不能保证。JavaScript 在单个线程上运行，因此当您将某些内容推送到计时器上时，它必须等待 JavaScript 其余部分的执行打开，然后才能轮到线程上运行——它不会并行运行。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-06T23:22:27.010

`setTimeout(function, 1)`将`function`在当前执行线程完成后运行。浏览器窗口中的 JavaScript 在单个线程中运行。因此，即使超时时间为 1，它也不会在当前执行结束后运行。例如考虑以下脚本：

```
window.setTimeout(checkAuth, 1);

// long code that takes 5 seconds to complete

function checkAuth() {
    alert("i m here!");
} 
```

在上面的示例中，您将在 5 秒后看到警报。

# javascript - jquery mouseover / 显示隐藏 div

> ID：14740755
> 
> 赞同：1
> 
> 时间：2013-02-06T18:28:32.367
> 
> 标签：javascript, jquery

我创建了一个用于在鼠标悬停时显示 div 的脚本。

```
<script type="text/javascript">
            $(document).ready(function() {

                $("a.prikaziDiv").hover(

                function() {
                    var $sibling = $(this).siblings('div.prikazano').show(); // get the sibling div and show it
                    $('div.prikazano').not($sibling).hide(); // hide the other divs
                }, function() {
                    $(this).siblings('div.prikazano').delay(999).fadeOut(0);; // get the sibling div and hide it after .333 seconds
                });

            });

</script>

<a class="prikaziDiv" href="#">SHOW</a><div class="prikazano" style="display:none;">aa</div> 
```

它可以工作，但是当我将鼠标悬停在“SHOW”链接上时，我将光标放在该 div 上，但它消失了。我不想让 div 消失。

有人能帮我吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T23:30:20.933

您悬停锚点，出现 div，当您悬停 div 时，它消失了，因为您不再悬停在锚点上，因此 hover() 的 mouseleave 部分触发。您可以将 div 放在锚点内，也可以使用超时，例如：

```
$(document).ready(function () {
    var timer;
    $("a.prikaziDiv").on({
        mouseenter: function() {
            var $sibling = $(this).siblings('div.prikazano').show();
            $('div.prikazano').not($sibling).hide();
        },
        mouseleave: function() {
            var self = this;
            timer = setTimeout(function() {
                $(self).siblings('div.prikazano').fadeOut(1);
            }, 999);
        }
    });

    $('div.prikazano').on({
        mouseenter: function() {
            clearTimeout(timer);
        },
        mouseleave: function() {
            $(this).delay(999).fadeOut(1);
        }
    })
}); 
```

[**小提琴**](http://jsfiddle.net/XXjga/2/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T19:06:08.947

使用 moueenter 而不是悬停。

[http://jsfiddle.net/kkobold/y8hb9/](http://jsfiddle.net/kkobold/y8hb9/)

# mysql - 如何使这个 eav 查询产生水平结果

> ID：14740758
> 
> 赞同：4
> 
> 时间：2013-02-06T23:18:03.577
> 
> 标签：mysql, sql, entity-attribute-value

案子：

表：

```
product:
product_id|name        |
------------------------
1         |iphone 4    |
2         |gallaxy 2   |
3         |blackbery 6 |

product_attribute:

id|product_id|attribute_id
--------------------------------------------------
 1 |1        |2
 2 |1        |6
 .    .        .

attribute:
------------------------------
attribute_id|name  |value|
        1   |width |300
        2   |width |320
        3   |width |310
        4   |height|390
        5   |height|370
        6   |height|380 
```

应该得到结果：

```
product_id|height|width
 1        |380   |320
 ...................... 
```

**编辑：** *高度和宽度属性是产品属性的唯一部分 - 产品需要像在 magento 中那样由用户在后端添加动态能力，因为我选择了 eav db 设计。如果可能的话，请写下查询，以防我们不知道产品有哪些名称。*

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-06T23:27:27.890

有几种方法可以实现这一点。对于每个属性值，这样的事情应该可以多次加入表中：

```
SELECT p.product_id,
    a.value height,
    a2.value width
FROM Product p
    JOIN Product_Attribute pa ON p.product_id = pa.product_id 
    JOIN Attribute a ON pa.attribute_id = a.attribute_id AND a.name = 'height'
    JOIN Product_Attribute pa2 ON p.product_id = pa2.product_id 
    JOIN Attribute a2 ON pa2.attribute_id = a2.attribute_id AND a2.name = 'width' 
```

这是[小提琴](http://sqlfiddle.com/#!3/dd9ae/1)。

这是我个人更喜欢的使用 MAX 和 GROUP BY 的替代方法：

```
SELECT p.product_id,
    MAX(Case WHEN a.name = 'height' THEN a.value END) height,
    MAX(Case WHEN a.name = 'width' THEN a.value END) width
FROM Product p
    JOIN Product_Attribute pa ON p.product_id = pa.product_id 
    JOIN Attribute a ON pa.attribute_id = a.attribute_id 
GROUP BY p.product_id 
```

祝你好运。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-06T23:29:51.977

一种方法是在 SELECT 列表中使用相关子查询，尽管这对于大型集合的性能可能不是最佳的。对于从产品表中仅检索几行行，这还不错。（您肯定需要适当的索引。）

```
SELECT p.product_id
     , ( SELECT a1.value
           FROM attribute a1
           JOIN product_attribute q1
             ON q1.attribute_id = a1.attribute_id
          WHERE q1.product_id = p.product_id
            AND a1.attribute_name = 'height'
          ORDER BY a1.id
          LIMIT 0,1
       ) AS height_1
     , ( SELECT a2.value
           FROM attribute a2
           JOIN product_attribute q2
             ON q2.attribute_id = a2.attribute_id
          WHERE q2.product_id = p.product_id
            AND a2.attribute_name = 'width'
          ORDER BY a2.id
          LIMIT 0,1
       ) AS width_1
  FROM product p
 WHERE p.product_id = 1 
```

* * *

此查询将返回来自产品的行以及属性的值（如果存在）。如果未找到属性值，则查询将返回 NULL 来代替属性值。（这与使用 INNER JOIN 代替相关子查询的查询的行为不同......其中属性或 product_attribute 表中的“缺失”行将过滤掉正在返回的产品中的行。）

LIMIT 子句的目的是保证子查询不会返回超过一行。（如果 SELECT 列表中的子查询返回多于一行，MySQL 将返回错误。） ORDER BY 的目的是再次使查询具有确定性，如果有多于一行满足子查询. （如果没有 ORDER BY 子句，当多于一行时，MySQL 可以随意返回它选择的任何一行。）

对于“多值”属性，同样的方法有效。我们只是添加更多的子查询，但是指定 LIMIT 1,1 返回第二个属性值，LIMIT 2,1 返回第三个值，等等。

* * *

（哦，在关系数据库中实现 EAV 模型的乐趣。）

* * *

## 跟进：

**问：** “......更一般的情况，因为它发生在 eav db 中，我们不知道我们之前有哪些属性名称。”

**答：**关系模型基于元组包含指定数量的指定类型的列的原则。

您（显然）尝试做的是在运行查询时返回可变数量的列。SELECT 语句包含要返回的特定表达式列表；这不能变化，并且每个表达式返回的值的数据类型不会因行而异。

上面的查询为每个产品返回一个“height”属性值的实例和一个“width”属性值的实例。

对于更“更一般的情况”，我们真的希望每个属性值都将在其自己的单独行中返回。

更一般的查询，如果您“提前”不知道与产品关联的属性将是：

```
SELECT p.product_id
     , a.attribute_id
     , a.name         AS attribute_name
     , a.value        AS attribute_value
  FROM product p
  LEFT
  JOIN product_attribute q
    ON q.product_id = p.product_id
  LEFT
  JOIN attribute a
    ON a.attribute_id = q.attribute_id
 WHERE p.product_id = 1
 ORDER
    BY p.product_id
     , a.name
     , a.attribute_id 
```

这将返回一个可以轻松处理的结果集：

```
product_id attribute_id attribute_name attribute_value
---------- ------------ -------------- ---------------
         1            6 height         380
         1            2 width          320 
```

**问：** “看起来应该分两个阶段完成：1.获取产品的所有属性名称 2.然后在 for 循环中使用服务器端属性名称代码的代码”

**答：**不，看起来单个查询将返回产品的所有属性名称和值对。每个属性名称/值将位于单独的行上。

无需使用“for 循环”来生成针对数据库的其他查询。是的，可以这样做，但完全没有必要。

如果您有一些奇怪的要求来编写另一个查询以针对数据库运行以返回您指定的格式的结果集，无论您将执行什么处理来处理“更一般情况”语句中的结果集，它可能会更有效只需处理结果集，无需对数据库运行任何更多查询。

如果您需要返回如下所示的结果集：

```
 product_id height width
 ---------- ------ -----
          1 380    320 
```

（就像一个奇怪的要求，组成另一个查询）完全有可能使用“更一般的查询”中的结果集来生成一个看起来像这样的查询：

```
SELECT 1 AS product_id, '380' AS height, '320' AS width 
```

尽管这样的练习毫无意义，但鉴于您没有返回任何以前未返回的新信息，而现在您有另一个需要处理的结果集，在我看来这只是一大堆不必要的开销。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-06T23:30:54.183

**首先让我说这是一个非常糟糕的设计。** 在您当前的方法下，您将需要运行多个子查询或使用表别名连接以获得您想要的结果。

```
SELECT 
    product_id,
    (
        SELECT product_attribute.value 
        FROM product_attribute, attribute 
        WHERE product_attribute.product_id=product.product_id 
        AND product_attribute.attribute_id=attribute.attribute_id
        AND product_attribute.name = 'width'
    ) AS 'width',
    (
        SELECT product_attribute.value 
        FROM product_attribute, attribute 
        WHERE product_attribute.product_id=product.product_id 
        AND product_attribute.attribute_id=attribute.attribute_id
        AND product_attribute.name = 'height'
    ) AS 'height'
FROM
    product
ORDER BY 
    ... 
```

## 让我建议：

```
attribute
   attribute_sid  (eg, string id)

product
   product_id
   name
   ...

product_attribute
   product_id   (foreign key to product table)
   attribute_sid  (foreign key to attribute table)
   value 
```

这样，您就有了一个明确的属性列表，以及每个产品的单个属性值。

```
SELECT attribute_sid, value FROM product_attribute WHERE product_id = 1 
```

... 将检索所有属性和值，这些属性和值可以方便地放置在`dict`、`array`或`map`.

# c++ - 使用 shared_ptr 时奇怪的双重析构函数调用

> ID：14740765
> 
> 赞同：5
> 
> 时间：2013-02-06T23:19:03.227
> 
> 标签：c++, c++11, g++, destructor, shared-ptr

最后我找到了一个非常奇怪的错误，这是由双重调用析构函数引起的。这是重现该错误的最小代码：

```
#include <iostream>
#include <memory>
#include <set>

class cEventSystem {
    public:
        cEventSystem() {
            std::cout << "constructor: " << this << std::endl;
        }
        ~cEventSystem() {
            std::cout << "destructor: " << this << std::endl;
        }
};

class cSubscriber {
    public:
        cSubscriber(cEventSystem& eventSystem) : eventSystem(eventSystem) {}
        virtual ~cSubscriber() {}
        virtual void onEvent() = 0;
    protected:
        cEventSystem& eventSystem;
};

class cTileBrowser: public cSubscriber {
    public:
        cTileBrowser(cEventSystem eventSystem) : cSubscriber(eventSystem) {}
        void onEvent() {}
};

class cGui: public cSubscriber {
    public:
        cGui(cEventSystem& eventSystem) : cSubscriber(eventSystem) {
            tileBrowser = std::make_shared<cTileBrowser>(eventSystem);
        }
        void onEvent() {}
        std::shared_ptr<cTileBrowser> tileBrowser;
};

int main() {
    cEventSystem eventSystem;
    cGui gui(eventSystem);
} 
```

输出是：

```
 constructor: 0x7fffffffe67f
 destructor: 0x7fffffffe2df
 destructor: 0x7fffffffe67f 
```

如您所见，第一个析构函数是不需要的，它在根本没有构造的不同对象上调用（地址不同），但在我的真实代码中，地址足够接近，它破坏了我在事件系统中拥有的容器.

调试表明是 make_shared 导致了析构函数调用。

是什么导致了不需要的析构函数调用，我该如何摆脱它？我使用带有 c++11 标志的 g++4.7。

问题是，不需要的析构函数调用*通常*（90% 的时间）会破坏我的真实代码中的事件系统容器，从而导致段错误，但很少它不会破坏它并且一切正常。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-06T23:21:49.617

CTileBrowser 构造函数按值获取其参数。您可能会看到为该构造函数创建的临时副本被破坏。将其更改为参考参数，我敢打赌问题会消失。

# actionscript-3 - Flash Builder 长按列表 - 移动

> ID：14740768
> 
> 赞同：3
> 
> 时间：2013-02-06T23:19:30.827
> 
> 标签：actionscript-3, apache-flex, list, mobile, flash-builder

我想显示一个列表（在磁贴布局中，但我认为这不会改变任何东西）并打开我长按的磁贴的编辑窗口（即按下至少 1 秒）。计时器启动正常，并且 longPressHandler 事件在 1 秒后正确调用，但是，选择的对象是我触摸的上一个对象。

例如，假设我点击对象 A，然后长按对象 B：longPressHandler 将在编辑窗口中“打开”对象 A。我已经调试过，我看到我的 List 的 SelectedItem 属性仅在我结束长按后更新（例如，在我拿起手指或松开鼠标按钮后）。有没有办法打开当前选中的项目？

* * *

相关动作脚本：

```
private  var longPressTimer:Timer = new Timer(1000,1);

private function startLongPressMouse(event:MouseEvent):void {   
    startLongPressTimer();
    list.addEventListener(MouseEvent.MOUSE_MOVE, endLongPressMouse);
}
private function endLongPressMouse(event:MouseEvent):void {
    stopLongPressTimer();
    enableClick();
    list.removeEventListener(MouseEvent.MOUSE_MOVE, endLongPressMouse);
}
private function startLongPress(event:TouchEvent):void {
    startLongPressTimer();
    list.addEventListener(TouchEvent.TOUCH_MOVE, endLongPress);
}
private function endLongPress(event:TouchEvent):void {
    stopLongPressTimer();
    enableClick();
    list.removeEventListener(TouchEvent.TOUCH_MOVE, endLongPress);
}
private function startLongPressTimer():void {
    longPressTimer.start();
    longPressTimer.addEventListener(TimerEvent.TIMER_COMPLETE, longPressHandler);
}
protected function disableClick():void {
    trace("disable click");
    list.removeEventListener(MouseEvent.CLICK, regularClickHander);
}
public function enableClick():void {
    list.callLater(list.addEventListener, [MouseEvent.CLICK, regularClickHander]);
}
public function resetListSelection():void {
    list.selectedIndex = -1;
    list.validateDisplayList();
}
private function stopLongPressTimer():void{
    longPressTimer.stop();
    longPressTimer.reset()
}
public function longPressHandler(event:TimerEvent):void{
    disableClick();
    stopLongPressTimer();
    lblD.text = "Long Press Detected on: " + list.selectedItem.className;
} 
```

* * *

相关MXML：

```
 <s:List id="list"  dataProvider="{grades}" touchBegin="startLongPress(event)" touchEnd="endLongPress(event)"
        mouseDown="startLongPressMouse(event)" mouseUp="endLongPressMouse(event)"
        labelField="name"
        left.landscape="10" right.landscape="20" top.landscape="350" bottom.landscape="20"
        left.portrait="20" right.portrait="20" top.portrait="350" bottom.portrait="20">
    <s:itemRenderer>
        <fx:Component>
            <s:ItemRenderer width="100%" height="200">

                <s:Label text="{data.className}" top="30" horizontalCenter="0" color="#646464"/>
                <s:Label text="{data.credits}" top="50" horizontalCenter="0" color="#646464" fontSize="14"/>
                <s:Label text="{data.grade}" top="100" horizontalCenter="0" color="#646464" fontSize="14"/>
            </s:ItemRenderer>
        </fx:Component>
    </s:itemRenderer>
    <s:layout>
        <s:TileLayout requestedColumnCount="3" requestedColumnCount.landscape="4" columnAlign="justifyUsingWidth"/>
    </s:layout>
</s:List> 
```

* * *

我将 longPressHandler 更改为仅显示所选项目的名称，而不是打开编辑窗口。

如果您需要更多信息，请告诉我。预先感谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T00:41:14.473

一种方法是创建一个自定义事件（带有自定义属性），这样您就可以在分派事件时传递您想要的任何数据。

```
package events;
{
    import flash.events.Event;

    public class YourCustomEvent extends Event
    {
        public var yourData:Object;

        public function YourCustomEvent(type:String, yourData:Object)
        {
            super(type);
            this.yourData = yourData;
        }

        override public function clone():Event{
            return new YourCustomEvent(type, yourData);
        }
    }
} 
```

希望能帮助到你！

PS：我想把它放在评论中，但打字时它变得更大了:)

# matlab - 无阴影一维不变图像的实现

> ID：14740769
> 
> 赞同：3
> 
> 时间：2013-02-06T23:19:36.820
> 
> 标签：matlab, image-processing, signal-processing, shadow

[我根据论文Entropy Minimization for Shadow Removal](http://www.cs.sfu.ca/~mark/ftp/Ijcv09/ijcv09.pdf)中的不变颜色特征实现了一种去除阴影的方法。我的实现有时似乎会产生类似的计算结果，但它们总是关闭，而且我的灰度图像是块状的，可能是由于不正确地采用几何平均值。

这是论文中马图像以及我的不变图像的信息潜力的示例图。将 x 轴乘以 3 得到 theta（从 0 到 180）：

![信息罐](../Images/16a91378c62fa9154c140c88ab005661.png)

这是我的代码为正确的最大 theta 输出的灰度图像（我的是 10）：

![灰度](../Images/f837a9aad68163c83eb25505f8a77293.png)

您可以看到他们的图像没有的块状：

这是他们的信息潜力：

![信息罐2](../Images/dde88fa2324aad90f8d1135f77e5d13a.png)

除以几何平均值时，我尝试使用 NaN 并对图像进行阈值处理，因此可能的最小值为 0.01，但它似乎并没有改变我的输出。

这是我的代码：

```
I = im2double(imread(strname));
[m,n,d] = size(I);
I = max(I, .01);
chrom = zeros(m, n, 3, 'double');
for i = 1:m
    for j = 1:n
       % if ((I(i,j,1)*I(i,j,2)*I(i,j,3))~= 0)
              chrom(i,j, 1) = I(i,j,1)/((I(i,j,1)*I(i,j,2)*I(i,j, 3))^(1/3));
              chrom(i,j, 2) = I(i,j,2)/((I(i,j,1)*I(i,j,2)*I(i,j, 3))^(1/3));
              chrom(i,j, 3) = I(i,j,3)/((I(i,j,1)*I(i,j,2)*I(i,j, 3))^(1/3));
          % else
          %    chrom(i,j, 1) = 1;
          %    chrom(i,j, 2) = 1;
          %    chrom(i,j, 3) = 1;
        % end
    end
end

p1 = mat2gray(log(chrom(:,:,1)));
p2 = mat2gray(log(chrom(:,:,2)));
p3 = mat2gray(log(chrom(:,:,3)));
X1 = mat2gray(p1*1/(sqrt(2)) - p2*1/(sqrt(2)));
X2 = mat2gray(p1*1/(sqrt(6)) + p2*1/(sqrt(6)) - p3*2/(sqrt(6)));
maxinf = 0;
maxtheta = 0;
data2 = zeros(1, 61);
for theta = 0:3:180
M = X1*cos(theta*pi/180) - X2*sin(theta*pi/180);
s = sqrt(std2(X1)^(2)*cos(theta*pi/180) + std2(X2)^(2)*sin(theta*pi/180));
s = abs(1.06*s*((m*n)^(-1/5)));
[m, n] = size(M);
length = m*n;
sources = zeros(1, length, 'double');
count = 1;
for x=1:m
    for y = 1:n
    sources(1, count) = M(x , y);
    count = count + 1;
end
end
weights = ones(1, length);
sigma = 2*s;
[xc , Ak] = fgt_model(sources , weights , sigma , 10, sqrt(length) , 6  );
sum1 = sum(fgt_predict(sources , xc , Ak , sigma , 10 ));
sum1 = sum1/sqrt(2*pi*2*s*s);
data2(theta/3 + 1) = sum1;
if (sum1 > maxinf)
   maxinf = sum1;
   maxtheta = theta;
end
end
InvariantImage2 = cos(maxtheta*pi/180)*X1 + sin(maxtheta*pi/180)*X2; 
```

假设快速高斯变换是正确的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-31T10:34:53.763

我不知道这是否有什么不同，因为现在已经一个多月了，但是块状和不同的信息潜在图只是由使用过的图像的压缩引起的。你不能指望使用这张图片得到与他们一样的结果，因为他们使用的是原始的、高分辨率的未压缩版本。我不得不说我对你的结果印象深刻，尤其是在实现信息潜力方面。那件事让我有点不知所措。

约翰。

# mongodb - 当使用大量 CPU 周期时，如何优化 mongos？

> ID：14740777
> 
> 赞同：2
> 
> 时间：2013-02-06T23:20:38.127
> 
> 标签：mongodb

我有一个非常标准的 mongo 设置，`mongos`在应用服务器上运行，三个`mongoc`实例运行，两个分片，`mongod`每个分片三个实例。

一切运行良好，但我看到的所有文档都说这`mongos`应该是一个相当轻量级的过程。我的情况似乎不是这样。我正在运行一个模拟几个用户发出请求的测试，限制因素似乎是`mongos`过程。nginx 和 php-fpm 也在应用服务器上运行，但在测试期间它们只使用了大约 15% 的 CPU。`mongos`约为 85%。

我可以添加更多的应用服务器来弥补，但由于`mongos`应该更轻量级，我想也许我做错了什么。据我所知，我的所有查询都已编入索引。我在每个集合中使用默认的 MongoIDs 作为分片索引。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-06T15:24:26.153

如果`mongos`必须进行大型内存排序或大量合并排序、map-reduce、计数等，那么它将不是轻量级的。当它所要做的就是确定您将查询发送到哪些分片时，它将是轻量级的。

当它必须对来自这些分片的数据进行大量聚合、合并、排序然后将它们交还给最终用户时，它会更加努力地工作。

如果您想查看发生了什么，`mongos`然后登录并运行[`db.currentOp()`](http://docs.mongodb.org/manual/reference/method/db.currentOp/)以查看当时正在运行的内容 - 因为它是一个时间点，您可能需要几个样本才能让罪魁祸首显而易见。同样，[mongostat](http://docs.mongodb.org/manual/reference/mongostat/)可以为您提供随时间运行的操作的视图，这可能会有所帮助。

最后——作为找出问题用户的一种可能策略，你可以让每个人临时连接到一个单独的人`mongos`，然后看看他们的表现——这样做可能需要一些重构，但这可能是一个有用的选择。

# .net - 使应用程序正常工作的问题，.NET WebsphereMQ (IBM.XMS) with SSL

> ID：14740778
> 
> 赞同：1
> 
> 时间：2013-02-06T23:20:41.757
> 
> 标签：.net, ibm-mq, websphere-7

我正在尝试按主题连接到发布/订阅的频道。我在非托管模式下运行，因为这是唯一支持 SSL 的模式。我已经指定了密钥`CIPHER SPEC`与应用程序在同一目录中的位置（*我也尝试了密钥存储的完整路径，但这也不起作用*）。那里有一个关联，其中包含使用证书的密码（加密）。下面是代码片段，较少的连接字符串和其他敏感信息。`KEY_REPO``key.kdb`*`key.sth`*

 *```
XMSFactoryFactory factoryFactory = XMSFactoryFactory.GetInstance(XMSC.CT_WMQ);
IConnectionFactory connectionFactory = factoryFactory.CreateConnectionFactory();

connectionFactory.SetIntProperty(XMSC.WMQ_CONNECTION_MODE, XMSC.WMQ_CM_CLIENT_UNMANAGED);

connectionFactory.SetStringProperty(XMSC.WMQ_HOST_NAME, "hostName");
connectionFactory.SetIntProperty(XMSC.WMQ_PORT, 1234);
connectionFactory.SetStringProperty(XMSC.WMQ_CHANNEL, "Channel");
connectionFactory.SetStringProperty(XMSC.WMQ_QUEUE_MANAGER, "QueueManager");

connectionFactory.SetStringProperty(XMSC.WMQ_SSL_CIPHER_SPEC, "NULL_SHA");
connectionFactory.SetStringProperty(XMSC.WMQ_SSL_KEY_REPOSITORY, @"key");

connection = connectionFactory.CreateConnection(); 
```

我在 Visual Studio 中得到以下异常，它只是告诉我 MQ 客户端抛出了一个错误。

```
CWSMQ0006E: An exception was received during the call to the method 
ConnectionFactory.CreateConnection: CompCode: 2, Reason: 2393\. During 
execution of the specified method an exception was thrown by another 
component. See the linked exception for more information. 
```

我可以通过下面的事件日志看到 MQ 客户端抛出的特定错误。

```
No SSL certificate for channel 'SECUREQUEUE.SVRCONN'.  

The channel 'SECUREQUEUE.SVRCONN' did not supply a certificate to use during 
SSL handshaking, but a certificate is required by the remote queue manager. 
The channel did not start.  

Ensure that the key repository of the local queue manager or MQ client contains an 
SSL certificate which is associated with the queue manager or client. Alternatively,
if appropriate, change the remote channel definition so that its SSLCAUTH attribute 
is set to OPTIONAL and it has no SSLPEER value set. &P If you have migrated from 
WebSphere MQ V5.3 to V6, it is possible that the missing certificate is due to a 
failure during SSL key repository migration. Check the relevant error logs. If 
these show that an orphan certificate was encountered then you should obtain the 
relevant missing certification authority (signer) certificates and then import 
these and the orphan certificate into the WebSphere MQ V6 key repository, and then
re-start the channel. 
```

我似乎无法弄清楚这个设置有什么问题..有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T22:28:56.210

该错误似乎表明 QMgr 的证书已由客户端验证。这意味着它找到了 KDB 和 STH 文件。现在它正在尝试验证客户端证书。这大概意味着...

a) 找不到客户端证书，可能是因为标签
b) QMgr 没有客户端的公钥（自签名）或 CA 根

[我通常按​​照这个其他 SO 答案](https://stackoverflow.com/questions/12816797/java-net-socketexception-broken-pipe-with-jms-jndi-and-mq-series/12817649#12817649)中概述的过程来验证 TLS 通道测试。 如果您成功测试，`SSLCAUTH(OPTIONAL)`那么它往往会证实我的猜测。如果这不起作用，那么您需要提供有关您是否使用自签名证书、QMgr 的 KDB 中`REFRESH SECURITY TYPE(SSL)`的内容、更新其密钥库后是否在 QMgr 上运行以及客户端密钥库中的证书标签名称的详细信息。*

# php - 我如何计算这些卡的值

> ID：14740782
> 
> 赞同：1
> 
> 时间：2013-02-06T23:21:00.580
> 
> 标签：php

我正在用 PHP 开发一个非常小的二十一点游戏。

我目前正在编写计算牌的函数，但是 A 正在踢我的屁股。

我的卡片都是这样排列的：

```
$card_array = array( "ca", "c10", "c2", "c3", "c4", "c5", "c6", "c7", "c8", "c9",
    "cj", "ck", "cq", "da", "d10", "d2", "d3", "d4", "d5", "d6", "d7", "d8",
    "d9", "dj", "dk", "dq", "ha", "h2", "h3", "h4", "h5", "h6", "h7", "h8", "h9",
    "hj", "hk", "hq", "sa", "s2", "s3", "s4", "s5", "s6", "s7", "s8", "s9",
    "s10", "sj", "sk", "sq");` 
```

其中第一个字符是花色，之后的所有字符都是卡片（j 代表杰克等）

到目前为止，这是我对值进行计数的内容：

```
function bj_calculate_values( $cards ) {
    $card_values = 0;
    foreach ($cards as $card) {
        if (substr($card, 1) == "k" || substr($card, 1) == "q" || substr($card, 1) == "j") {
            $card_values += 10;
        }
        else if (substr($card, 1) != "a") {
            $card_values += substr($card, 1);
        }
    }
} 
```

最初，我也有一张价值 11 的王牌，但显然这会导致问题。我觉得我需要继续循环以确保 A 不会让我们超过 21，但我不完全确定最好的方法来做到这一点。

伙计们，我将不胜感激。 **编辑**：

我能想到的最好的就是将它添加到函数中

```
foreach ($cards as $card) {
    if (substr($card, 1) == "a") {
        if ($card_values + 11 <= 21) {
            $card_values += 11;
        }
        else {
            $card_values += 1;
        }
    }
} 
```

其实我觉得这可能行得通。给我几分钟测试一下。

**编辑：**

不，没有工作。4, ace, ace, 6 就这样出来了 22。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-07T00:15:28.447

我对二十一点了解不多，但这是我的尝试。

```
 function bj_calculate_values( $cards ) {
        $card_values = 0;
        $ace = 0;
        foreach ($cards as $card) {
            $val = substr($card, 1);
            if (!is_numeric($val))
            {
                    if ('a' == $val)
                    {
                            $val = 0;
                            $ace ++;
                    }
                    else
                            $val = 10;
            }
            $card_values    += $val;
        }
        while ($ace)
            $card_values += ($card_values + 11*$ace-- <= 21) ? 11: 1;

        return $card_values;
    } 
```

## 更新

如果我理解您的其他评论，您希望 6 4 AAA 出现 13、6 4 AA 出现 12 和 6 4 A 出现 21。所以*剩余*的 A数很重要。相应地修改了源。

## 解释

首先我们计算非王牌的价值。这些是不变的，所以我们结束了。而这个总数是（初步的）`$card_values`。

那么我们可能有（或没有）一些A。有 a 是有意义的，`while($aces)`这样如果我们没有 A，我们什么也不做。

现在的问题是，我们如何处理这些 A？这就是你的要求：总和必须适合 21。这意味着我不能只说“我在 10，我有一张 A，所以它适合 21”，因为在那之后可能还有*另一个*A . 所以我必须计算如果我将所有剩余的 A 都加起来，*最坏的情况是什么？*这当然是 ace 的数量乘以 11。虽然最坏的情况仍然很好（即`$card_values + 11*$ace`小于 21），但我可以加 11。虽然不是，我必须加 1。

这是“贪婪”算法的一种形式：我尽可能满足所有 1，同时确保留下足够的 11 以达到不超过 21 的最接近方法。

我似乎记得（我可能错了，呵呵）这个实现中有一个讨厌的错误，只要 NumberOfItems * LowestValue >= HighestValue 就会出现（虽然我不太确定“等于”）。但在这种情况下，它需要 NumberOfItems 高于 11/1 = 11 个 ace，而且牌组中没有那么多 ace，所以我们很酷。可以肯定的是，可能的情况有五种——从一手牌中的“无”到“四”A——并且很容易测试所有其他牌的总和：

```
 // J Q K are worth 10, so we can use 10 instead.
    // And a fake card with value of 0 stands for "nothing".
    // We use the suit of Klingon, with up to four identical aces :-D

    for ($first = 0; $first <= 21; $first++)
    {
        $hand = array("k$first");
        for ($aces = 1; $aces < 5; $aces++)
        {
            $hand[] = "ka";
            $value  = bj_calculate_values($hand);

            // Let us ponder the possible values of $value.

            if ($value <= 11)
            {
                    // This is an error: we could have gotten closer to 21
                    // by upvaluing an ace. A correct implementation will
                    // never enter here except in the case of a LONE ACE.
                    if (($first != 0) || ($aces != 1))
                        print "ERROR: " . implode(" ", $hand) . " = $value\n";
            }
            // We have a value from 12 to 21.
            // Could we have done better? What cards do we have?
            // If no aces, of course no. All card values are then fixed.

            // If at least one ace, interpreted as 11, again not:
            // cannot interpret it above 11, and interpret as 1 would LESSEN the score.

            // If at least one ace, interpreted as 1, were we to interpret it
            // as 11, we would be summing 10\. And 12 would become 22, and blow.

            // So, from 12 to 21, the result MUST be correct.

            // Finally, $value more than 21.
            if ($value > 21)
            {
                   // This is admissible ONLY if we could have done no better, which
                   // means $value is given by the fixed cards' value, $first, plus 
                   // ALL ACES COUNTED AS ONES.
                   if ($value != ($first + $aces))
                        print "ERROR: " . implode(" ", $hand) . " = $value\n";
             }
        }
    } 
```

输出（版本 1）

```
VERIFY: k0 ka = 11              Correct, we had a lone ace and gave it 11.
VERIFY: k18 ka ka ka ka = 22    Correct, we had 18 in other cards and all A's to 1's.
VERIFY: k19 ka ka ka = 22       Ditto, 19 in cards.
VERIFY: k19 ka ka ka ka = 23    Ditto, 19 in cards.
...                             ... 
```

当前输出（添加代码仅打印错误）：

```
-- nothing :-) 
```

# clojure - 有没有更好的方法从排序地图中分离头部或尾部范围？

> ID：14740790
> 
> 赞同：1
> 
> 时间：2013-02-06T23:21:38.080
> 
> 标签：clojure

在 Java 中，使用 a `java.util.SortedMap<Long,Object>`，我们可以执行以下操作：

```
sortedMap.headSet(13).clear() 
```

摆脱所有键 < 13 的元素。我在 clojure.core 中没有看到任何类似的东西`(sorted-map)`（我认为它总是 a `clojure.lang.PersistentTreeMap`）。我想出的最好的是这样的：

```
(let [clear-up-to 13
      sm (sorted-map 1 "aye" 2 "bee" 13 "em" 14 "en")]
      clear-keys (take-while #(< % clear-up-to) (keys sm))
  (apply dissoc sm clear-keys)) 
```

我错过了一些更简单的东西吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T23:29:44.820

尽管在许多情况下使用 java.util.SortedMap 是完全合理的，但我认为对于内置的 sorted-map 通常没有更有效的解决方案。尤其是如果您在将其切碎后将其制成持久性地图。

对于它的价值，这也可以写成`reduce`：

```
user> my-sorted-map
{2 1, 4 3, 6 5, 8 7}

user>  (reduce dissoc my-sorted-map (take-while #(< % 5) (keys my-sorted-map)))
{6 5, 8 7} 
```

虽然这主要是一个品味问题。你的例子也很好。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-07T05:05:46.433

Dissoc 是您可以做的最好的事情，但`take-while`应根据需要将该步骤替换为`subseq`或`rsubseq`。

# grails - 在 grails 中找到对集合异常的共享引用

> ID：14740791
> 
> 赞同：0
> 
> 时间：2013-02-06T23:21:37.800
> 
> 标签：grails, grails-orm

下面的代码行有一个例外：

```
 def order = new PostOrder(pOrder: "post", posts: status, children: lookupPerson().children) 
```

lookupPerson().children 给出了一组 2 个具有不同 id 的子实例

完整的例外是：

```
 org.hibernate.HibernateException: Found shared references to a collection: com.fyp.timeline.PostOrder.children
at com.fyp.timeline.ProfileController$$ENwi3LDE.updateStatus(ProfileController.groovy:134)
at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
at java.lang.Thread.run(Thread.java:680) 
```

我真的坚持这一点。主要是因为它确实曾经工作并随机停止。我已经向 MySql 和一个新数据库添加了一个新用户，但这不应该影响这个。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-06T23:58:13.100

您正在传递`lookupPerson().children`给 的构造函数`PostOrder`- 我假设这是与 .`Person`映射的类中的一个集合`static hasMany = [ ... ]`。所以 Hibernate 告诉你发生了什么——你使用了同一个集合两次。对我来说，映射集合应该只有一个所有者是有道理的。请记住，这些不是常规`ArrayList`的 s 或`HashSet`s - 它们是 Hibernate`PersistentList`和`PersistentSet`实现正确接口但特定于 Hibernate 的 s。

如果要将集合项传递给 new `PostOrder`，可以将它们复制到新集合中，例如

```
def order = new PostOrder(
    pOrder: "post", posts: status,
    children: [] + lookupPerson().children) 
```

但是，由于这可能也是一个映射集合，因此您应该使用`addToChildren`，例如

```
def order = new PostOrder(pOrder: "post", posts: status)
lookupPerson().children.each { order.addToChildren it } 
```

# sql - UPDATE 然后 SELECT 是否更有效地获取表中的新行？

> ID：14740792
> 
> 赞同：2
> 
> 时间：2013-02-06T23:21:46.343
> 
> 标签：sql

我有一个表来存储我需要每隔几个小时批量发送的信息。此表中的每一行对应一个我需要批处理的项目。每隔几个小时，我就会查询所有新行`where the state = 'New'`。

当我开始批处理这些行时，我想将行的状态设置为“批处理”，一旦完成批处理，我想将状态设置为“完成”。

下面的 SQL 会不会更高效：

```
 UPDATE BatchTable SET state = <random number> where state = 'New';
   SELECT * from BatchTable where state = <random number>; 
```

通过做`UPDATE`第一个，它是否可以避免两个线程执行 SELECT 然后可能不得不处理在另一个线程对行进行批处理/更新时被阻塞的情况？如果我做一个`UPDATE`，它会避免被其他线程阻塞吗？

有没有完全不同的更好的方法来做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T23:37:30.217

我看到了您的担忧：在执行 select 语句时，可能会添加被更新而不是 select 捕获的新行。所以...通过在测试中引入第三个值，您的方法在这里是最直接的。你可以玩的另一件事，我很抱歉，因为我没有经常使用它：OUTPUT 子句：http: [//msdn.microsoft.com/en-us/library/ms177564.aspx](http://msdn.microsoft.com/en-us/library/ms177564.aspx)。这将允许您从 select 语句中进行更新并取回值，我相信所有这些都在一个语句中。

# windows - 在启动的应用程序关闭之前，批处理文件不允许交互

> ID：14740800
> 
> 赞同：1
> 
> 时间：2013-02-06T23:22:09.190
> 
> 标签：windows, batch-file, execute

我正在编写一个允许选择的批处理文件。

这是我遇到的问题...

如果我选择在单独的窗口中启动 Internet Explorer 的选项（Explorer /separate），我无法与我的批处理文件交互并选择其他选项，直到我启动的 IE 窗口关闭。

我希望能够与我的菜单进行交互，启动应用程序，并在我想要的任何时候进行特殊选择......我不想为了再次与我的批处理文件交互而关闭我刚刚启动的应用程序。

我正在使用这个批处理文件来访问我创建的不同菜单，以便在不同时间完成一系列任务，同时支持我的用户（在大型 IT 服务台）。

例子：

```
:MENUS1
CLS

ECHO ============= MENU NAME =============
ECHO -------------------------------------
ECHO 1\.  Explorer Separate S1
ECHO 2\.  Control Panel S2
ECHO 3\.  Network Connections S3
ECHO 4\.  Add/Remove Programs S4
ECHO 5\.  Internet Options S5
ECHO 6\.  Java Control Panel S6
ECHO 7\.  More Options S7
ECHO -------------------------------------
ECHO 8\.  Selection S8
ECHO -------------------------------------
ECHO 9\.  Selection S9
ECHO -------------------------------------
ECHO ==========PRESS 'Q' TO QUIT==========
ECHO ======PRESS 'MM' FOR MAIN MENU=======
ECHO.

SET INPUT=
SET /P INPUT=Please select a number:

IF /I '%INPUT%'=='S1' GOTO SelectionS1
IF /I '%INPUT%'=='S2' GOTO SelectionS2
IF /I '%INPUT%'=='S3' GOTO SelectionS3
IF /I '%INPUT%'=='S4' GOTO SelectionS4
IF /I '%INPUT%'=='S5' GOTO SelectionS5
IF /I '%INPUT%'=='S6' GOTO SelectionS6
IF /I '%INPUT%'=='S7' GOTO SelectionS7
IF /I '%INPUT%'=='S8' GOTO SelectionS8
IF /I '%INPUT%'=='S9' GOTO SelectionS9
IF /I '%INPUT%'=='Q' GOTO Quit
IF /I '%INPUT%'=='MM' GOTO MENU

CLS

ECHO ============INVALID INPUT============
ECHO -------------------------------------
ECHO Please select a number from the 
ECHO Shortcut Menu [S1-S9] or select 'MM'
echo for Main Menu or 'Q' to quit.
ECHO -------------------------------------
ECHO ======PRESS ANY KEY TO CONTINUE======

PAUSE > NUL
GOTO MENU

REM System Shortcuts Option 1 S1

:SelectionS1
Explorer /separate
GOTO MENUS1

:SelectionS2
panel
GOTO MENUS1

:SelectionS3
ncpa.cpl
GOTO MENUS1

:SelectionS4
appwiz.cpl
GOTO MENUS1

:SelectionS5
inetcpl.cpl
GOTO MENUS1

:SelectionS6
jpicpl32.cpl
GOTO MENUS1 
```

因此，如果我选择 Option #1 - Explorer Separate S1 它会执行命令 explorer /separate 并启动一个新的资源管理器窗口，但如果我还想选择 Option #2 - Control Panel S2 打开控制面板...我可以'在我关闭批处理打开的资源管理器窗口之前不要这样做。旁注，我必须在每个命令之后添加'GOTO MENUS1'，因为1）在我这样做之前 - 所有命令都试图一个接一个地启动，2）我想重定向回菜单......

关于如何将其修复到可以与批处理文件交互而不必关闭通过批处理打开的应用程序的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T00:11:51.847

如果您希望在启动的程序终止之前将控制权返回给批处理文件，那么您必须使用`start ProgramName Options`. 例如：

```
:SelectionS1
start Explorer /separate
GOTO MENUS1 
```

该`/separate`参数告诉 Windows 启动一个新的资源管理器实例，这与使用`start Explorer`.

# java - 在 Java 中“浏览”页面并提交表单的最简单方法

> ID：14740801
> 
> 赞同：13
> 
> 时间：2013-02-06T23:22:21.763
> 
> 标签：java, html, web-scraping, httprequest, headless-browser

我需要做的是浏览到一个网页，登录，然后浏览到该站点上需要您登录的另一个网页，因此它需要保存 cookie。之后，我需要单击该页面上的一个元素，我将在其中填写表单并获取网页返回给我的消息。我需要实际转到页面并单击按钮（假设只是直接导航到链接）的原因是因为每次登录并单击链接时都会为您分配一个会话 ID，而且它总是不同的。该按钮看起来像这样，它不是普通的 href 链接：

```
<span id=":tv" idlink="" class="sA" tabindex="0" role="link">Next</span> 
```

无论如何，最简单的方法是什么？谢谢。

更新：在尝试了 HTMLunit 和其他无头浏览器库之后，似乎没有使用任何“无头”。我最近发现的关于这个页面的另一件事是，所有的 HTML 都是一些奇怪的格式......它都在一个脚本标签中。这是一个示例。

```
"?ui\x3d2\x26view\x3dss\x26mset\x3dmain\x26ver\x3d-68igm85d1771\x26am\x3d!Zsl-0RZ-XLv0BO3aNKsL0sgMg3nH10t5WrPgJSU8CYS-KNWlyrLmiW3HvC5ykER_n_5dDw\x26fri"],"http://example.com/?ctx\x3d%67mail\x26hl\x3den",,0,"Gmail","Gmail",[["us","c130f0854ca2c2bb",[["n"],["m","New features!"],["u"],["k","0"],["p","1000:500000,10,200000,5,100000,3,75000,2,0,1"],["h","https://survey.googleratings.com/wix/p1679258.aspx?l\x3d1033"],["at","query,5,contacts,5,adv,5,cf,5,default,20"],["v","https://www.youtube.com/embed/Ra8HG6MkOXY?showinfo\x3d0"], 
```

当我检查按钮上的元素时，我在上面为按钮发布的 HTML 代码会出现，但在查看源代码时不会出现。基本上，我需要做的是使用某种 GUI 并让用户导航到链接，然后让程序填写信息。有谁知道我该怎么做？谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-09T05:09:47.623

查看 Selenium 的 5 分钟入门指南：[http ://code.google.com/p/selenium/wiki/GettingStarted](http://code.google.com/p/selenium/wiki/GettingStarted)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-06T23:36:05.783

在登录页面上，查看表单的 HTML 以查看它发布到的 url 和 url 参数。然后用正确的信息填充相同的参数请求该 url，并确保保存所有 cookie 标头以发送到第二页。然后使用 html 解析器找到您的链接。sourceforge 上有几个 html 解析器可用，您甚至可以尝试 java 内置的 xml 解析器，但如果站点有一个很小的 ​​html 错误，它们就会出现故障。

编辑没有注意到它不是正常链接的事实。在这种情况下，您需要查看网站的 javascript 以查看链接指向的位置。如果链接需要运行 javascript，它会变得更加复杂。Java 无法执行浏览器 javascript，但我发现了一个名为 DJ native swing 的库，其中包含一个可以添加到 jframes 的 Web 浏览器类。它使用您的本机浏览器来呈现和运行 javascript。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-16T00:15:41.643

正如其他人所指出的，这在 Selenium 中应该是可能的。

我使用 Selenium 登录然后爬取一个站点并发现站点上每个表单（30 多个表单）的每个值的排列。这些值稍后用于填写和提交具有特定值排列的表单。这个站点非常重 JS/jQuery，我使用 Selenium 对 javascript 执行器、css 选择器和 XPath 的内置支持来实现这一点。

我将 HtmlUnit 和 HttpUnit 实现为更快的替代方案，但鉴于我正在抓取的网站的 JS 语义，我发现它们不如 Selenium 可靠。

很难为您提供有关如何完成它的代码，因为您的 Selenium 实现将是非常特定于页面的，我无法查看您正在编码的页面来弄清楚该按钮脚本垃圾发生了什么。但是，我包含了一些可能相关的硒代码（Java）片段：

```
Element element = driver.findElements(By.id(value)); //find element on page
List<Element> buttons = parent.findElements(By.xpath("./tr/td/button")); //find child element
button.click();
element.submit() //submit enclosing form
element.sendKeys(text); //enter text in an input
String elementText = (String) ((JavascriptExecutor) driver).executeScript("return arguments[0].innerText || arguments[0].textContent", element); //interact with a selenium element via JS 
```

如果您在不同页面上编写类似的功能，那么接口后面的[PageObjects可以提供帮助。](http://code.google.com/p/selenium/wiki/PageObjects)

Anew 发布的链接是一个很好的起点，而且 StackOverflow 可以解决几乎所有 Selenium 问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-09T07:10:31.950

与其尝试以编程方式浏览，不如尝试执行登录请求并保存 cookie，然后在下一个请求中将它们设置为表单帖子。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-15T07:41:33.370

HTMLUnit 在处理 JavaScript 方面非常糟糕，Rhino JS 库经常产生错误（实际上没有错误是例外）。我建议使用[Selenium](http://docs.seleniumhq.org/)，它基本上是一个控制无头浏览器（基于 chrome、firefox）的框架。

对于您的问题，以下代码可以完成工作

```
selenium.open(myurl);
selenium.click("id=:tv"); 
```

然后，您必须等待页面加载

```
selenium.waitForPageToLoad(someTime); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-15T23:28:33.017

我会在任何一天推荐 htmlunit。这是一个很棒的图书馆。

首先，查看他们的网页 ( [http://htmlunit.sourceforge.net/](http://htmlunit.sourceforge.net/) ) 以启动和运行 htmlunit。确保使用最新的快照（写这篇文章时是 2.12）

尝试这些设置几乎可以忽略任何障碍：

```
WebClient webClient = new WebClient(BrowserVersion.FIREFOX_17);
webClient.getOptions().setRedirectEnabled(true);
webClient.getOptions().setCssEnabled(false);
webClient.getOptions().setThrowExceptionOnScriptError(false);
webClient.getOptions().setThrowExceptionOnFailingStatusCode(false);
webClient.getOptions().setUseInsecureSSL(true);
webClient.getOptions().setJavaScriptEnabled(true);
webClient.getCookieManager().setCookiesEnabled(true); 
```

然后在获取页面时，确保在对页面进行任何操作之前等待后台 Javascript，例如发布登录表单：

```
//Get Page
HtmlPage page1 = webClient.getPage("https://login-url/");

//Wait for background Javascript
webClient.waitForBackgroundJavaScript(10000);

//Get first form on page
HtmlForm form = page1.getForms().get(0);

//Get login input fields using input field name
HtmlTextInput userName = form.getInputByName("UserName");
HtmlPasswordInput password = form.getInputByName("Password");

//Set input values
userName.setValueAttribute("MyUserName"); 
password.setValueAttribute("MyPassword"); 

//Find the first button in form using name, id or xpath
HtmlElement button = (HtmlElement) form.getFirstByXPath("//button");

//Post by clicking the button and cast the result, login arrival url, to a new page and repeat what you did with page1 or something else :) 
HtmlPage page2 = (HtmlPage) button.click(); 

//Profit
System.out.println(page2.asXml()); 
```

我希望这个基本示例对您有所帮助！

# java - 你如何在java中解压缩一个zip？

> ID：14740807
> 
> 赞同：-2
> 
> 时间：2013-02-06T23:22:41.293
> 
> 标签：java

我想知道，你如何在java中解压缩一个zip文件？

我第一次尝试：

```
String source = "forge.zip";
String destination = "some/destination/folder";
try {
    zipFile = new ZipFile(source);
    zipFile.extractAll(destination);
    } catch (ZipException e) {
     e.printStackTrace();
    } 
```

它说 zpFile 没有 extractAll 方法。真的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T23:29:54.277

我无法说出你遇到了什么问题。`ZipInputStream`但是我以前用s 和s做过几次`ZipEntry`，我知道这会起作用：

```
File dir = new File(destDir);

if(!dir.exists()) dir.mkdirs();
FileInputStream fis;

byte[] buffer = new byte[1024];
try {
    fis = new FileInputStream(zipFilePath);
    ZipInputStream zis = new ZipInputStream(fis);
    ZipEntry ze = zis.getNextEntry();

    while(ze != null){
        String fileName = ze.getName();
        File newFile = new File(destDir + File.separator + fileName);

        new File(newFile.getParent()).mkdirs();
        FileOutputStream fos = new FileOutputStream(newFile);
        int len;

        while ((len = zis.read(buffer)) > 0) {
            fos.write(buffer, 0, len);
        }

        fos.close();
        zis.closeEntry();
        ze = zis.getNextEntry();
    }
    zis.closeEntry();
    zis.close();
    fis.close();

} catch (IOException e) {
    e.printStackTrace();
} 
```

# android - Android：计算设备方向的问题

> ID：14740808
> 
> 赞同：11
> 
> 时间：2013-02-06T23:22:42.447
> 
> 标签：android, orientation, augmented-reality, sensors, compass-geolocation

我正在尝试构建一个简单的**增强现实**应用程序，所以我开始使用传感器数据。

根据此线程（[Android compass example](https://stackoverflow.com/questions/8734190/android-compass-example)）和示例（[http://www.codingforandroid.com/2011/01/using-orientation-sensors-simple.html](http://www.codingforandroid.com/2011/01/using-orientation-sensors-simple.html)），使用**Sensor.TYPE_ACCELEROMETER**和**Sensor 计算方向。 TYPE_MAGNETIC_FIELD**不太适合。

所以我无法获得“好”的价值。方位角值根本没有任何意义，所以如果我只是将电话向上移动，值会发生极大的变化。即使我只是旋转手机，这些值也不代表手机的方向。

有没有人知道根据给定的例子谁来提高价值质量？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-02-11T15:49:36.913

您以何种方式使用此示例应用程序？从所写的是这段代码，唯一支持的方向是纵向或平放在桌子上，这取决于设备。“好”是什么意思？

旋转设备时该值不是“好”是正常的，设备坐标系应该是纵向工作，或者我不知道是平坦的（Y轴垂直沿着屏幕指向，Z轴指向外面屏幕来自屏幕中心，X 轴垂直于 Y 轴，沿屏幕向右）。有了这个，旋转设备不会旋转设备坐标系，你必须重新映射它。

但是，如果您希望设备的标题是纵向的，这里有一段对我有用的代码：

```
@Override
public void onSensorChanged(SensorEvent event)
{
    // It is good practice to check that we received the proper sensor event
    if (event.sensor.getType() == Sensor.TYPE_ROTATION_VECTOR)
    {
        // Convert the rotation-vector to a 4x4 matrix.
        SensorManager.getRotationMatrixFromVector(mRotationMatrix,
                event.values);
        SensorManager
                .remapCoordinateSystem(mRotationMatrix,
                        SensorManager.AXIS_X, SensorManager.AXIS_Z,
                        mRotationMatrix);
        SensorManager.getOrientation(mRotationMatrix, orientationVals);

        // Optionally convert the result from radians to degrees
        orientationVals[0] = (float) Math.toDegrees(orientationVals[0]);
        orientationVals[1] = (float) Math.toDegrees(orientationVals[1]);
        orientationVals[2] = (float) Math.toDegrees(orientationVals[2]);

        tv.setText(" Yaw: " + orientationVals[0] + "\n Pitch: "
                + orientationVals[1] + "\n Roll (not used): "
                + orientationVals[2]);

    }
} 
```

您将在以下位置获得航向（或方位角）：

```
orientationVals[0] 
```

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2014-02-28T10:53:12.980

Tíbó 的回答很好，但如果你记录滚动值，你会看到不规则的数字。（滚动对 AR 浏览器很重要）

这是因为

```
SensorManager.remapCoordinateSystem(mRotationMatrix,
                    SensorManager.AXIS_X, SensorManager.AXIS_Z,
                    mRotationMatrix); 
```

您必须使用不同的矩阵进出重映射。以下代码适用于我的正确滚动值：

```
@Override
public void onSensorChanged(SensorEvent event)
{
    // It is good practice to check that we received the proper sensor event
    if (event.sensor.getType() == Sensor.TYPE_ROTATION_VECTOR)
    {
        // Convert the rotation-vector to a 4x4 matrix.
        SensorManager.getRotationMatrixFromVector(mRotationMatrixFromVector, event.values);
        SensorManager.remapCoordinateSystem(mRotationMatrixFromVector,
                    SensorManager.AXIS_X, SensorManager.AXIS_Z,
                    mRotationMatrix);
        SensorManager.getOrientation(mRotationMatrix, orientationVals);

        // Optionally convert the result from radians to degrees
        orientationVals[0] = (float) Math.toDegrees(orientationVals[0]);
        orientationVals[1] = (float) Math.toDegrees(orientationVals[1]);
        orientationVals[2] = (float) Math.toDegrees(orientationVals[2]);

        tv.setText(" Yaw: " + orientationVals[0] + "\n Pitch: "
                + orientationVals[1] + "\n Roll (not used): "
                + orientationVals[2]);

    }
} 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2013-09-13T14:29:07.763

可能迟到了。无论如何，这就是我如何获得方位角

```
private final int sensorType =  Sensor.TYPE_ROTATION_VECTOR;
float[] rotMat = new float[9];
float[] vals = new float[3];

@Override
public void onSensorChanged(SensorEvent event) {
    sensorHasChanged = false;
    if (event.sensor.getType() == sensorType){
        SensorManager.getRotationMatrixFromVector(rotMat,
                event.values);
        SensorManager
                .remapCoordinateSystem(rotMat,
                        SensorManager.AXIS_X, SensorManager.AXIS_Y,
                        rotMat);
        SensorManager.getOrientation(rotMat, vals);
        azimuth = deg(vals[0]); // in degrees [-180, +180]
        pitch = deg(vals[1]);
        roll = deg(vals[2]);
        sensorHasChanged = true;
    }
} 
```

希望能帮助到你

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-06T23:47:55.580

您是否尝试过组合（传感器融合）类型 Sensor.TYPE_ROTATION_VECTOR。这可能会产生更好的结果：转到[https://developer.android.com/reference/android/hardware/SensorEvent.html](https://developer.android.com/reference/android/hardware/SensorEvent.html)并搜索“rotation_vector”。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-11-15T01:18:25.913

这是一种包含所有必要矩阵的 Kotlin 方法（由于某种原因，前面的答案忽略了数组大小，这很重要）

```
// This is determined from the deprecated Sensor.TYPE_ORIENTATION
var lastOrientation: FloatArray = FloatArray(3)
var lastHeading: Float = 0f
var currentHeading: Float = 0f

// This is from the non deprecated Sensor.TYPE_ROTATION_VECTOR
var lastVectorOrientation: FloatArray = FloatArray(5)
var lastVectorHeading: Float = 0f
var currentVectorHeading: Float = 0f

override fun onSensorChanged(event: SensorEvent) {
    when(event.sensor?.type) {
        null -> return
        Sensor.TYPE_ORIENTATION -> {
            lastOrientation = event.values
            lastHeading = currentHeading
            currentHeading = abs(event.values[0].roundToInt().toFloat())
        }
        Sensor.TYPE_ROTATION_VECTOR -> {
            lastVectorOrientation = event.values
            lastVectorHeading = currentVectorHeading

            val tempRotationMatrix = FloatArray(9)
            val tempOrientationMatrix = FloatArray(3)
            getRotationMatrixFromVector(tempRotationMatrix, event.values)
            remapCoordinateSystem(tempRotationMatrix, AXIS_X, AXIS_Z, tempRotationMatrix)
            getOrientation(tempRotationMatrix, tempOrientationMatrix)
            currentVectorHeading = Math.toDegrees(tempOrientationMatrix[0].toDouble()).toFloat()

            if(currentVectorHeading < 0) {
                currentVectorHeading += 360f//heading = 360 - abs(neg heading), which is really 360 + (-heading)
            }
        }
        else -> return
    }
} 
```

对于任何想要了解这两种方法之间差异的人，我还包含了已弃用的 Sensor.TYPE_ORIENTATION。使用不推荐使用的方法与使用更新的方法时存在若干程度的差异。

# php - PHP - 需要高级正则表达式帮助

> ID：14740809
> 
> 赞同：1
> 
> 时间：2013-02-06T23:22:48.843
> 
> 标签：php, regex, preg-match-all

所以我有很多大文本段落要解析。最终目标是将段落分成更小的帖子，这样我就可以将它们插入到 mysql 中。

这是字符串中的一个段落的一个非常简短的示例：

```
<?php
$longstring = '

(<b>John Smith</b>) at <b class="datetimeGMT">2011-01-10 22:13:01 GMT</b><hr>
Lots of text entered here under the first line.<br>And most of it is html, since it is for displaying in a web browser.<br></br></br>

(<b>Alan Slappy</b>) at <b class="datetimeGMT">2011-01-11 13:12:00 GMT</b><hr>
Forgot to put one more thing in the notes.........<br>blah blah blah
(<b>Joe Mama</b>) at <b class="datetimeGMT">2011-01-13 10:15:00 GMT</b><hr>
Groceries list:<br>Watermelons<br>Floss<br><br>email doctor
';

?> 
```

是的，我有一个为每个条目解析这些字符串的怪异项目。是的，我同意任何人的观点，即这不是一项很酷的任务。原始开发人员允许将文本附加到原始文本。在某些情况下这不是一个坏主意，但对我来说确实如此。

我确实需要有关如何对这个野兽进行正则表达式并将其放入 foreach 循环的帮助，以便我可以开始清理它。

这是我走了多远：

```
<?php

if(preg_match_all('/\(<b>.*?<hr>/', $longstring, $matches)){
print_r($matches);
}
/* output: 
Array 
( 
    [0] => Array 
        ( 
         [0] => (<b>John Smith</b>) at <b class="datetimeGMT">2011-01-10 22:13:01 GMT</b><hr>
         [1] => (<b>Alan Slappy</b>) at <b class="datetimeGMT">2011-01-11 13:12:00 GMT</b><hr> 
         [2] => (<b>Joe Mama</b>) at <b class="datetimeGMT">2011-01-13 10:15:00 GMT</b><hr> 
        ) 
) 
*/ 
?> 
```

所以，我实际上在遍历每个条目的顶部时做得很好。我有点自豪我想通了。（正则表达式是我的克星）

所以现在我一直在弄清楚如何在每次迭代下面包含实际文本。

任何人都知道如何调整`preg_match_all`以解释每个“标题”下方的文本？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T23:38:29.400

尝试使用 preg_split 代替：

```
$matches  = preg_split("/\s*(\(<b>.*?<hr>)\s*/s", trim($longstring), null, PREG_SPLIT_NO_EMPTY | PREG_SPLIT_DELIM_CAPTURE);

print_r($matches); 
```

注意：修剪应用于您的字符串以减少前导和尾随空格。

结果将类似于

```
Array
(
    [0] => (<b>John Smith</b>) at <b class="datetimeGMT">2011-01-10 22:13:01 GMT</b><hr>
    [1] => Lots of text entered here under the first line.<br>And most of it is html, since it is for displaying in a web browser.<br></br></br>
    [2] => (<b>Alan Slappy</b>) at <b class="datetimeGMT">2011-01-11 13:12:00 GMT</b><hr>
    [3] => Forgot to put one more thing in the notes.........<br>blah blah blah
    [4] => (<b>Joe Mama</b>) at <b class="datetimeGMT">2011-01-13 10:15:00 GMT</b><hr>
    [5] => Groceries list:<br>Watermelons<br>Floss<br><br>email doctor
) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T23:36:46.133

如果您解析 HTML 而不是仅仅尝试正则表达式，这将更容易，除非您可以保证 HTML 的格式。

您可能想看看[Robust and Mature HTML Parser for PHP](https://stackoverflow.com/questions/292926/robust-and-mature-html-parser-for-php)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-06T23:52:20.517

尝试这个

```
if(preg_match_all('/\(<b>(?:(?!\(<b>).)*/s', $longstring, $matches)){
  print_r($matches);
} 
```

# java - Jenkins 可以配置为独立于其他作业运行一组作业吗？

> ID：14740811
> 
> 赞同：1
> 
> 时间：2013-02-06T23:23:05.193
> 
> 标签：java, maven, jenkins

我在 SCM 中有以下 Maven 项目设置：

*   一种
*   B（取决于 A）
*   C（取决于 A 和 B，构建包含来自 A 和 B 的工件的存档）

我已经组织了 Jenkins，所以有一组作业在其中运行 A，然后是 B，然后是 C。例如，我有一组由 SCM 提交触发的构建（mvn clean install），一组运行报告的构建（mvn clean site )，以及部署到我们的开发/测试/生产服务器的构建集（mvn clean install + 运行一些插件来部署）。

当作业同时运行时会出现问题。例如：

1.  如果 C 提交作业与 A 提交作业在同一时间构建，则 C 提交作业通常无法从本地 m2 存储库读取，因为 A 提交作业可能正在写入本地 m2 存储库。
2.  如果 Commit 作业与 Deploy 作业同时运行，那么我担心它们正在写入和读取同一个本地 m2 存储库。

理想情况下，我希望保持同时运行这些作业集的能力。

1.  目前，当上游作业正在构建时，我正在阻止下游作业运行。这避免了一些问题。但是，我仍然有一个问题，即 C 处于构建过程中，然后 A 开始构建。启用“在构建上游项目时进行块构建”和“在构建下游项目时进行块构建”是否存在任何已知问题？
2.  我可以配置 Jenkins 以使一组作业使用相同的 Maven 存储库吗？例如，我希望提交触发的作业使用一个存储库并使用另一个存储库进行开发部署作业。这是我想要的正确解决方案还是有其他方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T12:16:43.227

要回答您问题的第一部分-

您应该能够在相同的作业配置中同时使用“*上游项目正在构建时的*块构建”
和“*下游项目正在构建时的块构建”。*

这将阻止 Job-A 在 Job-B 或 Job-C 已经运行时
启动，并将阻止 Job-C 在 Job-A 或 Job-B 已经运行时启动。

干杯

# php - PHP：这对恶意输入安全吗？

> ID：14740814
> 
> 赞同：0
> 
> 时间：2013-02-06T23:23:15.877
> 
> 标签：php, html, mysql, forms, security

我打算将它用于将由我的用户输入的文本块。当然，我想避免恶意滥用该网站。

从我读过的关于[MYSQL 注入](https://stackoverflow.com/questions/60174/how-to-prevent-sql-injection-in-php)和[XSS](http://en.wikipedia.org/wiki/Cross-site_scripting)的内容来看，我只允许简单的文本，没有 HTML 标记，没有链接，没有什么特别的，只有纯文本和一些文字链接。

这样就够了吗？

```
mysql_real_escape_string(strip_tags($_POST['datablock'])); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-06T23:33:39.300

绑定 SQL 参数而不是手动构建 SQL 字符串也是一种很好的做法（请参阅[Little Bobby Tables 上的 xkcd](http://xkcd.com/327/)）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-07T01:58:54.033

简短的回答：**不**。

长答案更复杂。

您必须确保保护您的 SQL 查询免受[注入错误](http://bobby-tables.com/php)的影响。最好的方法是永远不要将用户数据直接注入到您的查询中，而是使用数据库驱动程序的 SQL 占位符为您执行插入操作。这是迄今为止最安全的方法。您的查询最终将如下所示：

```
INSERT INTO table_name (user_id, comment) VALUES (:user_id, :comment) 
```

然后以驱动程序可以正确编码的方式将数据*绑定到各种占位符。*对此进行自律可以避免几乎所有的 SQL 注入问题。

您还必须通过不允许用户在您的页面中插入带有脚本的任意 HTML 来保护您的 HTML 免受[XSS 攻击。](http://en.wikipedia.org/wiki/Cross-site_scripting)您应该始终将用户输入呈现为 HTML 实体化等效项，除非您绝对确定此用户内容没有`<script>`类型标签或 JavaScript 潜入各种元素。请注意，这*很难*正确执行，因为 JavaScript 根本不限于脚本标签。它可以作为属性出现在 HTML 元素甚至 CSS 样式定义中。

此外，您**永远**`mysql_query`不应在新应用程序中使用或任何相关功能。这些方法在默认情况下是危险的，如果您错过一个变量，就会对您造成严重伤害。[自动化 SQL 注入工具](http://sqlmap.org/)具有一系列可怕的功能，而这些工具所需要的只是**一个**未转义的变量。

值得庆幸`mysql_query`的是，它已被弃用，它在 PHP 5.5.0 中产生警告，并将在 PHP 的未来版本中完全删除。

至少您应该使用[PDO](http://net.tutsplus.com/tutorials/php/why-you-should-be-using-phps-pdo-for-database-access/)进行数据库访问。它支持命名占位符，并且可以很容易地审核您的数据库接口代码以确保其安全。错误会突出。作为一项安全措施，最好用单引号定义查询字符串，`'INSERT INTO ...'`这样如果您错误地放入变量，它不会被意外插值，但最终会产生无害的 SQL 错误。

理想情况下，您应该使用[PHP 框架](http://www.phpframeworks.com/top-10-php-frameworks/)来构建您的应用程序。其中大多数都有用于安全数据库访问、HTML 转义和 XSS 保护的标准化方法。除非您想花一年时间编写自己的框架，否则这不是您可以自己完成的事情。

# c++ - 不同的功能取决于模板类中的类型

> ID：14740815
> 
> 赞同：1
> 
> 时间：2013-02-06T23:23:16.730
> 
> 标签：c++, templates, types

我最初打算为 Array 样式的类使用模板，然后将其传递 a`char*`或 an `int`，但在尝试实现以下内容时遇到了问题：

```
template<Typename T>
class Array {
    void add(T elem) {
        if(size == capacity) expandArr();
        if(T == char*) //g++ threw errors here
            arr[size] = new char[strlen(word) + 1];
            strcpy(arr[size], word);
        else if(T == int) {
            arr[size] = elem;
        }

        size++;
    }
} 
```

还有另一种合法检查元素类型的方法吗？或者我应该把这两个班级分开并让他们独立吗？

我最初尝试使用模板类，因为这两种 Array 类型具有相同的功能，但是在这种情况下，对于`char*`'s 和`int`'s 的内存分配方式存在一些根本差异。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T00:11:06.623

您应该使用[模板专业化](http://www.cprogramming.com/tutorial/template_specialization.html)来为不同的模板类型提供不同的行为。

将您的代码更改为：

```
template<typename T>
class Array {
    void add(T elem) {
        if(size == capacity) expandArr();

        size++;
    }
}

template<>
class Array<char*> {
    void add(T elem) {
        if(size == capacity) expandArr();
        arr[size] = new char[strlen(word) + 1];
        strcpy(arr[size], word);

        size++;
    }
}

template<>
class Array<int> {
    void add(T elem) {
        if(size == capacity) expandArr();
        arr[size] = elem;

        size++;
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-07T09:29:33.537

在这种情况下，类模板专业化是多余的——它迫使你为不同的类型复制**整个类**，即使大约 90% 的功能是相同的。

关键是隔离那些不同的部分并只专门化那些部分。不过，出于多种原因，使用重载而不是专门化更容易。

在您的情况下，不同的部分只是将值分配给数组项。

```
template <typename T>
class Array {
    void add(T elem) {
        if(size == capacity) expandArr();
        assignItem(elem);
        size++;
    }

    template <typename U>
    void assignItem(U elem) {
        arr[size] = elem;
    }

    void assignItem(char* elem) {
        // Incidentally, DON’T DO THIS! It leaks. Use RAII!
        arr[size] = new char[strlen(elem) + 1];
        strcpy(arr[size], word);
    }
}; 
```

当然，现在您已经硬编码了受支持的类型`Array`：只有具有复制构造函数*且* `char*`受支持的类型，不支持其他类型。一般来说，您不希望这种限制，您希望支持*任意*类型并允许它们指定它们的复制方式¹。

有几种方法可以实现这一点。我将在这里通过一个指定如何复制类型的特征类来说明一个。

```
template <typename T>
struct CopyConstruct {
    void assign(T& target, T source) const {
        target = source;
    }
};

template <typename T, typename Copy = CopyConstruct<T>>
class Array {
    Copy copier;

    void add(T elem) {
        if(size == capacity) expandArr();
        copier.assign(arr[size], elem);
        size++;
    }
}; 
```

此类可以与您的初始类相同地使用。对于`char*`，用户有两种选择：要么 specialize `CopyConstruct`，要么在实例化时提供完全自己的 trait `Array`，如下所示：

```
struct CopyCString {
    void assign(char*& target, char* source) const {
        target = new char[strlen(elem) + 1];
        strcpy(arr[size], word);
    }
};

// And then:

Array<char*, CopyCString> strArray; 
```

（请注意，我们在这里传递了对指针的*引用*——否则分配的内存将会丢失，因为我们会将指针分配给数组项的*副本，而不是项本​​身。）*

* * *

¹但事实上，C++ 已经为此目的使用了复制构造函数。**真正的解决方案**不是上述任何一种，而是包装`char*`成可复制的类型，例如`std::string`.

# java - CustomAdapter 和 CustomTextView 的奇怪行为

> ID：14740823
> 
> 赞同：0
> 
> 时间：2013-02-06T23:23:47.583
> 
> 标签：java, android, textview, android-arrayadapter

我有一个`TextView`在自定义`GridView`适配器中使用的自定义。自定义`TextView`使用自定义字体进行翻译。这在默认安装了语言环境的设备中效果很好。

但是，在未安装该语言的设备中，它显示出一种奇怪的行为。当应用程序第一次加载时，`TextViews`不显示自定义字体。但是，当我按下刷新按钮重新加载片段时，会`TextViews`显示自定义字体。

我不确定为什么会这样。

`Adapters`我使用 custom 的应用程序中的所有自定义都会发生这种情况`TextView`。

非常基本的适配器：

```
public class CalendarWeekAdapter extends BaseAdapter{

    private String[] weekdays;
    Context mContext;
    private LayoutInflater mInflater;

       public CalendarWeekAdapter(Context context, int firstDay)
       {
              mContext=context;
              mInflater = LayoutInflater.from(context);
              weekdays = context.getResources().getStringArray(R.array.weekdays); 
       }
       public int getCount()
       {
              return weekdays.length;
       }
       public Object getItem(int position)
       {
              return position;
       }
       public long getItemId(int position)
       {
              return position;
       }
       public View getView(int position, View convertView, ViewGroup parent)
       {
              ViewHolder holder=null;
              if(convertView==null)
              {
                     convertView = mInflater.inflate(R.layout.calendar_week, parent,false);
                     holder = new ViewHolder();
                     holder.txtWeekdays=(CustomTextView)convertView.findViewById(R.id.weekdays);
                     if(position==0)
                     {                             
                           convertView.setTag(holder);
                     }
              }
              else
              {
                     holder = (ViewHolder) convertView.getTag();
              }

             holder.txtWeekdays.setText(weekdays[position]);

             return convertView;
       }

}
class ViewHolder
{        
          CustomTextView txtWeekdays;                 
} 
```

基本自定义文本视图：

```
public class CustomTextView extends TextView {
        public CustomTextView(Context context, AttributeSet attrs, int defStyle) {
            super(context, attrs, defStyle);
            init();
        }

        public CustomTextView(Context context, AttributeSet attrs) {
            super(context, attrs);
            init();
        }

        public CustomTextView(Context context) {
            super(context);
            init();
        }

        private void init() {
            if (!isInEditMode()) {
                setTypeface(Utils.getFont(getContext()));
            }
        }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T23:30:43.273

这可能不是答案，但我不明白这个 if 语句：

```
 holder.txtWeekdays=(CustomTextView)convertView.findViewById(R.id.weekdays);
                 if(position==0)
                 {                             
                       convertView.setTag(holder);
                 } 
```

为什么会在那里？你所有新膨胀的 convertViews 都应该有 holder 作为它们的标签。只需删除 convertView.setTag(holder) 周围的“if”：

```
 if(convertView==null)
          {
                 convertView = mInflater.inflate(R.layout.calendar_week, null,false);
                 holder = new ViewHolder();
                 holder.txtWeekdays=(CustomTextView)convertView.findViewById(R.id.weekdays);
                 convertView.setTag(holder);
          }
          ... 
```

看看这是否会改善甚至解决您的情况。

# java - 我的方程式不是在看双重

> ID：14740824
> 
> 赞同：0
> 
> 时间：2013-02-06T23:23:47.470
> 
> 标签：java, double, equation

我有一个计算热量指数的方程。老师提供了方程，我把它复制对了，但它没有看我的湿度变量。（对不起，如果我把这个贴错了，这是我在这里的第一篇文章）

```
public class HeatIndexCalculator {

  private int temperature;
  private double humidity;
  private double heatIndex;
  public double calculateHeatIndex(int currentTemp, double currentHumidity){
     temperature = currentTemp;
     humidity = (currentHumidity/100.0);
     heatIndex=(-42.379)+(2.04901523*temperature)+10.14333127*humidity+         
            -0.22475541*temperature*humidity+                                       
            -0.00683783*temperature*temperature+                                    
            -0.05481717*humidity*humidity+                                      
            0.00122874*temperature*temperature*humidity+                            
            0.00085282*temperature*humidity*humidity+                               
            -0.00000199*temperature*temperature*humidity*humidity; 
```

下面是我尝试调用该方法时

```
public static void main(String[] args) {
  Scanner input = new Scanner(System.in);
    int x;
    double y,z;
    HeatIndexCalculator HeatC = new HeatIndexCalculator();
    System.out.println("Please enter a temperature in degrees Fahrenheit");
    x = input.nextInt();
    System.out.println("Please enter the current humidity as a percenage");
    y = input.nextDouble();
    z = HeatC.calculateHeatIndex(x, y);
   HeatC.printHeatIndex(x, y, z);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T23:47:38.310

你的方法没有问题。我稍微扩展了您的代码以生成一个可执行示例。输出是：

```
temperature=20 humidity=50 : -1.0736070574999943
temperature=20 humidity=25 : -2.601307430624994
temperature=20 humidity=75 : 0.44927371937500604 
```

所以注意湿度就好了。我怀疑您的问题实际上出在您的测试中，因为您使用了两种不同的湿度单位，一个比另一个大 100 倍。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T23:50:29.090

该解决方案有效，但可能精度不够：

```
public static double calculateHeatIndex(int currentTemp, double currentHumidity)
{
    int temperature = currentTemp;
    double humidity = (currentHumidity);
    double heatIndex = (-42.379) + (2.04901523 * temperature) + 10.14333127 * humidity + -0.22475541 * temperature * humidity
            + -0.00683783 * temperature * temperature + -0.05481717 * humidity * humidity + 0.00122874 * temperature
            * temperature * humidity + 0.00085282 * temperature * humidity * humidity + -0.00000199 * temperature
            * temperature * humidity * humidity;
    return heatIndex;
}

@Test
public void testConst()
{
    System.out.println(String.valueOf(calculateHeatIndex(95, 55)));
} 
```

结果 ：

```
108.94701570000008 
```

# android - 错误：解析 XML：文档元素后出现垃圾

> ID：14740825
> 
> 赞同：0
> 
> 时间：2013-02-06T23:23:50.907
> 
> 标签：android, xml-parsing

我的代码出现此错误但无法解决原因，我试图通过在谷歌上搜索答案来解决此问题，但没有遇到任何解决此问题的方法，错误显示在

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T23:49:51.850

删除初始末尾的斜线`<RelativeLayout.../>`并在文档末尾添加`</RelativeLayout>`。像这样的标签：`<foo/>`是空的。

# sqlite - 如何在 SQLite 中删除具有 GUID 值的行

> ID：14740827
> 
> 赞同：1
> 
> 时间：2013-02-06T23:23:58.637
> 
> 标签：sqlite, guid

我在 SQLite 中有 GUID 类型的列，我尝试过这样的查询，它没有返回错误，但没有删除该行

```
DELETE FROM MyTable WHERE Id='4ffbd580-b17d-4731-b162-ede8d698e026'; 
```

在 SQLite 浏览器中，Id 值看起来像二进制值，它们有奇怪的字符。

这个我也试过了，还是不行

```
DELETE FROM MyTable WHERE Id='{4ffbd580-b17d-4731-b162-ede8d698e026}'; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T18:49:22.697

我知道我迟到了，但它可能对有同样问题的人有用。

我的一个表中有一个 uniqueidentifier 类型的列，当我在没有任何条件的情况下执行选择查询时，它会以这种格式返回结果 guid 列值 -

{000B6A69-04D6-C557-7EA3-08CF8C8AD84B}

（是的，带大括号）

我使用 typeof() 函数发现我的 guid 列值已存储为文本。所以，我只是尝试了四种不同的说法，幸运**的是，第四种奏效了**——

```
 1\. select myGuidColumn, typeof(myGuidColumn) from MyTable WHERE [myGuidColumn] = '000B6A69-04D6-C557-7EA3-08CF8C8AD84B' --didn't work
    2\. select myGuidColumn, typeof(myGuidColumn) from MyTable WHERE [myGuidColumn] = '{000B6A69-04D6-C557-7EA3-08CF8C8AD84B}' --didn't work
    3\. select myGuidColumn, typeof(myGuidColumn) from MyTable WHERE [myGuidColumn] LIKE '{000B6A69-04D6-C557-7EA3-08CF8C8AD84B}' --didn't work
    4\. select myGuidColumn, typeof(myGuidColumn) from MyTable WHERE [myGuidColumn] LIKE '000B6A69-04D6-C557-7EA3-08CF8C8AD84B' --it works! 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T23:51:07.233

试试这个命令。 `Id`可能是一个二进制 blob 字段

```
 DELETE FROM MyTable WHERE Id= X'4ffbd580b17d4731b162ede8d698e026'; 
```

# c# - 从 2nd Form 终止应用程序不会停止调试

> ID：14740829
> 
> 赞同：-1
> 
> 时间：2013-02-06T23:24:10.273
> 
> 标签：c#, winforms, visual-studio-2010

我有一个使用多种表单的程序，我希望能够从表单 2 中终止应用程序，使其不再运行或调试。

这是我尝试过的代码：

```
 private void exitToolStripMenuItem_Click(object sender, EventArgs e)
        {
            Form1 frm = new Form1();
            frm.Close();
            this.Close();
        } 
```

使用上面的代码会关闭表单，但不会停止调试过程，我不确定这是否是一个问题！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-06T23:28:10.567

如果您想关闭整个应用程序，您可以调用[`Application.Exit`](http://msdn.microsoft.com/en-us/library/ms157894.aspx).

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T23:41:38.503

您的代码不起作用的原因是您正在创建 Form1 的一个新的单独实例，而不是从中启动 Form 2 的实例。

因此，您正在创建 Form1 的新实例，然后关闭新的 Form1，然后关闭 Form2。虽然从不引用打开 Form2 的 Form1 的实例。

如果您希望 Form2 关闭原始 Form1，则需要将 Form2 的引用传递给 Form1，以便 Form2 可以调用 Form1 的父实例上的 Close()。

wRar 有您正在寻找的答案。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-06T23:48:50.513

您可以按照 wRAR 的建议执行 Application.Exit，或尝试以下替代方法。

在给出的示例中：

```
private void exitToolStripMenuItem_Click(object sender, EventArgs e)
{
    Form1 frm = new Form1();
    frm.Close();
    this.Close();
} 
```

Form1 不会关闭，因为您没有在对它的引用上调用 Close，而是在它的新实例上调用 close。

相反，如果您不想使用 Application.Exit，则始终可以执行以下操作，**假设您调用了 Form2.Show(this) 并引用了 Form1：**

```
private void exitToolStripMenuItem_Click(object sender, EventArgs e)
{      
    this.Close();
}

private void Form2_FormClosing(object sender, FormClosingEventArgs e)
{
   if ( this.Owner != null )
     this.Owner.Close();
} 
```

# .net - 持续集成中的性能测试？

> ID：14740831
> 
> 赞同：15
> 
> 时间：2013-02-06T23:24:40.817
> 
> 标签：.net, selenium, continuous-integration, jmeter, performance-testing

我们已经有一个持续集成过程，我们在其中构建、运行单元测试、进行静态代码分析和生成文档。但是，我们希望将其扩展为包括自动性能测试。在本例中，我们正在开发一个 .NET Web 应用程序。

我们已经使用 JMeter（在 CI 流程之外）进行了一些性能测试，但我不知道这是否是包含在 CI 流程中的最佳工具？硒是一种选择吗？WAPT 专业版？

我们应该在哪些级别上测试性能？我们应该有一套“性能单元测试”吗？我们是否应该在类似生产的环境中运行 JMeter（或类似的东西）并在任何请求花费 > 1 秒时失败？像这样的东西不会有太高的方差吗？

那么，你们是否将自动性能测试作为 CI 的一部分？你测试什么，你使用哪些工具？你的经历是怎样的？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-10T21:38:38.783

首先，JMeter 是包含在 CI 中的一个不错的选择，因为它可以从命令行运行，并且您可以在执行此操作时传入变量。我会推荐它来完成这项任务。

但总的来说，集成 Perf。测试 CI 很困难。您已经列出了许多原因，所以您已经成功了一半，因为您了解这些限制。这就是问题所在：Perf 是可能的。CI 中的测试，但仅限于有限的范围。

我认为一个好的方法遵循以下一些原则：

**您不能在 CI 中运行全负载（或浸泡或容量）测试，这是不切实际的。** 结果是主观的，需要人工解释，运行测试需要时间。但是您可以运行一组更简单、精简的测试来测量请求的响应时间，然后您可以评估这些响应时间：

*   针对 NFR 或预期范围 - 即。应该小于 1 秒。
*   与以前的结果相反 - 即。与上次构建的偏差不应超过 10%。

**您还可以运行自动加载/性能。测试 - 全量 - 在构建过程之外。'半CI'。** 所以也许你可以自动化一个测试，让它在一夜之间运行，然后在早上检查结果？

**迭代。** 只需开始这样做并获得结果并微调测试以及随着时间的推移如何解释它们。保持简单并专注于看起来有用的领域。不要大张旗鼓地启动，保持安静，直到你对过程有信心，然后开始失败构建并告诉人们 - 最初，你可能会得到很多假阴性。

**检测你的结果** 这样做。很多。CI 就是尽早失败，所以如果你把它作为你的最终目标，那么实现它的最好方法就是尽早并经常运行测试，但这样做的问题是你有可能被数据埋没。因此，一种处理数据并呈现相关信息的有效方法会大有帮助。

你不能将整个过程自动化到红旗绿旗——但你应该尽可能地沿着这条路走下去。

最后，领队Perf做[了一个非常好的演讲](http://www.youtube.com/watch?v=335LKIXRauA&feature=gv&hl=en)。涵盖此主题的 Google 测试人员。现在有点老了，但原则仍然存在。另外，几周后我将参加一个[聚会](http://www.meetup.com/London-Web-Performance-Group/events/100061982/)，英国媒体公司 Channel4 将讨论他们是如何处理这个问题的——也许你可以索要一些幻灯片。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-03-14T19:19:36.263

**> 您不能在 CI 中运行全负载（或浸泡或容量）测试，这是不切实际的。**

本周在美国举行的[TISQA 会议](http://www.meetup.com/softwaredev-117/events/143360012/)之后，我更倾向于说我们应该自信地通过 CI 自动化来自动化越来越多的完整、复杂的负载测试。

您甚至可以考虑在更大的负载测试实验室中运行一个单独的 CI 实例，配置更真实的基础架构以支持有意义的测试结果。负载测试过程本身与单独的软件开发过程（设计、构造、部署、执行、分析、重复）没有什么不同。现在，大多数性能工具都支持与 CI 解决方案更优雅、更强大的集成，包括 SOASTA、LoadRunner/PC、JMeter、Neotys、Blazemeter、Flood.io。

但这里有三件事需要注意 - 类似于 Oliver 的评论： - 性能结果还有很多细微差别......不仅仅是通过或失败 - 不要忘记脚本维护以与应用程序更改保持同步 - 同步/缩放您的生产负载测试实验室也可能是自动化的

[如果您愿意，请在此处查看](https://dl.dropboxusercontent.com/u/25726191/Continuous%20Performance%20Testing%201.pdf)我自己的 TISQA 演示文稿中的一些幻灯片。这可能是如何在整个生命周期中使用 CI + Performance 的开始。例如，为什么不让 CI 实例在 PROD 中更改时“监视配置”并将这些更改同步回负载测试环境？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-08T12:36:37.840

Neither JMeter nor Selenium are tools for CI. JMeter is performance testing tool, Selenium is tool for automated functional testing. So, to have performance testing integrated into build process, you can use JMeter with any of CI servers:Jenkins, Bamdoo, etc.

AFAIK, there are two common solution of using JMeter with Jenkins nowadays:

1.  Use Jenkins/Hudson with JMeter plugin for it, which allow to start performance testing task after finishing build process. In this case you need to have appropriate number of load generator with JMeter configured on it.

2.  Another way - using [JMeter testing cloud](http://blazemeter.com). This service provides [Jenkins plugin](http://community.blazemeter.com/knowledgebase/articles/102721-blazemeter-plugin-to-jenkins), which allows to start remote test after building application. In this case you don't need to care about configuring test servers.

P.S. While I'm working for Blazemeter, I wanted to provide objective information. Hope, it's helpful.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-29T15:40:49.433

在您问的问题中-硒是一种选择吗？

如果您使用内部计算机网格或公共云从 CI 运行，那么您应该考虑使用 Selenium WebDriver 和 Headless 浏览器驱动程序进行性能测试。

在一个小型 Amazon VM (ami) 上，我使用这种方法模拟了大约 25 个虚拟用户。因此，如果您的需求大约为 500 VU，那么我会对此进行调查，因为其好处包括：-

由于无头浏览器会自动处理 URL 重写等，因此不再需要“关联”。

您的功能测试被重新用作性能测试，因此成为专家的一个工具，无需返工，只需重新调整用途。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-07-26T16:15:12.990

您不是唯一一个将性能测试与持续集成集成的人。通常，非功能性测试过去常常被许多组织忽略或留到软件交付过程的最后阶段。我可以看到态度的积极变化以及对 CI/CD 中非功能性需求自动验证的兴趣。这在不同程度上包括性能、可访问性和安全性。您提到使用 Selenium 进行性能测试。我知道有些人（尝试）这样做，甚至看到其中一种尝试是多么不成功。我完全理解人们为什么考虑这样做，尽管我建议远离这个。除非你有充分的理由反其道而行之。一般来说，实现起来比人们想象的要难。

现在有一个新工具，可以帮助您将 JMeter 与您选择的 CI 服务器集成，并为 TeamCity 和 Jenkins 提供一些专用功能：

[https://github.com/automatictester/lightning](https://github.com/automatictester/lightning)

欢迎提出功能要求。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-04-28T00:04:26.443

如果性能是您的应用程序的重要组成部分，并且您从一开始就一直关心（或想要关心），我的目标是将其作为集成和部署管道的一部分 - 所以是的。

.NET 世界（及其他）中有许多工具可以帮助您提供这种体验并在您最喜欢的 CI/CD 软件中无缝设置，例如：

*   **k6.io** ( [https://k6.io/](https://k6.io/) - 以前称为 LoadImpact) - 允许您在环境之外执行性能检查，并将结果报告回管道。易于配置和集成，非常适合压力测试、负载测试等更“聪明”的测试场景。
*   **sitespeed.io** ( [https://www.sitespeed.io/](https://www.sitespeed.io/) ) - 我的第二个最爱，非常有趣且易于配置的工具来跟踪 FE 性能和测试（例如使用 Selenium 完成）
*   **Locust** ( [https://locust.io/](https://locust.io/) ) - 用于在您自己的环境中进行负载测试。使用 ARM 模板在 Azure 上创建您自己的服务器“农场”的绝佳存储库：[https ://github.com/ORBA/azure-locust](https://github.com/ORBA/azure-locust)
*   **dynatrace** ( [https://www.dynatrace.com/](https://www.dynatrace.com/) ) - 完全合格的 APM = 具有大量功能和可能性的应用程序性能监控/管理工具
*   **Roslyn Analyzer** (FxCopAnalyzers)、StyleCopAnalyzers、EditorConfig 和其他方法来检测代码中的常见（也与性能相关！）问题，甚至在它被推送到构建和部署管道之前
*   **灯塔报告**- 也可以作为最常见问题的“指针”执行，并作为 PR 评论，例如过程中的通知（有很多 Github Actions 或 DevOps 包在做）

所以，是的 - 以上所有内容以及更多内容都可以作为您管道上的一个步骤。在我们的设置中，我们目前在 Staging 和 UAT 环境之间有一个完整的阶段，我们在其中进行审计：静态代码分析、性能测试 (FE & BE)、安全扫描和渗透测试 (OWASP ZAP) 等等。如果测试不符合我们的阈值或期望——我们显然不想引入不必要的降级——我们会在这里停下来，在到达 UAT 和生产之前返回重构并修复问题。希望它能帮助你，也许还有其他人。

* * *

我还在我最近的演讲（下面的幻灯片）中收集了一些我的发现，并将其转换为围绕该主题的系列博客，其中第一个已经发布：

1.  我关于“​​现代 Web 性能测试”的演讲中的幻灯片：[https ://slides.com/zajkowskimarcin/modern-web-performance-testing/](https://slides.com/zajkowskimarcin/modern-web-performance-testing/)
2.  该系列关于同一主题的第一篇博客：[https ://wearecogworks.com/blog/the-importance-of-modern-web-performance-testing-part-1](https://wearecogworks.com/blog/the-importance-of-modern-web-performance-testing-part-1)

# php - 重定向 Apache .httacces 301 和 PHP 301

> ID：14740838
> 
> 赞同：0
> 
> 时间：2013-02-06T23:25:06.850
> 
> 标签：php, apache, .htaccess

互联网上的大多数指南都使用 Apache，但我发现 PHP 更容易。

与 Apache .httacces 301 或 PHP 301 的重定向是否相同？优点？缺点？

对 SEO 友好，尤其是谷歌。

：） 谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T23:30:23.447

最“被接受”的方法是使用 Apache `.htaccess`，因为`PHP` *它可能*会失败（错误代码等）。您可能并不总是意识到可能导致脚本无法运行的问题。在一个完美的世界中，它们将是相同的。但是，由于您不能始终**确定**您的 PHP 会提供服务，因此 Apache 是一个保证。

# c# - 您可以使用 LINQ to SQL 实体更新数据库吗？

> ID：14740839
> 
> 赞同：2
> 
> 时间：2013-02-06T23:25:11.480
> 
> 标签：c#, linq-to-sql

在 WCF 中使用 LINQ to SQL 我有一个更新记录方法，ATM 我手动分配每个更新的属性。例如。

```
public void UpdateMachineRecord(Guid SessionID, int MachineRecordID, MachineRecord machineRecord)
{
    if (!ValidSession(SessionID))
        return;

    using (MMHLINQSQLDataContext database = new MMHLINQSQLDataContext())
    {
        MachineRecord record = database.MachineRecords.Single(mr => mr.Job.OperationID == MachineRecordID);
        record.ChangedBy = UserSession(SessionID).Name;
        record.ChangedDate = DateTime.Now.ToString();
        record.Date = machineRecord.Date;
        record.EDI = machineRecord.EDI;
        ...
        database.SubmitChanges();
    }
} 
```

我的问题是：有没有办法使用整个实体更新记录？

例如。

```
public void UpdateMachineRecord(Guid SessionID, int MachineRecordID, MachineRecord machineRecord)
{
    if (!ValidSession(SessionID))
        return;

    using (MMHLINQSQLDataContext database = new MMHLINQSQLDataContext())
    {
        MachineRecord record = database.MachineRecords.Single(mr => mr.Job.OperationID == MachineRecordID);
        record = machineRecord;
        database.SubmitChanges();
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-06T23:30:59.670

你可以这样做。

```
database.MachineRecords.Attach(machineRecord, true);
database.SubmitChanges(); 
```

这会将其附加为修改后的实体（这就是布尔参数的用途）

# asp.net - IIS API 重定向规则

> ID：14740841
> 
> 赞同：2
> 
> 时间：2013-02-06T23:25:39.140
> 
> 标签：asp.net, regex, api, iis, web-config

我需要一些关于 web.config 中重定向正则表达式的帮助。我有一个网站 UI 和一个应用程序 UI，它们访问相同的服务器端 API，但我正在解耦从其中任何一个调用的 url，以使应用程序免受 API 更新的影响。

这是我到目前为止在我的 web.config 中的内容，它适用于将 api.mywebsite.com 重定向到 mywebsite.com，但是我如何编写正则表达式以在末尾添加版本，以便[http://api.mywebsite .com/v1/](http://api.mywebsite.com/v1/)被重定向到[http://www.mywebsite.com](http://www.mywebsite.com)？

```
<rules>
          <rule name="Remove WWW" stopProcessing="true">
          <match url="^(.*)$" />
          <conditions>
            <add input="{HTTP_HOST}" pattern="^(api\.)(.*)$" />
          </conditions>
          <action type="Redirect" url="http://dev.blahblah.org.au{PATH_INFO}" redirectType="Permanent" />
          </rule>
    </rules> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T00:49:31.543

```
<rule name="Remove WWW" stopProcessing="true">
    <match url="^(.*)$" />
    <conditions>
        <add input="{HTTP_HOST}" pattern="^(api\.)(.*)$" />
        <add input="{PATH_INFO}" pattern="^/v(\d+)/(.*)$" />
    </conditions>
    <action type="Redirect" url="http://localhost{PATH_INFO}?v={C:1}" redirectType="Permanent" />
</rule> 
```

# iphone - 在 ABAddressBook 中获取重复电话号码时提高性能

> ID：14740844
> 
> 赞同：0
> 
> 时间：2013-02-06T23:25:43.237
> 
> 标签：iphone, ios, xamarin.ios, abaddressbook

我正在使用 iPhone APP 获取重复的电话号码，我已经编写了代码，但性能太差而且需要时间。这是我的代码：

```
 OrderedDictionary persons = new OrderedDictionary ();
    ABAddressBook ab = new ABAddressBook ();

    foreach (ABPerson p in ab.GetPeople()) {

            foreach (var phoneNumber in p.GetPhones().GetValues()) {
                var duplicates = SearchByPhoneNumber (ab, phoneNumber);
                if (duplicates.Count > 1) {
                    if (!persons.Contains (phoneNumber)) {
                        persons.Add (phoneNumber, duplicates);
                    }
                }

            }
        }

    List<ABPerson> SearchByPhoneNumber ( ABAddressBook ab, string phoneNumber)
{
        List<ABPerson> duplicatepeople = new List<ABPerson> ();
        phoneNumber = Regex.Replace (phoneNumber, "[^0-9]", "");

        var people = ab.Where(x=> x is ABPerson).Cast<ABPerson>().Where(x=> x.GetPhones()
                                                                        .Where(p=> Regex.Replace(p.Value,"[^0-9]", "")==phoneNumber || phoneNumber ==Regex.Replace(p.Value,"[^0-9]", "")).Count() > 0).ToArray();

        foreach(ABPerson person in people)
        {
            if( duplicatepeople.Intersect(person.GetRelatedNames().Cast<ABPerson>()).Count() <= 0)
            {
                duplicatepeople.Add(person);
            }

        }

        return duplicatepeople;
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T12:38:27.973

我没有时间检查两者之间的时间，但我确实注意到您正在多次迭代通讯簿号码（对于每个电话号码，您使用每个 .Where 再次迭代列表）。此外，我注意到您在循环中多次为每个电话号码执行相同的正则表达式。

这可能不完全符合您的需求，但它确实在我的通讯录中找到了重复项，而且速度不算太慢。

```
ABAddressBook ab = new ABAddressBook();

// flatten out the list of all phone numbers and perform the regEx just once for each phone number
var processedList = new List<Tuple<string, ABPerson>>();
foreach (ABPerson p in ab.GetPeople()) 
{
    foreach (var phoneNumber in p.GetPhones().GetValues()) 
    {
        processedList.Add(new Tuple<string, ABPerson>(Regex.Replace (phoneNumber, "[^0-9]", ""), p));
    }
}

var duplicates = (from person in processedList
    group person by person.Item1 into g
    where g.Count() > 1
    select new { PhoneNumber = g.Key, Person = g }).ToList();

foreach (var d in duplicates)
{
    Console.WriteLine("{0}  {1}", d.PhoneNumber, d.Person.Count());
    foreach (var p in d.Person)
    {
        Console.WriteLine(p.Item2.FirstName);
    }
} 
```

我希望这有帮助。

# java - 如何扩充 AVL 树？

> ID：14740845
> 
> 赞同：2
> 
> 时间：2013-02-06T23:26:41.253
> 
> 标签：java, data-structures, avl-tree

我想扩充一个 avl 树以向每个节点添加额外的属性，例如它包含的节点数（即在其子树中）。

从这里的 avl java 实现代码 [http://www.blackbam.at/blackbams-blog/2012/05/04/avl-tree-implementation-in-java/](http://www.blackbam.at/blackbams-blog/2012/05/04/avl-tree-implementation-in-java/) 我想向它添加某些代码，以便每个节点将包含一个 size 元素。

在 AvlNode 类中，我将其更改为：

```
/** Here is the AVL-Node class for Completenesse **/
public class AvlNode {
     public AvlNode left;
     public AvlNode right;
     public AvlNode parent;
     public int key;
     public int balance;
     public int size;

     public AvlNode(int k) {
          left = right = parent = null;
          balance = 0;
          key = k;
          size = 1;
     }
     public String toString() {
         return "" + key;
     }
} 
```

但是现在对于 AvlTree 类，在插入和删除操作期间，我实际上在哪里添加代码来更新节点的大小值。我认为这是 rotateleft 和 rotateright 方法。这是正确的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T00:14:06.007

这完全取决于您尝试使用增强功能做什么。通常，在扩充平衡二叉搜索树时，您需要在逻辑中插入额外的代码来执行

*   插入，改变某些子树的数量/内容，
*   删除，从子树中删除元素，以及
*   树旋转，将节点移动到不同的子树。

CLRS 的“算法简介”教科书有一章是关于增强二叉搜索树的。虽然他们专注于红/黑树，但相同的一般策略应该适用于任何基于旋转的树平衡方案。

希望这可以帮助！

# google-app-engine - 会话 Bean 使用 JSF 和 Primefaces 在 GAE 中丢失

> ID：14740847
> 
> 赞同：2
> 
> 时间：2013-02-06T23:26:52.160
> 
> 标签：google-app-engine, jsf-2, primefaces

请注意，在文件 appengine-web.xml 中有必需的：

```
<sessions-enabled>true</sessions-enabled> 
```

我一直在研究如何使 jsf 和会话 bean 在谷歌应用引擎上工作。问题是，如果我在 web.xml 文件中使用，bean 在每个请求中都会丢失：

```
<context-param>
<param-name>javax.faces.STATE_SAVING_METHOD</param-name>
<param-value>client</param-value>
</context-param> 
```

这使得在本地开发中会在客户端页面中创建一个隐藏字段，该隐藏字段将视图状态编码为 base64。

```
<input type="hidden" name="javax.faces.ViewState" id="javax.faces.ViewState"
value="H4sIAAAAAAAAAE1QO0sDQRAe73LxLTGClelsLDwQLEQLDWjwMD4QFMFCN3drcmHv9txHcmcRSKOFjYUWFqKFZf6EWNgJWlqJvbWtuyEmDuwwuzPzPbb1DVbEGYxXUQ3ZUvjEXke8sokiq//j6Xny+M0EowBDhCKvgFxBmQODosIwr1DixdHyCugYqQ+onFHHFDDl0sDmMrRPkIu5vZqEKPDdvCt8GnLFNdHjyjOGkqLPRdx8z92+oDsT+hxIcf8Mx5EGrqd0jgWMVo98T8wvKmZJhFQoh8U2DkFh2d4uVbErlq5eD+4zfIYYakWvpyIVAiy9OydPoQFp9Wp0K0v3uzezwWBWY8Yd5cpHREMcCnvP2fdxfZdSMb3DaISZSDZwwqETWcXHYKynZy2Uwf+mEpEmiAvH6/51e84JBS5jlv16ePxpXiwY2r1VQ0RihZfpzW3JoITZeesmN3z9eflnT8mPfwGGpwEXwQEAAA==" autocomplete="off" /> 
```

并且据说在谷歌服务器中会是一样的。但结果似乎很奇怪。

```
<input type="hidden" name="javax.faces.ViewState" id="javax.faces.ViewState"
value="-7485706817535542099:-1131777842892951150" autocomplete="off" /> 
```

如果我使用：

```
<context-param>
<param-name>javax.faces.STATE_SAVING_METHOD</param-name>
<param-value>server</param-value>
</context-param> 
```

谷歌应用引擎产生一个字符串越界错误，不知道为什么。这里是：

```
/Trainer.jsf
java.lang.StringIndexOutOfBoundsException: String index out of range: -1
    at java.lang.String.substring(String.java:1949)
    at com.sun.faces.renderkit.ServerSideStateHelper.getState(ServerSideStateHelper.java:277)
    at com.sun.faces.renderkit.ResponseStateManagerImpl.getState(ResponseStateManagerImpl.java:100)
    at com.sun.faces.application.view.FaceletPartialStateManagementStrategy.restoreView(FaceletPartialStateManagementStrategy.java:352)
    at com.sun.faces.application.StateManagerImpl.restoreView(StateManagerImpl.java:138)
    at com.sun.faces.application.view.ViewHandlingStrategy.restoreView(ViewHandlingStrategy.java:123)
    at com.sun.faces.application.view.FaceletViewHandlingStrategy.restoreView(FaceletViewHandlingStrategy.java:518)
    at com.sun.faces.application.view.MultiViewHandler.restoreView(MultiViewHandler.java:142)
    at com.sun.faces.lifecycle.RestoreViewPhase.execute(RestoreViewPhase.java:192)
    at com.sun.faces.lifecycle.Phase.doPhase(Phase.java:101)
    at com.sun.faces.lifecycle.RestoreViewPhase.doPhase(RestoreViewPhase.java:116)
    at com.sun.faces.lifecycle.LifecycleImpl.execute(LifecycleImpl.java:118)
    at javax.faces.webapp.FacesServlet.service(FacesServlet.java:593)
    at org.mortbay.jetty.servlet.ServletHolder.handle(ServletHolder.java:511)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1166)
    at com.google.apphosting.utils.servlet.ParseBlobUploadFilter.doFilter(ParseBlobUploadFilter.java:125)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
    at com.google.apphosting.runtime.jetty.SaveSessionFilter.doFilter(SaveSessionFilter.java:35)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
    at com.google.apphosting.utils.servlet.TransactionCleanupFilter.doFilter(TransactionCleanupFilter.java:43)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
    at org.mortbay.jetty.servlet.ServletHandler.handle(ServletHandler.java:388)
    at org.mortbay.jetty.security.SecurityHandler.handle(SecurityHandler.java:216)
    at org.mortbay.jetty.servlet.SessionHandler.handle(SessionHandler.java:182)
    at org.mortbay.jetty.handler.ContextHandler.handle(ContextHandler.java:765)
    at org.mortbay.jetty.webapp.WebAppContext.handle(WebAppContext.java:418)
    at com.google.apphosting.runtime.jetty.AppVersionHandlerMap.handle(AppVersionHandlerMap.java:266)
    at org.mortbay.jetty.handler.HandlerWrapper.handle(HandlerWrapper.java:152)
    at org.mortbay.jetty.Server.handle(Server.java:326)
    at org.mortbay.jetty.HttpConnection.handleRequest(HttpConnection.java:542)
    at org.mortbay.jetty.HttpConnection$RequestHandler.headerComplete(HttpConnection.java:923)
    at com.google.apphosting.runtime.jetty.RpcRequestParser.parseAvailable(RpcRequestParser.java:76)
    at org.mortbay.jetty.HttpConnection.handle(HttpConnection.java:404)
    at com.google.apphosting.runtime.jetty.JettyServletEngineAdapter.serviceRequest(JettyServletEngineAdapter.java:146)
    at com.google.apphosting.runtime.JavaRuntime$RequestRunnable.run(JavaRuntime.java:447)
    at com.google.tracing.TraceContext$TraceContextRunnable.runInContext(TraceContext.java:454)
    at com.google.tracing.TraceContext$TraceContextRunnable$1.run(TraceContext.java:461)
    at com.google.tracing.TraceContext.runInContext(TraceContext.java:703)
    at com.google.tracing.TraceContext$AbstractTraceContextCallback.runInInheritedContextNoUnref(TraceContext.java:338)
    at com.google.tracing.TraceContext$AbstractTraceContextCallback.runInInheritedContext(TraceContext.java:330)
    at com.google.tracing.TraceContext$TraceContextRunnable.run(TraceContext.java:458)
    at com.google.apphosting.runtime.ThreadGroupPool$PoolEntry.run(ThreadGroupPool.java:251)
    at java.lang.Thread.run(Thread.java:679) 
```

问题是该应用程序在本地开发服务器中完美运行。

我正在使用 GAE-1.7.4。

以下是我迄今为止阅读的一些内容，但没有得到确凿的答案：

1.  [http://consultingblogs.emc.com/jaddy/archive/2009/11/20/jsf2-in-google-app-engine.aspx](http://consultingblogs.emc.com/jaddy/archive/2009/11/20/jsf2-in-google-app-engine.aspx)
2.  [JSF2 与 GAE 和 ViewScoped ManagedBean](https://stackoverflow.com/questions/7172335/jsf2-with-gae-and-viewscoped-managedbean)
3.  [会话 Bean 丢失？](https://stackoverflow.com/questions/6711321/session-bean-being-lost)

希望这不是一些愚蠢的情况。提前致谢。

更新1：我能够得出结论，使用：

```
FacesContext context = FacesContext.getCurrentInstance();
context.addMessage(null, new FacesMessage(FacesMessage.SEVERITY_WARN, "Warning building CardController", null)); 
```

会话 bean 不是在每个单独的页面请求中创建的，但是由于某种未知的原因，这些值被设置为默认值。我开始认为最好使用 cookie 并将它们重新加载到 bean 中，作为对每个页面请求的修复。我看不出有任何其他的出路。可能我会使用 AES 加密一些 cookie 以提高安全性。

更新2：再次尝试以下：

```
import java.io.Serializable;
import java.util.Arrays;
import java.util.List;

import javax.faces.context.FacesContext;
import javax.servlet.http.Cookie;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;

import org.apache.commons.collections.CollectionUtils;
import org.apache.commons.collections.Predicate;

import com.google.gson.Gson;

@SuppressWarnings("serial")
public class Counter implements Serializable{

public int counter;

public Counter() {
    counter = -1;
}

public String getCounter(){
    counter++;
    return counter+"";
}

public String getSetCounter(){
    Gson gson = new Gson();
    HttpServletResponse res = (HttpServletResponse)FacesContext.getCurrentInstance().getExternalContext().getResponse();
    Cookie cookie = new Cookie(this.hashCode()+"",gson.toJson(this));
    cookie.setMaxAge(60*60); //1 hour
    res.addCookie(cookie);
    return "Write Counter";
}

public String getReadCounter(){
    Gson gson = new Gson();
    Cookie cookieJSON = getCookie();
    if(cookieJSON!=null){
        Counter counter = gson.fromJson(cookieJSON.getValue(), Counter.class);
        this.counter = counter.counter;
    }
    return "Read Counter";
}

private Cookie getCookie(){
    HttpServletRequest req = (HttpServletRequest)FacesContext.getCurrentInstance().getExternalContext().getRequest();
    Cookie[] cookies = req.getCookies();
    Cookie cookieJSON = null;
    if(cookies!=null){
        List<Cookie> cookiesList = Arrays.asList();
        cookieJSON = (Cookie) CollectionUtils.find(cookiesList, new Predicate() {
            @Override
            public boolean evaluate(Object cookie) {
                return ((Cookie)cookie).getName().equals(Counter.this.hashCode()+"");
            }
        });
    }
    return cookieJSON;
}

} 
```

在 facelet 的 .xhtml 中

```
<h:outputText value="#{counter.readCounter}"/>
<br />
<h:outputText value="#{counter.counter}"/>
<br />
<h:outputText value="#{counter.setCounter}"/> 
```

如果没有结果，数据将不会通过会话或 cookie 保存。

更新 3：

“不支持 目前 App Engine 不支持各种 API 和技术，原因有很多。其中包括：

企业 Java Bean (EJB)"

[http://code.google.com/p/googleappengine/wiki/WillItPlayInJava](http://code.google.com/p/googleappengine/wiki/WillItPlayInJava)

在没有 java bean 的情况下测试了会话变量，它工作正常。

更新 4：

您不能在 GAE 中只将对象写入会话，因为它的属性值会丢失。我怀疑 EJB 会这样做。也许他们可以使用我不知道的 JSON 序列化对象。我确信这是一种解决方法。我在以下位置添加了一个要求此功能的线程：

```
https://community.jboss.org/thread/221125?tstart=0 
```

不确定这是否是专门为 jboss 开发 EJB 的小组，不过……如果你想要这个特性，你应该在那个线程中制造一些噪音。

# debugging - 如何防止 VS2012 运行 IIS Express 进行任何调试？

> ID：14740851
> 
> 赞同：1
> 
> 时间：2013-02-06T23:27:16.720
> 
> 标签：debugging, visual-studio-2012, iis-express

我正在运行 VS2012（终极版本 11.0.51106.01 更新 01）并且确实有一个网站项目以及一些控制台、WPF 和 WCF 服务器项目。我的正常调试运行一个非网站项目，我很少调试网站项目。

然而，任何调试总是启动 IIS Express。我怎样才能防止这种情况？网站项目“Web”选项卡强制我选择一些 Web 服务器，并且当前选择了“IIS Express”，但我不希望它启动，除非我正在调试网站。这似乎是在最近的一些 VS2012 维护之后开始发生的，因为我不记得它发生在大约几周前。现在变老了。

这是任何调试都会触发 IIS Express 的 VS2012 错误吗？

无论如何，当我调试 WPF 或控制台应用程序时不启动它？

# linux - Linux：套接字关闭（）与关闭（）

> ID：14740852
> 
> 赞同：9
> 
> 时间：2013-02-06T23:27:19.087
> 
> 标签：linux, tcp

所以在 linux 上，shutdown() 可以带一个参数 SHUT_RD、SHUT_WR 或 SHUT_RDWR 来只关闭部分通信通道。但就发送给对等方的 TCP 消息而言，它是如何工作的呢？

在 TCP 状态机中，关闭以 4 次握手方式工作，

```
(1)           (2)
FIN---------->

   <----------ACK
   <----------FIN

ACK-----------> 
```

那么当我关闭（sock，SHUT_RD）或关闭（sock，SHUT_WR）时它会发送什么消息？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-02-07T04:15:49.810

1.  `shutdown(sd, SHUT_WR)`发送一个 FIN，对等方使用 ACK 响应该 FIN。任何进一步写入套接字的尝试都将导致错误。但是，对等方仍然可以继续发送数据。

2.  `shutdown(sd, SHUT_RD)`在网络上不发送任何内容：它只是使本地 API 为套接字上的任何后续读取返回 EOS。在已关闭以供读取的套接字上接收数据时的行为取决于系统：Unix 将确认并丢弃它；Linux 会对它进行 ACK 并缓冲它，这最终会阻止发送者；Windows 将发出 RST，发件人将其视为“对等方重置连接”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T23:37:54.757

FIN 数据包不必是对称的。当本地写入器关闭套接字时，每一端都会发送 FIN。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-08-11T14:45:09.587

shutdown with write end send FIN and close 将关闭套接字。因此任何发送关闭套接字的尝试都将导致 RESET 数据包。

我遇到了发送方发送的有趣问题：Packet A send Pakcet B send shutdown with write FIN shutdown read close socket

但是receiver从receiver收到乱序的Packet A Pakcket，其中包含FIN Packet B ACK，这会导致连接重置。

# jquery - jquery删除记录

> ID：14740853
> 
> 赞同：0
> 
> 时间：2013-02-06T23:27:22.310
> 
> 标签：jquery, mysql

我曾尝试使用此 jquery 代码删除记录：

```
$('#button_erase').click(function() {
    url: 'connection.php?query=delete from table' // ???
} 
```

在`connection.php`我已经在 db 上设置了我的连接。

但我无法删除表中的记录。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T23:34:00.453

```
$('#button_erase').click(function() {
    // use post to tap your server
    $.post('connection.php?query=delete from table');
} 
```

[http://api.jquery.com/jQuery.post/](http://api.jquery.com/jQuery.post/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T01:47:02.717

```
 var dataString = 'query='+ 'your query'; 
 $('#button_erase').click(function() {
                                    event.preventDefault();
                                    $.ajax({   
                                        type: "POST",   
                                        url: "connection.php", 
                                        dataType: "text html",
                                        data: dataString,   
                                        success: function() {   

                                        }   
                                    })
                                }); 
```

# shell - 运行 shell 脚本的 Gradle exec 任务分散了请求输入的注意力

> ID：14740854
> 
> 赞同：1
> 
> 时间：2013-02-06T23:27:23.967
> 
> 标签：shell, unix, input, gradle

所以在我们通过 sudo 运行一些命令之前，我试图从用户那里获取输入，特别是他们的密码。在使用 gradle 执行 shell 脚本时，它会打印到控制台，例如

```
$ > Building > :gradletaskname 
```

但是当它要求输入密码或其他输入时，它并不直观，因为 gradle 写入控制台的方式如下所示。

```
$ > Building > :gradletasknamePassword: 
```

我试过回显新行，但它总是像我上面的例子一样显示。我知道这可能是一个愚蠢的问题，但我已经为此苦恼了一段时间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T01:23:46.363

这是一个已知的限制，将在下一个版本中修复。这是 JIRA 问题的链接：http: [//issues.gradle.org/browse/GRADLE-1147](http://issues.gradle.org/browse/GRADLE-1147)

# python - 如何在 Python 中更新 Tcl/Tk？

> ID：14740857
> 
> 赞同：25
> 
> 时间：2013-02-06T23:27:47.497
> 
> 标签：python, tkinter, tcl, tk

Tcl 和 Tk 在他们的版本`8.6`中已经发布了大约六周。但是，与 Python 中的 Tcl 文件夹相比，可以从[Tcl](http://www.tcl.tk)下载的文件具有不同的文件夹结构，并且缺少一些文件，例如`tk85.lib`（或现在）。`tk86.lib`

我的问题是：如何在 Python 中将 Tcl 和 Tk 更新到 8.6（包括与 Tkinter 的集成）？

Python 版本为 2.7，操作系统为 Windows 7。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-01-19T06:03:32.843

我认为你应该报告一个错误并希望下一个 2.7 版本能够

1.  存在

2.  被链接到新版本的Tk

（假设您有任何真正的理由首先想要新版本。）

# highcharts - Highcharts - 具有相同 x 比例的多个绘图

> ID：14740859
> 
> 赞同：5
> 
> 时间：2013-02-06T23:27:51.413
> 
> 标签：highcharts, axis, scatter-plot

我想制作一个 x 轴对齐的多个图，以便我们可以比较两组数据。我希望它看起来像这样

[https://stackoverflow.com/a/11796553/229075](https://stackoverflow.com/a/11796553/229075)

在我的情况下，还有一些额外的要求，一些情节是线条，一些是条形。因此，即使数据范围相同，默认比例也不会对齐。

我发现了一些关于“堆叠”图表的好建议。这有点复杂，但很有希望尝试。

[https://stackoverflow.com/a/12179023/229075](https://stackoverflow.com/a/12179023/229075)

但是，我还有其他用例可能会推动简单堆叠的范围。例如，当 x 轴和 y 轴都必须像这样对齐时，我想做散点图矩阵

[http://www.statmethods.net/graphs/images/spmatrix3.png](http://www.statmethods.net/graphs/images/spmatrix3.png)

与其将许多图表放在一个 Highchart 中，这可能需要有许多单独的图表，但可以更好地控制轴的布局方式。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T12:03:54.967

如果你想使用一张一张的图表，你可以使用[linkedTo](http://api.highcharts.com/highcharts#xAxis.linkedTo)选项来连接轴。

[如果您想要更简单的图表，您可以使用事件afterSetExtremes](http://api.highcharts.com/highcharts#xAxis.events.afterSetExtremes)连接轴，您可以在其中为另一个图表调用[setExtremes()](http://api.highcharts.com/highcharts#Axis.setExtremes%28%29)。

# javascript - jQuery在函数内调用用户定义的函数

> ID：14740863
> 
> 赞同：1
> 
> 时间：2013-02-06T23:28:27.697
> 
> 标签：javascript, jquery, html

我试图在 jquery 函数中调用用户定义的函数但无济于事我试过这个：

```
function close_quote_bar() {
    alert('oh hai');
}

if($('#sliding_quote:visible')) {

    $('#sliding_quote').slideUp();
    $('#trans_div').animate({opacity: 0.0}).css('display','none').close_quote_bar;

} 
```

和这个

```
//Function to close quote bar
function close_quote_bar() {
    alert('oh hai');
}

$('#get_quote_bar img').click(function() {                          
    if($('#sliding_quote:visible')) {               
        $('#sliding_quote').slideUp();
        $('#trans_div').animate({opacity: 0.0}).css('display','none').close_quote_bar;

    }               
}); 
```

运气不太好！当我调用 close_quote_bar 时什么都没有发生，或者我得到一个 Object is missing method 错误！

希望你们能指出我正确的方向我真的在努力解决这个问题

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T23:33:06.200

我假设你想要这样的东西：

```
$('#sliding_quote:visible').slideUp( function(){
    $('#trans_div').css('display','none');
    close_quote_bar();
} ); 
```

它使用上滑回调将对象设置为不显示并运行您的函数。此代码还取消了 if 语句，而是使用选择器仅影响可见元素。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T07:28:57.887

事实证明该函数正在被调用，并且它不是范围或类似问题的问题。

我有另一个在滚动（.scroll）上执行的函数与该函数冲突，因此它的行为异常并且似乎没有执行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-06T23:46:49.357

以@laurencek 的回答为基础。

```
$('#sliding_quote:visible').slideUp( function(){
    $('#trans_div').fadeOut( function(){
      close_quote_bar();
    });
}); 
```

this`close_quote_bar()`作为 的回调执行`fadeOut`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-06T23:33:57.403

您的这行代码需要更改

```
$('#trans_div').animate({opacity: 0.0}).css('display','none').close_quote_bar; 
```

你必须这样称呼它

```
$('#trans_div').animate({opacity: 0.0}).css('display','none');
close_quote_bar(); 
```

最后在你的动画完成动画之后触发你的 closequotebar，使用这个代码，注意一个 function() 在第三个参数中。

```
$('#trans_div').animate({opacity: 0.0}, 400, function(){
    $(this).css('display','none');
    close_quote_bar();
}); 
```

animate 和 slideUp 都支持添加 function() 块作为参数，因此您可以在动画完成后调用函数 [http://api.jquery.com/animate/](http://api.jquery.com/animate/) 参见“完成”部分

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-06T23:34:13.027

你应该试试这个：

```
$('#trans_div').animate({opacity: 0.0}, 400, function(){
    $(this).css('display','none');
    close_quote_bar();
}); 
```

# c++ - 使用“and”运算符与 && 运算符相比有什么缺点吗？

> ID：14740864
> 
> 赞同：27
> 
> 时间：2013-02-06T23:28:33.223
> 
> 标签：c++, operators

使用“and”运算符与 && 运算符有什么优缺点？我个人认为“和”只会引起混乱（具有讽刺意味）。

如果没有任何差异，为什么会存在？这似乎很愚蠢和不必要。

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2013-02-06T23:30:34.303

是同一个运营商。区别只是风格之一。查阅您的项目文档，或询问您的老板或您的妻子，或掷硬币。

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2013-02-06T23:35:51.070

它们是不合时宜的——它们最初是为了容纳没有“^”或“|”的人而引入的 他们键盘上的字符。

此外，虽然“and”和“&&”是等价的……“and”和“&”是完全不同的。由于几个不同的原因，使用“and”而不是“&&”在许多不同的层面上只会令人困惑。包括给可怜的维护程序员一个完全不必要的“wtf”？经验。

我*不会*在任何代码中使用它们。而且我当然从未*见过*它们在任何“实时”代码中使用。

恕我直言...

如果您有兴趣，这里有更多关于该主题的内容：

*   [逻辑运算符的书面版本](https://stackoverflow.com/questions/2376448/the-written-versions-of-the-logical-operators)

*   [http://www.cplusplus.com/reference/ciso646/](http://www.cplusplus.com/reference/ciso646/)

*   [https://en.cppreference.com/w/cpp/language/operator_alternative](https://en.cppreference.com/w/cpp/language/operator_alternative)

# ocaml - 两个列表的排列

> ID：14740866
> 
> 赞同：1
> 
> 时间：2013-02-06T23:28:39.080
> 
> 标签：ocaml

我`char list`在 OCAML 中有一个。我想创建一个s和`( (char * bool) list) list`的每个组合。`char``true``false`

我猜我必须做的是类似 a 的事情`List.fold_left`，但我不太确定如何完成它。

这是我尝试过的大纲（OCAML 语法，但不能运行）：

```
let rec var_perm var_list options = 
    match var_list with
        | [] -> options
        | x :: v' ->
            ((x, true) :: (var_perm_intern v')) :: ((x, false) :: (var_perm_intern v'))
;;

let all_options = var_perm ['a';'b'] [];; 
```

应该返回

```
[
    [('a',true);('b',true)];
    [('a',true);('b',false)];
    [('a',false);('b',true)];
    [('a',false);('b'false)];
] 
```

**编辑：**另一个例子：

```
let all_options = var_perm ['u';'w';'y'] [];; 
```

应该返回（顺序不重要）

```
[
    [('u',false);('w',false);('y',false)];
    [('u',false);('w',false);('y',true )];
    [('u',false);('w',true );('y',false)];
    [('u',false);('w',true );('y',true )];
    [('u',true );('w',false);('y',false)];
    [('u',true );('w',false);('y',true )];
    [('u',true );('w',true );('y',false)];
    [('u',true );('w',true );('y',true )];
] 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T23:36:32.887

您已接近正确的解决方案。具体来说：

*   您必须删除`_intern`递归调用中的后缀
*   “options”参数是没用的（看看你是如何进行递归调用的，只传递*一个*参数`v'`），所以你必须找出在这种`[]`情况下要返回什么
*   应该写“的结果`v'`，加上`true`头部变量”和“结果`v'`，加上头部变量”而不是，因为这些是你要连接的两个列表，而不是添加到列表中的一个元素。`false``foo @ bar``foo :: bar`

# c++ - 在数组中查找唯一数字

> ID：14740867
> 
> 赞同：5
> 
> 时间：2013-02-06T23:28:53.060
> 
> 标签：c++, arrays, for-loop, numbers

好吧，我必须找出一个数组中有多少个不同的数字。

例如，如果数组是：1 9 4 5 8 3 1 3 5

输出应该是 6，因为 1,9,4,5,8,3 是唯一的，而 1,3,5 是重复的（不是唯一的）。

所以，这是我到目前为止的代码......没有正常工作的想法。

```
#include <iostream>

using namespace std;

int main() {
    int r = 0, a[50], n;
    cin >> n;
    for (int i = 0; i < n; i++) {
        cin >> a[i];
    }
    for (int j = 0; j < n; j++) {
        for (int k = 0; k < j; k++) {
            if (a[k] != a[j]) r++;
        }
    }
    cout << r << endl;
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-02-06T23:49:10.533

让我加入派对；）

您还可以使用哈希表：

```
#include <unordered_set>
#include <iostream>

int main() {

    int a[] = { 1, 9, 4, 5, 8, 3, 1, 3, 5 };
    const size_t len = sizeof(a) / sizeof(a[0]);

    std::unordered_set<int> s(a, a + len);

    std::cout << s.size() << std::endl;
    return EXIT_SUCCESS;

} 
```

在这里并不重要，但这对于大型阵列可能具有最佳性能。

* * *

如果最小元素和最大元素之间的差异相当小，那么您可以更快地执行一些操作：

*   创建一个[`vector<bool>`](http://msdn.microsoft.com/en-us/library/t0723a54.aspx)跨越 min 和 max 元素之间的范围的元素（如果您在编译时知道数组元素，我建议`std::bitset`您改为使用模板元编程来计算编译时的所有内容）。
*   对于输入数组的每个元素，在 中设置相应的标志`vector<bool>`。
*   完成后，只需计算`true`.`vector<bool>`

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-02-06T23:38:29.087

A`std::set`已经只包含唯一的元素。

```
#include <set>

int main()
{
    int a[] = { 1, 9, 4, 5, 8, 3, 1, 3, 5 };

    std::set<int> sa(a, a + 9);
    std::cout << sa.size() << std::endl;
} 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-02-06T23:35:29.967

这个怎么样？

```
#include <list>

int main()
{
    int a[] = {1, 9, 4, 5, 8, 3, 1, 3, 5};

    std::list<int> la(a, a+9);
    la.sort();
    la.unique();
    std::cout << la.size() << std::endl;

    return 0;
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-07T00:13:10.817

既然您已经声明您不能使用标准库并且必须使用循环，那么让我们试试这个解决方案。

```
#include <iostream>

using namespace std; // you're a bad, bad boy!

int main() 
{
    int r = 0, a[50], n;

    cout << "How many numbers will you input? ";
    cin >> n;

    if(n <= 0)
    {
        cout << "What? Put me in Coach. I'm ready! I can do this!" << endl;
        return -1;
    }

    if(n > 50)
    {
        cout << "So many numbers! I... can't do this Coach!" << endl;
        return -1;
    }   

    cout << "OK... Enter your numbers now." << endl;

    for (int i = 0; i < n; i++)
        cin >> a[i];

    cout << "Let's see... ";

    // We could sort the list but that's a bit too much. We will choose the
    // naive approach which is O(n^2), but that's OK. We're still learning!

    for (int i = 0; i != n; i++) 
    { // Go through the list once.      
        for (int j = 0; j != i; j++)
        { // And check if this number has already appeared in the list:
            if((i != j) && (a[j] == a[i]))
            { // A duplicate number!        
                r++; 
                break;
            }
        }
    }

    cout << "I count " << n - r << " unique numbers!" << endl;

    return 0;
} 
```

我*敦促*您*不要*将此代码作为您的作业提交 - 至少不要在不理解它的情况下提交。你只会伤害自己，而且你的导师很可能会知道你并没有写它：我以前做过评分员，当某人的代码质量神奇地提高时，这是相当明显的。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-06T23:39:51.220

我认为增加 r 值的位置不正确

```
#include <iostream>
using namespace std;

int main()
{
    int r=0,a[50],n;
    cin >>n;
    for(int i=0;i<n;i++)
    {
        cin >> a[i];
    }
    for (int j=0;j<n;j++)
    {   
        bool flag = true;  
        for(int k=;k<j;k++)
        {
            if(a[k]!=a[j])
            {
               flag = false;
               break;
            }
       }
       if (true == flag) 
       {
           r++;
       }
    }
    cout << r << endl;
    return 0;
} 
```

但是，我的建议是使用更复杂的算法（这个算法有 O(N^2)）。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-06T23:56:18.150

这应该可行，但它可能不是最佳解决方案。

```
#include <iostream>

using namespace std;

int main()
{
int a[50],n;        
int uniqueNumbers; // this will be the total numbers entered and we will -- it
cin >>n;    
uniqueNumbers = n;  
for(int i=0;i<n;i++)
{
    cin >> a[i];
}   
for (int j=0;j<n;j++)
{   
    for(int k=0;k<n;k++)
    {
        /* 
        the and clause below is what I think you were missing.
        you were probably getting false positatives when j == k because a[1] will always == a[1] ;-)
        */
        if((a[k] == a[j]) && (k!=j)) 
        { uniqueNumebers--; }
    }       
}
cout << uniqueNumbers << endl;
return 0;
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-02-25T01:47:34.807

请干运行您的代码在外部 for 循环中查看每个元素在内部循环中的计数不止一个。让我们说循环包含 1,2,3,4.1 ..... 元素在第二次迭代中干运行它并且第三次迭代 1 被计算在内，因为 1 是 1!=2 以及 1!=3

现在解决时间！

```
#include<iostream>
#include<vector>
#include<algorithm>
#define ll long long
using namespace std;
ll arr[1000007]={0};
int main()
{
  ios_base::sync_with_stdio(false);//used for fast i/o
    ll n;cin>>n;
      for(ll i=1;i<=n;i++)
        cin>>arr[i];

        sort(arr,arr+n);

       ll cnt=0;
                for(ll i=1;i<=n-1;i++)
                  {
                   if(arr[i+1]-arr[i]==0)
                     cnt++;
                  }
                 cout<<n-cnt<<endl;

  cin.tie(NULL);
  return 0;
} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2017-03-09T05:43:01.253

我们可以在这个程序中使用 C++ STL 向量。

```
 int main() 
  {
    int a[] = {1, 9, 4, 5, 8, 3, 1, 3, 5};
    vector<int>v(a, a+9);

    sort(v.begin(), v.end()); 
    v.erase(unique(v.begin(), v.end()), v.end()); 

    cout<<v.size()<<endl;

    return 0;
  } 
```

# android - 应用程序在 android 2.2 中运行良好，但在 4.2 中意外关闭

> ID：14740876
> 
> 赞同：0
> 
> 时间：2013-02-06T23:29:55.343
> 
> 标签：android, android-emulator, android-2.2-froyo, android-4.2-jelly-bean

该应用程序在 android 2.2 中运行良好。但在 4.2 中，应用程序意外关闭。该应用程序使用客户端服务器架构将消息发送到充当服务器的笔记本电脑。logcat 显示：

```
02-07 04:49:45.683: W/Trace(829): Unexpected value from nativeGetEnabledTags: 0
02-07 04:49:45.683: W/Trace(829): Unexpected value from nativeGetEnabledTags: 0
02-07 04:49:45.690: W/Trace(829): Unexpected value from nativeGetEnabledTags: 0
02-07 04:49:46.160: W/Trace(829): Unexpected value from nativeGetEnabledTags: 0
02-07 04:49:46.203: W/Trace(829): Unexpected value from nativeGetEnabledTags: 0
02-07 04:49:47.803: W/Trace(829): Unexpected value from nativeGetEnabledTags: 0
02-07 04:49:47.810: W/Trace(829): Unexpected value from nativeGetEnabledTags: 0
02-07 04:49:48.000: W/Trace(829): Unexpected value from nativeGetEnabledTags: 0
02-07 04:49:48.050: W/Trace(829): Unexpected value from nativeGetEnabledTags: 0
02-07 04:49:48.182: W/Trace(829): Unexpected value from nativeGetEnabledTags: 0
02-07 04:49:48.190: W/Trace(829): Unexpected value from nativeGetEnabledTags: 0
02-07 04:49:48.262: W/Trace(829): Unexpected value from nativeGetEnabledTags: 0
02-07 04:49:48.440: W/Trace(829): Unexpected value from nativeGetEnabledTags: 0
02-07 04:49:48.440: W/Trace(829): Unexpected value from nativeGetEnabledTags: 0
02-07 04:49:48.470: W/Trace(829): Unexpected value from nativeGetEnabledTags: 0
02-07 04:49:48.480: W/Trace(829): Unexpected value from nativeGetEnabledTags: 0
02-07 04:49:48.480: W/Trace(829): Unexpected value from nativeGetEnabledTags: 0
02-07 04:49:48.500: W/Trace(829): Unexpected value from nativeGetEnabledTags: 0
02-07 04:49:48.550: D/gralloc_goldfish(829): Emulator without GPU emulation detected.
02-07 04:49:49.030: W/Trace(829): Unexpected value from nativeGetEnabledTags: 0
02-07 04:49:49.060: W/Trace(829): Unexpected value from nativeGetEnabledTags: 0
02-07 04:49:49.210: W/Trace(829): Unexpected value from nativeGetEnabledTags: 0
02-07 04:49:49.210: W/Trace(829): Unexpected value from nativeGetEnabledTags: 0
02-07 04:49:50.433: W/Trace(829): Unexpected value from nativeGetEnabledTags: 0
02-07 04:49:50.433: W/Trace(829): Unexpected value from nativeGetEnabledTags: 0
02-07 04:49:50.473: W/Trace(829): Unexpected value from nativeGetEnabledTags: 0
02-07 04:49:50.473: W/Trace(829): Unexpected value from nativeGetEnabledTags: 0
02-07 04:49:50.860: W/Trace(829): Unexpected value from nativeGetEnabledTags: 0
02-07 04:49:50.860: W/Trace(829): Unexpected value from nativeGetEnabledTags: 0
02-07 04:49:50.993: W/Trace(829): Unexpected value from nativeGetEnabledTags: 0
02-07 04:49:50.993: W/Trace(829): Unexpected value from nativeGetEnabledTags: 0
02-07 04:49:51.040: W/Trace(829): Unexpected value from nativeGetEnabledTags: 0
02-07 04:49:51.040: W/Trace(829): Unexpected value from nativeGetEnabledTags: 0
02-07 04:49:51.490: W/Trace(829): Unexpected value from nativeGetEnabledTags: 0
02-07 04:49:51.490: W/Trace(829): Unexpected value from nativeGetEnabledTags: 0
02-07 04:49:51.530: W/Trace(829): Unexpected value from nativeGetEnabledTags: 0
02-07 04:49:51.530: W/Trace(829): Unexpected value from nativeGetEnabledTags: 0
02-07 04:49:52.003: W/Trace(829): Unexpected value from nativeGetEnabledTags: 0
02-07 04:49:52.003: W/Trace(829): Unexpected value from nativeGetEnabledTags: 0
02-07 04:49:52.070: W/Trace(829): Unexpected value from nativeGetEnabledTags: 0
02-07 04:49:52.070: W/Trace(829): Unexpected value from nativeGetEnabledTags: 0
02-07 04:49:52.503: W/Trace(829): Unexpected value from nativeGetEnabledTags: 0
02-07 04:49:52.503: W/Trace(829): Unexpected value from nativeGetEnabledTags: 0
02-07 04:49:52.563: W/Trace(829): Unexpected value from nativeGetEnabledTags: 0
02-07 04:49:52.563: W/Trace(829): Unexpected value from nativeGetEnabledTags: 0
02-07 04:49:53.011: W/Trace(829): Unexpected value from nativeGetEnabledTags: 0
02-07 04:49:53.011: W/Trace(829): Unexpected value from nativeGetEnabledTags: 0
02-07 04:49:53.071: W/Trace(829): Unexpected value from nativeGetEnabledTags: 0
02-07 04:49:53.071: W/Trace(829): Unexpected value from nativeGetEnabledTags: 0
02-07 04:49:53.540: W/Trace(829): Unexpected value from nativeGetEnabledTags: 0
02-07 04:49:53.540: W/Trace(829): Unexpected value from nativeGetEnabledTags: 0
02-07 04:49:53.600: W/Trace(829): Unexpected value from nativeGetEnabledTags: 0
02-07 04:49:53.600: W/Trace(829): Unexpected value from nativeGetEnabledTags: 0
02-07 04:49:54.020: W/Trace(829): Unexpected value from nativeGetEnabledTags: 0
02-07 04:49:54.020: W/Trace(829): Unexpected value from nativeGetEnabledTags: 0
02-07 04:49:54.100: W/Trace(829): Unexpected value from nativeGetEnabledTags: 0
02-07 04:49:54.100: W/Trace(829): Unexpected value from nativeGetEnabledTags: 0
02-07 04:49:54.550: W/Trace(829): Unexpected value from nativeGetEnabledTags: 0
02-07 04:49:54.570: W/Trace(829): Unexpected value from nativeGetEnabledTags: 0
02-07 04:49:54.750: W/Trace(829): Unexpected value from nativeGetEnabledTags: 0
02-07 04:49:54.750: W/Trace(829): Unexpected value from nativeGetEnabledTags: 0
02-07 04:49:55.070: W/Trace(829): Unexpected value from nativeGetEnabledTags: 0
02-07 04:50:20.590: D/dalvikvm(829): GC_CONCURRENT freed 193K, 11% free 2566K/2876K, paused 92ms+42ms, total 1402ms
02-07 04:50:20.590: W/Trace(829): Unexpected value from nativeGetEnabledTags: 0
02-07 04:50:20.610: W/Trace(829): Unexpected value from nativeGetEnabledTags: 0
02-07 04:50:20.653: W/Trace(829): Unexpected value from nativeGetEnabledTags: 0
02-07 04:50:20.660: W/Trace(829): Unexpected value from nativeGetEnabledTags: 0
02-07 04:50:20.750: W/Trace(829): Unexpected value from nativeGetEnabledTags: 0
02-07 04:50:20.750: W/Trace(829): Unexpected value from nativeGetEnabledTags: 0
02-07 04:50:21.284: W/Trace(829): Unexpected value from nativeGetEnabledTags: 0
02-07 04:50:21.290: W/Trace(829): Unexpected value from nativeGetEnabledTags: 0
02-07 04:50:21.355: W/Trace(829): Unexpected value from nativeGetEnabledTags: 0
02-07 04:50:21.360: W/Trace(829): Unexpected value from nativeGetEnabledTags: 0
02-07 04:50:21.560: W/Trace(829): Unexpected value from nativeGetEnabledTags: 0
02-07 04:50:21.560: W/Trace(829): Unexpected value from nativeGetEnabledTags: 0
02-07 04:50:21.610: W/Trace(829): Unexpected value from nativeGetEnabledTags: 0
02-07 04:50:21.768: W/Trace(829): Unexpected value from nativeGetEnabledTags: 0
02-07 04:50:22.083: D/AndroidRuntime(829): Shutting down VM
02-07 04:50:22.090: W/dalvikvm(829): threadid=1: thread exiting with uncaught exception (group=0x40a70930)
02-07 04:50:22.190: E/AndroidRuntime(829): FATAL EXCEPTION: main
02-07 04:50:22.190: E/AndroidRuntime(829): android.os.NetworkOnMainThreadException
02-07 04:50:22.190: E/AndroidRuntime(829):  at android.os.StrictMode$AndroidBlockGuardPolicy.onNetwork(StrictMode.java:1117)
02-07 04:50:22.190: E/AndroidRuntime(829):  at libcore.io.BlockGuardOs.connect(BlockGuardOs.java:84)
02-07 04:50:22.190: E/AndroidRuntime(829):  at libcore.io.IoBridge.connectErrno(IoBridge.java:127)
02-07 04:50:22.190: E/AndroidRuntime(829):  at libcore.io.IoBridge.connect(IoBridge.java:112)
02-07 04:50:22.190: E/AndroidRuntime(829):  at java.net.PlainSocketImpl.connect(PlainSocketImpl.java:192)
02-07 04:50:22.190: E/AndroidRuntime(829):  at java.net.PlainSocketImpl.connect(PlainSocketImpl.java:172)
02-07 04:50:22.190: E/AndroidRuntime(829):  at java.net.Socket.startupSocket(Socket.java:566)
02-07 04:50:22.190: E/AndroidRuntime(829):  at java.net.Socket.tryAllAddresses(Socket.java:127)
02-07 04:50:22.190: E/AndroidRuntime(829):  at java.net.Socket.<init>(Socket.java:177)
02-07 04:50:22.190: E/AndroidRuntime(829):  at java.net.Socket.<init>(Socket.java:149)
02-07 04:50:22.190: E/AndroidRuntime(829):  at com.example.sample2.MainActivity$1.onClick(MainActivity.java:39)
02-07 04:50:22.190: E/AndroidRuntime(829):  at     android.view.View.performClick(View.java:4202)
02-07 04:50:22.190: E/AndroidRuntime(829):  at android.view.View$PerformClick.run(View.java:17340)
02-07 04:50:22.190: E/AndroidRuntime(829):  at android.os.Handler.handleCallback(Handler.java:725)
02-07 04:50:22.190: E/AndroidRuntime(829):  at android.os.Handler.dispatchMessage(Handler.java:92)
02-07 04:50:22.190: E/AndroidRuntime(829):  at android.os.Looper.loop(Looper.java:137)
02-07 04:50:22.190: E/AndroidRuntime(829):  at android.app.ActivityThread.main(ActivityThread.java:5039)
02-07 04:50:22.190: E/AndroidRuntime(829):  at java.lang.reflect.Method.invokeNative(Native Method)
02-07 04:50:22.190: E/AndroidRuntime(829):  at java.lang.reflect.Method.invoke(Method.java:511)
02-07 04:50:22.190: E/AndroidRuntime(829):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
02-07 04:50:22.190: E/AndroidRuntime(829):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
02-07 04:50:22.190: E/AndroidRuntime(829):  at dalvik.system.NativeStart.main(Native Method)
02-07 04:50:30.530: I/Process(829): Sending signal. PID: 829 SIG: 9 
```

我的客户代码是

```
public class MainActivity extends Activity {

 private Socket client;
 private PrintWriter printwriter;
 private EditText textField;
 private Button button;
 private String messsage;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    textField = (EditText) findViewById(R.id.editText1);
    button = (Button) findViewById(R.id.button1);
    button.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View v) {
            // TODO Auto-generated method stub
            messsage = textField.getText().toString(); 
            textField.setText("");    
            try {

                client = new Socket("10.0.2.2", 4444);  
                printwriter = new PrintWriter(client.getOutputStream(),true);
                printwriter.write(messsage);  
                printwriter.flush();
                printwriter.close();
                client.close();  
               } catch (UnknownHostException e) {
                e.printStackTrace();
               } catch (IOException e) {
                e.printStackTrace();
               }

        }
    });
}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    // Inflate the menu; this adds items to the action bar if it is present.
    getMenuInflater().inflate(R.menu.activity_main, menu);
    return true;
}

} 
```

请帮我解决它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T23:57:02.033

您正在主 UI 线程中执行网络操作。如果您的目标 SDK 是 11 (Honeycomb) 或更高版本，则会抛出`NetworkOnMainThreadException`，因为此行为可能会阻塞 UI 并导致应用程序无响应。

您可以使用 an`AsyncTask`来解决这个问题，方法是将数据加载到`doInBackground(..)`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T23:32:52.000

您需要将网络活动从主线程中移除。

看看[AsyncTask](http://developer.android.com/reference/android/os/AsyncTask.html)的

# javascript - 从 test.js.erb 视图中评估实例变量（在控制器中定义）

> ID：14740877
> 
> 赞同：1
> 
> 时间：2013-02-06T23:30:04.727
> 
> 标签：javascript, ruby-on-rails, ruby-on-rails-3

如何从 javascript 视图中评估实例变量（供另一个 AJAX 进程使用）？

我想对控制器方法中定义的实例变量进行条件评估（在我的 test.js.erb 文件中）。

控制器方法：

```
def test
  @var = 100
end 
```

.JS 视图：

```
if (<%= @var=100 %>) {
  alert("var: " + <%= @var %>);
} else {
  alert("failed");
} 
```

我是否需要在 erb 标签中构建整个条件检查？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T23:42:47.143

```
if (<%= @var %> === 100 ) {...} 
```

# vb.net - 在 = 符号后拆分字符串

> ID：14740879
> 
> 赞同：0
> 
> 时间：2013-02-06T23:30:15.467
> 
> 标签：vb.net, split

我似乎无法弄清楚如何使用 VB.net 从我的字符串中获取值

如果我的文本框中有一个字符串，上面写着：

```
WWW-Authenticate: Digest realm="MyServer",qop="auth",algorithm="MD5",maxbuf=1000,nonce="3b010c090c0a0000c0a80157c7007f03c5",opaque="4e6573732041636365737320436f6e74" 
```

如何获取字符串中 = 之后的每个值。

我试过使用

```
Dim s = "WWW-Authenticate: Digest realm='MyServer',qop='auth',algorithm='MD5',maxbuf=1000,nonce='3b010c090c0a0000c0a80157c7007f03c5',opaque='4e6573732041636365737320436f6e74'"
                        Dim pattern = "="
                        Dim matches = Regex.Matches(s, pattern)
                        Dim values = matches.OfType(Of Match).Select(Function(m) m.Value)

                        For Each v In values
                            MsgBox(v)
                        Next 
```

但它只返回消息框中的 =。

我希望能够得到 = 符号之后的部分。

有谁能帮忙吗？

我尝试使用以下内容，但它仍然在字符串中包含 realm= qop= etc..。（但将其包含在下一个项目的末尾。

```
 Dim s = "WWW-Authenticate: Digest realm='Ness Access Control',qop='auth',algorithm='MD5',maxbuf=1000,nonce='3b010c090c0a0000c0a80157c7007f03c5',opaque='4e6573732041636365737320436f6e74'"
                        Dim result_array As Array = Split(s, "=", 6)

                        For Each v In result_array
                            MsgBox(v)
                        Next 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T23:49:00.187

[常用表达！](http://xkcd.com/208/)

```
Imports System.Text.RegularExpressions
Module Module1
    Sub Main()
        Dim s As String = "WWW-Authenticate: Digest realm='MyServer',qop='auth',algorithm='MD5',maxbuf=1000,nonce='3b010c090c0a0000c0a80157c7007f03c5',opaque='4e6573732041636365737320436f6e74'"

        'Regular Expression, matches word before equals, and word after equals
        Dim r As New Regex("(\w+)\='([^']+)'")

        'All the matches!
        Dim matches As MatchCollection = r.Matches(s)
        For Each m As Match In matches
            'm.Groups(1) = realm, qop, algorithm...
            'm.Groups(2) = MyServer, auth, MD5...
            Console.WriteLine(m.Groups(2))
        Next
        Console.ReadLine()
    End Sub
End Module 
```

如果你想要一个漂亮的键值字典中的所有内容：

```
 Dim dict As New Dictionary(Of String, String)
    For Each m As Match In matches
        'm.Groups(1) = realm, qop, algorithm...
        'm.Groups(2) = MyServer, auth, MD5...
        dict(m.Groups(1).ToString()) = dict(m.Groups(2).ToString())
    Next 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T23:33:26.400

您正在寻找[split()](http://msdn.microsoft.com/en-us/library/6x627e5f%28v=vs.80%29.aspx)函数。

```
Dim logArray() As String
logArray = Split(s, "=")
For count = 0 To logArr.Length - 1
    MsgBox(logArray(count))
Next 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-07T00:12:23.063

特定字符串扩展的案例。如何使用键和值转换字典中的特定格式化字符串

```
Public Module StringModuleExtensions
    <Extension()>
    Public Function ToStringDictionary(ByVal str as String, _
                                      ByVal OuterSeparator as Char, _
                                      ByVal  NameValueSeparator as Char) _
                                      As Dictionary(of String, String)
        Dim dicText = New Dictionary(Of String, String)()
        if Not String.IsNullOrEmpty(str) then
            Dim arrStrings() = str.TrimEnd(OuterSeparator).Split(OuterSeparator)
            For Each s in arrStrings
                Dim posSep = s.IndexOf(NameValueSeparator)
                Dim name = s.Substring(0, posSep)
                Dim value = s.Substring(posSep + 1)
                dicText.Add(name, value)
            Next
        End If
        return dicText
    End Function
End Module 
```

打电话给

```
Dim test = "WWW-Authenticate: Digest realm=""MyServer"",qop=""auth"",algorithm=""MD5"", maxbuf=1000,nonce=""3b010c090c0a0000c0a80157c7007f03c5"",opaque=""4e6573732041636365737320436f6e74"""
Dim dict = test.ToStringDictionary(","c, "="c)
For Each s in dict.Keys
    Console.WriteLine(dict(s))
Next 
```

（可能您之前需要删除 WWW-Authenticate 行。

# c# - Winforms 中的 MS 图表颜色和图例

> ID：14740886
> 
> 赞同：1
> 
> 时间：2013-02-06T23:30:35.590
> 
> 标签：c#, winforms, charts

我在我的一种形式中使用 Microsoft Chart。我选择了一个饼图。

然后，在运行时，我分配我需要的值和图例，如下所示：

```
{
    double[] yValues = { valor_pendiente, valor_gest_judicial, valor_cancelado };
    string[] xNames = { "Pendientes", "Gest. Judic.", "Cancelado" };

    chart1.Series[0].Points.DataBindXY(xNames, yValues);
    Color[] colores = new Color[] { Barra_azul, Color.Orange, Color.LimeGreen };
    chart1.PaletteCustomColors = colores;
} 
```

好的，现在我有两个问题：

~~1：当值这么小或为零时，有什么方法可以隐藏图例？因为从图形上看，我看起来不太好。~~

![在此处输入图像描述](../Images/2a96e9b3567e8a076c547a9c128ac801.png)

格斯特。司法。那里没有任何价值和剧照。

~~有没有其他的方式来展示传奇？~~

**第一个问题已解决**

另外，第二个问题：

我可以使用渐变而不是颜色（而不是使用颜色数组）吗？如果可以，我该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T15:55:18.643

该类`Series`允许您设置`BackGradientStyle`渐变方向。然后设置`BackSecondaryColor`更改渐变的淡入颜色。

```
chart1.Series[0].BackGradientStyle = GradientStyle.DiagonalRight;
chart1.Series[0].BackSecondaryColor = Color.Cyan; 
```

您还可以为图表中的每个 DataPoint 设置渐变，以给它们每个自定义渐变：

```
chart1.Series[0].Points[0].BackGradientStyle = GradientStyle.DiagonalRight;
chart1.Series[0].Points[0].Color = Color.Red;
chart1.Series[0].Points[0].BackSecondaryColor = Color.Brown; 
```

请注意，如果您启用了 3D 效果，这将不起作用，因此必须将其关闭。

```
chart1.ChartAreas[0].Area3DStyle.Enable3D = false; 
```

# string - MIPS：检查字符串中有多少个字母字符

> ID：14740887
> 
> 赞同：2
> 
> 时间：2013-02-06T23:30:38.477
> 
> 标签：string, assembly, ascii, mips

现在我正在尝试加载一个以 null 结尾的字符串并返回该字符串中的字母字符数。目前我有三个函数：Main、countAlpha（用于计算字符数）和isAlpha，它确定字符是否为字母。我需要一些关于我的算法的帮助。

因此，对于我的 Main，我加载字符串、跳转并链接到 countAlpha，然后加载系统调用命令以打印 int 并退出程序。

对于我遇到问题的 countAlpha，我想创建一个遍历字符串中每个字符的 for 循环，如果 isAlpha 返回 1（表示字符是字母），则增加计数。

isAlpha 很简单——只需确定字符是否介于 ASCII 中的特定数字之间。

所以我想我的问题是如何攻击countAlpha。谢谢你的帮助。（注意：我不想要实际的代码，只是提示和提示）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T23:46:13.797

听起来您想测试调用 isAlpha 的返回值/寄存器，并在每次测试为真时添加/增加一个单独的寄存器/计数变量。或者，如果返回值为 0 或 1，则每次通过循环时，您都可以将返回值直接添加到计数寄存器中。然后，只需设置循环以继续进行，直到当前字符为 '\0' 字符。然后你的计数寄存器保存你的最终值。

这是否足够深入以帮助您？

# linux - 如何在每条分支指令上在 kvm 中执行 VMEXIT？

> ID：14740889
> 
> 赞同：2
> 
> 时间：2013-02-06T18:21:22.557
> 
> 标签：linux, virtualization

GDB 等调试功能通过设置 eflags 寄存器的 TF 标志来工作，这会在处理器每次执行指令后导致异常。当我们运行虚拟机时，如果 kvm 做同样的事情，您需要设置一个名为 MONITOR TRAP FLAG 的标志（当前英特尔软件手册 3c 的第 15 页），这将导致虚拟机退出（VMEXIT）在每条指令向管理程序提供调试之后。

我面临一个问题，我需要设置 BTF（分支陷阱标志）（PG 689 vOLUME 3a INTEL 软件手册）。在正常情况下，这会在每个分支指令上导致 DEBUG EXCEPTION，但由于我想在 VM 上执行此操作，因此我无法确定要在 VMCS 中设置哪个位。在单步的情况下，似乎没有直接的方法可以做到这一点。谁能让我知道是否有某种方法可以使用其他方式做同样的事情？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2018-01-09T20:12:01.413

BTF 标志不在 VMCS 中；它在 IA32_DEBUGCTL MSR 中。您需要通过在 VM 条目之前执行 wrmsr 来明确设置它。对于 KVM，您可以在 vmx_vcpu_run 中添加它。

为了使所有调试异常都退出 VM，请在 VMCS 中设置异常位图的位 1。导致 VM 退出的调试异常信息保存在 VMCS 的退出条件字段中。然后管理程序可以自己处理调试异常或将其注入来宾。

# python - 最佳实践：自动化 Web API 测试

> ID：14740892
> 
> 赞同：3
> 
> 时间：2013-02-06T23:30:58.557
> 
> 标签：python, testing, ckan, web-api-testing

我用 Python 编写了一个程序，它使用两个不同的 API 从两个不同的服务（CKAN 和 MediaWiki）获取数据。特别是，有一个类 Resource，它从上述服务中请求数据并对其进行处理。

在某些时候，我得出结论，需要对我的应用程序进行测试。问题是我在网上和书中找到的所有例子都没有处理这种情况。

例如，在 Resource 类中，我有一个方法：

```
def load_from_ckan(self):
    """
        Get the resource
        specified by self.id
        from config.ckan_api_url 
    """
    data = json.dumps({'id': self.id})
    headers = {'Content-type': 'application/json', 'Accept': 'text/plain'}
    url = config.ckan_api_url + '/action/resource_show'
    r = requests.post(url, timeout=config.ckan_request_timeout, data=data, headers=headers)
    assert r.ok, r
    resource = json.loads(r.content)
    resource = resource["result"]
    for key in resource:
        setattr(self, key, resource[key]) 
```

load_from_ckan 方法从 CKAN API 获取有关资源的数据并将其分配给对象。这很简单，但是...

**我的问题是：如何测试这样的方法？**或者**我应该在这里测试什么？**

我考虑了将结果腌制（保存）到硬盘的可能性。然后我可以在测试中加载它并与用 load_from_ckan() 初始化的对象进行比较。但 CKAN 是社区驱动的平台，此类测试的这种行为将是不可预测的。

如果有任何关于自动化测试哲学的书籍（比如测试什么，不测试什么，如何使测试有意义等），请给我一个链接。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T23:49:28.173

对于任何测试，关键问题确实是 -**会**出什么问题？

在您的情况下，看起来三个风险是：

*   有问题的 Web API 可能会停止工作。但是您已经使用`assert r.ok`.
*   您或其他人可能会在将来对代码进行错误更改（例如错误输入变量），这会破坏它。
*   API 可能会更改，因此它不再返回您需要的字段或格式。

感觉就像您可以为后两者编写一个相当简单的测试，具体取决于您实际依赖的来自此 API 的数据：例如，如果您希望 JSON 有一个名为“温度”的字段，它是一个浮动的-点摄氏度数，您可以编写一个调用您的函数的测试，然后检查 self.temperature 是否是“float”的一个实例并且在合理的值范围内（-30 到 50？）。这应该让您确信 API 和您的函数都按设计工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-07T00:08:04.263

通常，如果您想针对此类外部服务进行测试，您将需要使用模拟/虚拟对象来伪造外部服务的 api。这必须在运行时通过方法的参数或类的构造函数或其他类型的间接进行配置。另一个更复杂的选择是在测试期间对全局变量进行修补，例如“导入请求；request.post = fake_post”，但这会产生更多问题。

因此，例如，您的方法可以采用如下参数：

```
def load_from_ckan(self, post=requests.post):
    # ...
    r = post(url, timeout=config.ckan_request_timeout, data=data,
        headers=headers)
    # ... 
```

然后在测试期间，您将编写自己的 post 函数，该函数返回您会看到从 ckan 返回的 json 结果。例如：

```
 def mock_post(url, timeout=30, data='', headers=None):
     # ... probably check input arguments
     class DummyResponse:
         pass
     r = DummyResponse()
     r.ok = True
     r.content = json.dumps({'result': {'attr1': 1, 'attr2': 2}})
     return r 
```

Constructing the result in your test gives you a lot more flexibility than pickling results and returning them because you can fabricate error conditions or focus in on specific formats your code might not expect but you know could exist.

Overall you can see how complicated this could become so I would only start adding this sort of testing if you are experiencing repeated errors or other difficulties. This will just more code you have to maintain.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-06T23:45:35.600

此时，您可以测试来自 CKAN 的响应是否被正确解析。因此，您可以从 CKAN 中提取 JSON，并确保它返回具有您感兴趣的属性的数据。

# microsoft-sync-framework - 同步框架，分组还是不分组？

> ID：14740894
> 
> 赞同：0
> 
> 时间：2013-02-06T23:31:11.783
> 
> 标签：microsoft-sync-framework

我意识到您可以为整个数据库或仅添加多个表的范围。

问题是，如果您要同步一个完整的数据库（最好是为整个数据库使用一个作用域名称），还是按模式进行作用域和同步会更好？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T02:05:04.700

这将取决于一些因素：表的数量、更新频率、同步方向等......

看看这个：[SYNC FRAMEWORK SCOPE 和 SQL AZURE DATA SYNC DATASET CONSIDERATIONS](http://jtabadero.wordpress.com/2012/03/01/sync-framework-scope-and-sql-azure-data-sync-dataset-considerations/)

# android - 注销片段时 OTTO 中的 IllegalArgumentException

> ID：14740895
> 
> 赞同：3
> 
> 时间：2013-02-06T23:31:14.687
> 
> 标签：android, android-fragments, android-viewpager, otto

我使用 Otto 总线将事件从活动传递到片段。问题是，片段由 管理`ViewPager`并且可以重新创建片段而无需执行其`onPause()`和/或`onResume()`。不愉快的副作用是，在`bus.unregister(fragment)`调用中`onPause()`调用时会定期失败并出现 IllegalArgumentException。我还怀疑对我的`@Subscribe`注释方法的调用可能会被错过，因为`bus.register()`调用在`onResume()`方法中也不能被调用。而且，不幸的是，没有`bus.isRegistered(fragment)`办法进行安全检查。

有没有更好的方法来注册/注销 ViewPager 托管片段？

我知道[这篇文章](https://stackoverflow.com/questions/14593086/passing-data-from-activity-to-fragment-using-otto)讨论了类似的设置，但它不包括在 ViewPager 中运行的片段

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T23:01:31.583

如果您因为遇到类似问题而来到这里 - 事实证明（感谢 Nick Campion 指出）`onPause\onResume`我的片段没有任何问题。我只是`register/untegister`打了两次电话：一次在父抽象类中，另一次在子类中。如`class MyFragment extends AbsFragment`. 所以也许看看你的代码

# jquery - 不会让页面上有超过 9 个手风琴？

> ID：14740896
> 
> 赞同：1
> 
> 时间：2013-02-06T23:31:14.683
> 
> 标签：jquery, accordion

所以我有这个代码，它会生成前 9 个手风琴，但不会超过 9。

```
<script>
    $(function() {
        $('#accordion1,#accordion2,#accordion3,#accordion4,#accordion5,#accordion6,#accordion7,#accordion8,#accordion9,#accordion10,#accordion11,#accordion12,#accordion13,#accordion14,#accordion15,#accordion16,#accordion17,#accordion18,#accordion19,#accordion20').accordion();
    });
</script> 
```

任何想法为什么？是的，我知道代码是一团糟，我可以这样做（i++ 等），但现在就这样吧:)

哦，是的，抱歉：S 所以我有一个脚本可以为 div 生成 id #1....#20。

```
<script>    
var i = 01;
$('.accordion').each(function(i){
    $(this).attr('id', 'accordion'+(i+1));
});
</script>"; 
```

然后在实际的 div 本身我有

```
<div id='' class='accordion'>
 ..............</div> 
```

谢谢詹姆斯

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-06T23:41:01.927

既然你已经有了一个包含所有你想要的元素的类，为什么不使用它来定位手风琴呢？

```
$(function() {
    $('.accordion').accordion();
}); 
```

（*另外，在你的代码中`var i = 01;`是没用的。你只使用`i`函数的参数*）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T23:41:30.250

如果您已经`accordion`在 div 上有一个类，那么以这种方式在它们上调用手风琴插件会容易得多：

```
<script>
    $(function() {
        $('.accordion').accordion();
    });
</script> 
```

# c - C fopen() 和 fgets() 问题

> ID：14740899
> 
> 赞同：-1
> 
> 时间：2013-02-06T23:31:39.897
> 
> 标签：c, fopen, fgets

我正在尝试读取我之前编写的程序中的两个文件，但它总是失败。

```
char line[BUFSIZ];
FILE *fp2=freopen("source.dat","r");

if(fp2==NULL)
printf("Problm opening: source.dat");

FILE *fp3=freopen("result.dat", "r");

if(fp3==NULL)
printf("Problm opening: result.dat");
char line2[BUFSIZ];
int len;

while( (fgets(line2, BUFSIZ, fp2) != NULL) && (fgets(line, BUFSIZ, fp3) != NULL)) {
len=strlen(line);
if( line[len - 1] == '\n' ) line[len-1] = '\0'; len=strlen(line2);
if( line2[len - 1] == '\n' ) line2[len-1] = '\0';

rename(line, line2);
} 
```

我不知道为什么，我知道我的程序写了我想打开的两个文件。它只是没有通过while循环。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T00:01:03.780

这段代码对我有用，显然应该和你的一样，除非另有说明。

第一个注释显然是正确的:-)

```
#include <stdio.h>
#include <string.h>
#include <stdlib.h>

int main(void)
{
       char line[2][BUFSIZ];
       FILE *fp[2];
       char *file[2] = { "source.dat", "result.dat" };
       int  f, finished = 0;

       // Any pointers to source and result must be flushed and closed at this point,
       // i.e. if this same program has created the files, it must now close them.

       for (f = 0; f < 2; f++)
       {
           if (NULL == (fp[f] = fopen(file[f],"r")))
           {
               fprintf(stderr, "Error opening %s\n", file[f]);
               exit(-1);
           }
       }

       while(!finished)
       {
           int len;
           for (f = 0; f < 2 && (!finished); f++)
           {
               if (NULL == fgets(line[f], BUFSIZ, fp[f]))
               {
                   fprintf(stderr, "NULL on %s\n", file[f]);
                   finished = 1;
                   break;
               }
               if (feof(fp[f]))
               {
                   fprintf(stderr, "end of %s\n", file[f]);
                   finished = 1;
                   break;
               }
               len = strlen(line[f]);

               // if one of the file contains an empty line, program might crash
               if (0 == len)
               {
                   fprintf(stderr, "empty line in %s\n", file[f]);
                   finished = 1;
                   break;
               }
               if ('\n' == line[f][len-1])
                   line[f][len-1] = 0x0;
           }
           if (finished)
              break;
           fprintf(stderr, "Rename(%s, %s)\n", line[0], line[1]);
           // rename(line, line2);
      }
      for (f = 0; f < 2; f++)
         fclose(fp[f]);

      return 0;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T00:01:28.923

`freopen`接受 3 个参数，即文件名、模式和`FILE`Stream 对象。因此，要重新打开文件，它应该已经打开。如果我们调用 a`freopen`作为第一次调用，运行时可能会抛出未初始化访问的异常。

修改代码如下

```
 fp2 = fopen("source.dat", "r");
    fp3 = fopen("result.dat", "r"); 
```

我能够毫无问题地运行您的代码，并且控制继续超出 while 循环。存储在第一个文件中的文件被重命名为存储在第二个文件中的名称，我认为这是您程序的目标。

# c++ - 使用 C++98 标准编写的代码是否可以使用新的编译器进行编译？

> ID：14740901
> 
> 赞同：0
> 
> 时间：2013-02-06T23:31:53.870
> 
> 标签：c++, c++98

在 C++98 标准下编写的代码是否可以与较新的编译器一起使用，例如 g++。或者它不会工作。假设简单的“Hello World”程序可以工作，但是复杂的命令行程序呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T23:34:10.710

`-std=`命令行参数`g++`允许您针对特定版本的标准进行编译。

见： http: [//linux.die.net/man/1/g++](http://linux.die.net/man/1/g++)

如果将来 g++ 的作者（这适用于我想的任何编译器）决定默认使用不兼容的标准版本，则此参数将允许您编译较旧的代码。

只有当 g++ 的作者完全放弃 C++98 支持时，它才会停止工作。只有当 C++98 代码的数量变得如此之少或新标准与它如此不兼容时，我才会看到这种情况发生，以至于让人们更新他们的所有代码比继续支持它更容易。无论如何，这应该是一个渐进的、可预见的变化。

# javascript - 带有 html5 + XML + JS 的动态页面？

> ID：14740904
> 
> 赞同：1
> 
> 时间：2013-02-06T23:32:15.010
> 
> 标签：javascript, xml, json, html

基本上这是我第一次在 stackoverflow 上提问。无论如何，如果有人能指出一些关于使用 html5+xml+js 创建简单产品目录应用程序的方向，我将不胜感激。

那么结构如下：

A：**首页**>点击>**产品**分类>点击>产品**列表**>点击>**产品页面说明**

我不确定如何为产品创建动态页面，以便能够在单击列表页面中的任何产品时从 XML 中提取所有产品描述。

例如，我在页面上有 10 个产品，当我单击产品**X**时，将创建一个动态页面，其中包含产品**X**的（图像、描述、价格），等等。

我希望所有这些事情对你有意义，并非常感谢你宝贵的时间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T23:50:31.760

要使用 JavaScript 读取 XML 文件，请查看[此问题](https://stackoverflow.com/questions/1199180/read-xml-file-using-javascript)的答案。对于一般的 HTML5 和 JavaScript，我建议您查看教程以了解一些基础知识：

*   JavaScript - [http://www.w3schools.com/js/default.asp](http://www.w3schools.com/js/default.asp)
*   HTML5 - [http://www.w3schools.com/html/html5_intro.asp](http://www.w3schools.com/html/html5_intro.asp)

您还可以查看[jQuery 库教程](http://www.w3schools.com/jquery/default.asp)。这是 jQuery 的网站[。](http://jquery.com/)

我认为您应该阅读一些基础知识，以了解如何在网络上寻找更多信息，并搜索与您想做的特定事情相关的“操作方法”，但仍然不知道从哪里开始。

**编辑：**

如果您想在开始时检查您确切需要的内容，您可以查看addEventListener JavaScript 方法的文档，[该文档](https://developer.mozilla.org/pl/docs/DOM/element.addEventListener)将允许您设置在元素的特定事件触发时将调用的操作。您还可以检查连接到我上面提到的 jQuery 的链接 - jQuery 是 JavaScript 库，它使编写 JS 更简单。但是对于 JavaScript 和 jQuery，您必须花一些时间阅读文档以了解您可以做什么以及如何实现它。

# mule - Mule - 接收电子邮件不起作用

> ID：14740909
> 
> 赞同：0
> 
> 时间：2013-02-06T23:32:29.503
> 
> 标签：mule, mule-studio

我知道以前有人提出过这个问题，但直到现在我才真正找到解决这个问题的方法。

我正在尝试从 Outlook Exchange 获取消息以进行解析。

我有一个非常简单的流程来从 Outlook 获取邮件，它似乎可以部分工作（它正确验证，并且还检查所有必要的文件夹，但它不会从 IMAP 服务器检索邮件）。

这是我正在使用的流程...

```
 <imap:connector name="imapConnector" checkFrequency="500" 
        backupEnabled="true" backupFolder="inbox.backup"
        mailboxFolder="INBOX" moveToFolder="processed" deleteReadMessages="false" 
        defaultProcessMessageAction="SEEN" />
    <flow name="testFlow" doc:name="testFlow">
        <imap:inbound-endpoint host="ip"
            port="143" user="username" password="pwd" doc:name="IMAP" />
        <file:outbound-endpoint path="C:\"
            responseTimeout="1000" doc:name="File" />
    </flow> 
```

该应用程序似乎运行没有任何错误，但它没有检索任何电子邮件，而是永远坐在那里，如下所示......有人可以帮助我吗？

```
**********************************************************************
* Application: test                                                  *
* OS encoding: Cp1252, Mule encoding: UTF-8                          *
*                                                                    *
* Agents Running:                                                    *
*   JMX Agent                                                        *
**********************************************************************
INFO  2013-02-06 18:26:45,814 [main] org.mule.module.launcher.DeploymentService: 
++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
+ Started app 'test'                                       + 
```

++++++++++++++++++++++++++++++++++++++++++++++++++++++ ++++++++++

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T17:52:36.697

我遇到过同样的问题。试试这个：

1.  停止骡子
2.  从 mule 正在侦听的文件夹中删除或移动所有消息（在您的情况下为 INBOX）
3.  重启骡子
4.  向 mule 正在收听的地方发送新消息

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T23:41:48.503

似乎有很多关于使用 JavaMail 连接到 MS Exchange 的文献，这是 Mule 在幕后使用的。例如阅读：

*   [http://kenai.com/projects/javamail/pages/Exchange](http://kenai.com/projects/javamail/pages/Exchange)
*   [http://www.oracle.com/technetwork/java/faq-135477.html#Exchange-login](http://www.oracle.com/technetwork/java/faq-135477.html#Exchange-login)
*   [Java Mail API 无法读取收件箱](https://stackoverflow.com/questions/13304777/java-mail-api-cannot-read-inbox)

因此，请确保您的用户名格式正确，并且可能使用“收件箱”而不是“收件箱”（不确定它是否有帮助，但在示例中，人们会这样做）。

# ios - 从 NSDictionaries 获取值

> ID：14740911
> 
> 赞同：0
> 
> 时间：2013-02-06T23:32:47.470
> 
> 标签：ios, error-handling, uiimageview, nsdictionary

我有以下代码：

```
NSDictionary *dict = @[@{@"Country" : @"Afghanistan", @"Capital" : @"Kabul"},
                     @{@"Country" : @"Albania", @"Capital" : @"Tirana"}]; 
```

我想列出许多国家和首都，然后随机化一个国家并将其放在屏幕上，然后用户应该能够选择正确的大写..

1.  我怎么把国家？像`dict.Country[0]`或类似的东西？

2.  代码有什么问题？我得到**错误** `"Initializer element is not a compile-time constant" and the warning "Incompatible pointer types initializing 'NSDictionary *_strong' with an expression of type 'NSArray *'.`

3.  我可以在字典中创建第三个字符串，包含一个标志文件.. 例如

    @“标志文件”：@“阿尔巴尼亚.png”

然后把它放在图像视图中？

我想要一个带有随机数 I 的循环（例如）并输入 like （我知道这是不对的，但我希望你明白这一点）

```
loop..
....

text= dict.Country[I]; 

button.text= dict.Capital[I];

Imageview=dict.Flagfile[I];
.....
.... 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T01:03:51.620

这是关于mbuc91正确想法的更完整说明。

1) 创建国家

```
// Country.h

@interface Country : NSObject

@property(strong,nonatomic) NSString *name;
@property(strong,nonatomic) NSString *capital;
@property(strong,nonatomic) NSString *flagUrl;
@property(strong,nonatomic) UIImage *flag;

// this is the only interesting part of this class, so try it out...
// asynchronously fetch the flag from a web url.  the url must point to an image
- (void)flagWithCompletion:(void (^)(UIImage *))completion;

@end

// Country.m

#import "Country.h"

@implementation Country

- (id)initWithName:(NSString *)name capital:(NSString *)capital flagUrl:(NSString *)flagUrl {

    self = [self init];
    if (self) {
        _name = name;
        _capital = capital;
        _flagUrl = flagUrl;
    }
    return self;
}

- (void)flagWithCompletion:(void (^)(UIImage *))completion {

    NSURLRequest *request = [NSURLRequest requestWithURL:[NSURL URLWithString:self.flagUrl]];
    [NSURLConnection sendAsynchronousRequest:request
                                       queue:[NSOperationQueue mainQueue]
                           completionHandler:^(NSURLResponse *response, NSData *data, NSError *error) {
                               if (data) {
                                   UIImage *image = [UIImage imageWithData:data];
                                   completion(image);
                               } else {
                                   completion(nil);
                               }
                           }];
}

@end 
```

2) 现在，在其他类中，使用 Country

```
#import "Country.h"

- (NSArray *)countries {

    NSMutableArray *answer = [NSMutableArray array];

    [answer addObject:[[Country alloc]
                       initWithName:@"Afghanistan" capital:@"Kabul" flagUrl:@"http://www.flags.com/afgan.jpg"]];

    [answer addObject:[[Country alloc]
                       initWithName:@"Albania" capital:@"Tirana" flagUrl:@"http://www.flags.com/albania.jpg"]];

    return [NSArray arrayWithArray:answer];
}

- (id)randomElementIn:(NSArray *)array {

    NSUInteger index = arc4random() % array.count;
    return [array objectAtIndex:index];
}

-(void)someMethod {

    NSArray *countries = [self countries];
    Country *randomCountry = [self randomElementIn:countries];
    [randomCountry flagWithCompletion:^(UIImage *flagImage) {
        // update UI, like this ...
        // self.flagImageView.image = flagImage;
    }];
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-06T23:39:50.730

您的顶级元素是两个 NSDictionary 的 NSArray（@[]，带有方括号，组成一个数组）。要访问其中一个字典中的属性，您将执行 array[index][key]，例如 array[0][@"Country"] 将给您@"Afghanistan"。如果你做了 NSArray *array = ... 而不是 NSDictionary *dict = ...

如果你想随机选择一个国家，你可以得到一个随机数，得到它 mod 2 (someInteger % 2) 并将它用作你的索引，例如 array[randomNumber % 2][@"Country"] 会给你一个从您的字典数组中随机国家名称。

如果将图像名称存储在字典中，则可以使用 UIImage 的[+imageNamed:](http://developer.apple.com/library/ios/documentation/uikit/reference/UIImage_Class/Reference/Reference.html#//apple_ref/occ/clm/UIImage/imageNamed%3a)方法加载该名称的图像。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-06T23:49:45.883

您不能以这种方式初始化 NSDictionary。NSDictionary 是一组**未排序**的键-对象对 - 它的顺序不是静态的，因此您不能像处理数组一样处理它。在您的情况下，您可能需要一个 NSMutableDictionary，因为您将修改其内容（有关更多信息，请参阅 Apple 的[NSMutableDictionary 类参考](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSMutableDictionary_Class/Reference/Reference.html)）。

您可以通过几种方式实现您的代码。使用 NSDictionaries 你会做类似下面的事情：

```
NSMutableDictionary *dict = [[NSMutableDictionary alloc]
    initWithObjectsAndKeys:@"Afghanistan", @"Country",
    @"Kabul", @"Capital", nil]; 
```

然后，您将拥有一系列字典，每个字典都包含一个国家/地区的详细信息。

另一种选择是为每个国家创建一个简单的模型类并拥有一个数组。例如，您可以创建一个名为 Country 的类，`Country.h`如下所示：

```
#import <Foundation/Foundation.h>
@interface Country : NSObject

@property (nonatomic, retain) NSString *Name;
@property (nonatomic, retain) NSString *Capital;
//etc...

@end 
```

# r - 从向量中的每个字符串中提取前 N 个字符

> ID：14740918
> 
> 赞同：3
> 
> 时间：2013-02-06T23:33:22.077
> 
> 标签：r, string

我有一个字符串向量：

```
v.string <- c('abc', 'beb', 'lol', 'heh', 'hah') 
```

有没有办法从向量中提取前 N 个元素？所以在上面如果我想提取前两个，我会得到：

```
'ab','be','lo','he','ha' 
```

还是我必须做一个循环和使用`substr`功能？我的向量很长。

谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-06T23:34:31.553

你正在寻找`?substr`

```
 substr( v.string , start = 1 , stop = 2 ) 
```

（结合@Arun的评论）如果你想从倒数第二个字母开始，你也可以使用这个`nchar`函数，所以

```
# print the number of characters in each string in your character vector..
nchar( v.string ) 

# ..which gets used to..

# print the second-to-last character until the end of the string
substr( v.string , start = nchar( v.string ) - 1 , stop = nchar( v.string ) ) 
```

# ios - 在堆叠的 UIWindows 之间传递触摸？

> ID：14740921
> 
> 赞同：32
> 
> 时间：2013-02-06T23:33:29.993
> 
> 标签：ios, uiview, touch, uiwindow

我有两扇窗户——前一扇，后一扇。前面的用于在后面的上面覆盖一些东西。我希望能够捕捉到前窗某些部分的触摸，而不是其他部分；我希望前窗在某些区域接收触摸，但在其他区域将它们传递到后窗。

关于我如何做到这一点的任何想法？

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2013-05-08T23:29:52.970

好的，这就是我所做的：我在前窗口中创建了两个视图。第一个视图覆盖了我想要捕捉的区域；第二个，我希望触摸通过的地方。我将 UIWindow 子类化并覆盖了 hitTest:withEvent 方法，如下所示：

```
- (UIView *) hitTest:(CGPoint)point withEvent:(UIEvent *)event {

  // See if the hit is anywhere in our view hierarchy
  UIView *hitTestResult = [super hitTest:point withEvent:event];

  // ABKSlideupHostOverlay view covers the pass-through touch area.  It's recognized
  // by class, here, because the window doesn't have a pointer to the actual view object.
  if ([hitTestResult isKindOfClass:[ABKSlideupHostOverlayView class]]) {

    // Returning nil means this window's hierachy doesn't handle this event. Consequently,
    // the event will be passed to the host window.
    return nil;
  }

  return hitTestResult;
} 
```

在创建前窗口的类中，我使用手势识别器来捕捉对第一个视图的触摸。

* * *

与 2017 年代码相同：

```
class PassView: UIView {}

class UIHigherWindow: UIWindow {

    override func hitTest(_ point: CGPoint, with event: UIEvent?) -> UIView? {

        let hitView = super.hitTest(point, with: event)

        if hitView!.isKind(of: PassView.self) {

            return nil
        }

        return hitView
    }
} 
```

您的“uber”窗口将是一些视图控制器，UberVc。

只需将UberVc的主视图（即简单的背景.view）设为PassView即可。

然后在 UberVc 上添加说按钮等。

上面的代码会导致对按钮的任何点击进入 UberVc，而对按钮以外的任何点击（即在“背景”上）都会进入您的常规窗口/VC。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-12-25T19:49:48.887

我有一个类似的问题：额外的 UIWindow 应该有一个透明的视图和一些棘手的子视图。必须通过这些棘手视图之外的所有触摸。

我最终使用了 Anna 代码的修改版本，它使用视图的标签而不是类型检查。这种方式不需要创建视图子类：

```
class PassTroughWindow: UIWindow {
    var passTroughTag: Int?

    override func hitTest(_ point: CGPoint, with event: UIEvent?) -> UIView? {

        let hitView = super.hitTest(point, with: event)

        if let passTroughTag = passTroughTag {
            if passTroughTag == hitView?.tag {
                return nil
            }
        }
        return hitView
    }
} 
```

假设您创建了一个窗口和根视图控制器，您可以像这样使用它：

```
let window: PassTroughWindow 
//Create or obtain window

let passTroughTag = 42

window.rootViewController.view.tag = passTroughTag
window.passTroughTag = passTroughTag

//Or with a view:
let untouchableView: UIView // Create it
untouchableView.tag = passTroughTag
window.addSubview(untouchableView) 
```

* * *

## 回答 #3

> 赞同：-4
> 
> 时间：2013-06-23T16:01:52.753

不要使用多个 UIWindows，而是使用 获取关键窗口[`[[UIApplication sharedApplication] keyWindow]`](https://developer.apple.com/documentation/uikit/uiapplication/1622924-keywindow)，然后将视图添加到其中：

```
mainWindow = [[UIApplication sharedApplication] keyWindow];
[mainWindow addSubview:view] 
```

# python - 两个节点之间所有路径的非常快速的算法

> ID：14740922
> 
> 赞同：10
> 
> 时间：2013-02-06T23:33:29.770
> 
> 标签：python, graph, nodes

我对 python 编码非常陌生，我正在寻找一种算法，它可以快速找到一个非常大的图的起始节点和结束节点之间的所有路径 - 比如说一个有大约 1000 个节点和 10,000 条边的图。从开始节点到结束节点实际存在的路径数量很少 - 十个或更少。为了帮助更多地了解这个问题，考虑一个社交网络——如果我有 1000 个朋友，我想知道我高中最好的朋友有多少种方式与我大学室友联系，我不在乎我的高中最好的朋友与我所有的 200 个高中朋友都有联系，因为这些路径永远不会通向我的室友。我想用这个 python 代码做的是快速子集我的两个朋友之间存在的路径，并基本上摆脱所有的“噪音”

我尝试实现了一些代码示例，所有这些示例都适用于小型、简单的图表。但是，当我尝试将它们合并到我的大型图形分析中时，它们都需要很长时间才能发挥作用。

你们是否都有任何关于调查方法的建议（即，已经在 networkx 中创建的东西，甚至是关于使用堆栈与递归等的信息等）、要实现的代码示例，甚至是 python 之外的其他路线要追求？请记住，我是 python 新手。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-08T19:12:28.390

也许您想要两个节点之间的所有简单（无重复节点）路径？NetworkX 有一个基于深度优先搜索的功能。请参阅[http://networkx.github.com/documentation/development/reference/generated/networkx.algorithms.simple_paths.all_simple_paths.html](http://networkx.github.com/documentation/development/reference/generated/networkx.algorithms.simple_paths.all_simple_paths.html)

那里的示例表明简单路径的数量可能很大：

```
>>> import networkx as nx
>>> G = nx.complete_graph(4)
>>> for path in nx.all_simple_paths(G, source=0, target=3):
...     print(path)
...
[0, 1, 2, 3]
[0, 1, 3]
[0, 2, 1, 3]
[0, 2, 3]
[0, 3] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T23:43:03.150

我个人建议为此使用图形数据库。Neo4j 或 Rexter 浮现在脑海中。

从 Python 访问这些时，有几个库可用：

*   [http://bulbflow.com/overview/](http://bulbflow.com/overview/)
*   [http://py2neo.org/](http://py2neo.org/)

尽管编写一个快速/可扩展的 Python 版本并非不可能，但据我所知，目前还没有。

# javascript - 使用 HTML 5 File API 加载 JSON 文件

> ID：14740927
> 
> 赞同：6
> 
> 时间：2013-02-06T23:33:41.927
> 
> 标签：javascript, html, json, fileapi

我希望用户能够在那里的计算机上选择一个 JSON 文件，然后这个 JSON 文件应该可供客户端 Javascript 使用。

我将如何使用 FILE API 执行此操作，最终目标是用户选择 JSON 文件作为对象可用，然后我可以在 Javascript 中使用它。这是我到目前为止所拥有的：

```
JsonObj = null 

function handleFileSelect(evt) {
    var files = evt.target.files; // FileList object
     f = files[0];
      var reader = new FileReader();

      // Closure to capture the file information.
      reader.onload = (function(theFile) {
        return function(e) {
          // Render thumbnail.
         JsonObj = e.target.result
         console.log(JsonObj);
        };
      })(f);

      // Read in the image file as a data URL.
      reader.readAsDataURL(f);
    }

document.getElementById('files').addEventListener('change', handleFileSelect, false); 
```

**小提琴**：http : [//jsfiddle.net/jamiefearon/8kUYj/](http://jsfiddle.net/jamiefearon/8kUYj/)

我如何将变量 JsonObj 转换为适当的 Json 对象，可以添加新字段等。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-07-22T05:50:04.420

不要将数据加载为“DataUrl” via `readAsDataURL`，而是使用`readAsText`然后解析它`JSON.parse()`

例如

```
JsonObj = null 

function handleFileSelect(evt) {
    var files = evt.target.files; // FileList object
     f = files[0];
      var reader = new FileReader();

      // Closure to capture the file information.
      reader.onload = (function(theFile) {
        return function(e) {
          // Render thumbnail.
         JsonObj = JSON.parse(e.target.result);
         console.log(JsonObj);
        };
      })(f);

      // Read in the image file as a data URL.
      reader.readAsText(f);
    }

document.getElementById('files').addEventListener('change', handleFileSelect, false); 
```

# c# - 处理来自 POST 或 PUT REST 请求的 Web API 中的二进制数据

> ID：14740929
> 
> 赞同：9
> 
> 时间：2013-02-06T23:33:57.200
> 
> 标签：c#, asp.net, file-upload, asp.net-web-api, binary

我目前正在使用**Web API开发****REST** Web 服务。我在处理通过 POST 请求传输的**二进制数据**（图像）时遇到了问题。

 ****从客户端的角度来看，我已经设法使用**jQuery Form Plugin**发送二进制数据。但是因为我对 .NET 非常陌生（我是一名 PHP 开发人员），所以我很难通过服务器上的 Web API 处理这些二进制数据。

为了确认 jQuery 表单插件正确发送图像数据，我编写了一个使用简单全局变量的有效**PHP处理程序。**`$_FILE`

现在我正在尝试通过 Web API 来完成同样的事情。这是我尝试过的概述。如何访问已发送的二进制数据？

**模型：**

```
namespace EDHDelivery.Models
{
    public class Oferta
    {
        public int OfertaID { get; set; }
        public string Nombre { get; set; }
        public string Imagen { get; set; }
        public int ComercioID { get; set; }
    }
} 
```

**控制器（显示部分代码）：**

```
public Oferta Add(Oferta item)
{
    /*here my item will have the POST body with form values, 
    automatically serialized by the framework and I think an image binary*/
    var n = item.Nombre; //...etc.
} 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-07T01:36:41.550

简而言之，您必须将数据发送为`multipart/form-data`（我很确定，您已经通过您提到的插件执行此操作），然后您必须使用 Web API`MultipartContent`提供程序之一提取该数据。

有很多资源可以解释如何做到这一点：

*   [文件上传和多部分 MIME](http://www.asp.net/web-api/overview/working-with-http/sending-html-form-data,-part-2)
*   [ASP.NET Web API：文件上传和多部分 MIME](http://code.msdn.microsoft.com/ASPNET-Web-API-File-Upload-a8c0fb0d)
*   [ASP.NET Web API RTM 中的异步文件上传指南](http://www.strathweb.com/2012/08/a-guide-to-asynchronous-file-uploads-in-asp-net-web-api-rtm/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-09-29T12:57:14.460

我取得了同样的成就

这是我的上传用户类

```
public class UploadUserFile
{
    string _Token;
    string _UserId;
    string _IPAddress;
    string _DeviceInfo;
    string _FileName;
    string _ContentType;
    Stream _PhotoStream;

   public string Token
    {
        get
        {
            return _Token;

        }

        set
        {
            _Token = value;
        }
    }
    public string UserId
    {
        get
        {
            return _UserId;
        }
        set
        {
            _UserId = value;
        }
    }
    public string IPAddress
    {
        get
        {
            return _IPAddress;
        }
        set
        {
            _IPAddress = value;
        }
    }
    public string DeviceInfo
    {
        get
        {
            return _DeviceInfo;
        }
        set
        {
            _DeviceInfo = value;
        }

    }
    public string FileName
    {
        get
        {
            return _FileName;
        }
        set
        {
            _FileName = value;
        }
    }
    public string ContentType
    {
        get
        {
            return _ContentType;

        }
        set
        {
            _ContentType = value;
        }

    }

    public Stream PhotoStream
    {
        get
        {
            return _PhotoStream;
        }
        set
        {
            PhotoStream = value;
        }
    }

} 
```

这是我的 API 控制器类

```
 public class UploadUserPhotoController : ApiController
{

    /// <summary>
    /// </summary>
    /// <param name="request">
    /// HttpRequestMessage, on the other hand, is new in .NET 4.5\. 
    /// It is part of System.Net. 
    /// It can be used both by clients and services to create, send and receive requests and 
    /// responses over HTTP. 
    /// It replaces HttpWebRequest, which is obsolete in .NET 4.5 
    /// </param>
    /// <returns>return the response of the Page <returns>
    [HttpPost]
    public async Task<HttpResponseMessage> Post(HttpRequestMessage request)
    {

        var httpRequest = HttpContext.Current.Request;
        var UploadUserFileObj = new UploadUserFile
        {
            Token = request.GetQueryNameValuePairs().AsEnumerable().Where(x => x.Key == "Token").FirstOrDefault().Value.ToString(),
            UserId = request.GetQueryNameValuePairs().AsEnumerable().Where(x => x.Key == "UserId").FirstOrDefault().Value.ToString(),
            IPAddress = request.GetQueryNameValuePairs().AsEnumerable().Where(x => x.Key == "IPAddress").FirstOrDefault().Value.ToString(),
            ContentType = request.GetQueryNameValuePairs().AsEnumerable().Where(x => x.Key == "ContentType").FirstOrDefault().Value.ToString(),
            DeviceInfo = request.GetQueryNameValuePairs().AsEnumerable().Where(x => x.Key == "DeviceInfo").FirstOrDefault().Value.ToString(),
            FileName = request.GetQueryNameValuePairs().AsEnumerable().Where(x => x.Key == "FileName").FirstOrDefault().Value.ToString()
        };
        Stream requestStream = await request.Content.ReadAsStreamAsync();
        HttpResponseMessage result = null;

        if (requestStream!=null)
        {
            try
            {
                if(string.IsNullOrEmpty(UploadUserFileObj.FileName))
                {
                    UploadUserFileObj.FileName = "DefaultName.jpg";
                }

                // Create a FileStream object to write a stream to a file
                using (FileStream fileStream = System.IO.File.Create(HttpContext.Current.Server.MapPath("~/locker/" + UploadUserFileObj.FileName), (int)requestStream.Length))
                {
                    // Fill the bytes[] array with the stream data
                    byte[] bytesInStream = new byte[requestStream.Length];
                    requestStream.Read(bytesInStream, 0, (int)bytesInStream.Length);
                    // Use FileStream object to write to the specified file
                    fileStream.Write(bytesInStream, 0, bytesInStream.Length);
                    result = Request.CreateResponse(HttpStatusCode.Created, UploadUserFileObj.FileName);
                }
            }
            catch (HttpException ex)
            {
                return result = Request.CreateResponse(HttpStatusCode.BadGateway,"Http Exception Come"+ ex.Message);
            }
            catch(Exception ex)
            {
                return result = Request.CreateResponse(HttpStatusCode.BadGateway, "Http Exception Come" + ex.Message);
            }
        }
        else
        {
            return result = Request.CreateResponse(HttpStatusCode.BadGateway, "Not eble to upload the File ");
        }
        return result;
    }
} 
```

在这段代码中，我使用

> HttpRequestMessage 用于在客户端到服务器服务器到客户端之间传输数据。****

# php - 字符串替换 - 在单引号前添加斜杠

> ID：14740932
> 
> 赞同：6
> 
> 时间：2013-02-06T23:34:02.390
> 
> 标签：php, str-replace

我试图通过在它之前添加一个斜杠来逃避我的 PHP 中的单引号。不幸的是，我无法让它与 str_replace 一起使用，我想知道我是否做错了什么。

我所拥有的是以下...

```
$string = 'I love Bob's Pizza!';
$string = str_replace("'", "\\'", $string);
echo $string; 
```

当我使用它时，由于某种原因，它没有按照应有的方式用“\'”替换单引号。

任何帮助是极大的赞赏！

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-02-06T23:35:26.187

为什么不使用[addlashes](http://php.net/manual/en/function.addslashes.php)？

```
$string = "I love Bob's Pizza!";
$string = addslashes($string);
echo $string; 
```

更新：如果您坚持自己的方式，那是因为您没有转义单引号。尝试：

```
$string = 'I love Bob\'s Pizza!';
$string = str_replace("'", "\\'", $string);
echo $string; 
```

您根本无法做您正在做的事情，因为它会导致语法错误。

# jsf - Primefaces 分页器

> ID：14740940
> 
> 赞同：0
> 
> 时间：2013-02-06T23:34:35.393
> 
> 标签：jsf, primefaces

我有一个带有 paginator="true" 的简单 primefaces 数据表。该表有数据，并且为分页器显示了箭头按钮，但是当我单击一个时，没有任何反应。它甚至没有回发到服务器。这是我的数据表声明：

```
<p:dataTable id="datatable" var="currentRow" value="#{myBean.Items}" paginator="true" rows="10"> 
```

我错过了什么吗？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-15T04:35:13.093

确保您的表格位于`<h:form>`元素内。

# ruby-on-rails - 语法错误，意外的 tIDENTIFIER，需要关键字_end (static_pages?)

> ID：14740941
> 
> 赞同：0
> 
> 时间：2013-02-06T23:34:35.300
> 
> 标签：ruby-on-rails, ruby-on-rails-3.2, railstutorial.org

这是我的路由配置，下面我发布了我尝试生成用户模型时收到的错误。我在教程的这一部分中陷入困境，请帮助！如果我不够具体，请收件箱给我，我是这个世界的新手！谢谢，麻烦您了！

```
SampleApp::Application.routes.draw do
  get "users/new"
  root to: 'static_pages#home

  match '/help', to:'static_pages#help'
  match '/about', to:'static_pages#about'
  match '/contact', to:'static_pages#contact'
end

  # You can have the root of your site routed with "root"
  # just remember to delete public/index.html.
  # root :to => "welcome#index"

  # The priority is based upon order of creation:
  # first created -> highest priority.

  # Sample of regular route:
  #   match 'products/:id' => 'catalog#view'
  # Keep in mind you can assign values other than :controller and :action

  # Sample of named route:
  #   match 'products/:id/purchase' => 'catalog#purchase', :as => :purchase
  # This route can be invoked with purchase_url(:id => product.id)

  # Sample resource route (maps HTTP verbs to controller actions automatically):
  #   resources :products

  # Sample resource route with options:
  #   resources :products do
  #     member do
  #       get 'short'
  #       post 'toggle'
  #     end
  #
  #     collection do
  #       get 'sold'
  #     end
  #   end

  # Sample resource route with sub-resources:
  #   resources :products do
  #     resources :comments, :sales
  #     resource :seller
  #   end

  # Sample resource route with more complex sub-resources
  #   resources :products do
  #     resources :comments
  #     resources :sales do
  #       get 'recent', :on => :collection
  #   end
  #   end

  # Sample resource route within a namespace:
  #   namespace :admin do
  #     # Directs /admin/products/* to Admin::ProductsController
  #     # (app/controllers/admin/products_controller.rb)
  #     resources :products
  #   end

  # You can have the root of your site routed with "root"
  # just remember to delete public/index.html.
  # root :to => 'welcome#index'

  # See how all your routes lay out with "rake routes"

  # This is a legacy wild controller route that's not recommended for RESTful      applications.
  # Note: This route will make all actions in every controller accessible via GET requests.
  # match ':controller(/:action(/:id))(.:format)' 
```

它正在显示此错误

```
unknown00231256eabc:sample_app micahsherman$ rails generate model User name:string      email:string
/Users/micahsherman/.rvm/gems/ruby-1.9.3-p374@rails3tutorial2ndEd/gems/activesupport-  3.2.11/lib/active_support/dependencies.rb:245:in `load':     /Users/micahsherman/rails_projects/sample_app/config/routes.rb:5: syntax error, unexpected      tSTRING_BEG, expecting keyword_do or '{' or '(' (SyntaxError)
  match '/help', to:'static_pages#help'
           ^
/Users/micahsherman/rails_projects/sample_app/config/routes.rb:5: syntax error, unexpected   tIDENTIFIER, expecting keyword_end
  match '/help', to:'static_pages#help'
                             ^
    from /Users/micahsherman/.rvm/gems/ruby-1.9.3-   p374@rails3tutorial2ndEd/gems/activesupport-3.2.11/lib/active_support/dependencies.rb:245:in    `block in load'
    from /Users/micahsherman/.rvm/gems/ruby-1.9.3-p374@rails3tutorial2ndEd/gems/activesupport-3.2.11/lib/active_support/dependencies.rb:236:in  `load_dependency'
    from /Users/micahsherman/.rvm/gems/ruby-1.9.3-p374@rails3tutorial2ndEd/gems/activesupport-3.2.11/lib/active_support/dependencies.rb:245:in `load'
    from /Users/micahsherman/.rvm/gems/ruby-1.9.3-  p374@rails3tutorial2ndEd/gems/railties-3.2.11/lib/rails/application/routes_reloader.rb:40:in   `block in load_paths'
    from /Users/micahsherman/.rvm/gems/ruby-1.9.3-p374@rails3tutorial2ndEd/gems/railties-3.2.11/lib/rails/application/routes_reloader.rb:40:in `each'
    from /Users/micahsherman/.rvm/gems/ruby-1.9.3-p374@rails3tutorial2ndEd/gems/railties-3.2.11/lib/rails/application/routes_reloader.rb:40:in `load_paths'
    from /Users/micahsherman/.rvm/gems/ruby-1.9.3-  p374@rails3tutorial2ndEd/gems/railties-3.2.11/lib/rails/application/routes_reloader.rb:16:in `reload!'
    from /Users/micahsherman/.rvm/gems/ruby-1.9.3-p374@rails3tutorial2ndEd/gems/railties-3.2.11/lib/rails/application/routes_reloader.rb:26:in `block in updater'
    from /Users/micahsherman/.rvm/gems/ruby-1.9.3-p374@rails3tutorial2ndEd/gems/activesupport-3.2.11/lib/active_support/file_update_checker.rb:78:in `call'
    from /Users/micahsherman/.rvm/gems/ruby-1.9.3-p374@rails3tutorial2ndEd/gems/activesupport-3.2.11/lib/active_support/file_update_checker.rb:78:in `execute'
    from /Users/micahsherman/.rvm/gems/ruby-1.9.3-p374@rails3tutorial2ndEd/gems/railties-3.2.11/lib/rails/application/routes_reloader.rb:27:in `updater'
    from /Users/micahsherman/.rvm/gems/ruby-1.9.3-p374@rails3tutorial2ndEd/gems/railties-3.2.11/lib/rails/application/routes_reloader.rb:7:in `execute_if_updated'
    from /Users/micahsherman/.rvm/gems/ruby-1.9.3-p374@rails3tutorial2ndEd/gems/railties-3.2.11/lib/rails/application/finisher.rb:66:in `block in <module:Finisher>'
    from /Users/micahsherman/.rvm/gems/ruby-1.9.3-p374@rails3tutorial2ndEd/gems/railties-3.2.11/lib/rails/initializable.rb:30:in `instance_exec'
    from /Users/micahsherman/.rvm/gems/ruby-1.9.3-p374@rails3tutorial2ndEd/gems/railties-3.2.11/lib/rails/initializable.rb:30:in `run'
    from /Users/micahsherman/.rvm/gems/ruby-1.9.3-p374@rails3tutorial2ndEd/gems/railties-3.2.11/lib/rails/initializable.rb:55:in `block in run_initializers'
    from /Users/micahsherman/.rvm/gems/ruby-1.9.3-p374@rails3tutorial2ndEd/gems/railties-3.2.11/lib/rails/initializable.rb:54:in `each'
    from /Users/micahsherman/.rvm/gems/ruby-1.9.3-p374@rails3tutorial2ndEd/gems/railties-3.2.11/lib/rails/initializable.rb:54:in `run_initializers'
    from /Users/micahsherman/.rvm/gems/ruby-1.9.3-p374@rails3tutorial2ndEd/gems/railties-3.2.11/lib/rails/application.rb:136:in `initialize!'
    from /Users/micahsherman/.rvm/gems/ruby-1.9.3-p374@rails3tutorial2ndEd/gems/railties-3.2.11/lib/rails/railtie/configurable.rb:30:in `method_missing'
    from /Users/micahsherman/rails_projects/sample_app/config/environment.rb:5:in `<top (required)>'
    from /Users/micahsherman/.rvm/gems/ruby-1.9.3-p374@rails3tutorial2ndEd/gems/railties-3.2.11/lib/rails/application.rb:103:in `require'
    from /Users/micahsherman/.rvm/gems/ruby-1.9.3-p374@rails3tutorial2ndEd/gems/railties-3.2.11/lib/rails/application.rb:103:in `require_environment!'
    from /Users/micahsherman/.rvm/gems/ruby-1.9.3-p374@rails3tutorial2ndEd/gems/railties-3.2.11/lib/rails/commands.rb:25:in `<top (required)>'
    from script/rails:6:in `require'
    from script/rails:6:in `<main>' 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-06T23:36:17.927

您在这里缺少一个单引号：

```
root to: 'static_pages#home 
```

# javascript - 如何将参数传递给getCurrentPosition成功回调？

> ID：14740942
> 
> 赞同：10
> 
> 时间：2013-02-06T23:35:00.527
> 
> 标签：javascript, windows-phone-7

调用时如何将一个或多个参数传递给成功回调`navigator.geolocation.getcurrentPosition`？

我怎样才能传递到`deviceready`方法？`foundLoc``getGeoLoc`

```
var app = {

    onDeviceReady: function () {
        alert = window.alert || navigator.notification.alert;

        app.getGeoLoc('deviceready');
    },

    getGeoLoc: function (id) {
        navigator.geolocation.getCurrentPosition(this.foundLoc, this.noLoc, { timeout: 3 });
    },

    foundLoc: function (position) {
        var parentElement = document.getElementById('deviceready'); 
        var lat = parentElement.querySelector('#lat');
        var long = parentElement.querySelector('#long');

        lat.innerHTML = position.coords.latitude;
        long.innerHTML = position.coords.longitude;
    },

    noLoc: function () {
        alert('device has no GPS or access is denied.');
    }
}; 
```

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-08-06T14:22:49.150

将地理位置回调包装在**function(position) {}**中，如下所示。然后，您可以向实际的回调函数添加任意数量的参数。

```
var app = {

    getGeoLoc : function (id) {

        var self = this;

        navigator.geolocation.getCurrentPosition(function(position) {

            var myVar1, myVar2, myVar3; // Define has many variables as you want here

            // From here you can pass the position, as well as any other arguments 
            // you might need. 
            self.foundLoc(position, self, myVar1, myVar2, myVar3)

        }, this.noloc, { timeout : 3});
    },

    foundLoc : function(position, self, myVar1, myVar2, myVar3) {},
}; 
```

希望这可以帮助其他可能偶然发现这一点的人。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-08-25T12:31:41.263

我发现这种[方法](https://stackoverflow.com/questions/22032361/how-to-pass-a-second-parameter-to-geolocation-success-function)更容易理解。

```
navigator.geolocation.getCurrentPosition(function (position) {
    updatePosition(position, var1, var2);
}, errorPosition, optionsPosition);

function updatePosition(position, var1, var2) {
    var coordinates = position.coords;
}

function errorPosition(error) {
    if (err.PERMISSION_DENIED === error.code) {

    }
}

var optionsPosition = {
    enableHighAccuracy: true,
    timeout: 10000,
    maximumAge: 0
}; 
```

# actionscript-3 - AS3 - 将 ...rest 解析为另一个 ...rest 而不使用 Array Cast

> ID：14740949
> 
> 赞同：1
> 
> 时间：2013-02-06T23:35:35.030
> 
> 标签：actionscript-3

我使用`NetConnection`类来建立与 amfPHP 的连接。此类有一个 call() 方法，该方法接收`...rest`作为最后一个参数的值，该参数将是发送到 PHP 的值。我想要的是编写一个代理类，它将接收将对 PHP 进行的调用，并且这个代理类将进行调用而不是我的 DAO。现在，我的问题是，为了有一个 Proxy `NetConnection.call()`，我需要接收一个`...rest`参数并将其传递给 NetConnection 。但发生的情况是我的函数转换`...rest`为数组，最后 PHP 只接收 1 个数组参数，而不是应有的大量参数。假设我不能在 PHP 上使用代理来处理这个问题，我如何确保我的`...rest`参数将被保留`...rest`为另一个函数？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T00:41:42.520

所以`...rest`最终获取所有剩余的参数，并从中创建一个名为 rest 的数组。如果你想用一组参数调用一个函数，而不是一个一个地调用，那么[Function 上的 apply 方法](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/Function.html#apply) 就是你要找的。我不熟悉 NetConnection 但这里有一个例子

```
public function proxy(command:String, responder:Responder, ... args):void{
    var netConnection:NetConnection = new NetConnection();
    var argsToApply:Array = [command,responder];
    argsToApply = argsToApply.concat(args); //Forms an array of all the arguments in order
    netConnection.call.apply(null,argsToApply);
} 
```

形成了所有参数的单个数组，这样 apply 可以与 call 方法一起使用。

# ios - iOS推送通知错误代码

> ID：14740959
> 
> 赞同：4
> 
> 时间：2013-02-06T23:36:34.677
> 
> 标签：ios, apple-push-notifications

我用了

```
- (void)application:(UIApplication *)application 
        didFailToRegisterForRemoteNotificationsWithError:(NSError *)error 
```

处理推送注册期间发生的异常。

我想针对不同的错误显示自定义消息。

到目前为止，我发现人们使用**error.code**来确定错误类型

例如：

```
 error.code = 3010 // is for the iPhone Simulator

 error.code = 3000 // Failed to get token 
```

我想知道 Apple 在哪里记录这些错误代码，因为我想涵盖所有错误类型

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T23:40:46.727

`NSError`查询对象以获取错误的本地化解释并改为显示它可能更容易。它可能会为您节省一些工作，这取决于您。

# android - 从 PhoneStateListener 创建通知

> ID：14740971
> 
> 赞同：0
> 
> 时间：2013-02-06T23:37:50.730
> 
> 标签：android, android-notifications, phone-state-listener

我正在开发 Android 应用程序，我收到了来电广播，我需要在通知托盘中创建一个通知。

我正在尝试以下

```
NotificationManager nm = (NotificationManager)this; 
```

但这会显示错误`Cannot cast from PhoneStateManager to NotificationManager`。

我也尝试过使用`context`而不是，`this`但后来说它不能从`PhoneStateManager`to 转换`NotificationManager`。

如何从 PhoneStateListener 创建通知，这可能还是我需要将其传递给服务？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T23:42:58.050

[像文档说](http://developer.android.com/reference/android/app/NotificationManager.html)的那样获取它的一个实例：

```
NotificationManager nm = (NotificationManager)context.getSystemService(Context.NOTIFICATION_SERVICE); 
```

由于您没有发布更多代码，因此很难说出您可以用于`context`. 如果您确实有`Context`变量，请使用它。如果您的侦听器包含在 Activity/Service 中，请执行`MyActivity.this`或`MyService.this`代替`context`我在代码片段中使用的变量。

# java - 检查 JTextField 字符

> ID：14740974
> 
> 赞同：3
> 
> 时间：2013-02-06T23:38:21.573
> 
> 标签：java, swing

我为我的孩子编写了一个程序来练习基本算术。JFrame 上有一个 JTextField，学生在其中键入给定数学问题的答案（例如 8+8，他们键入 16，回车）。此字段仅接受整数值作为 DocumentFilter 的条目。

那部分工作得很好。我想要做的是避免让用户不得不按下回车键。理想情况下，当用户键入第一个数字 (1) 时，会检查是否 1 == 16。如果不是，则不会发生任何事情。当他们随后键入 6 时，文本字段显示数字 16。我想运行检查以验证 16 == 16，然后处理输入，就好像用户也按下了 Enter 键一样。

```
txtAnswer.addKeyListener(new KeyAdapter() {
        @Override
        public void keyPressed(KeyEvent e) {               
            int key = e.getKeyCode();
            if (key == KeyEvent.VK_ENTER) {
                respondToAnswer(isTimed);
            } else {
                /* Check if the correct answer has been entered */
                System.out.println(txtAnswer.getText());
                //int userAnswer = Integer.parseInt(txtAnswer.getText());
                //if (userAnswer == correctAnswer {
                //   respondToAnswer(isTimed);
                //}
            }
        };
    }); 
```

这段代码不太好用。就好像它背后是一个角色。我的意思是当用户按下“1”键时（在我的 8+8=16 示例中），控制台输出是一个空字符串。当他们按下“6”键时，输出为“1”。如果他们随后按下另一个整数键，则输出为“16”。它总是落后一位数。因此，我无法捕获文本字段的全部内容以查看它是否与正确答案匹配。

有人看到我错过了什么吗？

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-06T23:47:27.563

您应该`DocumentListener`用于此目的。 `keyPressed`可能在字段中的文本更新之前触发。

有关详细信息和示例，请参阅[如何编写文档侦听器。](http://docs.oracle.com/javase/tutorial/uiswing/events/documentlistener.html)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-06T23:48:01.827

使用 a[`DocumentListener`](http://docs.oracle.com/javase/7/docs/api/javax/swing/event/DocumentListener.html)而不是 a `KeyListener`。在所有三个事件中，您都可以访问实际的文本内容。

要`Enter`在 JTextField 上收听，我们使用`ActionListener`

旁注：您几乎不需要`KeyListener`. 对`JTextComponent`，永远靠一个`DocumentListener`。对于所有其他人，请使用适当的 Swing Key 绑定。`KeyListener`确实是一个低级 API。

# sql - SQL：具有不同条件的多个计数语句

> ID：14740975
> 
> 赞同：37
> 
> 时间：2013-02-06T23:38:27.340
> 
> 标签：sql, count

我只是想知道是否有任何方法可以使用一个查询从表中获取两个单独的“计数”总数？也就是说，使用类似于以下的表格，我想检索每个代码（不同的）并显示状态总数不等于 X 或 D，然后有一个附加列显示状态总数等于到 X 或 D 并且取消日期大于给定日期（例如，过去 14 天）。

桌子：

```
Code:  Status  Cancel_Date
-----------------------------------
AAA    X       2012-02-01
AAA
BBB    X       2012-02-01
AAA    D       2012-01-01
AAA
BBB    
BBB    D       2012-02-01
BBB    X       2012-01-01 
```

示例结果（基于上述数据）：

```
Code:  TotalNotXorD     TotalXorD
------------------------------------
AAA    2                1
BBB    1                2 
```

TotalNotXorD：例如

```
select code, count(*) 
from table 
where status not in('X','D') 
group by code 
```

TotalXorD：例如

```
select code, count(*) 
from table 
where status in('X','D') 
  and cancel_date >= '2012-02-01' 
group by code 
```

我看过做子查询等，但我似乎无法得到我需要的结果。

有任何想法吗？

谢谢。

* * *

## 回答 #1

> 赞同：91
> 
> 时间：2013-02-06T23:41:40.803

 ~~~~```
SELECT  a.code,
        COALESCE(b.totalNotXorD, 0 ) totalNotXorD,
        COALESCE(c.totalXorD, 0 ) totalXorD,
FROM    (SELECT DISTINCT Code FROM tableName) a
        LEFT JOIN
        (
            select code, count(*) totalNotXorD
            from table 
            where status not in('X','D') 
            group by code
        ) b ON a.code = b.code
        LEFT JOIN
        (
            select code, count(*) totalXorD
            from table 
            where status in('X','D') 
              and cancel_date >= '2012-02-01' 
            group by code
        ) c ON a.code = c.code 
```~~  ~~或者干脆做`CASE`

```
SELECT  Code,
        SUM(CASE WHEN status NOT IN ('X','D') OR status IS NULL THEN 1 ELSE 0 END) TotalNotXorD,
        SUM(CASE WHEN status IN ('X','D') AND cancel_date >= '2012-02-01' THEN 1 ELSE 0 END) TotalXorD  
FROM    tableName
GROUP   BY Code 
```~~~~

# ruby-on-rails - 使用 Rails 语法多次有效地连接同一个表

> ID：14740978
> 
> 赞同：0
> 
> 时间：2013-02-06T23:38:31.407
> 
> 标签：ruby-on-rails, database, join, rails-activerecord

我的 Rails 2.3 应用程序中有一个复杂的数据库模式。在某些时候，我需要通过连接多个表来进行查询以从多个列中检索数据。有一个表我总是需要通过它来检索我需要的数据。

当我尝试使用 Rails 语法进行连接时，问题就来了。我发现没有办法让 rails 一次又一次地跳过加入同一张桌子。

假设我有这个表关系：

```
A=>B=>C=>D=>E=>F
A=>B=>F=>G
A=>B=>F=>H
A=>I 
```

如您所见，B 是我多次“加入”以获取所需表的表。

我的查询看起来像这样：

```
A.all( :select=>"SOME DATA FROM F, G, H AND I",
       :joins=>[{{{{:B=>:C}=>:D}=>:E}=>:F}, {{:B=>:F}=>:G}, {{:B=>:F}=>:H}, :I],
       :conditions=>{"SOME CONDITIONS"
                    }
     ) 
```

您可以看到我使用哈希语法来指定连接。

问题是，当我查看 rails 创建的连接时，我发现它连接了 B 3 次。我希望它足够聪明，只做一次然后从那里开始，但我想可能会有你想加入几次的情况。

我的问题是，我怎样才能使用 rails 2.3.8 语法使生成的查询只加入 B 一次。在 :belongs_to :throug 类型的模型中添加额外的关系对我来说不是一个选择

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T00:28:43.563

尝试

```
A.all(:joins => [:I, { :B => [{ :F => [:G, :H] }, {:C => { :D => { :E => :F }}}]}]) 
```

# java - 在 JTextArea 中添加边距？

> ID：14740979
> 
> 赞同：10
> 
> 时间：2013-02-06T23:38:32.540
> 
> 标签：java, swing, jlabel, jtextarea

所以我有一个`JTextArea`从左上角显示文本的地方。我想要在所有 4 个边上都有一些边距，所以在文本和区域边界之间有一些空间。

我研究了很多，找不到任何解决方案。我该怎么做？

另外，我在想也许可以在所有 4 面都贴上标签以创建虚拟边距。如何创建`JLabel`具有特定宽度和高度的？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-07T00:12:38.247

可能是我没有正确理解你的问题。但是您可以使用 setMargin()

```
// set the margin for all four sides
tt.setMargin( new Insets(10,10,10,10) ); // tt is JTextArea instance 
```

一些重要的链接

[1.setMargin API](http://docs.oracle.com/javase/7/docs/api/javax/swing/text/JTextComponent.html#setMargin%28java.awt.Insets%29)

[2\. 类插图](http://docs.oracle.com/javase/7/docs/api/java/awt/Insets.html)

# database-design - 我需要帮助分解与 BCNF 的关系

> ID：14740982
> 
> 赞同：0
> 
> 时间：2013-02-06T23:38:44.890
> 
> 标签：database-design, relational-database

我有一个具有以下功能依赖关系的表；

*   PropertyID → 地址、价格
*   代理名称 → 代理电话
*   价格 → 销售税
*   客户姓名 → 客户电话
*   代理名称、价格 → 佣金

我已将其分解为以下内容。

1.  物业（**PropertyID**、地址、价格）
2.  代理（代理**名称**，代理电话）
3.  客户（**客户名称**，客户电话）
4.  价格 ( **Price*** , **AgentName*** , PropertyID *, SalesTax, 佣金)

它对我来说似乎仍然有点笨重，但我看不出如何进一步分解它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T13:20:29.360

您分解中的第 1、2 和 3 项是正确的。您似乎丢失了 FD“Price->SalesTax”。并且项目 4 不在 2NF 中，因为部分键依赖“Price->SalesTax”。

*   { **PropertyID** , 地址, 价格}
*   {**代理**名称 , 代理电话}
*   {**客户名称**, 客户电话}
*   {**价格**，销售税}
*   {代理**名称、价格**、佣金}

所有这些都至少在 5NF 中。正确的分解与您开始使用的功能依赖关系相同。这并不经常发生。

# compiler-construction - 交叉编译 unixODBC 的问题

> ID：14740987
> 
> 赞同：1
> 
> 时间：2013-02-06T23:39:04.180
> 
> 标签：compiler-construction, arm, cross-compiling, libtool, unixodbc

我在 Mac 上，尝试为 arm7 编译 unixODBC（供我在 iOS 中使用）时遇到 libtool 链接问题。我从他们的网站下载[了 unixODBC，](ftp://ftp.unixodbc.org/pub/unixODBC/unixODBC-2.3.1.tar.gz)并使用以下脚本对其进行配置和制作。

```
#!/bin/sh

# unset some shell variables
unset CC
unset CFLAGS
unset CPP

# make arm target
export CC=/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/usr/bin/arm-apple-darwin10-llvm-gcc-4.2
export CFLAGS="-isysroot /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS6.1.sdk"
export CPP=/usr/bin/cpp

./configure --build=x86_64-apple-darwin12 --host=arm-apple-darwin10 --target=armv7 --enable-static --disable-shared

make all 
```

./configure 运行得很好，但在`make all`它中断期间。我收到以下错误：

```
Undefined symbols for architecture armv7:
  "_lt_libltdlc_LTX_preloaded_symbols", referenced from:
      _lt_dlinit in libodbc.a(libltdlc_la-ltdl.o)
ld: symbol(s) not found for architecture armv7 
```

我将错误范围缩小到在**exe**`make all`目录中运行时，特别是在运行以下命令时

 **```
/bin/sh ../libtool --tag=CC --mode=link /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/usr/bin/arm-apple-darwin10-llvm-gcc-4.2 -isysroot /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS6.1.sdk -pthread -o isql isql.o ../DriverManager/libodbc.la ../extras/libodbcextraslc.la 
```

我不太确定它为什么会失败。我已经检查过该`lt_dlinit`功能确实存在，并且据我所知，一切都正确完成。但是，我没有使用 libtool 的经验，而且我解决链接器问题的经验也不丰富。

感谢您提供任何帮助，如有必要，我可以提供任何其他信息。先感谢您！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T11:04:23.107

也许值得一跑

libtoolize --copy --ltdl

在 unixODBC 构建树的根目录中复制到本地版本的 libtool**

# c++ - 如何输入一个字符，然后根据 char 的值输出一个数字序列？

> ID：14740989
> 
> 赞同：0
> 
> 时间：2013-02-06T23:39:16.293
> 
> 标签：c++

所以我正在尝试编写一个程序，该程序将输入 0 到 127 之间的字符，然后以下列形式输出一串数字：

```
 - If I input a 0, the output should be a 0
 - If I input a 5, the output should be 012345
 - If I input a 9, the output should be 0123456789
 - If I input a 14, the output should be 012345678901234
 - If I input a 27, the output should be 0123456789012345678901234567 
```

所以，我正在寻找最多从 0 到 9 的 10 个字符的增量，然后重复该序列，直到达到最后一个数字。所以在 27 中，由于第一个 0，实际上有 28 个字符输出，但最后一个仍然是 7。

我知道我想使用 for 循环，但我在弄清楚如何实现这一点时遇到了一些麻烦。我可能可以使用 ASCII 48 到 57 作为输出，但我的问题是我如何使输入工作......我应该将它静态转换为整数然后使用它吗？我在这里碰壁了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T23:47:17.307

尝试以下操作：

```
#include <iostream>

int main() {
   char input;

   std::cin >> input;

   if (input >= 0 && input <= 127) {
      for (int i = 0; i <= n; i++) std::cout << i % 10;
   }
} 
```

# php - 从数据库检索时间时，javascript计时器不倒计时

> ID：14740992
> 
> 赞同：1
> 
> 时间：2013-02-06T23:39:22.587
> 
> 标签：php, javascript, jquery, mysqli

我正在尝试按照 jsfiddle 示例在 javascript 中创建时间：

[http://jsfiddle.net/g3rRJ/](http://jsfiddle.net/g3rRJ/)

现在显然jsfiddle中的计时器工作正常。但我遇到的问题是，计时器开始的时间来自一个 mysqli/php 变量，它从数据库中检索时间。

所以除了：

```
<span id="countdown">01:30:10</span> 
```

我必须有它：

```
echo "<p><span id='countdown'>" . $dbSessionDuration . "</span></p>"; 
```

和

除了：

```
var time = "01:30:10", 
```

我必须有它：

```
var time = <?php echo json_encode($dbSessionDuration); ?>, 
```

现在我没有收到任何错误，但正在发生的事情是计时器没有倒计时。我的问题是为什么它不倒计时？来自变量的时间示例可能是`01:00:00`。

下面是该函数的代码：

```
echo "<p><span id='countdown'>" . $dbSessionDuration . "</span></p>";

...

         <script type="text/javascript">

    (function(){
  $(document).ready(function() {
    var time = <?php echo json_encode($dbSessionDuration); ?>,
      parts = time.split(':'),
      hours = +parts[0],
      minutes = +parts[1],
      seconds = +parts[2],
      span = $('#countdown');

    function correctNum(num) {
      return (num<10)? ("0"+num):num;
    }

    var timer = setInterval(function(){
        seconds--;
        if(seconds == -1) {
            seconds = 59;
            minutes--;

            if(minutes == -1) {
                minutes = 59;
                hours--;

                if(hours==-1) {
                  alert("timer finished");
                  clearInterval(timer);
                  return;
                }
            }
        }
        span.text(correctNum(hours) + ":" + correctNum(minutes) + ":" + correctNum(seconds));
    }, 1000);
  }); 
});

</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T00:16:45.763

我不知道这是否是错误类型，但我可以通过`$(function(){`在匿名函数的第一部分添加 $, 来运行此代码。我假设您从数据库中获得的价值以小时：分钟：秒的形式出现。我不确定 Fiddler 为什么会运行，但我必须添加它才能让它在我的环境中工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-07T00:23:01.017

改变这个：

```
 }); 
});

</script> 
```

对此：

```
 }); 
})();            //  ←  note the extra parentheses

</script> 
```

这样你就可以真正*调用*你的匿名函数了。（或者，您可以简单地完全删除它`(function(){`。`});`这段代码根本没有理由在函数中。）

# php - 我只需要在 div 中放置一个。每次我将 include_once 放入 div 时，SOMETHING.PHP 都不会显示在 div 中！它最终会出现在 div 之外！ 这是我的 div CSS 代码： #bcg { -moz-bo 问问题 问问题 2013-02-06T23:39:24.973 276 次 This question shows research effort; it is useful and clear 0 This question does not show any research effort; it is unclear or not useful Bookmark this question. Show activity on this post. phphtmlcss 4 1 回答 1 This answer is useful 1 尝试在输出缓冲区中捕获包含脚本的输出，然后回显它。于 2013-02-06T23:54:32.620 回答 Related 3 c# - 单元测试 - 如何对对象进行快照？ 2 css - Rails 3 - link_to 应用样式 3 java - 优化sql查询，小数据也太慢了 2 node.js - 在nodeJS中给出编码错误 2 ruby-on-rails - 问题四舍五入。我想用 2 位数字四舍五入 2 spring - IntelliJ IDEA 关于 Spring 上下文的新消息 1 objective-c - 目标c点击tableview时，单元格消失 1 actionscript-3 - Actionscript 3将对象转换为类返回null 1 android - 在客户端和服务器之间共享 AIDL 和 Parcelable 文件的最佳方式 2 android - 如何使用 Multipart 将图像上传到 php 服务器 Reference php × 1429865 c/c++ × 756500 nginx × 49975 mongodb × 159057 mybatis × 3233 anaconda × 13410 pycharm × 14671 python × 1902243 vscode × 56040 docker × 110988 github × 49000 flask × 49129 ffmpeg × 24037 jmeter × 16910 matplotlib × 63493 bootstrap × 54641

> ID：14740993
> 
> 赞同：0
> 
> 时间：
> 
> 标签：php, html, css

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T23:54:32.620

尝试在输出缓冲区中捕获包含脚本的输出，然后回显它。

```
<div id="bcg">
    <?php
        ob_start();

        include_once("something.php");

        echo ob_get_clean();
    ?>
</div> 
```

# c# - 如何使用反射设置 HttpRequest.InputStream 值

> ID：14740995
> 
> 赞同：1
> 
> 时间：2013-02-06T23:39:45.230
> 
> 标签：c#, .net, asp.net-mvc-3, reflection, asp.net-web-api

我正在为从 Request.InputStream 读取 POST 正文的 WebApi 控制器编写单元测试。我需要设置HttpContext.Current.Request.InputStream的inputstream属性，或者设置inputstream的内容。到目前为止，这是我的单元测试代码，但它不断抛出异常：

```
var originalStream = HttpContext.Current.Request.InputStream;
Stream newStream = new MemoryStream(ASCIIEncoding.Default.GetBytes("Test String"));

var propInfo = originalStream.GetType().GetProperty("CanWrite");
propInfo.SetValue(originalStream, true);

newStream.CopyTo(originalStream);

propInfo.SetValue(originalStream, false); 
```

我在 SetValue 行上收到以下异常：

```
ArgumentException: Property set method not found 
```

我对这一切都错了吗？我的控制器读取输入流并将其反序列化为 JSON，因此我需要能够将数据插入到该流中。我只是不知道该怎么做。非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T23:46:13.447

`public abstract bool CanWrite { get; }`. 该属性没有设置器..因此您的错误。

在您的示例中，`originalStream`将是`Stream`. 将其包装在另一个流中以供您测试。您不是在测试`HttpRequest.InputStream`，而是在测试反序列化 ...

```
var originalStream = new StreamReader(HttpContext.Current.Request.InputStream);
var content = originalStream.ReadToEnd(); 
```

.. ETC。

您甚至可以考虑完全跳过使用请求输入，因为您并没有真正测试它。

编辑：

再扩大一点。您应该将其移出控制器操作.. 执行以下操作：

```
public class YourController : Controller {
    private readonly IStreamWrapper _streamWrapper;

    public YourController(IStreamWrapper wrapper) {
        _streamWrapper = wrapper;
    }

    public ActionResult MethodYouAreTesting() {
        var result = _streamWrapper.Process(HttpRequest.InputStream);
    }
}

public class Tests {
    public void YourTestMethod() {
        var controller = new YourController(new FakeStreamWrapper()); // mock perhaps?
        // Asserts here for the controller action
    }

    public void YourWrapperTester() {
        var wrapper = new RealStreamWrapper();
        // test Process method here..
    }
} 
```

然后您可以单独测试流读取和反序列化。

这有意义还是我让它变得更复杂了？：/

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T23:46:45.840

InputStream 是一个只读流。

有几种方法。从最简单的开始：

创建 StreamReader 的实例并在 InputStream 上调用 ReadToEnd() 以获取正在发送的数据。

获得内容后，您可以在进行 JSON 转换之前根据需要进行修改。

同样，这是做你想做的最简单、最不优雅的方法，但它应该可以工作。

# java - .equals 表演真的很有趣

> ID：14740998
> 
> 赞同：0
> 
> 时间：2013-02-06T23:39:50.423
> 
> 标签：java

```
 for (int y = 0; y < stuff.length(); y++)
        {
            String n = wordTemp[y];
            String m = complete [y];
            System.out.println(n + m);
            if (n.equals(m));
            {
                fin = fin + 1;
            }
        }

        if (fin == stuff.length())
        {
            System.out.println("COMPLETED!  Play again later.");
            return;
        } 
```

这是我的hangman main 方法的最后一部分。我目前有两个阵列正在运行。第一个是 complete[]，它包含一个输入的单词，该单词被切成逐个字符的子字符串。我拥有的第二个数组是“猜测的”字数组。例如，如果单词是fish，complete[] 将包含[f,i,s,h} 而wordTemp 将包含[f,-,-,-] 如果我只是猜测f。

但是，当我去比较这两个数组的元素，看看用户是否完成了挑战时，我直接跳出了java。最终结果如下：

在进行了第一次猜测之后，整个事情都跳过了。我怀疑 .equals 不起作用，但我能做些什么来替换它？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-06T23:41:32.027

```
 if (n.equals(m)); 
```

应该

```
 if (n.equals(m)) 
```

删除分号。

这是自动格式化 IDE 不错的部分原因，而就我个人而言，这也是我喜欢埃及风格括号的部分原因——`if (n.equals(m)) {`开放括号在同一行。诸如此类的小事情会使诸如额外分号之类的语法问题更加明显。