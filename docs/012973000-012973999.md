# StackOverflow 问答 12973000-12973999

# javascript - 如何实现素描画笔，例如在 deviantART muro 中？

> ID：12973003
> 
> 赞同：0
> 
> 时间：2012-10-19T11:11:38.650
> 
> 标签：javascript, paint, effects, paintcomponent

[deviantART muro](http://muro.deviantart.com/)拥有一套出色的绘画工具。我很好奇如何在算术上实现这些画笔，如 Sketch 和 Paintbrush？

使用任何普通的编程语言来解释都可以，尽管我更喜欢 C++ 或 JavaScript。我认为这比阅读他们的 JS 源代码要好。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-05T10:35:32.590

我会说它的工作原理类似于：

*   跟踪鼠标移动
*   在捕获的鼠标移动时，将您想要的画笔从保存的“旧鼠标位置”绘制到捕获的“新鼠标位置”，一次迭代一个像素的距离
*   如果您将鼠标移动得太快以至于脚本无法捕获，它看起来就像一条计算出来的长直线（这就是 Muro 正在做的事情）。如果您想获得真正的幻想，您可以从以前的鼠标位置计算轨迹并将其绘制为“更平滑”的线。

由于您指定了 Javascript，您可能希望在`canvas`对象中绘制它。

**编辑1：**

`Sketch`特别是似乎保存鼠标移动然后循环遍历，例如每次鼠标移动的 20 个最新鼠标移动，并从该点绘制一条贝塞尔曲线到当前点。

所以，像（伪代码）

```
Object mousemovements = [];
on.mousemove(event)
{
  if (mousemovements.length > 20)
  {
     mousemovements.removeLast();
  }
  mousemovements.insertAtBeginning([ event.mouseX, event.mouseY ]);
  for-each (movement in mousemovements)
  {
     drawBeziercurveFromTo(movement.mouseX, movement.mouseY, 
                           event.mouseX, event.mouseY);
  }
} 
```

**[基于以上伪代码的jquery/Canvas DEMO](http://jsfiddle.net/c5F6Q/2/)**

**编辑2：**

我仔细研究了“草图”的工作原理，它们似乎更新了鼠标指针的位置，将旧点移近新点。像这样的东西：

**[这个DEMO的工作原理很像`sketch`画笔](http://jsfiddle.net/c5F6Q/8/)**

# extjs - Extjs 组合框映射具有数千条记录的表

> ID：12973005
> 
> 赞同：1
> 
> 时间：2012-10-19T11:11:44.073
> 
> 标签：extjs

我的表有一个外键字段指向一个有很多记录的表。

在表单中显示此字段的最佳做法是什么？

使用 ComboBox 对小表来说非常好，但对于长表来说，这不是一个好的选择。

你有什么建议？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T11:45:20.153

如果要显示多列，最好使用带有分页的 Grid。否则，您也可以使用带有分页的组合框。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T12:26:31.647

我们为此创建了自己的组件（选择器）。它扩展了组合框，它的商店只有一条记录。当用户单击选取器时，应打开带有网格的弹出窗口，当用户在网格中选择记录时，此记录（id 和 displayName）将转到选取器。看起来像这样![在此处输入图像描述](../Images/68ee586470014dcb5eb7507a613a38f8.png)

# python - Sublime Text run python 适用于 mac 但不适用于 windows 8

> ID：12973007
> 
> 赞同：1
> 
> 时间：2012-10-19T11:11:46.763
> 
> 标签：python, sublimetext

在我的 mac 上以崇高的文字：

```
# farenhiet to celcius
def farenheit2celcious (farenheit):
celcius = (5 / 9) * (farenheit - 32)
return celcius

#test
c1 = farenheit2celcious(32)
print c1 
```

在控制台中给出 0

在 Windows 中，在崇高的文本中，我得到

print c1 ^ SyntaxError: invalid syntax [在 0.1 秒内完成，退出代码为 1]

有任何想法吗？行尾？文件是不同计算机从 Dropbox 访问的相同文件。两种环境都有 sublime text 2，可能安装了不同的包

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-19T11:13:57.527

如果您在 Windows 上安装了 python 3，那将是一个问题。我假设 MAC 上的 python 是 python2.x 而 windows 上的 python 是 3.x

在python 3中，print是一个函数，所以应该是print(c1)

您可以通过以下方式检查 python 版本：

1.  只需在 Mac 上的控制台上键入 python，您将看到版本

2.  在windows上打开IDLE，看看打印的版本是什么

# objective-c - 如何从 iOS 应用通过电子邮件发送地址链接，然后在 Google 地图中搜索

> ID：12973009
> 
> 赞同：0
> 
> 时间：2012-10-19T11:11:49.587
> 
> 标签：objective-c, ios, google-maps

我正在尝试将地址从 iOS 应用程序发送给电子邮件收件人。我希望该地址链接到 Safari/浏览器中的 Google 地图搜索

这是我到目前为止所拥有的。我想知道如何使用地址来搜索地图：

```
 NSString *myUrl = [NSString stringWithFormat:@"https://maps.google.co.uk/%@", addressLb.text];

NSString *emailBody = [NSString stringWithFormat:@"I'm at %@ on %@. Come join me... %@", nameLb.text, addressLb.text, myUrl]; 
```

我遇到的一个问题是 addressLB.text 中的地址有间距。因此，`NSString *myUrl = [NSString stringWithFormat:@"maps.google.co.uk/?q=%@";, addressLb.text];`将搜索 maps.google.co.uk/?q=1600 并删除宾夕法尼亚州

谢谢你的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T11:34:38.330

添加 /maps?q= 后跟使用加号 (+) 代替空格的地址到 google maps url 的末尾。例如，要查找 1600 Pennsylvania Avenue, Washington, DC：

[https://maps.google.com/maps?q=1600+Pennsylvania+Avenue,+Washington,+DC](https://maps.google.com/maps?q=1600+Pennsylvania+Avenue,+Washington,+DC)

# visual-studio-2010 - 并排运行 VS2012 时在 VS 2010 中编辑时的构建模板问题

> ID：12973015
> 
> 赞同：1
> 
> 时间：2012-10-19T11:11:58.887
> 
> 标签：visual-studio-2010, msbuild, visual-studio-2012

我有一个运行 TFS 2010 构建服务的构建服务器。

在我的本地机器上，我在 VS 2010 旁边安装了 VS2012。在安装 VS2012 之前，构建模板运行良好。

安装 VS2012 后，我现在在 VS2010 中编辑构建模板时遇到问题。

我通过访问以下博客解决了我遇到的 IBuildDetail 错误：

[IBuildDetail Not Defined 错误修复](http://blogs.microsoft.co.il/blogs/yuvmaz/archive/2011/12/12/ibuilddetail-not-defined-error-in-tfs-2010-build-templates.aspx)

但是我正在尝试修复剩余的错误，例如：

```
Compiler errors encountered Processing Expression "New Microsoft.TeamFoundation.Build.Workflow.Activities.BuildSettings()".
"BuildSettings" is ambiguous in the namespace 'Microsoft.TeamFoundation.Build.Workflow.Activities.' 
```

我有更多类似上面的错误。

谁能分享我如何解决上述错误/相关错误？

我将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-04T10:37:01.930

将 TFS 2010 升级到 TFS 2012 时遇到同样的问题。

确切的问题：

> 您很棒的自定义活动是针对 TFS 2010 位构建的。在 TFS 2012 构建服务过程中加载您的自定义程序集会触发加载 TFS 2010 程序集，而工作流基础 (WF) 服务对此并不满意。

以下是解决问题的步骤： [将构建定义从 TFS2010 升级到 TFS2012](http://blogs.msdn.com/b/jpricket/archive/2012/10/24/upgrading-your-build-definitions-from-tfs2010-to-tfs2012.aspx)

在这里解决方法： [您的自定义程序集需要更新，否则，重定向](http://blogs.msdn.com/b/duat_le/archive/2012/03/16/your-custom-assemblies-need-update-or-else-redirecting.aspx)

可能我对您的情况有误，但这些链接可以驱使您找到自己的解决方案。

# regex - MSBuild RegexMatch 不匹配

> ID：12973019
> 
> 赞同：2
> 
> 时间：2012-10-19T11:12:18.277
> 
> 标签：regex, msbuild

我有以下

```
<RegexMatch Input="$(Configuration)" Expression="^.*?(?=\.)">
   <Output ItemName="Theme" TaskParameter="Output" />
</RegexMatch> 
```

我的配置变量如下 Theme.Environment

所以“Default.Debug”或“Yellow.Release”

我想将第一部分放入一个名为主题的变量中。我已经测试了这个正则表达式，它可以在独立的正则表达式测试器中工作

```
^.*?(?=\.) 
```

但在我的构建文件中使用时不是。

我正在回显变量，以便我可以看到输出

```
<Exec Command="echo $(Theme)"/>
<Exec Command="echo $(Configuration)"/> 
```

想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-21T17:39:04.803

如果您应该为此使用 MSBuild 社区任务 - 请检查此行：`<Output PropertyName="Theme" TaskParameter="Output" />`

`PropertyName="Theme"`如果您想`$(Theme)`稍后 引用它，您应该使用它。`ItemName`将创建项目集，而不是属性。

但是，使用 MSBuild 4.0 内联函数比使用 Msbuild 社区任务执行该具体任务要简单得多。您的代码将如下所示（采用您的脚本）：

```
<?xml version="1.0" encoding="utf-8"?>
<Project xmlns="http://schemas.microsoft.com/developer/msbuild/2003" ToolsVersion="4.0" DefaultTarget="Play">
  <PropertyGroup>
    <Configuration>Yellow.Release</Configuration>
  </PropertyGroup>

  <Target Name="Play">

    <PropertyGroup>
      <Theme>$([System.Text.RegularExpressions.Regex]::Match($(Configuration), `^.*?(?=\.)`))</Theme>
    </PropertyGroup>

    <Message Text="$(Theme)" />
    <Message Text="$(Configuration)" />
  </Target>
</Project> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T13:53:44.223

刚刚意识到 RegexMatch 不会返回匹配的字符串，而是如果匹配则返回整个字符串。

基本上它称为 IsMatch 方法而不是 Match 方法

已重新编写为 RegexReplace

```
<RegexReplace Input="$(Configuration)" Expression="\..*" Replacement="" Count="1">
    <Output ItemName="Theme" TaskParameter="Output" />
</RegexReplace> 
```

在那之后它仍然没有工作，然后我意识到我在做

```
$(Theme) 
```

本来应该

```
@(Theme) 
```

# applescript - 如何以编程方式使用applescript获取最新下载的文件名？

> ID：12973026
> 
> 赞同：1
> 
> 时间：2012-10-19T11:12:37.107
> 
> 标签：applescript

我需要在 Mac 上以编程方式获取文件名，我使用 Selenium 下载文件，我需要从下载文件夹中选择相同的文件以编程方式安装，我使用 Applescript 来做同样的事情。我被困在运行时获取文件名，而且我的下载页面 url 不包含下载文件的全名。请建议..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T12:05:41.527

这将为您提供下载文件夹的最新文件（按创建日期排序）：

```
tell application "Finder"
    set latestFile to item 1 of (sort (get files of (path to downloads folder)) by creation date) as alias
    set fileName to latestFile's name
end tell 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-10-06T11:52:54.580

是的，Mavericks 确实打开了最旧的，但是通过指定最后一个项目，这个接缝可以工作。

`tell application "Finder" set latestFile to last item of (sort (get files of (path to downloads folder)) by creation date) as alias set fileName to latestFile's name end tell`

# c# - 将字典值序列化为字符串

> ID：12973036
> 
> 赞同：0
> 
> 时间：2012-10-19T11:13:07.257
> 
> 标签：c#, .net, exception, xml-serialization, ienumerable

我正在尝试序列化包含非原始值的字典。我通过实现 IXmlSerializable 使用常规方法来序列化字典。在 WriteXML 方法中，我将我的非原始值转换为字符串（如何转换不相关，但该部分正在工作）。在 ReadXML 中，我将反序列化的值（字符串）转换回原始类型。

但是，这种方法会引发错误：InvalidOperationException：要实现 XML 可序列化，从 IEnumerable 继承的类型必须在其继承层次结构的所有级别上都有 Add(System.Object) 的实现。

我认为这是因为该值不是原始的。但是，它不需要序列化，因为它没有序列化（而是转换为字符串）。任何想法如何解决这个问题？

应该提到我正在使用泛型，并且运行时是 Mono 环境。类定义如下所示：

```
public class SerializableRefDictionary<TKey, TValue> : Dictionary<TKey, TValue>, IXmlSerializable where TValue : NonPrimitiveObject 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-19T12:18:29.397

似乎字典中的对象类型不是您问题的原因。如果您有从 Dictionary 继承的类，则必须在您的类中实现

```
public void Add(object o); 
```

[你看过这个答案吗？](https://stackoverflow.com/questions/5172757/why-does-xmlserializer-require-types-which-inherit-from-ienumerable-to-have-an-i)

# c# - C# 在 HttpWebRequest Post 数据方面需要一点帮助

> ID：12973037
> 
> 赞同：1
> 
> 时间：2012-10-19T11:13:07.887
> 
> 标签：c#, post, httpwebrequest

我基本上知道如何使用 HttpWebRequests，但我还是个新手。所以我想用 Post 方法提交以下令牌。

```
authenticity_token=pkhn7pwt3QATOpOAfBERZ%2BRIJ7oBEqGFpnF0Ir4RtJg%3D&question%5Bquestion_text%5D=TEST+TEST+TEST&authenticity_token=pkhn7pwt3QATOpOAfBERZ%2BRIJ7oBEqGFpnF0Ir4RtJg%3D 
```

它的作用是单击一个按钮并发送文本“TEST TEST TEST”，这是我单击我想要的按钮时从萤火虫获得的令牌。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T11:19:33.543

要使用 Http Post Request 发送一些数据，您可以尝试使用以下代码：

检查“var serverResponse”以获取服务器响应。

```
 string targetUrl = "http://www.url.url";

        var postBytes = Encoding.Default.GetBytes(@"authenticity_token=pkhn7pwt3QATOpOAfBERZ%2BRIJ7oBEqGFpnF0Ir4RtJg%3D&question%5Bquestion_text%5D=TEST+TEST+TEST&authenticity_token=pkhn7pwt3QATOpOAfBERZ%2BRIJ7oBEqGFpnF0Ir4RtJg%3D");

        var httpRequest = (HttpWebRequest)WebRequest.Create(targetUrl);

        httpRequest.ContentLength = postBytes.Length;
        httpRequest.Method = "POST";

        using (var requestStream = httpRequest.GetRequestStream())
            requestStream.Write(postBytes, 0, postBytes.Length);

        var httpResponse = httpRequest.GetResponse();

        using (var responseStream = httpResponse.GetResponseStream())
            if (responseStream != null)
                using (var responseStreamReader = new StreamReader(responseStream))
                {
                    var serverResponse = responseStreamReader.ReadToEnd();
                } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-19T11:48:19.413

另一个解决方案：

```
// you can get the correct encoding from your site's response headers
Encoding encoding = Encoding.UTF8;
string targetUrl = "http://example.com";
var request = (HttpWebRequest)WebRequest.Create(targetUrl);

var formData = new Dictionary<string, object>();
formData["authenticity_token"] = "pkhn7pwt3QATOpOAfBERZ+RIJ7oBEqGFpnF0Ir4RtJg=";
formData["question[question_text]"] = "TEST TEST TEST";

bool isFirstField = true;
StringBuilder query = new StringBuilder();
foreach (KeyValuePair<string, object> field in formData)
{
    if (!isFirstField)
        query.Append("&");
    else
        isFirstField= false;

    query.AppendFormat("{0}={1}", field.Key, field.Value);
}

string urlEncodedQuery = Uri.EscapeDataString(query.ToString());
byte[] postData = encoding.GetBytes(urlEncodedQuery);

request.ContentLength = postData.Length;
request.Method = "POST";
request.ContentType = "application/x-www-form-urlencoded";  

using (BinaryWriter bw = new BinaryWriter(request.GetRequestStream()))
    bw.Write(postData);

var response = request.GetResponse() as HttpWebResponse;
// TODO: process response 
```

# regex - 正则表达式使用 rel=attachment 更改字符串的 url

> ID：12973042
> 
> 赞同：-1
> 
> 时间：2012-10-19T11:13:16.537
> 
> 标签：regex

我有一个这样的网址

```
<a href="https://www.mysite.com/blog/?attachment_id=638" rel="attachment wp-att-638"> 
```

如何创建正则表达式以仅匹配 url 并替换它？正则表达式应仅匹配 rel 具有附加值的位置，如上所示。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T11:16:19.893

尝试：

```
/[<]a[^>]+(?:(?:href=["]([^"]+)["][^>]+rel)|(?:rel[^>]+href=["]([^"]+)["]))/ 
```

索引 1 或 2 处的子匹配将包含 url。

# ios - 为什么图像被旋转，通过调用 CGContextDrawImage

> ID：12973045
> 
> 赞同：0
> 
> 时间：2012-10-19T11:13:43.803
> 
> 标签：ios, cgcontext

为什么图像被旋转，通过调用 CGContextDrawImage。感谢您的帮助。

```
// Initialization code
UIImage *img = [UIImage imageNamed:@"logo.png"];
UIImagePNGRepresentation(img);
_image_ref = img.CGImage;

// Drawing code
CGContextRef context = UIGraphicsGetCurrentContext();
CGRect img_rect = CGRectMake(20, 40, 100, 150);
CGContextDrawImage(context, img_rect, _image_ref); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T11:16:51.953

核心图形的坐标系不像UIKit，需要计算正确的坐标。 [http://blog.ddg.com/?p=10](http://blog.ddg.com/?p=10)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-04-03T11:54:33.937

按照[这个](https://stackoverflow.com/a/511199/4219574)解释。我创建了允许在一个上下文中使用自定义矩形绘制多个图像的解决方案。

```
func foo() -> UIImage? {
    let image = UIImage(named: "back.png")!

    let contextSize = CGSize(width: 500, height: 500)
    UIGraphicsBeginImageContextWithOptions(contextSize, true, image.scale)
    guard let ctx = UIGraphicsGetCurrentContext() else { return nil }
    guard let cgImage = image.cgImage else { return nil}

    //Start code which can by copy/paste
    let imageRect = CGRect(origin: CGPoint(x: 200.0, y: 200.0), size: image.size) //custom rect
    let ty = imageRect.origin.y + imageRect.size.height //calculate translation Y
    let imageRectWithoutOriginY = CGRect(origin: CGPoint(x: imageRect.origin.x, y: 0), size: imageRect.size)
    ctx.translateBy(x: 0.0, y: ty) //prepare context for custom rect
    ctx.scaleBy(x: 1.0, y: -1.0)

    ctx.draw(cgImage, in: imageRectWithoutOriginY) //draw image

    ctx.translateBy(x: 0.0, y:-ty) //restore default context setup (so you can select new area to place another image)
    ctx.scaleBy(x: 1.0, y: -1.0)
    //End code which can by copy/paste

    let result = UIGraphicsGetImageFromCurrentImageContext()
    UIGraphicsEndImageContext()

    return result
} 
```

图像示例：

[![在此处输入图像描述](../Images/556ffc719bf3af7a4c79abd16970586b.png)](https://i.stack.imgur.com/4s7TW.png)

我知道它可以重构。为了更清楚，我复制了代码。

# iphone - 如果结构不适用于 NSDate 验证

> ID：12973059
> 
> 赞同：0
> 
> 时间：2012-10-19T11:14:07.537
> 
> 标签：iphone, if-statement, nsdate

这是我检查两个`NSDate`对象是否具有值的代码，但问题是这个结构不起作用，我尝试将`if`语句更改为 example `oldDate == nil`，但这也不起作用。有什么想法吗？

```
 if (!oldDate && !newDate) {
        NSLog(@"oldDate & newDate are empty");
    }
    else {
        NSLog(@"oldDate & newDate have values");
    }

    if (!oldDate) {
        NSLog(@"oldDate is empty but newDate has a value");
    }
    else if (!newDate) {
        NSLog(@"newDate is empty but oldDate has a value");
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T11:16:59.707

您有两个执行的 if/else 块。但你只想拥有一个：

```
if (!oldDate && !newDate) {
    NSLog(@"oldDate & newDate are empty");
} else if (!oldDate) {
    NSLog(@"oldDate is empty but newDate has a value");
} else if (!newDate) {
    NSLog(@"newDate is empty but oldDate has a value");
} else {
    NSLog(@"oldDate & newDate have values");
} 
```

# web-services - 通过 SharePoint 列表 Web 服务查询日历列表。

> ID：12973063
> 
> 赞同：0
> 
> 时间：2012-10-19T11:14:34.093
> 
> 标签：web-services, sharepoint, sharepoint-2010, calendar

我正在尝试通过列表 Web 服务查询 SharePoint 日历列表，以获取当月发生的所有事件。我得到的结果非常断断续续。使用 SharePoint 对象模型查询时，我没有遇到任何相同的问题。我已经粘贴了下面的代码。有人可以帮我吗？谢谢。

```
 var soapEnv =
  "<soapenv:Envelope xmlns:soapenv='http://schemas.xmlsoap.org/soap/envelope/'> \
        <soapenv:Body> \
             <GetListItems xmlns='http://schemas.microsoft.com/sharepoint/soap/'> \
                <listName>Calendar</listName> \
                <query> \
                  <Query> \
                    <Where> \
                      <DateRangesOverlap> \
                       <FieldRef Name='EventDate' /> \
                       <FieldRef Name='EndDate' /> \
                       <FieldRef Name='RecurrenceID' /> \
                       <Value Type='DateTime'><Week /></Value> \
                      </DateRangesOverlap> \
                    </Where> \
                  </Query> \
                </query> \
                <queryOptions> \
                 <QueryOptions> \
                  <ExpandRecurrence>True</ExpandRecurrence> \
                  <CalendarDate>" + calendarDate + "</CalendarDate> \
                 </QueryOptions> \
                </queryOptions> \
            </GetListItems> \
        </soapenv:Body> \
    </soapenv:Envelope>"; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-11-27T09:33:22.617

你检查过这条线吗？

```
<Value Type='DateTime'><Week /></Value> 
```

我认为应该是

```
<Value Type='DateTime'><Month /></Value> 
```

请注意，它还将返回上个月末的某些日子的事件，以及下月初的某些事件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T11:12:56.223

声明 ... string ddate = SPUtility.CreateISO8601DateTimeFromSystemDateTime(calendarDate );

并使用 ddate 作为 CAML Query 中的输入。

# service - Symfony 2 基础服务配置

> ID：12973066
> 
> 赞同：0
> 
> 时间：2012-10-19T11:14:47.053
> 
> 标签：service, symfony

我们开始在我们的系统中使用 Symfony 2，不是作为一个整体，而是通过提取我们需要的组件并在其上构建我们的框架。我们从这些文章中了解到

[http://fabien.potencier.org/article/50/create-your-own-framework-on-top-of-the-symfony2-components-part-1](http://fabien.potencier.org/article/50/create-your-own-framework-on-top-of-the-symfony2-components-part-1) 并且通过了解 Silex 的工作原理。

我试图找出 Symfony 框架/标准包是如何定义所有 kernel.* 服务的，但即使在搜索所有文件之后，我似乎也无法在任何地方找到它。如果你知道，请给我一个点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T11:36:15.430

Symfony2 框架从 app/AppKernel.php 加载包，并在 vendor/symfony/src/Bundle/FrameworkBundle/Resources/config/*.xml 中定义全局服务

# xpath - 中继器（新重复）控件内的计算

> ID：12973067
> 
> 赞同：0
> 
> 时间：2012-10-19T11:14:47.613
> 
> 标签：xpath, orbeon, xforms

Orbeon 表单构建器中的表单包含一个重复控件（新重复）。假设重复控件（新重复）的每一行（或重复）上有三个文本控件。每行上的前两个文本控件包含数值。我想要在运行时将前两个文本控件的乘积带到第三个文本控件而没有任何事件。运行时将有多个重复次数，即行可能会增加，但对于每个计算，在运行时和每个计算都会反映出来前两个的行产品必须在第三个上查看

我使用了以下代码：

```
if ($quantity castable as xs:double and $price castable as xs:double)
then $quantity * $price
else 'n/a' 
```

当转发器控件中只有一行时，可以使用此 xpath 表达式。但是在添加新行时，即在运行时增加重复次数时，第三列的控件的所有结果都会更改为 else 值（“n/a ”）。这仅适用于中继器控件的单行（新重复）。因为对于每次重复，必须分别计算每一行的值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T13:21:24.000

假设这是您的节点，每行重复

```
<repeater>
    <quantity></quantity>
    <price></price>
    <product></product>
</repeater> 
```

计算乘积的 Xpath 表达式为

```
if(../quantity castable as xs:double and  ../price castable as xs:double) 
    then ../quantity * ../price
    else 'N/A' 
```

此表达式在用于计算`<product>`节点时会在每一行上产生乘积，并且不需要基于事件的操作，因为它已写入节点的绑定定义中。

希望这能回答你所有的问题

# javascript - 检查鼠标点击 iframe

> ID：12973068
> 
> 赞同：0
> 
> 时间：2012-10-19T11:14:49.543
> 
> 标签：javascript, jquery, iframe

当鼠标单击 iframe 时，如何检查 javascript，因为 iframe 不支持“on”事件？

那是我的 iframe：

我使用这个 jquery 代码：

$('#ifr31').bind('click', function(event) { alert(1) });

但是当我点击 iframe 时什么都不提醒？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T11:18:07.480

取自这个答案：

[https://stackoverflow.com/a/1609808/561545](https://stackoverflow.com/a/1609808/561545)

> iframe 没有“onclick”事件，但您可以尝试捕捉 iframe 中文档的点击：
> 
> document.getElementById("iframe_id").contentWindow.document.body.onclick = function() { alert("iframe clicked"); }
> 
> 编辑虽然这不能解决您的跨站点问题，但 FYI jQuery 已更新为与 iFrame 一起使用：
> 
> $('#iframe_id').bind('click', function(event) { });

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T11:19:06.010

如果同一来源，您可以使用 `$('#ifame').bind('click', function(event) { });`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-19T11:21:15.633

仅适用于同一域上的 iframe：

```
$('body', $('select-your-iframe-here').contents()).click(function(event) {
  console.log('Clicked! ' + event.pageX + ' - ' + event.pageY);
}); 
```

# android - 传入短信的编码

> ID：12973072
> 
> 赞同：2
> 
> 时间：2012-10-19T11:15:06.193
> 
> 标签：android, encoding, sms

我需要知道如何使用我的[广播接收器类中的](http://developer.android.com/reference/android/content/BroadcastReceiver.html)[SmSMessage](http://developer.android.com/reference/android/telephony/SmsMessage.html)类在我的设备上获取传入短信的编码。

显然我不能使用代码：

```
Object[] pdus = (Object[]) bundle.get("pdus");
msgs = new SmsMessage[pdus.length];

for (int i = 0; i < msgs.length; i++) {
    msgs[i] = SmsMessage.createFromPdu((byte[]) pdus[i]);
    msg_str += msgs[i].getMessageBody();
}
StringBufferInputStream buf = new StringBufferInputStream(msgs[0].getMessageBody());
InputStreamReader reader = new InputStreamReader(buf);
String encode = reader.getEncoding(); 
```

因为这将返回我默认的java编码，即（UTF-8）。

我需要检查短信是否采用**GSM7**、**8-bit**或**UTF-16**编码。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-19T13:16:42.657

我们可以使用[SMSMessage](http://developer.android.com/reference/android/telephony/SmsMessage.html)类的[calculateLength](http://developer.android.com/reference/android/telephony/SmsMessage.html#calculateLength%28java.lang.CharSequence,%20boolean%29)函数。

这将返回一个 int[4]，其中 int[0] 是所需的 SMS 数量，int[1] 是使用的代码单元数，而 int[2] 是直到下一条消息剩余的代码单元数。int[ 3 ] 是应该用于消息的编码类型。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-29T18:31:45.120

Android在[SMSMessage](http://developer.android.com/reference/android/telephony/SmsMessage.html)类中已经有常量定义`ENCODING_16BIT`, `ENCODING_7BIT`, `ENCODING_8BIT`,对应于[3GPP TS 03.38](http://www.3gpp.org/ftp/Specs/html-info/0338.htm)中的数据编码方案。然而，有趣的是它们没有用于公共方法的返回值。`ENCODING_UNKNOWN`

因此，最好的解决方案是：

1.  使用获取整个 SMS TPDU 字节`getPdu()`
2.  根据[3GPP TS 03.40](http://www.3gpp.org/ftp/Specs/html-info/0340.htm)（第 9 节）解析字节以获得 DCS 字节（对于 SMS 传送：1 字节 TP-MTI/MMS/RP/UDHI/SRI，2-12 字节 TP-OA，1 字节 TP-PID，然后是 DCS 字节）
3.  根据 3GPP TS 03.38 第 5 节解析 DCS 字节。

解析 DCS 字节的示例代码如下：

```
public static byte getSmsDcsType(byte dcs)
{
    // Notes:
    // ------
    // the (SMS) DCS value according to 3GPP TS 03.38 / TS 23.038 is coded as follow:
    // 0xxx00xx = GSM 7-bit default alphabet (packed format)
    // 0xxx01xx = 8-bit data (unpacked-format)
    // 0xxx10xx = UCS2 uncompressed format
    // 0xxx11xx = reserved
    // 10xxxxxx = reserved
    // 110xxxxx = GSM 7-bit default alphabet (packed format)
    // 1110xxxx = UCS2 uncompressed format
    // 111100xx = GSM 7-bit default alphabet (packed format)
    // 111101xx = 8-bit data (unpacked-format)
    // 11111xxx = reserved

    if (((byte) (dcs & (byte) 0x8C) == 0x00)
            || ((byte) (dcs & (byte) 0xE0) == (byte) 0xC0)
            || ((byte) (dcs & (byte) 0xFC) == (byte) 0xF0))
    {
        return SmsMessage.ENCODING_7BIT;
    }
    else if (((byte) (dcs & (byte) 0x8C) == 0x04) || ((byte) (dcs & (byte) 0xFC) == (byte) 0xF4))
    {
        return SmsMessage.ENCODING_8BIT;
    }
    else if (((byte) (dcs & (byte) 0x8C) == 0x08) || ((byte) (dcs & (byte) 0xF0) == (byte) 0xE0))
    {
        return SmsMessage.ENCODING_16BIT;
    }

    return SmsMessage.ENCODING_UNKNOWN;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-19T11:19:01.280

我的猜测是 SMS:s通常是用[GSM 03.38](http://en.wikipedia.org/wiki/GSM_03.38)编码的。这可能是 Android 文档提到的“无线电特定编码”。

# matlab - 提高 matlab 可执行文件的启动时间

> ID：12973077
> 
> 赞同：7
> 
> 时间：2012-10-19T11:15:28.723
> 
> 标签：matlab, executable

我已经编译了一个 matlab 独立 exe，我可以在任何安装了 MATLAB Compiler Runtime 的计算机上运行它。

但是启动 exe 需要 20-30 秒！

我怎样才能准确地测量时间，最重要的是 - 我怎样才能将它减少到 1-2 秒。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-19T20:33:29.813

这是从[Yair Altman 的博客](http://undocumentedmatlab.com/)中取出的：

飞溅包装应用程序可以减轻已部署（编译）Matlab 应用程序启动缓慢的大部分痛苦。[可以在此处找到启动窗口解决方案](http://undocumentedmatlab.com/blog/splash-window-for-deployed-applications/)。虽然这样的启动包装器确实很有用，但也可以使用 MCR_CACHE_ROOT 环境变量来实现已编译应用程序启动的实际加速。

通常，MCR 和独立可执行文件会在每次启动时在用户的临时目录中解压缩，并在用户注销时删除。显然，当设置了 MCR_CACHE_ROOT 环境变量时，这些文件只会被解压一次并保留以供以后重用。如果此报告确实属实，这可以显着加快已编译应用程序在后续调用中的启动时间。

在 Linux 上：

```
export MCR_CACHE_ROOT=/tmp/mcr_cache_root_$USER   # local to host
mkdir -p @MCR_CACHE_ROOT
./myExecutable 
```

在 Windows 上：

```
REM set MCR_CACHE_ROOT=%TEMP%
set MCR_CACHE_ROOT="C:\Documents and Settings\Yair\Matlab Cache\"
myExecutable.exe 
```

如果需要，还有一些方法可以在 Windows 上永久设置这个环境变量......

从网络 (NFS) 位置运行可执行文件时，设置 MCR_CACHE_ROOT 尤其重要，因为解压到网络位置可能会很慢。如果可执行文件在不同的机器上并行运行（例如，运行并行程序的计算机集群），那么当不同的集群尝试访问相同的网络位置时，这甚至可能[导致锁定。](http://bioinfo.ittc.ku.edu/faq.php?type=11#47)在这两种情况下，解决方案是将 MCR_CACHE_ROOT 设置为本地文件夹（例如，/tmp 或 %TEMP%）。如果您打算再次重用提取的文件，那么也许您不应该删除提取的文件而是重用它们。否则，只需在可执行文件结束后删除临时文件夹即可。在以下示例中，$RANDOM 是一个返回随机数的 bash 函数：

```
export MCR_CACHE_ROOT=/tmp/mcr$RANDOM
./matlab_executable
rm -rf $MCR_CACHE_ROOT 
```

设置 MCR_CACHE_ROOT 还可用于解决已部署应用程序中的其他性能瓶颈，如[MathWorks 技术解决方案和](http://www.mathworks.com/support/solutions/en/data/1-7RH0IV/)[此处](http://matlab4compbio.blogspot.co.il/2010/04/how-to-solve-mcr-cache-access-problems.html)的相关文章中所述。

在相关问题中，当 Matlab 由于缺少权限而无法写入 MCR 缓存目录时，编译的 Matlab 可执行文件可能会失败，并出现无法访问 MCR 组件缓存错误。这可以通过将 MCR_CACHE_ROOT 设置为[不存在的目录](http://wiki.rcs.manchester.ac.uk/community/MatlabWithCondor#MCR_CACHE_ROOT)或设置为具有全局访问权限的文件夹（/tmp 或 %TEMP% 通常是此类可写文件夹）来避免 - 请参阅[此处](http://www.mathworks.com/matlabcentral/newsreader/view_thread/283432)和[此处](http://www.mathworks.com/matlabcentral/newsreader/view_thread/255547)的相关帖子。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-13T12:58:56.223

如果您使用 deploytool 编译代码，请在路径上的 Project - Settings-Toolboxes 下取消选中您的可执行文件不需要的任何工具箱。我最近遇到了这个问题，上述步骤将可执行文件大小减少了一半，并显着减少了可执行文件的启动时间。

# java - struts2中相同动作的两种方法？

> ID：12973085
> 
> 赞同：0
> 
> 时间：2012-10-19T11:16:02.827
> 
> 标签：java, struts2

我正在尝试使用两种方法（JSON 操作）创建一个操作。我从 JSP 文件中调用它们。如果我尝试在我的代码中将操作值称为“媒体”，它每次都会运行这两种方法。

```
@Action(value="medias", results = {@Result(name="success",type="json")})
public String getMedias(){
     System.out.println("IN METHOD CALL medias"); 
    return SUCCESS;
}

@Action(value="allMediaTypes", results = {@Result(name="success",type="json")})
public String getAllMediaTypes(){
           System.out.println("IN METHOD CALL allMediaTypes"); 
       return SUCCESS;
} 
```

两个方法同时运行，无论从 jsp 调用哪个方法，它都会运行这两个方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T05:23:04.410

不要在你的方法名称前面加上`get`- 这样做有影响。

将它们命名为与您的操作名称相同以保持一致性是一个好主意，即：

```
public String medias() {
    ...
}

public String allMediaTypes() {
    ...
} 
```

# iphone - 如何随机排序一个 NSString

> ID：12973093
> 
> 赞同：0
> 
> 时间：2012-10-19T11:16:24.633
> 
> 标签：iphone, objective-c, ios, macos

```
NSMutableString *str =@"abcdefg123"; 
```

我想将每个字符随机到一个像这样@“f1ad2g3be2”的新字符串。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-19T11:38:37.627

非常简单。首先，您必须将字符分解为要使用的数组。然后你多次交换字母 X，我选择这样做，所以每个字符都会被交换

```
NSString *str =@"abcdefg123";
int length = str.length;
NSMutableArray *letters = [[NSMutableArray alloc] init];
for (int i = 0; i< length; i++) {
    NSString *letter = [NSString stringWithFormat:@"%c", [str characterAtIndex:i]];
    [letters addObject:letter];
}

for (int i = 0; i<length; i++) {
    int value = arc4random() % (length-1);
    NSLog(@"Value is : %i", value);
    [letters exchangeObjectAtIndex:i withObjectAtIndex:value];
}

NSString *results = [letters componentsJoinedByString:@""];
NSLog(@"The string before : %@", str);
NSLog(@"This is the string now : %@", results); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-19T11:24:27.327

```
NSMutableString *str1 = [[NSMutableString alloc]initWithString:str];
NSMutableString *str2 = [[NSMutableString alloc] init];
while ([str1 length] > 0) {
    int i = arc4random() % [str1 length];
    NSRange range = NSMakeRange(i,1);
    NSString *sub = [str1 substringWithRange:range];
    [str2 appendString:sub];
    [str1 replaceOccurrencesOfString:sub withString:@"" options:nil range:range];
}

[str1 release]; 
```

str2 是你想要的

# ruby-on-rails - Tire Elastic 中的自定义分析器无法与 Mongoid 一起使用

> ID：12973099
> 
> 赞同：1
> 
> 时间：2012-10-19T11:16:46.467
> 
> 标签：ruby-on-rails, mongoid, elasticsearch, tire

我仍然做错了什么。有人可以帮助我吗？我想在 Rails + Mongoid 中创建一个带有 ascii 过滤器的自定义分析器。我有一个具有字段名称的简单模型产品。

```
class Product
  include Mongoid::Document

  field :name

  settings analysis: {
      analyser: {
        ascii: {
          type: 'custom',
          tokenizer: 'whitespace',
          filter: ['lowercase','asciifolding']
        }
      }
   }

   mapping do
     indexes :name, analyzer: 'ascii'
   end

end

Product.create(name:"svíčka")
Product.search(q:"svíčka").count #1
Product.search(q:"svicka").count #0 can't find - expected 1

Product.create(name:"svicka")
Product.search(q:"svíčka").count #0 can't find - expected 1
Product.search(q:"svicka").count #1 
```

当我使用 elasticsearch-head 检查索引时，我希望索引的存储没有像“svicka”这样的重音，但索引看起来像这样“Svíčka”。

我究竟做错了什么？

当我用 API 检查它时，它看起来没问题：

```
curl -XGET 'localhost:9200/_analyze?tokenizer=whitespace&filters=asciifolding' -d 'svíčka'

{"tokens":[{"token":"svicka","start_offset":0,"end_offset":6,"type":"word","position":1}]}

http://localhost:9200/development_imango_products/_mapping
{"development_imango_products":{"product":{"properties":{"name":{"type":"string","analyzer":"ascii"}}}}}

curl -XGET 'localhost:9200/development_imango_products/_analyze?field=name' -d 'svíčka'
{"tokens":[{"token":"svicka","start_offset":0,"end_offset":6,"type":"word","position":1}]} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T15:56:48.850

[您可以使用分析 api](http://www.elasticsearch.org/guide/reference/api/admin-indices-analyze.html)检查您实际上是如何索引文档的。

您还需要考虑索引的内容和存储的内容之间存在差异。查询时会返回您存储的内容，这正是您发送给 elasticsearch 的内容，而您索引的内容决定了您在查询时返回的文档。

使用 asciifolding 对您的用例来说是一个不错的选择，它应该返回查询 svíčka 或 svicka 的结果。我想您的设置中只是一个错字：`analyser`应该是`analyzer`. 可能该分析器没有像您期望的那样使用。

**更新**
鉴于您的评论，您还没有解决问题。你能检查一下你的映射是什么样子的吗（`localhost:9200/index_name/_mapping`）？您使用分析 api 的方式不是很有用，因为您手动提供文本分析链，但这并不意味着该链按您期望的方式应用于您的字段。如果您提供这样的字段名称会更好：

curl -XGET 'localhost:9200/index_name/_analyze?field=field_name' -d 'svíčka'

这样分析 api 将依赖于该字段的实际映射。

**更新 2**
在您确保正确提交了映射并且一切正常之后，我注意到您没有指定要查询的字段。如果您不指定它，您将查询[`_all`](http://www.elasticsearch.org/guide/reference/mapping/all-field.html)特殊字段，该字段默认包含您要编制索引的所有字段，并且默认使用[`StandardAnalyzer`](http://www.elasticsearch.org/guide/reference/index-modules/analysis/standard-analyzer.html). 您应该使用以下查询：`name:svíčka`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-20T22:35:49.857

elasticsearch 需要在单个 api 调用中进行设置和映射。我不确定它是否在轮胎文档中提到，但我遇到了类似的问题，在设置轮胎时同时使用设置和映射。以下应该工作：

```
class Product
  include Mongoid::Document
  # include tire stuff

  field :name

  settings(self.tire_settings) do
    mapping do
      indexes :name, analyzer: 'ascii'
    end
  end

  # this method is just created for readablity, 
  # settings hash can also be passed directly
  def self.tire_settings
    {
      analysis: {
        analyzer: {
          ascii: {
            type: 'custom',
            tokenizer: 'whitespace',
            filter: ['lowercase','asciifolding']
          }
        }
      }
    }
  end
end 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-22T12:38:25.223

1.  正如@rubish 建议的那样，您的设置/映射符号不正确，请检查[https://github.com/karmi/tire/blob/master/lib/tire/model/indexing.rb](https://github.com/karmi/tire/blob/master/lib/tire/model/indexing.rb)中的文档（毫无疑问，文档应该更好)

2.  总是，总是，总是检查索引的映射，看看是否应用了你想要的映射。

3.  正如@javanna 建议的那样，使用 Explain API 来检查您的分析链如何快速工作，而无需存储文档、检查结果等。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-19T10:34:47.073

请注意，在模型中添加两​​条线以使其可通过轮胎进行搜索非常重要。你的模型应该看起来像

```
 class Model
    include Mongoid::Document
    include Mongoid::Timestamps
    include Tire::Model::Search
    include Tire::Model::Callbacks

    field :filed_name, type: String

    index_name "#{Tire::Model::Search.index_prefix}model_name"
    settings :analysis => {
        :analyzer => {
            "project_lowercase_analyzer" => {
                "tokenizer" => "keyword",
                "filter"  =>  ["lowercase"],
                "type" => "custom"
                }
            },
        }  do
     mapping do
       indexes :field_name, :boost => 10, :type => 'String', :analyzer => 'standard', :filter => ['standard', 'lowercase','keyword']
       end
     end

    def self.search( params = {} )
      query = params[:search-text_field_name_from_form]
      Model.tire.search(load: true, page: params[:page], per_page: 5) do
      query { string query, default_operator: "AND" } if query.present?
    end
  end 
```

您可以更改 index_name（应该是唯一的）和分析器

你的控制器就像

```
def method_name
  @results = Model.search( params ).results
end 
```

您可以在视图中使用@results。希望这可以帮助你。

# javascript - 加载事件在脚本加载之前触发服务器端脚本

> ID：12973106
> 
> 赞同：2
> 
> 时间：2012-10-19T11:17:00.627
> 
> 标签：javascript

我有一个具有 onload 事件的 iframe。此事件称为我放入服务器端脚本的函数 (iframe_load)。看来，当我的屏幕启动时，在服务器端脚本加载之前触发了 onload 事件，并且由于找不到该函数而出现错误。

我通过更改 onload 事件以在客户端脚本中调用检查函数 (iframe_check_load) 解决了这个问题。这将检查服务器端脚本中是否存在参数，如果找到，它将调用原始函数 (iframe_load)。

但是理想情况下，我不希望有这个检查功能并将客户端代码保持在最低限度。有没有办法可以在 onload 事件中添加一些代码来执行此检查，而无需使用检查功能？

我当前的代码：

```
function iframe_check_load(ctrl) {
   if(typeof iframe_flag != "undefined"){
     iframe_load();                               
   }            
}

<IFRAME id=iFrame2 onload=iframe_check_load() ></IFRAME> 
```

我相信一定有更好的方法来做这一切，请放轻松，因为我还在学习 JS！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T14:57:17.980

由于无法保证脚本在帧之前加载，反之亦然，因此必须至少执行一项检查，以了解在加载帧时外部脚本是否已经可用。

如果框架在外部脚本可用之前加载，您可以使用`ONLOAD`加载外部脚本的元素上的属性来通知它已经加载。这将确保`iframe_load`始终调用 。假设没有网络错误。

```
<SCRIPT>
//the saved "ctrl" parameter for iframe_load if
//the frame is loaded before custom_scripts.js.
var ctrlParam; //undefined as default

//script loaded handler for custom_scripts.js
function customScriptLoaded() {
    //call iframe_load only if ctrlParam is not undefined.
    //i.e.: frame is already loaded.
    //will do nothing otherwise. leave it to iframe_check_load.
    if (typeof ctrlParam != "undefined") {
        iframe_load(ctrlParam);
    }
}

//check whether it's safe to call iframe_load.
//assuming that "iframe_flag" is defined by custom_scripts.js.
function iframe_check_load(ctrl) {
    if (typeof iframe_flag != "undefined") {
        //custom_scripts.js already loaded.
        //call iframe_load now.
        iframe_load(ctrl);
    } else {
        //custom_scripts.js not yet loaded.
        //save parameter and defer call to iframe_load.
        //iframe_load will be called by customScriptLoaded.
        //ctrl parameter must not be undefined in order to work.
        console.log('Error: ctrl parameter of iframe_check_load is undefined. iframe_load will never be called.');
        ctrlParam = ctrl;
    }
}
</SCRIPT>

<!--Note: Don't forget to duble-quotes attribute values-->
<SCRIPT id="custom_scripts" type="text/javascript" src="htmlpathsub/custom/custom_scripts.js" UserSuppliedFullPath="1" onload="customScriptLoaded()"></SCRIPT>

<!--Using "this" (the IFRAME element) as the "ctrl" parameter-->
<IFRAME id="iFrame2" onload="iframe_check_load(this)"></IFRAME> 
```

# android - 将数据从广播接收器传递到活动

> ID：12973107
> 
> 赞同：1
> 
> 时间：2012-10-19T11:17:07.107
> 
> 标签：android, android-activity, broadcastreceiver, communication

我有一个正在监听 WifiManager.SCAN_RESULTS_AVAILABLE_ACTION 的广播接收器。在该接收器中，我过滤所有可用网络并返回具有特定 SSID 的网络列表。我需要将该列表传递回我的应用程序的 MainActivity。我知道我可以为我的广播接收器创建一个内部类，但我更喜欢创建一个单独的类以便更好地组织。

我正在考虑在我的 mainActivity 类中创建一个静态变量，然后设置该值。这是一个好习惯吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T11:31:35.757

共享和访问跨 Activites 和其他类的信息的一种好方法是使用应用程序对象。只要您有应用程序上下文，就可以从所有类访问应用程序对象。

请参阅有关应用程序对象的本教程：[如何使用应用程序对象](http://www.intridea.com/blog/2011/5/24/how-to-use-application-object-of-android)

**活动中的用法：**

MyApplicationObject app = (MyApplicationOjbject)getApplicationContext();

app.setMyVariable(变量);

**从活动之外的其他课程**：

```
MyApplicationObject app = (MyApplicationOjbject)context.getApplicationContext();
app.setMyVariable(variable); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-19T14:38:13.570

[Stefan](https://stackoverflow.com/questions/12973107/pass-data-from-broadcast-receiver-to-activity/12976561#answer-12973452)是对的，这个静态链接并不漂亮。您有时可以拥有同一活动的多个实例（重新创建时，直到垃圾收集器收集它）。或发生多个广播，覆盖您的静态变量值。

如果您不想使用匿名内部类，则可以重写构造函数并传递对当前活动的引用，您可以在处理时使用该引用发送结果`onReceive()`。完成后只需清理此引用以避免泄漏您的活动。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-19T11:32:23.743

我成功地使用了相同的技术。有一次让我感到痛苦的是，当我没有考虑到用户可以倾斜屏幕并重新创建活动时。我没有检查静态变量是否已经设置并反复替换它。请注意这一点。

我能想到的另一种技术是在活动和广播接收器之间共享回调。接收者调用回调，该回调存储对正确活动的引用并调用 runOnUiThread(action) 以进行 UI 更新。引用应该更新 onStart() 和 onStop()。我从来没有真正使用过这种模式。洗澡的时候想了想：）

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-19T11:37:03.790

我建议不要使用静态变量来传递信息。如果您的主要活动是从接收器接收信息的唯一对象，则将`BroadcastReceiver`本地活动设为主要活动。这样做会将那些共同承担责任的元素分组。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-09-28T11:51:42.787

这就是我从广播中获取数据的方式，更多的代码，但它的方式更容易阅读，以防复杂的事情发生。

```
Intent intent = new Intent(context, BroadcastReciever.class);
SimpleResultReciever resultReciever = new SimpleResultReciever(new Handler())
         .setCallback(new OnLocationCallback() {
             @Override
             public void onRecieverLocation(Location location) {
                  if(location != null) {
                        MainActivity.this.location = location;
                   }
             }
         });
intent.putExtra(SimpleResultReciever.KEY_RESULT_RECIEVER, resultReciever);
//call intent or create pending intent you will use broadcast stuff.

public class SimpleResultReciever extends ResultReceiver {

    public final static String KEY_RESULT_RECIEVER = "bundle.broadcast.reciever.callback";

    private OnLocationCallback callback;

    public LocationResultReciever setCallback(OnLocationCallback callback) {
        this.callback = callback;
        return this;
    }

    /**
     * Create a new ResultReceive to receive results.  Your
     * {@link #onReceiveResult} method will be called from the thread running
     * <var>handler</var> if given, or from an arbitrary thread if null.
     *
     * @param handler
     */
    public LocationResultReciever(Handler handler) {
        super(handler);
    }

    @Override
    protected void onReceiveResult(int resultCode, Bundle resultData) {
        super.onReceiveResult(resultCode, resultData);
        Location location = resultData.getParcelable(LocationManager.KEY_LOCATION_CHANGED);
        if(callback != null) {
            callback.onRecieverLocation(location);
        }
    }
}

public class LocationBroadcastReciever extends BroadcastReceiver {

    public LocationBroadcastReciever() {
        super();
    }

    @Override
    public void onReceive(Context context, Intent intent) {
        Bundle extra = intent.getExtras();
        Location location = extra.getParcelable(LocationManager.KEY_LOCATION_CHANGED);
        ResultReceiver res = extra.getParcelable(LocationResultReciever.KEY_RESULT_RECIEVER);
        if(res != null) {
            Bundle data = new Bundle();
            data.putParcelable(LocationManager.KEY_LOCATION_CHANGED, location);
            res.send(Activity.RESULT_OK, data);
        }
    }
} 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-10-19T11:32:16.280

如果您从接收方启动主活动，然后您可以使用 putextra() 将列表传入，然后您可以在主活动中获取该列表。

像这样的东西。

Intent 意图 = new Intent(ctx.getApplicationContext(), targetActivity); intent.putCharSequenceArrayListExtra（名称，值）；

# nhibernate - 避免 NHibernate 中的重复条目

> ID：12973108
> 
> 赞同：0
> 
> 时间：2012-10-19T11:17:20.720
> 
> 标签：nhibernate, duplicates, intersect

我正在尝试使用 NHibernate 将收到的消息存储在数据库中。但是，有可能两次收到相同的消息，在这种情况下，我不想将副本保存在数据库中。我的第一个想法是执行以下操作：

```
// in SaveRange(IEnumerable<Message> messages
var alreadyStoredMessages = session.Query<Message>().Intersect(messages);

var newMessages = messages.Except(alreadyStoredMessages); 
```

但是，NHibernate 似乎不支持 Intersect 所以这将导致异常。我知道我总是可以获取所有消息，将它们转换为列表或数组，然后进行相交，但这不会很有效。

Message 类实现了 IEquatable，它还覆盖了 GetHashCode() 和 Equals(object obj)。相等性取决于几个属性（时间戳、几个字符串等）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T11:58:24.343

如果所有新消息同时出现，请使用过滤器：

```
var alreadyStoredMessages = session.QueryOver<Message>()
    .WhereRestrictionOn(m => m.timestamp).In(messages.Select(m => m.timeStamp))
    .AsEnumerable()
    .Intersect(messages);

var newMessages = messages.Except(alreadyStoredMessages).ToList(); 
```

假设重复的消息紧随其后：保存最后 n 条收到消息的缓冲区并查看它们。

```
var lastMessages = new Queue<Message>(100);
while(true)
{
    var message = GetNextMessage();
    if (!lastMessages.Contains(message))
    {
        lastMessages.Enqueue(message);
        session.Save(message);
        if (lastMessages.Count >= 100);
            lastMessages.Dequeue();
    }
} 
```

# jpa - 属性依赖和 JPA

> ID：12973110
> 
> 赞同：0
> 
> 时间：2012-10-19T11:17:31.503
> 
> 标签：jpa, properties, dependencies

我必须模拟一种情况，其中我有一个可以是四个值之一的实体，并且这四个状态中的两个可以有附加评论。

我的第一个想法是定义一个类，它有两个成员字段，一个是 Enum，一个是 String。枚举有四个元素。但我也必须对约束进行建模，即只能在值 2 和 3 上设置注释。

你会如何建模？JPA 上的四种不同实体和继承？还是像上面的枚举示例一样？

非常感谢安德烈

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T11:39:14.437

是的，你的解决方案没问题。只需像这样实现设置器：

```
public void setComment(String comment) {
    if (state != State.STATE1 && state != State.STATE2) {
        throw new IllegalStateException("A comment can't be set when the state is " + state);
    }
} 
```

使用继承不是一个好主意：当一个实体具有给定的类型时，它不能变成其他的东西。因此，使用继承策略更改状态是不可能的。

# mysql - 带有条件的Mysql更新查询

> ID：12973111
> 
> 赞同：1
> 
> 时间：2012-10-19T11:17:38.350
> 
> 标签：mysql

我有一张包含内容的表格。表结构如下。我想用一些条件更新表格。我会尝试更新这个，但我不能是 MySQL 的新手，请帮助我..

我的表结构：

```
Emp_id  Emp_Name  Join_date  confirm_date  resign_date  status   con_status
001     arun      2011-01-12 2012-06-12                   A      confirmed 
002     aruna     2011-02-12 2012-11-12    2012-04-10     D      Not-confirmed
002     aruna     2011-06-12 2012-12-12                   A      Not-confirmed
004     vinos     2011-03-12 2012-10-01                   A      //null value 
```

我想在日期时像这样更新 con_status

```
Emp_id  Emp_Name  Join_date  confirm_date  resign_date  status   con_status
001     arun      2011-01-12 2012-06-12                   A      confirmed 
002     aruna     2011-02-12 2012-11-12    2012-04-10     D      Not-confirmed 
002     aruna     2011-06-12 2012-12-12                   A      Not-confirmed
004     vinos     2011-03-12 2012-10-01                   A      confirmed 
```

我的情况就是这样。

```
if(con_status == null)
{
  if(confirm_date > Datetime.Now)and (status='Active')
  {
    //update con_status as confirmed
  }
}
else if(con_status == Not-confirmed)
{
   if(confirm_date > Datetime.Now)and (status='Active')
  {
    //update con_status as confirmed
  }
  else
  {
    maintain the previous status
  }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T11:58:46.723

```
UPDATE my_table 
SET con_status = 'confirmed' 
WHERE status = 'Active' AND NOW() < confirm_date AND (con_status IS NULL OR con_status = 'Not-confirmed') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T11:21:04.743

```
update table
set con_status='confirmed'
where
status='Active' and now()<confirm_date and  con_status is null

update table
set con_status='confirmed'
where
status='Active' and now()<confirm_date and  con_status ='Not-confirmed' 
```

# mysql - SQL插入错误VB.NET

> ID：12973112
> 
> 赞同：1
> 
> 时间：2012-10-19T11:17:45.310
> 
> 标签：mysql, sql, vb.net

使用以下代码运行 vb 应用程序。我的'INSERT INTO' sql 查询不断出错，谁能看到我做错了什么？这是错误 - INSERT INTO 语句中的语法错误。

```
 connetionString = "Provider=Microsoft.Jet.OLEDB.4.0; Data Source = C:\Users\Dave\Documents\joblist.mdb;"

            connection = New OleDb.OleDbConnection(connetionString)

            Sql = "INSERT INTO jobList (StaffID, staffName, staffLastName, note, fault, section, techID, jobcomplete) VALUES ('" & staffid & "','" & staffFN & "','" & staffLN & "','" & staffNotes & "','" & staffFault & "', '" & staffSection & "', '" & techId & "','" & ava & "')"
            connection.Open()
            oledbAdapter.UpdateCommand = connection.CreateCommand
            oledbAdapter.UpdateCommand.CommandText = Sql
            oledbAdapter.UpdateCommand.ExecuteNonQuery()
            connection.Close()
            Me.JobListTableAdapter.Fill(Me.JoblistDataSet2.jobList) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T11:30:09.517

我假设您应该使用[`InsertCommand`](http://msdn.microsoft.com/en-us/library/bb337632.aspx)而不是[`UpdateCommand`](http://msdn.microsoft.com/en-us/library/system.data.oledb.oledbdataadapter.updatecommand.aspx)属性，因为您正在插入。

```
oledbAdapter.InsertCommand.CommandText = "INSERT INTO jobList (StaffID, staffName, .... 
```

请注意，您对 SQL 注入开放，应该使用它[`Parameters`](http://msdn.microsoft.com/en-us/library/system.data.oledb.oledbparameter%28v=vs.80%29.aspx)。您还应该使用[`Using`](http://msdn.microsoft.com/en-us/library/htd05whh.aspx)语句来确保即使出现错误也关闭连接。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T11:34:39.220

`Note`并且`Section`是[Jet SQL 中的保留字](http://support.microsoft.com/kb/321266/en-us) 您需要用方括号将它们封装起来

```
Sql = "INSERT INTO jobList (StaffID, staffName, staffLastName, [note], fault, " +
      "[section], techID, jobcomplete) VALUES (......)" 
```

这是您语法错误的根源，但是.....
除此之外，您还有很多问题：

*   正如 Tim Schmeiter 所指出的，您使用 update 命令而不是 insert 命令。
*   您将用户的输入文本连接起来形成一个 sql 字符串。这会导致 sql 注入攻击和正确解析文本的问题（撇号、无效日期、无效数字等）
*   `staffID`并且`techID`似乎是数据库中的数字字段，但是您将它们的值像字符串一样放在单引号内。如果它们是数字，您将在那里得到另一个可能的错误。

# mysql - mysql事件从两个不同的表中删除

> ID：12973114
> 
> 赞同：1
> 
> 时间：2012-10-19T11:17:52.753
> 
> 标签：mysql

我有这个 Mysql 事件，每分钟运行一次，以删除超过一个小时且尚未验证的记录。

所以 table1 有（示例）

```
userid | timestamp
------------------
1      | >1 Hr
2      | <1 Hr
3      | <1 Hr
4      | >1 Hr 
```

所以在这里，userid 1 & 4 将被删除。

我还需要从另一个名为配置文件的表中删除数据，其中用户注册时会自动插入用户 ID 和其他数据。所以：

所以 table2 有

```
userid | ProfileName
------------------
1      | James
2      | Kirk
3      | Lars
4      | Robert 
```

在这里，在上表中，1 和 4 也需要被删除，因为它们已从上表中删除。此表中没有时间戳列（我无法添加）。

要删除数据，我会：

```
delete from table1 where rs_user_sg_ts >= date_sub(NOW(), interval 1 hour); 
```

如何使用同一事件一次性从两个表中删除数据？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T11:28:04.773

```
 DELETE a.*, b.* 
  FROM table1 a 
  JOIN table2 b 
    ON a.user_id = b.user_id 
    WHERE a.user_id in 
            (
                  select user_id from table1 
                  where rs_user_sg_ts >= date_sub(NOW(), interval 1 hour
             ); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T11:27:55.423

```
DELETE t1, t2
FROM table1 AS t1 
INNER JOIN table2 AS t2 ON t1.userid = t2.userid 
WHERE t1.rs_user_sg_ts >= date_sub(NOW(), interval 1 hour) 
```

有关多表删除语法，请参阅[http://dev.mysql.com/doc/refman/5.0/en/delete.html](http://dev.mysql.com/doc/refman/5.0/en/delete.html)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-19T11:28:08.270

在我看来，您不应该在单个查询中从多个表中删除。

如果您仍然感兴趣，请使用以下内容：

多表语法：

```
DELETE [LOW_PRIORITY] [QUICK] [IGNORE]
tbl_name[.*] [, tbl_name[.*]] ...
FROM table_references
[WHERE where_condition] 
```

参考：http : [//dev.mysql.com/doc/refman/5.6/en/delete.html](http://dev.mysql.com/doc/refman/5.6/en/delete.html)

希望这有帮助！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-19T11:30:53.930

您可以从多个表中删除，如下所示：

```
delete t1,t2 
from `table1` t1, `table1`t2
where t1.userid=t2.userid
and t1.rs_user_sg_ts >= date_sub(NOW(), interval 1 hour) 
```

# php - 来自 PHP 的 MySQL 插入

> ID：12973117
> 
> 赞同：2
> 
> 时间：2012-10-19T11:18:01.577
> 
> 标签：php, mysql, forms, insert

今天早上我的插入语句有点麻烦。是的，我正在使用已弃用的 mysql_query 函数。我的插入语句如下所示：

```
$query3 = "INSERT INTO ".$db_prefix ." offer_det 
          (fname, lname, 10k, 14k, 18k, 21k, 22k, 24k, 925, coins, bars) 
           VALUES '".$fname."', '".$lname."', '".$_10k."', '".$_14k."', 
                  '".$_18k."', '".$_21k."', '".$_22k."', '".$_24k."', 
                  '".$_925."', '".$coins."', '".$bars."')";

$result3 = mysql_query($query3); 
```

我的 PHP 表单值是插入语句第一部分中列出的所有变量，“fname”等。

我的变量设置为从帖子中提取，并列为进入插入的值。

我必须在变量开始之前将它们更改为下划线，我猜 PHP 不喜欢这样。

我的问题：

1.  那些 10k、14k 等是 mysql 表行名吗？
2.  我在这里遗漏了一个问题吗？

`fname`和的数据类型`lname`是 varchar，10k 直通条的数据类型是十进制 (7,3)。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-19T11:21:23.977

`925`必须使用反引号引用列名。

```
(`fname`, `lname`, `10k`, `14k`, `18k`, `21k`, `22k`, `24k`, `925`, `coins`, `bars`) 
```

您可能还需要考虑将列名更改为其他名称，以避免将来出现更多类似问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-19T11:23:52.590

`925`您应该根据[MySQL Schema Object names](http://dev.mysql.com/doc/refman/5.0/en/identifiers.html)引用列名

如此正确：

```
$query3 = "insert into ".$db_prefix."offer_det (fname, lname, 10k, 14k, 18k, 21k, 22k, 24k, `925`, coins, bars)
values 
('".$fname."', '".$lname."', '".$_10k."', '".$_14k."', '".$_18k."', '".$_21k."', 
'".$_22k."','".$_24k."', '".$_925."', '".$coins."', '".$bars."')"; 
```

另一个建议：你应该[逃避传入的字符串](http://php.net/manual/en/function.mysql-real-escape-string.php)，因为 SQL 注入是一件令人讨厌的事情......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-19T11:26:49.367

使用QUERY，如下所示..

```
$query3 = "insert into ".$db_prefix."offer_det (fname, lname, 10k, 14k, 18k, 21k, 22k, 24k, 925, coins, bars) 
       values ('$fname', '$lname', '$_10k', '$_14k', '$_18k', '$_21k', '$_22k', 
       '$_24k', '$_925', '$coins', '$bars')";
$query_exec=mysql_query($query3) or die(mysql_error()); 
```

对于插入变量，您只需要使用单个代码..

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-19T11:27:08.113

我可以大胆地建议改变你的实施吗？

```
/// put your vars in an easier to use format
$insert = array(
  'fname' => $fname,
  'lname' => $lname,
  '10k' => $_10k,
  /* and so on ...*/
);

/// considering you are using mysql_query, use it's escape function
foreach ( $insert as $field => $value ) {
  $insert[$field] = mysql_real_escape_string($value);
}

/// pull out the keys as fields and the values as values
$keys = array_keys($insert);
$vals = array_values($insert);

/// the following should auto backtick everything... however it should be
/// noted all the values will be treated like strings as you were doing anyway
$query = "INSERT INTO `" . $db_prefix . "offer_det` " . 
         "(`" . implode('`,`', $keys) . "`) " . 
         "VALUES ('" . implode("','", $vals ) .  "')"; 
```

# jquery - 如何使用 jquery 实现按钮的悬停效果？

> ID：12973120
> 
> 赞同：2
> 
> 时间：2012-10-19T11:18:06.913
> 
> 标签：jquery

我正在尝试使用 jquery 制作带有后退按钮的向下钻取菜单，因为我想在按钮上实现悬停效果，因为我正在使用以下 jquery 代码-

```
 <script type="text/javascript">    
         $(function(){
               $('#hierarchy').menu({
                     content: $('#hierarchy').next().html(),
                     crumbDefaultText: ' '
               });

               $('#hierarchycrumb').menu({
                      content: $('#hierarchycrumb').next().html(),
                      backLink: false
               });
        }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T11:25:24.377

试试这个代码.... $('.fg-button').hover(function(){ $(this).removeClass('ui-state-default').addClass('ui-state-focus'); }, );

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-19T11:23:36.210

如果你想用 jQuery 实现悬停功能，你可以使用类似的东西：

```
$('#hierarchy').hover(function(){
 // Do something here
}); 
```

或者，也许您可​​以更准确地解释您正在尝试做的事情，但不能用代码示例来弥补太多的上下文。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-19T11:23:42.250

考虑使用 CSS 来定义悬停状态的按钮样式。

```
button:hover{
 color: #aaa;
 /*insert desired styles*/
} 
```

# android - 如何动态加载 ListView 取决于 Spinner 的值

> ID：12973121
> 
> 赞同：1
> 
> 时间：2012-10-19T11:18:07.100
> 
> 标签：android, android-layout, android-intent

我在视图中有一个微调器、编辑文本、按钮和一个列表视图。我想从数据库加载我的 ListView 取决于微调器的值。我也在列表视图上进行添加操作。

我的疑问是我想知道如何加载我的列表视图取决于来自微调器的数据？

```
public class myClass extends ListActivity implements OnClickListener {
DatabaseFAM db;
Spinner No;
String Selected;
EditText user;
Button btnAdd;
String strselected;
ArrayList<String> list =new ArrayList<String>();
ArrayAdapter<String> adapterLV;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.myews);
    db = new DatabaseFAM(getApplicationContext());
    initVar();
}

private void initAudit2Var() {
    No = (Spinner) findViewById(R.id.station);
    user = (EditText) findViewById(R.id.er);
    btnAdd = (Button) findViewById(R.id.btnAdd);
    btnAdd.setOnClickListener(this);
    adapterLV = new ArrayAdapter<String>(this,
            android.R.layout.simple_list_item_multiple_choice, list);
    setListAdapter(adapterLV);
    final DatabaseFAM db = new DatabaseFAM(getApplicationContext());
    List<String> station = db.getAllstation();
    ArrayAdapter<String> stationAdapter = new ArrayAdapter<String>(
            getApplicationContext(), android.R.layout.simple_spinner_item,
            station);
    stationAdapter
            .setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
    No.setAdapter(stationAdapter);
    No.setOnItemSelectedListener(new OnItemSelectedListener() {
                @Override
                public void onItemSelected(AdapterView<?> arg0, View arg1,
                        int arg2, long arg3) {
                    Selected = arg0.getItemAtPosition(
                            arg2).toString();   
                    list.clear();
                    list=db.getTag(Selected);
                    adapterLV.notifyDataSetChanged();

                }

                @Override
                public void onNothingSelected(AdapterView<?> arg0) {

                }
            });
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T11:25:33.680

```
 sp1 = (Spinner)findViewById(R.id.spinner1);
          sp1.setOnItemSelectedListener(new OnItemSelectedListener() {

            @Override
            public void onItemSelected(AdapterView<?> arg0, View arg1,
                    int pos, long arg3) {
                // Load your list here
                }} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T11:24:37.770

1.  将 onItemSelected 事件添加到您的微调器。
2.  根据选择的值，使用所需的数据修改您的 listView
3.  在列表视图上使用 Datasetchanged 事件

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-19T11:22:52.997

您应该在 Spinner 的 Item selection 处设置 ListView 的 Adapter ....

```
 mSpinnerLangAttrValue.setOnItemSelectedListener(new OnItemSelectedListener() {

        @Override
        public void onItemSelected(AdapterView<?> arg0, View arg1,
                int arg2, long arg3) {
            // TODO Auto-generated method stub
            ** Add ListAdapter Here **
        }

        @Override
        public void onNothingSelected(AdapterView<?> arg0) {
            // TODO Auto-generated method stub

        }
    }); 
```

# php - 单击后打开子菜单的水平菜单

> ID：12973124
> 
> 赞同：0
> 
> 时间：2012-10-19T11:18:23.573
> 
> 标签：php, jquery, css

我创建了一个带有子菜单的水平菜单。在 jsfiddle 上，我不知道子菜单不能 100% 正常工作，而在本地却可以。这是工作链接：http: [//jsfiddle.net/IronFeast/g8MDP/](http://jsfiddle.net/IronFeast/g8MDP/)

这是代码：

```
<ul id="navbar">
<li><a href="index.php">Home</a></li>
<li><a href="#">Gallery</a>
<ul class="submenu">
   <li><a href="photogallery1.php">Photogallery 1</a></li>
   <li><a href="photogallery2.php">Photogallery 2</a></li>
   <li><a href="photogallery3.php">Photogallery 3</a></li>
</ul>         
</li>
<li><a href="events.php">Events</a></li>
<li><a href="#">Blog</a>
<ul class="submenu">
   <li><a href="personal.php">Personal</a></li>
   <li><a href="dev.php">Dev</a></li>
</ul> 
</li>
<li><a href="#">About</a>
<ul class="submenu">
   <li><a href="page1.php">Page 1</a></li>
   <li><a href="page2.php">Page 2</a></li>
</ul>
</li> 
```

CSS：

```
#navbar {
 background-color: #4E78B4;
 position: absolute;
 text-align: center;
 margin: 0;
 padding-bottom: 7px;
 padding-top: 7px;
 float: left;
 left: 10px;
 width: 940px;    
 font-size: 14px;
 z-index: 100;
}

#navbar li {
 list-style: none;
 float: left; 
 color: #E9EBDE;
 padding-left: 24px;
 padding-right: 4px;
 z-index: 100;
}

#navbar li a {
 display: inline;
 padding-top: 7px;
 padding-bottom: 7px;
 padding-right: 8px;        
 padding-left: 8px;
 text-transform: uppercase;
 text-decoration: none; 
 font-weight: bold; 
 color: #ffffff;
 z-index: 100;
 text-align: center;
}

#navbar ul li a {
 display: block;
 padding-top: 6px;
 padding-bottom: 3px;
 padding-right: 8px;
 padding-left: 8px;
 text-decoration: none;
 z-index: 100;
}

#navbar li a:hover {
 color: #000000;
 background-color: #ffffff;
 padding-right: 8px;        
 padding-left: 8px;
 z-index: 100;
}

#navbar li ul{
 display: none;  
 background-color: #41B6DC;
 z-index: 100;
}

#navbar li:hover ul, #navbar li.hover ul {
 position: absolute;
 display: block;
 left: 0;
 width: 940px;
 margin: 0;
 padding: 0;            
 z-index: 100;
 margin-top: 7px;
}

#navbar li:hover li, #navbar li.hover li {
 float: left; 
 z-index: 100;
}

#navbar li:hover li a, #navbar li.hover li a {
 color: #000; 
 z-index: 100;
}

#navbar li li a:hover {
 color: #4E78B4; 
 z-index: 100;
} 
```

当我将鼠标悬停在“画廊”上时，子菜单将打开，但如果我单击“照片画廊 1”，我将进入该页面，但不幸的是，当我进入该页面时，菜单将关闭。

我希望“图库”会突出显示，子菜单将保持打开状态，并且“照片库 1”按钮也会突出显示。

任何帮助都是极好的。先感谢您

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T11:29:40.013

我发现本教程[http://line25.com/tutorials/how-to-create-a-pure-css-dropdown-menu](http://line25.com/tutorials/how-to-create-a-pure-css-dropdown-menu)也许它可以帮助你，但我认为你需要调整 html 和 css ：S

希望对你有帮助

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-19T11:36:59.750

您必须将 photogallery1.php、photogallery2.php 等类属性添加`hover`为值。

```
<ul id="navbar">
    <li><a href="index.php">Home</a></li>
    <li class="<?php echo $_COOKIE["hover"]; ?>"><a href="#">Gallery</a>
    <ul class="submenu">
       <li><a href="photogallery1.php" class="<?php echo $_COOKIE["selected"]; ?>">Photogallery 1</a></li>
       <li><a href="photogallery2.php">Photogallery 2</a></li>
       <li><a href="photogallery3.php">Photogallery 3</a></li>
    </ul>         
    ...
    ...
</ul> 
```

还添加你的CSS：

```
.selected {
    background-color: #ffffff;
} 
```

最好使用 cookie 来保存菜单状态。

# .net - .Net windows 应用的视频场景检测

> ID：12973126
> 
> 赞同：0
> 
> 时间：2012-10-19T11:18:38.740
> 
> 标签：.net, video, computer-vision, tracking, surveillance

我正在尝试对视频文件进行场景检测。

我想将视频文件作为输入，我想检测场景变化并告诉我场景变化发生在什么位置。

我很高兴使用 3rd 方库来做到这一点，但我不知道从哪里开始。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T11:30:00.390

可能[EmguCV（OpenCV .net 包装器）](http://www.emgu.com/wiki/index.php/Main_Page)可以满足您的需求。这里是[视频监控模块](http://www.emgu.com/wiki/files/2.4.2/document/html/947e83c8-ab88-c8ce-6a89-41235860d12a.htm)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T11:30:45.617

好吧，如果您不使用 3rd 方库，则需要依次检查每个帧（或一系列帧）并确定它们的不同之处。这是一项非常重要的任务，通常需要一些复杂的数学运算（检测平移/移动）或一些有趣的神经网络。如果您对此不熟悉，那么第 3 方组件似乎是要走的路。

[Victor 图像处理库](http://www.catenary.com/)声称可以满足您的需求（通过计算 2 张图像之间的系数），但我从未使用过它，因此无法评论它的性能如何。

# xpath - xpath 多个条件并返回根

> ID：12973128
> 
> 赞同：1
> 
> 时间：2012-10-19T11:18:44.093
> 
> 标签：xpath, conditional-statements, exist-db

是否可以在 xpath 中执行“和”条件，例如

```
//foo/bar/test[@val='hello'] and //foo/bar/new[@val='world'] 
```

由于某种原因，此条件返回 true，而不是任何结果。我试过`|`了，但我不需要`or`声明。

结果应该返回来自 //foo 的所有元素（条件匹配） - 我需要根元素，因为我将从不同的元素中提取数据。

我正在使用 xpath 来查询一个存在数据库

我也需要放在`//foo[(position()> 3) and (position() < 6)]`那里。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-19T11:25:02.213

如果要获取`foo`元素，请`[]`在之后开始`foo`：

```
//foo[bar/test/@val='hello' and bar/new/@val='world'] 
```

如果您想要 的孩子`foo`，请将括号放在那里：

```
//foo/bar[test/@val='hello' and new/@val="world"] 
```

# c - 结构基础（结构作为指针）

> ID：12973130
> 
> 赞同：-2
> 
> 时间：2012-10-19T11:18:54.773
> 
> 标签：c

```
 #include<stdio.h>

    typedef struct
    {
        int *u;
        struct node next;
    } *node;

    int main()
    {
        return 0;
    } 
```

这里是什么意思`*node`？我不明白。我认为这里应该有一个节点，但无论如何它正在编译。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T11:22:03.013

这里`typedef`定义了一个新类型，`node`，它是一个指向结构的指针。

问题中的代码可能无法编译，因为`struct node`似乎没有在任何地方定义，但它在结构内部使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T11:26:06.737

这里的问题：

```
typedef struct
    {
        int *u;
        struct node next; //struct node is NOT defined.
    } *node; 
```

这是错误的：

它应该是 ：

```
typedef struct node{
   int *u;
   struct node *next;
}*nodeptr; 
```

这段代码意味着“nodeptr”是一个指向`struct node;`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-19T11:24:34.290

正确的定义是：

```
typedef struct Node {
    int *u;
    struct Node *next;
} *node; 
```

在您的代码中，结构声明存在问题；语法是：

```
struct identifier/tag {struct declaration list} 
```

结构声明列表是结构成员的一系列声明；

typedef 声明提供了一种创建别名的方法，即类型的同义词；语法是：

```
typedef type alias 
```

错误在哪里？

```
typedef struct { 
```

在这种情况下，没有别名！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-19T11:29:18.893

就个人而言，我从未见过这种声明。这使用类似于：

```
typedef struct {
  int *u;
  struct node *next;
} node; 
```

这很简单：您正在定义一个结构，其中包含一个指向整数的指针和一个指向同一结构的另一个元素的指针。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-19T11:24:16.990

比较一下：

```
typedef int * pointer_to_int; 
```

在这里，星号是被赋予新名称的类型的一部分，即`pointer_to_int`是类型的别名`int *`。

与您的示例完全一样！星号是类型的一部分，因此它`node`成为类型的别名`pointer to struct node { int *u; struct node *next; }`。

另外，请注意，在 中包含星号通常不是一个好主意`typedef`，因为它会使代码更难使用。在 C 中，知道变量是否是指针通常非常有趣，因此隐藏这一事实并不是很有帮助。

# android - ActionBarSherlock - 使用自定义视图显示在操作栏上方的选项卡

> ID：12973143
> 
> 赞同：20
> 
> 时间：2012-10-19T11:19:53.790
> 
> 标签：android, tabs, android-actionbar, actionbarsherlock

我正在尝试创建一个没有应用程序徽标/文本和集中图片的操作栏，我知道可以使用自定义视图，这是我的代码：

```
protected void initActionBar()
{
    RelativeLayout custom = new RelativeLayout(getApplicationContext());
    ActionBar.LayoutParams params = new ActionBar.LayoutParams(LayoutParams.MATCH_PARENT, LayoutParams.MATCH_PARENT);
    custom.setLayoutParams(params); 

    custom.setGravity(Gravity.CENTER);
    custom.setBackgroundDrawable(getResources().getDrawable(R.drawable.background_grad_grey_rounded));

    ImageView image =new ImageView(getApplicationContext());
    image.setBackgroundResource(R.drawable.ic_launcher); 
    custom.addView(image);

    ab = getSupportActionBar();

    ab.setDisplayShowCustomEnabled(true);
    ab.setCustomView(custom);
    ab.setNavigationMode(ActionBar.NAVIGATION_MODE_TABS);
    tab_connect = ab.newTab();
    tab_connect.setText("CONNECT");
    tab_connect.setTabListener(this);

    tab_discover = ab.newTab();
    tab_discover.setText("DISCOVER");
    tab_discover.setTabListener(this);

    tab_simplify= ab.newTab();
    tab_simplify.setText("SIMPLIFY");
    tab_simplify.setTabListener(this);

    ab.addTab(tab_simplify);
    ab.addTab(tab_discover);
    ab.addTab(tab_connect);

    ab.setDisplayShowTitleEnabled(false);
    ab.setDisplayShowHomeEnabled(false);

} 
```

但是，当我隐藏徽标时，操作栏会像这样在我的选项卡下方移动：

![截屏](../Images/6eb35abb490b6f89a9a6cb1b468d6bd0.png)

但是如果我设置 ab.setDisplayShowHomeEnabled(true) 操作栏出现在它的正确位置（但带有我不想要的徽标）：

![在此处输入图像描述](../Images/8b824cff972d8c96bb210eb6d1ccdf1b.png)

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-11-21T11:18:33.847

这是一个简单的解决方法：

在您的 onCreate 方法中使用以下内容：

```
View homeIcon = findViewById(android.R.id.home);
((View) homeIcon.getParent()).setVisibility(View.GONE); 
```

这会完全折叠主页按钮。

PS：我使用的是标准的 ActionBar 但这应该是一样的

或者

如果你想在 Sherlock Actionbar 中支持比你必须使用这个

```
actionBar.setLogo(null); // forgot why this one but it helped

View homeIcon = findViewById(
        Build.VERSION.SDK_INT >= Build.VERSION_CODES.HONEYCOMB ? 
        android.R.id.home : R.id.abs__home);
((View) homeIcon.getParent()).setVisibility(View.GONE);
((View) homeIcon).setVisibility(View.GONE);

actionBar.setDisplayShowTitleEnabled(false); 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-11-28T02:02:39.407

值得注意的是，所选答案仅适用于原生 ActionBar，因为元素 android.R.id.home 在 pre-hc 上不存在。也就是说，在 pre-hc 设备上，您将获得 NPE。

由于您使用的是 ActionBarSherlock，我假设您希望支持 pre-hc 设备，因此您应该根据平台版本使用正确的 id。ABS 将通过 R.id.abs__home 公开相当于 android.R.id.home 的 ActionBar 实现。

因此，我们可以将建议的解决方法调整为：

```
View homeIcon = findViewById(
                    Build.VERSION.SDK_INT >= Build.VERSION_CODES.HONEYCOMB ? 
                    android.R.id.home : R.id.abs__home);
((View) homeIcon.getParent()).setVisibility(View.GONE); 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-03-14T19:47:20.110

这也很好用！（阅读错误报告评论；））

```
actionBar.setLogo(new ColorDrawable(Color.TRANSPARENT)); 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2014-03-25T11:13:27.340

在@furyfred 回答之后，可以在使用`ActionBar`from`AppCompat`库时使用此代码：

```
View homeIcon = findViewById(Build.VERSION.SDK_INT >= Build.VERSION_CODES.HONEYCOMB ?
            android.R.id.home : android.support.v7.appcompat.R.id.home);

if (null != homeIcon && null != homeIcon.getParent())
{
    ((View) homeIcon.getParent()).setVisibility(View.GONE);
} 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2015-01-13T12:04:38.087

上面的所有帖子都折叠了主页图标，但留下了空白。为了避免这种情况，您需要将徽标大小设置为零。下面添加了我的代码片段。它可能对其他遇到同样问题的人有所帮助。谢谢

```
 actionBar.setLogo(new ColorDrawable(Color.TRANSPARENT));

      View homeIcon = findViewById(
                Build.VERSION.SDK_INT >= Build.VERSION_CODES.HONEYCOMB ? 
                android.R.id.home : R.id.abs__home);
        ((View) homeIcon.getParent()).setLayoutParams(new LinearLayout.LayoutParams(0, 0));
        ((View) homeIcon).setVisibility(View.GONE); 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-12-22T11:17:31.773

我用这个

```
ActionBar ab = getSupportActionBar();
ab.setDisplayShowHomeEnabled(true);
    ab.setDisplayHomeAsUpEnabled(false);
    ab.setHomeButtonEnabled(false);
    ab.setLogo(null);

    View homeIcon = findViewById(
            Build.VERSION.SDK_INT >= Build.VERSION_CODES.HONEYCOMB ? 
            android.R.id.home : R.id.abs__home);
    ((View) homeIcon.getParent()).setVisibility(View.GONE);
    ((View) homeIcon).setVisibility(View.GONE);

    ab.setDisplayShowTitleEnabled(false); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-03-16T11:03:33.807

只需从您的 actionBar.setDisplayOptions() 方法中删除 DISPLAY_SHOW_HOME 标志。

# java - 是否有允许在没有任何预装驱动程序的情况下播放视频的框架？(H264)

> ID：12973146
> 
> 赞同：0
> 
> 时间：2012-10-19T11:19:59.033
> 
> 标签：java, video

我一直在网上寻找可以让我在 java 中播放 H264/Mpeg4 视频的东西。视频录制在 android 设备上，我想将 java 程序附加到我的应用程序中，用户可以将其移动/复制到他/她的硬盘驱动器并执行以在计算机上播放视频（更大的屏幕、鼠标输入等）。

我确实找到了 xuggler、vlcj、ffmpeg、gstreamer。他们都说他们需要在计算机上安装一些驱动程序等。但是我需要一些在纯 java 中运行的东西，并且可以放入我将放入我的应用程序或网站 dl 的 jar 中。

它必须如此简单，用户 dl jar 并执行并能够观看存储在 android 设备上的视频（我意识到它需要用户安装 java，但这是我唯一想要的给他们带来负担）。

欢迎提供链接或教程。（我经常使用 android，但很少使用纯 java，所以缺乏多媒体功能有点让我失去平衡）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T12:37:20.180

[JCodec](http://jcodec.org/index.html)是最近的一个项目，旨在提供一个纯 java 实现的视频和音频解码器，值得一试。

# html - 在word中插入图片并转换为html时图像宽度增加

> ID：12973147
> 
> 赞同：0
> 
> 时间：2012-10-19T11:19:59.110
> 
> 标签：html, ms-word

我到处搜索了插入word并转换为html后图像宽度的增加，但我仍然不知道为什么从word转换为html时图像的宽度和高度会增加，我插入了一个270px * 343px word 中的图像，但是当我将其转换为 html 时，图像宽度为 360 像素，高度为 450 像素，我希望我的图像宽度为 270 像素，高度为 343 像素，无论如何我可以保留图像的宽度和高度吗？任何帮助将不胜感激

编辑：我刚刚在 word 中插入了一张图片，然后将其转换为 html 。转换后的 html 文件增加了图像的宽度和高度

如果我将word文件转换为html，有什么方法可以为我的图像获得所需的270px * 343px输出？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T12:02:17.277

这是因为 Word 不支持将图像完全转换为 html 文件中的图像。如果您想要图像的精确像素，则必须使用其他 html 编辑器，如记事本、dreamweaver 等。

它们不像单词那么难，它们会解决你的问题，图像大小将完全为 270px * 343px

# r - 如何在 R 中对表对象进行子集化？

> ID：12973151
> 
> 赞同：9
> 
> 时间：2012-10-19T11:20:13.933
> 
> 标签：r

如何根据值对表进行子集化并返回这些值？这仅返回索引：

```
with(chickwts, table(feed))
with(chickwts, table(feed)) > 11
which(with(chickwts, table(feed)) > 11) 
```

输出

```
> with(chickwts, table(feed))
feed
   casein horsebean   linseed  meatmeal   soybean sunflower 
       12        10        12        11        14        12 
> with(chickwts, table(feed)) > 11
feed
   casein horsebean   linseed  meatmeal   soybean sunflower 
     TRUE     FALSE      TRUE     FALSE      TRUE      TRUE 
> which(with(chickwts, table(feed)) > 11)
   casein   linseed   soybean sunflower 
        1         3         5         6 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-19T11:34:41.870

这是使用该`Filter`功能的另一种方法：

```
Filter(function(x) x > 11, with(chickwts, table(feed)))
feed
   casein   linseed   soybean sunflower 
       12        12        14        12 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-19T11:24:49.297

您需要使用计算值两次，因此使用中间变量很有用：

```
x <- with(chickwts, table(feed))
x[x>11]
feed
   casein   linseed   soybean sunflower 
       12        12        14        12 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-12-25T15:01:58.080

**使用基本功能**的另一种选择：

```
subset(data.frame(table(chickwts$feed)), Freq > 11) 
```

结果：

```
 Var1 Freq
1    casein   12
3   linseed   12
5   soybean   14
6 sunflower   12 
```

* * *

使用**dplyr**包：

```
library(dplyr)
chickwts %>% 
  count(feed) %>%
  filter(n > 11) 
```

结果：

```
Source: local data frame [4 x 2]

       feed  n
1    casein 12
2   linseed 12
3   soybean 14
4 sunflower 12 
```

# php - 单击网格按钮时显示列表器？（在敏捷工具包中）

> ID：12973171
> 
> 赞同：1
> 
> 时间：2012-10-19T11:21:25.430
> 
> 标签：php, atk4, agiletoolkit

我有一个网格，其中一个列中有按钮，如下所示：单击按钮时如何显示列表器或新网格？

```
 $grid=$page->add('Grid');
        $grid->setModel('Tickets',array('subject','date','time','department','status','text'));
        $grid->addColumn("button",'read_ticket_id','Read');

        if($_GET['read_ticket_id']){
            // this generates javascript to be executed on buttion click
       //how can I show a lister or a new grid when the button clicked?
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T21:01:11.827

查看 ATK4 键盘中的示例。 [http://agiletoolkit.org/codepad/gui/grid](http://agiletoolkit.org/codepad/gui/grid)

编辑：这是我的一个页面的片段。也许你会发现它很有用。这背后的想法是你实际上在这个 IF 语句中生成 JavaScript，然后 JavaScript 被发送回你的浏览器，然后它可以对某些东西发出另一个请求（重新加载现有对象、创建新对象、重定向到某个地方等）

```
...
if($_GET['ticket']){
    // Join this report with selected ticket
    $this->grid->model->addToTicket($_GET['ticket']);
    // Reload
    $this->js(null,array(
        $x->js()->reload(),
        $this->js()->univ()->successMessage('Successfully saved')
    ))->execute();
}
... 
```

使用 $_GET['ticket'] 您可以在单击“添加到工单”按钮的网格中获得记录 ID。$x 是该页面中的一些其他对象，例如，某个表单、字段、选项卡或其他网格。使用 $this->grid->model 您可以获得与此网格关联的模型的引用，并且在该模型中我定义了自定义操作/方法 - addToTicket 对数据库执行某些操作。

您还可以使用 $this->js()->redirect() 或 $this->js()->location() 等重定向到其他页面。基本上您可以做任何您想做的事情，但所有这些都需要生成JavaScript 作为结果或指示您的浏览器下一步做什么。

并且不要忘记在最后添加 ->execute() ！这将停止进一步解析您的页面并立即生成 JS 响应。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-21T10:47:48.003

我为这个问题找到了一个很好的例子：

[http://agiletoolkit.org/doc/grid/interaction](http://agiletoolkit.org/doc/grid/interaction)

==========

```
$g=$p->add('Grid');
$g->setSource('user');
$g->addColumn('name');
$g->addColumn('surname');
$g->addColumn('button','info','More Info');
$g->dq->where('name is not null')->limit(5);

if($_GET['info']){
    $g->js()->univ()->dialogURL('More info',
            $this->api->getDestinationURL(
                null,array(
                    'more_info'=>$_GET['info'],
                    'cut_object'=>'myform'
                    )))
        ->execute();
}

if($_GET['more_info']){
    $f=$this->add('Form','myform');
    $f->addField('readonly','name');
    $f->addField('readonly','surname');
    $f->setSource('user');
    $f->setConditionFromGET('id','more_info');
} 
```

# php - php date re-arrange to mysql 我需要使用explode吗？

> ID：12973177
> 
> 赞同：2
> 
> 时间：2012-10-19T11:21:33.090
> 
> 标签：php, date

我有问题，我正在使用 PHP 脚本，当我将日期添加到我的数据库时出现问题...

我怎样才能修复/重新安排这个日期

`date( "Oct 18, 2012 05:06:42" );`

我的数据库只接受`2012-10-19 05:06:42`

但我收到了不同的表格，这是`Oct 18, 2012 05:06:42`

这是我的示例代码

```
$cocod = date( 'Oct 18, 2012 05:06:42' );//'Oct 18, 2012 2012-10-18';
$get = strtotime(date("Y-m-d H:m:s", strtotime($cocod)) . " +30 day");
$setex = date( 'Y-m-d H:m:s', $get );
echo $setex; 
```

谢谢你...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-19T11:28:14.160

这个怎么样：

```
$cocod = 'Oct 18, 2012 05:06:42'; // original date

$get = date("Y-m-d H:i:s", strtotime($cocod . " +30 days"));

echo $get; 
```

**输出**

> 2012-11-17 05:06:42

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-19T11:34:46.240

您可以使用 DateTime 类将格式化日期转换回时间戳

```
$timestamp = DateTime::createFromFormat('M d, Y H:i:s', 'Oct 18, 2012 05:06:42')->getTimestamp(); 
```

在您上面的示例中，我可以看到您甚至想添加 30 天。你可以这样做：

```
$date = DateTime::createFromFormat('M d, Y H:i:s', 'Oct 18, 2012 05:06:42');
$date->add(new DateInterval('P30D')); 
```

如果您现在想再次格式化日期，请执行以下操作：

```
$date->format('Y-m-d H:m:s'); 
```

如需进一步阅读，请查看php.net上的[DateTime类](http://fr2.php.net/manual/en/class.datetime.php)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-19T11:36:22.417

长手的方式...

```
$d0 = explode(",", $date);

$d1 = explode(" ", $d0[0]);

$d2 = explode(" ", trim($d0[1]));

$year = $d2[0];
$month = monthToInt($d1[0]);
$day = $d1[1];
$time = $d2[1];

$mysql_date = $year . "-" . $month . "-" . $day . "" . $time; 
```

The `monthToInt` function is just one that takes "`Oct`" and turns it to `10`. You can write that yourself quite easily with 12 `if statements` or a `switch statement`, or find one pre-made on the internet.

# asp.net-mvc-4 - 默认情况下启用 MVC4 Internet 应用程序模板包？

> ID：12973178
> 
> 赞同：0
> 
> 时间：2012-10-19T11:21:43.103
> 
> 标签：asp.net-mvc-4, bundle, minify, bundling-and-minification, asp.net-mvc-templates

我正在使用来自 Internet 应用程序模板的 Mvc 4 项目。为什么默认情况下未启用**捆绑**功能或我遗漏了什么？

正如其他帖子中提到的那样，在 Mvc4 中没有这样的方法：

```
BundleTable.Bundles.RegisterTemplateBundles();
BundleTable.Bundles.EnableDefaultBundles(); 
```

**更新**：这是如何在调试模式下启用捆绑包

```
BundleTable.EnableOptimizations = true; 
```

注册捆绑包后。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-19T16:38:59.363

默认情况下，捆绑包已注册并启用。当您在`debug="false"`web.config 中以发布模式 ( )运行时，`@Script.Render`帮助程序会将资源连接并缩小到单个文件中。如果您在调试模式下运行，则每个脚本将单独呈现。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T18:07:32.897

我遇到了一个类似的问题，我的解决方案是：

```
public class bundleConfig
{
    public static void RegisterBundles(BundleCollection bundles)
    {
        // bundle as usual

#if(!DEBUG)
        BundleTable.EnableOptimizations = true;
#endif
    }
} 
```

This way, when I launch it in `Release` mode, it does minification and bundling but if I launch it in `Debug` mode, it doesn't.

# java - 使方法同步后发生并发问题

> ID：12973179
> 
> 赞同：0
> 
> 时间：2012-10-19T11:21:43.827
> 
> 标签：java, web-services, concurrency

我在 Web 服务中有一个方法，它正在执行一些数据库插入。我想要对该方法的单一访问，这就是我将方法设为同步的原因。但是，当在同一个即时同步选项中对该方法进行多次调用时，该选项不起作用。该方法的结构如下所示

```
public synchronized void display() {
   //DataBase updations and Transactions.    
} 
```

任何人都可以提出任何可以避免这个问题的解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T11:25:33.860

您如何确定同步不起作用？您知道同步在*对象*级别上起作用，因此如果该方法在一个 servlet 中并且 servlet 容器创建了该 servlet 的多个实例，那么您就不走运了 - 每个 servlet 实例都可以同时运行“同步”方法。

此外，您为什么要在代码中序列化 DB 操作 - 任何 DB 都完全有能力做到这一点，参见。事务性和 ACID 原则。

干杯，

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T11:24:21.110

问题不在于方法，而在于包含此方法的代码的多个实例。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-19T12:20:19.293

你可以尝试以下 -

1.  创建一个单独的类来处理您的所有数据库操作，例如插入、删除、创建表等。

2.  使所有方法同步。

3.  此类应在您的代码中初始化一次。

4.  在该类外部创建一个数据库连接，并将该连接设置为该类（此 setter 方法必须同步）。请记住，连接应该在您的代码中创建一次，例如处理数据库的上述类的对象。

5.  然后在多个线程中使用这个类的同一个对象。那应该工作。

# c# - 如何从 C# 调用 CORBA 接口？

> ID：12973180
> 
> 赞同：5
> 
> 时间：2012-10-19T11:21:50.110
> 
> 标签：c#, visual-studio-2010, corba

如何从 C# 调用 CORBA 接口？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T11:35:50.370

是的，您可以使用 c# 调用 CORBA 接口。这里的链接将帮助您[使用 c# 调用 CORBA 接口](https://stackoverflow.com/questions/6031381/how-to-access-corba-interface-without-idl-or-late-bound-invoke-remoting-methods)

# sql - 优化 SQL 查询

> ID：12973182
> 
> 赞同：1
> 
> 时间：2012-10-19T11:21:54.757
> 
> 标签：sql, query-optimization

我有一个 SQL 查询，我想优化它作为 SP 的内部查询。

```
 SELECT TOP 1 @CurrentStartDate = Strt_Dt FROM   (
 SELECT 1 AS seq, Stat, Strt_Dt, Est_Hrs_Comp, EndDate, Tckt_Id, Envr
  FROM   pipeline_rest_envr_info e
  WHERE  e.tckt_id = @TicketID AND stat = 'INPR'
  UNION
  SELECT TOP 1 2 AS seq, Stat, Strt_Dt, Est_Hrs_Comp, EndDate, Tckt_Id, Envr
  FROM   pipeline_rest_envr_info e
  WHERE  e.tckt_id = @TicketID AND stat = 'CMPL'
  ORDER BY enddate DESC
  UNION
  SELECT TOP 1 3 AS seq, Stat, Strt_Dt, Est_Hrs_Comp, EndDate, Tckt_Id, Envr
  FROM   pipeline_rest_envr_info e
  WHERE  e.tckt_id = @TicketID AND stat = 'PLND'
  ORDER BY strt_dt
  UNION 
  SELECT 4 AS seq, 'UNP', NULL, NULL, NULL, tckt_id, 'Unplanned'
  FROM   pipeline_rest_envr_info e
  WHERE  e.tckt_id = @TicketID
) aa
ORDER BY aa.seq 
```

有没有更好的方法来使用这个查询。我需要这个，因为我有很多具有相同类型的逻辑。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T11:27:12.123

您正在对同一表中相同条件的 4 个结果进行联合，您不能只使用 CASE 语句吗？例如

```
SELECT 
    CASE Stat
         WHEN 'INPR' THEN 1
         WHEN 'CMPL' THEN 2
         WHEN 'PLND' THEN 3
         WHEN 'Unplanned' THEN 4
         ELSE 0 -- Not sure what your 'ELSE' case would be
    END as Seq,
    etc....
FROM   pipeline_rest_envr_info e 
WHERE  e.tckt_id = @TicketID 
```

对于所有具有逻辑的字段，您仍然需要 case 语句，但它将包含所有数据并且更易于阅读。性能也应该好很多。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-19T11:29:57.840

```
SELECT TOP 1 @CurrentStartDate = Strt_Dt FROM (
 SELECT 
        CASE stat WHEN 'INPR' THEN 1
                    WHEN 'CMPL' THEN 2
                    WHEN 'PLND' THEN 3
                    ELSE 4 END AS seq ,
        Stat, Strt_Dt, Est_Hrs_Comp, EndDate, Tckt_Id, Envr
  FROM   pipeline_rest_envr_info e
  WHERE  e.tckt_id = @TicketID ) aa
ORDER BY aa.seq 
```

事实上，这与@Charleh 的答案相同

你不需要第二个和第三个，`TOP 1`因为你只取所有工会的第一个

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-19T12:10:43.260

我没有回复我的评论，我会做一些假设......

单个`tckt_id`可以有：

*   多个`CMPL`项目。 *（完全的？）*
*   只有一项`INPR`。 *（进行中？）*
*   多个`PLND`项目。 *（计划？）*
*   多个其他项目。 *（计划外？）*

你想要的`strt_dt`...

*   项目`INPR`（如果存在）。
*   否则，最后`CMPL`一项（如果存在）。
*   否则，第一`PLND`项（如果存在）。
*   除此以外，`NULL`

```
SELECT
  TOP 1
  @current_start_date
  =
  CASE WHEN stat = 'INPR' THEN MIN(strt_dt)
       WHEN stat = 'CMPL' THEN MAX(strt_dt)
       WHEN stat = 'PLND' THEN MIN(strt_dt)
                          ELSE NULL
  END
FROM
  pipeline_rest_envr_info
WHERE
  tckt_id = @TicketID
GROUP BY
  stat
ORDER BY
  CASE WHEN stat = 'INPR' THEN 1
       WHEN stat = 'CMPL' THEN 2
       WHEN stat = 'PLND' THEN 3
                          ELSE 4 END 
```

这确实有一个额外的假设：

*   最后完成的任何`CMPL`项目也最后开始

如果该假设是错误的，并且您可以访问`ROW_NUMBER()`，则可以尝试这样做...

```
WITH
  plus_sort_order
(
  SELECT
    ROW_NUMBER() OVER (PARTITION BY stat ORDER BY strt_dt ASC ) AS order_strt,
    ROW_NUMBER() OVER (PARTITION BY stat ORDER BY end_dt  DESC) AS order_end,
    *
  FROM
    pipeline_rest_envr_info
  WHERE
    tckt_id = @TicketID
)
SELECT
  TOP 1
  @current_start_date = strt_dt
FROM
  plus_sort_order
WHERE
  (order_strt = 1) OR (stat = 'CMPL' AND order_end  = 1)
ORDER BY
  CASE WHEN stat = 'INPR' THEN 1
       WHEN stat = 'CMPL' THEN 2
       WHEN stat = 'PLND' THEN 3
                          ELSE 4 END 
```

还有很多其他的方法。但很大程度上取决于您的数据。我建议您在这里和其他答案中尝试这些想法，并使用解释/查询计划来确定每个可用选项需要哪些索引。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-19T11:36:33.400

我认为您应该根据需要对其进行`Temp Table`索引，然后从每个`UNION`s 中插入记录。这比使用`UNION`s 快一些。

# c# - 气球提示关闭后，C# NotifyIcon 保留在托盘中

> ID：12973191
> 
> 赞同：1
> 
> 时间：2012-10-19T11:22:19.283
> 
> 标签：c#, notifyicon

在我的 NotifyIcon 的 Ballon Tip 关闭后，图标仍留在托盘中。只有当我用鼠标光标悬停它时它才会消失。

我有一个类 Notification.cs，它有一个组件 - NotifyIcon。

我从我的控制台应用程序中调用它，因为我只想在满足某些条件时显示通知。

一些代码：

*   我如何从我的程序中调用通知：

    ```
    Notification not = new Notification("Error occured, do this or that", "Some error", System.Windows.Forms.ToolTipIcon.Error);
    not.getIcon().ShowBalloonTip(1000); 
    ```

*   通知类：

    ```
    public Notification(string baloonTipText, string baloonTipTitle, System.Windows.Forms.ToolTipIcon icon) : this()
    {
        this.icon.Visible = true;
        this.icon.BalloonTipText = baloonTipText;
        this.icon.BalloonTipTitle = baloonTipTitle;
        this.icon.BalloonTipIcon = icon;
    }

    public System.Windows.Forms.NotifyIcon getIcon()
    {
        return this.icon;
    }

    private void icon_BalloonTipClosed(object sender, EventArgs e)
    {
        this.icon.Visible = false;
        this.icon.Dispose();            
    } 
    ```

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-19T14:30:24.223

因为您在控制台应用程序中运行，所以`icon_BalloonTipClosed`当气球提示关闭时不会调用您的处理程序（无消息泵）。您需要`Dispose`在应用程序退出时手动调用或设置一个超时时间长于气球提示超时时间的计时器（`System.Threading.Timer`,`System.Windows.Forms.Timer`将不起作用）。例如：

```
timer = new Timer(state => not.getIcon().Dispose(), null, 1200, Timeout.Infinite); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-11T08:51:54.757

```
using System;
using System.ComponentModel;
using System.Drawing;
using System.IO;
using System.Reflection;
using System.Windows.Forms;

namespace ShowToolTip
{
    public partial class Form1 : Form
    {
        public Form1()
        {
            InitializeComponent();
        }

        private void btBallonToolTip_Click(object sender, EventArgs e)
        {
            ShowBalloonTip();
            this.Hide();
        }

        private void ShowBalloonTip()
        {
            Container bpcomponents = new Container();
            ContextMenu contextMenu1 = new ContextMenu();

            MenuItem runMenu = new MenuItem();
            runMenu.Index = 1;
            runMenu.Text = "Run...";
            runMenu.Click += new EventHandler(runMenu_Click);

            MenuItem breakMenu = new MenuItem();
            breakMenu.Index = 2;
            breakMenu.Text = "-------------";

            MenuItem exitMenu = new MenuItem();
            exitMenu.Index = 3;
            exitMenu.Text = "E&xit";

            exitMenu.Click += new EventHandler(exitMenu_Click);

            // Initialize contextMenu1
            contextMenu1.MenuItems.AddRange(
                        new System.Windows.Forms.MenuItem[] { runMenu, breakMenu, exitMenu });

            // Initialize menuItem1

            this.ClientSize = new System.Drawing.Size(0, 0);
            this.Text = "Ballon Tootip Example";

            // Create the NotifyIcon.
            NotifyIcon notifyIcon = new NotifyIcon(bpcomponents);

            // The Icon property sets the icon that will appear
            // in the systray for this application.
            string iconPath = Path.GetDirectoryName(Assembly.GetExecutingAssembly().Location) + @"\setup-icon.ico";
            notifyIcon.Icon = new Icon(iconPath);

            // The ContextMenu property sets the menu that will
            // appear when the systray icon is right clicked.
            notifyIcon.ContextMenu = contextMenu1;

            notifyIcon.Visible = true;

            // The Text property sets the text that will be displayed,
            // in a tooltip, when the mouse hovers over the systray icon.
            notifyIcon.Text = "Morgan Tech Space BallonTip Running...";
            notifyIcon.BalloonTipText = "Morgan Tech Space BallonTip Running...";
            notifyIcon.BalloonTipTitle = "Morgan Tech Space";
            notifyIcon.ShowBalloonTip(1000);
        }

        void exitMenu_Click(object sender, EventArgs e)
        {
            this.Close();
        }

        void runMenu_Click(object sender, EventArgs e)
        {
            MessageBox.Show("BallonTip is Running....");
        }
    }
} 
```

# .htaccess - 在子文件夹中安装codeigniter并指向主站点？

> ID：12973194
> 
> 赞同：0
> 
> 时间：2012-10-19T11:22:21.983
> 
> 标签：.htaccess, codeigniter, subdirectory

我正在尝试在子文件夹中安装我的 codeigniter 应用程序：`http://website.com/sub_folder`

我希望这个网站可以通过以下方式访问：`http://website.com/`

我的`application/config.php`文件中有以下基本网址的信息：`$config['base_url'] = 'http://website.com/sub_folder';`

这是我的`.htaccess`：

```
RewriteEngine on
RewriteCond $1 !^(index\.php|images|captcha|assets|favicon\.gif|robots\.txt)
RewriteRule ^(.*)$ /sub_folder/index.php/$1 [L] 
```

问题是，当我更改`$config['base_url']`以访问我的资产文件（如 css 等）时，我的其他链接也使用`$base_url()`指向 :`http://website.com/sub_folder`而不是`http://website.com/`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T12:04:16.030

如果我了解您想要实现的目标，那么您做错了，只需将`index.php`文件放在根文件夹中，将应用程序放在子文件夹中即可。

更改`system`并找到它们所在位置的`application`路径，然后您就完成了。`index.php`

```
$system_path = 'subfolder/system';
$application_folder = 'subfolder/applications'; 
```

在任何情况下，如果可能，请考虑将文件夹移出`application`根`system`目录，因为它会覆盖数百个潜在的安全漏洞。

# javascript - 绘制按钮以将纬度和经度添加到输入字段？地理编码

> ID：12973196
> 
> 赞同：0
> 
> 时间：2012-10-19T11:22:27.177
> 
> 标签：javascript, wordpress, google-maps, google-maps-api-3, geocoding

我有一个表格，我的一个输入让我的用户输入他们的办公室位置（地址）

从这个地址我想在他们的个人资料上绘制一个谷歌地图。我希望他们提供经纬度的，但他们不知道如何提供。有没有一种方法，用户可以通过在地址字段中输入地址然后按下绘图按钮来填充长和纬度字段，该按钮将返回长和纬度并将它们输入到适当的字段中。

到目前为止，我的代码如下（我制作了一个 JSFiddle 以避免在此消息中放置大量代码）

[http://jsfiddle.net/F2snX/](http://jsfiddle.net/F2snX/)

1 个位置的片段如下（但最好查看完整的 jsfiddle 示例）

```
<li id="field_15_92" class="gfield">
<label class="gfield_label" for="input_15_92">Solicitor Practice Address</label>
    <div class="ginput_container">
        <input id="input_15_92" class="medium" type="text" tabindex="3" value="" name="input_92">
        <input type="button" id="plot1" value="Plot" /><br />
    </div>
<div class="gfield_description">Enter Address Location and Press Plot Button </div>
</li>
<li id="field_15_166" class="gfield">
<label class="gfield_label" for="input_15_166">Main Practice Opening Hours</label>
    <div class="ginput_container">
        <input id="input_15_166" class="medium" type="text" tabindex="4" value="" name="input_166">
    </div>
<div class="gfield_description">Enter Office Opening Hours</div>
</li>
<li id="field_15_167" class="gfield">
<label class="gfield_label" for="input_15_167">Main Practice Map Longitude </label>
    <div class="ginput_container">
        <input id="input_15_167" class="medium" type="text" tabindex="5" value="" name="input_167">
    </div>
<div class="gfield_description">Enter Longitude Coordinates</div>
</li>
<li id="field_15_169" class="gfield">
<label class="gfield_label" for="input_15_169">Main Practice Map Latitude</label>
    <div class="ginput_container">
        <input id="input_15_169" class="medium" type="text" tabindex="6" value="" name="input_169">
    </div>
<div class="gfield_description">Enter Latitude Coordinates</div>
</li> 
```

谢谢

注意：如果有任何帮助，我的 Wordpress 主题正在使用 Google Maps API v3。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-19T11:35:34.837

基本上有两种方法可以解决这个问题：

1.  让用户输入地址并自己找出地理坐标。有关完整功能集，请参阅[地理编码 API的描述。](https://developers.google.com/maps/documentation/geocoding/)

2.  或者您在地图上绘制一个可拖动的标记，让用户将标记拖动到他们的位置。[你可以在这篇文章](https://stackoverflow.com/questions/5968559/retrieve-latitude-and-longitude-of-a-draggable-pin-via-google-maps-api-v3)中找到一个很好的解释。

3.  或者你将这两种方法结合起来。让用户输入他们的地址，如果地理编码结果不充分，他们可以将标记拖到正确的位置。[这是谷歌的一个例子](http://gmaps-samples.googlecode.com/svn/trunk/geocoder/singlegeocode.html)，正是这样做的。

# php - 块中的选项卡

> ID：12973197
> 
> 赞同：5
> 
> 时间：2012-10-19T11:22:29.533
> 
> 标签：php, drupal, drupal-7, drupal-blocks

我想创建一个包含 page.tpl.php 中的 $tabs 的块

```
/**
 * Implements hook_block_info().
 */
function mymodule_block_info() {

  $blocks['tabs'] = array(
    'info' => t('Tabs in block'),
    'description' => t('blah blah blah'),
  );
  return $blocks;
}

/**
 * Implements hook_block_view().
 */
function mymodule_block_view($delta = '') {

  $block = array();

  switch ($delta) {

    case 'tabs':
      $block['subject'] = t("THIS IS ZHE TABS!");
      $block['content'] = array(
        '#theme' => 'menu_local_tasks',
        '#primary' => menu_local_tasks(0),
        '#secondary' => menu_local_tasks(1),
      );
    break;
  }
  return $block;
} 
```

该块已正确注册，并且与呈现的选项卡一起正确显示。然而，Drupal 抛出了很多错误！

```
Warning: Invalid argument supplied for foreach() in element_children() (line 6300 of /Users/tolborg/Sites/bibdk/includes/common.inc).
Warning: Cannot use a scalar value as an array in drupal_render() (line 5767 of /Users/tolborg/Sites/bibdk/includes/common.inc).
Warning: Cannot use a scalar value as an array in drupal_render() (line 5822 of /Users/tolborg/Sites/bibdk/includes/common.inc).
Warning: Invalid argument supplied for foreach() in element_children() (line 6300 of /Users/tolborg/Sites/bibdk/includes/common.inc).
Warning: Illegal string offset '#children' in drupal_render() (line 5767 of /Users/tolborg/Sites/bibdk/includes/common.inc).
Warning: Illegal string offset '#children' in drupal_render() (line 5777 of /Users/tolborg/Sites/bibdk/includes/common.inc).
Warning: Illegal string offset '#children' in drupal_render() (line 5815 of /Users/tolborg/Sites/bibdk/includes/common.inc).
Warning: Illegal string offset '#printed' in drupal_render() (line 5822 of /Users/tolborg/Sites/bibdk/includes/common.inc).
Warning: Invalid argument supplied for foreach() in element_children() (line 6300 of /Users/tolborg/Sites/bibdk/includes/common.inc).
Warning: Cannot use a scalar value as an array in drupal_render() (line 5767 of /Users/tolborg/Sites/bibdk/includes/common.inc).
Warning: Cannot use a scalar value as an array in drupal_render() (line 5822 of /Users/tolborg/Sites/bibdk/includes/common.inc).
Warning: Invalid argument supplied for foreach() in element_children() (line 6300 of /Users/tolborg/Sites/bibdk/includes/common.inc).
Warning: Illegal string offset '#children' in drupal_render() (line 5767 of /Users/tolborg/Sites/bibdk/includes/common.inc).
Warning: Illegal string offset '#children' in drupal_render() (line 5777 of /Users/tolborg/Sites/bibdk/includes/common.inc).
Warning: Illegal string offset '#children' in drupal_render() (line 5815 of /Users/tolborg/Sites/bibdk/includes/common.inc).
Warning: Illegal string offset '#printed' in drupal_render() (line 5822 of /Users/tolborg/Sites/bibdk/includes/common.inc). 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T13:03:23.263

似乎问题出在主题功能中，也许。

我尝试使用它并且它有效

```
$tabs =  menu_local_tasks(0);
$block['content'] =  $tabs['tabs']['output']; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-16T17:18:47.273

有一个模块[blockify](https://www.drupal.org/project/blockify)可以完成这个任务并为你创建其他 page.tpl.php 元素。它还提供了要“阻止”哪些元素的管理页面

# scala - intellij idea 11，scala 执行缓慢

> ID：12973198
> 
> 赞同：1
> 
> 时间：2012-10-19T11:22:29.717
> 
> 标签：scala, intellij-idea

> **可能重复：**
> [为什么 IntelliJ IDEA 编译 Scala 这么慢？](https://stackoverflow.com/questions/3606591/why-does-intellij-idea-compile-scala-so-slowly)

我刚刚设置了一个 scala 插件并创建了一个新的 scala 项目。问题是，当我运行 scala 脚本时，执行速度非常慢 - 只需要 4 秒`println("hello")` 它与编译无关，因为我在运行时禁用了 make 并且每次运行时执行时间都是恒定的。只是为了比较：在带有 scala 插件的 eclipse 中，这是半秒。

# android - Eclipse 是否支持构建 PreferenceScreen？

> ID：12973199
> 
> 赞同：2
> 
> 时间：2012-10-19T11:22:32.383
> 
> 标签：android, eclipse

当您要构建常规活动时，您在 Eclipse（实际上是一个插件）中有一个简单的构建器。有类似的东西`PreferenceScreen`吗？如果是，如何激活它？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-06-05T20:49:24.093

它不是 WYSIWYG 编辑器，而是 Eclipse 的 Android 工具附带了*Preference Screen*编辑器，它比简单的 XML 编辑器强大得多：

`New`→ `Other`→ `Android XML File`→ 单击`Next`→ 选择`Preference`为`Resource Type`，更改`Root Element`为`Preference Screen`并输入文件名。完毕

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-19T16:02:42.380

在 Eclipse 中，没有任何选项可以查看 Preference 活动的图形布局，但像 xml 布局一样，eclipse 提供了编辑 Preference 活动的 xml 文件的工具。

# jquery - 查询平滑滚动到#

> ID：12973203
> 
> 赞同：0
> 
> 时间：2012-10-19T11:22:55.800
> 
> 标签：jquery, wordpress

我正在尝试使用以下 jQuery 片段在我的 Wordpress 网站上创建平滑滚动到 # 链接：

```
$(window).bind("load", function() {
   var urlHash = window.location.href.split("#")[1];
    $('html,body').animate({scrollTop:$('a[href="#'+urlHash+'"]').offset().top}, 4000);        
}); 
```

当链接结构如下时，这可以正常工作：

```
mysite.com/page.htm#scroll1 
```

但是，由于我的网站是 Wordpress，所以我的链接是这样构建的：

```
mysite.com/?page_id=6#scroll1 
```

或者

```
mysite.com/section/#scroll1 
```

这似乎抛出了脚本。

有什么我可以添加到片段中以使其能够理解这种链接结构的吗？

对不起，如果这是一个愚蠢的问题，我是初学者。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T12:13:49.733

试试这个：

```
$(document).ready(function () {
    function Move2UrlAnchor(speed) {
        $('html,body').scrollTop(0);
        if (window.location.hash) {
            var anchor = window.location.hash;
            var id = anchor.replace('#','');
            $("a[href*='"+anchor+"']").attr('id', id);
            var ScroolPos = $(anchor).offset().top;
            $('html,body').animate({ scrollTop: ScroolPos },speed);
        };
    };
Move2UrlAnchor(10000);
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T11:46:56.107

尝试使用这个：

```
var urlHash = window.location.hash.split("#")[1]; 
```

# jquery - 使用 Html.DisplayForModel 时的 CSS 表格布局

> ID：12973207
> 
> 赞同：2
> 
> 时间：2012-10-19T11:23:10.470
> 
> 标签：jquery, css, asp.net-mvc-3

我有一个 MVC3 视图，如下所示：

```
<div id="table">
    @Html.DisplayForModel()
</div> 
```

呈现如下：

```
<div id="table">
    <div class="display-label">Label 1</div>
    <div class="display-field">Value 1</div>
    <div class="display-label">Label 2</div>
    <div class="display-field">Value 2</div>
    ... etc ...
    <div class="display-label">Label n</div>
    <div class="display-field">Value n</div>
</div> 
```

是否有一种纯 CSS 方法可以将其转换为表格布局 - 相当于：

```
<table>
    <tr><td>Label 1</td><td>Value 1</td>
    <tr><td>Label 2</td><td>Value 2</td>
    <tr><td>Label 3</td><td>Value 3</td>
    <tr><td>Label 4</td><td>Value 4</td>
</table> 
```

或者失败了，一个 CSS + jQuery 解决方案。例如，我可以想象必须有一种方法使用 jQuery 将每个字段/值对包装在一个 div 中：

```
<div>
    <div class="display-label">Label 1</div>
    <div class="display-field">Value 1</div>
</div>
<div>
    <div class="display-label">Label 1</div>
    <div class="display-field">Value 1</div>
</div>
... 
```

然后可以将其样式化为表格：

```
#table
{
    display:table;
}
#table > div
{
    display: table-row;
}
#table .display-label
,#table .display-field
{
    display:table-cell;
} 
```

# sql-server-2008 - 带有双引号的数据的 SQL 更新/插入

> ID：12973211
> 
> 赞同：1
> 
> 时间：2012-10-19T11:23:32.653
> 
> 标签：sql-server-2008, ms-access, ms-access-2010, double-quotes, datahandler

我有一个使用评估和其他工具收集客户信息的数据库。通常在评估中，数据中有双引号，当——正如预期的那样——直接引用被捕获。当我运行 sql 更新（使用 VBA 访问前端到 SQL Server 2008 R2 后端）时，它会在数据中出现双引号。在此期间，我要求员工在输入数据时使用单引号，但这是一个不可持续的解决方案，因为他们忘记了，并且程序在遇到双引号时会崩溃。数据类型是 nvarchar(max)。

当前的 VBA 字符串如下所示：

> strInsertSQL = "插入到 tblIRPDetail(IRPID, SectionID, Challenge, Goal, Objective, Intervention, IntDate) VALUES(" & intNewID & ", " & intSection & ", """ & strChallenge & """, """ & strGoal & """, """ & strObjective & """, """ & strIntervention & """, """ & strIntDate & """);"

基本上任何 strVariables 都可以有任何组合的单引号或双引号。它适用于单引号，但不适用于双引号。当然这是一个相当普遍的问题，我希望有人有一个简单的解决方案！

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T11:36:55.897

参数化您的查询并将值添加为参数。

这可能会有所帮助： [ms access 2003 using vba 中的参数化查询](https://stackoverflow.com/questions/2315630/parameterized-query-in-ms-access-2003-using-vba)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T12:39:16.450

给我一分钟，复制一下我用来执行此操作的方法。

同时为什么不做一个`Replace(val, """, "'")`？这样`"`字符串中的任何实例都将替换为单引号`'`？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-19T14:52:37.517

Access SQL 语句可以对文本值使用单引号或双引号。因此，您可以在 INSERT 语句中使用单引号，但是当要插入的文本包含单引号并且您可以通过在插入文本中加倍单引号来解决此问题时，您会遇到类似的问题：

```
Replace(strChallenge, "'", "''") 
```

这似乎并没有太大的改善。OTOH，由于您使用 VBA 向表中插入一行，因此您不需要使用`INSERT`查询。

打开您的表格`DAO.Recordset`，添加一个新行，然后将您的变量值分配给相应的字段。

```
Public Sub NPO_AddRow()
    Dim db As DAO.Database
    Dim rs As DAO.Recordset

    Set db = CurrentDb
    Set rs = db.OpenRecordset("tblIRPDetail", dbOpenTable, dbAppendOnly)
    With rs
        .AddNew
        !IRPID = intNewID
        !SectionID = intSection
        !Challenge = strChallenge
        !Goal = strGoal
        !Objective = strObjective
        !Intervention = strIntervention
        !IntDate = strIntDate
        .Update
        .Close
    End With
    Set rs = Nothing
    Set db = Nothing
End Sub 
```

请注意，与参数查询不同，此方法将允许您添加长度超过 255 个字符的文本字符串。

# sql - SQL检查id为= 333的字段的数值是否为0

> ID：12973215
> 
> 赞同：0
> 
> 时间：2012-10-19T11:23:41.763
> 
> 标签：sql, select-case

在 SQL SELECT CASE STATEMENT 中，我将如何检查 sometable 中某个 coulmn 的值是否等于 0，其中 id 等于某个值？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-19T11:25:06.053

```
select
    case
        when (select column_name from sometable where id = @id) = 0 then
        else 
    end 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-19T11:26:45.587

```
select 
 case when( select column from table where id=333)=0 then "your condition"
else
end 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-19T11:35:58.140

我对你的问题的解释：

SQL检查字段（Field1）的数值是否为0 [仅]当id=333时
[如果id不是333，则不需要检查]

```
SELECT CASE WHEN isnull(id,0) <> 333 OR Field1=0 THEN 1 ELSE 0 END
      ,other1, other2
  FROM tbl 
```

# javascript - Javascript 数组。先进的

> ID：12973220
> 
> 赞同：1
> 
> 时间：2012-10-19T11:23:56.843
> 
> 标签：javascript, arrays, sorting, hasownproperty

我的 php 脚本中有 JSON 字符串，如下所示：

```
var r.co = {
                "A20018425":[
                                {"balance":"1390.31"},      // 1
                                {"balance":"1304.11"},      // 2
                                {"balance":"1188.11"},      // 3
                                {"balance":"1421.71"}       // 4
                            ],

                "A25005922":[
                                {"balance":"1000"},         // 1
                                {"balance":"1000.86"},      // 2
                                {"balance":"986.32"},       // 3
                                {"balance":"988.96"},       // 4
                                {"balance":"980.26"},       // 5
                                {"balance":"980.16"}        // 6 MAX 
                            ],

                "A25005923":[
                                {"balance":"1001"},         // 1
                                {"balance":"1000.16"},      // 2
                            ]           
            } 
```

我不知道有多少个 AXXXXXXXX 元素，它包含多少个元素。要获得 A 元素，我使用以下代码：

```
var accounts = [];
for(var key in r.co) {
   if(r.co.hasOwnProperty(key)) {
      accounts.push(key);
   }
} 
```

现在我知道我的 A 元素长度

```
var accounts_length = accounts.length; // 3 for example 
```

现在我需要知道 A 中元素的最大长度：

```
var accounts_elements_length = [];

    for (var c = 0; c < accounts.length; c++) {   

          accounts_elements_length.push(r.co[accounts[c]].length);
    }

    var accounts_elements_length_max = accounts_elements_length.max() // 6 For example 
```

我怎样才能得到这个图表的输出数组？

```
var outputData = [{
                        count:      1,
                        A20018425:  1390.31,
                        A25005922:  1000,
                        A25005923:  1001
                    }, {
                        count:      2,
                        A20018425:  1304.11,
                        A25005922:  1000.86,
                        A25005923:  1000.16
                    }, {
                        count:      3,
                        A20018425:  1188.11,
                        A25005922:  986.32
                    }, {
                        count:      4,
                        A20018425:  1421.71,
                        A25005922:  988.96
                    }, {
                        count:      5,
                        A25005922:  980.26
                    }, {
                        count:      6,
                        A25005922:  980.16
                    }
        }]; 
```

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T12:03:49.183

刚刚结合了你的算法：

```
var outputData = [];
for (var key in r.co) {
   if (r.co.hasOwnProperty(key)) {
      var account_length = r.co[key].length;
      for (var c = 0; c < account_length; c++) {
          if (outputData[c] === undefined) {
              outputData[c] = { count: c+1 };
          }
          outputData[c][key] = r.co[key][c].balance;
    }
   }
}
console.log(outputData); 
```

[jsfiddle](http://jsfiddle.net/yh49d/1/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-19T11:51:37.393

代码 ：

```
var outputData = [];
for (var i = 0; i < 6; i++) { // filter should be - i < accounts_elements_length_max
    var temp = {
        'count': i + 1
    };

    for (var j = 0; j < accounts.length; j++) {
        if (r[accounts[j]][i]) temp[accounts[j]] = r[accounts[j]][i].balance;
    }

    outputData.push(temp);
} 
```

请注意，我对 accounts_elements_length_max(6) 进行了硬编码。

我得到的输出：

```
[{
    "count": 1,
    "A20018425": "1390.31",
    "A25005922": "1000",
    "A25005923": "1001"},
{
    "count": 2,
    "A20018425": "1304.11",
    "A25005922": "1000.86",
    "A25005923": "1000.16"},
{
    "count": 3,
    "A20018425": "1188.11",
    "A25005922": "986.32"},
{
    "count": 4,
    "A20018425": "1421.71",
    "A25005922": "988.96"},
{
    "count": 5,
    "A25005922": "980.26"},
{
    "count": 6,
    "A25005922": "980.16"}]​ 
```

工作[小提琴](http://jsfiddle.net/gZyaV/2/)

# mysql - 如何在 MySQL 中将列表字段转换为多对多表

> ID：12973221
> 
> 赞同：0
> 
> 时间：2012-10-19T11:24:05.973
> 
> 标签：mysql, many-to-many, pattern-matching, database-migration

我继承了一个数据库，其中一个人表有一个名为 authorised_areas 的字段。前端允许用户从选择列表中选择多个条目（填充区域表的描述字段中的值），然后将 authorised_areas 的值设置为逗号分隔的列表。我正在将其迁移到 MySQL 数据库，当我使用它时，我想通过从 person 表中删除 authorised_areas 字段并创建一个多对多表 person_area 来提高数据库完整性-区域键。有几百个人记录，所以我想找到一种方法来有效地使用一些 MySQL 语句，而不是单独的插入或更新语句。

澄清一下，当前的结构类似于：

```
person
id    name    authorised_areas
1     Joe     room12, room153, 2nd floor office
2     Anna    room12, room17

area
id    description
1     room12
2     room17
3     room153
4     2nd floor office 
```

...但我想要的是：

```
person
id    name
1     Joe
2     Anna

area
id    description
1     room12
2     room17
3     room153
4     2nd floor office

person_area
person_id     area_id
1             1
1             3
1             4
2             1
2             2 
```

person 表中没有对 area id 的引用（并且列表中的某些文本值与 area 表中的描述不完全相同），因此这需要通过文本或模式匹配来完成。我最好只编写一些 php 代码来拆分字符串，找到匹配项并将适当的值插入到多对多表中吗？

如果我是第一个必须这样做的人，我会感到惊讶，但是谷歌搜索没有找到任何有用的东西（也许我没有使用适当的搜索词？）如果有人可以提供一些建议有效地做到这一点，我将非常感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T11:47:22.927

虽然可以做到这一点，但我建议作为一项临时工作，使用 php（或您最喜欢的脚本语言）脚本来执行多个插入可能会更快。

如果您必须在单个语句中执行此操作，则有一个整数表（0 到 9，与自身交叉连接以获得所需的最大范围）并将其与原始表连接，使用字符串函数获取第 X 个逗号以及每行的每个值。

可能的，我已经这样做了，但主要是为了表明有一个分隔字段不是一个好主意。敲出带有多个插入的脚本可能会更快。

您可以基于这样的 SELECT 插入（尽管这也会为每个人和相关人员提供一个空行，并且每人最多只能处理 1000 个授权区域）

```
SELECT z.id, z.name, x.an_authorised_area
FROM person z
LEFT OUTER JOIN (
SELECT DISTINCT a.id, SUBSTRING_INDEX( SUBSTRING_INDEX( authorised_areas, ",", b.ournumbers ) , ",", -1 ) AS an_authorised_area
FROM person a, (
SELECT hundreds.i *100 + tens.i *10 + units.i AS ournumbers
FROM integers AS hundreds
CROSS JOIN integers AS tens
CROSS JOIN integers AS units
)b
)x ON z.id = x.id 
```

# c# - 存储在 DLL 中以调用的 C# 数据库连接

> ID：12973229
> 
> 赞同：3
> 
> 时间：2012-10-19T11:24:26.897
> 
> 标签：c#, database, security, dll, connection

我是 C# 和 .NET 编码实践的更多增强功能的新手

我一直在尝试寻找在 C# 中为 Winforms、Windows 服务和 ASP.NET Web 应用程序使用特定方法的解决方案，在这些应用程序中，您可以编写与 SQL 的连接并将 C# 代码文件转换为要在项目中使用的 dll。

这个想法是创建连接并将其转换为 dll，以便每次启动函数并需要建立数据库连接时，您只需将其写入您所说的位置

```
Function ABC
{
    //VB Version would be like this as i have seen this
    Dim DCDLL as New Dataconn 

    //Where 'DCDLL' is the DLL file which is being declared as a new dataconnection

    //C# Version would be Alon these Lines
    SQLConnection DataConn = New SQLConnection(DCDLL)
} 
```

我只看到了调用的 VB 代码版本，所以我不热衷于 C# 方法，这将完成

同时，DLL 包含所有其他代码，例如

```
string ConnectionString = 
                    "Data Source=Datasource; UID=User; PWD=Pass; Persist Security
                     Info=True; Initial Catalog= Catalog";
Dataconn = new SqlConnection(ConnectionString);
Dataconn.Open(); 
```

DLL 的目的是处理与数据库的连接，如果数据连接不成功，打开它会捕获错误，并在需要时关闭连接，这样您就不必每次都以编程方式执行此操作。它也只负责连接，因此您可以使用函数来调用连接执行过程以及其他任何需要。

使用 DLL 的想法只是让数据库的连接设置更加安全，连接显然不会变得超级安全，但它比在代码页中包含代码等增加了更多的安全性。

我已经与人们交谈并看到人们使用这种方法，但我对如何通过谷歌和其他来源实现这一目标的研究似乎并不理解我在寻找什么。

我试图了解，当我对这个文件进行编码时，它必须如何完成，以确保它正确处理数据库连接而不会出现问题并且不会中断。

如果有人可以在 C# 中给我提供如何执行此操作的示例，将不胜感激，或者如果您知道任何解释了如何实现此目标的页面，我将非常感谢您的帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T11:32:07.923

您应该将连接字符串放在 app.config / web.config 中，并使用 c# 获取值...

[在 c# 中从 app.config 获取 ConnectionString](https://stackoverflow.com/questions/8693492/get-connectionstring-from-app-config-in-c-sharp)

您还可以加密连接字符串...

[http://msdn.microsoft.com/en-us/library/89211k9b(v=vs.80).aspx](http://msdn.microsoft.com/en-us/library/89211k9b(v=vs.80).aspx)

# jquery - jqueryMobile 提交滑块

> ID：12973236
> 
> 赞同：0
> 
> 时间：2012-10-19T11:24:38.113
> 
> 标签：jquery, jquery-mobile, symfony, slider

我是 jqueryMobile 的新手，我想发布滑块的值，但我找不到方法或脚本可以帮助我做到这一点

这里有一些资源，但我找不到我要找的东西

[在此处输入链接描述](https://stackoverflow.com/questions/7537904/how-to-post-when-sliders-value-is-changed-button-is-pressed-with-jquery-mobile)

这里是滑块

```
 <div data-role="fieldcontain">
            <input type="range" name="slider-fill" id="slider-fill" value="{{page}}" min="1" max="{{nb_pages}}" data-highlight="true" />
        </div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T12:13:16.283

jQM 文档：

*   [http://jquerymobile.com/demos/1.2.0/docs/forms/forms-sample-selfsubmit.php](http://jquerymobile.com/demos/1.2.0/docs/forms/forms-sample-selfsubmit.php)

例子：

```
<form action="yourScriptToHandleThePost.php" method="post">

<div data-role="fieldcontain">
    <label for="timeout">Timeout:</label>
    <input type="range" name="timeout" id="timeout" value="0" min="0" max="150" step="10" data-highlight="true"  />
</div>

<button type="submit" name="submit" value="submit" data-theme="b">Submit</button>

</form> 
```

更新：

我认为这是您正在寻找的功能

*   [http://jsfiddle.net/m4ZEL/](http://jsfiddle.net/m4ZEL/)

因此，对于每个值范围，您可以在用户滑动滑块时发布数据

# html - 如何在 HTML 中打印隐藏的表格？

> ID：12973237
> 
> 赞同：0
> 
> 时间：2012-10-19T11:24:42.760
> 
> 标签：html, css, printing, css-tables

我在 HTML 页面上有两个表格。一是在屏幕上可见，二是使用 CSS 隐藏。我想打印隐藏的表格。

我该怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-19T11:26:35.633

创建一个 print.css 样式表并将表格设置为可见。

```
<link rel="stylesheet" href="print.css" type="text/css" media="print" /> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-19T11:27:34.603

添加打印样式表并将`display`属性设置为`table`：

在要打印表格的页面上，添加：

```
<link rel="stylesheet" media="print" href="/path/to/print.css" type="text/css" /> 
```

然后在里面`print.css`，添加：

```
table { 
    display: table; 
    visibility: visible;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-22T05:50:53.950

尝试这个 ：

```
<a href="javascript:void(0);" id="printPage">Print</a> 
<table id="tblprint" style="visibility:hidden;">
  <tr>
      <td>Print Data</td>
  </tr>
</table>

<script lang='javascript'>
 $(document).ready(function(){
  $('#printPage').click(function(){
        var data = '<input type="button" value="Print this page" onClick="window.print()">';           
        data += '<div id="div_print">';
        data += $('#tblprint').html();
        data += '</div>';

        myWindow=window.open('','','width=200,height=100');
        myWindow.innerWidth = screen.width;
        myWindow.innerHeight = screen.height;
        myWindow.screenX = 0;
        myWindow.screenY = 0;
        myWindow.document.write(data);
        myWindow.focus();
    });
 });
</script> 
```

# cdn - 如何通过 CDN 中的库实际使用 JAWR

> ID：12973239
> 
> 赞同：0
> 
> 时间：2012-10-19T11:24:48.987
> 
> 标签：cdn, jawr

我们使用 JAWR 来提供内容，但也希望使用 CDN 来分发脚本。例如，要使用 jQuery，我们有：

```
jawr.js.bundle.jquery.id=/bundles/jquery.js
jawr.js.bundle.jquery.mappings=/js/lib/.license,/js/lib/jquery-1.8.2.js
jawr.js.bundle.jquery.productionURL=http://ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js 
```

这很好用。我们在调试模式下获取本地库，在生产模式下从 CDN 获取。但是，让我们添加：

```
jawr.js.bundle.bootstrap.id=/bundles/bootstrap.js
jawr.js.bundle.bootstrap.mappings=/js/lib/bootstrap-2.1.0/js/.license,/js/lib/bootstrap-2.1.0/js/bootstrap.js
jawr.js.bundle.bootstrap.dependencies=jquery 
```

现在，在使用 访问（而不是启动）页面时`/bundles/bootstrap.js`，JAWR 会抛出一个讨厌的异常：

```
java.lang.IllegalStateException: The bundleDataHashCode must be set before accessing the url prefix.
    at net.jawr.web.resource.bundle.JoinableResourceBundleImpl.getURLPrefix(JoinableResourceBundleImpl.java:560)
    ...
    at net.jawr.web.taglib.AbstractResourceBundleTag.doStartTag(AbstractResourceBundleTag.java:68)
    ... 
```

这是否意味着我不能依赖带有 a 的捆绑包`productionURL`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T12:41:47.403

在 JAWR 上有一个关于此的未解决问题和论坛中的一个线程（没有任何答案）。现在的答案（来自我自己）是：

> 您可以使用`productionURL`，但不要依赖这些捆绑包。被破坏的只是依赖机制。手动添加所有必要的`<jawr:.../>`标签是可行的。

# javascript - 多个切换。/隐藏显示/打开时关闭其他人

> ID：12973252
> 
> 赞同：0
> 
> 时间：2012-10-19T11:25:37.807
> 
> 标签：javascript, jquery, function, toggle

当涉及到这部分编程时，仍然是一个菜鸟。我有一个关于我用切换功能“解决”的问题的问题。我有 3 个按钮（放置在页面上的不同 div 中，所以它不是选项卡切换）。我试图实现的是，当我有一个按钮处于活动状态并单击另一个按钮时，我希望关闭活动按钮。我在这里查找了一些类似的 jfiddle 帖子，尝试将其实现到页面并自己弄清楚，但到目前为止对我没有任何帮助。我目前用于一个按钮的功能是

```
<script type="text/javascript">
  $(function() {
    $('#toggle5').click(function() {
        $('.infotext').fadeToggle('fast');
        return false;
    });
  });
</script> 
```

一个按钮关闭和打开它就很好，但是当我想要两个按钮并让它们如前所述相互交互时，我不知道从哪里开始。有人知道怎么做吗？切换功能在这里甚至是正确的功能吗？我要提前感谢我在这里得到的任何答案，很棒的社区。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T11:50:13.690

如果关闭意味着禁用，那么下面的代码块就可以解决问题。此外，这仅在您的按钮是提交或按钮类型时才有效。

```
<script type="text/javascript">
  $(function() {
        // click event for the #toggle5 button
        $('#toggle5').click(function() {
           // check if the #toggle6 is disabled
           if ( !$('#toggle6').is(':disabled')) { 
              // if is not disabled, then disabled it
              $('#toggle6').attr("disabled", "disabled");
           }
           return false;
        });
  });
</script> 
```

如果您的按钮是链接，您将需要触发 preventDefault 事件

此处的文档：http: [//docs.jquery.com/Events/jQuery.Event#event.preventDefault.28.29](http://docs.jquery.com/Events/jQuery.Event#event.preventDefault.28.29)

```
<script type="text/javascript">
  $(function() {
        // click event for the #toggle5 button
        $('#toggle5').click(function() {
           $('#toggle6').on("click",function(e){
              // check if we hire the preventDefault event already
              if(!e.isDefaultPrevented()
                 e.preventDefault();
           });
           return false;
        });
  });
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T12:08:33.627

这是一个很好的[小提琴](http://jsfiddle.net/BramVanroy/pHCN3/2/)。

```
$("a").click(function(e) {
    var tClass = $(this).attr("id"),
        content = $("div.content." + tClass),
        link = $(this);

    $("div.content:not('." + tClass + "')").fadeOut("fast");
    $("a").not(link).text("Open");
    content.fadeToggle("fast", function() {
        link.hide().text((content.is(":visible") ? "Close" : "Open")).fadeIn("fast");
    });

    e.preventDefault();
});​ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-03-18T00:46:35.360

这将允许多个切换元素。单击切换第一个打开。单击打开第二个，它将关闭第一个，然后打开第二个。依此类推。也可以通过单击关闭切换，而无需打开另一个切换。

HTML 标记

```
<div class="toggle">See Stuff</div>
<div class="paragraph">
  <p>Content</p>
  <p>Content</p>
  <p>Video</p>
  <p>Image</p>
</div> 
```

jQuery

```
<script>
 $('.paragraph').hide();
 $('.toggle').click(function() {
   var panel = $(this).next()
   $('.paragraph').not(panel).slideUp();
   panel.slideToggle({
    direction: "down"
 }, 1000);
 });
</script> 
```

# android - ContentObserver 的生命周期？

> ID：12973253
> 
> 赞同：3
> 
> 时间：2012-10-19T11:25:38.440
> 
> 标签：android, contentobserver

ContentObserver 的生命周期是什么？一旦注册，应用关闭后是否仍然存在？

如果在应用程序关闭后 ContentObserver 未注册，有没有办法解决这个问题？对于我的具体情况，我想监控电话联系人并在修改联系人后运行一些代码。这需要在联系人更改时发生，而不仅仅是当我的应用程序处于焦点时。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-01T07:20:42.047

观察者需要在服务中。在 onCreate() 中注册观察者。您将在 contentObserver 的 onChange 中使用 contentProvider。您需要保持上次使用共享首选项读取数据库的时间。请注意在共享首选项中存储的时间之后条目的更改。现在将共享偏好的时间更新为当前时间。同时在 onDestroy() 中取消注册内容观察者。

# c++ - 平滑算法

> ID：12973255
> 
> 赞同：6
> 
> 时间：2012-10-19T11:25:51.420
> 
> 标签：c++, algorithm, filter, signal-processing

我为平滑曲线编写了这段代码。它在一个点旁边取 5 个点并将它们相加并取平均值。

```
/* Smoothing */
void smoothing(vector<Point2D> &a)
{
    //How many neighbours to smooth
    int NO_OF_NEIGHBOURS=10;
    vector<Point2D> tmp=a;
    for(int i=0;i<a.size();i++)
    {

        if(i+NO_OF_NEIGHBOURS+1<a.size())
        {
            for(int j=1;j<NO_OF_NEIGHBOURS;j++)
            {
                a.at(i).x+=a.at(i+j).x;
                a.at(i).y+=a.at(i+j).y;
            }
            a.at(i).x/=NO_OF_NEIGHBOURS;
            a.at(i).y/=NO_OF_NEIGHBOURS;

        }
        else
        {
            for(int j=1;j<NO_OF_NEIGHBOURS;j++)
            {
                a.at(i).x+=tmp.at(i-j).x;
                a.at(i).y+=tmp.at(i-j).y;
            }
            a.at(i).x/=NO_OF_NEIGHBOURS;
            a.at(i).y/=NO_OF_NEIGHBOURS;
        }

    }

} 
```

但是我为每个点得到了非常高的值，而不是与前一点相似的值。形状最大化了很多，这个算法出了什么问题？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-19T12:01:13.383

你在这里看到的是一个有限脉冲响应 (FIR) 滤波器的低音实现，它实现了一个[boxcar 窗口函数](http://en.wikipedia.org/wiki/Window_function#Rectangular_window)。考虑 DSP 方面的问题，您需要`vector`使用`NO_OF_NEIGHBOURS`相等的 FIR 系数过滤输入，每个系数的值都为`1/NO_OF_NEIGHBOURS`. 通常最好使用已建立的算法，而不是重新发明轮子。

这是一个相当邋遢的实现，我快速敲定了过滤器加倍。您可以轻松地对其进行修改以过滤您的数据类型。该演示显示了对上升锯函数 (0,.25,.5,1) 的几个周期的过滤，仅用于演示目的。它可以编译，因此您可以使用它。

```
#include <iostream>
#include <vector>

using namespace std;

class boxFIR
{
    int numCoeffs; //MUST be > 0
    vector<double> b; //Filter coefficients
    vector<double> m; //Filter memories

public:
    boxFIR(int _numCoeffs) :
    numCoeffs(_numCoeffs)
    {
        if (numCoeffs<1)
            numCoeffs = 1; //Must be > 0 or bad stuff happens

        double val = 1./numCoeffs;
        for (int ii=0; ii<numCoeffs; ++ii) {
            b.push_back(val);
            m.push_back(0.);
        }
    }    

    void filter(vector<double> &a)
    {
        double output;

        for (int nn=0; nn<a.size(); ++nn)
        {
            //Apply smoothing filter to signal
            output = 0;
            m[0] = a[nn];
            for (int ii=0; ii<numCoeffs; ++ii) {
                output+=b[ii]*m[ii];
            }

            //Reshuffle memories
            for (int ii = numCoeffs-1; ii!=0; --ii) {
                m[ii] = m[ii-1];
            }                        
            a[nn] = output;
        }
    }

};

int main(int argc, const char * argv[])
{
    boxFIR box(1); //If this is 1, then no filtering happens, use bigger ints for more smoothing

    //Make a rising saw function for demo
    vector<double> a;
    a.push_back(0.); a.push_back(0.25); a.push_back(0.5); a.push_back(0.75); a.push_back(1.);
    a.push_back(0.); a.push_back(0.25); a.push_back(0.5); a.push_back(0.75); a.push_back(1.);
    a.push_back(0.); a.push_back(0.25); a.push_back(0.5); a.push_back(0.75); a.push_back(1.);
    a.push_back(0.); a.push_back(0.25); a.push_back(0.5); a.push_back(0.75); a.push_back(1.);

    box.filter(a);

    for (int nn=0; nn<a.size(); ++nn)
    {
        cout << a[nn] << endl;
    }
} 
```

使用这条线增加滤波器系数的数量，以查看逐渐平滑的输出。只有 1 个滤波器系数，没有平滑。

```
boxFIR box(1); 
```

该代码足够灵活，您甚至可以根据需要更改窗口形状。通过修改构造函数中定义的系数来做到这一点。

注意：这将为您的实现提供稍微不同的输出，因为这是一个因果过滤器（仅取决于当前样本和以前的样本）。您的实现不是因果关系，因为它会在未来的样本中提前进行平均，这就是为什么您需要条件语句来处理接近向量末尾的情况。如果您想要输出类似于您尝试使用此算法对您的过滤器执行的操作，请通过此算法反向运行您的向量（只要窗口函数是对称的，这工作正常）。这样，您可以获得类似的输出，而无需算法的讨厌的条件部分。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-04-07T14:20:59.870

过滤有利于“记忆”平滑。这是[learnvst](https://stackoverflow.com/a/12973856/1305053)答案的反向传递，以防止[相位失真](http://en.wikipedia.org/wiki/Phase_distortion)：

```
for (int i = a.size(); i > 0; --i)
{
    // Apply smoothing filter to signal
    output = 0;
    m[m.size() - 1] = a[i - 1];

    for (int j = numCoeffs; j > 0; --j) 
        output += b[j - 1] * m[j - 1];

    // Reshuffle memories
    for (int j = 0; j != numCoeffs; ++j) 
        m[j] = m[j + 1];

    a[i - 1] = output;
} 
```

更多关于 MATLAB 中的零相位失真 FIR 滤波器：http: [//www.mathworks.com/help/signal/ref/filtfilt.html](http://www.mathworks.com/help/signal/ref/filtfilt.html)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-19T11:34:19.780

在以下块中：

```
 for(int j=0;j<NO_OF_NEIGHBOURS;j++)
            {
                a.at(i).x=a.at(i).x+a.at(i+j).x;
                a.at(i).y=a.at(i).y+a.at(i+j).y;
            } 
```

对于每个邻居，您分别将 a.at(i)'sx 和 y 添加到邻居值。

我理解正确，应该是这样的。

```
 for(int j=0;j<NO_OF_NEIGHBOURS;j++)
            {
                a.at(i).x += a.at(i+j+1).x
                a.at(i).y += a.at(i+j+1).y
            } 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-19T12:05:06.953

You make addition with point itself when you need to take neighbor points - just offset index by 1:

```
for(int j=0;j<NO_OF_NEIGHBOURS;j++)
 {
    a.at(i).x += a.at(i+j+1).x
    a.at(i).y += a.at(i+j+1).y
 } 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-19T11:42:22.467

该点的当前值被使用了两次：一次是因为你使用`+=`，一次是如果`y==0`。因此，您正在构建例如 6 个点的总和，但仅除以 5。这个问题在 IF 和 ELSE 情况下都存在。另外：您应该检查向量是否足够长，否则您的 ELSE 案例将在负索引处读取。

以下本身不是问题，而只是一个想法：您是否考虑过使用只触及每个点两次的算法？：您可以存储一个临时 xy 值（初始化为与第一个点相同），然后当您访问每个点您只需添加新点并减去最旧的点，如果它比您的`NEIGHBOURS`背部更远。您为每个点更新这个“运行总和”，并将这个值除以`NEIGHBOURS`-number 存储到新点中。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-06-09T14:24:32.983

这对我来说很好：

```
for (i = 0; i < lenInput; i++)
{
    float x = 0;
    for (int j = -neighbours; j <= neighbours; j++)
    {
        x += input[(i + j <= 0) || (i + j >= lenInput) ? i : i + j];
    }
    output[i] = x / (neighbours * 2 + 1);
} 
```

# android - 如何在默认浏览器中打开本地 html 文件

> ID：12973256
> 
> 赞同：3
> 
> 时间：2012-10-19T11:25:54.137
> 
> 标签：android, browser, android-intent

我可以通过以下方式使用android浏览器打开我的本地html文件：

```
Intent intent = new Intent(Intent.ACTION_VIEW);
intent.setDataAndType(webPageUri, "text/html");
intent.setClassName("com.android.browser", "com.android.browser.BrowserActivity");
startActivity(intent); 
```

它有效。但我想在**默认浏览器**中打开我的本地 html 文件而不指定：

```
intent.setClassName("com.android.browser", "com.android.browser.BrowserActivity"); 
```

有没有办法做到这一点？

**编辑：**

如果我按照您的建议删除 setClassName，它将在 HtmlViewer 中打开（它不是**默认浏览器**）。如果我这样做：

```
Intent intent = new Intent(Intent.ACTION_VIEW);
intent.setData(webPageUri);
startActivity(intent); 
```

我得到：ActivityNotFoundException

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T11:47:36.233

只需使用：

```
Intent intent = new Intent(Intent.ACTION_VIEW);
intent.setDataAndType(webPageUri, "text/html");
startActivity(intent); 
```

这将为用户提供可供选择的已安装浏览器列表。如果只有一个浏览器，则将启动该浏览器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T11:39:47.347

只需删除该`setClassName()`行，您就可以开始了。

如果它是手机中唯一的浏览器，这将启动默认浏览器。如果有多个，用户将不得不选择一个。

# iphone - 如何在 cocos2d iphone 中向 ccsprite 添加手势识别器？

> ID：12973257
> 
> 赞同：2
> 
> 时间：2012-10-19T11:25:54.650
> 
> 标签：iphone, cocos2d-iphone

我是 Cocos2D 的初学者。我想在特定的 CCSprite 上添加手势，但我在 CCLayer 上有手势。我的要求是在 CCSprite 上添加手势。这个怎么做？

我的代码：

```
-(id) initWithMask
{

    CCSprite *mask=[CCSprite spriteWithFile:@"circle_mask.png"];
    [self addChild:moveGlopFront z:1];
    UISwipeGestureRecognizer *swipeGestureRecognizer = [[UISwipeGestureRecognizer alloc]                     initWithTarget:self action:@selector(handlePushSceneGestureRecognizer:)];
    [self addGestureRecognizer:swipeGestureRecognizer];

    swipeGestureRecognizer.direction = UISwipeGestureRecognizerDirectionLeft;

    swipeGestureRecognizer.delegate = self;
}

-(void)handlePushSceneGestureRecognizer:(UISwipeGestureRecognizer*)aGestureRecognizer
{

    for(CCNode *child in layer.children)
    {
        [child stopAllActions];
    }

    for(CCNode *child in layer.children)
    {
    [moveGlopFront setTexture:[moveGlopBack texture]];
    [moveGlopFront runAction:[CCRepeatForever actionWithAction:[CCRotateBy   actionWithDuration:5.0 angle:360]]];
    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T00:22:34.713

而是将手势识别器添加到图层中，并在手势识别器实现中使用 CGRectIntersectsRect 选择器检查您是否触摸了精灵。

# c# - 正则表达式逗号分隔字符串验证

> ID：12973258
> 
> 赞同：4
> 
> 时间：2012-10-19T11:25:58.270
> 
> 标签：c#, regex

我有一个字符串，只有当它有 2 个字符并且用逗号分隔时才有效。

```
AD,AC,AN,JP (valid)
AD (valid) if user enter only one it must be validate 
```

如果是数字或逗号以外的任何其他字符或长度大于 2，则必须返回无效。

```
AD,12,AN,JP (invalid)
AAD,12,AN,JP (invalid)
AA,CC,ANA,JP (invalid)
AA,#C,AA,JP (invalid) 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-19T11:35:29.890

这假设输入总是大写：

```
var reggie = new Regex(@"^[A-Z]{2}(,[A-Z]{2})*$"); 
```

如果除了验证输入之外，您还想提取数据，则可以对逗号执行简单的拆分（不需要正则表达式拆分）：

```
if (reggie.IsMatch(inputString))
    string[] values = string.Split(','); 
```

# iphone - 使用 GDataXML 解析 XML 返回一个 NSString 对象，其 retainCount 为 95。如何确保它被释放？

> ID：12973259
> 
> 赞同：0
> 
> 时间：2012-10-19T11:25:59.020
> 
> 标签：iphone, ios, memory-management, gdataxml

以下代码获取的 NSString 对象的 retainCount 为 95。

```
for(GDataXMLElement *ele in [doc.rootElement elementsForName:@"myKey"])
    {
        NSLog(@"myKey %d",[[[ele.children objectAtIndex:0] stringValue] retainCount]);

        [myDict setObject:[[ele.children objectAtIndex:0] stringValue] forKey:@"myKey"];

    } 
```

. 那么它会在以后发布吗

```
[myDict removeAllObjects];
[myDict release]; 
```

叫做。

我面临的问题是我解析了数百个这样的字符串......并且他们所有的保留计数都在 95 左右......这些字符串会被释放吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-19T16:42:33.480

> 我面临的问题是我解析了数百个这样的字符串......并且他们所有的保留计数都在 95 左右......这些字符串会被释放吗？

**一是`retainCount`没用**。不要叫它。不，真的，[不要使用 retainCount](http://www.whentouseretaincount.com/)。

要回答您的问题，请查看 Instruments。您期望消失的对象是否真的保留在内存中？如果是这样，那么打开引用计数跟踪并查看哪些仍然持有对它们的引用（或者哪些保留是不平衡的）。

很可能，XML 子系统对字符串进行唯一化，这样可能重复数百次的内容只有一份副本在内存中。结果，一份副本可能会保留数十次或数百次。当您`removeAllObjects`来自`myDict`时，可能仍然存在对对象的引用。它甚至可能是一个`autorelease`d 引用，因此实际上会消失。

唯一知道的方法是查看对象是否通过 Instruments（或其他方式）释放。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-19T11:55:23.773

根据许多其他人给出的定义和解释，包括 raywinderlich 在他的[How To Choose The Best XML Parser for Your iPhone Project](http://www.raywenderlich.com/553/how-to-chose-the-best-xml-parser-for-your-iphone-project)中。

[GDataXML 只不过](http://code.google.com/p/gdata-objectivec-client/source/browse/trunk/Source/XMLSupport/)是一个用于 iPhone 的 NSXML 样式的 DOM XML 解析器，由 Google 开发，作为其 Objective-C 客户端库的一部分。它仅由一个 M 文件和一个标头组成，支持读写 XML 文档和 XPath 查询。

**DOM 解析器**读取整个文档并建立一个内存表示，您可以查询不同的元素。通常，您甚至可以构造 XPath 查询来提取特定的部分。

所以它只是为给定的整个 XML 创建一个树状结构，可以查询每个元素以提取特定的部分。

正如我们所知，这一切都与指针一起工作，所以我们从这棵树中获得的任何元素都将只是指向该对象，具有相同的名称（在初始化 xml 时使用）或在拉取特定部分时使用新名称（使用`NSXMLElement`）。

因此，所有内容都将保留，直到我们在初始化 XML 时发布 XMLDoc。

如果您愿意，我们可以在释放 XMLDoc 后检查保留计数（但它可能会导致崩溃，因为我们使用释放的对象）。

我认为它以这种方式工作，如果您或其他开发人员对此有任何其他信息，请分享您的信息。

# html - 为订单生成多级客户收据

> ID：12973260
> 
> 赞同：0
> 
> 时间：2012-10-19T11:26:03.113
> 
> 标签：html, asp.net-mvc

我的目标是生成客户收据视图，他们将在提交订单后获得该视图。收据应包含他们订购的所有食品。每个食物项可以包含多个子项。

模型正在返回如下数据；

![在此处输入图像描述](../Images/94f9a3a77ad86ec20d7103fd5ae885fe.png)

如果你仔细看，那些有 parentitemid 的都是子项。并且它们应该显示在其父项下。

目标应如下所示；

![在此处输入图像描述](../Images/3559abea041073615efa0e5d6242b798.png)

现在的问题是我已经尝试了很多东西（即 if-else 内的 foreach 等），但没有得到这个观点。

是否有可能从这种数据中生成这样的视图？任何人都可以帮助我一些想法plzzz！

**编辑：**

我有一些进展..现在看起来如何.. ![在此处输入图像描述](../Images/a03f9b84b9de6ff7ef79df41e63f649d.png)

现在，我将如何在主项目下显示子项目的价格......？？

这是我的代码

```
<%foreach (var i in Model.OrderItems)
      { %>
      <tr>
        <td style="vertical-align:top;">1</td>
        <td style="width:40%;"><%:i.fiitemName%>
        <br />
        <table style="margin-left:10px;">
            <%foreach (var k in Model.getOrderSubItems("36-171012-2", i.fiID))
              { %>

                    <tr style="height:30px;">
                        <td style="width:100px;"><%:k.FoodItemName %></td>
                        <td style="width:100px;"><%:k.SubItemPrice %></td>
                    </tr>
           <%} %>
           </table>
        </td>
        <td style="vertical-align:top;"><%:i.msize%></td>
        <td style="vertical-align:top;"><%:i.ItemNote %></td>
        <td style="vertical-align:top;"><%:i.mprice%></td>

      </tr>

    <%} %> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T11:35:11.403

你的模型看起来怎么样？一个简单的模型示例：

```
public class Order
{
    public int Id { get; set; }
    public List<Item> Items { get; set; }

    public class Item
    {
        public int Id { get; set; }
        public string Name { get; set; }
        public int Qty { get; set; }
        public decimal Price { get; set; }
        public List<Item> SubItems { get; set; }
    }
} 
```

然后要显示，您可以遍历订单上的所有项目，然后在该项目中循环任何子项目。

```
foreach (var item in Order.Items)
        {
            foreach (var subItems in item.SubItems)
            {
            }
        } 
```

# jquery - 如何使用 jQuery keyup 事件修改 HTML 输入的值

> ID：12973263
> 
> 赞同：0
> 
> 时间：2012-10-19T11:26:15.913
> 
> 标签：jquery, input

我有 3 个 HTML 输入。修改输入 1 中的文本时，输入 2 应该使用之前输入 1 中的文本进行更新。输入 3 应该同样使用之前输入 2 中的文本进行更新。

![图表](../Images/92ad725e97917f351301116aa3493532.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T11:30:49.970

你可以这样做。

**[现场演示](http://jsfiddle.net/HYTcG/)**

```
<input type="text" id="txt1" class="someclass" />
<input type="text" id="txt1" class="someclass" />
<input type="text" id="txt1" class="someclass" />​

$('.someclass').change(function(){
   $(this).next('.someclass').val($(this).val()); 
   $(this).next('.someclass').change();
});​ 
```

绑定 keyup 事件将在您键入内容后立即更改

**[现场演示](http://jsfiddle.net/HYTcG/1/)**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-19T11:32:54.723

使用 jQuery [val()](http://api.jquery.com/val/)方法根据需要设置输入值。

```
<!doctype html>
<html>
 <head>
 <script type="text/javascript" src="jquery.min.js"></script>
 <script type="text/javascript">
    $(document).ready(function(){
        $("#input1").keyup(function() {
            $('#input2').val($('#input1').val());
            $('#input3').val($('#input2').val());
        });
    });
 </script>
 </head>
 <body>
    <input type="text" id="input1" />
    <input type="text" id="input2" />
    <input type="text" id="input3" />
 </body>
</html> 
```

# android - 更改android对话框的背景颜色

> ID：12973265
> 
> 赞同：3
> 
> 时间：2012-10-19T11:26:27.353
> 
> 标签：android, background, dialog

我有一个使用 AlertDialog.Builder 构建的对话框，我想更改对话框的背景颜色。

我一直在 Internet 上阅读，可以使用 ContextThemeWrapper （使用 API 10），但它不起作用。

我正在做的是：

```
ContextThemeWrapper wrapper = new ContextThemeWrapper(this, R.style.MyDialogTheme);
AlertDialog alertDialog = new AlertDialog.Builder(wrapper)).create();  

<style name="MyDialogTheme" parent="@android:style/Theme.Dialog">
    <item name="android:background">#FFFFFF</item>
</style> 
```

为什么这不起作用？

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-06-14T19:40:07.657

alertDialog xml 文件在这里：

[https://android.googlesource.com/platform/frameworks/base/+/master/core/res/res/layout/alert_dialog_micro.xml](https://android.googlesource.com/platform/frameworks/base/+/master/core/res/res/layout/alert_dialog_micro.xml)

只需更改它们的值：

```
@Override
public Dialog onCreateDialog(Bundle savedInstanceState) {

    AlertDialog.Builder builder = new AlertDialog.Builder(getActivity());
    builder.setTitle(_title);
    builder.setMessage(_message);
    //....
    AlertDialog dialog = builder.show();

    int objeto = getResources().getIdentifier("buttonPanel","id","android");
    View vistaObjeto=dialog.findViewById(objeto);
    if (vistaObjeto!=null){
        vistaObjeto.setBackgroundColor(Color.RED);
    }
    objeto = getResources().getIdentifier("topPanel", "id", "android");
    vistaObjeto = dialog.findViewById(objeto);
    if (vistaObjeto != null){
        vistaObjeto.setBackgroundColor(Color.YELLOW);
    }
    objeto = getResources().getIdentifier("alertTitle","id","android");
    vistaObjeto=dialog.findViewById(objeto);
    if (vistaObjeto!=null){
        ((TextView)vistaObjeto).setTextColor(Color.BLACK);
    }
    objeto = getResources().getIdentifier("titleDivider","id","android");
    vistaObjeto=dialog.findViewById(objeto);
    if (vistaObjeto!=null){
        vistaObjeto.setBackgroundColor(Color.GREEN);
    }
    objeto = getResources().getIdentifier("contentPanel","id","android");
    vistaObjeto=dialog.findViewById(objeto);
    if (vistaObjeto!=null){
        vistaObjeto.setBackgroundColor(Color.BLUE);
    }
    objeto = getResources().getIdentifier("buttonPanel","id","android");
    vistaObjeto=dialog.findViewById(objeto);
    if (vistaObjeto!=null){
        vistaObjeto.setBackgroundColor(Color.MAGENTA);
    }
    objeto = getResources().getIdentifier("parentPanel","id","android");
    vistaObjeto=dialog.findViewById(objeto);
    if (vistaObjeto!=null){
        vistaObjeto.setBackgroundColor(Color.CYAN);
    }
    return dialog;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T11:35:13.257

对自定义对话框使用以下代码：

```
protected Dialog onCreateDialog(int dialogId) {
    LayoutInflater inflater = 
        (LayoutInflater) getSystemService(Context.LAYOUT_INFLATER_SERVICE);
    final AlertDialog.Builder builder = new AlertDialog.Builder(this);
    final View viewMessEdit = inflater.inflate(
        R.layout.example,
        (ViewGroup) findViewById(R.id.dialog_mess_edit_root));
    builder.setView(viewMessEdit);
    viewMessEdit.setBackgroundResource(R.color.pink_dark);
} 
```

并点击此链接：

*   [如何以编程方式更改对话框背景颜色？](https://stackoverflow.com/questions/7269706/how-to-change-dialog-background-color-programatically)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-08-04T10:05:22.213

我已经用 AlertDialog.THEME_DEVICE_DEFAULT_LIGHT 修改了我的 AlertDialog ，所以我写了我的构建器，如下所示：

`AlertDialog.Builder dialog = new AlertDialog.Builder(ApplicationCertificatesListFragment.this.getActivity(), AlertDialog.THEME_DEVICE_DEFAULT_LIGHT);`

# hashtable - Hashtable 不遵循 java 命名规则？

> ID：12973268
> 
> 赞同：0
> 
> 时间：2012-10-19T11:26:35.820
> 
> 标签：hashtable, naming, conventions

> **可能重复：**
> [为什么Java中哈希表（哈希表）中的't'没有大写](https://stackoverflow.com/questions/12506706/why-is-the-t-in-hash-tablehashtable-in-java-not-capitalized)

为什么 java.util.Hashtable 不遵循 java 命名约定？这里的 't' 是小写的，如果它跟在类名后面就是 HashTable...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T11:45:32.700

Hashtable 是在 Java v1 中创建的，与 Java2 中发布的其他表不同。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T11:33:44.463

```
java.util.HashMap;
java.util.HashSet;
java.util.Hashtable 
```

> 因为 Map 和 Set 是 Collection Framework 下的接口，但 table 在当前版本中不是关键字。所以不使用驼峰式。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-10-19T11:30:28.860

看到这个问题：

[为什么Java中哈希表（Hashtable）中的't'没有大写](https://stackoverflow.com/questions/12506706/why-is-the-t-in-hash-tablehashtable-in-java-not-capitalized)

> Hashtable 是在 Java v1 中创建的。集合的一致命名约定是后来在 Java2 中建立的，当时其他类作为全新 Java 集合框架的一部分发布。
> 
> 顺便说一句，Hashtable 已过时，因此不应在新代码中使用它。
> 
> 希望有帮助。

# javascript - 当字符串以空格结尾时，为什么我的正则表达式不起作用？

> ID：12973273
> 
> 赞同：2
> 
> 时间：2012-10-19T11:26:51.453
> 
> 标签：javascript, regex, whitespace

我正在使用这个正则表达式 -`[^\s\da-zA-ZåäöÅÄÖ]+$`过滤掉除 AZ, 0-9 plus the Swedish characters 之外的任何内容`ÅÄÖ`。只要字符串不以空格结尾，它就可以按预期工作，而且我有点困惑我需要正确的东西才能使其接受字符串，即使它们以空格结尾。有，`\s`但显然还不够。

我的正则表达式有什么问题？

```
"something #¤%&/()=?".replace(/[^\s\da-zA-ZåäöÅÄÖ]+$/, '') # => a string

"something ending with whitespace #¤%&/()=? ".replace(/[^\s\da-zA-ZåäöÅÄÖ]+$/, '')# => a string ending with space #¤%&/()=? 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T11:28:27.820

您正在使用*否定*字符类（“任何*不是* 空格、数字、字母等的东西”），因此您的正则表达式无法匹配。

从中删除`\s`，以及`$`（将匹配项与字符串末尾联系起来），它应该可以工作。

如果您确实想在字符串中保留空格并且只在最后删除它们，请使用

```
"something with whitespace #¤%&/()=? ".replace(/[^\s\da-zA-ZåäöÅÄÖ]+|\s+$/g, '') 
```

结果：

```
something with whitespace 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-19T11:29:26.163

*您的正则表达式说：“匹配一个或多个不在*以下范围内的字符实例，*然后是字符串结尾*”。这实质上意味着您的正则表达式将仅匹配出现在字符串末尾的不允许字符序列。由于您的测试字符串以空格结尾，这是您的逻辑允许的，因此没有“字符串末尾出现不允许的字符序列”，因此正则表达式不匹配任何内容。

如果您`$`从正则表达式的末尾删除，则可以实现所需的过滤，而是使用该`g`标志使其全局替换不在指定字符范围内的任何内容为空字符串。

如果您还想修剪尾随空格，最好使用另一个正则表达式或更简单的`trimRight`调用。

# asp.net - .ASPXAuth Cookie 在会话期间发生变化

> ID：12973277
> 
> 赞同：2
> 
> 时间：2012-10-19T11:27:11.920
> 
> 标签：asp.net, security, .aspxauth

有什么理由在经过身份验证的会话中间， .ASPXAUTH cookie 会改变它的值？

ASP.Net_SessionId 似乎没有在同一点更改其值（并且会话尚未过期）。

是否有一些规则规定 .ASPXAUTH cookie 值会定期更新或出于任何其他原因？

问题是我们正在交叉检查在会话期间它们不会更改的这些 cookie 的值，以防止 xss 或会话劫持。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-19T12:15:39.227

The cookie is automatically reissued due to so called "sliding expiration". If your cookie is issued at time T and the cookie timeout is set to X minutes, then the first request made to the server at T + (X/2) causes the cookie to be reissued.

# jquery - 如何使用 jquery 选择 ID 文本框数组

> ID：12973281
> 
> 赞同：10
> 
> 时间：2012-10-19T11:27:14.873
> 
> 标签：jquery, jquery-selectors, selector, textinput

我有代码 HTML

```
<input id="info[text1]" type="text" value="1"/> <br>
<input id="info[text2]" type="text" value="2"/> <br> 
```

我想使用 jquery 选择 id='info[text1]' 但我不能，所以你能帮帮我吗！

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-10-19T11:31:09.220

你必须逃避括号`\\`

```
$("#info\\[text1\\]") 
```

见[http://api.jquery.com/category/selectors/](http://api.jquery.com/category/selectors/)（第二段）

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-19T11:30:00.140

试试这个方法。

```
$('input[id="info[text1]"]') 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-10-19T11:30:12.940

试试这个：

```
$('#info\\[text1\\]'); 
```

[http://jsfiddle.net/UwrVn/](http://jsfiddle.net/UwrVn/)

# django - 为什么南迁失败？

> ID：12973282
> 
> 赞同：1
> 
> 时间：2012-10-19T11:27:17.733
> 
> 标签：django, django-south

我有一个刚刚创建的空白 MySQL 数据库。`south`在我的`INSTALLED_APPS`.

我跑：

```
$ ./manage.py syncdb
...
Creating table some_app_table

You just installed Django's auth system, which means you don't have any superusers defined.
...
Superuser created successfully.
Installing custom SQL ...
Installing indexes ...
Installed 0 object(s) from 0 fixture(s)

Synced:
 > django.contrib.auth
 > django.contrib.contenttypes
...

Not synced (use migrations):
 - myapp
... 
```

```
$ ./manage.py schemamigration myapp --initial
 + Added model myapp.Model
...
Created 0003_initial.py. You can now apply this migration with: ./manage.py migrate myapp 
```

```
$ ./manage.py migrate myapp
Running migrations for myapp:
 - Migrating forwards to 0003_initial.
 > skan:0001_initial
 > skan:0002_initial
FATAL ERROR - The following SQL query failed: CREATE TABLE `myapp_model` (`id` integer AUTO_INCREMENT NOT NULL PRIMARY KEY, `user_id` integer NULL, `name` varchar(200) NOT NULL);
The error was: (1050, "Table 'myapp_model' already exists") 
```

这是怎么回事？为什么 South 不能正确初始化？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-19T12:43:53.363

您已经定义了一些迁移：（`initial`如预期的那样）仅在初始迁移时需要。

你的`syncdb`输出说：

```
Not synced (use migrations):
 - myapp 
```

这表明南方正在按预期工作。但是，然后你这样做：

```
$ ./manage.py schemamigration myapp --initial
+ Added model myapp.Model
...
Created 0003_initial.py. You can now apply this migration with: ./manage.py migrate myapp 
```

注意`0003`-prefix：这（很可能）表明已经定义了迁移。下一个命令的输出证实了这一点：

```
$ ./manage.py migrate myapp
Running migrations for myapp:
 - Migrating forwards to 0003_initial.
 > skan:0001_initial
 > skan:0002_initial
 <snip> 
```

换句话说，您已经进行了几次`initial`迁移，其中至少有一个会创建该表。您的 #3 迁移再次尝试此操作，但失败了，因为该表现在当然存在。

What you need to do is only use `initial` on the creation of your Django app. As soon as the `migrations` folder contains a file called `0001_initial.py`, you don't need any initial migrations anymore. If you change your table from this point on, call it with `auto`, and then migrate:

```
./manage.py schemamigration myapp --auto
./manage.py migrate myapp 
```

# email - 使用与 shell 上下文菜单“作为电子邮件发送”相同的方法将文件作为附件发送

> ID：12973286
> 
> 赞同：0
> 
> 时间：2012-10-19T11:27:36.927
> 
> 标签：email, command-line, send, windows-shell

MS Outlook 在 HKEY_CLASSES_ROOT\mailto\shell\open\command 中使用例如以下行： "C:\PROGRA~2\MIF5BA~1\Office14\OUTLOOK.EXE" -c IPM.Note /m "%1"

使用上下文菜单“发送到 >> 电子邮件”发送文件时，outlook.exe 会收到类似“C:\PROGRA~2\MIF5BA~1\Office14\OUTLOOK.EXE”的调用 -Embedding

如何？explorer shell 是否使用另一个发送到机制？一些论坛文章建议使用上述注册表项...

我的目的是在我自己的应用程序中使用与 windows/explorer/shell 相同的方法（顺便说一句：不，不能使用 System.Net & Co. 的常规 SMTP 发送方法，因为它们需要有关 SMTP 服务器地址的信息， ETC。）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-20T20:18:03.033

如果您查看系统的 SendTo 文件夹，您会找到一个快捷方式，该快捷方式负责将此项目添加到“发送到”菜单。When selected Explorer binds to the folder, obtains an IDropTarget interface for the shortcut using IShellFolder::GetUIObject and simulates a drop of the selected files to the shortcut.

# c# - 访问视图模型中的密码框内容以验证登录

> ID：12973287
> 
> 赞同：0
> 
> 时间：2012-10-19T11:27:42.313
> 
> 标签：c#, wpf, visual-studio-2010, mvvm

和标题说的差不多。似乎对密码内容的访问实际上只能在代码隐藏文件中使用，但是如何将其传递到视图模型中呢？

这仅适用于基本的 WPF 登录屏幕，安全性不是最重要的问题。但是，我们仍然更喜欢使用 PW 框控件。

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-19T12:30:31.647

通常我只是将整个`PasswordBox`对象传递给`LoginCommand`via`CommandParameter`

```
<Button Command="{Binding Path=LoginCommand}"
        CommandParameter="{Binding ElementName=MyPasswordBox}" ... /> 
```

然后我可以将对象转换为 a `PasswordBox`，并从中获取值`PasswordBox.Password`

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-21T12:25:45.323

我的 xml 看起来像，

```
<PasswordBox Name="Password" Password="{Binding Pwd, Mode=TwoWay}"/> 
```

在视图模型中

```
private string _Pwd;
public string Pwd
{
    get { return _Pwd; }
    set { 
        _Pwd = value;
        RaisePropertyChanged(()=>Pwd);
    }
} 
```

# delphi - 如何检测按键被按住的时间？

> ID：12973296
> 
> 赞同：2
> 
> 时间：2012-10-19T11:28:13.503
> 
> 标签：delphi, winapi, keyboard, delphi-7

我正在寻找一种方法来检测在 Delphi 项目中按住键的时间并警告用户。

我正在开发一个聊天程序，需要查看该人是否按住了一个字母（如 W 键）来向该聊天框发送垃圾邮件。我将给出在 Delphi 7 中尝试做的示例：

```
//Looking up if key in use and held for lets say 20 seconds
if (GetAsyncKeyState(Byte(VkKeyScan('W'))) shl 20) <> 0 then
begin
  ShowMessage('W Key Held down too long!');
end; 
```

不过，我不确定 GetAsyncKeyState 是否会给我这些信息。如果没有，会怎样？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-19T20:25:40.600

Windows 不会报告某个键被按住的持续时间，只是会针对`WM_KEY...`被按住的键重复相同的消息。您必须自己手动跟踪持续时间。当您检测到一条`WM_KEYDOWN`将其`wParam`位 30 设置为 1 的消息时，如果您尚未跟踪该密钥，请开始跟踪它并存储当前系统/滴答声，否则获取当前系统/滴答声时间，计算持续时间，然后采取行动因此。当您收到一条`WM_KEYUP`消息时，如果您正在跟踪它，请停止跟踪该密钥。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-19T17:02:42.637

我使用 StopWatch 单元中的 StopWatch 类来检查时间。以下是您可以尝试将其用于您正在尝试做的事情的方法：

```
uses StopWatch;

//in the Form's private declaration:
  StopWatch : TStopWatch;

//in the Form's onCreate:
  StopWatch := TStopWatch.Create(nil);

//in the Form's onDestroy:
  StopWatch.Free();

//in the form/box onKeyDown:
  StopWatch.Start();

//in the form/box onChange:
  if (StopWatch.ElapsedMiliseconds > 1000)
    ShowMessage('W Key Held down too long!');

//in the form/box onKeyUp:
  StopWatch.Stop();
  StopWatch.Start();
  StopWatch.Stop(); 
```

不过，可能还有很多其他方法可以完成您正在尝试做的事情。但是为了快速尝试，这应该可以。

我在 onKeyUp 上停止并再次启动秒表的原因是为了清除 ElapsedMiliseconds，以防用户在收到警报后使用键盘以外的其他方法更改框 - 所以他们不会收到两次警报。

# javascript - 地理定位问题 - 绝对初学者

> ID：12973301
> 
> 赞同：0
> 
> 时间：2012-10-19T11:28:34.510
> 
> 标签：javascript, geolocation

我正在浏览 StackOverflow 并浏览所有的网络资源，但没有一个能告诉我如何完成这项工作。

我只想获取用户当前位置的纬度数。我想通过触发一种方法来做到这一点：`getLat()`就是这样。

它行不通。我尝试返回，但它一直未定义。我尝试更改变量，但这也失败了。各地的论坛都说你需要聪明一点，因为它是“异步的”，而且 API 会阻止你像这样获取 getLat()，但应该有办法。我不明白这特别意味着什么，我很想就此获得一些建议。

```
function getLat(){
var lat1;
function getLocation() {
    navigator.geolocation.getCurrentPosition (function (position){
        var coords = position.coords.latitude;
        lat1 = coords; 
    })
}
return lat1;
}

function getLong(){
var lng1;
function getLocation() {
    navigator.geolocation.getCurrentPosition (function (position){
        var coords = position.coords.longitude;
        lat1 = coords; 
    })
}
return lng1;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T11:32:33.277

这些`getLocation`函数没有被调用。因此，`lat1`and `lng1`，虽然声明了，但仍然没有任何值，因此`undefined`。

此外，它`getCurrentPosition`是异步的。从技术上讲，当数据处理完成时，您不会返回数据，而是向其传递一个函数，类似于“待办事项”。

试试这个：

```
//define a function receiving a callback
function getLat(callback){

    //fire the getCurrentposition function
    navigator.geolocation.getCurrentPosition(function(position){

        //fire the callback that was passed, 
        //passing to it the latitude
        callback.call(this,position.coords.latitude);
    });
}

//now we use the function
getLat(function(lat){
    //do everything else via the lat variable here!
});

//now do the same for getLng 
```

# nginx - NGINX 499 错误代码的可能原因

> ID：12973304
> 
> 赞同：170
> 
> 时间：2012-10-19T11:28:52.497
> 
> 标签：nginx, http-headers, uwsgi

我收到了很多 499 NGINX 错误代码。我看到这是一个客户端问题。这不是 NGINX 或我的 uWSGI 堆栈的问题。当获得 499 时，我注意到 uWSGI 日志中的相关性。

```
address space usage: 383692800 bytes/365MB} {rss usage: 167038976
bytes/159MB} [pid: 16614|app: 0|req: 74184/222373] 74.125.191.16 ()
{36 vars in 481 bytes} [Fri Oct 19 10:07:07 2012] POST /bidder/ =>
generated 0 bytes in 8 msecs (HTTP/1.1 200) 1 headers in 59 bytes (1
switches on core 1760)
SIGPIPE: writing to a closed pipe/socket/fd (probably the client
disconnected) on request /bidder/ (ip 74.125.xxx.xxx) !!!
Fri Oct 19 10:07:07 2012 - write(): Broken pipe [proto/uwsgi.c line
143] during POST /bidder/ (74.125.xxx.xxx)
IOError: write error 
```

我正在寻找更深入的解释，并希望我的 uwsgi 的 NGINX 配置没有问题。我从表面上看。这似乎是一个客户端问题。

* * *

## 回答 #1

> 赞同：218
> 
> 时间：2013-08-23T20:02:08.030

Nginx 中的 HTTP 499 表示客户端在服务器响应请求之前**关闭了连接。**以我的经验通常是由**客户端超时**引起的。据我所知，这是一个 Nginx 特定的错误代码。

* * *

## 回答 #2

> 赞同：98
> 
> 时间：2014-12-07T22:52:49.707

就我而言，我很不耐烦，最终误解了日志。

事实上，真正的问题是 nginx 和 uwsgi 之间的通信，而不是浏览器和 nginx 之间的通信。如果我在浏览器中加载了该站点并等待了足够长的时间，我会得到一个“504 - Bad Gateway”。但是花了很长时间，我一直在尝试，然后在浏览器中刷新。所以我从来没有等待足够长的时间来看到 504 错误。在浏览器中刷新的时候，也就是之前的请求被关闭的时候，Nginx 会在日志中写入 499。

## 细化

在这里，我假设读者知道的和我开始玩时一样少。

我的设置是一个反向代理，nginx 服务器和一个应用程序服务器，它背后的 uWSGI 服务器。来自客户端的所有请求都将转到 nginx 服务器，然后转发到 uWSGI 服务器，然后以相同的方式发送响应。我认为这就是每个人都使用 nginx/uwsgi 并且应该使用它的方式。

我的 nginx 正常工作，但是 uwsgi 服务器出了点问题。uwsgi 服务器无法响应 nginx 服务器有两种方式（可能更多）。

1) uWSGI 说，“我正在处理，请稍等，您很快就会得到响应”。nginx 有一定的时间，它愿意等待，fx 20 秒。之后，它将以 504 错误响应客户端。

2) uWSGI 死了，或者 nginx 在等待它时 uWSGi 死了。nginx 会立即看到，在这种情况下，它会返回 499 错误。

我通过在客户端（浏览器）中发出请求来测试我的设置。在浏览器中什么也没发生，它只是一直挂着。大约 10 秒后（小于超时时间），我得出的结论是有些事情不对（这是真的），并从命令行关闭了 uWSGI 服务器。然后我会去 uWSGI 设置，尝试一些新的东西，然后重新启动 uWSGI 服务器。在我关闭 uWSGI 服务器的那一刻，nginx 服务器会返回 499 错误。

所以我一直在调试 499 错误，这意味着在谷歌上搜索 499 错误。但如果我等待的时间足够长，我就会收到 504 错误。如果我得到了 504 错误，我将能够更好地理解问题，然后能够进行调试。

所以结论是，问题出在 uWGSI 上，它一直挂着（“再等一会儿，再等一会儿，我会给你答案……”）。

我是如何解决*这个*问题的，我不记得了。我想这可能是由很多事情引起的。

* * *

## 回答 #3

> 赞同：37
> 
> 时间：2017-05-17T14:49:53.800

“客户端关闭连接”中的“客户端”不一定是Web浏览器！

如果您在您的用户和您的 Nginx 之间使用负载平衡服务（使用 AWS 或[haproxy](http://www.haproxy.org) ），您可能会在 Nginx 日志文件中发现 499 错误。在此配置中，负载均衡器服务将充当 Nginx 服务器的客户端和 Web 浏览器的服务器，来回代理数据。

对于[haproxy](http://www.haproxy.org)，某些适用超时的默认值是大约 60 秒，用于连接到上游和从上游（Nginx）或下游（Web 浏览器）读取。

这意味着如果代理在大约 60 秒后没有连接到上游进行写入，或者它没有分别从下游（Web 浏览器）或上游（Nginx）接收到任何数据作为 HTTP 请求或响应的一部分，它会关闭相应的连接，至少在 Nginx 一直在处理请求的情况下（耗时太长），这将被 Nginx 视为错误。

繁忙的网站或需要更多时间执行的脚本可能会发生超时。您可能需要找到适合您的超时值。例如将其扩展到更大的数字，例如 180 秒。这可能会为您解决问题。

根据您的设置，您可能会`504 Gateway Timeout`在浏览器中看到 HTTP 错误，这可能表明 php-fpm 有问题。但是，情况并非如此，您的日志文件中有 499 个错误。

* * *

## 回答 #4

> 赞同：19
> 
> 时间：2019-06-23T08:34:59.047

当您指向`499`nginx 记录的连接中止时。**但通常这是在您的后端服务器太慢时产生的**，并且另一个代理首先超时或用户软件中止连接。因此，请检查 uWSGI 是否快速响应，以及 uWSGI / 数据库服务器上是否有任何负载。

在许多情况下，用户和 nginx 之间还有一些其他代理。有些可以在您的基础架构中，例如 CDN、Load Balacer、Varnish 缓存等。其他可以在用户端，例如缓存代理等。

如果您身边有像 LoadBalancer / CDN 这样的代理......您应该将超时设置为首先超时您的后端，然后逐步将其他代理设置为用户。

如果你有：

```
user >>> CDN >>> Load Balancer >>> Nginx >>> uWSGI 
```

我会建议你设置：

*   `n`uWSGI 超时秒数
*   `n+1`到 nginx 超时的秒数
*   `n+2`秒到负载均衡器超时
*   `n+3`CDN 超时秒数。

如果您无法设置某些超时（如 CDN），请查找它的超时并根据它调整其他超时（`n`... `n-1`）。

这提供了正确的超时链。你会发现真的是谁给出了超时并将正确的响应代码返回给用户。

* * *

## 回答 #5

> 赞同：15
> 
> 时间：2019-11-19T00:03:51.803

原来 499 确实意味着“客户端中断连接”。

我的客户端“读取超时”设置为 60 秒（nginx 的默认 proxy_read_timeout 也为 60 秒）。所以在我的情况下发生的是 nginx 会 error.log`upstream timed out (110: Connection timed out) while reading upstream`然后 nginx 重试“您配置的后端服务器组中的下一个代理服务器”。那就是如果你有不止一个。

然后它会尝试下一个和下一个，直到（[默认情况下](http://nginx.org/en/docs/http/ngx_http_proxy_module.html#proxy_next_upstream_tries)）它已经用尽了所有这些。随着每一个超时，它也会将它们从“实时”后端服务器列表中删除。全部用完后，它返回一个`504 gateway timeout.`

所以在我的例子中，nginx 将服务器标记为“不可用”，在下一个服务器上重新尝试，然后我的客户端`60s`超时（立即）发生，所以我会看到一个`upstream timed out (110: Connection timed out) while reading upstream`日志，然后是 499 日志。但这只是时间巧合。

有关的：

如果组中的所有服务器都标记为当前不可用，那么它`502 Bad Gateway.`也会在 10 秒内返回一个。请参见[此处](http://nginx.org/en/docs/http/ngx_http_upstream_module.html#server) `max_fails`和 fail_timeout。记录它会说的日志`no live upstreams while connecting to upstream.`

如果您的服务器组中只有一个代理后端，它只是尝试是一个服务器，并返回 a`504 Gateway Time-out`并且不会从“活动”服务器列表中删除单个服务器，如果`proxy_read_timeout`超过。参见[此处](http://nginx.org/en/docs/http/ngx_http_upstream_module.html)“如果组中只有一个服务器，则忽略 max_fails、fail_timeout 和 slow_start 参数，并且永远不会认为这样的服务器不可用。”

真正棘手的部分是，如果您将 proxy_pass 指定为“localhost”，并且您的盒子恰好同时具有 ipv6 和 ipv4“位置版本”（大多数盒子默认情况下），它就会算作您有服务器组中多台服务器的“列表”，这意味着即使您仅列出[一台服务器](https://stackoverflow.com/a/52550758/32453)，您也可以进入上述情况，即让它返回“502 for 10s” 。请参阅[此处](http://nginx.org/en/docs/http/ngx_http_proxy_module.html#proxy_next_upstream_tries)“如果一个域名解析为多个地址，则所有这些地址都将以循环方式使用。” 一种解决方法是将其声明为`proxy_pass http://127.0.0.1:5001;`（它的 ipv4 地址）以[避免](https://stackoverflow.com/a/52550758/32453)它同时是 ipv6 和 ipv4。然后它算作“只有一个服务器”的行为。

您可以调整一些不同的设置，以使这个问题“减少”。就像增加超时或使其在超时时不会将服务器标记为“已禁用”......或修复列表使其仅大小为 1，见上文 :)

另请参阅：[https ://serverfault.com/a/783624/27813](https://serverfault.com/a/783624/27813)

* * *

## 回答 #6

> 赞同：12
> 
> 时间：2018-10-25T10:45:11.207

就我而言，当客户端的 API 在收到任何响应之前关闭连接时，我得到了 499。从字面上发送一个 POST 并立即关闭连接。这是通过选项解决的：

> proxy_ignore_client_abort on

[Nginx 文档](http://nginx.org/en/docs/http/ngx_http_proxy_module.html#proxy_ignore_client_abort)

* * *

## 回答 #7

> 赞同：5
> 
> 时间：2018-06-19T08:06:51.423

使用带有 php-fpm 的标准 nginx 配置很容易重现此错误。

在页面上按住 F5 按钮将向服务器创建数十个刷新请求。浏览器在新的刷新时取消每个先前的请求。就我而言，我在客户的在线商店日志文件中发现了数十个 499。从 nginx 的角度来看：如果在下一次刷新请求之前尚未将响应传递给客户端，则 nginx 会记录 499 错误。

```
mydomain.com.log:84.240.77.112 - - [19/Jun/2018:09:07:32 +0200] "GET /(path) HTTP/2.0" 499 0 "-" (user-agent-string)
mydomain.com.log:84.240.77.112 - - [19/Jun/2018:09:07:33 +0200] "GET /(path) HTTP/2.0" 499 0 "-" (user-agent-string)
mydomain.com.log:84.240.77.112 - - [19/Jun/2018:09:07:33 +0200] "GET /(path) HTTP/2.0" 499 0 "-" (user-agent-string)
mydomain.com.log:84.240.77.112 - - [19/Jun/2018:09:07:33 +0200] "GET /(path) HTTP/2.0" 499 0 "-" (user-agent-string)
mydomain.com.log:84.240.77.112 - - [19/Jun/2018:09:07:33 +0200] "GET /(path) HTTP/2.0" 499 0 "-" (user-agent-string)
mydomain.com.log:84.240.77.112 - - [19/Jun/2018:09:07:34 +0200] "GET /(path) HTTP/2.0" 499 0 "-" (user-agent-string)
mydomain.com.log:84.240.77.112 - - [19/Jun/2018:09:07:34 +0200] "GET /(path) HTTP/2.0" 499 0 "-" (user-agent-string)
mydomain.com.log:84.240.77.112 - - [19/Jun/2018:09:07:34 +0200] "GET /(path) HTTP/2.0" 499 0 "-" (user-agent-string)
mydomain.com.log:84.240.77.112 - - [19/Jun/2018:09:07:34 +0200] "GET /(path) HTTP/2.0" 499 0 "-" (user-agent-string)
mydomain.com.log:84.240.77.112 - - [19/Jun/2018:09:07:35 +0200] "GET /(path) HTTP/2.0" 499 0 "-" (user-agent-string)
mydomain.com.log:84.240.77.112 - - [19/Jun/2018:09:07:35 +0200] "GET /(path) HTTP/2.0" 499 0 "-" (user-agent-string) 
```

当然，如果 php-fpm 处理时间较长（如沉重的 WP 页面），它可能会导致问题。例如，我听说过 php-fpm 崩溃，但我相信可以阻止它们正确配置服务，例如处理对 xmlrpc.php 的调用。

* * *

## 回答 #8

> 赞同：4
> 
> 时间：2020-07-31T18:16:56.207

我知道这是一个旧线程，但它完全符合我最近发生的事情，我想我会在这里记录它。设置（在 Docker 中）如下：

*   nginx_proxy
*   nginx
*   php_fpm 运行实际的应用程序。

症状是应用程序登录提示出现“502 网关超时”。检查发现的日志：

*   该按钮通过 HTTP 工作`POST`到`/login`...等等...
*   nginx-proxy 得到`/login`请求，最终报超时。
*   nginx返回了一个`499`响应，当然意思是“主机*死了”。*
*   该`/login`请求*根本没有出现（！）*在 FPM 服务器的日志中！
*   FPM 中没有回溯或错误消息... nada，零，zippo，无。

原来问题是连接数据库验证登录失败。但如何弄清楚这一点*纯属猜测。*

完全没有应用程序回溯日志……甚至没有 FPM 收到请求的记录……对我来说是一个完整的*（并且是毁灭性的……）*惊喜。是的，应用程序应该记录故障，但在这种情况下，看起来 FPM 工作进程因运行时错误而死亡，从而导致`499`来自 nginx 的响应。现在，这显然是我们应用程序中的一个问题……某处。但我想记录下发生的事情的细节，以帮助下一个面临这种情况的人。

* * *

## 回答 #9

> 赞同：4
> 
> 时间：2020-02-26T16:14:25.437

这并没有回答 OPs 的问题，但是由于我在疯狂地寻找答案后最终来到这里，所以我想分享我们的发现。

在我们的例子中，事实证明这些 499 是预期的。例如，当用户在某些搜索框中使用预先输入功能时，我们会在日志中看到类似的内容。

```
GET /api/search?q=h [Status 499] 
GET /api/search?q=he [Status 499]
GET /api/search?q=hel [Status 499]
GET /api/search?q=hell [Status 499]
GET /api/search?q=hello [Status 200] 
```

因此，在我们的案例中，我认为它可以安全使用`proxy_ignore_client_abort on`，这在之前的答案中提出了建议。感谢那！

* * *

## 回答 #10

> 赞同：3
> 
> 时间：2016-03-15T05:33:41.337

...从谷歌搜索来到这里

我在这里其他地方找到了答案-> [https://stackoverflow.com/a/15621223/1093174](https://stackoverflow.com/a/15621223/1093174)

这是为了提高我的 AWS 弹性负载均衡器的连接空闲超时！

（我已经使用 nginx/apache 反向代理设置了一个 Django 站点，并且一个非常非常真正的日志后端作业/视图正在超时）

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2015-06-16T08:09:06.340

一旦我得到**499“请求已被防病毒软件禁止”**作为 AJAX http 响应（卡巴斯基安全软件通过轻度启发式分析误报，深度启发式分析正确地知道没有任何问题）。

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2020-03-23T11:32:56.837

就我而言，我的设置如下

```
AWS ELB >> ECS(nginx) >> ECS(php-fpm). 
```

我为 ECS(php-fpm) 服务配置了错误的 AWS 安全组，因此 Nginx 无法访问 php-fpm 任务容器。这就是我在 nginx 任务日志中收到错误的原因

```
499 0 - elb-healthchecker/2.0 
```

健康检查被配置为检查 php-fpm 服务并确认它已启动并返回响应。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2016-06-13T19:17:05.663

这种行为的原因之一可能是您使用`http`for`uwsgi`而不是`socket`. 如果您直接使用，请使用以下命令`uwsgi`。

```
uwsgi --socket :8080 --module app-name.wsgi 
```

.ini 文件中的相同命令是

```
chdir = /path/to/app/folder
socket = :8080
module = app-name.wsgi 
```

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2016-09-18T18:12:21.043

我遇到了这个问题，原因是浏览器上的 Kaspersky Protection 插件。如果您遇到这种情况，请尝试禁用您的插件，看看是否能解决您的问题。

* * *

## 回答 #15

> 赞同：-1
> 
> 时间：2020-03-21T12:46:14.273

就我而言，我已启用`ufw`，但我忘记公开我的上游端口._。

# wpf - 将字符串转换为点名称

> ID：12973305
> 
> 赞同：0
> 
> 时间：2012-10-19T11:28:53.110
> 
> 标签：wpf, string, point

我有：

```
for(int b = 0; b <num; b++)
{
    string naz_pkt = "punkt_" + b.ToString();

    Point naz_pkt = new Point(i,j);
    ....
} 
```

我需要做什么：

我想做点，点的名称将随着循环而改变。我将拥有前任。

```
Point punkt_1 = new Point(0,1);
Point punkt_2 = new Point(0,2);
Point punkt_3 = new Point(0,3);
etc. 
```

之后，我想按多边形绘制这些点。感谢帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T13:23:50.973

如果您并不真正关心点的名称，可以使用列表来保存它们：

```
List<Point> allPoints = new List<Point>();
for(int b = 0; b < num; b++)
{
    Point naz_pkt = new Point(i,j);
    allPoints.Add(naz_pkt);
} 
```

如果您关心名称，则可以使用 KeyValuePair 之类的名称：

```
List<KeyValuePair<string, Point>> allPoints = new List<KeyValuePair<string, Point>>();
for (int b = 0; b < num; b++)
{
    var pointName = "punkt_" + b.ToString();
    var pointObject = new Point(i, j);
    KeyValuePair<string, Point> point = new KeyValuePair<string, Point>(pointName, pointObject);

    allPoints.Add(point);
} 
```

# c++ - netuseradd 用户已存在错误

> ID：12973306
> 
> 赞同：0
> 
> 时间：2012-10-19T11:29:03.743
> 
> 标签：c++, windows-7, createuser

当我尝试在 Windows 7 中以编程方式创建帐户时，我收到用户已存在错误代码，尽管用户不存在。这个问题的原因可能是什么？

```
int wmain(int argc, wchar_t *argv[])
{
USER_INFO_1 ui;
ui.usri1_name =L"test-PC";
ui.usri1_password = L"12";
ui.usri1_priv = USER_PRIV_USER;
ui.usri1_home_dir = NULL;
ui.usri1_comment = NULL;
ui.usri1_flags = UF_SCRIPT;
ui.usri1_script_path = NULL;

addUser(NULL, ui);

while(true){}
return 0; 
```

}

```
int addUser(LPWSTR servername, USER_INFO_1 ui) {
DWORD dwLevel = 1;
DWORD dwError = 0;

// Call the NetUserAdd function, specifying level 1.
NET_API_STATUS nStatus = NetUserAdd(servername, dwLevel, (LPBYTE)&ui, &dwError);

// If the call succeeds, inform the user.
// Nerr_Success error code is 0 independant from nerr_base
if (nStatus == NERR_Success) {
    fwprintf(stderr, L"ADD: User %s has been successfully added on %s\n", "1", "2");
    return 1;
}
//Nerr_base should be given since userexists is calculated by adding nerr_base to error code
else if((NERR_BASE + nStatus) == NERR_UserExists) 
    fprintf(stderr, "ADD: Account already exists: %d\n", nStatus);
else if(NERR_BASE + nStatus == ERROR_ACCESS_DENIED)
    fprintf(stderr, "ADD: Access Denied: %d\n", nStatus);
else if(NERR_BASE + nStatus == NERR_PasswordTooShort)
    fprintf(stderr, "ADD: Password is too short: %d\n", nStatus);
else if(NERR_BASE + nStatus == NERR_PasswordTooLong)
    fprintf(stderr, "ADD: Password is too long: %d\n", nStatus);
else
    fprintf(stderr, "ADD: A system error has occurred2: %d\n", nStatus);

return 0; 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T12:53:50.257

`dwLevel`参数不能为零，根据[`NetUserAdd`](http://msdn.microsoft.com/en-us/library/windows/desktop/aa370649%28v=vs.85%29.aspx)MSDN 文档，它应在 1-4 范围内。

# sql-server - 使用 SQL Server Express 数据库的 SimpleMembership

> ID：12973307
> 
> 赞同：1
> 
> 时间：2012-10-19T11:29:09.613
> 
> 标签：sql-server, asp.net-mvc, simplemembership

我最近发现 ASP.NET MVC 4 使用 SimpleMembership 而不是传统的 ASP.NET Membership 提供程序。

我希望使用 SimpleMembership，但我也希望使用 Sql Server express 数据库（稍后我将使用“真正的”Sql Server db）。

我习惯于使用 aspnet_regsql 为应用程序服务设置我的 sql 服务器数据库，因此插入必要的成员表。

但是，此应用程序不会设置数据库以使用 SimpleMembership。

谁能告诉我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T16:30:04.933

您需要注释掉 WebSecurity.InitializeDatabaseConnection 代码行（否则当您第一次到达登录表单时，应用程序将尝试在定义的 web.config 连接字符串上创建简单的成员资格表）。

然后您将需要更新您的帐户控制器代码，因为它是为 simpleMembership 编写的，以反映您选择的会员提供商。

最近我通过创建一个 MVC3 项目然后将其升级到 MVC4 来做到这一点（[阅读如何将 mvc3 升级到 mvc4 部分](http://www.asp.net/whitepapers/mvc4-release-notes)）。不是最干净的，但它确实使我不必更新帐户控制器代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-08T12:34:17.110

我建议查看 InitializeSimpleMembershipAttribute，它位于“Filters”文件夹中

有一个初始化数据库的命令。如果表已经创建，它会检查自己。

```
WebSecurity.InitializeDatabaseConnection("connStringName", "UserProfile", "UserId", "UserName", autoCreateTables: true); 
```

这些表是：

*   UserProfile => 在我的情况下，因为初始化程序
*   网页_OAuthMembership
*   网页_会员
*   网页_OAuthToken
*   网页_角色
*   网页_UsersInRoles

您可以查看 aspnetwebstack 项目的源代码

# android - 在 Titanium Android 中调整标签组标题高度

> ID：12973309
> 
> 赞同：3
> 
> 时间：2012-10-19T11:29:10.343
> 
> 标签：android, resize, titanium-mobile

我是 Titanium Studio 移动开发的新手。我正在为安卓开发一个应用程序。当我尝试在 WXGA720 屏幕模拟器中运行它时，它看起来不错。但是当我用 WXGA800-7in 屏幕模拟器尝试同样的方法时，它看起来很糟糕。下面是截图供大家参考。

1.  WXGA720 截图：

![WXGA720屏幕](../Images/1006554a4bd9b9b8e1916dbe9fdb5c28.png)

2.  WXGA800-7in 截图：

![WXGA800-7in 中的标签组大小异常](../Images/b6c9f3e4bd3073c4ade6d313694718f1.png)

请建议。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T18:13:37.730

在 Titanium 中为 Android 开发时，它为 TabGroups 使用相同的图像。指定的图像越大，应用程序中就会显示越大。我的解决方案是为不同的设备使用不同的图像。

Android 允许您通过不同的设备配置文件自动执行此操作。

如果您查看 Resources/android/images，则有几个目录，例如：

*   res-long-land-hdpi
*   res-long-land-ldpi
*   res-long-port-hdpi
*   水库长端口 ldpi
*   res-notlong-land-hdpi
*   ...

请[在此处](http://developer.android.com/guide/practices/screens_support.html)查看完整说明。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T14:06:23.290

我找到了解决此问题的方法，因为我希望我的应用程序仅适用于 Galaxy S3 和 Nexus 7。

我编写了代码来检测屏幕大小`Nexus 7` `(height=1216 && width=800)` 并动态设置标签图标，我为 Nexus 使用了较小尺寸的标签图标。

# regex - 正则表达式在 Notepad++ 中查找重复的句子

> ID：12973310
> 
> 赞同：0
> 
> 时间：2012-10-19T11:29:12.700
> 
> 标签：regex, notepad++, replace

我需要通过 Notepad++ 正则表达式搜索查找以下单词是否在文档中出现多次：

```
/resources/common.js 
```

鉴于这些词可能介于其他词之间，例如：

```
<script src="/resources/common.js" type="text/javascript"></script> 
```

因此，只要这些词“/resources/common.js”在该文件中出现多次，搜索就会显示结果。

我需要这个在一个包含数千个文件的大文件夹中找到，只是为了知道哪些文件有重复的句子。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T11:40:45.653

使用“在文件中查找”工具（快捷键是 Ctrl+Shift+F）。输入搜索字符串（无正则表达式），根据需要应用过滤器，然后选择目录。确保选中“在所有子文件夹中”并点击“查找全部”，这应该可以解决问题。

编辑：您实际上是在寻找notepad++ 和许多其他正则表达式引擎不支持的多行正则表达式。请参阅[多行正则表达式搜索和替换！](https://stackoverflow.com/questions/1441044/multiline-regular-expression-search-and-replace)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-01-01T12:44:54.360

你写的是正则表达式，所以我假设你可以访问 Unix 工具链。然后你可以使用grep。选项 -c 报告计数：

```
grep -c cout *.cpp
bitset.cpp:1
Classes.cpp:2
ClearVectorOfUniquePtrs.cpp:2
COAP.cpp:2
ContainerCrash.cpp:0
CopyOptimisation.cpp:17 
```

另一个 grep 整理出零和一个匹配项：
`grep -c cout *.cpp | grep -v -E ":0|:1$"`

如果你有 Unix cut 可用，这会给你文件名列表：
`grep -c cout *.cpp | grep -v -E ":0|:1$" | cut -d : -f 1`

替换`cout`为您的字符串。

# c - 之间的区别 和

> ID：12973311
> 
> 赞同：50
> 
> 时间：2012-10-19T11:29:17.943
> 
> 标签：c, gcc, malloc

当我`malloc`在 C 程序中使用时，我收到警告：

```
warning: incompatible implicit declaration of built-in function 'malloc' [enabled by default] 
```

然后我可以包含`<malloc.h>`或`<stdlib.h>`删除它，`warning`尽管它在没有它的情况下也可以工作。

**`gcc`所以我想知道，当我不包含任何内容时，这些标题和链接有什么区别？**

（我正在使用`ubuntu 12.04 64-bit`with `gcc 4.6.3`）

* * *

## 回答 #1

> 赞同：58
> 
> 时间：2012-10-19T11:31:53.707

标`<malloc.h>`头已弃用（并且非常特定于 Linux，它在其上定义了诸如[mallinfo(3)之类](http://man7.org/linux/man-pages/man3/mallinfo.3.html)*的非标准*函数）。如果您只需要[malloc(3)](http://man7.org/linux/man-pages/man3/malloc.3.html)和相关的标准函数（例如, , ....） ，请改用。请注意，这是由[C89](https://en.wikipedia.org/wiki/C89)（及更高版本）标准定义的，但不是`<stdlib.h>``free``calloc``realloc``<stdlib.h>``<malloc.h>`

看看`/usr/include/malloc.h`你会发现有一些非标准函数（例如[malloc_stats(3)](http://man7.org/linux/man-pages/man3/malloc_stats.3.html)等......） - 除了`malloc`......

并且`gcc`不要链接头文件，而是链接库。阅读 Levine 关于[链接器和加载器](http://www.iecc.com/linker/)的书了解更多信息。

如果您不包含任何标头（并且不明确声明`malloc`自己，这将是一个坏主意），`malloc`则隐式声明为返回某个`int`值（这是错误的）。我确实邀请您在使用时至少将`-Wall`标志传递给`gcc`它。

您还可以通过`-v`了解`gcc`实际涉及的程序：`cc1`编译器是否正确（生成汇编代码）、`as`汇编器、`ld`链接器和[collect2](http://gcc.gnu.org/onlinedocs/gccint/Collect2.html)是调用链接器的内部实用程序。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-10-19T11:34:49.983

**stdlib.h**是一个标准 C 头文件，其中声明了`malloc()`, `calloc()`,`free()`函数。这是您应该包含的标题。

**malloc.h**是一个非标准头文件，在许多系统上都可以找到，它通常定义特定于该平台使用的 malloc 实现的附加功能。

如果您不包含任何这些，则没有默认值，但是如果您`malloc()`在没有事先声明 malloc 函数的情况下调用，C 将假定函数原型是`int malloc();`，这通常是错误的。除了头文件之外，C 编译器通常还链接到标准库，例如 Linux 上的 glibc，malloc 的实现就在其中。

请注意，头文件和库之间存在差异。头文件声明了一些东西，比如结构和函数原型。库包含实现、编译的代码。您链接到库和`#include`头文件。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-10-19T11:31:26.910

标头声明了不同的函数集，但都是 forward-declare `malloc`。

如果您不包括其中任何一个，那么您就没有原型`malloc`，因此会发出警告。但是无论如何，您都链接到同一个函数，因为只有一个`malloc`函数。它只是在两个地方预先声明。前向声明不是为了帮助链接`malloc`函数，它们在那里是为了让编译器可以在调用周围发出正确的代码，指定参数并读取返回值。

请注意，这`<malloc.h>`不是标准包含。我不认为GCC`stdlib.h`包括`malloc.h`，但你可以想象它可能因为这是提供必要声明的一种方式。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-10-19T11:34:11.540

`<malloc.h>`不是标准标头，因此不可移植。标准提出`malloc()`等。在`<stdlib.h>`.

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2016-02-12T23:04:45.777

其他人已经讨论过 <malloc.h> 和 <stdlib.h> 之间的区别

至于两者都不包含时的警告，那是 C 函数如何工作的定义。没有原型的函数（当您没有声明自己的原型并且不包含带有原型的标头时您所拥有的）被视为具有`int`返回类型和*未指定*参数列表的函数。

编译器将执行默认提升（例如 float 到 double 等）并调用该函数。如果函数使用的参数数量与传递的数量不同，或者默认提升后的参数类型与函数的实现不兼容，则为未定义行为。

参见 ISO 9899:1999 (C99) §6.5.2.2，¶ 6：

> 如果表示被调用函数的表达式的类型不包含原型，则对每个参数执行整数提升，并将具有类型的参数`float`提升为`double`. 这些被称为*默认参数提升*. 如果参数的数量不等于参数的数量，则行为未定义。如果函数使用包含原型的类型定义，并且原型以省略号 (, ...) 结尾，或者提升后的参数类型与参数类型不兼容，则行为未定义。如果函数定义的类型不包含原型，并且提升后的参数类型与提升后的参数类型不兼容，则行为未定义，但以下情况除外：
> 
> *   一种提升类型是有符号整数类型，另一种提升类型是对应的无符号整数类型，并且值可以在两种类型中表示；
> *   这两种类型都是指向字符类型或`void`.

在没有原型的情况下调用`malloc()`，这可能会非常糟糕。 `malloc()`接受一个`size_t`参数并返回一个`void *`指针。如果您的整数参数的默认提升结果产生一个大小与 不同的整数`size_t`，您将有未定义的行为。如果`int`大小不同`void *`（例如，在 64 位系统上，`int`通常是 32 位并且`void *`将是 64 位），则返回的指针将被弄乱。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-10-19T11:30:57.050

要了解差异，您应该自己阅读它们的内容。

默认情况下，gcc 都不读取。

当您阅读它们时，您会发现它们的声明`malloc`方式不同。

# c++ - 使用已分配内存的派生类指针的基类指针

> ID：12973315
> 
> 赞同：1
> 
> 时间：2012-10-19T11:29:34.430
> 
> 标签：c++, c++11

取两个只能由`new`. 一类是基类，另一类是派生类。派生类只添加方法。

```
class Base
{};

class Derived : public Base
{};

Base * b = new Base{}
Derived * d = covert( b );

// - or -

Base * b = new Base{};
convert( b ); // converts Base to Derived
Derived * d = dynamic_cast<Derived *>(b); 
```

我想要做的是获取`Base`已分配的类数据，并通过某种方法或函数扩展/包装衍生物，`convert`.

**更新：** 为嵌入式系统构建内存是稀缺的，所以我正在尽我所能减少内存分配量。我只是想知道是否有一种方法可以扩展已经分配内存的基类并用派生类包装它。

**更多更新：** 虽然嵌入式系统是 ARM 并且我目前正在使用 LLVM 编译器，但这在未来可能不是真的。因此，首选符合标准的方式。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T11:47:14.900

在 C++ 中无法提升类。你可能想要做的是 - 就像你说的 - 换`Base`行`Derived`：

```
class BaseInterface { ... };

class DerivedInterface: public BaseInterface { ... };

class Base: public BaseInterface { ... };

class Derived: public DerivedInterface {
private:
  Base* base;
public:
  Derived(Base* useBase): base(useBase) {}
  ~Derived() { delete base; }
  // implement using base
}; 
```

并像这样使用它：

```
Base* object = new Base(...);
// use object with base functionality
object = new Derived(object);
// use object with derived functionality
delete object; // free both base and derived memory 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-19T11:54:08.257

如果我正确理解您的问题，一种可能的解决方案是使用聚合而不是继承。

```
class Base
{/*has only the data*/}

class Derived 
{
    Base &base;
    Derived(Base &b) : base(b) {}
    //now methods from derived will use the data members from instance passed in constructor
    //if is possible the Derived needs to be a friend class of Base in case there are no getter for all members
} 
```

如果需要，我们可以使用智能指针代替引用。这样，您可以通过构造一个新的 Derived 对象来避免强制转换，该对象使用来自 Base 对象的数据。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-19T13:17:31.940

> 派生类只添加方法。

那么这个类就没有意义了。完全没有。

您可以使用派生来：

*   覆盖`virtual`方法（从而自定义行为）=> 好
*   扩展基类的数据 => 不好，代码重用应该使用组合，仍然有效

在你的特殊情况下？只是没用。它不会带来*任何东西*。如果您希望向基类添加新功能，请实现*自由功能*。作为奖励，摆脱派生类，您还将摆脱强制转换的需要。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-19T14:51:30.183

由于 C++11，一个潜在的选择出现了

```
class Base
{
  pubilc:
    Data data;

    Base( Base && base ) : data( std::move( base.data ) ) {} 
};

class Derived : public Base
{
  pubilc:
    static Derived * convert( Base *& base )
    {
        Derived * d = new Derived{ std::move( *base ) };
        delete base;

        base = d;
        return d;
    }
 }; 
```

尽管这不是我所希望的记忆方式，但据我所知，这只是一个小小的打击。通过使用 move 构造，唯一的开销是`Derived`在删除旧对象之前创建一个新`Base`对象。

在任何事情完成之前都应该进行检查，但现在就可以了。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-19T11:40:18.357

您可以添加一个辅助类，它是基类的朋友，并为其添加额外的功能，例如

```
class Base 
{
   friend class BaseHelper;
   // ....
};
class BaseHelper
{
    public:
    // all functions can access data into Base objects:
    void f(const Base& b) const; // can only read data in b, not change it
    void g(Base& b); // can change data in b
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-19T11:59:40.437

```
Derived *d =static_cast<Derived *>(b); //? :-/ 
```

[这是一种解释](http://publib.boulder.ibm.com/infocenter/comphelp/v8v101/index.jsp?topic=%2Fcom.ibm.xlcpp8a.doc%2Flanguage%2Fref%2Fkeyword_static_cast.htm)

[另一种解释](http://www.velocityreviews.com/forums/t646109-does-c-spec-allow-static_cast-of-polymorphic-objects.html)

[对幕后发生的事情进行更详细的解释](http://www.codeproject.com/Articles/12935/What-static_cast-is-actually-doing)

更新：

[堆栈溢出 - 在 C++ 中使用 static_cast 向下转换](https://stackoverflow.com/questions/6322949/downcasting-using-the-static-cast-in-c)

[使用 static_cast 在 C++ 中向下转换](http://www.cplusplus.com/forum/general/79249/)

规格：

> “指向 cv1 B”的类型的右值，其中 B 是类类型，可以转换为“指向 cv2 D”的类型的右值，其中 D 是从 B 派生的类（第 10 条），如果一个有效的标准存在从“指向 D 的指针”到“指向 B 的指针”的转换 (4.10)，cv2 的 cvqualification 与 cv1 相同或更高，并且 B 不是 D 的虚拟基类。空指针值 (4.10)转换为目标类型的空指针值。如果类型“pointer to cv1 B”的右值指向实际上是类型 D 对象的子对象的 B，则生成的指针指向类型 D 的封闭对象。否则，强制转换的结果是未定义的。

仅适用于 LLVM：

[http://llvm.org/docs/HowToSetUpLLVMStyleRTTI.html](http://llvm.org/docs/HowToSetUpLLVMStyleRTTI.html) - 允许向下转换（不是未定义的行为，因为它不使用 C++ RTTI）。

没有符合标准的向下转换方式：

```
class Parent{
    public: void gotoWork(){ cout << doWork(); }
};

class Child: public Parent{
     public: void gotoSchool(){ cout << attendClasses();}
};

Parent *p = new Parent();
Child *ch = static_cast<Child*> p;
//now child has to go work? :-( 
```

**编辑**

> 除了所有其他方式，为什么不放两个对象呢？一个“Base”类型和另一个“Derived”类型到一个UNION？
> 
> PS：它的语言规范符合。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-10-20T09:44:52.773

纵观我的许多答案，普遍的共识是我应该按照我说的去做，并且实际上将我`Base`的课程包装在`Derived`课程中。我不这样做的原因是我会失去你通过继承获得的特定行为。这种行为是将`Derived`类的指针设置为 type 的指针`Base`，这将在我进行某种转换后发生，该转换将使`Base`类转换为`Derived`类。

A 确实偶然发现了我[自己](https://stackoverflow.com/a/12976824/398640)的解决方案- 尽管显然它可能无法编译 - 并且还有许多其他[好主意](https://stackoverflow.com/a/12973834/398640)。最后，我意识到这一点有点慢，因为就我而言，我的`Derived`类没有覆盖任何虚拟方法，因此[使用继承没有任何好处](https://stackoverflow.com/a/12975116/398640)。最好的方法确实是使用组合。

```
class Base
{
    // some nice implementation
};

class Derived
{
  public:
    Derived( Base && base )
    {
        this->_base = base;
    }

    Base & base()
    {
        return _base;
    }

  private:
    Base _base;
}; 
```

# java - 诊断为什么两个 Java 线程挂起

> ID：12973318
> 
> 赞同：-1
> 
> 时间：2012-10-19T11:29:41.293
> 
> 标签：java, multithreading, concurrency, deadlock

试图理解我的应用程序挂起，一切运行良好然后挂起。然后我附加了 Yourkit Profiler，它突出显示了一段时间未更改并且似乎已挂起的两个线程。

有趣的是，两个线程都在执行相同的任务，但处理不同的数据，但是该方法只是一个 CPU 密集型任务，它不共享数据、执行 I/O 或连接到其他任何东西。

```
public int[][] computeAssignments(float[][] matrix) 
```

所以考虑到这一点，我无法理解是什么导致他们停下来

两个线程都作为 ExecutorService 的一部分运行

我应该采取什么方法来解决这个问题。

**更新**

正如 Glen 猜测的那样，这个问题与线程完全无关。只是他们碰巧遇到了同样的问题，如果提供了一组特定的数据，他们调用的代码可能会进入递归循环。另一个发帖人给出的一个很好的提示是在分析器中检查线程是否处于可运行或等待状态，只有当它们处于等待状态时，它们才会真正死锁。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T12:46:09.103

我的猜测是你在那里有一个无限循环。

# c# - ModalPopupExtender open onclick 的 GridView 行问题

> ID：12973320
> 
> 赞同：0
> 
> 时间：2012-10-19T11:29:51.247
> 
> 标签：c#, asp.net, visual-studio-2010, gridview, modalpopupextender

（我正在使用 Lukinha RS 的行 onclick 功能解决方案）

当我单击 gridview 中的一行时，我会在 ModalPopupExtender 打开之前收到回发，但我不想要回发，但是您看到我使用的方法是原因。不幸的是，这是我能够将 onClick 应用于 gridview 行以打开 MPE 的唯一方法。

我遇到的另一个问题是 MPE 打开 - 我单击弹出面板上的“关闭”按钮，它只是重新加载页面，导致相同的弹出面板打开。

```
 protected void GridView1_RowDataBound(object sender, GridViewRowEventArgs e)
{
    GridViewRow row = e.Row;
    if (row.DataItem == null)
    {
        return;
    }

    try
    {
        switch (e.Row.RowType)
        {
            case DataControlRowType.Header:
                break;

            case DataControlRowType.DataRow:
                e.Row.Attributes.Add("onmouseover", "this.style.cursor='hand'");
                e.Row.Attributes.Add("onclick", Page.ClientScript.GetPostBackEventReference(GridView1, "Select$" + e.Row.RowIndex.ToString()));
                break;
        }
    }

    catch
    {
        return;
    } 
```

这是我的 SelectedIndexChanged

```
 protected void GridView1_SelectedIndexChanged(object sender, EventArgs e)
{
    GridViewRow row = ((GridView)sender).SelectedRow;
    ModalPopupExtender mpe = (ModalPopupExtender)row.FindControl("ModalPopupExtender1");
    mpe.Show();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T11:41:17.810

> 不幸的是，这是我能够将 onClick 应用于 gridview 行以打开 MPE 的唯一方法

不正确。实际上，您可以在不回发的情况下打开模态扩展器。更改`onclick`属性值如下：

```
e.Row.Attributes.Add("onclick", String.Format("javascript:$find('{0}').show();", ModalPopupExtender1.ClientID)); 
```

# symfony - 从请求中获取 AbstractType

> ID：12973321
> 
> 赞同：0
> 
> 时间：2012-10-19T11:29:51.967
> 
> 标签：symfony, controller, abstract-type

用户总结了一个使用 symfony 2 框架构建的抽象类型的表单：

```
<?php
$form = $this->createForm(new MyAbstractType(), new MyEntity()); 
```

我在一个动作中收到了这个帖子请求：

```
public function receiveFormRequestAction(Request $request){
    //How do I get the abstract type from the request?
} 
```

我需要能够仅使用请求中的信息来创建表单上使用的 AbstractType。

1.  可能吗？
2.  你怎么做呢？

谢谢。

编辑：

对不起，如果我不够清楚。在“recieveFormRequestAction”方法中，我不知道我会得到什么抽象类型，所以我不能直接将表单绑定到 MyAbstractType。

理论上，此操作可以接收任何 AbastractType 并绑定它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T11:50:22.707

1.  是的

2.  像这样：

    ```
    // first, create the very same form
    $form = $this->createForm(new MyAbstractType(), new MyEntity());
    // bind the form with your request
    $form->bind($request);
    // Optional step : validate the form
    if ($form->isValid()) {
        // your object is ready, get it like this:
        $object = $form->getData();
    } else {
         // handle the validation errors.
    } 
    ```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-17T03:58:59.327

我最终这样做了：

1.  我的表单上的 getName() 方法返回的名称与 Form 类名完全相同

    ```
    Class MyAbstractType extends AbstractType
      [...]
      public function getName(){
        return "MyAbstractType";
    } 
    ```

2.  现在我可以使用参数键上的哈希来获取类型

    ```
    public function myAction(Request $request){
    $parameterKeys = $request->request->keys();
    $formName = $parameterKeys[0]; 
    ```

丑得要命，但我需要一个快速的解决方案。直到有一个更清洁的，我接受这个。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-19T11:51:35.613

您需要将 Request 对象绑定到表单。

```
$form->bind($request); 
```

然后你可以运行类似`$form->isValid()`and的东西`$form->getData()`。

# jquery - 计算前验证表格

> ID：12973322
> 
> 赞同：0
> 
> 时间：2012-10-19T11:29:56.287
> 
> 标签：jquery, validation

我有一个带有以下代码的计算表

```
$("input[name^=sum]").keyup(function(){
    $('#result').text(Math.round(($('#amount').val() * 13 * 1.5 ) / ( (52 - $('#weeks').val()) * $('#hours').val() ) ));
}); 
```

我正在尝试验证在执行计算之前是否始终填充所有 3 个输入，就像这样

```
$("form input[name^=sum]").blur(function()
if( !$(this).val() ) {

  }
else  {
    $('#result').text(Math.round(($('#amount').val() * 13 * 1.5 ) / ( (52 - $('#weeks').val()) * $('#hours').val() ) ));
}
}); 
```

这仅适用于每个单独的输入，而不是作为一种形式。

我在这里做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T11:35:51.230

尝试这个

```
if($(#input1).val()!="" && $(#input1).val()!="" && $(#input1).val()!="")
{
      your caluculation
} 
```

# html - 创建一个带有滚动条的 div

> ID：12973327
> 
> 赞同：1
> 
> 时间：2012-10-19T11:30:04.630
> 
> 标签：html, css

我在这个上面扯了我的头发，基本上我正在制作一个页面，它的底部有一个绝对定位的输出面板，内容在窗口的顶部 80%：

```
<div id="pageContent">
    ..Content..
</div>

<div id="outputPanel">
</div> 
```

我已经禁用了正文上的滚动条，因为我想要两个滚动条，一个在页面内容上，一个在输出上。

```
body {
    overflow: hidden;
}

#pageContent {
    height: 100%;
    overflow: auto;
}

#outputPanel{
    height: 20%;
    overflow: auto;
} 
```

输出面板有效，但内容无效，这就是我认为无效的原因；当我检查内容 div 时，它说它的高度是 2600px（这是它包含的内容的高度），但我将它设置为 100%，所以它不应该是身体高度的 100% 吗？哪个应该是窗口的 100%？

当我将内容的高度明确设置为 300px 时，它按预期工作，但问题是，我无法将高度设置为明确的像素数，因为窗口可能会调整大小..

我怎样才能让 div 成为 100% 的窗口，并且有什么方法可以在不使用 javascript 的情况下做到这一点，因为我正试图在尽可能纯的 html 中做到这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T12:58:13.157

*抱歉错过发表为评论*

好的，我想通了。问题是 div 标签正在获取内容的大小，这是因为高度设置为 100%，所以它从 body 获取它，这是 100%，它从 html 获取它，而不是放。不知道为什么不将其设置为该大小，但明确地将 html 标记的高度设置为 100% 对其进行了排序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T11:53:23.770

我认为两个 div 都在 body 标签内，所以它应该是 80% 和 20% 根据您的要求，因为 div pagecontent 和 div outputpanel 是 body 的子 div ...或者做一件事

```
<body>
  <div id="wrapper">
         <div id="pageContent">
         </div>
         <div id="outputPanel">
          </div>
  </div>
</body> 
```

CSS像这样

```
 body {
         overflow: hidden;
  }
  #wrapper {
      height: 100%;
     overflow: scroll;
   }

  #pageContent {
      height: 80%;
     overflow: scroll;
   }

   #wrapper #outputPanel {
       height: 20%;
       overflow: scroll;
    } 
```

试试这个，告诉我你的问题是否正确......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-19T11:54:10.000

我认为这就是您需要的 xfx 是正确的，但是您在使用双 outputPanel 的问题中犯了一个错误

```
 body {
    overflow: hidden;
}

#pageContent {
    height: 100%;
    overflow: scroll;
}

#outputPanel{
    height: 20%;
    overflow: scroll;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-19T11:32:09.860

```
body {
    overflow: hidden;
}

#pageContent {
    height: 100%;
    overflow: scroll;
}

#outputPanel {
    height: 20%;
    overflow: scroll;
} 
```

# ios - 核心情节：当设备方向改变时如何动态改变 plotSpace.xRange？

> ID：12973331
> 
> 赞同：1
> 
> 时间：2012-10-19T11:30:14.023
> 
> 标签：ios, core-plot, xrange

我有一个包含许多图表的 iOS 应用程序。当图表以横向模式显示时，我想修改 xRange 值，但我不能让 Core Plot 这样做。

我试图通过调用完全重新创建图表

```
[graph removePlotWithIdentifier:@"myGraphName"]; 
```

在“WillRotateToInterfaceOrientation”中，然后使用新的 xRange 再次构建我的图表，但它不起作用。

我希望 CorePlot 根据设备方向动态调整 xRange。

我有这段代码可以根据第一次创建图形时的设备方向来管理不同的 xRange：

```
 UIInterfaceOrientation orientation = [[UIApplication sharedApplication] statusBarOrientation];
if(orientation == UIInterfaceOrientationPortrait
   || orientation == UIInterfaceOrientationPortraitUpsideDown) {

    plotSpace.xRange = [CPTPlotRange plotRangeWithLocation:CPTDecimalFromInt(lengthToDisplay/2) length:CPTDecimalFromInteger(lengthToDisplay/2)];

} else if(orientation == UIInterfaceOrientationLandscapeLeft
          || orientation == UIInterfaceOrientationLandscapeRight) {

    plotSpace.xRange = [CPTPlotRange plotRangeWithLocation:CPTDecimalFromInt(lengthToDisplay) length:CPTDecimalFromInteger(lengthToDisplay)];
} 
```

它工作正常。但是，如果图表已经显示并且我更改了设备方向，则不会发生任何事情。我试图将此代码放在“WillRotateToInterfaceOrientation”中，但同样没有任何反应。

# c# - 如何异步调用两个方法？

> ID：12973332
> 
> 赞同：2
> 
> 时间：2012-10-19T11:30:16.193
> 
> 标签：c#, .net, web-services, asynchronous

我有以下两种方法：

```
private static void webservicecalls()
{
   WebServiceOne();
   WebServiceTwo();
} 
```

那么我如何才能异步调用这两个方法，而不是在调用第二个 Web 服务之前等待第一个 Web 服务调用完成？

**更新：**

现在 WebSericeOne 和 WebServiceTwo 都有子调用，例如：

```
private static void WebServiceOne()
{
    CallOne();
    CallThree();
}

private static void WebServiceTwo()
{
    CallTwo();
    CallFour();
} 
```

所以我需要调用对子调用具有以下顺序：-

```
CallOne();
CallTwo();
CallThree();
CallFour(); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-19T11:33:22.633

根据您使用的实现`webserviceone` `webservicetwo`方式，Web 服务工具本身很可能具有完整的异步支持，因此首先要做的是：检查并使用异步 API 而不是同步 API。

如果由于某种原因不存在 - 您可以执行以下操作：

```
var task = new Task(() => webservice1());
task.Start();
webservice2();
task.Wait(); 
```

（显然你可以完全异步运行；我假设在上面你只想并行运行它们，并在最后“加入”）

重新编辑：如果顺序必须恰好是“一”、“二”、“三”、“四”，那么您不能并行执行它们，因此您只能在后台运行整个事情：

```
new Task(() => {
    webservice1();
    webservice2();
}).Start(); 
```

这将保证执行顺序，牺牲并行性。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-19T11:33:02.140

```
Action one = () => WebServiceOne();
Action two = () => WebServiceTwo();
one.BeginInvoke(null, null);
two.BeginInvoke(null, null); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-19T11:42:30.607

我喜欢使用一个动作。

```
private static void WebServiceCalls()
{ 
    var someState = 3;
    Action a1 = () => { WebserviceOne(); };
    Action a2 = () => { WebserviceTwo(); };

    a1.BeginInvoke(WebServiceCallBack, someState); //see code section below
    a2.BeginInvoke(null, null); //fire and forget...

} 
```

这也允许您创建一个回调来处理代码：

```
void WebServiceCallBack(IAsyncResult result)
{
    int state = (int)result.AsyncState;
    //do more??
} 
```

@Mark 提出了一个有效的观点：如果您在 Visual Studio 中使用 Web 服务，则可以使用服务引用配置窗口来创建具有异步语法的 Channel Proxy 类。（即使用`BeginWebServiceOne`and`EndWebServiceOne`将排除创建异步包装器的需要。）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-19T11:34:15.427

看看这里的任务库，以及左侧子类别的导航

[http://msdn.microsoft.com/en-us/library/dd537609.aspx](http://msdn.microsoft.com/en-us/library/dd537609.aspx)

# email - 在 SO_NEW_DOCUMENT_ATT_SEND_API1 函数中更改外部电子邮件的发件人

> ID：12973338
> 
> 赞同：2
> 
> 时间：2012-10-19T11:30:40.750
> 
> 标签：email, abap

我正在使用 SO_NEW_DOCUMENT_ATT_SEND_API1 函数为 sap 用户和外部电子邮件发送带有附件的电子邮件。到目前为止，一切都很好。我发现这些电子邮件的发件人是触发报告的 sap 用户，并且该函数没有像旧的 SO_DOCUMENT_SEND_API1 那样的发件人导出参数。问题是我需要发件人是外部电子邮件。我一直在寻找，无法做到这一点。任何人都可以帮助或给我一个想法吗？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T12:01:40.343

[正如我在对您的另一个问题的回答](https://stackoverflow.com/a/12941481/218890)中已经说过的那样，停止使用旧 API 并使用新的 BCS API。该文档包含[有关如何更改发件人地址的示例](http://help.sap.com/saphelp_erp60_sp/helpdata/en/f5/e16f3a53dee246e10000000a11402f/frameset.htm)：

```
DATA: lr_send_request TYPE REF TO cl_bcs,
      lr_sender       TYPE REF TO cl_cam_address_bcs.

lr_sender = cl_cam_address_bcs=>create_internet_address( 'foo.bar@baz.com' ).
lr_send_request->set_sender( lr_sender ). 
```

只需尝试将示例报告复制`BCS_EXAMPLE_1`到您的本地命名空间并交换设置发送者的行（我的版本中的第 50 行，可能是您系统上的不同行）。

# iphone - 数组中uibutton文本的洗牌值

> ID：12973339
> 
> 赞同：0
> 
> 时间：2012-10-19T11:30:42.293
> 
> 标签：iphone, ios, nsmutablearray

在我的应用程序中，我有 4 个按钮。每次单击时，我都想显示`UIButton`数组中的标题随机值。我试过这个[什么是洗牌 NSMutableArray 的最佳方法？](https://stackoverflow.com/questions/56648/whats-the-best-way-to-shuffle-an-nsmutablearray) 但它不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T11:35:00.840

你会得到你的数组索引，然后使用该索引来选择值。

```
 int rndIndex = arc4random()%[yourArray count];

 [yourArray objectAtIndex:rndIndex]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T11:49:07.670

你在某个地方制作一个数组：

在您的标头 (.h) 文件中

```
NSArray *words; 
```

还有一点点

```
- (IBAction)aButtonWasClicked:(id)sender; 
```

在您的代码文件 (.m) 中，例如 viewDidLoad

```
words = [[NSArray arrayWithObjects:@"One", @"Two", @"Three", @"Four", nil] retain]; 
```

（在 ios 6 中你可能会这样做

```
words = @[@"One", @"Two", @"Three", @"Four"]; 
```

然后你这样做：

```
- (IBAction)aButtonWasClicked:(id)sender {
    int value = arv4random() % ([words count] -1);
    UIButton *mybutton = (UIButton *)sender;
    [mybbutton setTitle:[words objectAtIndex:value] forState:UIControlStateNormal];
} 
```

只需记住将所有 4 个按钮都连接到同一个操作。

这里的所有都是它的。您可以轻松添加功能以确保没有按钮具有相同的标题等。

# javascript - Javascript 来获取数量最多的那个 div 的类或 ID？

> ID：12973340
> 
> 赞同：-2
> 
> 时间：2012-10-19T11:30:43.527
> 
> 标签：javascript

`id`我希望javascript 得到`div`最大的数字。这是示例。

```
<div class="1"></div>
<div class="3"></div>
<div class="41"></div>
<div class="2"></div> 
```

现在它应该获得最大的`id`或均值函数必须确定哪个最大并将其保存在变量中。`class``div`

```
var id = largestdivnumber 
```

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-19T11:37:19.747

```
window.onload = function (){
    var elements = document.getElementsByTagName("div");
    var maxId = 0;
    var max = 0;
    for (var i =0; i < elements.length; i++)
    {
        var id = parseInt(elements[i].id);
        if (id > maxId)
        {
            maxId = id;
            max = i;
        }
    }

    // Element with max id.
    console.log(elements[max]);
}; 
```

这是工作小提琴：http: [//jsfiddle.net/vyshniakov/kdGCm/](http://jsfiddle.net/vyshniakov/kdGCm/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-19T11:48:29.030

尝试这个：

```
$('div').map(function(){
    return this.id;
}).get().sort(function(a, b) {
    return b - a;
})[0]; 
```

这是[JSfiddle](http://jsfiddle.net/zaheerahmed/kdGCm/6/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-19T11:47:04.210

```
window.onload = function (){
  max_id = 0
  $.each($("div"), function(i, e){
    id_val  = $(e).attr("id")
    id_num = parseInt(id_val)
    if (!isNan(id_num)){
      if (id_num > max_id){
         max_id = id_num
      }
    }
  })
  element_you_need = $("#"+max_id)
} 
```

你需要 Jquery 才能工作

# c - 为什么添加 printf("A") 会使我的代码运行，而删除它会使其崩溃

> ID：12973346
> 
> 赞同：2
> 
> 时间：2012-10-19T11:30:51.810
> 
> 标签：c, runtime-error

我在 C 中有以下代码：

```
while(tempNode!=NULL) {
    int pos = pathNodesCount-1-i;
    pathNodes[pos] = tempNode;
    //printf("A");
    euclidianLength += tempNode->g;
    i = i+1;
    tempNode = tempNode->parent;
} 
```

如果我将该`printf("A")`语句注释掉，然后编译并运行我的代码，我将收到“应用程序停止运行”Windows 错误。如果我取消注释该`printf("A")`行，重新编译并运行，应用程序将运行到它的末尾（沿途将“A”打印到控制台）。为什么？

环境是：

*   视窗 7 32 位
*   MinGW32 20120426（我添加了 MSys 1.0）
*   Eclipse Juno 用于 C/CPP

== 更新

我已经跟踪了我的错误。我不会发布确切的代码，因为它太长了，但它是创建一个 char 数组，然后在错误的索引处添加字符的情况。像这样的东西：

```
int otherCrap() {
    char* c = malloc(10*sizeof(char));
    int i = 0;
    for(i = 0; i<13; i++) {
        c[i]='a';
    }
    c[15] = '\0';
    printf("A");
    printf(c);

    return 0;
} 
```

修复问题，使字符仅在现有索引处放置在数组中，并将 '\0' 字符添加为数组中的最后一个元素解决了该问题。但是，我仍然不清楚为什么当代码错误时，在打印 char 数组之前添加 printf('A') 不会导致运行时错误。从到目前为止收到的答案中，我了解到这属于“未定义的行为”。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-19T11:33:56.443

可能是因为代码中的某些错误导致未定义的行为。然后让代码在存在 a 的情况下看起来“工作”`printf()`很好。

向后计数的索引逻辑看起来很可怕；验证它是否正确。在使用它之前打印索引，与数组的已知大小进行比较`pathNodes`（如果有的话）。谨防指数转为负数或超出`pathNodes`.

# css - 样式化背景图片 URL

> ID：12973351
> 
> 赞同：0
> 
> 时间：2012-10-19T11:31:05.257
> 
> 标签：css, sencha-touch

如何设置背景图像 url 的高度和宽度

我正在使用 sencha-touch 并构建一个移动应用程序，我有一个带有图像的视图 - Xtype

```
 var profilePicture = {
        xtype : 'image',
        style : 'margin-top:10px;',
        id : 'profilePhoto',
        src : 'resources/images/profile.png',
        height : '104px',
        width : '84px'
    }; 
```

我在面板中添加了这个图像我在我的控制器中使用从服务器获得的 json 值动态设置图像的 src，

src = localStorage.httpServerPrefix + profile.imageURI; // 我得到图片的 URL Ext.getCmp("profilePicture").setSrc(src.);

当我在浏览器中看到时，我觉得，

```
<div class="x-img" id="profilePhoto" style="margin-top: 10px; height: 104px !important; width: 84px !important; background-image: url(http://127.0.0.1:8080/Milna/user/mphoto/1?version=7); "></div> 
```

div 的高度和宽度分别设置为 104px 和 84px。我的图片大小是 1600px × 1200px，所以不适合上面的 div。是否可以设置背景图片 url 的样式？？？我可以做些什么来设置来自 url 的图像的样式？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T11:37:38.107

使用 CSS3 -

```
div{ background-size: cover; } 
```

当您在 Web 应用程序中使用大图像时。您应该阅读[**自适应图像**](http://adaptive-images.com/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-19T11:50:20.243

看看这个[重构范围](http://ominian.com/2012/02/06/sencha-touch-v2-with-style/)。在这篇文章中，他们已经解释了样式功能。

您的样式将更加一致，更重要的是，当您在几分钟而不是几天内重新设计整个移动应用程序时，它会让您看起来非常好。

> 样式：'背景：资源/图像/profile.png；宽度：45%'，

# testing - Testlink 1.9.4 与 bugzilla 4.2.3 的集成

> ID：12973353
> 
> 赞同：1
> 
> 时间：2012-10-19T11:31:09.267
> 
> 标签：testing

我已经在 Windows 机器上的 wamp 服务器中成功安装了 Testlink 1.9.4 和 bugzilla 4.2.3。我发现为了将 testlink 版本 1.9.4 与任何错误跟踪器连接，您不再需要使用 .cfg 文件因此，请改用“问题跟踪器管理”。

因此，我去了项目，然后在“测试项目”下选择“问题跟踪管理”。选择 bugzilla 界面数据库并单击“显示配置示例”。然后我复制并粘贴根据我的需要进行适当的更改。但是当我去' “测试执行”屏幕，失败的测试用例不显示错误图标，我在屏幕顶部收到以下错误消息

“请注意：某些东西阻止了与错误跟踪系统的连接，并且会造成性能问题。请联系您的 TestLink 管理员”。

我相信我缺少一些特定的步骤来使用 Testlink 1.9.4 设置正确的配置。我试图查找任何最新文档但找不到任何文档。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T08:56:00.973

首先，使用 Iss Tracker Managerment 创建问题跟踪器。（就像您所做的那样）其次，在创建测试项目时指定一个问题跟踪器（您创建的）。

# android - Android XML 读取问题（canRead() = false）

> ID：12973354
> 
> 赞同：0
> 
> 时间：2012-10-19T11:31:09.563
> 
> 标签：android, xml, android-sdcard, android-file

我在我的 APP 中读取 XML 文件时遇到问题。我已经尝试了多个选项，但我收到错误，读取访问权限是错误的。我确定我使用的是正确的路径。

> XML = 新文件（XML，“file.xml”）；
> Log.i("XML", "读取权限：" + XML.canRead());

这确实返回了一个错误，我只需要阅读而不是写作（至少，还没有......）。

> System.getProperty(XML.getPath())

返回空

我认为 SD 卡有问题（请参阅其他[问题](https://stackoverflow.com/q/12971170/1758744)）。但是在我的应用程序中，我可以打开除最后一个文件夹中的 XML 文件之外的不同文件夹。

我已向清单文件添加了正确的权限。

很感谢任何形式的帮助。谢谢你。

编辑：文件路径：

`File f = new File(Environment.getExternalStorageDirectory().toString() + File.separator + "external_sd" + File.separator + "app" + File.separator + "Games" + File.separator + "Version_1" );`

我打开文件夹没有问题。在我的最后一个文件夹中，将有一个无法打开的 xml。

我在APP的其他部分使用了部分路径，它在那里工作..

代码也`XML.exists()`返回错误...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T12:52:17.110

与其他问题有关，那个也解决了这个问题

谢谢你的帮助..

# java - 如何在Java中生成正数和负数

> ID：12973358
> 
> 赞同：6
> 
> 时间：2012-10-19T11:31:29.140
> 
> 标签：java, math, random

> **可能重复：**
> [如何在java中生成随机正数和负数](https://stackoverflow.com/questions/3938992/how-to-generate-random-positive-and-negative-numbers-in-java)

您好我正在尝试在 Java 中创建一个方法来在 Java 中创建负值和正值。

问题是我不知道如何编程，但我知道逻辑..这就是我认为应该是的

```
 Random generator = new Random();

 for (int i = 0; i < 21; i++)
 {
       System.out.print(generator.nextInt(100) + 1);
       System.out.println();
 } 
```

但是使用上面的代码，我只得到正值，我需要 -100 到 100 之间的值，但我怎样才能完成这样的事情呢？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-10-19T11:32:46.670

您可以使用：

```
Random generator = new Random();
int val = 100 - generator.nextInt(201); 
```

或者，正如 JoachimSauer 在评论中建议的那样：

```
int val = generator.nextInt(201) - 100; 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-10-19T11:38:40.637

一般公式是

```
int val = rand.nextInt(max - min + 1) + min; 
```

请注意，`min`and`max`可以是负数。（最大值 > 最小值）

# mysql - 如何在mysql中更新char类型的列以增加其长度

> ID：12973367
> 
> 赞同：6
> 
> 时间：2012-10-19T11:32:19.130
> 
> 标签：mysql, sql, syntax

如何增加`char`数据类型为 in的列的长度`mysql`？

以下查询

```
ALTER TABLE tablename ALTER COLUMN columnname varchar(30) not null; 
```

不管用。

请指出我的错误。谢谢

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-19T11:34:56.723

```
ALTER TABLE `tablename` CHANGE `columnname` `columnname` VARCHAR( 30 ) NOT NULL 
```

或者

```
ALTER TABLE `tablename` MODIFY `columnname` VARCHAR( 30 ) NOT NULL 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-19T11:40:06.160

请尝试下面给出的查询

```
ALTER TABLE tablename  MODIFY  columnname varchar(30) NOT NULL; 
```

你可以参考[这个教程](http://www.tutorialspoint.com/mysql/mysql-alter-command.htm)

# mod-rewrite - RewriteRule 不起作用，启用了 mod_rewrite

> ID：12973368
> 
> 赞同：0
> 
> 时间：2012-10-19T11:32:21.003
> 
> 标签：mod-rewrite

我只是希望 feature.php?id=1 更改为 feature/1

mod_rewrite 根据 php 启用。我尝试将垃圾放入 .htaccess 文件中，这给了我一个 500 错误，所以我猜那也可以。

我的**虚拟主机文件**：

```
NameVirtualHost *:80
<VirtualHost *:80>
  DocumentRoot "C:/htdocs"
  ServerName test2
  DirectoryIndex index.php

  <Directory "C:/htdocs">
    AllowOverride All
    Allow from All
  </Directory>
  RewriteLog "C:/xampp/apache/logs/rewrite.log"
  RewriteLogLevel 9
</VirtualHost> 
```

我的**.htaccess**文件的内容

```
Options +FollowSymLinks +ExecCGI

<IfModule mod_rewrite.c>
RewriteEngine On  
RewriteRule ^/?feature/([a-zA-Z0-9]+)$ /feature.php?id=$1 [L,QSA]
</IfModule> 
```

以及**rewrite.log的内容**

> 127.0.0.1 - - [19/Oct/2012:12:23:17 +0100] [test2/sid#2006540​​][rid#66156b0/initial] (3) [perdir C:/htdocs/] 剥离每个目录前缀: C:/htdocs/feature.php -> feature.php
> 127.0.0.1 - - [19/Oct/2012:12:23:17 +0100] [test2/sid#2006540​​][rid#66156b0/initial] (3 ) [perdir C:/htdocs/] 将模式 '^/?feature/([a-zA-Z0-9]+)$' 应用于 uri 'feature.php'
> 127.0.0.1 - - [2012 年 10 月 19 日： 12:23:17 +0100] [test2/sid#2006540​​][rid#66156b0/initial] (1) [perdir C:/htdocs/] 通过 C:/htdocs/feature.php

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T12:04:56.920

Riiiiiight.

I expected the links to re-write themselves. so basically, if I wanted the link to go to feature/1 I should have made it that. feature.php?id=1 link would not magically change to feature/1 and link to feature/1.

Well, you learn something every day.

# php - Drupal 7 FAPI- 在验证或提交处理程序中添加表单元素

> ID：12973378
> 
> 赞同：3
> 
> 时间：2012-10-19T11:32:54.710
> 
> 标签：php, drupal-7, drupal-modules, drupal-fapi, drupal-forms

是否可以在 drupal 7 模块的验证或提交功能中添加额外的表单元素？以下代码有效并且图像显示在表单上：

```
function test1_form($form, &$form_state)
{
     $form['image']=array(
           '#markup'=>'<img src="sites/all/modules/create_ad/th.jpeg"><br/>', //replace with your own image path
     );

     $form['submit'] = array(
           '#type' => 'submit',
           '#value' => 'Submit',
     );
} 
```

但是当我尝试在提交功能中提交后显示图像时，如下所示，它不起作用：

```
function test1_form($form, &$form_state)
{
     $form['submit'] = array(
           '#type' => 'submit',
           '#value' => 'Submit',
     );
}

function test1_form_submit($form,&$form_state)
{
     $form['image']=array(
           '#markup'=>'<img src="sites/all/modules/create_ad/th.jpeg"><br/>', //replace with your own image path
     );
} 
```

欢迎任何积极的帮助。谢谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-19T12:09:08.177

您可以按照多步骤表单方法在提交后向表单添加其他字段。

[这是一篇博客文章](http://growingventuresolutions.com/blog/drupal-7-multistep-forms-using-variable-functions.html)，讨论了一种多步骤方法，可以为您提供一些见解。

基本上，在您的提交功能上，您存储您的值并设置要重建的表单。然后在您的表单函数中检查这些存储的值并添加新字段（如果存在）。

例子：

```
<?php
function test1_form($form, &$form_state)
{
        if (isset($form_state['storage']['show-image'])){
            $form['image']=array(
                '#markup'=>'<img src="sites/all/modules/create_ad/th.jpeg"><br/>', //replace with your own image path
            );
        }

     $form['submit'] = array(
                 '#type' => 'submit',
                 '#value' => 'Submit',
     );
}

function test1_form_submit($form,&$form_state)
{
    $form_state['rebuild'] = TRUE;
    $form_state['storage']['show-image'] = true;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-04-29T22:28:21.383

这是使用 Ajax 执行此操作的另一种方法。这样，您将不会重新加载任何页面，因为只有图像会被加载到具有包装器 ID 的 div 中。

这是代码：

```
function test_menu()
{
    $items = array();

    $items['test'] = array(
        'title'           => 'test',
        'page callback'   => 'drupal_get_form',
        'page arguments'  => array('test1_form'),
        'access callback' => array(TRUE),
        'type'            => MENU_CALLBACK,
    );

    return $items;
}

function test1_form($form, &$form_state)
{
    $form['submit'] = array(
        '#type'  => 'button',
        '#value' => t('Submit'),
        '#name'  => 'add',
        '#ajax'  => array(
            'callback' => 'ajax_load_picture_callback',
            'wrapper'  => 'wrapper',
            'method'   => 'replace',
            'effect'   => 'fade',
        ),
    );

    $form['image'] = array(
        '#markup' => '',
        '#prefix' => '<div id="wrapper">',
        '#suffix' => '</div>',
    );
    if (array_key_exists('triggering_element', $form_state) &&
        array_key_exists('#name', $form_state['triggering_element']) &&
        $form_state['triggering_element']['#name'] == 'add')
    {
        $form['image']['#markup'] ='<img src="themes/bartik/logo.png"><br/>'; //replace with your own image path
    }

    return $form;
}

function ajax_load_picture_callback($form, $form_state)
{
    return $form['image'];
}

function test1_form_submit($form, &$form_state)
{

} 
```

# javascript - 调整浏览器大小后，jquery click 事件并不总是触发

> ID：12973381
> 
> 赞同：0
> 
> 时间：2012-10-19T11:33:13.533
> 
> 标签：javascript, jquery, window-resize

我有一个相当简单的导航菜单，点击即可打开和关闭。菜单行为仅在浏览器视口低于特定大小时才起作用。

这一切在 90% 的时间里都很好用。剩下的 10% 的时间（当我向客户展示它时，natch）点击事件根本不会触发。据我所知，该问题仅在浏览器调整几次大小后才会出现，但由于在调整窗口大小时它通常可以正常工作，因此很难追查为什么会发生这种情况。

代码：

```
var smallViewport = false;

$(document).ready(function(){
    if($(window).width() < 520) {
        smallViewport = true;
    } 

    if(smallViewport == true) {
        $('nav.main').click(function(){
            console.log(' + clicky clicky');
            if($(this).find('.level-1').hasClass('open') == true) {
                $(this).find('.level-1').slideUp('fast').removeClass('open');
            } else {
                $(this).find('.level-1').slideDown('fast', function(){ $(this).addClass('open'); });
            }
        })
    }
});

$(window).resize(function() {

    if($(window).width() < 520) {
        smallViewport = true;
    } else {
        smallViewport = false;
    }
    console.log(smallViewport);

    if(smallViewport == true) {
        $('.level-1').removeClass('open').css('display','none');
    } else {
        $('.level-1').css('display','block');
    }

}); 
```

当问题选择表现出来时，resize 函数中的 console.log(smallViewport) 在它应该为 true 时输出“true”，click 事件只是拒绝随之触发。

有没有人遇到过类似的问题？我缺少任何明显的解决方案吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T11:35:48.253

您只在页面加载时绑定点击，而不是在调整大小时

如果`$(window).width() < 520`在页面加载时评估为 false，则不会绑定单击事件 - 这就是您的控制台日志正确但事件未触发的原因

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-19T11:44:05.497

将视口检查放在点击事件处理程序中。就像现在一样，如果检查在页面加载时评估为 false，则不会绑定事件处理程序。尝试将其更改为：

```
$('nav.main').click(function(){
    if(smallViewport == true) {
        console.log(' + clicky clicky');
        if($(this).find('.level-1').hasClass('open') == true) {
            $(this).find('.level-1').slideUp('fast').removeClass('open');
        } else {
            $(this).find('.level-1').slideDown('fast', function() {
                $(this).addClass('open'); 
            });
        }
    }
}​);​ 
```

# javax.script - javax.script 包：如何导入 JavaScript 文件？

> ID：12973386
> 
> 赞同：1
> 
> 时间：2012-10-19T11:33:58.327
> 
> 标签：javax.script

我正在使用 javax.script 包在 Java 应用程序中运行外部 JavaScript 文件。

如何在不使用 Java 代码的情况下将一个 JavaScript 文件导入另一个 JavaScript 文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T16:34:37.470

当您说不使用 java 代码时，我不完全确定您的意思，但这是一个可以工作的纯 javascript（尽管它正在调用 java）：

```
importPackage(java.io);
function loadJs(name, user) {
    println("Loading " + name);
    var f = new File(name);
    var br = new BufferedReader(new FileReader(f));
    var line = null;
    var script = "";
    while((line = br.readLine())!=null) {
        script += line;
    }
    println(script);
    eval(script);
    hello(user);
} 
```

...当然，前提是我有一个名为（比如*c:/temp/hellouser.js*）的文件，例如：

```
function hello(name) { print('Hello, ' + name); } 
```

我使用 groovy 脚本测试了脚本：

```
import javax.script.*;

sem = new ScriptEngineManager();
engine = sem.getEngineByExtension("js");
script1 = """
importPackage(java.io);
function loadJs(name, user) {
    println("Loading " + name);
    var f = new File(name);
    var br = new BufferedReader(new FileReader(f));
    var line = null;
    var script = "";
    while((line = br.readLine())!=null) {
        script += line;
    }
    println(script);
    eval(script);
    hello(user);
}
""";

engine.eval(script1);
Object obj = engine.get("obj");
Invocable inv = (Invocable) engine;
inv.invokeFunction("loadJs", "c:/temp/hellouser.js", "Nicholas"); 
```

输出是：

> 加载 c:/temp/hellouser.js
> 
> 函数你好（名字）{打印（'你好，'+名字）；}
> 
> 你好，尼古拉斯

我希望这大约是您正在寻找的......

**============================更新====================== =====**

这是一个扩展了 Rhino 脚本引擎工厂的清理版本（因为引擎本身是最终版本）：

```
import javax.script.Bindings;
import javax.script.ScriptContext;
import javax.script.ScriptEngine;
import javax.script.ScriptException;

import com.sun.script.javascript.RhinoScriptEngineFactory;

/**
 * <p>Title: LoadEnabledRhinoEngineFactory</p>
 * <p>Description: Adding a loadJs function to the standard JS engine</p> 
 * <p>Company: Helios Development Group LLC</p>
 * @author Whitehead (nwhitehead AT heliosdev DOT org)
 * <p><code>org.helios.apmrouter.js.LoadEnabledRhinoEngineFactory</code></p>
 */

public class LoadEnabledRhinoEngineFactory extends RhinoScriptEngineFactory {

    /** The load script source */
    public static final String LOAD_JS = 
        "importPackage(java.io); " +
        "var script = ''; " +
        "var ctx = null; " +
        "function loadScript(name) { " +
            "var f = new File(name); " +
            "var br = new BufferedReader(new FileReader(f)); " +
            "var line = null; " +           
            "while((line = br.readLine())!=null) { " +
                "    script += line; " +
            "} " +
            "_e_ngine.eval(script);" + 
        "} ";

    /**
     * {@inheritDoc}
     * @see com.sun.script.javascript.RhinoScriptEngineFactory#getScriptEngine()
     */
    @Override
    public ScriptEngine getScriptEngine() {
        ScriptEngine se = super.getScriptEngine();
        Bindings b = se.createBindings();
        b.put("_e_ngine", se);
        se.setBindings(b, ScriptContext.GLOBAL_SCOPE);
        try {
            se.eval(LOAD_JS);
        } catch (ScriptException e) {
            throw new RuntimeException(e);
        }
        return se;
    } 
```

现在，`loadScript(fileName)` 它是引擎的一部分，您可以使用 JS 干净地调用它，例如：

```
loadScript('c:/temp/hellouser.js'); 
hello('Nicholas');" 
```

或者正如我在 Java 中测试的那样：

```
ScriptEngine se = new LoadEnabledRhinoEngineFactory().getScriptEngine();
try {
    se.eval("loadScript('c:/temp/hellouser.js'); hello('Nicholas');");
} catch (Exception e) {
    e.printStackTrace(System.err);
} 
```

干杯。

# java - 如何在java中锁定和解锁URL

> ID：12973392
> 
> 赞同：2
> 
> 时间：2012-10-19T11:34:16.097
> 
> 标签：java, javascript, spring

我的网页中有一个超链接，单击它会导航到 jsp 页面。一旦我在那个 jsp 页面中，我应该能够锁定 jsp 页面，如果其他人访问同一个 jsp 页面，它应该显示警报或警告说它已经在使用中。当我从那个 jsp 页面出来时，如果其他人访问该 URL，它应该导航到该页面。知道如何在java中实现这一点吗？我正在使用弹簧框架 3.1。这是一个网络应用程序。我可以用javascript处理它吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T11:39:57.670

1.  您可以创建一个静态计数器。
2.  您还可以在第一个请求上设置键/值对，并且您的代码决定根据键的值显示警报。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T11:45:25.600

要完成这项工作，您需要做几件事： 1\. 创建一个静态锁，使用 concurrnet.util 库对象 2\. 当用户访问 jsp 时，尝试锁定。如果没有成功 - 警告，如果成功 - 只显示页面 3\. 当持有锁的用户离开页面时，解锁，发出任何后续请求以再次竞争锁。

更好的是，仅出于安全性定义将只有一个从 JSP 创建的 servlet 实例。那是网络服务器上的配置。

# image-processing - 如何使用 javacv/opencv 识别黑色多边形上的点？

> ID：12973401
> 
> 赞同：5
> 
> 时间：2012-10-19T11:34:41.560
> 
> 标签：image-processing, opencv, javacv

我尝试识别这个黑色多边形周围的轮廓，我需要访问这些点，但它对我不起作用。这是输入图像 ![在此处输入图像描述](../Images/5ff513b044203b78c445ac14fbdf42d9.png)

但是当我尝试执行以下代码时，它没有给出预期的结果，这意味着它应该。

```
 CanvasFrame cnvs=new CanvasFrame("Polygon");
        cnvs.setDefaultCloseOperation(javax.swing.JFrame.EXIT_ON_CLOSE);

        CvMemStorage storage=CvMemStorage.create();
        CvSeq squares = new CvContour();
        squares = cvCreateSeq(0, sizeof(CvContour.class), sizeof(CvSeq.class), storage);
        String path="project/Test/img/black.png";
        IplImage src = cvLoadImage(path);
        IplImage gry=cvCreateImage(cvGetSize(src),IPL_DEPTH_8U,1);
        cvCvtColor(src, gry, CV_BGR2GRAY);
        cvThreshold(gry, gry, 230, 255, CV_THRESH_BINARY_INV);
        cnvs.showImage(gry);
        cvFindContours(gry, storage, squares, Loader.sizeof(CvContour.class), CV_RETR_LIST, CV_CHAIN_APPROX_NONE);
        CvSeq ss=null;
        CvSeq tmp=null;
        int ii=0;
            for (ss=squares; ss!=null; ss=ss.h_next()) {
                tmp=cvApproxPoly(ss, sizeof(CvContour.class), storage, CV_POLY_APPROX_DP, 8, 0);
                System.out.println("index "+ii+" points "+tmp.total()+" area "+cvContourArea(ss, CV_WHOLE_SEQ, 0));
                cvDrawContours(src, ss, CvScalar.RED, CV_RGB(248, 18, 18), 1, -1, 8);
                //drawPoly(src, tmp);
            }
        IplConvKernel mat=cvCreateStructuringElementEx(7, 7, 3, 3, CV_SHAPE_RECT, null);
        cvDilate(src, src, mat, CV_C);
        cvErode(src, src, mat, CV_C);
        cnvs.showImage(src);
        saveImage("nw.png", src); 
```

但是当我检查输出时它只给出

索引 0 点 8 区域 20179.0

这意味着它只能识别多边形的 8 个点，但应该是 12 个点。请有人解释这段代码的问题。

这显示了输出图像

![在此处输入图像描述](../Images/a1bc4b93a114c324019ec2ca42c1d5a4.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-27T21:32:52.750

cvApproxPoly() 函数使用[Ramer–Douglas–Peucker](http://en.wikipedia.org/wiki/Ramer%E2%80%93Douglas%E2%80%93Peucker_algorithm)算法进行曲线逼近。该算法的目的是找到一条具有较少点的相似曲线。该算法本身采用两个参数作为输入：

*   点（顶点）列表，
*   近似精度。

简而言之，近似精度值越大，在近似曲线中被忽略的点的机会就越大（请参考维基百科的[文章](http://en.wikipedia.org/wiki/Ramer%E2%80%93Douglas%E2%80%93Peucker_algorithm)，尤其是[这个](http://en.wikipedia.org/wiki/File%3aDouglas-Peucker_animated.gif)动画）。在您的函数调用中：

```
cvApproxPoly(ss, sizeof(CvContour.class), storage, CV_POLY_APPROX_DP, 8, 0); 
```

第 5 个参数是近似精度。如果您不想减少顶点数，则该值应该很小（对于此示例，大约 1 的值正好给出 12 个顶点，因此没有近似值）。

# c# - httphandler 拦截在 IIS 7.0 中不起作用

> ID：12973404
> 
> 赞同：2
> 
> 时间：2012-10-19T11:34:54.707
> 
> 标签：c#, asp.net, iis

我有一个在 .netframework 2.0 中完成的应用程序，并尝试在一个安全项目中使用身份验证处理程序，它是用 3.5 框架编写的。我也在使用 IIS 7

应用程序的 Web.config 具有以下条目

```
<system.webServer>
  <validation validateIntegratedModeConfiguration="false"/>
  <handlers  accessPolicy="Read, Write, Script, Execute">

      <add name="Pdfhandler" verb="*" path="/calderdale/*.pdf" type="NES.HiLo.Security.CalderDaleAuthenticationHandler, NES.HiLo.Security" preCondition="integratedMode" />
  </handlers>

 </system.webServer> 
```

CalderDaleAuthenticationHandler 的代码是

```
using System;
using System.Web;

namespace NES.HiLo.Security
{
    public class CalderDaleAuthenticationHandler : IHttpHandler
    {
        /// <summary>
        /// You will need to configure this handler in the web.config file of your 
        /// web and register it with IIS before being able to use it. For more information
        /// see the following link: http://go.microsoft.com/?linkid=8101007
        /// </summary>
        #region IHttpHandler Members
    public bool IsReusable
    {
        // Return false in case your Managed Handler cannot be reused for another request.
        // Usually this would be false in case you have some state information preserved per request.
        get { return false; }
    }

    public void ProcessRequest(HttpContext context)
    {
        //var application = (HttpApplication)sender;
        //var context = application.Context;

        HttpRequest request = context.Request;
        HttpResponse response = context.Response;

      // Check if the user is authenticated

    }

    #endregion
} 
```

}

在我的应用程序中，我有一个文件夹名称 calderdale，并且有一些 pdf 文件。当我输入如下内容以访问 pdf 文件时。我期待控件转到处理程序，在那里我设置了断点。控制永远不会交给处理程序。我很感激任何帮助。

[http://local.knowledge.scot.nsh.uk/calderdale/abc.pdf](http://local.knowledge.scot.nsh.uk/calderdale/abc.pdf)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T12:26:07.993

我使用 httphandlers 来拦截请求。然后在 web.config 中添加这样的处理程序

```
<httpHandlers>
  <add verb="GET" path="calderdale/*.pdf"
   type="NES.HiLo.Security.CalderDaleAuthenticationHandler, NES.HiLo.Security" />
</httpHandlers> 
```

在 IIS 7.0 上完成上述操作之后，我从 IIS 处理程序部分添加了以下处理程序

```
<system.webServer>  
  <handlers>
    <add name="Calderdale Handler" path="calderdale/*.pdf"
     verb="GET" modules="IsapiModule"
     scriptProcessor="%windir%\Microsoft.NET\Framework\v2.0.50727\aspnet_isapi.dll"
     resourceType="Unspecified" requireAccess="Script"
     preCondition="classicMode,runtimeVersionv2.0,bitness32" />
  </handlers>
</system.webServer> 
```

# c - 在C中的数组索引中使用十六进制值

> ID：12973411
> 
> 赞同：1
> 
> 时间：2012-10-19T11:35:13.763
> 
> 标签：c, arrays

我正在阅读一个与硬件寄存器接口的 C 程序。该人一直在使用十六进制数字作为数组的索引，例如：

```
app_base_add[0x30] 
```

我知道 a[i] 表示 *(a+i) 即 *(a+(i*sizeof( *typeof* (a)))) 所以十六进制索引可能是地址空间中所需内存位置的偏移量 wrt app_base_add .

这是正确的吗？
并且还给出了，说：

```
#define mm2s_start_add 0xc0000000; 
```

这些作业在使用上有何不同？

```
volatile unsigned int *app_base_add;  
app_base_add[0x30>>2]=0x1;    
app_base_add[0x30>>2]=1<<2;  
app_base_add[0x30>>2]=((unsigned int)mm2s_start_add);  //is this assignment valid??
app_base_add[0x30>>2]=((unsigned int *)mm2s_start_add); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T11:44:02.340

将 0x30 或 48 作为索引写入没有区别，如果说他的内存文档仅使用十六进制值编写，程序员可能更容易阅读，但这只是个人喜好问题。

例如

```
app_base_add[0x30>>2]=0x1; 
is the same as writing app_base_add[12]=0x1; 
or even app_base_add[0x0C]=0x1; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-19T11:45:31.707

在编译时，所有值都以相同的方式处理，即使它们是以十六进制、二进制或十进制编写的。

```
0x2a == 42 == b101010 == 052 
```

唯一可能引发警告的分配是强制转换为`unsigned int`，因为您的目标类型不是`unsigned int`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-19T11:44:31.767

`volatile unsigned int *app_base_add;`
`//app_base_add is a pointer to volatile memory(not initialized :()`

`app_base_add[0x30>>2]=0x1;` `// = app_base_add[12] = 1;`

`app_base_add[0x30>>2]=1<<2;` `// = app_base_add[12] = 4;`

`app_base_add[0x30>>2]=((unsigned int)mm2s_start_add); //is this assignment valid??` `// yes its valid` `// = app_base_add[12] = 3221225472`

`app_base_add[0x30>>2]=((unsigned int *)mm2s_start_add);` `// = app_base_add[12] = interpret 3221225472 as an unsigned integer pointer and store it.`

# objective-c - Objective C 协议委托测试

> ID：12973412
> 
> 赞同：0
> 
> 时间：2012-10-19T11:35:24.883
> 
> 标签：objective-c, xcode, delegates, protocols

我正在使用示例学习协议和代表！当我尝试重新创建此示例时，我注意到不遵守此条件：

if([delegate respondsToSelector:@selector(amountEntered:)]) {blabla}

错误在哪里？脚本：

第一次查看.h

```
 #import <UIKit/UIKit.h>
 #import "EnterAmountViewController.h"

 @interface DelegateExampleViewController : UIViewController  <EnterAmountDelegate>{

 IBOutlet UILabel *amountLabel;
 }

 -(IBAction)changeAmountPressed;

 @end 
```

第一次查看.m

```
#import "DelegateExampleViewController.h"

@implementation DelegateExampleViewController

-(IBAction)changeAmountPressed
{
EnterAmountViewController * enterAmountVC = [[EnterAmountViewController alloc]init];

enterAmountVC.delegate = self;

} 

-(void)amountEntered:(NSInteger)amount
{
amountLabel.text = [NSString stringWithFormat:@"%i" , amount];
}

@end 
```

第二视图.h

```
#import <UIKit/UIKit.h>

@protocol EnterAmountDelegate <NSObject>

-(void)amountEntered:(NSInteger)amount;

@end

@interface EnterAmountViewController : UIViewController {

 IBOutlet UITextField *amountTextField;

 id<EnterAmountDelegate> delegate;

 }

-(IBAction)savePressed;

@property(nonatomic,retain) id<EnterAmountDelegate> delegate;

@end 
```

第二视图.m

```
#import "EnterAmountViewController.h"
#import "DelegateExampleViewController.h"

@implementation EnterAmountViewController

@synthesize delegate;

- (void)viewDidLoad {
[super viewDidLoad];

amountTextField.text = @"";
[amountTextField becomeFirstResponder];

}

-(IBAction)savePressed
{

if([delegate respondsToSelector:@selector(amountEntered:)])
{

    [delegate amountEntered:[amountTextField.text intValue]];
    NSLog(@"rugg");
}

}

@end 
```

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T11:45:48.493

在方法中：

```
-(IBAction)changeAmountPressed
{
  EnterAmountViewController * enterAmountVC = [[EnterAmountViewController alloc]init];

  enterAmountVC.delegate = self;
} 
```

您正在堆栈上创建一个实例`EnterAmountViewController`作为局部变量。此变量在范围结束时将不可访问。因此，当您执行时，`savePressed`您是在未设置的不同对象上执行此操作`delegate`。

换句话说，当你检查

```
if([delegate respondsToSelector:@selector(amountEntered:)]) 
```

它返回 NO 因为`delegate`是 nil ...

设置委托的正确方法是使用以下`prepareForSegue`机制：

```
@implementation DelegateExampleViewController

- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender {

   [(EnterAmountViewController*)segue.destinationViewController setDelegate:self];
}
... 
```

您不需要`changeAmountPressed`方法或相对绑定。

# ios - 编译代码后是否可以修改iOS应用程序的URLScheme？

> ID：12973413
> 
> 赞同：1
> 
> 时间：2012-10-19T11:35:25.443
> 
> 标签：ios, facebook, single-sign-on, url-scheme

我正在使用两个 facebook 应用程序与我的 iOS 应用程序执行 facebook 连接（针对不同地区，即英国、美国使用不同的应用程序）。

我正在使用 SSO 进行 facebook 连接（FB SDK 3.1）。现在，我想在不向应用商店提交新版本的情况下支持第三地区。但同样，我必须配置 facebook 应用程序理解的 URL 方案，以便它打开我的 iOS 应用程序（如：fbMY_FB_APP_ID）。

任何帮助将不胜感激。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T11:49:07.840

不，您必须向应用商店提交新应用，因为您要更改`info.plist`

# javascript - HTML5 Socket.IO 在 C++ 中可用吗？

> ID：12973414
> 
> 赞同：3
> 
> 时间：2012-10-19T11:35:28.313
> 
> 标签：javascript, c++, html, websocket

我有一个创建**websocket**的服务器。我在客户端使用**HTML5**、**Javascript**和**JQuery 。**

我从事该项目的同学使用 RFID 技术扫描标签。然后他需要通过套接字从他的应用程序向我发送这些数据。

他喜欢的语言**C++**有可能吗？他需要怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T11:54:38.220

有一些 C++ 的 websocket 实现可用。请参阅[http://en.wikipedia.org/wiki/Comparison_of_WebSocket_implementations](http://en.wikipedia.org/wiki/Comparison_of_WebSocket_implementations)不幸的是，我对其中任何一个都没有经验。

如果这些库都不适合您，我不建议您创建自己的 WebSocket 实现。[这不是一个非常简单的协议](https://www.rfc-editor.org/rfc/rfc6455)（我知道我在说什么——我用 Java 编写了一个 websocket 服务器），只有当客户端是一个 web 浏览器时它才有意义。当客户端能够使用纯 TCP/IP 套接字时，就像用 C++ 编写的客户端一样，没有理由添加 WebSocket 作为另一个间接层。

所以你应该在你的服务器上实现一个替代的网络处理程序，它监听一个普通的非网络套接字。这会容易得多，并且还可以减少客户端和服务器上的协议开销和 CPU 负载。

# c# - ToolStripButton 在显示模态少对话框时有不同的行为

> ID：12973418
> 
> 赞同：0
> 
> 时间：2012-10-19T11:35:40.250
> 
> 标签：c#, winforms, visual-studio-2008, toolstripbutton

我有一个主窗口和一个带有不同命令按钮的工具条。在这些命令中，我也有一个“打印”按钮（见下文）。当我点击“打印”按钮时，我需要将子表单显示为模态少对话框。因为，我在子表单上几乎没有选择。如果用户选择它们，那么他/她也可以与主窗体交互。

![在此处输入图像描述](../Images/5e1218c86c65f669da09ee9d5866cd2b.png)

同时，在 show() 方法上，我禁用主窗体上的所有控件（见下文），因为如果我使用 ShowDialog() 方法来显示子窗体，它将完成。当我单击“打印”按钮时，它的颜色发生了变化，表明它已被聚焦/选中。

![在此处输入图像描述](../Images/efea29bbf40bae3166f1ba85d41a6232.png)

点击子表单如下图所示。

![在此处输入图像描述](../Images/8ef3c8a6a08add0c54fd9c3f2f2b27c0.png)

从逻辑上讲，当我关闭子表单时，它应该返回到以前的模式。但是，即使是子表单也显示......主表单上的“打印”按钮仍处于焦点/选中状态。当我关闭子表单时，“打印”按钮仍然像下面那样聚焦/选中。

![在此处输入图像描述](../Images/c2bd4ae89e243618960b90c1f9e4dcf2.png)

需要更改什么事件/属性才能使此“打印”按钮显示为初始状态。

我已经尝试过 Invalidate()，更改 BackColor 但尚未满足要求。任何准则？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-20T00:48:02.423

`CheckOnClick`如果您根本不希望它显示为“选中”，请将按钮的属性设置为 false，否则`CheckState`在子窗体关闭时切换按钮上的属性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T09:55:53.597

好吧，ToolStripButton 中的 Selected 属性是只读的。任何需要清除工具条按钮选择的人都可以使用以下通过反射调用的方法。

```
MethodInfo method = typeof(ToolStrip).GetMethod("ClearAllSelections", BindingFlags.NonPublic | BindingFlags.Instance);
            method.Invoke(yourToolStripName, null); 
```

这来自：[如何取消选择 ToolStripItems](https://stackoverflow.com/questions/10323224/deselect-toolstripitem-on-contextmenustrip)

快乐编程。

# objective-c - 当这个 NSDictionary 调用 initWithArray 时，为什么它包含 0 个对象？

> ID：12973420
> 
> 赞同：0
> 
> 时间：2012-10-19T11:35:41.093
> 
> 标签：objective-c, ios

我正在编写一个应用程序来审查拉丁动词变位，但我遇到了障碍。我创建了一个结尾数组，但是当我尝试`NSDictionary`用这些结尾初始化 an 时，`count`字典的 the 始终为 0。我做错了什么？

这是`BlackBox.h`：

```
#import <Foundation/Foundation.h>

@interface BlackBox : NSObject

@property (weak) NSDictionary *setOfEndings;

- (void)determineEndingsToUse;

@end 
```

这是来自的相关方法`BlackBox.m`：

```
- (void)determineEndingsToUse
{
NSArray *keys=[[NSArray alloc] initWithObjects:@"first person singular", @"second person singular", @"third person singular", @"first person plural", @"second person plural", @"third person singular", nil];
NSArray *endingsPossible = [[NSArray alloc] initWithObjects:@"ō", @"ās", @"at", @"āmus", @"ātis", @"ant",  nil];
NSLog(@"endingsPossible count: %d", endingsPossible.count);  //This logs 6, correctly.
if (!self.setOfEndings)
{
    self.setOfEndings = [[NSDictionary alloc] initWithObjects:endingsPossible forKeys:keys];
}
NSLog(@"setOfEndings count: %d",self.setOfEndings.count); //This logs 0 instead of 6\.  Why?
} 
```

有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T12:10:22.797

由于 setOfEndings 是一个弱指针，它会立即被释放，因为分配的字典没有强引用。

您可以通过更改对 strong 的引用或进行如下更改来使其工作：

```
 NSDictionary *dict = [[NSDictionary alloc] initWithObjects:endingsPossible forKeys:keys];
 self.setOfEndings = dict;

//By default dict is a strong reference to the allocated dictionary. 
```

# python - 使用 suds 将 python 列表传递给 ladon

> ID：12973423
> 
> 赞同：0
> 
> 时间：2012-10-19T11:35:46.283
> 
> 标签：python, soap, suds, ladon

我想向我的 ladon 服务发送一个 python 列表。考虑以下 python 列表

```
lst_col_title = [(1, 'Column1', 10, 'L'),(2, 'Column2', 15, 'L'),(3, 'Column3', 15, 'L'),(4, 'Column4', 10, 'L'),(5, 'Column5', 10, 'L')] 
```

他们是否有任何可能的方式使用 suds 将这种列表发送到 ladon 服务。

**编辑** 实际上我想使用 suds 将以下 python 变量发送到 ladon 服务

```
 str_report_name = 'OPENING BALANCE REPORT'
    str_report_format = 'GENERAL'
    lst_main_heading = [('<w><h><b><ds>NAME TRAVEL & TOURISM</ds></b></h></w>', 1), ('<p5><b>     <b></p5>', 2), ('<b><p2>P.O BOX 3000, JEDDAH 12345, KSA, Phone: 02 6845455</p2></b>', 3), ('<b><p2>Email: info@nametravel.com, Fax: 02 6873455, C.R.No: </p2></b>', 4), ('', 5)]
    lst_header = []
    lst_report_header = [['', 'CREDIT NOTE', '', '<u><b><w>'], ['', '', '', ''], ['', 'No: RF/1', '', '<b>'], ['To, CASH KAAU (942)', '', 'Date: 01/01/2011', '<b>'], ['    P.O. Box No. 3263,DOHA,QATAR', '', 'Code: C022      ', '<b>'], ['    Tel: +91 9945 4561 45, Fax: +21 7894 7894', '', '', '<b>'], ['    E-Mail: cashkaau123@gmail.com', '', '', '<b>'], ['', '', '', ''], ['Please note that we have CREDITED your account with following details.', '', '', '']]
    lst_page_header = []
    lst_footer = []
    lst_page_footer = []
    lst_report_footer = [['Two Thousand Two Hundred Seventeen Saudi Riyal Only ', '', '2217.00', '<b>'], ['', '', '', ''], ['Accountant', 'Created By:ADMIN', 'Manager', ''], ['', '', '', ''], ['Signature', '', '', '']]
    lst_report_data = [('', '', '', '', ''), (1, '065-9778821549', 'ABOUNASEF/SEHAM KAMEL MRS', 'JED/CAI/JED', '2584.00'), ('', '', '<i>Less</i>: Cancellation Fee', '', '367.00'), ('', '', '', '', ''), ('', 'THIS IS TO CHECK THE NARRATION PRINTING THIS IS TO CHECK THE NARRATION PRINTING THIS IS TO CHECK THE NARR<i>', '', '', '')]
    bln_show_column_heading = True
    lst_col_title = [(1, 'Column1', 10, 'L'),(2, 'Column2', 15, 'L'),(3, 'Column3', 15, 'L'),(4, 'Column4', 10, 'L'),(5, 'Column5', 10, 'L')] 
```

这是我的服务

```
@ladonize(str,str,[PORTABLE_STRING],[PORTABLE_STRING],[PORTABLE_STRING],[PORTABLE_STRING],[PORTABLE_STRING],[PORTABLE_STRING],[PORTABLE_STRING],[PORTABLE_STRING],[PORTABLE_STRING],[PORTABLE_STRING], rtype=str)
def generate_pdf_print(self, str_report_name,str_report_format,lst_main_heading, lst_header, lst_report_header, lst_page_header, lst_footer, lst_report_footer, lst_page_footer, lst_report_data, bln_show_column_heading, lst_col_title, **args): 
```

但是 [PORTABLE_STRING] 不会做我想做的事。

由于我是 Web 服务的新手，我不知道如何处理这些复杂的 python 类型。

**更新**

我创建了一个新的 ladon 类型

```
 lst_col_title = [(1, 'Column1', 10, 'L'),(2, 'Column2', 15, 'L'),(3, 'Column3', 15, 'L'),(4, 'Column4', 10, 'L'),(5, 'Column5', 10, 'L')] 
```

作为：

```
class Table(LadonType):
    slno = int
    col_title = PORTABLE_STRING
    col_size = int
    col_align = PORTABLE_STRING 
```

并将@ladonize 修改为，

```
@ladonize(str,str,[PORTABLE_STRING],[PORTABLE_STRING],[PORTABLE_STRING],[PORTABLE_STRING],[PORTABLE_STRING],[PORTABLE_STRING],[PORTABLE_STRING],[PORTABLE_STRING],[PORTABLE_STRING],[ Table ], rtype=str) 
```

这是正确的方法吗？它给我带来了一个错误

```
' Server raised fault: '
classname: <class 'AccountEngine.Table'>
Dictionary expected for prime_dict got "<type 'unicode'>" of value "1"' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T02:25:07.580

我相信[这](http://www.ladonize.org/index.php/Python_Example)就是您正在寻找的。本质上，您要做的是将每个元组转换为 LadonType，然后返回这些类型的列表，类似于该教程中的`listAlbums`和`listBands`方法。[这是](http://packages.python.org/ladon/ladontype.html)关于 LadonTypes 的另一个教程。

拉登

```
from ladon.ladonizer import ladonize
from ladon.types.ladontype import LadonType

class Calculator(object):

    class Table(LadonType):
        slno = int
        colTitle = str
        colSize = int
        colAlign = str

    @ladonize([Table],rtype=int) #notice the [], around table that means the input will be a list of Table LadonTypes.
    def setTables(self,tables):

        return len(tables) 
```

泡沫

```
from suds.client import Client

client = Client('http://localhost:8888/Calculator/soap/description')

table = client.factory.create('Table')

table.slno = 1
table.colTitle = 'col1'
table.colSize = 10
table.colAlign = 'L'

table2 = client.factory.create('Table')
table2.slno = 2
table2.colTitle = 'col2'
table2.colSize = 15
table2.colAlign = 'L'

tableList = [table, table2]

print client.service.setTables(tableList) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T09:10:57.383

我通过将每个列表转换为字符串解决了这个问题。

```
self.generate_pdf_file(str_report_name,
                str_report_format,
                str(lst_main_heading),
                str(lst_header),
                str(lst_report_header),
                str(lst_page_header),
                str(lst_footer),
                str(lst_report_footer),
                str(lst_page_footer),
                str(lst_report_data),
                bln_show_column_heading,
                str(lst_col_title)) 
```

现在我的@ladonize 看起来像：

```
@ladonize(str,str,str,str,str,str,str,str,str,str,str,str, rtype=str)
def generate_pdf_print(self, str_report_name,str_report_format,lst_main_heading, lst_header, lst_report_header, lst_page_header, lst_footer, lst_report_footer, lst_page_footer, lst_report_data, bln_show_column_heading, lst_col_title, **args): 
```

**并使用eval**恢复这些值，如下所示：

```
def generate_pdf_print(self,db,
                            str_report_name = 'OPENING BALANCE REPORT',
                            str_report_format = 'GENERAL',
                            lst_main_heading = [],
                            lst_header = [],
                            lst_report_header = [],
                            lst_page_header = [],
                            lst_footer = [],
                            lst_report_footer = [],
                            lst_page_footer = [],
                            lst_report_data = [],
                            bln_show_column_heading = True,
                            lst_col_title = [],
                            int_count_blocks_of_data_in_print = 1,
                            str_pdf_theme = 'Default'
                            ):

    lst_main_heading = eval(lst_main_heading) 
    lst_header = eval(lst_header)
    lst_report_header = eval(lst_report_header) 
    lst_page_header = eval(lst_page_header) 
    lst_footer = eval(lst_footer)
    lst_page_footer = eval(lst_page_footer)
    lst_report_footer = eval(lst_report_footer) 
    lst_report_data = eval(lst_report_data) 
    bln_show_column_heading = True
    lst_col_title = eval(lst_col_title) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-11-11T10:15:30.227

可以发送 LadonType 对象列表。

例子：

```
class Mov(LadonType):
    id = int
    text = str

@ladonize([Mov], rtype=PORTABLE_STRING)
def ReceiveMovs(self, moves):
    .... 
```

客户端（ArrayOfxxx，其中 xxx 是对象类名）：

```
moves = client.factory.create("ArrayOfMov")

data1 = client.factory.create("Mov")
data1.id = 1
data1.text = "Test 1"

data2 = client.factory.create("Mov")
data2.id = 2
data2.text = "Test 2" 
```

以及客户端中最重要的部分：

```
moves["item"] = [data1, data2]
res = client.service.ReceiveMovs(moves=moves) 
```

我希望这有帮助！为我的英语道歉。

# .net - .Net Framework 存根生成实用程序不生成预期的类

> ID：12973424
> 
> 赞同：3
> 
> 时间：2012-10-19T11:35:47.327
> 
> 标签：.net, web, service, stub

我正在使用 .Net Frameworks WSDL 实用程序来生成客户端存根。问题是，这个实用程序没有在其他一些类中生成一些类和一些函数。

我从 MS-visual studio 命令提示符发出的命令如下，

```
wsdl /l:CS /protocol:SOAP ../XXXService.wsdl ../XXXSchema.xsd 
```

这会生成错误的客户端存根。我生成错误代码的 XSD 元素如下，

```
<xs:sequence>
          <xs:element minOccurs="0" name="createdTime" type=`enter code here`"xs:dateTime"/>
          <xs:element minOccurs="0" name="description" type="xs:string"/>
          <xs:element name="emailAddress" type="xs:string"/>
          <xs:choice>
            <xs:element name="isBounce" type="xs:boolean"/>
            <xs:sequence>
              <xs:element minOccurs="0" name="fromName" type="xs:string"/>
              <xs:element name="isFrom" type="xs:boolean"/>
            </xs:sequence>
            <xs:element name="isReply" type="xs:boolean"/>
          </xs:choice>
         <xs:element minOccurs="0" name="organizationId" type="tns:OrganizationId"/>
          <xs:element minOccurs="0" name="ownerId" type="tns:UserId"/>
</xs:sequence> 
```

生成的代码是，

```
[System.Xml.Serialization.XmlElementAttribute("fromName", typeof(string))]
[System.Xml.Serialization.XmlElementAttribute("isBounce", typeof(bool))]
[System.Xml.Serialization.XmlElementAttribute("isFrom", typeof(bool))]
[System.Xml.Serialization.XmlElementAttribute("isReply", typeof(bool))]
[System.Xml.Serialization.XmlChoiceIdentifierAttribute("ItemsElementName")] 
```

而如果我以同样的方式使用 WSDLToJava 工具，我会在代码中获得正确的 setter 和 getter 方法。

# c# - 无法从“jQuery Tag-it！”获取标签

> ID：12973433
> 
> 赞同：2
> 
> 时间：2012-10-19T11:36:10.917
> 
> 标签：c#, jquery, asp.net, jquery-ui, tag-it

我在用

> [jQuery 标记它！](http://aehlke.github.com/tag-it/)

在输入字段中制作标签，但在输入字段中添加标签后，我想从输入字段中检索标签和值，

html代码是：

```
<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">
    <title></title>
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.5.2/jquery.min.js" type="text/javascript" charset="utf-8"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.8.12/jquery-ui.min.js" type="text/javascript" charset="utf-8"></script>
    <script src="Scripts/tag-it.js"></script>
    <link rel="stylesheet" type="text/css" href="http://ajax.googleapis.com/ajax/libs/jqueryui/1/themes/flick/jquery-ui.css"/>
    <link href="Content/jquery.tagit.css" rel="stylesheet" />
    <script type="text/javascript">
        jQuery(document).ready(function () {
            jQuery("#mytags").tagit({
                tagSource: function (request, response) {
                    $.ajax({
                        type: "POST",
                        url: "WebForm1.aspx/GetKeyword",
                        data: "{'match': '" + request.term + "'}",
                        dataType: "json",
                        contentType: "application/json",
                        success: function (data) {
                            if (data.d != null) {
                                response($.map(data.d, function (item) {
                                    return {
                                        label: item.Name,
                                        Value: item.Id
                                    }
                                }));
                            }
                        }
                    });
                }
            });
        });
        function myfunction() {
            var tagStr = $("#mytags").tagit("tags")
            alert("Got tags: " + tagStr);
            $('#hiddenTags').val(tagStr);
            return false;
        }
</script>
</head>
<body>
    <form id="form1" runat="server">
    <div>
    <div>
        TO :
    </div>
        <ul id="mytags">
    </div>
        <asp:Button ID="Button1" runat="server" Text="Send" OnClick="Unnamed1_Click" OnClientClick="myfunction();"/>
    </form>
</body>
</html> 
```

和 C# 代码是：

```
public partial class WebForm1 : System.Web.UI.Page
    {
        protected void Page_Load(object sender, EventArgs e)
        {

        }
        [WebMethod]
        public static List<Info> GetKeyword(string match)
        {
            var qry = GetInfo().Distinct().Where(k => k.Name.ToLower().StartsWith(match.ToLower()));
            return qry.ToList();
        }

        public static IEnumerable<Info> GetInfo()
        {
            List<Info> list = new List<Info>();
            list.Add(new Info { Id = 1, Name = "Tom", Email = "Tom@Email.com" });
            list.Add(new Info { Id = 2, Name = "Torex", Email = "Torex@Email.com" });
            list.Add(new Info { Id = 3, Name = "Tresa", Email = "Tresa@Email.com" });
            list.Add(new Info { Id = 4, Name = "Morgan", Email = "Morgan@Email.com" });
            list.Add(new Info { Id = 5, Name = "Paris", Email = "Paris@Email.com" });
            list.Add(new Info { Id = 6, Name = "Patrick", Email = "Patrick@Email.com" });
            return list;
        }

        protected void Unnamed1_Click(object sender, EventArgs e)
        {

        }
    }
    public class Info
    {
        public int Id { get; set; }
        public string Name { get; set; }
        public String Email { get; set; }
    } 
```

当我单击按钮获取标签值时： ![在此处输入图像描述](../Images/3b154a92f123d7b0034fc95c9b3ce94e.png)

**我期望从发送按钮获得值是：morgan,tom,patrick with "id"**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T04:36:25.647

修复您的代码：

html代码是：

```
<%@ Page Language="C#" AutoEventWireup="true" CodeBehind="default.aspx.cs" Inherits="DemoTagit._default" %>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">
    <title></title>
    <link href="css/jquery-ui-base-1.8.20.css" rel="stylesheet" type="text/css" />
    <link href="css/tagit-dark-grey.css" rel="stylesheet" type="text/css" />
    <link href="css/demo.css" rel="stylesheet" type="text/css" />
    <script src="js/jquery.1.7.2.min.js" type="text/javascript"></script>
    <script src="js/jquery-ui.1.8.20.min.js" type="text/javascript"></script>
    <script src="js/tagit.js" type="text/javascript"></script>
    <script type="text/javascript">
        $(function () {

            jQuery("#demo2").tagit({
                tagSource: function (request, response) {
                    $.ajax({
                        type: "POST",
                        url: "default.aspx/GetKeyword",
                        data: "{'match': '" + request.term + "'}",
                        dataType: "json",
                        contentType: "application/json",
                        success: function (data) {
                            if (data.d != null) {
                                response($.map(data.d, function (item) {
                                    return {
                                        label: item.Name,
                                        value: item.Id
                                    }
                                }));
                            }
                        }
                    });
                },
                sortable: true,
                triggerKeys: ['enter', 'comma', 'tab']
            });

            $('#demo2GetTags').click(function () {
                showTags($('#demo2').tagit('tags'))
            });

            function showTags(tags) {
                console.log(tags);
                var string = "Tags (label : value)\r\n";
                string += "--------\r\n";
                for (var i in tags)
                    string += tags[i].label + " : " + tags[i].value + "\r\n";
                alert(string);
            }

            $('#demo2ResetTags').click(function () {
                $('#demo2').tagit('reset')
            });
        });
  </script>
</head>
<body>
    <div class="box">
        <div class="note">
            You can manually specify tags in your markup by adding <em>list items</em> to the
            unordered list!
        </div>
        <ul id="demo2" data-name="demo2">
        </ul>
        <div class="buttons">
            <button id="demo2GetTags" value="Get Tags">
                Get Tags</button>
            <button id="demo2ResetTags" value="Reset Tags">
                Reset Tags</button>
        </div>
    </div>
</body>
</html> 
```

后面的代码是：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web.Services;

namespace DemoTagit
{
    public class Info
    {
        public int Id { get; set; }

        public string Name { get; set; }

        public String Email { get; set; }
    }

    public partial class _default : System.Web.UI.Page
    {
        protected void Page_Load(object sender, EventArgs e)
        {
        }

        [WebMethod]
        public static List<Info> GetKeyword(string match)
        {
            var qry = GetInfo().Distinct().Where(k => k.Name.ToLower().StartsWith(match.ToLower()));
            return qry.ToList();
        }

        public static IEnumerable<Info> GetInfo()
        {
            List<Info> list = new List<Info>();
            list.Add(new Info { Id = 1, Name = "Tom", Email = "Tom@Email.com" });
            list.Add(new Info { Id = 2, Name = "Torex", Email = "Torex@Email.com" });
            list.Add(new Info { Id = 3, Name = "Tresa", Email = "Tresa@Email.com" });
            list.Add(new Info { Id = 4, Name = "Morgan", Email = "Morgan@Email.com" });
            list.Add(new Info { Id = 5, Name = "Paris", Email = "Paris@Email.com" });
            list.Add(new Info { Id = 6, Name = "Patrick", Email = "Patrick@Email.com" });
            return list;
        }

    }
} 
```

祝你好运！鸿鹄

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T11:47:34.633

尝试控制台日志以检查对象内部的内容，也许它是一个数组，在这种情况下使用 .each 。

```
console.log("Got tags: " + tagStr); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-19T11:49:11.730

修复`value`ajax 请求`success`事件处理程序中的属性拼写并使用它：

```
var tagStr = JSON.stringify($("#mytags").tagit("tags")); 
```

并检查您发布和使用的插件链接的来源。

# tomcat - Tomcat 没有启动

> ID：12973437
> 
> 赞同：0
> 
> 时间：2012-10-19T11:36:17.033
> 
> 标签：tomcat

我的 WebApplication 托管在 apache tomcat 上，当我尝试访问该网站时，它只会继续加载并且没有返回任何网页。

当我检查 apache-tomcat 目录时，这些目录中有堆转储。

然后我重新启动了我的服务器，重新启动后网络应用程序不起作用。

当我检查 catalina 日志时，我发现了以下语句：

```
SEVERE: Catalina.start
LifecycleException:  Protocol handler initialization failed: java.net.BindException: The socket name is already in use.:8080
    at org.apache.catalina.connector.Connector.initialize(Connector.java:1019)
    at org.apache.catalina.core.StandardService.initialize(StandardService.java:578)
    at org.apache.catalina.core.StandardServer.initialize(StandardServer.java:782)
    at org.apache.catalina.startup.Catalina.load(Catalina.java:504)
    at org.apache.catalina.startup.Catalina.load(Catalina.java:524)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:79)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:618)
    at org.apache.catalina.startup.Bootstrap.load(Bootstrap.java:267)
    at org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:432)
Oct 19, 2012 7:27:04 AM org.apache.catalina.startup.Catalina load
INFO: Initialization processed in 2281 ms
Oct 19, 2012 7:27:04 AM org.apache.catalina.core.StandardService start
INFO: Starting service Catalina
Oct 19, 2012 7:27:04 AM org.apache.catalina.core.StandardEngine start
INFO: Starting Servlet Engine: Apache Tomcat/5.5.25
Oct 19, 2012 7:27:04 AM org.apache.catalina.core.StandardHost start
INFO: XML validation disabled
Oct 19, 2012 7:27:05 AM org.apache.catalina.loader.WebappClassLoader validateJarFile
INFO: validateJarFile(/sun/student0/webapps/WEB-INF/lib/j2ee.jar) - jar not loaded. See Servlet Spec 2.3, section 9.7.2\. Offending class: javax/servlet/Servlet.class
Oct 19, 2012 7:27:05 AM org.apache.catalina.loader.WebappClassLoader validateJarFile
INFO: validateJarFile(/sun/student0/webapps/WEB-INF/lib/javaee.jar) - jar not loaded. See Servlet Spec 2.3, section 9.7.2\. Offending class: javax/servlet/Servlet.class
Oct 19, 2012 7:27:05 AM org.apache.catalina.loader.WebappClassLoader validateJarFile
INFO: validateJarFile(/sun/student0/webapps/WEB-INF/lib/javax.jar) - jar not loaded. See Servlet Spec 2.3, section 9.7.2\. Offending class: javax/servlet/Servlet.class
Oct 19, 2012 7:27:05 AM org.apache.catalina.loader.WebappClassLoader validateJarFile
INFO: validateJarFile(/sun/student0/webapps/WEB-INF/lib/servlet.jar) - jar not loaded. See Servlet Spec 2.3, section 9.7.2\. Offending class: javax/servlet/Servlet.class
Oct 19, 2012 7:27:05 AM org.apache.catalina.loader.WebappClassLoader validateJarFile
INFO: validateJarFile(/sun/student0/webapps/WEB-INF/lib/tomcat-5.5-servlet-api.jar) - jar not loaded. See Servlet Spec 2.3, section 9.7.2\. Offending class: javax/servlet/Servlet.class
2012-10-19 07:27:06 - Database - Driver: com.sybase.jdbc2.jdbc.SybDriver  URL: jdbc:sybase:Tds:Student:2025/student  User: studentweb
2012-10-19 07:27:06 - Connection Pool - Min: 1  Max: 1  Days: 1.0
Oct 19, 2012 7:27:07 AM org.apache.catalina.loader.WebappClassLoader validateJarFile
INFO: validateJarFile(/opt/apache-tomcat-5.5.25/webapps/ROOT/WEB-INF/lib/j2ee.jar) - jar not loaded. See Servlet Spec 2.3, section 9.7.2\. Offending class: javax/servlet/Servlet.class
Oct 19, 2012 7:27:07 AM org.apache.catalina.loader.WebappClassLoader validateJarFile
INFO: validateJarFile(/opt/apache-tomcat-5.5.25/webapps/ROOT/WEB-INF/lib/javaee.jar) - jar not loaded. See Servlet Spec 2.3, section 9.7.2\. Offending class: javax/servlet/Servlet.class
Oct 19, 2012 7:27:07 AM org.apache.catalina.loader.WebappClassLoader validateJarFile
INFO: validateJarFile(/opt/apache-tomcat-5.5.25/webapps/ROOT/WEB-INF/lib/javax.jar) - jar not loaded. See Servlet Spec 2.3, section 9.7.2\. Offending class: javax/servlet/Servlet.class
Oct 19, 2012 7:27:07 AM org.apache.catalina.loader.WebappClassLoader validateJarFile
INFO: validateJarFile(/opt/apache-tomcat-5.5.25/webapps/ROOT/WEB-INF/lib/servlet.jar) - jar not loaded. See Servlet Spec 2.3, section 9.7.2\. Offending class: javax/servlet/Servlet.class
Oct 19, 2012 7:27:07 AM org.apache.catalina.loader.WebappClassLoader validateJarFile
INFO: validateJarFile(/opt/apache-tomcat-5.5.25/webapps/ROOT/WEB-INF/lib/tomcat-5.5-servlet-api.jar) - jar not loaded. See Servlet Spec 2.3, section 9.7.2\. Offending class: javax/servlet/Servlet.class
Oct 19, 2012 7:27:08 AM org.apache.coyote.http11.Http11BaseProtocol start
SEVERE: Error starting endpoint
java.net.BindException: The socket name is already in use.:8080
    at org.apache.tomcat.util.net.PoolTcpEndpoint.initEndpoint(PoolTcpEndpoint.java:298)
    at org.apache.tomcat.util.net.PoolTcpEndpoint.startEndpoint(PoolTcpEndpoint.java:313)
    at org.apache.coyote.http11.Http11BaseProtocol.start(Http11BaseProtocol.java:151)
    at org.apache.coyote.http11.Http11Protocol.start(Http11Protocol.java:76)
    at org.apache.catalina.connector.Connector.start(Connector.java:1090)
    at org.apache.catalina.core.StandardService.start(StandardService.java:457)
    at org.apache.catalina.core.StandardServer.start(StandardServer.java:700)
    at org.apache.catalina.startup.Catalina.start(Catalina.java:552)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:79)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:618)
    at org.apache.catalina.startup.Bootstrap.start(Bootstrap.java:295)
    at org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:433)
Oct 19, 2012 7:27:08 AM org.apache.catalina.startup.Catalina start
SEVERE: Catalina.start: 
LifecycleException:  service.getName(): "Catalina";  Protocol handler start failed: java.net.BindException: The socket name is already in use.:8080
    at org.apache.catalina.connector.Connector.start(Connector.java:1097)
    at org.apache.catalina.core.StandardService.start(StandardService.java:457)
    at org.apache.catalina.core.StandardServer.start(StandardServer.java:700)
    at org.apache.catalina.startup.Catalina.start(Catalina.java:552)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:79)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:618)
    at org.apache.catalina.startup.Bootstrap.start(Bootstrap.java:295)
    at org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:433)
Oct 19, 2012 7:27:08 AM org.apache.catalina.startup.Catalina start
INFO: Server startup in 3489 ms 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T11:38:15.160

您已经绑定了 8080 端口，更改 tomcat 端口并尝试重新启动

1) 在 {Tomcat 安装文件夹}\conf\ 中找到 server.xml

2）找到以下类似的陈述

```
 <!-- Define a non-SSL HTTP/1.1 Connector on port 8180 -->
    <Connector port="8080" maxHttpHeaderSize="8192"
               maxThreads="150" minSpareThreads="25" maxSpareThreads="75"
               enableLookups="false" redirectPort="8443" acceptCount="100"
               connectionTimeout="20000" disableUploadTimeout="true" /> 
```

或者

```
<!-- A "Connector" represents an endpoint by which requests are received
     and responses are returned. Documentation at :
     Java HTTP Connector: /docs/config/http.html (blocking & non-blocking)
     Java AJP  Connector: /docs/config/ajp.html
     APR (HTTP/AJP) Connector: /docs/apr.html
     Define a non-SSL HTTP/1.1 Connector on port 8080
-->
<Connector port="8080" protocol="HTTP/1.1" 
           connectionTimeout="20000" 
           redirectPort="8443" /> 
```

将 8080 更改为您选择的任何其他端口，保存文件，然后启动 tomcat。

# zend-framework - Zend_Dojo_Form 密码文本框验证器不起作用

> ID：12973438
> 
> 赞同：1
> 
> 时间：2012-10-19T11:36:18.677
> 
> 标签：zend-framework, dojo, passwords, token, validation

我是zf的新手，最近我正在使用zend_dojo_form制作一个注册表单，其中有两个passwordtextbox元素，你知道，一个用于输入密码，另一个用于确认前一个，然后我使用验证器'token'但失败了，这是我的代码的一部分。

```
$this->addElement('PasswordTextBox','password',array(
            'label'=>'password:',
            'required'=>true,
            'trim'=>true,
            'regExp'=>'^[a-z0-9]{6,18}$',
            'invalidMessage'=>'password should be 6-18',
            'Decorators' => array(
                'DijitElement',
                'Errors',
                array(array('data'=>'HtmlTag'),array('tag'=>'td','align'=>'left')),
                array('Label',array('tag'=>'td')),
                array(array('row'=>'HtmlTag'),array('tag'=>'tr','align'=>'right'))
                )
            )
        );
    //$this->addElement($password1);

    $this->addElement('PasswordTextBox','password2',array(
        'label'=>'confirm password:',
        'required'=>true,
        'trim'=>true,
        //'regExp'=>'^[a-z0-9]{6,18}$',
        'validators'=>array(array('identical',false,array('token'=>'password'))),
        'invalidMessage'=>'the password you enter not the same',
        'Decorators' => array(
            'DijitElement',
            'Errors',
            array(array('data'=>'HtmlTag'),array('tag'=>'td','align'=>'left')),
            array('Label',array('tag'=>'td')),
            array(array('row'=>'HtmlTag'),array('tag'=>'tr','align'=>'right'))
            )
        )
    ); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-20T12:49:35.137

这是一个应该可以正常工作的示例：

```
class Application_Form_Register extends Zend_Dojo_Form {

    public function init() {
            $this
                            ->setOptions(array('name' => 'registerForm'))
                            // username
                            ->addElement('TextBox', 'first_name', array(
                                    'filters' => array('StringTrim', 'StringToLower'),
                                    'id' => 'name_register',
                                    'required' => true,
                                    'label' => 'Fornavn(e):',
                            ))
                            ->addElement('TextBox', 'last_name', array(
                                    'filters' => array('StringTrim', 'StringToLower'),
                                    'id' => 'surname_register',
                                    'label' => 'Efternavn:',
                            ))
                            ->addElement('ValidationTextBox', 'email', array(
                                    'filters' => array('StringTrim', 'StringToLower'),
                                    'validators' => array(
                                            'EmailAddress',
                                            array('StringLength', false, array(3, 60)),
                                    ),
                                    'regExp' => "^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$",
                                    'id' => 'email_register',
                                    'required' => true,
                                    'label' => 'E-mail:',
                            ))
                            //password
                            ->addElement('PasswordTextBox', 'password', array(
                                    'filters' => array('StringTrim'),
                                    'validators' => array(
                                            'Alnum',
                                            array('StringLength', false, array(6, 20)),
                                    ),
                                    'regExp' => "^([a-zA-Z0-9_\-!-=]){4,32}$",
                                    'tooltipPosition' => 'above',
                                    'invalidMessage' => 'Krav til password: mellem 4 og 32 i længde og kun karakterer som tal, bogstaver eller blandt [ _-!"#%&/()=] er tilladt',
                                    'id' => 'password_register',
                                    'onKeyDown' => 'arguments[0].keyCode == dojo.keys.ENTER && application.submitRegistration(dijit.byId(\'registerForm\'));',
                                    'required' => true,
                                    'label' => 'Password:',
                            ))
                           ->addElement('PasswordTextBox', 'password_confirm', array(
                                    'filters' => array('StringTrim'),
                                    'validators' => array(
                                            'Alnum',
                                            array('StringLength', false, array(6, 20)),
                                    ),
                                    'id' => 'passwordconfirm_register1',
                                    'onKeyDown' => 'arguments[0].keyCode == dojo.keys.ENTER && application.submitRegistration(dijit.byId(\'registerForm\'));',
                                    'required' => true,
                                    'label' => 'Gentag password:',
                            ))

                           ->addElement('PasswordTextBox', 'password_confirm', array(
                                    'filters' => array('StringTrim'),
                                    'validators' => array(
                                            'Alnum',
                                            array('StringLength', false, array(6, 20)),
                                    ),
                                    'id' => 'passwordconfirm_register2',
                                    'onKeyDown' => 'arguments[0].keyCode == dojo.keys.ENTER && application.submitRegistration(dijit.byId(\'registerForm\'));',
                                    'required' => true,
                                    'label' => 'Gentag password:',
                            ))
                            ->addElement('Hidden', 'action', array(
                                    'id' => 'action_register',
                                    'value' => 'register',
                            ))
                            ->addElement('Button', 'foo', array(
                                    'id' => 'foo_register',
                                    'onClick' => 'application.submitRegistration(dijit.byId(\'registerForm\'))',
                                    'label' => 'Register'
                                            )
            );
            $this->_decorate();

    }
    // renders nulled empty labels and adds classnames, related to element name
    protected function _decorate() {
            $this->setDecorators(array(
                    'FormElements',
                    array('HtmlTag', array('tag' => 'div', 'class' => 'zend_form_contents')),
                    'DijitForm'
            ));

            foreach ($this->getElements() as $el) {

                    $el->addDecorator('HtmlTag', array('tag' => 'div', 'class' => $el->getName() . '-wrap'));
                    if ($el->helper == 'Button')
                            continue;
                    else if (strlen(trim($el->getLabel())) == 0)
                            $el->addDecorator('Label', array('tag' => null));
                    else
                            $el->addDecorator('Label', array('tag' => 'div', 'class' => $el->getName() . '-label'));
            }
    }
} 
```

关注两个密码字段——就客户端验证的原因而言，让我们过滤掉 Zend_Form_Element 属性：

```
 ->addElement('PasswordTextBox', 'password_2_', array(
       // strictly serverside, only accepts alphanumerical pwds lengths 6 through 20
       'validators' => array(
           'Alnum',
           array('StringLength', false, array(6, 20)),
       ),
       // widget id
       'id' => 'passwordconfirm_register1',
       // both client-/server-side - triggers 'emptyMessage' validation
       'required' => true,
       // runs with the form.validate() and events onblur, oninit, onkeypress
       // if ! dijit.get("value").match(dijit.regExp) show 'invalidMessage'
       // this example matches the serverside reqs
       'regExp' => "^([a-zA-Z0-9_\-!-=]){6,32}$",
       // shown with form.validate(), dijit.validate() and input.blur() if regExp is not  a match against value
       'invalidMessage' => 'Password musts: 6 to 32 chars and only numbers, letters or amongst [ _-!"#%&/()=]',
  )) 
```

还有第二个 pwd 字段，具有相同的属性但具有不同的验证器

```
 ->addElement('PasswordTextBox', 'password_2_', array(
       // strictly serverside, only accepts alphanumerical pwds lengths 6 through 20
       'validators' => array(
           array('identical',false,array('token'=>'password'))
       ),
       // widget id
       'id' => 'passwordconfirm_register2',
       'required' => true,
       // in theory, we would define 'validator' in programmatic construct of
       // the validationtextbox. but this will not work with the way Zend handles dojo
       // 'validator' => 'function(value, constraints) { return "BAD PRACTICE" }'
  ));
  // add javascript code to run onload and to extend the 'register2' properly
  $this->getElement()
      ->getView()
      ->headScript()
      ->appendFile($baseUrl . '/js/Validator.js'); 
```

到目前为止，在 passwordconfirm_register2 小部件中仅验证了客户端的“必需”。让我们修正一下标记工厂对上述行中的“不良做法”所做的事情。删除该行并添加 javascript 代码，其中包含：

```
// file: baseUrl/js/Validator.js
dojo.addOnLoad(function() {
  dijit.byId('passwordconfirm_register2').validate = function(value, constraints) {

     if(dijit.byId('passwordconfirm_register1').get("value") != value) {
            this.invalidMessage = "Passwords are not identical";
            return false;
     }

     return true

  });
}); 
```

# php - 如何使用 jQuery/Javascript/PHP 删除 HTML 表中的记录

> ID：12973450
> 
> 赞同：0
> 
> 时间：2012-10-19T11:36:54.300
> 
> 标签：php, javascript, jquery, html

我目前正在处理以 HTML 格式列出的记录，记录来自数据库，在该表的末尾部分，我有一些操作，编辑删除显示，我已经完成了编辑，这与我的 DELETE，我的 DELETE 操作是使用 ajax 完成的，但问题是我无法正确获取每个按钮的值，其中包含来自数据库的 ID。

这是删除按钮所在的表的一部分：

```
 <td width="61"><button id="delete" value="<?php echo "$arr[0]"; ?>">Delete</button></td> 
```

这些是 jQuery 部分

```
$("#delete").click(function(){
    alert($("#delete").val()); <-- CAN"T GET THE CORRECT ID
    //AJAX PART HERE
}) 
```

问题是我无法正确获取我按下的按钮的值，我该怎么做，任何建议都非常感谢..

这是桌子的整体视图，

![在此处输入图像描述](../Images/b61b35c9ee2cde080cebaa69c4616f2d.png)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-19T11:39:55.880

未经测试，但我预计问题是您正在尝试获取 的`val()`所有匹配项`#delete`，这可能是您的所有删除按钮（如果没有看到您生成的 HTML，我无法知道）。

根据 HTML 规范，您实际上应该使用 class of`delete`和 select with`.delete`而不是 an `id`，因为 an应该引用唯一元素。`id`

```
$("#delete").click(function(){
    // note the use of `this` to refer to clicked object, rather than all delete buttons
    alert($(this).val());
    //AJAX PART HERE
}) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T11:41:18.133

首先，在服务器端编写delete方法，如delete.php，返回状态，如'error'和'success'

```
$("#delete").click(function(){
    var id = $(this).attr('id');
    //AJAX PART HERE
    $.get('delete.php?id=xxx',function(status){
        if (status == 'success') $(this).parent().remove();
    }
}) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-19T11:45:22.080

只需使用jQuery的'this'来访问函数内的按钮......

例如

代替

```
alert($("#delete").val()); <-- CAN"T GET THE CORRECT ID 
```

和

```
alert($(this).val()); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-19T11:47:49.857

按钮的值是在其上显示为文本的内容，但这不会让您获得表格的 ID。此外，由于有多个删除按钮，请使用类而不是 id。

使用名为“db-id”的自定义属性将您的 html 代码更改为类似的内容，通过该属性您将找到要删除的记录：

```
<input class="delete" db-id="<?=$db-id?>" value="Delete"/> 
```

然后，你的js代码可以这样调整：

```
$(".delete").click(function(){
    var dbid = $(this).attr('db-id');
    $.ajax({
        type: 'POST',
        url: 'script-url/here.php'
        data: 'id=' + dbid,
        success: function(feedback){
            if(success==true) $('tr[db-id="' + dbid + '"]').delete
        }
    }).error(){
        alert('Something went horribly wrong!');
    };
}) 
```

请注意，在成功功能中，您甚至可以使用使包含数据的行消失`.delete()`

另请注意，任何恶意用户都可以在浏览器中编辑按钮的 db-id，因此请在 php 脚本中采取所有必要的预防措施和验证！

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-19T11:51:00.793

试试这个：

```
 $("button[id=delete]").click(function(){  
      $(this).closest('tr').remove(); // Delete row
      alert($(this).attr('value'));  // ID
  }); 
```

button[id=delete] - 因为你会有很多具有相同 ID 的按钮，最好使用 CSS 类...

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-19T11:53:13.973

好的，这是您的解决方案：

1) insted of id="delete" 使用类。像这样：

```
<td width="61"><button class="delete" value="<?php echo "$arr[0]"; ?>">Delete</button></td> 
```

2）你的jQuery应该是：

```
$(".delete").click(function(){
    alert($(this).val()); <-- CAN"T GET THE CORRECT ID
    //AJAX PART HERE
}) 
```

这应该提醒propper id，我建议这个方法进行编辑，并显示动作......

# objective-c - 在 AppDeglate 中存储 NSMutableArray - 奇怪的行为 - iPhone

> ID：12973455
> 
> 赞同：1
> 
> 时间：2012-10-19T11:37:22.057
> 
> 标签：objective-c, ios, xcode, nsmutablearray, appdelegate

我在我的应用程序委托中声明了一个 NSMutableArray ：

```
@property (nonatomic, copy) NSMutableArray * passengerLog;

- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
passengerLog = [[NSMutableArray alloc]init]; 
```

然后在后面的课程中，我按如下方式访问数组（del 是对应用程序委托的引用）：

```
[del.passengerLog addObject:passenger]; 
```

奇怪的是，我第二次向这个数组添加一个对象时，这第二个对象被添加到数组中两次，覆盖了已经在那里的原始对象。

有人可以帮忙吗？

谢谢 ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T11:43:14.747

您确定它被添加了两次并替换了第一个吗？在应用程序委托的实现中，您应该参考该属性：

```
self.passengerLog = [[NSMutableArray alloc] init]; 
```

这可能会导致奇怪的行为。

编辑：

请发布更多代码，以便我们为您提供帮助。这是您分配数组的唯一地方吗？如果是，确定您一直在使用相同的阵列实例吗？

# zend-form - 如何在 Zend Framework 2 中删除对 Select 元素的验证

> ID：12973459
> 
> 赞同：2
> 
> 时间：2012-10-19T11:37:34.183
> 
> 标签：zend-form, zend-framework2

我想绕过 Zend Framework 2 中选择元素的烦人验证。我的要求是我有两个选择下拉框，我将值从左选择框传递到右选择框，最后当我单击提交按钮时，我从右选择框中发布值。

所以基本上左选择框是用来向用户显示值的，我的问题是在左选择框中没有选择值，它会抛出这个错误：

```
["selectAll"] => array(1) {
      ["isEmpty"] => string(36) "Value is required and can't be empty"
    } 
```

我看过一些来自 Stackoverflow 的旧帖子，这在 Zend Framework 1 中是可能的，就像可以禁用特定选择元素的验证一样

例子：-

```
$selectAllElement->setRequired(false); 
```

或者

```
$selectAllElement->removeDecorator('Errors'); 
```

这些方法在 Zend Framework 2 中是如何不可用的。如果有人有解决方案来禁用特定选择元素的验证，请分享您的知识，这对进入 Zend Framework 2 的人会很有帮助。

**编辑：**

在我的表格中-

```
 $select = new Element\Select('selectAllElement');
    $select->setAttribute('title', 'Select a Value')
            ->setAttribute('id', 'id');

    $options = array(
        array(
           //Fetching the values from database
            ),
    );

   $select->setAttribute('multiple', 'multiple')
        ->setAttribute('required', false)
        ->setValueOptions($options);

   $this->add($select); 
```

根据 Sam 的请求，我提供了如何将 select 元素添加到表单并设置属性的代码。

**注意**：我没有使用任何**FIELDSETS**

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-19T13:25:59.520

为了澄清这一点，在任何 Zend\Form\Element 上使用`setRequired()`-Method 只声明是否`required="(bool)"`应该呈现 HTML 属性。

如果要从验证中排除字段/元素，则需要在 InputFilters 设置中定义它`'required' => false`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-10-23T12:17:42.920

有时对我来说，setRequired(false) 在使用视图中不存在的选择多个或复选框时不起作用，因此，我只是覆盖 isValid 方法并删除验证器，如上面的代码：

```
public function isValid() {
    $this->getInputFilter()->remove('alterarsenha');
    $this->getInputFilter()->remove('usuario_perfis');

    return parent::isValid();
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-02-07T15:37:23.373

我知道这个话题很可能已经过时了，但也许有人认为这很有用。

在我使用的 zf2 版本中，Zend\Form\Element\Select 类中有一个错误，该类在此方法选项中提供 InputProviderInterface，尤其是方法 getInputSpecification()

```
$spec = array(
    'name' => $this->getName(),
    'required' => true,
); 
```

因此，如果您重新定义方法 getInputSpecification 它应该可以工作。

# drop-down-menu - 正确定位插入符号

> ID：12973461
> 
> 赞同：0
> 
> 时间：2012-10-19T11:37:42.110
> 
> 标签：drop-down-menu, twitter-bootstrap, caret

以下 html 结果错误定位插入符号。如何强制它与链接文本在同一行？

```
<a class="dropdown-toggle" data-toggle="dropdown" href="#">
 link text <span class="caret"></span>
</a> 
```

![在此处输入图像描述](../Images/7d7053bf755912c4ec9cab253fb32f50.png)

# drupal-7 - 未调用 hook_commerce_checkout_complete

> ID：12973464
> 
> 赞同：0
> 
> 时间：2012-10-19T11:38:00.713
> 
> 标签：drupal-7, drupal-commerce

我正在尝试使用 Drupal 商务模块在 Drupal 7 中的结帐流程之后执行一些业务逻辑。我已经阅读了我可以使用钩子 hook_commerce_checkout_complete 但它没有被调用的文档

```
function api_manager_commerce_checkout_complete($order) {
    $ow = entity_metadata_wrapper('commerce_order', $order);

    foreach ($ow->commerce_line_items as $line_item) {
     $sku = $line_item->commerce_product->sku->value();

     $record = array(
      'uid' => get_user_id(),
      'sku' => $sku,
      'token' => uniqid(),
     );

     drupal_write_record('api_manager_product_user', $record);
    }

} 
```

供您参考，我已在结帐配置中禁用“付款”和“账单信息”

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-20T13:00:59.187

每当在 Drupal 中实现新的钩子时，您都需要清除缓存（类）。只有这样，那个特定的钩子才会在被调用时可用并被触发。

[如果您使用的是 devel 模块，您可以使用module_implements](http://api.drupal.org/api/drupal/includes!module.inc/function/module_implements/7)函数检查您的钩子是否被 Drupal 系统识别。开发模块在[http://www.mysite.com/devel/php](http://www.mysite.com/devel/php)为您提供了一个方便的工具来尝试这些片段。

```
dpm(module_implements('commerce_checkout_complete')); 
```

如果您的模块名称未列为上述函数的输出，则表示您的钩子无法识别。如前所述，在这种情况下请清除您的缓存。

# ios - 无法理解 iOS 中的 viewController

> ID：12973466
> 
> 赞同：1
> 
> 时间：2012-10-19T11:38:03.573
> 
> 标签：ios, uiviewcontroller, sparrow-framework

我是 obj-c/iOS 的新手，我在概念上至少无法理解 viewControllers。我已经阅读了很多 Apple Doc，我什至在 xCode 中在某种程度上使用了 viewController，但我仍然不太了解它们是什么，或者使用它们的最佳方法是什么。

多年来，我一直是一名 AS3 开发人员，所以我的思想在 MovieClips/Sprites 和显示列表的上下文中工作，以在屏幕上获取图形。

好吧，据我了解...

1.  viewController 是一种以某种方式处理图形然后允许您对它们做某事的类？最基本的意义是什么？
2.  您似乎将 viewControllers 添加到 Window 类，我猜这有点像将显示对象添加到显示列表？
3.  从最基本的意义上说，viewController 为您做了什么？
4.  是否有某些事情你绝对不能用它们做或不应该用它们做？
5.  viewControllers 是否需要以某种方式连接到 iOS 框架的其余部分才能运行（除了添加到窗口中）。
6.  他们究竟如何使用数据？（我已经阅读了 MVC，我知道从概念上讲这是一个稍微不同的问题）据我所知，您不会将数据硬编码到 viewController 中，那么 viewController 如何访问任何静态数据？
7.  假设我只是想在屏幕上显示一个图像，那么 viewController 在这个过程中究竟会扮演什么角色？它只是处理该过程的一小部分，还是整个节目并处理所有事情？
8.  一个 viewController 可以处理多个图像吗？就像它的术语一样，是屏幕上所有图像的“控制器”，还是一次处理一个图像？
9.  什么是与它处理的图像的 viewControllers 连接？它包含对它们的引用？

我正在使用有帮助的 Sparrow 框架，但我仍然希望能够了解 viewController 是什么，因此我知道如何正确使用它们。

哈，我为以上内容道歉，我知道我一定看起来完全糊涂了 :) 感谢您的任何建议。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-19T12:02:12.337

希望这可以帮助你：

1.  viewController 是一种以某种方式处理图形然后允许您对它们做某事的类？

    > 它是视图（Xib 文件）和数据（可以是 CoreData 或您在后端使用的任何内容）之间的粘合剂。您在视图中使用的所有 UI 元素通常定义为控制器中的属性以访问它们。

2.  最基本的意义是什么？您似乎将 viewControllers 添加到 Window 类，我猜这有点像将显示对象添加到显示列表？

    > 我真的不了解 AS3，所以我无法将显示列表与 ViewControllers 进行比较。但基本上 ViewController 可以处理视图之间的不同类型的转换并访问（设置/读取）视图中显示的数据。

3.  从最基本的意义上说，viewController 为您做了什么？

    > 就像我上面写的一样。最基本的意义是它们解释用户在视图上所做的事情，并根据用户的操作改变模型。

4.  是否有某些事情你绝对不能用它们做或不应该用它们做？

    > 总是很难保持模型和控制器之间的边界。他们彼此非常接近。所以我通常尝试将所有逻辑东西（如计算、数据库访问等）重新分配给模型部分。但是当然，您正在控制器中使用这些外部类。

5.  viewControllers 是否需要以某种方式连接到 iOS 框架的其余部分才能运行（除了添加到窗口中）。

    > 就像您已经编写了 ViewController 需要连接到视图一样。否则就没有多大意义了。UIViewController 有不同的子类型，例如 UINavigationController，您可能需要重写一些其他方法来提供这些特殊子类型所需的全部功能。

6.  他们究竟如何使用数据？（我已经阅读了 MVC，我知道从概念上讲这是一个稍微不同的问题）据我所知，您不会将数据硬编码到 viewController 中，那么 viewController 如何访问任何静态数据？

    > 可能有不同的方法来存储数据。最简单的方法是将数据直接存储在 UIViewController 中。这可能是一个自定义类，它是数据的容器。所有的变化都直接写入这个类并由 UIViewController 显示。但在大多数情况下，使用 CoreData 是有意义的（它负责将数据读/写到 sqlite 数据库中）。您可以将 CoreData 视为您的模型，并且 UIViewController 从那里获取数据并将 UIViewController 从 View 接收到的数据传递回给它。

7.  假设我只是想在屏幕上显示一个图像，那么 viewController 在这个过程中究竟会扮演什么角色？它只是处理该过程的一小部分，还是整个节目并处理所有事情？

    > UIViewController 将存储一个内部属性 (UIImageView *)，该属性位于 Interface Builder 中，与您在 Xib 文件中创建的 UIImageView 连接。因此，通过这些属性，您可以通过控制器更改图像。

8.  一个 viewController 可以处理多个图像吗？就像它的术语一样，是屏幕上所有图像的“控制器”，还是一次处理一个图像？

    > 是的，这不是什么大问题。您可以拥有任意数量的图像。您只需要在 UIViewController 中定义属性并链接到视图。

9.  什么是与它处理的图像的 viewControllers 连接？它包含对它们的引用？

    > 是的，它就像对 UIElement 的引用。然后，您可以直接从 UIViewController 更改所需的 UIImageView 的任何属性

一些有用的链接：

*   [苹果官方 ViewController 指南](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIViewController_Class/Reference/Reference.html#//apple_ref/occ/cl/UIViewController)
*   [Apple 官方 ViewController 基础知识](http://developer.apple.com/library/ios/#featuredarticles/ViewControllerPGforiPhoneOS/AboutViewControllers/AboutViewControllers.html#//apple_ref/doc/uid/TP40007457-CH112-SW10)
*   [你应该看看 Storyboards（你可以从 IOS 5.0 开始使用它们）](http://developer.apple.com/library/ios/#documentation/iPhone/Conceptual/SecondiOSAppTutorial/Introduction/Introduction.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-19T14:46:52.913

简而言之，视图控制器是 MVC 模式中的控制器。请在进一步阅读之前检查此链接，以便您了解此模式的最新信息：

[http://developer.apple.com/library/mac/#documentation/General/Conceptual/DevPedia-CocoaCore/MVC.html](http://developer.apple.com/library/mac/#documentation/General/Conceptual/DevPedia-CocoaCore/MVC.html)

好的，基本上一个控制器管理着一组视图。它还从您的模型中获取数据并设置视图的状态。重要的是要注意视图对您的模型（您的数据）一无所知，而模型对您的视图一无所知。控制器还从视图接收事件并决定如何相应地更改模型。它本质上是管理视图和模型之间的同步。

有一些技术可以帮助实现这一点，例如 KVO 和键值绑定。谷歌搜索将帮助你。

还有一件事。除了控制器之外，应用程序的任何其他部分都不应访问您的视图。因此，通常在应用程序中，控制器倾向于相互通信，例如通过导航控制器下的控制器之间的转换或委托模式。因此，您的应用程序主干往往是相互交谈的控制器。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-19T11:56:56.130

我建议您检查： [https ://stackoverflow.com/questions/1939/how-to-articles-for-iphone-development-and-objective-c](https://stackoverflow.com/questions/1939/how-to-articles-for-iphone-development-and-objective-c)

以下是您的问题的答案：

1.  不，它不处理图形。[它是MVC](http://en.wikipedia.org/wiki/Model%E2%80%93view%E2%80%93controller)设计模式的控制器。它处理其内容（例如视图）和与之链接的数据的生命周期。
2.  A`UIViewController`被设置为 的根`UIWindow`。例如，a`UINavigationController`是用于处理导航的`UIViewController`堆栈的子类。`UIViewController`
3.  (1) 中的响应
4.  请尝试更具体地说明这个问题。
5.  正如已经评论过的，如果您使用已经内置的组件，例如`UINavigationController`or ，它会很有用`UITabBarController`。
6.  例如，您可以将数据放在实例变量中，并将它们显示在包含的`UIView`.
7.  `UIView`附加到您的遗嘱`UIViewController`中包含一个`UIImageView`. 您`UIViewController`将与它建立联系，以便进行所需的任何更改，例如，在用户按下按钮时更改图像。
8.  它可以包含多个`UIViews`，因此可以包含多个`UIImageViews`（它是 的子类`UIView`）
9.  正如所评论的，它们将包含在一个上，`UIImageView`并且将以编程方式或与一个`IBOutlet`.

# ruby - 正则表达式在 Ruby 中捕获相同数字组

> ID：12973468
> 
> 赞同：5
> 
> 时间：2012-10-19T11:38:12.257
> 
> 标签：ruby, regex, numbers, digits

是否可以在 Ruby 上使用正则表达式捕获字符串中所有相同的数字？我不熟悉正则表达式。

我的意思是：正则表达式`"1112234444"`会产生`["111", "22", "3", "4444"]`

我知道，我可以使用`(\d)(\1*)`，但它在每场比赛中只给我 2 组。`["1", "11"], ["2", "2"], ["3", -], ["4", "444"]`

如何在每场比赛中获得 1 组？谢谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-19T11:55:08.653

在这里，试一试：

```
((\d)\2*) 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-19T11:56:27.597

你可以使用这个正则表达式

```
((\d)\2*) 
```

第 1 组捕获您所需的值

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-19T12:03:00.447

我的第一个快速回答因没有解释代码而受到批评。所以这是另一个，在所有方面都更好;-)

我们利用这样一个事实，即我们想要运行的元素是数字并且它们很容易手动枚举。所以我们构造了一个可读的正则表达式，意思是“一连串零，或一连串，……或一连串九”。我们使用正确的方法来完成这项工作，[String#scan](http://apidock.com/ruby/String/scan)：

```
irb> "1112234444".scan(/0+|1+|2+|3+|4+|5+|6+|7+|8+|9+/)
=> ["111", "22", "3", "4444"] 
```

作为记录，这是我的原始答案：

```
irb> s = "1112234444"
=> "1112234444"
irb> rx = /(0+|1+|2+|3+|4+|5+|6+|7+|8+|9+)/
=> /(0+|1+|2+|3+|4+|5+|6+|7+|8+|9+)/
irb> s.split(rx).reject(&:empty?)
=> ["111", "22", "3", "4444"] 
```

# c# - K-lite 编解码器崩溃问题

> ID：12973471
> 
> 赞同：0
> 
> 时间：2012-10-19T11:38:25.487
> 
> 标签：c#, video, mediaelement, codec, wmp

我有一个 C# windows 窗体应用程序，我在其中使用 WMP activex 对象和 WPF MediaElement 播放视频（我已使用元素主机将它包含在 windows 窗体中）。当应用程序启动时，用户选择 WMP 或媒体元素来播放视频。然后应用程序从预定义的本地目录中一一开始播放视频。

视频格式几乎是所有领先的格式，如 wmv、avi、mpg、mpeg、mp4、mkv、flv、mov、vob、3gp。我正在使用 K-lite 编解码器完整包，以便所有这些格式都可以在播放器中播放。

现在，问题是在安装了 k-lite 和我的应用程序后一切正常（所有视频都可以正常播放）。但一段时间后，一些视频在两个组件中都停止播放。当时我检查了它是否在实际的（本机）Windows 媒体播放器中播放，但它也没有在其中播放。然后，如果我卸载 K-lite 并再次安装它，视频就会开始在我的应用程序以及本机 WM 播放器中播放。一段时间后，此行为再次发生。

它发生后的时间可以是几小时到几天之间的任何时间，并且每次它发生在不同的视频格式上。我也用不同的硬件检查过它，行为是一样的。这可能是什么问题？是组件（WMP activex 和媒体元素）问题吗？真的是编解码器崩溃的问题吗？还是这个编解码器问题与图形驱动程序冲突？

另外，我在注册表中禁用了硬件加速。

另外，我忘记告诉你的一件事是这个屏幕

![WMP 初始设置](../Images/6a729ba576bd5e1bd54d172f6d8f29ac.png)

除了 K-lite 编解码器，这也是一种情况。我不明白为什么我的 WMP 设置会丢失，它要求我一次又一次地这样做，尽管我已经关闭了 Windows 更新。

谢谢。

# android - 当我单击它时，如何在按钮的位置显示进度对话框？

> ID：12973477
> 
> 赞同：1
> 
> 时间：2012-10-19T11:39:00.840
> 
> 标签：android

单击按钮时，我想在按钮的位置显示进度对话框。现在，当我单击按钮时，我的进度对话框将显示在屏幕中央。我怎样才能实现它？提前致谢..

# file-upload - 文档上传（doc、docx、odt 等）并在 Rails 中显示（作为文本）？

> ID：12973478
> 
> 赞同：2
> 
> 时间：2012-10-19T11:39:03.180
> 
> 标签：file-upload, ruby-on-rails-3.2, document

有谁知道如何上传文件以便稍后在 Rails 应用程序中显示（作为文本）？[回形针](https://github.com/thoughtbot/paperclip)是正确的宝石吗？如果是怎么回事？（我以前用回形针上传过图片）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T11:53:55.257

我喜欢回形针。它似乎有据可查，并且适用于我需要的一切。（我个人不认识他们中的任何一个，但Thoughtbot 的聪明人创造了一些非常有用的东西，我觉得感谢他们）。

显然，您需要将 Paperclip 添加到您的 Gemfile 中，并且（如果您使用的是 bundler）进行捆绑安装

1.  添加到您的模型

    ```
    has_attached_file :aFile 
    ```

2.  向您的控制器添加一些东西以捕获您在视图中命名的任何内容（可能在您的创建和更新方法中）

    ```
    @profile.aFile = params[:profile][:aFile] 
    ```

3.  如果它是必需的参数，可能应该检查它的存在

    ```
    if params[:profile][:aFile].blank?
      redirect_to @profile
    else
      render :action => 'do_something_interesting_with_file'
    end 
    ```

就是这样。不要忘记您的配置条目。例如，如果您对文件使用某种后处理

```
 Paperclip.options[:command_path] = "/opt/local/bin/" 
```

我发现这非常有帮助

[瑞恩·贝茨的 RailsCast](http://railscasts.com/episodes/134-paperclip)

# jackrabbit - (JCR) 子冻结节点的版本

> ID：12973479
> 
> 赞同：1
> 
> 时间：2012-10-19T11:39:05.677
> 
> 标签：jackrabbit, jcr, modeshape

我的问题是：您如何阅读（子）冻结节点的版本？
更多细节：
- 让我们想象以下情况：节点 A 有两个子节点 B 和节点 C。
- 所有三个节点都是可版本控制的节点（具有 mixin 类型）
- 假设节点 A 从 1.0 到 1.6 有 7 个版本：在 1.2 版本我们添加了节点 B，在 1.4 版中我们添加了节点 C。
我有一个例程在 1.5 版中打印节点 A 的“输出”。

```
 //I already obtained the Version object version associated to node A version 1.5
 NodeIterator nodeIterator = version.getNodes(); 
 while (nodeIterator.hasNext()) { 
   Node currentNode = nodeIterator.nextNode();
   System.out.println("Node: "+currentNode.getPath());
   // I can see that some of the nodes correspond to children (versions) of 
   //node B and C ..how can I get their version? 
 } 
```

谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-19T12:45:03.473

父节点历史记录中的每个版本都将包含一个“冻结节点”，它表示创建版本时（例如，签入父节点时）存在的父节点的快照。此冻结节点包含子节点，它们是子节点的快照（如果子节点不可版本化）或“nt:versionedChild”节点（如果子节点可版本化）。此“ `nt:versionedChild`”节点包含一个“ `jcr:childVersionHistory`”REFERENCE 属性，该属性指向子节点的***版本历史记录***。

[JSR-283 规范的第 3.13.10 节](http://www.day.com/specs/jcr/2.0/3_Repository_Model.html#3.13.10%20FullVersioning%20Diagram)包含一个很好的图表来显示这种结构。

请注意，“ `nt:versionedChild`”节点并不*指向*子版本历史记录中的特定*版本*，这意味着您必须确定在父签入时存在子版本的哪个版本。毕竟，在这种可版本化的情况下child，父子版本历史是独立的，节点是独立签入的。（原因也可能源于应用程序可以在单个会话中同时更改父节点和子节点，然后先签入父节点，然后签入子节点，或者签入子节点，然后签入父节点.)

一种方法是查看子版本历史记录中每个版本的创建日期。这并不理想，因为它只会告诉您在创建父版本时存在哪个子版本。这可能是模棱两可的，因为时间戳的比较取决于父母是在版本控制的孩子之前还是之后签入的。在您的应用程序中，您可能有一些约定可以帮助您解决这些歧义。

也许更好的选择是使用***版本标签***并将相同的标签应用于父版本和子版本。（这可能在签入节点之后而不是稍后更容易做到。）然后，一旦您有了父的特定版本，获取它的标签并使用它在子版本中找到对应的子版本历史（使用`VersionHistory.getVersionByLabel(String)`）。

# php - PHP：数组键的顺序没有正确出现

> ID：12973481
> 
> 赞同：0
> 
> 时间：2012-10-19T11:39:15.763
> 
> 标签：php, arrays, key

我有一个数组（大），有 120 行，每行有 5 列。最后，我尝试再添加三行，但只添加最后三列。首先，我将 dummy char * 添加到要附加的行 (3) 中。在一个循环中，这三行（每三列）被添加。问题是 - 在主行末尾添加的第一行，键的顺序丢失了！！输出示例（仅显示最后一部分）：

```
[116] => Array ( [0] => A3 [1] => B4 [2] => C2 [3] => D4 [4] => * ) 
[117] => Array ( [0] => A3 [1] => B5 [2] => C2 [3] => D2 [4] => * ) 
[118] => Array ( [0] => A3 [1] => B5 [2] => C2 [3] => D3 [4] => * ) 
[119] => Array ( [0] => A3 [1] => B5 [2] => C2 [3] => D4 [4] => * ) 
[120] => Array ( **[4]** => * [0] => * [1] => * [2] => * [3] => * ) **<==== Observer this row**
[121] => Array ( [0] => * [1] => * [2] => * [3] => * [4] => * ) 
[122] => Array ( [0] => * [1] => * [2] => * [3] => * [4] => * ) 
```

如果您看到第 120 行，则 [4] 出现在开头，而不是 [0]！

用于填充虚拟 * 的代码：

```
$i = 0;
for ($i=0;$i<=count($unMatchedRows)-1;$i++){
    for ($jCols = 0; $jCols<=($pNoOfCols+$pStartCol-1); $jCols++){
        $pMainArray[$vRowsOfMainArray+$i][$jCols] = '*';
    }
} 
```

用于更新最后​​三行的代码：

```
$i=0;
$ColToStart = $pStartCol-1;
foreach ($unMatchedRows as $rowNumberOfCompArray) {
    for ($jCols = 0; $jCols<=$pNoOfCols; $jCols++){
        echo "<br /> Value of Colstart: ".($ColToStart+$jCols);
        $pMainArray[$vRowsOfMainArray+$i][$ColToStart+$jCols] =       $pCompArray[$rowNumberOfCompArray][$jCols];

    }
    $i++;
}
$pStartCol = 3 and $pNoOfCols = 2; 
```

行和列值的回声是否显示完美！即使在检索时，我也可以获得正确的值......就像 [0] 和 [4] 我得到了正确的值。

**问题**是需要在视觉环境中反馈上述数组并且它没有正确显示。

有什么帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T11:49:41.767

我不确定您的问题，但键将按照它们附加到数组的顺序出现。

您可以使用`ksort()`基于键对数组进行排序。

# android - 添加 TextView 时出现 CalledFromWrongThreadException

> ID：12973483
> 
> 赞同：0
> 
> 时间：2012-10-19T11:39:23.757
> 
> 标签：android, multithreading, handler

我已经实现了一个自定义相机，我希望它在一段时间后进入待机状态。待机由停止预览、相机释放和告诉用户点击以退出待机的视图组成。因为我在新线程中设置了文本，所以我得到了 CalledFromWrongThreadException，但我不知道解决方案可能是什么。我在周围找到了其他帖子，但没有一个真正有效。

代码：

```
 private void initCamera()
        {//more code

                threadModifiedText = (TextView) findViewById(R.id.textView1);
                Thread standbyThread = new Thread()
                {
                    @Override
                    public void run()
                    {
                        try
                        {

                            while (timeCounter > 0)
                            {
                                if (!activeThread)
                                {
                                    sleep(100);
                                    if (timeCounter % 10 == 0)
                                    {
                                        threadHandler.sendEmptyMessage((int) timeCounter / 10);
                                    }
                                    timeCounter--;
                                }
                            }
                        }
                        catch (InterruptedException e)
                        {
                            // TODO Auto-generated catch block
                            e.printStackTrace();
                        }

                        mCamera.stopPreview();
                        mCamera.release();
                        TextView standbytext = new TextView(SlicesActivity.this);
                        standbytext.setText("Tap to exit standby mode");
                        FrameLayout preview = (FrameLayout) findViewById(id.FrameLayout_camera_preview);
                        preview.addView(standbytext);

                    }
                };
                standbyThread.start();

//more code} 
```

和

```
 @Override
    public void onUserInteraction()
    {
        Log.d("~~~~~~~~~", "apasat");
        activeThread = true;
            timerCounter = 300;

    }

    private Handler threadHandler = new Handler()
    {
        public void handleMessage(android.os.Message msg)
        {
            // whenever the Thread notifies this handler we have
            // only this behavior
            threadModifiedText.setText("\ncounter is " + Integer.toString(msg.what));
        }
    }; 
```

请各位大侠给点建议。10倍

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T11:42:38.510

尝试使用

```
 runOnUiThread(new Runnable() {
        @Override
        public void run() {
            // TODO: update your UI here
        }
    }); 
```

在您的线程中更新 UI

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-19T11:43:31.110

除了 UI 线程，您不能在任何线程内设置文本值。完成您的后台线程操作并在您的操作结束后在 UI 线程中设置文本值。

# telerik - Telerik RadChart 不断加载

> ID：12973488
> 
> 赞同：0
> 
> 时间：2012-10-19T11:39:52.673
> 
> 标签：telerik, radchart

我有一个问题，我的 RadChart 在本地完美加载，但在我部署后它只是继续加载但不运行。我没有进入实际的图表屏幕。

我在整个过程之后放了一个消息框，这个消息框出现了，所以我确定到了代码的末尾。我只是不知道为什么屏幕没有完成加载。

有任何想法吗？

代码：

```
protected void btnSearch_OnClick(object sender, ImageClickEventArgs e) {

            try
            {

                RadChartPOByFactory.Chart.Series.RemoveSeries();

                RadChartPOByFactory.ClientSettings.ScrollMode = Telerik.Web.UI.ChartClientScrollMode.Both;

                RadChartPOByFactory.DataManager.ValuesXColumn = "FactoryID";
                RadChartPOByFactory.DataManager.ValuesYColumns = new String[] { "Value" };
                RadChartPOByFactory.DataGroupColumn = "Year";
                RadChartPOByFactory.PlotArea.XAxis.DataLabelsColumn = "Factory";
                RadChartPOByFactory.Legend.Appearance.GroupNameFormat = "#VALUE";

                RadChartPOByFactory.PlotArea.YAxis.Appearance.CustomFormat = "$#,##0,,.00M;;K";

                var poReportRawData = from r in report.GetPOHeader_POByFactory_Report(ddlYearFrom.SelectedValue, ddlYearTo.SelectedValue) 
                                      select new { 
                                          Year = r.Year.ToString(), 
                                          Factory = r.Factory, 
                                          Value = r.AmountWithDiscount.Value };

                var factoryRawIDs = (from f in poReportRawData select f.Factory).Distinct();
                List<ListItem> factoryIDs = new List<ListItem>();
                int i = 1;
                foreach (string s in factoryRawIDs.ToList())
                {
                    factoryIDs.Add(new ListItem(s, i.ToString()));
                    i++;
                }

                var poReportData = from po in poReportRawData.ToList() 
                                   select new { 
                                       Year = po.Year, 
                                       FactoryID = factoryIDs.Where(f => f.Text == po.Factory).FirstOrDefault().Value, 
                                       Value = po.Value, 
                                       Factory = po.Factory };

                RadChartPOByFactory.DataSource = poReportData.ToList();
                RadChartPOByFactory.DataBind();

                foreach (ChartSeries cs in RadChartPOByFactory.Series)
                {   
                    cs.DefaultLabelValue = "$#Y{#,##0,}K (#%{#0.###%})";

                    cs.Appearance.LabelAppearance.LabelLocation = StyleSeriesItemLabel.ItemLabelLocation.Inside;
                    cs.Appearance.LabelAppearance.Position.AlignedPosition = AlignedPositions.Center;
                    cs.Appearance.LabelAppearance.RotationAngle = 0;

                }

                RadChartPOByFactory.Visible = true;
            }
            catch(ExceptionHandler ex)
            {
                WriteJSHandledException(ex);
            }

        } 
```

并且此代码也运行：

```
protected void RadChartPOByFactory_OnBeforeLayout(object sender, System.EventArgs e) {

            foreach (Telerik.Charting.LabelItem RadChartLegendLabelItem in RadChartPOByFactory.Legend.Items.OrderBy(a=>a.Name)) {
                //Remove the top-most item (which then decrements the item count of the legend) 
                RadChartPOByFactory.Legend.Items.RemoveAt(0);
                //Insert the new (reversed) legend item at the end of the list 
                RadChartPOByFactory.Legend.Items.Insert(RadChartPOByFactory.Legend.Items.Count, RadChartLegendLabelItem);
            }

            foreach (Telerik.Charting.ChartSeries RadChartSerie in RadChartPOByFactory.Chart.Series.OrderBy(a => a.Name)) {

                RadChartSerie.Items.OrderBy(a => a.Parent.Name);

                //Remove the top-most item (which then decrements the item count of the legend) 
                RadChartPOByFactory.Chart.Series.RemoveAt(0);
                //Insert the new (reversed) legend item at the end of the list 
                RadChartPOByFactory.Chart.Series.Insert(RadChartPOByFactory.Chart.Series.Count, RadChartSerie);

            }

            foreach (Telerik.Charting.ChartSeries RadChartSerie in RadChartPOByFactory.Chart.Series.OrderBy(a => a.Name)) {

                foreach (ChartSeriesItem RadChartSerieItem in RadChartSerie.Items.OrderBy(b => b.Name)) {
                    //Remove the top-most item (which then decrements the item count of the legend) 
                    RadChartSerie.Items.RemoveAt(0);
                    //Insert the new (reversed) legend item at the end of the list 

                    string tmpTextBlock = RadChartSerieItem.Label.TextBlock.Text;
                    string[] toMillion = tmpTextBlock.Split(' ');

                    string tmpValue = toMillion[0].Substring(1, toMillion[0].Length - 2);
                    decimal tmpInt = decimal.Parse(tmpValue);

                    if (tmpInt >= 1000) {
                        RadChartSerieItem.Label.TextBlock.Text = tmpInt.ToString("$#,##0,.00M") + " " + toMillion[1];
                    }

                    RadChartSerie.Items.Insert(RadChartSerie.Items.Count, RadChartSerieItem);
                }

            }             
        } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T11:45:26.770

如果您看不到`chart image`页面中显示的内容，`check to see`如果您在设计时已`registered the correct version of the HTTP Handler`在您的`Web.Config`或`HTTP Handler`通过智能标签添加。

需要`manually register the RadControls "HttpHandlers"`或使用这些`IIS administration`功能。这`manual registration`是通过以下方式完成的：`(In web.config file)`

```
<system.web>
…
<httpHandlers>
…  
    <add path="Telerik.Web.UI.DialogHandler.aspx" verb="*" type="Telerik.Web.UI.DialogHandler, Telerik.Web.UI" validate="false" />
 …
</httpHandlers>
</system.web>
<system.webServer>
<handlers>
 …
</handlers>
</system.webServer> 
```

有关手动注册或 IIS7 功能的更多详细信息，`HTTP Handlers`请单击[此处](http://www.telerik.com/help/aspnet-ajax/introduction-registering-the-httphandlers-on-windows-vista-iis-7-integrated-mode.html)

# jquery - 在数据属性而不是jQuery中的类上过滤元素

> ID：12973491
> 
> 赞同：1
> 
> 时间：2012-10-19T11:39:56.867
> 
> 标签：jquery

我正在研究一种根据类过滤元素的简单方法。用户选中一个复选框，jQuery 做的很好，并根据类关闭任何元素。关闭元素的行以及元素的外观是：

```
$('#ItemList div:not(.' + Filter + ')').hide();
<div class="1 2 3">asdf</div> 
```

但是，我希望能够使用 data-xxxx 属性而不是 class 属性来执行此操作，但是实际上以这种方式选择元素时遇到了问题。我所拥有的如下：

```
$("#ItemList div:not([data-filter'" + Filter + "'])").hide();
<div data-filter="1 2 3">asdf</div> 
```

那么，如何使用 data-filter 属性而不是类来选择元素呢？我在这里找到的方法对我不起作用！非常感谢。

**更新**

好的，所以 James Allardice 的回复起到了作用。但是引起了另一个问题，我可能应该在原帖中说。

每个 data-xxxx 属性可以有多个值，我需要这个过滤器才能工作，这样如果任何一个值出现，它就不会隐藏元素。

```
$('#Filters input').change(function()
{
    $('#ItemList div').show();
    $('input').each(function()
    {
        var Checked;
        if(Checked = $(this).attr('checked'))
        {
            var Filter = $(this).attr('data-filter');
            $("#ItemList div:not([data-filter='" + Filter + "'])").hide();
        };
});

<div data-filter="1">1</div>
<div data-filter="1 3">1 3</div> 
```

因此，例如，如果选中具有以下属性的复选框，它将显示两个 div：

```
data-filter="1" 
```

但是如果属性是这样的，它只会显示第二个：

```
data-filter="3" 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-19T11:41:31.663

你很亲密。你只是错过了这个`=`角色：

```
$("#ItemList div:not([data-filter='" + Filter + "'])").hide();
//                               ^ You missed this 
```

这是一个[工作示例](http://jsfiddle.net/jamesallardice/Vy9du/)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-19T12:17:06.590

您可以像这样使用 jQuery 过滤器功能：

```
$("#ItemList div").filter(function()
    {
        var attr = $(this).attr('data-filter');
        var filterArr = attr.split(" ");
        return $.inArray(Filter, valArr) == -1;
    }
).hide(); 
```

我没有对此进行测试，但它应该可以工作。[您可以从此链接](http://api.jquery.com/filter/)中找到 inArray 文档，并从此[链接](http://api.jquery.com/jQuery.inArray/)中找到过滤器函数的文档

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-19T11:47:44.453

jQuery('[data-name=something]') 或者不是，jQuery('[data-name!=something]')

查看此处可用的属性选择器：http: [//api.jquery.com/category/selectors/](http://api.jquery.com/category/selectors/)

# java - MVC 架构 - 在哪里放置逻辑？

> ID：12973497
> 
> 赞同：-3
> 
> 时间：2012-10-19T11:40:22.283
> 
> 标签：java, swing, model-view-controller

我正在创建一个用于显示自动迷宫求解器的模拟，其中几乎没有用户输入。

使用 MVC 架构并用 Java 实现。View 是通过 Controller 从 Model 接收和提取数据。

就目前而言，我有两个选项可用于更新模型逻辑并依次更新视图：

*   控制器实现 Runnable
*   控制器创建一个线程：

    ```
    Thread runControl = new Thread(this);
    runControl.start(); 
    ```

*   然后线程可以在Controller中执行run()，更新Model逻辑并将新数据传递给View

然而，这不是我的首选方法，因为我希望模型运行它自己的逻辑。我会比较喜欢：

*   模型实现 Runnable
*   模型包含 run() 中的所有逻辑
*   控制器为模型创建一个线程并执行模型

我在这一点上迷路了。然后模型可以相应地更新自己的逻辑，但是当模型线程运行时，如何通知控制器模型数据的变化，然后检索该数据（仍在被操作/更新），然后通知看法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T11:48:08.877

控制器和视图紧密地联系在一起。前者是服务器端，后者是客户端。

我认为 MVC 需要一个如下所示的更新：

```
View->Controller->Service->Persistence 
```

*这些*是层。模型在层之间运行。

服务满足用例。它们是放置业务逻辑的合适位置。当然，Model 对象应该知道如何管理自己的状态，但是编组 Model 和 Persistence 对象来完成用例属于 Service。您需要模型之外的东西，因为模型可能不知道使用它们的所有上下文。

控制器接受、验证和绑定请求；它确定满足请求所需的服务；它序列化响应并确定下一个视图。

服务了解用例和工作单元。

# android - 应用程序进程被杀死后的 ANR

> ID：12973499
> 
> 赞同：0
> 
> 时间：2012-10-19T11:40:29.583
> 
> 标签：android

在我的应用程序进程被终止并恢复活动堆栈后，我得到了 ANR，但在日志中我可以看到我的 Activity 启动需要 1.5 秒？什么会导致这种行为？如何解决这个问题？

# sql - 结合列和行的Sql视图

> ID：12973500
> 
> 赞同：0
> 
> 时间：2012-10-19T11:40:29.750
> 
> 标签：sql, sql-server-2005

我有两个由程序填充的表。一个包含一个 id、一个名称和 15 个属性名称。另一个引用表 1 中的 id 和属性编号，并包含不同项目的每个属性的值。
所以表1：

```
tab1_id | item_type | property_name_1| ... |property_name_15 
```

表2：

```
item_id | tab1_id | property_nr | value 
```

我想创建一个视图，其中包含指定 item_type 的属性作为列：

看法：

```
item_id |property_name_1 | ... | property_name_X 
...     |  value_1       | ... | value_x 
```

现在还有一个问题：每个 item_type 在表 1 中可以有多个条目，因为每个 item_type 可以有超过 15 个属性。
当然，每个 item_type 也可以有少于 15 个属性。

根据项目类型，必须找出使用了哪些属性编号，从表 1 中提取它们的名称，然后用表 2 中的该属性编号的值填充视图。

我知道这可以通过编写外部工具轻松完成，但首选方法是在 sql 中的服务器上执行此操作。

所以有两个问题：是否可以在 mssql 中创建类似的视图或存储过程？

如果是的话，你能指出我这样做的方法吗？

# php - 如何在wordpress的灯箱中打开音频和视频文件

> ID：12973501
> 
> 赞同：-1
> 
> 时间：2012-10-19T11:40:35.183
> 
> 标签：php, wordpress, audio, video, plugins

我想通过wordpress中的插件打开音频和视频文件。我目前在wordpress中使用插件wp video lightbox插件。

我有 iframe 代码，如..

```
<iframe width="325" height="64" src="http://www.ewihosting.com/evp/?id=Mi0wMSBJbnRlcm5ldCBSaWNoZXMgTWFkZSBFYXN5Lm1wMw%3D%3D&profile=default&mode=iframe" frameborder="0" style="background:#fff;" allowfullscreen></iframe> 
```

我使用类似的逻辑..

```
<li>
<a href="http://www.ewihosting.com/evp/?id=MS0wMSBJbnRlcm5ldCBSaWNoZXMgTWFkZSBFYXN5Lm1wMw%3D%3D&profile=default&mode=iframe" rel="wp-video-lightbox[iframes]"><span class="audio_upload_icon"></span><h3>Audio</h3><h4>Lesson #1</h4></a>
</li> 
```

我点击图像然后打开灯箱，但我的音频文件不工作，但可能视频文件工作正常。

所以请告诉我哪个插件对我非常有用或任何代码修改。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-20T12:57:17.623

您可以使用[Fancbox](http://fancybox.net/) Jquery 插件。

它非常简单和用法。更多[请点击这里](http://fancybox.net/data/iframe.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T16:33:48.380

我假设您正在自行托管您的 Wordpress，或者至少您可以访问托管服务中的 ftp 文件。如果是这样，那么：您可能希望在您的服务器中保存一个 myvideo.html 文件，然后通过调用它

```
<li>
<a href="myvideo.html" rel="wp-video-lightbox[iframes]">
<span class="audio_upload_icon"></span>
<h3>Audio</h3>
<h4>Lesson #1</h4>
</a>
</li> 
```

您可以包含本地 html 文件的完整路径，这样您就可以创建一个文件夹，您可以在其中保存所有需要的 iframe，代码如下所示：

```
<li>
<a href="myvideo.html" rel="wp-video-lightbox[iframes]">
<span class="audio_upload_icon"></span>
<h3>Audio</h3>
<h4>Lesson #1</h4>
</a>
</li> 
```

Lightbox、Shadowbox 和其他类似的工具/插件现在可以工作了。但是，如果您不是自行托管您的 wordpress，也无法访问您的虚拟主机上的文件，您将需要一个不同的解决方案。请让我们知道是什么情况，以便提供适当的支持。

祝你好运！

# c++ - 在 C++ 中提供 jQuery 样式的可封装函数

> ID：12973502
> 
> 赞同：1
> 
> 时间：2012-10-19T11:40:37.977
> 
> 标签：c++, oop, function

在例如 jQuery 中，您可以封装函数以在一行中对一个对象执行许多操作。

```
$('div').parent().find('a').is('.class').css('color', 'red'); 
```

我不知道这在内部是如何工作的*。*如何在 C++ 中编写具有类似行为的类？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-19T11:41:52.823

这称为方法链接，您可以在 C++ 中实现相同的效果，具体取决于您的返回类型。

```
struct A
{
   A& foo()
   {
     return *this;
   }
   A& goo()
   {
     return *this;
   }
};

A a;
a.foo().goo().foo(); 
```

这只是一个简单的例子。

# sharepoint - 如何指定列表中网站栏的宽度？

> ID：12973505
> 
> 赞同：1
> 
> 时间：2012-10-19T11:40:44.950
> 
> 标签：sharepoint, sharepoint-2010, sharepoint-2007

我在 SharePoint 中开发了一个列表。在其中输入新项目（例如名称）时，如果我继续输入，它会分散在一条线上，从而使 cloumn 的宽度分散在页面上。我想限制站点列的宽度，以便列的值分布在多行而不是分布在一个上。我该怎么做这个设置？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T11:44:11.737

您必须在块中使用 min-width (CSS)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-19T18:30:23.890

这不是您可以在 SharePoint 中配置的设置。您将需要使用 css 和可能的 javascript 编写一些自定义代码来设置列的宽度。您可以在[SharePoint Designer](http://sharepoint.microsoft.com/en-us/product/related-technologies/pages/sharepoint-designer.aspx)中进行这样的更改。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-22T14:07:19.177

您必须为此创建自定义 XSLT。在那里，您循环了所有列，并且需要指定`overflow:auto`, `hidden`,.. CSS 属性。因此它会根据您的字段内部名称自动生效。

因此，无论您拥有该领域，它都会自动受到影响。如果它针对一个视图，您可以使用 JavaScript 来实现这一点，但这不是正确的方法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-24T11:48:44.927

您输入的数据可以以多种方式显示。今天采用表格格式，明天采用下拉列表等。您应该区分：

*   限制可以在网站栏中输入的数据量（可以在设计列表时单独在 SharePoint 中完成）

*   今天限制表格单元格中单词的换行或明天修剪下拉列表中的值（如果您在浏览器应用程序中显示列表值，可以使用 HTML/CSS“nowrap”完成，或者如果您在WinForms 应用程序）

# css - 页面特定的 Sass 文件和复制

> ID：12973508
> 
> 赞同：3
> 
> 时间：2012-10-19T11:40:58.390
> 
> 标签：css, ruby-on-rails, ruby-on-rails-3, sass, sprockets

我真的很难在 Rails 3.1 项目中构建 Sass 文件以避免大量重复......

我有以下结构，将 application.css.scss 作为我的主要布局的一部分导入：

```
application.css.scss
  - [*= require] main.css.scss
      - [@import] 'variables';
      - [@import]'bootstrap_overrides';
      - [@import]'bootstrap';
      - [@import]'base_elements';
      - [@import]'superstructure';
      - [@import]'modules'; 
```

到现在为止还挺好。所有这些文件都由 sprocket 组合成一个文档。但是，我想进一步模块化我的 Sass，使用特定于页面的文件或跨站点区域共享的文件。

所以在我的 GalleryResource#show 页面上，我需要使用额外的 Sass 文件：

```
resource.scss
gallery_resource.scss
badges.scss 
```

也许是来自 lib 的 css 文件：

```
gallery_lib.scss 
```

这些文件需要引用一些已经在 application.css 中导入的文件。他们需要使用 variables.css.scss 中定义的变量和 bootstrap 中定义的 mixins。所以我被迫在每个使用它们的文件中重新导入这些文件，导致大量重复。我可以为每个页面编写一个清单文件，但这是一个维护噩梦，仍然会导致重复和两个 css 文件；application.css 和 page_specific.css。

那么解决方案是什么？我是否需要放弃 application.css 并将其导入移动到每个特定于页面的文件中？因此，使用上面的示例，我最终会得到一个如下所示的清单文件：

```
gallery_resource_manifest.css.scss
      - [*= require] gallery_lib.css
      - [*= require] gallery_resource.css.scss
         - [@import] 'variables';
         - [@import]'bootstrap_overrides';
         - [@import]'bootstrap';
         - [@import]'base_elements';
         - [@import]'superstructure';
         - [@import]'modules';
         - [@import]'resource';
         - [@import]'gallery_resource';
         - [@import]'gallery';
         - [@import]'badges'; 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-19T23:14:51.277

我也尝试做你在组织风格时提到的同样的事情。Rails 通过不断为您生成基于控制器的样式表，几乎将您推向了这个方向。最后，我选择将所有内容添加到`application.sass`. 这种方法的主要优点是您只在页面加载时发出一个请求，并且最终不必重新导入用户在最后一页上请求的代码。

我个人的看法是，如果你很好地抽象了你的 CSS，你只需要使用一个样式表，因为你没有很多视图特定的代码可以首先引入到样式表中。无论哪种方式，替代方案（根据页面需求随机加载模块，而您可能在前一页上已经做了同样的事情）听起来无论如何都不能解决这个问题。另外，您正在对全新文件提出更多请求。

CSS 可能有点难以组织。这是我通常如何组织样式以及样式表目录的示例。此方法适用于单个命名空间（应用程序），或者如果需要，它可以分解为适用于多个命名空间（即管理员、应用程序）。

`application.sass`

```
// vendor ----------------------------------------------------------------------

// compass

@import "compass/reset"
@import "compass/css3/box-shadow"
@import "compass/css3/border-radius"
@import "compass/css3/box-sizing"
@import "compass/css3/opacity"
@import "compass/layout/sticky-footer"
@import "compass/utilities"

// grid

@import "susy"

// application -----------------------------------------------------------------

// base

// for mixins, variables and helpers to aid in building
// the application. no styling of actual elements should
// go in base.

@import "base/colors"
@import "base/fonts"
@import "base/mixins"
@import "base/grid"

// layout

// generic site styles. this includes site chrome styles
// such as the header, footer, flash messages, nav, as well
// as common patterns used around the site like forms, type,
// links, etc. the loose idea is that you could take these
// styles and create a similar "layout" but it wouldn't
// include contextual patterns like books, originals, etc.

@import "layout/buttons"
@import "layout/content"
@import "layout/header"
@import "layout/flash"
@import "layout/forms"
@import "layout/footer"
@import "layout/links"
@import "layout/tooltips"
@import "layout/typography"

// modules

// elements used on multiple pages that are loosely tied
// to our domain and data structure. examples are dependent
// on the needs of your site. as a general guideline, all 
// modules should be used on multiple pages. elements used 
// on a single page should be included in views.

@import "modules/articles"
@import "modules/buttons"
@import "modules/forms"
@import "modules/links"
@import "modules/pagination"
@import "modules/users"
@import "modules/stats"
@import "modules/some_other_domain_specific_styling_unique_to_your_site"

// views

// elements used on a single page. these styles are
// often needed to help put finishing touches on a
// page where modules didn't quite line up perfectly,
// or where a page has completely unique elements.
// these styles could often be abstracted to modules
// but lack a reason to do so. keeping them here helps
// explain their singular usage.

@import "views/welcome/index"
@import "views/settings/all"
@import "views/articles/show"
@import "views/users/show" 
```

以这种方式组织您的样式有助于为每个文件创建一个单一的职责（看起来您也在尝试这样做）。我发现这让你的 CSS 更易于维护。此外，如果您需要添加媒体查询或使用给定模块定位特定浏览器，它为您提供了一个与上下文相关的地方，同时仍保持您的代码清晰和独立。

请注意，如果您只有一个命名空间，则将使用上面的示例。如果您有管理部分（或其他），您可以将所有这些目录/文件粘贴在“应用程序”目录中，并为“管理”创建类似的结构。这将为您留下以下结构`app/stylesheets`。

```
- admin
- application
- admin.sass
- application.sass 
```

您甚至可以创建一个结构来在两者之间共享项目，但这可能是必要的，也可能不是必要的。关键是你有很大的灵活性和组织性来处理你可能需要做的任何事情。如果您愿意，同样的结构也可以用于 JS。这避免了重新加载模块和发出新请求的问题。

FWIW，我试图找到一种解决方案，只在每页中引入我需要的内容（你的问题），但最后我最终只是在整体上传递了更多位，同时增加了我的请求数量。YMMV。

希望这有助于您上路！

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-19T23:35:43.667

我通过从 rspec 获取提示并创建一个`_sass_helper.sass`包含我所有非直接样式导入（变量、mixins、占位符）的部分来解决这个问题，然后将其包含在每个文件的顶部。非代码位很重要，因为如果`_sass_helper.sass`包含任何样式，它们将被写入每个文件。

这有效地允许我为我的每个文件获得相同的“Sass 环境”，而无需任何代码重复。

我的树是这样组织的：

```
includes/
  _variables.sass
  _mixins.sass
  _extends.sass
posts/
  _post_partial_1.sass
  _post_partial_2.sass
application.sass
posts.sass
_sass_helper.sass 
```

然后，像 posts.sass 这样的东西看起来像：

```
@import 'sass_helper'
@import 'posts/post_partial_1'
@import 'posts/post_partial_2'

.some.globally.shared.post
  styles: here 
```

它工作得很好。post partials 不需要 sass 助手，所以我最终每个控制器都有一个主文件，各个功能的partials，并且到处都是相同的环境。

# jquery - 如何一一关闭两个打开的 jquery.reveal.js 模态框？

> ID：12973509
> 
> 赞同：0
> 
> 时间：2012-10-19T11:41:00.193
> 
> 标签：jquery, jquery-plugins

我有一个链接。如果我单击此链接，将打开第一个模式框。这个盒子里有一个链接。如果我单击第二个链接，新框将打开。问题是：如果我单击第二个框的关闭按钮，它将关闭。但后来我无法关闭第一个。我能做些什么？请帮我！！！

```
<div id="first_box" class="reveal-modal">
            <div class="inner_content">
                <h1>Title1</h1>
                <p>some content</p>
                <a href="link to the seccond box">
            </div>
            <a class="close-reveal-modal"></a>
        </div>

        <div id="seccond_box" class="reveal-modal">
            <div class="inner_content">
                <h1>Title2</h1>
                <p>Some caontent.</p>
            </div>
            <a class="close-reveal-modal"></a>
        </div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T12:26:30.603

`reveal:close`您可以使用此代码，在关闭第二个模态时调用关闭第一个模态的触发器

```
<div id="first_box" class="reveal-modal">
    <div class="inner_content">
        <h1>Title1</h1>
        <p>some content</p>
        <a href="#" data-reveal-id="seccond_box">Open the second modal</a>
    </div>
    <a class="close-reveal-modal">X</a>
</div>
<div id="seccond_box" class="reveal-modal">
    <div class="inner_content">
        <h1>Title2</h1>
        <p>Some content.</p>
    </div>
    <a class="close-reveal-modal" onclick="closeOne();">X</a>
</div>

<a href="#" data-reveal-id="first_box">Click to open the first modal</a>

<script type="text/javascript">
function closeOne(){
    $("#first_box").trigger('reveal:close');
}
</script> 
```

您可以使用以下库进行修改以关闭所有。

[https://github.com/rkgarcia/reveal](https://github.com/rkgarcia/reveal)

# arduino - 在 for 循环结束时延迟

> ID：12973513
> 
> 赞同：2
> 
> 时间：2012-10-19T11:41:15.423
> 
> 标签：arduino

我编写了以下代码来一次点亮一排 LED。

```
int ledPins[] = {7,8,9,10,11,12,13};

void setup() {
  for (int i = 0; i < sizeof(ledPins); i++) {
    pinMode(ledPins[i], OUTPUT);
  }
}

void loop() {
  for (int i = 0; i < sizeof(ledPins); i++) {
    digitalWrite(i, HIGH);
    delay(1000);
    digitalWrite(i, LOW);
    delay(1000);
  }
} 
```

以上工作正常。然而，在完成 for 循环后，在它重复之前有很长的延迟（大约 10 秒）。

为什么会有这么长时间的延迟？这是预期的还是我的代码有问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-19T11:51:31.787

该函数`sizeof(array)`返回内存中数组的大小，以字节为单位。并且因为`sizeof(int)`可能不是 1，所以你得到的值比预期的要大。

`sizeof`可用于确定数组中元素的数量，方法是获取整个数组的大小并将其除以单个元素的大小。

所以这一行：

```
for (int i = 0; i < sizeof(ledPins); i++) { 
```

应改写为：

```
for (int i = 0; i < sizeof(ledPins) / sizeof(int); i++) { 
```

见： [http ://en.wikipedia.org/wiki/Sizeof](http://en.wikipedia.org/wiki/Sizeof)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-18T23:23:27.453

在这种情况下，由于数组具有固定大小，因此执行此操作更简单：

```
#define NO_LEDS 7

int ledPins[NO_LEDS] = {7,8,9,10,11,12,13};

void setup() {
  for (int i = 0; i < NO_LEDS; i++) {
    pinMode(ledPins[i], OUTPUT);
  }
} 
```

或者将数组大小的计算移动到一个变量中并使用它。

```
int ledPins[] = {7,8,9,10,11,12,13};
int noLeds;

void setup() {
  noLeds = sizeof(ledPins) / sizeof(int);

  for (int i = 0; i < noLeds; i++) {
    pinMode(ledPins[i], OUTPUT);
  }
} 
```

# wix - WiX 源文件的相对路径

> ID：12973518
> 
> 赞同：31
> 
> 时间：2012-10-19T11:41:36.863
> 
> 标签：wix

我的项目有一个简单的解决方案，效果很好。但我无法掌握如何使源路径相对。有人可以帮助我吗？

```
 <Component Id="Bla.exe" Guid="*">
    <File Id="Bla.exe" Source="D:\Projects\Bla\Bla\bin\Debug\Bla.exe" KeyPath="yes" Checksum="yes"/>
  </Component> 
```

如何使路径相对于 Wix 解决方案？WiX 和所有必要的文件都在同一个解决方案中。

* * *

## 回答 #1

> 赞同：68
> 
> 时间：2012-10-19T11:55:42.637

您可以像这样使用相对路径：

```
 <File Id="Bla.exe" Source="..\bin\Debug\Bla.exe" KeyPath="yes" Checksum="yes"/> 
```

或者

您可以将配置文件添加到项目中以定义公共变量。为此，请在您的项目中添加一个新的“WiX Include”文件，将其命名为*config.wxi*。然后在你的包含文件中，你可以像这样定义一个*SourceDir*变量：

```
<?xml version="1.0" encoding="utf-8"?>
<Include>
  <?define SourceDir = "D:\Projects\Bla\Bla\bin\Debug" ?>
</Include> 
```

现在在您的 .wxs 文件中，您可以在顶部添加对配置文件的引用，例如：

```
<?xml version="1.0" encoding="UTF-8"?>
 <Wix xmlns="http://schemas.microsoft.com/wix/2006/wi">
 <?include "config.wxi"?> 
```

然后只需像这样引用您的*SourceDir*变量：

```
<File Id="Bla.exe" Source="$(var.SourceDir)\Bla.exe" KeyPath="yes" Checksum="yes"/> 
```

此外，您可以使用一些内置的[WiX 项目变量。](http://wixtoolset.org/documentation/manual/v3/votive/votive_project_references.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-20T14:53:07.097

有很多方法可以做到这一点，但我个人喜欢做的是将我的应用程序安装程序项目放在不同的解决方案中。我首先构建应用程序解决方案并使用 postbuild 命令将内容发布到部署文件夹。

在我的安装程序项目中，我设置了 $(var.SourceDir)="..\deploy" 然后 $(var.SourceDir)\foo.exe 作为源路径。

# sql-server-2008 - 在 sql 查询中使用 (INDEX(0))

> ID：12973521
> 
> 赞同：1
> 
> 时间：2012-10-19T11:41:42.350
> 
> 标签：sql-server-2008, indexing

我在 SQL Server 2008 上运行此查询：

```
SELECT * 
FROM Dealers WITH (INDEX(0))
WHERE ID = 'rrsdsd' 
```

但是执行计划显示它使用了表的聚集索引。

![在此处输入图像描述](../Images/b242b4c4dfb294c6671bda33def9bcd2.png)

为什么这样？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T11:45:40.677

你告诉 SQL Server 是不使用任何索引来执行查询。因此，我希望查询计划显示正在使用的聚集索引（因为那是您的数据），但正在执行扫描而不是查找。是这样吗？

根据文档：

如果存在聚集索引，则 INDEX(0) 强制执行聚集索引扫描，INDEX(1) 强制执行聚集索引扫描或查找。

这正是您所看到的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-19T11:48:29.420

文档说明了一切......

> 索引 (index_value [,... n ] ) | INDEX = ( index_value) INDEX() 语法指定查询优化器在处理语句时要使用的一个或多个索引的名称或 ID。另一种 INDEX = 语法指定单个索引值。每个表只能指定一个索引提示。
> 
> **如果存在聚集索引，则 INDEX(0) 强制执行聚集索引扫描**，INDEX(1) 强制执行聚集索引扫描或查找。如果不存在聚集索引，则 INDEX(0) 强制执行表扫描，并且 INDEX(1) 被解释为错误。
> 
> 如果在单个提示列表中使用多个索引，则忽略重复项，其余列出的索引用于检索表的行。索引提示中的索引顺序很重要。多索引提示还强制执行索引 ANDing，并且查询优化器对访问的每个索引应用尽可能多的条件。如果提示索引的集合不包括查询引用的所有列，则在 SQL Server 数据库引擎检索所有索引列之后执行提取以检索剩余列。

# windows - OneNote 如何从 Firefox 访问复制文本的 url，我如何在我的应用程序中使用它

> ID：12973527
> 
> 赞同：2
> 
> 时间：2012-10-19T11:42:02.680
> 
> 标签：windows, winapi

当您将文本从 Firefox（非 Microsoft 产品）中的网页复制到 OneNote 时，它​​会将网页的 url 以及复制的文本添加为​​“粘贴自”，如下例所示：

```
Apache OpenOffice is an open-source office productivity software suite 

Pasted from <http://en.wikipedia.org/wiki/Openoffice> 
```

OneNote 如何从非微软应用程序访问复制文本的 url 信息。如何使用 c++/C# 或其他技术在我的应用程序中以编程方式访问类似信息？是否有一些 api 可以从系统剪贴板访问附加信息，如 url、源应用程序、源文件等？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T12:39:07.387

正如[HTML 剪贴板格式的文档中](http://msdn.microsoft.com/en-us/library/aa767917%28v=VS.85%29.aspx)所解释的那样，Web 浏览器可以提供一个选项`SourceURL`来指定 HTML 的来源。

# java - 如何从静态方法调用非静态方法

> ID：12973529
> 
> 赞同：3
> 
> 时间：2012-10-19T11:42:18.080
> 
> 标签：java, android, static, android-4.0-ice-cream-sandwich, non-static

> **可能重复：**
> [在 Java 中的静态方法中调用非静态方法](https://stackoverflow.com/questions/2042813/calling-non-static-method-in-static-method-in-java)

是否可以从静态方法调用非静态方法？非静态位于另一个类中，它必须是非静态的。

```
 public static void start() {
        CheckConnection checkInternet = new CheckConnection();
        if (checkInternet.isNetworkAvailable()) {
            // Has internet Connection
            } else {
            // No Internet Connection
        }
 } 
```

该代码在 Eclipse (Android 4.0.4) 中没有给出任何错误，但如果我运行它，我的应用程序会冻结并关闭。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-19T11:45:43.000

```
The only way to call a non-static method from a static method is you should have
an instance of the class containing the non-static method. 
```

就像你的问题一样：

```
 CheckConnection checkInternet = new CheckConnection();
    if (checkInternet.isNetworkAvailable()) {
        // Has internet Connection
        } else {
        // No Internet Connection 
```

你有实例，`CheckConnection`所以你可以调用它。

**因此，在您的代码中使用来自静态方法的非静态方法**没有问题，可能是其他一些事情导致应用程序冻结。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-19T11:46:01.403

是的，这是可能的。问题一定出在你的`isNetworkAvailable`方法上。

如果无法从静态方法调用非静态方法，Java 应用程序将无法工作，因为 main 本身就是静态的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-19T11:46:11.403

只需创建包含您要使用的非静态方法的类的对象，然后您就可以调用。

例如 ：

```
public class Test {
  public static void main(String[] args) {
        System.out.println("This is a static method");
        TestClass class1 = new TestClass();
        class1.nonStatic();
     }
 }

class TestClass{
    public void nonStatic(){
        System.out.println("This is a non-static method");
    }
} 
```

在你的问题中

```
public class A{
   public static void start() {
        CheckConnection checkInternet = new CheckConnection();
        if (checkInternet.isNetworkAvailable()) {
            // Has internet Connection
            } else {
            // No Internet Connection
        }
   }
}

public class CheckConnection {
    public boolean isNetworkAvailable()
      {
        //some code
      }
   } 
```

如果这是这种情况，那么它应该可以工作。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-19T11:47:14.487

调试您的 `isNetworkAvailable()`方法。如果可能的话`try catch`，在该方法中有一个块并打印异常的堆栈跟踪。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-19T11:47:18.527

> 是否可以从静态方法调用非静态方法？

是的。

由于您已经创建了 的对象`CheckConnection`，因此您可以使用它的引用调用该方法。否则它将是一个编译时错误。

> 但如果我运行它，我的应用程序会冻结并关闭。

从静态上下文调用非静态方法不是原因。可能原因就在里面`isNetworkAvailable`。

# customization - Alfresco Share 中的动态 Dashlet

> ID：12973535
> 
> 赞同：0
> 
> 时间：2012-10-19T11:42:39.453
> 
> 标签：customization, share, alfresco

作为用户体验要求，我需要创建一个动态仪表板。

根据我的需要，动态 dashlet 将是一个特殊的 dashlet，可以在“几乎所有内容”中加载。我说几乎每一个内容，因为当然这种dashlet当然有它自己的限制。同时，动态dashlet最好有最大化的能力，实际上会显示真实的内容（例如，一个Alfresco页面）。

也许我的问题是模棱两可的，但目的是让用户有机会检查该特殊仪表板内的常见功能，这样用户就不必离开仪表板从而改善用户体验。

以前有没有人有过这样的要求或类似的？那有可能吗？

我想知道一些提示和建议，以便找出正确的方法。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T14:28:31.580

您可以尝试重新使用也可以显示另一个页面的 webview Dashlet。

唯一的问题是，并非 Share 中可见的每个部分都可以通过 url 访问。当然，模板是由 *.ftl 的区域构建的，但这并不意味着您可以“只”查看 *.ftl。

我看到的唯一“动态”的东西是制作一个自定义页面模板，该模板显示一个或几个由 url 动态构建的区域。

例如，指向 share/page/customPage?region1=documentlibrary 应该在该页面中插入文档库模板，因此它可以显示在 webview Dashlet 的 iFrame 中。

实际上文档库是一个不好的例子，因为已经有一个可用于 Liferay 的 portletMode。但希望你能明白我的意思。

# html - 当鼠标悬停在它后面的东西上时 CSS 菜单关闭

> ID：12973541
> 
> 赞同：2
> 
> 时间：2012-10-19T11:43:04.320
> 
> 标签：html, css, menu, hover

我有一个纯 CSS 导航菜单，其下拉部分基于一些自动菜单创建工具并经过大量编辑。

以前下拉菜单是单列，但现在，随着页面数量的增加，它需要有多个列才能保持整洁。

现在的问题是下拉菜单覆盖了我的表单（以前没有），这很好，但是当您将鼠标移到菜单中的链接上时，如果您触摸它后面的任何表单字段，事情就会关闭。

菜单 CSS 可能太长，无法在此处粘贴。当用鼠标触摸它后面的元素时，有没有办法阻止下拉关闭？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T11:48:42.463

将菜单的 z-index 设置为较大的数字。应该保持在其他元素之上。

# jquery - 为什么 JQuery 在 JSF 中不起作用（Primefaces）

> ID：12973552
> 
> 赞同：3
> 
> 时间：2012-10-19T11:43:48.297
> 
> 标签：jquery, jsf, primefaces

```
<?xml version="1.0" encoding="ISO-8859-1" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml"
    xmlns:composite="http://java.sun.com/jsf/composite"
    xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:p="http://primefaces.prime.com.tr/ui">

<h:head>

    <script src="/resources/js/jquery-1.7.2.js" ></script>

    <script >

        $j=jQuery.noConflict();

        function appendText() {
            alert('hi');
            var txt1 = "<p>Text.</p>";
            var txt2 = $j("<p></p>").text("Text.");
            var txt3 = document.createElement("p");
            txt3.innerHTML = "Text.";
            $j("p").append(txt1, txt2, txt3);
        }

        function appendList() {
            var item1 = "<li>List item</li>";
            var item2 = $j("<li></li>").text("List item");
            var item3 = document.createElement("li");
            item3.innerHTML = "List item";
            $j("ol").append(item1, item2, item3);
        }
    </script>
</h:head>

<h:body>

<f:verbatim>
<p>This is a paragraph.</p>
<ol>
<li>List item 1</li>
<li>List item 2</li>
<li>List item 3</li>
</ol>
<button id="btn1" onclick="appendText()">Append text</button>
<button id="btn2" onclick="appendList()">Append list items</button>
</f:verbatim>
<h:form>
<h:commandButton value="jsf cmd btn APPEND TEXT" onclick="appendText()" id="btn3"/>

</h:form>
</h:body>

</html> 
```

这是一个简单的 JSF 页面，脚本中有 JQuery 代码。

当我运行时，页面正在正确加载。但是，它没有调用 JQuery 脚本。

我不知道为什么......任何人都可以提出做错了什么吗？

谢谢你的建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T11:54:51.073

您应该删除包含 jQuery 的脚本标记。

Primefaces 与 jQuery 捆绑在一起，因此如果您在 web.xml 配置文件中正确配置 Primefaces Resources servlet，那么它将自动包含在您的所有网页中。

**编辑：**

此外，您不能使用 $ 字符在 JSF 页面上调用 jQuery，因为这是表达式的保留字符。您必须以长格式调用 jQuery...

```
jQuery('.example').click(); 
```

**编辑2：**

此外，尽量不要同时将 Javascript 与单引号和双引号混合使用。

```
 alert('hi');
        var txt1 = "<p>Text.</p>"; 
```

选择一个引号字符并坚持下去。这是一个很好的做法。

# javascript - IE中的骨干路由+ URL重写

> ID：12973557
> 
> 赞同：1
> 
> 时间：2012-10-19T11:44:02.313
> 
> 标签：javascript, internet-explorer, backbone.js, pushstate, backbone-routing

在处理主干路由时，我遇到了一个特殊的问题。

我们的应用程序托管在 中`example.com/photo/index.php`，我们想在其上挂钩一个事件，该事件在触发时会在地址栏中显示为`example.com/photo/<ID>`. 下面是我们如何设置重写规则和路由器设置：

```
RewriteRule ^/photo/([0-9]+)?$ /photo/index.php/photo/$1 [L] 
```

**Backbone.Router.extend 内部：**

```
routes: {
    'photo/:ID': 'viewPhoto'
}, 
```

**路由器实例化后：**

```
$(function() {
    Backbone.history.start({
        pushState: 'pushState' in window.history,
        root: '/'
    });
}); 
```

这在 Firefox/Chrome/Safari 中效果很好，但在 IE9 中，您必须使用 访问事件挂钩`example.com/photo/#photo/<ID>`，这不是很酷。

所以我们尝试在 ( ) 上切换 pushState 选项`pushState: true`，希望它能有所帮助，但现在`example.com/photo/<ID>`在 IE9 中访问时，页面将被重定向到`example.com/#photo/<ID>`，并实际显示`example.com/index.php`.

我想（？）如果我们将事件挂钩 URL 更改为类似的东西，这可能不是问题`example.com/photo/view/<ID>`，但是我们不能触及那部分。

无论如何，无论有没有 pushState `example.com/photo/<ID>`，`example.com/#photo/<ID>`是否可以`example.com/photo/#<ID>`在 IE9 下按预期工作？

# sockets - 在同一台计算机上打开两个端口。它们之间的 Mbps 速率是多少？

> ID：12973559
> 
> 赞同：0
> 
> 时间：2012-10-19T11:44:05.200
> 
> 标签：sockets, bandwidth

如果我打开两个端口并将它们连接到 localhost。（在同一台计算机上）他们之间的费率是多少？

我的互联网速率为 100 Mbps，网络为 1Gbps。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T12:04:46.330

如果您的数据传输在同一台机器上，那么您的互联网/网络速度无关紧要，因为数据不会通过网卡。

唯一重要的是您的计算机处理速度；）

# python - 如何解析 zcat 输出

> ID：12973560
> 
> 赞同：0
> 
> 时间：2012-10-19T11:44:05.993
> 
> 标签：python, string, parsing, apt

`\n\n`在python中分割字符串的最简单方法是什么？

这是我的原始字符串，来自[http://ftp2.de.debian.org/debian/dists/stable/main/binary-i386/Packages.gz的 zcat 输出](http://ftp2.de.debian.org/debian/dists/stable/main/binary-i386/Packages.gz)

```
Package: zziplib-bin\n
Priority: optional\n
Section: utils\n
Installed-Size: 116\n
Maintainer: LIU Qi <liuqi82@gmail.com>\n
Architecture: i386\n
Source: zziplib (0.13.56-1)\n
Version: 0.13.56-1+b1\n
...\n
\n
Package: zzuf\n
Priority: optional\n
Section: devel\n
Installed-Size: 228\n
Maintainer: Sam Hocevar <sho@debian.org>\n
Architecture: i386\n
Version: 0.13.svn20100215-2\n
...\n
\n 
```

也许你们中的任何人曾经这样做过

理想情况下，这应该是这样的：

```
{
"zziplib-bin": {"Version": "0.13.56-1+b1"},
"zzuf": {"Version": "0.13.svn20100215-2"},
...
} 
```

- 蒂莫

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T11:45:59.053

> 在python中用\n\n分割字符串的最简单方法是什么？

采用`.split`

```
>>> "a\n\nb\n\n\nc".split("\n\n")
['a', 'b', '\nc'] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-19T21:22:37.600

下面的脚本将直接读取 Packages.gz 文件并使用 python 的 gzip 模块对其进行解压缩，这样可以节省您必须使用 zcat 的额外步骤。然后通过`'\n\n'`它拆分每个包详细信息并使用正则表达式提取包名称和版本。我为存储包及其版本信息的数据结构提供了两种实现。第二个遵循您问题中提到的结构，第一个是一个更扁平的结构，它只是将每个包名称映射到它的版本。

```
import gzip, re
packages = gzip.open('Packages.gz', 'rb').read()
p = packages.strip().split('\n\n')
pack = re.compile('^Package: (.*)')
ver = re.compile('\nVersion: (.*)')

info = dict([(pack.findall(i)[0], ver.findall(i)[0]) for i in p])
print info['whois']

info = dict([(pack.findall(i)[0], {'Version': ver.findall(i)[0]}) for i in p])
print info['whois'] 
```

**输出**

```
5.0.10
{'Version': '5.0.10'} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-19T12:13:42.727

我想到了。也许有人可以对此提出更好的建议。

```
a = zcat_output.split('\n\n')
a.pop(len(a)-1)
c = dict()
for x in [x.splitlines() for x in a]:
    pkg = ""
    for y in [y for y in x if y.startswith('Package:') or y.startswith('Version:')]:
        z = y.split(':')
        if z[0] == 'Package':
            pkg = z[1].strip()
        else:
            c[pkg] = {z[0]: z[1].strip()}

print c.get('whois') 
```

输出：

```
{'Version': '5.0.10'} 
```

# php - 带占位符的 php str_replace 模板

> ID：12973565
> 
> 赞同：0
> 
> 时间：2012-10-19T11:44:36.723
> 
> 标签：php, templates, str-replace

我有一个数据数组

```
 $data = array(title=>'some title', date=>1350498600, story=>'Some story'); 
```

我有一个模板

```
 $template = "#title#, <br>#date(d)#<br> #date(m)#<br>#date(Y)#<br> #story#"; 
```

我想要的只是将数据放入模板中，我知道这可以通过 str_replace 完成，但我的问题是日期格式。日期格式来自模板而不是来自数据，在数据中日期存储为 php 日期。昨天我试图问同样的问题，但我认为我的问题并不清楚。任何人请帮助我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T11:54:52.400

我认为它不会轻易与 str_replace 一起使用，所以我将使用 preg_replace

```
$data = array('title'=>'some title', 'date'=>1350498600, 'story'=>'Some story');
$template = "#title#, <br>#date(d)#<br> #date(m)#<br>#date(Y)#<br> #story#"; 
$result = preg_replace_callback('/#(\w+)(?:\\((.*?)\\))?#/', function ($match) use($data) {
    $value = isset($data[$match[1]]) ? $data[$match[1]] : null;

    if (!$value) {
        // undefined variable in template throw exception or something ...
    }

    if (! empty($match[2]) && $match[1] == "date") {
        $value = date($match[2], $value);
    }

    return $value;
}, $template); 
```

而不是使用`date(m)`or`date(Y)`你也可以做一些事情，比如 `date(d-m-Y)`使用这个片段

这样做的缺点是您只能`date`使用此机制格式化变量。但是通过一些调整，您可以扩展此功能。

* * *

**注意：**如果您使用低于 5.3 的 PHP 版本，则不能使用闭包，但可以执行以下操作：

```
function replace_callback_variables($match) {
    global $data; // this is ugly

    // same code as above:

    $value = isset($data[$match[1]]) ? $data[$match[1]] : null;

    if (!$value) {
        // undefined variable in template throw exception or something ...
    }

    if (! empty($match[2]) && $match[1] == "date") {
        $value = date($match[2], $value);
    }
    return $value;
}

$data = array('title'=>'some title', 'date'=>1350498600, 'story'=>'Some story');
$template = "#title#, <br>#date(d)#<br> #date(m)#<br>#date(Y)#<br> #story#";
// pass the function name as string to preg_replace_callback
$result = preg_replace_callback('/#(\w+)(?:\\((.*?)\\))?#/', 'replace_callback_variables', $template); 
```

[您可以在此处](http://fr2.php.net/manual/en/language.types.callable.php)找到有关 PHP 回调的更多信息

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T11:53:19.353

我建议使用这样的模板引擎： [https ://github.com/cybershade/CSCMS/blob/master/core/classes/class.template.php](https://github.com/cybershade/CSCMS/blob/master/core/classes/class.template.php)

然后你的模板变成这样： [https://github.com/cybershade/CSCMS/blob/master/themes/cybershade/site_header.tpl](https://github.com/cybershade/CSCMS/blob/master/themes/cybershade/site_header.tpl) 和 [https://github.com/cybershade/CSCMS/blob/master/modules /forum/views/viewIndex/default.tpl](https://github.com/cybershade/CSCMS/blob/master/modules/forum/views/viewIndex/default.tpl)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-19T12:07:24.583

下载此文件：[http ://www.imleeds.com/template.class.txt](http://www.imleeds.com/template.class.txt)

将扩展名从 .TXT 重命名为 .PHP

这是我多年前创建的东西，我总是让我的 HTML 远离我的 PHP。所以看下面的例子。

```
<?php

include("template.class.php");

//Initialise the template class.
$tmpl = new template;

$name = "Richard";
$person = array("Name" => "Richard", "Domain" => "imleeds.com");

/*
On index.html, you can now use: %var.name|Default if not found% and also, extend further, %var.person.Name|Default%
*/

//Output the HTML.
echo $tmpl->run(file_get_contents("html/index.html"));

?> 
```

# list - Erlang中的重复元素列表

> ID：12973566
> 
> 赞同：1
> 
> 时间：2012-10-19T11:44:48.343
> 
> 标签：list, erlang

我找不到一种方法来使用 Erlang 库函数来创建一个由重复 N 次的元素 E 组成的列表。当然，写一个是小菜一碟，

```
repeat(E, N) ->
    repeat(E, N, []).
repeat(_E, 0, L) ->
    L;
repeat(E, N, L) ->
    repeat(E, N-1, [E|L]). 
```

但我希望这是使用一些列表模块功能或其他东西的单线。有办法吗？

**编辑**：好的，当然有这个，

```
lists:map(fun(_) -> E end, lists:seq(1, N)) 
```

但这会创建一个立即丢弃的额外列表。对我来说似乎效率低下，但也许我不是以惯用的方式思考 Erlang。

**编辑2**：原来这是一个愚蠢的问题。我只是在列表模块中没有看到*重复的功能。*

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-19T11:56:49.223

我认为erlang中有一个功能可以做到：

```
lists:duplicate(N,X).

%% and repeat a string like this:
repeat(X,N) ->
    lists:flatten(lists:duplicate(N,X)). 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-20T16:25:14.580

列表理解也可以：

```
> [E || _ <- lists:seq(1,N)]. 
```

# jquery - JQuery Dialog + .Toggle() 在函数中使用，多次单击时无法按预期工作

> ID：12973569
> 
> 赞同：0
> 
> 时间：2012-10-19T11:44:58.970
> 
> 标签：jquery, function, toggle, show-hide

我是 JQuery UI 对话框的新手，使用 .Toggle() 在对话框内显示信息，但我遇到了意外的行为。

对话框只实例化一次，但在对话框中显示（隐藏/显示）的代码包含在可以多次调用的函数中，具体取决于用户操作。

这是测试html + javascript代码：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<title>Online Booking Form</title>
<link rel="stylesheet" href="http://code.jquery.com/ui/1.9.0/themes/base/jquery-ui.css" />
<script src="http://code.jquery.com/jquery-1.8.2.js"></script>
<script src="http://code.jquery.com/ui/1.9.0/jquery-ui.js"></script> 
<script type="text/javascript">
$(document).ready(function(){

    var dialog = $( "#dialog-modal" ).dialog({
        autoOpen: false,
        draggable: false,
        resizable: false,
        modal: true,
        height: 'auto',
        width: 340,
        maxWidth: 340,
        minWidth: 340,
        close: function() { $('#requal_detailed_info').css("display", "none"); }
    });

    function loadRequalInfo() {
        dialog.dialog('open');

        $('#requal_toggle').click(function() {
            $('#requal_detailed_info').toggle(function() {
            });
        });

        return false;
    }

    $('#test1').click(function() {
        loadRequalInfo();
    });
    $('#test2').click(function() {
        loadRequalInfo();
    });
    $('#test3').click(function() {
        loadRequalInfo();
    });
    $('#test4').click(function() {
        loadRequalInfo();
    });
    $('#test5').click(function() {
        loadRequalInfo();
    });
    $('#test6').click(function() {
        loadRequalInfo();
    });
});
</script>
</head>
<body>
<div class="bodycopy" id="dialog-modal" title="Test Message Box" style="display:none;">
    <div class="requal" id="requal_default_info"><p>MESSAGE SHOWN ON DIALOG DISPLAY</p></div> 
    <div class="requal_open" id="requal_toggle">Please click here</div>
    <div class="requal" id="requal_detailed_info" style="display:none" ><p><hr /></p><p>MORE INFORMATION 1</p><p>MORE INFORMATION 2</p><p>MORE INFORMATION 3</p><p>MORE INFORMATION 4</p></div>
</div>
<div class="requal" id="test1" name="test1">Test 1</div><br />
<div class="requal" id="test2" name="test2">Test 2</div><br />
<div class="requal" id="test3" name="test3">Test 3</div><br />
<div class="requal" id="test4" name="test4">Test 4</div><br />
<div class="requal" id="test5" name="test5">Test 5</div><br />
<div class="requal" id="test6" name="test6">Test 6</div><br />
</body>
</html> 
```

* * *

预期行为：

1) 单击“测试 1”- 对话框打开，显示默认消息。2）点击“请点击这里”，然后显示一个隐藏的显示“更多信息1，.....”。3）默认消息+额外信息一直显示，直到用户单击“X”或“请单击此处”div来隐藏额外信息。

4) 关闭对话框，然后在“测试 1”、“测试 2”等上再次重复上述 3 个步骤...

究竟发生了什么！（复制步骤）

刷新浏览器页面。

1) 单击“测试 1”- 对话框打开，显示默认消息。2）点击“请点击这里”，然后显示一个隐藏的显示“更多信息1，.....”。3）默认消息+额外信息一直显示，直到用户单击“X”关闭对话框或“请单击此处”div隐藏额外信息。

4) 当对话框第一次关闭时。5) 再次单击任何“Test 1”、“Test 2”文本，再次弹出对话框。单击“请单击此处”，额外信息显示出现并停留在屏幕上，直到用户关闭对话框或再次按“请单击此处”。

出现了两种不同的情况，但在页面刷新时出现哪种情况是随机的： a) 当对话框第二次显示时，单击“请单击此处”时从不显示额外信息。当对话框关闭，然后第三次显示时，会显示额外的信息。

b) 对话框第二次显示时，点击“请点击这里”时，额外的信息显示出来，然后立即消失。关闭对话框并再次显示对话框，额外的信息立即显示/隐藏/显示/隐藏等......

* * *

我不知道如何获得预期的行为，用户可以多次单击并显示对话框，并且额外信息的隐藏/显示一直显示，直到对话框关闭或单击“请单击此处” （多次或仅一次），然后关闭对话框。

因此，任何帮助将不胜感激。

提前喝彩。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T11:56:41.407

您**每次都在 loadRequalInfo() 中绑定点击事件**。这意味着您正在添加更多点击事件。

更好地**删除现有并添加**

试试这个

```
 function loadRequalInfo() {
    dialog.dialog('open');
    $('#requal_toggle').unbind('click'); // remove old if anything bound
    $('#requal_toggle').click(function() {
        $('#requal_detailed_info').toggle(function() {
        });
    });

    return false;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T11:55:49.653

这是我了解要求的[jsFiddle示例。](http://jsfiddle.net/pjXqk/3/)

修改后的例子，Murali 指出了核心问题。我更愿意在函数之外绑定事件，而不必每次都重新绑定/删除，因为这是每次引用的同一个 DOMElement。

```
$(document).ready(function() {

    var dialog = $("#dialog-modal").dialog({
        autoOpen: false,
        draggable: false,
        resizable: false,
        modal: true,
        height: 'auto',
        width: 340,
        maxWidth: 340,
        minWidth: 340,
        close: function() {
            $('#requal_detailed_info').toggle()
        }
    });

    $('#requal_toggle').click(function() {
        $('#requal_detailed_info').toggle();
    });

    function loadRequalInfo() {
        dialog.dialog('open');

        return false;
    }

    $('#test1').click(function() {
        loadRequalInfo();
    });
    $('#test2').click(function() {
        loadRequalInfo();
    });
    $('#test3').click(function() {
        loadRequalInfo();
    });
    $('#test4').click(function() {
        loadRequalInfo();
    });
    $('#test5').click(function() {
        loadRequalInfo();
    });
    $('#test6').click(function() {
        loadRequalInfo();
    });
}); 
```

​</p>

# c# - 从动态crm 2011回复时如何将回复电子邮件地址更改为队列的电子邮件地址？

> ID：12973570
> 
> 赞同：0
> 
> 时间：2012-10-19T11:45:04.710
> 
> 标签：c#, dynamics-crm, dynamics-crm-2011, jscript

我想要做的是当我们点击回复按钮时，发件人地址字段将填充电子邮件 ID（默认团队的默认队列的电子邮件 ID）。当前场景由登录用户填充。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T11:58:25.687

您可以创建将在电子邮件表单加载时执行的脚本。检查它是否是“重播”操作（Url 将包含 _InReplyToId 参数）。使用来自 url 的 GUID 从原始电子邮件中查找队列，并将其设置为 From 字段。

编辑：这个[例子](http://m-atif.blogspot.com/2012/04/changing-reply-email-address-to-queues.html)将解决你的问题:)

# android - 将数据从 servlet 发送到 android 应用程序

> ID：12973576
> 
> 赞同：1
> 
> 时间：2012-10-19T11:45:23.700
> 
> 标签：android, servlets, servlet-filters

如何将数据从 servlet 发送到 android 应用程序？假设用户已经从 android 应用程序输入用户名和密码并成功登录到服务器。现在，无需从 android 应用程序查询另一个 HTTP 请求，我希望服务器在登录会话期间将数据发送到 android 应用程序。这可能吗？如果是，如何实现这一目标？等待答复。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T11:55:30.140

您可以尝试使用 Google 可以消息 -

```
https://developer.android.com/guide/google/gcm/index.html 
```

# java - Java Jung 铸造和 getTrees()

> ID：12973577
> 
> 赞同：1
> 
> 时间：2012-10-19T11:45:24.820
> 
> 标签：java, casting, tree, jung

我正在使用 Java Jung 2.01 图形包在图论中进行一些分析。我的算法采用 a `Forest<V, E>`，然后我可以转换为 a `DelegateForest<V,E>`，因此我可以使用该`getTrees()`方法获取森林组件的实例。我的算法是递归的，将在该`getTrees()`方法的每个组件上执行。

所以，问题是返回类型`getTrees()`是一个集合，`Tree<V, E>`因为我的算法需要一个`Forest<V, E>`（并且在某些时候强制转换为`DelegateForest<V, E>`）并且我希望在我的森林的每个树组件上执行我的算法，我得到一个 ClassCastException 说明我不能从 转换`DelegateTree<V, E>`为`DelegateForest<V, E>`。

这是我的一些代码：`ArrayList<Forest<String, Integer>> treeComps = new ArrayList<Forest<String, Integer>>(forest.getTrees());`

第一行只是将森林的树组件存储到一个 ArrayList 中。

```
((DelegateForest)forest).removeVertex(vertexCentralities.first().getKey(), false); 
```

此演员表来自我的算法，该算法删除了树中的一个顶点，并保留了该顶点的子树。这就是为什么我需要演员`DelegateForest<V, E>`

1.  如何从我的森林中提取树木，使树木具有类型`Forest<V,E>`，以便我`DelegateForest<V, E>`以后可以毫无问题地处理？
2.  我需要修改源代码吗？
3.  还有其他想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T12:04:46.793

You cannot cast a `DelegateTree` to a `DelegateForest` or vice versa, you can however cast both of them to a `Forest`, since they both implement that interface.

Since your algorithm takes a `Forest` I would expect that you could call the following method with `delegateForest.getTrees()`. And as the two-argument `removeVertex(..., ...)` method isn't specified on an interface, the easiest solution is probably to be inspired by the corresponding code on the `DelegateForest` and implement it locally.

```
public void doAlgorithm( Collection<Tree<K,V>> trees )
{
    for ( Tree<K,V> f : tree )
    {
        // algorithm here - tree is a Forest, and likely a DelegateTree
        removeVertex( tree );
    }
}

private removeVertex( Forest forest )
{
     // As per implementation in DelegateForest...
} 
```

Cheers,

# java - 在包含插入和更新查询的 Java 批处理中调用 Oracle 过程（语句）

> ID：12973588
> 
> 赞同：1
> 
> 时间：2012-10-19T11:45:58.927
> 
> 标签：java, oracle, stored-procedures, jdbc, callable-statement

我正在开发一个基于 Java 的项目，其中的事情是通过以下方式实现的

*   有一些类**（A、B、C、D....）**将 Hash Map 的键作为整数，将值作为字符串的数组列表。arraylist 中的每个 String 元素都是一个 Oracle SQL 查询（INSERT 或 UPDATE）
*   这些类**（A、B、C、D....）**的方法在 Map 中循环。使用 JDBC 语句 ( ) 将特定键的所有 SQL 查询添加到批处理中`**stmt.addBatch(String)**`。对于每个唯一键，都会创建和执行一个单独的批处理。
*   有许多类**（X，Y，Z ...）**正在填充此 Map 和字符串数组列表以放置不同的 INSERT 和 UPDATE 查询

现在，我需要为一些键添加一个 Oracle 过程调用，因此应该将它们添加到相应键的字符串数组列表中。

我尝试添加以下字符串来调用程序，但似乎没有人适合我。

```
1\. EXEC INSERT_AUTONUMBER_DATA(......)

2\. BEGIN INSERT_AUTONUMBER_DATA(........) END; 
```

我不想修改很多代码，因为它可能会影响其他领域。

我可以在批处理中添加一个可调用语句，但是为此，我需要修改负责准备批处理的所有方法和类，这些方法和类在我的项目中大约 15 个（项目设计不是很好），另外我会必须编写一个标识过程调用的条件，以便我将准备一个可调用语句而不是语句。

有没有其他方法可以做到这一点，而不改变执行批次的类？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T12:09:15.077

我尝试将以下调用语句添加到批处理中。

```
CALL INSERT_AUTONUMBER_DATA(......) 
```

该字符串被添加到具有以下逻辑的语句中，并且可以正常工作。

```
Statement s = conn.createStatement();
s.addBatch("CALL INSERT_AUTONUMBER_DATA(......)");
s.addBatch(.....);
.
.
.

s.executeBatch(); 
```

所以，在这里我可以通过 java.sql.Statement 批量调用一个过程

# apache - .htaccess 中的 FollowSymLinks 和 Indexes 选项有什么作用？

> ID：12973592
> 
> 赞同：43
> 
> 时间：2012-10-19T11:46:15.427
> 
> 标签：apache, .htaccess

我在`.htaccess`文件中有两行，我只想知道他们做了什么。

```
Options +FollowSymLinks
Options +Indexes 
```

* * *

## 回答 #1

> 赞同：50
> 
> 时间：2012-10-19T11:49:19.433

`FollowSymLinks`表示如果目录是符号链接，请按照链接

`Indexes`表示如果没有索引页面，则可以将目录显示为列表。

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2012-10-19T11:49:41.997

`+FollowSymLinks`使 Apache 在您的文件系统中遵循系统符号链接（如果您愿意，可以使用快捷方式）。

`+Indexes`允许访问文件系统中打开的文件夹，例如，如果您忘记将`index.{ext_here}`文件放在目录中，`+Indexes`将允许将该目录的内容列出给用户。

# asp.net - asp.net、asp.net MVC 和 Classic ASP 中的相同组件

> ID：12973593
> 
> 赞同：0
> 
> 时间：2012-10-19T11:46:22.773
> 
> 标签：asp.net, asp.net-mvc, asp-classic, components, com+

我有一个用经典 ASP、ASP.NET 和 ASP.NET MVC 编码的大型网站/应用程序。我有一个菜单，上面有很多 HTML CSS JS，一些配置（可见或不可见......）和很多动态链接。

所以问题是当我必须更新菜单时，我必须更新 3 个文件，一个包含在经典 ASP 中，一个在 asp.net 中的 ASCX 用户控件和一个在 asp.NET MVC 中的部分视图

我讨厌代码重复，所以可以只使用一个组件吗？我听说过 Com，但我不知道从哪里开始。

感谢帮助

编辑：我想知道使用一个.net 对象，它可以生成一个包含我需要的所有 html 的字符串，然后将它放在视图 MVC 和 asp.net 页面中但是如何在经典 ASP 中使用它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T17:21:10.800

没有什么能阻止您使用**webapi 控制器**来公开此功能；webapi 控制器将返回`json`或`xml`菜单结构到客户端浏览器，这反过来将通过将 json 注入浏览器 DOM 并使用 CSS 设置样式来呈现。

经典 ASP 和 MVC ASP.NET 将使用相同的 javascript 和 css。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T15:28:32.170

我还在一个与您的情况非常相似的遗留应用程序中工作，生活有多糟糕:(

**我会去`XML`/`XSLT`在你的情况下。**

我将创建一个包含所有菜单详细信息的 XML 文件，并使用 XSLT 从 XML 生成 HTML。我可以轻松地在所有三种技术中使用 XML 和 XSLT。因此，每次需要更改时，都必须更改 XML 或 XSLT 文件。

您甚至可以创建一个使用 XML/XSLT 方法的简单 .NET 组件，该方法可以轻松用于 ASP.NET Web 窗体、ASP.NET MVC（在自定义视图引擎中？）以及经典 asp（您必须注册）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-19T11:49:57.730

猜猜，您可以在 asp.net MVC 中创建一个操作方法来呈现动态菜单并在站点的每个部分从 javascript 加载 AJAX？

**更新：**

您可以在经典 ASP 中向上述 ASP.NET MVC 处理程序发出 HTTP GET 请求，如果它不是非常动态的，则缓存结果。无论如何，如果它在同一台服务器中，它应该会非常快。我想，请求看起来像[这个答案](https://stackoverflow.com/a/1887522/1176284)

# c# - MvxBind:Error: 10.40 视图绑定期间抛出的异常

> ID：12973594
> 
> 赞同：2
> 
> 时间：2012-10-19T11:46:37.793
> 
> 标签：c#, xamarin.android, mvvmcross

我正在尝试使用提供的代码创建一个简单的服务，但我不明白为什么绑定时会出现异常。

10-19 11:42:09.148 I/mono-stdout(1622): MvxBind:Error: 10.40 视图绑定期间抛出异常

MvxBindingLayoutInflatorFactory 第 133 行！

我需要一些帮助：）

我的来源：

数据存储接口：

```
using Core.Models;
using System;
using System.Collections.Generic;
using System.Collections.ObjectModel;
using System.Linq;
using System.Text;

namespace Core.Interfaces
{
    public interface IDataStore
    {
        void UpdateFeed(FeedModel feedModel);
        void DeleteFeed(FeedModel feedModel);
        void CreateFeed(FeedModel feedModel);
        FeedModel GetFeed(Uri uri);
        ObservableCollection<FeedModel> Feeds { get; }
    }
} 
```

数据存储类：

```
using System;
using System.Collections.Generic;
using System.Linq;

using Core.Interfaces;
using System.Collections.ObjectModel;
using Cirrious.MvvmCross.Interfaces.ServiceProvider;
using Cirrious.MvvmCross.Interfaces.Platform;
using Cirrious.MvvmCross.Interfaces.Localization;
using Cirrious.MvvmCross.ExtensionMethods;
using Core.Helpers;
using System.Xml.Serialization;
using System.Xml.Linq;
using System.IO;

namespace Core.Models
{
    public class DataStore
        : IDataStore
        , IMvxServiceConsumer<IMvxSimpleFileStoreService>
        , IMvxServiceConsumer<IMvxResourceLoader>
    {
        public DataStore()
        {
            Load();
        }

        public void UpdateFeed(FeedModel feedModel)
        {
            var toUpdate = this.m_feeds.First(feed => feed.Url == feedModel.Url);
            toUpdate.CloneFrom(feedModel);
            Save();
        }

        public void DeleteFeed(FeedModel feedModel)
        {
            this.m_feeds.Remove(this.m_feeds.First(feed => feed.Url == feedModel.Url));
            Save();
        }

        public void CreateFeed(FeedModel feedModel)
        {
            this.m_feeds.Add(feedModel);
            Save();
        }

        public FeedModel GetFeed(Uri uri)
        {
            return this.m_feeds.First(feed => feed.Url == uri);
        }

        private void Load()
        {
            var fileService = this.GetService<IMvxSimpleFileStoreService>();
            if (!fileService.TryReadBinaryFile(LocationDataService.StoreFileName, LoadFrom))
            {
                var resourceLoader = this.GetService<IMvxResourceLoader>();
                resourceLoader.GetResourceStream(LocationDataService.ResourceFileName, (inputStream) => LoadFrom(inputStream));
            }
        }

        private bool LoadFrom(Stream inputStream)
        {
            try
            {
                var loadedData = XDocument.Load(inputStream);
                if (loadedData.Root == null)
                    return false;

                using (var reader = loadedData.Root.CreateReader())
                {
                    var list = (List<FeedModel>)new XmlSerializer(typeof(List<FeedModel>)).Deserialize(reader);
                    this.m_feeds = new ObservableCollection<FeedModel>(list);
                    return true;
                }
            }
            catch
            {
                return false;
            }
        }

        private void Save()
        {
            var fileService = this.GetService<IMvxSimpleFileStoreService>();
            fileService.WriteFile(LocationDataService.StoreFileName, (stream) =>
            {
                var serializer = new XmlSerializer(typeof(List<FeedModel>));
                serializer.Serialize(stream, m_feeds.ToList());
            });
        }

        private ObservableCollection<FeedModel> m_feeds;
        public ObservableCollection<FeedModel> Feeds
        {
            get { return this.m_feeds; }
        }

    }
} 
```

基础视图模型：

```
using Cirrious.MvvmCross.Commands;
using Cirrious.MvvmCross.ExtensionMethods;
using Cirrious.MvvmCross.Interfaces.Commands;
using Cirrious.MvvmCross.Interfaces.ServiceProvider;
using Cirrious.MvvmCross.ViewModels;
using Core.Interfaces;

namespace Core.ViewModels
{
    public class BaseViewModel
        : MvxViewModel
        , IMvxServiceConsumer<IDataStore>
    {
        protected IDataStore DataStore
        {
            get { return this.GetService<IDataStore>(); }
        }
    }
} 
```

FeedManagerViewModel：

```
using Cirrious.MvvmCross.Commands;
using Cirrious.MvvmCross.Interfaces.Commands;
using Core.Controls;
using Core.Models;
using System;
using System.Collections.ObjectModel;

namespace Core.ViewModels
{
    public class FeedsManagerViewModel
        : BaseViewModel
    {

        public ObservableCollection<FeedModel> Feeds { get { return this.DataStore.Feeds; } }

       ...
    }
} 
```

查看xml：

```
<Mvx.MvxBindableListView
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            local:MvxBind="{'ItemsSource':{'Path':'Feeds'}, 'ItemClick':{'Path':'DisplayItemCommand'}}"
            local:MvxItemTemplate="@layout/feedlist_viewmodel" /> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T12:01:41.760

这很可能是您的 XML 中的一个错误……但仅从那一行跟踪就很难分辨。

你运行的是什么版本的 MvvmCross？

Master 和 vNext 的提示版本都将第 133 行显示为

```
 MvxBindingTrace.Trace(MvxTraceLevel.Error, "Exception during creation of {0} from type {1} - exception {2}", name, viewType.FullName, exception.ToLongString()); 
```

因此，希望如果您使用该提示，那么应该可以为您提供更多有关问题所在的信息。

除此之外，您始终可以尝试在有问题的行上设置断点以提取更多信息。

* * *

如果异常出现在第 99 行，则将错误记录从以下位置更改：

```
MvxBindingTrace.Trace(MvxTraceLevel.Error, "Exception thrown during the view binding ", exception.ToLongString()); 
```

至：

```
MvxBindingTrace.Trace(MvxTraceLevel.Error, "Exception thrown during the view binding {0}", exception.ToLongString()); 
```

错误将在某处:)

* * *

另一种很好的调试技术是逐行注释，直到问题消失——这有助于确定问题出在哪里。

你有一个工作的开发环境和一个非常强大的调试器——使用它是一项很好的学习技能。“代码完成”是我最喜欢的书之一 :)

# asp.net-mvc - 部署的 mvc 应用程序不包括 href 链接中的站点名称

> ID：12973596
> 
> 赞同：0
> 
> 时间：2012-10-19T11:46:41.907
> 
> 标签：asp.net-mvc, kendo-ui

我有一个使用带有客户端模板的 Kendo UI Grids 的 asp.net MVC Web 应用程序。客户端模板指定 href 如下：

```
.ClientTemplate("<a href='[controller]/[action]/[parameters]' />") 
```

在调试运行中，链接正确生成如下：

```
http://localhost:[port]/[Controller]/[Action]?[parameters] 
```

效果很好。

但是，在部署的环境中，生成的链接如下：

```
http://[server]/[Controller]/[Action]?[parameters] 
```

这失败了，因为它缺少网站名称。所以我需要的是它生成如下链接：

```
http://[server]/[WebSite]/[Controller]/[Action]?[parameters] 
```

我需要如何指定我的 href 链接才能使其正常工作？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-19T12:23:33.400

不要手动编码您的 url，而是使用[UrlHelper](http://msdn.microsoft.com/en-us/library/dd492942%28v=vs.108%29.aspx)，它将负责将虚拟目录包含到您的 url 中：

```
.ClientTemplates(string.Format("<a href='{0}' />", 
                     Url.Action("action", "contoller", new { param1, param2}))) 
```

如果要在 url 中使用客户端模板值，则必须动态构建 url，因为 Kendo UI 模板语法不会在路由值内：

```
columns.Bound(m => m.Id)
       .ClientTemplate(string.Format("<a href='{0}&Id=#= Id #'>Click me<a>", 
           Url.Action("action", "contoller", new { someNotTemplatedParam }))); 
```

# asp.net-mvc-3 - 使用 LINQ-to-SQL 容器

> ID：12973604
> 
> 赞同：0
> 
> 时间：2012-10-19T11:47:09.820
> 
> 标签：asp.net-mvc-3, performance, linq-to-sql

我正在使用 MVC3，目前我正在遵循一种做法，即我为每个控制器声明一个 DB Container 实例。对于到达该控制器的每个请求，我都会使用该容器实例。如果我需要去我的模型进行查询或某事，我会将该实例作为参数发送给模型的函数。因此，对于整个应用程序，我创建并使用了 4-5 个不同的 DB Container 类实例。我的问题是，这对我的数据库操作有好处还是坏处？创建一个单独的容器实例是否重要？使用容器类的正确方法是什么？

我相信之前提到的类被称为 DBContext 。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T22:51:15.843

我不确定这是你的意思，但我可以给你一个我经常遵循的方法的例子：

为 DBContext 创建一种“域服务类”

```
public class MyDomainService : IDisposable
{
    private MyDbEntities dbo;
    private bool isDisposed;

    public MyDomainService()
    {
        dbo = new MyDbEntities();
    }

    public User GetUser(string userName)
    {
        return (from usr in dbo.Users
                where usr.UserName == userName
                select usr).SingleOrDefault();
    }

    public void Dispose()
    {
        if (isDisposed)
            return;
        isDisposed = true;
        dbo.Dispose();
    }
} 
```

创建一个自定义 Controller 类，该类扩展`Controller`或`AsyncController` 覆盖`Initialize`and`Dispose`方法：

```
public class MyController : Controller
{

    protected MyDomainService DomainService { get; private set; }

    protected override void Initialize(System.Web.Routing.RequestContext
                                       requestContext)
    {
        base.Initialize(requestContext);
        DomainService = new MyDomainService();
    }

    protected override void Dispose(bool disposing)
    {
        DomainService.Dispose();
        base.Dispose(disposing);
    }

} 
```

现在您可以在每个示例中使用以下方法`HomeController`继承`MyController`

```
public class HomeController : MyController
{

    public ActionResult Index()
    {
        return View();
    }

    [HttpPost]
    public ActionResult Index(string username)
    {
        var user = DomainService.GetUser(username);
        if (user != null)
            return RedirectToAction("Account", "Information");
        return View();
    }

} 
```

这将使您的控制器相当干净。

# xml - 如何将以下类转换为 XML？

> ID：12973617
> 
> 赞同：0
> 
> 时间：2012-10-19T11:47:54.237
> 
> 标签：xml, vb.net, class, properties

所以我在 vb.net 中制作这个课程。此类将被序列化为 xml。

通过使用

> < XmlElement("Cookies")> _

我可以按照我想要的方式命名元素。

```
 Private i_cookies As Integer
<XmlElement("Cookies")> _
Public Property Cookies() As Integer
    Get
        Return i_cookies 
    End Get
    Set(ByVal value As Integer)
        i_cookies = value
    End Set
End Property 
```

这些元素很容易命名。但问题是我现在需要做一些事情来制作一个包含元素的序列和包含该序列的复杂类型，并适当地命名它们。

有谁知道如何做到这一点 ？

我一直在想，我需要将我的属性（它们是元素）放入某些东西（但我不知道是什么）来表示为序列，并将序列放入表示为复杂类型的东西中。

编辑：我真的不知道如何正确地提出我的问题。

编辑（要求提供更多信息）：以下是关于我想要的方式的信息，但问题是，我不知道如何在元素周围和我的类的根中添加复杂类型和序列。

```
<root>
 <complexType name ="ShoppingList">
   <sequence>
     <element name="cookies"></element>
     ''More elements/product and such, but this isn't that difficult
   </sequence>
 </complexType>
<root> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T18:28:07.977

我不确定您要建模的确切结构是什么。这里有些例子：

* * *

```
<ShoppingList>
    <Cookies>3</Cookies>
</ShoppingList> 
```

由

```
<XmlType("ShoppingList")> _
Public Class ShoppingList
    <XmlElement("Cookies")> _
    Public Property Cookies As Integer
End Class 
```

* * *

```
<ShoppingList>
    <Cookies>
        <Cookie>Chocolate Chip Cookies</Cookie>
        <Cookie>Brownies</Cookie>
    </Cookies>
</ShoppingList> 
```

由

```
<XmlType("ShoppingList")> _
Public Class ShoppingList
    <XmlArray("Cookies")> _
    Public Property Cookies As List(Of Cookie)
End Class

Public Class Cookie
    <XmlText> _
    Public Property Name As String
End Class 
```

或者

```
<XmlType("ShoppingList")> _
Public Class ShoppingList
    <XmlArray("Cookies")> _
    <XmlArrayItem("Cookie")> _
    Public Property Cookies As List(Of String)
End Class 
```

# performance - 当在表中索引多个列时，Oracle 解释计划 over simple select 执行多个哈希连接

> ID：12973618
> 
> 赞同：0
> 
> 时间：2012-10-19T11:47:56.397
> 
> 标签：performance, oracle, database-design, data-warehouse

我目前遇到了我的 Oracle 实例的问题。我有两个简单的选择语句：

```
select * from dog_vets 
```

和

```
select * from dog_statuses 
```

和下面的[小提琴](http://sqlfiddle.com/#!4/37754)

我的解释计划`dog_vets`如下：

```
 0 | Select Statement  
 1 | Table Access Full Scan dog_vets 
```

我的解释计划`dog_statuses` 如下：

```
ID|Operation | Name | Rows |Bytes | cost | time    
0 | Select Statement |  | 20G | 500M | 100000 | 999:99:17  
1 | View  | index%_join_001 | 20G | 500M | 100000 | 999:99:17  
2 | Hash Join  |  | | | |   
3 | Hash Join  |  | | | |   
4 | Index fast full scan dog_statuses_check_up  |  | 20G | 500M | 100000 | 32:15:00  
5 | Index fast full scan dog_statuses_sick|  | 20G | 500M | 100000 | 35:19:00 
```

要获得这种类型的输出，请执行以下语句：

```
explain plan for   
select * from dog_vets; 
```

或者

```
 explain plan for   
    select * from dog_statuses; 
```

接着

```
select * from table(dbms_xplan.display); 
```

现在我的问题是，为什么多个索引意味着在我的上述语句中创建了一个视图（我假设是物化的），以及我在这种类型的查询中遭受了什么样的性能影响？目前`dog_vets`有大约 3 亿条记录和`dog_Statuses`大约 5 亿条记录。我还没有能够`select * from dog_statuses`在 10 小时内返回。这主要是因为查询在完成之前就终止了。

**DDL**

如果 sql fiddle 死了：

```
create table dog_vets
(
     name varchar2(50),
     founded timestamp,
     staff_count number
  );

create table dog_statuses
(
      check_up timestamp,
      sick varchar2(1)
  );

create index dog_vet_name
on dog_vets(name);

create index dog_status_check_up
on dog_statuses(check_up);

create index dog_status_sick
on dog_statuses(sick); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T15:32:16.217

您可以尝试告诉优化器忘记索引

```
 SELECT /*+NO_INDEX(dog_statuses)*/ *
 FROM dog_statuses 
```

# java - 强制 Spring 安全性在帐户状态标志之前检查凭据

> ID：12973619
> 
> 赞同：4
> 
> 时间：2012-10-19T11:48:01.387
> 
> 标签：java, spring-security

我已经继承了 org.springframework.security.core.userdetails.User 并在我的构造函数中调用：

```
Super (String username,
        String password,
        boolean enabled,
        boolean accountNonExpired,
        boolean credentialsNonExpired,
        boolean accountNonLocked,
        GrantedAuthority[] authorities) 
```

`${SPRING_SECURITY_LAST_EXCEPTION.message}`然后我在登录失败时使用显示结果。

我遇到的问题是，如果我将 accountNotLocked 设置为 false，则会显示帐户锁定错误消息，无论密码是否正确都会发生这种情况。如果 spring 先验证凭据然后启用 accountNonExpired、credentialsNonExpired 和 accountNonLocked 标志，我会更喜欢它。这样，只有在他们获得正确的凭据时，才会通知用户他们的帐户已被锁定。

有没有办法强制弹簧这样做？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-19T12:42:55.750

我假设您使用的是最流行[`DaoAuthenticationProvider`](http://static.springsource.org/spring-security/site/docs/3.1.x/apidocs/org/springframework/security/authentication/dao/DaoAuthenticationProvider.html)的并且问题出[`UserDetailsChecker`](http://static.springsource.org/spring-security/site/docs/3.1.x/apidocs/org/springframework/security/core/userdetails/UserDetailsChecker.html)在此类的默认实现中。也就是说，之后移动所有检查`DaoAuthenticationProvider.additionalAuthenticationChecks`应该足以解决您的问题。尝试以下配置：

```
<authentication-manager alias="authenticationManager">
  <authentication-provider ref="daoAuthenticationProvider" />
</authentication-manager>

<bean id="daoAuthenticationProvider"
      class="org.springframework.security.authentication.dao.DaoAuthenticationProvider">
  <property name="userDetailsService" ref="userDetailsService"/>
  <property name="passwordEncoder" ref="passwordEncoder"/>
  <property name="preAuthenticationChecks"
      class="com.example.NullUserDetailsChecker"/>
  <property name="postAuthenticationChecks"
      class="org.springframework.security.authentication.AccountStatusUserDetailsChecker"/>
</bean> 
```

哪里`com.example.NullUserDetailsChecker`是[空对象模式](http://en.wikipedia.org/wiki/Null_Object_pattern)的实现`UserDetailsChecker`（有 void check 方法，它什么都不做）。

# php - 通过 SMS 应用程序更新 Facebook 状态

> ID：12973620
> 
> 赞同：0
> 
> 时间：2012-10-19T11:48:07.950
> 
> 标签：php, facebook

我们收到客户的请求，要求通过短信更新 Facebook 状态/评论。

这是场景。

SMS 带有 fb 用户名、密码和状态/评论，这将发送到 SMS 网关。然后用户名、密码和状态/评论来到我们的应用程序，我们的应用程序应该有助于更新 fb 帐户的状态和评论。

是否有通过 SMS（身份验证对话框）对用户进行身份验证的方法，或者是否有任何其他方法可以通过短信更新 fb 上的状态/评论。这是一个 PHP 应用程序。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T13:01:04.263

1.  你为什么不让你的用户在你的网站上创建一个帐户并授权你的 Facebook 注册应用访问他的时间线？他还会在您的网站上注册他的电话号码并获得一个简短的数字唯一 ID。
2.  然后他可以发送一条短信，当您在短信中检测到电话号码或数字 ID 时，您使用您授权的 Facebook API 发布。

通过 SMS 发送用户名和密码不是一个好主意。电话号码本身的数字 ID 更安全。

**PS**：*我没有使用 FBAPI，但据我所知，它应该是这样工作的。*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T14:06:13.620

无法使用用户名和密码进行身份验证。

您应该要求您的用户在他们的个人资料上创建新应用程序或首先通过您的网站进行身份验证，以便授予您访问权限。

获得 application_key 和 application_secret 后，您可以使用这些对操作用户帐户。

请参阅 facebook 的开发者专区以获取有关 fbapi 工作原理的更多详细信息。

# string - 找到每个单词的频率

> ID：12973622
> 
> 赞同：3
> 
> 时间：2012-10-19T11:48:12.797
> 
> 标签：string, algorithm, graph, dictionary, string-search

面试中有一个问题问我，但我无法回答。

问题是：

你得到一个有向图，其中每个节点都是一个字符，你还得到一个字符串数组。任务是通过在图中搜索来计算数组中每个字符串的频率。

我的做法：我用了trie、Suffix tree，但面试官并不完全满意。你能给我一个给定问题的算法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T14:06:34.290

下面怎么样...在有向图中查找字符串 s 的出现次数。

*   从面包优先搜索开始（标记已经访问过的节点以避免循环）
*   找到第一个字符后，切换到深度优先搜索，max-depth = length(s)
*   如果检测到字符串序列，则为每次出现的 DFS 增加出现次数
*   恢复 BFS

一些注意事项

*   我不相信 DFS 应该共享 BFS 的访问节点列表（例如，您可能需要回到开头并重叠
*   BFS 也不应该共享 DFS 访问列表。例如，您可能正在寻找“Alan”并拥有“AAlan”，并确保从第二个 A 重新开始

现在对于一个数组，我可以对每个字符串重复这个过程。当然可能有更有效的解决方案，但我会开始这样想。

您的回答是否包括有关广度优先或深度优先搜索的任何对话？如果有人提到搜索图表，我几乎总是会回复其中一个的变体

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T15:05:23.920

这是另一个解决方案：

首先我们需要对字符串数组做一些预处理。让我们将 C 定义为组成数组中所有字符串的所有字符的子集。对于 C 中的每个字符，我们将跟踪包含该字符的每个字符串及其在该字符串中的位置 + 一个布尔值，说明它是否是该字符串中的最后一个字符。这可以使用字典来完成。

例如，假设我们的数组是 ['one', 'two', 'three']。我们的字典看起来像这样：

```
'o': (0, 0, false),(1,2,true)
't': (1, 0, false),(2,0,false) 
'n': (0, 1, false)
'e': (2, 3, false),(2,4, true)
'h': (2, 1, false)
'r': (2, 2, false)
'w': (2, 1, false) 
```

接下来我们将使用 DFS 和动态规划。基本上，每当您访问边缘时，您都会检查 dict 上的父项和子项，以查看它们是否构成子字符串并存储该信息。

使用此方法，您可以轻松检测数组中每个字符串的所有重复。

构建预处理表可以在 o(L) 中完成，其中 L 是数组中所有字符串的长度之和。

发现所有递归可以在 O(m * k) 中完成，其中 m 是边的数量（而不是节点的数量，因为一个节点可以被多次发现），k 是字符串的数量。

实现可能有点棘手，您应该避免一些陷阱。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-20T16:29:09.380

看这张图，每个级别都有所有 4*4 边（很难画，请支持我）

![在此处输入图像描述](../Images/89f5e7ba30eb59235928e05b4259f415.png)

可能会出现很多情况。

我想他可能期待`dynamic programming`：

单独处理每个字符串，表示从 node 开始`f[i][j]`完成字符串最后一个字母的总数，其余的很容易。`j``i`

# android - EditText中输入类型的使用

> ID：12973625
> 
> 赞同：0
> 
> 时间：2012-10-19T11:48:18.967
> 
> 标签：android

即使我将输入类型设置为`numberdecimal`或数字，我也必须转换数字才能获得数字。那么`input type`在`EditText`视图中有什么用。

例如

```
int a = Integer.valueOf(editText.getText().toString()); 
```

还有一件事，为什么我需要使用`toString()`几乎所有视图来获取文本？在java中，我们可以`getText`从控件中获得任何东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T11:54:19.407

您必须将 Text 解析为 Integer，因为它不返回 int。它返回按输入类型格式化的 Editable。因此，如果您将输入类型设置为数字，您将获得仅包含数字的 Editable。而且您必须添加 toString() 因为 EditText 返回可编辑而不是字符串。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T11:58:43.393

InputType 用于各种目的。例如，在密码字段中，它可以隐藏字符。

这是它可以采用的每个属性的官方描述： [https ://developer.android.com/reference/android/widget/TextView.html#attr_android:inputType](https://developer.android.com/reference/android/widget/TextView.html#attr_android:inputType)

至于问题的第二部分， EditText.getText() 返回[Editable](https://developer.android.com/reference/android/text/Editable.html)

这为所有可以更改内容和标记的文本定义了一个通用接口（与字符串等不可变文本相反）。

因此，您需要使用 toString() 从中获取字符串。

# keyboard - KVM 切换器和快乐黑客键盘 Pro 2

> ID：12973627
> 
> 赞同：0
> 
> 时间：2012-10-19T11:48:21.477
> 
> 标签：keyboard

我已经使用 HHKB Pro 2 快一年了，一个在家里，一个在工作。现在我必须使用两台电脑（PC 和 Mac），我决定为其购买 KVM 切换器。我选择了一个，并期望它不会有任何问题，但是当我将其插入时，HHKB 无法与 PC 或 Mac 一起使用。我尝试了几个键盘，并且都完美无缺地期待提到的 HHKB。我尝试了第二个，结果相同。考虑到这一点，我购买了另一台 KVM 切换器，它是硬件切换的（上一个听的是 HHKB 使用 Fn 键支持的 ScrollLock）。令我惊讶的是，它也不起作用。现在我的 KVM 切换器可以与任何键盘完美配合，但该死的 HHKB Pro 2。有没有可以处理这个问题的 KVM 切换器（或者更准确地说，有没有 HHKB 可以处理的，因为显然有

你有这方面的经验吗？谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-24T05:26:16.443

HHKB Pro 2 有 USB 集线器，这似乎对大多数 KVM 切换器造成了问题。

KVM 切换器希望键盘连接到其键盘端口。因此，当连接 HHKB Pro 2 时，KVM 切换器会找到 USB 集线器并停止。它不会超越 USB 集线器来寻找可能连接到它的键盘。

那么有没有可以与 HHKB Pro 2 配合使用的 KVM 切换器？ATEN 的一台 KVM 切换器虽然有点不稳定，但仍能正常工作。如果您想尝试一下，他们最近的模型可能会提高稳定性。

但是，如果您的每台计算机都有显示器，我建议您使用像“Synergy”（[http://synergy-foss.org/ ）这样的免费软件解决方案。](http://synergy-foss.org/)

# c - 将 void * 转换为数组

> ID：12973630
> 
> 赞同：0
> 
> 时间：2012-10-19T11:48:36.130
> 
> 标签：c, arrays, malloc, memcpy

我需要将一个数组转换为一个具有 void* 元素的结构，然后返回另一个数组：

```
unsigned short array[size];
//do something to the array

typedef struct ck{

void * arg1;
void * arg2;
void * arg3;

} argCookie;

argCookie myCookie;

myCookie.arg2=malloc(sizeof(array));//alloc the necessary space
memcpy(myCookie.arg2,&array,sizeof(array));//copy the entire array there

//later....

unsigned short otherArray[size];
otherArray=*((unsigned short**)aCookie.arg2); 
```

碰巧这最后一行不会编译......为什么会这样？显然我在某个地方搞砸了......

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T11:51:41.733

您不能分配给数组。代替

```
otherArray=*((unsigned short**)aCookie.arg2); 
```

如果您知道尺寸，请再次使用`memcpy`：

```
memcpy(&otherArray, aCookie.arg2, size*sizeof(unsigned short)); 
```

如果你不知道大小，那你就不走运了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-19T11:54:03.507

您不能通过为其分配指针来复制数组，数组不是指针，并且您不能分配给数组，您只能分配给数组的元素。

您可以使用 memcpy() 复制到您的数组中：

```
//use array, or &array[0] in memcpy,
//&array is the wrong intent (though it'll likely not matter in this case
memcpy(myCookie.arg2,array,sizeof(array));

//later....

unsigned short otherArray[size];
memcpy(otherArray, myCookie.arg2, size); 
```

假设您知道`size`，否则您还需要将大小放入其中一个 cookie 中。根据您的需要，您可能不需要复制到`otherArray`，只需直接使用 cookie 中的数据：

```
unsigned short *tmp = aCookie.arg2;
//use `tmp` instead of otherArray. 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-19T11:55:25.097

```
unsigned short* otherArray = (unsigned short*)aCookie.arg2 
```

然后你可以使用`otherArray[n]`来访问元素。当心超出范围的索引。

# c# - 如何在 Visual Studio 之外对项目进行单元测试

> ID：12973631
> 
> 赞同：4
> 
> 时间：2012-10-19T11:48:40.853
> 
> 标签：c#, .net, visual-studio-2010, unit-testing

我在 Visual Studio 中做了一个项目，并实施了单元测试。代码在单元测试中运行良好。

现在我怀疑是否可以在 Visual Studio 环境之外实现单元测试，以便我只使用我的项目生成的 exe 并针对多种情况对其进行测试？

我正在寻找一个可以利用我当前的单元测试实现的选项

我是单元测试的新手，所以任何帮助将不胜感激

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T11:50:16.360

你可以使用像 NUnit 这样的外部库，有管理器来运行你的测试

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-19T12:33:39.777

如果从外部，您的意思是在 Visual Studio IDE 之外，那么您可以使用VS 内部使用的[mstest.exe 。](http://msdn.microsoft.com/en-us/library/ms182489%28v=vs.80%29.aspx)这在某种意义上是独立的，该主机不需要安装 VS。因此，例如构建系统可以调用它并在构建结束时进行单元测试。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-19T12:34:44.317

如果您使用的是 Microsoft 测试框架，则可以从命令行运行[MSTest.exe](http://msdn.microsoft.com/en-us/library/ms182489.aspx)。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-19T12:49:16.607

在没有 Visual Studio 的情况下安装 MSTest 并非易事。[在这方面，这个工具](http://www.microsoft.com/en-us/download/details.aspx?id=1334)对我非常有用。
起源于[这里](https://stackoverflow.com/a/3884056/456181)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-19T13:04:32.083

如果您按照此 SO 答案设置测试类，则可以根据编译选项在 MSTest 或 NUnit 中运行它们。希望这可以帮助！

[同时使用 MSTest 和 NUnit？](https://stackoverflow.com/questions/5053557/using-both-mstest-and-nunit)

# xcode - 用于指定源搜索路径的 LLDB 等效于 gdb“目录”命令？

> ID：12973633
> 
> 赞同：23
> 
> 时间：2012-10-19T11:48:46.160
> 
> 标签：xcode, debugging, gdb, lldb

寻找与 gdb“*目录*”命令等效的 lldb 来添加搜索路径以查找丢失的源代码（或可能在 xcode 中的类似功能）？

提前致谢！

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-10-19T19:32:41.983

该设置允许您在调试会话中`target.source-map`定义一系列路径重新映射。`a => b`它与 gdb *dir*命令不同，后者是一个目录列表，用于按基本名称搜索源文件，但您可以使用`source-map`. 这是一个示例，我在编译后将源文件移动到隐藏目录：

```
% cd /tmp
% echo 'int main () { }' > a.c
% clang -g a.c
% mkdir hide
% mv a.c hide/
% xcrun lldb a.out
(lldb) settings set target.source-map /tmp /tmp/hide
(lldb) l -f a.c
   1    int main () { }
(lldb) br se -n main
Breakpoint created: 1: name = 'main', locations = 1
(lldb) r
Process 21674 launched: '/private/tmp/a.out' (x86_64)
Process 21674 stopped
* thread #1: tid = 0x1f03, 0x0000000100000f49 a.out`main + 9 at a.c:1, stop reason = breakpoint 1.1
    #0: 0x0000000100000f49 a.out`main + 9 at a.c:1
-> 1    int main () { }
(lldb) 
```

有关此设置的更多信息，请键入`set list target.source-map`lldb。fwiw 您可能已经在 lldb 中发现了这一点，这将列出名称/描述中`apropos path`包含单词*路径的所有命令/设置。*看到有这个名称的设置，您`settings list`可以查看设置列表并发现它在`target.`.

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2020-02-07T19:06:52.010

`lldb`无法找到源文件的问题可能是由有缺陷的编译过程引起的 - 我只是花了几个小时试图找到一个`lldb`命令来强制设置源文件的路径，但最终发现我执行了实际编译和链接我的...中的相同标志集（`-Wall -Werror -Wextra -g`）`Makefile`因此编译器在没有警告和错误消息的情况下工作，尽管实际上存在错误（或警告被视为错误）。修复它们固定`lldb`的工作流程。也许开发人员应该考虑添加一些警告（对于像我这样的新手），以防程序无法找到源（它们位于`src`文件夹中的同一目录中）。

# javascript - 使用 Javascript 加载下拉列表值

> ID：12973635
> 
> 赞同：0
> 
> 时间：2012-10-19T11:48:47.033
> 
> 标签：javascript, jquery, html, drop-down-menu

我有以下代码，我试图将值从数组（来自文件页面students.js）加载到下拉列表中：

学生.js

```
var STU_NAME = 0;
var STU_ID = 1;
var STU_AGE = 2;
var STUDENTS = [
    ["Apple", 1, 15],
    ["Billy", 2, 16]
    ["Cathy", 3, 14]        
        ]; 
```

函数.js

```
var jQ = $.noConflict();

function populateStudents() {
    jQ('#students').empty();
    jQ('#students').append(jQ("<option></option>").attr("value", "").text("-- Please Select --"));
    for (var _i = 0; _i < students.length; _i++) {
        jQ('#students').append(jQ("<option></option>").attr("value", _i).text(STUDENTS[_i][STU_NAME]));
    }
}

jQ(document).ready(function () {
    populateStudents();
}); 
```

我的页面.aspx

```
<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">
    <title></title>
    <style type="text/css">

    </style>
</head>
<body>
    <div id="model">
        <form>
        <div>
            <div id="StudentLabel">
                Student:
            </div>
            <select id="students" name="students">
            </select>
        </div>      
        <script src="../Scripts/Functions.js" type="text/javascript"></script>
        <script src="../Scripts/student.js" type="text/javascript"></script>
        </form>
    </div>
</body>
</html> 
```

我在 Functions.js 的第 1 行收到错误“Microsoft JScript 运行时错误：'$' 未定义”

任何人都可以帮助我解决我在这里工作所缺少的东西。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T11:54:04.147

您忘记添加 jquery 库

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js" type="text/javascript"></script>
<script src="../Scripts/Functions.js" type="text/javascript"></script>
<script src="../Scripts/student.js" type="text/javascript"></script> 
```

强烈推荐使用jquery的CDN版本来提高页面速度，**[查看这个链接](http://developer.yahoo.com/performance/rules.html#cdn)**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-19T11:50:37.470

`You need to include jquery library`，您可以从[这里](http://jquery.com/download/)下载在页面头部或使用 jquery 之前添加脚本标签。

```
<head runat="server">
    <title></title>
    <style type="text/css">

    </style>
   <script language="javascript" type="text/javascript" src="JS/jquery-1.7.2.js"></script>
    <script src="../Scripts/Functions.js" type="text/javascript"></script>
    <script src="../Scripts/student.js" type="text/javascript"></script>
</head> 
```

# screenshot - 是否可以使用 OpenLaszlo 截取 html 标签内容？

> ID：12973637
> 
> 赞同：2
> 
> 时间：2012-10-19T11:48:51.463
> 
> 标签：screenshot, openlaszlo, lzx

我正在创建一个 openlaszlo 应用程序，其中将存在一个 html 标记，并且我有一些可在 swf 中拖动的组件。我想将这些组件拖到 html 上。这是不可能的。

所以我想的是对html内容进行截图，并在我需要拖动时将其替换为实际的html内容。

从理论上讲，这应该是可能的，并且在 flex 中是可能的，我验证了自己。我正在尝试在 Openlaszlo 中做同样的事情。但我没有得到任何线索

到目前为止，我已经尝试过这样并且我收到一个错误，即 html 标签不是 IBitmapDrawable 的对象

```
<canvas width="800" height="600" bgcolor="white" debug="true">
<script when="immediate"><![CDATA[
class MagUtils {
#passthrough (toplevel: true) {
import flash.display.DisplayObject;
import flash.geom.Rectangle;
import flash.geom.Matrix;
import flash.geom.ColorTransform;
import flash.display.Bitmap;
import flash.display.BitmapData;
import flash.filters.*;
import flash.events.MouseEvent;
import mx.graphics.ImageSnapshot;
import flash.utils.ByteArray;
import flash.display.IBitmapDrawable;
}#

var temp:lz.view;
var colorTransform:ColorTransform;
var rect:Rectangle;

public function snap (m:IBitmapDrawable, t:lz.view):void {

temp = t;
var temp_mc = temp.sprite; // getMCRef();
var mainView_mc = main.sprite; // getMCRef();
var scale = 1;
var x;
var y;
var w;
var h;
  var imageSnap:ImageSnapshot = ImageSnapshot.captureImage(m);
  var imageByteArray:ByteArray = imageSnap.data;
colorTransform = new flash.geom.ColorTransform();
rect = new flash.geom.Rectangle(0, 0, temp.width, temp.height);

var bitmap:BitmapData = new flash.display.BitmapData(w, h, false);
 bitmap.setPixels(rect, imageByteArray);
var bm:Bitmap = new Bitmap(bitmap);
temp.sprite.addChild (bm);
bitmap = null;
}
}
lz.MagUtils = new MagUtils();
]]>

</script>

<button name="magnifier" text="magnifyingtool" >
<handler name="onclick">
lz.MagUtils.snap(canvas.main.ht,canvas.temp);
</handler>
</button>

<view name="main" x="5" y="15" width="200" height="200" bgcolor="yellow">
    <html name="ht" width="200" height="200" src="http:hello.html"/>
</view>
<view id="temp" name="temp" x="5" y="300" visible="true" width="200" height="200" bgcolor="gray">
</view>

</canvas> 
```

HTML内容是

```
<!DOCTYPE html PUBLIC "-//IETF//DTD HTML 2.0//EN">
<HTML>
   <HEAD>
      <TITLE>
         A Small Hello
      </TITLE>
   </HEAD>
<BODY>
   <H1>Hi</H1>
   <P>Test Page</P>
</BODY>
</HTML> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T16:38:13.483

无法在 Flash 中截取不受 Flash 显示列表管理的元素，其中包括放置在浏览器中 SWF 影片下方的 iFrame 内容。这似乎就是你想要做的。

如果要将可视对象从 iFrame 拖到 SWF 影片区域，一种方法可能是将 HTML 中的内容呈现到 HTML5 画布元素中，提取位图数据并将其推送到 SWF 影片中以在 OpenLaszlo 中显示看法。但这意味着您要拖动的所有视觉元素都需要绘制到 HTML5 画布中。

这是一个使用 Flash Player 的过滤器功能将过滤器应用于 HTML5 画布元素中的图像的示例： [http ://www.quasimondo.com/archives/000695.php](http://www.quasimondo.com/archives/000695.php)

以下是此示例的相关文件的链接：

1.  [嵌入不可见 SWF](http://code.google.com/p/quasimondolibs/source/browse/trunk/PixelBenderForCanvas/html/Pibeca.html)以处理图像的HTML 页面。
2.  [JavaScript 文件](http://code.google.com/p/quasimondolibs/source/browse/trunk/PixelBenderForCanvas/html/Pibeca.js)，其中包含用于将数据发送到 SWF 影片剪辑的函数。
3.  [ActionScript 类](http://code.google.com/p/quasimondolibs/source/browse/trunk/PixelBenderForCanvas/src/com/quasimondo/PixelBenderForCanvas/Pibeca.as)处理从 JavaScript 发送的图像数据，并将处理后的数据传递回 HTML 页面。

但我不确定您在 iFrame 中拥有的所有内容都可以呈现到画布元素中。

# ruby - 将 lambda 存储在由 switch 语句获得的数组中，然后使用它

> ID：12973638
> 
> 赞同：1
> 
> 时间：2012-10-19T11:48:53.677
> 
> 标签：ruby, arrays, lambda, switch-statement

在我的脚本（对于 Ruby >= 1.9）中，我定义了一个 Table 类，它的职责是生成 2 到 10 个加法或乘法表（用参数选择）。然后我从一个新的 Table 实例调用 table 方法，以便在文件中打印结果。

这是脚本：

```
#!/usr/bin/env ruby

class Table

HEADER_LINE = "="*25
add_operation = lambda { |op1, op2| op1 + op2 }
mul_operation = lambda { |op1, op2| op1 * op2 }

def table(req_operation = :mul)

    operation, op_label =   case req_operation
                            when :add
                                [add_operation, "+"]
                            when :mul
                                [mul_operation, "*"]
                            else
                                raise "Unknown operation #{req_operation} !"
                            end

    (2..10).each do |op1|
        yield HEADER_LINE
        yield "Table de #{op1} (x#{op_label}y)"
        yield HEADER_LINE
        (1..10).each do |op2|
            yield line = "#{op1} #{op_label} #{op2} = #{operation.call(op1, op2)}"
        end
        yield HEADER_LINE
        yield
    end
end

end

File.open("MyFile", "w") do |file|
    Table.new.table do |line|
        file.write "#{line}\n"
    end
end 
```

第 11 行的并行赋值尝试将 lambda 设置为 operation 并将字符串设置为 op_label。实际上，在第 26 行，我想将 lambda 应用于 op1 和 op2 局部变量。

但我收到以下错误：

```
./operation_table.rb:15:in `table': undefined local variable or method `mul_operation' for #<Table:0x00000000f1fc48> (NameError)
    from ./operation_table.rb:38:in `block in <main>'
    from ./operation_table.rb:37:in `open'
    from ./operation_table.rb:37:in `<main>' 
```

有没有办法在保持并行分配的同时纠正它？提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-19T11:52:22.100

`add_operation`和`mul_operation`是局部变量，在函数外部声明，函数不能访问`table`。

您可以在表函数中声明它，或存储为类变量。

```
def table(...)
  add_operation = lambda { |op1, op2| op1 + op2 }
  mul_operation = lambda { |op1, op2| op1 * op2 }
  ...
end 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-19T12:02:55.270

对于二进制操作这样简单的事情，您不需要使用 lambda，定义一个`operator_symbols`包含映射的哈希`operator_string => operator_symbol`并以这种方式使用它：

```
operand1.send(operator_symbols[operator_string], operand2) 
```

# .net - 如何以编程方式检查 oracle 版本

> ID：12973640
> 
> 赞同：3
> 
> 时间：2012-10-19T11:48:54.400
> 
> 标签：.net, oracle

我有一个小`.NET 3.5`程序在尝试连接到 Oracle 数据库时会引发错误，如果它无法访问`Oracle client DLL oci.dll`或`oracle DLL`版本太旧。消息是：

```
System.Data.OracleClient requires Oracle client software version 8.1.7 or greater. 
```

但是，异常会导致程序崩溃。所以我想在程序启动时进行测试，并在需要时优雅地终止它，并有一条消息通知用户他需要`update/install/fix`安装`Oracle Client`. 我在堆栈跟踪中看到了该方法`System.Data.OracleClient.OCI.DetermineClientVersion()`，但它似乎不公开。任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T13:28:51.953

不幸的是，该例程并不公开。你可能会破解你的方式。否则，此页面包含一些替代方案；

[https://forums.oracle.com/forums/thread.jspa?threadID=1089440&tstart=15](https://forums.oracle.com/forums/thread.jspa?threadID=1089440&tstart=15)

我特别喜欢读取 TNSPING.EXE 二进制文件并从中确定 ClientVersion 的那个 ;-)

# php - php中的全局变量

> ID：12973644
> 
> 赞同：4
> 
> 时间：2012-10-19T11:49:13.253
> 
> 标签：php, database, global

我有一个类`userdb`，我在其中声明了一个返回与数据库的连接的函数：

```
return $con = new PDO("mysql:host=$host;dbname=$db", $user, $pass); 
```

我有各种功能，甚至跨其他类，我必须访问`$con`（例如，传递查询或获取数据），但我不能访问这个变量。

有没有更好的方法来定义和使用数据库类？请记住，我还有其他需要访问该课程的`userdb`课程。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-19T11:58:53.070

我建议您为此使用**[单例模式](http://en.wikipedia.org/wiki/Singleton_pattern)**：

在您的 userdb 类中，声明一个静态属性`$scon`：

```
private static $scon; 
```

并假设您上面提到的函数是 named `createConnection()`，您应该创建以下静态方法：

```
public static function connect() {
    if (empty(self::$scon)) {
         $instance = new userdb();
         self::$scon = $indtance->createConnection(); 
    }
    return self::$scon; 
} 
```

有了这个，您将能够通过以下方式访问您的 userdb 连接：

```
userdb::connect(); 
```

此外，由于这是一个单例，它只会连接一次，并使用该连接直到脚本结束。

**注意（关于依赖注入）：**由于@KevinM1 提到了*Dependency Injection*，我必须补充一点，它也是一种可能的、非常优越的解决方案。它要求您使用数据库连接为所有类创建 setConnection() 方法（或抽象祖先），并且在这些类的实例化期间，您可以使用*工厂*将所需的连接添加到对象。这应该包含在一些*类加载器*中，这与您的模型结构不同。

看，小菜一碟，但对于小而快的开发，我会坚持使用 Singleton ;)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-19T11:52:07.920

如果它在一个类中，将实例存储在一个属性中：

```
class userDB
{

   public $dbCon = false;//because you want to access the instance 
   //from outside the class, I have made the property public

    function connect()
   {

      $con = new PDO("mysql:host=$host;dbname=$db", $user, $pass);

      $this->dbCon = $con;

   }

} 
```

要在课堂外访问它：

`$useDBInstance->dbCon;`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-19T11:56:55.210

好吧，$con 已经是一个对象，因为它正在实例化一个新的 PDO 对象。除非您尝试向 PDO 对象添加功能，否则包装它是没有意义的。

也就是说，与其他对象共享您的 userdb/PDO 对象（取决于您是否坚持使用包装器）的最佳方法是使用**Dependency Injection**。这是一个花哨的术语，用于将您的数据库传递给任何需要它的对象。由于对象在 PHP 中默认通过引用传递，如果您首先创建 db 对象，则所有接收它作为构造函数/方法参数的对象都将使用同一个实例。

编辑：[链接到依赖注入实现](https://stackoverflow.com/questions/2255771/how-can-i-use-dependency-injection-in-simple-php-functions-and-should-i-bothe)

EDIT2：澄清小项目中的DI-

正常的 DI 模式通常需要一个称为 DI Container 的特殊对象。这是一个特殊用途的对象，它会自动将依赖注入到需要它的对象中。对于小型项目，这是矫枉过正的。DI 的简单、低复杂度版本很简单：

```
class SomeClass {
    protected $db;

    public function __construct($db) {
        $this->db = $db;
    }
}

class SomeClass2 {
    public function SomeMethod($db) {
        // do something with the db
    }
}

$db = new PDO(/* connection string */);

$obj = new SomeClass($db, /* other constructor args */);

// or

$obj2 = new SomeClass2(/* constructor args */);
$obj2->someMethod($db, /* method args */); 
```

神奇的是，由于在 PHP 中对象默认通过引用传递，$obj 和 $obj2 使用相同的数据库连接。

整个想法是不要通过使用静态方法来破坏范围或封装，并确保类和它们的方法预先知道它们需要什么才能工作。

单身人士则完全相反。它们是通过绕过作用域的静态方法访问的，并且由于它们被调用而不是传递，它们永远不会出现在方法签名中，因此任何不熟悉代码的人都不会意识到隐藏的要求。 [即使是 Erich Gamma（帮助编纂单例模式的人之一）也对此感到遗憾](http://webcache.googleusercontent.com/search?q=cache:f4rX0gDGV6IJ:www.informit.com/articles/article.aspx%3Fp%3D1404056+&cd=1&hl=en&ct=clnk&gl=us&client=firefox-a)：

> 我赞成放弃 Singleton。它的使用几乎总是一种设计气味。

在 PHP 中，没有共享内存的概念，并且脚本每次请求执行一次，想要使用单例的唯一原因是可以轻松访问单个资源。由于对象是通过引用传递的，一个实例自然可以与多个对象共享。从那里开始，它是关于良好的设计和授权。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-19T11:52:00.637

```
return $this->con 
```

从你的班级以这种方式返回并以这种方式调用它..

```
$this->classObject->con->prepare(); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-19T12:18:32.803

查看我的**视频教程 + 代码以**[获得全局 PHP 变量](http://nativephp.com/archives/4)的替代方案。

**你在那里做错了。**如果您计划在函数中创建连接并将其存储在那里，则需要使用静态变量。**否则，您将继续连接每个函数调用。**我的教程解释了常规函数中静态变量的这个概念。

*如果还不够清楚，请告诉我，我会尽力回答您的问题。*

这是一些伴随此的代码：

```
/**
* Arguments are none or [$db, [$user, [$pass[, $host]]]].
*
* @return PDO
*/
function PdoDb(){
    static $con = null; // I'm explicit :)
    // Every time you pass Arguments you reconnect
    if(func_num_args()){
        $args = array_pad(func_get_args(), 4, null);
        list($db, $user, $pass, $host) = $args;
        if(empty($user)) $user = 'root';
        if(empty($host)) $host = 'localhost';
        $con = new PDO("mysql:host={$host};dbname={$db}", $user, $pass);
    }
    if(empty($con)){
        trigger_error('Provide arguments to connect first.', E_USER_ERROR);
        return null;
    }
    return $con;
}

// First run (provide arguments to connect)
PdoDb($db, $user, $pass, $host);
PdoDb($db); // Works if you connect root@localhost with no password

// From here on (it returns PDO)
PdoDb()->DoStuffOfPdo(); 
```

一旦连接，它就会保持这种状态。但是您可以通过提供参数随意重新连接。

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2012-10-19T11:57:59.693

使用单例类实现

```
class connectdb
{
    protected static $_instance = NULL;

    private function __construct()
    {
    }

    public function getinstance()
    {
     if (null === self::$_instance) {
            self::$_instance = new self();
        }

        return self::$_instance;
    }
    public function connect()
    {
     $this->connection =new PDO("mysql:host=$host;dbname=$db", $user, $pass);

    }

} 
```

* * *

## 回答 #7

> 赞同：-4
> 
> 时间：2012-10-19T11:55:43.147

要在类函数或独立函数中使用变量，您需要放置一个全局关键字

```
$conn=mysql_connect(); 
   function test(){
      global $conn;
   } 
```

now`$conn`将在 test 函数的范围内可用，并且在脚本顶部定义时将在任何地方可用。对于类，您也需要做同样的事情，创建一个类的对象并在函数中将其声明为全局

# javascript - 滚动以在jquery中为选定的锚点设置动画

> ID：12973646
> 
> 赞同：0
> 
> 时间：2012-10-19T11:49:25.300
> 
> 标签：javascript, jquery

我有一个简单的 JS 函数，它通过 id 动画页面滚动到选定的锚点

我页面中的所有锚点都有不同的偏移值和位置提示：我使用砌体效果但无法正常工作

```
function scrollToAnchor(aid) {
    var aTag = $("a[id='" + aid + "']");
    $('html,body').animate({ scrollTop: aTag.position().top  }, 'slow');
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T12:17:12.740

您应该使用偏移量而不是位置（）。

但我根据经验知道，Masonry 默认情况下不使用绝对位置和左上角，而是使用 css3-transform 代替。这意味着 .left 和 .top 将输出 0 而不是 css3-transform-value。

# java - 在用户触摸屏幕的地方放置对话框

> ID：12973647
> 
> 赞同：3
> 
> 时间：2012-10-19T11:49:29.940
> 
> 标签：java, android, dialog, touch

> **可能重复：**
> [在屏幕的任何位置显示 AlertDialog](https://stackoverflow.com/questions/5469005/show-alertdialog-in-any-position-of-the-screen)

如您所知，Default`Dialog`具有`Gravity`诸如等属性`Right`，`Top`但是是否可以将 Dialog 放置在用户触摸屏幕的位置而不是默认重力属性？

使用来自 onTouch(...) 方法或类似方法的轻敲 x 和 y 坐标，有可能吗？

例如，我在屏幕上触摸 (50, 50) x 和 y 坐标，可能不在同一个位置，而是在靠近该触摸点的任何位置。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-19T11:57:25.770

从事件（例如 onTouchListener）中获取动作的坐标，然后使用对话框的布局参数来设置位置

```
WindowManager.LayoutParams params = myDialog.getWindow().getAttributes();
params.x = 300;
params.y = 300;
myDialog.getWindow().setAttributes(params); 
```

# javascript - HTML5 画布，用户绘图调整大小和旋转

> ID：12973648
> 
> 赞同：0
> 
> 时间：2012-10-19T11:49:35.317
> 
> 标签：javascript, html, canvas, html5-canvas

我有一个画布，用户可以用某种笔在上面画画。画布高度略大于宽度。实际大小取决于几个变量。我想让用户能够旋转他/她的绘图。我正在创建一个新画布，在其上绘制旋转的旧画布。

以下是我如何进行 180 脱脂。

```
if(rotation==180){
    ctx.translate(canvas.width/2, canvas.height/2);
    ctx.rotate(Math.PI);
    ctx.translate(-canvas.width/2, -canvas.height/2);
    ctx.drawImage(drawing,0,0);
} 
```

现在对于 90 脱脂，我还必须调整大小，否则它将不再适合。我什至不知道从哪里开始。关于如何做到这一点的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-20T16:37:10.183

你可以使用 CSS3 进行旋转：比如

```
h1
{
rotation-point:50% 50%;
rotation:180deg;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T09:09:37.880

看到这个帖子

[HTML5画布图像向左旋转向右旋转](https://stackoverflow.com/questions/12912818/html5-canvas-image-rotate-left-rotate-right)

[http://phptechworld.blogspot.in/2012/10/html5-canvas-image-rotation.html](http://phptechworld.blogspot.in/2012/10/html5-canvas-image-rotation.html)

# c# - 表单中的自动完成字段？[]

> ID：12973649
> 
> 赞同：-1
> 
> 时间：2012-10-19T11:49:35.537
> 
> 标签：c#, asp.net-mvc-3, linq, forms

我使用 c# MVC3 & razor、Entity Framework 和 Linq。

我有一个表单，有两个字段，第一个是**Client ID** ，第二个是**Store Name**。我想，当用户输入 ID 时，我的 StoreName 字段会自动填充......数据将来自存储这两个数据的数据库。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T12:01:55.020

你可以使用 AJAX。因此，设置一个以客户端 ID 作为参数的控制器操作，它将查询您的数据库并将相应的商店名称作为 JSON 结果返回。然后订阅`.blur`包含商店 id 的文本输入的事件并向控制器操作发送 AJAX 调用以填充第二个输入字段。

是的，我知道，毫无意义的jibber-jabber，给我codez。

这里：

```
public ActionResult GetStoreName(int clientId)
{
    // of course thath's just an example here. I have strictly no idea
    // what database access technology you are using, how your models look like
    // and so on. Obviously you will have to adapt this query to your data model.
    var client = db.Clients.FirstOrDefault(x => x.Id == clientId);
    if (client == null)
    {
        return HttpNotFound();
    }

    return Json(new { storeName = client.Store.Name }, JsonRequestBehavior.AllowGet);
} 
```

现在假设以下视图：

```
<div>
    @Html.LabelFor(x => x.ClientId)
    @Html.TextBoxFor(x => x.ClientId, new { id = "clientId", data-url = Url.Action("GetStoreName") })
</div>
<div>
    @Html.LabelFor(x => x.Store.Name)
    @Html.TextBoxFor(x => x.Store.Name, new { id = "storeName" })
</div> 
```

在一个单独的 javascript 文件中，您可以订阅[`.blur`](http://api.jquery.com/blur/)第一个文本框的事件，并触发向控制器发送 AJAX 请求，将用户输入的客户端 ID 发送给控制器。在成功回调中，您将使用 AJAX 调用的结果更新第二个文本字段：

```
$(function() {
    $('#clientId').blur(function() {
        var clientId = $(this).val();
        $.ajax({
            url: $(this).data('url'),
            type: 'GET',
            cache: false,
            data: { clientId: clientId },
            success: function(result) {
                $('#storeName').val(result.storeName);
            }
        });
    });
}); 
```

# c# - 公共功能无法正常工作

> ID：12973650
> 
> 赞同：0
> 
> 时间：2012-10-19T11:49:39.657
> 
> 标签：c#, winforms, function, public

我有以下两段代码，请看一下，我指出了哪里出错了。我删除了调用第二个窗口的函数，它们在这里没有意义。

一是主窗体，这个窗体调用了二窗体：

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Windows.Forms;
using System.Runtime.InteropServices;

namespace STP_Design
{
    public partial class STP2Main : Form
    {
        public STP2Main()
        {
            InitializeComponent();
            tabControl1.SelectedTab = tabPageDeviceManager;
        }
        private void pictureBox1_Click(object sender, EventArgs e)
        {
            MenuForm MDIMF = new MenuForm();
            MDIMF.MdiParent = this;
            MDIMF.StartPosition = FormStartPosition.Manual;
            MDIMF.Location = new Point(3, 50);
            MDIMF.Show();
            tabControl1.Visible = false;
        }

        public void set()
        {
            tabControl1.Visible = true; // This statement executes, but does not result in anything I'd expect. The debugger tells me the visibility is false.
            tabControl1.BringToFront();
        }
   }
} 
```

和第二种形式，我关闭并应该更新第一种形式：

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Windows.Forms;

namespace STP_Design
{
    public partial class MenuForm : Form
    {
        public MenuForm()
        {
            InitializeComponent();

            this.BringToFront();
        }

        private void button1_Click(object sender, EventArgs e)
        {
            STP2Main stp = new STP2Main();
            stp.set();
            this.Close();
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T11:53:54.427

您是在主窗体的*新*`set`版本上调用该方法，而不是在您可能已经向用户显示的版本上调用该方法。

 *您需要做的是从菜单窗体的属性中获取*当前**主*窗体`MdiParent`，然后调用该方法。

 *```
// In menu form
private void button1_Click(object sender, EventArgs e)
{
    var mainForm = this.MdiParent as STP2Main;
    if (mainForm != null)
        mainForm.set();
    this.Close();
} 
```**

# ios - 我如何知道是否启用了 iCloud 备份？

> ID：12973653
> 
> 赞同：1
> 
> 时间：2012-10-19T11:49:42.043
> 
> 标签：ios, icloud

我如何以编程方式知道用户是否激活了 iCloud 备份？我不是在谈论允许使用 URLForUbiquityContainerIdentifier 的特定应用商店数据或文档。我说的是一般备份（所有设备），类似于 iTunes 同步。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T18:25:43.923

不，你不能。而且我不知道你为什么需要知道......

# vb.net - VB.NET - 循环跳过列表框中的项目

> ID：12973654
> 
> 赞同：1
> 
> 时间：2012-10-19T11:49:43.447
> 
> 标签：vb.net, loops

我有一个列表框，其中列出了目录（不是本地的，它是通过网络）。我正在尝试遍历该列表框并删除任何空目录。但是，我注意到它只是跳过了一些空目录。我发现如果我运行循环 3 - 5 次，它会全部获取它们，但这不是很有效。

我的循环：

```
Dim i As Integer
i = 0
While i < ListBox1.Items.Count
   If IO.Directory.GetFiles(ListBox1.Items.Item(i), "*.*").Length = 0 Then
      ListBox1.Items.RemoveAt(i)
   End If
i = i + 1
End While 
```

所以我只是想知道是否有一种更有效的方法来检查目录的内容，或者我可以用另一种方法来实现这一点，而不必多次运行循环。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T11:52:32.643

`ListBox1.Items.Count`每次都会重新评估，随着时间的推移丢失一些项目，你的循环会变得更短。一个快速的解决方案可能只是在循环时标记要删除的项目。

```
Dim toRemove As New List(Of ListBoxItem)
For Each item as ListBoxItem in ListBox1.Items
   If IO.Directory.GetFiles(item, "*.*").Length = 0 Then
      toRemove.Add(item)
   End If
Next

For Each item as ListBoxItem in toRemove
    ListBox1.Items.Remove(item)
Next 
```

（可能有更好的方法，但这是我想不到的快速解决方案）

# obfuscation - 如何避免 proguard 混淆使用 @OnStart 注释的类

> ID：12973658
> 
> 赞同：3
> 
> 时间：2012-10-19T11:50:11.100
> 
> 标签：obfuscation, netbeans-7, proguard, netbeans-platform

在基于 NetBeans Platform 7.2 的应用程序中，可以使用以下代码替换 ModuleInstall 类：

```
import org.openide.modules.OnStart;
import org.openide.modules.OnStop;

@OnStart
public final class Installer implements Runnable {

   @Override
   public void run() {
       System.out.println("enable something...");
   }

   @OnStop
   public static final class Down implements Runnable {
       @Override
       public void run() {
           System.out.println("disable something...");
       }
   }
} 
```

我的问题是，混淆后，类加载器找不到带注释的类。

在我添加的 Proguard 配置中（如此[处](https://stackoverflow.com/questions/11622212/keep-annotated-class-in-proguard)建议）

```
-keep @org.openide.modules.OnStart class * 
```

但显然这还不够或不起作用。

有人有建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-08T08:49:50.973

据我所知，您需要明确保留用于保留任何规范的注释。所以，在你的情况下，添加

```
-keep enum org.openide.modules.OnStart 
```

将允许将此注释用作选择器。如果注释选择器实际上不匹配，Proguard 确实应该包含一条警告消息。保留注释也没有任何意义，特别是如果它不是运行时保留。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-01T22:15:30.947

你试过`-keepattributes *Annotation*`吗？根据[proguard 使用情况](http://proguard.sourceforge.net/index.html#manual/usage.html)，它可能会起作用。

# eclipse - 无法使用 Eclipse 中的 DataNucleus JPACriteriaProcessor 生成元模型定义

> ID：12973662
> 
> 赞同：0
> 
> 时间：2012-10-19T11:50:19.450
> 
> 标签：eclipse, jpa, annotations, jpa-2.0, datanucleus

我正在尝试在 Eclipse 中生成元模型定义，如下所示： [http ://www.datanucleus.org/products/accessplatform/jpa/jpql_criteria.html](http://www.datanucleus.org/products/accessplatform/jpa/jpql_criteria.html)

我的项目编译器级别设置为 1.6，并且提到的 datanucleus jar 被添加到工厂路径中。当项目构建时，我收到以下错误：

```
Errors occurred during the build.
Errors running builder 'Java Builder' on project 'X'.
Could not initialize class org.datanucleus.jpa.query.JPACriteriaProcessor 
```

使用 mvn compile 时，元模型定义生成成功，可能与 Eclipse 注解处理有关。

我正在使用基于 Eclipse 4.2.1 的最新 Spring Tool Suite 3.1.0.RELEASE

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T15:08:08.893

不在工厂路径中放置 persistence-api.jar（或等效项，例如 Geronimo 规范 JPA2）？无论哪种方式，都缺少一个部门

# database - 需要的建议：向团队其他成员更新数据库

> ID：12973669
> 
> 赞同：0
> 
> 时间：2012-10-19T11:50:45.407
> 
> 标签：database, version-control, updates, auto-update

想听听你的意见。

当在团队中工作并使用版本控制系统时，某个开发人员会提交代码，这些代码取决于他对本地数据库所做的新修改。

好吧，一旦其他团队成员更新了代码，他们的本地数据库还没有准备好。

有没有很好的方法来处理这个？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-20T23:29:41.640

[Liquibase](http://www.liquibase.org/)很好，是在开发过程中管理数据库演变的正确选择 (tm)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-19T11:53:32.540

你的开发平台是什么？

为此，一些 Web 框架具有“数据库迁移”功能，例如：

1.  [Rails 迁移](http://guides.rubyonrails.org/migrations.html)
2.  [CodeIgniter 迁移类](http://codeigniter.com/user_guide/libraries/migration.html)
3.  [FuelPHP 迁移](http://docs.fuelphp.com/general/migrations.html)
4.  [Yii 框架数据库迁移](http://www.yiiframework.com/doc/guide/1.1/en/database.migration)

# scala - Scala 类构造函数局部参数

> ID：12973670
> 
> 赞同：6
> 
> 时间：2012-10-19T11:50:51.680
> 
> 标签：scala

我可以将未存储在类本身中的参数传递给 Scala 类构造函数吗？我想实现在Java中可以编写如下的功能：

```
class A {
    private final SomethingElse y;
    public A(Something x) {
          y = x.derive(this);
    }
} 
```

即类构造函数采用参数，该参数稍后使用对 的引用转换为另一个值`this`。构造函数返回后参数被遗忘。

在 Scala 中，我可以这样做：

```
class A(x: Something) {
    val y = x.derive(this)
} 
```

但这意味着它`x`存储在我想避免的类中。由于`x.derive`方法使用对 的引用`this`，我无法在伴生对象中进行转换。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-19T11:53:47.987

> 但这意味着 x 存储在我想避免的类中。

如果您在构造函数本身之外的任何地方都没有引用构造函数参数，则不会创建字段。如果您在 中引用`x`eg `toString()`，Scala 会自动`val`为您创建和分配私有的。

用于`javap -c -private A`验证实际创建的字段类型。

顺便说一句，您`this`在构造函数内部传递，这意味着`a.derive()`获取对可能未初始化的`A`. 当心！

# objective-c - 在iOS5中多行渲染UILabel？

> ID：12973674
> 
> 赞同：0
> 
> 时间：2012-10-19T11:51:15.063
> 
> 标签：objective-c, ios5, uilabel

我正在尝试将我`UILabel`的渲染成多行。我试过了：

```
 CGRect rect2 = CGRectMake(100, 45, 150, 60);
    FontLabel *addresLbl1 = [[FontLabel alloc] initWithFrame:rect2
                                                      fontName:@"arial" pointSize:12.0f];
    //#006000
    addresLbl1.textColor = [UIColor colorWithRed:84/255.0 green:84/255.0 blue:84/255.0 alpha:1.0];
    addresLbl1.text = @"401 King St\\nToronto, Ontario, M5V1K1\\nCanada"; 
    //[addresLbl1 setTextAlignment:UITextAlignmentCenter];
    addresLbl1.backgroundColor = nil;
    addresLbl1.opaque = NO;
    [cell.contentView addSubview:addresLbl1];
    [addresLbl1 release]; 
```

但它呈现为**401 King St\nToronto, Ontario, M5V1K1\nCanada** 请注意，此标签已添加到**UITableView**的单元格上。我需要从字符串中 '\n' 的位置换行，这个字符串将来自服务器，所以 '\n' 的位置可能会有所不同

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T12:05:48.827

you need to first set numberOfLines to 0, and then

```
unichar chr[1] = {'\n'};
NSString *singleCR = [NSString stringWithCharacters:(const unichar *)chr length:1];
[yourLabel setText:[NSString stringWithFormat:@"new%@line",singleCR]]; 
```

this will ensure what you wanted.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T12:11:36.923

你不应该使用双反斜杠。

```
\\ is the code used for \, so \\n will be parsed and printed as \n 
```

所以你的代码应该是这样的：

```
addresLbl1.text = @"401 King St\nToronto, Ontario, M5V1K1\nCanada";
addresLbl1.numberOfLines = 0; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-19T11:57:28.470

默认情况下，UILabel 将其属性 numberoflines 设置为 1，这意味着您的文本将在一行中呈现。尝试将该属性设置为 0，如文档所示

> 此属性控制要使用的最大行数，以使标签的文本适合其边界矩形。此属性的默认值为 1。要删除任何最大限​​制并根据需要使用尽可能多的行，请将此属性的值设置为 0。
> 
> 如果使用此属性限制文本，则任何不适合最大行数和标签边界矩形内的文本都将使用适当的换行模式截断。
> 
> 当使用 sizeToFit 方法调整接收器的大小时，调整大小会考虑存储在此属性中的值。例如，如果此属性设置为 3，则 sizeToFit 方法会调整接收器的大小，使其大到足以显示三行文本。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-19T11:58:51.307

对于多行，您可以使用 UILabel 属性`numberOfLines`作为

```
label.numberOfLines = 3; 
```

在您的情况下，您的文本只能放在一行中，所以如果您希望它在多行中更好，您应该定义 3 个不同的标签。

# java - 使用带有线程的侦听器

> ID：12973678
> 
> 赞同：2
> 
> 时间：2012-10-19T11:51:32.990
> 
> 标签：java, multithreading, thread-safety, listener

假设我有一个对象 Foo，它希望使用侦听器接口从线程的几个正在运行的实例中获取通知。例如

界面：

```
public interface ThreadListener {
   public void onNewData(String blabla);
} 
```

Foo类：

```
public class Foo implements ThreadListener {
   public Foo() {
      FooThread th1 = new FooThread();
      FooThread th2 = new FooThread();
      ...

      th1.addListener(this);
      th2.addListener(this);
      ...

      th1.start();
      th2.start();
      ...
   }

   @Override
   public void onNewData(String blabla) {
     ...
   }
} 
```

主题：

```
public FooThread extends Thread {
   private ThreadListener listener = null;

   public void addListener(ThreadListener listener) {
      this.listener = listener;
   }

   private void informListener() {
      if (listener != null) {
         listener.onNewData("Hello from " + this.getName());
      }
   }

   @Override
   public void run() {
     super.run();

     while(true) {
        informListener();
     }
   }
} 
```

在最坏的情况下，onNewData(..) 会被多个线程同时调用。Foo会发生什么？会不会崩溃？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-19T11:55:12.230

*   您的`Foo`类没有状态（字段），因此除非它使用外部共享资源（例如文件...），否则它是线程安全的
*   从构造函数启动线程通常是一个坏主意，尽管在无状态对象的情况下，我想这很好
*   如果`onNewData`不访问共享数据，它将按预期工作，如果这样做，结果将取决于方法的实现方式。

# mysql - 区分大小写的数据库查询

> ID：12973682
> 
> 赞同：2
> 
> 时间：2012-10-19T11:51:39.470
> 
> 标签：mysql, sql, case-sensitive, exact-match

> **可能重复：**
> [mysql 区分大小写的查询](https://stackoverflow.com/questions/7857669/mysql-case-sensitive-query)

'正在开发一个 PHP 脚本，该脚本检查数据库中的一些值。到目前为止，我认为它工作正常，但我发现了一个问题。

查询不是在寻找特定的字符。

所以如果我使用这个查询：

```
SELECT *
FROM `facilitydb_login`
WHERE
facilitydb_login.`password` = 'PASS' 
```

我想要结果，因为密码是PASS。但是，如果您填写 pass（小写），则会返回相同的条目。

我怎样才能让它区分大小写？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-19T11:56:57.113

您应该使用区分大小写的排序规则，例如

```
SELECT *
FROM `facilitydb_login`
WHERE facilitydb_login.`password` collate latin1_general_cs = 'PASS' 
```

名称中的 CS 表示它区分大小写

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-19T11:55:07.527

你可以使列区分大小写

假设您正在使用 mysql 数据库

```
ALTER TABLE facilitydb_login 
CHANGE password `password` VARCHAR(100) BINARY NOT NULL; 
```

或者如果你想成为 select 语句的一部分，那么

```
SELECT *
FROM `facilitydb_login`
WHERE BINARY 
facilitydb_login.`password` = 'PASS' 
```

# java - 将 TIFF 转换为 JPEG 在 Linux 中不起作用 - 无法为此操作渲染 RenderedOp

> ID：12973688
> 
> 赞同：1
> 
> 时间：2012-10-19T11:52:00.450
> 
> 标签：java, linux, jpeg, tiff, jai

我必须将 tif 文件转换为 jpeg（尽管我意识到它也无法将 tif 转换为任何扩展名）。我的代码在我的本地 Windows 机器上正常工作，但在我的开发环境（这是一台 CentOs 机器）上不起作用。这是我的代码（如您所见非常简单）：

```
public static boolean convertTIFFToJPEG(final File in, final File out) {
    try {
        final PlanarImage image = JAI.create("ImageRead", in);

        final ParameterBlockJAI storeOperation = new ParameterBlockJAI(
                    "FileStore");
        storeOperation.addSource(image);
        storeOperation.setParameter("filename", out.getPath());
        storeOperation.setParameter("format", "jpeg");
        JAI.create("FileStore", storeOperation);
    } catch (final IllegalArgumentException e) {
        return false;
    }

    return true;
} 
```

此代码在 Windows 中运行良好，但是当我尝试在 linux 上执行它时出现此错误：

```
Caused by: java.lang.RuntimeException: - Unable to render RenderedOp for this operation.
    at javax.media.jai.RenderedOp.createInstance(RenderedOp.java:827)
    at javax.media.jai.RenderedOp.createRendering(RenderedOp.java:867)
    at javax.media.jai.RenderedOp.getRendering(RenderedOp.java:888)
    at javax.media.jai.RenderedOp.createInstance(RenderedOp.java:799)
    at javax.media.jai.RenderedOp.createRendering(RenderedOp.java:867)
    at javax.media.jai.RenderedOp.getRendering(RenderedOp.java:888)
    at javax.media.jai.JAI.createNS(JAI.java:1099)
    at javax.media.jai.JAI.create(JAI.java:973)
    at javax.media.jai.JAI.create(JAI.java:1395)
    at example.TIFFUtils.convertTIFFToJPEG(TIFFUtils.java:97) 
```

如果我调试应用程序，试图找出有关异常的更多信息，我只会得到它的原因是“无法为此操作呈现 RenderedOp”。

为了解决这个问题，我尝试了不同版本的 Oracle JDK/JRE。目前我正在使用 sdk1.6_20，但我也尝试了最后一个和其他以前的发行版。

另一方面，我尝试了很多可能的方法来使用 JAI 和 ImageIO 来制作相同的过程（TIFF->JPEG）。这是我用于 ImageIO 的代码：

```
public static boolean convertTIFFToJPEG2(final File in, final File out) {
    try {
        ImageOutputStream ios = null;
        ImageWriter writer = null;

        // find an appropriate writer
        Iterator<ImageWriter> it = ImageIO.getImageWritersByFormatName(JPEG_FORMAT);
        if (it.hasNext()) {
            writer = (ImageWriter)it.next();
        } else {
            return false;
        }

        ios = ImageIO.createImageOutputStream(out);
        writer.setOutput(ios);
        JPEGImageWriteParam writeParam = new JPEGImageWriteParam(Locale.ENGLISH);

        BufferedImage image = ImageIO.read(in);
        IIOImage iioImage = new IIOImage(image , null, null);

        // write it!
        writer.write(null, iioImage, writeParam);
    } catch (final IllegalArgumentException e) {
        return false;
    } catch (IOException e) {
        return false;
    }

    return true;
} 
```

我得到了相同的结果：它只在 Windows 中有效，但在 linux 中引发了该异常。在这种情况下，下一条指令返回 null，因此变量 'image' 不包含任何内容。

```
BufferedImage image = ImageIO.read(tiffFile); 
```

有什么新想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T12:52:05.310

我不认为 JRE 的所有实现（例如 OpenJDK）都包含一个可以在 JAI 中默认使用的 Jpeg 编码器。我不知道这是否是你的问题。无论如何，使用 JAI Image IO Tools 扩展可能会取得更好的成功：

*   [http://java.net/projects/imageio](http://java.net/projects/imageio)
*   [http://www.oracle.com/technetwork/java/current-142188.html](http://www.oracle.com/technetwork/java/current-142188.html)

这提供了允许 JAI 使用 ImageIO 库进行图像解码/编码的集成，这通常比原始 JAI 处理有很大改进。

要进一步调试您的问题，您可能会尝试临时输出为 JPEG 以外的图像格式，以查看您的问题是否特定于 JPEG 编码。

# ios - sizeToFit 和约束

> ID：12973689
> 
> 赞同：3
> 
> 时间：2012-10-19T11:52:06.360
> 
> 标签：ios, ios6, autolayout

我有一个看法：

![我的观点](../Images/f123a9391c4ba3c6b98973635cbd9425.png)

label1 和 label2 之间存在布局约束。按下按钮将文本视图中的文本添加到 label1。之后，标签 1 被调整大小以适合文本（调用 sizeToFit）。调整大小后，约束似乎不起作用：

![约束](../Images/bfb599600208b5923d50694c8061f259.png)

有人知道如何使约束起作用吗？

我的代码：

```
@interface ViewController ()
{
    CGFloat _width;
}
@end

@implementation ViewController

- (void)viewDidLoad
{
    [super viewDidLoad];
}

- (void) viewDidAppear:(BOOL)animated
{

    _width = self.l1.frame.size.width;
}

- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];
    // Dispose of any resources that can be recreated.
}
- (IBAction)addText:(id)sender {
    self.l1.text = [NSString stringWithFormat:@"%@ %@", self.l1.text, self.text.text];
    self.l1.frame = CGRectMake(self.l1.frame.origin.x, self.l1.frame.origin.y, _width, 0);
    [self.l1 sizeToFit];
}
@end 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-19T12:03:58.453

我找到了原因：高度约束等于标签 1 的 40。当我将其更改为大于或等于时，所有其他约束都可以正常工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-10T14:29:53.140

我有一个类似的问题，其中一个 UIImageView 位于几个 UILabelViews 的顶部。约束设置为在顶部图像和下面的标签堆栈之间保持很小的距离。

问题是，当将未知图像大小加载到 UIImage 中时，高度会发生变化，但要跟随的标签并没有向下推，而是被图像覆盖。

我试图删除 UIImageView 的设置高度，但 XCode 不允许我这样做。

**我通过将显式 UIImageview 高度约束的优先级降低到 1 解决了这个问题。**

之后，标签沿着 ViewController 向下移动，图像和它们之间的空间均匀，正如预期的那样。

# python - 计算当前月份的星期日数

> ID：12973691
> 
> 赞同：9
> 
> 时间：2012-10-19T11:52:18.990
> 
> 标签：python

如何在 Python 中获取当月的星期日数？

有人对此有任何想法吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-19T12:08:56.017

这为您提供了您想要的当前月份的星期日数：

```
import calendar
from datetime import datetime

In [367]: len([1 for i in calendar.monthcalendar(datetime.now().year,
                                  datetime.now().month) if i[6] != 0])
Out[367]: 4 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2016-04-04T10:48:56.697

我碰巧需要一个解决方案，但对这里的解决方案不满意，所以我想出了自己的：

```
import calendar

year = 2016
month = 3
day_to_count = calendar.SUNDAY

matrix = calendar.monthcalendar(year,month)

num_days = sum(1 for x in matrix if x[day_to_count] != 0) 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-10-19T12:26:32.333

我的看法：（不必担心在正确的月份等......）

```
from calendar import weekday, monthrange, SUNDAY

y, m = 2012, 10

days = [weekday(y, m, d+1) for d in range(*monthrange(y, m))]
print days.count(SUNDAY) 
```

或者，正如[@mgilson](https://stackoverflow.com/users/748858/mgilson)所指出的，您可以取消 list-comp，并将其全部包装为生成器：

```
sum(1 for d in range(*monthrange(y,m)) if weekday(y,m,d+1)==SUNDAY) 
```

我想，你可以输入一个：

```
from collections import Counter
days = Counter(weekday(y, m, d + 1) for d in range(*monthrange(y, m)))
print days[SUNDAY] 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-10-19T12:02:00.403

我会这样做：

```
import datetime

today = datetime.date.today()
day = datetime.date(today.year, today.month, 1)
single_day = datetime.timedelta(days=1)

sundays = 0
while day.month == today.month:
    if day.weekday() == 6:
        sundays += 1
    day += single_day

print 'Sundays:', sundays 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-19T12:11:04.897

另一个使用`calendar`and 的例子`datetime`：

```
import datetime
import calendar
today = datetime.date.today()
m = today.month
y = today.year
sum(1 for week in calendar.monthcalendar(y,m) if week[-1]) 
```

也许一个稍微快一点的方法是：

```
first_day,month_len = monthrange(y,m)
date_of_first_sun = 1+6-first_day
print sum(1 for x in range(date_of_first_sun,month_len+1,7)) 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-19T12:06:38.047

```
import calendar

MONTH = 10    
sundays = 0
cal = calendar.Calendar()

for day in cal.itermonthdates(2012, MONTH):
    if day.weekday() == 6 and day.month == MONTH:
        sundays += 1 
```

PAY ATTENTION: Here are the Calendar.itermonthdates's docs:

> Return an iterator for one month. The iterator will yield datetime.date values and will always iterate through complete weeks, so it will yield dates outside the specified month.

That's why `day.month == MONTH` is needed

If you want the weekdays to be in range 0-6, use `day.weekday()`, if you want them to be in range 1-7, use `day.isoweekday()`

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-10-19T12:04:26.800

您可以使用 ISO 周数执行此操作：

```
from datetime import date
bom = date.today().replace(day=1)                 # first day of current month
eom = (date(bom.year, 12, 31) if bom.month == 12 else
       (bom.replace(month=bom.month + 1) - 1))    # last day of current month
_, b_week, _ = bom.isocalendar()
_, e_week, e_weekday = eom.isocalendar()
num_sundays = (e_week - b_week) + (1 if e_weekday == 7 else 0) 
```

一般来说，对于一周中的某一天（1 = 星期一，7 = 星期日），计算如下：

```
num_days = ((e_week - b_week) +
            (-1 if b_weekday > day else 0) +
            ( 1 if e_weekday >= day else 0)) 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2022-01-24T20:44:36.107

我的解决方案。

以下内容受到@Lingson 回答的启发，但我认为它的循环较少。

```
import calendar

def get_number_of_weekdays(year: int, month: int) -> list:
    main_calendar = calendar.monthcalendar(year, month)
    number_of_weeks = len(main_calendar)
    number_of_weekdays = []

    for i in range(7):
        number_of_weekday = number_of_weeks

        if main_calendar[0][i] == 0:
            number_of_weekday -= 1

        if main_calendar[-1][i] == 0:
            number_of_weekday -= 1

        number_of_weekdays.append(number_of_weekday)

    return sum(number_of_weekdays)  # In my application I needed the number of each weekday, so you could return just the list to do that. 
```

# sql - 使用命名空间修改 xml

> ID：12973696
> 
> 赞同：18
> 
> 时间：2012-10-19T11:52:21.807
> 
> 标签：sql, sql-server, xml, tsql, xsd

我正在尝试在 TSQL 中修改预定义的 xml（更具体地说是 xsd）。我想将枚举限制插入 xsd 元素之一。

任务是根据一个查询示例来填充 xsd 限制：

```
create table #list(value nvarchar(100))
insert into #list values('item 1')
insert into #list values('item 2')
insert into #list values('item 3')
insert into #list values('item 4')
insert into #list values('item 5')
insert into #list values('item 6')

declare @enumeration as xml
;with xmlnamespaces('http://www.w3.org/2001/XMLSchema' as xs)
select @enumeration = (
    select value as '@value'
    from #list for xml path('xs:enumeration')
)

declare @schema xml
set @schema =
'<xs:schema xmlns="" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:msdata="urn:schemas-microsoft-com:xml-msdata" id="test">
    <xs:element name="test" msdata:IsDataSet="true" msdata:MainDataTable="Example" msdata:UseCurrentLocale="true">
        <xs:complexType>
            <xs:choice maxOccurs="unbounded">
                <xs:element name="Example">
                    <xs:complexType>
                        <xs:sequence>
                            <xs:element name="myList" minOccurs="1" nillable="false">
                                <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                        <xs:maxLength value="50" />
                                    </xs:restriction>
                                </xs:simpleType>
                            </xs:element>
                        </xs:sequence>
                    </xs:complexType>
                </xs:element>
            </xs:choice>
        </xs:complexType>
    </xs:element>
</xs:schema>'

set @schema.modify
    ('insert sql:variable("@enumeration")
    into (//xs:element[@name=''myList'']/xs:simpleType/xs:restriction)[1]')

select @schema 
```

问题是代码输出了不必要的 xmlns 属性

```
<xs:enumeration xmlns:xs="http://www.w3.org/2001/XMLSchema" value="item 1" /> 
```

任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2017-01-04T10:28:01.387

它比我希望的要丑一些。主要是因为我不能`sql:variable("@enumeration")/delete-me/node()`在`.modify()`.

我假设，您可以修改 的生成`@enumeration`，如下所示：

```
CREATE TABLE #list (value nvarchar(100));
INSERT  INTO #list
VALUES  ('item 1');
INSERT  INTO #list
VALUES  ('item 2');
INSERT  INTO #list
VALUES  ('item 3');
INSERT  INTO #list
VALUES  ('item 4');
INSERT  INTO #list
VALUES  ('item 5');
INSERT  INTO #list
VALUES  ('item 6');

DECLARE @enumeration AS xml;
WITH XMLNAMESPACES('http://www.w3.org/2001/XMLSchema' AS xs)
SELECT @enumeration = (
    SELECT value AS '@value'
    FROM #list FOR XML PATH('xs:enumeration'), ROOT('delete-me'), TYPE
); 
```

这个想法是使用`FOR XML`with `ROOT`，以便生成的命名空间位于不必要的根元素（可以跳过）。否则我们将不得不在`xs:enumeration`以后重新创建 -elements。

# 两种解决方案

## 使用`.modify()`三遍

想法：

1.  我们将所有内容`@enumeration`（带有不必要的根）插入到另一个xml中
2.  我们将所需的内容复制到正确的位置
3.  我们删除了不再需要的`@enumeration`in副本`@schema`。

```
DECLARE @schema xml;
SET @schema = '<xs:schema xmlns="" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:msdata="urn:schemas-microsoft-com:xml-msdata" id="test">
    <xs:element name="test" msdata:IsDataSet="true" msdata:MainDataTable="Example" msdata:UseCurrentLocale="true">
        <xs:complexType>
            <xs:choice maxOccurs="unbounded">
                <xs:element name="Example">
                    <xs:complexType>
                        <xs:sequence>
                            <xs:element name="myList" minOccurs="1" nillable="false">
                                <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                        <xs:maxLength value="50" />
                                    </xs:restriction>
                                </xs:simpleType>
                            </xs:element>
                        </xs:sequence>
                    </xs:complexType>
                </xs:element>
            </xs:choice>
        </xs:complexType>
    </xs:element>
</xs:schema>';

SET @schema.modify('insert sql:variable("@enumeration")
    into /');

SET @schema.modify('declare namespace xs="http://www.w3.org/2001/XMLSchema";
insert /delete-me/node()
    into (//xs:element[@name=''myList'']/xs:simpleType/xs:restriction)[1]');

SET @schema.modify('delete /delete-me');

SELECT  @schema;

DROP TABLE #list; 
```

## `.query()`去创造`@schema`

如果您可以更改`@schema`创建的部分，则可以`@schema`直接生成`.query()`from `@enumeration`：

```
DECLARE @enumeration AS xml;
WITH XMLNAMESPACES('http://www.w3.org/2001/XMLSchema' AS xs)
SELECT @enumeration = (
    SELECT value AS '@value'
    FROM #list FOR XML PATH('xs:enumeration'), ROOT('delete-me'), TYPE
);

DECLARE @schema xml;
SET @schema = @enumeration.query('<xs:schema xmlns="" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:msdata="urn:schemas-microsoft-com:xml-msdata" id="test">
    <xs:element name="test" msdata:IsDataSet="true" msdata:MainDataTable="Example" msdata:UseCurrentLocale="true">
        <xs:complexType>
            <xs:choice maxOccurs="unbounded">
                <xs:element name="Example">
                    <xs:complexType>
                        <xs:sequence>
                            <xs:element name="myList" minOccurs="1" nillable="false">
                                <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                        <xs:maxLength value="50" />
                                        {/delete-me/node()}
                                    </xs:restriction>
                                </xs:simpleType>
                            </xs:element>
                        </xs:sequence>
                    </xs:complexType>
                </xs:element>
            </xs:choice>
        </xs:complexType>
    </xs:element>
</xs:schema>');

SELECT  @schema; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T23:28:20.940

如果 xml 不是太大，您可以进行简单的字符串替换：

```
DECLARE @schemaVARCHAR (MAX)
SET @schemaVARCHAR = CAST(@schema AS VARCHAR(MAX))
SET @schemaVARCHAR = 
    REPLACE(
        @schemaVARCHAR, 
        '<xs:enumeration xmlns:xs="http://www.w3.org/2001/XMLSchema" value="item 1" />',
        ''
    )

SET @schema = CAST(@schemaVARCHAR AS XML) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-23T15:09:51.363

如果您的 XML 不是太复杂，为什么不使用 FOR XML EXPLICIT 代替呢？

另一种解决方法是生成没有命名空间的 XML，然后将其添加。

# sql - Hibernate 查询日期仅比较年份和月份

> ID：12973700
> 
> 赞同：6
> 
> 时间：2012-10-19T11:52:33.360
> 
> 标签：sql, hibernate, hql

我需要从一个表中获取一些记录，该表的列`birthDate`是`Date`（没有时间）。我只需要通过比较年份和月份来过滤记录。例如，我想要所有出生于 1990 年 3 月的用户。那一天并不重要。

你如何处理它？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-19T12:20:50.713

您可以使用`from Entity where to_char(birthDate,'YYYY/MM') = '1990/03'` 这将适用于 HQL

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-10-19T12:00:57.487

你可以试试这个

```
 select * from table where month(birthdate)=03 and year(birthdate)=1990 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-04-20T16:06:04.097

这是一个适合我的 HQL 查询

```
from Person as p where year(p.birthDate)=year(:bDate) and month(p.birthDate)=month(:bDate)" 
```

bDate的类型是Date，可以传Integer

```
from Person as p where year(p.birthDate)=:bYear and month(p.birthDate)=:bMonth 
```

# django - 使用 RequireJS 构建大型 javascript 代码

> ID：12973702
> 
> 赞同：2
> 
> 时间：2012-10-19T11:52:46.110
> 
> 标签：django, backbone.js, requirejs

我对这里的 RequireJS 非常陌生，并试图学习如何采用这种结构。截至目前，我已经设法创建了一个结构如下

![ddd](../Images/36e9441be5675a28aebacef15007e746.png)

上图显示了我的代码结构。在文件夹“我的”应该包含我所有的模块的地方，我计划在每个模块中编写它自己的 models.js、views.js 以供稍后主干.js 使用

在这一点上，我有几个问题如下

1.  任何人都可以通过查看结构来判断它是一个好主意还是我应该重新考虑？

第二个问题与我应该如何管理有条件地加载我的模块有关。下面是我的 config.js 文件

```
require([
        "jquery",
        "libs/jquery-ui/js/jquery-ui-1.9.0.custom.min",
        "libs/bootstrap/js/bootstrap.min",
        "my/base/module",
        "my/vehicle/module"],

    function($, ui, bootstrap, base, vehicle) {
        //plugins have been loaded.
        base.initialize();
        vehicle.initialize();

}); 
```

我仍然不确定如何在浏览时加载模块车辆或在浏览帐户时加载模块帐户。后端是使用 django 开发的，我可以为每个模块创建几个 config.js 文件，但不确定这是否是正确的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T05:32:32.823

requireJS 的本质是模块化。如果您正在加载任何脚本，您应该将路径配置放入 rquireJS 配置部分。但是，如果您想要有条件地使用 /loading 文件。然后你必须将你的代码包装在 define module 周围。有点像这样

```
require.config({

paths:
{
    jquery: 'libs/jquery/jquery-1.7.2.min',
    jqueryui: 'libs/jquery/jquery-ui-1.8.20.min',
    bootstrap: 'libs/bootstrap/bootstrap.min',
},
shim: {
  'underscore': {
    exports: '_'
  },    
  'bootstrap': {
    deps: ['jquery'],
    exports: 'jquery'
  }
}

});

require(['app/jquery.app','jquery.bootstrap'], function (AppRouter) {
var app_view = new AppRouter;
} 
```

您的 app/jquery.app 应该是您的应用程序的起点。

您必须将其写入 main.js 文件并像这样调用它

```
<script data-main="/Scripts/main" src="/Scripts/libs/require/require.js" type="text/javascript"></script> 
```

你的 jquery.app 作为你的起点应该是这样的

```
define(['jquery','my/base/module','my/vehicle/module']],
      //plugins have been loaded.
    base.initialize();
    vehicle.initialize();
 }); 
```

请注意，在定义模块中，我没有为 jquery ui 和 bootstrap 定义要加载的任何内容。原因是因为 jquery ui 加载它自己并且它使用 jquery 语法。引导文件实际上取决于 jquery 。所以使用 shim 配置来加载 bootstrap.min.js。基本上你的配置和起点应该定义路径+起点。这就是它的制作方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-02-04T18:09:51.337

这就是我在 Python Django 框架中使用 JQuery 设置 RequireJS 的方式。在基础顶级 baset_site.html 我在“head”标签之间有以下 require.js 配置代码：

```
<script>
    requirejs.config({
        baseUrl: "{% static '' %}",
        paths: {
            jquery: './js/jslibs/jquery-1.9.1',
            jqm: './js/jslibs/jquery.mobile-1.4.0',
            ajax_redirect: './js/ajax_redirect',
            make_filt_sel: './app_namespace/js/make_filt_sel'
        },
        shim: {
            "jquery": {
                exports: '$',
            },
            "jqm": {
                deps: ['jquery'],
                exports: '$.mobile'
            },
            "make_filt_sel": {
                deps: ['jquery', 'jqm'],
                exports: 'make_filt_sel'
            }
        }
    });

</script>

{% block header_scripts %}{% endblock header_scripts %} 
```

这是我的 ajax_redirect.js

```
/*
    JQuery Ajax typically does not redirect in Django. Need middleware to
    setup "class AjaxRedirect(object):" to fix redirection.
    Reference:
        http://hunterford.me/how-to-handle-http-redirects-with-jquery-and-django/
*/

(function ( root, doc, factory ) {
    if ( typeof define === "function" && define.amd ) {
        // AMD. Register as an anonymous module.
        define( ['jquery'], function () {
            factory();
        });
    } else {
        // Browser globals
        factory();
    }
}( this, document, function ( ) {

    $(document).ajaxComplete(function(e, xhr, settings){
        if (xhr.status == 278){
            window.location.href =
                xhr.getResponseHeader("Location")
                    .replace(/\?.*$/, "?next="+window.location.pathname);
        }
    });

})); 
```

然后我通常在继承的模板中设置“block header_scripts”，如下所示：

```
{% block header_scripts %}
    {{ block.super }}

    <script>

        if ( typeof define === "function" && define.amd ) {
            // AMD {# Configure requirejs.config in base_site.html #}
            require(["./app_namespace/js/module_namespace/js_module"]);
        } else {
            // No AMD
            $.ajax({
                async:false,
                type:'GET',
                url: "{% static "app_namespace/js/make_filt_sel.js" %}",
                data:null,
                dataType:'script'
            });

            $.ajax({
                async:false,
                type:'GET',
                url: "{% static "app_namespace/js/module_namespace/js_module.js" %}",
                data:null,
                dataType:'script'
            });
        }

    </script>

{% endblock header_scripts %} 
```

这是一个使用依赖项设置 js_module.js 的示例：

```
(function ( root, doc, factory ) {
    if ( typeof define === "function" && define.amd ) {
        // AMD. Register as an anonymous module.
        define( ['jquery', 'jqm', 'ajax_redirect', 'make_filt_sel'], function () {
            factory();
        });
    } else {
        // Browser globals
        factory();
    }
}( this, document, function ( ) {
    // A bunch of code
    $.mobile.document.on( "pagebeforecreate", function(e){
        // a bunch of code
        // Shorthand for $( document ).ready()
        $(function(){
            // a bunch of code
        }); // end of $( document ).ready()
    }); // end of $(document).on( "pagebeforecreate",

})); // end of (function ( root, doc, factory ) 
```

# windows-phone-7 - 在 Windows Phone 7 中单击列表框项目时在运行时显示图像

> ID：12973704
> 
> 赞同：0
> 
> 时间：2012-10-19T11:52:47.243
> 
> 标签：windows-phone-7, listbox, runtime

我有一个列表框，我在其中显示运行时的值。但是我只想在从列表框中选择一个项目时才在列表框中显示图像。目前我在列表框中使用 DataTemplate 和 ItemTemplate 在运行时显示值（简而言之数据绑定）。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T14:09:52.310

`IsSelected`一种解决方案是向您的项目视图模型添加依赖属性，并在您点击项目时切换它。这意味着您可以选择多个项目，即一次显示多行中的图像。

使用这样的一些xaml：

```
<phone:PhoneApplicationPage.Resources>
    <convert:BooleanToVisibilityConverter x:Key="booltovisibility" />
</phone:PhoneApplicationPage.Resources>
<phone:PhoneApplicationPage.DataContext>
    <vm:MainViewModel/>
</phone:PhoneApplicationPage.DataContext>

<Border Grid.Row="1" BorderThickness="1" BorderBrush="Red">
    <ListBox ItemsSource="{Binding Items}">
        <ListBox.ItemContainerStyle>
            <Style TargetType="ListBoxItem">
                <Setter Property="HorizontalContentAlignment" Value="Stretch"/>
            </Style>
        </ListBox.ItemContainerStyle>
        <ListBox.ItemTemplate>
            <DataTemplate>
                <Border BorderThickness="1" BorderBrush="Green">
                    <Grid>
                        <Grid.RowDefinitions>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="Auto"/>
                        </Grid.RowDefinitions>
                        <i:Interaction.Triggers>
                            <i:EventTrigger EventName="Tap">
                                <i:InvokeCommandAction Command="{Binding ToggleSelected}"/>
                            </i:EventTrigger>
                        </i:Interaction.Triggers>
                        <TextBlock Grid.Row="0" Text="{Binding Text}"/>
                        <Image Grid.Row="1" Source="{Binding Image}" Visibility="{Binding IsSelected, Converter={StaticResource booltovisibility}}"/>
                    </Grid>
                </Border>
            </DataTemplate>
        </ListBox.ItemTemplate>
    </ListBox>
</Border> 
```

请注意，此 xaml 使用 Silverlight SDK 中的 System.Windows.Interactivity dll。它还使用自定义 BooleanToVisibilityConverter，这是一个 IValueConverter，可将布尔值转换为 Visibility 枚举值。

此外，我们可以`ItemViewModel`像下面这样定义一个，并在 MainViewModel 中有一个“Items”属性

```
private readonly ObservableCollection<ItemViewModel> items;
public ObservableCollection<ItemViewModel> Items { get { return items; } } 
```

这是从代码中填充的。

```
using System;
using System.Windows;
using System.Windows.Input;
using System.Windows.Media;
using System.Windows.Media.Imaging;
using Test.Commands;

namespace Test.ViewModels {
    public class ItemViewModel : DependencyObject {
        private ICommand toggleCommand;

        public ItemViewModel(string title) {
            Text = title;
            Image = new BitmapImage(new Uri("graphics/someimage.png", UriKind.Relative));
        }

        public static readonly DependencyProperty TextProperty =
            DependencyProperty.Register("Text", typeof(string), typeof(ItemViewModel), new PropertyMetadata(default(string)));

        public static readonly DependencyProperty IsSelectedProperty =
            DependencyProperty.Register("IsSelected", typeof(bool), typeof(ItemViewModel), new PropertyMetadata(default(bool)));

        public static readonly DependencyProperty ImageProperty =
            DependencyProperty.Register("Image", typeof(ImageSource), typeof(ItemViewModel), new PropertyMetadata(default(ImageSource)));

        public string Text {
            get { return (string)GetValue(TextProperty); }
            set { SetValue(TextProperty, value); }
        }

        public bool IsSelected {
            get { return (bool)GetValue(IsSelectedProperty); }
            set { SetValue(IsSelectedProperty, value); }
        }

        public ImageSource Image {
            get { return (ImageSource)GetValue(ImageProperty); }
            set { SetValue(ImageProperty, value); }
        }

        public ICommand ToggleSelected {
            get { return toggleCommand ?? (toggleCommand = new RelayCommand(o => IsSelected = !IsSelected)); }
        }
    }
} 
```

其中 RelayCommand 与[WPF Apps With The Model-View-ViewModel 设计模式](http://msdn.microsoft.com/en-us/magazine/dd419663.aspx)文章中的类似。主要区别在于 CommandManager 在 Windows Phone SDK 中不可用。

通过使用此模型，您可以点击行以选择它们，使用视图模型中的 ToggleSelected 命令，并通过再次点击它们来取消选择它们，实际上显示或隐藏图像。

# javascript - Javascript 集合

> ID：12973706
> 
> 赞同：60
> 
> 时间：2012-10-19T11:52:53.067
> 
> 标签：javascript, collections

对不起noobie问题。你能解释一下，有什么区别：

```
1\. var a = [];
   a['b'] = 1;

2\. var a = {};
   a['b'] = 1; 
```

我在互联网上找不到文章，所以写在这里。

* * *

## 回答 #1

> 赞同：204
> 
> 时间：2012-10-19T12:02:49.297

**字面量**

和分别称为数组和对象字面量`[]`。`{}`

`var x = []`简称`var x = new Array();`

并且`var y = {}`是缩写`var y = new Object();`

**数组**

数组是具有长度属性的结构。您可以通过它们的数字索引访问值。

```
var x = [] or var x = new Array();
x[0] = 'b';
x[1] = 'c'; 
```

如果你想列出你所做的所有属性：

```
for(var i = 0; i < x.length; i++)
console.log(x[i]);// numeric index based access. 
```

**性能技巧和陷阱**

**1.内部缓存length属性**

标准数组迭代：

```
for (var i = 0; i < arr.length; i++) {
    // do stuff
}; 
```

鲜为人知的事实：在上述场景中，`arr.length`在 for 循环的每一步都会读取该属性。就像你在那里调用的任何函数一样：

```
for (var i = 0; i < getStopIndex(); i++) {
     // do stuff
}; 
```

这会无缘无故地降低性能。内部缓存来拯救：

```
for (var i = 0, len = arr.length; i < len; i++) {
     // enter code here
}; 
```

[**以上就是**](http://jsperf.com/for-length-caching)证明。

**2.不要在构造函数中指定数组长度。**

```
// doing this:
var a = new Array(100);
// is very pointless in JS. It will result in an array with 100 undefined values.

// not even this:
var a = new Array();
// is the best way.

var a = [];
// using the array literal is the fastest and easiest way to do things. 
```

数组定义的测试用例可[**在此处**](http://jsperf.com/new-array-vs-literal-notation)获得。

**3.避免使用Array.prototype.push(arr.push)**

如果您正在处理大型集合，则直接分配比使用该`Array.prototype.push();`方法更快。

`myArray[i] = 0;``myArray.push(0);`根据 jsPerf.com 的[测试用例](http://jsperf.com/array-direct-assignment-vs-push/11)，比它更快。

**4\. 使用数组进行关联赋值是错误的。**

它起作用的唯一原因是因为`Array`扩展`Object`了 JS 语言核心内部的类。例如，您也可以使用`Date();`or`RegEx();`对象。这不会有什么不同。 `x['property'] = someValue` **必须**始终与**Objects**一起使用。

数组应该只有数字索引。看[这个](https://web.archive.org/web/20121023065243/http://google-styleguide.googlecode.com/svn/trunk/javascriptguide.xml?showone=Associative_Arrays#Associative_Arrays)，Google JS 开发指南！避免`for (x in arr)`循环或`arr['key'] = 5;`.

这可以很容易地备份，看看**[这里](http://jsfiddle.net/alexflav23/j36hJ/)**的例子。

```
var x = [];
console.log(x.prototype.toString.call); 
```

 将输出：`[object Array]`

这揭示了核心语言的“类”继承模式。  

```
var x = new String();
console.log(x.prototype.toString.call); 
```

将输出`[object String]`.

**5\. 从数组中获取最小值和最大值。**

一个鲜为人知但非常强大的技巧：

```
function arrayMax(arr) {
    return Math.max.apply(Math, arr);
}; 
```

， 分别：

```
function arrayMin(arr) {
    return Math.min.apply(Math, arr);
}; 
```

**对象**

使用一个对象，您只能执行以下操作：

`var y = {}`或者`var y = new Object();`

`y['first'] = 'firstValue'`与 相同`y.first = 'firstValue'`，但您不能对数组执行此操作。对象是为与`String`键关联访问而设计的。

迭代是这样的：

```
for (var property in y) {
    if (y.hasOwnProperty(property)) {
        console.log(y.property);
    };
}; 
```

**性能技巧和陷阱**

**1\. 检查对象是否具有属性。**

大多数人使用`Object.prototype.hasOwnProperty`. 不幸的是，这通常会导致错误的结果导致意外的错误。

这是一个很好的方法：

```
function containsKey(obj, key) {
    return typeof obj[key] !== 'undefined';
}; 
```

**2.替换switch语句。**

简单但有效的 JS 技巧之一是`switch`替换。

```
switch (someVar) {
    case 'a':
        doSomething();
        break;
    case 'b':
        doSomethingElse();
        break;
    default:
        doMagic();
        break;
}; 
```

在大多数 JS 引擎中，上述内容非常缓慢。当您查看三种可能的结果时，这并没有什么不同，但是如果您有数十个或数百个结果呢？

上面可以很容易地用一个对象替换。不要添加尾随`()`，这不是执行函数，而只是存储对它们的引用：

```
var cases = {
    'a': doSomething,
    'b': doSomethingElse,
    'c': doMagic
}; 
```

而不是`switch`：

```
var x = ???;
if (containsKey(cases, x)) {
    cases[x]();
} else {
    console.log("I don't know what to do!");
}; 
```

**3\. 深度克隆变得容易。**

```
function cloneObject(obj) {
   var tmp = {};
   for (var key in obj) {
       tmp[key] = fastDeepClone(obj[key];
   };
   return tmp;
}

function cloneArr(arr) {
   var tmp = [];
   for (var i = 0, len = arr.length; i < len; i++) {
     tmp[i] = fastDeepClone(arr[i]);
   }
   return tmp;
}

function deepClone(obj) {
   return JSON.parse(JSON.stringify(obj));
};

function isArray(obj) {
   return obj instanceof Array;
}

function isObject(obj) {
  var type = typeof obj;
  return type === 'object' && obj !== null || type === 'function';
}

function fastDeepClone(obj) {
  if (isArray(obj)) {
    return cloneArr(obj);
  } else if (isObject(obj)) {
    return cloneObject(obj);
  } else {
    return obj;
  };
}; 
```

**[这里](http://jsfiddle.net/alexflav23/5TEtW/7/)**是深层克隆功能的作用。

**自动装箱**

作为一种动态类型语言，JavaScript 在原生对象类型方面受到限制：

*   目的
*   大批
*   数字
*   布尔值
*   日期
*   正则表达式
*   错误

> Null 不是类型，`typeof null`是对象。

有什么问题？原始对象和非原始对象之间有很大的区别。

```
var s = "str";
var s2 = new String("str"); 
```

`s`它们做同样的事情，你可以在和上调用所有字符串方法`s2`。然而：

```
type of s == "string"; // raw data type
type of s2  == "object" // auto-boxed to non-primitive wrapper type
s2.prototype.toString.call == "[object String]"; 
```

你可能听说 JS 中的一切都是`object`. 这并不完全正确，尽管这是一个非常容易犯的错误。

实际上有两种类型，原语和对象，当你调用时`s.indexOf("c")`，JS 引擎会自动转换`s`为它的非原语包装类型，在这种情况下`object String`，所有方法都定义在`String.prototype`.

这被称为`auto-boxing`。该`Object.prototype.valueOf(obj)`方法是一种强制转换从原始到非原始的方法。这与像 Java 这样的语言为它自己的许多原语引入的行为相同，特别是对：`int`- Integer、`double`- Double、`float`- Float 等。

你为什么要关心？

简单的：

```
function isString(obj) {
   return typeof obj === "string";
}
isString(s); // true
isString(s2); // false 
```

因此，如果`s2`与您一起创建`var s2 = new String("test")`，即使对于其他可以想象的简单类型检查，也会得到假阴性。更复杂的对象也会带来严重的性能损失。

正如某些人所说的微优化，但结果确实非常显着，即使对于字符串初始化等极其简单的事情也是如此。让我们从性能方面比较以下两者：

```
var s1 = "this_is_a_test" 
```

和

```
var s2 = new String("this_is_a_test") 
```

您可能会期望全面匹配性能，但令人惊讶的是，后一个语句使用`new String`的速度比第一个语句慢 92%，如此处所证明[的](http://jsperf.com/primitive-autoboxing-performance)。

**功能**

**1\. 默认参数**

`||`运算符是最简单的默认方式。为什么它有效？因为真值和假值。

在逻辑条件下评估时，`undefined`值`null`将自动转换为`false`.

一个简单的例子（代码在[**这里**](http://jsfiddle.net/alexflav23/FUUKj/3/)）：

```
function test(x) {
   var param = x || 5;
   // do stuff with x
}; 
```

**2.OO JS**

要理解的最重要的事情是 JavaScript`this`对象不是不可变的。它只是一个可以轻松更改的参考。

在 OO JS 中，我们依靠`new`关键字来保证 JS 类的所有成员的隐式作用域。即便如此，您也可以通过`Function.prototype.call`和轻松更改范围`Function.prototype.apply`。

另一个非常重要的事情是`Object.prototype`. 嵌套在对象原型上的非原始值是共享的，而原始值则不是。

带有示例的代码在**[这里](http://jsfiddle.net/alexflav23/NnbS8/2/)**。

一个简单的类定义：

```
function Size(width, height) {
    this.width = width;
    this.height = height;
}; 
```

一个简单的大小类，有两个成员，`this.width`和`this.height`.

在类定义中，无论`this`前面有什么，都会为每个 Size 实例创建一个新引用。

**向类添加方法以及为什么“闭包”模式和其他“花哨的名称模式”纯属虚构**

这可能是发现最恶意的 JavaScript 反模式的地方。

我们可以通过`Size`两种方式向我们的类添加方法。

```
Size.prototype.area = function() {
   return this.width * this.height;
}; 
```

或者：

```
function Size2(width, height) {
   this.width = width;
   this.height = height;
   this.area = function() {
      return this.width * this.height;
   }
}

var s = new Size(5, 10);
var s2 = new Size2(5, 10);

var s3 = new Size2(5, 10);
var s4 = new Size(5, 10);
 // Looks identical, but lets use the reference equality operator to test things:
s2.area === s3.area // false
s.area === s4.area // true 
```

的`area`方法`Size2`是为每个实例创建的。这完全没用而且很慢，慢了很多。准确地说是 89%。看[**这里**](http://jsperf.com/shared-non-primitive-objects)。

上述陈述对所有已知的“花式名称模式”中的大约 99% 都有效。记住 JS 中最重要的一点，所有这些都不过是虚构的。

可以提出强有力的架构论据，主要围绕数据封装和闭包的使用。

不幸的是，这些东西在 JavaScript 中绝对没有价值，性能损失根本不值得。我们谈论的是 90% 及以上，这绝对是微不足道的。

**3\. 限制**

因为`prototype`定义在类的所有实例之间共享，所以您将无法在其中放置非原始设置对象。

```
Size.prototype.settings = {}; 
```

为什么？`size.settings`每个实例都是相同的。那么原始人是怎么回事呢？

```
Size.prototype.x = 5; // won't be shared, because it's a primitive.
// see auto-boxing above for primitive vs non-primitive
// if you come from the Java world, it's the same as int and Integer. 
```

要点：

一般的 JS 人会这样写 JS：

```
var x = {
    doStuff: function(x) {
    },
    doMoreStuff: 5,
    someConstant: 10
} 
```

这**很好**（很好=质量差，难以维护代码），只要您了解这是一个`Singleton`对象，并且这些函数应该只在全局范围内使用而不`this`在它们内部引用。

但随后它就变成了绝对糟糕的代码：

```
var x = {
   width: 10,
   height: 5
}
var y = {
   width: 15,
   height: 10
} 
```

你本可以侥幸逃脱：`var x = new Size(10, 5); var y = new Size(15, 5);`。

打字需要更长的时间，您每次都需要输入相同的内容。再一次，它慢了很多。看[**这里**](http://jsperf.com/class-vs-object-definitions)。

**整体标准差**

这几乎可以在任何地方看到：

```
 function() {
      // some computation
      var x = 10 / 2;
      var y = 5;
      return {
         width: x,
         height: y
      }
    } 
```

再次使用替代方案：

```
function() {
    var x = 10 / 2;
    var y = 5;
    return new Size(10, 5);
}; 
```

重点：在适当的地方使用类！

为什么？示例 1**慢了 93%**。看[**这里**](http://jsperf.com/returning-instances-vs-objects)。这里的例子是微不足道的，但它们说明了一些在 JS、OO 中被忽略的东西。

不雇用那些认为 JS 没有课程的人，并从谈论“面向对象” JS 的招聘人员那里获得工作，这是一条可靠的经验法则。

**闭包**

很多人更喜欢它们而不是上面的，因为它给了他们一种数据封装的感觉。除了 90% 的性能急剧下降之外，还有一些同样容易被忽视的事情。内存泄漏。

```
function Thing(someParam) {
   this.someFn = function() {
     return someParam;
   }
} 
```

您刚刚为`someParam`. 为什么这很糟糕？首先，它迫使您将类方法定义为实例属性，从而导致性能大幅下降。

其次，它会占用内存，因为闭包永远不会被取消引用。[**在这里**](https://stackoverflow.com/questions/19798803/how-javascript-closures-are-garbage-collected)寻找证据。当然，你确实得到了一些虚假的数据封装，但是你使用了三倍的内存，性能下降了 90%。

或者您可以添加`@private`并获取带有下划线函数名称的方法。

其他非常常见的生成闭包的方法：

```
function bindSomething(param) {
   someDomElement.addEventListener("click", function() {
     if (param) //do something
     else // do something else
   }, false);
} 
```

`param`现在是关闭！你如何摆脱它？有各种技巧，一些在[**这里**](https://stackoverflow.com/questions/6065880/pass-variables-to-an-event-javascript-no-closures-no-jq-avoid-evals-such)找到。最好的方法，尽管更严格，是避免一起使用匿名函数，但这需要一种方法来指定事件回调的范围。

据我所知，这种机制仅在 Google Closure 中可用。

**单例模式**

好的，那我该怎么处理单身人士呢？我不想存储随机引用。[这是一个从Google Closure 的 base.js](http://docs.closure-library.googlecode.com/git/closure_goog_base.js.source.html#line441)中无耻窃取的绝妙想法

```
/**
 * Adds a {@code getInstance} static method that always return the same instance
 * object.
 * @param {!Function} ctor The constructor for the class to add the static
 *     method to.
 */
function addSingletonGetter(ctor) {
  ctor.getInstance = function() {
    if (ctor.instance_) {
      return ctor.instance_;
    }
    return ctor.instance_ = new ctor;
  };
}; 
```

它是 Java 风格的，但它是一个简单而强大的技巧。您现在可以执行以下操作：

```
project.some.namespace.StateManager = function() {
   this.x_ = 5;
};
project.some.namespace.prototype.getX = function() { return x; }
addSingletonGetter(project.some.namespace.StateManager); 
```

这有什么用？简单的。在所有其他文件中，每次需要引用`project.some.namespace.StateManager`时，都可以写： `project.some.namespace.StateManager.getInstance()`. 这比看起来更棒。

您可以利用类定义（继承、有状态成员等）的好处来拥有全局状态，而**不会**污染全局命名空间。

**单实例模式**

您现在可能很想这样做：

```
function Thing() {
   this.someMethod = function() {..}
}
// and then use it like this:
Thing.someMethod(); 
```

这是 JavaScript 中的另一个大禁忌。请记住，只有在使用关键字`this`时才能保证对象是不可变的。`new`上述代码背后的魔力很有趣。`this`实际上是全局范围，因此对您来说毫无意义的是向全局对象添加方法。你猜对了，这些东西永远不会被垃圾收集。

没有什么告诉 JavaScript 使用其他东西。A`function`本身没有范围。要非常小心地处理`static`属性。重现我曾经读过的一句话，JavaScript 全局对象就像一个公共厕所。有时你别无选择，只能去那里，但尽量减少与表面的接触。

要么坚持上述`Singleton`模式，要么使用嵌套在命名空间下的设置对象。

**JavaScript 中的垃圾收集**

JavaScript 是一种垃圾收集语言，但 JavaScript GC 的理解通常很差。重点又是速度。这或许太熟悉了。

```
// This is the top of a JavaScript file.
var a = 5;
var b = 20;
var x = {};//blabla

// more code
function someFn() {..} 
```

那是糟糕的，性能差的代码。原因很简单。JS 将垃圾收集一个变量并释放它持有的堆内存，仅当该变量被解除作用域时，例如在内存中的任何地方都没有对它的引用。

例如：

```
function test(someArgs) {
   var someMoreStuf = // a very big complex object;
}
test(); 
```

三件事：

*   函数参数被转换为局部定义
*   内部声明被[提升](https://stackoverflow.com/questions/7506844/javascript-function-scoping-and-hoisting)。
*   当函数完成执行时，分配给内部变量的所有堆内存都会被释放。

为什么？因为它们不再属于“当前”范围。它们被创建、使用和销毁。也没有闭包，因此您使用的所有内存都通过垃圾回收释放。

出于这个原因，你永远不应该，你的 JS 文件永远不应该看起来像这样，因为全局范围只会不断污染内存。

```
var x = 5;
var y = {..}; //etc; 
```

好吧，现在呢？

**命名空间**。

JS 没有命名空间，所以这不完全是 Java 的等价物，但从代码库管理的角度来看，你会得到你想要的。

```
var myProject = {};
myProject.settings = {};
myProject.controllers = {};
myProject.controlls.MainController = function() {
    // some class definition here
} 
```

美丽的。一个全局变量。合理的项目结构。通过构建阶段，您可以跨文件拆分项目，并获得适当的开发环境。

您可以从这里实现的目标没有限制。

**数一数你的图书馆**

有幸在无数代码库上工作过，最后也是最重要的论点是要非常注意您的代码依赖性。我见过程序员随便将 jQuery 添加到堆栈中以获得简单的动画效果等等。

依赖关系和包管理是 JavaScript 世界最长时间没有解决的问题，直到创建了像 Bower 这样的工具。浏览器仍然有些慢，即使它们很快，互联网连接也很慢。

例如，在 Google 的世界里，他们编写整个编译器**只是为了节省字节**数，而这种方法在很多方面都是 Web 编程的正确心态。我非常重视谷歌，因为他们的 JS 库为谷歌地图等应用程序提供支持，这些应用程序不仅极其复杂，而且在任何地方都可以使用。

可以说，鉴于 JavaScript 的受欢迎程度、可访问性以及在某种程度上非常低的质量，整个生态系统都愿意接受，因此 JavaScript 有大量可用的工具。

对于*Hacker News*的订阅者来说，如果没有一个新的 JS 库，一天是不会过去的，它们当然很有用，但人们不能忽视这样一个事实，即它们中的许多人在没有任何强烈的新颖性或任何强烈概念的情况下重新实现了完全相同的问题。杀手锏和改进。

在所有新玩具有时间证明它们对整个生态系统的新颖性和有用性并强烈区分周日编码乐趣和生产部署之前，抵制混入所有新玩具的冲动是一个强有力的经验法则。

如果你的`<head></head>`标签比这篇文章长，那你就错了。

**测试你的 JavaScript 知识**

一些“完美主义者”水平测试：

*   [http://perfectionkills.com/javascript-quiz/](http://perfectionkills.com/javascript-quiz/)，感谢 Kangax。

*   [http://javascript-puzzlers.herokuapp.com/](http://javascript-puzzlers.herokuapp.com/)

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-10-19T11:56:51.870

对象的集合？使用这种表示法（JavaScript 数组）：

```
var collection = [ {name:"object 1"} , {name:"object 2"} , {name:"object 3"} ]; 
```

要将新元素放入您的收藏：

```
collection.push( {name:"object 4"} ); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-19T11:57:11.673

在 JavaScript 中，所有对象都是[关联数组](http://www.quirksmode.org/js/associative.html)。在第一种情况下，您创建了一个数组，在第二种情况下，您创建了一个空对象，它也是数组:)。

因此，在 JS 中，您可以像使用数组一样使用任何对象：

```
var a = {};
a["temp"] = "test"; 
```

作为对象：

```
var a = {};
a.temp = "test"; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-19T11:59:14.657

我会使用一个对象数组：

```
collection = [ 
    { "key":"first key", "value":"first value" }, 
    { "key":"second key", "value":"second value" } 
]; 
```

ETC

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-19T12:03:36.437

1) 是一个数组 2) 是一个对象

使用 Array all 和其他语言一样

与对象也。- 你可以得到值 ab == 1 - 但是在 JS 中你也可以用这样的语法 a["b"] == 1 得到值

*   当键看起来像“某个键”时，这可能很有用，在这种情况下，您不能使用“链接”
*   如果 key 是变量，这也很有用

你可以这样写

```
 function some(f){
var Object = {name: "Boo", age: "foo"}, key;
if(f == true){
   key = "name";
}else{
   key = "age";
}
 return Object[key];
} 
```

> 但我想把它用作收藏，我必须选择哪个？

这取决于您要存储的数据

# symfony - 在 symfony2 中编写原始查询并将其传递给 pagefanta 进行分页

> ID：12973709
> 
> 赞同：0
> 
> 时间：2012-10-19T11:53:08.483
> 
> 标签：symfony, pagination

```
SELECT Inventory_Stock.id, Inventory_Stock.quantity, SUM(InventoryUsage.quantity)
   ,Inventory_Stock.quantity - SUM(InventoryUsage.quantity) AS Stock 

FROM Inventory_Stock LEFT JOIN InventoryUsage ON Inventory_Stock.id = InventoryUsage.InventoryStock_id 

WHERE Inventory_Stock.id = 26 OR
      Inventory_Stock.id = 27

GROUP BY Inventory_Stock.id 
ORDER BY Stock Asc 
```

如何在 Symfony2 中编写上述代码，我想将其编写为原始查询

另外我正在使用 PageFanta 进行分页.. 所以上述查询的结果将进入分页。

关系是：

产品 (1 - 1) InventoryStock InventoryStock (1 - n) InventoryUsage

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T12:44:06.840

如果这不是问题，则将所有记录放入数组中。并使用`ArrayAdapter`：

```
$adapter = new ArrayAdapter($array);
$pagerfanta = new Pagerfanta($adapter); 
```

如果记录的数量太大。为 pagerfanta 编写自己的适配器

# objective-c - 在 iOS6 中调用官方设置应用

> ID：12973710
> 
> 赞同：2
> 
> 时间：2012-10-19T11:53:11.790
> 
> 标签：objective-c, ios6, settings, social-framework

根据我的阅读，在 iOS 5 中，您可以使用以下命令调用设置应用程序：

```
[[UIApplication sharedApplication] openURL:[NSURL URLWithString:@"prefs:root=General"]] 
```

但在 iOS 5.1 中它不再可用。

但是，在 iOS 6 中，在社交框架中，您可以使用 Facebook 和 Twitter 来完成此操作。当您需要为邮件设置帐户时，有没有办法复制它？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-19T12:02:46.657

不，没有办法做到这一点，Apple 尚未发布设置应用程序的 URL 方案。

# c# - 删除用户的 UserProfile 表

> ID：12973719
> 
> 赞同：0
> 
> 时间：2012-10-19T11:53:24.247
> 
> 标签：c#, asp.net, asp.net-mvc-4

我正在使用 MVC4 和 VS_2012。我想删除一个用户我的管理面板。我通常这样删除；

用户上下文 dcUser = new UsersContext();

```
if (userId.HasValue)
 {
     var userToDelete = (from u in dcUser.UserProfiles
                         where u.UserId == userId
                         select u).Single();

  //   dcUser.UserProfiles.DeleteOnSubmit(userToDelete);
 //   dcUser.SubmitChanges();
  } 
```

但是这种情况下我无法访问 DeleteOnSubmit 和 SubmitChanges。有什么办法可以删除用户？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T11:58:34.600

试试这样：

```
dcUser.Entry<string>(userToDelete).State = System.Data.EntityState.Deleted; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-13T07:06:16.903

你可以试试这个：

```
[Authorize(Roles = "Admin")]
[HttpPost]
public ActionResult DeleteUser(int id)
{
    var tmpuser = "";
    var ctx = new UsersContext();
    using (ctx)
    {
        var firstOrDefault   = ctx.UserProfiles.FirstOrDefault(us => us.UserId==id);
        if (firstOrDefault != null)
            tmpuser = firstOrDefault.UserName;
    }

    string[] allRoles = Roles.GetRolesForUser(tmpuser);
    Roles.RemoveUserFromRoles(tmpuser,allRoles);

    ((SimpleMembershipProvider)Membership.Provider).DeleteAccount(tmpuser);
    Membership.Provider.DeleteUser(tmpuser, true);
    Membership.DeleteUser(tmpuser, true);

    ctx = new UsersContext();

    return View(ctx.UserProfiles.OrderBy(user => user.UserName).ToList());
} 
```

# timestamp - 将 SQL Server 时间戳转换为 MySQL 时间戳

> ID：12973722
> 
> 赞同：0
> 
> 时间：2012-10-19T11:53:34.327
> 
> 标签：timestamp

我从 SQL Server 导出了一个数据库。它有一个类型的列，`timestamp`它给了我类似的值`39635.74541924769`。

如何在 MySQL 上将其转换为简单的日期格式？

我正在尝试使用 PHP 在网站上显示它。以前的数据库通过 ASP.NET 和 SQL Server 链接到该站点。

我想将此时间戳转换`39635.74541924769`为类似`2012-09-25 10:15:23`

或其他一些可读格式。

提前谢谢。:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T11:56:58.623

SQL Server`timestamp`数据类型与日期和/或时间**无关。**

它只是一个顺序计数器，通常用于检测自读取后发生更改的行。

较新版本的 SQL Server 现在称它为`ROWVERSION`- 确实如此。

该数据中**不包含日期和/或时间**！您无法将其转换为正确的日期。

# java - 如何使用 solr 索引和查询索引时不可用的数据

> ID：12973725
> 
> 赞同：0
> 
> 时间：2012-10-19T11:53:51.510
> 
> 标签：java, solr

在我的一个应用程序中，我们需要索引大量数据（30GB）。我们正在使用 SOLR 来索引这些数据。我们的 schema.xml 中有 50 个字段。我正在索引来自不同数据库的数据。

但是在索引所有字段时，数据不可用。所以我们创建了多个核心并分别索引每个核心。

例如：- 使用 Core 0，我们使用单独的查询索引 5 个字段

从对偶中选择 Field1 ,Field2 ,Field3 ,Field4 ,Field5。

Field1 --- 跨核心的公共字段 Field2 --- 在这个核心中被索引的字段 Field3 - 在这个核心中被索引的字段 Field4 - 在这个核心中被索引的字段 Field5 - 在这个核心中被索引的字段

因此，除了上述 5 个字段之外，其余 core0 中的所有字段都将为空。

接下来为核心 1

核心 1 我们使用单独的查询索引 3 个字段

从对偶中选择 Field1 ,Field6 ,Field6。

Field1 --- 跨核心的公共字段 Field6 --- 在这个核心中被索引的字段 Field7 -- 在这个核心中被索引的字段

我们对所有核心使用通用的 schema.xml。

对于查询，我们编写了一个自定义请求处理程序，它分别查询每个核心，然后合并结果。此外，每个核心中的数据将每 3 小时刷新一次。我在 solr4.0 中尝试过部分更新功能，但是索引太费时间……没那么有用

他们有更好的方法/设计来处理这个问题吗？

谢谢，拉维

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T17:45:04.740

您可以使用`shards`跨多个核心进行查询。您可以从任何代码中执行此操作。

例如;

```
solr/core1/select/?q=iPad&shards=localhost:8983/solr/core1,localhost:8983/solr/core0 
```

您可以使用 "," in 传递任意数量的核心`shards`。

# .htaccess - .htaccess 403 404 重定向返回的标头 SEO

> ID：12973726
> 
> 赞同：0
> 
> 时间：2012-10-19T11:53:53.770
> 
> 标签：.htaccess, seo, http-headers

一个快速的问题。我想使用一个 php 文件，该文件将根据 url 传递页面。我正在使用 htacess 处理错误文档，但我的问题与 SEO 有关。如果我将 404/403 请求重定向到 pageDispacher.php 然后提供正确的页面，那么标题在任何时候都会是 404/403 吗？因为这并不酷。我需要改用重写规则吗？

在这种情况下是否存在真正的 404 页面，我将如何返回 404 标头？

www.example.com > www.example.com/en/home

www.example.com/en/ > www.example.com/en/home

```
ErrorDocument 404 /pageDispacher.php
ErrorDocument 403 /pageDispacher.php 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T11:58:03.813

这是可用的：

```
RewriteRule ^error error.php [L,QSA]
RewriteRule ^(.*)\.php$ error[L,QSA] 
```

# c# - 通过 POST 解析

> ID：12973737
> 
> 赞同：3
> 
> 时间：2012-10-19T11:54:14.660
> 
> 标签：c#, parsing, post, httplistener

我使用 Stream reader 阅读`context.Request.InputStream`到最后并最终得到一个看起来像的字符串

```
"Gamestart=true&GamePlayer=8&CurrentDay=Monday&..." 
```

在 C# 控制台中解析它的最有效/“干净”的方法是什么？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-19T11:57:06.830

您可以使用[`HttpUtility.ParseQueryString`](http://msdn.microsoft.com/en-us/library/ms150046.aspx)

小样本：

```
string queryString = "Gamestart=true&GamePlayer=8&CurrentDay=Monday"; //Hardcoded just for example
NameValueCollection qscoll = HttpUtility.ParseQueryString(querystring);

foreach (String k in qscoll.AllKeys)
{
    //Prints result in output window.
    System.Diagnostics.Debug.WriteLine(k + " = " + qscoll[k]);
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-19T11:57:28.207

**HttpUtility.ParseQueryString**

> 使用 UTF8 编码将查询字符串解析为 NameValueCollection。

[http://msdn.microsoft.com/en-us/library/ms150046.aspx](http://msdn.microsoft.com/en-us/library/ms150046.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-30T07:21:44.990

我知道这有点像僵尸帖子，但我想我会添加另一个答案，因为`HttpUtility`添加了另一个程序集引用 ( `System.Web`)，这可能对某些人来说是不受欢迎的。

```
 using System.Net;
    using System.Text.RegularExpressions;

    static readonly Regex HttpQueryDelimiterRegex = new Regex(@"\?", RegexOptions.Compiled);
    static readonly Regex HttpQueryParameterDelimiterRegex = new Regex(@"&", RegexOptions.Compiled);
    static readonly Regex HttpQueryParameterRegex = new Regex(@"^(?<ParameterName>\S+)=(?<ParameterValue>\S*)$", RegexOptions.Compiled);

    static string GetPath(string pathAndQuery)
    {
        var components = HttpQueryDelimiterRegex.Split(pathAndQuery, 2);
        return components[0];
    }

    static Dictionary<string, string> GetQueryParameters(string pathAndQuery)
    {
        var parameters = new Dictionary<string, string>(StringComparer.OrdinalIgnoreCase);
        var components = HttpQueryDelimiterRegex.Split(pathAndQuery, 2);

        if (components.Length > 1)
        {
            var queryParameters = HttpQueryParameterDelimiterRegex.Split(components[1]);

            foreach(var queryParameter in queryParameters)
            {
                var match = HttpQueryParameterRegex.Match(queryParameter);

                if (!match.Success) continue;

                var parameterName = WebUtility.HtmlDecode(match.Groups["ParameterName"].Value) ?? string.Empty;
                var parameterValue = WebUtility.HtmlDecode(match.Groups["ParameterValue"].Value) ?? string.Empty;

                parameters[parameterName] = parameterValue;
            }
        }

        return parameters;
    } 
```

我希望他们会添加从 .NET 4.0`WebUtility`开始可用的相同方法。`System.Net`

# html - 整页 iframe

> ID：12973741
> 
> 赞同：1
> 
> 时间：2012-10-19T11:54:34.713
> 
> 标签：html, iframe, footer

我需要一个带有标题的页面和一个从其他站点显示的 iframe。这是我使用的：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"> 
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en"> 
<head> 
    <style type="text/css"> 
    *{margin:0;padding:0} 
    html, body {height:100%;width:100%;overflow:hidden} 
    table {height:100%;width:100%;table-layout:static;border-collapse:collapse} 
    iframe {height:100%;width:100%} 
    .header2 {border-bottom:1px solid #000;height:90px;} 
    .content2 {height:100%} 
</style> 
</head> 
<body>
<table>
<tr>
    <td class="header2">
    asdasdasdasd
    </td>
</tr>
<tr>
    <td class="content2">
        <iframe src="http://www.w3schools.com" scrolling="auto" frameborder="1" />
    </td>
</tr>
</table>
</body>
</html> 
```

问题是这段代码没有显示完整的页脚（由于页眉部分，90 像素超出页面）。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-19T12:04:28.123

桌子伤害了我的眼睛。`position: absolute`为此被严重低估。试试这个布局：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <title>Test Layout</title>
        <style type="text/css">
            body, html
            {
                margin: 0; padding: 0; height: 100%; overflow: hidden;
            }
            #header
            {
                position:absolute; left: 0; top: 0; right: 0; height: 90px; background: red;
            }
            #content
            {
                position:absolute; left: 0; right: 0; bottom: 0; top: 90px; background: blue; height: expression(document.body.clientHeight-90);
            }
        </style>
    </head>
    <body>
        <div id="header">
            Test content
        </div>
        <div id="content">
            <iframe width="100%" height="100%" src="startdoc.html" />
        </div>
    </body>
</html> 
```

一直正确渲染到 IE6 以及在我用最少的黑客测试过的每个浏览器上的奖励积分 :)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T12:05:17.953

Make your header absolute positioned, so it overlays over the iframe, like so:

```
<table>
<tr style="position:absolute;top:5px">
    <td class="header2">
    asdasdasdasd
    </td>
</tr>
<tr>
    <td class="content2">
        <iframe src="http://www.yahoo.com" scrolling="auto" frameborder="1" />
    </td>
</tr>
</table>​​​ 
```

# android - JSONObject 在 android 4.0 上解析，但在早期版本上没有

> ID：12973744
> 
> 赞同：2
> 
> 时间：2012-10-19T11:54:42.370
> 
> 标签：android, json

我有从网站获取 json 字符串的代码：

```
post.setEntity(entity);
HttpResponse responsePOST = client.execute(post);  
HttpEntity resEntity = responsePOST.getEntity();
result = EntityUtils.toString(resEntity, HTTP.UTF_8); 
```

这是结果中的 json 示例：

```
{"status":"0","user_id":"123","name":"test","session_code":"6f33d4ee610651530f04b1f700ebc36d"} 
```

在 jsonlint.com 上验证。我尝试使用解析它

```
JSONObject jo = new JSONObject(result); 
```

在 android 4 上，代码运行良好，但在早期版本中，它给出了

```
org.json.JSONException: Value  of type java.lang.String cannot be converted to JSONObject 
```

当我对 json 字符串进行硬编码而不是使其在线时，它适用于早期版本。当我记录 http 请求输出时，我发现它在每件事上都是相同的，除了会话代码随每个成功请求而变化，但两个会话代码具有相同的长度和格式。

任何人都知道这是什么原因以及如何解决它？

* * *

更新：

```
if (!email.isEmpty() && !password.isEmpty()){
    try {
        HttpClient client = new DefaultHttpClient();  
        String postURL = "http://www.xxxxxx.com/api/login.php";
        HttpPost post = new HttpPost(postURL);
        List<NameValuePair> postParams = new ArrayList<NameValuePair>();
        postParams.add(new BasicNameValuePair("email", email));
        postParams.add(new BasicNameValuePair("pass", password));
        UrlEncodedFormEntity entity = new UrlEncodedFormEntity(postParams, HTTP.UTF_8);
        post.setEntity(entity);
        HttpResponse responsePOST = client.execute(post);  
        HttpEntity resEntity = responsePOST.getEntity();
        result = EntityUtils.toString(resEntity, HTTP.UTF_8);
    } catch (UnsupportedEncodingException e) {
        Log.e(TAG, e.toString());
    } catch (ClientProtocolException e) {
        Log.e(TAG, e.toString());
    } catch (ParseException e) {
        Log.e(TAG, e.toString());
    } catch (IOException e) {
        Log.e(TAG, e.toString());
    }
}

if (result != null) {
    try {
        JSONObject jo = new JSONObject(result);

        switch (jo.getInt("status")) {
            case 0 : {
                userName = jo.getString("name");
                userID = jo.getInt("user_id");
                authCode = jo.getString("session_code");

                return 0;
            }

            default:
                return jo.getInt("status");
        }

    } catch (JSONException e) {
        Log.e(TAG, e.toString());
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T12:06:39.727

try this `result = EntityUtils.toString(resEntity);`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-11-16T05:34:33.150

您还需要在服务器端（PHP、Node 等）实现 UTF-8 编码，以使 Web 服务（JSON 解析）在较旧的 Android (<4.0) 设备上正常工作。试试这个！谢谢你。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-11-16T05:48:41.890

我认为版本没有问题。

您可能需要检查您`response`返回的所有类型。

`String`如果发生错误，您可能会返回。

如果您每次都转换`result`，`JSONObject`那么您必须`JSONObject`以`String`

# c++ - 致命错误：strtok_r.h：没有这样的文件或目录（在 MinGW 中编译 tesseract-ocr-3.01 时）

> ID：12973750
> 
> 赞同：1
> 
> 时间：2012-10-19T11:55:01.727
> 
> 标签：c++, compiler-errors, mingw, tesseract

我在 MinGW 中编译 tesseract-ocr-3.01，我收到了这个错误`ambigs.cpp:31:22: fatal error: strtok_r.h: No such file or directory`

这是错误所在的代码：

```
#ifdef WIN32
#ifndef __GNUC__
#define strtok_r strtok_s
#else
#include "strtok_r.h"
#endif  /* __GNUC__ */
#endif  /* WIN32 */ 
```

* * *

**编辑**

我发现此功能请求[将 strtok_r.h 添加到 MinGW](http://sourceforge.net/tracker/?func=detail&aid=2673480&group_id=2435&atid=352435)。从那里的评论：

> strtok_r() 是一个*可选*的POSIX 函数，仅在支持 POSIX 线程的实现中需要。MinGW 不*支持*POSIX 线程；因此，我认为这个函数在基础 MinGW 发行版中没有任何位置。
> 
> 对 MS-Windows 的 POSIX 线程支持由 pthreads-win32 项目提供。也许他们已经提供了 strtok_r() 实现。如果是这样，那么您可以使用它；如果没有，您可能会要求他们考虑添加它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T14:28:04.507

[通过将strtok_r 实现](https://stackoverflow.com/a/12975180/492336)添加到项目的源中，最容易解决该问题：

```
char *strtok_r(char *str, const char *delim, char **save)
{
    char *res, *last;

    if( !save )
        return strtok(str, delim);
    if( !str && !(str = *save) )
        return NULL;
    last = str + strlen(str);
    if( (*save = res = strtok(str, delim)) )
    {
        *save += strlen(res);
        if( *save < last )
            (*save)++;
        else
            *save = NULL;
    }
    return res;
} 
```

# db2 - DB2 9.7 返回不同的行

> ID：12973754
> 
> 赞同：1
> 
> 时间：2012-10-19T11:55:11.883
> 
> 标签：db2, distinct

我一直在研究网站上发布的材料，但不知道是`GROUP BY`不是`PARTITION BY`，我似乎无法得到我想要的答案。

我所拥有的是大量`TAG`数据，而我需要的是检索它所看到的位置的历史记录，即显示最后一次在特定位置看到它的时间。

我添加了一小部分数据。

我想看到的是按日期顺序是最新的，所以我希望看到第 01 行是位置 ...004 中的第一个，然后下一个条目是第 209 行，因为它是 ...50 和然后 ROW 216 ..004 再次，所以每次都有变化。

这可以用 SQL 语句来完成吗

谢谢你尽你所能的帮助

```
ROW    TAG    DATE
001    004    2012-10-19 10:20
002    004    2012-10-19 10:10
003    004    2012-10-19 10:00
209    050    2012-10-19 08:50
210    050    2012-10-19 08:40
211    050    2012-10-19 08:30
216    004    2012-10-19 07:30
217    004    2012-10-19 02:20 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T12:30:00.680

这是如何完成的：

```
with last_records_tagged as (
    select 
        row, 
        tag, 
        date,
        case when lead(tag) over (partition by tag order by date asc) is null 
            then 1 
            else 0
        end as last
        from your_table
)
select * from last_records_tagged where last = 1 
```

（我按日期排序，因为它对我更有意义）。

基本上，只要按日期排序的下一条记录具有不同的标签，您就知道您位于该组的最后一条记录。

# c++ - 在这种情况下从析构函数中抛出是否合适

> ID：12973758
> 
> 赞同：2
> 
> 时间：2012-10-19T11:55:18.767
> 
> 标签：c++, exception, destructor

我有一个类将用户提供的工作分配给多个线程。类似（简化）：

```
class MT {
public:

    MT();

    void work1(/*args*/);
    void work2(/*args*/);
    void work3(/*args*/);

    //waits until all threads complete, returns whether the work has been completed
    //successfully, throws any exceptions that have been raised in the threads.
    bool is_ok(); 

    ~MT();

private:
    // thread pool
} 
```

用户使用该类如下：

```
void foo()
{
    MT mt;
    mt.work1(/*userdata*/);
    mt.work2(/*userdata*/);
    mt.work1(/*userdata*/);
    status = mt.is_ok();
    if (status) {
        mt.work3(/*userdata*/);
        //...
    }
    //...
} 
```

该类永远不是某个对象的一部分，始终存储在堆栈中。

## 问题

我想以某种方式发出在其他线程中工作时引发的任何异常。不幸的是，我知道一个线程是否在加入后才成功完成。因此，我必须在以下两种选择之间进行选择：

*   加入析构函数中的线程`MT`并抛出工作时出现的异常（如果有）。如果抛出了多个异常，请选择来自最早任务的异常。如果调用析构函数进行堆栈展开（我们可以使用 进行检查[`std::uncaught_exception`](http://en.cppreference.com/w/cpp/error/uncaught_exception)，吞下任何异常以防止`terminate()`.

*   指示用户始终`is_ok`在析构函数之前调用。

我认为第一个选项更干净，因为用户不需要调用任何东西。但是，通常非常不鼓励从析构函数中抛出。提出的论点是：

*   从析构函数中抛出是危险的，因为这可能在堆栈展开期间发生并导致`terminate()`.
*   即使解决了上述问题，根据堆栈是否正在展开而投掷或不投掷也是行为的重大变化，应该不鼓励。
*   异常表示未满足后置条件。析构函数的后置条件是资源清理，这在任何情况下都必须是可能的。

不知何故，我倾向于认为上述论点不适用于这里：

*   我正确处理堆栈展开问题
*   由于使用模式，任何退出的异常都`foo`意味着工作失败。扔或不扔析构函数并不是行为的实质性改变。
*   析构函数的后置条件不仅是资源清理，而且工作已经成功完成。因此，例外应该是适当的。

## 问题

*   您认为在这种情况下从析构函数中抛出是否合适？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-19T12:00:46.097

不，不要从析构函数中抛出。呼叫`is_ok`、捕捉和忽略。与`close()`流相同。

用户`is_ok` *如果想确定工作是否已经完成*，可以调用，失败时会抛出异常。

在实践中，这很少不方便。如果用户编写了一个具有多个返回点的函数，但（不幸的是）这是他们必须处理的问题，因为 C++ 没有为您提供为他们执行此操作的方法。如果你认为这是反社会的，那么，看看如果你`std::thread`在 C++11 中破坏 a 而不先加入或分离它会发生什么。你打败了:-)

因此，用户调用`is_ok`所有非错误退出路径。当已经有异常时，用户不会打扰调用它，因为他们无论如何都无法处理另一个异常。同样，这与`close()`流相同：如果您想查看写入缓冲流的错误，那么您只需要显式关闭或刷新。

> 即使解决了上述问题，根据堆栈是否正在展开而投掷或不投掷也是行为的重大变化，应该不鼓励。

至少在 C++03 中也无法正确执行。[正如 Herb Sutter 解释的那样](http://www.gotw.ca/gotw/047.htm)，我不知道 C++11 在这方面是否有任何改变，但`std::uncaught_exception` *没有*告诉你你需要知道什么。

从您到 cppreference.com 的链接：

> 在 std::uncaught_exception() == true 调用 std::terminate 时抛出的任何异常。

我很确定这是错误的。`terminate`如果异常逃脱了作为堆栈展开的一部分调用的析构函数，则调用它，但不会仅仅因为析构函数在展开期间抛出*并捕获*异常而调用它。

如果调用者认为他们可以对析构函数中抛出的异常做一些有用的事情，那么他们可以编写一个`is_ok`在*其*析构函数中调用的辅助类，并将其放在您的对象上。如果你认为你的类可以用同样的异常做一些有用的事情，那么你可以做一些事情，而不仅仅是在你的析构函数中忽略它，但你仍然不应该让它离开析构函数。

# java - 在浮点中打印没有多余的 0？

> ID：12973768
> 
> 赞同：-1
> 
> 时间：2012-10-19T11:55:52.733
> 
> 标签：java, floating-point

我知道您可以通过这样做设置为浮点数打印的小数位，`%.2f`但我只想打印有效数字：

```
1.33443
1.3
2.00006 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T12:01:47.903

用这个

```
double roundTwoDecimals(double d) {
        DecimalFormat twoDForm = new DecimalFormat("#.##");
    return Double.valueOf(twoDForm.format(d)); 
```

}

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T12:25:16.813

```
public static void main(String [] args) {
    float f1 = 1.3344300f;
    float f2 = 1.3000f;
    float f3 = 2.010f;

    System.out.println(f1);;
    System.out.println(f2);;
    System.out.println(f3);;
} 
```

总是打印...

```
1.33443
1.3
2.01 
```

# c# - 如何在 datagrid asp.net 中进行分页？

> ID：12973769
> 
> 赞同：0
> 
> 时间：2012-10-19T11:55:58.397
> 
> 标签：c#, asp.net, datagrid

即使我设置`AllowPaging="true"`和`AllowCustomPaging="true"`

![在此处输入图像描述](../Images/5cfe9b57dc44c1874a89e225b15b72cd.png)

它早些时候工作，但现在我不知道发生了什么。

我需要更改什么才能使其正常工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T12:35:05.707

[正如msdn – DataGrid.VirtualItemCount](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.datagrid.virtualitemcount.aspx)`datagrid1.VirtualItemCount`所解释的，我必须将 设置为我的数据源中的实际项目数，因为没有它就无法工作。`CustomPaging`

所以我加了

```
datagrid1.VirtualItemCount = 200; 
```

它奏效了。

# .net - 在构造函数中反序列化为 self

> ID：12973770
> 
> 赞同：0
> 
> 时间：2012-10-19T11:56:03.243
> 
> 标签：.net, vb.net, json, javascriptserializer

我想要一个接受包含 JSON 对象的文件名的构造函数

我在包含 JSON 对象（作为文本）的目录中有文件

我想：

```
Public Sub New(filename as string)
   Dim JSONString As String = File.ReadAllText(filename)
   Dim j As New JavaScriptSerializer()
   Dim o As Object = j.DeserializeObject(JSONString)
   Me = o
End Sub 
```

显然我做不到这条线`Me = o`。

我想知道人们可以想出什么技巧。我只需要替换对`New Profile(...)`静态方法的所有调用吗？你会怎么做？

我对接受字符串的构造函数有一堆旧调用，我希望它们使用新机制。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2018-03-14T15:47:11.723

您不能`Me`在构造函数中赋值。“技巧”是可能的，比如反射反序列化对象的属性并在构造函数中分配相同的值，但是很麻烦且不明智。

您需要的是一个通用的辅助方法来反序列化`T`文件名中任何类型的实例：

```
Public Shared Function DeserializeFile(Of T)(filename As String) As T
    Dim JSONString As String = File.ReadAllText(filename)
    Dim j As New JavaScriptSerializer()
    Return j.Deserialize(Of T)(JSONString)
End Function 
```

用法，如果助手在`SerializationHelper`并且您正在反序列化的类是，根据您的问题，`Profile`：

```
Dim obj As Profile = SerializationHelper.DeserializeFile(Of Profile)("filename.json") 
```

# c# - CRM 2011 自定义图表 - 两国字段 - 绘制两个值

> ID：12973771
> 
> 赞同：1
> 
> 时间：2012-10-19T11:56:05.817
> 
> 标签：c#, xml, charts, dynamics-crm-2011

在 CRM 2011 中，我有几条记录包含两个状态（可为空的布尔值）字段。我想绘制一个条形图，计算所有记录的真值和假值的数量，并将它们绘制在同一个图表中（“真”记录的条和“假”记录的条）。

这是修改后的 XML I（最初使用 CRM 生成），对于我来说，我无法弄清楚如何用 2 个值绘制图表，我每个月有多个记录，所以横轴是记录 cretedOn 日期（月）。

谁能解释我将如何修改 XML 来实现这一点？或者向我指出一个解释该做什么的资源？

```
 <visualization>
  <visualizationid>{CCA96081-E319-E211-B2CA-0800273EE9D1}</visualizationid>
  <name>Compliance Stages 1 &amp; 2, Chart 1</name>
  <primaryentitytypecode>intellic_suppliersalesprocess</primaryentitytypecode>
  <datadescription>
    <datadefinition>
      <fetchcollection>
        <fetch mapping="logical" aggregate="true">
          <entity name="intellic_suppliersalesprocess">
            <attribute alias="aggregate_column" name="intellic_csvfileimported" aggregate="count" />
        <filter>
           <condition attribute="intellic_csvfileimported" operator="eq" value="true" />
        </filter>
        <attribute alias="aggregate_column1" name="intellic_csvfileimported" aggregate="count" />
        <filter>
           <condition attribute="intellic_csvfileimported" operator="eq" value="false" />
        </filter>
            <attribute groupby="true" alias="groupby_column" dategrouping="month" name="createdon" />
          </entity>
        </fetch>
      </fetchcollection>
      <categorycollection>
        <category>
          <measurecollection>
            <measure alias="aggregate_column" />
          </measurecollection>
      <measurecollection>
            <measure alias="aggregate_column1" />
          </measurecollection>
        </category>
      </categorycollection>
    </datadefinition>
  </datadescription>
  <presentationdescription>
    <Chart>
      <Series>
    <Series IsValueShownAsLabel="True" Color="110, 20, 78" BackGradientStyle="TopBottom" BackSecondaryColor="141, 44, 45" Font="{0}, 9.5px" LabelForeColor="59, 59, 59" CustomProperties="PointWidth=0.75, MaxPixelPointWidth=40"></Series>
        <Series IsValueShownAsLabel="True" Color="55, 118, 193" BackGradientStyle="TopBottom" BackSecondaryColor="41, 88, 145" Font="{0}, 9.5px" LabelForeColor="59, 59, 59" CustomProperties="PointWidth=0.75, MaxPixelPointWidth=40"></Series>
      </Series>
      <ChartAreas>
        <ChartArea BorderColor="White" BorderDashStyle="Solid">
          <AxisY LabelAutoFitMinFontSize="8" TitleForeColor="59, 59, 59" TitleFont="{0}, 10.5px" LineColor="165, 172, 181" IntervalAutoMode="VariableCount">
            <MajorGrid LineColor="239, 242, 246" />
            <MajorTickMark LineColor="165, 172, 181" />
            <LabelStyle Font="{0}, 10.5px" ForeColor="59, 59, 59" />
          </AxisY>
          <AxisX LabelAutoFitMinFontSize="8" TitleForeColor="59, 59, 59" TitleFont="{0}, 10.5px" LineColor="165, 172, 181" IntervalAutoMode="VariableCount">
            <MajorGrid LineColor="Transparent" />
            <LabelStyle Font="{0}, 10.5px" ForeColor="59, 59, 59" />
          </AxisX>
        </ChartArea>
      </ChartAreas>
      <Titles>
        <Title Alignment="TopLeft" DockingOffset="-3" Font="{0}, 13px" ForeColor="59, 59, 59"></Title>
      </Titles>
    </Chart>
  </presentationdescription>
  <isdefault>false</isdefault>
</visualization> 
```

任何建议都会非常感激。

杰克

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T11:47:38.963

您需要有两个系列，每个系列都需要对记录数进行汇总，但要根据您的位字段过滤一组记录。因此，虽然典型的两个系列图表可能会绘制每个月的新客户数量和新潜在客户数量（例如），但在这里您想要绘制相同的实体两次，在每种情况下进行计数，但过滤正在计数的记录。作为一个有用的比较示例，有一个内置图表显示机会作为赢得的交易与失败的交易。在此示例中，它计算所有赢得的机会的实际收入总和，以及失去的机会的估计收入总和。您可以找到此图表并将其导出，我已将其粘贴在下面以方便参考：

```
<visualization>
      <visualizationid>{C1CB81B1-575F-DF11-AE90-00155D2E3002}</visualizationid>
      <name>Deals Won vs. Deals Lost By Owner</name>
      <description>Shows the amount of revenue for won deals versus lost deals.</description>
      <primaryentitytypecode>opportunity</primaryentitytypecode>
      <datadescription>
        <datadefinition>
          <fetchcollection>
            <fetch mapping="logical" aggregate="true">
              <entity name="opportunity">
                <link-entity name="opportunity" from="opportunityid" to="opportunityid" link-type="outer">
                  <attribute alias="sum_lost" name="estimatedvalue" aggregate="sum"></attribute>
                  <filter>
                    <condition attribute="statecode" operator="eq" value="2" />
                  </filter>
                </link-entity>
                <link-entity name="opportunity" from="opportunityid" to="opportunityid" link-type="outer">
                  <attribute alias="sum_won" name="actualvalue" aggregate="sum"></attribute>
                  <filter>
                    <condition attribute="statecode" operator="eq" value="1" />
                  </filter>
                </link-entity>
                <attribute groupby="true" alias="groupby_column" name="ownerid"></attribute>
              </entity>
            </fetch>
          </fetchcollection>
          <categorycollection>
            <category>
              <measurecollection>
                <measure alias="sum_won" />
              </measurecollection>
              <measurecollection>
                <measure alias="sum_lost" />
              </measurecollection>
            </category>
          </categorycollection>
        </datadefinition>
      </datadescription>
      <presentationdescription>
        <Chart Palette="None" PaletteCustomColors="97,142,206; 168,203,104; 209,98,96; 142,116,178; 93,186,215; 255,155,83; 148,172,215; 217,148,147; 189,213,151; 173,158,196; 145,201,221; 255,180,138">
          <Series>
            <Series Name="o:opportunity_statecode,1" Color="149, 189, 66" IsValueShownAsLabel="False" BackGradientStyle="TopBottom" BackSecondaryColor="112, 142, 50" Font="{0}, 9.5px" LabelForeColor="59, 59, 59">
              <SmartLabelStyle Enabled="True" />
            </Series>
            <Series Name="o:opportunity_statecode,2" Color="255,124,31" IsValueShownAsLabel="False" BackGradientStyle="TopBottom" BackSecondaryColor="235,98,0" Font="{0}, 9.5px" LabelForeColor="59, 59, 59">
              <SmartLabelStyle Enabled="True" />
            </Series>
          </Series>
          <ChartAreas>
            <ChartArea BorderColor="White" BorderDashStyle="Solid">
              <AxisY LabelAutoFitMinFontSize="8" TitleForeColor="59, 59, 59" TitleFont="{0}, 10.5px" LineColor="165, 172, 181">
                <MajorGrid LineColor="239, 242, 246" />
                <MajorTickMark LineColor="165, 172, 181" />
                <LabelStyle Font="{0}, 10.5px" ForeColor="59, 59, 59" />
              </AxisY>
              <AxisX LabelAutoFitMinFontSize="8" TitleForeColor="59, 59, 59" TitleFont="{0}, 10.5px" LineColor="165, 172, 181">
                <MajorGrid Enabled="False" />
                <MajorTickMark Enabled="False" />
                <LabelStyle Font="{0}, 10.5px" ForeColor="59, 59, 59" />
              </AxisX>
            </ChartArea>
          </ChartAreas>
          <Titles>
            <Title Alignment="TopLeft" DockingOffset="-3" Font="{0}, 13px" ForeColor="0, 0, 0"></Title>
          </Titles>
          <Legends>
            <Legend Alignment="Center" LegendStyle="Table" Docking="Bottom" Font="{0}, 11px" ForeColor="59, 59, 59"></Legend>
          </Legends>
        </Chart>
      </presentationdescription>
      <isdefault>false</isdefault>
    </visualization> 
```

注意到每个链接实体中的“过滤器”标签了吗？另请参阅定义系列的两个“度量集合”，以及用于呈现这些的两个条目，例如颜色。

# c# - 存储过程返回到 C# .Net 中的 DataSet

> ID：12973773
> 
> 赞同：21
> 
> 时间：2012-10-19T11:56:19.740
> 
> 标签：c#, asp.net, stored-procedures, dataset

我想从存储过程返回虚拟表，我想在 c# .net 的数据集中使用它。我的过程有点复杂，找不到如何返回表并将其设置在数据集中

这是我的修改程序：

```
ALTER PROCEDURE [dbo].[Procedure1] 

    @Start datetime, 
    @Finish datetime,
    @TimeRange time
AS
BEGIN

    SET NOCOUNT ON;

    declare @TimeRanges as TABLE (SessionStart datetime, SessionEnd datetime);

     with TimeRanges as (
  select @Start as StartTime, @Start + @TimeRange as EndTime
  union all
  select StartTime + @TimeRange, EndTime + @TimeRange
    from TimeRanges
    where StartTime < @Finish )
  select StartTime, EndTime, Count( Test.ScenarioID ) as TotalPeaks
    from TimeRanges as TR left outer join
      dbo.Test as Test on TR.StartTime <= Test.SessionStartTime and Test.SessionCloseTime < TR.EndTime
    group by TR.StartTime, TR.EndTime   
END 
```

* * *

## 回答 #1

> 赞同：65
> 
> 时间：2012-10-19T12:14:11.557

尝试这个

```
 DataSet ds = new DataSet("TimeRanges");
    using(SqlConnection conn = new SqlConnection("ConnectionString"))
    {               
            SqlCommand sqlComm = new SqlCommand("Procedure1", conn);               
            sqlComm.Parameters.AddWithValue("@Start", StartTime);
            sqlComm.Parameters.AddWithValue("@Finish", FinishTime);
            sqlComm.Parameters.AddWithValue("@TimeRange", TimeRange);

            sqlComm.CommandType = CommandType.StoredProcedure;

            SqlDataAdapter da = new SqlDataAdapter();
            da.SelectCommand = sqlComm;

            da.Fill(ds);
     } 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-10-19T12:17:52.160

我应该告诉你基本的步骤，休息取决于你自己的努力。您需要执行以下步骤。

*   创建一个连接字符串。
*   创建 SQL 连接
*   创建 SQL 命令
*   创建 SQL 数据适配器
*   填写您的数据集。

不要忘记打开和关闭连接。点击此[链接](http://www.dotnetperls.com/sqldataadapter)了解更多信息。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-04-12T08:33:26.820

您可以在全局级别声明`SqlConnection`和`SqlCommand`实例，以便您可以在整个类中使用它。连接字符串在`Web.Config`.

```
SqlConnection sqlConn = new SqlConnection(WebConfigurationManager.ConnectionStrings["SqlConnector"].ConnectionString);
SqlCommand sqlcomm = new SqlCommand(); 
```

现在您可以使用以下方法将值传递给**存储过程**并获取`DataSet`.

```
public DataSet GetDataSet(string paramValue)
{
    sqlcomm.Connection = sqlConn;
    using (sqlConn)
    {
        try
        {
            using (SqlDataAdapter da = new SqlDataAdapter())
            {  
                // This will be your input parameter and its value
                sqlcomm.Parameters.AddWithValue("@ParameterName", paramValue);

                // You can retrieve values of `output` variables
                var returnParam = new SqlParameter
                {
                    ParameterName = "@Error",
                    Direction = ParameterDirection.Output,
                    Size = 1000
                };
                sqlcomm.Parameters.Add(returnParam);
                // Name of stored procedure
                sqlcomm.CommandText = "StoredProcedureName";
                da.SelectCommand = sqlcomm;
                da.SelectCommand.CommandType = CommandType.StoredProcedure;

                DataSet ds = new DataSet();
                da.Fill(ds);                            
            }
        }
        catch (SQLException ex)
        {
            Console.WriteLine("SQL Error: " + ex.Message);
        }
        catch (Exception e)
        {
            Console.WriteLine("Error: " + e.Message);
        }
    }
    return new DataSet();
} 
```

以下是配置文件中的连接字符串示例

```
<connectionStrings>
    <add name="SqlConnector"
         connectionString="data source=.\SQLEXPRESS;Integrated Security=SSPI;Initial Catalog=YourDatabaseName;User id=YourUserName;Password=YourPassword"
         providerName="System.Data.SqlClient" />
</connectionStrings> 
```

# ios - 为什么 UIScrollView 不滚动？

> ID：12973796
> 
> 赞同：0
> 
> 时间：2012-10-19T11:57:15.677
> 
> 标签：ios, xcode, uiscrollview

我有一个 UIScrollView，里面有一些 UILabel 和一个 UITextView。UIScrollView 是主 UIView 的子视图。UIScrollView 初始化为：

```
UIScrollView* scrollView = [[UIScrollView alloc] initWithFrame:CGRectMake(30, 75, rct.size.width-50, 1000)]; 
```

UILabels 作为子视图添加到其中：

```
 lbl = [[UILabel alloc] initWithFrame:CGRectMake(0, 0, 200, 20)];
    lbl.textColor = [UIColor whiteColor];
    [lbl setBackgroundColor:[UIColor greenColor]];
    [lbl setFont:[UIFont fontWithName:@"Arial-BoldMT" size:16]];
    lbl.text = [NSString stringWithFormat:@"name: %@",firstName];
    [scrollView addSubview:lbl];
    [lbl release];

    lbl = [[UILabel alloc] initWithFrame:CGRectMake(0, 20, 200, 40)];
    lbl.textColor = [UIColor whiteColor];
    [lbl setBackgroundColor:[UIColor redColor]];
    [lbl setFont:[UIFont fontWithName:@"Arial-BoldMT" size:16]];
    lbl.text = [NSString stringWithFormat:@"last name: %@",lastName];
    [scrollView addSubview:lbl];
    [lbl release];

    .   
    .   

    // TEXT VIEW

    UITextView *txt1 = [[UITextView alloc] initWithFrame:CGRectMake(0, 160, rct.size.width-50, 1000)];
    txt1.textAlignment = UITextAlignmentLeft;
    txt1.textColor = [UIColor whiteColor];
    [txt1 setBackgroundColor:[UIColor clearColor]];
    UIFont *f = [UIFont fontWithName:@"Arial-BoldMT" size:16];
    [txt1 setFont:f];
    txt1.text = [NSString stringWithFormat:@"info: %@",personInfo];
    [scrollView addSubview:txt1];

    CGRect newframe1 = txt1.frame;
    newframe1.size.height = txt1.contentSize.height + 3; // offset for shadow
    txt1.frame = newframe1;
    [txt1 release]; 
```

TextView 是作为 hack 添加的（[如图所示](https://stackoverflow.com/questions/50467/how-do-i-size-a-uitextview-to-its-content)），基本上是唯一一个可滚动的，其他视图保持静态，我也需要它们滚动。

**编辑：** 当我添加一个 UILabel 即使在 scrollView 的边界之外它也不会在那里滚动：

```
 lbl = [[UILabel alloc] initWithFrame:CGRectMake(0, 940, 100, 1000)];
    lbl.textColor = [UIColor whiteColor];
    [lbl setBackgroundColor:[UIColor whiteColor]];
    [lbl setFont:[UIFont fontWithName:@"Arial-BoldMT" size:20]];
    lbl.text = [NSString stringWithFormat:@"TEST"];
    [scrollView addSubview:lbl];
    [lbl release]; 
```

滚动视图不会让步！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T12:03:27.310

您应该尝试设置`contentSize`滚动视图：

```
scrollView.contentSize = ... 
```

比滚动视图框架更大的东西。（比如说，包含标签和文本视图的东西，可能是 1160 像素高）。

滚动视图的框架应设置为表示滚动视图中可见区域的大小，而不是滚动视图内容的完整大小。

# android - 带有标签的操作栏：片段未使用

> ID：12973799
> 
> 赞同：0
> 
> 时间：2012-10-19T11:57:27.190
> 
> 标签：android, android-fragments, android-activity, android-view

我想在操作栏中使用标签。为简单起见，现在只有 1 个选项卡。问题是没有可见的视图/用户界面。

Oncreate 包含选项卡的活动的功能 -

```
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    tabs = new Vector<ActionBar.Tab>();
    ActionBar actionbar = getActionBar();
    actionbar.setNavigationMode(ActionBar.NAVIGATION_MODE_TABS);

    ActionBar.Tab accountsTab = actionbar.newTab().setText("Accounts");
    Fragment accountsFragment = new AccountsFragment();
    accountsTab.setTabListener(new MyTabListener(accountsFragment));
    actionbar.addTab(accountsTab);
    tabs.add(accountsTab);
} 
```

扩展 Fragment (android.app.Fragment) 的 Fragment AccountsFragment 的 oncreateview ：

```
 public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {
    TextView textView = new TextView(getActivity());
    textView.setText("SimpleFragmentText");
    textView.setVisibility(View.VISIBLE);
    textView.setTextSize(20);
    return textView;
} 
```

最后 Tab 监听器如下：

```
 public void onTabSelected(ActionBar.Tab tab, FragmentTransaction fragmentTransaction) {
    if(fragment!=null) {
        fragmentTransaction.add(fragment,"accounts");
        fragmentTransaction.show(fragment);
    }
}

@Override
public void onTabUnselected(ActionBar.Tab tab, FragmentTransaction fragmentTransaction) {
    if(fragment!=null) {
        fragmentTransaction.remove(fragment);
    }
} 
```

所有其他功能都不会被覆盖。除了标题为“帐户”的选项卡外，什么都没有显示。

我的 main.xml 包含线性布局。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T12:08:24.080

在你的 onTabSelected 试试这个 -

```
public void onTabSelected(Tab tab, FragmentTransaction ft) {
            // Check if the fragment is already initialized
            if (mFragment == null) {
                // If not, instantiate and add it to the activity
                mFragment = (Fragment) Fragment.instantiate(mActivity, mClass.getName());
                ft.add(android.R.id.content, mFragment, mTag);
            } else {
                // If it exists, simply attach it in order to show it
                ft.attach(mFragment);
            }
        } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-19T12:44:49.820

试试这个：

```
 public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        tabs = new Vector<ActionBar.Tab>();
        ActionBar actionbar = getActionBar();
        actionbar.setNavigationMode(ActionBar.NAVIGATION_MODE_TABS);

        ActionBar.Tab accountsTab = actionbar.newTab().setText("Accounts");
        accountsTab.setTabListener(new MyTabListener());
        actionbar.addTab(accountsTab);
        tabs.add(accountsTab);
    }

    public void onTabSelected(ActionBar.Tab tab, FragmentTransaction fragmentTransaction) {
        if(fragment!=null) {
           AccountsFragment frag = new AccountsFragment();
           fragmentTransaction.add(android.R.id.content, frag);
        }
    }

    @Override
    public void onTabUnselected(ActionBar.Tab tab, FragmentTransaction fragmentTransaction) {
        if(fragment!=null) {
            fragmentTransaction.remove(fragment);
        }
    } 
```

# sql - 视图比 select into 慢得多

> ID：12973803
> 
> 赞同：0
> 
> 时间：2012-10-19T11:57:39.357
> 
> 标签：sql, sql-server

让我们直接来看这个例子：

查询一：

```
Select * 
Into #temp_v1 
From View1

Select * 
Into #temp_v2
From View2

select *
From #temp_v1 v1
where not exists (
    Select * From #temp_v2 where key = v1.key
) 
```

这比

查询 2：

```
select *
From View1 v1
where not exists (
    Select * From View2 where key = v1.key
) 
```

现在，显然，我已经简化了这个例子。View1 是视图的视图，需要进行更多比较，这使得使用连接变得困难。

我的问题实际上不是我应该如何编写我的 SQL，而是 SQL Server 为何能在 3 秒内执行查询 1，并在 10 分钟内执行查询 2。

更重要的是，有一个神奇的选项，我可以让优化器创建一个像查询 1 这样的执行计划。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T12:09:49.700

如果您的视图很复杂，那么访问视图将是迄今为止操作中最慢的部分，而查询 1 将其最小化。

假设每个视图有 1,000,000 行。在查询 1 中，您仅从视图中检索一行 2,000,000 次，而在查询 2 中，您可能从视图中检索一行 500,000,000,000 次或更多。（在最佳情况下，每个都`v1.key`将存在于视图 2 中。但您仍然必须每次检查视图 2 中大约一半的行以验证这一点）。

我不知道 SQL Server 中的执行计划，但是像这样编写查询也应该更有效：

```
with keys as (
   select key from View2
)
select *
From View1 v1
where not exists (
    Select * From keys where key = keys.key
) 
```

通过提前从视图 2 中获取所有键，您基本上可以获得与查询 1 相同的效率，而无需临时表步骤。

# javascript - .click() 只影响一个具有类的元素

> ID：12973811
> 
> 赞同：1
> 
> 时间：2012-10-19T11:58:15.400
> 
> 标签：javascript, jquery, html

我有新闻列表，包括简短的全文和新闻文章的标题。单击它会展开完整视图，反之亦然。然而，点击第一篇文章也会展开所有其他文章。我如何只影响我点击的那个？

这是[示例](http://jsbin.com/irihax/1/edit)：

```
$(document).ready(function () {
    $('.news-expand').click(function () {
        $(".news-content-short").toggle();
        $(".news-content-full").toggle();
        $('.news-date').toggleClass('active-date');
        $('.news-expand').toggleClass('active');
    });
}); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-19T12:06:55.673

您只需对您单击的部分中的项目进行操作。代码如下：

```
$(document)
    .ready(function () {
    $('.news-expand')
        .click(function () {
        var par = $(this).parents('.main-news-holder');
        par.find(".news-content-short").toggle();
        par.find(".news-content-full").toggle();
        par.find('.news-date').toggleClass('active-date');
        par.find('.news-expand').toggleClass('active');
        return false;
    });
}); 
```

检查这个**演示：http:** [//jsbin.com/ikijap/1/edit](http://jsbin.com/ikijap/1/edit)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-19T12:01:30.370

您的问题不在于您的点击事件是基于类调用的，而是在您的点击事件中您正在对类中的每个项目进行操作。

相反，使用[这个](http://remysharp.com/2007/04/12/jquerys-this-demystified/)

有关点击事件的更多详细信息，请参阅[JQuery 的 API](http://api.jquery.com/click/)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-19T12:03:53.880

这是因为您总是在处理集合中的**所有**项目。因此，例如`$(".news-content-short").toggle();`使用相应的类切换所有项目，而不仅仅是您想要的。

以下应该有效：

```
$('.news-expand').click(function () {
      $parent = $(this).parents(".main-news-holder");
      $parent.find(".news-content-short,.news-content-short").toggle().end()
             .find('.news-date').toggleClass('active-date').end()
             .find('.news-expand').toggleClass('active');
}); 
```

**[你的例子工作](http://jsbin.com/irihax/20/edit)**

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-19T12:04:05.580

```
$(document)
    .ready(function () {
    $('.news-expand').click(function () {
        var parent = $(this).closest('.main-news-holder');
        $(this).toggleClass('active');
        parent.find(".news-content-short").toggle();
        parent.find(".news-content-full").toggle();
        parent.find('.news-date').toggleClass('active-date');
    });
}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-19T12:07:02.520

您将需要到达父 div，然后您可以隐藏/显示正确的 div。在此处查看 jsbin 演示：http: [//jsbin.com/irihax/14/](http://jsbin.com/irihax/14/)

```
$(document)
    .ready(function () {
    $('.news-expand')
        .click(function () {
          var mainDiv = $(this).parent().parent().parent();
        mainDiv.find(".news-content-short").toggle();
        mainDiv.find(".news-content-full").toggle();
        mainDiv.find('.news-date').toggleClass('active-date');
        mainDiv.find('.news-expand').toggleClass('active');
    });

}); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-19T12:20:37.000

通过重新排列html代码，

```
<!DOCTYPE html>
<html>

    <head>
        <script src="http://code.jquery.com/jquery-1.7.2.min.js"></script>
        <meta charset=utf-8 />
        <title>JS Bin</title>
        <script>
$(document)
    .ready(function () {
    $('.news-header')
        .click(function () {
        $(this).children('div').toggle();
    });
});
        </script>
    </head>

    <body>
        <div id="main-news">
            <div class="main-news-holder">
                <div class="news-date">
                    <p>1 sep</p>
                </div>
                <div class="news-header" style="border:1px solid;">
                    <p><a class="news-expand" href="#">Show more</a></p>
                    <div class="news-content-short">
                    <p>short short short short short</p>
                    </div>
                    <div class="news-content-full" style="display: none;">
                        <p>text text text text text text text text text text text text text text
                            text text text text text text text text text text text text text text text
                            text text text text text text text text text text text text text text text
                            text text text text text text text text text text text text text text text
                            text text text text text text text text text text text text text text text
                            text text text text text text</p>
                    </div>
                </div>

            </div>
            <!-- ################################################################################################################################
            -->
            <div class="main-news-holder">
                <div class="news-date">
                    <p>2 sep</p>
                </div>
                <div class="news-header">
                    <p><a class="news-expand" href="#">Show more</a></p>
                    <div class="news-content-short">
                    <p>short short short short short</p>
                    </div>
                    <div class="news-content-full" style="display: none;">
                        <p>text text text text text text text text text text text text text text
                            text text text text text text text text text text text text text text text
                            text text text text text text text text text text text text text text text
                            text text text text text text text text text text text text text text text
                            text text text text text text text text text text text text text text text
                            text text text text text text</p>
                    </div>
                </div>

            </div>
    </body>

</html> 
```

希望这会有所帮助。

# c# - C# 显示选定文件夹中的所有文件

> ID：12973813
> 
> 赞同：3
> 
> 时间：2012-10-19T11:58:23.353
> 
> 标签：c#, wpf, fileinfo, directoryinfo

我想显示选定文件夹中的所有文件.. 即该文件夹中的文件和该选定文件夹中子文件夹中的文件。

例子 -

我选择了 D:\Eg。现在我有一些txt和pdf文件。我也有子文件夹，其中还包含一些 pdf 文件。现在我想在数据网格中显示所有这些文件。

我的代码是

```
public void  selectfolders(string filename)
{      
     FileInfo_Class fclass;
     dirInfo = new DirectoryInfo(filename);

     FileInfo[] info = dirInfo.GetFiles("*.*");
     foreach (FileInfo f in info)
     {

        fclass = new FileInfo_Class();
        fclass.Name = f.Name;
        fclass.length = Convert.ToUInt32(f.Length);
        fclass.DirectoryName = f.DirectoryName;
        fclass.FullName = f.FullName;
        fclass.Extension = f.Extension;

        obcinfo.Add(fclass);  
     }
     dataGrid1.DataContext = obcinfo;
} 
```

现在做什么？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-10-19T12:13:30.197

只需使用

```
FileInfo[] info = dirInfo.GetFiles("*.*", SearchOption.AllDirectories); 
```

它将为您处理递归。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-10-19T12:05:31.073

您应该[递归地](http://en.wikipedia.org/wiki/Recursion)从所有子文件夹中选择文件。

```
public void  selectfolders(string filename)
{
    FileInfo_Class fclass;
    DirectoryInfo dirInfo = new DirectoryInfo(filename);

    FileInfo[] info = dirInfo.GetFiles("*.*");
    foreach (FileInfo f in info)
    {
        fclass = new FileInfo_Class();
        fclass.Name = f.Name;
        fclass.length = Convert.ToUInt32(f.Length);
        fclass.DirectoryName = f.DirectoryName;
        fclass.FullName = f.FullName;
        fclass.Extension = f.Extension;
        obcinfo.Add(fclass);
    }
    DirectoryInfo[] subDirectories = dirInfo.GetDirectories();
    foreach(DirectoryInfo directory in subDirectories)
    {
        selectfolders(directory.FullName);
    }
} 
```

# objective-c - Objective-C 中的全屏通知

> ID：12973831
> 
> 赞同：0
> 
> 时间：2012-10-19T11:59:29.530
> 
> 标签：objective-c, macos

应用程序进入全屏模式时是否可以收到通知？因为当应用程序进入全屏时我必须重绘图像，现在我不能这样做，因为我不知道应用程序何时进入全屏。

我找到了方法：

```
- (void)windowDidEnterFullScreen:(NSNotification *)notification 
```

但我必须在哪里使用它？因为在`NSWindow`课堂上它不起作用。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-19T12:12:55.673

1.  [NSWindowDelegate 协议中的全屏 API：](https://developer.apple.com/library/mac/documentation/General/Conceptual/MOSXAppProgrammingGuide/FullScreenApp/FullScreenApp.html#//apple_ref/doc/uid/TP40010543-CH6-SW4)

    在窗口进入和退出全屏模式之前和之后发送以下通知：

    ```
    NSWindowWillEnterFullScreenNotification

    NSWindowDidEnterFullScreenNotification

    NSWindowWillExitFullScreenNotification

    NSWindowDidExitFullScreenNotification 
    ```

2.  [如何使用委托](https://developer.apple.com/library/mac/documentation/Cocoa/Conceptual/CocoaFundamentals/CommunicatingWithObjects/CommunicateWithObjects.html#//apple_ref/doc/uid/TP40002974-CH7-SW18)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-19T14:39:18.437

您也可以使用此功能

```
- (void)windowDidResize:(NSNotification *)notification{ 
} 
```

每当窗口大小发生变化时，都会调用此函数。

# iphone - 如何从数组中分离图像名称

> ID：12973833
> 
> 赞同：0
> 
> 时间：2012-10-19T11:59:37.877
> 
> 标签：iphone, ios, nsmutablearray

我有一个从数据库中检索的图像数组，我想检索图像数组中图像的名称，我试过这个，它不工作，

```
 - (NSString *)convertToDisplayName
 {
  NSMutableString *displayName = [[name mutableCopy] autorelease];
  [displayName replaceOccurrencesOfString:@".png" withString:@""
  options:NSLiteralSearch range:NSMakeRange(0, displayName.length)];
  [displayName replaceOccurrencesOfString:@"_" withString:@" "
  options:NSLiteralSearch range:NSMakeRange(0, displayName.length)];
  return displayName;
 } 
```

请帮助我。提前谢谢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T12:24:38.640

再小一点，

```
- (NSString *) convertToDisplayName:(NSString *) actual
{
    return [[actual stringByReplacingOccurrencesOfString:@".png" withString:@""] stringByReplacingOccurrencesOfString:@"_" withString:@" "];
}

 NSLog("@Result : %@",[self convertToDisplayName:@"test_file.png"]); 
```

> 结果：测试文件

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T12:13:58.683

试试这个代码行：

```
- (NSString *)convertToDisplayName
 {
  NSMutableString *displayName = [[name mutableCopy] autorelease];
  [displayName replaceOccurrencesOfString:@".png" withString:@""
  options:0 range:NSMakeRange(0, displayName.length)];
  [displayName replaceOccurrencesOfString:@"_" withString:@" "
  options:0 range:NSMakeRange(0, displayName.length)];
  return displayName;
 } 
```

# java - 我的 android 应用程序不想运行/显示

> ID：12973837
> 
> 赞同：-4
> 
> 时间：2012-10-19T11:59:53.970
> 
> 标签：java, android

当我运行我的 android 应用程序时，它什么也没有显示，然后它说：不幸的是，WSConnection 已停止。

只显示该消息...我尝试与普通未更改的android应用程序进行比较并尝试了一些东西，但一切都导致了同样的事情...

JAVA代码如下：

```
package com.androidclient.ws;

import org.ksoap2.SoapEnvelope;
import org.ksoap2.serialization.SoapObject;
import org.ksoap2.serialization.SoapPrimitive;
import org.ksoap2.serialization.SoapSerializationEnvelope;
import org.ksoap2.transport.HttpTransportSE;

import android.app.Activity;
import android.os.Bundle;
import android.view.Menu;
import android.widget.TextView;

import com.wsconnection.R;

public class WSClientActivity extends Activity 
    {
        private static final String SOAP_ACTION = "http://192.168.0.25/webapplication1/ws.asmx";
        private static final String METHOD_NAME = "HelloWorld";
        private static final String NAMESPACE = "http://microsoft.com/webservices/";
        private static final String URL = "http://192.168.0.25/webapplication1/ws.asmx?WSDL";
        /** Called when the activity is first created. */

        @Override
        public boolean onCreateOptionsMenu(Menu menu) 
            {
                getMenuInflater().inflate(R.menu.activity_main, menu);
                return true;
            }

        /*
        @Override
        public void onCreate(Bundle savedInstanceState) 
           {
              super.onCreate(savedInstanceState);
              setContentView(R.layout.activity_main);
           }
        */

        public void klicWS()
        {
             SoapObject request = new SoapObject(NAMESPACE, METHOD_NAME);                    
             SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(SoapEnvelope.VER11);
             envelope.setOutputSoapObject(request);
             HttpTransportSE ht = new HttpTransportSE(URL);

             try 
                {
                    ht.call(SOAP_ACTION, envelope);
                    SoapPrimitive response = (SoapPrimitive)envelope.getResponse();

                    TextView tv = new TextView(this);
                    tv.setText("Message :"+response.toString());
                    setContentView(tv);

                } 

             catch (Exception e) 
                {
                    e.printStackTrace();
                }
        }

    }

//XML CODE BELOW:

<FrameLayout xmlns:android="http://schemas.android.com/apk/res/android"
     xmlns:tools="http://schemas.android.com/tools"
     android:id="@+id/pager"
     android:layout_width="match_parent"
     android:layout_height="match_parent"
     tools:context="com.androidclient.ws.WSClientActivity" >

     <EditText
         android:id="@+id/editText2"
         android:layout_width="wrap_content"
         android:layout_height="wrap_content"
         android:hint="@string/text2"
         android:inputType="textNoSuggestions"
         android:ems="20" />

     <Button
         android:id="@+id/button1"
         android:layout_width="177dp"
         android:layout_height="86dp"
         android:text="@string/button1" />

</FrameLayout> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-19T12:05:20.820

You *must* call `setContentView(int)` in your `onCreate(Bundle)` method. You cannot just get rid of it.

# ios - iOS 上的 CvQueryHistValue_1D？

> ID：12973840
> 
> 赞同：1
> 
> 时间：2012-10-19T12:00:03.727
> 
> 标签：ios, opencv

我目前正在开发一个带有 OpenCV 框架的 iOS 应用程序，在我尝试包含这行代码之前一切正常

```
value=cvQueryHistValue_1D(hist,i); 
```

那时 XCode 告诉我“使用未声明的标识符 cvQueryHistValue_1D”。我找不到有关此的任何信息，因为许多教程都使用该调用并且应该可以正常工作。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T21:29:34.000

包括 compat.hpp

```
#include <opencv2/legacy/compat.hpp> 
```

# python - 通过 curl webpy 接收文件

> ID：12973842
> 
> 赞同：0
> 
> 时间：2012-10-19T12:00:05.047
> 
> 标签：python, web.py

我需要通过 webpy 中的 CURL 接收文件

```
import web
import json

class GetFile:

    def POST(self):
        try:
            i = web.input()
            data = web.data() 
        except Error(e):
            print e 
```

我不知道该怎么做，因为没有从 CURL 接收数据的示例

```
curl -o -H "Content-type: text/xml; charset=utf-8" -T doc.xml "http://localhost:8080/get_file 
```

我遇到了一个问题

```
HTTP/1.1 405 Method Not Allowed
Content-Type: text/html
Allow: GET
Transfer-Encoding: chunked
Date: Fri, 19 Oct 2012 11:54:13 GMT
Server: localhost 
```

谁能给我一个示例代码来通过 curl 上传文件并将其保存在某个位置。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T12:26:41.687

要获取文件，请使用 urllib

```
import urllib2
response = urllib2.urlopen('http://www.example.com/')
html = response.read() 
```

要上传文件，请确保将内容标记为[多部分表单数据](https://stackoverflow.com/questions/4526273/what-does-enctype-multipart-form-data-mean)：

```
curl -X POST -H "Content-Type: multipart/form-data;" --data-binary @doc.xml http://localhost:2332/upload 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T19:13:18.427

问题是`-T`curl 选项默认使用 PUT 方法，而您只实现了一个 POST 处理程序。您可以尝试使用`-X POST`, 或调查`-d`和 相关选项作为 的替代品`-T`，默认情况下将使用 POST。

或者，如果您打算使用 PUT 方法上传文件，则可以将 PUT 处理程序添加到您的类中。

# java - 分离 Android-Java 中的关注点

> ID：12973844
> 
> 赞同：1
> 
> 时间：2012-10-19T12:00:14.177
> 
> 标签：java, javascript, android

我不想在我的应用程序中硬编码我的`URL`和`API`方法。我在我的应用程序中做了类似的事情`JavaScript`。我如何在 中做同样的事情`Java`？这是`Revealing Module Pattern`.

```
var settings = (function() {
     var settings = {
         'URL': '',
         'login': 'something',
         'password': 'something'
     };

     return {
        getSettings: function(name) { return settings[name]; },
    };
})(); 
```

然后我会用它来进行我的 REST 通信，就像这样：

```
var url = settings.getSettings('URL'); 
```

我将如何处理 Java 类？任何文章或帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T12:34:34.330

您可以使用字符串资源存储来保存任何字符串 ( [http://developer.android.com/training/basics/firstapp/building-ui.html#Strings](http://developer.android.com/training/basics/firstapp/building-ui.html#Strings) )，因此您可以将信息放在那里。

希望您知道使用纯文本密码会使其容易被复制或轻松修改，因此您应该查看加密和数字签名以确保它不会被轻易发现并且它是 URL、用户名，以及您输入的密码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-19T12:29:12.363

您可以从属性文件中读取值。[java.util.Properties 的 javadoc](http://docs.oracle.com/javase/6/docs/api/java/util/Properties.html) 使用此类的一种非常常见的方法是将属性存储在文件中，然后调用该`load`方法从该文件中读取它们。在这种情况下，该`Properties`实例将取代`settings`您在 JavaScript 示例中使用的类。

# python - 检查变量是否用 Numpy 数组定义？

> ID：12973845
> 
> 赞同：8
> 
> 时间：2012-10-19T12:00:20.240
> 
> 标签：python, numpy

有时我有一种情况，我想测试一个变量是否`0`存在`None`。在纯 Python 中，这很简单

```
foo == True 
```

但是当`foo`可能是一个 Numpy 对象（例如`numpy.ndarray`）时，这不再起作用，我收到错误：

```
ValueError: The truth value of an array with more than one element is ambiguous. 
 Use a.any() or a.all() 
```

在这种情况下，我想要`a.any()`，但是这在不可迭代的对象上失败了。

当然我可以明确地检查 if `foo`is `0`or `None`，但我想知道是否有更优雅的方法来做到这一点。

如何检查任意对象（可迭代和不可迭代）是否`True`存在？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T12:09:04.463

只需使用[`np.all`](http://docs.scipy.org/doc/numpy/reference/generated/numpy.all.html)or[`np.any`](http://docs.scipy.org/doc/numpy/reference/generated/numpy.any.html)代替该`.all`方法。`np.all`如果它还不是一个数组，它将创建一个数组。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-19T12:07:24.757

我使用的方法是假设 try except 块中存在变量来包围语句：

```
try:
    do_something(foo)
except NameError:
    foo = something 
```

# c# - Moq 中未调用方法

> ID：12973847
> 
> 赞同：0
> 
> 时间：2012-10-19T12:00:28.900
> 
> 标签：c#, unit-testing, moq

我在试图理解为什么一个方法没有被调用时很迷茫。我创建了一个重现问题的小测试代码。

```
public interface ILoader
{
    IEnumerable<string> LoadAll();

    string LoadItem(int key);
}

public interface IStore
{
    IQueryable<string> Items { get; }
}

public abstract class StoreBase : IStore
{
    public void Load()
    {
        Items = LoadItems().ToArray().AsQueryable();
    }

    protected abstract IEnumerable<string> LoadItems();

    public IQueryable<string> Items { get; private set; }
}

public abstract class StoreBase2 : StoreBase
{
    private readonly ILoader _loader;

    protected StoreBase2(ILoader loader)
    {
        _loader = loader;
    }

    protected override IEnumerable<string> LoadItems()
    {
        return _loader.LoadAll();
    }
} 
```

在这里结束是测试的主体

```
Mock<ILoader> mockLoader = new Mock<ILoader>();
mockLoader.Setup(p => p.LoadAll()).Returns(() => Enumerable.Range(1, 10).Select(i => string.Format("Item: {0}", i)));
mockLoader.Setup(p => p.LoadItem(It.IsAny<int>())).Returns((int i) => string.Format("Item: {0}", i));

Mock<StoreBase2> mockStore = new Mock<StoreBase2>(mockLoader.Object);
mockStore.Object.Load();

mockLoader.Verify(p => p.LoadAll()); 
```

如果我介绍 StoreBase2 的具体实现（对不起命名），并且我使用它而不是模拟基类，它就可以工作。

```
public class StoreBaseImpl : StoreBase2
{
    public StoreBaseImpl(ILoader loader) : base(loader) {}
}

void MyTest() 
{
    Mock<ILoader> mockLoader = new Mock<ILoader>();
    mockLoader.Setup(p => p.LoadAll()).Returns(() => Enumerable.Range(1, 10).Select(i => string.Format("Item: {0}", i)));
    mockLoader.Setup(p => p.LoadItem(It.IsAny<int>())).Returns((int i) => string.Format("Item: {0}", i));

    var store = new StoreBaseImpl(mockLoader.Object);
    store.Load();
    mockLoader.Verify(p => p.LoadAll());
} 
```

我错过了什么吗？

编辑：添加到粘贴箱以便更轻松地访问代码： http: [//pastebin.com/ggV20wAw](http://pastebin.com/ggV20wAw)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T12:53:47.203

为您的商店模拟打开对基类的调用：

```
var mockStore = new Mock<StoreBase2>(mockLoader.Object) { CallBase = true }; 
```

如果您没有为成员设置期望，此选项定义是否将调用基本成员虚拟实现。因此，您无法为受保护成员设置期望，只有打开此选项才会`LoadItems()`调用`StoreBase2`. 否则`_loader.LoadAll()`不执行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T12:05:32.677

您没有设置模拟 Load(..) 方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-19T12:09:02.300

我认为您必须像这样使您的 .Setups() 可验证：

```
mockLoader.Setup(p => p.LoadAll()).Returns("Blah").Verifiable();
mockLoader.Setup(p => p.LoadItem(It.IsAny<int>())).Returns("Blah").Verifiable(); 
```

# php - 这个 Foreach 循环处理所有 $_POST 输入，如何使它更具体？

> ID：12973852
> 
> 赞同：0
> 
> 时间：2012-10-19T12:00:49.487
> 
> 标签：php

我在 HTML 端有这段代码：

```
<form action="testx.php" method="post">
<input type="hidden" name="block-1" value="001"/>
<input type="hidden" name="block-2" value="012"/>
<input type="hidden" name="block-3" value="002"/>
<input type="hidden" name="block-4" value="005"/>
<input type="hidden" name="block-5" value="008"/>

<input type="hidden" name="title" value="title goes here"/>
<input type="hidden" name="code" value="018439128484"/>
<input type="submit" value="Finish!" class="submit-btn" />
</form> 
```

我在 PHP 端有这个 Foreach 循环：

```
<?php
$i=0;
foreach($_POST as $name => $value)
{
   echo $i . " - " . $name . ": " . $value . "<br>";
   $i++;
}  
?> 
```

不幸的是，该 Foreach 循环进行所有输入...如何使该循环仅进行名称为“block-X”的输入？

我试着像这样尝试，但失败了：

```
$i=0;
$x = 'block-'.$i+1;
foreach($_POST[$x] as $name => $value) 
```

它说：**警告：为 foreach() 提供的参数无效**

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-19T12:02:52.463

尝试`$name`在循环内过滤，例如[`strpos`](http://php.net/manual/en/function.strpos.php)：

```
<?php
$i=0;
foreach($_POST as $name => $value)
{
   if(strpos($name, 'block-')===0) {
      echo $i . " - " . $name . ": " . $value . "<br>";
      $i++;
   }
}  
?> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-19T12:04:25.550

我现在看到的唯一方法是：

```
foreach($_POST as $name => $value)
{
   if(substr($name, 0, 5) == "block"){
    echo $i . " - " . $name . ": " . $value . "<br>";
    $i++;
  }
} 
```

编辑：有人比我快：x

另一种解决方案，可以避免字符串比较

```
while(isset($_POST["block-".$i])){
  echo $i . " - block-" . $i . ": " . $_POST["block-".$i] . "<br>";
  $i++;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-19T14:31:45.567

所有其他答案都是错误的。

您有 5 个您感兴趣的特定指标。它们是数字和连续的。你想从 1 迭代到 5。你*不想*迭代整个`$_POST`数组，选择性地跳过键，你**绝对**不想在这样一个微不足道的任务中涉及正则表达式。每个使用正则表达式来解决这个问题的答案都是完全错误的，使用`strpos`的答案也好不到哪里去。

用这个：

```
for ($i = 1; $i <= 5; ++$i) {
   echo "$i = block-$i: ", $_POST["block-$i"];
} 
```

# python - Python 和 90 毫秒超时

> ID：12973860
> 
> 赞同：0
> 
> 时间：2012-10-19T12:01:29.073
> 
> 标签：python

> **可能重复：**
> [如何限制 Python 中函数调用的执行时间](https://stackoverflow.com/questions/366682/how-to-limit-execution-time-of-a-function-call-in-python)

我有一个需要 90 毫秒超时的函数。如果以极高的准确性达到该限制，我该如何导致异常或中断或其他任何事情？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T12:03:53.850

在后台执行一个线程，等待大约（不能准确地完成）90 ms，然后设置一个原子布尔值来打破“等待”循环。

# java - Java：尽可能有效地比较哈希集

> ID：12973867
> 
> 赞同：0
> 
> 时间：2012-10-19T12:01:44.493
> 
> 标签：java, performance, hashset

我有 3 个哈希集。goodLinkSet、badLinkSet 和 testLinkSet。

goodLinkSet 包含一个有效的 URL 列表，而 badLinkSet 包含一个无效的 URL 列表。testLinkSet 包含一个 URL 列表，我需要检查它们是否好坏，这里的一些链接已经在其他两组中进行了测试。

我想要做的是删除出现在 goodLinkSet 和 badLinkSet 中的 testLinkSet 中的所有字符串/链接，这样我就不会多次测试 URL。我想尽可能高效和快速地做到这一点。每个循环的 A 似乎有点慢。

运行这个最有效的方法是什么？有什么功能可以为我做这件事吗？任何建议将不胜感激！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-19T12:04:21.557

> 我想要做的是删除出现在 goodLinkSet 和 badLinkSet 中的 testLinkSet 中的所有字符串/链接，这样我就不会多次测试 URL。

```
testLinkSet.removeAll(goodLinkSet);
testLinkSet.removeAll(badLinkSet); 
```

这将在内部运行一个循环，但除非您拥有（许多）数百万个链接，否则您将没有时间在完成之前数到 1。

如果您需要更好的性能，您应该跟踪每个单独的链接并在测试时删除/添加它们。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-19T12:09:07.610

> 我想要做的是删除出现在 goodLinkSet 和 badLinkSet 中的 testLinkSet 中的所有字符串/链接，这样我就不会多次测试 URL。

最有效的方法是不删除条目，而是根据需要对其进行测试。

```
for(URL url: testLinkSet) {
    if(goodLinkSet.conatins(url) || badListSet.conatins(url)) continue;

    // test url
} 
```

与执行相同数量的测试相比，这所做的工作要少得多，但要避免修改任何内容。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-19T12:36:55.130

您应该在插入时检查：

```
boolean addToTestLinkSet(String str) {
  if (goodLinkSet.contains(str) || badLinkSet.contains(str))
    return false;
  testLinkSet.add(str);
  return true;
} 
```

`contains()`on `HashSet`s 是 O(1)，所以开销应该很低。

该解决方案与 Peter 的解决方案非常相似，但具有使用更少内存的额外好处（因为它可以避免临时存储无用的条目`testLinkSet`）。

此外，如果您知道这一点`badLinkSet.size() > goodLinkSet.size()`，您甚至可以交换两组测试的顺序。

# java - 读取多个用户输入的单词并将它们拆分

> ID：12973871
> 
> 赞同：-3
> 
> 时间：2012-10-19T12:01:56.000
> 
> 标签：java, split, user-input

示例：彼得潘（或）茉莉矢车菊

我想在java中阅读，但想拆分名称和姓氏，例如，当用户输入名称和姓氏时，它必须将其拆分并将名称写入名称字段，将姓氏（第二个单词）写入数据库表中的姓氏字段用户。

那可能吗？如果是这样，我该怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-19T12:04:29.653

使用[String](http://docs.oracle.com/javase/6/docs/api/java/lang/String.html)类及其 split 方法。

```
String fullName = "peter pan";
String[] nameParts = name.split(" ");

System.out.println(nameParts[0] +" "+ nameParts[1]); // outputs peter pan 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-19T12:08:54.203

好吧，你总是可以使用[`String.split`](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/String.html#split%28java.lang.String%29)：

```
 String input = "peter  pan";
    String[] split = input.split("\\s+");
    System.out.println("First name: " + split[0] + ", last name: " + split[1]); 
```

输出：

```
 First name: peter, last name: pan 
```

如果你想从命令行读取，你可以这样做：

```
public static void main(String[] args) {
   if (args.length >= 2) {
     System.out.println("First name: " + args[0] + ", last name: " + args[1]);
   }
   else {
     System.out.println("Not enough arguments provided.\nInput line as array: "
         + Arrays.toString(args));
   }
 } 
```

# android - 如何在android中连接到无线网络？

> ID：12973872
> 
> 赞同：3
> 
> 时间：2012-10-19T12:01:57.467
> 
> 标签：android, android-wifi, android-wireless

我已经设法扫描无线网络并在我的应用程序中获得扫描结果。但是有没有办法我可以使用我的应用程序本身连接到他们？我想知道是否必须为我尝试连接的网络指定加密类型？我的要求是连接到任何无线网络，无论其加密类型如何？

有任何想法吗？谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-19T13:16:53.613

要连接到 WiFi AP，需要执行以下步骤：

1.  **扫描 WiFi**

    确保您有合适的 AP。请记住，您必须为受保护的 AP 提供密码。假设您知道自己喜欢的女巫 AP，现在我们将进行其他步骤：

2.  **创建新的个人资料**

    我们需要必须支持以下信息：

***什么类型的 AP 应该是***：开放点、WEP、WPA（或 WPA2），具有共享密钥身份验证、WPA2-Enterprise（RADIUS 服务器身份验证）

***优先级***- 优先级确定 wpa_supplicant 在选择要关联的接入点时给予网络的优先级（我设置默认值 1000）

***SSID*** - 接入点`Name`

***密码***- 如果它是安全的 AP。

这是一个演示该技术的片段方法：

我使用 single `enum TEncMode encMode`for switch 语句

```
....
WifiConfiguration wc = new WifiConfiguration();
    wc.allowedAuthAlgorithms.clear();
    wc.allowedGroupCiphers.clear();
    wc.allowedKeyManagement.clear();
    wc.allowedPairwiseCiphers.clear();
    wc.allowedProtocols.clear();

    switch (encMode) {
    case ENC_WEP:
        // If password is empty, it should be left untouched
        if (!TextUtils.isEmpty(pswd)) {

            wc.wepKeys[0] = TextUtil.convertToQuotedString(pswd);

        }

        wc.wepTxKeyIndex = 0;

        wc.allowedAuthAlgorithms.set(AuthAlgorithm.OPEN);
        wc.allowedAuthAlgorithms.set(AuthAlgorithm.SHARED);

        wc.allowedKeyManagement.set(KeyMgmt.NONE);

        wc.allowedGroupCiphers.set(GroupCipher.WEP40);
        wc.allowedGroupCiphers.set(GroupCipher.WEP104);
        break;

    case ENC_WPA:
    case ENC_WPA2:
        wc.allowedGroupCiphers.set(GroupCipher.TKIP);
        wc.allowedGroupCiphers.set(GroupCipher.CCMP);

        wc.allowedKeyManagement.set(KeyMgmt.WPA_PSK);

        wc.allowedPairwiseCiphers.set(PairwiseCipher.CCMP);
        wc.allowedPairwiseCiphers.set(PairwiseCipher.TKIP);

        wc.allowedProtocols.set(Protocol.RSN);
        wc.allowedProtocols.set(Protocol.WPA);

        // If password is empty, it should be left untouched
        if (!TextUtils.isEmpty(pswd)) {
            if (pswd.length() == 64) {
                // Goes unquoted as hex
                wc.preSharedKey = pswd;
            } else {
                // Goes quoted as ASCII
                wc.preSharedKey = TextUtil.convertToQuotedString(pswd);
            }
        }
        break;

        //      case ENC_WPA2_ENTERPRISE:
        ....
        //          break;

    default:
        wc.allowedKeyManagement.set(KeyMgmt.NONE);
        break;
    }

    // This is must be quoted according to the documentation 
    // http://developer.android.com/reference/android/net/wifi/WifiConfiguration.html#SSID
    wc.SSID = TextUtil.convertToQuotedString(ssid.toString());

    wc.hiddenSSID = false;
    wc.priority = prior;
    wc.BSSID = null;

    wc.status = WifiConfiguration.Status.ENABLED; 
```

现在我们根据我们的要求配置了新的 AP。现在让我们创建它：

1.  **仅创建新 AP**

    ```
     ....
     int res = -1;
     WifiManager m_WifiManager = (WifiManager)m_context.getSystemService(Context.WIFI_SERVICE); 
    ....
            /** If profile exists, do nothing  */
        if(ifConnectionProfileExists(ssid) == true){

            Log.i(Constants.TAG, "createConnectionProfile :: " + "CREATE_PROFILE ssid=" + ssid  + " exists");
        }
        else{
            res = m_WifiManager.addNetwork(wc);

            Log.i(Constants.TAG, "createConnectionProfile :: " + " CREATE_PROFILE ssid=" + ssid  + " dosn't exist, addNetwork ... res = " + res);

            // Don't make to AP high priority to connect
            //m_WifiManager.enableNetwork(res, false);  

            m_WifiManager.saveConfiguration();

            if(res != -1){
                             // profile created                 
            }
            else{           
             // failed to add profile   
            }
        } 
    ```

如果您跳过此实现，关闭 WiFi 后，您创建的 AP 将消失 `m_WifiManager.saveConfiguration();`

到目前为止一切顺利，我们可以等待android连接到我们的新AP，或者我们可以自己做

1.  **创建并连接到 AP**

    ```
     int res = -1;

        /** If profile exists, do nothing  */
        if(ifConnectionProfileExists(ssid) == true){

            res = getNetIdBySSID(ssid);
        }
        else{
            res = m_WifiManager.addNetwork(wc);             
        }

        // Don't make to AP high priority to connect
        boolean b = m_WifiManager.enableNetwork(res, true);      

        if(b == true){

            fixSupplicant();

            m_WifiManager.saveConfiguration();

            // start connect to AP
        }
        else{           
            // failed
        }

            ....

    private void fixSupplicant() {
        final SupplicantState state = m_WifiManager.getConnectionInfo().getSupplicantState();
        boolean isReconnectDone = false;

    if ((state == SupplicantState.SCANNING)
            || (state == SupplicantState.DISCONNECTED) 
            || (state == SupplicantState.DORMANT)) {
        isReconnectDone = m_WifiManager.reconnect();;

    }       
     }

       private boolean ifConnectionProfileExists(String ssid){

    List<WifiConfiguration> apProfiles = m_WifiManager.getConfiguredNetworks();

    // remove profile if exists:
    for (int i = 0; i < apProfiles.size(); i++) {

        final WifiConfiguration ap = apProfiles.get(i);

        if ((ap.SSID != null)) {        
            // try to find by SSID
            if (TextUtils.equals(ap.SSID), ssid) {                  
                return true;
            }
        }               
    }

    return false;
     } 
    ```

**枚举 TEncMode**

```
/**
* Represents encryption types modes of access points
*/
public enum TEncMode {

/**
 * No encryption (open spot)
 */
ENC_NONE(0),

/*
 * General encryption
 */
ENC_UNKNOWN(1),

/**
 * WEP
 */
ENC_WEP(2),

/**
 * WPA
 */
ENC_WPA(3),

/**
 * WPA (or WPA2), with shared-key authentication
 */
ENC_WPA2(4),

/**
 * WPA2-Enterprise (RADIUS Server authentication).
 */
ENC_WPA2_ENTERPRISE(5)
;

public static TEncMode
FromIntToEnum(
    int value ) throws Exception
{
    for ( TEncMode c : TEncMode.values() ) {
        if ( c.mId == value ) {
            return c;
        }
    }

    throw new AgException( new StringBuilder("Illegal TEncMode: ").append(value).toString() );
}

public int
FromEnumToInt() {
    return mId;
}

private TEncMode( int id ){
    mId = id;
}

private int mId;
} 
```

就这样。确保您可以监听 WiFi 状态更改为捕获`CONNECTED`事件。因为我们不知道设备连接到您的 AP 需要多长时间。但是我们禁用了所有其他 AP 并启用了新的 AP。在我们可以从谷歌获得 HTTP 响应以确保我们的 AP 有互联网之后。

要求我添加此方法：

```
 /**
 * Surround the given string in quotes.
 * 
 * @param string The text to surround in quotes.
 * @return string wrapped with quotes.
 */
static public String convertToQuotedString(String string){

    if (string==null) {
        string = "";
    }
    empty(workBuffer);
    workBuffer.append("\"");
    workBuffer.append(string);
    workBuffer.append("\"");

    return workBuffer.toString();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-19T12:13:12.083

我唯一知道的是检查 IP 地址以确定您的连接位置。我想选择 SSID 需要使用设备的接口（即向 WiFi 服务发出意图，而不是做你自己的选择器）。

对于它的价值，为了检测我连接的位置，我使用这样的东西：

```
package com.nifty.android.initialization;

import android.content.Context;
import android.net.wifi.WifiManager;
import android.telephony.TelephonyManager;
import android.util.Log;

import com.nifty.android.R;
import com.nifty.android.preferences.Preferences;

public class NetworkDetector {
    Context mContext = null;
    Preferences mPrefs = null;

    public static final String NONE                =        "none";
    public static final String HI_SPEED            =        "hiSpeed";
    public static final String MED_SPEED           =        "medSpeed";
    public static final String LOW_SPEED           =        "lowSpeed";

    public NetworkDetector(Context aContext) {
            mContext = aContext;
            mPrefs = new Preferences(aContext);

            WifiManager lWifiManager = (WifiManager) mContext.getSystemService(Context.WIFI_SERVICE);
            TelephonyManager lTelephonyManager = (TelephonyManager) mContext.getSystemService(Context.TELEPHONY_SERVICE);

            String netSpeed = null;

            if( (lWifiManager.isWifiEnabled() && lWifiManager.getConnectionInfo() != null && lWifiManager.getConnectionInfo().getIpAddress() != 0)) {
                    netSpeed = HI_SPEED;
            } else {
                    if(lTelephonyManager.getNetworkType() == TelephonyManager.NETWORK_TYPE_UMTS  && lTelephonyManager.getDataState() == TelephonyManager.DATA_CONNECTED) {
                            netSpeed = MED_SPEED;
                    } else {
                            if( (   lTelephonyManager != null && lTelephonyManager.getDataState() == TelephonyManager.DATA_CONNECTED) ){
                                    netSpeed = LOW_SPEED;
                            } else {
                                    netSpeed = NONE;
                            }
                    }
            }

            mPrefs.networkSpeed(netSpeed);
            }
    } 
```

# html - 在 html 代码上自动播放 wav 文件

> ID：12973877
> 
> 赞同：2
> 
> 时间：2012-10-19T12:02:23.943
> 
> 标签：html, audio, web, wav

我想在 html 代码上自动播放一个 wav 文件。我在互联网上找到了这个选项：

不要在任何浏览器上工作，但据报道工作：

```
<object type="audio/x-wav" data="http://www.hydrotoys.com/wavs/Beavis_cornholio.wav" width="320" height="260">
<param name="autostart" value="true" />
<param name="controller" value="true" />
<param name="src" value="http://www.hydrotoys.com/wavs/Beavis_cornholio.wav">
</object> 
```

如果安装了 Windows Media Player，则在 chrome、IE 上工作，对于 firefox 需要手动安装 wmp 播放器

```
<embed src="http://www.hydrotoys.com/wavs/Beavis_cornholio.wav" hidden="false" autostart="true" loop="false"> 
```

html5 解决方案，在 chrome 上工作，我在 mozilla 网站上得到了这个解决方案，但不能在 IE 上工作。

```
<audio src="http://www.hydrotoys.com/wavs/Beavis_cornholio.wav" type="audio/x-wav" controls autoplay="autoplay">
<p>Your browser does not support the audio element </p>
<source src="http://www.hydrotoys.com/wavs/Beavis_cornholio.wav"/> 
</audio> 
```

我在这个例子中使用了一个固定的 wav，但我使用这个代码在我的 Servlet 上生成我的音频

```
            response.setDateHeader("过期", 0);
            response.setHeader("Cache-Control", "no-cache, no-store, must-revalidate");
            response.setHeader("Pragma", "no-cache");
            response.setContentType("audio/x-wav");
            response.setContentLength(byteAudio.length);

```

有什么帮助吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-19T12:08:06.377

使用html5自动播放wav音频

```
<!DOCTYPE html>
 <html>
 <body>

 <audio controls="controls" autoplay="autoplay">
   <source src="horse.ogg" type="audio/ogg">
   <source src="horse.wav" type="audio/mpeg">
   Your browser does not support the audio element.
 </audio>

</body>
</html> 
```

# sql - SQL Server 2008，将“x”添加到自动增量值

> ID：12973878
> 
> 赞同：3
> 
> 时间：2012-10-19T12:02:26.020
> 
> 标签：sql, sql-server-2008

我正在使用 SQL Server 2008，我想做的是：

`update Daily set ReferenceNo = ReferenceNo + 100000`

我不能这样做，因为这是字段如下：`[ReferenceNo] [bigint] IDENTITY(1,1) NOT NULL,`

如果我尝试更改删除自动增量并保存表以执行我需要执行的操作，则会收到以下错误：

![在此处输入图像描述](../Images/87f9e3452aeb746100adbda9ddaa28e3.png)

有没有办法在不丢桌子的情况下做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-19T12:06:16.750

It's safety feature of SQL Server Management Studio - but you can turn it off :-)

Go to `Tools > Options` and then:

![enter image description here](../Images/fd6fcba4c8befaa9e7cf427fead72d81.png)

After you've disabled that option, you should be able to do what you want to do in the visual designer.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-19T12:07:13.173

我已经弄清楚了，对于遇到此问题的其他人，请执行以下操作：

在 SQL Server 2008 中，转到工具 > 选项 > 设计器 > 表和数据库设计器 > 防止保存需要重新创建表的更改。关闭此选项，您将能够再次保存表格。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-19T12:07:40.580

该错误表明 IDENTITY 列也是您的集群键。

查看上一个问题的[答案](https://stackoverflow.com/a/5347201/573261)。

它变得复杂，因为它是一个 IDENTITY 列，设计上不能更新。
因为您正在更新集群密钥，所以数据实际上已被删除并重新插入。鉴于它必须重写所有数据，只需重新创建表（触发器、同义词、函数、模式绑定视图和外键除外）就不再麻烦了。

# batch-file - Windows批处理脚本从html文件中查找字符串并将其复制到文本文件

> ID：12973880
> 
> 赞同：1
> 
> 时间：2012-10-19T12:02:43.787
> 
> 标签：batch-file

所以，我有一个带有如下行的html文件：

```
<script data-cfasync="false" type="text/javascript"> fid="RandonString"; v_width=620; v_height=490;</script> 
```

我的任务是找到**fid="RandomString"**并将 "" 之间的所有内容复制到文本文件中，而无需使用任何外部软件。RandonString 的长度为 2-100 个字符。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-20T21:55:06.193

这并不难，这里有一个 5 行的解决方案：

```
set "x=<script data-cfasync="false" type="text/javascript"> fid="RandonString"; v_width=620; v_height=490;</script>"
set "x=%x:*fid=%"
set "x=%x:";="&rem %
set  x=%x:~2%
echo %x% 
```

* * *

对正在发生的事情的解释。

您必须处理 5 个特殊字符，即字符串中的 , , , 以及`<`用于`>`修剪`=`尾随数据的字符。 `"``&`

**第 1-3 行：** `<>`都是重定向字符，因此要处理它们，需要将**整个**变量用双引号 ( `"`) 括起来。**但是**您不希望将双引号添加到变量本身。

**第 1 行**通过将第一个引号放在要设置的变量**之前**`x=`（" ），将第二个引号放在要设置的数据**之后**`<script data-cfasync="false" type="text/javascript"> fid="RandonString"; v_width=620; v_height=490;</script>`（ "），命令**SET**识别出引号不包含在变量中。因此可以正确设置带有特殊字符的变量数据。（将引号放在变量数据中也可以，但会在变量数据中添加 2 个特殊字符，使处理其他搜索和替换命令更加困难。）

**第 2 行**下一步是删除所有内容，包括`fid`，`*fid`匹配所有内容`fid`，然后`=%`将其替换为空。

**第 3 行**下一步是删除 之后的所有内容`";`，这需要一点技巧。`="&rem %`可以通过添加搜索和替换来欺骗命令处理器执行此操作。'=' 告诉命令处理器`;"`用后面的字符替换，但下一个字符是`"`，这使得前面的 set 命令成为带引号的命令，这意味着特殊`&`字符没有被引用，它可以被解释。这实际上将所有内容`&`放在了单独的行上，因此搜索和替换命令`";`什么都不替换。该`REM`语句用于确保匹配后的数据`";`不被解释为命令，也意味着任何重定向字符都将被忽略。

所以命令处理器看到的是：

```
set x=="RandonString
rem "; v_width=620; v_height=490;</script> 
```

设置`x`为`="RandonString`

**第 4 行**现在我们遇到了一个问题，因为`%x%`,`="`和`=`都是`"`特殊字符，`=`特别难以匹配。但是，幸运的是我们**知道**字符串现在以 开头`="`，所以解决方案很简单。我们通过告诉命令处理器从第二个字符开始（当前字符 0 = `=`，当前字符 1 = `"`，所以字符 2 = `R`）来跳过前两个字符。因此，由于**第 2 行**删除了所有内容（包括任何重定向字符）直到并包括`fid`，并且**第 3 行**删除`";`了所有内容，包括字符串末尾（包括任何重定向字符），
`%x:~2%`=`RandonString`. 删除所有重定向字符后，根本不需要引用该变量。

**第 5 行**只是回显变量`x`。

# jquery - （动态）表行更改的jQuery事件

> ID：12973889
> 
> 赞同：1
> 
> 时间：2012-10-19T12:03:07.310
> 
> 标签：jquery, jsp, events

因此，我一直在尝试监视我的动态表何时在行和 tbody 中发生变化。这是结构的一个示例：

```
<table id="assignedTable"> 
    <tbody class="assigned"> 
        <tr id="#uniquenumberhere">
        </tr> 
        <tr>
        </tr> 
    </tbody> 
</table> 
```

这是我到目前为止所得到的......但它不起作用：

```
$(function(){
            $('#assignedTable').on('change', '.assigned', function(){
                $('#assignableTbody').append("dynamic table changed");
            });
        }) 
```

希望任何人都可以提供帮助，在此先感谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-19T12:06:21.383

您不能在表上使用更改事件。查看 jquery 文档

> 当元素的值改变时，change 事件被发送到元素。此事件仅限于元素、框和元素。对于选择框，

[关于更改事件的 Jquery 文档](http://api.jquery.com/change/)

也许您可以尝试轮询表并计算表行数并查看该值是否发生变化，但这对性能不利。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-19T12:17:03.490

将您的表格重写为 div 或其他标签，为它们创建 css 规则以根据需要设计它们，您将能够为您的“根”div 定义更改事件处理程序。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-01-19T19:20:24.240

This is an old thread, but I had never needed to do this before but it is fairly simple by creating a function that you call when a row gets selected.

[JSFiddle](http://jsfiddle.net/brockangelo/ozycan94/)

```
var checkButton = function() {
    if ($('tr.selected').length > 0) {
        $('#analyze').prop('disabled', false);
    } else {
        $('#analyze').prop('disabled', true);
    }
}
$('#table tbody').on( 'click', 'tr', function () {
    $(this).toggleClass('selected');
    checkButton();
}); 
```

# c - 数组中第一个索引处的 C 未知访问冲突

> ID：12973890
> 
> 赞同：0
> 
> 时间：2012-10-19T12:03:17.970
> 
> 标签：c, access-violation, assign

下面我有一个构造给定字符串（str）的置换字符串的方法。我真的不知道为什么，但有时在调试时我会收到以下异常：

```
Unhandled exception at 0x01282665 in test.exe: 0xC0000005: Access violation 
writing     location 0x00000000. 
```

尝试在 ret_str (ret_str[l]=elem[0]) 中的索引 0 处分配 ('u')

```
unsigned char* getPermStr(long length,unsigned char* strt,unsigned char* elem){
    unsigned char* ret_str;
    long l = 0;
    ret_str = (unsigned char*) calloc(length,sizeof(unsigned char));
    while(l < length){
        if(elem < (strt+length-1)){
            ret_str[l]=elem[0];  // ACCESS VIOLATION HERE
            elem+=1;
        }else{
            ret_str[l]=elem[0];
            elem = strt;
        }
        l+=1; 
    }
    return ret_str;
} 
```

我不明白为什么会发生访问冲突......我在我的 ret_str 范围内，所以出了什么问题？顺便说一句：字符串 ret_str 在函数调用后被释放。

更新：elem 没有问题。原因是我分配了内存，而堆上没有用于动态分配的内存（由于大量内存泄漏），所以 calloc 返回了一个 NULL 指针。这就是发生错误的原因。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T12:25:09.807

您需要检查 elem 是否为空。如果它为 null，则您的函数应返回错误代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T12:06:51.147

`ret_str = (unsigned char*) calloc(length,sizeof(unsigned char));` 将此行更改为

```
ret_str = malloc(length * sizeof(unsigned char));
if(ret_str == NULL){ return "" ;}
//--whatever
while(l < length){
        if(elem < (strt+length-1)){
            ret_str[l]=elem[0];  // ACCESS VIOLATION HERE
            elem+=1;
        }else{
            ret_str[l]=elem[0];
            elem = strt;
        }
        l+=1; 
    } 
```

还要确保 elem 是可访问的。很有可能， elem 没有初始化。

# android - 将数据添加到 SQLite 后的动态显示

> ID：12973892
> 
> 赞同：0
> 
> 时间：2012-10-19T12:03:22.057
> 
> 标签：android, android-sqlite

我的主屏幕是从数据库中查询的姓名列表，单击时会提供有关姓名的某些信息（电话号码、层次结构、邮件 ID 等）。我还有编辑和添加新联系人的选项（我添加了按钮来这样做）。一切正常，但是，当我将名称更新到数据库时，我无法立即看到这些名称。但是当我重新运行应用程序时，我可以看到更改。如何动态***有效***地显示名称？我能想到的一件事是再次查询数据库，onResume 和 display。但我觉得它不够高效。我也可以使用 startActivityforResult() 但我不能按升序排列它们，我一次上传许多联系人。

代码

```
 // Make a New Database
    DBContact info = new DBContact(this);
    info.open();
    String[] data = info.queryAll();
    info.close();
    // Display the names
    ArrayAdapter<String> adapter = new ArrayAdapter<String>(Contacts.this,
            android.R.layout.simple_list_item_1, data);
    listview.setAdapter(adapter); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T12:05:32.490

您应该使用 LoaderManager 将数据库数据与数据库适配器挂钩。它会给你两个好处 -

1.  它不在 UI 线程上运行以获取数据，因此显示没有延迟。
2.  如果数据库中的某些内容发生更改，它将自动刷新数据。

更多细节在这里 - [https://developer.android.com/reference/android/app/LoaderManager.html](https://developer.android.com/reference/android/app/LoaderManager.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-19T12:05:58.607

您可以考虑使用 CursorAdapter 或 SimpleCursorAdapter，并直接在您的视图中使用它，而不是将查询结果包装在数组适配器中。

[http://developer.android.com/reference/android/widget/CursorAdapter.html](http://developer.android.com/reference/android/widget/CursorAdapter.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-19T12:06:40.790

查看文档中的[notifyDataSetChanged()](http://developer.android.com/reference/android/widget/ArrayAdapter.html#notifyDataSetChanged%28%29)。将数据添加到数据库后，调用它来更新列表。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-19T12:08:35.410

你需要做的2个任务：

1.  在数据库中添加数据
2.  检查数据是否插入成功，然后在您的适配器中添加相同的数据。修改适配器中的数据后不要忘记调用**[notifyDataSetChanged() 。](http://developer.android.com/reference/android/widget/ArrayAdapter.html#notifyDataSetChanged%28%29)**

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-03-02T12:50:04.787

作为解决方法尝试以这种方式重新启动加载程序：

```
getLoaderManager().restartLoader(0, null, this); 
```

# magento - 多个扩展上的 Magento Config 404

> ID：12973901
> 
> 赞同：0
> 
> 时间：2012-10-19T12:03:50.590
> 
> 标签：magento, configuration, http-status-code-404

我在通过 Magento Connect 2.0 安装的多个扩展上的 Magento (/admin > System > Configuration) 中遇到 404 错误。我认为这不是扩展的问题，而是我的安装问题。

你有过这样的经历吗？

提前致谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-19T12:06:14.910

这通常是因为您需要 ACL 权限才能查看配置，并且用户的 ACL 缓存在他们的会话中。如果您清除所有缓存、注销并重新登录，这应该可以解决。

# c# - 使用“en-US”文化作品将无效字符串“1,5”转换为 Single

> ID：12973916
> 
> 赞同：1
> 
> 时间：2012-10-19T12:04:32.660
> 
> 标签：c#, converter

我正在尝试实现一个数字转换器，它接受一个对象并将其转换为所需的类型。

但是我发现了一个问题：当我用“en-US”文化测试“1,5”时，Convert.ToSingle 和 Convert.Double 只是返回“15”而不是抛出一个它不能转换这个值的异常，我实际上会这样期望因为“1,5”无效。

有谁知道为什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-19T12:07:20.783

不，`"1,5"`是完全有效的。类似于如何`"1,500"`解析为`1500`. 基本上，`,`解析时会简单地忽略组分隔符（在 en-US 中）。

如果您不希望它这样做，请指定`NumberStyles`：

```
int i = int.Parse("1,5", NumberStyles.Integer); 
```

请注意，这是一个`[Flags]`枚举，重要的是我不包括`AllowThousands`. 另一种方法可能是：

```
int i = int.Parse("1,5", NumberStyles.Any & ~ NumberStyles.AllowThousands); 
```

它允许*除*组分隔符之外的所有内容。当然，`"1,500"`现在会失败。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-19T12:07:01.180

如果您指定例如俄罗斯文化 - ru-RU，它将起作用，但使用 en-US 您应该使用点。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-19T12:07:44.177

这是因为逗号是有效的组分隔符（用于表示千位）。

因此，虽然“1,5”对讲英语的人来说没有意义，但逗号会被解析忽略，因此该值被视为“15”。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-19T12:10:24.477

逗号是 en-US 的千位分隔符，因此可以接受。

代替`ToDouble()`or`ToSingle()`使用[`Double.TryParse()`](http://msdn.microsoft.com/en-us/library/3s27fasw.aspx)or [`Single.TryParse()`](http://msdn.microsoft.com/en-us/library/system.single.tryparse.aspx)，这些函数有一个附加`style`参数，可以更好地控制接受/拒绝哪些格式 - 请参见[此处](http://msdn.microsoft.com/en-us/library/system.globalization.numberstyles.aspx)的列表- 例如，您可以明确接受/拒绝组分隔符。

# wpf - ListView 中的单列居中，包含一个图像

> ID：12973918
> 
> 赞同：3
> 
> 时间：2012-10-19T12:04:36.657
> 
> 标签：wpf, listview, alignment

我有一个包含三列的 Listview。最后一列包含一个图像，该图像仅在该列绑定到的数据为真时才会显示。

```
<ListView HorizontalAlignment="Stretch" Margin="5" VerticalAlignment="Stretch" Name="lstPrinters"  ItemsSource="{Binding PrinterCollection}">
<ListView.View>
    <GridView>
            <GridViewColumn Width="140" Header="Name" DisplayMemberBinding="{Binding Name}" />
            <GridViewColumn Width="250" Header="UNC" DisplayMemberBinding="{Binding UNC}" />
                <GridViewColumn Width="50" Header="Default"  >
                <GridViewColumn.CellTemplate>
                    <DataTemplate>
                        <StackPanel Orientation="Horizontal" HorizontalAlignment="Center" >
                            <Image Width="16" Height="16"  Source="/PrinterController.Agent;component/images/GreenTick.png">
                                <Image.Style>
                                    <Style TargetType="{x:Type Image}" >
                                        <Style.Triggers>
                                            <DataTrigger Binding="{Binding IsDefault}" Value="false">
                                                <Setter Property="Visibility" Value="Collapsed" />
                                            </DataTrigger>
                                            <DataTrigger Binding="{Binding IsDefault}" Value="true">
                                                <Setter Property="Visibility" Value="Visible" />
                                            </DataTrigger>
                                        </Style.Triggers>
                                    </Style>
                                </Image.Style>
                            </Image>
                        </StackPanel>
                    </DataTemplate>
                </GridViewColumn.CellTemplate>
            </GridViewColumn>
        </GridView>
</ListView.View> 
```

我希望图像在列中水平居中，但无论我如何尝试它都不会居中。老实说，我已经尝试了很多方法来做到这一点，我开始忘记我拥有和没有尝试过的东西！我已经关注了所有我能找到的与这个问题相关的 SO 文章，但没有一个有效。我只希望这一列居中。

任何指针将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-19T12:50:42.727

将此添加到您的 ListView：

```
<ListView.ItemContainerStyle>
    <Style TargetType="ListViewItem">
        <Setter Property="HorizontalContentAlignment" Value="Stretch"/>
    </Style>
</ListView.ItemContainerStyle> 
```

# javascript - Update data using knockout and ajax call

> ID：12973922
> 
> 赞同：1
> 
> 时间：2012-10-19T12:04:51.850
> 
> 标签：javascript, json, knockout.js

I am doing ajax call to update data like below:

```
self.UpdateStatus = function () {
    $.ajax({
        type: "POST",
        url: 'Test.aspx/UpdateStatus',
         data: ko.toJSON({ data: self.Goals }),
        contentType: "application/json; charset=utf-8",
        success: function (result) {
            var resHTML = result.d;
            if (resHTML != "") {
                alert(result.d);
            }
        },
        error: function (XMLHttpRequest, textStatus, errorThrown) {
            alert(textStatus);
            alert(errorThrown);
        }
    });
    return true;
}; 
```

Where Task is my observable array.This is my task Array:

```
function Goals(d) {
    this.GoalID = ko.observable(d.GoalID);
    this.Goal = ko.observable(d.Goal);
    this.Note = ko.observable(d.Note);
    this.Status = ko.observable(d.Status);
} 
```

My update method header is like below

```
public static bool UpdateStatus(Goals[] goal)
//query to update status of a goal
        string sqlUpdateStatus = @"UPDATE M_USERGOAL_INFO 
                                        SET STATUS = true 
                                  WHERE PK_ID = " + **goal[].GoalID**; 
```

Where Goal is my class name. But its showing me error(client side): Internal server error **Message":"Invalid JSON primitive:** I am confused here whether i should pass that array here or variable(more than one in my case). ![Errror picture](../Images/feaa70b0755d12b203d89190eac2d6a9.png)

# javascript - 需要根据选中的复选框显示表单

> ID：12973925
> 
> 赞同：-5
> 
> 时间：2012-10-19T12:04:57.313
> 
> 标签：javascript, jquery, html

我需要这样的东西：

我有几个表格，（比如 form1、form2、form3 等。）

应根据用户选择的选项选择相应的形式。

假设我有一些复选框（命名为 form1、form2、form3 等）

无论选择何种复选框，都应动态选择相应的表单。

**我怎样才能做到这一点..？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T12:10:01.897

编写 Javascript 或 jQuery 代码并从复选框中侦听单击事件。

根据选中的复选框显示适当的表格。下面的示例可以帮助...

```
 <input type="checkbox" value="form1" onclick="document.getElementById('form1-container').style.display='block'; return false;">Form 1</input>

<div id="form1-container" style="display:none"><form></form></div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T12:32:51.880

如果您想要 JQuery 中的解决方案，请执行以下操作：

```
$(".formGroup").hide();
$('#chooseForm input:checkbox').on('change', function() {
    if($(this).is(':checked')) {
        $("#" + $(this).val()).show();
    }
    else {
        $("#" + $(this).val()).hide();
    }   
}); 
```

​ 一个完整的例子：http: [//jsfiddle.net/exttq/](http://jsfiddle.net/exttq/)

希望能帮助到你！

# javascript - PhoneGap application language

> ID：12973926
> 
> 赞同：0
> 
> 时间：2012-10-19T12:04:59.793
> 
> 标签：javascript, android, ios, cordova, windows-phone

Is it possible to [configure](https://build.phonegap.com/docs/config-xml) the application language?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T01:27:42.397

没有绝对答案，答案是否定的（我在文档中看不到任何关于语言的内容）。

# ruby-on-rails - Heroku SSL 证书不包含 cname

> ID：12973927
> 
> 赞同：0
> 
> 时间：2012-10-19T12:05:03.647
> 
> 标签：ruby-on-rails, ssl, heroku, https

我在 heroku (guestlist12.herokuapp.com) 上有一个应用程序，并且添加了域 guestlist.ch。我已经通过 cname www.guestlist.ch => guestlist12.herokuapp.com 完成了这项工作，因为我无法将我的 DNS 移离它现在所在的位置。

如何解决 SSL 证书的问题？现在，每当我访问该页面时，我都会收到一个错误，因为证书不等于页面的名称。如何配置 Heroku 或我的应用程序，以免发生这种情况？

非常感谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T12:17:31.727

Heroku 的通配符证书仅对`*.herokuapp.com`.

您必须为自定义域设置自己的 SSL 证书：

[https://devcenter.heroku.com/articles/ssl#customdomain-ssl](https://devcenter.heroku.com/articles/ssl#customdomain-ssl)

# django - 为什么 django 的 prefetch_related() 只适用于 all() 而不是 filter()？

> ID：12973929
> 
> 赞同：96
> 
> 时间：2012-10-19T12:05:16.400
> 
> 标签：django, orm, filter, prefetch

假设我有这个模型：

```
class PhotoAlbum(models.Model):
    title = models.CharField(max_length=128)
    author = models.CharField(max_length=128)

class Photo(models.Model):
    album = models.ForeignKey('PhotoAlbum')
    format = models.IntegerField() 
```

现在，如果我想有效地查看相册子集中的照片子集。我这样做是这样的：

```
someAlbums = PhotoAlbum.objects.filter(author="Davey Jones").prefetch_related("photo_set")
for a in someAlbums:
    somePhotos = a.photo_set.all() 
```

这仅执行两个查询，这是我所期望的（一个获取相册，然后一个像`SELECT * IN photos WHERE photoalbum_id IN ().

一切都很好。

但如果我这样做：

```
someAlbums = PhotoAlbum.objects.filter(author="Davey Jones").prefetch_related("photo_set")
for a in someAlbums:
    somePhotos = a.photo_set.filter(format=1) 
```

然后它会用`WHERE format = 1`! 我做错了什么还是 django 不够聪明，无法意识到它已经获取了所有照片并可以在 python 中过滤它们？我发誓我在文档的某个地方读到它应该这样做......

* * *

## 回答 #1

> 赞同：183
> 
> 时间：2012-10-19T12:58:48.713

在 Django 1.6 及更早版本中，无法避免额外的查询。该`prefetch_related`调用有效地缓存了`a.photoset.all()`查询集中每个专辑的结果。但是，`a.photoset.filter(format=1)`是一个不同的查询集，因此您将为每个专辑生成一个额外的查询。

这在 [`prefetch_related`](https://docs.djangoproject.com/en/stable/ref/models/querysets/#prefetch-objects)文档中进行了解释。`filter(format=1)`相当于`filter(spicy=True)`。_

请注意，您可以通过在 python 中过滤照片来减少数量或查询：

```
someAlbums = PhotoAlbum.objects.filter(author="Davey Jones").prefetch_related("photo_set")
for a in someAlbums:
    somePhotos = [p for p in a.photo_set.all() if p.format == 1] 
```

在 Django 1.7 中，有一个[`Prefetch()`](https://docs.djangoproject.com/en/stable/ref/models/querysets/#prefetch-objects)对象允许您控制`prefetch_related`.

```
from django.db.models import Prefetch

someAlbums = PhotoAlbum.objects.filter(author="Davey Jones").prefetch_related(
    Prefetch(
        "photo_set",
        queryset=Photo.objects.filter(format=1),
        to_attr="some_photos"
    )
)
for a in someAlbums:
    somePhotos = a.some_photos 
```

有关如何使用该`Prefetch`对象的更多示例，请参阅[`prefetch_related`](https://docs.djangoproject.com/en/stable/ref/models/querysets/#prefetch-objects)文档。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-10-19T13:24:10.520

从[文档](https://docs.djangoproject.com/en/dev/ref/models/querysets/#prefetch-related)：

> ...与 QuerySet 一样，任何暗示不同数据库查询的后续链接方法都将忽略以前缓存的结果，并使用新的数据库查询检索数据。因此，如果您编写以下内容：
> 
> `pizzas = Pizza.objects.prefetch_related('toppings')` `[list(pizza.toppings.filter(spicy=True)) for pizza in pizzas]`
> 
> ...那么，pizza.toppings.all() 已经被预取的事实对你没有帮助——事实上它会损害性能，因为你已经完成了一个你没有使用过的数据库查询。所以请谨慎使用此功能！

在您的情况下，“a.photo_set.filter(format=1)”被视为新查询。

此外，“photo_set”是一种反向查找——完全通过不同的管理器实现。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2020-10-08T10:56:15.467

`select_related`如果您想将它与 filter() 一起使用，可以使用它

```
results = Geography.objects.filter(state__pk = 1).select_related('country')
results.query 
```

更多信息：[https ://docs.djangoproject.com/en/3.1/ref/models/querysets/#select-related](https://docs.djangoproject.com/en/3.1/ref/models/querysets/#select-related)

# wpf - 将绑定从一个文本框复制到另一个

> ID：12973931
> 
> 赞同：3
> 
> 时间：2012-10-19T12:05:17.513
> 
> 标签：wpf, wpf-controls

希望来自新手的一个简单的入门问题......

我有一个 TextBox，其 Text 属性绑定到 ViewModel 和 DependencyProperty。

当我单击文本框时，我希望为第二个文本框（“编辑器”文本框）分配与第一个相同的绑定。结果是编辑第二个“编辑器”文本框将更新第一个。

最终，我希望能够单击任何文本框并在同一个“编辑器”文本框中进行编辑。

* * *

我使用选项 2 的解决方案...谢谢！！：

```
 private void m_sourceTextBox_MouseDoubleClick(object sender, MouseButtonEventArgs e)
    {
        TextBox sourceTextBox = sender as TextBox;
        if (null != sourceTextBox)
        {
            BindingExpression sourceBindExpression = sourceTextBox.GetBindingExpression(TextBox.TextProperty);

            if (sourceBindExpression != null && sourceBindExpression.ParentBinding != null && sourceBindExpression.ParentBinding.Path != null)
                m_editorTextBox.SetBinding(TextBox.TextProperty, sourceBindExpression.ParentBinding);
        }
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T12:26:07.270

我可以想到两种方法

第一个是`SelectedText`在您的 ViewModel 中拥有一个`EditorTextBox`绑定到的属性，并在您单击其他任何一个时设置此值`TextBoxes`。为此，您可能需要[AttachedCommandBehavior](http://marlongrech.wordpress.com/2008/12/13/attachedcommandbehavior-v2-aka-acb/)之类的东西，这样您就可以将 ViewModel 中的命令附加到 TextBox 的`Click`或`Focus`事件。

我能想到的另一种方法就是在代码隐藏中进行。在每个 TextBox 的`Click`or`Focus`事件中，获取`BindingExpression`所选 TextBox 的`TextProperty`，并将绑定复制到`EditorTextBox.Text`.

# arrays - 由有界数据类型索引的 Repa 数组？

> ID：12973935
> 
> 赞同：19
> 
> 时间：2012-10-19T12:05:22.523
> 
> 标签：arrays, haskell, repa

我想实现类似于标准数组包中的有界数组但使用 repa 数组的东西。

实现这一目标的好方法是什么？

这是我尝试过的，但必须有比将所有内容包装在检查边界的自定义函数中更好的方法：

```
import  Data.Array.Repa

data C = A | F | L deriving (Eq,Enum,Ord,Bounded,Show)

data Ballot c = Ballot {
    vote::Array U (Z :. Int) Int
    } deriving Show

mkBallot::(Eq c ,Enum c,Ord c, Bounded c, Show c) => c -> Ballot c
mkBallot c = Ballot $ fromListUnboxed (Z :. max) (genSc c)
where
    max = (fromEnum (maxBound `asTypeOf` c)) + 1

genSc::(Eq c,Enum c,Ord c,Bounded c,Show c) => c -> [Int]
genSc c = [ f x | x <- enumFrom (minBound `asTypeOf` c) , let f v = if x == c then 1 else 0]

showScore c b = index (vote b) (Z :. ((fromEnum c))) 
```

此外，我尝试为 (sh :. C) 派生一个 Shape 实例，但无济于事，我无法真正了解如何为我的数据类型实现 Shape 类中声明的一些接口。我正在写这个问题，希望其他人有办法，但如果没有，我会再试一次。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T00:09:32.290

您可以为有界枚举周围的包装器创建一个形状实例。我不确定这是最好的方法，但我认为它可以满足您的需求。

```
{-# LANGUAGE ScopedTypeVariables  #-}

import Data.Array.Repa 
```

在这里，我们在有界事物上创建一个形状实例。我们需要一个“完整”数组的索引结束。

```
data Idx a = Idx a | EOI
           deriving (Eq, Ord, Show)

fromIdx :: forall a . (Bounded a, Enum a) => Idx a -> Int
fromIdx EOI = fromEnum (maxBound :: a) - fromEnum (minBound :: a) + 1
fromIdx (Idx x) = fromEnum x - fromEnum (minBound :: a)

toIdx ::  forall a . (Bounded a, Enum a) => Int -> Idx a
toIdx i | i < 0 = error "negative index"
toIdx i = case compare i range of
  LT -> Idx $ toEnum (i + fromEnum (minBound :: a))
  EQ -> EOI
  GT -> error "out of range"
  where
    range = fromEnum (maxBound :: a) - fromEnum (minBound :: a) + 1

instance (Bounded a, Enum a, Ord a) => Shape (Idx a) where
  rank _ = 1
  zeroDim = Idx minBound
  unitDim = Idx $ succ minBound
  intersectDim EOI n = n
  intersectDim n EOI = n
  intersectDim (Idx n1) (Idx n2) = Idx $ min n1 n2
  addDim = error "undefined"
  size = fromIdx
  sizeIsValid _ = True
  toIndex _ n = fromIdx n
  fromIndex _ i = toIdx i
  inShapeRange _ _ EOI = error "bad index"
  inShapeRange n1 n2 n = n >= n1 && n <= n2
  listOfShape n = [fromIdx n]
  shapeOfList [i] = toIdx i
  shapeOfList _ = error "unsupported shape"
  deepSeq (Idx n) x = n `seq` x
  deepSeq _ x = x 
```

这样，选票部分就简单明了：

```
data C = A | F | L deriving (Eq, Enum, Ord, Bounded, Show)

data Ballot c = Ballot { vote :: Array U (Idx c) Int
                       } deriving Show

mkBallot :: (Eq c, Enum c, Ord c, Bounded c, Show c) => c -> Ballot c
mkBallot c = Ballot $ fromListUnboxed EOI vec
  where
    vec = map (fromEnum . (== c)) [minBound .. maxBound] 
```

# uitableview - iPhone 在 UITableViewCell 点击时弹出弹出窗口

> ID：12973936
> 
> 赞同：0
> 
> 时间：2012-10-19T12:05:24.647
> 
> 标签：uitableview, ios6

我有一个静态 UITableView，我希望我的一个单元格在单击时弹出一个对话框。

我有弹出窗口的代码，我正在使用以下方法对单元格选择进行操作

`- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath`

如何确定它是我想要的单元格，例如测试单元格标识符？如果我在表中添加新项目，我担心会按位置进行，尽管我知道我可以做到这一点

```
int row=indexPath.row;
int section=indexPath.section; 
```

我正在使用 IOS6 的故事板。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T12:20:09.770

如果您拥有的是包含多个部分的表格，我建议您定义自己的计数方法

```
- (int)getGlobalRowFor:(int)row at:(int)section {
if(section == 0) {
    return row;
} else {
    int count = 0;
    for(int i = 0; i < section; i++) {
        count += [[[self.sections objectAtIndex:i] objectForKey:@"sectionCount"] intValue];
    }
    return count + row;
   }
} 
```

它告诉你它在全球方面的位置。除此之外，您只需要询问您查看它在屏幕上的位置就可以了！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T12:09:10.687

您需要找到该单元格的唯一属性，例如位置、文本或图像等。
如果没有唯一属性，您可以在创建标签属性时将其设置为唯一值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-23T13:19:00.173

我认为 Michal 的答案需要我做一些额外的工作。

我实际上更改了应用程序，以便单元格只加载另一个表格视图，因为我认为最好将这些功能分开。

使用故事板从静态表格创建推送转场很容易，只需右键单击单元格并拖动到所需的视图。

# heroku - heroku 可以支持多于一种语言吗

> ID：12973937
> 
> 赞同：1
> 
> 时间：2012-10-19T12:05:27.687
> 
> 标签：heroku

如果我的应用程序有三个 Web 服务，其中两个是 Java，第三个是 node.js，heroku 会支持吗？

我们可以在 Heroku 应用程序中部署多个 WAR 吗？

请让我知道在 heroku 上部署它的详细信息。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T15:51:13.290

这有点违背 Heroku 的设计理念，后者倾向于在 dyno 之间分离服务。最好使用两个或三个 Heroku 应用程序来为您的应用程序提供服务，按语言或 Web 服务分隔。

从技术角度来看，您无法使用默认的 Heroku web dyno 环境来执行此操作，因为根据应用程序是 Java 还是 node.js，将不同的软件加载到 dyno 上。被检测为 java 的应用程序将没有 node.js 所需的二进制文件和库，反之亦然。

但是，从技术上讲，没有什么能阻止您制作自己的[Heroku buildpack](https://devcenter.heroku.com/articles/buildpacks)，其中包含同时运行 Java 和 node.js 所需的所有软件。您可以查看 Heroku 的 github 帐户，了解他们如何构建 Java 和 node.js 构建包并以某种方式合并软件。这是一个大项目，因为您必须通过 Vulcan 使用 Heroku buildpack 构建环境，并剖析两个 buildpack 的构建和应用检测脚本以合并它们。但是，没有实际的规则反对它，也没有技术原因导致你最终无法让它工作。

# ios - Storyboard & Seque: How does the presenting VC know when the presented VC dismisses itself?

> ID：12973939
> 
> 赞同：0
> 
> 时间：2012-10-19T12:05:29.833
> 
> 标签：ios, uiviewcontroller, storyboard, uistoryboardsegue

I have a two scene StoryBoard in my app - it uses an automatic segue (created in IB). When a button is clicked in the 1st `UIViewController` the 2nd `UIViewController` is presented modally.

The 1st `UIViewController` needs to know when second the 2nd `UIViewController` dismisses itself. What is the correct way to achieve this? Right now, I'm using `-viewDidAppear:` in the 1st vc but that doesn't seem right.

Any pointers would be much appreciated.

Best, CS

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T18:24:22.693

只需按照 Apple 使用 SDK 提供的旨在以模态方式呈现的 ViewController 的方式进行操作：MFMailComposer、UIImagePicker 等。

使用委托。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-19T12:52:46.777

您可以使用通知来确保您仅在 vc2 解雇时执行任务。

```
// in vc1
[[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(doSomethingWhenVC2Dismissed) name:@"vc_2_dismissed" object:nil];

// in vc2
[[NSNotificationCenter defaultCenter] postNotificationName:@"vc_2_dismissed" object:nil]; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-19T12:22:25.557

你在做什么，加上检查`isMovingToParentViewController`是否，应该适用于这种特定情况。如果您曾经有其他从第一个触发的视图控制器并且您想要区分它们，这将无济于事。

最直接的方法是让模态控制器在它消失时发布通知。

# android - 单击视图寻呼机第二个片段中的按钮时返回视图寻呼机的第一个片段

> ID：12973940
> 
> 赞同：1
> 
> 时间：2012-10-19T12:05:31.183
> 
> 标签：android, android-fragments, android-viewpager

我正在使用视图寻呼机，因为我有三个片段。在我的第二个片段中，我点击按钮将您带到第一个片段。

我是片段的新手。所以请给我你的宝贵建议和链接。

提前谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T12:12:15.373

单击第二个片段中的按钮时，从您的片段与您的父活动通信，即要显示第一个片段。然后，您的父活动可以在您的视图寻呼机中调用一个函数，该函数显示第一个片段。

在片段中定义一个接口 -

```
OnCategorySelectedListener mCallback;
 // Container Activity must implement this interface. 
    public interface OnBackSelectedListener {
        // Called when the user clicks back button
        public void onBackSelected();
    } 
```

在 onAttach() 中，链接回调 -

```
try {
            mCallback = (OnBackSelectedListener) activity;
        } catch (ClassCastException e) {
            throw new ClassCastException(activity.toString()
                    + " must implement OnBackSelectedListener");
        } 
```

当点击返回按钮时，调用回调接口方法——

```
mCallback.onBackSelected(); 
```

在您的视图寻呼机中，实现 onBackSelectedListener 接口。

# java - Mule ESB 通过 HTTPS 接收

> ID：12973949
> 
> 赞同：0
> 
> 时间：2012-10-19T12:05:52.353
> 
> 标签：java, esb, mule

现在最后一个骡子问题：

```
<https:connector name="httpsConnector" doc:name="HTTP\HTTPS">
<https:tls-key-store path="keystore.jks" keyPassword="pass" storePassword="pass"/>
</https:connector>

<https:inbound-endpoint exchange-pattern="request-response" host="localhost" port="65081" path="path" connector-ref="httpsConnector" doc:name="HTTP"/> 
```

所以我的代码中有这两个片段，但每当它开始时，我都会得到：

```
1\. The required object/property "tls-key-store" is null (org.mule.transport.ConnectException) 
```

但是 tls-key-store 不为空。

这是怎么回事？

谢谢

汤姆

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T14:35:40.150

这通常是当 keystore.jks 在您的应用程序中找不到时引起的。您能否确保它存在于类路径中或将整个路径设置为路径属性的值

# actionscript-3 - Can I record a sound channel in AS3?

> ID：12973951
> 
> 赞同：4
> 
> 时间：2012-10-19T12:05:55.220
> 
> 标签：actionscript-3, flash, audio

Would it be possible to record the audio of a sound channel and then store it in a MP3 format? I know it is possible to use a SoundStream to dynamically stream the audio played and record it at the same time, but could I record a sound channel?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T21:26:04.483

这应该回答你的问题：[http ://active.tutsplus.com/tutorials/actionscript/create-a-useful-audio-recorder-app-in-actionscript-3/](http://active.tutsplus.com/tutorials/actionscript/create-a-useful-audio-recorder-app-in-actionscript-3/)

跳到代码部分。我不太确定 .mp3 （您可能必须安装第三方编解码器，但不要引用我的话……），但可以将其保存为 .wav。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T06:29:58.990

我已经发布了一个类似的问题，我得到了答案。

[在 AS3 中以 mp3 格式录制和保存音频](https://stackoverflow.com/questions/11341945/how-to-record-audio-and-save-it-in-mp3-format-in-as3-adobe-air2-5)

好运。

# c - Mathematical calculation in C

> ID：12973953
> 
> 赞同：-3
> 
> 时间：2012-10-19T12:05:59.387
> 
> 标签：c

I have started working with C language recently. I have one simple problem

```
 Unsigned int a;
 float b;
  a=8000;
 b=(((((float)a)/65535)-1)/0.245);    //  b= ((a/65535)-1)/0.245;
 printf("value:%f \r\n", b); 
```

I don't know what is the problem in the above formula but I am not able to print "b" value. I will get "b value as negative". how to print "b value"?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T12:12:03.600

```
8000 / 65535         =  0,122072175
0,122072175 - 1      = -0,877927825
-0,877927825 / 0,245 = -3,58337888 
```

如果`-3,5833`是您获得的值，那么您将获得正确的结果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T12:14:09.637

如果您只想要 b 的原始值，则必须这样做

```
b = fabsf(b);
OR
printf("value:%f \r\n", fabsf(b)); 
```

因为对于 a < 65535.0 的所有 a 值，此 b 始终为负

这是假设您包含一个数学库。

# java - Scriptella encoding issue in migrating utf-8 data from access (mdb) to Oracle

> ID：12973960
> 
> 赞同：0
> 
> 时间：2012-10-19T12:06:19.793
> 
> 标签：java, oracle, ms-access, character-encoding, scriptella

I wrote program using java and scriptella(etl framework) to move data from access(mdb) to oracle, I changed the unicodeCompression in Access for each field to YES and I'v tested oracle encoding by adding utf-8 data in SqlDeveloper which is ok,Now when I run the program to move the data to Oracle I got questionMarks in records.

here is my etl

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE etl SYSTEM "http://scriptella.javaforge.com/dtd/etl.dtd">
<etl>
    <connection id="dbInput"  url="jdbc:odbc:Driver={Microsoft Access Driver (*.mdb)};DBQ=$MDB_FILE_NAME" />
    <connection id="dbOutput"  url="jdbc:oracle:thin:@localhost:1521:xe" user="user"    password="pass" />
    <query connection-id="dbInput" >
        SELECT * FROM table1;
        <script connection-id="dbOutput"> 
            INSERT INTO some_table(COLUMN1, COLUMN2, COLUMN3) values (?field1,
            ?field2, ?field3);
        </script>
    </query>
</etl> 
```

What's wrong with that?

I'v seen input/output encoding in ETL tools such as jasperETL , is there something like that in scriptella ?

![Access data](../Images/62aa766c3af140f8dcc80ee31c072dcb.png) ![moved data in oracle , the last one(id=4) I filled in SqlDeveloper](../Images/1d8f08347f1ca7bcf16acf42732bcb7d.png) moved data in oracle , the last one(id=4) I filled it directly in SqlDeveloper

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T19:13:08.037

尝试设置[Java 5 中引入](http://docs.oracle.com/javase/1.5.0/docs/guide/jdbc/bridge.html)的 charSet 属性：

```
<connection id="dbInput"  url="jdbc:odbc:Driver={Microsoft Access Driver (*.mdb)};DBQ=$MDB_FILE_NAME">
    charSet=UTF-8
</connection> 
```

# javascript - 如何使用 javascript 在 Asp.Net 中让访问者“喜欢”我的 Facebook 页面？

> ID：12973962
> 
> 赞同：-2
> 
> 时间：2012-10-19T12:06:20.040
> 
> 标签：javascript, asp.net, facebook, facebook-like

我想在我的网站上添加一个脸书“喜欢”框，但我很困惑我怎么能做到这一点，当访问者来到我的网站时，他可以在 facebook 上喜欢我的页面。我可以使用 javascript 或任何其他方式执行此操作吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-19T12:20:03.500

[从此处](https://developers.facebook.com/docs/reference/plugins/like/)获取您的“赞”按钮代码并将其粘贴到您的网站中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-19T12:09:04.567

Facebook 提供[了一种工具](https://developers.facebook.com/docs/reference/plugins/like/)来生成您需要的代码。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-19T12:10:29.013

这是一个简单的剪切和粘贴练习：

[http://www.webmonkey.com/2010/04/adding-facebook-like-buttons-to-your-site-is-damn-easy/](http://www.webmonkey.com/2010/04/adding-facebook-like-buttons-to-your-site-is-damn-easy/)

[https://developers.facebook.com/docs/reference/plugins/like/](https://developers.facebook.com/docs/reference/plugins/like/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-19T12:11:03.070

[你的意思是像这样](http://www.webmonkey.com/2010/04/adding-facebook-like-buttons-to-your-site-is-damn-easy/)的标准“喜欢按钮” ？

# performance - Using sapply vs. for to efficiently write to preallocated data structures

> ID：12973963
> 
> 赞同：6
> 
> 时间：2012-10-19T12:06:23.647
> 
> 标签：performance, r

Assume I have a preallocated data structure that I want to write into for the sake of performance vs. growing the data structure over time. First I tried this using sapply:

```
set.seed(1)
count <- 5
pre <- numeric(count)

sapply(1:count, function(i) {
  pre[i] <- rnorm(1)
})
pre
# [1] 0 0 0 0 0

for(i in 1:count) {
  pre[i] <- rnorm(1)
}
pre
# [1] -0.8204684  0.4874291  0.7383247  0.5757814 -0.3053884 
```

I assume this is because the anonymous function in `sapply` is in a different scope (or is it environment in R?) and as a result the `pre` object isn't the same. The for loop exists in the same scope/environment and so it works as expected.

I've generally tried to adopt the R mechanisms for iteration with apply functions vs. for, but I don't see a way around it here. Is there something different I should be doing or a better idiom for this type of operation?

As noted, my example is highly contrived, I have no interested in generaring normal deviates. Instead my actual code is dealing with a 4 column 1.5 million row dataframe. Previously I was relying on growing and merging to get a final dataframe and decided to try to avoid merges and preallocate based on benchmarking.

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-19T13:57:46.827

`sapply`不应该那样使用。它已经预先分配了结果。

无论如何，for 循环不太可能是导致性能下降的原因。这可能是因为您反复对 data.frame 进行子集化。例如：

```
set.seed(21)
N <- 1e4
d <- data.frame(n=1:N, s=sample(letters, N, TRUE))
l <- as.list(d)
set.seed(21)
system.time(for(i in 1:N) { d$n[i] <- rnorm(1); d$s <- sample(letters,1) })
#   user  system elapsed 
#   6.12    0.00    6.17 
set.seed(21)
system.time(for(i in 1:N) { l$n[i] <- rnorm(1); l$s <- sample(letters,1) })
#   user  system elapsed 
#   0.14    0.00    0.14 
D <- as.data.frame(l, stringsAsFactors=FALSE)
identical(d,D)
# [1] TRUE 
```

*因此，您应该遍历各个向量并在循环后将*它们组合成一个 data.frame 。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-19T12:21:54.133

该`apply`系列不适用于产生副作用的任务，例如更改变量的状态。这些函数旨在简单地返回值，然后将其分配给变量。这与 R 部分赞同的功能范式是一致的。如果您按预期使用这些功能，预分配不会出现太多，这是它们吸引力的一部分。您可以轻松地做到这一点，而无需预先分配：`p <- sapply(1:count, function(i) rnorm(1))`。但是这个例子有点人为——`p <- rnorm(5)`是你会使用的。

如果您的实际问题与此不同，并且您遇到效率问题，请查看`vapply`. 它就像`sapply`，但允许您指定生成的数据类型，从而使其具有速度优势。如果这没有帮助，请查看软件包`data.table`或`ff`.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-19T12:21:41.123

是的，您实际上是在更改`pre`匿名函数的局部变量 a，该函数本身将返回最后一次评估的结果（长度为 1 的向量），因此`sapply()`将正确的解作为向量返回（因为它累积了单个长度为 1 的向量）但它不会改变`pre`全局工作区中的。

您可以使用`<<-`运算符解决此问题：

```
set.seed(1)
count <- 5
pre <- numeric(count)

sapply(1:count, function(i) {
  pre[i] <<- rnorm(1)
})
> pre
[1] -0.6264538  0.1836433 -0.8356286  1.5952808  0.3295078 
```

这已经改变了`pre`，但出于各种原因，我会避免这样做。

在这种情况下，我认为在这种情况下预分配不会有太多`pre`好处`sapply()`。

* * *

此外，对于这个例子，两者都非常低效。只需`rnorm()`生成`count`随机数。但我想这个例子只是为了说明这一点？

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-19T12:39:00.857

我不确定你在问什么。在这种情况下，sapply 的传统习语是

```
pre <- sapply( 1:count, function(x) rnorm(1) ) 
```

在那里，您根本不必预先分配，但您不受限制使用预先分配的变量。

我猜如果你提出你想要改变的实际循环，事情会更清楚。你说你遇到了性能问题，你可能会在这里得到一个可以真正优化事情的答案。有一些回答者喜欢这样的挑战。

听起来你有一个很长的函数或循环。apply 系列函数主要用于表达性，并允许您在混合矢量化函数和无法实现的事物时使其更加清晰。与矢量化函数混合的多个小`sapply`调用比 R 中的一个大循环快得多。

# android - How to handle seekbar for dragging in android

> ID：12973964
> 
> 赞同：0
> 
> 时间：2012-10-19T12:06:27.233
> 
> 标签：android, seekbar

I have a seekbar in my app, which shows the level of age in it. If i touch that seekbar it updates the age in the textview, but i can't able to drag continuously and it stops dragging. for every value have to make touch event separately but not continous

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T16:38:00.713

最后，它有效

```
holder.ageSeekbar.setFocusable(false); 
```

我删除了搜索栏的焦点

# java - 使用 Perl5Matcher 的正则表达式模式

> ID：12973983
> 
> 赞同：0
> 
> 时间：2012-10-19T12:07:27.233
> 
> 标签：java, regex, apache

我正在尝试为以下字符串编写模式匹配器

```
show int sh 1/1/06
SHDSL 1/1/6 
Description                      3599979
Constellation (bits/baud)        30 
```

我需要得到'show int sh'和'SHDSL'和'Description'的值等等......

它应该缩小空格并获取相应字符串的值。

任何人都可以指导我编写相同的正则表达式模式吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T12:13:02.523

您可以在**多行模式下使用此正则表达式**

`^show int sh\s*(.*)$`

`^show int sh\s*``show int sh`在`^`所需数据之前检查行首

`\s*`匹配 0 个或更多空格，直到第一个非空格字符

`(.*)$`捕获所需的值，直到第**1 组**`$`中的行尾

 **所以这里是所有的正则表达式

使用**多行模式**

`^show int sh\s*(.*)$`

`^SHDSL\s*(.*)$`

`^Description\s*(.*)$`

`^Constellation\s*(.*)$`

**或**单个正则表达式

`^((show int sh|SHDSL|Description|Constellation)\s*).*$`**

# spring - Spring security，自定义登录表单：显示匹配 SPRING_SECURITY_LAST_EXCEPTION 的自定义消息

> ID：12973984
> 
> 赞同：2
> 
> 时间：2012-10-19T12:07:33.560
> 
> 标签：spring, error-handling, spring-security, type-mismatch

我正在实施 Spring Security 并且我有一个自定义登录表单，例如：

```
<c:if test="${not empty param.error}">
  <div class="errorblock">
    LOGIN ERROR<br/>
    Reason: ${sessionScope["SPRING_SECURITY_LAST_EXCEPTION"].message}<br/>
  </div>
</c:if>

<form method="POST" action="<c:url value="/j_spring_security_check"/>">
    ...
</form> 
```

到目前为止一切顺利，显示的原因符合预期（即，`Could not open Hibernate Session for transaction; nested exception is org.hibernate.TransactionException: JDBC begin failed`如果我的数据库已关闭）

我希望能够显示更用户友好的消息，例如“数据库问题，请联系管理员”

我尝试添加`typeMismatch.org.hibernate.TransactionException=Unable to connect to databse, please contact an admin`到我`messages.properties`已经用来覆盖 Spring security auth 异常的内容，请参阅[如何在 jsp 中为 spring security auth 异常显示自定义错误消息](https://stackoverflow.com/questions/1373407/how-to-display-custom-error-message-in-jsp-for-spring-security-auth-exception)

我不太确定如何“调用”此自定义错误消息。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T12:38:32.507

您引用的线程中的方法仅在您想要更改现有 Spring 消息的消息时才有效，您可以在 security-core jar 内的 message.properties 文件中看到该消息。所以这对你想做的事情不起作用。您可以在失败时定向到另一个控制器（请参阅 authentication-failure-url）并在那里执行您想要的任何自定义错误处理，然后显示您的登录表单视图，以显示您构建的消息。

# node.js - 使用 node.js/socket.io 构建实时大型多人游戏的成本有多高？

> ID：12973991
> 
> 赞同：7
> 
> 时间：2012-10-19T12:07:47.860
> 
> 标签：node.js, websocket, socket.io, multiplayer

您好我正在尝试使用 node.js 和 socket.io 构建一个实时多人游戏。

现在，在编码方面实现本身不会有太大问题，但是来自传统的 http 请求-响应 Web 编程模型，我不知道这在流量和服务器负载方面会有多昂贵。基本上在游戏过程中，玩家的浏览器应该实时跟踪鼠标输入事件，并不断将它们广播给同一游戏中的所有其他玩家。

这是一个例子，假设我的头像在屏幕上跟随我的鼠标指针，它应该实时广播给屏幕上的其他玩家。我会做类似的事情：

```
// client side
$(document).on("mousemove", function(event){
    io.emit("coordinate", {x: event.pageX, y: event.pageY});
}); 
```

在服务器上：

```
// server side
io.sockets.on("connection", function(socket){
    ...
    socket.on("coordinate", function(coordinate){
        socket.get("username", function(err, username){
            socket.broadcast.emit("move", {username: username, coordinate:coordinate});
        });
    });
    ...
}); 
```

我认为这应该可行，但这需要浏览器每秒向服务器发送几个事件，服务器随后应将它们广播给同一游戏中的其他玩家，我担心这会带来什么影响。但有一件事是，正在传输的每个数据片段的大小并没有那么大（基本上它只是一个 x 和 y 坐标）。如果这太贵了，无论这游戏多么出色，我都认为我无法发布它。谁能启发我？谢谢你。

[编辑]为了澄清，我不是在问如何使这个架构更高效。我只是想知道这种类型的系统在系统负载（和维护成本）方面是否足够现实 对于普通的 Web 服务，我可以通过查看页面浏览量来估计成本，但 websocket 是一个全新的领域，我不知道的，所以我想问。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-26T17:52:30.340

警告：下面的所有数字都是估计的，在很多地方都有开销，但应该给你一个开始的地方。

如果您所做的只是在连接之间来回推送数据，那么服务器似乎不太可能成为您的瓶颈。我认为您将在带宽方面遇到第一堵墙（在播放器端和/或数据中心端）。

假设每个用户平均**每秒推送 25 次**鼠标数据，这意味着每个用户每秒将下载**25 个播放**器。假设每条鼠标移动消息是 100 字节并且有**20 个播放**器，这意味着您（天真地）**每秒下载 ~50kb**，这是相当高的但可以实现的。我天真地说，因为会有开销，但如果连接得当，感觉是可以实现的。

下载带宽与播放器数量呈线性关系，因此在**100 个播放器时，客户端的下载带宽更像 250kb/s，而服务器端**的下载带宽则为 22Mb/s 。

如果您需要更多播放器，则需要进行优化，例如修剪消息、数据压缩、限制鼠标采样速度等。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-25T17:48:00.650

一百万美元的问题是：`I just want to know if this type of system is realistic enough in terms of system load (and maintenance cost)`. 我认为这是非常相对的。相对于编码、硬件、用户数量。

Leon 的建议很好，只跟踪鼠标点击，不跟踪鼠标移动。在这种游戏中，每一种减少请求/响应的策略都是受欢迎的。

回答你的问题，我再次说，这是相对的，你的策略（使用 node.js 和 websockets）听起来不错，它可以为 1.000 个用户 sumultaneosly 工作，但不能为 1.000.000 工作，但是，相同的代码，与更好的硬件，可以为 1.000、1.000.000、1.000.000.000 个用户工作，这是一个基础设施问题。我认为前提是`be carefully in your code to mantain the system lightwheigt`，因为如果您知道您的代码是好的，那么问题将出在硬件、带宽等（您可以稍后再处理。）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-29T03:43:22.303

以这种方式考虑。

如果你*真的*想构建一个具有实时更新的大型多人游戏，那么根据这里的[统计数据](http://www.websocket.org/quantum.html)，websockets 是你最好的选择。（socket.io 是一个提供回退的便利库，但它应该配置为主要使用 websockets。）

理查德做了一些可靠的估计。但是，您还需要考虑另外两件事：

*   最大打开连接数（google for ulimit）
*   并行化（node.js 在单线程上运行，这在未来可能永远不会改变；在广播您的更改时，您的游戏可以接受大约 O(n) 的性能吗？）

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-21T07:57:28.647

虚拟形象真的会跟随鼠标移动，还是会移动到地图上被点击的位置？如果是后者，那么您只需将点击位置传输到服务器，服务器只需向客户端广播头像航点和行驶速度。

这在需要管理的对象和玩家数量方面仍然存在限制，但服务器可以为多个化身和对象收集 1/10 秒或 1/4 秒的操作，并将它们作为捆绑共享从而减少网络、服务器和客户端的负载。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-28T03:07:15.783

我做过非常相似的事情......

所有玩家都以自己的速率（希望大约每秒 30 帧）向服务器发送数据。服务器从每个玩家那里收集数据，并设置新状态（玩家鼠标位置）。服务器有一个以每秒 30 帧的速度运行的计时器——向所有玩家的所有玩家鼠标位置发送一条消息。它使有效载荷更大，但每秒只发送 30 个数据包——对于节点或现代浏览器来说没有问题。

祝你游戏好运！

担

PS——记住，你必须为速度而设计！

# sql - 如何在sql中使用以下条件删除记录

> ID：12973992
> 
> 赞同：0
> 
> 时间：2012-10-19T12:07:51.447
> 
> 标签：sql, delete-row, delete-record

我有下表，我需要删除满足给定条件的行。

请帮我。

桌子：`Product`

```
productId productname datecreated
1         sample1     20/01/2012
2         sample1     20/01/2012
3         sample2     20/02/2012
4         sample2     20/02/2012
5         sample2     20/09/2012
6         sample1     20/08/2012 
```

桌子：`Category`

```
categoryid categoryname
1          cat1
2          cat2
3          cat3 
```

桌子：`ProductCategory`

```
postid  categoryid
1         1
4         2 
```

现在我想删除第一个表中包含`count > 1 group by productname`and的行以及表 `datecreated`中不包含的行`productcategory`

即，我想删除

```
 ProductId 2 and ProductId 3 
```

因为它具有相同`ProductName`的相同`DateCreated`并且也不包含在`ProductCategory`表中

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T12:36:03.643

您可以首先执行此操作以删除不在 ProductCategory 表中的所有产品：

步骤1

```
Delete from Product 
Where productId not IN(select productId from ProductCategory) 
```

然后，如果您仍想从 Product 表中删除重复项，您可以尝试以下操作：

第2步

```
Select productname, datecreated, Count(*)
Into TheKeys
from Product 
Group by productname, datecreated
Having Count(*)>1 
```

此 TheKeys 表将包含重复值

第 3 步

```
Select DISTINCT Product.*
Into TheRows
From Product, TheKeys
Where Product.productname = TheKeys.productname
And Product.datecreated = TheKeys.datecreated 
```

表 TheRows 包含所有对应的行

第4步

```
Delete Product 
From Product, TheKeys
Where Product.productname = TheKeys.productname
and Product.datecreated = TheKeys.datecreated 
```

这将删除所有重复的行

最后将唯一的行放回表中：

第 5 步

```
Insert into Product (productId, productname, datecreated)
Select * From TheRows 
```

注意：如果您不介意拥有不属于任何类别的产品，您可以省略第一步并在第 3 步之后立即执行此操作

```
Delete From TheRows
Where productId not In(Select productId from ProductCategory) 
```

然后继续第 4 步

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T12:16:29.450

```
delete Product
from Product as P
where
    P.productId not in (select T.postid from ProductCategory as T) and
    exists
    (
        select T.*
        from Product as T
        where
            T.productId <> P.productId and
            T.productname = P.productname and
            T.datecreated = P.datecreated
    ) 
```

**`[sql fiddle demo](http://sqlfiddle.com/#!3/df565/1)`**

# objective-c - 是否有等效于 C++ 的类范围枚举？

> ID：12973999
> 
> 赞同：2
> 
> 时间：2012-10-19T12:08:26.663
> 
> 标签：objective-c, cocoa

在 C++ 中，我可能会在标题中执行以下操作：

```
cClass {
  enum eList { FIRST, SECOND };
} 
```

...这在其他一些课程中：

```
cClass::eList ListValue = GetListValue();
if(ListValue == cClass::FIRST) {
  ...
} 
```

是否有使用直接的 Objective-C 语言功能或 Cocoa 中的一些技巧的等价物来允许类似**范围** `enum`的 s？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-19T12:29:39.933

好吧，您可以使用 C 来模拟它的一部分：

创建一个 C 枚举并键入：

```
enum MONEnumType : uint8_t {
  MONEnumType_Undefined = 0,
  MONEnumType_Red,
  MONEnumType_Green,
  MONEnumType_Blue
}; 
```

声明容器：

```
struct MONEnum {
  const enum MONEnumType Red, Green, Blue;
}; 
```

声明存储：

```
extern const struct MONEnum MONEnum; 
```

定义存储：

```
const struct MONEnum MONEnum = {
  .Red = MONEnumType_Red,
  .Green = MONEnumType_Green,
  .Blue = MONEnumType_Blue
}; 
```

正在使用：

```
enum MONEnumType ListValue = GetListValue();
if (ListValue == MONEnum.Red) {
  /* ... */
} 
```