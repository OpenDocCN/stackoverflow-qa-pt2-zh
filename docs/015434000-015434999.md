# StackOverflow 问答 15434000-15434999

# css - Feedburner 定制

> ID：15434000
> 
> 赞同：1
> 
> 时间：2013-03-15T13:43:15.997
> 
> 标签：css, feed

[我想在我的网站http://www.e-connecting.com/index/index.html](http://www.e-connecting.com/index/index.html)中使用我的条目博客的提要。当我尝试使用buzzboost 时，会破坏我网站的外观（请参阅我的网站）。我将如何解决这个问题？

我尝试覆盖 feedburnerFeedBlock 风格，但我没有得到同样的效果。

```
<div id="services">
<ul>
<li>
        <div class="fl_left"><img src="images/demo/100x180.gif" alt="" /></div>
        <div class="fl_right">
              <h2>linux  |  cisco  |  vmware  |  off topics</h2>
           <p><script src="http://feeds.feedburner.com/LinuxCiscoVmwareOffTopics? format=sigpro" type="text/javascript" ></script><noscript><p>Subscribe to RSS headline  updates from: <a href="http://feeds.feedburner.com/LinuxCiscoVmwareOffTopics"></a> <br/>Powered by FeedBurner</p> </noscript>.

       </div>
</li>
.
.
.

.feedburnerFeedBlock {
 margin:0px;
 padding:0px;
}

#services ul, #services p, #services h2, #services img{
margin:0;
padding:0;
list-style:none;
}

#services li{
display:block;
float:left;
width:294px;
height:180px;
margin:0 9px 0 0;
padding:10px;
color:#666666;
background-color:#EFEFEF;
}

#services li:hover, #services li:hover h2{
color:#666666;
background-color:#E5E5E5;
}

#services li.last{
margin-right:0;
}

#services .fl_right{
display:block;
float:right;
width:185px;
padding:10px 0 0 0;
}

#services h2{
margin:0 0 5px 0;
padding:0 0 3px 0;
font-size:14px;
font-weight:bold;
color:#666666;
background-color:#EFEFEF;
border-bottom-color:#666666;
}

#services p{
margin:0;
padding:0;
line-height:1.6em;
}

#services p.readmore{
display:block;
width:100%;
margin:15px 0 0 0;
padding:0;
text-align:right;
line-height:normal;
}

#services p.readmore a{
padding:8px 15px;
font-weight:bold;
color:#FFFFFF;
background-color:#666666;
} 
```

# php - str_replace 的小问题

> ID：15434001
> 
> 赞同：0
> 
> 时间：2013-03-15T13:43:17.883
> 
> 标签：php

这是我的代码：

```
$produrl = '/'. basename(str_replace(".html","",$_cat->getUrl())) .'/' . basename($_product->getProductUrl()) ; 
```

`$_cat->getUrl()`返回这个：

[http://website.com/category/subcategory.html](http://website.com/category/subcategory.html)

我需要：对于 $produrl 的一部分`basename(str_replace(".html","",$_cat->getUrl()))`返回`category/subcategory`

问题：

它只有在我`category`不`/subcategory`知道问题出在 str_replace 的情况下才会回馈，不是吗？你能帮我解决这个问题吗？

请注意我有2个案例：

1.  有时我得到`http://website.com/category/subcategory.html`.

2.  有时`http://website.com/category.html`

我希望它可以与他们一起工作:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T13:50:02.743

您应该改用 parse_url ：

```
$url = parse_url($_cat->getUrl());
$produrl = str_replace(".html","",$url['path']); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T13:49:43.507

问题是您正在使用该`basename()`功能。

看看它的文档：http: [//php.net/manual/en/function.basename.php](http://php.net/manual/en/function.basename.php)

它只会返回“/”（正斜杠）或“\”（反斜杠，对于 Windows）之后的尾随字符串。

# c# - 关闭表单并捕获关闭事件

> ID：15434003
> 
> 赞同：1
> 
> 时间：2013-03-15T13:43:21.500
> 
> 标签：c#, forms, sender

每个人。我遇到过这样的问题。在我的应用程序中，我通过 ShowDialog 方法从我的主表单中显示第二个表单。在这种形式中，我有一些文本框可以连接到数据库和一个连接按钮。如果用户单击 X，则应用程序退出。但是如果用户单击“连接” - 我连接到数据库并关闭我的第二个表单。为了捕捉关闭事件，我使用 FormClosing 方法，应用程序询问我是否要关闭应用程序，如果是，则退出。问题是当我单击按钮时，FormClosing 事件会触发并询问我是否要退出。如何避免？我尝试使用发件人，但它不起作用。

这是我的代码：

```
private void Connect_Click(object sender, EventArgs e)
{
    try
    {
         orcl.connect(userID.Text, Password.Text, comboTNS.Text);

         if (orcl.ifHasRows("select dbclass from setupdbversion where dbclass='SECURITY' and rownum=1"))
         {//my stuff
             this.Close();
         }

     }
     catch (Exception ex)
     {
          MessageBox.Show(ex.Message.ToString());
     };
}

private void SecConnForm_FormClosing_1(object sender, FormClosingEventArgs e)
{   
     MessageBox.Show(sender.ToString());
     if (e.CloseReason == CloseReason.UserClosing)
     {
          MessageBox.Show(sender.ToString());
          if (string.Equals((sender as Form).Name, @"SecConnForm")) //it doesn't work as in any cases the sender is my form, not a button (when i click on button of course)
          {
               if (MessageBox.Show(this, "Really exit?", "Closing...",
                    MessageBoxButtons.OKCancel, MessageBoxIcon.Question)
                       == DialogResult.Cancel) 
                   e.Cancel = true;
               else
                   Application.Exit();

          }
          else
          {
               //other stuff goes..
          }
     }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T14:07:13.530

每次关闭表单时都会触发表单关闭事件，无论是通过代码还是通过用户单击完成。

你需要的是与此类似的东西。

```
private boolean bFormCloseFlag = false;

private void Connect_Click(object sender, EventArgs e)
{
    try
    {
         orcl.connect(userID.Text, Password.Text, comboTNS.Text);

         if (orcl.ifHasRows("select dbclass from setupdbversion where dbclass='SECURITY' and rownum=1"))
         {//my stuff
             bFormCloseFlag = true;
             this.Close();
         }

     }
     catch (Exception ex)
     {
          MessageBox.Show(ex.Message.ToString());
     };
}

private void SecConnForm_FormClosing_1(object sender, FormClosingEventArgs e)
{   
     if (bFormCloseFlag = false)
     {
        MessageBox.Show(sender.ToString());
        if (e.CloseReason == CloseReason.UserClosing)
        {
          MessageBox.Show(sender.ToString());
          if (string.Equals((sender as Form).Name, @"SecConnForm")) //it doesn't work as in any cases the      sender is my form, not a button (when i click on button of course)
          {
               if (MessageBox.Show(this, "Really exit?", "Closing...",
                    MessageBoxButtons.OKCancel, MessageBoxIcon.Question)
                       == DialogResult.Cancel) 
                   e.Cancel = true;
               else
                   Application.Exit();

          }
          else
          {
               //other stuff goes..
          }
       }
     }
} 
```

该标志将简单地检查表单是通过单击“X”按钮关闭还是由您的代码关闭。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T13:49:23.107

this.Close() 触发“UserClosing”的关闭类型 可能只是隐藏对话框而不是 this.close()？

# jquery - 嵌入表单集合：添加标签 jQuery

> ID：15434006
> 
> 赞同：0
> 
> 时间：2013-03-15T13:43:25.880
> 
> 标签：jquery, forms, symfony, symfony-2.2

我正在尝试重现 Symfony 2 Cookbook Tutorial [Add a new Tag](http://symfony.com/doc/current/cookbook/form/form_collections.html#allowing-new-tags-with-the-prototype)

我使用的代码与教程中的代码完全相同，但 jQuery 包含有一些问题。

新的.html.twig：

```
<form action="..." method="POST" {{ form_enctype(form) }}>
    {# render the task's only field: description #}
    {{ form_row(form.description) }}

    <h3>Tags</h3>
    <ul class="tags" data-prototype="{{ form_widget(form.tags.vars.prototype)|e }}">
        {# iterate over each existing tag and render its only field: name #}
        {% for tag in form.tags %}
            <li>{{ form_row(tag.name) }}</li>
        {% endfor %}
    </ul>
    <a href="#" class="add_tag_link">Add a tag</a>
    {{ form_rest(form) }}
    {# ... #}
</form> 
```

这就是我在 base.html.twig 中包含 jquery 的方式： `<script src="http://code.jquery.com/jquery.js"></script>`

下一步：在页面的某处添加脚本标记，以便您可以开始编写一些 JavaScript。

所以我也将它复制粘贴到了 base.html.twig 中。

```
// Get the ul that holds the collection of tags
var collectionHolder = $('ul.tags');

// setup an "add a tag" link
var $addTagLink = $('<a href="#" class="add_tag_link">Add a tag</a>');
var $newLinkLi = $('<li></li>').append($addTagLink);

jQuery(document).ready(function () {
    // add the "add a tag" anchor and li to the tags ul
    collectionHolder.append($newLinkLi);

    // count the current form inputs we have (e.g. 2), use that as the new
    // index when inserting a new item (e.g. 2)
    collectionHolder.data('index', collectionHolder.find(':input').length);

    $addTagLink.on('click', function (e) {
        // prevent the link from creating a "#" on the URL
        e.preventDefault();

        // add a new tag form (see next code block)
        addTagForm(collectionHolder, $newLinkLi);
    });
});

function addTagForm(collectionHolder, $newLinkLi) {
    // Get the data-prototype explained earlier
    var prototype = collectionHolder.data('prototype');

    // get the new index
    var index = collectionHolder.data('index');

    // Replace '__name__' in the prototype's HTML to
    // instead be a number based on how many items we have
    var newForm = prototype.replace(/__name__/g, index);

    // increase the index with one for the next item
    collectionHolder.data('index', index + 1);

    // Display the form in the page in an li, before the "Add a tag" link li
    var $newFormLi = $('<li></li>').append(newForm);
    $newLinkLi.before($newFormLi);
} 
```

最后我写了在列表之后添加一个标签。

但是当我单击添加标签链接时，不会出现新的标签输入字段。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T15:26:20.640

请参阅浏览器调试器。有没有错误？也许你使用旧的 jquery 版本？确保启用 jquery 并支持 'on' 事件（从 1.9 版本开始）。

# video-streaming - 使用 WebRTC 设置不同分辨率的问题

> ID：15434008
> 
> 赞同：4
> 
> 时间：2013-03-15T13:43:27.293
> 
> 标签：video-streaming, resolution, webrtc

我正在尝试使用 WebRTC 的 getUserMedia 功能从用户的相机拍摄视频流中的快照。问题是我想分别在 Firefox 19.02、Opera 12.14 和 Chrome 25.0.1364.172 版本中使用 640 X 480 的分辨率，但我无法在 Firefox 和 Opera 中使用此分辨率。当我尝试这样做时，图像会以 640 X 360 分辨率从下侧切开。无论如何，如果我尝试更改 Chrome 中的分辨率，它不起作用，分辨率也高于 640 X 480。有人有同样的问题吗？我想知道这是一个错误还是什么，但我还没有看到任何相关信息。这是我的代码，我已经在很多方面证明了将约束设置为最小宽度和高度，但它不起作用：

剧本：

```
navigator.getUserMedia = navigator.getUserMedia || navigator.mozGetUserMedia || navigator.webkitGetUserMedia || navigator.msGetUserMedia;
if(navigator.getUserMedia){
    navigator.getUserMedia({
      video: true
      }, onSuccess, onError);
}
else{
    alert('An error has occurred starting the webcam stream, please revise the instructions to fix the problem');
}
function onSuccess(stream) {
    var video = document.getElementById('webcam');

    if(navigator.webkitGetUserMedia || navigator.mozGetUserMedia){
        video.src = window.URL.createObjectURL(stream);
    }
    else if(navigator.msGetUserMedia){
        //future implementation over internet explorer
    }
    else{
        video.src = stream;
    }
    video.play();
}
function onError() {
    alert('There has been a problem retrieving the streams - did you allow access?');
} 
```

css（仅用于证明，并没有将所有内容放在正确的位置）：

```
body {
    margin: 0px 0px;
    padding: 0px 0px;
}
#videoFrame {
    margin: 0px auto;
    width: 640px;
    height: 480px;
    border: 10px #333 solid;
}
#webcam {
    videoWidth: 640px;
    videoHeight: 480px;
}
#captureFrame {
    margin: 0px auto;
    width: 640px;
    height: 480px;
}
#webcamContent {
    width: 1280px;
    height: 480px;
} 
```

和jsp文件：

```
<%@ page language="java" contentType="text/html; charset=UTF-8"
    pageEncoding="UTF-8"%>
<!DOCTYPE html>
<html>
    <head>
        <title>Testing WebRTC</title>`
        <link href="css/styles.css" rel="stylesheet" type="text/css" />`
    </head>
    <body>
        <div id="webcamContent">
            <div id="videoFrame">
                <video id="webcam"></video>
            </div>
            <div id="captureFrame">
                <canvas id="bioCapture"></canvas>
            </div>
        </div>
        <script src="js/webRTC.js"></script>
    </body>
</html> 
```

提前致谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-15T14:20:36.100

尝试`maxWidth/maxHeight` **约束**：

```
var video_constraints = {
   mandatory: {
       maxHeight: 480,
       maxWidth: 640 
   },
   optional: []
};

navigator.getUserMedia({
   audio: false,
   video: video_constraints
}, onsuccess); 
```

**更新（2013 年 9 月 26 日）：**

根据[这个页面](https://www.webrtc-experiment.com/webrtcpedia/)；您可以设置以下分辨率（最小/最大宽度/高度）：

```
1920:1080
1280:720
960:720
640:360
640:480
320:240
320:180 
```

**或者[也许](https://code.google.com/p/chromium/codesearch#chromium/src/third_party/libjingle/source/talk/media/webrtc/webrtcvideoengine.cc&sq=package:chromium&type=cs&l=719&q=kVideoFormats)：**

```
1280:800
1280:720
960:600
960:540
640:400
640:360
640:480
480:300
480:270
480:360
320:200
320:180
320:240
240:150
240:135
240:180
160:100
160:90
160:120 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-24T23:41:29.197

当不保持相机的纵横比或尝试强制它不支持的帧速率（它是旧的 USB 相机）时，我遇到了同样的问题。所以像@Muaz Khan 建议的那样尝试，但只设置一个强制参数，即：

```
var video_constraints = {
   mandatory: {
        maxWidth: 640
   },
   optional: []
};

navigator.getUserMedia({
   audio: false,
   video: video_constraints
}, onsuccess); 
```

编辑：也尝试不同的值，即 maxHeight: 120 对我不起作用，但 maxHeight:180 确实起作用。我想这取决于相机

# java - oracle中海量数据的复杂报表

> ID：15434011
> 
> 赞同：1
> 
> 时间：2013-03-15T13:43:30.660
> 
> 标签：java, oracle, hibernate, reporting

我正在使用 oracle 11g 存储大量数据（大约 1kk 条记录）。我的架构看起来像（简化）：

客户表：

```
 ---------------------------------------
  |id | firstName | lastName | middleName |
   --------------------------------------- 
```

操作表：

```
 ---------------------------------------
  |id | client_id | date | balance | type |
   --------------------------------------- 
```

我需要为客户生成过滤和聚合的报告，包括不同的聚合行。例如，我需要一份报告，其中包含执行某种类型操作的客户。报告应包含以下列：所有操作的余额总和，过滤类型的操作余额总和，当年的操作余额总和。

我正在使用 java 和 hibernate 标准生成一个请求，但是代码会增长，现在维护起来太困难了。

使用 sql 生成复杂报告的最佳决策是什么：

1.  将所有数据加载到我的应用程序中并将其聚合到我的代码中？
2.  将过滤和聚合逻辑拆分为存储函数？
3.  使用临时表分步拆分过滤和聚合？
4.  使用 3rd 方软件或其他 nosql 存储来生成报告？（如 bi 工具或 map-reduce）
5.  写一个java存储过程？

什么是“标准企业”解决方案，能够以正常的性能和资源利用率生成海量数据的复杂报告？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T14:39:18.937

在这种情况下，Hibernate 不是您的朋友。作为第一步，如果您的应用程序的其余部分已经在使用 Hibernate，请尝试编写 Oracle 存储过程并通过 JDBC 或 Hibernate 从 Java 调用它们。

如果您的计算有共同的部分，请考虑将它们分解为单独的存储过程。

如果有共同的数据变化相对较慢（与其余数据相比），您可以使用物化视图。

另一个考虑。如果您按日期进行大量报告，但操作表记录带有日期/时间字段的时间戳，请考虑为日历日期添加一个数字字段，格式为 20130315，并在其上编制索引。这将对性能改进大有帮助，但仍可能会给您留下大量的 Oracle 查询。

你的数据有多大？什么是“1kk”？

# mysql - 获取动态列值

> ID：15434012
> 
> 赞同：0
> 
> 时间：2013-03-15T13:43:31.597
> 
> 标签：mysql, subquery, concat

我有一个表学生，其中包含：

```
 student_id , prefered_cell , cell_1 , cell_2 , cell_3 
```

现在在我们拥有的首选单元格值下 (cell_1,cell2,cell3)

在 mysql 中获取首选单元格的值的最佳方法是什么？

这些是可用的行：

```
1 , 'cell_1' ,  '123-321-1231' , '431-2133-321' , '123-123-4111'
2 , 'cell_2' ,  '122-333-3333' , '455-123-123' , '123-421-2345' 
```

所以我想要学生 1 和 2 的首选号码：

将得到：

```
1 , '123-321-1231'
2 , '455-123-123' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T13:54:14.450

试试这个查询。

```
Select student_id, case when prefered_cell = 'cell_1' then cell_1 
                        when prefered_cell = 'cell_2' then cell_2
                        when prefered_cell = 'cell_3' then cell_3
                        else '0'
                        End  as cell_value from student 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T13:54:24.690

我们在 sql 中有 switch。你可以使用它

```
select student_id ,case  from table_name

 CASE prefered_cell 
    WHEN 'cell_1' THEN 'value is cell_1 '
    WHEN 'cell_2' THEN 'value is cell_2'
    WHEN 'cell_3'= 'cell_3' then cell_3
  END
  else '0'
   End from student 
```

# c# - 单元测试的文件范围

> ID：15434013
> 
> 赞同：1
> 
> 时间：2013-03-15T13:43:32.683
> 
> 标签：c#, unit-testing

我有一堂课`Stats`，里面有一些方法。喜欢：

`public int getAmountOfTimesAPlayerLogedIn(string playerName)`

`public int getHighestScoreInLeague ( string leagueName )`

`public int getTopPlayers ( string leagueName, int topResults )`

当我为这个类创建单元测试时，我是否必须为这个类`.cs`中的每个方法创建一个单独的文件？

因为我很难命名我的单元测试方法。我喜欢`WhenXXX_ThenYYY`命名约定。但是，如果我有一个`.cs`涵盖所有方法测试的文件`Stats`，那么您如何真正知道它正在测试什么方法？

我的意思是，假设我想测试`getTopPlayers`。然后我会创建一个测试方法，如：

`WhenLeageNameIsTest_Expect20`

但是，您如何通过查看该名称来判断测试了哪种方法..？可以是`getHighestScoreInLeague`或`getTopPlayers`。

那么我应该在单独的`.cs`文件中将每个方法的测试分开吗？或者我应该改变我的命名约定，还是其他什么？

## 编辑

这只是发生在我身上。`Asserts`可以在一种测试方法中进行多项操作吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-15T13:47:03.620

> 但是，如何通过查看该名称来判断测试的方法是什么？...我应该改变我的命名约定吗？

一种流行的约定是在表格中命名您的测试方法

```
 MethodUnderTest_Scenario_Expectation() 
```

对你来说，如果使用那种形式，那就是

```
 public void getHighestScoreInLeague_LeagueNameIsTest_Returns20() 
```

这也是 Roy Osherove 在[The Art of Unit Testing](http://amzn.com/1933988274)中推荐的一种形式。它使您一目了然地了解正在测试的内容和预期的内容。您大部分时间都在使用您的名字，添加方法名称以清楚地说明缺失的部分。

通常建议每个被测类有一个测试文件。如果您有很多方法正在测试，并且您有很多很多测试来涵盖这些方法的行为，那么也许这是一个评估您的设计的机会。你的班级做得太多了吗？这并不是说答案立即是“是的”，这只是一个可能需要考虑片刻的想法。当您将课程保持在较小的范围内并专注于单一职责时，您的测试（和测试文件）自然也会变小。

* * *

> 这只是发生在我身上。可以在一种测试方法中执行多个断言吗？

理想情况下，没有。您希望测试失败仅出于一个原因。当您有多个断言时，您有多种失败的原因。如果是早期断言失败，则后续断言不会运行。尽可能隔离您的断言。

您的单元测试应该从山顶尖叫特定场景和期望（通过名称）以及出了什么问题（通过单个 Assert）。你不一定要启动调试器来找出单元测试失败的地方，尽管它并不总是可以避免的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T15:50:13.043

这里描述了一个很好的结构：http: [//haacked.com/archive/2012/01/01/structuring-unit-tests.aspx](http://haacked.com/archive/2012/01/01/structuring-unit-tests.aspx)

基本上，您的 SUT 中的每个方法在您的夹具中都有自己的嵌套类，那么该方法的每个测试都是一个测试方法。当它们组合在一起时，它们几乎读作一个句子，例如`TheTitleizerMethod.ReturnsDefaultTitleForNullName()`。链接中的代码示例：

```
public class TitleizerFacts
{
    public class TheTitleizerMethod
    {
        [Fact]
        public void ReturnsDefaultTitleForNullName()
        {
            // Test code
        }

        [Fact]
        public void AppendsTitleToName()
        {
            // Test code
        }
    }

    public class TheKnightifyMethod
    {
        [Fact]
        public void ReturnsDefaultTitleForNullName()
        {
            // Test code
        }

        [Fact]
        public void AppendsSirToMaleNames()
        {
            // Test code
        }

        [Fact]
        public void AppendsDameToFemaleNames()
        {
            // Test code
        }
    }
} 
```

# c# - ASP.NET_SessionId cookie 未定义

> ID：15434016
> 
> 赞同：2
> 
> 时间：2013-03-15T13:43:38.703
> 
> 标签：c#, asp.net-mvc, session-cookies

我正在开发 ASP.NET MVC 应用程序。我想在 javascript 中访问 sessionid，所以为此我试图在 javascript 中读取 ASP.NET_SessionId cookie：

```
=>  $.cookie("ASP.NET_SessionId")
=>  undefined 
```

但我越来越不确定。谁能告诉我如何访问 sessionId cookie？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-15T13:47:14.043

**您无法访问会话 cookie**，因为它设置为[HTTP Only](https://www.owasp.org/index.php/HttpOnly)。

因此出于安全原因，它对 JavaScript 是隐藏的。将其暴露给 JavaScript 将是一个巨大的安全漏洞。

[这个编码恐怖博客讨论了如何保护 cookie 免受 Javascript 的影响](http://www.codinghorror.com/blog/2008/08/protecting-your-cookies-httponly.html)

# django - 嵌套 {% block %} 语句运行独立于 {% if-statement %} 有效性 Django

> ID：15434017
> 
> 赞同：0
> 
> 时间：2013-03-15T13:43:42.707
> 
> 标签：django, django-templates, django-views

Django下v1.4.3

为什么下面 Django 模板案例 1 中的 if 语句总是显示块语句的内容，而与 if 语句是否为 TRUE 无关？

块语句总是在模板中的 if 语句之前执行吗？（也许我在文档中错过了这一点。）

View.py（请注意，故意“不”提供 map_url 用于测试目的）：

```
def post_address(request):
    return render_to_response(
        'record/post_address.html',
        {'form': form},
        context_instance=RequestContext(request)
    ) 
```

base_integrated_form.html 父模板包含

```
{% block after_form %}
{% endblock after_form %} 
```

post_address.html （两种情况）Django模板案例1：（在if语句中嵌套block-statement将导致block-statement的内容始终显示在浏览器中，与是否`map_url`提供无关。）

```
{% extends "base_integrated_form.html" %}
{% if map_url %}
   {% block after_form %}
   <div style="max-width:555px; height:240px; margin-left:auto; margin-right:auto;">
        <iframe id="map" width="100%" height="100%" frameborder="0" scrolling="no" marginheight="0" marginwidth="0" src="{{ map_url }}" style="border: 0px solid black"></iframe>
    </div>
    {% endblock after_form %}
{% endif %} 
```

Django模板案例2（在block-statement中嵌套if-statement，如果提供的话，只会在浏览器中显示block-statement的内容`map_url`。）：

```
{% extends "base_integrated_form.html" %}
{% block after_form %}
{% if map_url %}
   <div style="max-width:555px; height:240px; margin-left:auto; margin-right:auto;">
        <iframe id="map" width="100%" height="100%" frameborder="0" scrolling="no" marginheight="0" marginwidth="0" src="{{ map_url }}" style="border: 0px solid black"></iframe>
    </div>
{% endif %}
{% endblock after_form %} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-15T13:48:16.193

块标签与其他模板标签不同，它们是模板继承系统的核心部分。

本质上，块标签在模板最初加载时（渲染之前）被评估，以便 Django 可以查找继承链并构建最终的模板对象。这意味着其他标签（如'if'）内的块不会按您期望的方式工作，因为一旦真正的模板渲染开始，块标签就不再存在。

# css - 我可以将 CSS 类添加到 SimpleModal 实例吗？

> ID：15434018
> 
> 赞同：1
> 
> 时间：2013-03-15T13:43:43.160
> 
> 标签：css, simplemodal

有没有办法在简单模式中分配 ContainerClass 而不是 ContainerCss？

我正在开发一个网站，该网站应该根据正在使用的设备做出响应，因此例如对于 iPad，我希望容器的宽度和高度小于大屏幕。我有一个基于 @Media 的 CSS 类，我想知道是否可以分配一个类而不是 CSS，它在简单模式容器 div 中创建样式属性。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T13:57:48.787

回调中的一些简单 jQuery 应该可以解决问题：

[http://www.ericmmartin.com/projects/simplemodal/](http://www.ericmmartin.com/projects/simplemodal/)

```
$("#myModal").modal( {
    onShow: function (dialog) {
        $(this).addClass('myClass');
    });
}}); 
```

# go - 如何阅读 Go 文档？

> ID：15434022
> 
> 赞同：4
> 
> 时间：2013-03-15T13:43:45.120
> 
> 标签：go

我创建了一个简单的 go 程序（基本上只是示例代码）：

```
package main

import (
    "fmt"
    "io/ioutil"
    "net/http"
)

func getPage(url string) (body []byte, err error) {
    resp, err := http.Get(url)

    body = nil

    if (err != nil) {
        return
    }

    defer resp.Body.Close()
    body, err = ioutil.ReadAll(resp.Body)

    return
}

func main() {
    startUrl := "http://slashdot.org/"

    body, err := getPage(startUrl)

    if (err != nil) {
        fmt.Println("Error: " , err)
    }

    fmt.Println(body)
} 
```

我正在尝试通过文档来了解它们是如何组合在一起的。

第一个问题：http.Get()。它不在文档中（位于[http://golang.org/pkg/net/http/](http://golang.org/pkg/net/http/)）。除了它是，但在响应下。但是还有 2 个其他 Get() 函数。我怎么知道 net/http.Get 实际上是 Response 类型的 Get() ？

无论如何，所以 http.Get() 返回一个带有 a `Body`of的 Response `io.ReadCloser`。ioutil.ReadAll() 需要一个 io.Reader - 但是我怎样才能找到其他接受它作为参数的函数？文档似乎是“倒退”的——如果我知道我想要哪个函数，我可以找到文档，但如果我有一个类型，我怎么能找到哪些函数可以使用它？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-15T13:48:10.903

函数定义如下：

```
func (c *Client) Get(url string) (resp *Response, err error)
func (h Header) Get(key string) string
func Get(url string) (resp *Response, err error) 
```

看看[函数是如何声明的](http://golang.org/ref/spec#Function_declarations)。

在`func`函数名称和函数之间（`Get`），您有接收者类型和名称（括号之间）。只有其中一个函数没有接收者，并且必须以包名 ( `http`) 为前缀直接调用。那就是你需要的那个。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-18T16:48:53.767

关于您的`io.Reader`问题`io.ReadCloser`：

这些是接口，如果您不熟悉它们，请在[此处阅读它们](http://golang.org/doc/effective_go.html#interfaces_and_types)

接口基本上是一组方法，这两个定义如下：

```
type Reader interface{
     Read([]byte)(int, error)
}

type ReadCloser interface{
     Read([]byte)(int, error)
     Close()
} 
```

这意味着任何具有上述签名的读取方法的具体数据类型都可以作为 io.Reader 传递。满足 io.ReadCloser 的数据类型肯定会这样做，因为它必须提供 Read 方法和额外的 close 方法。

所以你可以简单地将你的 ReadCloser 作为 Reader 传递。

接口在 go 中的工作方式在开始时有点难以掌握，因为它们是如此隐含，但是它们非常强大并且为您提供了很多可能性。一定要阅读我上面链接的文字。当我开始使用 go 时，我阅读了整件事，它让事情变得容易多了。

# java - 从集合中删除项目UnsupportedOperationException

> ID：15434023
> 
> 赞同：3
> 
> 时间：2013-03-15T13:43:46.947
> 
> 标签：java, generics, collections

我的功能有问题。该代码对我来说工作得很好，当布尔属性为真时它会删除一个项目：

```
private void doRemoveAusgefallenePlaene(Collection<CarPlan> pAllCarPlan) {
for (Iterator<CarPlan> lCarPlanIterator = pAllCarPlan.iterator(); lCarPlanIterator.hasNext();) {
  CarPlan lCarPlan = lCarPlanIterator.next();
  if (!lCarPlan.isAusfall()) {
    lCarPlanIterator.remove();
  }
}
} 
```

我希望将该函数用于类型对象`CarPlan`以及`ShipPlan`（都实现接口`Plan`）。

```
private void doRemoveAusgefallenePlaene(Collection<? extends Plan> pAllPlan) {
  for (Iterator<? extends Plan> lIterator = pAllPlan.iterator(); lPlanIterator.hasNext();) {
    Plan lPlan = lPlanIterator.next();
    if (!lPlan.isAusfall()) {
      lPlanIterator.remove();
    }
  }
} 
```

现在我可以用`Collections`Type`CarPlan`和`ShipPlan`

```
doRemoveAusgefallenePlaene(pAllCarPlan);
doRemoveAusgefallenePlaene(pAllShipPlan); 
```

并且代码编译没有问题。不幸的是，在执行时抛出了 UnsupportedOperationException

```
lPlanIterator.remove(); 
```

我想我通过声明`Collection<? extends Plan>`. 知道任何人的问题吗？

**-- 更新 --** 对于那些对一种可能的解决方案感兴趣的人：

```
final List<CarPlan> lAllCarPlan = new ArrayList<CarPlan>(pAllCarPlan);
doRemoveAusgefallenePlaene(lAllCarPlan); 
```

与`ShipPlan`和一起使用效果很好`CarPlan`。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-15T13:48:35.833

您可能正在迭代一个不可修改的集合，因此其迭代器将不支持删除操作。

不可修改集合的示例包括由`Collections.unmodifiableXX()`. 返回的列表`Arrays.asList()`并非完全不可修改（您可以在特定索引处设置元素），但不支持添加或删除操作，因为它直接由您传入的数组支持。

来自[Javadoc 的`remove()`](http://docs.oracle.com/javase/7/docs/api/java/util/Iterator.html#remove%28%29)：

> 抛出：`UnsupportedOperationException`- 如果此迭代器不支持删除操作

您需要查看您传入的内容，并确保可以实际修改集合的结构。您还没有向我们展示该代码。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-15T13:47:04.060

来自@dmeister 的其他回复：[为什么 Java 集合不删除通用方法？](https://stackoverflow.com/questions/104799/why-arent-java-collections-remove-methods-generic?rq=1)

> Josh Bloch 和 Bill Pugh 在“Java Puzzlers IV: The Phantom Reference Menace, Attack of the Clone, and Revenge of The Shift”（Google TechTalk）中提到了这个问题。
> 
> Josh Bloch 说（6:41）他们试图泛化 Map 的 get 方法、remove 方法和其他一些方法，但“它根本不起作用”。如果只允许集合的泛型作为参数类型，有太多合理的程序无法泛化。他给出的例子是一个数字列表和一个长列表的交集。

# windows-8 - 在 Windows 8 C++ 应用程序中将类对象作为参数传递

> ID：15434029
> 
> 赞同：0
> 
> 时间：2013-03-15T13:44:05.303
> 
> 标签：windows-8, visual-studio-2012, parameter-passing, windows-store-apps, c++-cx

我想在 C++ Windows 8 应用程序中将一个简单的类对象从一个 XAML 页面传递到另一个页面。我在 App.xaml.h 中创建了一个类：

```
ref class StaticInfo sealed {
    public:
        property Platform::String^ sName;
    }; 
```

我已经将此添加到 MainPage.xaml 以导航到 Page2.xaml：

```
 void StaticApp::MainPage::Button_Click_1(Platform::Object^ sender, Windows::UI::Xaml::RoutedEventArgs^ e)
{
    StaticInfo^ StaticData;
    StaticData->sName=ClickText->Text;
    Frame->Navigate(Page2::typeid,StaticData);
} 
```

然后在Page2中接收到智能指针：

```
void Page2::OnNavigatedTo(NavigationEventArgs^ e)
{
    (void) e;   // Unused parameter
    StaticInfo^ data = (StaticInfo^)e->Parameter;
} 
```

导航到 Page2 时出现此错误：

StaticApp.exe 中 0x003A5EE1 处的未处理异常：0xC0000005：访问冲突读取位置 0x00000010。

谁能告诉我具体的做法。如果可能，请提供一个链接，教授在页面之间传递数据。如果我想传递不同类的多个对象怎么办？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T13:50:18.953

在开始使用它之前，您需要实际创建 StaticInfo 对象：

```
 StaticInfo^ StaticData = ref new StaticInfo();
 StaticData->sName=ClickText->Text; 
```

# c# - 使用 linq to sql 指定 where 子句

> ID：15434035
> 
> 赞同：1
> 
> 时间：2013-03-15T13:44:22.053
> 
> 标签：c#, linq-to-sql

我正在使用这种方法来获得填充我的网格的结果，但是这种方法也用于填充另一个网格，它需要一个带有两个参数的 where 子句，而这个只需要一个。即使我传入了未使用的参数的 null ，但由于 where 子句，它仍然没有返回任何结果。关于我如何改变它的任何建议都可以使用 linq to sql 我调用方法来指定 where 子句而不是在获取数据的方法中？

```
DocsForReview.DataSource = docLib.GetGrid(Guid.Empty, lib); 

using (var dc = new DocMgmtDataContext())
{
    var subs = (from doc in dc.Documents
                join u in dc.Users on doc.OwnedByUserID equals u.ID
                where doc.OwnedByUserID == usr &&  doc.LibraryID == lib
                select new StudentDocuments
                {
                    DocID = doc.ID,
                    Assignment = doc.Library.Name,
                    Submitted = doc.UploadDT,
                     Student = u.FullName
                 }).OrderByDescending(c => c.Submitted).AsEnumerable().ToList();
    return subs;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T13:50:25.750

对于可为空的类型，试试这个：

```
doc.LibraryID == (lib ?? doc.LibraryID) 
```

在你的情况下（一个 System.Guid）你可以试试这个：

```
doc.LibraryID == (lib == Guid.Empty ? doc.LibraryID : lib) 
```

# opencv - 通过 Xcode 4 访问 /usr/local/lib

> ID：15434036
> 
> 赞同：0
> 
> 时间：2013-03-15T13:44:23.107
> 
> 标签：opencv, xcode4.5, dylib

我正在尝试在 Xcode 中使用 OpenCV。我一直在关注[这个线程](http://forums.macrumors.com/showthread.php?t=1145869)，但是 OpenCV 的 dylib 在里面，`/usr/local/lib`而不是在`/opt/local/lib`里面有没有办法看到 Xcode 中的第一条路径？我应该更改 OpenCV 的安装路径吗？不知道`/usr/local`和之间有没有区别`/opt/local`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T15:28:27.287

该链接假定这`/opt/local/`是 OpenCV 库的安装路径。您应该能够`/opt/local/`在教程中简单地用`/usr/local/`.

是的，这两条路径是不同的位置。

# updates - UITableView - CanPerfromAction 委托方法

> ID：15434037
> 
> 赞同：1
> 
> 时间：2013-03-15T13:44:27.687
> 
> 标签：updates, uimenucontroller, uitableview

在 an`UITableViewCell`中创建 an`UITableView`时，它的可用操作会通过以下方式`UITableViewDelegate`自动从 中检索：

```
– tableView:canPerformAction:forRowAtIndexPath:withSender: 
```

假设经过一段时间后，最初创建的 UITableViewCell 仍然在屏幕上可见，但其内部自定义状态已更新，现在它能够处理比以前更多的操作。在 UITableView 重新出列一个新单元之前，与该单元关联的操作永远不会更新。

此架构可能有助于澄清我的问题：

*   myCell = 具有`copy:`可用操作的新单元格。
*   tableview 获取可用的操作`myCell`。
*   用户按住单元格并`UIMenuController`显示`Copy`操作。
*   myCell 更新其内部状态，现在可以同时处理`copy:`和`delete:`操作。
*   用户再次按住单元格，`UIMenuController`仍然只显示该`Copy`选项。

在我的内部，我`canPerformAction:...`根据当前单元格内部状态返回不同的值。

注意：如果我只是执行一个小滚动，使 myCell 重新出队，当再次按下单元格时，`UIMenuController`将显示更新的`copy:`和`delete:`操作。

所以问题是，我怎样才能让我的 UITableView 为更新的单元格请求新的可用操作？

# .net - 客户端如何使用负载均衡的 WCF 服务

> ID：15434039
> 
> 赞同：2
> 
> 时间：2013-03-15T13:44:39.457
> 
> 标签：.net, wcf

我在负载平衡方案中托管了 WCF 服务。该服务使用 IIS 托管。有两台服务器是负载平衡的。

以下是`end points`服务器中的。 [https://labA.myCompany.com:44330/MyService/InternalService.svc](https://labA.myCompany.com:44330/MyService/InternalService.svc) [https://labB.myCompany.com:44330/MyService/InternalService.svc](https://labB.myCompany.com:44330/MyService/InternalService.svc)

我保持`host base address`不变

```
baseAddress=" https://test-LoadBalanced.myCompany.com/MyService". 
```

此主机基地址来自负载平衡地址。

当我输入[https://test-LoadBalanced.myCompany.com/MyService/InternalService.svc](https://test-LoadBalanced.myCompany.com/MyService/InternalService.svc)时 ，我可以获得服务页面。在里面，有时我会得到 ServerA 盒子的端点地址和有时服务器 B 盒子的端点地址的 wsdl 链接。

**参考**

[WCF服务端点与主机基地址](https://stackoverflow.com/questions/6937853/wcf-service-endpoints-vs-host-base-address)问题的答案说

> 在 IIS 上托管 WCF 服务时，基地址只能是 .svc 文件的 URL。

以下来自[WCF 深度寻址](http://msdn.microsoft.com/en-us/magazine/cc163412.aspx)

> 客户不知道服务的基地址，也不需要在他们的网络上支持类似的东西。因此，您不会在客户端对象模型或配置部分中找到与基地址相关的任何内容。客户端只需选择一个特定的端点，该端点总是配置有一个绝对地址，而该绝对地址决定了它将在传输过程中使用的地址。

从[负载均衡](http://msdn.microsoft.com/en-us/library/ms730128.aspx)

> 默认情况下，BasicHttpBinding 在带有 Keep-Alive 值的消息中发送连接 HTTP 标头，这使客户端能够与支持它们的服务建立持久连接。此配置提供了增强的吞吐量，因为可以重用先前建立的连接将后续消息发送到同一服务器。但是，连接重用可能会导致客户端与负载平衡场中的特定服务器强关联，这会降低循环负载平衡的有效性。如果不希望出现这种行为，可以使用带有 CustomBinding 或用户定义的绑定的 KeepAliveEnabled 属性在服务器上禁用 HTTP Keep-Alive。

**客户**

我使用负载平衡地址创建了一个客户端。但是，在客户端配置中，端点地址是服务器 A 盒子的地址；不是负载平衡地址。

**问题**

那么，客户端如何利用负载均衡的性能优势呢？它将始终访问服务器 A 以获得服务操作，不是吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T13:56:20.493

更改客户端的代码/配置以指向服务的负载平衡端点。

基地址是服务器专用的问题。它为您提供了一种方法来指定所有其他相对 URI 所基于的基本 URI。

如果您的客户端向您的负载均衡器发送 HTTP 消息，它们将被转发到服务器。为此，只需使用服务的负载平衡器配置您的客户端。

**在服务器上禁用**HTTP也可能是明智`keep-alive`的，以防止您的客户端与 LB 后面的服务器形成粘性关系。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T14:01:16.507

WSDL 仅在您的客户端应用程序的设计时使用。一旦向导创建了所有客户端类，您就可以将客户端应用程序指向负载平衡器。

# javascript - 在 Android 上使用 iframe 时，jQuery Mobile 导航栏链接不起作用

> ID：15434047
> 
> 赞同：0
> 
> 时间：2013-03-15T13:44:56.340
> 
> 标签：javascript, android, cordova, jquery-mobile, iframe

我有一个使用 jQuery Mobile 创建的移动项目。

我遇到的问题仅（似乎）发生在 Android 设备上。

我的应用程序由一个固定的页眉（在顶部）和一个固定的页脚（在底部）和一些内容（在页眉和页脚之间）组成。

页脚包含链接（在导航栏中），内容包含 iFrame。我根据当前页面（从导航栏中选择）等将不同的页面拉入 iFrame（源）...

iframe 包含在 div 中，高度设置为 100%，以便适合应用程序内容区域。一切都按预期工作 - 在我的桌面浏览器（测试）以及 IOS 设备等上加载应用程序时...例如 iFrame 正确加载和呈现 iFrames 源并允许我使用页脚中的导航栏在页面（每次将新内容加载到 iframe 中）。

但是，在 Android 上，iFrame 也可以正确加载和呈现，尽管我无法使用导航栏（我无法单击链接）。似乎 iFrame 的内容正在页面外呈现（在 iFrame 之外并包含页脚/导航栏后面的 div（虽然不可见）（它没有被剪切或裁剪），我认为它正在从导航栏本身（如果有意义的话） - 例如，当我单击/触摸导航栏中的链接时，它要么被忽略，要么（偶然）在所选导航栏链接下呈现的 iframe 中有一个链接，来自源的链接iFrame 内已加载，导航栏链接被忽略...

我一直在努力解决这个问题，所以非常感谢任何帮助。

干杯！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-31T09:43:35.437

我更新到了最新版本的 jQuery mobile（相应地更新了我的代码），这似乎解决了这个问题和其他问题 :) 如果您在其中遇到任何问题，我会建议（我学到的教训是）首先更新到最新的库这个空间。

# php - 哪些属性应该存储在 Session 中

> ID：15434050
> 
> 赞同：-1
> 
> 时间：2013-03-15T13:45:13.980
> 
> 标签：php, sql, session, session-variables

我知道 Session 用于跟踪客户端的操作，或者就像登录一样，如果有 Session，则显示内容，如果没有，那么他是访客，我们也在这个 Session 中存储值或属性。

到目前为止，我总是将用户 ID 存储在 Session 中，作为帮助我在其他页面中识别他的主要属性。

`$_SESSION['userID'] = $userID; //example: 100, 101, 102...`

我可以检索此 ID 并根据此 ID 从数据库中获取数据。

```
$userID = $_SESSION['userID'];
$query = "SELECT * FROM posts WHERE user_id = ".$userID; 
```

这是使用会话的正确方法吗？ID不应该存储在Session中吗？有什么安全风险吗？如果不应该存储它，那么我如何识别用户？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T13:50:15.820

是的，将 userID 存储在会话中就可以了，只是不要使用它来验证用户，而是使用身份验证 ID。

除此之外，应该没有安全风险。

只是不要将它们用于存储敏感信息（密码和类似信息）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T13:54:35.577

会话永远不会转移给用户。浏览器获取一个名为 PHPSESSID 的 cookie，其中包含您的会话 ID。

这意味着：无论您在会话中存储什么，它都完全保存在服务器上。

从这个角度来看，会话中的数据不存在安全问题。你可以在那里存放任何你喜欢的东西。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-15T14:00:53.847

在会话范围内存储尽可能少的信息。

原因是在现代浏览器中，相同的会话在同一浏览器实例或不同浏览器实例中的选项卡之间共享。换句话说，例如，如果您在 firefox 中打开应用程序，然后再次启动 firefox，则新的 firefox 窗口将从旧窗口继承会话。

现在是坏的部分。如果您的浏览器 1 中有 session.abc = 123，然后在浏览器 2 中执行一些操作将其更改为 456，然后返回浏览器 1 并发出某种页面请求（例如提交表单），它将在该请求上使用 session.abc 的新值。

我们被这件事烧死了。人们无意中更新了错误的记录。

# android - Android App上传非常小的图片

> ID：15434052
> 
> 赞同：0
> 
> 时间：2013-03-15T13:45:17.820
> 
> 标签：android, upload, photo

我的应用上传了一张已拍摄的照片。但是上传的照片很小。我怎样才能让它更大？

这是我的代码：

```
public void maakfoto (View v) {

        Intent cameraIntent = new Intent(android.provider.MediaStore.ACTION_IMAGE_CAPTURE);
        cameraIntent.putExtra(MediaStore.EXTRA_OUTPUT, mImageCaptureUri);
        startActivityForResult(cameraIntent, CAMERA_REQUEST);

    }

    protected void onActivityResult(int requestCode, int resultCode, Intent data) {  
        if (requestCode == CAMERA_REQUEST && resultCode == RESULT_OK) {  

            Bitmap photo = (Bitmap) data.getExtras().get("data"); 
            imageView.setImageBitmap(photo);
            knop.setVisibility(Button.VISIBLE);
         // CALL THIS METHOD TO GET THE URI FROM THE BITMAP
            Uri tempUri = getImageUri(getApplicationContext(), photo);

            // CALL THIS METHOD TO GET THE ACTUAL PATH
            finalFile = new File(getRealPathFromURI(tempUri));

            System.out.println(finalFile);
        }  
    }

    public Uri getImageUri(Context inContext, Bitmap inImage) {
       // ByteArrayOutputStream bytes = new ByteArrayOutputStream();
        //inImage.compress(Bitmap.CompressFormat.JPEG, 100, bytes);
        String path = Images.Media.insertImage(inContext.getContentResolver(), inImage, "Title", null);
        return Uri.parse(path);
    }

    public String getRealPathFromURI(Uri uri) {
        Cursor cursor = getContentResolver().query(uri, null, null, null, null); 
        cursor.moveToFirst(); 
        int idx = cursor.getColumnIndex(MediaStore.Images.ImageColumns.DATA); 
        return cursor.getString(idx); 
    }

    public void upload (View v) {

        HttpURLConnection connection = null;
        DataOutputStream outputStream = null;
        DataInputStream inputStream = null;

        String pathToOurFile = finalFile.toString();
        String urlServer = "http://www.xxx.nl/testmap/upload.php";
        String lineEnd = "\r\n";
        String twoHyphens = "--";
        String boundary =  "*****";
        int serverResponseCode;
        String serverResponseMessage;

        int bytesRead, bytesAvailable, bufferSize;
        byte[] buffer;
        int maxBufferSize = 1*1024*1024;

        try
        {
        FileInputStream fileInputStream = new FileInputStream(new File(pathToOurFile) );

        URL url = new URL(urlServer);
        connection = (HttpURLConnection) url.openConnection();

        // Allow Inputs & Outputs
        connection.setDoInput(true);
        connection.setDoOutput(true);
        connection.setUseCaches(false);

        // Enable POST method
        connection.setRequestMethod("POST");

        connection.setRequestProperty("Connection", "Keep-Alive");
        connection.setRequestProperty("Content-Type", "multipart/form-data;boundary="+boundary);

        outputStream = new DataOutputStream( connection.getOutputStream() );
        outputStream.writeBytes(twoHyphens + boundary + lineEnd);
        outputStream.writeBytes("Content-Disposition: form-data; name=\"userfile\";filename=\"" + pathToOurFile +"\"" + lineEnd);
        outputStream.writeBytes(lineEnd);

        bytesAvailable = fileInputStream.available();
        bufferSize = Math.min(bytesAvailable, maxBufferSize);
        buffer = new byte[bufferSize];

        // Read file
        bytesRead = fileInputStream.read(buffer, 0, bufferSize);

        while (bytesRead > 0)
        {
        outputStream.write(buffer, 0, bufferSize);
        bytesAvailable = fileInputStream.available();
        bufferSize = Math.min(bytesAvailable, maxBufferSize);
        bytesRead = fileInputStream.read(buffer, 0, bufferSize);
        }

        outputStream.writeBytes(lineEnd);
        outputStream.writeBytes(twoHyphens + boundary + twoHyphens + lineEnd);

        // Responses from the server (code and message)
        serverResponseCode = connection.getResponseCode();
        serverResponseMessage = connection.getResponseMessage();

        fileInputStream.close();
        outputStream.flush();
        outputStream.close();
        }
        catch (Exception ex)
        {
        //Exception handling
        }

    } 
```

这是我的 XML：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:orientation="vertical"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    >

    <LinearLayout style="@style/TitleBar">
        <ImageButton style="@style/TitleBarAction"
            android:contentDescription="@string/description_home"
            android:src="@drawable/title_home"
            android:onClick="onClickHome" />

        <ImageView style="@style/TitleBarSeparator" />

        <TextView
            style="@style/TitleBarText"
            android:text="Foto uploaden" />

    </LinearLayout>

    <ImageView
        android:id="@+id/fotoVenster"
        android:layout_width="match_parent"
        android:layout_height="350dp"
        android:layout_gravity="center_horizontal" />

    <Button
        android:id="@+id/button1"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:text="Maak foto"
        android:layout_gravity="bottom"
        android:onClick="maakfoto" />    

    <Button
        android:id="@+id/uploadknop"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_gravity="bottom"
        android:onClick="upload"
        android:text="Upload de bovenstaande foto" />

    <ScrollView
        android:id="@+id/scrollView1"
        android:layout_width="match_parent"
        android:layout_height="wrap_content" >

        <LinearLayout
            android:layout_width="match_parent"
            android:layout_height="match_parent"
            android:orientation="vertical" >

        </LinearLayout>
    </ScrollView>

</LinearLayout> 
```

我该怎么做才能使上传的照片更大？现在他们是最大的。250 x 350 像素。

在此表示感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T13:59:15.143

这是因为您正在使用从意图返回的位图设置 ImageView，默认情况下是缩略图。解决方案是将捕获的图像保存到手机上的某个位置，然后从该位置读取。就是这样：

```
private void takePhoto()
    {
        Intent takePic = new Intent(android.provider.MediaStore.ACTION_IMAGE_CAPTURE);
        takePic.putExtra(MediaStore.EXTRA_OUTPUT, Uri.fromFile(getTempFile(this)));
        startActivityForResult(takePic, CAMERA_REQUEST);
    } 
```

创建位置的方法：

```
private File getTempFile(Context context)
    {
        // it will return /sdcard/image.tmp
        final File path = new File(Environment.getExternalStorageDirectory(), context.getPackageName());
        if (!path.exists())
        {
            path.mkdir();
        }
        return new File(path, "image.tmp");
    } 
```

不要从意图中获取图像，而是从保存的临时图像中检索它：

```
@Override
    protected void onActivityResult(int requestCode, int resultCode, Intent data)
    {
        super.onActivityResult(requestCode, resultCode, data);

        if (requestCode == CAMERA_REQUEST)
        {

            final File file = getTempFile(this);
            try
            {
                Uri selectedImage;
                String pathToMediaFile = MediaStore.Images.Media.insertImage(getContentResolver(), Uri.fromFile(file).getPath(), "", "Image taken via my app");
                selectedImage = Uri.parse(pathToMediaFile);

                String[] filePathColumn =
                { MediaStore.Images.Media.DATA };
                Cursor cursor = getContentResolver().query(selectedImage, filePathColumn, null, null, null);
                cursor.moveToFirst();
                int columnIndex = cursor.getColumnIndex(filePathColumn[0]);

                String filePath = cursor.getString(columnIndex);
                cursor.close();

                ImageCacheManager icm = new ImageCacheManager(this);
                int scale = decodeFile(filePath);
                Drawable dd = icm.loadLocalImage(filePath, scale);

                imageView.setImageDrawable(dd);
            }
            catch (Exception e)
            {
                e.printStackTrace();
            }
        }

    } 
```

然后，您可以像往常一样上传此图像，它将是全尺寸的。

让我知道这是否有帮助。

# button - 如何将 RibbonButton 添加到 Outlook 的上下文菜单中？

> ID：15434061
> 
> 赞同：1
> 
> 时间：2013-03-15T13:45:56.570
> 
> 标签：button, outlook, contextmenu, ribbon

我不知道如何在 Outlook 2013 的上下文菜单中添加自定义按钮。在 Outlook 2007 和 2010 中，我设法使用 CommandBarButton 成功地做到了这一点，但在 2013 年不再可能了。不幸的是，我找不到教程如何转换我的代码或缓解问题。

我现在的问题是：如何创建、添加和访问应该出现在邮件、日历和联系人项目的 Outlook 上下文菜单中的自定义 RibbonButton？

我已经尝试过这样的简单代码：

```
<?xml version="1.0" encoding="utf-8" ?>
<customUI onLoad="Ribbon_Load" xmlns="http://schemas.microsoft.com/office/2009/07/customui">
  <contextMenus>
    <contextMenu idMso="ContextMenuMailItem">
      <button id="MyContextMenuContactItem"
           label="ContextMenuContactItem"
           onAction="OnMyButtonClick"/>
    </contextMenu>
  </contextMenus>
</customUI> 
```

...但什么也没有发生，它没有显示出来。它的 .cs 文件的构造函数被调用，但没有别的。

如果我尝试通过编程方式添加它

```
Globals.Factory.GetRibbonFactory().CreateRibbonButton() 
```

..然后我不知道如何将它添加到预先存在的上下文菜单中。

我必须缺少将项目添加到上下文菜单所必需的东西。谁能指点我？

PS：我正在使用 Outlook 2007 进行测试。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T11:15:34.107

该问题是由 Visual Studio 自动插入的错误存根引起的。的返回值`GetCustomUI`始终为 null，因为`GetResourceText`找不到资源（尽管对我来说它看起来有效）。当我将其更改为 时`File.ReadAllText(Properties.Resources.MyRibbonXmlFile)`，`Ribbon_Load`终于被调用了。

# c++ - 不正确的函数调用“IOCTL_DISK_GET_DRIVE_LAYOUT_EX”

> ID：15434065
> 
> 赞同：2
> 
> 时间：2013-03-15T13:46:03.177
> 
> 标签：c++, msdn, hard-drive, disk-partitioning

我目前正在尝试编写一个 C++ 程序来自动检索有关示例硬盘驱动器映像的分区的信息，这些信息是磁盘上的分区数以及每个分区的起始扇区、大小和文件系统类型.

在这一点上，我很确定实现这一点的最佳方法是通过 MSDN 函数，微软的内置命令。我正在尝试使用“IOCTL_DISK_GET_DRIVE_LAYOUT_EX”函数，但根据我的获取错误调用，我的函数不正确。当我调试程序时，在“IOCTL_DISK_GET_DRIVE_LAYOUT_EX”调用之后，布尔值似乎也没有改变，这意味着它没有返回 bResult 值。

我正在使用 Microsoft Visual C++ Express Edition。如果人们可以看看我的代码并告诉我他们认为我做错了什么，那将不胜感激。

```
#define UNICODE 1
#define _UNICODE 1

#include <windows.h>
#include <winioctl.h>
#include <stdio.h>

#define wszDrive L"\\\\.\\PhysicalDrive6"

BOOL GetDriveParition(LPWSTR wszPath, DRIVE_LAYOUT_INFORMATION_EX *pdg)
{

  HANDLE hDevice = INVALID_HANDLE_VALUE;  // handle to the drive to be examined 
  BOOL bResult   = FALSE;                 // results flag
  DWORD junk     = 0;                     // discard results

  hDevice = CreateFileW(wszPath,          // drive to open
                    0,                // no access to the drive
                    FILE_SHARE_READ | // share mode
                    FILE_SHARE_WRITE, 
                    NULL,             // default security attributes
                    OPEN_EXISTING,    // disposition
                    0,                // file attributes
                    NULL);            // do not copy file attributes

  if (hDevice == INVALID_HANDLE_VALUE)    // cannot open the drive
  {
return (FALSE);
  }

bResult =  DeviceIoControl( 
                  hDevice,                        // handle to device
                  IOCTL_DISK_GET_DRIVE_LAYOUT_EX, // dwIoControlCode
                  NULL,                           // lpInBuffer
                  0,                              // nInBufferSize
                  pdg,                            // lpOutBuffer
                  sizeof(*pdg),                   // nOutBufferSize
                  &junk,                          // lpBytesReturned
                  NULL);                          // lpOverlapped

CloseHandle(hDevice);

return (bResult);

}

int wmain(int argc, wchar_t *argv[])
{
DRIVE_LAYOUT_INFORMATION_EX pdg; // disk drive partition structure
  BOOL bResult = FALSE;      // generic results flag

  bResult = GetDriveParition (wszDrive, &pdg);

  if (bResult) 
  {
    wprintf(L"Drive path            = %ws\n",   wszDrive);
    wprintf(L"Partition Style       = %I64d\n", pdg.PartitionStyle);
    wprintf(L"Partition Count       = %ld\n",   pdg.PartitionCount);

    system("Pause");
  } 
  else 
  {
    wprintf (L"GetDrivePartition failed. Error %ld.\n", GetLastError ());
    system("Pause");
  }

  return ((int)bResult);
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-15T14:37:54.837

`DRIVE_LAYOUT_INFORMATION_EX`是一个奇怪的结构。它被定义为

```
struct {
  DWORD                    PartitionStyle;
  DWORD                    PartitionCount;
  union {
    DRIVE_LAYOUT_INFORMATION_MBR Mbr;
    DRIVE_LAYOUT_INFORMATION_GPT Gpt;
  };
  PARTITION_INFORMATION_EX PartitionEntry[ 1 ];
} 
```

但通常`PartitionEntry`被视为一个更大的数组，带有`PartitionCount`条目。这类似于 C99 VLA 机制。由于您只分配了`sizeof(*pdg)`字节，因此即使是第二个 PartitionEntry 也没有空间。

C++ 破解：

```
struct ExtraEntries : DRIVE_LAYOUT_INFORMATION_EX
{
   PARTITION_INFORMATION_EX PartitionEntry[ 9 ]; // Or some other reasonable value
}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-07-16T14:45:06.617

即使这篇文章有点老了，我还是找到了另一种方法来获得一个完全填充的 PartitionEntry 而不创建一个棘手的结构：

根据这篇文章：[如何调用 DeviceIoControl 来检索它需要的内存量？](https://stackoverflow.com/questions/33327177/how-to-call-deviceiocontrol-to-retrieve-the-amount-of-memory-it-needs)

```
DRIVE_LAYOUT_INFORMATION_EX dli;
DWORD bytesReturned = 0;

if (!DeviceIoControl(hDevice, IOCTL_DISK_GET_DRIVE_LAYOUT_EX, NULL, 0, (void*)&dli, sizeof(dli), &bytesReturned, NULL))
{
    // Check last error if not ERROR_INSUFFICIENT_BUFFER then return
    int nError = GetLastError();
    if (nError != ERROR_INSUFFICIENT_BUFFER)
    {
        // std::cout << "DeviceIoControl() Failed: " << nError << std::endl;
        CloseHandle(hDevice);
        return false;
    }

    // Allocate enough buffer space based of the value of Partition Count:
    size_t size = offsetof(DRIVE_LAYOUT_INFORMATION_EX, PartitionEntry[dli.PartitionCount]);
    std::vector<BYTE> buffer(size);

    if (!DeviceIoControl(hDevice, IOCTL_DISK_GET_DRIVE_LAYOUT_EX, NULL, 0, (void*)buffer.data(), size, &bytesReturned, NULL))
    {
        nError = GetLastError();
        // std::cout << "DeviceIoControl() Failed: " << nError << std::endl;
        CloseHandle(hDevice);
        return false;
    }

    const DRIVE_LAYOUT_INFORMATION_EX& result = *reinterpret_cast<const DRIVE_LAYOUT_INFORMATION_EX*>(buffer.data());
    // Here all parition entry are populated ...
    // TO DO... Do your stuff with result

}
else
{
    // Call succeeded; dli is populated with a signle partition entry
    // TO DO... Do your stuff with dli
} 
```

# ios - 为什么我在发布之前创建的 CGMutablePathRef 时会收到 SIGABRT？

> ID：15434067
> 
> 赞同：0
> 
> 时间：2013-03-15T13:46:10.190
> 
> 标签：ios, uiview, memory-leaks

在我的 UIView 中，我有几个 CGPath 存储在 NSArray（availablePaths）中。

**在**绘制任何内容之前，我创建每个 CGPath 的缩放版本并替换数组中的旧版本。

我使用以下代码在 drawRect 中获得 SIGABRT。

```
- (void) scaleAllPaths: (CGFloat) scaleFactor
{

 CGAffineTransform transform = CGAffineTransformMakeScale(scaleFactor, scaleFactor);
 CFIndex i;
 for(i=0;i<[availablePaths count];i++){
    id obj = [availablePaths objectAtIndex:i];
    CGPathRef oldPath = (CGPathRef)obj;
    CGMutablePathRef newPath = CGPathCreateMutable();
    CGPathAddPath(newPath, &transform, oldPath);
    [availablePaths replaceObjectAtIndex:i withObject:(id) newPath];
    CGPathRelease(newPath); // <--- causes SIGABRT in drawRect:
 }
}
-(void)drawRect:(CGRect)rect
{
...
 for (int i = 0; i < currentPathIndex; i++) {
      id obj = [availablePaths objectAtIndex:i];
      CGPathRef path = (CGPathRef)obj;
      CGContextBeginPath(context);
      CGContextAddPath(context, path);    // <---  SIGABRT
      CGContextDrawPath(context, kCGPathEOFill);

 }
... 
```

如果没有 CGPathRelease(newPath) 绘图工作正常，但当然，我得到了内存泄漏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T14:15:17.137

发现，我正在另一个类中释放 CGPath 对象，我将它发送到：

```
-(void) setPath: (CGPathRef) pathToSet forceClosed: (BOOL) fClosed
{

  if(_path){
    CGPathRelease(_path);
  }
  _path = pathToSet;
  CGPathRetain(_path);  // <--- was missing
} 
```

谢谢，R。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T14:20:35.263

尝试在[此处](https://stackoverflow.com/questions/6403953/iphone-adding-a-cgpath-to-a-nsmutablearray-how)找到的解决方案，将`CGPathRef`s 添加到`NSMutableArray`: wrap `CGPathRef`inside `UIBezierPath`。

编辑：看起来你可以`-[UIBezierPath applyTransform:]`用来避免`CGPathRef`在`scaleAllPaths:`.

```
- (void) scaleAllPaths: (CGFloat) scaleFactor
{
  CGAffineTransform transform = CGAffineTransformMakeScale(scaleFactor,scaleFactor);
  for (UIBezierPath *bezierPath in availablePaths){
    [bezierPath applyTransform:transform];
  }
}

- (void)drawRect:(CGRect)rect
{
  ...
  for (int i = 0; i < currentPathIndex; i++) {
    UIBezierPath *bezierPath = [availablePaths objectAtIndex:i];
    CGPathRef path = bezierPath.CGPath;
    CGContextBeginPath(context);
    CGContextAddPath(context, path);
    CGContextDrawPath(context, kCGPathEOFill);
  }
  ...
} 
```

# sql - 嵌套 CASE 语句以排除某些行

> ID：15434069
> 
> 赞同：1
> 
> 时间：2013-03-15T13:46:15.527
> 
> 标签：sql, oracle10g, case

示例数据：Oracle 10g

```
Number    Activity
1         x Activity
1         no activity
2         x activity
3         no activity 
```

我需要做的是生成没有活动或 x 活动的行，那么问题来了：如果有一个 ID 有 x 活动和没有活动，我只想生成 x 活动行。可以做到吗？这是`CASE`产生上述数据的语句：

```
CASE WHEN DSKMTB_ACTIVITY_TYPE.ACTIVITY_TYPE_LABEL IS NULL
        THEN 'No Activity'
        ELSE DSKMTB_ACTIVITY_TYPE.ACTIVITY_TYPE_LABEL 
     END AS "Activity Type" 
```

我在想我需要嵌套一个`CASE`语句，但我无法完全收集我脑海中的逻辑。请让我知道是否有任何我可以提供的帮助。按照惯例，我没有在此处包含整个查询，因为它非常大，但如果有人认为有必要，我会进行编辑。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T13:50:55.717

您可以`MAX()`在 case 语句周围放置 a，而不是`GROUP BY`在 ID 字段上放置 a。

```
MAX(CASE WHEN DSKMTB_ACTIVITY_TYPE.ACTIVITY_TYPE_LABEL IS NULL
        THEN 'No Activity'
        ELSE DSKMTB_ACTIVITY_TYPE.ACTIVITY_TYPE_LABEL 
     END) AS "Activity Type"

GROUP BY ID 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-15T13:54:15.630

通过按 ID 分组和过滤，您可能会通过它：

```
SELECT 
    CASE 
        WHEN MAX(NVL(a.ACTIVITY_TYPE_LABEL, 'aaaa')) = 'aaaa'
            THEN 'No Activity'
        ELSE a.ACTIVITY_TYPE_LABEL
    END AS "Activity Type"
FROM DSKMTB_ACTIVITY_TYPE a
GROUP BY a.id 
```

问题是如果你真的选择了其他字段，它可能会破坏`GROUP BY`，我们将不得不做一个子查询。

# java - 如果我有 2 个具有相同值的引用类型，这是否意味着内存中只有 1 个对象

> ID：15434070
> 
> 赞同：4
> 
> 时间：2013-03-15T13:46:21.953
> 
> 标签：java, pointers

我是 Java 新手，并且已经阅读了我所相信的相互矛盾的陈述。请考虑以下代码。

```
String str1 = "dave";
String str2 = "dave"; 
```

str1 和 str2 虽然是唯一变量，但引用完全相同的值。那么，在内存中创建了多少个独特的对象？1或2，有人可以解释为什么吗？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-03-15T13:50:23.433

在您的示例中，它们引用同一个对象，因为字符串是[interned](http://en.wikipedia.org/wiki/String_interning)。

通常，使用**new**创建新对象，因此使用：

```
String str1 = new String("dave");
String str2 = new String("dave"); 
```

将在堆中创建两个不同的对象。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-03-15T13:49:22.990

没那么复杂。除非你在谈论字符串;-)

首先，让我们忽略字符串并假设这个简单的类型：

```
public class ValueHolder {
  private final int value;

  public ValueHolder(int value) {
    this.value = value;
  }

  public int getValue() {
    return value;
  }
} 
```

如果你有这样的两行：

```
ValueHolder vh1 = new ValueHolder(1);
ValueHolder vh2 = new ValueHolder(1); 
```

那么您将在堆上创建恰好 2 个对象。即使它们的行为完全相同并且在其中存储了完全相同的值（并且无法修改），您仍将拥有两个对象。

所以`vh1 == vh2`会回来的`false`！

对象也是如此：*可以*存在`String`两个`String`具有相同值的对象。

 ***但是**，有一件具体的事情`String`：如果您在代码中使用`String`文字^((*))，Java 将尝试重新使用任何较早出现的这种情况（通过称为[interning](http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#intern%28%29)的过程）。

因此，在您的示例代码中`str1`和`str2` **将指向同一个对象**。

^((*))或更准确地说：类型的[编译时常量表达式`String`](http://docs.oracle.com/javase/specs/jls/se7/html/jls-15.html#jls-15.28)。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2013-03-15T13:49:14.757

您有一个唯一的`Object`和 2 个指向同一对象的引用。这是`String`池化（或实习）的结果。鉴于两个`String`文字具有相同的内容，确保可以创建2 个*单独* 的唯一方法是显式调用其中一个构造函数。`Objects``String`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-15T13:51:17.950

这取决于。如果您编写一个小测试程序，那么它们很有可能包含相同的引用，因为 java 试图通过节省内存和重用引用来帮您一个忙。如果 str2 来自用户输入，那么它可能是两个不同的引用。一个很好的测试方法是在比较中使用 == 。如果两者是 ==，那么它们引用的是相同的内存位置。如果不是，那么它们是两个不同的参考。这让很多初级程序员望而却步，因为当他们第一次开始编写代码时，他们使用 ==，看到它有效，然后无法弄清楚为什么他们的比较不起作用。

我无法具体解释java何时“在幕后”重用引用，但它与创建值的方式和时间有关

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-15T13:53:40.587

你正在写这个的简写版本

```
String str1 = new String("dave");
String str2 = new String("dave"); 
```

所以 str1 和 str2 是不同的对象，可以单独修改

原始字符串“dave”仅在内存中存在一次，并带有另一个引用。*

# dynamic - Asp.net MVC4 中的服务器端验证

> ID：15434083
> 
> 赞同：1
> 
> 时间：2013-03-15T13:46:49.143
> 
> 标签：dynamic, asp.net-mvc-4, validation

我正在尝试使用 ASP.Net MVC 构建一个网站，其中我需要动态显示**N**个不同类型的控件，并对其进行验证。

我的方法是使用运行良好的 html 辅助扩展将它们添加到局部视图。但我对如何执行服务器端和客户端验证一无所知。

请帮助我对此提出建议。

# c++ - 未定义对“cvGetOptimalDFTSize”的引用

> ID：15434091
> 
> 赞同：0
> 
> 时间：2013-03-15T13:47:07.567
> 
> 标签：c++, opencv, linker, g++, arm

我正在 arm-linux 上使用 Opencv-2.1。我正在使用 arm-linux-g++ 编译器。我在链接过程中遇到了一个奇怪的错误。在谈论错误之前，我将发布我的 make 命令

```
CC = arm-linux-g++
COMPILEFLAGS = -Wall -fPIC -c -O2 -I./

OUT_DLL = libLensFinder.so
DLL_FLAGS = -shared -o
OBJS = SegmentRegions.o
OBJS2 = EdgeDetection.o
OBJS3 = AnalyseRegions.o
OBJS4 = global.o
LINK_FLAGS = -L./ -lLensFinder
LINK_FLAGS_2 = -L./ -lTwoX
INCPATH    = -I/home/zwang/ravi/opencv_include21/opencv/  -I.

all : 
$(CC) $(COMPILEFLAGS) $(INCPATH) global.cpp -o global.o
$(CC) $(COMPILEFLAGS) $(INCPATH) EdgeDetection.cpp -o EdgeDetection.o
$(CC) $(COMPILEFLAGS) $(INCPATH) SegmentRegions.cpp -o SegmentRegions.o
$(CC) $(COMPILEFLAGS) $(INCPATH) AnalyseRegions.cpp -o AnalyseRegions.o
$(CC) $(OBJS) $(OBJS2) $(OBJS3) $(OBJS4) $(DLL_FLAGS) ./$(OUT_DLL) -L/home/zwang/ravi/opencv_include21/lib -lcvaux -lcxcore -lhighgui -lcv -lml -lcxts -lrt

$(CC) $(COMPILEFLAGS) $(INCPATH) sample.cpp
#$(CC) $(LINK_FLAGS) sample.o -o sample 
$(CC) $(LINK_FLAGS) $(LINK_FLAGS_2) sample.o -o sample 
```

一切都很好，直到最后。在最后一个命令期间，即创建可执行文件时，我收到以下错误。

```
arm-linux-g++ -L./ -lLensFinder -L./ -lTwoX sample.o -o sample
.//libLensFinder.so: undefined reference to `spotrs_'
.//libLensFinder.so: undefined reference to `cvGetOptimalDFTSize'
.//libLensFinder.so: undefined reference to `dgels_'
.//libLensFinder.so: undefined reference to `dgelsd_'
.//libLensFinder.so: undefined reference to `dgesdd_'
.//libLensFinder.so: undefined reference to `cvMulSpectrums'
.//libLensFinder.so: undefined reference to `sgesdd_'
.//libLensFinder.so: undefined reference to `sgetri_'
.//libLensFinder.so: undefined reference to `cvDFT'
.//libLensFinder.so: undefined reference to `dgesv_'
.//libLensFinder.so: undefined reference to `dgetrf_'
.//libLensFinder.so: undefined reference to `dsyevr_'
.//libLensFinder.so: undefined reference to `sgels_'
.//libLensFinder.so: undefined reference to `spotrf_'
.//libLensFinder.so: undefined reference to `sgetrf_'
.//libLensFinder.so: undefined reference to `dpotrf_'
.//libLensFinder.so: undefined reference to `dpotri_'
.//libLensFinder.so: undefined reference to `sgesv_'
.//libLensFinder.so: undefined reference to `ssyevr_'
.//libLensFinder.so: undefined reference to `dpotrs_'
.//libLensFinder.so: undefined reference to `sgelsd_'
.//libLensFinder.so: undefined reference to `spotri_'
.//libLensFinder.so: undefined reference to `dgetri_'
collect2: ld returned 1 exit status
make: *** [all] Error 1 
```

其中两个未定义的引用是`cvMulSpectrums' and`cvGetOptimalDFTSize'，我猜这是由于 opencv。而且我对其他未定义的参考一无所知。我想我已经链接了每个图书馆。但仍然无法理解如何解决这个问题。有什么建议么？仅供参考，代码正在视觉工作室中工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T20:41:15.850

这些符号在`libopencv_core`库文件中定义。

请注意该命令如何 `arm-linux-g++ -L./ -lLensFinder -L./ -lTwoX sample.o -o sample`不将**sample**与任何 opencv 库链接，因此链接过程抱怨它是有道理的。

您可能应该调整您的构建以执行以下操作：

```
arm-linux-g++ sample.o -o sample -L./ -lLensFinder -L./ -lTwoX -L/home/zwang/ravi/opencv_include21/lib -lcvaux -lcxcore -lhighgui -lcv -lml -lcxts -lrt 
```

# twitter-bootstrap - 一起使用 Bootstrap Typeahead 和 Twitter Typeahead

> ID：15434098
> 
> 赞同：4
> 
> 时间：2013-03-15T13:47:19.423
> 
> 标签：twitter-bootstrap, bootstrap-typeahead

[Twitter Typeahead (TTA)](https://github.com/twitter/typeahead.js)和[Bootstrap Typeahead (BTA)](http://twitter.github.com/bootstrap/javascript.html#typeahead)似乎都占用了标识符：`$.typeahead`.

似乎 TTA 意味着与 Bootstrap 兼容，因为文档表明只需在 BTA 之后添加 TTA。

如果 BTA 和 TTA 都被调用，怎么可能同时使用它们`$.typeahead`？还有其他必须考虑的重叠吗？

由于 BTA （还）不是 TTA 功能的正确子集（例如，BTA 可以通过将 minLength 设置为 0 来显示建议下拉列表，即使没有输入，TTA 似乎也没有），这似乎在某些情况下是可取的案例。

这个问题反映了发布到[TTA 问题](https://github.com/twitter/typeahead.js/issues/119)的问题，因为 TTA 文档表明它与 Bootstrap 兼容。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-15T16:54:38.807

正如[杰克哈丁](https://github.com/jharding) [所说](https://github.com/twitter/typeahead.js/issues/119#issuecomment-14971492)：

> 不建议同时使用 typeahead.js 和 Bootstrap 的 typeahead 插件。话虽如此，如果您想这样做，所有 Bootstrap 插件都没有可用的冲突，这将允许您执行以下操作：
> 
> `$.fn.bootstrapTypeahead = $.fn.typeahead.noConflict();`

# r - 当模型中同时存在交互项和非交互项时，R 的 drop1 是否考虑了非交互项？

> ID：15434103
> 
> 赞同：1
> 
> 时间：2013-03-15T00:54:31.333
> 
> 标签：r, interaction

我的问题在标题中。我不确定是否考虑了非交互项，因为 drop1 的输出不包括它们，而只包括交互项。代码和输出如下：

```
> temp = lm(auto.mpg.data$mpg ~ auto.mpg.data$weight + auto.mpg.data$model_year + auto.mpg.data$origin + auto.mpg.data$weight:auto.mpg.data$model_year + auto.mpg.data$weight:auto.mpg.data$origin + auto.mpg.data$model_year:auto.mpg.data$origin)
> drop1(temp, test="F")
Single term deletions

Model:
auto.mpg.data$mpg ~ auto.mpg.data$weight + auto.mpg.data$model_year + 
        auto.mpg.data$origin + auto.mpg.data$weight:auto.mpg.data$model_year + 
    auto.mpg.data$weight:auto.mpg.data$origin + auto.mpg.data$model_year:auto.mpg.data$origin
                                              Df Sum of Sq    RSS    AIC F value    Pr(>F)    
<none>                                                     3769.8 908.83                      
auto.mpg.data$weight:auto.mpg.data$model_year  1   300.625 4070.4 937.37 31.1807 4.407e-08 ***
auto.mpg.data$weight:auto.mpg.data$origin      1    94.557 3864.3 916.69  9.8074  0.001869 ** 
auto.mpg.data$model_year:auto.mpg.data$origin  1     0.027 3769.8 906.83  0.0028  0.958085    
---
Signif. codes:  0 ‘***’ 0.001 ‘**’ 0.01 ‘*’ 0.05 ‘.’ 0.1 ‘ ’ 1 `enter code here` 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-15T14:52:48.453

是的，`drop1`如果存在交互，这些函数会考虑较低级别的术语。如果预测变量是交互的一部分，它不会被丢弃。

# asp.net-mvc - Https：从 http 中隐藏控制器方法

> ID：15434105
> 
> 赞同：0
> 
> 时间：2013-03-15T13:47:43.980
> 
> 标签：asp.net-mvc, ssl, asp.net-mvc-4, https, attributes

好的，所以我们[`RequireHttpsAttribute`](http://msdn.microsoft.com/en-us/library/system.web.mvc.requirehttpsattribute%28v=vs.108%29.aspx)可以使用它来确保只能通过 SSL 调用控制器/控制器方法。在我们尝试通过 HTTP 访问该方法的情况下，服务器会向同一控制器（方法）的 HTTPS 版本发出 302。

这对我的用户意味着，首先不安全地发出第一个请求是可以接受的。我不觉得这是可以接受的。在我推出一个在命中 HTTP 版本的情况下发出 404/500 状态码的属性之前，这样的属性是否已经存在？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T13:51:53.963

> 在我推出一个在命中 HTTP 版本的情况下发出 404/500 状态码的属性之前，这样的属性是否已经存在？

不，这样的属性不存在开箱即用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T13:50:58.250

如果使用 HTTP 请求页面的简单行为不会损害任何用户数据，我会说重定向应该足够了，并且是您的场景的完美方法。为什么要用我们可以处理的事情来打扰用户？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-15T14:06:10.753

> 这对我的用户意味着，首先不安全地发出第一个请求是可以接受的。我不觉得这是可以接受的。在我推出一个在命中 HTTP 版本的情况下发出 404/500 状态码的属性之前，这样的属性是否已经存在？

如果您不希望您的应用程序使用`http://`而不是为这些 URL 工作`https://`，请不要提供任何服务（404 或无连接）。

请注意，检查是否使用了 SSL/TLS[最终是用户的责任](https://webmasters.stackexchange.com/a/28443/11628)（并与有效证书一起正确使用）。确保指向这些地址的链接`https://`确实使用，并且用户期望`https://`被使用，至少对于起始页。如果他们的浏览器支持它（或者可能永久重定向到将被缓存的入口点），您可以考虑使用 HSTS。

从另一条评论：

> 我不希望以任何方式向任何第三方泄露有关该 url 的任何信息

一旦从客户端使用这个`http://`URL 发出请求，在服务器上做任何事情就没有什么意义了。为时已晚：窃听者可能已经看到了请求。（如果您自己的页面没有链接到外部网站，他们也不会在引荐来源网址中看到该地址。）即使您的服务器甚至没有侦听普通 HTTP 端口，活跃的 MITM 攻击者（或更简单地说，代理）可能会监听该请求并获取 URL，甚至没有到达您的服务器。

再次重申：确保您的用户希望`https://`被使用，一旦他们进入安全页面，请确保您对网站其他部分的链接/表单操作全部使用`https://`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-15T14:39:53.900

因此，作为参考，这是我的新属性：

```
[AttributeUsage(AttributeTargets.Class | AttributeTargets.Method, 
                Inherited = true, 
                AllowMultiple = false)]
public class HttpsOnlyAttribute : FilterAttribute, IAuthorizationFilter
{
    private readonly bool disableInDebug;

    public HttpsOnlyAttribute(bool disableInDebug = false)
    {
        this.disableInDebug = disableInDebug;
    }

    public virtual void OnAuthorization(AuthorizationContext filterContext)
    {
#if DEBUG
        if (disableInDebug) return;
#endif
        if (filterContext == null)
        {
            throw new ArgumentNullException("filterContext");
        }
        var context = filterContext.HttpContext;
        var request = context.Request;
        var isSecure = request.IsSecureConnection;
        if (!isSecure)
        {
            throw new HttpException(404, "Not found");
        }
    }
} 
```

# c# - 按属性获取元素过滤

> ID：15434107
> 
> 赞同：1
> 
> 时间：2013-03-15T13:47:52.777
> 
> 标签：c#, xml, xsd

我有以下 XML：

```
 <?xml version="1.0" encoding="utf-8"?>
<assertions>
    <assertion id="SLM_CekNonNegative">
        <satisfied count="36"/>
        <unsatisfied count="4">
            <message xml:lang="id">(Record ID = ID_2) SLM: Jumlah bulan lalu, jumlah bulan laporan, jumlah hari tunggakan, dan jumlah tunggakan pokok tidak boleh kosong dan harus diisi >= 0</message>
            <message xml:lang="id">(Record ID = ID_2) SLM: Jumlah bulan lalu, jumlah bulan laporan, jumlah hari tunggakan, dan jumlah tunggakan pokok tidak boleh kosong dan harus diisi >= 0</message>
            <message xml:lang="id">(Record ID = ID_2) SLM: Jumlah bulan lalu, jumlah bulan laporan, jumlah hari tunggakan, dan jumlah tunggakan pokok tidak boleh kosong dan harus diisi >= 0</message>
            <message xml:lang="id">(Record ID = ID_2) SLM: Jumlah bulan lalu, jumlah bulan laporan, jumlah hari tunggakan, dan jumlah tunggakan pokok tidak boleh kosong dan harus diisi >= 0</message>
        </unsatisfied>
    </assertion>
    <assertion id="Base_CekJangkaWaktuMulaiLebihMudaJatuhTempo">
        <satisfied count="10"/>
        <unsatisfied count="0"/>
    </assertion>
    <assertion id="SLM_CekJumlahBulanKrgDrNilaiKontrak">
        <satisfied count="10"/>
        <unsatisfied count="0"/>
    </assertion>
    <assertion id="Base_CekTanggalLebihMudaTanggalPelaporan">
        <satisfied count="10"/>
        <unsatisfied count="0"/>
    </assertion>
    <assertion id="SLM_CekNilaiKontrak">
        <satisfied count="2"/>
        <unsatisfied count="8">
            <message xml:lang="id">(Record ID = ID_10) Nilai kontrak harus > 0</message>
            <message xml:lang="id">(Record ID = ID_9) Nilai kontrak harus > 0</message>
            <message xml:lang="id">(Record ID = ID_8) Nilai kontrak harus > 0</message>
            <message xml:lang="id">(Record ID = ID_7) Nilai kontrak harus > 0</message>
            <message xml:lang="id">(Record ID = ID_6) Nilai kontrak harus > 0</message>
            <message xml:lang="id">(Record ID = ID_5) Nilai kontrak harus > 0</message>
            <message xml:lang="id">(Record ID = ID_2) Nilai kontrak harus > 0</message>
            <message xml:lang="id">(Record ID = ID_1) Nilai kontrak harus > 0</message>
        </unsatisfied>
    </assertion>
    <assertion id="SLM_CekGolNasabah">
        <satisfied count="9"/>
        <unsatisfied count="1">
            <message xml:lang="id">(Record ID = ID_2) Golongan nasabah tidak boleh diisi sandi bank pelapor sendiri</message>
        </unsatisfied>
    </assertion>
    <assertion id="BS-IF_CekSLMVls">
        <satisfied count="1"/>
        <unsatisfied count="0"/>
    </assertion>
    <assertion id="BS-IF_CekSLMIDR">
        <satisfied count="1"/>
        <unsatisfied count="0"/>
    </assertion>
    <assertion id="Base_CekHubunganTidakTerkaitStatusLainnya">
        <satisfied count="8"/>
        <unsatisfied count="2">
            <message xml:lang="id">(Record ID = ID_3) Base: "Status hubungan dengan Bank" harus terisi sandi 9 jika Kolom "Klasifikasi Nasabah - Hubungan dengan bank" terisi sandi 2</message>
            <message xml:lang="id">(Record ID = ID_2) Base: "Status hubungan dengan Bank" harus terisi sandi 9 jika Kolom "Klasifikasi Nasabah - Hubungan dengan bank" terisi sandi 2</message>
        </unsatisfied>
    </assertion>
    <assertion id="Base_CekLembagaNilaiPemeringkat">
        <satisfied count="0"/>
        <unsatisfied count="0"/>
    </assertion>
    <assertion id="Base_CekNeracaMinNol">
        <satisfied count="0"/>
        <unsatisfied count="0"/>
    </assertion>
    <assertion id="Base_CekNilaiAgunanMinNol">
        <satisfied count="0"/>
        <unsatisfied count="0"/>
    </assertion>
    <assertion id="Base_CekPersentaseMaksimal100">
        <satisfied count="0"/>
        <unsatisfied count="0"/>
    </assertion>
    <assertion id="Base_CekLembaga-Tanggal-NilaiPeringkat">
        <satisfied count="0"/>
        <unsatisfied count="0"/>
    </assertion>
    <assertion id="Base_CekIdentifier">
        <satisfied count="1"/>
        <unsatisfied count="0"/>
    </assertion>
    <assertion id="Base_CekNomor-JumlahAgunan">
        <satisfied count="0"/>
        <unsatisfied count="0"/>
    </assertion>
    <assertion id="Base_CekEligibilityJenisAgunan">
        <satisfied count="0"/>
        <unsatisfied count="0"/>
    </assertion>
    <assertion id="Base_CekSifat-GolonganPenerbitAgunan">
        <satisfied count="0"/>
        <unsatisfied count="0"/>
    </assertion>
    <assertion id="Base_cekPeriod">
        <satisfied count="1"/>
        <unsatisfied count="0"/>
    </assertion>
</assertions> 
```

我怎样才能得到`<assertion id="SLM_CekNonNegative">`which is的值`SLM_CekNonNegative`？

以下是我到目前为止的代码：

```
string pathasr = @"D:\HARPITNAS\dari mbak julia\logs\123456789-2012-09-30-BSMS10.xml-assertions2.xml";
List<string> msg = new List<string>();
XmlDocument doc = new XmlDocument();
doc.Load(pathasr);

foreach (XmlNode node in doc.DocumentElement)
{
     string thevaluethatiwantvariable = string.Empty;  
     thevaluethatiwantvariable  = ? ;

     if (node.LastChild.HasChildNodes == true)
     {
          string count = node.LastChild.ChildNodes.Count.ToString();
          foreach (XmlNode y in node.LastChild.ChildNodes)
          {
               string masg = y.InnerXml;
               msg.Add(masg);
          }
     }
} 
```

这段代码没有得到我想要的值。当我调试它时，我可以看到它没有得到正确的值。是否有可能获得我想要的价值？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-15T13:53:04.010

```
thevaluethatiwantvariable  = doc.DocumentElement.SelectSingleNode("//assertion[@name = 'id']/@value").Value; 
```

欲了解更多信息： [http ://www.w3schools.com/xpath/xpath_syntax.asp](http://www.w3schools.com/xpath/xpath_syntax.asp)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-15T14:00:17.443

如果没有 XPath，它将是这样的：

```
string theValue = doc.DocumentElement["assertion"].Attributes["id"].Value; 
```

并且不需要任何类型的循环。

# excel - 在另一列上计算一列

> ID：15434108
> 
> 赞同：1
> 
> 时间：2013-03-15T13:47:57.087
> 
> 标签：excel, excel-2007

**已编辑**

当 B 列“已启动”/“已配置”时，我试图计算 D/F 列中的所有值。这就是我的数据的样子。

```
B              D           F
Started        BARB1       BARB1
Started        BARB2
               BARB3       BARB2
Configured     BARB4
Started 
```

我尝试了以下公式；(CountIf, SumProduct) 但它似乎只是将它们计入 B 列？

```
=COUNTIF($B$2:$B$1800;B2="Started")
=SUMPRODUCT(($B$2:$B$1800="Started")*($D$2:$CD$1800<>"")) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T15:48:05.067

这个版本使用 SUMPRODUCT 所以你不需要 CTRL+SHIFT+ENTER

`=SUMPRODUCT(ISNUMBER(MATCH(B$2:B$1800;{"started";"configured"};0))*(D$2:F$1800<>""))`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T13:50:17.527

忘记我之前写的，这是答案：

```
 {=SUM(IF((A:A="Started")*(D:D<>"");1;0))+SUM(IF((A:A="Configured")*(D:D<>"");1;0))} 
```

（你知道 ctrl+shift+enter）

# linq - IQueryable 的 Contains() 和 IEnumerable 的 Contains() 有什么区别？

> ID：15434109
> 
> 赞同：1
> 
> 时间：2013-03-15T13:48:04.447
> 
> 标签：linq, ienumerable, iqueryable, iequalitycomparer

我有一个 cust，`IQueryable`一个`Customer`cust，一个`CustomerComparer`custCp，它实现了`IEqualityComparer`.

当我打电话时，`custs.Contains(cust, custCp)`我得到一个例外：

```
System.NotSupportedException: Unsupported overload used for query operator 'Contains' 
```

但是当我打电话给`custs.AsEnumerable().Contains(cust,custCp)`它时。谁能解释为什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-15T13:54:42.380

对 an 的操作`IQueryable`（在 Linq to Entities 的情况下）被转换为 SQL 并在数据库中执行。由于您使用`IEqualityComparer`C# 编写，因此无法将比较器转换为 SQL，并且无法支持重载。

当你把它翻译成`IEnumerable`using`AsEnumerable()`时，所有的数据都会从数据库传输到内存中，在那里可以很容易地支持重载。当然，缺点是您传输的数据比必要的多（可能是整个表）以使其在内存中过滤。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T13:53:30.213

`IQueryable`由查询提供程序实现，并*在后台*转换为目标系统可以理解的内容。例如，`IQueryable.Contains`可能会被转换为`x IN y`SQL 表达式。

另一方面，`IEnumerable`不是这样翻译的。它`Contains`适用于任何`IEnumerable`正确实施的东西。

使用`IQueryable`运算符是在服务器端执行的，因此在远程执行查询时会为您带来一些性能，而`IEnumerable`在本地（客户端）执行。这意味着，如果您要获取一个数据库表，将其转换为可枚举的然后应用`Contains`到它上面，*则需要将整个表*下载到您的计算机以进行枚举。

# perl - Perl 获取数组计数，因此可以在某个数组元素处开始 foreach 循环

> ID：15434110
> 
> 赞同：1
> 
> 时间：2013-03-15T13:48:06.770
> 
> 标签：perl

我有一个正在读取的文件。我正在使用 perl 重新格式化日期。它是一个逗号分隔的文件。在其中一个文件中，我知道 element.0 是邮政编码，而 element.1 是计数器。每行可以有 1-n 个城市。我需要知道从 element.3 到行尾的元素数量，以便我可以正确地重新格式化它们。我想使用从 element.3 开始的 foreach 循环将其他元素格式化为单个字符串。

任何帮助，将不胜感激。基本上我正在尝试读取 csv 文件并创建一个 cpp 文件，然后可以在另一个平台上编译该文件作为该平台的插件。

最好的问候迈克尔古尔德

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T13:59:07.247

你可以做这样的事情来从一行中获取字段：

```
my @fields = split /,/, $line; 
```

要访问从 3 到结尾的所有元素，请执行以下操作：

```
foreach my $city (@fields[3..$#fields])
{
   #do stuff
} 
```

（注意，根据您的问题，我假设您使用的是从零开始的索引。因此“元素 3”是第 4 个元素）。

或者，考虑[`Text::CSV`](http://search.cpan.org/~makamaka/Text-CSV-1.21/lib/Text/CSV.pm)阅读您的 CSV 文件，特别是如果您有转义分隔符之类的内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T14:00:29.343

好吧，如果您的行被读入数组，您可以通过在标量上下文中评估它来获取数组中元素的数量，例如

```
my $elems = @line; 
```

或者确定

```
my $elems = scalar(@line); 
```

尽管在这种情况下`scalar`是多余的，但它对于强制标量上下文很方便，否则它会是列表上下文。您还可以使用 找到数组最后一个元素的索引`$#line`。

之后，如果您想从元素 3 开始获取所有内容，您可以使用数组切片：

```
my @threeonwards = @line[3 .. $#line]; 
```

# matlab - 在矩阵中按间隔时间对值进行分组

> ID：15434111
> 
> 赞同：0
> 
> 时间：2013-03-15T13:48:10.657
> 
> 标签：matlab

我是 MatLab 的新手，我有一个矩阵：

第一列：以分钟为单位的时间，例如，0、0.5、1、1.5、2……最多 105.5 分钟

第二列：距离度量

如何每 5 分钟绘制一次距离的平均值我写了这个：

```
data_to_plot = mean(data((i-1)*5:i*5)) 
```

我得到了答案“下标索引必须是真正的正整数或逻辑。”</p>

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T13:51:56.380

你检查过你的定义`i`吗？如果`i`从 1 开始，则 from 的第一个条目`data((i-1)*5:i*5)`将为零，并且 MATLAB 的数组从 1 开始索引。

# postgresql - 以最低权限运行 Heroku Postgres

> ID：15434113
> 
> 赞同：4
> 
> 时间：2013-03-15T13:48:15.197
> 
> 标签：postgresql, heroku, least-privilege

我可以通过 Web/应用程序连接到 Heroku Postgres 数据库而不会有丢失表的风险吗？

我正在为使用 Heroku Postgres 作为后端的第三方构建 Heroku 应用程序。第三方对安全非常敏感，所以我正在考虑在整个应用程序中应用“分层安全”。例如，在 Web/应用程序层检查 SQL 注入攻击。应用“分层安全”方法我还应该保护数据库，以防错过潜在的 SQL 注入攻击，这可能会删除数据库表。

在我构建的其他系统中，数据库中至少有两个用户。首先是创建/删除表、索引、触发器等的数据库管理员，以及运行权限低于只能插入和更新记录的数据库管理员的应用程序用户。

在 Heroku Postgres 设置中，似乎没有一种方法可以创建另一个具有较少权限的用户（没有“drop table”选项）。因此应用程序必须与默认的 Heroku Postgres 用户连接，因此可能存在“删除表”的风险。

我正在运行 Heroku Postgres Crane 插件。

有没有人反对这个或有任何创造性的工作来解决这个问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-18T06:44:00.383

使用 Heroku Postgres，您只需连接一个帐户即可。这种类型的功能确实存在的一个选项是在 Heroku Postgres 上创建一个追随者。追随者异步保持最新（通常仅落后一秒左右）并且是只读的。这将允许您将访问权限授予需要它的人，而不向他们提供领导者数据库的详细信息。

# c# - 通过实现 IWsdlExporteExtension 具有选择性端点的 WCF 服务 WSDL 定义

> ID：15434117
> 
> 赞同：2
> 
> 时间：2013-03-15T13:48:21.043
> 
> 标签：c#, vb.net, wcf

我有一个有两个端点的服务：

```
<service name="WcfService4.Service1">
    <endpoint bindingConfiguration="myBinding"
              contract="WcfService4.IService1"
              binding="basicHttpBinding">
    </endpoint>
    <endpoint name="wsEndpoint"
              contract="WcfService4.IService1"
              binding="wsHttpBinding">
    </endpoint>
<service> 
```

此服务将由 Framework 2.0 和 4.0 客户端使用。从 2.0 客户端添加 Web 服务引用时一切正常。当我从 4.0 客户端添加服务引用时，会创建两个端点，使客户端指定它想要使用的端点。

我想要实现的是让用户选择下载：服务的 basicHttpBinding 端点或 wsHttpBinding 端点，但不能同时下载，因此框架 4.0 客户端默认只有一个端点。

默认情况下，检索 wsdl 定义的路径是：

```
http://[server]:8080/MyApp/service.svc?wsdl 
```

是否可以在另一个 url 上提供 wsdl 定义？：

例如：

> http://[服务器]:8080/service.svc/basic?wsdl
> http://[服务器]:8080/service.svc/ws?wsdl

通过使用 IWsdlExportExtension 实现来实现自定义端点行为，我可能会根据请求隐藏端点以防止被导出。

我想知道这是否可能，如果我的方法是正确的，或者我是否完全错误，或者这不能完成，因为我让事情变得有点复杂。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T15:55:47.220

AFAIK 在 WSDL 导出扩展上，您没有收到发起 WSDL 创建过程的请求。但是您可以通过使用非 SOAP（也称为 REST）端点来公开 WSDL 来做到这一点。在此示例中，它只是向服务本身发送一个 HTTP 请求以获取 WSDL，然后“修剪”未请求的端点的结果 WSDL (XML)。

运行此代码后，如果您运行

```
svcutil http://localhost:8000/service/conditionalwsdl/getwsdl?endpoint=basic 
```

你只会得到端点`BasicHttpBinding`, 而如果你运行

```
svcutil http://localhost:8000/service/conditionalwsdl/getwsdl?endpoint=ws 
```

您只会获得带有`WSHttpBinding`.

```
public class StackOverflow_15434117
{
    [ServiceContract]
    public interface ITest
    {
        [OperationContract]
        string Echo(string text);
    }
    [ServiceContract]
    public interface IConditionalMetadata
    {
        [WebGet]
        XmlElement GetWSDL(string endpoint);
    }
    public class Service : ITest, IConditionalMetadata
    {
        public string Echo(string text)
        {
            return text;
        }

        public XmlElement GetWSDL(string endpoint)
        {
            WebClient c = new WebClient();
            string baseAddress = OperationContext.Current.Host.BaseAddresses[0].ToString();
            byte[] existingMetadata = c.DownloadData(baseAddress + "?wsdl");
            XmlDocument doc = new XmlDocument();
            doc.Load(new MemoryStream(existingMetadata));
            XmlElement result = doc.DocumentElement;
            XmlNamespaceManager nsManager = new XmlNamespaceManager(doc.NameTable);
            nsManager.AddNamespace("wsdl", "http://schemas.xmlsoap.org/wsdl/");
            nsManager.AddNamespace("soap11", "http://schemas.xmlsoap.org/wsdl/soap/");
            nsManager.AddNamespace("soap12", "http://schemas.xmlsoap.org/wsdl/soap12/");

            List<XmlNode> toRemove = new List<XmlNode>();

            // Remove all SOAP 1.1 endpoints which are not the requested one
            XmlNodeList toRemove11 = result.SelectNodes("//wsdl:service/wsdl:port/soap11:address", nsManager);
            XmlNodeList toRemove12 = result.SelectNodes("//wsdl:service/wsdl:port/soap12:address", nsManager);
            foreach (XmlNode node in toRemove11)
            {
                if (!node.Attributes["location"].Value.EndsWith(endpoint, StringComparison.OrdinalIgnoreCase))
                {
                    toRemove.Add(node);
                }
            }

            foreach (XmlNode node in toRemove12)
            {
                if (!node.Attributes["location"].Value.EndsWith(endpoint, StringComparison.OrdinalIgnoreCase))
                {
                    toRemove.Add(node);
                }
            }

            List<string> bindingsToRemove = new List<string>();
            foreach (XmlNode node in toRemove)
            {
                string binding;
                RemoveWsdlPort(node, out binding);
                bindingsToRemove.Add(binding);
            }

            toRemove.Clear();
            foreach (var binding in bindingsToRemove)
            {
                string[] parts = binding.Split(':');
                foreach (XmlNode node in result.SelectNodes("//wsdl:binding[@name='" + parts[1] + "']", nsManager))
                {
                    toRemove.Add(node);
                }
            }

            foreach (XmlNode bindingNode in toRemove)
            {
                bindingNode.ParentNode.RemoveChild(bindingNode);
            }

            return result;
        }

        static void RemoveWsdlPort(XmlNode wsdlPortDescendant, out string binding)
        {
            while (wsdlPortDescendant.LocalName != "port" && wsdlPortDescendant.NamespaceURI != "http://schemas.xmlsoap.org/wsdl/")
            {
                wsdlPortDescendant = wsdlPortDescendant.ParentNode;
            }

            binding = wsdlPortDescendant.Attributes["binding"].Value;

            var removed = wsdlPortDescendant.ParentNode.RemoveChild(wsdlPortDescendant);
        }
    }
    public static void Test()
    {
        string baseAddress = "http://" + Environment.MachineName + ":8000/Service";
        ServiceHost host = new ServiceHost(typeof(Service), new Uri(baseAddress));
        host.AddServiceEndpoint(typeof(ITest), new BasicHttpBinding(), "basic");
        host.AddServiceEndpoint(typeof(ITest), new WSHttpBinding(), "ws");
        host.AddServiceEndpoint(typeof(IConditionalMetadata), new WebHttpBinding(), "conditionalWsdl")
            .Behaviors.Add(new WebHttpBehavior());
        host.Description.Behaviors.Add(new ServiceMetadataBehavior { HttpGetEnabled = true });
        host.Open();
        Console.WriteLine("Host opened");

        ChannelFactory<ITest> factory = new ChannelFactory<ITest>(new BasicHttpBinding(), new EndpointAddress(baseAddress + "/basic"));
        ITest proxy = factory.CreateChannel();
        Console.WriteLine(proxy.Echo("Hello"));

        ((IClientChannel)proxy).Close();
        factory.Close();

        Console.WriteLine("Press ENTER to close the host");
        Console.ReadLine();
        host.Close();
    }
} 
```

# excel - 我可以自定义 Excel 下拉框的内容以反映另一个可变单元格的颜色吗？

> ID：15434119
> 
> 赞同：1
> 
> 时间：2013-03-15T13:48:27.130
> 
> 标签：excel, drop-down-menu, conditional-formatting, fontconfig

我希望有人可以帮助我，我正在创建一个帐户电子表格，其中“表 1”包含以下列表：

*   我们将计费的所有活动

*   活动预算

*   计划支出

*   实际支出

*   预算差异（即剩余的钱要花掉，或者如果超支将被标记为红色）

此外，我还有许多与此支出相关的其他标签；所以每个选项卡都与不同的部门相关。这允许用户直接进入他们的部门并通过下拉列表将他们的支出分配给正确的“活动”（该列表反映了表 1 中显示的活动列表）。

我试图做的是确保如果有人进入其他选项卡之一并从下拉列表中选择“活动”，该下拉列表已在前表中标记为超支，这会将“活动”标题变为红色。即在格式方面反映了前台活动标题。

我创建了一个基本版本的工作表，它应该更清晰；只是不确定我是否可以上传它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T14:27:01.557

虽然您无法设置实际列表的样式，但您可以在选择完成后设置单元格的样式。这可能是可能的，`Conditional Formatting`但我并没有真正接受，所以我只是使用了 VBA。

[示例工作表](https://dl.dropbox.com/u/10316127/style.xlsm)

我的示例有一个`Validation List`in Cell `A1`，它从 range 中获取其列表`B1:B3`。VBA 代码检测到单元格的任何更改，并使用带有 range`A1`的 a 查找颜色。`VLookup``B1:C3`

该示例不适用于旧版本的 excel（2007+ 会很好），您只需更改`Target.Interior`修改方式，因为旧版本不知道大部分内容是什么。

![示例工作表的图片](../Images/8c966cbf6617ef2d02760d3a93800abb.png)

```
Private Sub Worksheet_Change(ByVal Target As Range)
Dim Color As String

    If Target.Address = "$A$1" Then
        Color = Application.WorksheetFunction.VLookup(Range("A1"), Range("B1:C3"), 2, False)
        Select Case Color
        Case "Red"
            With Target.Interior
                .Pattern = xlSolid
                .PatternColorIndex = xlAutomatic
                .Color = 255
                .TintAndShade = 0
                .PatternTintAndShade = 0
            End With
        Case "Blue"
            With Target.Interior
                .Pattern = xlSolid
               .PatternColorIndex = xlAutomatic
                .Color = 12611584
                .TintAndShade = 0
                .PatternTintAndShade = 0
            End With
        Case "Green"
            With Target.Interior
                .Pattern = xlSolid
                .PatternColorIndex = xlAutomatic
                .Color = 5296274
                .TintAndShade = 0
                .PatternTintAndShade = 0
            End With
        End Select
    End If

End Sub 
```

您也可以（或相反）根据天气超出预算来更改列表项。

例如：`Cakes`vs`!!CAKES!!`

它并不那么漂亮，但实现起来相当简单。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-04T00:31:46.733

一个简化的例子是：

![SO15434119 示例](../Images/3ce26eeb0443159776ecf77079e4f679.png)

它发生在 Sheet1!E 中的值被计算。

Sheet1!A1:E7 是一个名为 Awarning 的工作簿范围。

Sheet2!C2:C7 恰好是包含用于验证的列表的范围。

条件格式已应用于 Sheet2!A2:A7 并带有新规则...，使用公式确定要格式化的单元格，在此公式为真的情况下格式化值：

```
=VLOOKUP(A2,Awarning,5,0)<0 
```

和红色填充。

# r - R - 对数据进行分组，但将不同的功能应用于不同的列

> ID：15434123
> 
> 赞同：4
> 
> 时间：2013-03-15T13:48:35.833
> 
> 标签：r, grouping, data.table, plyr

我想对这些数据进行分组，但在分组时对某些列应用不同的函数。

```
ID  type isDesc isImage
1   1    1      0
1   1    0      1
1   1    0      1
4   2    0      1
4   2    1      0
6   1    1      0
6   1    0      1
6   1    0      0 
```

我想按`ID`, 列分组`isDesc`并且`isImage`可以求和，但我想按原样获取类型的值。`type`在整个数据集中都是一样的。结果应如下所示：

```
ID  type isDesc isImage
1   1    1      2
4   2    1      1
6   1    1      1 
```

目前我正在使用

```
library(plyr)
summarized = ddply(data, .(ID), numcolwise(sum)) 
```

但它只是总结了所有的列。你不必使用`ddply`，但如果你认为它对工作有好处，我想坚持下去。`data.table`图书馆也是一种选择

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-15T13:54:13.227

使用`data.table`：

```
require(data.table)
dt <- data.table(data, key="ID")
dt[, list(type=type[1], isDesc=sum(isDesc), 
                  isImage=sum(isImage)), by=ID]

#    ID type isDesc isImage
# 1:  1    1      1       2
# 2:  4    2      1       1
# 3:  6    1      1       1 
```

使用`plyr`：

```
ddply(data , .(ID), summarise, type=type[1], isDesc=sum(isDesc), isImage=sum(isImage))
#   ID type isDesc isImage
# 1  1    1      1       2
# 2  4    2      1       1
# 3  6    1      1       1 
```

**编辑：**使用`data.table`'s `.SDcols`，你可以这样做，以防你有太多的列要求和，而其他列只取第一个值。

```
dt1 <- dt[, lapply(.SD, sum), by=ID, .SDcols=c(3,4)]
dt2 <- dt[, lapply(.SD, head, 1), by=ID, .SDcols=c(2)]
> dt2[dt1]
#    ID type isDesc isImage
# 1:  1    1      1       2
# 2:  4    2      1       1
# 3:  6    1      1       1 
```

您可以提供列名或列号作为 .SDcols 的参数。例如：`.SDcols=c("type")`也是有效的。

# javascript - 调整大小时匹配另一个元素的高度

> ID：15434124
> 
> 赞同：-2
> 
> 时间：2013-03-15T13:48:40.280
> 
> 标签：javascript, jquery, html, css, height

好的，所以我试图让一个元素成为页面的完整高度。即使我调整或打开检查元素框并关闭它，我的 html 元素也匹配页面大小，但我的正文和其他元素不会，所以我使用 javascript 使我的元素与 html 框的大小一致，这可行，但是当您调整浏览器窗口的大小或关闭/打开开发人员工具时，html 元素会调整大小，但其他元素不会。

有没有办法在我的 html 元素上添加一个监听器以在它改变高度时运行一个函数？

这是我尝试使用某人建议但不起作用的一些代码：

```
$('#program-cell').height($('html').height());
$('html').resize(function () {
    $('#program-cell').height($('html').height());
}); 
```

添加 .resize() 插件后，其中一个答案表明我几乎可以让它工作。打开和关闭开发人员工具时它可以工作，但调整窗口大小并没有改变任何东西。我猜是因为我匹配了 html 元素的大小，所以 html 元素会增长以匹配我正在调整大小的对象的大小，这意味着它只会变大而永远不会变小。

我必须通过将它的高度设置为自动来清除我正在调整大小的对象的高度，然后匹配 html 的高度。我终于让它工作了，这是有效的代码：

```
$('#program-cell').height(($('html').height()-84)+'px');
$('html').resize(function () {
    $('#program-cell').height('auto');
    $('#program-cell').height(($('html').height()-84)+'px');
}); 
```

我有 -84 来减去我的标题的高度。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-15T13:51:07.297

你根本不需要 JavaScript。

```
html, body { height:100%; }
div { height:100%; } 
```

```
<html> <!-- 100% of window height -->
    <body> <!-- 100% of html height -->
        <div></div> <!-- 100% of body height -->
    </body>
</html> 
```

[JSFiddle 示例](http://jsfiddle.net/LpxSC/)。

如果您的分隔线的父级的值不是 100% 高度，则您的分隔线相对于页面正文的高度不会是 100%。

```
<html> <!-- 100% of window height -->
    <body> <!-- 100% of html height -->
        <div style="height:30px"> <!-- 30px high parent -->
            <div></div> <!-- 100% of parent height = 30px -->
        </div>
    </body>
</html> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-15T13:51:28.440

有一个插件可以为元素调整大小添加侦听器，您可以使用它来做到这一点。在这里查看[。](http://benalman.com/projects/jquery-resize-plugin/)

或者，`.resize()`在窗口上工作。

# jquery - 在jQuery mobile中设置按钮颜色？

> ID：15434129
> 
> 赞同：4
> 
> 时间：2013-03-15T13:48:49.253
> 
> 标签：jquery, html, css, jquery-mobile

我有一个 jQuery Mobile 应用程序。这个应用程序有一个按钮，我需要给它一个特殊的颜色。

换句话说，整个应用程序中只有一个按钮使用了这种颜色。我需要通过 CSS 设置它。

目前，我有以下内容：

```
<input type="button" value="My Button" style="background-color:#00ff21;" /> 
```

这种方法改变了按钮的颜色。**但是**，颜色变淡了。起初我不相信，所以我尝试了：

```
<input type="button" value="My Button" style="background-color:yellow;" /> 
```

很明显，按钮颜色变淡了。如何设置按钮的颜色以使其不会出现褪色？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T14:17:49.820

您的问题来自输入类型按钮元素的 jQM 样式。您的情况不起作用，因为您还需要将不透明度设置为 1：

```
opacity: 1; 
```

不透明度是颜色看起来褪色的主要原因。

不幸的是，这行不通。我不打算解释为什么，自己尝试一下，看看有什么不同。

成功的唯一方法是创建一个像这样的按钮：

```
<a data-role="button" id="custom-btn" style="background:yellow;">Custom Button</a> 
```

现场示例：http: [//jsfiddle.net/Gajotres/bfMNu/](http://jsfiddle.net/Gajotres/bfMNu/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-07-09T15:05:29.600

添加样式`background-color:yellow !important`

# javascript - Python 正则表达式。将 js 函数体与另一个嵌套函数匹配

> ID：15434130
> 
> 赞同：0
> 
> 时间：2013-03-15T13:48:50.580
> 
> 标签：javascript, python, regex, python-2.7

有以下js函数：

```
function foo() 
{ 
    function bar(objArr) 
    { 
        var ts=''; 
        for (i=0; i<objArr.length; i++) 
        {
            if (objArr[i].checked == true) 
                ts +=objArr[i].value;
        } 
        return ts;
    } 

    tmb=document.getElementById('tmb');        
    x=bar(tmb.vn); 
    return x.substr(6,1); 
} 
```

我如何匹配 foo() 函数体？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T13:53:46.090

试试这个：

```
(?<=function foo\(\))(\s|.)* 
```

# ios - ios转换中的NSDate

> ID：15434133
> 
> 赞同：-1
> 
> 时间：2013-03-15T13:48:56.990
> 
> 标签：ios, nsdate, nsdateformatter

我希望在 iOS 中将字符串 2013-03-19 13:41:57 +0000 转换为这种格式 2013 年 2 月 27 日星期三 00:00:00 GMT+0530（印度标准时间）。请帮助我，我们将不胜感激。

我尝试了这样的事情：

```
 NSString * clippedString  = @"2013-03-19 13:41:57 +0000 ";
    NSDateFormatter *dateFormat = [[NSDateFormatter alloc] init];

    [dateFormat setDateFormat:@"EE MMM d yyyy HH:mm:ss Z"];

    NSDate *date = [[NSDate alloc] init];

    date = [dateFormat dateFromString:clippedString]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T13:59:58.220

我接受了挑战：）

```
NSString *string=@"2013-03-19 13:41:57 +0000";
NSDateFormatter *dateFormatter=[NSDateFormatter new];
[dateFormatter setDateFormat:@"yyyy-MM-dd HH:mm:ss z"];
NSDate *date=[dateFormatter dateFromString:string];

[dateFormatter setDateFormat:@"EEE MMM dd yyyy HH:mm:ss zzz zzzz"];
NSLog(@"%@",[dateFormatter stringFromDate:date]); 
```

# python - 可以在 sikuli 中动态捕捉图像吗？

> ID：15434135
> 
> 赞同：1
> 
> 时间：2013-03-15T13:49:05.553
> 
> 标签：python, sikuli

我正在使用 sikuli 加载 IE，然后从 adobe connect 打开 .flv 记录。因为我动态捕获图像并且必须将这些图像存储在列表对象或任何数据结构中。是否可以在 sikuli 中动态捕获窗口中的图像？

请帮我。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-16T19:47:40.290

```
def CaptureScreen(path):
    #Take Screen shot and move it from temp folder to new location <path>
    shutil.move(capture(Screen()), path) 
```

[http://doc.sikuli.org/screen.html#Screen.capture](http://doc.sikuli.org/screen.html#Screen.capture)

[http://www.jython.org/docs/library/shutil.html](http://www.jython.org/docs/library/shutil.html)

# r - 函数 write.csv 返回错误

> ID：15434138
> 
> 赞同：5
> 
> 时间：2013-03-15T13:49:15.190
> 
> 标签：r, csv

R 函数`write.csv`返回错误。

这是我要写的data.frame：

```
> VaRStats
               A Index    B Index      C Index
Daily VaR     -0.65006    -0.50391     -0.5557
Daily CVaR    -0.75679    -0.57491    -0.65174
5 Days VaR     -1.4204     -1.0077     -1.2269 
```

这是类`VaRStats`：

```
> class(VaRStats)
[1] "data.frame" 
```

这是`dput()`输出`VaRStats`：

```
> dput(VaRStats)
structure(list(`JWFXA Index` = structure(list(`NA` = -0.650061101980277, 
    `NA` = -0.756791819719978, `JWFXA Index` = -1.42035638029947), .Names = c(NA, 
NA, "JWFXA Index")), `CCYT1 Index` = structure(list(`NA` = -0.503912574910245, 
    `NA` = -0.574907003405759, `CCYT1 Index` = -1.00773735259718), .Names = c(NA, 
NA, "CCYT1 Index")), `FX Multistrategy Index` = structure(list(
    `NA` = -0.555699685451229, `NA` = -0.651738541799373, `FX Multistrategy Index` = -1.22688572580144), .Names = c(NA, 
NA, "FX Multistrategy Index"))), .Names = c("JWFXA Index", "CCYT1 Index", 
"FX Multistrategy Index"), row.names = c("Daily VaR", "Daily CVaR", 
"5 Days VaR"), class = "data.frame") 
```

通过`write.csv`函数产生的错误

```
> write.csv(VaRStats, "SummaryStats.csv")
Error in write.table(x, file, nrow(x), p, rnames, sep, eol, na, dec, as.integer(quote),  : 
  type 'list' not implemented in 'EncodeElement' 
```

这怎么可能？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-15T14:06:01.007

在这里你可以简单地做到这一点：

```
 write.csv(as.matrix(dd), "SummaryStats.csv") 
```

这是有效的，因为你所有的列都是数字的。

```
read.csv("SummaryStats.csv")
         X JWFXA.Index CCYT1.Index FX.Multistrategy.Index
1  Daily VaR  -0.6500611  -0.5039126             -0.5556997
2 Daily CVaR  -0.7567918  -0.5749070             -0.6517385
3 5 Days VaR  -1.4203564  -1.0077374             -1.2268857 
```

**编辑**

这个解决方案是正确的。

如果您的列表中有一个字符串：

```
dd[1,1] <- 'a'

as.matrix(dd)
           JWFXA Index CCYT1 Index FX Multistrategy Index
Daily VaR  "a"         -0.5039126  -0.5556997            
Daily CVaR -0.7567918  -0.574907   -0.6517385            
5 Days VaR -1.420356   -1.007737   -1.226886 
```

但使用`as.numeric`将失败或至少转换为 NA

```
sapply(dd, as.numeric)
     JWFXA Index CCYT1 Index FX Multistrategy Index
[1,]          NA  -0.5039126             -0.5556997
[2,]  -0.7567918  -0.5749070             -0.6517385
[3,]  -1.4203564  -1.0077374             -1.2268857
Warning message: 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-15T14:05:09.833

由于无法解释的原因，您的数据框列是列表，而不是向量。您可以使用以下命令将数据框转换回“正常”格式：

```
df <- sapply(VaRStats, as.numeric)
rownames(df) <- rownames(VarStats)
write.csv(df, "yourfile.csv") 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-15T14:03:26.893

您的列是列表。它们应该是向量。尝试这个。

```
VaRStats<-sapply(VaRStats,unlist)
write.csv(VaRStats,file="...") 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-15T13:56:55.433

你能举一个可重现的例子吗，我的猜测是你有一个问题`row.names`and `col.names`，也可以使用`write.table`，这样你就可以根据需要设置所有参数

编辑：我有同样的问题看看`str`！！！

```
R) str(test)
'data.frame':   3 obs. of  3 variables:
 $ JWFXA Index           :List of 3
  ..$ NA         : num -0.65
  ..$ NA         : num -0.757
  ..$ JWFXA Index: num -1.42
 $ CCYT1 Index           :List of 3
  ..$ NA         : num -0.504
  ..$ NA         : num -0.575
  ..$ CCYT1 Index: num -1.01
 $ FX Multistrategy Index:List of 3
  ..$ NA                    : num -0.556
  ..$ NA                    : num -0.652
  ..$ FX Multistrategy Index: num -1.23 
```

您的数据不是公共数据`data.frame`

@juba 有一个很好的修复，用于`lapply`将每个列表转换为`numeric`向量

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-07-25T23:32:27.513

尝试检查每个列的变量类型。写 csv 不喜欢 list 类型的列。

例如，在《星球大战》数据集中，电影、车辆和星际飞船的列属于列表类型：

```
> data(starwars)
> class(starwars$vehicles)
[1] "list"
> class(starwars$starships)
[1] "list"
> class(starwars$films)
[1] "list" 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-06-11T01:49:44.310

尝试使用这个

```
df <- do.call(rbind.data.frame, VaRStats)

write.csv(df, "path\VaRStats.csv") 
```

第一行从列表转换为数据框，然后您可以导出到 csv 文件

# c# - 如何访问 ListBlobSegmented 的延续令牌

> ID：15434139
> 
> 赞同：0
> 
> 时间：2013-03-15T13:49:18.037
> 
> 标签：c#, azure, azure-storage, azure-blob-storage

我正在使用 ListBlobs Segemented 但在获取下一页的 continuationTOken 时遇到问题。这是我的代码

```
 CloudBlobContainer container = GetContainerReference(fileType);
        BlobRequestOptions blobOptions = new BlobRequestOptions();

        ResultContinuation continuationToken=null;
        ResultSegment<IListBlobItem> blobs = container.ListBlobsSegmented(5000,continuationToken,blobOptions); 
```

我从来没有得到 HasMoreResults=true 虽然我知道前面有结果。并且无法访问 continuationToken。不知道哪个属性在哪里？我可以在 ResultContinuationClass 的非公共属性中看到它

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-15T16:29:39.933

试图检查延续令牌的其余代码在哪里？以下代码有效：

```
 BlobRequestOptions options = new BlobRequestOptions();
    options.UseFlatBlobListing = true;
    ResultSegment<IListBlobItem> list = Global.ContainerTools.ListBlobsSegmented(5, null, options);

    foreach (CloudBlob b in list.Results)
    {
        System.Diagnostics.Debug.WriteLine(b.Uri);
    }

    while (list.ContinuationToken != null)
    {
        list = Global.ContainerTools.ListBlobsSegmented(5, list.ContinuationToken, options);
        foreach (CloudBlob b in list.Results)
        {
            System.Diagnostics.Debug.WriteLine(b.Uri);
        }
    } 
```

# php - 将数组键分组为数字范围，可能吗？

> ID：15434147
> 
> 赞同：7
> 
> 时间：2013-03-15T13:49:39.600
> 
> 标签：php, arrays

**我有以下数组：**

```
(
    [25] => 1
    [26] => 3
    [10] => 2
    [24] => 1
) 
```

它是使用[`array_count_values()`](http://php.net/manual/en/function.array-count-values.php)PHP 中的函数创建的。

在 array_count_values 之前，实际的原始数组是这样的......

```
Array
(
    [0] => 26
    [1] => 
    [2] => 18
    [3] => 28
    [4] => 22
    [5] => 21
    [6] => 26
    [7] => 
    [8] => 
    [9] => 
    [10] => 
    [11] => 
    [12] =>
    [13] =>
    [14] =>
    [15] =>
    [16] =>
    [17] =>
    [18] =>
    [19] =>
    [20] =>
) 
```

这些是年龄，那么我怎样才能将它们分组到年龄组中呢？

假设我想要以下年龄段：`<= 18` `19-26` `27-32` `> 32`

它应该看起来：

```
(
[<= 18] => 1
[19-26] => 4
[27-32] => 2
[ > 32] => 1
) 
```

有为此准备好的功能吗？

我的解决方案：一种乏味的方法是创建年龄组的变量。如果键匹配范围，则比 foreach 并增加特定年龄组的变量 ++ `($min <= $value) && ($value <= $max)`...

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-15T14:16:22.957

有趣的问题。这是我的解决方案。首先，定义一个年龄范围数组：

```
$age_ranges = array(
    array( 0, 18),
    array( 19, 26),
    array( 27, 32),
    array( 33, 150) // I use 150 as the "max" age
); 
```

然后，我们有你的`array_count_values()`输出：

```
$array_count_values = array( 25 => 1, 26 => 3, 10 => 2, 24 => 1); // From OP 
```

现在，我们创建一个包含所有年龄的数组，其中键是年龄，值是具有该年龄的人数。下一步需要按其键对其进行排序。

```
$all_ages = $array_count_values + array_fill( 0, 150, 0);
ksort( $all_ages); 
```

最后，我遍历所有年龄范围，从`$all_ages`数组中切出年龄范围，并将它们的值相加以生成一个年龄范围数组，其值对应于该年龄范围内的人数。

```
$result = array();
foreach( $age_ranges as $range) {
    list( $start, $end) = $range;
    $result["$start-$end"] = array_sum( array_slice( $all_ages, $start, $end - $start + 1));
} 
```

A`print_r( $result);` [产生以下输出](http://viper-7.com/NEIAxQ)：

```
Array
(
    [0-18] => 2
    [19-26] => 5
    [27-32] => 0
    [33-150] => 0
) 
```

**编辑：**由于您仍然可以访问原始数组，因此您可以计算最后有多少“未知数”：

```
$result['unknown'] = count( array_filter( $original_array,  function( $el) { 
    return empty( $el); 
})); 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-03-15T15:51:14.397

这听起来像是 map-reduce 的完美案例。

映射步骤：将每个年龄变成 4 个范围之一。

减少步骤：将范围转换为范围的结果数组。

让我们试一试：

```
$map = function($age) {
    if (!$age) {
        return 'unknown';
    } elseif ($age <= 18) {
        return '<= 18';
    } elseif ($age <= 26) {
        return '19-26';
    } elseif ($age <= 32) {
        return '26-32';
    }
    return '> 32';
} 
```

所以基本上在这里，我们只是将每个年龄转换为它所代表的范围的字符串表示。所以现在我们将有一个范围数组，所以我们需要将其简化为一个摘要（将所有这些范围相加）：

然后是reduce函数：

```
$reduce = function($result, $age) {
    $result[$age]++;
    return $result;
} 
```

这很简单。如果您想支持动态范围，那么您将有一些逻辑来检查是否未设置年龄（然后将其初始化为`0`）...

所以现在，把它们放在一起：

```
$array = array(12, 63, 24, 34, 12, 10, 19,); // Your ages
$data = array_map(function($age) {
    if (!$age) {
        return 'unknown';
    } elseif ($age <= 18) {
        return '<= 18';
    } elseif ($age <= 26) {
        return '19-26';
    } elseif ($age <= 32) {
        return '26-32';
    }
    return '> 32';
}, $array);
$result = array_reduce($data, function($result, $age) {
    $result[$age]++;
    return $result;
}, array('unknown' => 0, '<= 18' => 0, '19-26' => 0, '26-32' => 0, '> 32' => 0)); 
```

然后产生：

```
array(4) { 
    ["unknown"]=> int(0)
    ["<= 18"]=> int(3) 
    ["19-26"]=> int(2) 
    ["26-32"]=> int(0) 
    ["> 32"]=> int(2) 
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-15T14:27:34.693

如果您只想使用以前的数组`array_count_values()`，可以使用

```
$ages = array(
    0 => 26,
    1 => 18,
    2 => 28,
    3 => 22,
    4 => null,
    5 => 21,
    6 => 26,
    7 => null); 
```

创建一个空白数组来填充

```
$final = array(
    'unknown' => 0,
    '18' => 0,
    '19_26' => 0,
    '27_32' => 0,
    '32' => 0,
);

array_walk($ages, function($age, $i, $final) {
    if (!$age) { $final['unknown']++; return; }
    if ($age <= 18) { $final['18']++; return; }
    if ($age <= 26) { $final['19_26']++; return; }
    if ($age <= 32) { $final['27_32']++; return; }
    if ($age > 32) { $final['32']++; return; }
}, &$final); 
```

$final 的输出：

```
array (size=5)
  'unknown' => int 2
  18 => int 1
  '19_26' => int 4
  '27_32' => int 1
  32 => int 0 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-15T15:28:14.603

在看到所有这些解决方案之后，我想为什么不将正则表达式与原始数组一起使用？

```
$ages = array(25, 26, 10, 24, 10, 26, 26, 32, 32, 54, 84, 4, 18, 5, 98, 27);
$string = '#'. implode('#', $ages) . '#';
preg_match_all('/(#[0-9]#|#1[0-7]#)|(#1[8-9]#|#2[0-6]#)|(#2[7-9]#|#3[0-2]#)|(#3[3-9]#|#[4-9][0-9]#|#1[0-5][0-9]#)/', $string, $groups);
$age_ranges = array('0-17' => count(array_filter($groups[1])), '18-26' => count(array_filter($groups[2])), '27-32'
 => count(array_filter($groups[3])), '33-159' => count(array_filter($groups[4])));

print_r($age_ranges); 
```

输出：

```
Array
(
    [0-17] => 2
    [18-26] => 3
    [27-32] => 1
    [33-159] => 2
) 
```

# c# - WPF DataGrid：有关可见区域之外选定单元格虚拟化的问题

> ID：15434150
> 
> 赞同：3
> 
> 时间：2013-03-15T13:49:49.347
> 
> 标签：c#, wpf, select, datagrid, virtualization

我`DataGrid`处理大量数据（平均多达 40k 行），因此我需要进行大量虚拟化。

有时我需要选择某一列中的一大堆（如果不是全部）单元格，以共同更改它们的值。对于任何感兴趣的人，我通过单击列标题（通常对列进行排序）并调用以下方法来实现这一点：

```
private void SelectColumn(object sender, DataGridSortingEventArgs e)
{
    if (MyDataGrid.SelectionUnit != DataGridSelectionUnit.FullRow)
    {
        DataGridColumn column = e.Column;

        if (e.Column != null)
        {
            MyDataGrid.UnselectAllCells();

            for (int i = 0; i < MyDataGrid.Items.Count; i++)
            {
                MyDataGrid.SelectedCells.Add(new DataGridCellInfo(MyDataGrid.Items[i], column));
            }

            // Set the first cell into editing mode
            MyDataGrid.CurrentCell = MyDataGrid.SelectedCells[0];
        }
    }
} 
```

**编辑：**对不起，我几乎忘了添加我的代码来设置所选单元格的值......：

```
private void MyDataGrid_CellEditEnding(object sender, DataGridCellEditEndingEventArgs e)
{
    if (MyDataGrid.SelectedCells.Count > 1)
    { // More than 1 cell are selected
        if (e.EditingElement.GetType() == typeof(TextBox))
        { // The cell being edited is of type TextBox
            string value = ((TextBox)e.EditingElement).Text;
            foreach (DataGridCellInfo cellInfo in MyDataGrid.SelectedCells)
            {
                DataGridCell gridCell = TryToFindGridCell(MyDataGrid, cellInfo);
                if (gridCell != null) gridCell.Content = value; // ((TextBox)e.EditingElement).Text returns the Text in the cell sending DataGridCellEditEndingEventArgs e
            }
        }
    }
}

static DataGridCell TryToFindGridCell(DataGrid grid, DataGridCellInfo cellInfo)
{
    DataGridCell result = null;
    DataGridRow row = (DataGridRow)grid.ItemContainerGenerator.ContainerFromItem(cellInfo.Item);
    if (row != null)
    {
        int columnIndex = grid.Columns.IndexOf(cellInfo.Column);
        if (columnIndex > -1)
        {
            DataGridCellsPresenter presenter = GetVisualChild<DataGridCellsPresenter>(row);
            result = presenter.ItemContainerGenerator.ContainerFromIndex(columnIndex) as DataGridCell;
        }
    }
    return result;
} 
```

如果所有选定的单元格都在我的 GUI 的可见区域内，这将非常有效。但是，由于外部的所有内容（以几行作为缓冲区）都被虚拟化，所以我遇到了问题。虚拟化的行并没有真正被选中，可见区域之外的任何单元格都不会与可见的单元格一起改变它们的值。

谁能指导我为此采取更好的方法？是的，我**需要**处理这么多数据，抱歉。;)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-10-12T22:08:58.353

我最近对 ​​WPF 的数据网格有同样的问题。它太慢了。我认为这是因为 datagridrow 对象对于这么多的数据来说太臃肿了。

就我而言，我必须处理的结果数量非常相似。我通过完全取消数据网格来解决它。我希望你的列数是不变的，因为如果不是这样的话，以这种方式实现会很痛苦（阅读：我不确定如何:)）......无论如何......

创建一个类并为数据表中的每一列创建一个属性

```
class TableItem
{
    public string Column1 { get; set: }
    public string Column2 { get; set; }
} 
```

ETC....

无论您从哪里加载数据，遍历数据表/等并将列添加到视图模型中的 ObservableCollection 对象。

```
for (int = 0; i < yourDataTable.Rows.Count; i++)
{
    DataRow row = yourDataTable.Rows[i];
    TableItem ti = new TableItem 
    { 
        Column1 = row["Column1Name"].ToString(), 
        Column2 = row["Column2Name"].ToString()
    }
    yourObservableCollection.Add(ti);
}

ObservableCollectionInViewModel = yourObservableCollection; 
```

然后创建一个 ListView，并给它你需要的任意数量的列。将 ListView 绑定到我们刚刚在上面创建的 viewmodel 中的 ObservableCollection，然后使用 DisplayMemberBinding 将每一列绑定到 TableItem 对象的相应属性：

```
<ListView x:Name="lstGridWOResourceHogging" SelectionMode="Extended" ItemsSource="{Binding ObservableCollecitonInViewModel, IsAsync="True"
              VirtualizingPanel.IsVirtualizing="False">
        <ListView.View>
            <GridView>
                <GridViewColumn Header="Column1Name" DisplayMemberBinding="{Binding Column1}"/>
                <GridViewColumn Header="Column2Name" DisplayMemberBinding="{Binding Column2}"/>
            </GridView>
        </ListView.View>
    </ListView> 
```

这样，您可以关闭虚拟化，因为它不像数据网格的对象那么胖，所以性能要好得多。现在，在没有虚拟化的情况下，您真正​​选择的内容已被选中，您可以理智地迭代它。

# java - 在枚举中重载equals方法 - 任何陷阱？

> ID：15434158
> 
> 赞同：4
> 
> 时间：2013-03-15T13:50:07.987
> 
> 标签：java, enums

我有一个 Java 枚举，它代表给定字段的潜在值，以及用于标识该值的唯一标识符：

```
 public enum MyEnum {
       TYPEA("A"),
       TYPEB("B")

       private String code;

       private MyEnum(String code){
          this.code = code;
       }

       public String getCode(){
          return code;
       }
   } 
```

我想添加一个自定义比较器：

```
public boolean equals(String code){
    return getCode().equals(code);
} 
```

这将允许我将我的枚举与字符串进行比较。

有什么我遗漏的陷阱吗？我看不出有什么明显的错误...

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-03-15T13:52:01.793

嗯，有两件事：

*   你没有压倒一切——你超载了，而且以一种令人困惑的方式
*   你的平等不是对称的 -`MyEnum.A.equals("A")`是真的，但是`"A".equals(MyEnum.A)`是假的。

我不会这样做——如果你*想*对代码执行相等性检查，这样做很容易……但明确一点会更清楚。

毕竟，这只是以下之间的区别：

```
if (value.equals("A")) 
```

和

```
if (value.getCode().equals("A")) 
```

我认为后者更清楚。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-15T13:51:43.650

陷阱很简单：你没有覆盖`equals(Object)`，而是引入了另一种方法`equals(String)`。该方法不会被任何基础设施调用`equals`对您的对象使用，因为动态分派仅适用于调用该方法的对象的运行时类型，并且所有方法参数的*静态*类型用于在编译时解析方法签名.

如果您将此“更正”为`equals(Object)`，但保留逻辑，那么您违反了`equals`合同，因为您不满足对称性属性：如果通过它将另一个字符串与您的对象进行比较`String.equals(yourObject)`，它将返回 false 并且您无法影响它。这就是使用 Java 的单调度机制来定义等式关系的局限性。

值得庆幸的是，枚举已经阻止您通过硬编码`equals`并`hashCode`使其最终化来尝试此操作。

# javascript - paperjs中的多点触控手势

> ID：15434165
> 
> 赞同：2
> 
> 时间：2013-03-15T13:50:22.883
> 
> 标签：javascript, canvas, paperjs

在paperjs中可以使用鼠标事件灵活地创建和操作复杂的形状。我正在从事的项目在台式机/笔记本电脑上看起来不错。但是，我还想通过捏和缩放等触摸事件来进行形状操作。paperjs 中是否可以使用多点触控界面，或者我是否必须添加另一个库来支持触控。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T14:10:23.267

您可以为各种触摸事件创建事件侦听器：

`ontouchstart` `ontouchmove` `ontouchend` `ongesturestart` `ongesturechange` `ongestureend`

从那里您可以跟踪事件对象的触摸位置

`var touch = event.touches[0];`

```
touchX = touch.pageX;
touchY = touch.pageY; 
```

您可以根据这些点轻松地重新定位对象。

基于手势的缩放和旋转稍微复杂一些，但使用手势事件也是可行的......

看看下面的链接，它是简单的纯 javascript，并没有你想象的那么复杂

[http://techblog.floorplanner.com/post/20528546052/interactive-svg-on-the-ipad](http://techblog.floorplanner.com/post/20528546052/interactive-svg-on-the-ipad)

# wso2 - 在 java 程序中访问 WSO2 ESB 代理

> ID：15434170
> 
> 赞同：1
> 
> 时间：2013-03-15T13:50:37.890
> 
> 标签：wso2, wso2esb

我在 WSO2 esb 中为外部 wsdl 配置了一个 wsdl 代理。它成功创建了代理。创建代理时，我没有选中“发布相同的服务合同”复选框。如果我们使用外部 Web 服务，是否必须检查？当我单击尝试时，它没有显示 wsdl 中可用的操作。

如果上述问题都得到解决，我们需要从我们的 java 项目中访问代理。我们如何在我们的 java 程序中访问 WSO2 ESB 代理？

提前致谢。

谢谢，拉古

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T10:05:27.367

是的，如果您想发布相同的 WSDL，您需要检查发布相同的服务合同。

在 java 代码中，您可以编写一个简单的axis2客户端，如下所示。到您的代理的端点。

```
 public OMElement sendReceive(OMElement payload, String endPointReference, String operation)
            throws AxisFault {
        ServiceClient sender;
        Options options;
        OMElement response = null;

        try {
            sender = new ServiceClient();
            options = new Options();
            options.setTo(new EndpointReference(endPointReference));
            options.setProperty(org.apache.axis2.transport.http.HTTPConstants.CHUNKED, Boolean.FALSE);
            options.setTimeOutInMilliSeconds(45000);
            options.setAction("urn:" + operation);
            sender.setOptions(options);

            response = sender.sendReceive(payload);

        } catch (AxisFault axisFault) {
            throw new AxisFault("AxisFault while getting response :" + axisFault.getMessage(), axisFault);
        }
        Assert.assertNotNull(response);
        return response;
    } 
```

您可以通过绑定诸如soap UI之类的工具来获取示例有效负载。

谢谢你，达沙那。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-09-16T10:38:39.433

试试这样：

```
 CentralUuidService service = new CentralUuidService(new URL("http://wls02.tigeritbd.com:8280/services/CentralUuidService?wsdl"),new QName("http://bean.service.uuid.gov.bd/", "CentralUuidService"));

    GetBirthPlaceServiceResponse response = service.getCentralUuidServiceHttpSoap11Endpoint().getBirthPlace(request);        
    if(response != null) {
        System.out.println("Operation status is:"+response.isOperationStatus());
    }
} 
```

# wget - wget 只下载一个 index.html 文件而不是其他大约 500 个 html 文件

> ID：15434173
> 
> 赞同：3
> 
> 时间：2013-03-15T13:50:50.933
> 
> 标签：wget

使用 Wget 我通常只收到一个 -- index.html 文件。我输入以下字符串：

wget -e robots=off -r [http://www.korpora.org/kant/aa03](http://www.korpora.org/kant/aa03)

唉，它只返回一个 index.html 文件。

目录 aa03 表示康德的书，第 3 卷，里面肯定有 560 个文件（页）左右。这些页面可以在线阅读，但不会被下载。有什么补救办法吗？！谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-20T17:33:20.437

按照该链接将我们带到：

[http://korpora.zim.uni-duisburg-essen.de/kant/aa03/](http://korpora.zim.uni-duisburg-essen.de/kant/aa03/)

wget 不会跟随指向用户未指定域的链接。由于 korpora.zim.uni-duisburg-essen.de 不等于 korpora.org，wget 不会跟随索引页面上的链接。

要解决此问题，请使用 --span-hosts 或 -H。-rH 是一个*非常*危险的组合——结合起来，你可能会不小心爬到整个互联网——所以你会希望它的范围非常集中。此命令将执行您打算执行的操作：

wget -e robots=off -rH -l inf -np -D korpora.org,korpora.zim.uni-duisburg-essen.de [http://korpora.org/kant/aa03/index.html](http://korpora.org/kant/aa03/index.html)

（-np 或 --no-parent 会将抓取限制为 aa03/。-D 会将其限制为仅这两个域。-l inf 将无限深抓取，受 -D 和 -np 的约束）。

# ios - UIActivityIndi cator 动画问题

> ID：15434174
> 
> 赞同：-1
> 
> 时间：2013-03-15T13:50:53.427
> 
> 标签：ios, objective-c, uiactivityindicatorview

我已经实现`UIActivity`了指标并添加到`ViewDidLoad.Method`如下视图中：

```
 UIActivityIndicatorView *act=[[UIActivityIndicatorView alloc]initWithActivityIndicatorStyle:UIActivityIndicatorViewStyleWhiteLarge];
    act.frame=CGRectMake(150, 240, 45, 45);
    [act startAnimating];
    [self.view addSubview:act]; 
```

但我无法查看在视图中旋转的微调器。谁能告诉我是什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T14:16:17.780

微调器的颜色是白色的，所以你不会看到微调器....只需在动画前更改颜色，您就会看到它......示例：act.color=[UIColor redColor];

# c# - 实体中的外键字段？

> ID：15434175
> 
> 赞同：0
> 
> 时间：2013-03-15T13:50:54.070
> 
> 标签：c#, asp.net-mvc-4, entity-framework-4, entity

我是 ASP.NET MVC 的新手，我花了一些时间为具有相关实体的实体创建表单。

在寻找实现这一目标的最佳方法时，我发现 Internet 上的大多数示例都使用一种丑陋的方式来引用相关对象。

例如，请参阅[MVC 音乐商店教程](http://www.asp.net/mvc/tutorials/mvc-music-store)的摘录：

[http://s8.postimage.org/mmevixep1/orm_mvc.png http://s8.postimage.org/mmevixep1/orm_mvc.png](http://s8.postimage.org/mmevixep1/orm_mvc.png)

我在其他教程中也发现了相同的方法，例如[这个](http://www.asp.net/mvc/tutorials/getting-started-with-ef-using-mvc/creating-a-more-complex-data-model-for-an-asp-net-mvc-application)（“修改课程实体”，有一个 DepartmentID 和一个 Department 对象）。

我对 ORM 背后的整个想法都在这里放弃这一事实感到困惑。**但我还发现，如果没有“外键属性”，就不可能（或几乎不）更新相关实体。**

有人可以解释为什么微软使用这种方法，以及是否有替代方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T14:07:46.700

外键字段不必包含在模型中。实际上，此功能仅包含在 .Net 4.0 中。这个[链接](http://msdn.microsoft.com/en-us/library/vstudio/ee373856%28v=vs.100%29.aspx)对 .Net Entity Framework 中的关系有一个很好的解释。

# ibm-mq - 如何从 webshere mq 中的 qmgr 获取消息？

> ID：15434177
> 
> 赞同：1
> 
> 时间：2013-03-15T13:50:55.867
> 
> 标签：ibm-mq

嗨，我创建了两个队列管理器，我将消息放在 qmgr(pvn) 的远程队列(PVN.TO.NAG) 中，但是当我从另一个 qmgr(nag) localqueue(LQ.NAG) 获取消息时。但它没有显示更多消息？

```
-bash-3.00$ /opt/mqm/samp/bin/amqsput PVN.TO.NAG pvn
    Sample AMQSPUT0 start
    target queue is PVN.TO.NAG
    hi this is pvn

    Sample AMQSPUT0 end
    -bash-3.00$ /opt/mqm/samp/bin/amqsget LQ.NAG nag
    Sample AMQSGET0 start
    no more messages 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T17:05:54.737

1）您是否使用发送方和接收方通道和传输队列链接了队列管理器`pvn`和队列管理器？`nag`

2) 验证远程队列定义`PVN.TO.NAG`是否正确，即指向`LQ.NAG`

3）检查`nag`队列管理器是否设置了死信队列（DLQ）。如果已设置，请检查您的消息是否会在那里结束，因为`nag`队列管理器无法将消息路由到远程队列管理器上的队列。如果消息在那里，那么它将包含消息在 DLQ 中结束的原因。

# android - 单击删除按钮从 ListView 中删除项目

> ID：15434180
> 
> 赞同：0
> 
> 时间：2013-03-15T13:51:02.897
> 
> 标签：android, android-listview, delete-row

我需要从 ListView（和 DB）中删除从列表中单击的项目。

为了完成这项任务，我不使用上下文菜单，但我构建了一个自定义适配器，在这个适配器“row.xml”中有两个按钮“删除”和“编辑”。

那么，我怎样才能删除从 de ListView 和数据库中选择的项目呢？

...使用 setTag() 我将单击元素的 ID 设置为相对按钮，然后呢？

如何从数据库中删除？

这是我的适配器：

```
package com.prendonota;

import java.util.List;

import android.content.Context;
import android.view.LayoutInflater;
import android.view.View;
import android.view.View.OnClickListener;
import android.view.ViewGroup;
import android.widget.ArrayAdapter;
import android.widget.ImageButton;
import android.widget.TextView;
import android.widget.Toast;

import com.prendonota.activeRecord.Nota;

public class ListaNotaAdapter extends ArrayAdapter<Nota> {

    public Nota nota;
    public OnClickListener crudListeners;

    /**
     * Costruttore ereditato
     * @param context
     * @param textViewResourceId
     * @param objects
     */
    public ListaNotaAdapter(Context context, int textViewResourceId, List<Nota> objects) {
        super(context, textViewResourceId, objects);
    }       

    @Override
    public View getView(int position, View convertView, ViewGroup parent) {

        View row = null;
        final View delete;
        final View edit;

        //*** prima di tutto è necessario crearsi un oggetto inflater che
        //*** intrinsecamente associ il contesto attuale su cui si sta agendo
        //*** e il servizio che si è richiesto "layout_inflater"
        LayoutInflater inflater = (LayoutInflater)getContext().getSystemService(Context.LAYOUT_INFLATER_SERVICE);

        //*** una volta che ho l'oggetto inflater che associa contesto+servizio posso procedere
        //*** nell'identificazione dell'xml da usare
        row = inflater.inflate(R.layout.row, null );

        //*** una volta che ho la vista relativa al contesto attuale e relativa all'xml desiderato per layout
        //*** mi richiamo i propri elementi interni a cui associare i dati dell'oggetto item di turno
        TextView data       = (TextView)row.findViewById(R.id.item_data);
        TextView oggetto    = (TextView)row.findViewById(R.id.item_oggetto);
        delete  = (ImageButton)row.findViewById(R.id.button_row_delete);
        edit    = (ImageButton)row.findViewById(R.id.button_row_edit);

        //*** prende l'oggetto nell'array "Nota[] objects" passato in argomento
        //*** dato il proprio indice di posizione
        nota = getItem(position);

        //**** in fine associo agli appositi oggetti "TextView" i rispettivi valori
        data.setText(nota.get_dataInserimentoModifica());
        oggetto.setText(nota.get_oggetto());

        //*** poi associo i tag ai relativi pulsanti "Delete" e "Edit"
        delete.setTag(nota.get_id());
        edit.setTag(nota.get_id());

        //*** assegnazione dei listeners ai rispettivi pulsanti
        delete.setOnClickListener(crudListeners);
        edit.setOnClickListener(crudListeners);

        //*** inizializzo la variabile crudListeners che gestisce i listeners sui pulsanti
        crudListeners = new OnClickListener() {
            @Override
            public void onClick(View v) {
                int idnota = (Integer)v.getTag();
                StringBuilder msg = new StringBuilder("ID nota ").append(idnota);
                if(v.getId()==delete.getId()){
                    msg.append(" DELETE");
                }else{
                    msg.append(" EDIT");
                }
                Toast.makeText(getContext(), msg, Toast.LENGTH_SHORT).show();
            }
        };      

        //*** torno la vista che finirà dentro "setAdapter()"
        return row;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T13:56:06.530

如果您使用的是适配器，则无需从它自己的列表中删除该项目。`poistion`您必须使用您`getView`在方法中接收的内容从数据库中删除该项目`onClick`。

当您从数据库中删除对象时，调用`dataAdapter.notifyDataSetChanged();`适配器上的 以使用新数据集更新列表。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T13:59:55.697

1) 在适配器中保留对 List 对象的字段引用 - 例如：

`private ArrayList<Nota>list`

2) 在 getView() 方法中创建对位置的最终 int 引用，例如

`final int positionFinal`

3）当您单击删除按钮时，使用以下代码：

```
list.removeItem(positionFinal);
notifyDataSetChanged(); 
```

我希望这足够清楚，不想复制和粘贴您的代码只是为了对其进行细微且难以看到的更改。如果您需要添加动画以删除列表项以及通过拖放对它们进行排序的能力，请查看这个免费库：[DragSortListView](https://github.com/bauerca/drag-sort-listview)

祝你好运！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-15T13:53:19.773

在您的侦听器（crudListeners）的 onClickListener 中，只需从数据库和适配器的数据中删除元素（它将是您的 List 对象）。然后只需调用 adapter.notifyDataSetChanged() 方法。希望能帮助到你

# position - IE7中ExtJS组件定位bug

> ID：15434183
> 
> 赞同：0
> 
> 时间：2013-03-15T13:51:08.720
> 
> 标签：position, extjs4.1, internet-explorer-7, haslayout

下图是我所面临问题的简化版本。两者都是手工编码的`#custom`。`#ext-ct`一个 ExtJS 组件被渲染为`#ext-ct`. 然后`#custom`切换播放其`display`CSS 属性。在 IE7 中，显示`#custom`会导致组件粘在其初始位置，而隐藏`#custom`会导致组件向上移动。

我试图在 jsFiddle 中重现此错误，但未成功。我已经知道大名鼎鼎的“hasLayout”概念，所以我尝试过申请`zoom:1`，`#custom`然后我尝试[了这个解决方案](https://stackoverflow.com/questions/2473171/ie7-relative-absolute-positioning-bug-with-dynamically-modified-page-content)仍然没有成功。有没有人遇到过这种情况？是否有一个简单的修复方法来强制组件粘在它的容器上？

![在此处输入图像描述](../Images/f14d0d884b52f6e08ac04e98a9fc4503.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T15:07:53.650

我发现了一个丑陋的修复，每次`#custom`切换时我都会运行下面的代码：

```
if (Ext.isIE7) {
    Ext.get('custom').setStyle('zoom', 0);
    Ext.get('custom').setStyle('zoom', 1);
} 
```

在找到更好的解决方案之前，我不会回答这个问题。

# jsrender - 在 JsRender 中包含模板

> ID：15434185
> 
> 赞同：0
> 
> 时间：2013-03-15T13:51:21.960
> 
> 标签：jsrender

我正在使用 JsRender 构建我的 HTML 页面，我希望能够实现以下目标。

```
<script id="qtype" type="text/x-jsrender">
   <li class="question-container" data-type="{{:Question.Type}}">
       {{include tmpl="#inner-template"/}}
   </li>
</script> 
```

我想做的是将内部模板包含基于正在渲染的模型中的某些属性。例如，如果我的模型有一个名为“类型”的属性，下面虽然无效的语法，但解释了要求（希望如此）

```
{{include tmpl=:"#" + Question.Type}} 
```

或者，也许，使用“帮助”方法：

```
{{include tmpl=~GetTemplateName(Question.Type)}} 
```

我已经尝试将模板名称添加到模型中，但我无法让它适用于 include 语句：

```
{{include tmpl=templateName/}} 
```

谁能告诉我这是否可能，或者可能有替代建议？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T12:58:04.877

我一直在使用最新的版本，这种方法很好用：

对于内联模板：

```
// given an inline template named 'myTmpl'
{{for myModel.someProperty tmpl="#myTmpl" /}} 
```

对于已编译的模板：

```
// given a compiles template named 'myTmpl'
{{for myModel.someProperty tmpl="myTmpl" /}} 
```

我认为您的代码中缺少的是引号。无论是编译模板还是内联模板，您仍然需要它们。我不确定是否仍然支持“include”关键字，但是使用 {{for /}} 可以正常工作，无论传递给它的模型是否是数组。问题是，jsRender 将您传递给它的*所有内容都*视为一个数组，但如果它只包含一个值，则只会渲染一次。

此外，请确保您正确编译模板。我使用了一个实用函数来预先编译所有这些：

```
function () {
    return $.when(
        $.get(getPath("templateOne")),
        $.get(getPath("templateTwo"))
    )
    .done(function (one, two) {
        $.templates({
            tmplOne: one[0],
            tmplTwo: one[0]
        });
    });
} 
```

这将创建两个名为“tmplOne”和“tmplTwo”的编译模板，您可以在其他模板中使用它们。

然而，需要注意的一点是编译需要时间。如果您在编译之前尝试使用模板，jsRender 将不会知道它并且会有一些*非常*奇怪的行为。因此返回一个 Promise 以确保我在编译之前不使用模板：

```
compileTemplates().done(function() {
    // do my work with compile templates here.
}).fail(function() {  /* handle failure */ }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T15:14:03.847

构建更新 27 似乎解决了我的问题。{{include}} 语句已被修改，因此我现在可以将模板名称定义为模型的一部分，然后使用以下脚本。

```
<script id="qtype" type="text/x-jsrender">
    <li class="question-container" data-type="{{:Question.Type}}">
        {{include tmpl="#templateId" /}}
    </li>
</script> 
```

更完整的讨论可以在[https://github.com/BorisMoore/jsrender/issues/155找到](https://github.com/BorisMoore/jsrender/issues/155)

# javascript - 检查类型的好方法是什么？

> ID：15434191
> 
> 赞同：4
> 
> 时间：2013-03-15T13:51:38.500
> 
> 标签：javascript

诸如骨干之类的库中使用的一种简单方法是：

```
typeof o === type; 
```

ES5 建议使用类似于

```
(Object.prototype.toString.call(o) === '[object ' + type + ']'); 
```

最后 SO 用户分享了：（[getType 上的代码审查](https://codereview.stackexchange.com/questions/23317/improving-istypeobj-and-gettypeobj)）

```
o.constructor === type; 
```

以下是三种根本不同的方式

*   使用类型
*   使用 toString
*   使用构造函数属性

我想用这3个方法来写一个通用的checkType方法。

任何关于如何最好地在逻辑上组合这些或为什么会有不同的方法来解决它的建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T13:55:49.493

这里有一些帮助：http: [//javascriptweblog.wordpress.com/2011/08/08/fixing-the-javascript-typeof-operator/](http://javascriptweblog.wordpress.com/2011/08/08/fixing-the-javascript-typeof-operator/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T21:37:57.943

这是3的一个很好的比较。

[http://jsperf.com/constructor-vs-typeof-vs-tostring](http://jsperf.com/constructor-vs-typeof-vs-tostring)

# cordova - 如何在phonegap中排列html文件？

> ID：15434192
> 
> 赞同：0
> 
> 时间：2013-03-15T13:51:39.533
> 
> 标签：cordova

我刚刚从 iOS/Android 开发人员转到 phonegap。在我的 phonegap 项目中，所有文件都在 www 文件夹中。我在该文件夹下有几个 html 文件与其他文件夹/文件混合在一起，Xcode 按字母顺序排列它们，这使得很难找到我想要编辑的 html 文件。

所以我试图创建一个 html 文件夹。但是，通过这样做，phonegap 将不再考虑我对 html 文件的修改。

关于如何做到这一点的任何想法？

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T14:21:12.517

将 index.html 保存在 www 根文件夹中，并将所有其他文件移动到 HTML 文件夹中。并使用相对链接引用其他 html 文件。这样，PhoneGap 将加载您的 index.html，然后导航到 index.html 中的其他文件将很容易。

# c# - 使用 LINQ 查询现有的 ListView 项

> ID：15434194
> 
> 赞同：6
> 
> 时间：2013-03-15T13:51:45.783
> 
> 标签：c#, linq, listview

我通过这些循环填充的 ListView 导致填充了四列

```
// Create a ResXResourceReader
ResXResourceReader rdr0 = new ResXResourceReader(textPath1.Text + ".resx");
ResXResourceReader rdr1 = new ResXResourceReader(textPath1.Text + ".es.resx");
ResXResourceReader rdr2 = new ResXResourceReader(textPath1.Text + ".fr.resx");

foreach (DictionaryEntry d in rdr0)
{
    TransResource x = new TransResource();
    x.id = d.Key.ToString();
    x.en = d.Value.ToString();
    resources.Add(x.id, x);
}

foreach (DictionaryEntry d in rdr1)
{
    TransResource x = resources[d.Key.ToString()];
    x.fr = d.Value.ToString();
}

foreach (DictionaryEntry d in rdr2)
{
    TransResource x = resources[d.Key.ToString()];
    x.es = d.Value.ToString();
}

foreach (TransResource x in resources.Values)
{
    string[] row = { x.id, x.en, x.fr, x.es };
    var listViewItem = new ListViewItem(row);
    listResx.Items.Add(listViewItem);
} 
```

我想要做的是根据输入的内容查询此 ListView 中的所有结果`textboxQuery`。如果整个列表视图中的任何字段包含来自`textboxQuery`我希望它显示在新列表视图中的字符串（比如说 listviewQueryresult）。我在这方面有很多失败的尝试，但我知道通过 LINQ 是可能的。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-15T13:56:25.383

因为`ListView.Items`implements `IEnumerable`，但没有实现`IEnumerable<T>`你必须`IEnumerable<ListViewItem>`先将它转换为，才能使用 LINQ to Objects 查询它：

```
var results = listResx.Items.Cast<ListViewItem>()
                            .Where(x => YourPredicate(x)); 
```

> 如果整个列表视图中的任何字段包含来自 textboxQuery 的字符串，我希望它显示在新的列表视图中（比如说 listviewQueryresult）

为此，谓词只是：

```
var results = listResx.Items.Cast<ListViewItem>()
                            .Where(x => x.Text.Contains(textboxQuery)); 
```

# ruby - 从列表中选择随机项目而不进行迭代

> ID：15434200
> 
> 赞同：0
> 
> 时间：2013-03-15T13:51:56.613
> 
> 标签：ruby

我在 Rails 中有以下代码

```
@related = []
while @related.compact.size < 3
  @tag = @car.tag_list.sample #pick a tag from the @car's tag_list
  @sametags = Car.tagged_with(@tag) # get all cars with that tag
  @related.push(( @sametags - Array(@car) - @related.compact).sample) #put that car in @related
  @counter = @counter + 1 #increment
  break if @counter == 10 #stop if its taking too long
end 
```

我很清楚这段代码效率很低，但我的红宝石印章还没有准备好......

基本上我需要做的是`@related`随机填充 3 个具有相似标签的汽车模型，它们不会重复。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T13:56:38.333

[Array#sample](http://ruby-doc.org/core-2.0/Array.html#method-i-sample)接受一个数字，样本的大小。所以我认为，您的代码可以简化为：

```
@tag = @car.tag_list.sample
@sametags = Car.tagged_with(@tag)
@related = (@sametags - [@car]).sample(3) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T13:54:50.943

您可以使用随机排序来执行此操作。

```
@related = Car.limit(3).order('rand()').tagged_with('blood red') 
```

更新：没有@car

```
@tag = @car.tag_list.sample
@related = Car.where('id != ?', @car.id).limit(3).order('rand()').tagged_with(@tag) 
```

更新：如果您使用acts_as_taggable_on

```
@related = Car.where('id != ?', @car.id).limit(3).order('rand()')
  .tagged_with(@car.tag_list, any: true) 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-15T13:56:28.840

首先使用 scramble 对数组进行洗牌，然后只选择前三项。

```
[1,2,3,4].scramble => [3,1,2,4] 
```

# openerp - openerp fields.function 不影响值

> ID：15434209
> 
> 赞同：0
> 
> 时间：2013-03-15T13:52:46.517
> 
> 标签：openerp

我有一个函数字段，它没有给出任何错误，但即使它应该设置也没有设置任何值。

代码：

```
class stock_move_custom(osv.osv):
_name = 'stock.move'
_inherit = 'stock.move'

def _penalty(self, cr, uid, ids, field_name, arg, context=None):
    if not ids: return {}
    res = {}
    for id in ids:
        res[id] = 20.0

    for line in self.browse(cr, uid, ids, context=context):
        if line.picking_id:
            if line.picking_id.purchase_id:
                if line.picking_id.purchase_id.penalty_id:
                    res[line.id] = 10.0
    return res     

    _columns = {
            'value_forpenalty': fields.float('Value', digits=(16,2)),
            'actual_penalty': fields.function(_penalty, type='float', digits=(16,2), string='Penalty', store=True, select=True)
            }
stock_move_custom() 
```

注意：penalty_id 是添加到 purchase.order 的自定义子项的 many2one。

Q1。我得到的只是点球0分。20 和 10 都不是。有什么问题吗？如果是因为 ids 是空白的，我该如何解决？

Q2。如何将 value_forpenalty 传递给函数，因为我最终需要它来计算惩罚？因此，当用户在表单中为 value_forpenalty 字段输入值时（并按下计算按钮，或者理想情况下不按下该按钮），该值应该传递给函数进行计算。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T06:12:28.547

我您的代码按照您接受的方式工作，您的代码没有问题。

您可以重新启动服务器并再次检查。

```
for line in self.browse(cr, uid, ids, context=context):
        if line.picking_id and line.picking_id.purchase_id and line.picking_id.purchase_id.penalty_id:
            res[line.id] = 10.0 
```

并传递您的参数 value_forpenalty，您可以从行中获取此值

喜欢

```
 res[line.id] = line.value_forpenalty 
```

希望这对你有帮助

# java - netty 4 如何从服务器发送消息

> ID：15434213
> 
> 赞同：0
> 
> 时间：2013-03-15T13:52:59.040
> 
> 标签：java, netty

我如何从服务器本身发送消息，而不是从 MessageHandlers 发送消息？我知道 InetSocketAddress，我从 MessageHandler 存储它，但我看不到任何直接使用套接字的方法。

例如：

```
public class QuoteOfTheMomentServer {

    private final int port;

    public QuoteOfTheMomentServer(int port) {
        this.port = port;
    }

    Bootstrap b;

    public void run() throws Exception {
        b = new Bootstrap();
        try {
            b.group(new NioEventLoopGroup())
             .channel(NioDatagramChannel.class)
             .option(ChannelOption.SO_BROADCAST, true)
             .handler(new QuoteOfTheMomentServerHandler());

            b.bind(port).sync().channel().closeFuture().await();
        } finally {
            b.shutdown();
        }
    }

    public static void main(String[] args) throws Exception {
        int port;
        if (args.length > 0) {
            port = Integer.parseInt(args[0]);
        } else {
            port = 8080;
        }
        new QuoteOfTheMomentServer(port).run();
    }
} 
```

我该如何添加方法

```
public void sendMessage(ByteBuf msg, InetSocketAddr addr) {
    b.send(msg, addr);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-16T07:15:56.410

只需存储对 Channel 的引用并使用：

```
channel.write(new DatagramPacket(
                Unpooled.copiedBuffer("QOTM?", CharsetUtil.UTF_8),
                new InetSocketAddress(ip, port))); 
```

您可以从任何线程以及处理程序外部调用 channel.write

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-10T08:14:29.787

保存 ChannelHandlerContext，并使用它将数据发送给客户端

# javascript - 无法通过 JavaScript 中的 $post 在 Neo4j 中创建索引

> ID：15434214
> 
> 赞同：1
> 
> 时间：2013-03-15T13:53:00.260
> 
> 标签：javascript, jquery, neo4j

我使用 neo4j REST API、JS 和 JQuery 创建了简单的 Web 应用程序。我可以使用以下方法创建新节点`$post`：

```
$.post("http://localhost:7474/db/data/node",
{
    "name":data[i].name,
    "phone":data[i].phone
},  
function(jsonData) {
    newlyCreated = jsonData.self;
},
'json'); 
```

它工作，新节点被创建并出现在数据库中。

不幸的是，当我尝试使用创建索引时`$post`，这种语法不起作用：

```
$.post("http://localhost:7474/db/data/index/node",{"name":"phone"},function(indexInfo) {
        console.log(indexInfo);
}, 'json'); 
```

当我尝试使用 neo4j http 控制台时：

```
POST http://localhost:7474/db/data/index/node/ {"name": "phone"} 
```

它工作正常索引已创建。

有什么建议为什么`$.post`在这种情况下不能正常工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-10-17T12:21:04.757

禁止通过 JavaScript 直接向 Neo4j 发送请求。可能由于跨源而无法正常工作（请求的资源上不存在“Access-Control-Allow-Origin”标头。因此，不允许访问源“xxyy”）。

通常 Neo4j 在端口 7474 上运行，因此如果您从端口 80（默认 http 端口）发出请求，则不允许。此外，如果您从同一端口发出请求（就像浏览器一样，您还需要添加在 Neo4j 配置中启用的身份验证）

安全风险是，如果您从浏览器直接请求到安全的 Neo4j，在浏览器中保存用户名和密码将使任何人都可以直接访问您的 Neo4j 实例。

所以最好的方法是创建一个代理（使用 Allow Origin 配置），验证请求，如果它是有效的，验证并将其发送到数据库，然后返回浏览器请求所需的数据。:)

# xml - Perl XML::LibXML 文本内容

> ID：15434217
> 
> 赞同：2
> 
> 时间：2013-03-15T13:53:03.350
> 
> 标签：xml, perl, xml-libxml

有什么方法可以从 xml 代码中保留节点的标签？问题的解释可能是这样的：我有一个 xml 输入，我查询输入，我想获得查询项目的 xml 输出。

```
<pets>
  <dog>
    <name>Maggie</name>
    <dob>12 October 2005</dob>
    <price>75</price>
    <owner>Rosie</owner>
  </dog>
</pets> 
```

当我`//pets/dog`在我的 Perl 程序中访问时，输出如下：

```
<?xml version='1.0' standalone='yes'?>
<dog>
    Maggie
    12 October 2005
    75
    Rosie
</dog> 
```

有没有办法给函数`textContent`一些参数来保留标签？这是我的循环代码块，将节点放入哈希中，然后输出：

```
$parser = XML::LibXML->new();
$data = $parser->load_xml(string => $takeninput);
$xml = new XML::LibXML::XPathContext($data);
$i = 0;
for $node ($xml->findnodes('//pets/dog'))
  {
    $name = $node->nodeName;
    $hash{$name}[$i] = $node->textContent;
    $i++;
  } 
```

保留孩子*的标签？*要有这样的输出：

```
<?xml version='1.0' standalone='yes'?>
<dog>
    <name>Maggie</name>
    <dob>12 October 2005</dob>
    <price>75</price>
    <owner>Rosie</owner>
</dog> 
```

谢谢你的回答。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T13:57:39.763

该库正在按照您的要求进行操作 - 它正在返回节点的文本内容。标记不是文本内容，因此它不会提供给您。

我想你想要的是`$node->toString`，它将`dog`节点作为格式化的 XML 返回。

对于漂亮的布局，使用`$node->toString(1)`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T14:02:08.003

使用[XML::XSH2](http://p3rl.org/XML%3a%3aXSH2)：

```
#!/usr/bin/perl
use warnings;
use strict;

use XML::XSH2;

xsh << '__XSH__';
    open 1.xml ;
    ls //pets/dog |> $x ;
__XSH__

print $XML::XSH2::Map::x; 
```

输出：

```
<dog>
    <name>Maggie</name>
    <dob>12 October 2005</dob>
    <price>75</price>
    <owner>Rosie</owner>
  </dog> 
```

# visual-studio-2012 - 如何修复警告 ICE39：在 SummaryInfo 流中设置了管理图像标志

> ID：15434226
> 
> 赞同：1
> 
> 时间：2013-03-15T13:53:28.923
> 
> 标签：visual-studio-2012, wix

我正在 Visual Studios 2012 中使用 Wix 创建安装程序。下面是我的 product.wxs 代码。我收到“警告 ICE39：SummaryInfo 流中设置了'Admin Image'标志。应该只为管理包设置。” 我已将管理员映像从是更改为否并重建，它删除了警告，但我仍然无法在具有本地管理员权限并且也是域管理员的计算机上安装。但是，我可以将它安装在我的机器上，而且我不是域管理员，

我会上传图片，但还没有足够的代表。这是一个图片链接。

[http://i656.photobucket.com/albums/uu290/chrizbahr/warning_zps12f388b2.png](http://i656.photobucket.com/albums/uu290/chrizbahr/warning_zps12f388b2.png)

```
<Wix xmlns="http://schemas.microsoft.com/wix/2006/wi">

<?define ProductName="CHC Pedometer Sync"?>
  <?define ProductVersion="1.0.0"?>
  <?define ProductGUID="{6D234D2C-5F74-42A8-A9DA-14D684B2EAFC}"?>
  <?define ProductUpgradeCode="{DDDD43E0-DB34-4AD6-BF54-F6B12509E84F}"?>
  <?define Manufacturer="CHC Wellness"?>
  <Product Id="$(var.ProductGUID)"
           Name="$(var.ProductName)"
           Language="1033"
           Version="$(var.ProductVersion)"
           Manufacturer="$(var.Manufacturer)"
           UpgradeCode="$(var.ProductUpgradeCode)">
    <Package Id="*"
             Description="CHC Pedometer Sync Installer"
             Keywords="Installer"
             Manufacturer="$(var.Manufacturer)"
             SummaryCodepage="1252"
             InstallerVersion="200"
             Compressed="yes"
             InstallScope="perMachine"
             AdminImage="yes"
             InstallPrivileges="limited" />
    <MajorUpgrade DowngradeErrorMessage="A newer version of [ProductName] is already installed." />
    <MediaTemplate EmbedCab="yes"/>
    <!--DIRECTORY STRUCTURE-->
    <Directory Id="TARGETDIR" Name="SourceDir">
      <!--PROGRAM FILES-->
      <Directory Id="ProgramFilesFolder" Name="PFiles">
        <Directory Id="CHCWellness" Name="CHC Wellness">
          <Directory Id="INSTALLDIR" Name="$(var.ProductName)" />
        </Directory>
      </Directory>
      <!--DESKTOP-->
      <Directory Id="DesktopFolder" Name="Desktop"/>
      <!--START MENU-->
      <Directory Id="ProgramMenuFolder" Name="Programs">
        <Directory Id="ProgramMenuDir" Name="$(var.Manufacturer)" />
      </Directory>
    </Directory>
    <DirectoryRef Id="INSTALLDIR">
      <Component Id="MainExecutable" Guid="{FB74004F-F250-4B3C-B38C-D96D5657A27A}">
        <File Id="File_MainExecutable" Source="..\PedometerSync\bin\Release\PedometerSync.exe" Vital="yes" DiskId="1" KeyPath="yes">
          <Shortcut Id="MainExeShortcutDesktop"
                  Name="$(var.ProductName)"
                  Directory="DesktopFolder"
                  Description="$(var.ProductName)"
                  WorkingDirectory="INSTALLDIR"
                  Advertise="yes"
                  Icon="icon.ico" />
        </File>
      </Component>
      <Component Id="InterfaceExe" Guid="{68C78DE2-BEBB-41D7-B9F6-313BCFC88F68}">
        <File Id="PedometerInterfaceEXE" Source="..\PedometerSync\bin\Release\PedometerInterface.exe" Vital="yes" DiskId="1" KeyPath="yes" />
      </Component>
      <Component Id="EXEConfig" Guid="{8D9F2744-C1E4-45E1-88E7-C3427200767E}">
        <File Id="File_ExeConfigFile" Source="..\PedometerSync\bin\Release\PedometerSync.exe.config" Vital="yes" DiskId="1" KeyPath="yes" />
      </Component>
      <Component Id="Newtonsoft" Guid="{09343B58-A247-4AA9-9A32-A6CB1BD9CC2F}">
        <File Id="file_newtonsoft.json.dll" Source="..\PedometerSync\bin\Release\Newtonsoft.Json.dll" Vital="yes" DiskId="1" KeyPath="yes" />
      </Component>
    </DirectoryRef>
    <!--SHORTCUTS-->
    <DirectoryRef Id="ProgramMenuDir">
      <Component Id="StartMenuShortcut" Guid="{E02282A4-0907-4EC6-A5B7-623E50B4E642}">
        <Shortcut Id="MainExeShortcut"
                  Name="$(var.ProductName)"
                  Description="$(var.ProductName)"
                  Target="[INSTALLDIR]PedometerSync.exe"
                  Icon="icon.ico"/>
        <RemoveFolder Id="RemoveStartMenuShortcutDir" On="uninstall"/>
        <RegistryValue Root="HKCU" Key="Software\$(var.Manufacturer)\$(var.ProductName)" Name="installed" Type="integer" Value="1" KeyPath="yes" />
      </Component>
    </DirectoryRef>
    <!--FEATURES LIST-->
    <Feature Id="Standard" Level="1">
      <ComponentRef Id="MainExecutable"/>
      <ComponentRef Id="InterfaceExe"/>
      <ComponentRef Id="EXEConfig"/>
      <ComponentRef Id="Newtonsoft"/>
      <ComponentRef Id="StartMenuShortcut"/>
    </Feature>
    <!--ADD UI ELEMENTS-->
    <Property Id="WIXUI_INSTALLDIR" Value="INSTALLDIR" />
    <UIRef Id="WixUI_InstallDirCustom" />
    <UIRef Id="WixUI_ErrorProgressText" />
    <!--CUSTOM IMAGES-->
    <WixVariable Id="WixUIBannerBmp" Value="banner.bmp" />
    <WixVariable Id="WixUIDialogBmp" Value="dialog.bmp" />
    <!--ICONS-->
    <Icon Id="icon.ico" SourceFile="icon.ico" />
  </Product>
</Wix> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-15T14:05:28.023

删除管理员属性。该属性不是指安装软件包需要管理员权限，而是指 MSI 是普通安装还是管理安装。

有关详细信息，请参阅帮助主题：

[管理安装 (Windows)](http://msdn.microsoft.com/en-us/library/windows/desktop/aa367541%28v=vs.85%29.aspx)

[Word Count Summary 属性 (Windows)](http://msdn.microsoft.com/en-us/library/windows/desktop/aa372870%28v=vs.85%29.aspx)（注意位 2 和位 3 的定义，它们分别与 AdminImage 和 InstallPrivileges 属性相关）

# php - Laravel - 将应用程序转换为捆绑包 - 如何加载视图

> ID：15434230
> 
> 赞同：0
> 
> 时间：2013-03-15T13:53:43.907
> 
> 标签：php, laravel

我正在使用 Laravel，并且正在努力将我在标准应用程序布局中创建的应用程序（简单博客）转换为捆绑包。

在花了最后半个小时阅读命名空间并处理相关的错误消息之后，我已经加载了我的模型，并且我已经让它与我的单独授权包交谈。所以下一个问题是视图。

最新的错误信息是：

```
View [home] doesn't exist.
Location:
/var/www/lara.dev/laravel/view.php on line 170 
```

我基本上在我的包中重新创建了应用程序结构，其中包含我试图`(bundles/blog/views/home.blade.php)`从我的包控制器加载的视图的视图目录`(bundles/blog/controllers/home.php)`

我以前使用以下行来加载视图：

```
return View::make('home')->with('posts', $posts); 
```

我必须做些什么才能让我的视图从包中正常加载？另外，如果我的问题很明显我在这里遗漏了一些东西，那么请赐教。我对 PHP 中的 OO 很陌生

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T14:07:42.660

您只需使用您的包名称为视图命名。

```
return View::make('bundlename::home')->with('posts', $posts); 
```

同样的方法几乎适用于任何事情。您应该完整阅读[Bundle Docs ，特别是](http://laravel.com/docs/bundles)[Using Bundles](http://laravel.com/docs/bundles#using-bundles)部分。[Bundles & Class Autoloading](http://laravel.com/docs/bundles#bundles-and-class-loading)也可能是您感兴趣的。

# excel - 将数据从多张纸移动到一张纸的宏

> ID：15434234
> 
> 赞同：0
> 
> 时间：2013-03-15T13:53:50.837
> 
> 标签：excel, vba

我有 47 张具有相同数据的工作表。我想将以下单元格从每张纸移动到一张纸，这样我就可以轻松地对 SAS 进行 infile。细胞是：

B4、B5、B8、G13-23、I13-23、J13-23、K13-23、l13-23

谁能帮我做一个宏？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T13:55:30.147

打开开发人员选项卡，打开宏录制，执行一次操作，然后编辑宏以满足您的需要

# internet-explorer - WIndows Phone 8 网站只显示一个空白/白页

> ID：15434236
> 
> 赞同：0
> 
> 时间：2013-03-15T13:53:57.293
> 
> 标签：internet-explorer, windows-phone-7, windows-phone-8

我已经建立了一个完整网站的移动版本，并且在除 Windows Phone 7.5/8 之外的所有设备上都可以正常工作。

但是在 Windows Phone 7.5/8 上（我没有 7.0 手机了，所以我不知道那个版本的 IE 是否有这个问题）它重定向到正确的页面，但它只显示一个空白/白色页面。我曾尝试删除 javascripts 和移动东西，但我真的找不到导致此错误的特殊事物。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T14:35:10.717

如果您使用 JQuery Mobile，这可能是个问题。如果在站点的其余部分是 HTTPS 时，通过 HTTP 而不是 HTTPS 从诸如 Google 之类的站点中提取 JQuery 库，则会发生这种情况。还记得 IE 中的整个“混合内容”吗？

如果您从 HTTPS 和 HTTP 中提取样式表、图像和/或脚本等内容，这可能是个问题。此外...任何 src= 请求（同样，CSS、脚本等）上的证书错误都可以被移动 IE 简单地忽略。

# c++ - 如何在编译或运行时检测错误的迭代器使用

> ID：15434243
> 
> 赞同：4
> 
> 时间：2013-03-15T13:54:20.050
> 
> 标签：c++, iterator

我刚刚在一些遗留代码中发现了对不同容器迭代器之间的 std::distance 的严重误用。类似于包含的代码。现在我担心有人可能在代码的其他部分犯了同样的错误。

有没有办法在编译或运行时检测到这种错误？

```
// bad code to explain the problem
std::vector<int> v1={1};
auto iterv1=v1.begin();
std::vector<int> v2=v1;
int nDist=std::distance(v2.begin(),iterv1); // error distance calculated between 2 containers 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-15T14:04:54.987

所以如果我尝试这个例子并在`g++`我编译`-D_GLIBCXX_DEBUG`：

```
 std::vector<int>
      v1, v2 ;

    std::distance( v1.begin(), v2.end() ) ; 
```

我在运行时看到此错误：

```
error: attempt to compute the different between two iterators from
different sequences. 
```

还有更多输出，但我认为这应该涵盖它。这个先前的线程[涵盖了 Visual Studio 的相同内容](https://stackoverflow.com/a/1290586/1708801)。

# ember.js - 仅为经过身份验证的用户创建受限区域

> ID：15434246
> 
> 赞同：2
> 
> 时间：2013-03-15T13:54:28.323
> 
> 标签：ember.js

我用 Ember.js 和 Rails 制作了一个登录系统。所以我尝试为未经身份验证的用户进行重定向。我不知道我必须在哪里进行重定向（应用程序控制器或应用程序路由？）。这是我的身份验证系统：

```
window.AuthApp = Ember.Object.extend(Ember.Evented).create
authToken: null
currentUserId: null

signIn: (data) ->
    if data == null
        data = {}
    if data['remember'] == true
        cookie = true
    $.ajax 'api/login',
        type: 'POST'
        dataType: 'JSON',
        contentType: 'application/json; charset=utf-8'
        data: JSON.stringify(data)
        error: ->
            alert('Error signIn')
        success: (data) ->
            console.log(data)
            AuthApp.set 'authToken', data['auth_token']
            if cookie == true
                $.cookie 'remember_token', data['auth_token'],
                    expires: 7

AuthApp.Module.RememberMe = Ember.Object.create
recall: ->
    if ($.cookie('remember_token'))
        data = {}
        data['auth_token'] = $.cookie('remember_token')
        AuthApp.signIn(data)
        return true 
```

如您所见，我只是调用 AuthApp.Module.Remember.recall() 来检查用户是否已连接。谢谢你的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-19T18:18:43.310

你应该看看路由器整容。设计目标之一是降低基于身份验证的应用程序的实施难度。

[https://gist.github.com/machty/5723945](https://gist.github.com/machty/5723945)

# jquery - 在 jQuery 插件中返回正确的元素

> ID：15434249
> 
> 赞同：2
> 
> 时间：2013-03-15T13:54:32.850
> 
> 标签：jquery, jquery-plugins

我正在将一个库转换为一个 jQuery 插件，以使其更易于初始化。这个想法是插件的行为取决于它运行的元素的类型。

如果元素是 a`<p>`那么我正确初始化。但是，如果该元素是另一个块元素，我`<p>`会在它前面加上 a。如果元素是内联元素，则需要将其从列表中移除。这工作得很好，数据附加到适当的元素（`<p>`）。对于连锁能力，我想`<p>`每次都返回 , 。

如果我从 开始`$('p').Plugin({...data...})`，它确实会保留`<p>`。但是，如果我以 开始链`$('div).Plugin({...data...})`，`<div>`则返回 。这是必需的，因为插件可能仅适用于特定元素。

这是让我有些困惑的代码：

```
(function($) {   
    var methods = {
        init: function(options) {
        // Maintain chainability
            return this.each(function () {
                var me;
                if($(this).prop('tagName') != 'P')
                {   $(this).append('<p></p>');
                    me = $(this).children('p');
                }
                else me = $(p);
            // The following 2 lines error (I was desperate)
                $(this) = me;
                this = me;
            // The following line does nothing (that I can tell)
                return me;
            });
        },
        ... other methods ...
    };
    $.fn.Plugin = function (method) {
        if (methods[method]) {
            return methods[method].apply(this, Array.prototype.slice.call(arguments, 1));
        } else if (typeof method === 'object' || !method) {
        // Run Init
            return methods.init.apply(this, arguments);
        } else {
            $.error('Method ' + method + ' does not exist on jQuery Plugin');
        }
    };
}
(jQuery)); 
```

我还尝试在 init 函数中重新创建列表，以便它只获取新创建`<p>`的 s。有没有人有一个有效的工作建议来引导我朝着正确的方向前进？

*注意：*我知道上面的代码可以让我更有效率......为了解决这个问题，为了清楚起见，它被分解了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T14:39:45.380

的返回`this.each`始终`this`是不可修改的，在您的情况下是您调用 .Plugin() 的选定元素的列表。在您的情况下，您不想简单地返回被选择的元素列表......而是一个改变的列表。（你是 100% 正确的，你在 .each 循环中的返回没有做任何事情来影响 this.each 本身的返回。）

如果您在`this.each`循环外定义变量以收集新的 dom 元素列表，在循环内**添加**正确的 dom 元素（见注 1），然后在循环外返回新的元素列表，您将看到您想要的结果. 但是，这里有几个陷阱。

注 1：我们使用 this.each 进行插件处理的原因是因为选择器可以返回多个元素。您将需要收集一个新的元素列表，因为只要包含非 p 标记，您基本上将返回一组与所选选择器不同的元素。要考虑的情况是`$('div.myDiv, p.myP').Plugin()`选择具有不同标签类型的多个元素。

主要问题之一是我们经常在我们选择的元素上设置样式，甚至使用 id 来帮助识别插件附加到的 dom 元素。通过更改作为插件根的 dom 元素，可能会出现很多需要解决或至少考虑的 css 或 id 位置问题。

*（我并不是说它不能完成，特别是如果你只是转换你已经在使用的东西而不是构建一个供其他人普遍使用的插件 - 只是它带来了很多棘手的问题。）*

```
(function($) {   
    var methods = {
        init: function(options) {
            var mes;
            this.each(function () {
                var me;
                if($(this).prop('tagName') != 'P')
                {   $(this).append('<p></p>');
                    me = $(this).children('p');
                }
                else me = $(p);
            }
            mes.push(me);
            return mes;
        },
        ... other methods ...
    };
    $.fn.Plugin = function (method) {
        if (methods[method]) {
            return methods[method].apply(this, Array.prototype.slice.call(arguments, 1));
        } else if (typeof method === 'object' || !method) {
        // Run Init
            return methods.init.apply(this, arguments);
        } else {
            $.error('Method ' + method + ' does not exist on jQuery Plugin');
        }
    };
}
(jQuery)); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T16:47:12.353

正如[purgatory101](https://stackoverflow.com/users/1310765/purgatory101)提到的，这里确实有两个问题。首先是要了解它`$().each()`有自己的返回值。二是可链性。Overcoming`$().each()`的返回值相当简单。只需要提供一个不同的`$().each()`或 jQuery 对象数组。可链接性取决于您/您的用户需要/期望什么。

**jQuery 和可链接性**

由于`$().each()`经常使用的性质，大多数人认为可链接性是指返回的原始 jQuery 对象的可链接性。但是，在 jQuery 核心中有几种情况，链可能由不同的元素继续。这一切都归结为最有可能使用您的插件。以下是 jQuery 使用的两个最常见的链：

**示例 1：面向结果的链接 (ROL)**

[.add()](http://api.jquery.com/add/)允许链从结果继续，而不是从原点继续。假设是用户想要修改他们新添加的元素。更常见的例子是[.parent()](http://api.jquery.com/parent/)和.children( [)](http://api.jquery.com/children/)，尽管这些是不言自明的，并且自然期望人们想要使用适当命名的元素。

**示例 2：面向源的链接 (OOL)**

[.append()](http://api.jquery.com/append/)返回原始对象。这是直接对应的`.add()`，因为它完成了类似的目的，但返回了不同的值。这是大多数数据、样式和元素更改方法所使用的。

**OOL 解决方案**

由于插件通常有许多方法，因此能够链接这些方法非常重要。在 OOL 中，解决方案是提出一个程序，该程序`<p>`每次都会一致地产生一组 child。这样做是这样的：

```
(function($) { 
// Search function
    var findP = function(obj) {
        // ... Search function for your <p> in THIS object
        return p;
    };
    var methods = {
        init: function(options) {
        // Maintain chainability
            return this.each(function () {
                var me;
                if($(this).prop('tagName') != 'P')
                {   $(this).append('<p></p>');
                    me = $(this).children('p');
                }
                else me = $(p);

                // ... other functionality...
            });
        },
        other1: function() {
            var searchMe = findP;
            return this.each(function() {
                var me = searchMe($(this));
            });
        }
    };
    $.fn.Plugin = function (method) {
        ... Route to method ...
    };
}
(jQuery)); 
```

这样做的问题是源对象可能在方法调用之间发生了变化，因此必须考虑它们可能不存在的可能性。这需要更多的处理器密集型，但可能更安全并符合预期的行为。

**ROL 解决方案**

仅当要立即对结果采取行动时，才应使用 ROL。这与 jQuery 的`.add`,`.children`和`.parent`. 有几种方法可以做到这一点。这里的问题是，虽然这可以通过多种方式完成，但purgatory101 的推送解决方案是最安全的。必须提到它，因为使用不同的 $() 列表的快捷方式可能很有吸引力，但有抓取您不希望对其采取行动的元素的危险。

```
 var methods = {
        init: function(options) {
        // Option 1) Build new list
            return newlist.each(function () {
                var me;
                if($(this).prop('tagName') != 'P')
                {   $(this).append('<p></p>');
                    me = $(this).children('p');
                }
                else me = $(p);

                // ... other functionality...
            });
        },
        // ... other methods ...
    };
    $.fn.Plugin = function (method) {
        if (methods[method]) {
            return methods[method].apply(this, Array.prototype.slice.call(arguments, 1));
        } else if (typeof method === 'object' || !method) {
        // ... OR Option 2) build new list ...
            return methods.init.apply(newlist, arguments);
        } else {
            $.error('Method ' + method + ' does not exist on jQuery Plugin');
        }            
    }; 
```

应该注意的是，我不确定这两个选项之间的区别是否存在。

# javascript - jQuery插件Tablesorter错误地对日期进行排序

> ID：15434250
> 
> 赞同：2
> 
> 时间：2013-03-15T13:54:35.517
> 
> 标签：javascript, jquery, html, jquery-plugins, tablesorter

我正在尝试使用 jQuery 插件 Tablesorter 对日期字段进行排序。现在奇怪的是排序似乎部分起作用，它确实重新排列了结果显示的顺序，这表明至少脚本已初始化。

![问题示例](../Images/ebc752960d9c5df85b01d74c3ea4c572.png)

现在我不明白为什么会这样，我的 HTML 看起来像这样：

```
<link href="/themes/blue/Style.css" rel="stylesheet" type="text/css" />
<script src="/Scripts/jquery-ui-1.8.20.js" type="text/javascript"></script>
<script src="/Scripts/jquery.tablesorter.js" type="text/javascript"></script>
<script>
$(document).ready(function ()
{ 
    $("#repairtable").tablesorter(
{ 
    sortList: [[1, 0]], 
    dateFormat : "ddmmyyyy",
    headers: { 1:{ sorter: "shortDate", dateFormat: "ddmmyyyy"} }
});
} 
);
</script>
<table id="repairtable" class="tablesorter">
<thead>
<tr>
<th>ID</th>
    <th>Date In</th>
    <th>Customer</th>
</tr>
</thead>
<tbody>
<tr>
   <td>48</td>
   <td>11/03/2013</td>
   <td>Rainhem Launderette</td>
</tr>
<tr>
   <td>13</td>
   <td>10/01/2013</td>
   <td>IESA (Gunstones)</td>
</tr>
<tr>
   <td>14</td>
   <td>10/01/2013</td>
   <td>GVF</td>
</tr>
<tr>
   <td>41</td>
   <td>08/03/2013</td>
   <td>Triumph</td>
</tr>
<tr>
   <td>42</td>
   <td>08/03/2013</td>
   <td>Triumph</td>
</tr>
<tr>
   <td>43</td>
   <td>08/03/2013</td>
   <td>Triumph</td>
</tr>   
<tr>
   <td>40</td>
   <td>07/03/2013</td>
   <td>RAG Collections Ltd</td>
</tr>
<tr>
   <td>38</td>
   <td>06/03/2013</td>
   <td>WM Sinclair</td>
</tr>
<tr>
   <td>39</td>
   <td>06/03/2013</td>
   <td>WM Sinclair</td>
</tr>
<tr>
   <td>22</td>
   <td>05/03/2013</td>
   <td>IESA Weetabix B'Lat</td>
</tr>
</tbody>
</table> 
```

单击相应的列标题会对存储在单元格中的数据的顺序进行排序，但它对日期的排序不正确。我试图按天/月/年订购它们，但似乎没有这样做。表格中的数据实际上比我在这里显示的要多，一个日期字段是 25/02/2013，它应该高于 10/01/2013，这是我提供的屏幕截图中的第二行。

我对网络开发相对较新，任何指针将不胜感激。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-15T14:27:26.603

美国有一个奇怪的日期约定，其中日期往往写成月/日/年，所以它像这样对它们进行排序。

编辑：tablesorter 中已经存在该功能。采用：

```
$("#tableName").tablesorter({dateFormat: "uk"}); 
```

从[关于tablesorter的另一个问题。](https://stackoverflow.com/questions/1707840/date-sorting-problem-with-jquery-tablesorter)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-02T10:48:34.857

我所做的是：在插件中，大约第 970 行，在`ts.addParser`函数中，我将以下代码更改为`else if`日期格式：

```
 if (c.dateFormat == "us") {
            // reformat the string in ISO format
            s = s.replace(/(\d{1,2})[\/\-](\d{1,2})[\/\-](\d{4})/, "$3/$1/$2");
        } else if (c.dateFormat == "uk") {
            // reformat the string in ISO format
            s = s.replace(/(\d{1,2})[\/\-](\d{1,2})[\/\-](\d{4})/, "$3/$2/$1");
        } else if (c.dateFormat == "dd/mm/yy" || c.dateFormat == "dd-mm-yy") {
            s = s.replace(/(\d{1,2})[\/\-](\d{1,2})[\/\-](\d{2})/, "$1/$2/$3");
            // I added the lines below for the format with full year format,
            // Note that I inverted the day and month in the final format so
            // when the string is converted to date, it converts it right
        } else if (c.dateFormat == "dd/mm/yyyy" || c.dateFormat == "dd-mm-yyyy"){
            s = s.replace(/(\d{1,2})[\/\-](\d{1,2})[\/\-](\d{4})/, "$2/$1/$3");
        } 
```

# perl - Perl遍历目录中的文本文件，根据文件名定位文件并打印内容

> ID：15434256
> 
> 赞同：-3
> 
> 时间：2013-03-15T13:54:56.203
> 
> 标签：perl

如何遍历目录中的文件，根据文件名定位文件并打印文件内容？

请看下面的代码： 目录中的文件：

```
1234.txt
345.txt
234.txt 
```

代码：

```
opendir (DIR, "LOCATION")|| die "cant open directory\n";

my @DATA = grep {(!/^\./)} readdir (DIR);
while ( my $file = shift @DATA) {
    open FILE, "LOCATION";
    while (FILE){
        if ($file eq "235") {
            print $_;
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-03-15T14:02:00.477

这应该这样做（未经测试）：

```
opendir( DIR, "/path/to/dir" );
while ( my $entry = readdir( DIR ) ) {
    if ( $entry =~ /^$filenameImLookingFor$/ ) {
        open( FILE, "$entry/$filenameImLookingFor" );
        my @lines = <FILE>;
        close( FILE );
        print( join( '', @lines );
    }
}
closedir( DIR ); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-15T14:00:48.897

您问题中的代码：

```
opendir (DIR, "LOCATION")|| die "cant open directory\n";
my @DATA = grep {(!/^\./)} readdir (DIR);
while ( my $file = shift @DATA) {
    open FILE, "LOCATION";
    while (FILE){
        if ($file eq "235") {
            print $_;
        }
    }
} 
```

会这样做：

首先，它会方便地找到目录“LOCATION”中不以句点开头的所有文件。然后它将在每个文件名上进行一个相当奇怪的循环。这个循环的正常版本是：

```
for my $file (@DATA) 
```

然后它将尝试再次打开目录“LOCATION”。这可能会失败，因为“LOCATION”是一个目录。由于您不使用 来检查返回值`die`，因此该错误将保持沉默。

你可能想要的是使用

```
if ($file eq "235.txt") {
    open my $fh, "<", $file or die $!;
    print <$fh>;
} 
```

这部分：

```
while (FILE) 
```

实际上不是检查 的返回值`readline()`，而是检查文件句柄是否返回真值。据我所知，即使`open`失败，它也会返回一个真值。这当然意味着循环将无限期地运行。你的意思可能是

```
while (<FILE>) 
```

但是，如前所述，这只会导致错误“readline() on unopened file handle FILE”，因为该`open`语句无法打开目录。

你的支票

```
if ($file eq "235") 
```

永远不会是真的，因为你说你的文件名有`.txt`扩展名。你可能会这样做

```
if ($file eq "235.txt") 
```

哪个应该工作。

如果你想聪明一点，你可以将你的检查直接包含在 grep 中：

```
my @files = grep { $_ eq "235.txt" } readdir DIR; 
```

而且由于 perl 可以使用`<>`菱形运算符来打印数组中列出的文件`@ARGV`，你甚至可以这样做

```
@ARGV = grep { $_ eq "235.txt" } @ARGV;
print <>; 
```

假设您使用以下命令调用脚本：

```
perl script.pl dir/*.txt 
```

当然，这只是做的长版本：

```
perl -pe0 235.txt 
```

哪个是长版

```
cat 235.txt 
```

所以，我觉得你正在尝试做一些你的代码所暗示的事情。

# image-processing - 使用 CUDA 计算图像梯度时出现条纹

> ID：15434257
> 
> 赞同：0
> 
> 时间：2013-03-15T13:55:04.297
> 
> 标签：image-processing, cuda, artifacts

我正在为图像去噪编写代码，并在处理后的图像中遇到了一个奇怪的条纹问题。基本上，当我计算图像的 X-gradient 时，水平条纹出现（或 Y 方向垂直）[Lena X gradient](https://dl.dropbox.com/u/8910265/Lena_Grad.png)。整个算法工作正常，看起来我得到了正确的答案（我正在与 C 中的程序进行比较），除了那些恼人的条纹[Lena 结果](https://dl.dropbox.com/u/8910265/Lena_Stripes.png)。

条纹之间的距离随着块大小的不同而变化。每次运行程序时，我的条纹位置也不同！这是程序中与梯度计算相关的部分。我有一种感觉，我在做一些非常愚蠢的事情:) 谢谢！

```
 #define BLKXSIZE 16
 #define BLKYSIZE 16
 #define idivup(a, b) ( ((a)%(b) != 0) ? (a)/(b)+1 : (a)/(b) )
 void Diff4th_GPU(float* A, float* B, int N, int M, int Z, float sigma, int iter, float tau, int                           type)
 {
    float *Ad; 

dim3 dimBlock(BLKXSIZE,BLKYSIZE);
dim3 dimGrid(idivup(N,BLKXSIZE), idivup(M,BLKYSIZE));

cudaMalloc((void**)&Ad,N*M*sizeof(float));        

cudaMemcpy(Ad,A,N*M*sizeof(float),cudaMemcpyHostToDevice); 

cudaCheckErrors("cc1");
int n = 1;
while (n <= iter) {
    Diff4th2D<<<dimGrid,dimBlock>>>(Ad, N, M, sigma, iter, tau, type);
    n++;
   cudaDeviceSynchronize();
    cudaCheckErrors("kernel");}

cudaMemcpy(B,Ad,N*M*sizeof(float),cudaMemcpyDeviceToHost);
cudaCheckErrors("cc2");
cudaFree(Ad);
 } 

  __global__ void Diff4th2D(float* A, int N, int M, float sigma, int iter, float tau, int type)
 {

float gradX, gradX_sq, gradY, gradY_sq, gradXX, gradYY, gradXY, sq_sum, xy_2, Lam,    V_norm, V_orth, c, c_sq, lam_t;

int i = blockIdx.x*blockDim.x + threadIdx.x;
int j = blockIdx.y*blockDim.y + threadIdx.y;

 int index = j + i*N;

if ((i < N) && (j < M))
  {
    float gradX = 0, gradY = 0, gradXX = 0, gradYY = 0,  gradXY = 0;

    if ((i>1) && (i<N)) {
        if ((j>1) && (j<M)){
    int indexN = (j)+(i-1)*(N);
    if (indexN > ((N*M)-1)) indexN = (N*M)-1;
    if (indexN < 0) indexN = 0;
    int indexS = (j)+(i+1)*(N);
    if (indexS > ((N*M)-1)) indexS = (N*M)-1;
    if (indexS < 0) indexS = 0;
    int indexW = (j-1)+(i)*(N);
    if (indexW > ((N*M)-1)) indexW = (N*M)-1;
    if (indexW < 0) indexW = 0;
    int indexE = (j+1)+(i)*(N);        
    if (indexE > ((N*M)-1)) indexE = (N*M)-1;
    if (indexE < 0) indexE = 0;

   gradX = 0.5*(A[indexN]-A[indexS]);
   A[index] = gradX;
  }
}
}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T15:28:44.260

您的内核中有一个竞争条件，因为 A 的元素在使用之前可能会或可能不会被覆盖。

使用不同的数组进行输入和输出。

# sql - 在 SQL 2012 中调试插入和时态表

> ID：15434258
> 
> 赞同：0
> 
> 时间：2013-03-15T13:55:05.820
> 
> 标签：sql, sql-server, tsql, sql-server-2012, visual-studio-debugging

我正在使用 SQL Server 2012，并且正在调试一个存储过程，该过程执行一些`INSERT INTO #temporal table SELECT`.

有什么方法可以查看命令中选择的数据（插入的子查询？）有什么方法可以查看插入的数据和/或插入进行更改的临时表？

不管是总行数，不是一一

**更新**：

AT 合规性和公司政策的要求要求可以在测试过程中进行任何修改，并且很可能这将由另一个团队管理。有什么方法可以避免对脚本进行任何更改？

主要思想是 AT 用户在他们的工作台上检查输出，复制并粘贴它们，而不对环境或产品进行任何更改。

谢谢和亲切的问候。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T13:58:14.143

你有什么理由不能这样做：`SELECT * FROM #temporal`？（并在 SQL Server Management Studio 中对其进行调试，并传入您的应用程序传入的相同参数）。

这是一种快速而肮脏的方法，但是您可能希望以这种方式而不是另一个（更清洁/更好）的答案的一个原因是，您可以在这里获得更多控制权。而且，如果您在临时表中有多个插入的情况（希望您没有），您只需执行一次选择即可一次查看所有插入的行。

不过，我仍然可能会以另一种方式来做（现在我知道了）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-15T14:00:53.300

如果我正确理解了您的问题，请查看该[**`OUTPUT`**](http://msdn.microsoft.com/en-us/library/ms177564.aspx)子句：

> 从受 INSERT、UPDATE、DELETE 或 MERGE 语句影响的每一行返回信息或表达式。这些结果可以返回到处理应用程序，以用于诸如确认消息、归档和其他此类应用程序要求之类的事情。

* * *

例如：

```
INSERT INTO #temporaltable 
OUTPUT inserted.*
SELECT *
FROM ... 
```

将为您提供`INSERT`插入到`temporal`表中的语句中的所有行，这些行是从另一个表中选择的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-15T14:22:56.083

我知道如果不更改脚本就无法做到这一点。但是，对于未来，您永远不应该在没有调试参数的情况下编写复杂的存储过程或脚本，这样您就可以进行所需的数据测试。将其设置为默认值为 0 的最后一个参数，您甚至不必更改当前调用 proc 的代码。

然后，您可以在要检查中间结果的任何地方添加如下语句。此外，在调试模式下，您可能总是回滚任何事务，以便错误不会影响数据。

```
IF @debug = 1
BEGIN
   SELECT * FROM #temp
END 
```

# c++ - 使用 Boost::Asio 套接字读取 500 毫秒

> ID：15434259
> 
> 赞同：0
> 
> 时间：2013-03-15T13:55:15.543
> 
> 标签：c++, linux, sockets, boost, boost-asio

我在 Linux 平台上使用阻塞 BOOST ASIO 套接字。在一些 read() 操作中，我看到了 500+ 毫秒的巨大延迟。（通常延迟很好，但如此巨大的延迟之一是不可接受的）

我已经使用该选项禁用了 Nagle 算法

```
_socket->set_option( tcp::no_delay( true) ); 
```

我尝试在互联网上搜索，似乎还有其他东西，如延迟确认和 PUSH 标志，可以确保这种延迟消失。

我正在使用 Linux，PUSH 标志设置可能在 Linux 中不可用。不确定 BOOST 上的延迟确认设置。（我应该使用从 boost 套接字中提取的本机套接字描述符吗？）

结束这个问题，延迟来自接收方。客户端和服务器之间实现的底层协议是这样的，接收者不会给发送者一个标志来发送更多的数据包。在 TCP 级别上什么都没有。应用程序级别的实现很糟糕。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-03T03:54:21.627

延迟来自接收方。客户端和服务器之间实现的底层协议是这样的，接收者不会给发送者一个标志来发送更多的数据包。在 TCP 级别上什么都没有。应用程序级别的实现很糟糕。结束这个问题。

# java - Java 聊天应用程序 - 多种字体、插入表情符号和表格的问题

> ID：15434260
> 
> 赞同：1
> 
> 时间：2013-03-15T13:55:16.153
> 
> 标签：java, swing, jtextpane, htmleditorkit

我正在制作一个 java 聊天应用程序。我已经做了基础知识，并且工作正常。现在我想添加更改字体和插入表情符号的功能。我还想在每条消息旁边添加一个小时间戳。

对于时间戳，很明显我们需要使用表格进行良好的对齐。但是找不到一个简单的解决方案来拥有它们。google了一下之后，

*   我了解到它可以使用 HTML 来实现。所以我尝试了 HTML Editor Kit，效果很好。表情符号、字体和时间已插入。
    *   但是，我还需要将该聊天对话保存到文件中（用于聊天历史记录）。我知道这一切背后都有一份文件。我尝试使用它的方法来保存/加载，但遇到了一些问题。代码如下。
    *   此外，字体大小是一个问题，因为它的范围是 1-7 并且我希望拥有像 MS Word 中的正常范围。
    *   最后，我的 HTML 知识非常基础，现在 HTML 与 CCS 一起使用，我对此一无所知。大多数网站不鼓励使用 HTML 标签，因为最新版本甚至不支持它们。这会给我的应用程序带来问题吗？如果是这样，我想要另一种方法来实现上述目标 - 即使这是一个简单的大学项目，也不想使用已弃用的东西。

代码：我创建了这些通用变量：

```
HTMLEditorKit kit = new HTMLEditorKit();
HTMLDocument HTMLdoc = new HTMLDocument();
jTextPane1.setEditorKit(kit);
jTextPane1.setDocument(HTMLdoc); 
```

在 JButton 中，我有以下代码来插入文本/聊天：

```
kit.insertHTML(HTMLdoc, HTMLdoc.getLength(), "<tr>"
+ "<td width=\"50\" valign=\"top\">NAME:</td>"
+ "<td width=\"250\"><font size=\"3\" face=\"Monospaced\">" + addSmiles(JOptionPane.showInputDialog(null)) + "</font></td>"
+ "<td width=\"100\" valign=\"top\"><font size=\"1\">"
+ new SimpleDateFormat("hh:mm a").format(Calendar.getInstance().getTime()).toString() + "</font></td>"
+ "</tr>", 0, 0, null); 
```

addSmiles 方法只是遍历每个单词，并用 img 标签替换一个 ':)'。

为了保存/重新加载对话，我使用了这个基本代码：

```
kit.read(new FileReader("asd.htm"), HTMLdoc, 0);
kit.write(new FileWriter("asd.htm"), HTMLdoc, 0, HTMLdoc.getLength()); 
```

它写得很好，但读取会产生错误。

`java.lang.RuntimeException: Must insert new content into body element`

感觉是我用错了insertHTML方法。谁能给我一个很好的链接来显示它的用法？尤其是最后三个参数（pop & pushDepth、insertTag）的例子。Oracle 文档，请不要让我满意地解释它。：/

*   我使用了带有 SimpleAttributeSet 的标准 StyledDocuemnt 来支持多种字体。我使用了 RTFEditorKit 并成功保存/加载了聊天。但无法插入表情符号或时间戳表。[我确实在这里](http://java-sl.com/JEditorPaneTables.html)遇到了一个链接。它尝试将表格绘制到 JTextPane 中。发现很难理解，但如果你们推荐它，那么我会认真研究它。

我希望我能体面地解释我的问题，而不是太冗长！:D 期待您的回答。

**- - - - -编辑 ： - - - - -**

我稍微改变了我的代码：

初始化：

```
HTMLEditorKit kit = new HTMLEditorKit();
jTextPane1.setEditorKit(kit);
HTMLDocument HTMLdoc = (HTMLDocument) jTextPane1.getDocument();
HTMLdoc.putProperty("IgnoreCharsetDirective", true); 
```

我将初始行插入到文档中，并带有适当的 try-catch：

```
kit.insertHTML(HTMLdoc, 0, "<html><head><meta http-equiv=\"content-type\" content=\"text/html; charset=UTF-8\">", 0, 0, null);
kit.insertHTML(HTMLdoc, HTMLdoc.getLength(), "<table id=\"TBL\"></table>", 0, 0, null); 
```

随便聊聊，我用的和之前一样的HTML String，只是改了用来插入的方法：

```
HTMLdoc.insertBeforeEnd(HTMLdoc.getElement("TBL"), "<tr>"
+ "<td width=\"50\" valign=\"top\">NAME:</td>"
+ "<td width=\"250\"><font size=\"3\" face=\"Monospaced\">" + addSmiles(JOptionPane.showInputDialog(null)) + "</font></td>"
+ "<td width=\"100\" valign=\"top\">" + new SimpleDateFormat("hh:mm a").format(Calendar.getInstance().getTime()).toString() + "</td>"
+ "</tr>"); 
```

最后，保存聊天：

```
OutputStreamWriter out = new OutputStreamWriter(new FileOutputStream("asd"), "UTF-8");
kit.write(out, HTMLdoc, 0, HTMLdoc.getLength());
out.close(); 
```

到此为止，一切都很顺利。当我打开文件“asd”时，它会正确显示 HTML。我什至可以在浏览器中打开它并正确查看数据。

要检索数据并将其重新插入 JTextPane/Document：

```
InputStreamReader in = new InputStreamReader(new FileInputStream("asd"), "UTF-8");
kit.read(in, HTMLdoc, 0);
in.close(); 
```

在这种情况下，我收到一个错误：

```
Exception in thread "AWT-EventQueue-0" java.lang.RuntimeException: Must insert new content into body element-
at javax.swing.text.html.HTMLDocument$HTMLReader.generateEndsSpecsForMidInsert(HTMLDocument.java:2353)
at javax.swing.text.html.HTMLDocument$HTMLReader.<init>(HTMLDocument.java:2300)
at javax.swing.text.html.HTMLDocument$HTMLReader.<init>(HTMLDocument.java:2174)
at javax.swing.text.html.HTMLDocument$HTMLReader.<init>(HTMLDocument.java:2169)
at javax.swing.text.html.HTMLDocument.getReader(HTMLDocument.java:326)
at javax.swing.text.html.HTMLEditorKit.read(HTMLEditorKit.java:260)
at ChatGUI.NewJFrame.jBtnRWActionPerformed(NewJFrame.java:157) 
```

第 157 行指向 kit.read 语句。谁能告诉我我在这里做错了什么？

**再次编辑------------------------**

我意识到我的错误:)。必须在阅读之前清除文档： `HTMLdoc.remove(0, HTMLdoc.getLength());` 现在它可以工作了！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T14:16:29.303

在这里阅读 Javadoc 非常有帮助。

最好将表格元素放在某处。然后

```
// Assuming the table has attribute id="TBL":
Element tableElement = htmlDoc.getElement("TBL");
htmlDoc.insertBeforeEnd(tableElement, "<tr>...</tr>"); 
```

我确实建议使用可以缩短 HTML 的样式表。也许就像`<style type="text/css">`在 HTML 中一样（用于存储）。

笑脸也可以用图像来完成；作为*alt*属性的“:)”。

Best use Unicode, UTF-8, not the current operating system encoding.

```
new InputStreamReader(new FileInputStream(file), "UTF-8")
new OutputStreamWriter(new FileOutputStream(file), "UTF-8") 
```

With an encoding specified in the file:

```
<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"> 
```

# angularjs - AngularJS 在指令模板中评估 $rootScope 变量

> ID：15434264
> 
> 赞同：12
> 
> 时间：2013-03-15T13:55:32.193
> 
> 标签：angularjs, angularjs-directive, angularjs-scope

我有一个创建输入字段的指令。我需要将此输入字段的 ng-model 属性设置为 $rootScope 变量的值。这背后的原因是我希望输入字段在布局中，并根据加载的页面绑定到不同的模型。我以为我会在每个控制器中设置这个全局变量并在指令中访问它。

ATM 变量是硬编码的

```
App.run(function($rootScope){
    $rootScope.mymodel = 'search.name';
}) 
```

和指令

```
Directives.directive('inputFilter', function(){
    return{
        restrict: 'E',
        replace:true,
        controller: function($scope, $rootScope){
            console.log($scope.mymodel);
            console.log($rootScope.mymodel)

        },
        template: '<input class="filter" type="text" ng-model="mymodel" placeholder="Nach filtern">'
    }

}); 
```

它被渲染为

```
<input class="filter ng-pristine ng-valid" type="text" ng-model="mymodel" placeholder="Filter"> 
```

输入字段中的文本是 mymodel 变量的值。console.log 显示

```
search.name
search.name 
```

任何人都可以对这个问题有所了解吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-15T14:38:17.820

我想你想要的是

```
template: '<input class="filter" type="text" ng-model="' 
  + $rootScope.mymodel + '" placeholder="Nach filtern">' 
```

[小提琴](http://jsfiddle.net/mrajcok/ZavXw/)。

请注意，您将需要注入`$rootScope`您的指令：

```
Directives.directive('inputFilter', function($rootScope) { 
```

# android - 带有json响应android错误的Https post请求

> ID：15434269
> 
> 赞同：0
> 
> 时间：2013-03-15T13:55:48.757
> 
> 标签：android, rest, http-post

我正在连接到 Restful Web Service 并获得 JSON 响应。

我能够发送请求并处理 JSON 对象中的响应，但问题是我收到一个错误：

```
Invalid api_key(is a parameter that I send,but I am sure is right). 
```

您能否帮助我了解我的代码或 WEB 是否有问题？

```
HttpClient httpClient = new DefaultHttpClient();
httpClient.getConnectionManager().getSchemeRegistry().register(new Scheme("SSLSocketFactory", SSLSocketFactory.getSocketFactory(), 443));
HttpPost request = new HttpPost();
request.setHeader("Content-type", "application/json, charset=utf-8");
request.setHeader("Accept", "application/json");
URI targetUri = new URI(TARGET_URL);
request.setURI(targetUri);
List<NameValuePair> postParameters = new ArrayList<NameValuePair>();
postParameters.add(new BasicNameValuePair("api_key", "api_key"));
postParameters.add(new BasicNameValuePair("user[email]", email));
postParameters.add(new BasicNameValuePair("user[password]",pwd));

Log.i("","EMAIL REQUEST: "+email.toString());
Log.i("","PWD REQUEST: "+pwd.toString());
HttpEntity postEntity = new UrlEncodedFormEntity(postParameters,"UTF-8");
request.setEntity(postEntity);
Log.i("","Request header "+request.getRequestLine());
Log.i("","Request : " +EntityUtils.toString(request.getEntity()));

httpClient.execute(request, myResponseHandler); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T14:02:48.387

似乎您正在处理的服务需要 API KEY 中的 ACTUAL 值： `postParameters.add(new BasicNameValuePair("api_key", "apy_key"));`

将第二个操作数替换为您提供的 APIkey。

# graph-algorithm - 有没有办法通过使用类似随机游走的算法来近似拉普拉斯矩阵特征值

> ID：15434271
> 
> 赞同：1
> 
> 时间：2013-03-15T13:55:52.707
> 
> 标签：graph-algorithm

在我看来，许多高级图分析算法都是基于谱图分析，更具体地依赖于拉普拉斯矩阵属性。

我知道有一些基于随机游走类型算法的聚类替代方法，它们不使用拉普拉斯矩阵分解。

我很好奇是否有任何东西可以进一步确定拉普拉斯矩阵特征值（尤其是第二个），而不使用光谱方法，但更像是在图表上徘徊。

# javascript - 如何在 Ext.net 中使用 JavaScript 获取 UserControl 中控件的元素 ID

> ID：15434275
> 
> 赞同：1
> 
> 时间：2013-03-15T13:56:01.227
> 
> 标签：javascript, asp.net, ext.net

海，

我正在使用 JavaScript 函数编写基于 DateField 值的年龄计算，并尝试将值填充到另一个数字文本框中。使用以下代码。

```
<script>

        function getAge(event, toolEl, panel, tc) {
            debugger;
            var today = new Date();
            var birthDate = new Date(event.getValue());
            var age = today.getFullYear() - birthDate.getFullYear();
            var m = today.getMonth() - birthDate.getMonth();
            if (m < 0 || (m === 0 && today.getDate() < birthDate.getDate())) {
                age--;
            }
            if (event.name == 'dtMotherDOB') {
                Ext.getCmp('txtMotherAge').setValue(age);
            }
            else
                Ext.getCmp('txtFatherAge').setValue(age);
            return age;
        }

    </script>

 <ext:DateField ID="dtFatherDOB" runat="server"  FieldLabel="Father DOB"  
                                        Vtype="daterange" EndDateField="dtDOB" EnableKeyEvents="true">
         <Listeners>
                 <Select Fn="getAge"/>
        </Listeners>
  </ext:DateField>

  <ext:NumberField ID="txtFatherAge" runat="server" FieldLabel="Father Age"                       Width="300"  MinValue="20">

    </ext:NumberField> 
```

在上面的代码中，选择`DataField`值后，我正在填充`txtMotherAge`值`textBox`。

使用上面的代码。 `Ext.getCmp('txtFatherAge').setValue(age);`用于从表单中获取元素并设置年龄的值`textbox`。

上面的代码适用于简单的形式。

但是当我在 UserControl 中使用此代码并以另一种形式使用 usercontrol 时。 `Ext.getCmp('txtFatherAge').setValue(age)`显示错误和`Ext.getCmp('txtFatherAge')`值变为`'undefined'`.

上面的代码有什么问题。如何在 ext.net 控件中获取 usercontrol 中的元素。

请在这方面帮助我。

谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-15T14:28:28.313

试试这个：

```
Ext.getCmp('<%=UserControl1.ClientID%>' + '_' + 'txtFatherAge').setValue(age) 
```

或者，

放`ClientIDMode="Static"`

```
<ext:NumberField ID="txtFatherAge" ClientIDMode="Static" runat="server"    
 FieldLabel="Father Age" Width="300"  MinValue="20"></ext:NumberField> 
```

# python - 实现两个构造函数的最pythonic方式

> ID：15434279
> 
> 赞同：2
> 
> 时间：2013-03-15T13:56:13.617
> 
> 标签：python, polymorphism

请原谅 Python 新手在风格上的无能。

我有一个类，它采用一个参数来建立初始数据。初始数据有两种进入方式：字符串列表，或带有字符串键和整数值的字典。

现在我只实现了一个版本的构造函数，一个以字典为参数的版本，以 {} 作为默认值。列表参数init作为方法实现，即

```
myClass = MyClass()
myClass.initList(listVar) 
```

我当然可以忍受这个，但这肯定不是完美的。所以，我决定在这里寻求一些 Python 的智慧：应该如何实现这样的多态构造函数？如果这是字典，我是否应该尝试读取 initData.keys() 以嗅探失败？或者也许嗅探参数类型以实现糟糕的多态性，而设计上不欢迎它被认为是非pythonic？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-15T15:40:14.737

在理想的世界中，您会编写一个构造函数，它可以采用a`list`或`dict`不知道区别（即duck 类型）。当然，这不太现实，因为它们是完全不同的鸭子。

可以理解的是，您对检查实际实例类型的想法也有一点心痛，因为它与鸭子类型的想法背道而驰。但是，在 python 2.6`abc`中引入了一个有趣的模块，它允许定义“抽象基类”。要被视为抽象基类的实例，实际上不必从它继承，而只需实现其所有抽象方法。

该`collections`模块包括一些在这里感兴趣的抽象基类，即`collections.Sequence`和`collections.Mapping`。因此，您可以编写`__init__`如下函数：

```
def __init__(self, somedata):
    if isinstance(somedata, collections.Sequence):
        # somedata is a list or some other Sequence
    elif isinstance(somedata, collections.Mapping):
        # somedata is a dict or some other Mapping 
```

[http://docs.python.org/2/library/collections.html#collections-abstract-base-classes](http://docs.python.org/2/library/collections.html#collections-abstract-base-classes)包含每个 ABC 提供哪些方法的细节。如果您坚持这些，那么您的代码现在可以接受任何适合这些抽象基类之一的对象。而且，就内置`dict`和`list`类型而言，您可以看到：

```
>>> isinstance([], collections.Sequence)
True
>>> isinstance([], collections.Mapping)
False
>>> isinstance({}, collections.Sequence)
False
>>> isinstance({}, collections.Mapping)
True 
```

而且，几乎是偶然的，你也让它起作用`tuple`了。您可能并不关心它是否真的是 a `list`，只是您可以从中读取元素。但是，如果您检查过，`isinstance(somedata, list)`您将排除`tuple`. 这就是使用 ABC 给你带来的东西。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-15T14:33:19.393

正如@Jan-PhilipGehrcke 指出的那样，`pythonic`很难量化。对我来说这意味着：

*   易于阅读
*   易于维护
*   简单胜于复杂胜于复杂
*   等等，等等（查看`Zen of Python`完整列表，您可以通过`import this`在解释器中输入来获得）

因此，最 Pythonic 的解决方案取决于您必须为每个受支持的初始化程序做什么，以及您拥有多少个初始化程序。我会说，如果你只有少数几个，并且每一个都可以通过几行代码来处理，那么使用`isinstance`and `__init__`：

```
class MyClass(object):

    def __init__(self, initializer):
        """
        initialize internal data structures with 'initializer'
        """
        if isinstance(initializer, dict):
            for k, v in itit_dict.items():
                # do something with k & v
                setattr(self, k, v)
        elif isinstance(initializer, (list, tuple)):
            for item in initializer:
                setattr(self, item, None) 
```

另一方面，如果您有许多可能的初始化程序，或者其中任何一个需要大量代码来处理，那么您将希望`classmethod`为每种可能的初始化类型都有一个构造函数，最常见的用法是`__init__`：

```
class MyClass(object):

    def __init__(self, init_dict={}):
        """
        initialize internal data structures with 'init_dict'
        """
        for k, v in itit_dict.items():
            # do something with k & v
            setattr(self, k, v)

    @classmethod
    def from_sequence(cls, init_list):
        """
        initialize internal  data structures with 'init_list'
        """
        result = cls()
        for item in init_list:
            setattr(result, item, None)
        return result 
```

这使每个可能的构造函数都简单、干净且易于理解。

附带说明：使用可变对象作为默认值（就像我在上面`__init__`所做的那样）需要小心；原因是默认值只评估一次，然后无论结果如何，都将用于*每次后续调用*。只有当您在函数中修改该对象时，这才是一个问题，因为这些修改将在每个后续调用中看到——除非您想要创建一个可能不是您正在寻找的行为的缓存。这对我的示例来说不是问题，因为我没有修改`init_dict`，只是迭代它（如果调用者没有替换它，因为它是空的，这是一个无操作）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-15T14:02:43.867

Python中没有函数[重载](http://en.wikipedia.org/wiki/Function_overloading)。`if isinstance(...)`在您的方法中使用`__init__()`将非常易于阅读和理解：

```
class Foo(object):
    def __init__(self, arg):
        if isinstance(arg, dict):
            ...
        elif isinstance(arg, list):
            ...
        else:
            raise Exception("big bang") 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-03-15T14:04:27.677

您可以使用`*args`并`**kwargs`执行此操作。但是如果你想知道你应该使用什么类型的参数，`type()`或者`isinstance()`。

# c++ - 使用 new 分配多维数组

> ID：15434282
> 
> 赞同：0
> 
> 时间：2013-03-15T13:56:21.467
> 
> 标签：c++, exception, initialization, try-catch, new-operator

当我使用 分配多维数组`new`时，我是这样做的：

```
void manipulateArray(unsigned nrows, unsigned ncols[])
{
  typedef Fred* FredPtr;
  FredPtr* matrix = new FredPtr[nrows];

  for (unsigned i = 0; i < nrows; ++i)
    matrix[i] = new Fred[ ncols[i] ];

} 
```

其中`ncols[]`包含 中每个元素的长度`matrix`，以及`nrows`中元素的数量`matrix`。

如果我想填充`matrix`，那么我有

```
 for (unsigned i = 0; i < nrows; ++i) {
      for (unsigned j = 0; j < ncols[i]; ++j) {
        someFunction( matrix[i][j] ); 
```

但我正在阅读[C++ FAQ](http://www.parashift.com/c++-faq/multidim-arrays.html)，谁说要非常小心。我应该先初始化每一行`NULL`。然后，我应该`trycatch`为行分配。我真的不明白为什么这一切。我一直（但我刚开始）使用上面的代码以 C 风格初始化。

常见问题解答要我这样做

```
void manipulateArray(unsigned nrows, unsigned ncols[])
{
  typedef Fred* FredPtr;

  FredPtr* matrix = new FredPtr[nrows];

  for (unsigned i = 0; i < nrows; ++i)
    matrix[i] = NULL;

  try {
    for (unsigned i = 0; i < nrows; ++i)
      matrix[i] = new Fred[ ncols[i] ];

    for (unsigned i = 0; i < nrows; ++i) {
      for (unsigned j = 0; j < ncols[i]; ++j) {
        someFunction( matrix[i][j] );
      }
    }

  }
  catch (...) {
    for (unsigned i = nrows; i > 0; --i)
      delete[] matrix[i-1];
    delete[] matrix;
    throw;    // Re-throw the current exception
  }

} 
```

1/总是如此谨慎地初始化是牵强的还是非常合适的？

2/ 他们这样做是因为他们处理的是非内置类型吗？代码是否与 相同（具有相同的谨慎程度）`double* matrix = new double[nrows];`？

谢谢

编辑

部分答案[在常见问题解答的下一项中](http://www.parashift.com/c++-faq/multidim-arrays2.html)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T14:07:01.067

如此小心的原因是，如果这些分配中的任何一个失败，或者如果 Fred 构造函数抛出异常，就会发生内存泄漏。如果您要在调用堆栈的较高位置捕获异常，则您分配的内存没有句柄，这就是泄漏。

1）它是正确的，但通常如果你要费这么多麻烦来防止内存泄漏，你宁愿使用`std::vector`和`std::shared_ptr`（等等）来为你管理内存。

2) 内置类型也是如此，但至少唯一会抛出的异常是`std::bad_alloc`分配失败。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T14:03:58.333

我认为这取决于目标平台和系统要求。如果安全是一个高优先级和/或如果你可以用完内存，那么不，这并不牵强。但是，如果您不太关心安全性并且您知道您系统的用户将拥有充足的可用内存，那么我也不会这样做。

它不取决于是否使用内置类型。常见问题解答解决方案是将指向行的指针清空，以便在发生异常时，仅删除已创建的那些行（而不是某些随机内存位置）。

也就是说，我只能赞同 R. Martinho Ferndandes 的评论，即您应该为此使用 STL 容器。管理自己的记忆既乏味又危险。

# vb.net - 为什么 ListView 不刷新？

> ID：15434287
> 
> 赞同：0
> 
> 时间：2013-03-15T13:56:36.043
> 
> 标签：vb.net, winforms, listview

嗨，`ListView`我正在插入表格然后将所有内容读回桌子）。`ListView``ListView`

我在用

```
 listView.Update() 
```

也

```
 listView.Refresh() 
```

但它似乎不起作用。我只是使用`SELECT`查询来读取数据`datareader`并将其存储在我`listView`的如下（正常工作）

唯一的问题是 listView 没有立即刷新，但是当我关闭/打开程序时它可以工作

这是我在 Save 方法末尾使用的代码。基本上这两种方法被调用

```
 Private Sub SetColumns()
    Dim lstpenalty As New ListView()
    lstpenalty.Items.Clear()
    lstpenalty.Visible = True
    lstpenalty.Bounds = New Rectangle(New Point(390, 55), New Size(560, 379))
    lstpenalty.Name = "lstpenalty"
    lstpenalty.FullRowSelect = True

    lstpenalty.View = View.Details
    lstpenalty.GridLines = True

    lstpenalty.Items.Clear()

    lstpenalty.Columns.Add("a", 75)
    lstpenalty.Columns.Add("b", 70)
    lstpenalty.Columns.Add("c", 105)
    lstpenalty.Columns.Add("d", 98)
    lstpenalty.Columns.Add("e", 90)
    lstpenalty.Columns.Add("f", 105)
    Me.Controls.Add(lstpenalty)

    LoadPenaltyList(lstpenalty)

End Sub

Private Sub LoadPenaltyList(ByRef listView As ListView)

    Dim gDR As OracleDataReader
    Dim cmd As New OracleCommand
    Dim lstpenaltyview As New ListViewItem

    Try

        cnn.Connect_to_Oper_Agent()
        cmd.Connection = cnn.cnn

        listView.Items.Clear()

        cmd.CommandText = " select a," & _
                          "b, " & _
                          "c, " & _
                          "d," & _
                          "e," & _
                          "f" & _
                          " FROM myTable" & _
                          " commit"

        gDR = cmd.ExecuteReader()

        While gDR.Read

            lstpenaltyview = listView.Items.Add(Null_To_String(gDR("a")))
            lstpenaltyview.SubItems.Add(gDR("b"))
            lstpenaltyview.SubItems.Add(gDR("c"))
            lstpenaltyview.SubItems.Add(gDR("d"))
            lstpenaltyview.SubItems.Add(gDR("e"))
            lstpenaltyview.SubItems.Add(gDR("f"))

        End While

        listView.Update()

    Catch ex As Exception
        MsgBox("There was an error... -> " & ex.ToString)

    Finally
        cmd.Dispose()
        cnn.Close_Conn()

    End Try

End Sub 
```

谢谢你的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T14:05:37.707

值得一看的是什么方法。

[http://msdn.microsoft.com/en-us/library/system.windows.forms.listview_methods%28v=vs.71%29.aspx](http://msdn.microsoft.com/en-us/library/system.windows.forms.listview_methods%28v=vs.71%29.aspx)

更新：使控件重绘其客户区内的无效区域。

刷新：强制控件使其客户区无效并立即重绘自身和任何子控件。

要使用表信息更新它，首先清除列表视图，然后重做最初填充它的过程。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T19:57:57.253

所以我正在动态创建 ListView。问题是它不断地在彼此之上创建 ListView（内存泄漏），并且总是显示前一个。我创建了一个静态视图列表与一个动态视图列表，问题已解决：D

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2015-11-04T21:42:56.090

利用

```
For Each i As Windows.Forms.ListViewItem In ListView1.Items
   i.Remove()
Next 
```

代替`Clear`

# sphinx - sphinxQL 随机获取？

> ID：15434291
> 
> 赞同：0
> 
> 时间：2013-03-15T13:56:44.213
> 
> 标签：sphinx, sphinxql

在 SphinxQL 中，如何从索引中获取随机记录？

```
SELECT fname FROM indexname WHERE Age>=21 and Age<=47 random 0,4 \G; 
```

收到以下错误：

```
sphinxql: syntax error, unexpected CONST_INT, expecting BETWEEN (or 8 other tokens) near '0,4 
```

从 SphinxQl 获取随机记录的任何其他方式？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-15T14:36:42.380

所有你需要的是

```
... ORDER BY RAND() LIMIT 4 
```

# wordpress - wordpress 仅显示已在 wp_editor 中上传的媒体用户

> ID：15434292
> 
> 赞同：7
> 
> 时间：2013-03-15T13:56:45.270
> 
> 标签：wordpress, view, media, restrictions

我正在创建一个 wordpress 网站，注册用户可以通过前端的 wp_editor() 创建自己的帖子，但只有一个帖子。

现在我想限制用户只能看到他上传的媒体。我在functions.php中使用以下脚本，它在后端工作。因此，如果用户转到后端的媒体部分，他只会看到他上传的媒体。

但是，如果用户转到前端 wp_editor 上的“插入媒体”弹出窗口，他仍然可以看到所有用户上传的媒体。

```
function restricted_media_view( $wp_query ) {
if ( strpos( $_SERVER[ 'REQUEST_URI' ], '/wp-admin/upload.php' ) !== false  
|| strpos( $_SERVER[ 'REQUEST_URI' ], '/wp-admin/edit.php' ) !== false ) {
    if ( !current_user_can( 'level_5' ) ) {
        global $current_user;
        $wp_query->set( 'author', $current_user->id );
    }
    }
}
add_filter('parse_query', 'restricted_media_view' ); 
```

你有什么想法可以解决这个烦恼吗？谢谢！

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-15T14:15:05.833

你可以试试这个插件：[http ://wordpress.org/extend/plugins/view-own-posts-media-only/](http://wordpress.org/extend/plugins/view-own-posts-media-only/)

或者试试这个：

```
add_action('pre_get_posts','ml_restrict_media_library');

function ml_restrict_media_library( $wp_query_obj ) {
    global $current_user, $pagenow;
    if( !is_a( $current_user, 'WP_User') )
    return;
    if( 'admin-ajax.php' != $pagenow || $_REQUEST['action'] != 'query-attachments' )
    return;
    if( !current_user_can('manage_media_library') )
    $wp_query_obj->set('author', $current_user->ID );
    return;
} 
```

来源：[http ://wpsnipp.com/index.php/functions-php/restricting-users-to-view-only-media-library-items-they-upload/#comment-810649773](http://wpsnipp.com/index.php/functions-php/restricting-users-to-view-only-media-library-items-they-upload/#comment-810649773)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2014-02-11T19:12:06.283

或者从[WordPress 3.7开始](https://core.trac.wordpress.org/changeset/25279)

```
add_filter( 'ajax_query_attachments_args', "user_restrict_media_library" );
function user_restrict_media_library(  $query ) {
    global $current_user;
    $query['author'] = $current_user->ID ;
    return $query;
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-10-20T21:33:48.577

我使用 WP 4.3.1 的 API/过滤器参考/ajax 查询附件参数并且可以工作

```
add_filter( 'ajax_query_attachments_args', 'show_current_user_attachments', 10, 1 );

function show_current_user_attachments( $query = array() ) {
    $user_id = get_current_user_id();
    if( $user_id ) {
        $query['author'] = $user_id;
    }
    return $query;
} 
```

只需添加functions.php

或查看此链接[WP Codex](http://codex.wordpress.org/Plugin_API/Filter_Reference/ajax_query_attachments_args#Examples)

# xcode - 刷新配置文件时 Xcode 崩溃

> ID：15434296
> 
> 赞同：119
> 
> 时间：2013-03-15T13:56:56.513
> 
> 标签：xcode, provisioning-profile, ios-provisioning

我似乎无法在 Xcode 中刷新我的配置文件而不会崩溃。每次我按下管理器中的刷新按钮时，它都会崩溃，我从错误日志中检索这一行：

```
UNCAUGHT EXCEPTION (NSInvalidArgumentException): *** setObjectForKey: object cannot be nil (key: teamId) 
```

所以我检查了我的teamId，但没有发现任何异常。任何人有任何想法是什么导致我的问题？每次我刷新我的个人资料时，这对我有用。今天早上甚至做了10次。

编辑：

如果需要，这是崩溃报告：

```
Process:         Xcode [1136]
Path:            /Applications/Xcode.app/Contents/MacOS/Xcode
Identifier:      com.apple.dt.Xcode
Version:         4.6.1 (2067)
Build Info:      IDEApplication-2067000000000000~2
App Item ID:     497799835
App External ID: 14581035
Code Type:       X86-64 (Native)
Parent Process:  launchd [272]
User ID:         501

Date/Time:       2013-03-15 15:21:43.906 +0100
OS Version:      Mac OS X 10.8.3 (12D78)
Report Version:  10

Interval Since Last Report:          14773 sec
Crashes Since Last Report:           9
Per-App Interval Since Last Report:  14523 sec
Per-App Crashes Since Last Report:   7
Anonymous UUID:                      E5C08B95-3313-ABC3-6BB7-F22E76735A98

Crashed Thread:  2  Dispatch queue: NSManagedObjectContext Queue

Exception Type:  EXC_CRASH (SIGABRT)
Exception Codes: 0x0000000000000000, 0x0000000000000000

Application Specific Information:
ProductBuildVersion: 4H512
UNCAUGHT EXCEPTION (NSInvalidArgumentException): *** setObjectForKey: object cannot be nil (key: teamId)
UserInfo: (null)
Hints: None
Backtrace:
  0  0x00007fff92639aee __exceptionPreprocess (in CoreFoundation)
  1  0x00007fff98d703f0 objc_exception_throw (in libobjc.A.dylib)
  2  0x00007fff926c85b7 -[__NSDictionaryM setObject:forKey:] (in CoreFoundation)
  3  0x0000000107d42d88 +[DTDKTeamBasedService _createRequestDictionaryForTeam:andPlatform:] (in DTDeviceKit)
  4  0x0000000107d45315 +[DTDKDownloadProvisioningProfileService serviceForTeam:andPlatform:andProfileID:withError:] (in DTDeviceKit)
  5  0x0000000107d6e1c0 +[DTDKDownloadProvisioningProfileService serviceForProvisioningProfileRecord:withError:] (in DTDeviceKit)
  6  0x0000000107d73728 __72+[DTDKPortalDatabase _refreshFromProvisioningProfileListServices:error:]_block_invoke (in DTDeviceKit)
  7  0x00007fff9429d4dc developerSubmittedBlockToNSManagedObjectContextPerform (in CoreData)
  8  0x00007fff9429d40a -[NSManagedObjectContext performBlockAndWait:] (in CoreData)
  9  0x0000000107d73246 +[DTDKPortalDatabase _refreshFromProvisioningProfileListServices:error:] (in DTDeviceKit)
 10  0x0000000107d75816 __56+[DTDKPortalDatabase refresh:parentWindow:withCallback:]_block_invoke_5 (in DTDeviceKit)
 11  0x00007fff942cd7cf developerSubmittedBlockToNSManagedObjectContextPerform_privateasync (in CoreData)
 12  0x00007fff90dd20b6 _dispatch_client_callout (in libdispatch.dylib)
 13  0x00007fff90dd347f _dispatch_queue_drain (in libdispatch.dylib)
 14  0x00007fff90dd32f1 _dispatch_queue_invoke (in libdispatch.dylib)
 15  0x00007fff90dd31c3 _dispatch_worker_thread2 (in libdispatch.dylib)
 16  0x00007fff964d4d0b _pthread_wqthread (in libsystem_c.dylib)
 17  0x00007fff964bf1d1 start_wqthread (in libsystem_c.dylib)

objc[1136]: garbage collection is ON
abort() called
.....
[The report itself is very large and contains much more than this] 
```

* * *

## 回答 #1

> 赞同：179
> 
> 时间：2013-03-22T04:04:44.100

删除此文件：

```
~/Library/Developer/Xcode/connect1.apple.com 4.6.1.db 
```

在运行 Xcode 4.6.1 之前。

* * *

## 回答 #2

> 赞同：62
> 
> 时间：2013-03-26T11:21:10.133

这是苹果官方的解决方法：

在终端中运行此命令：

```
mkdir ~/Library/Developer/Xcode/OldPortalDBs; mv ~/Library/Developer/Xcode/connect1.apple.com* ~/Library/Developer/Xcode/OldPortalDBs 
```

对我来说就像一个魅力。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-21T21:47:32.237

`NSCoder`本周晚上有人遇到了这个问题。通过删除清除：

`~/Library/Caches/com.apple.dt.Xcode`.

```
sqlite3 ~/Library/Caches/com.apple.dt.Xcode/PortalData/connect1.apple.com 
```

将该文件显示为`SQLite database`，并引用证书、团队和配置文件。我怀疑（但没有尝试过）删除 PortalData 文件夹足以清除错误。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-01T15:20:44.310

删除此文件对我有用。

`~/Library/Developer/Xcode/connect1.apple.com 4.6.1.db`

谢谢！

# highcharts - highcharts 使用自定义条形宽度的分组图表，没有 pointPadding

> ID：15434298
> 
> 赞同：0
> 
> 时间：2013-03-15T13:57:06.247
> 
> 标签：highcharts

基本上我想同时使用带有自定义条宽（pointWidth）的pointPadding。但我不能，这是我的问题：

在显示分组图表时，我想要一个在一组的条形图中没有填充的图表。为此，我使用了 pointPadding:"0" 它向我展示了完全正确的图表。喜欢：

```
 if(chart_json.chart.defaultSeriesType=='column'){
          if(chart_json.xAxis.categories.length >= 1 ){

        chart_json.plotOptions.column.groupPadding = "0.05";
          chart_json.plotOptions.column.pointPadding = "0.00";

          }  
      }

      var chart=new Highcharts.Chart(chart_json,startupObj.startupFunction);
      chartObjArray.push(chart); 
```

但是当我设置我的自定义宽度时，它会在一组的条之间添加一些空格。

实际上我想对条形宽度设置最大和最小限制，但我找不到 Highchart 库的任何支持。因此，为此目的，当 highchart 生成图表时，如果生成的图表栏宽度超过我的最大限制，我将其设置为我的最大限制，下限相同。

```
 if(chart_json.chart.defaultSeriesType=='column'){
          if(chart_json.xAxis.categories.length >= 1 ){

              chart_json.plotOptions.column.groupPadding = "0.05";
              chart_json.plotOptions.column.pointPadding = "0.00";

          }  
      }

      var chart=new Highcharts.Chart(chart_json,startupObj.startupFunction);
      chartObjArray.push(chart);

    //set bar width
    if(chart_json.chart.defaultSeriesType=='column' || chart_json.chart.defaultSeriesType=='bar'){
        setChartBarMaxMinWidth(chart,chart_json);
    }

setChartContainerWidth(chart_json,chart); 
```

//// ***** ** *** ** *** ** *** ** *** ** *** ** *** ** *** ** *** ** *** ** *** ** *** **** ////////// /////////

```
function setChartBarMaxMinWidth(chart,json){

var maximumBarWidth=70;
var minimumBarWidth=15;

chart_json=eval('('+json.chart_json+')');

for(var j=0;j<chart.series.length;j++){
    var series=chart.series[j];
    if (series.data[0].pointWidth  >  maximumBarWidth) {
        chart.series[j].options.pointWidth = maximumBarWidth;
        isMaxMin='MAX';
    }

    if (series.data[0].pointWidth  <  minimumBarWidth) {
        chart.series[j].options.pointWidth = minimumBarWidth;
        isMaxMin='MIN';
    } 
```

};

```
function setChartContainerWidth(chartOptions,chart){  
          // calculate # of bars
          var numberOfBars=seriesGroupLength*categoriesLength;
          // calculate container width
          // var containerWidth=numberOfBars*43;

          // get chart bar width

          var containerWidth=numberOfBars*barWidth;

          chart.setSize($(container).width(),$(container).height()); 
```

};

在 setChartContainerWidth() 中，我使用了 highchart setSize() 方法来调整图表大小。

感谢有人可以帮助我删除一组酒吧之间的空格。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-30T16:31:12.830

我使用了 spacingTop 属性来强制设置最大 pointWidth：

```
if (series[0].data[0].pointWidth > maximumBarWidth) {
     this.options.chart.spacingTop = this.options.chart.height - (maximumBarWidth * series.length) - 30;
     this.isDirtyBox = true;
     this.redraw();
} 
```

因此，如果有一个 Bar 超过一定宽度，则间距将被调整并且图表被绘制得更小。

这不会改变容器的大小，但会将条形保持在一定大小以下，并且您的 pointPadding 和 groupPadding 不会受到影响。

您将不得不根据您的数据结构和轴标题的大小调整间距顶部的计算。

# android - 活动没有启动，也没有显示错误

> ID：15434301
> 
> 赞同：1
> 
> 时间：2013-03-15T13:57:17.900
> 
> 标签：android, android-intent, android-activity

我对 android 很陌生，我正面临一个有线问题。

我正在开始这样的活动：

```
Intent i = new Intent(getApplicationContext(),InvoiceActivity.class);
i.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
i.putExtra("invoice",extras.getString("invoice"));
startActivity(i); 
```

在日志中我可以看到这一行：

```
Starting: Intent { flg=0x10000000 cmp=com.simplepay.hellomobile/.InvoiceActivity (has extras) } from pid 4785 
```

但在我的模拟器和我的安卓设备中，活动根本没有开始。也不例外。

哪里会出错？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T14:01:24.050

您尚未添加**startActivity**：添加：`startActivity(i);`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T13:58:23.170

试试这个：

```
Intent i = new Intent(this,InvoiceActivity.class);
i.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
i.putExtra("invoice",extras.getString("invoice"));
startActivity(i); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-15T14:02:45.453

```
Intent i = new Intent(this,InvoiceActivity.class);
i.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
i.putExtra("invoice",extras.getString("invoice"));
startActivity(i); 
```

上面的代码将运行，但在运行之前，强烈建议您学习 android 的基础知识。从一个活动开始另一个活动这是 android 开发者站点[链接中的一个很好的示例](http://developer.android.com/training/basics/firstapp/starting-activity.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-15T14:16:37.760

我认为您的问题是您正在使用整个应用程序的上下文。改为使用当前活动的上下文。

```
 Intent i = new Intent(this,InvoiceActivity.class);
 i.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
 i.putExtra("invoice",extras.getString("invoice"));
 startActivity(i); 
```

或者你可以这样做。

```
Intent i = new Intent(YourCurrentActivity.this,InvoiceActivity.class);
i.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
i.putExtra("invoice",extras.getString("invoice"));
startActivity(i); 
```

# jquery - 调用后 Flexigrid 不填充。

> ID：15434302
> 
> 赞同：0
> 
> 时间：2013-03-15T13:57:18.223
> 
> 标签：jquery, html, flexigrid

我有一个关于 flexigrid 的问题，它获取 json 数据但不填充它。我也不想在服务器端使用 PHP，如果可能的话，也不想在服务器端编程。

```
<table id="payments2"></table>

<script>

    $('#payments2').flexigrid({
        url: '/payments.json',
        dataType: 'json',
        colModel: 
                [
                            { display: 'Payment Date', name: 'date', width: 100, sortable: true }
                ]               
        });

</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T20:17:46.627

我自己只是在研究这个问题。

显然，如果您查看为示例生成 json 的[官方网站的](http://flexigrid.info) [php](http://flexigrid.info/post2.php)，您会发现它不是标准的 JSON。

它有一些特殊的格式：

```
{
    "page": 1,
    "total": 2,
    "rows": [
        {
            "id": "ZW",
            "cell": {
                "name": "Zimbabwe ",
                "iso": "ZW",
                "printable_name": "Zimbabwe ",
                "iso3": "ZWE ",
                "numcode": "716"
            }
        },
        {
            "id": "ZM",
            "cell": {
                "name": "Zambia ",
                "iso": "ZM",
                "printable_name": "Zambia ",
                "iso3": "ZMB ",
                "numcode": "894"
            }
        }
           ]
} 
```

显然您正在返回只有“单元格”的 JSON 格式

您需要找到一种方法在返回的 JSON 结果集中创建此结构。

我找到了一个将其转换为正确格式的 ASP .NET MVC 示例：[这里](http://www.codeproject.com/Articles/30588/ASP-NET-MVC-Flexigrid-sample)

# db2 - SQL30082N 尝试建立连接失败，安全原因 5

> ID：15434307
> 
> 赞同：0
> 
> 时间：2013-03-15T13:57:35.420
> 
> 标签：db2, oledbconnection

当我尝试在用 c# 开发的 Visual Studio 2008 Windows 应用程序中使用 OLEDBConnection 连接到 DB2 数据库服务器时出现此错误：

```
SQL30082N Attempt to establish connection failed with security reason 5 
```

我正在使用 Microsoft OLEDB Provider for DB2。当我尝试连接时，出现上述错误。

我正在使用以下连接字符串连接到 DB2

```
ConnectionStr = "Provider=IBMDADB2;Database="SampDB";Hostname=114.968.25.61;Protocol=TCPIP;Port=60001;Uid =testuser; Pwd=!DB2User!;"; 
```

我 100% 确定这个用户名是正确的。我的 DB2 客户端提供程序版本是 8.0

在我的桌面上，我收到了这个错误。但这个 Windows 应用程序在所有其他机器上运行良好。请帮助我解决问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T16:04:41.850

根据[Info Center](http://publib.boulder.ibm.com/infocenter/db2luw/v9r7/topic/com.ibm.db2.luw.messages.sql.doc/doc/msql30082n.html)`5` ， SQLSTATE的原因代码`SQL30082N`意味着缺少 UserId。

我认为可能是什么问题（如果您复制并粘贴了确切的连接字符串）是`Uid`.

如果您使用的是 .NET，那么您可能需要查看[`OleDbConnectionString`](http://msdn.microsoft.com/en-us/library/system.data.oledb.oledbconnectionstringbuilder.aspx)该类。它将根据需要格式化和转义连接字符串。

# regex - 正则表达式匹配一些包装的文本

> ID：15434314
> 
> 赞同：1
> 
> 时间：2013-03-15T13:57:54.040
> 
> 标签：regex, text, pcre

考虑以下文本：

```
aas(  I)f df (as)(dfdsf)(adf).dgdf(sfg).(dfdf) asdfsdf dsfa(asd #54 54 !fa.) sdf 
```

我想检索括号之间的文本，但相邻的括号应该被视为一个单元。我怎样才能做到这一点？

对于上面的示例，所需的输出是：

*   （ 一世）
*   (as)(dfdsf)(adf)
*   (sfg).(dfdf)
*   (asd #54 54 !fa.)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T14:03:13.433

试试`[^(](\([^()]+([)](^[[:alnum:]]*)?[(][^()]+)*\))[^)]`。捕获组 1 是您想要的。

此表达式假定除括号外的每种字符都可能出现在括号之间的文本中，并且它不会匹配带有嵌套括号的部分。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T14:03:15.617

我会去：`/(?:\(\w+\)(?:\.(?=\())?)+/g`

*   `\(\w+\)`匹配文字大括号内的 a-zA-Z0-9_
*   `(?:\.(?=\())?``.`仅当后面跟着另一个左大括号时才捕获文字
*   整个东西被包裹起来`(?:)+`以将相邻的捕获连接在一起

```
var str = "aas(I)f df (asdfdsf)(adf).dgdf(sfg).(dfdf) asdfsdf dsfa(asdfa) sdf";
str.match(/(?:\(\w+\)(?:\.(?=\())?)+/g);
// -> ["(I)", "(asdfdsf)(adf)", "(sfg).(dfdf)", "(asdfa)"] 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-15T14:48:34.387

### 假设

*   没有嵌套`()`，也没有逃逸`()`
*   括号与`.`字符链接在一起，或者彼此相邻（不允许灵活的间距）。
*   `(a)(b).(c)`被认为是一个单一的令牌（`.`是可选的）。

### 解决方案

下面的正则表达式将与全局匹配（全部匹配）功能一起使用。

```
\([^)]*\)(?:\.?\([^)]*\))* 
```

请自行添加分隔符。

[**演示**](http://www.regex101.com/r/uV5qT7)

### 解释

正则表达式的分解（间距无关紧要）。之后和包括`#`是注释，而不是正则表达式的一部分。

```
\(             # Literal (
[^)]*          # Match 0 or more characters that are not )
\)             # Literal ). These first 3 lines match an instance of wrapped text
(?:            # Non-capturing group
  \.?          # Optional literal .
  \([^)]*\)    # Match another instance of wrapped text
)*             # The whole group is repeated 0 or more times 
```

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2013-03-15T14:01:34.427

这个应该可以解决问题：

```
\([A-Za-z0-9]+\) 
```

# android - DefaultHttpClient 的 "connManager" 始终为空，无法执行 http 请求

> ID：15434316
> 
> 赞同：1
> 
> 时间：2013-03-15T13:57:58.180
> 
> 标签：android, android-asynctask

我正在构建一个提示用户注册的应用程序。我有一个在后端运行的*django-restful服务器，我正在尝试使用**DefaultHttpClient*类在 android 客户端上向我的服务器发出 HTTP 发布请求。我从用户那里收到电子邮件、用户名等，在按钮的 onClick 事件中，我创建了一个*AsnycTask*来执行请求。这是活动的代码：

```
registerButton.setOnClickListener(new View.OnClickListener() {

    @Override
    public void onClick(View arg0) {
        String userName = usernameEditText.getText().toString();
        String email = emailEditText.getText().toString();
        String password = passwordEditText.getText().toString();

        if( userName != null && email != null && password != null) {
            new RegisterEventHandler().execute(userName , email , password);
        }
    }

});

  ....

    class RegisterEventHandler extends AsyncTask<String, Integer, Boolean> {

    @Override
    protected Boolean doInBackground(String... params) {            
        RequestHandler handler = new RequestHandler();
        return handler.register(params[0], params[1], params[2]);
    }

    @Override
    protected void onPostExecute(Boolean result) {
        super.onPostExecute(result);
        if( result ) {
            AlertDialog.Builder builder = new AlertDialog.Builder(getApplicationContext());
            builder.setTitle(R.string.RegisterSuccessfullTitle);
            builder.setMessage(R.string.RegisterSuccessfullMessage);
            builder.setPositiveButton(R.string.OK, new DialogInterface.OnClickListener() {                  

                @Override
                public void onClick(DialogInterface dialog, int which) {
                    Intent redirect = new Intent(getApplicationContext() , SmartMapMainActivity.class);
                    startActivity(redirect);
                }

            });

            builder.create().show();
        }
        else {
            AlertDialog.Builder builder = new AlertDialog.Builder(getApplicationContext());
            builder.setTitle(R.string.RegisterFailedTitle);
            builder.setMessage(R.string.RegisterFailedMessage);
            builder.create().show();
        }
    }       
} 
```

RequestHandler 类：

```
public class RequestHandler {

public boolean register(String userName , String email , String password) {
    HttpClient httpClient = new DefaultHttpClient();
    HttpPost httpPost = new HttpPost("http://127.0.0.1/users/");

    try {
        JSONObject jsonObj = new JSONObject();
        jsonObj.put("username", userName);
        jsonObj.put("email", email);
        jsonObj.put("password", password);      

        StringEntity entity = new StringEntity(jsonObj.toString());
        entity.setContentType("application/json");
        httpPost.setEntity(entity);

        HttpResponse response = httpClient.execute(httpPost);
        if(response.getStatusLine().getStatusCode() == 200)
            return true;
        else
            return false;

    } catch (UnsupportedEncodingException e) {
        e.printStackTrace();
    } catch (ClientProtocolException e) {
        e.printStackTrace();
    } catch (IOException e) {
        e.printStackTrace();
    } catch (JSONException e) {
        e.printStackTrace();
    }

    return false;

}
} 
```

问题是，*DefaultHttpClient*的 connManager(ClientConnectionManager) 始终为**空**，并且在*HttpClient的**execute()*方法上，它总是抛出**IOException**。我尝试在我的活动中初始化*DefaultHttpClient*，而不是在 AsyncTask 的*doInBackground*方法中，但结果是一样的。

# c# - C# - 使用 XML 水合现有对象

> ID：15434319
> 
> 赞同：8
> 
> 时间：2013-03-15T13:58:04.080
> 
> 标签：c#, xml

我知道我可以使用 Linq 将字段从 XML 映射到预先存在的对象中的字段。.NET Framework（或其他库）中是否有任何功能可以减少手动操作。

我想写（并且让 HydrateFromXml 的行为有点像 AutoMapper）：

```
var myObject = new MyObject(/*ctor args*/);

myObject = myObject.HydrateFromXml(string xml); 
```

**编辑：**

我可以在这里使用装饰器模式或简单的包装器对象吗？直接反序列化为由抽象包装的类型，该抽象允许我需要的细粒度构造控制？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-15T14:01:16.057

你可以用它[`XmlSerializer`](http://msdn.microsoft.com/pl-pl/library/system.xml.serialization.xmlserializer.aspx)来做到这一点：

```
var serializer = new XmlSerializer(typeof(MyObject));

object result;
using (TextReader reader = new StringReader(xml))
{
    result= serializer.Deserialize(reader);
}

var myObject = result as MyObject; 
```

对于对象实例已经存在的情况，请检查以下问题：[将属性反序列化为预先存在的对象](https://stackoverflow.com/questions/2341566/deserializing-properties-into-a-pre-existing-object)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T14:07:19.943

作为一个快速选项，您可以使用 AutoMapper。使用 XmlSerializer 反序列化到新实例，然后使用 AutoMapper 从新创建的实例映射到所需的实例。

# javascript - 将变量从头部脚本传递到正文中的脚本

> ID：15434321
> 
> 赞同：-1
> 
> 时间：2013-03-15T13:58:07.913
> 
> 标签：javascript

我创建了一个包含多个 Javascript 脚本的 HTML 文档。我在页面的头部创建了一个生成特定值的 Javascript 函数。我想在位于正文部分的 Javascript 块中传递这个变量。可能吗？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T13:59:54.217

对的，这是可能的。只需将头部中的函数设为全局，然后从正文脚本中调用它。或者在头脚本中调用它并将结果分配给您在下面访问的全局变量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T14:02:20.857

你的问题不是很具体。但这完全符合您的描述并且有效。

```
<html>
<head>
<script>var test = 'someVar';</script>
</head>
<body>

<script>

alert (test);
</script>
</body> 
```

# asp.net-mvc - WebAPI 控制器错误处理

> ID：15434324
> 
> 赞同：0
> 
> 时间：2013-03-15T13:58:16.753
> 
> 标签：asp.net-mvc, exception-handling, asp.net-web-api, httpresponse

我在 Web-API 中实现错误处理时遇到问题

```
[HttpGet]       
public UserAccount Get()
{
    throw new HttpResponseException(
        new HttpResponseMessage(HttpStatusCode.InternalServerError)
    {
        Content = new StringContent("My Error Message"), 
        ReasonPhrase = "Critical Exception"
    });
} 
```

当我尝试从我的机​​器（站点托管在本地）调用此方法时，它按预期工作。即我收到错误消息作为响应（纯文本）。但是当我从另一台机器（连接局域网）访问相同的 url 时，响应是 IIS 500 内部错误页面。我的问题是，我没有收到自定义错误消息**“我的错误消息”**

有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T15:17:23.853

将此添加到您的网络配置中：

```
 <system.webServer>
    <httpErrors errorMode="Detailed"/> 
```

# html - PayPal Payflow HTML 与 PayPal 创建的按钮集成？

> ID：15434325
> 
> 赞同：1
> 
> 时间：2013-03-15T13:58:21.937
> 
> 标签：html, payflowlink

所以我希望我在这里听起来不是菜鸟。我已经通过客户的贝宝帐户创建了所有必需的按钮。我用 PayFlow Checkout 注册了他们，因为他们有一个网关，他们想在他们的商业银行中使用它，这是一个 First Date Merchant Account。

payflow 结账现在是免费版本。我还保存并发布了集成结帐页面。

为了使用 PayFlow 流程，他们的产品页面上需要如何或我遗漏了什么？

我已经为开发人员浏览了 PDF，但也许我不明白。我认为这是对我粘贴在标题区域的按钮或一些代码片段的简单修复。

编辑 - 我确实创建了沙盒帐户，但也许我不确定接下来需要发生什么。

按钮和当前的贝宝购物车位于[此处](http://www.misterkoool.com/test/purchase.html)。

请善待并给我任何关于我缺少什么的提示。

基思

# database - 获取未完成查询的数据

> ID：15434329
> 
> 赞同：1
> 
> 时间：2013-03-15T13:58:44.293
> 
> 标签：database, ms-access, ms-access-2007

我有两个表，其中包含有关某些联系人的信息，如果它们在以下条件下存在，我正在尝试构建一些查询以将这些联系人匹配在一起：

1.  匹配名字、姓氏和电子邮件
2.  匹配名字和电子邮件
3.  匹配姓氏和电子邮件

我构建了一个查询来获取第一个非常简单的条件，现在对于第二个条件，我希望根据第一个条件留下的数据进行匹配（我不希望第二个查询包含已经存在的数据第一个）

我编写了这个查询来获取不在第一个查询中但它破坏了应用程序的数据（我使用访问数据库作为业务需求）

我知道这个查询是错误的，但请您帮助我或指导我如何解决第二个查询。

```
SELECT DISTINCT TableA.[Contact ID], TableB.[UIR No]
FROM TableA, TableB
WHERE TableB.[UIR No] NOT IN (SELECT TableB.[UIR No] FROM TableA, TableB WHERE (((TableA.[Last Name])=TableB.[Last Name]) And ((TableA.Email)=TableB.Email) And ((TableA.[First Name])=TableB.[First Name]));)
AND
TableA.[Contact ID] NOT IN(SELECT  TableA.[Contact ID] FROM TableA, TableB WHERE (((TableA.[Last Name])=TableB.[Last Name]) And ((TableA.Email)=TableB.Email) And ((TableA.[First Name])=TableB.[First Name]));); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T15:30:35.200

在这种情况下，我倾向于将查询分解为单独的“基本查询”并保存它们。然后我根据“基本查询”创建“结果查询”。在这种情况下，我将首先为三种匹配方式创建“基本查询”：

[qry_base_1_matchFirstLastEmail]：

```
SELECT DISTINCT TableA.[Contact ID], TableB.[UIR No]
FROM TableA INNER JOIN TableB ON (TableA.Email = TableB.Email) AND (TableA.[Last Name] = TableB.[Last Name]) AND (TableA.[First Name] = TableB.[First Name]); 
```

[qry_base_2_matchFirstEmail]：

```
SELECT DISTINCT TableA.[Contact ID], TableB.[UIR No]
FROM TableA INNER JOIN TableB ON (TableA.Email = TableB.Email) AND (TableA.[First Name] = TableB.[First Name]); 
```

[qry_base_3_matchLastEmail]：

```
SELECT DISTINCT TableA.[Contact ID], TableB.[UIR No]
FROM TableA INNER JOIN TableB ON (TableA.[Last Name] = TableB.[Last Name]) AND (TableA.Email = TableB.Email); 
```

然后我可以将它们用作“结果查询”的来源，其中步骤 (2) 省略了步骤 (1) 的结果，步骤 (3) 省略了 (2) 和 (1) 的结果：

**第 1 步：匹配 [First Name]、[Last Name] 和 [Email]**

我们已经将它作为我们的“基本查询”之一，因此我们必须在简单地重命名`qry_base_1_matchFirstLastEmail`为`qry_result_1_matchOnlyFirstLastEmail`（这可能会令人困惑）或创建一个`qry_result_1_matchOnlyFirstLastEmail`简单地从其返回结果`qry_base_1_matchFirstLastEmail`（这有点低效）之间做出选择。我很容易混淆，所以我会选择第二个选项

[qry_result_1_matchOnlyFirstLastEmail]：

```
SELECT qry_base_1_matchFirstLastEmail.*
FROM qry_base_1_matchFirstLastEmail; 
```

***第 2 步：仅*匹配[First Name] 和 [Email]**

我们希望从`qry_base_2_matchFirstEmail`步骤 1 中已经确定的结果中提取并消除结果：

[qry_result_2_matchOnlyFirstEmail]：

```
SELECT qry_base_2_matchFirstEmail.[Contact ID], qry_base_2_matchFirstEmail.[UIR No]
FROM qry_base_2_matchFirstEmail LEFT JOIN qry_base_1_matchFirstLastEmail ON (qry_base_2_matchFirstEmail.[UIR No] = qry_base_1_matchFirstLastEmail.[UIR No]) AND (qry_base_2_matchFirstEmail.[Contact ID] = qry_base_1_matchFirstLastEmail.[Contact ID])
WHERE (((qry_base_1_matchFirstLastEmail.[Contact ID]) Is Null) AND ((qry_base_1_matchFirstLastEmail.[UIR No]) Is Null)); 
```

***第 3 步：仅*匹配[姓氏] 和 [电子邮件]**

我们希望从`qry_base_3_matchLastEmail`步骤 1 和步骤 2 中已经确定的结果中提取并消除结果：

[qry_result_3_matchOnlyLastEmail]：

```
SELECT qry_base_3_matchLastEmail.[Contact ID], qry_base_3_matchLastEmail.[UIR No]
FROM (qry_base_3_matchLastEmail LEFT JOIN qry_base_2_matchFirstEmail ON (qry_base_3_matchLastEmail.[UIR No] = qry_base_2_matchFirstEmail.[UIR No]) AND (qry_base_3_matchLastEmail.[Contact ID] = qry_base_2_matchFirstEmail.[Contact ID])) LEFT JOIN qry_base_1_matchFirstLastEmail ON (qry_base_3_matchLastEmail.[UIR No] = qry_base_1_matchFirstLastEmail.[UIR No]) AND (qry_base_3_matchLastEmail.[Contact ID] = qry_base_1_matchFirstLastEmail.[Contact ID])
WHERE (((qry_base_2_matchFirstEmail.[Contact ID]) Is Null) AND ((qry_base_2_matchFirstEmail.[UIR No]) Is Null) AND ((qry_base_1_matchFirstLastEmail.[Contact ID]) Is Null) AND ((qry_base_1_matchFirstLastEmail.[UIR No]) Is Null)); 
```

（最后一个可能看起来有点吓人，但是将 SQL 粘贴到 Access 查询设计器中，您会发现它真的没什么好害怕的。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T20:02:39.143

[我以非常简单的方式解决了它，给了我与上一个答案](https://stackoverflow.com/a/15436219/810610)相同的结果

对于查询 1：我使用

```
SELECT TableA.[First Name], TableB.[First Name], TableB.[Last Name], TableA.[Last Name], TableA.Email, TableB.Email, TableA.[Contact ID], TableB.[UIR No], TableB.[Ver No]
FROM TableA, TableB
WHERE (((TableA.[First Name])=TableB.[First Name]) And ((TableA.[Last Name])=TableB.[Last Name]) And ((TableA.Email)=TableB.Email)); 
```

对于查询 2：我使用

```
SELECT TableA.[Last Name], TableB.[Last Name], TableB.Email, TableA.Email, TableA.[First Name], TableB.[First Name], TableA.[Contact ID], TableB.[UIR No], TableB.[Ver No]
FROM TableA, TableB
WHERE (((TableA.[Last Name])=TableB.[Last Name]) And ((TableA.Email)=TableB.Email) And ((TableA.[First Name])<>TableB.[First Name])); 
```

对于查询 3：我使用

```
SELECT TableA.[First Name], TableB.[First Name], TableB.[Last Name], TableA.[Last Name], TableA.Email, TableB.Email, TableA.[Contact ID], TableB.[UIR No], TableB.[Ver No]
FROM TableA, TableB
WHERE (((TableA.[First Name])=TableB.[First Name]) And ((TableA.[Last Name])<>TableB.[Last Name]) And ((TableA.Email)=TableB.Email)); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-15T14:10:27.693

加入可能会更好。

```
SELECT DISTINCT TableA.[Contact ID], TableB.[UIR No]
FROM TableA
INNER JOIN TableB
ON TableA.FirstName=Tableb.FirstName 
AND TableA.Email=Tableb.Email
WHERE TableB.[UIR No] NOT IN 
   (SELECT TableB.[UIR No]
    FROM TableA
    INNER JOIN TableB
    ON TableA.FirstName=Tableb.FirstName 
    AND TableA.LastName=Tableb.LastName 
    AND TableA.Email=Tableb.Email); 
```

请注意，INNER JOIN 仅包括在两个表中都匹配的记录。

# c# - 在 PDB 文件中更改原始文件的路径

> ID：15434330
> 
> 赞同：3
> 
> 时间：2013-03-15T13:58:46.967
> 
> 标签：c#, debugging, teamcity, nuget

我们使用 Team City 作为构建服务器。我们已将 Team City 配置为在构建时从我们的一个解决方案创建几个 nuget 包（包括用于调试的 pdb 文件）。

问题在于，每当 Team City 构建解决方案时，它都会生成 pdb 文件，其中包含硬编码的源文件位置（类似于`c:\TeamCity\Builds\{guid}\Path\To\Source\File.cs`）。

由于我们所有的开发人员都使用相同的文件夹结构来存放他们的解决方案，因此可以预测该文件的位置。所以我的问题是：是否可以为 Team City 提供解决方案根目录的位置，就像在开发人员的机器上一样？也许是 web.config 或 .nuspec 文件中的值？

# javascript - DHTMLX2.5 日历问题

> ID：15434335
> 
> 赞同：0
> 
> 时间：2013-03-15T13:59:07.147
> 
> 标签：javascript, dhtmlx

我正在使用 DHTMLX 2.5 日历。我将日历附加到输入字段。

```
<script src="../dhtmlx_suite/js/dhtmlxcommon.js"></script>
<link rel="stylesheet" type="text/css" href="../dhtmlx_suite/skins/dhtmlxcalendar_dhx_skyblue.css" />
<link rel="stylesheet" type="text/css" href="../dhtmlx_suite/css/dhtmlxcalendar.css" />
<script src="../dhtmlx_suite/js/dhtmlxcalendar.js"></script>
<script>
var myCalendar;
function doOnLoad() {
    myCalendar = new dhtmlXCalendarObject(["calendar"]);

}

</script>

    <div style="position:relative;height:280px;">
        <input type="text" id="calendar">   
    </div>
<script>
doOnLoad();
</script> 
```

当我在输入字段中输入一些无效日期（例如“xyz”）并单击输入字段时，它会将值替换为字符串“NaN-NaN-NaN”。怎么能避免这种情况？并将用户输入的值保持在文本字段中。因此，当输入字段中有无效日期时，我希望日历弹出窗口会忽略它并打开当前月份。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T14:29:57.617

您可以创建一个验证器函数来检查您的输入内容在语法上是否正确。如果不正确，您可以将旧值放回输入并阻止其他操作。

# java - ftp4j：client.login 返回 Unrecognized SSL 消息，明文连接？

> ID：15434338
> 
> 赞同：0
> 
> 时间：2013-03-15T13:59:10.690
> 
> 标签：java, ssl, ftp, ftps, ftp4j

这是我的代码

```
try{
    TrustManager[] trustManager = new TrustManager[] { new X509TrustManager() {
        public X509Certificate[] getAcceptedIssuers() { return null; }
        public void checkClientTrusted(X509Certificate[] certs, String authType) {}
        public void checkServerTrusted(X509Certificate[] certs, String authType) {}
    } };

    SSLContext sslContext = null;

    sslContext = SSLContext.getInstance("TLS");
    sslContext.init(null, trustManager, new SecureRandom());
    SSLSocketFactory sslSocketFactory = sslContext.getSocketFactory();
    FTPClient client = new FTPClient();

    client.setSSLSocketFactory(sslSocketFactory);
    client.setSecurity(FTPClient.SECURITY_FTPES);

    client.connect("xxx.xxx.xxx", 21);
    System.out.println("Connected (" + client.isConnected() + ") to host " + client.getHost() + ":" + client.getPort());
    client.login("xxxxx", "xxxxx");            
}catch (Exception e) {
    e.printStackTrace();
} 
```

什么时候运行返回

```
Connected (true) to host xxx.xxx.xxx:21 
```

然后在 client.login("xxxxx", "xxxxx"); 有例外

```
javax.net.ssl.SSLException: Unrecognized SSL message, plaintext connection? 
```

知道为什么会这样吗？

java版本是1.4.2，ftp4j版本是1.7.2

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T00:14:54.507

信息很明确。您正在与纯文本对等方谈论 SSL。该主机的 21 端口真的有 FTPS 服务器吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-01-27T22:04:16.430

请确保您使用正确的安全设置，例如 `FTPClient.SECURITY_FTPS`或`FTPClient.SECURITY_FTPES`

> FTPS（基于隐式 TLS/SSL 的 FTP）和 FTPES（基于显式 TLS/SSL 的 FTP）

# android - adb pull 在遇到 kmsg 时冻结

> ID：15434342
> 
> 赞同：1
> 
> 时间：2013-03-15T13:59:23.560
> 
> 标签：android, adb, boot

我正在尝试调试为什么我的 android 手机无法启动。当我运行时：

```
adb pull / e:\temp 
```

它冻结在

```
pull: /proc/kmsg -> e:\temp/proc/kmsg 
```

有什么方法可以阻止它在这里冻结或让“拉”绕过这个文件。

（我在手机位于恢复菜单时运行此命令，因为我无法让 adb 在任何其他状态下运行）。

三星 Galaxy GT-i5500，安卓 2.2，Windows 7。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T14:59:59.067

您可以转储日志使用

```
adb logcat -d > log.txt 
```

这将为您提供可用于调试问题的日志。

运行时消息可以通过

```
adb shell dmesg 
```

对于`kmsg`，可以尝试以下命令。

```
adb shell cat /proc/kmesg 
```

# excel - 没有循环的进度条

> ID：15434344
> 
> 赞同：2
> 
> 时间：2013-03-15T13:59:27.143
> 
> 标签：excel, vba

我想我已经在整个互联网上搜索了一个简单的进度条，但我找不到在功能/子完成后取得进展的进度条。

我将在下面的代码中演示我想要的。我在 VBA 方面的知识是基本的也可以制作这样的东西。

我有一个带有按钮的表单，当我单击该按钮时，他应该执行以下操作：

```
Sub program()

progressbarform.show

Call function1
"set progressbar to 20%"

Call funcion2
"set progressbar to 40%"

Call function3
"set progressbar to 100%"

"Unload progressbar form"

End Sub 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-15T14:28:48.883

您可以使用委托来完成这项工作。您的进度条与您执行功能 1、2 和 3 的形式不同，因此您应该尝试在进度条形式中执行。调用 form.Show 后，表单具有焦点，函数 1,2 和 3 在表单关闭之前不会运行。

在您的进度条表单中（假设它有一个标签和一个进度条控件）放置一个将更新您的进度条的函数：

```
Public Sub UpdateProgress(intProgress As Integer, Optional strMessage As String)

    If Not IsMissing(strMessage) Then
        lbl_Progress.Caption = strMessage
    End If
    pb_Progress.Value = intProgress
    Call Me.Repaint

End Sub 
```

然后，您可以从进度条表单中执行您的功能。您可以通过将调用它的表单设置为对象来公开您的函数或仅将函数 1,2 和 3 存储在进度条表单中来做到这一点。

```
Sub RunFunctions()

    UpdateProgress 0, "Starting functions"    

    UpdateProgress 10, "Begin function1"    
    Call function1
    UpdateProgress 30, "Finished function1"  

    UpdateProgress 50, "Begin function2"    
    Call function2
    UpdateProgress 70, "Finished function2"  

    UpdateProgress 90, "Begin function3"    
    Call function3
    UpdateProgress 100, "Finished function3"

    UpdateProgress 100, "Finished All Functions"

End Sub 
```

如果您需要帮助进行设置，请向我提问。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-15T14:59:49.973

```
Sub program()

UserForm1.ProgressBar1.Min = 0
UserForm1.ProgressBar1.Max = 100
UserForm1.ProgressBar1.Value = 0

UserForm1.Show vbModeless

Call function1
UserForm1.ProgressBar1.Value = 20

Call funcion2
UserForm1.ProgressBar1.Value = 40

Call function3
UserForm1.ProgressBar1.Value = 100

End Sub 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-15T14:10:47.763

您的示例代码将起作用。

当您执行您的子程序时，代码会按顺序运行。所以当`function1`被调用时，下面的代码在完成之前不会执行`function1`，所有其他函数也是如此。

最大的问题可能是在表单上添加进度条控件。我试过（很快），但由于图书馆没有注册，它不会让我添加一个。

您可以使用标准控件创建一个虚假的进度条。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-07-12T04:40:16.850

我不知道我的回答是否有帮助，但我在我的主 vba 中制作了进度条，我没有任何循环。希望这能有所帮助。

我认为为了使用用户表单，您必须先在此处放置一些东西来激活用户表单，所以 probar-----（第二个子的名称）在这里激活此用户表单。代码如下：

```
Private Sub UserForm_Activate()

progbar

End Sub 
```

第二个 sub 完全是空的，只有 sub 和 end sub，我把它放在模块 1 中，这是一个空白模块。

```
Sub probar()
' leave this macro blank.

End Sub 
```

最后，在您的主 vba 中，您可以选择百分比是多少以及要显示条形的时间，而不是循环，您只需自己更改百分比和条形长度，将代码放在这些百分比之间，这就是我让它工作。

```
Public Sub Mainprogram()

'your code Part 1 blah blah blah

UserForm1.Text.Caption = "10% Completed"
UserForm1.bar.Width = 20
UserForm1.Show vbModeless
DoEvents

'your code Part 2 blah blah blah

UserForm1.Text.Caption = "50 % Completed"
UserForm1.bar.Width = 100
Application.Wait (Now + TimeValue("0:00:01"))
DoEvents

'your code Part 3 blah blah blah

UserForm1.Text.Caption = "100 % Completed"
UserForm1.bar.Width = 200
Application.Wait (Now + TimeValue("0:00:01"))
DoEvents

End Sub 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-15T14:19:49.893

用 2 制作一个表格`Labels`，第一个是进度的颜色，另一个是 xx%

现在，在您的脚本进行的每一步中，都会更改两者的宽度，`Labels`因此左侧`Label`变得更宽，而右侧`Label`的左侧位置以相同数量的像素移动，并更新第二个标签的标题。当你在左边达到 100% 时，在右边保持足够的空间`Label`

# xml - XSLT 删除节点并将属性值转换为元素名称

> ID：15434347
> 
> 赞同：0
> 
> 时间：2013-03-15T13:59:38.523
> 
> 标签：xml, xslt

我有以下xml

```
<?xml version="1.0" encoding="UTF-8"?>
<response>
    <lst name="somename">
        <node1></node1>
        <node2></node2>
    </lst>
    <result name="somename" count="5">
        <doc>
            <str name="NodeA">ValueA</str>
            <str name="NodeB">ValueB</str>
            <str name="NodeC">ValueC</str>
        </doc>
        <doc>
            <str name="NodeA">ValueD</str>
            <str name="NodeB">ValueE</str>
            <str name="NodeC">ValueF</str>
        </doc>
    </result>
</response> 
```

我想转换成

```
<?xml version="1.0" encoding="UTF-8"?>
<response>
    <doc>
        <NodeA>ValueA</NodeA>
        <NodeB>ValueB</NodeB>
        <NodeC>ValueC</NodeC>
    </doc>
    <doc>
        <NodeA>ValueD</NodeA>
        <NodeB>ValueE</NodeB>
        <NodeC>ValueF</NodeC>
    </doc>
</response> 
```

如您所见，lst 节点已完全删除，属性值现在已成为节点。

首先，我使用此 xslt 代码删除了 lst 节点。

```
<?xml version="1.0" encoding="utf-8"?>
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
    <xsl:output method="xml" version="1.0" encoding="UTF-8" indent="yes" />
    <xsl:template match="node() | @*">
        <xsl:copy>
            <xsl:apply-templates select="node() | @*"/>
        </xsl:copy>
    </xsl:template>
    <xsl:template match="lst"/>
</xsl:stylesheet> 
```

这给了我这个

```
<?xml version="1.0" encoding="UTF-8"?>
<response>
    <result name="somename" count="5">
        <doc>
            <str name="NodeA">ValueA</str>
            <str name="NodeB">ValueB</str>
            <str name="NodeC">ValueC</str>
        </doc>
        <doc>
            <str name="NodeA">ValueD</str>
            <str name="NodeB">ValueE</str>
            <str name="NodeC">ValueF</str>
        </doc>
    </result>
</response> 
```

然后使用链接中的这个 xslt [链接] [Convert attribute value into element](https://stackoverflow.com/questions/4733880/convert-attribute-value-into-element)

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
    <xsl:output method="xml" version="1.0" encoding="UTF-8" indent="yes" />
    <xsl:template match="response/result/doc">
        <xsl:copy>
            <xsl:apply-templates select="@* | node()" />
        </xsl:copy>
    </xsl:template>
    <xsl:template match="token">
        <xsl:element name="{@name}">
            <xsl:apply-templates />
        </xsl:element>
    </xsl:template>
</xsl:stylesheet> 
```

但这没有帮助。它给了我这个。

```
<?xml version="1.0" encoding="utf-8"?>
<doc>ValueAValueBValueC</doc>
<doc>ValueDValueEValueF</doc> 
```

请帮助我完成将属性值转换为节点的第二部分。是否有可能让一个 xslt 做这两件事？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T14:20:48.560

您可以在一个非常接近您当前的 XSLT 中实现您的所有目标：

```
<?xml version="1.0" encoding="utf-8"?>
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
    <xsl:output method="xml" version="1.0" encoding="UTF-8" indent="yes" />
    <xsl:strip-space elements="*" />

    <!-- copy everything as-is apart from exceptions below -->
    <xsl:template match="node() | @*">
        <xsl:copy>
            <xsl:apply-templates select="node() | @*"/>
        </xsl:copy>
    </xsl:template>

    <!-- delete lst -->
    <xsl:template match="lst"/>

    <!-- strip out the result element but still include its children -->
    <xsl:template match="result">
      <xsl:apply-templates />
    </xsl:template>

    <!-- convert str name="X" to X -->
    <xsl:template match="str">
      <xsl:element name="{@name}">
        <xsl:apply-templates />
      </xsl:element>
    </xsl:template>
</xsl:stylesheet> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T14:04:58.483

你可以以此为基础

XSL如何复制除称为注释的元素之外的所有元素

```
<?xml version="1.0"?>
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
    xmlns:xsd="http://www.w3.org/2001/XMLSchema" version="1.0">

    <xsl:template match="*|/">
        <xsl:copy>
            <xsl:copy-of select="@*"/>
            <xsl:apply-templates/>
        </xsl:copy>
    </xsl:template>

    <!-- copy xsd:annotation and children, but don't copy the attributes -->
   <xsl:template match="xsd:annotation">

        <xsd:annotation>
            <xsl:copy-of select="*"/>
        </xsd:annotation>

    </xsl:template> 

</xsl:stylesheet> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-15T14:25:39.447

这将做到：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
  <xsl:output method="xml" version="1.0" encoding="UTF-8" indent="yes" />
  <xsl:template match="node()">
    <xsl:copy>
      <xsl:apply-templates />
    </xsl:copy>
  </xsl:template>

  <xsl:template match="lst"/>

  <xsl:template match="str[@name]">
    <xsl:element name="{@name}">
      <xsl:apply-templates  />
    </xsl:element>
  </xsl:template>
</xsl:stylesheet> 
```

在您的示例输入上运行时，这会产生：

```
<response>
  <result>
    <doc>
      <NodeA>ValueA</NodeA>
      <NodeB>ValueB</NodeB>
      <NodeC>ValueC</NodeC>
    </doc>
    <doc>
      <NodeA>ValueD</NodeA>
      <NodeB>ValueE</NodeB>
      <NodeC>ValueF</NodeC>
    </doc>
  </result>
</response> 
```

# ios - 为什么 Xcode 在这里“期待一个标识符”？

> ID：15434357
> 
> 赞同：1
> 
> 时间：2013-03-15T14:00:14.057
> 
> 标签：ios, objective-c, xcode, ios5, ios6

```
destination.wordsPerMinute = [NSNumber numberWithInt:(int)[self.wpmSlider.value]]; 
```

我正在访问我正在使用的视图控制器的 wordsPerMinute 属性（一个 NSNumber）并将其设置为从 int 转换的 NSNumber，这是一个作为 int 的浮点型转换。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-15T14:02:32.407

您不需要 . 周围的括号`[self.wpmSlider.value]`。

或使用

`[self.wpmSlider value]`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T14:02:35.640

删除 [] 括号`self.wpmSlider.value`
编译器在这里需要一个方法名称作为标识符（如**numberWIthInt:**在外部方法调用中）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-15T14:07:23.707

您可以使用（在新的编译器中）

```
destination.wordsPerMinute = @(self.wpmSlider.value);// [NSNumber numberWithInt:(int)[self.wpmSlider.value]]; 
```

如果要将其转换为整数值，则：

```
destination.wordsPerMinute = @((int)self.wpmSlider.value); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-15T14:11:53.240

使用新的编译器（XCode 4.5+）：

```
destination.wordsPerMinute = @((int)self.wpmSlider.value); 
```

除此以外：

```
destination.wordsPerMinute = [NSNumber numberWithInt:self.wpmSlider.value]; 
```

# php - 在 PHP 函数之间传递变量

> ID：15434360
> 
> 赞同：0
> 
> 时间：2013-03-15T14:00:28.487
> 
> 标签：php

我有以下功能：

```
class TariffFareController {

public static function checkRunin($fieldPickup) {

    $runInThreshold = 5;
    $fieldDestination = 6;

    if ($fieldPickup > $runInThreshold && $fieldDestination > $runInThreshold)

    {

        if ($fieldPickup > $fieldDestination)

        {

            $distance = $fieldPickup - $runInThreshold;

        } else {

            $distance = $fieldDestination - $runInThreshold;

        }

       }
} 
```

我想传递`$distance`给这个函数：-

```
private static function getFare($int_terminate) {

    //CODE
    //eg// if($distance > 5) {

        //do something

    }

} 
```

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-15T14:01:59.583

`return`第一个函数的值：

```
public static function checkRunin($fieldPickup) {
    $runInThreshold = 5;
    $fieldDestination = 6;

    if ($fieldPickup > $runInThreshold && $fieldDestination > $runInThreshold)
    {
        if ($fieldPickup > $fieldDestination)
        {
            $distance = $fieldPickup - $runInThreshold;
        } else {
            $distance = $fieldDestination - $runInThreshold;
        }
    }
    return $distance;
}

// Get $distance from checkRunin()
$distance = $obj->checkRunin($fieldPickup);
// Pass $distance as a parameter
$obj->getFare($distance); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-18T16:06:29.333

当你说它不起作用时......它基本上是因为`$diffrent`没有正确声明所以你遇到`scope`了问题

**我的假设**

*   `checkRunin`和都是`getFare`同一个类的方法`TariffFareController`
*   `$int_terminate`不同于`$distance`

**从你的班级**

*   `$distance`未声明为`static`
*   `getFare`正在尝试访问`$distance`尚未声明的

**简单的解决方案**

```
class TariffFareController {
    private static $distance = 0;

    public static function checkRunin($fieldPickup) {
        $runInThreshold = 5;
        $fieldDestination = 6;
        if ($fieldPickup > $runInThreshold && $fieldDestination > $runInThreshold) {
            if ($fieldPickup > $fieldDestination) {
                self::$distance = $fieldPickup - $runInThreshold;
            } else {
                self::$distance = $fieldDestination - $runInThreshold;
            }
        }
        printf("self:\$distance = %d ; // Called %s :\n", self::$distance, __METHOD__);
    }

    public static function getFare($int_terminate) {
        printf("self:\$distance = %d ; // Called %s :\n", self::$distance, __METHOD__);
    }
}

TariffFareController::checkRunin(10);
TariffFareController::getFare(2); 
```

**输出**

```
self:$distance = 5 ; // Called TariffFareController::checkRunin :
self:$distance = 5 ; // Called TariffFareController::getFare : 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-18T10:06:29.593

```
class TariffFareController {

public static $distance = 0;
public static function checkRunin($fieldPickup) {

$runInThreshold = 5;
$fieldDestination = 6;

if ($fieldPickup > $runInThreshold && $fieldDestination > $runInThreshold)

{

    if ($fieldPickup > $fieldDestination)

    {

        self::$distance = $fieldPickup - $runInThreshold;

    } else {

        self::$distance = $fieldDestination - $runInThreshold;

    }

   }
} 
```

然后

```
private static function getFare($int_terminate) {

//CODE
//eg// if(self::$distance > 5) {

    //do something

}

} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-21T16:19:33.927

`public static function checkRunin($fieldPickup) {`
`$runInThreshold = 5;`
`$fieldDestination = 6;`

```
if ($fieldPickup > $runInThreshold && $fieldDestination > $runInThreshold)
{
    if ($fieldPickup > $fieldDestination)
    {
        $distance = $fieldPickup - $runInThreshold;
    } else {
        $distance = $fieldDestination - $runInThreshold;
    }
}
return $distance; 
```

`}`

`// Get $distance from checkRunin()`
`$distance = $obj::checkRunin($fieldPickup);`
`// Pass $distance as a parameter`
`$obj::getFare($distance);`

这就是@John Conde 的答案，
只是不要忘记使用静态作用域::

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-22T05:25:19.817

我不知道为什么上面的答案对你不起作用。但是试试这个想法
class someThing { protected $distance; 受保护的函数 initDistance() { $this->distance = 5; } protected function useDistance(){ if($this->distance < 5) { //做任何事情 } } $obj = new someThing(); $obj->initDistance(); $obj->useDistance();

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2013-03-18T14:49:10.787

不能按如下方式使用会话：-

```
session_start();

public static function checkRunin($fieldPickup) {

    $runInThreshold = 5;
    $fieldDestination = 6;
    $_SESSION['runin_distance'] = 0;

    if ($fieldPickup > $runInThreshold && $fieldDestination > $runInThreshold) {

        if ($fieldPickup > $fieldDestination) {

            $_SESSION['runin_distance'] = $fieldPickup - $runInThreshold;

        } else {

            $_SESSION['runin_distance'] = $fieldDestination - $runInThreshold;

        }

    }

} 
```

进而...

```
private static function getFare($int_terminate) {

    if($_SESSION['runin_distance'] > 5) {

    //do something

    }

} 
```

* * *

## 回答 #7

> 赞同：-3
> 
> 时间：2013-03-15T14:03:02.420

将距离创建为全局变量，在 checkRunIn 中设置它，然后在 getFare 中需要时访问它

# boost-asio - ICMP IPv6 数据包的最大大小

> ID：15434362
> 
> 赞同：2
> 
> 时间：2013-03-15T14:00:35.327
> 
> 标签：boost-asio, ipv6, ping, icmp

参考[这个](https://stackoverflow.com/questions/9449837/maximum-legal-size-of-icmp-echo-packet)问题和[ASIO libary](http://think-async.com/)，我想知道 ICMP v6 回复数据包的最大大小是多少。我正在使用 ASIO 库来侦听和接收 ICMPv6 数据包，但我不知道要使用什么大小的缓冲区来防止缓冲区溢出。我对支持 IPv6 的扩展标头感到困惑。

防爆代码：

```
asio::streambuf replyBuffer;
replyBuffer.consume(replyBuffer.size());
size_t length = icmpV6Socket->receive(replyBuffer.prepare(65536) ); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-15T20:10:16.577

[Boost.Asio 的缓冲区](http://www.boost.org/doc/libs/1_53_0/doc/html/boost_asio/overview/core/buffers.html)的一大特点是它们提供了防止缓冲区溢出的保护。Boost.Asio 的缓冲区将实际内存和大小的句柄配对在一起。因此，只要正确设置或推导出大小，Boost.Asio 操作就不会产生缓冲区溢出。

尽管如此，ICMPv6 大小的详细信息如下。 [IPv6 Header](https://www.rfc-editor.org/rfc/rfc2460#page-4)为 40 字节，预留 2 字节表示 Payload Length。因此，IPv6 的最大有效负载（包括扩展标头）为 65,535。这与 IPv4 不同，其中总长度包括标头本身。[ICMPv6 Echo Reply 标头](https://www.rfc-editor.org/rfc/rfc4443#section-4.2)为8 个字节。

所以：

*   IPv6 数据包的最大长度为 65,575 字节（最大有效负载为 65,535 + 标头为 40）。
*   最大 IPv6 有效负载为 65,535 字节。
*   ICMPv6 Echo Reply 正文的最大长度为 65,527 字节。（最大有效载荷为 65,535 - ICMPv6 Echo Reply Header of 8）。

# python - pybabel 配置文件中的黑名单 jinja2 自定义标签

> ID：15434364
> 
> 赞同：2
> 
> 时间：2013-03-15T14:00:38.613
> 
> 标签：python, internationalization, jinja2, python-babel

我正在使用 pybabel 翻译模板中的措辞。模板由 jinja2 处理。我创建了一个 jinja2 扩展来自动生成我的面包屑。但是，现在不可能用 babel 提取措辞：

```
pybabel extract -F /PROJECT/PATH/babel.conf /PROJECT/PATH 
```

结果是：

```
TemplateSyntaxError: Encountered unknown tag 'breadcrumbs'. Jinja was looking for the following tags: 'endblock'. The innermost block that needs to be closed is 'block'. 
```

（我调试了通天蛋）。

我知道问题的根源：从命令行提取措辞时，我的面包屑扩展未加载到 babel 中。有人知道如何加载它或如何在 babel conf 文件中将标签声明为黑名单吗？

非常感谢！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T15:55:12.100

在 babel.conf 的 [jinja2:] 部分填写“扩展”选项。

在我的项目中，我使用这个 babel.conf

```
[jinja2: **.tex]
encoding = utf-8
block_start_string = <!!
block_end_string = !!>
variable_start_string = <!
variable_end_string = !>
comment_start_string = <!!!
comment_end_string = !!!>
extensions= jinja2.ext.i18n, jinja2.ext.do 
```

# php - 导入命名空间与在 PHP 中包含文件

> ID：15434366
> 
> 赞同：15
> 
> 时间：2013-03-15T14:00:44.123
> 
> 标签：php, namespaces

我从 PHP 4 开始构建我的代码库。我习惯于`require_once`导入类。现在使用 PHP 5.3，我遇到了定义名称空间并导入它们。

我想将我的源文件更改为使用 importing (`use`语句) 而不是使用`require_once`. 这是正确的决定吗，我不确定。

我想这会很容易。在类文件的顶部定义命名空间并对使用它们的其他文件进行搜索和替换（替换`require_once`为`use`）。在实践中可能会出现什么问题？

会有性能提升吗？在包含文件时，很明显 PHP 如何找到文件。但是在导入命名空间时，它并不那么明显。搜索命名空间并通过 PHP 对其进行索引是否存在性能损失？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2013-03-15T14:24:59.820

`use`并且`require_once`是完全不同的东西。`use`根本没有进行任何文件导入。`use`只是让你的生活更轻松。`Full\Path\To\Class`而不是每次都写，你可以做

```
use Full\Path\To\Class

$bar = new Class(); 
```

您仍然有责任包含正确的文件。

您可以依赖[PHP 自动加载类](http://php.net/manual/en/language.oop5.autoload.php)，而不是手动加载所有文件。

您可以使用[Composer](http://getcomposer.org/)或框架，如[Symfony 2](http://symfony.com/)或[Zend2](http://framework.zend.com/)，它们会为您处理所有自动加载的内容。

迁移现有代码以使用自动加载和`use`语句而不是`include_once`可能非常耗时。很可能没有搜索和替换解决方案。

# jquery - 如何使用窗口位置设置 div 的样式

> ID：15434370
> 
> 赞同：-1
> 
> 时间：2013-03-15T14:00:49.267
> 
> 标签：jquery, css

我有这个代码

```
<div onclick="location.href='www.example.com'">
  <!--Content Here-->
</div>
<div>
  <!--Content Here-->
</div> 
```

我知道我可以为`div`with使用内联 CSS 样式`location.href`来做类似的事情

```
<div onclick="location.href='www.example.com';" style="cursor:pointer;">
  <!--Content Here-->
</div> 
```

虽然我宁愿不使用这种方法，因为内联样式以后更改起来很糟糕

我还可以添加一个`div`用于样式的类，例如

```
<div class="location" onclick="location.href='www.example.com';">
  <!--Content Here-->
</div> 
```

```
.location {cursor:pointer;} 
```

但我想知道是否有某种方法可以使用 CSS 仅`div`针对`location.href`. 我不能使用类似的东西`div:first-child`，因为我想使用外部样式表来设置这些样式，所以必须有一种方法只针对带有`location.href`. 如果不是纯粹的 CSS，有没有办法使用 jQuery 来做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-15T14:03:51.507

**编辑**

这是一个 jquery 解决方案，以为您正在寻找它。

当然，您可以查找属性及其值：

```
$('div[onclick^="location.href"]').css('color', 'red'); 
```

查找属性`onlick`以开头的 div`location.href`

演示：http: [//jsfiddle.net/7ME5a/](http://jsfiddle.net/7ME5a/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T14:02:40.117

免责声明：我确定无论您在做什么，这都不是最好的方法。

解决方案：

```
div[onclick^="location.href"] {cursor: pointer;} 
```

更好的解决方案是将类留在元素上，并使用 jQuery 绑定单击处理程序：

```
$('div.location').click(function () {
    location.href = ...;
}); 
```

你的CSS仍然是：

```
div.location {cursor: pointer; } 
```

# php - 无法上传大于 1 mb 的 .pdf 文件 ----(ERROR::mysql server has gone away)

> ID：15434377
> 
> 赞同：2
> 
> 时间：2013-03-15T14:01:06.177
> 
> 标签：php, mysql

我已经编写了一个 php 代码来将 .pdf 文件上传到我的数据库中。该代码适用于所有小于 1 mb 的 pdf。但每当我尝试上传**大于 1 mb**的文件时，**它都无法上传**并**抛出错误 mysql 服务器已消失。**

**注意:: 我已通过以下更改更改了我的 php.ini**

```
post_max_size=128M
upload_max_filesize=128M
memory_limit = 128M
max_execution_time = 300
max_input_time = 300 
```

**但这并没有解决我的问题。问题仍然存在**“上传失败并抛出错误mysql服务器已消失。” 我的 PHP 代码是 ::

```
if(isset( $_POST['save']) and $_POST['save'] == "save")
{
  ini_set('default_socket_timeout', 1500);
  include_once $_SERVER['DOCUMENT_ROOT'].'/include/db.inc.php' ;
  if (!is_uploaded_file($_FILES['upload']['tmp_name']))
  {
    echo 'There was no file uploaded!';
    exit();
  }
  /*NOW I HAVE WRITTEN THE PHP CODE TO INSERT THE FILE INTO MY DATABASE.WHAT I CAN
  ASSURE YOU THIS PART IS PERFECT BECAUSE THE CODE IS SUCESSFUL ALL OTHER CASES
  WHICH ARE LESS THAN 1 MB IN SIZE*/ 
```

**注意：：我在发送查询时也使用了重新连接。所以没有连接问题**

**编辑**`max_allowed_packet`我的 my.ini 中没有任何东西

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-15T14:08:18.853

我相信您还必须配置 MySQL 服务器（Windows 上的 my.ini）确保有：

```
[mysqld]
    max_allowed_packet=16M 
```

在那里 - 或任何足够高的数字

还要注意这里解决了同样的问题：[how to change max allowed packet size](https://stackoverflow.com/questions/8062496/how-to-change-max-allowed-packet-size)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T14:09:50.413

有很多事情会导致这种情况，你可以在这里得到一个很好的概述：http: [//dev.mysql.com/doc/refman/5.1/en/gone-away.html](http://dev.mysql.com/doc/refman/5.1/en/gone-away.html)

你可以先试试这个：

```
ini_set('mysql.connect_timeout', 300);
ini_set('default_socket_timeout', 300); 
```

# ckeditor - CKEditor 4 - 自定义工具栏中的语法高亮

> ID：15434379
> 
> 赞同：2
> 
> 时间：2013-03-15T14:01:08.617
> 
> 标签：ckeditor

*这也发布在（[http://ckeditor.com/forums/Support/syntaxhighlight-in-customised-toolbar](http://ckeditor.com/forums/Support/syntaxhighlight-in-customised-toolbar)）*

我已经下载了 CKEditor 的完整版本并添加了 Syntaxhighlighter 接口（来自[http://ckeditor.com/addon/syntaxhighlight](http://ckeditor.com/addon/syntaxhighlight)）。我在我网站的不同地方使用编辑器用于不同的用途，因此希望能够为每次使用设置自定义工具栏。使用过 CKEditor 3（和 FCKEditor！）后，我习惯于在 config.js 文件中设置命名工具栏，但无法显示 Syntaxhighlighter 界面按钮。

我的 config.toolbar 代码如下（注意“插入”工具栏中的“代码”按钮），我们将不胜感激！

```
config.toolbar = [
    { name: 'document', groups: [ 'mode', 'document', 'doctools' ], items: [ 'Source', '-', 'Templates'] },
    { name: 'tools', items: [ 'Maximize', 'ShowBlocks' ] },
    { name: 'clipboard', groups: [ 'clipboard', 'undo' ], items: [ 'Paste', 'PasteText', 'PasteFromWord' ] },
    { name: 'editing', groups: [ 'find', 'selection', 'spellchecker' ], items: [ 'SelectAll' ] },
    { name: 'links', items: [ 'Link', 'Unlink', 'Anchor' ] },
    { name: 'insert', items: [ 'Image', 'Table', 'HorizontalRule', 'SpecialChar', 'Code' ] },
    '/',
    { name: 'colors', items: [ 'TextColor', 'BGColor' ] },
    { name: 'basicstyles', groups: [ 'basicstyles', 'cleanup' ], items: [ 'Bold', 'Italic', 'Underline', 'Strike', 'Subscript', 'Superscript', '-', 'RemoveFormat' ] },
    { name: 'paragraph', groups: [ 'list', 'indent', 'blocks', 'align', 'bidi' ], items: [ 'NumberedList', 'BulletedList', '-', 'Outdent', 'Indent', '-', 'Blockquote', 'CreateDiv', '-', 'JustifyLeft', 'JustifyCenter', 'JustifyRight', 'JustifyBlock' ] },
    '/',
    { name: 'styles', items: [ 'Styles', 'Format', 'Font', 'FontSize' ] },
    { name: 'others', items: [ '-' ] },
]; 
```

请帮忙...

# php - PHP - 允许第 3 方开发人员创建应用程序

> ID：15434381
> 
> 赞同：0
> 
> 时间：2013-03-15T14:01:13.300
> 
> 标签：php, jquery, html

我目前正在开发一个 Web 应用程序，一切都很好，但现在我被卡住了。无论如何，您是否可以使用 PHP 来允许第 3 方开发人员为我的 Web 应用程序本身创建一个插件/应用程序.. 把它想象成一个 SDK，您可以在其中允许人们为您的 Web 应用程序创建插件... plz帮助 ！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T14:05:48.930

看看[Symfony 2 框架](http://symfony.com/)。Symfony 的插件概念称为捆绑包。您甚至可以使用[Composer](http://getcomposer.org/)来确保您的所有捆绑包（=plugins）都具有所需的版本。

# php - Magento ：从发票 incrementId 获取发票 id

> ID：15434384
> 
> 赞同：1
> 
> 时间：2013-03-15T14:01:22.953
> 
> 标签：php, magento

我正在创建一个 magento 扩展，我希望从发票 incrementId 中获取发票 ID

我希望发票 id 为 1,2,3.... 从增量 id 就像 100000001,100000002,100000003 ....

这是我用来生成发票的代码。

```
$invoiceId = Mage::getModel('sales/order_invoice_api')
    ->create($order->getIncrementId(), array(), 'Invoice Created', true, true); 
```

它给了我 invoiceId 为 100000001,100000002,100000003。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T14:30:11.063

该`create`方法将返回`$invoice->getIncrementId();`

见/app/code/core/Mage/Sales/Model/Order/Invoice/Api.php

要获取发票 id，您可以按增量 id 加载发票

```
$invoiceIncrementId = Mage::getModel('sales/order_invoice_api')->create($order->getIncrementId(), array(), 'Invoice Created', true, true);

$invoiceId = Mage::getModel("sales/order_invoice")->loadByIncrementId($invoiceIncrementId)->getId(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T14:26:09.047

尝试这个

```
$incrementId = '100000001';

$invoice = Mage::getModel('sales/order_invoice')->loadByIncrementId($incrementId);

$invoiceId = $invoice->getId(); 
```

# c# - 通过反射访问TextSegment的值

> ID：15434393
> 
> 赞同：3
> 
> 时间：2013-03-15T14:01:44.757
> 
> 标签：c#, wpf, reflection

我在 Object 类型的对象中有一个“System.Windows.Documents.TextSegment”类型的对象。我不能在我的代码中使用 TextSegment-Struct，因为它是 .net 框架的内部代码。

我想要做的是，访问 TextSegment 类型对象中的 Start- 和 End-Property。我使用以下代码通过反射尝试了它：

```
// This object is of type TextSegment
object textSegment = segments[0];
FieldInfo info = textSegment.GetType().GetField("_start", BindingFlags.IgnoreCase | 
   BindingFlags.Public | BindingFlags.NonPublic | BindingFlags.Instance| BindingFlags.Static; 
```

现在我不知道如何访问 FieldInfo 的值。

我尝试使用以下代码：

```
object value1 = info.GetValue(segments[0]);
object value2 = info.GetValue(null); 
```

但没有任何效果。

如何获取 TextSegment 的值？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T15:50:16.723

该代码敲响[了警钟](https://stackoverflow.com/q/15292203/385995)；）...

您有一个错字（BindingFlags 末尾缺少括号），并且在 BindingFlags 中，您只需要 Instance 和 NonPublic，但我找不到真正的问题。

也许您需要提供更多代码，因为我已经检查过了，这对我来说很好：

![在此处输入图像描述](../Images/c26920d42920eb395ef917154f66a03f.png)

您是否检查过该值实际上不为空？

![在此处输入图像描述](../Images/66d45a567881fbc8e3a6346fe909e7d7.png)

# java - Oracle 11g 中超出的最大进程数

> ID：15434394
> 
> 赞同：3
> 
> 时间：2013-03-15T14:01:47.653
> 
> 标签：java, oracle, sharepoint, weblogic

我收到超过最大进程数（150）的错误消息。所以我将它增加到 1000 并重新启动服务器。但是不到一个小时还是满了。

当我查看会话表时，我看到了许多由 SYSTEM 创建的非活动会话，比如其中的 950 个。

我不知道为什么会创建这些会话，而且我不能一直杀死所有这些会话。

我们团队中有 4 人，其中两人使用 sharepoint 2013 并与 wcf 连接。其他两个使用 weblogic，每个都有 200 个连接池限制。所有团队成员都在使用 toad。

有谁知道如何停止创建这些非活动会话。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-08-19T18:00:54.817

我在 W2K8-R2 上运行 Oracle 11gR2 时遇到了这个问题，结果证明是 dbconsole 进程一遍又一遍地尝试通过 SYSMAN 连接到不存在的 Oracle Enterprise Manager (OEM) 实例。如果您不使用 OEM，请禁用 Windows 服务中的“dbconsole”服务。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T14:57:58.430

尝试执行以下 SQL

`select USERNAME,ACCOUNT_STATUS from dba_users where username='SYSMAN';`

检查帐户状态是否被锁定。如果是，则可能是系统管理员密码问题，需要在数据库和企业管理器中重新设置并解锁帐户。

# sql - 查找 varchar2() 中的所有匹配项

> ID：15434396
> 
> 赞同：0
> 
> 时间：2013-03-15T14:01:52.640
> 
> 标签：sql, regex, oracle

我有一列`varchar2`包含以下数据：`....[A1]...[A2]...` 我想取出所有封装的数据，这些数据`[]`以字母开头，可以有一个或两个数字，即：`[B1]`，`[B23]`。

所以我想要这样的东西：“WHERE 列就像`'[__]' OR column is like '[___]'`但`_`不是任何值，而是字母或数字。

是否可以以某种方式存储它们以备后用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T16:24:29.230

好问题！[这是一个 Fiddle](http://www.sqlfiddle.com/#!4/bd65d/1)，展示了如何将匹配项查询到结果集中。

如果 Fiddle 中的查询没有意义，这里有很长的解释:)

我正在使用一个名为`RegEx_Test`column的表`MyVal`。这是表格的内容：

```
MyVal
------------------------------
[A1][abc][B23][D123]a33[bx5]
[Z15][ax0][B0][F13]R3
[X215][A3A][J99]F33F33G24[43][R3]
[Z99][c1][F3][d33]3x24[Y3][f13]
[9a][D41][Q39][XX12]B27[T03][J12] 
```

你的正则表达式是这样的：`\[[[:alpha:]][[:digit:]]{1,2}\]`. `:alpha:`除了 POSIX和指标外，它与其他答案相同，在`:digit:`国际字符集的情况下更安全。

首先，您需要知道任何一行的最大匹配数。用于`REGEXP_COUNT`此：

```
SELECT MAX(REGEXP_COUNT(MyVal, '\[[[:alpha:]][[:digit:]]{1,2}\]'))
  FROM Regex_Test

MAX(REGEXP_COUNT(My...
----------------------
                     6 
```

使用该最大计数来获取一个“计数器”表（`SELECT ... FROM DUAL`如下所示），并将计数器表与一个查询交叉连接，该查询将使用`REGEXP_SUBSTR`. `REGEXP_SUBSTR`有一个“发生”参数，它将使用`Counter`：

```
SELECT
  MyVal,
  Counter,
  REGEXP_SUBSTR(MyVal, '\[[[:alpha:]][[:digit:]]{1,2}\]', 1, Counter) Matched
FROM Regex_Test
CROSS JOIN (
   SELECT LEVEL Counter
   FROM DUAL
   CONNECT BY LEVEL <= (
     SELECT MAX(REGEXP_COUNT(MyVal, '\[[[:alpha:]][[:digit:]]{1,2}\]'))
     FROM Regex_Test)) Counters 
```

这是针对我的表运行的示例（部分结果）：

```
MyVal                              Counter Matched
---------------------------------- ------- -------
[9a][D41][Q39][XX12]B27[T03][J12]        1 [D41]
[9a][D41][Q39][XX12]B27[T03][J12]        2 [Q39]
[9a][D41][Q39][XX12]B27[T03][J12]        3 [T03]
[9a][D41][Q39][XX12]B27[T03][J12]        4 [J12]
[9a][D41][Q39][XX12]B27[T03][J12]        5
[9a][D41][Q39][XX12]B27[T03][J12]        6
[A1][abc][B23][D123]a33[bx5]             1 [A1]
[A1][abc][B23][D123]a33[bx5]             2 [B23]
[A1][abc][B23][D123]a33[bx5]             3
... and so on - total is 30 rows 
```

此时，您有一个单独匹配的结果集，加上一行少于最大匹配的空值。比赛仍然有周围的括号。用一个外部查询将整个内容包围起来，该查询将过滤掉空值并删除括号，您就有了最终列表：

```
SELECT SUBSTR(Matched, 2, LENGTH(Matched)-2) FROM (
  SELECT
    MyVal,
    Counter,
    REGEXP_SUBSTR(MyVal, '\[[[:alpha:]][[:digit:]]{1,2}\]', 1, Counter) Matched
  FROM Regex_Test
  CROSS JOIN (
     SELECT LEVEL Counter
     FROM DUAL
     CONNECT BY LEVEL <= (
       SELECT MAX(REGEXP_COUNT(MyVal, '\[[[:alpha:]][[:digit:]]{1,2}\]'))
       FROM Regex_Test)) Counters
) WHERE Matched IS NOT NULL 
```

这是 Fiddle 上的查询，它可以在另一个查询中使用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T14:12:51.287

您可以使用[`REGEXP_LIKE`](http://docs.oracle.com/cd/B14117_01/server.101/b10759/conditions018.htm)来查找与您的正则表达式匹配的值：

```
[...] WHERE REGEXP(col_name, '\[[A-Z][0-9]{1,2}\]'); 
```

# django - 根据外键的属性过滤 django admin changeform 中的外键选择

> ID：15434397
> 
> 赞同：2
> 
> 时间：2013-03-15T14:01:53.250
> 
> 标签：django, foreign-keys, django-admin, modelform

我有一些看起来与此相似的模型（大大简化）：

```
class Author(models.Model):
    name = models.CharField(max_length = 50)
    country_of_birth = models.CharField(max_length = 20)

class Book(models.Model):
    author = models.ForeignKey(Author)
    subject = models.CharField(max_length = 50) 
```

在自动生成的图书管理页面的作者下拉列表中，我有一个所有作者的列表。

但是，我希望能够首先选择一个 country_of_birth 来预过滤可能作者的查询集。我认为这首先需要向不与图书模型绑定的图书管理员[添加](https://web.archive.org/web/20130403060642/http://www.stereoplex.com/blog/filtering-dropdown-lists-in-the-django-admin/)另一个*字段*....

# cookies - 负载均衡时 CookieUtil.SetEncryptedCookie 是否有效？

> ID：15434404
> 
> 赞同：0
> 
> 时间：2013-03-15T14:02:11.053
> 
> 标签：cookies, azure, web-config, azure-web-roles

我正在使用负载平衡配置中的两个 Web 服务器将 .NET 应用程序迁移到 Azure。目前，当用户登录应用程序时，我们会设置一个 cookie 来存储他们的公司名称。

```
CookieUtil.SetEncryptedCookie("CONAME", companyName); 
```

我的问题是这些 cookie 会在两个 Web 服务器上持续存在吗？没有应用进一步的配置？.NET 是否像使用表单身份验证一样使用机器密钥来加密 cookie？如果是这种情况，我们是否需要在 web.config 中进行设置？

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T16:18:22.807

Azure 将在启动期间在所有实例上设置相同的机器密钥，除非你在 web.config 中明确设置了自己的机器密钥。

# javascript - Extjs 4 中的语法错误无效的属性 id

> ID：15434407
> 
> 赞同：0
> 
> 时间：2013-03-15T14:02:25.917
> 
> 标签：javascript, extjs, extjs4, extjs4.1, extjs-mvc

我正在尝试从 Ext app.js 加载控制器我的代码是

```
var controller = this.getController('member.Member'); 
```

这里 Member.js 是 Extjs 控制器文件夹下我的成员文件夹中的一个控制器。

但是在加载控制器时，上面的代码行出现错误。错误是：

```
SyntaxError: invalid property id [Break On This Error]  

{

ext-debug.js (line 601, col 8) 
```

有谁知道这个错误是怎么回事。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T14:40:27.410

我发现了错误。我的控制器上存在大括号语法错误。谢谢大家。

# html - 如何在 Google Apps 脚本中突出显示电子邮件 html 文本？

> ID：15434408
> 
> 赞同：0
> 
> 时间：2013-03-15T14:02:26.853
> 
> 标签：html, google-apps-script

填写完谷歌表格后，我正在使用脚本通过电子邮件发送确认信息。我在电子邮件中使用 HTML 并希望以黄色突出显示几行。我正在使用下面的代码，但收到一条错误消息，指出该行缺少“;” 在声明之前。有任何想法吗？

```
 + "<h2><b><span style="background-color:yellow;">Content</span></b></h2> " + "<br/>" 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T14:08:52.643

您需要使用反斜杠转义引号或使用撇号代替 HTML 属性。

`<br>`此外，可能没有理由像你一样打破标签。

```
+ "<h2><b><span style='background-color:yellow;'>Content</span></b></h2> <br/>" 
```

# ruby-on-rails - databasedotcom gem 分配规则

> ID：15434412
> 
> 赞同：1
> 
> 时间：2013-03-15T14:02:39.163
> 
> 标签：ruby-on-rails, salesforce, databasedotcom-gem

我正在使用 databasedotcom gem 在我们的 Web 应用程序上生成 Salesforce Leads。

我遇到的问题是，当以这种方式创建潜在客户时，分配规则会正确触发并将潜在客户分配给所需的用户，但是，不会向分配的用户发送电子邮件。

[我在这里](http://help.salesforce.com/apex/HTViewSolution?id=000003781&language=en_US)找到了 Salesforce 对此问题的评论。

> 通过 API 创建线索或案例时，API 调用需要包括：
> 
> *   “AssignmentRuleHeader”触发分配规则。
>     
>     
> *   将“triggerUserEmail”设置为“true”的“EmailHeader”以生成分配通知电子邮件。
>     
>     
> 
> 如果指定了 AssignmentRuleHeader 而未指定 EmailHeader，则将分配记录，但不会向分配的记录所有者发送分配通知。

我想知道是否有任何方法可以通过 databasedotcom gem 或使用 Rails 中的 REST api 设置 AssignmentRulesHeader 和/或 EmailHeader。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T16:22:43.267

根据这些链接：

*   [https://appexchange.salesforce.com/ideaView?id=08730000000jjoPAAQ](https://appexchange.salesforce.com/ideaView?id=08730000000jjoPAAQ)
*   [http://boards.developerforce.com/t5/APIs-and-Integration/REST-API-bypasses-Lead-assignment-rules-Help/td-p/330135](http://boards.developerforce.com/t5/APIs-and-Integration/REST-API-bypasses-Lead-assignment-rules-Help/td-p/330135)
*   [http://forums.sforce.com/t5/Apex-Code-Development/REST-API-Cases-PATCH-trigger-Assignment-Rules/td-p/416393#M75241](http://forums.sforce.com/t5/Apex-Code-Development/REST-API-Cases-PATCH-trigger-Assignment-Rules/td-p/416393#M75241)

对于 REST API 调用，潜在客户分配始终处于启用状态，您无法对其进行设置。

如果分配未触发，请务必检查您的默认分配规则是否处于活动状态。

# c++ - 可变参数模板的罕见错误？

> ID：15434417
> 
> 赞同：0
> 
> 时间：2013-03-15T14:02:44.567
> 
> 标签：c++, templates, c++11, variadic-templates

我在程序中使用可变参数模板，但出现了意外错误。我隔离了错误，我对此感到震惊：

```
#include<cctype> 
#include<iostream> // try to delete this line

class A 
{ 
    public: 
        void constructor() 
        {   } 

        template<typename... Args> 
        void constructor( int (*f)(int), Args... args ) 
        { 
            // process( f ) 
            constructor( args... ); 
        } 

        template<typename... Args> 
        A( Args... args ) 
        { 
            constructor( args... ); 
        } 
}; 

int main() 
{ 
    A a; 
    a.constructor( std::isspace ); // ok

    A b( std::isspace ); // error

    return 0; 
} 
```

如果删除“#include iostream”行，源代码编译正常。但是，如果您输入这一行，编译器会抛出错误：

```
prov.cpp: In function ‘int main()’:
prov.cpp:32:22: error: no matching function for call to ‘A::A(<unresolved overloaded function type>)’
prov.cpp:32:22: note: candidates are:
prov.cpp:18:7: note: A::A(Args ...) [with Args = {}]
prov.cpp:18:7: note:   candidate expects 0 arguments, 1 provided
prov.cpp:4:7: note: constexpr A::A(const A&)
prov.cpp:4:7: note:   no known conversion for argument 1 from ‘&lt;unresolved overloaded function type>’ to ‘const A&’
prov.cpp:4:7: note: constexpr A::A(A&&)
prov.cpp:4:7: note:   no known conversion for argument 1 from ‘&lt;unresolved overloaded function type>’ to ‘A&&’ 
```

我正在使用这个 g++ 版本：g++ (Ubuntu/Linaro 4.7.2-11precise2) 4.7.2，我正在使用以下标志进行编译：`g++ -Wall -pedantic -std=c++11 prov.cpp -o prov`

我不明白为什么编译器会抛出这个错误。这是一个可能的错误吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-15T14:12:37.823

这不是编译器错误，甚至不是可变参数模板的问题，`std::isspace`只是重载。直接调用时`.constructor`，第一个参数`int (*f)(int)`为编译器提供了足够的信息来选择正确的重载，而泛型参数则没有。这很容易用一个例子来证明：

```
// our std::isspace
void foo(int){}
void foo(double){}

void test1(void (*f)(int)){}

template<class T>
void test2(T v){}

int main(){
  test1(foo); // compiles, compiler sees you want the 'int' overload
  test2(foo); // error, compiler has no clue which overload you want
              // and which type to deduce 'T' as
} 
```

您可以通过两种方式解决此问题：

```
int (*f)(int) = std::isspace; // assign to variable, giving the compiler the information
A b(f); // already has concrete type here

// or
A b(static_cast<int(*)(int)>(std::isspace)); // basically the same as above, in one step 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-15T14:19:43.597

问题是它`<cctype>`定义了一个函数[`isspace`](http://en.cppreference.com/w/cpp/string/byte/isspace)，但添加`<iostream>`了另一个重载，因为[`isspace`](http://en.cppreference.com/w/cpp/locale/isspace)它是从`<locale>`. 来自的一个`<cctype>`是

```
int isspace( int ch ); 
```

来自的一个`<locale>`是

```
template< class charT >
bool isspace( charT ch, const locale& loc ); 
```

两者都包含在内，`std::isspace`变得模棱两可，因此您的代码失败。仅当您通过真实的 ctor （而不是`constructor`）路由它时才可见，因为那时编译器无法决定转发什么。OTOH，该方法`constructor`采用一个参数，该参数已经告诉编译器如何从两个重载中进行选择。

# python - 一个更快的嵌套元组列表和返回

> ID：15434420
> 
> 赞同：3
> 
> 时间：2013-03-15T14:02:48.440
> 
> 标签：python, performance, list, nested, tuples

我正在尝试对未知深度和形状的嵌套序列执行元组到列表和列表到元组的转换。这些电话被打了几十万次，这就是为什么我试图尽可能快地挤出速度。

任何帮助深表感谢。

这是我到目前为止所拥有的...

```
def listify(self, seq, was, toBe):
  temp = []
  a = temp.append
  for g in seq:
    if type(g) == was:
      a(self.listify(g, was, toBe))
    else:
      a(g)
  return toBe(temp) 
```

对 tuple 列表的调用如下所示：

```
self.listify((...), tuple, list) 
```

**编辑：**是的，我完全错过了枚举（来自旧实现）并忘记输入其他部分。

谢谢你们俩的帮助。我可能会选择协程。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-15T15:15:45.757

我最近一直在安静地使用协程。这样做的好处是可以减少方法调用的开销。将新值发送到协程中比调用函数更快。虽然你不能创建递归协程，但它会抛出一个`ValueError: generator already executing`但你可以创建一个协程工作者池——你需要一个工作者来处理树的每一层。我已经制作了一些有效的测试代码，但还没有查看时间问题。

```
def coroutine(func):
    """ A helper function decorator from Beazley"""
    def start(*args, **kwargs):
        g = func(*args, **kwargs)
        g.next()
        return g
    return start

@coroutine
def cotuple2list():
    """This does the work"""
    result = None
    while True:
        (tup, co_pool) = (yield result)
        result = list(tup)
        # I don't like using append. So I am changing the data in place.
        for (i,x) in enumerate(result):
            # consider using "if hasattr(x,'__iter__')"
            if isinstance(x,tuple):
                result[i] = co_pool[0].send((x, co_pool[1:]))

@coroutine
def colist2tuple():
    """This does the work"""
    result = None
    while True:
        (lst, co_pool) = (yield result)
        # I don't like using append so I am changing the data in place...
        for (i,x) in enumerate(lst):
            # consider using "if hasattr(x,'__iter__')"
            if isinstance(x,list):
                lst[i] = co_pool[0].send((x, co_pool[1:]))
        result = tuple(lst) 
```

来自 HYRY 帖子的纯 python 替代品：

```
def list2tuple(a):
    return tuple((list2tuple(x) if isinstance(x, list) else x for x in a))
def tuple2list(a):
    return list((tuple2list(x) if isinstance(x, tuple) else x for x in a)) 
```

制作一个协同程序池 - 这是一个池的黑客，但它有效：

```
# Make Coroutine Pools
colist2tuple_pool = [colist2tuple() for i in xrange(20) ]
cotuple2list_pool = [cotuple2list() for i in xrange(20) ] 
```

现在做一些时间 - 比较：

```
def make_test(m, n):
    # Test data function taken from HYRY's post!
    return [[range(m), make_test(m, n-1)] for i in range(n)]
import timeit
t = make_test(20, 8)
%timeit list2tuple(t)
%timeit colist2tuple_pool[0].send((t, colist2tuple_pool[1:])) 
```

结果 - 注意第二行中“s”旁边的“u”:-)

```
1 loops, best of 3: 1.32 s per loop
1 loops, best of 3: 4.05 us per loop 
```

真的似乎太快了难以置信。有人知道 timeit 是否适用于协程吗？这是老式的方法：

```
tic = time.time()
t1 = colist2tuple_pool[0].send((t, colist2tuple_pool[1:]))
toc = time.time()
print toc - tic 
```

结果：

```
0.000446081161499 
```

较新版本的 Ipython 和 %timit 会发出警告：

> 最慢的运行时间比最快的运行时间长 9.04 倍。这可能
> 意味着中间结果被缓存了 1000000 个循环，最好是 3：每个循环 317 ns

经过进一步调查，python 生成器并不神奇，send 仍然是一个函数调用。我的基于生成器的方法似乎更快的原因是我在列表上进行了就地操作 - 这导致了更少的函数调用。

[在最近的一次谈话](http://dstuebe.github.io/generators)中，我用很多额外的细节写了这一切。

希望这对希望玩发电机的人有所帮助。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-15T14:21:28.440

分别定义两个函数：

```
def list2tuple(a):
    return tuple((list2tuple(x) if isinstance(x, list) else x for x in a))

def tuple2list(a):
    return list((tuple2list(x) if isinstance(x, tuple) else x for x in a)) 
```

一些测试：

```
t = [1, 2, [3, 4], [5, [7, 8]], 9]
t2 = list2tuple(t)
t3 = tuple2list(t2)
print t2
print t3 
```

结果：

```
(1, 2, (3, 4), (5, (7, 8)), 9)
[1, 2, [3, 4], [5, [7, 8]], 9] 
```

**编辑：**对于快速版本：

```
def list2tuple2(a, tuple=tuple, type=type, list=list):
    return tuple([list2tuple2(x) if type(x)==list else x for x in a])

def tuple2list2(a, tuple=tuple, type=type):
    return [tuple2list2(x) if type(x)==tuple else x for x in a] 
```

为了比较，我还包括 cython 版本：

```
%%cython

def list2tuple3(a):
    return tuple([list2tuple3(x) if type(x)==list else x for x in a])

def tuple2list3(a):
    return [tuple2list3(x) if type(x)==tuple else x for x in a] 
```

创建一些嵌套列表：

```
def make_test(m, n):
    return [[range(m), make_test(m, n-1)] for i in range(n)]

t = make_test(20, 8)
t2 = list2tuple2(t) 
```

然后比较速度：

```
%timeit listify(t, list, tuple)
%timeit listify(t2, tuple, list)
%timeit list2tuple(t)
%timeit tuple2list(t2)
%timeit list2tuple2(t)
%timeit tuple2list2(t2)
%timeit list2tuple3(t)
%timeit tuple2list3(t2) 
```

结果是：

```
listify
1 loops, best of 3: 828 ms per loop
1 loops, best of 3: 912 ms per loop

list2tuple generator expression version
1 loops, best of 3: 1.49 s per loop
1 loops, best of 3: 1.67 s per loop

list2tuple2 list comprehension with local cache
1 loops, best of 3: 623 ms per loop
1 loops, best of 3: 566 ms per loop

list2tuple3 cython
1 loops, best of 3: 212 ms per loop
10 loops, best of 3: 232 ms per loop 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-07-02T10:55:18.923

由于上面的答案不处理字典值中的元组或列表，我发布了我自己的代码：

```
def tuple2list(data):
    if isinstance(data, dict):
        return {
            key: tuple2list(value)
            for key, value in data.items()
        }
    elif isinstance(data, (list, tuple)):
        return [
            tuple2list(item)
            for item in data
        ]
    return data

def list2tuple(data):
    if isinstance(data, dict):
        return {
            key: list2tuple(value)
            for key, value in data.items()
        }
    elif isinstance(data, (list, tuple)):
        return tuple(
            list2tuple(item)
            for item in data
        )
    return data 
```

# c# - Windows Phone 中的 WCF 服务

> ID：15434424
> 
> 赞同：1
> 
> 时间：2013-03-15T14:03:06.770
> 
> 标签：c#, wcf, windows-phone-7

我不知道要决定，我应该在 Windows Phone 应用程序中使用什么。WCF 服务库还是 WCF 服务应用程序？我试图创建第一个，但我无法添加对它的引用。所以我尝试添加服务参考，但没有找到服务。第二个 WCF 服务应用程序正在运行，添加服务引用找到我的服务，我可以使用它，但它托管在开发服务器上。请给我好的建议，我应该使用第一选择还是第二选择？我必须注意，这些服务也将用于我的手机应用程序和网络应用程序。谢谢

**编辑：** 最后我要使用 WCF 服务应用程序。当我单击发现并开始时，我收到此错误：

```
The type 'WcfNotificationService.Service1', provided as the Service attribute value in the ServiceHost directive, or provided in the configuration element system.serviceModel/serviceHostingEnvironment/serviceActivations could not be found. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T14:39:49.250

如果要在 IIS 中托管 WCF 服务，则应使用“WCF 服务应用程序”。该库只是一个服务库，没有任何托管。

# python - Mysql python没有插入数据

> ID：15434425
> 
> 赞同：0
> 
> 时间：2013-03-15T14:03:09.353
> 
> 标签：python, mysql

我一直在尝试一个名为 MySQLdb for python 的模块，因为它似乎一切正常，但是当我提交我的数据时，没有任何东西被插入到实际的数据库中。我将通过 PHP 了解我所知道的内容，并且我已经查看了文档，但似乎没有任何有用的东西。我只是想练习 Python 和数据库。这是我目前的代码（请不要判断代码，只判断涉及mysql的部分，当然除非我主要搞砸了！）：

```
from MySQLdb import *
from Tkinter import *
#Standard Imports (IMO)
import sys, random, math

class dataStoreTest:

    def __init__(self):

        self.root = Tk()
        self.root.title("Database Test")
        self.inputFrame = Frame(self.root)

        #TextVariables
        self.fName = StringVar()
        self.lName = StringVar()
        self.DOB = StringVar()
        self.email = StringVar()

        #MySQLdb Variables
        self.connection = connect("127.0.0.1", "user", "pass", "dbname")

        self.setupGUI()

        self.root.mainloop()

    def setupGUI(self):

        #Title/Header
        title = Label(self.root, text="DataBase Test", fg="Black")
        title.pack()

        #Input Fields
        fNameLab = Label(self.root, text="First Name: ", width=14, fg="steelblue")
        fNameLab.pack()
        fNameEnt = Entry(self.root, textvariable=self.fName, width=14, bg="gray")
        fNameEnt.pack()

        lNameLab = Label(self.root, text="Last Name: ", width=14, fg="steelblue")
        lNameLab.pack()
        lNameEnt = Entry(self.root, textvariable=self.lName, width=14, bg="gray")
        lNameEnt.pack()

        dobLab = Label(self.root, text="DOB (YYYY-DD-MM):", width=18, fg="steelblue")
        dobLab.pack()
        dobEnt = Entry(self.root, textvariable=self.DOB, width=14, bg="gray")
        dobEnt.pack()

        emailLab = Label(self.root, text="E-Mail Address:", width=20, fg="steelblue")
        emailLab.pack()
        emailEnt = Entry(self.root, textvariable=self.email, width=35, bg="gray")
        emailEnt.pack()

        subBut = Button(self.root, command=self.verify, text="Submit")
        subBut.pack()

    def verify(self):
        self.firstName = self.fName.get()
        self.lastName = self.lName.get()
        self.DOBirth = self.DOB.get()
        self.emailAddress = self.email.get()

        #Basic Validation
        if self.firstName != "" and self.lastName != "" and self.DOBirth != "" and self.emailAddress != "":
            if "@" in self.emailAddress and self.emailAddress.find("@") < (len(self.emailAddress)- 3):
                print("All there!")
                self.storeData()
            else:
                print("Invalid Email Address")
        else:
            print("Information Is Missing, Please Check Your Inputs.")

    def storeData(self):

        if self.connection:
            print("DB Connection was a great success...")
            print("Now entering data...")
            self.connection.query("""INSERT INTO test (fName,lName, DOB, email)
VALUES ('self.firstName', 'self.lastName', 'self.DOBirth', 'self.emailAddress')""")
        else:
            print("Failed To Connect to DataBase :c ")

if __name__ == "__main__":

    dataStoreTest() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T14:12:22.967

使用 MySQLdb，您可以执行以下操作：

```
self.db = connect("127.0.0.1", "user", "pass", "dbname")
self.cursor = self.db.cusor()
self.cursor.execute("""INSERT INTO test (fName,lName, DOB, email)
VALUES ('self.firstName', 'self.lastName', 'self.DOBirth', 'self.emailAddress')""")
self.db.commit() 
```

在教程[http://zetcode.com/db/mysqlpython/中找到](http://zetcode.com/db/mysqlpython/)

看起来您正在使用`_mysql`模块中的一些示例？

# javascript - 如何根据读取的 cookie 值使超链接指向不同的 url？

> ID：15434426
> 
> 赞同：1
> 
> 时间：2013-03-15T14:03:10.103
> 
> 标签：javascript, html

**设想**

在我的网站上，我在每个页面的菜单（通常的服务、关于我们、联系我们菜单）上都有指向“contactus.html”页面的链接，并且每个页面都是使用 Dreamweaver 模板制作的，并且菜单只能在 .dwt 中编辑模板文件本身。

当用户第一次访问“index.html”时，一个名为“client-location”的 cookie 会与客户端的位置一起放置。

**期望的结果：**

当客户端单击“**联系我们”**菜单项​​时，我想读取**客户端位置**cookie 并将用户发送到正确的联系页面，例如**contactus2.html**或 **contactus3.html**。

我从下面链接中的 stackoverflow 答案中得到了这个。像这样的东西会出现在 script.js 文件中

```
{
    document.getElementById("contactlink").onclick = function() {
    var clientlocation = readCookie(); // this returns contact1.html, a weblink

    document.getElementById("contactlink").href=clientlocation; 
} 
```

**可能的问题：**

用户第一次访问该网站时完全有可能直接进入“关于我们”部分，并且根本不会放置 cookie 来提及他们的位置。在这种情况下，我想访问**contatus1.html**，这是一个通用的联系我们页面。

如果 javascript 被禁用，那么浏览器在点击时甚至不会去任何地方。

我在网上阅读并检查了这个 [如何通过javascript更改按钮点击时<a>标签的href](https://stackoverflow.com/questions/4365246/how-to-change-href-of-a-tag-on-button-click-through-javascript)，但我想知道a）是否会有任何可访问性问题b）这是否是一个好方法

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T14:08:01.973

您的“联系我们”页面肯定有固定位置吗？对我来说，这似乎是对 cookie 的不必要使用。

`example.com/ContactUs`可以`example.com/stuff/About`通过链接到`../ContactUs`等来引用。

同样，您可以使用[`location.protocol + '//' + location.host`](https://stackoverflow.com/a/1368295/1317805)（`example.com`在此处返回）并附加必要的页面来拉动文档根目录。

```
var clientlocation = location.protocol + '//' + location.host + '/ContactUs';
document.getElementById("contactlink").href=clientlocation; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T14:12:49.860

如果 javascript 被禁用，那么您将无能为力。Javascript 将不会执行。此流程可以由服务器端脚本独立于浏览器进行处理。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-15T14:12:56.693

你不能将链接的href设置为contactus1.html，这样如果JS被禁用，链接仍然可以工作吗？至于未设置的 cookie，您只需检查 clientLocation 是否为 null（或空白或您的 readCookie 函数返回的任何内容），如果是，请将 href 设置为 contactus1.html。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-15T14:13:19.483

解决这个问题的一种方法是使用 PHP。

就像你说的，如果用户的浏览器不支持 JS 或者只是没有它就不会工作，所以服务器端的解决方案可能会更好。

例如：

```
<?php

function generateLink($location)
{
 switch($location)
 {
  case 0:
   echo '<a href="location1.html">Contact us</a>';
   break;
  case 1:
   echo '<a href="location2.html">Contact us</a>';
   break;
 }
}

?> 
```

# google-app-engine - 更新后谷歌云端点回调

> ID：15434428
> 
> 赞同：4
> 
> 时间：2013-03-15T14:03:11.463
> 
> 标签：google-app-engine, google-cloud-endpoints

是否可以使用云端点方法作为上传的回调？uploadUrl 是使用 blobservice 生成的。

```
String url = blobstoreService.createUploadUrl("/_ah/api/project/v1/uploadcallback" , options); 
```

目前，我从应用引擎服务器收到 404 响应。

我从本地测试服务器得到以下异常：

```
HTTP ERROR 500

Problem accessing /_ah/upload/agtrdWJpdHktdGVzdHIbCxIVX19CbG9iVXBsb2FkU2Vzc2lvbl9fGAEM. Reason:

    Unexpected character ('-' (code 45)) in numeric value: expected digit (0-9) to follow minus sign, for valid numeric value
 at [Source: java.io.StringReader@3d3f1775; line: 1, column: 3]

Caused by:

com.google.appengine.repackaged.org.codehaus.jackson.JsonParseException: Unexpected character ('-' (code 45)) in numeric value: expected digit (0-9) to follow minus sign, for valid numeric value
 at [Source: java.io.StringReader@3d3f1775; line: 1, column: 3]
    at com.google.appengine.repackaged.org.codehaus.jackson.JsonParser._constructError(JsonParser.java:1432)
    at com.google.appengine.repackaged.org.codehaus.jackson.impl.JsonParserMinimalBase._reportError(JsonParserMinimalBase.java:385)
    at com.google.appengine.repackaged.org.codehaus.jackson.impl.JsonParserBase.reportUnexpectedNumberChar(JsonParserBase.java:960)
    at com.google.appengine.repackaged.org.codehaus.jackson.impl.ReaderBasedParser._handleInvalidNumberStart(ReaderBasedParser.java:957)
    at com.google.appengine.repackaged.org.codehaus.jackson.impl.ReaderBasedParser.parseNumberText(ReaderBasedParser.java:671)
    at com.google.appengine.repackaged.org.codehaus.jackson.impl.ReaderBasedParser.nextToken(ReaderBasedParser.java:476)
    at com.google.appengine.repackaged.org.codehaus.jackson.map.ObjectMapper._initForReading(ObjectMapper.java:2761)
    at com.google.appengine.repackaged.org.codehaus.jackson.map.ObjectMapper._readMapAndClose(ObjectMapper.java:2709)
    at com.google.appengine.repackaged.org.codehaus.jackson.map.ObjectMapper.readValue(ObjectMapper.java:1854)
    at com.google.api.server.spi.tools.devserver.RestApiServlet$LilyRequestMarshaller.createBackendRequestBody(RestApiServlet.java:76)
    at com.google.api.server.spi.tools.devserver.RestApiServlet$LilyRequestMarshaller.marshall(RestApiServlet.java:59)
    at com.google.api.server.spi.tools.devserver.RestApiServlet$LilyRequestMarshaller.access$100(RestApiServlet.java:54)
    at com.google.api.server.spi.tools.devserver.RestApiServlet.service(RestApiServlet.java:144)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
    at org.mortbay.jetty.servlet.ServletHolder.handle(ServletHolder.java:511)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1166)
    at com.google.appengine.tools.development.BackendServersFilter.doFilter(BackendServersFilter.java:97)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
    at org.mortbay.jetty.servlet.ServletHandler.handle(ServletHandler.java:388)
    at org.mortbay.jetty.security.SecurityHandler.handle(SecurityHandler.java:216)
    at org.mortbay.jetty.servlet.SessionHandler.handle(SessionHandler.java:182)
    at org.mortbay.jetty.handler.ContextHandler.handle(ContextHandler.java:765)
    at org.mortbay.jetty.webapp.WebAppContext.handle(WebAppContext.java:418)
    at com.google.appengine.tools.development.DevAppEngineWebAppContext.handle(DevAppEngineWebAppContext.java:94)
    at org.mortbay.jetty.servlet.Dispatcher.forward(Dispatcher.java:327)
    at org.mortbay.jetty.servlet.Dispatcher.forward(Dispatcher.java:126)
    at com.google.appengine.api.blobstore.dev.UploadBlobServlet.handleUpload(UploadBlobServlet.java:432)
    at com.google.appengine.api.blobstore.dev.UploadBlobServlet.access$000(UploadBlobServlet.java:71)
    at com.google.appengine.api.blobstore.dev.UploadBlobServlet$1.run(UploadBlobServlet.java:117)
    at java.security.AccessController.doPrivileged(Native Method)
    at com.google.appengine.api.blobstore.dev.UploadBlobServlet.doPost(UploadBlobServlet.java:114)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:637)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
    at org.mortbay.jetty.servlet.ServletHolder.handle(ServletHolder.java:511)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1166)
    at com.google.appengine.api.socket.dev.DevSocketFilter.doFilter(DevSocketFilter.java:74)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
    at com.google.appengine.tools.development.ResponseRewriterFilter.doFilter(ResponseRewriterFilter.java:123)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
    at com.google.appengine.tools.development.HeaderVerificationFilter.doFilter(HeaderVerificationFilter.java:34)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
    at com.google.appengine.api.blobstore.dev.ServeBlobFilter.doFilter(ServeBlobFilter.java:61)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
    at com.google.apphosting.utils.servlet.TransactionCleanupFilter.doFilter(TransactionCleanupFilter.java:43)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
    at com.google.appengine.tools.development.StaticFileFilter.doFilter(StaticFileFilter.java:125)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
    at com.google.appengine.tools.development.BackendServersFilter.doFilter(BackendServersFilter.java:97)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
    at org.mortbay.jetty.servlet.ServletHandler.handle(ServletHandler.java:388)
    at org.mortbay.jetty.security.SecurityHandler.handle(SecurityHandler.java:216)
    at org.mortbay.jetty.servlet.SessionHandler.handle(SessionHandler.java:182)
    at org.mortbay.jetty.handler.ContextHandler.handle(ContextHandler.java:765)
    at org.mortbay.jetty.webapp.WebAppContext.handle(WebAppContext.java:418)
    at com.google.appengine.tools.development.DevAppEngineWebAppContext.handle(DevAppEngineWebAppContext.java:94)
    at org.mortbay.jetty.handler.HandlerWrapper.handle(HandlerWrapper.java:152)
    at com.google.appengine.tools.development.JettyContainerService$ApiProxyHandler.handle(JettyContainerService.java:409)
    at org.mortbay.jetty.handler.HandlerWrapper.handle(HandlerWrapper.java:152)
    at org.mortbay.jetty.Server.handle(Server.java:326)
    at org.mortbay.jetty.HttpConnection.handleRequest(HttpConnection.java:542)
    at org.mortbay.jetty.HttpConnection$RequestHandler.content(HttpConnection.java:938)
    at org.mortbay.jetty.HttpParser.parseNext(HttpParser.java:755)
    at org.mortbay.jetty.HttpParser.parseAvailable(HttpParser.java:218)
    at org.mortbay.jetty.HttpConnection.handle(HttpConnection.java:404)
    at org.mortbay.io.nio.SelectChannelEndPoint.run(SelectChannelEndPoint.java:409)
    at org.mortbay.thread.QueuedThreadPool$PoolThread.run(QueuedThreadPool.java:582) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-15T18:52:29.057

从[上传 Blob](https://developers.google.com/appengine/docs/java/blobstore/overview#Uploading_a_Blob)：

> 表单必须包含文件上传字段，并且表单的 enctype 必须设置为`multipart/form-data`. 当用户提交表单时，POST 由创建 Blob 的 Blobstore API 处理。API 还为 blob 创建一条信息记录并将记录存储在数据存储中，并将重写的请求作为 blob 键传递给给定路径上的应用程序。

由于 Endpoints 不（据我所知）接受`multipart/form-data`有效编码，因此这不起作用。您看到的错误消息是因为 Endpoint 需要 JSON。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-12-26T15:11:13.820

我有同样的问题。看来这是端点的问题以及正在发布 JSON 的事实。

最后，我只是走出了 Endpoints 框架，让一个自定义 servlet 处理 POST。

到目前为止，其他所有内容仍在端点内。

# javascript - 是否可以不允许 iframe 显示文件下载弹出窗口？

> ID：15434431
> 
> 赞同：0
> 
> 时间：2013-03-15T14:03:22.713
> 
> 标签：javascript, iframe

我有一个像这样的代码：

```
<iframe src="http://www.upnp.org/download/UPNP_understandingUPNP.doc"></iframe> 
```

呈现此代码时，会向用户显示浏览器文件下载提示。我想禁止 iframe 显示此下载弹出窗口。

可能吗？

* * *

我想要它，因为 iframe 的网址由用户控制，而不是网站所有者。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T14:06:19.603

不。

托管 URL的*服务器*可以决定是否要将其标记为附件（建议浏览器保存它）或内联（建议浏览器打开它；如果有插件，则使用插件）。

*浏览器*决定如何处理它。

链接到它的*页面*（即使它通过 iframe 链接）无法控制上述任何内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T17:16:05.620

为避免下载弹出窗口，您可以使用 ajax 而不是 iframe 来加载 url。

# c# - 从 SQL Server 2005 转移到 2012

> ID：15434434
> 
> 赞同：1
> 
> 时间：2013-03-15T14:03:33.340
> 
> 标签：c#, asp.net, sql-server

我使用了一个 Intranet 工具，该工具有一个使用 VS 2005(UI) 和 SQL Server 2005 创建的数据库，它在 Windows Server 2003 上运行良好。

现在我已将数据库转移到安装了 SQL Server 2012 的 Windows 2008 Server。我更改了连接字符串、引用程序集并使用 Visual Studio 进行了调试，它运行良好（我能够登录并访问数据库）。但是当我尝试在 IE 中做同样的事情时，我在登录页面（UI 的第一页）上收到用户 ID 不正确的错误。

我没有从服务器收到任何连接错误或用户错误。之前版本的目标框架是 2.0，但我不得不在此处将其更改为 4.0，因为新环境不喜欢 2.0。我应该怎么做才能解决这个问题？

# maven - Jenkins“构建后操作”在 Maven 存储库上部署 zip

> ID：15434439
> 
> 赞同：0
> 
> 时间：2013-03-15T14:03:55.050
> 
> 标签：maven, jenkins, post-build

我最近开始使用 Jenkins，目前使用的是 1.492 版。我有一个 Maven 模块项目，它生成一个 Jar 和一个 Zip 文件，我想将它们部署到 Nexus Maven 存储库。当我在本地构建项目时，我收到消息：将 PROJECT_DIR/target/groupID/projectId-version.jar 安装到 LOCAL_REPO/groupID/projectId-version.jar 将 PROJECT_DIR/groupID/projectId.zip 安装到 LOCAL_REPO/groupID/projectId/version/ projectId-version-classifier.zip

使用“构建后操作”将工件部署到 Maven 存储库。在 Jenkins 构建日志中，我可以看到我的 jar 已部署，但没有关于我的 zip 的信息。是否有特定的配置来修复它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T21:10:44.633

配置您的项目以附加其他 zip 工件。

```
 <project>
  ...
  <build>
    <plugins>
      ...
      <plugin>
        <groupId>org.codehaus.mojo</groupId>
        <artifactId>build-helper-maven-plugin</artifactId>
        <version>1.7</version>
        <executions>
          <execution>
            <id>attach-artifacts</id>
            <phase>package</phase>
            <goals>
              <goal>attach-artifact</goal>
            </goals>
            <configuration>
              <artifacts>
                <artifact>
                  <file>some file</file>
                  <type>extension of your file </type>
                  <classifier>optional</classifier>
                </artifact>
              </artifacts>
            </configuration>
          </execution>
        </executions>
      </plugin>
    </plugins>
  </build>
</project> 
```

# perl - 如何将多个参数传递给 Perl Moo 中的设置器/写入器

> ID：15434441
> 
> 赞同：3
> 
> 时间：2013-03-15T14:04:00.067
> 
> 标签：perl, moose, moo

我开始将几个 Perl 模块迁移到[Moo](https://metacpan.org/module/Moo)，但因为 setter/writer 只能有一个参数（不是吗？）而被卡住了。这也适用于强制：

```
package MyThing:
use Moo;
use Scalar::Util qw(blessed);
use SomeOtherThing;

has foo => (
  is => 'rw',
  coerce => sub {
      return $_[0] if blessed($_[0]) and $_[0]->isa('SomeOtherThing');
      return SomeOtherThing->new( @_ ); # does not work, because @_ == 1
  },       
); 
```

这是一个简单的用例：

```
package MyApplication;
use MyThing;

$thing = MyThing->new;
$thing->foo( 'some', 'values'); # would like to have this shortcut
$thing->foo; # expected a SomeOtherThing

# must use this ugly form instead
$thing->foo( SomeOtherThing->new('some', 'values') ); 
```

有没有一种简单的方法来实现支持多参数设置的访问器？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-15T15:33:30.680

是的，使用数组引用：

```
use Carp;
has foo => (
  is => 'rw',
  coerce => sub {
    return $_[0] if blessed($_[0]) and $_[0]->isa('SomeOtherThing');
    ref $_[0] && ref $_[0] eq 'ARRAY' or croak "foo: arg must be a SomeOtherThing or array reference";
    return SomeOtherThing->new( @{$_[0]} );
  },       
); 
```

之后...

```
$thing->foo(['some', 'values']); 
```

如果对象需要接受键/值参数，您也可以使用 hashref。

使用完整的 Moose，您将改为编写从 ArrayRef 到 SomeOtherThing 的类型强制转换。

* * *

**免责声明**

我可以看到这在某些情况下很有用（例如传递 x/y 坐标而不是创建`Point`对象），但我会谨慎使用它。

这样做会增加类的耦合：MyThing 现在不仅依赖于 SomeOtherThing 的方法，还依赖于它的构造函数 - 如果向 SomeOtherThing 添加新字段，则可能需要更改 MyThing*和*调用 MyThing`foo`方法的所有模块。哎哟!

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-20T11:56:14.953

当前版本的 Moo 无法访问 setter 中的多个参数，因此我编写了一个 Perl 模块来扩展此功能。它目前是实验性的，所以请随时在 PrePAN 评论[Class::Accessor::Coerce](http://prepan.org/module/nXWJ8Y9sBhE)。

# jquery-mobile - 将 $.mobile.changePage 放在正确的位置

> ID：15434442
> 
> 赞同：1
> 
> 时间：2013-03-15T14:04:05.113
> 
> 标签：jquery-mobile

我试图了解 $.mobile.changePage 的工作原理。我将 $.mobile.changePage 方法放在 DOM 中最后一个元素之后的匿名函数中，但它不起作用，但如果我将它放在 document.ready 中，它工作正常。怎么来的？非常感谢任何建议

```
<!DOCTYPE html> 
<html> 
<head> 
    <title>My Page</title> 
    <meta name="viewport" content="width=device-width, initial-scale=1"> 
    <link rel="stylesheet" href="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.css" />
    <script src="http://code.jquery.com/jquery-1.8.2.min.js"></script>
    <script src="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.js"></script>
</head> 
<body> 

    <!-- Start of first page -->
    <div data-role="page" id="foo">

        <div data-role="header">
            <h1>Foo</h1>
        </div><!-- /header -->

        <div data-role="content">   
            <p>I'm first in the source order so I'm shown as the page.</p>      
            <p>View internal page called <a href="#bar">bar</a></p> 
        </div><!-- /content -->

        <div data-role="footer">
            <h4>Page Footer</h4>
        </div><!-- /footer -->

    </div><!-- /page -->

    <!-- Start of second page -->
    <div data-role="page" id="bar">

        <div data-role="header">
            <h1>Bar</h1>
        </div><!-- /header -->

        <div data-role="content">   
            <p>I'm the second in the source order so I'm hidden when the page loads. I'm just shown if a link that references my id is beeing clicked.</p>      
            <p><a href="#foo">Back to foo</a></p>   
        </div><!-- /content -->

        <div data-role="footer">
            <h4>Page Footer</h4>
        </div><!-- /footer -->

    </div><!-- /page -->

    <script>
        (function(){ 

                $.mobile.changePage($("#bar"), { transition: "slideup"} );          

        })();// this doesn't work

        $(document).ready(function(){

                $.mobile.changePage($("#bar"), { transition: "slideup"} );

            })//this works

    </script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T14:21:22.177

**`document ready`**不能正常工作**`jQuery Mobile`**。通常它会在页面加载到**`DOM`**.

如果您想了解更多相关信息，请查看这篇**[文章](http://www.gajotres.net/document-onpageinit-vs-document-ready/)**，为了透明，这是我的个人博客。或者在**[这里](https://stackoverflow.com/a/14469041/1848600)**找到它。

要使其工作，您需要使用正确的页面事件，如下所示：

```
$(document).on('pagebeforeshow', '#foo', function(){       
    $.mobile.changePage($("#bar"), { transition: "slideup"} );
}); 
```

同时，这也不是一个好的解决方案。您不应该在加载第一页时更改页面，主要是因为它会导致**`jQuery Mobile`**行为不端。在成功加载第一页（page **`#foo`**）或更改页面顺序并让页面**`#bar`**成为第一页后，以太会执行此操作。

# php - 在 Laravel 4 上集成 svg-edit 或其他程序

> ID：15434450
> 
> 赞同：0
> 
> 时间：2013-03-15T14:04:57.423
> 
> 标签：php, svg, laravel, laravel-4, svg-edit

我正在尝试将[svg-editor](http://svg-edit.googlecode.com/svn/branches/2.6/editor/svg-editor.html)与 Laravel 4 集成。

我目前的解决方案是在我的视图文件夹中插入重命名为 svg-editor.php 的 svg-editor.html 文件，并将其余文件移动到公用文件夹中。所以现在我已经将所有对 js 和 css 文件的调用移到了编辑视图中，并且都指向了 public 文件夹，以便让 laravel 加载 svg-editor 所需的文件。js 和 css 文件位于 assets 文件夹中，我用资产函数调用它们：

```
<script>{{{ asset('/assets/js/ *original path from svg-editor* ') }}}</script> 
```

**公共文件夹结构**

*   应用程序
*   上市
*   小贩
*   svg-edit-2_6

**Views 文件夹：**在 svg-edit-2_6 内，只有 svg-editor.php 可以使用 @include() 包含在模板中

当然，这个解决方案很麻烦，因为我必须修改 svg-editor 代码中的所有调用，例如路径和 URL 引用。我的问题是是否有任何方法可以让 laravel 加载该程序而无需修改其参数。我认为可以从 start.php 文件进行某种调用，但我找不到有关如何执行此操作的信息。

有可能吗？

![](../Images/8a72ab2c0d9d58fbbe764dbf51f6b001.png) ![](../Images/48699f867c511fc3f3ce8931c2cd69f1.png)

# jquery - jquery ui可拖动将tr转换为div

> ID：15434455
> 
> 赞同：0
> 
> 时间：2013-03-15T14:05:11.253
> 
> 标签：jquery, jquery-ui, jquery-ui-draggable

我有一个有很多行的大表，每行都有一个拖动处理程序。

我将使用哪个事件来修改 HTML 并将其更改`<tr>`为`<div>`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T14:11:21.947

您需要一个自定义助手。看到这个 SO 问题：[Custom helper for jQuery UI Draggable](https://stackoverflow.com/questions/8501887/custom-helper-for-jquery-ui-)

基本上，您希望将内容包装在 a`div`而不是`tr`. 这样做的结果是，您现在将`td`' 作为`div`不会飞的 ' 的孩子！所以你可以做以下两件事之一：

1.  您可以只从行甚至特定字段中删除内容（我发布的 SO 问题就是这样做的 - 仅拉出某些元素进行拖动）
2.  您可以，而不是将 tr`tr` **包装**在 table 元素中，使拖动事件成为有效的独立 DOM 片段，即被拖动的完整表格。

编辑：根据您的评论，要执行将单元格 1 转换为 an`h1`并将单元格 2 转换为 a 的`p`操作，您可以：

```
$('selector').draggable({
  helper: function()
  {
    var $ret = $("<div></div>");
    $ret.append( '<h1>' + $(this).find('td:nth-child(1)').text() + '</h1>');
    $ret.append( '<p>' + $(this).find('td:nth-child(2)').text() + '</p>');
    // ...

    return $ret;
  }

}); 
```

# ruby - 如何在响应客户端请求时在 Ruby 中创建一个不会在后台终止进程的 Web 服务？

> ID：15434457
> 
> 赞同：-1
> 
> 时间：2013-03-15T14:05:22.190
> 
> 标签：ruby, web-services

我想使用方法服务创建一个 Web 服务（Ruby 1.8.7），该服务允许我运行一些生成后台进程的代码，并且在方法返回一段时间后不会停止它。以前我用 gem simplews 托盘，但这个过程显然会在一段时间后停止。任何答案，不仅对知识有帮助，而且是为了我的论文，我的时间很短

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T16:24:41.537

我认为您可以简单地使用诸如 Sinatra 之类的东西并运行后台进程来完成您的任务。首先使用`gem install sinatra`. 然后编写一个非常简单的 ruby​​ 应用程序，例如 Sinatra 应用程序示例：

```
require 'sinatra'

get '/' do
  %x["/my/background/process &"]
  "Started running background process!"
end 
```

现在运行 sinatra 应用程序：

```
$ ruby myapp.rb 
```

然后使用 Sinatra 告诉您的端口号与您的浏览器连接：

```
http://127.0.0.1:4567/ 
```

Sinatra 为您使用的端口号可能与 4567 不同。您应该看到“开始运行后台进程！” 在您的浏览器中，您的后台进程应该正在运行。

# java - Java 正则表达式提取版本

> ID：15434464
> 
> 赞同：0
> 
> 时间：2013-03-15T14:05:54.390
> 
> 标签：java

我正在尝试编写一个 java 正则表达式来从我从 java -version 命令获得的字符串中去除 java 版本。

如果字符串是`"java version 1.7.0_17"`我需要分别提取 1.7 和 17 。假设如果字符串是`"java version 1.06_18"`我需要提取 1.06 和 18。第一个字符串应该只到第一个小数点。我尝试使用以下正则表达式，

```
Pattern p = Pattern.compile(".*\"(.+)_(.+)\""); 
```

但它只提取 1.7.0 和 17，但我不确定如何停止仍然保留一位小数。任何帮助都会非常显着。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T14:27:32.187

重新阅读您的问题，我的旧答案并未涵盖在第一个小数点处停止。这应该可以解决您的问题：

```
Pattern p = Pattern.compile(".*?(\\d+[.]\\d+).*?_(\\d+)"); 
```

测试：

```
 String input = "java version 1.7.0_17";
 Pattern pattern = Pattern.compile(".*?(\\d+[.]\\d+).*?_(\\d+)");
 Matcher matcher = pattern.matcher(input);
 if (matcher.find()) {
     String version = matcher.group(1); // 1.7
     String update  = matcher.group(2); // 17
} 
```

* * *

**旧版：**

而不是找到数字，我会摆脱其余的：

```
String string  = "java version 1.7.0_17";
String[] parts = string.split("[\\p{Alpha}\\s_]+", -1);
String version = parts[1]; // 1.7.0
String update  = parts[2]; // 17 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T14:09:15.877

对于您提供的测试用例，您可以使用：`(\d+\.\d+).*_(\d+)`

# vb.net - 将 excel 转换为文本的 VB 脚本退出并出现错误代码 9009

> ID：15434469
> 
> 赞同：0
> 
> 时间：2013-03-15T14:06:03.023
> 
> 标签：vb.net, excel, vbscript, vba

我有一个 VB 脚本，我在其中将 Excel ( .xls ) 文件转换为文本文件。它以错误代码 9009 退出。

我在安装了 Excel 2003 的服务器上运行此脚本，但不是整个 MS Office。

下面是脚本

```
'Script Details:
'The script converts an excel file into a tab-delimited file
'The script requires two parameters - the source file name and target file name
'Author Maulik

'-----------------------------------------------------------------------------------
'Script checks and exectues only if there are 2 parameters
'-----------------------------------------------------------------------------------

if WScript.Arguments.Count < 2 Then
    WScript.Echo "Please Specify the Source File. Usage: ExcelToCsv <xls/xlsx source file>"
    Wscript.Quit 4
End If

txt_format = 20

Set objFSO = CreateObject("Scripting.FileSystemObject")

src_path = Wscript.Arguments.Item(0)

'WScript.Echo src_path

src_file = Wscript.Arguments.Item(1)

'WScript.Echo src_file

full_file_path = src_path & "\" & src_file

'WScript.Echo full_file_path

Dim xlApp
Dim xlBook
Dim xlSheet
Dim strOutputFileName

Set xlApp = CreateObject("Excel.Application")

xlApp.Visible = False
xlApp.EnableEvents = False

Set xlBook = xlApp.Workbooks.Open(full_file_path)

For Each xlSheet In xlBook.Worksheets

With xlSheet
strOutputFileName = full_file_path & "." & xlSheet.Name & ".dat"    
xlSheet.SaveAs strOutputFileName, txt_format
End With

Next

xlBook.Close False

xlApp.Quit 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T14:52:00.000

我认为该错误是**错误的文件名或编号**，因为您的路径中有空格。

试试下面的代码：

```
'Script Details:
'The script converts an excel file into a tab-delimited file
'The script requires two parameters - the source file name and target file name
'Author Maulik

'-----------------------------------------------------------------------------------
'Script checks and exectues only if there are 2 parameters
'-----------------------------------------------------------------------------------

if WScript.Arguments.Count < 2 Then
    WScript.Echo "Please Specify the Source File. Usage: ExcelToCsv <xls/xlsx source file>"
    Wscript.Quit 4
End If

txt_format = 6 ' xlCSV is 6, 20 is xlTextWindows !

Set objFSO = CreateObject("Scripting.FileSystemObject")

src_path = Wscript.Arguments.Item(0)

'WScript.Echo src_path

src_file = Wscript.Arguments.Item(1)

'WScript.Echo src_file

full_file_path = src_path & "\" & src_file

'WScript.Echo full_file_path

Dim xlApp
Dim xlBook
Dim xlSheet
Dim strOutputFileName

Set xlApp = CreateObject("Excel.Application")

xlApp.Visible =true ' false
xlApp.EnableEvents = False

Set xlBook = xlApp.Workbooks.Open(full_file_path)

For Each xlSheet In xlBook.Worksheets

With xlSheet
strOutputFileName = """" & full_file_path & "." & xlSheet.Name & ".dat" & """"   
xlSheet.SaveAs strOutputFileName, txt_format
End With

Next

xlBook.Close False

xlApp.Quit 
```

我希望这会有所帮助

菲利普

# php - 使用 codeigniter 使用 optgroup 将多维数组转换为下拉列表时遇到问题

> ID：15434470
> 
> 赞同：0
> 
> 时间：2013-03-15T14:06:05.463
> 
> 标签：php, codeigniter

在使用 Codeigniter form_dropdown 函数时，我希望通过以下方式[将此数组转换为 optgroup。](http://pastebin.com/B2bvFB8Z)

```
<select>
  <optgroup label="Thomas More Kempen">
    <option value="22">D001</option>
    <option value="23">D002</option>
  </optgroup>
  <optgroup label="Thomas More Geel">
    <option value="2">G001</option>
    <option value="8">A102</option>
  </optgroup>
</select>
value is lokaalId 
```

到目前为止，我可以在 optgroup 中显示带有对象 ad chlildren 的“Thomas More ...”，但到目前为止还没有骰子。

已解决：我改变了从数据库获取数据的方式：

```
function getAllMetCampus() {
        $this->load->model('campus_model');
        $alleCampussen = $this->campus_model->getAll();

        foreach ($alleCampussen as $campus) {
            $lokalen = $this->getAllOnCampusId($campus->id);
            foreach($lokalen as $key=>$value){
                unset($lokalen[$key]);
                $lokalen[$value->lokaalId] = $value->lokaalNr;
            }
            $result[$campus->naam] = $lokalen;
        }
        return $result;
    } 
```

然后我只是`echo form_dropdown($result);`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T16:29:16.147

辅助函数正在主数组中查找数组，而不是`stdObjects`您的链接输入显示，请参阅源代码：[form_helper:336](https://github.com/EllisLab/CodeIgniter/blob/develop/system/helpers/form_helper.php#L324)

您将不得不转换您的输入，可能是这样的：

```
$options = array_map(function($item){
    return (array)$item;
}, $options); 
```

或者，由于您的输入似乎来自数据库查询结果，因此在获取它们时使用`result_array()`or`row_array()`方法而不是`result()`or 。`row()`

您应该得到这样的错误，而无需转换：

```
PHP Catchable fatal error:  Object of class stdClass could not be converted to string 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-08-04T08:45:13.550

Optgroups 在 codeigniter 中并不难：

如果你想要这个：

```
<select>
  <optgroup label="Thomas More Kempen">
    <option value="22">D001</option>
    <option value="23">D002</option>
  </optgroup>
  <optgroup label="Thomas More Geel">
    <option value="2">G001</option>
    <option value="8">A102</option>
  </optgroup>
</select> 
```

您可以像这样简单地循环您的数组：

```
function getAllMetCampus() {
        $this->load->model('campus_model');
        $alleCampussen = $this->campus_model->getAll();
        $options = array();

        foreach ($alleCampussen as $campus) {
            $options[$campus->naam] = array();

            $lokalen = $this->getAllOnCampusId($campus->id);
            foreach($lokalen as $lokaal){
                $options[$campus->naam][$lokaal->lokaalId] = $lokaal->lokaalNr
            }
        }
        return $options;
    } 
```

让我想知道，为什么你有一个校园和lokaal的ID，每个校园中是否有更多行同名的校园和相同号码的lokalen？对我来说，主键似乎是一种不好的做法，你能对此发表评论吗？

# facebook-graph-api - API 帖子在 FB 移动应用程序中不可见？

> ID：15434471
> 
> 赞同：0
> 
> 时间：2013-03-15T14:06:05.923
> 
> 标签：facebook-graph-api

当使用 PHP SDK 将链接发布到 /me/feed 时，该帖子在 iPhone 版 Facebook 应用程序中不可见，但会显示在其他任何地方，例如桌面 facebook.com，甚至通过 Safari m.facebook.com 显示在移动设备上

所有权限都很好，使用的访问令牌有效，移动站点 URL 已设置等。

还有什么可能是错的？

# asp-classic - GetVerifiedStatus 与经典 ASP

> ID：15434472
> 
> 赞同：0
> 
> 时间：2013-03-15T14:06:06.020
> 
> 标签：asp-classic, paypal

是否有任何将 GetVerifiedStatus 与 Classic ASP 一起使用的示例？我从 Paypal 下载了示例，但没有任何关于 GetVerifiedStatus 的内容。

求帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T16:11:05.410

我们拥有的所有经典 ASP 示例都可以在页面底部的[https://www.x.com/developers/paypal/documentation-tools/paypal-sdk-index中找到。](https://www.x.com/developers/paypal/documentation-tools/paypal-sdk-index)这些 SDK 可能不包含所有示例，但是对于未包含的示例，您可以简单地修改其他示例之一。这只是传递不同参数和值的问题。您应该能够使用开发人员指南来查看需要哪些变量，以及您在响应中可以期待什么。

# asp.net - 如何使用变量名来指向同名的不同数据类型？

> ID：15434478
> 
> 赞同：1
> 
> 时间：2013-03-15T14:06:20.600
> 
> 标签：asp.net, asp.net-mvc, data-structures, c#-3.0, logic

我有 2 个列表，一个存储可过滤列的名称（DropDown 类型），另一个存储要加载到这些可过滤列中的值。

```
 List<string> filterableFields = new List<string>() { "A_B", "C_D", "E_F" };
 List<string> AB, CD , EF; 
```

现在在运行时，我从 Web 服务获取数据，并编写了一个函数来提取这些可过滤字段的值并将值存储到第二个列表。

```
private void prepareListForFilterableColumns(XDocument records)
{
    foreach (var currentField in filterableFields)
    {
        var values = (from xml in records.Descendants(z + "row")
                      let val = (string)xml.Attribute("ows_" + currentField.Replace("_", "_x0020_"))
                      where val != ""
                      orderby val
                      select val 
                     ).Distinct();

        switch (currentField)
        {
            case "A_B": AB = values.ToList(); break;
            case "C_D": CD = values.ToList(); break;
        }
    }
} 
```

现在我在想，与其在块中对分配进行硬编码，`swtich case`不如使用第一个列表名称“A_B”并从中替换“_”以指向我的第二个列表并分配`values.ToList()`给它。

我知道 c# 是一种静态语言，所以不确定我们是否可以实现这一点，但如果可以的话，它将使我的函数通用。

非常感谢您的时间和帮助。

维沙尔

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T14:12:02.680

您可以使用字符串列表字典而不是 3 个列表来存储值。

```
Dictionary<string, List<string>> val lists = new Dictionary<string,List<string>>(); 
```

并使字典的键等于过滤器：“AB”，“CD”，..

然后，`AB`您将使用`valLists["AB"]`然后可以基于字符串键引用到达列表，而不是您。

另一种选择是使用反射，但这会更慢并且不必要地更复杂一些。

# codeigniter - 在codeigniter的数据库中将数据放在xml文件中？

> ID：15434480
> 
> 赞同：0
> 
> 时间：2013-03-15T14:06:37.330
> 
> 标签：codeigniter

```
<?xml version="1.0" encoding="utf-8"?>
<products>
<category categoryName="Electronics">
<product productName="Camera Lenses Collection" productID="DSCF0001"     thumbPath="thumbs/Electronics/camera_lenses_collection-other.jpg" productPrice="250.50">
<sizes>
<size>10</size>
<size>20</size>
<size>30</size>
<size>40</size>
<size>50</size>
</sizes>
<colors>
<color>Red</color>
<color>Blue</color>
<color>Green</color>
<color>Yellow</color>
<color>Pink</color>
</colors>
</category>
</product>
</products> 
```

-嗨，我需要通过循环从表中加载数据。请帮助我-如何从数据库生成 xml 文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T14:27:21.790

从数据库生成 xml 文件很容易。您不需要循环，只需按照此操作即可。

模型功能

```
function getDataForXML(){
   return $query = $this->db->get('my_table');
   //Here you should note i am returning 
   //the query object instead of 
   //$query->result() or $query->result_array()
} 
```

控制器

```
function get_report()
{
    $this->load->model('my_model');
    $this->load->dbutil();
    $this->load->helper('file');
    // get the object
    $report = $this->my_model->getDataForXML();
    //pass it to db utility function
    $new_report = $this->dbutil->xml_from_result($report);
    //Now use it to write file. write_file helper function will do it
    write_file('xml_file.xml',$new_report);
    //Done
} 
```

现在可以使用名为 xml_file.xml 的新文件了！

资源

[数据库实用程序类](http://codeigniter.com/user_guide/database/utilities.html)

和

[文件助手](http://codeigniter.com/user_guide/helpers/file_helper.html)

# javascript - 通过Javascript打开新窗口

> ID：15434482
> 
> 赞同：-3
> 
> 时间：2013-03-15T14:06:44.860
> 
> 标签：javascript, new-window

我有一些简单的代码可以打开 reddit，但我需要它在新窗口中打开。尝试了一些不同的方法，但无法正常工作。知道要在下面的代码中添加什么吗？

```
<a href="http://www.reddit.com/submit" onclick="window.location = 'http://www.reddit.com/submit?url=' + encodeURIComponent(window.location); return false"><img src="http://www.reddit.com/static/spreddit7.gif" alt="submit to reddit" border="0" /></a> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T14:10:02.087

尝试这个

```
window.open("http://www.reddit.com/submit?url="+encodeURIComponent(window.location)) 
```

检查[此链接](http://www.w3schools.com/jsref/met_win_open.asp)以获取更多信息

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T14:12:53.480

您显然想通过添加来抑制标准链接行为

```
return false; 
```

到 onclick 处理程序。

```
<a href="#" onclick="window.open('url');return false;">label</a> 
```

考虑将该逻辑放在单独的点击处理函数中

```
function handleClick(evt) {
   var url = '' // build your url here
   window.open(url);
   evt.target.preventDefault();
} 
```

并将其添加到您的链接中

```
element.addEventListener('click', handleClick); 
```

# php - 取消 Paypal 定期付款

> ID：15434483
> 
> 赞同：2
> 
> 时间：2013-03-15T14:06:46.873
> 
> 标签：php, codeigniter, paypal, payment-gateway

我目前正在我的网站中集成贝宝定期付款流程。在我的网站中，用户可以选择取消他的贝宝定期付款。我有每个用户的 payer_id 和 payer_email。是否可以使用这些详细信息取消定期付款。如果没有，如果特定用户单击从我的网站取消定期付款，我如何取消定期选项。

谢谢你。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2017-06-21T07:19:15.347

您可以使用 PROFILE_ID 取消所有您的 paypal 定期配置文件。并使用您的定期付款配置文件 ID 执行此代码。希望这会帮助你。

```
<?php
$curl = curl_init();

curl_setopt($curl, CURLOPT_RETURNTRANSFER, true);
curl_setopt($curl, CURLOPT_SSL_VERIFYPEER, false);
curl_setopt($curl, CURLOPT_POST, true);
curl_setopt($curl, CURLOPT_URL, 'https://api-3t.sandbox.paypal.com/nvp');
curl_setopt($curl, CURLOPT_POSTFIELDS, http_build_query(array(
    'USER' => 'XXXXXXXXXXX',  //Your API User
    'PWD' => 'XXXXXXXXXXXXX',  //Your API Password
    'SIGNATURE' => 'XXXXXXXXXXXXXXXXXXXXXXXXXXX',   //Your API Signature

    'VERSION' => '108',
    'METHOD' => 'ManageRecurringPaymentsProfileStatus',
    'PROFILEID' => 'I-315LHdijsju',         //here add your profile id                      
    'ACTION'    => 'Cancel' //this can be selected in these default paypal variables (Suspend, Cancel, Reactivate)
)));

$response =    curl_exec($curl);

curl_close($curl);

$nvp = array();

if (preg_match_all('/(?<name>[^\=]+)\=(?<value>[^&]+)&?/', $response, $matches)) {
    foreach ($matches['name'] as $offset => $name) {
        $nvp[$name] = urldecode($matches['value'][$offset]);
    }
}

printf("<pre>%s</pre>",print_r($nvp, true)); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-15T14:48:34.793

您可以使用 ManageRecurringPaymentsProfileStatus API 暂停或取消配置文件。

请注意[此参考](https://www.x.com/developers/paypal/documentation-tools/express-checkout/integration-guide/ECGettingStarted)。这专门用于快速结帐，但也适用于其他贝宝集成。

此处也已对此进行了回答，以供将来参考：[您可以通过 API 取消 PayPal 自动付款吗？（通过托管按钮创建的订阅）](https://stackoverflow.com/questions/3809587/can-you-cancel-a-paypal-automatic-payment-via-api-subscription-created-via-hos)

# fluent-nhibernate - 使用 Fluent NHibernate 的父子映射不会插入子代

> ID：15434484
> 
> 赞同：0
> 
> 时间：2013-03-15T14:06:49.003
> 
> 标签：fluent-nhibernate, fluent-nhibernate-mapping

我正在尝试用 Fluent NHibernate 映射一个非常基本的父子关系。但是，在分析 SQL 时，只创建了 parent-INSERT 语句。

这种情况是一个带有其他类列表的简单类。不需要与父级的关系。插入/更新父级时，需要插入/更新子级。

> ```
>  var room = new Room();
>         room.Name = "Room1";
>         room.Courses.Add(new Course(){ Name = "Course1"});
>         room.Courses.Add(new Course(){ Name = "Course2"});
> 
>         using (var session = sessionFactory.OpenStatelessSession())
>         {
>             using (var transaction = session.BeginTransaction())
>             {
>                 session.Insert(room);
>                 transaction.Commit();
>             }
>         } 
> ```

映射看起来像这样。

> ```
> public class RoomMapping : ClassMap<Room>
> {
>     public RoomMapping()
>     {
>         Table("Rooms");
> 
>         Id(x => x.Id)
>             .GeneratedBy.SeqHiLo("seq_rooms", "1000");
> 
>         Map(x => x.Name);
> 
>         HasMany(x => x.Courses)
>             .Cascade.All();
>     }
> }
> 
> public class CourseMap : ClassMap<Course>
> {
>     public CourseMap()
>     {
>         Table("Courses");
> 
>         Id(x => x.Id)
>             .GeneratedBy.SeqHiLo("seq_courses", "1000");
> 
>         Map(x => x.Name);
>     }
> } 
> ```

我已经玩过 HasMany 的多个选项，但没有成功。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T14:13:39.790

对不起人们。我刚刚发现了。我正在无状态会话中工作。所以没有关系被管理；）

# c++ - 使用 Xcode 编写的 c++ 项目的 Makefile 存在问题

> ID：15434485
> 
> 赞同：0
> 
> 时间：2013-03-15T14:06:49.960
> 
> 标签：c++, makefile

我在 Xcode 中编写了这个 c++ 项目，现在我必须创建一个 Makefile 才能正确编译。这是生成文件：

```
CC = g++
CFLAGS =

PROG = TrainStation
MAIN = main.cpp
OBJS = ArrivalEvent.o DepartureEvent.o Event.o EventCoordinator.o InSwitchEvent.o ListItem.o OrderedList.o OutSwitchEvent.o PriorityQueue.o Train.o

# compiling rules

# WARNING: *must* have a tab before each definition
$(PROG): $(OBJS) main.o # The error was leaving out main.o from this line
    $(CC) $(CFLAGS) $(OBJS) main.o -o $(PROG)

ArrivalEvent.o: ArrivalEvent.cpp ArrivalEvent.h EventCoordinator.h InSwitchEvent.h Event.h EventCoordinator.h Train.h
    $(CC) $(CFLAGS) -c ArrivalEvent.cpp -o ArrivalEvent.o

DepartureEvent.o: DepartureEvent.cpp DepartureEvent.h OutSwitchEvent.h Event.h EventCoordinator.h Train.h
    $(CC) $(CFLAGS) -c DepartureEvent.cpp -o DepartureEvent.o

Event.o: Event.cpp Event.h EventCoordinator.h ListItem.h
    $(CC) $(CFLAGS) -c Event.cpp -o Event.o

EventCoordinator.o: EventCoordinator.cpp EventCoordinator.h OrderedList.h Event.h Train.h PriorityQueue.h ArrivalEvent.h InSwitchEvent.h
    $(CC) $(CFLAGS) -c EventCoordinator.cpp -o EventCoordinator.o

InSwitchEvent.o: InSwitchEvent.cpp InSwitchEvent.h DepartureEvent.h Event.h EventCoordinator.h Train.h
    $(CC) $(CFLAGS) -c InSwitchEvent.cpp -o InSwitchEvent.o

ListItem.o: ListItem.cpp ListItem.h
    $(CC) $(CFLAGS) -c ListItem.cpp -o ListItem.o

OrderedList.o: OrderedList.cpp OrderedList.h ListItem.h
    $(CC) $(CFLAGS) -c OrderedList.cpp -o OrderedList.o

OutSwitchEvent.o: OutSwitchEvent.cpp OutSwitchEvent.h Train.h InSwitchEvent.h Event.h EventCoordinator.h
    $(CC) $(CFLAGS) -c OutSwitchEvent.cpp -o OutSwitchEvent.o

PriorityQueue.o: PriorityQueue.cpp PriorityQueue.h OrderedList.h
    $(CC) $(CFLAGS) -c PriorityQueue.cpp -o PriorityQueue.o

Train.o: Train.cpp Train.h ListItem.h
    $(CC) $(CFLAGS) -c Train.cpp -o Train.o

main.o: $(MAIN) Train.h OrderedList.h PriorityQueue.h EventCoordinator.h 
    $(CC) $(CFLAGS) -c $(MAIN) -o main.o

clean:
    rm -f $(PROG) $(OBJS) 
```

我以前写过 Makefile，但从来没有一个有这么多文件要协调，而且它似乎跳过了 main.o 的规则 [编辑：我更新了我的 Makefile，但现在收到了这个不同的错误]

```
$ make
g++  -c ArrivalEvent.cpp -o ArrivalEvent.o
g++  -c DepartureEvent.cpp -o DepartureEvent.o
g++  -c Event.cpp -o Event.o
g++  -c EventCoordinator.cpp -o EventCoordinator.o
g++  -c InSwitchEvent.cpp -o InSwitchEvent.o
g++  -c ListItem.cpp -o ListItem.o
g++  -c OrderedList.cpp -o OrderedList.o
g++  -c OutSwitchEvent.cpp -o OutSwitchEvent.o
g++  -c PriorityQueue.cpp -o PriorityQueue.o
g++  -c Train.cpp -o Train.o
g++  main.o ArrivalEvent.o DepartureEvent.o Event.o EventCoordinator.o InSwitchEvent.o ListItem.o OrderedList.o OutSwitchEvent.o PriorityQueue.o Train.o -o TrainStation
i686-apple-darwin11-llvm-g++-4.2: main.o: No such file or directory
make: *** [TrainStation] Error 1 
```

我知道这是 g++ 的错误，它可能与我在某处遗漏文件或未链接它有关，但我似乎无法弄清楚出了什么问题。也许有新鲜眼光的人可以发现问题？

**编辑：问题已解决**

我的问题是`$(OBJS)`不包含`main.o`，所以规则`$(PROG)`根本不依赖`main.o`。一旦我添加`main.o`到规则中`$(PROG)`，规则`main.o`就会正确执行。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T14:11:37.043

之后`MAIN = main.cpp`你永远不要使用这个变量来编译和链接 main.cpp 文件。

改变这个：

```
$(CC) $(CFLAGS) $(OBJS) -o $(PROG) 
```

对此：

```
$(CC) $(CFLAGS) $(OBJS) main.o -o $(PROG) 
```

# c++ - C++ 11线程初始化与成员函数编译错误

> ID：15434492
> 
> 赞同：13
> 
> 时间：2013-03-15T14:07:12.817
> 
> 标签：c++, multithreading, class, c++11, member

我刚刚开始使用 C++ 11 线程，并且一直在努力解决一个（可能是愚蠢的）错误。这是我的示例程序：

```
#include <iostream>
#include <thread>
#include <future>
using namespace std;

class A {
public:
  A() {
    cout << "A constructor\n";
  }

  void foo() {
    cout << "I'm foo() and I greet you.\n";
  }

  static void foo2() {
    cout << "I'm foo2() and I am static!\n";
  }

  void operator()() {
    cout << "I'm the operator(). Hi there!\n";
  }
};

void hello1() {
  cout << "Hello from outside class A\n";
}

int main() {
  A obj;
  thread t1(hello1); //  it works
  thread t2(A::foo2); // it works
  thread t3(obj.foo); // error
  thread t4(obj);     // it works

  t1.join();
  t2.join();
  t3.join();
  t4.join();
  return 0;
} 
```

是否可以从纯成员函数启动线程？如果不是，我如何从对象*obj包装我的**foo*函数以创建这样的线程？提前致谢！

 *这是编译错误：

> thread_test.cpp：在函数'int main()'中：thread_test.cpp:32:22：错误：没有匹配函数调用'std::thread::thread()'</p>
> 
> thread_test.cpp:32:22：注意：候选人是：
> 
> /usr/include/c++/4.6/thread:133:7: 注意：std::thread::thread(_Callable&&, _Args&& ...) [with _Callable = void (A::*)(), _Args = {} ]
> 
> /usr/include/c++/4.6/thread:133:7: 注意：没有已知的参数 1 从 '' 到 'void (A::*&&)()' 的转换</p>
> 
> /usr/include/c++/4.6/thread:128:5: 注意：std::thread::thread(std::thread&&)
> 
> /usr/include/c++/4.6/thread:128:5: 注意：没有已知的参数 1 从 '' 到 'std::thread&&' 的转换</p>
> 
> /usr/include/c++/4.6/thread:124:5: 注意：std::thread::thread()
> 
> /usr/include/c++/4.6/thread:124:5：注意：候选人需要 0 个参数，提供 1 个

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-03-15T14:09:53.703

你需要一个不带参数的可调用对象，所以

```
thread t3(&A::foo, &obj); 
```

应该做的伎俩。这具有创建调用的可调用实体的`A::foo`效果`obj`。

原因是非静态成员函数`A`采用类型的隐式第一个参数（可能是 cv 限定的）`A*`。当你打电话时，`obj.foo()`你实际上是在打电话`A::foo(&obj)`。一旦你知道了，上面的咒语就很有意义了。*

# c# - WinRT 应用程序登录通过按 Enter 键和 MVVM 灯

> ID：15434494
> 
> 赞同：2
> 
> 时间：2013-03-15T14:07:13.490
> 
> 标签：c#, windows-8, mvvm-light, winrt-xaml

我正在开发一个用户需要输入用户名和密码才能登录的应用程序。

我正在使用 MVVM 灯光框架将我的视图与我的视图模型分开。现在我的视图上有一个按钮，在相应的视图模型上捕获了点击事件。

如果用户按下输入按钮，我也希望有可能他们也可以登录。在 WPF 中，您可以将按钮设置为 IsDefault，但在 WinRT 中似乎不可能。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-15T14:15:16.630

我认为您可以将此代码放入您的视图模型中并检查是否按下了回车键，然后在按下它时启动与按下按钮时相同的方法

```
Windows.UI.Xaml.Window.Current.CoreWindow.KeyDown += (sender, arg) =>
        {
            if (arg.VirtualKey == Windows.System.VirtualKey.Enter)
            {
                //Your login method
            }

        }; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-15T15:04:56.987

根据我的评论，我不建议在视图模型中使用 UI 代码。使用触发器绑定到文本框中的按键命令。

```
<TextBox>
        <i:Interaction.Triggers>
            <i:EventTrigger EventName="KeyDown">
                <cmd:EventToCommandCommand="{Binding MyCommand}"/>
            </i:EventTrigger>
        </i:Interaction.Triggers>
    </TextBox> 
```

请务必在您的 xaml 声明中包含以下内容：

```
xmlns:i="clr-namespace:System.Windows.Interactivity;assembly=System.Windows.Interactivity"
             xmlns:cmd="http://www.galasoft.ch/mvvmlight" 
```

希望这可以帮助

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-03-02T09:00:38.037

页面上有一个名为 OnKeyDown() 的虚拟方法，您可以覆盖该方法。这比订阅事件更安全，更适合 MVVM。我更喜欢将 DataContext 转换为我的视图模型类型并调用我想要的任何内容。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-05-10T19:45:14.320

可以通过以下行为实现此目的：

```
<interactivity:Interaction.Behaviors>
  <core:EventTriggerBehavior EventName="KeyDown">
    <core:CallMethodAction TargetObject="{Binding}" MethodName="Load" />
  </core:EventTriggerBehavior>
</interactivity:Interaction.Behaviors> 
```

你必须参考：

```
xmlns:interactivity="using:Microsoft.Xaml.Interactivity"
xmlns:core="using:Microsoft.Xaml.Interactions.Core" 
```

但是，它仅适用于所有键。我没有看到任何过滤某个键的可能性。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-07-05T10:08:40.177

有：

```
xmlns:i="using:WinRtBehaviors"
xmlns:b="using:Win8nl.Behaviors"

<i:Interaction.Behaviors>
    <b:EventToCommandBehavior Event="Loaded" Command="LoadedCommand"/>
</i:Interaction.Behaviors> 
```

来自 Nuget。

# android - Android traceroute / nslookup 与 NDK

> ID：15434495
> 
> 赞同：0
> 
> 时间：2013-03-15T14:07:16.723
> 
> 标签：android, networking, android-ndk

我知道无法运行`traceroute`或`nslookup`从 Android 应用程序运行。但是是否可以在没有 root 权限的情况下使用 NDK？以前有人做过这种工作吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T14:11:07.433

试试这个来源，希望对你有帮助：

[https://code.google.com/p/yangapp/downloads/detail?name=busybox-1.20.2r2](https://code.google.com/p/yangapp/downloads/detail?name=busybox-1.20.2r2)

# jquery - 从 Select 更改课程

> ID：15434498
> 
> 赞同：1
> 
> 时间：2013-03-15T14:07:27.153
> 
> 标签：jquery, html

我正在尝试通过下拉列表中的值在 div 中附加一个类。我已经设法做到了，但是，以前的课程仍然在 div 中并且没有被替换

所以而不是得到

```
<div id="layoutblock" class="row one-column"> 
```

我越来越

```
<div id="layoutblock" class="row one-column two-columns three-columns"> 
```

课程正在复合

**的HTML**

```
<select id="layout">
<option value="one-column">one-column</option>
<option value="two-columns">two-column</option>
<option value="three-columns">three-column</option>
</select>

<div id="layoutblock" class="row"></div> 
```

**jQuery**

```
<script type="text/javascript">

$("#layout").change(function () {
  var str = "";
$("#layout option:selected").each(function () {
  str += $(this).val();   
  });
$('#layoutblock').removeClass($(this) str);
$('#layoutblock').toggleClass(str);
})
.change();

</script> 
```

任何想法，谢谢

问候说

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T14:20:41.337

试试这个代码，

```
var oldVal = "";
$(function() {
    $("#layout").change(function () {
        if(oldVal) {
            $('#layoutblock').removeClass(oldVal);
        }
        $('#layoutblock').addClass($(this).val());
        oldVal = $(this).val(); //Update the old value   
    }).change(); 
 }) 
```

演示：http: [//jsfiddle.net/hwznY/](http://jsfiddle.net/hwznY/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T14:22:11.187

尝试这个：

```
$("#layout").change(function () {
    $('#layoutblock')
        .removeClass()
        .addClass("row")
        .addClass($(this).val());
})
.change(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-15T14:16:48.567

## [***jsFiddle 演示***](http://jsfiddle.net/tCWt7/1/)

```
$(function () {
    $("#layout").change(function () {
        $('#layoutblock')[0].className = "row " + $(this).val();
    });
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-15T14:22:18.460

想试试

```
$("#layout").change(function () {
    $("#layoutblock").removeAttr("class");
    $("#layoutblock").attr("class", $("#layout option:selected").val()); 

    //Optional alert showing the new class of the div
    alert($("#layoutblock").attr("class"));
}); 
```

演示：http: [//jsfiddle.net/MvxLf/](http://jsfiddle.net/MvxLf/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-15T14:15:19.227

尝试这个

```
$("select option:not(:selected)").each(function () {    
var value  = $(this).val();
$("#layout").removeClass(value);
 $("#layout").addClass($('#layout :selected').val());
}); 
```

# silverlight - silverlight 绑定中的自定义日期格式

> ID：15434499
> 
> 赞同：0
> 
> 时间：2013-03-15T14:07:29.280
> 
> 标签：silverlight, format-string

尝试使用 Silverlight 5 在我的 XAML 中格式化日期时间绑定值，如下所示：

```
<TextBlock Text="{Binding ContactDate, Mode=OneWay, StringFormat={}{0:'dd/MM/yyyy'}}" Margin="5,0" /> 
```

我收到以下错误：标记扩展结束后出现意外令牌。

这快把我逼疯了！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T14:43:33.287

试试：Text="{Binding ContactDate, Mode=OneWay, StringFormat='{}{0:dd/MM/yyyy}'}"

除非您的意思是要在日期字符串之前和之后使用单引号。

# sql - 连接年月时加零

> ID：15434503
> 
> 赞同：1
> 
> 时间：2013-03-15T14:07:44.407
> 
> 标签：sql, sql-server

我有一个表，其中有两个表示年份和月份的 int 字段，名为`s_yr`and `s_mnt`。

我想要一个可以连接这些并返回如下内容的查询：**201301**但我从一月到九月的所有月份都得到**20131 。**

这是我使用的查询。任何想法如何解决这一问题？

```
select convert(varchar(4), s_yr) + convert(varchar(2), y_mnt) AS Year_Month 
```

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-15T14:08:48.760

尝试为此使用 RIGHT 功能

```
select convert(varchar(4), s_yr) 
   + right('0'+ convert(varchar(2), s_mnt),2) AS Year_Month 
```

# c# - 在 C# 中使用全局热键捕获键

> ID：15434505
> 
> 赞同：5
> 
> 时间：2013-03-15T14:07:52.427
> 
> 标签：c#, keyboard-hook, global-hotkey

我有一个在后台运行的应用程序，就像我可以将我的应用程序保留在系统托盘中一样。如果它保留在系统托盘上，我的应用程序将完成它的工作。每当用户按 F10 或 F9 时，都会完成一些工作。我试过这个：

```
public partial class Form1 : Form
{
    public int a = 1;

    [DllImport("user32.dll")]
    public static extern bool RegisterHotKey(IntPtr hWnd, int id, int fsModifiers, int vlc);
    [DllImport("user32.dll")]
    public static extern bool UnregisterHotKey(IntPtr hWnd, int id);

    [DllImport("User32.dll")]
    private static extern short GetAsyncKeyState(System.Windows.Forms.Keys vKey);
    [DllImport("User32.dll")]
    private static extern short GetAsyncKeyState(System.Int32 vKey);

    const int MYACTION_HOTKEY_ID = 1;

    public Form1()
    {
        InitializeComponent();
        RegisterHotKey(this.Handle, MYACTION_HOTKEY_ID, 0, (int) Keys.F9);
        RegisterHotKey(this.Handle, MYACTION_HOTKEY_ID, 0, (int)Keys.F10);

        this.ShowInTaskbar = false;
    }

    protected override void WndProc(ref Message m)
    {
        if (m.Msg == 0x0312 && m.WParam.ToInt32() == MYACTION_HOTKEY_ID && (GetAsyncKeyState(Keys.F9) == -32767))
        {
            if ((a % 2) != 0)
            {
                a++;
                MessageBox.Show(a.ToString()+"not equal F9");
                label1.Text = "not equal F9";
            }

            if ((a % 2) == 0)
            {
                a++;
                MessageBox.Show(a.ToString()+"equal F9");
                label1.Text = " equal F9";
            }

        }

        else if (m.Msg == 0x0312 && m.WParam.ToInt32() == MYACTION_HOTKEY_ID && (GetAsyncKeyState(Keys.F10) == -32767))
        {
            if ((a % 2) != 0)
            {
                a++;
                MessageBox.Show(a.ToString() + "not equal F10");
                label1.Text = "not equal F10";
            }

            if ((a % 2) == 0)
            {
                a++;
                MessageBox.Show(a.ToString() + "equal F10");
                label1.Text = " equal F10";
            }

        }
        base.WndProc(ref m);
    }

} 
```

当我使用 set "this.ShowInTaskbar = false" 这一行时，它不起作用。但如果我不设置它，它工作正常。对于我的应用程序，我必须使用这一行。我该如何解决这个问题？？？？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-15T14:15:57.140

您需要订阅操作系统通过本机函数调用（如`RegisterHotKey()`. 当您调用此函数时，您可以通过指定窗口的地址来告诉操作系统将消息发送到哪个窗口`Handle`，这可以被认为是一个地址。当您设置`ShowInTaskbar = false`句柄更改时，操作系统将不知道从哪里联系您。

见第一个论点：

```
RegisterHotKey(this.Handle, MYACTION_HOTKEY_ID, 0, (int) Keys.F9); 
```

要解决您的问题，您可以创建一个派生自[`NativeWindow`](http://msdn.microsoft.com/en-GB/library/system.windows.forms.nativewindow.aspx)“*提供窗口句柄和窗口过程的低级封装*”的类，并在该类中（或至少使用该类的句柄，具体取决于您的实现），注册使用永远不会改变的句柄的热键。

```
public sealed class HotkeyManager : NativeWindow, IDisposable
{
    public HotkeyManager()
    {
        CreateHandle(new CreateParams());
    }

    protected override void WndProc(ref Message m)
    {
        if (m.Msg == Constants.WM_HOTKEY)
        {
             //handle hotkey message
        }
        base.WndProc(ref m);
    }

    public void Dispose()
    {
        DestroyHandle();
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T14:13:10.783

据我所知，每当您更改“ShowInTaskbar”状态时，您都需要重新注册热键。

其他人也有类似的问题；看到[这个线程](http://www.pcreview.co.uk/forums/registerhotkey-and-showintaskbar-t1236248.html)。

# html - 图片不在网站上显示，但在本地显示？

> ID：15434506
> 
> 赞同：0
> 
> 时间：2013-03-15T14:07:55.717
> 
> 标签：html, css, image, browser

我正在创建一个网站，该网站由一些图像组成。在本地，一切都正确显示，但是当我将其上传到我的服务器时，某些图像未显示。根本不显示任何 GIF / 动画 GIF，并且某些 jpeg 图像未显示（而其他图像则可以）。唯一似乎没有受到影响的图像是 PNG，它显示正常。

如果我检查 FireBug 并将鼠标悬停在图像链接上，我会收到消息`Failed to load given URL`。

如果我在服务器上输入指向图像的直接 URL 链接，则图像会被下载，因此它肯定存在。

这是我的CSS：

```
body {
    background-color: #000;
    background-repeat:no-repeat;
    background-position:top;
    background-image:url(../images/background2.gif);
} 
```

我使用相同的代码创建了另一个网站，但使用了不同的 background.gif 图像并且一切都正确显示，所以我不确定还有什么不同？

另外，我尝试从服务器中删除图像并重新添加它们，但仍然没有运气。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T15:05:01.187

而不是使用：

```
background-image:url("../images/background2.gif"); 
```

利用：

```
background-image:url("/images/background2.gif"); 
```

以“/”开头的移动到根目录并从那里开始

以“../”开头的目录向后移动一个目录并从那里开始

（在路径上始终包含引号也是一个好习惯）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T14:15:44.590

尝试在 url 中输入完整路径：

例如`background-image:url(http://www.your-site.com/images/background2.gif)`

- 如果可行，请检查您的路径并确保 css url 与您的目录结构匹配。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-26T11:57:27.443

感谢大家的帮助，事实证明这是我工作互联网上某种带宽限制的问题。如果我从其他任何地方查看该站点，图像都已加载......我真的以为我疯了一段时间！再次感谢。

# jsf-2 - Apache MyFaces：VariableMapperWrapper.resolveVariable，StackOverflowError：无法解析变量 [溢出]

> ID：15434507
> 
> 赞同：2
> 
> 时间：2013-03-15T14:08:00.537
> 
> 标签：jsf-2, facelets

我想知道创建包含一些包含的新 Facelets 的这个异常的原因是什么。EL分辨率内部显然存在递归。该`VariableMapperWrapper.resolveVariable`方法的调试没有显示任何特别之处：正在发生 EL 解析...

```
14.03.2013 17:20:13 org.apache.catalina.core.StandardWrapperValve invoke
SCHWERWIEGEND: Servlet.service() for servlet Faces Servlet threw exception
java.lang.StackOverflowError
        at java.lang.AbstractStringBuilder.append(AbstractStringBuilder.java:390)
        at java.lang.StringBuilder.append(StringBuilder.java:119)
        at org.apache.myfaces.view.facelets.el.VariableMapperWrapper.resolveVariable(VariableMapperWrapper.java:96)
        at org.apache.myfaces.view.facelets.el.VariableMapperWrapper.resolveVariable(VariableMapperWrapper.java:89)
        at org.apache.myfaces.view.facelets.el.VariableMapperWrapper.resolveVariable(VariableMapperWrapper.java:89)
             ... (recursion) ...
        at org.apache.myfaces.view.facelets.el.VariableMapperWrapper.resolveVariable(VariableMapperWrapper.java:89)
        at org.apache.myfaces.view.facelets.el.VariableMapperWrapper.resolveVariable(VariableMapperWrapper.java:89)
        at org.apache.myfaces.view.facelets.el.VariableMapperWrapper.resolveVariable(VariableMapperWrapper.java:89)
        at org.apache.myfaces.view.facelets.el.VariableMapperWrapper.resolveVariable(VariableMapperWrapper.java:89)
        at com.sun.el.lang.VariableMapperFactory.resolveVariable(VariableMapperFactory.java:63)
        at com.sun.el.lang.ExpressionBuilder.visit(ExpressionBuilder.java:234)
        at com.sun.el.parser.SimpleNode.accept(SimpleNode.java:172)
        at com.sun.el.parser.SimpleNode.accept(SimpleNode.java:175)
        at com.sun.el.lang.ExpressionBuilder.prepare(ExpressionBuilder.java:186)
        at com.sun.el.lang.ExpressionBuilder.build(ExpressionBuilder.java:197)
        at com.sun.el.lang.ExpressionBuilder.createValueExpression(ExpressionBuilder.java:240)
        at com.sun.el.ExpressionFactoryImpl.createValueExpression(ExpressionFactoryImpl.java:98)
        at org.apache.myfaces.view.facelets.tag.TagAttributeImpl.getValueExpression(TagAttributeImpl.java:486)
        at org.apache.myfaces.view.facelets.tag.jsf.ValueHolderRule$DynamicValueExpressionMetadata.applyMetadata(ValueHolderRule.java:99)
        at org.apache.myfaces.view.facelets.tag.MetadataImpl.applyMetadata(MetadataImpl.java:45)
        at javax.faces.view.facelets.MetaTagHandler.setAttributes(MetaTagHandler.java:66)
        at javax.faces.view.facelets.DelegatingMetaTagHandler.setAttributes(DelegatingMetaTagHandler.java:93)
        at org.apache.myfaces.view.facelets.tag.jsf.ComponentTagHandlerDelegate.apply(ComponentTagHandlerDelegate.java:237)
        at javax.faces.view.facelets.DelegatingMetaTagHandler.apply(DelegatingMetaTagHandler.java:53)
        at javax.faces.view.facelets.CompositeFaceletHandler.apply(CompositeFaceletHandler.java:49)
        ... 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-15T14:53:33.437

终于在 Facelets XHTML 代码中出现了一种特殊类型的递归。我注意到其他人通过包含片段链创建了这样的递归，例如 a.xhtml 包括 b.xhtml 包括 a.xhtml

在我的例子中，一个包含的片段包含来自 XHTML 主页面的复制和粘贴错误，片段标题部分：

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:ui="http://java.sun.com/jsf/facelets">
<ui:composition template="xyz.xhtml">
... 
```

-->`template="xyz.xhtml"`包含上面的代码片段 --> 递归。

**删除反正错误的模板属性解决了这个问题。**最后，作为此问题症状的上述异常与错误原因相差甚远。决议一点也不明显。

# cocos2d-iphone - 如何使 CCSprite 对象随孩子一起淡出

> ID：15434509
> 
> 赞同：1
> 
> 时间：2013-03-15T14:08:06.537
> 
> 标签：cocos2d-iphone

假设我有一个名为 sprite 的 CCSprite 对象，并添加一个标签作为它的孩子。当我发现我是否调用

```
sprite.opacity = 0;
[sprite runAction:[CCFadeTo actionWithDuration:5.0 opacity:255]]; 
```

标签不会随着精灵褪色，而是立即出现。似乎不透明度属性不能从其父级继承。所以如果我希望精灵和它的子级同时褪色而没有必须为父母和孩子运行Action。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T09:50:34.810

您还可以`CCRenderTexture`用来渲染整个节点层次结构并像单个节点一样操作它。

使用此解决方案，如果您将不透明度单独传播给子级，您将避免重叠节点导致更暗不透明度的问题。

这种技术在这里解释：http: [//2sa-studio.blogspot.com/2013/01/fading-node-hierarchy-with.html](http://2sa-studio.blogspot.com/2013/01/fading-node-hierarchy-with.html)

# php - 如何使用 PHP 永久更新 PATH 变量

> ID：15434521
> 
> 赞同：0
> 
> 时间：2013-03-15T14:08:51.987
> 
> 标签：php, registry, environment-variables

您好，我想`Path`通过 PHP 脚本永久更新环境变量。我知道，`putenv()`但这不是永久性的。我已经阅读了一些生成`.reg`具有以下内容的文件的位置。

```
 Windows Registry Editor Version 5.00
 [HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Control\Session Manager\Environment]
                    'PATH'='c:/abc/test/ImageMagick-6.7.8-Q8/convert.exe' 
```

我已经生成了包含内容的文件。

当我运行此文件时，它显示文件已成功运行，并且包含在文件中的键值已成功添加到注册表中。但是当我去路径变量检查时，我的值不存在:-(任何人都可以告诉我为什么会这样。我正在使用`window 7`。但我的工作也必须与window xp兼容。或者有没有其他方法完成这个任务？

需要建议......

最好的祝福

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T11:49:16.570

创建进程时，注册表中的 PATH 环境变量会被复制到进程的环境中。

cmd.exe（命令窗口或shell）本身就是一个进程。您必须`SET PATH=`在外壳内进行更改。

如果您打开一个新的命令窗口，您应该设置新的 PATH。另请参阅[以编程方式将目录添加到 Windows PATH 环境变量](https://stackoverflow.com/questions/1919125/programmatically-adding-a-directory-to-windows-path-environment-variable?rq=1)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T14:07:18.243

嗨，我已经解决了这个问题。我已经通过创建`.bat`文件解决了它。文件的内容`.bat`看起来像

```
 @echo off
 set KeyName=Path
 set KeyValue="D:\songs;%PATH%"
 setx -m %KeyName% %KeyValue% 
```

`-m`如果您想将其设置为 ，则使用`system level for all users`。如果您希望它仅为当前用户设置，请删除`-m`. 上述命令将设置`D:\songs`在环境`Path`变量中。要运行它，您需要成为系统管理员。

干杯，如果这对任何人有用:-)

# python - OAuth 2.0 + Google Drive + GAE w/ Python 的简单流程

> ID：15434528
> 
> 赞同：1
> 
> 时间：2013-03-15T14:09:14.530
> 
> 标签：python, google-app-engine, oauth-2.0, google-drive-api

我需要使用 OAuth 2.0 对用户进行身份验证，然后在 Python 中的 Google App Engine 中访问他的 Google drive.file。

我花了几天时间试图弄清楚这一点，但谷歌开发者页面在解释事情方面真的很糟糕，他们希望用户拥有专业知识。

有没有你推荐的文章，或者我接近这个错误。 **我的应用程序基本上想在用户 Google 驱动器帐户上保存文件。**

# .net - 带有 .NET 网络表单的 HTML5 required="" 属性

> ID：15434535
> 
> 赞同：10
> 
> 时间：2013-03-15T14:09:35.063
> 
> 标签：.net, html, webforms

我正在尝试`required`在我的 .NET 4.5 webforms 应用程序中的表单字段上使用新属性。

但是，由于页面上的所有控件只有一个`<form>`（webforms 样式），因此浏览器不知道在按下提交按钮时要验证哪些字段。

下面附上了具有登录功能和页面搜索的页面的剥离版本。

当我单击搜索按钮时，我的浏览器告诉我必须先填写用户名和密码字段。当我尝试登录时，它告诉我必须在搜索字段中输入一些文本。因为所有字段都是同一个`<form>`标签的孩子。

其他人有这个问题或想出了解决方案吗？我想使用 HTML5 属性进行表单验证，没有 javascript 解决方案。

```
<!DOCTYPE html>

<html>
<head>
    <title>Title</title>
</head>
<body>
  <form method="post" runat="server" id="mainform">

    <%// Search %>
    <asp:Panel runat="server" DefaultButton="searchButton" >

      <asp:TextBox runat="server" ID="searchQuery" ClientIDMode="Static" required="required" />
      <asp:Button runat="server" ID="searchButton" ClientIDMode="Static" Text="Search"/>

    </asp:Panel>

    <%// Login %>
    <asp:Panel runat="server" DefaultButton="signInButton">

      <label for="inputusername">Username</label>
      <asp:TextBox runat="server" ClientIDMode="Static" ID="inputusername" required="required" />

      <label for="inputpassword">Password</label>
      <asp:TextBox runat="server" TextMode="Password" ClientIDMode="Static" ID="inputpassword" required="required" />

      <asp:Button ID="signInButton" runat="server" />

    </asp:Panel>

  </form>
</body>
</html>

</html> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2015-03-25T09:42:00.033

请试试这个..它对我有用..

```
<asp:TextBox runat="server" 
             ClientIDMode="Static" 
             ID="inputusername"                    
             required /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-12-13T14:07:15.730

将 novalidate 属性添加到“搜索”按钮。就这么容易。

[http://www.w3schools.com/tags/att_form_novalidate.asp](http://www.w3schools.com/tags/att_form_novalidate.asp)

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2014-06-29T15:02:21.980

由于 ASP.Net Web 窗体编程模型不允许多个 HTML 标记，因此您无法利用这一点。

# android - 如何动态添加锁屏小部件

> ID：15434536
> 
> 赞同：1
> 
> 时间：2013-03-15T14:09:35.750
> 
> 标签：android, android-widget, android-appwidget, android-4.2-jelly-bean, lockscreen

Google Play 音乐应用在播放音乐时（在果冻豆上）动态添加了一个特殊的锁屏小部件，并在退出后将其删除。该小部件无法通过拖动手动删除，并且当我解锁手机时，它始终是除其他锁屏小部件之外的顶部。

如何实现这个特殊的动态锁屏小部件？我只能找到有关常规锁屏小部件的文档，但不是为此。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-03-23T23:45:12.380

我一直在寻找同样的东西，发现这是通过使用 RemoteControlClient 完成的，在这里查看@CommonsWare 答案[What is RemoteControlClient in Android 4.0?](https://stackoverflow.com/questions/12217652/what-is-remotecontrolclient-in-android-4-0)

# javascript - 在我的文本字段中拆分数据

> ID：15434539
> 
> 赞同：0
> 
> 时间：2013-03-15T14:09:42.723
> 
> 标签：javascript

您好，我对 javascipt 很陌生，所以请解释清楚。我目前正在运行一个 php 页面，其中包括：

```
<input type="text" id="data"/>

<script>
document.getElementById("data").value = localStorage.getItem('itemsArray');
</script> 
```

这个项目数组包含这样保存的对象：

```
function save(){

var oldItems = JSON.parse(localStorage.getItem('itemsArray')) || [];

var newItem = {};
var num = document.getElementById("num").value;

newItem[num] = {
    "methv": document.getElementById("methv").value
    ,'q1': document.getElementById("q1").value,
    'q2':document.ge27548":{"methv":"dont know","q1":"-","q2":"-","q3":"U","q4":"-","comm":""}},{"1173627548":{"methv":"dont know","q1":"-","q2":"-","q3":"U","q4":"-","comm":""}},{"1173627548":{"methv":"dont know","q1":"-","q2":"-","q3":"U","q4":"-","comm":""}},{"1173627548":{"methv":"dont know","q1":"-","q2":"-","q3":"U","q4":"-","comm":""}},{"1173627548":{"methv":"dont know","q1":"-","q2":"-","q3":"U","q4":"-","comm":""}},{"1173627548":{"methv":"dont know","q1":"-","q2":"-","q3":"U","q4":"-","comm":""}}]tElementById("q2").value,
    'q3':document.getElementById("q3").value,
    'q4':document.getElementById("q4").value,
    'comm':document.getElementById("comm").value
};

oldItems.push(newItem);

localStorage.setItem('itemsArray', JSON.stringify(oldItems));} 
```

页面的结果如下所示：

`[{"1173627548":{"methv":"dont know","q1":"-","q2":"-","q3":"U","q4":"-","comm":""}},{"1173627548":{"methv":"dont know","q1":"-","q2":"-","q3":"U","q4":"-","comm":""}},{"1173627548":{"methv":"dont know","q1":"-","q2":"-","q3":"U","q4":"-","comm":""}},{"1173627548":{"methv":"dont know","q1":"-","q2":"-","q3":"U","q4":"-","comm":""}},{"1173627548":{"methv":"dont know","q1":"-","q2":"-","q3":"U","q4":"-","comm":""}},{"1173627548":{"methv":"dont know","q1":"-","q2":"-","q3":"U","q4":"-","comm":""}}]`

无论如何我可以拆分数据，这样我就可以像循环或其他东西一样一次操作它。例如：

第一次：

```
{"1173627548":{"methv":"dont know","q1":"-","q2":"-","q3":"U","q4":"-","comm":""}} 
```

下一个：

```
{"1173627548":{"methv":"dont know","q1":"-","q2":"-","q3":"U","q4":"-","comm":""}} 
```

等等

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T14:19:34.470

您应该 JSON.parse() 它就像填充 oldItems 数组时的 save() 方法一样，然后您可以循环生成的数组。

示例代码：

```
<input type="text" id="data"/>

<script>
 var myArray = JSON.parse(localStorage.getItem('itemsArray')) || [];
 for (var i = 0; i < myArray.length; i++) {
    var element = myArray[i];
    // Do something with element.
 }
</script> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T14:27:00.980

数据已经在一个数组中返回，您可以使用标准的 for 循环遍历该数组。但是，您需要先对其进行解析，然后才能拥有可以使用标准对象方法访问的对象。

例如：

```
var allItems = JSON.parse(localStorage.getItem('itemsArray')) || [];
for(var i = 0; i < allItems.length; i++) {
  var item = allItems[i];
  console.log('Current item: %o', item);
  // do whatever you want to it, etc.
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-15T14:22:00.380

您好 看起来您的保存脚本正在从文本字段中获取数据并将它们作为对象添加到数组中。

该数组存储在您的本地存储中，您可以像这样获取它：

```
var items = JSON.parse(localStorage.getItem('itemsArray')) || []; 
```

由于这是一个数组，您应该能够通过一个简单的 for 循环来遍历它：

```
for(var i in items){
  // this has the i object within the array
  var item = items[i];

  // if you dont know the names of the keys in the array
  // you can loop through this again using another loop
  for(var j in item){
    // you can then change this key like so:
    items[i][j] = item[j].toUpperCase(); // (this makes the value upper-case for example)
  }

  // if you do know the names then you can just change them directly
  items[i].q1 = items[i].q1.toUpperCase();

} 
```

# javascript - 如何取消计时？

> ID：15434541
> 
> 赞同：3
> 
> 时间：2013-03-15T14:09:48.680
> 
> 标签：javascript, jquery

如果单击切换按钮，它下面的代码会计算分钟和秒。如果单击/切换，是否可以使它取消所有内容，这意味着我可以单击另一个切换按钮。

```
function toggle(ths) {

    var clicked = $(ths).val();
    $("#lblType").html(clicked);
    $("#setCount").html(" minutes : " + minutes + " seconds : " + count);

       count = count + 1;
       if (count % 60 == 0) {
           minutes += 1;
           count = 0;
       }
        timer = setTimeout("toggle()", 1000);

    }

       <div ><label id="lblType"></label>
          <label id="setCount"></label>
     </div></p>
     <div id="planned"></div> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-15T14:10:50.670

只需致电[`clearTimeout()`](https://developer.mozilla.org/en-US/docs/DOM/window.clearTimeout)：

```
clearTimeout(timer); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T14:11:27.163

您可以使用`clearTimeout()`

```
clearTimeout(timer); 
```

[https://developer.mozilla.org/en/docs/DOM/window.clearTimeout](https://developer.mozilla.org/en/docs/DOM/window.clearTimeout)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-15T14:12:00.947

`window.clearTimeout(timer)`

查看[http://www.w3schools.com/js/js_timing.asp](http://www.w3schools.com/js/js_timing.asp)了解更多信息。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-15T14:12:05.707

通过使用`cleartimeout(); clearinterval();`

[http://www.w3schools.com/jsref/met_win_cleartimeout.asp](http://www.w3schools.com/jsref/met_win_cleartimeout.asp)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-15T14:13:03.377

```
var timer=null;

function toggle(ths) {
    var clicked = $(ths).val();
    $("#lblType").html(clicked);
    $("#setCount").html(" minutes : " + minutes + " seconds : " + count);

       count = count + 1;
       if (count % 60 == 0) {
           minutes += 1;
           count = 0;
       }
        timer = setTimeout("toggle()", 1000);

    }

function quitTimer(){
  window.clearTimeout(timer);
  timer = null;
} 
```

# perl - 通过 perl 排序对 Vim 行进行排序（因为内置排序在 Windows 7 中无法正确处理 UTF8）

> ID：15434543
> 
> 赞同：1
> 
> 时间：2013-03-15T14:09:49.867
> 
> 标签：perl, sorting, vim, utf-8, text-editor

我必须编辑一个包含超过 600000 个 UTF8 格式的俄语小写单词的大型文本文件。

每个单词都位于单独的行中，并且文件已通过 Perl 脚本（使用其`sort`函数）成功排序：

![在此处输入图像描述](../Images/53233184ea00e4d60a697955d1c7e3a7.png)

字符范围是`0x0430 - 0x044F`（请参见[Unicode 范围图](http://www.unicode.org/charts/PDF/U0400.pdf)）。

**我的问题是：**我必须在编辑文件及其部分的过程中保持文件的排序，但是当我使用 Vim 的内置程序（或者是 Windows）`%!sort`时，俄语字母按其数字代码排序，而不是按字母顺序排序。

**我的问题是：**我`perl`在`%path%`- 我怎么能用它来对我在 Vim 编辑器中编辑的文件（整个和部分）进行排序？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T14:21:14.783

一定要看

```
:help perldo 
```

查看是否为您的 Vim 副本内置了 perl 支持。

或者，

```
 %!perl -e 'print foreach sort (<>)' 
```

应该让你开始使用外部 Perl

PS。另请参阅，`help :sort`因为我不太确定您直到现在一直在使用 Vim 排序

**更新**我刚刚尝试使用来自[http://en.wiktionary.org/wiki/User:Dart_evader/Russian_1-1000](http://en.wiktionary.org/wiki/User:Dart_evader/Russian_1-1000)的 1000 个单词，并使用像上面这样的“外部”perl oneliner 与刚刚做的结果***完全相同（在 linux 上）***

```
:%sort 
```

# java - 从非 void 函数修改对象

> ID：15434551
> 
> 赞同：0
> 
> 时间：2013-03-15T14:10:12.953
> 
> 标签：java, class, function, void

我的 Java 类有一些问题。当我调用函数（例如 int getCapacity(Edge e)）时，它会更改我的对象（chagne Edge e），我不想这样做。不应该只 void 函数改变对象吗？有什么帮助吗？

```
public class Edge{

    private int start;

    private int end;

    private int capacity;  

    private int flow;  

    public Edge(int p, int k, int cap) {
        this.start = p;
        this.end = k;
        this.capacity = cap;
        this.flow=0;
    }

    public void setStart(int s){
            this.start = s;
    }

    public static int getCapacity(Edge e){
            e.setStart(-1);
            return e.capacity;
    }

    public static void main(String[] args){
        Edge e= new Edge();
        int k=getCapacity(e));
        e.print();
    }
} 
```

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-15T14:12:31.433

> 不应该只 void 函数改变对象吗？

不必要。一个非常简单的例子是`StringBuilder`，几乎所有的方法都返回`this`，所以你可以这样写：

```
builder.append(x).append(y); 
```

但是，使 getter 修改状态令人惊讶*。*这对我来说听起来是个坏主意。目前尚不清楚为什么在这种特殊情况下您*要*更改开始，但您当然可以更改您的方法以不这样做。

不过，即使这条规则*偶尔*也会出错。一个简单的例子是 LRU 缓存，从中获取数据*确实*会影响状态，因为它会在缓存溢出时更改保留哪些记录。不过这种情况比较少见。

也不清楚为什么`getCapacity`是静态方法。注意带有与声明类相同类型参数的静态方法。除非故意这样处理空引用（这不是），否则您通常应该将它们更改为实例方法。

# codeigniter - 在 ci-merchant 库 codeigniter 中接收更多响应数据

> ID：15434555
> 
> 赞同：1
> 
> 时间：2013-03-15T14:10:20.637
> 
> 标签：codeigniter, paypal, express-checkout, ci-merchant

如何在 ci-merchant codeigniter 库中接收更多响应数据？

我正在使用 Paypal Express 结帐付款方式。

我正在传递以下参数：

> $params = array('amount' => 100.00, 'currency' => 'USD', 'return_url' => my return url, 'cancel_url' => my cancel url);

现在我得到以下回应

> Merchant_paypal_api_response 对象（ [_status:protected] => 完整 [_message:protected] => [_reference:protected] => 1K088384XU0947545 [_data:protected] => [_redirect_url:protected] => [_redirect_method:protected] => GET [_redirect_message :protected] => [_redirect_data:protected] => )

我怎样才能获得贝宝在 DoExpressCheckoutPayment 响应中返回的数据，如贝宝 ID、送货地址、商品名称和贝宝返回的其他内容？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T15:28:17.647

实际上，该信息不会在 DECP 响应中返回。它会在 GetExpressCheckoutDetails 中返回。

您的库应该提供某种方式来查看 RAW API 请求和响应。如果它没有为您解析出所有细节，您需要自己完成。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T08:45:44.053

这不完全是您问题的答案，但您应该尝试使用[Omnipay](https://github.com/adrianmacneil/omnipay)。Omnipay 基本上是 CI-Merchant V2（我是这两个库的作者）。

Omnipay 让您可以直接访问原始响应。例如，你会做这样的事情：

```
$params = array( 'amount' => 1000, 'currency' => 'USD', 'returnUrl' => 'my return url', 'cancelUrl' => 'my cancel url' );
$response = $gateway->completePurchase($params)->send();

$reference = $response->getTransactionReference(); // paypal transaction id
$data = $response->getData(); // this is the raw response object 
```

# facebook-opengraph - 星级未添加到我的自定义打开图表操作建议中

> ID：15434560
> 
> 赞同：2
> 
> 时间：2013-03-15T14:10:29.630
> 
> 标签：facebook-opengraph, publish

我创建了一个自定义操作建议。我想像 goodread 一样通过这个动作添加星级。但我没有找到任何附加星级的方法，我发现的一件事是评级**行动**。但它仅适用于我的应用程序中有许多对象的书籍。

谢谢

罗希特

# django - Django 模板和变量 {% if x == "about" %} 不起作用

> ID：15434561
> 
> 赞同：0
> 
> 时间：2013-03-15T14:10:30.177
> 
> 标签：django

如何检查`x`变量是否为 == "about" 字符串？

我尝试：

```
{% for x in p %}
    {% if x == "about" %}
        <a href="/about/">About</a>
    {% endif %}
{% endfor %} 
```

`{{ x }}`= 关于

但不起作用（`if`不显示的内容）

编辑：

```
def search(request):
    if 'search' in request.GET:
        term = request.GET['search']
        if len(term) > 3:
            p = Chunk.objects.filter(Q(content__contains=term) | Q(
                key__contains=term))
            count = p.count()
            return render_to_response('search_result.html',
                {'p': p, 'count': count},
                context_instance=RequestContext(request))
    .... 
```

`Chunk`来自 django-chunks 应用程序

`p`我`key`从这个：

```
class Chunk(models.Model):

    key = models.CharField(_(u'Key'), help_text=_(u"A unique name for this chunk of content"), blank=False, max_length=255, unique=True)
    content = models.TextField(_(u'Content'), blank=True)
    description = models.CharField(_(u'Description'), blank=True, max_length=64, help_text=_(u"Short Description")) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T14:14:12.753

尝试这样做：

```
{% for x in p %}
    {% ifequal x "about" %}
        <a href="/about/">About</a>
    {% endifequal %}
{% endfor %} 
```

**UPDATE** p 是 QuerySet，所以 x 是模型的实例。您应该指定包含要比较的文本的属性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T14:27:49.453

在这种情况下，`p`是一个对象，而不是一个属性，因此您不能将字符串值“about”与 object 进行比较`p`。如果`p`有一个属性，说“名字”，你可以这样做：

```
{% if p.name == "about" %} 
```

# linux - 有人可以解释一下为什么 awk 的 sub() / gsub() 会这样工作吗？

> ID：15434564
> 
> 赞同：16
> 
> 时间：2013-03-15T14:10:42.693
> 
> 标签：linux, shell, awk

我知道可以用和喜欢`awk`做文本/字符串替换：`sub()``gsub()`

```
kent$ echo "fffff"|awk '{gsub("f", "b")}1'
bbbbb 
```

或者

```
kent$ echo "fffff"|awk '{gsub(/f/, "b")}1'
bbbbb 
```

但是今天我犯了一个拼写错误，我把这行写成：

```
kent$ echo "fffff"|awk '{gsub('f', "b")}1' 
```

但是`awk`并没有抱怨，而是像往常一样生成了输出，当然，意外的输出，我花了一些时间才发现错误。输出`awk`给我的是：

```
bfbfbfbfbfb 
```

另一个例子：

```
kent$ echo "fafafafafXX"|awk '{gsub('fa', "B")}1'
BfBaBfBaBfBaBfBaBfBXBXB 
```

的例子`sub()`也很奇怪：

```
kent$  echo "thanks in advance"|awk '{sub('a', "B")}1'
Bthanks in advance 
```

有人可以解释一下奇怪的替换是如何完成的吗？

```
kent$  awk --version
GNU Awk 4.0.2 
```

**编辑**

感谢 Joni 的回答。也许这个例子能更好地解释它，我只是在这里添加它：

```
kent$  echo "thanks in advance"|awk '{f="k";sub('f', "B")}1'
thanBs in advance

kent$  echo "thanks in advance"|awk '{sub('th ank', "B")}1'
awk: cmd. line:2: {sub(th
awk: cmd. line:2:        ^ unexpected newline or end of string 
```

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-03-15T14:21:51.003

当你写

```
echo "fffff"|awk '{gsub('f', "b")}1' 
```

awk 看到的是`{gsub(f, "b")}1`. 它解释`f`为一个具有空值的变量，并将输入中的每个*空字符串*替换为 b。

空字符串位于每个字符之间和最后一个字符之后，因此 awk 在每个字符之后插入`b`一个`f`。

您可以替换`//`或`""`以获得相同的效果，而无需使用未使用的变量：

```
echo "fffff"|awk '{gsub(//, "b")}1'            # fbfbfbfbfb 
```

# java - Java Portable Tomcat 在桌面上创建目录

> ID：15434572
> 
> 赞同：0
> 
> 时间：2013-03-15T14:10:54.873
> 
> 标签：java, tomcat

我最近不得不从一位老同事那里接手一个项目；这个项目是用 JAVA 编写的，使用 Java Web-Start 并使用一个轻量级的 Java 库（*org.apache.catalina.startup.Tomcat*）。

每当 Tomcat 服务器启动并且我第一次与 Web 应用程序交互时，它都会在 Windows 桌面上创建 3 个目录（store、sys、temp）。

当我查看正常的 Tomcat 安装时，这些目录存在于**tomcatHome\bin\**目录中。

**问题**

有谁知道如何将这些目录的创建重定向到我的**C:\TomcatHome\**目录？

**下面是我的代码片段：**

```
import org.apache.catalina.startup.Tomcat;
import org.apache.catalina.Context;
import org.apache.catalina.LifecycleException;
import org.apache.catalina.loader.WebappLoader;

...

// Define the user.dir directory.
System.setProperty( "user.dir", "C:\\TomcatHome" );
// Print out the user.dir and user.home system variables.
System.out.println( "user.dir = " + System.getProperty( "user.dir" ) );
System.out.println( "user.home = " + System.getProperty( "user.home" ) );

...

Tomcat m_tomcat = new Tomcat();
m_tomcat.setBaseDir( "C:\\TomcatHome" );
m_tomcat.setPort( 5009 );
m_tomcat.getHost().setDeployOnStartup( true );
m_tomcat.getHost().setAutoDeploy( true );
m_tomcat.getHost().setAppBase( "C:\\TomcatHome\\webapps" );
m_tomcat.getServer().setPort( 5109 );
m_tomcat.getServer().setShutdown( "SHUTDOWN" );

...

// Add abc web-application to Tomcat.
Context ctx = m_tomcat.addWebapp( null, "/abc", "abc" );
ctx.setLoader( new WebappLoader( class.getClassLoader() ) );
// Add xyz web-application to Tomcat.
ctx = m_tomcat.addWebapp(null, "/xyz", xyz );
ctx.setLoader( new WebappLoader( class.getClassLoader() ) );
// Add ROOT folder to Tomcat.
ctx = m_tomcat.addWebapp(null, "", "ROOT" );
ctx.setLoader( new WebappLoader( class.getClassLoader() ) );

...

m_tomcat.start(); 
```

**这段代码打印出来：**

```
user.dir = C:\TomcatHome
user.home = C:\Users\myName 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T14:27:30.920

这些是临时目录。如此处所示[，](https://serverfault.com/questions/13523/configure-tomcat-to-use-a-different-temp-directory-for-file-uploads)检查`catalina.sh`临时文件夹配置。

# java - 如何停止我的日志文件相互添加？

> ID：15434573
> 
> 赞同：1
> 
> 时间：2013-03-15T14:10:55.683
> 
> 标签：java, logging, log4j

我的代码中的每个类中都有两个 log4j 记录器：

```
logA = Logger.getLogger(com.some.class.in.my.project);
logB = Logger.getLogger('perf'); 
```

我希望这两个记录器将数据输出到两个完全不同的文件中。我似乎无法让它工作。

这是我的 log4j 属性：

```
 log4j.rootLogger = myAppenderA

    # A
    log4j.appender.myAppenderA=org.apache.log4j.RollingFileAppender
    log4j.appender.myAppenderA.File=../logs/mylogfileA.log
    log4j.appender.myAppenderA.additivity=false
    log4j.appender.myAppenderA.Threshold=DEBUG
    log4j.appender.myAppenderA.layout=org.apache.log4j.PatternLayout
    log4j.appender.myAppenderA.layout.ConversionPattern=%d{ISO8601} %-5p 0 %m%n

    # perf
    log4j.appender.perf=org.apache.log4j.RollingFileAppender
    log4j.appender.perf.File=..logs/perf.log
    log4j.appender.perf.additivity=false
    log4j.appender.perf.Threshold=DEBUG
    log4j.appender.perf.layout=org.apache.log4j.PatternLayout
    log4j.appender.perf.layout.ConversionPattern=%d{ISO8601} %-5p 0 %m%n

    log4j.logger.myAppenderB = perf 
```

myLogfileA.log和**perf.log****都**包含相同的数据。据说将可加性设置为 false 可以解决此问题，但我已经尝试过了，但影响不大。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T15:07:19.797

可加性是记录器而不是附加器的属性，因此您必须`additivity`从附加器中删除属性并将其添加到记录器配置中。

目前，您在文件中只有 rootLogger 配置（并且您没有为它定义日志记录级别），因此您的所有记录器都将从它扩展附加程序。要停止记录消息传播到祖先，您必须使用记录器上的可加性属性。因此，要实现您想要的：

1.  `root`为`rootLogger`. _ 它将是默认的，并由其他没有的记录器继承`additivity = false`
2.  将`myAppenderA`appender 分配给`mypackage.MyClass`logger
3.  将`pref`appender 分配给`pref`logger
4.  设置`additivity`和记录器`myAppenderA`以停止将日志消息传播到祖先记录器。`pref``false`

有孔属性文件：

```
log4j.rootLogger = DEBUG, root

# Root
log4j.appender.root=org.apache.log4j.RollingFileAppender
log4j.appender.root.File=logs/mainLogInheritable.log
log4j.appender.root.Threshold=DEBUG
log4j.appender.root.layout=org.apache.log4j.PatternLayout
log4j.appender.root.layout.ConversionPattern=%d{ISO8601} %-5p 0 %m%n

# A
log4j.appender.myAppenderA=org.apache.log4j.RollingFileAppender
log4j.appender.myAppenderA.File=logs/mylogfileA.log
#log4j.appender.myAppenderA.additivity=false
log4j.appender.myAppenderA.Threshold=DEBUG
log4j.appender.myAppenderA.layout=org.apache.log4j.PatternLayout
log4j.appender.myAppenderA.layout.ConversionPattern=%d{ISO8601} %-5p 0 %m%n

# perf
log4j.appender.perf=org.apache.log4j.RollingFileAppender
log4j.appender.perf.File=logs/perf.log
#log4j.appender.perf.additivity=false
log4j.appender.perf.Threshold=DEBUG
log4j.appender.perf.layout=org.apache.log4j.PatternLayout
log4j.appender.perf.layout.ConversionPattern=%d{ISO8601} %-5p 0 %m%n

 log4j.logger.mypackage.MyClass = DEBUG, myAppenderA
 log4j.logger.perf  = DEBUG, perf

 log4j.additivity.perf = false
 log4j.additivity.mypackage.MyClass = false 
```

要测试它是否正在记录到三个不同的文件，您可以尝试以下操作：

```
Logger.getLogger("mypackage.MyClass").debug("1111");
Logger.getLogger("perf").debug("2222");
Logger.getLogger("anyName").debug("3333"); 
```

# .htaccess - .htaccess 使用一个变量将所有内容重新路由到 index.php 并保留 $_GET

> ID：15434575
> 
> 赞同：0
> 
> 时间：2013-03-15T14:10:59.570
> 
> 标签：.htaccess, variables, mod-rewrite, redirect, reroute

我想通过 index.php 使用一个变量重新路由所有请求并保留 $_GET。如果 $_GET 存在，它总是在第一个斜杠之后。第一个斜线之后不是 $_GET 的任何内容都应该被忽略。像这样的东西：

```
www.example.com/contact => www.example.com/index.php?page=contact
www.example.com/contact/ => www.example.com/index.php?page=contact
www.example.com/contact/?mod=add&id=4 => www.example.com/index.php?page=contact&mod=add&id=4
www.example.com/contact/ignore => www.example.com/index.php?page=contact 
```

我对 .htaccess 不太好，所以我就做了这个（即使你确定它不是很好）

```
RewriteRule ^([^/\.]+)$ index.php?page=$1 [QSA,NC,N]
RewriteRule ^([^/\.]+)/$ index.php?page=$1 [QSA,NC,N,L] 
```

第一部分工作正常，但我不知道如何制作“忽略”部分。如果我尝试打开 www.example.com/contact/ignore，我会得到 404 Not Found。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T14:18:20.600

```
RewriteRule ^([^/\.]+)/.*$ index.php?page=$1 [QSA,NC,N,L] 
```

# c# - ServiceStack.Redis ModelConfig Id 错误

> ID：15434579
> 
> 赞同：2
> 
> 时间：2013-03-15T14:11:15.250
> 
> 标签：c#, asp.net-mvc, redis, servicestack

我有一个关于尝试配置自定义模型时收到的空引用异常的查询，如下所示

```
ModelConfig<Video>.Id( m => m.RedisId ); 
```

这是在 MVC 应用程序中，并从 Application_Start 调用，所有这些都非常标准。本地似乎没有问题，在推送到 AppHarbour 时问题浮出水面。任何想法，将不胜感激。谢谢！

部分堆栈跟踪如下

```
 Web.App_Start.RedisConfig.<ConfigerRedis>b__0(Video m)
   at ServiceStack.Common.Utils.IdUtils`1.GetId(T entity)
   at ServiceStack.Common.Utils.IdUtils.GetId[T](T entity)
   at ServiceStack.Common.Utils.IdUtils.CreateUrn[T](T entity)
   at ServiceStack.Redis.RedisClient.UrnKey[T](T value) 
```

# c# - 如何将多个选中的复选框保存到 MVC4 中的一个值

> ID：15434583
> 
> 赞同：1
> 
> 时间：2013-03-15T14:11:23.303
> 
> 标签：c#, html, visual-studio-2010, asp.net-mvc-4, sql-server-2008-r2

在我的数据库中，我有这两个表（项目和主题）。

我还有一个名为 Project_Theme 的中间表，其中包含 ProjectID 和主题。

在主题中预设了大约 15 个值。

我能够将所有这些主题显示到复选框中，但是我不知道如何将它们保存在我的数据库中。

这是我的控制器：

```
private ProjectContext db = new ProjectContext();

    //
    // GET: /Project/

    public ActionResult Index()
    {
        return View(db.Project.OrderBy(i => i.Name).ToList());
    }

    //
    // GET: /Project/Create

    public ActionResult Create()
    {

        var model = new Project();

        ViewBag.Theme = db.Theme.ToList();
        return View(model);
    } 
```

这是我的模型：

```
public class Project
{
    [Key]
    public int ID { get; set; }

    public string Type { get; set; }

    public string Name { get; set; }

    public string Description { get; set; }

    public string Date { get; set; }
} 
```

我的第二个模型：

```
public class Theme
{
    [Key]
    public int ThemeID { get; set; }

    public string Name { get; set; }
} 
```

最后这是我的创建视图：

```
@using (Html.BeginForm()) {
@Html.ValidationSummary(true)
<fieldset>
    <div style="text-align:center;padding:0 1px 0 1px" >
        <table>
            <tr align="left">
                <td>
                    <div class="editor-label" style="width:110px">
                        <label for="theme">Theme(s)* : </label>
                    </div>
                </td>
                <td>
                    <div class="editor-field">
                        @foreach (var t in theme)
                        {
                            <label class="checkbox">
                                <input type="checkbox" name="theme" value="@t.ThemeID"> @c.Name
                            </label>
                        }
                    </div>
                </td>
            </tr>

            <tr align="left">
                <td>
                    <div class="editor-label">
                        @Html.LabelFor(model => model.Name)
                    </div>
                </td>
                <td>
                    <div class="editor-field focus">
                        @Html.TextBoxFor(model => model.Name, new { style = "width:410px" })
                        @Html.ValidationMessageFor(model => model.Name)
                    </div>
                </td>
            </tr>

......... 
```

所以，如果有人可以帮助我，那就太好了:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T14:39:13.190

我不想油嘴滑舌或没有帮助，但这个问题已经在这里回答了很多次（例如 - [MVC3 using CheckBox with a complex viewmodel](https://stackoverflow.com/questions/5675037/mvc3-using-checkbox-with-a-complex-viewmodel)），甚至微软大师也发表了博客。它并不真正保证关于 SO 的完整“示例”答案。我的出发点是，老实说，我对谷歌“mvc viewmodel checkbox list”并不粗鲁。

本质上，您正在尝试弯曲 ASP.NET MVC 以适应您的 ORM 生成的关系数据库设计对象。反过来做。创建一个视图模型来帮助您做**您需要做的事情**，即**从网页获取表单数据**。一旦你得到了这些数据，你做什么是很重要的。

因此，即使您在 POST 操作中最终得到一个整数数组（例如主题 ID），您仍然可以在最简单的级别上执行以下操作：

```
var newProject = new Project();

// set other properties from posted model first then...

newProject.Themes = model.ThemeIds.Select(x=> db.Themes.Find(x));
db.Projects.Add(newProject);
db.SaveChanges(); 
```

希望有帮助。

# java - JavaFX - SWT 互操作：应用程序冻结

> ID：15434589
> 
> 赞同：4
> 
> 时间：2013-03-15T14:11:39.330
> 
> 标签：java, swt, javafx-2, eclipse-rcp

我正在构建一个基于 Eclipse 3.5 的 RCP 应用程序。多亏了我在 oracle.com 上找到的两篇文章（[1、2](http://docs.oracle.com/javafx/2/swt_interoperability/jfxpub-swt_interoperability.htm) [）](http://docs.oracle.com/javafx/2/charts/pie-chart.htm#CIHFDADD)，我才能够实现一个显示饼图的有效 RCP 视图。

不幸的是，如果我关闭视图并重新打开它，那么应用程序就会冻结并且永远不会回来。

我在 Windows 7 X64 上的 JDK 1.6.0.31 下使用 JavaFX 2.2.7。

这是代码。该视图是 org.eclipse.ui.part.ViewPart 的标准子类。

```
 Composite panel = new Composite(parent, SWT.NONE);
    RowLayout layout = new RowLayout();
    panel.setLayout(layout);
    FXCanvas fxCanvas = new FXCanvas(panel, SWT.NONE) {
        @Override
        public Point computeSize(int wHint, int hHint, boolean changed) {
            getScene().getWindow().sizeToScene();
            int width = (int) getScene().getWidth();
            int height = (int) getScene().getHeight();
            return new Point(width, height);
        }
    };

    Scene scene = new Scene(new Group());
    RGB rgb = panel.getBackground().getRGB();
    Color color = Color.rgb(rgb.red, rgb.green, rgb.blue);
    scene.setFill(color);
    ObservableList<PieChart.Data> pieChartData = FXCollections.observableArrayList();
    pieChartData.add(new PieChart.Data("label1", 20));
    pieChartData.add(new PieChart.Data("label2", 20));
    pieChartData.add(new PieChart.Data("label3", 20));
    pieChartData.add(new PieChart.Data("label4", 20));
    pieChartData.add(new PieChart.Data("label5", 20));
    Chart chart = new PieChart(pieChartData);
    chart.setLegendSide(Side.RIGHT);
    ((Group) scene.getRoot()).getChildren().add(chart);
    fxCanvas.setScene(scene); 
```

任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T14:45:17.307

问题解决了。这是由应用程序中其他地方的一些线程命名调整引起的。绝对有一些事情是不应该做的。过度依赖线程名称就是其中之一。:)

实用程序类依赖线程名称在 UI 线程中运行代码，并且由于 JavaFX 更改了正在运行的线程的名称，实用程序类将不再正常工作。

# iphone - 如何在 iOS 上构建缓存目录的路径？

> ID：15434594
> 
> 赞同：0
> 
> 时间：2013-03-15T14:11:58.713
> 
> 标签：iphone, ios, objective-c, ipad, cocoa

我觉得在 iOS 上构建缓存目录路径的方法是错误的......

```
- (NSString*)pathToCachesDirectory {
    NSString *cachesDirectory = [NSSearchPathForDirectoriesInDomains(NSCachesDirectory, 
                                     NSUserDomainMask, 
                                     YES) lastObject];

    return [NSString stringWithFormat:@"%@/%@/%@.%@",
                              cachesDirectory,
                              kDirectory,
                              kFileName,
                              kFileExtension];
} 
```

使用`stringWithFormat`感觉很hacky，在给定文件的目录、文件名和文件扩展名的情况下，在iOS上构造文件路径的正确方法是什么？

提前感谢您的智慧！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-15T14:15:06.020

使用`stringByAppendingPathComponent:`和`stringByAppendingPathExtension:`方法。

# android - 在后台捕获 MotionEvent

> ID：15434604
> 
> 赞同：1
> 
> 时间：2013-03-15T14:12:23.367
> 
> 标签：android, touch, motionevent

当我们的应用程序在后台运行时，是否可以通过 MotionEvent 访问所有触摸？我需要获取它的一些属性，但也需要在用户使用其他应用程序时获取。这有可能吗？

或者也许有任何其他信息来源特定触摸持续多长时间（当应用程序在后台时）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-12-15T20:26:40.830

所以答案是肯定的 - 有一个代码可以让它工作：[创建一个系统覆盖窗口（总是在顶部）](https://stackoverflow.com/questions/4481226/creating-a-system-overlay-window-always-on-top)

# ios - UICollectionViewCell 不与 ARC 一起保留

> ID：15434606
> 
> 赞同：0
> 
> 时间：2013-03-15T14:12:24.713
> 
> 标签：ios, objective-c

我有一个 UICollectionView，它从 web 服务接收数据。根据它收到的数据，它在我的 UICollectionView 上绘制单元格。每个单元格都是一个扩展 UICollectionViewCell 的自定义类。每个 UICollectionViewCell 都是通过 .nib 加载的。我的 init 方法如下所示：

```
@implementation GridCell

- (id)initWithFrame:(CGRect)frame
{
        if (self)
        {
            // Initialization code
            NSArray *arrayOfViews = [[NSBundle mainBundle] loadNibNamed:@"GridCell" owner:self options:nil];

            if ([arrayOfViews count] < 1) {
                return nil;
            }

            if (![[arrayOfViews objectAtIndex:0] isKindOfClass:[UICollectionViewCell class]]) {
                return nil;
            }

            self = [arrayOfViews objectAtIndex:0];

            // It is important that you set the properties of the view after the above assignment
            // because self is assigned to the nib after that call.
            self.layer.masksToBounds = NO;
            self.layer.shadowColor = [[UIColor blackColor] CGColor];
            self.layer.shadowOffset = CGSizeMake(0.0, 1.0);
            self.layer.shadowOpacity = 0.17;
            self.layer.shadowRadius = 0.35f;
            self.layer.shouldRasterize = YES;

        }

    return self;
} 
```

我有一个 GridViewController ，它基本上是一个 UIViewController ：

```
@implementation GridViewController

- (id)initWithSize:(CGFloat)frameWidth :(CGFloat)frameHeight {

    self = [super init];
    if(self) {

        // Have the getGridView returning the initialized view
        // then assign it to the GridViewControllers view property
        self.view = [self getGridView:frameWidth:frameHeight];

    }
    return self;
}

-(UIView *)getGridView:(CGFloat)width :(CGFloat)height {

    UIView *gridHolder = [[UIView alloc] initWithFrame:CGRectMake(0, 0, width, height)];

    UICollectionViewFlowLayout *flow = [[UICollectionViewFlowLayout alloc]init];
    [flow setScrollDirection:UICollectionViewScrollDirectionHorizontal];

    CGRect screen = [[UIScreen mainScreen] bounds];
    CGFloat screenheight = screen.size.height;

    // It is an iphone 5, setup the cellsize and the spacing between cells.
    if(screenheight > 480) {

        [flow setItemSize:CGSizeMake( (gridHolder.frame.size.width / 1.85) , (gridHolder.frame.size.height / 3.25) )];
        [flow setSectionInset:UIEdgeInsetsMake(0, 0, 0, 0)];
        [flow setMinimumInteritemSpacing:0];
        [flow setMinimumLineSpacing:10];

    // It is an iphone 4, setup the cellsize and the spacing between cells.
    } else {

        [flow setItemSize:CGSizeMake( (gridHolder.frame.size.width / 2.5)  , (gridHolder.frame.size.height / 3.1) - 10)];
        [flow setSectionInset:UIEdgeInsetsMake(0, 0, 0, 0)];
        [flow setMinimumInteritemSpacing:0];
        [flow setMinimumLineSpacing:10];
    }

    self.grid = [[UICollectionView alloc] initWithFrame:CGRectMake(0, 0, gridHolder.frame.size.width, gridHolder.frame.size.height) collectionViewLayout:flow];

    [_grid setBackgroundColor:[UIColor colorWithRed:0.961 green:0.961 blue:0.961 alpha:1]];

    [_grid setDataSource:self];
    [_grid setDelegate:self];
    [_grid setBounces:NO];
    [_grid registerClass:[GridCell class] forCellWithReuseIdentifier:Cell];

    [gridHolder addSubview:self.grid];

    return gridHolder;
} 
```

这个 UIViewController 也是我的 UICollectionViewDataSource。所以我有以下方法：

```
- (NSInteger)collectionView:(UICollectionView *)collectionView numberOfItemsInSection:(NSInteger)section{

    return [releases count];

}
- (UIEdgeInsets)collectionView:(UICollectionView *)collectionView layout:(UICollectionViewLayout*)collectionViewLayout insetForSectionAtIndex:(NSInteger)section {
    return UIEdgeInsetsMake(10, 10, 10, 10);

}

- (UICollectionViewCell *)collectionView:(UICollectionView *)collectionView cellForItemAtIndexPath:(NSIndexPath *)indexPath{

    GridCell *cell = [collectionView dequeueReusableCellWithReuseIdentifier:Cell forIndexPath:indexPath];

    return cell; // <-- finally return the cell

} 
```

我在单元格上添加了一个 UIButton。我将 IBAction 连接到按钮。但是每次我点击这个按钮时，我都会得到一个空指针异常，因为 GridIcon 已经被 ARC 丢弃了。我必须在某处保留 GridIcon 吗？或者克服这个（简单？）问题的最佳实践是什么？

驻留在我的 GridIcon.m 中的方法是：

```
- (IBAction)cellClicked {
    NSLog(@"test");
} 
```

我的 GridIcon.h 文件有一个 IBAction 描述：

```
@interface GridCell : UICollectionViewCell
- (IBAction)cellClicked;
@end 
```

**编辑 ：**

jackslash，感谢您花时间和精力让我意识到这个非常疯狂的结构。让我解释一下我是如何设置这个项目的。

我有一个 MainViewController，我在 AppDelegate.m 中将其设置为 RootViewController。然后在我的 MainViewController 中我初始化 2 UIVIewController。其中之一是我的 GridViewController，它设置了 UICollectionView。

所以这个 UICollectionView 的数据源是我初始化的 UIViewController。我需要为此 UIViewController 绘制屏幕区域，因此我将另一个 UIViewController 的高度提供给 GridViewController。而getGridView方法得到的是屏幕高度减去其他UIViewConroller的视图的高度。

结构是这样的：

```
@interface MainViewController: UIViewController
// These next two classes both extend UIViewController
@property(nonatomic, strong) GridViewController *gridViewcontroller;
@property(nonatomic, strong) BottomBarController *bottomBarcontroller;
@end 
```

在我的 MainViewController.m [viewDidLoad] 中，我都初始化了那些 UIViewcontrollers 并将它们的视图作为 subView 添加到 MainViewController。

那么实现这一目标的最佳方法是什么？我应该将 UICollectionViewController 与我的 GridViewController 分开吗？但是这个 UICollectionView 是如何知道要在屏幕的哪个区域绘制的呢？

对于我的 GridCell 中的 init 方法，我实际上使用它在我的 GridCell 下方绘制了一个阴影。如果没有这个 init 方法，我将如何在我的单元格下面实现绘图？

**编辑2：** 除了我上面的编辑：

*   我在每个 GridCell 上都有一个 UIImageView 和一个 UILabel。我将如何针对我的代码中的那些？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-15T15:04:06.450

所以这里发生的事情在很多方面都搞砸了。

1.  您的 GridCell 初始化方法是心理
2.  你留下了一些未命名的objective-c方法参数（错误的形式）
3.  您有一个方法`- (id)initWithSize:(CGFloat)frameWidth :(CGFloat)frameHeight` ，希望`CGSize`从名称中获取 a 但它需要两个浮点数
4.  出于某种原因，您正在使用该`-(id)initWithSize::`方法来初始化您的视图控制器
5.  您的`GridCell`类文件与它们包含的类有不同的名称（错误的形式）

您似乎从根本上误解了这一切应该如何运作。我将在这里为您提供帮助，但请记住，您应该花时间了解这里的所有内容，并阅读更多有关 iOS 的信息。也许看看 iTunes U (CS193p) 上的 iOS 课程，它是免费的，可以帮助您编写更好的代码。

### 1.

这太疯狂了。如果你想`UICollectionViewCell`从一个 xib 加载你的子类，你不这样做，你可以`UICollectionViewController`像这样在一个子类中使用集合视图注册 nib：

```
UINib * cellNib = [UINib nibWithNibName:@"GridCell" bundle:[NSBundle mainBundle]];
[self.collectionView registerNib:cellNib forCellWithReuseIdentifier:cellReuseIdentifier]; 
```

然后，当您进入单元格时，会从 xib 文件中为您加载单元格

```
- (UICollectionViewCell *)collectionView:(UICollectionView *)collectionView cellForItemAtIndexPath:(NSIndexPath *)indexPath 
```

确保您将`GridCell.xib`文件中单元格的类设置为您的`GridCell`子类。永远不要再写这样的 init 方法。

### 2.

```
-(UIView *)getGridView:(CGFloat)width :(CGFloat)height 
```

始终命名 Objective-c 方法签名中的所有参数。

```
-(UIView *)getGridViewWithWidth:(CGFloat)width andHeight:(CGFloat)height 
```

英里和英里更好。但你可能会更好地使用`CGSize`...

### 3

```
- (id)initWithSize:(CGFloat)frameWidth :(CGFloat)frameHeight 
```

在 Objective-c 中，我们希望它采用 CGSize 参数，因为您的方法名为“initWithSize”。A`CGSize`是一个带有 a`width`和的 C 结构体`height`。你可以用`CGSizeMake(<width>,<height>)`. 你会让你的 init 方法看起来像这样：

```
- (id)initWithSize:(CGSize)size 
```

但是你真的不想`UIViewController`用`CGSize`...

### 4

`UIViewController`没有任何类型的 init 方法可以采用任何类型的大小或维度是有原因的。视图控制器的想法是，它的视图大小由其父（或窗口）设置，然后负责在其视图中绘制其内容，无论大小。作为一个`UIViewController`子类`UIKit`，有一个地方可以加载其他视图和视图控制器，这些视图和视图控制器需要显示您应该显示的任何内容。检查方法`-(void)viewDidLoad`并覆盖它。但即便如此，如果你只是子类化你会更好，`UICollectionViewController`因为你不需要任何类型的容器，并且你的视图控制器的视图属性已经是一个 collectionView 以及许多其他好处。

### 5

将您的`GridIcon.h`和`GridIcon.m`文件重命名为它们包含的类的名称。始终遵循此规则，以确保您未来的理智，即使不是为您项目工作的其他人。

最后，它崩溃的原因不是因为 ARC 或其他技术故障，而是因为这里的实现存在真正的基本问题。

# ios - iOS - 部署 IPA 会出现“无法阅读软件包”（企业安装）

> ID：15434607
> 
> 赞同：2
> 
> 时间：2013-03-15T14:12:24.660
> 
> 标签：ios, xcode, jenkins, enterprise, ipa

我有一个 PhoneGap/Cordova 应用程序，它已成功开发、构建、测试，甚至无线部署。因此，XCode 项目设置正确，我们手动构建的 IPA 工作正常。

现在，我们正在尝试使用 Jenkins 自动化构建。我已将 Jenkins 设置为调用一个调用 xcodebuild（构建档案）的 shell 脚本，然后调用 xcrun 对结果进行打包和签名（我们没有更改签名证书，因此没有向 xcrun 提供签名参数）。

Jenkins 在构建或签名过程中没有报告任何错误。但是，当我们尝试 OTA 安装时，它挂起 --- 所以，关闭到控制台。我们得到的信息是：

未知安装 [XXX] ：######## stage_package：无法在 /var/tmp/install_staging.BLAHBLAHBLAH 阅读包
未知安装 [XXX] ：######## MobileInstallationInstall：无法暂存包
未知的 com.apple.itunesstored[152]：MobileInstallationInstall：失败，出现 -1
未知安装 [XXX]：######## handle_install：API 失败
未知安装 [XXX]：######## send_message：无法发送 71 字节的马赫消息：10000003
未知已安装 [XXX]：######## send_error：无法向客户端发送错误响应

每次我尝试安装时，数字（XXX 和########）都会改变（即使我没有在两者之间重建），所以我认为这无关紧要，但在最近的尝试中，它是154 和 001ea000 后跟 160 和 00403000。

在网上搜索“could not peruse package”并不是很有启发性，所以我希望这里有人已经看到了这一点，或者对如何让我的自动化构建正常工作有一些反馈。对我们的自动化过程（xcodebuild 作为存档或 xcrun 而不更改签名证书）或我们看到的错误有任何想法吗？

# visual-c++ - ClistCtrl 设置项目的颜色

> ID：15434608
> 
> 赞同：0
> 
> 时间：2013-03-15T14:12:26.507
> 
> 标签：visual-c++, mfc, visual-c++-2008, clistctrl

我的 MFC 应用程序中有 ClistView 控件。我需要根据其内容为某些项目着色。例如，如果它以“No Response to”开头，我需要将其设为红色。

到目前为止，我已经尝试过

```
BEGIN_MESSAGE_MAP(CMessageView, CListView)
ON_NOTIFY_REFLECT(NM_CUSTOMDRAW,customDraw)
END_MESSAGE_MAP()

void CMessageView::Update()
{
CListCtrl& refCtrl = GetListCtrl();   
refCtrl.InsertItem(LVIF_TEXT|LVIF_PARAM,0,CTime::GetCurrentTime().Format("%H:%M:%S"),0,0,0,42);
refCtrl.SetItemText(0,1,"some text");
refCtrl.SetItemText(0,2,"No response to open");
}

void CMessageView::customDraw(NMHDR * pNMHDR, LRESULT * pResult)
{
_ASSERTE(*pResult == 0);

NMLVCUSTOMDRAW * pnmlvcd = (NMLVCUSTOMDRAW *)pNMHDR;

DWORD dwDrawStage = pnmlvcd->nmcd.dwDrawStage;

BOOL bSubItem = dwDrawStage & CDDS_SUBITEM;
dwDrawStage &= ~CDDS_SUBITEM;

switch (dwDrawStage)
{
case CDDS_PREPAINT:
    {
        *pResult = CDRF_NOTIFYITEMDRAW;
        break;
    }
case CDDS_ITEMPREPAINT:
case CDDS_SUBITEM:
    {
            if(pnmlvcd->nmcd.lItemlParam == 42)
            {
                pnmlvcd->clrText = RGB(255,0,0);            

            }               
            *pResult = 0;               
        break;
    }
default:
    {
        *pResult = 0;
        break;
    }
}
} 
```

但它不起作用。颜色没有变化。我错过了什么或做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-15T14:14:12.497

如果你有 VS2008 SP1，它会更容易使用[`CMFCListCtrl`](https://msdn.microsoft.com/en-us/library/bb983191.aspx)——它有你可以覆盖的虚拟函数来设置每行的前景色和背景色。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T19:45:11.757

一个简单示例应用程序中的这段代码对我有用。我的列表控件有两列和两个项目。第二个项目，第二列的项目数据设置为 42，在这种情况下，只有该特定子项目的文本更改为红色。

```
void CMFCTestDlg::OnNMCustomdrawList1(NMHDR *pNMHDR, LRESULT *pResult)
{
   NMLVCUSTOMDRAW* pLVCD = reinterpret_cast<NMLVCUSTOMDRAW*>( pNMHDR );
   // TODO: Add your control notification handler code here

   *pResult = CDRF_DODEFAULT;

   switch(pLVCD->nmcd.dwDrawStage)
   {
   case CDDS_PREPAINT:
      *pResult = CDRF_NOTIFYITEMDRAW;
      break;

   case CDDS_ITEMPREPAINT:
      *pResult = CDRF_NOTIFYSUBITEMDRAW;
      break;

   case (CDDS_ITEMPREPAINT | CDDS_SUBITEM):
      {
         if(1 == pLVCD->iSubItem)
         {
            if(pLVCD->nmcd.lItemlParam == 42)
            {
               pLVCD->clrText = RGB(255, 0, 0);
            }
         }
      }
      break;
   }
} 
```

# hash - 保留哈希值

> ID：15434614
> 
> 赞同：0
> 
> 时间：2013-03-15T14:12:48.493
> 
> 标签：hash, hashcode

我需要使用现有的（C++）散列函数，它为给定的键创建 32 位散列值。功能极其复杂。

现在我需要保留一个值，即散列函数永远不会输出这个值。

在不理解/更改现有哈希函数的复杂逻辑的情况下，是否有一种安全的方法？

非常感谢...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T23:27:37.373

如果您想要一个永远不会返回零的哈希函数，最简单的方法是：

```
int result;

hash = compute_hash_one_way();  // Hopefully it's not zero
if (hash) return hash;          // In which case we return it
hash = compute_hash_another_way(); // Try something else
if (hash) return hash;             // If that was good, return that
return 8675309; // We know THAT's not zero 
```

第二个哈希计算不需要什么花哨的东西；基本上，如果一个人有任何可用的非零值，有点取决于输入，那么最好使用它而不是返回一个常数，但使用一个非常糟糕的快速散列函数可能会更好（甚至如果原始值返回零，则总是返回一个常量）而不是花费大量时间计算第二个哈希值，以至于外部代码可能会推断出原始哈希值为零。请注意，如果原始散列是好的，即使在原始散列返回零时返回一个常数，也只会导致该常数返回 20 亿分之一的输入，而不是 40 亿分之一的输入。

[顺便说一句，如果我在 .NET/Java 中编写了 GetHashCode 或 hashcode 的规范，我强烈建议一个好的散列函数应该只返回零，前提是它基本上可以立即返回零。在大多数情况下，例如从不返回零所需的额外时间`Integer.GetHashCode()`将超过可能花费`GetHashCode`在对值零进行冗余调用的任何时间，但在某些情况下，返回零的字符串散列可能会对性能产生重大影响。]

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T14:18:04.017

看起来您需要“可选”键。然后你会做

```
hash = hash_combine(has_value()? 1 : 0, has_value()? hash(value()) : 0); 
```

或者，如果您坚持，您可以将位数减少到 31

```
compromised_hash = SHIFT_RIGHT(raw_hash) ^ raw_hash; // just an example. 
```

现在，MSB 将始终为空。如果不是：你有你的特殊标记。这样做并不容易，因此它只减少了 1 个元素的哈希域（除非您可以更改哈希原始函数）

# java - 如何在测验中隐藏两个错误答案？

> ID：15434622
> 
> 赞同：0
> 
> 时间：2013-03-15T14:13:02.687
> 
> 标签：java, android, android-sqlite

就像“谁想成为百万富翁”一样。当用户按下 50/50 帮助按钮时，我希望隐藏两个错误答案，因此将两个按钮的 setText 设置为“”，但不是“答案”一个。但我不知道该怎么做。我正在使用带有问题和答案的 sqlite 预填充数据库。我的 50/50 帮助按钮是 bPolaPola。这是我的游戏课：

```
public class NeogranicenoPetGresaka extends SwarmActivity implements OnClickListener{

    MyCount brojacVremena = new MyCount(16000, 1000);

LinkedList<Long> mAnsweredQuestions = new LinkedList<Long>();

    private String generateWhereClause(){
        StringBuilder result = new StringBuilder();
        for (Long l : mAnsweredQuestions){
            result.append(" AND _ID <> " + l);
        }
        return result.toString();
    }

    Button bIzlazIzKviza, bOdgovor1, bOdgovor2, bOdgovor3, bOdgovor4, bPolaPola;
    TextView question, netacniOdg, score, countdown;
    int brojacPogresnihOdgovora = 0;
    int brojacTacnihOdgovora = 0;
    public static String tacanOdg;

    Runnable mLaunchTask = new Runnable() {
        public void run() {
            nextQuestion();
            brojacVremena.start();
        }
     };
    Runnable mLaunchTaskFinish = new Runnable() {
         public void run() {
            brojacVremena.cancel();
            finish();
         }
      };

    private class Answer {
        public Answer(String opt, boolean correct) {
            option = opt;
            isCorrect = correct;
        }

        String option;
        boolean isCorrect;
    }
    Handler mHandler = new Handler();

    final OnClickListener clickListener = new OnClickListener() {
        public void onClick(View v) {

            Answer ans = (Answer) v.getTag();
            if (ans.isCorrect) {
                brojacVremena.cancel();
                brojacTacnihOdgovora = brojacTacnihOdgovora + 5;
                Intent i = new Intent("rs.androidaplikacijekvizopstekulture.TACANODGOVOR");
                startActivity(i);
                mHandler.postDelayed(mLaunchTask,1200);
            }
        else{
            brojacVremena.cancel();
            brojacPogresnihOdgovora++;
            Intent i = new Intent(getApplicationContext(), PogresanOdgovor.class);
            i.putExtra("tacanOdgovor", tacanOdg);
            startActivity(i);
            mHandler.postDelayed(mLaunchTask,2200);
            }
        }
    };

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        requestWindowFeature(Window.FEATURE_NO_TITLE);
        getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN, WindowManager.LayoutParams.FLAG_FULLSCREEN);

        setContentView(R.layout.neograniceno);

        Typeface dugmad = Typeface.createFromAsset(getAssets(), "Bebas.ttf");
        Typeface pitanje = Typeface.createFromAsset(getAssets(), "myriad.ttf");
        bIzlazIzKviza = (Button) findViewById(R.id.bIzlazIzKvizaN);
        netacniOdg = (TextView) findViewById(R.id.tvBrojPitanjaN);
        question = (TextView) findViewById(R.id.tvPitanjeN);
        bOdgovor1 = (Button) findViewById(R.id.bOdgovorN1);
        bOdgovor2 = (Button) findViewById(R.id.bOdgovorN2);
        bOdgovor3 = (Button) findViewById(R.id.bOdgovorN3);
        bOdgovor4 = (Button) findViewById(R.id.bOdgovorN4);
        bPolaPola = (Button) findViewById(R.id.bPolaPolaN);
        score = (TextView) findViewById(R.id.tvSkor2N);
        countdown = (TextView) findViewById(R.id.tvCountdownN);
        bOdgovor1.setTypeface(dugmad);
        bOdgovor2.setTypeface(dugmad);
        bOdgovor3.setTypeface(dugmad);
        bOdgovor4.setTypeface(dugmad);
        bPolaPola.setTypeface(dugmad);
        bIzlazIzKviza.setTypeface(dugmad);
        netacniOdg.setTypeface(dugmad);
        question.setTypeface(pitanje);
        score.setTypeface(dugmad);
        countdown.setTypeface(dugmad);

        nextQuestion(); //startuje prvo pitanje!
        brojacVremena.start();  //startuje brojac vremena
    }

    public class MyCount extends CountDownTimer {

        public MyCount(long millisInFuture, long countDownInterval) {
            super(millisInFuture, countDownInterval);
        }

        @Override
        public void onFinish() {
            Intent i = new Intent(getApplicationContext(), PogresanOdgovor.class);
            i.putExtra("tacanOdgovor", tacanOdg);
            startActivity(i);
            mHandler.postDelayed(mLaunchTask,2200);

            brojacPogresnihOdgovora++;
        }

        @Override
        public void onTick(long millisUntilFinished) {
            countdown.setText("" + millisUntilFinished / 1000);
        }
    }

        public void onClick(View v) {
        // TODO Auto-generated method stub

    }

        @Override public void onStop() {
            super.onStop();
            brojacVremena.cancel();
        }

    @Override
        protected void onPause() {
            // TODO Auto-generated method stub
            super.onPause();
        }

    public void nextQuestion() {

        TestAdapter mDbHelper = new TestAdapter(this);
        mDbHelper.createDatabase();

        try{    //Pokusava da otvori db

            mDbHelper.open();  //baza otvorena

            Cursor c = mDbHelper.getTestData(generateWhereClause());
            mAnsweredQuestions.add(c.getLong(0));

            List<Answer> labels = new ArrayList<Answer>();

            labels.add(new Answer(c.getString(2), true));
            labels.add(new Answer(c.getString(3), false));
            labels.add(new Answer(c.getString(4), false));
            labels.add(new Answer(c.getString(5), false));

            Collections.shuffle(labels);

            tacanOdg = c.getString(2);

            if(brojacPogresnihOdgovora < 5){

        question.setText(c.getString(1));

        bOdgovor1.setText(labels.get(0).option);
        bOdgovor1.setTag(labels.get(0));
        bOdgovor1.setOnClickListener(clickListener);

        bOdgovor2.setText(labels.get(1).option);
        bOdgovor2.setTag(labels.get(1));
        bOdgovor2.setOnClickListener(clickListener);

        bOdgovor3.setText(labels.get(2).option);
        bOdgovor3.setTag(labels.get(2));
        bOdgovor3.setOnClickListener(clickListener);

        bOdgovor4.setText(labels.get(3).option);
        bOdgovor4.setTag(labels.get(3));
        bOdgovor4.setOnClickListener(clickListener);

        netacniOdg.setText("" + brojacPogresnihOdgovora);
        score.setText("Score: " + brojacTacnihOdgovora);
            }
            else{
                brojacVremena.cancel();
                Intent i = new Intent(getApplicationContext(), Rezultat.class);
                i.putExtra("noviRezultat", brojacTacnihOdgovora);
                startActivity(i);
                mHandler.postDelayed(mLaunchTaskFinish,4000);
                SwarmLeaderboard.submitScore(6863, brojacTacnihOdgovora);
            }
        }
        finally{    // kada zavrsi sa koriscenjem baze podataka, zatvara db
            mDbHelper.close();
        }

    bIzlazIzKviza.setOnClickListener(new OnClickListener() {

        public void onClick(View v) {
            finish();   
        }
    });
    }
} 
```

* * *

好的，正如 jazzbassrob 指出的那样，我需要更具体一些。我需要将我的 bPolaPola 按钮的 setText 设置为“”，空字符串，但我的主要问题是我不知道在集合洗牌后我的答案将在哪里结束，所以我不知道 setText 到哪些按钮。如何知道洗牌后我的答案在哪里结束？

我实际上没有尝试任何事情，因为在这种特定情况下我真的不知道从哪里开始。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T13:39:01.783

如何运行一个查询，即使在用户点击一个选项之前，它也会找到正确的选项，然后您会在四个选项中找到正确的按钮。之后，`setText=""`在指向正确答案的按钮以外的任意两个按钮上使用。

# php - 将许多对象编码为 json

> ID：15434629
> 
> 赞同：0
> 
> 时间：2013-03-15T14:13:24.447
> 
> 标签：php, facebook, facebook-php-sdk, json

我想在 json 中编码一些 facebook 数据，但如果我这样做，例如

```
$likes = idx($facebook->api('/me/likes?limit=5000'), 'data', array());
fwrite($fileout,json_encode($likes));
$friends = idx($facebook->api('/me/friends?limit=5000'), 'data', array());
fwrite($fileout,json_encode($friends)); 
```

现在的问题是它会产生一个无效的 json。它们都会生成一个完整的 json，带有 '[' 和 ']'，但是一个有效的 json在整个文件中应该**只有****一个括号**

你能告诉我我应该如何处理这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T14:17:45.673

```
$var[1]= idx($facebook->api('/me/likes?limit=5000'), 'data', array());
$var[2] = idx($facebook->api('/me/friends?limit=5000'), 'data', array());

fwrite($fileout,json_encode($var)); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T14:18:11.660

```
$likes = idx($facebook->api('/me/likes?limit=5000'), 'data', array());
$friends = idx($facebook->api('/me/friends?limit=5000'), 'data', array());

$array = array($likes, $friends);

fwrite($fileout,json_encode($array)); 
```

# cmake - 如何使用 CMake 或 CTest 获取主机名

> ID：15434630
> 
> 赞同：2
> 
> 时间：2013-03-15T14:13:26.980
> 
> 标签：cmake, ctest

是否可以轻松获取启动 CMake 配置的主机名？

如果不可能，我如何获得启动 CTest 的主机名？

我在 Windows 和 Linux 下使用 CMake 和 CTest。

谢谢，

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-15T14:40:45.650

CMake site_name() 函数应该给你你想要的。要获取有关它的信息，请执行“cmake --help-command SITE_NAME”。

# r - 具有用户指定族的 glm 回归模型公式

> ID：15434632
> 
> 赞同：4
> 
> 时间：2013-03-15T14:13:30.310
> 
> 标签：r, formula, regression, glm

**背景**

我正在尝试预测产品线的销售额（最后样本中的 y_test）。它在一段时间内的销售额基于另一个产品 (x_test) 的所有先前销售额以及这些先前销售额中有多少仍在使用中。但是，无法直接衡量那些仍在使用的先前销售产品的数量，因此需要推断生存曲线。

例如，如果您为特定的智能手机型号制造配件，那么配件销售至少部分取决于仍在使用的智能手机的数量。（这不是作业，顺便说一句。）

**细节**

我有一些时间序列数据，并希望使用`glm`或类似的东西来拟合回归模型。因变量和自变量之间的关系是这样的： ![回归公式](../Images/9ddf29a1bfb61f9e9614366f55ad1b0c.png)

其中 p 为时间段，y [p]为因变量，x [p]为自变量，c [0]和 c [1]为回归系数，F [t]为累积分布函数（如`pgamma`），e [p]为残差。

通过前三个时间段，该函数将扩展为如下所示：

```
#y[1] = c0 + c1*(x[1]*(1-integrate(function(q) {pgamma(q, c2, c2/c3)}, 0, 1)$value))
#y[2] = c0 + c1*(x[1]*(1-integrate(function(q) {pgamma(q, c2, c2/c3)}, 1, 2)$value) + x[2]*(1-integrate(function(q) {pgamma(q, c2, c2/c3)}, 0, 1)$value))
#y[3] = c0 + c1*(x[1]*(1-integrate(function(q) {pgamma(q, c2, c2/c3)}, 2, 3)$value) + x[2]*(1-integrate(function(q) {pgamma(q, c2, c2/c3)}, 1, 2)$value) + x[3]*(1-integrate(function(q) {pgamma(q, c2, c2/c3)}, 0, 1)$value)) 
```

**所以，我有 x [p]和 y [p]的历史数据，我想获得最小化残差的系数/参数 c [0]、 c [1]、 c [2]和 c [3的值。]**

**我认为解决方案是使用`glm`和创建一个自定义系列，但我不知道该怎么做。** 我查看了`Gamma`家庭的代码，但没有走多远。我已经能够使用“手动”进行优化`nlminb`，但我更喜欢由或类似功能`predict`提供的简单性和实用性（即和其他） 。`glm`

以下是一些示例数据：

```
# Survival function (the integral part):
fsurv<-function(q, par) {
  l<-length(q)
  out<-vapply(1:l, function(i) {1-integrate(function(x) {pgamma(x, par[1], par[1]/par[2])}, q[i]-1, q[i])$value}, FUN.VALUE=0)
  return(out)}

# Sum up the products:
frevsumprod <- function(x,y) {
  l <- length(y)
  out <- vapply(1:l, function(i) sum(x[1:i]*rev(y[1:i])), FUN.VALUE=0)
  return(out)}

# Sample data:
p<-1:24 # Number of periods
x_test<-c(1188, 2742, 4132) # Sample data
y_test<-c(82520, 308910, 749395, 801905, 852310, 713935, 624170, 603960, 640660, 553600, 497775, 444140) # Sample data
c<-c(-50.161147,128.787437,0.817085,13.845487) # Coefficients and parameters, from another method that fit the data

# Pad the data to the correct length:
pad<-function(p,v,padval=0) {
  l<-length(p)
  padv<-l-length(v)
  if(padv>0) (v<-c(v,rep(padval,padv)))
  return(v)
}
x_test<-pad(p,x_test)
y_test<-pad(p,y_test,NA)

y_fitted<-c[0+1]+c[1+1]*frevsumprod(x_test,fsurv(p,c[(2:3)+1])) # Fitted values from regression

library(ggplot2)
ggplot(data.frame(p,y_test,y_fitted))+geom_point(aes(p,y_test))+geom_line(aes(p,y_fitted)) # Plot actual and fit 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-10-25T18:16:33.287

这不能用`glm`. `family`in指定线性预测器如何与 y的`glm`平均值连接。请参阅`?family`和[维基](https://en.wikipedia.org/wiki/Generalized_linear_model)。特别是，您需要能够`family`使用（某些）功能编写一个列表，例如：

```
> fam <- poisson()
> str(fam)
List of 12
 $ family    : chr "poisson"
 $ link      : chr "log"
 $ linkfun   :function (mu)  
 $ linkinv   :function (eta)  
 $ variance  :function (mu)  
 $ dev.resids:function (y, mu, wt)  
 $ aic       :function (y, n, mu, wt, dev)  
 $ mu.eta    :function (eta)  
 $ initialize:  expression({  if (any(y < 0))  stop("negative values not allowed for the 'Poisson' family")  n <- rep.int(1, nobs| __truncated__
 $ validmu   :function (mu)  
 $ valideta  :function (eta)  
 $ simulate  :function (object, nsim)  
 - attr(*, "class")= chr "family"
> 
> fam <- Gamma()
> str(fam)
List of 12
 $ family    : chr "Gamma"
 $ link      : chr "inverse"
 $ linkfun   :function (mu)  
 $ linkinv   :function (eta)  
 $ variance  :function (mu)  
 $ dev.resids:function (y, mu, wt)  
 $ aic       :function (y, n, mu, wt, dev)  
 $ mu.eta    :function (eta)  
 $ initialize:  expression({  if (any(y <= 0))  stop("non-positive values not allowed for the 'gamma' family")  n <- rep.int(1, n| __truncated__
 $ validmu   :function (mu)  
 $ valideta  :function (eta)  
 $ simulate  :function (object, nsim)  
 - attr(*, "class")= chr "family" 
```

其中`eta`是指线性预测器。即至少您需要指定一个反向链接函数 ，`linkinv`它**仅**依赖于通过参数和协变量之间的点积的协变量。你的不是，因为它以非线性方式依赖于 c_2 和 c_3 。

# html - 如何应用表格结构来选择 HTML 中的框选项

> ID：15434633
> 
> 赞同：2
> 
> 时间：2013-03-15T14:13:31.710
> 
> 标签：html, width, option, drop-down-menu

在我的选择框选项中，每个选项都有三个单词。现在我想为选项的每个单词应用固定宽度，以便所有选项都按照我的要求出现，例如我的选项如下：

```
1,   aaaaa bbbbb ccccccccc
2,   aaaaaaaa bbbbbbb cccc     
3,   aaaaaa bbbbb cccc 
```

但我想在下拉列表中显示这些选项

```
1,   aaaaa     bbbbb     ccccccccc
2,   aaaaaaaa  bbbbbbb   cccc     
3,   aaaaaa    bbbbb     cccc 
```

如果有人知道该怎么做，请帮助我

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-15T14:37:53.790

您可以使用`div`和`CSS`样式。查看我在 jsfiddle.net 中编写的此示例
[查看示例](http://jsfiddle.net/talebihamid/ykW8M/11/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T14:27:47.687

另一种选择可能是使用第三方 JavaScript 库来重构选择框并根据需要添加样式。

[http://ivaynberg.github.com/select2/](http://ivaynberg.github.com/select2/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-15T14:23:45.533

一种可能性是 1) 应用等宽字体来选择选项，以及 2) 使用 JavaScript 通过根据需要添加尾随空格来确保选项的每个元素具有相同数量的字符，无论是任意长度还是长度的最长元素。

# c# - Application.Current.Shutdown(); 在未引用的程序集中定义

> ID：15434636
> 
> 赞同：13
> 
> 时间：2013-03-15T14:13:45.017
> 
> 标签：c#, wpf, visual-studio-2010

我收到错误：

> 错误 1 ​​类型“System.Windows.Markup.IQueryAmbient”在未引用的程序集中定义。您必须添加对程序集“System.Xaml，Version=4.0.0.0，Culture=neutral，PublicKeyToken=b77a5c561934e089”的引用。

执行以下操作时：

```
public void ExitApplication()
{
    Application.Current.Shutdown();
} 
```

该项目针对.NET 4.0，我的Visual Studio是2010，我尝试添加

`using System.Windows.Markup;`没有成功，并且

`using System.Xaml;`命名空间系统中不存在 Xaml。

我应该怎么做才能解决这个问题？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-03-15T14:19:06.607

好吧，我想当您添加*System.Xaml.dll*作为对您的项目的引用时，您的问题就解决了。接口在那里声明。这是[文档](http://msdn.microsoft.com/en-us/library/system.windows.markup.iqueryambient.aspx)。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-03-15T14:18:58.477

将 System.Xaml.dll 添加到项目引用。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-03-15T14:20:48.947

您需要在主应用程序项目中添加一个`reference`to `System.Xaml`。`Using System.Xaml`不需要在您的代码中。

# c# - 如何在 XNA 中导入或绘制平面？

> ID：15434639
> 
> 赞同：1
> 
> 时间：2013-03-15T14:13:55.700
> 
> 标签：c#, xna, xna-4.0

我正在实现一个小软件，但无法获取绘制几何图形！我怎么能做到这一点？

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T14:28:16.120

你的问题很模糊。如果你想绘制一些*顶点*，你必须使用[`GraphicsDevice`](http://msdn.microsoft.com/en-us/library/microsoft.xna.framework.graphics.graphicsdevice_members.aspx)draw 方法，否则如果你需要绘制一些*精灵*，你必须使用[`SpriteBatch`](http://msdn.microsoft.com/en-us/library/microsoft.xna.framework.graphics.spritebatch_members.aspx)draw 方法。如果要导入模型，可以利用[`Model`](http://msdn.microsoft.com/en-us/library/microsoft.xna.framework.graphics.model_members.aspx)类的 draw 方法。

如果您是从头开始，我建议您看一下这些分步教程：

*   [你的第一款游戏 - XNA Game Studio in 2D](http://msdn.microsoft.com/en-us/library/bb203893.aspx)
*   [在屏幕上显示 3D 模型](http://msdn.microsoft.com/en-us/library/bb197293%28v=xnagamestudio.31%29.aspx)
*   [绘制带纹理的四边形](http://msdn.microsoft.com/en-US/library/bb464051%28v=xnagamestudio.10%29.aspx)

# sql - 带 IF 或大小写的 SQL 选择

> ID：15434641
> 
> 赞同：0
> 
> 时间：2013-03-15T14:14:01.227
> 
> 标签：sql, sql-server, if-statement, case

我正在使用 SQL Server 2008 R2

我的 SQL 语句是这样的，为了避免插入之前出现双重数据：

```
select * from LETTRE_VOIT_TEMP where NOT EXISTS
(
select * from LETTRE_VOIT_FINAL lv
where lv.NOID = LETTRE_VOIT_TEMP.NOID AND
      lv.CODE_DEST = LETTRE_VOIT_TEMP.CODE_DEST AND
      lv.CODE_CLIENT = LETTRE_VOIT_TEMP.CODE_CLIENT AND
      lv.DATE_CLOTURE = LETTRE_VOIT_TEMP.DATE_CLOTURE AND 
      lv.DATE_CLOTUR_REEL =  LETTRE_VOIT_TEMP.DATE_CLOTUR_REEL
) 
```

这工作正常，但现在我想添加一个条件：

*   当数据`LETTRE_VOIT_TEMP.DATE_CLOTURE is null`，我不想比较。
*   当数据`LETTRE_VOIT_TEMP.DATE_CLOTUR_REEL is null`，我不想比较

我已经改变了这样的：

```
select * from LETTRE_VOIT_TEMP where NOT EXISTS
(
select * from LETTRE_VOIT_FINAL lv
where lv.NOID = LETTRE_VOIT_TEMP.NOID AND
      lv.CODE_DEST = LETTRE_VOIT_TEMP.CODE_DEST AND
      lv.CODE_CLIENT = LETTRE_VOIT_TEMP.CODE_CLIENT AND
      case LETTRE_VOIT_TEMP.DATE_CLOTURE 
       when is not null then  lv.DATE_CLOTURE = LETTRE_VOIT_TEMP.DATE_CLOTURE AND 
       end
      case LETTRE_VOIT_TEMP.DATE_CLOTUR_REEL 
       when is not null then   lv.DATE_CLOTUR_REEL =  LETTRE_VOIT_TEMP.DATE_CLOTUR_REEL
       end

) 
```

我收到语法错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T14:15:18.423

您的 CASE 陈述不正确。正确的语法是`CASE WHEN {condition} THEN {result} END`

```
SELECT * 
FROM LETTRE_VOIT_TEMP where NOT EXISTS
(
    SELECT *
    FROM LETTRE_VOIT_FINAL lv
    WHERE lv.NOID = LETTRE_VOIT_TEMP.NOID 
    AND lv.CODE_DEST = LETTRE_VOIT_TEMP.CODE_DEST 
    AND lv.CODE_CLIENT = LETTRE_VOIT_TEMP.CODE_CLIENT 
    AND CASE WHEN LETTRE_VOIT_TEMP.DATE_CLOTURE IS NOT NULL THEN lv.DATE_CLOTURE = LETTRE_VOIT_TEMP.DATE_CLOTURE END
    AND CASE WHEN LETTRE_VOIT_TEMP.DATE_CLOTUR_REEL IS NOT NULL THEN lv.DATE_CLOTUR_REEL =  LETTRE_VOIT_TEMP.DATE_CLOTUR_REEL END

) 
```

您可能需要在您的 CASE 中添加一个 ELSE 语句`1 = 1`以避免另一个语法错误

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T14:16:07.340

您不能以这种格式测试 null

```
CASE field WHEN IS NULL THEN x 
```

但是你可以像这样测试它：

```
CASE WHEN field IS NULL THEN x 
```

应该注意的是，在 SQL Server 中，您可以使用以下语法，但不能使用 NULL

```
CASE field  WHEN condition1 THEN x
            WHEN condition2 THEN y
            ELSE z
END 
```

# nhibernate - C#float、NHibernate、SQL Server 2012 错误的列类型找到了真正的预期浮点数

> ID：15434645
> 
> 赞同：1
> 
> 时间：2013-03-15T14:14:25.263
> 
> 标签：nhibernate, sql-server-2012

使用带有浮点列的 SQL Server 2012 我遇到了类似于[NHibernate: Wrong column type: found float, expected double precision](https://stackoverflow.com/questions/8761193/nhibernate-wrong-column-type-found-float-expected-double-precision)的问题，但对于 C# 单。但是，如果我在自定义方言中将列类型注册为 FLOAT(24)，我会得到“Found: float, Expected REAL”。

简而言之，如果我不这样做`RegisterColumnType`，它就会找到`float`并想要`REAL`，如果我这样做`RegisterColumnType`，它就会发现真实并想要浮动。

有没有人看到这个问题并能够解决它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T11:14:05.640

在查看 NHibernate 在测试数据库上生成的架构并阅读 SQL 服务器文档后，找到了我的问题的答案。

我的本地数据库有一列类型`real`，生产数据库有一列类型`float`。`real`是`FLOAT(24)`, 而`float`（据我从文档中了解到）实际上是`FLOAT(53)`. 这意味着 C# 类型应该是`double`，这意味着链接的问题回答了如何处理它。决定将数据库列更改为`real`，之后它无需任何方言修改即可工作。

# ios - Google+ iOS 应用的 URI 方案？

> ID：15434653
> 
> 赞同：9
> 
> 时间：2013-03-15T14:14:55.367
> 
> 标签：ios, uri, google-plus

我正在做一些很酷的事情，我想在 iOS 应用程序中链接到我的 Google+ 个人资料。

有没有人发现如何使用`mgc://`iOS 上的 Google+ 应用程序提供的 URI 方案以您可以使用的方式打开特定的个人资料`fb://`，`twitter://`以及几乎所有其他基于帐户的 iOS 应用程序？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2014-01-20T10:27:30.520

事实上，这真的很简单。在网络浏览器中检查您的 URL 并替换`http://`或`https://`替换为`gplus://`

**例子 ：**

如果您浏览器中的 URL 是[https://plus.google.com/u/0/100711776131865357077](https://plus.google.com/u/0/100711776131865357077)，那么您使用以下代码在应用程序中打开配置文件。

```
NSURL *gPlusUrl = [NSURL URLWithString:@"gplus://plus.google.com/u/0/100711776131865357077"];

if ([[UIApplication sharedApplication] canOpenURL:gPlusUrl]) {
    [[UIApplication sharedApplication] openURL:gPlusUrl];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-10T21:27:41.787

我知道这是一篇旧帖子，但我在[这里](http://applookup.com/Home)找到了解决方案（只需搜索“google”）。URL 方案是`gplus://`. 我自己对此进行了测试并验证了它是否有效。使用示例：

```
NSURL *gPlusUrl = [NSURL URLWithString:@"gplus://"];

if ([[UIApplication sharedApplication] canOpenURL:gPlusUrl]) {
    [[UIApplication sharedApplication] openURL:gPlusUrl];
} 
```

# javascript - HtmlUnit - 打开 javascript 页面

> ID：15434657
> 
> 赞同：1
> 
> 时间：2013-03-15T14:15:10.627
> 
> 标签：javascript, primefaces, htmlunit

尝试使用 HtmlUnit 测试打开我的页面 (.../admin) 时，出现以下错误：

```
JavaScript error loading page http://.../admin/home.jsf: syntax error     (http://.../admin/javax.faces.resource/jquery/jquery.js.jsf?ln=primefaces#14) 
```

我尝试使用以下方法禁用 JavaScript：

```
webClient.setJavaScriptEnabled(false) 
```

并成功打开页面。但是，在禁用 JavaScript 的情况下，单击我的登录按钮不起作用，所以我想在单击之前再次启用 JavaScript。然后出现以下错误：

```
JavaScript error loading page http://.../admin/home.jsf: ReferenceError: "PrimeFaces" is not defined. 
```

我的问题是：

1.  打开 JavaScript 页面时，除了禁用 JavaScript 之外，是否有其他方法可以覆盖语法错误？
2.  如何修复“未定义 PrimeFaces”错误？

先感谢您！

# sql - Typoscript - 嵌套 SQL 请求

> ID：15434658
> 
> 赞同：0
> 
> 时间：2013-03-15T14:15:14.297
> 
> 标签：sql, typoscript

是否可以在 Typoscript 中实现这种 SQL 请求以从 tt_content 表中检索一些内容？

```
SELECT (
        SELECT c1.uid
        FROM tt_content c1
        WHERE c1.header = c.header AND c1.pid=2 AND c1.sys_language_uid=0 AND c1.colPos=0 AND c1.deleted=0 AND c1.hidden=0 
        ORDER BY rand()
        LIMIT 1
) AS uid, c.header
FROM tt_content c
WHERE c.pid=2 AND c.sys_language_uid=0 AND c.colPos=0 AND c.deleted=0 AND c.hidden=0 
GROUP BY c.header
ORDER BY c.sorting 
```

谢谢并恭祝安康。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T13:04:16.797

我将子查询移动到内部连接以进行此操作：

```
temp.random_teasers = CONTENT
temp.random_teasers {
    table = tt_content
    pidInList = 2
    select {
        join = (SELECT * FROM tt_content WHERE sys_language_uid=###L### AND colPos=0 AND deleted=0 AND hidden=0 ORDER BY rand()) t2 ON t2.uid = tt_content.uid
        groupBy = tt_content.header
        orderBy = tt_content.sorting
        markers {
            L.data = GP:L
            L.intval = 1
        }
    }
} 
```

# asp.net - 存储字符串并使用 JSON 抓取

> ID：15434660
> 
> 赞同：0
> 
> 时间：2013-03-15T14:15:15.917
> 
> 标签：asp.net, json

```
 <script>
               function ShowCommentBox() {
                    $("#dialog").dialog({ modal: true }); 
                }

                function GrabDetails() {
                    var obj = jQuery.parseJSON('{"name":"John"}');
                    $("#item").val(obj.name);
                }  
    </script>

  <div id="dialog" title="Comments"  style="display:none;">
     <table class="detailstable FadeOutOnEdit">
         <tr>
            <th>Item</th>
         </tr>
         <tr>
            <td><asp:Label ID="ItemIdLabel" Text="item" runat="server"/></td>
         </tr>
     </table> 
    </div>

<input id="SubmitCommentsToInvoice" type="button" value="Comments" onclick="ShowCommentBox()" /> 
```

在我的 asp.net 项目中，当用户单击“评论”按钮时，会出现包含标签的 div。我正在尝试使用 JSON 来显示字符串“John” - 存储在其中的 #item 对象中的 'GrabDetails()'

然后在标签 text="" 如何拉出存储在 #item 对象中的值。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T14:26:13.950

`#item`是 jQuery 中的一个 ID 选择器，这里没有 ID 为“item”的元素。此外，`<asp:Label />`以不同的方式从服务器呈现为 html。但是，您似乎根本没有在服务器端使用此标签？如果是这种情况，我只会制作一个 html 元素，例如

```
<td id="WhereNameGoes"></td> 
```

然后

```
function GrabDetails() {
    var obj = jQuery.parseJSON('{"name":"John"}');
    $("#WhereNameGoes").text(obj.name);
    // this still needs to be called somewhere, perhaps in ShowCommentBox()?
} 
```

jQuery`$.val()`更适合`<input />`元素

# java - 用递归算法打包一组盒子

> ID：15434664
> 
> 赞同：2
> 
> 时间：2013-03-15T14:15:20.690
> 
> 标签：java, algorithm, recursion

我被挑战以递归方式解决以下问题，但我仍然不能。

问题：需要打包以下套装中的所有物品

```
int[] items = new int[] {4, 4, 2, 3}; 
```

放入以下框中

```
int[] boxes = new int[] {5, 8}; 
```

目前，在算法结束时，我有

```
Item index: 2
Box index: 1
Items: 0, 0, 0, 3, 
Boxes: 1, 2, 
-------------------------------------------------
It is possible to distribute defined set of items in given boxes. 
```

这是不正确的，因为有一个项目 3 并且有两个剩余容量为 1 和 2 的盒子。我从“||”右侧得到的最终肯定结果 表达。

有人可以指出错误的代码或推荐正确的解决方案吗？谢谢！

我的Java代码如下：

```
public class Boxes
{
    public static void main(String[] args)
    {
        int[] items = new int[] {4, 4, 2, 3};
        int[] boxes = new int[] {5, 8};

        System.out.println( String.format("It is %spossible to distribute defined set of items in given boxes.", IsFit(items, boxes, 0, 0) ? "" : "NOT " ) );

    }

    private static boolean IsFit(int[] items, int[] boxes, int boxIndex, int itemIndex)
    {
        if (boxIndex == boxes.length)
            return false;

        if (itemIndex == items.length)
            return true;

        boolean result = 
                IsFit(items, boxes, boxIndex + 1, itemIndex)
                || 
                IsFit(items, boxes, boxIndex, itemIndex + 1) 
            ;   

        if (result)
        {
            int storedValue = items[itemIndex];

            if (boxes[boxIndex] >= storedValue)
            {
                boxes[boxIndex] -= storedValue;
                items[itemIndex] = 0;

                /*
                System.out.println( String.format("Item index: %d", itemIndex) );
                System.out.println( String.format("Box index: %d", boxIndex) );

                System.out.print("Items: ");
                for (int i : items)
                    System.out.print( String.format("%s, ", i) );
                System.out.println();

                System.out.print("Boxes: ");
                for (int b : boxes)
                    System.out.print( String.format("%s, ", b) );
                System.out.println();
                System.out.println("-------------------------------------------------");
                */

                result = IsFit(items, boxes, boxIndex, itemIndex + 1);

                items[itemIndex] = storedValue;
                boxes[boxIndex] += storedValue;

            }
        }

        return result;

    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-15T14:34:55.340

您的代码很难遵循。我会提出以下功能：

```
private static boolean fits(int[] weights, int[] boxes, int i) {
    if (i == weights.length)
        return true;

    for (int j = 0; j < boxes.length; j++) {
        if (weights[i] <= boxes[j]) {
            boxes[j] -= weights[i];
            if (fits(weights, boxes, i+1))
                return true;

            boxes[j] += weights[i];
        }
    }

    return false;
} 
```

应该称为

```
fits(items, boxes, 0); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T14:33:43.497

> 我从“||”的右侧得到的最终肯定结果 表达。

我相信你错了。您最终的积极结果可能来自于此：

```
if (itemIndex == items.length)
    return true; 
```

当然，这并不能解决整个问题。问题是（据我所见）[背包问题](http://en.wikipedia.org/wiki/Knapsack_problem)的一个案例，它是[NP 完全的](http://en.wikipedia.org/wiki/NP-complete)，您必须使用蛮力算法解决它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-16T21:55:20.580

这个挑战`impressed`给了我很多，这就是为什么我在这个问题被接受的情况下发布我的答案。！

```
 private static boolean CheckTheBox(int[] a,int[] b,int i,int j)
     {           
            i+=(a[i]==0)?1:0;
            j+=(b[j]==0)?1:0;

            if(i > a.length -1 || j > b.length -1)
            {
                return (a[a.length-1]==0 && b[b.length-1]==0)?true:false;
            }

            int temp=a[i];
            a[i]-=(a[i]!=0 && b[j]!=0)?1:0;
            b[j]-=(b[j]!=0 && temp!=0)?1:0;

            CheckTheBox(a,b,i,j);

            return (a[a.length-1]==0 && b[b.length-1]==0)?true:false;
    } 
```

可以像下面这样调用，

```
System.out.println((CheckTheBox(items,boxes,0,0)==true?"Filled Successfully.!":"Items/Boxes Remaining.!")); 
```

# java - 什么时候去接口，什么时候去抽象类

> ID：15434666
> 
> 赞同：1
> 
> 时间：2013-03-15T14:15:27.270
> 
> 标签：java

我想知道关于决定是写接口还是写抽象类的明确想法。两者都在java中提供抽象。我的问题是在哪里使用？.

# reporting-services - 根据数据集值填充单元格

> ID：15434667
> 
> 赞同：0
> 
> 时间：2013-03-15T14:15:31.823
> 
> 标签：reporting-services, ssrs-2008, report

我有一张像下面这样的桌子。我有一个数据集，它返回如下数据：

```
Day      Hour    Title
-----------------------
Monday   2       Title1
Monday   4       Title2
Friday   5       Title3
         .
         .
         .
         . 
```

我需要根据数据集中的值填写表格，即。数据集的第一行将发生在第一列（星期一）与第二行（2.）相交的地方。

我该怎么做这个任务。

我正在使用 SSRS 2008。

![在此处输入图像描述](../Images/4d1b25921356e49e291edc039e106a40.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T14:20:27.597

使用矩阵。

[见这里](http://ssrstutorials.blogspot.com/2012/10/lesson-15-ssrs-matrix-reports.html)也看到[这个类似的问题](https://stackoverflow.com/questions/7600377/ssrs-report-to-display-outlook-type-calendar-people-x-days-x-activities)

编辑：[这篇有趣的博客文章展示了如何在 SSRS 中构建日历。](https://www.simple-talk.com/sql/reporting-services/ten-common-sql-server-reporting-services-challenges-and-solutions/#hr)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T11:01:10.667

**问题解决了**

首先，在数据库上，我分别为天和小时创建了两个公用表表达式或 CTE。然后，我在它们之间进行交叉连接，从而形成一个关系。然后我与其余需要的表进行左连接，以从 CROSS JOIN 获取每个组合的值（当然，如果存在）。

在报告中，我创建了与数据集相关的矩阵，该矩阵与先前创建的存储过程相关联。对于列组，我选择天，对于行组，我选择小时，在相交处我放置特定值。

真的很简单，但是通过交叉连接两个 CTE 可以完成出色的工作。

# solr - 安装 Jetty 或运行嵌入式以进行 Solr 安装

> ID：15434674
> 
> 赞同：0
> 
> 时间：2013-03-15T14:15:54.740
> 
> 标签：solr, jetty

我即将在生产盒上安装 Solr。它将是唯一运行的 Java 小程序，并且与 Web 服务器 (nginx) 在同一个盒子上。

似乎有两种选择。

1.  单独安装 Jetty 并配置为与 Solr 一起使用
2.  将 Solr 的嵌入式 Jetty 服务器设置为作为服务启动并使用它

将它们分开是否有任何性能优势？

我是 KISS 的忠实粉丝，设置越少越好。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T11:01:16.893

Solr 仍在使用 jetty 6。因此，如果您可以让 solr 应用程序在最近的 jetty 发行版中运行，将会有一些好处。例如，您可以使用 jetty 9 并使用 SPDY 等功能来提高应用程序的响应时间。

但是，我不知道或经验是否可以在 servlet 引擎中独立运行 solr 应用程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T11:45:16.113

如果你想要 KISS 毫无疑问： 2\. 坚持使用包含码头的香草 Solr 发行版。

例如，如果您需要 Tomcat，那么安装外部 servlet 引擎的工作将是有意义的，但只是为了使用相同的东西（Jetty）Solr 已经包含......没办法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-12-25T14:45:17.497

运行 Solr 并使其保持简单的另一个选择是使用 Solr-Undertow，它是用于 Solr 的高性能且占用空间小的服务器。它很容易在本地机器上用于开发和生产。它支持简单的配置文件，用于运行具有不同数据目录、端口等的实例。它还可以通过将其指向分发 .zip 文件来运行，而无需解压缩它。

（注意，我是 Solr-Undertow 的作者）

链接在这里：[https](https://github.com/bremeld/solr-undertow) ://github.com/bremeld/solr-undertow ，在“发布”选项卡下发布。

# c++ - 共享库的私有函数的单元测试

> ID：15434677
> 
> 赞同：3
> 
> 时间：2013-03-15T10:19:42.590
> 
> 标签：c++, unit-testing, linux, gcc

我在想是否有任何框架/库提供了一种机制来测试共享库未导出的功能。

我想测试共享库的“t”部分中列出的函数的工作情况。对于“T”部分中的测试功能，我使用了 cppunit。

测试场景：有一个使用“ **__ *attribute* __ ((visibility("default")))** ”导出的类，它声明了另一个具有“ **__ *attribute* __ ((visibility("hidden")))** ”的类的变量在同一个库中定义。我想用“ **__ *attribute* __ ((visibility("hidden")))** ”属性来测试这个类。

库的编程语言是c++

编译器 gcc 4.1.2

平台 RedHat/Solaris

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-15T11:01:13.623

由于单元测试应该对他们测试的代码有深入的了解，单元测试也可以使用一段代码的普通用户无法使用的技巧。

这里可能使用的技巧是：

*   确保单元测试和被测代码链接为单个可执行文件，而无需先在库中构建被测代码。
*   在构建单元测试时使用预处理器宏来禁用可见性属性。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-15T16:45:00.847

如果您想使用您正在运送的相同二进制文件测试这些功能，我只知道一个实用的解决方案：在您的库中构建某种**维护舱口**。

这意味着，将一些公开导出的函数添加到调用您要测试的内部函数的库中。使用该函数的名称，明确这些名称仅用于测试目的，lib 的“普通用户”不应使用它们。将这些方法的文档保存在内部，以使外人很难使用它们。在官方文档中添加一个明确的警告，例如，所有以前缀“TEST_”开头的方法都不能被普通用户使用，并且每个版本都会发生变化。

如果有人也如此无知使用这种方法，请不要在意 - 你无法阻止这些人将自己射入脚底。

# ios - 如何自定义 UITablecell

> ID：15434681
> 
> 赞同：0
> 
> 时间：2013-03-15T14:16:16.753
> 
> 标签：ios, objective-c

自定义分组的最佳方法是什么`UITableViewCell`？我需要创建一个自定义`UITableViewCell`但我无法更改分隔符样式并添加阴影。

我得到的是（右），我想要的是在左边。所以我改变了分隔符样式，但我仍然在它下面找到了另一条白线。所以我的问题是如何删除（或更改颜色）第二条白线（分隔符和单元格下方的白线）以及如何添加阴影？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T14:31:47.397

要更改分隔符*颜色，*您可以使用`[UITableView setSeperatorColor:[UIColor redColor]];`.

对于阴影，我打赌他们正在使用每个部分的最后一个单元格的图像并设置`clipsToBounds`为`NO`.

顺便说一句，复制原版做得很好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T14:35:31.747

更改 tableChatList.separatorStyle= UITableViewCellSeparatorStyleNone; 并将 uitableview 的背景颜色更改为清除颜色。

# qt - 在 Qt 中禁用应用程序的“开始听写”

> ID：15434683
> 
> 赞同：1
> 
> 时间：2013-03-15T14:16:18.067
> 
> 标签：qt, qt4

有没有办法为 mac 应用程序禁用“开始听写”？基本上，我在“编辑”菜单栏中反复获得“开始听写...”菜单。任何解决方法都会有所帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T07:11:07.553

更改 QMenu 的 title 属性将阻止 OS X 将愚蠢的东西自动添加到 Edit 菜单中。

所以如果我有一个 QMenuBar 并且我正在向它添加菜单..

```
m_edit = this->addMenu(tr(" Edit")); 
```

请注意，我在文本前面放了一个空格。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-04-04T17:07:32.057

您需要重命名菜单以阻止 macOS 与它们混淆。在菜单项前面添加一个空格是可行的，但有点难看。这是使用零宽度字符的更经典的方法：

```
menu->setTitle( menu->title().prepend( QString::fromUtf8( "\u200C" )  ) ); 
```

您可以在 QMainWindow 派生类中为所有顶级应用程序菜单执行此操作（在 Qt 4.7 上测试）：

```
#ifdef Q_OS_MACX
foreach ( QMenu* menu, menuBar()->findChildren<QMenu*>() )
{
    menu->setTitle( menu->title().prepend( QString::fromUtf8( "\u200C" )  ) );
}
#endif 
```

# jquery - 带有流程和管道的 JQUERY 链接对我不起作用

> ID：15434691
> 
> 赞同：2
> 
> 时间：2013-03-15T14:16:47.290
> 
> 标签：jquery, jquery-deferred

[JSF中间代码](http://jsfiddle.net/bgordon/L5eLs/)

管道和链条对我来说是新的......

我在让这个小脚本工作时遇到问题。我有一组需要用 AJAX 同步触发的 URL。在管道到下一次迭代之前，我需要等待每个 url 的成功响应（有些可能会延迟，因为它们将运行大型 SQL 查询和构建报告）。如果它没有成功，那么整个过程必须停止。

我想我已经很接近了，但你会发现它工作不正常。也许你们中的一位大师可以帮助我解决这个问题？

```
 //counter
var i = 0;

//array of local urls that I need to trigger one after another
var arrValues = [
    "http://fiddle.jshell.net/",
    "http://fiddle.jshell.net/",
    "http://fiddle.jshell.net/"];

//the step i need to repeat until done
var step = (function () {

    //expect to see this alert called for each iteration (only happens once?)
    alert(arrValues[i]+i);

    var url = arrValues[i];
    var model = {};

    model.process = function () {
        log('Starting: ' + url + i);

        return $.ajax(url)
            .done(function (jqXHR, textStatus, errorThrown) {
            log(textStatus + ' ' + url + i + ' Done');
        })
            .fail(function (jqXHR, textStatus, errorThrown) {
            log(textStatus + ' Failed');
        });
    };

    return model;
}());

//just outputting to the div here
function log(message) {
    $("#output").append($("<div></div>").text(message));
}

//start the process
log("Starting To Build Report");

//iterate through the array
$.each(arrValues, function (intIndex, objValue) {

    // I need to wait for success before starting the next step or fail and throw
    // the errors below - you will see this does not work now and never gets to the 
    // .done or .fail or .always

    step.process().pipe( function () {
        i++;
        step.process();
    });

}).done(function () {
    log("The process completed successfully");
})
    .fail(function () {
    log("One of the steps failed");
})
    .always(function () {
    log("End of process");
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T21:22:45.987

你快到了，但细节是最重要的。诀窍是：

*   修改`step`为一个函数（不是一个对象），它返回一个函数，该函数本身返回一个可观察的对象（即一个 jqXHR 承诺）
*   允许`step`接受增量整数`i`作为参数；`i`这避免了在外部范围内保持运行的需要
*   构建一个`.then()`链，每个链都`then()`将返回的函数作为其参数`step()`
*   `.then()`用已解决的 Promise 为链播种以启动它
*   将最后的`.done()`, `.fail()`,附加到链`.always()`的末尾。`then()`

注意：从 jQuery 1.8 开始，`.pipe()`不推荐使用修改后的`.then()`.

这是代码：

```
var arrValues = [
    "http://fiddle.jshell.net/",
    "http://fiddle.jshell.net/",
    "http://fiddle.jshell.net/"
];

function step(i) {
    return function() {
        var url = arrValues[i];
        log('Starting: ' + url + i);
        return $.ajax(url).done(function(data, textStatus, jqXHR) {
            log(textStatus + ' ' + url + i + ' Done');
        }).fail(function(jqXHR, textStatus, errorThrown) {
            log(textStatus + ' ' + url + i + ' Failed');
        });
    }
};

function log(message) {
    $("#output").append($("<div/>").text(message));
}

log("Starting To Build Report");

var p = $.Deferred().resolve().promise();
$.each(arrValues, function(i, url) {
    p = p.then(step(i));
});
p.done(function() {
    log("The process completed successfully");
}).fail(function() {
    log("One of the steps failed");
}).always(function() {
    log("End of process");
}); 
```

[**更新的小提琴**](http://jsfiddle.net/L5eLs/4/)

# asp.net - Asp.Net MVC 4 捆绑中的 JavaScript 错误

> ID：15434692
> 
> 赞同：5
> 
> 时间：2013-03-15T14:16:47.917
> 
> 标签：asp.net, asp.net-mvc, asp.net-mvc-4, bundling-and-minification, system.web.optimization

当我在 MVC 4 中使用以下捆绑时，我的应用程序出现了几个 JavaScript 错误，例如“jQuery undefined”

```
 bundles.Add(new ScriptBundle("~/bundles/jquery").Include(
                    "~/Scripts/jquery-{version}.js",
                    "~/Scripts/jquery-ui-{version}.js",
                    "~/Scripts/jquery.unobtrusive*",
                    "~/Scripts/jquery.validate*")); 
```

但是当我使用下面的方法时，我的应用程序没有 JavaScript 错误：

```
 bundles.Add(new ScriptBundle("~/bundles/jquery1").Include(
                    "~/Scripts/jquery-{version}.js"));

        bundles.Add(new ScriptBundle("~/bundles/jquery2").Include(
                    "~/Scripts/jquery-ui-{version}.js"));

        bundles.Add(new ScriptBundle("~/bundles/jquery3").Include(
                    "~/Scripts/jquery.unobtrusive*"));

        bundles.Add(new ScriptBundle("~/bundles/jquery3").Include(
                    "~/Scripts/jquery.validate*")); 
```

**我的问题：**有什么问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-15T15:30:09.007

这是由于您的脚本包含在错误的顺序中造成的。您应该确保您的 Web 优化框架版本是最新的。该答案提供了更多详细信息：

[https://stackoverflow.com/a/11995916/1043198](https://stackoverflow.com/a/11995916/1043198)

NuGet 包：

[http://nuget.org/packages/Microsoft.AspNet.Web.Optimization](http://nuget.org/packages/Microsoft.AspNet.Web.Optimization)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-06-26T05:46:23.873

**解决方案：**

我将 Microsoft.AspNet.Web.Optimization 从版本 1.0.0 更新到版本 1.1.0-Beta1 现在我的应用程序可以正常工作。

# c# - Selenium Web 驱动程序 - 无法连接到本地主机 - 出现超时异常

> ID：15434695
> 
> 赞同：1
> 
> 时间：2013-03-15T14:16:53.580
> 
> 标签：c#, visual-studio-2010, selenium-webdriver

当我尝试在 Selenium C# WebDriver 中执行此行时出现此错误。

```
selObj.Driver.SwitchTo().Frame("iframe"); 
```

在执行上述行后，我立即收到超时异常。它说

> “无法连接以删除服务器“localhost\selenium\5661\element”发生超时异常”

这是我试图解析的 html 源代码：

```
**<iframe id="ReportFramectl00_PB_Viewer" frameborder="0" style="width:100%;height:100%;border-top:1px DarkGray Solid;display:inline;" name="ReportFramectl00_PB_Viewer" src="/prada/Reserved.ReportViewerWebControl.axd?OpType=DocMapReport&ClientController=ctl00_PB_Viewer&ReportUrl=%2fprada%2fReserved.ReportViewerWebControl.axd%3fReportSession%3doidzr5nkulkcjh55wp0mvhbc%26ControlID%3d43794585cd934abfbde38a7779bdeaa3%26Culture%3d1033%26UICulture%3d1033%26ReportStack%3d1%26OpType%3dReportArea%26Controller%3dctl00_PB_Viewer%26PageNumber%3d1%26ZoomMode%3dPercent%26ZoomPct%3d100%26ReloadDocMap%3dtrue%26SearchStartPage%3d0%26LinkTarget%3d_top">
<frameset id="frameset" frameborder="1" framespacing="0" cols="0,*">
<frame id="docmap" frameborder="0" name="docmap" src="javascript:''">
</frame>
<frame id="report" onload="parent.document.getElementById('ctl00_PB_Viewer').ClientController.OnReportFrameLoaded();" noresize="true" frameborder="0" name="report" src="/prada/Reserved.ReportViewerWebControl.axd?ReportSession=oidzr5nkulkcjh55wp0mvhbc&ControlID=43794585cd934abfbde38a7779bdeaa3&Culture=1033&UICulture=1033&ReportStack=1&OpType=ReportArea&Controller=ctl00_PB_Viewer&PageNumber=1&ZoomMode=Percent&ZoomPct=100&ReloadDocMap=true&SearchStartPage=0&LinkTarget=_top">** 
```

任何帮助将不胜感激。

# java - editText setOnFocusChangeListener 出错

> ID：15434696
> 
> 赞同：2
> 
> 时间：2013-03-15T14:16:56.737
> 
> 标签：java, android

尝试使用 setOnFocusChangeListener

```
mMessageBox.setOnFocusChangeListener(new OnFocusChangeListener() {

    @Override
    public void onFocusChange(View v, boolean hasFocus) {
        // TODO Auto-generated method stub

    }
}); 
```

但是当我在 onCreate 函数中使用这个函数时，eclipse 给出了错误

```
Multiple markers at this line
    - The method setOnFocusChangeListener(View.OnFocusChangeListener) in the type View is not applicable for the arguments (new 
     OnFocusChangeListener(){})
    - OnFocusChangeListener cannot be resolved to a type 
```

是因为我在清单文件中使用的最小 sdk 吗？我在清单文件中的 sdk 选项是

```
<uses-sdk
    android:minSdkVersion="9"
    android:targetSdkVersion="17" /> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-15T14:20:38.820

编译器已经说了

```
new View.OnFocusChangeListener() {
...
} 
```

重点是`View`。

# php - 以md5格式将密码插入数据库？

> ID：15434701
> 
> 赞同：16
> 
> 时间：2013-03-15T14:17:19.157
> 
> 标签：php, mysql

谁能告诉我或解释我如何将密码以 md5 格式插入数据库？即使您能指出我正确的方向或其他事情，我也会很感激，因为我只是 mysql 的新手，谢谢。

```
$query="INSERT INTO ptb_users (id,
user_id,
first_name,
last_name,
email )
VALUES('NULL',
'NULL',
'".$firstname."',
'".$lastname."',
'".$email."',
'".$password."'
)";
mysql_query($query) or dieerr();
$result = mysql_query("UPDATE ptb_users SET ptb_users.user_id=ptb_users.id"); 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-03-15T14:18:38.073

使用`MD5`，

```
$query="INSERT INTO ptb_users (id,
user_id,
first_name,
last_name,
email )
VALUES('NULL',
'NULL',
'".$firstname."',
'".$lastname."',
'".$email."',
MD5('".$password."')
)"; 
```

但`MD5`不安全。使用[`SHA2`](https://dev.mysql.com/doc/refman/5.5/en/encryption-functions.html#function_sha2).

*   [加密和压缩功能](http://dev.mysql.com/doc/refman/5.5/en/encryption-functions.html)
*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!2/23f3e/1)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-15T14:20:37.870

不要使用`MD5`，因为它不安全。我建议使用`SHA`or ：`bcrypt``salt`

```
SHA256('".$password."') 
```

[http://en.wikipedia.org/wiki/Salt_(密码学)](http://en.wikipedia.org/wiki/Salt_(cryptography))

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-15T15:29:37.580

Darren Davies 说你应该使用盐是部分正确的——他声称 MD5 不安全存在几个问题。

您说过您必须使用 Md5 哈希插入密码，但这并不能真正告诉我们原因。是因为这是验证密码时使用的格式吗？您是否可以控制验证密码的代码？

使用盐的问题在于，它避免了 2 个用户具有相同密码的问题——他们也将具有相同的哈希值——这不是一个理想的结果。通过为每个密码使用不同的盐，就不会出现这种情况（对于非常大量的数据，仍然存在由 2 个不同的密码引起冲突的风险——但我们现在将忽略这一点）。

因此，您可以为 salt 生成一个随机值并将其存储在记录中，或者您可以使用您已经拥有的一些数据 - 例如用户名：

```
$query="INSERT INTO ptb_users (id,
        user_id,
        first_name,
        last_name,
        email )
        VALUES('NULL',
        'NULL',
        '".$firstname."',
        '".$lastname."',
        '".$email."',
        MD5('"$user_id.$password."')
        )"; 
```

（我假设您已经在代码的前面正确地转义了所有这些字符串）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-15T14:42:03.010

如果你想使用 md5 加密，你可以在你的 php 脚本中进行

```
$pass = $_GET['pass'];

$newPass = md5($pass) 
```

然后以这种方式将其插入数据库，但是 MD5 是一种单向加密方法，几乎​​不可能毫无困难地解密

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-15T14:59:05.567

您可以在 mysql 中使用 MD5() 或在 php 中使用 md5()。要使用 salt 在运行 md5 之前将其添加到密码中，fe：

```
$salt ='my_string';
$hash = md5($salt . $password); 
```

最好为每个密码使用不同的盐。为此，您必须将盐保存在数据库中（以及哈希）。而身份验证用户将发送他的登录名并通过。你会在 db 中找到他的 hash 和 salt 并找出：

```
if ($hash == md5($salt . $_POST['password'])) {} 
```

# wpf - WinForms ReportViewer 挂起应用程序 WPF

> ID：15434705
> 
> 赞同：3
> 
> 时间：2013-03-15T14:17:48.457
> 
> 标签：wpf, report, reporting, reportviewer, rdlc

我在使用 ReportViewer 时遇到了一些问题。基本上代码如下：

```
public void Display(object dataSource, ReportViewer viewer)
    {
        currentDs = dataSource as MyTypes;

        if (currentDs != null)
        {
            var param = new LinkedList<ReportParameter>();
            param.AddFirst(new ReportParameter("Title", "Title"));
            viewer.ProcessingMode = ProcessingMode.Local;
            viewer.LocalReport.ReportEmbeddedResource = ReportName;
            viewer.LocalReport.EnableExternalImages = true;
            viewer.LocalReport.DataSources.Add(new ReportDataSource(DataSourceName + "_Header", currentDs.Header));
            viewer.LocalReport.DataSources.Add(new ReportDataSource(DataSourceName + "_Footer", currentDs.Footer));
            viewer.LocalReport.DataSources.Add(new ReportDataSource(DataSourceName + "_Lines", currentDs.Lines));

            viewer.LocalReport.SetParameters(param);
            viewer.RefreshReport();
        }
    } 
```

问题是有时它会生成 rdlc 报告，但有时它只是挂起应用程序。具体来说，它停留在 viewer.RefreshReport(); 永远。

在 rdlc 文件上正确设置了相应的参数和数据集。

有没有人经历过类似的行为？

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-22T16:18:18.853

我想您的查看器[配置](http://msdn.microsoft.com/en-us/library/hh273267.aspx)正确。

第一代通常会成功吗？您可以尝试`viewer.Reset()`在每次生成报告后调用，这可能会解决一些复杂的问题。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-27T07:40:43.780

有[一篇 2006 年的帖子](http://social.msdn.microsoft.com/Forums/en-US/vsreportcontrols/thread/83e2b62f-215d-4546-890c-85d9075cf269)表面上看起来很相关，可能会给你一个解决方法，尽管我不得不承认我自己没有这样做，因为我几乎不可能重现你看到的问题和所以同样不可能看到是否有任何解决方法可以解决它。这并不理想，但我希望没有无用信息之类的东西:-)

相关信息位于链接线程的底部，为了清楚起见，我在下面引用了它。

> ReportViewer 控件分为两个组件 - 报表对象（公开为 .ServerReport 和 .LocalReport）和 UI（实际的 ReportViewer 类）。报告对象存储有关您的报告的所有状态。UI 组件只是调用它们来获取显示报告、参数提示、工具栏等所需的信息。
> 
> UI 组件不是线程安全的，就像大多数控件一样。但是报表对象是线程安全的。当您调用 RefreshReport 时，查看器使用后台线程对报表对象调用 Render。但这不是控件调用报表对象的唯一一次。第一次需要编译报表定义（本地报表）或创建会话（服务器报表）可能需要很长时间。如果这个“第一次”是在 RefreshReport 期间，它将发生在后台线程上。但正如您所见，它可能发生在其他时间。例如，填充参数 UI 需要调用 GetParameters，这也需要此启动惩罚。
> 
> 如果你想保证这个“第一次”惩罚是在后台线程上，那么在设置报告路径和其他连接/数据源信息之后，从后台线程调用 GetParameters。

这似乎建议您`ReportViewer`从后台线程而不是从 UI 线程对您的 always 进行一些调用，以便任何延迟都不会影响 UI。对我来说，这听起来有点像一个笨拙的设计！

这对你有帮助吗？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-18T23:28:05.940

我可能已经修好了。这个页面帮助我弄清楚：http: [//ikriv.com/dev/dotnet/MysteriousHang.html](http://ikriv.com/dev/dotnet/MysteriousHang.html)

因此，似乎 a) 需要在 UI 线程上创建报告查看器，并且 b) 这并不总是可靠地发生（有关详细信息，请参阅链接）。报表查看器是 .NET 2 组件，链接中记录的行为适用于 .NET 2。

为了解决这个问题，我采用了以下技巧：

*   第一个技巧：在启动时命名 UI 线程
*   第二个技巧：尽早强制处理，然后获取对同步上下文的引用
*   第三个技巧：使用线程名称和同步上下文来实现所需的调用 -> 调用惯用语。

如果这一切都在一起，我会回来发布更多细节。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-05-19T05:27:23.707

我在带有 .Net 4.0 和 Report Viewer 2010 的 Windows XP 中遇到了这个问题。是的，操作系统已终止支持，但 Windows Embedded POSReady 2009 (Windows XP SP3)，它仍处于扩展支持状态，直到 2019 年 4 月。

要解决挂起问题，请调用已弃用的 API 来呈现报告

```
rptviewer.LocalReport.ExecuteReportInSandboxAppDomain(); 
```

并且当退出或重新运行报告时，例如报告的参数发生变化，报告需要通过正确清理

```
rptviewer.LocalReport.DataSources.Clear();
rptviewer.LocalReport.ReportEmbeddedResource = null;
rptviewer.LocalReport.Dispose();
// release sandbox is required to prevent the lock up, see below note on display report
rptviewer.LocalReport.ReleaseSandboxAppDomain();

// clean up report viewer
rptviewer.Clear();
rptviewer.Reset(); 
```

注意在 Windows 7、8、8.1 和 10 上。不会发生挂起问题。

# apache - 在 apache hadoop 中读取或复制到 hdfs 时出现校验和异常

> ID：15434709
> 
> 赞同：24
> 
> 时间：2013-03-15T14:17:59.223
> 
> 标签：apache, hadoop, mapreduce

我正在尝试使用 Apache hadoop 实现并行化算法，但是在尝试将文件从本地文件系统传输到 hdfs 时遇到了一些问题。尝试读取或传输文件时引发校验**和异常。**

奇怪的是，有些文件被成功复制，而另一些则没有（我尝试了 2 个文件，一个比另一个稍大，虽然两个文件都很小）。我所做的另一个观察是 Java *FileSystem.getFileChecksum*方法在所有情况下都返回**null 。**

关于我要实现的目标的一些背景知识：我正在尝试将文件写入 hdfs，以便能够将其用作我编写的 mapreduce 作业的分布式缓存。

我还从终端尝试了*hadoop fs -copyFromLocal*命令，结果与通过 java 代码完成时的行为完全相同。

我浏览了整个网络，包括关于 stackoverflow 的其他问题，但我还没有设法解决这个问题。请注意，我对*hadoop*还是很陌生，因此非常感谢任何帮助。

我附上了下面的堆栈跟踪，它显示了抛出的异常。*（在这种情况下，我已经发布了来自终端的hadoop fs -copyFromLocal*命令的堆栈跟踪）

```
name@ubuntu:~/Desktop/hadoop2$ bin/hadoop fs -copyFromLocal ~/Desktop/dtlScaleData/attr.txt /tmp/hadoop-name/dfs/data/attr2.txt

13/03/15 15:02:51 INFO util.NativeCodeLoader: Loaded the native-hadoop library
    13/03/15 15:02:51 INFO fs.FSInputChecker: Found checksum error: b[0, 0]=
    org.apache.hadoop.fs.ChecksumException: Checksum error: /home/name/Desktop/dtlScaleData/attr.txt at 0
        at org.apache.hadoop.fs.ChecksumFileSystem$ChecksumFSInputChecker.readChunk(ChecksumFileSystem.java:219)
        at org.apache.hadoop.fs.FSInputChecker.readChecksumChunk(FSInputChecker.java:237)
        at org.apache.hadoop.fs.FSInputChecker.read1(FSInputChecker.java:189)
        at org.apache.hadoop.fs.FSInputChecker.read(FSInputChecker.java:158)
        at java.io.DataInputStream.read(DataInputStream.java:100)
        at org.apache.hadoop.io.IOUtils.copyBytes(IOUtils.java:68)
        at org.apache.hadoop.io.IOUtils.copyBytes(IOUtils.java:47)
        at org.apache.hadoop.io.IOUtils.copyBytes(IOUtils.java:100)
        at org.apache.hadoop.fs.FileUtil.copy(FileUtil.java:230)
        at org.apache.hadoop.fs.FileUtil.copy(FileUtil.java:176)
        at org.apache.hadoop.fs.FileSystem.copyFromLocalFile(FileSystem.java:1183)
        at org.apache.hadoop.fs.FsShell.copyFromLocal(FsShell.java:130)
        at org.apache.hadoop.fs.FsShell.run(FsShell.java:1762)
        at org.apache.hadoop.util.ToolRunner.run(ToolRunner.java:65)
        at org.apache.hadoop.util.ToolRunner.run(ToolRunner.java:79)
        at org.apache.hadoop.fs.FsShell.main(FsShell.java:1895)
    copyFromLocal: Checksum error: /home/name/Desktop/dtlScaleData/attr.txt at 0 
```

* * *

## 回答 #1

> 赞同：61
> 
> 时间：2013-03-15T22:04:10.263

您可能遇到了[HADOOP-7199](https://issues.apache.org/jira/browse/HADOOP-7199)中描述的错误。发生的情况是，当您使用 下载文件时`copyToLocal`，它还会在同一目录中复制一个**crc**文件，因此如果您修改文件然后尝试这样做`copyFromLocal`，它将对您的新文件进行校验和并与您的本地**crc**文件进行比较并失败并显示非描述性错误消息。

要修复它，请检查您是否有此**crc**文件，如果您确实删除它并重试。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2016-03-25T18:09:43.643

我通过删除 .crc 文件解决了同样的问题

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-05-20T07:32:35.320

CRC 文件保存特定块数据的序列号。整个数据被拆分成集体块。每个块都将元数据与 CRC 文件一起存储在 /hdfs/data/dfs/data 文件夹中。如果有人对 CRC 文件进行更正......实际和当前的 CRC 序列号将不匹配，并导致错误！修复此错误的最佳做法是覆盖元数据文件和 CRC 文件。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-16T07:25:31.960

好的，所以我设法解决了这个问题，我在这里写下答案，以防其他人遇到同样的问题。

我所做的只是创建一个新文件并**从有问题的文件中复制所有内容**。

据我推测，似乎正在创建一些*crc*文件并将其附加到该特定文件，因此通过尝试使用另一个文件，将执行另一个*crc检查。*另一个原因可能是我将文件命名为*attr.txt*，这可能是与其他资源冲突的文件名。也许有人可以进一步扩展我的答案，因为我不能 100% 确定技术细节，这些只是我的观察。

* * *

## 回答 #5

> 赞同：-3
> 
> 时间：2014-05-02T09:23:27.673

我遇到了完全相同的问题，但没有找到任何解决方案。由于这是我的第一次 hadoop 体验，我无法通过互联网遵循一些指示。我通过格式化我的namenode解决了这个问题。

```
hadoop namenode -format 
```

# java - 爪哇。对象引用

> ID：15434714
> 
> 赞同：-1
> 
> 时间：2013-03-15T14:18:14.930
> 
> 标签：java, android

Q1：在第 5 行，是否会`mess`丢失对第 1 行实例化对象的引用（被覆盖）？

Q2：在`enqueue`方法的第 3 行，我将 mess 的引用存储在一个新的“槽”中`ArrayList`。即使对在第 1 行创建的对象的引用会丢失（因为第 5 行），它也不会被垃圾收集，因为`ArrayList`仍然指向它？

Q3：执行完这7行后，在控制器的队列中应该有2个对这两个`Messenger`对象的引用？

```
1: Messenger mess = new Messenger(_TYPE1_);
2: /* ... */
3: controller.enqueue(mess); // store the reference inside a Runnable in the queue
4: /* ... */
5: mess = new Messenger(_TYPE2_);
6: /* ... */
7: controller.enqueue(mess); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T14:22:00.177

Q1：是的，它只是被重新分配了一个新的参考。

Q2：对。

Q3：对。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T14:23:20.043

A1：是的，它会失去参考。该引用的值（您可以将其视为指针）将被新`Message`对象的引用覆盖。简而言之：`mess`停止“指向”，`_TYPE1_`现在“指向” `_TYPE2_`。

A2：根据定义，如果没有指向该对象的引用，则该对象有资格进行垃圾回收。你已经在这里回答了你自己的问题。

A3：是的，因为您排队的对象不同（排队时引用的对象不同）。

# tcl - 有没有办法在 tcl 的“==”测试中使用通配符？

> ID：15434715
> 
> 赞同：0
> 
> 时间：2013-03-15T14:18:15.137
> 
> 标签：tcl

这可能是不可能的，但有没有办法在 tcl 中传递正则表达式。我有这个函数，如果找到一些东西并比较它们以查看它们是否相等，我无法更改你在字符串中传递的函数。

```
proc check {a } {
    // find b in the database
    if {$a == $b} {
        puts "equals"
    } {
        puts "Not equals"
    }   
 } 
```

问题是该函数使用'=='。这仅在它们完全匹配时才匹配，但我需要在“a”中有通配符，以便如果“a”和“b”以相同的单词开头，“a”和“b”是相等的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-15T14:36:45.227

> 我有这个我无法改变的功能

为什么？在 tcl 中，您可以轻松地重新定义它

```
proc check {a } {
    # find b in the database
    if {[string match -nocase $a $b]} {
        puts "equals"
    } {
        puts "Not equals"
    }   
} 
```

或者您可以重新定义`if`，尽管不推荐。

您甚至可以`if`在运行时搜索并替换该行

```
proc check [info args check] [string map {
    {if {$a == $b}} {if {[string match -nocase $a $b]}}
} [info body check]] 
```

那么：为什么不能改变功能呢？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T15:18:39.720

操作者的行为`==`是固定的；它总是进行平等测试。实际上，它进行了一个相等性测试，该测试更喜欢进行数字相等性，并且只有在没有其他方法时才回退到字符串相等性。

因此，要改变你的行为`check`必须变得*非常*棘手。

* * *

我会考虑使用执行跟踪来拦截其中的某些内容，`check`以便您可以在局部`a`变量上放置读取跟踪，这样当您读取它时，您实际上可以根据复杂规则获得它的值是否与某些内容匹配。（`b`可能只保留一个`1`布尔值。）执行此操作的代码非常复杂，我*真的*会尽量避免这样做！

如果可以的话，更容易的是重新定义`proc`，以便您可以在主体上放置前缀，`check`以便您可以在那里应用跟踪。甚至按摩测试本身。

```
# Rename the command to something that nothing else knows about (tricky!)
rename proc my_real_proc

my_real_proc proc {name arguments body} {
    # Replace a simple equality with a basic no-case pattern match
    if {$name eq "check"} {
        set body [string map {{$a == $b} {[string match -nocase $b $a]}} $body]
    }
    # Delegate to the original definition of [proc] for everything else
    uplevel my_real_proc $name $arguments $body
} 
```

只要您在定义 之前运行该代码`check`，您就会更改代码（无需“更改代码”）并获得您想要的功能。

# c - 为什么这不起作用？ [链接列表]

> ID：15434719
> 
> 赞同：0
> 
> 时间：2013-03-15T14:18:23.880
> 
> 标签：c, linked-list, typedef

```
#include<conio.h>
#include<stdio.h>
#include<alloc.h>
typedef struct node
{
    int data;
    struct node *n_next,*next,*p_pre,*pre;
};

int main()
{
    node *head,*p,*q,*r,*s;
    head=(struct node*) malloc(sizeof(struct node));
    p=head;
    q=(struct node*) malloc(sizeof(struct node));
    r=(struct node*) malloc(sizeof(struct node));
    s=(struct node*) malloc(sizeof(struct node));

    printf(" \nEnter the data of the node ");
    scanf("%d",&p->data);

    printf("\nEnter the data for second node ");
    scanf("%d "&q->data);

    printf("\nEnter the data for third node ");
    scanf("%d "&r->data);

    printf("\nEnter the data for fourth node ");
    scanf("%d ",&s->data);
    getch();
    return(0); 
} 
```

编译后，代码预计会获取 4 个数据值并将它们存储在相关节点的数据字段中，但它说..

> scanf("%d",&p->data); // 非法使用指针？？？怎么会这样？

代码的哪一部分被破坏并且应该被修复？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T14:23:43.843

您的 typedef 错误，应该是：

```
typedef struct node
{
   int data;
   struct node *n_next,*next,*p_pre,*pre; 
} node; // <--- 
```

而且你在一些电话中缺少逗号`scanf`：

`scanf("%d "&q->data);`

# backbone.js - 可配置的 Backbone.js 事件选择器

> ID：15434720
> 
> 赞同：4
> 
> 时间：2013-03-15T14:18:27.633
> 
> 标签：backbone.js, backbone-views, backbone-events

我正在使用出色的框架 Backbone.js 开发简单的应用程序，如果我可以制作可配置的主干视图事件选择器会很好，例如这种方式它不起作用，因为它是错误的 js 语法：

```
return Backbone.View.extend({
    events: {
        'click ' + someConfigSelector: 'doSomethink'
    }
}) 
```

有没有其他方法可以在 Backbone 视图中设置事件？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-15T14:59:07.307

看看这个小提琴：http: [//jsfiddle.net/phoenecke/hyLMz/1/](http://jsfiddle.net/phoenecke/hyLMz/1/)

您可以使用函数`events`代替对象。

```
return Backbone.View.extend({
    events: function() {
        // add some normal events to the hash
        var e = {
            'click #foo': 'doSomething1',
            'click #bar': 'doSomething2'
        };
        // add one where key is calculated
        e['click ' + someConfigSelector] = 'doSomething';
        // return events hash
        return e;
    }
}); 
```

这样，您可以添加您的事件，其中根据您的配置计算密钥。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T14:59:26.970

对于动态事件，我更喜欢下面的方法，因为这个函数会在任何时候`delegateEvent`被调用。

根据在视图函数执行后调用的 delegateEvent 上的[文档，您可以使用此技术动态创建事件：](http://backbonejs.org/#View-delegateEvents)`initialize`

```
var TestView = Backbone.View.extend({    
    events: function () {
        var evt = {};
        evt['click ' + this._extraSelector] = '_onButtonClick';
        return evt;
    },
    initialize: function(config) {
        // passed in the selector, or defaulted 
        this._extraSelector = config.extraSelector || "BUTTON.default";
    }, 

    _onButtonClick: function() { }
});

var v = new TestView({ extraSelector: 'BUTTON.sample' }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-15T14:28:37.203

你可以这样做：

```
return Backbone.View.extend({
    events: { },

    initialize:function() {
        this.events['click ' + someConfigSelector] = 'doSomethink';
    }
}) 
```

但它有点打破了如何在主干中声明事件的惯例，并使代码更难阅读。也许有人有更好的方法。

# javascript - Windows 8 商店应用程序：如何让应用程序动态磁贴不断变化颜色（和文本）？

> ID：15434721
> 
> 赞同：0
> 
> 时间：2013-03-15T14:18:34.623
> 
> 标签：javascript, windows, windows-8, windows-store-apps, winjs

有没有办法让开始菜单上的动态磁贴应用程序“不断”（例如，每分钟尽可能多次）按照精确的周期更改磁贴的整个颜色（这是我们想要的功能，而不仅仅是设计的东西）

从这个问题的答案来看：[https ://stackoverflow.com/a/15086232/867899](https://stackoverflow.com/a/15086232/867899)

> 如果您的应用程序没有运行，即使后台任务刷新频率为 15 分钟也是不可能的。目前，根本不支持这种情况。

我想知道它是否真的可行，并且如果您的应用程序实际上正在运行，应用程序不是全屏（当然）或捕捉并且开始菜单打开，那么该磁贴可以持续更新多长时间？

非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T14:44:13.193

[这篇文章在这里](https://stackoverflow.com/questions/13497542/how-often-can-a-windows-8-live-tile-be-updated)解决了这个问题。如果您的应用程序正在运行，那么频繁的磁贴更新虽然可行，但 MS 不赞成，因为这不是动态磁贴的预期目的。

来自[MS 指南和磁贴和徽章清单](http://msdn.microsoft.com/en-us/library/windows/apps/hh465403.aspx)：

> 不恰当地使用磁贴通知
> 
> 如果您没有为用户提供有趣的、新的、个性化的内容，请不要使用动态磁贴。

在这种情况下，您描述的功能很可能会导致您的应用被商店拒绝。

# c# - 正确绑定 IValueConverter

> ID：15434723
> 
> 赞同：3
> 
> 时间：2013-03-15T14:18:38.287
> 
> 标签：c#, wpf, data-binding, ivalueconverter

我正在尝试创建某种带有发光背景的标签。为此，我决定在内容控件上使用样式。发光效果来自两个`DropShadowEffects`，我希望将其绑定到`Foreground Property`内容控件的 。`Foreground Property`is 类型`Brush`和`DropShadowEffect.Color`is 类型`Color`，所以我需要在这两者之间进行转换。

每当我尝试通过转换器设置发光颜色时，发光效果都会保持黑色。似乎转换器代码甚至从未通过。我确实在转换器中返回了预定义的颜色（无转换），甚至添加了 Debug.Break()，但无济于事。

你能告诉我我做错了什么，或者是否有替代的，可能更好的方法来实现带有发光背景的标签。

转换器：

```
public class ColorToBrushConverter : IValueConverter
{
    public object Convert(object value, Type targetType, object parameter, System.Globalization.CultureInfo culture)
    {
        if (value == null) return null;

        if (value is Color)
        {
            Color color = (Color)value;
            BrushConverter bc = new BrushConverter();
            return bc.ConvertFrom(color);
        }

        Type type = value.GetType();
        throw new InvalidOperationException("Unsupported type ["+type.Name+"]");            
    }

    public object ConvertBack(object value, Type targetType, object parameter, System.Globalization.CultureInfo culture) {

        if (value is Brush)
        {
            Brush brush = (Brush)value;
            BrushConverter bc = new BrushConverter();
            return bc.ConvertTo(brush, typeof(Color));
        }

        Type type = value.GetType();
        throw new InvalidOperationException("Unsupported type ["+type.Name+"]");            
    }
} 
```

在资源字典中：

```
<local:ColorToBrushConverter x:Key="Color2BrushConverter" />

<Style x:Key="ContentControlGlowStyle" TargetType="{x:Type ContentControl}">
    <Setter Property="Template">
        <Setter.Value>
            <ControlTemplate TargetType="{x:Type ContentControl}">
                <Border>
                    <Border.Effect>
                        <DropShadowEffect
                                BlurRadius="15"
                                Color="{Binding Path=Foreground, Converter={StaticResource Color2BrushConverter}}"
                                ShadowDepth="2"
                                Direction="0"/>

                    </Border.Effect>

                    <TextBlock Name="Highlight" Foreground="{TemplateBinding Foreground}" Text="{TemplateBinding Content}" Margin="10,5,0,0">
                        <TextBlock.Effect>  
                            <DropShadowEffect
                                BlurRadius="15"
                                Color="{Binding Path=Foreground,Converter={StaticResource Color2BrushConverter}}"
                                ShadowDepth="2"
                                Direction="0"/>

                        </TextBlock.Effect>

                    </TextBlock>
                </Border>
            </ControlTemplate>
        </Setter.Value>
    </Setter>
</Style> 
```

在 XAML 中：

```
<ContentControl Name="cc2" Style="{DynamicResource ContentControlGlowStyle}"
    FontSize="24"
    Foreground="LightBlue"
    Background="LightBlue"
    Content="some content to display"
    FontFamily="Verdana" /> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T15:10:11.770

首先，您的转换器似乎倒退了——您正在将 a 转换`Brush`为`Color`，并且您已经创建了 a`ColorToBrushConverter`来执行此操作。

另外，我不确定您为什么要在`ContentControl`样式中重新定义控件模板。您应该只设置 a `DropShadowEffect`，它`Color`绑定到`ContentControl`'s `Foreground`。

试试这个：

```
public class BrushToColorConverter : IValueConverter
{
    public object Convert(object value, Type targetType, object parameter, System.Globalization.CultureInfo culture)
    {
        var solidColorBrush = value as SolidColorBrush;
        if (solidColorBrush == null) return null;

        return solidColorBrush.Color;
    }

    public object ConvertBack(object value, Type targetType, object parameter, System.Globalization.CultureInfo culture)
    {
        throw new NotImplementedException();
    }
} 
```

和

```
<local:BrushToColorConverter x:Key="BrushToColorConverter" />

<Style x:Key="ContentControlGlowStyle" TargetType="{x:Type ContentControl}">
    <Setter Property="Effect">
        <Setter.Value>
            <DropShadowEffect
                        BlurRadius="15"
                        Color="{Binding Foreground,RelativeSource={RelativeSource AncestorType=ContentControl}, Converter={StaticResource BrushToColorConverter}}"
                        ShadowDepth="2"
                        Direction="0"/>
            </Setter.Value>
       </Setter>
</Style> 
```

像使用它一样

```
<ContentControl 
    Foreground="Yellow" 
    Style="{DynamicResource ContentControlGlowStyle}">
    <TextBlock Text="TEST" FontSize="72"/>
</ContentControl> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T15:02:04.417

要解决您面临的问题，您需要将相对源设置为颜色绑定。知道这不是您的转换器问题的诀窍是它从未被调用过，并且 VS 不会吐出任何错误，这意味着已经选择了默认值。

# haskell - 从数据库行构建树

> ID：15434727
> 
> 赞同：3
> 
> 时间：2013-03-15T14:18:53.120
> 
> 标签：haskell, data-structures, tree

我需要从数据库行构建一棵树。更具体地说，我有一个包含会计科目表的表格。

我不想递归地查询表，而是想在一个步骤中加载所有表的信息，即包含 id 和 parentIds 的帐户行，然后从那里构建树。

问题之一是帐户行没有任何顺序，即。在我遇到父母之前，我可能会遇到一个孩子。

我认为这个问题非常普遍，所以我认为甚至可能已经有一个 haskell 库来解决它。

任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T15:03:55.253

正如尼基塔所说，你真正的问题是什么？

您不提供任何数据类型、树键分类、...

无论如何，这段代码可以帮助你思考你的问题......

```
data Tree a = Node a [Tree a] deriving Show

db = [(0, 1)
     ,(1, 2)
     ,(1, 3)
     ,(2, 4)
     ,(2, 6)
     ,(3, 5)
     ]

rootTree = Node 0 []

insert parent child (Node key childs) =
  Node key $ if key == parent then Node child []:childs
                              else map (insert parent child) childs

insertFromDB rows = foldl insertRow rootTree rows
  where insertRow tree (parent, child) = insert parent child tree 
```

如果你不能得到有序数据，你可以排序它搜索父母，下一个函数计算每个节点的深度（具有相同的`db`数据）

```
calculateDeepLevel db = compute 0 roots
  where roots = filter (not.flip elem snds) fsts
        fsts = nub $ map fst db
        snds = map snd db
        compute level parents = map (\n -> (n, level)) parents ++
                                concatMap (addChilds (level + 1)) parents
        addChilds level node = compute level $ map snd $ filter ((node==).fst) db 
```

您`calculateDeepLevel`可以从.`db``db`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-15T19:05:45.090

首先是一些进口，

```
import qualified Data.Map as M
import qualified Data.Tree as T
import Data.List (foldl')
import Control.Arrow ((&&&))
import Data.Maybe (fromMaybe) 
```

接下来，假设我们的记录有一个 id 和一个可选的父 id（根节点没有父节点），并带有一些值：

```
data Rec a = Rec { recId       :: Int
                 , recParentId :: Maybe Int
                 , recValue    :: a
                 } 
```

没有什么可以阻止多个节点拥有一个`Nothing`父 id，所以我们可能会发现不止一棵树，所以我们将列表转换为树的函数可能如下所示：

```
toTree :: [Rec a] -> [T.Tree a]
toTree rs = ts where 
```

首先，让我们构建一个从可选父 ID 到具有该父 ID 的记录列表的映射：

```
 -- gs :: M.Map (Maybe Int) [Rec a]
    gs = foldl' f M.empty rs where
        f m r = M.insertWith (const (r:)) (recParentId r) [r] m 
```

接下来，让我们从一个虚拟根节点开始展开一棵树，其子节点将是我们感兴趣的树的根。请注意，虚拟根节点没有任何值，因此我们使用`undefined`：

```
 -- t :: T.Tree a
    t = T.unfoldTree mkNode (undefined, Nothing) 
```

该`mkNode`函数传递了我们要构建的节点的值和 id。`Map`它返回值，以及使用我们之前构建的子值/id 对的列表：

```
 -- mkNode :: (a, Maybe Int) -> (a, [(a, Maybe Int)])
    mkNode (a, i) = (a, map (recValue &&& Just . recId)
                          . fromMaybe []
                          . M.lookup i $ gs) 
```

最后，我们可以丢弃虚拟根节点，并将其直接子节点作为我们感兴趣的树的根返回：

```
 ts = T.subForest t 
```

这是一个测试：

```
main = mapM_ (putStrLn . T.drawTree)
         $ toTree [ Rec 0 Nothing "rootA"
                  , Rec 1 (Just 0) "rootA.childA"
                  , Rec 2 (Just 0) "rootA.childB"
                  , Rec 3 (Just 1) "rootA.childA.childA"
                  , Rec 4 (Just 1) "rootA.childA.childB"
                  , Rec 5 (Just 2) "rootA.childB.childA"
                  , Rec 6 (Just 2) "rootA.childB.childB"
                  , Rec 7 Nothing "rootB"
                  , Rec 8 (Just 7) "rootB.childA"
                  , Rec 9 (Just 7) "rootB.childB"
                  , Rec 10 (Just 8) "rootB.childA.childA"
                  , Rec 11 (Just 8) "rootB.childA.childB"
                  , Rec 12 (Just 9) "rootB.childB.childA"
                  , Rec 13 (Just 9) "rootB.childB.childB"
                  ] 
```

生成：

```
rootB
|
+- rootB.childB
|  |
|  +- rootB.childB.childB
|  |
|  `- rootB.childB.childA
|
`- rootB.childA
   |
   +- rootB.childA.childB
   |
   `- rootB.childA.childA

rootA
|
+- rootA.childB
|  |
|  +- rootA.childB.childB
|  |
|  `- rootA.childB.childA
|
`- rootA.childA
   |
   +- rootA.childA.childB
   |
   `- rootA.childA.childA 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-15T14:49:46.700

您在 StackOverflow 上获得的答案质量几乎完全取决于您提供的问题的质量。如果您想获得包含一些代码的答案，您应该在问题中提供一些代码，如果您想获得有关某些特定库的答案，请参考它。

目前你的问题很模糊，我只能回答你需要使用类似[`Data.Map`](http://hackage.haskell.org/packages/archive/containers/0.5.2.1/doc/html/Data-Map-Lazy.html)的结构来首先积累中间结果，然后通过查询这个中间数据结构来重新排列它们。正如它的文档所指出的，它的大多数访问器函数的复杂性是`O(log n)`，这是非常有效的。

您不应该期望任何数据库库提供这种功能，因为问题太具体了。

# linux - 如何使用 linux 命令显示文件中每一行的第一个单词？

> ID：15434728
> 
> 赞同：31
> 
> 时间：2013-03-15T14:18:55.613
> 
> 标签：linux, shell, grep

我有一个包含很多行的文件，我想用 Linux 命令只显示每行的第一个单词。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2013-03-15T14:21:05.390

[尝试使用grep](/questions/tagged/grep "显示标记为“grep”的问题")执行此操作：

```
grep -Eo '^[^ ]+' file 
```

* * *

## 回答 #2

> 赞同：42
> 
> 时间：2013-03-15T14:20:22.720

您可以使用`awk`：

```
awk '{print $1}' your_file 
```

这将“打印” 中的第一列 ( `$1`) `your_file`。

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2013-03-15T14:24:10.610

尝试这样做`coreutils cut`：

```
cut -d' ' -f1 file 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-03-15T14:21:44.247

我看到已经有答案了。但是你也可以用 sed 做到这一点：

```
sed 's/ .*//' fileName 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-03-15T19:36:35.967

上述解决方案似乎适合您的具体情况。对于您的问题的更一般应用，请考虑通常将单词定义为由空格分隔，但不一定是空格字符。例如，文件中的列可能是制表符分隔的，或者甚至是制表符和空格的混合分隔。

前面的示例对于查找以空格分隔的单词都很有用，而只有 awk 示例还可以查找由其他空白字符分隔的单词（事实上，这在各种 sed/grep 版本中很难统一执行）。您可能还希望通过修改 awk 语句来显式跳过空行：

```
awk '{if ($1 !="") print $1}' your_file 
```

如果您还担心空*字段*的可能性，即以空格*开头*的行，那么将需要一个更强大的解决方案。我对 awk 不够熟练，无法为这种情况生成一个单行代码，但一个简短的 python 脚本可能看起来像：

```
>>> import re
>>> for line in open('your_file'):
...     words = re.split(r'\s', line)
...     if words and words[0]:
...         print words[0] 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-12-19T23:37:14.153

...或在 Windows 上（如果您有 GnuWin32 grep）：

```
grep -Eo "^[^ ]+" file 
```

# database - 使用 foxpro 导出阿拉伯语文本

> ID：15434729
> 
> 赞同：1
> 
> 时间：2013-03-15T14:18:58.340
> 
> 标签：database, xls, visual-foxpro

我正在尝试将阿拉伯语文本从我的 Visual foxpro (9) 中的数据库表导出到 Excel 工作表，但阿拉伯语脚本显示为拉丁字符，反之（Excel 到 foxpro）效果很好

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-11T10:47:39.220

转到您的 PC Windows 控制面板以选择区域和语言并打开它。在管理选项卡中单击按钮更改系统区域设置，系统将提示您选择区域设置语言选择您选择的阿拉伯语，然后单击确定，在同一管理选项卡上另一个按钮称为复制设置，单击它，当提示（将您的当前设置复制到？）检查展位选项，然后单击确定。现在转到 Fox-Pro 和工具，选项，区域，并检查（使用系统设置）如果已检查再次检查，点击另存为默认值，确定。最后要做的事情，退出 Fox-pro，然后重新启动 PC。如果没有使用不支持阿拉伯语的键盘或操作系统插入 fox-pro 表中的阿拉伯语文本，则尝试再次导出阿拉伯语文本（很好）。

# android - ListView 中的 ViewPagers：onItemClickListener

> ID：15434732
> 
> 赞同：3
> 
> 时间：2013-03-15T14:19:06.520
> 
> 标签：android

我有一个`ListView`将`ViewPager`s 显示为行元素的。我想使用一个`OnItemClickListener`，但`ViewPager`阻止`onItemClick`被调用。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T09:43:08.180

用于`mViewpager.requestDisallowInterceptTouchEvent(false);`禁止 ViewPager 拦截来自 ListView 的事件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T14:40:19.383

有趣的设置。问题是 ViewPager 从实际列表元素中“窃取”了焦点。

当最初返回您的列表项视图时（例如在您的 ListAdapter 中），调用`setDescendantFocusability(FOCUS_BLOCK_DESCENDANTS)`该视图。

或者，将其直接添加到列表元素的 XML 布局中：`android:descendantFocusability="blocksDescendants"`

此问题描述和解决方案已在[此处](https://code.google.com/p/android/issues/detail?id=3414#c27)找到。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2016-10-14T20:53:15.363

您可以使用自定义 ListView 实现，如我在此处的答案中的实现：[https ://stackoverflow.com/a/40051801/425238](https://stackoverflow.com/a/40051801/425238)

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2013-03-15T14:23:56.943

您的设置听起来相当混乱，但听起来您想要的是一种监视 ViewPager 页面更改的方法，在这种情况下，您将使用以下内容

```
pager.setOnPageChangeListener(new ViewPager.OnPageChangeListener() {
    @Override
    public void onPageScrolled(int position, float positionOffset, int positionOffsetPixels) {
        //actions
    }

    @Override
    public void onPageSelected(int position) {
        //actions
    }

    @Override
    public void onPageScrollStateChanged(int state) {
        //actions
    }
}); 
```

从听起来 onPageSelected 听起来像是您最好的选择，您可以使用它来获取当前选择的页面索引。

但是，如果您想在列表视图中的项目被选中时获得，您需要这样的东西。

```
ListView listview;
listview.setOnItemSelectedListener(new AdapterView.OnItemSelectedListener() {
    @Override
    public void onItemSelected(AdapterView<?> parent, View view, int position, long id) {
        //on item selected here
    }

    @Override
    public void onNothingSelected(AdapterView<?> parent) {
        //never had to implement personally
    }
}); 
```

# .net - Ninject EF4、存储库和工作单元

> ID：15434734
> 
> 赞同：1
> 
> 时间：2013-03-15T14:19:16.150
> 
> 标签：.net, dependency-injection, ninject, repository-pattern

我的解决方案中有几个项目可以访问相同的数据，因此稍后我将在单独的项目中实现数据访问。目前我正在使用 EF4、通用存储库和工作单元模式。我已经设计了我的数据访问以支持依赖注入，并且我想使用 Ninject。这是我到目前为止的示例

```
public class Account 
{
    public int Id { get; set; }
    public Guid WebId { get; set; }
    public string Firstname { get; set; }
    public string Lastname { get; set; }
    public string Email { get; set; }
    public string Address { get; set; }
    public string Mobile { get; set; }

}

public interface IRepository<T>
{
    IEnumerable<T> Get(Expression<Func<T, bool>> filter, Func<IQueryable<T>);
    T GetById(int id);
    void Update(T dinner);
    void Insert(T dinner);
    void Delete(int id);
    void Save();
} 
```

我还有一个存储库实现，我不会在这里发布它以供篇幅。

我的 UnitOfWork 看起来像这样

```
public class UnitOfWork
{        
    private Repository<Account> _accountRepository;
    public IRepository<Account> AccountRepository
    {
        get
        {
            if (this._accountRepository == null)
            {
                _accountRepository = new Repository<Account>();
            }
            return _accountRepository;
        }
    }       
} 
```

我如何以及在哪里设置 ninject 来自动解析我的存储库，这样我就可以使用该接口而无需在我的工作单元中实例化它。这是正确的做法还是我完全错误地理解了 DI？这是我认为我希望我的工作单元看起来像的样子

```
public class UnitOfWork
{
    IKernel _kernel;

    public UnitOfWork()
    {
        _kernel = new StandardKernel();
    }

    private IRepository<Account> _accountRepository;

    public IRepository<Account> AccountRepository
    {
        get
        {
            if (this._accountRepository == null)
            {
                _accountRepository = _kernel.Get<IRepository<Account>>();;
            }
            return _accountRepository;
        }
    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T07:56:30.250

依赖注入倾向于使用称为组合根的概念。这是您的应用程序中的一个地方，您的应用程序的对象图的组合发生在这里。

本质上，您不会在库中使用依赖注入容器。您的库可能包含可以注入的对象，但它往往是基于应用程序的工具，而不是基于库的工具。

这意味着如果您只创建一个库，则不会在其中使用依赖注入容器，也不会在其中配置容器。相反，您将创建您的库以使用来自您的应用程序的依赖注入。在您的情况下，您只需设计您的存储库、工作单元等，以通过构造函数注入接受其依赖项。然后，在使用库的应用程序中，您将使用 DI 容器（例如 Ninject）来配置对象的创建方式。

这做了很多事情。首先，它允许应用程序控制对象的创建方式。例如，如果您在 Web 应用程序中使用您的库，那么您可以将其配置为创建您的存储库的一个实例，该实例在一个请求的生命周期中存在。如果您的库这样做，那么您将无法在应用程序级别对此进行控制。

其次，如果您在库中使用 DI 容器，那么您的应用程序中也需要一个 DI 容器，因此您最终会得到两个 DI 容器，这可能会导致各种冲突。在大多数情况下，应用程序中应该只有一个 DI 容器。

最后，你犯了一个经典的新手错误。您将 DI 容器与 DI 本身的概念混淆了。DI 是您设计类的方式，特别是它们如何接受来自对象外部的依赖项。

DI Container 是用于实现 DI 的工具，而不是 DI 本身。

TL;博士

不要将库设计为拥有自己的 DI 容器。

# xslt - XSLT: y/n on new field if price difference > 1

> ID：15434744
> 
> 赞同：1
> 
> 时间：2013-03-15T14:19:34.577
> 
> 标签：xslt

我正在创建一个新的 productfeed 并且需要以下字段：`<diff>`.

如果 price 和 old_price 之间的差异大于 1：字段中的 y（来自 Yes）：`<diff>`

如果 price 和 old_price 之间的差异为 1 或小于 1：字段中的 n（来自 No）：`<diff>`

文件：Data.xml

```
<?xml version="1.0"?>
<products>
 <product id="0001">
  <price>120.00</price>
  <old_price>125.00</old_price>
 </product>
 <product id="0002">
  <price>5.00</price>
  <old_price>5.50</old_price>
 </product>  
</products> 
```

期望输出：

```
<?xml version="1.0"?>
<products>
 <product id="0001">
  <diff>y</diff>
 </product>
 <product id="0002">
  <diff>n</diff>
 </product>  
</products> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T14:32:21.273

试一试：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
  <xsl:output method="xml" indent="yes" omit-xml-declaration="yes"/>

  <xsl:template match="@* | node()">
    <xsl:copy>
      <xsl:apply-templates select="@* | node()"/>
    </xsl:copy>
  </xsl:template>

  <xsl:template match="price[translate(. - ../old_price, '-', '') > 1]">
    <diff>y</diff>
  </xsl:template>
  <xsl:template match="price">
    <diff>n</diff>
  </xsl:template>
  <xsl:template match="old_price" />
</xsl:stylesheet> 
```

在您的示例输入上运行时，这会产生：

```
<products>
  <product id="0001">
    <diff>y</diff>
  </product>
  <product id="0002">
    <diff>n</diff>
  </product>
</products> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T14:25:42.570

我还没有测试过，但它应该是这样的：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
<xsl:output method="xml" version="1.0" encoding="utf-8" indent="yes" />
    <xsl:template match="/">
       <products>
       <xsl:for-each select="//product">
           <diff>
           <xsl:choose>
             <xsl:when test="price - old_price &gt; 1">
              y
             </xsl:when>
             <xsl:otherwise>
              n
             </xsl:otherwise>
           </xsl:choose>
         </diff>
         <xsl:copy-of select="*" />
       </xsl:for-each>
       </products>
    </xsl:template>
</xsl:stylesheet> 
```

将测试并更新

# android - 从 Eclipse 克隆 github 项目

> ID：15434745
> 
> 赞同：0
> 
> 时间：2013-03-15T14:19:36.763
> 
> 标签：android, git, github, egit

这是我的情况。首先，几天前我开始在我的 Galaxy S2 中使用 AIDE 为 Android 开发。很好，创建了一个 GitHub 存储库，我在其中提交和推送我的所有文件。

现在，我已经下载了带有 EGit 插件的 Eclipse Android SDK Bundle。克隆我的 github 项目后，我无法从 Eclipse 编译/运行我的应用程序。

我有办法做到这一点吗？试图使用“使用向导项目 blalba”，但我不知道还能做什么，我做不到。

提前致谢。

# sql - 如何查找可用于 SQL Server 的 OLE 提供程序？

> ID：15434748
> 
> 赞同：8
> 
> 时间：2013-03-15T14:19:44.193
> 
> 标签：sql, sql-server-2008, tsql, oledb, linked-server

我尝试在 SSMS 中访问 Excel 文件。在互联网上搜索后，我无法让它工作。
这是我所做的：

我的环境：

```
Windows 7(64bit) SP 1, 
Microsoft SQL Server 2008 (SP3) - 10.0.5500.0 (X64)   
Office 2010 Pro Plus with Access installed(32 bit) 
```

1.  尝试更改 OLE 的配置，例如：

    ```
    exec sp_configure 'Advanced', 1
    RECONFIGURE

    exec sp_configure 'Ad Hoc Distributed Queries', 1
    RECONFIGURE

    EXEC master.dbo.sp_MSset_oledb_prop N'Microsoft.ACE.OLEDB.12.0', N'AllowInProcess', 1  
    EXEC master.dbo.sp_MSset_oledb_prop N'Microsoft.ACE.OLEDB.12.0', N'DynamicParameters', 1 
    ```

2.  运行查询：

    ```
    SELECT * FROM OPENROWSET('MICROSOFT.ACE.OLEDB.12.0','Text;Database=C:\Temp\;','SELECT * FROM [test.csv]') 
    ```

    或者

    ```
    SELECT * FROM OPENROWSET('MICROSOFT.JET.OLEDB.4.0','Text;Database=C:\Temp\;','SELECT * FROM [test.csv]') 
    ```

对于这两种情况，我都收到一条错误消息，例如：

```
Msg 7308, Level 16, State 1, Line 1
OLE DB provider 'MICROSOFT.JET.OLEDB.4.0' cannot be used for distributed queries because the provider is configured to run in single-threaded apartment mode. 
```

或者

```
Msg 7308, Level 16, State 1, Line 1
OLE DB provider 'MICROSOFT.ACE.OLEDB.12.0' cannot be used for distributed queries because the provider is configured to run in single-threaded apartment mode. 
```

然后我在SQL server上查看了链接服务器，运行system sp默认有10个provider：

```
EXEC master.dbo.sp_MSset_oledb_prop 

SQLOLEDB
MSOLAP
SQLNCLI11
ADsDSOObject
SQLNCLI
SQLNCLI10
Search.CollatorDSO
MSDASQL
MSDAOSP
MSIDXS 
```

如何解决这个问题？我如何知道SQL Server`MICROSOFT.ACE.OLEDB.12.0`是否`MICROSOFT.JET.OLEDB.4.0`可用？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-20T14:17:17.523

对于扩展名为 .xlsx 的文件类型，请使用“Excel 12.0”或“Excel 12.0 Xml”而不是 Excel 9.0

```
SELECT *
FROM OPENROWSET('Microsoft.ACE.OLEDB.12.0', 'Excel 12.0;Database=C:\Temp\Test.xlsx;', 'SELECT * FROM [Location1$]') 
```

如果要连接到 Microsoft Office Excel 数据，请根据 Excel 文件类型添加适当的 OLEDB 连接字符串的扩展属性：

```
File Type (extension)                               Extended Properties
---------------------------------------------------------------------------------
Excel 97-2003 Workbook (.xls)                       "Excel 8.0"
Excel 2007-2010 Workbook (.xlsx)                    "Excel 12.0 Xml"
Excel 2007-2010 Macro-enabled workbook (.xlsm)      "Excel 12.0 Macro"
Excel 2007-2010 Non-XML binary workbook (.xlsb)     "Excel 12.0" 
```

# image-processing - 如何随机直流？

> ID：15434752
> 
> 赞同：0
> 
> 时间：2013-03-15T14:19:56.027
> 
> 标签：image-processing, block, dct, ssim

我想在 matlab 中使用 DCT 进行图像加扰。我使用了灰度图像。我想用随机值随机直流。如何将每个块的DC系数设置为随机值`0-255`并保留所有其他值？这些是实验的步骤：将灰度图像分成`8x8`块；对每个块执行DCT；将每个块的DC系数设置为随机值`0-255`和保留所有其他；执行逆 DCT 并恢复图像；通过 SSIM 将恢复的图像与原始图像进行比较。谢谢你

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T16:48:16.607

问题是“如何将每个块的 DC 系数设置为（给定）值......”。所以你提到的程序（DCT，设置DC系数，然后iDCT）应该可以工作。您将使用 Matlab 的*dct2*和*idct2*函数。

但是，根据 DCT 定义，DC 系数是每个块中像素值的总和；将其设置为随机值并进行逆变换将产生一个与原始块仅相差一个常数的块。这并不奇怪，因为您只是在更改**DC 级别**。因此，您可以跳过 DCT/iDCT 并直接为每个块中的所有像素添加或减去一个随机值。

*但是*你可以看到，除了亮度不同之外，每个块看起来都像原来的块。此外，块之间的边界将非常明显，因此加扰方法可以很容易地反转。

# c++ - Boost asio - 到不同服务器的多个客户端连接

> ID：15434753
> 
> 赞同：7
> 
> 时间：2013-03-15T14:20:00.337
> 
> 标签：c++, boost-asio

我正在尝试对我的应用程序使用异步提升 udp/tcp 套接字操作与同步进行评估。我一直在尝试找到一个与我的设计相似的示例，但没有找到任何让我相信我可能正在尝试将异步操作融入我的设计的示例，即使它不是正确的路径。

我想连接到多个（阅读：1-10 之间）服务器并使用不同的协议与它们通信；我有 4-5 个线程正在生成需要与这些服务器连接中的任何一个进行通信的数据。

我当前的设计是同步的，`io_service`每个服务器连接线程使用一个对象，然后在生产线程和每个连接线程之间使用线程安全队列。

这种设计在吞吐量性能方面似乎不可扩展，这是我想最大化的。

是否有任何示例可以提供到不同服务器模式的多个连接？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-15T17:17:28.570

我已经编写了一个客户端来使用通过 ASIO 实现的 TCP/IP SSL/TLS 连接到 6 个不同的服务器。所有 6 个都使用相同的协议。所以，如果有帮助，这是我的代码：

**SSLSocket.H**

```
#pragma once

#include <cstdlib>
#include <iostream>
#include <queue>
#include <boost/bind.hpp>
#include <boost/asio.hpp>
#include <boost/asio/ssl.hpp>
#include <boost/thread.hpp>
#include <boost/thread/mutex.hpp>
#include <boost/shared_ptr.hpp>
using namespace std;
//
#include "BufferManagement.h"
#include "Logger.h"
#include "Common Classes\Locking.h"
#include "Message.h"

class SSLSocket;
class ConcurrentMsgQueue;

#define BOOST_ASIO_ENABLE_HANDLER_TRACKING

typedef void (__stdcall *Callback)(const SSLSocket* pSSLS, const int bytesInMsg, const void* pBuf);

// typedef std::vector<boost::asio::ssl::stream<boost::asio::ip::tcp::socket> SocketVectorType;

enum {MsgLenBytes = 4};

class SSLSocket
{
   // This class handles all communications between the client and the server
   // using TCP/IP SSL v1\.  The Boost ASIO (Asynchronous I/O) library is used to accomplish this.
   // Initally written by Bob Bryan on 1/21/2013.
   //
public:
   SSLSocket(const bool logToFile, const bool logToConsole, const bool displayInHex, const LogLevel levelOfLog, const string& logFileName, const int bufMangLen);
   ~SSLSocket();
   void Connect(SSLSocket* psSLS, const string& serverPath, string& port);
   void SendToServer(const int bytesInMsg, Byte* pBuf);
   void Stop();

   static void SetCallback(Callback callbackFunction)
   {
      // This method is required in order to be able to do a reverse pinvoke from C#.
      // This callback function pointer is what is used to communicate back to the C# code.
      CallbackFunction = callbackFunction;
   }

   static Byte* AllocateMem(int length)
   {
      // Allocate some memory.  This method winds up getting called when the C# client needs to allocate some memory for a message.
      Byte* pBuf = BufMang.GetPtr(length);
      return pBuf;
   }
   //
   static Logger Log; // Object used to log info to a file and/or to the console.
   static Callback CallbackFunction; // Callback function object used to communicate with the worker thread in C#.

private:
   void InitAsynchIO();
   void HandleConnect(const boost::system::error_code& error);
   void HandleHandshake(const boost::system::error_code& error);
   void HandleFirstWrite(const boost::system::error_code& error, size_t bytes_transferred);
   void HandleRead(const boost::system::error_code& error, size_t bytesTransferred);
   // void HandleRead(const boost::system::error_code& error, size_t bytes_transferred);
   void Terminate();
   void static RcvWorkerThread(SSLSocket* sSLS);
   void static SendWorkerThread(SSLSocket* psSLS);
   void ProcessSendRequests();
   void HandleWrite(const boost::system::error_code& error, size_t bytesTransferred);
   static void WorkerThread(boost::shared_ptr< boost::asio::io_service > io_service);
   //
   struct Bytes
   {
      // Used to convert 4 bytes to an int.
      unsigned char B1;
      unsigned char B2;
      unsigned char B3;
      unsigned char B4;
   };

   union Bytes4ToInt
   {
      // Converts 4 bytes to an int.
      int IntVal;
      Bytes B;
   };

   inline int BytesToInt(const Byte * pBuf)
   {
      // This method converts 4 bytes from an array of bytes to a 4-byte int.
      B2I.B.B1 = *pBuf++;
      B2I.B.B2 = *pBuf++;
      B2I.B.B3 = *pBuf++;
      B2I.B.B4 = *pBuf;
      int Value = B2I.IntVal;
      return Value;
   }
   //
   boost::thread_group WorkerThreads; // Used to handle creating threads.
   CRITICAL_SECTION SocketLock; // Used in conjuction with the Locking object to handle single threading the code.
   boost::asio::ssl::stream<boost::asio::ip::tcp::socket>* pSocket; // Pointer to the socket object.
   Bytes4ToInt B2I; // Used to translate 4 bytes in the buffer to an int representing the number of bytes in the msg.
   std::string sClientIp; // Client IP address.  Used for logging.
   unsigned short uiClientPort; // Port number.  Used for logging.
   // static MessageList* pRepMsgs; // Link list of the msgs to send to the server.
   Byte* pDataBuf; // Pointer to the data for the current message to be read.
   static boost::shared_ptr< boost::asio::io_service > IOService; // Object required for use by ASIO to perform certain functions.
   static bool RcvThreadCreated; // Set when the rcv thread is created so that it won't try to create it again.
   static int StaticInit; // Indicates whether or not the static members have been initialized or not.
   static bool DisplayInHex; // Specifies whether to display a buffer in hex or not.
   static BufferManagement BufMang; // Smart pointer to the buffer used to handle requests coming to and from the server for all sockets.
   volatile static bool ReqAlive; // Used to indicate whether the request thread should die or not.
   // static bool RepAlive; // Used to indicate whether the response thread should die or not.
   static ConcurrentMsgQueue SendMsgQ; // Holds the messages waiting to be sent to the server.
   static HANDLE hEvent; // Used for signalling between threads.
}; 
```

**SSLSocket.cpp**

```
#include "StdAfx.h"
#include "SSLSocket.h"

boost::shared_ptr< boost::asio::io_service > SSLSocket::IOService;
int SSLSocket::StaticInit = 0;
Callback SSLSocket::CallbackFunction;
BufferManagement SSLSocket::BufMang;
volatile bool SSLSocket::ReqAlive = true;
Logger SSLSocket::Log;
HANDLE SSLSocket::hEvent;
bool SSLSocket::DisplayInHex;
ConcurrentMsgQueue SSLSocket::SendMsgQ;
bool SSLSocket::RcvThreadCreated = 0;
BufferManagement* Message::pBufMang;

SSLSocket::SSLSocket(const bool logToFile, const bool logToConsole, const bool displayInHex,
   const LogLevel levelOfLog, const string& logFileName, const int bufMangLen) : pSocket(0)
{
   // SSLSocket Constructor.
   // If the static members have not been intialized yet, then initialize them.
   if (!StaticInit)
   {
      DisplayInHex = displayInHex;
      BufMang.Init(bufMangLen);
      Message::SetBufMang(&BufMang);
      // This constructor enables logging according to the vars passed in.
      Log.Init(logToFile, logToConsole, levelOfLog, logFileName);
      // Create the crit section object
      // Locking::InitLocking(ReadLock);
      // Locking::InitLocking(WriteLock);
      StaticInit++;
      hEvent = CreateEvent(NULL, false, false, NULL);
      // Define the ASIO IO service object.
      // IOService = new boost::shared_ptr<boost::asio::io_service>(new boost::asio::io_service);
      boost::shared_ptr<boost::asio::io_service> IOServ(new boost::asio::io_service);
      IOService = IOServ;
   }
}

SSLSocket::~SSLSocket(void)
{
   delete pSocket;
   if (--StaticInit == 0)
      CloseHandle(hEvent);
}

void SSLSocket::Connect(SSLSocket* psSLS, const string& serverPath, string& port)
{
   // Connects to the server.
   // serverPath - specifies the path to the server.  Can be either an ip address or url.
   // port - port server is listening on.
   //
   try
   {
      Locking CodeLock(SocketLock); // Single thread the code.
      // If the user has tried to connect before, then make sure everything is clean before trying to do so again.
      if (pSocket)
      {
         delete pSocket;
         pSocket = 0;
      }                                                                                                  
      // If serverPath is a URL, then resolve the address.
      // Note that this code expects the first server to always have a url.
      if ((serverPath[0] < '0') || (serverPath[0] > '9')) // Assumes that the first char of the server path is not a number when resolving to an ip addr.
      {
         // Create the resolver and query objects to resolve the host name in serverPath to an ip address.
         boost::asio::ip::tcp::resolver resolver(*IOService);
         boost::asio::ip::tcp::resolver::query query(serverPath, port);
         boost::asio::ip::tcp::resolver::iterator EndpointIterator = resolver.resolve(query);
         // Set up an SSL context.
         boost::asio::ssl::context ctx(*IOService, boost::asio::ssl::context::tlsv1_client);
         // Specify to not verify the server certificiate right now.
         ctx.set_verify_mode(boost::asio::ssl::context::verify_none);
         // Init the socket object used to initially communicate with the server.
         pSocket = new boost::asio::ssl::stream<boost::asio::ip::tcp::socket>(*IOService, ctx);
         //
         // The thread we are on now, is most likely the user interface thread.  Create a thread to handle all incoming socket work messages.
         if (!RcvThreadCreated)
         {
            WorkerThreads.create_thread(boost::bind(&SSLSocket::RcvWorkerThread, this));
            RcvThreadCreated = true;
            WorkerThreads.create_thread(boost::bind(&SSLSocket::SendWorkerThread, this));
         }
         // Try to connect to the server.  Note - add timeout logic at some point.
         boost::asio::async_connect(pSocket->lowest_layer(), EndpointIterator,
            boost::bind(&SSLSocket::HandleConnect, this, boost::asio::placeholders::error));
      }
      else
      {
         // serverPath is an ip address, so try to connect using that.
         //
         // Create an endpoint with the specified ip address.
         const boost::asio::ip::address IP(boost::asio::ip::address::from_string(serverPath));
         int iport = atoi(port.c_str());
         const boost::asio::ip::tcp::endpoint EP(IP, iport);
         // Set up an SSL context.
         boost::asio::ssl::context ctx(*IOService, boost::asio::ssl::context::tlsv1_client);
         // Specify to not verify the server certificiate right now.
         ctx.set_verify_mode(boost::asio::ssl::context::verify_none);
         // Init the socket object used to initially communicate with the server.
         pSocket = new boost::asio::ssl::stream<boost::asio::ip::tcp::socket>(*IOService, ctx);
         //
         // Try to connect to the server.  Note - add timeout logic at some point.
         //pSocket->core_.engine_.do_connect(void*, int);
         // pSocket->next_layer_.async_connect(EP, &SSLSocket::HandleConnect)
         // pSocket->next_layer().async_connect(EP, &SSLSocket::HandleConnect);
         boost::system::error_code EC;
         pSocket->next_layer().connect(EP, EC);
         if (EC)
         {
            // Log an error.  This worker thread should exit gracefully after this.
            stringstream ss;
            ss << "SSLSocket::Connect: connect failed to " << sClientIp << " : " << uiClientPort << ".  Error: " << EC.message() + ".\n";
            Log.LogString(ss.str(), LogError);
         }
         HandleConnect(EC);
         // boost::asio::async_connect(pSocket->lowest_layer(), EP,
         //   boost::bind(&SSLSocket::HandleConnect, this, boost::asio::placeholders::error));
      }
   }
   catch (std::exception& e)
   {
      stringstream ss;
      ss << "SSLSocket::Connect: threw an error - " << e.what() << ".\n";
      Log.LogString(ss.str(), LogError);
      Stop();
   }
}

void SSLSocket::SendToServer(const int bytesInMsg, Byte* pBuf)
{
   // This method creates a msg object and saves it in the SendMsgQ object.
   // sends the number of bytes specified by bytesInMsg in pBuf to the server.
   //
   Message* pMsg = Message::GetMsg(this, bytesInMsg, pBuf);
   SendMsgQ.Push(pMsg);
   // Signal the send worker thread to wake up and send the msg to the server.
   SetEvent(hEvent);
}

void SSLSocket::SendWorkerThread(SSLSocket* psSLS)
{
   // This thread method that gets called to process the messages to be sent to the server.
   //
   // Since this has to be a static method, call a method on the class to handle server requests.
   psSLS->ProcessSendRequests();
}

void SSLSocket::ProcessSendRequests()
{
   // This method handles sending msgs to the server.
   //
   std::stringstream ss;
   DWORD WaitResult;
   Log.LogString("SSLSocket::ProcessSendRequests: Worker thread " + Logger::NumberToString(boost::this_thread::get_id()) + " started.\n", LogInfo);
   // Loop until the user quits, or an error of some sort is thrown.
   try
   {
      do
      {
         // If there are one or more msgs that need to be sent to a server, then send them out.
         if (SendMsgQ.Count() > 0)
         {
            Message* pMsg = SendMsgQ.Front();
            SSLSocket* pSSL = pMsg->pSSL;
            SendMsgQ.Pop();
            const Byte* pBuf = pMsg->pBuf;
            const int BytesInMsg = pMsg->BytesInMsg;
            boost::system::error_code Error;
            {
               Locking CodeLock(SocketLock); // Single thread the code.
               boost::asio::async_write(*pSSL->pSocket, boost::asio::buffer(pBuf, BytesInMsg), boost::bind(&SSLSocket::HandleWrite, this,
                  boost::asio::placeholders::error, boost::asio::placeholders::bytes_transferred));
            }
            ss << "SSLSocket::ProcessSendRequests: # bytes sent = " << BytesInMsg << "\n";
            Log.LogString(ss.str(), LogDebug2);
            Log.LogBuf(pBuf, BytesInMsg, DisplayInHex, LogDebug3);
         }
         else
         {
            // Nothing to send, so go into a wait state.
            WaitResult = WaitForSingleObject(hEvent, INFINITE);
            if (WaitResult != 0L)
            {
               Log.LogString("SSLSocket::ProcessSendRequests: WaitForSingleObject event error.  Code = " + Logger::NumberToString(GetLastError()) + ". \n", LogError);
            }
         }
      } while (ReqAlive);
      Log.LogString("SSLSocket::ProcessSendRequests: Worker thread " + Logger::NumberToString(boost::this_thread::get_id()) + " done.\n", LogInfo);
   }
   catch (std::exception& e)
   {
      stringstream ss;
      ss << "SSLSocket::ProcessSendRequests: threw an error - " << e.what() << ".\n";
      Log.LogString(ss.str(), LogError);
      Stop();
   }
}

void SSLSocket::HandleWrite(const boost::system::error_code& error, size_t bytesTransferred)
{
   // This method is called after a msg has been written out to the socket.  Nothing to do really since reading is handled by the HandleRead method.

   std::stringstream ss;
   try
   {
      if (error)
      {
         ss << "SSLSocket::HandleWrite: failed - " << error.message() << ".\n";
         Log.LogString(ss.str(), LogError);
         Stop();
      }
   }
   catch (std::exception& e)
   {
      stringstream ss;
      ss << "SSLSocket::HandleHandshake: threw an error - " << e.what() << ".\n";
      Log.LogString(ss.str(), LogError);
      Stop();
   }
}

void SSLSocket::RcvWorkerThread(SSLSocket* psSLS)
{
   // This is the method that gets called when the receive thread is created by this class.
   // This thread method focuses on processing messages received from the server.
   //
   // Since this has to be a static method, call a method on the class to handle server requests.
   psSLS->InitAsynchIO();
}

void SSLSocket::InitAsynchIO()
{
   // This method is responsible for initiating asynch i/o.
   boost::system::error_code Err;
   string s;
   stringstream ss;
   //
   try
   {
      ss << "SSLSocket::InitAsynchIO: Worker thread - " << Logger::NumberToString(boost::this_thread::get_id()) << " started.\n";
      Log.LogString(ss.str(), LogInfo);
      // Enable the handlers for asynch i/o.  The thread will hang here until the stop method has been called or an error occurs.
      // Add a work object so the thread will be dedicated to handling asynch i/o.
      boost::asio::io_service::work work(*IOService);
      IOService->run();
      Log.LogString("SSLSocket::InitAsynchIO: receive worker thread done.\n", LogInfo);
   }
   catch (std::exception& e)
   {
      stringstream ss;
      ss << "SSLSocket::InitAsynchIO: threw an error - " << e.what() << ".\n";
      Log.LogString(ss.str(), LogError);
      Stop();
   }
}

void SSLSocket::HandleConnect(const boost::system::error_code& error)
{
   // This method is called asynchronously when the server has responded to the connect request.
   std::stringstream ss;
   try
   {
      if (!error)
      {
         pSocket->async_handshake(boost::asio::ssl::stream_base::client,
            boost::bind(&SSLSocket::HandleHandshake, this, boost::asio::placeholders::error));
         ss << "SSLSocket::HandleConnect: From worker thread " << Logger::NumberToString(boost::this_thread::get_id()) << ".\n";
         Log.LogString(ss.str(), LogInfo);
      }
      else
      {
         // Log an error.  This worker thread should exit gracefully after this.
         ss << "SSLSocket::HandleConnect: connect failed to " << sClientIp << " : " << uiClientPort << ".  Error: " << error.message() + ".\n";
         Log.LogString(ss.str(), LogError);
         Stop();
      }
   }
   catch (std::exception& e)
   {
      stringstream ss;
      ss << "SSLSocket::InitAsynchIO: threw an error - " << e.what() << ".\n";
      Log.LogString(ss.str(), LogError);
      Stop();
   }
}

void SSLSocket::HandleHandshake(const boost::system::error_code& error)
{
   // This method is called asynchronously when the server has responded to the handshake request.
   std::stringstream ss;
   try
   {
      if (!error)
      {
         // Try to send the first message that the server is expecting.  This msg tells the server we want to start communicating.
         // This is the only msg specified in the C++ code.  All other msg processing is done in the C# code.
         //
         unsigned char Msg[27] = {0x17, 0x00, 0x00, 0x00, 0x06, 0x00, 0x01, 0x00, 0x00, 0x00, 0x0b, 0x00, 0x41,
            0x74, 0x74, 0x61, 0x63, 0x6b, 0x50, 0x6f, 0x6b, 0x65, 0x72, 0x02, 0x00, 0x65, 0x6e};
         boost::system::error_code Err;

         sClientIp = pSocket->lowest_layer().remote_endpoint().address().to_string();
         uiClientPort = pSocket->lowest_layer().remote_endpoint().port();
         ReqAlive = true;
         // boost::asio::async_write(*pSocket, boost::asio::buffer(Msg), boost::bind(&SSLSocket::HandleFirstWrite, this,
         //   boost::asio::placeholders::error, boost::asio::placeholders::bytes_transferred));
         int Count = boost::asio::write(*pSocket, boost::asio::buffer(Msg), boost::asio::transfer_exactly(27), Err);
         if (Err)
         {
            ss << "SSLSocket::HandleHandshake: write failed - " << error.message() << ".\n";
            Log.LogString(ss.str(), LogInfo);
         }
         HandleFirstWrite(Err, Count);
         // boost::asio::async_write(pSocket, boost::asio::buffer(Msg, 27), boost::bind(&SSLSocket::HandleWrite, this,
         // boost::asio::placeholders::error, boost::asio::placeholders::bytes_transferred));
         ss.str("");
         ss << "SSLSocket::HandleHandshake: From worker thread " << boost::this_thread::get_id() << ".\n";
      }
      else
      {
         ss << "SSLSocket::HandleHandshake: failed - " << error.message() << ".\n";
         IOService->stop();
      }
      Log.LogString(ss.str(), LogInfo);
   }
   catch (std::exception& e)
   {
      stringstream ss;
      ss << "SSLSocket::HandleHandshake: threw an error - " << e.what() << ".\n";
      Log.LogString(ss.str(), LogError);
      Stop();
   }
}

void SSLSocket::HandleFirstWrite(const boost::system::error_code& error, size_t bytesTransferred)
{
   // This method is called after a msg has been written out to the socket.
   std::stringstream ss;
   try
   {
      if (!error)
      {
         // boost::asio::async_read(pSocket, boost::asio::buffer(reply_, bytesTransferred), boost::bind(&SSLSocket::handle_read,
         //   this, boost::asio::placeholders::error, boost::asio::placeholders::bytes_transferred));
         // boost::asio::async_read(pSocket, boost::asio::buffer(reply_, 84), boost::bind(&SSLSocket::handle_read,
         //   this, boost::asio::placeholders::error, boost::asio::placeholders::bytes_transferred));
         // Locking CodeLock(ReadLock); // Single thread the code.
         // Signal the other threads that msgs are now ready to be sent and received.
         // boost::asio::async_read(pSocket, boost::asio::buffer(pRepBuf), boost::asio::transfer_exactly(4), boost::bind(&SSLSocket::HandleRead,
         //  this, boost::asio::placeholders::error, boost::asio::placeholders::bytes_transferred));
         //
         // Notify the UI that we are now connected.  Create a 6 byte msg for this.
         pDataBuf = BufMang.GetPtr(6);
         BYTE* p = pDataBuf;
         // Create msg type 500
         *p = 244;
         *++p = 1;
         CallbackFunction(this, 2, (void*)pDataBuf);
         // Get the 1st 4 bytes of the next msg, which is always the length of the that msg.
         pDataBuf = BufMang.GetPtr(MsgLenBytes);

         // int i1=1,i2=2,i3=3,i4=4,i5=5,i6=6,i7=7,i8=8,i9=9;
         //   (boost::bind(&nine_arguments,_9,_2,_1,_6,_3,_8,_4,_5,_7))
         //     (i1,i2,i3,i4,i5,i6,i7,i8,i9);

         // boost::asio::read(*pSocket, boost::asio::buffer(pReqBuf, MsgLenBytes), boost::asio::transfer_exactly(MsgLenBytes), Err);
         // boost::asio::async_read(pSocket, boost::asio::buffer(pReqBuf, MsgLenBytes), boost::bind(&SSLSocket::HandleRead, _1,_2,_3))
         //   (this, pReqBuf, boost::asio::placeholders::error, boost::asio::placeholders::bytes_transferred);
         //   boost::asio::async_read(*pSocket, boost::asio::buffer(reply_), boost::asio::transfer_exactly(ByteCount), boost::bind(&Client::handle_read,
         //      this, boost::asio::placeholders::error, boost::asio::placeholders::bytes_transferred));
         // boost::asio::async_write(*pSocket, boost::asio::buffer(pDataBuf, MsgLenBytes), boost::bind(&SSLSocket::HandleWrite, this,
         //    boost::asio::placeholders::error, boost::asio::placeholders::bytes_transferred));

         Locking CodeLock(SocketLock); // Single thread the code.
         boost::asio::async_read(*pSocket, boost::asio::buffer(pDataBuf, MsgLenBytes), boost::bind(&SSLSocket::HandleRead, this,
            boost::asio::placeholders::error, boost::asio::placeholders::bytes_transferred));
      }
      else
      {
         ss << "SSLSocket::HandleFirstWrite: failed - " << error.message() << ".\n";
         Log.LogString(ss.str(), LogError);
         Stop();
      }
   }
   catch (std::exception& e)
   {
      stringstream ss;
      ss << "SSLSocket::HandleFirstWrite: threw an error - " << e.what() << ".\n";
      Log.LogString(ss.str(), LogError);
      Stop();
   }
}

void SSLSocket::HandleRead(const boost::system::error_code& error, size_t bytesTransferred)
{
   // This method is called to process an incomming message.
   //
   std::stringstream ss;
   int ByteCount;
   try
   {
       ss << "SSLSocket::HandleRead: From worker thread " << boost::this_thread::get_id() << ".\n";
      Log.LogString(ss.str(), LogInfo);
      // Set to exit this thread if the user is done.
      if (!ReqAlive)
      {
         // IOService->stop();
         return;
      }
      if (!error)
      {
         // Get the number of bytes in the message.
         if (bytesTransferred == 4)
         {
            ByteCount = BytesToInt(pDataBuf);
         }
         else
         {
            // Call the C# callback method that will handle the message.
            ss << "SSLSocket::HandleRead: From worker thread " << boost::this_thread::get_id() << "; # bytes transferred = " << bytesTransferred << ".\n";
            Log.LogString(ss.str(), LogDebug2);
            Log.LogBuf(pDataBuf, (int)bytesTransferred, true, LogDebug3);
            Log.LogString("SSLSocket::HandleRead: sending msg to the C# client.\n\n", LogDebug2);
            CallbackFunction(this, bytesTransferred, (void*)pDataBuf);
            // Prepare to read in the next message length.
            ByteCount = MsgLenBytes;
         }
         pDataBuf = BufMang.GetPtr(ByteCount);
         boost::system::error_code Err;
         // boost::asio::async_read(pSocket, boost::asio::buffer(pDataBuf, ByteCount), boost::bind(&SSLSocket::HandleRead,
           //  this, boost::asio::placeholders::error, boost::asio::placeholders::bytes_transferred));
         Locking CodeLock(SocketLock); // Single thread the code.
         boost::asio::async_read(*pSocket, boost::asio::buffer(pDataBuf, ByteCount), boost::bind(&SSLSocket::HandleRead,
            this, boost::asio::placeholders::error, boost::asio::placeholders::bytes_transferred));
         // boost::asio::read(pSocket, boost::asio::buffer(reply_), boost::asio::transfer_exactly(ByteCount), Err);
      }
      else
      {
         Log.LogString("SSLSocket::HandleRead failed: " + error.message() + "\n", LogError);
         Stop();
      }
   }
   catch (std::exception& e)
   {
      stringstream ss;
      ss << "SSLSocket::HandleRead: threw an error - " << e.what() << ".\n";
      Log.LogString(ss.str(), LogError);
      Stop();
   }
}

void SSLSocket::Stop()
{
   // This method calls the shutdown method on the socket in order to stop reads or writes that might be going on.  If this is not done, then an exception will be thrown
   // when it comes time to delete this object.
   ReqAlive = false;
   SetEvent(hEvent);
   IOService->stop();
} 
```

所以，这里有关键点：

1.  首次连接到服务器时，会创建 SSLSocket 类的新实例。io_service 对象是静态的并且只创建一次。SSLSocket 类的所有 6 个实例都使用它。

2.  有 2 个线程用于与所有 6 个服务器之间的套接字通信有关的所有事情。一个线程用于处理从服务器接收到的消息。另一个线程用于向服务器发送消息。

3.  此代码使用 SSL/TSL。如果您使用的是直接 TCP，那么您可以简单地删除 SSLSocket::Connect 方法中的 3 行以及 ssl #include 行。

4.  HandleRead 中使用的技术使用双重读取方法。第一次读取获取字节数（因为协议使用前 4 个字节作为消息长度），第二次读取获取该消息中的总字节数。这可能不是处理从套接字读取数据的最有效甚至最理想的方式。但是，它是最容易理解的。如果您的协议不同和/或消息大小要大得多，并且您有能力在收到整个消息之前开始处理消息，您可能会考虑使用不同的方法。

5.  此代码使用 Boost 1.52.0 和 Visual Studio 2008 for Windows。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-15T16:01:46.607

[Asio 示例](http://www.boost.org/doc/libs/release/doc/html/boost_asio/examples.html)中没有包含一对多客户端-服务器设计的直接示例。如果您的设计固定在最多 10 个连接，则为每个连接使用一个线程的同步通信应该没问题。但是，如果您打算将其扩展到更多，那么很明显会看到创建数百或数千个线程的收益递减。

也就是说，与and`async_connect`结合使用并不难理解或实现。[我已经使用同样的概念来管理世界上最快的超级计算机](https://stackoverflow.com/questions/768038/who-uses-boost-asio/14447434#14447434)上的数千个连接，只使用少数线程。如果您选择此路由，[异步 TCP 客户端示例](http://www.boost.org/doc/libs/release/doc/html/boost_asio/example/timeouts/async_tcp_client.cpp)可能是最好的学习示例。`async_read``async_write`

如果您寻找的不仅仅是示例，还有几个使用 Asio 的[开源项目](http://think-async.com/Asio/WhoIsUsingAsio)，您可能会发现它们很有用。

# jsp - 从动态jsp表中获取值

> ID：15434755
> 
> 赞同：2
> 
> 时间：2013-03-15T14:20:13.480
> 
> 标签：jsp, dynamic, html-table

我有一个从我的数据库动态生成值的表。**list**变量是某个 Object 的arrayList

```
 <table border="1">
                     <tr>
                        <th>Username</th>
                        <th>Full Name</th>
                        <th>Status</th>
                        <th>Action</th>
                     </tr>

                        <%for(int x = 0; x <list.size(); x++) {%>
                        <tr>
                        <td><% out.println(list.get(x).getUsername()); %></td>
                        <td><%out.println(list.get(x).getFirstname() + list.get(x).getMiddleinitial() + list.get(x).getLastname());%></td>
                         <td><% out.println(list.get(x).getStatus()); %></td>
                          <td> 
                              <form action="ViewManager" method="POST">
                                   <input id="button" type="submit" value="View" >
                              </form>
                              <form action="LockManager" method="POST">
                                   <input id="button" type="submit" value="Lock" >
                              </form>
                              <form action="DeleteManager" method="POST">
                                   <input id="button" type="submit" value="Delete" >
                              </form>

                          </td>
                        </tr>
                        <% }%>

                    </table> 
```

我想要的是在我按下按钮的地方捕获特定行的用户名并将其传递给 servlet。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T14:25:24.967

只需借助隐藏的输入元素将其作为附加请求参数传递即可。

例如

```
<form action="ViewManager" method="POST">
    <input type="hidden" name="username" value="<%= list.get(x).getUsername() %>" />
    <input id="button" type="submit" value="View" >
</form> 
```

它可以作为

```
String username = request.getParameter("username"); 
```

* * *

**与具体问题无关**，这是一种老式的 JSP 编写方式。上述方法对[XSS 攻击](http://en.wikipedia.org/wiki/Cross-site_scripting)也很敏感。Java/JSP *scriptlet*没有内置工具来防止这种情况。考虑使用[JSTL](https://stackoverflow.com/tags/jstl/info) `<c:forEach>`来遍历列表并`fn:escapeXml()`转义用户控制的数据以防止 XSS 攻击漏洞。

```
<c:forEach items="${users}" var="user">
    ...
    <input type="hidden" name="username" value="${fn:escapeXml(user.username)}" />
    ...
</c:forEach> 
```

### 也可以看看：

*   [如何避免 JSP 文件中的 Java 代码？](https://stackoverflow.com/questions/3177733/how-to-avoid-java-code-in-jsp-files/3180202#3180202)

# android - 在android中转换为json数组时android联系人中的问题

> ID：15434762
> 
> 赞同：1
> 
> 时间：2013-03-15T14:20:26.127
> 
> 标签：android, json, contacts

目前我正在使用 android 联系人，我想将其转换为 json 数组以将此联系人发布到网络服务器，我能够获取所有联系人，但问题是当我打印 json 数组时它只显示最后一个联系人。我认为对象值没有保留，我该如何解决这个问题？我只是在下面发布我的代码。

```
 JSONArray jsnConts=new JSONArray();
        JSONObject jsnMain= new JSONObject();
        ContentResolver cr =getContentResolver();
        Cursor cursor = cr.query(ContactsContract.Contacts.CONTENT_URI, null, null, null, null);
        lengthh=cursor.getCount();

        JSONObject a[]=new JSONObject[lengthh];
        ArrayList<String>cnt2=new ArrayList<String>();
        contactarray=new String[lengthh][avalues.length];

        System.out.println(cursor.getCount());

        JSONObject jsnName=new JSONObject ();
        int kk=0;
        while (cursor.moveToNext()) 
        {

        ArrayList<String>cnt1=new ArrayList<String>();
            displayName = cursor.getString(cursor.getColumnIndex(ContactsContract.CommonDataKinds.Phone.DISPLAY_NAME));       
            id = cursor.getString(cursor.getColumnIndex(ContactsContract.Contacts._ID));

            mail(id);
            Ph_num(id);

               for (int i=0; i<4; i++) 
            { 
                if(i==0)
                {
                    cnt1.add("Name ="+displayName);
                    jsnName.put("Name", displayName);
                }
                if(i==1)
                {
                    cnt1.add("id ="+id);
                    jsnName.put("id", id);
                }
                if(i==2)
                {
                    cnt1.add("email ="+email_data);
                    jsnName.put("email", EMAIL);
                    jsnName.put("email1", EMAIL1);
                    jsnName.put("email2", EMAIL2);
                }
                if(i==3)
                {
                    cnt1.add("PHONE_NUM_DATA ="+PHONE_NUM_DATA);
                    jsnName.put("ph1", PH_NUM);
                    jsnName.put("ph2", PH_NUM1);
                    jsnName.put("ph3", PH_NUM2);
                    jsnName.put("ph4", PH_NUM3);

                }
// jsnConts.put(jsnName);
//jsnConts.put(kk, jsnName);

            }
            cnt2.addAll(cnt1);

//   System.out.println("test"+jsnName);
            jsnConts.put(jsnName);
//   jsnConts.put(kk, jsnName);
            kk++;

        }
        System.out.println("test"+jsnName);
        System.out.println("testjsn"+jsnConts);
// System.out.println("------"+a); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T14:27:34.297

您不是在打印 JSONArray，而是在打印变量 jsnName，它是一个 JSONObject - 单个值。并且您每次都通过循环覆盖它。您需要每次循环创建一个新的 JSONObject，将每个完成的 JSONObject 添加到 JSONArray，然后打印出来。

# c# - Mono.Data.Sqlite.SqliteConnection.SetConfig 抛出一个库使用错误异常

> ID：15434777
> 
> 赞同：5
> 
> 时间：2013-03-15T14:20:55.523
> 
> 标签：c#, android, xamarin.android, xamarin

使用 Xamarin.Android，我尝试使用 Mono.Data.Sqlite 包（使用 Nexus 7）使用 sqlite 数据库。

一切都很好，直到我尝试使用多个线程，然后我得到一个损坏的数据库或锁定数据库的各种异常（这意味着我必须停止并重新启动应用程序才能再次访问数据库）。

按照[这里](https://stackoverflow.com/questions/9307797/database-disk-image-is-malformed-in-monotouch/9312257?noredirect=1#comment21831178_9312257)的建议，我尝试在我的应用程序中尽早执行以下代码：

```
Mono.Data.Sqlite.SqliteConnection.SetConfig (Mono.Data.Sqlite.SQLiteConfig.Serialized); 
```

但我在该行得到一个 Mono.Data.Sqlite.SqliteException 说明：

```
Library used incorrectly 
```

我已经尝试了 3 个可能的枚举值（单线程、序列化、多线程），结果相同。

这种方法是否有效？

* * *

编辑：我修复了我的源代码问题（那些讨厌的无限循环，我永远不会摆脱它......），所以不再需要为我玩线程配置了。

不过，我会将问题留给其他人，因为问题仍然存在，并且已由其他人进行了实验（[参见对此答案的评论](https://stackoverflow.com/a/9312257/7059)）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-31T05:24:06.183

对于它的价值，我发现当对数据库进行写入时尝试访问 SQLite 非常敏感。话虽这么说，我不太反对我的。但是我确实想提一下，您可能对可读访问和多线程感到幸运。如果您还没有这样做，我建议使用显式的写/读路径调用它。我在我的代码中使用它来简化，

```
 protected SQLiteConnection ReadableDB
         {
             get{return new SQLiteConnection(ReadableDatabase.Path);}
          }

         protected SQLiteConnection WriteableDB
         {
             get{return new SQLiteConnection(WritableDatabase.Path);
         } 
```

# jquery - 使用 jQuery 和 PhoneGap 的动态弹出窗口

> ID：15434778
> 
> 赞同：2
> 
> 时间：2013-03-15T14:20:55.683
> 
> 标签：jquery, cordova, dynamic, popup

我使用最新版本的 jQuery mobile 和 PhoneGap创建了一个简单的按钮和相应的弹出窗口，如[http://view.jquerymobile.com/1.3.0/docs/widgets/popup/上的示例所示。](http://view.jquerymobile.com/1.3.0/docs/widgets/popup/)到目前为止一切正常。

作为下一步，我喜欢动态创建按钮和相应的弹出窗口。在页面可见之前，我在以下代码块中这样做：

```
$(document).one("pagebeforechange", function () {
...
}) 
```

将按钮和弹出窗口添加到我的页面后，我只能以错误的格式查看它们并且没有用户交互。弹出窗口的内容也始终可见。我使用过（如在静态上下文中）：

```
("#element").html(
"<a id=\"popupButton\" href=\"#popupImage\" data-rel=\"popup\" data-role=\"button\" data-inline=\"true\" data-transition=\"pop\">" +
"    <img src=\"img.jpg\" />" +
"</a>" +
"<div data-role=\"popup\" id=\"popupImage\">" +
"    <img src=\"img.jpg\"/>" +
"</div>"); 
```

我注意到页面的某些元素没有生成，主要是页面中缺少以下标签：

```
<div id="popupImage-screen" class="ui-screen-hidden" ... > 
```

在静态环境中，按钮和弹出窗口都添加了许多属性。动态执行此操作，缺少属性。

创建弹出窗口后，我尝试调用“popup（）”函数并尝试了按钮的一些类似功能，但没有帮助：

```
$("#popupImage").popup(); 
```

有人知道这里有什么问题吗？

提前非常感谢！史蒂芬

# c# - 从 .NET 4.5 HttpClient 使用域凭据调用 REST 服务

> ID：15434779
> 
> 赞同：2
> 
> 时间：2013-03-15T14:20:56.223
> 
> 标签：c#, rest, active-directory, .net-4.5

我想从 .NET 4.5 调用需要域身份验证的 REST 服务。（*使用 Visual Studio 2012*）

搜索 Google 会导致很多人说 HttpClient 现在是执行此操作的方法。

但是据我所知，没有办法模拟或将凭据附加到 HttpClient。

此外，所有流行的 REST 库似乎都与 .NET 4.5 不兼容。

StackOverflow上的[帖子](https://stackoverflow.com/questions/12212116/how-to-get-httpclient-to-pass-credentials-along-with-the-request)建议 WebClient 作为解决此问题的一种方法，尽管这在 .NET 4.5 中似乎不再可用。

如果我想从 .NET 4.5 客户端调用具有域凭据的 REST 服务，最好的方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-17T08:01:02.493

.NET 4.5 中的 HttpClient 确实支持域身份验证。您需要插入一个 'UseDefaultCredentials' 设置为 true 的 HttpClientHandler：

```
 string searchResults = string.Empty;

        try
        {
            HttpClientHandler handler = new HttpClientHandler();
            handler.UseDefaultCredentials = true;
            HttpClient client = new HttpClient(handler);

            client.MaxResponseContentBufferSize = 100000;
            string responseString = await client.GetStringAsync(RestServiceUrl);

            searchResults = responseString;
        }
        catch (HttpRequestException e)
        {
            searchResults = e.Message;
        } 
```

另外值得注意的是，如果您正在构建 Windows 8 应用程序，那么您需要在 Package.appManifest 中启用“企业身份验证”：

![在此处输入图像描述](../Images/2bf6e71b43a9405d155dc48936b7f1fc.png)

# iphone - 等待多个异步网络调用，然后对其结果执行操作

> ID：15434784
> 
> 赞同：1
> 
> 时间：2013-03-15T14:21:11.217
> 
> 标签：iphone, ios, objective-c, asynchronous

处理多个异步 Web 调用的最佳实践是什么。

塞纳里奥：

我正在从一个 Web 服务的 JSON 提要中获取大量地址，同时查询 CLGeocoder 以从地址字符串中进行纬度/经度查找。然后，一旦我有了这两条信息，我就想执行一个动作。

在不将所有方法耦合到链接链中的情况下，最好的方法是什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-15T14:27:44.650

### 等待同步任务：

我建议创建一个新的`NSOperationQueue`，将其配置为具有所需数量的线程，然后在该线程上启动操作。要等待它们完成，只需调用`waitUntilAllOperationsAreFinished`方法。

例如：

```
NSOperationQueue* operationQueue = [[NSOperationQueue alloc] init];

// Add your tasks here

[operationQueue addOperationWithBlock:^{
    // Long running task
}];

[operationQueue waitUntilAllOperationsAreFinished]; 
```

注意不要阻塞主线程，否则您的应用程序在加载时将变得无响应。

如果您需要比这更复杂的东西，您可以使用较低级别的 API`dispatch_group_t`对线程进行分组并等待它们。查看[此响应](https://stackoverflow.com/a/10644282/469218)以获得更深入的解释。

### 等待已经异步的任务：

有时上述方法还不够，可能是因为您需要等待已经异步的任务（例如启用 GPS 或等待一些外部事件）。在这些情况下，您可以使用**信号量**。您必须非常小心错误处理和信号量，否则您可能会永远阻塞线程。

```
dispatch_semaphore_t sema = dispatch_semaphore_create(0);

[object performLongOperationAndDo:^{
    dispatch_semaphore_signal(sema);
}];

dispatch_semaphore_wait(sema, DISPATCH_TIME_FOREVER);
dispatch_release(sema); 
```

有关 Obj-C 信号量的更多[信息](http://developer.apple.com/library/ios/#documentation/General/Conceptual/ConcurrencyProgrammingGuide/OperationQueues/OperationQueues.html)。

除非必要，我会坚持`NSOperationQueue`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T15:06:58.687

也许你会发现这很有用：[Reactive Cocoa](https://github.com/blog/1107-reactivecocoa-for-a-better-world)

对于您的问题类型，它是一个非常优雅的解决方案。该框架的学习曲线非常陡峭，非常艰难。

# python - AttributeError：类型对象'datetime.date'没有属性'now'

> ID：15434793
> 
> 赞同：9
> 
> 时间：2013-03-15T14:21:42.680
> 
> 标签：python

使用这些代码行：

```
from datetime import date

date_start = date.now() 
```

我收到此错误：

```
AttributeError: type object 'datetime.date' has no attribute 'now' 
```

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2013-03-15T14:36:36.633

你需要使用

```
 import datetime

 now = datetime.datetime.now() 
```

或者，如果您使用 django 1.4+ 并启用了时区，您应该使用

```
 django.utils.timezone.now() 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2022-01-23T06:24:06.430

这有效：

```
import datetime

datetime.date.today() 
```

# visual-studio-2010 - 解决方案资源管理器在获取最新后不显示文件

> ID：15434795
> 
> 赞同：3
> 
> 时间：2013-03-15T14:21:45.240
> 
> 标签：visual-studio-2010, visual-studio, tfs

我正在与另一个开发人员合作，我们正在使用 TFS 进行源代码控制。当他签入文件或文件夹时，我可以使用源代码管理资源管理器查看它们。我可以做一个获取最新的，我可以看到文件或文件夹被下拉到我的本地文件系统。

但是，如果我翻到我的解决方案资源管理器，他的新文件或文件夹不会出现。我点击了刷新，我已经完成了从解决方案资源管理器获取最新，我已经完成了从解决方案资源管理器获取特定版本。

我应该做些什么让他们出现吗？每次他向源代码管理添加内容时，我是否需要添加现有项目？

谢谢，

克里斯

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-16T14:16:58.243

将文件添加到源代码管理与将文件添加到项目不同。

您还应该在源代码管理中看到这些文件。

为了能够在解决方案资源管理器中查看文件，您需要通过“添加现有项目”选项将文件添加到现有项目。

# java - 如何在 java 中使用 AES 加密设置 BlockSize 和 KeySize

> ID：15434802
> 
> 赞同：5
> 
> 时间：2013-03-15T14:22:07.010
> 
> 标签：java, aes, encryption

我正在尝试在 java 加密代码中设置 BlockSize 和 KeySize。
这是我的代码可以正常工作，但如何指定 aes.BlockSize=128 和 aes.KeySize=128？
我在 .NET 中参考了 Aes aes = AesManaged()，我们可以在其中设置以下参数，如下所示

```
aes.BlockSize = 128;
aes.KeySize = 128;
CipherMode.ECB;
aes.Padding = PaddingMode.None; 
```

在下面的代码中，我设置了以下三个参数：

```
aes.Key = key
aes.Mode = CipherMode.ECB
aes.Padding = PaddingMode.None 
```

但我无法设置

```
aes.BlockSize = 128
aes.KeySize = 128; 
```

* * *

```
public static void main(String args[]) {

            byte[] keyForEncription = new byte[16];
            byte[] keyForDecription = new byte[16];
            long FixedKey = 81985526925837671L;
            long VariableKey = 744818830;

            for (int i1 = 0; i1 < 8; i1++) {

                keyForEncription[i1] = (byte) (FixedKey >> (8 * i1));
                keyForEncription[i1 + 8] = (byte) (VariableKey >> (8 * i1));
            }

            short[] data = new short[96];

            data[0] = 2;
            data[1] = 0;
            data[2] = 0;
            data[3] = 0;
            data[4] = 0;
            data[5] = 6;
            data[6] = 6;
            data[7] = 81;
            data[8] = 124;
            data[9] = 23;
            data[10] = 3;

            SecretKeySpec skeySpec = new SecretKeySpec(keyForEncription, "AES");
            Cipher cipher = Cipher.getInstance("AES/ECB/NoPadding");
            cipher.init(Cipher.ENCRYPT_MODE, skeySpec);

            ByteArrayOutputStream bos = new ByteArrayOutputStream();
            CipherOutputStream cos = new CipherOutputStream(bos, cipher);
            DataOutputStream dos = new DataOutputStream(cos);

            byte[] byteArray_data = new byte[data.length];

            for (int i1 = 0; i1 < data.length; i1++)
                byteArray_data[i1] = (byte) data[i1];

                dos.write(byteArray_data, 0, 16);
            dos.close();

            byte[] ENCRYPTED_DATA = bos.toByteArray();

            for (int i1 = 0; i1 < 8; i1++) {

                keyForDecription[i1] = (byte) (FixedKey >> (8 * i1));
                keyForDecription[i1 + 8] = (byte) (VariableKey >> (8 * i1));
            }

            SecretKeySpec skeySpec_decryption = new SecretKeySpec(keyForDecription,
                    "AES");
            Cipher cipher1 = Cipher.getInstance("AES/ECB/NoPadding");
            cipher1.init(Cipher.DECRYPT_MODE, skeySpec_decryption);

                    ByteArrayInputStream bis = new ByteArrayInputStream(ENCRYPTED_DATA);
            CipherInputStream cis = new CipherInputStream(bis, cipher1);
            DataInputStream dis = new DataInputStream(cis);

            byte[] DECRYPTED_DATA = new byte[byteArray_data.length];
            dis.readFully(DECRYPTED_DATA, 4, 16);
            cis.close(); 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-15T15:30:25.733

由于您使用 16 字节（128 位）的密钥初始化密码，因此它隐含地将其用作密钥大小。

关于块大小，[JCA 规范](http://docs.oracle.com/javase/6/docs/technotes/guides/security/StandardNames.html#Cipher)说：

> AES 是一种 128 位分组密码，支持 128、192 和 256 位密钥。

因此块大小始终为 128 位。

# java - RabbitMQ“Hello World”示例给出“Connection Refused”

> ID：15434810
> 
> 赞同：20
> 
> 时间：2013-03-15T14:22:31.990
> 
> 标签：java, exception-handling, rabbitmq

我正在尝试从这里制作“hello world”应用程序：[RabbitMQ Hello World](http://www.rabbitmq.com/tutorials/tutorial-one-java.html)

这是我的生产者类的代码：

```
package com.mdnaRabbit.producer;

import com.rabbitmq.client.ConnectionFactory;
import com.rabbitmq.client.Connection;
import com.rabbitmq.client.Channel;

import java.io.IOException;

public class App {

    private final static String QUEUE_NAME = "hello";

    public static void main( String[] argv) throws IOException{
        ConnectionFactory factory = new ConnectionFactory();
        factory.setHost("localhost");
        Connection connection = factory.newConnection();
        Channel channel = connection.createChannel();

        channel.queueDeclare(QUEUE_NAME, false, false, false, null);
        String message = "Hello World!";
        channel.basicPublish("", QUEUE_NAME, null, message.getBytes());
        System.out.println(" [x] Sent" + "'");
        channel.close();
        connection.close();
    }
} 
```

这里是我在实现这个时得到的：

```
Exception in thread "main" java.net.ConnectException: Connection refused
at java.net.PlainSocketImpl.socketConnect(Native Method)
at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:339)
at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:200)
at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:182)
at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:391)
at java.net.Socket.connect(Socket.java:579)
at com.rabbitmq.client.ConnectionFactory.createFrameHandler(ConnectionFactory.java:445)
at com.rabbitmq.client.ConnectionFactory.newConnection(ConnectionFactory.java:504)
at com.rabbitmq.client.ConnectionFactory.newConnection(ConnectionFactory.java:533)
at com.mdnaRabbit.producer.App.main(App.java:16)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
at java.lang.reflect.Method.invoke(Method.java:601)
at com.intellij.rt.execution.application.AppMain.main(AppMain.java:120)

Process finished with exit code 1 
```

这是什么原因造成的？

我在这里找到了解决我的问题的方法[建立套接字连接时出错](https://stackoverflow.com/questions/8939074/error-in-making-a-socket-connection)

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-03-21T05:59:09.550

为了处理它，我安装了 RabbitMQ 服务器。如果未安装 rabbitmq-server，则会抛出此错误。[通过点击http://localhost:15672/](http://localhost:15672/)确保您已安装 RabbitMQ 服务器并且它已启动并运行

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-09-08T22:48:02.340

**我也收到了这个“拒绝连接”错误：**

```
Exception in thread "main" java.net.ConnectException: Connection refused
at java.net.PlainSocketImpl.socketConnect(Native Method)
at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:339)
at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:200)
at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:182)
at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:392)
at java.net.Socket.connect(Socket.java:579)
at com.rabbitmq.client.impl.FrameHandlerFactory.create(FrameHandlerFactory.java:32)
at com.rabbitmq.client.ConnectionFactory.newConnection(ConnectionFactory.java:588)
at com.rabbitmq.client.ConnectionFactory.newConnection(ConnectionFactory.java:612)
at ReceiveLogs.main(ReceiveLogs.java:14) 
```

我犯了一个错误，将 IP 地址从内部`/etc/rabbitmq/rabbitmq-env.conf`设置为错误的 IP 地址：

```
NODE_IP_ADDRESS=10.0.1.45 
```

我删除了这个配置参数，错误就消失了。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-10-25T15:04:16.747

我通过执行简单地解决了这个问题：

```
 sudo rabbitmq-server 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-02-01T21:49:17.423

启动 Rabbit MQ 服务器。启动此服务器的批处理文件存在于 rabbitmq_server-3.6.0\sbin>rabbitmq-server.bat start 下，然后它将起作用。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-03-03T19:05:26.253

就我而言，它在尝试启动服务器时给了我以下错误 `<Rabbit intall path>\rabbitmq_server-3.6.0\sbin>rabbitmq-server.bat start ERROR: epmd error for host Protocol: inet_tcp: register/listen error: econnrefused: nxdomain (non-existing domain)`

我所做的是在我的`host`文件中添加以下行： `127.0.0.1 localhost`

然后 rabbitmq-server 启动了。在此之后，我不再收到`connection refuse`错误消息。希望这可以帮助。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2020-11-18T17:13:26.943

**有时你只需要重新启动 Mac。**在这里尝试了所有其他解决方案以及来自不同问题的其他事情，尽管听起来很愚蠢，但重新启动最终让它恢复运行并能够访问 http://localhost:15672/

这是在我做了一个之后`brew upgrade`（这可能使我处于糟糕的状态）。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-07-20T15:03:05.220

您必须启动 Rabbit MQ 服务器

在 windows 文件名：RabbitMQ 服务 - 启动

您可以使用以下代码：

```
import java.io.IOException;
import java.util.ResourceBundle;
import java.util.concurrent.TimeoutException;
import com.rabbitmq.client.Channel;
import com.rabbitmq.client.Connection;
import com.rabbitmq.client.ConnectionFactory;

public class NewTaskController implements Runnable {
    private final String message;

     private static final String EXCHANGE_NAME = "test";

     private static final String ROUTING_KEY = "test";

     public NewTaskController(final String message) {
         this.message = message;
     }

     @Override
     public void run() {

        //getting data from application.properties
         //for the rabbit_mq configuration

         ResourceBundle mRB = ResourceBundle.getBundle("application");

         System.out.println("*****NewTaskController************"+mRB.getString("rabbitmq.port"));
        String rabbitmq_username = mRB.getString("rabbitmq.username");
        String rabbitmq_password = mRB.getString("rabbitmq.password");
                String rabbitmq_hostname = mRB.getString("rabbitmq.hostname");
                        int rabbitmq_port = Integer.parseInt(mRB.getString("rabbitmq.port"));
     ConnectionFactory factory = new ConnectionFactory();
     factory.setUsername(rabbitmq_username);
     factory.setPassword(rabbitmq_password);
     factory.setHost(rabbitmq_hostname);
     factory.setPort(rabbitmq_port);
     Connection conn;
     try {
     conn = factory.newConnection();
     Channel channel = conn.createChannel();

     channel.exchangeDeclare(EXCHANGE_NAME, "direct", true);
     String queueName = channel.queueDeclare().getQueue();
     System.out.println(queueName);
     channel.queueBind(queueName, EXCHANGE_NAME, ROUTING_KEY);
     System.out.println("Producing message: " + message + " in thread: " + Thread.currentThread().getName());
     channel.basicPublish(EXCHANGE_NAME, ROUTING_KEY, null, message.getBytes());

     try {
        channel.close();
    } catch (TimeoutException e) {
        e.printStackTrace();
    }
     conn.close();
     } catch (IOException | TimeoutException e) {
     e.printStackTrace();
     }
}
} 
```

application.properties 文件：

```
rabbitmq.username=guest
rabbitmq.password=guest
rabbitmq.hostname=localhost
rabbitmq.port=5672 
```

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2018-08-07T19:48:21.723

`rabbitmq-server`如果您已经在本地安装了 RabbitMQ，那么简单的解决方法确实是。

从 Mac OS X Sierra 迁移到 High Sierra 后，我遇到了这个问题作为防火墙问题。我已经安装了 RabbitMQ。但是，我一直收到此`Connection Refused`错误。我必须执行以下操作：

1.  `brew uninstall rabbitmq`
2.  `brew install rabbitmq`
3.  `rabbitmq-server` （并允许防火墙权限）
4.  在本地运行应用程序。

# java - 如何在 Eclipse 调试器中读取字节数组？

> ID：15434814
> 
> 赞同：0
> 
> 时间：2013-03-15T14:22:54.030
> 
> 标签：java, android, eclipse, debugging

你能告诉我如何在eclipse调试视图的“变量”菜单下显示字节数组（二进制或十六进制）吗？例如：

> 字节[] 字节数组 = {0x12};

非常感谢您的帮助！

克里斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T02:17:16.217

打开右上角的调试透视图。

插入一些断点。

当您在调试模式下运行代码时，程序会在第一点停止。

然后你可以在你的内存中找到变量（初始化）。

# java - 找不到“http://java.sun.com/jsp/jstl/core”的标签库描述符

> ID：15434817
> 
> 赞同：31
> 
> 时间：2013-03-15T14:23:05.987
> 
> 标签：java, jsp, jstl

我正在尝试使用 JSTL，但出现以下错误：

```
Can not find the tag library descriptor for "http://java.sun.com/jsp/jstl/core" 
```

这是如何引起的，我该如何解决？

* * *

## 回答 #1

> 赞同：49
> 
> 时间：2013-03-15T14:36:57.443

在您的 JSP 中使用 taglib 定义，或者最好将其包含在每个页面的第一行。

```
<%@ taglib prefix="c" uri="http://java.sun.com/jsp/jstl/core" %> 
```

您的项目中还有修复`jstl-1.2`依赖项。还要在您的`web.xml`.

maven依赖是（maven是一个开源开发工具）

```
<dependency>
  <groupId>jstl</groupId>
  <artifactId>jstl</artifactId>
  <version>1.2</version>
  <scope>compile</scope>
</dependency>
<dependency>
  <groupId>taglibs</groupId>
  <artifactId>standard</artifactId>
  <version>1.1.2</version>
  <scope>compile</scope>
</dependency> 
```

在`web.xml`开始写作

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app version="2.5" 
    xmlns="http://java.sun.com/xml/ns/javaee" 
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
    xsi:schemaLocation="http://java.sun.com/xml/ns/javaee 
    http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd"> 
```

**编辑：**

我想添加一条注释，@informatik01 在评论中提到了有关可从 Maven 存储库获得的 JSTL 库的较新版本： [JSTL 版本 1.2.1 API](http://search.maven.org/#artifactdetails%7Cjavax.servlet.jsp.jstl%7Cjavax.servlet.jsp.jstl-api%7C1.2.1%7Cjar)和[JSTL 1.2.1](http://search.maven.org/#artifactdetails|org.glassfish.web|javax.servlet.jsp.jstl|1.2.1|jar)。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2013-09-18T05:48:12.963

即使在为 jstl 和标准添加 jar 文件后，我也遇到了同样的问题。对我来说，在我为我的项目添加了目标运行时后它就解决了。

转到 Project Properties > Targeted Runtimes 并选择您正在使用的服务器（对我来说是 Tomcat 7.0）。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2015-06-09T11:14:00.530

在 WEB-INF 目录里面创建一个 libs 文件夹并添加 jstl，标准 jars 如下。![在此处输入图像描述](../Images/7e266f8eeb72af7be0966af90b29a6ac.png)

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-05-27T06:56:38.803

您可以尝试将包含 jsp-s 的文件夹设置为 eclipse 的源文件夹，这解决了我的相同问题。如下：

> 1.  打开项目的属性。（右键单击项目，然后选择属性）
> 2.  选择 Java Build Path，选择 Source 选项卡，单击 Add Folder 并选择包含您的 jsp-s 的文件夹，OK

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-06-30T09:27:18.553

您只需要将`standard.jar`文件包含在您的项目构建路径中。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-11-04T15:43:07.870

在你的 pom.xml 中添加

```
 <!-- jstl -->
    <dependency>
        <groupId>javax.servlet</groupId>
        <artifactId>jstl</artifactId>
        <version>1.2</version>
    </dependency> 
```

并尝试运行

```
mvn eclipse:eclipse -Dwtpversion=2.0 
```

会解决问题

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-03-11T10:58:26.297

我有类似的问题，为什么我们在使用maven时要添加外部jar文件？

我已经包含了 jstl maven 依赖项，然后我也遇到错误“找不到“ [http://java.sun.com/jsp/jstl/core](http://java.sun.com/jsp/jstl/core) ”的标记库描述符。然后我包括以下依赖项然后错误得到解决，不包括任何单个外部 jar 文件。

```
<dependency>
    <groupId>javax.servlet</groupId>
    <artifactId>servlet-api</artifactId>
    <version>2.5</version>
</dependency> 
```

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2016-06-05T15:08:17.550

[![添加这 3 个文件以获得运行时支持](../Images/ddc23e097ff3e79d555f917b95b8da9d.png)](https://i.stack.imgur.com/PTg2W.png)

根据快照，错误的主要原因是您没有**在 lib 文件夹中定义 c.tld**导致此类错误。

这个lib内容关于taglib的信息

# c# - 属性描述符如何获取两个不同绑定字段的属性？

> ID：15434820
> 
> 赞同：2
> 
> 时间：2013-03-15T14:23:17.547
> 
> 标签：c#, gridview, webforms

**我无法理解属性描述符如何**通过说获得两个不同绑定字段的属性`.Find("boundField", true)`

这是一个例子

```
PropertyDescriptor propertyA = TypeDescriptor.GetProperties(DataBinder.GetDataItem(control.NamingContainer)).Find("boundField", true);
PropertyDescriptor propertyB = TypeDescriptor.GetProperties(DataBinder.GetDataItem(control.NamingContainer)).Find("boundField", true); 
```

两行代码都是相同的，当我调试它们时它们会返回`null`，但是当我尝试像这样从中获取值时，它们会给出不同的值（这是正确的），这怎么可能？

```
PropertyAFieldValue = this.GetValue(control.NamingContainer, this._PropertyAField, ref propertyA).ToString();
PropertyBFieldValue = this.GetValue(control.NamingContainer, this._PropertyBField, ref propertyB).ToString(); 
```

对于其余代码，请查看此[属性描述符如何使用相同的代码行获取两个控件的值？](https://stackoverflow.com/questions/15429933/what-is-this-code-for)

# php - 将值从 HTML 表单发送到 PHP

> ID：15434831
> 
> 赞同：1
> 
> 时间：2013-03-15T14:23:48.653
> 
> 标签：php, html, forms, xhtml

如何将 PHP 链接到 HTML 表单？我了解如何执行 PHP 以及如何执行 HTML，但是如何将 php 链接到 html 或者是自动的，

HTML 表单是如何知道 PHP 的？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-15T14:25:47.477

在您的表单中，将 action 属性设置为 php 脚本的路径，例如：

```
<form action="/path/to/php/script.php" method="post">
...
</form> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-15T14:39:45.740

您在制作表单时选择的方法是 PHP 将如何收集传入的值。

像这样：

```
<form action="handler.php" method="post">
<!-- OR -->
<form action="handler.php" method="get"> 
```

`action`告诉表单值将被发送到哪里，并告诉`method`表单中项目的值将如何传递回服务器。该`post`方法将返回值，以便它们可以由`$_POST`数组检索（两者都`post`可以`get`由`$_REQUEST`数组检索）。例如：

```
<input type="text" name="myInput"> 
```

将回发到服务器并可以通过以下方式检索

```
$var = $_POST['myInput']; 
```

最好测试一下是否真的有输入，下面可以使用

```
if(isset($_POST['myInput'])) { /*do something if set*/}
else{ /*do something if not set*/} 
```

如果表单是由该`get`方法提交的，则表单的值会在 URL 中传回，如下所示：

```
http://www.domain.tld/handler.php?myInput=someValue 
```

然后使用`$_GET`数组检索该值：

```
$var = $_GET['myInput']; 
```

再一次，您应该测试它是否存在。

有关好的示例和解释，请阅读 PHP 书籍或搜索 PHP 和 HTML 表单。这是非常基础的 PHP。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-15T14:26:59.890

您在表单中设置 action="" 以指向您的 PHP 脚本。当用户单击表单中的提交按钮时，将调用 PHP 脚本并将表单数据交给 PHP 脚本。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-15T14:34:40.000

在 php 文件中试试这个

```
<form action="" method="post">
 <input type="text" value="html form data" name="name" />
 <input type="submit" name="submit" />
</form>

<?php

 if(isset($_POST['submit']))
  echo 'I am php. I know this value is from html - '. $_POST['name'];

?> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-15T14:31:55.727

如果您正在谈论使用 php 值重新填充表单：在输入字段中，只需添加请求变量。

```
<input type="text" name="input1" value="<?=$_REQUEST['var_name']?>" /> 
```

如果您正在谈论向 php 发送日期，只需使用表单操作指向一个文件。

```
<form action="file.php" method="post">

</form> 
```

然后处理该 php 文件中的所有数据。

# java - Java，模拟浏览器

> ID：15434833
> 
> 赞同：1
> 
> 时间：2013-03-15T14:23:49.677
> 
> 标签：java, html, httpurlconnection

我正在编写一个小型 java 程序/api 以编程方式登录/（使用登录凭据做一个 hthp 帖子）到这个[http://web2sms.ke.airtel.com](http://web2sms.ke.airtel.com)

对于我要发布的内容，我需要参数（登录表单的键和值）。当我通过浏览器呈现表单时，键/名称每次都在更改，但是当我通过下面的 java 代码获取页面时，键总是联系 f_1.number，因此这意味着我认为服务器在区分页面是否是是否从浏览器中获取。如何模拟浏览器并让浏览器呈现图形？

```
import java.io.BufferedReader;
import java.io.DataOutputStream;
import java.io.InputStreamReader;
import java.net.HttpURLConnection;
import java.net.URL;
import java.net.URLConnection;
import java.net.URLEncoder;
import java.util.HashMap;
import java.util.Iterator;
import java.util.Map;
import java.util.Set;

/**
 *
 * @author Dell
 */
public class AirtelWeb2Sms {

    String link = "http://web2sms.ke.airtel.com";
    /**
     * @param args the command line arguments
     */
    private boolean on = false;

    public static void main(String[] args) {
        new AirtelWeb2Sms();
    }

    public AirtelWeb2Sms() {
        login();
    }

  private void login(){
      Map <String, String> parameters = new HashMap();
      try{
           URL url = new URL(link);
           URLConnection yc = url.openConnection();
        BufferedReader in = new BufferedReader(
                                new InputStreamReader(
                                yc.getInputStream()));
            String inputLine;

            while ((inputLine = in.readLine()) != null)
            {
                if(inputLine.contains("<div id=\"loginform\">"))
                {
                    on=true; 
                }

                if(on && (inputLine.contains("input")||inputLine.contains("select"))&& inputLine.contains("name")&& inputLine.contains("value")){
                 //   System.out.println(inputLine);
                  String[] tokens = inputLine.split("\" ");
                    String key="", value="";
                    for(String str: tokens){
                        if(str.contains("name=")){
                            key=str.substring(str.indexOf("\"")+1);
                         }
                        if(str.startsWith("value")){
                            value=str.substring(str.indexOf("\"")+1);
                         }
                        if(key.contains(".number")){
                            value="+25473DummyNumber";
                        }
                        if(key.contains(".passwd")){
                            value="dymmerPassword";
                        }
                        if(key.contains(".language")){
                            value="en";
                        }
                     }
                    parameters.put(key, value=value.replace("&quot;", "\""));
                    System.out.println(key+":"+value);
                }
                if(inputLine.contains("<input type=\"submit\""))
                {
                    on=false; 
                }
            }
            doSubmit(link+"index.hei", parameters);
           }
            catch(Exception ex){
               System.out.println(ex.getLocalizedMessage());
            }
  } 
  public void doSubmit(String url, Map<String, String> data) throws Exception 
  { 
      URL siteUrl = new URL(url); 
      HttpURLConnection conn = (HttpURLConnection) siteUrl.openConnection(); 
            conn.setRequestMethod("POST"); conn.setDoOutput(true); 
      conn.setDoInput(true); DataOutputStream out = new DataOutputStream(conn.getOutputStream()); 
      Set keys = data.keySet(); 
      Iterator keyIter = keys.iterator(); String content = "";
      for(int i=0; keyIter.hasNext(); i++) {
          Object key = keyIter.next(); 
          if(i!=0) { 
              content += "&"; 
          } 
          content += key + "=" +data.get(key);
      } 
      System.out.println(content); 
      out.writeBytes(content); 
      out.flush(); 
      out.close(); 
      BufferedReader in = new BufferedReader(new InputStreamReader(conn.getInputStream())); 
      String line = ""; 
      while((line=in.readLine())!=null) {
          System.out.println(line); } in.close(); 
  }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T14:31:36.710

尝试将[“User-Agent”](http://en.wikipedia.org/wiki/User_agent) HTTP 标头设置为真实浏览器会发送的某个值。[您可以通过访问http://whatsmyuseragent.com/](http://whatsmyuseragent.com/)检查浏览器的用户代理字符串是什么。

# java - GXT-3 问题为我的图表加载数据

> ID：15434836
> 
> 赞同：0
> 
> 时间：2013-03-15T14:23:59.500
> 
> 标签：java, gwt, proxy, gxt

我的问题很烦人。我的服务器端正在生成 12 个随机数（这里是两倍）。

我的客户端收到了正确的数据，但我的图表中没有显示任何内容。这适用于商店中的硬编码数据，但不适用于 REST 调用。

我的服务器和我的客户端之间的传输是：

```
[{"key":"key0","value":0.47222548599297787},{"key":"key1","value":0.6009173797369691},{"key":"key2","value":0.13880104282435624},{"key":"key3","value":0.01804674319345545},{"key":"key4","value":0.5547733564202956},{"key":"key5","value":0.8229999661308851},{"key":"key6","value":0.8959346004391032},{"key":"key7","value":0.6848052288628435},{"key":"key8","value":0.10222856671111813},{"key":"key9","value":0.6931371931409103},{"key":"key10","value":0.2994297934549003},{"key":"key11","value":0.47566752196381334}] 
```

这里我的简单类用于我的测试。我是 GXT 3 的新手

```
public void onModuleLoad() {

    final ListStore<JSOModel> store;
    final ContentPanel panel  = new FramedPanel();
    RequestBuilder builder = new RequestBuilder(RequestBuilder.GET, "/ws/DocumentService/v1/test");
    builder.setHeader("Accept", "application/json");

    HttpProxy proxy = new HttpProxy(builder);

    final Loader<ListLoadConfig, ListLoadResult<JSOModel>> loader = new ListLoader<ListLoadConfig, ListLoadResult<JSOModel>>(proxy, new DataReader<ListLoadResult<JSOModel>, String>() {
        @Override
        public ListLoadResult<JSOModel> read(Object loadConfig, String data) {
            List<JSOModel> jsoModels = new ArrayList<JSOModel>();
            JsArray<JSOModel> jsoModelJsArray = JSOModel.arrayFromJson(data);
            if(jsoModelJsArray != null) {
                for(int i = 0; i < jsoModelJsArray.length(); i++) {
                    jsoModels.add(jsoModelJsArray.get(i));
                }
            }

            return new ListLoadResultBean<JSOModel>(jsoModels);
        }
    });

    store = new ListStore<JSOModel>(new ModelKeyProvider<JSOModel>() {
        @Override
        public String getKey(JSOModel item) {
            return item.get("key");
        }
    });

    loader.addLoadHandler(new LoadResultListStoreBinding<ListLoadConfig, JSOModel, ListLoadResult<JSOModel>>(store) {
        @Override
        public void onLoad(LoadEvent<ListLoadConfig, ListLoadResult<JSOModel>> event) {
            ListLoadResult<JSOModel> loaded = event.getLoadResult();
            if(loaded.getData() == null) {
                store.replaceAll(new ArrayList<JSOModel>());
            } else {
                store.replaceAll(loaded.getData());
            }
        }
    });

    Chart<JSOModel> chart = new Chart<JSOModel>();
    chart.setStore(store);
    chart.setShadowChart(true);

    NumericAxis<JSOModel> axis = new NumericAxis<JSOModel>();
    axis.setPosition(Chart.Position.LEFT);
    axis.addField(new ValueProvider<JSOModel, Number>() {
        @Override
        public Number getValue(JSOModel JSOModel) {
            return JSOModel.getNumber("value");
        }

        @Override
        public void setValue(JSOModel JSOModel, Number number) {

        }

        @Override
        public String getPath() {
            return "key";
        }
    });
    axis.setTitleConfig(new TextSprite("Number of hits"));
    axis.setWidth(50);
    axis.setMinimum(0);
    axis.setMaximum(100);
    chart.addAxis(axis);

    PathSprite odd = new PathSprite();
    odd.setOpacity(1);
    odd.setFill(new Color("#dff"));
    odd.setStroke(new Color("#aaa"));
    odd.setStrokeWidth(0.5);
    axis.setGridOddConfig(odd);

    CategoryAxis<JSOModel, String> horizontalAxis = new CategoryAxis<JSOModel, String>();
    horizontalAxis.setPosition(Chart.Position.BOTTOM);
    horizontalAxis.setField(new ValueProvider<JSOModel, String>() {
        @Override
        public String getValue(JSOModel JSOModel) {
            return  JSOModel.get("key");
        }

        @Override
        public void setValue(JSOModel JSOModel, String s) {

        }

        @Override
        public String getPath() {
            return "key";
        }
    });
    horizontalAxis.setTitleConfig(new TextSprite("month of year"));
    chart.addAxis(horizontalAxis);

    LineSeries<JSOModel> column = new LineSeries<JSOModel>();
    column.setYAxisPosition(Chart.Position.LEFT);
    column.setStroke(new RGB(148,174,10));
    column.setHighlighting(true);
    chart.addSeries(column);

    axis.addField(column.getYField());
    chart.addSeries(column);

    chart.setHeight(100);
    chart.setWidth(100);

    Button b = new Button("ha");
    b.addClickHandler(new ClickHandler() {
        @Override
        public void onClick(ClickEvent clickEvent) {
            loader.load();
        }
    });

    RootPanel.get().add(b);

    panel.setCollapsible(true);
    panel.setHeadingText("Column Chart");
    panel.setPixelSize(620, 500);
    panel.setBodyBorder(true);

    VerticalLayoutContainer layout = new VerticalLayoutContainer();
    panel.add(layout);

    chart.setLayoutData(new VerticalLayoutContainer.VerticalLayoutData(1,1));
    layout.add(chart);

    chart.setBackground(new Color("#dff"));
    RootPanel.get().add(panel); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T14:48:40.323

有两种方法可以将图表连接到存储中。一种是简单地指定图表正在使用商店 via `setStore`，就像您所做的那样：

```
 chart.setStore(store); 
```

当您这样做时，您还必须通知图表何时必须重绘所有内容 - 您必须调用：

```
 chart.redrawChart(); 
```

此调用必须在加载完成后不久进行 - 考虑在 onLoad 结束时进行。

为什么需要这个？在某些情况下，开发人员希望对商店进行多次更改，一次更改一次，如果图表在每次更改后自动更新，则会对数据模型产生许多缓慢的更改，最终可能看起来很奇怪。在这种情况下，您只能`redrawChart()`在所有更改完成后调用。

但是还有另一种选择 -`setStore`您可以调用，而不是调用`bindStore`，并要求图表在图表发生任何更改时自动更新：

```
 chart.bindStore(store); 
```

在您的情况下，这可能是正确的答案。

# c++ - 如何更改子窗口在父窗口内的位置并显示工具栏？

> ID：15434838
> 
> 赞同：1
> 
> 时间：2013-03-15T14:24:05.220
> 
> 标签：c++, winapi, window, toolbar

我有以下代码将窗口处理程序从 OpenCV 窗口传递给 win32 处理程序，因此我可以将从相机抓取的图像显示到屏幕上，并且图像将显示为我的主 API 的子窗口。但问题是当我想在我的程序中添加一个工具栏时，图像窗口处理程序出现在工具栏的顶部。我该如何解决这个问题？

```
//create a window and set the handler from openCV to win32 
cv::namedWindow("test",cv::WINDOW_AUTOSIZE);                        
hWnd2 = (HWND) cvGetWindowHandle("test"); 
hParent = ::GetParent(hWnd2);       
::SetParent(hWnd2, hWnd);                       
::ShowWindow(hParent, SW_HIDE); 
_liveCapturing=true;
lastPicNr = 0;  
SetWindowTextW(hStatus, L"Live Capturing ... ");
if(FullScreen()){
    ::ShowWindow(hWnd, SW_MAXIMIZE);
} 
```

工具栏代码：

```
HWND CreateToolbar(HWND hwnd){
    HWND hTbar = CreateWindowEx(0, TOOLBARCLASSNAME, NULL, WS_CHILD | WS_VISIBLE | CCS_TOP  , 0, 0, 0, 0, hwnd, (HMENU)12, GetModuleHandle(NULL), NULL);
    SendMessage(hTbar, TB_BUTTONSTRUCTSIZE, (WPARAM)sizeof(TBBUTTON), 0);

    TBBUTTON tbb[3];
    TBADDBITMAP tbab;

    tbab.hInst = HINST_COMMCTRL;
    tbab.nID = IDB_STD_SMALL_COLOR; 
    SendMessage(hTbar, TB_ADDBITMAP, 0, (LPARAM)&tbab);
    return hTbar;
} 
```

![与工具栏重叠的窗口的屏幕截图](../Images/f91ebab5db4f7f685f27d3ec2541888a.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-03-04T22:48:50.137

可能您很久以前就找到了解决方案，但我想发布我的答案以防其他用户需要它。

您可以简单地将具有相同代码的 OpenCV 窗口添加到窗口中的子窗口（您预先设置它的位置）。例如，您可以将其添加到静态文本窗口（标签）...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T16:08:50.790

如果要移动 OpenCV 窗口，请[`SetWindowPos()`](http://msdn.microsoft.com/en-gb/library/windows/desktop/ms633545%28v=vs.85%29.aspx)使用所需坐标调用。

```
SetWindowPos(hWnd2, 0, 0, 30, 0, 0, SWP_NOSIZE | SWP_NOZORDER); 
```

# php - 如何从表单名称字段中获取重音值？

> ID：15434840
> 
> 赞同：0
> 
> 时间：2013-03-15T14:24:07.250
> 
> 标签：php, html, forms, utf-8

这是一个带有字段的表单

```
<label for="sec1-prenom">Prénom<span class="requis">*</span></label>
<input type="text" name="sec1-prénom" class="required"/> 
```

这是获取值的循环

```
foreach($_POST as $name => $value) {
$myval .= $name .' : '.$value ."\r\n"; } 
```

当我循环获取值时，“名称”字段是：prÀ¢nom（垃圾）

我需要做什么才能获得正确的 utf8 值？

* * *

请注意，正如 DAVE 所说，我的 for 值与 name 值不匹配。问题，为什么它应该。事实上，我只是在寻找一种正确的方法来获取标签的值，就像在测试中用重音和空格写的一样。我怎么能用 $_POST... 我想我不能！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T14:36:21.443

我发现：[$_POST 在 utf-8 字符上为空](https://stackoverflow.com/questions/5784207/post-empty-on-utf-8-characters)

简而言之，该值已经编码（垃圾），所以我必须对其进行解码：utf8_decode()

# java - 应用程序的数据库列中未设置默认值

> ID：15434845
> 
> 赞同：0
> 
> 时间：2013-03-15T14:24:25.430
> 
> 标签：java, database, oracle, jdbc, websphere

我有一个在 websphere 中运行的应用程序。我已经在服务器上配置了数据源并从 jndi 获取数据源。我正在使用 Spring Jdbc，并且一些 select 语句运行良好。

现在我有一个插入语句从“蟾蜍”内部成功运行，但相同的插入语句在应用程序中失败。

```
java.sql.SQLException: ORA-01400: cannot insert NULL into ("SCHEMA1"."XYZ"."CREATED_BY")

CREATED_BY is a VARCHAR2 (30 Byte) with DEFAULT set to 'SYS_CONTEXT ('USERENV', 'OS_USER')' 
```

**注意：我没有在插入语句中指定列。我的陈述如下：**

```
Insert into SCHEMA1.XYZ(some_column, another_column, is_active) values ('sadsf','sdfsdfsdf','Y') 
```

我正在使用 jdbcTemplate 所以本质上是这样做的：

```
jdbcTemplate.update(theQuery); 
```

我正在配置我的数据源，如下所示：

```
<beans:bean id="dataSource" class="org.springframework.jndi.JndiObjectFactoryBean">
    <beans:property name="jndiName" value="jdbc/MyDatasource" />
</beans:bean> 
```

现在我期待这来自设置 JAAS - 数据源的 J2C 身份验证数据时使用的用户名。

我不想指定所有可以轻松自动填充每个查询的审计列。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T14:33:51.487

从[SYS_CONTEXT](http://docs.oracle.com/cd/B14117_01/server.101/b10759/functions150.htm)

> **命名空间的预定义参数 USERENV**
> OS_USER 启动数据库会话的客户端进程的操作系统用户名。

还有

> CLIENT_IDENTIFIER 返回由应用程序通过 DBMS_SESSION.SET_IDENTIFIER 过程、OCI 属性 OCI_ATTR_CLIENT_IDENTIFIER 或 Java 类 Oracle.jdbc.OracleConnection.setClientIdentifier 设置的标识符。各种数据库组件使用此属性来识别作为同一数据库用户进行身份验证的轻量级应用程序用户。
> 
> SESSION_USER 用于验证当前用户的数据库用户名。该值在整个会话期间保持不变。

我不熟悉 Oracle 身份验证，但也许后者之一更适合您的任务。

# visual-studio - 在命名空间中添加 usings

> ID：15434846
> 
> 赞同：3
> 
> 时间：2013-03-15T14:24:25.750
> 
> 标签：visual-studio, resharper

有没有办法配置[ReSharper](http://www.jetbrains.com/resharper/)以在适当的命名空间中添加对文件的使用引用？

目前它将它们添加到文件的顶部，这很好，直到您想要在同一个文件中使用多个命名空间。

例如，我希望它如下所示：

```
namespace A
{
    using System;

    // other classes
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-15T15:00:30.253

选项 > 代码编辑 > C# > 命名空间导入：

必要时插入 using 指令 ​​> 将 using 指令添加到最深范围。

![命名空间导入](../Images/4db2848451e6f594d88315c9d362a0f5.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2020-10-15T15:35:47.927

只是为了在这里提供一个最新的答案，因为我想这样做但没有安装 R# (ReSharper) ...

它现在可以从 Visual Studio 2019 直接从[16.1 Release](https://docs.microsoft.com/en-us/visualstudio/releases/2019/release-notes-v16.1#net-productivity)获得。

我在[developercommunity.visualstudio.com上找到了这个](https://developercommunity.visualstudio.com/idea/847161/add-setting-to-place-using-always-inside-namespace.html)

> Visual Studio 2019 更新 16.1 中添加了在命名空间内部或外部包含 using 指令的代码样式。您现在可以在工具 > 选项 > 文本编辑器 > C# > 代码样式或 EditorConfig 文件中设置您的首选项，IDE 可以根据您在代码样式规则中指定的严重性通过消息、警告或错误应用它

# ruby-on-rails - 应用程序无法将用户识别为管理员

> ID：15434849
> 
> 赞同：0
> 
> 时间：2013-03-15T14:24:27.677
> 
> 标签：ruby-on-rails

我已经创建了用户角色，但是我的应用程序没有发现我的帐户是管理员。它显示角色为管理员，但管理员也为零。

从 Rails 控制台：

```
2.0.0-p0 :001 > user = User.find(13)
  User Load (17.4ms)  SELECT `users`.* FROM `users` WHERE `users`.`id` = 13 LIMIT 1
 => #<User id: 13, admin: nil, role: "admin", roles_mask: nil> 
2.0.0-p0 :002 > user.roles
 => [] 
2.0.0-p0 :003 > user.role?(:admin)
 => false 
```

如果它理解用户角色是管理员，为什么不接受它作为管理员并给予帐户适当的权限？我需要解决这个问题，因为我试图只允许管理员修改所有配置文件，然后指定普通用户只能修改和访问他们自己的配置文件。

用户.rb：

```
 class User < ActiveRecord::Base
  has_secure_password
  attr_accessible :password_confirmation, :about_me, :feet, :inches, :password, :birthday, :career, :children, :education, :email, :ethnicity, :gender, :height, :name, :password_digest, :politics, :religion, :sexuality, :user_drink, :user_smoke, :username, :zip_code
  validates_uniqueness_of :email
  validates_presence_of :password, :on => :create
  before_create { generate_token(:auth_token) }

  def send_password_reset
    generate_token(:password_reset_token)
    self.password_reset_sent_at = Time.zone.now
    save!
    UserMailer.password_reset(self).deliver
  end

  def generate_token(column)
    begin
      self[column] = SecureRandom.urlsafe_base64
    end while User.exists?(column => self[column])
  end
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T14:53:40.097

正如我在评论中所说，

```
user.role
=> admin 
```

因此，您可以向 application_controller 添加如下内容：

```
def admin
  unless current_user.role == 'admin'
    flash[:error] = "Authorisation is required to access this content."
    redirect_to current_user
  end
end 
```

通过这种方式，您可以阻止非管理员用户访问控制器中的某些操作：

```
before_filter :admin, :only => [:destroy] 
```

这只是给你一些指导的一个例子，我假设你有 current_user 助手。

我希望它有帮助...

# symfony - Symfony2 中的公司/用户安全处理

> ID：15434851
> 
> 赞同：1
> 
> 时间：2013-03-15T14:24:32.330
> 
> 标签：symfony

对于设计为作为 SaaS 运行的应用程序，我认为这是一个非常基本的安全问题。下图表示实体之间的关系：

![在此处输入图像描述](../Images/e6d6c7b40e48fde446a6c57e224b2ec9.png)

基本上，公司的用户创建了公司的每个其他用户都应该有权访问的项目。问题是如何在 Symfony2 中最好地解决这个问题。使用 ACL 似乎有点矫枉过正。

此外，我见过的大多数示例似乎都处理了控制器操作中的安全措施，这对我来说似乎很奇怪。我希望控制器与在内部处理安全性和权限的存储库进行交互。

对此的最佳做法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T16:44:13.577

在我看来，您的架构显示了解决方案。

我能想到的最简单的编码方案是：

```
My user is logged in
Get the user's company
Paginate all items attached to this company 
```

您将没有 ACE 系统，但可以根据您的问题完成工作。

如果你想要一层额外的灵活性，我会在和`UserGroup`中间添加实体。将与through和相同的事情有关。该实体可以有一个额外的列，该列以 JSON 编码的字符串保存 ACE 数据，这样每当您获得该组时，您就可以直接访问该组的 ACE。`Company``User``Item``Item``Company``UserGroup``User``UserGroup`

我对 ACL/ACE 的总体了解是，您必须花费适当的时间来规划您的集成，否则将变得非常难以维护。

要回答您的最后一个问题，ACL 没有任何最佳实践。Symfony2 有一个非常通用的 ACL 系统，它可能无法很好地扩展，但它可以满足大多数需求（如果不是全部）。我发现 Symfony2 ACL/ACE 系统很棒，但性能远非很好。

如果你有机会，你可以用缓存层包裹 Symfony ACL/ACE 系统，这将是理想的。但是，如果您的主机不允许您安装 Memcached 或 Redis 等解决方案，则您不能使用此解决方案。

# nhibernate - Nhibernate用相同的列映射不同的表

> ID：15434852
> 
> 赞同：1
> 
> 时间：2013-03-15T14:24:33.523
> 
> 标签：nhibernate, fluent-nhibernate, nhibernate-mapping, fluent-nhibernate-mapping

在我的数据库中，我有两个具有完全相同列的视图（每个视图通过链接服务器引用来自不同远程数据库的数据）。

因为两个视图都有相同的列，逻辑上表示相同的数据。

在某些情况下，我既需要存储在不同视图中的数据的联合，也需要独立地来自每个视图的单个数据。

在这种情况下使用的最佳映射是什么？有一个特定的地图可以帮助我在一个具有鉴别器值的实体中连接两个视图？

这里有一个例子：

视图1

Col1 | Col2

X1 | Y1

X2 | Y2

视图2

Col1 | Col2

K1 | Z1

K2 | Z2

情况 1 - 数据联合

VIEW1 U VIEW2 = (X1,X2,K1,K2)(Y1,Y2,Z1,Z2)

情况 2 - 每个视图的单个数据

VIEW1 = (X1,x2)(Y1,Y2)

VIEW2 = (K1,K2)(Z1,Z2)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T14:44:53.930

我会选择第三个视图，定义为您的两个视图的联合（看起来像您的情况 1），添加第三列`Discrim`作为鉴别器值。比方说 for 的价值，for`1`的`View1`价值。`2``View2`

然后我会选择“每个类层次结构表”继承映射策略（[http://nhibernate.info/doc/nh/en/index.html#persistent-classes-inheritance](http://nhibernate.info/doc/nh/en/index.html#persistent-classes-inheritance)第 8.1.1 节），将每个子类映射到每个查看行集，使用鉴别器值。

这样，您可以通过超类查询整个对象集，或者通过查询相应的子类仅查询一个视图。

如果您的视图共享相同的 id，只要 id 是 int 并且 0 不共享，则解决方法可能是在您的第三个视图中将来自 View1 的 id 转换为负数，并为来自 View2 的 id 保留正数。如果您计划存储 id，或者在给定 id 的情况下，以另一种方式访问​​数据，则不应在代码中忘记该约定。

# jquery - 页面加载后生成的控件的jquery事件

> ID：15434853
> 
> 赞同：1
> 
> 时间：2013-03-15T14:24:39.203
> 
> 标签：jquery

我有一个类的文本框，在按钮单击时我附加了同一类的另一个元素。

我怎样才能使新的 TextBox 的行为与其类的其余部分一样？

示例：http: **[//jsfiddle.net/GCQKE/](http://jsfiddle.net/GCQKE/)**

HTML：

```
<div class="container">
    <input id="textbox1" type="text" class="textbox" />
    <input id="textbox2" type="text" class="textbox" />
    <input id="textbox4" type="text" class="textbox" />
</div>
<input type="button" class="append" value="Append new TextBox" /> 
```

查询

```
$(".append").click(function (e) {
    $(".container").append("<input id='textbox3' type='text' class='textbox' />");
});

$(".textbox").click(function (e) {
    alert($(e.target).attr("id"));
}); 
```

当我单击所有文本框时，我会收到警报，除了单击按钮时生成的警报。有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T14:29:36.843

您`.click(...)`只会绑定到在页面加载时具有该类的元素，

如果你想现在或将来将函数绑定到类的所有元素（出现在页面加载或动态插入），请使用 jquery 的委托...

[http://api.jquery.com/delegate/](http://api.jquery.com/delegate/)

代替

```
$(".textbox").click(function (e) {
    alert($(e.target).attr("id"));
}); 
```

和

```
$('.container').delegate('.textbox', 'click', function(e){
    alert($(e.target).attr("id"));
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T14:35:30.067

**[演示（jsfiddle 更新）](http://jsfiddle.net/GCQKE/2/)**

您应该通过**将事件绑定到在代码运行时存在的父级**并为其提供您实际希望事件绑定到的子级的选择器来`.on()`为未来元素使用正确的语法来做到这一点。

 **```
$('.container').on('click', '.textbox', function() {
   //alert($(this).attr("id"));
   console.log(this.id);
}); 
```**

# c# - 从 MsSQL 转移到 MySQL 错误

> ID：15434855
> 
> 赞同：2
> 
> 时间：2013-03-15T14:24:57.257
> 
> 标签：c#, mysql, sql-server-2008, entity-framework-5

我试图在数据库之间传输数据（从 MsSQL Server 到 MySQL）。源数据库有约 2700 条记录。当我执行程序时，每 400-600 条记录 VS 都会抛出一个异常：

> 阅读器关闭时调用 IsDBNull 的尝试无效。

代码：

```
foreach (var product in products)
        {
            var prd = product;

            var cmd = connection.CreateCommand();

            cmd.CommandText =
                "INSERT INTO Product(CategoryID, Position, PresentItemID, Guid, ThumbX, ThumbY, " +
                "ImgX, ImgY, Name, Description, IsAvailable, TotalStock, Price, ListPrice, Size, " +
                "meta_tag, desc_tag, page_metatags, FreeDescription, IsVintage, OnSale, Valentine)" +
                "VALUES(@CategoryID, @Position, @PresentItemID, @Guid, @ThumbX, @ThumbY, " +
                "@ImgX, @ImgY, @Name, @Description, @IsAvailable, @TotalStock, @Price, @ListPrice, @Size, " +
                "@meta_tag, @desc_tag, @page_metatags, @FreeDescription, @IsVintage, @OnSale, @Valentine)";

            cmd.Parameters.AddWithValue("@CategoryID", prd.CategoryID);
            cmd.Parameters.AddWithValue("@Position", prd.Position);
            cmd.Parameters.AddWithValue("@PresentItemID", prd.PresentItemID);
            cmd.Parameters.AddWithValue("@Guid", prd.Guid);
            ...
            cmd.Parameters.AddWithValue("@IsVintage", prd.IsVintage);
            cmd.Parameters.AddWithValue("@OnSale", prd.OnSale);
            cmd.Parameters.AddWithValue("@Valentine", prd.Valentine);
            cmd.ExecuteNonQuery();
            progressBar1.PerformStep();
        } 
```

我尝试添加此代码

```
 List<Product> prd = products.ToList(); 
```

并从列表中传输数据，而不是直接从数据库中传输数据，但有同样的错误。

感谢帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T04:59:00.847

> var cmd = connection.CreateCommand();

您可能需要正确处理正在创建的对象：

```
使用(var cmd = connection.CreateCommand())
{
    cmd.CommandText = ...
}

```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-10T16:00:49.270

为了解决这个问题，我创建了源数据库的备份，并将其安装在带有目标数据库的机器上。然后程序执行没有任何问题。仍然无法理解为什么这个异常发生在我身上。

# flyway - Flyway SQL Server 和集成安全性

> ID：15434859
> 
> 赞同：-1
> 
> 时间：2013-03-15T14:25:10.697
> 
> 标签：flyway

如何将 flyway 命令行工具与 SQL Server 和“集成安全”连接一起使用？这可能吗？

最好的问候约尔格

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T18:59:37.877

用户和密码是可选的，所以它应该可以工作。

# r - 图例中的线宽？

> ID：15434867
> 
> 赞同：2
> 
> 时间：2013-03-15T14:25:31.023
> 
> 标签：r, plot

我想更改图例中线条的宽度。目前我有：

```
legend(-0.145, 25, c("(Gaussian) Kernel density","fitted normal distribution"),lwd=1.8, cex=0.8, 
   col=c("black","black"), lty=1:2) 
```

lwd 似乎改变了文字，但不是线的宽度和虚线的宽度，我该怎么做？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-15T14:30:19.483

我认为你错了，`lwd`在你的图例中设置线宽：

比较这个（上图）：

```
plot(rnorm(100)*13)
legend(-0.145, 25, c("(Gaussian) Kernel density","fitted normal distribution"),lwd=0.1, cex=0.8, 
   col=c("black","black"), lty=1:2) 
```

有了这个（底部图）：

```
plot(rnorm(100)*13)
legend(-0.145, 25, c("(Gaussian) Kernel density","fitted normal distribution"),lwd=3, cex=0.8, 
   col=c("black","black"), lty=1:2) 
```

![在此处输入图像描述](../Images/d243ed6dbbbb6fd14fe9e2dac6863320.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-04-30T09:11:38.883

您可以使用 legend 函数的参数`seg.len`来减小图例的大小。

这里有一个例子：

```
 set.seed(55) # Set the seed of R‘s random number generator
    x <- runif(10, min=0, max=100) # Generating random numbers
    plot(x, type="l") # plot x as line
    legend("topright", "x", lty="solid") # add legend 
```

[![在此处输入图像描述](../Images/a8a877878db170ada21fe8b8a182c05d.png)](https://i.stack.imgur.com/AzSqy.png)

以及修改功能的相同代码`legend`：

```
 plot(x, type="l")
    legend("topright", "x", lty="solid",seg.len=0.5) # modify length of the line in the legend 
```

[![在此处输入图像描述](../Images/b2e6f41091378b59cd1f9bd4d61fb3c5.png)](https://i.stack.imgur.com/IkC1y.png)

# amazon-fps - 如何为 Amazon FPS 创建一个测试账户（进行自动化测试）？

> ID：15434874
> 
> 赞同：1
> 
> 时间：2013-03-15T14:25:48.643
> 
> 标签：amazon-fps

我有点迷失在[http://payments-sandbox.amazon.com/](http://payments-sandbox.amazon.com/)

[我想为 Amazon FPS 设置测试用户，我的基于Behat](http://behat.org)的 Web 验收测试将使用该用户。[文档](http://docs.aws.amazon.com/AmazonFPS/latest/SandboxLanding/index.html)指出这是可能的。但是，由于亚马逊经常要求您在几乎每次页面更改时重新授权自己，我不明白创建测试帐户的页面在哪里。

那么，有没有人有过设置测试帐户来自动测试使用 FPS 进行购买的应用程序的个人经验？它是如何完成的以及在哪里完成的？我宁愿不要只为测试套件注册一个完全虚构的人以及虚假的 SSN 和电话号码。还是我在这里不走运？

# django - 对象没有属性“result_count”

> ID：15434875
> 
> 赞同：0
> 
> 时间：2013-03-15T14:25:52.360
> 
> 标签：django, django-models, django-templates, django-admin, django-views

我计划扩展 Django 的 change_list 模板。在这样做之前，我想确保我至少可以填充默认值。

我很难将正确的信息传递给 Django 的默认 change_list 模板的副本。

我的观点：

```
def list(request):
    model = admin.site._registry[NewRequests]
    c = RequestContext(request, {
            'cl': model,
    })
    t = loader.get_template('admin/change_list.html')
    return HttpResponse(t.render(c)) 
```

运行时出错：

```
'NewRequestsAdmin' object has no attribute 'result_count' 
```

`search_form cl`是模板中导致错误的标签：

```
<div class="module{% if cl.has_filters %} filtered{% endif %}" id="changelist">
  {% block search %}{% search_form cl %}{% endblock %}
  {% block date_hierarchy %}{% date_hierarchy cl %}{% endblock %} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T14:37:42.983

`cl`不应该是模型类。这是一个查询集。

# grails - Grails后端和前端中相同域对象的不同视图

> ID：15434878
> 
> 赞同：0
> 
> 时间：2013-03-15T14:25:59.097
> 
> 标签：grails, plugins, views, local, gsp

我有两个 grails 项目（管理后端和前端）使用来自本地插件的相同域类。

我需要在前端和后端有不同的视图。例如，有一个领域类事件。在每个项目中我都使用 GenerateViews。然后我修改生成的gsps。以 list.gsp 为例。在前端，我删除了从视图和控制器中创建新事件的操作，在后端我保留了它们。这是因为在前端，用户应该只能看到事件列表，而在后端，管理员创建和修改前端显示的内容。这是我得到的结构：

项目域

*   域/grails-app/domain/myapp/Event.groovy

项目前端（grails.plugin.location.'domain' = "../domain"）

*   前端/grails-app/controllers/myapp/frontend/EventController.groovy
*   前端/grails-app/views/event/list.gsp（没有编辑/创建操作的链接）

项目后端（grails.plugin.location.'domain' = "../domain"）

*   后端/grails-app/controllers/myapp/backend/EventController.groovy
*   后端/grails-app/views/event/list.gsp（编辑/创建的链接...）

但是当我使用 run-app 运行我的前端应用程序并转到列表时，控制器被调用：

```
def listEvents(Integer max) {

    params.max = Math.min(max ?: 10, 100)
    [eventInstanceList: Event.list(params), eventInstanceTotal: Event.count()]

} 
```

结果 backend/grails-app/views/event/list.gsp 被渲染，而不是 frontend/grails-app/views/event/list.gsp。

当我生成视图时，混乱已经开始了。因此，当我在后端项目中为 domain/grails-app/domain/myapp/Event.groovy 生成视图时，一切都很好。视图在我的后端项目中创建并按预期工作。

然后我将 ober 移至前端项目并为 domain/grails-app/domain/myapp/Event.groovy 生成视图。这次 grails 会告诉我已经有视图，并询问我是否要替换它们。如果我说是，它不会取代任何东西，而是在我的前端项目中创建视图。真的很奇怪。

我发现有一个与此相关的旧错误报告，我创建了一个新报告（[http://jira.grails.org/browse/GRAILS-9920](http://jira.grails.org/browse/GRAILS-9920)）。

与此同时，我应该怎么做才能解决这个问题？我可以重命名控制器的方法和视图，但我希望有更好的方法。看起来很奇怪，同名视图可能会覆盖单独项目中的视图。还是只有在使用 run-app 时才会发生类似的事情？

我是 Grails 的新手，所以也许我错过了一些明显的东西，但这真的让我害怕，因为看起来我可能会通过修改另一个项目而意外暴露一个项目中的动作。

# c++ - free() 无效指针 C++

> ID：15434879
> 
> 赞同：-1
> 
> 时间：2013-03-15T14:26:01.347
> 
> 标签：c++, memory-management, free

在如此简单的代码中，我的行为很奇怪。只需有一个复制指针的模板类：

```
template <typename T_out, typename Class_type, typename T_in> class C_Ololo{
        public:
        T_out (Class_type::*cxfunc) (T_in);
        Class_type * obj_ref;
        T_out getRef(T_out (Class_type::*func2) (T_in), Class_type * __obj )
        {
            cout << "GetRef in...1" << endl;
            cxfunc=func2;     // Segmentation fault
            cout << "GetRef in...2" << endl;
            obj_ref=__obj;    // Segmentation fault
        }
    }; 
```

然后只是一些裸类来调用前一个类：

```
class C_Temp{
    public:
    dcxArray1D /* double */  func (double a){
        dcxArray1D /* double */ temp(1);
        return temp;
    }

    void getResult(){
        cout << "GetResult" << endl;
        C_Ololo <dcxArray1D /* double */ ,C_Temp,double> * ololo;
        ololo = new C_Ololo<dcxArray1D /* double */ ,C_Temp,double>();
        ololo->getRef(&C_Temp::func,this);
    }
}; 
```

dcxArray1D 只是：

```
typedef vector< complex<double> > dcxArray1D; 
```

所以 - 问题是当我使用时`double`，我现在所拥有的任何地方`dcxArray1D`，我都没有任何问题。但是一旦我使用`dcxArray1D`我就有“分段错误”和free（）：头等舱中的指针无效。

能不能帮点小忙...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T14:31:29.947

`free`您显示的代码中没有调用。也没有调用`malloc`。这都是相当可疑的。根本原因几乎可以肯定是您正在调用`free`未分配给`malloc`.

你为什么还要使用这样的原始函数？如果您坚持使用标准 C++ 功能，整个问题可能会立即消失。

# github - 如何更改组织在 GitHub 上的存储库描述？

> ID：15434884
> 
> 赞同：0
> 
> 时间：2013-03-15T14:26:13.733
> 
> 标签：github

有一种[方法](https://stackoverflow.com/questions/7757751/how-do-you-change-a-repository-description-on-github)可以更改个人用户拥有的存储库的描述。

但是，我还控制了一个 GitHub 组织帐户，当将鼠标悬停在属于该组织的存储库上时，没有这样的按钮。如何编辑此类回购的描述？

# html - 图像对齐（2 横向和 4 向下）

> ID：15434890
> 
> 赞同：-4
> 
> 时间：2013-03-15T14:26:32.657
> 
> 标签：html, css

在 div 中对齐图像的正确方法是什么？我希望它是两横四下，中间有大约 10 像素的间隔（垂直和水平）。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T14:31:10.913

这是一个jsfiddle：http: [//jsfiddle.net/Jolora/cZGfb/](http://jsfiddle.net/Jolora/cZGfb/)

```
div {
    width: 210px;
}

div img {
    float:left;
    margin-right: 10px;
}

div img:nth-child(2n) {
    margin-right: 0;
} 
```

nth-child 选择器在旧版浏览器中并不总是有效。对于向后支持，您应该将一个类应用于右列中的图像，然后将其添加到选择器中。例如：

```
div img:nth-child(2n), div img.yourClass {
    margin-right: 0;
} 
```

# sql-server-2012 - 如何为故障转移、高可用性、灾难恢复配置 SQL Server Native Client 11.0

> ID：15434891
> 
> 赞同：0
> 
> 时间：2013-03-15T14:26:35.507
> 
> 标签：sql-server-2012, high-availability, failover, sql-server-native-client

我有**SQL Server 2012** `Web Edition`。我想在此服务器上配置高可用性。我是否需要另一个 SQL Server 来配置高可用性？

SQL Server Native Client 11.0 如何成为其中的一部分？

我知道这是一个广泛的问题，但我正在寻找一个开始。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T08:46:00.973

是的，对于所有高可用性方案，您需要不止一台服务器。至于网络版中的高可用性，您所获得的只是日志传送，因此如果您的主服务器死机，您将需要手动故障转移到另一台服务器。

本机客户端是 SQL 服务器的组合 ODBC 驱动程序和 OLE DB 提供程序。它本身并不提供高可用性，但可以使用它来提供镜像服务器的名称以进行自动故障转移，例如，如果您正在使用数据库镜像。

# ruby - 使用 rspec 和 ruby 运行 rake 的问题

> ID：15434893
> 
> 赞同：1
> 
> 时间：2013-03-15T14:26:38.623
> 
> 标签：ruby, rubygems, rake

我正在尝试在我应该收到错误的 ruby​​ 文件上运行 rake，以便我可以将其作为练习进行调试。但是我得到的错误不是我应该收到的错误。我收到以下内容，我正在花时间解释我需要解决的问题。

```
~Desktop/learn_ruby-master/00_hello$ rake
(in /~Desktop/learn_ruby-master)
/usr/lib/ruby/1.9.1/rubygems/custom_require.rb:36:in `require': cannot load such file --     hello (LoadError)
    from /usr/lib/ruby/1.9.1/rubygems/custom_require.rb:36:in `require'
    from ~Desktop/learn_ruby-master/00_hello/hello_spec.rb:117:in `<top (required)>'
    from /var/lib/gems/1.9.1/gems/rspec-core-2.13.1/lib/rspec/core/configuration.rb:819:in `load'
    from /var/lib/gems/1.9.1/gems/rspec-core-2.13.1/lib/rspec/core/configuration.rb:819:in `block in load_spec_files'
    from /var/lib/gems/1.9.1/gems/rspec-core-2.13.1/lib/rspec/core/configuration.rb:819:in `each'
    from /var/lib/gems/1.9.1/gems/rspec-core-2.13.1/lib/rspec/core/configuration.rb:819:in `load_spec_files'
    from /var/lib/gems/1.9.1/gems/rspec-core-2.13.1/lib/rspec/core/command_line.rb:22:in `run'
    from /var/lib/gems/1.9.1/gems/rspec-core-2.13.1/lib/rspec/core/runner.rb:80:in `run'
    from /var/lib/gems/1.9.1/gems/rspec-core-2.13.1/lib/rspec/core/runner.rb:17:in     `block in autorun' 
```

耙中止！

```
/usr/bin/ruby1.9.1 -S rspec ~Desktop/learn_ruby-master/00_hello/hello_spec.rb -    I/~Desktop/learn_ruby-master/00_hello -I/~Desktop/learn_ruby-master/00_hello/solution -f     documentation -r ./rspec_config failed

Tasks: TOP => default => spec
(    See full trace by running task with --trace) 
```

这是我正在运行 rake 的代码

```
 require "hello"

describe "the hello function" do
  it "says hello" do
    hello.should == "Hello!"
  end
end

describe "the greet function" do
  it "says hello to someone" do
    greet("Alice").should == "Hello, Alice!"
  end

  it "says hello to someone else" do
    greet("Bob").should == "Hello, Bob!"
  end
end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-01T01:13:10.107

I had the same problem (going through the exact same tutorial). I just spent three days of my life trying to figure it out. The issue was that one of my folders in the path to 'hello.rb' had a space in between two words. Seriously, that was it. The ruby path couldn't pick it up no matter what I did (except change the space). Uggh. Lesson learned, don't name anything, anywhere with a space from here on out.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T14:48:00.890

Ruby 说明了一切：“在库加载路径上找不到文件名 hello.rb”。您缺少 hello.rb 文件或 Ruby 找不到它。你真的有它在你运行 rake 的目录中的光盘上吗？如果它在其他地方，您需要提供相对路径。

还要从第一行删除空格，我怀疑你那里有一些垃圾。错误消息中的 -- 和 hello 之间应该只有一个空格。

# db2 - 如何在 DB2 中列出已声明的临时表

> ID：15434894
> 
> 赞同：0
> 
> 时间：2013-03-15T14:26:44.933
> 
> 标签：db2, temp-tables

[`DECLARE GLOBAL TEMPORARY TABLE`](http://pic.dhe.ibm.com/infocenter/dzichelp/v2r2/topic/com.ibm.db2z9.doc.sqlref/src/tpc/db2z_sql_declareglobaltemptable.htm)您可以使用该语句在 DB2 中创建会话临时表。有没有办法列出当前存在于会话`SESSION`模式中的所有表？注意*声明*的全局临时表在`SYSIBM.SYSTABLES`.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-15T15:50:20.293

简短的回答（据我所知）是否定的。声明的全局临时表 (DGTT) 不会显示在目录中（如您所述）。

[Created Global Temporary Tables](https://www.ibm.com/support/knowledgecenter/SSEPEK_12.0.0/sqlref/src/tpc/db2z_sql_createglobaltemptable.html)可以，但它们略有不同（请查看[我的其他 Stack Overflow 答案以](https://stackoverflow.com/a/15704745/458501)了解差异）。

如果您只需要知道表是否存在（例如，如果您稍后尝试在应用程序中创建 DGTT），您可以使用[`CONTINUE HANDLER`](https://www.ibm.com/support/knowledgecenter/SSEPEK_12.0.0/apsg/src/tpc/db2z_handlerssqlproc.htm)：

```
DECLARE CONTINUE HANDLER FOR SQLSTATE '42710' SET DGTT_FOUND=1; 
```

根据您的平台，`SQLSTATE`关键字可能是可选的。

# javascript - 访问 ul 列表中的元素

> ID：15434896
> 
> 赞同：1
> 
> 时间：2013-03-15T14:26:52.557
> 
> 标签：javascript, greasemonkey

我有以下列表层次结构：

```
<ul id="ulid">
    <li><a><div class="mydiv">content</div></a></li>
    <li><a><div class="mydiv">content</div></a></li>
    ...
</ul> 
```

我想向 div 添加一些 css 规则，这是我迄今为止尝试过的：

```
var myul = document.getElementById("ulid");
var myli = myul.getElementsByTagName("li");
for(var i = 0; i < myli.length; i++) {
    //myli[i].parentNode.style.display = "none"; // that works
    var links = myli[i].getElementsByTagName("a");
    for(var ii = 0; ii < links.length; ii++) {
        links[ii].parentNode.style.display = "none"; // doesnt work
    }
} 
```

我可以隐藏这些`li`项目，但不能这样做，`a`所以我无法到达 div。我在这里做错了什么？

编辑：`getElementsByClassName`似乎不适用于油脂猴脚本，因为它只适用于 Emmanuel N 的小提琴。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T14:36:52.837

您的代码确实有效，但我认为它并没有达到您的预期。最后一行：links[ii].parentNode.style.display = "none" 实际上会隐藏a标签（即li）标签的父节点，而不是div。parentNode 将向上一级，而不是向下一级。

与其尝试获取 myli[i].getElementsByTagName("a") 然后向下处理到 div，不如使用 myli[i].getElementsByTagName("div")，然后简单地执行以下操作：

```
var myul = document.getElementById("ulid");
var myli = myul.getElementsByTagName("li");
for(var i = 0; i < myli.length; i++) {
    //myli[i].parentNode.style.display = "none"; // that works
    var links = myli[i].getElementsByTagName("div");
    for(var ii = 0; ii < links.length; ii++) {
        links[ii].style.display = "none"; 
    }
} 
```

当然，还有很多更有效的方法可以做到这一点。你已经在 div 上有了类名，所以

```
document.getElementsByClassName("mydiv"); 
```

也可以。

或者，如果你使用 jQuery，你可以做同样的事情而不必显式地迭代：

```
$("div.mydiv").css(etc.); // style this however you want 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T14:39:54.557

如果您不反对使用 jQuery，以下内容将为您隐藏 div。

```
$(document).ready(function () {
    var myDivs = $('div.mydiv');
    for(var eachDiv in myDivs) {
        $(eachDiv).hide();
    }   
 }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-15T14:42:34.517

您的代码似乎有效。看看[这个](http://jsfiddle.net/C56DM/)小提琴

```
 var myul = document.getElementById("ulid");
  var myli = myul.getElementsByTagName("li");
  for(var i = 0; i < myli.length; i++) 
  {
       var links = myli[i].getElementsByTagName("a");
       for(var ii = 0; ii < links.length; ii++) 
       {
              links[ii].parentNode.style.display = "none";
       }
  } 
```

# mongodb - 从 mongoShell 更新 mongodb 文档后无法使用 domain.get()

> ID：15434903
> 
> 赞同：0
> 
> 时间：2013-03-15T14:27:09.717
> 
> 标签：mongodb, grails, groovy, morphia

我最近开始使用 grails，它很棒。在我的应用程序中，我使用 morphia 插件与 mongodb 进行通信。让我给你一个系统的概述，然后进入我面临的问题

概述我有三个域类，如下所示

```
A. Project.groovy
B. Customer.groovy
C. User.groovy 
```

Project.groovy 有以下内容

```
@Reference Customer customer
String projectName
@Id ObjectId projectId 
```

Customer.groovy 有以下内容

```
@Reference List<Project> projects
String customerName
@Id ObjectId customerId 
```

User.groovy 有以下内容

```
@Reference List<Project> userResponsibleProjects
String userName
@Id String userEmail 
```

一些示例数据，以便我可以更清楚地解释问题。

```
customers -> customerA and customerB
projects -> projectA, ProjectB and projectC
projectA and projectB has reference to customerA and vice versa
projectC has reference to customerC and vice versa
Users -> userA and userB
userA has reference to projectA and projectB.
userB has reference to projectC 
```

现在有一些关于这个问题的信息以及这个问题是如何产生的。out 系统的用户可以选择删除他们不再使用的项目。因此，当触发删除项目时，我删除对该项目的引用并保存客户，如果客户保存成功，我将删除该项目。因为我是新人，所以我没有检查 User.groovy 中的项目引用。所以说我们删除了projectB，我做到了

```
customer.remove(projectB)
if(customer.save())
    projectB.remove() 
```

现在我面临的最初问题是

“grails 异常无法获取 user.userResponsibleProjects 的项目参考”。所以为了解决这个问题，我进入数据库并做了以下

```
db.User.update({_id: userA},{$pull: {$ref: "Project", $id: ObjectId("projectB")}}) 
```

那行得通。现在真正的问题。

如果用户尝试进入任何客户，系统会抛出相同的异常，即无法获得 user.userResponsibleProjects 的参考，并且在进一步调查中我发现以下内容，我使用 mongo 获得了选定的客户

```
Customer customer = Customer.get(params.customerId) 
```

即使在 mongodb 中有一个具有相同 id 的客户文档，它也会失败。

但如果我做类似的事情，

```
Customer customer = Customer.list().toList().find { it.id.toString() == params.customerId} 
```

有用。

知道为什么会这样吗？我不确定这是 mongodb 还是 morphia 的问题。任何帮助是极大的赞赏。

提前致谢 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-06T15:45:40.580

经过数小时的调试，我发现了问题:)，问题是在 mongo 中存在对已删除文档的交叉引用，如果您有任何对象的副本，通常会发生这种情况，该对象引用了 mongo 中的其他文档。为避免此问题，请确保没有副本，如果有，请确保它们是嵌入的或引用的副本。

# hibernate - 休眠：“无法从结果集中读取列值......无法反序列化”

> ID：15434904
> 
> 赞同：0
> 
> 时间：2013-03-15T14:27:12.330
> 
> 标签：hibernate, serialization

我有一个要持久保存到数据库的 Java 类：

```
public class ClassA implements Serializable {
    //
    // other fields not shown
    //

    private ObjectType objectType;  // an enum that indicates the actual class stored in the "object" field
    private Object object;
} 
```

这是休眠映射文件：

```
<hibernate-mapping default-lazy="false">
    <class name="x.y.z.ClassA" table="ClassA">
        <!--
           other properties removed
        -->

        <property name="objectType" column="OBJECTTYPE">
            <type name="org.hibernate.type.EnumType">
                <param name="enumClass">
                    x.y.z.ClassA$ObjectType
                </param>
                <param name="type">12</param>
            </type>
        </property>

        <property name="object" column="OBJECT" type="serializable"/>
    </class>
</hibernate-mapping> 
```

当我使用 Hibernate 将 ClassA 的实例插入数据库时​​，插入了一行，我看到“object”字段被定义为 longblob。但是，当我使用 MySQL Workbench 查看“对象”字段的数据时，它告诉我数据长度为 255 字节。我试图存储在“对象”字段中的对象包含一些字符串，其组合长度加起来超过 255 个字符。它在存储到 longblob 列之前是否被压缩？

我遇到的问题是当我尝试使用 Hibernate 来查询我插入的行时。Hibernate 返回 0 行，在休眠日志中我看到以下错误：

```
8167 [Thread-32] INFO  org.hibernate.type.SerializableType - could not read column value from result set: OBJECT195_0_; could not deserialize 
```

如果当 Hibernate 将对象存储在 longblob 列中时对象没有被压缩，那么我猜这就是导致“无法反序列化”错误的原因。我知道它大于 255 字节，但 MySQL Workbench 说它有 255 字节长，因此该对象必须由于某种原因被截断。

但是如果对象正在被压缩，那么 Hibernate 可能无法反序列化它，因为它只是一个 java.lang.Object 类型，它不知道实际的对象类型是什么。如果是这种情况，那么有没有办法为 Hibernate 编写自定义反序列化器？因为实际的对象类型由“objectType”字段指示，所以自定义反序列化器可以检查“objectType”字段，然后知道如何反序列化“object”字段。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T05:17:33.247

事实证明，Hibernate 默认将 longblob 列的最大大小设置为 255 字节。我将映射文件中的行更改为：

```
<property name="object" column="OBJECT" type="serializable" length="2147483647"/> 
```

这解决了问题。

# codeigniter - Codeigniter 子文件夹命名为控制器

> ID：15434915
> 
> 赞同：0
> 
> 时间：2013-03-15T14:27:33.430
> 
> 标签：codeigniter, controllers

我正在尝试在控制器文件夹中创建与 Codeigniter 中的控制器完全相同的名称的文件夹。是否有可能通过一些技巧或什么？

截图在这里：http: [//i.imgur.com/vrQ1J9V.png](http://i.imgur.com/vrQ1J9V.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T15:08:05.267

如果它会像

```
/controllers/manage/manage.php 
```

你应该添加 /config/routes.php

```
$route['manage/(.*)'] = "manage/manage/$1";
$route['manage'] = "manage/manage"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T14:44:38.700

**编辑**

我第一次错误地查看并认为 manage.php 在管理文件夹之外。

它会起作用，但您的 URL 将只有两次“管理”。您可以更改路由配置以删除第一个“管理”，但只需将 manage.php 命名为不同的名称就不会那么混乱和耗时。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-15T15:10:13.457

使用相同的名称没有问题，但它是混乱的。最好的解决方案是更改名称，但您可以使用就好。

请记住使用带有“管理/管理/功能”的路线。

# mvvm - MVVM 模式是架构模式还是设计模式？

> ID：15434918
> 
> 赞同：7
> 
> 时间：2013-03-15T14:27:35.010
> 
> 标签：mvvm, architecture, design-patterns

我已经对此主题进行了一些研究，并且已经在少数应用程序中使用了 MVVM 模式。

我问这个问题是因为有时 MVVM 被称为设计，有时被称为架构模式。

在大多数情况下，MVVM 模式被称为设计模式。但是我个人会投票支持架构，因为对我来说它清楚地定义了应用程序的架构（例如，三层，视图，视图模型，模型以及它们如何相互交互）

这个[SO Question & Answer](https://stackoverflow.com/questions/4243187/difference-between-design-pattern-and-architecture)是关于架构模式和设计模式之间的区别。在答案中说MVC是一种架构模式。几乎所有对 MVVM 的解释都包含与 MVC 的比较。因此，MVVM 也是一种架构模式吗？

这篇[msdn 文章](http://msdn.microsoft.com/en-us/magazine/dd419663.aspx)（顺便说一句非常好）将 MVVM 模式称为设计模式，并且是由真正应该知道其中区别的人编写的。

我很困惑。设计还是架构模式？这个词是不是混淆了？

**编辑：我的学士论文需要知道这一点**

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-15T15:22:40.353

我倾向于将架构模式视为具有持久影响的“决策”。它们构成了您的应用程序的骨架，因此很难摆脱它们。

例如，如何构建视图的方法很难摆脱，所以我称之为架构模式。Microsoft 将 ASP.NET WebForms 设计为与 WinForms 很相似。在项目进行到一半时，很难切换到更多的 MVVM 方法。即使选择 WebForms 作为您的技术堆栈，也会极大地影响您可以对应用程序执行的操作。

我认为设计模式是实现的变体——它们可以在不影响应用程序的其余部分的情况下使用。您通常会重构为模式，期望代码会发生变化。就这一点而言，设计模式旨在帮助促进未来的变化。

显然，两者之间有一条模糊的界限。考虑存储库模式（通常被认为是一种架构模式）。它实际上是数据层的外观（或代理）。在这里，您指出了设计模式的重复使用——将其提升为架构模式——因为它会影响您构建系统的方式。你现在有一个规则：每当我访问数据库时，我都会这样做，这个和这个。

# asp.net-mvc - 在我的 MvcHelperExtension 错误设计中硬编码默认 nopic 图像

> ID：15434923
> 
> 赞同：0
> 
> 时间：2013-03-15T14:27:48.147
> 
> 标签：asp.net-mvc, razor, asp.net-mvc-4, asp.net-mvc-helpers

我刚刚编写了一个 MVC 辅助方法来`img`为我编写标签，在该方法中，我正在硬编码一个`nopic`应该在没有传入图像路径时使用的图像。我**不**喜欢硬编码，但不知道是什么我可以使用的最佳方法（假设这是 MVC 并且这是一个助手）来实现它。

```
public static MvcHtmlString Image(this HtmlHelper htmlHelper, 
                                  string imgName, string alt, int height)
{
    if (string.IsNullOrWhiteSpace(imgName)) imgName = "nopic.jpg";
    var src = String.Format("/Content/ProductImages/{0}", imgName);

    var tagBuilder = new TagBuilder("img");
    tagBuilder.Attributes.Add("src", htmlHelper.Encode(src));
    tagBuilder.Attributes.Add("alt", htmlHelper.Encode(alt));
    tagBuilder.Attributes.Add("height", htmlHelper.Encode(height));

    return MvcHtmlString.Create(tagBuilder.ToString(TagRenderMode.SelfClosing));
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T14:41:41.573

我认为编程中的硬编码很糟糕，因为维护非常困难，您可以在[Web 配置](http://odetocode.com/articles/345.aspx)中添加密钥并使其变得容易，如果需要更改它，您可以轻松更改它而无需再次发布在 Web 配置中：

```
<add key="ImagePath" value="/Content/ProductImages/"/> 
```

在 C# 代码中：

```
var path= WebConfigurationManager.AppSettings["ImagePath"].ToString() 
```

# sharepoint-2013 - SharePoint 2013 限制使用 Share Point 应用程序

> ID：15434928
> 
> 赞同：5
> 
> 时间：2013-03-15T14:27:51.763
> 
> 标签：sharepoint-2013

我已经部署了一个 SharePoint 托管的应用程序，目前任何可以通过 Share Point 网站进行身份验证的人都可以看到它。如何将访问/可见性仅限于某个用户组？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-27T18:41:24.597

Sharepoint 托管应用程序可以安装在两个范围内。租赁范围和站点集合。要使应用程序仅对特定用户可见，您必须选择租赁范围。转到中央管理中的应用程序目录。

转到托管开发人员站点的 Web 应用程序的应用程序目录并在那里安装应用程序。在安装时，您可以选择使其对一组人站点集合和其他一些选项可见

# sql - JOIN 命令的问题

> ID：15434929
> 
> 赞同：2
> 
> 时间：2013-03-15T14:27:59.397
> 
> 标签：sql, database, join

嗨，堆栈溢出的新人，所以如果我没有正确呈现这个，我很抱歉。

我使用过 Google、W3schools 并阅读了 SQL 上的 FQA。

我正在使用 WAMP2.0 中的 SQL 命令行运行 SQL。我目前正在做一个项目，目的是创建一个最小的大学数据库。与学生、成绩、课程、模块等

其中一项任务是列出所有学生、模块和相应的成绩。为此，我尝试使用 JOIN 命令从学生表中选择所有名称，并从记录表中选择所有相应的模块 + 成绩。

```
+------------+-------+------------+-----------------+
| Student_id | Name  | DOB        | Address         |
+------------+-------+------------+-----------------+
|    4665236 | Paddy | 1985-09-18 | 123 Fake Street |
|    5665236 | Paul  | 1984-06-12 | Good manlane    |
|    6665236 | John  | 1984-03-09 | Docotor town    |
|    7665236 | Aidan | 1983-07-09 | Banker worlds   |
|    8665236 | Joe   | 1983-07-09 | 24 hitherwood   |
+------------+-------+------------+-----------------+

+------------+--------+------+-------+
| Student_id | Mod_id | GPA  | Grade |
+------------+--------+------+-------+
|    4655236 |   2222 | 3.84 | A-    |
|    5655236 |  11111 | 3.44 | B+    |
|    6655236 |  33333 | 3.24 | B     |
|    7655236 |  44444 | 2.45 | C-    |
|    8655236 |  44444 | 2.45 | C-    |
+------------+--------+------+-------+ 
```

学生表中的主键是 Student_id INT 11

记录的主键是 (Student_id,Mod_id)

单独的 SELECT FROM 语句在两个表上都可以正常工作。

使用时出现问题

```
SELECT students.Name, records.Grade
FROM students
INNER JOIN records
ON students.Student_id=Student_id
ORDER BY students.Name 
```

我收到以下错误

> 错误 1052 (23000)：on 子句中的列 'Student_id' 不明确

感谢我尝试的惊人的快速响应

> SELECT students.Name, records.Grade FROM students INNER JOIN records ON students.Student_id=records.Student_id ORDER BY students.Name;

得到 ---- 空集（0.00 秒）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T14:29:13.607

`Student_Id`您必须使用别名来限定该列，例如这样它在子句`records.studentId`中不会有歧义，或者：`ON`

```
SELECT s.Name, r.Grade
FROM students AS s
INNER JOIN records AS r ON s.Student_id= r.Student_id
ORDER BY s.Name 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T14:29:24.350

您需要为列提供表名`Student_id`以避免歧义，因为它都存在于两个表中。

```
SELECT students.Name, records.Grade
FROM   students
       INNER JOIN records
          ON students.Student_id = records.Student_id -- << THIS
ORDER  BY students.Name 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-15T14:34:06.050

您的列名被标记为不明确的原因是因为您有两个不同的表，每个表都有该`Student_id`字段。您可以将一个表连接到自身，因此即使您在字段的第一个实例上有一个标识符，您也需要一个标识符。

试试下面的代码：

```
SELECT students.Name, records.Grade
FROM students
INNER JOIN records
ON students.Student_id=records.Student_id
ORDER BY students.Name 
```

如果这有助于您的代码看起来更干净，您还可以使用以下方法为表起别名：

```
SELECT s.Name, r.Grade
FROM students s
INNER JOIN records r
ON s.Student_id=r.Student_id
ORDER BY s.Name 
```

但是，这仅在两个表中的学生 ID 匹配时才有效。在您提供的示例数据中，没有匹配的记录。4665236 != 4655236

# python - Windows 7 机器上的 Python 3、MySQL 和 PyMySQL

> ID：15434930
> 
> 赞同：0
> 
> 时间：2013-03-15T14:28:04.603
> 
> 标签：python, mysql, activestate, pymysql

我可能会问不可能的事。但是，我正在尝试使用 Python 3.3.0 在 Windows 7 机器上连接到 MySQL。我使用 PyMySQL 作为一种连接方式，但 Windows 机器似乎不支持这种方式。我不喜欢 pymysql，有没有办法在不回退到以前的 Python 版本的情况下实现这一点。

活动状态似乎没有为 Python 3.X 提供解决方案

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T15:10:07.407

而不是使用任何其他连接器。我发现 MySQL 有一个 Python 3.3 MySQL 连接器可以解决这个问题。您可以在这里查看，这确实可以快速解决问题，并且文档也非常好。这适用于 Windows 7，但我不知道其他平台。

最新版本的 Python MySQL 连接器。

[http://dev.mysql.com/doc/refman/5.6/en/myconnpy_example_connecting.html](http://dev.mysql.com/doc/refman/5.6/en/myconnpy_example_connecting.html)

祝你好运。

# sql - 具有固定行数的表 (xslt, sql)

> ID：15434931
> 
> 赞同：0
> 
> 时间：2013-03-15T14:28:04.843
> 
> 标签：sql, xslt, html-table

我在表中设置固定行数时遇到问题。我用类似的代码创建了这个表：

```
<xsl:for-each select="DBData/tabulka1/Row[position() &lt; 14]">
      <tr>
             <td><xsl:value-of select="ODESILATEL"/></td>
             <td><xsl:value-of select="PREDMET"/></td>
             <td align="right" class="sOkrajem"></td>
      </tr>
</xsl:for-each> 
```

而且我需要将行数固定为 15，即使我得到一些记录。

例如，如果我从数据库中只得到 13 行，那么左边的两行将是空的，但会在那里。为了更好地理解，这里是图片：http: [//imageshack.us/photo/my-images/692/tabulkar.png/](http://imageshack.us/photo/my-images/692/tabulkar.png/)

如果需要，我可以编辑我的 SQL 代码。

感谢您的所有建议。很抱歉代表我的问题。

编辑。我的代码的更广泛示例：

我在表中设置固定行数时遇到问题。我用类似的代码创建了这个表：

```
<xsl:for-each select="DBData/tabulka1/Row[position() &lt; 14]">
      <tr>
             <td><xsl:value-of select="ODESILATEL"/></td>
             <td><xsl:value-of select="PREDMET"/></td>
             <td align="right" class="sOkrajem"></td>
      </tr>
</xsl:for-each> 
```

而且我需要将行数固定为 15，即使我得到一些记录。

例如，如果我从数据库中只得到 13 行，那么左边的两行将是空的，但会在那里。为了更好地理解，这里是图片：http: [//imageshack.us/photo/my-images/692/tabulkar.png/](http://imageshack.us/photo/my-images/692/tabulkar.png/)

如果需要，我可以编辑我的 SQL 代码。

感谢您的所有建议。很抱歉代表我的问题。

编辑。我最近使用代码的更广泛示例：

```
<?xml version="1.0" encoding="windows-1250"?>

<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
  <xsl:param name="RolesPath" select="'%RolesPath%'"/>
  <xsl:decimal-format decimal-separator=","
                      grouping-separator="&#160;"/>

  <xsl:include href="%RolesPath%\_foot.xsl" />
  <xsl:template match="/">
    <html xmlns="http://www.w3.org/1999/xhtml" xml:lang="cs" lang="cs">

      <head>
        <meta name="lang" content="cs" />
        <meta http-equiv="Content-Type" content="text/xml; charset=windows-1250" />
        <meta name="copyright" content="© 2009-2010 Flores" />
        <link rel="stylesheet" type="text/css" href="style.css" />

      </head>
      <body class ="teloBezObrazku">
        <table width="95%" class="tabulka">
          <th colspan="3" class="nadpis">Vzkazy</th>
          <xsl:variable name="numRows" select="15" />
          <xsl:variable name="rows" select="DBData/tabulka1/Row" />
          <xsl:apply-templates select="$rows[position() &lt;= $numRows]" />
          <xsl:call-template name="AddRows">
            <xsl:with-param name="numRows" select="$numRows - count($rows)" />
          </xsl:call-template>
        </table>
        <span style="position: absolute; bottom: 10;">
          &#160;&#160;<a href="abrasite:A4NHDUKJESG4PJAVPQJFMAE2PS">Otevřít vše...</a><b class="cara">|</b>&#160;
          <a href="abrasite:A4NHDUKJESG4PJAVPQJFMAE2PS,0,DoNewOnly">Nový...</a>
        </span>
        <xsl:call-template name="footer">
          <xsl:with-param name="RolesPath" select="'%RolesPath%'"/>
        </xsl:call-template>
        </foot>
      </html>
  </xsl:template>
  <!-- Separate templates -->
  <xsl:template name="TableRow" match="tabulka1/Row">
    <tr>
      <td>
        <xsl:value-of select="self::Row/ODESILATEL"/>
      </td>
      <td>
        <xsl:value-of select="self::Row/PREDMET"/>
      </td>
      <td align="right" class="sOkrajem"></td>
    </tr>
  </xsl:template>

  <xsl:template name="AddRows">
    <xsl:param name="numRows" />
    <xsl:if test="$numRows > 0">
      <xsl:call-template name="TableRow" />

      <xsl:call-template name="AddRows">
        <xsl:with-param name="numRows" select="$numRows - 1" />
      </xsl:call-template>
    </xsl:if>
  </xsl:template>
</xsl:stylesheet> 
```

编辑。第一行可能会出错。

```
<xsl:template name="tabulka1 | tabulka1/Row" mode="row">
  <tr onmouseover="className='seda'" onmouseout="className='bila'" title="{OBSAH}" style="cursor:hand" xmlns="http://www.w3.org/1999/xhtml">
    <a href="abrasite:A4NHDUKJESG4PJAVPQJFMAE2PS,0,DoShow;{ID}">
      <xsl:choose>
        <xsl:when test = "PRECTENO='N'">
          <td align="left" class="sOkrajem"><b><xsl:value-of select="self::Row/ODESILATEL"/></b></td>
            <td align="left" class="sOkrajem"><b><xsl:value-of select="self::Row/PREDMET"/></b></td>
            <td align="right" class="sOkrajem">
              <b><xsl:value-of select="self::Row/DATUM"/>&#160;<xsl:value-of select="self::Row/HODINY"/><xsl:value-of select="self::Row/MINUTY"/></b>
            </td>
          </xsl:when>
          <xsl:otherwise>
            <td align="left" class="sOkrajem"><xsl:value-of select="self::Row/ODESILATEL"/></td>
            <td align="left" class="sOkrajem"><xsl:value-of select="self::Row/PREDMET"/></td>
            <td align="right" class="sOkrajem">
              <xsl:value-of select="self::Row/DATUM"/>&#160;<xsl:value-of select="self::Row/HODINY"/><xsl:value-of select="self::Row/MINUTY"/>
            </td>
        </xsl:otherwise>
      </xsl:choose>
    </a>
  </tr>
</xsl:template> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T15:18:33.273

您应该能够像这样完成它（我省略了页脚部分，我无权访问）：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
  <xsl:param name="RolesPath" select="'%RolesPath%'"/>
  <xsl:decimal-format decimal-separator=","
                      grouping-separator="&#160;"/>
  <xsl:variable name="numRows" select="15" />

  <xsl:template match="/">
    <html xmlns="http://www.w3.org/1999/xhtml" xml:lang="cs" lang="cs">
      <head>
        <meta name="lang" content="cs" />
        <meta http-equiv="Content-Type" content="text/xml; charset=windows-1250" />
        <meta name="copyright" content="© 2009-2010 Flores" />
        <link rel="stylesheet" type="text/css" href="style.css" />

      </head>
      <body class ="teloBezObrazku">
        <xsl:apply-templates select="DBData/tabulka1" />

        <xsl:apply-templates select="DBData/tabulka2" />
        <span style="position: absolute; bottom: 10;">
          &#160;&#160;<a href="abrasite:A4NHDUKJESG4PJAVPQJFMAE2PS">Otevřít vše...</a><b class="cara">|</b>&#160;
          <a href="abrasite:A4NHDUKJESG4PJAVPQJFMAE2PS,0,DoNewOnly">Nový...</a>
        </span>
      </body>
    </html>
  </xsl:template>

  <xsl:template name="TableRows">
    <xsl:variable name="rows" select="Row" />
    <xsl:apply-templates select="$rows[position() &lt;= $numRows]" mode="row" />
    <xsl:call-template name="AddRows">
      <xsl:with-param name="numRows" select="$numRows - count($rows)" />
    </xsl:call-template>
  </xsl:template>

  <xsl:template name="AddRows">
    <xsl:param name="numRows" />
    <xsl:if test="$numRows > 0">
      <xsl:apply-templates select="." mode="row" />

      <xsl:call-template name="AddRows">
        <xsl:with-param name="numRows" select="$numRows - 1" />
      </xsl:call-template>
    </xsl:if>
  </xsl:template>

  <xsl:template match="tabulka1">
    <table width="95%" class="tabulka" xmlns="http://www.w3.org/1999/xhtml">
      <tr>
        <th colspan="3" class="nadpis">Vzkazy</th>
      </tr>
      <xsl:call-template name="TableRows" />
    </table>
  </xsl:template>

  <xsl:template match="tabulka1 | tabulka1/Row" mode="row">
    <tr xmlns="http://www.w3.org/1999/xhtml">
      <td>
        <xsl:value-of select="self::Row/ODESILATEL"/>
      </td>
      <td>
        <xsl:value-of select="self::Row/PREDMET"/>
      </td>
      <td align="right" class="sOkrajem"></td>
    </tr>
  </xsl:template>

  <xsl:template match="tabulka2">
    <table width="95%" class="tabulka" xmlns="http://www.w3.org/1999/xhtml">
      <tr>
        <th colspan="2" class="nadpis">Other Table</th>
      </tr>
      <xsl:call-template name="TableRows" />
    </table>
  </xsl:template>

  <xsl:template match="tabulka2 | tabulka2/Row" mode="row">
    <tr xmlns="http://www.w3.org/1999/xhtml">
      <td>
        <xsl:value-of select="self::Row/ODESILATEL2"/>
      </td>
      <td>
        <xsl:value-of select="self::Row/PREDMET2"/>
      </td>
    </tr>
  </xsl:template>
</xsl:stylesheet> 
```

在此输入 XML 上运行时：

```
<DBData>
  <tabulka1>
    <Row>
      <ODESILATEL>Hello</ODESILATEL>
      <PREDMET>1</PREDMET>
    </Row>
    <Row>
      <ODESILATEL>Ciao</ODESILATEL>
      <PREDMET>2</PREDMET>
    </Row>
    <Row>
      <ODESILATEL>Hi</ODESILATEL>
      <PREDMET>3</PREDMET>
    </Row>
    <Row>
      <ODESILATEL>Bonjour</ODESILATEL>
      <PREDMET>4</PREDMET>
    </Row>
  </tabulka1>
  <tabulka2>
    <Row>
      <ODESILATEL2>Konnnichiwa</ODESILATEL2>
      <PREDMET>1</PREDMET>
    </Row>
    <Row>
      <ODESILATEL2>Wazzap</ODESILATEL2>
      <PREDMET>2</PREDMET>
    </Row>
    <Row>
      <ODESILATEL2>Buenos dias</ODESILATEL2>
      <PREDMET>3</PREDMET>
    </Row>
  </tabulka2>
</DBData> 
```

结果是：

```
<html xml:lang="cs" lang="cs" xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta name="lang" content="cs" />
    <meta http-equiv="Content-Type" content="text/xml; charset=windows-1250" />
    <meta name="copyright" content="© 2009-2010 Flores" />
    <link rel="stylesheet" type="text/css" href="style.css" />
  </head>
  <body class="teloBezObrazku">
    <table width="95%" class="tabulka">
      <tr>
        <th colspan="3" class="nadpis">Vzkazy</th>
      </tr>
      <tr>
        <td>Hello</td>
        <td>1</td>
        <td align="right" class="sOkrajem" />
      </tr>
      <tr>
        <td>Ciao</td>
        <td>2</td>
        <td align="right" class="sOkrajem" />
      </tr>
      <tr>
        <td>Hi</td>
        <td>3</td>
        <td align="right" class="sOkrajem" />
      </tr>
      <tr>
        <td>Bonjour</td>
        <td>4</td>
        <td align="right" class="sOkrajem" />
      </tr>
      <tr>
        <td></td>
        <td></td>
        <td align="right" class="sOkrajem" />
      </tr>
      <tr>
        <td></td>
        <td></td>
        <td align="right" class="sOkrajem" />
      </tr>
      <tr>
        <td></td>
        <td></td>
        <td align="right" class="sOkrajem" />
      </tr>
      <tr>
        <td></td>
        <td></td>
        <td align="right" class="sOkrajem" />
      </tr>
      <tr>
        <td></td>
        <td></td>
        <td align="right" class="sOkrajem" />
      </tr>
      <tr>
        <td></td>
        <td></td>
        <td align="right" class="sOkrajem" />
      </tr>
      <tr>
        <td></td>
        <td></td>
        <td align="right" class="sOkrajem" />
      </tr>
      <tr>
        <td></td>
        <td></td>
        <td align="right" class="sOkrajem" />
      </tr>
      <tr>
        <td></td>
        <td></td>
        <td align="right" class="sOkrajem" />
      </tr>
      <tr>
        <td></td>
        <td></td>
        <td align="right" class="sOkrajem" />
      </tr>
      <tr>
        <td></td>
        <td></td>
        <td align="right" class="sOkrajem" />
      </tr>
    </table>
    <table width="95%" class="tabulka">
      <tr>
        <th colspan="2" class="nadpis">Other Table</th>
      </tr>
      <tr>
        <td>Konnnichiwa</td>
        <td></td>
      </tr>
      <tr>
        <td>Wazzap</td>
        <td></td>
      </tr>
      <tr>
        <td>Buenos dias</td>
        <td></td>
      </tr>
      <tr>
        <td></td>
        <td></td>
      </tr>
      <tr>
        <td></td>
        <td></td>
      </tr>
      <tr>
        <td></td>
        <td></td>
      </tr>
      <tr>
        <td></td>
        <td></td>
      </tr>
      <tr>
        <td></td>
        <td></td>
      </tr>
      <tr>
        <td></td>
        <td></td>
      </tr>
      <tr>
        <td></td>
        <td></td>
      </tr>
      <tr>
        <td></td>
        <td></td>
      </tr>
      <tr>
        <td></td>
        <td></td>
      </tr>
      <tr>
        <td></td>
        <td></td>
      </tr>
      <tr>
        <td></td>
        <td></td>
      </tr>
      <tr>
        <td></td>
        <td></td>
      </tr>
    </table>
    <span style="position: absolute; bottom: 10;">
        <a href="abrasite:A4NHDUKJESG4PJAVPQJFMAE2PS">Otevřít vše...</a><b class="cara">|</b> 
      <a href="abrasite:A4NHDUKJESG4PJAVPQJFMAE2PS,0,DoNewOnly">Nový...</a>
    </span>
  </body>
</html> 
```

# php - 如何使用 Live Connect API 获取用户的 Hotmail 联系人？

> ID：15434932
> 
> 赞同：0
> 
> 时间：2013-03-15T14:28:04.390
> 
> 标签：php, json, api, rest, hotmail

我找到了一些用于读取联系人的 Live API 代码，但我不知道要发送哪些参数以及获取所有联系人（我/联系人）的正文数据。我发现的代码在这个问题中[hotmail get contacts with curl using api](https://stackoverflow.com/questions/14215563/hotmail-get-contacts-with-curl-using-api)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-17T07:46:18.047

查看 CloudSponge PHP 库： [https ://github.com/cloudsponge/cloudsponge-lib-php/](https://github.com/cloudsponge/cloudsponge-lib-php/)

免责声明：我为 CloudSponge 工作。

# mysql - 每天的第一个值和最后一个值之间的差异

> ID：15434934
> 
> 赞同：4
> 
> 时间：2013-03-15T14:28:14.123
> 
> 标签：mysql, sql

在一张桌子上，我每天有几个措施

```
29011   2012-12-28 09:00:00
28701   2012-12-28 10:00:00
28830   2012-12-28 11:00:00
28353   2012-12-28 12:00:00
28642   2012-12-28 13:00:00
28583   2012-12-28 14:00:00
28800   2012-12-29 09:00:00
28751   2012-12-29 10:00:00
28670   2012-12-29 11:00:00
28621   2012-12-29 12:00:00
28599   2012-12-29 13:00:00
28278   2012-12-29 14:00:00 
```

如何获得**每一天的第一个最后一个值**之间的**差异**？

 **我想要这样的结果：

```
428 2012-12-28
522 2012-12-29 
```

我试过这个

```
SELECT (MAX(volume) - MIN(volume)),DATE_FORMAT(FROM_UNIXTIME(tstamp), '%Y-%m-%d') date FROM tank
GROUP BY DATE_FORMAT(FROM_UNIXTIME(tstamp), '%Y-%m-%d')
ORDER BY tstamp 
```

但它不采取第一个和最后一个措施，而是最小和最大。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-15T14:42:13.207

使用子选择获取当天的最小和最大时间戳，然后将结果与原始表连接两次，一次用于最小值，一次用于最大值以获取卷。然后计算：-

```
SELECT Sub1.JustDate, (b.volume - a.volume) AS VolumeDifference
FROM (
SELECT DATE_FORMAT(FROM_UNIXTIME(tstamp), '%Y-%m-%d') AS JustDate, MIN(tstamp) AS MinTimeStamp, MAX(tstamp) AS MaxTimeStamp
FROM tank
GROUP BY JustDate) Sub1
INNER JOIN tank a ON Sub1.MinTimeStamp = a.tstamp
INNER JOIN tank b ON Sub1.MaxTimeStamp = b.tstamp 
```

这是假设它们是真正的 unix 时间戳，而不仅仅是 CCYYMMDD 日期，无法分辨哪个是最新的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2018-09-19T19:24:04.173

从 MySQL 8 开始，最佳方法将涉及使用[`FIRST_VALUE()`和`LAST_VALUE()`窗口函数](https://blog.jooq.org/2014/11/07/dont-miss-out-on-awesome-sql-power-with-first_value-last_value-lead-and-lag/)

```
SELECT DISTINCT
  first_value(volume) OVER w - last_value(volume) OVER w AS diff,
  CAST(tstamp AS DATE) AS date
FROM tank
WINDOW w AS (
  PARTITION BY CAST(tstamp AS DATE) 
  ORDER BY tstamp
  ROWS BETWEEN UNBOUNDED PRECEDING AND UNBOUNDED FOLLOWING
)
ORDER BY CAST(tstamp AS DATE) 
```

更多详细信息，请参阅手册：

*   [https://dev.mysql.com/doc/refman/8.0/en/window-function-descriptions.html#function_first-value](https://dev.mysql.com/doc/refman/8.0/en/window-function-descriptions.html#function_first-value)
*   [https://dev.mysql.com/doc/refman/8.0/en/window-function-descriptions.html#function_last-value](https://dev.mysql.com/doc/refman/8.0/en/window-function-descriptions.html#function_last-value)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-01-15T15:08:54.050

由于日期字符串是按字典顺序排序的，只需将两列加在一起，如下所示：

```
"2012-12-28 09:00:00_29011" 
```

在子选择中并在此生成的列上调用 min() 和 max()。然后你可以分开 _number 部分来得到你的第一个和最后一个数字。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-15T14:35:15.947

我试过这个postgres，它正在工作

```
select (maxvalue1-minalue1) as date, time from(
select min(id) as minalue1, max(id) as maxvalue1, time::Date from master_booking group by time::date
) data 
```

看看这个。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-15T14:35:41.660

在这种情况下，First 和 Last 是相对值，因为没有说明这些值中的哪一个：

```
29011   2012-12-28
28701   2012-12-28
28830   2012-12-28
28353   2012-12-28
28642   2012-12-28
28583   2012-12-28 
```

是第一个或最后一个。您可以将 auto_increment ID 添加到表中，以便您可以对其进行排序，或者您可以将日期更改为日期时间字段，以便您可以按日期时间进行排序。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-03-18T08:27:35.947

试试这个：

> SELECT ( max(volume) keep(dense_rank last order by to_char(tstamp,'YYYY-MM-DD')) - min(volume) keep(dense_rank last order by to_char(tstamp,'YYYY-MM-DD')) )差异，to_char(tstamp,'YYYY-MM-DD') 来自罐的日期 GROUP BY to_char(tstamp,'YYYY-MM-DD') ORDER BY to_char(tstamp,'YYYY-MM-DD')**

# c++ - 无法使用 Xerces-C++ 解析 XML

> ID：15434937
> 
> 赞同：1
> 
> 时间：2013-03-15T14:28:19.903
> 
> 标签：c++, xml, parsing, xerces

我正在尝试使用 Xerces-C++ 解析 XML 文档。我只是希望能够通过它的 id 搜索一个元素。我已经编写了以下代码，但它不起作用。...

```
try {
        XMLPlatformUtils::Initialize();
    }
    catch(XMLException& e) {
        char* message = XMLString::transcode( e.getMessage() );
        cout << "XML toolkit initialization error: " << message << endl;
        XMLString::release( &message );
    }

    XMLCh tempStr[100];
    XMLString::transcode("LS", tempStr, 99);
    DOMImplementation *impl = DOMImplementationRegistry::getDOMImplementation(tempStr);
    DOMLSParser* parser = ((DOMImplementationLS*)impl)->createLSParser(DOMImplementationLS::MODE_SYNCHRONOUS, 0);

    char *filename = "C:\\odx1.xml";

    xercesc::DOMDocument *doc = 0;

    try {
        doc = parser->parseURI(filename);
        DOMElement *element = doc->getElementById(XMLString::transcode("test"));
        if(element != NULL) cout << "element found";
        cout << "DONE";
    }
    catch (const XMLException& toCatch) {
        char* message = XMLString::transcode(toCatch.getMessage());
        cout << "Exception message is: \n"
                << message << "\n";
        XMLString::release(&message);
        return;
    }
    catch (const DOMException& toCatch) {
        char* message = XMLString::transcode(toCatch.msg);
        cout << "Exception message is: \n"
                << message << "\n";
        XMLString::release(&message);
        return;
    }
    catch (...) {
        cout << "Unexpected Exception \n" ;
        return ;
    }

    parser->release();
    XMLPlatformUtils::Terminate();
}
... 
```

XML 是：

```
<ODX MODEL-VERSION="2.2.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="odx.xsd">
  <DIAG-LAYER-CONTAINER ID="test">
    test done
  </DIAG-LAYER-CONTAINER>
</ODX> 
```

我希望它打印“找到元素”，但程序正确终止而不打印“找到元素”。

无论如何...在与 XML 文档关联的 XSD 文件中，我正在搜索的元素有`<xsd:attribute name="ID" type="xsd:ID" use="required"/>` 所以我希望 getElementById 返回该元素。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-15T15:01:19.287

请看看[这个](http://xerces.apache.org/xerces-c/apiDocs-2/classDOMDocument.html#fb3e89ba1247d689c4570f40003ea5db)

> 返回 ID 由 elementId 给出的 DOMElement。如果不存在这样的元素，则返回 null。如果多个元素具有此 ID，则不定义行为。DOM 实现必须具有说明哪些属性属于 ID 类型的信息。除非如此定义，否则名为“ID”的属性不属于 ID 类型。不知道属性是否属于 ID 类型的实现预计会返回 null。

也许你可以通过其他方式获得元素？作为标签名称？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-22T16:08:43.023

解决方案是：

```
XMLCh tempStr[100];
    XMLString::transcode("LS", tempStr, 99);
    DOMImplementation *impl = DOMImplementationRegistry::getDOMImplementation(tempStr);
    DOMLSParser* parser = ((DOMImplementationLS*)impl)->createLSParser(DOMImplementationLS::MODE_SYNCHRONOUS, 0);
    DOMConfiguration* conf = parser->getDomConfig ();
    conf->setParameter(XMLUni::fgXercesSchema, true);
    char *filename = "C:\\odx1.xml";

    xercesc::DOMDocument *doc = 0;

    try {
        doc = parser->parseURI(filename);
        DOMElement *element = doc->getElementById(XMLString::transcode("test"));
        if(element != NULL) cout << "element found";
        cout << "DONE";
    } 
```

# ruby-on-rails - rails 3 console --sandbox 使用什么数据库？

> ID：15434943
> 
> 赞同：6
> 
> 时间：2013-03-15T14:28:40.107
> 
> 标签：ruby-on-rails, console, ruby-on-rails-3.2

当我运行“rails console --sandbox”时，我无法在我的数据库中看到插入。当我关闭该选项时，我可以很好地看到我的开发数据库中的数据。控制台中的一切似乎都一样。我正在使用 Hartl 的 rails 教程中设置的 postgreSQL。我查看了每个数据库，Development，Test，Postgres。但找不到我使用控制台创建的数据。当我使用bundel时，我尝试使用和不使用“bundle exec”

这是我的database.yml：

```
development:
  adapter: postgresql
  encoding: unicode
  database: sample_app_development
  pool: 5
  timeout: 5000
  username: user
  password:

test:
  adapter: postgresql
  encoding: unicode
  database: sample_app_test
  pool: 5
  timeout: 5000
  username: user
  password: 
```

我想这并不重要，但我只是很好奇这里的幕后发生了什么。

谢谢，马克

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-16T00:56:04.407

由于控制台在沙盒模式下充当一项大事务，因此您只能通过控制台查看您所做的插入。

如果您通过控制台以外的任何其他方法连接到您的数据库，那么它将使用不同的连接，并且控制台正在执行的操作将从该连接中隐藏，因为它们尚未提交。

当连接使用事务与数据库通信时，其他数据库连接在提交之前无法看到它所做的任何更改。与事务的连接（在本例中为沙盒控制台）是唯一可以看到它在回滚之前对数据库所做的更改的连接。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-15T14:31:44.463

`--sandbox`使用该选项，您将永远不会看到数据库中保存的任何内容。当您退出控制台时，使用此模式所做的任何更改都将恢复。

当您使用此选项启动控制台时，您可以阅读：**您所做的任何修改都将在退出时回滚**

**更多信息**

如果你再试一次，你会`SAVEPOINT active_record_1`在插入之前看到，在插入之后你会看到`RELEASE SAVEPOINT active_record_1`

阅读这两个链接，您将更好地了解正在发生的事情。 [http://www.postgresql.org/docs/8.1/static/sql-savepoint.html](http://www.postgresql.org/docs/8.1/static/sql-savepoint.html) [http://www.postgresql.org/docs/9.1/static/sql-release-savepoint.html](http://www.postgresql.org/docs/9.1/static/sql-release-savepoint.html)

**更多信息 2** =)

正如您在这两个链接上看到的那样，PostgreSQL 创建一个`SAVEPOINT`，保存对象，然后`RELEASE SAVEPOINT`. 它不会永久保存该数据，这不是`--sandbox`使用方式（IMO）。数据被保存，然后立即“释放”。它用于测试目的，只是检查您的模型、验证等之间的关系是否正常。

# python - 在 HTML 中显示 Python 值

> ID：15434945
> 
> 赞同：3
> 
> 时间：2013-03-15T14:28:45.783
> 
> 标签：python, html, google-app-engine

如何在 html 中显示 python 变量的值（在这种情况下，它是我的 Entity 类的键）？

```
from google.appengine.ext import db

class Entity(db.Expando):
    pass

e = Entity()    
e.put()         # id is assigned
k = e.key()     # key is complete
id = k.id()     # system assigned id

html='''
<html>
    <head></head>
    <body>
        <label>Key: %(k) </label>
        <br>            
    </body>
</html>
''' 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-15T14:53:47.110

```
from google.appengine.ext import db
import cgi

class Entity(db.Expando):
    pass

e = Entity()    
e.put()         # id is assigned
k = e.key()     # key is complete
id = k.id()     # system assigned id

html="""
<html>
    <head></head>
    <body>
        <label>Key: %s </label>
        <br>            
    </body>
</html>""" % (cgi.escape(k)) 
```

我会认真建议您使用模板，尽管它会让您的生活更轻松。

使用模板，您的解决方案将是这样的：

```
class Entity(db.Expando):
pass

e = Entity()    
e.put()         # id is assigned
k = e.key()     # key is complete
id = k.id()     # system assigned id

template = jinja_environment.get_template('templates/myTemplate')
self.response.write(template.render({'key_val':k})) 
```

Mytemplate.html 文件看起来像：

```
 <html>
   <head></head>
    <body>
     <label>{{key_val}}</label>
     <br>            
    </body>
 </html> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-15T14:46:11.743

我对google app engine了解不多，但是在Python中，有两种方式：

```
html='''
<html>
    <head></head>
    <body>
        <label>Key: %(k)s </label>
        <br>            
    </body>
</html>
''' % locals() # Substitude %(k)s for your variable k 
```

第二：

```
html='''
<html>
    <head></head>
    <body>
        <label>Key: {0[k]} </label>
        <br>            
    </body>
</html>
'''.format(locals()) 
```

实际上，还有第三种方式，我更喜欢它，因为它是明确的：

```
html='''
<html>
    <head></head>
    <body>
        <label>Key: {0} </label>
        <br>            
    </body>
</html>
'''.format(k) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-15T15:03:39.867

您的直接输出可能是：

```
<label>Key: {{k}} </label> 
```

首先看一个基本的django模板

[开始使用模板](https://developers.google.com/appengine/docs/python/gettingstarted/templates)

然后可能看看jinja2

[jinja2 模板](https://stackoverflow.com/questions/2365774/jinja2-in-google-app-engine)

# java - matlab中大小的java表示是什么

> ID：15434948
> 
> 赞同：0
> 
> 时间：2013-03-15T14:28:48.867
> 
> 标签：java, arrays, matlab

这是 Matlab 中定义的尺寸函数，如文档中所示：

```
m = size(X,dim) returns the size of the dimension of X specified by scalar dim. 
```

1）鉴于 X 是 java 中的单个数组，我将如何使用 Java 复制此方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T15:59:42.283

Matlab 只是将矩阵和 n 维数据线性存储在一个数组中。每个维度的大小与数组一起保存，因此当您进行非线性索引时，Matlab 知道要返回哪个元素（例如`A(3,5)`，对于 5x5 矩阵，Matlab 知道它应该返回的元素`A(23)`是`3+(5-1)*5`）。

因此，在 java 中，如果数组具有 size `N1xN2x...xNN`，并且您正在寻找 element: `(X1,X2,...,XN)`，则应该在数组中找到具有 position:的元素`X1+(X2-1)*N1+(X3-1)*N1*N2+ ... +(XN-1)*NN-1*..*N1`...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T14:31:49.237

如果你只想要数组的大小（任何维度），你有一个属性`Array.length`。

来自[**JLS**](http://docs.oracle.com/javase/specs/jls/se7/html/jls-10.html#jls-10.7)：

> 公共最终字段长度，其中包含数组的组件数。长度可以是正数或零。

例如：

```
int[] arr = new int[10];
int length = arr.length; //would obtain 10 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-15T14:32:55.917

Java 中的数组只有一维：元素的数量。您只需使用属性即可访问它`Array.length`。对于更复杂的容器（例如`ArrayList`），您通常可以使用成员函数`size()`。

```
int[] array = new int[5];
int arrayLength = array.length; //arrayLength == 5

ArrayList<int> arrayList = new ArrayList();
arrayList.add(1);
arrayList.add(2);
int arrayListLength = arrayLis.size(); //arrayListLength == 2 
```

# javascript - 使用 jQuery/javascript 自动居中大于窗口的 div

> ID：15434951
> 
> 赞同：0
> 
> 时间：2013-03-15T14:29:00.713
> 
> 标签：javascript, jquery, html, centering

我在网站上制作宽度为 1920 像素的 div 自动居中时遇到了一些麻烦。现在我一直在使用这个 jQuery 代码在页面打开时自动将 div 居中：

```
<script type="text/javascript">
$(window).load(function() {
    $('#slider').nivoSlider();

    var extra= 1920 - $(window).width(); 
    var extraleftside= extra/2;
    $("div#scroller").css("left", "-" + extraleftside + "px");
});
</script> 
```

但是那个代码只有在网站刷新时才会调整，有没有可能让它实时做到呢？

如果你想看到我想要的效果，和本站的滚动背景一样：http: [//www.apps.no](http://www.apps.no)

LeGEC 很好地回答了这个问题，这段代码成功了：

```
 <script type="text/javascript">
$(window).load(function() {
    $('#slider').nivoSlider();

    var extra= 1920 - $(window).width(); 
    var extraleftside= extra/2;
    $("div#scroller").css("left", "-" + extraleftside + "px");
}

);

$(window).bind("resize", resizeWindow);
function resizeWindow( e ) {
    var extra= 1920 - $(window).width(); 
    var extraleftside= extra/2;
    $("div#scroller").css("left", "-" + extraleftside + "px");
}
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T14:35:34.373

你的意思是在[resize](http://api.jquery.com/resize/)上重新计算它？

```
function doResize(){
    var extra= 1920 - $(window).width(); 
    var extraleftside= extra/2;
    $("div#scroller").css("left", "-" + extraleftside + "px");
}

$(window).load(function(){
    // maybe the slider should also be updated on resize...
    $('#slider').nivoSlider();

    doResize();
});

$(function(){
    $(window).resize(doResize);
}); 
```

# javascript - Javascript 显示/隐藏 div 需要两次点击

> ID：15434953
> 
> 赞同：1
> 
> 时间：2013-03-15T14:29:16.807
> 
> 标签：javascript, css, html

我有代码可以根据单击箭头来显示/隐藏两个 div。但是，第二个 div 在隐藏之前需要单击两次，并且箭头不会按预期更改。顶部 div 完美运行。请问有什么关于我做错的建议吗？

**编辑**- 感谢两位在箭头中指出我的命名错误的海报。但是，加载页面后，第二个 div 仍需要单击两次才能切换。

**HTML**

```
<div id="start_conditions_arrow" class="arrow_down" onclick="toggleDiv('start_conditions')"></div>
<h2>Starting Conditions</h2>

<div id="start_conditions">
    <%= render :partial => 'start_conditions', :object => @page.start_conditions %>
</div>

<div id="probability_arrow" class="arrow_right" onclick="toggleDiv('probability_inputs')"></div>
<h2>Probability Inputs</h2>

<div id="probability_inputs">
    <%= render :partial => 'probability_inputs', :object => @page.probability_inputs %>
</div> 
```

**Javascript**

```
var toggleDiv = function(id){
var tag = document.getElementById(id).style;
    if(tag.display == 'none'){
        document.getElementById(id).style.display='block';
        document.getElementById(id + '_arrow').className='arrow_down';
    } else {            
        document.getElementById(id).style.display='none';
        document.getElementById(id + '_arrow').className='arrow_right';
    }
}; 
```

**CSS**

```
.arrow_down, .arrow_right {
    width: 0; 
    height: 0;
    margin: 12px 12px 0 0;
    float: left;
    cursor: pointer;
}

.arrow_down {
    border-left: 10px solid transparent;
    border-right: 10px solid transparent;
    border-top: 18px solid #d5d5d5;
}

.arrow_right {
    border-top: 10px solid transparent;
    border-bottom: 10px solid transparent;
    border-left: 18px solid #d5d5d5;
}

#probability_inputs {
    display: none;
}

#start_conditions {
    display: none;
} 
```

这是一个包含上述内容的 Codepen：[https ://codepen.io/anon/pen/yXozYJ](https://codepen.io/anon/pen/yXozYJ)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-15T14:31:51.600

第二个箭头元素应该有`probability_inputs_arrow`as id 而不是`probability_arrow`，因为你在函数 as 中构建它的 id`id + '_arrow'`并且你 pass `'probability_inputs'`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-06-23T16:58:18.067

我知道我回答这个问题有点晚了，但我有一个解决方案。有两个问题需要解决，它们如下：

*   如 PSR 的回答中所述，最后一个 ID`div`不正确。
*   在方法中检查元素的样式属性`toggleDiv`并不能说明页面加载时缺少样式属性。

关于第一个问题，ID 应为`probability_inputs_arrow`，这解决了箭头在切换时未更新的问题。但是，第二个问题需要更多解释......

页面加载后，提供的 CSS 将应用于具有 ID`probability_inputs`和的元素，并`start_conditions`为它们提供显示值 none。单击任一箭头后，您将检索目标元素的样式属性，并检查*页面加载时显示的显示属性为空*。这就是为什么它需要两次单击才能实现所需行为的原因，因为第一次单击实际上只是在 else 语句中设置该值。

> 这是包含修复程序的更新 Codepen 的链接：[https ://codepen.io/anon/pen/oweELy](https://codepen.io/anon/pen/oweELy)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-15T14:33:39.943

实际上你在这里遇到错误

![在此处输入图像描述](../Images/c2a3e8987b153862e6a1825158342ebc.png)

第二个元素需要有`probability_inputs_arrow`as id 而不是`probability_arrow`，

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-01-05T15:00:50.130

style.display 在页面第一次加载时默认设置为“”，因此它最终在 else 块中，然后需要第二次单击才能转到 if 块。只需将此添加到您的 else if 语句中。

```
<script>  
  var x = document.getElementById("myDIV"); 
    if (x.style.display == "none") 

     {
   x.style.display = "block";
  }

    else if((x.style.display == 'null')||(x.style.display == ""))
  {
    x.style.display = "block";
  }
  else
  {
    x.style.display = "none";
  }
</script> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-10-19T20:19:30.010

我遇到了这个问题，这是由于 DIV 的默认状态。即使你设置了DIV类的值设置为display:none，也会出现一些浏览器不接受这个状态，因此是未知的。

为了解决这个问题，使用您自己的代码，添加另一个默认条件：

```
 var toggleDiv = function(id){
 var tag = document.getElementById(id).style;
     if(tag.display == 'none')
       {
        document.getElementById(id).style.display='block';
        document.getElementById(id + '_arrow').className='arrow_down';
       } 
     else  if(tag.display == 'block') 
      {            
       document.getElementById(id).style.display='none';
       document.getElementById(id + '_arrow').className='arrow_right';
      }
     else
       {
        document.getElementById(id).style.display='block';
        document.getElementById(id + '_arrow').className='arrow_down';
       } 
```

}; `

# c++ - “x(y) = z(w)”在 C++ 中是什么意思？

> ID：15434954
> 
> 赞同：0
> 
> 时间：2013-03-15T14:29:20.887
> 
> 标签：c++, syntax

有人可以帮我理解以下语法：

```
aaa<bbb> object_name;
func(object_name, object_name2);
ccc<ddd>(object_name) = func2(arg1, arg2); 
```

我知道首先我们声明了一个新的`aaa<bbb>`类对象。然后我们使用这个对象和另一个对象一起调用一个函数，这可能会改变`object_name`. 我很难理解第三行。`=`特别是标志左侧的结构。为什么`object_name`在括号里？对我来说，看起来我们调用了一个函数。`=`但是我们可以在符号的左侧和右侧调用一个函数吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-15T14:35:08.317

函数调用可以返回一个*左值*，这是一种可以明智地出现在赋值表达式左侧的类型。在这种情况下，通常的左值类别是*参考*；例如`vector<T>::front`返回类型的引用`T &`：

```
std::vector<int> v{0, 1, 2, 3};
v.front() = 99;
// v is now {99, 1, 2, 3} 
```

**仅限高级用法**：函数也可以使用重载的赋值运算符返回对象类型的纯右值，以便赋值表达式具有一些适当的效果*；*但是，标准库不使用它，除非在少数情况下，例如`ostream_iterator`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T14:39:55.723

可能返回的值是一个左值，您实际上可以为其分配一个值。它可能是这样的：

```
int x = 5;

template <typename T>
int& foo() { return x; }

void test()
{
  foo<long>() = 10;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-15T14:35:33.920

我认为第三个的左侧实例化了一个带有参数 *object_name* 的模板函数。可以将值分配给*func2()*可能是由于*operator=*的某些重载？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-15T14:36:25.433

`ccc<ddd>`可能是一个函数（函数模板的特化）。它可以返回一个引用，在这种情况下，引用的对象将被修改。或者它可以返回一个“代理”对象，它有一个`operator=`可以做一些有用的事情。

不太可能，`ccc<ddd>`可能是类类型（类模板的特化）。但要让这意味着任何有用的东西，它`operator=`必须有一些副作用，而不是临时`ccc<ddd>`对象，这很奇怪。

# eclipse - 无法在eclipse中生成javadoc

> ID：15434955
> 
> 赞同：1
> 
> 时间：2013-03-15T14:29:23.967
> 
> 标签：eclipse, javadoc

这真的应该是一个愚蠢的问题，但我试图在我的 Android eclipse 项目中生成 javadoc，但我遇到了错误。我在 Mac 上，javadoc 命令设置为

```
 /System/Library/Java/JavaVirtualMachines/1.6.0.jdk/Contents/Home/bin/javadoc 
```

但由于某种原因，它似乎使用的是 1.3

```
 annotations are not supported in -source 1.3
 (use -source 5 or higher to enable annotations)
        @Override 
```

有没有其他人遇到过这个？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-09-26T23:34:54.233

在 Eclipse（Kepler 版本）中，转到 Project -> Generate Javadoc...，然后在第二个“Next”之后，您将看到一个选择“JRE source compatibility”的选项。在那里，您选择了 1.3（您必须选择 1.5 或更高版本）。

# c++ - 有没有比 SHGetPathFromIDList() 更好的方法将 itemidlist 转换为路径字符串？

> ID：15434963
> 
> 赞同：4
> 
> 时间：2013-03-15T14:29:51.090
> 
> 标签：c++, winapi, mfc, visual-studio-2012, windows-shell

微软提供了一个类`CMFCShellTreeCtrl`用于浏览 shell 命名空间层次结构的类（本质上与资源管理器窗口的左侧相同）。

此控件用于`SHGetPathFromIDList()`从项目 ID 列表转到当前路径（选定项目）的字符串表示形式。

即使所涉及的对象不在“文件系统上”，也可以使用最终匹配其内部 shell 层次结构的任何字符串设置其当前项 - 例如`\\WOLF`，将选择 Networking 节点下的机器 WOLF（假设有一台名为 WOLF 的机器在您的局域网上）。

但是，当您尝试从控件获取这样的路径时，接口会以空白字符串响应，因为它依赖于`SHGetPathFromIDList()`它不会解析不在文件系统上的 shell 项。

有谁知道一个更好的实现，`ImprovedSHGetPathFromIDList()`它可以与文件系统上没有的 ITEMIDLIST（例如 \WOLF）一起使用？

* * *

我可以为 shell 树控件本身提供我自己的版本`SelectPath()`和`GetItemPath()`，实现我自己版本的 ITEMIDLIST <-> 字符串逻辑，以便两者完全对称（即我希望 GetItemPath() 返回使用的相同路径以前成功 SelectPath() - 或树视图中的任何节点）。

但是，这可以在其他地方使用，作为路径名和 ITEMIDLIST 之间的一般改进的往返（毕竟，UNC 名称是表示字段系统路径的一种相当常见的方式！）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T15:51:11.783

AFAIK，非文件系统项目没有预制功能。您必须遍历每个项目的`ITEMIDLIST`using ，指定or标志，以手动构建路径字符串。`IShellFolder::GetDisplayNameOf()``SIGDN_PARENTRELATIVEPARSING``SIGDN_DESKTOPABSOLUTEPARSING`

# xcode - 在标签栏控制器中的视图控制器之间切换时停止运行代码

> ID：15434964
> 
> 赞同：0
> 
> 时间：2013-03-15T14:29:57.137
> 
> 标签：xcode, audio, view

我有一个标签栏控制器和 2 个视图控制器连接到它。在它们中的每一个上都有一个代码可以自动滚动浏览一些图像并为每个图像播放不同的声音。

问题是当我在 2 个视图控制器之间导航时，声音和视觉动画不会在我要离开的视图控制器中停止。

如何停止我要离开的视图控制器中的所有内容？

```
- (void)scrollingTimer {
// access the scroll view with the tag
UIScrollView *scrMain = (UIScrollView*) [self.view viewWithTag:1];
// same way, access pagecontroll access
UIPageControl *pgCtr = (UIPageControl*) [self.view viewWithTag:12];
// get the current offset ( which page is being displayed )
CGFloat contentOffset = scrMain.contentOffset.y;
// calculate next page to display
int nextPage = (int)(contentOffset/scrMain.frame.size.height) + 1 ;
// if page is not 10, display it
if( nextPage!=10 )  {
    if (player.isPlaying == YES)
        [player stop];

    NSString *path;
    NSError *error;
    path = [[NSBundle mainBundle] pathForResource:[NSString stringWithFormat:@"cif%02i",nextPage+1] ofType:@"m4a"];
    if ([[NSFileManager defaultManager] fileExistsAtPath:path])
    {
        player = [[AVAudioPlayer alloc] initWithContentsOfURL:[NSURL fileURLWithPath:path] error:&error];
        player.volume = 0.5f;
        [player prepareToPlay];
        [player setNumberOfLoops:0];
        [player play];
    }

    [scrMain scrollRectToVisible:CGRectMake(0, nextPage*scrMain.frame.size.height, scrMain.frame.size.width, scrMain.frame.size.height) animated:YES];
    pgCtr.currentPage=nextPage;
    // else start sliding form 1 :)

} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-15T15:04:28.243

虽然 a`UITabBarController`管理它管理的视图控制器的生命周期，但您无法获得关于它们何时创建和销毁的任何具体保证——我怀疑它因版本而异。

`UITabBarController`提供一个委托接口——`UITabBarControllerDelegate`特别是

```
- (void)tabBarController:(UITabBarController *)tabBarController
  didSelectViewController:(UIViewController *)viewController` 
```

方法 - 为此目的。

`UITabBarController`最简单的方法是创建一个也实现委托的子类。

TabBarController.h

```
#import <UIKit/UIKit.h>

@interface TabBarController : UITabBarController<UITabBarControllerDelegate>

@end 
```

TabBarController.m

```
@implementation TabBarController

- (void)viewDidLoad
{
     // other initialisation here
     self.delegate = self;   
}

- (void)tabBarController:(UITabBarController *)tabBarController
 didSelectViewController:(UIViewController *)viewController
{
     if (viewController != myViewController)
     {
          // tell it to stop doing things
     }
}
@end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T20:18:05.420

在我的应用程序中，我暂停了`viewWillDisappear`. 为了让它在我返回视图时播放，我检查了`viewWillAppear`.

# sql - 我的 sql 触发器中的 if 语句中的多个条件

> ID：15434967
> 
> 赞同：1
> 
> 时间：2013-03-15T14:30:07.393
> 
> 标签：sql, database, stored-procedures, database-connection

我试图在 IF 语句中给出两个条件......下面的两个触发器没有显示任何语法错误，但它们也不起作用。

触发器：1：

如果存在则删除触发器`forumpostTrigger`；

```
CREATE DEFINER = `livecomm`@`localhost` TRIGGER `forumpostTrigger` AFTER INSERT ON `forum_post`
FOR EACH
ROW BEGIN if( (

SELECT count( * )
FROM forum_post
WHERE uid = new.uid
AND parent_id IS NOT NULL
AND is_answer_accepted ) >=30
)
THEN if( (

SELECT sum( vote_count )
FROM forum_post
WHERE uid = new.uid
AND parent_id IS NOT NULL
AND is_answer_accepted ) >=15
)
THEN
INSERT INTO user_badges( uid, bedge_id, is_active )
VALUES (
new.uid, '10', '1'
);

DELETE FROM user_badges WHERE uid = new.uid AND badge_id =9;

END IF ;

END IF ;

END 
```

触发器：2：

```
DROP TRIGGER IF EXISTS `forumpostTrigger` ;

CREATE DEFINER = `livecomm`@`localhost` TRIGGER `forumpostTrigger` AFTER INSERT ON `forum_post`
FOR EACH
ROW BEGIN if( (
(

SELECT count( * )
FROM forum_post
WHERE uid = new.uid
AND parent_id IS NOT NULL
AND is_answer_accepted ) >=30
) && (
(

SELECT sum( vote_count )
FROM forum_post
WHERE uid = new.uid
AND parent_id IS NOT NULL
AND is_answer_accepted
) >=15
)
)
THEN
INSERT INTO user_badges( uid, bedge_id, is_active )
VALUES (
new.uid, '10', '1'
);

DELETE FROM user_badges WHERE uid = new.uid AND badge_id =9;

END IF ;

END 
```

如何为 if 语句提供多个条件，例如： `if ((condition) && (condition))`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T15:13:39.757

```
DROP TRIGGER IF EXISTS `forumpostTrigger` ;

CREATE DEFINER = `livecomm`@`localhost` TRIGGER `forumpostTrigger` AFTER INSERT ON `forum_post`
FOR EACH
ROW BEGIN if( (

SELECT count( * )
FROM forum_post
WHERE uid = new.uid
AND parent_id IS NOT NULL
AND is_answer_accepted ) =3
)
THEN
INSERT INTO user_badges( uid, badge_id, is_active )
VALUES (
new.uid, '9', '1'
);

END IF ;

if( (
SELECT count( * )
FROM forum_post
WHERE uid = new.uid
AND parent_id IS NOT NULL
AND is_answer_accepted ) =30
)
THEN if( (

SELECT sum( vote_count )
FROM forum_post
WHERE uid = new.uid
AND parent_id IS NOT NULL
AND is_answer_accepted ) >=15
)
THEN
INSERT INTO user_badges( uid, badge_id, is_active )
VALUES (
new.uid, '10', '1'
);

DELETE FROM user_badges WHERE uid = new.uid AND badge_id =9;

END IF ;

END IF ;

END 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T14:36:31.890

您可以尝试使用此语法

```
IF condition1
IF condition2
BEGIN
..
END 
```

# jquery - 如何使用 jQuery 找出点击的 div 的数字（第 5、第 11、第 15 等）？

> ID：15434969
> 
> 赞同：2
> 
> 时间：2013-03-15T14:30:12.610
> 
> 标签：jquery

假设我在一个 div 中有 10 个图像。如果我点击第 6 个，我怎样才能得到数字 6 的 int 值（或者图像的顺序是什么）？可能吗？我需要它导航到下一张图片使用`.get(currentindex+1)`

请不要建议我使用画廊插件或任何东西，我需要这样做^^

一个有用的答案是`var currentindex = >something useful<`

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-15T14:31:40.767

```
$("div img").on("click", function (e) {
    console.log($(this).index());
}); 
```

[http://api.jquery.com/index/](http://api.jquery.com/index/)

[**演示。**](http://jsfiddle.net/UE7AC/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T14:34:32.900

使用 jQuery，使用`.index()`

演示：http: [//jsfiddle.net/R8Zra/](http://jsfiddle.net/R8Zra/)

演示代码：

```
<div>1</div>
<div>2</div>
<div>3</div>

$('div').click(function(){
   alert($(this).index()+1)
}) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-15T14:36:21.180

如果您`<div/>`包含除`<img/>`s 之外的其他元素，请确保将`'img'`选择器传递给`index()`函数，否则编号将关闭。

```
$('img').click(function(){
    var currentindex = $(this).index('img');
}); 
```

[小提琴](http://jsfiddle.net/5j9C8/)

# c - 如何隐藏在多个文件中可见的全局变量？

> ID：15434971
> 
> 赞同：9
> 
> 时间：2013-03-15T14:30:34.777
> 
> 标签：c, linux, global-variables, shared-libraries, private

我正在编写一个 C（共享）库。它最初是一个单一的翻译单元，我可以在其中定义几个`static`全局变量，对外部模块隐藏。

现在库已经增长，我想将模块分成几个较小的源文件。问题是现在我对提到的全局变量有两个选择：

1.  在每个源文件中都有私有副本，并通过函数调用以某种方式同步它们的值——这将很快变得非常难看。

2.  删除`static`定义，因此变量在所有翻译单元之间共享使用`extern`- 但是现在链接到库的应用程序代码可以访问这些全局变量，如果在那里进行了所需的声明。

那么，是否有一种巧妙的方法可以让私有全局变量在多个特定翻译单元之间共享？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-15T14:42:22.137

您需要 GCC 的[可见性属性](http://gcc.gnu.org/onlinedocs/gcc/Function-Attributes.html#Function-Attributes)扩展。

实际上，类似于：

```
 #define MODULE_VISIBILITY  __attribute__ ((visibility ("hidden")))
 #define PUBLIC_VISIBILITY  __attribute__ ((visibility ("default"))) 
```

^(（您可能想要`#ifdef`上述宏，使用一些配置技巧 à la`autoconf`和其他*自动工具*；在其他系统上，您只会有空定义，如`#define PUBLIC_VISIBILITY /*empty*/`etc...）)

然后，声明一个变量：

```
int module_var  MODULE_VISIBILITY; 
```

或函数

```
void module_function (int) MODULE_VISIBILITY; 
```

然后您可以在共享库内部使用`module_var`或调用，但不能在外部使用。`module_function`

另请参见 GCC 的[-fvisibility](http://gcc.gnu.org/onlinedocs/gcc/Code-Gen-Options.html)代码生成选项。

顺便说一句，您也可以像往常一样编译`-Dsomeglobal=alongname3419a6`和使用整个库；`someglobal`要真正找到它，您的用户需要将相同的预处理器定义传递给编译器，并且您可以使名称`alongname3419a6`随机且不太可能，以使冲突不太可能发生。

* * *

PS。这种可见性是**GCC 特有的**（并且可能**是 ELF 共享库**，例如 Linux 上的那些）。如果没有 GCC 或共享库之外，它就无法工作......所以它是非常特定于 Linux 的（即使其他一些系统，可能是带有 GCC 的 Solaris，也有它）。可能其他一些编译器（`clang`来自[LLVM](http://llvm.org/)）也可能支持*Linux*上的*共享库*（不是静态库）。实际上，真正的隐藏（对单个共享库的几个编译单元）主要由链接器完成（因为[ELF](http://en.wikipedia.org/wiki/Executable_&_Linkable_Format)共享库允许这样做）。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-15T14:51:45.177

最简单的（“老派”）解决方案是根本不在预期的公共标头中声明变量。

将您的库标题拆分为“header.h”和“header-internal.h”，并在后者中声明内部内容。

当然，您还应该注意保护您的库全局变量的名称，以免它与用户代码冲突；大概您已经有一个用于此目的的函数的前缀。

您还可以将变量包装在 a 中`struct`，以使其更清晰，因为那时只有一个实际符号是全局可见的。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-15T15:08:25.180

如果您真的想尽可能地隐藏信息，您可以使用伪装的结构来混淆事物。例如在头文件中，

```
struct data_s {
   void *v;
}; 
```

在您的来源中的某处：

```
struct data_s data;
struct gbs {
   // declare all your globals here
} gbss; 
```

接着：

`data.v = &gbss;`

然后，您可以通过以下方式访问所有全局变量：`((struct gbs *)data.v)->`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-08-15T12:25:31.397

我知道这不是您真正想要的，但是您可以将全局变量保留为静态并将它们分成多个源文件。

复制写入同一源文件中相应静态变量的函数，该源文件也声明为静态。

声明读取静态变量的函数，以便同一模块的外部源文件可以读取它的值。

在某种程度上使其不那么全球化。如果可能的话，将大文件分成小文件的最佳逻辑是根据数据做出决定。

如果无法做到这一点，那么您可以将所有全局变量作为静态变量放入一个源文件中，并通过函数从模块的其他源文件中访问它们，使其正式化，因此如果有人在至少你知道怎么做。但是，使用@unwind 的方法可能会更好。

# git - 如何使用自托管 git 服务器作为生产服务器？

> ID：15434972
> 
> 赞同：3
> 
> 时间：2013-03-15T14:30:37.150
> 
> 标签：git, githooks

我正在开发一个网站，并使用我自己的笔记本电脑作为开发服务器，同时使用我的在线服务器作为生产服务器。我正在使用 git 来管理我的项目。

我以前用过heroku，我认为简单地发布我的网站`git push heroku master`真的很酷，所以我打算自己建立一个。

所以，这就是我所做的，我在我的生产服务器上设置了 git（用 gitosis 来管理访问），在我的 git repo 上，我曾经`git remote add git@production:myrepo.git`为 git repo 添加远程。

问题是如何在生产服务器上获取代码？生产服务器作为 git 服务器，所以我只能获取 .git 文件夹，而不是真正的代码。我想到了一个技巧，就是`git clone --local myrepo.git myrepo`用来克隆生产服务器上的数据，在 myrepo.git 的 hooks/ 文件夹中，我将`post-receive`文件编辑如下：

```
#!/bin/sh
touch /tmp/do-we-got-here
cd /path/to/clone/myrepo
/usr/bin/git pull 
```

在我使用之后`git push production master`，`do-we-got-here`文件被创建，所以我可以告诉 post-receive 钩子正在工作，但该`git pull`部分不起作用，当我到达 myrepo 文件夹并使用`git pull`时，它仍然从 myrepo.git 中提取。

所以我想知道如何处理这个？我知道这是可能的，因为像 heroku 这样的托管网站正在运行！但问题是如何？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-15T14:50:18.653

我遇到了类似的问题，这对我有帮助。

```
#!/bin/sh
touch /tmp/do-we-got-here
cd /path/to/clone/myrepo
unset GIT_DIR
git pull 
```

运行 git hook 时，设置了 GIT_DIR。这意味着您的 pull 不会与您更改到的目录中的第二个存储库一起运行。

# visual-studio-lightswitch - Microsoft.LightSwitch.DataServiceOperationException：参数“名称”无效

> ID：15434973
> 
> 赞同：0
> 
> 时间：2013-03-15T14:30:39.007
> 
> 标签：visual-studio-lightswitch, lightswitch-2012

每当我将更改保存到我的屏幕时，就会出现此错误。我做的最后一件事是在 WCF RIA 服务中创建关系。我查看了所有异常信息，并尝试在调试器中单步执行我的代码，直到它被抛出之前，都没有结果。'name' 引用没有用，我评论了引用'name' 的每一段代码。它似乎是那些几乎没有告诉你这个问题的例外之一。

```
[Microsoft.LightSwitch.DataService][Application:Error][LightSwitchServiceApplication.WCF_RIA_ServiceData:SaveChanges] An exception has occurred:  Microsoft.LightSwitch.DataServiceOperationException: Invalid argument 'name' ---> System.ArgumentException: Invalid argument 'name'
  at Microsoft.LightSwitch.Platform.Utilities.Internal.Parameter.ThrowArgumentException(String parameterName)
  at Microsoft.LightSwitch.Details.Framework.Base.DetailsSet`3.GetItemCore(String name)
  at Microsoft.LightSwitch.Details.Framework.Base.DetailsSet`1.get_Item(String name)
  at Microsoft.LightSwitch.ServerGenerated.Implementation.DataProvider.RiaDataProvider.HandleErrors(ChangeSet changeSet, List`1 entityPairs)
  at Microsoft.LightSwitch.ServerGenerated.Implementation.DataProvider.RiaDataProvider.SubmitCore(IEnumerable`1 changes)
  at Microsoft.LightSwitch.ServerGenerated.Implementation.DataProvider.DataProvider.Submit(IEnumerable`1 changes)
  at Microsoft.LightSwitch.ServerGenerated.Implementation.DataServiceImplementation`1.PerformPersistCore(IEnumerable`1 eventsChangeSetItems)
  at Microsoft.LightSwitch.ServerGenerated.Implementation.DataServiceImplementation`1.<>c__DisplayClass46.<PerformPersist>b__45()
  at Microsoft.LightSwitch.Threading.DualDispatcherObject.Mutate(IDispatcher logicDispatcher, MutatorHost host, Action mutator)
  at Microsoft.LightSwitch.ServerGenerated.Implementation.DataServiceImplementation`1.PerformPersist(IEnumerable`1 eventsChangeSetItems)
  at Microsoft.LightSwitch.ServerGenerated.Implementation.DataServiceImplementation`1.Microsoft.LightSwitch.ServerGenerated.Implementation.IServerDataServiceImplementationCore.Submit()
  at Microsoft.LightSwitch.ServerGenerated.Implementation.DataService`1.<>c__DisplayClass12.<Microsoft.LightSwitch.ServerGenerated.Implementation.IODataService.SaveChanges>b__10()
  at Microsoft.LightSwitch.ServerGenerated.Implementation.DataServiceImplementation`1.InvokeOperationCore[T](String operationName, Object[] args, Boolean invokedFromODataClient, Func`1 invokeOperation, Action catchCallback, Action`2 serializeCustomExceptionInfo)
  --- End of inner exception stack trace --- 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T14:30:39.007

如果您在 WCF RIA 服务类中使用可为空的属性，更新 LightSwitch 中的数据源，**然后**将其标记为`[Required]`在 RIA 服务中，则会出现此运行时错误。

必需强制LightSwitch 中*的一对多*（在我的情况下）关系，并且在 RIA 服务中使用可为空的类型将给出一个语法错误，即在可空类型（RIA 服务）与其不可为空的等价物（LightSwitch）之间没有隐式转换）。

*但是，如果您先*创建可空类型，LightSwitch 将创建*0 或 1 对多*的关系，然后当您将*Required*添加到 RIA 服务时，就会抛出这个模糊的运行时异常。

# ios - 使用单例创建基本样式助手类

> ID：15434975
> 
> 赞同：2
> 
> 时间：2013-03-15T14:30:48.200
> 
> 标签：ios, objective-c, singleton, uicolor

我是 Objective-c 的新手，我有一个架构或设计模式的问题。我正在构建一个 ios 应用程序，并且像大多数 ios 应用程序一样，它使用各种颜色、字体、图案等。也许我目前正在编写错误的代码，但我发现自己正在重写诸如颜色设置之类的东西。结果，更改颜色变成了在代码中查找所有颜色设置、重写它们等方面的练习。对我来说似乎有点低效。

例如，我在我的应用程序的多个地方使用了深红色。我倾向于相当频繁地编写 [UIColor colorWithRed...] 方法。但是，我很好奇创建一个返回我的自定义颜色（作为 UIColor）的单例是否是“模块化我的样式包”的合理方法。因此我可以写这样的东西

```
[label setTextColor:[[MyStyleSingletonClass sharedStyler] myDarkRed]]; 
```

因此，如果设计师突然想让 myDarkRed 变暗一点，我会更改一次，然后浏览应用程序就好了。显然，风格和 UX 不仅仅是颜色，但我很好奇这种方法是否有意义，或者我是否正在为将来的问题做好准备。或者也许这种能力已经存在于objective-c中，我没有抓住重点。提前致谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-15T14:36:26.527

我认为更好的方法是 UIColor 本身的一类方法。我经常为具有大量自定义颜色的项目编写颜色类别。

像这样的东西：

```
// UIColor+AppAdditions.h
@interface UIColor (AppAdditions)

+ (UIColor *)myDarkRed;

@end

// UIColor+AppAdditions.m

#import "UIColor+AppAdditions.h"

@implementation UIColor (AppAdditions)

+ (UIColor *)myDarkRed
{
    return [UIColor colorWithRed:0.1 green:0.0 blue:0.0 alpha:1.0];
}

@end 
```

这样你就不需要一个完整的 Singleton 并且它更便携，因为 Singleton 可以做其他事情。你可以像这样干净地访问你的颜色：

```
[label setTextColor:[UIColor myDarkRed]]; 
```

**笔记**

正如罗伯和保罗所提到的。最好适当地命名它们。我取了你的名字，但最好专门为它们命名，并遵循前缀和后缀等约定。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-15T14:53:02.697

为什么不使用`macro`？

在`YourHelperClass.h`

```
#define DARK_RED    [UIColor colorWithRed:0.1 green:0.0 blue:0.0 alpha:1.0] 
```

你可以像这样使用（不要忘记 import `YourHelperClass.h`）：

```
[label setTextColor:DARK_RED]; 
```

我觉得更好用`macro`

# php - GoMage LightCheckout 不起作用

> ID：15434981
> 
> 赞同：0
> 
> 时间：2013-03-15T14:31:06.400
> 
> 标签：php, magento, gomage

我们继承了安装了 GoMage LightCheckout 扩展 ( [http://www.gomage.com/extensions/gomage-lightcheckout.html](http://www.gomage.com/extensions/gomage-lightcheckout.html) ) 的基于 magento 的商店。由于某种原因，此扩展不起作用。换句话说，此扩展程序处于活动状态并已正确安装，但我们仍然看到默认结帐而不是 Gomage lightcheckout。

我发现如果使用 https/http、www 的域名，有些人报告 gomage 扩展存在问题。

缓存已被清除，编译已关闭。我们尝试重新安装扩展程序，但这对我们没有帮助。

# c# - 等待 ExecuteAsync() 结果

> ID：15434983
> 
> 赞同：2
> 
> 时间：2013-03-15T14:31:15.343
> 
> 标签：c#, asynchronous, windows-phone-8, restsharp

我的 RestSharp 实现存在以下问题。如何让我的应用程序`ExecuteAsync()`在继续之前等待响应？

我尝试了不同的解决方案：

首先（该方法不等待 ExecuteAsync 响应）：

```
public Task<Connection> Connect(string userId, string password)
    {
        var client = new RestClient(_baseUrl)
            {
                Authenticator = new SimpleAuthenticator("user", userId,
                    "password", password)
            };
        var tcs = new TaskCompletionSource<Connection>();
        var request = new RestRequest(AppResources.Authenticating);
        client.ExecuteAsync<Connection>(request, response =>
            {
                tcs.SetResult(new JsonDeserializer().
                     Deserialize<Connection>(response));
            });
        return tcs.Task;
    } 
```

所以我尝试了这个，但应用程序冻结了：

```
 public Task<Connection> Connect(string userId, string password)
    {
        EventWaitHandle executedCallBack = new AutoResetEvent(false);
        var client = new RestClient(_baseUrl)
            {
                Authenticator = new SimpleAuthenticator("user", userId, 
                     "password", password)
            };
        var tcs = new TaskCompletionSource<Connection>();
        var request = new RestRequest(AppResources.Authenticating);
        client.ExecuteAsync<Connection>(request, response =>
            {
                tcs.SetResult(new JsonDeserializer().
                          Deserialize<Connection>(response));
                executedCallBack.Set();
                });
        executedCallBack.WaitOne();
        return tcs.Task;
    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-15T20:31:31.520

我认为您错过了 Task 和 async/await 模式的要点。

您不会在此方法内等待，但因为您返回 a`Task<>`它允许调用者异步等待它，如果选择它。

调用者将是这样的：

```
 public async void ButtonClick(object sender, RoutedEventArgs args)
 {
     Connection result = await restClient.Connect(this.UserId.Text, this.Password.Text);

      //... do something with result
 } 
```

编译器知道如何制作这段代码，这与同步（阻塞）等价物非常相似，并将其转换为异步代码。

注意`async`and`await`关键字，并注意`Task<Connection>`已经转入`Connection`。

鉴于此：您的第一个代码段看起来不错。

当您引入另一种线程机制（即 semaphore `AutoResetEvent`）时，第二个可能会导致问题。此外，@HaspEmulator 是正确的——如果这是在 UI 线程上，这会导致 WP 应用程序死锁。

# html - 更改 CSS Cuffon 按钮

> ID：15434986
> 
> 赞同：0
> 
> 时间：2013-03-15T14:31:26.887
> 
> 标签：html, css

我的网页中有一个表单，它有一个 CSS 按钮，该按钮以我从未见过的方式嵌入，可能是与袖口相关的方法（？）

无论如何，我正在尝试将该按钮更改为我的按钮，但不知道如何将提交方法分配给它..

当前按钮：

```
<p><input type="submit" value="Send"/></p> 
```

[这页纸](http://www.tranceil.co.il/10kcontest/)

我应该如何添加一个 png 按钮并给它提交值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T14:35:00.153

```
<input type="image" value="Submit" src="yourImage.jpg"> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T14:35:26.777

```
<button name="xyz" value="something" type='submit'>
    <img src='mybutton.png' alt='' />
</button> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-15T14:55:48.980

尝试以下语法：

```
<input type="image" value="Submit" src="img/newbuttonsend-small.png"> 
```

文件路径/名称中不应有尖括号。

**使用带有图像的 INPUT 作为在表单中提交**

参考：[http ://www.w3.org/TR/html401/interact/forms.html#h-17.4](http://www.w3.org/TR/html401/interact/forms.html#h-17.4)

请参阅讨论的部分：

> **image**
> 创建一个图形提交按钮。src 属性的值指定将装饰按钮的图像的 URI。出于可访问性的原因，作者应通过 alt 属性为图像提供替代文本。

当您单击图像时，浏览器会回显指针位置的 xy 坐标，这在某些应用程序中可能很有用。

# android - 如何使用 ActionbarSherlock 在进度条中设置 onClick 事件？

> ID：15434994
> 
> 赞同：1
> 
> 时间：2013-03-15T14:31:44.750
> 
> 标签：android, onclick, progress-bar, actionbarsherlock

我使用`setSupportProgressBarIndeterminateVisibility(true)`来在 ActionbarSherlock 中显示进度条。如何为图像设置 onclick 事件？

谢谢。