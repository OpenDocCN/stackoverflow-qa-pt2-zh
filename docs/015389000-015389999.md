# StackOverflow 问答 15389000-15389999

# oracle11g - 减少表中的数据将有助于提高性能

> ID：15389000
> 
> 赞同：0
> 
> 时间：2013-03-13T15:06:05.823
> 
> 标签：oracle11g

以下查询由产品软件和产品内部执行。DBA 发现此查询正在使用更多的 DB CPU。我们无法调整，因为这是特定于产品的查询，有没有其他选择？考虑我们是否为表中的数据创建历史/存档表将利用以下使用 min 和 max 函数的查询。

```
SELECT MIN(minbkt),
   maxbkt,
   SUBSTRB(DUMP(MIN(val), 16, 0, 32), 1, 120) minval,
   SUBSTRB(DUMP(MAX(val), 16, 0, 32), 1, 120) maxval,
   SUM(rep) sumrep,
   SUM(repsq) sumrepsq,
   MAX(rep) maxrep,
   COUNT(*) bktndv,
   SUM(CASE
           WHEN rep = 1 THEN
            1
           ELSE
            0
       END) unqrep
FROM (SELECT val,
           MIN(bkt) minbkt,
           MAX(bkt) maxbkt,
           COUNT(val) rep,
           COUNT(val) * COUNT(val) repsq
      FROM (SELECT
            /*+ no_parallel(t) no_parallel_index(t) dbms_stats cursor_sharing_exact use_weak_name_resl dynamic_sampling(0) no_monitoring */
             "VERSION_LABEL" val,
             NTILE(75) OVER(ORDER BY NLSSORT("VERSION_LABEL", 'NLS_SORT = binary')) bkt
              FROM "User"."AUDITTRAIL" t
             WHERE "VERSION_LABEL" IS NOT NULL)
     GROUP BY val)
GROUP BY maxbkt
ORDER BY maxbkt 
```

# c# - 剑道网格标题或标题

> ID：15389002
> 
> 赞同：0
> 
> 时间：2013-03-13T15:06:07.557
> 
> 标签：c#, asp.net-mvc, kendo-ui

我看了一下这个[演示](http://demos.kendoui.com/web/grid/index.html)，网格上有一个名为“客户数据库”的标题。我需要使用什么标签在`*.cshtml`文件中添加此标题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-13T15:12:57.970

我不太确定我是否理解这个问题，但如果您问如何在 .cshtml 文件的网格上设置该标题，它是通过 CSS 应用的背景图像。你可以[在这里](http://demos.kendoui.com/content/web/grid/clientsDb.png)看到它。

# smalltalk - 将 SelectionInList 与 SortedCollection 一起使用？

> ID：15389003
> 
> 赞同：1
> 
> 时间：2013-03-13T15:06:08.170
> 
> 标签：smalltalk, visualworks

使用 Visualworks (Cincom Smalltalk) 和 List 小部件，如何将 SortedCollection 与 SelectionInList 一起使用？例如，如何使用 SortedCollection 初始化 SelectionInList？

我对这个过程感到困惑，我找不到任何关于如何进行的好的文档。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T11:51:45.047

就像这样：

aSelectionInList 列表：aSortedCollection。

列表中的选择是一个管理选择和列表的对象，它实际上并不太关心您作为列表传递的集合类型，只要它是可排序的（即响应#at :)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T10:21:32.883

你真的很想在 SelectionInList 对象中一直使用 List 。原因是 List 在实例变量中自行管理其依赖关系。其他类型的集合使用系统范围的 Dependencies 集合来管理它们的依赖关系。这意味着如果您的窗口意外关闭，您可能会在 Dependencies 集合中留下垃圾，这些垃圾仍然保留在您的整个 Window 结构中并防止它被垃圾收集。我已经看到图像因此变得很大。

如果您使用列表，则始终可以使用 sort 或 sort: 方法对其进行排序。如果您需要将元素添加到列表中，您可以在最后添加它们并重新排序。

# javascript - 为什么 Drupal 不能识别我的 javascript 函数？

> ID：15389005
> 
> 赞同：1
> 
> 时间：2013-03-13T15:06:13.413
> 
> 标签：javascript, drupal-7

为什么以下不起作用：

```
(function($){

Drupal.my_module = {};

Drupal.behaviors.my_module = {
  attach: function(context, settings) {     
    $('#some-div').Drupal.my_module.doStuff(); 
  }
};

Drupal.my_module.doStuff = function(){
  this.append('Hello World');
}

})(jQuery); 
```

我收到此错误：TypeError: $(...).Drupal is undefined

如果我使用另一种架构，例如将选择器作为函数的参数传递，它可以工作：

```
(function($){

Drupal.my_module = {};

Drupal.behaviors.my_module = {
  attach: function(context, settings) {     
    Drupal.my_module.doStuff($('#some-div')); 
  }
};

Drupal.my_module.doStuff = function(elem){
  elem.append('Hello World');
}

})(jQuery); 
```

如果我在 jQuery.fn 对象中声明该函数，它也可以工作：

```
$.fn.doStuff = function(){...do something...};  // It works 
```

然后这样称呼它：

```
$('#my-div').doStuff(); // It works 
```

但我想把它放在 Drupal.my_module 下，更像是第一种情况。

有什么线索吗？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T15:08:21.450

```
$('#some-div').Drupal.my_module.doStuff(); 
```

`Drupal`不是有效的 jQuery 方法或属性，因此出现`undefined`错误。

# r - 逐个单元格地在相似尺寸表的列表上应用函数

> ID：15389008
> 
> 赞同：0
> 
> 时间：2013-03-13T15:06:16.980
> 
> 标签：r, list, matrix, dataframe, apply

我们得到一个*n* `data.frame`或`matrix`相同大小的列表（*r*乘*c*），我们需要对所有表的每个单元格应用一个函数，并将结果作为 a`data.frame`或`matrix`相同大小（再次*r*乘*c*）。

```
For example:
a <- matrix(0:5, 2, 3)
b <- matrix(5:0, 2, 3)
c <- matrix(1, 2, 3)
l <- list(a, b, c)
foo(l, mean) # should retrun
2 2 2 
2 2 2
# For instance the top-left cell of 3 given matrices are 0, 5, and 1, and the mean is 2
# For all other cells, the mean of the values in 3 matrices will be 2 
```

有很多方法可以完成这项工作，但我正在寻找一个非常快速和简短的解决方案

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T15:59:14.703

这是使用`simplify2array`函数的 R 基础解决方案

```
 apply(simplify2array(l),c(1,2),mean)
     [,1] [,2] [,3]
[1,]    2    2    2
[2,]    2    2    2 
```

请注意，`simplify2array(l)`与`abind(l,along = 3)`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T15:16:24.317

使用**绑定**包：

```
library(abind)
apply(abind(l,along = 3),c(1,2),mean) 
```

当然还有更快的版本：

```
rowMeans(abind(l,along = 3),dims = 2) 
```

# c# - 资源更新时，WPF边框背景绑定到应用程序资源定义的画笔不会更新

> ID：15389010
> 
> 赞同：1
> 
> 时间：2013-03-13T15:06:23.843
> 
> 标签：c#, wpf

**你好，**

所以这将是我的**第一个**问题，因为我没有找到任何可以回答我的问题的东西。

* * *

**初始情况**

我`SolidColorBrush`在我的`<Window.Resources>`

```
<SolidColorBrush x:Key="BackgroundBrush" Color="{DynamicResource BackgroundColor}"/> 
<Color x:Key="BackgroundColor">PeachPuff</Color> 
```

然后我把我的绑定`Border`到`SolidColorBrush`

```
<Border Background="{DynamicResource ResourceKey=BackgroundBrush}" /> 
```

在应用程序启动时，我读取了一个保存背景颜色的 xml 文件。

```
// Some XML Loading stuff -> backgroundColor is a Color
this.Resources["BackgroundColor"] = backgroundColor; 
```

这就像一个魅力。我可以更改 xml 文件中的颜色，边框的背景是我在 xml 文件中定义的任何颜色。

* * *

**实际问题**

现在我将`SolidColorBrush`和的定义移到了`Color`我的**App.xaml**文件中，并将颜色更改为：

```
Application.Current.Resources["BackgroundColor"] = backgroundColor; 
```

但是现在边界的背景不再改变了。它只是边框的默认颜色。无论我在我的 xml 文件中写什么。

当我调试里面的内容时

`Application.Current.Resources["BackgroundColor"]`

分配的颜色

`Application.Current.Resources["BackgroundColor"] = backgroundColor;`

实际上是在

`Application.Current.Resources["BackgroundColor"]`

但背景**没有改变**......

* * *

**背景**

我有两个窗户。一个主窗口和一个首选项窗口。在首选项窗口中，我希望能够更改主窗口的 F​​ontFamily/Type/Weight/Color 等。

我的第一种方法是在主窗口资源中定义所有样式并将我想要更改的值传递给首选项窗口并读出更改然后更新主窗口资源中的资源。

由于这非常有效，我现在想将样式移动到 app.xaml 并在那里读取和更新它们，这样我就不必将它们传递到首选项窗口并再次从那里读取它们。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T15:27:01.313

无法重现。以下代码适用于我（边框显示为天蓝色）：

我的一个建议是确保您从窗口中删除了资源。XAML 绑定将绑定到最近的资源，即窗口资源（而不是应用程序资源），因此您将绑定到您未更改的资源。

MainWindow.xaml：

```
<Window x:Class="WpfApplication3.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml" 
        xmlns:wpfApplication3="clr-namespace:WpfApplication3"
        Title="MainWindow" Height="350" Width="525"
        x:Name="Window">
    <Window.Resources>
    </Window.Resources>

    <Grid>
        <Border Background="{DynamicResource BackgroundBrush}">
            <Button Margin="10">Test</Button>
        </Border>
    </Grid>

</Window> 
```

应用程序.xaml：

```
<Application x:Class="WpfApplication3.App"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             StartupUri="MainWindow.xaml">
    <Application.Resources>
        <SolidColorBrush x:Key="BackgroundBrush" Color="{DynamicResource BackgroundColor}"/>
        <Color x:Key="BackgroundColor">PeachPuff</Color>
    </Application.Resources>
</Application> 
```

MainWindow.xaml.cs：

```
public partial class MainWindow : Window
{

    public MainWindow()
    {
        InitializeComponent();
        Application.Current.Resources["BackgroundColor"] = Colors.Azure;
    }

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T08:14:57.433

好的，我找到了解决方案。

我将样式放入`ResourceDictionary`实际上没有任何帮助的样式中。

**但：**

当我在修改资源字典后重新加载它时，会应用样式。

实际上我认为它会在清除合并字典**之前加载字典而不应用更改？**

```
Application.Current.Resources["BackgroundColor"] = this.SelectedBackgroundColor;

Application.Current.Resources.MergedDictionaries.Clear();
var dictionary = new ResourceDictionary();
dictionary.Source = new Uri("ControlStyles.xaml", UriKind.Relative);
Application.Current.Resources.MergedDictionaries.Add(dictionary); 
```

# sql - 有效检查记录集中是否存在多行

> ID：15389015
> 
> 赞同：4
> 
> 时间：2013-03-13T15:06:43.287
> 
> 标签：sql, sql-server, sql-server-2008-r2

我正在使用 SQL Server 2008 R2，并且试图找到一种有效的方法来测试匹配条件的表中是否存在多于 1 行。

最简单的方法是 COUNT：

```
IF  (   SELECT  COUNT(*)
        FROM    Table
        WHERE   Column  = <something>
    )   > 1 BEGIN
    ...
END 
```

但这需要实际计算一个 COUNT，这是一种浪费。我只想测试超过1。

我想出的唯一方法是对 TOP 2 进行计数：

```
IF  (   SELECT  COUNT(*)
        FROM    (   SELECT  TOP 2   0   x
                    FROM    Table
                    WHERE   Column  = <something>
                )   x
    )   > 1 BEGIN
    ...
END 
```

这很笨重，需要评论才能记录。有没有更简洁的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T15:33:42.520

如果您正在检查的表中有一个 PK >1 行，则可以嵌套另一个 EXISTS 子句。不确定这是否更快，但它可以达到您的记录结果。例如，假设一个带有名为 ID 的 PK 的 Station 表可以有零对多的带有名为 ID 的 PK 的 Location 表记录，Location 具有 FK StationID，并且您希望找到具有至少两个 Locations 的 Stations：

```
SELECT s.ID
FROM Station s
WHERE EXISTS (
    SELECT 1
    FROM Location L
    WHERE L.StationID = s.ID
    AND EXISTS (
        SELECT 1
        FROM Location L2
        WHERE L2.StationID = L.StationID
        AND L2.ID <> L.ID
    )
) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-09-22T14:42:57.637

我有以下解决方案要分享，这在性能方面可能更轻。我想您正在尝试获取第一条记录并在确保您的 SQL 选择返回单个记录后对其进行处理。因此，继续获取它，但是一旦你这样做了，立即尝试获取下一条记录，如果成功，你知道存在多个记录，你可以启动你的异常处理逻辑。否则，您仍然可以处理您的单条记录。

# c - 访问未对齐的结构成员

> ID：15389022
> 
> 赞同：2
> 
> 时间：2013-03-13T15:06:55.457
> 
> 标签：c, compiler-construction, operating-system, access-violation, memory-alignment

我想测试是否可以访问 C 中结构的未对齐成员，请参阅代码

```
#include <stdio.h>

#pragma pack(1)  /* force 1 byte alignment */

/* either member b or member d is mis-aligned */
typedef struct
{
    int b;
    unsigned char c;
    unsigned int d;
}A ;

int main(int argc, char *argv[])
{
    A _a = {0};
    unsigned int *p = NULL;
    unsigned int *q = NULL;

    printf("addr of _a : 0x%08x, size of _a : %u\n", &_a, sizeof(_a));

    p = (unsigned int*)(&_a.b);
    q = (unsigned int*)(&_a.d);

    /* should this fail ? */
    (*p)++ , (*q)++;

    return 0;

} 
```

假设程序会因为内存访问未对齐导致的异常而崩溃，但事实证明它运行得很好，已经在Linux 3.6.11(GCC 4.7.2)、WinXP(MingW)、codepad在线编译器中测试过( [http://codepad.org/yOoc8ACG](http://codepad.org/yOoc8ACG) )

请解释结果，我猜操作系统已经做了一些事情来保存程序，仍然怀疑它是否适用于 VxWorks 或其他一些操作系统

注意：代码在基于 Intel 的机器上运行！

提前致谢 ！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T15:08:17.430

大概您正在英特尔机器上运行。x86 架构可以毫无问题地处理未对齐的访问。不过，您可能在其他架构上遇到问题。即使架构碰巧不支持未对齐的访问，您是对的，有时操作系统可以通过在某种 CPU 异常处理程序中使用单字节访问模拟未对齐的访问来为您解决它。

我想你也想`(*p)++`在`(*q)++`你的测试程序中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T15:48:51.230

上面的一些答案说“既然是x86，它就不会失败”，这并不完全正确。虽然我知道没有操作系统可以做到这一点，但可以将 x86 处理器配置为在用户模式下的未对齐访问[不是在内核模式下，但发布的代码对我来说看起来像用户模式代码]。但就像我说的，我知道没有一个操作系统会真正配置这个位，而且它很可能会破坏一些不希望处理器因未对齐的内存访问而出错的代码。

未对齐访问的行为，无论您如何看待它，都是未定义的，或者充其量是实现定义的。这意味着这种操作的结果范围从“它就像你期望的那样工作”在频谱的一端到“程序崩溃”。在该范围的中间可能是“它不会崩溃，但它的行为也不像您期望的那样”的更糟糕的选项 - 例如，您可能会发现您获得了与之前对齐的地址相对应的值[lower memory address] 你期望获取的数据，或者获取确实正确执行，但是它需要比对齐的变体长 10 或 100 倍的时间，因为处理器在几个步骤中捕获并执行操作，然后从陷阱。如果您还运行多个线程，您可能还会发现对变量的更新不是以原子方式完成的，因此您得到的值是“一个的一半，另一个的一半”，这显然会导致非常奇怪的效果。这不是“事情有点不对劲，但不是以一种立即明显的方式”的潜在情况的结论性列表。

我的建议是：不要搞乱对齐，尽最大努力不要编写访问未对齐元素的代码。它可能迟早会回来咬你……

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T15:12:21.680

基于 x86 的体系结构不寻常，因为它们的字访问指令可用于未对齐的地址。生成的操作速度较慢且非原子操作，但它可以工作。

一旦你的程序包含一个`#pragma`它的含义（充其量）是实现定义的。一般来说，将数据成员的地址分配给`unsigned int*`变量将使实现“忘记”它可能未对齐，因此它不会为未对齐的加载发出代码。因此，在重要的架构上，任何一个`*p`或`*q`（或两者）都不起作用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-13T15:21:55.223

结果取决于架构和内核配置。通常在 x86 上，您可以访问未对齐的数据，但会带来一些性能损失。这主要是由于与旧系列 CPU 的兼容性。

在 ARM 和 SPARC 上，行为取决于内核配置。操作系统可以禁止、允许甚至模拟这种未对齐的数据访问。在后一种情况下，内核会拦截硬件异常，并使用某些操作系统的代码和平进行模拟。

随着编译器版本的到位，这变得更加困难。例如，现代 GCC 会生成一个特殊代码，如果它发现数据未对齐，则可以以非原子方式（即使用多个指令）访问未对齐的数据。

# javascript - 什么是使 JQuery 插件可扩展的方法？

> ID：15389025
> 
> 赞同：2
> 
> 时间：2013-03-13T15:07:07.130
> 
> 标签：javascript, jquery, jquery-plugins, plugins, syntactic-sugar

我尝试通过以下方式将一些常见的应用程序特定操作移动到*jQuery 插件*：

```
$.fn.extpoint = function() {...} 
```

但我不想声明几个扩展点：

```
$.fn.extpoint1 = function() {...}
$.fn.extpoint2 = function() {...}
... 
```

相反，我想使用语法糖，例如：

```
$("#id").extpoint.func1().extpoint.func2() 
```

有定义：

```
$.fn.extpoint = {}
$.fn.extpoint.func1 = function() {
    this.val();
    this.data("ip");
    ...
    return this;
} 
```

并致电：

```
$("#id").extpoint.func1(...) 
```

`this`评估时指向（带有, , ... 元素的`$.fn.extpoint`字典）而不是原始 jQuery 对象。`func1``func2``func1`

是否可以使 jQuery 插件可扩展？

**附言**。可以将函数名称作为第一个参数传递给`$.fn.extpoint`并实现`$.fn.extpoint('extend', func)`对扩展点的调用（保存到名称和实现之间的内部字典关联）扩展点。在这种情况下，用例看起来像：

```
$("#id").extpoint('func1', ...).extpoint('func2', ...) 
```

但我正在寻找制作更多语法**糖**的方法......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T22:01:19.613

我提出的任务很难实施。

[官方文档](http://docs.jquery.com/Plugins/Authoring)说：

*`jQuery.fn`在任何情况下，一个插件都不应该在对象中声明多个命名空间*：

```
(function( $ ){
  $.fn.tooltip = function( options ) { 
    // THIS
  };
  $.fn.tooltipShow = function( ) {
   // IS
  };
  $.fn.tooltipHide = function( ) { 
    // BAD
  };
})( jQuery ); 
```

*这是不鼓励的，因为它会使`$.fn`命名空间变得混乱。为了解决这个问题，您应该将插件的所有方法收集在一个对象字面量中，并通过将方法的字符串名称传递给插件来调用它们。*

另一种方法是保持链接`this`到[http://code.google.com/p/jquery-plugin-dev/source/browse/trunk/jquery.plugin.js](http://code.google.com/p/jquery-plugin-dev/source/browse/trunk/jquery.plugin.js)

所以你的电话看起来像：

```
$.fn.addPlugin('test2', {
    __construct : function(alertText) { alert(alertText); },
    alertAttr   : function(attr) { alert($(this).attr(attr)); return this; },
    alertText   : function() { alert($(this).text()); return this; }
});

$('#test2').bind('click', function() {
     var btn = $(this);

     btn.test2('constructing...').alertAttr('id').alertText().jQuery.text('clicked!');

     setTimeout(function() {
             btn.text('test2');
     }, 1000);
}); 
```

一些相关链接：

*   [http://milan.adamovsky.com/2010/02/how-to-write-advanced-jquery-plugins.html](http://milan.adamovsky.com/2010/02/how-to-write-advanced-jquery-plugins.html)
*   [http://milan.adamovsky.com/2010/09/jquery-plugin-pattern-20.html](http://milan.adamovsky.com/2010/09/jquery-plugin-pattern-20.html)
*   [http://ludw.se/blog/articles/19/patching-milans-jquery-plugin-pattern-for-jquery-16](http://ludw.se/blog/articles/19/patching-milans-jquery-plugin-pattern-for-jquery-16)
*   [http://code.google.com/p/jquery-plugin-dev/source/browse/trunk/jquery.plugin.js](http://code.google.com/p/jquery-plugin-dev/source/browse/trunk/jquery.plugin.js)

旧式插件扩展：

*   [http://docs.jquery.com/Plugins/Authoring](http://docs.jquery.com/Plugins/Authoring)
*   [jQuery 插件创作和命名空间](https://stackoverflow.com/questions/12632382/jquery-plugin-authoring-and-namespacing)
*   [http://coding.smashingmagazine.com/2011/10/11/essential-jquery-plugin-patterns/](http://coding.smashingmagazine.com/2011/10/11/essential-jquery-plugin-patterns/)
*   [http://mahtonu.wordpress.com/2010/09/20/jquery-plugin-authoring-step-by-step/](http://mahtonu.wordpress.com/2010/09/20/jquery-plugin-authoring-step-by-step/)
*   [http://www.capricasoftware.co.uk/corp/template.php](http://www.capricasoftware.co.uk/corp/template.php)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T15:15:21.897

[这](http://snook.ca/archives/javascript/jquery_plugin)是创建插件的概述。我相信你所问的是所谓的“链接”。这就是让 jQuery 如此易于使用的原因，而且您希望确保正确实现它是一件好事。

在开发有关链接的插件时要记住的关键是始终`return this;`使用您的方法。这就是让你保持链条运转的原因。

# asp.net - break up html ID into a string as in getElementByID asp.net

> ID：15389026
> 
> 赞同：1
> 
> 时间：2013-03-13T15:07:08.490
> 
> 标签：asp.net, html, vb.net

Is there any way in which you can access the properties of an html element by breaking up the id into a string in ASP.NET? By this I am referring to the way in which you can do this with JavaScript to cycle through a numbered set of IDs like an array.

For example I can treat Div1 to Div10 like an array by going:

```
document.getElementByID("Div" + i).innerhtml 
```

I cannot seem to find any information on this or a way of asking it in a google search.

If this type of thing is not possible then I would be interested to hear some examples of how else this could be done. I am surprised I cannot find an answer because I am sure many people use the type of method I mentioned in JavaScript.

UPDATE: Please give me a while to give an example of code. I thought this was self explanatory but seemingly it is not... This is VB by the way.

Someone put javascript as a tag!! This is asp.net VB.

Is this basic example enough?

```
sub exampleProcedure()
    For i = 1 to 10
        document.getelementbyid("Div" & i).innerHTML = "A String"
        if i = 5 then
            document.getelementbyid("Div" & i).innerHTML = "This is Div5"
        end if
    next
end sub 
```

Oh and it might be worth mentioning that that would work in VbScript (which I have been unfortunate enough to have had to work with at university!)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T15:11:17.720

if you want to iterate through id. then firstly, your html elements should be `runat="server"` and then you can do any of these two:

*   you can iterate through the main form controls with a if condition on Id inside
*   you can do `.FindControl("ControlId")` in a loop of Controls of the main container i.e form

something like :

```
 For i As Integer = 0 To 5
        Dim control As HtmlGenericControl
        control = Me.FindControl("div" + i.ToString())
        If (Not (control Is Nothing)) Then
            'your logic
        End If
    Next 
```

but this loop will see only the top level controls, i.e. controls which are directly present in the page. i.e. divs inside another divs won't b found.

you will need a recursive loop for that. see [this reference](https://stackoverflow.com/questions/199521/vb-net-iterating-through-controls-in-a-container-object). it should give you an idea.

am a C# dev, and have no clue of VB. but i guess you got the idea right?

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T15:27:13.810

i think you want to read html inside div having ID prefix as "Div"

You can do that using jquery easily:

```
for(var i=0;i<10;i++)
$('Div'+i).html();//this will give you all html within Div0,Div1....Div9 
```

Hope this helps

# javascript - javascript中图像上的鼠标移动箭头时出错？

> ID：15389027
> 
> 赞同：0
> 
> 时间：2013-03-13T15:07:20.313
> 
> 标签：javascript

我是[这里的演示](http://jsfiddle.net/tXjJY/)

```
function mouseTagObject() {
    var x = document.getElementsByTagName("img")[0];
    x.addEventListener('mouseover', function(){document.getElementById('arrow').style.display = 'none';}, false);
    x.addEventListener('mouseout', function(){document.getElementById('arrow').style.display = 'block';}, false);
}
function mousemoveDiv(e) {
    document.getElementById('arrow').style.top = e.pageY - 10 + "px";
    document.getElementById('arrow').style.left = e.pageX - 15 + "px";
    mouseTagObject();
}
document.addEventListener('mousemove', mousemoveDiv, false); 
```

和 html

当我鼠标移动`image tag`（缓慢）`<div> tag`而不是隐藏时，如何解决？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T15:25:35.863

我承认，它给了我一分钟的滑倒。但是慢与快的事情就是这样做的。想象一下，为什么缓慢移动时它不起作用？好吧，看看你的鼠标。如果你移动得很快，按钮就会从鼠标下方伸出。但是如果你慢慢移动，按钮会一直停留在鼠标下方，这意味着它永远不会真正进入图像。去掉那个按钮或者把它放在光标旁边，而不是在它下面。

另外，为什么要从 mousemove 处理程序中添加事件侦听器？每次鼠标移动时，您都将重新添加这些侦听器。

# php - 如何增加codeigniter验证码助手的字体大小

> ID：15389029
> 
> 赞同：5
> 
> 时间：2013-03-13T15:07:23.203
> 
> 标签：php, codeigniter, captcha, helper

我正在使用**codeigniter** * *capctha* * helper。问题是我不能增加字母的字体大小。我试图做到这一点

```
if ($use_font == FALSE)
{
    $font_size = 6;
    $x = rand(0, $img_width/($length/2));
    $y = 0;
}
else
{
    $font_size = 20;
    $x = rand(0, $img_width/($length/1.5));
    $y = $font_size+2;
} 
```

但没有任何反应，如何更改字体大小，请帮忙。提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-13T16:31:36.057

您正在更改正确的参数，无论是在核心文件还是应用程序/帮助文件中。

仔细检查您正在使用的字体。有些字体只有一种尺寸，就是这样。默认字体文件（texb.ttf）只有一种大小（？我认为......）。

我正在使用以下配置：

```
//----- Captcha Implementation -----
$this->load->helper('captcha');

$captchaSetup = array(
    'img_path'   => './captcha/',
    'img_url'    => base_url()."captcha/",
    'font_path'  => './assets/fonts/E004007T.TTF',
    'img_width'  => 250,
    'img_height' => 50,
    'expiration' => 7200
);

$capData['cap'] = create_captcha($captchaSetup); 
```

选择一个字体文件并将其放在字体文件夹中并尝试一下。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-06-30T17:34:52.720

您可以在 captha 中使用“true type”字体`font_path`来获得更大的尺寸。尝试设置`path/to/your/ttfont.ttf`，`font_path`然后将更大的值传递给`font_size`. 它应该工作！

# ios - 如何检测 IOS 应用程序关闭并仅加载？

> ID：15389032
> 
> 赞同：0
> 
> 时间：2013-03-13T15:07:26.080
> 
> 标签：ios, iphone

我正在尝试将一些 RevMob 代码添加到我的应用程序中，该应用程序当前包含 IAP，我希望添加一些广告（全屏）。

现在我目前将我的代码放在以下方法中

```
- (void)applicationDidBecomeActive:(UIApplication *)application {
RevMobFullscreen *fullscreen;
fullscreen = [[RevMobAds session] fullscreen];
fullscreen.delegate = self;
[fullscreen loadAd];
[fullscreen showAd];
} 
```

问题是这会导致广告出现得太频繁。理想情况下，我只想在应用程序首次加载时调用广告，然后在用户关闭应用程序然后重新打开它（待机模式）时调用广告。

上面的代码在用户还与 IAP 交互时调用广告代码，因为打开了警告框询问用户是否要购买。

有什么建议么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T15:16:55.650

> “理想情况下，我只想在应用程序首次加载时调用广告，然后在用户关闭应用程序然后重新打开它（待机模式）时调用。”

实现[UIApplicationDelegate](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIApplicationDelegate_Protocol/Reference/Reference.html)的以下方法：

*   `application:didFinishLaunchingWithOptions:`

我相信您很清楚，此方法会在应用程序首次启动时触发一次。我们必须实现此方法，因为第一次启动时不会调用以下方法。

*   `applicationWillEnterForeground:`

从文档中：

> 此方法被称为从后台到活动状态转换的一部分。

[仅当应用程序从后台状态](http://developer.apple.com/library/ios/#documentation/iphone/conceptual/iphoneosprogrammingguide/ManagingYourApplicationsFlow/ManagingYourApplicationsFlow.html#//apple_ref/doc/uid/TP40007072-CH4-SW1)移动时才调用此方法。与`applicationDidBecomeActive:`您遇到问题的方法`applicationWillEnterForeground:`不同，**不会**在短暂中断后调用，例如关闭传入的 SMS 或电话或与应用内购买交互。

## 代码

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    ...

    [self showAd];

    return YES;
}

- (void)applicationWillEnterForeground:(UIApplication *)application
{
    [self showAd];
}

- (void)showAd
{
    RevMobFullscreen *fullscreen;
    fullscreen = [[RevMobAds session] fullscreen];
    fullscreen.delegate = self;
    [fullscreen loadAd];
    [fullscreen showAd];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T17:14:19.577

采用

```
application:didFinishLaunchingWithOptions: 
```

用于应用程序的初始启动。

对于来自后向功能的记录日期时间，如下所示

```
- (void)applicationDidEnterBackground:(UIApplication *)application
{
    self.timeEnteredBackground = [NSDate date];
}

- (void)applicationWillEnterForeground:(UIApplication *)application
{
    NSDate* now = [NSDate date];
    double diff = [now timeIntervalSinceDate:timeEnteredBackground];
    if (diff > SOME_SECONDS) 
```

这样，广告只会在大于某个阈值的背景时间后出现。

# maple - Maple中有Kronecker符号吗？

> ID：15389034
> 
> 赞同：2
> 
> 时间：2013-03-13T15:07:32.313
> 
> 标签：maple

两个整数的 kronecker 符号`n,m`定义为`1`if`n=m`和else `0`。

枫木中是否有内置的克罗内克符号或实现它的简单方法？

抱歉，如果我忽略了一些微不足道的事情，那么枫叶主页目前已关闭，谷歌没有返回任何有用的信息。

**编辑：**我刚刚在[这里](http://www.digi-area.com/Maple/atlas/help/delta.php)发现了一些有用的东西：

```
restart:
delta := table(symmetric,identity);
simplify(delta[1,2]);
simplify(delta[1,1]);

        delta := TABLE(symmetric, identity, [])
                           0
                           1 
```

然而，它似乎并没有简化带有符号的琐碎表达式：

```
simplify(delta[n,n]);
simplify(delta[n,n+1]);

                      delta[n, n]
                    delta[n, n + 1] 
```

人们期望分别获得`1`和`0`的地方。

**编辑2：**我也这样尝试过：

```
restart:
delta := proc(n,m):
    if n=m then 1 else 0 fi;
end;
delta(1,2);
delta(1,1);
delta(n,n);

0
1
1 
```

但是，这对于符号也很有效，因为

```
delta(n,m); 
```

返回`0`。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T20:31:05.063

试试这个 **delta:= (m,n)-> `if`(evalb(m < n)::truefalse, `if`(m=n,1,0), 'procname'(m,n)) ;**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-03-30T19:44:54.630

[Physics](http://www.maplesoft.com/support/help/Maple/view.aspx?path=Physics)包中有一个名为[KroneckerDelta](http://www.maplesoft.com/support/help/Maple/view.aspx?path=Physics/KroneckerDelta)的内置函数。试试这个

```
with(Physics):
KroneckerDelta[i,j]; 
```

其中 i 和 j 取整数值。当 i=j 时给出 1，当 i =/= j 时给出 0。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-10T14:16:00.283

我更喜欢这样的东西：`delta:=(mu,nu)->eval(evalb(mu=nu),[true=1,false=0])`

# vb.net - 获取所选图像的属性

> ID：15389037
> 
> 赞同：2
> 
> 时间：2013-03-13T15:07:43.240
> 
> 标签：vb.net, winforms, openfiledialog

我在 vb.net 中写作，我正在使用 Visual Studio 2010 Professional

好的，所以我将展示我的代码，然后解释我需要帮助的地方。

```
Imports System.IO.File
Imports System.IO.Directory
Imports System.IO

Public Class ImageSelection

    Private Sub ImageSelectionbtn_Click(sender As System.Object, e As System.EventArgs) Handles ImageSelectionbtn.Click

        With OpenFileDialog1
            .Filter = _
"Image File (*.jpg)|*.jpg|Image File (*.jpeg)|*.jpeg|Image File (*.bmp)|*.bmp|Image File (*.gif)|*.gif"
            .InitialDirectory = System.Environment.SpecialFolder.MyPictures
            .Title = "Select a picture to open"

            If OpenFileDialog1.ShowDialog = Windows.Forms.DialogResult.OK Then

                ''''Here is where i need help''''
                Dim MyImage = OpenFileDialog1.FileName
                Dim MyImageWidth
                Dim MyImageHeight
                '''''''''''''''''''''''''''''''''

                With MyPicture 'MyPicture form

                    .Width = MyImageWidth
                    .Height = MyImageHeight
                    .PictureBox1.Image = Nothing
                    MyPicture.Show()
                End With
            End If
        End With
    End Sub
End Class 
```

好的，所以我正在做的是当用户单击按钮时，它会弹出一个打开文件对话框，该对话框被过滤为仅允许 . `jpg`. `jpeg`. `bmp`和 。`gif`

现在，当他们选择他们的图片时，我需要一种能够从所选图片中提取少量信息的方法。

我需要图像高度和图像宽度，以便可以将另一个表单（带有表单停靠图像框）设置为该图像的大小。

我还需要帮助以`picturebox`将第二种形式设置为他们选择的图像。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T15:16:27.750

```
 With OpenFileDialog1
     .Filter = _
     "Image File (*.jpg)|*.jpg|Image File (*.jpeg)|*.jpeg|Image File (*.bmp)|*.bmp|Image File (*.gif)|*.gif"
     .InitialDirectory = System.Environment.SpecialFolder.MyPictures
     .Title = "Select a picture to open"

     If OpenFileDialog1.ShowDialog = Windows.Forms.DialogResult.OK Then
         ''''Here is where i need help''''
         Dim MyImage = OpenFileDialog1.FileName
         Dim image As Image = System.Drawing.Bitmap.FromFile(MyImage) 'Convert to Image from the selected file

         Dim MyImageWidth As Integer = image.Width 'Get The Width
         Dim MyImageHeight As Integer = image.Height 'Get The Height

         '''''''''''''''''''''''''''''''''
         With MyPicture 'MyPicture form

             .Width = MyImageWidth
             .Height = MyImageHeight
             .PictureBox1.Image = image
             MyPicture.Show()
         End With
     End If
 End With 
```

# asp.net-mvc - 字段列表的 MVC 4 客户端字段验证（而不是作为类成员的字段）

> ID：15389038
> 
> 赞同：2
> 
> 时间：2013-03-13T15:07:48.037
> 
> 标签：asp.net-mvc, asp.net-mvc-4, validation

我是一名长期从事 Web 应用程序开发的后端 .Net 开发人员。我正在使用 MVC 4、Razor、EF 5，并且我对如何使用这些工具制作常规的 DB 驱动的 MVC 4 站点有基本的了解。

我需要为工作流场景创建自定义表单功能。我为不同的表单字段类型和表单值类型设计了整个代码优先模式和类。

将传递给视图的模型将是一个带有表单值列表的表单类，其中包含表单字段规范。因此视图必须遍历表单字段并动态选择要使用的编辑器等等。

我的问题是这使我无法使用任何数据注释进行客户端验证。我在自定义验证方面找到建议的每个地方都假设（毫不奇怪）所有字段都是类的成员。而在这种情况下，所有字段都在列表中。

我的目标是最终得到每个字段上的验证消息和一个验证摘要，就像您通常将视图绑定到一个带注释的类一样。

关于如何解决这个问题的任何建议？提前致谢。

想象一下具有以下内容的视图逻辑：

```
@foreach (var fieldvalue in Model.FormFieldValues) {

    // Logic that chooses the appropriate editor based on typeof(fieldvalue.FormField)
    // Binds the editor to fieldvalue.Value
    // Validation specs are contained in the Formfield obtained by fieldValue.FormField
    // And my problem is setting up the validation without the aid of the normal method 
    //   of data annotation or class level custom validation.
} 
```

字段值类如下所示：

```
public class FormFieldValue : EboEntity 
{ 
    public string Value { get; set; } 

    [Required] 
    public int FormFieldId { get; set; }

    [Required]
    public virtual FormField FormField { get; set; }

    [Required]
    public int FormId { get; set; }

    [Required]
    public virtual Form Form { get; set; }
} 
```

并假设 FormField 对象具有诸如Required、Maxlength 等字段，具体取决于它的字段类型（即 FormFieldText 将是 FormField 的子类）

回答：

好的，你可以说我是 MVC 的新手。

我的问题的答案是特定的编辑器采用可以控制验证的 htmlAttributes。因此，如果我的表单字段之一是 stringlenth(10) 的必需文本字段，我可以按如下方式调用编辑器：

```
 <div class="editor-field">
        @Html.TextBoxFor(model => model.NoTexty, new { 
                                                        required = true,
                                                        maxlength = 10,
                                                        placeholder = "Texty"})
        @Html.ValidationMessageFor(model => model.NoTexty)
    </div> 
```

但在我的情况下，htmlAddtributes 不会被硬编码，而是来自 formvalue.FormField 对象中的字段。

对不起，如果我在这上面浪费了任何人的时间。但我会把这个留给像我这样的其他新手。

# database - 从具有 NULL 值的 postgreSQL LEFT JOIN 查询中减去 2 列

> ID：15389040
> 
> 赞同：2
> 
> 时间：2013-03-13T15:07:50.990
> 
> 标签：database, postgresql, join

我有一个 postgreSQL 查询，它应该是我们实验室的实际样本库存。初始样本取自一个表 (tblStudies)，但随后需要查找 2 个表以减少样本量。所以我对这两个表进行了联合查询，然后将 uniun 查询与 tblStudies 匹配以计算实际库存。但是联合查询仅在样本减少时才给出值。因此，当研究仍然具有初始样本时，不会返回该值。我想我应该使用 JOIN 操作，但是我的研究中有初始样本的 NULL 值。

这是我走了多远，请帮忙吗？

```
SELECT
    "tblStudies"."Studie_ID", "SamplesWeggezet", c."Stalen_gebruikt", "SamplesWeggezet" - c."Stalen_gebruikt" as "Stock"
FROM
    "Stability"."tblStudies"
    LEFT JOIN
    (
        SELECT b."Studie_ID",sum(b."Stalen_gebruikt") as "Stalen_gebruikt"
        FROM (
            SELECT "tblAnalyses"."Studie_ID", sum("tblAnalyses"."Aant_stalen_gebruikt") AS "Stalen_gebruikt"
            FROM "Stability"."tblAnalyses"
            GROUP BY "tblAnalyses"."Studie_ID"
            UNION 
            SELECT "tblStalenUitKamer"."Studie_ID", sum("tblStalenUitKamer".aant_stalen) AS "stalen_gebruikt"
            FROM "Stability"."tblStalenUitKamer"
            GROUP BY "tblStalenUitKamer"."Studie_ID"
        ) b
        GROUP BY b."Studie_ID"
    ) c ON "tblStudies"."Studie_ID" = c."Studie_ID" 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T15:13:44.977

因为您正在对内联查询“C”进行 LEFT JOIN，所以某些值`c."stalen_gebruikt"`可以为空。任何数字 - null 都会产生 null。为了解决这个问题，我们可以使用 coalesce

所以改变

`"samplesweggezet" - c."stalen_gebruikt" AS "Stock`

至

`"samplesweggezet" - COALESCE(c."stalen_gebruikt",0) AS "Stock`

# ios - 导航项上的 BAD_ACCESS 单击

> ID：15389041
> 
> 赞同：0
> 
> 时间：2013-03-13T15:07:54.093
> 
> 标签：ios, uinavigationbar

我有一个视图控制器，它的打开`UIViewController`方式`UIViewPicker`如下：

```
-(void)operationClicked:(id)sender {
    ChoseOperationViewController *picker = [[ChoseOperationViewController alloc] initWithNibName:@"ChoseOperationViewController" bundle:[NSBundle mainBundle]];
    [self.view addSubview:picker.view];
    [picker animateSlideOut];
} 
```

ChoseOperationViewController 是自定义的 UiViewController 类，其 nib 持有`UiViewPicker`和`UINavigationBar`

我已将“Anuluj”（取消）按钮连接到操作，如下图所示： ![在此处输入图像描述](../Images/494d77eb4c49dcb35d7ad40f6bf4d446.png)

当我点击按钮时，我得到了`-[ChoseOperationViewController performSelector:withObject:withObject:]: message sent to deallocated instance 0x7569fd0`并且 cancelClicked 方法没有被调用。这是为什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T15:37:51.767

**问题：**

```
-(void)operationClicked:(id)sender {
    ChoseOperationViewController *picker = [[ChoseOperationViewController alloc] initWithNibName:@"ChoseOperationViewController" bundle:[NSBundle mainBundle]];
    [self.view addSubview:picker.view];
    [picker animateSlideOut];
} 
```

这将创建一个实例`ChoseOperationViewController`并将其视图作为子视图添加到`self.view`. 但是当方法`-(void)operationClicked:(id)sender`返回时，您对刚刚创建的实例没有强引用 - 因此 ARC 将释放它。

当用户触摸取消按钮时，它会尝试将消息发送到被释放的实例并且应用程序崩溃。

**解决方案：**

将实例变量添加到您的`UIViewController`：

```
@implementation MyViewController {
    ChoseOperationViewController *picker;
} 
```

并将您的代码更改`operationClicked`为：

```
-(void)operationClicked:(id)sender {
    if(!picker) {
         picker = [[ChoseOperationViewController alloc] initWithNibName:@"ChoseOperationViewController" bundle:[NSBundle mainBundle]];
         [self.view addSubview:picker.view];
    }
    [picker animateSlideOut];
} 
```

这将防止`ChoseOperationViewController`实例被释放

# ios - 前置摄像头操作表无响应

> ID：15389042
> 
> 赞同：0
> 
> 时间：2013-03-13T15:07:55.010
> 
> 标签：ios, objective-c, ipad

我设置了一个操作表，它在拍照时返回 3 个选项（拍照、从图库中选择和取消），前置摄像头出现并完美拍照，但问题是当我再次拍照时，它没有给我看正面摄像头，它给我看后置摄像头。这是代码：

```
- (void)actionSheet:(UIActionSheet *)actionSheet clickedButtonAtIndex:(NSInteger)buttonIndex
{   
    CustomImagePickerController *imagePicker = [[CustomImagePickerController alloc] init];
    [imagePicker setDelegate:self];
    [imagePicker setAllowsEditing:YES];

    if(buttonIndex == 0) {
        [imagePicker setSourceType:UIImagePickerControllerSourceTypeCamera];
        [imagePicker setCameraDevice:UIImagePickerControllerCameraDeviceFront];
    } else if(buttonIndex == 1) {
        [imagePicker setSourceType:UIImagePickerControllerSourceTypePhotoLibrary];
    } 
```

我在代码中有更多内容，但主要操作设置在那里。

有什么问题吗？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T15:27:09.737

可能发生这种情况的原因是，当您第一次启动相机时 `AVCaptureSession` ，在关闭控制器后可能会在后台继续运行。所以下次你展示它时，它试图添加前置摄像头但它很忙，所以它转到下一个可用的（后置摄像头），中断自己（从而释放前一个）等等。如果您使用的是 ARC，那么最好将其`imagePicker`用作您使用它的类的属性。

或每次检查相机设备

```
if(buttonIndex == 0)
    {
        if([UIImagePickerController isSourceTypeAvailable:UIImagePickerControllerSourceTypeCamera])
        {
            imagePicker.sourceType = UIImagePickerControllerSourceTypeCamera;
            [imagePicker setCameraDevice:UIImagePickerControllerCameraDeviceFront];
        }

    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T15:18:18.747

```
- (void)actionSheet:(UIActionSheet *)actionSheet clickedButtonAtIndex:(NSInteger)buttonIndex
{
    CustomImagePickerController *imagePicker = [[CustomImagePickerController alloc] init];
[imagePicker setDelegate:self];
[imagePicker setAllowsEditing:YES];

    if(buttonIndex == 0)
    {
        if([UIImagePickerController isSourceTypeAvailable:UIImagePickerControllerSourceTypeCamera])
        {
            imagePicker.sourceType = UIImagePickerControllerSourceTypeCamera;
            [imagePicker setCameraDevice:UIImagePickerControllerCameraDeviceFront];
        }
        else
        {
            imagePicker.sourceType = UIImagePickerControllerSourceTypeSavedPhotosAlbum;
            [imagePicker setCameraDevice:UIImagePickerControllerCameraDeviceFront];
        }

         [self presentViewController:imagePicker animated:YES completion:nil ];

    }
    else if (buttonIndex==1)
    {
        imagePicker.sourceType = UIImagePickerControllerSourceTypeSavedPhotosAlbum;
        [self presentViewController:imagePicker animated:YES completion:nil ];

    }
} 
```

# jsf - 在多个 ID 或父 ID 上

> ID：15389046
> 
> 赞同：1
> 
> 时间：2013-03-13T15:08:08.940
> 
> 标签：jsf, jakarta-ee, jsf-2

我只是想知道是否有办法使用`<h:message>`oder显示多个错误/警告`<h:messages>`。

例如，采用具有各种输入的 PanelGroup：

```
<h:panelGroup id="pG">
    <p:input id="in1">[...]</p:input>
    <p:input id="in2">[...]</p:input>
</h:panelGroup> 
```

现在我可以用来`<h:message for="in1" style="color:red"/>`在输入区域显示错误。但是，有没有办法显示有关面板组的所有消息？像这样的东西：`<h:messages for="pG" style="color:red"/>`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T18:09:20.407

您可以添加一个方法来获取其子组件的所有验证消息的列表，

```
<ui:repeat var="message" value="#{applicationScopedBeanUtil.getMessages(mybean.pG)}">
    <h:outputText value="#{message.summary}" />   
</ui:repeat>

<h:panelGroup id="pG" binding="#{mybean.pG}">  
    <p:input id="in1">[...]</p:input>
    <p:input id="in2">[...]</p:input>
</h:panelGroup> 
```

您可以将此方法添加到您的实用程序类中，

```
 private List<FacesMessage> getMessages(UIComponent component) {
        List<FacesMessage> messages =  new ArrayList<FacesMessage>();
        Iterator<UIComponent> children = component.getFacetsAndChildren();

        if (children != null) {
            while (children.hasNext()) {
               messages.addAll(FacesContext.getMessages(children.next().getClientId()));
            }
        }
      return messages;
    } 
```

# database - 为数据密集型多服务器应用程序封装服务器通信

> ID：15389049
> 
> 赞同：0
> 
> 时间：2013-03-13T15:08:11.270
> 
> 标签：database, performance, webserver, encapsulation, bigdata

有两个数据库，A 和 B，它们为网页提供服务，并在需要共享数据时通过内部网络相互通信。有时，服务器 A 需要生成一个带有图表的网页，该网页需要在服务器 B 上进行大量数据的密集计算。让我们假设两台服务器同样强大并且网络速度很快。我试图找出一个好方法来做到这一点。到目前为止的想法：

*   服务器 B 可以进行大量计算，然后将一小部分结果传回服务器 A。不太灵活，但相当有效。不幸的是，这是一个有点复杂的交易。我会将其与具有大量参数、副作用和结果的方法进行比较。
*   服务器 B 可以简单地向 A 提供自己的原始数据服务器，并让它自己处理所有计算。更“开放”和更灵活，但效率较低，因为计算中涉及大量数据，服务器 A 必须通过网络提取所有数据。
*   服务器 B 可以生成并返回图表或指向它的链接。也许是最有效的，但最不灵活的，并且还会造成服务器 B 部分负责生成服务器 A 的网页的混乱关系。但是，至少服务器 A 不必担心取回一个复杂对象并知道如何处理它。

这里是否有一个最佳实践可以实现性能和可维护封装的平衡？还是只是个案情况？我倾向于第一个选项。我希望这个问题足够“可回答”，而不是讨论问题。我试图将一般问题集中到一个特定的场景中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T23:03:50.670

我无法回答您问题的最佳实践部分，但会在性能方面回答。您所描述的是两台服务器，它们之间没有真正的技术差异，并且大概您拥有更新它们的平等访问权限，既不会缺乏资源，等等。

要真正计算性能，需要几个数字。

A）每秒有多少请求？B) 对于技术 a 和 b，机器之间将有多少流量？C）你能承受多少延迟？

如果数据流足够小，您的第一个选项对于性能来说是合理的。选项 b 将在您的基础架构上产生大部分负载，如果这接近硬件限制，那么现在就放弃这个选项。如果所有的数字都很小，那么这并不是一个真正基于性能的决定。

如果您是从网页驱动这一切，那么第一页加载不能简单地返回引用服务器 B 的 Img 标记等吗？即我请求pageA，但HTML 流包含来自serverB 的资源？这本质上是您的选项 C，但可能会提供更高的感知用户性能，因为来自不同服务器的资源可以并行下载（假设有几个要访问）。

从设计的角度来看，我很难看出*在哪里*执行计算与这个问题相关，你控制两台服务器，所以问题变成了服务器 b 必须向服务器 a 提供信息的“合同”是什么。是否有某些原因 b 不能只提供过滤结果，而不能提供基础原始数据？或者换一种说法，为什么a要处理b的数据？当你控制两端时，逻辑是在 a 还是 b 中并不重要。

如果您不控制两台服务器，那么决定更多的是围绕谁应该承担将原始数据处理为结果的成本（构建和支持）。

总结/意见。如果可能和合适，选项 c，否则 a 在没有某些压倒一切的理由 b

# c# - 在 WPF 中创建子目录？

> ID：15389050
> 
> 赞同：3
> 
> 时间：2013-03-13T15:08:12.187
> 
> 标签：c#, directory, subdirectory

```
string path1 = @"C:\temp\";
string path2 = "";

// Create directory temp if it doesn't exist
if (!Directory.Exists(path1))
{
    Directory.CreateDirectory(path1);
} 
```

我创建了上述目录`temp`，但我不知道如何在其中创建子目录（如`temp1`）`temp`？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-13T15:09:28.113

你已经有了基本的代码，你只需要稍微调整一下。根据有关文件[`CreateDirectory`](http://msdn.microsoft.com/en-us/library/54a0at6s.aspx)

> 除非它们已经存在或*路径*的某些部分无效，否则会创建*path*中指定的所有目录。

 *因此，您只需指定完整路径`temp1`并使用一次调用即可。

```
string path1 = @"C:\temp\";
string path2 = Path.Combine(path1, "temp1");

// Create directory temp1 if it doesn't exist
Directory.CreateDirectory(path2); 
```

请注意，这适用于您要创建目录的任何时候。在 WPF 应用程序中执行此操作没有什么特别之处。*

# java - 为 Hadoop 环境配置 Eclipse（在 Windows 上）（在具有 SUSE Linux Enterprise Server 11 的 vm 上）

> ID：15389055
> 
> 赞同：2
> 
> 时间：2013-03-13T15:08:23.007
> 
> 标签：java, windows, eclipse, hadoop

我在具有 SUSE Linux Enterprise Server 11 的 VMware 上以伪分布式模式安装 Hadoop。我能够运行 hello world 示例，例如字数统计。我还使用 WinSCP 连接到该 VM 并将几个 XML 文件上传到 hadoop 集群。

我现在的问题是如何配置我在 Windows 7 本地计算机上的 Eclipse 以连接该 VM 并编写一些 Java 代码来处理我在集群中转储的数据。我做了一些工作并且能够在 Eclipse 中获得 Map/Reduce 透视图，但无法弄清楚如何从我的本地机器连接虚拟机上的 hadoop，编写我的 java 代码（映射器、reducer 类）来处理数据并保存结果回到集群中。

如果有人可以帮助我，那就太好了。提前致谢。

如果需要更多信息，请告诉我。

我正在使用 hadoop-0.20.2-cdh3u5 和 eclipse europa 3.3.1

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T22:23:45.753

我现在也在为此苦苦挣扎。也许您会发现这些链接很有帮助：

*   [http://www.bigdatafarm.com/?p=4](http://www.bigdatafarm.com/?p=4)
*   [http://developer.yahoo.com/hadoop/tutorial/module3.html](http://developer.yahoo.com/hadoop/tutorial/module3.html)

干杯

# r - 如何将多列数据折叠成两列，一列指标列一数据列

> ID：15389056
> 
> 赞同：1
> 
> 时间：2013-03-13T15:08:24.977
> 
> 标签：r

我在 3 个条件下进行了实验。数据目前的组织方式如下：

```
| X | Y | Z |
|   | 1 |   |
|   | 0 |   |
| 0 |   |   |
| 0 |   |   |
|   |   | 1 |
|   |   | 1 | 
```

我希望它看起来像这样：

```
| Y | 1 |
| Y | 0 |
| X | 0 |
| X | 0 |
| Z | 1 |
| Z | 1 | 
```

这是因为似乎很多分析都需要这种格式。

我希望可能有一个函数可以进行这种转换，因为它似乎很常见。

编辑：

我尝试使用下面的重塑建议，但遇到了问题。它似乎没有影响结构。我的数据必须以某种方式与构建的测试数据不同，但我不确定如何。

我在这方面遇到了一些麻烦，我想也许你可以帮忙。

```
> simpleGame
   Q6.4 Q7.4 Q8.4
3               2
5               2
8          1     
11              2
13         1     
14    2          
16              1
17         1     
19    2          
23    2          
24              1
26    2          
28    2 
```

但是当我运行融化时，它似乎并没有改变任何东西：

```
> na.omit(melt(simpleGame))
Using Q6.4, Q7.4, Q8.4 as id variables
   Q6.4 Q7.4 Q8.4
1               2
2               2
3          1     
4               2
5          1     
6     2          
7               1
8          1     
9     2          
10    2          
11              1
12    2          
13    2 
```

任何建议将不胜感激。

Edit2：根据要求，这是数据框的 dput：

```
> dput(simpleGame)
structure(list(Q6.4 = structure(c(1L, 1L, 1L, 1L, 1L, 3L, 1L, 
1L, 3L, 3L, 1L, 3L, 3L), .Label = c("", "1", "2", "Which do you choose?"
), class = "factor"), Q7.4 = structure(c(1L, 1L, 2L, 1L, 2L, 
1L, 1L, 2L, 1L, 1L, 1L, 1L, 1L), .Label = c("", "1", "2", "Which do you choose?"
), class = "factor"), Q8.4 = structure(c(3L, 3L, 1L, 3L, 1L, 
1L, 2L, 1L, 1L, 1L, 2L, 1L, 1L), .Label = c("", "1", "2", "Which do you choose?"
), class = "factor")), .Names = c("Q6.4", "Q7.4", "Q8.4"), row.names = c(3L, 
5L, 8L, 11L, 13L, 14L, 16L, 17L, 19L, 23L, 24L, 26L, 28L), class = "data.frame") 
```

我在想也许这与这些实际上是因素有关？我不知道如何将整个 data.frame 强制转换为数字，但我想也许可以做到。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-13T15:16:19.333

如果您的数据如下：

```
df <- structure(list(X = c(NA, NA, 0, 0, NA, NA), Y = c(1, 0, NA, NA, 
      NA, NA), Z = c(NA, NA, NA, NA, 1, 1)), .Names = c("X", "Y", "Z"
      ), class = "data.frame", row.names = c(NA, -6L)) 
```

试试这个：

```
na.omit(stack(df))
#    values ind
# 3       0   X
# 4       0   X
# 7       1   Y
# 8       0   Y
# 17      1   Z
# 18      1   Z 
```

如果您想要您的订单：

```
na.omit(stack(df[c(2,1,3)]))[c(2,1)]
#    ind values
# 1    Y      1
# 2    Y      0
# 9    X      0
# 10   X      0
# 17   Z      1
# 18   Z      1 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-13T15:23:54.423

使用`reshape2`和@Arun 数据结构：

```
na.omit(melt(df))
Using  as id variables
   variable value
3         X     0
4         X     0
7         Y     1
8         Y     0
17        Z     1
18        Z     1 
```

**使用 OP 结构进行**编辑****

 **```
dat.m <- melt(dat,measure.vars = c('Q6.4','Q7.4','Q8.4'))
dat.m[!(dat.m$value == ''),] 
```

**解释**：您的所有列都是因子。的默认行为`melt`是将因子列作为 id。作为一种解决方法，我告诉融化它们是可测量的变量，因此`melt`将行名作为 id。对于第二部分，我只是替换`na.omit`为，`!(dat.m$value == '')`因为值内没有 NA，我只有空字符。**

# python - 在 Tornado 中调用 static_url

> ID：15389057
> 
> 赞同：7
> 
> 时间：2013-03-13T15:08:25.393
> 
> 标签：python, url, static, tornado

我是 Python 和 Tornado Web 框架的初学者。[当我在研究《 Tornado 简介](http://shop.oreilly.com/product/0636920021292.do)》一书中的模板部分时，有一句话让我很困惑：

```
<link rel="stylesheet" href="{{ static_url("style.css") }}"> 
```

`static_url`当没有库导入命名空间时，应用程序如何知道在哪里调用函数？我`static_url()`在 Tornado 的 web 模块中找到了，但我不知道如何在该模板文件中成功调用此函数？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-14T09:52:44.673

**RequestHandler**类有一个方法**get_template_namespace()**，记录[在这里](http://www.tornadoweb.org/en/branch2.4/web.html#tornado.web.RequestHandler.get_template_namespace)。如果单击源链接，您将看到[它如何创建一个字典](http://www.tornadoweb.org/en/branch2.4/_modules/tornado/web.html#RequestHandler.get_template_namespace)，其中**'static_url'**设置为**self.static_url**。

# c# - 读取 XML 错误

> ID：15389058
> 
> 赞同：2
> 
> 时间：2013-03-13T15:08:25.570
> 
> 标签：c#, xml, user-controls, xmlnode

## **我可能有一个简单的问题要问你，但我坚持这个问题。**

所以，我有一个应用程序，它有多个用户控件，继承自一个类。我可以将它们拖到面板上，然后调整它们的大小。我有保存和打开用户控件位置/大小保存/从 XML 文件加载的功能。最近我用一个特性改进了它，它可以让你在代码中添加额外的东西，然后用其余的主要参数保存它。

这是一个示例：![XML](../Images/86e481aaceb601c5b42c9ba7aba13859.png) 基本上它会检测是否添加了任何其他参数并将它们保存在`<Parameters>`标签下。

这是我添加了一些内容的 userControl 代码示例：![用户控件1](../Images/bbab99fcc93349bc0103bac56bb3d849.png)

保存进展顺利，但我被困在加载部分。我首先尝试通过将任何发现的参数写入richTextBox 来测试它，看看它是否读取任何数据。我认为，它应该首先检测 userControls，然后在每个 userControl 中查找参数。

我收到了这个错误：![调试](../Images/ec111c6575be942c2a613da7ec187e02.png)

正如您在下面看到的，程序读取 XML，但在需要填充richTextBox 的位置停止。它不会发生，因为在应该包含两个参数的列表中，只有一个参数，一种混合​​。

我很困惑。有什么建议吗？

* * *

*培训中的开发人员*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T15:21:19.203

哇，我好懒 :D

我忘了转换参数的内部文本：P

```
foreach (XmlNode pm in pmList)
                {
                    int s = int.Parse(pm["RandomParameter1"].InnerText);
                    int ss = int.Parse(pm["RandomParameter2"].InnerText);

                    richTextBox1.AppendText(pm["RandomParameter1"].ToString() + " - " + s.ToString() + "\n");
                    richTextBox1.AppendText(pm["RandomParameter1"].ToString() + " - " + ss.ToString() + "\n");

                } 
```

仍然需要处理参数名称输出，因为我在文本框中得到的结果是：

```
System.Xml.XmlElement - 27
System.Xml.XmlElement - 10
System.Xml.XmlElement - 27
System.Xml.XmlElement - 10
System.Xml.XmlElement - 27
System.Xml.XmlElement - 10 
```

Buuut，这是一个开始，不是吗？:D

* * *

感谢任何花时间尝试解决我的懒惰错误的人:)

# kerberos - 在 Kerberos JGSS 中使用多个密钥表而不使用 JAAS .conf 文件

> ID：15389064
> 
> 赞同：0
> 
> 时间：2013-03-13T15:08:44.397
> 
> 标签：kerberos, jaas, jgss

我想在多个服务器线程中使用多个 keytab。我不想使用 JAAS conf 文件，所以我在 LoginConfiguration 类中实现了我自己的登录配置。KerberosLogin 类中的 getGSSCredentials() 函数用于通过将 keytab 位置作为参数来获取凭据。

KerberosLogin -> [http://ideone.com/vaip3H](http://ideone.com/vaip3H) LoginConfiguration -> [http://ideone.com/jDqlN0](http://ideone.com/jDqlN0)

当我只运行两个服务器线程时，第一个能够从其密钥表中获取凭据（两个服务器线程使用不同的服务主体），而第二个失败。在 LoginConfiguration 中使用以某种方式`parms.put("refreshKrb5Config","true");`解决了这个问题。

我无法理解为什么在不刷新配置的情况下它不能工作，并且对于将有多个这样的服务器线程的情况，它是否可以安全使用。有没有更好的方法来使用多个 keytab？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-05-08T19:38:21.730

这是由于 java6 处理登录配置的方式，它已在 java7 中修复。

# php - 在每次数据库调用时替代手动“SET NAMES utf8”

> ID：15389066
> 
> 赞同：0
> 
> 时间：2013-03-13T15:08:46.843
> 
> 标签：php, mysql

我的网站上有来自 mysql 数据库的日语。

网站上的其他日文文本显示正常，但从数据库中出来的内容如下：

```
 ???????? 
```

数据库设置为 UTF8，网页也是如此。

为了解决这个问题，在我调用我使用的数据库之前：

```
$db->query("SET NAMES utf8"); 
```

我想知道是否有更好/更简单的方法来完成上述操作，而不必在每次查询之前设置名称？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T15:27:27.860

您不必`SET NAMES utf8`在每次查询之前都使用它，只需在建立连接后运行它。这是 PDO 的示例：

```
try {
    $dns  = "mysql:host={HOST};dbname={DB}";
    $user = "{USER}";
    $pass = "{PASS}";
    $con = new PDO($dns, $user, $pass);
} catch ( Exception $e ) {
    echo "Connexion error ", $e->getMessage();
    die();
}

$con->query("SET NAMES utf8;");
//and now, as many queries as you want 
```

如果您使用 PHP >= 5.3.6，您可以在连接字符串中定义字符集（以前的 PHP 版本忽略它）：

```
try {
    $dns  = "mysql:host={HOST};dbname={DB};charset=utf8";
    $user = "{USER}";
    $pass = "{PASS}";
    $con = new PDO($dns, $user, $pass);
} catch ( Exception $e ) {
    echo "Connexion error ", $e->getMessage();
    die();
}

//and now, as many queries as you want 
```

# java - Java 代码中的 JavaScript 函数调用

> ID：15389067
> 
> 赞同：1
> 
> 时间：2013-03-13T15:08:49.497
> 
> 标签：java, javascript, rhino, invocation

我将一个函数从 JavaScript 文件传递​​到 Java 代码中。JavaScript 函数如下所示：

```
entity.handler = function(arg1, arg2) {
    //do something
}; 
```

在 Java 代码中，类实现了`Scriptable`接口。当我调用 JavaScript 时，实际上在 Java 中调用了以下方法：

`Scriptable.put(java.lang.String s, org.mozilla.javascript.Scriptable scriptable, java.lang.Object o)`

我的情况在哪里：

s = '处理程序';

scriptable - 类型为的对象`com.beanexplorer.enterprise.operations.js.ScriptableEntity`

o - 实际上是一个函数，它的类型是`org.mozilla.javascript.gen.c15`， 在调试器中`( o instanceof Scriptable )`返回。`true`

在`Scriptable.put()`方法实现中，我想将操作委托给“o”对象：

```
SomeClass.invoke( new SomeListener(){
    @override
    public void someAction(int arg1, float arg2) {
       //here I need to delegate to the 'o' object.
       //do something looked like: 
       o.call(arg1, arg2); // have no idea how to do it, if it's possible.
    }
} 
```

我该怎么做？我找不到我的案例所需的任何示例。

谢谢。

编辑，解决方案：Actuly o - 可以转换为 Function. 因此，以下解决方案有所帮助：

```
@Override
put(java.lang.String s, org.mozilla.javascript.Scriptable scriptable, java.lang.Object o) {
    ....
    final Function f = ( Function )o;
    final SomeInterface obj = new ...;
    obj.someJavaMethod( Object someParams, new SomeJavaListener() { 
        @Override
    public void use(Object par1, Object par2) throws Exception {
        Context ctx = Context.getCurrentContext();
        Scriptable rec = new SomeJavaScriptableWrapperForObject( par1);
            f.call( ctx, scriptable, scriptable, new Object[] { rec, par2 } );
        }
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T18:38:16.580

我设法通过以下代码运行您的 Javascript：

```
public class Main {

    public static void main(String[] args) {
        new ContextFactory().call(new ContextAction(){

            @Override
            public Object run(Context ctx) {
                Scriptable scope = ctx.initStandardObjects();
                try {
                    Scriptable entity = ctx.newObject(scope);

                    scope.put("console", scope, Context.javaToJS(System.out, scope));
                    scope.put("entity", scope, entity);

                    ctx.evaluateReader(
                        scope,
                        new InputStreamReader(Main.class.getResourceAsStream("/handler.js")),
                        "handler.js", 1, null);

                    Function handler = (Function) entity.get("handler", entity);
                    Object result = handler.call(ctx, scope, scope, new Object[] {"Foo", 1234});

                    System.out.println("Handler returned " + result);
                } catch (Exception e) {
                    e.printStackTrace(System.err);
                }
                return null;
            }
        });

    }
} 
```

以下脚本必须`handler.js`在您的 CLASSPATH 中可用：

```
entity.handler = function(arg1, arg2) {
    console.println("Hello world from the JS handler");
    return 42;
} 
```

# javascript - 通过 HTML 调用嵌套的 JavaScript 函数（简单）

> ID：15389071
> 
> 赞同：0
> 
> 时间：2013-03-13T15:09:00.483
> 
> 标签：javascript, html

我知道这是一个重复的主题，但是这个主题是不同的，因为我使用了非常简单的示例。我有一个这样的 JavaScript 函数：

```
(function myfunction($){
    function a(){
        alert("A section"); 
    }
    function b(){
        alert("B section")
    }
})(); 
```

我想创建一个调用函数 A 和函数 B 的 HTML 按钮。我该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T15:11:51.633

通过在闭包外部声明名称使它们成为全局，然后在闭包内分配它们。

```
var a, b;
(function myfunction($){
    a = function() {
        alert("A section"); 
    }
    b = function() {
        alert("B section")
    }
})(); 
```

您可以通过将它们包装在一个对象中来减少对全局命名空间的污染：

```
var myfuns = (function myfunction($) {
                 return { a: function() {alert("A section");},
                          b: function() {alert("B section");}
                        };
              })(); 
```

然后调用`myfuns.a`和`myfuns.b`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T15:15:18.700

您可以创建一个具有这些功能的对象并调用您的函数，如下所示：

```
myFunctions = {

  a : function(){ alert("A section"); },
  b : function(){ alert("B section"); }

} 
```

然后像下面这样调用它们：

```
myFunctions.a();
myFunctions.b(); 
```

这是检查它的[jsfiddle 。](http://jsfiddle.net/8tEVs/)

**更新：**

作为对您评论的回答，这是一个更新的[jsfiddle](http://jsfiddle.net/8tEVs/1/)，向您展示它是如何在 HTML 中工作的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T15:16:13.490

在闭包中将函数分配给全局变量是一种方法。其他方法如下。

```
(function myfunction($){
    $("#button1").click(function {
        alert("A section"); 
    });
    $("#button2").click(function {
        alert("B section"); 
    });
})(jQuery); 
```

这不会破坏您的全球范围。并绑定按钮的点击事件。

不使用 jQuery 时

```
(function myfunction($){
    var button1 = getElementById("idOfButton1");
    button1.onclick = function {
        alert("A section"); 
    };
    var button2 = getElementById("idOfButton2");
    button1.onclick = function {
        alert("B section"); 
    };
})(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-13T15:22:00.313

您可以先创建一个变量，然后将其公开给全局上下文：

```
(function myfunction($){
    var global = {
        a: function(){
            alert("A section");
        },
        b: function(){
            alert("B section")
        }
    };

    window.global = global;
})();
global.a();
global.b(); 
```

# vb.net - 使用 HttpWebRequest 在最终/登陆 URL 之前捕获所有中间 URL

> ID：15389072
> 
> 赞同：2
> 
> 时间：2013-03-13T15:09:03.463
> 
> 标签：vb.net, response.redirect

我有一个 URL，它在到达着陆页之前会重定向到多个 URL。[我在这里](https://stackoverflow.com/questions/13622297/how-to-get-the-redirected-url-from-original-url-visual-basic-net)找到了获得最终重定向的解决方案，但我想要所有中间 URL。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T18:55:35.280

这有效：

```
'http://tinyurl.com/gtrp -> points to google.ca
Dim urls As List(Of String) = GetAllRedirectURLs("http://tinyurl.com/gtrp")
'urls(0) = "http://google.ca"
'urls(1) = "http://www.google.ca/"

Private Function GetAllRedirectURLs(path As String) As List(Of String)
  Dim urls As New List(Of String)
  Dim request As HttpWebRequest = WebRequest.Create(path)
  request.Method = "HEAD"
  request.AllowAutoRedirect = False
  Dim response As HttpWebResponse = request.GetResponse
  If response.StatusCode = HttpStatusCode.Moved Or response.StatusCode = HttpStatusCode.Redirect Then
    Dim redirectsToURL As String = response.GetResponseHeader("Location")
    urls.Add(redirectsToURL)
    urls.AddRange(GetAllRedirectURLs(redirectsToURL))
  End If
  Return urls
End Function 
```

使用递归向下钻取和收集链接。基于[这个问题](https://stackoverflow.com/q/704956/897326)。

# intersystems-cache - 在运行时测试类上是否存在属性

> ID：15389075
> 
> 赞同：1
> 
> 时间：2013-03-13T15:09:07.400
> 
> 标签：intersystems-cache, objectscript

像这样的东西：

```
##class(MyApp.MyClass).%HasProperty("SomeProperty"). 
```

我考虑做这样的事情：

```
set classDefinition = ##class(%Dictionary.CompiledClass).%OpenId(%class.Name) 
```

然后遍历属性，但是，我需要能够使用任何类，而不仅仅是`%class`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-13T16:02:36.747

对于简单的 OO 方法，您可以使用以下 API：

```
Set tPropExists = ##class(%Dictionary.CompiledProperty).IDKEYExists("SomeClass","SomeProperty") 
```

这应该比加载类定义数据并循环其属性（因此也加载这些属性的数据）具有更少的运行时成本。

如果您仍想为您的应用程序类创建`%HasProperty()`辅助方法，您可以使用以下基本方法（假设您使用的是 Cache 2010.2 或更高版本 - 我相信`$this`特殊变量和`$classname()`函数是在 2010.2 中添加的，但可能已经在2010.1.）：

```
ClassMethod %HasProperty(pPropName As %String = "") As %Boolean
{
  Set tHasProp = 0
  If (pPropName '= "") {
    Set tHasProp = ##class(%Dictionary.CompiledProperty).IDKEYExists($classname($this),pPropName)
  }
  Quit tHasProp
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T18:33:57.133

如果运行时速度对您很重要，您可能还想使用生成器方法（缓存对象中非常好的特性之一）。

例如：

```
Method PropertyExists(Name) As %Boolean [ CodeMode = generator, ProcedureBlock = 1, ServerOnly = 1 ]
{
    Set %code=0
    S ClassDef=##class(%Dictionary.CompiledClass).%OpenId(%class)
    i '$IsObject(ClassDef)  $$$GENERATE(" Q 0")  Q $$$OK  
    I '$IsObject(ClassDef.Properties) $$$GENERATE(" Q 0")  Q $$$OK  
    S Key=""  F  S Key=ClassDef.Properties.Next(Key)  Q:Key=""  D
    . S CompiledProperty=ClassDef.Properties.GetAt(Key)
    . $$$GENERATE(" I Name="""_CompiledProperty.Name_""" Q 1" )
    $$$GENERATE(" Q 0")
    q $$$OK
} 
```

# php - 删除 www 时重定向到主页。来自网址

> ID：15389079
> 
> 赞同：0
> 
> 时间：2013-03-13T15:09:12.743
> 
> 标签：php, magento, url, redirect, url-redirection

说，我的网站是：www.example.com

我有一页：www.example.com/contactus

如果我删除“www”。从上面的网址，意思是：example.com/contactus

它把我重定向到主页。为什么 ？？

签出以下 .htaccess 的图片：

![在此处输入图像描述](../Images/52f20c2728f40fae7bb18063d9e6d8c3.png)

它的解决方案是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T15:16:05.927

检查您的 .htaccess 文件是否有类似于以下内容的内容：

```
RewriteCond %{HTTP_HOST} !^www\.
RewriteRule ^(.*)$ http://your.domain.com/ [R=301,L] 
```

您可以将第二行更改为：

```
RewriteRule ^(.*)$ http://your.domain.com/$1 [R=301,L] 
```

它会改为重定向到您请求的没有“www”的任何页面，并将“www”放回前面。

如果您没有找到它，您可能在 Magento 管理员中设置了重定向，或者在您的 httpd.conf 或虚拟主机文件中设置了一些其他配置。

**更新**

尝试将此添加到您的 .htaccess 文件中，看看它是否可以解决您的问题（请先在开发环境中测试）：

```
RewriteCond %{HTTP_HOST} !^www\.
RewriteRule ^(.*)$ http://www.domain.com/$1 [R=301,L] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T16:25:46.287

问题似乎是您在 Admin -> System -> Configuration -> Web 中使用构建 magento 功能“自动重定向到基本 URL”

![在此处输入图像描述](../Images/86b6e5f604b3e5a005f6e448b748d247.png)

但是这个功能似乎具有误导性，因为它似乎没有附加`url path`（仅将您重定向到基本 url`http://www.site.com`而不是`http://www.site.com/path/to/xyz.html`）。

**所以快速解决方法是使用[.htaccess rewrite](https://stackoverflow.com/a/15389225/1191288)。**

看看 baseUrl 是要重定向到的 url

```
$baseUrl = Mage::getBaseUrl(
    Mage_Core_Model_Store::URL_TYPE_WEB,
    Mage::app()->getStore()->isCurrentlySecure()
);

....

Mage::app()->getFrontController()->getResponse()
        ->setRedirect($baseUrl, $redirectCode)
        ->sendResponse(); 
```

见/app/code/core/Mage/Core/Controller/Varien/Front.php

```
/**
 * Auto-redirect to base url (without SID) if the requested url doesn't match it.
 * By default this feature is enabled in configuration.
 *
 * @param Zend_Controller_Request_Http $request
 */
protected function _checkBaseUrl($request)
{
    if (!Mage::isInstalled() || $request->getPost()) {
        return;
    }

    $redirectCode = (int)Mage::getStoreConfig('web/url/redirect_to_base');
    if (!$redirectCode) {
        return;
    } elseif ($redirectCode != 301) {
        $redirectCode = 302;
    }

    if ($this->_isAdminFrontNameMatched($request)) {
        return;
    }

    $baseUrl = Mage::getBaseUrl(
        Mage_Core_Model_Store::URL_TYPE_WEB,
        Mage::app()->getStore()->isCurrentlySecure()
    );
    if (!$baseUrl) {
        return;
    }

    $uri = @parse_url($baseUrl);
    $requestUri = $request->getRequestUri() ? $request->getRequestUri() : '/';
    if (isset($uri['scheme']) && $uri['scheme'] != $request->getScheme()
        || isset($uri['host']) && $uri['host'] != $request->getHttpHost()
        || isset($uri['path']) && strpos($requestUri, $uri['path']) === false
    ) {
        Mage::app()->getFrontController()->getResponse()
            ->setRedirect($baseUrl, $redirectCode)
            ->sendResponse();
        exit;
    }
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-13T15:57:00.107

我怀疑这与 mod_rewrite 无关，而是 Magento 本身。导航到`System->Configuration->Web`管理员。根据`URL Options`您很可能已`Auto-redirect to Base URL`设置为是。您的基本 URL 位于`Secure`并且`Unsecure`很可能`http(s)://www.example.com/`而不是`http(s)://example.com/`. 通过`example.com`它访问商店时，它与基本 URL 不匹配，因此您将被重定向到`www.example.com`.

# jquery - jQuery Validate 类规则不起作用

> ID：15389080
> 
> 赞同：0
> 
> 时间：2013-03-13T15:09:13.913
> 
> 标签：jquery, jquery-validate

为什么定义像 jquery.validator 文档中记录的类规则不起作用？

[提琴手](http://jsfiddle.net/testit1234/MLDhM/)

我的 javascript

```
jQuery.validator.addClassRules('foo', {
    required: true,
    digits: true
});
jQuery('#test').validate({
    rules: {
        field: 'foo'
    }
}); 
```

我的html

```
<form id="test">
    <input type="text">
</form> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T15:17:29.737

您的`input`字段**必须**具有`name`与 Validate 插件一起使用的属性。它在你的小提琴中丢失了。

`<input id="2" name="numberVal" class="numberVal" type="text" />`

[jsFiddle](http://jsfiddle.net/GrhBr/98/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T15:27:50.827

忽略您原来的 jsFiddle，这个答案只是用发布的代码回答了这个问题。

使用该`addClassRules`方法的 OP 中的代码要求您使用`class`输入元素中的属性...

**HTML**：

```
<form id="test">
    <input name="field" type="text" class="foo" />
    <input type="submit" />
</form> 
```

**jQuery** :

```
jQuery.validator.addClassRules('foo', {
    required: true,
    digits: true
});

jQuery('#test').validate({
    // your other options
}); 
```

**演示：http: [//jsfiddle.net/G4rb3/1/](http://jsfiddle.net/G4rb3/1/)**

# java - 休眠映射 MySQL DateTime

> ID：15389084
> 
> 赞同：2
> 
> 时间：2013-03-13T15:09:26.213
> 
> 标签：java, mysql, hibernate

我在 mysql 数据库中有一个表，其架构如下：[ID，Value，Date] 其中 ID 和 Value 是 int 字段，Date 是 TIMESTAMP。我定义了一个这样的Java类：

```
class myClass{
  private int ID;
  private int value;
  private java.sql.Timestamp date;
} 
```

如果我尝试使用我为 Hibernate 定义的映射从数据库中读取记录，那么一切看起来都很好，无论如何，如果我创建一个新对象并尝试将其插入到我的数据库中，则会出现错误。我读了很多关于这个的帖子，但我真的很困惑。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-13T16:22:15.957

使用 java.util.Date 类而不是 java.sql.Date。然后它应该看起来像这样：

```
public class myClass {
     private int ID;
     private int value;

     @Temporal(TemporalType.TIMESTAMP)
     private java.util.date date;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-13T15:14:39.073

您需要告诉 Hibernate（或 JPA）该列是什么。不同的数据库处理裸日期字段的方式不同。我知道在 Oracle 中，如果您不对列进行注释，Oracle 会将其设为（Oracle）时间戳。这可能是也可能不是您想要的，而它不会是高性能的。我建议始终使用注释，并且基于这个问题，看起来你必须使用 mySQL。

尝试这个：

```
class myClass {
     private int ID;
     private int value;

     @Temporal(TemporalType.TIMESTAMP)
     private java.sql.Timestamp date;
} 
```

# svn - 当我没有更改任何文件时，为什么 svn 状态显示已修改？

> ID：15389087
> 
> 赞同：6
> 
> 时间：2013-03-13T15:09:31.917
> 
> 标签：svn

SVN状态出于某种原因显示：

```
 M      . 
```

这意味着当前目录已被修改。但为什么？我在主 svn 存储库中创建了一个名为 .git 的目录。

然后我将 git 添加到忽略列表中：

```
svn propedit svn:ignore . 
```

但它仍然显示：

```
 M      . 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T15:19:38.870

当您忽略文件夹/文件时，父文件夹会被标记为已修改，直到下一次提交，但它不会更改其子文件夹的状态。我认为您应该尝试提交父文件夹 (..) 。.git 上的修改将被提交，然后被忽略。

顺便问一下，这个项目是如何在两个版本系统下进行的？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-09-24T13:16:40.747

也可能是您合并了主干或任何其他内容，然后忘记提交 -

在我的情况下`svn diff`显示：

```
--- .   (revision 2723)
+++ .   (working copy)

Property changes on: .
___________________________________________________________________
Modified: svn:mergeinfo
   Merged /trunk/CrowdRoamingV2:r2667-2722 
```

您可以看到 th 现在在该分支中保存了合并信息。

# css - Firefox 在使用 display: inline-block 时中断；

> ID：15389090
> 
> 赞同：-2
> 
> 时间：2013-03-13T15:09:38.280
> 
> 标签：css, google-chrome, firefox

我目前有一个奇怪的跨浏览器问题。

2.5 秒后，一个表单进入。这在 IE 和 Chrome 中运行良好，但不知何故它在 FF 中不适用。这是 HTML 部分

```
<div id="holder"><a href="javascript:void(0);" id="main"></a></div><div id="dropDiv"><form>
<input class="geld-input" type="text" name="email" value="Vul hier je e-mail in en krijg direct toegang tot de geheime pagina..." value="Vul hier je e-mail in en krijg direct toegang tot de geheime pagina..." onclick="if(this.value=='Vul hier je e-mail in en krijg direct toegang tot de geheime pagina...')this.value='';this.focus();" onblur="if(this.value=='')this.value='Vul hier je e-mail in en krijg direct toegang tot de geheime pagina...';" tabindex="501"  /><input class="geld-submit" type="submit" value="Krijg Direct Toegang" /></form></div></div> 
```

这是CSS部分：

```
#holder { position: absolute; top: 550px;  margin:0 auto; width:100%; display: inline-block;}
#dropDiv {
 display: none;
 position: absolute;
 top: -20px;
} 
```

现在，如果我删除#holder div 上的“display:inline-block”部分，那么它可以在 FF、IE 中工作，但不能在 chrome 中工作。

如果你想查看完整的源代码：[http ://www.luukratief.com/lander](http://www.luukratief.com/lander)

有人能告诉我要怎么做这个跨浏览器吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T01:52:05.000

您没有`left`在`#holder`. 这意味着使用了静态位置，但规范并没有完全定义在各种边缘情况下是什么。此外，浏览器的计算方式不同，具体取决于最容易实现的方式，因为规范并没有定义行为。

您可能想做类似`left: 0`.

# sql - 如何在sql select中排除具有某些值的记录

> ID：15389091
> 
> 赞同：22
> 
> 时间：2013-03-13T15:09:41.813
> 
> 标签：sql, sql-server, tsql, exists

我如何只选择没有客户的商店`5`？

```
StoreId   ClientId   
-------   ---------
  1         4     
  1         5      
  2         5     
  2         6      
  2         7   
  3         8 
```

我正在尝试这样的事情：

```
SELECT SC.StoreId FROM StoreClients
INNER JOIN StoreClients SC
    ON StoreClients.StoreId = SC.StoreId
    WHERE SC.ClientId = 5
GROUP BY StoreClients.StoreId 
```

这似乎让我找到了所有拥有该客户的商店，但我不能做相反的事情，因为如果我`<> 5`生病了，我仍然会得到 Store`1`并且`2`我不想要。

我基本上是在尝试在另一个查询的`EXISTS IN`子句中使用这个结果

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2013-03-13T15:12:14.680

单程：

```
SELECT DISTINCT sc.StoreId
FROM StoreClients sc
WHERE NOT EXISTS(
    SELECT * FROM StoreClients sc2 
    WHERE sc2.StoreId = sc.StoreId AND sc2.ClientId = 5) 
```

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2013-03-13T15:12:43.323

```
SELECT SC.StoreId 
FROM StoreClients SC
WHERE SC.StoreId NOT IN (SELECT StoreId FROM StoreClients WHERE ClientId = 5) 
```

这样既没有`JOIN`也没有`GROUP BY`必要。

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2013-03-13T15:11:49.380

```
SELECT  DISTINCT a.StoreID
FROM    tableName a
        LEFT JOIN tableName b 
          ON a.StoreID = b.StoreID AND b.ClientID = 5
WHERE   b.StoreID IS NULL 
```

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!2/75345/3)

输出

```
╔═════════╗
║ STOREID ║
╠═════════╣
║       3 ║
╚═════════╝ 
```

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2013-03-13T15:12:23.507

```
SELECT StoreId
FROM StoreClients
WHERE StoreId NOT IN (
  SELECT StoreId
  FROM StoreClients
  Where ClientId=5
) 
```

[**SQL小提琴**](http://sqlfiddle.com/#!6/704c6/2/0)

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2016-11-08T15:55:26.503

您可以使用[`EXCEPT`语法](https://msdn.microsoft.com/en-us/library/ms188055.aspx)，例如：

```
SELECT var FROM table1
EXCEPT
SELECT var FROM table2 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2013-03-13T15:17:52.970

`<>`肯定会给你所有不等于 5 的值。如果你在表中有多个记录，它会给你除了 5 之外的所有值。另一方面，如果你只有一个，你肯定会得到一个。给出表模式，以便可以正确地帮助您

# jquery - 有点困惑如何响应铁路 3 的远程链接到的…

> ID：15389092
> 
> 赞同：0
> 
> 时间：2013-03-13T15:09:41.963
> 
> 标签：jquery, ruby-on-rails, ajax, jquery-ui, response

`remote => true`我一直在表单上使用导轨。在 jquery 中，我使用`'ajax:before'`and`'ajax:success'`来获取页面上的事件，在控制器中，我执行以下操作来响应 ajax 或 html 调用：

```
format.html{
    redirect_to xxxx_path
}
format.json { 
    render :json => { :something => true }
} 
```

但是，我似乎在将远程 true 放在链接上时遇到了很多问题。

当我将 remote true 放在链接上时，如果我执行formal.json（如下），则在控制器中响应它什么都不会触发：

```
format.json { 
    render :json => { :something => true }
} 
```

如果我这样做：

```
format.js{  } 
```

…在控制器中，jquery 中有一个响应。但是`'ajax:success'`没有调用事件，只调用了事件`'ajax:complete'`，这是不正确的。

我想知道如何在 rails 3 中设置远程链接，如果链接是远程的或只是普通的 html 调用，我可以在控制器中以不同的方式响应。因此，使用 json 响应远程链接，使用 html 响应普通链接。以及如何让 jquery 获取 'ajax:success' 响应。我对这一切是如何运作的感到有点困惑。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T16:48:09.907

你能缩小你的问题提供代码吗？

在上面，'ajax:before' 应该是'ajax:beforeSend'。

在您的控制器中，您可以使用类似的东西测试请求是否是 ajax

```
if request.xhr?
  render nothing: true
else
  redirect_to @your_object
end 
```

您应该将格式添加到远程链接，以确保控制器知道要回答什么

```
:'data-type' => 'html' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T16:46:22.200

我认为您可能需要在 url 中指定格式 json。

例如

```
<%= link_to some_path(format: :json, remote: true) %> 
```

# dotnetnuke - 替换已弃用的 RoleController.GetUserRoles()

> ID：15389098
> 
> 赞同：3
> 
> 时间：2013-03-13T15:09:52.713
> 
> 标签：dotnetnuke

在 DotNetNuke 7 之前，可以使用以下方法获取用户所属角色的列表：

```
DotNetNuke.Security.Roles.RoleController rc = new DotNetNuke.Security.Roles.RoleController();

foreach (Entities.Users.UserRoleInfo roleInfo in rc.GetUserRoles(portalID, userID))
{
    string roleName = roleInfo.RoleName;
} 
```

但是，从 DNN7 开始，该`GetUserRoles`功能已被弃用。

这个功能有什么替代品？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-13T15:09:52.713

我在任何地方都找不到这方面的任何信息，所以我浏览了 API 并发现了以下内容：

```
int portalID = PortalController.GetCurrentPortalSettings().PortalId;
DotNetNuke.Security.Roles.RoleController rc = new DotNetNuke.Security.Roles.RoleController();
Entities.Users.UserInfo info = DotNetNuke.Entities.Users.UserController.GetUserById(portalID, userID);

foreach (string roleName in info.Roles)
{
    Security.Roles.RoleInfo role = rc.GetRoleByName(portalID, roleName);
    Entities.Users.UserRoleInfo roleInfo = rc.GetUserRole(portalID, userID, role.RoleID);
} 
```

这可以替代上述代码，获取`UserRoleInfo`对象 - 如果以迂回的方式！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-17T16:00:22.823

如果您填充 UserInfo 对象，则会有一个 Roles 数组，其中列出了用户所在的所有角色。

# ruby-on-rails - minitest 测试和代码覆盖率

> ID：15389107
> 
> 赞同：6
> 
> 时间：2013-03-13T15:10:08.283
> 
> 标签：ruby-on-rails, ruby, omniauth, minitest

我`mini-test`用于测试框架。我使用`omniauth`gem 进行身份验证。我`simplecov`用于代码覆盖率。`"bundle exec rake"`我使用or运行我的测试`"rake minitest:controllers"`。我举一个控制器的例子。当我运行时`rake minitest:controllers`，控制器代码覆盖率变为 100%。但是，当我运行时`bundle exec rake`，控制器代码覆盖率变为 60%。

SessionsController.rb 代码：

```
 class SessionsController < ApplicationController
   def create
     auth = request.env["omniauth.auth"]
     person=Person.find_by_provider_and_uid(auth.provider,auth.uid) || Person.create_with_omniauth(auth)
     redirect_to root_path
   end
end 
```

SessionsController_test.rb

```
require "minitest_helper"

describe SessionsController do
  before do
    request.env["omniauth.auth"] = OmniAuth.config.mock_auth[:identity] 
    @person = Fabricate.build(:person)
  end

  it "should create authentication" do
    assert_difference('Person.count') do
      post :create, :provider => "identity"
    end
    assert_redirected_to root_path @person
  end
end 
```

我想知道如果我错过了写作考试的一分。我等你的想法。提前致谢。

## 编辑

minitest_helper.rb

```
require 'simplecov'
Simplecov.start

ENV["RAILS_ENV"] = "test"
require File.expand_path('../../config/environment', __FILE__)

require "minitest/autorun"
require "minitest/rails"
require "minitest/pride"
require 'database_cleaner'
require "minitest/rails/capybara"

require "minitest-mongoid"

DatabaseCleaner[:mongoid].strategy = :truncation
#OmniAuth.config.test_mode = true
OmniAuth.config.add_mock(:identity, {
    :uid => '12345'

})

class MiniTest::Spec
 before :each do
    DatabaseCleaner.start
  end

  after :each do
    DatabaseCleaner.clean
  end
end 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2019-06-17T09:02:39.160

根据[Simplecov 的文档](https://github.com/colszowka/simplecov#getting-started)，您只需在您的顶部添加这些行`test/test_helper.rb`：

```
# test/test_helper.rb
require 'simplecov'
SimpleCov.start
# ... 
```

也不要忘记在测试组中安装 simplecov gem：

```
# Gemfile
# ...
group :test do
  gem 'simplecov'
end 
```

就是这样。

**Rails 6**：我遇到了 Rails 6 的一些问题并测试了并行化，因此您可以在以下位置停用它`test/test_helper.rb`：

```
# test/test_helper.rb
# ...
class ActiveSupport::TestCase
  # ...
  # parallelize(workers: 2)
end 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-05-17T09:18:07.307

没有更多信息很难说。

首先尝试`rake minitest:all`用结果更新您的问题。

如果之前的测试没有得出肯定的结论，请尝试以下操作：

```
namespace :test do
  task :coverage do
    require 'simplecov'
    SimpleCov.start 'rails' # feel free to pass block
    Rake::Task["test"].execute
  end
end 
```

让我们知道，我们可以编辑或更新答案。

众所周知，Minitest 遇到了一些问题。我相信它仍在进行中，不确定他们现在的位置。不是你，是最小的。该解决方法在某些情况下有所帮助，也许它也对您有所帮助。

# spring - Spring 运行时对象/bean 创建

> ID：15389108
> 
> 赞同：3
> 
> 时间：2013-03-13T15:10:09.927
> 
> 标签：spring, object, runtime, instantiation

我正在开发一个使用spring-framework（v3.2.1）的项目，但由于我对spring的做事方式不熟悉，我目前遇到以下问题......如果有人可以指出我正确的方向：

我正在尝试在运行时创建 Job 类的实例。Job 类本身使用了 Job 类中的一些 @Autowired 服务。由于自动装配仅适用于弹簧容器控制下的对象.​​.....我想到的第一件事如下：

```
@Component
@Scope("prototype")
class Job{

  @Autowired
  MyService service

  String name
  String group
  .
  .
  .

  public Job(){

  }

  public Job(String name, String group){

    this.name = name;
    this.group = group;

  }

  public void start(){

    //some code, use of service etc.
  }

} 
```

现在我可以使用应用程序上下文通过调用`context.getBean("job")`. 新的作业实例是通过调用默认构造函数创建的，因此我必须在获得新的作业实例后设置名称和组参数：

```
Job j = context.getBean("job");

j.setName("Test");
j.setGroup("someGroup");
j.start() 
```

我目前正在尝试确定是否有某种方法可以指定将在运行时创建作业实例的参数。这样我就可以实例化具有不同状态的作业类的新对象。

正如我上面提到的，我目前被困在这里并且由于我缺乏春季经验，我很难找出实现这一目标的最佳方法。也许有一些普遍接受的方式或模式来做这些事情。如果有更多春季经验的人能指出我正确的方向，那就太好了。

非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T15:44:05.497

这是（[http://static.springsource.org/spring/docs/current/javadoc-api/org/springframework/beans/factory/BeanFactory.html#getBean(java.lang.String](http://static.springsource.org/spring/docs/current/javadoc-api/org/springframework/beans/factory/BeanFactory.html#getBean(java.lang.String) , java.lang.Object.. .) 你需要的方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T15:50:29.543

BeanFactory getBean(String name, Object[] args)

您可以使用它来传递参数数组

# java - 如何将带有动态字段的 Json String 转换为 Object？

> ID：15389110
> 
> 赞同：9
> 
> 时间：2013-03-13T15:10:14.233
> 
> 标签：java, json

我有以下 Json String 片段：

```
 {
  "networks": {
    "tech11": {
        "id": "1",
        "name": "IDEN"
    },
    "tech12": {
        "id": "2",
        "name": "EVDO_B"
    }
 }
} 
```

我使用一些方法将此字符串转换为对象：

```
 private static Gson mGson = new Gson();

    ...

public static WebObjectResponse convertJsonToObject(String jsonString) {

    WebObjectResponse webObjectResponse = null;

    if(jsonString != null && jsonString.length() > 1){
        webObjectResponse = mGson.fromJson(jsonString, WebObjectResponse.class);
    }

    return webObjectResponse;

} 
```

`WebObjectResponse`应该代表上述字符串的类在哪里。

如果我得到静态字段，它并不复杂。但在我的情况下，这些值有不同的名称：`tech11`, `tech12`....

我可以使用`@SerializedName`，但它在特定情况下有效，例如将“class”转换为“class_”。如您所见`networks`，对象定义为`tech`对象列表，但具有不同的后缀。

```
public class WebObjectResponse{
 private DataInfoList networks = null;
} 
```

这是静态实现，我定义了 2 个值`tech11`，`tech12`但下一个响应可能是`techXX`

```
public class DataInfoList {
 private DataInfo tech11 = null;
 private DataInfo tech12 = null;
}

public class DataInfo {
 private String id = null;
 private String name = null;
} 
```

**将当前 Json String 转换为 Object 的好方法是什么，其中元素列表也是 Objects 并且具有不同的名称？**

谢谢你。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-13T15:25:58.307

使用地图！

我会做以下事情

```
public class WebObjectResponse {
     private Map<String, DataInfo> networks;
} 

public class DataInfo {
     private String id = null;
     private String name = null;
}

// later
Gson gson = new Gson();
String json = "{\"networks\": {\"tech11\": { \"id\": \"1\",\"name\": \"IDEN\" },  \"tech12\": { \"id\": \"2\", \"name\": \"EVDO_B\" }    }}";

WebObjectResponse response = gson.fromJson(json, WebObjectResponse .class); 
```

对于 json`networks`中的每个对象，都会将一个新条目添加到`Map`您的类的字段中`WebObjectResponse`。然后，您可以通过密钥集引用它们`techXX`或迭代它们。

假设这样的结构

```
{
  "networks": {
    "tech11": {
        "id": "1",
        "name": "IDEN"
    },
    "tech12": {
        "id": "2",
        "name": "EVDO_B"
    },
    "tech13": {
        "id": "3",
        "name": "WOHOO"
    }, ...
  }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-13T15:17:33.657

我们需要您的班级结构以获取更多详细信息。

据我所知，我认为您需要在某处定义一些映射（我使用了 xml），然后尝试将 json 与其中一个映射匹配以创建对象。

谷歌 gson 不错。我在[杰克逊做过](http://www.mkyong.com/java/how-to-convert-java-object-to-from-json-jackson/)

此外，转换对象应该是微不足道的。但是由于您可能有像`tech11`and这样的变量字段`tech12`，您可能希望将“网络”值存储为字符串，然后在需要时从中提取字段。

希望我能帮上忙。

编辑： Sotiirious 指出它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-02-23T10:48:11.027

请使用此链接将 SON 响应转换为 Java POJO 类 [http://www.jsonschema2pojo.org/](http://www.jsonschema2pojo.org/)

# objective-c - NSImageView setImage 导致 NSView 未正确初始化

> ID：15389116
> 
> 赞同：0
> 
> 时间：2013-03-13T15:10:38.813
> 
> 标签：objective-c, macos

我正在编写一个网络程序，它将图像从 iPhone 发送到 Mac。我的连接正常，并且可以正常传递数据，但我的问题是当我发送图像时，我尝试显示它并收到以下警告：

> NSImageView(0x101321fd0) - NSView 未正确初始化。你忘了打电话给super吗？

这是代码，它是引发错误的“setImage”命令。

这是我对 Objective-C 的第一次重大冒险，我担心我把 xib 搞砸了，但我不能确定。

```
imageView = [NSImageView alloc];
[imageView setImage:theImage];

NSLog(@"Should be able to see image now.."); 
```

如果这对于直接回答来说太模糊了，那么您可以指导我的任何提示、参考资料或教程都将非常受欢迎。

谢谢你的时间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T15:35:58.337

您忘记初始化 imageView。

```
 imageView = [[NSImageView alloc] initWithFrame:someFrame] 
```

# c# - 如何从代码隐藏中的幻想框内的字段中检索数据

> ID：15389117
> 
> 赞同：0
> 
> 时间：2013-03-13T15:10:40.903
> 
> 标签：c#, asp.net, html, fancybox, fancybox-2

**背景**

所以我正在构建一个仪表板。在某些时候，用户按下“添加小部件”按钮。一个fancybox 将目标div 加载到一个fancybox 中。代码如下所示：

```
<script type="text/javascript">
        $(document).ready(function (){
                $("#various1").fancybox({
                    'titlePosition': 'inside',
                    'transitionIn': 'none',
                    'transitionOut': 'none',
                    'closeBtn': 'true'

                });
        });
    </script>

<!-- Add Widget Button-->
    <div class="cell_title_buttonAddWidget" style="right: 90px;">
        <a id="various1" href="#AddWidget">Add New Widget</a>
    </div> 
```

花式框包含一些文本字段和下拉列表。这些下拉列表由数据库数据填充。用户做出选择（例如，他想在小部件中看到哪种类型的图表）。最终，用户选择了他所有的选择并在文本字段中输入了文本（例如小部件标题）。用户按下“保存”按钮。代码如下所示（为简单起见，我只为小部件标题添加了一个字段）：

```
<div style="display: none">
        <div id="AddWidget" style="width:800px">
             <div class="cell" style="margin: 0;">
                    <div class="cell_title">Add Widget</div>
                    <table style="margin: 10px;">
                        <tbody>
                            <tr>
                            <td class="form_label">Widget Title:</td>
                            <td>
                                <input id="AddWidgetTitle" runat="server" style="width: 250px;">
                            </td>
                        </tr>
                            <tr>
                                <td class="form_label"></td>
                                <td>
                                    <input id="saveWidget" runat="server" type="button" value="Save" OnServerClick="saveWidget_Click">
                                </td>
                            </tr>
                        </tbody>
                    </table>
              </div>
        </div>
</div> 
```

**我现在想要完成的事情**

按下保存按钮后，我希望触发 saveWidget_Click 函数，它确实如此。然后我想通过读取 AddWidgetTitle.value 将 AddWidgetTitle 的值放入字符串中（稍后放入数据库）。

**问题**

按下输入按钮后，我在代码隐藏中触发了 saveWidget_Click 函数。但是，在这样做之前，会执行 page_load 函数。此时所有文本字段和下拉列表中的选定项都是空的。文本字段为“”。我想通过在我的数据库中启动一个 INSERT 查询行来将数据保存在 saveWidget_Click 函数中，但是数据是空的。

也许我正在以错误的方式接近“其中包含数据的弹出窗口”。但我希望我只是错过了一些东西，而我想要的东西可以使用fancybox。

**综上所述**

我可以用数据库数据填充我的幻想框中的文本字段和下拉列表。但是，我无法在我的数据库中保存已编辑的文本字段和选定的下拉列表项，因为按下保存按钮后，页面会重新加载并且所有输入的数据都消失了。

# javascript - 在鼠标移出时删除谷歌地图自定义标记

> ID：15389122
> 
> 赞同：0
> 
> 时间：2013-03-13T15:10:50.263
> 
> 标签：javascript, google-maps-api-3

我创建的地图有多个用多边形勾勒的区域。当用户将鼠标悬停在某个部分上时，会弹出一个自定义标记，并且在鼠标移出时该标记消失。我已经让一切正常，但无法弄清楚如何让标记在鼠标移出时消失。下面的代码并不是每个部分，但我希望仅仅展示一个部分的工作方式就可以提供足够的信息。我对 Maps API 和 javascript 有点陌生，所以我希望我能正确设置第一部分，但我会喜欢任何建议。我想我需要以某种方式访问​​ noMarker 函数中的标记...

```
 //Sets up the polygon    
    var mapWC = new google.maps.Polygon({
        paths: coordsWC,
        strokeColor: "#14b400",
        strokeOpacity: 0.5,
        strokeWeight: 3,
        fillColor: "#14b400",
        sectionName: "West Cambridge",
        markerImage: 'images/hood-marker.png',
        markerLL: new google.maps.LatLng(42.3751819960975,-71.15445431301595),
        fillOpacity: 0.33
        });

     mapWC.setMap(map);

//Mouse in and out
     google.maps.event.addListener(mapWC, 'mouseover', showMarker);
     google.maps.event.addListener(mapWC, 'mouseout', noMarker);

//functions
function showMarker(){
//var secName = this.sectionName;
//console.log(secName);
var image = this.markerImage;
var myLatLng = this.markerLL;
var themarker = new google.maps.Marker({
position: myLatLng,
map: map,
icon: image
});
} // End showMarker

function noMarker(){
//console.log("Moused Out");                
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T16:18:37.977

保留对在 javascript 顶部声明的标记的变量引用，例如`var marker;`

看我的[**JS 小提琴**：在鼠标上下显示和隐藏标记](http://jsfiddle.net/NUkCs/1/)

**编辑：**我注意到我使用法线贴图而不是多边形演示了这一点 - 但相同的代码应该可以工作，因为多边形似乎支持相同的事件，请参见此处的列表：[google maps api polygon events](https://developers.google.com/maps/documentation/javascript/reference#Polygon)

好吧，这是使用多边形时的示例：**[JS fiddle polygon](http://jsfiddle.net/NUkCs/3/)**，技巧是将标记存储到实际的多边形对象中，这样很容易访问，至少我是这么认为的:) - 如果你想添加几个多边形，请尝试存储它们都在数组中，而不是一些全局多边形变量；）干杯！

# javascript - 模块移动到 /all/modules 后，Nice Menus drupal 模块在 Firefox 中不起作用

> ID：15389123
> 
> 赞同：0
> 
> 时间：2013-03-13T15:10:51.587
> 
> 标签：javascript, css, drupal

我目前正在清理一个杂乱无章的drupal 站点，我将在接下来的几个月中管理该站点。我的第一步是将所有自定义模块移动到 /sites/all/modules

在所有浏览器中，这不会导致任何问题，除了 firefox。菜单正确呈现，但不接受鼠标输入......当我将模块复制回 /modules/ 时，一切都很好。

我检查了所有源文件以查找隐藏的硬编码引用，但找不到任何东西。

也许有人可以让我开始下一步在哪里寻找解决方案？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T15:33:12.850

将模块移动到新目录后，您需要重建系统表。最好的方法是`drush rr`你需要在你的系统上安装[drush](http://drupal.org/project/drush)和[registry_rebuild](http://drupal.org/project/registry_rebuild)模块，但它会快速重写你的系统表以匹配新的文件结构。您还应该能够通过访问 /modules 页面来重建系统表。

# python - Django-tastypie：如何以编程方式建模资源？

> ID：15389126
> 
> 赞同：0
> 
> 时间：2013-03-13T15:10:53.993
> 
> 标签：python, django, backbone.js, tastypie

我在 resources.py 中创建了许多 Django-tastypie 资源定义。它们中的大多数将通过从 javascript 端 (backbone-tastypie) 发布来创建，但其中一些我希望能够直接从 python 代码/django 视图创建。这样做的原因是对象创建逻辑和授权参数应该保存在一个地方。

是否有一些巧妙的方法可以在 Python 代码中创建 TastyPie ModelResource？（可能正在使用“请求”模块制作“帖子”？）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T16:06:50.593

[如果我理解你的正确，你的用例在美味的食谱中描述： http](http://django-tastypie.readthedocs.org/en/latest/cookbook.html#using-your-resource-in-regular-views) ://django-tastypie.readthedocs.org/en/latest/cookbook.html#using-your-resource-in-regular-views

# wpf - 如何绑定到 ContentControl 的数据模板中的数据

> ID：15389142
> 
> 赞同：27
> 
> 时间：2013-03-13T15:11:50.623
> 
> 标签：wpf, data-binding, datatemplate, resourcedictionary, contentcontrol

我有以下简化示例：

```
 <Window x:Class="TemplateBinding.MainWindow"
            xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
            xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
            Title="MainWindow" Height="350" Width="525">
        <Window.Resources>
            <ResourceDictionary>
                <ResourceDictionary.MergedDictionaries>
                    <ResourceDictionary
                            Source="pack://application:,,,/TemplateBinding;component/PersonTemplate.xaml" />
                </ResourceDictionary.MergedDictionaries>
            </ResourceDictionary>
        </Window.Resources>
        <Grid>
            <ContentControl ContentTemplate="{StaticResource PersonTemplate}" />
        </Grid>
    </Window> 
```

和：

```
 <ResourceDictionary xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
                        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml">

        <DataTemplate x:Key="PersonTemplate">
            <Border Width="100" Height="100" Background="RosyBrown">
                <TextBlock Text="{Binding Path=FirstName}" VerticalAlignment="Center" TextAlignment="Center"/>
            </Border>
        </DataTemplate>

    </ResourceDictionary> 
```

作为我在单独的 ResourceDictionary 文件中的 DataTemplate。

我在我的 MainWindow 的构造函数中设置了我的 DataContext 并通过只显示这样的名字来验证它`<ContentControl Grid.Row="1" Content="{Binding FirstName}"/>`：

在另一种情况下，我将 DataTemplate 与 a 一起使用，`ListBox`我在 DataTemplate 中以完全相同的方式进行绑定，并且它可以正常工作。

我知道除了绑定之外 DataTemplate 正在工作，因为它正确显示了大小和背景颜色。

我究竟做错了什么？我的 DataTemplate 中的绑定看起来如何？

* * *

## 回答 #1

> 赞同：64
> 
> 时间：2013-03-13T15:18:43.797

您需要绑定的`Content`属性`ContentControl`

```
<ContentControl Content="{Binding}" ContentTemplate="{StaticResource PersonTemplate}" /> 
```

这会将 ContentControl 的 DataContext 设置为控件的内容。

Setting only the `ContentTemplate` property is not enough. The ContentControl does not implicitly use its DataContext as Content.

# jquery - css 属性选择器 tag[foo="bar"] 是否被浏览器优化/索引？

> ID：15389146
> 
> 赞同：0
> 
> 时间：2013-03-13T15:11:54.377
> 
> 标签：jquery, performance, optimization, browser, css-selectors

我正在构建一个可能会变得非常繁重的应用程序，并且我阅读了有关浏览器解析 css 的方式的[答案。](https://stackoverflow.com/a/5813672/1935128)当我`$('#questionnaire .answer[data-value="value"]')`经常使用选择器时，我想知道这些选择器是否被索引为我所知道的 ID 和类。

提前致谢。

# ejb - Webcontainer / EJB 容器：JSF 托管 Bean？

> ID：15389150
> 
> 赞同：1
> 
> 时间：2013-03-13T15:12:17.423
> 
> 标签：ejb, containers, managed-bean, presentation, web-container

JSF Managed Beans 应该在哪个容器中？在 web 容器中还是在 EJB 容器中？

据我了解，presentationslayer - 应该是 web 容器 - 应该包含 JSF Managed Beans？EJB 容器应该只包含具有业务逻辑和 Web 服务的 EJB bean？我在这里吗？

我一直在谷歌搜索答案，但没有找到任何东西，所以希望我能在这里得到一些帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-13T19:11:38.740

JSF 不在 EJB 容器中运行。Tomcat 只有一个 Web 容器，但支持 JSF 和托管 bean。

Servlet 在 Web 容器中运行。由于 JSF 使用 servlet (FacesServlet)，它将在 web 容器中运行。

[在这里](http://docs.oracle.com/javaee/6/tutorial/doc/bnacj.html)，您可以看到 Web 和 EJB 容器中可用的内容。

# c# - 如何确保设置了 Asp .net 控件的属性

> ID：15389155
> 
> 赞同：0
> 
> 时间：2013-03-13T15:12:31.703
> 
> 标签：c#, webforms

当我构建我的用户控件时，我想确保用户在使用我的控件时应该在他们的代码中设置一些属性。例如，假设我构建了一个客户用户控件，我的团队中的其他开发人员将使用该控件。我公开的一些属性是：`CustomerId`, `FirstName`, `LastName`, `Address1`, `City`,`State`和`ZipCode`. 我想确保我的控件的任何使用者都设置了`CustomerId`，如果他/她忘记设置该属性，他们应该会得到某种错误。`CustomerId`在未设置属性的情况下会导致编译时错误的解决方案会有所帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T15:20:48.033

经过快速搜索，我想出了以下资源：

[http://www.w3schools.com/aspnet/aspnet_refvalidationcontrols.asp](http://www.w3schools.com/aspnet/aspnet_refvalidationcontrols.asp)

这是使用所需验证器的示例

```
<!DOCTYPE html>
<html>
<body>

<form runat="server">
    Name: <asp:TextBox id="name" runat="server" />
    <br>
    Age: <asp:TextBox id="age" runat="server" />
    <br><br>
    <asp:Button runat="server" Text="Submit" />
    <br><br>
    <asp:RequiredFieldValidator
    ControlToValidate="name"
    Text="The name field is required!"
    runat="server" />
</form>

</body>
</html> 
```

[这是示例的来源](http://www.w3schools.com/aspnet/showasp.asp?filename=demo_reqfieldvalidator)

# android - FFmpeg：未定义对“主”的引用

> ID：15389156
> 
> 赞同：1
> 
> 时间：2013-03-13T15:12:36.627
> 
> 标签：android, ffmpeg, java-native-interface, jniwrapper

我尝试构建库并获得：

```
undefined reference to 'main' collect2: ld returned 1 exit status 
```

这是我在 jni 文件夹中添加的 .c 文件：

```
#include <stdlib.h>
#include "creator.h"

// Use to safely invoke ffmpeg multiple times from the same Activity
JNIEXPORT void JNICALL Java_com_appunite_ffmpeg_FFmpegCreator_run(JNIEnv *env, jobject obj, jobjectArray args)
{
int i = 0;
int argc = 0;
char **argv = NULL;

if (args != NULL) {
    argc = (*env)->GetArrayLength(env, args);
    argv = (char **) malloc(sizeof(char *) * argc);

    for(i=0;i<argc;i++)
    {
        jstring str = (jstring)(*env)->GetObjectArrayElement(env, args, i);
        argv[i] = (char *)(*env)->GetStringUTFChars(env, str, NULL);
    }
}

main(argc, argv);
} 
```

这是一个 .h 文件：

```
/* DO NOT EDIT THIS FILE - it is machine generated */
#include <jni.h>
/* Header for class com_appunite_ffmpeg_FFmpegCreator */

#ifndef _Included_com_appunite_ffmpeg_FFmpegCreator
#define _Included_com_appunite_ffmpeg_FFmpegCreator
#ifdef __cplusplus
extern "C" {
#endif
/*
 * Class:     com_appunite_ffmpeg_FFmpegCreator
 * Method:    run
 * Signature: ([Ljava/lang/String;)V
*/
JNIEXPORT void JNICALL Java_com_appunite_ffmpeg_FFmpegCreator_run(JNIEnv *, jobject, jobjectArray);

#ifdef __cplusplus
}
#endif
#endif 
```

当我评论 main(argc, argv) - 构建成功，否则 - 得到这个错误。有人可以帮我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T18:47:56.813

[https://github.com/jhotovy/android-ffmpeg/blob/master/Project/jni/ffmpeg_android/ffmpeg_android.c](https://github.com/jhotovy/android-ffmpeg/blob/master/Project/jni/ffmpeg_android/ffmpeg_android.c)中的解决方案有点奇怪。

它作为 Java 程序运行，调用 中的 C 代码`ffmpeg_android.c`，然后该代码调用 ffmpeg C`main`方法（与直接从命令行运行 ffmpeg 时调用的方法相同）。这可能不是实现您想要的最佳方式。理想情况下，您将使用 ffmpeg API（如[libavcodec](http://ffmpeg.org/doxygen/trunk/group__libavc.html)）进行编码/解码。

尽管如此，您的方法应该仍然有效，我怀疑您收到链接错误的原因是因为您没有在 ffmpeg 代码中进行链接。您可以发布您正在运行的命令来构建 C 代码吗？确保您在源代码中包含 ffmpeg 源代码，或者您的链接行中有`-lffmpeg`某个位置。

# javascript - nicEdit : 将 key(press|up|down) 事件添加到编辑器

> ID：15389157
> 
> 赞同：4
> 
> 时间：2013-03-13T15:12:37.143
> 
> 标签：javascript, nicedit

我正在使用[nicEdit](http://nicedit.com "nic编辑")来拥有一个 RTF 文本区域，我需要添加一个`onkeypress`,`onkeyup`或`onkeydown`事件。

我像这样创建我的实例：

```
var emailRtf = new nicEditor({  iconsPath : 'nicEdit/nicEditorIcons.gif', 
    buttonList : ['bold','italic','underline','fontSize','forecolor','ol','ul','link','unlink','removeformat'],
    maxHeight: 600}).panelInstance('REPLY_MESSAGE'); 
```

我尝试了以下方法（使用`keypress`,`keydown`和`keyup`）：

```
emailRtf.addEvent("keypress", function() { alert('test') }); // Not working
emailRtf.addEvent("keypress", function(evt) { alert('test') }); // Not working 
```

但是，以下工作：

```
emailRtf.addEvent("blur", function() { alert('test') }); // Alert shows when I leave focus on the textArea 
```

如何添加`key(press|up|down)`到 nicEdit 编辑器？

**注意**：我的页面中有多个 RTF textarea 实例，我只需要将`key(press|down|up)`事件添加到一个。我发现[了这个](https://stackoverflow.com/questions/13163545/adding-keyup-action-to-iframe-of-version-of-niceedit "将 keyup 操作添加到 niceEdit 版本的 iframe")问题，它在所有实例上添加了事件。**另外，我想保持 nicEdit.js 完整。**

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-14T09:50:55.197

看看这里[限制所见即所得编辑器中的字符数（NicEdit）](https://stackoverflow.com/questions/8159106/limit-the-number-of-characters-in-a-wysiwyg-editor-nicedit)

它应该可以在不更改 nicedit.js 的情况下工作

```
$("div.nicEdit-main").keyup(function () { }); 
```

看看jsfiddle [http://jsfiddle.net/jGLRn/15/](http://jsfiddle.net/jGLRn/15/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-20T21:47:28.843

在此处阅读[官方文档](http://wiki.nicedit.com/w/page/518/Editor%20Events)。*它向您展示了如何在不使用 jQuery*的情况下将（它们支持的）事件绑定到您的 nicEdit 实例：

```
var commentNicEditor = new nicEditor().panelInstance('comment');
commentNicEditor.addEvent("blur", function () {
    // Sent when an editor instance loses focus    
});
commentNicEditor.addEvent("focus", function () {
    // Send when an editor gains focus (IE someone clicks inside it)    
});
commentNicEditor.addEvent("key", function () {
    // When the user presses a shortcut key (Such as control-b)    
});
commentNicEditor.addEvent("add", function () {
    // Fired when a new instance is added    
});
commentNicEditor.addEvent("panel", function () {
    // Fired when the toolbar is initialized for new instances (This is the preferred event if you want to add a function when NicEdit instances are created)    
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-14T00:13:08.627

经过一天的研究，不修改nicEdit.js是不行的。但是，我能够进行很少的更改。它们在这里（我使用的是 0.9r24 版本）：

我添加了一个名为`customKeyDownFunction`. 默认情况下它什么也不做。

```
var nicEditorConfig = bkClass.extend({
    buttons : {
        'bold' : {name : __('Click to Bold'), command : 'Bold', tags : ['B','STRONG'], css : {'font-weight' : 'bold'}, key : 'b'},
        'italic' : {name : __('Click to Italic'), command : 'Italic', tags : ['EM','I'], css : {'font-style' : 'italic'}, key : 'i'},
        'underline' : {name : __('Click to Underline'), command : 'Underline', tags : ['U'], css : {'text-decoration' : 'underline'}, key : 'u'},
        'left' : {name : __('Left Align'), command : 'justifyleft', noActive : true},
        'center' : {name : __('Center Align'), command : 'justifycenter', noActive : true},
        'right' : {name : __('Right Align'), command : 'justifyright', noActive : true},
        'justify' : {name : __('Justify Align'), command : 'justifyfull', noActive : true},
        'ol' : {name : __('Insert Ordered List'), command : 'insertorderedlist', tags : ['OL']},
        'ul' :  {name : __('Insert Unordered List'), command : 'insertunorderedlist', tags : ['UL']},
        'subscript' : {name : __('Click to Subscript'), command : 'subscript', tags : ['SUB']},
        'superscript' : {name : __('Click to Superscript'), command : 'superscript', tags : ['SUP']},
        'strikethrough' : {name : __('Click to Strike Through'), command : 'strikeThrough', css : {'text-decoration' : 'line-through'}},
        'removeformat' : {name : __('Remove Formatting'), command : 'removeformat', noActive : true},
        'indent' : {name : __('Indent Text'), command : 'indent', noActive : true},
        'outdent' : {name : __('Remove Indent'), command : 'outdent', noActive : true},
        'hr' : {name : __('Horizontal Rule'), command : 'insertHorizontalRule', noActive : true}
    },
    iconsPath : '../nicEditorIcons.gif',
    buttonList : ['save','bold','italic','underline','left','center','right','justify','ol','ul','fontSize','fontFamily','fontFormat','indent','outdent','image','upload','link','unlink','forecolor','bgcolor'],
    iconList : {"bgcolor":1,"forecolor":2,"bold":3,"center":4,"hr":5,"indent":6,"italic":7,"justify":8,"left":9,"ol":10,"outdent":11,"removeformat":12,"right":13,"save":24,"strikethrough":15,"subscript":16,"superscript":17,"ul":18,"underline":19,"image":20,"link":21,"unlink":22,"close":23,"arrow":25},
    customKeyDownFunction : function() { }  
}); 
```

我修改了 keyDown 函数。

```
keyDown : function(e,t) {
    this.ne.options.customKeyDownFunction();

    if(e.ctrlKey) {
        this.ne.fireEvent('key',this,e);
    }
} 
```

当我创建我的 nicEditor 实例时，我定义`customKeyDownFunction`.

```
var emailRtf = new nicEditor({  
        iconsPath : 'nicEdit/nicEditorIcons.gif', 
        buttonList : ['bold','italic','underline','fontSize','forecolor','ol','ul','link','unlink','removeformat'],
        maxHeight: 600,
        customKeyDownFunction: function() { alert('key down!'); }
    }).panelInstance('REPLY_MESSAGE'); 
```

如果您不需要任何自定义函数，只需不要定义`customKeyDownFunction`.

```
var emailRtf = new nicEditor({  
        iconsPath : 'nicEdit/nicEditorIcons.gif', 
        buttonList : ['bold','italic','underline','fontSize','forecolor','ol','ul','link','unlink','removeformat'],
        maxHeight: 600
    }).panelInstance('REPLY_MESSAGE'); 
```

这是我能做的最好的了。如果有人有更好的方法，请告诉！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-11-22T20:34:29.280

或者您可以尝试这种方式：

```
$('body').on("keyup", ".nicEdit-main", function(){
  //Do Something...
} 
```

# c# - mvc 4 动态表单文件上传

> ID：15389161
> 
> 赞同：2
> 
> 时间：2013-03-13T15:12:44.240
> 
> 标签：c#, jquery, asp.net-mvc, razor, asp.net-mvc-4

我正在构建一个站点，用户可以在其中填写从数据库动态生成的多页表单。我使用 JQuery 将数据发布到我的控制器并返回表单的下一页。它适用于除文件之外的所有内容。

问题是将文件发布到我的控制器，我正在使用[这篇文章](http://forums.asp.net/post/4128352.aspx)中的 HtmlHelpers 为文件字段生成 html。

我的模型：

```
public class QuestionPage
{
    public const string Next = "next";
    public const string Prev = "prev";
    public const string Save = "save";

    public int currentID { get; set; }
    public bool advanced { get; set; }
    public QuestionPageItem[] questions { get; set; }
    public int pagenumber { get; set; }
    public int? next {  get; set; }
    public int? prev { get; set; }

    public string submitaction { get; set; }
    public int? gotoID { get; set; }

    public Dictionary<Int32, QuestionPageTitle> titles { get; set; }
}

public class QuestionPageItem
{
    public int id { get; set; }
    public string question { get; set; }
    public string description { get; set; }
    public bool required { get; set; }
    public QuestionType type { get; set; }
    public object answer { get; set; }
    public int? enableID { get; set; }
    public bool initHidden { get; set; }
    public QuestionOptionIndexModel[] options { get; set; }
} 
```

我的静态视图：

```
using (Html.BeginForm("Form", "QuestionPage", new { id = Model }, FormMethod.Post, new { id = "frm" + Model, name = Model, enctype = "multipart/form-data" }))
{
    <div id="formcontainer">
        @Html.Partial("_FormPartial", Model)
    </div>
} 
```

我的部分视图（_FormPartial）被 jQuery ajax 取代，简化：

```
 @model DPDF.Models.QuestionPage
    Some hidden fields...
    @for (int i = 0; i < Model.questions.Length; i++)
    {
        var question = Model.questions[i];
        Some hidden fields...
        <tr class="@(question.initHidden ? "hidden" : "")" id="@(question.id)" >
            show textbox or textarea or radio etc depending on question type, for instance
            @Html.TextBox("questions[" + i + "].answer", (question.answer == null ? string.Empty : question.answer.ToString()))
            in case of file field
            @Html.FileBox("questions[" + i + "].answer")
        </tr>
    } 
```

数据被绑定到问题对象中的答案字段。我的控制器动作：

```
 [AllowAnonymous]
    public ActionResult Form(QuestionPage model)
    {

        if (!ModelState.IsValid)
            return View(model);

        // this is to make some hidden fields get the correct new values
        ModelState.Clear();

        // do stuff to determine what page to show next...
        // save data, extract value from model.answer object depending on question type
        // make new model and return it
        if (Request.IsAjaxRequest())
            return PartialView("_FormPartial", model);
        return View(model);
    } 
```

文本框等普通字段返回类似 String[]{"test"} 的内容，文件字段返回 null。

编辑：也许问题出在javascript上？这是发布到服务器的代码：

```
 var $form = $(form);
    var $container = $('#formcontainer');
    $container.hide('slide', { direction: direction }, 500, function () {
        $.ajax({
            url: $form.attr('action'),
            type: $form.attr('method'),
            data: $form.serialize(),
            success: function (data, textStatus, jqXHR) {
                $container.html(data);
                updateOverzicht();
                $container.show('slide', { direction: (direction == 'left') ? 'right' : 'left' }, 500);
            }
        });
    }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T15:16:51.237

`answer`将类内部的类型更改`QuestionPageItem`为`HttpPostedFiledBase` **not** `object`：

```
public HttpPostedFileBase answer { get; set; } 
```

**实际上：**他真正的问题是因为他试图在 jQuery 中提交他的表单作为 Ajax 请求的一部分。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T16:58:51.420

正如mattytommo所提到的那样，文件上传是不可能的。

我想我会使用 JQuery 插件在页面上上传文件而不发布它。

我感谢 mattytommo 的帮助。

我不确定我是否应该将他的答案标记为正确，因为问题已在评论中得到解决。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-11-22T06:12:58.020

文件字段必须被索引，否则不会上传到服务器

```
<input type="file" name="Document_Path[0]" class="form-control" />
<input type="file" name="Document_Path[1]" class="form-control" />
<input type="file" name="Document_Path[2]" class="form-control" /> 
```

# asp.net - 在 gridview 中显示来自多个表的数据

> ID：15389163
> 
> 赞同：1
> 
> 时间：2013-03-13T15:12:51.227
> 
> 标签：asp.net, sql, gridview

您好，我有一些代码可以在 gridview 中显示来自数据源的数据。它应该从两个不同的表中获取列，但是页面永远不会加载（在 localhost 和 VS 调试上测试）。调试时，我在 excel 中测试了我的查询，它执行得很好。我使用的 TODBC 是 ProvideX。两个表分别正确显示。代码如下，有问题可以私信我。

ASP

```
<asp:GridView ID="GridView1" runat="server" AllowPaging="True" 
    AutoGenerateColumns="False" DataSourceID="SqlDataSource1">
    <Columns>
        <asp:BoundField DataField="CUST_NO" HeaderText="CUST_NO" 
             SortExpression="CUST_NO" />
    </Columns>
</asp:GridView>

<asp:SqlDataSource ID="SqlDataSource1" runat="server" 
    ConnectionString="Dsn=Jake" ProviderName="System.Data.Odbc" 
    SelectCommand="SELECT CWIPH.CUST_NO, CJCMS.JOB_DESC FROM { OJ CWIPH CWIPH
    INNER JOIN CJCMS CJCMS ON CWIPH.JOB_NO = CJCMS.JOB_NO }">
</asp:SqlDataSource> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T15:56:48.547

尝试将您的 SelectCommand 更改为：

```
SELECT * from CWIPH INNER JOIN CJCMS ON CWIPH.JOB_NO=CJCMS.JOB_NO 
```

# node.js - 是否值得为服务器端使用预编译jade +车把？

> ID：15389164
> 
> 赞同：0
> 
> 时间：2013-03-13T15:12:52.023
> 
> 标签：node.js, templates, handlebars.js, pug, pre-compilation

我将 Jade 与把手混合在一起，这样我就不必编写 HTML 并且可以为与数据相关的内容提供良好的语法。

例如，这可能是标题的模板，`header.handlebars.jade`

```
html
  {{#with user}}
  {{if user.username}}
  header Welcome back, {{username}}
  {{/if}}
  {{/with}} 
```

我想知道当我在 node.js 上的服务器端使用它时，是否应该用玉预编译这个模板，然后使用把手？如果我不这样做，我基本上会在每个请求上编译这个模板 2 次（首先是玉，然后是把手）。

我不完全确定这是否起任何作用，但似乎两者`jade.compile`和`Handlebars.compile`都是同步函数，这意味着只要编译发生，它们就会阻塞其他请求。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T15:37:38.167

是的，预编译模板可能是个好主意。原因是使用模板通常包括两个步骤：

1.  解析
2.  从数据和解析的模板生成字符串

解析是一项昂贵的操作。它基本上由识别标记（特殊词）和构建树结构组成。例如：

```
{{#with author}}
  <h2>By {{firstName}} {{lastName}}</h2>
{{/with}} 
```

这个块可以被认为是一个带有 parent`with`语句和几个孩子`"<h2>By "`,`firstname`和`lastName`的树`"</h2>"`。

当您预编译模板时，您所做的是生成代码，该代码是解析和生成树结构的结果，因此每次使用该代码时都不需要解析和生成树。您节省了许多 CPU 周期。

逻辑与你是应该在服务器启动时同步读取一些文件还是每次都读取它们是相同的。如果您在开始时阅读模板文件，您会执行较少的 IO 操作，但您会使用更多内存来存储这些模板的内容。解析也是如此。

我们中的许多人所做的是确定哪些资产会被大量使用（模板通常属于这一类），将它们缓存在内存中，其余的留待按需读取。这意味着您不能只更改模板并更新您的站点。您需要对站点进行版本控制，并且为了进行更新，您必须终止 Node 进程并重新启动它。这对您的站点是否是一个好主意将取决于您如何组织部署。

至于结合 Jade 和 Handlebars，这看起来不是一个好主意，因为渲染两个不同的模板是一项更昂贵的操作，而且您只能预编译其中一个。您不能同时预编译它们，因为一个模板依赖于另一个模板的结果。在您的情况下，Jade 模板的“源代码”取决于应用 Handlebars 模板的结果。

# maven - 在自定义 maven 插件中找不到目标

> ID：15389166
> 
> 赞同：3
> 
> 时间：2013-03-13T15:13:05.557
> 
> 标签：maven, maven-plugin

我正在尝试开发一个自定义 Maven 插件，我正在按照此处所述的官方 Maven 文档中的教程进行操作：

[http://maven.apache.org/guides/plugin/guide-java-plugin-development.html](http://maven.apache.org/guides/plugin/guide-java-plugin-development.html)

但是，当我尝试使用来自不同项目的插件时，我得到以下信息：

```
Could not find goal 'generateProtoClasses' in plugin com.myComapny.maven.plugin:myCompany-protobuf-plugin:1.0 among available goals -> [Help 1] 
```

这是我的 MOJO：

```
@Mojo(name = "generateProtoClasses", defaultPhase = LifecyclePhase.GENERATE_RESOURCES)
public class CompileProtoClasses extends AbstractMojo {

    @Parameter(defaultValue = "mokmok")
    private String inputPath;

    public void execute() throws MojoExecutionException {
        getLog().info("@@@@@@@@@@@@@@@@@@@@@@@");
        getLog().info(inputPath);
    }

} 
```

这是使用插件的项目的 pom.xml 文件中的片段：

```
<plugin>
        <groupId>com.myCompany.maven.plugin</groupId>
        <artifactId>legolas-protobuf-plugin</artifactId>
        <version>1.0</version>
        <configuration>
          <inputPath>yoyo</inputPath>
        </configuration>
        <executions>
            <execution>
                <goals>
                    <goal>generateProtoClasses</goal>
                </goals>
            </execution>
        </executions>
    </plugin> 
```

插件项目的pom：

```
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
    <modelVersion>4.0.0</modelVersion>

    <groupId>com.myCompany.maven.plugin</groupId>
    <artifactId>myCompany-protobuf-plugin</artifactId>
    <version>1.0</version>
    <packaging>maven-plugin</packaging>

    <name>protobuf-plugin Maven Plugin</name>

    <dependencies>
        <dependency>
            <groupId>org.apache.maven</groupId>
            <artifactId>maven-plugin-api</artifactId>
            <version>3.0.5</version>
        </dependency>

        <dependency>
            <groupId>org.apache.maven.plugin-tools</groupId>
            <artifactId>maven-plugin-tools-api</artifactId>
            <version>3.2</version>
        </dependency>

        <!-- dependencies to annotations -->
        <dependency>
            <groupId>org.apache.maven.plugin-tools</groupId>
            <artifactId>maven-plugin-annotations</artifactId>
            <version>3.2</version>
            <!-- annotations are not needed for plugin execution so you can remove 
                this dependency for execution with using provided scope -->
            <scope>provided</scope>
        </dependency>
        <!-- generated help mojo has a dependency to plexus-utils -->
        <dependency>
            <groupId>org.codehaus.plexus</groupId>
            <artifactId>plexus-utils</artifactId>
            <version>3.0.1</version>
        </dependency>

    </dependencies>

    <build>
        <plugins>
            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-plugin-plugin</artifactId>
                <version>3.2</version>
                <configuration>
                    <skipErrorNoDescriptorsFound>true</skipErrorNoDescriptorsFound>
                </configuration>
            </plugin>
        </plugins>
    </build>

</project> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-06-23T19:22:31.187

如果您使用旧式 xdoclet 注释，它是否有效？

```
/**
 * @goal generateProtoClasses
 * @phase generate-resources
 */
public class CompileProtoClasses extends AbstractMojo {

    /**
     * @parameter default-value="mokmok"
     */
    private String inputPath;

    public void execute() throws MojoExecutionException {
        getLog().info("@@@@@@@@@@@@@@@@@@@@@@@");
        getLog().info(inputPath);
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-09-12T01:13:50.880

将以下内容添加到您的 build->maven-plugin-plugin

```
<execution>
  <id>mojo-descriptor</id>
  <goals>
    <goal>descriptor</goal>
  </goals>
</execution> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-12-02T14:25:15.217

我在使用 maven 3.0.5 (Netbeans Build-In) 时遇到此错误获取最新的 maven 版本并再次构建 maven-plugin。

# javascript - Jquery：当输入值被另一个函数更改时，.on（'input'）不会触发

> ID：15389169
> 
> 赞同：3
> 
> 时间：2013-03-13T15:13:25.507
> 
> 标签：javascript, jquery, input

这是代码：

```
$("input[type='text']").on('input', function() { ...stuff here... });  //first function

$('input[type="text"]').click(function() {  //second function
  $('#keyboard').show();
  $('#keyboard .letter').click(function() {
    var currentValue = $('input[type="text"]').val();
    alert(currentValue);
    $('input[type="text"]').val( currentValue + $(this).text() );
  });
}); 
```

简短的版本是，当我输入此文本输入时，顶部功能会触发。在第二个函数中，我制作了一个键盘，并根据用户点击更改输入的值。但是，当通过第二个函数更改输入值时，第一个函数不会触发。有任何想法吗？非常感激。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-03-13T15:15:08.213

```
$("input[type='text']").trigger('input'); 
```

把它放在你的第二个函数中。仅使用 javascript 设置文本框的值不会触发输入事件，因此您的输入事件处理程序不会触发。在这种情况下，您需要手动触发该事件处理程序。

> 注意：您*不*应该使用输入事件处理程序。查看此链接并查看糟糕的浏览器兼容性。[https://developer.mozilla.org/en-US/docs/DOM/window.oninput](https://developer.mozilla.org/en-US/docs/DOM/window.oninput)。相反，更改事件可能会更好地为您服务。

# asp.net - 服务器上的 HttpWebRequest 错误在本地工作

> ID：15389172
> 
> 赞同：0
> 
> 时间：2013-03-13T15:13:32.743
> 
> 标签：asp.net, web-services, httpwebrequest, asp.net-web-api, load-balancing

我有一个购物车，它充当我的应用程序中不同的、断开连接的部分的通用处理程序，以允许用户购买商品。当用户从购物车中移除商品时，购物车需要通知添加该商品的服务。我希望使用 Web 服务来实现这一点。

我正在使用如下所示的 HttpWebRequest：

```
 Dim serializer As New JavaScriptSerializer
        Dim req As HttpWebRequest
        Dim encoder As New System.Text.UTF8Encoding
        Dim jsonBytes As Byte()
        Dim stream As System.IO.Stream
        Dim result As String = ""
        Dim serialized As String
        Dim request As System.Web.HttpRequest = System.Web.HttpContext.Current.Request
        Dim resolvedService As String = ResolveUrl(request.Url.GetLeftPart(UriPartial.Authority) & Service)
        Dim Success As Boolean = False

        serialized = serializer.Serialize(PurchaseData)
        jsonBytes = encoder.GetBytes(serialized)

        req = WebRequest.Create(resolvedService.Trim)
        req.ContentType = "application/json; charset=utf-8"
        req.Method = "POST"
        req.UseDefaultCredentials = True
        req.ContentLength = jsonBytes.Length
        req.Timeout = "60000" 
```

当我在本地计算机上使用它时，它工作正常。但是，当它在我们的主机上运行时，它会失败。如果它通过 https（应该是），那么我会得到“底层连接已关闭：无法为 SSL/TLS 安全通道建立信任关系。” 如果不是通过 https，那么它只会给出 404。对服务的请求通过提琴手工作。它们似乎只是源自主机服务器或其他东西的问题。

我已经尝试了许多不同的东西并且完全被卡住了。我听说这可能是我的主机的负载平衡问题，但我不知道该怎么做。

有人知道我会如何进行吗？

谢谢，

麦克风

# javascript - 在中断 Javascript 中拆分字符串（来自 C# 函数）

> ID：15389173
> 
> 赞同：1
> 
> 时间：2013-03-13T15:13:33.003
> 
> 标签：javascript, asp.net, asp.net-ajax

嗨，我的 asp 中有一个代码可以从 mysql 数据库请求几个小时

C# 代码

```
 string cmd = "SELECT DepartureTime FROM dbtest";
        MySqlCommand mycmd = new MySqlCommand(cmd, conn);
        MySqlDataReader dataReader = mycmd.ExecuteReader();

        while (dataReader.Read())
        {
            times += dataReader.GetString(0) + "\n";
        }
        dataReader.Close(); 
```

Javascript

```
 function SendForm() {
       PageMethods.ConnectDatabase(OnSucceeded, OnFailed);
        function OnSucceeded(msg) {
            var vierkant = document.getElementById("Vierkant");
            var context = vierkant.getContext('2d');

            context.font = '15pt Calibri';
            context.fillStyle = 'blue';
            context.fillText('Departure Times bus X19:' + msg, 150, 100);
        } 
```

当我在我的 javascript 中调用此函数时，它会将所有时间都放在一行中

我喜欢在每个结果后休息一下

我怎样才能解决这个问题？

谢谢

* * *

我尝试了以下但仍然没有工作

我的画布或变量“msg”有问题吗？

Javascript：

```
 var msg;
    function Connect() {
        PageMethods.ConnectDatabase(OnSucceeded, OnFailed);

        function OnSucceeded(msg)
        {

            //Set context + Formatting
            var context = document.getElementById("canvas").getContext('2d');
            context.font = '15pt Calibri';
            context.textAlign = "center";
            context.textBaseline = "top";
            context.fillStyle = 'blue';

            //Prepare textarea value to be drawn as multiline text
            var textval = msg.value;
            var textvalArr = toMultiLine(textval);
            var linespacing = 25;
            var startX = 0;
            var startY = 0;

            //Draw each line on canvas.
            for (var i = 0; i < textvalArr.length; i++) {
                context.fillText(textvalArr[i], x, y);
                y += linespacing;
            }
        }

        //Create an array where the <br/> tag splits the values.
        function toMultiLine(text) {
            var textArr = new Array();
            text = text.replace(/\n\r?/g, '<br/>');
            textArr = text.split("<br/>");
            return textArr;

            /*var vierkant = document.getElementById("canvas");
            var context = vierkant.getContext('2d');
            //formatting
            context.font = '15pt Calibri';
            context.fillStyle = 'blue';

            context.fillText('Departure Times bus X19:' + msg, 150, 100);*/
        }

        function OnFailed(error) {
            alert("failed");
        }

    } 
```

HTML：

```
 <form id="Form1" runat="server"> 
```

```
 <input type="button" onclick="return Connect()" value="Bushours:" />

<canvas id="canvas" width="1900" height="200">Test<code>&lt;canvas&gt;</code> element.  
</canvas> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T15:16:30.373

如果你想休息而不是使用`<br/>`而不是`\n`

所以你的 C# 代码将是这样的：

```
times += dataReader.GetString(0) + "<br/>"; 
```

因为`\n`不是在中断中得到解释，而是`<br/>`

在这个答案中有一个如何做到这一点的示例： [HTML5 canvas ctx.fillText won't do line breaks?](https://stackoverflow.com/questions/5026961/html5-canvas-ctx-filltext-wont-do-line-breaks/7974313#7974313)

# actionscript-3 - as3 flex air 如何访问 GPS“到”文本框

> ID：15389181
> 
> 赞同：0
> 
> 时间：2013-03-13T15:14:04.223
> 
> 标签：actionscript-3, apache-flex, air

我想制作一个按钮，当按下时，用户的本机 gps 应用程序会打开，其中已经为“to”字段输入了地址。

我可以这样用电话拨号器做类似的事情：

```
// ---------------------- CALL SOMEONE! ------------
const callURL:String="tel:6094329861";  
var targetURL:URLRequest = new URLRequest(callURL);
navigateToURL(targetURL);
// ------------------------------------------------------ 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T16:21:46.577

您可以通过 navigateToURL() 来完成，系统会询问用户是否要在浏览器或应用程序中打开。

```
var long:Number = destinationLong;
var lat:Number = destinationLat;
navigateToURL(new URLRequest("http://maps.google.com/?q="+String(lat)+","+String(long))); 
```

# java - 如何在排序结束时始终有空值

> ID：15389187
> 
> 赞同：3
> 
> 时间：2013-03-13T15:14:15.317
> 
> 标签：java, sorting, comparator

我有一个字符串值列表。我使用比较器按特定顺序对它们进行排序，如下所示

```
public static final List<String> CUSTOM_LIST = Arrays.asList("Red", "Green", "Blue");
comparator = new Comparator<String>(){
             @Override
             public int compare(final String o1, final String o2){
                   return Integer.valueOf(CUSTOM_LIST.indexOf(o1))
                   .compareTo(Integer.valueOf(CUSTOM_LIST.indexOf(o2)));
              }
         }; 
```

所以比较我做

```
Collections.sort(listToSort,comparator); 
```

或用于反向排序

```
Collections.sort(listToSort,Collections.reverseOrder(comparator)); 
```

现在我的列表有空值，我希望它们总是在最后。我如何做到这一点？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-13T15:20:05.000

比较接口返回一个标记两个对象之间差异的数字。请注意，由于总是希望空值在最后，我们必须确保返回的整数值大于（或小于）任何其他值，这样所有空值都将被拉到`Collection`.

```
 comparator = new Comparator<String>(){
                @Override
                public int compare(final String o1, final String o2){
                    if(o1.isEmpty()) return Integer.MAX_VALUE;
                    else if (o2.isEmpty()) return Integer.MIN_VALUE;

                    else return Integer.valueOf(ModuleConstants.CUSTOM_LIST.indexOf(o1))
                                        .compareTo(
                           Integer.valueOf(ModuleConstants.CUSTOM_LIST.indexOf(o2)));
                }
            }; 
```

# ios - 为 UITableView 的标题视图设置高度为 0

> ID：15389190
> 
> 赞同：10
> 
> 时间：2013-03-13T15:14:26.347
> 
> 标签：ios, uitableview

我使用下面的代码来设置 UITableView 的标题视图的高度

```
- (CGFloat)tableView:(UITableView *)tableView
heightForHeaderInSection:(NSInteger)section
{
    CGFloat height = 0.0; //  

    return height;
} 
```

但显示异常，如下图

![在此处输入图像描述](../Images/acb7e240ba9cb4c23b70664b68bae42d.png)

有白块，欢迎评论

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2013-03-13T15:15:42.100

Tableview 框架设置不正确。请检查代码或 nib

委托返回 headerview 高度，它在 Table 中是正确的，因为 tableview 的边缘和单元格之间没有空间

使用`setFrame`方法通过代码正确设置

将高度设置为 0 不会改变分组表的部分高度。所以作为一个调整使用一个非常小的值但不是像 0

```
- (CGFloat)tableView:(UITableView *)tableView
heightForHeaderInSection:(NSInteger)section
{
    CGFloat height = 0.001;   
    return height;
} 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-03-13T15:19:07.117

你应该`nil`从你的实施返回`- (UIView *)tableView:(UITableView *)tableView viewForHeaderInSection:(NSInteger)section`

```
//return header view for specified section of table view
- (UIView *)tableView:(UITableView *)tableView viewForHeaderInSection:(NSInteger)section
{
    //check header height is valid
    if([self tableView:tableView heightForHeaderInSection:section] == 0.0)
    {
        //bail
        return nil;
    }

    //create header view
    UIView *view = [[UIView alloc] initWithFrame:CGRectMake(0.0, 0.0, self.view.frame.size.width, [self tableView:tableView heightForHeaderInSection:section])];

    //

    //return header view
    return view;
} 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2019-03-16T07:08:06.267

**迅速 4**

正如其他答案所说，如果您返回 0 作为高度，这意味着您说设置默认值。

使用小数字`CGFloat.leastNonzeroMagnitude`来解决问题。

```
func tableView(_ tableView: UITableView, heightForHeaderInSection section: Int) -> CGFloat {
        return CGFloat.leastNonzeroMagnitude
    } 
```

希望这有帮助。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2016-09-10T16:14:51.340

0 表示默认值。使高度非常小，例如 0.01 以“隐藏”它。

# php - 最近使用会话查看的页面

> ID：15389193
> 
> 赞同：0
> 
> 时间：2013-03-13T15:14:28.717
> 
> 标签：php, session, hyperlink

所以我收集最近查看的页面的代码是

```
<?php
session_start();
$currentpageurl = $_GET['username'];
$_SESSION['pageurl'][] = $_SERVER['REQUEST_URI'];

if( count( $_SESSION['pageurl'] ) > 10 ){
array_shift( $_SESSION['pageurl'] );
}
foreach( $_SESSION['pageurl'] as $key=>$value) {
echo 'The value of $_SESSION['."'".$key."'".'] is '."'localhost".$value."'".' <br />';
}
?> 
```

显示它的代码是

```
<?php
session_start();

foreach( $_SESSION['pageurl'] as $key=>$value) {
echo 'The value of $_SESSION['."'".$key."'".'] is '."'localhost".$value."'".' <br />';
}
?> 
```

问题是我需要 url 可以点击，它只是将 url 显示为文本： $_SESSION['0'] 的值是 'localhost/works.php'

我将如何使它可链接

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T15:16:11.570

```
echo '<a href="'.$_SESSION['0'].'">Click here</a>'; 
```

# java - 如何在 JNI 中使用 make C 程序部分调用 .a 库

> ID：15389207
> 
> 赞同：1
> 
> 时间：2013-03-13T15:15:10.683
> 
> 标签：java, c, linux, java-native-interface, shared-libraries

我是 JNI 的新手，我正在尝试在 java 中调用 ac 函数。

C 程序使用 .a 库。但是，为了创建用于生成 .so 库的目标文件。

我无法将 c 程序链接到 .a 库。我使用的命令是

`gcc -I./toolkithdir/ -I/usr/lib/jvm/java-6-openjdk-i386/include/ -c -fPIC JNIFitnessPart.c -o JNIFitnessPart.o libtoolkit.a -lm`

，因为使用了 -c 选项，所以不会链接 libtoolkit.a。

如何在java中调用c函数并且c函数也可以使用.a库？

提前谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T15:35:14.530

试试这个：

```
gcc -shared JNIFitnessPart.o libtoolkit.a -lm \
    -o libJNIFitness.so -Wl,-soname,libJNIFitness.so 
```

GCC 可以（并且应该）使用链接器包装器，因此它可以轻松组装您的二进制文件。

# node.js - 无法连接到我主机上的 MongoLab

> ID：15389208
> 
> 赞同：0
> 
> 时间：2013-03-13T15:15:13.347
> 
> 标签：node.js, mongodb, mlab

我从我的 Node 应用程序连接到 MongoLab 时遇到问题。当我在本地时，一切正常，但是当我将它上传到我的主机（很棒的[Clever Cloud](http://www.clever-cloud.com/)，你应该检查一下）时，它没有连接。我复制我的代码和日志。

```
var mongo = require('mongodb');
var client = new mongo.Db('tweets', new mongo.Server('ds051077.mongolab.com', 51077, {auto_reconnect: true, 'poolSize': 10}));
client.open(function (error, db) {
    if(error) { console.log(error); }
    db.authenticate('***', '***', function(err, success) {
        if(err) {
            console.log("MongoDB failed");
            console.log(error);
            return;
        }

        console.log("MongoDB client opened");
    });
}); 
```

一个日志

```
2013-03-13 14:13:38 npm install done
2013-03-13 14:13:39 info: socket.io started
2013-03-13 14:13:39 /home/bas/app_1ae17610-f658-4923-87b1-0cc889719794/node_modules/connect-mongo/lib/connect-mongo.js:141
2013-03-13 14:13:39 ^
2013-03-13 14:13:39 throw new Error('Error connecting to database');
2013-03-13 14:13:39 at EventEmitter.emit (events.js:91:17)
2013-03-13 14:13:39 at module.exports.MongoStore.__proto__ (/home/bas/app_1ae17610-f658-4923-87b1-0cc889719794/node_modules/connect-mongo/lib/connect-mongo.js:141:15)
2013-03-13 14:13:39 at Server.connect.connectionPool.on.server._serverState (/home/bas/app_1ae17610-f658-4923-87b1-0cc889719794/node_modules/mongodb/lib/mongodb/connection/server.js:383:7)
2013-03-13 14:13:39 at connection.on.connectionStatus (/home/bas/app_1ae17610-f658-4923-87b1-0cc889719794/node_modules/mongodb/lib/mongodb/connection/connection_pool.js:93:15)
2013-03-13 14:13:39 Error: Error connecting to database
2013-03-13 14:13:39 at EventEmitter.emit (events.js:115:20)
2013-03-13 14:13:39 at Db.open (/home/bas/app_1ae17610-f658-4923-87b1-0cc889719794/node_modules/mongodb/lib/mongodb/db.js:247:16)
2013-03-13 14:13:39 at Socket.EventEmitter.emit (events.js:88:17)
2013-03-13 14:13:39 at Socket._destroy.self.errorEmitted (net.js:327:14)
2013-03-13 14:13:39 at Socket.errorHandler (/home/bas/app_1ae17610-f658-4923-87b1-0cc889719794/node_modules/mongodb/lib/mongodb/connection/connection.js:385:10)
2013-03-13 14:13:39 at process.startup.processNextTick.process._tickCallback (node.js:244:9) 
```

我不得不说我很难看到这个问题，因为它在本地运行良好。有人有想法吗？提前致谢。

# javafx-2 - 我的 javafx 应用程序加载速度很快，但 fxml 需要时间来初始化

> ID：15389220
> 
> 赞同：-1
> 
> 时间：2013-03-13T15:15:51.263
> 
> 标签：javafx-2, fxml

我的 javafx 应用程序需要很长时间来初始化 fxml 控件。我尝试使用预加载器，但由于应用程序加载速度很快，然后在初始化阶段需要时间，所以预加载器对我没有用......我看到一个透明的框架执行预加载器大约 2 秒后没有内容，然后控件似乎出现了...我尝试使用 printscreen 截取框架的屏幕截图，但在屏幕截图中所有控件都可见...谁能告诉我问题是什么我该怎么办..？

[截屏](http://www.flickr.com/photos/shashankips/8555457155/in/photostream)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T16:34:32.463

如果您发现性能问题，可以在此处提交：

[http://javafx-jira.kenai.com](http://javafx-jira.kenai.com)

如果您能提供一个显示问题的样本，那就太好了。

# php - 该请求适用于 phpadmin 但不适用于我的 php 代码

> ID：15389230
> 
> 赞同：-2
> 
> 时间：2013-03-13T15:16:11.303
> 
> 标签：php, sql, derived-table

让我举个例子……我不能在 php 中创建这个视图（而我可以在 phpmyadmin 中）

```
$sql="CREATE VIEW ratings.rtgemissfitch AS
SELECT derivedtable. ISIN
FROM
(SELECT ISIN, MAX(Date_Notation_Emission) FROM ratings.ratingsemissionfitch as derivedtable GROUP BY ISIN) "; 
```

但我可以在 php 中做到这一点：

```
$sql="CREATE VIEW ratings.rtgemissfitch AS
(SELECT ISIN, MAX(Date_Notation_Emission) FROM ratings.ratingsemissionfitch as derivedtable GROUP BY ISIN) "; 
```

我真的不明白..首先，对不起我的英语，我是法国人..我真的不明白为什么在 phpadmin 上运行的请求在我的 php 代码中不起作用..probaby派生表...所以，我希望获得最后的评分 Fitch：phpmyadmin 中的 SQL 请求完美运行：

```
SELECT `DBFITCH`.`ISIN`, `RATING_FITCH`as FITCH_RTG
FROM
  (SELECT `ISIN`, MAX(`RATING_DATE`) as LastUpdate 
  FROM `ratings`.`ratingsemissionfitch` GROUP BY ISIN) as LAST
  INNER JOIN `ratings`.`ratingsemissionfitch` as DBFITCH
  ON
  DBFITCH.`ISIN`= LAST.`ISIN` 
  AND DBFITCH.`RATING_DATE`=LAST.LastUpdate 
```

在 php 中，以下代码无法运行：

```
$sql="CREATE VIEW ratings.rtgemissfitch AS 
SELECT DBFITCH.ISIN, RATING_FITCH as FITCH_RTG
FROM 
  (SELECT ISIN, MAX(RATING_DATE) as LastUpdate 
  FROM ratings.ratingsemissionfitch GROUP BY ISIN) as LAST
  INNER JOIN ratings.ratingsemissionfitch as DBFITCH
  ON
  DBFITCH.ISIN= LAST.ISIN 
  AND DBFITCH.RATING_DATE=LAST.LastUpdate"; 
  $req = $bdd->exec($sql); 
```

让我再举一个例子……

我无法在 php 中创建此视图（而我可以在 phpmyadmin 中）

```
$sql="CREATE VIEW ratings.rtgemissfitch AS
SELECT derivedtable. ISIN
FROM
(SELECT ISIN, MAX(Date_Notation_Emission) FROM ratings.ratingsemissionfitch as derivedtable GROUP BY ISIN) "; 
```

但我可以在 php 中做到这一点：

```
$sql="CREATE VIEW ratings.rtgemissfitch AS
(SELECT ISIN, MAX(Date_Notation_Emission) FROM ratings.ratingsemissionfitch as derivedtable GROUP BY ISIN) "; 
```

我真的不明白..提前谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T15:18:31.023

您的数据库用户可能没有运行权限

```
CREATE VIEW 
```

?

# java - 判断线程是否在休眠

> ID：15389233
> 
> 赞同：7
> 
> 时间：2013-03-13T15:16:13.180
> 
> 标签：java, multithreading

我想知道我怎么知道线程是否在睡觉。我四处搜索并收集了一些信息，从这些信息中我写了一个方法 *isSleeping():boolean* ，我认为我可以将其放入一个类中以确定线程是否处于睡眠状态。我只想知道我可能错过了什么。注意：我没有经历过0天的经验。

```
//isSleeping returns true if this thread is sleeping and false otherwise.
public boolean isSleeping(){
    boolean state = false;
    StackTraceElement[] threadsStackTrace = this.getStackTrace();

    if(threadsStackTrace.length==0){
        state = false;
    }
    if(threadsStackTrace[0].getClassName().equals("java.lang.Thread")&&
            threadsStackTrace[0].getMethodName().equals("Sleep")){
        state = true;
    }
    return state;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T15:26:14.563

更改“睡眠”->“睡眠”。除了你不应该使用 stacktrace 之外`this`，你的方法应该接受一个 Thread 参数。考虑这个

```
 Thread t = new Thread(new Runnable(){
        public void run() {
            try {
                Thread.sleep(1000);
            } catch (InterruptedException e) {
                e.printStackTrace();
            }
        }
    });
    t.start();
    Thread.sleep(100);
    if(t.getStackTrace()[0].getClassName().equals("java.lang.Thread")&&
            t.getStackTrace()[0].getMethodName().equals("sleep")){
        System.out.println("sleeping");
    } 
```

输出

```
sleeping 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T15:19:43.627

您可以检查[Thread#getState()](http://docs.oracle.com/javase/7/docs/api/java/lang/Thread.html#getState%28%29)是否有`TIMED_WAITING`状态。如果使用这种方法，应注意确保您没有刚刚调用`Object#wait`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T15:22:03.243

我有这个想法，我没有检查，但我认为它会起作用：

您可以扩展线程并覆盖睡眠以切换状态。像这样的东西：

```
 @Override
public static void sleep(long millis, int nanos)
throws InterruptedException {
   SLEEPMARKER = true;
   super.sleep(millis, nanos);
   SLEEPMARKER = false;
}

 @Override
public static void sleep(long millis)
throws InterruptedException {
   SLEEPMARKER = true;
   super.sleep(millis);
   SLEEPMARKER = false;
} 
```

然后，您只需要标记和吸气剂。

```
public static boolean SLEEPMARKER = false;
public static boolean isSleeping(){
   return SLEEPMARKER;
} 
```

# memory-leaks - JavaFX - 创建新 BooleanExpression 的方法会导致内存泄漏

> ID：15389235
> 
> 赞同：1
> 
> 时间：2013-03-13T15:16:21.100
> 
> 标签：memory-leaks, javafx-2, boolean-expression

我刚刚注意到 BooleanExpression 和 Bindings 类中的 not()、and() 和 or() 方法创建了一个新的 BooleanExpression，即使它没有任何引用，它也可能保留在内存中。

```
myBool = new SimpleBooleanProperty();
 for (int i = 0; i < 10000000; i++) {
 myBool.not();
} 
```

上述代码会创建大约 530 MB 的内存，直到取消引用（并清理）“myBool”变量为止。

这是错误还是正常行为？如果是这样，有什么方法可以在不丢失“myBool”变量的情况下清理内存？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-13T17:29:41.820

这不是错误，当您调用[not()](http://docs.oracle.com/javafx/2/api/javafx/beans/binding/BooleanExpression.html#not%28%29)时，您正在创建一个[BooleanBinding](http://docs.oracle.com/javafx/2/api/javafx/beans/binding/BooleanBinding.html)。此绑定绑定到`SimpleBooleanProperty`使用侦听器机制。这意味着对绑定`SimpleBooleanProperty`保持**强引用**。

绑定必须与属性“未绑定”。[dispose()](http://docs.oracle.com/javafx/2/api/javafx/beans/binding/BooleanBinding.html#dispose%28%29)方法可以解决问题；

```
BooleanBinding binding = myBool.not();
binding.dispose(); 
```

注意这个方法的javadoc不是很准确。

# ios - 如何获得带有换行符的 UIBarButtonItem 标题？

> ID：15389236
> 
> 赞同：0
> 
> 时间：2013-03-13T15:16:24.063
> 
> 标签：ios, objective-c, uibarbuttonitem

在 iPhone 音乐应用程序中，正确的`UIBarButtonItem`标题是“正在播放”（两行）。我想做类似的事情。我怎样才能使标题两行？

```
 UIBarButtonItem *nowPlayingButtonItem = [[UIBarButtonItem alloc] initWithTitle:NSLocalizedString(@"Now Playing", @"button in navigationbar right") style:UIBarButtonItemStyleBordered target:self action:@selector(showNowPalyView)]; 
```

![在此处输入图像描述](../Images/100b56ebab49eca2572f0a583a648567.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T15:34:29.140

这取决于您使用什么作为标题，通常换行符可以完成这项工作。

```
 NSString   *titleStr=@"Now\nPlaying"; 
```

如果您正在使用`UIButton`，`UIlabel`那么您必须相应地设置行

如果您在那里使用自定义按钮

```
[titleButton.titleLabel setLineBreakMode:UILineBreakModeWordWrap];  // will set the line break mode

[titleButton setTitle:titleStr forState:UIControlStateNormal]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T15:23:15.873

最好的方法是添加`UILabel`并 `UIBarButtonItem` 使用`label.numberOfLines = 0`；

# html - 居中/垂直对齐图像 标签

> ID：15389238
> 
> 赞同：2
> 
> 时间：2013-03-13T15:16:26.780
> 
> 标签：html, css, image

我注意到，当同时使用`line-height`和`text-align`属性来居中和垂直对齐`<div>`标签内的图像时，由于某种原因，图像被向下推了几个像素。如果您的图像周围有大量空白，则这种更改几乎不会引起注意，但是当我在按大小的框中有一个`150px`按`150px`图像时，您可以看到图像被稍微推出的位置。有人知道为什么会这样吗？`150px``150px`

[http://jsfiddle.net/rUs5E/](http://jsfiddle.net/rUs5E/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T17:36:36.793

的定义`vertical-align:middle`有点奇怪。[它说](http://www.w3.org/TR/CSS2/visudet.html#propdef-vertical-align)

> “将框的垂直中点与父框的基线加上父框 x 高度的一半对齐。”

您看到的变化是“父级 x 高度的一半”组合的效果。和基线的变化，都基于字体大小。因此，您可以通过将父级（在您的 jsfiddle 中`.searchLogo`）的字体大小设置为零来消除它。这使得 x-height = 0 并且基线穿过盒子的中心线并且没有偏移。

见[http://jsfiddle.net/rUs5E/1/](http://jsfiddle.net/rUs5E/1/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-13T15:27:12.937

[可能是重复的](https://stackoverflow.com/questions/10844205/html-5-strange-img-always-adds-3px-margin-at-bottom)，但是：

您可以添加一个`vertical-align: middle`. 这与被视为角色的图像有关。我认为默认值`vertical-align: baseline`似乎在底部添加了 3px 之类的东西。

[小提琴](http://jsfiddle.net/tRDrm/)

# ruby-on-rails - 设计登录前执行方法

> ID：15389245
> 
> 赞同：1
> 
> 时间：2013-03-13T15:16:41.320
> 
> 标签：ruby-on-rails, ruby-on-rails-3, devise

我想限制登录被禁止的用户。我的每个用户都有一个`denied:integer, :default => 0`字段，说明是否允许用户登录。

如果`denied == 1`然后用户被拒绝登录。

但是，由于我看不到设计控制器/模型，我不知道该怎么做，是否有一个 before_login/before_auth 过滤器可以用来在执行登录过程之前应用我自己的方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T15:20:10.233

这实际上非常简单，只需将以下内容添加到您的用户模型中。

```
def active_for_authentication?
  super && !self.denied 
end 
```

并为您的拒绝标志使用布尔值而不是整数，它将列设置为一个更简洁的 tinyint，并允许布尔样式！检查。如果你真的需要一个int，那么只需与`super && self.denied != 1`

[Rubydoc 信息](http://rubydoc.info/github/plataformatec/devise/master/Devise/Models/Authenticatable#label-active_for_authentication?)

# jquery - 视差滚动资源

> ID：15389248
> 
> 赞同：0
> 
> 时间：2013-03-13T15:16:50.920
> 
> 标签：jquery, html, scroll, parallax

我只是在为未来的项目做一些研究。我对一些 Parallax 滚动插件很有信心，但是在查看一些示例时（例如[http://everylastdrop.co.uk/](http://everylastdrop.co.uk/)）而不是垂直过渡，有些会从侧面或某个角度拉动 div（或其他）。我喜欢的一个例子是我上面提到的网站上的太阳。我不确定到底该怎么做，所以想知道是否有人可以指出我正确的方向来了解这种方法的名称或提供教程的链接。我可以找到很多可爱的例子，但没有确切的方法或插件可以做到这一点！

谢谢你

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T09:33:42.233

[我使用Skrollr.js](http://prinzhorn.github.com/skrollr)构建了 Every Last Drop 站点，我认为您已经找到了。

GitHub 页面上的文档非常详细，而且非常易于使用。那里还有一些指向教程和其他使用示例的链接。

它可以做一些非常酷的事情，比如在滚动时在 rgb/hsl 值之间进行插值，这就是天空在开始时从黑夜变成白昼的方式。如果您对此有任何其他问题，请随时给我留言！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T15:30:05.493

Stellar.js 将是您开始的好地方。这是一个非常棒的插件，可以简化整个视差过程。

（[http://markdalgleish.com/projects/stellar.js/](http://markdalgleish.com/projects/stellar.js/)）

我认为您正在寻找的是视差元素和视差背景的组合。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T18:10:24.007

看看我的投资组合网站[http://anti-code.com](http://anti-code.com)。

它有一个视差滚动，可以在各个方向移动，无论您身在何处，3 x 4 网格面板的中心面板是主要的默认面板。

我只是使用 CSS 属性：位置、左侧和顶部将面板放置在我想要的位置，然后在 javascript 中，我生成一个包含每个面板 ID 的对象，它是左侧/顶部位置，以及宽度和高度面板在里面的包装纸。

有了所有这些信息，您就拥有了计算视差滚动站点所需的一切。

# javascript - 加载回调提前触发

> ID：15389253
> 
> 赞同：1
> 
> 时间：2013-03-13T15:16:53.690
> 
> 标签：javascript, jquery, jquery-ui

我遇到了 jquery 的加载功能的竞争条件。如果页面加载时间比我的动画长，我会看到一个空白对话框。如果它在动画完成之前加载一切都很好。为什么在 DOM 正确更新之前发生加载回调？

```
$(function() {
    $("#diagBox").load($(this).attr('href'), function() {
        $dialog.imagesLoaded(function() {
            $dialog.dialog("option", 'show', {
                effect: "puff",
                duration: 200,
                complete: function() {
                    positionElements();
                }
            });
            $dialog.dialog('open');
            $dialog.dialog("option", "position", "center");
        });
    });
}); 
```

imagesLoaded 来自[desandro](https://github.com/desandro/imagesloaded)

positionElements 根据其内容更新对话框的大小并更新 jScrollPane，当高度`#diagBox`为 0 时初始化 jScrollPane 时页面为空白。

# asp.net-mvc-4 - 如何处理 TabStrip 中的索引、创建、删除、详细信息和编辑视图？

> ID：15389256
> 
> 赞同：0
> 
> 时间：2013-03-13T15:16:57.903
> 
> 标签：asp.net-mvc-4, kendo-ui

我开始为 ASP.NET MVC 4 使用完整的 Kendo UI。我已经创建了我需要的数据库和模型，但现在我希望能够处理（索引、创建、删除、详细信息和编辑）每个选项卡内容内的实体。但我不知道如何在 de tabstrip 中做到这一点。（我从已经有 HomeController 的 Internet 应用程序模板开始）

到目前为止，我的代码是：

**/Views/首页/索引**

```
@{
    ViewBag.Title = "Home Page";
}

@(Html.Kendo().TabStrip()
                .Name("tabstrip")
                .Items(items =>
                {
                    items.Add().Text("Students").Selected(true).LoadContentFrom("Index","Student"); //Add item with text "Students"
                    items.Add().Text("Teachers"); 
                    items.Add().Text("Schools"); 
                })
) 
```

**/控制器/学生控制器**

```
 public class StudentController : Controller
    {
        private MiniSIGEdb db = new MiniSIGEdb();

        //
        // GET: /Student/

        public ActionResult Index()
        {
            var students = db.Students.Include(s => s.Person).Include(s => s.School);
            return PartialView(students.ToList());
        }

        //
        // GET: /Student/Create

        public ActionResult Create()
        {
            ViewBag.Person_id = new SelectList(db.People, "id", "FirstName");
            ViewBag.School_id = new SelectList(db.Schools, "id", "City");
            return PartialView();
        }

        protected override void Dispose(bool disposing)
        {
            db.Dispose();
            base.Dispose(disposing);
        }
    } 
```

**/视图/学生/索引**

```
@model IEnumerable<MiniSIGEweb.Models.Student>
@{
    ViewBag.Title = "Index";
}

<h2>Index</h2>

<p>
    @Html.ActionLink("Create New", "Create")
</p>
<table>
    <tr>
        <th>
            @Html.DisplayNameFor(model => model.Course)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.Person.FirstName)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.School.City)
        </th>
        <th></th>
    </tr>

@foreach (var item in Model) {
    <tr>
        <td>
            @Html.DisplayFor(modelItem => item.Course)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.Person.FirstName)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.School.City)
        </td>
        <td>
            @Html.ActionLink("Edit", "Edit", new { id=item.id }) |
            @Html.ActionLink("Details", "Details", new { id=item.id }) |
            @Html.ActionLink("Delete", "Delete", new { id=item.id })
        </td>
    </tr>
}

</table> 
```

到目前为止，我能够显示 de Index 视图（作为部分视图），但是当我单击“新建”时，创建视图不会在标签条内呈现？我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T20:15:26.440

由于您的 tabstrip 加载了 Ajax，这意味着其他每个用于编辑、创建、删除的视图也应该加载 Ajax。

您可以查看[MVC Ajax 链接助手](http://code-inside.de/blog-in/2011/04/26/howto-ajax-actionlink-asp-net-mvc-3/)。在 tabstrip 内创建一些结果元素，该元素应使用 Ajax 加载的内容进行更新。

# jaxb - JAXB：用属性编组对象会给出一个重新声明命名空间的 xml

> ID：15389257
> 
> 赞同：1
> 
> 时间：2013-03-13T15:17:00.867
> 
> 标签：jaxb, marshalling, xml-namespaces

我有这个xml：

```
<tag1 xmlns="myNamespace.com/#">
    <insideTag myAttribute="5">
        some text
    </insideTag>
</tag1> 
```

但编组后它变成了这样：

```
<tag1 xmlns="myNamespace.com">
    <insideTag xmlns:ns1="myNamespace.com/#" xmlns="" myAttribute="5">
        some text
    </insideTag>
</tag1> 
```

我知道，它几乎相同，但我真的需要 xml 像第一个一样。

我没有这个xml的xsd。实际上，该 xml 被解析为 org.w3c.dom.Element，添加到 ObjectType（下面的 xsd 和类简化实现）中，然后编组此 ObjectType。
如果这很重要，我正在使用 NamespacePrefixMapper。xsd（请注意，attributeFormDefault 未设置）

```
<schema xmlns="http://www.w3.org/2001/XMLSchema" version="0.1"
  xmlns:ds="http://www.w3.org/2000/09/xmldsig#"
  targetNamespace="http://www.w3.org/2000/09/xmldsig#"
  elementFormDefault="qualified">

    <complexType name="ObjectType" mixed="true">
        <sequence minOccurs="0" maxOccurs="unbounded">
            <any namespace="##any" processContents="lax"/>
        </sequence>
    </complexType>
</schema> 
```

班级：

```
@XmlAccessorType(XmlAccessType.FIELD)
@XmlType(name = "ObjectType", namespace = "http://www.w3.org/2000/09/xmldsig#",
   propOrder = { "content" })
public class ObjectType{
    @XmlMixed
    @XmlAnyElement(lax = true)
    protected List<Object> content;

    public List<Object> getContent() {
        if (content == null) {
            content = new ArrayList<Object>();
        }
        return this.content;
    }
} 
```

所以...有人知道如何解决这个问题吗？
顺便说一句......该解决方案也必须与 jaxb-impl-2.1.4 一起使用。

谢谢各位的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-11-06T07:42:54.890

为了避免不必要的命名空间，您需要`ObjectFactory`像这样在类中注册：

```
@XmlElementDecl(name="CurrencyPayTypeCode") 
public JAXBElement<OLILUMEASUNITS> createCurrencyPayTypeCode(OLILUMEASUNITS elem) {
                return new JAXBElement<OLILUMEASUNITS>(new QName("OLILUMEASUNITS"), OLILUMEASUNITS.class, elem); 
} 
```

在哪里：

1.  `CurrencyPayTypeCode`- insideTag 的名称
2.  `OLILUMEASUNITS`- 一个可以解组这个标签的类

# c# - 如何在 mysql 数据库中搜索数据并使用 C# 在 DataGridView 中添加搜索数据？

> ID：15389266
> 
> 赞同：0
> 
> 时间：2013-03-13T15:17:20.157
> 
> 标签：c#, mysql, database, search, datagridview

我现在工作了一个小时也许 6 个小时我无法让它工作请告诉我缺少什么？

因此，例如，我在这里有客户 Warren Buffet（他只是一个例子：D），如果我在 txtbox 上搜索他的名字，并且 sqldatabase 在数据行上找到他的名字，那么 Wafrren Bufet 数据将被添加到 DataGridView。

这是代码！

```
 private void button2_Click(object sender, EventArgs e)
        {
            MySqlConnection connection = null;
            string hostname = "localhost";
            string database = "aparece_hoteldb";
            string username = "root";
            string password = "";
            connection = new MySqlConnection("host=" + hostname +
                                            ";database=" + database +
                                            ";username=" + username +
                                            ";password=" + password + ";");

            string query = "select * from reservations " +
                           "where Client like '%" + txtSearch.Text + "%' OR " +
                               "ClientNumber like '%" + txtSearch.Text + "%' OR " +
                               "RoomNumber like '%" + txtSearch.Text + "%' OR " +
                               "ClientRoomType like '%" + txtSearch.Text + "%' OR " +
                               "AddonService like '%" + txtSearch.Text + "%' OR "+ 
                               "TotalHotelRate '%" + txtSearch.Text + "%'";

            connection.Open();
            List<string>[] detailList = a.mysqlSelect(query);
            for (int i = 0; i < detailList.Length; i++)
            {
                dgvUser.Rows.Add(detailList[i][0], detailList[i][1], detailList[i][2], detailList[i][3], detailList[i][4]);
            }

        }

    }

} 
```

这是图像！

![在此处输入图像描述][1]

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T07:22:32.423

所以你的意思是DataGridView中已经有数据了，如果你搜索一个使用TextBox，它会被添加到DataGridView的列表中吗？这是我的代码：

```
var detailList = (a.mysqlSelect(query)).ToList();
foreach(var dList in detailList)
{
   dgvUser.Rows.Add(dList);
} 
```

但是，如果您只想在 DataGridView 上进行数据搜索，这是我的代码：

```
var detailList = (a.mysqlSelect(query)).ToList();
dgvUser.DataSource = detailList; 
```

希望能帮助到你！

编辑：顺便说一句，您在查询中的代码在 TotalHotelRate 中缺少“喜欢”。

# java - 播放解码的 MP3 文件

> ID：15389267
> 
> 赞同：1
> 
> 时间：2013-03-13T15:17:25.173
> 
> 标签：java, encoding, base64

我正在尝试编码（base64）一个 mp3 文件，将其保存到数据库中，然后检索它并对其进行解码并播放该文件。我已经输入了以下代码，但它似乎不起作用。我可以做任何修复以使其正常工作吗？

```
import java.io.ByteArrayInputStream;
import java.io.ByteArrayOutputStream;
import java.io.FileInputStream;
import java.io.IOException;
import java.io.InputStream;

import javazoom.jl.player.Player;

import org.apache.commons.codec.binary.Base64;

public class ReadAudioFile {
    public static void main(String[] args) throws Exception {
        String file = "C:\\Users\\Mukkra01\\Downloads\\apple.mp3";
        InputStream byteInputStream = new FileInputStream(file);
        System.out.println(Base64.encodeBase64(inputStreamToByteArray(byteInputStream)));
        byte[] decodeFile = Base64.decodeBase64(Base64.encodeBase64(inputStreamToByteArray(byteInputStream)));
        play(decodeFile);
    }

    public static byte[] inputStreamToByteArray(InputStream inStream) throws IOException {
        ByteArrayOutputStream baos = new ByteArrayOutputStream();
        byte[] buffer = new byte[8192];
        int bytesRead;
        while ((bytesRead = inStream.read(buffer)) > 0) {
            baos.write(buffer, 0, bytesRead);
        }
        return baos.toByteArray();
    }

    public static void play(byte[] decodeFile) {
        try {
            ByteArrayInputStream byteInputStream = new ByteArrayInputStream(decodeFile);
            //BufferedInputStream buffer = new BufferedInputStream(new FileInputStream("C:\\Users\\Mukkra01\\Downloads\\apple.mp3"));
            Player player = new Player(byteInputStream);
            player.play();
        } catch (Exception e) {
            System.out.println(e);
        }

    }
} 
```

# php - php 日期问题

> ID：15389269
> 
> 赞同：-1
> 
> 时间：2013-03-13T15:17:30.057
> 
> 标签：php, date

我正在写这段代码：

```
$dateQueried = '2013-03-18';
$reservQuery = "SELECT * FROM bkng WHERE ArrivalDate <= '$dateQueried' AND DepartureDate > '$dateQueried'";
$rsrv = mysql_query($reservQuery) or die(mysql_error());
$resRow = mysql_fetch_row($rsrv);
$DateIn = strtotime($resRow["ArrivalDate"]);
$DateOut = strtotime($resRow["DepartureDate"]);
$dateQueried = strtotime($dateQueried);
if ($DateIn = $dateQueried) {
echo 'case 1';
} elseif ($DateIn < $dateQueried) {
echo 'case 2';
} else {
echo 'case 3';
} 
```

问题是我无法进入案例 2 或案例 3……我错过了什么吗？

我尝试打印变量并尝试将它们放入`var_dump()`：如果它返回例如“String（10）'2013-03-18'”之外，同时插入如果它返回“NULL”......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T15:18:42.137

您使用了错误的运算符。通过使用`=`，您分配的值`$dateIn`始终为真，并将始终导致该代码块执行。

```
if ($DateIn = $dateQueried) { 
```

应该

```
if ($DateIn == $dateQueried) { 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-13T15:19:10.393

```
if ($DateIn = $dateQueried) { 
```

错了，这是一个任务。它应该是

```
if ($DateIn == $dateQueried) { 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-13T15:19:34.850

`=`不是比较运算符，它是赋值运算符。分配总是成功的，因此它总是输出`case 1`，因为它*确实*总是正确的。

您应该简单地更改您`=`的 for`==`进行比较。

```
if ($DateIn == $dateQueried) { 
```

* * *

## 回答 #4

> 赞同：-3
> 
> 时间：2013-03-13T15:21:04.377

1.  `var_dump($dateQueried, $DateIn, $resRow["ArrivalDate"]);`
2.  思考。
3.  那==每个人都提到的事情
4.  学习*调试*你的代码

# cakephp - Cakephp 烘焙模型 - 前缀未添加到关联中

> ID：15389271
> 
> 赞同：1
> 
> 时间：2013-03-13T15:17:31.147
> 
> 标签：cakephp, model

我对烘焙蛋糕模型有疑问。我正在烘焙模型作为插件的一部分。我通过在 PluginAppModel 类中包含所有逻辑来保持模型干燥。这使我可以根据应用程序的更改定期更改架构。

但是，每当我重新烘焙模型时，在我拥有的任何关联中，类名都是不正确的。例如，默认的 bake 命令将其输出为

```
 public $hasMany = array(
    'Item' => array(
        'className' => 'Item', 
```

什么时候应该

```
 public $hasMany = array(
    'Item' => array(
        'className' => 'PluginName.Item', 
```

IE。以插件名称为前缀。这是为了确保我可以移植我的插件。是否需要将标志发送到 bake 命令，以将其放在前面？我在文档中看不到任何内容。这是我当前使用的命令

```
cake bake model PluginName.Item -c myconn -p PluginName 
```

非常感谢任何帮助！

更新 -

好的，这是一个令人讨厌的 hack，但现在就足够了。我这样覆盖了我的 PluginAppModel 中的构造函数类：

```
public function __construct(){
    parent::__construct(); 
    $this->append_plugin_name_to_classes();     
}

public function append_plugin_name_to_classes(){
    $associations = array('hasMany', 'belongsTo', 'hasOne', 'hasAndBelongsToMany');
    foreach($associations as &$a):
        if(!empty($this->{$a})):
            foreach($this->{$a} as &$b):
                if(isset($b['className'])):
                    $old = $b['className']; 
                    $b['className'] = PLUGIN_NAME . "." . $old;
                endif;
            endforeach;
        endif;
    endforeach;     
} 
```

在上面的 PLUGIN_NAME 中，在 bootstrap.php 中设置为常量。我很确定这不是 MVC 的做法，但它现在让我摆脱了困境。我希望它有所帮助。

# assembly - 如何读取 x86 处理器中的标志寄存器

> ID：15389275
> 
> 赞同：4
> 
> 时间：2013-03-13T15:17:35.837
> 
> 标签：assembly, x86

是否有任何汇编指令可以让我们直接读取或写入 Intel 80386 16 位标志寄存器中的溢出标志？如果不是，我们应该使用什么伪代码？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-13T15:38:02.440

只读取溢出标志：

```
SETO AL
; AL now contains 1 if the overflow flag was set, and 0 if it wasn't 
```

要反转溢出标志：

```
PUSHF
POP    AX
XOR    AX,800h  ; The overflow flag is in bit 11
PUSH   AX
POPF 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T15:56:38.383

要将标志读入`AX`：

```
pushf
pop ax 
```

写入标志：如果您需要设置/清除特定位，有一些命令，如`stc/clc`（用于进位标志）、`std/cld`（用于方向）等；但不是以这种方式暴露位。要写入整个标志寄存器，请使用

```
push ax
popf 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T15:19:49.003

利用

```
Pushf
// modify or read ax register
Popf 
```

# objective-c - 使用 NSMutableDictionary 在 NSButton 中设置文本颜色和对齐方式

> ID：15389277
> 
> 赞同：1
> 
> 时间：2013-03-13T15:17:38.620
> 
> 标签：objective-c, cocoa, nsmutabledictionary, nsbutton

我正在尝试将颜色更改为 NSButton，我可以使用 NSMutableDictionary 使用以下代码：

```
NSMutableDictionary *attrs = [[NSMutableDictionary alloc]init];
NSFont *font = [NSFont fontWithName:@"Lucida Grande Bold" size:30.0];
[attrs setObject:font forKey:NSFontAttributeName];
[attrs setObject:[NSColor whiteColor]forKey:NSForegroundColorAttributeName];
NSMutableAttributedString *attrStr = [[NSMutableAttributedString alloc] initWithString:mystring attributes:attrs];
[myButton setAttributedTitle:attrStr]; 
```

它工作得很好，但问题是我不知道如何将文本对齐到中心......我试过了

```
[attrs setAlignment:NSCenterTextAlignment]; 
```

但我收到一个错误“'NSMutableDictionary' 没有可见的@interface 声明选择器'setAlignment：'”......任何人都可以帮忙吗？非常感谢，马西

# c# - 在字符串 C# 中查找和替换自定义值

> ID：15389281
> 
> 赞同：4
> 
> 时间：2013-03-13T15:17:50.003
> 
> 标签：c#, regex, replace

我是一名学生，正在开发一个应用程序，该应用程序获取 PHP 文件的内容并将它们存储到一个变量中。

用户将在加载的内容中输入需要替换的字符/值。

例如 ：

```
FIND           REPLACE
echo           Print
<?php          <?
CURL           (space) 
```

然后可以将这些模式保存到文本文件中以供进一步使用。当用户想要根据模式删除内容时，他们可以通过单击按钮来实现。

所以我的问题是：

这可以通过基本的字符串替换方法轻松存档，还是我应该使用更复杂的正则表达式？

如果我应该使用正则表达式，如何根据用户输入创建自定义正则表达式模式？

如果您能帮我解决这个问题，我将不胜感激，谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T15:23:24.190

如果您只是尝试用另一组字符替换给定字符串中的一组字符，那么该`string.Replace()`方法将非常适合您。

任何程序员的目标都应该是为给定任务编写尽可能简单的代码。虽然正则表达式非常适合上下文替换，但如果您只需要基本的查找和替换功能，那么它们肯定是矫枉过正，只会在您的程序中引入不必要的复杂性。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-13T15:23:42.163

这**可以**通过简单的方式来实现`Replace`，一个处理如此复杂的需求的正则表达式不仅会很混乱，而且**很难**用额外的项目来维护/更新。

如何将您的查找和替换模式存储在 a 中`Dictionary`，然后循环执行替换？这样，如果您添加更多项目，您只需将它们添加到您的`Dictionary`. 就像是：

```
Dictionary<string, string> replacements = new Dictionary<string, string>
                                          {
                                              { "echo", "PRINT" },
                                              { "<?php", "<?" },
                                              { "CURL", "(space)" }
                                          }

string yourString; //this is your starter string, populate it with whatever

foreach (var item in replacements)
{
    yourString = yourString.Replace(item.Key, item.Value);
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-13T15:30:35.067

到目前为止，我所看到的答案都没有提到要谨慎，以确保迭代方法与原始源中不存在的 FIND 值不匹配（例如，您的第一个循环可能替换`echo`为`Print`，但随后循环两个可能替换`int`（从新的内部`Print`，例如`Int32`离开`PrInt32`）。

您可能会“更安全”地使用一个非常简单的正则表达式，以确保您只替换整个单词，这至少可以保护您免受上述示例的影响。

例如，不是搜索用户指定的字符串`int`，而是将其包装在正则表达式单词边界中并搜索它`\bint\b`（当然需要仔细测试以确保这适用于目标文件中可能存在的任何运算符，或者它适用于给定的搜索字符串的类型等）。然后，您可以将其作为一个选项提供（类似于大多数提供“仅匹配整个单词”选项的文本编辑软件）。

此外，您需要确保您永远不会使用相同的替换来迭代相同的搜索目标 - 例如确保`<?`不会变成`<?php`然后再变成`<?<?php`等。虽然我不认为这里给出的任何答案都会遇到这个问题.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-13T15:23:38.107

您可以使用字典`Replace`更轻松地重复调用：

```
var replacements = new Dictionary<string, string>();
replacements.Add("echo", "print");
replacements.Add("<?php", "<?");
...

foreach(var pair in replacements)
{
    myString = myString.Replace(pair.Key, pair.Value);
} 
```

或者使用Linq的[`Aggregate`](http://msdn.microsoft.com/en-us/library/system.linq.enumerable.aggregate.aspx)方法。

```
myString = replacements.Aggregate(myString, (s, p) => s.Replace(p.Key, p.Value)); 
```

这适用于简单的字符串，但同样的通用设计也可用于正则表达式模式：

```
var replacements = new Dictionary<string, string>();
...

foreach(var pair in replacement)
{
    myString = new RegEx(pair.Key).Replace(myString, pair.Value);
} 
```

再次使用 Linq：

```
myString = replacements.Aggregate(myString, (s, p) => new RegEx(pair.Key).Replace(s, p.Value)); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-13T15:23:07.833

重复使用`String.Replace`是最简单的方法，但不会是最快的。我几乎会先尝试这种方式，然后只有在速度不够快的情况下才切换到使用正则表达式。但是，您必须小心替换文本可能与您的搜索片段之一匹配的可能性。

要使用正则表达式，您需要`Regex.Escape`每个搜索字符串，然后使用“|”连接所有转义模式 作为分隔符。然后，您可以`Regex.Replace`使用 a`MatchEvaluator`来查找替换项。

# android - 在 Android 应用程序中连接到 Heroku PostgreSQL 数据库？

> ID：15389284
> 
> 赞同：0
> 
> 时间：2013-03-13T15:17:54.263
> 
> 标签：android, postgresql, heroku

我写了一个我在heroku上托管的ruby on rails应用程序，用作创建数据并将其存储在postresql heroku数据库中的工具

如何从 Android 应用程序连接到它以获取数据？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T15:22:29.197

这样做的方法应该是使用`REST`服务对您的数据执行`CRUD`操作，而不是直接连接`Android`到`database.

# c++ - 返回地址是否比返回指针找到任何有用的应用程序？

> ID：15389286
> 
> 赞同：0
> 
> 时间：2013-03-13T15:18:05.930
> 
> 标签：c++, pointers, return, memory-address

C/C++ 允许返回指针：

```
int* returnpointer() {
    int c = 1;
    int *d = &c;
    return d;
} 
```

以便它可以在调用者函数中使用：

```
int* p = returnpointer(); 
```

这是我最习惯的风格，因为它最自然。

那么，如果上述条件在正常情况下就足够了，为什么 C/C++ 会提供返回地址的语言功能呢？IE：

```
int& returnpointer() {
    int c = 1;
    int *d = &c;
    return *d;
} 
```

通过调用者调用：

```
int* p = &returnpointer(); 
```

鉴于我更精通前者，后者是否有哪些功能是前者不太适合做的？

PS：我知道这样的代码很危险，因为它可能涉及指向在函数退出堆栈时不再存在的变量的指针。然而，这不是这个问题的范围。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-13T15:21:46.343

您将返回*地址*与返回*引用*混淆：

```
int& returnpointer() { ... } 
```

在这里，`returnpointer()`返回对`int`. 引用是某种类型的对象的别名。引用对指针有不同的语义，因此它们往往服务于不同的目的。

一些非常重要的区别是引用不能被默认构造（没有什么要构造的），并且它们不能被重置。它们需要被初始化以引用现有对象，并且它们在其生命周期内引用同一个对象。

另一方面，指针保存值（表示地址），这些值可以在其生命周期内更改。可以使指针指向不同的对象，成为 a`nullptr`或指向完全随机的某个位置（如果取消引用，可能会导致未定义的行为）。

请注意，您的两个示例都是错误的：第一个示例返回指向函数本地变量的指针。第二个做同样的事情，这次是参考。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T15:24:28.353

`int&`不是操作符的地址。 `int a = 0; int *ptr = &a;` 那是地址运算符。

```
int& returnpointer() {
    int c = 1;
    int *d = &c;
    return *d;
} 
```

这不会返回地址，而是*对*`int`. 将引用视为另一个变量的别名。

`int a = 15;` `int& ref = a;`

`ref`现在只是`a`.

引用和指针之间的区别在于，引用永远不能为 NULL，它总是**必须**引用某些东西。

一点注意事项：

```
int* returnpointer() {
    int c = 1;
    int *d = &c;
    return d;
} 
```

您在这里返回一个指向局部函数变量的指针`c`，这是未定义的行为，因为该变量在函数退出时被销毁。为了返回一个指针，您需要像这样在堆上创建它`int * f = new int;` `*f = 5; return f;`。现在您可以返回`f`并在函数外使用它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T15:26:55.167

C++ 允许返回指针和引用，因为它是完全合法的。

考虑一下这一点（我不提倡这一点，因为由于所有权问题，通常不鼓励返回在函数内分配的内存）：

```
MyObject* create() {
    return new MyObject();
}; // eo create 
```

一切都好。我们正在返回一个指针，并且我们动态分配了对象。逻辑上没有错（除了分配和返回一个没有所有权的指针......嘘！）。然而，一些函数将*不得不*这样做：

```
void* operator new(std::size_t size) {
    return malloc(size);
}; 
```

引用（您似乎有些困惑）也是完全可行的，即使在指针分配的东西上也是如此。如果我们有一个维护实例的管理器，它们可以非常简单地返回一个引用：

```
class Manager {
private:
    std::list<MyClass*> objects_;

public:
    Manager() {
    };
    ~Manager() {
        for(auto& o : objects_) {
            delete o;
        };
    };

    Myclass& create() {
        o = new MyClass();
        objects_.push_back(o);
        return *o;
    };
}; 
```

以上非常好，因为管理器管理对象的生命周期。

# ruby-on-rails - 我用于表插入/更新并保存在 ruby 中的方法太慢了。我怎样才能加快速度？

> ID：15389288
> 
> 赞同：0
> 
> 时间：2013-03-13T15:18:10.563
> 
> 标签：ruby-on-rails, ruby, activerecord

Ruby noob alert：在 ruby​​ 中插入 300,000 条记录需要 8 小时。它非常缓慢。如何改进以下代码？下面，对于从连接对象中获取的每一行，我都在进行活动记录保存。我已经得出结论，这是导致大部分缓慢的原因。如何更改我的代码以使插入速度更快？

```
class SiteSection < ActiveRecord::Base

  SiteSection.establish_connection(
        :adapter  => 'postgresql',
        :host     => 'hoster-of-hosts.com',
        :database => 'super-inven',
        :username => 'user',
        :password => 'pass'
                      )
  self.table_name = 'master.target_tbl'  # << insert into this table
end

conn.query("select * from source_tbl") do |row|
  siteData = SiteSection.find_or_initialize_by_head_date_and_center_id_and_site_url(row[:date_c], row[:com_id], row[:site_link])

  siteData[:head_date]      = row[:date_c]
  siteData[:center_id]     = row[:com_id]
  siteData[:site_url]          = row[:site_link]
  siteData[:people_cnt]      = row[:persons]
  siteData[:ips]     = row[:ip_adds]

  siteData.save  # For every record from source_tbl query, save it in master.target_tbl.
i = i+1
puts "finished: #{i}" if i % 10000 == 0
end
conn.close 
```

谢谢！

# python - 如何找出csv文件的平均值？

> ID：15389290
> 
> 赞同：-5
> 
> 时间：2013-03-13T15:18:14.790
> 
> 标签：python, csv, average

我有一个 csv 文件，我可以将它导入到程序中。我需要知道如何计算文件特定列的平均值。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T15:23:57.410

```
import csv
with open('your_csv.csv', 'rb') as f:
    reader = csv.reader(f)
    if your_file_has_a_header_row:
        next(reader)
    the_numbers = [float(row[col_index_you_want]) for row in reader]
    average = sum(the_numbers) / len(the_numbers) 
```

如果使用 Python 3，请将 with 语句更改为

```
with open('your_csv.csv', newline='') as f: 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T15:23:27.457

首先，您可以从 column 获取数据：

```
columnNumber = 42
data = [float(l.split(';')[columnNumber]) for l in open('file.csv', 'r').readlines()] 
```

然后计算平均值：

```
mean = sum(data) / len(data) 
```

编辑：代码修复（来自 Steven Rumbalski）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T15:21:58.363

您可以将此问题拆分为多个部分：

1.  读取文件
2.  分离出右列
3.  计算总数
4.  除以行数。

一次拿一条线，你应该没问题。Google 将帮助您了解详细信息，当您对任何部分有具体问题时，欢迎您回到 SO。

# excel - 用于从一个 Excel 文件复制到另一个文件的宏

> ID：15389295
> 
> 赞同：-1
> 
> 时间：2013-03-13T15:18:23.800
> 
> 标签：excel, vba

我是使用宏的新手，需要一些帮助，从一个 Excel 文件中复制行并将其作为列粘贴到另一个文件中。我已经手动完成了第一行，同时记录了宏，这里是代码：

```
Sub Macro2()

Macro2 Macro

Range("D5:L5").Select
Selection.Copy
Windows("New_SET_Data.xlsx").Activate
Range("B7").Select
Selection.PasteSpecial Paste:=xlPasteAll, Operation:=xlNone, SkipBlanks:= _
    False, Transpose:=True
Windows("Original_SET_Data.xls").Activate

End Sub 
```

这需要对原始 excel 文件中的多行和工作表进行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T16:17:23.960

将您的范围、工作表和工作簿作为变量放入，这样更容易计算。使用 WorksheetFunction "Transpose" 更改数据 - 如下所示：

```
Sub Macro2()

Dim wb1 as Workbook, wb2 as Workbook
Dim ws1 as Worksheet, ws2 as Worksheet
Dim rngSource as Range, Dim rngDest as Range, rngTemp as Range
Dim varArray() as Variant

Set wb1 = Workbooks("Original_SET_Data.xls")
Set wb2 = Workbooks("New_SET_Data.xlsx")
'To work through all sheets in Original_Set_Data.xls, you can replace this line with a "For each ws1 in wb1.Worksheets" loop and put Next at the end.
Set ws1 = wb1.Worksheets("Whatever_The_Source_Sheet_Is_Called")
Set ws2 = wb2.Worksheets("Whatever_The_Destination_Sheet_Is_Called")

'Find the Source Range & Next Available Destination Column
Set rngSource = ws1.Range("D5", ws1.Range("D60000").end(xlUp).Address)
Set rngDest = ws2.Range("IV7").End(xlToLeft).Offset(0,1)

'Loop through Source Range and Transpose Data

For each rngTemp in rngSource
     'Put values from columns D to L into an array
     varArray = ws1.Range(rngTemp, rngTemp.Offset(0, 8).Value)
     'Transpose data - there are 9 columns D to L so we resize the range to be 9 rows high
     rngDest.Resize(9,1).Value = WorksheetFunction.Transpose(varArray)
     'Move to next column in new sheet
     Set rngDest = rngDest.Offset(0,1)
Next

End Sub 
```

# php - 在特定文件夹中找到特定文件的最新版本（按文件名）

> ID：15389298
> 
> 赞同：0
> 
> 时间：2013-03-13T15:18:35.687
> 
> 标签：php

在此先感谢您的帮助...

最初，我有一个文件夹（名为“reports”），其中存放了我的应用程序最新时间表的 xml 版本。此 xml 文件的命名约定是“schedule-'currentdate'-'currenttime'.xml（例如：“schedule-20130313-070004.xml”）我使用 scandir 定位此文件并按降序对文件夹内容进行排序没有问题然后拿第一个。

我现在的问题是文件夹中添加了另一种类型的报告（例如：“roster-20130313-07004.xml”）我以前的方法不再有效。我在两个不同的地方输出此信息（日程表页面上的 schedule.xml 和名册页面上的 roster.xml） 我如何搜索这个文件夹，根据日期找到最新的文件，并确保每份报告都以它应该的方式结束？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T15:39:23.627

一些简单的东西，比如

```
$files = scandir($dir);
$report = [];
$schedu = [];
foreach ( $files as $file ) {
    if ( strpos( $file, 'report') !== false ) {
        $report << $file;
    } else {
        $schedu << $file;
    }
}

//sort arrays 
```

应该可以正常工作。这将获取目录结果的原始数组并将它们放入两个新数组中，具体取决于是否包含字符串“report”。

# django - 表单向导：错误未定义变量

> ID：15389300
> 
> 赞同：0
> 
> 时间：2013-03-13T15:18:38.213
> 
> 标签：django, django-forms, django-templates

我正在尝试使用表单向导来使用不同的模板名称，但我收到一个错误，我不明白为什么它看起来很简单。

[为每个表格使用不同的模板](https://docs.djangoproject.com/en/dev/ref/contrib/formtools/form-wizard/#using-a-different-template-for-each-form)

视图.py

```
from django.http import HttpResponseRedirect
from django.contrib.formtools.wizard.views import SessionWizardView

FORMS = [("customer", solution.forms.customerForm),  //got error undefined variables:solution 
     ("building", solution.forms.buildingForm)]

TEMPLATES = {"customer": "customer.html",
         "building": "building.html",
        }

class customerWizard(SessionWizardView):
def get_template_names(self):
    return [TEMPLATES[self.steps.current]]

def done(self, form_list, **kwargs):
    do_something_with_the_form_data(form_list) //get error undefined variables
    return HttpResponseRedirect('/page-to-redirect-to-when-done/') 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T15:56:09.103

```
from solution import forms *

FORMS = [
    ("customer", customerForm),  
    ("building", buildingForm)
] 
```

# gnuplot - 像“1000k”这样的gnuplot ytics可能吗？

> ID：15389314
> 
> 赞同：1
> 
> 时间：2013-03-13T15:19:11.973
> 
> 标签：gnuplot

我想让 ytics 看起来像“0k”、“5'000k”、“10'000k”等等。但是，当我尝试科学记数法（例如，“%5.0s%c”）时，我得到的是“0M”、“5M”、“10M”。

知道如何在 gnuplot 中实现它吗？

非常感谢您提前。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T12:49:44.277

我仍然不确定我是否了解您在这里的目的，但可能类似于：

```
set ytics format '%gk'
plot 'datafile' u ($1/1000.):2 
```

或者，如果您正在绘制一个函数`f(x)`：

```
plot f(x)/1000. 
```

# sql-server - 在 SQL Server 2008 R2 上插入和选择性能

> ID：15389318
> 
> 赞同：3
> 
> 时间：2013-03-13T15:19:31.387
> 
> 标签：sql-server, database, sql-server-2008

我们有一个带有相当大的表（但不是很大）的 SQL Server - 每个可能有 30-40 百万条记录。

我们要

a）每秒插入大约 1000 条记录（在某些时间 - 但我们不能批量插入）到其中一个表，比如 TABLE_A 和 b）同时 select * from TABLE_B where id = _SOME_GUID_ID

我注意到（a）当前在负载下需要 500-600 毫秒（每个插入，因为我们无法对它们进行批处理）和（b）大约需要 400 毫秒（有一个索引）

这与我们正在寻找的性能相去甚远。有没有办法优化这些表/操作？

当前服务器有 16gb 的内存，总数据库大小约为 40gb。我们预计这些表格将在未来几个月内扩大 10 倍。我们可以使用 Sql Server 进行任何类型的分片吗？我们会看到使用 MySQL Percona 构建的任何性能改进吗？

希望这是有道理的。我想补充一点，我们正在使用 NHibernate，但上述性能是插入数据库所花费的毫秒数 - 不包括应用程序或 nh 开销。

谢谢， 雅尼斯

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T15:26:34.843

有几件事浮现在脑海。主键是 GUID 还是整数，如果它是 GUID 并且您在其上进行了集群，那么 SQL Server 将不得不在许多不同的位置插入而不是按顺序插入。你是数据库大小，是你的日志大小还是它们一直自动增长，请参阅[调整数据库文件大小](http://blogs.lessthandot.com/index.php/DataMgmt/DBAdmin/MSSQLServerAdmin/sizing-database-files)

运行分析器并查看 nhibernate 创建了什么样的 SQL。每秒 1000 次插入不再那么令人印象深刻，瓶颈也可能是硬件，确保它的大小和配置正确。tempdb、日志和数据文件是否在同一个驱动器上？如果是这样，请将它们移动到单独的驱动器

另一种选择是重写执行这些插入的部分并将它们批处理而不是单行插入

这是我从 SSMS 运行的一个示例，它在 166 毫秒内插入 4999 次，在 40 毫秒内插入 1000 次

```
CREATE TABLE Sometest(id INT PRIMARY KEY, 
SomeCol VARCHAR(200), SomeDate DATETIME,SomeCol2 VARCHAR(200), 
SomeDate2 DATETIME,SomeCol3 VARCHAR(200), 
SomeDate3 DATETIME,SomeCol4 VARCHAR(200), SomeDate4 DATETIME)
GO

DECLARE @start DATETIME = GETDATE()
SET NOCOUNT ON
DECLARE @id INT =1
WHILE @id < 1000
BEGIN
    INSERT Sometest
    SELECT @id ,'BlaBlaBlaBlaBlaBlaBlaBlaBlaBla111111',GETDATE(),
    'BlaBlaBlaBlaBlaBlaBlaBlaBlaBla2222',GETDATE(),
    'BlaBlaBlaBlaBlaBlaBlaBlaBlaBla3333',GETDATE(),
    'BlaBlaBlaBlaBlaBlaBlaBlaBlaBla4444',GETDATE()
SET @id+=1
END

SELECT DATEDIFF(ms,@start,GETDATE())
SELECT COUNT(*) FROM Sometest 
```

如果你将整个事情包装在一个事务中，它会快得多，50000 次插入在 800 毫秒内，5000 次插入在 103 毫秒内，1000 次插入在 23 毫秒内

```
TRUNCATE TABLE Sometest
DECLARE @start DATETIME = GETDATE()
SET NOCOUNT ON
BEGIN tran
DECLARE @id INT =1
WHILE @id < 50000
BEGIN
    INSERT Sometest
    SELECT @id ,'BlaBlaBlaBlaBlaBlaBlaBlaBlaBla111111',GETDATE(),
    'BlaBlaBlaBlaBlaBlaBlaBlaBlaBla2222',GETDATE(),
    'BlaBlaBlaBlaBlaBlaBlaBlaBlaBla3333',GETDATE(),
    'BlaBlaBlaBlaBlaBlaBlaBlaBlaBla4444',GETDATE()
SET @id+=1
END
commit
SELECT DATEDIFF(ms,@start,GETDATE())
SELECT COUNT(*) FROM Sometest 
```

在您的系统上使用看起来像您的表的表运行类似的东西并调查问题所在，也许您需要预先调整文件大小、分离文件、对表进行碎片整理等等等

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T15:52:25.593

您的 Guid 可以是顺序 guid 或随机 guid，您需要知道哪个。您可以暂时禁用非聚集索引并在插入结束时重建它们，前提是您不介意（可能）在那段时间内对该表进行较慢的选择。你有多少核心和多少临时数据库？尝试每个核心 1 个 tempdb（最多 8 个核心），但确保设置了正确的跟踪标志以均衡 tempdb 的使用。如下所述，批量插入

# .net - 复制不可序列化 (COM) 对象

> ID：15389321
> 
> 赞同：2
> 
> 时间：2013-03-13T15:19:39.147
> 
> 标签：.net, vb.net, object, com, clone

我正在使用 VB.Net 2010。我想复制由外部（非自我）应用程序输入到我的应用程序的（COM）对象的内容。我不想一一复制字段和属性值（因为可能会在未来的应用程序构建中添加或删除字段/属性）。

**对象类型是不可序列化的。**

我已经尝试如下**反射（在线程**[复制一个对象到另一个对象](https://stackoverflow.com/questions/4903188/copy-one-object-to-another/)上建议的 VB 代码）：

```
Imports System.Reflection

Public Class ObjectHelper

    ' Creates a copy of an object
    Public Shared Function GetCopy(Of SourceType As {Class, New})(ByVal Source As SourceType) As SourceType

        Dim ReturnValue As New SourceType
        Dim sourceProperties() As PropertyInfo = Source.GetType().GetProperties()

        For Each sourceProp As PropertyInfo In sourceProperties
            sourceProp.SetValue(
                ReturnValue, 
                sourceProp.GetValue(Source, Nothing),
                Nothing)
        Next

        Return ReturnValue

    End Function

End Class 
```

**这不起作用，因为返回的*sourceProperties()*数组是空的。**

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T15:28:37.760

首先在实现中有一个bug

```
Dim sourceProperties() As PropertyInfo = Source.GetType().GetProperties() 
```

应该

```
Dim sourceProperties() As PropertyInfo = GetType(SourceType).GetProperties() 
```

`Source.GetType()`返回`_COMObject`类型，因为那是对象的真实类型，而您确实想检查对象实现的接口类型。

其他解决方案是检查对象是否实现了任何[`IPersist`接口](http://msdn.microsoft.com/en-us/library/ms688695%28VS.85%29.aspx)并将其用于真正的 COM 序列化。您可以通过将对象转换为 eg 来做到这一点`System.Runtime.InteropServices.ComTypes.IPersistFile`。不幸的是，其他 IPersist* 接口未在该命名空间中定义，因此您必须从某个地方导入它们。

# c# - 如何从 Amazon Cloudfront .NET API 获取无效请求列表？

> ID：15389322
> 
> 赞同：1
> 
> 时间：2013-03-13T15:19:39.617
> 
> 标签：c#, .net, api, amazon-web-services, amazon-cloudfront

我在 API 文档中引用[了这一](http://docs.aws.amazon.com/AmazonCloudFront/latest/APIReference/ListInvalidation.html)部分，但我不确定我通过 API 发出的请求是否正确。这就是我的代码的样子：

```
public class CfListInvalidation
{
    string accessKeyID = ConfigurationManager.AppSettings["awsAccessID"];
    string secretAccessKeyID = ConfigurationManager.AppSettings["awsSecretAnswer"];
    string distributionId = ConfigurationManager.AppSettings["distributionId"];
    AmazonCloudFront client;

    public void SendCommand()
    {

        Console.WriteLine("Connecting to Amazon Cloud Front...");   

        using (client = AWSClientFactory.CreateAmazonCloudFrontClient(accessKeyID, secretAccessKeyID))
        {
            ListInvalidationsResult result = new ListInvalidationsResult();

            IAsyncResult r = client.BeginListInvalidations(new ListInvalidationsRequest
            {
                DistributionId = distributionId,                                        
            }, new AsyncCallback(CfListInvalidation.CompleteRead), result );                

        }
    }

    static void CompleteRead(IAsyncResult result)
    {
        ListInvalidationsResult r = result.AsyncState as ListInvalidationsResult;

        if (r != null && r.InvalidationList != null)
        {
            Console.WriteLine("listing items..");

            foreach (InvalidationSummary s in r.InvalidationList.Items)
            {
                Console.WriteLine(string.Format("ID: {0} - Status: {1}", s.Id, s.Status));
            }
        }

        else {
            Console.WriteLine("No Items Found");
        }
    }
} 
```

难道我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-03T07:20:05.690

使用 Begin* 方法时，需要调用匹配的 End* 方法来完成请求并检索结果对象。请查看[本指南](http://docs.aws.amazon.com/AWSSdkDocsNET/latest/DeveloperGuide/sdk-net-async-api.html)以获取一些示例。

这是指南中的一个简化示例，说明了基本方法：

```
// Begin method
client.BeginPutObject(request, CallbackWithClient, client);

// Callback
public static void CallbackWithClient(IAsyncResult asyncResult)
{
  AmazonS3Client s3Client = (AmazonS3Client) asyncResult.AsyncState;
  PutObjectResponse response = s3Client.EndPutObject(asyncResult);

  // Process the response
} 
```

# mongodb - oplog.rs 中 ts 字段的索引未更新

> ID：15389325
> 
> 赞同：4
> 
> 时间：2013-03-13T15:19:47.730
> 
> 标签：mongodb

我有一个应用程序通过查询 ts 字段来读取 mongodb 2.2 副本集中的 oplog.rs 集合。

我在 ts 字段上添加了一个索引，但是当新条目插入 oplog 时它不会更新。

我错过了什么？我在 mongodb 文档中找不到关于不支持上限集合索引的任何内容（相反），并且我找不到任何关于 oplog 特殊的信息。

谢谢

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-05-08T14:58:46.340

正如您所发现的，系统集合（例如`local.oplog.rs`和）不支持二级索引`*.system.profile`。在 MongoDB 2.4 和更早版本中，索引似乎已经创建，但实际上从未更新。如果您尝试使用不受支持的更改（例如尝试创建其他索引）直接更新系统集合，较新版本的 MongoDB (2.6+) 会返回错误。

该`oplog.rs`集合绝对是“特殊的”，因为它的预期用途仅用于复制。复制内部在此基础上对 oplog 的预期操作做出了一些假设。例如，复制只需要插入 oplog 条目——与您自己创建的上限集合不同，oplog 条目*永远不会*更新。

如果应用程序需要跟踪插入到 oplog 中的新条目，或者使用[order进行查找，则应用程序应该使用可](http://docs.mongodb.org/manual/reference/glossary/#term-natural-order)[尾光标](http://docs.mongodb.org/manual/tutorial/create-tailable-cursor/)读取 oplog 。[`$natural`](http://docs.mongodb.org/manual/reference/glossary/#term-natural-order)

可[尾光标教程](http://docs.mongodb.org/manual/tutorial/create-tailable-cursor/)更详细地介绍了使用方法，但需要注意的一些特别之处是：

> *   Tailable 游标不使用索引并以自然顺序返回文档。
> *   因为可尾游标不使用索引，查询的初始扫描可能很昂贵；但是，在最初用尽游标之后，对新添加文档的后续检索成本很低

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T15:42:26.460

> 我错过了什么？我在 mongodb 文档中找不到关于不支持上限集合索引的任何内容（相反），并且我找不到任何关于 oplog 特殊的信息。

您的问题对于您当前的实施方式有点模糊。但是，似乎不是索引没有更新，而是您没有收到更新通知，因为 MongoDB 还没有 pub/sub 功能：[https ://jira.mongodb.org/browse/SERVER-3385](https://jira.mongodb.org/browse/SERVER-3385)

[您可以在此集合（ http://docs.mongodb.org/manual/tutorial/create-tailable-cursor/](http://docs.mongodb.org/manual/tutorial/create-tailable-cursor/) ）上使用可尾光标来实际获取长时间的更新。

# java - 在大文件中查找字数并对结果进行排序

> ID：15389326
> 
> 赞同：-1
> 
> 时间：2013-03-13T15:19:48.223
> 
> 标签：java, data-structures

我有一个包含各种字符串的大文件。我需要解析文件并找到文件中存在的各种单词的字数。之后，我需要按单词的计数顺序排列单词。

我的方法是解析文件并将单词存储在 Hashmap 中，其中单词是键，计数是值。随着我们继续解析文件，计数将被更新。解析完成后，我将根据计数对集合进行排序。

上面的方法非常简单，并没有考虑到文件很大。

我应该对处理大文件的方法进行哪些更改？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T15:44:18.617

`HashMap`如果您要拥有多个线程，请不要使用 a ，`ConcurrentHashMap`而是使用 a ( [javadoc](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/ConcurrentHashMap.html) )。

`Integer`如果值已经存在，您仍然需要对更新值进行某种检查。有关该过程的更多详细信息，请参阅[这篇](https://stackoverflow.com/questions/8215527/updating-both-a-concurrenthashmap-and-an-atomicinteger-safely)文章。

填充地图后，请参阅[此帖子以对地图进行排序。](https://stackoverflow.com/questions/109383/how-to-sort-a-mapkey-value-on-the-values-in-java)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T16:11:49.640

首先我会使用 a`Map`来确定字数：

```
 String[] words = {"one", "two", "three", "two", "three", "three"};
    Map<String, Integer> map = new HashMap<String, java.lang.Integer>();
    for (String word : words) {
        int count = 0;
        if (map.containsKey(word)) {
            count = map.get(word);
        }
        map.put(word, ++count);
    }
    System.out.println(map);
    --> output: {two=2, one=1, three=3} 
```

然后，我将使用一个`TreeMap`或一个新的“自定义”键/值类按计数排序：

使用`TreeMap`：

```
private static void sortUsingTreeMap(Map<String, Integer> map) {
    TreeMap<String, Integer> sorted = new TreeMap<String, Integer>(new MyComparator(map));
    sorted.putAll(map);
    System.out.println(sorted);
}

static class MyComparator implements Comparator<String> {
    private Map<String, Integer> map;

    MyComparator(Map<String, Integer> map) {
        this.map = map;
    }

    @Override
    public int compare(String o1, String o2) {
        return map.get(o1).compareTo(map.get(o2));
    }
}
--> output: {one=1, two=2, three=3} 
```

使用新的键/值类：

```
private static void sortUsingKeyValueClass(Map<String, Integer> map) {
    class KeyValue implements Comparable<KeyValue> {
        private final Integer count;
        private final String word;

        public KeyValue(Integer count, String word) {
            this.count = count;
            this.word = word;
        }

        @Override
        public int compareTo(KeyValue o) {
            return count.compareTo(o.count);
        }

        @Override
        public String toString() {
            return word + "=" + count;
        }
    }

    List<KeyValue> keyValues = new ArrayList<KeyValue>();
    for (String word : map.keySet()) {
        keyValues.add(new KeyValue(map.get(word), word));
    }
    Collections.sort(keyValues);
    System.out.println(keyValues);
}
--> output: [one=1, two=2, three=3] 
```

我还要补充一点，我会推迟将线程添加到混合中，直到我发现它在性能方面是必要的。正如这里的其他人所说，通过同时处理结果不会保存一个糟糕的实现。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-13T16:11:25.737

因此，为了让您更清楚地了解我在评论中的陈述：

假设您有大文件。需要 N 次操作才能以逐字的方式阅读所有内容。到目前为止，这将是您的瓶颈，因为 I/O 通常很慢。

对于您的计数方案，您使用`Map<String, Integer>`. 您看到的每个单词都放入 Map 中，如果多次遇到特定单词，则加 1。通常，特定键值对的加法是常数时间（HashMap），并弄清楚是否可以是否在地图中添加新`Integer`的也是恒定的。

因此，计算文件中单词的整体运行时性能将是 O(N) + C，其中 N 主要是由于 I/O。

现在，假设您使用十个线程。您将大文件切成十块，并让每个线程将它们的值插入到`ConcurrentHashMap`. 您的整体运行时复杂性没有改变，只是它（可能）减少了 10 倍。

带有额外线程的运行时间将为 O(t(1/10)N) + C，但仍会减少到 O(N) + C。

唯一能让它更*有效*的方法是，如果你能改变所采用的线性扫描方法，使其比线性时间更有效。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-13T15:38:59.690

正如评论中所说，线程对于您希望您的解决方案比其他人的解决方案快一点的决胜局情况很有用。如果线程内部运行的速度真的很慢，那么线程就没用了。

对于问题的第一部分，哈希图将是时间复杂度的最佳选择。

对于您问题的第二部分，我将使用一个集合、一个二维数组和您在第一部分中使用的数据结构。如果您再次解析文件，将每个新单词添加到集合中并在您已经创建的哈希图中检查其字数，您可以将每个单词存储在其字数的索引位置。之后，只需向后遍历数组，您就会按照单词的计数顺序获得单词。

# integer - 在 DB2 中使用 int 将 CHARACTER(2) 转换为 SMALLINT 可以吗？

> ID：15389328
> 
> 赞同：0
> 
> 时间：2013-03-13T15:19:49.790
> 
> 标签：integer, db2, character, type-conversion

我有两个表在不同的数据类型中具有相同的值。

一个是`CHARACTER`长度 2，另一个是 a `SMALLINT`。

如何在 where 子句中比较两者？

我有`INT(CHAR_COLUMN_X) = SMALLINT_COLUMUN_X`。很好还是我忽略了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T16:32:05.430

那应该没问题。如果它是一个`SMALLINT`专栏，那么你可以直接去那个而不是一个`INT`

```
CAST(CHAR_COLUMN_X AS SMALLINT) = SMALLINT_COLUMN_X 
```

如果 CHAR_COLUMN_X 中有一个值不能转换为 smallint（例如，一个字母），那么 DB2 将抛出一个[`-420`SQL Code](http://pic.dhe.ibm.com/infocenter/dzichelp/v2r2/topic/com.ibm.db2z10.doc.codes/src/tpc/n420.htm)。

# java - 在 Grails 中放置文本文件的位置，以及如何获取路径

> ID：15389329
> 
> 赞同：26
> 
> 时间：2013-03-13T15:19:55.613
> 
> 标签：java, file, grails, inputstream

我需要将 .txt 文件读入一个 groovy 类，以便逐行询问它。但我不确定我将它放入我的 grails 应用程序中的哪个文件夹，以及如何获取它的路径？

到目前为止，我已经尝试将它放在一个新文件夹下`src`和一个新文件夹中`web-app/txt`

我已经尝试了以下内容来阅读它

```
fileIn = new File('/lexicon.txt').text 
```

和

```
fileIn = new File('txt/lexicon.txt').text 
```

无济于事。

任何机构有任何指针？

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2013-03-13T15:29:00.867

Grails 是一个 Java Web 应用程序，因此它将被编译成一个文件`.war`，其中包含所有文件/类/等。大多数 Web 容器都会 unpack `war`，但没有任何保证，因此将`File`这个文件作为文件来访问并不是一个好主意。

顺便说一句，您可以将文件放入`grails-app/conf`中，在这种情况下，它将放入`classpath`中，您可以使用以下命令访问它：

```
InputStream lexicon = this.class.classLoader.getResourceAsStream('lexicon.txt') 
```

您也可以将此文件放入子目录中，例如`grails-app/conf/data`并将其加载为`***.getResourceAsStream('data/lexicon.txt')`

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2013-03-14T01:32:35.167

你可以把你的文件放在 web-app/

例子：

```
web-app/lexicon.txt 
```

然后在您的控制器或服务中使用 grailsApplication：

```
class MyService {
    def grailsApplication
    public myMethod() {
        File myFile = grailsApplication.mainContext.getResource("lexicon.txt").file
    }
} 
```

希望这可以帮助

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2013-03-13T16:10:01.837

您可以使用 Spring 的资源加载来访问该文件。使用此方法，您可以从 Spring bean 访问文件，这意味着 Grails 可以将资源自动装配到其工件中。

*请参阅下面的以下步骤示例*

1.  将文件放在`grails-app/conf/`.
2.  在中创建资源持有者类`src/groovy`
3.  将资源持有者作为 Spring bean 添加到`grails-app/spring/resources.groovy`
4.  然后自动装配并在任何需要的地方使用资源

第2步：

```
package resource

import org.springframework.core.io.Resource

class ResourceHolder {
    Resource lexicon
} 
```

第 3 步：

```
beans = {
    lexiconHolder(resource.ResourceHolder) {
        lexicon = 'classpath:lexicon.txt'
    }
} 
```

第4步：

```
class AnyGrailsService {
    def lexiconHolder

    void aMethodUsingTheLexicon() {
        File lexicon = lexiconHolder.lexicon.file

        /* Do stuff with the lexicon */
    } 
```

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2014-08-20T18:08:37.707

在 Grails 2 中，您可以使用 Grails 资源定位器

```
class MyService {
    def grailsResourceLocator

    myMethod() {
        def fileIn = grailsResourceLocator.findResourceForURI('/txt/lexicon.txt').file
    }
} 
```

实用提示：要在 Spock 中模拟它，请使用 GroovyPageStaticResourceLoader

```
@TestFor(MyService)
class MyServiceSpec extends Specification {
    def setup() {
        service.grailsResourceLocator = Mock(GroovyPageStaticResourceLocator)
    }
} 
```

# sql - Oracle SELECT - 一列的别名作为另一列的输入

> ID：15389338
> 
> 赞同：4
> 
> 时间：2013-03-13T15:20:36.917
> 
> 标签：sql, oracle, select, alias

伙计们，我在这个论坛上发现了类似但不确切的问题——如果我没有做足够的搜索，请原谅我。这是我的问题..在甲骨文

```
select ( t.value*2) as inst2, (inst2 * 3) as inst3
from table t; 
```

背后的想法是如果`f() = t.value*2`是一个昂贵的调用，那么我们不需要做两次......或者我可以使用其他查询结构（我试图在 CTAS 中实现这一点）

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T15:54:16.047

另外的选择：

```
with cte as (
    select t.value*2 as inst2
)
select
    cte.inst2,
    (cte.inst2*3) as inst3
from cte 
```

这实际上与 bluefeet 的回复相同，但我认为使用`with`-syntax 更容易理解。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T15:22:34.917

如果您想在第二次计算中使用别名，那么您将需要使用子查询：

```
select inst2,
    (inst2 * 3) as inst3
from
(
    select t.value*2 as inst2
    from table t
) 
```

# javascript - 用 instanceof 测试对象

> ID：15389345
> 
> 赞同：0
> 
> 时间：2013-03-13T15:20:51.893
> 
> 标签：javascript

```
var google = {  
    makeBeer : function(arg1,arg2){     
         alert([this instanceof google, arg1, arg2]);        
    }    
}

google.makeBeer('water','soda'); 
```

当我检查时，上面没有提醒`this instanceof google`，但是当我这样做时，相同的代码有效。

```
var google = {  
    makeBeer : function(arg1,arg2){     
         alert([this instanceof Object, arg1, arg2]);        
    }    
}

google.makeBeer('water','soda'); 
```

引用“this”是 Object 的实例，为什么不是`Google Object`. 在我的情况下，我如何确保该实例属于该特定对象。

**更新到同一个问题：**

```
var newWay = {}
google.makeBeer.call(newWay, 'pepsi', 'coke'); 
```

在上述情况下，我将 newWay 对象传递给我的函数 makeBeer，我怎么知道它的 newWay 对象在这里。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T15:22:15.033

变量“google”所指的对象实际上只是一个普通对象。标识符“google”只是一个变量名。运算符告诉对象来自哪里，而`instanceof`不是碰巧引用它的变量。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T15:27:55.593

来自[instanceof 上的 MDN 条目](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Operators/instanceof)：

> instanceof 运算符测试对象的原型链中是否具有构造函数的原型属性。

因此，除非您使用唯一的构造函数创建对象，否则类似于：

```
var newWay = new Way(); // assuming you have defined an object Way 
```

where `newWay instanceof Way === true`，除了它是一个对象之外，您不能使用 instanceof 告诉您任何其他信息。

# wcf - 展平和合并 WCF 服务结果集以在 SSRS 报告中显示

> ID：15389348
> 
> 赞同：3
> 
> 时间：2013-03-13T15:21:05.363
> 
> 标签：wcf, reporting-services

我们有一个 WCF 服务，它返回以下内容：

```
MessageContract
    |
    +-- List<TopLevelDataContract>

TopLevelDataContract
    |
    +-- FirstChildDataContract
    +-- SecondChildDataContract
    +-- ThirdChildDataContract

FirstChildDataContract
    |
    +-- FieldOne
    +-- AnotherField

SecondChildDataContract
    |
    +-- FieldTwo
    +-- YetAnotherField

ThirdChildDataContract
    |
    +-- FieldThree
    +-- AndAnotherField 
```

为了在 SSRS 中充分显示这些数据契约，我们需要将它们展平为表格形式，如下所示：

```
+----------+--------------+----------+-----------------+------------+-----------------+
| FieldOne | AnotherField | FieldTwo | YetAnotherField | FieldThree | AndAnotherField |
+----------+--------------+----------+-----------------+------------+-----------------+
 ... rows of data... 
```

然而`ElementPath`，实现这一点的表达式/XMLDP 查询让我们望而却步。我们没有高兴地尝试了以下方法：

1.  获取 a 类型的所有“行” `FirstChildDataContract`：

```
<ElementPath IgnoreNamespaces="true">   
  MessageContract{}/TopLevelDataContracts{}/TopLevelDataContract{}/FirstChildDataContract
</元素路径>

```

1.  这将获取所有子项，但采用原始 XML 格式：

```
<ElementPath IgnoreNamespaces="true">   
  MessageContract{}/TopLevelDataContracts{}/TopLevelDataContract{@}
</元素路径>

```

1.  这与（1）相同：

```
<ElementPath IgnoreNamespaces="true">   
  *
</元素路径>

```

`ElementPath`如果可能的话，用来实现这一目标的正确表达是什么？

（旁白：为什么微软不直接使用文档齐全且灵活的 XPath，而不是推出他们自己的几乎但不是很像 xpath 查询语言？）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T08:44:09.667

我读过这个

[http://msdn.microsoft.com/en-us/library/aa964129(SQL.90).aspx](http://msdn.microsoft.com/en-us/library/aa964129(SQL.90).aspx)

它表示

> 不支持多个父子层次结构。在此示例中，客户同时拥有订单和退货。提供者可能只返回一组。因为首先指定了 Orders 层次结构，所以自动派生会将其解析为骨架。

我对 SSRS 了解不多，但我正在考虑使用多个数据集作为一种技巧。可能吗？

# tfs - 我在源代码控制映射中犯了一个错误。我该如何纠正？

> ID：15389349
> 
> 赞同：7
> 
> 时间：2013-03-13T15:21:06.440
> 
> 标签：tfs

我创建了一个团队项目，比如说 ProjectA 当我将它映射到我的本地文件夹时，我发现根服务器文件夹：ProjectA 文件夹没有映射。但是，其中的 ProjectA 文件夹映射到该项目。这是一个问题，因为 BuildProcessTemplate 不包含在源代码管理中，我无法构建我的应用程序。如何删除映射并重新开始？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-13T22:54:46.100

在 Visual Studio 的源代码管理资源管理器窗口中，靠近顶部的工作区有一个下拉菜单。当您最初映射该文件夹时，它为您创建了一个工作区。如果要更改映射，可以通过单击下拉菜单并选择`Workspaces...`选项来完成。您可以选择您的工作区，然后单击`Edit..`以更改映射。如果您愿意，也可以删除当前工作区并创建一个新工作区。

# file - 写入文件时出现编译器错误

> ID：15389350
> 
> 赞同：0
> 
> 时间：2013-03-13T15:21:06.807
> 
> 标签：file, println

我收到错误：- 错误：找不到符号 tofile.println("Dancing" + " " + danceminutes + " " + bpm); ^ 符号：变量 tofile 位置：类 CreateFile

我不确定为什么。

```
 // writing to a file 
     PrintWriter toFile = new PrintWriter(new FileWriter("exLog.txt"));                     

     Random randy = new Random();
     int count = randy.nextInt(12) + 19;
     for (int i = count; i > 0; i--) {

        int exercise = randy.nextInt(3);

        if (exercise == 0) {
           int minutesOne = randy.nextInt(47) + 14;
           int minutesTwo = randy.nextInt(62) + 59;
           int minutesThree = randy.nextInt(122) + 119;
           int roulette = randy.nextInt(100);
           if (roulette <= 74) {
              int runoneminutes = minutesOne;
              double speed = 4.9 + (16.1 - 4.9) * randy.nextDouble();
              double distance = speed * runoneminutes/60;
              tofile.println("Running" + " " + runoneminutes + " " + distance);
           }
           else if (roulette > 74 && roulette < 96) {
              int runtwominutes = minutesTwo;
              double twospeed = 4.9 + (16.1 - 4.9) * randy.nextDouble();
              double twodistance = twospeed * runtwominutes/60;
              tofile.println("Running" + " " + runtwominutes + " " + twodistance);
           }
           else if (roulette >= 96) {
              int runthreeminutes = minutesThree;
              double threespeed = 4.9 + (16.1 - 4.9) * randy.nextDouble();
              double threedistance = threespeed * runthreeminutes/60;
              tofile.println("Running" + " " + runthreeminutes + " " + threedistance);
           }
        }

        if (exercise == 1) {
           int bikeminutesOne = randy.nextInt(62) + 29;
           int bikeminutesTwo = randy.nextInt(212) + 89;
           int bikeroulette = randy.nextInt(100);
           if (bikeroulette <= 49) {
              int bikeoneminutes = bikeminutesOne;
              double bikeonespeed = 7.9 + (25.1 - 7.9) * randy.nextDouble();
              double bikeonedistance = bikeonespeed * bikeoneminutes/60;
              tofile.println("Biking" + " " + bikeoneminutes + " " + bikeonedistance);
           }
           else if (bikeroulette > 49) {
              int biketwominutes = bikeminutesTwo;
              double biketwospeed = 7.9 + (25.1 - 7.9) * randy.nextDouble();
              double biketwodistance = biketwospeed * biketwominutes/60;
              tofile.println("Biking" + " " + biketwominutes + " " + biketwodistance);
           }
        }

        if (exercise == 2) {
           int exercises = randy.nextInt(15) + 1;
           int reps = randy.nextInt(37) + 9;
           double liftminutes;
           int liftminutes = 5*reps*exercises/60 + 2*(exercises-1);
           tofile.println("Lifting" + " " + liftminutes + " " + reps);
        }

        if (exercise == 3) {
           int danceminutes = randy.nextInt(90) + 29;
           double bpm = 79.9 + (220 - 79.9) * randy.nextDouble();
           tofile.println("Dancing" + " " + danceminutes + " " + bpm);
        }
     }

     toFile.close();  //saving output file          

  } // end main 
```

} // 结束 CreateFile 类

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T15:24:09.480

变量名称是 toFile。编译器抱怨使用“tofile”。

# android - 无法使用意图 (Gmail) 从我的应用程序发送带有附件的电子邮件

> ID：15389351
> 
> 赞同：3
> 
> 时间：2013-03-13T15:21:07.410
> 
> 标签：android, android-intent, email-attachments

我正在尝试使用 Intent 发送包含在 sdcard 文件夹中的文件（.log 文件）。这是代码：

```
public void sendMail() {
            Intent intent = new Intent(Intent.ACTION_SEND_MULTIPLE);
            intent.setType("text/plain");
            intent.putExtra(Intent.EXTRA_EMAIL, new String[] {"name.surname@gmail.com"});
            intent.putExtra(Intent.EXTRA_SUBJECT, "Log files");
            intent.putExtra(Intent.EXTRA_TEXT, "body");
            //has to be an ArrayList
            ArrayList<Uri> uris = new ArrayList<Uri>();
            //convert from paths to Android friendly Parcelable Uri's
            if(Environment.MEDIA_MOUNTED.equals(Environment.getExternalStorageState())){
                File root = Environment.getExternalStorageDirectory();

                File logfolder = new File(root, "log");

                for (String file : logfolder.list()){
                    Uri u = Uri.parse(file);
                    uris.add(u);
                }
                intent.putParcelableArrayListExtra(Intent.EXTRA_STREAM, uris);
                startActivity(Intent.createChooser(intent, new String("Send mail...")));
            }

        } 
```

我从菜单中选择 Gmail。打开 Gmail 后，它会正确显示包含收件人、主题、文本和附件文件的邮件。邮件发送没有错误，但我收到一个状态栏通知，上面写着“无法显示附件”！事实上收件人正确接收电子邮件，但它没有附件。我无法弄清楚是什么问题。为什么不发送附件？请帮我！！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-13T16:05:37.933

好的。我找到了解决方案。需要更换这个：

```
for (String file : logfolder.list()){
   Uri u = Uri.parse(file);
   uris.add(u);
} 
```

有了这个：

```
for (File file : logfolder.listFiles()){
    Uri u = Uri.fromFile(file);
    uris.add(u);
} 
```

# jquery-animate - 无法为 HighCharts 列标签的 svgX 设置动画

> ID：15389362
> 
> 赞同：0
> 
> 时间：2013-03-13T15:21:32.507
> 
> 标签：jquery-animate, highcharts, jquery-svg, svg-animate

赏金更新：我为此悬赏，所以我想提供更多信息，以防有人提出与修改我的代码不同的解决方案。目标是`HighCharts`为条形图和柱形图设置实际类别位置的动画。动画实际的“条形/列”似乎内置在 HighCharts 中，但是，标签位置是我遇到的问题。有关 JSFiddle，请参见下文。*另外，我知道这个问题是关于 SVG 的，但我也需要 IE8 中的动画支持。*

我目前的任务是`HighCharts`对条形图和柱形图的类别重组进行动画处理。

我的条形图工作正常，能够重新组织类别和标签，标签使用以下代码制作动画：

```
$(this).animate({'svgY': c.labelPositions[myX]}, {'duration': animDuration, 'queue': false}); 
```

现在我正在处理列，我在让标签动画化时遇到了很大的麻烦。代码相对相同：

```
$(this).animate({'svgX': c.labelPositions[myX]}, {'duration': animDuration, 'queue': false}); 
```

我`jQuery SVG`用来允许 SVG 元素的动画，你可以在[这里](http://keith-wood.name/svg.html)找到它。

[你可以在这里](http://jsfiddle.net/mkremer90/sB9mT/)查看我正在处理的 jsFiddle 。只需单击每个图表下方的“开始”按钮即可查看它们的运行情况。

允许类别动画的实际“hack”是`Highcharts.Series.prototype.update = function(changes, callback){`功能。

只是在尝试让某些东西起作用，我发现我可以`svgY`为 Column 标签设置动画，但`svgX`似乎根本不起作用。

欢迎实际`HighCharts.js`的黑客攻击。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T13:22:59.700

我查看了您的代码并对其进行了一些改进。我做了以下事情：

*   使用存储我们要更新的属性的单个变量的列/条的统一代码
*   删除了 jQuerySVG 依赖项，而不是我的代码使用内置的 Highcharts 动画方法
*   修复了一些小错误

我用 IE7+/Chrome/Firefox 对此进行了测试，所有这些都运行良好。

在这里你可以找到我的 Highcharts.Series.prototype.update 版本：

```
Highcharts.Series.prototype.update = function (changes, callback) {
    var series = this,
        chart = this.chart,
        options = chart.options,
        axis = chart.xAxis[0],
        ticks = axis.ticks,
        type = chart.options.chart.type,
        animDuration = 400,
        attr = type === 'bar' ? 'y' : 'x',
        animOpt = {},
        text;

    if (options.chart.animation && options.chart.animation.duration) {
        animDuration = options.chart.animation.duration;
    }

    if (type == "bar" || type == "column") {

        if (typeof chart.labelPositions === "undefined") {
            chart.labelPositions = [];

            $.each(ticks, function () {   
                chart.labelPositions.push(this.label[attr]);
            });
        }

        for (var category in changes) {

            for (var i = 0; i < series.points.length; i++) {

                if (typeof series.points[i].originalCategory === "undefined") {
                    series.points[i].originalCategory = series.points[i].category;
                }

                if (series.points[i].originalCategory == category) {

                    $.each(ticks, function () {
                        text = this.label.text || this.label.element.innerHTML; // use innerHTML for oldIE
                        if (text == category) {
                            var myX = (typeof changes[category].x !== "undefined") ? changes[category].x : series.points[i].x;
                            series.points[i].update(changes[category], false, {
                                duration: animDuration
                            });

                            animOpt[attr] = parseInt(chart.labelPositions[myX]);

                            // This is the line that animates the bar chart labels.
                            this.label.animate(animOpt, {
                                'duration': animDuration,
                                'queue': false
                            });

                            return false;
                        }
                    });
                }
            }
        }

        chart.redraw();

        if (typeof callback !== "undefined") {
            setTimeout(function () { callback(); }, animDuration);
        }
    }
} 
```

查看演示：http: [//jsfiddle.net/evq5s/17](http://jsfiddle.net/evq5s/17)

# c# - 无法获取表中的列名

> ID：15389363
> 
> 赞同：1
> 
> 时间：2013-03-13T15:21:34.993
> 
> 标签：c#, sql, tsql

这是我的代码：

```
 conn.Open();
     string sql = "select min(IMG_ID) from IMGDETAIL where PRO_ID = @id";
     cmd = new SqlCommand(sql, conn);
     cmd.Parameters.Add(new SqlParameter("@id", nailId));
     da = new SqlDataAdapter(cmd);
     da.Fill(dt);    
     if (dt.Rows.Count > 0)
      {
        foreach (DataRow row in dt.Rows)
        {
          id = int.Parse(row["IMG_ID"].ToString());                      
        }
      } 
```

我尝试获取一个 id 列，它显示我的表没有`IMG_ID`列的错误，但是我检查它已经有这个列。

有人可以告诉我有什么问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T15:24:29.570

您没有`IMG_ID`列，而是由`MIN(IMG_ID)`. 用来`AS`给它起一个名字，比如

```
string sql = "select min(IMG_ID) AS IMG_ID from IMGDETAIL where PRO_ID = @id"; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T15:23:04.587

试试下面的 - MIN(...) 不会给列的名称与 MIN 的内容相同。

`string sql = "select min(IMG_ID) AS IMG_ID from IMGDETAIL where PRO_ID = @id";`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T15:22:56.663

更正您的查询以避免此错误，因为您的查询创建了一个未命名的列，它应该是：

```
select min(IMG_ID) as IMG_ID  from IMGDETAIL where PRO_ID = @id 
```

如果您使用它，它将为列命名为 IMG_ID

# html - 如何让谷歌索引我的自定义域而不是 github pages 域？

> ID：15389370
> 
> 赞同：4
> 
> 时间：2013-03-13T15:21:47.387
> 
> 标签：html, github, dns, github-pages

当我们完成他们的官方网站时，我在 github 页面中为客户托管了一个启动页面。

直到几天前一切都还好，但我现在意识到[谷歌正在索引](https://www.google.com/search?q=neue%20house&rlz=1C5CHFA_enUS503US503&aq=f&oq=neue%20house&aqs=chrome.0.57j61l2j60j0l2.1899&sourceid=chrome&ie=UTF-8#hl=en&rlz=1C5CHFA_enUS503US503&sclient=psy-ab&q=neuehouse&oq=neuehouse&gs_l=serp.3..0i10j0j0i7j0.4471.4471.0.4778.1.1.0.0.0.0.75.75.1.1.0.les;..0.0...1c.1.5.psy-ab.g2PgjyZid_o&pbx=1&bav=on.2,or.r_cp.r_qf.&bvm=bv.43287494,d.dmQ&fp=83aafd1de9483772&biw=1280&bih=755)[github url](http://base-design.github.com/neuehouse/)而不是[自定义域](http://neuehouse.com/)。

我按照 github 的说明，在我的 repo 中使用了 CNAME 文件，我为顶级域设置了 A 域，为 www 设置了 CNAME。我没有运气就在互联网上四处寻找。我尝试使用谷歌网站管理员工具，但我不能真正使用 robots.txt，因为这会影响两者。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-26T20:46:30.150

我想我找到了解决方案。留下它，因为它可能对其他人有帮助。

我现在需要等待谷歌重新索引，但它应该这样做。根据[这个问题](https://stackoverflow.com/questions/9276817/301-redirect-for-site-hosted-at-github)和[这篇谷歌文章](http://support.google.com/webmasters/bin/answer.py?hl=en&answer=139394)，头部的规范链接标签应该修复它。

```
<link rel="canonical" href="http://www.[website-url]"/> 
```

我还添加了一个 js 重定向技巧来重定向来自谷歌的人。

```
if ( window.self === window.top ) { 
    // console.log("not in a frame") 
       window.location.href = 'http://www.[website-url]';
    } 
```

# c# - 分割字符串的正则表达式

> ID：15389383
> 
> 赞同：0
> 
> 时间：2013-03-13T15:22:19.883
> 
> 标签：c#, regex

我有一个像 [123,234,321,....]

我可以使用正则表达式仅提取数字吗？

这是我现在使用的代码

```
 public static string[] Split()
    {
        string s = "[123,234,345,456,567,678,789,890,100]";
        var temp = s.Replace("[", "").Replace("]", "");
        char[] separator = { ',' };
        return temp.Split(separator);

    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T15:24:49.740

您可以使用`string.Split`它 - 不需要正则表达式，尽管您的代码可以简化：

```
var nums = s.Split('[', ']', ','); 
```

认为您可能希望在返回的数组中排除空条目：

```
var nums = s.Split(new[] { '[', ']', ',' }, 
                   StringSplitOptions.RemoveEmptyEntries); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T15:24:58.807

Trim() 有一个需要一个字符的重载。

你可以这样做。

```
string s = "[123,234,345,456,567,678,789,890,100]";
var nums = s.Trim('[').Trim(']').Split(','); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-13T15:28:01.887

如果要使用正则表达式，请尝试：

```
string s = "[123,234,345,456,567,678,789,890,100]";            
var matches = Regex.Matches(s, @"[0-9]+", RegexOptions.Compiled); 
```

但是，正则表达式往往会降低您的代码的可读性，因此您可能会坚持原来的方法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-13T21:29:41.787

虽然您可以并且可能应该使用 string.Split 正如其他答案所表明的那样，但该问题专门询问您是否可以使用正则表达式来做到这一点，是的，您可以：-

```
var r = new Regex(@"\d+", RegexOptions.Compiled );
var matches = r.Matches("[123,234,345,456,567,678,789,890,100]"); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-13T15:28:37.273

```
string s = "[123,234,345,456,567,678,789,890,100]";
MatchCollection matches = Regex.Matches(s, @"(\d+)[,\]]");
string[] result = matches.OfType<Match>().Select(m => m.Groups[1].Value).ToArray(); 
```

这里`@`用于表示逐字字符串文字，并允许在正则表达式表示法中直接使用转义字符“\”而不转义自身“\”。

`\d`是一个数字，`\d+`表示 1 个或多个数字。括号表示一个组，因此`(\d+)`意味着我想要一组数字。（*见稍后使用的组）

`[,\]]`方括号，简而言之，意味着选择我的任何一个元素，因此它将选择我必须转义的逗号`,`或方括号。`]`

所以正则表达式会找到连续数字后跟 a`,`或的表达式`]`。Matches 将返回一组匹配项（我们使用它是因为有多个组）然后我们通过每个匹配项 - 使用一些 LINQ - 并获取索引 1 组，即第二组，“但我们只做了一个组？” 我们只指定了一个组，第一个组（索引 0）是整个正则表达式匹配，在我们的例子中，将包括我们不想要的`,`or 。`]`

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-13T15:26:51.347

尝试使用[`string.Split`](http://msdn.microsoft.com/en-us/library/system.string.split.aspx)方法；

```
string s = "[123,234,345,456,567,678,789,890,100]";
var numbers = s.Split('[',']', ',');
foreach(var i in numbers )
   Console.WriteLine(i); 
```

这是一个[`DEMO`](http://ideone.com/vidlZF).

**编辑**：正如 Oded[提到](https://stackoverflow.com/a/15389442/447156)的，您可能也想使用[`StringSplitOptions.RemoveEmptyEntries`](http://msdn.microsoft.com/en-us/library/system.stringsplitoptions.aspx)。

# php - 从外部加载 WordPress 核心文件会导致站点的其余部分使用 wordpress mysql 连接

> ID：15389385
> 
> 赞同：1
> 
> 时间：2013-03-13T15:22:25.147
> 
> 标签：php, mysql, wordpress

我在上面安装了一个单独的站点和 wordpress，但 WP 只驻留在`blog/`目录中；他们都使用单独的数据库。

现在，我想加载 WP 核心文件，这样我就可以在主页上加载一些 WP 特定的东西，所以我继续尝试下面的内容。

```
// Include wordpress core
require(WP_ROOT_PATH . 'wp-load.php'); 
```

现在我收到数据库错误`database1.table1`，说不存在之类的东西。（注意这些只是示例名称）。

这可能是因为现在 wordpress 已经打开了它自己的数据库连接，并且现在站点的其余部分正在新连接下运行它的查询。

我能想到的解决这个问题的唯一方法是..

*   将要使用的数据库资源添加到所有数据库调用
*   通过 iframe 加载 WP 数据，这样您只需要加载 WP 文件，从而避免其他问题

除了以上，我还能做什么！？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T15:38:32.840

尝试在主站点的单独文件中编写您需要的内容，如下所示：

```
// Include wordpress core
require(WP_ROOT_PATH . 'wp-load.php');

//Get wp content here

// close wordpress database connection
mysql_close($wpdb->dbh); 
```

然后`include`在您需要主站点中的内容时使用此文件。如果`include`不起作用，您可以使用：

```
echo file_get_contents("filename.php") 
```

# android - 按钮不起作用，如何解决

> ID：15389387
> 
> 赞同：0
> 
> 时间：2013-03-13T15:22:32.053
> 
> 标签：android

我有一个带有 6 个按钮的表单，我目前正在尝试让第 3 个按钮工作。前两个按钮工作正常，但是当我单击第三个按钮时，什么都没有发生，也没有错误。任何人都可以帮忙吗？

我检查了表单名称、类名称和按钮名称，但无法正常工作。我已经包含了按钮的代码。

```
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    //setting fullscreen
    requestWindowFeature(Window.FEATURE_NO_TITLE);
    getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN,WindowManager.LayoutParams.FLAG_FULLSCREEN );
    setContentView(R.layout.main_menu);

    initialize(); //calling this method
}

public void initialize(){

    //Initializing variables

    Film = (Button) findViewById(R.id.bFilm);
    Music = (Button) findViewById(R.id.bMusic);
    Poets = (Button) findViewById(R.id.bPoet);
    Inventors = (Button) findViewById(R.id.bInventors);
    Science = (Button) findViewById(R.id.bScience);
    Sports = (Button) findViewById(R.id.bSport);

    //initialzing onclicklisteners
    Film.setOnClickListener(this);
    Music.setOnClickListener(this);
    Sports.setOnClickListener(this);
}

@Override
public void onClick(View view) {
    //case statment for onclicklisteners
    try{
    switch(view.getId()){
    case R.id.bFilm:
        Intent film = new Intent(this, Film.class); //open film class
        startActivity(film);
        break;
    case R.id.bMusic:
        Intent music = new Intent(this, Music.class); //open music class
        startActivity(music);
        break;
    case R.id.bPoet:
        Intent poet = new Intent(this, Poets.class); //open poet class
        startActivity(poet);
        break;
    case R.id.bInventors:
        Intent invent = new Intent(this, Inventors.class); //open inventors class
        startActivity(invent);
        break;
    case R.id.bScience:
        Intent science = new Intent(this, Science.class); // open science class
        startActivity(science);
        break;
    case R.id.bSport:
        Intent sport = new Intent(this, Sports.class);  //open sports class
        startActivity(sport);
        break;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T15:25:57.127

如果 Sports 是您的第三个按钮
，请确保您的 xml 中没有任何带有 id`bSport`的元素，期望`bSport`按钮本身。

删除`try{} catch(){}`. 并查看您的应用程序是否崩溃，并确保您已将`Sports`活动添加到`Manifest`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-13T15:27:45.783

您只为 3 个按钮（电影、音乐和体育）设置了点击侦听器，您必须在 initlialize 中设置所有侦听器。

```
enter code here

public void initialize(){

    //Initializing variables

    Film = (Button) findViewById(R.id.bFilm);
    Music = (Button) findViewById(R.id.bMusic);
    Poets = (Button) findViewById(R.id.bPoet);
    Inventors = (Button) findViewById(R.id.bInventors);
    Science = (Button) findViewById(R.id.bScience);
    Sports = (Button) findViewById(R.id.bSport);

    //initialzing onclicklisteners
    Film.setOnClickListener(this);
    Music.setOnClickListener(this);
    Sports.setOnClickListener(this);
    Poets.setOnClickListener(this);
    Inventors.setOnClickListener(this);
    Science.setOnClickListener(this);
} 
```

# javascript - WebSQL：按列排序并打印关联的行

> ID：15389389
> 
> 赞同：0
> 
> 时间：2013-03-13T15:22:34.853
> 
> 标签：javascript, sql, html, web-sql

我有一个像这样的小型 SQL 数据库：

```
id        name      category
------------------------------
1         name1     category1
2         name2     category2
3         name3     category1
4         name4     category1 
```

我想像这样使用javascript和html格式化数据库：

```
<ul>
    <li>category1
        <ul>
            <li>name1</li>
            <li>name3</li>
            <li>name4</li>
        </ul>
    </li>
    <li>category2
        <ul>
            <li>name2</li>
        </ul>
    </li>
</ul> 
```

因为我不能嵌套 SQL 执行，所以我被卡住了。我发现了如何显示类别，但我没有走得更远。这是我的javascript：

```
var db = openDatabase('dbname', '1.0', 'DB Name', 2 * 1024);

db.transaction(function (tx) {
    tx.executeSql('SELECT DISTINCT category FROM list', [], function (tx, results) {
        if (results.rows.length > 0) {
            for (var i = 0; results.rows.length > i; i++) {
                $('ul').append('<li>' + results.rows.item(i).category + '</li>');
            }
        }
    });
}); 
```

非常感谢您的帮助！

**编辑：** 我终于可以嵌套两个 SQL 执行并获得正确的变量。但不知何故，我得到了每个类别的第一名，然后我得到了名字（按正确的顺序）。我检查代码一百次，找不到错误...

```
db.transaction(function (tx) {
    tx.executeSql('SELECT DISTINCT category FROM list', [], successCallback);
});

function successCallback(tx, results) {
    if (results.rows.length > 0) {
        for (var i = 0; results.rows.length > i; i++) {
            var result = results.rows.item(i);
            alert('Next Category: '+result.category);
            tx.executeSql('SELECT name FROM list WHERE category = "'+result.category+'"', [], successCallbackTwo);
        }
    }
}

function successCallbackTwo(tx, results) {
    for (var i = 0; results.rows.length > i; i++) {
        alert(results.rows.item(i).name);
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T15:37:14.670

当然你可以“嵌套 SQL 执行”，只需将第二个查询放在第一个查询的成功回调中。但这可以通过单个查询来完成。

```
db.transaction(function (tx) {
    // query (might want to add some ORDER BY clause)
    // updated to include nameurl column as suggested
    tx.executeSql('SELECT category, name, nameurl FROM list', [], function (tx, results) {
        // group results based on category
        var grouped = {};
        if (results.rows.length > 0) {
            for (var i = 0; results.rows.length > i; i++) {
                var record = result.rows.item(i);
                if(!(record.category in grouped)) {
                    grouped[record.category] = [];
                }
                grouped[record.category].push({
                    name: record.name,
                    nameurl: record.nameurl
                });
            }
        }

        // build tree from categories and names
        var $tree = $('<ul />');
        $.each(grouped, function(category, records) {
            var $leaves = $('<ul />');
            $.each(records, function(ix, record) {
                var $leaf = $('<li />');
                var $leaflink = $('<a />', {
                    text: record.name,
                    href: record.nameurl
                });
                $leaf.append($leaflink);
                $leaves.append($leaf);
            });
            var $branch = $('<li />', {
                text: category
            });
            $branch.append($leaves);
            $tree.append($branch);
        });

        // insert tree into page
        $(document.body).append($tree);
    });
}); 
```

# breeze - 带有选择返回未定义的微风js实体查询

> ID：15389390
> 
> 赞同：0
> 
> 时间：2013-03-13T15:22:37.017
> 
> 标签：breeze

使用下面的代码，我遇到了一个问题，即并非所有列都返回 data.results 数组中的数据。例如，如果数据库中第 1 行的 col4 为空，则 data.results[0] 不包含 col4 的元素，但第 2 行有一个值，则 data.results[1] 将包含 col4 的值。我希望数组中的每个返回项都包含具有数据库值或 null 的所有项。如果不能返回 null，则可以使用空字符串。

```
 var query = new breeze.EntityQuery()
             .from('mytable')
             .where('col1', 'substringof', '2')
             .select('col1,col2,col3,col4')
             .orderBy('col1')
             .take(200);

    return _manager
        .executeQuery(query)
        .then(function (data) {
            return data.results;
        })
        .fail(queryFailed);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T18:55:00.343

默认情况下，Breeze 不会在其 JSON 结果中序列化 null 值。这是一个经过深思熟虑的选择，以减少电线上的微风有效载荷。而且..这通常不是返回“实体”的查询的问题。即存在微风元数据的数据。因为已经在此类实体上定义了属性。

但是，如果您按原样返回匿名结果，那么这可能是个问题。您显然可以解决它，因为您知道您请求的属性，并且如果它们不在结果中，可以在查询后更新它们。

但是您也可以通过“BreezeConfig”类更改微风的默认配置以适应这种情况。

BreezeConfig 支持在 Web API 中自定义支持 Breeze 相关操作的组件。BreezeConfig 定义默认行为；您可以通过从它派生并覆盖其虚拟方法来替换您自己的行为。Breeze.NET 将在您的项目引用的程序集中发现您的子类，并使用它而不是 BreezeConfig。

使用 BreezeConfig 配置具有特定设置的 Json.Net 序列化程序。您可以通过编写覆盖“CreateJsonSerializerSettings”方法的 BreezeConfig 子类来替换这些设置，如下例所示：

```
public class CustomBreezeConfig : Breeze.WebApi.BreezeConfig {    
  protected override JsonSerializerSettings CreateJsonSerializerSettings() {   
    var baseSettings = base.CreateJsonSerializerSettings();      
    baseSettings.NullValueHandling = NullValueHandling.Include;
    return baseSettings;  
} 
```

希望这可以帮助。

# javascript - IE8 jQuery 将光标放在文本框中只能在开头

> ID：15389391
> 
> 赞同：0
> 
> 时间：2013-03-13T15:22:38.470
> 
> 标签：javascript, jquery, internet-explorer-8, cursor, position

我已经到了极限。我必须为 Web 应用程序实现一些功能。问题是，由于公司政策，它只能在 IE8 上实现...... IE8 甚至无法正常加载 jsFiddle。我得到任何可能的和难以理解的错误。我有很多 php 脚本，作为其中一个的响应（ajax 请求），我得到了一个包含一些数据的表。如果我单击此元素，则会出现一个编辑框，我可以修改此值。第一个问题是，如果我首先点击这个元素，我只能修改这个值，但我不能在其他任何地方设置光标。起初是在开始。如果我单击框中的其他任何位置，光标就会消失，我什么也做不了。我认为这是我的代码中的问题。但...

这里的代码：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<script type="text/javascript" src="./JavaScript/jquery-1.9.1"></script>
<script type="text/javascript">
function modify(value){
    $('.ajax').html($('.ajax input').val());
    $('.ajax').removeClass('ajax');
    $(value).addClass('ajax');
    $(value).html(
            '<input id="editbox"' + ' type="text" value="' + $(value).text() + '"/>');
    $('#editbox').focus();
}
</script>
</head>
<body>
<table id="test" border="1">
<tr>
<td class="ajax" id="test" onclick="modify(this)">Click</td>
<td>Nothing</td>
</tr>
<tr>
<td id="tset" onclick="modify(this)">Click</td>
<td>Nothing</td>
</tr>
</table>
</body>
</html> 
```

请帮帮我......我根本不明白，为什么我不能正常放置光标。~~以及为什么我会遇到如此愚蠢的错误~~。~~我查看了调试器，其他调用（来自 ajax-php）的任何内容都与其他调用相同，但在这里它不会继续 $(value)....~~

**“预期对象”的第一个问题解决了** *src="--> **.** <--/JavaScript/jquery-1.9.1* 只是一点。

但是现在您可以看到我的光标问题。当我只有一个正常的“文本框”（输入类型=“文本”值=“blabla”.....）时，我怎样才能得到相同的结果，并且我可以将光标设置在我想要的任何地方

**编辑** 得到了一些有趣的东西。看起来我必须使用**$('#editbox').focus();** 有人知道如何释放光标吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T15:28:43.320

你需要把你的脚本改成这样

```
<script type="text/javascript">
 function modify(value){
   //$('.ajax').html($('.ajax input').val());
   //$('.ajax').removeClass('ajax');
   $("#" + value.id).addClass('ajax');
   $("#" + value.id).html(
           '<input id="editbox"' + ' type="text" value="' + $("#" + value.id).text() + '"/>');
   $('#editbox').focus();
}
</script> 
```

当您将 html 元素传递给函数时，它不会传递 jQuery 对象，而只是传递 DOM 对象。使用 $("#" + value.id) 找到 DOM 对象并将其转换为 jQuery 对象。

# yii - 使用 Active Record 中的关系组合表的 Yii 模型

> ID：15389398
> 
> 赞同：1
> 
> 时间：2013-03-13T15:22:52.067
> 
> 标签：yii

我有模型类 Contactindiv 与关系和搜索如下。

```
public function relations()
{
    return array(

    'contactlogs' => array(self::HAS_MANY, 'Contactlog', 'ContactIndivID'),

    );

}

public function search()
{
    $criteria=new CDbCriteria;

    $criteria->compare('ContactIndivID',$this->ContactIndivID);
    $criteria->compare('PersonalTitle',$this->PersonalTitle,true);
    $criteria->compare('NameLast',$this->NameLast,true);
    $criteria->compare('NameMiddle',$this->NameMiddle,true);
    $criteria->compare('NameFirst',$this->NameFirst,true);

    return new CActiveDataProvider($this, array(
        'criteria'=>$criteria,
    ));
} 
```

当前页面以可搜索的 CGridView 格式显示数据。

我的目标是将关系中的“联系人日志”组合到模型中，以便在 GridView 中以可搜索的方式显示在页面上。基本上为每个联系人添加一个可搜索的 GridView 列，显示他们的联系人日志。

提前感谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T17:22:13.837

对于您的第一个目标（在模型中显示联系人日志），您可以在主模型中编写一个 getter。这取决于您希望在 gridview 列中显示的内容，但您可以使用以下内容：

```
public function getContacts()
{
    $names = array();
    foreach($this->contactlogs as $log)
        $names[] = $log->name;
    return implode(', ', $names);
} 
```

现在您可以像使用`contacts`“Contactindiv”模型的常规属性一样使用它。

对于您的第二个目标，您可以添加一个包含过滤器值的公共属性，您可以在您的`search()`方法中使用它：

```
public $contactFilter;
public function search()
{
    // ...
    if(!empty($this->contactFilter)) {
        $criteria->with = array(
            'contactlogs' => array(
                'joinType' => 'INNER JOIN',
                'on' => 'contactlogs.name = :name',
             ),
        );
        $criteria->params[':name'] = $this->contactFilter;
    }
    // ..
} 
```

现在您只需在 gridview 的`columns`配置中添加以上所有内容：

```
array(
    'name' => 'contacts',
    'filter' => CHtml::activeTextField($model, 'contactFilter'),
) 
```

请注意，我是从头顶写下大部分内容，无法完全测试它。但它应该有望使您清楚地了解基本概念。请让我知道它是否有效。

# c++ - 数组添加和设置方法

> ID：15389409
> 
> 赞同：0
> 
> 时间：2013-03-13T15:23:21.040
> 
> 标签：c++, arrays, loops

我正在将一个数组传递给我的类，我正在构建它，然后我能够进行事务处理（用新数据替换数组）或添加事务处理（因此，如果数组的第一个大小为 10，那么另外 10 个被添加到让它有 20 个元素，数组中的数量可能并不总是 20 等）

当使用前两种方法而不是添加事务方法时，代码会产生我期望的正确结果。没有按预期添加另外 10 个元素

有人知道我的编码中有什么问题吗？

我相当受此分配结构的约束，因此使用可用结构是理想的。

```
Transaction* tArray;
int nTransactions;

Analyser::Analyser(Transaction* transactions, int numTransactions)
{
    //contructs the array and the amount of transations
    tArray = transactions;
    nTransactions = numTransactions;
}

void Analyser::setTransactions(Transaction* transactions, int numTransactions)
{
    //set tArray to new set of transactions
    tArray = transactions;
}

void Analyser::addTransactions(Transaction* transactions, int numTransactions)
{

    Transaction* newT;
    newT = new Transaction[numTransactions + nTransactions];    

    for(int i = 0; i<nTransactions; i++)
    {
        newT[i] = tArray[i];
    }
    for (int j = nTransactions; j<numTransactions + nTransactions; j++ )
    {
        newT[j] = transactions[j-nTransactions];    
    }
    tArray = newT;
 } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T15:39:49.163

您的`addTransactions`代码应如下所示：

```
void Analyser::addTransactions(Transaction* transactions, int numTransactions)
{

    Transaction* newT;
    newT = new Transaction[numTransactions + nTransactions];    

    for(int i = 0; i<nTransactions; i++)
    {
        newT[i] = tArray[i];
    }
    for (int j = nTransactions; j<numTransactions + nTransactions; j++ )
    {
        newT[j] = transactions[j-nTransactions];    
    }
    delete[] tArray;
    tArray = newT;
    nTransactions += numTransactions;
 } 
```

`delete[] tArray`确保您没有泄漏任何内存。在这种情况下，我假设 Analyzer 始终拥有 tArray，即使给定的指针只是在构造函数中使用，并且`setTransactions`.

`nTransactions += numTransactions;`确保`tArray`适当更新的大小。`setTransactions`如前所述，您还应该编辑。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T15:27:38.287

你应该做这个：

```
void Analyser::setTransactions(Transaction* transactions, int numTransactions)
{
//set tArray to new set of transactions
tArray = transactions;
ntransactions = numTransactions //HERE YOU NEED TO UPDATE THIS TOO
 } 
```

如评论中所述，也在此处：

```
 void Analyser::addTransactions(Transaction* transactions, int numTransactions)
 {

    nTransactions += numTransactions; 

    Transaction* newT;
    newT = new Transaction[nTransactions];    //Enough for all transactions

    for(int i = 0; i< nTransactions; i++)
    {
        newT[i] = tArray[i];
    }
    for (int j = 0; j< numTransactions; j++ )
    {
         newT[nTransactions - numTransactions + j] = transactions[j];    
    }
    tArray = newT;

 } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T15:27:53.787

你错过了这条线

```
nTransactions = numTransactions; 
```

在您的 setTransactions 中。您的构造函数应该简单地调用您的 setTransactions 方法，因此您只有一次该代码。

# sass - SublimeText 2 的高级 Sass 包

> ID：15389412
> 
> 赞同：2
> 
> 时间：2013-03-13T15:23:24.637
> 
> 标签：sass, sublimetext2

是否有用于 ST2 的 Sass 包，增强了对嵌套选择器的支持？我通过包控制安装的那个不能正确处理代码折叠。当使用只有一个声明的选择器时（对于普通的 css 文件，ST2 在只有一个声明时也不会显示代码折叠）以及使用像“& >”这样的选择器时，它不会显示代码折叠。

这是我的意思的屏幕截图：

![截屏](../Images/8c79c5a0b5cc53883a3ca32cbf810f1d.png)

我不能折叠“& > header”和“h1”。我做错了什么或不了解一些基本的东西？

马里奥

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T17:18:05.143

我将[Sass 用于 TextMate/Sublime Text 2](https://github.com/mischah/Sublime-Text-2-Settings/tree/master/Sass)，它执行您正在寻找的折叠。

# javascript - 多重赋值 var x = this.x = function(){} 的目的？

> ID：15389414
> 
> 赞同：2
> 
> 时间：2013-03-13T15:23:27.957
> 
> 标签：javascript, design-patterns, mootools, variable-assignment

在 Mootools 中，以下模式经常出现：

```
var x = this.x = function(){} 
```

例如：

```
var typeOf = this.typeOf = function(item){ ... 
```

我了解多次分配导致`function`同时分配给`x`和`this.x`。但我认为在全局范围内`x`是隐式的`this.x`，所以看起来是多余的。这是一种优化技术，还是这种模式有其他目的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T15:26:56.110

仅当此代码未在函数中执行时，这才是多余的。

如果它在函数中，则 var 是本地的，即使上下文 ( `this`) 是全局的。

看这个 ：

```
function a() {
   var x = 1;
   console.log(x)
}
function b() {
   console.log(x); // fails
}
a();
b(); 
```

如果您希望能够`x`直接使用 in`a`和 have `this.x`in `b`，那么您需要双重分配：

```
 var x = this.x = 1; 
```

当我有一个经常使用的变量并且我更喜欢不使用`this.`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T15:27:19.387

var x 不等于 this.x，var x 是 js 类的私有变量，this.x 是公共属性，因此代码创建了两种调用函数的方式这里举个例子：

```
function exampleA() {
   this.x = 1;
   var x = 2;
   this.show = function () {
    alert("A.x:" + x);
    alert("A.this.x:" + this.x);
   };
}
function exampleB() {
   var x = this.x = 1;
   this.x   +=1; 
   this.show = function () {
    alert("B.x:" + x);
    alert("B.this.x:" + this.x);
   };
}
$(document).ready(

function () {
    var example1 = new exampleA();
    example1.show();
    var example1 = new exampleB();
    example1.show();
}); 
```

# windows - Windows 上的轻量级 URL 重写

> ID：15389416
> 
> 赞同：1
> 
> 时间：2013-03-13T15:23:32.193
> 
> 标签：windows, iis-7, url-rewriting

**Windows server 2003 上的环境**
IIS7。
必须将应用程序放在两个不同的应用程序池上。

**要求**
能够根据 URL 上的参数将请求定向到特定应用程序。在请求的高负载下这样做。

**当前使用**
- [url-rewrite](http://www.iis.net/downloads/microsoft/url-rewrite) - 更改请求的端口。
- [application-request-routing](http://www.iis.net/downloads/microsoft/application-request-routing) - 允许请求重新进入 IIS 并更改应用程序池。
该解决方案提供了我正在寻找的逻辑，但性能很差。

**如果**
我可以在请求重新处理 IIS 并重写它之前捕获请求，使用轻量级机制（服务？驱动程序？）

# c# - 要解密的数据超过了这个 36 字节模数的最大值

> ID：15389421
> 
> 赞同：2
> 
> 时间：2013-03-13T15:23:38.893
> 
> 标签：c#, rsa

我正在尝试使密码安全，但是我使用 RSA 的方式有问题。这是我的代码：

```
 private void testencodedecode()
    {
        string mehdi = "mehdi";
        var enc = encodePass(mehdi);
        var dec = decodePass(enc);
    }
    private RSAParameters rsaKey()
    {
        var setting = context.Settings.First(s => s.ID == 1);

        byte[] pwd = Encoding.ASCII.GetBytes(setting.PWDKEY);

        byte[] expo = {1,0,1};

        var key = new System.Security.Cryptography.RSAParameters();
        key.Exponent = expo;
        key.Modulus = pwd;

        return key;
    }

    private string encodePass(string pass)
    {
        var provider = new RSACryptoServiceProvider();
        provider.ImportParameters(rsaKey());

        var encryptedBytes = provider.Encrypt(Encoding.UTF8.GetBytes(pass), false);

        return Encoding.UTF8.GetString(encryptedBytes);
    }

    private string decodePass(string pass)
    {
       var provider = new RSACryptoServiceProvider();
       provider.ImportParameters(rsaKey());
       string decrypted = Encoding.UTF8.GetString(provider.Decrypt(Encoding.UTF8.GetBytes(pass), true));
       return decrypted;
    } 
```

它似乎加密很好，但在解密时出现以下错误：

> 要解密的数据超过了这个 36 字节模数的最大值。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T16:43:21.457

这里的方法存在一些主要问题。首先，正如您在对另一个答案的评论中提到的那样，您正在使用 a`Guid`来构造 RSA 模数，这是完全无效的。您不能使用随机数据直接构造公钥，原因有很多：

1.  模数必须符合特定的结构，即它是两个*大*素数的乘积，而`Guid`二进制形式通常不会。
2.  为了解密 RSA 加密的数据，您必须知道用于生成模数的两个素数。即使您的随机模数神奇地是两个大素数的乘积，您也无法确定它们，因为这需要考虑模数，这是故意难以做到的（实际上，困难是 RSA 的全部基础）安全）。

您应该使用`RsaCryptoServiceProvider`构造函数生成 RSA 密钥，例如：

```
// Construct the RsaCryptoServiceProvider, and create a new 2048bit key
var csp = new RsaCryptoServiceProvider(2048); 
```

然后可以导出这个新生成的密钥的参数：

```
// Export the RSA parameters, including the private parameters
var parameters = csp.ExportParameters(true); 
```

The parameters can then be stored (**securely**) and used to re-initialize the CSP for decryption later.

There are also other obvious problems, such as the fact that the amount of data you can actually encrypt with RSA is limited by the key size, so with a 2048 bit key as created above, you can encrypt 2048 / 8 - 11 = 245 bytes (where the 11 bytes is a result of the PKCS#1 v1.5 padding that is applied). If you want to encrypt more than this, the general method is to use a symmetric cipher (e.g. AES) to encrypt the data, and then use RSA only to encrypt the AES key.

Finally, whilst this may work, I still wouldn't rely on it for security as there are almost always issues with roll-your-own encryption schemes.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T15:25:19.973

RSA 的模数应至少为 1024 位（128 字节）。任何更少的东西都将是完全不安全的。对于现代应用，甚至建议使用 2048 或更大的模数。

其次，您没有正确生成 RSA 密钥！您不应该只将密码用作模数..

必须选择公共指数和模数，使得指数对于除模`p-1`数的所有素数都是互质的。`p`如果您只是随意将模数设置为密码的二进制表示 ( `PWDKEY`)，那么您不太可能选择合适的指数/模数对。正如我之前所说，模数必须是一个相对较大的数字，通常选择为 1024、2048 或 4096 位长。

# c# - 结果视图 = 类型

> ID：15389422
> 
> 赞同：0
> 
> 时间：2013-03-13T15:23:41.380
> 
> 标签：c#, sql-server, silverlight, linq-to-sql, wcf-ria-services

我正在使用 Silverlight 4 ria 服务和 sql server 2008，

我们使用存储过程返回一些我们在数据网格中显示的数据，当 issummary =0 我们使用相同的存储过程返回数据摘要，当 issummary =1

当 issummary =0 存储过程正在返回数据，但是当 issummary =1 时，它会抛出一个错误说

```
Results View = The type 'VSO.Models.Server.PFO' exists in both 'VSO.Web.dll' and 'DataContractSurrogates_451c5697-49be-4ec5-9d42-89486ff684a6' 
```

在designer.cs 文件中。

以及 domainservice.cs 文件中的强制转换异常

指定的演员表无效。

展开：

```
 at System.Data.DataTableReader.GetGuid(Int32 ordinal)
   at System.Data.Linq.SqlClient.ObjectReaderCompiler.Rereader.GetGuid(Int32 i)
   at Read_PFO(ObjectMaterializer`1 )
   at System.Data.Linq.SqlClient.ObjectReaderCompiler.ObjectReader`2.MoveNext()
   at System.Collections.Generic.List`1..ctor(IEnumerable`1 collection)
   at System.Linq.Enumerable.ToList[TSource](IEnumerable`1 source)
   at VSO.DomainServices.Server.PFODomainService.PFOSelectByStores(String storeIds, Int32 filter, Int32 pageIndex, Int32 pageSize, Guid userId, String sortColumn, String productIDs, Boolean isSummary, Int32& totalRows) in C:\Hood_VSO\.VSO\.VSO.Web\Services\PFODomainService.cs:line 820 
```

我哪里出错了，谁能帮我解决这个问题，非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T21:01:56.330

我找到了解决方案，没有。当summary 为0 时存储过程返回的列的数量大于no。当摘要为 1 时存储过程返回的列数，并且这些列也可以为空。

所以它抛出了一个演员表异常。

我为summary = 1 创建了一个新的存储过程。与要求。

# c++ - 我可以使用类模板返回类型的函数吗？

> ID：15389425
> 
> 赞同：0
> 
> 时间：2013-03-13T15:23:45.427
> 
> 标签：c++, class, templates

只想问你专业的简单问题！我实现了模板类，如下面的代码：

```
template <typename T>
class Matrix { ... }; 
```

我正在尝试使用具有返回类型的函数作为类模板。

```
Matrix<double> get_some_matrix(int param1,int param2) {...}; 
```

不幸的是，编译器生成错误消息，例如：错误 C2143：缺少';' 在'<'之前

谁能告诉我或猜猜是什么问题？

我真的很感谢你的帮助，非常感谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-13T15:26:00.350

```
template <typename T>
class Matrix { ... } //missing ; at end of class declaration. 
```

应该：

```
template <typename T>
class Matrix { ... };  // note ; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T15:29:15.893

如果这是您的确切声明，那么您在类声明的右大括号后缺少一个分号。

# mysql - 父组总数

> ID：15389431
> 
> 赞同：-3
> 
> 时间：2013-03-13T15:24:08.427
> 
> 标签：mysql, sql

我有两张桌子。组 (Id,title,parentGroupID) 帐户 (AID,GroupID,Title,Balanace)。

**团体**

```
ID | Title | parentGroupID
1  | Assets| 0
2  | Bank  | 1
3  | myBank| 2
4  | cash  | 1 
```

**账户**

```
AID | GroupID | Title        | Balanace
1   | 3       | acc1234      | 5000
2   | 3       | acc002       | 10000
3   | 4       | counter cash | 60000 
```

现在我想显示资产 = 5000+10000+60000，因为它们都是资产组的成员。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T17:37:50.370

玩这个，看看你得到了什么：

```
SELECT
    t1.Title as Group1,
    t2.Title as Group2,
    t3.Title as Group3,
    t4.Title as Group4,
     t5.Title as Group5,
    a1.Title as SubGroup1,
    a2.Title as SubGroup2,
    a3.Title as SubGroup3,
    a4.Title as SubGroup4,
     a5.Title as SubGroup5,
    t1.parentGroupID,
    t2.parentGroupID,
    t3.parentGroupID,
    t4.parentGroupID,
    t5.parentGroupID,
    a1.Balance,
    a2.Balance,
    a3.Balance,
    a4.Balance,
     a5.Balance
           FROM GROUPS t1
      LEFT JOIN GROUPS t2 ON t2.parentGroupID = t1.ID
      LEFT JOIN GROUPS t3 ON t3.parentGroupID = t2.ID
      LEFT JOIN GROUPS t4 ON t4.parentGroupID = t3.ID
      LEFT JOIN GROUPS t5 ON t5.parentGroupID = t4.ID
      LEFT OUTER JOIN ACCOUNTS a1 ON a1.GroupID = t1.ID
      LEFT OUTER JOIN ACCOUNTS a2 ON a2.GroupID = t2.ID
      LEFT OUTER JOIN ACCOUNTS a3 ON a3.GroupID = t3.ID
      LEFT OUTER JOIN ACCOUNTS a4 ON a4.GroupID = t4.ID
      LEFT OUTER JOIN ACCOUNTS a5 on a5.GroupID = t5.ID
WHERE t1.parentGroupID = 0 
```

# css - 使用 CSS 垂直居中元素（margin-top，top）

> ID：15389434
> 
> 赞同：2
> 
> 时间：2013-03-13T15:24:09.880
> 
> 标签：css

要使元素水平居中，将宽度设置为`x`、向左`50%`和向左设置边距`-x/2`。这与`x = 50 %`（参见下面的示例）完美配合。为什么它不适用于垂直居中？下面的示例不起作用。

```
div.myDiv {
    width: 50%;
    height: 50%;
    left: 50%;
    top: 50%;
    margin-left: -25%;
    margin-top: -25%;
    position: absolute;
    border: 1px solid #555;
} 
```

```
<div class="myDiv">I'm a div</div> 
```

在 FF10 和 IE8 中使用 HTML 4.01 Transitional 进行测试，并且在 body-section 中只有一个 div-tag。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T15:28:01.557

您没有固定的宽度和高度（流体）。因此，您不能仅使用您在帖子中提到的 CSS 使 div 垂直居中。您需要使用 javascript 或 jQuery 来实现这一点。我以前做过这个，所以我只是在这里链接它。[https://stackoverflow.com/a/15293191/1577396](https://stackoverflow.com/a/15293191/1577396)

* * *

如[**W3C**](http://www.w3.org/TR/CSS2/box.html#margin-properties)中所述，`margin`属性包括`margin-top`和`margin-bottom`引用包含块的**宽度**（而不是*高度*），如果设置在`percentages`.

因此，您不能像在固定尺寸容器中那样使用`margin-top`和垂直对齐流体容器。`margin-bottom`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T15:31:17.263

垂直居中可以在 css 中玩`display: table-cell`或摆弄`line-height`- 只是你玩的起点

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-13T15:32:39.143

试试这个：

```
div.myDiv {
margin: 0 auto;
}

auto will get you the horizontal centering you are looking for OR you can just set auto for the entire myDiv to get both vertical and horizontal centering.

div.myDiv {
margin:auto;
} 
```

# java - 创建多个 AsyncTask

> ID：15389439
> 
> 赞同：0
> 
> 时间：2013-03-13T15:24:31.107
> 
> 标签：java, android, multithreading, android-asynctask, id3

我正在为我的 android 项目使用外部库。使用该库，我从流 Mp3 url 获取 ID3 标签。该代码使用 URLConnection 到达链接，然后获取标签信息。但问题是它的过程非常缓慢。

在主线程上执行此操作时，需要超过 2 分钟才能从其 URL 中获取 25 首歌曲的 ID3 标签。所以我决定使用多个 AsyncTasks 来加快这个过程，我在下面使用了这段代码。它变得更快了一点，但仍然低于 2 分钟标记几秒钟。当我从 DDMS 检查线程选项卡时，我看到在运行时，只有 6 个 AsyncTask 被创建并运行。

我的问题是，如何在这个循环中增加正在运行的 AsyncTask 的数量。

```
counter=0;
for (final SongDetail e : songs) {

  new AsyncTask<Void , Void, Void>() {

  @Override
  protected Void doInBackground(Void... params) {

    try {

       MP3 mp3 = new MP3(e.getLink());
       e.setTitle(mp3.getTitle());
       e.setArtist(mp3.getBand());
    } catch (MalformedURLException e1) {
          e1.printStackTrace();
    } catch (IOException e2) {
          e2.printStackTrace();
    }
    return null;
    }

  @Override
  protected void onPostExecute(Void result) {
   counter++;

   if(counter==songs.size()) {
      Log.d("KA","loop finished");

     }
  }

 }.execute();
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T15:28:15.430

Android 操作系统将决定在任何给定时间可以运行多少并行线程。仅仅因为您启动其中的 20 个并不意味着它们都会运行。Android 操作系统会将它们排队并一次运行其中的一些。

有关更多详细信息，请参阅此答案： [同时运行多个 AsyncTasks -- 不可能？](https://stackoverflow.com/questions/4068984/running-multiple-asynctasks-at-the-same-time-not-possible)

# javascript - Javascript 删除 HTML

> ID：15389440
> 
> 赞同：0
> 
> 时间：2013-03-13T15:24:43.883
> 
> 标签：javascript, html, arrays, object

我有这个 HTML 代码，我想删除部分`onclick`事件（后面的部分`;`）。我该怎么做？

我已经在数组中得到了对象：

```
document.getElementById(labels[i].htmlFor) 
```

HTML：

```
<td valign="top" nowrap="nowrap">
<input id="ui_cbSubParam_LimitsColumnsTo" type="checkbox" name="ui_cbSubParam_LimitsColumnsTo" checked="checked" onclick="ControlConditionalEnable23(true);setTimeout('__doPostBack(\'ui_cbSubParam_LimitsColumnsTo\',\'\')', 0)" />
<label for="ui_cbSubParam_LimitsColumnsTo">Use Default</label>
</td> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T15:27:59.977

你可以重置onclick：

```
var btn = document.getElementById(labels[i].htmlFor);
if(btn.onclick == true) {
   btn.onclick = function () { ControlConditionalEnable23(true); };
}; 
```

# r - 对于数据帧的所有列，每 n 行的平均值和中位数，同时将日期时间对象保留为索引

> ID：15389441
> 
> 赞同：3
> 
> 时间：2013-03-13T15:24:49.260
> 
> 标签：r, datetime, dataframe, average

我在一个名为 ulyDataLefs60_12 的数据框中有这个非常复杂的数据：

```
 Year Day Hour Min  Sec. E1.S1 E1.S2 E1.S3 E1.S4 E1.S5 E1.S6 E1.S7 E1.S8 E2.S1 E2.S2 E2.S3 E2.S4
1 2000 122    0   1 38.01  3.31 0.662 0.662  2.65  1.32 0.000 3.310  1.32 1.980 1.980 0.662 0.000
2 2000 122    0   1 50.10  1.98 3.310 1.980  1.98  1.98 1.320 4.630  1.32 1.320 0.662 0.000 3.310
3 2000 122    0   2  2.19  1.98 1.320 3.970  1.98  1.32 0.662 0.662  3.97 1.320 0.662 1.320 0.662
4 2000 122    0   2 14.28  2.65 1.320 2.650  3.31  2.65 1.320 3.970  2.65 2.650 0.000 0.662 2.650
5 2000 122    0   2 26.38  3.97 6.620 0.662  3.31  3.31 4.630 5.290  1.98 0.000 0.000 1.980 0.662
6 2000 122    0   2 38.47  2.65 0.662 3.310  1.98  1.32 1.980 1.980  2.65 0.662 1.320 1.980 1.320
  E2.S5 E2.S6 E2.S7 E2.S8 E3.S1 E3.S2 E3.S3 E3.S4 E3.S5 E3.S6 E3.S7 E3.S8 E4.S1 E4.S2 E4.S3 E4.S4
1 1.320  1.32  2.65 2.650 0.662 0.000 1.320 2.650 1.320 0.000 1.320 1.320 0.000 0.000 0.662 0.662
2 0.000  0.00  1.98 0.662 0.000 0.662 0.000 0.662 1.980 1.980 0.662 1.320 0.000 0.000 0.000 0.662
3 0.662  1.98  2.65 1.980 0.000 0.662 0.662 1.320 0.662 0.000 1.320 3.310 0.662 0.000 1.980 0.662
4 0.662  1.32  1.32 0.662 0.000 0.662 0.662 0.662 0.662 0.662 0.662 0.000 0.000 0.662 0.000 0.000
5 0.000  1.32  1.32 0.662 0.662 0.000 0.000 0.662 0.000 0.662 1.320 0.662 0.000 0.000 0.000 0.662
6 1.320  1.32  1.32 0.000 1.320 0.000 0.000 0.662 1.320 0.000 0.662 0.662 0.662 1.320 0.000 0.000
  E4.S5 E4.S6 E4.S7 E4.S8 FP5.S1 FP5.S2 FP5.S3 FP5.S4 FP5.S5 FP5.S6 FP5.S7 FP5.S8 FP6.S1 FP6.S2
1 0.000 0.662 0.662 0.000  0.331      0  0.662  0.000  0.662      0  0.000  0.331      0  0.331
2 0.000 0.000 0.662 0.662  0.331      0  0.662  0.000  0.662      0  0.000  0.331      0  0.331
3 0.662 0.000 0.662 1.320  0.000      0  0.662  0.000  0.331      0  0.000  0.000      0  0.000
4 0.662 0.662 0.000 0.662  0.000      0  0.662  0.000  0.331      0  0.000  0.000      0  0.000
5 0.000 0.000 0.662 0.000  0.331      0  0.000  0.331  0.331      0  0.331  0.000      0  0.000
6 0.000 0.000 0.662 0.662  0.331      0  0.000  0.331  0.331      0  0.331  0.000      0  0.000
  FP6.S3 FP6.S4 FP6.S5 FP6.S6 FP6.S7 FP6.S8 FP7.S1 FP7.S2 FP7.S3 FP7.S4 FP7.S5 FP7.S6 FP7.S7 FP7.S8
1  0.331  0.000  0.000  0.000      0  0.000      0  0.331  0.331  0.662      0  0.000  0.331  0.000
2  0.331  0.000  0.000  0.000      0  0.000      0  0.331  0.331  0.662      0  0.000  0.331  0.000
3  0.662  0.000  0.662  0.000      0  0.331      0  0.000  0.000  0.331      0  0.000  0.000  0.000
4  0.662  0.000  0.662  0.000      0  0.331      0  0.000  0.000  0.331      0  0.000  0.000  0.000
5  0.000  0.662  0.000  0.992      0  0.000      0  0.000  0.000  0.000      0  0.331  0.000  0.331
6  0.000  0.662  0.000  0.992      0  0.000      0  0.000  0.000  0.000      0  0.331  0.000  0.331
  PA.LEFS60S1 PA.LEFS60S2 PA.LEFS60S3 PA.LEFS60S4 PA.LEFS60S5 PA.LEFS60S6 PA.LEFS60S7 PA.LEFS60S8
1        64.2        52.0        70.9       105.0         144         170         134        96.2
2        62.6        49.5        68.8       104.0         142         168         134        95.4
3        62.7        47.7        66.2       101.0         140         167         135        96.5
4        62.4        46.3        64.4        99.3         138         166         135        96.7
5        59.9        43.7        63.2        98.8         138         164         133        94.8
6        62.3        45.7        63.7        98.7         137         166         136        96.9
    BX   BY   BZ Bmag....nT.  X            datetime
1 2.64 4.98 2.25        6.07 NA 2000-05-01 00:01:38
2 2.67 5.16 2.03        6.15 NA 2000-05-01 00:01:50
3 2.52 5.35 1.88        6.21 NA 2000-05-01 00:02:02
4 2.43 5.45 1.74        6.22 NA 2000-05-01 00:02:14
5 2.53 5.46 1.46        6.19 NA 2000-05-01 00:02:26
6 2.29 5.26 1.61        5.96 NA 2000-05-01 00:02:38

dput(head(ulyDataLefs60_12))
structure(list(Year = c(2000L, 2000L, 2000L, 2000L, 2000L, 2000L
), Day = c(122L, 122L, 122L, 122L, 122L, 122L), Hour = c(0L, 
0L, 0L, 0L, 0L, 0L), Min = c(1L, 1L, 2L, 2L, 2L, 2L), Sec. = c(38.01, 
50.1, 2.19, 14.28, 26.38, 38.47), E1.S1 = c(3.31, 1.98, 1.98, 
2.65, 3.97, 2.65), E1.S2 = c(0.662, 3.31, 1.32, 1.32, 6.62, 0.662
), E1.S3 = c(0.662, 1.98, 3.97, 2.65, 0.662, 3.31), E1.S4 = c(2.65, 
1.98, 1.98, 3.31, 3.31, 1.98), E1.S5 = c(1.32, 1.98, 1.32, 2.65, 
3.31, 1.32), E1.S6 = c(0, 1.32, 0.662, 1.32, 4.63, 1.98), E1.S7 = c(3.31, 
4.63, 0.662, 3.97, 5.29, 1.98), E1.S8 = c(1.32, 1.32, 3.97, 2.65, 
1.98, 2.65), E2.S1 = c(1.98, 1.32, 1.32, 2.65, 0, 0.662), E2.S2 = c(1.98, 
0.662, 0.662, 0, 0, 1.32), E2.S3 = c(0.662, 0, 1.32, 0.662, 1.98, 
1.98), E2.S4 = c(0, 3.31, 0.662, 2.65, 0.662, 1.32), E2.S5 = c(1.32, 
0, 0.662, 0.662, 0, 1.32), E2.S6 = c(1.32, 0, 1.98, 1.32, 1.32, 
1.32), E2.S7 = c(2.65, 1.98, 2.65, 1.32, 1.32, 1.32), E2.S8 = c(2.65, 
0.662, 1.98, 0.662, 0.662, 0), E3.S1 = c(0.662, 0, 0, 0, 0.662, 
1.32), E3.S2 = c(0, 0.662, 0.662, 0.662, 0, 0), E3.S3 = c(1.32, 
0, 0.662, 0.662, 0, 0), E3.S4 = c(2.65, 0.662, 1.32, 0.662, 0.662, 
0.662), E3.S5 = c(1.32, 1.98, 0.662, 0.662, 0, 1.32), E3.S6 = c(0, 
1.98, 0, 0.662, 0.662, 0), E3.S7 = c(1.32, 0.662, 1.32, 0.662, 
1.32, 0.662), E3.S8 = c(1.32, 1.32, 3.31, 0, 0.662, 0.662), E4.S1 = c(0, 
0, 0.662, 0, 0, 0.662), E4.S2 = c(0, 0, 0, 0.662, 0, 1.32), E4.S3 = c(0.662, 
0, 1.98, 0, 0, 0), E4.S4 = c(0.662, 0.662, 0.662, 0, 0.662, 0
), E4.S5 = c(0, 0, 0.662, 0.662, 0, 0), E4.S6 = c(0.662, 0, 0, 
0.662, 0, 0), E4.S7 = c(0.662, 0.662, 0.662, 0, 0.662, 0.662), 
    E4.S8 = c(0, 0.662, 1.32, 0.662, 0, 0.662), FP5.S1 = c(0.331, 
    0.331, 0, 0, 0.331, 0.331), FP5.S2 = c(0, 0, 0, 0, 0, 0), 
    FP5.S3 = c(0.662, 0.662, 0.662, 0.662, 0, 0), FP5.S4 = c(0, 
    0, 0, 0, 0.331, 0.331), FP5.S5 = c(0.662, 0.662, 0.331, 0.331, 
    0.331, 0.331), FP5.S6 = c(0, 0, 0, 0, 0, 0), FP5.S7 = c(0, 
    0, 0, 0, 0.331, 0.331), FP5.S8 = c(0.331, 0.331, 0, 0, 0, 
    0), FP6.S1 = c(0, 0, 0, 0, 0, 0), FP6.S2 = c(0.331, 0.331, 
    0, 0, 0, 0), FP6.S3 = c(0.331, 0.331, 0.662, 0.662, 0, 0), 
    FP6.S4 = c(0, 0, 0, 0, 0.662, 0.662), FP6.S5 = c(0, 0, 0.662, 
    0.662, 0, 0), FP6.S6 = c(0, 0, 0, 0, 0.992, 0.992), FP6.S7 = c(0, 
    0, 0, 0, 0, 0), FP6.S8 = c(0, 0, 0.331, 0.331, 0, 0), FP7.S1 = c(0, 
    0, 0, 0, 0, 0), FP7.S2 = c(0.331, 0.331, 0, 0, 0, 0), FP7.S3 = c(0.331, 
    0.331, 0, 0, 0, 0), FP7.S4 = c(0.662, 0.662, 0.331, 0.331, 
    0, 0), FP7.S5 = c(0, 0, 0, 0, 0, 0), FP7.S6 = c(0, 0, 0, 
    0, 0.331, 0.331), FP7.S7 = c(0.331, 0.331, 0, 0, 0, 0), FP7.S8 = c(0, 
    0, 0, 0, 0.331, 0.331), PA.LEFS60S1 = c(64.2, 62.6, 62.7, 
    62.4, 59.9, 62.3), PA.LEFS60S2 = c(52, 49.5, 47.7, 46.3, 
    43.7, 45.7), PA.LEFS60S3 = c(70.9, 68.8, 66.2, 64.4, 63.2, 
    63.7), PA.LEFS60S4 = c(105, 104, 101, 99.3, 98.8, 98.7), 
    PA.LEFS60S5 = c(144, 142, 140, 138, 138, 137), PA.LEFS60S6 = c(170, 
    168, 167, 166, 164, 166), PA.LEFS60S7 = c(134, 134, 135, 
    135, 133, 136), PA.LEFS60S8 = c(96.2, 95.4, 96.5, 96.7, 94.8, 
    96.9), BX = c(2.64, 2.67, 2.52, 2.43, 2.53, 2.29), BY = c(4.98, 
    5.16, 5.35, 5.45, 5.46, 5.26), BZ = c(2.25, 2.03, 1.88, 1.74, 
    1.46, 1.61), Bmag....nT. = c(6.07, 6.15, 6.21, 6.22, 6.19, 
    5.96), X = c(NA, NA, NA, NA, NA, NA), datetime = structure(list(
        sec = c(38, 50, 2, 14, 26, 38), min = c(1L, 1L, 2L, 2L, 
        2L, 2L), hour = c(0L, 0L, 0L, 0L, 0L, 0L), mday = c(1L, 
        1L, 1L, 1L, 1L, 1L), mon = c(4L, 4L, 4L, 4L, 4L, 4L), 
        year = c(100L, 100L, 100L, 100L, 100L, 100L), wday = c(1L, 
        1L, 1L, 1L, 1L, 1L), yday = c(121L, 121L, 121L, 121L, 
        121L, 121L), isdst = c(1L, 1L, 1L, 1L, 1L, 1L)), .Names = c("sec", 
    "min", "hour", "mday", "mon", "year", "wday", "yday", "isdst"
    ), class = c("POSIXlt", "POSIXt"))), .Names = c("Year", "Day", 
"Hour", "Min", "Sec.", "E1.S1", "E1.S2", "E1.S3", "E1.S4", "E1.S5", 
"E1.S6", "E1.S7", "E1.S8", "E2.S1", "E2.S2", "E2.S3", "E2.S4", 
"E2.S5", "E2.S6", "E2.S7", "E2.S8", "E3.S1", "E3.S2", "E3.S3", 
"E3.S4", "E3.S5", "E3.S6", "E3.S7", "E3.S8", "E4.S1", "E4.S2", 
"E4.S3", "E4.S4", "E4.S5", "E4.S6", "E4.S7", "E4.S8", "FP5.S1", 
"FP5.S2", "FP5.S3", "FP5.S4", "FP5.S5", "FP5.S6", "FP5.S7", "FP5.S8", 
"FP6.S1", "FP6.S2", "FP6.S3", "FP6.S4", "FP6.S5", "FP6.S6", "FP6.S7", 
"FP6.S8", "FP7.S1", "FP7.S2", "FP7.S3", "FP7.S4", "FP7.S5", "FP7.S6", 
"FP7.S7", "FP7.S8", "PA.LEFS60S1", "PA.LEFS60S2", "PA.LEFS60S3", 
"PA.LEFS60S4", "PA.LEFS60S5", "PA.LEFS60S6", "PA.LEFS60S7", "PA.LEFS60S8", 
"BX", "BY", "BZ", "Bmag....nT.", "X", "datetime"), row.names = c(NA, 
6L), class = "data.frame") 
```

而我想要的是获得一定数量行的平均值和中位数。可以说，我想要一个新的数据框，而不是所有这些值，它具有所有列（或至少从 E1.S1 列开始的所有列）中每 5 行的平均值或中位数。

我从查看示例开始：[计算行的平均值](https://stackoverflow.com/questions/4299362/calculate-means-of-rows)，它确实让我能够获得数据框单列的 N 行的平均值。

```
ulyDataLefs60_12_avg = colSums(matrix(ulyDataLefs60_12$E1.S1, nrow=5)) 
```

问题是我想使用的 R 函数**colSums**不适用于某些字段，即 datetime 字段（原因很明显），所以我不能将它应用于所有列并获得一个很好的平均数据帧。

```
ulyDataLefs60_12_avg = colSums(matrix(ulyDataLefs60_12, nrow=5))
Error in colSums(matrix(ulyDataLefs60_12, nrow = 5)) : 
  'x' must be numeric 
```

我很高兴在我用来获取平均值和中位数的每 5 行的开头有一个 datetime 字段（如果我在 5 个值区间的中心获得 datetime 会更好），但到目前为止我没有t 来一个同时做两件事的答案。

也许这是一件很容易做到的事情，但它让我头疼。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T15:31:25.423

对于此数据：

```
> dput(df)
df <- structure(list(Year = c(2000L, 2000L, 2000L, 2000L, 2000L, 2000L
), Day = c(122L, 122L, 122L, 122L, 122L, 122L), Hour = c(0L, 
0L, 0L, 0L, 0L, 0L), Min = c(1L, 1L, 2L, 2L, 2L, 2L), Sec. = c(38.01, 
50.1, 2.19, 14.28, 26.38, 38.47), E1.S1 = c(3.31, 1.98, 1.98, 
2.65, 3.97, 2.65), E1.S2 = c(0.662, 3.31, 1.32, 1.32, 6.62, 0.662
), E1.S3 = c(0.662, 1.98, 3.97, 2.65, 0.662, 3.31), E1.S4 = c(2.65, 
1.98, 1.98, 3.31, 3.31, 1.98), E1.S5 = c(1.32, 1.98, 1.32, 2.65, 
3.31, 1.32), E1.S6 = c(0, 1.32, 0.662, 1.32, 4.63, 1.98), E1.S7 = c(3.31, 
4.63, 0.662, 3.97, 5.29, 1.98), E1.S8 = c(1.32, 1.32, 3.97, 2.65, 
1.98, 2.65), E2.S1 = c(1.98, 1.32, 1.32, 2.65, 0, 0.662), E2.S2 = c(1.98, 
0.662, 0.662, 0, 0, 1.32), E2.S3 = c(0.662, 0, 1.32, 0.662, 1.98, 
1.98), E2.S4 = c(0, 3.31, 0.662, 2.65, 0.662, 1.32)), .Names = c("Year", 
"Day", "Hour", "Min", "Sec.", "E1.S1", "E1.S2", "E1.S3", "E1.S4", 
"E1.S5", "E1.S6", "E1.S7", "E1.S8", "E2.S1", "E2.S2", "E2.S3", 
"E2.S4"), class = "data.frame", row.names = c("1", "2", "3", 
"4", "5", "6")) 
```

这有效：

```
lapply(split(df, ceiling(seq_len(nrow(df)) / 5)), colMeans)
# $`1`
#      Year       Day      Hour       Min      Sec.     E1.S1     E1.S2     E1.S3     E1.S4     E1.S5     E1.S6     E1.S7 
# 2000.0000  122.0000    0.0000    1.6000   26.1920    2.7780    2.6464    1.9848    2.6460    2.1160    1.5864    3.5724 
#     E1.S8     E2.S1     E2.S2     E2.S3     E2.S4 
#    2.2480    1.4540    0.6608    0.9248    1.4568 
# 
# $`2`
#     Year      Day     Hour      Min     Sec.    E1.S1    E1.S2    E1.S3    E1.S4    E1.S5    E1.S6    E1.S7    E1.S8 
# 2000.000  122.000    0.000    2.000   38.470    2.650    0.662    3.310    1.980    1.320    1.980    1.980    2.650 
#    E2.S1    E2.S2    E2.S3    E2.S4 
#    0.662    1.320    1.980    1.320 
# 
```

然后你可以只使用`bind`它们：

```
do.call(rbind, lapply(split(df, ceiling(seq_len(nrow(df)) / 5)), colMeans))
#   Year Day Hour Min   Sec. E1.S1  E1.S2  E1.S3 E1.S4 E1.S5  E1.S6  E1.S7 E1.S8 E2.S1  E2.S2  E2.S3  E2.S4
# 1 2000 122    0 1.6 26.192 2.778 2.6464 1.9848 2.646 2.116 1.5864 3.5724 2.248 1.454 0.6608 0.9248 1.4568
# 2 2000 122    0 2.0 38.470 2.650 0.6620 3.3100 1.980 1.320 1.9800 1.9800 2.650 0.662 1.3200 1.9800 1.3200 
```

注意：它还有助于检查您要使用`mean`的所有列是否是`integers`或`numeric`通过执行以下操作：

```
> sapply(df, class)
#      Year       Day      Hour       Min      Sec.     E1.S1     E1.S2     E1.S3     E1.S4     E1.S5     E1.S6     E1.S7 
# "integer" "integer" "integer" "integer" "numeric" "numeric" "numeric" "numeric" "numeric" "numeric" "numeric" "numeric" 
#     E1.S8     E2.S1     E2.S2     E2.S3     E2.S4 
# "numeric" "numeric" "numeric" "numeric" "numeric" 
```

**编辑：**遵循OP的评论：

```
idx <- ceiling(seq_len(nrow(dd)) / 5)
# do colMeans on all columns except last one.
res <- lapply(split(dd[-(ncol(dd))], idx), colMeans, na.rm = TRUE)
# assign first value of "datetime" in each 5-er group as names to list
names(res) <- dd$datetime[seq(1, nrow(df), by=5)]
# bind them to give a matrix
res <- do.call(rbind, res) 
```

或者，如果你想要一个`data.frame` *and* `datetime`作为一个*列*：

```
idx <- ceiling(seq_len(nrow(dd)) / 5)
res <- as.data.frame(do.call(rbind, lapply(split(dd[-(ncol(dd))], idx), 
                 colMeans, na.rm = TRUE)))
res$datetime <- dd$datetime[seq(1, nrow(dd), by=5)] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T15:59:19.600

您可以将数据视为时间序列。然后使用`xts`包你可以使用`period.apply`功能

```
dat.xts <- xts(dat[,-ncol(dat)],dat$datetime)
## here I take every minutes because I don't have enouhgt data
## I think in your case 5 rows is equal to 5*12 mintues = 1 hour
pts <- endpoints(dat.xts,on='mins')
period.apply(dat.xts,pts,mean)

                   Year Day Hour Min   Sec.  E1.S1  E1.S2 E1.S3 E1.S4 E1.S5 E1.S6  E1.S7  E1.S8 E2.S1  E2.S2  E2.S3  E2.S4 E2.S5 E2.S6
2000-05-01 00:01:50 2000 122    0   1 44.055 2.6450 1.9860 1.321 2.315  1.65 0.660 3.9700 1.3200 1.650 1.3210 0.3310 1.6550 0.660 0.660
2000-05-01 00:02:38 2000 122    0   2 20.330 2.8125 2.4805 2.648 2.645  2.15 2.148 2.9755 2.8125 1.158 0.4955 1.4855 1.3235 0.661 1.485 
```

**编辑**显示如何将`xts`对象转换为`data.frame`：

要绘制数据，`ggplot2`您需要将 xts 对象强制为 data.frame。例如，您可以这样做：

```
 dat <- data.frame(date=index(dat.xts),coredata(dat.xts)) 
```

然后绘制 E1.S1 与日期：

```
library(ggplot2)
ggplot(data=dat)+ 
 geom_line(aes(x=date,y=E1.S1)) 
```

# sql-server-2008 - 回溯 FamilyTree SQL

> ID：15389444
> 
> 赞同：0
> 
> 时间：2013-03-13T15:24:56.890
> 
> 标签：sql-server-2008, sql-server-2008-r2

我目前正在用我的数据库构建一个家谱。我找到了一个基于族谱构建输出的查询，但现在我想要一些额外的功能。但老实说，我不知道从哪里开始。

可以在此处查看 FamilyTree 输出：[https ://data.stackexchange.com/stackoverflow/query/84004/family-tree-sql-query](https://data.stackexchange.com/stackoverflow/query/84004/family-tree-sql-query)

所以我的问题是，如果我想回溯个人层次结构中“最年长”的人，我该怎么办？

Fx：哪位父亲是ID 8的顶级？

通过阅读输出，我可以知道答案是 1：8 -> 5 -> 4 -> 1

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T19:39:42.637

我建议用 CTE 来做。像这样的东西会起作用：

```
WITH SearchHierarchy AS (
    SELECT ID, Name, FatherID, 0 AS Level
    FROM FamilyTree
    WHERE ID = 8
    UNION ALL
    SELECT a.ID, a.Name, a.FatherID, Level + 1
    FROM FamilyTree a
    INNER JOIN SearchHierarchy b ON a.ID = b.FatherID
    )
SELECT TOP 1 ID, Name
FROM SearchHierarchy
ORDER BY LEVEL DESC 
```

对于工作演示：[在 SQLFiddle](http://sqlfiddle.com/#!3/9fdf4/17)

# dns - 如何将新域与亚马逊网络服务链接

> ID：15389449
> 
> 赞同：1
> 
> 时间：2013-03-13T15:25:10.460
> 
> 标签：dns, amazon-web-services, amazon-ec2

我有一个要链接到 aws 的新域。

我已经运行了 EC2 实例。

我将 Route53 用于 DNS，并打开了 2 条记录：www.domain.com 和 domain.com

我从 route53 更新了有关新 dns 服务器的注册公司。

我确实有一个链接到我的 EC2 实例的弹性 IP。

问题是我无法访问我的网站。我想我错过了一些部分。

我一路上错过了什么吗？

编辑：我可以使用从亚马逊获得的公共 IP 访问我的网站。但我无法使用我的域访问它。

我怎么知道是什么破坏了它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T10:45:57.987

需要检查的一些事项：

1.  您是否已通过域注册商正确设置了 namservers？
2.  您是否在 Route 53 中添加了弹性 IP 地址？

您可能会检查的其他一些事情是防火墙设置。如果您可以通过 IP 地址访问该站点，则不太可能出现这种情况。

您知道域解析到的 IP 地址吗？它是否正确？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T10:21:44.770

另外，你可以看看这个博客，它会解释很多事情 [http://geekospace.com/mapping-aws-ec2-instance-to-your-domain-in-godaddy/](http://geekospace.com/mapping-aws-ec2-instance-to-your-domain-in-godaddy/)

# matlab - matlab中neigburs的值如何求和？

> ID：15389453
> 
> 赞同：0
> 
> 时间：2013-03-13T15:25:20.620
> 
> 标签：matlab, counter, conways-game-of-life, neighbours

我是 matlab 新手，正在尝试编写生活游戏。但是我在计算邻居的总和时遇到了一些困难。每个单元格的值都可以是 0 或 1。我正在尝试使用计数器（就像在 Python 中一样，这是我比较熟悉的唯一程序），但这似乎不起作用。问题是它必须适用于所有单元格，边界单元格也是如此。如果我有每个单元格的值（所以这将在 0 到 8 之间）我必须执行规则。但我也不知道这是否正确。请帮忙！我越来越绝望了！

```
TIME = 50;

pulsar;

life = {};  % create list 'life'
life{1} = X;  % add seed to life

numrows = size(X,1); % calculate number of rows
numcolumns = size (X,2);  % calculate number of columns

current = X;            % make seed the first current(matrix you're starting off with in each step)

for i = 0:TIME;    % determine amount of times the loop will run 

for row = 1:numrows;              % for each row
    for column = 1:numcolumns;    % for each column

 if column + 1 ~= numcolumns + 1
 east_of_row = column + 1;  % define how to count the cell right of target cell
 end
 if column - 1 ~= 0
 west_of_row = column - 1; % define how to count the cell left of target cell    
 end
 if row - 1 ~= 0
 north_of_column = row - 1; % define how to count the cell north of target cell    
 end
 if row + 1 ~= numrows + 1
 south_of_column = row + 1;
 end

  neighbors = 0                               % start counter 'neighbors' with 0

            if current(row,east_of_row) == 1;              % if neighboring cell has a value of 1
                neighbors = neighbors + 1;                                  % add 1 to neighbors
            end
            if current(row,west_of_row) == 1;              % if neighboring cell has a value of 1
                neighbors = neighbors + 1;                                  % add 1 to neighbors
            end
            if current(north_of_column,column) == 1;       % if neighboring cell has a value of 1    
                neighbors = neighbors + 1;                                  % add 1 to neighbors
            end
            if current(south_of_column,column) == 1;       % if neighboring cell has a value of 1    
                neighbors = neighbors + 1;                                   % add 1 to neighbors
            end
            if current(south_of_column,east_of_row) == 1;  % if neighboring cell has a value of 1
                neighbors = neighbors + 1;                                   % add 1 to neighbors
            end
            if current(north_of_column,east_of_row) == 1;  % if neighboring cell has a value of 1
                neighbors = neighbors + 1;                                  % add 1 to neighbors
            end
            if current(north_of_column,west_of_row) == 1;  % if neighboring cell has a value of 1
                neighbors = neighbors + 1;                                  % add 1 to neighbors
            end
            if current(south_of_column,west_of_row) == 1;  % if neighboring cell has a value of 1
                neighbors = neighbors + 1;                                   % add 1 to neighbors     
            end

        % rules of the game:

    if current(row,column) == 1;              % in case a target cell has a value of 1:

        if neighbors < 2                           % if the number of neighbors is smaller than 2
            nextnext(row,column) = 0;                   % value of target cell gets 0 in nextnext
        end
        if neighbors == 2                      % if the number of neighbors is 2 or 3
            nextnext(row,column) = 1;                   % value of target cell stays 1 in nextnext
        end
        if  neighbors == 3
            nextnext(row,column) = 1;
        end
        if neighbors > 3                        % if the number of neigbors is higher than 3
            nextnext(row,column) = 0;                   % value of target cell gets 0 in nextnext
        end
    end
    if current (row,column) == 0           % in case a target cell has a value of 0:

        if neighbors == 3                          % if the number of neighbors is 3
            nextnext(row,column) = 1;                   % value of target cell gets 1 in nextnext
        end
        if neighbors ~= 3                       % if the number of neigbors isn't 3
            nextnext(row,column) = 0;                  % value of target cell stays 0 in nextnext
        end
end
    end
end

current = nextnext;       % make nextnext matrix the current matrix for the next step 
%life{TIME} = nextnext;    % add matrix to list 'life

end

show(life); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T15:41:53.577

你可以用它`conv2`来计算这个值，如下：

```
%First create some example matrix 
%  (this is a 5 x 5 matrix with 30% 1's, 70% 0's
x = full(ceil(sprand(5,5,0.3)))

%Create your convolution kernal
%    This will add up all the values in the 8 elements surrounding the
%    central element
k = [1 1 1; 1 0 1; 1 1 1];  

%Now do the copnvulution (using the 'same' argument to select an output
%the same size as the input.)
counts = conv2(x,k,'same') 
```

这将每次创建一个略有不同的示例。但是对于上述代码的一次执行，我得到以下信息：

```
x =
     0     1     0     1     0
     0     1     0     1     0
     0     0     1     1     0
     0     1     0     1     0
     0     0     0     0     0

counts =
     2     1     4     1     2
     2     2     6     3     3
     2     3     5     3     3
     1     1     4     2     2
     1     1     2     1     1 
```

# sql - 请帮我处理 group by 子句

> ID：15389455
> 
> 赞同：0
> 
> 时间：2013-03-13T15:25:25.053
> 
> 标签：sql, sql-server, sql-server-2008, tsql

```
USE [MAS_CAN]
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
ALTER PROCEDURE [dbo].[spHistorybyCalenderYear]--create a stored proc
@Year int = '2013'
AS
Begin
SET NOCOUNT ON
SELECT 
isnull(round(l.UnitPrice*l.QuantityShipped,2),0) as SalesAmount,
isnull(round(l.unitCost*l.QuantityShipped,2),0) as CostAmount,
(case 
when month(h.INVOICEDATE)=01 then '01'
when month(h.INVOICEDATE)=02 then '02'
when month(h.INVOICEDATE)=03 then '03'
when month(h.INVOICEDATE)=04 then '04'
when month(h.INVOICEDATE)=05 then '05'
when month(h.INVOICEDATE)=06 then '06'
when month(h.INVOICEDATE)=07 then '07'
when month(h.INVOICEDATE)=08 then '08'
when month(h.INVOICEDATE)=09 then '09'
when month(h.INVOICEDATE)=10 then '10'
when month(h.INVOICEDATE)=11 then '11'
when month(h.INVOICEDATE)=12 then '12'
END) as Period
FROM AR_INVOICEHISTORYHEADER h join AR_INVOICEHISTORYDETAIL l on (h.INVOICENO = l.INVOICENO)
Group by l.unitprice,l.unitcost,l.quantityShipped,h.invoicedate
order by Period
END 
```

我想按期间分组...说我想看看

```
Period SalesAmount  CostAmount
01     22           19
02     24           25 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T15:27:12.207

用这个：

```
GROUP BY l.unitprice, l.unitcost, l.quantityShipped, CAST(MONTH(h.invoicedate) as varchar) 
```

此外，如果你在它的位置使用它，你可以摆脱那个大的 case 语句：

```
SELECT 
isnull(round(l.UnitPrice*l.QuantityShipped,2),0) as SalesAmount,
isnull(round(l.unitCost*l.QuantityShipped,2),0) as CostAmount,
CAST(MONTH(h.invoicedate) as varchar) as Period
FROM ... 
```

正如@Kaf 提到的，如果你想`Period`被`0`填充，你可以使用其中任何一个而不是直接`CAST`：

```
right(100 + month(h.invoicedate),2)
left(convert(varchar, h.invoicedate, 10), 2) 
```

# java - java - 诸如对象更改侦听器之类的东西？

> ID：15389458
> 
> 赞同：0
> 
> 时间：2013-03-13T15:25:32.833
> 
> 标签：java, android, json

我正在开发安卓系统。是否有某种对象更改/修改/更改侦听器之类的东西？

我有一个 JSONObject 并且想准确指出对象被更改的位置。我正在尝试从另一个 JSONObject 的一部分创建新的 JSONObjects。我认为正在发生的事情是我只是创建了对 JSONObject 的引用并意外更新了引用的对象。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T15:39:37.803

如果只是出于调试目的，您可以在 IDE 中对变量添加监视。

[在 Eclipse IDE 中查看变量内容](https://stackoverflow.com/questions/5664741/watching-variables-contents-in-eclipse-ide)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T15:46:16.540

不，但您可以为对象创建自己的[观察者](http://en.wikipedia.org/wiki/Observer_pattern)。在 Java 中可以通过扩展[Observable](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/Observable.html)类或实现[Observer](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/Observer.html)接口来实现。

# c++ - 如何在c ++中同一类的构造函数中调用重载的构造函数？

> ID：15389464
> 
> 赞同：0
> 
> 时间：2013-03-13T15:25:55.420
> 
> 标签：c++, constructor

我有两个非常相关的问题；首先，在同一个类中调用重载的构造函数，其次，使用 load_from_file() 函数重新初始化调用对象。这是一个例子：

```
class FooA: FooB
{
  FooA();
  FooA(myDataType distribution):FooB(distribution)
  FooA(myClasstype objectA):FooA(objectA.get_distribution){} // suppose objectA has a method get_distribution(). 
..
...

} 
```

它给出了一个错误：

> 非法成员初始化

第二个问题：

```
class FooA: FooB
{
  FooA();
  FooA(myDataType distribution):FooB(distribution)

void load_from_file(string file_name){
         // i have another library function to load from file
         JointDistribution jd = load_from_file(file_name);

        // now i want to re-configure the current object
        *this = FooA(jd);
} 
```

> FooA* fa = new FooA();
> 
> fa.load_from_file("file_name");

有不同的文件格式，因此很难将它们作为构造函数。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T15:29:13.240

第一个问题 - 如果`objectA.get_distribution`是一个方法，你应该有一个方法调用：`:FooB(objectA.get_distribution())`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T15:44:31.697

这里：

```
 class FooA: FooB
    {
      FooA();
      FooA(myDataType distribution):FooB(distribution)

       void load_from_file(string file_name){
       }
    }; 
```

函数 load_from_file 是私有的，所以你不能像你写的那样调用它：

```
FooA* fa = new FooA();
fa.load_from_file("file_name"); 
```

构造函数也是私有的......（虽然有时我们希望它们是私有的，但我认为不是这种情况 xD]

您可以从构造函数调用构造函数：

```
class CComplex{
public:
    CComplex(int real1,int image1)
    {
        real=real1;
        image=image1;
        const char& x='x';
        CComplex(1,2,3);
    }
    CComplex():real(0),image(0){}
    CComplex(const CComplex &c)
    {
        real=c.real;
        image=c.image;
    }
    CComplex(int i1, int i2, int i3){cout<<"\n123!";}
public:

    int real,image;
}; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T16:29:01.303

对于您的第一个问题，在 c++11 之前没有构造函数委托，而您使用的语法对于 c++11 是正确的。只需确保您已启用 c++11 编译，它应该可以正常工作。如果你不能使用 C++11，你将不得不复制一些代码。

我不明白您的第二个问题是否/什么（关于重新加载）。

# perl - Perl 无法使用 URI::QueryParam 进入 for 循环

> ID：15389473
> 
> 赞同：0
> 
> 时间：2013-03-13T15:26:08.663
> 
> 标签：perl, uri, query-parameters

我有以下代码：

```
use strict;
use warnings;
use URI;
use URI::QueryParam;

open (URLS, "<urls.txt");
open (EXTRAPARAMS, "<extraparams.txt");

my @words = (<EXTRAPARAMS>);  

while ( my $URL = <URLS>) {
        my $uri = URI->new($URL);
        print "GETS THIS FAR\n";
        print "$uri\n";

    for my $key ($uri->query_param) {
         print "CANT GET HERE\n";                        #why does it not get here?
         my $org = $uri->query_param($key);
         for my $word (@words) {
             for ("$org$word", $word, "$word$org") {
                 $uri->query_param($key, $_);
                 print $uri->as_string, $/;
             }
         }
         $uri->query_param($key, $org);
    }
} 
```

**我遇到的问题**

`for`我能够从 URLS 文本文件中读取每个 url 并打印它们，但由于某种原因我似乎无法进入循环。

**有什么明显的我忽略或没有做，因为我似乎无法弄清楚为什么它没有到达那里？**

它可能与 URI::QueryParam 的东西无关，只是我犯的一个错误，但我找不到它。

`$key`我已经查看了 URI::QueryParam 的文档，并且就我所看到的和`query_param`部分而言，所有内容似乎都是编写/格式化的，所以我不知道有什么问题？

非常感谢您的帮助，非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T15:36:22.177

您的代码的这种简化工作正常：

```
use strict;
use warnings;
use URI;
use URI::QueryParam;

my $uri = URI->new("http://www.foo.com?bar=baz&sproing=blargh");

for my $key ($uri->query_param) {
     print "$key\n";
} 
```

输出：

```
bar
sproing 
```

问题几乎肯定出在您的数据上：您的 URL 格式不正确或没有任何参数。

# c# - 从服务中模拟当前用户

> ID：15389474
> 
> 赞同：2
> 
> 时间：2013-03-13T15:26:13.123
> 
> 标签：c#, impersonation

不知道这是否可能，但我想从服务中模拟当前登录的用户？请注意，我不知道机器上当前登录/活动用户的用户名密码。

如果有人有任何关于如何做到这一点的文档/示例，那将是一个很大的帮助......

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-13T15:35:34.737

可以有 0、1 或*多个*用户登录到计算机。

处理服务和“该”登录用户交互的任何交互的最佳方法是将交互拆分为两个（或更多）程序。

服务代码只是将它需要的任何代码作为服务运行，并公开某种形式的 API。

第二个程序在每个用户会话中运行（例如，通过将其放在启动文件夹中），然后使用您设计的 API 连接到服务。

然后，该服务可以跟踪当前正在运行的用户程序，并（如有必要）将请求发送回那些程序，要求它们在每个用户会话中执行活动。

# c#-4.0 - 将 SignalR 1.0.0-RC1 升级到 1.0.1 - SignalR.Core 中找不到 ScaleoutMessageBus 类型 - 修复？

> ID：15389476
> 
> 赞同：1
> 
> 时间：2013-03-13T15:26:21.663
> 
> 标签：c#-4.0, signalr, signalr-hub

我的项目成功地使用了带有 Redis 消息总线横向扩展的 SignalR v1.0.0-RC1。

升级到 v1.0.1，我现在收到以下错误：

> 无法从程序集“Microsoft.AspNet.SignalR.Core，版本=1.0.0.0，文化=中性，PublicKeyToken=31bf3856ad364e35”加载类型“Microsoft.AspNet.SignalR.ScaleoutMessageBus”。

这是从我的 Global.asax 触发的：

```
GlobalHost.DependencyResolver.UseRedis(server, Int32.Parse(port), password, eventKeys); 
```

建议？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T17:33:54.150

横向扩展提供程序在 1.0.0 中被删除，因此在 1.0.1 中仍然没有。由于程序集已签名，因此您将无法将旧的横向扩展程序集与较新的 SignalR 代码一起使用。

不过，Scale-out 又回来了，它将在下一个版本 1.1 中可用。

# linux - Tmux：窗格标题（#T）被报告为“fg”而不是更多信息

> ID：15389477
> 
> 赞同：0
> 
> 时间：2013-03-13T15:26:29.940
> 
> 标签：linux, unix, terminal, zsh, tmux

有没有办法让 Tmux 显示更多信息的窗格名称？

如果在特定窗格中我暂停了一个进程并返回到它（使用 Zsh 调用它），这`fg`就是`%2`窗格的标题而不是它的真实标题（可能是`vim ~/somepath/somefile`.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T08:43:24.087

您有一些*zsh*配置正在为您执行此操作（可能是“preexec”命令）。

我已经看到 oh-my-zsh 导致了[类似的问题](https://superuser.com/a/320316/14827)。如果您正在使用它，那么您可以尝试放入`DISABLE_AUTO_TITLE=true`您的配置文件之一。否则，它会将窗口重命名为您输入的每个命令的第一个单词。

# android - Android 2.2 上的 Facebook WebDialog.RequestsDialogBu ilder

> ID：15389478
> 
> 赞同：0
> 
> 时间：2013-03-13T15:26:32.637
> 
> 标签：android, facebook, request

我想显示 Facebook WebDialog 作为使用该应用程序的邀请。我`WebDialog.RequestDialogBuilder()`用于创建`WebDialog`. 它在 Android 2.3.3 及更高版本上运行良好，但在 Android 2.2 上，对话框窗口会出现片刻然后消失。`OnCompleteListener`不提供`FacebookException`任何消息。这是我的代码：

```
Bundle params = new Bundle();

params.putString("message", message);
params.putString("to", friendFBId);

RequestsDialogBuilder rdb = new RequestsDialogBuilder(ctx, FBSession, params);

rdb.setOnCompleteListener(new OnCompleteListener() {

    @Override
    public void onComplete(Bundle values, FacebookException error) {

        if (error != null){
            if (error instanceof FacebookOperationCanceledException){
                //Toast.makeText(ctx,"Request cancelled",Toast.LENGTH_SHORT).show();
            }
            else{
            }
            Log.e("MB", "FB Error: "+error.toString()+" "+error.getMessage());
        }
        else{
            final String requestId = values.getString("request");
            if (requestId != null) {
                Toast.makeText(ctx,"Request sent" +requestId,Toast.LENGTH_SHORT).show();
            } 
            else {
                Toast.makeText(ctx,"Request cancelled",Toast.LENGTH_SHORT).show();
            }
        }
    }
});

WebDialog requestDialog = rdb.build();
requestDialog.show(); 
```

我的问题是：为什么这在 Android 2.2 上不起作用？

# visual-studio-2010 - 如何在 Visual Studio 2010 中创建当前快捷方式的列表？

> ID：15389480
> 
> 赞同：0
> 
> 时间：2013-03-13T15:26:37.823
> 
> 标签：visual-studio-2010, keyboard-shortcuts

如何在 Visual Studio 2010 中输出当前快捷方式的列表？我知道我可以从 Microsoft 下载海报，我认为 JetBrains 也有类似的东西。问题是，我们还有其他映射快捷方式的附加组件，并且某些快捷方式不起作用。重置映射似乎没有帮助。我需要弄清楚快捷方式映射的命令。

更新 - 我正在寻找一种工具来读取 Visual Studio 中的设置并告诉我当前的映射。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T15:30:46.143

这是一个很好的用户友好概述。

[http://www.shortcutworld.com/en/win/Visual-Studio_2010.html](http://www.shortcutworld.com/en/win/Visual-Studio_2010.html)

我希望我对你有很大帮助。

# android - 完成任何形式的退出时（即使用 HOME、SWITCH 和 BACK 按钮）完全关闭 Android 应用程序

> ID：15389483
> 
> 赞同：0
> 
> 时间：2013-03-13T15:26:49.163
> 
> 标签：android

我正在构建一个 Android 应用程序，特别是一个登录页面，如果用户以任何方式（即使用 SWITCH、HOME 或 BACK 按钮）退出登录页面，我希望该应用程序完全关闭该应用程序。

应用程序不应该完全关闭的唯一时间应该是用户成功登录时，即按下自定义创建的登录按钮或输入按钮时。

我已经能够成功关闭应用程序，但即使用户成功登录也会关闭。它不是为了这样做。

下面是我完全关闭的代码 - 我接管了 onDestroy()、onBackPressed()、finish() 和 onStop() 方法：

```
 // Deal with back button
public void onBackPressed() {
    System.runFinalizersOnExit(true);

    System.exit(0);     
}

// Deal with exiting of app
public void finish() {

    System.runFinalizersOnExit(true);

    System.exit(0);

}

// Deal with exiting of app
public void onDestroy() {
    System.runFinalizersOnExit(true); 

    System.exit(0);
}

// Deal with exiting of app
public void onStop() {
    System.runFinalizersOnExit(true); 

    System.exit(0);
} 
```

有人对我的问题有任何想法吗

非常感谢您的帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T15:33:13.673

[在此处](http://developer.android.com/reference/android/app/Activity.html#onStop%28%29)查看该`onStop()`方法的说明。我想你`Activity`在用户成功登录后打开另一个，你的上面变得不可见并在你退出应用程序的地方`Activity`调用。`onStop()`所以只是不要覆盖`onStop()`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T15:37:05.383

`onStop()`每次使您的活动不可见时都会调用该方法：当您的应用程序进入后台时，当屏幕关闭时，或者**当您切换到另一个活动时**。

**无论如何，强烈劝阻**您尝试做的事情。请参阅此[论坛主题](https://groups.google.com/forum/?fromgroups=#!topic/android-developers/Zhd1fRfHAAQ)（Dianne Hackborn 是 Android 框架的主要开发人员之一）。

使用 强制关闭您的应用程序很可能会与 Android 应用程序生命周期发生冲突，并且可能会破坏其保存的状态，从而导致用户出现意外和不愉快的行为`System.exit()`。`Process.killProcess()`

更好的方法是在启动登录活动时[`FLAG_ACTIVITY_SINGLE_TOP`](http://developer.android.com/reference/android/content/Intent.html#FLAG_ACTIVITY_SINGLE_TOP)使用标志。[`FLAG_ACTIVITY_CLEAR_TOP`](http://developer.android.com/reference/android/content/Intent.html#FLAG_ACTIVITY_CLEAR_TOP)这应该从应用程序中删除以前的活动，这与从用户的角度启动一个新应用程序相同。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T17:44:18.150

只需创建一个类成员布尔值，并在按下自定义创建的登录按钮或输入按钮时将`mLoggedIn`其设置为**true 。**
然后

```
@Override
protected void onPause()
{
    super.onPause();
    if (!mLoggedIn) 
    {
        finish();
    }
} 
```

# scala - Scala 中的 BDD - 它必须是丑陋的吗？

> ID：15389490
> 
> 赞同：14
> 
> 时间：2013-03-13T15:26:57.060
> 
> 标签：scala, bdd, scalatest, specs2

我过去用[生菜](http://lettuce.it)做蟒蛇。它是一个简单的 BDD 框架，其中规范写入外部纯文本文件。实现使用正则表达式来识别每个步骤，证明规范中每个句子的可重用代码。

使用 scala，无论是[specs2](http://etorreborre.github.com/specs2/)还是[scalatest](http://www.scalatest.org/)，我都被迫将规范与实现一起编写，这使得无法在另一个测试中重用实现（当然，我们可以在某个函数中实现它）并且无法分离来自规范本身的测试实现（我曾经做过的事情，向客户提供验收测试以进行验证）。

最后，我提出我的问题：考虑到客户端验证测试的重要性，在 BDD 框架中是否有办法让 scala 从外部文件加载测试，如果测试中的语句尚未实现并执行是否所有语句都执行正常测试？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-13T15:59:39.443

我刚刚发现了一个[sbt 的黄瓜插件](http://blog.knoldus.com/2013/01/15/atdd-cucumber-and-scala/)。测试将在 test/scala 下实现，规范将作为纯 txt 文件保存在 test/resources 中。我只是不确定图书馆的可靠性以及将来是否会获得支持。

编辑：以上是以下插件的包装器，它完美地解决了问题并支持 Scala。 [https://github.com/cucumber/cucumber-jvm](https://github.com/cucumber/cucumber-jvm)

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-03-18T07:21:29.000

这都是关于权衡的。黄瓜风格的规范很棒，因为它是纯文本，非编码人员可以轻松编辑和阅读。

然而，它们作为规范也非常严格，因为它们基于特征和 Given-When-Then 强加了严格的格式。[例如](https://github.com/etorreborre/specs2/blob/master/src/test/scala/examples/GivenWhenThenSpec.scala#L46)，在 specs2中，我们可以编写任何我们想要的文本，并且只注释那些意味着系统操作或验证的行。缺点是文本被注释并且`pending`必须明确指定以指示尚未实现的内容。此外，注释只是对某些代码的引用，它们存在于某个地方，您当然可以使用通常的编程技术来获得可重用性。

顺便说一句，[上面的链接](https://github.com/etorreborre/specs2/blob/master/src/test/scala/examples/GivenWhenThenSpec.scala)是一个有趣的权衡示例：在这个文件中，第一个规范是“丑陋的”，但是有更多的编译时检查该`When`步骤使用来自`Given`步骤的信息或者我们没有步骤顺序`Then -> When`。第二个规范更好，但也更容易出错。

然后是维护正则表达式的问题。如果编写功能的人和实现它们的人之间有严格的分离，那么即使没有实质性的改变，也很容易破坏实现。

最后，还有版本控制的问题。谁拥有该文件？我们如何确保代码与规范同步？谁在需要时重构规范？

到目前为止，还没有完美的解决方案。我自己的结论是，BDD 工件应该掌握在开发人员手中并由其他利益相关者验证，如果代码可读，则直接阅读代码或阅读 html/pdf 输出。如果 BDD 工件归开发人员所有，他们不妨使用自己的工具通过验证（尽可能使用编译器）和维护（使用自动重构）来简化工作。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-03-13T16:07:13.577

您自己说过，通过 Scala 为此类 stuf 提供的常规方法（方法、函数、特征、类、类型 ...）很容易使实现可重用，所以那里没有真正的问题。

如果你想给你的客户一个没有代码的版本，你仍然可以给他们代码文件，如果他们不能忽略一点语法，你可能可以编写一个自定义报告器，将所有文本写到一个文件中，也许甚至格式化为html或其他东西。

另一种选择是使用[JBehave](http://jbehave.org/)或任何其他基于 JVM 的框架，它们应该可以毫无问题地使用 Scala。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-09-11T20:16:03.333

Eric 的主要设计标准是可执行规范开发的**可持续性**（通过重构），而不是由于简单文本的“美感”而带来的初始便利。

见[http://etorreborre.github.io/specs2/](http://etorreborre.github.io/specs2/)

specs2的特点是：

1.  默认情况下并发执行示例
2.  ScalaCheck 属性
3.  用 Mockito 模拟
4.  数据表
5.  AutoExamples，其中提取源代码来描述示例
6.  丰富的匹配器库
7.  易于创建和组合
8.  可用于必须和应该
9.  返回“功能”结果或抛出异常
10.  可在 specs2 之外重用（例如在 JUnit 测试中）
11.  用于编写类似 Fitnesse 规范的表单（使用 Markdown 标记）
12.  用于创建验收测试文档的 HTML 报告，创建用户指南
13.  使用始终最新的代码记录 API 的片段
14.  与 sbt 和 JUnit 工具（maven、IDE...）集成

Specs2 在设计和实现上都令人印象深刻。如果您仔细观察，您会发现 DSL 可以扩展，同时保持类型安全和强大的域代码命令正在开发中。

抛开“更丑”的论点并认真尝试这一点的人会找到力量。查看结构化表格和摘要

# java - 卡在等待（）线程执行返回

> ID：15389491
> 
> 赞同：3
> 
> 时间：2013-03-13T15:26:57.567
> 
> 标签：java, multithreading, synchronization, deadlock

我正在尝试编写一个线程，当我通过主线程中的适应度对现有染色体进行排序时，我可以将机器人的测试和进化委托给它。下面是初始的健身方法。我在这里要做的是让robotHandler 测试每个基因组，因为测试时长为30 - 40 秒。我只会在任何给定时间运行这些线程之一。

目前我似乎陷入了 intialFitness 方法的 wait() 部分。这是我在多线程方面的第一次尝试，因此对于如何调试问题或是否有人能发现问题的任何帮助，这将是非常棒的

RobotInterface 类目前只是一个测试类，我已经注释掉了 log4j 和 sleep 声明以尝试排除这些（顺便说一下，如果有帮助，log4j 没有在线程中记录任何内容）

```
public synchronized ArrayList<Genome> initialFitness( ArrayList<Genome> population)
{
    for ( int i = 0; i < population.size(); i++  )
    {
        candidateTest = new CandidateTest(population.get(i));
        Thread robotHandler = new Thread(new RobotInterface( candidateTest));
        while(! (candidateTest.finishedYet() ))
        {
            try
            {
                wait();
            }
            catch (InterruptedException e)
            {
                logger.debug("The initialFitness method was interrupted, this shouldn't happen");
            }
        }
        population.set(i, candidateTest.getCandidate());
    }
    return population;
}

import org.apache.log4j.Logger;
import org.apache.log4j.PropertyConfigurator;
import java.util.Random; 
```

RobotInterface 类

```
public class RobotInterface implements Runnable
{
// create a serial connection
// transmit a string and check for response
// wait for evaluation
// take evaluation
private CandidateTest candidate;
private Random rng = new Random();

//protected static Logger logger = Logger.getLogger("Thread" + Thread.currentThread().getName());

public RobotInterface(CandidateTest test)
{
    this.candidate = test;
    //PropertyConfigurator.configure("log4j.properties");
}

public void evaluate (Genome genome)
{
    //send to robot and return fitness
    genome.setFitness(rng.nextDouble());
    //logger.debug("fitness is " + genome.getFitness());
    try
    {
        //logger.debug("Thread sleeping for 4 seconds");
        //Thread.sleep(4000);
    }
    catch(Exception E)
    {

    }

}

public void run() 
{
    //logger.debug("entering run of Robot Interface");
    //logger.debug("Send Genome via serial and wait for a response");
    Genome testSubject = candidate.getCandidate(); 
    evaluate(testSubject);
    candidate.finished();
    notifyAll();
} 
```

}

候选测试类

```
public class CandidateTest
{
private volatile Genome candidate;
private volatile boolean testFinished = false;

public CandidateTest(Genome g)
{
    candidate = g;
}

public synchronized Genome getCandidate()
{
    return candidate;
}

public synchronized void finished()
{
    testFinished = true;
}

public synchronized boolean finishedYet()
{
    return testFinished;
} 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T15:37:00.303

首先，您没有启动`robotHandler`线程。所以你的主线程到达`wait()`，然后没有其他线程来通知它。

其次，你调用`wait()`任何`initialFitness`属于的类，但你调用`notifyAll()`. `RobotInterface`所以`RobotInterface`会通知所有等待它的人（没有人），你的主代码将继续等待。你需要调用你调用`notifyAll()`的同一个对象`wait()`。

我建议

```
synchronized(candidateTest) {
   candidateTest.wait();
} 
```

和

```
 candidateTest.notify(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T15:34:27.073

从未见过线程从哪里开始。尝试：

```
 Thread robotHandler = new Thread(new RobotInterface( candidateTest)).start(); 
```

所以你的 notifyAll() 永远不会被调用

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T15:42:38.433

Nathanial 一针见血，但如果您刚刚开始使用 Java 并发，我建议您使用 java.util.concurrent 包。为您找到了一篇关于 DZone 的不错的初学者文章：http: [//java.dzone.com/articles/lazy-developers-introduction](http://java.dzone.com/articles/lazy-developers-introduction)

# javascript - CRM 2011 - JavaScript - 在哪里设置业务需要

> ID：15389492
> 
> 赞同：3
> 
> 时间：2013-03-13T15:27:00.687
> 
> 标签：javascript, dynamics-crm-2011

在表单中，如果选项集字段决策中的值被选择为拒绝，我们希望将拒绝原因设置为必需。我编写了一个 JS 函数，然后将其与字段 Decision 的 OnChange 相关联，并将 Reject Reason 字段设置为必需。

```
if (decisionOptionSetValue == 100000006 && decisionOptionSetText == "Reject") {
    Xrm.Page.getAttribute("new_rejectionreason").setRequiredLevel("required");
} 
```

现在，上述工作正常，没有问题。

问题是，如果我打开相同的记录，我可以愉快地从拒绝原因字段 (new_rejectionreason) 中删除该值，并且它不会引发错误，因为只有当我们设置了决定选项的值更改时，我的代码才会触发，在这种情况下，并没有发生。

现在，在哪里检查以防止这些？

**选项 1**：我是否在 new_rejectionreason 字段上有一个 OnChange 以便我检查值是否已更改？

**选项 2**：在保存表单并阻止表单保存 (?) 并将此字段设置为必填之前，我是否将检查作为 OnSave 的一部分

**选项 3**：我是否将检查设置为 OnLoad 并将字段 new_rejectionreason 设置为必需

还有其他选择吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T15:45:13.390

在我看来，最好的选择是选项 3。因为您警告用户字段 new_rejectionreason 是必需的，并且不要等待保存表单来警告该字段。对于选项 1，您必须在 new_rejectionreason 中强制进行 onchange，这种方式并不容易理解为什么要强制 onchange。

我不推荐但另一种方法是在插件中进行此验证并启动 InvalidPluginExecutionException 这会停止插件的执行并向用户发送消息。这仅供您参考，请勿在这种情况下使用此方法。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-13T16:03:29.987

如果您不想让用户设置值，为什么不将该字段设为只读？因此，当他们更改决策字段的值时，请添加以下内容：

```
Xrm.Page.ui.controls.get('new_rejectionreason').setDisabled(true); 
```

因此，现在用户无法在不再次更改决策字段的情况下编辑该值。

编辑：我认为现在根据您的评论了解。我认为最简单的是添加额外的负载检查。

```
function OnLoad() {
    var decisionValue = Xrm.Page.getAttribute('new_decision').getValue();
    if (decisionValue !== null) {
        Xrm.Page.getAttribute('new_rejectionreason').setRequiredLevel('required');
    }
} 
```

因此，当您的页面加载时，它会检查该`Decision`字段。如果它找到一个值，它就知道该`Reject Reason`字段是必需的并将其标记为必需字段。

然后，您需要做的就是修改您的 OnChange 处理程序，`Decision`以便在删除值时取消设置所需的值。

```
if (decisionOptionSetValue === 100000006 && decisionOptionSetText === 'Reject') {
    Xrm.Page.getAttribute('new_rejectionreason').setRequiredLevel('required');
}
else {
    Xrm.Page.getAttribute("new_rejectionreason").setRequiredLevel('none');
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T20:08:00.210

*在状态设置为拒绝*但原因为空的情况下，我只会阻止保存实体。不知何故，我感到不安将一个字段设置为业务需要或不取决于另一个字段中的值。

# javascript - 如何使用正则表达式匹配高价值的 unicode 字符？

> ID：15389497
> 
> 赞同：1
> 
> 时间：2013-03-13T15:27:13.180
> 
> 标签：javascript, regex, node.js

具体来说，我想匹配 range `[#x10000-#xEFFFF]`。AFAIK，`\u`转义序列只接受 4 个十六进制数字，而不是 5。有没有办法匹配更高的值？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-13T15:37:09.997

在内部，JavaScript 使用仅限于基本平面的 UCS-2。对于更高范围的字符，您将不得不使用代理对。例如，要查找 U+13FFA，您可以匹配`\uD80F\uDFFA`.

更多细节可以在[这里](http://inimino.org/~inimino/blog/javascript_cset)找到。

不幸的是，这在正则表达式的字符类中效果不佳。使用 BMP 字符，您可以执行`/[a-z]/`. 你不能用更大范围的字符来做到这一点，因为 JavaScript 不理解代理对应该被视为一个单元。您也许可以四处寻找处理此问题的第三方库。~~可悲的是，我不知道有什么可以推荐的。~~ [这个](http://xregexp.com/plugins/)可能值得一看。我从来没有使用过它，所以我无法证明它的质量。

PS 你可能会发现[这个 shim](https://gist.github.com/slevithan/2290602)通常对处理高阶字符很有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T15:30:55.187

也许是这样的？

```
var regex = /#x[1-9a-eA-E][0-9a-fA-F]{4}/g;

console.log(regex.test("#x03FFA")); // false
console.log(regex.test("#x13FFA")); // true 
```

[http://jsbin.com/awidew/1](http://jsbin.com/awidew/1)

mz

# java - 在运行时将 Groovy 脚本导入另一个 Groovy 脚本

> ID：15389499
> 
> 赞同：4
> 
> 时间：2013-03-13T15:27:19.083
> 
> 标签：java, groovy, groovyshell

我有一个看起来像这样的 Groovy 文件（当前）。

main.groovy

```
import org.packages.mystuff.JavaClassIAmUsing;
public class MyObject {

    def rate(item){
        def o = evaluate(new File (new File(getClass().protectionDomain.codeSource.location.path).parent),"CommonFunctions.groovy");
        println o.whoami();

    }
} 
```

我有另一个名为的 groovy 文件

CommonFunctions.groovy

```
def whoami() {return 'no body';} 
```

我正在尝试将*CommonFunctions*脚本包含到*主*脚本中，但是在构建时脚本的位置是未知的（即我不能硬编码脚本中的绝对文件路径或 java 进程的绝对路径与位置有关脚本将被存储）。

我所知道的是脚本将在一起或位于相对于调用脚本的位置（例如子目录）。

我试图定位调用脚本的位置，但我得到了错误

```
 No signature of method: MyObject.evaluate() 
```

*考虑到在运行时使用GroovyClassLoader.parseClass(File)*方法访问主脚本，我如何引用此脚本。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T20:46:53.030

我不太确定你为什么要这样做，我认为制作一个`CommonsFunctions`你可以正常实例化并在任何地方使用的类会简单得多。

但是，*有*可能实现您想要的；使用 Groovy，没有那么多限制......

您建议的解决方案有两个问题：

1.  您的类中的 getClass()`MyObject`自然是指...`MyObject`类，因此您查找脚本位置的尝试将失败。您在正确的轨道上，但您需要使用周围的 Script 类来解析脚本位置。
2.  `evaluate`并没有真正按照你想象的方式工作。方法的结果`evaluate`是脚本的结果，而不是`Script`类的实例。解决此问题的一种方法是将方法重写`CommonFunction`为闭包属性。`Binding`在评估脚本时，这些属性将在 shell 对象中可用。

所以，通过这些重写，你最终会得到这样的结果：

**main.groovy**

```
class MyObject {
    def scriptDir

    def rate(item) {
        def commonFunctionsScriptFile = new File(scriptDir, "CommonFunctions.groovy")
        def binding = new Binding()
        new GroovyShell(binding).evaluate(commonFunctionsScriptFile)
        println binding.variables.whoami()
    }
}

scriptFile = new File(getClass().protectionDomain.codeSource.location.path)
new MyObject(scriptDir: scriptFile.parentFile).rate(null) 
```

在这里，脚本文件位置是在脚本中解析的，而不是在内部类中。

**CommonFunctions.groovy**

```
whoami = { 'no body' } 
```

这里，`whoami`不再是方法，而是将添加到绑定的闭包属性。确保*不要在*此属性前面加上`def`，因为那样它将是一个局部变量，而不是添加到绑定对象的属性。

这些重写后的输出是预期的：`no body`.

# jquery - 发起者 jquery.min.js - 404 Not Found on ajax-loader.gif 和 black.png

> ID：15389501
> 
> 赞同：0
> 
> 时间：2013-03-13T15:27:24.290
> 
> 标签：jquery, html, web, web-optimization

我开始优化我一直在努力提高速度的网站，使用缩小的 JS、没有注释的 CSS 等。

我正在使用 chromes 开发人员工具 - 网络选项卡 - 来估计加载时间并发现任何错误。在这里，我注意到两个图像文件的两个 404 未找到错误：ajax-loader.gif 和 black.png。

在谷歌快速搜索后，我发现了一个“ajax-loader.gif”生成器，其中包含不同版本的标准风车装载机。我已经生成了一个并将其包含在我的文件中，它现在加载得很好。但是什么初始化了这个 gif？我的 jquery 加载都没有那么慢以至于需要它。那么这个图像实际上是如何被加载的，或者更确切地说它是什么时候出现的呢？jquery 会自己启动它吗？

此外，我还有 black.png。我找不到关于这个文件的任何相关材料，很明显 jaquery.min.js 正在启动它。我正在使用 google 的 api 链接到 jquery 库。black.png 有什么作用？

这是一个屏幕截图...

![black.png 错误](../Images/f14b37f2b79e13e71ad7a58a544d01ea.png)

你也可以在那里看到 ajaxloader.gif，在我生成并上传之后现在可以工作了。在我这样做之前，它 404 就像 black.png 显然是因为它不存在，并且花费了类似的 220 毫秒延迟，现在因为它可以找到文件而减少了。

**总而言之，它们的作用是什么，它们何时出现，以及 black.png 实际上是什么？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T16:05:09.650

图片似乎是从第 69 行的 gallery.js 加载的

```
$items.add('<img src="images/ajax-loader.gif"/><img src="images/black.png"/>') 
```

[http://khill.mhostiuckproductions.com/siteLSSBoilerPlate//include/head/js/img-gallery/gallery.js](http://khill.mhostiuckproductions.com/siteLSSBoilerPlate//include/head/js/img-gallery/gallery.js)

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2017-03-20T14:18:01.987

尝试重新下载 jquery。

是在`ajax-loader.gif`下载。将其复制到您的应用程序中，对我来说是`script/images/ajax-loader.gif`

它应该可以解决问题。

# xcode - 在 NSTextfield 上的 Interface Builder 中添加的 NSDateformatter 增加了 GMT 差异

> ID：15389502
> 
> 赞同：1
> 
> 时间：2013-03-13T15:27:25.533
> 
> 标签：xcode, cocoa, binding, nsdateformatter, nstextfield

好的，我想用 a`NSTextfield`和 a建立一个倒数计时器`NSStepper`来增加它。两者都绑定到`ModelKeyPath`Interface中的相同 int 属性`Builder`。要将 int 值输出格式化为 00:00:00，我`NSDateFormatter`在.`IB``NSTextfield`

它正在工作，但是当我运行应用程序时，在我的情况下添加了与 GMT +001 的差异。int 值应为 0，但 textField 显示 01:00:00

```
- (void)applicationDidFinishLaunching:(NSNotification *)aNotification
{
    // Insert code here to initialize your application
    self.countdownTimer = [[Timer alloc] init];

    [self.countdownTimer setTimerCount:0];
} 
```

我已经用这个解决方案以编程方式完成了它：[Convert Seconds Integer To HH:MM, iPhone](https://stackoverflow.com/questions/1739383/convert-seconds-integer-to-hhmm-iphone) 但我想使用`NSDateFormatter`. 帮助表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T05:02:16.837

将格式化程序的时区设置为您当前的时区。

在 IB 中没有办法做到这一点，但您可以为日期格式化程序创建一个出口并将时区设置为`-awakeFromNib`.

# c# - 使用 Linq 更新集合中除一个之外的所有对象

> ID：15389505
> 
> 赞同：5
> 
> 时间：2013-03-13T15:27:34.420
> 
> 标签：c#, .net, linq

有没有办法使用 Linq 执行以下操作：

```
foreach (var c in collection)
{
    if (c.Condition == condition)
    {
        c.PropertyToSet = value;
        // I must also check I only set this value to one minimum and only one element.
    }
    else
    {
        c.PropertyToSet = otherValue;
    }
} 
```

为了澄清，我想遍历集合中的每个对象，然后更新每个对象的属性，但我的集合中的一个元素应该更新为另一个值。

此时，我使用计数器检查我将我的值设置为我收藏中的一个且只有一个元素。我从这个例子中删除了它，让人们提出其他解决方案。

收藏中无一例外的原始问题在[这里](https://stackoverflow.com/questions/398871/update-all-objects-in-a-collection-using-linq)

编辑

我问这个问题是因为我不确定是否可以用 LinQ 做到这一点。所以你的回答安慰了我对 LinQ 的看法。谢谢你。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-13T15:31:44.100

您可以使用`.ForEach`来进行更改，并`.Single`验证只有一个元素与条件匹配：

```
// make sure only one item matches the condition
var singleOne = collection.Single(c => c.Condition == condition);
singleOne.PropertyToSet = value;

// update the rest of the items
var theRest = collection.Where(c => c.Condition != condition);
theRest.ToList().ForEach(c => c.PropertyToSet = otherValue); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-13T15:36:38.037

我不建议你用 Linq 来实现这个。为什么？因为Linq是用来查询的，不是用来修改的。它可以返回匹配某些条件的对象或不匹配的对象。但是为了更新这些对象，您仍然需要使用`foreach`或将查询结果转换为列表并使用`ForEach`扩展名。两者都需要枚举序列**两次**。

因此，简单的循环将完成这项工作：

```
foreach (var c in collection)
{
    c.PropertyToSet = (c.Condition == condition) ? value : otherValue;
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-13T15:40:22.063

*如果您坚持*使用，使用 LINQ 的黑客方法：

```
var result = collection.Select(c =>
{
    c.PropertyToSet = c.Condition == condition ? value : otherValue;
    return c;
}); 
```

但我的建议是，不要这样做，你的代码实际上得到了最好的方法，为了提高可读性，你可以更改：

```
foreach (var c in collection)
   c.PropertyToSet = c.Condition == condition ? value : otherValue; 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-13T15:40:34.170

您可以将三元运算符与 linq 语句结合使用：

```
 collection.ToList().ForEach(c => c.PropertyToSet = c.Condition == condition ? value : otherValue); 
```

但是，我在这里只使用常规的 foreach 来避免将集合转换为列表。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-03-13T15:31:26.923

```
collection.Where(x => <condition>).ToList().ForEach(x => <action>); 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-03-13T15:36:40.847

好吧，你可以这样做：

```
var itemToSetValue = collection.FirstOrDefault(c => c.Condition == condition);

if(itemToSetValue != null)
     itemToSetValue.PropertyToSet = value;

// Depending on what you mean, this predicate 
// might be c => c != itemToSetValue instead.
foreach (var otherItem in collection.Where(c => c.Condition != condition))
{
    otherItem.PropertyToSet = otherValue;
} 
```

当然，这不是纯 LINQ 解决方案，但纯 LINQ 解决方案不适合修改现有集合。

# postgresql - 遍历行，将它们相互比较并将结果存储在另一个表中

> ID：15389506
> 
> 赞同：0
> 
> 时间：2013-03-13T15:27:35.823
> 
> 标签：postgresql, iteration

我有一个包含以下行的表：

```
product_id | order_date
A          | 12/04/12
A          | 01/11/13
A          | 01/21/13
A          | 03/05/13
B          | 02/14/13
B          | 03/09/13 
```

我现在需要的是每个月的概览，第一次购买了多少产品（=前一个月没有购买），现有产品有多少（=前一个月已经购买）以及有多少在给定的一个月内未购买。将上面的示例作为输入，脚本应该提供以下结果，无论数据中的时间段是什么：

```
month   | new | existing | nopurchase
12/2012 | 1   | 0        | 0
01/2013 | 0   | 1        | 0
02/2013 | 1   | 0        | 1
03/2013 | 1   | 1        | 0 
```

很高兴得到第一个提示如何解决这个问题，这样我就可以继续了。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T17:33:12.193

[SQL小提琴](http://www.sqlfiddle.com/#!12/5ef84/3)

```
with t as (
    select product_id pid, date_trunc('month', order_date)::date od
    from t
    group by 1, 2
)
select od,
    sum(is_new::integer) "new",
    sum(is_existing::integer) existing,
    sum(not_purchased::integer) nopurchase
from (
    select od,
        lag(t_pid) over(partition by s_pid order by od) is null and t_pid is not null is_new,
        lag(t_pid) over(partition by s_pid order by od) is not null and t_pid is not null is_existing,
        lag(t_pid) over(partition by s_pid order by od) is not null and t_pid is null not_purchased
    from (
        select t.pid t_pid, s.pid s_pid, s.od
        from
            t
            right join
            (
                select pid, s.od
                from
                    t
                    cross join
                    (
                        select date_trunc('month', d)::date od
                        from
                        generate_series(
                            (select min(od) from t),
                            (select max(od) from t),
                            '1 month'
                        ) s(d)
                    ) s 
                group by pid, s.od
            ) s on t.od = s.od and t.pid = s.pid
    ) s
) s
group by 1
order by 1 
```

# phpstorm - 在另一台机器上使用 PHPStorm 6 LiveEdit

> ID：15389510
> 
> 赞同：3
> 
> 时间：2013-03-13T15:27:46.860
> 
> 标签：phpstorm, liveedit

我在 Mac 上使用 PHP Storm 6，想知道是否有任何方法可以使用旁边的基于 Windows 7 的笔记本电脑通过 LiveEdit 预览我的工作。

我在 Mac 上配置了一个虚拟主机（如下）并通过[http://somehost.dev](http://somehost.dev)连接到它-

```
NameVirtualHost 127.0.0.1
<VirtualHost *:80>
  ServerName somehost.dev
  DocumentRoot "/Users/benjaminmcmahan/PhpstormProjects/TEVFDDev/htdocs/"
  <Directory "/Users/benjaminmcmahan/PhpstormProjects/TEVFDDev/htdocs/">
    Options Indexes FollowSymLinks Includes ExecCGI
    AddType text/shtml .shtml
    AddOutputFilter INCLUDES .shtml
    AllowOverride All
    Order allow,deny
    Allow from all
  </Directory>
</VirtualHost> 
```

我在 Mac 上安装了 Chrome JetBrains IDE 扩展，并且 Live Edit 工作正常。我注意到可以选择为要使用的扩展设置 IP 地址和端口，我认为这意味着可以从另一台机器上监听 LiveEdit。Mac 的 IP 地址是 192.168.2 - 使用此 IP 地址，我可以`somehost.dev`在 Windows 机器上查看并将 Windows 机器的 JetBrains IDE IP 设置为 192.168.1.2。但是，LiveEdit 在这台机器上不做任何事情。

是否可以设置这样的配置？

# scope - 从顶层访问 Xtend 模型数据（代码生成）

> ID：15389515
> 
> 赞同：0
> 
> 时间：2013-03-13T15:28:00.610
> 
> 标签：scope, code-generation, xtext, xtend

如果我有一个像下面这样的 Xtext 语法：

```
grammar org.xtext.example.mydsl.ServerGeneratorLanguage with org.eclipse.xtext.common.Terminals

generate serverGeneratorLanguage "http://www.xtext.org/example/mydsl/ServerGeneratorLanguage"

Model:
  (types+=Type)*;

Type:
  Server | DomainModel;

Server:
    "SERVER" name=ID "{"
        "CONFIG" "{"
        (Configs+=Config)*
            "}"
  "}";

Config:
    rootConfig | hostNameConfig | portConfig | logConfig | sqldbConfig | resourceConfig;

rootConfig:
    "ROOTDIR" "=" name=ID;

hostNameConfig:
    "HOSTNAME" "=" name=ID;

portConfig:
    "PORT" "=" name=ID;

logConfig:
    "LOG" "=" name=ID;

sqldbConfig:
    "SQLDB" "=" name=ID;

resourceConfig:
    "RESOURCE" "=" name=ID;

DomainModel:
    "DOMAINMODEL" name=ID "{"
        "ENTITYS" "{"
            (Entitys+=Entity)*
        "}"
        "ENTITY_RELATIONSHIP" "{"
            (Relationships+=Relationship)*
        "}" 
    "}";

Entity:
    name=ID "{"
        (Attributes+=Attribute)*
    "}";

Attribute:
    StringAttribute | NumberAttribute | ImageAttribute;

StringAttribute:
    "STRING" name=ID;

NumberAttribute:
    "NUMBER" name=ID;

ImageAttribute:
    "IMAGE" name=ID;

QualifiedName:
    ID ('.' ID)*;

Relationship:
    name=[Attribute|QualifiedName] "->" refName=[Attribute|QualifiedName]; 
```

如何`name-ID`从比 Server 更高的级别访问每个 Config 对象的部分。让我解释：

`Server.configs.eClass.name`我想通过从AS WELL AS收集数据来生成代码`DomainModel.blahblah.eClass.name`。我假设我需要从 Type 访问它，但我似乎无法在 Xtend 中访问它。

从服务器我可以访问所有组件`Server.configs.eClass.name.`

感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T07:41:21.077

Xtext 的自动模型推断器应该将通用特征（如您的案例中的“名称”）推到继承层次结构中。如果它不这样做，您应该检查：

*   **各有** `Config`特色吗`name`？它们是同一类型吗？在你的语法中检查这一点。

*   是否`RootConfig`等`HostConfig`派生自`Config`? 在生成的类中检查这一点。

# pumping-lemma - 这种语言是正规的吗？{a^ib^j| i=j mod 19}

> ID：15389519
> 
> 赞同：0
> 
> 时间：2013-03-13T15:28:08.297
> 
> 标签：pumping-lemma

我知道这`{a^i b^j | i = j }`不正常，我可以用抽引理证明；同样，我也可以使用抽引引理来证明这个不规则。但我想我看到了一些类似的问题，说这种语言实际上是有规律的。而且因为我对我在抽取引理方面的知识没有信心，所以我问了这个不好的问题。对不起。

这就是我证明它的方式：让 w be `a^p b^(19k+p)`，显然这是在语言中。然后，如果我抽一个，做它`a^(p+1) b^(19k+p)`。它失败。因此，它不是常规的。

我的证明对吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T16:55:59.810

看看[这个答案](https://stackoverflow.com/a/14758570/1607043)。简而言之，您没有正确地抽弦。抽水引理指出你的字符串`w`可以被划分为`w = xyz`where `|xy| ≥ p`，并且`y`不为空。然后，对于所有 i ≥ 0 ，您可以将字符串抽成 xy ^i z。

这里的关键是，抽水引理指出*存在*满足这些属性的字符串的划分`w`，您无法选择划分，并且您只能将字符串抽为 xy ^i z。

但是，这种语言是有规律的，所以不能用泵引理来证明一种语言是否有规律，它只能证明一种语言是否有规律（这是必要条件但不是充分条件）。为了证明一种语言是正则的，你可以构造一个 DFA、NFA 或正则表达式来准确描述你的语言。一种这样的正则表达式是：

```
(a^19)*(e|ab|aabb|aaabbb|...|a^18b^18)(b^19)* 
```

`e`空字符串在哪里。

* * *

我怀疑你的语言是自动机或计算入门课程的一个例子。如果您有兴趣，[Myhill-Nerode 定理](http://en.wikipedia.org/wiki/Myhill%E2%80%93Nerode_theorem)通常不会在介绍材料中介绍，但在这种情况下提供了一个非常简单的规律性证明：考虑可区分的扩展 b、bb、bbb、...、b^19 和证明相对容易由此而来。

# c# - 匹配后匹配行首返回文本

> ID：15389521
> 
> 赞同：0
> 
> 时间：2013-03-13T15:28:10.387
> 
> 标签：c#, regex

我正在尝试制作一个正则表达式来提取 , 之后的文本，`First name:`并且不包含标签。`Last name:``Email:`

这是我在标签之间的文字。

```
<MyText>
First name: Chris
Last name: Jones
Email: cj@dsf.com
</myText> 
```

我一直在玩这样的事情：`/(Last name:).*?`但这不起作用。有谁知道如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T15:31:09.950

我实际上并不了解您的脚本语言（正则表达式支持可能有所不同）。但是这样的事情应该有效：

```
/^.*?:(.*?)$/m 
```

一些解释：

带有`m`修饰符 ( `//m`) 的正则表达式意味着匹配每行的开头`^`和`$`结尾，而不是字符串的开头和结尾。

`.*?:`部分匹配`Last name:`, ,`First name:`等。并且因为它不在括号 ( `()`) 之间，所以不会被捕获。

该`(.*?)`部分匹配冒号 ( `:`) 之后的所有内容，并且因为`$`放置在它之后，所以它将匹配所有内容，直到行尾。它在括号之间，这意味着它将被捕获。

* * *

要回答您的编辑，请使用以下命令：

```
/^First name: (.*?)$/m
/^Last name: (.*?)$/m
/^Email: (.*?)$/m 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T15:32:55.467

使用 .NET 正则表达式，您可以使用积极的后向断言：

```
new Regex(@"(?<=Last name:).*"); 
```

但是，根据上下文，您可能必须小心 - JavaScript 正则表达式引擎不支持后向断言，因此您不能，例如，在 ASP.NET RegularExpressionValidator 中使用此客户端。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T15:30:42.820

试试这个正则表达式：

```
/^.*?: (.*)$/ 
```

# neon - 使用内在函数测试 128 位 NEON 寄存器的值为 0 的最快方法？

> ID：15389539
> 
> 赞同：7
> 
> 时间：2013-03-13T15:29:10.103
> 
> 标签：neon

我正在寻找最快的方法来测试 128 NEON 寄存器是否包含全零，使用 NEON 内在函数。我目前正在使用 3 个 OR 操作和 2 个 MOV：

```
uint32x4_t vr = vorrq_u32(vcmp0, vcmp1);

uint64x2_t v0 = vreinterpretq_u64_u32(vr);
uint64x1_t v0or = vorr_u64(vget_high_u64(v0), vget_low_u64(v0));

uint32x2_t v1 = vreinterpret_u32_u64 (v0or);
uint32_t r = vget_lane_u32(v1, 0) | vget_lane_u32(v1, 1);

if (r == 0) { // do stuff } 
```

这由 gcc 转换为以下汇编代码：

```
VORR     q9, q9, q10
VORR     d16, d18, d19
VMOV.32  r3, d16[0]
VMOV.32  r2, d16[1]
VORRS    r2, r2, r3
BEQ      ... 
```

有人知道更快的方法吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2016-02-12T16:39:44.413

虽然这个答案可能有点晚了，但有一种简单的方法可以用 3 条指令进行测试，无需额外的寄存器：

```
inline uint32_t is_not_zero(uint32x4_t v)
{
    uint32x2_t tmp = vorr_u32(vget_low_u32(v), vget_high_u32(v));
    return vget_lane_u32(vpmax_u32(tmp, tmp), 0);
} 
```

如果设置了 128 位 NEON 寄存器中的任何位，则返回值将非零。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-12-31T07:49:46.677

如果您的目标是 AArch64 NEON，您可以使用以下命令获取一个值以仅通过两条指令进行测试：

```
inline uint64_t is_not_zero(uint32x4_t v)
{
    uint64x2_t v64 = vreinterpretq_u64_u32(v);
    uint32x2_t v32 = vqmovn_u64(v64);
    uint64x1_t result = vreinterpret_u64_u32(v32);
    return result[0];
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-04-23T20:03:24.097

您似乎正在寻找内在函数，这就是方法：

```
inline bool is_zero(int32x4_t v) noexcept
{
  v = v == int32x4{};

  return !int32x2_t(
    vtbl2_s8(
      int8x8x2_t{
        int8x8_t(vget_low_s32(v)),
        int8x8_t(vget_high_s32(v))
      },
      int8x8_t{0, 4, 8, 12}
    )
  )[0];
} 
```

Nils Pipenbrinck 的答案有一个缺陷，即他假设 QC、累积饱和标志是明确的。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-11-02T10:13:27.917

如果你有 AArch64，你可以更容易地做到这一点。他们为此设计了一个新的指令。

```
inline uint32_t is_not_zero(uint32x4_t v)
{
    return vaddvq_u32(v);
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-04-27T20:23:22.807

我会避免函数返回应该只被解释为 bool 的整数值。例如，更好的方法是定义一个辅助函数来返回 4 个通道的最大无符号值：

```
inline uint32_t max_lane_value_u32(const uint32x4_t& v)
{
#if defined(_WIN32) && defined(_ARM64_)
    // Windows 64-bit
    return neon_umaxvq32(v);
#elif defined(__LP64__)
    // Linux/Android 64-bit
    return vmaxvq_u32(v);
#else
    // Windows/Linux/Android 32-bit
    uint32x2_t result = vmax_u32(vget_low_u32(v), vget_high_u32(v));
    return vget_lane_u32(vpmax_u32(result, result), 0);
#endif
} 
```

然后你可以使用：

```
if (0 == max_lane_value_u32(v))
{
    ...
} 
```

在您的代码中，并且此类功能在其他地方也可能有用。或者，您可以使用完全相同的代码来编写**is_not_zero()**函数，但最好的形式是返回**bool**。

请注意，您需要定义辅助函数的唯一原因是 vmaxvq_u32() 在 32 位上不可用，并且可能不会与 Windows 上 arm64_neon.h 中的 neon_umaxvq32() 别名。

# ant - 使用纯Ant实现if else条件（检查命令行输入）

> ID：15389544
> 
> 赞同：14
> 
> 时间：2013-03-13T15:29:24.017
> 
> 标签：ant

我是蚂蚁的新手。我的 ant 脚本从命令行接收名为“ **env ”的用户输入变量：**

例如`ant doIt -Denv=test`

用户输入值可以是“ *test* ”、“ *dev* ”或“ *prod* ”。

我也有“ `doIt`”目标：

```
<target name="doIt">
  //What to do here?
</target> 
```

在我的目标中，我想为我的 ant 脚本创建以下**if else**条件：

```
if(env == "test")
  echo "test"
else if(env == "prod")
  echo "prod"
else if(env == "dev")
  echo "dev"
else
  echo "You have to input env" 
```

那是检查用户从命令行输入的值，然后相应地打印一条消息。

我知道**ant-Contrib**，我可以用`<if> <else>`. **但是**对于我的项目，我想使用纯Ant来实现**if else**条件。可能，我应该使用`<condition>`?? 但我不确定如何使用`<condition>`我的逻辑。有人可以帮我吗？

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2013-03-13T16:10:06.497

您可以创建几个目标并使用`if`/`unless`标签。

```
<project name="if.test" default="doIt">

    <target name="doIt" depends="-doIt.init, -test, -prod, -dev, -else"></target>

    <target name="-doIt.init">
        <condition property="do.test">
            <equals arg1="${env}" arg2="test" />
        </condition>
        <condition property="do.prod">
            <equals arg1="${env}" arg2="prod" />
        </condition>
        <condition property="do.dev">
            <equals arg1="${env}" arg2="dev" />
        </condition>
        <condition property="do.else">
            <not>
                <or>
                <equals arg1="${env}" arg2="test" />
                <equals arg1="${env}" arg2="prod" />
                <equals arg1="${env}" arg2="dev" />
                </or>
            </not>
        </condition>
    </target>

    <target name="-test" if="do.test">
        <echo>this target will be called only when property $${do.test} is set</echo>
    </target>

    <target name="-prod" if="do.prod">
        <echo>this target will be called only when property $${do.prod} is set</echo>
    </target>

    <target name="-dev" if="do.dev">
        <echo>this target will be called only when property $${do.dev} is set</echo>
    </target>

    <target name="-else" if="do.else">
        <echo>this target will be called only when property $${env} does not equal test/prod/dev</echo>
    </target>

</project> 
```

带有`-`前缀的目标是私有的，因此用户将无法从命令行运行它们。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-04-21T08:46:36.700

如果你们中的任何人需要一个简单的**if/else**条件（没有 elseif）；然后使用以下内容：

这里我依赖于一个环境变量 DMAPM_BUILD_VER，但是有可能这个变量没有在环境中设置。所以我需要有机制默认为本地值。

```
 <!-- Read build.version value from env variable DMAPM_BUILD_VER. If it is not set, take default.build.version. -->
    <property name="default.build.version" value="0.1.0.0" />
    <condition property="build.version" value="${env.DMAPM_BUILD_VER}" else="${default.build.version}">
        <isset property="env.DMAPM_BUILD_VER"/>
    </condition> 
```

# printing - 将页脚与打印的 HTML 页面的底部对齐？

> ID：15389547
> 
> 赞同：2
> 
> 时间：2013-03-13T15:29:32.263
> 
> 标签：printing, media-queries, footer, vertical-alignment, sticky-footer

我有一个标准网站，并且在打印时（用于在 Safari OS X 上制作 PDF），我希望页脚与它所在的任何打印页面的底部对齐 - 即文档的最后一页。

像这样：

![打印页脚对齐到底部](../Images/65ad12333052ef28a15527c38cad04a1.png)

那可能吗？

对于所有其他打印样式表详细信息（为简单起见不包括在内），我使用了媒体查询 ( `@media print { }`)。

[演示代码在这里](http://jsbin.com/inokup/1/edit)；对于`screen`页面本身，这里是 HTML：

```
<div id="footer">
    <p>A bunch of example stuff inside here...</p>
</div> 
```

位于绝对定位：

```
#footer {
    color: #fff;
    background: #000;
    width: 100%;
    position: absolute;
    bottom: 0px;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-02-14T23:40:33.797

有点旧，但答案肯定是使用`@page:last`选择器，但您还必须更改页脚的 CSS。

```
#footer { position: static; }

@page:last {
    @bottom-center { content:element(footer) }
} 
```

# c# - Bootstrap Modal 触发但不是 ASP Button Click 事件

> ID：15389548
> 
> 赞同：2
> 
> 时间：2013-03-13T15:29:32.740
> 
> 标签：c#, asp.net, twitter-bootstrap, webforms

基本上就像标题所说的那样。

布局：带有 DataGrid 和动态数量的按钮的页面。

预期功能：单击其中一个按钮时，将显示模式，然后触发 asp 按钮单击事件。

目前的功能：单击 ASP 按钮，显示模态，事件不会触发。

任何人都知道是否有可能让两者都开火？

这是我的模态：

```
 div id="example" class="modal hide fade in" style="display: none;">
              <div class="modal-header">
                  <a class="close" data-dismiss="modal">x</a>
                  <h3>Enter Comments Below:</h3>
              </div>
              <div class="modal-body">
                  <h4>Comments</h4>                  
              </div>
              <div class="modal-footer">
                  <a href="#" class="btn btn-success">Call to action</a>  
                    <a href="#" class="btn" data-dismiss="modal">Close</a>                   
              </div>
          </div> 
```

这是按钮：

```
<asp:Button ID="TestButton2" runat="server" Text="Comments"
OnClick="TestButton_Click"/> 
```

这是后面代码中的按钮单击事件。

```
protected void TestButton_Click(object sender, EventArgs e)
                        {

                         // This does something

                        } 
```

这是单击按钮时显示模式的 Jquery：

```
 <script type="text/javascript">
           $('input[name$="TestButton2"]').on("click", function () {

               $('#example').modal('toggle');
               return false;

           });
     </script> 
```

有人有想法么？我想过一个隐藏的领域，但不知道这是否真的有效。WebForms 可能只是不可能，但我想我会问。在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-13T16:03:51.710

在您的按钮单击时使用 ClientScriptManager 调用 java 脚本

```
protected void TestButton_Click(object sender, EventArgs e)
                    {

                     // do something then call modal
ClientScript.RegisterStartupScript(GetType(), "Show", "<script> $('#example').modal('toggle');</script>");
                    } 
```

# apache-flex - Actionscript -> 任何关于 getLayoutBoundsHeight 和 getPreferedBoundsHeight 区别的文章

> ID：15389550
> 
> 赞同：-1
> 
> 时间：2013-03-13T15:29:37.567
> 
> 标签：apache-flex, actionscript

找不到任何关于差异的文章。有人知道吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T15:40:22.553

[getLayoutBoundsHeight](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/mx/core/ILayoutElement.html#getLayoutBoundsHeight%28%29)会这样做：

> 返回元素的布局高度。这是元素用于在屏幕上绘制的大小。

[getPreferredBoundsHeight](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/mx/core/ILayoutElement.html#getPreferredBoundsHeight%28%29)会这样做：

> 返回元素的首选高度。

在 Flex 的上下文中，组件的大小始终由其父级决定。组件不能自行调整大小。必须实现一个 measure() 方法——它是组件生命周期的一部分——它将设置组件的测量高度（和测量宽度）。因此，layoutBoundsHeight 是实际高度。preferredBoundsHeight 是所需的高度。在 Flex 中，尤其是在处理布局容器或百分比布局时，Flex 可能会做出与测量大小不同的组件大小决定。

# c# - 尝试通过 wcf 从数据库中检索记录时出错

> ID：15389551
> 
> 赞同：0
> 
> 时间：2013-03-13T15:29:39.127
> 
> 标签：c#, mysql, winforms, wcf

我创建了一个 wcf 服务并定义了一个从 mysql 数据库中检索记录的方法。当我从 Windows 窗体应用程序调用该方法时，它会引发异常。它表示未处理空值。我有两个不同的问题。一个显然是如何处理空值，另一个是该方法不起作用，因为我的数据库中有一条记录，所以它不应该接收空值。

如果我在表单应用程序中定义该方法，它可以正常工作，但不能通过 WCF 服务。我正在使用 mysql 作为数据库。

Wcf 代码如下：

```
IService1
using System;
using System.Collections.Generic;
using System.Linq;
using System.Runtime.Serialization;
using System.ServiceModel;
using System.ServiceModel.Web;
using System.Text;
using System.Data;

namespace WcfService3
{
    // NOTE: You can use the "Rename" command on the "Refactor" menu to change the interface name "IService1" in both code and config file together.
    [ServiceContract]
    public interface IService1
    {

       // [OperationContract]
       // string InsertUserDetails(EmpDetails userInfo);

         [OperationContract]
         DataSet SelectEmpDetails();

        // TODO: Add your service operations here
    }

    // Use a data contract as illustrated in the sample below to add composite types to service operations.
    [DataContract]
    public class CompositeType
    {
        bool boolValue = true;
        string stringValue = "Hello ";

        [DataMember]
        public bool BoolValue
        {
            get { return boolValue; }
            set { boolValue = value; }
        }

        [DataMember]
        public string StringValue
        {
            get { return stringValue; }
            set { stringValue = value; }
        }
    }

    [DataContract]
    public class EmpDetails
    {

        int empno;

        string ename;

        float sal;

        int deptno;

        string email;

        [DataMember]

        public int EmpNp
        {

            get { return empno; }

            set { empno = value; }

        }

        [DataMember]

        public string EName
        {

            get { return ename; }

            set { ename = value; }

        }

        [DataMember]

        public float Sal
        {

            get { return sal; }

            set { sal = value; }

        }

        [DataMember]

        public int DeptNo
        {

            get { return deptno; }

            set { deptno = value; }

        }

        [DataMember]

        public string Email
        {

            get { return email; }

            set { email = value; }

        }

    }
} 
```

服务1.svc

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Runtime.Serialization;
using System.ServiceModel;
using System.ServiceModel.Web;
using System.Text;
using System.Data;
using MySql.Data.MySqlClient;
using System.Windows.Forms;

namespace WcfService3
{
    // NOTE: You can use the "Rename" command on the "Refactor" menu to change the class name "Service1" in code, svc and config file together.
    // NOTE: In order to launch WCF Test Client for testing this service, please select Service1.svc or Service1.svc.cs at the Solution Explorer and start debugging.
    public class Service1 : IService1
    {

        private MySqlConnection connection;
        private string server;
        private string database;
        private string uid;
        private string password;

        //Constructor
    public Service1()
    {
        Initialize();
    }

    private void Initialize()
    {
        server = "192.168.1.222";
        database = "cabee";
        uid = "user";
        password = "Password1";
        string connectionString;
        connectionString = "SERVER=" + server + ";" + "DATABASE=" +
        database + ";" + "UID=" + uid + ";" + "PASSWORD=" + password + ";";

        connection = new MySqlConnection(connectionString);
    }
    private bool OpenConnection()
    {
        try
        {
            connection.Open();
            return true;
        }
        catch (MySqlException ex)
        {
            //When handling errors, you can your application's response based 
            //on the error number.
            //The two most common error numbers when connecting are as follows:
            //0: Cannot connect to server.
            //1045: Invalid user name and/or password.
            switch (ex.Number)
            {
                case 0:
                    MessageBox.Show("Cannot connect to server.  Contact administrator");
                    break;

                case 1045:
                    MessageBox.Show("Invalid username/password, please try again");
                    break;
            }
            return false;
        }
    }

    //Close connection
    private bool CloseConnection()
    {
        try
        {
            connection.Close();
            return true;
        }
        catch (MySqlException ex)
        {
            MessageBox.Show(ex.Message);
            return false;
        }
    }

        public string GetData(int value)
        {
            return string.Format("You entered: {0}", value);
        }

        public CompositeType GetDataUsingDataContract(CompositeType composite)
        {
            if (composite == null)
            {
                throw new ArgumentNullException("composite");
            }
            if (composite.BoolValue)
            {
                composite.StringValue += "Suffix";
            }
            return composite;
        }

        public DataSet SelectEmpDetails()
        {
            DataSet ds = new DataSet();

            if (this.OpenConnection() == true)
            {

                MySqlCommand cmd = new MySqlCommand("Select * from empinfo", connection);

                MySqlDataAdapter sda = new MySqlDataAdapter(cmd);          

                sda.Fill(ds);

                cmd.ExecuteNonQuery();

                this.CloseConnection();

                return ds;
            }
            else
            {
                return ds;

            }
        }

    }

} 
```

Windows 窗体应用程序

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Threading.Tasks;
using System.Windows.Forms;
using MySql.Data.MySqlClient;

namespace WindowsFormsApplication1
{
    public partial class Form1 : Form
    {

        private MySqlConnection connection;
        private string server;
        private string database;
        private string uid;
        private string password;

        ServiceReference1.Service1Client obj = new ServiceReference1.Service1Client(); // Add service reference

        public Form1()
        {
                 showdata();
        }

        private void showdata()  // to show the data in the DataGridView

        {

            DataSet   ds = new DataSet();

            ds = obj.SelectEmpDetails();

            dataGridView1.DataSource = ds.Tables[0];

            dataGridView1.AutoResizeColumns(DataGridViewAutoSizeColumnsMode.AllCells);

        }

    }
} 
```

错误信息

```
System.NullReferenceException was unhandled
  HResult=-2147467261
  Message=Object reference not set to an instance of an object.
  Source=WindowsFormsApplication1
  StackTrace:
       at WindowsFormsApplication1.Form1.showdata() in c:\Users\Anup\Google Drive\WindowsFormsApplication1\WindowsFormsApplication1\Form1.cs:line 100
       at WindowsFormsApplication1.Form1..ctor() in c:\Users\Anup\Google Drive\WindowsFormsApplication1\WindowsFormsApplication1\Form1.cs:line 29
       at WindowsFormsApplication1.Program.Main() in c:\Users\Anup\Google Drive\WindowsFormsApplication1\WindowsFormsApplication1\Program.cs:line 19
       at System.AppDomain._nExecuteAssembly(RuntimeAssembly assembly, String[] args)
       at System.AppDomain.ExecuteAssembly(String assemblyFile, Evidence assemblySecurity, String[] args)
       at Microsoft.VisualStudio.HostingProcess.HostProc.RunUsersAssembly()
       at System.Threading.ThreadHelper.ThreadStart_Context(Object state)
       at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state, Boolean preserveSyncCtx)
       at System.Threading.ExecutionContext.Run(ExecutionContext executionContext, ContextCallback callback, Object state, Boolean preserveSyncCtx)
       at System.Threading.ExecutionContext.Run(ExecutionContext executionContext, ContextCallback callback, Object state)
       at System.Threading.ThreadHelper.ThreadStart()
  InnerException: 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T20:46:39.630

问题是您在构造函数之前在类的 init 上创建服务引用。

服务引用的创建使用配置文件中的值，但此时未加载配置文件。

尝试将这些行放在一起：

```
private void showdata()  // to show the data in the DataGridView
{

        DataSet   ds = new DataSet();
        ServiceReference1.Service1Client obj = new ServiceReference1.Service1Client(); 

        ds = obj.SelectEmpDetails();

        //.....
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T21:10:45.343

使用数据集时不需要 cmd.ExecuteNonQuery()

看看下面的帖子 [Connecting to a Mysql DB with C# - Need some with Datasets](https://stackoverflow.com/questions/4471482/connecting-to-a-mysql-db-with-c-sharp-need-some-with-datasets)

# android - 黑莓安卓推送消息服务器

> ID：15389552
> 
> 赞同：3
> 
> 时间：2013-03-13T15:29:41.120
> 
> 标签：android, push-notification, blackberry-10, blackberry-android

我在尝试为我的 Z10 推送通知时遇到问题。设备成功注册推送通知，我收到了 BlackBerry 生成的注册 ID，如[“创建支持推送的 Android 应用程序”](http://developer.blackberry.com/android/apisupport/creating_push-enabled_android_apps.html)中所述。

我在尝试向该服务器发送通知时遇到问题。

对于常规 Android，我使用的是 [GCM 服务器库](https://code.google.com/p/gcm/source/browse/gcm-server/)。我必须对其进行修改，以便将消息发送到 BlackBerry 服务器，即[https://cpXXX.pushapi.eval.blackberry.com](https://cpXXX.pushapi.eval.blackberry.com)，其中 XXX 是我的 CPID（内容提供商 ID）。

问题是我收到了 404 作为回报，但不知道是什么原因造成的……有什么想法吗？相同的消息已成功发送到常规 Android 设备...

或者，是否有人成功向您的设备发送推送消息，如果是，您能否分享请求的外观？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T20:08:15.883

最后，我能够发出推送请求。您必须将其推送到 BlackBerry 服务器。[我在这里](https://developer.blackberry.com/services/push/?CPID=PUSHAPI00)使用了 BB SDK 。您必须使用的 URL 应如下所示：

```
https://cpXXX.pushapi.eval.blackberry.com/mss/PD_pushRequest 
```

示例代码：

```
IdGenerator idGenerator = new IdGeneratorImpl();

        List<String> addresses = new ArrayList<String>();

        JSONObject message = new JSONObject();
        //populate message with key-value pairs
        String data = message.toString();
        //populate addresses with device PINs

        PushMessageControl pushMessageControl = new PushMessageControl(PPGType.PUBLIC_PUSH, idGenerator, "[ YOUR BlackBerryAppId]", addresses);

        Content content = new TextContent(data, "UTF-8");

        PapService papService = new PapServiceImpl();

        PushSDKProperties properties = new PushSDKPropertiesImpl();
        properties.setPublicPpgAddress("[YOUR BLACKBERRY PPG ADDRESS]");
        properties.setParserSpecialCharacters(BLACKBERRY_PARSER_SPECIAL_CHARACTERS);
        properties.setHttpIsPersistent(false);
        properties.setHttpConnectionTimeout(BLACKBERRY_CONNECTION_TIMEOUT);
        properties.setDtdDeclarationPublic(BLACKBERRY_DTD_DECLARATION_PUBLIC);
        properties.setHttpReadTimeout(BLACKBERRY_READ_TIMEOUT);

        HttpClientImpl client = new HttpClientImpl();
        client.setPushSDKProperties(properties);
        papService.setHttpClient(client);
        papService.setPushSDKProperties(properties);

        PushResponse response = papService.push("[ YOUR BlackBerryAppId]", "[ YOUR BlackBerryPassword]", "[ YOUR BlackBerryAppId]", pushMessageControl, content); 
```

在哪里

```
private static final int BLACKBERRY_READ_TIMEOUT = 120000;

private static final int BLACKBERRY_CONNECTION_TIMEOUT = 60000;

private static final char[] BLACKBERRY_PARSER_SPECIAL_CHARACTERS = new char[] {'&', '"', ':', '<'};

private static final String BLACKBERRY_DTD_DECLARATION_PUBLIC = "<!DOCTYPE pap PUBLIC \"-//WAPFORUM//DTD PAP 2.1//EN\" \"http://www.openmobilealliance.org/tech/DTD/pap_2.1.dtd\">"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T17:25:27.723

根据您的要求，您添加了许多内容：

1.  您必须创建对此 URL 的请求`https://android.googleapis.com/gcm/send`。
2.  您必须在请求的标头中添加服务器 API 密钥。
3.  您还必须将 Google API 控制台提供给您的 2 和 3 添加到您的请求发件人 ID 的标头中。
4.  最后，这是我用来为我的 5000 多个用户推送通知的代码：

注意：它是由 ASP.Net 和 VB.Net 开发的，但都必须应用相同的原则：

```
Dim request As WebRequest = WebRequest.Create("https://android.googleapis.com/gcm/send")
request.Method = "POST"
request.ContentType = "application/json"
request.Headers.Add("Authorization: key=AIzaSyA47-XMaePL1mmI0P1yQ9V4sntMVn9q-1o")
request.Headers.Add("Sender: id=648406549877")
Dim collapsKey = Guid.NewGuid.ToString("n")
Dim postdata As String = "{""registration_ids"":" + ids(j) + ",""data"":{""message"":""" + TextBox1.Text + """,}" + ",""collapse_key"":""" + collapsKey + """,}"
Dim byteArray As Byte() = Encoding.UTF8.GetBytes(postdata)
request.ContentLength = byteArray.Length
Dim dataStream As Stream = request.GetRequestStream
dataStream.Write(byteArray, 0, byteArray.Length)
dataStream.Close()
Dim resposne As WebResponse = request.GetResponse
Dim dataresponse As Stream = resposne.GetResponseStream
Dim reader As New StreamReader(dataresponse)
Dim sResponseFromServer As String = reader.ReadToEnd
reader.Close() 
```

# sql - 查询表达式中的语法错误（缺少运算符）

> ID：15389553
> 
> 赞同：1
> 
> 时间：2013-03-13T15:29:44.010
> 
> 标签：sql, sql-server, ms-access, ms-access-2007

我有以下 SQL 语句在 SQL Server 中运行良好，但在 Access 中出现错误

```
'ERM_HAZARD.[HAZARDID] = ERM_XREF_HAZARD_CAT.[HAZARDID] 
INNER JOIN ERM_HAZARDSTATUS 
ON ERM_HAZARD.HAZARDSTATUSID = ERM_HAZARDSTATUS.HAZARDSTATUSI' 
```

* * *

```
 SELECT erm_hazard.hazardid    AS PKTrans,
       erm_hazard.extref      AS No,
       erm_cat.name           AS CaseType,
       erm_hazard.created     AS CaseDate,
       erm_hazard.name        AS Title,
       erm_hazard.description AS DescriptionTrans,
       erm_organisation.name  AS ResponsibleUnit,
       erm_hazard.reviewdate  AS CaseDeadline,
       erm_hazardstatus.name  AS Status,
       erm_organisation.name  AS UnitInCharge,
       erm_personel.name      AS PersonInCharge
FROM   (erm_personel
        INNER JOIN (erm_organisation
                    INNER JOIN erm_hazard
                            ON erm_organisation.[organisationid] =
                               erm_hazard.[organisationid])
                ON erm_personel.[personelid] = erm_hazard.[personelid])
       INNER JOIN (erm_cat
                   INNER JOIN erm_xref_hazard_cat
                           ON erm_cat.[catid] = erm_xref_hazard_cat.[catid])
               ON erm_hazard.[hazardid] = erm_xref_hazard_cat.[hazardid]
       INNER JOIN erm_hazardstatus
               ON erm_hazard.hazardstatusid = erm_hazardstatus.hazardstatusid
WHERE  (( ( erm_xref_hazard_cat.periodid ) = (SELECT Max(
                                             erm_xref_hazard_cat.periodid)
                                              FROM   erm_xref_hazard_cat) ))
ORDER  BY erm_xref_hazard_cat.periodid DESC,
          erm_hazard.hazardid,
          erm_cat.name 
```

这是 Access SQL 大小问题吗？有任何想法吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-13T15:35:59.003

MS Access 对查询中的括号非常特别。当您有多表连接时，每个连接必须有一对括号：

```
SELECT ERM_HAZARD.HAZARDID AS PKTrans, 
    ERM_HAZARD.EXTREF AS No, 
    ERM_CAT.NAME AS CaseType, 
    ERM_HAZARD.CREATED as CaseDate, 
    ERM_HAZARD.NAME AS Title, 
    ERM_HAZARD.DESCRIPTION AS DescriptionTrans,  
    ERM_ORGANISATION.NAME AS ResponsibleUnit, 
    ERM_HAZARD.REVIEWDATE AS CaseDeadline, 
    ERM_HAZARDSTATUS.NAME as Status, 
    ERM_ORGANISATION.NAME AS UnitInCharge, 
    ERM_PERSONEL.NAME AS PersonInCharge 
FROM ((((ERM_PERSONEL 
INNER JOIN ERM_HAZARD 
    ON ERM_PERSONEL.[PERSONELID] = ERM_HAZARD.[PERSONELID])
INNER JOIN ERM_ORGANISATION 
    ON ERM_ORGANISATION.[ORGANISATIONID] = ERM_HAZARD.[ORGANISATIONID])
INNER JOIN ERM_XREF_HAZARD_CAT 
    ON ERM_HAZARD.[HAZARDID] = ERM_XREF_HAZARD_CAT.[HAZARDID])
INNER JOIN ERM_CAT 
    ON ERM_CAT.[CATID] = ERM_XREF_HAZARD_CAT.[CATID])
INNER JOIN ERM_HAZARDSTATUS 
    ON ERM_HAZARD.HAZARDSTATUSID = ERM_HAZARDSTATUS.HAZARDSTATUSID
WHERE ERM_XREF_HAZARD_CAT.PERIODID= (SELECT MAX(ERM_XREF_HAZARD_CAT.PERIODID) 
                                     FROM ERM_XREF_HAZARD_CAT) 
ORDER BY ERM_XREF_HAZARD_CAT.PERIODID DESC,  ERM_HAZARD.HAZARDID, ERM_CAT.NAME 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-24T19:00:49.863

'ERM_HAZARD.[HAZARDID] = ERM_XREF_HAZARD_CAT.[HAZARDID] 内部连接 ​​ERM_HAZARDSTATUS ON ERM_HAZARD.HAZARDSTATUSID = ERM_HAZARDSTATUS.HAZARDSTATUSI'

HAZARDSTATUSID 末尾缺少 de "D"

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-12T01:51:14.410

添加到此。如果要创建传递查询，则需要在声明 SQL 之前识别连接字符串。

```
sub test()
Dim dbs As Database
Dim qdf As DAO.QueryDef
Dim rstSQL As DAO.Recordset
Dim strSQL As String

On Error GoTo errTrap

Set dbs = CurrentDb

Set qdf = dbs.CreateQueryDef("")

qdf.Connect = ConStringMailing
qdf.ReturnsRecords = True

qdf.SQL = "Select * FROM TABLE"
Set rstSQL = qdf.OpenRecordset

errTrap:
end sub 
```

# entity-framework - 实体框架 - ElementAt

> ID：15389554
> 
> 赞同：0
> 
> 时间：2013-03-13T15:29:45.710
> 
> 标签：entity-framework

我有一个表 User(ID, Name....), Projects(ID, Name, Timestamps, IsFavorite...), Projects_Favoite(UserID, ProjectID)

如果当前用户有一行，我会尝试检查每个项目。如果有一行我想在我的项目中设置“IsFavorite”为真，否则为假。

我绑：

```
 for(int i = 0; i <= erg.Count();i++)
 {
     if (erg.ElementAt(i).User11.Any(u => u.Guid == ID) == true) 
         erg.ElementAt(i).SetFavorite = true; 
 } 
```

但是没有办法使用ElementAt，因为它不能翻译成SQL。所以我尝试了：

```
 for(int i = 0; i <= erg.Count();i++)
 {
     if (erg.Take(i).Last().User11.Any(u => u.Guid == ID) == true)
         erg.Take(i).Last().SetFavorite = true; 
 } 
```

同样的问题，所以我尝试了：

```
foreach (Project project in erg)
{
     if (project.User11.Any(u => u.Guid == ID))
          project.SetFavorite = true;
} 
```

有同样的问题。有没有办法实现 ElementAt？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T15:37:16.157

你应该能够做到：

```
foreach (Project project in erg.Where(p => p.User11.Any(u => u.Guid == ID))
                               .ToList())
    project.SetFavorite = true;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T15:38:49.227

假设 erg 是一个`IQuerable`比你不能使用 ElementAt 因为它不受支持（[http://msdn.microsoft.com/en-us/library/bb399342.aspx](http://msdn.microsoft.com/en-us/library/bb399342.aspx) 检查没有翻译的操作符部分），你可以在一个列出虽然，但当然你会失去延迟查询的好处。尝试`Skip`改用

```
var whatyouwant = erg.Skip(index).First(); 
```

通过查看堆栈跟踪（虽然看不懂德语），看起来 SetFavorite 列有问题。首先尝试**删除**此位：

```
 project.SetFavorite = true; 
```

然后还要检查您的模型列是否与您在数据库中获得的内容匹配。

# java - 从字符串中获取一个字符

> ID：15389556
> 
> 赞同：2
> 
> 时间：2013-03-13T15:29:49.797
> 
> 标签：java, android, string, substring

我有这个字符串：

```
String code="abc"; 
```

我想通过`substring`方法从这个字符串中提取“c”，但它不起作用：

```
String code="abc";
String getsmscode=code.substring(2,1); 
```

此代码返回错误

```
java.lang.StringIndexOutOfBoundsException: length=3; regionStart=2; regionLength=-1 
```

但我不知道为什么？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-03-13T15:31:17.893

您需要阅读[substring 的文档](http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#substring%28int,%20int%29)- 第二个参数不是长度，它是结束索引（不包括）。

> **参数：**
> `beginIndex` - 开始索引，包括在内。
> `endIndex`- 结束索引，独占。

如有疑问，请阅读文档...

另请注意，如果您只是想获取最后一个字符，则可以只使用单参数重载，它会返回从给定起点到字符串结尾的子字符串：

```
String lastCharacter = text.substring(text.length() - 1); 
```

或者您可以将其作为单个字符获取：

```
char lastCharacter = text.charAt(text.length() - 1); 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-03-13T15:31:11.630

第二个参数不是长度，它是[结束索引](http://docs.oracle.com/javase/6/docs/api/java/lang/String.html#substring%28int,%20int%29)。

```
 String#substring(int beginIndex, int endIndex) 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-13T16:00:12.070

上面的人已经充分回答了你的问题，但只是一些关于阅读 API 的提示。

方法通常以单词 public 开头，然后包括返回类型......这就是将返回的数据类型。如果没有任何预期返回是无效的。

然后是方法的名称和两个括号。

括号之间是它接受的参数类型。

使用这种特殊方法，它接受两个整数。这些有助于保留您想要保留多少字符串的索引

索引是一个需要理解的重要概念，很难用语言描述它是如何工作的，但查看 api 描述列表中的示例会有所帮助。

index-1 通常表示从 0 开始计数，因此在字符串“Hello World”中，H 的索引为 0，d 的索引为 10。请注意，只有 9 个字母，但我们仍然必须将空格作为字符包含在内，因此在这种情况下它的索引是5.

重要的是要注意 api 提到的参数描述中排除和包含。这只是意味着返回的字符串将包含由第一个参数索引的字母，但不包含由第二个参数索引的字母。

如果您需要做的就是提取字符串中的最后一个字母，无论字符串大小有多长，一个简单的解决方案是

```
stringName.substring(stringName.length()-1); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-13T15:31:27.437

索引从0开始。你可以试试

```
String code="abc";
String getsmscode=code.substring(2); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-13T15:32:47.367

我认为 substring 需要一个开始索引或一个开始索引和结束索引作为参数：

[http://docs.oracle.com/javase/6/docs/api/java/lang/String.html](http://docs.oracle.com/javase/6/docs/api/java/lang/String.html)

你给它一个大于结束索引的开始索引，因此它会变得混乱，因为返回的长度是负数。交换 1 和 2。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-13T15:38:54.517

使用也可以做到这一点。

```
String getsmscode = code.substring(2,3); 
```

方法说明

```
public String substring (int start, int end) 
```

返回一个字符串，该字符串包含来自该字符串的字符子序列。返回的字符串共享此字符串的支持数组。

> **参数**
> 
> start - 第一个字符的偏移量。
> 
> end- 最后一个字符的偏移量。

返回一个包含从开始到结束的字符的新字符串 - 1

投掷

```
IndexOutOfBoundsException   if start < 0, start > end or end > length(). 
```

# jquery - jQuery Validate 插件的 invalidHandler 计数器

> ID：15389557
> 
> 赞同：0
> 
> 时间：2013-03-13T15:29:51.287
> 
> 标签：jquery, jquery-validate

`invalidHandler`完成有效条目后，如何让 jQuery Validate 插件更新错误计数器？

```
$(document).ready(function () {
    $("#report-listing-form").validate({
        rules: {
            'listing-report-email': {
                required: true,
                email: true
            },
                'listing-report-name': {
                required: true
            },
                'listing-report-phone': {
                number: true,
                minlength: 7,
                maxlength: 12
            },
                'contact-msg': {
                required: true,
                maxWords: 1000
            }
        },
        errorPlacement: function(error, element) {
            return false;  // will suppress error messages
        },
        invalidHandler: function (event, validator) {
            var errors = validator.numberOfInvalids();
            if (errors) {
                var message = (errors == 1) ? '1 invalid field.' : errors + ' invalid fields.';

                $("#err_report-listing-form").html(message).addClass("text-error");
            }
        },
        submitHandler: function (form) {
            alert('valid form');
            return false;
        }
    });
}); 
```

这是我的代码[http://jsfiddle.net/4VP9X/12/的一个工作示例](http://jsfiddle.net/4VP9X/12/)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-13T18:29:23.430

基于此链接[jquery validate plugin](http://docs.jquery.com/Plugins/Validation/validate#toptions)，我添加了 showErrors 回调。它更接近，但它仅在字段格式失败时更新，例如电子邮件或电话号码。它似乎不适用于空旷的领域。

```
showErrors: function(errorMap, errorList) {
  var errors = this.numberOfInvalids();
  if (errors) {
    var message = (errors == 1) ? '1 invalid field.' : errors + ' invalid fields.';
    $("#err_report-listing-form").html(message).addClass("text-error");
      this.defaultShowErrors();
    }               
  }, 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T23:13:25.290

**引用操作**：

> `invalidHandler` “当一个有效条目完成时，如何让 jQuery Validate 插件更新错误计数器？”

简短的回答：你不能。

[根据文档](http://docs.jquery.com/Plugins/Validation/validate#toptions)：

> **invalidHander ：“****提交**无效表单时回调自定义代码。使用事件对象作为第一个参数调用，验证器作为第二个参数。”

换句话说，`invalidHander`回调只触发`submit`事件。[您可以在自己的 jsFiddle](http://jsfiddle.net/4VP9X/12/)中看到这种行为。没有解决方法，除非您想破解插件本身的代码。

# ruby-on-rails - 使用“where”链接范围会导致附加 SQL（未合并）？

> ID：15389559
> 
> 赞同：1
> 
> 时间：2013-03-13T15:29:54.347
> 
> 标签：ruby-on-rails, activerecord, ruby-on-rails-3.2

我的模型如下所示：

```
class User < ActiveRecord::Base    
 has_many :created_games, class_name: 'Game', foreign_key: 'challenger_id'
 has_many :challenged_games, class_name: 'Game', foreign_key: 'opponent_id'  
end

class Game < ActiveRecord::Base
  belongs_to :challenger, :class_name => 'User'
  belongs_to :opponent, :class_name => 'User'
end 
```

**用户故事** 作为用户，我希望查看可以挑战并与之一起玩游戏的用户列表。如果我们之间存在现有游戏，我不能向用户挑战新游戏。

**范围**

我有一个类方法如下：

```
def self.challeangable_for(user_id)

    challengeable_users = User.joins("LEFT JOIN ( SELECT games.challenger_id, games.opponent_id FROM games where games.challenger_id = #{user_id} OR games.opponent_id = #{user_id}) as g on g.challenger_id = users.id or g.opponent_id = users.id WHERE g.challenger_id is null and g.opponent_id is null") 

end 
```

这会正确生成“可挑战用户”列表，但我似乎无法链接此查询。例如，如果我这样做`User.challengeable_users(1).where(gender: 'm')`，rails 会将 WHERE 子句附加到末尾，并且查询将失败：

```
SQLite3::SQLException: near "WHERE": syntax error: SELECT "users".* FROM "users" LEFT JOIN ( SELECT games.challenger_id, games.opponent_id FROM games where games.challenger_id = 1 OR games.opponent_id = 1) as g on g.challenger_id = users.id or g.opponent_id = users.id WHERE g.challenger_id is null and g.opponent_id is null WHERE "users"."gender" = 'm' ORDER BY users.created_at DESC 
```

而且，它又长又丑。有没有更好的办法？我尝试使用“包含”，但我没有找到一种方法 tp 指定**不同**的（非标准）外键加入？

我意识到我有点专注于生成 LEFT JOIN 查询的解决方案。另一种解决方案是生成 EXISTS IN 查询，但我不知道如何编写。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T16:37:37.283

是的，您可以稍微重写一下：

```
challengeable_users = User.joins("LEFT JOIN ( 
  SELECT games.challenger_id, games.opponent_id FROM games where games.challenger_id = #       {user_id} OR games.opponent_id = #{user_id}
  ) as g on g.challenger_id = users.id or g.opponent_id = users.id"
).where("g.challenger_id is null").where("g.opponent_id is null") 
```

然后你可以进一步应用你的性别条件。

# proxy - nginx geo模块的opera mini ip列表在哪里获取？

> ID：15389561
> 
> 赞同：0
> 
> 时间：2013-03-13T15:29:56.450
> 
> 标签：proxy, nginx, geolocation, opera-mini

我需要 Opera Mini 的代理 IP 地址才能在 Geo 模块（nginx）中使用它。Nginx 可以自动为代理使用 X-FORWARDED-FOR 标头，但是从哪里获取代理列表？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T08:17:19.603

不确定我是否完全理解您要解决的问题，但我假设您想为最终用户实施一些地理定位功能，而您的问题是关于使用什么 IP 地址。

如果是这样，请参阅 Opera Mini 请求标头和 X-Forwarded-For 的文档： [http ://dev.opera.com/articles/view/opera-mini-request-headers/](http://dev.opera.com/articles/view/opera-mini-request-headers/)

> X-Forwarded-For
> 
> 这包含请求在从设备到 Mini 代理的途中传递的代理服务器的逗号分隔列表。列表中第一项不是内部 IP 的将始终是连接到 Mini 代理的 IP 地址，因此它是有关请求来源的最可靠信息来源，适用于地理定位等。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-07T21:54:00.693

您确定 Opera IP 地址不在 MaxMind 数据库中吗？（这是 nginx 模块默认使用的数据库）

我的第一个赌注是认为这些 IP 地址将在 MaxMind 列表中，无论是否是代理。

但我认为最好的办法是使用 Opera 代理和来自任何公共[HTTP 代理列表](http://proxy-ip-list.com/)资源的另一个代理进行快速测试。然后验证您是否获得了代理 IP 的地理位置。

请记住将 Nginx 配置为使用 x-forwarded-for IP 作为地理位置。

```
real_ip_header X-Forwarded-For; 
```

那么一个简单的测试示例可能是：

```
<html>
<head>
  <title>What is my IP address - determine or retrieve my IP address</title>
 </head>
<body>
 <?php
     if (getenv(HTTP_X_FORWARDED_FOR)) {
        $pipaddress = getenv(HTTP_X_FORWARDED_FOR);
        $ipaddress = getenv(REMOTE_ADDR);
        echo "Your Proxy IP address is : ".$pipaddress. " (via $ipaddress) " ;
    } else {
        $ipaddress = getenv(REMOTE_ADDR);
        echo "Your IP address is : $ipaddress";
    }
    $country = getenv(GEOIP_COUNTRY_NAME);
    $country_code = getenv(GEOIP_COUNTRY_CODE);
    echo "<br/>Your country : $country ( $country_code ) ";
?>
</body>
</html> 
```

（我只是从另一个站点复制/粘贴该示例，但我认为这做得很好）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-14T13:37:15.307

在 Opera 网站上的任何地方都找不到官方列表。这是[其中的一些ip](http://my.opera.com/jeni271/blog/show.dml/17001232)

[编辑] 在这里删除了我原始答案的一段，因为这可能会产生误导。阅读 nginx GeoIP 源代码后，似乎有必要了解所有“受信任的”opera mini 代理，以便 nginx GeoIP 模块可以使用 x-forwarded-for 标头获取这些代理后面的 IP。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-09-24T03:09:00.807

Opera Mini 和 Opera Turbo 的代理（但实际上是 MITM）服务器位于“Opera Software AS”IP 地址块中，其中包括：

```
    37.228.104.0 255.255.248.0
    82.145.208.0 255.255.240.0
    107.167.96.0 255.255.224.0
    141.0.8.0 255.255.248.0
    185.26.180.0 255.255.252.0

```

# java - 为什么在使用 mappedBy 时这种一对 多映射会失败？

> ID：15389562
> 
> 赞同：0
> 
> 时间：2013-03-13T15:29:56.747
> 
> 标签：java, hibernate, jpa, orm

```
@Entity
public class Person implements Serializable{

    @Id
    @GeneratedValue
    private int id;
    private String name;

    @OneToMany(cascade = CascadeType.ALL, mappedBy = "person")
    private List<Car> cars;

        //getters and setters
}

@Entity
public class Car implements Serializable{
    @Id
    @GeneratedValue
    private int id;
    private String name;

    @ManyToOne
    @JoinColumn(name = "person_id")
    private Person person;

        // getters and setters
} 
```

而且..我这样使用它..

```
 Person per = new Person();
    per.setName("some");

    Car car1 = new Car();
    car1.setName("Ford");

    Car car2 = new Car();
    car2.setName("WagonR");

    //s.save(car1);
    //s.save(car2);
    per.setCars(new ArrayList<Car>());
    per.getCars().add(car1);
    per.getCars().add(car2);

    s.save(per); 
```

现在..表格`Car`有一个列`person_id`，但它显示`null`了两辆车..我在这里做错了什么？表格`Person`已正确填写。如果我`mappedBy`从`Person`表中删除“”.. 而是包括`@JoinColumn`这里...那么它工作正常。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T15:32:56.420

尝试调用`car.setPerson(per)`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T16:32:45.780

使用您的映射，关系的所有者是 Car 而不是 Person ...这就是为什么在保存 Person 时，不保存 Car 的原因。如果您删除，`mappedBy`则关系的所有者将成为 Person 并且您将获得预期的行为！

# php - 使用 java 脚本刷新页面，但我想在刷新的页面上发布一些内容

> ID：15389566
> 
> 赞同：-3
> 
> 时间：2013-03-13T15:30:13.750
> 
> 标签：php, javascript, jquery, html

我现在有点像泡菜。我正在尝试刷新我的 java 页面，但我想向它发布一些新数据。但问题是我不知道从哪里开始。我只知道 location.reload() 有没有办法可以重新加载位置但将新数据发送到刷新的分页？

编辑：对不起，我弄错了。我有一个总是有不同 url 的脚本，所以我不能只将新位置设置为 'http://...../' 所以我需要一种方法可以在没有它的情况下传递值

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T15:32:10.090

你可以：

1.  用于`window.location.href = '/your-url?param1=value&etc=...'`将数据作为查询字符串发送

2.  使用您的 url 作为操作创建一个表单，添加字段然后提交它（这使得使用 POST 提交您的数据成为可能）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T15:42:18.647

有两种方法：

```
1\. window.location.href = 'http://www.yoursite.com?data1=val1&data2=val2';

2\. window.location = 'http://www.yoursite.com?data1=val1&data2=val2'; 
```

第一种方法始终被建议为最佳实践。参考：[这里](https://stackoverflow.com/questions/2383401/javascript-setting-window-location-href-versus-window-location)

# java - 将 SQL 转换为 JPA 2 条件查询

> ID：15389567
> 
> 赞同：1
> 
> 时间：2013-03-13T15:30:14.537
> 
> 标签：java, jpa, jpa-2.0

我已经成功地创建了一些 JPA 2 条件查询，但我现在转换的查询太复杂而无法转换。有人来挑战吗？我将永远感谢任何回应！:)

这是普通 SQL (mysql) 中的查询：

```
SELECT o.orderId, oi.insertDate 
FROM AIDA_ORDER o
LEFT OUTER JOIN 
    (SELECT orderId, MIN(insertDate) AS insertDate FROM AIDA_ORDER_INSERT 
    WHERE insertDate > CURDATE() GROUP BY orderId) AS oi
ON oi.orderId = o.orderId
ORDER BY oi.insertDate, o.orderId; 
```

AIDA_ORDER 表对应一个 OrderBean，AIDA_ORDER_INSERT 对应一个 OrderInsertBean。一个 AIDA_ORDER 可以有多个 AIDA_ORDER_INSERTS。

# matlab - Matlab rotate3D和buttondownfcn不兼容

> ID：15389569
> 
> 赞同：0
> 
> 时间：2013-03-13T15:30:23.583
> 
> 标签：matlab, 3d, rotation, mouseclick-event

大家好，提前感谢您的帮助。

我目前正在 matlab 中开发一个 UI，其中包括 4 个不同的轴来显示各种信息。基本上，我有想要显示的 MRI 数据（即 3D 数据）。我使用 1 个 ax 来显示 3 个在其中心 (axeMain) 分割数据的垂直平面，以及分别显示这些平面的 3 个其他轴 (axeX、axeY 和 axeZ)。我有一个主轴，我想让旋转成为可能（仅在主轴系统上），并且我希望能够在其他 3 个轴（只有 1 个平面的轴）上选择坐标。我也无法翻译，但这超出了我的问题范围。

所以基本上，我在所有 3 个轴上选择我的坐标（在我的飞机上使用 buttondownfcn）没有问题，在 mainAxe 上使用 rotate3D 也没有问题。但是，如果我尝试让两者同时工作，buttondownfcn 就不再起作用了。我不明白它为什么这样做（我有一些想法，但仅此而已），我不知道如何解决它。基本上我的这些功能的代码是这样的：

```
 rotate3d(handles.axisMain);        
    %some other code, setting up other UI stuff

    %allow selection on the 3 static plains.
    set([handles.axeX,handles.axeY,handles.axeZ], 'buttondownfcn', @getCoord); 
```

所以我的问题基本上是：为什么这两个函数不能一起工作以及如何解决这个问题，最好是用最少的代码更改？

谢谢。

编辑：这是我当前界面的打印屏幕。我希望能够仅在最后 3 个轴上选择坐标（每个轴仅包含 1 个平面）。我还希望能够仅在第一个斧头（具有 3 个平面的斧头）上旋转图像。希望这澄清。

[![用户界面](../Images/38098fdf5be09444db1630113bf13d20.png)](https://i.stack.imgur.com/a2aSe.png)

我还要注意这一点：在我的测试之后，我发现如果激活了 rotate3D，鼠标点击根本不会出现。问题不在于我用来获取坐标本身的逻辑，而在于未触发点击事件。

另外，我知道该事件不在我尝试打印的表面上。实际代码是这样的：

```
 set(h, 'buttondownfcn', @getCoord);
    set(h,'HitTest','on'); 
```

其中 h 是表面的句柄，每个表面都以这种方式处理。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-05-25T10:44:38.910

我找到了确切的解决方案！

探索代码`rotate3d(hAxe,'on')`，我发现它们的关键线是包含和方法的`getuimode(hFig,'Exploration.Rotate3d')`返回。`uitools.uimode``ButtonDownFilter``ModeStateData`

最后我通过以下方式解决了这个问题：

```
rotate3d(hAxe,'on')
uiMode = getuimode(hFig,'Exploration.Rotate3d');
uiMode.ButtonDownFilter = @mycallback; 
```

在哪里：

*   `hAxe`是坐标区对象的句柄

*   `hFig`是图形对象的句柄

*   `@mycallback`是让`buttondownfcn` 和`rotate3d`协同工作的回调，如[Matlab 的帮助示例](http://es.mathworks.com/help/matlab/ref/rotate3d.html#zmw57dd0e724668)

因此，您必须标记不想被忽略的对象：

```
set(hAxe,'tag','DoNotIgnore') 
```

并编写回调：

```
function [flag] = mycallback(obj,event_obj)
% If the tag of the object is 'DoNotIgnore', then return true
objTag = obj.Tag;
if strcmpi(objTag,'DoNotIgnore')
    flag = true;
else
    flag = false;
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T15:40:54.787

也许

```
set(handles.axisMain, 'buttondownfcn', @getCoord); 
```

# ios - 通过 2 个关系搜索核心数据

> ID：15389572
> 
> 赞同：1
> 
> 时间：2013-03-13T15:30:30.320
> 
> 标签：ios, objective-c, core-data, nspredicate

我有 3 个实体：人员、区域和边界。边界具有“状态”属性。一个人可以有很多区域。一个区域可以有许多边界：

```
Person <<-->> Region <<-->> Boundary.state 
```

对于 Person 实体，我想找出他有边界的所有状态。谓词可以进行这种搜索还是我需要进行嵌套搜索：

```
NSMutableArray *states = [NSMutableArray array];

for (Region *region in person.regions) {
    for (Boundary *boundary in region.boundaries) {
        // add state to array
    }
} 
```

编辑：

抱歉，我不是数据库人，没想到意识到它们是多对多关系：

```
Person<<-->>Region<<-->>Boundary 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T15:41:17.543

要获得`Boundary`a 拥有的所有实体，`Person`您可以使用`NSFetchRequest`这样的...

```
NSFetchRequest *request = [NSFetchRequest fetchRequestWithEntityName:@"Boundary"];

[request setPredicate:[NSPredicate predicateWithFormat:@"region.person = %@", thePerson]]; 
```

这将返回一个`Boundary`实体数组，该数组`Person`就是您放入谓词中的实体。

然后你可以做...

```
NSSet *states = [NSSet setWithArray:[results valueForKey:@"state"]]; 
```

那么 states 将是 Person“拥有”的一组唯一状态。

随着多对多的变化。

你可以为谓词做一些类似的事情......

```
[NSPredicate predicateWithFormat:@"ANY region IN %@", thePerson.regions]; 
```

...我认为这可能有效？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-13T16:07:15.460

谓词中的“ANY”集合运算符不适用于嵌套的一对多关系。您可以在此处使用 SUBQUERY：

```
[NSPredicate predicateWithFormat:@"SUBQUERY(regions, $r, ANY $r.persons == %@).@count > 0", thePerson]]; 
```

# razor - ServiceStack Razor ContentPage Works in Debug but not deployed

> ID：15389576
> 
> 赞同：4
> 
> 时间：2013-03-13T15:30:37.860
> 
> 标签：razor, servicestack

I am trying a very simple contentpage at ~/View.cshtml that consists of

```
@inherits ViewPage
﻿    @{
       Layout = "SimpleLayout";
       ViewBag.Title = "Title";
}
<div id="content-page">
<p>Test</p>
</div> 
```

at ~/Views/Shared/SimpleLayout.cshtml is

```
<!DOCTYPE HTML>
<html>
<head>
    <title>Simple Layout</title>
</head>
<body>
 <div id="content">
     @RenderBody()
 </div>
</body>
</html> 
```

In debug mode it works fine, but on deploy it then shows

> Compilation Error
> 
> Description: An error occurred during the compilation of a resource required to service this request. Please review the following specific error details and modify your source code appropriately.
> 
> Compiler Error Message: CS0146: Circular base class dependency involving 'RazorOutput.ViewPage' and 'RazorOutput.ViewPage'

I'm trying to follow the RockStars example as closely as possible, so don't have an idea of what's wrong. My service views work fine.

Any suggestions would be appreciated.

**Update**

When the name of the page is changed (e.g. NewPage.cshtml) then it will not work in Debug either, throwing the same exception.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T05:00:13.843

In `Web.Config`, make sure that you have:

```
<compilation debug="false"> 
```

I was getting the same error, and this fixed it.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-29T18:02:25.133

Setting `compilation debug="false"` as suggested above did not work for me.

I was having the same error running locally in IIS Express and found that if I added this to the web.config it would work:

```
<appSettings>
  <add key="webPages:Enabled" value="false" />
</appSettings> 
```

I found that setting in ServiceStack's RazorRockstar sample, after comparing it line by line with my own project to see why mine wasn't working.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-15T17:47:43.590

I was receiving similar compilation errors when trying to render Razor pages. Check that your website's `AppHost` is inheriting from `AppHostBase` and not `AppHostHttpListenerBase`.

# xcode - 为什么 Xcode 参数完成不按类型过滤建议？

> ID：15389577
> 
> 赞同：1
> 
> 时间：2013-03-13T15:30:38.063
> 
> 标签：xcode, code-completion

假设我有以下代码：

```
- (void) handlePanGesture: (UIPanGestureRecognizer*) sender
{
    CGPoint foo = [sender translationInView:XXX];
} 
```

现在，当我将光标放在标记为的点`XXX`并按下`Esc`以获取完成建议列表时，Xcode 会愉快地建议所有合理的符号，无论其类型如何（包括`NSArray*`、`CGSize`，甚至`SEL`）。既然 Xcode 大概有足够的信息来了解参数类型，为什么不将建议过滤到仅与 兼容的那些`UIView*`？

# c++ - [](){} 构造在 C++ 中是什么意思？

> ID：15389579
> 
> 赞同：0
> 
> 时间：2013-03-13T15:30:40.890
> 
> 标签：c++, boost, syntax, foreach

我有这个代码。

```
boost::for_each(
    boost::make_iterator_range(
            func(arg1),
            func(arg2)
        ),
        [&d, &f](const a<b>& c)
        {
            something;
        }
); 
```

我理解代码的迭代器部分。我不清楚的是我们迭代的内容。这个结构是什么意思？`[](){}`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T15:33:48.090

这是一个`lambda-expression`匿名方法/函数。如果没有理由定义不同的函数，您可以内联提供它。 `[]`通过值`[]`或引用绑定本地参数`[&]`。在`()`您传递您的值时，就像在函数调用中一样，并`{}`包含函数体。

见[这里](http://www.cprogramming.com/c++11/c++11-lambda-closures.html)。

# excel - VBA-Excel 代码中的 Erf() 在 Excel 2003 中不起作用

> ID：15389586
> 
> 赞同：1
> 
> 时间：2013-03-13T15:30:54.983
> 
> 标签：excel, add-in, vba

我需要在我的 VBA Excel 程序中计算误差函数 Erf()。我已经实现了类似的东西：

```
aux_A = -Application.WorksheetFunction.Erf(p) 
```

以前，在 Excel 2007 中，我安装了 Analysis Toolpak 插件，它运行良好，但在 Excel 2003 中它不起作用（并且也安装了插件）。

**有什么问题？**

*（请注意，我想在 VBA 代码中使用结果，而不是在 Excel 工作表中）。*

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T16:28:33.103

在 Excel 2007 之前，Erf 位于分析工具包中，因此您必须直接调用函数（没有`WorksheetFunction`部件）

```
aux_A = -Erf(p) 
```

从 Excel 2007 开始，它们将许多函数移入 WorksheetFunction 库，这就是您现在必须使用`WorksheetFunction.Erf(p)`.

在 VBA 编辑器中，按 F2 并搜索 Erf。您将看到 2007 年之前和之后的版本中的库和类是不同的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T16:37:41.777

1.  在加载项（工具->加载项）中添加“分析工具包-VBA”
2.  在 VBA 项目编辑器中添加对**atpvbaen.xla的引用（工具 -> 参考）**
3.  尝试：

    n = Erf(0.5)

为我工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T16:18:32.127

Erf函数不带2个参数（上限、下限）吗？

# modernizr - Modernizr 加载方法

> ID：15389589
> 
> 赞同：0
> 
> 时间：2013-03-13T15:31:03.300
> 
> 标签：modernizr

我对谷歌托管 jQuery 的引用似乎想以某种方式加载为图像：

![在此处输入图像描述](../Images/11e09a3e04aa2f1144a2ed3cda425447.png)

另外，modernizr 是如何加载 ga.js、plugins.js 和 main.js 的？以及如何防止它加载本地版本的 jQuery？

这是我的两个脚本标签：

```
<script src="js/vendor/modernizr-2.6.2.min.js"></script>
<script type="text/javascript">Modernizr.load(['//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js', 'js/less.js']);</script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T16:05:36.057

看看您是否有任何运气来加载 jquery 和更少的脚本：

```
<script>
Modernizr.load({
load: [ 
"//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js", 
"js/less.js"
]
});
</script> 
```

**更新**

> 另外，modernizr 是如何加载 ga.js、plugins.js 和 main.js 的？以及如何防止它加载本地版本的 jQuery？

如果我正确阅读了您的问题，那么目前modernizr 没有加载ga.js、plugins.js 或main.js。您要么需要将它们添加到上述加载脚本，要么使用另一个脚本标签引用它们。对于本地版本的 jQuery 也是如此。

祝你好运！

# vb.net - 如何执行从 DOM 加载的 javascript

> ID：15389593
> 
> 赞同：1
> 
> 时间：2013-03-13T15:31:13.257
> 
> 标签：vb.net, webbrowser-control, domdocument

我正在尝试在通过 DOMDocument 加载的 javascript 中执行一个函数。例如：

```
'on page load
Webbrowser1.navigate("a htmldocument with a div called mainDiv") 
```

然后后来：

```
mDoc = WebBrowser1.Document
Dim mainDiv As IHTMLDOMNode = mDoc.DomDocument.getElementById("mainDiv")
mainDiv.innerHTML = (IO.File.ReadAllText("a file with just a div and script"))
'File has no html, head and body tags 
```

所以现在我需要执行追溯加载到 mainDiv 中的脚本。我试过了：

```
Webbrowser1.Document.InvokeScript("onLoadScript") 
```

...但据我所知，此方法仅看到从导航事件加载的 DOM。我希望有一种通过访问 DOMDocument 来执行脚本的方法。任何帮助表示赞赏。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T15:39:04.257

您可以尝试动态注入一个调用您的动态脚本的脚本。这绕过了 .InvokeScript 函数

```
HtmlElement headtag = WebBrowser1.Document.GetElementsByTagName("head")[0];
HtmlElement scripttag = WebBrowser1.Document.CreateElement("script");
IHTMLScriptElement scriptelm = (IHTMLScriptElement)scripttag.DomElement;
scriptelm.text = "onLoadScript();";
headtag.AppendChild(scripttag); 
```

# jquery - 当我们在页面某处出现错误时，jquery 无法正常工作

> ID：15389599
> 
> 赞同：1
> 
> 时间：2013-03-13T15:31:27.003
> 
> 标签：jquery, html

我有 3 页，

一页是主页，另外两页，（弹出页面），

在主页（第 1 页）中，我正在编写 jquery 参考

```
<script type="text/javascript" src="../Scripts/jquery-1.7.1.js"></script>
    <script type="text/javascript" src="../Scripts/jquery-ui-1.8.20.js"></script> 
```

现在我正在使用**lightbox jquery popup**在弹出窗口中加载第二页（第 2 页） ，我没有在第二页中写任何 jquery 引用，就像我打开第三页时一样，

现在的问题是，如果我将 jquery ajax 函数写到第 3 页，并且如果在那里出现错误，第 2 页 Jquery 也会停止工作（例如：在第 -2 页中，如果我隐藏某些元素，文档准备就绪，它将停止工作）

为什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T15:33:58.957

如果它是一个全新的窗口，即：不是打开它的窗口的 DOM 的一部分，它将没有运行所需的脚本文件。

在您的“子”窗口的 HTML 中，包括对必要的 jquery 资产的引用

# javascript - 签名到未签名和反之亦然（算术）

> ID：15389608
> 
> 赞同：1
> 
> 时间：2013-03-13T15:31:43.380
> 
> 标签：javascript, jquery, c

如何将数字从无符号转换为有符号？

有符号：-32768 到 32767 无符号：0 到 65535

我正在用 JavaScript 解决问题。情况是我有一个数字，例如从 0 到 65535，我想将其转换为合理的有符号值。

例如：65535 应该变成 -1。

请不要使用任何与位相关的运算，而是使用算术运算。

我想这应该与语言无关，假设我们使用足够大的数据类型。

更新：根据答案进一步实施：

```
function convertWordToShort(ival) {
    if (isNaN(ival) === false) {
        if (ival > 32767) {
            ival = ival - 65536;
        }
    }
    return ival;
}
function convertShortToWord(ival) {
    if (isNaN(ival) === false) {
        if (ival < 0) {
            ival = ival + 65536;
        }
    }
    return ival;
}
function convertIntToDWord(ival) {
    if (isNaN(ival) === false) {
        if (ival < 0) {
            ival = ival + 4294967296;
        }
    }
    return ival;
}
function convertDWordToInt(ival) {
    if (isNaN(ival) === false) {
        if (ival > 2147483647) {
            ival = ival - 4294967296;
        }
    }
    return ival;
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-13T17:14:37.990

只需测试数字是否超过一半，然后减去模数。

```
if(x > 32767) {x = x - 65536;} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2020-06-17T01:38:44.020

如果您正在寻找与按位运算相关的答案，您可以尝试以下操作：

*   将类似于 16 位无符号整数（即 0 <= n <= 65535）的东西转换为 16 位有符号整数：

```
(number << 16) >> 16 
```

*   或者：

```
new Int16Array([number])[0] 
```

在这两种情况下，数字都是您的 16 位数字。

As a side note the reason the first solution works is because if you bit shift to the right 16 times, the most significant bit of your 16 bit number will actually become the most significant bit of the 32 bit JavaScript integer (so if the most significant bit was a 1, it'd make the number negative), and so when you shift it to the left 16 times it'd shift while keeping the standard 2s complement form and retain the value/sign it gained from being shifted to the right previously, see this Wikipedia article for more:
[https://en.m.wikipedia.org/wiki/Arithmetic_shift](https://en.m.wikipedia.org/wiki/Arithmetic_shift)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-03-25T10:03:10.063

函数签名（位，值）{返回值＆（1 <<（位 - 1））？价值 - (1 << 位) : 价值; }

签名（8，0xFF）；// 返回 -1

签名（16，0xFF）；// 返回 255

# sql - 从表中删除 a = b 和 b = a 的记录

> ID：15389609
> 
> 赞同：2
> 
> 时间：2013-03-13T15:31:44.073
> 
> 标签：sql, sql-server, sql-delete

我有一个包含两个字段 a 和 b 的表。有些记录在 a = b 和 b = a 的意义上是重复的。我想删除这些记录。

考虑一下：

```
declare @temp table (a int, b int)

insert into @temp values (1, 2)
insert into @temp values (3, 4)
insert into @temp values (4, 3)
insert into @temp values (5, 6)

--delete 3, 4 or 4, 3

select * from @temp

/*
a | b
--|--
1 | 2
3 | 4
5 | 6

or (I don't care which one)

a | b
--|--
1 | 2
4 | 3
5 | 6
*/ 
```

我怎样才能做到这一点？它需要支持 Microsoft SQL Server 2000 及更高版本。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-13T15:48:21.600

```
DELETE  x
FROM    TableName x
        INNER JOIN
        (
          SELECT  a.A, a.B
          FROM    tableName a
                  INNER JOIN tableName b
                      ON ((a.A = b.A AND a.b = b.b) OR
                          (a.A = b.B AND a.b = b.A)) AND 
                         a.a > b.a
        ) y ON x.A = y.A AND x.B = y.B 
```

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!3/0dacb/1)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T15:55:47.060

这是较新版本的 SQL Server 的解决方案

```
declare @temp table (a int, b int)

insert into @temp values (1, 2)
insert into @temp values (3, 4)
insert into @temp values (4, 3)
insert into @temp values (5, 6)
insert into @temp values (6, 5)
--delete 3, 4 or 4, 3

delete t3
--select * 
from 
(select t1.a, t1.b,rank() over (partition by t2.a +t2.b order by t1.a) as row_number from @temp t1
join @temp t2 on t2.a = t1.b and t2.b = t1.a)c
join @temp t3 on c.a =t3.a and c.b = t3.b
where c.row_number <>1

select * from @temp 
```

发布只是为了向正在搜索相同内容的其他人展示更新的语法。

# java - 如何在 WAR 中打包文档工件

> ID：15389611
> 
> 赞同：1
> 
> 时间：2013-03-13T15:31:45.070
> 
> 标签：java, web-applications, maven-3, war, enunciate

我已经集成了 maven-enunciate-plugin，以便它在构建期间生成文档并将其输出到目标目录下的 docs 目录。由于我是 Maven 新手，我想知道配置我的构建的理想方法是什么，以便它将 docs 目录打包到我构建的 WAR 工件中。目前它被留在WAR之外。谢谢，迈克

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T15:41:43.600

请看一下[这个](http://maven.apache.org/plugins/maven-war-plugin/examples/including-excluding-files-from-war.html)和[这个](https://stackoverflow.com/questions/5000351/adding-jar-libraries-into-jar-file)

```
<project>
  ...
  <build>
    <plugins>
      <plugin>
        <artifactId>maven-war-plugin</artifactId>
        <version>2.3</version>
        <configuration>
          <!--
            Exclude JCL and LOG4J since all logging should go through SLF4J.
            Note that we're excluding log4j-<version>.jar but keeping
            log4j-over-slf4j-<version>.jar
          -->
          <packagingExcludes>
            WEB-INF/lib/commons-logging-*.jar,
            %regex[WEB-INF/lib/log4j-(?!over-slf4j).*.jar]
          </packagingExcludes>                               
          <packagingIncludes>
            **/docs
          </packagingIncludes>
        </configuration>
      </plugin>
    </plugins>
  </build>
  ...
</project> 
```

# java - 在 java jTable 中显示 lucene 搜索结果

> ID：15389619
> 
> 赞同：1
> 
> 时间：2013-03-13T15:31:59.980
> 
> 标签：java, swing, netbeans, lucene, jtable

我正在构建一个 java 桌面应用程序，它使用 lucene 3.6.2 搜索引擎在 derby 数据库中搜索数据 java swing JTable 和 netbeans 用户在测试字段中输入搜索查询，搜索结果显示在 Jtable 和 defaulttablemodel 中。

我已经尝试过有关在 jTable 中显示数据库信息的教程。

但是这次我想要一个搜索字段和一个搜索按钮。找到匹配项后在搜索字段中输入一个字符串，然后将结果显示在 JTable 中

下面是代码片段

```
public class GNSSJFrame extends javax.swing.JFrame {
     String searchField;
     DBSearch dbs = new DBSearch();
     Vector<String> header = new Vector<>();;
     Vector<Vector<String>> tabledata = new Vector<>();;
     TableData td = new TableData();

  public GNSSJFrame() {         

        initComponents();
    }

        searchResultTable.setModel(new javax.swing.table.DefaultTableModel(
            tabledata, header
        ));
        searchResultTable.setAutoResizeMode(javax.swing.JTable.AUTO_RESIZE_OFF);
        jScrollPane1.setViewportView(searchResultTable);

        jLabel2.setFont(new java.awt.Font("Tahoma", 1, 12)); // NOI18N
        jLabel2.setText("        SEARCH RESULTS");

        private void searchButtonActionPerformed(java.awt.event.ActionEvent evt) {                                             
        try {

            searchField = searchTextField.getText();
            if(!searchField.isEmpty())
            {                
           tabledata = dbs.searchDatabase(searchField + "*");
             td.fillHeader();
            header = td.getHeader();
            }

        } catch (CorruptIndexException ex) {
            Logger.getLogger(GNSSJFrame.class.getName()).log(Level.SEVERE, null, ex);
        } catch (LockObtainFailedException ex) {
            Logger.getLogger(GNSSJFrame.class.getName()).log(Level.SEVERE, null, ex);
        } catch (IOException | ParseException ex) {
            Logger.getLogger(GNSSJFrame.class.getName()).log(Level.SEVERE, null, ex);
        }
    }                                            

    private void searchTextFieldActionPerformed(java.awt.event.ActionEvent evt) {                                                
        // TODO add your handling code here:
    }                                               

 Code for the lucene search engine

public class DBSearch {

    //Field Declarations 
    Version matchVersion = Version.LUCENE_36;
    String host  = "jdbc:derby://localhost:1527/NSS_DB";
     String uName = "staff";
     String uPass = "password";
     String qString;
     Statement stmt;
     ResultSet rs;
     Connection con;
     Document doc;
     Vector<Vector<String>> docVector;
      Document d;

    public DBSearch()
    {}

    public Vector<Vector<String>> searchDatabase( String qs) throws CorruptIndexException, LockObtainFailedException, IOException, ParseException
    {
        qString = qs;

        // create some index
        Directory index = new RAMDirectory();
        StandardAnalyzer analyzer = new StandardAnalyzer(matchVersion);
        IndexWriterConfig IWConfig = new IndexWriterConfig(Version.LUCENE_36, analyzer);
        IndexWriter iw = new IndexWriter(index,IWConfig) ;

           try {

      con = DriverManager.getConnection(host, uName, uPass);

    Statement stmt = con.createStatement(ResultSet.TYPE_SCROLL_SENSITIVE, ResultSet.CONCUR_UPDATABLE);
     String sql = "SELECT * FROM APP.REGISTRY";
        rs = stmt.executeQuery(sql);

         rs.beforeFirst();
         while(rs.next()) {
         doc = new Document();
         doc.add(new Field("subject",rs.getString("SUBJECT"),Field.Store.YES,Field.Index.ANALYZED));
         doc.add(new Field("letter_from",rs.getString("LETTER_FROM"),Field.Store.YES,Field.Index.ANALYZED));
       iw.addDocument(doc);
         }

       iw.close();
       stmt.close();
       rs.close();
    }                           
         catch(SQLException err)
         {System.out.println(err.getMessage());}

     //Oen the index 
           IndexReader ir = IndexReader.open(index);

           //create the searcher object
            IndexSearcher searcher = new IndexSearcher(ir);
            QueryParser queryParser = new MultiFieldQueryParser(Version.LUCENE_36,
                    new String[]{"subject","letter_from","remarks","office_dispatched_to"}, analyzer);
            Query query = queryParser.parse(qString);

            //Displaying the search results 
            TopDocs topDocs = searcher.search(query,10);
            ScoreDoc[] hits = topDocs.scoreDocs;
             System.out.println("Total hits "+topDocs.totalHits);

        for(int q = 0; q<7 ;q++)
        {
        Vector<String>  vn = new Vector<>();
        vn.add(d.get("subject"));
        vn.add("letter_from");
        vn.add("remark");
        vn.add("office_dispatched_to"); 
        }
            return docVector;  
}

public class TableData {

    private Vector<Vector<String>> matrix = new Vector<>();
    private Vector<String> header = header = new Vector<>();;

    public TableData()
    {   }

    public Vector<Vector<String>> getMatrix() {
        return matrix;
    }

    public void setMatrix(Vector<Vector<String>> matrix) {
        this.matrix = matrix;
    }

    public Vector<String> getHeader() {
        return header;
    }

    public void setHeader(Vector<String> header) {
        this.header = header;
    }

    public void fillHeader(){
        header.add(0,"ID");
        header.add(1,"SUBJECT");
        header.add(2,"LETTER DATE");
        header.add(3,"DATE RECEIED");
        header.add(4,"REMARKS");
        header.add(5,"DATE DISPATCHED");
        header.add(6,"DESTINATION OFFICE");
    }   
}

    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T19:15:59.270

看起来您正在`DefaultTableModel`使用合适的 构建匿名`Vector`，但您随后更新了`Vector`而不是`TableModel`自身。更新模型应该会导致表自行刷新。您可以从 获取对您的模型的引用`table.getModel()`，并且可以使用 更新它`model.setDataVector()`。扩展`AbstractTableModel`，如此处所示[，](https://stackoverflow.com/a/9134371/230513)可能是一种替代方法。

# python - Matlab 到 Python 的转换 - 无法分配给函数调用

> ID：15389622
> 
> 赞同：0
> 
> 时间：2013-03-13T15:32:04.983
> 
> 标签：python, function, matlab, call, assign

我最近一直在尝试将一段 Matlab 代码转换为 Python 代码。

我已经做出了我需要的大部分更改，但是我遇到的问题是它说的那一行：

```
y(index(m)) = 1-x(index(m)); 
```

我得到错误：

“无法分配给函数调用”

但是，我不确定如何对其进行重组以消除此错误。

我环顾四周，人们提到“获取项目”和“设置项目”，但是我尝试使用它们，但我无法让它们工作（可能是因为我无法弄清楚结构）

这是完整的代码：

```
import numpy

N = 100;
B = N+1;
M = 5e4;
burnin = M;
Niter = 20;
p = ones(B,Niter+1)/B;
hit = zeros(B,1);

for j in range(1,Niter):
    x = double(rand(1,N)>0.5);
    bin_x = 1+sum(x);
    index = ceil(N*rand(1,M+burnin));
    acceptval = rand(1,M+burnin);
    for m in range(1,M+burnin):
        y = x;
        y(index(m)) = 1-x(index(m));
        bin_y = 1+sum(y);

        alpha = min(1, p(bin_x,j)/p(bin_y,j) );
        if acceptval(m)<alpha:
            x = y; bin_x = bin_y;
        end

        if m > burnin: hit(bin_x) = hit(bin_x)+1; end
    end

    pnew = p[:,j];
    for b in range(1,B-1):
        if (hit(b+1)*hit(b) == 0):
            pnew(b+1) = pnew(b)*(p(b+1,j)/p(b,j));
        else:
            g(b,j) = hit(b+1)*hit(b) / (hit(b+1)+hit(b));
            g_hat(b) = g(b,j)/sum(g(b,arange(1,j)));
            pnew(b+1) = pnew(b)*(p(b+1,j)/p(b,j))+((hit(b+1)/hit(b))^g_hat(b));
        end
    end
    p[:,j+1] = pnew/sum(pnew);
    hit[:] = 0;
end 
```

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T15:38:41.327

圆括号`()`表示一个函数。对于索引，您需要`[]`方括号-但这只是许多错误中的第一个……我目前正在逐行检查，但这需要一段时间。

这段代码至少可以运行......你需要弄清楚索引是否符合你的预期，因为 Python 数组是从零开始索引的，而 Matlab 数组从 1 开始。我试图在几个地方解决这个问题，但没有t 逐行遍历 - 那是调试。

一些关键的学习：

*   没有`end`声明...只是停止缩进
*   导入库时，需要引用它（`numpy.zeros`, not `zeros`）
*   列表从零开始索引，而不是一
*   索引是用 完成的`[]`，而不是`()`
*   创建一个随机数数组是用 完成的`[random.random() for r in xrange(N)]`，而不是`random(N)`。
*   ...以及您在查看下面的代码时会发现的许多其他内容。

祝你好运！

```
import numpy
import random

N = int(100);
B = N+1;
M = 5e4;
burnin = M;
Niter = 20;
p = numpy.ones([B,Niter+1])/B;
hit = numpy.zeros([B,1]);
g = numpy.zeros([B, Niter]);
b_hat = numpy.zeros(B);

for j in range(1,Niter):
    x = [float(random.randint(0,1)>0.5) for r in xrange(N)];
    bin_x = 1+sum(x);
    index = [random.randint(0,N-1) for r in xrange(int(M+burnin))];
    #acceptval = rand(1,M+burnin);
    acceptval = [random.random() for r in xrange(int(M+burnin))];
    for m in range(1,int(M+burnin)):
        y = x;
        y[index[m]] = 1-x[index[m]];
        bin_y = 1+sum(y);

        alpha = min(1, p[bin_x,j]/p[bin_y,j] );
        if acceptval[m]<alpha:
            x = y; bin_x = bin_y;

        if m > burnin: 
            hit[bin_x] = hit[bin_x]+1;

    pnew = p[:,j];
    for b in range(1,B-1):
        if (hit[b+1]*hit[b] == 0):
            pnew[b+1] = pnew[b]*(p[b+1,j]/p[b,j]);
        else:
            g[b,j] = hit[b+1]*hit[b] / [hit[b+1]+hit[b]];
            g_hat[b] = g[b,j]/sum(g[b,numpy.arange(1,j)]);
            pnew[b+1] = pnew[b]*(p[b+1,j]/p[b,j])+((hit[b+1]/hit[b])^g_hat[b]);
    p[:,j+1] = pnew/sum(pnew);
    hit[:] = 0; 
```

# jquery - 演示不会循环

> ID：15389623
> 
> 赞同：0
> 
> 时间：2013-03-13T15:32:04.973
> 
> 标签：jquery, html, loops

我做了一个乒乓球游戏的小演示。这很简单，但它不想循环。我究竟做错了什么？

```
$(document).ready(function(){
move1();

function move1() {
    $('.pong.links').animate({ 'top': $('.pong_frame').position().top+20 }, 1200, "swing");
    $('.pong.rechts').animate({ 'top': $('.pong_frame').position().top+20 }, 1200, "swing");
    //$('.ball').animate({left: '+=150', top: '+=130'}, 600, "linear").animate({left: '+=110', top: '-=95'}, 600, "linear");
    $('.ball').animate({ 'top': $('.pong_frame').position().top+135, 'left': $('.pong_frame').position().left+180 }, 1200, "linear")
        .animate({ 'top': $('.pong_frame').position().top+30, 'left': $('.pong_frame').position().left+415 }, 1200, "linear");
    move2();
};
function move2() {
    $('.pong.links').animate({ 'top': $('.pong_frame').position().top+80 }, 500, "swing").delay(300)
                    .animate({ 'top': $('.pong_frame').position().top+20 }, 500, "swing");
    $('.pong.rechts').animate({ 'top': $('.pong_frame').position().top+20 }, 500, "swing").delay(700)
                    .animate({ 'top': $('.pong_frame').position().top+60 }, 500, "swing");
    $('.ball').animate({ 'top': $('.pong_frame').position().top+0, 'left': $('.pong_frame').position().left+280 }, 500, "linear")
        .animate({ 'top': $('.pong_frame').position().top+30, 'left': $('.pong_frame').position().left+0}, 1200, "linear");
    //$('.ball').animate({left: '-=90', top: '-=35'}, 600, "linear").animate({left: '-=170', top: '+=35'}, 1000, "linear");
    move3();
};
function move3() {
    $('.pong.links').animate({ 'top': $('.pong_frame').position().top+40 }, 500, "swing").delay(800)
                    .animate({ 'top': $('.pong_frame').position().top+20 }, 500, "swing");
    $('.pong.rechts').animate({ 'top': $('.pong_frame').position().top+40 }, 500, "swing").delay(300)
                     .animate({ 'top': $('.pong_frame').position().top+80 }, 500, "swing");
    $('.ball').animate({ 'top': $('.pong_frame').position().top+0, 'left': $('.pong_frame').position().left+50 }, 500, "linear")
              .animate({ 'top': $('.pong_frame').position().top+135, 'left': $('.pong_frame').position().left+280}, 1200, "linear")
              .animate({ 'top': $('.pong_frame').position().top+100, 'left': $('.pong_frame').position().left+415}, 1200, "linear");
    move4();
};
function move4() {
    $('.pong.links').animate({ 'top': $('.pong_frame').position().top+100 }, 500, "swing").delay(300)
                    .animate({ 'top': $('.pong_frame').position().top+0 }, 500, "swing");
    $('.pong.rechts').animate({ 'top': $('.pong_frame').position().top+40 }, 500, "swing").delay(300)
                     .animate({ 'top': $('.pong_frame').position().top+80 }, 500, "swing");
    $('.ball').animate({ 'top': $('.pong_frame').position().top+0, 'left': $('.pong_frame').position().left+0 }, 1500, "linear");
    move1();
};  

}); 
```

* * *

html:

```
 < div class="pong_frame">

 < div class="pong links"></div>

 < div class="pong rechts"></div>

< div class="ball"></div>

 < /div> 
```

CSS：

```
body, .pong_frame{padding:0;margin:0;}

.pong_frame{width:450px; height:150px; border:solid 1px #999; position:relative; overflow:hidden;}

.pong{width:8px; height:50px; background:#9cd1aa; position:absolute;}

.pong.links{left:0px; top:0px;}

.pong.rechts{right:0px; top:130px;}

.ball{width:15px; height:15px; background:#9cd1aa; border-radius:15px; margin-left:10px;  margin-right:10px; position:absolute; top:0px;} 
```

* * *

* * *

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T16:50:59.403

如果您执行一个函数并在完成时调用另一个函数......最后，再次调用第一个函数......

是的，您正在创建一个循环，但有一个大问题：

## **未捕获的 RangeError：超出最大调用堆栈大小**

这就是为什么你的动画不重复......因为内存溢出。

（如果确实如此.. 不建议使用 Max 调用堆栈警告来执行此操作）

* * *

如果要在函数之间运行循环，我建议使用**setInterval()**和**setTimeout()**方法。

从...开始：

```
var timeToLoop = '8600'; // set in how many miliseconds the animation will repeat
var inter=setInterval(move1,timeToLoop); // time to wait to start looping
move1(); // Start 
```

然后，在每个函数中减去最后一个......添加：

```
var t=setTimeout(function(){move2()},2400); // After 2.4 seconds, I will execute the next function 
```

工作示例：http: [//jsfiddle.net/tnTmE/1/](http://jsfiddle.net/tnTmE/1/)

# javascript - 通过 a-tag 中的 jquery 函数单击设置某些 div 的高度

> ID：15389628
> 
> 赞同：2
> 
> 时间：2013-03-13T15:32:15.893
> 
> 标签：javascript, jquery, html, function

当单击 div 内的按钮时，我想展开某个故事 div。

即：评论的概述仅显示评论的前几句话。单击按钮时，评论将扩展至全高。

```
<div id="overview">
<div class="story">
    <div class="naam">John Doe</div>
    <div class="plaats">Washington DC, USA</div>
    <p>
        Lorem ipsum dolor sit amet, consectetur adipiscing elit. Aliquam at accumsan augue. Curabitur ac tortor felis. Quisque fringilla est at neque congue commodo. Proin metus libero, condimentum sed viverra et, pulvinar eget nisi. Donec viverra arcu ut ante adipiscing laoreet. In non tellus leo. Suspendisse ultrices eros quis odio fermentum id commodo ligula tempus. Nunc tincidunt suscipit dolor, nec tempus quam mattis non. Sed dapibus odio nec nisl ultricies vel commodo dolor sagittis.
    </p>
    <a class="readMore" href="javascript:openStory();" title="Read more">Read more &rsaquo;</a>
</div>
<div class="story">
    <div class="naam">John Doe</div>
    <div class="plaats">Washington DC, USA</div>
    <p>
        Lorem ipsum dolor sit amet, consectetur adipiscing elit. Aliquam at accumsan augue. Curabitur ac tortor felis. Quisque fringilla est at neque congue commodo. Proin metus libero, condimentum sed viverra et, pulvinar eget nisi. Donec viverra arcu ut ante adipiscing laoreet. In non tellus leo. Suspendisse ultrices eros quis odio fermentum id commodo ligula tempus. Nunc tincidunt suscipit dolor, nec tempus quam mattis non. Sed dapibus odio nec nisl ultricies vel commodo dolor sagittis.
    </p>
    <a class="readMore" href="javascript:openStory();" title="Read more">Read more &rsaquo;</a>
</div>
</div> 
```

.story 的固定高度为 120 像素。我想用 openStory() 将它的高度设置为“自动”；功能。

```
function openStory(){
    this.parent('.story').css('height','auto');
} 
```

帮助表示赞赏

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T15:40:08.267

```
$('.readMore').click(function(event) { // Bind click event to all .readMore elements

  event.preventDefault(); // Prevent the default click action

  $(this) // Refers to the clicked .readMore element
    .parent() // Get parent element. Assuming it´s the .story element?
    .css('height', 'auto'); // set CSS rule. But why not use a CSS class?

}); 
```

..并替换`href="javascript:openStory();"`为`href="#"`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T16:23:08.107

最后使用它来打开/关闭div：

```
$('.review .story a.readMore').click(function(){
animatingElement = $(this).parent('.story');
if(animatingElement.hasClass('open')){
    animatingElement.removeClass('open');
} else {
    animatingElement.addClass('open');
}
}); 
```

直到 Stefan 提出了 toggleClass-function

```
$('.review .story a.readMore').click(function(){
animatingElement = $(this).parent('.story');
animatingElement.toggleClass('open');
}); 
```

这就是要走的路。

# c# - 在带有预览的纸质表单上打印

> ID：15389629
> 
> 赞同：3
> 
> 时间：2013-03-13T15:32:16.437
> 
> 标签：c#, wpf, mvvm, printing

我们有大量需要填写的纸质表格。手工做这个非常乏味，所以我们正在构建一个应用程序。它应该提供一个表格来填写数据，能够显示打印预览，在纸质表格上打印数据，并保留历史记录。

目前，我们有一个`FixedPage`这样打印的：

```
var dlg = new PrintDialog();
if (dlg.ShowDialog() == true)
{
    var doc = new FixedDocument();
    doc.DocumentPaginator.PageSize = new Size(11.69 * 96, 8.27 * 96); // A4 Landscape

    var fp = Application.LoadComponent(new Uri("/FixedPage.xaml", UriKind.Relative)) as FixedPage;
    fp.DataContext = this;
    fp.UpdateLayout();

    var pc = new PageContent();
    ((IAddChild)pc).AddChild(fp);
    doc.Pages.Add(pc);

    dlg.PrintTicket.PageOrientation = System.Printing.PageOrientation.Landscape;
    dlg.PrintDocument(doc.DocumentPaginator, string.Format("Form #{0}", FormNumber));
} 
```

对于打印预览，我们有一个自定义`UserControl`，背景是纸质表格的扫描图像，前景是数据。基本上，它是在重复`FixedPage`布局，这一切都让我们认为我们的设计存在缺陷。

有没有更好的方法来做我们想做的事？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T16:16:55.617

我的任务是同样的问题，并且想避免编写自己的模板系统来节省时间、单元测试和我的理智。

我最终写了一个混合体来做一些很酷的事情。首先，我使用 HTML 和 CSS 编写模板。在我们的营销部门进行细微调整时，这很容易做到并且具有很大的灵活性。

我用我自己的标签（例如 [code_type/]、[day_list]...[/day_list]）填充了模板，并用可以是单值或多值的标签字典替换了文本。

生成 html 后，我会使用我发现的一个 html 到 pdf 库，它使用开源 webkit 引擎来呈现和创建生成的 pdf。结果非常稳定，编写初始程序大约需要 2 周时间。每个人都非常高兴，测试变得轻而易举。

如果您想了解更多详细信息，请给我发送消息或回复此内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T00:40:27.903

我们设法找到了一个解决方案，它可以让我们丢弃一堆多余的代码。它仍然很丑：

```
public class CustomDocumentViewer : DocumentViewer
{
    public static readonly DependencyProperty BackgroundImageProperty =
        DependencyProperty.Register("BackgroundImage", typeof(Image), typeof(CustomDocumentViewer), new UIPropertyMetadata(null));

    public Image BackgroundImage
    {
        get { return GetValue(BackgroundImageProperty) as Image; }
        set { SetValue(BackgroundImageProperty, value); }
    }

    protected override void OnDocumentChanged()
    {
        (Document as FixedDocument).Pages[0].Child.Children.Insert(0, BackgroundImage);
        base.OnDocumentChanged();
    }

    protected override void OnPrintCommand()
    {
        var printDialog = new PrintDialog();
        if (printDialog.ShowDialog() == true)
        {
            (Document as FixedDocument).Pages[0].Child.Children.RemoveAt(0);
            printDialog.PrintDocument(Document.DocumentPaginator, "Test page");
            (Document as FixedDocument).Pages[0].Child.Children.Insert(0, BackgroundImage);
        }
    }
}

...

<local:CustomDocumentViewer x:Name="viewer" BackgroundImage="{StaticResource PaperFormImage}"/>

...

InitializeComponent();
viewer.Document = Application.LoadComponent(new Uri("/PaperFormDocument.xaml", UriKind.Relative)) as IDocumentPaginatorSource; 
```

我们使用`Application.LoadComponent`而不是绑定的原因是一个五年前的错误：[http ://connect.microsoft.com/VisualStudio/feedback/ViewFeedback.aspx?FeedbackID=293646](http://connect.microsoft.com/VisualStudio/feedback/ViewFeedback.aspx?FeedbackID=293646)

# c - 为 Atlas (os-x, macports) 制作动态库

> ID：15389632
> 
> 赞同：1
> 
> 时间：2013-03-13T15:32:23.757
> 
> 标签：c, macos, dll, gnu, gfortran

所以我正在尝试使用 macports 的 gnu4.7 在 osx 10.8.2 上编译 Atlas (BLAS+LAPACK)。作为记录，这是我使用的配置：

```
../path/to/configure --prefix=/opt/atlas \
--with-netlib-lapack-tarfile=/path/to/lapack-3.4.2.tgz \
--shared \
-b 64 \
-C acg gcc-mp-4.7 \
-C if gfortran-mp-4.7 
```

它一直持续到最后，甚至创建了静态库，但未能构建动态库：

```
libtool -dynamic -o ../libsatlas.dylib \
    -install_name /opt/atlas/lib/libsatlas.dylib -version-info 3.10.0 \
    -compatibility_version 3.10.0 *.o -lpthread -lm -L/opt/local/lib/gcc47/gcc/x86_64-    apple-darwin12/4.7.2/../../.. -lgfortran 
libtool: unrecognized option `-dynamic' 
```

这显然与 lib/Makefile 有关：

```
....
dylib:
rm -rf $(tmpd) ; mkdir $(tmpd)
cd $(tmpd) ; ar x ../liblapack.a 
cd $(tmpd) ; ar x ../libf77blas.a
cd $(tmpd) ; ar x ../libcblas.a 
cd $(tmpd) ; ar x ../libatlas.a
cd $(tmpd) ; $(LIBTOOL) -dynamic -o ../libsatlas.dylib \
    -install_name $(LIBINSTdir)/libsatlas.dylib -version-info $(VER) \
    -compatibility_version $(VER) *.o $(LIBS) $(F77SYSLIB)
rm -rf $(tmpd)
.... 
```

但是，我无法让它工作。我尝试添加“--mode=link”，但仍然失败。

如果有人可以提议修改 Atlas makefile，我将不胜感激。

p/s/ libtool 版本是：'libtool (GNU libtool) 2.4.2'

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T19:46:21.367

问题解决了。

用过的

```
/usr/bin/libtool 
```

而不是 gnu libtool，以及稍微修改了 make 文件：

```
cd $(tmpd) ; $(LIBTOOL) -dynamic -o ../libsatlas.dylib \
    -install_name $(LIBINSTdir)/libsatlas.dylib -current_version $(VER) \
    -compatibility_version $(VER) *.o $(LIBS) $(F77SYSLIB) 
```

这样就产生了动态库。

# awk - 如何使用 awk 解析具有多种记录类型的文件

> ID：15389634
> 
> 赞同：2
> 
> 时间：2013-03-13T15:32:27.593
> 
> 标签：awk, gawk

想要使用`awk`. 传入记录中的字段之一表示多种记录类型。当记录类型包含特定值时，我需要处理当前记录之后的 N 条附加记录，这些记录包含特定于该类型记录的数据。

这是可行的`awk`吗？

以下是传入文件格式的示例：

```
 1 [001:01.0] [ 2] IOCTL 048477589
...
...
28 [002:02.0] [ 2] TX(56)
        81480d0d 0a524141 435a5955 5705243  .H...RAACZYW RC
        43544848 41303033 32203034 3032325  CTHHA0032 04025
        332d4343 43432d2d 52435554 4848412  3-CCCC--RCETHHA 
```

因此，基本上，当找到 TX 类型记录时，读取处理数据的下 N 条记录，读取十六进制和 ASCII 等效项。

??

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T19:57:29.400

目前还不完全清楚你的目标是什么，但这里有一些可以作为一个开始的东西。`print`根据需要，将语句替换为更实质性的处理。

```
awk '
/^[ 0-9][0-9] / {
    # This is a record header line. Check if it is a TX.
    inTx = ($0 ~ / TX\([0-9]*\)$/);
    if (inTx) {
        print "Start of TX record.";
        next; # Avoid printing the header line below.
    }
}
inTx { print "TX:", $0; }
' file.txt 
```

这是一个更强大的示例文件，以使其更清楚脚本的作用：

```
 1 [001:01.0] [ 2] IOCTL 048477589
...
...
28 [002:02.0] [ 2] TX(56)
        81480d0d 0a524141 435a5955 5705243  .H...RAACZYW RC
        43544848 41303033 32203034 3032325  CTHHA0032 04025
        332d4343 43432d2d 52435554 4848412  3-CCCC--RCETHHA
 1 [001:01.0] [ 2] IOCTL 048477589
 2 [dsfsdsdf] [ 2] BLORT
29 [002:02.0] [ 2] TX(77)
        abbababa 0a524141 435a5955 5705243  STUFFSTUFFSTUFF
        43544848 bbbbbbbb 32203034 d0d0d0d  CTHULUCTHULUCTH
        332d4343 43432d2d cccccccc 4848412  BLORTZORCHFNORD
 1 [001:01.0] [ 2] IOCTL 048477589
 2 [dsfsdsdf] [ 2] BLORT 
```

运行脚本的成绩单：

```
Start of TX record.
TX:         81480d0d 0a524141 435a5955 5705243  .H...RAACZYW RC
TX:         43544848 41303033 32203034 3032325  CTHHA0032 04025
TX:         332d4343 43432d2d 52435554 4848412  3-CCCC--RCETHHA
Start of TX record.
TX:         abbababa 0a524141 435a5955 5705243  STUFFSTUFFSTUFF
TX:         43544848 bbbbbbbb 32203034 d0d0d0d  CTHULUCTHULUCTH
TX:         332d4343 43432d2d cccccccc 4848412  BLORTZORCHFNORD 
```

# performance - 当 UTC 毫秒存储为 bigint 时，postgresql 中的查询时间很慢

> ID：15389635
> 
> 赞同：0
> 
> 时间：2013-03-13T15:32:30.793
> 
> 标签：performance, postgresql, time, utc

由于价格因素，我们正在从时间序列数据库（ECHO 历史数据库）迁移到开源数据库。我们的选择是 PostgreSQL，因为没有开源时间序列数据库。我们过去在 ECHO 中存储的只是时间和价值对。现在问题来了。我在 postgre 中创建的表由 2 列组成。第一个是“bigint”类型，以UTC毫秒（13位数字）存储时间，第二个是数据类型设置为“真实”类型的值。我已经填写了大约 360 万行（分布在 30 天的时间范围内）的数据，当我查询一个小时间范围（比如 1 天）时，查询需要 4 秒，但对于 ECHO 中的相同时间范围，响应时间是 150 毫秒！这是一个巨大的差异。有一个 bigint 时间似乎是缓慢的原因，但不确定。您能否建议如何改进查询时间。我还阅读了有关使用数据类型“timestamp”和“timestamptz”的信息，看起来我们需要将日期和时间存储为常规格式，而不是 UTC 秒。这可以帮助加快我的查询时间吗？

这是我的表定义：

```
 Table "public. MFC2 Flow_LCL "
Column  |  Type  | Modifiers | Storage | Stats target | Description  
----------+--------+-----------+---------+--------------+-------------

 the_time | bigint |           | plain   |              |
 value    | real   |           | plain   |              |

Indexes:
"MFC2 Flow_LCL _time_idx" btree (the_time)

Has OIDs: no 
```

目前我以 UTC 毫秒为单位存储时间（使用 bigint）。这里的挑战是可能存在重复的时间值对。

这是我正在使用的查询（通过一个简单的 API 调用，它将传递表名、开始和结束时间）

```
PGresult *res;

int rec_count;
std::string sSQL;

sSQL.append("SELECT * FROM ");
sSQL.append(" \" ");
sSQL.append(table);
sSQL.append(" \" ");
sSQL.append(" WHERE");
sSQL.append(" time >= ");
CString sTime;
sTime.Format("%I64d",startTime);
sSQL.append(sTime);
sSQL.append(" AND time <= ");
CString eTime;
eTime.Format("%I64d",endTime);
sSQL.append(eTime);
sSQL.append(" ORDER BY time ");

res = PQexec(conn, sSQL.c_str()); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T16:21:37.100

你真的已经在计划[2038 年](http://en.wikipedia.org/wiki/Year_2038_problem)的问题了吗？为什么不像在标准 UNIX 中那样只使用 int 表示时间？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T17:58:25.943

您的时间序列数据库，如果它像我曾经检查过的竞争对手一样工作，它会按照“时间”列的顺序自动将数据存储在类似堆的结构中。Postgres*没有*。因此，您正在执行 O(n) 搜索 [n=表中的行数]：必须读取整个表以查找与您的时间过滤器匹配的行。时间戳上的主键（创建唯一索引），或者，如果时间戳不是唯一的，则常规索引将为您提供二进制 O(log n) 搜索单个记录并提高所有查询的性能，检索不到约 5%桌子。Postgres 将估计索引扫描或全表扫描更好的交叉点。

您可能还想`CLUSTER`（[PG Docs](http://www.postgresql.org/docs/9.2/interactive/sql-cluster.html)）该索引上的表。

另外，请遵循上面的建议，不要使用`time`或其他 SQL 保留字作为列名。即使它是合法的，它也是在自找麻烦。

[这作为评论会更好，但它太长了。]

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T18:05:01.407

```
SET search_path=tmp;

  -- -------------------------------------------
  -- create table and populate it with 10M rows
  -- -------------------------------------------
DROP SCHEMA tmp CASCADE;
CREATE SCHEMA tmp ;

SET search_path=tmp;

CREATE TABLE old_echo
        ( the_time timestamp NOT NULL PRIMARY KEY
        , payload DOUBLE PRECISION NOT NULL
        );

INSERT INTO old_echo (the_time, payload)
SELECT now() - (gs * interval '1 msec')
        , random()
FROM generate_series(1,10000000) gs
        ;

-- DELETE FROM old_echo WHERE random() < 0.8;

VACUUM ANALYZE old_echo;

SELECT MIN(the_time) AS first
        , MAX(the_time) AS last
        , (MAX(the_time) - MIN(the_time))::interval AS width
FROM old_echo
        ;

EXPLAIN ANALYZE
SELECT *
FROM old_echo  oe
JOIN (
        SELECT MIN(the_time) AS first
        , MAX(the_time) AS last
        , (MAX(the_time) - MIN(the_time))::interval AS width
        , ((MAX(the_time) - MIN(the_time))/2)::interval AS half
        FROM old_echo
        ) mima ON 1=1
WHERE oe.the_time >= mima.first + mima.half
AND  oe.the_time < mima.first + mima.half + '1 sec':: interval
        ; 
```

结果：

```
 QUERY PLAN                                                                                
-------------------------------------------------------------------------------------------------------------------------------------------------------------------------
 Nested Loop  (cost=0.06..59433.67 rows=1111124 width=64) (actual time=0.101..1.307 rows=1000 loops=1)
   ->  Result  (cost=0.06..0.07 rows=1 width=0) (actual time=0.049..0.050 rows=1 loops=1)
         InitPlan 1 (returns $0)
           ->  Limit  (cost=0.00..0.03 rows=1 width=8) (actual time=0.022..0.022 rows=1 loops=1)
                 ->  Index Scan using old_echo_pkey on old_echo  (cost=0.00..284873.62 rows=10000115 width=8) (actual time=0.021..0.021 rows=1 loops=1)
                       Index Cond: (the_time IS NOT NULL)
         InitPlan 2 (returns $1)
           ->  Limit  (cost=0.00..0.03 rows=1 width=8) (actual time=0.009..0.010 rows=1 loops=1)
                 ->  Index Scan Backward using old_echo_pkey on old_echo  (cost=0.00..284873.62 rows=10000115 width=8) (actual time=0.009..0.009 rows=1 loops=1)
                       Index Cond: (the_time IS NOT NULL)
   ->  Index Scan using old_echo_pkey on old_echo oe  (cost=0.01..34433.30 rows=1111124 width=16) (actual time=0.042..0.764 rows=1000 loops=1)
         Index Cond: ((the_time >= (($0) + ((($1 - $0) / 2::double precision)))) AND (the_time < ((($0) + ((($1 - $0) / 2::double precision))) + '00:00:01'::interval)))
 Total runtime: 1.504 ms
(13 rows) 
```

更新：由于时间戳似乎是非唯一的（顺便说一句：在这种情况下重复是什么*意思*？）我添加了一个额外的键列。一个丑陋的黑客，但它在这里工作。10M -80% 行的查询时间为 11ms。（行数达到 210/222067）：

```
CREATE TABLE old_echo
        ( the_time timestamp NOT NULL
        , the_seq SERIAL NOT NULL -- to catch the duplicate keys
        , payload DOUBLE PRECISION NOT NULL
        ,       PRIMARY KEY(the_time, the_seq)
        );

    -- Adding the random will cause some timestamps to be non-unique.
    -- (and others to be non-existent)
INSERT INTO old_echo (the_time, payload)
SELECT now() - ((gs+random()*1000::integer) * interval '1 msec')
        , random()
FROM generate_series(1,10000000) gs
        ;

DELETE FROM old_echo WHERE random() < 0.8; 
```

# java - 使用 selenium 或一些 java 库测试 AutoCAD 3D 图像

> ID：15389637
> 
> 赞同：-1
> 
> 时间：2013-03-13T15:32:35.410
> 
> 标签：java, selenium, 3d, automation, autocad

我的应用程序涉及 3D 和 2D 图表。我想使用 selenium web 驱动程序测试 3D/2D 图表（3d 模型中不同部分的比较、裁剪/颜色/隔离）。如果不合适，有人可以推荐一个最好的开源工具，它有助于设计我的自动化脚本来测试图像吗？它是基于 java 代码的，所以我熟悉 java.Or 是否有任何 JAVA API 来测试图像/裁剪/部分 3d 图像或模型？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T18:31:26.057

无论如何..我找到了解决这个问题的方法..我使用java脚本（从同一页面activex asp文件中获取的代码）来获取具有该activex对象状态值的“viewstate”xml文件。我已经对其进行了操作，现在，我可以对其进行操作了。我猜最好使用 activex 对象，因为 QTP 正在做同样的事情。最后但并非最不重要的一点是，必须选择 activex 所在的框架对象是嵌入的。那么只有我们才能成功运行该脚本。干杯！！

# c# - MVC4 使用自定义 AuthorizeAttribute 隐藏链接

> ID：15389641
> 
> 赞同：3
> 
> 时间：2013-03-13T15:32:37.590
> 
> 标签：c#, entity-framework-5

我已经研究了一段时间，现在试图弄清楚如何在我的视图中使用我的自定义 AuthorizeAttribute 类来显示和隐藏链接。我正在从 IsInRole 过渡到自定义 AuthorizeAttribute，因为我希望最终用户选择哪些组有权执行某些任务。到目前为止，我一直在使用：

```
 @{ if (HttpContext.Current.User.IsInRole("UserMgr"))
           { Html.ActionLink("Edit", "Edit", new { id = item.pkRecID }); }
        } 
```

其中 UserMgr 是域组。（这确实有效，但不是我需要做的）

然后我创建了一个自定义 AuthorizeAttribute 类：

```
 public class isAuthorized : AuthorizeAttribute
{
    public string Access { get; set; }

    protected override bool AuthorizeCore(HttpContextBase httpContext)
    {
        var authorized = base.AuthorizeCore(httpContext);

        string[] aszList = Access.Split(',');

        if (!authorized)
        {
            // The user is not authenticated
            return false;
        }

        var user = httpContext.User;
        if (user.IsInRole("Admin"))
            return true;

        var rd = httpContext.Request.RequestContext.RouteData;
        var id = rd.Values["id"] as string;
        if (string.IsNullOrEmpty(id))
        {
            // Now id was specified => we do not allow access
            return false;
        }

        foreach (string szGroup in aszList) // check to see if user is in group
        {
            if (user.IsInRole(szGroup))
            {
                return true;
            }
        }

        return false;
    } 
```

这在我的控制器中可以阻止对功能的访问，但是如何使用此功能隐藏视图中的链接？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T15:40:15.223

您可以创建一个扩展方法，因此您可以将其应用于 Cshtml 文件中的 MvcHtmlStrings 示例：

```
public static IHtmlString If(this IHtmlString value, bool evaluation)
{
    return evaluation ? value : MvcHtmlString.Empty;
} 
```

然后在您的 html 元素上，您可以像这样使用它：

```
@Html.ActionLink("Reports", "Index", "Report").If(User.IsInRole("SuperAdmin")) 
```

**更新**

脚步：

1.  在您的项目中创建一个新的静态类。

2.  将建议的扩展方法添加到新创建的类中。

3.  要使这个静态类在所有 cshtml 视图中可用，请转到位于 Views 文件夹中的 webconfig。

4.  再次注意，网络配置位于视图文件夹中，请勿编辑位于应用根目录的配置。

5.  就像下面的示例一样，添加静态类所在的命名空间。

    ```
    <system.web.webPages.razor>
      <host factoryType="System.Web.Mvc.MvcWebRazorHostFactory, System.Web.Mvc, Version=3.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" />
      <pages pageBaseType="System.Web.Mvc.WebViewPage">
      <namespaces>
        <add namespace="System.Web.Mvc" />
        <add namespace="System.Web.Mvc.Ajax" />
        <add namespace="System.Web.Mvc.Html" />
        <add namespace="System.Web.Routing" /> 
        <add namespace="YourApplication.Utils"/>  <!-- THIS IS THE EXAMPLE ON HOW TO INSERT THE NAMESPACE THAT CONTAINS YOUR STATIC CLASS --> 
        <add namespace="Microsoft.Web.Helpers"/>
      </namespaces>
      </pages>
    </system.web.webPages.razor> 
    ```

我不能更好地解释它。

# php - PHP：克隆 SQLite 数据库的最佳方法？

> ID：15389642
> 
> 赞同：0
> 
> 时间：2013-03-13T15:32:38.027
> 
> 标签：php, sqlite

我正在学习 SQLite（使用 PHP），来自 MySQL 背景。

我有一个大项目，我需要在数据库中存储巨大的 csv 文件，以实现快速搜索、索引等。应用程序一次只需要使用一个 csv，并且可能有数千个 csv 文件，所以我认为将所有数据放入一个数据库（MySQL）并不是一个好主意。这就是我现在正在寻找 SQLite 解决方案的原因。

现在我的问题是，您将如何每次使用 SQLite 复制数据库结构？

我是否需要一个空的“虚拟”数据库文件，每次上传新的 csv 文件时都要复制它？

或者生成数据库的脚本会更好吗？

而且，我将如何处理数据库模式的最终变化（在较新版本的软件中）？然后必须更改所有现有的数据库文件。

# android - getChildAt 返回 null

> ID：15389655
> 
> 赞同：0
> 
> 时间：2013-03-13T15:33:01.600
> 
> 标签：android, android-linearlayout

我有一个带有以编程方式添加子项的 LinearLayout：

```
for (int i = 0; i < answers.size(); i++) {
            final AnswerView answerView = new AnswerView(getContext(), i);
            addView(answerView);
} 
```

然后我试图访问随机孩子：

```
private void updateOpenAnswer() {
        new AsyncTask<Void, Void, Integer>() {

            @Override
            protected Integer doInBackground(Void... voids) {
                return API.getOpenAnswer();
            }

            @Override
            protected void onPostExecute(Integer answerIndex) {
                super.onPostExecute(answerIndex);

                Log.i(TAG, "Child count: " + getChildCount());

                if (answerIndex != -1) {
                    Log.i(TAG, "Open answer: " + answerIndex);
                    final AnswerView answerView = (AnswerView) getChildAt(answerIndex);
                    if (answerView != null) {
                        answerView.setAnswerOpen(true);
                    } else {
                        Log.e(TAG, "Null at " + answerIndex);
                    }
                }
            }
        }.executeOnExecutor(AsyncTask.THREAD_POOL_EXECUTOR);
    } 
```

updateOpenAnswer 在 runnable 中每秒调用一次。对于 updateOpenAnswer 的某些调用，getChildAt 返回 null 并且 getChildCount 返回 0！例如，2 和 3 为 null，0、1、4、5 为非 null。2 和 3 的观点确实存在，我看到了。为什么它返回null？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T15:35:01.210

> final AnswerView answerView = new AnswerView(getContext(), i);

最可能的问题是`getContext()`返回 null。尝试将其更改为

```
YourActivity.this // this also returns Context 
```

现在它应该可以工作了。

## 更新：

不要记住，这`getChildAt()`只会返回正在显示的位置的视图。因此，如果您正在滚动并想要获取不在“视图中”的子项，则将返回 null。

# javascript - css/html - 不透明布局

> ID：15389659
> 
> 赞同：0
> 
> 时间：2013-03-13T15:33:18.500
> 
> 标签：javascript, html, css

我正在创建我的投资组合，我画了一些布局，但现在我遇到了代码问题。正如您在图像上看到的那样。

可视化：

![在此处输入图像描述](../Images/559d57c0bdea23894756fad811c2031c.png)

*   黑色区域将是一张照片
*   白色区域将是正常的背景颜色/也许我会看到图像。全宽可缩放我想使用可缩放的背景图像，问题是我不知道如何解决链接问题（灰色字段）。因为我希望链接间隙从屏幕末尾开始并在白色背景之前结束（在边界处）。

我在考虑图像映射，但这不是一个好的解决方案......也许你有一个想法。

我发现了类似的问题（关于根据背景位置定位链接间隙 - 可缩放） -[链接在这里 - stackoverflow](https://stackoverflow.com/questions/5735479/position-and-or-scale-divs-according-to-scaling-background-image) 现在我遇到了与上述问题相同的问题 - 如果我不使用比例背景缩放，它就可以工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T15:47:23.650

这是一个棘手的布局.. 但是！（我假设全宽可缩放和固定纵横比）

因为您知道区域相交的角度是相同的。如果您将链接放在从上角开始的已知 y 轴百分比处，您将在 x 轴上具有固定的百分比。

然后，如果您选择全浏览器宽度，您可以对链接使用“位置：固定”（CSS）以及缩放和上/下/左/右（CSS）。否则，我相信您可以使用相同原理的相对定位。

希望这会让你上路！

# ruby-on-rails - 使用有效时跳过特定验证？在活动记录中

> ID：15389660
> 
> 赞同：2
> 
> 时间：2013-03-13T15:33:32.967
> 
> 标签：ruby-on-rails, activerecord

在我的`Post`模型中，我有几个属性验证`link`

```
 validates :link, url: true, uniqueness: true 
```

现在，在我的控制器中，我想调用：

```
@post = Post.new(link: "google.com")
@post.valid? 
```

我想检查链接是否格式正确，但要跳过唯一性测试。我该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T16:42:10.663

您可以检查该字段是否有错误：

```
@post.errors[:link].blank? 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-13T17:22:57.173

您可以`:if => :method_name`在验证上设置一个参数，这将导致该验证仅在方法中的条件为真时运行。把你的条件放在那个方法中。

例子：

```
validates :link, :uniqueness => true, :if => :validate_link_uniqueness? #Will only run if validate_link_uniqueness? returns true
validates :link, :url => true # Will always run

def validate_link_uniqueness?
  !new_record? # Insert the conditions that return true if uniqueness should be validated
end 
```

# php - PHP电子邮件表单不发送信息

> ID：15389661
> 
> 赞同：-2
> 
> 时间：2013-03-13T15:33:42.280
> 
> 标签：php

我从以前的供应商那里继承了一份电子邮件表格，在我们将它移到它的新服务器后，它开始出现故障。它应该做的是向填写它的用户发送一封验证电子邮件（这样做），然后发送一封电子邮件到warranty@mydomain.com 和密件抄送：另一个地址（它不再这样做）。尝试了一切，但我对 PHP 不是超级精通，主要是前端编码器，任何人都可以查看我的代码并告诉我为什么无法正确发送？

**PHP代码：**

```
<?php
header("location: http://www.anatomicglobal.com/warranty/regthanks.html");

$posting = array(
    'Name'      =>  $_POST['Name'],
    'Email'     =>  $_POST['Email'],
    'Phone'     =>  $_POST['Phone'],
    'Address'   =>  $_POST['Address'],
    'City'      =>  $_POST['City'],
    'State'     =>  $_POST['State'],
    'Province'  =>  $_POST['Province'],
    'Zip'       =>  $_POST['Zip'],
    'Product'   =>  $_POST['check'][0],
    'Size'      =>  $_POST['size'][0],
    'Mattress Model Name'   =>  $_POST['MattressModeName'],
    'Mattress Model Number' =>  $_POST['MattressModeNo'],
    'Serial Number' =>  $_POST['SerialNumber'],
    'Store Name'    =>  $_POST['StoreName'],
    'Purchase Month'=>  $_POST['Month'],
    'Purchase Day'  =>  $_POST['Day'],
    'Purchase Year' =>  $_POST['Year']
);

$decide = $_POST['decide'];

$subject  = 'Eco Memory Foam - Warranty Registration';
$to   = 'warranty@anatomicglobal.com';
$to   = $posting['Email'];

$headers  = 'MIME-Version: 1.0' . "\r\n";
$headers .= 'Content-type: text/html; charset=utf-8' . "\r\n";
$headers .= 'To: Anatomic Global <warranty@anatomicglobal.com>' . "\r\n";
$headers .= 'From: ecomemoryfoam.com <warranty@anatomicglobal.com>' . "\r\n";
$headers .= 'Reply-To: ' . $posting['Email'] . "\r\n";
$headers .= 'bcc: Hollyce Weber <hweber@anatomicglobal.com>' . "\r\n";

$message  = '<html>';
$message .= '<head><title>Eco Memory Foam - Warranty Registration</title></head><body>';
$message .= '<h1>Eco Memory Foam - Warranty Registration</h1>';
$message .= '<p><strong>Warranty Registration</strong> submission successful, please keep for your records.</p>
';
$message .= '<p>Below is the submitted information at: <strong>' . strftime("%B %d %Y - %H:%M:%S", time()) . '</strong></p>';
$message .= '<dl>';

foreach ($posting as $field => $value) {
$message .= '<dt>';
$message .= '<dd><b>' . $field . '</b>:&nbsp;&nbsp;' . $value . '</dd>';
$message .= '</dt>';
};

$message .= '<dt>Decide to Purchase This Product?</dt>';
$message .= '<dd>Customer Selected:<ul>';
foreach ($decide as $field => $value) {
$message .= '<li>' . $value . '</li>';
};
$message .= '</ul></dd>';

$message .= '</dl>';
/**$message .= '<p>You can reply to the submitter by replying to this email (if they gave you a valid email address).</p></body></html>';**/

mail($to, $subject, $message, $headers); 
```

## 几个小时之后....

感谢大家的帮助，但它仍然没有发送任何东西，新代码如下所示：

```
<?php

$posting = array(
    'Name'      =>  $_POST['Name'],
    'Email'     =>  $_POST['Email'],
    'Phone'     =>  $_POST['Phone'],
    'Address'   =>  $_POST['Address'],
    'City'      =>  $_POST['City'],
    'State'     =>  $_POST['State'],
    'Province'  =>  $_POST['Province'],
    'Zip'       =>  $_POST['Zip'],
    'Product'   =>  $_POST['check'][0],
    'Size'      =>  $_POST['size'][0],
    'Mattress Model Name'   =>  $_POST['MattressModeName'],
    'Mattress Model Number' =>  $_POST['MattressModeNo'],
    'Serial Number' =>  $_POST['SerialNumber'],
    'Store Name'    =>  $_POST['StoreName'],
    'Purchase Month'=>  $_POST['Month'],
    'Purchase Day'  =>  $_POST['Day'],
    'Purchase Year' =>  $_POST['Year']
);

$decide = $_POST['decide'];

$subject  = 'Eco Memory Foam - Warranty Registration';
$to   = "warranty@anatomicglobal.com, {$posting['email']}";

$headers  = 'MIME-Version: 1.0' . "\r\n";
$headers .= 'Content-type: text/html; charset=utf-8' . "\r\n";
$headers .= 'To: Anatomic Global <warranty@anatomicglobal.com>' . "\r\n";
$headers .= 'From: ecomemoryfoam.com <warranty@anatomicglobal.com>' . "\r\n";
$headers .= 'Reply-To: ' . $posting['Email'] . "\r\n";
$headers .= 'bcc: Hollyce Weber <hweber@anatomicglobal.com>' . "\r\n";

$message  = '<html>';
$message .= '<head><title>Eco Memory Foam - Warranty Registration</title></head><body>';
$message .= '<h1>Eco Memory Foam - Warranty Registration</h1>';
$message .= '<p><strong>Warranty Registration</strong> submission successful, please keep for your records.</p>
';
$message .= '<p>Below is the submitted information at: <strong>' . strftime("%B %d %Y - %H:%M:%S", time()) . '</strong></p>';
$message .= '<dl>';

foreach ($posting as $field => $value) {
$message .= '<dt>';
$message .= '<dd><b>' . $field . '</b>:&nbsp;&nbsp;' . $value . '</dd>';
$message .= '</dt>';
};

$message .= '<dt>Decide to Purchase This Product?</dt>';
$message .= '<dd>Customer Selected:<ul>';
foreach ($decide as $field => $value) {
$message .= '<li>' . $value . '</li>';
};
$message .= '</ul></dd>';

$message .= '</dl>';
/**$message .= '<p>You can reply to the submitter by replying to this email (if they gave you a valid email address).</p></body></html>';**/

mail($to, $subject, $message, $headers);

header("location: http://www.anatomicglobal.com/warranty/regthanks.html"); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T15:39:14.630

放

```
header("location: http://www.anatomicglobal.com/warranty/regthanks.html"); 
```

在最后...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T16:05:15.057

在您的代码中，您拥有它，因此它只会将电子邮件发送到一个地址。在这里你正在建立你的`to`地址：

```
$to   = 'warranty@domain.com';
$to   = $posting['Email']; 
```

如果您注意到，您将地址设置为您的地址，然后用发布的电子邮件覆盖它。然后您继续将其通过电子邮件发送到一个地址

```
mail($to, $subject, $message, $headers); 
```

您需要这样构建地址：

```
$to = "warranty@domain.com, {$posting['email']}"; 
```

这将具有以下值：

```
"warranty@domain.com, other@domain.com" 
```

# android - 为什么 Android 会截断我的 ActionBar 标题？

> ID：15389663
> 
> 赞同：14
> 
> 时间：2013-03-13T15:33:42.083
> 
> 标签：android, android-actionbar

在我的应用程序中，我从显示的每个片段更改了 ActionBar 中的标题。当我第一次启动我的应用程序时，我得到了一个请求列表，所以我的标题是“我的请求 (20)”。

然后，当您单击该列表中的一个项目时，它正在替换我的 Activity 中的一个片段，并将标题设置为“Action”。

当我回到第一个视图（总是在同一个活动中）时，我将标题重置为“我的请求（20）”，但 android 决定截断它。所以结果是“我的请求......”。

经过多次测试，当我在其中放入较小的文本时，Android 似乎正在缩小我的标题。但是当我放一个较长的文本时它并没有放大它，即使有足够的空间。

我能做些什么来解决这个问题？我想要一个比在短标题末尾添加空格更好的解决方案:)

这是我用来更改 ActionBar 标题的代码：

```
getActivity().getActionBar().setTitle(title); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-09-05T22:43:28.457

我知道这个问题是很久以前发布的，但我最近遇到了这个问题，它引起了极大的头痛。我正在开发 Galaxy Note 10.1，我的标题是“BidItems”，而我只看到了动作溢出项目，但有时，“BidItems”变成了“BidIt...”，这太荒谬了。经过大量测试，我发现我的应用程序中出现这种截断行为的原因是我正在使用`((MyActivity) getApplication()).setTitle();`我的一个片段中的方法调用一个方法。我的 Activity 中的`setTitle()`方法调用`getActionBar().setTitle()`. 一旦我调用了这个方法，我的标题就被无缘无故地截断了。但只需从我的活动中调用`setTitle()`就可以了。

我真的希望这可以减轻人们的头痛。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-05-14T07:09:19.980

我想这个问题可以通过刷新操作栏 UI 来解决。

所以我用下面的代码解决了。

```
ActionBar actionBar = getActivity().getActionBar();
actionBar.setTitle(title);

// for refreshing UI
actionBar.setDisplayHomeAsUpEnabled(false);
actionBar.setDisplayHomeAsUpEnabled(true); 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2017-01-14T02:56:13.143

在我的特殊情况下，我正在开发一个具有复杂原生菜单结构的混合应用程序。从混合内容调用深度链接时，我会间歇性地看到此问题，该链接将更新所选菜单选项并设置标题。

我尝试了几个建议的修复方法，但运气不佳。但是设置自定义视图产生了一个奇怪的结果，让我感觉我正在处理一个竞争条件。

事实证明这是真的。我发现只需覆盖活动的 setTitle 函数并将对 super 的调用包装在 postDelay 可运行文件中即可为我解决此问题：

```
@Override
public void setTitle(final CharSequence title) {
    toolBar.postDelayed(new Runnable() {
        @Override
        public void run() {
            MainActivity.super.setTitle(title);
        }
    }, 200);
} 
```

我使用工具栏的 postDelayed 作为一种方便的方法。但是你当然可以在这里使用处理程序。希望这可以帮助。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2016-09-26T23:09:24.093

put `setTitle()`in`onCreateOptionsMenu`帮助我解决了这个问题。

在您的片段`setHasOptionsMenu(true);`中添加`onCreateView(){}`

然后覆盖`onCreateOptionsMenu()`.

例子：

```
@Override
public void onCreateOptionsMenu(Menu menu, MenuInflater inflater) {
    super.onCreateOptionsMenu(menu, inflater);
    // put getActivity in onCreateOptionsMenu will not return null
    if (getActivity() != null) {
        getActivity().setTitle(getResources().getString(R.string.Studies));
    }
} 
```

参考：[如何在不发生截断的情况下显示 android actionbar 标题](https://stackoverflow.com/questions/15576224/how-to-display-android-actionbar-title-without-truncation-occurring)

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-07-02T13:44:15.520

[如本文所述，](https://stackoverflow.com/questions/8607707/how-to-set-a-custom-font-in-the-actionbar-title)我使用自定义标题解决了这个问题。

这是我用来在选项卡更改时更改标题的代码

```
((TextView) actionBar.getCustomView().findViewById(R.id.title)).setText(someTitle); 
```

请注意，当使用操作栏选项卡时，此解决方案将标题放置在横向模式下的选项卡右侧。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2016-02-26T22:57:06.590

在我的情况下，文本被截断但没有省略号（...），最后一个字符总是被截断，如下所示：

[![截屏](../Images/66afaaeb6f61e801b4633530c6d53fa5.png)](https://i.stack.imgur.com/SsbjJ.png)

我发现将工具栏宽度从“wrap_content”更改为“match_parent”可以解决问题：

```
 <android.support.v7.widget.Toolbar
        android:id="@+id/toolbar"
        android:layout_width="match_parent"
        android:layout_height="?attr/actionBarSize"
        android:layout_weight="1"
        android:background="?attr/colorPrimary"
        app:popupTheme="@style/AppTheme.PopupOverlay" /> 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-09-18T08:14:40.393

我要补充一点，您完全可以在 2 行上使用操作栏标题来获得更多空间：

```
//Set the title over 2 lines if needed:
    int titleId = Resources.getSystem()
            .getIdentifier("action_bar_title", "id", "android");
    if (titleId > 0) {
        TextView title = (TextView) findViewById(titleId);
        title.setSingleLine(false);
        title.setMaxLines(2);
        //          title.setTextSize(TypedValue.COMPLEX_UNIT_DIP, 16);
    } 
```

我在我的应用程序上使用它，我很满意 :)

归功于这篇[文章](https://stackoverflow.com/questions/11259311/action-bar-title-with-more-than-one-line)

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2014-06-06T19:18:57.717

您应该会发现我在这里发布的问题是类似的问题，并且我也发布了解决方案。

[为什么我的 Android ActionBar 在显式更改时不更新](https://stackoverflow.com/questions/24089136)

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2014-07-10T15:49:22.647

您的 AndroidManifest.xml 具有您的活动定义，如下所示

```
<activity
        android:name="com.example.DetailsView"
        android:label="Details">
</activity> 
```

如果您更改`android:label="Whatever"`为`android:label=" "`,

它会工作的。我假设发生这种情况是因为 android 创建了一个 TextView 来显示标签，并且在调用 setTitle 时宽度没有重新调整大小。因此，通过将初始标题设置为具有比您设置标题更多的字符，它不会被截断。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2017-08-20T04:37:03.493

因为ListView/GridView/RecyclerView同时调用notifyDataSetChanged()。由于某种原因，这会导致布局更新，我猜这会导致操作栏标题的布局更新混乱。

基本上，你可以 postDelay() 来更新标题来解决这个问题，但我不喜欢这种方式。

我决定重写 BaseAdapter.notifyDateSetChanged() 并手动更新项目视图。有用：

```
public abstract class BaseListAdapter<BEAN extends Unique, VH extends BaseListViewHolder<BEAN>> extends BaseAdapter {
    // data
    private List<BEAN> mList;
    // view holder
    private List<VH> mViewHolderList = new ArrayList<>();

    protected abstract void onBindViewHolder(VH holder, int position);

    protected abstract VH onCreateViewHolder(ViewGroup parent, int viewType);

    ...

    @Override
    public View getView(int position, View convertView, ViewGroup parent) {
        VH viewHolder;
        if (convertView == null) {
            viewHolder = onCreateViewHolder(parent, getItemViewType(position));
            convertView = viewHolder.itemView;
            convertView.setTag(viewHolder);
            mViewHolderList.add(viewHolder);
        } else {
            //noinspection unchecked
            viewHolder = (VH) convertView.getTag();
        }

        viewHolder.setData(getItem(position));
        viewHolder.setPosition(position);
        onBindViewHolder(viewHolder, position);

        return convertView;
    }

    @Override
    public void notifyDataSetChanged() {
        if (mViewHolderList.size() == 0) {
            super.notifyDataSetChanged();
        } else {
            for (VH vh : mViewHolderList) {
                onBindViewHolder(vh, vh.getPosition());
            }
        }
    }

}

public class BaseListViewHolder<T> {
    public View itemView;
    private T data;

    private int position;

    public BaseListViewHolder(View itemView) {
        this.itemView = itemView;
    }

    @Override
    public T getData() {
        return data;
    }

    @Override
    public void setData(T data) {
        this.data = data;
    }

    public int getPosition() {
        return position;
    }

    public void setPosition(int position) {
        this.position = position;
    }
} 
```

对不起，我的英语不好。

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2019-10-18T16:37:26.167

2013年的一个问题，仍然是一件事。

好吧，对于那些偶尔看到这种情况仍然感到震惊的人，即使你很高兴地使用 Androidx、所有最近的工件等。我找到了修复它的东西，它不需要自定义标题或任何特殊的东西。

请记住，这*可能不是您的情况*，但它似乎在瞬间神奇地解决了这个问题。

就*我*而言，`Toolbar`, 像往常一样设置`supportActionBar`，它包含在`CoordinatorLayout`+`AppBar`中。起初我会责怪那些，因为为什么不这样做，但在这样做之前，我决定检查工具栏的源代码并调试正在发生的事情。

我不知道（但我确实找到了导致此省略号的代码）：

```
/**
 * Set the title of this toolbar.
 *
 * <p>A title should be used as the anchor for a section of content. It should
 * describe or name the content being viewed.</p>
 *
 * @param title Title to set
 */
public void setTitle(CharSequence title) {
    if (!TextUtils.isEmpty(title)) {
        if (mTitleTextView == null) {
            final Context context = getContext();
            mTitleTextView = new AppCompatTextView(context);
            mTitleTextView.setSingleLine();
            mTitleTextView.setEllipsize(TextUtils.TruncateAt.END);
            if (mTitleTextAppearance != 0) {
                mTitleTextView.setTextAppearance(context, mTitleTextAppearance);
            }
            if (mTitleTextColor != null) {
                mTitleTextView.setTextColor(mTitleTextColor);
            }
        }
        if (!isChildOrHidden(mTitleTextView)) {
            addSystemView(mTitleTextView, true);
        }
    } else if (mTitleTextView != null && isChildOrHidden(mTitleTextView)) {
        removeView(mTitleTextView);
        mHiddenViews.remove(mTitleTextView);
    }
    if (mTitleTextView != null) {
        mTitleTextView.setText(title);
    }
    mTitleText = title;
} 
```

这直接来自最新的 Toolbar.java `appCompat 1.1.0`（最新的时间是 2019 年 10 月）。

没什么特别的，但是您可以看到，当 TitleTextView 首次创建时，它设置为 singleLine 并在 END... 处使用 Ellipsize...（或在 LTR 语言中正确）。

但是，我注意到，当我调用 setTitle 时，代码并没有这样想，大概是因为之前创建了 titleTextView（当时使用 Ellipsis 设置为 singleLine）；当我调用 setTitle 时，所有代码都在做`mTitleTextView.setText(title)`. 工具栏上没有多少`invalidate()`, `forceLayout()`,`requestLayout()`可以解决这个问题。

经过进一步检查，我注意到**我的布局**（协调器布局）包含在`RelativeLayout`.

视图层次结构看起来像：

```
<RelativeLayout>
   <CoordinatorLayout>
       <AppBarLayout>
          <androidx.appcompat.widget.Toolbar />
       </AppBarLayout>
       <androidx.viewpager2.widget.ViewPager2 />
       <com.google.android.material.bottomnavigation.BottomNavigationView />
   </CoordinatorLayout>
</RelativeLayout> 
```

我*从不*喜欢RelativeLayout，一开始我认为这是一个糟糕的设计，但自从我记得以来，它也面临着*各种问题，而且它在处理它的孩子方面非常糟糕。*

为了好玩，我决定：“如果我把这个 RelativeLayout 改成一个 ConstraintLayout 会怎样？”

我在 Android Studio 可视化编辑器的 RelativeLayout 中“右键单击”-> 转换为 ConstraintLayout，下一步，完成（没有触及默认值）。

现在看起来像这样：

```
<ConstraintLayout>
   <CoordinatorLayout>
       <AppBarLayout>
          <androidx.appcompat.widget.Toolbar />
       </AppBarLayout>
       <androidx.viewpager2.widget.ViewPager2 />
       <com.google.android.material.bottomnavigation.BottomNavigationView />
   </CoordinatorLayout>
</ConstraintLayout> 
```

相同，但 ROOT 不再是相对布局。

我对生成的 XML 进行了两次手动更改：

这是 CoordinatorLayout 在转换后的样子：

```
 <androidx.coordinatorlayout.widget.CoordinatorLayout
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        app:layout_constraintTop_toTopOf="parent"
        app:layout_constraintStart_toStartOf="parent"> 
```

它在预览中看起来不错，但它引起了我的注意，因为一个 _should not use `match_parent`in child of ConstraintLayout ...所以...我将其更改为：

```
 <androidx.coordinatorlayout.widget.CoordinatorLayout
        android:id="@+id/coordinatorLayout"
        android:layout_width="0dp"
        android:layout_height="0dp"
        app:layout_constraintBottom_toBottomOf="parent"
        app:layout_constraintEnd_toEndOf="parent"
        app:layout_constraintStart_toStartOf="parent"
        app:layout_constraintTop_toTopOf="parent"> 
```

这和我之前的完全一样（协调器布局占据了整个屏幕）。

这要归功于新的 ConstraintLayout 具有这些：

```
 android:layout_width="match_parent"
    android:layout_height="match_parent" 
```

这**神奇地**一劳永逸地解决了我被截断的标题。

### tl;博士

2019 年以后不要再使用 RelativeLayouts，从很多角度来看它们都是不好的。如果您的工具栏包含在相对布局中，请考虑迁移到 ConstraintLayout 或任何其他 ViewGroup。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2013-03-22T16:59:15.227

我认为您对此无能为力。似乎操作栏标题的宽度相当有限，并且任何超过它的东西都会被截断。

我想一种方法是显示：“我的请求（20）”而不是“我的请求（20）”，但我明白这并不理想。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2019-09-24T09:57:27.097

如果有人在 2 年后仍然对正确答案感兴趣，我最近也遇到了这个问题，并意识到原因是我从后台线程更新了标题。在 Kotlin 中使用`supportActionBar?.title = <abc>`.
由于某种原因，该应用程序没有像通常那样崩溃，但有一个例外是您正在触摸 UI 线程之外的视图。相反，它会设置新文本，但会跳过布局传递，从而导致文本换行。
所以要么使用`Activity.runOnUiThread`or`View.post`要么，当我像我一样使用协程时，使用`withContext(Dispatchers.Main)`来触发更新标题的代码。

# eclipse - 在 LyX 中保留 java eclipse 代码的格式

> ID：15389664
> 
> 赞同：0
> 
> 时间：2013-03-13T15:33:43.767
> 
> 标签：eclipse, lyx

有什么软件可以在**Eclipse**中使用，我可以将我的代码格式转换为**Lyx**格式吗？我正在使用 Java，并且**Lyx**中的默认格式与我预期的不一样，它说代码太长，所以它会在**Lyx**中引发异常。

# c# - 使用 System.Linq.Dynamic.DynamicExpression.ParseLambda 时出错

> ID：15389668
> 
> 赞同：2
> 
> 时间：2013-03-13T15:33:50.367
> 
> 标签：c#, lambda

我在尝试使用动态表达式解析构造的 Lambda 语句时遇到以下运行时错误。

> System.Linq.Dynamic.dll 中出现“System.Linq.Dynamic.ParseException”类型的异常，但未在用户代码中处理附加信息：“MessageText”类型中不存在属性或字段“t”

```
 public static void ApplyAttributeRules<T>(this EntityTypeConfiguration<T> entity) where T : BaseObject

// logic that determines the propertyName ....
var propLambda = // this line fails
   System.Linq.Dynamic.DynamicExpression.ParseLambda<T, String>("t=>t." + PropertyName); // 
```

类型 T 是 MessageText。我正在尝试构建 lambda 表达式

```
t=>t.PropName 
```

显然我不明白文档[http://www.lcs.syr.edu/faculty/fawcett/handouts/CoreTechnologies/CSharp/samples/CSharpSamples/LinqSamples/DynamicQuery/Dynamic%20Expressions.html](http://www.lcs.syr.edu/faculty/fawcett/handouts/CoreTechnologies/CSharp/samples/CSharpSamples/LinqSamples/DynamicQuery/Dynamic%20Expressions.html)

谁能解释我应该如何调用 ParseLambda。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T16:29:37.973

感谢 resharper 反编译源...

```
var propLambda = 
System.Linq.Dynamic.DynamicExpression.ParseLambda<T, String>("t=>t." + PropertyName); 
```

我找到了一个可行的选项。

```
var propLambda = 
System.Linq.Dynamic.DynamicExpression.ParseLambda<T, String>(PropertyName); 
```

The Identity x=>x. is added when only a property is supplied. Not sure I want to learn this API :-) But I do like the concept...

# c# - C# .NET 套接字连接问题 - 每个套接字地址通常只允许使用一次

> ID：15389670
> 
> 赞同：6
> 
> 时间：2013-03-13T15:33:52.643
> 
> 标签：c#, .net, windows-mobile, compact-framework

我有以下问题：

一旦我关闭我的 WM6 应用程序，然后尝试再次启动它，我就会收到此错误： **System.Net.Sockets.Socket.Bind(EndPoint localEP) 通常只允许使用每个套接字地址（协议/网络地址/端口）在 System.Net.Sockets.Socket.TcpListener.Start() ...**

我认为这是由于连接超时的时间间隔，所以我想关闭所有打开的连接并强制它创建一个新的连接，这是正确的方法还是有不同的方法来处理这个？

这是用于开始收听的代码：

```
/// <summary>
/// Listens Asynchronously to Clients, creates a recieveMessageHandler to process the read.
/// 
/// Check WIKI, TODOS
/// </summary>
/// <returns></returns>
public void Listen()
{
    myTcpListener.Start();

    while (true)
    {
        //blocks until a client has connected to the server
        try
        {
            TcpClient myTcpClient = myTcpListener.AcceptTcpClient();
            DateTime now = DateTime.Now;
            //Test if it's necessary to create a client
            ClientConnection client = new ClientConnection(myTcpClient, new byte[myTcpClient.ReceiveBufferSize]);

            // Capture the specific client and pass it to the receive handler
            client.NetworkStream.BeginRead(client.Data, 0, myTcpClient.ReceiveBufferSize, r => receiveMessageHandler(r, client), null);
        }
        catch (Exception excp)
        {
            Debug.WriteLine(excp.ToString());
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-13T15:46:41.000

是的，您的服务器套接字很可能处于 TIME_WAIT 状态。

您可以访问底层的[ServerSocket](http://msdn.microsoft.com/en-us/library/system.net.sockets.tcplistener.server%28v=vs.90%29.aspx)，然后使用[SetSocketOption](http://msdn.microsoft.com/en-us/library/system.net.sockets.socket.setsocketoption%28v=vs.90%29.aspx)并指定[ReuseAddress](http://msdn.microsoft.com/en-us/library/system.net.sockets.socketoptionname%28v=vs.90%29.aspx)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T16:39:37.590

我猜这里`ClientConnection`是你的 DLL，因为我看不到它已经包含在 CF 中。

[但是，如果您声明MethodInvoker](http://msdn.microsoft.com/en-us/library/system.windows.forms.methodinvoker%28v=vs.80%29.aspx)，您实际上并不需要它。

```
public delegate void MethodInvoker(); // required 
```

为了使您的代码真正流畅，您还应该创建自己的[EventArgs](http://msdn.microsoft.com/en-us/library/system.eventargs%28v=vs.80%29.aspx)类：

```
public class WmTcpEventArgs : EventArgs {

  private string data;

  public WmTcpEventArgs(string text) {
    data = text;
  }

  public string Data { get { return data; } }

} 
```

非常简单。有了这个新的**WmTcpEventArgs**类，您应该已经准备好接收可以发布到类似[TextBox](http://msdn.microsoft.com/en-us/library/system.windows.controls.textbox.aspx)控件的数据：

```
private void NetworkResponder(object sender, WmTcpEventArgs e) {
  textBox1.Text = e.Data;
} 
```

`while(true)`我更喜欢在代码中包含一个小布尔变量，而不是在代码中编码

```
private bool abortListener; 
```

代码看起来像这样：

```
public void Listen() {
  listener.Start();
  while (!abortListener) {
    try {
      using (var client = listener.AcceptTcpClient()) {
        int MAX = client.ReceiveBufferSize;
        var now = DateTime.Now;
        using (var stream = client.GetStream()) {
          Byte[] buffer = new Byte[MAX];
          int len = stream.Read(buffer, 0, MAX);
          if (0 < len) {
            string data = Encoding.UTF8.GetString(buffer, 0, len);
            MethodInvoker method = delegate { NetworkResponder(this, new WmTcpEventArgs(data)); };
            abortListener = ((form1 == null) || form1.IsDisposed);
            if (!abortListener) {
              form1.Invoke(method);
            }
          }
        }
      }
    } catch (Exception err) {
      Debug.WriteLine(err.Message);
    } finally {
      listener.Stop();
    }
  }
} 
```

请注意，您仍在捕获异常，但您也停止了[TcpListener](http://msdn.microsoft.com/en-us/library/system.net.sockets.tcplistener%28v=vs.80%29.aspx)。

# c# - 带有空值的“输入字符串格式不正确”

> ID：15389671
> 
> 赞同：0
> 
> 时间：2013-03-13T15:33:57.013
> 
> 标签：c#, winforms

我有一个带有按钮的表单，该按钮添加多个标签的值（用货币值填充）并在另一个标签中显示总和。

```
decimal[] totals = new decimal[11]; 

    private void calculate_Click(object sender, EventArgs e)
    {
        totals[0] = decimal.Parse(lblText1.Text, NumberStyles.Currency);
        totals[1] = decimal.Parse(lbltext2.Text, NumberStyles.Currency);
        lbltotal.Text = totals.Sum().ToString("C");
    } 
```

工作正常，直到一个为空并且我得到“输入字符串格式不正确”。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T15:36:00.303

1.  如果文本为空，请不要打扰
2.  使用十进制.TryParse

# jsp - jquery多个jsp选项卡

> ID：15389675
> 
> 赞同：1
> 
> 时间：2013-03-13T15:34:04.623
> 
> 标签：jsp, jquery

我是 jQuery 新手，我已经对网络进行了足够的研究，但似乎无法找到解决这个问题的方法。我有两个选项卡，每个选项卡都从不同的 JSP 加载。主 JSP（默认一个）包含所有脚本文件。但是当我从 JSP2 调用 jQuery 函数时，它们没有被触发。我的理解是，JSP2 没有这些函数的可见性。当我将所需的 jQuery 函数复制粘贴到 jsp2 上时，一切都按预期工作。但我不明白为什么我需要将脚本文件放在 2 个地方。每个 JSP 在独立运行时都按预期工作。

以下是来自代码 Main JSP 的一些片段：

```
<div id="tabs">
<ul>
<li><a href="#tabs-1">Tab one</a></li>
<li><a href="config.jsp" title="test">Tab two</a></li>
</ul>

<div id="tabs-1">
blah blah </div>
</div> 
```

查询：

```
$(document).ready(function() {

$('#tabs').tabs();
}

function updateGrid(){
url = "www.google.com";
jQuery("#logGrid").clearGridData();
cache : false,
$.post(url,
function(data) {
    if (data != null) {
         var mygrid = jQuery("#logGrid")[0];
         for (var i = 0; i < data.length; i++) {
             jQuery("#logGrid").addRowData(i, data[i]);
         }
  }
});
  }

  jQuery("#logGrid").jqGrid(
       {
          url : '',
          mtype : 'POST',
          datatype : "json",
          rownumbers : true,
          colNames: ["Logger Name","Logger Parent ", "Current Log Level", "Update Log Level To"],
          colModel: [
                       { name: 'loggerName', index: "loggerName", width: 215, editable: true},
                       { name: "loggerParent", index: "loggerParent", width: 100, editable: true },
                       { name: "loggerEffectiveLevel", index: "loggerEffectiveLevel", width: 100, editable: true},
                       { name: "changedLogLevel", index: "changedLogLevel", width: 35, editable: true, edittype:"select", editoptions:{value:"DEBUG:DEBUG;INFO:INFO;WARN:WARN;ERROR:ERROR;FATAL:FATAL"} }
                       ],
          autowidth: true,
          rownumWidth: 40,
          height : $(window).innerHeight(),
          viewrecords: true,
          caption:"Log4j Configuration Log Level",
          cellEdit: true,
          cellsubmit: 'clientArray',
          afterSaveCell: function (rowid, cellname, value) {

                    var targetLogLevel = jQuery('#logGrid').getCell(rowid, "changedLogLevel");
                    var targetLogger = jQuery('#logGrid').getCell(rowid, "loggerName");
                    updateLog(targetLogger, targetLogLevel);

  } 
```

});

JSP2 是

```
<script type="text/javascript">
  updateGrid();
</script>
<div id="test">
<form id="logGridForm">
    <table id="logGrid"></table>
</form>
 </div> 
```

我不想将脚本函数复制到每个 jsp 中。它使它变得多余并且看起来很乱。有没有办法解决它。我在这里做错了吗？

我已经编辑了我的问题以包含用于填充数据的 jqGrid。此处失败并出现此异常：消息：'this.p.rownumbers' is null or not an object URI: localhost:7001/imgRepository/js/jquery.jqGrid.min.js

当我将方法本地复制到 JSP2 中时，一切正常。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T16:03:53.673

放

```
 <script type="text/javascript">
  updateGrid();
</script>

in your first jsp, as jsp compiles at runtime. your second jsp can call that script from first page also. 
```

# java - AWT- update() 和paint() 方法的调用顺序是什么？

> ID：15389676
> 
> 赞同：0
> 
> 时间：2013-03-13T15:34:08.873
> 
> 标签：java, applet, awt

我正在阅读 Herbert Schildt 的 Java 2 5e。在关于 Applets 的章节中，他说，

> update() 的默认版本首先使用默认背景颜色填充小程序，然后调用paint()。

因此，当小程序使用以下代码启动（或调整大小）时，我会遇到闪烁：

```
import java.awt.*;
import java.applet.*;

public class awt_ extends Applet{
public void init() {
}

public void start() {
}

public void paint(Graphics g) {
    setBackground(Color.BLACK);
    setForeground(Color.white);
    g.drawString("this", 20, 20);
}

public void stop() {}
public void destroy() {}
} 
```

到目前为止，一切都很好。这本书和[这个页面](http://hepunx.rl.ac.uk/~adye/javatutorial/ui/drawing/update.html)建议覆盖`update()`并将绘画代码移动到`update()`. 该网站还提到，

> 实现paint() 的一种简单方法是简单地调用update()

所以我将我的代码修改为以下内容，期望不会发生闪烁，但它仍然存在！这是修改后的代码：

```
import java.awt.*;
import java.applet.*;

public class awt_ extends Applet{
public void init() {
}   

public void start() {
}

public void paint(Graphics g) {
    update(g);
}

public void update(Graphics g) {
    setBackground(Color.BLACK);
    setForeground(Color.white);
    g.drawString("this", 20, 20);
}
public void stop() {}
public void destroy() {} 
```

}

1）根据书，`update()`在之前被调用`paint()`。所以，我的重写`update()` *不应该*在调用之前清除背景`paint()`。但是，这不会发生在仍然观察到的闪烁中。

2）如果默认实现`update()`调用`paint()`，那么用后一种方法，为什么要`paint()`调用`update()`呢？

3) 调用这些函数的顺序和时间是什么？

我在这里想念什么？

# jquery - 带有连接的多个容器

> ID：15389677
> 
> 赞同：2
> 
> 时间：2013-03-13T15:34:26.510
> 
> 标签：jquery, jquery-ui, jquery-ui-sortable

我整个早上都在寻找答案，但找不到任何答案。我想要做的是有多个 div 容器，该 div 中有 2 个可排序。

看起来像...

```
<div>
    <ul>
        <li>first item</li>
        <li>second item</li>
        <li>third item</li>
        <li>fourth item</li>
        <li>fifth item</li>
    </ul>
    <br />
    <ul>
        <li>6th</li>
        <li>7th</li>
        <li>8th</li>
    </ul>
</div>
<div>
    <ul>
        <li>first item</li>
        <li>second item</li>
        <li>third item</li>
        <li>fourth item</li>
        <li>fifth item</li>
    </ul>
    <br />
    <ul>
        <li>6th</li>
        <li>7th</li>
        <li>8th</li>
    </ul>
</div> 
```

div 中的第二个 ul 将为空。他们会将他们的选择从第一个 ul 拖到它。但是他们不能从不同的容器中拖动选项。div 容器的数量也是动态的。我想知道这是否可以在 1 个脚本中完成，或者我将不得不做多个脚本......

提前感谢您的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T13:43:06.467

我想不出如何只构建一个脚本语句。所以我所做的是根据他们需要多少个选项来为每个选项打印出脚本来构建一个 php 循环。可能不是最好的方法，但我不知道如何制作 1 个脚本。

这是我使用的代码。

```
for ($x = 0; $x <= RANDOM AMOUNT; $x++){
        echo '$(function() {      
            $( ".sortable'.$x.'" ).sortable({
               containment: "#c'.$x.'",
               connectWith: ".sortable'.$x.'",update:function(e,ui){
                    if (this === ui.item.parent()[0]) {
                    var order = $("#myList'.$x.'").sortable("serialize");

                    }
               }
            })
        });';

    } 
```

希望这可以帮助某人或基于此的某人可以提出更好的解决方案。

# sql - SQL Server 查询返回太多记录

> ID：15389678
> 
> 赞同：1
> 
> 时间：2013-03-13T15:34:26.873
> 
> 标签：sql, sql-server, database, sql-server-2008

我的 SQL Server 数据库中有 3 个表。

如图所示，它们连接在一起（线连接到图片中的右行）

![ER模型](../Images/bed7a673db16a29714bb235cebe7102b.png)

我有一个查询，它应该返回所有的赔偿，`tblreparations`其中包含一些关于修复的信息，但它返回赔偿 3 次，对于客户（荷兰语中的 klant）分配给它的每台笔记本电脑一次，而赔偿表（荷兰语中的赔偿）`laptopID`每行仅包含一个

这是查询：

```
SELECT AankopenReparaties.Id, 
       AankopenReparaties.KlantenId, 
       AankopenReparaties.actietype, 
       AankopenReparaties.voorwerptype, 
       laptopscomputers.merk, 
       laptopscomputers.model, 
       laptopscomputers.info, 
       AankopenReparaties.info, 
       AankopenReparaties.Prijs, 
       AankopenReparaties.lopend 
FROM AankopenReparaties, laptopscomputers 
WHERE (aankopenreparaties.lopend = 'lopend'); 
```

它返回这个

![查询结果](../Images/d8e4de4a67d8f0e535d0303e64f45ffe.png)

它应该只有一行，因为赔偿表 (aankopenreparaties) 只包含一行，其中一行`laptopID`

有谁知道如何解决这一问题？

请帮忙，因为它应该很快就会修复（这是学校的作业）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-13T15:36:04.850

您返回太多记录的原因是您的查询产生了两个表的笛卡尔积。您需要告诉服务器这两个表是如何相互关联的。

```
SELECT  AankopenReparaties.Id,
        AankopenReparaties.KlantenId,
        AankopenReparaties.actietype,
        AankopenReparaties.voorwerptype,
        laptopscomputers.merk,
        laptopscomputers.model,
        laptopscomputers.info,
        AankopenReparaties.info,
        AankopenReparaties.Prijs,
        AankopenReparaties.lopend
FROM    AankopenReparaties
        INNER JOIN laptopscomputers
            ON AankopenReparaties.LaptopID = laptopscomputers.ID -- specify relationship
WHERE   aankopenreparaties.lopend = 'lopend' 
```

要进一步了解有关联接的更多信息，请访问以下链接：

*   [SQL 连接的可视化表示](http://www.codinghorror.com/blog/2007/10/a-visual-explanation-of-sql-joins.html)

* * *

*   [INNER JOIN ON vs WHERE 子句](https://stackoverflow.com/questions/1018822/inner-join-on-vs-where-clause)

# c# - 如何将正则表达式 match.Value 转换为整数？

> ID：15389685
> 
> 赞同：3
> 
> 时间：2013-03-13T15:34:41.767
> 
> 标签：c#, regex

```
List<int> ids = ExtractIds("United Kingdom (656) - Aberdeen (7707)"); 
```

上面的列表应该由下面的方法填充，该方法从括号内删除值。

如果我使用 match.Value 作为字符串并将其分配给 List< string > 它似乎可以正常工作。但是当我尝试将其转换为整数时，我收到错误消息：“输入字符串的格式不正确。”

我究竟做错了什么？

```
public List<int> ExtractIds(string str)
{
    MatchCollection matchCollection = Regex.Matches(str, @"\((.*?)\)");
    List<int> ExtractedIds = new List<int>();
    foreach (Match match in matchCollection)
    {
        int theid = int.Parse(match.Value);
        ExtractedIds.Add(theid);
    }

    return ExtractedIds;
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-13T15:36:53.970

使用`match.Groups[1].Value`而不是`match.Value`只获取括号内的字符串 - 即不包括括号本身。

使用`\d*?`而不是`.?*`确保您只匹配数字，而不是括号中的任何内容！

然后你甚至不再需要了，`?`因为`\d`不匹配右括号。

`Groups[1]`您可以在正则表达式中使用*lookarounds* ，而不是切换到lookin ，例如

```
(?<=\()\d(?=\)) 
```

确保`Match`只包含数字本身。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T16:23:48.927

如果你调试你的代码，你会得到 match.Value 包括数字周围的括号，这显然会抛出异常。

将您的模式重写为 @"(\d)+" 这会将您的号码分组但忽略括号。

```
public List<int> ExtractIds(string str)
{
     MatchCollection matchCollection = Regex.Matches(str, @"(\d)+");
     List<int> ExtractedIds = new List<int>();
     foreach (Match match in matchCollection)
     {
         int theid = int.Parse(match.Value);
         ExtractedIds.Add(theid);
      }
      return ExtractedIds;
 } 
```

希望这可以帮助。

# wiki - ScrewTurn Wiki 正面权限

> ID：15389689
> 
> 赞同：1
> 
> 时间：2013-03-13T15:34:51.673
> 
> 标签：wiki, screwturn

据我了解，Screwturn wiki 的权限风格本质上是负面的——如果用户是不同组的成员，则负面权限（拒绝访问）优先于正面权限（允许访问）。如果我有多个组，并且我想将某些页面或命名空间的访问权限限制为一个组，有没有办法在不明确拒绝访问所有其他组的情况下做到这一点？这会遇到问题，因为用户可能属于多个组。（我正在尝试将它用于企业环境中的知识库。）

# php - 跨数据库加入 PHP 中的 Doctrine

> ID：15389692
> 
> 赞同：2
> 
> 时间：2013-03-13T15:35:01.647
> 
> 标签：php, symfony, doctrine-orm, doctrine, multiple-databases

我在他们的博客上阅读了 Doctrine 中的跨数据库连接：http: [//www.doctrine-project.org/blog/cross-database-joins.html](http://www.doctrine-project.org/blog/cross-database-joins.html) 问题是每当表名包含一个点（用于指定数据库)，`doctrine:schema:update`输出`Nothing to update - your database is already in sync with the current entity metadata.`该命令基本上只是忽略表名包含点的实体。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T15:58:21.440

这是正常的，它是 ORM/DBAL 的限制。

使用[从当前连接中检索](https://github.com/doctrine/doctrine2/blob/2.3.2/lib/Doctrine/ORM/Tools/SchemaTool.php#L719-L744)[`Doctrine\ORM\Tools\SchemaTool`](https://github.com/doctrine/doctrine2/blob/2.3.2/lib/Doctrine/ORM/Tools/SchemaTool.php)的模式管理器。

[从当前连接的 db](https://github.com/doctrine/dbal/blob/2.3.2/lib/Doctrine/DBAL/Schema/AbstractSchemaManager.php#L820-L834)读取`Doctrine\DBAL\Schema\AbstractSchemaManager`表，而不是从所有数据库中读取。

因此，您必须手动处理放置在不同数据库中的表，或者使用您自己的模式管理器和您自己的`listTables`实现。

# iphone - 比较 2 个 UIImage 对象

> ID：15389693
> 
> 赞同：1
> 
> 时间：2013-03-13T15:35:02.287
> 
> 标签：iphone, ios, objective-c, uiimage, compare

我在*stackowerflow*上阅读了很多关于解决方案的问题和答案，但仍然找不到可以帮助解决我的问题的解决方案。

所以我有 2 个非常大的图像，我需要比较它们。

图像不是用创建的`imageNamed:`，所以它们没有兑现，所以`[image1 isEqual:image2]` 不应该工作。

据我了解，比较它们的唯一解决方案是这个：

```
- (BOOL)image:(UIImage *)image1 isEqualTo:(UIImage *)image2
{
    return [UIImagePNGRepresentation(image1) isEqual:UIImagePNGRepresentation(image2)];
} 
```

但是图像的尺寸非常大，因此需要一些时间来比较。

*是否有任何属性可以帮助不使用上述方法来检查它们是否相等？*

例如，我可以`image1.size`将其与 进行比较`image2.size`，如果它们不相等，我不需要运行上面的方法。有任何想法吗？谢谢你。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-13T15:41:28.953

如果您需要比较**像素相等**的图像，而不是**指针**，您可以这样做：

创建图像时，您可以为每个图像创建某种哈希值。例如，所有像素值的总和（也许，以某个巨大的数字为模；也许，由像素位置提供支持）。

然后，将该值存储在`NSDictionary[image] = hashValue`. 然后，当您比较图像时，首先比较它们的大小，如您所述，然后，如果它们相等，则比较它们从字典中的哈希值。

如果它们相等，则图像很可能相等，但您必须手动检查以 100% 确定。

手动检查可能需要一些时间，因此您可以通过发明自己的统计数据来降低碰撞概率（当不同的图像具有相同的哈希值时），例如 MORE HASHES、不同的模、哈希值、最左上像素的值（开玩笑，但是谁知道...）等等。

很明显，你拥有的统计数据越多，你得到的碰撞就越少。实验领域:)

否则，只需像这样比较它们的指针地址

```
if(image1 == image2) { 
     ...
} 
```

# python - django模型的远程访问

> ID：15389699
> 
> 赞同：2
> 
> 时间：2013-03-13T15:35:22.830
> 
> 标签：python, django, django-models

我有一个 django 1.5 项目，在 apache 服务器上运行的 mysql 上使用 django 模型。

```
class Person(models.Model):
    first_name = models.CharField(max_length=100)
    last_name = models.CharField(max_length=100)
    birthdate = models.DateField()

class Book(models.Model):
    name = models.CharField(max_length=100)
    author = models.ForeignKey(Person) 
```

我还有一个在必须使用这些模型的远程计算机上运行的 python/django 应用程序（使用 django 自定义命令）。

*   远程应用程序与服务器共享相同的模型定义
*   远程应用程序需要对模型进行只读访问
*   远程应用程序不能有服务器数据库的完整转储，因为服务器必须根据用户权限返回一个查询集
*   远程应用程序只能通过 http 连接到服务器
*   服务器可以通过 REST API (json) 公开模型

是否有任何自动方式通过 http 传输模型？我曾尝试使用 django.core.serializers 但我遇到了以下问题：

*   我无法序列化查询集中的相关对象
*   没有本地数据库，远程应用程序无法工作
*   远程应用程序在反序列化后搜索本地数据库上的相关对象（不存在）

编辑：

我设法序列化这样的模型：

```
books = Book.objects.prefetch_related('author').all()
authors = [book.author for book in books]
data = authors + list(books.all())
serialized_data = django.core.serializers.serialize("json", data) 
```

我的问题是远程应用程序在没有本地数据库的情况下无法反序列化。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T15:46:31.657

不要认为您需要通过 http 传输模型。只需要连接到服务器数据库。在远程应用程序设置中选择数据库引擎（在您的情况下为 mysql），名称。指定适当的用户和密码。并输入有效的主机和代理（如果需要）。您的数据库服务器正在运行的那个

至于用户。在服务器上创建一个对数据库具有只读权限的 mysql 用户。

这将使您能够为服务器和远程应用程序使用相同的数据库。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T11:34:07.823

最后我通过在客户端使用在 ram 上运行的 sqlite 解决了

在 settings.py 我使用了这个配置

```
DATABASES = {
    'default': {
        'ENGINE': 'django.db.backends.sqlite3',
        'NAME': ':memory:'
    }
} 
```

代码是这样的：

```
from django.db import connections
from django.core.management.color import no_style
from django.core import serializers
from apps.my_models import Book, Person

connection = connections['default']
cursor = connection.cursor()

sql, references = connection.creation.sql_create_model(Book, no_style(), set())
cursor.execute(sql[0])
sql, references = connection.creation.sql_create_model(Person, no_style(), set())
cursor.execute(sql[0])

serialized_data = get_serialized_data()
for obj in serializers.deserialize("json", serialized_data):
    obj.save()
books = Book.objects.prefetch_related('author').all() 
```

# haskell - 由于缺少实例，无法实例化类

> ID：15389701
> 
> 赞同：1
> 
> 时间：2013-03-13T15:35:29.567
> 
> 标签：haskell, typeclass

我有这个haskell代码。我已经创建了两种数据类型，然后我想创建一个`Mord`可以将函数与`Mlist`类型进行比较的新类。

```
import Data.List

data Mlist a = Mlist [a]

data Mordering = MLT deriving (Eq, Show)

s = Mlist [1, 2, 3]
t = Mlist [1, 4, 2, 3]

class Mord a where 
    mcompare :: a -> a -> Mordering

instance Mord a => Mord (Mlist a) where
    mcompare (Mlist xs) (Mlist ys) = MLT 
```

但如果我尝试`mcompare s t`我得到

```
<interactive>:1:1:
    No instance for (Mord Integer)
      arising from a use of `mcompare'
    Possible fix: add an instance declaration for (Mord Integer)
    In the expression: mcompare s t
    In an equation for `it': it = mcompare s t 
```

有没有人看到问题？

**编辑**：

这是我的新代码：

```
import Data.List

data Mlist a = Mlist [a]

data Mordering = MEQ | MIN deriving (Eq, Show)

s = Mlist [1, 2, 3]
t = Mlist [1, 4, 2, 3]

class Mord a where 
    mcompare :: a -> a -> Mordering

instance Mord (Mlist a) where
    mcompare (Mlist xs) (Mlist ys)
           | length xs == length ys && null (xs \\ ys) = MEQ
           | otherwise = MIN 
```

但我现在得到的错误是：

```
 No instance for (Eq a)
      arising from a use of `\\'
    In the first argument of `null', namely `(xs \\ ys)'
    In the second argument of `(&&)', namely `null (xs \\ ys)'
    In the expression: length xs == length ys && null (xs \\ ys)
Failed, modules loaded: none. 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-13T17:28:22.357

哈斯克尔读到：

```
instance Mord a => Mord (Mlist a) where
    mcompare (Mlist xs) (Mlist ys) = MLT 
```

意思是“对于每个`a`我有 的实例`Mord`，我也有 的`Mord`实例`Mlist a`。但是，如果我没有 的`Mord`实例`a`，那么我也没有 的`Mord`实例`Mlist a`。对不起，但让我们再出去玩有时间！”

实例声明的`Mord a`部分称为上下文；[您可以在A Gentle Introduction to Haskell](http://www.haskell.org/tutorial/classes.html)中阅读更多相关信息。

`[]`实例上下文对类型构造函数很有用，例如`Mlist`您的代码。例如，我们可以查看标准[`Eq`类](http://hackage.haskell.org/packages/archive/base/latest/doc/html/Prelude.html#t%3aEq)和它`[a]`的[实例](http://hackage.haskell.org/packages/archive/base/4.4.1.0/doc/html/src/GHC-Classes.html)：

```
instance (Eq a) => Eq [a] where
    []     == []     = True
    (x:xs) == (y:ys) = x == y && xs == ys
    _xs    == _ys    = False 
```

这个实例是什么意思？两个空列表相等；如果两个非空列表**的头部相等**且尾部相等，则它们相等；任何其他两个非空列表不相等；空列表和非空列表不相等。

我将上一段的部分加粗，因为它有助于回答“为什么实例上下文有用？”这个问题。嗯，在列表示例中，列表相等的定义一部分来自列表的结构，但另一部分是基于其元素的相等性。换句话说，除非您可以比较其元素是否相等，否则您无法比较列表是否相等。

函数是无法有意义地比较相等的值的经典示例。那么我们如何检查函数列表是否相等呢？

```
ghci> (+1) == (*2)
<interactive>:6:6:
    No instance for (Eq (a0 -> a0))
      arising from a use of `=='
    Possible fix: add an instance declaration for (Eq (a0 -> a0))
    In the expression: (+ 1) == (* 2)
    In an equation for `it': it = (+ 1) == (* 2)

ghci> [(+4)] == [\x -> 2 * x / 3]
<interactive>:8:8:
    No instance for (Eq (a0 -> a0))
      arising from a use of `=='
    Possible fix: add an instance declaration for (Eq (a0 -> a0))
    In the expression: [(+ 4)] == [\ x -> 2 * x / 3]
    In an equation for `it': it = [(+ 4)] == [\ x -> 2 * x / 3] 
```

因此，为了让您的代码正常工作，您可以删除未使用的实例上下文，或者您需要提供适当的底层实例，即：

```
instance Mord Int where
    mcompare ... = ...

s :: Mlist Int
s = Mlist [1, 2, 3]
t :: Mlist Int
t = Mlist [1, 4, 2, 3] 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-13T15:38:35.180

```
instance Mord a => Mord (Mlist a) where 
```

在这里你说那`Mlist a`是`Mord`当且仅当`a`的一个实例`Mord`。`Integer`不是 的实例`Mord`，因此`Mlist Integer`也不是 的实例`Mord`。如果你定义一个实例`Mord Integer`，你的代码就可以工作。

作为对您的编辑的回应：您的新代码不起作用，因为`\\`仅适用于可以比较相等性的值列表（即作为类型类实例的类型的值`Eq`）。由于您对实例没有`Eq`约束，因此您说它应该适用于所有类型，但由于`\\`不适用于所有类型，因此您不能这样做。`Eq`向您的实例（即）添加约束`instance (Eq a) => Mord (Mlist a) ...`将解决您的问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T21:00:42.470

我将放大一个特定点，其他答案已经涵盖了当前的问题。

假设您在目前获得的帮助下设法让一切正常工作，并且您已经启动了 GHCi 并加载了您的代码。让我们试一试：

```
ghci> mcompare s t
MLT
ghci> mcompare t s
MLT 
```

唔。这对我来说似乎不是很有用！这是怎么回事？

如果我们看看在`mcompare`给定两个`Mlist`s 时实际做了什么——准确地说，在这个实例声明中：

```
instance Mord a => Mord (Mlist a) where
    mcompare (Mlist xs) (Mlist ys) = MLT 
```

我们可以看到根本没有比较；不管是什么`xs`，`ys`都`mcompare`只是返回`MLT`。在某种程度上这是合乎逻辑的，因为`Mordering`数据类型只有一个值：

```
data Mordering = MLT deriving (Eq, Show) 
```

但是要表示比较操作的结果，您通常需要 3 个可能的结果：第一个参数小于、等于或大于第二个参数。您可能会争辩说还有一个“无与伦比”的选择，但我们不要在那里讨论！

因此，您希望您的`Mordering`数据类型包含这三个比较结果，您可以通过添加更多构造函数来做到这一点（这就是我在 sepp2k 答案的评论中所说的），如下所示：

```
data Mordering = LessThan 
               | EqualTo 
               | GreaterThan 
                   deriving (Eq,Show) 
```

（我猜你的意思是`data Mordering = MLT | MEQ | MGT deriving (Eq, Show)`也许？）

这会带来一系列新的问题，我会给你一些提示来帮助你。

* * *

首先，我们想要`mcompare 3 4`成为`LessThan`、`mcompare 5 5`成为`EqualTo`和`mcompare 7 6`成为`GreaterThan`，因为 3 小于 4（等等）。为此，您需要一个`Mord`for的实例`Integer`：

```
instance Mord Integer where
    mcompare x y
        | x <  y = ...
        | x == y = ...
        | x >  y = ... 
```

填空应该不会太难，我希望！

第二部分有点棘手：既然我们可以比较 type 的值，`a`我们如何比较 type 的值`Mlist a`？换句话说，声明*应该*`instance Mord a => Mord (Mlist a)`怎么写？will的结果`mcompare (Mlist xs) (Mlist ys)`取决于是否`xs`为空，是否`ys`为空，如果两者都不为空，取决于第一个元素如何比较`xs`和`ys`其余元素如何比较。

我会把它留给你弄清楚；不要犹豫，提出一个新问题，表明你走了多远，你被困在哪里！

# model-view-controller - 为什么 Symfony2 没有/喜欢模型？

> ID：15389706
> 
> 赞同：1
> 
> 时间：2013-03-13T15:35:49.393
> 
> 标签：model-view-controller, symfony, model

我一直在寻找 Symfony2 结构和捆绑包中的模型，但没有。

Symfony2 没有模型的原因是什么？

MVC 是错误的方式吗？

我只是好奇，因为我知道 CodeIgniter 实际上也不需要使用模型。在某些情况下，您可以将所有内容放在控制器甚至模型中；）。

有人可以更深入地解释一下吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-13T15:42:09.457

那是因为 Symfony2 的前身 Fabien Potencier 认为 Models 不属于 Symfony。这就是为什么他将其称为 HTTP 框架。另见他写的这篇文章：[“什么是 Symfony2？”](http://fabien.potencier.org/article/49/what-is-symfony2)

> [...] 你应该知道 Symfony2 实际上是为控制器部分、视图部分提供工具，而不是模型部分。您可以手动创建模型或使用任何其他工具，如 ORM。当然，像 Doctrine2 和 Propel 这样最著名的 ORM 存在紧密集成；但它们是可选的依赖项。Symfony2 的核心功能不会也永远不会依赖任何 ORM。

* * *

Doctrine2 ORM 使用存储库来接管将数据库映射到类的控制。如果您想在存储库中使用自定义方法，您可以[创建自己的存储库](http://symfony.com/doc/current/book/doctrine.html#custom-repository-classes)。这意味着可以将存储库视为一种模型。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-13T15:41:05.737

因为他们不想。

艰难的答案，但没有一成不变的编程方式。有许多不同的方法，如果你愿意，你可以选择遵循它们，但没有人在做你。在这种情况下，Symfony2 的开发人员决定不需要模型。

这并不意味着 MVC 是错误的。我拥有一辆轿车，但如果你拥有一辆 SUV，这是否意味着你做错了？只是完成工作的另一种方式。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-14T03:24:26.967

因为在正确的 MVC 中没有“模型”。模型是一层。就像表示层（包含控制器、视图和模板）一样。

相反，您应该寻找的是：服务、映射器和域对象。这些是模型层中比较常见的部分。

# logback - 滚动时使用 SizeAndTimeBasedFNATP 时未删除最旧的存档文件，并且最旧的间隔有多个存档文件

> ID：15389712
> 
> 赞同：1
> 
> 时间：2013-03-13T15:36:05.963
> 
> 标签：logback

maxHistory 参数的实现方式似乎存在问题。我在时间间隔内滚动多次（这里每分钟），创建以下文件：（maxHistory = 3）

*   trace.log（活动文件）
*   跟踪-2013-03-13-16.14.0.log.zip
*   跟踪-2013-03-13-16.13.0.log.zip
*   跟踪-2013-03-13-16.12.2.log.zip
*   trace-2013-03-13-16.12.1.log.zip
*   trace-2013-03-13-16.12.0.log.zip

下一次翻转发生，16.13.0.log.zip 文件被删除，而不是最旧的文件（12.{0,1,2}，正如我所预料的那样。这是预期的行为吗？

```
 public static Logger createTimeAndSizeRollingLogger(String fileBase, String maxSize, int maxHistory, String resolutionPattern) {
    LoggerContext loggerContext = (LoggerContext) LoggerFactory.getILoggerFactory();
    RollingFileAppender<ILoggingEvent> appender = new RollingFileAppender<ILoggingEvent>();
    appender.setContext(loggerContext);
    appender.setFile(fileBase + ".log");

    TimeBasedRollingPolicy<ILoggingEvent> timePolicy = new TimeBasedRollingPolicy<ILoggingEvent>();
    timePolicy.setFileNamePattern(fileBase + "_%d{" + resolutionPattern + "}-%i.log.zip");
    timePolicy.setContext(loggerContext);
    timePolicy.setMaxHistory(maxHistory);
    timePolicy.setParent(appender);
    appender.setRollingPolicy(timePolicy);

    SizeAndTimeBasedFNATP<ILoggingEvent> rollingPolicy = new SizeAndTimeBasedFNATP<ILoggingEvent>();
    rollingPolicy.setMaxFileSize(maxSize);
    rollingPolicy.setTimeBasedRollingPolicy(timePolicy);
    rollingPolicy.setContext(loggerContext);

    timePolicy.setTimeBasedFileNamingAndTriggeringPolicy(rollingPolicy);
    timePolicy.start();
    rollingPolicy.start();
    PatternLayoutEncoder encoder = new PatternLayoutEncoder();
    encoder.setContext(loggerContext);
    encoder.setPattern("%msg%n");
    encoder.start();

    appender.setEncoder(encoder);
    appender.start();

    Logger logger = loggerContext.getLogger(fileBase);
    logger.setLevel(Level.TRACE);
    logger.addAppender(appender);
    StatusPrinter.print(loggerContext);
    return logger;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T07:57:42.037

这似乎在最新的 1.1.0 SNAPSHOT [http://jira.qos.ch/browse/LOGBACK-162中得到修复](http://jira.qos.ch/browse/LOGBACK-162)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-11-20T14:54:41.127

这是一个已知的问题。MaxHistory 不适用于 SizeAndTimeBasedFNATP。你可以[在这里查看](http://jira.qos.ch/browse/LOGBACK-747?jql=text%20~%20%22SizeAndTimeBasedFNATP%22)

你会发现很多人说它解决了，但事实并非如此。如果你想修复它，你可以编辑位于 logback-core 中的 SizeAndTimeBasedFNATP.java。你可以[在这里](https://github.com/qos-ch/logback/blob/993b3ccd176b85f217473b897670d78090d4c7dc/logback-core/src/main/java/ch/qos/logback/core/rolling/SizeAndTimeBasedFNATP.java)看到它。在我看来，isTriggeringEvent 里面是添加代码的地方。

# google-maps-api-3 - GoogleMap 标记，标记上覆盖有图片

> ID：15389716
> 
> 赞同：1
> 
> 时间：2013-03-13T15:36:13.310
> 
> 标签：google-maps-api-3, google-maps-markers, jquery-gmap3

我正在编写一个显示您的朋友的 Googlemap 定位器系统，类似于 Apple 查找我的朋友所做的事情，但是该系统上的标记需要具有用户个人资料图像，如下图所示。

我正在使用[http://gmap3.net/en/catalog/10-overlays/marker-41](http://gmap3.net/en/catalog/10-overlays/marker-41) jQuery 插件进行集成，这实际上只是一种集成 googlemap 的简单方法，但具有 API 的所有功能。

我一直在阅读插件和 Google API 的文档，但是似乎无法确定我可以做到这一点的任何方法，我以前见过这种类型的功能，所以我确信它一定是可能的。任何有关我可以使用 gmap3 做到这一点的帮助将不胜感激。

提前致谢

![在此处输入图像描述](../Images/4b2c261264e5b8e742776c10e9d20b54.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T15:43:39.187

我发现我有一个解决方案，方法是使用后向指针的 shadow 属性和实际的个人资料图像的图标。如果这对其他人有帮助。

# active-directory - 为什么我对 objectGUID 的 Active Directory LDAP 查询很慢？

> ID：15389717
> 
> 赞同：2
> 
> 时间：2013-03-13T15:36:14.277
> 
> 标签：active-directory, ldap

我正在使用如下查询从 AD 中检索所有用户：

```
(&(objectClass=user)(objectCategory=person)) 
```

这需要很长时间（50k 用户需要 8 分钟）。

我试图通过在 objectGUID 上添加一个条件，将其拆分为 16 个并行查询，例如

```
(&(objectGUID>=\00)(objectGUID<=\10))
(&(objectGUID>=\10)(objectGUID<=\20)) 
```

等等。正如我凭经验得出的那样，此标准适用于第一个 GUID 组的最低字节。

尽管如此，所有并行运行的查询都与单个查询一样快。这是我的日志：

```
(&(objectGUID>=\00)(objectGUID<=\10)): Starting fetch 03/13/2013 15:12:52
(&(objectGUID>=\30)(objectGUID<=\40)): Starting fetch 03/13/2013 15:12:52
(&(objectGUID>=\10)(objectGUID<=\20)): Starting fetch 03/13/2013 15:12:52
(&(objectGUID>=\20)(objectGUID<=\30)): Starting fetch 03/13/2013 15:12:52
(&(objectGUID>=\40)(objectGUID<=\50)): Starting fetch 03/13/2013 15:12:52
(&(objectGUID>=\50)(objectGUID<=\60)): Starting fetch 03/13/2013 15:12:52
(&(objectGUID>=\60)(objectGUID<=\70)): Starting fetch 03/13/2013 15:12:52
(&(objectGUID>=\70)(objectGUID<=\80)): Starting fetch 03/13/2013 15:12:52
(&(objectGUID>=\80)(objectGUID<=\90)): Starting fetch 03/13/2013 15:12:52
(&(objectGUID>=\90)(objectGUID<=\A0)): Starting fetch 03/13/2013 15:12:53
(&(objectGUID>=\A0)(objectGUID<=\B0)): Starting fetch 03/13/2013 15:12:54
(&(objectGUID>=\B0)(objectGUID<=\C0)): Starting fetch 03/13/2013 15:12:55
(&(objectGUID>=\C0)(objectGUID<=\D0)): Starting fetch 03/13/2013 15:12:56
(&(objectGUID>=\D0)(objectGUID<=\E0)): Starting fetch 03/13/2013 15:12:57
(&(objectGUID>=\E0)(objectGUID<=\F0)): Starting fetch 03/13/2013 15:12:58
(objectGUID>=\F0): Starting fetch 03/13/2013 15:12:59
(&(objectGUID>=\00)(objectGUID<=\10)): Ended fetch 03/13/2013 15:13:25, 3327 results
(&(objectGUID>=\20)(objectGUID<=\30)): Ended fetch 03/13/2013 15:14:00, 3225 results
(&(objectGUID>=\40)(objectGUID<=\50)): Ended fetch 03/13/2013 15:14:29, 3209 results
(&(objectGUID>=\50)(objectGUID<=\60)): Ended fetch 03/13/2013 15:14:58, 3133 results
(&(objectGUID>=\30)(objectGUID<=\40)): Ended fetch 03/13/2013 15:15:25, 3179 results
(&(objectGUID>=\70)(objectGUID<=\80)): Ended fetch 03/13/2013 15:15:56, 3291 results
(&(objectGUID>=\10)(objectGUID<=\20)): Ended fetch 03/13/2013 15:16:24, 3200 results
(&(objectGUID>=\60)(objectGUID<=\70)): Ended fetch 03/13/2013 15:16:57, 3222 results
(&(objectGUID>=\80)(objectGUID<=\90)): Ended fetch 03/13/2013 15:17:26, 3227 results
(&(objectGUID>=\90)(objectGUID<=\A0)): Ended fetch 03/13/2013 15:17:54, 3084 results
(&(objectGUID>=\A0)(objectGUID<=\B0)): Ended fetch 03/13/2013 15:18:30, 3195 results
(&(objectGUID>=\B0)(objectGUID<=\C0)): Ended fetch 03/13/2013 15:19:06, 3208 results
(&(objectGUID>=\C0)(objectGUID<=\D0)): Ended fetch 03/13/2013 15:19:35, 3084 results
(&(objectGUID>=\D0)(objectGUID<=\E0)): Ended fetch 03/13/2013 15:20:04, 3181 results
(&(objectGUID>=\E0)(objectGUID<=\F0)): Ended fetch 03/13/2013 15:20:36, 3149 results
(objectGUID>=\F0): Ended fetch 03/13/2013 15:21:05, 3200 results 
```

看起来每个下一个查询都会增加 30 秒的执行时间。

*   可能是因为 AD LDAP 服务器是单线程的（最可能的解释）？
*   或者可能是因为我的查询没有使用`objectGUID`索引？
*   或者为什么？

# php - javascript 到 php 不会触发，直到 file_get_contents 返回数据

> ID：15389718
> 
> 赞同：0
> 
> 时间：2013-03-13T15:36:14.970
> 
> 标签：php, javascript, file-get-contents

我把这个脚本放到一个 php 文件中，一个首页通过 ajax 调用这个脚本，在那里我获取数据然后我编辑它们——在这个例子中，我只是通过 echo 显示它们。当首页调用此脚本时，我想为用户显示一个加载图标，但直到 file_get_contents 完成后才会显示该图标。任何的想法？

```
 echo "<script>$('.loader_icon').show()</script>";
      $data=  file_get_contents($url);
      echo "<script>alert('data')</script>"; 
    echo "<script>$('.loader_icon').hide()</script>"; 
```

如果我通过 ob_start 或 culr 更改 file_get_content，结果相同。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-13T15:38:00.667

因为您的页面仅在 PHP 脚本执行完成时才被发送到浏览器。它完成了整个 PHP 脚本的运行，然后只返回到浏览器。

在提交 ajax 请求之前，您应该显示加载图标，然后在收到服务器响应时隐藏。

# c - 网络过滤队列数

> ID：15389719
> 
> 赞同：1
> 
> 时间：2013-03-13T15:36:21.700
> 
> 标签：c, unix, network-programming, netfilter

我正在用 netfilter 的钩子编写一些内核模块。钩子函数：

```
uint main_hook(uint hooknum,
                  struct sk_buff *skb,
                  const struct net_device *in,
                  const struct net_device *out,
                  int (*okfn)(struct sk_buff *)  )
{
    struct iphdr *ip;
    struct udphdr *udp;
    if (skb->protocol == htons(ETH_P_IP)){
        ip = (struct iphdr *)skb->data;//skb_network_header(skb);
        if (ip->version == 4 && ip->protocol == IPPROTO_UDP){
            udp = (struct udphdr *)(skb->data + sizeof(struct iphdr));
            printk("[udp-catch] packet from %d to %d\n", ntohs(udp->source), ntohs(udp->dest));
            return NF_QUEUE;
        }
    }
    return NF_ACCEPT;
} 
```

我可以指定队列的数量吗？如果没有，我怎么能找到这个号码？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-04T10:36:19.990

# libnetfilter_queue 和 ip 表

**来自 libnetfilter_queue 网页的函数文档：**

[创建队列（）](http://www.netfilter.org/projects/libnetfilter_queue/doxygen/group__Queue.html#ga138190b535fa79202b0bc4177edb7fa7)

创建队列时，num 的默认值是 0。

如果您在同一台机器上运行两个队列，假设一个发送 IP 数据包，另一个接收，您需要创建两个不同编号的队列：

**发送：**

```
qh = nfq_create_queue(h,  0, &cb, NULL); 
```

**收到：**

```
qh = nfq_create_queue(h,  1, &cb, NULL); 
```

为了正确过滤 IP 表，您应该指定 netfilter 队列号：

**发件人：**

```
sudo iptables -A OUTPUT -p all -d <dest ip> -j NFQUEUE --queue-num 0 
```

**接收者：**

```
sudo iptables -A INPUT -p all -s <src ip> -d <dest ip> -j NFQUEUE --queue-num 1 
```

您还可以查看 iptables 的手册并搜索 NFQUEUE。

希望这会有所帮助。

# c# - 为什么我不能选择排序这个库？

> ID：15389721
> 
> 赞同：3
> 
> 时间：2013-03-13T15:36:28.143
> 
> 标签：c#, arrays, sorting, selection

我正在尝试将选择排序用于图书库，以便按字母顺序对它们进行排序，但是我无法让它工作。

选择排序（库）；不起作用，但 SelectionSort(titles); 有，有什么想法吗？谢谢 ：）

这是完整的代码：

```
using System;
using System.Collections.Generic;
using System.Text;

namespace BookSortingEx
{
    class Program
    {

        static void swap<T>(ref T x, ref T y)
        {
            //swapcount++;
            T temp = x;
            x = y;
            y = temp;
        }

        static void printArray(string[] a)
        {
            for (int i = 0; i < a.Length; i++)
            {
                Console.Write(a[i] + ",");
            }
            Console.WriteLine();
        }

        static bool IsInOrder<T>(T[] a) where T : IComparable
        {
            for (int i = 0; i < a.Length - 1; i++)
            {
                if (a[i].CompareTo(a[i + 1]) > 0)
                    return false;
            }
            return true;
        }

        static void Main(string[] args)
        {

            string[] array1 = { "Fred", "Zoe", "Angela", "Umbrella", "Ben" };
            string[] titles = {"Writing Solid Code",
                "Objects First","Programming Gems",
                "Head First Java","The C Programming Language",
                "Mythical Man Month","The Art of Programming",
                "Coding Complete","Design Patterns", 
                "Problem Solving in Java"};
            string[] authors = { "Maguire", "Kolling", "Bentley", "Sierra", "Richie", "Brooks", "Knuth", "McConnal", "Gamma", "Weiss" };
            string[] isbns = { "948343", "849328493", "38948932", "394834342", "983492389", "84928334", "4839455", "21331322", "348923948", "43893284", "9483294", "9823943" };

            Book[] library = new Book[10];

            for (int i = 0; i < library.Length; i++)
            {
                library[i] = new Book(isbns[i], titles[i], authors[i]);
            }

           **DOESNT WORK - // SelectionSort(library);** 

           SelectionSort(titles);
            printArray(titles);

            foreach (Book book in library)
            {
                Console.WriteLine(" {0} ", book);
            }
            Console.WriteLine();
            Console.ReadKey();

        }

        static public void SelectionSort(string[] a)
        {
            for (int i = 0; i < a.Length - 1; i++)
            {
                int smallest = i;
                for (int j = i + 1; j < a.Length; j++)
                {
                    if (a[j].CompareTo(a[smallest]) < 0)
                        smallest = j;
                }
                swap(ref a[i], ref a[smallest]);
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T15:44:24.670

您的方法需要 a `string[]`，但您要给它 a`Book[]`

您需要更改实现`SelectionSort`以支持 Comparable Collections，并`Book`实现`IComparable`接口。

```
public class Book : IComparable
{
    // Implementation

    public int CompareTo(Book otherBook)
    {
        // Implementation
    }
}

static public void SelectionSort<T>(IList<T> a) where T : IComparable
{
    // Implementation
} 
```

这种方法的优点是，您不必为`SelectionSort`要排序的每种对象集合创建不同的版本。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-13T15:39:15.810

因为`SelectionSort`将 type 数组作为参数，`string`而您将 type 数组传递给它`Book`。`SelectionSort(titles)`有效，因为titles 是一个类型的数组`string`。

您需要编写一个采用类型数组的方法`Book`

```
static public void SelectionSort(Book[] books) 
```

如果您还没有这样做，您可能需要`CompareTo`在您的类中定义一个方法`Book`，以便您的排序算法可以弄清楚如何对书籍进行排序。

# performance - 为什么 Sencha Touch 使用 Ext.scroll.Scroller？

> ID：15389723
> 
> 赞同：0
> 
> 时间：2013-03-13T15:36:35.900
> 
> 标签：performance, extjs, sencha-touch

据我了解，Sencha Touch 使用 Ext.scroll.Scroller 在所有移动平台上一致地处理动量滚动行为。但我不明白为什么这是必要的。Ext.scroll.Scroller 不能在所有平台上一致地处理滚动性能（BB10 滚动性能很糟糕，而 Android 性能还不错）。

为什么 Sencha 不直接将滚动委托给设备的浏览器/webview 而不是使用 Ext.scroll.Scroller？例如，Android Sencha 应用程序应该像 iOS 中那样具有弹性滚动，而原生 Android 应用程序没有弹性滚动，这似乎很奇怪。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T22:51:09.353

它在滚动时利用 GPU 加速，因此在某些平台上更快。您可以通过将滚动条设置为 false 来绕过它，然后在 CSS 中打开溢出：自动。如果您在 BB10 上获得不合格的性能，也许您可​​以在那里完成。

# registry - 使用 NSIS 安装程序授予注册表项权限的有效方法是什么？

> ID：15389726
> 
> 赞同：4
> 
> 时间：2013-03-13T15:36:40.693
> 
> 标签：registry, acl, nsis

我正在尝试使用 NSIS 中的[AccessControl 插件](http://nsis.sourceforge.net/AccessControl_plug-in)来设置注册表项的权限。它不工作。安装程序运行后，所有用户组没有完全控制。

我在下面创建了一个示例。这里有什么问题吗？是否有另一种机制来完成同样的事情？我还尝试使用所有人组 S-1-1-0 的[数字形式](http://support.microsoft.com/kb/243330)，我还没有尝试使用“所有人”。

```
 ; Create the key for local machine settings (could be a 32 bit or 64 bit location)
  SetRegView 32
  WriteRegStr HKLM "SOFTWARE\MyApp" "x" "y"
  SetRegView 64
  WriteRegStr HKLM "SOFTWARE\MyApp" "x" "y"

  ; Give all authenticated users (BUILTIN\Users) full access on the registry key HKEY_LOCAL_MACHINE\Software\MyApp
  SetRegView 32
  AccessControl::GrantOnRegKey HKLM "SOFTWARE\MyApp" "BUILTIN\USERS" "FullAccess"
  SetRegView 64
  AccessControl::GrantOnRegKey HKLM "SOFTWARE\MyApp" "BUILTIN\USERS" "FullAccess" 
```

起初，我没有理会这两个注册表视图。但经过实验，为了排除 WOW6432Node 的问题，我将命令加倍。我希望没有必要。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-13T22:08:30.610

当使用带有插件的 SID 时，语法是`(S-1-....)`：

```
WriteRegStr HKCU "Software\test" hello world
AccessControl::GrantOnRegKey HKCU "Software\test" "(S-1-1-0)" "FullAccess" ; Everyone 
```

您可以[在此处找到 SID 列表](http://support.microsoft.com/kb/243330)。

您可以使用`AccessControl::NameToSid`将名称转换为其 SID，但这样做可能会在非英语系统上出现本地化问题：

```
AccessControl::NameToSid "BUILTIN\USERS"
Pop $0
StrCmp $0 "error" +2
AccessControl::GrantOnRegKey HKCU "Software\test" "($0)" "FullAccess" 
```

更改所有者时，您还可以使用`Machine\Username`语法。

别名之类`(BU)`的仅适用于 unicode 版本，并且还取决于 Windows 版本，因此最好只使用 SID。

# c# - Windows 窗体 - 自定义 MaskedTextBox

> ID：15389736
> 
> 赞同：4
> 
> 时间：2013-03-13T15:37:03.607
> 
> 标签：c#, winforms, maskedtextbox

我需要使用`MaskedTextBox`. 我可以使用 5 位掩码，但我想更改的东西很少。现在盒子是这样的：

![蒙面文本框](../Images/6b3f303d92f485048330fb4b616a501c.png)

有两件事我不喜欢。首先 -`Prompt char`这是 undersoce `_`。我删除了字段值以将其留空（因为我希望它出现）但这会产生错误 - `The property value is invalid`。那么有没有办法摆脱这些下划线？第二 - 我将此值用于我的整数类型的实体属性之一，因此我进行了转换：

```
if (txtNumOfAreas.Text != "")
            {
                string temp = txtNumOfAreas.Text;
                bool result = Int32.TryParse(temp, out convertValue);
                if (result)
                {
                    entity.AreasCnt = convertValue;
                }
                else
                {
                    MessageBox.Show(Resources.ERROR_SAVE, "Error", MessageBoxButtons.OK, MessageBoxIcon.Error);
                    return false;
                }
            }
            else
            {
                entity.AreasCnt = null;
            } 
```

除非有人决定进行实验并插入类似的东西`_1__5_`然后转换失败，否则它工作得很好，但首先我希望能够一个接一个地写入数字。那么这也可能吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T15:45:34.603

看起来你的 MaskedEdit 比处理特定范围的问题更麻烦。更好的控制可能是 NumericUpDown。

NumericUpDown 的优点：

*   没有下划线提示可以尝试摆脱
*   它只接受数字输入
*   所以没有必要尝试转换值。你将永远有一个整数
*   设置最小值和最大值属性可为您提供自动数据输入验证
*   提供多种数据录入方式：
    *   打字
    *   用鼠标单击上/下按钮
    *   使用键盘向上/向下
*   如果您愿意，可以完全隐藏向上/向下按钮：[C# WinForms numericUpDown 控件（移除旋转框）](https://stackoverflow.com/questions/6222601)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-13T15:49:38.683

因此，要获得`_`一个空格，您只需将掩码字符设置为一个空格。并且要解决转换错误，只需将`AllowPromptAsInput`属性设置为，`false`以便用户实际上无法得到类似您的示例的内容。

# extjs - 将 Ext.Button 添加到 ExtJS 列模型

> ID：15389739
> 
> 赞同：3
> 
> 时间：2013-03-13T15:37:04.917
> 
> 标签：extjs, extjs3, extjs-grid

我正在创建一个 Ext.grid.GridPanel。我正在尝试将列添加`xtype: button`到列模型中。我不确定，如果我能做到这一点。下面是我的代码，这也是 jsfiddle [http://jsfiddle.net/bXUtQ/的链接](http://jsfiddle.net/bXUtQ/)

我正在使用 extjs 3.4

```
Ext.onReady(function () {
  var myData = [[ 'Lisa', "lisa@simpsons.com", "555-111-1224"],
                [ 'Bart', "bart@simpsons.com", "555-222-1234"],
                [ 'Homer', "home@simpsons.com", "555-222-1244"],
                [ 'Marge', "marge@simpsons.com", "555-222-1254"]];

  var store = new Ext.data.ArrayStore({
    fields:[ {
      name: 'name'
    },
    {
      name: 'email'
    },
    {
      name: 'phone'
    }],
    data: myData
  });
  var grid = new Ext.grid.GridPanel({
    renderTo: 'grid-container',
    columns:[ {
      header: 'Name',
      dataIndex: 'name'
    },
    {
      header: 'Email',
      dataIndex: 'email'
    },
    {
      header: 'Phone',
      dataIndex: 'phone'
    },
    {
        header: 'action',
        xtype: 'actioncolumn',
        iconCls: 'delete-icon'
        text: 'Delete',
        name: 'deleteBtn',
        handler: function(grid, rowIndex, colIndex, item, e) {
            alert('deleted');
        }      
    },             

    //////////////////////////////
    //I cannot add this column
    {
        header: 'action',
        xtype: 'button',
        text: 'update',
        name: 'btnSubmit'
    }
    ],
    store: store,
    frame: true,
    height: 240,
    width: 500,
    title: 'Framed with Row Selection',
    iconCls: 'icon-grid',
    sm: new Ext.grid.RowSelectionModel({
      singleSelect: true
    })
  });
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T15:49:49.100

您不能像那样将按钮用作列。我们正在使用以下 UX 来实现您所要求的。不幸的是，这是针对 ExtJS 4.1 的：

[http://www.sencha.com/forum/showthread.php?148064-Component-Column-Components-in-Grid-Cells](http://www.sencha.com/forum/showthread.php?148064-Component-Column-Components-in-Grid-Cells)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-30T13:37:26.710

您会尝试将此作为您的操作列吗

```
{
    xtype: 'actioncolumn',
    width: 50,
    items: 
    [
        {
            icon: 'app/resources/images/cog_edit.png', // Use a URL in the icon config
            tooltip: 'Edit',
            handler: function (grid, rowIndex, colIndex) {
                var rec = grid.getStore().getAt(rowIndex);
                alert("Edit " + rec.get('name'));
            }
        }, 
        {
            icon: 'app/resources/images/delete.png',
            tooltip: 'Delete',
            handler: function (grid, rowIndex, colIndex) {
                var rec = grid.getStore().getAt(rowIndex);
                alert("Terminate " + rec.get('name'));
            }
        }
    ]
} 
```

或者你可以试试这个插件的[actioncolumnbutton](http://lucian.lature.net/extjs/demo/ActionButton/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-27T22:12:15.003

您可以尝试 Grid [RowActions](http://www.sencha.com/forum/showthread.php?68345-3.x-Grid-RowActions-Plugin)。

# iphone - NSData getBytes 在模拟器中提供的结果与在设备上不同

> ID：15389742
> 
> 赞同：3
> 
> 时间：2013-03-13T15:37:09.710
> 
> 标签：iphone, ios, nsdata

我正在将数据从自写的服务器后端发送到我的 iOS 设备。该应用程序在 iOS 模拟器中运行良好，但在设备上运行不正常。例如：我发送整数值 4 - 在模拟器上我得到 4 但在设备上它是 1024。我搜索了整个互联网但没有找到任何解决方案，所以也许有人可以在这里帮助我。我不认为这是一个字节序问题，因为我已经注意到它了。

这是代码：

```
int someintvalue = 0;

uint8_t firstBuffer[4];

[inputStream read:firstBuffer maxLength: sizeof(firstBuffer)];
NSMutableData *data1 = [[NSMutableData alloc] initWithBytes:firstBuffer   
                                                     length:sizeof(firstBuffer)];

NSRange rng = NSMakeRange(0, 4);
[data1 getBytes:&someintvalue range:rng];

someintvalue = CFSwapInt32HostToBig(someintvalue);
NSLog(@"Got %i Value", someintvalue); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T17:29:03.247

您的字节交换不正确。`CFSwapInt32HostToBig()`从“主机”字节序交换为大字节序。这是倒退。您可能打算使用`CFSwapInt32BigToHost()`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-15T03:20:15.837

我有这个问题的答案。

遇到同样的问题：

*   在这种情况下，长度不正确。在这种情况下，iOS 会继续读取和重写最后一个字节。

# android - 如何将对象与 Google 地图标记相关联？

> ID：15389748
> 
> 赞同：0
> 
> 时间：2013-03-13T15:37:20.947
> 
> 标签：android, object, location, google-maps-markers, google-maps-android-api-2

我正在构建一个 Android GPS 应用程序，它根据用户当前位置显示最近的位置。我正在使用 MapFragment，并且在 AsyncTask 中像这样在地图上放置标记：

```
protected void onPostExecute(Void result) { 
    super.onPostExecute(result);

    for(int i = 0; i < list.size(); i++)
    {
        HashMap<String,String> location = new HashMap<String,String>();
        location = list.get(i);

        String type = location.get("type");
        int marker = getTypeDrawable(type);

        LatLng position = new LatLng(Float.parseFloat(location.get("lat")), Float.parseFloat(location.get("long")));
         map.addMarker(new MarkerOptions()
        .position(position)
        .title(location.get("name"))
        .snippet(location.get("distance") + location.get("type"))                                  
        .icon(BitmapDescriptorFactory.fromResource(marker)));
        System.out.println(list.get(i));
    }

    Toast.makeText(MainActivity.this, "Finished retrieving nearby locations",
            Toast.LENGTH_SHORT).show();         
} 
```

这是我的全局变量列表，其中包含最近位置的所有信息：`ArrayList<HashMap<String, String>> list;`

我的计划是在单击标记时显示一个弹出对话框，就像地理缓存应用程序“C:Geo”一样。我的问题是，我不知道如何在对话框中显示该标记的信息。如您所见，我正在使用该`map.addMarker()`方法，但无法将该位置与该标记相关联。

我希望制作一个这样的弹出对话框：

```
@Override
public boolean onMarkerClick(Marker marker) {
 //Get location associated with marker. 
//Fill popup dialog with information associated 
//with location and then invoke the dialog.
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T15:50:27.623

您需要选择能够唯一标识标记和位置的东西。也许那是您在标记上设置的标题（您的位置中会有一些相应的字符串）或 Lat/Lng 组合。当用户点击标记时，您将在[onMarkerClick(Marker marker)](https://developers.google.com/maps/documentation/android/reference/com/google/android/gms/maps/GoogleMap.OnMarkerClickListener)方法中收到该标记，您从标记中读取标题或纬度/经度并从您的位置查找相应的位置。例如，您可以遍历您的位置 HashMap 并检查该位置是否与您的标记具有相同的 lat/lng，然后您就有了与您的标记相对应的位置。

当然有更有效的方法，但你明白了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-12T17:45:10.510

鉴于您所需方法的格式，我认为您可以使用标记的哈希码作为访问位置的键。我自己没有尝试过，但我的以下想法应该有效（并且更有效率）。首先，您必须将添加标记的方式更改为：

```
Marker locationMarker = map.addMarker(new MarkerOptions()
    .position(position)
    .title(location.get("name"))
    .snippet(location.get("distance") + location.get("type"))                                  
    .icon(BitmapDescriptorFactory.fromResource(marker))); 
```

这确保您可以访问添加的标记对象。然后，将 a`HashMap`作为`Integer`键，将 a`Location`作为结果对象。使用标记的哈希码的键存储位置，您可以通过以下方式访问：`marker.hashCode();`

我通常使用`getTag()`/`setTag()`方法来保存对象引用，但不幸的是 Marker 类没有标签:(

这种方式的一个可能的警告是，hashCode 可能会碰撞 2 个标记。我不知道这有多大可能，这将是需要研究/测试的东西。

# hibernate - Hibernate：找到同一个集合的两个表示

> ID：15389749
> 
> 赞同：0
> 
> 时间：2013-03-13T15:37:21.253
> 
> 标签：hibernate, spring-mvc, collections, annotations

我有一个`Spring MVC`项目，带有`Hibernate`注释实体映射。到目前为止，数据库创建得很好，保存新对象没有问题。直到我添加了一个新的实体类。

当我尝试保存`User`更改了日期字段（`last_login`）的 a 时，会发生错误，如下所示：

```
 User u = userService.get(userDetails.getUsername());
 u.setLast_login(new Timestamp((new java.util.Date()).getTime()));
 spService.save(u.getRegisterPoint());
 spService.save(u.getWorkSalePoint());//Because of another error
 userService.update(u); 
```

在哪里：

```
@Override
public boolean update(User user) {
    try {
        session().update(user);
    } catch (Exception e) {
        return false;
    }
    return true;
} 
```

我尝试将级联添加到关系中，尝试不使用它们（它们工作正常，没有类）。

**用户.java**

```
@Entity
@Table(name = "USERS")
public class User {    
    @Id
    @GeneratedValue(strategy = GenerationType.AUTO)
    private int id_u;
    @Column(name = "name")
    private String name;
    @Column(name = "last_login")
    private Timestamp last_login;

    @ManyToOne
    @JoinColumn(name = "id_register_point", referencedColumnName = "id_sp")
    SalePoint registerPoint;

    @Transient
    private int registerPoint_id;

    @ManyToOne
    @JoinColumn(name = "id_work_sp", referencedColumnName = "id_sp")
    SalePoint workSalePoint;

    //Getters and setters
} 
```

**SalePoint.java**

```
@Entity
@Table(name = "SALEPOINTS")
public class SalePoint {
    @Id
    @Column(name = "id_sp")
    @GeneratedValue(strategy = GenerationType.AUTO)
    private int id_sp;
    @Column(name = "name")
    private String name;

    @OneToMany(mappedBy = "registerPoint")
    private Set<User> registeredClients;

    @OneToMany(mappedBy = "workSalePoint")
    private Set<User> workers;

    @OneToMany(mappedBy = "salePoint")
    private Set<Order> orders;
    //Getters and Setters
} 
```

**状态.java**

```
@Entity
@Table(name = "STATUSES")
public class Status {

    @Id
    @GeneratedValue(strategy = GenerationType.AUTO)
    @Column(name = "id_s")
    private int id_s;

    @Column(name = "name")
    private String name;

    @OneToMany(mappedBy = "status")
    List<Order> orders;

    public Status() {}

    public int getId_s() {
        return id_s;
    }

    public void setId_s(int id_s) {
        this.id_s = id_s;
    }

    public String getName() {
        return name;
    }

    public void setName(String name) {
        this.name = name;
    }

    @Override
    public String toString() {
        return "Status:" + name;
    }

} 
```

**堆栈跟踪：**

```
HTTP Status 500 - Request processing failed; nested exception is org.springframework.orm.hibernate3.HibernateSystemException: Found two representations of same collection: pl.spot.dbk.points.server.hib.SalePoint.workers; nested exception is org.hibernate.HibernateException: Found two representations of same collection: pl.spot.dbk.points.server.hib.SalePoint.workers

type Exception report

message Request processing failed; nested exception is org.springframework.orm.hibernate3.HibernateSystemException: Found two representations of same collection: pl.spot.dbk.points.server.hib.SalePoint.workers; nested exception is org.hibernate.HibernateException: Found two representations of same collection: pl.spot.dbk.points.server.hib.SalePoint.workers

description The server encountered an internal error that prevented it from fulfilling this request.

exception

org.springframework.web.util.NestedServletException: Request processing failed; nested exception is org.springframework.orm.hibernate3.HibernateSystemException: Found two representations of same collection: pl.spot.dbk.points.server.hib.SalePoint.workers; nested exception is org.hibernate.HibernateException: Found two representations of same collection: pl.spot.dbk.points.server.hib.SalePoint.workers
org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:894)
org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:778)
javax.servlet.http.HttpServlet.service(HttpServlet.java:617)
javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
com.opensymphony.sitemesh.webapp.SiteMeshFilter.obtainContent(SiteMeshFilter.java:129)
com.opensymphony.sitemesh.webapp.SiteMeshFilter.doFilter(SiteMeshFilter.java:77)
org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:322)
org.springframework.security.web.access.intercept.FilterSecurityInterceptor.invoke(FilterSecurityInterceptor.java:116)
org.springframework.security.web.access.intercept.FilterSecurityInterceptor.doFilter(FilterSecurityInterceptor.java:83)
org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:113)
org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:103)
org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:113)
org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:54)
org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:45)
org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
org.springframework.security.web.authentication.www.BasicAuthenticationFilter.doFilter(BasicAuthenticationFilter.java:150)
org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
org.springframework.security.web.authentication.ui.DefaultLoginPageGeneratingFilter.doFilter(DefaultLoginPageGeneratingFilter.java:91)
org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:182)
org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:105)
org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:87)
org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:184)
org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:155)
org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:346)
org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:259)
root cause

org.springframework.orm.hibernate3.HibernateSystemException: Found two representations of same collection: pl.spot.dbk.points.server.hib.SalePoint.workers; nested exception is org.hibernate.HibernateException: Found two representations of same collection: pl.spot.dbk.points.server.hib.SalePoint.workers
org.springframework.orm.hibernate3.SessionFactoryUtils.convertHibernateAccessException(SessionFactoryUtils.java:690)
org.springframework.orm.hibernate3.HibernateTransactionManager.convertHibernateAccessException(HibernateTransactionManager.java:793)
org.springframework.orm.hibernate3.HibernateTransactionManager.doCommit(HibernateTransactionManager.java:664)
org.springframework.transaction.support.AbstractPlatformTransactionManager.processCommit(AbstractPlatformTransactionManager.java:754)
org.springframework.transaction.support.AbstractPlatformTransactionManager.commit(AbstractPlatformTransactionManager.java:723)
org.springframework.transaction.interceptor.TransactionAspectSupport.commitTransactionAfterReturning(TransactionAspectSupport.java:393)
org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:120)
org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:172)
org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:202)
com.sun.proxy.$Proxy45.save(Unknown Source)
pl.spot.dbk.points.web.LoginController.prepareLoginSuccessForm(LoginController.java:42)
sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
java.lang.reflect.Method.invoke(Method.java:597)
org.springframework.web.method.support.InvocableHandlerMethod.invoke(InvocableHandlerMethod.java:213)
org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:126)
org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:96)
org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:617)
org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:578)
org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:80)
org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:923)
org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:852)
org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:882)
org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:778)
javax.servlet.http.HttpServlet.service(HttpServlet.java:617)
javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
com.opensymphony.sitemesh.webapp.SiteMeshFilter.obtainContent(SiteMeshFilter.java:129)
com.opensymphony.sitemesh.webapp.SiteMeshFilter.doFilter(SiteMeshFilter.java:77)
org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:322)
org.springframework.security.web.access.intercept.FilterSecurityInterceptor.invoke(FilterSecurityInterceptor.java:116)
org.springframework.security.web.access.intercept.FilterSecurityInterceptor.doFilter(FilterSecurityInterceptor.java:83)
org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:113)
org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:103)
org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:113)
org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:54)
org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:45)
org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
org.springframework.security.web.authentication.www.BasicAuthenticationFilter.doFilter(BasicAuthenticationFilter.java:150)
org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
org.springframework.security.web.authentication.ui.DefaultLoginPageGeneratingFilter.doFilter(DefaultLoginPageGeneratingFilter.java:91)
org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:182)
org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:105)
org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:87)
org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:184)
org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:155)
org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:346)
org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:259)
root cause

org.hibernate.HibernateException: Found two representations of same collection: pl.spot.dbk.points.server.hib.SalePoint.workers
org.hibernate.engine.Collections.processReachableCollection(Collections.java:176)
org.hibernate.event.def.FlushVisitor.processCollection(FlushVisitor.java:60)
org.hibernate.event.def.AbstractVisitor.processValue(AbstractVisitor.java:124)
org.hibernate.event.def.AbstractVisitor.processValue(AbstractVisitor.java:84)
org.hibernate.event.def.AbstractVisitor.processEntityPropertyValues(AbstractVisitor.java:78)
org.hibernate.event.def.DefaultFlushEntityEventListener.onFlushEntity(DefaultFlushEntityEventListener.java:161)
org.hibernate.event.def.AbstractFlushingEventListener.flushEntities(AbstractFlushingEventListener.java:219)
org.hibernate.event.def.AbstractFlushingEventListener.flushEverythingToExecutions(AbstractFlushingEventListener.java:99)
org.hibernate.event.def.DefaultFlushEventListener.onFlush(DefaultFlushEventListener.java:49)
org.hibernate.impl.SessionImpl.flush(SessionImpl.java:1027)
org.hibernate.impl.SessionImpl.managedFlush(SessionImpl.java:365)
org.hibernate.transaction.JDBCTransaction.commit(JDBCTransaction.java:137)
org.springframework.orm.hibernate3.HibernateTransactionManager.doCommit(HibernateTransactionManager.java:656)
org.springframework.transaction.support.AbstractPlatformTransactionManager.processCommit(AbstractPlatformTransactionManager.java:754)
org.springframework.transaction.support.AbstractPlatformTransactionManager.commit(AbstractPlatformTransactionManager.java:723)
org.springframework.transaction.interceptor.TransactionAspectSupport.commitTransactionAfterReturning(TransactionAspectSupport.java:393)
org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:120)
org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:172)
org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:202)
com.sun.proxy.$Proxy45.save(Unknown Source)
pl.spot.dbk.points.web.LoginController.prepareLoginSuccessForm(LoginController.java:42)
sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
java.lang.reflect.Method.invoke(Method.java:597)
org.springframework.web.method.support.InvocableHandlerMethod.invoke(InvocableHandlerMethod.java:213)
org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:126)
org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:96)
org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:617)
org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:578)
org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:80)
org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:923)
org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:852)
org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:882)
org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:778)
javax.servlet.http.HttpServlet.service(HttpServlet.java:617)
javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
com.opensymphony.sitemesh.webapp.SiteMeshFilter.obtainContent(SiteMeshFilter.java:129)
com.opensymphony.sitemesh.webapp.SiteMeshFilter.doFilter(SiteMeshFilter.java:77)
org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:322)
org.springframework.security.web.access.intercept.FilterSecurityInterceptor.invoke(FilterSecurityInterceptor.java:116)
org.springframework.security.web.access.intercept.FilterSecurityInterceptor.doFilter(FilterSecurityInterceptor.java:83)
org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:113)
org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:103)
org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:113)
org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:54)
org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:45)
org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
org.springframework.security.web.authentication.www.BasicAuthenticationFilter.doFilter(BasicAuthenticationFilter.java:150)
org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
org.springframework.security.web.authentication.ui.DefaultLoginPageGeneratingFilter.doFilter(DefaultLoginPageGeneratingFilter.java:91)
org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:182)
org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:105)
org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:87)
org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:184)
org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:155)
org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:346)
org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:259) 
```

我尝试了各种选项，并在这里阅读了几乎所有关于它的帖子，但它们是关于 plusframework、xml 映射或其他的。

你能帮我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-10-17T13:41:29.297

当数据库中存在引用完整性问题时（这并不是您真正想到的第一件事），我已经看到了此消息。就我而言，问题是集合中的项目引用了另一个表中已删除的行。

如果可能的话，确保您的数据库设置有引用索引以确保不会发生这种情况可能是最简单的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T04:54:03.843

**问题：**

问题是hibernate在你调用时`session`检测到相同的`collection`两次。`session``update()`

**解决方案：**

确保您的实体中没有重复的 setter 和 getter，而不是`update()`仅使用 use `merge()`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-20T11:39:24.713

我查明了问题的根源。它是所有事物的身份。最初我在`Hibernate's`文件中有这个`import.sql`：

```
INSERT INTO roles (id_r,"name") VALUES (1,'user');
INSERT INTO roles (id_r,"name") VALUES (11,'sell');
INSERT INTO roles (id_r,"name") VALUES (111,'admin');
INSERT INTO salepoints (id_sp,"name") VALUES (0,'HQ');
INSERT INTO salepoints (id_sp,"name") VALUES (1,'INTERNET');
INSERT INTO users (...,id) VALUES (...,0); 
```

两个`SalesPoint`id 都被`roles`(INTERNET) 和新的初始`user`(HQ) 配音。改为：

```
INSERT INTO roles (id_r,"name") VALUES (1,'user');
INSERT INTO roles (id_r,"name") VALUES (11,'sell');
INSERT INTO roles (id_r,"name") VALUES (111,'admin');
INSERT INTO salepoints (id_sp,"name") VALUES (5,'HQ');
INSERT INTO salepoints (id_sp,"name") VALUES (10,'INTERNET');
INSERT INTO users (...,id) VALUES (...,50);
SELECT setval('public.hibernate_sequence', 200, true);
//It will work with every value
//above the maximum from the id inserted. 
```

像魅力一样工作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-03-06T18:46:15.820

在我的情况下，a 在 A 和 B 之间存在 manyToMany 关系，并且在 A 的 equals() 方法中，Ab 和 otherA.b 之间的比较导致了这种情况。我确定了原因，但我不明白。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-10-29T12:46:15.887

在我的案例中，我在同一个事务中删除和更新对象。我先删除对象然后更新。这导致了异常。为了解决异常，我只是更改了先更新然后删除未引用对象的顺序。

# vb.net - 在 vb .net - 在 layoutTablePane“单元格”中放置多个控件

> ID：15389755
> 
> 赞同：0
> 
> 时间：2013-03-13T15:37:36.897
> 
> 标签：vb.net, dictionary

在我正在编写的布局中，有一个区域显示不同的控件，具体取决于各种条件。

我可以在设计时放置所有这些控件，还是必须在运行时“重新附加”和“删除”每个控件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T18:34:17.980

您可以在 TableLayoutPanel 单元格中托管一个面板。或任何其他控制容器。您可以根据需要放置任意数量的控件。

例如，您可以使用嵌套的 FlowLayoutPanel。因此您可能不需要手动执行布局管理。

# php - 使用 AJAX/PHP/SQL 测试数据库的 TRUE/FALSE

> ID：15389763
> 
> 赞同：0
> 
> 时间：2013-03-13T15:38:05.937
> 
> 标签：php, jquery, sql

让我首先说明您将看到我仍在此问题中使用一些 Mysql 代码。这只是因为我是 PDO 的新手并且为了排除故障，我想确保我的 sql 和查询正常工作，所以我使用了我所知道的。一旦我让函数工作并且脚本运行，我将转换为 PDO。

这是我的问题。我正在提交一个为用户订阅电子邮件列表（数据库）的表单。它获取他们的所有信息并将其插入数据库。到目前为止，这一切都有效。然后我的回调函数应该检查这个用户是否已经在数据库中。

我正在测试是否根据将电子邮件列设置为唯一列从数据库返回了一行。问题是即使用户已经在数据库中，sql 也会返回一行“重复条目”，因此我的代码正在读取 DUPLICATE ENTRY 行。有人可以指出我正确的方向吗？

我的 jQuery 代码...

```
$('#contForm').submit(function() {       //contForm is the name of my form
var formData = $(this).serialize();
$.post('contact.php',formData,dispAdd);      //dispAdd is the callback
    function dispAdd(result) {
      if (!result) {
        $('#main').html('<div>Your have been added to the mailing list</div>');
     } else {
       if ($('#fail').length==0) {
            $('#main').append('<div id="fail">This email address is already subscribed to our mailing list</div>');
            }
          }
        }
return false;

}); 
```

我的 PHP/SQL 脚本

```
function dispAdd()
{
 $email= $_POST['email'];
 $sql= "SELECT * FROM mailList WHERE email = '$email'";
 $result= mysql_query($sql) or die(mysql_error());
 $rows = array();
 if(mysql_num_rows($result) > 0)
{
 while ( $row = mysql_fetch_assoc($result)) {
 $rows[] = $row;
   }            
 echo json_encode( $rows );
 } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T15:56:57.683

在玩了更多之后，我想出了如何让它发挥作用，但如果有人有其他提示或想法，我很高兴听到他们。我在这里学到了很多东西，所以欢迎大家发表评论。这是我如何使它工作的：

```
function dispAdd()
{
 $email= $_POST['email'];
 $sql= "SELECT * FROM mailList WHERE email = '$email'";
 $result= mysql_query($sql) or die(mysql_error());
 if(mysql_num_rows($result) > 0)
    {
 while ( $row = mysql_fetch_assoc($result)) {
                                             }            
 return;
     }
} 
```

# jquery - 带有 ID 的 btn 组中的引导活动按钮

> ID：15389764
> 
> 赞同：0
> 
> 时间：2013-03-13T15:38:08.833
> 
> 标签：jquery, twitter-bootstrap

所以我有一个按钮组：

```
<div class="btn-group">
     <button id="specialOne" type="button" class="btn  "data-toggle="button">Item1</button>
     <button type="button" class="btn  "data-toggle="button">Item2</button>
</div> 
```

有人可以帮我弄清楚如何使用： `$('.btn-group button').removeClass('active');` 关闭，我认为相反的是`addClass('active')` 如何将它应用于特定的 ID 按钮，即 ID 为 specialOne 的按钮？ `$('.id specialOne').addClass('active');`?

更新：见代码[http://jsfiddle.net/Km4bj/](http://jsfiddle.net/Km4bj/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T15:46:04.357

[这是 ID 选择的文档](http://api.jquery.com/id-selector/)

```
$('.btn-group button#specialOne') 
```

应该为您提供所需的特定按钮

我更新了你的小提琴：[这里](http://jsfiddle.net/cZfPE/5)

有几件事，您没有将 Jquery 添加到小提琴中。

另一个问题是您在 html 中绑定到 onclicks 的 JS 函数未定义，因此它们会引发 JS 错误并阻止进一步的 JS 运行。一旦我删除了函数，就清除了错误并且它正在工作。

因此，这就是您需要在实际页面中检查的内容，无论您使用哪种浏览器进行测试，您都需要使用 js 控制台并检查是否抛出错误。

# php - 为什么我的 PHP 按位比较没有产生我期望的结果？

> ID：15389765
> 
> 赞同：1
> 
> 时间：2013-03-13T15:38:15.177
> 
> 标签：php, comparison

我有以下代码：

```
foreach(str_split('abcd') as $char) {
    $total += ($char & 1);
}
echo $total; 
```

它输出`0`. 但是，我希望它输出`2`，因为`a`和`c`在它们的 ASCII 二进制表示中是奇数（我相信是 97 和 99）。

似乎无论我传递给什么`str_split`，我总是以`0`. 为什么会这样，如何成功计算字符串中设置了第一位的字节？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T15:41:16.400

您必须先获取 ASCII 码，您的代码不会这样做。

```
<?php
foreach(str_split('abcd') as $char) {
    $char=ord($char);  //Missed this?
    $total += ($char & 1);
}
echo $total;  // Outputs 2

?> 
```

# c# - 使用 HttpwebRequest 调用 MVC HttpPost 方法（带参数）

> ID：15389766
> 
> 赞同：0
> 
> 时间：2013-03-13T15:38:18.050
> 
> 标签：c#, asp.net-mvc, httpwebrequest

我有以下 MVC 方法。

```
 [System.Web.Mvc.HttpPost]
    public ActionResult Listen(string status)
    {

        CFStatusMessage statusMessage = new CFStatusMessage();
        if (!string.IsNullOrEmpty(status))
        {
            statusMessage = Newtonsoft.Json.JsonConvert.DeserializeObject<CFStatusMessage>(status);
        }
        return Content(Server.HtmlEncode(status));// View(statusMessage);
    } 
```

我正在尝试从其他应用程序..（控制台）调用上述方法。我正在使用 HttpWebRequest 来调用 MVC 方法。使用下面的代码可以调用该方法，但参数总是以空字符串的形式出现。

```
 string content = "{\"status\":\"success\",\"payload\":\"some information\"}";
        string url = "http://myrl.com";
        var httpWRequest = (HttpWebRequest) WebRequest.Create(url);
        httpWRequest.Method = "POST";
        httpWRequest.ContentType = "text/json";
        var encoding = new ASCIIEncoding();
        byte[] data = encoding.GetBytes(string.Format("status={0}", Uri.EscapeDataString(content)));
        httpWRequest.ContentLength = data.Length;

        Stream stream = httpWRequest.GetRequestStream();
        stream.Write(data, 0, data.Length);

        var response = (HttpWebResponse)httpWRequest.GetResponse(); 
```

有了这个，它调用了 Listen 方法，但状态参数总是空白。而我想要 json 字符串 {status:"success",payload:"some information"} 作为参数。

我究竟做错了什么？

PS：我在发送实际内容时也尝试了以下语句。

```
byte[] data = encoding.GetBytes(content); 
```

问候，米

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T15:43:47.230

如果您需要从 MVC 试用 WebApi 提供任何类型的服务。您可以使用 HTTP REST 轻松完成此操作。

在此处阅读更多内容[ASP.NET WebApi](http://www.asp.net/vnext/overview/aspnet-web-api)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T16:12:22.697

您似乎在说请求是 json，但使用 wwwencoding 发送它。

删除`status={0}`行位并按原样发送 json。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T16:39:34.967

你可以试试这样的

```
using (var sw = new StreamWriter(httpWRequest.GetRequestStream()))
{
    sw.Write(content);
    sw.Flush();
    sw.Close();
} 
```

# python - 列表的标准差

> ID：15389768
> 
> 赞同：131
> 
> 时间：2013-03-13T15:38:20.593
> 
> 标签：python, list, standard-deviation

我想找到几个（Z）列表的第一个、第二个、...数字的平均值和标准差。例如，我有

```
A_rank=[0.8,0.4,1.2,3.7,2.6,5.8]
B_rank=[0.1,2.8,3.7,2.6,5,3.4]
C_Rank=[1.2,3.4,0.5,0.1,2.5,6.1]
# etc (up to Z_rank )... 
```

现在我想取 的均值和标准`*_Rank[0]`、 的均值和标准`*_Rank[1]`等
（即：所有 (A..Z)_rank 列表中第 1 位
的均值和标准；第 2 位的均值和标准来自所有 (A..Z)_rank 列表；
第三位数字的平均值和标准差……；等等）。

* * *

## 回答 #1

> 赞同：183
> 
> 时间：2014-02-02T00:27:10.577

由于 Python 3.4 / [PEP450](http://www.python.org/dev/peps/pep-0450/)[`statistics module`](http://docs.python.org/3.4/library/statistics.html)在标准库中有一个，它有一个计算[像`stdev`](http://docs.python.org/3.4/library/statistics.html#statistics.stdev)你这样的可迭代对象的标准偏差的方法：

```
>>> A_rank = [0.8, 0.4, 1.2, 3.7, 2.6, 5.8]
>>> import statistics
>>> statistics.stdev(A_rank)
2.0634114147853952 
```

* * *

## 回答 #2

> 赞同：116
> 
> 时间：2013-03-13T15:42:16.980

我会将`A_Rank`et al 放入一个 2D [NumPy](http://www.numpy.org/)数组中，然后使用[`numpy.mean()`](http://docs.scipy.org/doc/numpy/reference/generated/numpy.mean.html)and[`numpy.std()`](http://docs.scipy.org/doc/numpy/reference/generated/numpy.std.html)来计算均值和标准差：

```
In [17]: import numpy

In [18]: arr = numpy.array([A_rank, B_rank, C_rank])

In [20]: numpy.mean(arr, axis=0)
Out[20]: 
array([ 0.7       ,  2.2       ,  1.8       ,  2.13333333,  3.36666667,
        5.1       ])

In [21]: numpy.std(arr, axis=0)
Out[21]: 
array([ 0.45460606,  1.29614814,  1.37355985,  1.50628314,  1.15566239,
        1.2083046 ]) 
```

* * *

## 回答 #3

> 赞同：54
> 
> 时间：2015-01-03T18:48:25.473

这是一些纯 Python 代码，可用于计算平均值和标准差。

以下所有代码均基于[`statistics`](https://github.com/python/cpython/blob/master/Lib/statistics.py)Python 3.4+ 中的模块。

```
def mean(data):
    """Return the sample arithmetic mean of data."""
    n = len(data)
    if n < 1:
        raise ValueError('mean requires at least one data point')
    return sum(data)/n # in Python 2 use sum(data)/float(n)

def _ss(data):
    """Return sum of square deviations of sequence data."""
    c = mean(data)
    ss = sum((x-c)**2 for x in data)
    return ss

def stddev(data, ddof=0):
    """Calculates the population standard deviation
    by default; specify ddof=1 to compute the sample
    standard deviation."""
    n = len(data)
    if n < 2:
        raise ValueError('variance requires at least two data points')
    ss = _ss(data)
    pvar = ss/(n-ddof)
    return pvar**0.5 
```

注意：为了提高浮点数求和时的准确性，该`statistics`模块使用自定义函数，而不是我使用`_sum`的内置函数。`sum`

现在我们有例如：

```
>>> mean([1, 2, 3])
2.0
>>> stddev([1, 2, 3]) # population standard deviation
0.816496580927726
>>> stddev([1, 2, 3], ddof=1) # sample standard deviation
0.1 
```

* * *

## 回答 #4

> 赞同：22
> 
> 时间：2015-07-12T09:22:24.173

在 Python 2.7.1 中，您可以使用 for 计算标准差`numpy.std()`：

*   **人口标准**`numpy.std()`：除了您的数据列表之外，只需使用没有其他参数。
*   **示例 std**：您需要将**ddof**（即 Delta 自由度）设置为 1，如下例所示：

> numpy.std(<你的列表>, **ddof=1** )
> 
> 计算中使用的除数是**N - ddof**，其中 N 表示元素的数量。默认情况下 ddof 为零。

它计算样本标准而不是总体标准。

* * *

## 回答 #5

> 赞同：13
> 
> 时间：2014-04-24T16:15:32.050

在 python 2.7 中，您可以使用 NumPy[`numpy.std()`](http://docs.scipy.org/doc/numpy/reference/generated/numpy.std.html)给出[总体标准差](https://math.stackexchange.com/questions/15098/sample-standard-deviation-vs-population-standard-deviation)。

在 Python 3.4[`statistics.stdev()`](https://docs.python.org/3/library/statistics.html)中返回样本标准差。功能与`pstdv()`相同`numpy.std()`。

* * *

## 回答 #6

> 赞同：13
> 
> 时间：2019-04-14T06:49:55.573

使用python，这里有几个方法：

```
import statistics as st

n = int(input())
data = list(map(int, input().split())) 
```

# 方法1 - 使用函数

```
stdev = st.pstdev(data) 
```

# 方法2：计算方差并取其平方根

```
variance = st.pvariance(data)
devia = math.sqrt(variance) 
```

# 方法3：使用基础数学

```
mean = sum(data)/n
variance = sum([((x - mean) ** 2) for x in X]) / n
stddev = variance ** 0.5

print("{0:0.1f}".format(stddev)) 
```

# 笔记：

*   `variance`计算样本总体的方差
*   `pvariance`计算整个总体的方差
*   `stdev`和之间的相似差异`pstdev`

* * *

## 回答 #7

> 赞同：5
> 
> 时间：2017-06-08T14:45:43.070

纯python代码：

```
from math import sqrt

def stddev(lst):
    mean = float(sum(lst)) / len(lst)
    return sqrt(float(reduce(lambda x, y: x + y, map(lambda x: (x - mean) ** 2, lst))) / len(lst)) 
```

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2017-05-22T16:11:16.873

其他答案涵盖了如何在 python 中充分执行 std dev，但没有人解释如何进行您所描述的奇怪遍历。

我将假设 AZ 是整个人口。如果没有看到[Ome](https://stackoverflow.com/a/31366254/1727470)关于如何从样本中推断的答案。

因此，要获得每个列表的第一个数字的标准偏差/平均值，您需要这样的东西：

```
#standard deviation
numpy.std([A_rank[0], B_rank[0], C_rank[0], ..., Z_rank[0]])

#mean
numpy.mean([A_rank[0], B_rank[0], C_rank[0], ..., Z_rank[0]]) 
```

要缩短代码并将其推广到任何第 n 位，请使用我为您生成的以下函数：

```
def getAllNthRanks(n):
    return [A_rank[n], B_rank[n], C_rank[n], D_rank[n], E_rank[n], F_rank[n], G_rank[n], H_rank[n], I_rank[n], J_rank[n], K_rank[n], L_rank[n], M_rank[n], N_rank[n], O_rank[n], P_rank[n], Q_rank[n], R_rank[n], S_rank[n], T_rank[n], U_rank[n], V_rank[n], W_rank[n], X_rank[n], Y_rank[n], Z_rank[n]] 
```

现在您可以像这样简单地从 AZ 获取所有第 n 个位置的标准差和平均值：

```
#standard deviation
numpy.std(getAllNthRanks(n))

#mean
numpy.mean(getAllNthRanks(n)) 
```

# web-services - 在 Web 应用程序中加载文件的内容

> ID：15389771
> 
> 赞同：0
> 
> 时间：2013-03-13T15:38:31.350
> 
> 标签：web-services, file, azure, resources

我在我的项目中添加了几个文件（构建操作`Content`，`Copy if newer`）。它有效，我可以在所有其他文件所在的 /bin 目录中看到这些文件。

我怎样才能访问这些文件？我相信如果这是控制台应用程序或类似的东西，它会很容易（通过 访问`LoadFile({path in bin dir})`），但它不适用于托管在 IIS 7.5 或 Azure 上的我的 WebApp。

怎么可能做到？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T15:48:01.247

根据您使用的 .net 语言，您应该能够使用[System.Io.File](http://msdn.microsoft.com/en-GB/library/system.io.file.aspx)静态类来处理它们。

因此，例如，如果您想获取 Web 服务中文件夹中的文件，您可以执行类似的操作

```
var folder = HttpContext.Current.Server.MapPath("~/YourFolder")
string fullPath = Path.Combine(folder , "yourfile.txt");
var stream System.Io.File.OpenRead(fullPath); 
```

编辑：要访问在 bin 中创建的资源文件夹，请使用：

```
var folderPath = Path.Combine(AppDomain.CurrentDomain.BaseDirectory, "YourFolder"); 
```

# c++ - 类继承、复制构造函数和设置/获取函数

> ID：15389775
> 
> 赞同：0
> 
> 时间：2013-03-13T15:38:38.910
> 
> 标签：c++, class, inheritance, operators, copy-constructor

我得到了以下课程：

```
class Matrix{
    private:
        int rows;
        int columns;
        double* matrix;
    public:
        Matrix();
        explicit Matrix(int N);
        Matrix(int M, int N);
        void setValue(int M, int N, double value);
        double getValue(int M, int N);
        bool isValid() const;
        int getRows();
        int getColumns();
        ~Matrix();
        friend ostream& operator<<(ostream &out, Matrix&matrix1);

        Matrix &operator=(const Matrix &m) {
            if (rows * columns != m.rows * m.columns){
                delete [] this->matrix;
                this->matrix = new double[m.rows * m.columns];
            }
            rows = m.rows;
            columns = m.columns;
            for(int i = 0; i < rows; i++){
                for(int j = 0; j < columns; j++){
                    this->matrix[i * columns + j] = m.matrix[i * columns + j];
                }
            }
            return *this;
        }
        Matrix(const Matrix &rhs);
}; 
```

有了这些功能

```
#include <iostream>
#include "Matrix.h"
using namespace std;

//OPPGAVE 2
Matrix::Matrix(){
    matrix = NULL;
}

Matrix::Matrix(int N){
    matrix = new double[N * N];
    rows = N;
    columns = N;

    for(int i = 0; i < N; i++){
        for(int j = 0; j < N; j++){
            if(i==j)
                matrix[i * N + j] = 1;
            else
                matrix[i * N + j] = 0;
        }
    }
}

Matrix::Matrix(int M, int N){
    matrix = new double[M * N];
    rows = M;
    columns = N;

    for(int i = 0; i < M; i++){
        for(int j = 0; j < N; j++)
            matrix[i * N + j] =  0;
    }
}

Matrix::~Matrix(){
    delete [] matrix;
}

void Matrix::setValue(int M, int N, double value){
    matrix[M * columns + N] = value;
}

double Matrix::getValue(int M, int N){
    return matrix[M * columns + N];
}

bool Matrix::isValid() const{
    if(matrix==NULL)
        return false;
    else
        return true;
}

int Matrix::getRows(){
    return rows;
}

int Matrix::getColumns(){
    return columns;
}

ostream& operator<<(ostream &out, Matrix&matrix1){
    if(matrix1.isValid())
        for(int i = 0; i < matrix1.getRows(); i++){
            for(int j = 0; j < matrix1.getColumns(); j++)
                out << matrix1.getValue(i,j) << "\t";
            out << endl;
        }
    else
        out << "Matrisen er ikke gyldig." << endl;
    return out;
}

Matrix::Matrix(const Matrix &rhs) : rows(rhs.rows), 
    columns(rhs.columns), 
    matrix(new double[rows * columns]) {
        for (int i = 0; i < rows; i++) {
            for (int j = 0; j < columns; j++) {
                this->matrix[i * columns + j] = rhs.matrix[i * columns + j];
            }
        }
    } 
```

练习说：

> a) 创建一个继承 MxN 矩阵的类 Vector。我们希望将 Vector 类用作具有一些额外功能的 Mx1 维矩阵的接口。
> 
> b) 为 Vector 类实现以下构造函数。
> 
> •`Vector()`
> 默认构造函数，应将底层矩阵初始化为无效状态。
> 
> •`explicit Vector(unsigned int N)`
> 应构造底层Mx1 矩阵，初始化为零矩阵。（课程大纲中没有明确的关键字，但应该在这里使用。）
> 
> •`Vector(const Matrix & other);`
> 来自Matrix 的复制构造函数。当且仅当矩阵的维度为 Nx1 时，应将矩阵分配给 *this，否则应将生成的 *this 设置为无效。提示：重用来自 Matrix 类的 operator=。

这是我到目前为止所得到的：

```
#include "Matrix.h"

class Vector : public Matrix{
    public:
        Vector();
        explicit Vector(int N);
        Vector(const Matrix & other);

}; 
```

和

```
using namespace std;
#include <iostream>
#include "Vector.h"

Vector::Vector() 
    :Matrix(){ }

Vector::Vector(int N)
    :Matrix(N,1){ } 
```

我应该如何重用 Matrix 中的 operator=？如果我尝试将它从 Matrix 类复制到 Vector 类中，它会说行、列等是不可访问的。我如何访问这些？

是否可以为 Vector 类编写与 Matrix 类的复制构造函数或多或少相同的复制构造函数？它们都是数组，所以我想它应该可以工作吗？

如果我将 Matrix 与 Vector 相乘，是否会自动使用我为 Matrix 重载的运算符（此处未包括），还是我还需要以某种方式将这些包含在 Vector 类中？（它们是在 Matrix.cpp 文件中的 Matrix 类之外编写的。）

接下来我将为 Vector 类编写 set 和 get 函数。是否可以在此表单上编写这些函数？：

```
void Vector::setValue(int i, double value) {
    Matrix::setValue(i, 1, value);
} 
```

非常感谢帮助和提示！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T16:33:01.843

接下来是为了满足一个不称职的教授而做出的可怕的恶作剧。*不要在现实世界中这样做。*

首先，错误命名的“复制”构造函数。如果我们不担心尺寸，我们可以这样做（不寒而栗）：

```
Vector(const Matrix & other)
{
  *this = other;
} 
```

但我们必须先检查尺寸。我们可以这样做：

```
Vector(const Matrix & other)
{
  if(other.getColumns()==1)
      *this = other;
} 
```

但是有些傻瓜忽略了制作`getColumns()`const，所以这会导致编译器错误。我们可以做一些真正激烈的事情，*const cast*：

```
Vector(const Matrix & other)
{
  Matrix *p = const_cast<Matrix *>(&other);
  if(p->getColumns()==1)
      *this = other;
} 
```

或者只是一些可怕的可怕的东西：

```
Vector(const Matrix & other)
{
  Matrix M(other); // notice that this is not const
  if(M.getColumns()==1)
      *this = other;
} 
```

你需要帮助`isValid`吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T16:34:40.657

你在正确的轨道上设置和获取。您可以使用类似语法的成员函数调用运算符 `Class::operator*(args)`。实现向量分配看起来像这样：

```
Vector & Vector::operator=(const Vector &v){
    Matrix::operator=(v);
    return *this;
} 
```

您将希望将 Vector 构造函数声明为 public。我在想，因为您正在使用继承，编译器将为 Vector 类生成正确的复制构造函数和赋值运算符。你应该编写测试来验证这个假设。

# javascript - 在动态 url 中最后一个单词后截断字符串

> ID：15389783
> 
> 赞同：0
> 
> 时间：2013-03-13T15:39:03.033
> 
> 标签：javascript, regex

我想做的是：

www.test.de/testA/testB/testC/cutoff/testD/testE

我需要在“cutoff”之后立即切断字符串。链接会经常变安静，所以我需要这样做：

regexp = /cutoff/i（之后的所有内容）window.location = regexp;

链接在开始时也会发生变化，因此无法计算字符并随后替换它。

感谢您对此的任何回答。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T15:42:34.847

直到截止/？

`/.*cutoff\//`

编辑：这是JS

```
var s = 'www.test.de/testA/testB/testC/cutoff/testD/testE';
var x = s.replace(/(.*cutoff\/).*/, '$1');
window.location = x; 
```

[http://jsfiddle.net/6F44a/](http://jsfiddle.net/6F44a/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T15:43:51.723

这是一个太简单的解决方案吗？

```
var s = "www.test.de/testA/testB/testC/cutoff/testD/testE"
var re = /(.+cutoff)/i
s.replace(re, "") 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T15:46:31.437

尝试

```
var reg = new RegExp( "([.\/]*\/" + cutoff + "\/)." , 'i' );
window.location = window.location.replace( reg , "$1" ); 
```

# jquery - 从变量中删除斜线

> ID：15389786
> 
> 赞同：4
> 
> 时间：2013-03-13T15:39:05.873
> 
> 标签：jquery, html, css

我有一个从图像的源属性中获取的变量。当我使用样式标签将该变量设置为元素的背景时，所有的斜线都会被删除。这是我的一些代码：

```
var logo    =   $('.logo-list li.selected-logo img').attr('src');
$('.stage').append('<div class="doc-header"><div class="product-logo"></div><div class="logo-small" style="background:url('+logo+');"></div></div>'); 
```

当我为变量“logo”设置警报时，它看起来很好： [http ://www.example.com/images/img.jpg](http://www.example.com/images/img.jpg)

但是当 jQuery 附加代码时，背景属性的 URL 看起来像这样：http:example.com images img.jpg

由于某种原因，斜线被删除/转义，我只是不知道为什么。任何人都可以阐明这一点吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T15:53:41.077

感谢@BradM 的建议，我能够通过使用 decodeURIComponent 来修复它。

```
var logo    =   $('.logo-list li.selected-logo img').attr('src');
var logo    =   decodeURIComponent(logo); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T15:46:24.657

您的问题是这里有一个额外的双引号`"background:"url`。删除第二个双引号，应该可以正常工作

**[演示](http://jsfiddle.net/4KSgj/3/)**

# qt - 我需要多线程吗？

> ID：15389794
> 
> 赞同：0
> 
> 时间：2013-03-13T15:39:20.590
> 
> 标签：qt, virtual-serial-port

我正在开发一个关于数据采样和实时显示的项目，如示波器。数据以高传输速率通过虚拟 COM 端口传输到 PC。我在WindowsXP上使用QT4.8.4 + Qextserialport来完成串口通信。

我已经使用 AccessPort 测试了该设备。它可以从端口接收数据，但没有响应写入它。如果我想让设备停止上传数据，我必须停止设备并向其写入停止命令，重新启动设备，然后设备停止上传。使用一个线程处理读写的应用程序也是如此。我不想完全关闭端口。我只是想输入一些命令来改变一些东西，采样率，数据格式等。

所以，我尝试了多线程。我从以下链接下载了参考代码。 [http://www.qtcentre.org/threads/21063-QextSerialPort-with-QTimer-approch-for-reading?p=103325&highlight=#post103325](http://www.qtcentre.org/threads/21063-QextSerialPort-with-QTimer-approch-for-reading?p=103325&highlight=#post103325) （对不起，我真的不知道如何在这个网站上正确粘贴代码)

在这段代码中，作者派生了QThread的两个子类。一个是读端口，一个是写端口。他还在这两个子类中重新实现了 run()。我尝试了这段代码，但发现在接收代码时，我的 GUI 冻结了。

似乎以下线程中的作者与我遇到了同样的问题。 [Qt：使用线程和信号/插槽时，GUI 有时会冻结](https://stackoverflow.com/questions/8123404/qt-gui-sometimes-freezing-when-using-threads-and-signals-slots)

但我对这个线程有疑问。

1.  作者提到“在 GUI 线程中运行代码时，没有问题”。

当GUI线程中的所有代码时，作者的意思是一切正常吗？那么，他为什么使用工作线程和进程线程呢？

2.  作者提到了“进程线程”

我是否需要另一个进程线程与负责显示的 GUI 线程一起工作？（我不仅需要显示数据，还需要显示波形，都必须实时）

请给我一些关于如何克服这个问题的提示。非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T16:25:18.637

简短的回答是肯定的。在 GUI 线程上进行任何繁重的处理都会导致 GUI 冻结（尤其是如果您阻塞）。相反，您应该有一个更新数据的独立线程，或者为特定任务分拆工作线程。无论哪种情况，当有新数据要显示时，您应该在有新数据要显示时向 GUI 线程发出信号。如果可能的话，我建议使用 MVC 模式并实现一个 QAbstractItemModel 来为您的视图提供数据（因为它有一个定义的模式来提供这些更新）。

# html - 带有包装内元素的 CSS flexbox

> ID：15389798
> 
> 赞同：0
> 
> 时间：2013-03-13T15:39:32.993
> 
> 标签：html, css, flexbox

我对订购元素有疑问。我有一个容器（flexbox）和一个孩子（order = 1）和兄弟div（包装器我不会使用flexbox），孩子订购但不起作用。

可以查看完整示例：[http](http://codepen.io/isyara/pen/HtniA) ://codepen.io/isyara/pen/HtniA （检查包装器 im-changed-order）

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T12:41:23.670

如果您想要让第一个示例看起来像第二个示例，那么您就不走运了。弹性项目只能排列在它们的弹性容器内。

```
+---------------+
|  +---------+  |
|  |    a    |  |
|  + --------+  |
|  +---------+  |
|  |    b    |  |
|  | +-----+ |  |
|  | |  c  | |  |
|  | +-----+ |  |
|  | +-----+ |  |
|  | |  d  | |  |
|  | +-----+ |  |
|  +---------+  |
+---------------+ 
```

如果外部容器和 b 都是弹性容器（`display: flex`应用于它们），那么只有这些排列是可能的：

*   (cd) 一个
*   (直流) 一个
*   一（光盘）
*   一（直流）

如果 b*不是*弹性容器，则 c 和 d 不是弹性项目，根本无法使用该`order`属性进行排列。

元素 a、c 和 d 必须是兄弟元素才能完全重新排列它们：

```
+---------------+
|  +---------+  |
|  |    a    |  |
|  + --------+  |
|  +---------+  |
|  |    c    |  |
|  + --------+  |
|  +---------+  |
|  |    d    |  |
|  + --------+  |
+---------------+ 
```

现在您可以拥有上一个示例中的所有安排，以及这些：

*   cad
*   解码器

# c++ - 处理返回 void 的方法与返回值的方法一致

> ID：15389799
> 
> 赞同：2
> 
> 时间：2013-03-13T15:39:33.353
> 
> 标签：c++

我有一个这样的辅助函数：

```
template<typename T, typename R, typename Arg0>
void callMethod(Data *data, T &object, R (T::*method)(Arg0)) {
    push(data, (object.*method)(get<Arg0>(data, 1)));
} 
```

where`push`将结果推送到数据中，并`get`从数据中获取参数。使用 boost 预处理器，我已经为各种数量的参数定义了这个函数。

问题是当方法返回`void`( `R`is `void`) 时，代码无法编译，因为`void`它不是函数的有效参数/参数`push`。如果是`void`返回值，我只想调用方法而不是调用`push`. 最好的方法是什么？

重载无济于事，因为对 的调用`callMethod`是模棱两可的：

```
template<typename T, typename Arg0>
void callMethod(Data *data, T &object, void (T::*method)(Arg0)) {
    (object.*method)(get<Arg0>(data, 1));
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T08:32:24.997

使用解决`enable_if`：

```
template<typename T, typename R, typename Arg0>
typename enable_if<is_void<R>::value == false>::type
callMethod(Data *data, T &object, R (T::*method)(Arg0)) {
    push(data, (object.*method)(get<Arg0>(data, 1)));
}

template<typename T, typename R, typename Arg0>
typename enable_if<is_void<R>::value == true>::type
callMethod(Data *data, T &object, R (T::*method)(Arg0)) {
    (object.*method)(get<Arg0>(data, 1));
} 
```

# shell - 将 cat 输出存储到数组中 - shell 脚本

> ID：15389801
> 
> 赞同：0
> 
> 时间：2013-03-13T15:39:35.910
> 
> 标签：shell

如何将 cat 命令输出的每一行存储到一个数组中？例如，如果 cat /daemon 给了我

```
11.11.11-1

22.22.22-2

33.33.33-3

44.44.44-4 
```

那么如何使用 shell 脚本将输出存储到一个数组中，并在单个 if 条件中检查该数组中是否存在“11.11.11-1”（但不在迭代内）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T15:48:02.673

使用[bash](/questions/tagged/bash "显示标记为“bash”的问题")：

```
$ cat file.txt | readarray arr
$ echo "${arr[@]}"
$ echo "${arr[2]}" 
```

看 ：

```
help readarray 
```

对于第二个要求：

> 检查“11.11.11-1”是否在单个 if 条件中存在于该数组中（但不在迭代内）？

恐怕这在 shell 中是不可能的，但在 Perl 中是可以的。

**编辑**：如果你想通过迭代复制一个数组：

```
for i in "${arr[@]}"; do
    arr2[1]=$[arr[i}}
done 
```

# ios - 让屏幕上的多个对象检测到手指滑动？

> ID：15389802
> 
> 赞同：0
> 
> 时间：2013-03-13T15:39:35.670
> 
> 标签：ios, objective-c, cocoa-touch, gesture

我的目标是让屏幕上的一堆方块来检测手指滑动，只有当它前面的方块滑过时，它们才会执行它们的功能。我想知道是否有人有任何好的建议或想法可以使用？我在想我会创建一个`NSMutableArray`, 使用一个结构来包含每个正方形的点，然后将结构包装在 a`NSValue`然后将其添加到数组中。然后我想我会使用循环来读取数组并在屏幕上创建所有方块。但是，如何让方块检测手指何时滑过它们？我需要在循环中设置吗？有没有人有什么建议？抱歉，我对 iOS 游戏开发者有点陌生。世界！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T15:52:46.743

我对你的问题有点困惑，但我认为你正在寻找的是以下内容：

```
- (void)touchesMoved:(NSSet *)touches withEvent:(UIEvent *)event 
{
UITouch *touch = [[event allTouches] anyObject];
CGPoint touchLocation = [touch locationInView:self.contentView];

for (UIView *view in self.contentView.subviews)
{
    if ([view isKindOfClass:[MyCustomView class]] &&
        CGRectContainsPoint(view.frame, touchLocation))
    {

    }
} 
```

}

这将检测到任何时候触摸屏幕上的对象之一。如果这不能解决您的问题，请告诉我，我将尝试修改以更好地解决问题

# asp.net - NopCommerce 2.80 为加拿大配置多种税收

> ID：15389803
> 
> 赞同：2
> 
> 时间：2013-03-13T15:39:35.933
> 
> 标签：asp.net, nopcommerce

我试图弄清楚如何对我的产品征收多种税。您可能已经猜到我来自加拿大魁北克，我的客户对此有严格的要求。

我在2.8版本看到了这段代码

```
@if (Model.DisplayTaxRates && Model.TaxRates.Count > 0)
{
    foreach (var taxRate in Model.TaxRates)
    {
        <tr>
            <td class="cart-total-left">
                <span class="nobr">
                @string.Format(T("ShoppingCart.Totals.TaxRateLine").Text, taxRate.Rate)
                            :</span>
            </td>
            <td class="cart-total-right">
                <span class="nobr">
                    @taxRate.Value
                </span>
            </td>
        </tr>
    }
} 
```

在 CalculateTaxResult 中

有没有办法让我能够显示每项税款和总额？

我该如何配置？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T12:57:48.287

这不受支持。当他们说多重税时，他们意味着可以为每个项目设置不同的税，而不是每个项目的多重税。

需要对编码进行更改以伪造每个项目的多重税。

# ruby - DataMapper::UpdateConflictError

> ID：15389808
> 
> 赞同：0
> 
> 时间：2013-03-13T15:39:57.587
> 
> 标签：ruby, ruby-datamapper

伙计们，我有下面的代码片段，我需要从`animals`数组中删除一个元素，但我得到了`UpdateConflictError`

```
zoo.animals # => Wolf,Tiger,Lion
zoo.animals.delete("Wolf") # => Tiger, Lion
zoo.update(:animals => zoo.animals)
# => DataMapper::UpdateConflictError: Zoo#update cannot be called on a dirty resource
zoo.update #=> also give me the same error 
```

我必须查询`zoo.animals`然后删除`Wolf`但似乎不成功。你推荐什么？谢谢。

PS：[这里 datamapper](http://datamapper.org/docs/create_and_destroy.html)已经解释了脏资源，但我别无选择。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T08:49:15.320

这解决了错误：

```
zoo.animals # => Wolf,Tiger,Lion
zoo.animals.delete("Wolf") # => Tiger, Lion
zoo.save 
```

# c# - 限制通过 IP 地址访问 RestService 的特定页面

> ID：15389813
> 
> 赞同：1
> 
> 时间：2013-03-13T15:40:14.833
> 
> 标签：c#, rest, iis

我通过 C# 开发了一个 RestService，它以这种方式获取请愿：

```
{server}/user/{action}
{server}/auth/{action} 
```

...

我不希望人们直接访问网络服务，而只是必须访问的网络服务器。我已经成功地实现了拒绝除网络服务器之外的所有 IP，但我现在意识到该站点的一部分实际上应该具有公共访问权限。

编辑：我为拒绝每个请愿所做的是使用 IIS 中的“IPv4 地址和域限制”功能，拒绝在设置中访问未指定的客户端，最后只添加一个允许进入网络服务器的 ip I

所以，我想要的是保持实际行为，除了以下页面的情况：

```
{server}/admin/{action} 
```

我怎样才能做到这一点？

谢谢！

# jquery - 使用图像在 div 中切换 div

> ID：15389819
> 
> 赞同：0
> 
> 时间：2013-03-13T15:40:22.440
> 
> 标签：jquery

我目前有以下代码：

```
$(document).ready(function () {
    $(function () {
        $('#toggleinput').click(function () {
            $('[id^=POPUP]').toggle()
        });
        $(".img-swap").on('click', function () {
            if ($(this).attr("class") == "img-swap") {
                this.src = this.src.replace("_showall", "_hideall");
            } else {
                this.src = this.src.replace("_hideall", "_showall")
            }
            $(this).toggleClass("on");
        });
    });
}); 
```

我有一个名为的 div `div id="input"`，其中有一个分类（从 3-50+）其他 div 称为`div id="POPUP{Some number}"`.

所以我有这个：

```
<div id="input">
    <div id="POPUP438748234793"></div>
    <div id="POPUP437857482782"></div>
</div> 
```

我想要做的是只切换“输入” div 中的那些 POPUP div。将有另一个名为“响应”的 div，它也将具有 POPUP div。所以我想在两个不同父 div 的地方使用这段代码。现在，上面的代码会切换*所有*的 POPUP div，而不仅仅是输入的那些。我怎么做？

我是 JQuery 的新手，但我认为到目前为止它真的很棒！

**编辑** 奇怪的是，这些似乎都不起作用。也许我遗漏了一些东西，或者我没有给你一切来帮助你解决这个问题（可能是后者）。下面是我生成的输出中的 html 的一部分（我在一个单独的应用程序中执行此操作，所以您看到的一些代码您可能想知道为什么它甚至在那里，但是由于设置，我无法真正改变它（并且不想在每次进行更改时花费大量时间进行大规模修改））。

```
<div id="input">
    <div>
<ul style="list-style: disc;">
    <li class="Input1-Bullet"><p class="Input-Bullet"><a class="dropspot" href="javascript:TextPopup(this)" id="a3">merchantId</a></p>
    <div class="droptext" id="POPUP581417197" style="display: none;">
        <p class="Body1-Text">Logical Definition: This is the general definition of what the input type is in common terms.</p>
        <p class="Body1-Text">Technical Definition: This is the technical        definition of what the input type is; for example, it is the data stored in the X column 
     of the Y table.</p>
        <p class="Body1-Text">Required: Y/N</p>
        <p class="Body1-Text">Input Information: varchar 32, etc.</p>
    </div></li>
</ul> 
```

该额外`<div>`标签由应用程序在创建输出 html 文件时添加。我真的无法阻止它，从长远来看，编辑它会花费更多时间并且会出现问题。本质上，带有的线`merchantId`是可见的。点击它可以在下面的div（POPUP）中显示信息。我想在顶部使用一个按钮显示所有这些 POPUP div，只要它们在`input`div 内。

**编辑 2** 我的错误。我发现错误在于我没有调用我的图像`toggleinput`。我现在可以工作了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T15:43:35.530

您可以使用该`children`方法。例如`$('[id^=POPUP]').toggle()`，您可以不做，而是做`$("#input").children('div').toggle();`，假设这些是`input`.

如果不仅仅是弹出 div，你可以这样做`$("#input").children('div[id^=POPUP]').toggle();`，但如果你不需要消歧，第一个更干净一些。

[您可以在http://api.jquery.com/children/](http://api.jquery.com/children/)看到其他示例

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T15:44:13.807

`#input`这将选择id 为 的所有元素`POPUP`。使用`.children()`只会在 DOM 中下降一层。[http://api.jquery.com/find/](http://api.jquery.com/find/)

```
$('#input').find('[id^=POPUP]').toggle() 
```

如果您知道必须选择其中的所有`div`元素，`#input`然后替换`[id^=POPUP]`为`div`，它将起作用。

你也不应该需要`$(function (){ ... });`包装代码的那个。`$(document).ready(function () { ... });`就够了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T15:44:39.690

听起来您只需要对选择器进行一些研究。你可以嵌套选择器，这样你就可以做到这一点......

```
$("div#input div") 
```

这将选择具有输入 id 的 div 中的所有 div。

或者，您可以使用...

```
$("div#input > div") 
```

这只会选择输入 div 的直接子 div（如果任何弹出 div 中都有 div）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-13T15:51:34.180

将 $('[id^=POPUP]').toggle() 替换为 $('div#input > div[id^=POPUP]').toggle()

jsfiddle.net/zrpVm/

# iphone - 将 NSDate 转换为 NSString 时间问题

> ID：15389820
> 
> 赞同：0
> 
> 时间：2013-03-13T15:40:24.553
> 
> 标签：iphone, ios, objective-c

我有这个`NSDate`：

```
2013-03-14 17:35:00 +0000 
```

我尝试将其转换为`NSString`：

```
NSDateFormatter *formatter = [[NSDateFormatter alloc] init];
[formatter setDateFormat:@"MM/dd/yyyy hh:mm:ss"];
[formatter stringFromDate:item.startdate]; 
```

我得到的是：

```
03/14/2013 05:35:00 
```

如何修复它以给我日期与日期中的时间？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-13T15:50:26.637

在你的时间使用`HH`而不是，`hh`最好也设置 timeZone

```
NSDateFormatter *timeFormatter = [[NSDateFormatter alloc] init];
[timeFormatter setDateFormat:@"MM/dd/yyyy HH:mm:ss"];
[timeFormatter setTimeZone:[NSTimeZone timeZoneWithName:@"GMT"]];
NSString *newTime = [timeFormatter stringFromDate:[[NSDate alloc]init] ]; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-13T15:50:51.510

我想你想要`HH`24 小时制：

```
[formatter setDateFormat:@"MM/dd/yyyy HH:mm:ss"]; 
```

但是，我在[Data Formatting Guide](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/DataFormatting/Articles/dfDateFormatting10_4.html)中注意到了这一点，这可能会影响您：

> 在 iOS 中，用户可以覆盖默认的 AM/PM 与 24 小时时间设置。这可能会导致 NSDateFormatter 重写您设置的格式字符串。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-13T15:50:17.057

`[formatter setDateFormat:@"MM/dd/yyyy HH:mm:ss"];`

使用`H`而不是`h`获取 24 小时格式的时间。

# c++ - 损坏的累积缓冲区输出

> ID：15389824
> 
> 赞同：2
> 
> 时间：2013-03-13T15:40:33.017
> 
> 标签：c++, opengl, glut

我正在构建一个简单的 3D 游戏引擎，它建立在 OpenGL 之上，用于窗口和 I/O，GLUT。在尝试在引擎中构建运动模糊选项时，我遇到了 OpenGL 累积缓冲区的问题。本质上，这是应该为我执行此操作的一小段代码：

```
glAccum(GL_MULT, 0.99f);
glAccum(GL_ACCUM, 1.0f - 0.99f);
glAccum(GL_RETURN, 1.0f); 
```

我首先通过在我的方法中植入它来尝试这个代码块`Render()`，但它显示了一个看起来很糟糕的视图，其中只有几个选定的像素可见。所以，然后我用我找到代码的网站的其他源代码进行了尝试。我仍然遇到同样的问题。下面是问题的图片：

![累积缓冲区的输出。](../Images/691b9a2f7a4191eb53f5dc821f3f3dd7.png)

然后，我只是取出了累积缓冲区部分（应该实现运动模糊的三行），这是我得到的：

![外观正确，但没有预期的运动模糊](../Images/00a10103bbe1774f82ec6a8aef1fcad3.png)

当然，因为我删除了`glAccum()`线条，所以不会有运动模糊，但这至少告诉我显卡有问题（它不喜欢累积缓冲区？）或者那些代码行不起作用。

我不知道这是否重要，但我从 2011 年开始在 MacBook Pro 上通过 NetBeans 7.2 (C++) 运行代码。此外，我*确实*在以下行中请求了一个累积缓冲区：

```
glutInitDisplayMode(GLUT_DEPTH | GLUT_ACCUM | GLUT_DOUBLE | GLUT_RGBA); 
```

这是我刚刚拼凑的一段代码示例。我不确定代码中是否有问题，而且我知道我可能也没有使用最佳实践，但它明白了这一点。我仍然遇到此代码的错误：

```
#include <iostream>
#include <GLUT/GLUT.h>

using namespace std;

float Rotation = 0.0f;

void Reshape(int width, int height)
{
    glViewport(0, 0, width, height);

    glMatrixMode(GL_PROJECTION);
    glLoadIdentity();

    glOrtho(-1, 1, -1.0f * ((float)height / (float)width), 1.0f * ((float)height / (float)width), 0.1f, 200.0f);

    glMatrixMode(GL_MODELVIEW);
}

void Update(int value)
{
    Rotation++;
    glutPostRedisplay();
    glutTimerFunc(17, Update, 0);
}

void InitGL()
{
    glEnable(GL_DEPTH_TEST);
    glEnable(GL_CULL_FACE);
    glEnable(GL_COLOR_MATERIAL);
    glClearDepth(100.0f);
}

void Render(void)
{
    glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT);

    glLoadIdentity();
    gluLookAt(0, 0, 5.0f, 0, 0, 0, 0, 1, 0);

    glPushMatrix();
    {
        glRotatef(Rotation, 0.0, 1.0, 0.0);
        /* Render Icosahedron */
        glColor3f(0.5f, 0.5f, 0.5f);
        glutSolidIcosahedron();

        /* Render wireframe */
        glColor4f(1.0, 1.0, 1.0, 1.0);
        glLineWidth(2.0);
        glutWireIcosahedron();
    }
    glPopMatrix();

    /* Blur */
    glAccum(GL_MULT, 0.99);
    glAccum(GL_ACCUM, 0.01);
    glAccum(GL_RETURN, 1.0);

    glFlush();

    glutSwapBuffers();

}

int main(int argc, char** argv)
{
    glutInit(&argc, argv);
    glutInitDisplayMode(GLUT_DEPTH | GLUT_DOUBLE | GLUT_RGBA | GLUT_ACCUM);
    glutInitWindowSize(400, 400);
    glutCreateWindow("Test");
    glutDisplayFunc(Render);
    glutReshapeFunc(Reshape);

    InitGL();
    Reshape(400, 400);

    glutTimerFunc(17, Update, 0);
    glutMainLoop();

    return 0;
} 
```

# ruby-on-rails - 如何设计/建模具有许多具有有意义连接表的关系？

> ID：15389828
> 
> 赞同：6
> 
> 时间：2013-03-13T15:40:44.063
> 
> 标签：ruby-on-rails, ruby-on-rails-3.2

我无法很好地表达我想要做的事情（在问题标题中），所以为了纪念一张图片值一千字的说法；简而言之，我想做的是..

![在此处输入图像描述](../Images/c79147a9ec205b3c64fc64c7e5ab9f2c.png)

基本上，我所拥有的是**一个老师有很多约会**，**一个学生有很多约会**，大致翻译为：

![在此处输入图像描述](../Images/1fcc43d2968f4b7df843437faa9b168e.png)

我试图远离使用**has_and_belongs_to_many**宏，因为我的**约会**模型有一些意义（操作），例如它有一个布尔字段：*确认*。

所以，我在考虑使用**has_many :through**宏，也许使用“可任命”连接表模型？你们有什么感想？

我要编写的方案很简单；

1.  学生在特定日期/时间请求与老师约会
2.  如果老师有空（并且想在那个日期/时间上课），她会确认约会。

我希望你能告诉我你会如何解决这个问题？我使用 has_many :through 宏的假设是否*正确*？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T06:29:19.540

教师和学生都可以从单个类继承，例如 Person。然后在 Person 和 Appointments 之间创建关联。通过这种方式，您可以保持架构开放，以便将来如果您想添加“父母”，那么他们可以轻松集成并可以参与约会。

您如何与子类（学生、家长、教师）进行连接可能并不完全简单。它可能涉及我不太喜欢的多态关系。你应该摆脱一个单一的连接表。

在任何情况下，您都希望设计可以扩展您的系统。早期的一些额外工作将为您节省很多以后的工作。

# rpgle - 在 ILE RPG 中检查 sql found 条件的正确方法是什么？

> ID：15389830
> 
> 赞同：7
> 
> 时间：2013-03-13T15:40:48.213
> 
> 标签：rpgle, db2-400, embedded-sql

在 RPG 中使用嵌入式 SQL 时，您通常会使用游标和`dow`-loop 来处理结果中的所有行。循环中的条件以某种方式依赖于`SQLCOD`和/或`SQLSTT`SQLRPGLE 程序中的一些全局可用变量？

但是检查这些值的正确方法是什么？有些人建议`SQLCOD = 0`其他人`not (SQLCOD = +100 or SQLSTT = '02000')`。一个在所有警告上都失败了，另一个在某些错误上没有失败，所以我不满意。

为了说明我用一些代码做什么：

```
Pmain             B
D                 PI
Dmy_ds          E DS                  extname(SOME_TABLE)
D                                     qualified
 /free
  exec sql
    DECLARE cur CURSOR FOR
      SELECT *
      FROM some_table;
  exec sql 
    OPEN cur;
  exec sql
    FETCH cur
     INTO :my_ds;
  dow sql_found();
      exec sql
        FETCH cur
         INTO :my_ds;
  enddo;
  exec sql
    CLOSE cur;
 /end-free
Pmain             E

Psql_found        B
D                 PI              N
 /free
  // insert return statement here...
 /end-free
Psql_found        E 
```

我在这里寻找正确的返回语句，如果没有发生错误，这将使我遍历所有行，并在发生错误时让我离开。一些体面的方法来检查错误的奖励积分。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-13T18:55:47.773

SQLSTATE 更好，IBM 推荐。

来自 IBM 的 InfoCenter [SQL 消息和代码参考：SQLCODE 和 SQLSTATE 概念](http://pic.dhe.ibm.com/infocenter/iseries/v7r1m0/index.jsp?topic=%2Frzala%2Frzalaco.htm)

> SQLSTATE 是首选的标准返回码。

SQLSTATE 是 5 个字符，前两个字节标识一[类条件](http://pic.dhe.ibm.com/infocenter/iseries/v7r1m0/index.jsp?topic=%2Frzala%2Frzalaclass.htm)。

*   '00' = 不合格的成功完成
*   '01' = 警告
*   '02' = 无数据

其他任何事情都是错误。我通常只检查'00'。

简单的。简单的。更便携。

使用 SQLCODE 通常涉及代码列表，恕我直言，这些代码对开发人员不太友好。

**例子：**

就个人而言，我通常包括这样的定义和代码：

```
 D xSQLState@      s               *   inz( %addr(SQLState) )
 D xSQLState       ds             5    based(xSQLState@)
 D  xSQLState2                    2a
 D   
 D Success_On_SQL  C                   const('00')
 D Warning_On_SQL  C                   const('01')
 D NoData_On_SQL   C                   const('02') 
```

然后在任何 SQL 操作之后，我一般都会检查

```
 if xSQLState2 <> Success_On_Sql;
     someflag = true;
   endif; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-13T17:05:21.790

最佳实践是处理您期望的 SQLCODE（作为预期处理的一部分）并添加异常代码来处理您不希望的代码。一种实现：

```
 dow 1=1;  // forever
      exec sql
        FETCH cur
         INTO :my_ds;
  // normal exit         
  if sqlstt = SQL_NODATA;
    SFLEND = *on;        
    leave;               
  endif;                 

  // can't CAST a value
  if sqlstt = SQL_CAST;         // CAST error                               
    ... tell user there's an error and read another
    iter;                                                                  
  endif;                                                                   

  // decimal data error
  if sqlstt = SQL_DDE;
    tell user to call IT and stop reading
    leave;                                      
  endif;                                        

  // whoops! not expected at all.  Dump for post-mortem
  if sqlstt <> SQL_NORMAL;                             
    ... tell user to call IT and stop reading
    dump(a);                             
    leave;                                              
  endif;                                               

  // test for end of loop
  // filled subfile page?
  enddo;  // forever 
```

使用这种类型的实现，您必须故意离开循环；无论您是填充了子文件页面、加载了数组中的最高元素还是遇到了错误。我不确定是否有一个通用的实现可以处理所有情况。如果您有记录锁定，有时您可能想离开读取循环，有时您想发出一条消息并重试（例如）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T16:05:13.157

我对该主题进行了更多搜索，并[在 IBM 的网站上找到了一些东西](http://publib.boulder.ibm.com/infocenter/iseries/v5r3/index.jsp?topic=/db2/rbafzmstcksql.htm)（引用）：

> ```
> The SQLCODE is also set by the database manager after each SQL 
> statement is executed as follows: 
>   - If SQLCODE = 0 and SQLWARN0 is blank, execution was successful.
>   - If SQLCODE = 100, no data was found. For example, a FETCH 
>     statement returned no data, because the cursor was positioned 
>     after the last row of the result table.
>   - If SQLCODE > 0 and not = 100, execution was successful with a 
>     warning.
>   - If SQLCODE = 0 and SQLWARN0 = 'W', execution was successful 
>     with a warning.
>   - If SQLCODE < 0, execution was not successful. 
> ```

这会导致我`sql_found()`这样：

```
Pfound_sql        B
D                 PI              N
 /free
  return (SQLCOD >= 0) and (SQLCOD<>100);
 /end-free
Pfound_sql        E 
```

这应该处理数据结束条件并在所有错误上失败。我不确定是否有一些我应该注意的警告（不想陷入无限循环，如果有导致不阅读的警告）。

# php - 匹配 url 的一部分

> ID：15389831
> 
> 赞同：0
> 
> 时间：2013-03-13T15:40:51.433
> 
> 标签：php, regex

我想获取其中包含的任何网址的所有匹配`index.php?route=forum/`项

要过滤的示例网址是：

[http://test.codetrove.com/index.php?route=forum/forum](http://test.codetrove.com/index.php?route=forum/forum)

[http://test.codetrove.com/index.php?route=forum/forum_category&forum_path=2](http://test.codetrove.com/index.php?route=forum/forum_category&forum_path=2)

`index.php?route=forum/`因此，如果它包含http 并且域可以是 http 或 https 或任何域之类的任何内容，我需要匹配为真。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T15:44:22.673

您可以使用正则表达式：

```
/index\.php\?route=forum\/.*/ 
```

或使用 $_GET 变量

```
if(preg_match('/forum\/.*/', $_GET['route'])) {
    echo 'yahoo';
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T15:45:31.797

与其使用棒球棒击打蜘蛛，不如看看 strpos()。

```
$string = "index.php?route=forum/";
if (strpos($url, $string) !== false) {
    //we have a match
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T15:46:01.267

一种可能性是使用[此处](http://www.php.net/manual/en/function.strpos.php)`strpos`记录的 php 函数

```
$IsMatch = strpos ( $url , "index.php?route=forum/"); 
```

# laravel - Laravel 登录后重定向回原来的目的地

> ID：15389833
> 
> 赞同：213
> 
> 时间：2013-03-13T15:40:59.420
> 
> 标签：laravel, redirect, laravel-4

这似乎是一个非常基本的流程，并且`Laravel`对于基本的事情有很多很好的解决方案，我觉得我错过了一些东西。

用户单击需要身份验证的链接。Laravel 的*auth*过滤器启动并将它们路由到登录页面。用户登录，然后转到他们在“身份验证”过滤器启动之前尝试访问的原始页面。

有没有一种好方法可以知道他们最初试图访问哪个页面？由于 Laravel 是拦截请求的那个，我不知道它是否会在用户登录后跟踪某个地方以便于路由。

如果没有，我很想知道你们中的一些人是如何手动实现的。

* * *

## 回答 #1

> 赞同：250
> 
> 时间：2013-03-13T18:11:46.773

## 对于 Laravel 5.3 及更高版本

检查下面[斯科特的答案](https://stackoverflow.com/a/39595605/908579)。

## 对于 Laravel 5 到 5.2

简单的说，

在 auth 中间件上：

```
// redirect the user to "/login"
// and stores the url being accessed on session
if (Auth::guest()) {
    return redirect()->guest('login');
}
return $next($request); 
```

登录操作：

```
// redirect the user back to the intended page
// or defaultpage if there isn't one
if (Auth::attempt(['email' => $email, 'password' => $password])) {
    return redirect()->intended('defaultpage');
} 
```

## 对于 Laravel 4（旧答案）

在给出这个答案时，框架本身没有官方支持。现在你可以使用~~下面bgdrl指出的方法~~这个方法：（*我试过更新他的答案，但似乎他不会接受）*

在身份验证过滤器上：

```
// redirect the user to "/login"
// and stores the url being accessed on session
Route::filter('auth', function() {
    if (Auth::guest()) {
        return Redirect::guest('login');
    }
}); 
```

登录操作：

```
// redirect the user back to the intended page
// or defaultpage if there isn't one
if (Auth::attempt(['email' => $email, 'password' => $password])) {
    return Redirect::intended('defaultpage');
} 
```

## 对于 Laravel 3（甚至更老的答案）

你可以像这样实现它：

```
Route::filter('auth', function() {
    // If there's no user authenticated session
    if (Auth::guest()) {
        // Stores current url on session and redirect to login page
        Session::put('redirect', URL::full());
        return Redirect::to('/login');
    }
    if ($redirect = Session::get('redirect')) {
        Session::forget('redirect');
        return Redirect::to($redirect);
    }
}); 
```

```
// on controller
public function get_login()
{
    $this->layout->nest('content', 'auth.login'); 
}

public function post_login()
{
    $credentials = [
        'username' => Input::get('email'),
        'password' => Input::get('password')
    ];

    if (Auth::attempt($credentials)) {
        return Redirect::to('logged_in_homepage_here');
    }

    return Redirect::to('login')->with_input();
} 
```

将重定向存储在 Session 上的好处是即使用户错过了键入他的凭据或者他没有帐户并且必须注册，也可以将其持久化。

这也允许除 Auth 之外的任何其他东西在会话上设置重定向，它会神奇地工作。

* * *

## 回答 #2

> 赞同：96
> 
> 时间：2016-09-20T13:34:47.140

# 拉拉维尔> = 5.3

5.3 中的 Auth 更改使实现这一点更容易，并且与 5.2 略有不同，因为 Auth 中间件已移至服务容器。

### 修改新的中间件授权重定向器

```
/app/Http/Middleware/RedirectIfAuthenticated.php 
```

稍微改变句柄函数，如下所示：

```
public function handle($request, Closure $next, $guard = null)
{
    if (Auth::guard($guard)->check()) {
        return redirect()->intended('/home');
    }

    return $next($request);
} 
```

### TL;DR 解释

唯一的区别在于第 4 行；默认情况下，它看起来像这样：

```
return redirect("/home"); 
```

由于 Laravel >= 5.3 在检查 Auth Guard 时会自动保存最后一个“预期”路由，因此它变为：

```
return redirect()->intended('/home'); 
```

这告诉 Laravel 在登录前重定向到最后一个预期页面，否则默认转到“/home”或您想发送它们的任何地方。

希望这对其他人有所帮助 - 5.2 和 5.3 之间的差异并不多，特别是在这个领域有很多。

* * *

## 回答 #3

> 赞同：28
> 
> 时间：2013-08-01T09:29:26.250

我发现这两种很棒的方法可能对您非常有帮助。

```
Redirect::guest();
Redirect::intended(); 
```

您可以将此过滤器应用于需要身份验证的路由。

```
Route::filter('auth', function()
{
    if (Auth::guest()) {
           return Redirect::guest('login');
    }
}); 
```

这种方法的基本作用是存储您尝试访问的页面，并将您重定向到*登录*页面。

用户通过身份验证后，您可以调用

```
return Redirect::intended(); 
```

它会将您重定向到您最初尝试访问的页面。

尽管我通常使用以下方法，但这是一个很好的方法。

```
Redirect::back() 
```

*你可以查看[这个](http://toddish.co.uk/blog/laravel-4-session-redirect-urls/)很棒的博客。*

* * *

## 回答 #4

> 赞同：20
> 
> 时间：2013-06-17T08:54:02.660

您可以使用**Redirect::intended**功能。它会将用户重定向到他们在被身份验证过滤器捕获之前尝试访问的 URL。如果预期的目标不可用，则可以为此方法提供一个备用 URI。

在登录/注册后：

```
return Redirect::intended('defaultpageafterlogin'); 
```

* * *

## 回答 #5

> 赞同：14
> 
> 时间：2017-07-23T14:46:50.043

将您的 LoginControllers 构造函数更改为：

```
public function __construct()
    {
        session(['url.intended' => url()->previous()]);
        $this->redirectTo = session()->get('url.intended');

        $this->middleware('guest')->except('logout');
    } 
```

它会将您重定向回登录页面之前的页面（返回 2 页）。

* * *

## 回答 #6

> 赞同：12
> 
> 时间：2013-11-16T09:03:31.800

我已经在我的语言选择器代码上使用了一段时间。只要您只需要返回 1 页，它就可以正常工作：

```
return Redirect::to(URL::previous()); 
```

它不是最强大的解决方案，但它超级简单，可以帮助解决一些难题。:)

* * *

## 回答 #7

> 赞同：8
> 
> 时间：2015-02-21T12:11:23.823

```
return Redirect::intended('/'); 
```

这会将您重定向到项目的默认页面，即起始页面。

* * *

## 回答 #8

> 赞同：6
> 
> 时间：2015-07-27T05:50:30.803

对于 laravel 5.* 试试这些。

```
return redirect()->intended('/'); 
```

或者

```
return Redirect::intended('/'); 
```

* * *

## 回答 #9

> 赞同：5
> 
> 时间：2013-05-31T22:52:11.550

# 拉拉维尔 3

我稍微调整了您的（Vinícius Fragoso Pinheiro）代码，并将以下内容放在 filters.php

```
Route::filter('auth', function()
{
    // If there's no user authenticated session
    if (Auth::guest()) {
        // Flash current url to session and redirect to login page
        Session::flash('redirect', URL::full());
        return Redirect::guest('login');
    }
}); 
```

然后在我的 AuthController.php 中：

```
// Try to log the user in.
if (Auth::attempt($userdata)) {

    if ($redirect = Session::get('redirect')) {
        return Redirect::to($redirect);
    } else {
        // Redirect to homepage
        return Redirect::to('your_default_logged_in_page')->with('success', 'You have logged in successfully');
    }
} else {
    // Reflash the session data in case we are in the middle of a redirect 
    Session::reflash('redirect');

    // Redirect to the login page.
    return Redirect::to('login')->withErrors(['password' => 'Password invalid'])->withInput(Input::except('password'));
} 
```

请注意，`'redirect'`如果存在身份验证问题，会话数据将被重新刷新。这样可以在任何登录事故期间保持重定向不变，但如果用户在任何时候点击离开，下一个登录过程不会被会话数据中断。

您还需要在显示登录表单时重新刷新数据`AuthController`，否则链会中断：

```
public function showLogin()
{
    // Reflash the session data in case we are in the middle of a redirect 
    Session::reflash('redirect');

    // Show the login page
    return View::make('auth/login');
} 
```

* * *

## 回答 #10

> 赞同：4
> 
> 时间：2021-04-30T11:39:15.167

# 对于 Laravel 8

以下方法适用于 Laravel 8。

## 基于控制器的方法

```
/app/Http/Controllers/Auth/AuthenticatedSessionController.php 
```

### 预登录

预期的 url 将存储在创建时的会话中：

```
/**
 * Display the login view.
 *
 * @return \Illuminate\View\View
 */
public function create()
{
    session(['url.intended' => url()->previous()]);
    return view('auth.login');
} 
```

### 登录后

成功登录后，如果会话中提供了预期的 URL，则重定向到它，否则重定向到默认 URL：

```
/**
 * Handle an incoming authentication request.
 *
 * @param  \App\Http\Requests\Auth\LoginRequest  $request
 * @return \Illuminate\Http\RedirectResponse
 */
public function store(LoginRequest $request)
{
    $request->authenticate();

    //in case intended url is available
    if (session()->has('url.intended')) {
        $redirectTo = session()->get('url.intended');
        session()->forget('url.intended');
    }

    $request->session()->regenerate();

    if ($redirectTo) {
        return redirect($redirectTo);
    }
    return redirect(RouteServiceProvider::HOME);
} 
```

* * *

## 回答 #11

> 赞同：3
> 
> 时间：2015-06-23T18:47:26.057

利用`Redirect;`

然后使用这个：

```
return Redirect::back(); 
```

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2020-04-16T07:37:20.877

**在 Laravel 5.8 中**

**在 App\Http\Controllers\Auth\LoginController 添加以下方法**

```
public function showLoginForm()
{
    if(!session()->has('url.intended'))
        {
            session(['url.intended' => url()->previous()]);
        }
    return view('auth.login');
} 
```

**在 App\Http\Middleware\RedirectIfAuthenticated 中将“return redirect('/home');”替换为以下内容**

```
 if (Auth::guard($guard)->check()) 
    {
        return redirect()->intended();
    } 
```

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2020-02-08T11:37:10.960

如果您使用 axios 或其他 AJAX javascript 库，您可能想要检索 url 并传递给前端

你可以用下面的代码做到这一点

```
 $default = '/';

   $location = $request->session()->pull('url.intended', $default);

    return ['status' => 200, 'location' => $location]; 
```

这将返回一个 json 格式的字符串

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2018-01-11T13:22:27.393

对于**Laravel 5.5**和可能 5.4

在**App\Http\Middleware\RedirectIfAuthenticated**更改`redirect('/home')`为`redirect()->intended('/home')`句柄函数中：

```
public function handle($request, Closure $next, $guard = null)
{
    if (Auth::guard($guard)->check()) {
        return redirect()->intended('/home');
    }

    return $next($request);
} 
```

在**App\Http\Controllers\Auth\LoginController**创建`showLoginForm()`函数如下：

```
public function showLoginForm()
{
    if(!session()->has('url.intended'))
    {
        session(['url.intended' => url()->previous()]);
    }
    return view('auth.login');
} 
```

这样，如果有另一个页面的意图，它将重定向到那里，否则它将重定向到主页。

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2019-05-05T22:12:20.457

**Laravel 现在开箱即用地支持此功能！** （我相信从 5.5 或更早的版本开始）。

向您添加一个`__construct()`方法，`Controller`如下所示：

```
public function __construct()
{
    $this->middleware('auth');
} 
```

登录后，您的用户将被重定向到他们最初打算访问的页面。

您还可以根据应用程序逻辑的需要添加 Laravel 的电子邮件验证功能：

```
public function __construct()
{
    $this->middleware(['auth', 'verified']);
} 
```

该文档包含一个非常简短的示例：

*   [https://laravel.com/docs/5.8/authentication#protecting-routes](https://laravel.com/docs/5.8/authentication#protecting-routes)

也可以通过使用`except` or`only`选项来选择中间件应用到哪个控制器的方法。

示例`except`：

```
public function __construct()
{
    $this->middleware('auth', ['except' => ['index', 'show']]);
} 
```

示例`only`：

```
public function __construct()
{
    $this->middleware('auth', ['only' => ['index', 'show']]);
} 
```

有关中间件选项`except`的更多信息：`only`

*   [https://laravel.com/api/5.8/Illuminate/Routing/ControllerMiddlewareOptions.html#method_except](https://laravel.com/api/5.8/Illuminate/Routing/ControllerMiddlewareOptions.html#method_except)

* * *

## 回答 #16

> 赞同：-1
> 
> 时间：2016-08-16T05:30:24.450

# 拉拉维尔 5.2

如果您正在使用另一个中间件，例如**Admin**中间件，您可以使用以下内容为*url.intended设置会话：*

基本上我们需要手动`\Session::put('url.intended', \URL::full());`设置重定向。

**例子**

```
 if (\Auth::guard($guard)->guest()) {
      if ($request->ajax() || $request->wantsJson()) {
         return response('Unauthorized.', 401);
      } else {
        \Session::put('url.intended', \URL::full());
        return redirect('login');
      }
  } 
```

**登录尝试**

确保在登录尝试使用`return \Redirect::intended('default_path');`

* * *

## 回答 #17

> 赞同：-1
> 
> 时间：2019-02-01T17:18:10.030

**我将以下方法与 Laravel 5.7 的自定义登录控制器和中间件一起使用，但我希望它适用于任何 laravel 5 版本**

*   中间件内部

    ```
    if (Auth::check()){
        return $next($request);
    }
    else{
      return redirect()->guest(route('login'));
    } 
    ```

*   内部控制器登录方法

    ```
    if (Auth::attempt(['email' => $email, 'password' => $password])) {
    return redirect()->intended('/default');
    } 
    ```

*   如果您需要将意图的 url 传递给**客户端**，您可以尝试以下操作

    ```
     if (Auth::attempt(['username' => $request->username, 'password' => $request->password])) {
           $intended_url= redirect()->intended('/default')->getTargetUrl();
           $response = array(
          'status' => 'success',
          'redirectUrl' => $intended_url,
          'message' => 'Login successful.you will be redirected to home..', );
          return response()->json($response);
        } else {
            $response = array(
          'status' => 'failed',
          'message' => 'username or password is incorrect', );
         return response()->json($response);
        } 
    ```

* * *

## 回答 #18

> 赞同：-1
> 
> 时间：2020-01-09T15:22:04.880

首先，您应该知道如何将用户重定向到“登录”路线：

```
return redirect()->guest('/signin'); 
```

不像这样：

```
return redirect()->intended('/signin'); 
```

* * *

## 回答 #19

> 赞同：-1
> 
> 时间：2016-02-20T18:32:59.773

```
 // Also place this code into base controller in contract function,            because ever controller extends base  controller
 if(Auth::id) {
  //here redirect your code or function
 }
if (Auth::guest()) {
       return Redirect::guest('login');
} 
```

* * *

## 回答 #20

> 赞同：-1
> 
> 时间：2018-10-30T12:21:20.690

对于 Laravel 5.7，您需要更改为：

> 中间件>RedirectIfAuthenticated.php

改变这个：

```
public function handle($request, Closure $next, $guard = null)
    {
        if (Auth::guard($guard)->check()) {
            return redirect('/admin');
        }

        return $next($request);
    } 
```

对此：

```
public function handle($request, Closure $next, $guard = null)
    {
        if (Auth::guard($guard)->check()) {
            return redirect('/yourpath');
        }

        return $next($request);
    } 
```

> **返回重定向（'/你的路径'）；**

* * *

## 回答 #21

> 赞同：-1
> 
> 时间：2017-05-12T14:37:03.960

**Larvel 5.3** 这实际上对我有用，只需更新 LoginController.php

```
 use Illuminate\Support\Facades\Session;
 use Illuminate\Support\Facades\URL;

public function __construct()
{
    $this->middleware('guest', ['except' => 'logout']);
    Session::set('backUrl', URL::previous());
}

public function redirectTo()
{
    return Session::get('backUrl') ? Session::get('backUrl') :   $this->redirectTo;
} 
```

参考：[https ://laracasts.com/discuss/channels/laravel/redirect-to-previous-page-after-login](https://laracasts.com/discuss/channels/laravel/redirect-to-previous-page-after-login)

* * *

## 回答 #22

> 赞同：-1
> 
> 时间：2016-02-24T20:35:46.413

这是我对 5.1 的解决方案。我需要有人点击帖子上的“喜欢”按钮，重定向到登录，然后返回原始页面。如果他们已经登录，`href`则“Like”按钮的“Like”按钮会被 JavaScript 拦截并转换为 AJAX 请求。

该按钮类似于`<a href="/like/931">Like This Post!</a>`. `/like/931`由需要`auth`中间件的 LikeController 处理。

在 Authenticate 中间件（`handle()`函数）中，在开头添加如下内容：

```
 if(!str_contains($request->session()->previousUrl(), "/auth/login")) {
        $request->session()->put('redirectURL', $request->session()->previousUrl());
        $request->session()->save();
    } 
```

更改`/auth/login`为用于登录的 URL。此代码将原始页面的 URL 保存在会话中，除非该 URL 是登录 URL。这是必需的，因为它*看起来*好像这个中间件被调用了两次。我不知道为什么或如果这是真的。但是，如果您不检查该条件，它将等于正确的原始页面，然后以某种方式偶然发现`/auth/login`. 可能有一种更优雅的方法可以做到这一点。

然后，在`LikeController`处理原始页面上按下的按钮的 URL 的控制器或任何控制器中：

```
//some code here that adds a like to the database
//...
return redirect($request->session()->get('redirectURL')); 
```

这种方法超级简单，不需要重写任何现有函数，而且效果很好。Laravel 可能有一些更简单的方法可以做到这一点，但我不确定它是什么。在我的情况下使用该`intended()`函数不起作用，因为 LikeController 还需要知道以前的 URL 是什么才能重定向回它。本质上是两个级别的向后重定向。

* * *

## 回答 #23

> 赞同：-1
> 
> 时间：2016-01-16T15:28:41.597

您是否在您的 routes.php 中尝试过这个？

```
Route::group(['middleware' => ['web']], function () {
    //
    Route::get('/','HomeController@index');
}); 
```

* * *

## 回答 #24

> 赞同：-1
> 
> 时间：2020-10-09T15:32:24.650

这在 laravel 8 中对我有用：

将此添加到您的 LoginController.php：

```
public function __construct()
{
    session(['url.intended' => url()->previous()]);
    $this->redirectTo = session()->get('url.intended');

    $this->middleware('guest')->except('logout');
} 
```

它会将您重定向 2 次，因此会重定向到您登录前的页面。

归功于@MevlütÖzdemir 的答案！

* * *

## 回答 #25

> 赞同：-1
> 
> 时间：2016-06-15T13:56:02.597

**对于 Laravel 5.2**（我之前没有使用过的版本）

将代码粘贴到文件 app\Http\Controllers\Auth\AurhController.php

```
 /**
 * Overrides method in class 'AuthenticatesUsers'
 *
 * @return \Illuminate\Contracts\View\Factory|\Illuminate\View\View
 */
public function showLoginForm()
{
    $view = property_exists($this, 'loginView')
        ? $this->loginView : 'auth.authenticate';
    if (view()->exists($view)) {
        return view($view);
    }
    /**
     * seve the previous page in the session
     */
    $previous_url = Session::get('_previous.url');
    $ref = isset($_SERVER['HTTP_REFERER']) ? $_SERVER['HTTP_REFERER'] : '';
    $ref = rtrim($ref, '/');
    if ($previous_url != url('login')) {
        Session::put('referrer', $ref);
        if ($previous_url == $ref) {
            Session::put('url.intended', $ref);
        }
    }
    /**
     * seve the previous page in the session
     * end
     */
    return view('auth.login');
}
/**
 * Overrides method in class 'AuthenticatesUsers'
 *
 * @param Request $request
 * @param $throttles
 *
 * @return \Illuminate\Http\RedirectResponse
 */
protected function handleUserWasAuthenticated(Request $request, $throttles)
{
    if ($throttles) {
        $this->clearLoginAttempts($request);
    }
    if (method_exists($this, 'authenticated')) {
        return $this->authenticated($request, Auth::guard($this->getGuard())->user());
    }
    /*return to the previous page*/
    return redirect()->intended(Session::pull('referrer'));
    /*return redirect()->intended($this->redirectPath()); /*Larevel default*/
} 
```

并导入命名空间：`use Session;`

如果您没有对文件 app\Http\Controllers\Auth\AurhController.php 进行任何更改，则可以将其替换为[GitHub中的文件](https://github.com/zdorovoveselo/Laravel-redirect-back-to-original-destination-after-login)

# asterisk - freepbx 和 java 服务器交互

> ID：15389834
> 
> 赞同：0
> 
> 时间：2013-03-13T15:41:00.760
> 
> 标签：asterisk, asteriskami, freepbx

我想做freepbx和java web server的集成。

1.  将有一个 IVR。
2.  IVR 会询问来电者年龄
3.  这个年龄应该通过一些网络服务器输入到数据库中。

1和2可以在freepbx中完成。不确定数据（在键盘上按下的年龄）将如何重定向到其他服务器。

我需要通过 admin ui 在 freepbx 中进行哪些配置？获取年龄信息后，我是否需要任何特定类型的服务器来处理来自 freepbx 的请求？

asterisk-java 对此有何帮助？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T03:36:45.260

您必须进行自定义编程以将信息发送到其他服务器。

Freepbx 网络不是为此而设计的，它是用于小型办公室的简单哑 pbx，免费一个。

您不能通过 GUI 执行此操作（使用第三方自由职业者请求专门的 freepbx 模块的变体除外）。

如果您仍想使用“FreePBX 方式”，请阅读以下材料：

*   [http://www.freepbx.org/trac/wiki/DevWiki](http://www.freepbx.org/trac/wiki/DevWiki)
*   [http://www.asteriskguru.com/tutorials/extensions_conf.html](http://www.asteriskguru.com/tutorials/extensions_conf.html)

# python - 使用 Python/ET 从 XML 中解析特定元素

> ID：15389835
> 
> 赞同：0
> 
> 时间：2013-03-13T15:41:01.987
> 
> 标签：python, xml, parsing, elementtree

我有以下几行的XML：

```
<?xml version="xxx"?>
<doc:document xmlns:doc="some value 1...">
    <rdf:RDF xmlns:rdf="some value 2...">
        <rdf:Description rdf:about="some value...">
            <dct:format xmlns:dct="http://someurl/">some value 3</dct:format>
            <dct:title xmlns:dct="http://someurl/">some text of interest to me</dct:title>
        </rdf:Description>
    </rdf:RDF>
</doc:document> 
```

如何使用 Python/ETree 获得“我感兴趣的一些文本”？

提前感谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T15:47:08.377

您需要`title`通过指定命名空间来查找元素：

```
tree.find('.//dct:title', namespaces={'dct': 'http://purl.org/dc/terms/'}) 
```

您*必须*在每次搜索时传递一个`namespaces`映射，因此您也可以预先指定并重用：

```
nsmap = {
    'dct': 'http://purl.org/dc/terms/',
    'doc': 'http://www.witbd.org/xmlns/common/document/',
    'rdf': 'http://www.w3.org/1999/02/22-rdf-syntax-ns#',
}

tree.find('.//dct:title', namespaces=nsmap) 
```

对于您的示例文档（已恢复命名空间），这给出了：

```
>>> tree.find('.//dct:title', namespaces=nsmap)
<Element '{http://purl.org/dc/terms/}title' at 0x105ec4690>
>>> tree.find('.//dct:title', namespaces=nsmap).text
'some text of interest to me' 
```

您还可以在 XPath 表达式中使用命名空间：

```
tree.find('.//{http://purl.org/dc/terms/}title') 
```

这就是使用前缀和`namespaces`地图在内部做的事情。

# c# - 实体框架数据库种子不播种

> ID：15389839
> 
> 赞同：1
> 
> 时间：2013-03-13T15:41:11.057
> 
> 标签：c#, asp.net, asp.net-mvc, entity-framework, initialization

我对EF很陌生。我正在尝试`Seed`使用 MVC 4 覆盖我的自定义初始化程序中的一个方法。

问题是当 EF 创建数据库时，我没有找到任何插入到我的`Admins`表中的初始记录。这是我的代码：

```
namespace FP.Domain.Configurations
{
    public class InitializeSeed : DropCreateDatabaseIfModelChanges<EFDbContext>
    {
        protected override void Seed(EFDbContext context)
        {
            context.Admins.Add(new Admins
            {                
                Username = "admin",
                Password = "admin123456",
            });
            base.Seed(context);
        }
    }
} 
```

这是我的控制器：

```
namespace FP.WebUI.Controllers
{
    public class AdminController : Controller
    {       
        public ViewResult Login()
        {
            Database.SetInitializer(new InitializeSeed());
            return View();
        }

    }
} 
```

这是我的`Admins`实体：

```
namespace FP.Domain.Entities
{
    public class Admins
    {
        public int ID { get; set; }
        public string Username { get; set; }
        public string HashedPassword { get; set; }

        private string _password;
        public string Password
        {
            set
            {
                this._password = value;
                byte[] tempSrc = ASCIIEncoding.ASCII.GetBytes(_password);                    
                HashedPassword = Convert.ToBase64String(new SHA256CryptoServiceProvider().ComputeHash(tempSrc));
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T15:54:26.463

您没有将更改保存到数据库。请注意，Seed 的默认实现什么也不做。

尝试在种子中添加对[SaveChanges的调用。](http://msdn.microsoft.com/en-us/library/system.data.entity.dbcontext.savechanges%28v=vs.103%29.aspx)

```
protected override void Seed(EFDbContext context)
{
    context.Admins.Add(new Admins
    {                
        Username = "admin",
        Password = "admin123456",
    });
    base.Seed(context);
    context.SaveChanges();
} 
```

# regex - 简单的电子邮件正则表达式不允许在 @ 之前和之后使用连字符

> ID：15389841
> 
> 赞同：2
> 
> 时间：2013-03-13T15:41:15.677
> 
> 标签：regex, validation, email

我在网上某处发现了这个简单的正则表达式（我知道它可能并不完美）来验证电子邮件地址。

```
/^(?:\w+\.?)*\w+@(?:\w+\.)+\w+$/ 
```

问题是，这个正则表达式不允许以下情况：

```
myname@test-domain.com
my-name@test-domain.com 
```

有任何想法吗？

附言。我在 javascript 中使用这个正则表达式。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-13T15:43:59.190

如果您只想添加连字符，可以将正则表达式更改为：

```
/^(?:\w+[\-\.])*\w+@(?:\w+[\-\.])*\w+\.\w+$/ 
```

要添加其他特殊字符，例如下划线，只需将它们放在*第一*对（不是*第二*对）方括号中，即更改`[\-\.]`为`[\-\._]`.

也看看[这个问题及其答案。](https://stackoverflow.com/questions/201323/using-a-regular-expression-to-validate-an-email-address)

# web-crawler - 实时获取论坛最新帖子

> ID：15389844
> 
> 赞同：0
> 
> 时间：2013-03-13T15:41:19.063
> 
> 标签：web-crawler, web-scraping

有一个非常有名的论坛，我想实时获取最新的帖子并发布在我的博客上。该论坛没有API。

我正在考虑每 5 秒向论坛发送一次请求，检查是否有新帖子并复制它。

但是每天我将不得不发送 7200 个请求，这很糟糕，不是吗。

请问有什么方法/建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T15:42:40.493

那么简单的方法RSS呢？

# powershell - 括号对 powershell Get-Content cmdlet 的影响

> ID：15389849
> 
> 赞同：3
> 
> 时间：2013-03-13T15:41:26.613
> 
> 标签：powershell, cmd, powershell-2.0

在 Get-Content cmdlet 周围放置括号有什么影响？为什么我可以使用括号读取和写入同一个文件但不能没有？

这是相关代码的示例。

```
powershell -command "(Get-Content SomeFile.sql) | ForEach-Object { $_ -replace \"BEFORE\", \"AFTER\" } | Set-Content SomeFile.sql" 
```

Get-Content cmdlet 是否会保留文件句柄，直到默认执行整个命令？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-13T15:53:16.173

> Get-Content cmdlet 是否保留了文件句柄

是的。

如果没有括号，管道将在每次`Get-Content`输出一个对象（即文件中的一行文本）时运行。

另一方面，使用括号`Get-Content`将运行完成，为整个文件创建一个字符串数组，然后为每一行运行管道。

所以在前一种情况下，文件将保持打开状态，而在第二种情况下，整个文件被读入内存。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T16:06:14.247

如果没有括号，Get-Content 会打开文件以供读取，但同时您实际上会尝试写入同一个文件。

Parens 强制读取操作在进入下一个阶段之前完成，通过管道传递内容。

# java - string arraylist 删除一个元素并再次将元素放在同一位置

> ID：15389852
> 
> 赞同：0
> 
> 时间：2013-03-13T15:41:32.340
> 
> 标签：java, arraylist

我创建了字符串数组列表，我在其中复制了数据库中的所有数据。然后我使用 al.remove(1, null) 从 arraylist 中删除了一条记录。现在我想在没有数据的位置添加记录。我的意思是我想在数据为空的位置添加数据。我确实写了 al.set(position, "new") 但它给了我运行时错误，即 OutOfMemory。请帮助我。谢谢

```
import java.io.*;
import java.util.*;

public class DAOImpl implements DAO
{

    String xs[];

    List<String> al= new ArrayList<String>();
    int value;

    public void list()
    {
        try
        {
            BufferedReader br=new BufferedReader(new FileReader("insurance.db"));

            String next;
            while((next=br.readLine())!=null)
            {
                //System.out.println(next);
                al.add(next);
            }

            for(int i=0;i<al.size();i++)
            {
                System.out.print(i+1+"] ");
                String ar[]=(al.get(i)).split(":");
                for(int q=0;q<3;q++)
                {
                    System.out.print(ar[q]);
                    System.out.print("    ");
                }
                //System.out.println(al.get(i));
                System.out.println("");
            }

        }

        catch (FileNotFoundException ex)
        {
                    ex.printStackTrace();
            } 
        catch (IOException ex) 
        {
                    ex.printStackTrace();
        }

    }

    public String[] readRecord(int recNo)
    {

        String stream=(al.get(x-1));
        xs=stream.split(":");
        return xs;
    }

    public void deleteRecord(int recNo)
    {
        int del=recNo;
        al.set(del-1, null);

        for(int i=0;i<al.size();i++)
            {
                    if((al.get(i))==null)
                    {
                        continue;
                    }

                    else
                    {
                        System.out.print(i+1+"] ");
                        String ar[]=(al.get(i)).split(":");

                        for(int q=0;q<3;q++)
                        {

                            System.out.print(ar[q]);
                            System.out.print("    ");
                        }

                        System.out.println("");
                    }

            }   
    }

    public int addRecord()
    {

        for(int y=0;y<al.size();y++)
        {
            if((al.get(y))==null)
            {
                value=y+1;
            }
            if((al.get(y))==null)
            {
                al.add(y, "new");//m getting error here...
            }
        }
        for(int i=0;i<al.size();i++)
            {
                    if((al.get(i))==null)
                    {
                        continue;
                    }

                    else
                    {
                        System.out.print(i+1+"] ");
                        String ar[]=(al.get(i)).split(":");

                        for(int q=0;q<3;q++)
                        {

                            System.out.print(ar[q]);
                            System.out.print("    ");
                        }

                        System.out.println("");
                    }

            }
        return value;

    }

} 
```

主要方法如下：

```
import java.io.*;
public class InsuranceMain
{
public static void main(String args[])throws Exception
{
    BufferedReader br=new BufferedReader(new InputStreamReader(System.in));
    DAOImpl d=new DAOImpl();
    d.list();

    //deleterecord
    System.out.println("Enter Record Number to delete record:");
    int delete=Integer.parseInt(br.readLine());
    d.deleteRecord(delete);

    //addrecord

    d.addRecord();//m getting error here

    //readRecord
    System.out.println("Enter Record Number:");
    int s=Integer.parseInt(br.readLine());
    String as[]=d.readRecord(s);
    for(int v=0;v<as.length;v++)
    {
        System.out.println(as[v]);
    }

}
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T16:02:15.467

简短的回答：

改变这一行：

```
al.add(y, "new");//m getting error here... 
```

进入

```
al.set(y, "new"); 
```

原因：

如果 you `al.add(y,"new")`，则 y （包括）之后的所有元素都将向右移动。所以下次你再次遇到 null 时`(y+1)`，你添加另一个“新”，做这个循环没有结束。

如果您在这样的 for 循环中更改列表的大小，也不好。

# javascript - 使用网页/Web 应用程序从 XSL 文件中读取和收集元素

> ID：15389853
> 
> 赞同：0
> 
> 时间：2013-03-13T15:41:33.470
> 
> 标签：javascript, jquery, html, .net, xslt

我有 xsl 页面，其中包含许多模板，涵盖了创建我想要的网页所需的所有内容，我使用**节点**将模板调用到另一个 xsl 文件中，

我需要使用下拉列表调用并将模板收集到网页而不是 xsl 中。

我怎样才能做到这一点？这似乎并不容易，所以任何想法都会有所帮助！提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T17:45:32.470

我也觉得这很棘手，没有完整的答案给你。显示模板应该是容易的部分。您可以通过 XQuery、javascript 作为 xml 文件（XSL 样式表）中的 xml 元素来捕获它们。只调用一些特定的模板，我不知道......实现目标的一种方法可能是使用 webServices 调用 xslTransform。例如，您可以使用 eXist 轻松做到这一点（[http://en.wikibooks.org/wiki/XQuery/XQuery_and_XSLT#Creating_an_XSLT_service](http://en.wikibooks.org/wiki/XQuery/XQuery_and_XSLT#Creating_an_XSLT_service)）。现有的嵌入式 Web 服务提供了这样的功能（即在 Web 上下文中调用 XSLT）。你在javascript中有类似的功能（我猜......）。也许使用 XQuery（或其他任何东西）来动态生成一个简单的模板样式表（即：提取模板并创建一个只有其内部的 XSLT 文件）并执行它可能是一个解决方案。另一种方式，可能是使用模板的模式属性。您可以在启动 XSLT 时为其设置执行模式。但是您可能会发现每个模板都有一种特定模式...

希望这会有所帮助。

# asp.net - ASP.NET Web API 应用程序在 IIS 7 上部署时提供 404

> ID：15389855
> 
> 赞同：55
> 
> 时间：2013-03-13T15:41:38.993
> 
> 标签：asp.net, iis-7, asp.net-web-api

我有一个 ASP.NET Web API，它在使用 localhost:1783 在“IIS Express”上运行时运行良好

![VS中的设置](../Images/a38f97133066c721fa4ba071b21fb756.png)

但是当我取消“使用 IIS Express”然后按“创建虚拟目录”时......

![新设置](../Images/c8a8aaa0609ffb1878fdeed5a3e243cc.png)

...我只是收到 404 错误： ![404错误](../Images/9639ef07f1de1428393fd4473eeee060.png)

有什么想法有什么问题吗？谢谢！

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2014-05-12T20:51:40.973

虽然标记的答案可以正常工作，但您真正需要添加到 webconfig 的是：

```
 <handlers>
      <!-- Your other remove tags-->
      <remove name="UrlRoutingModule-4.0"/>
      <!-- Your other add tags-->
      <add name="UrlRoutingModule-4.0" path="*" verb="*" type="System.Web.Routing.UrlRoutingModule" preCondition=""/>
    </handlers> 
```

请注意，这些都没有特定的顺序，尽管您希望在添加之前删除。

我们最终得到 404 的原因是因为 URL 路由模块只在 IIS 中为网站的根目录启动。通过将模块添加到此应用程序的配置中，我们使模块在此应用程序的路径（您的子目录路径）下运行，并且路由模块启动。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2015-03-25T19:36:29.827

对我来说，除了有`runAllManagedModulesForAllRequests="true"`我还必须编辑`"path"` 下面的属性。以前我的路径属性是`"*."`这意味着它只在包含点字符的 url 上执行。但是，我的应用程序的 url 不包含点。当我切换路径时，`"*"`它起作用了。这是我现在拥有的：

```
 <system.webServer>
      <validation validateIntegratedModeConfiguration="false" />
      <modules runAllManagedModulesForAllRequests="true">
      <remove name="WebDAVModule"/>
      </modules>

      <handlers>
          <remove name="WebDAV" />
          <remove name="ExtensionlessUrlHandler-ISAPI-4.0_32bit" />
          <remove name="ExtensionlessUrlHandler-ISAPI-4.0_64bit" />
          <remove name="ExtensionlessUrlHandler-Integrated-4.0" />
          <add name="ExtensionlessUrlHandler-ISAPI-4.0_32bit" path="*" verb="*" modules="IsapiModule" scriptProcessor="%windir%\Microsoft.NET\Framework\v4.0.30319\aspnet_isapi.dll" preCondition="classicMode,runtimeVersionv4.0,bitness32" responseBufferLimit="0" />
          <add name="ExtensionlessUrlHandler-ISAPI-4.0_64bit" path="*" verb="*" modules="IsapiModule" scriptProcessor="%windir%\Microsoft.NET\Framework64\v4.0.30319\aspnet_isapi.dll" preCondition="classicMode,runtimeVersionv4.0,bitness64" responseBufferLimit="0" />
          <add name="ExtensionlessUrlHandler-Integrated-4.0" path="*" verb="*" type="System.Web.Handlers.TransferRequestHandler" preCondition="integratedMode,runtimeVersionv4.0" />
      </handlers>
  </system.webServer> 
```

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2014-02-14T08:38:31.133

您可能需要安装修补程序[KB980368](http://support.microsoft.com/kb/980368)。

> 本文介绍了使某些 Internet 信息服务 (IIS) 7.0 或 IIS 7.5 处理程序能够处理其 URL 不以句点结尾的请求的更新。具体来说，这些处理程序被映射到“ *.”。请求路径。当前，映射到“* .”的处理程序。请求路径仅处理 URL 以句点结尾的请求。例如，处理程序仅处理 URL 类似于以下 URL 的请求：
> 
> [http://www.example.com/ExampleSite/ExampleFile](http://www.example.com/ExampleSite/ExampleFile)。
> 
> 应用此更新后，映射到“*”的处理程序。request path 可以处理 URL 以句点结尾的请求和 URL 不以句点结尾的请求。例如，处理程序现在可以处理类似于以下 URL 的请求：
> 
> [http://www.example.com/ExampleSite/ExampleFile](http://www.example.com/ExampleSite/ExampleFile)
> 
> [http://www.example.com/ExampleSite/ExampleFile](http://www.example.com/ExampleSite/ExampleFile)。
> 
> 应用此补丁后，ASP.NET 4 应用程序可以处理对无扩展名 URL 的请求。因此，在处理程序执行之前运行的托管 HttpModules 将运行。在某些情况下，HttpModules 可能会返回无扩展 URL 的错误。例如，编写为仅预期 .aspx 请求的 HttpModule 现在在尝试访问 HttpContext.Session 属性时可能会返回错误。

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2014-11-17T11:56:13.047

由于以下原因，也可能发生此问题

1.在Web.Config中

```
<system.webServer>
     <modules runAllManagedModulesForAllRequests="true" /> 
</system.webServer> 
```

2.确保在部署 Web API 的服务器上的 bin 文件夹中存在以下内容

•System.Net.Http

•System.Net.Http.Formatting

•System.Web.Http.WebHost

•System.Web.Http

如果通过 Visual Studio 发布，则默认情况下不会将这些程序集复制到 bin 文件夹中，因为 Web API 包是通过 Nuget 在开发计算机中安装的。不过，如果您希望这些文件可作为 Visual Studio 发布的一部分使用，那么您需要将这些程序集的 CopyLocal 设置为 True

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2014-02-16T17:31:56.153

有人说 runAllManagedModulesForAllRequests="true" 会有性能问题和 MVC 路由问题。他们建议使用以下内容：

[http://www.britishdeveloper.co.uk/2010/06/dont-use-modules-runallmanagedmodulesfo.html](http://www.britishdeveloper.co.uk/2010/06/dont-use-modules-runallmanagedmodulesfo.html)

[http://bartwullems.blogspot.com/2012/06/optimize-performance-of-your-web.html](http://bartwullems.blogspot.com/2012/06/optimize-performance-of-your-web.html)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2021-07-14T13:55:58.327

我在使用 Blazor 和 .Net Core 时遇到了这个问题，发现将 NavManagers“baseUrl”合并到我对控制器的调用中解决了这个问题，无论使用虚拟目录还是根网站。

这对我有用！

```
string baseUrl = NavigationManager.BaseUri.ToString();

NavigationManager.NavigateTo(**baseUrl** + $"api/Download/DownloadFile?FileName=" 
                                         + sFilename, true); 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2016-05-17T21:19:14.607

对我来说，这个问题与其他答案略有不同，因为我只在 OPTIONS 上收到 404，但我已经在我的 Integrated Extensionless URL Handler 选项中明确说明了 OPTIONS。非常混乱。

1.  正如其他人所说，模块节点中的 runAllManagedModulesForAllRequests="true" 是一揽子修复大多数 Web API 404 问题的简单方法——尽管我更喜欢@DavidAndroidDev 的答案，它的侵入性要小得多。但在我的情况下还有一些额外的东西。
2.  不幸的是，我在站点的请求过滤下的 IIS 中设置了这个：

[![请求过滤的选项问题](../Images/8ea8a015ec3cba979388f2fa333fdc37.png)](https://i.stack.imgur.com/61CKW.png)

通过将以下**安全节点**添加到 web.config 是必要的 - 包含完整的 system.webserver 以用于上下文：

```
 <system.webServer>
    <modules runAllManagedModulesForAllRequests="true">
      <remove name="WebDAVModule" />
    </modules>
    <handlers>
      <remove name="ExtensionlessUrlHandler-Integrated-4.0" />
      <remove name="OPTIONSVerbHandler" />
      <remove name="TRACEVerbHandler" />
      <remove name="WebDAV" />
      <add name="ExtensionlessUrlHandler-Integrated-4.0" path="*." verb="*" type="System.Web.Handlers.TransferRequestHandler" preCondition="integratedMode,runtimeVersionv4.0" />
    </handlers>
    <security>
      <requestFiltering>
        <verbs>
          <remove verb="OPTIONS" />
        </verbs>
      </requestFiltering>
    </security>
  </system.webServer> 
```

虽然这不是这个问题的完美答案，但它是谷歌上“IIS OPTIONS 404”的第一个结果，所以我希望这对某人有所帮助；今天花了我一个小时。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-04-19T15:29:15.360

如果您使用的是 Visual Studio 2012，请下载并安装 Microsoft 最近发布的 Update 2（截至 2013 年 4 月）。

[视觉工作室 2012 更新 2](http://support.microsoft.com/kb/2797912)

该更新中有一些与该问题相关的错误修复。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2014-09-25T15:24:25.800

我有同样的问题。经过大量的研发后，我发现了问题所在。

但只要您的配置是 finne 意味着 aspnet 64 位和 IIS 以及我看到的唯一问题是路径“web api 采用本地目录路径”，因此您需要使用它。像这样.. **~../../../api/products/**

非常感谢您发布问题。我在配置文件中学习了很多 abt iis 和其他设置。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2016-05-11T21:08:24.917

几天来，我一直在与这个问题作斗争，尝试了各种建议。我的开发机器工作正常，但我正在部署的新机器给了我 404 错误。

在 IIS 管理器中，我比较了两台机器上的处理程序映射，发现很多处理程序丢失了。结果发现机器上没有安装 ASP.Net 5。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2017-04-12T02:05:18.900

对我来说，在运行使用 IIS Express 的应用程序时，我的网站上未使用 IIS Express（使用本地 IIS）收到 404 错误。如果我关闭用于运行 IIS Express 的浏览器，那么 404 就会消失。对我来说，我的 IIS Express 项目调用了本地 IIS 服务，因此我将 IIS Express 项目转换为使用本地 IIS，然后一切正常。由于某种原因，您似乎无法同时运行非 IIS Express 和本地 IIS 网站。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2020-08-11T10:52:53.713

花一整周，毕竟以下设置工作！终于得救了。 **从 IIS 中的 ISAPI 过滤器中删除 UrlScan 解决了我们案例中的问题**

# jsf - JSF 延迟加载组件值

> ID：15389857
> 
> 赞同：5
> 
> 时间：2013-03-13T15:41:42.303
> 
> 标签：jsf, jsf-2, primefaces

考虑一个简单的 h:outputText 组件：

```
<h:outputText value="#{myBean.myValue}"/> 
```

如何在页面呈现后延迟加载该值，并在完成此操作时显示自定义“ajax 加载”图标而不是值？

我在我的项目中使用 PrimeFaces 3.5，因此欢迎任何特定于 PF 的实现。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-13T16:07:35.017

建议通过`remoteCommand`在页面加载后调用（通过将`autoRun`属性设置为 true 来完成）并更新您的`outputText`.

```
private String myValue;

// getter and setter

public void initMyValue() {
  // init myValue
} 
```

在页面上，您应该有`ajaxStatus`用于查看加载图像的组件，以及您的`outputText`. 还应该有`p:remoteCommand`组件：

```
<p:ajaxStatus style="width:16px;height:16px;" id="ajaxStatusPanel">  
  <f:facet name="start">  
    <h:graphicImage value="ajaxloading.gif" />  
  </f:facet>
  <f:facet name="complete">  
    <h:outputText value="" />
  </f:facet>  
</p:ajaxStatus>

<h:outputText id="myText" value="#{myBean.myValue}"/>

<p:remoteCommand autoRun="true" actionListener="#{myBean.initMyValue}" update="myText"/> 
```

**编辑：**我想你想延迟加载值，`outputText`因为它包含一些长时间运行的计算，但是如果你想完全推迟在你的支持 bean 中`outputText`首次添加`boolean`属性的渲染，并将这个属性设置`true`为方法的末尾`initMyValue`：

```
private boolean loaded;

// getter and setter

public void initMyValue() {
  // init myValue
  loaded = true;
} 
```

在页面上将其重新组织如下：

```
<h:panelGroup id="myPanel" layout="block">
  <h:graphicImage value="ajaxloading.gif" rendered="#{!myBean.loaded}"/>
  <h:outputText value="#{myBean.myValue}" rendered="#{myBean.loaded}"/>
</h:panelGroup>

<p:remoteCommand autoRun="true" actionListener="#{myBean.initMyValue}" update="myPanel"/> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T20:42:43.897

您可以使用[BlockUI](http://www.primefaces.org/showcase/ui/blockUI.jsf)在加载时有条件地阻止组件。

1.  定义一个`preRenderComponent`事件`<h:outputText/>`

    ```
     <h:outputText id="myText">
          <f:event name="preRenderComponent" id="started"/>
       </h:outputText> 
    ```

2.  `<p:blockUI/>`用事件的id定义一个作为触发器

    ```
     <p:blockUI block="myText" trigger="started" /> 
    ```

您可以自定义 blockui 以显示图像或其他内容。

提醒一句：我认为您需要这个，因为您在该组件的吸气剂中做了一些繁重的工作。知道 getter 将在该页面的生命周期中被多次调用。所以隐藏操作需要很长时间的事实不会改变事实。更好的设计是在持久范围内预加载和缓存该组件的值，而不是“加载”颤动的戏剧。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-14T19:16:13.207

这就是我最终实现它的方式：

```
<h:panelGroup id="loginLocation">
<p:graphicImage library="assets" name="small-kit-loader.gif" width="16" height="16" rendered="#{empty mybean.lastLoginLocation}"></p:graphicImage> 
<h:outputText value="#{myBean.lastLoginLocation}" rendered="#{!empty myBean.lastLoginLocation}"/>
</h:panelGroup>
<p:remoteCommand global="false" actionListener="#{actionBean.getUserLoginLocation(myBean.selectedUser)}" name="refreshLoginLocation" id="rc1" autoRun="true" update="loginLocation" process="@this"></p:remoteCommand> 
```

就我个人而言，我对这个实现并不完全满意：

1.  延迟加载状态存储在服务器端，而不是客户端应该存储的位置
2.  我必须在我的支持 bean (getUserLoginLocation) 上实现单独的方法来检索该值，并将其显式存储在另一个属性 (lastLoginLocation) 中。在浏览器中渲染页面后，如果有一个惰性调用的 getter 会更干净
3.  不容易重用 - 取决于支持 bean 'loaded' 标志（在这种情况下为#{empty myBean.lastLoginLocation}），并且需要动作侦听器来实际设置值。任何基于这种方法的复合组件也将依赖于支持 bean 中的特定代码。

欢迎任何有关如何改进此代码的建议！:)

# c# - CRM FetchXml，如何动态添加匹配相关实体名称的快速搜索过滤器？

> ID：15389858
> 
> 赞同：2
> 
> 时间：2013-03-13T15:41:43.157
> 
> 标签：c#, dynamics-crm-2011, fetchxml

我在 CRM 之外有一个网页，允许用户执行 CRM 查找。我需要像在普通 CRM UI 中那样使用快速搜索来过滤查找结果。

我获取所选实体/视图的 FetchXML，然后获取所选实体的快速搜索视图的 FetchXML，提取 isquickfindfields=1 的过滤器节点，将 {0} 替换为他们在搜索框中键入的内容，将修改后的节点插入选定视图的 FetchXML，并执行它。

我遇到的问题是一些快速搜索过滤器针对相关实体的 id 字段，但匹配需要针对该实体的主要名称属性。

例如，下面是帐户实体的快速搜索：

```
<fetch version="1.0" output-format="xml-platform" mapping="logical">
<entity name="account">
    <attribute name="name" />
    <attribute name="primarycontactid" />
    <attribute name="address1_city" />
    <attribute name="telephone1" />
    <attribute name="emailaddress1" />
    <order attribute="name" descending="false" />
    <filter type="and">
        <condition attribute="statecode" operator="eq" value="0" />
    </filter>
    <filter type="or" isquickfindfields="1">
        <condition attribute="primarycontactid" operator="like" value="{0}" />
        <condition attribute="telephone1" operator="like" value="{0}" />
        <condition attribute="emailaddress1" operator="like" value="{0}" />
        <condition attribute="accountnumber" operator="like" value="{0}" />
        <condition attribute="name" operator="like" value="{0}" />
    </filter>
    <attribute name="accountid" />
</entity> 
```

当我插入搜索文本并执行视图时，我从 RetrieveMultiple 收到此错误：

```
An exception System.FormatException was thrown while trying to convert input value '%acme%' to attribute 'account.primarycontactid'. Expected type of attribute value: System.Guid. Exception raised: Guid should contain 32 digits with 4 dashes (xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx). 
```

如果我使用普通的 CRM 界面，对帐户进行查找并在快速搜索框中输入联系人的姓名，搜索会按预期工作（列出我输入的主要联系人姓名的帐户）。因此，我假设当 CRM 查询数据库时，它会“智能地”匹配实体引用的主要名称属性的非 Guid 字符串。

这是添加快速搜索过滤器的代码块（整个方法的[pastebin](http://pastebin.com/RN35VLbe)）：

```
if (string.IsNullOrWhiteSpace(searchString) == false)
{
    var quickSearch = CRMCache.SavedQueries.FirstOrDefault(q => q.ReturnedTypeCode == view.ReturnedTypeCode && q.QueryType == SavedQueryQueryType.QuickFindSearch);
    if (quickSearch != null)
    {
        var quickSearchXml = XElement.Parse(quickSearch.FetchXml);
        var quickSearchFilter = quickSearchXml.XPathSelectElement("//filter[@isquickfindfields=1]");
        foreach (var condition in quickSearchFilter.Elements("condition"))
        {
            condition.SetAttributeValue("value", string.Format(condition.Attribute("value").Value, "%" + searchString + "%"));
        }

        viewEntityNode.Add(quickSearchFilter);
    }
} 
```

虽然我很好奇普通的 CRM UI 是如何处理这个问题的，但我的问题是如何动态地对查找/视图应用快速搜索过滤，以正确过滤相关实体的主要名称属性？

* * *

**[编辑澄清]**

*快速搜索*（或*快速查找*）是 CRM 中的一种视图类型。它定义了当用户在快速搜索框中输入文本或过滤查找时要搜索的属性。所有实体都有一个*快速搜索*视图，一个实体只能有一个。

匹配相关实体名称的要求来自*快速搜索*视图。并非所有这些都包含对实体引用的过滤器，但是当它包含过滤器时，我需要匹配名称而不是 guid。由于正常的 CRM UI 正确地将搜索字符串应用于相关实体的名称，即使*快速搜索*视图的 FetchXML 具有针对 id 的过滤器，我也认为 CRM 在内部处理了这种情况。显然，情况并非如此（我得到的错误表明了这一点）。所以我需要检测这种情况并做一些不同的事情，我想动态地做到这一点。

动态地，我的意思是我的代码没有一堆预定义的 FetchXML 字符串。它没有针对特定实体、视图或搜索要求进行编码；并且不需要在每次添加或更改新实体或视图时都对其进行修改。在这种情况下，“动态”可能不是一个好词，但我不知道还能叫它什么。实体/视图不可知？

我不想要这样的代码：

```
SearchResults ExecuteView(string entityLogicalName, string searchString)
{
    switch(entityLogicalName)
    {
        case "account":
            return searchAccounts(searchString);

        ... all other enties ...

        default:
            throw new Exception("Unknown entity type: " + entityLogicalName);
    }
}

SearchResults searchAccounts(searchString)
{
    var fetchXml = string.Format(@"
<fetch>
      <entity name=""account"">
        <link-entity name=""contact"" from=""contactid"" to=""primarycontactid"">
            <attribute name=""name"" alias=""name"" />
            <filter type=""and"">
                <condition attribute=""name"" operator=""like"" value=""%{0}%"" />
            </filter>
        </link-entity>
      </entity>
</fetch>", searchString);

    return executeSearch(fetchXml);
} 
```

因为 CRM 中的更改（添加/删除实体、添加/删除/更新视图）需要更新代码以匹配。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T22:27:52.990

我不知道 CRM 是如何使用字符串来搜索 guid 的，但我怀疑它会执行一些您可能无法使用的预处理或一些后端内容。（我想如果你真的想知道你可以尝试反编译 CRM .dll，但这可能需要一段时间）。

因此，作为替代方案，我建议您进一步操作 FetchXml 的处理阶段，如果您在元数据服务的帮助下执行此操作，您应该能够在没有任何硬编码的情况下逃脱。

因此，以获取帐户为例，我认为您需要编辑 xml，以便将 id 属性`name`附加到其上，例如`primarycontactidname`. 这是 FilteredView 中数据库列的名称，我相信它可以从 FetchXml 获得。（如果这不起作用，请添加`link-entity`带有过滤器的名称并删除现有条件）。

所以你知道什么时候追加`name`我会建议：

1.  检索快速查找视图搜索条件。
2.  对于每个条件，使用元数据服务搜索 CRM
3.  如果字段类型是`EntityReference`，则使用适当的条件更新快速查找视图搜索。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-17T05:58:17.437

我投票赞成詹姆斯的答案，因为我确实认为这是您问题的正确答案。但是，总体上更好的解决方案可能是为您希望从网页中搜索的每个实体创建一个特殊的系统视图。使用命名约定，以便您的网页知道要查找的系统视图。在系统视图中，在条件字段中指定 {0}，然后像往常一样在代码中替换它。通过这种方式，您可以创建所需的任何复杂 FetchXML，而无需查询元数据服务的开销。要获得奖励积分，请禁用此新系统视图，使其在 CRM UI 中不可见。

-在您的评论后添加：

快速查找实际上并不“过滤查找/视图”。当您在 CRM UI 的快速查找框中键入查询时，它不会过滤当前视图 - 使用“快速查找”视图显示结果（请参阅视图下拉菜单）。如您所见，此视图使用特殊的 FetchXML - 它使用“isquickfindfields”属性。此属性必须是 CRM UI 的标志，以在提交查询之前预处理此 FetchXML 并更新节点以更正这些关系字段的 FetchXML。

如果您的意图是在此备用 UI 中显示所有系统视图，但允许它们全部被看起来像快速查找搜索框的东西过滤，那么您所谈论的东西根本不像 CRM UI。:)

如果您只是在讨论在此备用 UI 中使用相同的快速查找视图参数，那么我的建议仍然是在 CRM 中创建一个模拟快速查找视图的隐藏系统视图。此视图后面的 FetchXML 将是“正常的”，您将能够插入搜索文本，而无需调用元数据服务。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T16:08:43.523

我希望我理解你的问题。在这种情况下，primarycontactid 不是名称，而是代表记录的 guid，即联系人。除非您的用户知道搜索此字段的每条记录的 guid，否则没有意义。但是您想在联系人内部进行搜索，因此您必须做一个链接（相当于在 sql 中加入），请参阅此处如何使用 FetchXml 和链接实体的示例：

*   [http://msdn.microsoft.com/en-us/library/gg328117.aspx](http://msdn.microsoft.com/en-us/library/gg328117.aspx)

现在你想做一个例子：

```
<fetch>
      <entity name="account">
        <link-entity name="contact" from="contactid" to="primarycontactid">
            <attribute name="name" alias="name" />
            <filter ... />
        </link-entity>
      </entity>
</fetch> 
```

在 C# 中动态执行 FetchXML：

```
string fetchrequest = string.Format(
@"<fetch mapping='logical' aggregate='true'>
    <entity name='queueitem'>
        <attribute name='queueitemid' alias='c' aggregate='count'/>
        <filter type='and'>
            <condition attribute='objecttypecode' operator='ne' value='4406'/>
            <condition attribute='queueid' operator='eq' value='{0}'/>
        </filter>
    </entity>
</fetch>", queueid.ToString());

string fetchresult = crmservice.Fetch(fetchrequest);
XmlDocument document = new XmlDocument();
document.LoadXml(fetchresult);
Console.Writeline("numero de elementos:" + document.SelectSingleNode("//resultset/result/c").InnerText)); 
```

# sql-server - 选择多个节点xml

> ID：15389861
> 
> 赞同：2
> 
> 时间：2013-03-13T15:41:46.767
> 
> 标签：sql-server, xml, sql-server-2008, xquery-sql

我正在从 ntext 字段中检索 xml 格式的文本（下面一行的示例格式）：

```
<root>
  <DocInfo>
    <CompanyName>Some Company</CompanyName>
    <WebsiteUrl>http://www.someurl.com</WebsiteUrl>
    <PrimaryServices>Benefits Administration</PrimaryServices>
    <PrimaryServices>Payroll Processing</PrimaryServices>
    <SecondaryServices>Background Checking</SecondaryServices>
    <SecondaryServices>HR Outsourcing</SecondaryServices>
    <SecondaryServices>Comp & Benefits</SecondaryServices>
    <SecondaryServices>Administration</SecondaryServices>
  </DocInfo>
</root> 
```

使用这个 sql 我正在检索单个节点值：

```
select  @xmlString = COALESCE(@xmlString + '', '') + cast(content_html as nvarchar(max)) FROM  content where folder_id = 18
set @xmlString = replace(@xmlString,'<?xml version="1.0" encoding="UTF-16" standalone="yes"?>','')
set @XML = cast(@xmlString as xml)

Select
T.N.value('CompanyName[1]', 'varchar(250)') as CompanyName,
T.N.value('WebsiteUrl[1]', 'varchar(250)') as WebsiteUrl,
T.N.value('PrimaryServices[1]', 'varchar(250)') as PrimaryServices,
T.N.value('SecondaryServices[1]', 'varchar(250)') as SecondaryServices,
T.N.value('Description[1]', 'varchar(max)') as Description
from @XML.nodes('/root/DocInfo') as T(N) 
```

这适用于单个节点值（CompanyName、WebsiteUrl）。但是，它没有正确插入具有多个值的节点（例如 PrimaryServices 和 SecondaryServices - 每个节点可能有 0 到 16 个节点）。如何将这些可变长度的多个节点值放入这些列中？

谢谢你的帮助

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T18:16:26.910

要将多个节点作为逗号分隔值，您可以使用该`for xml path('')`技巧的变体。使用粉碎的 XML (TN) 作为子查询中的源来获取您感兴趣的节点。xQuery`... substring(text()[1]) ...`部分只是用于删除额外的逗号并从由创建的 XML 中获取逗号分隔值`for xml`.

```
select
  T.N.value('(CompanyName/text())[1]', 'varchar(250)') as CompanyName,
  T.N.value('(WebsiteUrl/text())[1]', 'varchar(250)') as WebsiteUrl,
  (
    select ', '+P.N.value('text()[1]', 'varchar(max)')
    from T.N.nodes('PrimaryServices') as P(N)
    for xml path(''), type
  ).value('substring(text()[1], 2)', 'varchar(max)') as PrimaryServices,
  (
    select ', '+S.N.value('text()[1]', 'varchar(max)')
    from T.N.nodes('SecondaryServices') as S(N)
    for xml path(''), type
  ).value('substring(text()[1], 2)', 'varchar(max)') as SecondaryServices,
  T.N.value('(Description/text())[1]', 'varchar(max)') as Description
from @XML.nodes('/root/DocInfo') as T(N) 
```

如果您希望在一列中包含所有服务，您可以在子查询的节点部分中使用不同的 xPath。

```
select
  T.N.value('(CompanyName/text())[1]', 'varchar(250)') as CompanyName,
  T.N.value('(WebsiteUrl/text())[1]', 'varchar(250)') as WebsiteUrl,
  (
    select ', '+P.N.value('text()[1]', 'varchar(max)')
    from T.N.nodes('PrimaryServices,SecondaryServices') as P(N)
    for xml path(''), type
  ).value('substring(text()[1], 2)', 'varchar(max)') as Services,
  T.N.value('(Description/text())[1]', 'varchar(max)') as Description
from @XML.nodes('/root/DocInfo') as T(N) 
```

# jquery - 如何更改来自 jQuery-Validation-Engine 的电子邮件的错误消息

> ID：15389866
> 
> 赞同：0
> 
> 时间：2013-03-13T15:41:55.043
> 
> 标签：jquery, jquery-validation-engine

我想更改[jQuery-Validation-Engine](https://github.com/posabsolute/jQuery-Validation-Engine)中电子邮件验证的错误默认消息。

我有这个输入字段。

```
<input name="myemail" type="email" data-validation-engine="validate[custom[email],required]"/> 
```

有没有像**data-errormessage-pattern-mismatch="foo"**这样的好方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-28T14:21:30.790

答案是 ：

```
data-errormessage-custom-error="Message" 
```

# javascript - 在 ExtJS 模板标记 (XTemplate) 中转义方括号？

> ID：15389869
> 
> 赞同：1
> 
> 时间：2013-03-13T15:42:10.347
> 
> 标签：javascript, extjs, escaping, ext-direct

我正在使用 ExtJS 4，并且需要在 XTemplate 标记中使用方括号集。这种需求源于我需要在渲染输出中保留方括号。更具体地说，我正在处理名称中包含破折号（减号）的对象属性，这需要使用方括号在 JavaScript 中访问这些属性的值，例如：

`raw.cmsInstances[\'cms-thumb\'].url`

任何在 JavaScript 中使用过 CSS 的人都曾遇到过 CSS 属性名称中出现破折号的问题。

我一直无法找到实现相同结果的替代语法（方括号表示法）。

我已经使用 ExtJS 自定义对象类型解决了这个限制。特别是，我正在访问 ExtDirect 的原始输入，并使用以下技术将其中的值推送到模板标记中：

```
Ext.define('my.ux.file.IconBrowser', {
    tpl: [
        '<tpl for=".">',
            //Am trying to use this notation, due to dash in property name:
            //'<img src="{raw.cmsInstances[\'cms-thumb\'].url}"/>'
            //But this causes XTemplate to evaluate whatever is between the square
            //brackets.

            (!Ext.isIE6? '<img src="{raw.cmsInstances.cmsThumb.url}"/>' : 
            '<div style="filter:progid:DXImageTransform.Microsoft.AlphaImageLoader(src=\'{raw.cmsInstances.cmsThumb.url}\')"></div>'),
        '</tpl>'
    ],
    initComponent: function() {
        Ext.data.Types.RAW = {
            convert: function(v, data) {
                return data.raw;
            },
            type: 'Raw'
        };
        var types = Ext.data.Types;
        this.store = Ext.create('Ext.data.Store', {
            proxy: {
                type: 'direct',
                directFn: this.loadLibraryApi,
                paramOrder: ['instanceType'],
                reader: {
                    root: 'data'
                }
            },
            fields: [
                {name: 'raw', type: types.RAW}
            ]
        });

        this.callParent(arguments);
    }
}); 
```

我更愿意避开方括号或找到替代它们的替代方案，以达到相同的结果。

提前致谢！

# java - java.lang.ArrayIndexOutOfBoundsException：我的 java 程序中出现 -1 错误

> ID：15389870
> 
> 赞同：-6
> 
> 时间：2013-03-13T15:42:14.497
> 
> 标签：java

当我测试运行我的程序时，我似乎得到了一个错误，上面写着 java.lang.ArrayIndexOutOfBoundsException: -1

请问谁能给我一些关于如何解决这个问题的建议？

```
class MineFinderModel {
public static int MINE_SQUARE = 10;
public static int EMPTY_SQUARE = 0;

int num_of_cols;
int num_of_rows;
int[][] the_minefield;

public MineFinderModel(int n_cols, int n_rows) {
    num_of_rows = n_rows;
    num_of_cols = n_cols;
    the_minefield = new int[num_of_cols][num_of_rows];
}

public boolean addMine(int thisCol, int thisRow) {
    if (thisCol >= num_of_cols || thisRow >= num_of_rows)
        return false;
    if (the_minefield[thisCol][thisRow] == MINE_SQUARE)
        return false;
    the_minefield[thisCol][thisRow] = MINE_SQUARE;
    return true;
}

public int getValue(int thisCol, int thisRow) {
    if (thisCol >= num_of_cols || thisRow >= num_of_rows)
        return 0;
    return the_minefield[thisCol][thisRow];
}

public void addMinesToCorners() {
    the_minefield[0][0] = MINE_SQUARE;
    the_minefield[0][num_of_rows -1] = MINE_SQUARE;
    the_minefield[num_of_cols - 1][0] = MINE_SQUARE;
    the_minefield[num_of_cols - 1][num_of_rows - 1] = MINE_SQUARE;
} 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T15:45:32.407

我猜它应该在“addMinesToCorners()”函数中，因为你没有测试边界。尝试在您周围放置一些变量怎么样？

```
if(num_of_cols == 0)
if(num_of_rows == 0) 
```

在初始化时，这等于“0”，然后“0 - 1”给出“-1”。因此错误。

希望这可以帮助 ！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T15:50:31.383

数组索引为零，因此您的检查不正确，例如，如果 num_of_cols 为 10，则最后一个位置将为 9，但如果您将 10 作为 thisCol 传入，您的检查将通过，因为它检查的是初始化值而不是数组的长度. 尝试将您的测试更改为

```
if (thisCol < 0  thisCol >= (num_of_cols - 1) || thisRow < 0 || thisRow >= num_of_rows - 1)) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T16:07:09.520

您的所有方法都有最大值检查，但它们都没有检查 thisRow 和 thisCol 中的负值，因此如果这两个方法的任何参数为负，addMine() 和 getValue() 将抛出 java.lang.ArrayIndexOutOfBoundsException . 您可以添加一个条件，如`

```
if (thisCol >= num_of_cols || thisCol < 0
            || thisRow >= num_of_rows || thisRow <0)

 return false 
```

# html - 基础 4 中的包装器 div

> ID：15389872
> 
> 赞同：1
> 
> 时间：2013-03-13T15:42:15.407
> 
> 标签：html, css, zurb-foundation

我想知道如何在所有行周围放置一个包装器 div 并仍然保持基础 4 提供的响应能力。我想要一个包装 div 的原因是我想给它应用一个盒子阴影。由于基础 4 中的行是单独的块，因此 box-shadow 会在行的顶部和底部生成阴影，这是我不想要的。

这就是我所拥有的：http: [//foundationproj.creeight.se/home.html](http://foundationproj.creeight.se/home.html)

我希望它看起来像这样（边缘有阴影）： http: [//foundationproj.creeight.se/screen.jpg](http://foundationproj.creeight.se/screen.jpg)

干杯!

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T15:47:46.880

我只是从中获取样式`.row`并将它们应用于新的 div：

```
#pageWrapper {
     margin: 0px auto; 
     max-width: 62.5em; 
     width: 100%; 
     box-shadow: 0px 0px 15px;
     border-radius: .5em;
}

<body>
    <div id="pageWrapper">
        ...
        <footer>...</footer>
    </div>
</body> 
```

# xcode - 使用 Xcode 4.6 从已发布的应用程序下载应用程序数据

> ID：15389879
> 
> 赞同：1
> 
> 时间：2013-03-13T15:42:24.793
> 
> 标签：xcode, download, xcode-organizer

与[How to download app data in Xcode 4.2](https://stackoverflow.com/questions/7796825/how-to-download-app-data-in-xcode-4-2)相关，我使用的是 XCode 4.6，无法再使用 Xcode Organizer 下载我的应用数据。我的应用程序最近发布到应用程序商店，我不记得了，但我可能从应用程序商店下载了我的应用程序。无论如何，我手机上应用的当前版本是开发版本（通过 Xcode，而不是应用商店）。其他开发应用程序出现在管理器中，但没有我发布的应用程序。由于我不想丢失与应用程序相关的数据，我不能只是删除应用程序，然后通过 Xcode 重新安装。建议？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T15:47:53.010

如果您对应用程序进行编码以将数据直接保存到应用程序的应用程序文档中，您可以使用诸如 PhoneDisk（或更新的 iExplorer - [http://www.macroplant.com/phonedisk/](http://www.macroplant.com/phonedisk/)）之类的工具来访问您的设备并从文件文件夹到您的桌面（或任何地方）。

通常，当我们使用数据库构建应用程序时，我们希望确保用户可以轻松地备份、传输和/或通过电子邮件将数据库发送给客户支持，因此我们启用了 iTunes 文件共享。

这允许用户打开 iTunes，选择他们的设备，选择应用程序选项卡，然后向下滚动到文件共享部分。从那里，用户可以选择位于文档文件夹中的任何文件，并通过 iTunes 轻松地将文件复制到设备/从设备复制。

为此，您必须通过在您的应用程序的 *-Info.plist 文件中添加相同的键并将 BOOL 值设置为 YES 来启用应用程序支持 iTunes 文件共享。

# javascript - 用其他链接中的文本内容替换链接——抽象代码

> ID：15389885
> 
> 赞同：0
> 
> 时间：2013-03-13T15:42:40.940
> 
> 标签：javascript, jquery, dynamic, code-snippets

所以我有一个函数，其中一个 div 的文本替换另一个，我的代码工作正常，但是我想知道是否有一种很好的动态方法来抽象代码，所以我得到一个更短的片段，因此我不必为每个“对”的div一遍又一遍地重复代码？

我的 JS：

```
 var correctAnswer1 = $('#q1').text();              
    $('#c1').text(correctAnswer1);

    var correctAnswer2 = $('#q2').text();               
    $('#c2').text(correctAnswer2);

    var correctAnswer3 = $('#q3').text();               
    $('#c3').text(correctAnswer3); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T15:50:52.453

如果您已经知道可以执行以下操作的对数：

```
var numberOfQuestions = 5;

for(i = 0; i < numberOfQuestions; i++)
{

    var answer = jQuery("#q"+i).text();

    jQuery("#c"+i).text(answer);

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T15:51:24.407

将所有`#qN`元素`question`归类。

```
$(".question").each(function () {
    var cid = "#c"+$(this).attr("id").substr(1);
    $(cid).text($(this).text());
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T15:54:11.613

我这会工作

```
function setTxtVal(id){
if(typeof id == "string"){
var sec = id.charAt(id.length - 1);
$("#c"+sec).text( $("#"+id).text() )
}
if(typeof id == "object"){
var x ,s;
for (x in id) {
var s = x.charAt(x.length - 1);
$("#c"+s).text( $("#"+x).text() )    
}
}

setTextVal("c1") 
```

或者

```
setTextVal(["c1", "c3", "c4"]) 
```

或者你可以制作一个 jquery 插件

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-13T15:54:25.933

```
$('[id^=q]').each(function(index){
  $('#c' + index).html($(this).html());
}); 
```

像这样的东西

# php - php + mysql 插入错误

> ID：15389888
> 
> 赞同：1
> 
> 时间：2013-03-13T15:42:46.483
> 
> 标签：php, jquery, mysql, forms

我正在创建一个简单的表单评论，允许用户使用 php mysql jquery 发送评论并插入到数据库中，以便在页面中不刷新一切正常，但问题是：当我写评论时，mysql 数据库需要 4 行并在其中填写相同的数据有人可以帮助我解决错误吗？

# my_db.sql

```
--
-- Database: `my_db`
--

-- --------------------------------------------------------

--
-- Table structure for table `comments`
--

CREATE TABLE IF NOT EXISTS `comments` (
  `id` tinyint(4) NOT NULL AUTO_INCREMENT,
  `name` varchar(50) NOT NULL,
  `email` varchar(70) NOT NULL,
  `comments` text NOT NULL,
  PRIMARY KEY (`id`)
) ENGINE=InnoDB  DEFAULT CHARSET=latin1 AUTO_INCREMENT=5 ;

--
-- Dumping data for table `comments`
--

INSERT INTO `comments` (`id`, `name`, `email`, `comments`) VALUES
(1, 'test', 'test@test.com', 'testcomments'),
(2, 'test', 'test@test.com', 'testcomments'),
(3, 'test', 'test@test.com', 'testcomments'),
(4, 'test', 'test@test.com', 'testcomments');

/*!40101 SET CHARACTER_SET_CLIENT=@OLD_CHARACTER_SET_CLIENT */;
/*!40101 SET CHARACTER_SET_RESULTS=@OLD_CHARACTER_SET_RESULTS */;
/*!40101 SET COLLATION_CONNECTION=@OLD_COLLATION_CONNECTION */; 
```

# index.php // jquery的表单和函数在哪里

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>feedback page</title>
<script type = "text/javascript" src = "http://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
<link rel ="stylesheet" href = "css/default.css" />

<script type = "text/javascript">

$(function(){

   $('#submit').click(function(){
     $('#container').append('<img src = "img/loading.gif" alt="Currently loading" id = "loading" />');

         var name = $('#name').val();
         var email = $('#email').val();
         var comments = $('#comments').val();

         $.ajax({

            url: 'submit_to_db.php',
            type: 'POST',
            data: 'name =' + name + '&email=' + email + '&comments=' + comments,

            success: function(result){
                 $('#response').remove();
                 $('#container').append('<p id = "response">' + result + '</p>');
                 $('#loading').fadeOut(500, function(){
                     $(this).remove();
                 });

            }

         });         

        return false;

   });

});

</script>

</head>

<body>
   <form action = "submit_to_db.php" method = "post">
   <div id = "container">
      <label for = "name">Name</label>
      <input type = "text" name = "name" id = "name" />

      <label for = "email">Email address</label>
      <input type = "text" name = "email" id = "email" />

      <label for = "comments">Comments</label>
      <textarea rows = "5"cols = "35" name = "comments" id = "comments"></textarea>
      <br />

      <input type = "submit" name = "submit" id = "submit" value = "send feedBack" />
    </div>
   </form>

   </div>
</body>
</html> 
```

# submit_to_db.php

```
<?php
  $conn = new mysqli('localhost', 'root', 'root', 'my_db');
  $query = "INSERT into comments(name, email, comments) VALUES(?, ?, ?)";

  $stmt = $conn->stmt_init();
  if($stmt->prepare($query)){

     $stmt->bind_param('sss', $_POST['name'], $_POST['email'], $_POST['comments']);
     $stmt->execute();

  }

  if($stmt){

  echo "thank you .we will be in touch soon";
  }
  else{
   echo "there was an error. try again later.";
   }  

?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T01:57:43.323

实际上，我将您的脚本加载到我的服务器上，创建了数据库表并测试了脚本。

每次提交只插入一行。

您的脚本工作正常。

但是，您的测试过程存在缺陷。

我还检查了 Firebug 控制台，AJAX 调用按预期工作。

除非您有其他诊断，否则我认为我无法为您提供任何进一步的帮助。

**错误警报**
你的代码中存在一个错误，它将在未来几年给你的生活带来巨大的悲痛......

```
if($stmt){
   echo "thank you .we will be in touch soon";
}
else{
    echo "there was an error. try again later.";
} 
```

由于执行了查询，该`if`语句将始终评估为真（当然，除非 MySQL 没有运行）。

您的意图是查看插入是否成功，为此，您需要检查：

```
if($stmt->affected_rows){...} 
```

`$stmt->affected_rows`失败时返回-1，成功时返回+1。

**调试策略**
(1) 在您的时间戳中添加一个额外的字段，以便您可以看到插入记录的时间。这将使您更深入地了解正在发生的事情。

(2) 清空您的表并再次尝试您的代码。您可能认为您获得了多个插入，但也可能是您点击了提交按钮 4 次。

# sql - 有没有其他方法可以在不创建数据库链接的情况下使用 Oracle SQL Developer 查询两个数据库

> ID：15389889
> 
> 赞同：0
> 
> 时间：2013-03-13T15:42:49.713
> 
> 标签：sql, database, oracle-sqldeveloper, database-link

我正在尝试编写一个查询，该查询需要访问两个单独的数据库连接并且无法弄清楚如何。我有我的 .sql 文件连接到连接：A，但我需要加入来自连接的信息：b 以获取我需要的所有信息。我无法创建数据库链接，这是我随处可见的答案。查询将如下所示：

```
SELECT 
    a.ROW_ID,
    a.ATTRIB_1,
    b.Date2
From A.user.info a, B.super.info b
Where a.stat1 = b.stat1; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T15:46:06.463

除了创建该链接之外，您无能为力。

问题是你为什么不能？

在我工作的一家公司中，他们对此也有（对我来说：奇怪的）政治，并且不想要 dblinks（不再）。

他们选择了IBM 的[MQ 队列](http://www-01.ibm.com/software/integration/wmq/)作为替代品。

希望它有所帮助。

# c# - 使用带有自定义路径的 ConfigurationManager 来配置文件

> ID：15389894
> 
> 赞同：1
> 
> 时间：2013-03-13T15:43:05.217
> 
> 标签：c#, .net, visual-studio-2010, .net-4.0, configuration-files

我看到了许多从 C# 控制台应用程序中的外部配置文件中读取值的解决方案，但我找不到适合我的特定情况的解决方案：

1.  由于部署的原因（主要是针对使用 Visual Studio Web 发布方法打包为 MVC 网站的一部分进行部署的控制台应用程序），exe 不会与其 app.config 文件一起打包。

2.  我依赖于使用 ConfigurationManager.AppConfig["blah"] 语法的库，我不能很好地将自己的 AppSettingsSection 传递给这些库。

我的控制台应用程序的 .exe 文件位于 MVC 应用程序的 bin 目录中。由于网站和控制台应用程序都使用相同的配置值，我试图简单地将站点的 Web.config 文件加载到控制台应用程序中，但我还没有找到这样做的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T15:53:01.110

默认配置文件在加载后`AppDomain`加载。对于控制台应用程序，配置文件必须与可执行文件位于同一位置。

我相信一种可能的解决方案是加载一个`AppDomain`作为控制台应用程序的子级并正确设置[AppDomainSetup.ConfigurationFile](http://msdn.microsoft.com/en-us/library/system.appdomainsetup.configurationfile.aspx)属性以从自定义位置加载配置文件，然后在子级中执行整个控制台应用程序的逻辑`AppDomain`。

您可以`AppDomain.CreateDomain`在这种情况下使用此重载（MSDN 文章包含有关如何提供的示例代码`AppDomainSetup`）：

*   [http://msdn.microsoft.com/en-us/library/aehss7y0.aspx](http://msdn.microsoft.com/en-us/library/aehss7y0.aspx)

据我所知，您无法更改*可执行`AppDomain`文件在加载后查找配置文件*的默认行为，但正如我建议的那样，您可以`AppDomain`根据自己的要求创建自己的！

# visual-studio - Visual Studio 的 Xsd2Code 类生成器插件发生了什么？

> ID：15389896
> 
> 赞同：4
> 
> 时间：2013-03-13T15:43:21.220
> 
> 标签：visual-studio, xsd, visual-studio-addins, xsd2code

我使用的是 3.4 版，但它不再工作，codeplex 上的链接显示“该项目尚未发布”。可能会在检查更新时引发异常，因为“生成”按钮没有做任何事情。有谁知道这个实用程序是怎么回事？

[http://xsd2code.codeplex.com](http://xsd2code.codeplex.com)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T16:55:41.317

该链接再次开始工作。不知道为什么它下降了。此外，我的 3.4 版本现在正在运行（正在引用旧工作区）。虚惊。我的错。

# jquery - 使用数据获取行位置（Datatable Jquery）

> ID：15389903
> 
> 赞同：0
> 
> 时间：2013-03-13T15:43:49.227
> 
> 标签：jquery, html, datatables

所以我用 Jquery Plugin Datatable ( [http://datatables.net](http://datatables.net) ) 创建了这个表。我想要做的是通过它的数据找出一行是否真的存在，如果不是我创建它的话。我设法找到如何添加一行：

```
$("#Mytable").dataTable().fnAddData([
Name,
Age,
Link,
Schema,
Visite,
Info
]); 
```

但是我没有得到有关如何使用其元素或`<td>`标签包含的内容来查找行的信息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T08:00:02.757

您可以使用 JQuery 来获取数据表的所有行并对其进行迭代，以检查是否必须添加（或不添加）新行：

```
var oTable = $("#Mytable").dataTable({whatever discribing your datatable});
//After the declaration of your datatable : 
var rowToAdd = true;
oTable.$('tr').each(function(){
   var td_index = 0;
   $(this).children('td').each(function){
     if($(this).value == mynewdata[td_index])
        rowToAdd = false;
     td_index++;
   }
});
if(rowToAdd)
   oTable.fnAddData([Name,Age,Link,Schema,Visite,Info]); 
```

**编辑**包含的每个 tds 的定义（不确定 $(this).value 但我认为如果它不正确，它就在不远处；）

# python - 撤消 setFlags ItemIsUserCheckable

> ID：15389905
> 
> 赞同：2
> 
> 时间：2013-03-13T15:43:51.423
> 
> 标签：python, qt, checkbox

我创建了一个 QListWidget 并且我想让它的元素仅在应用程序中的特定位置可检查（我需要它用于特定应用程序，其中用户在单击列表时选择主要元素，然后在检查它们的框时选择辅助元素）。我可以使元素可检查，但我找不到解决方案来撤消此操作并删除复选框...我这样做了：

```
for i in range(self.listWidget.count()):
         item=self.listWidget.item(i)
         item.setFlags(QtCore.Qt.ItemIsUserCheckable | QtCore.Qt.ItemIsEnabled)
         item.setCheckState(QtCore.Qt.Unchecked) 
```

但后来我挣扎......我试过：

```
tmp=self.listWidget.takeItem(i)
self.listWidget.addItem(tmp) 
```

但是该项目带着它的复选框回来了:(我可以简单地销毁该项目，然后再把它放回去，但这可能是一种沉重的处理！有什么解决办法吗？

谢谢 ！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-13T17:23:32.127

要删除标志，请尝试：

```
item.setFlags(item.flags() ^ QtCore.Qt.ItemIsUserCheckable) 
```

^^`item`是您要取消标记的元素。简单来说，运算符与返回的现有标志`^`相反`|`，因此将标志排除在外`QtCore.Qt.ItemIsUserCheckable``item.flags()`

**更新：**

虽然上面的代码将禁用可检查功能，但要完全隐藏复选框，请尝试

```
item.setData(Qt::CheckStateRole, QVariant()); 
```

请注意，在进行此调用后，这不会保留复选框的状态。

# javascript - 创建表单并执行此操作的 Javascript 函数

> ID：15389907
> 
> 赞同：0
> 
> 时间：2013-03-13T15:43:57.893
> 
> 标签：javascript, python, for-loop, checkbox

我的 html 页面中有这部分代码：

```
{% if users %}
        {% for user in users %}

        <form name="form_user_{{ user.id }}" method="post" action="/networks/{{ net.id }}/sensors/{{ sens.id }}/rights">
          <tr>
            <td>
              <div>
                {{ escape(user.name) }}
                <input type='hidden' name="id" value='{{ user.id }}'>
              </div>
            </td>
            <td>

              <label class="radio inline" onclick="document.forms['form_user_{{ user.id }}'].submit();">
                <input type="radio" name="perms" id="perms_{{user.id}}_0" value="0">
                None
              </label>
              <label class="radio inline" onclick="document.forms['form_user_{{ user.id }}'].submit();">
                <input type="radio" name="perms" id="perms_{{user.id}}_1" value="1">
                Read
              </label>
              <label class="radio inline" onclick="document.forms['form_user_{{ user.id }}'].submit();">
                <input type="radio" name="perms" id="perms_{{user.id}}_4" value="4">
                Read + Commands
              </label>

              {{ xsrf_form_html() }}
            </td>

          </tr>
        </form>
        {% end %}
        {% end %} 
```

我有一个来自 Tornado 的用户列表，我可以为他们设置传感器的权限。我会在这个列表的顶部为每个权限创建一个检查元素，以便将相同的权限分配给用户太快。

例如，如果我们单击值为 4 的权限的检查元素，我希望对于用户列表中的每个用户，权限都设置为 4。就像每次单击每个检查一样。

我很抱歉我的英语。我怎样才能做到这一点？

我正在考虑这样的js函数：

```
function checkall() {
      var checks = document.getElementsByName('permsall');
      for(i = 0; i < checks.length; i++) 
    {     
    if(checks[i].checked){
        switch (i){
            case 0:

  ...........               
    } 
  } 
```

我不知道如何将 checkall 函数与我仅用于一个用户的同一表单相关联.... 如何创建循环？

# sql - 在数据库中创建外键关系

> ID：15389909
> 
> 赞同：1
> 
> 时间：2013-03-13T15:44:02.497
> 
> 标签：sql, sql-server, database, foreign-keys, schema

这很可能是一个非常愚蠢的问题，我不是程序员。

我使用 Visual Studio 为我的应用程序创建了一个数据库。

表“CapitalPlan”具有主键“ProgramID” - 这需要是表“MilestoneData”字段“ProgramID”中的外键

谁能告诉我如何将“MilestoneData”中的“ProgramID”设置为外键？

图片显示了我目前所在的位置（不是很远！）

非常感激！

图片：http: [//i1186.photobucket.com/albums/z373/barbsbargainsltd/cDatabase_zps52ddc806.jpg](http://i1186.photobucket.com/albums/z373/barbsbargainsltd/cDatabase_zps52ddc806.jpg)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T15:55:57.347

在设计器中的每个表（在您的情况下为里程碑数据）下，您都有一个名为`Keys`. 如果你右键单击它，有一个`New Foreign Key...`选项。单击它会为您打开一个对话框，其中包含正在创建的外键的许多属性。你需要一个省略号`Tables And Columns Specification`- 它会打开一个新对话框，允许调整源表和目标表以及键映射。

这种方式适用于 SQL Server Management Studio，但您提供的图像表明 VS 的解决方案应该是相同的。

# windows - 目标架构未定义错误

> ID：15389913
> 
> 赞同：0
> 
> 时间：2013-03-13T15:44:11.280
> 
> 标签：windows, driver, wdk

我正在开发过滤器驱动程序并遇到以下错误：

致命错误 C1189：#error：“未定义目标架构”

```
1>Compiling...
1>miniport.c
1>c:\winddk\7600.16385.0\inc\ddk\wdm.h(14197) : fatal error C1189: #error :   "No target     architecture defined"
1>protocol.c
1>c:\winddk\7600.16385.0\inc\ddk\wdm.h(14197) : fatal error C1189: #error :   "No target architecture defined"
1>vwifi.c
1>c:\winddk\7600.16385.0\inc\ddk\wdm.h(14197) : fatal error C1189: #error :   "No target architecture defined"
1>Generating Code...
1>Build log was saved at "file://e:\DriverMiniport\checked\BuildLog.htm"
1>DriverMiniport - 3 error(s), 0 warning(s) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T17:17:19.993

您需要为 DDK 编译器配置目标（x86、x64 等）。应该通过运行`setenv.bat`带有所需参数的脚本（在 DDK 中找到）来完成。在此处阅读更多信息：[http ://technet.microsoft.com/en-us/subscriptions/ff554139(v=vs.85).aspx](http://technet.microsoft.com/en-us/subscriptions/ff554139(v=vs.85).aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-06-26T09:34:12.037

右键单击解决方案并转到命令行选项 C/C++ 并在附加选项中添加 /D *X86* 并应用。/D 低于分数 X86 低于分数...

# python - 在 Python 中使用正则表达式匹配输入

> ID：15389916
> 
> 赞同：2
> 
> 时间：2013-03-13T15:44:17.353
> 
> 标签：python, regex, input, match

我有一个程序需要输入说“是”，例如：

```
my_input = raw_input('> ')
if my_input == 'yes':
    #etc 
```

但这太具体了，我希望输入匹配这个正则表达式：`[yY](es)?`，这样如果用户输入“是，是，y 或 Y”，它是一样的。但我不知道这是如何在 python 中实现的。

我想要类似的东西：

```
regex = some.regex.method('[yY](es)?')
my_input = raw_input('> ')
if my_input == regex:
    #etc 
```

先感谢您。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-13T15:46:50.593

正则表达式在这里可能有点矫枉过正，但这是一种方法：

```
import re
regex = re.compile(r'y(es)?$', flags=re.IGNORECASE)
my_input = raw_input('> ')
if regex.match(my_input):
    #etc 
```

这将匹配字符串`"y"`或`"yes"`任何大小写，但对于类似`"yellow"`or的字符串将失败`"yesterday"`。

或者更好的是，没有正则表达式的相同行为：

```
my_input = raw_input('> ')
if my_input.lower() in ('y', 'yes'):
    #etc 
```

# c# - 通过 C# 提交 POST 表单

> ID：15389921
> 
> 赞同：0
> 
> 时间：2013-03-13T15:44:27.870
> 
> 标签：c#, forms, post, ssl

我正在尝试通过 c# 提交一个帖子表单。我一直在浏览很多以前的问题，但我没有找到可行的解决方案。我想通过 C# 在 SSL url 上回答以下 html 表单：

```
<form action="/start/" method="post">
    <input name="formtoken" type="hidden" value="SignupForm">
    <input id="Email" name="Email" placeholder="Enter email address" type="text" value="">
    <input autocomplete="off" id="Username" name="Username" placeholder="Enter username"     type="text" value="">
    <input autocomplete="off" id="Password" name="Password" placeholder="Enter password" type="password">
    <input autocomplete="off" id="PasswordRetype" name="PasswordRetype" placeholder="Retype Password" type="password">
</form> 
```

通过修改我在另一个 stackoverflow 问题上找到的以下 c# 代码：

```
 static void Main(string[] args)
    {
        HttpWebRequest request = (HttpWebRequest)WebRequest.Create("https://url.com/start/");

        request.Method = "POST";
        request.ContentType = "application/x-www-form-urlencoded";
        string postData = "formtoken=SignupForm&Email=sdfjsdfkhdsf2332@gmail.com?Username=test123?Password=testpw123?PasswordRetype=testpw123";
        byte[] bytes = Encoding.UTF8.GetBytes(postData);
        request.ContentLength = bytes.Length;

        Stream requestStream = request.GetRequestStream();
        requestStream.Write(bytes, 0, bytes.Length);
        requestStream.Close();

        WebResponse response = request.GetResponse();
        Stream stream = response.GetResponseStream();
        StreamReader reader = new StreamReader(stream);

        var result = reader.ReadToEnd();
        stream.Dispose();
        reader.Dispose();
    } 
```

结果返回包含表单的上一页。我通过 chromes 网络工具手动输入验证了 postData var 是否正确。我怀疑 SSL 与它有关，有什么想法吗？

提前致谢

# java - 从 Java 应用程序向/从 SocketIO/nodejs 服务器订阅/发布消息？

> ID：15389922
> 
> 赞同：1
> 
> 时间：2013-03-13T15:44:29.423
> 
> 标签：java, node.js

在 javascript 中拥有 NodeJS + SocketIO 服务器。是否可以选择让 Java 应用程序连接到该 NodeJS/SocketIO 服务器，以便它可以发布和订阅消息？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T21:56:27.210

我最近为教学做了类似的事情（node.js 服务器，发布/订阅中的 java 客户端）。

实际上，您应该考虑 Faye：[http](http://faye.jcoglan.com/) : //faye.jcoglan.com/ 您可以使用 faye 在 node.js 实例中附加 websocket 和/或 bayeux 服务器。

然后，您可以连接实现这些协议中的一个或两个的任何客户端。

我过去成功地将它用于一个学生实验室，其中服务器是 node.js 发布信息，而 java 客户端使用 cometd 库 ( [http://cometd.org/](http://cometd.org/) ) 订阅 faye。

源代码：

*   该服务器与 faye 以及传统的 http 服务器位于：[https ://github.com/cgravier/WI-UCLab/blob/master/context-server-nodejs/simulateArduino.js](https://github.com/cgravier/WI-UCLab/blob/master/context-server-nodejs/simulateArduino.js)
*   使用 Cometd 的 java 客户端：[https](https://github.com/cgravier/WI-UCLab/tree/master/context-client-java) ://github.com/cgravier/WI-UCLab/tree/master/context-client-java （对不起，这是一个图书馆地狱，它是为学生设计的，我被明确告知不熟悉使用 maven（或同等产品），它是 3h 实验室......无论如何。）

尽管该文档是法文的，但我想[https://github.com/cgravier/WI-UCLab/blob/master/lab%20document/context-awareness.pdf](https://github.com/cgravier/WI-UCLab/blob/master/lab%20document/context-awareness.pdf)中第 4 页的数字是不言自明的。

高温高压

法夫赫德

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T17:27:51.537

我已经使用了这个包含 SocketIO 和 Pure Websockets 通信[的 android-websockets](https://github.com/koush/android-websockets)，但没有发现它那么稳定，它在连接到服务器时遇到了问题，但是这个[socket.io-java-client](https://github.com/Gottox/socket.io-java-client)似乎还不错，但没有使用它.

# perl - Perl中的Postgresql几何类型解析？

> ID：15389925
> 
> 赞同：0
> 
> 时间：2013-03-13T15:44:35.567
> 
> 标签：perl, postgresql, dbix-class

PostgreSQL 支持几何类型，我有一个充满它们的数据库。我想使用 Perl 和 DBIx:Class 来检索它们。

例如，点类型被定义为'(x,y)'，这就是 DBIx::Class 检索它的方式。作为一个字符串。

我想将其解析为数组或其他更具体的数据类型。

我当前的解析尝试涉及剥离括号然后拆分，这对点有效，但对多边形无效：

```
(( x1 , y1 ) , ... , ( xn , yn ))
( x1 , y1 ) , ... , ( xn , yn )
( x1 , y1   , ... ,   xn , yn )
  x1 , y1   , ... ,   xn , yn 
```

我的下一个想法是替换 ('s for ['s 然后 JSON 解析它们，这也有效，但我不喜欢它。

有没有人对更清洁的解析方法有任何建议？

谢谢

[有关 PostgreSQL 几何的更多详细信息](http://www.postgresql.org/docs/current/static/datatype-geometric.html)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T23:41:45.610

```
### First Option - just replace ( with ] and eval it as arrays of array
sub parsePolyEval {
        my $polyString = shift;
    $polyString =~ s/\(/\[/g;
    $polyString =~ s/\)/\]/g;

    return eval($polyString);
}

### Second option - parse inner arrays. Assuming That a polygon consists of lists of     points (level 2 array), and not defined recursivley
sub parsePolySPlit {
    my $polyString = shift;
    my @polyArray;
    my @subArrays = ($polyString =~ /\(([^\)\()]+)\)/g);

    foreach (@subArrays) {
        my @subArray = split(/[\s\,]+/,$_);
        @subArray = grep  {$_ ne ""} @subArray; ##ignore empty elements caused by spaces
        push(@polyArray,\@subArray);
    }

    return \@polyArray;
}

sub printPoly {
    my $poly = shift;
    my $i=0;
    foreach (@$poly) {
         print "Point number $i is: ".join("|",@$_)."\n";
        $i++;
        }
}

my $polyString = "(( x1 , y1 ) ,( x2 , y3 ) , ( xn , yn ))";

my $poly1 = parsePolyEval($polyString);
printPoly($poly1);
my $poly2 = parsePolySPlit($polyString);
printPoly($poly2); 
```

# ruby-on-rails - 保存记录后发送电子邮件 - rails

> ID：15389926
> 
> 赞同：0
> 
> 时间：2013-03-13T15:44:37.070
> 
> 标签：ruby-on-rails, email, controller, record, mailer

每次任何用户创建并保存新记录时，我都会尝试向自己发送一封电子邮件。我目前在我的控制器中保存新记录的部分中有这个：

```
UserMailer.notification_email().deliver 
```

这在我的用户邮件中：

```
class UserMailer < ActionMailer::Base
  default from: "from@example.com"

  def notification_email()

    mail(:to => "admin@example.co.uk",
         :subject => "Test")
  end

end 
```

我知道它可能应该传递一些参数，我只是不确定是什么，加上我能找到的所有示例都向每个用户发送电子邮件，而不是静态电子邮件地址。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T15:58:50.707

您是否在环境中设置了 smtp 设置？像这样的东西：

```
config.action_mailer.delivery_method = :smtp
config.action_mailer.smtp_settings = {
  # your settings
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T16:37:13.433

看看这个 RailsCast [http://railscasts.com/episodes/206-action-mailer-in-rails-3](http://railscasts.com/episodes/206-action-mailer-in-rails-3)。它还提供了有关如何在开发/生产中使用动作邮件的见解。

# r - 将10个变量成对合并成一个变量

> ID：15389938
> 
> 赞同：1
> 
> 时间：2013-03-13T15:45:13.250
> 
> 标签：r, variables

这就是我的文件的样子：

```
#Var1    Var2   Var3  Var4
#0         1    2       1 
```

我想要这样的东西：

```
#Var1     Var2
#01        21 
```

对于给您带来的任何不便，我深表歉意，我试图在提出这个问题时尽可能清楚。我对 R 和 stackoverflow 很陌生。我真的很感激任何帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T15:51:24.580

只是另一种方式（假设`tt`是你的`data.frame`）：

```
sapply(seq(1, ncol(tt), by=2), function(x) do.call(paste0, c(tt[,x:(x+1)])))
# [1] "01" "21" 
```

（或）@Sven 在评论下显示：

```
setNames(as.data.frame(lapply(seq(1, ncol(tt), by=2), 
         function(x) do.call(paste0, c(tt[,x:(x+1)])))), names(tt)[1:2]) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T15:50:10.793

```
# The data
dat <- data.frame(0, 1, 2, 1)

# Transform data
as.data.frame(lapply(c(1, 3), function(x) paste(dat[c(x, x+1)], collapse = "")))

  X.01\. X.21.
1    01    21 
```

# java - 为什么包含的库项目会更改我的 Android 应用程序的标题？

> ID：15389939
> 
> 赞同：0
> 
> 时间：2013-03-13T15:45:16.180
> 
> 标签：java, android, eclipse, title, qr-code

我已经在我的 Android 应用程序中实现了 ZXing QR 码阅读器（在应用程序内部，因此没有安装第二个应用程序）。我已经将 ZXing 项目包含在一个库中。一切正常，但包含的库项目不知何故覆盖了我的应用程序的应用程序标题。我是否必须从 Libary 项目中删除字符串值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T16:50:06.807

> 我是否必须从 Libary 项目中删除字符串值？

是的。

如果 apk 库资源与您的应用程序资源同名，它们将覆盖您的应用程序资源值。

用于 apk 库的一个好方法是在资源名称前面加上库包名称。

例如，在您的情况下，在 zxing libs strings.xml

```
<string name="app_name">Barcode Scanner</string> 
```

会变成这样：

```
<string name="com_google_zxing_client_android_app_name">Barcode Scanner</string> 
```

# c++ - 如何在 C++11 中初始化对象向量

> ID：15389941
> 
> 赞同：1
> 
> 时间：2013-03-13T15:45:18.383
> 
> 标签：c++, c++11, stdvector

给定以下课程：

```
class MyRecord {
public:
    int a;
    int b;
    MyRecord() : MyRecord(8, 9) {};
    MyRecord(int a, int b) : a(a), b(b) {};
}; 
```

初始化向量的最简单方法是什么： `std::vector<MyRecord> myVector`使用一些数据？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T15:45:18.383

通过示例演示：

```
MyRecord exampleRecord(3,4);
std::vector<MyRecord> myVector = {{1,2}, {}, exampleRecord}; 
```

为了验证，下面的代码

```
for (MyRecord &record : myVector) {
    std::cout << "a:" << record.a << " b:" << record.b << std::endl;
} 
```

将输出：

```
a:1 b:2
a:8 b:9
a:3 b:4 
```

# vb.net - 如何指定数组元素的范围

> ID：15389949
> 
> 赞同：0
> 
> 时间：2013-03-13T15:45:35.137
> 
> 标签：vb.net

我正在开发一个填充多个数组的应用程序。但它最初是一个 VB6 应用程序，它不使用其中任何一个元素的零。这会阻止类似的事情

```
my_array.Min 
```

从正常工作。我不打算篡改应用程序的内部结构，但是如果我可以在这种语句中指定数组元素的范围会非常方便；就像是

```
my_array(1:100).Min 
```

这样的结构是否存在，如果存在，它是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T15:47:40.500

不幸的是，.NET 没有方便的数组切片构造¹（尽管您可以使用 Linq 来近似它）但是您在这里解决了 XY 问题中的错误 X。

真正的解决方案是不使用基于 1 的数组。*一定要*改变你的应用程序的内部结构。

顺便说一句，VB6 中数组的默认基数*也是*零。您明确需要指定`Option Base 1`基于 1 的数组。

* * *

¹但在[`ArraySegment(T)`](http://msdn.microsoft.com/en-us/library/1hsbd92d.aspx).NET 4.5 之前，这种结构完全被破坏了，因为它没有实现`IList(T)`接口，因此无法使用。它现在确实实现了，但为时已晚——没有人使用该类。

# sql - SQL CASE 和 JOINS：如何获得不同的计数和总数？

> ID：15389953
> 
> 赞同：0
> 
> 时间：2013-03-13T15:45:51.860
> 
> 标签：sql, count, sum, case

我需要一些帮助。我想计算这些列的激活、停用和系统中的用户总数。当前输出包括 NAME 列中的名称两次输出，如下所示，其中包括 NULLS。我想消除 NULL 并获得每列的小计。希望我能得到一些帮助。

```
 Current output:
- NAME   Activated  Deactivated 
- MAX     25          NULL
- MAX     NULL         5
- TAX     40          NULL
- TAX     NULL         10

    Desired output:
  - NAME   Activated  Deactivated 
   - MAX     25          5  
  - TAX     40          10
   -Total    65          15 
```

谢谢。

```
select 
    case 
        when (upper(m.email) like '%max.com') then 'MAX'
        when (upper(m.email) like '%tax.com') then 'TAX'
        else 'OTHER'
        end Name, count(*) 'Activated', null 'Deactivated'
from 
    membership.user_details d
    inner join membership.aspnet_membership m 
        on m.userid = d.userid
    inner join membership.user_notes n 
        on n.userid = d.userid
        and n.created_on = (
            select 
                min(created_on) 
            from 
                membership.user_notes 
            where 
                userid = n.userid
                and note = 'received.'
        )
        and substring(convert(varchar(8),n.created_on,112),1,6) = '201209'
where 
    approved = 1
group by       
    case 
        when (upper(m.email) like '%max.com') then 'MAX'
        when (upper(m.email) like '%tax.com') then 'TAX'
        else 'OTHER'
        end      

union 

select 
    case 
        when (upper(m.email) like '%max.com') then 'MAX'
        when (upper(m.email) like '%tax.com') then 'TAX'
        else 'OTHER'
        end Name,  
    null 'Activated', 
    count(*) 'Deactivated'
from 
    membership.user_details d
    inner join membership.aspnet_membership m 
        on m.userid = d.userid
    inner join membership.user_notes n 
        on n.userid = d.userid
        and n.CREATED_ON = (
            select 
                min(created_on) 
            from 
                membership.user_notes 
            where 
                userid = n.userid
                and note = 'SAAR received.'
        )
        and substring(convert(varchar(8),m.LastLockoutDate,112),1,6) = '201209'
where 
    approved = 1
group by       
    case 
        when (upper(m.email) like '%max.com') then 'MAX'
        when (upper(m.email) like '%tax.com') then 'TAX'
        else 'OTHER'
        end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T15:53:41.480

将和分别更改为`null 'Deactivated'`和，然后执行`null 'Activated'``0'Deactivated'``0'Activated'``GROUP BY Name WITH ROLLUP`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T15:55:00.130

您应该能够将其合并为一个`SELECT`：

```
select 
    case 
        when (upper(m.email) like '%max.com') then 'MAX'
        when (upper(m.email) like '%tax.com') then 'TAX'
        else 'OTHER'
    end Name, 
    SUM(case when substring(convert(varchar(8),n.created_on,112),1,6) = '201209' then 1 else 0 end) 'Activated',
    SUM(case when substring(convert(varchar(8),m.LastLockoutDate,112),1,6) = '201209' then 1 else 0 end) 'Deactivated'
from membership.user_details d
inner join membership.aspnet_membership m 
    on m.userid = d.userid
inner join membership.user_notes n 
    on n.userid = d.userid
    and n.CREATED_ON = (select min(created_on) 
                        from membership.user_notes 
                        where userid = n.userid
                            and note = 'SAAR received.')  
where approved = 1
group by case when (upper(m.email) like '%max.com') then 'MAX'
          when (upper(m.email) like '%tax.com') then 'TAX'
          else 'OTHER' end 
```

这个新版本使用带有`CASE`表达式的聚合函数来获取总数`Activated`和`Deactivated`。`CASE` 检查您使用每个查询的日期。

然后，如果要包括总行，可以使用`GROUP BY with ROLLUP`

# python - 从 boto 运行私有 AMI ec2 实例

> ID：15389958
> 
> 赞同：2
> 
> 时间：2013-03-13T15:45:57.557
> 
> 标签：python, amazon-web-services, amazon-ec2, boto, amazon-ami

两天来我一直在寻找解决问题的方法，但我没有任何迹象表明我在使用 boto 将私有 AMI 作为 EC2 实例运行时做错了什么。我还没有看到任何页面清楚地解释如何做到这一点，或者任何有我的问题的人。

为了更清楚地解释我的问题：

*   我在 Web 界面上创建了一个自定义 AMI（安装了一些包，添加了一些文件）

*   现在我想在我的计算机上使用 Python 脚本自动执行我在 AMI 上执行的任务（如果可能，运行这个特定 AMI 的多个实例）

*   我编写了以下示例代码：

    ```
    import boto.ec2

    conn = boto.ec2.connect_to_region("eu-west-1",
      aws_access_key_id='myAKI',aws_secret_access_key='MySK')

    print (conn)

    reservation=conn.run_instances(image_id='ami-XXXXX',
      instance_type='m1.small',key_name='MyKey') 
    ```

当我运行此代码时，出现错误：

```
EC2Connection:ec2.eu-west-1.amazonaws.com
Traceback (most recent call last):
  File "./myfile.py", line 6, in <module>
    reservation=conn.run_instances(image_id='ami-  XXXX',instance_type='m1.small',key_name='MyKey')
  File "/Library/Python/2.7/site-packages/boto-2.8.0-py2.7.egg/boto/ec2/connection.py", line 722, in run_instances
verb='POST')
  File "/Library/Python/2.7/site-packages/boto-2.8.0-py2.7.egg/boto/connection.py", line   1062, in get_object
    raise self.ResponseError(response.status, response.reason, body)
boto.exception.EC2ResponseError: EC2ResponseError: 400 Bad Request
<?xml version="1.0" encoding="UTF-8"?>
<Response><Errors><Error><Code>AuthFailure</Code><Message>Not authorized for images: [ami- XXXXXXX]</Message></Error></Errors><RequestID>6b653488-332d-4251-abb2-8e7e96e91891</RequestID>    </Response> 
```

有人对如何进行有任何想法吗？我认为可能存在连接问题，但我可以获得公共图像列表。我不知道如何进一步调试。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T17:49:47.143

我认为它试图告诉您与您的 EC2 连接关联的帐户凭据无权访问 AMI。也许它是用不同的帐户创建的？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T16:03:22.617

您应该能够仅使用您的密钥和 ID 进行连接，因此无需指定区域：

```
from boto.ec2.connection import EC2Connection

connection = EC2Connection(<S3_ACCESSKEYID>, <S3_SECRETACCESSKEY>)
print connection 
```

给我：

```
EC2Connection:ec2.us-east-1.amazonaws.com 
```

希望有帮助。

# visual-c++ - 在 MFC 中访问网络驱动器

> ID：15389966
> 
> 赞同：0
> 
> 时间：2013-03-13T15:46:08.557
> 
> 标签：visual-c++, windows-7, mfc

我在我的系统上创建了一个网络驱动器并将其映射到 Z：驱动器号。

只是为了解释这个问题，我在 MFC 中创建了一个简单的程序，用于访问 Windows7 机器上的 MS access 2007 数据库。

在 `CString MyCRecordSet::GetDefaultConnect()`函数内部，我将其用作连接字符串。

```
ODBC;DRIVER={MICROSOFT ACCESS DRIVER (*.mdb)};DSN='';DBQ=Z:\TestFolder\Database1.mdb 
```

如果我正常运行应用程序，一切正常。但是当以“*以管理员*身份运行”身份运行应用程序时，我收到以下错误。

![在此处输入图像描述](../Images/8a7340147d20504df77a2a3b558b4177.png)

另外，如果我尝试使用

> _access("Z:\TestFolder\Database1.mdb", 模式)

api ，那么对于 00、02、04 或 06 的任何模式，此 api 始终返回 -1。

我认为这与 Windows 中用于访问网络驱动器的安全性有关，但不知道究竟是什么问题以及如何处理这种情况。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T16:13:24.593

如果您将 Z 驱动器映射为非管理员，则在以管理员身份运行时将看不到它。

尝试打开一个提升的 cmd 窗口（即以管理员身份运行 cmd），将您的 Z 驱动器映射到那里，然后尝试再次运行您的应用程序。

**编辑**

从命令行共享驱动器：

```
net use [driveletter]: \\server\share /user:[username] password 
```

# wpf - 如何在我的 generic.xaml 中“合并”或使用系统程序集的 ResourceDictionary？

> ID：15389970
> 
> 赞同：0
> 
> 时间：2013-03-13T15:46:16.587
> 
> 标签：wpf, xaml, baml

我特别希望能够为我自己的自定义控件利用一些系统主题模板和定义（颜色和画笔）。我“认为”我应该在我的 generic.xaml 的根元素中使用该元素。

考虑到我应该为“Source”属性使用某种路径，“Aero2”的路径会是什么样子？

这甚至可以接受吗？我可以使用系统主题吗？

编辑：由于这是一个常见的问题主题，这里有一些其他的参考资料。 [如何以编程方式将 WPF 控件的颜色设置为系统颜色，以便在颜色方案更改时更新？](https://stackoverflow.com/questions/628483/how-can-i-set-a-wpf-controls-color-to-a-system-color-programatically-so-that-i) [获取 Aero 窗口颜色](https://stackoverflow.com/questions/13085959/get-aero-window-colour)

我的目标是使用其他 ResourceDictionaries 中定义的颜色——因为它们似乎与“SystemColors”命名空间不匹配。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T15:53:37.503

见[这里](https://stackoverflow.com/questions/3249860/wpf-executable-wont-run-outside-of-visual-studio-resource-dictionary-issue)。

基本上你需要这个：

```
<ResourceDictionary
    Source="/PresentationFramework.Aero, Version=3.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35, ProcessorArchitecture=MSIL;component/themes/aero.normalcolor.xaml" /> 
```

# grails - Grails Plugin Searchable - 默认通配符搜索

> ID：15389971
> 
> 赞同：3
> 
> 时间：2013-03-13T15:46:16.587
> 
> 标签：grails, searchable, grails-searchable

有没有办法用通配符自动包装所有搜索？

例如：

```
 Book.search("*${params.q}*", params) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T20:03:33.810

我不熟悉 .search （你在使用插件吗？）。但是，对于模型中的通配符搜索，我通常在域模型类中创建一个方法。在你的例子中，

在 Book 模型类中：

```
class Book {
   String title
   String author
   int year

   static List wildSearch(par, val) {
      def foundList = this.executeQuery("select b FROM Book b WHERE ${par} like \'%${val}%\'")
      return foundList
   }
} 
```

在您的控制器中：

```
def searchBook = {
   def b1 = new Book(title: "Farewell To Arms", author: "Ernest Hemingway").save()
   def b2 = new Book(title: "The Brother's Karamazov", author: "Anton Chekov").save()
   def b3 = new Book(title: "Brothers in Arms", author: "Cherry Dalton").save()

   // If you search for "Arms", This returns b1 and b3 
   def found = Book.wildSearch("title", params.title)
} 
```

示例网址：

```
http://localhost:8080/mytest/mycontroller/searchBooks?title=Arms 
```

# android - 将数据加载到内容提供程序中

> ID：15389972
> 
> 赞同：0
> 
> 时间：2013-03-13T15:46:23.637
> 
> 标签：android, android-contentprovider

我在 Google 电子表格中有一长串单词及其定义。将这些数据加载到内容提供者中的最佳方式是什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T16:45:30.657

您应该从 sdk 示例中查看名为“Searchable Dictionary”的 Android 示例项目。您可以使用 Android sdk 管理器下载示例。该示例执行的操作与您尝试完成的操作类似。

他们有一个名为 definitions.txt 的文件，其中包含单词及其定义，位于资源下名为“raw”的文件夹中。然后在他们的 SqliteOpenHelper 类中，他们在单独的线程中加载 onCreate 方法中的单词。

这是他们正在运行的方法的片段。

```
private void loadWords() throws IOException {
            Log.d(TAG, "Loading words...");
            final Resources resources = mHelperContext.getResources();
            InputStream inputStream = resources.openRawResource(R.raw.definitions);
            BufferedReader reader = new BufferedReader(new InputStreamReader(inputStream));

            try {
                String line;
                while ((line = reader.readLine()) != null) {
                    String[] strings = TextUtils.split(line, "-");
                    if (strings.length < 2) continue;
                    long id = addWord(strings[0].trim(), strings[1].trim());
                    if (id < 0) {
                        Log.e(TAG, "unable to add word: " + strings[0].trim());
                    }
                }
            } finally {
                reader.close();
            }
            Log.d(TAG, "DONE loading words.");
        } 
```

# html - 如何从 HTML 5 视频中删除像素？

> ID：15389975
> 
> 赞同：0
> 
> 时间：2013-03-13T15:46:24.733
> 
> 标签：html, canvas

到目前为止我所拥有的：http: [//sem.serialshop.nl/video/](http://sem.serialshop.nl/video/)

我的目标是在悬停其中一个按钮时操纵视频像素以在瞳孔内显示相应的信息。我可以删除瞳孔内的像素，并用图像替换它吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T02:40:19.007

**从 mp4 视频中去除像素——去除眼睛瞳孔的像素**

正如 darma 所说，您可能只需使用 context.drawImage() 将图像叠加在瞳孔上即可完成您的项目。这是你如何做到的。

此外，这里是你如何去除瞳孔的像素（如你所问）。

**背景**

您可以拍摄 mp4 视频并将其逐帧绘制到画布中。

画布绘制速度足够快，结果看起来与从中获取的视频一样好。

更有趣的是，您可以在将每一帧绘制到画布中时对其进行操作。这允许您获取瞳孔的像素并替换它们。

处理像素：

*   您可以使用 context.getImageData() 操作画布框架，将像素抓取到数据数组中。
*   然后你以任何你希望的方式操作数据数组。
*   最后，使用 context.putImageData() 将修改后的数据数组放回画布中。
*   然后画布显示修改后的像素！

**您的解决方案**

为了解决您的问题，我们得到了包含瞳孔的边界框。每次我们在那个边界框中看到一个近乎黑色的像素时，我们就知道它是瞳孔，我们可以修改那个近乎黑色的像素。在下面的工作代码中，我们只是将像素从近乎黑色更改为纯红色。但是，您可以对瞳孔像素做任何您想做的事情。

这是使用红色瞳孔像素绘制视频的代码：

```
<!doctype html>
<html>
<head>
<link rel="stylesheet" type="text/css" media="all" href="css/reset.css" /> <!-- reset css -->
<script type="text/javascript" src="http://code.jquery.com/jquery.min.js"></script>

<style>
    body{ background-color: ivory; }
    canvas{border:1px solid red;}
</style>

<script>
$(function(){

    var centerX=315;
    var centerY=150;
    var radius=10;
    var rx=267;
    var ry=98;
    var rwidth=101;
    var rheight=95;

    var video = document.getElementById('vid');
    var canvas = document.getElementById('canvas');
    var ctx = canvas.getContext('2d');

    var cw = 638;
    var ch = 358;
    canvas.width = cw;
    canvas.height = ch;

    video.addEventListener('play', function(){
        draw(this,ctx,cw,ch);
    },false);

    function draw(video,context,w,h) {
        if(video.paused || video.ended) return false;
        context.drawImage(video,0,0,w,h);

        // at this point you could also draw a second image
        // into the pupil of the eye like this
        // context.drawImage(myImage,rx,ry,rwidth,rheight);

        // but what we do here is just put a red bounding box
        // around the pupil so that we can see we are 
        // properly focusing on the pupil area

        context.fillStyle="blue";
        context.strokeStyle="red";
        context.lineWidth=2;
        context.beginPath();
        context.rect(rx,ry,rwidth,rheight);
        context.stroke();
        extractPupil(context);
        setTimeout(draw,150,video,context,w,h);
    }

    function extractPupil(context){
        // get just the bounding rectangle of the pupil
        // NOT the whole canvas.
        var imgData=context.getImageData(rx,ry,rwidth,rheight);
        var data=imgData.data;
        for(var i=0;i<data.length;i+=4){

            // if the pixel color is nearly black--change it to red
            if(data[i]<20 && data[i+1]<20 && data[i+2]<20){
                data[i]=255;
                data[i+1]=0;
                data[i+2]=0;
            }

        }
        // put the modified pixels back into the canvas
        // Now the pupil is colored pure red!
        context.putImageData(imgData,rx,ry);
    }

}); // end $(function(){});
</script>

</head>

<body>
    <canvas id="canvas"></canvas>
    <video id="vid" controls loop>
        <source src="eye.mp4" type=video/mp4>
    </video>
</body>
</html> 
```

# c# - 在 TextBox 中包含 SelectionColor

> ID：15389976
> 
> 赞同：0
> 
> 时间：2013-03-13T15:46:26.087
> 
> 标签：c#, winforms

我需要**TextBox类中名为****SelectionColor**的属性，用于简单的语法荧光笔 - 我不能直接使用 RichTextBox - 它会导致太多问题，这就是我尝试这样做的原因。

 **有没有办法使该属性可用于 TextBox？如果不可能，我会尝试自己编写，但我需要一个关于如何做到这一点的想法，基本上它是如何工作的——它是基于在原始文本上绘制字符串吗？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T15:59:03.047

基本上，将 TextBox 用于纯文本以外的任何内容都是一个坏主意。首先，您最终将获得一个新功能来实现，它在 TextBox 中不存在，您将不得不手动处理它。一段时间后，您将实现自定义 RichTextBox 或类似的东西。

第二，你提到的这个问题，也比较难解决。从技术上讲，您可以覆盖绘画功能（如果您想要 TextBox 的新功能，则*必须这样做）。*然后，您可以让 TextBox 自己绘制并在图像上方绘制彩色文本。**但**不要这样做。你会遇到两个（也许更多）问题：

*   图像闪烁。一旦原始文本框自行绘制，图像就可以显示在屏幕上（如果您不使用双缓冲）。
*   文本对齐。很难将彩色文本准确地放置在黑色文本之上，而且您可能会遇到文本渲染问题：您需要*清除*正在绘制的区域。**

# c# - 锚点与winforms混淆

> ID：15389977
> 
> 赞同：1
> 
> 时间：2013-03-13T15:46:26.133
> 
> 标签：c#, winforms, .net-4.0

因此，如果没有图片，这将很难描述（无法在工作中上传任何内容），但我有一个包含 2 个组框和 2 个按钮的表单，布局如下：

```
group    button    group
box      button    box 
```

我需要做哪些疯狂的锚组合才能使其左框的右边缘、按钮和右框的左边缘保持绝对，而其他一切都自动调整大小？我尝试了左框的顶部、底部、左侧和右侧的顶部、底部、右侧，但这让我产生了一种奇怪的效果，按钮和框之间的空间变大了。

抱歉，描述太弱了，再一次，没有照片很难做到。如果您有任何问题，请在评论中提出，我会尽力而为。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T16:20:53.290

这对`Control.Anchor`. 相反，您可以尝试使用`TableLayoutPanel`：

```
TableLayoutPanel tlp = new TableLayoutPanel()
                       {
                           RowCount = 2,
                           ColumnCount = 3,
                           ColumnStyles = {
                               new ColumnStyle(SizeType.AutoSize),
                               new ColumnStyle(SizeType.Absolute, buttonWidth),
                               new ColumnStyle(SizeType.AutoSize)
                           }
                       };

tlp.Controls.Add(groupBox1, 0, 0);
tlp.Controls.Add(button1, 1, 0);
tlp.Controls.Add(button2, 1, 1);
tlp.Controls.Add(groupBox2, 2, 0);

tlp.SetRowSpan(groupBox1, 2);
tlp.SetRowSpan(groupBox2, 2); 
```

您可能需要使用`ColumnStyle(SizeType.Percent, 50)`而不是自动调整大小，我不确定这种行为。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T15:48:39.657

将所有内容锚定在顶部和左侧。将右侧框锚定到右侧和底部。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T15:54:07.333

您不能将所有三列（组框、按钮、组框）都包装在一个网格中，有 3 列，其中第 1 列和第 3 列具有固定宽度，而中间的具有可变宽度？

我知道这适用于 XAML 窗口。不过，不确定是否使用 WinForms。

# java - 使用 Random 产生两个单独的输出时遇到问题

> ID：15389981
> 
> 赞同：0
> 
> 时间：2013-03-13T15:46:32.060
> 
> 标签：java, random

我正在尝试创建两个单独的 10 列和 10 行数字输出。第一个输出使用数字 4 到 7，第二个输出使用数字 10 到 90（例如 10、20、30 等）。但是随机调用这些号码，而不是按特殊顺序。以下是我拥有的 Java 代码：

```
import java.util.Random;
public class LabRandom
{
private static final Random rand = new Random();
public static void main(String[] args)
{

    int number;

    int i = 1;

    while (i <= 100)
    {
        //number = rand.nextInt(4) + 4;
        System.out.printf("%-5d", rand.nextInt(4) + 4);

        if (i % 10 == 0)
        {
            System.out.println();
        }
        i++;
    }
    System.out.println();

    while (i <= 100)
    {
        //number = rand.nextInt(4) + 4;
        System.out.printf("%-5d", rand.nextInt(10 *(80) + 10));

        if (i % 10 == 0)
        {
            System.out.println();
        }
        i++;
    }
   }    
} 
```

我只是不知道我错过了什么，代码只运行第一个 while 语句而不是第二个 while 语句。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T15:48:19.687

您还没有重新初始化`i`，并且在第一个循环之后，它已经 equal `101`，因此不会进入第二个循环。

正如您对问题的评论中提到的那样，`for`循环在这里是一个更合适的结构。

此外，在第二个循环中，语句：

```
rand.nextInt(10 *(80) + 10) 
```

似乎它不会做你想做的事。你可能需要类似的东西：

```
rand.nextInt(9) * 10 + 10 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T15:50:39.030

在第二个 while 循环之前设置 i 的值。

```
 import java.util.Random;

    public class LabRandom
    {
    private static final Random rand = new Random();
    public static void main(String[] args)
    {

        int number;

        int i = 1;

        while (i <= 100)
        {
            //number = rand.nextInt(4) + 4;
            System.out.printf("%-5d", rand.nextInt(4) + 4);

            if (i % 10 == 0)
            {
                System.out.println();
            }
            i++;
        }
        System.out.println();

i = 1;//modified here

        while (i <= 100)
        {
            //number = rand.nextInt(4) + 4;
            System.out.printf("%-5d", rand.nextInt(10 *(80) + 10));

            if (i % 10 == 0)
            {
                System.out.println();
            }
            i++;
        }
       }    
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T15:48:22.893

您需要`i`在第二次之前重置`while`。

# datatable - 我可以在数据表的（链接）列中使用 onclick 事件设置范围变量吗？

> ID：15389984
> 
> 赞同：0
> 
> 时间：2013-03-13T15:46:39.410
> 
> 标签：datatable, xpages

作用域变量用于将选定的行数据 id 传递给显示更多详细信息的面板。这适用于链接列在视图控件中而不是数据表中的情况。下面的示例使用了一个`requestScope`，但我也尝试`sessionScope`了`viewScope`一个 dialogToolTip 版本的详细信息面板。在每种情况下，都会发生完全或部分刷新，但作用域变量始终为空。注意：数据表通常嵌套在选项卡式面板中，但我也在没有表嵌套的干净 XPage 上对其进行了测试，结果相同。带有扩展库的 Domino 8.5.3 版。

```
<xp:column id="column11">
    <xp:this.facets>
        <xp:label value="INVOICE NBR" id="label7" xp:key="header"
            style="font-weight:bold">
        </xp:label>
    </xp:this.facets>
    <xp:link escape="true" id="link1" value="#{id:column11}">
        <xp:this.text><![CDATA[#{javascript:return rowdoc.getItemValueString("StorInvID");}]]>
        </xp:this.text>
        <xp:eventHandler event="onclick" submit="true"
            refreshMode="complete">
            <xp:this.action><![CDATA[#{javascript:requestScope.invCompare = rowdoc.getItemValueString("StorInvID");}]]></xp:this.action>
        </xp:eventHandler>
    </xp:link>
</xp:column> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T19:24:15.777

在我之后重复： *客户端总是优先于服务器端*:-)

xp:link 控件的 value 属性导致根本不执行服务器端事件。单击链接时，它只是对相关资源执行 HTTP GET。

因此，如果您删除 value 属性，则应该触发您的 onclick 服务器端事件。然后，您可以使用`context.redirectToPage("pagename")`.

# linux - 从命令行将数据传递到 perl 脚本

> ID：15389987
> 
> 赞同：1
> 
> 时间：2013-03-13T15:46:47.070
> 
> 标签：linux, perl

我有一个基于 xml 定义创建报告的 perl 脚本。目前，这些定义都以 .xml 文件的形式存在。

所以我有脚本`run-report.pl`，它可以获取定义文件的路径并创建报告。

现在我想创建`run-reports-from-db.pl`，它将基于相同的数据库条目生成报告定义。我不想创建临时文件以传递给 run-report.pl，我只想以某种方式传递定义。

所以不要说：

```
run-report.pl -def=./path/to/def.xml 
```

我想能够说：

```
run-report.pl --stream 
```

并在中提供报告定义`<STDIN>`

我敢肯定有很简单的方法可以做到这一点？？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T15:52:52.313

如果我正确理解您的问题，您只需要一个`|`（管道）。

```
./generate-xml-from-db.pl | ./run-report.pl --stream 
```

管道中第一个进程打印到的任何内容`stdout`都将出现在第二个进程的`stdin`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T16:22:38.390

只要您从 STDIN*读取，就可以使用它。*请注意您将下面的代码命名`echo.pl`为在命令行运行它并粘贴大量文本会发生什么。

```
#!/usr/bin/perl -w
use 5.010;
use strict;
use warnings;

while ( <> ) { 
    say;
} 
```

`<>`是“从 STDIN 读取”的 Perl 简写。

只要您用于启动进程的方法有办法获取标准输入和输出，您就可以将其写入该句柄。您必须使用可用的方式。例如，在 Java 中，您必须获取进程的输入流，在批处理命令中您必须对其进行管道传输。在 GUI 终端上，您可以剪切和粘贴。

# python - 从 html 表中获取数据并将其发送到金字塔中的视图

> ID：15389988
> 
> 赞同：1
> 
> 时间：2013-03-13T15:46:48.270
> 
> 标签：python, pyramid, pylons

我们使用金字塔和变色龙模板。

目前我们有一个页面，用户可以在其中填写表格。该表的长度可变，因为行是动态添加的。我们想获取表的所有内容并将其放在一个列表中，以便将其发送到我们的数据库。

最大的问题是我们不知道如何将数据发送到列表并获取到我们的视图。some1 可以帮我解决这个问题吗？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T16:19:32.857

我将发布一个使用[jQuery](http://jquery.com/)的示例：

假设这是您的表：

```
<table id="my_table">
    <tr>
        <td>Some text</td>
    </tr>
</table> 
```

然后在 JavaScript 中执行此操作：

```
$.post(
    "{{request.route_url('table_data_view')}}", // chamelon output
    {'data': $("#my_table").html()}
); 
```

我不了解变色龙，所以 url 生成可能是错误的。在金字塔一侧，您现在有类似的东西：

```
@view_config(route_name='table_data_view')
def table_data(request):
    data = request.POST["data"]
    process_data(data)
    return HTTPFound(location=...) 
```

希望这可以帮助。

# ios - MPMoviePlayerViewController 在进入 youtube 后台后播放视频

> ID：15389989
> 
> 赞同：1
> 
> 时间：2013-03-13T15:46:49.080
> 
> 标签：ios, mpmovieplayercontroller, appstore-approval

我在我的应用程序的 info.plist 中为所需的背景模式设置了应用程序播放音频，以保持 mpmovieplayerviewcontroller 在进入后台后不会关闭。它做得很好。但是，Apple 最近拒绝了我的应用程序更新，因为我设置了该属性。

然后我一直在寻找解决方案来做同样的工作，但失败了。为了处理它，我在视图控制器收到 UIApplicationDidEnterBackgroundNotification 时保存了当前播放时间

```
-(void)willEnterBackground {
    NSLog(@"willEnterBackground");
    if (self.mp) {
        playbackTime = self.mp.moviePlayer.currentPlaybackTime;
        [self.mp dismissModalViewControllerAnimated:YES];
    }
} 
```

并在收到 UIApplicationWillEnterForegroundNotification 后设置 currentPlayBackTime：

```
- (void)willEnterForeground {
    NSLog(@"willEnterForeground");

    if (!self.mp)
        return;
    if(self.mp.moviePlayer.playbackState == MPMoviePlaybackStateInterrupted || self.mp.moviePlayer.playbackState == MPMoviePlaybackStateStopped || self.mp.moviePlayer.playbackState == MPMoviePlaybackStatePaused)
    {
        [self continuePlayback];
    }
}

- (void)continuePlayback {
    NSLog(@"%f", self.mp.moviePlayer.duration);
    NSLog(@"%f", playbackTime);
    [self.mp.moviePlayer stop];
    self.mp = [[MPMoviePlayerViewController alloc] initWithContentURL:[NSURL URLWithString:[self.videos objectForKey:@"medium"]]] ;
    [self.mp.moviePlayer setInitialPlaybackTime:playbackTime];
    [self.mp.moviePlayer play];
    [self presentModalViewController:self.mp animated:YES];
} 
```

它可以工作，但需要权衡：当我重新启动它时，它丢失了流式视频部分。用户需要再次等待流式传输。

我的问题来了：

1.  有没有办法在应用程序处于后台时继续流式传输 Youtube 的视频？
2.  或者如何保持流式传输的部分？

如果我跳过该行，它将从视频的开头播放：

```
self.mp = [[MPMoviePlayerViewController alloc] initWithContentURL:[NSURL URLWithString:[self.videos objectForKey:@"medium"]]] ; 
```

在 continuePlayBack 方法或我 setCurrentPlayBackTime 而不是 setInitPlayBackTime。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T20:53:35.777

你在那里发现的东西是完全正常的——很奇怪，但很正常。仅在新实例上使用`MPMoviePlayerController`时才尊重。`initialPlaybackTime`我确实敦促您提交关于该问题的错误报告，因为它自古以来就已知（iOS3）但未修复。

没有办法保持缓冲区状态，您起草的解决方案与我在许多应用程序中使用的几乎相同。

* * *

现在直接回答你的问题；

重新 1) 是和否。正如您自己发现的那样，Apple 确实对`UIBackgroundModes`使用非常苛刻。尽管他们明确建议使用它来实现不间断的 AirPlay 流（视频和音频内容），但当他们所做的只是播放视频时，他们仍然拒绝应用程序。我还认为苹果审查团队方面的一次史诗般的失败。您可能想尝试与他们的拒绝作斗争，引用他们自己的文档：

> **重要提示：** UIBackgroundModes 音频键将允许应用使用 AirPlay 在后台流式传输音频或视频内容。

来自：http: [//developer.apple.com/library/ios/#qa/qa1668/_index.html](http://developer.apple.com/library/ios/#qa/qa1668/_index.html)

re 2) 否（见介绍性答案文本）

* * *

让我也从不同的角度来解决这个问题......

如果您的问题实际上是在 iOS5 上设备在通过 AirPlay 流式传输时进入睡眠模式。然后，实际上有一种可能的解决方法至少可以工作 - 即使它非常讨厌......

您可以在 hooked 方法中注册`MPMoviePlayerIsAirPlayVideoActiveDidChangeNotification`并检查 。`airPlayVideoActive`一旦 AirPlay 处于活动状态，只需通过设置`[UIApplication sharedApplication].idleTimerDisabled = YES;`记住在 AirPlay 变为非活动状态后执行相反的操作来防止空闲。所有这些都应该只在 iOS5 上需要，因为 iOS6 修复了 AirPlay 处于活动状态时的空闲问题。

# java - Java中的懒惰类？

> ID：15389994
> 
> 赞同：19
> 
> 时间：2013-03-13T15:46:57.973
> 
> 标签：java, generics, casting

`ClassCastException`有人可以告诉我为什么我在这个片段中没有得到 a吗？我对为什么它没有像我预期的那样工作非常感兴趣。在这一点上，我不在乎这是否是糟糕的设计。

```
public class Test {
  static class Parent {
    @Override
    public String toString() { return "parent"; }
  }

  static class ChildA extends Parent {
    @Override
    public String toString() { return "child A"; }
  }

  static class ChildB extends Parent {
    @Override
    public String toString() { return "child B"; }
  }

  public <C extends Parent> C get() {
    return (C) new ChildA();
  }

  public static void main(String[] args) {
    Test test = new Test();

    // should throw ClassCastException...
    System.out.println(test.<ChildB>get());

    // throws ClassCastException...
    System.out.println(test.<ChildB>get().toString());
  }
} 
```

这是 java 版本、编译和运行输出：

```
$ java -version
java version "1.7.0_17"
Java(TM) SE Runtime Environment (build 1.7.0_17-b02)
Java HotSpot(TM) 64-Bit Server VM (build 23.7-b01, mixed mode)
$ javac -Xlint:unchecked Test.java
Test.java:24: warning: [unchecked] unchecked cast
    return (C) new ChildA();
               ^
  required: C
  found:    ChildA
  where C is a type-variable:
    C extends Parent declared in method <C>get()
1 warning
$ java Test
child A
Exception in thread "main" java.lang.ClassCastException: Test$ChildA cannot be cast to Test$ChildB
  at Test.main(Test.java:30) 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-13T15:59:09.607

这是由于类型擦除。编译时，编译时

```
public <C extends Parent> C get() {
  return (C) new ChildA();
} 
```

只需检查它`ChildA`是的子类型，`Parent`因此强制转换肯定不会失败。它确实知道您处于不稳定的状态，因为它`ChildA`可能无法分配给 type `C`，因此它会发出未经检查的强制转换警告，让您知道可能会出错。（为什么它允许代码编译，而不仅仅是拒绝它？语言设计选择的动机是 Java 程序员需要以最少的重写迁移他们的旧的预泛型代码。）

现在至于为什么不会失败：类型参数`get()`没有运行时组件；`C`编译后，类型参数简单地从程序中删除并替换为其上限 ( `Parent`)。因此，即使类型参数与 不兼容，调用也会成功`ChildA`，但是当您第一次实际尝试将结果`get()`用作强制转换`ChildB`(from `Parent`to `ChildB`) 时，会发生异常，并且会出现异常。

故事的寓意：将未经检查的强制转换异常视为错误，除非您可以向自己证明强制转换总是会成功。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-03-13T16:03:36.340

[类型擦除](http://docs.oracle.com/javase/specs/jls/se7/html/jls-4.html#jls-4.6)：泛型只是被编译器删除（出于兼容性原因）并*在需要时*由强制转换替换的语法特性。

在运行时，该方法`C get`不知道的类型`C`（这就是你不能实例化的原因`new C()`）。的调用`test.<ChildB>get()`实际上是 的调用`test.get`。`return (C) new ChildA()`被转换为，`return (Object) new ChildA()`因为无界类型的擦除`C`是`Parent`（它的最左边的边界）。然后，不需要强制转换，因为`println`需要`Object`as 参数。

另一方面`test.<ChildB>get().toString()`失败，因为`test.<ChildB>get()`在`ChildB`调用`toString()`.

请注意，类似的调用`myPrint(test.<ChildB>get())`也会失败。从`Parent`返回的`get`类型转换`ChildB`为在`myPrint`调用时完成。

```
public static void myPrint(ChildB child) {
  System.out.println(child);
} 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-03-13T16:03:46.073

查看生成的字节码：

```
12  invokevirtual Test.get() : Test$Parent [30]
15  invokevirtual java.io.PrintStream.println(java.lang.Object) : void [32]
18  getstatic java.lang.System.out : java.io.PrintStream [24]
21  aload_1 [test]
22  invokevirtual Test.get() : Test$Parent [30]
25  checkcast Test$ChildB [38]
28  invokevirtual Test$ChildB.toString() : java.lang.String [40]
31  invokevirtual java.io.PrintStream.println(java.lang.String) : void [44] 
```

第一次调用`println`只使用调用的`Object`版本，因此不需要强制转换。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2013-03-13T16:30:00.587

如果编译时类型检查被未经检查的强制转换规避，那么从阅读 JLS 中不清楚何时应该进行运行时类型检查。我猜编译器可以假设类型是正确的，并且它可以尽可能晚地延迟运行时检查。这是一个坏消息，因为它取决于每个编译器的特性，因此程序的行为没有得到很好的定义。

显然，编译器将第一个转换`println`为

```
Parent tmp = test.<ChildB>get();  // ok at runtime
System.out.println(tmp); 
```

我们不能将任何错误归咎于编译器，这是完全合法的。

编译器还可以将代码转换为

```
ChildB tmp = test.<ChildB>get();  // fail at runtime
System.out.println(tmp); 
```

因此，对于这样一个简单的程序，JLS 未定义运行时行为。

* * *

2nd 的行为`println`也未定义。编译器可以毫无问题地推断出它`toString()`是来自超类的方法，因此它不需要强制转换为子类

```
Parent tmp = test.<ChildB>get();  
String str = tmp.toString();
System.out.println(str); 
```